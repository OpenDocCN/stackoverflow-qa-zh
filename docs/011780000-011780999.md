# StackOverflow 问答 11780000-11780999

# c# - 使用 HTTP 响应传输文件的正确方法是什么？

> ID：11780000
> 
> 赞同：1
> 
> 时间：2012-08-02T14:46:37.567
> 
> 标签：c#, file, httpresponse, transfer

我正在尝试构建能够传输文件的简单 Web 服务器。
我知道，有很多示例，但是对于从未使用过 HTTP 的人来说，其中大多数都太复杂而无法理解
所以我有...

```
 public Hashtable MimeTypes = new Hashtable();

    public HttpServer(int port)
    {
        this.port = port;

        MimeTypes.Add("html", "text/html");
        MimeTypes.Add("htm", "text/html");
        MimeTypes.Add("css", "text/css");
        MimeTypes.Add("js", "application/x-javascript");

        MimeTypes.Add("png", "image/png");
        MimeTypes.Add("gif", "image/gif");
        MimeTypes.Add("jpg", "image/jpeg");
        MimeTypes.Add("jpeg", "image/jpeg");
    }

    public void writeSuccess(string mime_type, string file_name, int file_size)
    {
        outputStream.Write("HTTP/1.0 200 OK\n");
        outputStream.Write("Content-Type: " + mime_type + "\n");

        if (file_name != null)//if file name isn't null, this mean we need to add additional headers
        {
            outputStream.Write("Content-Disposition: attachment; filename=" + file_name);
            outputStream.Write("Content-Length: " + file_size);
        }

        outputStream.Write("Connection: close\n");
        outputStream.Write("\n");
    }

public override void handleGETRequest(HttpProcessor p)
{
    Console.WriteLine("request: {0}", p.http_url);

    byte[] file_content = null;

    try { file_content = File.ReadAllBytes(work_folder + p.http_url); } //tring to read requested file
    catch (Exception exc) { p.writeFailure(); return; } //return failure if no such file

    string[] splitted_html_url = p.http_url.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries ); //splitting url for future format check

    string mime_type = "application/octet-stream"; //the most generic type

    if (MimeTypes.Contains(splitted_html_url[splitted_html_url.Length - 1]))
        mime_type = (string)MimeTypes[splitted_html_url[splitted_html_url.Length - 1]]; //set mimy type that math to requested file format

    if (mime_type.Contains("image") || mime_type == "application/octet-stream") //hacky thing for tests...
        p.writeSuccess(mime_type, p.http_url.Remove(0, 1), file_content.Length); //if mime type is image or unknown, than pass file name and length to responce builder
    else
        p.writeSuccess(mime_type, null, 0); //er else just add general headers

    p.outputStream.Write(Encoding.ASCII.GetString(file_content)); //write file content after headers
} 
```

它适用于 HTML 传输，但我不能让它传输图像 :(
如果我用这个标签制作 html 页面：

```
<img src = "logo225x90.gif" width = "100%" height = "100%" /> 
```

并将此文件放在正确的目录中，它仍然在浏览器中显示为丢失文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:39:12.163

我认为你犯了多个错误。

*   您假设您可以避免示例代码的所有复杂性。
*   与其粘贴你的代码并让别人做你的工作，你应该对自己进行有关 HTTP 的教育——这对于你的任务范围来说应该不会太难
*   您正在编写代码来执行可以由运行您的代码的 IIS 完成的操作（如果您在 IIS 上运行您的代码）
*   您正在将文件写为字符串`p.outputStream.Write(Encoding.ASCII.GetString(file_content)); //write file content after headers`

我建议：

*   不要使用您正在使用的 CodeProject 示例；
*   尝试 [ServiceStack](http://www.servicestack.net/)项目（您可能想阅读[ServiceStack 并返回一个流](https://stackoverflow.com/questions/10040680/servicestack-and-returning-a-stream)）

# mysql - ORDER BY 的方向阻止 MySQL 使用索引

> ID：11780001
> 
> 赞同：1
> 
> 时间：2012-08-02T14:46:40.127
> 
> 标签：mysql, indexing, sql-order-by

在一个 MySQL 数据库表中，我有以下索引：

*   类型：BTREE
*   独特的：没有
*   包装：没有
*   字段：姓氏，名字，年龄

当我做这样的查询时......

```
SELECT firstname, lastname FROM table ORDER BY lastname ASC, firstname ASC, age DESC 
```

... MySQL 不使用索引。

但是当我也按升序使用“年龄”时，它确实：

```
SELECT firstname, lastname FROM table ORDER BY lastname ASC, firstname ASC, age ASC 
```

为什么会这样？列是否总是仅按升序索引？或者我也可以按降序使用它们吗？为什么我不能使用混合订单？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:54:22.793

此时（MySQL 5.6 及更低版本）索引都是按升序实现的。

如果在 ORDER 子句中混合顺序（ASC 与 DESC），则索引不能在顺序更改的点之外使用。

如果指定all ASC，索引可以被充分利用，如果指定所有DESC，它仍然可以被充分利用，只有MySQL会向后遍历索引。

您可以添加另一个具有反向年龄 (max_age - age) 的列，并对其进行索引，以便您可以对所有列使用 ASC。

# ios - 从uiscrollview中的uibutton触发父uiviewcontroller中的方法

> ID：11780005
> 
> 赞同：1
> 
> 时间：2012-08-02T14:46:49.187
> 
> 标签：ios, xcode, ipad, uiviewcontroller, uiscrollview

我在 uiviewcontroller 内的 uiScrollview 中有一个 uibutton。当我单击按钮时，我希望能够调用 uiviewcontroller 中的方法。

我在我的 uiscrollview 中调用方法的按钮上有以下操作：

[categoryButton addTarget:self action:@selector(categoryButtonWasClicked:) forControlEvents:UIControlEventTouchUpInside];

但这只是在我的 uiscrollview 中调用一个方法（我仍然会保留）。然后我如何调用视图控制器中的方法？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:06:02.947

`enter code here`尝试做这样的事情

```
#import <UIKit/UIKit.h>

@protocol myUIScrollViewProtocol <NSObject>

    -(void)buttonWasPressInScrollView:(id)sender;

@end

@interface MyUIScrollView : UIScrollView

@property (weak, nonatomic)id myDelegate;

@end 
```

创建 UIScrollView 的子类并添加一个委托，然后将您的 UIViewController 分配为委托并在其中实现“buttonWasPress..”方法。

然后从 uiScrollView 中的 categroryButtonWasClicked 方法：

```
 -(void)categoryButtonWasClicked{
    if ([self.myDelegate respondsToSelector:@selector(buttonWasPressInScrollView:)]){
        [self.myDelegate buttonWasPressInScrollView:self];
    }
...
} 
```

在您的 viewController 的 .h 中添加以下内容

```
@interface MyViewController : UIViewController <myUIScrollViewProtocol> 
```

# redirect - 在站点级别配置 IIS7 HTTP 重定向

> ID：11780009
> 
> 赞同：3
> 
> 时间：2012-08-02T14:47:02.310
> 
> 标签：redirect, iis-7

在配置 IIS 7 HTTP 重定向时，似乎有一个选项可以在服务器级别进行设置，也可以选择为各个站点设置此选项。

但是，在使用 IIS 管理器时，如果我更改一个站点的设置，它会覆盖其他站点的设置。

例如：如果我设置：

```
gubbin.com >> www.gubbin.com 
```

效果很好

如果我然后进入monkey.com并添加重定向

```
monkey.com >> www.monkey.com 
```

当我回到 gubbin.com 时，我发现它已被覆盖：

```
gubbin.com >> www.monkey.com 
```

这是 IIS 的限制（即一次只能处理一个重定向）还是管理器应用程序中的错误？

我可以通过在某个地方编辑配置来获得所需的结果 - 还是我需要获取 URL 重写器或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:53:54.097

哦。

IIS 管理器只是编辑站点的 web.config - 因此将重定向部分放入配置中：

```
<configuration>
   <system.webServer>
      <httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Found">
         <add wildcard="*.php" destination="/default.htm" />
      </httpRedirect>
   </system.webServer>
</configuration> 
```

我遇到的问题是我将重定向站点设置为指向同一个文件夹（因为没有内容，似乎不值得为每个文件夹设置一个完整的文件夹结构）

解决方案是为每个站点创建一个文件夹，仅用于存储重定向的 web.config。

# rdf - Sparql - 删除查询在更新后停止工作

> ID：11780014
> 
> 赞同：1
> 
> 时间：2012-08-02T14:47:15.413
> 
> 标签：rdf, sesame

我创建了一个应用程序，它与 openrdf sesame 和 owlim 模块一起使用。最近，我需要更新 owlim 的许可证密钥（我收到了最新 owlim 版本的密钥），所以我也被迫更新了 sesame。

应用程序是用 sesame 2.6.0 和 owlim 4.3 构建的，现在更新到 sesame 2.6.8 和 owlim 5.2

删除 sparql 查询存在问题，它适用于旧版本，所以我有预感，更新就是问题所在。

这是一个这样的查询：

```
PREFIX oporg: <http://sesame.company.org/OPropertiesOrg#>

WITH <users:>
DELETE {
?userID oporg:sessionID ?sessionID
}
INSERT {
?userID oporg:sessionID "qafnsi9p1172c0dprf9e4bhm23"
}
WHERE{
?userID oporg:name "admin"
} 
```

这应该（据我记得:) 删除每个`sessionID`三元组`userID=admin`并插入新的`sessionID`三元组。

插入部分有效，但删除部分无效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T00:45:31.013

这不再起作用的原因是您的 DELETE 子句包含一个`?sessionID`永远不会绑定到任何地方的值的变量 ()，因此在计算操作期间，这会转换为不完整的三元组模式并被忽略。

在早期版本的 Sesame 中，DELETE 子句中的未绑定变量被解释为表示通配符。但是，这与 SPARQL 规范相冲突，因此在 Sesame 版本 2.6.7 中作为一个错误进行了修复。有关详细信息，请参阅[http://www.openrdf.org/issues/browse/SES-1047](http://www.openrdf.org/issues/browse/SES-1047)。

`?sessionID`您应该通过将模式添加到 WHERE 子句来稍微修改您的 DELETE 操作，如下所示：

```
PREFIX oporg: <http://sesame.company.org/OPropertiesOrg#>

WITH <users:>
DELETE {
   ?userID oporg:sessionID ?sessionID
}
INSERT {
   ?userID oporg:sessionID "qafnsi9p1172c0dprf9e4bhm23"
}
WHERE{
   ?userID oporg:name "admin" ; 
           oporg:sessionID ?sessionID .
} 
```

# vb.net - 简单的一些函数返回“溢出异常”

> ID：11780016
> 
> 赞同：1
> 
> 时间：2012-08-02T14:47:20.827
> 
> 标签：vb.net

这段代码总是通过**算术溢出异常**。怎么了 ？

```
Function ChannelSum(ByVal C As System.Drawing.Color) As Integer
    Dim temp As Integer : temp = (C.R + C.G + C.B)
    Return temp
End Function

...

Dim x, y, R, G, B, a As Integer : Dim tmp As Color
bmp = New Bitmap(picBox.Tag.ToString)
xMax = bmp.Width - 1 : yMax = bmp.Height - 1
For x = 0 To xMax Step 1
    For y = 0 To yMax Step 1
        tmp = bmp.GetPixel(x, y) : a = ChannelSum(tmp)
    Next y
Next x 
```

循环在第一次相遇时中断！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:53:48.020

CR 和其他都是字节字段，最多只能容纳 255 的值。将字节字段加在一起会产生大于 255 的数字。首先对每个颜色元素使用 CInt()。

```
 temp = (CInt(C.R) + CInt(C.G) + CInt(C.B)) 
```

# java - 使用哪种数据结构？

> ID：11780018
> 
> 赞同：1
> 
> 时间：2012-08-02T14:47:25.590
> 
> 标签：java, data-structures

我有一个这样的场景，我需要存储字符串的数量，我需要返回前十个具有最大数量的字符串，

例如，

```
String    Count
---------------------------------
String1   10
String2   9
String3   8 
.
.
.
String10  1 
```

我正在考虑使用哈希表来存储字符串及其计数，但是很难从中检索前十个字符串，因为我必须再次循环遍历它才能找到它们。

这里还有其他建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:50:25.583

优先权。

您可以创建一个类来放入它：

```
public class StringHolder{
    private String string;
    private int value;

    //Compare to and equals methods
} 
```

然后它会在您插入时进行排序，并且很容易获得前 10 名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:52:03.353

只需使用排序地图，如

```
Map<Integer, List<String>> strings 
```

其中键是频率值，值是以该频率出现的字符串列表。

然后，循环遍历地图，并通过值列表进行内部循环，直到您看到 10 个字符串。这些是最常见的 10 个。

* * *

*算法应该支持频率更新*的*附加*要求：将字符串添加到映射中，例如键是字符串，值是实际频率（如果再次看到字符串，则增加值）。*之后*将键/值对复制到我上面建议的映射中。*`Map<String, Integer>`*

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:52:00.743

对于诸如“查找 N 个最重要的项目”之类的任何任务，优先级队列都是完美的解决方案。请参阅 Java 的[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:59:32.187

我不确定，但我想最适合您需求的优雅类是番石榴的 [http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultiset.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultiset.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T15:04:15.753

Guava 有一个 HashMultiset 对此非常有用。

```
HashMultiset<String> ms = Hashmultiset.create();
ms.add(astring);
ms.add(astring, times);

ImmutableMultiset<String> ims = Multisets.copyHighestCountFirst(ms);

// iterator through the first 10 elements, and they will be your top 10
// from highest to lowest. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T17:01:04.617

为此，您需要一个 Max Heap 数据结构。将其全部放入最大堆中，并连续进行 10 次（或任何 n 次）删除。

而且，如果您打算在将数据加载到内存后继续重用数据，那么按值排序而不是按堆排序可能是值得的。**

# java - java中的正则表达式用于密码验证

> ID：11780022
> 
> 赞同：0
> 
> 时间：2012-08-02T14:47:32.723
> 
> 标签：java, regex, validation

我使用正则表达式进行密码验证：这个正则表达式不是我创建的..

```
 public final Pattern PASSWORD = Pattern.compile("[(?=.*[a-zA-Z])]"
                + "[(?=.*d)]" + "[(?=.*[^a-zA-Z0-9s])]" + "[.{6s,}]"); 
```

我正在尝试为密码创建一个 6 个字母长、一个数字和一个大写字母的正则表达式

我不知道如何阅读正则表达式...建议一些学习正则表达式的教程，并且模式 PASSWORD 是否满足我的条件.. 如果不是，那么我需要在我的正则表达式中进行哪些更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:51:18.237

我搜索的第一件事显示了使用正则表达式验证密码的示例：[http ://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:52:12.933

主要问题是`[...]`您的表达式周围有字符类。这可能会更好：

```
"^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[^a-zA-Z0-9\\s]).{6,}" 
```

我也更改`d`为`\\d`和`s`。`\\s`

这表示：

```
(?=.*[a-zA-Z]) [a-zA-Z] 中至少有一个字符
(?=.*\d) 至少一位数。
(?=.*[^a-zA-Z0-9\s]) 至少有一个字符不在 [a-zA-Z0-9\s] 中
.{6,} 至少 6 个字符。

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:02:19.963

试着把它放在一行中：

```
((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}) 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:53:40.313

无论你有什么，它都非常非常奇怪。我不会在这里详细介绍，因为 Pshemo 在评论中指出的教程更适合于此。

根据您的要求，您可以使用

```
^(?=.*[A-Z])(?=.*\d).{6}$
 ↑          ↑       ↑
 │          │       six characters in total
 │          at least one digit
 at least one upper-case letter 
```

# objective-c - 创建自定义表格单元格，无法访问属性

> ID：11780023
> 
> 赞同：1
> 
> 时间：2012-08-02T14:47:36.333
> 
> 标签：objective-c, ios, uitableview

重要编辑：我发布了错误的错误代码，就像一个白痴。我发布错误是因为我之前尝试解决该问题，而不是第一个错误。请忽略我的愚蠢。

我正在 Xcode 中创建 Facebook Feed 应用程序，但在为表格创建自定义单元格时遇到了麻烦。我正在尝试将值分配给自定义单元格上的两个 UILabel，它给了我错误“'JSONFeedItemCell' 没有可见的@interface 声明选择器'nameLabel'”。我的代码如下：

主视图控制器

```
- (void)viewDidLoad
{
    UINib *nib = [UINib nibWithNibName:@"JSONFeedItemCell" bundle:nil];
    [[self tableView] registerNib:nib forCellReuseIdentifier:@"JSONFeedItemCell"];
    ... // other stuff, not relevant
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    JSONFeedItemCell *cell = [tableView dequeueReusableCellWithIdentifier:
                              @"JSONFeedItemCell"];

    NSDictionary *p = [[[JSONFeedItemStore sharedStore] allItems] 
                              objectAtIndex:[indexPath row]];
    [[cell nameLabel] setText:@"The Name"];
    return cell;
} 
```

细胞类

```
#import <Foundation/Foundation.h>

@interface JSONFeedItemCell : UITableViewCell
{

}

@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) IBOutlet UILabel *detailLabel;
@property (weak, nonatomic) IBOutlet UILabel *nameLabel; 
```

@结尾

如果您需要任何其他信息或代码，请告诉我，我很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:27:34.253

两件事：你必须确定。

```
#import "JSONFeedItemCell.h"  //in your mainViewController.h 
```

而且，正如 Wolfgang Schreurs 建议的那样，对单元格进行类型转换：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    JSONFeedItemCell *cell = (JSONFeedItemCell *)[tableView dequeueReusableCellWithIdentifier:
                              @"JSONFeedItemCell"];

    NSDictionary *p = [[[JSONFeedItemStore sharedStore] allItems] 
                              objectAtIndex:[indexPath row]];
    [[cell nameLabel] setText:@"The Name"];
    return cell;
} 
```

编辑：由于您不使用自定义设置器/获取器，因此您必须在`JSONFeedItemCell.m`

```
@synthesize imageView;
@synthesize detailLabel;
@synthesize nameLabel; 
```

如果您忘记这样做，编译器应该会警告您，但所有可能的编译器设置都是您永远不知道的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T17:06:29.417

你可能有类似的东西，我称之为圆形导入？当您有 2 个相互导入的类时，Xcode 会变得一团糟。Xcode 有时会显示像这样的“随机”错误。有时有助于清理和组织项目，并重新启动电脑。我实际上不知道为什么，但有时它会有所帮助。

# c - 函数指针列表呢？

> ID：11780027
> 
> 赞同：0
> 
> 时间：2012-08-02T14:47:42.450
> 
> 标签：c, function, pointers, function-pointers

> **可能重复：**
> [如何使用函数指针数组？](https://stackoverflow.com/questions/252748/how-to-use-array-of-function-pointers)

我想知道如何在 C 中声明函数指针的**动态**列表？使用指向函数指针的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:53:35.183

指向函数指针的指针，您可以使用它来指向动态分配的内存块。假设函数类型是`void (int)`：

```
void (*(*))(int) // Bare type
void (*(*f))(int) // Variable 
```

或者您可能需要一个数组来指向函数指针，在这种情况下：

```
void (*[10])(int) // Bare type
void (*af[10])(int) // Variable 
```

您可以更改函数的参数和返回类型。

函数指针数组可以用作从数字到要执行的函数的映射。这是进行仿真的一种方法——例如，在您从指令中获取操作码后，您可以使用指针数组执行操作。（这是这样做的一种方法，但我不确定它是否实际上是在仿真代码中完成的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:53:27.257

是的，您可以拥有一组函数指针。

这可能很有用，例如用于为特定事件收集一组回调函数。

例如，考虑`addEventListener`在浏览器中实现 DOM 元素，其中任何 DOM 元素都可以有多个`click`事件。一个简单的数据结构可能是：

```
void (*clickHandlers[MAX_EVENT_HANDLERS])(EventData arg); 
```

对于*动态*列表，然后使用分配函数指针缓冲区`malloc`，并且`realloc`您需要更多空间：

```
void (**clickHandlers)(EventData arg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:55:03.113

对于动态列表，您可以使用基本链表：

```
struct list {
   int (*func)(int, float, double);
   struct list *next;
} 
```

或根据需要调整大小的函数指针数组。

# c++ - iOS中向量的内存泄漏

> ID：11780038
> 
> 赞同：0
> 
> 时间：2012-08-02T14:48:26.910
> 
> 标签：c++, ios, memory-management, memory-leaks, vector

当我在 C++ 对象中使用浮点向量向量时，iOS 中出现内存泄漏。

在我的对象声明中：

```
class object {
    // ...
    vector< vector < float > > m_vBuffers;
} 
```

在构造函数中：

```
m_vBuffers.resize( uNumBuffers );
for( uint iBuf= 0; iBuf < uNumBuffers; ++iBuf )
    m_vBuffers[iBuf].resize( uMaxLength ); 
```

现在，仪器向我显示了调整大小操作的构造函数中的泄漏。我怎样才能解决这个问题？
（另外，我认为非指针向量的向量不必显式删除？错了吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:23:03.750

是的，这实际上是我的对象的破坏问题，而不是向量的问题。我没有正确考虑 Instruments 堆栈跟踪。

# ruby-on-rails - 红宝石打印数据库内容

> ID：11780039
> 
> 赞同：0
> 
> 时间：2012-08-02T14:48:28.050
> 
> 标签：ruby-on-rails, ruby

我是 Ruby 的新手。我必须渲染数据库结构，使用教程我找到了合适的代码：

文件 index.html.erb：

```
<h1>Listing tasks</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Content</th>
    <th>Date From</th>
    <th>Date To</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @tasks.each do |task| %>
  <tr>
    <td><%= task.title %></td>
    <td><%= task.content %></td>
    <td><%= task.datefrom %></td>
    <td><%= task.dateto %></td>
    <td><%= link_to 'Show', task %></td>
    <td><%= link_to 'Edit', edit_task_path(task) %></td>
    <td><%= link_to 'Destroy', task, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Task', new_task_path %> 
```

现在我想按“日期来源”值对任务进行分组，这可能意味着在 index.html.erb 中我应该只打印日期，然后单击日期我应该调用另一个 html 文件，该文件将按所选日期呈现任务。

这可以像

文件 index.html.erb：

```
<h1>Listing dates</h1>

<table>
  <tr>
    <th>Date From</th>

<% @tasks.each do |task| %>
  <tr>
    <td><%= !!! IF DATE NOT PRINTED THEN PTINT IT task.datefrom %></td>
    <td><%= link_to 'Edit', edit_date_path(task, date) %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Task', new_task_path %> 
```

在哪里 edit_date_path(task, date) 应该让我参考 index_date.html.erb，我可以在其中获取选定的日期并根据选定的日期打印任务。

也许我可以得到建议，如果有人可以帮助我，这会容易得多，因为任务应该不是很困难，但否则我会浪费很多时间在谷歌上搜索。

谢谢，乌玛斯。

编辑问题。

这有点帮助。我现在所做的，我将 index.html.erb 更改为

```
 <h1>Listing dates</h1>

<table>
  <tr>
    <th>Date To</th>
    <th></th>
  </tr>

<% dates = Array.new %>
<% @tasks.each do |task| %>

<% if ( !dates.include?(task.dateto.strftime("%m.%d.%Y")) ) then
    dates.push task.dateto.strftime("%m.%d.%Y")
%>

  <tr>
    <td><%= task.datefrom.strftime("%m.%d.%Y") %></td>
    <td><%= link_to 'Show Date',  {:action => "index", :date => task.dateto}   %></td> <-- This does not work
  </tr>

<%
   end
%>

<% end %>
</table>

<br />

<%= link_to 'New Task', new_task_path %> 
```

应将“显示日期”链接链接到 show_date.html.erb，其中是在输入日期通过时显示记录的正确代码。

我在控制器中也添加了方法

```
def show_date
    @tasks = Task.find(params[:dateto])
    @dateto = :dateto

    respond_to do |format|
      format.html # showdate.html.erb
      format.json { render :json => @tasks }
    end
 end 
```

可以在不工作的链接中使用，将数据传递给“显示日期”（show_date.html.erb），但我总是出错。问题在于正确取消show_date.html.erb，我将能够自己编写代码:)

乌尔马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:13:42.320

找到了解决方案。

有必要添加到 routes.rb

```
resources :tasks do
  member do
    get 'showdate'
  end
  get "home/index"
end 
```

添加相应的控制器处理

```
def showdate
  @task = Task.find(params[:id])
  @tasks = Task.find(:all)

  respond_to do |format|
    format.html # showdate.html.erb
    format.json { render :json => @tasks }
  end
end 
```

并使用 (index.html.erb) 调用它

```
<td><%= link_to 'Show Date', showdate_path(task.id)  %></td> 
```

所有进一步的处理已经在 showdate.html.erb 中。

希望这可以帮助某人。

我是最好的！！！！xD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:30:26.610

在任务控制器中：

添加方法

```
def index_date

@tasks = Task.all

end 
```

并创建一个 index_date.html.erb 写入

```
<% @tasks.each do |task| %>   
<tr>     <td><%= task.datefrom %></td>
          <td><%= link_to 'Edit', {:action => "index", :date => task.datefrom} %></td>
</tr>
<%end%> 
```

并在控制器中的 index 方法中更改

`@tasks = Task.all`至

```
@tasks = Task.find_all_by_datefrom(#{params[:date]) 
```

这将列出与所选日期匹配的任务，并且此后的所有内容都将与现在相似。

# java - 如何使用 Spring RestOperations 在单元测试中发送一个 PageRequest 对象？

> ID：11780046
> 
> 赞同：1
> 
> 时间：2012-08-02T14:48:37.223
> 
> 标签：java, spring, spring-mvc

使用最新的 Spring-MVC (3.1.2.RELEASE)

我有一个可分页的 REST 方法，例如：

```
@RequestMapping(value = "/myThings", method = RequestMethod.GET)
public @ResponseBody
Page<MyThings> findMyThings(@Valid PageRequest pageRequest) {
    Page<MyThings> myThings = myService.findMyThings(pageRequest);
    return myThings;
} 
```

尝试使用 org.springframework.web.client.RestOperations 进行测试。一切正常，尤其是对于不可分页的请求。但是，对于可分页的对象，在 REST 方法中接收到的“pageRequest”对象是由默认构造函数创建的对象，而不是创建并传递给调用的对象。

这是我尝试过的（其中restTemplate是“RestOperations”的一个实例：

```
 .... // make the pageRequest object
    if (pageRequest != null) {
        params.put("pageRequest", pageRequest);
    }
    String json = restTemplate.getForObject(restEndpoint + "/myThings", 
                    String.class, Collections.unmodifiableMap(params)); 
```

我知道问题/问题就在这一边——如果我部署到 Tomcat 并通过 URL 传递 pageRequest 参数，则服务器端的分页可以完美运行。此外，我通过 Spring 代码退出，看起来如果 pageRequest 被放入模型中，它将被拉出，否则将获得默认值，这就是我得到的。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:40:16.677

您传递的 getForObject 参数`Collections.unmodifiableMap(params)`实际上是`Object... urlVariables`，其中变量是 @PathVariable 类型声明的占位符，因此这仅适用于您拥有的声明`@PathVariables`

另一种方法是按照您的方式使用它，但以这种方式支持查询参数：

```
String json = restTemplate.getForObject(restEndpoint + "/myThings?pagerequest={pageRequest}", 
                    String.class, Collections.unmodifiableMap(params)); 
```

# java - Java Swing：享元与新窗口

> ID：11780048
> 
> 赞同：1
> 
> 时间：2012-08-02T14:48:40.363
> 
> 标签：java, performance, swing, flyweight-pattern

我正在开发一个新的应用程序，我将同时打开一些窗口。我目前正在尝试设计 GUI，但我正在为两种选择而苦苦挣扎：

1.  我可以使用侧面导航面板并使用页面中心来显示每个面板的内容。这些面板将根据享元模式存储，我会在单击导航按钮时隐藏/显示它们（以便在隐藏时按原样保存内容，例如用户注册表单）。

2.  我可以使用在其上显示菜单的首页并使用弹出窗口/新窗口来显示内容。这些可以关闭/最小化等）。

我的问题是：如果所有面板都存储在我的享元模式中怎么办？它会对性能产生巨大影响，还是在存储 15 个 JPanel 时仍能顺利运行？（当然，这些 JPanel 有时会包含很多内容，例如表单等）。

您认为最好的易于使用/性能选择是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:02:52.210

`JTable` [渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)已经使用[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)，因此单列表是选择的理想选择。自定义渲染器可以显示任意缩略图表示，而`ListSelectionListener`可以在相邻容器中显示任意细节。在 中，如果单个数据记录消耗太多内存，请`TableModel`考虑使用[LRU 缓存。](https://stackoverflow.com/q/221525/230513)

一如既往地处理性能问题、[原型](http://sscce.org/)和[配置文件](https://stackoverflow.com/a/6310284/230513)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:35:36.440

只要您不尝试保持比合理地适合堆更多的数据，现在性能将不是问题（除非您做一些非常糟糕的事情，否则从用户的角度来看，您不会注意到任何性能差异）。

也就是说，除非您有迫切的理由坚持使用您当前不需要的 GUI，否则只需让它们获得 GC 并根据需要重新创建它们。当应用程序需要修改时，一次使用后创建丢弃的方法更灵活，并且内存泄漏的机会更少。

至于 GUI 设计方面，很多人绝对*讨厌*弹出窗口。它们还可能干扰焦点管理/键盘的使用。但这仍然取决于您需要哪种控制流。侧边菜单栏适用于多种用途。

我想指出，侧边菜单只是对*Tabbed Pane*（这是一个您不需要自己实现的标准组件）的一种奇特的改造。此外，如果事情需要按特定顺序完成 - 类似向导的方法也是一个不错的选择（一个窗口，每个步骤完成都会更改内容）。

# silverlight - 如何防止 Silverlight 5 OOB 应用程序中的缓存

> ID：11780053
> 
> 赞同：0
> 
> 时间：2012-08-02T14:48:53.463
> 
> 标签：silverlight, caching

当我的 Silverlight 5 OOB 应用程序启动时，我正在从服务器下载一个 zip 文件。但是，如果下载失败并且我删除了部分下载的 zip 文件并尝试再次下载，我会一遍又一遍地发送相同部分下载的缓存文件。我看不到在 OOB 应用程序中关闭缓存的方法。有人可以就如何禁用或修改 Silverlight 5 OOB 应用程序的缓存提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:32:44.160

我们在 Silverlight 应用程序中遇到了类似的问题 - 最后，我们无法更改 OOB 行为，缓存是一些低级功能。我们通过向 Url 添加一些随机查询来解决它，例如

```
string url = FileUrl + "?" + randomString; 
```

它使应用程序认为它是一个不同的文件。

# objective-c - 根据 indexPath.row 移动 tableview

> ID：11780068
> 
> 赞同：0
> 
> 时间：2012-08-02T14:49:26.877
> 
> 标签：objective-c, ios, xcode, tableview

我有一个水平表格视图，我想移动这个表格视图并根据我在视图中间给出的 indexPath.row 定位单元格。

我正在尝试找到该方法但找不到它:(

你可以帮帮我吗。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:53:21.627

我想你正在寻找这个：

```
[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 
```

# google-maps-api-3 - Google Maps API v3 Google Earth API 集成 - 在加载时加载地球视图

> ID：11780069
> 
> 赞同：2
> 
> 时间：2012-08-02T14:49:29.980
> 
> 标签：google-maps-api-3, google-earth-plugin

我正在使用[google-maps-utility-library-v3](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/googleearth/ "google-maps-utility-library-v3")将 Google Earth API 视图合并到 Google Maps API v3 实现中。据我所知，这些 Google Maps API v3 / Earth API 实用程序是由用户 jlivni 编写的，到目前为止，哪些代码的可用性对我帮助很大。

（我的实现的非常粗略的工作原型在[这里](http://node01.geospatial.ucl.ac.uk/teaching/user15/Dissertation/Web%20App/20120731%20Prototype%2010/JourneyImmersion.html)）

我遇到的问题是我想默认（在页面加载时）谷歌地球视图，而不是（如上面的原型中）地图 API v3 标准视图之一。

我在上面的链接（在 src 下）查看了（未编译的？）googleearth.js 的第 81、131 和 133 行，并在我的 JourneyImmersionInitialiseMapLoadGPXAnimate.js 中设置 Maps API 选项时尝试了以下操作...

```
var myOptions = {
    zoom: 18,
    center: arr_lat_lon[currentTrk][currentTrkseg][0],
    scaleControl: true,
    tilt: 45,
    mapTypeId: earthMapType,
    overviewMapControl: true,
    overviewMapControlOptions: {
        opened: true
        }
    };

map = new google.maps.Map(document.getElementById("map"), myOptions); 
```

...但是得到...

```
ReferenceError: earthMapType is not defined 
```

另外我试过...

```
mapTypeId: GoogleEarth.earthMapType, 
```

...这会导致右上角没有地图类型选项的灰色地图画布。一旦我从页面中选择了地球视图，我就可以在 Firebug 的控制台上使用标准地球 API 地图类型进行更改...

```
earth.getInstance().getOptions().setMapType(earth.getInstance().MAP_TYPE_EARTH) 
```

... 或者 ...

```
earth.getInstance().getOptions().setMapType(earth.getInstance().MAP_TYPE_SKY) 
```

...但同样，使用 earthMapType 或 GoogleEarth.earthMapType 代替最后一个元素会导致 Firebug 控制台出现错误，这一次 ...

```
Error: Error calling method on NPObject! 
```

任何帮助将不胜感激。提前致谢

（因为我是新手，我在这篇文章中不能提供两个以上的链接，但想补充一点，我已经查看了 stackoverflow.com/questions/3039250/google-earth-integrated-with-google-maps-api- v3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:47:29.657

该库没有以编程方式切换的公共方法，如果您在所有设置到位之前尝试这样做，它将失败。理想情况下，在实例化您的 GoogleEarth 对象后会有一个回调，但缺少您可以通过在未编译的 JS 上使用私有 showEarth_() 方法来解决该问题。

请注意，在插件准备好之前您必须等待任意时间，这样的事情通常应该可以解决问题：

```
googleEarth = new GoogleEarth(map);
setTimeout('googleEarth.showEarth_();',1000); 
```

这一切都非常骇人听闻，因此请在问题跟踪器上提交功能请求，以添加支持以编程方式切换到地球类型的方法。

# c++ - CUDA 在运行时检查 nvcc "-arch"-flag

> ID：11780072
> 
> 赞同：0
> 
> 时间：2012-08-02T14:49:41.197
> 
> 标签：c++, cuda, nvcc

是否有可能根据例如`nvcc -arch=sm_11`或`nvcc -arch=sm_20`已用于编译代码来调用不同的内核？更明确一点：

```
if (FANCY_FLAG == CU_TARGET_COMPUTE_11)
    // Do some conversions here..
    krnl1<<<GRID_DIM1, BLOCK_DIM1>>>(converted_value1);
else if (FANCY_FLAG == CU_TARGET_COMPUTE_20)
    krnl2<<<GRID_DIM2, BLOCK_DIM2>>>(value1); 
```

如您所见，我找到了`CUjit_target_enum`in`cuda.h`但我无法确定 nvcc 是否定义了任何等于枚举值之一的标志。

我的意图是我不知道我的设备是否支持双精度浮点数。这意味着我必须将我的数据从 转换`double`为`float`并因此运行不同的内核（是的，我更愿意尽可能以双精度而不是单精度运行内核）。

只要能奏效，我也会欣赏一种完全不同的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:44:44.943

1.  在设备代码中检查**CUDA_ARCH**宏值
2.  在主机代码中 - 检查设备属性`major`的`minor`字段。

# symfony - Symfony2 & Twig：显示所有字段和键

> ID：11780073
> 
> 赞同：6
> 
> 时间：2012-08-02T14:49:47.643
> 
> 标签：symfony, entity, twig

我对 Symfony2 和 Twig 有疑问：我不知道如何显示动态加载的实体的所有字段。这是我的代码（什么都不显示！！）

控制器 ：

```
public function detailAction($id)
{
    $em = $this->container->get('doctrine')->getEntityManager();

    $node = 'testEntity'
    $Attributes = $em->getRepository('TestBetaBundle:'.$node)->findOneById($id);

    return $this->container->get('templating')->renderResponse('TestBetaBundle:test:detail.html.twig', 
    array(
    'attributes' => $Attributes
    ));

} 
```

detail.html.twig ：

```
 {% for key in attributes %} 
        <p>{{ value }} : {{ key }}</p>
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T23:36:17.367

Don't settle for just the public properties! Get the private/protected as well!

```
public function detailAction($id){
    $em = $this->container->get('doctrine')->getEntityManager();

    $node = 'testEntity'
    $Attributes = $em->getRepository('TestBetaBundle:'.$node)->findOneById($id);

    // Must be a (FQCN) Fully Qualified ClassName !!!
    $MetaData = $em->getClassMetadata('Test\Beta\Bundle\Entity\'. $node);
    $fields = array();
    foreach ($MetaData->fieldNames as $value) {
        $fields[$value] = $Attributes->{'get'.ucfirst($value)}();
    }

    return $this->container
                ->get('templating')
                ->renderResponse('TestBetaBundle:test:detail.html.twig', 
                array(
                    'attributes' => $fields
                ));

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T15:34:01.217

好的。您尝试做的事情不能通过`for`您的属性对象上的 Twig 循环来完成。让我试着解释一下：
Twig`for`循环遍历对象数组，为数组中的每个对象运行循环内部。在您的情况下，`$attributes`它不是一个数组，它是一个您通过调用检索的 OBJECT `findOneById`。所以`for`循环发现这不是一个数组并且没有在循环内部运行，甚至一次都没有，这就是你没有输出的原因。
@thecatontheflat 提出的解决方案也不起作用，因为它只是对数组的相同迭代，只是您可以访问数组的键和值，但由于`$attributes`不是数组，因此什么也做不了。

您需要做的是向模板传递一个包含 $Attributes 对象属性的数组。您可以为此使用 php get_object_vars() 函数。执行以下操作：

```
$properties = get_object_vars ($Attributes);
return $this->container->get('templating')->renderResponse('TestBetaBundle:test:detail.html.twig', 
array(
'attributes' => $Attributes
'properties' => $properties
)); 
```

在 Twig 模板中：

```
{% for key, value in properties %} 
    <p>{{ value }} : {{ key }}</p>
{% endfor %} 
```

考虑到这只会显示对象的公共属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T16:37:11.180

对于 Symfony3

```
 $em = $this->getDoctrine()->getEntityManager();

    $MetaData = $em->getClassMetadata('TestBetaBundle:Node');
    $fields = $MetaData->getFieldNames();

    return $this->render('test/detail.html.twig', array('fields'=>fields)); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T14:53:45.633

你应该把它改成

```
{% for key, value in attributes %} 
    <p>{{ value }} : {{ key }}</p>
{% endfor %} 
```

# php - 使用 PHP 向 print_r 发送电子邮件

> ID：11780076
> 
> 赞同：4
> 
> 时间：2012-08-02T14:49:51.107
> 
> 标签：php, email

我正在尝试发送电子邮件`$msg = print_r($_POST, true);`。当我收到电子邮件时，阵列看起来不太好。它不是 5 行，而是在一行上显示。我能做些什么？

编辑：我可以在电子邮件源中看到 print_r 消息是 5 行。但不在用户界面（Gmail）上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T14:50:58.367

您可能将其作为 HTML 获取，在这种情况下，您需要用适当的 HTML 标记将其包围：

```
$msg = '<pre>' . print_r($_POST, true) . '</pre>'; 
```

`<pre>`预格式化的文本标签在哪里。

另一种方法是在[`nl2br()`](http://php.net/nl2br)上使用`$msg`，但它看起来仍然不太正确，因为您想要一个等宽字体，这`<pre>`已经给了您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:51:16.790

`$msg = "<pre>".print_r($_POST, true)."</pre>";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:52:47.880

我认为你可以这样做：

```
$msg = nl2br(print_r($_POST, 1)); 
```

但我不确定..

# android - Android Webviews，更改活动时保存状态？

> ID：11780083
> 
> 赞同：0
> 
> 时间：2012-08-02T14:50:04.203
> 
> 标签：android

我有许多不同的 webviews，都在他们自己的活动中。

当一个菜单项被按下时，一个新的活动加载，它的 webview 也是如此。

现在在活动之间单击会重新加载每个 webview，有没有办法在更改活动时网页不会重新加载并且它会记住用户的位置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:39:04.223

您可以使用 WebView 方法 saveState()/restoreState() 并将其保存到活动 onRestore 包中，如果前一个活动将被销毁，则在 onCreate 方法中使用保存的值。
您可以使用此处描述的类似方法（但仅用于配置更改）： http:
[//www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-屏幕方向改变/](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)

# python - 让用户调整 wxPanel 的大小

> ID：11780084
> 
> 赞同：1
> 
> 时间：2012-08-02T14:50:05.277
> 
> 标签：python, wxpython, wxwidgets

我有一个 wxPanel。我怎样才能让它由用户调整大小？使用拖放调整大小栏？

我想知道我需要的小部件是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:03:16.323

您可以使用`wx.SplitterWindow`使框架中的面板可调整大小（例如，将框架划分为两个可调整大小的子窗口）。

如果您想要的是能够在其他面板的网格上调整面板的大小，那么您可以使用`wx.lib.resizewidget`. 这提供了一个类似拖放的栏，但您不能移动小部件的位置，只能调整它的大小。

您在[wxpython 文档和演示包中都有这两个示例](http://www.wxpython.org/download.php#stable)

这里有一个使用 SplitterWindow 的示例（代码非常冗长，因为是使用 wxglade 自动生成的。如果您愿意，可以简化）：

```
import wx  

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, *args, **kwds)
        self.window_1 = wx.SplitterWindow(self, wx.ID_ANY, style=wx.SP_3D | wx.SP_BORDER)
        self.window_1_pane_1 = wx.Panel(self.window_1, wx.ID_ANY)
        self.window_1_pane_2 = wx.Panel(self.window_1, wx.ID_ANY)

        self.__set_properties()
        self.__do_layout()

    def __set_properties(self):
        self.SetTitle("frame_1")
        self.window_1_pane_1.SetBackgroundColour(wx.Colour(255, 255, 0))
        self.window_1_pane_2.SetBackgroundColour(wx.Colour(50, 153, 204))

    def __do_layout(self):
        sizer_1 = wx.BoxSizer(wx.VERTICAL)
        self.window_1.SplitVertically(self.window_1_pane_1, self.window_1_pane_2)
        sizer_1.Add(self.window_1, 1, wx.EXPAND, 0)
        self.SetSizer(sizer_1)
        sizer_1.Fit(self)
        self.Layout()

if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    frame_1 = MyFrame(None, wx.ID_ANY, "")
    app.SetTopWindow(frame_1)
    frame_1.Show()
    app.MainLoop() 
```

![在此处输入图像描述](../Images/da46cb94a924267f8848a315d5e57910.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:58:55.203

一个面板完全自行浮动？听起来不太可能！如果您更详细地描述您在做什么，以及什么没有按您的预期工作，那么回答这个问题会容易得多。

通常，面板是作为框架的子项创建的。如果面板是框架的唯一子级，那么它将与框架一起自动调整大小。否则，您将不得不自己处理调整大小事件。

你试过什么了？

# svn - 从 SVN 中的部分主干树创建分支

> ID：11780088
> 
> 赞同：1
> 
> 时间：2012-08-02T14:50:17.237
> 
> 标签：svn, tortoisesvn

我想使用我们现有的（和专有的）主干（很大）来介绍分支/合并。这是一个例子：

```
trunk
    folderA
        folderA1
            folderA1a
        folderA2
    folderB
    folderC
    ...
    folderZ
        folderZ1
            folderZ1a
    libraries

branches 
```

目标是将这些路径作为分支：

*   树干/文件夹A/文件夹A1/文件夹A1a
*   树干/文件夹Z/文件夹Z1/文件夹Z1a
*   主干/库

到目前为止，我已经完成了以下工作：

1.  我使用部门“直系子女，包括文件夹”对后备箱进行了结帐。这仅显示分支、标签和树干
2.  我将文件夹 A1a、文件夹 Z1a 和库树从主干更新到我的工作副本。现在我的工作副本中有这 3 棵完整的树
3.  从我的工作副本中，我运行了以下命令： svn copy trunk branches/mynewbranch
4.  我提交了我的更改

但是，当我浏览存储库时，mynewbranch 包含主干结构的镜像副本，而不仅仅是我更新的几棵树。甚至可以从部分树干中创建一个分支吗？

**编辑#1**

我进入主干文件夹并运行以下命令：

```
svn copy . <path_of_branch> 
```

如果我查看我的工作副本，分支只包含我需要的内容。哪个好。

但是，当我提交这些更改时，我最初排除的所有文件夹在浏览存储库时都会出现。当我检查有问题的分支时，不需要的文件夹也存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:59:32.653

在第 3 步尝试这个...

```
svn copy . <path_of_branch> 
```

这`.`意味着你的`working copy`意志被创造出来`branch`，我相信你正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T12:20:24.530

由于问题被标记为 tortoisesvn，我假设 TortoiseSvn 可用。

[您可能会发现使用存储库浏览器](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-repobrowser.html)更容易执行此类操作。

值得牢记的是，最好的做法是[分支主干](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.using.create)而不是主干的子文件夹。[这个问题](https://stackoverflow.com/q/4024454/397817)有更多细节。请注意，在存储库中，分支整个主干没有显着的磁盘使用损失，因为 subversion 称为[廉价复制](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-branchtag.html)。此外，如果本地磁盘存储或网络带宽存在问题，您当然可以只从分支中检出所需的子文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T18:39:02.187

你必须复制`trunk`你想要在`branch`.

```
svn copy directori/file1 url:/svn/directori/file1
svn copy ...... 
```

或从 url 到 url

```
svn copy url:/svn/test/trunk/file1 url:/svn/test/branches/branch01/file1 
```

……

# c++ - 在 Linux 中为 C++ 应用程序指定静态库的位置

> ID：11780089
> 
> 赞同：0
> 
> 时间：2012-08-02T14:50:17.680
> 
> 标签：c++, linux, static-libraries, codeblocks

首先，我希望我在这里在正确的上下文中提出这个问题......

我用 Code::Blocks 用 C++ 构建了一个应用程序。该应用程序使用第三方提供的静态库，无法通过包管理安装在系统上。因此，当我分发我的应用程序时，我会发布这些库。

这是我的目标配置的样子：

```
<Target title="Unix_162">
<Option output="bin/my_app" prefix_auto="1" extension_auto="1" />
<Option working_dir="/home/marco/third_party_dist/lib" />
<Option object_output="obj/Unix_162" />
<Option type="1" />
<Option compiler="gcc" />
<Option use_console_runner="0" />
<Option parameters="-c" />
<Compiler>
<Add directory="/home/marco/third_party_dist/include" />
</Compiler>
<Linker>
<Add library="/home/marco/third_party_dist/lib/lib1.so" />
<Add library="/home/marco/third_party_dist/lib/lib2.so" />
<!-- some more included the same way -->
<Add directory="/home/marco/third_party_dist/lib" />
</Linker>
</Target> 
```

我可以很好地构建这个目标并运行它。一切正常。

今天，我尝试在 Debian Squeeze 上运行，只是复制了一个文件夹，其中包含第三方的可执行文件和库。我认为只要所有内容都在一个文件夹中，可执行文件就会找到 .so 文件。我错了。我收到消息：

```
/home/my_app/my_app: error while loading shared libraries: lib1.so: cannot open shared object file: No such file or directory 
```

我的开发机器上没有收到此消息，因为 Code::Blocks 能够为可执行文件设置工作目录。我可以通过将 .so 文件的位置放在 /etc/ld.so.conf.d/my_app.conf 中来删除错误消息...

无论如何我可以构建可执行文件，以便它搜索执行目录中的库吗？或者这是 Debian 特有的问题？或者我可以在执行可执行文件之前指定进程的工作目录吗？

我想避免在启动应用程序之前更改系统配置/环境...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:07:33.553

首先，这些不是静态库（它们是共享的）。

所以问题是在运行时定位库。
有几种方法可以做到这一点：

1）设置`LD_LIBRARY_PATH`环境变量。
这类似于 PATH，但用于共享库。

2）在可执行文件中设置rpath。
这是一个备份到可执行文件中的路径，用于搜索共享库

```
-Wl,-rpath,<LIB_INSTALL_PATH> 
```

这可以设置为`.` 使其在当前目录中查找。
或者您可以将其设置为`'$ORIGIN'`使其在安装应用程序的目录中查找。

3) 您可以将它们安装到共享库的默认位置之一。
往里看，但`/etc/ld.so.conf`通常`/usr/lib``/usr/local/lib`

4）您可以添加更多默认位置
修改`/etc/ld.so.conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:55:53.980

是的，您必须将 option 传递`-rpath <path>`给您的链接器，`<path>`您的库的路径在哪里（类似于 option `-L`）。

此外，您可能在谈论*共享*库，而不是*静态*库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T16:11:50.280

> 我认为只要所有内容都在一个文件夹中，可执行文件就会找到 .so 文件。我错了。

需要一个额外的步骤来使 Linux 动态链接器在与可执行文件相同的目录中查找共享库。使用选项链接可执行文件`-Wl,-rpath,'$ORIGIN'`（在生成文件中`$`需要像 一样引用`-Wl,-rpath,'$$ORIGIN'`）。有关更多详细信息，请参阅[$ORIGIN 和 rpath 注释](http://www.kernel.org/doc/man-pages/online/pages/man8/ld.so.8.html)。

# android - 标准意图 URI 损坏？

> ID：11780090
> 
> 赞同：6
> 
> 时间：2012-08-02T14:50:22.023
> 
> 标签：android, android-intent, htc-android, commonsware

我在特定设备上遇到了意图 URI 问题，因此我尝试了此处建议的 CommonsWare URLHandler 示例：[使用意图 URI 启动我的应用程序](https://stackoverflow.com/questions/3564393/launching-my-app-using-the-intent-uri)，并且其示例页面上的意图 URI 超链接也无法调用应用程序。该示例声明其意图过滤器，如下所示：

```
<intent-filter>
    <action android:name="com.commonsware.android.MY_ACTION" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
</intent-filter> 
```

示例网页中的超链接是：

```
<a href="intent:#Intent;action=com.commonsware.android.MY_ACTION;end">Link back to URLHandler via intent: URL</a> 
```

这适用于大多数设备，但不适用于运行 Android 4.0.3 的 HTC Amaze 4G。当我触摸链接时，logcat 给出：

```
I/PRIME(9029): <CallBackProxy> Send to WebViewClient.
I/PRIME(9029): <Browser> Send to HtcLinkifyDispatcher
I/ActivityManager(262): START intent from pid 9029
D/MP-Decision(891): Aggress decision engine: Off
D/MP-Decision(891): Switch back to normal parameters: 
    Nw=2.700000, Tw=180, Ns=2.100000, Ts=270, Decision_ms=100, Poll_ms=10
V/NfcService(600): setForegroundNdefPush msg = null callback = null
D/HtcTelephony(561): requestSetFastDormancy: module=0 mode=0
D/WebViewTimersControl(9029): onBrowserActivityPause
D/WebViewTimersControl(9029): Pausing webview timers, 
   view=com.android.browser.BrowserWebView@40e562f8
I/ActivityManager(262): Start proc com.htc.HtcLinkifyDispatcher for 
   activity com.htc.HtcLinkifyDispatcher/.HtcLinkifyDispatcherActivity: 
   pid=11087 uid=1000 gids={1015, 3002, 3001, 3003, 5001, 5003, 3007, 3006, 2001, 1007}
D/ConnectivityService(262): onUidRulesChanged(uid=1000, uidRules=0)
V/browser(9029): BrowserActivity.onWindowFocusChanged
D/HtcLinkifyDispatcherActivity(11087):  @@@@@ receive action=com.commonsware.android.MY_ACTION
I/HtcAppAssociationsUtils (Dispatcher)(11087):  @@@@@ enable by 2 = true
I/HtcAppAssociationsUtils (Dispatcher)(11087):  @@@@@ method = 0
I/HtcAppAssociationsUtils (Dispatcher)(11087):  @@@@@ check enable = true
D/MP-Decision(891): Aggress decision engine: On
D/ActivityManager(262): Config after re-evaluted by window manager: null
D/MP-Decision(891): Switch to aggressive parameters: 
    Nw=1.990000, Tw=140, Ns=1.400000, Ts=190, Decision_ms=50, Poll_ms=10
V/browser(9029): BrowserActivity.onWindowFocusChanged
D/HtcTelephony(561): requestSetFastDormancy: module=0 mode=1
W/InputManagerService(262): Window already focused, ignoring focus gain of: 
    com.android.internal.view.IInputMethodClient$Stub$Proxy@40e75100
D/WebViewTimersControl(9029): onBrowserActivityResume
D/WebViewTimersControl(9029): Resuming webview timers, 
    view=com.android.browser.BrowserWebView@40e562f8
W/BaseUi(9029): mMainView is already attached to wrapper in attachTabToContentView!
W/BaseUi(9029): mContainer is already attached to content in attachTabToContentView!
V/NfcService(600): setForegroundNdefPush msg = null 
    callback = android.nfc.INdefPushCallback$Stub$Proxy@40e73470
D/memalloc(9029): /dev/pmem: Unmapping buffer base:0x569c5000 size:4386816 offset:4177920
D/browser(9029): [BrowserActivity::Connectivity_Type] ===== 1
I/ActivityManager(262): No longer want 
    com.htc.providers.settings:remote (pid 10935): hidden #16, adj=15
D/Process(262): killProcessQuiet, pid=10935
D/Process(262): dalvik.system.VMStack.getThreadStackTrace(Native Method)
D/ConnectivityService(262): onUidRulesChanged(uid=1000, uidRules=0)
D/Process(262): java.lang.Thread.getStackTrace(Thread.java:599)
D/Process(262): android.os.Process.killProcessQuiet(Process.java:823)
D/Process(262): com.android.server.am.ActivityManagerService.updateOomAdjLocked(ActivityManagerService.java:15132)
D/Process(262): com.android.server.am.ActivityManagerService.trimApplications(ActivityManagerService.java:15294)
D/Process(262): com.android.server.am.ActivityStack.activityIdleInternal(ActivityStack.java:3450)
D/Process(262): com.android.server.am.ActivityManagerService.activityIdle(ActivityManagerService.java:4303)
D/Process(262): android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:362)
D/Process(262): com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1706)
D/Process(262): android.os.Binder.execTransact(Binder.java:338)
D/Process(262): dalvik.system.NativeStart.run(Native Method) 
```

有人知道这里的意图 URI 发生了什么吗？为什么它无法工作？有没有解决方法？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:38:13.140

由于我可以在 HTC One S 上复制此问题，并且无法在其他 ICS/JB 设备上复制此问题，因此我认为这是[HTC 为应对 Apple 主导的诉讼而实施](http://commonsware.com/blog/2012/07/23/linkify-problem-patent-behavior.html)的 Linkify 变通办法的另一个结果。

> 有没有解决方法？

如果您可以控制双方（例如，`WebView`包含链接的 a 以及响应`intent`URL 的应用程序），您可以通过 手动强制选择器`Intent.createChooser()`，这可能会起作用。

但是，如果您依赖第三方代码（例如，Web 浏览器）来打开您的应用程序，在这些 HTC 设备上，我相信您只是被搞砸了。

# javascript - javascript中的事件侦听器内存泄漏

> ID：11780093
> 
> 赞同：5
> 
> 时间：2012-08-02T14:50:26.987
> 
> 标签：javascript, events, dom

我正在写一个javascript RIA。我主要针对现代浏览器，即最新的 Firefox、Chrome、IE9+。我听说旧浏览器很容易引入内存泄漏，当我们在 DOM 节点和 JavaScript 对象之间创建循环时。我应该在哪里担心这个问题？它在更现代的浏览器中修复了吗？你能给我一些进一步的阅读吗？

# iphone - iPhone - 纵向应用程序，但支持视频的所有方向

> ID：11780094
> 
> 赞同：0
> 
> 时间：2012-08-02T14:50:27.400
> 
> 标签：iphone, ios, mpmovieplayercontroller, mpmovieplayer

嘿，在这个问题上寻求一些帮助。

目前我正在开发一个 iPhone 应用程序，该应用程序始终锁定为纵向，但是应用程序中包含一些使用 MPMoviePlayer 的视频。

我希望纵向和横向都支持这些视频（自动全屏显示）。

关于如何解决这个问题的任何详细想法？从字面上撕掉我的头发。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:32:09.420

1.  从 plist 中删除限制。
2.  在您的每个视图控制器中，实现仅`-shouldAutorotateToInterfaceOrientation:`返回`YES`支持的界面方向。您*必须*返回`YES`至少一个方向（在您的情况下是正常的纵向方向）。如果您不清楚如何执行此操作，示例比比皆是。
3.  正如@Till 所指出的，`MPMoviePlayerController`使用支持其所有方向的视图控制器显示您的视图`-shouldAutorotateToInterfaceOrientation:`（仅从`YES`方法返回）。

但请注意，用户往往不喜欢强制定向的应用程序，因此请确保您有一个很好的可用性案例来说明为什么需要施加此限制。（建议您在 iPhone 上支持除颠倒之外的所有方向，这样用户就不会尝试，比如说，颠倒接听电话。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:17:43.510

在允许所有可能的界面方向`MPMoviePlayerController`的模态呈现的视图上显示。`UIViewController`这样，您的应用程序的其余部分可能会保持原样（仅限纵向）。

# java - 将weblogic服务器添加到eclipse

> ID：11780100
> 
> 赞同：3
> 
> 时间：2012-08-02T14:50:45.710
> 
> 标签：java, eclipse, weblogic, weblogic-10.x

我已经在我的机器上安装了 weblogic 10.3.5。我已经检查了我的项目，现在尝试将其添加到应用服务器。我去了服务器文件夹，右键单击

```
Server - > Select Server under wizard - > select server -> next -> i see a list of servers. 
```

当我单击新服务器下的 oracle 时，我的 oracle weblogic 未列出。我只能看到 Oracle OC4J Standalone Server 10.1.3 和 10.1.3n。我应该怎么做才能列出我的服务器并选择它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:28:06.510

在您看到 OC4J 等的屏幕中，您必须单击`Download additional server adapters`。
等待列表加载，然后从列表中选择“Oracle Weblogic Server Tools”并单击“下一步”。确保您通过许可证，同意它们，然后接受协议并单击“下一步”（在向导结束时一直应用默认值，如果适用）。现在，再次右键单击“服务器”面板，然后再次单击“新建->服务器”。向下滚动到“Oracle”文件夹并选择正确的 Weblogic 安装版本（根据您的问题，可能是“Oracle WebLogic Server 10gR3”）。使用您的 Weblogic 实例的主文件夹设置“Weblogic home”（在 Windows 操作系统上默认为 C:\Oracle\Middleware[wlServer_VERSION_#]）。在下一个屏幕上，将每个配置保留为默认值，但请务必选择您的域目录。单击“完成”。您的 Weblogic 运行时现在应该可供选择。

# vbscript - vbscript excel 常量值，例如 Horizo ntalAlignment = -4108

> ID：11780103
> 
> 赞同：0
> 
> 时间：2012-08-02T14:50:55.197
> 
> 标签：vbscript, constants

有谁知道是否有所有 vbscript 值常量的列表

例如水平对齐 = -4108

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:31:17.787

我在 Excel 论坛上问了同样的问题，这里是对该主题的回复，有点帮助......

[http://www.mrexcel.com/forum/excel-questions/651263-vbscript-excel-constant-values.html](http://www.mrexcel.com/forum/excel-questions/651263-vbscript-excel-constant-values.html)

# javascript - 为什么我们要在 $(function() {................}); 中包装一堆语句？在jQuery中

> ID：11780106
> 
> 赞同：2
> 
> 时间：2012-08-02T14:51:02.043
> 
> 标签：javascript, jquery, jquery-ui

所以我在 jquery-ui 文档中看到了这段代码，我想知道为什么所有的语句都包含在`$(function() {...});`

jquery 文档说`$()`增强了其中的对象，但我不明白为什么我们需要它。这是一个约定还是真的有意义？

```
<script>
$(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
        drop: function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                    .html( "Dropped!" );
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:53:10.843

`$(function() {});`就所有意图和目的而言，与`$(document).ready(function() {});`; 虽然我相信它在文件准备好之前就被调用了。

它的作用是在文档创建完成后调用函数内的代码。这就是函数加载时所有的 DOM 树都已创建。这允许您在知道那些对象将在那时创建的情况下安全地操作 DOM。

这是一个例子：

```
<script>
//This code is called straight away, your DOM hierarchy may not
//be complete and the object #draggable may not have been created yet,
//as such draggable() may not work properly.
$( "#draggable" ).draggable();

//This code is called once the DOM tree is complete,
//as such you know all your objects have been created
$(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
        drop: function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                    .html( "Dropped!" );
        }
    });
});
</script> 
```

有关更详尽的解释，请参阅[jQuery 文档](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:53:20.470

这是一个简写`$(document).ready(function() {})`

它在整个文档加载后执行，而不是在解析期间遇到它时执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T14:57:36.273

它还为其语句块中的项目创建一个上下文，这与 $(document).ready(function() {}) 一样重要，文档准备就绪。

# php - 数组中的动态变量

> ID：11780111
> 
> 赞同：1
> 
> 时间：2012-08-02T14:51:11.807
> 
> 标签：php, codeigniter

我将字段名称存储在一个数组中，希望能够动态创建变量。

我收到 if 和 else 的非法偏移类型错误，这两行：

```
$data[$tmp_field] = $tmp_field[$id];

$data[$tmp_field] = 0; 
```

我检查了发布数据，它使用适当的数据发布，但我不确定问题是什么。

$student_id 存储所有学生的 id。例如：`$student_id = array(8,9,11,23,30,42,55);`

```
function updateStudentInfo() {
  $student_id = $this->input->post('student_id');
  $internet_student = $this->input->post('internet_student');
  $dismissed = $this->input->post('dismissed');
  $non_matriculated_student = $this->input->post('non_matriculated_student');
  $felony = $this->input->post('felony');
  $probation = $this->input->post('probation');
  $h_number = $this->input->post('h_number');
  $office_direct_to = $this->input->post('office_direct_to');
  $holds = $this->input->post('holds');

  $fields = array('internet_student', 'non_matriculated_student', 'h_number', 'felony', 'probation', 'dismissed');

  foreach($student_id as $id):
    $data = array();

    foreach($fields as $field_name):
      $tmp_field = ${$field_name};

      if(empty($tmp_field[$id])) {
        $data[$tmp_field] = 0;
      } else { 
        $data[$tmp_field] = $tmp_field[$id];
      }
    endforeach;

    print '<pre style="color:#fff;">';
    print_r($data);
    print '</pre>';

  endforeach;
} 
```

这是我想要的数组格式：

```
Array
(
    [internet_student] => 1
    [non_matriculated_student] => 1
    [h_number] => 0
    [felony] => 0
    [probation] => 1
    [dismissed] => 0
) 
```

添加了屏幕截图，让您直观地了解发布数据的表单

![在此处输入图像描述](../Images/bd3877d0f87d5ea7f2e6899f8d7bca71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:25:50.800

```
foreach($student_id as $id):
    $data = array();

    foreach($fields as $field_name):
      $tmp_field = ${$field_name};

      if(empty($tmp_field[$id])) {
        $data[$field_name] = 0;
      } else { 
        $data[$field_name] = $tmp_field[$id];
      }
    endforeach;

    print '<pre style="color:#fff;">';
    print_r($data);
    print '</pre>';

  endforeach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:07:15.513

我假设所有这些字段都是数组，否则你不需要任何循环。

```
function updateStudentInfo()
{
    $student_id                 = $this->input->post('student_id');
    $internet_student           = $this->input->post('internet_student');
    $dismissed              = $this->input->post('dismissed');
    $non_matriculated_student   = $this->input->post('non_matriculated_student');
    $felony                     = $this->input->post('felony');
    $probation              = $this->input->post('probation');
    $h_number                   = $this->input->post('h_number');
    $office_direct_to           = $this->input->post('office_direct_to');
    $holds                  = $this->input->post('holds');

    $fields = array('internet_student', 'non_matriculated_student', 'h_number', 'felony', 'probation', 'dismissed');

    $student_count  = count($student_id);
    foreach($student_id as $id)
    {
        $data   = array();
        foreach($fields as $field)
        {
            if(array_key_exists($id, $$field))
                $data[$field]   = ${$field}[$id];
        }
    }
} 
```

您正在尝试将学生 id 用作其他字段的数组键，但 HTML 表单只是一个标准索引数组，未键入任何学生数据。

# javafx-2 - 在 javafx 2 中移动未装饰的阶段

> ID：11780115
> 
> 赞同：24
> 
> 时间：2012-08-02T14:51:18.450
> 
> 标签：javafx-2, stage

我一直在尝试使用以下鼠标侦听器在屏幕上移动未装饰的舞台：

*   按下
*   已发布
*   拖拽

这些事件来自一个矩形。我的想法是移动未装饰的窗口，单击矩形并拖动所有窗口。

```
@FXML
受保护的无效onRectanglePressed（鼠标事件事件）{
    X = primaryStage.getX() - event.getScreenX();
    Y = primaryStage.getY() - event.getScreenY();
}

@FXML
受保护的无效 onRectangleReleased(MouseEvent 事件) {
    primaryStage.setX(event.getScreenX());
    primaryStage.setY(event.getScreenY());
}

@FXML
受保护的无效 onRectangleDragged（MouseEvent 事件）{
    primaryStage.setX(event.getScreenX() + X);
    primaryStage.setY(event.getScreenY() + Y);
}

```

我对这些事件所做的只是当我按下矩形并开始拖动窗口时，它会移动一点。但是，当我释放按钮时，窗口会移动到矩形所在的位置。

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-02T15:53:45.293

我在一个未装饰的窗口中创建了一个动画时钟[示例](https://gist.github.com/2658491)，您可以拖动它。

示例中的相关代码是：

```
// allow the clock background to be used to drag the clock around.
final Delta dragDelta = new Delta();
layout.setOnMousePressed(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    // record a delta distance for the drag and drop operation.
    dragDelta.x = stage.getX() - mouseEvent.getScreenX();
    dragDelta.y = stage.getY() - mouseEvent.getScreenY();
  }
});
layout.setOnMouseDragged(new EventHandler<MouseEvent>() {
  @Override public void handle(MouseEvent mouseEvent) {
    stage.setX(mouseEvent.getScreenX() + dragDelta.x);
    stage.setY(mouseEvent.getScreenY() + dragDelta.y);
  }
});

...

// records relative x and y co-ordinates.
class Delta { double x, y; } 
```

代码看起来和你的很相似，所以不太清楚为什么你的代码不适合你。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T19:07:32.220

我正在使用此解决方案通过拖动任何包含的节点来拖动未装饰的阶段。

```
private void addDraggableNode(final Node node) {

    node.setOnMousePressed(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent me) {
            if (me.getButton() != MouseButton.MIDDLE) {
                initialX = me.getSceneX();
                initialY = me.getSceneY();
            }
        }
    });

    node.setOnMouseDragged(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent me) {
            if (me.getButton() != MouseButton.MIDDLE) {
                node.getScene().getWindow().setX(me.getScreenX() - initialX);
                node.getScene().getWindow().setY(me.getScreenY() - initialY);
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-30T18:46:26.503

根据jewelsea 的回复，我做了两个lamba 表达式以在我的start() 方法中直接在场景中设置MouseListeners。工作正常 ：）

```
private double xOffset;
private double yOffset;
         /*
        The two following lambda expressions makes it possible to move the application without the standard StageStyle
         */
        //Lambda mouse event handler
        scene.setOnMousePressed(event -> {
            xOffset = primaryStage.getX() - event.getScreenX();
            yOffset = primaryStage.getY() - event.getScreenY();
        });
        //Lambda mouse event handler
        scene.setOnMouseDragged(event -> {
            primaryStage.setX(event.getScreenX() + xOffset);
            primaryStage.setY(event.getScreenY() + yOffset);
        });enter code here 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T23:48:56.213

我的猜测是你的：

```
onRectangleReleased() 
```

正在传递与您相同的坐标

```
onRectanglePressed() 
```

发生这种情况是因为如文档中所述，来自 MouseEvent 类的 getX() 方法返回

> 事件相对于 MouseEvent 源的水平位置。

然后，当您释放鼠标时，它实际上会将矩形放置在您第一次按下鼠标时的位置。

顺便说一句，我使用内部带有 Rectangle 的 StackPane，然后应用以下代码：

```
private void addDragListeners(final Node n){
       n.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent me) {
                if(me.getButton()!=MouseButton.MIDDLE)
                {
                    initialX = me.getSceneX();
                    initialY = me.getSceneY();
                }
                else
                {
                    n.getScene().getWindow().centerOnScreen();
                    initialX = n.getScene().getWindow().getX();
                    initialY = n.getScene().getWindow().getY();
                }

            }
       });

       n.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent me) {
                if(me.getButton()!=MouseButton.MIDDLE)
                {
                    n.getScene().getWindow().setX( me.getScreenX() - initialX );
                    n.getScene().getWindow().setY( me.getScreenY() - initialY);
                }
            }
        });
}

addDragListeners(mainStackPane); 
```

除此之外，我使用鼠标中键使我的窗口在屏幕上居中。我希望它有所帮助。干杯!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-15T03:56:27.553

```
double x, y;

private void addDragListeners(final Node n, Stage primaryStage){

    n.setOnMousePressed((MouseEvent mouseEvent) -> {
        this.x = n.getScene().getWindow().getX() - mouseEvent.getScreenX();
        this.y = n.getScene().getWindow().getY() - mouseEvent.getScreenY();
    });

    n.setOnMouseDragged((MouseEvent mouseEvent) -> {
        primaryStage.setX(mouseEvent.getScreenX() + this.x);
        primaryStage.setY(mouseEvent.getScreenY() + this.y);
    });
}

public void start(Stage primaryStage) {

    try {

        ...

        addDragListeners(mainPane, primaryStage);

    } catch (Exception e) {
        e.printStackTrace(System.out);
    }

} 
```

# javascript - Javascript 数组和 Meteor 会话

> ID：11780116
> 
> 赞同：11
> 
> 时间：2012-08-02T14:51:19.293
> 
> 标签：javascript, meteor

我做了一个有趣的观察。当尝试更新存储在 Meteor 会话存储中的数组时，以下代码不会传播更改：

```
var tags = Session.get("Tags");
tags.push("a");
Session.set("Tags", tags); 
```

但是，如果我将第一行更改为 use `Session.get("Tags").slice()`，则取决于会话的所有内容都会相应更新。我猜这是因为 Meteor 测试了一些引用的相等性，因此没有更新任何东西。

**有没有更好的方法来管理存储在流星会话存储中的列表？**

如果我现在尝试从集合中删除一个元素（使用`array.remove()`from [here](http://ejohn.org/blog/javascript-array-remove/)），行为结果会有点......我在 Meteor 模板事件中执行此操作，代码如下所示：

```
"click .taglist li" : function(e) {
  var tags = Session.get("Tags").slice();
  var index = cardTags.indexOf(this);

  Meteor._debug(Session.get("Tags").slice().indexOf("a"));
  Meteor._debug("Removing tag \"" + this + "\", index: " + index, ", typeof(this) = " + typeof(this).toString());

  tags.remove(index);
  Session.set("Tags", tags);
} 
```

这输出：

```
1
Removing tag "a", index: -1, typeof(this) = string 
```

所以不知何故，该`cardTags.indexOf(this);`声明似乎`-1`几乎适用于任何情况。我想我在做一些根本错误的事情，因为我现在对 javascript 很熟悉，但不知何故我无法弄清楚这里发生了什么。

**为什么这两个对 indexOf() 的调用会表现不同？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-01T22:16:44.437

[我相信这与Backbone.js 中的这种情况](https://stackoverflow.com/a/12390273/1094784)相同。为了触发更改事件，Meteor 需要对数组有一个新的引用，而不仅仅是旧引用的更新副本。

简而言之，为了获得“正确”的行为，您需要克隆数组，进行所需的更改，然后执行 Session.set('foo', myCopiedArray)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-02T20:21:33.470

**简而言之：**改为使用`var index = cardTags.indexOf(this.toString());`。

**长版：**

在 JavaScript 中使用字符串时，它们是字符串，而`typeof 'test'`返回`string`.

让我们看一下下面的代码，以便找出另一种在 JavaScript 中表示字符串的方法：

```
var func = function () {
    return this;
};
console.log(func.call('test')); 
```

控制台（至少 FireBug）不会向我们显示`"test"`，而是显示`String {0="t", 1="e", 2="s", 3="t" }`. `typeof`会回来`"object"`的。

声明的内容`this`似乎需要一个对象。为了将字符串转换为“字符串”对象，我们可以这样做`console.log(new String('test'));`，这与之前记录的值相同。

要将字符串对象转换为字符串（数据类型），只需使用它的原型即可`toString`。

# java - 文本转换为 xml 文件

> ID：11780118
> 
> 赞同：0
> 
> 时间：2012-08-02T14:51:19.897
> 
> 标签：java, xml

我有一个 java 应用程序，它提出问题，用户回答“是”或“否”。
我想要的是在所有问题的最后我得到一个包含问题及其答案的 xml 文档。
所以当问题之一是“你是男性吗？” 答案是“是”，所以 xml 文件应该是：

```
<?xml ....>  
...  

<question>Are you male?</question>  
<answer>yes</answer>  

...  

/> 
```

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:53:56.680

您可以使用 JAXB 来注释一组代表问题的类，或者您可以使用 OutputStream 手动将 XML 生成到文件中。我建议使用 JAXB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:56:14.937

[Freemarker](http://freemarker.sourceforge.net/)模板怎么样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:57:09.977

这是一个使用 Parser 实现的示例，该链接显示了通过 Java 创建 XML 的基本方法，您可以设置一些条件并调整代码。这是关于[如何在java中创建xml文件](http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/)的链接 希望它有帮助

# javascript - 在滚动上显示 div ID

> ID：11780126
> 
> 赞同：0
> 
> 时间：2012-08-02T14:51:47.680
> 
> 标签：javascript

我有这个 JS 代码，当滚动过去时，它会在弹出框中显示 div 的 id 值。当 id 看起来像这样时，它可以正常工作：id="1"。但是如何更改它以检测如下所示的 id：id="1:1" 或 id="23:4"？用冒号隔开的两个数字。

```
<div id="sayverse"></div>
<div id="1">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque et facilisis elit. Ut interdum, odio et aliquam tempor, felis odio auctor erat, eget elementum lectus arcu tempus elit.</div>

<div id="2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque et facilisis elit. Ut interdum, odio et aliquam tempor, felis odio auctor erat, eget elementum lectus arcu tempus elit.</div>

function findPosition( oElement ) { 
    if( typeof( oElement.offsetParent ) != 'undefined' ) { 
      for( var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent ) { 
      posX += oElement.offsetLeft; posY += oElement.offsetTop; } 
      return [ posX, posY ]; 
    } else { 
      return [ oElement.x, oElement.y ]; 
  } 
}

function functionThatSetsPosition() {
var scrolledFromTop = getScrollXY()[1];
var topposition, lastone, offsetFromTop, currentverse, firstVerse = 1;
while(!document.getElementById('vs'+firstVerse) && firstVerse < 10000) {
    firstVerse++;
}
for(var i = firstVerse, onediv; onediv = document.getElementById('vs'+i); i++) {
    topposition = findPosition(onediv)[1];
    offsetFromTop = topposition - scrolledFromTop;
    if( i == firstVerse && offsetFromTop >= 0 ) {

        currentverse = i;
        break;
    }
    if( offsetFromTop >= 0 && offsetFromTop <= 20 ) {

        currentverse = i;
        break;
    }
    if( offsetFromTop > 20 ) {

        currentverse = lastone;
        break;
    }
    //store this as the last one for checking afterwards
    lastone = i;
}
if( !currentverse ) {
    currentverse = lastone;
}
document.getElementById('sayverse').innerHTML = 'Verse '+currentverse; 
```

}

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:22:07.547

我假设您正在尝试检测元素的位置以确定第二个值（: 之后的数字）。

如果第二个数字是您的名为 offsetFromTop 的变量，则可以像这样添加它：

```
document.getElementById('sayverse').innerHTML = 'Verse ' + currentverse + ':' + offsetFromTop; 
```

# c# - 用于从配置文件创建数组的可扩展 C# 代码

> ID：11780128
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:51:55.807
> 
> 标签：c#, asp.net, .net, linq, design-patterns

我有如下所示的配置值

```
add key="Screen1" value ="Admin"
add key="Screen2" value ="Log" 
```

将来会添加新的屏幕。在 C# 中，我需要使用这些屏幕名称创建一个字符串数组。我们如何做到这一点（请记住，即使我们添加新屏幕，代码也需要工作）？

注 1：我正在寻找一种**不**使用自定义配置的方法。

注意 2：我将拥有最多 10 个名称以“屏幕”开头的配置项。但我将有 10,000 个其他配置项。

**参考**

1.  [用于检查价值存在的更好的代码/模式](https://stackoverflow.com/questions/11778979/better-code-pattern-for-checking-existence-of-value)
2.  [读取配置部分的通用方法](https://stackoverflow.com/questions/447199/generic-method-for-reading-config-sections)
3.  [在 C# 中生成数字列表](https://stackoverflow.com/questions/6483032/generating-numbers-list-in-c-sharp)
4.  [从给定列表中检测至少 3 个序列号的序列](https://stackoverflow.com/questions/3844611/c-detecting-sequence-of-at-least-3-sequential-numbers-from-a-given-list)
5.  [LINQ 是否缓存计算值？](https://stackoverflow.com/questions/10308381/does-linq-cache-computed-values)
6.  [有没有一种简单的方法可以在 C# 中组合两个相对路径？](https://stackoverflow.com/questions/2731384/is-there-an-easy-method-to-combine-two-relative-paths-in-c)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:31:07.653

```
ConfigurationManager.AppSettings.AllKeys
    .Where( key => key.StartsWith( "Screen" ) )
    .Select( key => ConfigurationManager.AppSettings[key] ) 
```

如果您有很多设置（例如，10K，就像您在评论中指定的那样），您可能会受益于 AppSettings 集合针对按键查找进行了优化这一事实。为此，您必须反复尝试“Screen1”、“Screen2”、“Screen3”等，并在找不到值时停止：

```
Enumerable.Range( 1, int.MaxValue )
    .Select( i => ConfigurationManager.AppSettings[ "Screen" + i ] )
    .TakeWhile( value => value != null ) 
```

然而，这种方法正是 Knuth 先生警告我们的那种“过早优化”。配置文件根本不应该包含那么多设置，句号。

另一个缺点：请记住，这种方法假定“屏幕*”设置的编号没有间隙。也就是说，如果你有“Screen1”、“Screen2”和“Screen4”，它不会拾取最后一个。如果您计划进行大量此类设置，则每次添加或删除设置时“移动”所有数字将变得非常不方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:54:36.670

[按照此问题](https://stackoverflow.com/questions/3935331/how-to-implement-a-configurationsection-with-a-configurationelementcollection)的答案中的说明创建您自己的配置部分。

通过这样做，您可以完全控制配置文件中的内容以及它如何暴露给应用程序。

另请参阅[如何：使用](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)MSDN 上的 ConfigurationSection 创建自定义配置部分以获取分步教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:45:16.480

我不完全确定是否理解这个问题，但您可以枚举设置并选择所有以“屏幕”开头的设置。

查看[.NET 应用程序中的枚举设置](http://www.arlt.eu/blog/2008/03/12/enumerating-settings-in-net-applications/)。

# ruby-on-rails - 如何将数组插入到 Ruby 中的现有哈希数组中？

> ID：11780133
> 
> 赞同：0
> 
> 时间：2012-08-02T14:52:06.507
> 
> 标签：ruby-on-rails, ruby

我有一个以下哈希映射的当前数组，我有另一个数组，我想通过匹配 id 来插入每个哈希。

```
 {"url"=>"http://ubuntu64:1990/getpages",
  "id"=>"32794",
  "version"=>"2",
  "title"=>"Creating a page",
  "space"=>"test",
  "parentId"=>"32782",
  "permissions"=>"0"} 
```

另一个数组我想根据 id 添加 'imageurl' 键/值，所以类似于 (if id == id insert 'imageurl'/'someurl.jpg}

```
{"id"=>"32794", "imageurl" => "someurl.jpg} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:56:53.427

```
array = [...] #Declare your array with the "big" hashes here
array2 = [...] #Declare your array with the hash containing the imageurl key here

array.each do |a|
  array2.each do |a2|
    if a[:id] == a2[:id]
      a[:imageurl] = a2[:imageurl]
      break #We found it
    end
  end
end 
```

应该做的伎俩......也许有一个更聪明的方法来做到这一点

# xcode - 如何计算矩形到四边形的 3D 变换矩阵

> ID：11780141
> 
> 赞同：1
> 
> 时间：2012-08-02T14:52:24.790
> 
> 标签：xcode, image, cocoa, transform, catransform3d

希望有人可以提供帮助，我正在尝试研究如何将图像从矩形转换为四边形，每个角都有给定的 x,y 屏幕坐标。

到目前为止，我已将图像放在 CALayer 上，但需要计算出 CATransform3D 以将矩形扭曲为所需的四边形。下面是我想要实现的一个示例（从 a 到 b）。

[矩形到四边形图像的示例](http://img713.imageshack.us/img713/3255/sampleto.png)

如果我错了并且不能使用 CATransform3D 来完成，是否有任何其他方式可以通过示例来实现。

我认为 KennyTM 的答案与我在这里所需要的很接近。

[iPhone 图像拉伸（倾斜）](https://stackoverflow.com/questions/2351586/iphone-image-stretching-skew)

我已经尝试过了，但运气不佳，他确实提到“您可能需要转置”，但如果是这种情况，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:10:36.660

CATransform 3D 绝对可以完成您尝试使用它的目的。我测试了[您链接到的代码](https://stackoverflow.com/questions/2351586/iphone-image-stretching-skew)，它对我来说非常有效。请记住，像这样的变换矩阵仅定义为一个比例，因为它位于齐次坐标中。一旦你用他的方程生成矩阵，将每个元素除以右下角的元素。我能想到你需要转置的唯一原因是因为他给出的变换是行主要顺序的。如果您要填充列主要变换矩阵（我相信 CATransform3D 是），则需要在填充后对其进行转置。

这是我用来测试它的代码，它使用来自 openCV 的矩阵类并且在 c++ 中，但应该证明这一点

```
cv::Matx41d rect_tl(-10,-10,0,1);
cv::Matx41d rect_tr(10,-10,0,1);
cv::Matx41d rect_bl(-10,10,0,1);
cv::Matx41d rect_br(10,10,0,1);

cv::Matx41d quad_tl(2,2,0,1);
cv::Matx41d quad_tr(4,6,0,1);
cv::Matx41d quad_bl(2,-1,0,1);
cv::Matx41d quad_br(3,5,0,1);

double X = rect_tl(0);
double Y = rect_tl(0);
double W = 20;
double H = 20;

double x1a = quad_tl(0);
double y1a = quad_tl(1);

double x2a = quad_tr(0);
double y2a = quad_tr(1);

double x3a = quad_bl(0);
double y3a = quad_bl(1);

double x4a = quad_br(0);
double y4a = quad_br(1);

double y21 = y2a - y1a,
y32 = y3a - y2a,
y43 = y4a - y3a,
y14 = y1a - y4a,
y31 = y3a - y1a,
y42 = y4a - y2a;

double a = -H*(x2a*x3a*y14 + x2a*x4a*y31 - x1a*x4a*y32 + x1a*x3a*y42);
double b = W*(x2a*x3a*y14 + x3a*x4a*y21 + x1a*x4a*y32 + x1a*x2a*y43);
double c = H*X*(x2a*x3a*y14 + x2a*x4a*y31 - x1a*x4a*y32 + x1a*x3a*y42) - H*W*x1a*(x4a*y32 - x3a*y42 + x2a*y43) - W*Y*(x2a*x3a*y14 + x3a*x4a*y21 + x1a*x4a*y32 + x1a*x2a*y43);

double d = H*(-x4a*y21*y3a + x2a*y1a*y43 - x1a*y2a*y43 - x3a*y1a*y4a + x3a*y2a*y4a);
double e = W*(x4a*y2a*y31 - x3a*y1a*y42 - x2a*y31*y4a + x1a*y3a*y42);
double f = -(W*(x4a*(Y*y2a*y31 + H*y1a*y32) - x3a*(H + Y)*y1a*y42 + H*x2a*y1a*y43 + x2a*Y*(y1a - y3a)*y4a + x1a*Y*y3a*(-y2a + y4a)) - H*X*(x4a*y21*y3a - x2a*y1a*y43 + x3a*(y1a - y2a)*y4a + x1a*y2a*(-y3a + y4a)));

double g = H*(x3a*y21 - x4a*y21 + (-x1a + x2a)*y43);
double h = W*(-x2a*y31 + x4a*y31 + (x1a - x3a)*y42);
double i = W*Y*(x2a*y31 - x4a*y31 - x1a*y42 + x3a*y42) + H*(X*(-(x3a*y21) + x4a*y21 + x1a*y43 - x2a*y43) + W*(-(x3a*y2a) + x4a*y2a + x2a*y3a - x4a*y3a - x2a*y4a + x3a*y4a));

cv::Matx44d matrix(a,b,0,c
                   ,d,e,0,f
                   ,0,0,1,0
                   ,g,h,0,i);
matrix = matrix*(1/matrix(15));
//You may need a transpose here

cv::Matx41d test_tl = matrix*rect_tl;
test_tl *= (1/test_tl(3));
cv::Matx41d test_tr = matrix*rect_tr;
test_tr *= (1/test_tr(3));
cv::Matx41d test_bl = matrix*rect_bl;
test_bl *= (1/test_bl(3));
cv::Matx41d test_br = matrix*rect_br;
test_br *= (1/test_br(3)); 
```

执行后，底部的所有测试变量都与四边形对应项完美匹配。希望这可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T09:34:03.540

感谢 Hammers 的回答，我能够让它全部工作，需要转置并找到这个关于如何转置矩阵的精彩博客......

[转置矩阵](http://codingincircles.com/2010/07/major-misunderstanding/)

我创建的结果工作方法如下......

```
- (CATransform3D)rectToQuad:(NSRect)rect quadTLX:(double)x1a quadTLY:(double)y1a quadTRX:(double)x2a quadTRY:(double)y2a quadBLX:(double)x3a quadBLY:(double)y3a quadBRX:(double)x4a quadBRY:(double)y4a
{
    double X = rect.origin.x;
    double Y = rect.origin.y;
    double W = rect.size.width;
    double H = rect.size.height;

    double y21 = y2a - y1a;
    double y32 = y3a - y2a;
    double y43 = y4a - y3a;
    double y14 = y1a - y4a;
    double y31 = y3a - y1a;
    double y42 = y4a - y2a;

    double a = -H*(x2a*x3a*y14 + x2a*x4a*y31 - x1a*x4a*y32 + x1a*x3a*y42);
    double b = W*(x2a*x3a*y14 + x3a*x4a*y21 + x1a*x4a*y32 + x1a*x2a*y43);
    double c = H*X*(x2a*x3a*y14 + x2a*x4a*y31 - x1a*x4a*y32 + x1a*x3a*y42) - H*W*x1a*(x4a*y32 - x3a*y42 + x2a*y43) - W*Y*(x2a*x3a*y14 + x3a*x4a*y21 + x1a*x4a*y32 + x1a*x2a*y43);

    double d = H*(-x4a*y21*y3a + x2a*y1a*y43 - x1a*y2a*y43 - x3a*y1a*y4a + x3a*y2a*y4a);
    double e = W*(x4a*y2a*y31 - x3a*y1a*y42 - x2a*y31*y4a + x1a*y3a*y42);
    double f = -(W*(x4a*(Y*y2a*y31 + H*y1a*y32) - x3a*(H + Y)*y1a*y42 + H*x2a*y1a*y43 + x2a*Y*(y1a - y3a)*y4a + x1a*Y*y3a*(-y2a + y4a)) - H*X*(x4a*y21*y3a - x2a*y1a*y43 + x3a*(y1a - y2a)*y4a + x1a*y2a*(-y3a + y4a)));

    double g = H*(x3a*y21 - x4a*y21 + (-x1a + x2a)*y43);
    double h = W*(-x2a*y31 + x4a*y31 + (x1a - x3a)*y42);
    double i = W*Y*(x2a*y31 - x4a*y31 - x1a*y42 + x3a*y42) + H*(X*(-(x3a*y21) + x4a*y21 + x1a*y43 - x2a*y43) + W*(-(x3a*y2a) + x4a*y2a + x2a*y3a - x4a*y3a - x2a*y4a + x3a*y4a));

    //Transposed matrix
    CATransform3D transform;
    transform.m11 = a / i;
    transform.m12 = d / i;
    transform.m13 = 0;
    transform.m14 = g / i;
    transform.m21 = b / i;
    transform.m22 = e / i;
    transform.m23 = 0;
    transform.m24 = h / i;
    transform.m31 = 0;
    transform.m32 = 0;
    transform.m33 = 1;
    transform.m34 = 0;
    transform.m41 = c / i;
    transform.m42 = f / i;
    transform.m43 = 0;
    transform.m44 = i / i;
    return transform;
} 
```

对该方法的示例调用如下...

```
NSImage *image = // load a image

CALayer *layer = [CALayer layer];
[layer setContents:image];
[view setLayer:myLayer];
[view setFrame:NSMakeRect(0, 0, image.size.width, image.size.height)];

view.layer.transform = [self rectToQuad:view.frame quadTLX:0 quadTLY:0 quadTRX:image.size.width quadTRY:20 quadBLX:0 quadBLY:image.size.height quadBRX:image.size.width quadBRY:image.size.height + 90]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T02:05:56.267

感谢@Equinox2000 的帮助！

请注意，iOS CALayer 的默认锚点为 (0.5, 0.5)。如果您尝试应用所有值都相对于左上角坐标的变换，您需要将锚点更改为 (0.0, 0.0)。

# c++ - Opengl TRIANGLE_STRIPS 创建重复的幽灵

> ID：11780145
> 
> 赞同：2
> 
> 时间：2012-08-02T14:52:34.853
> 
> 标签：c++, opengl, rendering, glsl, shader

我在制作我的第一个着色器时获得了一些乐趣，我的第一个测试对象是一张 100x100 四面体的图片。我想我会学习如何使用`TRIANGLE_STRIP`，所以我切换了它，移动了一个顶点调用，让它看起来又是方形的。打开我的着色器，它后面只有一张脸的副本，但它上面有整个纹理。对于这个形状，我只有一组绘制调用....

这是我的形状代码：

```
glBegin(GL_TRIANGLE_STRIP);
    float vx;
    float vy;
    for(float x=0; x<100; x++){
        for(float y=0; y<100; y++){
            float vx=x/5.0;
            float vy=y/5.0;
            glTexCoord2f(0.01*x, 0.01*y);
            glVertex3f(vx, vy, 0);

            glTexCoord2f(0.01+0.01*x, 0.01*y);
            glVertex3f(.2+vx, vy, 0);

            glTexCoord2f(0.01*x, 0.01+0.01*y);
            glVertex3f(vx, .2+vy, 0);

            glTexCoord2f(0.01+0.01*x, 0.01+0.01*y);
            glVertex3f(.2+vx, .2+vy, 0);
    }}
glEnd(); 
```

还有我的（顶点）着色器代码：

```
uniform float uTime,uWaveintensity,uWavespeed;
uniform float uZwave1,uZwave2,uXwave,uYwave;
void main(){
vec4 position = gl_Vertex;
gl_TexCoord[0] = gl_MultiTexCoord0;
position.z=((sin(position.x+uTime*uWavespeed)*uZwave1)+(sin(position.y+uTime*uWavespeed))*uZwave2)*uWaveintensity;
position.x=position.x+(sin(position.x+uTime*uWavespeed)*uXwave)*uWaveintensity;
position.y=position.y+(sin(position.y+uTime*uWavespeed)*uYwave)*uWaveintensity;
gl_Position = gl_ModelViewProjectionMatrix * position;
} 
```

如果有人有任何关于使用共享顶点（triangle_strips）更有效地绘制的信息，我已经用谷歌搜索了，但到目前为止我还不了解 XD。我想知道。

屏幕截图：8x8 面

![在此处输入图像描述](../Images/c7851807bf1371af1522e205d20d7f9e.png)

相同的东西相同的角度，线条=鬼

![在此处输入图像描述](../Images/911bb0310caf74c71df9d006c634ebfa.png)

我看到现在发生了什么，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:13:00.470

我不认为您可以通过这种方式创建带有三角形条带的 100x100 四边形平面。现在你只在一个方向上按行和列，这意味着第一行的最后 2 个顶点将创建一个带有第二行第一个顶点的三角形，这不是你想要的。

我建议您从 2x2 模式开始，以了解三角形条的工作原理，然后转到 3x3 和 4x4 以了解奇数和偶数情况之间的区别。当您对问题有所了解时，您可以创建通用算法并将大小更改为 100。

在此之后，您可以专注于顶点着色器以使其挥动。

对于未来：如果你正在学习大数据是如何运作的，那就永远不要从大数据开始。:)

**编辑：**

自从我写了这个答案后，我了解到您已经可以使用退化三角形制作两个带有一个三条的维度网格:)。

当一个三角形两次使用相同的顶点时，光栅化器将在渲染过程中忽略它，因此在第一个条带的末尾，您可以使用第一个条带的最后一个顶点和第二个条带的第一个顶点创建一个退化三角形。将两个顶点中的哪一个用作第三个顶点并不重要，只要它们的顺序正确（例如 1,1,2 或 1,2,2）。通过这种方式，您创建了一个不会绘制的三角形，但它会将下一个“起点”移动到第二条带的开头，您可以在此处继续构建网格。

缺点是您创建了一些三角形，它们将被转换但不会被绘制（它们不会很多），但优点是您只需向 GPU 运行一个“绘制条带”命令，速度要快得多。

# c++ - 使用光线追踪在球体上翻转 2D 纹理

> ID：11780147
> 
> 赞同：1
> 
> 时间：2012-08-02T14:52:36.957
> 
> 标签：c++, graphics, texture-mapping, raytracing

我正在研究我的光线追踪器，我认为我已经取得了一些重大成就。我目前正在尝试将纹理图像放置到对象上。但是，它们的位置不太好。它们在球体上出现翻转。这是我当前代码的最终图像：![看看北美和南美是如何出现的](../Images/de548ebf80e51fb8a26225f81ce3d8af.png)

***以下是相关代码：***

- 用于打开图像的图像类

```
class Image
{
public:
    Image() {}

    void read_bmp_file(char* filename)
    {
        int i;
        FILE* f = fopen(filename, "rb");
        unsigned char info[54];
        fread(info, sizeof(unsigned char), 54, f); // read the 54-byte header

        // extract image height and width from header
        width = *(int*)&info[18];
        height = *(int*)&info[22];

        int size = 3 * width * height;
        data = new unsigned char[size]; // allocate 3 bytes per pixel
        fread(data, sizeof(unsigned char), size, f); // read the rest of the data at once
        fclose(f);

        for(i = 0; i < size; i += 3)
        {
            unsigned char tmp = data[i];
            data[i] = data[i+2];
            data[i+2] = tmp;
        }
        /*Now data should contain the (R, G, B) values of the pixels. The color of pixel (i, j) is stored at 
        data[j * 3* width + 3 * i], data[j * 3 * width + 3 * i + 1] and data[j * 3 * width + 3*i + 2].

        In the last part, the swap between every first and third pixel is done because windows stores the 
        color values as (B, G, R) triples, not (R, G, B).*/
    }

public:
    int width;
    int height;
    unsigned char* data;
}; 
```

-纹理类

```
class Texture: public Material
{
public:
    Texture(char* filename): Material() {
        image_ptr = new Image;
        image_ptr->read_bmp_file(filename);
    }
    virtual ~Texture() {}

    virtual void set_mapping(Mapping* mapping)
    {   mapping_ptr = mapping;}

    virtual Vec get_color(const ShadeRec& sr)   {
        int row, col;

        if(mapping_ptr)
            mapping_ptr->get_texel_coordinates(sr.local_hit_point, image_ptr->width, image_ptr->height, row, col);

        return Vec (image_ptr->data[row * 3 * image_ptr->width + 3*col  ]/255.0, 
                    image_ptr->data[row * 3 * image_ptr->width + 3*col+1]/255.0,
                    image_ptr->data[row * 3 * image_ptr->width + 3*col+2]/255.0);
    }
public:
    Image* image_ptr;
    Mapping* mapping_ptr;
}; 
```

- 映射类

```
class SphericalMap: public Mapping
{
public:
    SphericalMap(): Mapping()   {}
    virtual ~SphericalMap() {}

    virtual void get_texel_coordinates (const Vec& local_hit_point, 
                                        const int hres,
                                        const int vres,
                                        int& row,
                                        int& column) const  
    {
        float theta = acos(local_hit_point.y);
        float phi   = atan2(local_hit_point.z, local_hit_point.x);

        if(phi < 0.0)
            phi += 2*PI;

        float u = phi/(2*PI);
        float v = (PI - theta)/PI;

        column = (int)((hres - 1) * u); 
        row = (int)((vres - 1) * v); 
    }
}; 
```

- 本地生命值：

```
virtual void Sphere::set_local_hit_point(ShadeRec& sr)
    {
        sr.local_hit_point.x = sr.hit_point.x - c.x;
        sr.local_hit_point.y = (sr.hit_point.y - c.y)/R;
        sr.local_hit_point.z = sr.hit_point.z -c.z;
    } 
```

- 这就是我构建球体的方式`main`：

```
Texture* t1 = new Texture("Texture\\earthmap2.bmp");
SphericalMap* sm = new SphericalMap();
t1->set_mapping(sm);
t1->set_ka(0.55);
t1->set_ks(0.0);
Sphere *s1 = new Sphere(Vec(-60,0,50), 149);
s1->set_material(t1);
w.add_object(s1); 
```

抱歉，代码很长，但如果我知道可能会出现该问题的位置，我会发布该部分。最后，这就是我从以下调用`get_color()`函数的方式`main`：

```
xShaded +=  sr.material_ptr->get_color(sr).x * in.x * max(0.0, sr.normal.dot(l)) + 
        sr.material_ptr->ks * in.x * pow((max(0.0,sr.normal.dot(h))),1);
yShaded +=  sr.material_ptr->get_color(sr).y * in.y * max(0.0, sr.normal.dot(l)) + 
        sr.material_ptr->ks * in.y * pow((max(0.0,sr.normal.dot(h))),1);
zShaded +=  sr.material_ptr->get_color(sr).z * in.z * max(0.0, sr.normal.dot(l)) + 
        sr.material_ptr->ks * in.z * pow((max(0.0,sr.normal.dot(h))),1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:57:50.967

在黑暗中拍摄：如果没有记错的话，BMP 是自下而上存储的，而许多其他图像格式是自上而下的。这可能是问题所在吗？也许您的文件阅读器只需要反转行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:22:09.343

改变`float phi = atan2(local_hit_point.z, local_hit_point.x);`以`float phi = atan2(local_hit_point.x, local_hit_point.z);`解决问题。

# sql - 数据验证问题的 SQL 查询设计

> ID：11780150
> 
> 赞同：1
> 
> 时间：2012-08-02T14:52:41.103
> 
> 标签：sql, sql-server, teradata

我有一个包含一些财务数据的事实表。有一列 (VERS_NM) 定义值是“实际”还是“当前 Outlook”。这两者的值应该始终相同，但我们在一些报告中注意到它似乎不正确。所以我想写一个查询来查找实际值与当前前景不匹配的地方。

我无法想办法做到这一点。

表格如下所示： ![桌子](../Images/1f4dba10f836455ab072049f156d43a6.png)

因此，回顾一下，除了 VERS_NM 列将显示“实际”之外，将有与第 1 行相同的行。至少它应该是，我想找到实际和当前 Outlook 不匹配的任何实例。非常感谢任何帮助或想法。只需朝着正确的方向推进或制定某种解决此问题的计划就可以了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:01:22.003

您可以自行加入数据，将字段替换为`a, b, c, d`指示行是等价的字段。

```
SELECT
  *
FROM
  yourTable    AS actual
INNER JOIN
  yourTable    AS outlook
    ON  actual.a = outlook.a
    AND actual.b = outlook.b
    AND actual.c = outlook.c
    AND actual.d = outlook.d
WHERE
      actual.VERS_NM  = 'Actual'
  AND outlook.VERS_NM = 'Current Outlook'
  AND actual.FINC_ACCT_METRIC_VAL <> outlook.FINC_ACCT_METRIC_VAL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:15:07.433

另一种方法是使用`UNION`. 它更多地是一种检测许多表字段中差异的方法，但也可以在您的情况下工作。

在 SQL Server中[比较两个表的最短、最快和最简单的方法：UNION！](http://weblogs.sqlteam.com/jeffs/archive/2004/11/10/2737.aspx)比较两个单独的表，但您可以分析单个表。

将 fields`COL1`等替换为`COL2`您要比较的列。为了您的比较，我在`WHERE`内部添加了一个子句，`SELECT`以有效地将您的数据视为两个单独的表。

```
SELECT MIN(TableName) as TableName, ID, COL1, COL2, COL3 ...
FROM
(
  SELECT 'Actual' as TableName, A.ID, A.COL1, A.COL2, A.COL3, ...
  FROM Finance_Data A
  WHERE VERS_NM = 'Actual'
  UNION ALL
  SELECT 'Outlook' as TableName, B.ID, B.COL1, B.COl2, B.COL3, ...
  FROM Finance_Data B
  WHERE VERS_NM = 'Current Outlook'
) T
GROUP BY ID, COL1, COL2, COL3 ...
HAVING COUNT(*) = 1
ORDER BY ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:59:14.087

您可以`group by`使用所有其他列，然后使用`having`子句要求每个组具有“实际”和“当前展望”变体：

```
select  *
from    YourTable
group by
        col1
,       col2
,       ... all other columns ...
having  sum(case when VERS_NM = 'Actual' then 1 end) <> 1
        or sum(case when VERS_NM = 'Current Outlook' then 1 end) <> 1
        or count(*) <> 2 
```

# objective-c - UITextView 检测紧急号码 (112)

> ID：11780154
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:00.300
> 
> 标签：objective-c, ios, uitextview

有没有办法告诉 UITextView 112 也是一个应该在活动链接上检测到并可以调用的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:29:16.777

将通知添加`UITextViewTextDidChangeNotification`到其中包含文本视图的任何类。然后在方法检查中

```
if ([[/*name of textView*/ text] containsString@"112"])
{
    //do something
} 
```

# python - Numpy 数组占用太多内存

> ID：11780155
> 
> 赞同：4
> 
> 时间：2012-08-02T14:53:01.023
> 
> 标签：python, numpy

我正在通过 numpy.loadtxt 将 csv 文件加载到 numpy 数组中。我的数据有大约 100 万条记录和 87 列。虽然 object.nbytes 只有 177159666 字节，但它实际上需要更多的内存，因为我在使用 scikit-learn 训练决策树时得到了“MemoryError”。此外，在读取数据后，我系统中的可用内存减少了 1.8 gigs。我正在使用 3 gigs 内存的 linux 机器上工作。那么 object.nbytes 是否返回 numpy 数组的实际内存使用情况？

```
train = np.loadtxt('~/Py_train.csv', delimiter=',', skiprows=1, dtype='float16') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:15:57.270

在尝试创建一个 400,000 x 100,000 的大型矩阵时，我遇到了类似的问题。将所有这些数据放入 ndarray 是不可能的。

然而，我想出的重要见解是矩阵中的大多数值都是空的，因此可以将其表示为稀疏矩阵。稀疏矩阵很有用，因为它能够使用更少的内存来表示数据。我使用了 Scipy.sparse 的稀疏矩阵实现，并且能够将这个大矩阵放入内存中。

这是我的实现：

[https://github.com/paolodm/Kaggle/blob/master/mdschallenge/buildmatrix.py](https://github.com/paolodm/Kaggle/blob/master/mdschallenge/buildmatrix.py)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:18:37.513

可能，更好的性能是通过使用`numpy.fromiter`：

```
In [30]: numpy.fromiter((tuple(row) for row in csv.reader(open('/tmp/data.csv'))), dtype='i4,i4,i4')
Out[30]: 
array([(1, 2, 3), (4, 5, 6)], dtype=[('f0', '<i4'), ('f1', '<i4'), ('f2', '<i4')]) 
```

在哪里

```
$ cat /tmp/data.csv 
1,2,3
4,5,6 
```

或者，我强烈建议您使用[`pandas`](http://pandas.pydata.org/)：它基于`numpy`并具有许多实用功能来进行统计分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T21:42:56.010

我刚刚遇到了同样的问题：

我保存的 .npy 文件是 752M（在磁盘上），并且 arr.nbytes = 701289568 (~669M); 但 np.load 占用 2.7g 内存，即实际所需内存的 4 倍

[https://github.com/numpy/numpy/issues/17461](https://github.com/numpy/numpy/issues/17461)

事实证明：

数据数组包含混合（少量）字符串和（大量）数字。

但是这些 8 字节位置中的每一个都指向一个 python 对象，并且该对象至少需要 24 个字节加上数字或字符串的空间。

因此，在内存中（8 字节指针 + 24 字节）~= 文件中大部分 8 字节（双数）的 4 倍。

注意： np.save() 和 np.load() 不是对称的：

-- np.save() 将数值类型保存为标量数据，因此磁盘文件大小与用户心目中的数据大小一致，并且很小

-- np.load() 将数字类型加载为 PyObject，并将内存使用量膨胀到用户预期的 4 倍。

这对于其他文件格式也是如此，例如 csv 文件。

结论：不要在 np 数组中使用混合类型（字符串作为 np.object 和 np.numbers）。使用同质数字类型，例如 np.double。然后内存将占用与转储磁盘文件相同的空间。

# c# - 用户代码未处理的空引用异常

> ID：11780156
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:00.993
> 
> 标签：c#, asp.net

我在visual studio（successfull）中构建了我的解决方案，我正在尝试运行它，但由于某种原因，在下面的代码行中它抛出了异常我看了几篇文章，但没有确切的解决方案如何处理

```
public static int GetCurrentPolicyClassId()
    {
        **int policyClassId = (int) HttpContext.Current.Session[AppConstants.SK_POLICYCLASSID];**
        return policyClassId;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:56:22.527

您调用的链中的值之一是 null。您只需要在获取值之前进行检查：

```
if(HttpContext != null && 
   HttpContext.Current != null &&
   HttpContext.Current.Session != null &&
   HttpContext.Current.Session[AppConstants.SK_POLICYCLASSID] != null)
{
    // Get the value here.
}
else
{
    // Something was null. Either set a default value or throw an Exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:57:32.343

您可能应该检查是否`HttpContext != null && HttpContext.Current != null && HttpContext.Current.Session != null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:58:01.800

任何异常都由`try/catch`（或`finally`）处理，如果该异常通常可以处理。

例如`StackOverflowException`无法处理。

你需要：

*   什么类型的异常是
*   了解它的原因
*   基于此确定该异常是否是您的应用程序中的*异常行为*
*   如果是，则处理它`try/catch`是否程序需要处理它，或者让程序失败，因为收到的异常太危险了，最好让一切都失败。
*   如果这不是异常行为，请尝试使用例如空检查或其他任何方式来处理它...

希望这可以帮助。

# c# - 如何重定向到 MVC 站点中的父操作？

> ID：11780157
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:01.730
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, url-redirection

我已经在这里查看了几页，例如：

[如何重定向到 ASP.NET MVC 中的上一个操作？](https://stackoverflow.com/questions/815229/how-do-i-redirect-to-the-previous-action-in-asp-net-mvc)

[如何将我的操作重定向到网站的根目录？](https://stackoverflow.com/questions/10291966/how-can-i-redirect-my-action-to-the-root-of-the-web-site)

随着几个小时的搜索谷歌。

似乎没有任何地方可以回答我的问题，我相信在 MVC 中应该可以以某种方式解决问题，因此我现在在这里提出这个问题。

所以我面临的问题是我想允许用户通过从下拉菜单中选择一种新语言来更改页面的语言，该菜单位于其自己的部分视图中，因此问题是，我需要重定向到父操作而不是孩子。只要我将用户发送回站点的根目录，这一切都可以正常工作。使用以下代码：

```
 [HttpPost]
    public ActionResult RegionSelect(RegionSelectionModel model)
    {
        var currentUser = Session.GetCurrentUser();
        var currentDbUser = Session.GetUserEntity(_dataAccessLayer);
        if (!ModelState.IsValid)
        {
            model.AvailableRegions = CacheHelpers.GetAvailableRegions<RegionView>(_dataAccessLayer, _cache).ToList();
            return PartialView("_RegionSelect", model);
        }

        var selectedRegion = UsersControllerHelpers.SetSelectedRegion(model, _dataAccessLayer, _cache, _website.Client);
        var uri = model.OriginalUrl;
        var routeInfo = new RouteHelpers(uri, HttpContext.Request.ApplicationPath);

        // Route Data  
        var routeData = routeInfo.RouteData;

        routeData.Values.Remove("language");

        var defaultClientLanguageCode = _website.Client.LanguagesSupported.FirstOrDefault().Code;
        if (currentDbUser.Language.CountryCode != selectedRegion.PrimaryLanguage.CountryCode)
        {
            //TODO: Decide where to redirect or whether to refresh the whole page...
            if ((defaultClientLanguageCode == selectedRegion.PrimaryLanguage.CountryCode) || (model.SelectedRegionId == 0))
            {
                UsersControllerHelpers.UpdateUsersRegions(currentUser, selectedRegion, _website.Client, _cache, _dataAccessLayer,
                                                          Session);
                return RedirectToRoute(routeData.Values);
            }

            routeData.Values.Add("language",selectedRegion.PrimaryLanguage.CountryCode);
            return RedirectToRoute(routeData.Values);
        }

        return RedirectToRoute(routeData.Values);
    } 
```

我的两个返回语句返回到根页面，一个返回到根，但是使用一种语言，所以它会是“ [http://mysite/en-En/](http://mysite/en-En/) ”但是如果用户在根站点以外的页面上怎么办? 我想以某种方式将它们重定向回相同的操作，但在开始时使用正确的语言字符串。

我怎样才能做到这一点？

我已经想到了几种“hacky”方法，例如拆分 URL 和交换语言代码。但理想情况下，我希望尽可能干净地做到这一点。

谁能给我任何想法？还是只是不可能？

看起来它应该很简单，但显然不是。

提前感谢您提供的任何帮助。

**已编辑**

添加了使用下面建议答案中的代码的新代码。

我现在有两个新问题。

1.  我收到此错误消息，如果 URL 中有任何内容，例如 ?page=1：从客户端检测到潜在危险的 Request.Path 值 (?)

2.  如果我尝试使用 .Remove() 完全删除语言。它可以很好地删除它，但是当我尝试使用默认语言重定向到页面时，它会将 language?=language 添加到 URI 的末尾。

有什么想法可以解决这两个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:43:01.733

这个选项绝对是我的答案。如果您需要我删除一些代码，请给我留言，我可以这样做，但是链接网站上的示例应该可以帮助您入门。

使用[此方法](http://www.scottschluer.com/creating-a-routedata-instance-from-a-url/)将 Request.UrlReferrer 更改为 Route 数据，然后将您的语言合并到其中，然后使用修改后的 Route 数据执行 RedirectToRoute。

只需使用 RouteData.Values.Add、RouteData.Values.Remove 和 RouteData.values["whatever"]，然后将修改后的 RouteData.Values 对象传递给 RedirectToRoute()

# gwt - 如何将 gwt 面板和小部件放入 CellList？

> ID：11780158
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:02.053
> 
> 标签：gwt, celllist

我想为 CellList 中的每个单元格放置一个带有文本字段和操作按钮的复杂布局。所以我想放一个 GWT 面板来组织小部件。

是否可以将 gwt 面板和小部件放入 CellList 中？我试图扩展 AbstractCell 并覆盖 render()。但似乎只能呈现 HTML。我没有找到渲染普通 gwt 面板和小部件的方法。CompositeCell 似乎会自动通过 List>，您无法按照自己的意愿排列小部件。另外，我不知道是否可以在 CompositedCell 中使用像 PushButton 这样的普通小部件。

如果您以前尝试过，请给我一个样品？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:38:02.183

不能将 GWT 小部件或面板放在`CellWidgets`.
`CellWidgets`专为快速渲染大量数据而设计。
如果您没有该用例，您仍然可以使用[FlexTable](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FlexTable.html)。
否则，您必须自己创建一个`CompositeCell`or`AbstractCell`并实现`render`and 事件处理方法。

# c - 一些指针澄清

> ID：11780161
> 
> 赞同：2
> 
> 时间：2012-08-02T14:53:14.143
> 
> 标签：c, pointers

> **可能重复：**
> [带指针的 C 问题](https://stackoverflow.com/questions/11748249/c-question-with-pointers)

我需要一些关于指针的帮助，特别是以下示例：

```
#include <stdio.h>
int main()
{
    int *i, *j;

    i = (int *) 60;
    j = (int *) 40;
    printf("%d", i - j);

    return 0;
} 
```

此代码生`10`成为输出。我只需要知道这里到底`i - j`做了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T14:59:05.960

`i`和分别`j`指向内存位置`60`和`40`。

你在这里做的是指针减法。如果`i`并且`j`是字节指针 (char *),`i-j`将会是`20`, 正如人们所期望的那样。

但是，对于其他指针，它返回两个指针之间的**元素数。**在大多数系统上，`(int *)60 - (int *)40`应该是`5`，因为这 20 个字节中有 5 个 4 字节整数的空间。显然，您的平台有 16 位整数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:01:13.490

该程序可能应该打印和之间的指针差异`60`，`40`转换为指向的指针`int`。指针差异是从地址到地址（不包括）`int`可以放入数组中的 s的数量。`40``60`

也就是说，该程序违反了 C 标准。指针算术是未定义的，除非指针指向相同的 ( `static`，自动或`malloc`'d) 数组，并且您不能可靠地打印指针差异`%d`(使用`%td`代替)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:00:56.300

这是指针算术，代码`i - j`减去两个*指向 int*的指针。这种算法知道所涉及的数据大小，因此在这种情况下将返回`ints`两个地址之间的数量。

的结果`10`表明您正在使用*2 字节*整数的系统上运行它： 和 之间有 20 个内存地址`i`，`j`并且您的代码会打印，因此两个地址之间`10`有`10`2 字节。`ints`

但是在另一个系统上，使用 4 字节整数，这将打印:和之间的`5`20 个内存地址，因此两个地址之间有*4 字节*。`i``j``5` *`ints`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:03:52.907

```
printf("%d",i-j); return 0; 
```

i 和 j 都是指向整数的指针。因此它们遵循指针算术。根据指向整数的指针数学指针总是移位 sizeof(int)。我认为你使用 gcc 编译器，其中 sizeof int 为 4。所以 60-40=20 但单位为 4，所以输出为 5。

但是如果您使用 sizeof int 为 2 的 turbo c，则输出为 10。

## 笔记

如果指针包含在某些表达式评估中，则它们遵循指针算术。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T18:08:00.713

`i`an`j`是指向 int 变量的指针，这意味着它将存储 int 变量的虚拟地址。

如果我们对该变量进行任何指针算术运算，它将根据所指向的变量类型的大小进行预演。例如，如果 int 的大小为 4 字节，则将`i++`值从`60`to增加。`64`

所以你得到 10 `i - j`，这意味着 int 的大小在你的环境中是 2 。总是`i - j`会给你多少元素（类型`int`）可以容纳在那个范围内。

`int`所以在 60 到 40 之间，如果大小`int`为 2 个字节，我们可以存储 10 个类型的元素。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-02T14:59:52.530

首先，声明了两个整数指针，分别称为 i 和 j。请注意，它们的值是存储指针的内存地址，而不是整数本身（指针的概念）。

接下来，指针 i 和 j 分别更改为 60 和 40。现在这代表内存中的一个点，而不是整数 60 和 40，因为 i 和 j 从未被取消引用。

然后它打印 ij 的内存地址，这将减去这两个内存地址。*

# android - 在缓慢的工作日保持忙碌/增加编码数量

> ID：11780164
> 
> 赞同：1
> 
> 时间：2012-08-02T14:53:16.260
> 
> 标签：android

所以我一直在做很多应用程序开发和代码维护工作。我是一名安卓开发者，虽然我偶尔会在办公室里做一些其他的事情。在过去的几周里，我们的工作票很短缺，而我得到的那些票在之后的几个小时里都被我搞砸了，而且很无聊。

我正在寻找一些好的活动、指南、项目等。我可以在这些停机时间进行工作，以保持我的 android 技能敏锐。我一直在阅读优化、安全、设计和实施策略以及其他一些有趣的东西。

我正在寻找简短的项目 - 1-3 小时，这将教会我一些关于平台的有意义的事情，揭示一些我不理解的隐藏方面，或者只是非常酷，所以我可以像 - “是的老板，我是一名球员”。除此之外 - 真正实现良好的代码也会很酷，我喜欢看其他人的东西，并且因为我正在做大量的维护编程，所以我正在努力快速适应代码的能力。

多谢你们，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:30:22.950

如何使用您的“停机时间”回答**StackOverflow**上的问题。在“Android Swamp Mines (tm)”中度过了艰苦的一天后，我发现这是一个令人愉快的消遣；-)

不过说真的，如果您创建一个小型测试程序来测试用户的问题和您的答案，那么有很多问题会得到更好的回答。社区也获得了质量更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:46:01.070

我认为可以这样做：

1）您对某个应用程序或某些应用程序的某些部分感到惊讶，类似于看到一些美丽的事物而感到惊讶

2) 然而，作为一名程序员，你有一个优势可以分析你对编程的惊奇，然后能够为自己制定一个任务，比如“我如何才能实现如此惊人的`OK Button`（或者也许`Cancel Button`）

3）然后您开始在您的小型测试项目中实现相同`Ok`（或`perhaps Cancel`）按钮

4）然后你卡住了

# javascript - 在 JavaScript 中过滤数字和括号的最有效方法是什么？

> ID：11780165
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:17.653
> 
> 标签：javascript, string

我想从以下字符串中过滤出数字和括号：

```
firstText secondText probablyMoreTextToComeWithSpacesBetweenThem (0000) 
```

我希望输出为：

```
firstText secondText probablyMoreTextToComeWithSpacesAndNumbersBetweenThem 
```

在 JavaScript 中最快、最有效的方法是什么？谢谢。

**更新：**我只希望括号之间的数字消失，而不是任何其他数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:55:52.537

根据您的输入，此[正则表达式](http://regular-expressions.info/)可以工作：

```
return input.replace(/\s*\(\d+\)/g, ""); 
```

它用空字符串[替换所有带括号的整数，包括之前的所有空格。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)要从字符串中删除所有括号和数字，请使用

```
return input.replace(/[()\d]/g, ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:55:48.293

采用`replace()`

```
var s = "firstText secondText probablyMoreTextToComeWithSpacesBetweenThem (0000)";
    s = s.replace(/\(\d*\)/g, ""); 
```

# wcf - svcutil 不生成配置文件

> ID：11780170
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:29.653
> 
> 标签：wcf, svcutil.exe, x509

在安装程序时，我在每台机器上安装了新证书，因此我需要使用证书编码值更新应用程序配置文件。

```
<client>
            <endpoint address="http://localhost:4064/DOXFA/MDMFileAccess.svc/epMainFA"
             binding="wsFederationHttpBinding" bindingConfiguration="epMainFA"
             contract="FileAccessService.IAMICASFileAccessService" name="epMainFA">
                <identity>
                    <certificate encodedValue="**encoded value..."** />
                </identity>
            </endpoint>
            ....
<client> 
```

应用程序使用 AbcService WCF 服务执行一些操作。所以安装程序使用 svcutil 创建配置文件并提取证书编码值并将其放在应用程序配置文件中。

但是 svcutil 现在没有生成任何配置文件。

```
svcutil.exe "http://localhost:4064/WebApp/Abc.svc?wsdl" /config:C:\wcf.config 
```

> Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 3.0.4506.648] 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 尝试使用 WS-Metadata Exchange 或 DISCO 从“http://localhost:4064/WebApp/Abc.svc?wsdl”下载元数据。
> 
> 错误：无法导入 wsdl:binding 详细信息：找不到可用的策略替代方案。错误源的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='epAbc']
> 
> 错误：无法导入 wsdl:port 详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='epAbc'] 错误源的 XPath: //wsdl:definitions[@ targetNamespace='http://tempuri.org/']/wsdl:service[@name='AbcService']/wsdl:port@name='epAbc']
> 
> 生成文件... C:\AbcService.cs

web.config 看起来像（修改一个）

```
<system.serviceModel>
    <bindings>
        <wsFederationHttpBinding>
            <binding name="bindMainFederation" closeTimeout="00:05:00" openTimeout="00:05:00"
                sendTimeout="00:10:00" maxReceivedMessageSize="2147483647">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security>
                    <message>
                        <issuerMetadata address="http://*ADDRESS*/appID/appID.svc/mex">
                            <identity>
                                <dns value="ADOCMergeSTS.com" />
                            </identity>
                        </issuerMetadata>
                    </message>
                </security>
            </binding>
        </wsFederationHttpBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="bhFederatedIdentity" name="X.AbcService">
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            <endpoint address="epAbc" binding="wsFederationHttpBinding"
                bindingConfiguration="bindMainFederation" name="epAbc" contract="X.IAbcService" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="bhFederatedIdentity">
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
                <serviceDebug httpsHelpPageEnabled="false" includeExceptionDetailInFaults="true" />
                <serviceTimeouts transactionTimeout="00:25:00" />
                <serviceCredentials>
                    <serviceCertificate findValue="ADOCMergeService.com" storeLocation="LocalMachine"
                        storeName="My" x509FindType="FindBySubjectName" />
                    <issuedTokenAuthentication certificateValidationMode="PeerTrust">
                        <knownCertificates>
                            <add findValue="ADOCMergeSTS.com" storeLocation="LocalMachine"
                                storeName="TrustedPeople" x509FindType="FindBySubjectName" />
                        </knownCertificates>
                    </issuedTokenAuthentication>
                </serviceCredentials>
                <serviceAuthorization principalPermissionMode="None" serviceAuthorizationManagerType="X.AbcAuthorizationManager, x" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:54:37.720

这是 svcutil.exe 的问题。我可以通过从另一台机器恢复 svcutil.exe 来解决这个问题。

# asp.net - 如何在 ASP.NET 中添加 HtmlDecode

> ID：11780177
> 
> 赞同：0
> 
> 时间：2012-08-02T14:53:43.730
> 
> 标签：asp.net

我试图拉一个编码的字符串。如何将 Server.HtmlDecode 添加到以下表达式？

```
<%# DisplayResourceAddedFields(Eval("Body").ToString())%> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:56:50.727

这取决于您是要在将数据项值传递给`DisplayResourceAddedFields()`方法之前还是之后进行解码。

如果之前：

```
<%# DisplayResourceAddedFields(Server.HtmlDecode(Eval("Body").ToString()))%> 
```

如果之后：

```
<%# Server.HtmlDecode(DisplayResourceAddedFields(Eval("Body").ToString()))%> 
```

# java - 在运行时检测 java 类以监控性能 --> 是否有工具可以做到这一点？

> ID：11780179
> 
> 赞同：4
> 
> 时间：2012-08-02T14:53:47.407
> 
> 标签：java, monitoring, aspectj, instrumentation

我一直在研究各种 java 性能监控工具。

我制定了一个使用 perf4j + aspectj 的解决方案，这样我就可以使用 aspectj 切入点表达式定义要监视的类。然而 aspectj 也（AFAIK），不允许您在运行时更改切入点表达式。因此，如果我需要监视新类，我将不得不更改 aop.xml 并重新编译（或者如果使用 AspectJ 加载时间编织，至少要重新启动应用程序）。

到目前为止，我还没有找到任何可以在运行时检测类而无需重新启动应用程序的东西。有没有可以做到这一点的工具/技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:58:01.997

这些类型的工具通常不会在运行时检测类。相反，他们使用 JVMTI 接口（如果你不明白这是什么，谷歌它）。

使用它的产品的主要示例：

Yourkit，JProfiler

有一些开源工具，但我还没有真正发现它们中的任何一个都像商业同行一样完善。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:55:12.660

找到了一个完美的小图书馆[BTrace](http://kenai.com/projects/btrace/)，它正是我需要的。它通过在运行时操作检测类的字节码来工作，无需重新启动应用程序。查看[用户指南](http://kenai.com/projects/btrace/pages/UserGuide)，了解设置它的难易程度。

关于 Btrace 值得一提的另一件事是，作者为使其在生产环境中工作的安全性付出了很多努力。

> 为了保证跟踪动作是“只读的”（即，跟踪动作不会改变被跟踪程序的状态）和有界（即，跟踪动作在有限时间内终止），BTrace 程序只允许一组受限的动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:06:07.273

我建议使用 Eclipse（或 NetBeans）的调试器/分析器。
它非常强大。

还有一个专门用于这些工具的完整项目：http:
[//www.eclipse.org/projects/project.php?id=tptp.performance](http://www.eclipse.org/projects/project.php?id=tptp.performance)

和一些有趣的插件：
[http ://code.google.com/a/eclipselabs.org/p/jvmmonitor/](http://code.google.com/a/eclipselabs.org/p/jvmmonitor/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:26:42.020

正如 Matt 所说，[YouKit Java Profiler](http://www.yourkit.com)可以检测 Java 字节码。YourKit 允许编写自己的探针并将它们插入到正在运行的 Java 应用程序中。Probe API 允许访问方法参数、返回值、捕获异常等。

文档在这里： [http ://www.yourkit.com/docs/11/help/probes.jsp](http://www.yourkit.com/docs/11/help/probes.jsp)

# xml - 如何生成 XML？

> ID：11780185
> 
> 赞同：5
> 
> 时间：2012-08-02T14:53:56.913
> 
> 标签：xml, google-apps-script

我需要使用电子表格中的特定数据生成 XML 文档。

我正在使用 GoogleScript，但没有看到任何库可以帮助我生成 XML。（标准的 XML 服务只解析 XML）

我是被迫手动做这个还是我错过了什么？

你能推荐任何可能有助于生成 XML 的库或 Javascript 函数吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:00:08.850

您可以使用 HtmlService 模板构建 XML 文档。您*还可以*使用 Xml 服务创建文档，方法是从空文档（Xml.parse('') 或类似的东西）开始，然后使用 Xml.element() 等操作它，但我怀疑第一个想法容易得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T14:16:07.237

最近我发现了一种使用GAS 中存在的`XML`类（不是）生成 XML 的能力。`Xml`一个例子如下

```
function makeXML() {
  var xml = new XML('<a/>');
  xml['@attrib1'] = 'atribValue';
  xml.data = 'dataValue';
  xml.data.sub_data = 'subDataValue';
  return xml.toString();
}

function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.createLabel(makeXML()));
  return app;
} 
```

此脚本的输出是`<a attrib1="atribValue"> <data> dataValue <sub_data>subDataValue</sub_data> </data> </a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:55:31.483

将其粘贴到excel中，然后导出。

否则使用 Apache 的 C-Xerces

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T22:33:39.613

[根据谷歌](https://developers.google.com/apps-script/reference/xml/#parseJS%28Object%29)的说法，正确的方法是使用 parseJS 将一组嵌套的 javascript 数组转换为 XML。

> 要创建可以通过 XmlDocument.toXmlString() 序列化为字符串表示的 XmlDocument 实例，请使用方法 parseJS(jsObject)，它从一组嵌套的 JavaScript 数组构建 XML 文档。

该页面上的链接不好，但[您可以在此处找到 parseJS 的文档。](https://developers.google.com/apps-script/reference/xml/xml?hl=en#parseJS%28Object%29)

我不喜欢这种方法，但我发现他们的 XML 模块上的文档的创建方面很差，所以这是我选择的方法。在我的情况下，我需要将每一行映射到一个元素中，其中一些是子元素，一些是属性。这可以写得更简短，但我不确定它会更容易理解。至少对我来说不是。

所以这是我为我的需要提出的解决方案，它创建顶部封闭的 XML，然后逐个节点添加。完成后，它会打开一个匹配的 google 文档并将呈现的 XML 放入其中。有一些非常基本的检查来确保我有最少需要的单元格，所以如果我的一个用户输入了错误的行，我就跳过它。它还让我不必担心底部多余的空白行等。

```
 var now = new Date();
  var UTCString = '';
  UTCString = UTCString.concat(now.getFullYear(),'-',now.getMonth()+1,'-',now.getDate(),'T',now.getHours(),':',now.getMinutes(),':',now.getSeconds(),'+00:00');  

  var fullDoc = ["entities", {"type":"federal-body"}, {"updated":UTCString}];
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheets()[0];

  // This selects ALL the data w/o having to specify a range
  var range = sheet.getDataRange();
  var values = range.getValues();

  // This logs the spreadsheet in CSV format with a trailing comma
  for (var i in values) {
    //not elegant but worth it for the get-all-range
    if (i==0)
      continue;
    if (values[i][0] && values[i][2]) {
      //make an object if column 1 is empty
      //column 0 is the id attribute
      //column 1, if present, is the parent-id attribute
      if (values[i][1]) {
        var node = ["entity", {"id": values[i][0]}, {"parent-id": values[i][1]} ];       
      } else {
        var node = ["entity", {"id": values[i][0]} ];
      }
      //column 2 is the name value and has the attribute of role:official
      node.push([ "name", {"role" : "official"}, values[i][2] ]);
      //column 3, if present, is the abbr value
      if (values[i][3]) {
        node.push([ "abbr", values[i][3] ]);
      }
      //column 4, if present, is a name value with role:historical
      if (values[i][4]) {
        node.push([ "name", {"role" : "historical"}, values[i][3] ]);
      }
      //column 5, if present, is a name value with role:leadership
      if (values[i][5]) {
        node.push([ "name", {"role" : "leadership"}, values[i][5]]);
      }     
      fullDoc.push(node);   
   } 
  }

  var xml = Xml.parseJS(fullDoc);

  //put it in the file
  var doc = DocumentApp.openByUrl('https://docs.google.com/document/d/17WNYtvjCgR-w3m3tIFNmHlr3aVLqfUaobGqFu-hIGks/edit');
  var header = doc.getHeader();
  if (header)
    header.clear();
  var footer = doc.getFooter();
  if (footer)
    footer.clear();
  var body = doc.getBody();
  body.setText(xml.toXmlString()); 
```

目前我已将其放入需要手动运行的菜单项中，但最终我会考虑在保存时触发它。输出 XML 未格式化，但因为我只是将它推入数据库（我打算稍后自动化的更新过程），所以我不在乎。

对属性使用列标题会更聪明，但我不想弄乱来自客户端的源文档。

您可以查看[源电子表格](https://docs.google.com/spreadsheet/ccc?key=0Asq4MpW95tWqdHA2b0k4N1NMVGt5MVZDalBUSzB3RkE&usp=sharing)以及用于比较[的输出。](https://docs.google.com/document/d/17WNYtvjCgR-w3m3tIFNmHlr3aVLqfUaobGqFu-hIGks/edit?usp=sharing)

# javascript - dijit Tree + checkbox - 无法选择/取消选择复选框

> ID：11780188
> 
> 赞同：0
> 
> 时间：2012-08-02T14:54:06.317
> 
> 标签：javascript, checkbox, tree, dojo

我试图通过输入输入 html 代码作为标签值的一部分在 dijit.Tree 中放置一个复选框。它显示正常，但我无法选中或取消选中它。好像点击事件没有冒泡/到达输入元素。

这是我创建树对象的方法。

```
myTree = new dijit.Tree({
    model: myModel,
    showRoot: false,            
    getLabel: function(item) {
        if (!item.root)
            return '<input type="checkbox" name="'+ item.name +'" id="'+ item.name +'" value="1" /> '+ item.name;
    }

}, "gridDiv"); 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:54:48.650

right now 2 choices come to my mind:

1.  Use the new dojo's dgrid if you can. With this new grid you can use the Editor module and pass "checkbox" as a parameter and it would render a checkbox in your column. Check it out [here](http://www.sitepen.com/blog/2011/10/26/introducing-the-next-grid-dgrid/). Then you can download it [here](https://github.com/SitePen/dgrid) and when you do, check out the "test" folder where you will find an example of what you want in "dgrid/test/tree.html".
2.  in your current grid, edit your return statement for getLabel method and make it return a dojo style markup like `<div data-dojo-type="dijit.form.CheckBox" ... ></div>` and then after the tree's startup event do a `dojo.parser.parse(tree.domNode)`. This will parse only your grid's DOM node and will convert any dojo style markup into actual dojo objects.

I personally recommend, if you can, the first choice.

Luck,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:00:03.913

如果树中有复选框，我会选择 cbtree。 [在这里检查](http://thejekels.com/cbtree/demos/)

# ruby-on-rails - 如何在 resque 作业完成时提醒用户

> ID：11780191
> 
> 赞同：1
> 
> 时间：2012-08-02T14:54:14.387
> 
> 标签：ruby-on-rails, ruby, redis, resque

我有一个使用`resque`gem 处理后台作业的 ruby​​ on rails 应用程序。我让用户触发可能需要 10 分钟以上才能完成的后台作业（他们正在处理大量数据）。作业完成时提醒用户的最佳方式是什么？

我在[这里](https://stackoverflow.com/questions/8383259/knowing-when-resque-worker-had-completed-job)看到了关于 using的答案`resque-status`，这是唯一的解决方案吗？还是有另一种通过正常方式提醒用户的方法`resque`（我已经实现了）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:41:34.400

如果您打算异步通知用户，您有以下三种选择：

1.  在数据库中设置一个标志，然后在他们下次登录时更改您的 UI。（例如弹出警报视图或其他内容。）
2.  在作业运行结束时向他们发送电子邮件。只需为此使用标准的 ActionMailer 东西。
3.  如果您使用的是 Faye 或 Juggernaut 之类的 pubsub 框架，请向用户推送工作完成的通知。如果他们已登录，他们应该会立即看到。

这些几乎是我唯一能想到的。我个人会选择 1 和 2 的组合；完成后向他们发送电子邮件，并在他们下次登录时通知他们（并在通知中提供链接）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T06:12:55.557

您可以使用名为“resque-status”的 gem。

使用此 gem，您可以轻松获取工作状态：

```
status = Resque::Plugins::Status::Hash.get(job_id) 
```

该`Resque::Plugins::Status::Hash`对象返回：

```
status.pct_complete #=> 0
status.status #=> 'queued'
status.queued? #=> true
status.working? #=> false
status.time #=> Time object        
status.message #=> "Created at ..." 
```

有关更多详细信息并获取此 gem，请访问：[https ://github.com/quirkey/resque-status](https://github.com/quirkey/resque-status)

# r - 选择 n 个后续分组变量并在 r 中应用函数

> ID：11780194
> 
> 赞同：3
> 
> 时间：2012-08-02T14:54:25.860
> 
> 标签：r, variables, loops

这是示例数据：

```
 myd <- data.frame (matrix (sample (c("AB", "BB", "AA"), 100*100, 
 replace = T), ncol = 100))
 variablenames= paste (rep (paste ("MR.", 1:10,sep = ""), 
  each = 10), 1:100, sep = ".")
  names(myd) <- variablenames 
```

每个变量都有一个组，这里我们有十个组。因此，该数据框中每个变量的组索引如下：

```
group <- rep(1:10, each = 10) 
```

因此变量名称和组

```
 data.frame (group, variablenames)
    group variablenames
1       1        MR.1.1
2       1        MR.1.2
3       1        MR.1.3
4       1        MR.1.4
5       1        MR.1.5
6       1        MR.1.6
7       1        MR.1.7
8       1        MR.1.8
9       1        MR.1.9
10      1       MR.1.10
11      2       MR.2.11
 <<<<<<<<<<<<<<<<<<<<<<<<
100    10     MR.10.100 
```

每个组意味着以下步骤将分别应用于变量组。

我有更长的功能可以工作以下是简短的示例：

函数同时考虑两个变量

```
myfun <- function (x1, x2) {
out <- NULL
out <-  paste(x1, x2, sep=":")
# for other steps to be performed here
return (out)
}
# group 1
myfun (myd[,1], myd[,2]); myfun (myd[,3], myd[,4]); myfun (myd[,5], myd[,6]); 
myfun (myd[,7], myd[,8]); myfun (myd[,9], myd[,10]);
# group 2 
 myfun (myd[,11], myd[,12]); myfun (myd[,13], myd[,14]); .......so on to group 10 ; 
```

这样，我需要为变量步行 1:10（即在第一组执行上述操作），然后是 11:20（第二组）。在这种情况下，组无关紧要，每组中的变量数可与一次（2）采用（考虑）的变量数（10）整除。

但是，在以下示例中，一次取 3 个变量 - 每组中的总变量数 (3)，10/3，最后剩下一个变量。

函数同时考虑三个变量。

```
myfun <- function (x1, x2, x3) {
out <- NULL
out <-  paste(x1, x2, x3, sep=":")
# for other steps to be performed here
return (out)
}
# for group 1
myfun (myd[,1], myd[,2], myd[,3])
myfun (myd[,4], myd[,5], myd[,6])
myfun (myd[,7], myd[,8], myd[,9])  
 # As there one variable left before proceedomg to second group, the final group will 
have 1 extra variable  
myfun (myd[,7], myd[,8], myd[,9],myd[,10] )
 # for group 2   
  myfun (myd[,11], myd[,12], myd[,13])
  # and to the end all groups and to end of the file. 
```

我想通过用户定义的 n 个变量来循环这个过程，其中 n 可能是 1 到每个组中的最大变量数。

**编辑：只是说明过程（例如，仅演示了第 1 组和第 2 组）：**

![在此处输入图像描述](../Images/09bb2731e9e2df45521d2c629f25b793.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T09:13:37.407

创建一个函数，将您的数据拆分为适当的列表，并将您想要的任何函数应用于您的列表。

此函数将创建您的*第二个*分组变量。（您的问题中提供了第一个分组变量 ( `group`)；如果您更改该值，您还应该`DIM`在下面的函数中进行更改。）

```
myfun = function(LENGTH, DIM = 10) {
  PATTERN = rep(1:(DIM %/% LENGTH), each=LENGTH)
  c(PATTERN, rep(max(PATTERN), DIM %% LENGTH))
} 
```

这是我们将拆分的组`myd`。在此示例中，我们`myd`首先将分成 10 列组，然后将每个组分成 3 列组，最后一组除外，它将有 4 列 (3+3+4 = 10)。

> > 注意：*要更改分组依据的列数，例如一次按两个变量分组，请更改* *为*.**`group2 = rep(myfun(3), length.out=100)`** ***`group2 = rep(myfun(2), length.out=100)`***

 *```
group <- rep(1:10, each = 10)
# CHANGE THE FOLLOWING LINE ACCORDING
# TO THE NUMBER OF GROUPS THAT YOU WANT
group2 = rep(myfun(3), length.out=100) 
```

这就是分裂的过程。我们首先仅按名称进行拆分，然后将这些名称与之匹配`myd`以创建一个`data.frames`.

```
# Extract group names for matching purposes
temp = split(names(myd), list(group, group2))

# Match the names to myd
temp = lapply(1:length(temp),
              function(x) myd[, which(names(myd) %in% temp[[x]])])

# Extract the names from the list for future reference
NAMES = lapply(temp, function(x) paste(names(x), collapse="_")) 
```

现在我们有了一个列表，我们可以做很多有趣的事情。您想将列粘贴在一起，用冒号分隔。下面是你如何做到这一点。

```
# Do what you want with the list
# For example, to paste the columns together:
FINAL = lapply(temp, function(x) apply(x, 1, paste, collapse=":"))
names(FINAL) = NAMES 
```

这是输出示例：

```
lapply(FINAL, function(x) head(x, 5))
# $MR.1.1_MR.1.2_MR.1.3
# [1] "AA:AB:AB" "AB:BB:AA" "BB:AB:AA" "BB:AA:AB" "AA:AA:AA"
# 
# $MR.2.11_MR.2.12_MR.2.13
# [1] "BB:AA:AB" "BB:AB:BB" "BB:AA:AA" "AB:BB:AA" "BB:BB:AA"
# 
# $MR.3.21_MR.3.22_MR.3.23
# [1] "AA:AB:BB" "BB:AA:AA" "AA:AB:BB" "AB:AA:AA" "AB:BB:BB"
# 
# <<<<<<<------SNIP------>>>>>>>>
#
# $MR.1.4_MR.1.5_MR.1.6
# [1] "AB:BB:AA" "BB:BB:BB" "AA:AA:AA" "BB:BB:AB" "AB:AA:AA"
# 
# $MR.2.14_MR.2.15_MR.2.16
# [1] "AA:BB:AB" "BB:BB:BB" "BB:BB:AB" "AA:BB:AB" "BB:BB:BB"
# 
# $MR.3.24_MR.3.25_MR.3.26
# [1] "AA:AB:BB" "BB:AA:BB" "BB:AB:BB" "AA:AB:AA" "AB:AA:AA"
# 
# <<<<<<<------SNIP------>>>>>>>>
#
# $MR.1.7_MR.1.8_MR.1.9_MR.1.10
# [1] "AB:AB:AA:AB" "AB:AA:BB:AA" "BB:BB:AA:AA" "AB:BB:AB:AA" "AB:BB:AB:BB"
# 
# $MR.2.17_MR.2.18_MR.2.19_MR.2.20
# [1] "AB:AB:BB:BB" "AB:AB:BB:BB" "AB:AA:BB:BB" "AA:AA:AB:AA" "AB:AB:AB:AB"
# 
# $MR.3.27_MR.3.28_MR.3.29_MR.3.30
# [1] "BB:BB:AB:BB" "BB:BB:AA:AA" "AA:BB:AB:AA" "AA:BB:AB:AA" "AA:AB:AA:BB"
# 
# $MR.4.37_MR.4.38_MR.4.39_MR.4.40
# [1] "BB:BB:AB:AA" "AA:BB:AA:BB" "AA:AA:AA:AB" "AB:AA:BB:AB" "BB:BB:BB:BB"
# 
# $MR.5.47_MR.5.48_MR.5.49_MR.5.50
# [1] "AB:AA:AA:AB" "AB:AA:BB:AA" "AB:BB:AA:AA" "AB:BB:BB:BB" "BB:AA:AB:AA"
# 
# $MR.6.57_MR.6.58_MR.6.59_MR.6.60
# [1] "BB:BB:AB:AA" "BB:AB:BB:AA" "AA:AB:AB:BB" "BB:AB:AA:AB" "AB:AA:AB:BB"
# 
# $MR.7.67_MR.7.68_MR.7.69_MR.7.70
# [1] "BB:AB:BB:AA" "BB:AB:BB:AA" "BB:AB:BB:AB" "AB:AA:AA:AA" "AA:AA:AA:AB"
# 
# $MR.8.77_MR.8.78_MR.8.79_MR.8.80
# [1] "AA:AB:AA:AB" "AB:AA:AB:BB" "BB:BB:AA:AB" "AB:BB:BB:BB" "AB:AA:BB:AB"
# 
# $MR.9.87_MR.9.88_MR.9.89_MR.9.90
# [1] "AA:BB:AB:AA" "AA:AB:BB:BB" "AA:BB:AA:BB" "AB:AB:AA:BB" "AB:AA:AB:BB"
# 
# $MR.10.97_MR.10.98_MR.10.99_MR.10.100
# [1] "AB:AA:BB:AB" "AB:AA:AB:BB" "BB:AB:AA:AA" "BB:BB:AA:AA" "AB:AB:BB:AB" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:47:45.553

我建议重新编码 myfun 以获取矩阵并使用 plotrix 包中的 pasteCols。

```
library(plotrix)

myfun = function(x){
    out = pasteCols(t(x), sep = ":")
    # some code
    return(out)
} 
```

然后，它很容易：对于每个组，使用模数和整数除法计算您在调用 myfun 时要使用的第一列和最后一列的索引：

```
rubiques_solution = function(group, myd, num_to_group){
   # loop over groups
   for(g in unique(group)){
      var_index = which(group == g)
      num_var = length(var_index)

      # test to make sure num_to_group is smaller than the number of variable
      if(num_var < num_to_group){
         stop("num_to_group > number of variable in at least one group")
         }

      # number of calls to myfun
      num_calls = num_var %/% num_to_group

      # the idea here is that we create the first and last column
      # in which we are interested for each call
      first = seq(from = var_index[1], by = num_to_group, length = num_calls)
      last = first + num_to_group -1
      # the last call will contain possibly more varialbe, we adjust here:
      last[length(last)] = last[length(last)] + (num_var %% num_to_group)

      for(i in num_calls){
         # maybe do something with the return value of myfun ?
         myfun(myd[,first[i]:last[i]])
      }
   }  
}  

group = rep(1:10, each = 10) # same than yours
myd = data.frame (matrix (sample (c("AB", "BB", "AA"), 100*100, replace = T), ncol = 100)) # same than yours
num_to_group = 2 # this is your first example
rubiques_solution(group, myd, num_to_group) 
```

希望我理解正确的问题。*

# actionscript-3 - 当您在一帧中有一个电影剪辑并且您的电影不断结束并返回开始时，垃圾收集器会做什么？

> ID：11780196
> 
> 赞同：1
> 
> 时间：2012-08-02T14:54:28.973
> 
> 标签：actionscript-3, flash, garbage-collection

我已经知道基于时间线编程的所有问题，但我很想知道在这种情况下垃圾收集器会发生什么。

谈论时间轴中的代码 - 如果代码不在同一帧中，则无法访问电影剪辑，这是否会增加内存泄漏的可能性？

在我看来，当“播放头”当前位于其帧上时，时间轴中的影片剪辑被添加，并在它消失时被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:02:28.037

如果出现以下情况，垃圾收集器将无法清理/处理从舞台上移除的影片剪辑：

*   该剪辑仍在播放并做一些事情（创建/删除其他事情......）

*   该剪辑仍被其他一些“可访问”的实例引用

*   您尝试删除包含太多项目的过于复杂的层次结构[我没有任何数字，但我猜大约 2^32 个项目？]

我通常用来查看是否存在内存泄漏的一种方法是在 FlashDevelop 中运行 SWF Profiler 并强制 GC 在某些情况下运行并查看哪些内容被删除。

请查看以下文章以获取更多信息：

[http://active.tutsplus.com/tutorials/workflow/quick-tip-understanding-garbage-collection-in-as3/](http://active.tutsplus.com/tutorials/workflow/quick-tip-understanding-garbage-collection-in-as3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:59:50.050

该代码仍然是该影片剪辑的一部分。所以它仍然存在。并且由于***假定***MovieClip仍附加到其父级，因此它保持不变。

（我说附加到其父级而不是屏幕上，因为它可能让父级引用子级，而子级使用 .parent 变量引用父级，因此由于它们都有指向它们的东西，它们会留在内存中）。

# linux - 使用 $() 将多个命令输出到变量 Bash 脚本中

> ID：11780199
> 
> 赞同：1
> 
> 时间：2012-08-02T14:54:44.727
> 
> 标签：linux, bash, shell

我对此进行了审查，但仍然遇到问题，这是我要执行的命令。没有将`$()`所需输出打印到控制台的命令没有问题，我似乎无法将该值放入稍后使用的变量中。

```
MODEL3= $(/usr/sbin/getSystemId | grep "Product Name" | awk '{print $4}') 
```

但

```
MODEL3= /usr/sbin/getSystemId | grep "Product Name" | awk '{print $4}' 
```

- 将输出到控制台。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T14:57:27.683

那是对的：

```
MODEL3=$(/usr/sbin/getSystemId | grep "Product Name" | awk '{print $4}') 
```

但是您可以在没有以下情况下编写相同的内容`grep`：

```
MODEL3=$(/usr/sbin/getSystemId | awk '/Product Name/{print $4}') 
```

现在你在`MODEL3`变量中有结果，你可以进一步使用它`$MODEL3`：

```
echo "$MODEL3" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:01:04.287

### 变量赋值中的空格不合法

变量赋值在变量名、赋值运算符和值之间不能有空格。您当前的行说：

```
MODEL3= $(/usr/sbin/getSystemId | grep "Product Name" | awk '{print $4}') 
```

这实际上意味着“使用空环境变量运行以下表达式，其中 MODEL3 已设置但为空。”

你*想要*的是一个实际的任务：

```
MODEL3=$(/usr/sbin/getSystemId | grep "Product Name" | awk '{print $4}') 
```

# iphone - 无法从服务器共享点获取响应

> ID：11780201
> 
> 赞同：0
> 
> 时间：2012-08-02T14:54:54.080
> 
> 标签：iphone, ios, ipad

```
-(NSString *)getSoap{
    NSString *getEnvelopeData = [NSString stringWithFormat:
    @"<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n"
    "<s:Envelope xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n"
    "<s:Header>\n"
    "<a:Action s:mustUnderstand=\"1\">http://tempuri.org/IHelloWorldService/GetData</a:Action>\n"
    "<a:MessageID>urn:uuid:e2c3af4e-5d69-4fd8-94bd-0e0f00976dad</a:MessageID>\n"
    "<a:ReplyTo>\n"
    "<a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>\n"
    "</a:ReplyTo>\n"
    "</s:Header>\n"
    "<s:Body>\n"
    "<GetData xmlns=\"http://tempuri.org/\">\n"
    "<value>0</value>\n"
    "</GetData>\n"
    "</s:Body>\n"
    "</s:Envelope>\n"];
    return getEnvelopeData;
}
-(void)loadSoapRequest{

    NSString *soapMessage = [self getSoap];
    NSLog(@"soapMessage %@",soapMessage);

    NSString *urlString = @"http://l-156024038.testad.com:9000/HelloWorldService.svc";

    NSURL *url = [NSURL URLWithString:urlString];    
    NSMutableURLRequest *theRequest = [[NSMutableURLRequest alloc]initWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d",[soapMessage length]];
    [theRequest setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];

    [theRequest addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest addValue:@"l-156024038.testad.com" forHTTPHeaderField:@"Host"];
    [theRequest addValue:@"GetData" forHTTPHeaderField:@"SOAPAction"];
    [theRequest setValue:@"Basic " forHTTPHeaderField:@"Authorization"];    
//    theRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:45];
    [theRequest setHTTPMethod:@"GET"];

    [theRequest setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        webData = [NSMutableData data];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    }
}

//At this point connection is setup and delegate is set to self, now is time to use connection delegate methods. Four methods that we gonna use:

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{

    NSLog(@"response Value %@",response);

}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
    NSLog(@"Data Received %@",webData);

}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

    NSLog(@"Error with connection %@",error);
} 
```

从上面的代码我无法从服务器获得响应！

它总是调用 didFailWithError 委托方法！

# cuda - 使用 CUDA 根据某些数字范围过滤数字的有效方法是什么？

> ID：11780208
> 
> 赞同：2
> 
> 时间：2012-08-02T14:55:25.117
> 
> 标签：cuda

我有很多随机浮点数驻留在全局 GPU 内存中。我也有“桶”，指定他们将接受的数字范围和他们将接受的数字容量。

即：数字：-2 0 2 4 个桶（大小=1）：[-2, 0], [1, 5]

我想运行一个过滤过程来产生我

filters_nums: -2 2（其中 filters_nums 可以是一个新的内存块）

但是我采取的每一种方法都会在尝试跨桶计数器同步线程时遇到巨大的开销。如果我尝试使用单线程，算法会成功完成，但需要的时间非常长（比最初生成数字慢 100 倍以上）。

我要求的是一种通用的高级、高效、尽可能简单的方法算法，您可以使用它来过滤这些数字。

**编辑** 我将处理 10 个桶和 50 万个数字。所有数字恰好落入 10 个桶范围中的 1 个。每个桶将容纳 43000 个元素。（有多余的元素，因为目标是填满每个桶，许多数字将被丢弃）。

**第二次编辑** 重要的是要指出桶不必单独存储。目标只是丢弃不适合存储桶的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:31:05.993

您可以使用推力::remove_copy_if

```
struct within_limit
{
    __host__ __device__
    bool operator()(const int x)
        {
            return (x >=lo && x < hi);
        }
};
thrust::remove_copy_if(input, input + N, result, within_limit()); 
```

您将不得不用每个 bin 的常量替换 lo 和 hi。我认为您可以模板化内核，但是您必须再次用实际常量实例化模板。我看不到一个简单的方法，但我可能会遗漏一些东西。

如果您愿意查看第三方库，arrayfire 可能会提供更简单的解决方案。

```
array I = array(N, input, afDevice);
float **Res = (float **)malloc(sizeof(float *) * nbins);
for(int i = 0; i < nbins; i++) {
   array res = where(I >= lo[i] && I < hi[i]);
   Res[i] = res.device<float>(); 
} 
```

# jquery - JSON POST 获取响应数据失败

> ID：11780210
> 
> 赞同：0
> 
> 时间：2012-08-02T14:55:41.827
> 
> 标签：jquery

我使用 html 和 jquery 代码开发了一个简单的网页，该网页将使用 http post 将数据传递到我的网关。来自服务器的响应是 json 对象，{"remarks":"SUCCEED"}。但是，我的网页总是无法得到相关响应

下面是我的网页代码

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loading data into a PhoneGap ap2p</title>    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script src="jquery.jsonp.js"></script>
</head>
<body>
    <ul id="your-tweets"></ul>
</body>
<script>
$(document).ready(function(){

$.ajax({
    type: 'POST',
    url: 'http://localhost:8091/gateway/jjh/v1.0/login?userid=ccc&password=pwd',
    crossDomain: true,
    data: 'userid=wcc',
    dataType: 'json',
    success: function(responseData, textStatus, jqXHR) {
    alert("Success>>");

    var obj = responseData;
    alert(obj.remarks);

    },
    error: function (responseData, textStatus, errorThrown) {
        alert('POST failed.');
    }
}); 
});
</script>
</html> 
```

任何人都可以帮助/建议我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:13:41.560

打开您的 Firebug 或 Chrome 开发人员工具并查看控制台。如果出现错误消息，`Origin is not allowed by Access-Control-Allow-Origin`则说明您违反了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

您可以通过以下方式解决此问题：

*   将您的网页和 JSON 源移动到同一个域下。

*   请改用[JSONP](http://en.wikipedia.org/wiki/JSONP)。

# ruby-on-rails - form_tag with :remote => true 不更新 div，跳到单独的页面

> ID：11780215
> 
> 赞同：1
> 
> 时间：2012-08-02T14:55:50.557
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms

我正在尝试根据表单提交更新 div。我在 Rails 3.1.1 上。我正在尝试改编别人的[食谱](http://jmvidal.cse.sc.edu/talks/rubyonrails/form_remote_tag.html)。我在视图中的代码是这样的`main.html.erb`：

```
<%= javascript_include_tag :defaults %>
<div id='seq_search'>
  <%= form_tag(:remote => true, :update => 'seq_select', :action => 'select')  do %>
    <p>
      <%= search_field_tag  :query, '', :size => 45 %>
    </p>
    <p>
      <%=submit_tag "Submit", :disable_wth => "Adding ..."%>
    </p>
   <% end %>
</div>

<div id='seq_select'>

</div> 
```

控制器看起来像

```
class SearchAjaxController < ApplicationController
  def main
  end
  def select
      render :text => '<li> '+params[:query] + ' </li>'
  end
end 
```

但是，当我在文本框中输入内容并按提交时，它并没有更新 div，而是转到另一个页面，仅呈现`select`控制器方法的输出。

如果我查看表单的页面源代码，它是这样的：

```
<div id='seq_search'>
  <form accept-charset="UTF-8" action="/search_ajax/select?remote=true&amp;update=seq_select" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="wlOm4H7GvZAQoIVpjxPLqHAQLOIpJ4V5r0WYEpvCCrQ=" /></div>
    <p>
      <input id="query" name="query" size="45" type="search" value="" />
    </p>
    <p>
      <input disable_wth="Adding ..." name="commit" type="submit" value="Submit" />
    </p>
</form></div>

<div id='seq_select'>

</div> 
```

似乎表单只是`remote=true&amp;update=seq_select`作为参数传递给控制器​​的方法/函数。这是应该发生的事情吗？

**更新：**

所以我尝试添加以遵循 Mike Campbell 的建议，并将以下代码添加到我的视图 (`.html.erb') 文件中

```
<SCRIPT type='text/Javascript'> 
$(function(){
  $('#form-id').bind('ajax:success', function(xhr, data, status){
    $('#seq_select').html(data);
  });
}
</SCRIPT> 
```

并为表格提供了一个ID：

```
 <%= form_tag(:remote => true, :update => 'seq_select', :action => 'select', :id => 'form-id')  do %> 
```

提交表单仍然不会更新页面。它只是像以前一样跳到一个新的渲染视图。生成的 HTML 内容如下：

```
<SCRIPT type='text/Javascript'> 
$(function(){
  $('#form-id').bind('ajax:success', function(xhr, data, status){
    $('#seq_select').html(data);
  });
}
</SCRIPT>

<div id='seq_search'>
  <form accept-charset="UTF-8" action="/ajax_search/select/form-id?remote=true&amp;update=seq_select" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="wlOm4H7GvZAQoIVpjxPLqHAQLOIpJ4V5r0WYEpvCCrQ=" /></div>
    <p>
      <label> Search by identifiers, accessions, and gene names.. </label>
    </p>
    <p>
      <input id="query" name="query" size="45" type="search" value="" />
    </p>
    <p>
      <input disable_wth="Adding ..." name="commit" type="submit" value="Submit" />
    </p>
</form></div>

<div id='seq_select'>

</div> 
```

更新：

form_tag 的语法似乎是错误的，第一个参数必须是操作的名称。我现在拥有`<%= form_tag( 'select', :remote => true, :id => 'form_id') do %>`生成关联的 HTML `<form accept-charset="UTF-8" action="select" data-remote="true" id="form_id" method="post">`。哪个更好，但我的 Ajax 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:12:00.470

我认为这与控制器中对 xhr 的响应有关。您应该指定这是一个 xhr 请求。有关此问题，请参见[此处](https://stackoverflow.com/questions/1498694/how-to-respond-to-html-requests-made-via-ajax-in-rails)。

# linq - Linq - 操作顺序是否相关？

> ID：11780218
> 
> 赞同：2
> 
> 时间：2012-08-02T14:55:53.800
> 
> 标签：linq, entity-framework, tsql

我有一些缓慢的 linq 查询，需要优化它们。我已阅读有关已编译查询并在我的只读操作中在 NoTracking 中设置合并选项的信息。但我认为我的问题是我有太多的包含，所以在数据库中完成的连接数量是巨大的。

```
context.ExampleEntity
      .Include("A")
      .Include("B")
      .Include("D.E.F")
      .Include("G.H")
      .Include("I.J")
      .Include("K.M")
      .Include("K.N")
      .Include("O.P")
      .Include("Q.R")
      .Where(a => condition1 || complexCondition2) 
```

我的疑问是，如果我将 Where 放在 Includes 之前，是否会在进行所有连接之前过滤 ExampleEntity 对象？我不确定如何将 linq 查询转换为 SQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:52:41.280

“是的”。每个子查询将其结果传递给下一个。移动第`Where`一个将过滤，*然后*针对可能较小的集合执行包含。

这在您的特定查询的上下文中是否有意义由您决定。

# google-sheets - 如何选择列中填充最底部的字段？

> ID：11780219
> 
> 赞同：0
> 
> 时间：2012-08-02T14:55:55.360
> 
> 标签：google-sheets

我有几个人烟稀少的列：

```
    1 8 9    
    3 1 7    
    7 2    
         3
```

我想要列底部的以下值：`7`, `3`, `7`, `2`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:48:58.540

此公式返回 A 列中最后一个非零单元格的编号：

```
=arrayformula(max(if(A1:A<>"";row(A1:A);1))) 
```

然后就可以用=index来获取对应的sell的值了。

# codeigniter - CodeIgniter：如何在控制器代码中覆盖分页配置？

> ID：11780220
> 
> 赞同：1
> 
> 时间：2012-08-02T14:55:59.300
> 
> 标签：codeigniter, pagination

我最近参加了 CodeIgniter 培训，因为我终于想为我不断增长的 PHP/MySQL 项目采用 MVC 架构。现在我遇到了一个问题 PAgination configuratino，据我所知，它显然没有在前面描述过。

可能问题不仅与 PAgination 有关，而且更普遍。在我的第一次尝试中，我只是在控制器方法中填写了配置并将其传递给 initialize() 方法：

```
$config['base_url'] = $this->config->base_url() .  "/categorie/{$catName}/";
$config['total_rows'] =      $this->event_model->get_nrofevents_for_categorie($categorieObject->id, TRUE);
$config['per_page'] = 12;
$config['full_tag_open'] = '<div class="paging">';
$config['full_Tag_close'] = '</div>';
$config['prev_link'] = 'Vorige';
$config['next_link'] = 'Volgende';
$this->pagination->initialize($config); 
```

这很好用。但是我有很多其他页面使用相同的分页，其大多数参数相同，只有 base_url 和 total_rows 配置属性对于每个页面是不同的。我已将通用配置放在 config/pagination.php 配置文件中，但看不到在代码中添加页面相关属性的选项。更一般地说，是否可以将通用配置放在配置文件中并在控制器方法中添加一些自定义属性？对我来说，这似乎合乎逻辑，但无法弄清楚如何......我尝试了类似的东西：

```
$this->load->config('pagination');
$this->config->set_item('next_link', 'blablabla'); 
```

但似乎在读取配置文件后立即初始化分页，并且此代码无效。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:23:51.773

由于`initialize()`唯一替换了您提供的键，因此您可以`config/pagination.php`保留默认值并`initialize()`使用更改的值调用。

### 配置/分页.php

```
 // put default values here
 $config['next_link'] = 'Volgende';
 $config['prev_link'] = 'Vorige';
 // ... 
```

### 控制器

```
 $this->pagination->initialize(array(
     'base_url' => base_url().'categorie/'.$catName.'/',
     'total_rows' => $totalRows,
      // ...
 ))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T08:00:53.493

不要使用 base_url()... 我总是使用 site_url();

```
$config['base_url'] = site_url(''); 
```

# javascript - 在for循环中创建DIV？（JS）

> ID：11780225
> 
> 赞同：0
> 
> 时间：2012-08-02T14:56:23.463
> 
> 标签：javascript, ajax, dom

是否可以使用 for 循环创建具有唯一 ID 的 div？

```
for (var i = 0, n = 4; i < n; i++) {
var divTag = document.createElement("div");
divTag.id = "div"i;
divTag.innerHTML = Date();
document.body.appendChild(divTag);
} 
```

这段代码不应该产生 4 个包含当前日期的唯一 DIV 吗？目前它什么也没返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:58:15.320

采用

```
divTag.id = "div" + i; 
```

它会产生唯一的ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:58:31.093

试一试：

```
divTag.id = 'div' + i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T14:58:34.557

尝试

```
divTag.id = "div" + i; 
```

代替

```
divTag.id = "div"i; 
```

然后它应该工作

# android - 正则表达式 android

> ID：11780232
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:56:53.807
> 
> 标签：android, regex

例如，我有这样的字符串

309\306\308\337_338

309\306\337_338

310

311\315_316\336_337

311\315_316\336_337

311\335_336

这些字符串表示页码列表，例如字符串“309\306\308\337_339”表示第 309,306,308,337,338,339 页

我想将这些字符串之一传递给函数，该函数将其作为字符串返回，如 309,306,308,337,338,339

这个函数可以做到这一点，但在 c# 中，我想在 android 中刺穿

```
 private static string Get_PageNumbers(string str)
    {
        ArrayList arrAll = new ArrayList();
        MatchCollection match;
        string[] excar;
        string strid, firstNumber, lastlNumber;
        int fn, ln;
        ArrayList arrID = new ArrayList();

        //***In Case The Range Number Between "_"
        if (str.Contains("_"))
        {
            // match_reg = new Regex("(w?[\\d]+)*(_[\\d]+)");
            Regex matchReg = new Regex("(w?[\\69]+_[\\d]+)*(q?[\\d]+//)*(a?[\\d]+_[\\d]+)*(y?[\\d]+)*");
            match = matchReg.Matches(str);

            int count = match.Count;
            excar = new string[0];
            for (int i = 0; i < count; i++)
            {
                Array.Resize(ref excar, count);

                excar[i] = match[i].Groups[0].Value;
                if (excar[i] != string.Empty)
                    arrID.Add(excar[i]);
            }

            //******IF Array Contains Range Of Number Like"102_110"
            if (str.Contains("_"))
            {
                for (int i = 0; i < arrID.Count; i++)
                {
                    strid = arrID[i].ToString();

                    if (arrID[i].ToString().Contains("_"))
                    {
                        int idy = strid.LastIndexOf("_");
                        firstNumber = strid.Substring(0, idy);

                        if (idy != -1)
                        {
                            lastlNumber = strid.Substring(idy + 1);
                            fn = int.Parse(firstNumber);
                            arrAll.Add(fn);
                            ln = int.Parse(lastlNumber);
                            for (int c = fn; c < ln; c++)
                            {

                                fn++;
                                arrAll.Add(fn);

                            }
                        }
                    }
                    else
                    {
                        arrAll.Add(arrID[i].ToString());
                    }
                }

                //******If Array Contain More Than One Number
                if (arrAll.Count > 0)
                {
                    str = "";
                    for (int i = 0; i < arrAll.Count; i++)
                    {

                        if (str != string.Empty)
                            str = str + "," + arrAll[i];
                        else
                            str = arrAll[i].ToString();
                    }

                }
            }
        }

        //***If string Contains between "/" only without "_"

        else if (str.Contains("/") && !str.Contains("_"))
        {
            str = str.Replace("/", ",");
        }
        else if (str.Contains("\\"))
        {
            str = str.Replace("\\", ",");
        }
        return str;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:17:47.160

我认为这更容易用`split`函数来完成：

```
public static String Get_PageNumbers(String str) {// Assume str = "309\\306\\308\\337_338"
    String result = "";
    String[] pages = str.split("\\\\"); // now we have pages = {"309","306","308","337_338"}
    for (int i = 0; i < pages.length; i++) {
        String page = pages[i];
        int index = page.indexOf('_');
        if (index != -1) { // special case i.e. "337_338", index = 3
            int start = Integer.parseInt(page.substring(0, index)); // start = 337
            int end = Integer.parseInt(page.substring(index + 1)); // end = 338
            for (int j = start; j <= end; j++) {
                result += String.valueOf(j);
                if (j != end) { // don't add ',' after last one
                    result += ",";
                }
            }
        } else { // regular case i.e. "309","306","308"
            result += page;
        }
        if (i != (pages.length-1)) { // don't add ',' after last one
         result += ",";
        }
    }
    return result; // result = "309,306,308,337,338"
} 
```

例如这个函数调用时如下：

```
String result1 = Get_PageNumbers("309\\306\\308\\337_338");
String result2 = Get_PageNumbers("311\\315_316\\336_337");
String result3 = Get_PageNumbers("310"); 
```

回报：

```
309,306,308,337,338
311,315,316,336,337
310 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:26:12.363

如果我可以建议不同的实施....

1.  首先，用 "\" 分割字符串`str.split("\\");`，在这里你会收到一个带有单个数字或类似 "num_num" 的模式的数组字符串
2.  对于所有创建的字符串，如果字符串不包含“ *”字符，则将字符串放入另一个数组（othArr 命名），然后用“* ”再次拆分`str.split("_");`，现在您有一个 2 位置数组
3.  将这2个字符串转换为整数
4.  现在创建一个战利品以 min val 形式 max val 或两个转换的字符串（并将其放入 othArr）
5.  将 othArr 转换为用“，”分隔的字符串

# javascript - JQuery：当调用不同的函数时，保持对象范围的正确方法是什么？

> ID：11780233
> 
> 赞同：0
> 
> 时间：2012-08-02T14:56:56.607
> 
> 标签：javascript, jquery

正如标题所述，我有一个一般性问题。我只是不确定我所做的是否正确，或者是否有更简单的方法来保持对象的范围。

我在这里有一个例子来说明我正在使用什么。您可以看到我通过参数将“this”对象传递给函数，但这是唯一的方法吗？有没有办法我不需要传递参数。

请注意，标准是表格上没有识别类/ID。

[http://jsfiddle.net/TmaHs/](http://jsfiddle.net/TmaHs/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:06:41.433

根据您的示例，有更简单的方法：

```
$("form select").on('change', changeText);

function changeText(e) { //the event is still available
    $("input", e.target.form).val("Changed!"); //so is the target and the form
} 
```

也会这样做。[小提琴](http://jsfiddle.net/TmaHs/2/)

至于更复杂的函数，将元素传递给函数通常不是问题，而且在我看来它比使用全局更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:01:08.803

您可以使用标准绑定函数显式设置上下文

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

或者 jquery 中的类似等价物（如果有的话）（我不确定）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:01:33.757

这是一种有效的方法——另一种方法是在更高的范围内声明变量，在第一个函数中分配它，并在不需要在第二个函数中使用参数的情况下引用它。

例如，请参阅[对您的 JSFiddle](http://jsfiddle.net/chris27/TmaHs/1/)的此编辑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T15:02:10.520

您可以使用窗口对象，通过将变量声明为分数，然后设置它的窗口对象。

```
$("form select").change(function() {
    window.thisObj = $(this).parent("form");
    changeText(); 
});

function changeText() {
    window.thisObj.find("input").val("Changed!");   
} 
```

​ 但是你这样做的方式是正确的，应该始终避免使用窗口对象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T15:06:29.337

我认为这种方法没有任何问题......非常好:)

但是，如果你仍然想知道其他方式，那么有很多......我会在这里发布几个......

1) 在选择器函数中检索您需要的所有值，并将它们传递给函数。

```
$("form select").change(function() {
    var val1 = $("selector1").val();
    var val1 = $("selector2").val();
    var val1 = $("selector3").val();

   changeText(val1,val2,val3); 
});

function changeText(val1,val2,val3) {
// your operation
} 
```

2）将所需的值添加到数组中，并将该数组传递给您的目标函数。

```
var targetArray = new Array();
    $("form select").change(function() {
       targetArray[0]=//your val1
       targetArray[1]=//your val2
       targetArray[2]=//your val3

       changeText(targetArray); 
    });

    function changeText(arr) {
    // your operation
    }
​ 
```

# c++ - libsigc++ 并将一个函数作为信号连接到另一个函数作为插槽

> ID：11780236
> 
> 赞同：0
> 
> 时间：2012-08-02T14:57:11.497
> 
> 标签：c++, linux, sockets, signals-slots, libsigc++

这是第一次使用 libsigc++ 作为信号槽，我有两个工作正常的函数，我的场景：我写了一个布尔函数，如果套接字有数据用于接收，它返回 true：

```
bool Socket::isDataReady()
{
    void *buffer = malloc (FRAMEBUFFER + 6);
    sockaddr_in from;
    socklen_t fromLength = sizeof( from );

    if (::recvfrom(this->socketFD,buffer,FRAMEBUFFER + 6, 0, (sockaddr *)&this->getSocketAddressStructureOfServer(), &fromLength ) == -1)
    {
        if (errno == EAGAIN || errno == EWOULDBLOCK)
            return false;
    }
    return true;

} 
```

所以，我写了一个从网络获取数据的函数：

```
int Socket::readDatagrams(unsigned char *buffer, string &srcAddress, unsigned short int & srcPort)
{
    unsigned int maximumPacketSize = FRAMEBUFFER + 6;
    int returnValue ;
    sockaddr_in from;
    socklen_t fromLength = sizeof( from );
    int receivedBytes;

    fromLength = sizeof(this->getSocketAddressStructureOfServer());
    receivedBytes = recvfrom( this->socketFD, buffer, maximumPacketSize, 0, (sockaddr *)&this->getSocketAddressStructureOfServer(), &fromLength );

    returnValue = receivedBytes;
    if ( receivedBytes <= 0 )
        returnValue = -1;

    /// exporting data
    //
    srcAddress = inet_ntoa(this->getSocketAddressStructureOfServer().sin_addr);
    srcPort = ntohs( ( unsigned short int)this->getSocketAddressStructureOfServer().sin_port );

    return returnValue;
} 
```

我有 UDP 服务器并在构造函数中初始化所有内容，所以我需要告诉 isDataReady() 何时为真，readDatagram 本身执行。如何用 libsigc++ 编写代码？我读了他们的教程，但是它的教程并没有说 func as sig。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:36:45.953

我知道你定义

```
sigc::signal<bool> ptr; 
```

在你班级的正文中。然后，如果您想在课堂上联系，请致电：

```
this->ptr.connect(sigc::mem_fun(*this,&NetworkSocket::createThread)); 
```

但我不知道剩下的故事......

# tsql - SQL Server 2000：在 order by 子句中选择大小写

> ID：11780238
> 
> 赞同：0
> 
> 时间：2012-08-02T14:57:14.947
> 
> 标签：tsql, sql-server-2000, temp, case-statement, select-into

我正在尝试使用子句`CASE`中的语句将行选择到临时表中，`ORDER BY`但插入时未对记录进行排序。

```
Declare @orderby varchar(10) , @direction varchar(10)
set @orderby = 'col1'
set @direction = 'desc'
select identity (int) as autoid, *
into #temp
from table 
order by case when @direction = 'desc' and @orderby = 'co1' then col1 end desc

declare @startrow int
declare @maxrows int
set @starrow = 19
set @maxrow = 30
set rowcount @maxrows
select * from #temp 
where autoid > @startrow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:44:12.317

最坏的情况——你只需要使用两个单独的 SQL 查询来实现你的目标：

```
if @direction = 'desc'
  select identity (int) as autoid, *
  into #temp
  from table 
  order by col1 desc

if @direction = 'asc'
  select identity (int) as autoid, *
  into #temp
  from table 
  order by col1 asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:00:55.330

您需要在 order by 子句中使用多个排序条件来正确处理此问题。这种方法的问题在于，当表中有很多行时，由于讨厌的排序操作，性能会很差。

相反，您最好使用动态 SQL（正如其他人所建议的那样）。

```
Declare @orderby varchar(100) , @direction varchar(10)
set @orderby = 'col1'
set @direction = 'desc'
select identity (int) as autoid, *
into #temp
from table 
order by case when @direction = 'desc' and @orderby = 'col1' then col1 end desc,
         case when @direction = 'asc'  and @orderby = 'col1' then col1 end,
         case when @direction = 'desc' and @orderby = 'col2' then col2 end desc,
         case when @direction = 'asc'  and @orderby = 'col2' then col2 end,
         case when @direction = 'desc' and @orderby = 'col3' then col3 end desc,
         case when @direction = 'asc'  and @orderby = 'col3' then col3 end,
         case when @direction = 'desc' and @orderby = 'col4' then col4 end desc,
         case when @direction = 'asc'  and @orderby = 'col4' then col4 end,
         case when @direction = 'desc' and @orderby = 'col5' then col5 end desc,
         case when @direction = 'asc'  and @orderby = 'col5' then col5 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:40:15.687

您可以不使用 #temp 表 insted 使用普通表临时来实现此目的。稍后当你完成你的过程时，你可以在最后放弃它。

```
declare @dir varchar(10)='desc'
DECLARE @str varchar(1000)
SET @str='select identity (int) as autoid,
* into temp from cust1 order by TransactionType '+@dir 
exec(@str)
select * from temp 
```

# math - 范围内的折扣计算

> ID：11780240
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:57:17.690
> 
> 标签：math, range, discount, cumulative-sum

折扣计算：

```
Product quantity and range

1  - 10    -    1%
11 - 20    -    2%
21 - 30    -    3%
31 - 40    -    4%
41 - 50    -    5% 
```

以上是数量范围和他们给出的折扣百分比，

```
for example:
each product cost is 100
if i purchase 50 product then 5% discount is 250

Now if i purchase 50 products at 2 terms let say 20 and 30 then
for 20 product 2% discount = 40
for 30 product 3% discount = 90
total discount             = 130 
```

但在这里我必须得到250的折扣，

问题描述：产品可以购买n个条款的最大数量，这里最大数量是50。购买产品的折扣％是从上述范围内给出的。当添加总折扣时，它应该是相等的。在这里，当购买 50 件产品时，给予 250 作为折扣，即使产品以 20、10、10 或 25、25 的形式购买，250 也应该是总折扣......

请帮我计算部分，用一些公式或任何东西....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:47:52.120

我假设您希望折扣率始终随着购买商品数量的增加而增加，如果是这种情况，**就没有办法做到这一点**。

这是逻辑。基本方程是：

n [1] d [1] + n [2] d [2] + n [3] d [3] = (n [1] + n [2] + n [3] )d [x]

一个明显的解决方案是让所有的 d 都相等，也就是说，所有的贴现率都相同。否则，没有一般的解决方案（也就是说，没有一组 d 将适用于所有 n 组合 - 例如，只要 n 中的一个以外的所有 n 都为零，那么等式两边的 d*必须*相同，所以唯一的通用解决方案是所有 d 都是相同的），如果您想要一个具有不同 d 的特定解决方案，您可以在给定一组 n 的情况下求解 d 的正确值，但是当您这样做时，很明显是否其中一个 d 小于 d [x]，另一个必须更大，因此您不能严格增加贴现率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:01:29.680

1.  计算上一个项目计数的折扣。（之前给过多少折扣。）
2.  计算新商品数量的折扣（上一个 + 当前订单）。（客户应该有多少折扣。）
3.  给出最终折扣作为两个值之间的差异。
4.  将客户的新项目计数（每种类型）存储到某个数据库中。

```
float SimpleDiscount(float cost, int count)
{
    if (count <= 0) return 0;
    if (count <= 10) return 0.01f * cost;
    if (count <= 20) return 0.02f * cost;
    if (count <= 30) return 0.03f * cost;
    if (count <= 40) return 0.04f * cost;
    return 0.05f * cost; // count > 40
}

float GetDiscount(int customerId, int itemId, int count)
{
    float cost = GetItemCost(itemId);

    int previousCount = GetCustomerOrderedItemCount(customerId, itemId);
    float previousDiscount = SimpleDiscount(cost, previousCount);

    int newCount = previousCount + count;
    float newDiscount = SimpleDiscount(cost, newCount);

    SaveCustomerOrderedItemCount(customerId, itemId, newCount);

    return newDiscount - previousDiscount;
} 
```

例如：

```
Item cost = 100
For 20 items: Discount = 40 (2%)
For 30 items: Discount = 210 (7%)
Total discount = 250 (5%) 
```

# java - 如何检查是否在 JComponent 上按下了鼠标

> ID：11780244
> 
> 赞同：0
> 
> 时间：2012-08-02T14:57:25.760
> 
> 标签：java, jcomponent

我有一个 JComponent，我希望它在按下组件时执行一段代码。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:14:27.653

假设您有一个扩展 JComponent 的类

```
import java.swing.*;
import java.awt.*;
import java.awt.event.*;

class MyClass extends JComponent{
    public MyClass(){

        //Other code

        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                // Place your code here
            }
        });

        //Other code
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:06:28.337

```
JComponent comp = new JPanel();
comp.addMouseListener(new MouseAdapter() {
    @Override
    public void mousePressed(MouseEvent e) {
        // Place your code here
    }
}); 
```

# javascript - 检测常用密码并阻止用户设置的功能？

> ID：11780249
> 
> 赞同：1
> 
> 时间：2012-08-02T14:57:48.417
> 
> 标签：javascript, security, passwords

我正在研究用户密码的安全性，对我来说重要的事情之一是在最常见的密码列表中找到密码时强制用户重新输入密码。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:18:29.223

我想出了这个方法，它工作正常。它检测 500 个最常见的密码。如果密码字段中有列入黑名单的密码条目，则返回“真”。

我希望它会帮助某人。

```
function passwordPreventCommon(commonValue) {

var commonPassword = Array("123456","password","12345678","1234","pussy","12345","dragon","qwerty","696969","mustang","letmein","baseball","master","michael","football","shadow","monkey","abc123","pass","6969","jordan","harley","ranger","iwantu","jennifer","hunter","2000","test","batman","trustno1","thomas","tigger","robert","access","love","buster","1234567","soccer","hockey","killer","george","sexy","andrew","charlie","superman","asshole","dallas","jessica","panties","pepper","1111","austin","william","daniel","golfer","summer","heather","hammer","yankees","joshua","maggie","biteme","enter","ashley","thunder","cowboy","silver","richard","orange","merlin","michelle","corvette","bigdog","cheese","matthew","121212","patrick","martin","freedom","ginger","blowjob","nicole","sparky","yellow","camaro","secret","dick","falcon","taylor","111111","131313","123123","bitch","hello","scooter","please","","porsche","guitar","chelsea","black","diamond","nascar","jackson","cameron","654321","computer","amanda","wizard","xxxxxxxx","money","phoenix","mickey","bailey","knight","iceman","tigers","purple","andrea","horny","dakota","aaaaaa","player","sunshine","morgan","starwars","boomer","cowboys","edward","charles","girls","booboo","coffee","xxxxxx","bulldog","ncc1701","rabbit","peanut","john","johnny","gandalf","spanky","winter","brandy","compaq","carlos","tennis","james","mike","brandon","fender","anthony","blowme","ferrari","cookie","chicken","maverick","chicago","joseph","diablo","sexsex","hardcore","666666","willie","welcome","chris","panther","yamaha","justin","banana","driver","marine","angels","fishing","david","maddog","hooters","wilson","butthead","dennis","captain","bigdick","chester","smokey","xavier","steven","viking","snoopy","blue","eagles","winner","samantha","house","miller","flower","jack","firebird","butter","united","turtle","steelers","tiffany","zxcvbn","tomcat","golf","bond007","bear","tiger","doctor","gateway","gators","angel","junior","thx1138","porno","badboy","debbie","spider","melissa","booger","1212","flyers","fish","porn","matrix","teens","scooby","jason","walter","cumshot","boston","braves","yankee","lover","barney","victor","tucker","princess","mercedes","5150","doggie","zzzzzz","gunner","horney","bubba","2112","fred","johnson","xxxxx","tits","member","boobs","donald","bigdaddy","bronco","penis","voyager","rangers","birdie","trouble","white","topgun","bigtits","bitches","green","super","qazwsx","magic","lakers","rachel","slayer","scott","2222","asdf","video","london","7777","marlboro","srinivas","internet","action","carter","jasper","monster","teresa","jeremy","11111111","bill","crystal","peter","pussies","cock","beer","rocket","theman","oliver","prince","beach","amateur","7777777","muffin","redsox","star","testing","shannon","murphy","frank","hannah","dave","eagle1","11111","mother","nathan","raiders","steve","forever","angela","viper","ou812","jake","lovers","suckit","gregory","buddy","whatever","young","nicholas","lucky","helpme","jackie","monica","midnight","college","baby","brian","mark","startrek","sierra","leather","232323","4444","beavis","bigcock","happy","sophie","ladies","naughty","giants","booty","blonde","golden","0","fire","sandra","pookie","packers","einstein","dolphins","0","chevy","winston","warrior","sammy","slut","8675309","zxcvbnm","nipples","power","victoria","asdfgh","vagina","toyota","travis","hotdog","paris","rock","xxxx","extreme","redskins","erotic","dirty","ford","freddy","arsenal","access14","wolf","nipple","iloveyou","alex","florida","eric","legend","movie","success","rosebud","jaguar","great","cool","cooper","1313","scorpio","mountain","madison","987654","brazil","lauren","japan","naked","squirt","stars","apple","alexis","aaaa","bonnie","peaches","jasmine","kevin","matt","qwertyui","danielle","beaver","4321","4128","runner","swimming","dolphin","gordon","casper","stupid","shit","saturn","gemini","apples","august","3333","canada","blazer","cumming","hunting","kitty","rainbow","112233","arthur","cream","calvin","shaved","surfer","samson","kelly","paul","mine","king","racing","5555","eagle","hentai","newyork","little","redwings","smith","sticky","cocacola","animal","broncos","private","skippy","marvin","blondes","enjoy","girl","apollo","parker","qwert","time","sydney","women","voodoo","magnum","juice","abgrtyu","777777","dreams","maxwell","music","rush2112","russia","scorpion","rebecca","tester","mistress","phantom","billy","6666","albert");

for (var i=0; i < commonPassword.length; i++) {

    if (commonPassword[i]===commonValue) {
        return true;
    }    
};
return false;
}; 
```

在将其包含在某处之前，请使用简单的警报对其进行测试：

```
alert(passwordPreventCommon('password')); 
```

由于“密码”一词被列入黑名单，它会提醒“真实”。

* * *

**编辑：**迭代部分可以替换为 ES6 中的[includes()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)方法：

```
if (commonPassword.includes(commonValue)) {
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-23T13:21:33.563

有一个带有 JS 库的 Nist Bad Passwords (NBP) 项目，用于检查密码是否是常用密码之一。检查这个：[https ://cry.github.io/nbp/](https://cry.github.io/nbp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T04:17:23.257

Ilia Rostovtsev 的回答略有不同（因为我无法将其作为评论发布）。

虽然我并不是说遍历数组是最快的方式，但由于每次循环运行时不检查数组长度，这会稍微快一些，而且它还使用 ES2015 语法。

```
const isPasswordCommon = (userPassword) => {

    const commonPassword = Array("123456","password","12345678","1234","pussy","12345","dragon","qwerty","696969","mustang","letmein","baseball","master","michael","football","shadow","monkey","abc123","pass","6969","jordan","harley","ranger","iwantu","jennifer","hunter","2000","test","batman","trustno1","thomas","tigger","robert","access","love","buster","1234567","soccer","hockey","killer","george","sexy","andrew","charlie","superman","asshole","dallas","jessica","panties","pepper","1111","austin","william","daniel","golfer","summer","heather","hammer","yankees","joshua","maggie","biteme","enter","ashley","thunder","cowboy","silver","richard","orange","merlin","michelle","corvette","bigdog","cheese","matthew","121212","patrick","martin","freedom","ginger","blowjob","nicole","sparky","yellow","camaro","secret","dick","falcon","taylor","111111","131313","123123","bitch","hello","scooter","please","","porsche","guitar","chelsea","black","diamond","nascar","jackson","cameron","654321","computer","amanda","wizard","xxxxxxxx","money","phoenix","mickey","bailey","knight","iceman","tigers","purple","andrea","horny","dakota","aaaaaa","player","sunshine","morgan","starwars","boomer","cowboys","edward","charles","girls","booboo","coffee","xxxxxx","bulldog","ncc1701","rabbit","peanut","john","johnny","gandalf","spanky","winter","brandy","compaq","carlos","tennis","james","mike","brandon","fender","anthony","blowme","ferrari","cookie","chicken","maverick","chicago","joseph","diablo","sexsex","hardcore","666666","willie","welcome","chris","panther","yamaha","justin","banana","driver","marine","angels","fishing","david","maddog","hooters","wilson","butthead","dennis","captain","bigdick","chester","smokey","xavier","steven","viking","snoopy","blue","eagles","winner","samantha","house","miller","flower","jack","firebird","butter","united","turtle","steelers","tiffany","zxcvbn","tomcat","golf","bond007","bear","tiger","doctor","gateway","gators","angel","junior","thx1138","porno","badboy","debbie","spider","melissa","booger","1212","flyers","fish","porn","matrix","teens","scooby","jason","walter","cumshot","boston","braves","yankee","lover","barney","victor","tucker","princess","mercedes","5150","doggie","zzzzzz","gunner","horney","bubba","2112","fred","johnson","xxxxx","tits","member","boobs","donald","bigdaddy","bronco","penis","voyager","rangers","birdie","trouble","white","topgun","bigtits","bitches","green","super","qazwsx","magic","lakers","rachel","slayer","scott","2222","asdf","video","london","7777","marlboro","srinivas","internet","action","carter","jasper","monster","teresa","jeremy","11111111","bill","crystal","peter","pussies","cock","beer","rocket","theman","oliver","prince","beach","amateur","7777777","muffin","redsox","star","testing","shannon","murphy","frank","hannah","dave","eagle1","11111","mother","nathan","raiders","steve","forever","angela","viper","ou812","jake","lovers","suckit","gregory","buddy","whatever","young","nicholas","lucky","helpme","jackie","monica","midnight","college","baby","brian","mark","startrek","sierra","leather","232323","4444","beavis","bigcock","happy","sophie","ladies","naughty","giants","booty","blonde","golden","0","fire","sandra","pookie","packers","einstein","dolphins","0","chevy","winston","warrior","sammy","slut","8675309","zxcvbnm","nipples","power","victoria","asdfgh","vagina","toyota","travis","hotdog","paris","rock","xxxx","extreme","redskins","erotic","dirty","ford","freddy","arsenal","access14","wolf","nipple","iloveyou","alex","florida","eric","legend","movie","success","rosebud","jaguar","great","cool","cooper","1313","scorpio","mountain","madison","987654","brazil","lauren","japan","naked","squirt","stars","apple","alexis","aaaa","bonnie","peaches","jasmine","kevin","matt","qwertyui","danielle","beaver","4321","4128","runner","swimming","dolphin","gordon","casper","stupid","shit","saturn","gemini","apples","august","3333","canada","blazer","cumming","hunting","kitty","rainbow","112233","arthur","cream","calvin","shaved","surfer","samson","kelly","paul","mine","king","racing","5555","eagle","hentai","newyork","little","redwings","smith","sticky","cocacola","animal","broncos","private","skippy","marvin","blondes","enjoy","girl","apollo","parker","qwert","time","sydney","women","voodoo","magnum","juice","abgrtyu","777777","dreams","maxwell","music","rush2112","russia","scorpion","rebecca","tester","mistress","phantom","billy","6666","albert");

    const commonPasswordLength = commonPassword.length;

    for (var i=0; i < commonPasswordLength; i++) {

        if (commonPassword[i] === userPassword) {
            return true;
        }    
    };

    return false;
}; 
```

[https://codepen.io/andrethedrummer1/pen/GdobPa](https://codepen.io/andrethedrummer1/pen/GdobPa)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:05:54.873

这取决于。您可以使用常用密码创建一个文本文件，并检查用户输入的密码是否在此列表中。

一个很大的缺点是这个文件会非常大，几乎不可能以这种方式覆盖所有常见的密码。

所以我建议编写一个函数来检查用户输入的不同禁用短语。例如，如果您知道用户的真实姓名，我将禁止将它们作为密码的一部分。此外，您可以强制用户输入最少数量的字符以及一些特殊字符或数字。

# widget - z3c.form : 将 CSS 类添加到小部件

> ID：11780251
> 
> 赞同：4
> 
> 时间：2012-08-02T14:57:50.883
> 
> 标签：widget, plone, z3c.form

我正在用 z3c.form 编写一个表单，我想将一个 css 类添加到一个小部件。

所以我试图定义一个 updateWidgets 方法来添加 css 类，但是我在 super() 上遇到了这个错误：

```
2012-08-02 16:17:22 ERROR Zope.SiteErrorLog 1343917042.940.871101881907 http://pin:34180/Plone/alger/etape1
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module z3c.form.form, line 215, in __call__
  Module z3c.form.form, line 208, in update
  Module plone.z3cform.patch, line 21, in BaseForm_update
  Module z3c.form.form, line 149, in update
  Module bsw.inscription.browser.etape1, line 32, in updateWidgets
TypeError: super(type, obj): obj must be an instance or subtype of type 
```

这是代码：

```
from zope import interface, schema
from z3c.form import form, field, button, validator
import zope.component

from bsw.inscription import inscriptionMessageFactory as _

class IEtape1Schema(interface.Interface):
    # -*- extra stuff goes here -*-

    valide_informations = schema.Bool(
        title=u"J'assure avoir pris connaissance de toutes les informations ci-dessus",
        description=u'',
        required=True,
        readonly=False,
        default=False,
        )

class Etape1(form.Form):

    fields = field.Fields(IEtape1Schema)
    ignoreContext = True

    label = _(u'Etape 1')
    description = _(u'')

    def updateWidgets(self):
        """ Customize widget options before rendering the form. """
        super(Etape1, self).updateWidgets()
        self.fields['valide_informations'].widget.addClass("myClass")

    @button.buttonAndHandler(u'Submit')
    def actionSubmit(self, action):
        data, errors = self.extractData()
        if errors:
            self.status = self.formErrorsMessage
            return
        pass
        # Put the action handler code here 

class checkBoxValidator(validator.SimpleFieldValidator):
    def validate(self, value):
        if not value:
            raise zope.interface.Invalid(_(u"Vous devez accepter les conditions"))

# Set conditions for which fields the validator class applies
validator.WidgetValidatorDiscriminators(checkBoxValidator, field=IEtape1Schema['valide_informations'])

# Register the validator so it will be looked up by z3c.form machinery

zope.component.provideAdapter(checkBoxValidator) 
```

看了很多例子，不知道哪里错了。。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:01:10.153

因为要使 z3c.form 表单与 Plone 和主模板一起工作，需要进行大量重新包装，所以您的表单的类层次结构在注册时已更改。

这样一来，`super()`调用就被打断了，需要直接调用unbound方法：

```
def updateWidgets(self):
    """ Customize widget options before rendering the form. """
    form.Form.updateWidgets(self)
    self.fields['valide_informations'].widget.addClass("myClass") 
```

# javascript - 我应该使用什么来序列化和传递我的 json 数据？

> ID：11780253
> 
> 赞同：0
> 
> 时间：2012-08-02T14:58:00.423
> 
> 标签：javascript, asp.net-mvc, json, html, jquery

我有这段代码来序列化我的 JSON 数据。

```
 <div>
            <!-- cut out HTML for brevity -->
            <div class="divwidth">
                <input type="button" onclick="javascript:postBackPart($(this).parent().parent().attr('id'));" value="Test Me" />
            </div>
    </div>

<script type="text/javascript">
    function postBackPart(div_id) {
        $.ajax({
            url: '/Parts/Edit2',
            type: 'POST',
            data: $('#' + div_id).serialize(),
            success: function (result) {
            }
        });

        return false;
    }
</script> 
```

现在我看到其他帖子和网站使用 toJSON、stringfy 或序列化。我应该使用哪一个？我应该使用哪种方案而不是另一种方案？

注意：我使用的是 ASP.NET MVC 3，此代码来自 MVC 3 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:05:58.143

`.serialize()`不创建 json 序列化，而是创建 url 参数序列化。见[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

如果使用`toJSON`，则必须在对象上定义。所以原生 JavaScript 对象将支持这一点。但你自己的不一定。

最好的方法是使用`JSON.stringify(value[, replacer [, space]])`我想。它在任何可用的地方调用`toJSON`，让对象决定它的 json 表示应该是什么样子。

它还允许通过指定要序列化的属性和可选的替换功能来进行更高的定制。

# java - Java中的RandomAccessFile vs Scanner vs FileInputStream

> ID：11780258
> 
> 赞同：2
> 
> 时间：2012-08-02T14:58:07.240
> 
> 标签：java

我知道一点，只是想知道更多。

`FileInputStream`从文件中读取原始字节，而不是`CharacterStream`s`FileReader`读取字符流。

`RandomAccessFile`支持读写，还提供了一个文件指针，使用它可以跳转到文件中的任何点。

`Scanner`可用于读取任何输入，甚至是文件。它将输入解析为标记。

那么什么时候用呢？`Scanner`仅限于文本文件，其他两个可用于读取任何文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:28:58.037

Scanner 和 FileReader 仅限于文本。

FileInputStream 和 RandomAccessFile 仅限于二进制（或 ASCII 文本文件）

# c++ - 类函数[C++] 调用不属于任何类的函数

> ID：11780259
> 
> 赞同：0
> 
> 时间：2012-08-02T14:58:06.800
> 
> 标签：c++, makefile

我有一个小小的疑问。

我在 C++ 代码中添加了一些额外的函数，这些函数被类的函数调用。

是否有必要使这些额外的函数成为类的一部分，还是 C++ 类函数可以调用 C 函数？

如果是，应该如何修改makefile？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:04:44.217

你不需要把它们放在一个类中。函数存在于 C++ 中，就像在 C 中一样，因此您可以直接使用它们。只需尝试一下，然后再询问是否有问题。当您声明向 C++ 项目添加函数时，只需将所有代码视为 C++。使用与项目其余部分相同的文件扩展名将新内容放入文件中。

**编辑以回应OP的评论：**

是的，在这种情况下无需考虑 C 和 C++ 之间的区别。只需编写 .cpp 文件。在 makefile 中，只需添加这些文件，就像那里列出的其他文件一样。

如果您有现有的 C++ 代码并且需要从 C 中使用 if，或者例如，如果您有现有的 C 库并且需要从 C++ 调用它，则 C 和 C++ 之间的区别很重要。在您的情况下，很可能没有理由不坚持使用 C++。与 Java 不同，拥有独立功能是完全自然的。C++ 标准库中甚至还有很多。

现在，如果在您的情况下，拥有独立功能而不是添加到类（修改或使用继承）是一个很好的设计，那么很难根据您发布的信息来判断。但是，如果您需要做的事情可以在不访问现有类的私有部分的情况下以自然的方式完成，那么答案很可能是肯定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:01:24.957

只要您包含了一些声明并且 C 函数在编译中的某个点被链接到其中，您就可以在任何 C++ 函数中调用 C 函数。例如：

mycfunc.h：

```
void test(int x); 
```

myfunc.c:

```
void test(int x) {
  printf("%d\n", x);
} 
```

现在，只需在要使用该函数的位置包含头文件即可。在您的 Makefile 中，只需确保在最终编译中包含“myfunc.c”（或 .o，如果您正在编译对象）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:14:31.363

C++ 不是纯粹的面向对象语言。

因此，您可以使用 C 中的命令式形式（即使它是模块化的或不是模块化的）。

一些未封装在 Objects 中的 C 函数可以使用 c* 包含（例如 ctime）访问。

# amazon-ec2 - 计算 EC2 现货实例的运行/累积成本

> ID：11780262
> 
> 赞同：7
> 
> 时间：2012-08-02T14:58:09.383
> 
> 标签：amazon-ec2

我经常在 EC2 上运行 Spot 实例（用于 Hadoop 任务作业、临时节点等）。其中一些是长时间运行的 Spot 实例。

计算按需或预留 EC2 实例的成本相当容易——但我如何计算作为 Spot 实例运行的特定节点（或多个节点）所产生的成本？

我知道现场实例的成本每小时都会根据市场价格变化 - 那么有没有办法计算正在运行的现场实例的累积总成本？通过 API 还是其他方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:51:58.217

好的，我在 Boto 库中找到了一种方法。这段代码并不完美 - Boto 似乎没有返回确切的时间范围，但它确实或多或少地在一个范围内获得了历史现货价格。以下代码似乎运行良好。如果有人可以改进它，那就太好了。

```
import boto, datetime, time

# Enter your AWS credentials
aws_key = "YOUR_AWS_KEY"
aws_secret = "YOUR_AWS_SECRET"

# Details of instance & time range you want to find spot prices for
instanceType = 'm1.xlarge'
startTime = '2012-07-01T21:14:45.000Z'
endTime = '2012-07-30T23:14:45.000Z'
aZ = 'us-east-1c'

# Some other variables
maxCost = 0.0
minTime = float("inf")
maxTime = 0.0
totalPrice = 0.0
oldTimee = 0.0

# Connect to EC2
conn = boto.connect_ec2(aws_key, aws_secret)

# Get prices for instance, AZ and time range
prices = conn.get_spot_price_history(instance_type=instanceType, 
  start_time=startTime, end_time=endTime, availability_zone=aZ)

# Output the prices
print "Historic prices"
for price in prices:
  timee = time.mktime(datetime.datetime.strptime(price.timestamp, 
    "%Y-%m-%dT%H:%M:%S.000Z" ).timetuple())
  print "\t" + price.timestamp + " => " + str(price.price)
  # Get max and min time from results
  if timee < minTime:
    minTime = timee
  if timee > maxTime:
    maxTime = timee
  # Get the max cost
  if price.price > maxCost:
    maxCost = price.price
  # Calculate total price
  if not (oldTimee == 0):
    totalPrice += (price.price * abs(timee - oldTimee)) / 3600
  oldTimee = timee

# Difference b/w first and last returned times
timeDiff = maxTime - minTime

# Output aggregate, average and max results
print "For: one %s in %s" % (instanceType, aZ)
print "From: %s to %s" % (startTime, endTime)
print "\tTotal cost = $" + str(totalPrice)
print "\tMax hourly cost = $" + str(maxCost)
print "\tAvg hourly cost = $" + str(totalPrice * 3600/ timeDiff) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-08T02:52:40.330

我已经重写了 Suman 的解决方案来使用 boto3。确保将 utctime 与 tz 集一起使用！：

```
def get_spot_instance_pricing(ec2, instance_type, start_time, end_time, zone):
    result = ec2.describe_spot_price_history(InstanceTypes=[instance_type], StartTime=start_time, EndTime=end_time, AvailabilityZone=zone)
    assert 'NextToken' not in result or result['NextToken'] == ''

    total_cost = 0.0

    total_seconds = (end_time - start_time).total_seconds()
    total_hours = total_seconds / (60*60)
    computed_seconds = 0

    last_time = end_time
    for price in result["SpotPriceHistory"]:
        price["SpotPrice"] = float(price["SpotPrice"])

        available_seconds = (last_time - price["Timestamp"]).total_seconds()
        remaining_seconds = total_seconds - computed_seconds
        used_seconds = min(available_seconds, remaining_seconds)

        total_cost += (price["SpotPrice"] / (60 * 60)) * used_seconds
        computed_seconds += used_seconds

        last_time = price["Timestamp"]

    # Difference b/w first and last returned times
    avg_hourly_cost = total_cost / total_hours
    return avg_hourly_cost, total_cost, total_hours 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-20T17:14:37.173

您可以订阅 Spot 实例数据馈送，以获取转储到 S3 存储桶的正在运行的实例的费用。安装 ec2 工具集，然后运行：

```
ec2-create-spot-datafeed-subscription -b bucket-to-dump-in 
```

注意：您的整个帐户只能订阅一个数据馈送订阅。

大约一个小时后，您应该会开始看到 gzipped 选项卡分隔文件出现在存储桶中，如下所示：

```
#Version: 1.0
#Fields: Timestamp UsageType Operation InstanceID MyBidID MyMaxPrice MarketPrice Charge Version
2013-05-20 14:21:07 UTC SpotUsage:m1.xlarge RunInstances:S0012  i-1870f27d  sir-b398b235    0.219 USD   0.052 USD   0.052 USD   1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-27T09:59:56.697

我最近开发了一个小型 python 库，可以计算单个 EMR 集群或集群列表（给定几天）的成本。

它还考虑了 Spot 实例和任务节点（在集群仍在运行时可能会上下波动）。

为了计算成本，我使用出价，（在许多情况下）可能不是您最终为实例支付的确切价格。但是，根据您的出价政策，此价格可能足够准确。

你可以在这里找到代码：[https ://github.com/memosstilvi/emr-cost-calculator](https://github.com/memosstilvi/emr-cost-calculator)

# php - 使用 Ajax 选择不同的数据

> ID：11780267
> 
> 赞同：-1
> 
> 时间：2012-08-02T14:58:17.100
> 
> 标签：php, javascript, jquery, ajax

我正在尝试从我的 insert.php 页面中选择各种数据。到目前为止，例如帖子 ID、用户名和用户 ID。我将添加其他选定数据位。现在我可以通过响应获取 div 的 id，但是当我添加更多查询并将它们回显时，它们最终会一起出现，因此我将 postidusernameuserid 全部放在一个字符串中。我如何将它们分开？

此外，我知道折旧的 MYSQL_ 我只是还没来得及更新我的代码。

AJAX

```
 <script>
    $(document).ready(function(){
        $("form#myform").submit(function(event) {
            event.preventDefault();
            var content = $("#toid").val();
            var newmsg = $("#newmsg").val();

            $.ajax({
                type: "POST",
                url: "insert.php",
                data: {toid:content, newmsg: newmsg},
                success: function(response){
                    $("#homestatusid").prepend("<div id='divider-"+response+"'><div class='userinfo'>"+newmsg+"<a href='/profile.php?username="+response+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response+"');\">X</div></div></div>");
                }
            });
        });
    });
    </script> 
```

插入.PHP

```
$check = "SELECT streamitem_id FROM streamdata";
        $check1     =    mysql_query($check);
        $resultArr = mysql_fetch_array($check1);
    echo $resultArr['streamitem_id'];

$check = "SELECT username,id FROM users";
        $check1     =    mysql_query($check);
        $resultArr = mysql_fetch_array($check1);
    echo $resultArr['username'];
    echo $resultArr['id']; 
```

是不是成功案例：function(response,responsettwo){ 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:03:56.323

在 PHP 中尝试以 JSON 格式返回数据。

```
echo json_encode(array); 
```

JavaScript 中的响应变量将是一个可以从中获取数据的对象。

```
console.log(response['username']); 
```

* * *

JavaScript：

```
$(document).ready(function(){
    $("form#myform").submit(function(event) {
        event.preventDefault();
        var content = $("#toid").val();
        var newmsg = $("#newmsg").val();

        $.ajax({
            type: "POST",
            url: "insert.php",
            dataType: "json",
            data: { toid: content, newmsg: newmsg },
            success: function(response){
                $("#homestatusid").prepend("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'>"+newmsg+"<a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['id']+"');\">X</div></div></div>");
            }
        });
    });
}); 
```

PHP：

```
$json = array();
$check = "SELECT `streamitem_id` FROM `streamdata`";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_id'] = $resultArr['streamitem_id'];
mysql_free_result($check1);

$check = "SELECT `username`, `id` FROM `users`";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['username'] = $resultArr['username'];
$json['id'] = $resultArr['id'];
mysql_free_result($check1);

echo json_encode($json); 
```

我冒昧地猜测您想在哪里使用“用户名”、“ID”和“流项目 ID”。

# web-services - 是否有用于通用统计跟踪的软件平台？

> ID：11780271
> 
> 赞同：2
> 
> 时间：2012-08-02T14:58:24.383
> 
> 标签：web-services

跟踪和绘制应用程序中发生的统计数据是很常见的事情。是否有任何开源解决方案可以让您定义任意统计数据，根据这些统计数据记录事件，然后处理这些统计数据的存储和显示？

如果它有漂亮的图表，那是一个奖励。

显然，定制开发解决方案很容易。但这似乎是不需要每次都重新发明的基础设施之一。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-04-21T14:47:10.133

自从几年前问这个问题以来，我找到了 ELK 堆栈。

*   弹性搜索 - [https://www.elastic.co/products/elasticsearch](https://www.elastic.co/products/elasticsearch)
*   LogStash - [https://www.elastic.co/products/logstash](https://www.elastic.co/products/logstash)
*   Kibana - [https://www.elastic.co/products/kibana](https://www.elastic.co/products/kibana)

它非常适合这类事情，还可以整合您的所有日志记录需求（http 日志等）

# ruby-on-rails - Rails 教程批量分配安全异常

> ID：11780275
> 
> 赞同：1
> 
> 时间：2012-08-02T14:58:39.327
> 
> 标签：ruby-on-rails, rspec, mass-assignment

我一直在学习 Ruby on Rails 教程。我遇到了一个问题，让[测试](http://ruby.railstutorial.org/chapters/user-microposts#sec%3auser_micropost_associations)通过检查要抛出的批量分配安全异常。我不确定为什么我会遇到这个测试失败，或者如何解决它。

**规格：**

```
describe "accessible attributes" do
    it "should not allow access to user_id" do
      expect do
        Micropost.new(user_id: user.id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end    
  end 
```

**失败：**

```
 1) Micropost accessible attributes should not allow access to user_id
     Failure/Error: expect { Micropost.new(user_id: user.id) }.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
       expected ActiveModel::MassAssignmentSecurity::Error, got #<NoMethodError: undefined method `call' for #<RSpec::Expectations::ExpectationTarget:0x8af2bb8>>
     # ./spec/models/micropost_spec.rb:23:in `block (3 levels) in <top (required)> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:21:25.583

尝试使用`to`而不是`should`您期望的 raise_error 匹配器。

```
describe "accessible attributes" do
  it "should not allow access to user_id" do
    expect do
      Micropost.new(user_id: user.id)
    end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
  end    
end 
```

# sql - 如何从 Reporting Services 2005 中的 Count() 函数中排除空值？

> ID：11780278
> 
> 赞同：2
> 
> 时间：2012-08-02T14:58:56.630
> 
> 标签：sql, reporting-services, visual-studio-2005

我正在创建一个具有类帕累托图和订单类型表以及每种订单类型有多少个单位的报告。从我使用的存储过程返回的子集包括一个名为 WorkItemId 的字段，如果该值为 null，则意味着不计算该项目。我应该如何计算报告中的订单类型而不包括具有空 WorkItemId 的值？现在我正在使用表达式：

```
Count(Fields!OrderType.Value) 
```

计算特定订单类型的每个单位。

谢谢！

编辑：**WorkItemId**是不能为空的，**而不是**订单类型

其他报告中需要 WorkItemId 中的空值，所以我不能简单地在 SQL 中过滤它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T15:04:27.657

你可以使用类似的东西

```
Sum(IIF(IsNothing(Fields!WorkItemId.Value),0,1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:01:27.913

在 SQL 子句中使用 where 子句：

```
 where WorkItemId is not null 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:00:10.767

想出了我自己的问题......再次

由于我表中的行已经按订单类型分组，我只需要输入

```
Fields!WorkItemId.Value 
```

进入 Count 函数而不是 OrderType，因为 Count() 会自动忽略空值。

# ruby-on-rails - 在 Rails 的数据库中检查记录是否已存在的最佳方法是什么？

> ID：11780286
> 
> 赞同：0
> 
> 时间：2012-08-02T14:59:15.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想知道在创建对象之前检查对象是否存在的最佳方法是什么？

我想存储搜索查询，但如果数据库中已经有一个，那么每次都创建一个新查询是没有意义的。我宁愿增加一个计数器以获取有关最常见查询的统计信息。

我最大的问题是如何检查对象是否已经在基础中。我想知道是否有一些神奇的功能可以在不拉出整个表格并检查其中一个对象是否等于新对象的情况下进行检查？

此外，它确实必须在表单上`find_or_create( myObject )`并检查所有属性是否相同（每个查询对象我都有很多）并且`id`当然忽略。

所以这意味着我不能使用`find_or_create_by_region_id_and_departement_id_and_other_attr`

啊，我正在使用 Rails 3.2.6 :)

知道怎么做吗？

编辑以添加搜索查询的表结构：

```
# == Schema Information
#
# Table name: search_queries
#
#  id                 :integer(4)      not null, primary key
#  region_id          :integer(4)
#  departement_id     :integer(4)
#  ville              :string(255)
#  environnement_id   :integer(4)
#  etoiles_min        :integer(4)
#  etoiles_max        :integer(4)
#  tente              :boolean(1)
#  caravane           :boolean(1)
#  campingcar         :boolean(1)
#  mobilhome          :boolean(1)
#  chalet             :boolean(1)
#  bungalow           :boolean(1)
#  yourte             :boolean(1)
#  roulotte           :boolean(1)
#  tipi               :boolean(1)
#  autres             :boolean(1)
#  wifi               :boolean(1)
#  restaurant         :boolean(1)
#  epicerie           :boolean(1)
#  depotpain          :boolean(1)
#  laverie            :boolean(1)
#  espace_aqua        :boolean(1)
#  club_enfant        :boolean(1)
#  multisport         :boolean(1)
#  loc_velo           :boolean(1)
#  acces_pmr          :boolean(1)
#  animaux            :boolean(1)
#  naturiste          :boolean(1)
#  l_campingqualite   :boolean(1)
#  l_qualitetourisme  :boolean(1)
#  l_tourismehandicap :boolean(1)
#  l_ecotourisme      :boolean(1)
#  l_normandiequalite :boolean(1)
#  l_ancv             :boolean(1)
#  created_at         :datetime        not null
#  updated_at         :datetime        not null
# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:03:46.450

`first_or_create/first_or_initialize`如果没有对象，您可以使用它来创建对象。

```
query = Query.where(...).first_or_initialize

#do something with the query (increment counter, store parameters)

query.save! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:07:33.633

在验证现有记录方面，Rails 幸运地支持了许多甜蜜的交易。

像其他人建议的那样，有一种存在方法，您可以将其应用于要检查的数据。

validates_uniqueness_of 也能够验证整个记录。

我个人最喜欢 find_or_create 方法，它甚至可以与更多参数链接。

玩得开心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:44:38.720

因此，由于该`Model.where`方法不接受对象，而只接受哈希，并且此哈希不得包含 id 字段，因此您需要使用的是：

```
@query = SearchQuery.where( queryObject.instance_values["attributes"].except("id")      ).first_or_create 
```

其中 queryObject 是您需要检查是否存在的对象

谢谢你的帮助 davidrac :)

尽管我对 Rails 没有内置此功能感到有些失望，但我的意思是，很多任务比其他任何地方都快，而不是这个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-26T20:19:38.143

执行此操作的最佳方法是使用`exists?` 查看[此](http://apidock.com/rails/ActiveRecord/Base/exists?/class)获取更多信息。

# c# - StructureMap 到 Ninject 的转换

> ID：11780293
> 
> 赞同：2
> 
> 时间：2012-08-02T14:59:32.363
> 
> 标签：c#, ninject, structuremap

我怎样才能转换这个：

```
For<ISession>().Use(ctx => {
    var uow = (INHibernateUnitOfWork)ctx.GetInstance<IUnitOfWork>();
    return uow.Session;
}); 
```

宁杰？

我能够转换这个：

```
For<ISessionSource>().Singleton().Use<NHibernateSessionSource>(); 
```

到

```
Bind<ISessionSource>()
    .To<NHibernateSessionSource>()
    .InSingletonScope() 
```

我想我也能够转换这个：

```
For<IUnitOfWork>().HybridHttpOrThreadLocalScoped().Use<NHibernateUnitOfWork>(); 
```

到

```
Bind<IUnitOfWork>().To<NHibernateUnitOfWork>().InThreadScope(); 
```

我知道这些并非都是一对一的，但我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:14:14.313

```
Bind<ISession>().ToMethod(ctx => {
    var uow = (INHibernateUnitOfWork)ctx.Kernel.Get<IUnitOfWork>();
    return uow.Session;
}); 
```

# .net - 如何在 WinForm ComboBox 中有用户无法选择的项目？

> ID：11780295
> 
> 赞同：0
> 
> 时间：2012-08-02T14:59:34.820
> 
> 标签：.net, winforms

我有一个带有 ComboBoxStyle.DropDownList 下拉样式的组合框，并让用户选择它显示当前状态的选项。所以有时我希望它显示“未知”，但用户永远不能从下拉列表中选择“未知”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:03:31.720

我想最优雅的方法是重载你的`ComboBox`, 和`ComboBoxItem`.

将一个属性添加到`ComboBoxItem`它是否应该是可选的，并在`ComboBox`索引更改事件上检查该属性并拒绝选择，如果它不应该被选中。它还使您能够绘制不可选择的`ComboBoxItem`不同，或者给它一个不同的字体以使用户清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T12:44:53.583

我会将 DropDownStyle 属性设置为 DropDown，然后将 ComboCox 的文本设置为“未知”（或空字符串）。

您可以使用 SelectedIndex 属性检查用户输入（当文本与列表不对应时，该属性应为 -1）。

# javascript - javascript 返回一个对象，但不是我期望看到的

> ID：11780302
> 
> 赞同：0
> 
> 时间：2012-08-02T14:59:55.797
> 
> 标签：javascript, jquery

我的代码返回一个对象，而不是我期望看到的。当我在控制台中输出输出时，我得到了对象，但所有数据都在那里。应该发生的事情是 id 被传递给 actionrow，这对 db 进行了 ajax 调用。该对象正在从 console.log(datarow) 输出；在代码中。

我正在将[jqxWidgets](http://www.jqwidgets.com)用于网格和数据

```
// action row.
$("#actionrowbutton").bind('click', function () {
    var selectedrowindex = $("#jqxgrid").jqxGrid('getselectedrowindex');
    var datarow = $("#jqxgrid").jqxGrid('getrowdata', selectedrowindex);
    var rowscount = $("#jqxgrid").jqxGrid('getdatainformation').rowscount;

    if (selectedrowindex >= 0 && selectedrowindex < rowscount) {
        var rows = $('#jqxgrid').jqxGrid('getrows', selectedrowindex);
        var id = $("#jqxgrid").jqxGrid('getrowid', selectedrowindex);
        //var service = datarow;
        console.log(datarow);

        $("#jqxgrid").jqxGrid('actionrow', id);

        //Open action dialog window
        $( "#actionWindow" ).dialog({
          //title: 'action error',
          resizable: false,
          modal: true,
          position: ['center', 'center'],
          buttons: {
             "Ok": function() {
                $(this).dialog("close");

                $('#jqxgrid').jqxGrid('refreshdata');
              },
              Cancel: function() {
                $( this ).dialog( "close" );

                //$('#jqxgrid').jqxGrid('refreshdata');
              }
         }
       });
    }
});

actionrow: function (actrowid) {
    // synchronize with the server - send action command
    var data = "action=true&id=" + actrowid;
    $.ajax({
        dataType: 'json',
        url: 'data.php',
        data: data,
        success: function (data, status, xhr) {
            // action command is executed.
        }
    });                         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:41:22.577

看了你的代码后，我有一个问题。什么是“actionrow”，是jqxgrid对象的函数还是方法？如果不是，应该这样写：

```
function actionrow(actrowid) {
    // synchronize with the server - send action command
    var data = "action=true&id=" + actrowid;
    $.ajax({
        dataType: 'json',
        url: 'data.php',
        data: data,
        success: function (data, status, xhr) {
        // action command is executed.
        }
    });                         
} 
```

并在你的 if 语句中这样调用。

```
actionrow(id); //not $("#jqxgrid").jqxGrid('actionrow', id); 
```

# javascript - SharePoint Designer 2010 在保存时从代码中删除 onmouseover

> ID：11780310
> 
> 赞同：1
> 
> 时间：2012-08-02T15:00:21.517
> 
> 标签：javascript, sharepoint-2010, onmouseover

我有一个问题，当我去添加以下图像映射代码时：

```
<area shape=\"poly\" coords="109,238,97,211,105,204,108,196,99,182,133,173,146,213,109,238" onmouseover="popup($('#alaska-table').html(), 400);" />
<area shape="poly" coords="175,180,157,160,145,160,135,148,148,146,152,120,165,120,164,132,191,137,194,158,176,173,175,180" onmouseover="popup($('#texas-table').html(), 400);" />
<area shape="poly" coords="89,134,79,133,65,116,58,89,56,80,60,70,73,73,70,89,91,123,89,134" onmouseover="popup($('#california-table').html(), 400);" />
<area shape="poly" coords="93,50,72,46,69,40,68,32,72,35,73,40,77,35,78,29,97,34,93,50" onmouseover="popup($('#washington-table').html(), 400);" /> 
<area shape="poly" coords="200,155,200,150,198,142,210,142,209,153,217,154,213,162,205,160,200,155" onmouseover="popup($('#louisiana-table').html(), 400);" /> 
<area shape="poly" coords="250,112,262,105,270,94,280,107,250,112" onmouseover="popup($('#virginia-table').html(), 400);" /> 
<area shape="poly" coords="232,220,232,219,234,219,234,220,232,220" onmouseover="popup($('#hawaii-table').html(), 400);" /> 
<area shape="poly" coords="246,226,246,225,248,225,248,226,246,226" onmouseover="popup($('#hawaii-table').html(), 400);" /> 
<area shape="poly" coords="260,231,262,231,262,232,260,232,260,231" onmouseover="popup($('#hawaii-table').html(), 400);" /> 
<area shape="poly" coords="266,247,266,238,274,243,266,247" onmouseover="popup($('#hawaii-table').html(), 400);" /> 
```

到我的网站，它删除了 onmouseover 条目，只留下 shape 和 coords 条目。我已将 popup.js 和 jquery.js 的负载添加到母版页的部分，它保留了该代码。有什么建议吗？

# perl - @INC Perl - 无法在 @INC 中找到 Class/CSV.pm

> ID：11780324
> 
> 赞同：1
> 
> 时间：2012-08-02T15:00:57.033
> 
> 标签：perl

我目前正在尝试使用以下三个类之一创建/生成 CSV 文件：

```
use Class::CSV;
use Text::CSV;
use Text::CSV_XS; 
```

虽然当我尝试运行它时，为了检查我的代码，我提出了相同的错误消息：

```
Can't locate Class/CSV.pm in @INC (@INC contains: C:/Per/site/lib C:/Perl/lib .) at C:\Users\<DIRECTORY> - <DIRECTORY>.file.pl line1 
```

尽管我没有任何运气，但我已经尝试搜索这些文件。有没有其他人遇到过这个问题？我查看了目录并且 CSV.pm 文件确实存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:02:47.517

您可能没有安装这些模块。

在你的 shell 中运行它

```
perl -MCPAN -e shell 
```

然后运行

```
install Class::CSV 
```

我假设您在 CPAN 上找到了这些课程

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T16:30:02.197

假设`Class::CSV`已安装在您的系统上，则您的库搜索路径不完整。（您的错误消息`C:/Per/site/lib`列为搜索库，看起来像是 的拼写错误`C:/Perl/site/lib`，您可能想查看它。）

您需要找到`CSV.pm`库所在的正确文件。例如，如果在以下位置找到它：

```
C:/Perl/lib/foo/Class/CSV.pm 
```

然后，您有以下选项之一。

1.  修改 Perl 或调用的环境以便设置（假设我的 Windows 技能尚未完全过期，如果我的语法错误，请随时编辑和更正）：

    ```
    PERL5LIB=%PERL5LIB%;C:/Perl/lib/foo 
    ```

2.  您可以使用`-I`perl 的选项来添加路径：

    ```
    perl -IC:/Perl/lib/foo my-app.pl 
    ```

3.  您可以使用`use lib`程序本身中的命令来添加搜索路径：

    ```
    use lib 'C:/Perl/lib/foo';
    use Class::CSV;
    # etc. 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T00:56:52.920

您可以简单地运行以下命令

```
perl -MCPAN -e 'install Class::CSV' 
```

`install Class::CSV`在 CPAN shell中运行 。

# batch-file - DOS批处理文件运行4块3个并行程序

> ID：11780325
> 
> 赞同：2
> 
> 时间：2012-08-02T15:01:00.357
> 
> 标签：batch-file

该程序是一个 FORTAN 数字运算代码 :: "C:\fct1d_intel_2\debug\fct1d_intel_2.exe" 这使用批处理文件 "RUN.bat" 调用：

```
C:\fct1d_intel_2\debug\fct1d_intel_2.exe
exit 
```

以下批处理文件“run_generator_3procs_1to3.bat”在不同目录中启动了 3 个并行程序：

```
CD C:\FCT_Polystyrene_Model_Calibration\Proc_01
start /min run.bat
CD C:\FCT_Polystyrene_Model_Calibration\Proc_02
start /min run.bat
CD C:\FCT_Polystyrene_Model_Calibration\Proc_03
start /min run.bat 
```

以下批处理文件“run_12_cases_4X3.bat”调用上述批处理文件的 4 个连续版本：

```
call run_generator_3procs_7to9.bat
call run_generator_3procs_10to12.bat
call run_generator_3procs_1to3.bat
call run_generator_3procs_4to6.bat 
```

现在第一次调用“run_generator_3procs_7to9.bat”可以很好地运行 3 个并行程序，但不会继续执行接下来的 3 个批处理文件。

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T07:45:27.527

检查您是否没有尝试使用不同的批处理文件同时访问文件。它可能正在执行，但只是因为它们无法运行而关闭。

# regex - Perl 以不同的方式替换每个出现

> ID：11780329
> 
> 赞同：0
> 
> 时间：2012-08-02T15:01:09.077
> 
> 标签：regex, perl

在 perl 脚本中，我需要替换几个字符串。目前，我使用：

```
$fasta =~ s/\>[^_]+_([^\/]+)[^\n]+/\>$1/g; 
```

目的是在 FASTA 文件中格式化每个序列名称。它在我的情况下效果很好，所以我不需要触摸这部分。但是，一个序列名称会在文件中出现多次。最后我不能有两次 - 或更多 - 相同的序列名称。因此，我需要例如：

```
seqName1
seqName2
etc. 
```

（而不是 seqName、seqName 等）

这是否有可能以某种方式自动处理每次出现的不同情况？我不知道有多少序列，是否有相似的名称等。例如，一个想法是在每次出现时连接一个随机字符串，因此是我的问题。

非常感谢。

* * *

John 完美地解决了它， chepner 帮助提出了避免冲突的聪明想法，这是最终结果：

```
$fasta =~ s/\>[^_]+_([^\/]+)[^\n]+/
    sub {
        return '>'.$1.$i++;
    }->();
/eg; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:06:27.347

前几天我实际上正在尝试做这样的事情，这就是我想出的

```
$fasta =~ s/\>[^_]+_([^\/]+)[^\n]+/

    sub {

        # return random string

    }->();

/eg; 
```

修饰符将`\e`替换解释为代码，而不是文本。我使用匿名代码参考，以便我可以随时返回。

# android - 收到相同的消息

> ID：11780333
> 
> 赞同：2
> 
> 时间：2012-08-02T15:01:20.000
> 
> 标签：android, google-cloud-messaging

我正在运行 sdk (extras/google/gcm/samples/) 中提供的示例 gcm-demo-client 并不断收到 key1="From GCM: you got message!" 来自收到的 Intent，即使我发布了不同的值。

例如，当我发布以下正文时

```
{
    "data":{"key1":"value1","message":"this text will be seen in the notification bar!!"},
    "registration_ids":["$GCM_REGISTRATION_ID"]
} 
```

我收到的响应总是相同的 message_id

```
{
    "multicast_id":4767008207494821680,
    "success":1,"failure":0,
    "canonical_ids":1,
    "results":[{"registration_id":"APA91bH7p....f1tT65n3A","message_id":"0:1343892969659984%921c249af9fd7ecd"}]
} 
```

我在 API 中遗漏了什么？我怎样才能让我的信息独一无二？感谢您的帮助法布里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:11:21.793

这是因为在 GCMIntentService 中它每次发送相同的消息。您应该在 GCMIntentService 中更改以下方法。

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = getString(R.string.gcm_message);
    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

代替

```
String message = getString(R.string.gcm_message); 
```

您应该从下面显示的意图中获取数据

```
String message = intent.getExtra("message"); 
```

有关更多信息，请阅读[此处](http://developer.android.com/guide/google/gcm/gcm.html)的处理接收数据部分。

# php - 如何使用 PHP 显示 HTML 源代码

> ID：11780337
> 
> 赞同：1
> 
> 时间：2012-08-02T15:01:29.717
> 
> 标签：php, html

我为一个流行的硬件网站的用户创建了一些 PHP 文件，用于“地铁”他们的新闻帖子。它工作得很好，你添加文章的标题、链接等，然后它以 Metro tile 格式吐出。

看看：[http ://briandempsey.org.uk/Newstool/index.php](http://briandempsey.org.uk/Newstool/index.php)

当用户提交时，它使用提供的信息来创建帖子。现在，我需要以某种方式使用 PHP 或其他语言来显示它在它下面生成的代码，以便用户可以复制和粘贴它。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:02:40.473

```
header('Content-Type: text/plain'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:53:46.513

由于您使用 GET 方法传递表单数据，因此您可以将其传递给创建 url 以从中提取 html 的页面...

**index.php**将具有您在上面显示的形式，并将发布到 urlCreator.php。

**form.php**可以被删除，因为它不再需要了，魔法将发生在 urlCreator.php 文件中。

**urlCreator.php**（新）将在其中包含如下代码：

```
<?php
    // urlCreator.php will get variables passed to it from index.php

    // Now create the url using the passed variables
    $url = "http://briandempsey.org.uk/Newstool/form.php?title=" . $_GET['title'] . "&color=" . $_GET['color'] . "&Articlecontent=" . $_GET['Articlecontent'] //and so on to build the whole url

    //Now get the pages html
    $html = file_get_contents($url);
?> 
```

现在您已经在变量中拥有了 html，您可以使用 str_replace 清理它或随意操作它。

```
<?php
    // Still in urlCreator.php

    // With the html in a variable you could now edit out the divs and echo the results
    $html = str_replace("<div style=\"background-color: #008299; height: auto; width: 100%; margin-left: 10px;\">", "", $html); //removes the intro div
    $html = str_replace("</div>", "", $html); //removes the closing div

    //Finally echo out the html to the page for copy+paste purposes
    echo $html;
?> 
```

# javascript - .Net javascript 共享枚举

> ID：11780338
> 
> 赞同：4
> 
> 时间：2012-08-02T15:01:32.613
> 
> 标签：javascript, .net, enums

有没有办法在.Net（VB或C#）和javascript后面的代码之间共享一个枚举，所以它们都使用相同的值？

我们可以在clientScript中注册一个枚举吗？

**编辑：** 问题是：有没有办法在.Net 中共享一个像枚举一样的变量，并在 javascript 中做同样的工作。我可以同时在 javascript 和 .Net 中声明，但是如果有人稍后修改代码并在 1 处更改它，一切都会爆炸......这就是为什么我正在寻找“共享”的东西

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:32:13.973

```
//The type of enum we want to use
var enm = typeof(AcceptRejectRule); //or any other enum

//Create the javascript string
var str = "var " + enm.Name + " = {\n" +
        String.Join(",\n", 
               Enum.GetValues(enm).Cast<object>()
               .Select (o => Enum.GetName(enm, o) + ": " + ((int)o))) +
        "\n};";

//Register the javascript to the page for rendering     
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), enm.Name, str, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:10:16.520

是的，您可以在 javascript 中镜像一个 .NET 枚举：

C＃：

```
enum Days {Sat, Sun, Mon, Tue, Wed, Thu, Fri}; 
```

JS：

```
var Days = {
    Sat: 0,
    ...
    Fri: 6
}; 
```

请注意，这只是一个以`Days`具有数值的属性命名的对象。`Enum`在 javascript中没有语言实现。

如果您想要将 C# 枚举自动转换为 javascript，只需使用[GetValues](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)迭代 C# 枚举并将其作为 javascript 对象声明注入。它归结为字符串连接，.NET 框架中没有任何内容可以为您执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T16:21:12.723

已经回答但我想我也会分享我的解决方案：

```
public enum UpdateOptions
{
    Create = 0,
    Read,
    Update,
    Delete,
    None
}

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(ToJSLiteral<UpdateOptions>());

        Console.ReadKey();
    }

    static string ToJSLiteral<T>() where T : struct
    {
        Type type = typeof(T);
        StringBuilder sb = new StringBuilder();
        int[] values = Enum.GetValues(type).Cast<int>().ToArray();
        sb.Append("var " + type.Name + " = {\n");

        foreach(int value in values)
        {
            string name = Enum.GetName(type, value);
            sb.Append(name + " : " + value + ",\n");
        }

        sb.Length -= 2;
        sb.Append("\n};");
        return sb.ToString();
    }
} 
```

# jquery - jQuery/Javascript：从盒子后面拉出盒子

> ID：11780340
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:01:34.730
> 
> 标签：jquery, animation, slide

我有 4 个盒子并排放置，我想这样当用户点击其中一个盒子时，一个新盒子会在它旁边滑出，将其他盒子推到右侧。

因此，如果单击第二个框，则一个新框滑出到右侧，将框 3 和 4 推到右侧。

这就是我的盒子的设置方式：http: [//jsfiddle.net/g8YXK/1/](http://jsfiddle.net/g8YXK/1/)

我有点不知道应该从哪里开始编写 Javascript 或 jQuery 代码。

应该提到我希望它在再次按下同一个框时“向后滑动”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:19:20.787

我认为这可能是您正在寻找的：http: [//jsfiddle.net/r85WK/](http://jsfiddle.net/r85WK/)

它可能需要在这里或那里进行调整，具体取决于您希望一切如何工作，但是您所要求的大部分内容都内置在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:14:13.027

试试这个：

```
$("#boxes li a").click(function(){
    var box = $(this).parent().clone();
    $(this).append(box);
});​ 
```

[http://jsfiddle.net/hofo/btp8K/2/](http://jsfiddle.net/hofo/btp8K/2/)

# xml - Talend 中无法解析的日期错误

> ID：11780342
> 
> 赞同：0
> 
> 时间：2012-08-02T15:01:39.810
> 
> 标签：xml, date, talend

我正在尝试使用 Talend 输入 XML 文档，但出现无法解析的日期错误。我尝试了几种不同的格式，但无法使其正常工作。

这是 2012-07-03T00:00:00.000-04:00 出错的一行 XML

这是我尝试过的一种格式。“yyyy-mm-dd'T'hh:mm:ss.SSSZ”

任何帮助，将不胜感激。

谢谢，玛西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T04:21:00.877

不久前我遇到了同样的问题并查找了我使用的内容 - 在 Talend 中尝试这种格式：`yyyy-MM-dd'T'HH:mm:ss.ss Z`如果它消除了错误，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T14:51:10.833

如果有人处于同样的情况:) 我遇到了同样的问题，我通过使用“yyyy-MM-dd'T'HH:mm:ss.SSSXXX”解决了它，你可以阅读这个文档[java doc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

# java - 负载平衡批处理作业的快速而肮脏的解决方案

> ID：11780345
> 
> 赞同：0
> 
> 时间：2012-08-02T15:01:51.493
> 
> 标签：java, batch-file, load-balancing

我们正在开发一个 Web 应用程序并且即将结束开发，而我们正在使用的客户端突然向我们提出了这样一个事实，即我们需要能够处理负载平衡。

我们正在运行需要在两台服务器上运行的批处理作业，但我们不希望它们重叠。他们从数据库中选择行，处理对象，并将它们合并回数据库。其中一项作业必须每天在同一时间运行，但其他作业每 n 分钟运行一次。**我们最多**有大约一周的时间让某件事情发挥作用，这将成为我们的技术债务。

我的问题是：有哪些快速而肮脏的黑客可以让它正常工作？我们有一个 SQLServer 2008 实例，并在 JBoss 5 上运行 Java EE 6，它将在两台服务器之间进行负载平衡。我们使用由 Hibernate 支持的 Spring 3 和 JPA2，并使用库存的 spring 调度程序来调度和运行作业。帮我欧比旺克诺比；你是我唯一的希望！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:06:17.587

在 jboss5 上，您需要使用调度程序 API 作为最简单的解决方案 - 实现是建立在石英之上的，通常您会像这里描述的那样使用集群配置

[http://quartz-scheduler.org/documentation/quartz-2.x/configuration/ConfigJDBCJobStoreClustering](http://quartz-scheduler.org/documentation/quartz-2.x/configuration/ConfigJDBCJobStoreClustering)

# c# - 使用 Moq 的验证方法时出错

> ID：11780346
> 
> 赞同：1
> 
> 时间：2012-08-02T15:01:52.827
> 
> 标签：c#, unit-testing, moq

我在单元测试中遇到了起订量问题，我不确定我哪里出错了。我的界面中有一个方法，如下所示：

```
void WriteToRegistryKey (String key, Object value); 
```

我正在像这样对它进行单元测试：

```
var testRegistry = new Mock<IRegistry>();
testRegistry.Setup(x => x.WriteToRegistryKey(It.IsAny<string>(), It.IsAny<int>()));

Utility testUtility = new ConfigUtil(testRegistry.Object);

testUtility.UpdateRegistry();

testRegistry.Verify(x => x.WriteToRegistryKey("MaxNumLogFiles", 10)); 
```

当我调用 testUtility.UpdateRegistry() 时，它会调用我的 WriteToRegistryKey 我想测试传递正确值的 WriteToRegistryKey 方法。

但是，当我运行测试时我收到了这个：

```
Moq.MockException : 
Expected invocation on the mock at least once, but was never performed: x => x.WriteToRegistryKey("MaxNumLogFiles", (Object)10)

Configured setups:
x => x.WriteToRegistryKey(It.IsAny<String>(), It.IsAny<Int32>()), Times.Never

Performed invocations:
IRegistry.WriteToRegistryKey("MaxNumLogFiles", 10) 
```

如果我将 testRegistry.Verify 更改为：

```
testRegistry.Verify(x => x.WriteToRegistryKey("MaxNumLogFiles", It.IsAny<object>())); 
```

它有效，因此问题似乎与 WriteToRegistryKey 方法采用的第二个参数以及 int 和 object 之间的区别有关，但我似乎无法弄清楚。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:23:52.153

`testUtility.UpdateRegistry();`查看如何在`.WriteToRegistryKey`那里调用该方法的实现主体会很有帮助。

但是：我会**删除**您设置`testRegistry`模拟的行：
`testRegistry.Setup(x => x.WriteToRegistryKey(It.IsAny<string>(), It.IsAny<int>()));` 因为，您想测试它，是否使用正确的参数调用它。没有理由使用 Moq 进行设置。

如果你的测试通过 `testRegistry.Verify(x => x.WriteToRegistryKey("MaxNumLogFiles", It.IsAny<object>()));`

这可能意味着两件事：

1.  您的 WriteToRegistryKey 方法是用**10**以外的值调用的 - UpdateRegistry 方法中的错误
2.  或者它是空的，因为你设置它：

`It.IsAny<string>(), It.IsAny<int>()`

使用`It.IsAny<type>()`时也可以`null`。

# java - 在 Apache POI 中更改单元格注释的大小

> ID：11780348
> 
> 赞同：0
> 
> 时间：2012-08-02T15:01:58.830
> 
> 标签：java, apache-poi

我使用以下 java 代码在 Apache POI 中成功生成单元格注释

```
public static void setComment(String text, Cell cell) {
            final Map<Sheet, HSSFPatriarch> drawingPatriarches = new HashMap<Sheet, HSSFPatriarch>();

            CreationHelper createHelper = cell.getSheet().getWorkbook().getCreationHelper();
            HSSFSheet sheet = (HSSFSheet) cell.getSheet();
            HSSFPatriarch drawingPatriarch = drawingPatriarches.get(sheet);
            if (drawingPatriarch == null) {
                drawingPatriarch = sheet.createDrawingPatriarch();
                drawingPatriarches.put(sheet, drawingPatriarch);
            }

            Comment comment = drawingPatriarch.createComment(new HSSFClientAnchor(100, 100, 100, 100, (short)1, 1, (short) 10, 5));
            comment.setString(createHelper.createRichTextString(text));
            cell.setCellComment(comment);
        } 
```

我[在 apache poi 中使用 HSSFClientAnchor 从创建单元格注释中](https://stackoverflow.com/questions/2281221/creating-cell-comments-using-hssfclientanchor-in-apache-poi)复制了它。谢谢埃里克！

如何将评论的大小更改为 300 像素宽和 100 像素高？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:08:37.223

据我所知，这不是一个简单的方法，因为注释锚点是由单元格（列、行参数）和偏移到单元格（dx、dy 参数）指定的。因此，您需要计算单元格的宽度/高度以计算出第二个单元格坐标，然后计算出该单元格的偏移量，以使其完全符合您想要的像素大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T11:22:09.003

[繁忙的 HSSF 和 XSSF 功能开发人员指南](http://poi.apache.org/spreadsheet/quick-guide.html#CellComments)

```
// When the comment box is visible, have it show in a 1x3 space
ClientAnchor anchor = factory.createClientAnchor();
anchor.setCol1(cell.getColumnIndex());
anchor.setCol2(cell.getColumnIndex()+1);
anchor.setRow1(row.getRowNum());
anchor.setRow2(row.getRowNum()+3); 
```

只需更改 setCol2 和 setRow2 的值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-10T10:44:07.043

您可以为任何单元格分配列宽，如下所示：

```
sheet.setColumnWidth(0, 1000); 
```

# c# - 用于合并数据对象的 C# 设计模式

> ID：11780349
> 
> 赞同：0
> 
> 时间：2012-08-02T15:02:07.483
> 
> 标签：c#, design-patterns

我有一堆数据对象，我在从提要中获取数据后填充这些对象。提要不可靠，有时会丢失数据。我需要将传入的数据与我已有的数据合并。我无法为此找出一个易于扩展和可扩展的模式。

例如，我的数据模型有以下字段

```
DataModelExample
{
    public string Name;
    public string Value;
    public string Extension;
} 
```

如果提要删除字段值，我可以从缓存中的现有数据对象中选择数据并将两者合并。我有许多数据对象，其中需要完成的字段数量不同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:07:48.860

一种可能的方式：

您可以更改所有属性定义，使它们都是`nullable`.

例如，如果您有一个`public int MyInt { get; set; }`属性，请将其更改为`public int? MyInt { get; set; }`

然后，从提要中填充对象后，您可以使用反射遍历所有属性（请参阅[如何循环遍历类的所有属性？](https://stackoverflow.com/questions/531384/how-to-loop-through-all-the-properties-of-a-class)），并且对于每个属性，如果值为 null（这意味着提要*删除*属性），使用来自缓存的值设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:31:20.680

代替 @ken2k 建议的反射，您可以创建一组类来处理您的对象并在必要时合并缓存中的数据。为了尽量减少您需要的此类类的数量，我会让它们在您的数据对象将实现的接口上运行。

```
public interface IDataModelExample
{
    string Name { get; set; }
    string Value { get; set; }
    string Extension { get; set; }
}

public class DataModelExampleMerger
{
    public IDataModelExample Merge(IDataModelExample dme)
    {
        var cachedDme = LoadFromCache(); // This would require the key of course.
                                         // I'll leave the implementation up to 
                                         // you.

        if (string.IsNullOrEmpty(dme.Name))
        {
            dme.Name = cachedDme.Name;
        }

        // Repeat similar if-block for all properties.

        return dme;
    }
} 
```

您需要为每个数据对象接口编写一个合并类，因此该解决方案将需要比基于反射的解决方案更多的代码。我不认为你可以绕过工作。这是一个权衡：运行时性能与整体编码时间。老实说，除非您的用户开始抱怨，否则我会对运行时性能造成影响，但这取决于您。

请记住，*[过早优化是万恶之源](http://en.wikipedia.org/wiki/Program_optimization)*。

# c# - 在使用 OpenXML SDK 2.0 运行时累积 RunProperties

> ID：11780353
> 
> 赞同：3
> 
> 时间：2012-08-02T15:02:21.097
> 
> 标签：c#, openxml, openxml-sdk, bold, underline

我想知道我是否可以`RunProperties`累积`Run`

```
Run run = new Run(new Text("test"));
RunProperties runProperties = new RunProperties();
runProperties.AppendChild<Bold>(new Bold());
runProperties.AppendChild<Underline>(new Underline());
run.AppendChild<RunProperties>(runProperties); 
```

在这种情况下，我只得到粗体文本但没有下划线。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T20:22:38.850

我试过你的例子，确实它只对我来说是粗体而不是下划线。我做了一点工作，最终得到了这个：

```
using (WordprocessingDocument doc = WordprocessingDocument.Open(destFileName, true))
{

    Run run = new Run();
    RunProperties runProperties = new RunProperties();

    runProperties.AppendChild<Underline>(new Underline() { Val = DocumentFormat.OpenXml.Wordprocessing.UnderlineValues.Single });
    runProperties.AppendChild<Bold>(new Bold());
    run.AppendChild<RunProperties>(runProperties);
    run.AppendChild(new Text("test"));

    //Note: I had to create a paragraph element to place the run into.
    Paragraph p = new Paragraph();
    p.AppendChild(run);
    doc.MainDocumentPart.Document.Body.AppendChild(p);
} 
```

基本上，这改变了：

```
new Underline() { Val = DocumentFormat.OpenXml.Wordprocessing.UnderlineValues.Single } 
```

您必须指定所需的下划线类型，而不仅仅是将其留给 Underline 类的构造函数。我刚刚指定`Single`，它对我有用。

# python - Perl 到 Python，在 html 输出上匹配模式

> ID：11780356
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:02:28.110
> 
> 标签：python, regex, perl

如何从 perl 到 python 执行以下代码块？

```
while ($content2 =~ m{services</B></TD>\s<TD>\s<TABLE>\s<TR>(.*?)</TABLE>}gs) {
  my $service=$1
  print " service : $1\n";
} 
```

完整的代码有更多的正则表达式输出，但是通过那个例子我可以继续转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:35:05.793

如果我正在正确阅读您的正则表达式，那么您在表格数据单元格中有一个单行（并且没有数据单元格）的表格。你在这里煮什么可憎的东西？

在 python 中，你会为此使用 lxml。它是一个真正的解析器，所以当文档的空格或大小写或其他不相关的结构发生变化时它不会失败。它不是标准库的一部分，但它是 pypi 上安装最多的库之一（如果不是 /the/）。

```
abominable_html = '''
<html>
<table><tr><td>services</B></TD>
    <TD>
        <TABLE> <TR>Interesting stuff!</TABLE>
'''

from lxml.html import fromstring
doc = fromstring(abominable_html)

# These are equivalent, for demonstration purposes.
print doc.xpath('//table/tr/td/table/tr/text()')[0]
print doc.xpath('//table//table/tr')[0].text 
```

如您所见，它出色地处理了有问题的 html。

* * *

如果您需要匹配“服务”文本，您可以添加如下条件：

```
print doc.xpath('//table[./tr/td="services"]//table/tr')[0].text 
```

这里有一些很好的 xpath 参考：

*   [http://www.w3.org/TR/xpath/#path-abbrev](http://www.w3.org/TR/xpath/#path-abbrev)（只需阅读示例）
*   [http://our.umbraco.org/media/upload/0562fd58-c6db-4fa8-a432-68b28f11c3f2/rs/7x1B0.gif](http://our.umbraco.org/media/upload/0562fd58-c6db-4fa8-a432-68b28f11c3f2/rs/7x1B0.gif)
*   [http://zvon.org/comp/r/ref-XPath_1.html](http://zvon.org/comp/r/ref-XPath_1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:06:33.633

我还在学习这个:)

好吧，我基本上是，由 (.*?) 提取的内容是动态值（服务名称），我需要将其插入数据库（在 perl 中我有这个工作）。

我需要的基本上是提取标签之间的内容（这是动态的）

作为下面的示例，使用正则表达式我可以提取服务的名称，以及它是否启用

```
$content2 =~ m{<TD valign="top"><B>name</B></TD>\s<TD>(.*?)</TD>\s</TR>\s<TR>\s<TD valign="top"><B>enabled</B></TD>\s<TD>(.*?)</TD>}gs
$service=$1
$status=$2 
```

有没有办法使用解析器来做到这一点？如果是，我相信更好的方法是关闭这个问题并打开一个新问题。

# python - Python 中的 mylist = list() 与 mylist = []

> ID：11780357
> 
> 赞同：6
> 
> 时间：2012-08-02T15:02:28.227
> 
> 标签：python, list

> **可能重复：**
> [在 Python 中创建一个列表 - 偷偷摸摸地发生了什么？](https://stackoverflow.com/questions/2736693/creating-a-list-in-python-something-sneaky-going-on)
> [在 Python 中创建一个空列表](https://stackoverflow.com/questions/2972212/creating-an-empty-list-in-python)

考虑以下：

```
mylist = list() 
```

和：

```
mylist = [] 
```

`list()`使用或`[]`- 在某些情况下是否应该使用其中一个有什么好处？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T15:06:26.743

对于空列表，我建议使用`[]`. 这会更快，因为它避免了对内置名称的名称查找`list`。内置名称也可以被全局或本地名称覆盖；这只会影响`list()`，不会`[]`。

但是，`list()`内置函数对于将其他一些可迭代对象转换为列表很有用：

```
a = (1, 2, 3)
b = list(a) 
```

为了完整起见，我的机器（Python 2.7.3rc2，Intel Core 2 Duo）上空列表的两个选项的时间：

```
In [1]: %timeit []
10000000 loops, best of 3: 35 ns per loop

In [2]: %timeit list()
10000000 loops, best of 3: 145 ns per loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T15:06:59.023

两者是完全等价的，只是可以重新定义标识符`list`以引用不同的对象。因此，`[]`除非您希望能够重新定义`list`为新类型，否则使用它会更安全。

从技术上讲，使用`[]`会稍微快一些，因为它避免了名称查找。这在任何情况下都不太可能是重要的，除非程序不断地疯狂地分配列表。

正如 Sven 所指出的，`list`它还有其他用途，但当然这个问题并没有问到这些用途。

# c++ - 需要帮助理解下面定义的函数指针？

> ID：11780363
> 
> 赞同：0
> 
> 时间：2012-08-02T15:02:38.103
> 
> 标签：c++

不确定如何制作以下内容以及如何使用它？谢谢

```
class A;
typedef void (*CALLBACK)( A*, void* ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:05:26.447

您正在定义一个指向函数的指针，该函数返回并`void`接受. 这样你就可以做到`A *``void *`

```
void f(A*, void*);
CALLBACK cbk = f;
// ...
A* a;
void *p;
cbk(a, p); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:05:33.657

它是一个指向函数的指针，该函数返回`void`并接受一个`A*`和一个`void*`参数。例如

```
void foo(A* a, void* v)
{
   ...
}

...

CALLBACK c = foo; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:08:26.840

它是一个类型定义，将类型定义`CALLBACK`为指向函数的函数指针，该函数返回`void`并以 a`A*`和 a`void*`作为参数。

```
typedef void (*CALLBACK)(A*, void*);
void cb(A*, void*);
CALLBACK handler = cb;
...
A* obj = new A();
some_type data;
handler(obj, &data); 
```

# vba - 用于将网页内容复制到 word/excel 工作表的 Vb 脚本或 VBA 代码

> ID：11780366
> 
> 赞同：0
> 
> 时间：2012-08-02T15:02:39.670
> 
> 标签：vba, vbscript, copy, webpage

> **可能重复：**
> [从 HTML TD 和 Tr 中提取值](https://stackoverflow.com/questions/8776484/extract-values-from-html-td-and-tr)

我需要使用 VBA 或 VB 脚本将网页的内容复制到 word/excel 表（如果使用任何编程语言很忙）..

因此，如果我给出网页的路径，则系统需要复制网页的内容并将其写入 Word 或 excel 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:44:39.607

下次请发布你已经拥有的，我有2个解决方案，选择最适合你需要的，这里按要求使用word

```
Option Explicit
'Just change these two lines
Const HTMLFileIn="http://stackoverflow.com/questions/10782976/disable-error-in-vbs"
Const DocFileOut="c:\newfile.doc"

Dim MyWord,oIE
set MyWord=CreateObject("Word.Document") 
Set oIE = CreateObject("InternetExplorer.Application")
oIE.Navigate HTMLFileIn
Wscript.Sleep 500
oIE.document.body.createTextRange.execCommand("Copy")
Wscript.Sleep 500
MyWord.Content.Paste
MyWord.SaveAs DocFileOut
MyWord.Close
oIE.Quit
Set oIE = Nothing
set MyWord = Nothing 
Wscript.Echo HTMLFileIn & " is now saved as " & DocFileOut

Sub wait
  Wscript.Sleep 500
  While oIE.busy
    Wscript.Sleep 1000
  Wend
  While oIE.Document.readyState <> "complete"
    Wscript.Sleep 1000
  Wend
End Sub 
```

如果您只想查看html，这里是最简单的解决方案

```
url = "http://stackoverflow.com/questions/10782976/disable-error-in-vbs"
set xml = createobject("msxml2.serverxmlhttp.6.0")
with xml
  .open "get", url, false
  .send
  wscript.echo .responsetext
end with 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:46:06.593

请参阅我使用单词的其他答案。这里还有另一种技术和另存为 HTML

```
function download(sFileURL, sLocation, async)
  set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")
  objXMLHTTP.open "GET", sFileURL, async
  on error resume next
  objXMLHTTP.send()
  if err.number = 0 then
    do until objXMLHTTP.Status = 200
      wscript.echo objXMLHTTP.Status
      wcript.sleep(200)
    loop
    if objXMLHTTP.Status = 200 Then
      set objADOStream = CreateObject("ADODB.Stream")
      objADOStream.Open
      objADOStream.Type = 1
      objADOStream.Write objXMLHTTP.ResponseBody
      objADOStream.Position = 0    
      set objFSO = Createobject("Scripting.FileSystemObject")
      If objFSO.Fileexists(sLocation) Then objFSO.DeleteFile sLocation
      Set objFSO = Nothing
      objADOStream.SaveToFile sLocation
      objADOStream.Close
      set objADOStream = Nothing
      download = true
    end if
  else
    download = false
  end if
  set objXMLHTTP = Nothing
end function

if download("http://stackoverflow.com/questions/10782976/disable-error-in-vbs", "question.html", false) then
  wscript.echo "download ok"
else
  wscript.echo "download nok"
end if 
```

# javascript - Javascript下拉菜单 - 选择更改时刷新

> ID：11780368
> 
> 赞同：0
> 
> 时间：2012-08-02T15:02:40.513
> 
> 标签：javascript, drop-down-menu, html.dropdownlistfor

我正在尝试进行设置，以便当用户更改“hier_start”时，刷新页面并使用刚刚进行的选择预先选择下拉列表。

```
<form name='categories' id="categories">
<div class="row">
    <select name="hier_start" onchange="javascript: NextCat('A', this.value)">
    <option value="0" parent="0">Select...</option>
    [% FOREACH hier_start IN categories.keys %]
    <option value="[% hier_start %]">[% hier_start %]</option>
    [% END %]
    </select>
    <select name="hier_A" style="display:none" onchange="javascript: NextCat('B', this.value)">
    <option value="0" parent="0">Select...</option>
    </select>
    <select name="hier_B" style="display:none" onchange="javascript: NextCat('C', this.value)">
    <option value="0" parent="0">Select...</option>
    </select>
    <select name="hier_C" style="display:none" onchange="javascript: NextCat('D', this.value)">
    <option value="0" parent="0">Select...</option>
    </select>
    <select name="hier_D" style="display:none">
    <option value="0" parent="0">Select...</option>
    </select>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:13:27.037

onchange 属性应该只包含要执行的操作：

```
<select name="hier_start" onchange="javascript: NextCat('A', this.value)"> 
```

应该

```
<select name="hier_start" onchange="NextCat('A', this.value)"> 
```

我没有看到有关您刷新页面的方法的任何详细信息，因此除了您可能根本不需要刷新页面之外，我无法提供任何见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:43:23.807

您需要使用服务器端语言（PHP、ASP 等）或 cookie 来发送值。可能有一种方法可以在不刷新页面的情况下替换 html（我不推荐），但是当页面再次重新加载时，这会消失，因为它加载了原始 .html 文件。

# objective-c - 将 NSDictionary 中的每个 NSArray 更改为 Mutable

> ID：11780374
> 
> 赞同：1
> 
> 时间：2012-08-02T15:02:52.550
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

我对以下代码有疑问，我需要对 NSMutableDictionary 中的每个数组进行一些修改。当我第一次将这些数组添加到字典中时，它们是“MutableArray”，但是当我尝试对它们做一些事情时，它们变成了“NSArray”。

这是我的代码：

```
UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *cellText = selectedCell.textLabel.text;
    NSLog(@"cell: %@", cellText);

    Boolean flag = false;
    NSMutableDictionary *myTempDict = [[NSMutableDictionary alloc] initWithDictionary:self.tableContents copyItems:YES];

    for (NSString *key in myTempDict) 
    {
        NSLog(@"1st for");
        for(NSString *myString in [myTempDict objectForKey:key])
        {
            NSLog(@"2nd for");
            if([myString isEqualToString:cellText])
            {
                if([[myTempDict objectForKey:key] isKindOfClass:[NSMutableArray class]])
                {
                    NSLog(@"mutable");
                }
                else if([[myTempDict objectForKey:key] isKindOfClass:[NSArray class]])
                {
                    NSLog(@"not mutable");
                }
                [[myTempDict objectForKey:key] removeObject:myString];
                break;
                NSLog(@"break1");
            }
            NSLog(@"2nd for end");
        }
        if(flag)
        {
            break;
            NSLog(@"break2");
        }
    }
    self.tableContents = myTempDict;
    [tableView reloadData]; 
```

现在当我运行它时，它会产生以下错误：

*   手机：12-01244476
*   第一名
*   第二为
*   不可变
*   -[__NSArrayI removeObject:]: 无法识别的选择器发送到实例 0x7c02580
*   当前语言：自动；目前客观-c

在我的 viewdidLoad 上，我将那些 Array 创建为 NSMutableArray，但现在它又回到了 NSArray，为什么？以及如何解决这个问题的任何想法？

真的需要帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:11:43.497

[根据NSDictionary](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/initWithDictionary%3acopyItems%3a)的文档

copyWithZone: 方法执行浅拷贝。如果您有任意深度的集合，**则为 flag 参数传递 YES 将执行表面以下第一层的不可变副本**。如果您通过 NO，则第一级的可变性不受影响。在任何一种情况下，所有更深层次的可变性都不受影响。

你为什么不试试：

```
NSMutableDictionary *myTempDict = [self.tableContents mutableCopy]; 
```

# tridion - Tridion 2011 SP1 的硬件先决条件

> ID：11780376
> 
> 赞同：1
> 
> 时间：2012-08-02T15:03:11.963
> 
> 标签：tridion, tridion-2011

我们开始从 Tridion 5.3 升级到 Tridion 2011 SP1。

当我们浏览先决条件文件时，我们得到了所有的软件先决条件，如操作系统、IIS、.net、java 等。

我们在哪里可以找到 Content Manager Server 和 Content Delivery 服务器的硬件先决条件？Tridion 会在任何地方推荐它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T18:25:27.147

Tridion 没有硬件先决条件，因为它们依赖于太多变量。

如果需要，您可以聘请（SDL 或合作伙伴）顾问进行升级扫描，并估计您当前的硬件设置将如何转换为新平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:48:06.107

或者至少联系客户支持，有一份关于 SDL Tridion 硬件尺寸建议的白皮书。

# zend-framework - Zend，具有通用基本代码的多个布局

> ID：11780383
> 
> 赞同：2
> 
> 时间：2012-08-02T15:03:26.130
> 
> 标签：zend-framework, layout

我知道如何使用多个布局（每个控制器和每个模块）。

我有 5 种不同的布局，每次我调用不同的模块时它们都可以正常切换。但问题是我看到它们都有一些通用代码（如文档类型、样式表等）

你能告诉我 Zend 是否允许使用多个布局但为它们设置公共根？现在，如果我想添加样式表，我需要修改 5 种不同的布局，我相信可以以更好的方式完成。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:17:54.493

我通常创建一个包装布局，用子布局呈现内容。

1.  在名为 sublayouts 的布局中创建一个新文件夹
2.  create as many sublayouts as you need with one default so you don't have to set it if you don't need to.

    /application /layouts wrapper.phtml /sublayouts default.phtml

In wrapper.phtml:

```
$sublayout = $this->layout()->sublayout ? $this->layout()->sublayout : 'default';
echo $this->render('sublayouts/' . $sublayout . '.phtml'); 
```

In sublayouts/default.phtml (add anything):

```
<?= $this->layout()->content ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:15:51.427

有用于这些情况的视图助手。 [headScript](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headscript)和[headLink](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.headlink)。

在您的布局中，您需要做的就是

```
echo $this->headScript(), $this->headStyle(); 
```

然后，在您的引导程序中添加：

```
public function _initScriptsAndStyles()
{
  //get the view object
  $this->bootstrap('view');
  $view = $this->getResource('view');

  //add javascript
  $view->headScript()
       ->appendFile('/js/your-js.js')
       ->appendFile('/js/another-js.js');

  //add css files
  $view->headLink()
       ->appendStylesheet('/styles/basic.css');
} 
```

# vba - Access / VBA中的反向数组

> ID：11780388
> 
> 赞同：1
> 
> 时间：2012-08-02T15:03:32.700
> 
> 标签：vba, ms-access-2010

使用 VBA 的 ACCDB 文件。我正在寻找数据库位置路径中的特定文件夹。它总是距离文件 3 深，但驱动器中的深度是可变的。我抓住了项目路径，将其拆分，但找不到反转它的功能。是否有内置函数或者您必须自己编写代码。我环顾四周，令人惊讶的是在任何地方都找不到解决方案。

```
 Dim pth As String
    Dim apth As String
    pth = Application.CurrentProject.Path
    apth = Split(pth, "\")
    'Reverse array here
    apth = apth(2) 'Grab second index
    MsgBox (apth) 'confirm folder
    Call search_Project(apth) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:24:56.867

代码存在一些问题，例如您可以声明一个字符串，然后尝试将其用作数组。下面是使用数组长度和减去 3 得到你想要的位置的修改。我还添加了一项检查以确保数组的长度至少为 3 个元素。删除了 as String for apth，因为您想将其用作数组。

```
Dim pth As String
Dim apth
pth = Application.CurrentProject.Path
apth = Split(pth, "\")
'Reverse array here
If UBound(apth) >= 3 Then
apth = apth(UBound(apth) - 3)
End If
'Grab second index
MsgBox (apth) 'confirm folder
Call search_Project(apth) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T01:21:27.777

```
apth = strReverse(Split(strReverse(pth),"\")(2)) 
```

# c# - ASP.NET MVC 3 如何将 ViewModel 数据保存到多个关联表

> ID：11780396
> 
> 赞同：2
> 
> 时间：2012-08-02T15:03:59.100
> 
> 标签：c#, asp.net, database, asp.net-mvc-3

只是一个标准的先驱，我正在自学通过 ASP.NET MVC 3 进行编程，所以我的知识是基本的，从概念上讲，我对我正在尝试做的事情持开放态度。

所以，这就是我想要做的：

我创建了一个收集公司和用户数据的 ViewModel。我的目的是将这些数据保存到两个域模型中，即 Company 和 User，其中**Company中的****Id**是**User**中的外键。此外，我想传递必要的用户数据来创建会员资格。

 ****我的问题是，现在我已经超越了基本 ASP.NET MVC 教程中的基本强类型模型关联，我不确定如何通过 HttpPost 同步所有内容。

这是我的**视图模型**：

```
public class SPCompanyViewModel
{
    [Required]
    [Display(Name = "Company Name")]
    public string CompanyName { get; set; }

    [Required]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Required]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

**这是我的公司**和**用户**的域模型：

```
namespace BidFetcher.Models.ServiceProvider
{
public class SPCompany
{
    public int Id { get; set; }
    public string CompanyName { get; set; }
}

public class SPUser
{
    public int Id { get; set; }
    public int SPCompanyId { get; set; }

    public string FirstName { get; set; }
    public string LastName { get; set; }
}
} 
```

这是我的问题区域，**控制器**：

```
[HttpPost]
    public ActionResult Create(SPCompanyViewModel viewModel)
    {
        var spCompany = new SPCompany
        {
            CompanyName = viewModel.CompanyName,
        };
        db.SPCompany.Add(spCompany);

        return RedirectToAction("Index");
    } 
```

如您所见，我可以毫无问题地创建公司记录。但是，现在我被卡住了，因为我不确定如何轻松地从我刚刚创建的记录中获取公司**ID**，以便我可以在 User 表中创建一个新行。

非常感谢任何有关解决此类问题的代码建议或概念建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:34:52.953

如果您的 id 是在 sql server 上生成的，您可以添加 Attribute: [Key,DatabaseGenerated(DatabaseGeneratedOption.Identity)] 并且此 Key 的值将在 db.SaveChanges() 示例之后在您的实体中：

```
public class SPCompany
{
    [Key,DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string CompanyName { get; set; }
}

[HttpPost]
public ActionResult Create(SPCompanyViewModel viewModel)
{
    var spCompany = new SPCompany
    {
        CompanyName = viewModel.CompanyName,
    };
    db.SPCompany.Add(spCompany);
    db.SaveChanges();
    var spCompanyId = spCompany.Id //there you get id of new record

    return RedirectToAction("Index");
} 
```****

# jsf - p:selectManyCheckbox 或其他 p:selectMany*/One* 的 Primefaces 工具提示

> ID：11780397
> 
> 赞同：9
> 
> 时间：2012-08-02T15:04:13.013
> 
> 标签：jsf, primefaces, tooltip

我想为 a 中的每个元素添加一个工具提示`p:selectManyCheckBox`。但是我想不出解决方案。

我有一个`Role`有 3 个属性的类，“id”（长）、“name”（字符串）和“description”（字符串）。显示名称，我希望将描述作为工具提示。

这是一段工作代码：

```
<p:selectManyCheckbox layout="pageDirection" value="#{roleBean.selectedRoles}" converter="roleConverter">
    <f:selectItems value="#{roleBean.roles}" var="role" itemLabel="#{role.name}" itemValue="#{role}"/>
</p:selectManyCheckbox> 
```

`roleConverter`是将`FacesConverter`转换`Role`为 id 的，反之亦然。

我想出了这个：

```
<p:selectManyCheckbox layout="pageDirection" value="#{roleBean.selectedRoles}" converter="roleConverter">
    <c:forEach var="role" items="#{roleBean.roles}">
        <f:selectItem id="role#{role.id}" itemLabel="#{role.name}" itemValue="#{role}" />
        <p:tooltip for="role#{role.id}" value="#{role.description}"/>
    </c:forEach>
</p:selectManyCheckbox> 
```

但不幸的是，它不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T12:13:17.087

您可以通过使用以下[`SelectItem#getDescription()`](https://docs.oracle.com/javaee/6/api/javax/faces/model/SelectItem.html#getDescription())属性来实现此目的：

```
<p:selectManyCheckbox layout="pageDirection"
    value="#{roleBean.selectedRoles}" converter="roleConverter">
    <f:selectItems value="#{roleBean.roles}" var="role" 
        itemValue="#{role}" itemLabel="#{role.name}" 
        itemDescription="#{role.description}" />
</p:selectManyCheckbox> 
```

从 PrimeFaces 6.2 开始支持这一点（[实际上是因为您现在正在阅读这个答案](https://github.com/primefaces/primefaces/issues/2992)）。

如果您还没有使用 PrimeFaces 6.2 并且由于某种原因无法升级，那么您需要手动覆盖 PrimeFaces `SelectManyCheckboxRenderer#encodeOptionLabel()`，如下所示以识别和渲染它：

```
public class YourSelectManyCheckboxRenderer extends SelectManyCheckboxRenderer {

    @Override
    protected void encodeOptionLabel(FacesContext context, SelectManyCheckbox checkbox, String containerClientId, SelectItem option, boolean disabled) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("label", null);
        writer.writeAttribute("for", containerClientId, null);

        if (option.getDescription() != null) {
            writer.writeAttribute("title", option.getDescription(), null);
        }

        if (disabled) {
            writer.writeAttribute("class", "ui-state-disabled", null);
        }

        if (option.isEscape()) {
            writer.writeText(option.getLabel(), null);
        } else {
            writer.write(option.getLabel());
        }

        writer.endElement("label");
    }

} 
```

注册如下`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.SelectManyCheckboxRenderer</renderer-type>
        <renderer-class>com.example.YourSelectManyCheckboxRenderer</renderer-class>
    </renderer>
</render-kit> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-17T10:13:08.087

自 Primefaces v6.2 版本起[添加](https://github.com/primefaces/primefaces/issues/2992)了对 selectManyCheckbox 的工具提示支持。其他组件也支持这一点。

XHTML 代码与 BalusC 报告的相同

```
<p:selectManyCheckbox layout="pageDirection" value="#{roleBean.selectedRoles}" converter="roleConverter">
    <f:selectItems value="#{roleBean.roles}" var="role" 
        itemValue="#{role}" itemLabel="#{role.name}" itemDescription="#{role.description}" />
</p:selectManyCheckbox> 
```

但不再需要覆盖 PrimeFaces SelectManyCheckboxRenderer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T09:26:23.457

我不得不修改 BalusC 的解决方案以使其适用于我的情况。那是因为我必须在 Bean 端构建 SelectItems 列表。

```
public List<SelectItem> getMyItems(){
  List<SelectItem> mySelectItems = new ArrayList<>();
  [loop or ohter code to collect items]
  // create SelectItem with description
  mySelectItems.add(new SelectItem([value], [label], [description]));
  ...
  return mySelectItems;
} 
```

然后这些 SelectItems 可以用于：

```
<f:selectItems value="#{myBean.myItems}"/> 
```

# ruby-on-rails - ActionController::RoutingError (没有路由匹配 [GET] "/users/sign_up")

> ID：11780400
> 
> 赞同：1
> 
> 时间：2012-08-02T15:04:14.780
> 
> 标签：ruby-on-rails, routing, devise

我正在使用设计来管理我的 rails 应用程序中的用户帐户。它在我的开发环境中运行良好。我刚刚推送到 Heroku，当我导航到 /users/sign_up 页面（用户/sign_in 正在工作）时，我得到“您正在寻找的页面不存在”。我检查了日志并得到：

```
ActionController::RoutingError (No route matches [GET] "/users/sign_up") 
```

我的 routes.rb 是：

```
 get "home/index"

  get "deals/new"
  get "deals/all"

  resources :deals

  devise_for :users

  root :to => "home#index" 
```

知道出了什么问题吗？

谢谢

**更新：**

路线是：

```
 home_index GET    /home/index(.:format)          home#index
               deals_new GET    /deals/new(.:format)           deals#new
               deals_all GET    /deals/all(.:format)           deals#all
                   deals GET    /deals(.:format)               deals#index
                         POST   /deals(.:format)               deals#create
                new_deal GET    /deals/new(.:format)           deals#new
               edit_deal GET    /deals/:id/edit(.:format)      deals#edit
                    deal GET    /deals/:id(.:format)           deals#show
                         PUT    /deals/:id(.:format)           deals#update
                         DELETE /deals/:id(.:format)           deals#destroy
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                    root        /                              home#index 
```

**更新**：

我在 heroku 上 rake 路线，结果非常不同。

```
home_index GET    /home/index(.:format)     home#index
 deals_new GET    /deals/new(.:format)      deals#new
 deals_all GET    /deals/all(.:format)      deals#all
     deals GET    /deals(.:format)          deals#index
           POST   /deals(.:format)          deals#create
  new_deal GET    /deals/new(.:format)      deals#new
 edit_deal GET    /deals/:id/edit(.:format) deals#edit
      deal GET    /deals/:id(.:format)      deals#show
           PUT    /deals/:id(.:format)      deals#update
           DELETE /deals/:id(.:format)      deals#destroy
      root        /                         home#index 
```

似乎没有设置设计。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:36:21.273

在设计用户模型中 :registerable 没有为生产环境设置，但它是为本地环境设置的。这就是为什么它在本地工作并且不会在 Heroku 上工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:23:19.697

我不确定什么样的东西应该默认使用“用户”模型和“sign_up”，但如果你有一个名为 sign_up 的控制器方法，那么你可以添加

```
get "users/sign_up" 
```

到路线.rb

如果您要用于 sign_up 的方法称为“create”之类的方法，请尝试

```
match 'sign_up', :to => 'users#create' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:43:09.103

抱歉，我忽略了您使用设计的全部要点。我认为注册路线应该是'/registration/sign_up'

要定义自己的路线，请在 routes.rb 中尝试

```
devise_scope :user do
  get "/sign_up" => "devise/registrations#new"
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:53:14.570

```
devise_for :users, :path_names => {
   :sign_in => 'signin',
   :sign_out => 'signout',
   :sign_up => 'signup'
  }, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-09T19:39:52.460

在您的 routes.rb 文件中添加：

```
 resource:users 
```

之后做 rake 路线，看看它是否存在。

# ios - 像 iOS 中的 Facebook 页面

> ID：11780403
> 
> 赞同：2
> 
> 时间：2012-08-02T15:04:22.620
> 
> 标签：ios, facebook, facebook-like, request

我需要创建一个喜欢某个网站的按钮。看起来我读[了](http://www.facebook.com/plugins/like.php?href=http://www.apple.com/&send=false&layout=button_count&width=450&show_faces=false&action=like&colorscheme=light&font&height=21) 很多，大多数人都说做不到。我试图将此网址放在 webView 中，但似乎无法添加 Facebook 用户令牌，以便客​​户端无需登录，只需单击它即可。无论如何这可以做到吗？

这是网址请求：

```
 http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.apple.com%2F&send=false&layout=button_count&width=450&show_faces=false&action=like&colorscheme=light&font&height=21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:42:51.457

如果您将[Facebook iOS SDK 从 Github](https://github.com/facebook/facebook-ios-sdk/)拉入您的项目并[使用 Facebook 的说明进行设置](https://developers.facebook.com/docs/mobile/ios/build/)，您将能够获得您正在寻找的确切功能。

# php - 谷歌站点地图日期格式

> ID：11780404
> 
> 赞同：26
> 
> 时间：2012-08-02T15:04:23.353
> 
> 标签：php, sitemap, date-format

我需要 php 中站点地图的日期格式。

我怎样才能做到这一点 ？

这个输出对吗？

```
<lastmod>2012-08-02EEST18:01:18+03:00</lastmod> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-02T15:07:01.073

If you have the timestamp you can format the date correctly like this:

```
<lastmod><?php echo date('c', $timestamp); ?></lastmod> 
```

Time stamp could be `time()` (for current time) or some other method of fetching a unix tiemstamp like `strtotime()`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-10-11T16:30:17.247

要以 W3C 日期时间编码（在 sitemap.xml 文件中使用）格式设置当前时间戳，请使用以下参数。

```
echo date('Y-m-dTH:i:sP', time()); 
```

从 PHP5 开始，您还可以使用 c 格式字符来打印完全相同的字符串。

```
echo date('c',time()); 
```

这些都将打印出以下内容：

```
2009-04-03T11:49:00+01:00 
```

[资源](http://www.hashbangcode.com/blog/xml-sitemap-date-format-php-359.html)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-28T10:28:33.430

要将 MySQL 的日期时间格式转换为站点地图中**lastmod**所需的格式，只需使用下面的 PHP 代码。

```
$lastmod = '2012-11-28 10:53:17'; //MySQL datetime format

$datetime = new DateTime($lastmod);
$result = $datetime->format('Y-m-d\TH:i:sP');

echo $result; //2012-11-28T10:53:17+01:00 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-09-28T04:46:17.143

[根据 Google](https://support.google.com/webmasters/answer/183668?hl=en&ref_topic=6080646&rd=1)，他的值是一个可选字段，如果提供，必须格式化为

```
YYYY-MM-DDThh:mmTZD 
```

SQL 日期时间的默认导出[取决于服务器的语言设置](https://stackoverflow.com/questions/14769547/sql-server-datetime-format)，并且可能包括空格和特征 TZD，例如：

```
2014-09-19 10:33:05 UTC 
```

[W3 指定](http://www.w3.org/TR/NOTE-datetime)TZD 可以在三个选项中的任何一个中格式化

TZD = 时区指示符（Z 或 +hh:mm 或 -hh:mm）

必须删除默认格式中的任何空格；必须在时间之前插入字符“T”，并且 TZD 必须与支持的类型之一匹配。

因此，要格式化当前时间戳，请使用以下参数。

```
echo date('Y-m-dTH:i:sP', time()); 
```

从 PHP5 开始，您还可以使用 c 格式字符来打印完全相同的字符串。

```
echo date('c',time()); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-19T07:28:20.933

我知道这个问题是关于 PHP 的，但我发现这个页面在谷歌上搜索 Node/JavaScript。所以最接近的等价物是`Date.toISOString()`：

```
var d = new Date();
d.toISOString(); // "2017-04-19T07:23:16.040Z" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-28T23:35:33.763

你得到这个输出是因为你使用了旧的推荐时间戳字符串

```
Y-m-dTH:i:sP. 
```

然而，你需要的是

```
Y-m-d\TH:i:sP 
```

这个单反斜杠会有所作为。在某些时候，大写 T 成为 PHP 中表示时间码的特殊字符，因此如果您不转义 T，您将得到您的报告。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-02T15:07:20.583

[您有很多格式可供选择](http://www.w3.org/TR/NOTE-datetime)。将`c`参数与[`date()`](http://us.php.net/manual/en/function.date.php)函数一起使用将为您获得推荐的格式。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-05T00:44:59.290

实际上，有两种方法。

**第一种**方法是为 XML 站点地图设置一个有效日期，其中包括给出值的“C”字符：*(2019-06-03T17:30:21-05:00)*。**[在这里测试](https://tools.seochat.com/tools/site-validator/)**

`<lastmod>'.date('c', strtotime($row['date'])).'</lastmod>`

**第二种**方法是为 RSS 站点地图设置一个有效日期，其中包括给出值的“r”字符：*(2019-03-07T17:55:44+00:00)*。

`<pubDate>'.date('r', strtotime($row['date'])).'</pubDate>`

希望这可以帮助你。谢谢

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-02T02:48:21.220

删除“EES”我的就像这样 2013-12-26T19:00:00-05:00 它工作 [http://www.industry-automation-parts.com/1_e_0_sitemap.xml](http://www.industry-automation-parts.com/1_e_0_sitemap.xml)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-13T08:51:52.193

用moment.js；

```
moment().format('YYY-MM-DDTHH:mm:ssZ') 
```

# javascript - 问题读取 JSON

> ID：11780410
> 
> 赞同：1
> 
> 时间：2012-08-02T15:04:49.947
> 
> 标签：javascript, jquery, ajax, json, jsonp

我很难阅读以下 JSON（基本上没有错误，也没有任何反应），并希望能帮助我识别函数的问题。我不清楚 ajax 是否成功地抓住了它，或者它只是在之后没有正确读取它。任何帮助将非常感激！

这是 JSON 响应的结构：

```
 [{"attributes":{"type":"Account","url":"/services/data/v25.0/sobjects/Account/00130000015KJlWAAW"},"id":"00130000015KJlWAAW","locname":"Central Valley Ag","address":"607 North Robinson","city":"Hartington","state":"NE","postal":"68739","phone":"402-254-3354","web":"","lat":"42.627212","lng":"-97.269283"},{"attributes":{"type":"Account","url":"/services/data/v25.0/sobjects/Account/00130000015KJlXAAW"},"id":"00130000015KJlXAAW","locname":"Central Valley Ag","address":"709 Centennial Rd","city":"Wayne","state":"NE","postal":"68787","phone":"402-375-3510","web":"","lat":"42.235756","lng":"-96.998321"}] 
```

* * *

这是处理 JSON 的脚本部分：

```
 function mapping(orig_lat, orig_lng, origin) {
                $(function () {
                    var dataType;
                    //jsonData is set to true
                    if (settings.jsonData == true) {
                        dataType = "jsonp";
                    } else {
                        dataType = "xml";
                    }
                    $.ajax({
                        type: "GET",
                        url: settings.dataLocation,
                        dataType: dataType,
                        crossDomain: true,                            
                        error: function(jqXHR, textStatus, errorThrown) {   
                    alert('Error Message: '+textStatus);
                    alert('HTTP Error: '+errorThrown);
                },
                        success: function (data) {
                            //After the store locations file has been read successfully
                            var i = 0;

                            if (settings.jsonData == true) {
                                var data = $.parseJSON(data);
                                //Process JSON
                                $.each(data, function () {
                                    var name = this.locname;
                                    var lat = this.lat;
                                    var lng = this.lng;
                                    var address = this.address;
                                    var address2 = this.address2;
                                    var city = this.city;
                                    var state = this.state;
                                    var postal = this.postal;
                                    var phone = this.phone;
                                    var web = this.web;
                                    web = web.replace("http://", "");
                                    var distance = GeoCodeCalc.CalcDistance(orig_lat, orig_lng, lat, lng, GeoCodeCalc.EarthRadiusInMiles);
                                    //Create the array
                                    locationset[i] = new Array(distance, name, lat, lng, address, address2, city, state, postal, phone, web);
                                    i++;
                                });
                            } else {
                                //Process XML
                                $(data).find('marker').each(function () {
                                    //Take the lat lng from the user, geocoded above
                                    var name = $(this).attr('name');
                                    var lat = $(this).attr('lat');
                                    var lng = $(this).attr('lng');
                                    var address = $(this).attr('address');
                                    var address2 = $(this).attr('address2');
                                    var city = $(this).attr('city');
                                    var state = $(this).attr('state');
                                    var postal = $(this).attr('postal');
                                    var phone = $(this).attr('phone');
                                    var web = $(this).attr('web');
                                    web = web.replace("http://", "");
                                    var distance = GeoCodeCalc.CalcDistance(orig_lat, orig_lng, lat, lng, GeoCodeCalc.EarthRadiusInMiles);
                                    //Create the array
                                    locationset[i] = new Array(distance, name, lat, lng, address, address2, city, state, postal, phone, web);
                                    i++;
                                });
                            } 
```

更新：我添加了一个 ajax 错误处理程序作为状态，并在页面加载时得到以下 parseerror：

HTTP 错误：错误：未调用 jQuery172036075869924388826_1343923258757

然后，当我尝试运行该函数时，出现以下错误：

```
Uncaught TypeError: Property 'alert' of object [object Window] is not a function          dealer-locator-iframe2:273
$.fn.storeLocator.each.$.ajax.error dealer-locator-iframe2:273
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
w jquery.min.js:4
f.ajaxTransport.send.d.onload.d.onreadystatechange 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:07:09.040

It looks like you need to run `$.parseJSON` on the `data` variable. `data` is coming back as a string of JSON and you need to convert it into a JavaScript object literal.

Example:

```
var obj = $.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

So place this immediately after `if (settings.jsonData == true)` in your `success` function:

```
var data = $.parseJSON(data); 
```

The reason you're not getting any errors is because the `$.each(function() {....});` isn't looping, because there isn't anything to loop on a string.

有一种非常简单的方法可以测试`data`变量的数据类型。`success`在函数的开头使用它：

```
alert(typeof(data)); 
```

如果你被`string`退回，那么你知道这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:54:22.203

您的 JSON 看起来像一个对象数组，您可以通过它周围的 [] 来判断。它是一个只有一个元素的数组，但如果你写这会出错

```
json.key 
```

因为 json 不是一个对象，而是一个对象数组，所以 json.key 看起来你正在调用数组中不存在的一些 fncion“key”。您应该首先使用 json[0] 选择真实对象本身，例如

```
myJson = json[0] 
```

然后

```
value = myJson.key1 
```

如果您使用的是一些外部 API，这很可能是我之前遇到过的这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:14:05.070

在`$.each`添加此行之前

```
data = eval("("+data+")"); 
```

您的其余代码将正常工作...

为什么你的代码不起作用？原因 - 因为您正试图在`string`. 首先将其`string`转换为`JSON object`. `eval()`转换`string`为`javascript`对象。

# php - Codeigniter 的 csv_from_result() 不适用于 UTF-8 字符？

> ID：11780413
> 
> 赞同：1
> 
> 时间：2012-08-02T15:05:03.487
> 
> 标签：php, codeigniter, csv, export

我有一些 Cyrilic 数据，我想用 Codeigniter 将其导出为 .csv 文件。问题是方法 csv_from_result() 弄乱了这些字符。

```
$this->load->dbutil();
$delimiter = ",";
$newline = "\r\n";

$report_result =  $this->data_model->get_data_result();
$data['csv']    = $this->dbutil->csv_from_result($report_result, $delimiter, $newline); 
```

在我看来，我有：

```
<?php
header("Content-type: application/csv-tab-delimited-table; charset=utf-8" );
header("Content-Disposition: attachment; filename=csvdata.csv" );
header("Content-Transfer-Encoding: binary" );
  echo $csv; 
?> 
```

输出文件包含如下混乱的字符：

```
Ð¢ÐµÑÑ‚ Ð¿Ð¸ÑÐ¼Ð¾","54","Ð ÐµÑ„ÐµÑ€ÐµÐ½Ñ† 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-22T17:48:40.757

来自 ci 的 csv_from_result 生成没有 BOM 的 utf-8，你可以在[这里](https://stackoverflow.com/questions/2223882/whats-different-between-utf-8-and-utf-8-without-bom)找到区别， 所以你现在需要做的就是将“utf-8 without BOM”转换为“utf-8”，你可以用下面的代码来做.

```
$this->load->dbutil();
$delimiter = ",";
$newline = "\r\n";

$report_result =  $this->data_model->get_data_result();
$CSV_data      = $this->dbutil->csv_from_result($report_result, $delimiter, $newline);
$CSV_data = chr(239) . chr(187) . chr(191) .$CSV_data;
$data['csv'] = $CSV_data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T09:20:58.430

我最终将[PHPExcel 用于 Codeigniter](https://github.com/EllisLab/CodeIgniter/wiki/PHPExcel)。这就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T19:36:11.607

尝试这个：

```
$this->load->dbutil();
$query = $this->db->query($sql);
$delimiter = ",";
$newline = "\r\n";

header ("Content-disposition: attachment; filename=csvoutput_" . time() . ".csv") ;
echo mb_convert_encoding($this->dbutil->csv_from_result($query, $delimiter, $newline), "ISO-8859-1", "UTF-8"); 
```

# php - 通过引用分配由 PHP 中的方法调用返回的数组？

> ID：11780415
> 
> 赞同：0
> 
> 时间：2012-08-02T15:05:06.433
> 
> 标签：php, arrays, variable-assignment

我需要循环每个`$message`收件人（收件人是一个`array`），如果出现问题，`unset`相应的收件人：

```
$recipients = &$message->getRecipients(); // array

// Do this now as arrays is going to be altered in the loop
$count = count($recipients);         

for($i = 0; $i <= $count; $i++):

    $response = $messageManager->send($recipients[$i], $content);

    // If not 200 OK remove the recipient from the message
    if($response->getStatusCode !== 200) unset($recipients[$i]); 

endfor; 
```

但是 PHP 不会让我这样做，因为“只能通过引用分配变量”。除了重新分配数组之外，我还能做些什么：

```
$recipients = $message->getRecipients();

// Loop

$message->setRecipients($recipients); 
```

**编辑**：不能使用 foreach 并通过引用传递当前元素：

```
$recipients = array('a', 'b', 'c');

foreach($recipients as &$recipient)
    unset($recipient);

echo count($recipients); // 3 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T15:07:36.190

你可以这样做：

```
$recipients = $message->getRecipients();      

foreach($recipients as $key => $recipient) :

    $response = $messageManager->send($recipient, $content);
    if($response->getStatusCode !== 200) unset($recipients[$key]); 

endforeach;

$message->setRecipients($recipients); 
```

# html - HTML5 缓存清单不加载资源，除非它位于网站的根目录？

> ID：11780416
> 
> 赞同：0
> 
> 时间：2012-08-02T15:05:10.220
> 
> 标签：html, caching, manifest, offline, cache-manifest

我有一个网站，其中包含使用描述的缓存清单

```
<html manifest="site.manifest">...</html> 
```

清单非常简单：

```
CACHE MANIFEST

CACHE:
/fira.jpg
/offline.php
FALLBACK:
/no.php /fallback.php 
```

当我的站点部署在域根目录下时，例如：

```
http://localhost 
```

我可以在 Apache 日志中看到 site.manifest 的 GET 请求，所有资源都加载正常，清单工作正常。

现在，如果我在另一个环境下部署我的网站，比如

```
http://localhost/other/ 
```

并点击这个 url，我仍然可以看到对 site.manifest 的 GET 请求，但是，没有加载任何资源，并且 applicationCache 包含 0 个条目。

缓存清单是否应该只是来自网站根目录的服务器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:34:41.213

我认为这是因为您使用的是绝对 URL。尝试删除前面的“/”

例如：

```
CACHE MANIFEST

CACHE:
fira.jpg
offline.php 
```

或者...您可以使用正确的绝对路径 -- /other/fira.jpg 等。

我可能误解了您的问题-希望这会有所帮助:)

格雷格

# php - 结构从 mysql_get_assoc 返回的数据

> ID：11780421
> 
> 赞同：1
> 
> 时间：2012-08-02T15:05:28.047
> 
> 标签：php, mysql

我设法解决了我的问题`getAll`并在它之后循环。但由于我对 mysql 查询等不太擅长，所以我决定问你是否有办法`getAssoc`从表中使用：

```
A | B | C
1 | 2 | 3
1 | 3 | 4 
```

具有结构的数组：

```
$array[1][2]=3
      [1][3]=4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:12:16.720

这是你想要的吗

```
$output = array();

while ($row = mysql_fetch_array($result)){
   $first_col = $row['A'];
   $second_col = $row['B'];
   $third_col = $row['C'];
   $output[$first_col][$second_col] = $third_col;
} 
```

还要记住，不要使用`mysql_*`，PHP 不再支持它了。最好切换到[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:12:42.403

试试这个

```
$result = mysql_query('SELECT A,B,C FROM TABLE_NAME');

$out = array();
while ($row=mysql_fetch_array($result)){
 $out[] = array($row['A'] => array($row['B']=>$row['C'])); 
} 
```

# asp.net-mvc - 从父对象集合中检索所有子对象

> ID：11780429
> 
> 赞同：0
> 
> 时间：2012-08-02T15:05:50.823
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, collections

我有一个名为 blog 的对象和一个名为 article 的对象。一个博客里面有很多文章。我选择这样的博客：

```
Dim blogs = db.Blogs.Where(Function(b) b.CompanyId = companyId) 
```

如何获取所选博客中的所有文章？

我想在所选博客的列表中显示文章：

```
Dim articles = ' How do I get all the articles inside of the blogs found?
Return View(articles.ToList()) 
```

我的博客实体如下：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Public Class Blog

    Public Property BlogId() As Integer
    Public Property CompanyId() As Integer
    Public Property Name() As String
    Public Property Description() As String
    Public Property DateCreated As Date

    Public Overridable Property Articles() As ICollection(Of Article)

    Public Overridable Property Company() As Company

End Class

Public Class BlogDbContext

    Inherits DbContext
    Public Property Blogs As DbSet(Of Blog)
    Public Property Companies As DbSet(Of Company)
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:08:43.350

```
Dim articles = blogs.SelectMany(Function(b) b.Articles) 
```

# ios - 自定义 url 方案不起作用（第一次）IOS 应用程序

> ID：11780433
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:01.067
> 
> 标签：ios, custom-url, distributed-apps

我创建了一个分发应用程序，还注册了自定义 URL 方案。第一次安装应用程序并尝试自定义 URL 链接后，它不起作用。

但是，如果我手动午餐应用程序，它将提示我下面提到的消息

```
Are you sure you want to open the application ... from the developer iphone distribution ... ? 
```

我将单击继续，然后该自定义 URL 链接可以在我的应用程序中正常工作。

自定义 url 链接能否在安装时直接启动应用程序（无需手动启动应用程序并继续）？

还有是否有任何设置，所以我们可以关闭提示信息。所以它不会提示消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:39:00.433

> 自定义 url 链接能否在安装时直接启动应用程序（无需手动启动应用程序并继续）？

不需要。只要确保用户知道他们正在安装哪个应用程序。然后他们可以第一次手动打开它；之后，您的 URL 方案将正常工作。

> 还有是否有任何设置，所以我们可以关闭提示信息。所以它不会提示消息。

不，那里没有。此消息由操作系统生成，无法关闭。它是企业级应用程序的安全功能。

# javascript - 图像服务器提供的源图像

> ID：11780437
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:03.680
> 
> 标签：javascript, jquery

我想使用 jquery、jstree 和 html 显示很多图像。所有图像名称都是这样的。

```
<node_id>-serverA_cpu.png
<node_id>-serverA_mem.png
<node_id>-serverB_cpu.png
<node_id>-serverB_mem.png 
```

当我在外部创建图像时，我给它们一个名为 node_id 的唯一标识符，它与 jstree node_id 中的文本相同。当用户单击 jstree 上的节点时，我会显示以该节点 ID 开头的每个图像。当 Web 服务器和图像在同一台服务器上时，它运行良好。我这样做

```
var Img_CPU = "img/"+node_id+"-Server_cpu.png";
var Img_Mem = "img/"+node_id+"-Server_mem.png"; 
```

ETC

然后我使用 jquery 函数加载图像（如果存在）并获取它，如下所示：

```
$(function () 
{ 
    var myImage1 = new Image(); 
    $(myImage1).load(function () 
          {                   
        $("#div1").html(myImage1);      

          })  

          .attr('src', Img_CPU).error(function()
            {
        $('#div1').html("").css({"border": "", "margin": "0"});
           })
}); 
```

当图像与 IIS 位于同一台服务器上时，这一切都很好。如果我的图像位于可以通过 http 访问的另一台服务器上怎么办？如果图像位于单独的服务器上，如何获取图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:11:13.923

当图像在另一个域上时，您必须将图像 url 更改为绝对 url

```
var Img_CPU = "img/"+node_id+"-Server_cpu.png";
to
var Img_CPU = "http://anotherdomain.com/img/"+node_id+"-Server_cpu.png"; 
```

如果它仍然不起作用，那么我认为这是跨域策略（尽管这不适用于图像）

# maven - Maven - 在子 POM 中设置父依赖版本

> ID：11780438
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:03.617
> 
> 标签：maven, pom.xml

我们有一个父 POM，我们想在其中设置一个依赖项，但没有该依赖项的*版本*。这个想法有点像抽象成员：我们要确保继承者指定此依赖项的特定实例。

如何最好地实现这一目标？我们可以在父级中设置一个默认版本，如果子级想要覆盖它，那么他们可以使用`dependencyManagement`. 另一种可能的解决方案是使用在子项中设置的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:09:11.010

如果在 中定义依赖项`<dependencies>`，则必须设置（有效）版本号。但是，正如您所说，您可以将版本号放入属性中。然后，如果需要，子项目可以覆盖此属性。但是，父项目有一个默认版本。

`<dependenyManagement>`只是用来声明依赖关系。但它不会向您的项目添加依赖项。

# android - SecureRandom 及其不同的提供者

> ID：11780441
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:08.993
> 
> 标签：android, aes, encryption

我有一个大问题，我开发了一个使用加密向另一台设备发送消息的应用程序。

在这里密码课，我“偷”了，但我不记得在哪里：

```
public class AesCipher {
    public static String encrypt(String seed, String cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext.getBytes());
        return toHex(result);
    }

    public static String decrypt(String seed, String encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = toByte(encrypted);
        byte[] result = decrypt(rawKey, enc);
        return new String(result);
    }

    private static byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
        kgen.init(256,sr); // 192 and 256 bits may not be available
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        try{
            SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
            Cipher cipher = Cipher.getInstance("AES");
            cipher.init(Cipher.DECRYPT_MODE, skeySpec);
            byte[] decrypted = cipher.doFinal(encrypted);
            return decrypted;
        }
        catch (Exception e) {return encrypted;}
    }

    public static String toHex(String txt) {
        return toHex(txt.getBytes());
    }
    public static String fromHex(String hex) {
        return new String(toByte(hex));
    }

    public static byte[] toByte(String hexString) {
        int len = hexString.length()/2;
        byte[] result = new byte[len];
        for (int i = 0; i < len; i++)
            result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();
        return result;
    }

    public static String toHex(byte[] buf) {
        if (buf == null)
            return "";
        StringBuffer result = new StringBuffer(2*buf.length);
        for (int i = 0; i < buf.length; i++) {
            appendHex(result, buf[i]);
        }
        return result.toString();
    }
    private final static String HEX = "0123456789ABCDEF";
    private static void appendHex(StringBuffer sb, byte b) {
        sb.append(HEX.charAt((b>>4)&0x0f)).append(HEX.charAt(b&0x0f));
    }
} 
```

所以，如果我向同一设备发送消息，我的应用程序工作正常，但如果我使用不同的设备版本（andorid2.3 vs android4.0），接收方无法解密消息..

环顾四周，我发现问题是 SecureRandom ，它不能保证不同实现的兼容性。我该如何解决？

对不起我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:43:06.823

是的，我试图删除那个可怕的例子，但无济于事。

您应该尝试从 2.3 设备中检索字节，并使用生成的`raw[]`字节数组创建一个`SecretKeySpec`. 您可以`SecretKeySpec`直接使用它作为密钥来解密您在 2.3 设备上加密的任何内容。

不幸的是，如果您使用 4 设备加密任何内容并“丢弃”，`raw[]`那么您唯一的选择就是破解`"AES/ECB/PKCS5Padding"`（使用 时的默认设置`"AES"`）。您可能能够从 ECB 模式获得一点点信息，因为这也是不安全的，但否则它会归结为破坏 AES 密文安全性 - 据我们所知，这个世界上没有人能够做到这一点.

* * *

如果您在创建代码时自己开始使用密码，那么您应该首先调用基于密码的密钥派生函数来从密码创建密钥。Java 内置了 PBKDF2。

# github - 使用 github 创建开发服务器，.gitignore 中的文件？

> ID：11780443
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:11.450
> 
> 标签：github, development-environment

我无法理解这个过程，因此感谢您提供一些帮助：

我们想对我们的 magento 网站进行更改。这发生在开发服务器上。现在，在没有 github 的情况下，我们 rsync 实时服务器，调整 /app/etc/local.xml，mysql 表，进行更改，然后将它们 rsync 回来。

现在我们想使用 github。我们从实时服务器创建了一个原始主存储库。它有推荐的 magento .gitignore 文件，为了我们的目的稍作修改。

现在的问题：

当我们为开发服务器创建一个分支并将这个分支克隆到开发服务器时，.gitignore 中的所有文件都不会最终在开发服务器上，并且网站只完成了一半。

我们如何解决这个问题？用rsync手动？

拍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:11:02.850

数据库配置和缓存文件夹之类的东西应该在你`.gitignore`的里面，你不想在服务器之间提交和传递你的登录详细信息的副本。Web 应用程序的某些方面对于环境来说必须是静态的。

您可以研究的是[phing](http://www.phing.info/trac/)或其他一些构建工具来执行某些功能并“构建”您的网站。而不是执行`git pull`你会执行 phing ，它会为你做各种各样的事情，比如 git pull，清除缓存目录和现有配置文件中的符号链接。这将需要一些学习配置，但是当您可以一口气完成上面提到的所有步骤时，这将是值得的。

# magento - 从自定义页面布局恢复的 Magento 问题

> ID：11780444
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:11.870
> 
> 标签：magento, magento-1.4

我正在使用 Magento 1.4.1.1，不久前我创建了一些自定义页面布局，用于我的 CMS 页面（设计部分）。我通过将我的 core/Mage/Page/etc/config.xml 复制到 local/Mage/Page/etc/config.xml 并将以下内容添加到页面/布局区域来实现这一点：

```
<page>
    <layouts>
        ...
        <my_custom_page module="page" translate="label">
            <label>My Custom Page</label>
            <template>page/my-custom-page.phtml</template>
            <layout_handle>my_custom_page</layout_handle>
        </my_custom_page>
        ...
    </layouts>
</page> 
```

这一切都很好，让我可以从页面布局部分的下拉菜单中选择新的自定义布局，一切都很好。

现在我想更改它并将新的自定义模板定义放入模块中。因此，首先我将 local/Mage 目录重命名为 local/MageOLD，希望一切都恢复到核心文件。好的，所以我会丢失我的自定义布局，但我已经为此做好了准备。问题是，当我重命名该目录时，我在前端得到一个白屏。我已将 cms 页面模板设置回默认值之一，但它仍然会发生。然后我创建了我的模块并将旧的自定义布局添加回 MyNamespace/PageLayouts/etc/config.xml，如下所示：

```
<?xml version="1.0" ?>
<config>
    <modules>
        <MyNamespace_PageLayouts>
            <version>0.0.1</version>
        </MyNamespace_PageLayouts>
    </modules>

    <global>
        <page>
            <layouts>
                <my_custom_page module="page" translate="label">
                    <label>My Custom Page</label>
                    <template>page/my-custom-page.phtml</template>
                    <layout_handle>my_custom_page</layout_handle>
                </my_custom_page>
            </layouts>
        </page>
    </global>
</config> 
```

但是，如果我删除/重命名本地/Mage 目录，我仍然会在前端看到白屏。但是自定义布局在布局部分正确显示，所以我猜模块工作正常..？！

不幸的是，我在任何日志中都找不到这个错误（我检查了 php 错误日志、mysql 错误日志、apache 错误日志和 Magento 错误日志，但它根本没有被记录。）。我已确保将 php 错误设置为 ALL 并且 display_errors 为“on”。我还确保启用了 Magento 日志记录。

关于可能出现什么问题的任何线索？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:40:48.247

对于第一部分，您将 core/Mage/Page/etc/config.xml 复制到 local/Mage/Page/etc/config.xml 并添加了几个代码，它有效吗？我不认为 local/Mage/Page/etc/config.xml 会被加载（当然你没有在你的 app/etc/modules 中注册它吗？）。你能解释一下你是怎么做的吗？对于块、模型等，可以通过将它们复制到本地文件夹来直接重写，但我不知道它也可以与 config.xml 一起使用。也许我错过了什么？

# c++ - C ++程序使时间显示在背景上连续显示

> ID：11780447
> 
> 赞同：2
> 
> 时间：2012-08-02T15:06:21.043
> 
> 标签：c++

我想在 linux gcc 上编写一个 C++ 程序，这样时间应该显示在右上角（不断变化）并且还可以让其他进程继续进行。

例如：

我希望时间显示在右上角，还想在同一屏幕上执行一些操作，例如基本计算...

. 我知道使用此代码段连续显示时间

```
#include<iostream.h>
int main()
{
while(1)
{
system("clear");
system("date +%r&");
sleep(1); 
}
return 0;
} 
```

但每次，1）它清除屏幕，所以屏幕上的其他指令也被清除 2）我也想知道如何让两个进程同时运行？

使用 bg 等会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:21:15.893

There are two parts to your question.

First part: how to output time at a fixed location without disrupting other output on the screen.

Low-level approach:

*   On Windows, Win32 [WriteConsoleOutput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687404%28v=vs.85%29.aspx) and friends.
*   On Unix-ish systems, use [terminal escape sequences](http://en.wikipedia.org/wiki/ANSI_escape_code) to move the cursor around (although keep in mind that terminals differ in their support of escape sequences).

High-level approach: use a text-based UI library, such as [curses/ncurses](http://en.wikipedia.org/wiki/Ncurses).

* * *

Second part: how to update the time display in parallel to other activities.

In the simple case, you can just call time update function periodically from some places in your code you know will be executed regularly enough.

In the more complicated case, you will need to update time from a separate thread of execution. There is a lot said about multithreading, including [on this site](https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c); unfortunately I can't recommend any specific introductory material offhand, but there are many.

**[EDIT]** In case you just want to run another program in the background, as @ecatmur suggests, you don't need threads; just use `system("program &")`, or [fork](http://man.he.net/?topic=fork&section=all)+[exec](http://man.he.net/man3/exec) on Unix-ish systems and [_spawn](http://msdn.microsoft.com/en-us/library/20y988d2%28v=vs.80%29.aspx) on Windows.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:01:10.700

这是一个显示时间的。

```
#include <windows.h>
#include <conio.h>
#include <stdio.h>
#include<time.h>

int ch=0;
time_t now;

void gotoxy(int x, int y)
{
    COORD coord;
    coord.X = x; coord.Y = y;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
    return;
}

void setcolor(WORD color)
{
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),color);
    return;
}

void clrscr()
{
    COORD coordScreen = { 0, 0 };
    DWORD cCharsWritten;
    CONSOLE_SCREEN_BUFFER_INFO csbi;
    DWORD dwConSize;
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

    GetConsoleScreenBufferInfo(hConsole, &csbi);
    dwConSize = csbi.dwSize.X * csbi.dwSize.Y;
    FillConsoleOutputCharacter(hConsole, TEXT(' '), dwConSize, coordScreen, &cCharsWritten);
    GetConsoleScreenBufferInfo(hConsole, &csbi);
    FillConsoleOutputAttribute(hConsole, csbi.wAttributes, dwConSize, coordScreen, &cCharsWritten);
    SetConsoleCursorPosition(hConsole, coordScreen);
    return;
}

void getkey(void)
{
  if (kbhit())
  {
    ch=getch();

  }
}

int main(void)
{

    while (ch!=27)
    {
        getkey();   
        time(&now);

        gotoxy(50,1) ;
        setcolor(31);
        printf("%s", ctime(&now));
        setcolor(0);
    }

    setcolor(7);
    clrscr();

    gotoxy(2,23) ;
    return 0;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:13:22.807

这是我在 C++ 屏幕的某个位置写东西的问题和答案， [在不使用 Windows 句柄的情况下更改光标位置。Qbasic模仿慢](https://stackoverflow.com/questions/11794355/in-c-changing-cursor-location-without-using-the-windows-handle-qbasic-imitat)

这是@pumpkins 的线程问题 在线程 [中运行函数](https://stackoverflow.com/questions/7947561/running-a-function-in-a-thread)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:31:39.780

这不是一个小问题，因为在 Unix 下，程序在运行时会完全控制终端，这意味着您运行的任何程序都会假设它可以使用您显示时钟的空间，并且会进一步假设当它将光标定位在特定位置时，它将保持在那里。

让其他程序避开特定区域的唯一方法是首先不让他们访问终端，而是给他们一个*伪终端*并解释他们写入的所有内容（这就是两者`xterm`的`screen`工作方式）；这很重要，因为还有很多控制序列用于设置前景色和背景色、重新定位光标、更改自动滚动的区域等）。

# wordpress - 无法从分类学中获取帖子以显示？

> ID：11780448
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:24.860
> 
> 标签：wordpress, taxonomy

我有一个名为“产品”的 wordpress 分类法。我知道我的分类的模板文件将是 taxonomy-product.php 但是，当我使用默认的 wordpress 帖子循环时，它会显示来自默认“帖子”分类的帖子，而不是我自定义的“产品”。

我怎样才能解决这个问题？这是我放在 taxonomy-product.php 中的代码

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<div class="product">
<?php the_post_thumbnail();?>
<h2 class="product-title">
<a href="<?php the_permalink() ?>"><?php the_title(); ?></a>
</h2>
<a class="product-view" href="<?php the_permalink() ?>">View Product</a>
</div>
<?php endwhile; else: ?>
<p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:35:32.393

Carly，您遇到的问题是您没有包括您想要在循环内部循环的分类法。试试这个：

```
<?php

$args = array( 'product' => 'example-product' );
$loop = new WP_Query( $args );

while ( $loop->have_posts() ) : $loop->the_post();

<div class="product">

    <?php the_post_thumbnail();?>

    <h2 class="product-title"><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>

    <a class="product-view" href="<?php the_permalink() ?>">View Product</a>

</div>

<?php endwhile; else: ?>

<p><?php _e('Sorry, no posts matched your criteria.'); ?></p>

endwhile;

?> 
```

# c# - 为什么 .NET 设计者不在 System 命名空间中保留所有异常？

> ID：11780454
> 
> 赞同：1
> 
> 时间：2012-08-02T15:06:32.547
> 
> 标签：c#, namespaces

今天我在 C# 中工作并试图抓住一个`FileNotFoundException`. 但直到我添加`using System.IO`.

为什么被`FileNotFoundException`包含在`System.IO`命名空间中而不是`System`命名空间中？

我知道这`FileNotFoundException`将仅由 IO 引起，因此可能是原因。但另一方面，所有`Exception`s 不应该都在`System`命名空间中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:11:14.433

属于一起的代码应该放在一起。这是OOP所属[的模块化编程的关键方面之一。](http://en.wikipedia.org/wiki/Modular_programming#Key_aspects)

中的代码`System.IO`是可能抛出 的代码`FileNotFoundException`，而不是任何其他代码。

`SqlException`与命名空间中的方式相同`System.Data.SqlClient`。

将所有类型的异常放在一起是没有意义的，特别是对于特定于某些用途（如数据库访问）的异常类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:11:12.460

> 我知道这`FileNotFoundException`将仅由 IO 引起，因此可能是原因。但另一方面，不应该把所有的异常都放在异常下吗？

下面是显示位置的层次结构`FileNotFoundException`。因此，要回答您的问题，它是`Exception class`

```
System.Object 
  System.Exception
    System.SystemException
      System.IO.IOException
        System.IO.FileNotFoundException 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:12:22.907

可以这样想：您自己创建自己`CustomClass`的`CustomNamespace`. `CustomException`将您定义在其中是否有意义，`CustomNamespace`因为这是理解其上下文的地方？

另外，想象一下如果每个异常类型都定义在一个地方。一团糟！

我们使用[命名空间](http://en.wikipedia.org/wiki/Namespace)来为我们提供**上下文**并在**逻辑上组织**我们的类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T15:12:37.840

[`FileNotFoundException`](http://msdn.microsoft.com/en-us/library/System.IO.FileNotFoundException.aspx)是派生自[`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.aspx)（或更准确地说，派生自最终派生自 的类链）的类[`Exception`。](http://msdn.microsoft.com/en-us/library/system.exception.aspx)除非您正在谈论使其成为内部类，否则您不能真正将其置于[`FileNotFoundException`](http://msdn.microsoft.com/en-us/library/System.IO.FileNotFoundException.aspx)“之下” 。[`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.aspx)但这需要将它放在与 相同的程序集中[`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.aspx)，这根本无法扩展。当工作的团队`System.SomeNewFeature.dll`想要创建一个异常时，他们无法将其放入`mscorlib.dll`-[`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.aspx)它必须放入他们的代码中。

除了这样做的必要性之外，他们还可以将它推到他们想要的任何名称空间中。但这只是从分组/组织的角度来看才有意义。您只能（快速）访问与[`Exception`](http://msdn.microsoft.com/en-us/library/system.exception.aspx)您正在处理的内容相关的 s。如果他们都在，`System`那将是疯狂的复杂。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T15:13:42.160

通常，您希望将您的异常保持在他们处理的范围内（保持您的代码分组）。如果你想一想，put`FileNotFoundException`是有意义的，`System.IO`因为它处理文件系统交互。即使异常不在`System.Exception`命名空间中，它仍然继承自 System.Exception。其他一些代码不太可能抛出`FileNotFoundException`. 就像与文件系统交互的东西不太可能抛出一个`System.Net.WebException`

# objective-c - 如何将 NSData 加载到 AVPlayerItem 中？

> ID：11780455
> 
> 赞同：5
> 
> 时间：2012-08-02T15:06:39.430
> 
> 标签：objective-c, ios, cocoa-touch, nsdata, avplayer

[这是我关于如何在 iOS 中加密 mp3 文件的](https://stackoverflow.com/questions/11764177/how-to-encrypt-mp3-files-in-ios)帖子中的后续问题。

我将如何使用 NSData 而不是文件路径/URL 将曲目加载到 AVPlayerItem 中？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T15:17:45.020

```
[/*name of NSData*/ writeToFile:/*save file path*/ atomically: YES];
NSURL *filepath = [NSURL fileURLWithPath:/*save file path*/];
AVPlayerItem *player = [AVPlayerItem playerItemWithURL:filepath]; 
```

未经测试，但应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-05T05:00:56.357

更新[达斯汀](https://stackoverflow.com/a/11780663/840428)对 Swift 5 的回答：

```
var audioData: Data // some audio data
var fileURL: URL // some local path, probably appending NSTemporaryDirectory() 
try! audioData.write(to: fileURL)
let item = AVPlayerItem(url: fileURL) 
```

# eclipse-plugin - Rename a project from Eclipse plugin

> ID：11780458
> 
> 赞同：0
> 
> 时间：2012-08-02T15:06:43.967
> 
> 标签：eclipse-plugin, refactoring

I have a requirement to Rename a project from eclipse plugin. I have read this [article](http://www.eclipse.org/articles/article.php?file=Article-Unleashing-the-Power-of-Refactoring/index.html). I am new to plugin development. If anyone has prev experience can you share me the steps to be followed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:06:58.360

有 org.eclipse.ltk，它使您能够进行重构。在[这个线程](https://stackoverflow.com/questions/9129689/is-there-any-eclipse-refactoring-api-that-i-can-call-programmatically)中，您可以看到如何以编程方式执行重构，其中包括重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-01T17:39:44.497

I recently had to do this and this is what we did based on the above referred article.

```
RefactoringContribution contribution = RefactoringCore.getRefactoringContribution(RenameResourceDescriptor.ID);
RenameResourceDescriptor desc = (RenameResourceDescriptor) contribution.createDescriptor();
desc.setProject(null);
desc.setResourcePath(root.getProject(name).getFullPath());
desc.setNewName(newName);

RefactoringStatus status = new RefactoringStatus();
Refactoring refactoring = desc.createRefactoring(status);

refactoring.checkInitialConditions(monitor);
refactoring.checkFinalConditions(monitor);
Change change = refactoring.createChange(monitor);
change.perform(monitor); 
```

# spring - spring security - how to make another user log out

> ID：11780460
> 
> 赞同：3
> 
> 时间：2012-08-02T15:06:54.523
> 
> 标签：spring, spring-security

When I wish to remove a user from my application, I also want to log him out (as soon as he clicks on any link). I can clear my own security context by :

```
SecurityContextHolder.getContext().setAuthentication(null); 
```

but how should I clear his security context ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:19:05.523

*SecurityContextHolder.getContext().setAuthentication(null);* 将使当前会话无效。

SecurityContextHolder.getContext() 返回一个会话范围的 bean。所以调用 setAuthentication(null) 将使**当前用户的 session**无效。

因此，当用户单击链接并且他的会话将失效时，您可以从控制器调用它。

当然，您可能不想通过所有控制器分散代码来执行此操作。因此，您可以使用**过滤器**来代替。

在您的过滤器中，您可以保留一个单例 bean，其中包含您要使其无效的所有用户名的列表。然后根据列表检查当前会话并决定是否使会话无效。

# plone - Plone calendar invalid argument for year less then 1970

> ID：11780463
> 
> 赞同：1
> 
> 时间：2012-08-02T15:07:01.703
> 
> 标签：plone

We have recently upgraded our site to plone 4 and noticed our calender picker doesnt work if date is older then 1970\. After small debugging, noticed this line is issue

```
plone.app.form.widgets.datecomponents.py -> result method 
```

for date less then 1970 `date.timeTime` result negative value and localtime method expecting positive value I assume.

```
local_zone = date.localZone(localtime(date.timeTime())) 
```

Any help, idea or suggestion is always good

Here is traceback

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFFormController.ControllerPageTemplate, line 75, in __call__
  Module Products.CMFFormController.BaseControllerPageTemplate, line 31, in _call
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.PageTemplates.ZopePageTemplate, line 334, in _exec
  Module Products.PageTemplates.ZopePageTemplate, line 431, in pt_render
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 888, in do_useMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 954, in do_defineSlot
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 858, in do_defineMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 954, in do_defineSlot
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 946, in do_defineSlot
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 821, in do_loop_tal
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 888, in do_useMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 583, in do_setLocal_tal
  Module zope.tales.tales, line 696, in evaluate
   - URL: calendar_macros
   - Line 12, Column 4
   - Expression: <PythonExpr date_components_support_view.result(inputvalue, 0, starting_year, ending_year, future_years)>
   - Names:
      {'container': <ATFolder at /rcseng/account>,
       'context': <ATFolder at /rcseng/account>,
       'default': <object object at 0x01DE1830>,
       'here': <ATFolder at /rcseng/account>,
       'loop': {u'record': <Products.PageTemplates.Expressions.PathIterator object at 0x0E0BEAB0>},
       'nothing': None,
       'options': {'args': (),
                   'state': <Products.CMFFormController.ControllerState.ControllerState object at 0x0E287F30>},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x0E21E810>,
       'request': <HTTPRequest, URL=http://dev.rcseng.ac.uk/account/my_details>,
       'root': <Application at >,
       'template': <ControllerPageTemplate at /rcseng/account/my_details>,
       'traverse_subpath': [],
       'user': <PloneUser '227225'>}
  Module Products.PageTemplates.ZRPythonExpr, line 48, in __call__
   - __traceback_info__: date_components_support_view.result(inputvalue, 0, starting_year, ending_year, future_years)
  Module PythonExpr, line 1, in <expression>
  Module plone.app.form.widgets.datecomponents, line 97, in result
ValueError: (22, 'Invalid argument') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:10:40.070

进一步调查后，确实可以重现您报告的问题。*在除*Windows之外的大多数平台上，我都能很好地输入前纪元（1970 年 1 月 1 日）日期。

确实如此，Zope 的 DateTime 实例在纪元之前使用负秒值作为时间戳，但 Python*通常*`time.localtime`可以很好地处理负值：

 *```
>>> import time
>>> time.localtime(-10000)
time.struct_time(tm_year=1969, tm_mon=12, tm_mday=31, tm_hour=22, tm_min=13, tm_sec=20, tm_wday=2, tm_yday=365, tm_isdst=0) 
```

我已经在 Mac、FreeBSD 和 Linux 上的几个 python 2.x 版本中对此进行了测试。但是，当您在 Windows 上进行测试时，您确实会收到 ValueError。请注意，这是一个跨 python 和 Plone 版本的问题，这是一个特定于 Windows 的问题！

有问题的代码试图确定给定日期的本地时区，这可能是夏令时（夏令时）或冬令时。因此，在 Windows 上，我们也可以将日期中的年份换成当前年份，这样计算才能起作用。它*可能*会导致 DST 计算错误，具体取决于确切的当地时区，但由于*无论如何*您都无法获得 1970 年前日期的正确计算，因此这是一个很好的折衷方案。

我刚刚将第 97 行的以下替换提交给了 git（[commit 63b043a7ba](https://github.com/plone/plone.app.form/commit/63b043a7ba779116995757557254665efa531123)）：

```
try:
    local_zone = date.localZone(localtime(date.timeTime()))
except ValueError:
    # Dates before 1970 use a negative timeTime() value, which on
    # on some platforms are not handled well and lead to a ValueError.
    # In those cases, calculate the local timezone (which is DST based)
    # from the same date in the *current year* instead. This is better
    # than failing altogether!
    timeZoneDate = DateTime(localtime().tm_year, *date.parts()[1:])
    local_zone = date.localZone(localtime(timeZoneDate.timeTime())) 
```

在你的本地 egg 中使用它，或者等待包的 2.1 分支的新版本。*

# perl - 从 Perl 中的一行中删除所有内容，直到一个特定的单词

> ID：11780466
> 
> 赞同：0
> 
> 时间：2012-08-02T15:07:11.760
> 
> 标签：perl, pattern-matching

我需要从 Perl 中的一行中删除所有内容，直到一个特定的单词。假设我有这 3 行

```
Helicobacter Contig1
Helicobacter contig1
Helicobacter .Contig1 
```

我想要 contig1 或 Contig 1

我试过了

```
$test=s/^(.*?)^(contig|Contig)//g; 
```

但它不工作。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:10:37.003

删除第二个`^`

你的正则表达式应该是`s/^(.*?)(?=contig|Contig)//g;`

这`.*?`是非贪婪的，所以它会尽快停止（即当它看到 contig 或 Contig 时）。您还可以使用`\i`修饰符使匹配不区分大小写，因此您不必检查两个不同的字符串。

# css - IE8中的CSS3 PIE多个背景-没有重复-x

> ID：11780469
> 
> 赞同：0
> 
> 时间：2012-08-02T15:07:16.520
> 
> 标签：css, image, background, css3pie, background-image

我尝试在 CSS3 PIE 中使用多个背景。它适用于 IE7，但不适用于 IE8。我的意思是在 IE8 中我可以使用 no-repeat、repeat 和 repeat y，但浏览器不会呈现 repeat-x 背景。它是一个错误吗？这是一些代码：

```
#footer .links li {
    background: url('../images/common/border_dashed.png') repeat-x, 
                url('../images/common/bullet_marker2.png') 9px 17px no-repeat;
    -pie-background: url('_ui/images/common/bullet_marker2.png') 9px 17px no-repeat, 
                     url('_ui/images/common/border_dashed.png') repeat-x;
    behavior: url(PIE.htc);
} 
```

我尝试使用底部/顶部和像素位置。我也在试验 z-index 和 position 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:38:34.477

好的，我不知道 ie8 中的真正问题是什么，但这里有解决方案。对于 IE7 CSS3 PIE 效果很好，我注意到 IE8 支持 :before :)。所以我用它来添加具有背景和适当尺寸的新块元素。它仍然没有显示，所以经过几分钟的实验，我发现 content: "" 解决了这个问题。这是我的一些背景代码（页脚的顶行和页脚之间`<li>`的行）：

```
.ie8 #footer:before {
    content: "";
    display: block;
    width: inherit;
    height: 10px;
    background: url('../images/common/border_dashed.png') 0 4px repeat-x;
}

.ie8 #footer li {
    position: relative;
}

.ie8 #footer .nav li a:before,
.ie8 #footer .procedures li a:before,
.ie8 #affiliations ul:before {
    content: "";
    position: absolute;
    display: block;
    width: 212px;
    height: 1px;
    background: url('../images/common/border_dashed.png') 0 0 repeat-x;
}

.ie8 #footer .nav li a:before,
.ie8 #footer .procedures li a:before {
    margin: -10px 0 0 -27px;
}

.ie8 #affiliations ul:before {
    margin-top: -5px;
} 
```

# c++ - 无法在 VS 2010 中设置 getter 和 setter

> ID：11780470
> 
> 赞同：0
> 
> 时间：2012-08-02T15:07:18.367
> 
> 标签：c++, visual-studio

我正在尝试为数组设置 getter 和 setter - 我试图右键单击变量以找到重构它的选项（似乎没有这样的选项）。我也尝试输入“代码编辑器”但没有似乎在工作。请问我可以得到帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:09:10.520

这不适用于 VS2010 中的 C++ 项目，它仅适用于 C# 项目。

# css - 防止跨度与 div 重叠

> ID：11780472
> 
> 赞同：1
> 
> 时间：2012-08-02T15:07:20.643
> 
> 标签：css, html

我有一个非常接近的 div 容器和一个 span 容器（左侧是 span，右侧是 div）。有没有办法让跨度意识到它何时在 div 之内，比如说 5px，以便它进入下一行？

在图中，左侧框是跨度容器将包含文本的位置。右边的框是文本不能继续的div容器

```
_______________________
|                     |
|                     |
|                     |
|                     |
|                     |
|                     |
|                     |
|                     |
|                     |
|              -----------------------
|              |                     |
|              |                     |
|              |                     |
|              |                     |
|              |                     |
_______________|                     |
               |                     |
               |                     |
               |                     |
               ----------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:08:46.293

将跨度粘贴在另一个 div 中并在其上放置一个浮点数

html:

```
<div class="LeftFloat">
   <span>
   </span>
<div> 
```

CSS：

```
.LeftFloat
{
   float:left;
} 
```

# javascript - Javascript 闭包、“this”关键字和变量命名空间

> ID：11780478
> 
> 赞同：2
> 
> 时间：2012-08-02T15:07:43.087
> 
> 标签：javascript, closures, this, naming

我试图了解`this`关键字的工作原理。

这篇文章[this 关键字](http://www.quirksmode.org/js/this.html)声明

“在 JavaScript 中，this 总是指我们正在执行的函数的“所有者”，或者更确切地说，指的是函数作为方法的对象。”

```
function someClosure() {
    var myVal0, myVal1, myVal2;

    init = function (myVal0, myVal1, myVal2) {

        myVal0 = myVal0;
        this.myVal1 = myVal1;
        this.myVal2 = myVal2;

    };

    getMyVal0 = function() { return myVal0 };
    getMyVal1 = function() { return myVal1 }
    getMyVal2 = function() { return this.myVal2 }
}; 
```

我猜`getMyVal0`是因为`undefined`命名`init()`冲突（分配不明确）而被调用。

但是（在调用之后`init()`）为什么`getMyVal1`返回`undefined`？引用`myVal1`不应含糊不清。Javascript 是否需要明确使用`this`？`getMyVal2`返回预期值，但我很惊讶我需要明确的`this`.

请澄清这种行为。

最终，我试图在初始化成员变量时为函数参数建立一个命名约定。按照行业惯例，IRR 是 IRR，它似乎`this`应该允许我避免为变量使用两个名称（而不总是用 . 引用成员变量`this`。）做我想做的事情的约定是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:11:41.540

那么PPK在那篇文章中根本不正确。指针的`this`值在**每次函数调用**时重新确定。JavaScript 中没有“方法所有权”之类的东西。当`this`作为对象属性引用的结果调用方法时，指针会获得一个值，这是真的，但同一个方法可以是许多不同对象的属性。

`this`除此之外，重要的是要理解构造函数中的局部变量与对象所指的对象属性完全不同。那是，

```
function Constructor() {
  var x, y;

  x = "whatever";
} 
```

在该代码中，变量“x”和“y”是局部变量，而**不是**对象的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:13:12.550

ECMAscript 2-6-2 第 3 版以及 ES5 中的`var`关键字几乎只说“*在当前上下文中声明该变量*”。`this`另一方面总是指“*调用的对象*”（我喜欢怎么称呼它），这是另一回事。

`context`for 函数不能通过 Javascript 本身直接访问，它只存在于底层( `lexicalEnvironment`ES5) 或`Execution Context -> Activation Object`(ES3) 中。

因此，通过显式调用，`this.xxx`您正在读取和写入 OOI（根据调用方法的方式，它可能会发生变化**）**。持有`"Activation Object"`人

*   形式参数
*   声明的变量`var`
*   函数声明

所有这些东西都**没有**存储在 . 引用的对象中`this`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:12:02.997

阅读MDN 上的[关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)[介绍`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)。

的值`this`取决于您如何调用该函数。但是您根本不调用`init`，并且所有变量仍然是`undefined`.

> 按照行业惯例，`this`应该允许我避免为变量提供两个名称

`this`JavaScript 中的不与`this`Java 等其他语言不同。它不会让您从更高的范围访问变量。在您的情况下，`init`函数的参数只是隐藏变量`myClosure`- 您无法访问它们。如果需要，您需要重命名它们。使用这个脚本：

```
var init, getMyVal; // global, or at least "outer", variables

function closure() {
    var myVal, myVal2; // scoped to the closure

    // all the following function can access them
    init = function(val, myVal2) {
        myVal = val; // assign the argument to the closure variable
        // myVal2 === myVal2 - sorry, this only refers to the argument
    };
    getMyVal = function() {
        return myVal; // get the closure variable
    };
};
closure(); // execute it - you might also have used a immediately-executing function

init("some value");

getMyVal(); // "some value" 
```

顺便说一句，您可以将`closure`and`init`只调用一个函数：

```
var getMyVal;
function initClosure(myVal) {
    // the argument is scoped to this function, like a var declaration

    getMyVal = function() { return myVal; };
}
initClosure("some value");

getMyVal(); // "some value" 
```

# java - HSQL 中缺少用于测试的序列

> ID：11780493
> 
> 赞同：7
> 
> 时间：2012-08-02T15:08:37.523
> 
> 标签：java, database, oracle, spring, hsqldb

我有一个 Oracle 数据库，我必须在其中使用序列作为主键。这一切都很好，因为我可以控制序列号。我的问题是我的测试。使用 Spring 我创建了一个 HSQL 数据库并对此进行测试。这个数据库是通过查看我所有的实体来构建的。为了使用 Oracle，我的所有实体都指定了一个序列名称。问题是，当我构建 HSQL 数据库时，它找不到序列（我期望的）我的测试通过了，但我最终在日志中发现了很多垃圾。日志中充满了这类消息。

```
WARN JDBCExceptionReporter:233 - SQL Error: -5501, SQLState: 42501
ERROR JDBCExceptionReporter:234 - user lacks privilege or object not found: GENDERS_SEQ 
```

有谁知道如何消除这些虚假错误？我可以让 HSQL 忽略这些序列吗？有趣的是，在测试中我可以插入 HSQL 数据库，所以它必须使用自己的内部主键生成器。

关于如何从日志中删除此垃圾的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:12:48.090

我通过手动创建序列作为测试脚本的一部分解决了这个问题。不理想，因为我宁愿 Spring/HSQL 组合设置它。我的代码是：

```
for (String sequence : sequences) {
    entityManager.createNativeQuery("DROP SEQUENCE " + sequence + " IF EXISTS").executeUpdate();
    entityManager.createNativeQuery("CREATE SEQUENCE " + sequence + " as INTEGER").executeUpdate();
} 
```

其中序列是一个字符串列表，它们是序列名称。

我使用这是每个测试类的@BeforeClass 方法。不理想，但确实解决了问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:28:01.157

改用[H2 数据库](http://www.h2database.com/html/main.html)；它有一个称为“[兼容模式](http://www.h2database.com/html/features.html#compatibility)”的特性，在该特性中它的行为类似于 Oracle 或 HSQL。

选择 Oracle 模式时，您应该能够使用您在生产中使用的相同脚本（或 Hibernate 设置）来初始化数据库。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-05T17:25:10.877

您可以通过脚本构建自己的内存数据库：[how-to-initialize-in-memory-hsqldb-using-script-via-spring](https://stackoverflow.com/questions/9329283/how-to-initialize-in-memory-hsqldb-using-script-via-spring)。

但我更喜欢使用[arquillian](http://www.jboss.org/arquillian.html)进行数据集成测试。

披露：不适用于 arquillian。

# asp.net - 无效的 URI：无法确定 URI 的格式

> ID：11780495
> 
> 赞同：1
> 
> 时间：2012-08-02T15:08:43.507
> 
> 标签：asp.net, uri

在我在 IIS 7 中设置的 Web 应用程序中，我在导航到此 URL 时收到标题中的错误：

```
http://localhost/EnglewoodCO/Default.aspx 
```

但是，当我转到此 URL 时没有问题并且页面正确加载：

```
http://localhost/EnglewoodCO/Default.aspx?App=Admin 
```

有人可以给我一些关于检查什么的想法吗？

唯一想到的是，可能在某个 .config 文件中的某个路径设置不正确。我不知道还有什么要检查的，我只是希望有人可能有另一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:25:31.947

通常，堆栈跟踪对于识别问题非常有帮助。

如果您使用的是[Uri 类](http://msdn.microsoft.com/en-us/library/txt7706a)，您可能需要检查以下问题： [无效的 URI：无法确定 URI 的格式](https://stackoverflow.com/questions/2887924/invalid-uri-the-format-of-the-uri-could-not-be-determined)

# web-services - Axis2 Web 服务客户端失败 AxisFault：地址已在使用中：NET_Bind

> ID：11780498
> 
> 赞同：1
> 
> 时间：2012-08-02T15:08:49.257
> 
> 标签：web-services, tomcat, maven, axis2

我正在使用 Axis 2 和 tomcat maven 插件（使用 Eclipse 嵌入式 Maven 启动）开发 Web 服务。出于测试目的，我使用 AXIOM 开发了一个 Web 服务客户端。

**当我在我的系统（Windows 7 Pro）上运行客户端时，我得到了各种行为，其中大多数是失败的：**

```
org.apache.axis2.AxisFault: Address already in use: NET_Bind
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:197)
    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:404)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:231)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
    at com.nm.bdl.Launcher.main(Launcher.java:82)
Caused by: java.net.BindException: Address already in use: NET_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:398)
    at java.net.Socket.bind(Socket.java:582)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:615)
    at org.apache.commons.httpclient.protocol.ReflectionSocketFactory.createSocket(ReflectionSocketFactory.java:139)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:125)
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.open(MultiThreadedHttpConnectionManager.java:1361)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
    ... 10 more 
```

在极少数情况下，客户端程序成功到达 Web 服务。

Web 服务和客户端程序运行良好，我在其他计算机上都进行了测试（仍然是 Windows 7 Pro）。当我从另一台计算机成功运行 Web 服务客户端时，它也可以工作。

这是 pom.xml 中 tomcat 插件的定义：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>        
    <dependencies>
      <dependency>
          <groupId>jaxen</groupId>
          <artifactId>jaxen</artifactId>
          <version>full</version>
      </dependency>
    </dependencies>       
    <configuration>         
      <server>tomcat-development-server</server>
        <port>9966</port>
        <path>/</path>
        <systemProperties>
            <logs.dir>logs</logs.dir>
        </systemProperties>
        <useNaming>true</useNaming>
        <contextFile>${basedir}/src/test/resources/tomcatconf/context.xml</contextFile>
        <!-- 
        <configurationDir>${basedir}/src/main/tomcatconf</configurationDir>
         -->
    </configuration>
    <executions>
      <execution>
        <id>run-tomcat</id>
        <phase>pre-integration-test</phase>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

Web 服务客户端程序：

```
 static String address_WS   = "http://localhost:9966/services/GetGedFile";

  /**
   * @param args
   */
  public static void main(String[] args) {

    final EndpointReference targetService = new EndpointReference(address_WS);

    /* ... */

    try {
      Options options = new Options();

      ServiceClient client = new ServiceClient();
      options.setTo(targetService);
      options.setTransportInProtocol(Constants.TRANSPORT_HTTP);
      options.setProperty(HTTPConstants.REUSE_HTTP_CLIENT, "true");
      options.setTimeOutInMilliSeconds(360000);

      client.setOptions(options); 

      OMElement result = client.sendReceive(serviceOp);

      String response = result.getFirstElement().getText();
      System.err.println("WS call result: " + response);

      OMNode node = result.getFirstElement().getFirstOMChild();
      if (node instanceof OMText) {                  
        OMText txt = (OMText) node;                  

        String data = txt.getText();
        byte[] dataBytes = Base64.decode(data);

        String realString = new String(dataBytes,"UTF-8");
        System.out.println("pseudo binary data received : " + realString);
      }

    } catch(AxisFault af) {
      af.printStackTrace();
    } catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }
  } 
```

我试图清理 Windows 服务，停止杀毒软件，使用其他端口（不同于端口 9966），用 IP 地址替换 localhost ：徒劳。我已经使用 TCPView 监控了我的系统，以检查轴 Web 服务使用的端口是否与在 tomcat 插件中配置的端口相同。

请问还有什么想法吗？

编辑：另一个错误堆栈跟踪

```
log4j:WARN No appenders could be found for logger (org.apache.axis2.context.AbstractContext).
log4j:WARN Please initialize the log4j system properly.
org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxIOException: Unrecognized Windows Sockets error: -1: socket available
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:123)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
    at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
    at com.nm.bdl.Launcher.main(Launcher.java:82)
Caused by: org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxIOException: Unrecognized Windows Sockets error: -1: socket available
    at org.apache.axiom.om.impl.llom.factory.AbstractOMMetaFactory.createXMLStreamReader(AbstractOMMetaFactory.java:63)
    at org.apache.axiom.om.impl.llom.factory.AbstractOMMetaFactory.createSOAPModelBuilder(AbstractOMMetaFactory.java:129)
    at org.apache.axiom.om.OMXMLBuilderFactory.createSOAPModelBuilder(OMXMLBuilderFactory.java:426)
    at org.apache.axiom.om.OMXMLBuilderFactory.createSOAPModelBuilder(OMXMLBuilderFactory.java:405)
    at org.apache.axis2.builder.SOAPBuilder.processDocument(SOAPBuilder.java:55)
    at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:179)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:108)
    ... 8 more
Caused by: com.ctc.wstx.exc.WstxIOException: Unrecognized Windows Sockets error: -1: socket available
    at com.ctc.wstx.stax.WstxInputFactory.doCreateSR(WstxInputFactory.java:548)
    at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:604)
    at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:629)
    at com.ctc.wstx.stax.WstxInputFactory.createXMLStreamReader(WstxInputFactory.java:324)
    at org.apache.axiom.util.stax.wrapper.XMLInputFactoryWrapper.createXMLStreamReader(XMLInputFactoryWrapper.java:95)
    at org.apache.axiom.util.stax.wrapper.WrappingXMLInputFactory.createXMLStreamReader(WrappingXMLInputFactory.java:116)
    at org.apache.axiom.util.stax.wrapper.XMLInputFactoryWrapper.createXMLStreamReader(XMLInputFactoryWrapper.java:95)
    at org.apache.axiom.util.stax.wrapper.WrappingXMLInputFactory.createXMLStreamReader(WrappingXMLInputFactory.java:116)
    at org.apache.axiom.util.stax.wrapper.XMLInputFactoryWrapper.createXMLStreamReader(XMLInputFactoryWrapper.java:95)
    at org.apache.axiom.om.util.StAXUtils$1.run(StAXUtils.java:201)
    at java.security.AccessController.doPrivileged(AccessController.java:241)
    at org.apache.axiom.om.util.StAXUtils.createXMLStreamReader(StAXUtils.java:197)
    at org.apache.axiom.om.impl.llom.factory.AbstractOMMetaFactory.createXMLStreamReader(AbstractOMMetaFactory.java:55)
    ... 15 more
Caused by: java.net.SocketException: Unrecognized Windows Sockets error: -1: socket available
    at java.net.PlainSocketImpl.socketAvailable(Native Method)
    at java.net.PlainSocketImpl.available(PlainSocketImpl.java:487)
    at java.net.SocketInputStream.available(SocketInputStream.java:246)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:332)
    at org.apache.commons.httpclient.WireLogInputStream.read(WireLogInputStream.java:69)
    at org.apache.commons.httpclient.ChunkedInputStream.read(ChunkedInputStream.java:182)
    at java.io.FilterInputStream.read(FilterInputStream.java:134)
    at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInputStream.java:108)
    at java.io.FilterInputStream.read(FilterInputStream.java:134)
    at org.apache.axiom.om.util.DetachableInputStream.read(DetachableInputStream.java:147)
    at java.io.FilterInputStream.read(FilterInputStream.java:134)
    at java.io.PushbackInputStream.read(PushbackInputStream.java:182)
    at java.io.FilterInputStream.read(FilterInputStream.java:113)
    at com.ctc.wstx.io.UTF8Reader.loadMore(UTF8Reader.java:365)
    at com.ctc.wstx.io.UTF8Reader.read(UTF8Reader.java:110)
    at com.ctc.wstx.io.ReaderBootstrapper.initialLoad(ReaderBootstrapper.java:245)
    at com.ctc.wstx.io.ReaderBootstrapper.bootstrapInput(ReaderBootstrapper.java:132)
    at com.ctc.wstx.stax.WstxInputFactory.doCreateSR(WstxInputFactory.java:543)
    ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:15:35.923

我的问题是通过更改客户端程序的 java 运行时解决的。我使用的是 IBM Jdk 5（这是 Web 服务服务器的要求），然后我切换到了标准 Jre 6。

# sql - 如何判断，如果 SQL 语句返回列

> ID：11780500
> 
> 赞同：4
> 
> 时间：2012-08-02T15:08:57.140
> 
> 标签：sql, database, odbc

我正在编写代码，它可以通过 ODBC 执行 SQL 查询。

为此，我正在运行`SQLExecDirect()`，然后`SQLExtendedFetch()`获取结果列。

`INSERT`但是，诸如等语句`UPDATE`没有返回列，`SQLExtendedFetch`并以错误代码结束。

问题是：如何从查询中确定这种查询是否有返回列？

`Edit`：忘了提一下，对于查询，不应该有返回列 SQLGetDiagRec() 返回空错误消息（我已经在 MS SQL 驱动程序上测试过）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:46:07.960

调用 SQLNumResultCols，如果它显示 0，则表示没有结果集。

# sql - SQL：从 startdate 到 enddate 重复记录

> ID：11780503
> 
> 赞同：2
> 
> 时间：2012-08-02T15:09:03.470
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有以下数据结构

```
Customer | Order | Date       | Amount | TransactionType
AABB     | AB01  | 2012-06-01 | 3000   | Invoiced
AABB     | AB01  | 2012-06-05 | 3000   | Payment 
```

我需要从发票提交之日到付款之日重复我的数据。像这样;

```
Customer|Order|Date      | AmountDue|AmountPaid|DatePaid  |TransactionType
AABB    |AB01 |2012-06-01| 3000     |NULL      |2012-06-05|Invoiced
AABB    |AB01 |2012-06-02| 3000     |NULL      |2012-06-05|Invoiced
AABB    |AB01 |2012-06-03| 3000     |NULL      |2012-06-05|Invoiced
AABB    |AB01 |2012-06-04| 3000     |NULL      |2012-06-05|Invoiced
AABB    |AB01 |2012-06-05| 3000     |3000      |2012-06-05|Payment 
```

如何为这种情况创建 SQL 脚本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:37:05.083

尝试这个：

```
 create table cust1
       (
          Customer varchar(20),
          Orders varchar(10),
          Date datetime,
          Amount float,
          TransactionType varchar(50)
        )
        INSERT INTO cust1
        VALUES('AABB','AB01','2012-06-01',3000,'Invoiced'),
        ('AABB','AB01','2012-06-05',3000,'Payment')

           DECLARE @stDate datetime,@eddate datetime
select @stDate =MIN(date),@eddate =MAX(date) from cust1

select c1.Customer,c1.Orders,DATEADD(DD,number,@stDate) as [date],
amount amountDue,
CASE WHEN (DATEADD(DD,number,@stDate)) = @eddate then amount else null end as amountPaid,
@eddate as datepaid,
CASE WHEN (DATEADD(DD,number,@stDate)) <> @eddate then 'Invoiced' else 'Payment' end as TransactionType

from master..spt_values p inner join cust1 c1
on right(cast(c1.date as DATE),2) <= (case when p.number = 0 then 1 else p.number end)
where type='p'and DATEADD(DD,number,@stDate) <=@eddate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:57:32.610

这是一个尝试，假设有两行，已付款，发票行和付款行都存在，并且您正在尝试解决一个特定的客户/订单。

```
DECLARE @t TABLE
(
  Customer VARCHAR(32), 
  [Order] VARCHAR(32), 
  [Date] DATE, 
  Amount INT, 
  TransactionType VARCHAR(32)
);

INSERT @t VALUES
('AABB','AB01','2012-06-01',3000,'Invoiced'),
('AABB','AB01','2012-06-05',3000,'Payment');

;WITH t AS (SELECT * FROM @t AS t WHERE t.Customer = 'AABB' AND t.[Order] = 'AB01'),
rng AS (SELECT s = MIN([Date]), e = MAX([Date]) FROM t), 
n AS (SELECT TOP (DATEDIFF(DAY, (SELECT s FROM rng), (SELECT e FROM rng))) 
      n = ROW_NUMBER() OVER (ORDER BY [object_id]) - 1 FROM sys.all_objects
)
SELECT t.Customer, t.[Order], [Date] = DATEADD(DAY, n.n, t.[Date]), 
    AmountDue = Amount, AmountPaid = NULL, DatePaid = (SELECT e FROM rng), 
    t.TransactionType
FROM n CROSS JOIN t WHERE t.[Date] < (SELECT e FROM rng)
UNION ALL 
SELECT t.Customer, t.[Order], t.[Date], 
    AmountDue = NULL, AmountPaid = Amount, DatePaid = t.[Date], 
    t.TransactionType
FROM t WHERE t.[Date] = (SELECT e FROM rng); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:20:16.310

这是一个通用 SQL 版本，适用于没有一些更高级功能的 RDBMS。*还具有列出尚未*付款的帐户的额外好处。它确实假设您有一个可用的日历文件（真实的或临时的）

```
SELECT history.customer, history.order, calendar.calendar_date,
       CASE WHEN history.transaction_type = 'Invoiced'
            THEN history.amount END as amount_due,
       CASE WHEN history.transaction_type = 'Payment'
            THEN history.amount END as amount_paid,
       history.transaction_type
FROM Transaction_History as history
JOIN Calendar
ON calendar.calendar_date < CURRENT_DATE + 1 DAY
AND ((calendar.calendar_date >= history.date 
      AND history.transaction_type = 'Invoiced')
     OR (calendar.calendar_date = history.date
         AND history.transaction_type = 'Payment'))
LEFT JOIN Transaction_History as exclusion
ON exclusion.customer = history.customer
AND exclusion.order = history.order
AND exclusion.transaction_type = 'Payment'
AND history.transaction_type = 'Invoiced'
AND exclusion.date <= calendar.calendar_date
WHERE exclusion.customer IS NULL 
```

在我的系统 (DB2) 上测试 - SQLFiddle 似乎已关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:10:40.660

好的，我知道 OP 已经被选择了一个解决方案。但是我用行生成器发布了我自己的解决方案。我认为这是一种优雅的方式来做到这一点。未来在这里：

拳头，创建表格并填充值：

```
create table #t (
Customer char(4), [Order] char(4), [Date] date, Amount money,
TransactionType varchar(50)
)
insert into #t values 
( 'AABB','AB01','2012-06-01',3000,'Invoiced'),
( 'AABB','AB01','2012-06-05',3000,'Payment'); 
```

在这里，行生成器和它自己的查询：

```
declare @fromdate date
set @fromdate = '1/1/2001'
;WITH 
Nbrs_3( n ) AS ( SELECT 1 UNION SELECT 0 ),
Nbrs_2( n ) AS ( SELECT 1 FROM Nbrs_3 n1 CROSS JOIN Nbrs_3 n2 ),
Nbrs_1( n ) AS ( SELECT 1 FROM Nbrs_2 n1 CROSS JOIN Nbrs_2 n2 ),
Nbrs_0( n ) AS ( SELECT 1 FROM Nbrs_1 n1 CROSS JOIN Nbrs_1 n2 ),
Nbrs ( n ) AS ( SELECT 1 FROM Nbrs_0 n1 CROSS JOIN Nbrs_0 n2 ),
all_dates as (
  SELECT 
     dateadd( day, n , @fromDate) as [date]
  FROM ( SELECT ROW_NUMBER() OVER (ORDER BY n)
  FROM Nbrs ) D ( n )
),
all_intervals as (
  select 
     t1.customer, t1.[order], t1.[date] as date_from, t1.amount as amount_due,
     t2.[date] as date_paid
  from
     #t t1 inner join
     #t t2 on t2.TransactionType = 'Payment'
              and t1.customer = t2.customer and t1.[order] = t2.[order]
  where t1.TransactionType = 'Invoiced'
  )
select a.*, d.[date]
from all_intervals a
inner join all_dates d 
   on d.[date] between a.date_from and a.date_paid 
```

结果：

```
customer order date_from     amount_due date_paid     date          
-------- ----- ------------- ---------- ------------- ------------- 
AABB     AB01  2012-06-01 00:00:003000       2012-06-05 00:00:002012-06-01 00:00:00
AABB     AB01  2012-06-01 00:00:003000       2012-06-05 00:00:002012-06-02 00:00:00
AABB     AB01  2012-06-01 00:00:003000       2012-06-05 00:00:002012-06-03 00:00:00
AABB     AB01  2012-06-01 00:00:003000       2012-06-05 00:00:002012-06-04 00:00:00
AABB     AB01  2012-06-01 00:00:003000       2012-06-05 00:00:002012-06-05 00:00:00 
```

[你可以试试。](https://data.stackexchange.com/stackoverflow/query/76384)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T15:40:40.323

首先，您需要汇总获得发票日期和付款日期所需的数据。然后，您可以为其他记录生成序列。一种方法是使用递归 CTE。但是，我通常会执行以下操作：

客户 | 订购 | 日期 | 金额 | 交易类型

```
select Customer, Order,
       dateadd(d seqnum, InvoiceDate) as Date,
       InvoiceAmount as AmountDue,
       PaymentAmount as AmountPaid,
       PaymentDate as DatePaid,
       (case when dateadd(d seqnum, InvoiceDate) <> PaymentDate then 'Invoice' else 'Payment' end) as TransactionType
from (select customer, order,
             max(case when TransactionType = 'Invoice' then amount end) as InvoiceAmount,
             max(case when TransactionType = 'Payment' then amountend) as PaymentAmount
             max(case when TransactionType = 'Invoice' then date end) as InvoiceDate,
             max(case when TransactionType = 'Payment' then date end) as PaymentDate
      from t
      group by customer, order
     ) t join
     (select row_number() over (order by (select NULL)) - 1 as seqnum
      from INFORMATION_SCHEMA.Columns
     ) seq
     on dateadd(d, 1, InvoiceDate, seqnum) <= PaymentDate 
```

这是假设您有一个发票记录和一个付款记录。它还假设天数不是那么大。InformationSchema.Columns 的使用只是为了生成一个序列。

# java - JFreeChart - 图表的固定宽度

> ID：11780504
> 
> 赞同：2
> 
> 时间：2012-08-02T15:09:06.883
> 
> 标签：java, jfreechart, pie-chart

我正在使用 JFreeCharts PiePlot3D（类似于 PieChart）。我需要使用固定大小，因为图表被转换为 png 并在空间有限的报告中使用。

我的问题是，如果图例增长，实际图表的大小会缩小，直到几乎没用。这似乎是因为我在传说中有一些很长的描述，如果我只使用简短的描述，一切都很好。

现在我想知道是否有办法为图表的图例部分设置固定宽度？也许结合某种换行？一般来说，我不喜欢图表随着不同数据的增长和缩小，有没有办法静态设置大小？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:18:56.320

[JFreeChart 论坛](http://www.jfree.org/forum/viewtopic.php?f=3)上有各种与固定大小的绘图和/或图表相关的讨论。目前（直到 JFreeChart 10.14）在 JFreeChart 中不支持它。然而，paradoxoff 提出了一个[补丁，增加了对此的基本支持。](http://sourceforge.net/p/jfreechart/patches/236/)

hth，
-马丁

# google-cloud-messaging - 如果 GCM 服务器收到一条要发送到 Android 手机的消息，该消息是否会在服务器上继续存在，直到它到达客户端？

> ID：11780507
> 
> 赞同：1
> 
> 时间：2012-08-02T15:09:10.440
> 
> 标签：google-cloud-messaging

我的意思是，一旦消息到达服务器，我可以依靠 GCM 让消息在电话在线时到达电话吗？消息会在通电话的途中丢失吗？服务器和电话之间是否有确认（收到消息）？

我在文档中读到“GCM 不保证消息的传递或消息的顺序”，但我不明白这是否意味着在尝试拨打电话时消息可能会丢失，或者如果手机关机，消息会永远不要接电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:59:34.573

如果手机关闭并且您打开它，您将收到 GCM 消息，这与您在手机关闭时收到的电子邮件相同。当它说无法保证您会收到消息时，这意味着服务器无法保证将其发送出去。我记得看到`time to live`消息上有一条，但它不会过期一段时间

# ember.js - 为什么这个 Ember.TextArea 没有绑定到控制器内容？

> ID：11780511
> 
> 赞同：3
> 
> 时间：2012-08-02T15:09:14.990
> 
> 标签：ember.js

在我的 index.html 中，我有以下模板

```
<script type="text/x-handlebars">
    {{#with ChatApp.messagesController}}
      {{view Ember.TextArea valueBinding="content.message" rows="12" cols="70"}}
    {{/with}}
  </script> 
```

我的消息模型看起来像这样

```
ChatApp.Message = Ember.Object.extend({
  message: null
}); 
```

我的消息视图和控制器看起来像这样

```
ChatApp.messagesView = Ember.View.extend({});

ChatApp.messagesController = Ember.ArrayController.create({                                                                                           
  content: [],
  text: '',
  sendMessage: function() {
    var newChatText = this.get('text');
    socket.emit('sendchat', newChatText);
  },
  updateChat: function(username, text) {
    var controller = this;
    var content = this.get('content');
    var newMessage = ChatApp.Message.create({ message: text });

    content.push(newMessage);
    console.log("update " + controller.get('content'));
    controller.set('content', content);
  }
}); 
```

我可以在 console.log 中看到，每次更新都会将另一个模型对象添加到内容中，但文本区域没有更新

这是 jsFiddle 网址[http://jsfiddle.net/eDfKJ/](http://jsfiddle.net/eDfKJ/)

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:28:13.723

相反，我要做的是拥有一个计算属性，该属性绑定到内容并返回所有消息的聚合字符串，我会将 textarea 绑定到该属性。

就像是：

```
messages: function() {
    var content = this.get('content');
    var messages = "";

    ... loop the content and combine the messages string... 

    return messages;

}.property('content.@each') 
```

并在您的模板中：

```
 <script type="text/x-handlebars">
    {{#with ChatApp.messagesController}}
      {{view Ember.TextArea valueBinding="content.messages" rows="12" cols="70"}}
    {{/with}}
  </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:54:34.737

@ShaiRez 和 @sly7_7 共同努力，所以我想在这里包含最终的工作解决方案

```
<script type="text/x-handlebars">
    {{#with ChatApp.messagesController}}
      {{view Ember.TextArea valueBinding="messages" rows="12" cols="70"}}                                                                                                            
    {{/with}}
  </script>

ChatApp.messagesController = Ember.ArrayController.create({
  content: [],
  text: '',
  sendMessage: function() {
    var x = this.get('text');
    socket.emit('sendchat', x);
  },    
  updateChat: function(username, text) {
    var controller = this;
    var newMessage = ChatApp.Message.create({ message: text });
    controller.content.pushObject(newMessage);
  },
  messages: function() {
    var content = this.get('content');
    var messages = "";
    for(i = 0; i < content.length; i++) {                                                                                                                                            
      messages += content[i].message                                                                                                                                                 
      messages += '\n';
    }
    return messages;
  }.property('content.@each')
  }); 
```

# php - MySQL选择困难

> ID：11780512
> 
> 赞同：0
> 
> 时间：2012-08-02T15:09:16.377
> 
> 标签：php, mysql, sql, select

这可能很容易做到，但我什至不知道如何为搜索引擎制定我的问题（google | stackoverflow）。

我正在尝试根据数据库中的数据创建一个 HTML 表单。
我的问题：
我有这些列的表：

1.  ID
2.  文件
3.  语言
4.  ETC...

填充数据（示例）：

```
//no < table > here
//only **file** column is really important for my select (that I am asking for)

id |    file            |  lanugage     | etc
====================================================================
1  |about.php           | english       | something
2  |conta.php           | english       | something
3  |mysql.php           | hungar        | something
4  |mysql.php           | english       | something
5  |mysql.php           | french        | something
6  |blog.php            | french        | something 
```

选择后我要求数组应该是这样的

```
0 => about.php, 1 => conta.php, 2 => mysql.php, 3 => blog.php 
```

**解决方案**
我正在寻找SELECT 或SELECT t1.file as from table as t1 group by Files的**不同**选项， 这很快:) 谢谢

`Files`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:13:45.790

听起来您正在尝试从此表中获取文件的唯一（不同）值？

为此，您将使用以下查询

```
SELECT DISTINCT file from table_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:13:55.763

```
SELECT t1.file as `Files` from table as t1 group by Files 
```

这个查询很简单你应该学会使用sql。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:14:07.490

听起来你想

```
SELECT distinct(file) FROM mytable; 
```

然后使用

[mysql_fetch_array()](http://php.net/manual/de/function.mysql-fetch-array.php)

类似的东西：

```
$result=mysql_query("SELECT distinct(file) FROM mytable");
$arr=array();
while($row = mysql_fetch_array($result)){
    $arr[] = $row[0];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:14:20.273

试试这个：

```
$dbc = mysql_connect(SERVER, USERNAME, PASSWORD);
mysql_select_db($dbc, DATABASE);

$query = "SELECT DISTINCT `file` FROM `myTable`";
$result = mysql_query($dbc, $query); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T15:22:12.413

看起来只是想从“文件”列中提取所有值并将它们放在一个数组中。试试这个：

```
// define your database connection in the
// $SERVER, $USERNAME, $PASSWORD, and $DATABSE variables

$link = mysql_connect($SERVER, $USERNAME, $PASSWORD);
mysql_select_db($link , $DATABASE);

// I don't know what you're table name is, so put it in place of 'myTable'
$sql= "SELECT file FROM `myTable` GROUP BY file";
$result = mysql_query($link, $sql); 
```

这将只获取表中所有行的“文件”列，然后您需要遍历它们以将结果放入一个数组中：

```
$files_array = array();
while($result && $row = mysql_fetch_assoc($result)){
    $files_array[] = $row['file'];
} 
```

这应该输出您正在寻找的结果数组。

# c# - ASP 文本框不更新，何时检查 PostBack？

> ID：11780515
> 
> 赞同：4
> 
> 时间：2012-08-02T15:09:33.913
> 
> 标签：c#, asp.net, postback

# 问题

`<asp:TextBox>`没有更新。

## 的背景

我有一个页面叫做`Add_Edit_Drugs.aspx`. 可以通过以下两种方式之一访问此页面：用户可以单击`Add Drug`按钮，该按钮会触发`Response.Redirect("Add_Edit_Drugs.aspx")`命令。或者，他们可以点击一个超链接，将他们发送到同一个页面，如下所示：

```
<asp:HyperLinkField
            DataNavigateUrlFields="Drug_INDEX"
            DataNavigateUrlFormatString="Add_Edit_Drugs.aspx?Drug_INDEX={0}"
            DataTextField="Drug_Name"
            HeaderText="Drug Name"
            /> 
```

该`Page_Load`事件检查查询字符串是否存在，如果存在，它将使用数据库中的信息填充字段，否则将它们留空：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.QueryString["Drug_INDEX"] != null)
    {
        String sIndex = Request.QueryString["Drug_INDEX"].ToString();

        if (!Int32.TryParse(sIndex, out Drug_INDEX)) //Query String not a valid index
        {
            errorMessage.Text = "There was an error retrieving the record.";
            message.Text = "Please contact you IT administrator.";
        }
        else
        {

            Drug_IO dio = new Drug_IO();
            SqlDataReader drugDataReader = dio.Get_Drug(Drug_INDEX);
            if (drugDataReader.Read())
            {
                drugNameTxt.Text = drugDataReader["Drug_Name"].ToString();
                descriptionTxt.Text = drugDataReader["DrugDescription"].ToString();
                toxTxt.Text = drugDataReader["Toxicity"].ToString();
                hlTxt.Text = drugDataReader["HalfLife"].ToString();
                hlUnitsTxt.Text = drugDataReader["HalfLife_Units"].ToString();
                bindingTxt.Text = drugDataReader["ProteinBinding"].ToString();
                logPTxt.Text = drugDataReader["LogP"].ToString();
                molecularWeightTxt.Text = drugDataReader["MolecularWeight"].ToString();
                molecularFormTxt.Text = drugDataReader["MolecularFormula"].ToString();
                chemicalForumlaTxt.Text = drugDataReader["ChemicalFormula"].ToString();
            }
        }
    }
} 
```

然后我有我的`saveBtn_Click`方法：

```
protected void saveBtn_Click(object sender, EventArgs e)
{
    double halfLife;
    if (!Double.TryParse(hlTxt.Text, out halfLife))
        halfLife = Double.NaN;

    double logP;
    if (!Double.TryParse(logPTxt.Text, out logP))
        logP = Double.NaN;

    double moleWeight;
    if (!Double.TryParse(molecularWeightTxt.Text, out moleWeight))
        moleWeight = Double.NaN;

    if (-1 == Drug_INDEX) // New record to be inserted
    {
        Drug_Record dr = new Drug_Record(
            drugNameTxt.Text,
            descriptionTxt.Text,
            toxTxt.Text,
            halfLife,
            hlUnitsTxt.Text,
            bindingTxt.Text,
            logP,
            moleWeight,
            molecularFormTxt.Text,
            chemicalForumlaTxt.Text);

        if (dr.saveToDataBase())
        {
            Response.Redirect("List_Drugs.aspx");
        }
        else
        {
            message.Text = "An error occured saving the record.";
            errorMessage.Text = "Please contact your system admin.";
        }
    }
    else //record already exists in db, needs to be updated
    {
        Drug_Record dr = new Drug_Record(
            drugNameTxt.Text,
            descriptionTxt.Text,
            toxTxt.Text,
            halfLife,
            hlUnitsTxt.Text,
            bindingTxt.Text,
            logP,
            moleWeight,
            molecularFormTxt.Text,
            chemicalForumlaTxt.Text,
            Drug_INDEX);

        if (dr.updateRecord())
        {
            Response.Redirect("List_Drugs.aspx");
        }
        else
        {
            message.Text = "An error occur updating the record.";
            errorMessage.Text = "Please contact your system admin.";
        }
    }
} 
```

现在，我相信您已经猜到了，在我的`else //record already exists`块中，当我从用户编辑中获取（假定）新值时，我实际得到的是从数据库中检索到的原始信息。我从我所读到的内容中知道，问题在于是否`Page.IsPostBack`. 我签到了`Page_Load`。我签到了`saveBtn_Click`。我在创建新记录之前检查过，我在更新记录之前检查过。我结合了所有这些东西。我把它们倒过来了。无论我尝试了什么，都会发生以下两种情况之一：

1.  我得到了旧的信息。
2.  没有什么。

这个具体问题实际上是一个更大问题的症状——我（有点）理解 a`PostBack` *是*什么，但并不真正理解是什么*原因造成*的。在这种情况下，是什么导致了 PostBack，我什么时候需要检查它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:17:20.187

在您的页面加载中，您应该检查它是否是回发，`Page.IsPostBack`如果它不是回发，那么您应该对页面进行初始加载。如果是回发，则页面上的某个控件已启动服务器端事件，例如按钮单击。

在您的按钮单击中，您可以更新标签或文本框。每次回发时都会调用页面加载，因此请确保您没有运行两次初始化代码。

看起来您的页面加载正在为每个回发运行初始化，而您只想在初始加载时运行它。试试这个修改：

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack) {

        if (Request.QueryString["Drug_INDEX"] != null)
        {
            String sIndex = Request.QueryString["Drug_INDEX"].ToString();

            if (!Int32.TryParse(sIndex, out Drug_INDEX)) //Query String not a valid index
            {
                errorMessage.Text = "There was an error retrieving the record.";
                message.Text = "Please contact you IT administrator.";
            }
            else
            {

                Drug_IO dio = new Drug_IO();
                SqlDataReader drugDataReader = dio.Get_Drug(Drug_INDEX);
                if (drugDataReader.Read())
                {
                    drugNameTxt.Text = drugDataReader["Drug_Name"].ToString();
                    descriptionTxt.Text = drugDataReader["DrugDescription"].ToString();
                    toxTxt.Text = drugDataReader["Toxicity"].ToString();
                    hlTxt.Text = drugDataReader["HalfLife"].ToString();
                    hlUnitsTxt.Text = drugDataReader["HalfLife_Units"].ToString();
                    bindingTxt.Text = drugDataReader["ProteinBinding"].ToString();
                    logPTxt.Text = drugDataReader["LogP"].ToString();
                    molecularWeightTxt.Text = drugDataReader["MolecularWeight"].ToString();
                    molecularFormTxt.Text = drugDataReader["MolecularFormula"].ToString();
                    chemicalForumlaTxt.Text = drugDataReader["ChemicalFormula"].ToString();
                }
            }
        }
    }
} 
```

现在发生的情况是，当 PostBack 发生时，它不会运行初始化代码，它将继续到您的按钮单击事件，您可以在其中更新文本框的值。在这种情况下，PageLoad 确实是您需要检查它是否是回发的唯一地方，因为按钮事件只能由回发触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:14:39.890

在第一次初始化表单之前检查页面加载是否是回发。

```
if (!Page.IsPostBack && Request.QueryString["Drug_INDEX"] != null) 
```

我还建议阅读 asp.net 页面生命周期的工作原理。

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:16:14.647

是的，你确实有 PostBack 问题，当你第一次加载数据时，你必须放在！是回发。

```
if(!IsPostback)
{
   //First Load
   //Initialize Data
    if (Request.QueryString["Drug_INDEX"] != null)
    {
       ........

    }
} 
```

当你点击按钮时，你发布你的数据 => (IsPostBack == true) => (!IsPostBack == false) => 他没有经过这个初始化阶段

# php - Heroku ajax 调用返回错误

> ID：11780517
> 
> 赞同：0
> 
> 时间：2012-08-02T15:09:38.343
> 
> 标签：php, ajax, heroku

我有一个在专用服务器上完美运行的 php 应用程序。一旦我迁移到 heroku，ajax 调用就开始返回错误，例如无法加载。

例如下面的代码返回错误。Album_handle.php 文件存在于服务器上。

```
var url = "album_handle.php?id=" + album_images.id;
$('#ajaxholder').load(url, "",
        function(responseText, textStatus, XMLHttpRequest) {
            $("#dvloader").hide();
            if(textStatus == 'error') {
                $('#ajaxholder').html('<p>There was an error making the AJAX request</p>');
            }
        }
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:21:49.757

问题不在于heroku 中的ajax 调用。此处的 ajax 调用处理 php gd 函数。由于某些 php gd 函数在 heroku 上不起作用，因此提出了问题。

# performance - AMD Opteron 6172 上的 PAPI 性能计数器问题

> ID：11780520
> 
> 赞同：2
> 
> 时间：2012-08-02T15:10:08.470
> 
> 标签：performance, amd-processor, papi

我一直在尝试使用 AMD Opteron 6172 处理器上的性能计数器分析某些应用程序（用 C 编写），运行 Red Hat Enterprise Linux Workstation 版本 6.2（圣地亚哥）。

我正在使用 PAPI v4.1.3.0，它将 AMD 本机事件 CPU_CLK_UNHALTED 用于 PAPI_TOT_CYC（计算总周期）和 DATA_CACHE_ACCESSES 用于 PAPI_L1_DCA（计算 L1 数据缓存访问）。

我遇到的问题是，在某些情况下，缓存访问次数高于总周期数。据我了解，缓存访问不会停止 CPU，因此它应该适合总周期。此外，当将总周期除以 Opteron 6172 的时钟频率时，我得到了对执行时间的非常准确的估计，这让我认为总周期还可以，问题必须与数据缓存访问的计数有关。

我已经根据 papi 示例启动了所有内容，并且没有收到任何错误。非常感谢任何帮助或解释为什么会发生这种情况的原因，在此先感谢。

[http://support.amd.com/us/Processor_TechDocs/31116.pdf](http://support.amd.com/us/Processor_TechDocs/31116.pdf)

*   CPU_CLK_UNHALTED

*CPU 未处于暂停状态的时钟数（由于 STPCLK 或 HLT 指令）。注意：此事件允许系统空闲时间从 IPC（或 CPI）测量中自动排除，前提是操作系统在空闲时暂停 CPU。如果操作系统进入空闲循环而不是停止，则此类计算会受到空闲循环的 IPC 的影响。*

*   DATA_CACHE_ACCESSES

*为加载和存储引用访问数据缓存的次数。这可能包括某些微码暂存器访问，尽管这些通常很少见。每个增量代表一个八字节的访问，尽管指令可能只访问其中的一部分。本次事件为投机事件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:50:25.817

好的，这是我的猜测：

1.  如果数据不在缓存中，则缓存访问可能意味着 RAM 内存访问，因此可能会使 CPU 停滞。尝试测量最后一级缓存 (LLC) 未命中，一次 LLC 未命中意味着一次访问 RAM 内存。

2.  是否有其他程序同时执行？如果有，它们可能会停止处理器或生成您正在测量的缓存未命中。

3.  我很确定你可以在每个时钟周期发出一个加载和一个存储指令，因此每个时钟周期有 2 次缓存访问并不奇怪......

希望对您有所帮助...

# java - 在 JTree 节点中动态调整 JTextField 的大小

> ID：11780523
> 
> 赞同：6
> 
> 时间：2012-08-02T15:10:27.733
> 
> 标签：java, swing, resize, jtextfield, jtree

我正在使用带有一些 JLabels 和 JTextFields 的 JPanel 作为 JTree 中的编辑器和渲染器。

用户可以单击任何 JTextField 并修改文本。一切正常。

我所缺少的是如何在用户键入时动态调整（增长）JTextField 的大小。

下面是一个说明问题的小示例程序。单击即“颜色”并输入一些附加字符。JTextField 保持其大小，这是预期的，但我希望它能够增长和缩小以适应文本。

我尝试了不同的布局管理器，计算 JTextField 和 JPanel 的首选大小，调用 invalidate() 和 JPanel 和 Tree 等等，但没有成功。

有任何想法吗？

```
import java.awt.Component;
import java.util.EventObject;

import javax.swing.AbstractCellEditor;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTree;
import javax.swing.tree.TreeCellEditor;
import javax.swing.tree.TreeCellRenderer;

public class Tree {

    public static void main(final String[] args) {
        new Tree().grow();
    }

    private void grow() {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JTree tree = new JTree();
        tree.setEditable(true);
        tree.setCellRenderer(new SomeTreeCellRenderer());
        tree.setCellEditor(new SomeTreeCellRenderer());

        frame.add(new JScrollPane(tree));

        frame.pack();
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    private class SomeTreeCellRenderer extends AbstractCellEditor implements 
            TreeCellRenderer, TreeCellEditor {

        @Override
        public Object getCellEditorValue() {
            return null;
        }

        @Override
        public boolean isCellEditable(final EventObject event) {
            return true;
        }

        @Override
        public Component getTreeCellRendererComponent(
                final JTree tree, final Object value, final boolean selected, final boolean expanded, 
                final boolean leaf, final int row, final boolean hasFocus) {

            final JPanel panel = new JPanel();
            final BoxLayout layout = new BoxLayout(panel, BoxLayout.X_AXIS);
            panel.setLayout(layout);

            panel.add(new JLabel("Some text: "));
            panel.add(new JTextArea(String.valueOf(value)));

            return panel;
        }

        @Override
        public Component getTreeCellEditorComponent(
                final JTree tree, final Object value, final boolean isSelected,
                final boolean expanded, final boolean leaf, final int row) {

            return getTreeCellRendererComponent(tree, value, isSelected, expanded, leaf, row, false);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:30:57.533

发生的事情是拥有您的容器`panel`没有分配给它的布局管理器 - 因此在`panel`调整文本区域大小时不会调整大小。一个简单的解决方法是在文本区域调整大小时设置面板的大小。所以不要直接这样做：

```
 panel.add(new JTextArea(String.valueOf(value))); 
```

你可以这样做：

```
 JTextArea ta = new JTextArea(String.valueOf(value));
        ta.addComponentListener(new ComponentListener() {

            @Override
            public void componentResized(ComponentEvent e) {
                panel.setSize(panel.getPreferredSize());
            }

            @Override
            public void componentShown(ComponentEvent e) {}

            @Override
            public void componentMoved(ComponentEvent e) {}

            @Override
            public void componentHidden(ComponentEvent e) {}
        });

        panel.add(ta); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T17:20:57.507

为方便起见，这里使用 JTextField 而不是 JTextArea 的解决方案类似于已接受的解决方案，使用的信息来自：[change the size of JTextField on KeyPress](https://stackoverflow.com/questions/11716785/change-the-size-of-jtextfield-on-keypress/11722082#11722082)

```
final JPanel panel = new JPanel();
final BoxLayout layout = new BoxLayout(panel, BoxLayout.X_AXIS);
panel.setLayout(layout);

panel.add(new JLabel("Some text: "));

final JTextField field = new JTextField(String.valueOf(value));
final DocumentListener documentListener = new DocumentListener() {

    private void updatePanel() {
        panel.revalidate();
        panel.setSize(panel.getPreferredSize());
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        updatePanel();
    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        updatePanel();
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
    }
};

field.getDocument().addDocumentListener(documentListener);

panel.add(field); 
```

# rest - 建议使用自定义模板报告应用程序的架构

> ID：11780531
> 
> 赞同：1
> 
> 时间：2012-08-02T15:10:51.320
> 
> 标签：rest, architecture, reporting

让我放下我的要求，我们正在设计一个解决方案来满足非常动态的报告需求。这些数据目前是在 sqlite 数据库中生成的（他们将其称为多维数据集），因此服务器机器上有很多多维数据集。在这些立方体上创建的图表是在 Telerik 报告引擎上开发的。它们是一组访问多维数据集数据并为 UI 准备图表的 dll。保持不变的是模式。每种类型的立方体都有一定的模式并坚持下去。

之后时不时会有新的图表。我不想让它成为新框架的一部分，每隔一天就包含新的图表或图表模板。所以我打算将它托管在单独的服务中并调用该服务以从框架中获取数据并对其进行处理以创建图表。

现在的问题是要通过线路传输的数据的大小，在将任何业务逻辑应用于图表之前，它可能是巨大的。

那么有什么建议可以使它更“模块化”，可扩展，但以某种方式使其也可行。我的意思是这甚至是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:43:38.213

听起来您正计划从另一个系统“从下”读取数据库以绕过它的工作方式。这往往表明一个坏主意，但有时这是必要的。

如果您必须“通过网络”读取大量数据然后进行处理，听起来您需要某种类型的“同步”过程来提取数据并对其进行处理，与报告要求分开。然后，您的报告可以仅使用已处理的数据（这意味着它们将表现良好），并且同步过程可能需要提取数据并处理它以准备报告的时间。这可能需要另一个专门用于您正在创建的新报告的数据库/存储区域。

如果可以的话，最好继续按照预期的方式使用系统。这意味着该系统中将构建新的报告和数据“立方体”等。如果您打算每隔一天构建新报告，那么您正在考虑的解决方案与已经在运行的解决方案相比，您有什么收获？

# hadoop - 生成随机数据进行测试

> ID：11780533
> 
> 赞同：1
> 
> 时间：2012-08-02T15:10:53.117
> 
> 标签：hadoop, mapreduce, hive

我想用 Hadoop 运行一些测试，我有一个大型集群（大约 50 Tb），我想生成数据来运行一些测试。首先，我想测试配置单元的性能，因为我想生成结构化数据（CSV）。有人可以建议我实现这一目标的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:41:25.180

第一个问题是您想将 mapreduce 作业伪装成在没有任何数据的情况下启动映射器。默认情况下，它会为每个块启动 1 个地图任务，所以让我们愚弄一下吧。

为此，首先在 hdfs 中创建一些“假文件”

```
for i in {1..100}; do echo "hello $i" | hadoop fs -put - fakes/$i.txt ; done 
```

这实际上需要一段时间……也许几分钟。

然后，编写一个“读取”这些文件的 MapReduce 作业。在 Map 任务中，实际上不使用任何数据。在该 map 函数中生成随机数据，并将其写出 ( `context.write`)。当您的 MapReduce 作业运行时，它将启动 100 个地图任务，这些任务都将并行生成您的随机数据。

将reducer的数量设置为0，这里不需要。

# javascript - 触发和绑定到自定义事件？

> ID：11780536
> 
> 赞同：1
> 
> 时间：2012-08-02T15:10:57.073
> 
> 标签：javascript, jquery-plugins, jquery

我正在尝试编写一个基本对话框。我希望能够指定一个链接元素，单击该元素将启动一个对话框。

我使用对话框 HTML 中的数据属性指定此行为：

```
<a id="launch-dialog" href="#"></a>
<div class="dialog" data-behavior="dialog" data-trigger="#launch-dialog">
  <!-- dialog html -->
</div>

$(function(){
  $("[data-behavior='dialog']").dialog();
}); 
```

实际的 jQuery 扩展是我遇到问题的部分。要么`'dopen'`事件未在正文上正确触发，要么未正确设置事件绑定。上的点击事件`data-trigger`肯定会触发并被收听。任何想法为什么我从来没有看到“打开检测到”日志？

```
(function($) {
  var methods = {
    init: function(options) {

      if (this.data('trigger')) {
        // Add an event listener which causes the dialog to
        // open when the correct link is clicked.
        $(this.data('trigger')).on('click', function(e) {
          e.preventDefault();
          // Trigger a global dialog open event which the dialog can subscribe to.
          $('body').trigger('dopen');
        });
      }
    },
    // Various other methods not shown.
  };

  $.fn.dialog = function(method) {

    // Method handling code not shown...

    // Add handlers for custom events triggered on the body element.
    $('body').bind('dopen', function(e) {
      // This never happns:
      console.log("Open detected");
    });

  };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:04:27.957

我不小心没有在我的问题中提供足够的信息来解决问题。

我在哪里

```
# Method handling code not shown... 
```

在问题代码中，真正的代码有以下内容：

```
// If it corresponds to a method defined in the method object.
if (methods[method]) {
  return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
// Else, if we pass in an object and 
} else if ( _.isObject(method) || !method ) {
  return methods.init.apply( this, arguments );
} else {
  $.error( 'Method ' +  method + ' does not exist on jQuery.doalog' );
} 
```

如您所见，该片段具有三种可能的路径：

1.  返回方法调用的结果，
2.  返回方法调用的结果，
3.  引发异常。

控制流在这些路径中变得快捷，并且没有到达我尝试绑定侦听器的行。当然，永远不会解雇未绑定的侦听器。

解决方案是将绑定向上移动到初始化方法中：

```
 var methods = {
    init: function(options) {

      // Add handlers for custom events triggered on the body element.
      $('body').bind('dopen', function(e) {
        // Now it works!
        console.log("Open detected");
       });

      if (this.data('trigger')) {
        // Add an event listener which causes the dialog to
        // open when the correct link is clicked.
        $(this.data('trigger')).on('click', function(e) {
          e.preventDefault();
          // Trigger a global dialog open event which the dialog can subscribe to.
          $('body').trigger('dopen');
        });
      }
    },
    // Various other methods not shown.
  } 
```

# android - ImageView 没有填满整个宽度

> ID：11780538
> 
> 赞同：2
> 
> 时间：2012-08-02T15:11:01.220
> 
> 标签：android, android-layout

我正在为多个设备开发一个 Android 2.2 应用程序，但图像有问题。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:contentDescription="@string/layout_empty"
            android:src="@drawable/faqs" />

    </ScrollView> 
```

这是我在平板电脑上看到的：

![在此处输入图像描述](../Images/1103802ed75e32cc92b2619ecd284bd8.png)

它在我的 HTC Desire 上看起来很完美。

怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:44:13.957

添加`android:scaleType="fitXY"`到您的 ImageView

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:39:54.810

[请参阅此处](https://stackoverflow.com/questions/4236642/why-image-dont-fill-width)接受的答案。需要设置image view的layout_height为fill_parent

# android - 是否可以在小部件内以编程方式调整 TextView 的大小？

> ID：11780542
> 
> 赞同：3
> 
> 时间：2012-08-02T15:11:11.097
> 
> 标签：android, android-layout, android-widget

作为学习练习，我正在开发一个非常简单的原生 Android 小部件。

该小部件具有包含单个 ImageView 和单个 TextView 的 RelativeLayout。TextView 填充了从 Web 服务中提取的名称，而 ImageView 填充了相同的 url。

TextView 的位置如下：`android:layout_toRightOf="@+id/image"`

我的基本问题是尝试调整 TextView 的大小以适合其中的内容。我只能弄清楚如何在 TextView 布局 xml 中提供显式或继承的宽度。

我真正想要的是这样的：

![在此处输入图像描述](../Images/aedb11c63f5f7e3fd5d1f62412aea865.png)

似乎无法在小部件正在使用的 RemoteView 中获取 TextView 的句柄，因此我似乎无法即时调整它的大小。

有没有推荐的方法来实现上述布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:18:07.180

文本视图

```
android:layout_width="wrap_content"
android:layout_alignParentRight="true" 
```

图像视图

```
android:layout_toLeftOf="@+id/lTextView" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:18:35.567

就像 0gravity 建议的那样，android:layout_width = "wrap_content"。然后使用填充来调整文本周围的空间，直到看起来符合需要。

# wpf - 菜单定制

> ID：11780548
> 
> 赞同：1
> 
> 时间：2012-08-02T15:11:21.753
> 
> 标签：wpf, customization

我想在我的程序中重复 JetBrains dotPeek 的设计。我想知道`Menu`这些颜色的哪些属性：

![在此处输入图像描述](../Images/e5ea7beed1b607d08993665bb2dbdef0.png)

# php - PHP call_user_func with class and arguments

> ID：11780551
> 
> 赞同：8
> 
> 时间：2012-08-02T15:11:37.543
> 
> 标签：php, callback

I need to use call_user_func . I will need to call a function in a separate file in separate class with 5 arguments . I couldnt find any example here [http://php.net/manual/en/function.call-user-func.php](http://php.net/manual/en/function.call-user-func.php) . IS there any way to do this ?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T15:08:59.377

Personally I use `call_user_func_array`.

`$result = call_user_func_array(array($objectInstance, 'objectMethod'), array('parameter one', 'parameter two'));`

If the method is a static one, replace `$objectInstance` with the name of the class being used. You can also use stand-alone functions too:

`$result = call_user_func_array('functionName', array('parameter one', 'parameter two'));`

Hope this makes sense? :]

However in the future, try and show us what you have and haven't done :]

# php - 如何在 id 为第一个属性的 div 标签之间获取文本。仅使用正则表达式。

> ID：11780553
> 
> 赞同：1
> 
> 时间：2012-08-02T15:11:42.040
> 
> 标签：php, html

这是场景

我正在使用这个正则表达式来获取带有 id test 的 div 标签内的文本

```
<div id = "test">text</div>

$regex = "#\<div id=\"test\"\>(.+?)\<\/div\>#s"; 
```

我唯一的要求是在下面的场景中从 div 标签中获取文本

```
<div id="test" class="teating" style="color:red" etc etc .... more attributes > 
```

即 id 是 div 标签的第一个属性，后面可以跟 n 个属性。如何仅通过正则表达式从此类标签中提取文本。请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:14:48.057

使用这个正则表达式：

```
$regex = '#<div\s+.*?id="test".*?>(.*?)</\s*div>#ims'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:30:24.770

在 php 中：将 $replacement 定义为您的输入字符串。

```
$pattern = '#<div[^/>]*>([^<]*)</div>#';
$replacement = '\1';
$text = preg_replace($pattern, $replacement, $subject); 
```

# javascript - 对数组进行排序

> ID：11780555
> 
> 赞同：1
> 
> 时间：2012-08-02T15:11:43.723
> 
> 标签：javascript

我有以下数据：

```
var data = [[{x:"c", y:10}, {x:"a", y:20}, {x:"b", y:4}], [{x:"c", y:14}, {x:"a", y:22}, {x:"b", y:9}], [{x:"c", y:24}, {x:"a", y:65}, {x:"b", y:46}]] 
```

我需要根据最后一个数组元素的 'y' 属性值对每个数组（在父数组中）的 (x) 元素进行排序。结果将是：

```
[[{x:"c", y:10}, {x:"b", y:4}, {x:"a", y:20}], [{x:"c", y:14}, {x:"b", y:9}, {x:"a", y:22}], [{x:"c", y:24}, {x:"b", y:46}, {x:"a", y:65}]] 
```

有什么简单的方法可以做到这一点？这是数据的全局结构：

```
var data = [[{x:"x_1", y:}, {x:"x_2", y:},.. {x:"x_N", y:}], [{x:"x_1", y:}, {x:"x_2", y:},.. {x:"x_N", y:}], [{x:"x_1", y:}, {x:"x_2", y:},.. {x:"x_N", y:}]] 
```

我有一个由 3 个数组组成的数组，每个数组都包含 N 个哈希表。
我需要根据最后一个元素（数据 [2]）中的 'y' 键的值对所有哈希表中的元素进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:16:25.707

```
data.sort(function(a,b){return b.y-a.y}); 
```

[http://www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:17:52.713

我真的看不出如何存档演示结果的样子，但如果你想要你的文字所说的，这将完成这项工作。

**ASC**

```
data.sort(function(a, b) {
    return b[b.length-1].y - a[a.length-1].y;
}); 
```

**DESC**

```
data.sort(function(a, b) {
    return a[a.length-1].y - b[b.length-1].y;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:18:29.550

要获得预期的结果，您可以使用此算法。它只是对 in 中所有数组的循环`data`，并使用常见的[sort-by-function 对](https://stackoverflow.com/q/5421253/1048572)它们进行排序：

```
for (var i=0; i<data.length; i++)
    data[i].sort(function(a, b) {
        return (a.x < b.x) - (b.x < a.x);
    });

> JSON.stringify(data)
[[{"x":"c","y":10},{"x":"b","y":4},{"x":"a","y":20}],[{"x":"c","y":14},{"x":"b","y":9},{"x":"a","y":22}],[{"x":"c","y":24},{"x":"b","y":46},{"x":"a","y":65}]] 
```

请注意，它不是您试图描述的内容，而是按`x`属性反向排序。

* * *

编辑：现在我得到了任务。这是算法：

```
// get the last element and sort it
var last = data[data.length-1];
last.sort(function(a,b){ return a.y-b.y; });

// get the sort order:
var order = last.map(function(o){ return o.x; }); // ["c", "b", "a"]

// now, reorder the previous arrays:
for (var i=0; i<data.length-1; i++) { // sic: loop condition is correct!
    // create a map for the items by their x property
    var hash = data[i].reduce(function(map, o){
        map[o.x] = o;
        return map;
    }, {});
    // create the new array by mapping the order
    data[i] = order.map(function(x) {
        return hash[x];
    });
}; 
```

# linux - 写入fifo（命名管道）

> ID：11780556
> 
> 赞同：8
> 
> 时间：2012-08-02T15:11:49.510
> 
> 标签：linux, fortran, named-pipes, fortran90, gfortran

我正在尝试让一个 fortran 90 应用程序打开一个 fifo 并将格式化的数据写入其中。我已将其简化为一个最小的示例。让我们`foo.f90`成为以下程序：

```
program foo
  open(1,file='fifo',position='asis',action='write')
  write(1,*)'Hello, world!'
  write(1,*)'Goodbye.'
end program 
```

现在编译并运行程序：

```
$ gfortran-4.7.1 -o foo foo.f90
$ rm -f fifo
$ ./foo
$ cat fifo
 Hello, world!
$ rm -f fifo
$ mkfifo fifo
$ cat fifo > bar &
[1] 6115
$ strace -o foo.st ./foo
At line 3 of file foo.f90 (unit = 1, file = 'fifo')
Fortran runtime error: Invalid argument
[1]+  Done                    cat fifo > bar
$ tail foo.st
write(3, " Hello, world!\n", 15)        = 15
lseek(3, 0, SEEK_CUR)                   = -1 ESPIPE (Illegal seek)
ftruncate(3, 18446744073709551615)      = -1 EINVAL (Invalid argument)
write(2, "At line 3 of file foo.f90 (unit "..., 52) = 52
write(2, "Fortran runtime error: ", 23) = 23
write(2, "Invalid argument", 16)        = 16
write(2, "\n", 1)                       = 1
close(3)                                = 0
exit_group(2)                           = ?
+++ exited with 2 +++ 
```

所以程序在写入普通文件时运行良好。但是，当写入 fifo 时，它会在第一次写入后尝试更改文件大小，并在失败后终止应用程序。

我对 Fortran 很陌生，所以我不确定这是否是 gfortran 中的错误，或者是否有某种方法可以打开文件来抑制这个`ftruncate`系统调用。我宁愿坚持格式化顺序方法：我的行有不同的长度，我宁愿避免必须为每个`write`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:42:39.400

这是一个[旧功能](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=30162)（甚至不敢认为这是一个错误！），`libgfortran`它在以前的版本中被修补过，但在 GCC 4.7 分支中重新引入，更具体地说是在 SVN[修订版 180701](http://gcc.gnu.org/viewcvs/tags/gcc_4_7_1_release/libgfortran/io/unix.c?r1=174947&r2=180701&diff_format=h)中。显然`gfortran`，开发人员不会使用命名管道测试他们的 I/O 代码。

您应该使用旧`gfortran`版本（适用于 4.6.1）或来自不同供应商的其他 Fortran 编译器。我将向 GCC 提交错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-30T23:57:40.547

使用 gfortran 4.7.2-5 我得到了同样的错误。

解决方案是修改 OPEN 语句如下：

```
open(1,file='fifo',status='old',action='write',access='stream',form='formatted') 
```

明确指定 FORM='FORMATTED' 和 ACTION='STREAM'。

# xaml - Metro：HyperlinkBut ton 未响应 GridViewItem 中的单击事件

> ID：11780557
> 
> 赞同：1
> 
> 时间：2012-08-02T15:11:50.730
> 
> 标签：xaml, gridview, hyperlink, windows-runtime, winrt-xaml

这是我的问题，我在 GridViewItem 中有一个 HyperlinkBut​​ton，它不响应我的点击。

我知道有很多与点击管理相对应的可设置属性，例如 IsItemClickEnabled、IsHitTestEnabled 等，但我找不到可以让我点击超链接的匹配项。

如果你有任何想法，我会很高兴听到它。

谢谢

EDIT1：只有 IsHitTestVisible 设置为 True，我可以单击我的 GridViewItems，显然也可以单击我里面的超链接。但是当我单击链接时，我不希望项目本身有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:54:21.707

如果您想从 GridViewItems/ListViewItems 禁用悬停/单击效果 - 您需要编辑模板。

在这里查看：[如何禁用 ListView 的悬停和平铺效果？](https://stackoverflow.com/questions/11790894/how-to-disable-listviews-hover-and-tile-effects/11791615#11791615)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:53:11.987

你应该`CommandName`在你的`LinkButton`

编码处理程序`GridView1_RowCommand`，记得检查是否`(e.CommandName=="Update")`

# c# - C# winforms 组合框动态自动完成

> ID：11780558
> 
> 赞同：31
> 
> 时间：2012-08-02T15:11:52.203
> 
> 标签：c#, winforms, dynamic, autocomplete, combobox

我的问题与此类似：[如何动态更改 C# 组合框或文本框中的自动完成条目？](https://stackoverflow.com/questions/515561/how-can-i-dynamically-change-auto-complete-entries-in-a-c-sharp-combobox-or-text) 但我仍然没有找到解决方案。

问题简述：

我有`ComboBox`大量的记录要显示在其中。当用户开始输入时，我想加载以输入文本开头的记录并为用户提供自动完成功能。如上面的主题所述，我无法加载它们，`сomboBox_TextChanged`因为我总是覆盖以前的结果并且永远看不到它们。

我可以仅使用来实现`ComboBox`吗？（不是`TextBox`或`ListBox`）

我使用这个设置：

```
сomboBox.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
сomboBox.AutoCompleteSource = AutoCompleteSource.CustomSource; 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2017-01-04T10:04:07.343

我最近也遇到过这类需求。我在不编写代码的情况下设置了以下属性并且它可以工作。看看这是否对您有帮助。

[![AutoCompleteMode: SuggestAppend // AutoCompleteSource: ListItems // DropDownStyle: DropDownList](../Images/d86e5772a27e02104ca73ac4828d8d82.png)](https://i.stack.imgur.com/k35JP.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-14T14:20:14.277

这是我的最终解决方案。它适用于大量数据。我`Timer`用来确保用户想要找到当前值。它看起来很复杂，但事实并非如此。感谢**Max Lambertini**的想法。

```
 private bool _canUpdate = true; 

        private bool _needUpdate = false;       

        //If text has been changed then start timer
        //If the user doesn't change text while the timer runs then start search
        private void combobox1_TextChanged(object sender, EventArgs e)
        {
            if (_needUpdate)
            {
                if (_canUpdate)
                {
                    _canUpdate = false;
                    UpdateData();                   
                }
                else
                {
                    RestartTimer();
                }
            }
        }

        private void UpdateData()
        {
            if (combobox1.Text.Length > 1)
            {
                List<string> searchData = Search.GetData(combobox1.Text);
                HandleTextChanged(searchData);
            }
        }       

        //If an item was selected don't start new search
        private void combobox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            _needUpdate = false;
        }

        //Update data only when the user (not program) change something
        private void combobox1_TextUpdate(object sender, EventArgs e)
        {
            _needUpdate = true;
        }

        //While timer is running don't start search
        //timer1.Interval = 1500;
        private void RestartTimer()
        {
            timer1.Stop();
            _canUpdate = false;
            timer1.Start();
        }

        //Update data when timer stops
        private void timer1_Tick(object sender, EventArgs e)
        {
            _canUpdate = true;
            timer1.Stop();
            UpdateData();
        }

        //Update combobox with new data
        private void HandleTextChanged(List<string> dataSource)
        {
            var text = combobox1.Text;

            if (dataSource.Count() > 0)
            {
                combobox1.DataSource = dataSource;  

                var sText = combobox1.Items[0].ToString();
                combobox1.SelectionStart = text.Length;
                combobox1.SelectionLength = sText.Length - text.Length;
                combobox1.DroppedDown = true;

                return;
            }
            else
            {
                combobox1.DroppedDown = false;
                combobox1.SelectionStart = text.Length;
            }
        } 
```

这个解决方案不是很酷。因此，如果有人有其他解决方案，请与我分享。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-05T15:55:19.637

我写了这样的东西......

```
private void frmMain_Load(object sender, EventArgs e)
{
    cboFromCurrency.Items.Clear();
    cboComboBox1.AutoCompleteMode = AutoCompleteMode.Suggest;
    cboComboBox1.AutoCompleteSource = AutoCompleteSource.ListItems;
    // Load data in comboBox => cboComboBox1.DataSource = .....
    // Other things
}

private void cboComboBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    cboComboBox1.DroppedDown = false;
} 
```

仅此而已（Y）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-06T09:40:24.717

是的，你当然可以......但它需要一些工作才能使其无缝工作。这是我想出的一些代码。请记住，它**不**使用组合框的自动完成功能，如果您使用它来筛选很多项目，它可能会很慢......

```
string[] data = new string[] {
    "Absecon","Abstracta","Abundantia","Academia","Acadiau","Acamas",
    "Ackerman","Ackley","Ackworth","Acomita","Aconcagua","Acton","Acushnet",
    "Acworth","Ada","Ada","Adair","Adairs","Adair","Adak","Adalberta","Adamkrafft",
    "Adams"

};
public Form1()
{
    InitializeComponent();
}

private void comboBox1_TextChanged(object sender, EventArgs e)
{
    HandleTextChanged();
}

private void HandleTextChanged()
{
    var txt = comboBox1.Text;
    var list = from d in data
               where d.ToUpper().StartsWith(comboBox1.Text.ToUpper())
               select d;
    if (list.Count() > 0)
    {
        comboBox1.DataSource = list.ToList();
        //comboBox1.SelectedIndex = 0;
        var sText = comboBox1.Items[0].ToString();
        comboBox1.SelectionStart = txt.Length;
        comboBox1.SelectionLength = sText.Length - txt.Length;
        comboBox1.DroppedDown = true;
        return;
    }
    else
    {
        comboBox1.DroppedDown = false;
        comboBox1.SelectionStart = txt.Length;
    }
}

private void comboBox1_KeyUp(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Back)
    {
        int sStart = comboBox1.SelectionStart;
        if (sStart > 0)
        {
            sStart--;
            if (sStart == 0)
            {
                comboBox1.Text = "";
            }
            else
            {
                comboBox1.Text = comboBox1.Text.Substring(0, sStart);
            }
        }
        e.Handled = true;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-23T15:15:46.650

我发现 Max Lambertini 的回答非常有帮助，但修改了他的 HandleTextChanged 方法：

```
 //I like min length set to 3, to not give too many options 
    //after the first character or two the user types
    public Int32 AutoCompleteMinLength {get; set;}

    private void HandleTextChanged() {
        var txt = comboBox.Text;
        if (txt.Length < AutoCompleteMinLength)
            return;

        //The GetMatches method can be whatever you need to filter 
        //table rows or some other data source based on the typed text.
        var matches = GetMatches(comboBox.Text.ToUpper());

        if (matches.Count() > 0) {
            //The inside of this if block has been changed to allow
            //users to continue typing after the auto-complete results
            //are found.
            comboBox.Items.Clear();
            comboBox.Items.AddRange(matches);
            comboBox.DroppedDown = true;
            Cursor.Current = Cursors.Default;
            comboBox.Select(txt.Length, 0);
            return;
        }
        else {
            comboBox.DroppedDown = false;
            comboBox.SelectionStart = txt.Length;
        }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-10T04:43:33.583

此代码写在您的表单加载中。当用户在组合框中输入字母时，它会显示数据库中的所有旅游。此代码会根据用户的需要自动建议并附加正确的选择。

```
 con.Open();
            cmd = new SqlCommand("SELECT DISTINCT Tour FROM DetailsTB", con);
            SqlDataReader sdr = cmd.ExecuteReader();
            DataTable dt = new DataTable();
            dt.Load(sdr);
            combo_search2.DisplayMember = "Tour";
            combo_search2.DroppedDown = true;

            List<string> list = new List<string>();
            foreach (DataRow row in dt.Rows)
            {
                list.Add(row.Field<string>("Tour"));
            }
            this.combo_search2.Items.AddRange(list.ToArray<string>());
            combo_search2.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
            combo_search2.AutoCompleteSource = AutoCompleteSource.ListItems;
            con.Close(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-12T09:26:24.517

在以前的答复中是缺点。提供自己的版本，并在下拉列表中选择所需的项目：

```
 private ConnectSqlForm()
    {
        InitializeComponent();
        cmbDatabases.TextChanged += UpdateAutoCompleteComboBox;
        cmbDatabases.KeyDown += AutoCompleteComboBoxKeyPress;
    }

    private void UpdateAutoCompleteComboBox(object sender, EventArgs e)
    {
        var comboBox = sender as ComboBox;
        if(comboBox == null)
        return;
        string txt = comboBox.Text;
        string foundItem = String.Empty;
        foreach(string item in comboBox.Items)
            if (!String.IsNullOrEmpty(txt) && item.ToLower().StartsWith(txt.ToLower()))
            {
                foundItem = item;
                break;
            }

        if (!String.IsNullOrEmpty(foundItem))
        {
            if (String.IsNullOrEmpty(txt) || !txt.Equals(foundItem))
            {
                comboBox.TextChanged -= UpdateAutoCompleteComboBox;
                comboBox.Text = foundItem;
                comboBox.DroppedDown = true;
                Cursor.Current = Cursors.Default;
                comboBox.TextChanged += UpdateAutoCompleteComboBox;
            }

            comboBox.SelectionStart = txt.Length;
            comboBox.SelectionLength = foundItem.Length - txt.Length;
        }
        else
            comboBox.DroppedDown = false;
    }

    private void AutoCompleteComboBoxKeyPress(object sender, KeyEventArgs e)
    {
        var comboBox = sender as ComboBox;
        if (comboBox != null && comboBox.DroppedDown)
        {
            switch (e.KeyCode)
            {
                case Keys.Back:
                    int sStart = comboBox.SelectionStart;
                    if (sStart > 0)
                    {
                        sStart--;
                        comboBox.Text = sStart == 0 ? "" : comboBox.Text.Substring(0, sStart);
                    }
                    e.SuppressKeyPress = true;
                    break;
            }

        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-12T21:41:45.050

```
 using (var client = new UserServicesClient())
 {
     var list = new AutoCompleteStringCollection();
     list.AddRange(client.ListNames(query).ToArray());
     comboBoxName.AutoCompleteCustomSource = list;
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-28T03:46:31.323

这是开始工作的主要痛苦。我遇到了一堆死胡同，但最终的结果是相当直截了当的。希望它可以对某人有所帮助。它可能需要一点唾液和抛光，仅此而已。

注意：_addressFinder.CompleteAsync 返回 KeyValuePairs 列表。

```
public partial class MyForm : Form
{
    private readonly AddressFinder _addressFinder;
    private readonly AddressSuggestionsUpdatedEventHandler _addressSuggestionsUpdated;

    private delegate void AddressSuggestionsUpdatedEventHandler(object sender, AddressSuggestionsUpdatedEventArgs e);

    public MyForm()
    {
        InitializeComponent();

        _addressFinder = new AddressFinder(new AddressFinderConfigurationProvider());

        _addressSuggestionsUpdated += AddressSuggestions_Updated;

        MyComboBox.DropDownStyle = ComboBoxStyle.DropDown;
        MyComboBox.DisplayMember = "Value";
        MyComboBox.ValueMember = "Key";
    }

    private void MyComboBox_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (char.IsControl(e.KeyChar))
        {
            return;
        }

        var searchString = ThreadingHelpers.GetText(MyComboBox);

        if (searchString.Length > 1)
        {
            Task.Run(() => GetAddressSuggestions(searchString));
        }
    }

    private async Task GetAddressSuggestions(string searchString)
    {
        var addressSuggestions = await _addressFinder.CompleteAsync(searchString).ConfigureAwait(false);

        if (_addressSuggestionsUpdated.IsNotNull())
        {
            _addressSuggestionsUpdated.Invoke(this, new AddressSuggestionsUpdatedEventArgs(addressSuggestions));
        }
    }

    private void AddressSuggestions_Updated(object sender, AddressSuggestionsUpdatedEventArgs eventArgs)
    {
        try
        {
            ThreadingHelpers.BeginUpdate(MyComboBox);

            var text = ThreadingHelpers.GetText(MyComboBox);

            ThreadingHelpers.ClearItems(MyComboBox);

            foreach (var addressSuggestions in eventArgs.AddressSuggestions)
            {
                ThreadingHelpers.AddItem(MyComboBox, addressSuggestions);
            }

            ThreadingHelpers.SetDroppedDown(MyComboBox, true);

            ThreadingHelpers.ClearSelection(MyComboBox);
            ThreadingHelpers.SetText(MyComboBox, text);
            ThreadingHelpers.SetSelectionStart(MyComboBox, text.Length);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
        finally
        {
            ThreadingHelpers.EndUpdate(MyComboBox);
        }
    }

    private class AddressSuggestionsUpdatedEventArgs : EventArgs
    {
        public IList<KeyValuePair<string, string>> AddressSuggestions { get; private set; }

        public AddressSuggestionsUpdatedEventArgs(IList<KeyValuePair<string, string>> addressSuggestions)
        {
            AddressSuggestions = addressSuggestions;
        }
    }
} 
```

ThreadingHelpers 只是一组静态方法的形式：

```
 public static string GetText(ComboBox comboBox)
    {
        if (comboBox.InvokeRequired)
        {
            return (string)comboBox.Invoke(new Func<string>(() => GetText(comboBox)));
        }

        lock (comboBox)
        {
            return comboBox.Text;
        }
    }

    public static void SetText(ComboBox comboBox, string text)
    {
        if (comboBox.InvokeRequired)
        {
            comboBox.Invoke(new Action(() => SetText(comboBox, text)));
            return;
        }

        lock (comboBox)
        {
            comboBox.Text = text;
        }
    } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-12-03T00:33:17.943

采取 2。我在下面的回答并没有让我一直得到想要的结果，但它可能对某人仍然有用。ComboBox 的自动选择功能让我很痛苦。这个使用了一个位于 ComboBox 顶部的 TextBox，允许我忽略 ComboBox 本身中出现的任何内容，只响应选择更改事件。

1.  创建表格
2.  添加组合框
    *   设置所需的大小和位置
    *   将 DropDownStyle 设置为*DropDown*
    *   将 TabStop 设置为*false*
    *   将 DisplayMember 设置为*Value*（我使用的是 KeyValuePairs 列表）
    *   将 ValueMember 设置为*Key*
3.  添加面板
    *   设置为与 ComboBox 相同的大小
    *   用面板覆盖 ComboBox（这说明标准 ComboBox 比标准 TextBox 高）
4.  添加文本框
    *   将 TextBox 放在面板顶部
    *   将 TextBox 的底部与 Panel/ComboBox 的底部对齐

背后的代码

```
public partial class TestForm : Form
{
    // Custom class for managing calls to an external address finder service
    private readonly AddressFinder _addressFinder;

    // Events for handling async calls to address finder service
    private readonly AddressSuggestionsUpdatedEventHandler _addressSuggestionsUpdated;
    private delegate void AddressSuggestionsUpdatedEventHandler(object sender, AddressSuggestionsUpdatedEventArgs e);

    public TestForm()
    {
        InitializeComponent();

        _addressFinder = new AddressFinder(new AddressFinderConfigurationProvider());
        _addressSuggestionsUpdated += AddressSuggestions_Updated;
    }

    private void textBox1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        if (e.KeyCode == Keys.Tab)
        {
            comboBox1_SelectionChangeCommitted(sender, e);
            comboBox1.DroppedDown = false;
        }
    }

    private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Up)
        {
            if (comboBox1.Items.Count > 0)
            {
                if (comboBox1.SelectedIndex > 0)
                {
                    comboBox1.SelectedIndex--;
                }
            }

            e.Handled = true;
        }
        else if (e.KeyCode == Keys.Down)
        {
            if (comboBox1.Items.Count > 0)
            {
                if (comboBox1.SelectedIndex < comboBox1.Items.Count - 1)
                {
                    comboBox1.SelectedIndex++;
                }
            }

            e.Handled = true;
        }
        else if (e.KeyCode == Keys.Enter)
        {
            comboBox1_SelectionChangeCommitted(sender, e);
            comboBox1.DroppedDown = false;

            textBox1.SelectionStart = textBox1.TextLength;

            e.Handled = true;
        }
    }

    private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == '\r')  // Enter key
        {
            e.Handled = true;
            return;
        }

        if (char.IsControl(e.KeyChar) && e.KeyChar != '\b') // Backspace key
        {
            return;
        }

        if (textBox1.Text.Length > 1)
        {
            Task.Run(() => GetAddressSuggestions(textBox1.Text));
        }
    }

    private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
    {
        if (comboBox1.Items.Count > 0 &&
            comboBox1.SelectedItem.IsNotNull() &&
            comboBox1.SelectedItem is KeyValuePair<string, string>)
        {
            var selectedItem = (KeyValuePair<string, string>)comboBox1.SelectedItem;

            textBox1.Text = selectedItem.Value;

            // Do Work with selectedItem
        }
    }

    private async Task GetAddressSuggestions(string searchString)
    {
        var addressSuggestions = await _addressFinder.CompleteAsync(searchString).ConfigureAwait(false);

        if (_addressSuggestionsUpdated.IsNotNull())
        {
            _addressSuggestionsUpdated.Invoke(this, new AddressSuggestionsUpdatedEventArgs(addressSuggestions));
        }
    }

    private void AddressSuggestions_Updated(object sender, AddressSuggestionsUpdatedEventArgs eventArgs)
    {
        try
        {
            ThreadingHelper.BeginUpdate(comboBox1);

            ThreadingHelper.ClearItems(comboBox1);

            if (eventArgs.AddressSuggestions.Count > 0)
            {
                foreach (var addressSuggestion in eventArgs.AddressSuggestions)
                {
                    var item = new KeyValuePair<string, string>(addressSuggestion.Key, addressSuggestion.Value.ToUpper());
                    ThreadingHelper.AddItem(comboBox1, item);
                }

                ThreadingHelper.SetDroppedDown(comboBox1, true);
                ThreadingHelper.SetVisible(comboBox1, true);
            }
            else
            {
                ThreadingHelper.SetDroppedDown(comboBox1, false);
            }
        }
        finally
        {
            ThreadingHelper.EndUpdate(comboBox1);
        }
    }

    private class AddressSuggestionsUpdatedEventArgs : EventArgs
    {
        public IList<KeyValuePair<string, string>> AddressSuggestions { get; }

        public AddressSuggestionsUpdatedEventArgs(IList<KeyValuePair<string, string>> addressSuggestions)
        {
            AddressSuggestions = addressSuggestions;
        }
    }
} 
```

设置 ComboBox 的 DroppedDown 属性时，您可能有问题，也可能没有问题。我最终只是将它包裹在一个带有空 catch 块的 try 块中。不是一个很好的解决方案，但它有效。

有关 ThreadingHelpers 的信息，请参阅下面的我的其他答案。

享受。

# java - Eclipse 插件的堆栈跟踪

> ID：11780559
> 
> 赞同：2
> 
> 时间：2012-08-02T15:11:56.797
> 
> 标签：java, eclipse, jvm, stack-trace, jvisualvm

我们在 Eclipse 环境中安装了“IBM SCM Adapter for ClearCase”插件。

在某些 Eclipse 实例上从 ClearCase 中“签出”文件时，我们遇到了一些错误，并且该插件在其他一些 Eclipse 实例上运行良好。我们无法确定真正的问题，因为插件在日志上打印的信息非常少。插件的源代码不可用，因此我们可以调试。

是否可以使用一些 Java 监控工具查看堆栈跟踪（以及实际的方法参数）？

我正在使用 JvisualVM，并且可以看到主线程的堆栈跟踪，但它没有显示传递给导致问题的方法的实际参数。

相同的插件在相同的 eclipse 安装中表现不同，我们需要找出原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:53:51.350

这可以浏览堆转储。[http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/heapdump.html](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/heapdump.html)

# jquery - jQuery函数编写101：我怎样才能重用这个函数而不是重新创建它？

> ID：11780560
> 
> 赞同：1
> 
> 时间：2012-08-02T15:11:57.047
> 
> 标签：jquery, slider, lightbox

这是与我上一个问题（现已解决）相同的页面，但主机已关闭，因此我无法展示一个实时示例。我正在使用 Fearless Flyer 的内容滑块，因为它具有我发现的最简单的标记和代码。在这里看到它：http: [//demo.fearlessflyer.com/html/demo/content-slider/](http://demo.fearlessflyer.com/html/demo/content-slider/)

但是，很明显它是为每页一个滑块而不是多个滑块制作的。如果我尝试用两个滑块不变地实现它，第二个滑块不起作用，因为滑动的负边距值乘以第一个滑块已经发生的计算 - 所以边距缩小 -右侧 4000 像素，没有要显示的照片。

我已经让它与两个滑块一起工作，使用以下标记：

我有两个滑块，一个叫做“lightbox_gallery”，一个叫做“lightbox_5gruende”。

```
<div id="lightbox_gallery" class="lightbox_window">
    <div id="mother_gallery">
        <ul>
            <li><img id="test" src="gallery_02.jpg" /><a class="next" href="#">next</a></li>
            <li><img src="gallery_01.jpg" /><a class="next" href="#">next</a><a class="previous" href="#">prev</a></li>
            <li><img src="gallery_02.jpg" /><a class="previous" href="#">prev</a><a class="startover"             href="#">startover</a></li>
        </ul>
    </div>
</div> <!--end lightbox div -->

<div id="lightbox_5gruende" class="lightbox_window">
    <div id="mother_5gruende">
        <ul>
            <li><img id="test" src="gallery_03.jpg" /><a class="next" href="#">next</a></li>
            <li><img src="gallery_03.jpg" /><a class="next" href="#">next</a><a class="previous" href="#">prev</a></li>
            <li><img src="gallery_02.jpg" /><a class="previous" href="#">prev</a><a class="startover" href="#">startover</a></li>
        </ul>
    </div>
</div> <!--end lightbox div --> 
```

然后是这个令人难以置信的 hacky 脚本：

```
$(window).load(function() {

var theImage = $('#lightbox_gallery ul li img');
var theImage2 = $('#lightbox_5gruende ul li img');
var theWidth = 790;

$('#mother_gallery').css({
    //stuff
});
    //get total of image sizes and set as width for ul 
var totalWidth = theImage.length * theWidth;
$('ul').css({
    width: function(){
    return totalWidth;  
}

});
$('#mother_5gruende').css({
    //stuff
});
    //get total of image sizes and set as width for ul 
var totalWidth = theImage.length * theWidth;
$('ul').css({
    width: function(){
    return totalWidth;  
}

}); 
$(theImage).each(       
    function(intIndex){             
            $(this).nextAll('a')
            .bind("click", function(){
                if($(this).is(".next")) {

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex + 1) * 790)              
                    }, 1000)                    

                } else if($(this).is(".previous")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex - 1) * 790)              
                    }, 1000)    

                } else if($(this).is(".startover")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (0)              
                    }, 1000)

                }

            });//close .bind()                                   
});//close .each()

// THEN REPEATING THE SAME WITH SLIGHTLY DIFFERENT NAMES BECAUSE I DO NOT KNOW HOW TO WRITE A REUSABLE FUNCTION //

$(theImage2).each(      
    function(intIndex2){                
            $(this).nextAll('a')
            .bind("click", function(){
                if($(this).is(".next")) {

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex2 + 1) * 790)             
                    }, 1000)                    

                } else if($(this).is(".previous")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (-(intIndex2 - 1) * 790)             
                    }, 1000)    

                } else if($(this).is(".startover")){

                    $(this).parent('li').parent('ul').animate({
                        "margin-left": (0)              
                    }, 1000)

                }

            });//close .bind()                                   
});//close .each()

});//doc ready 
```

这太丑了，让人心疼！它可以工作，但我不想让两个完全独立的滑块功能对不同滑块中的图像做同样的事情。

我怎样才能重写它，以便 $(theImage).each 内部的计算可以用于两个滑块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:21:25.110

可以做类似的事情：

```
function animateParentUl( $element, marginValue ) {
    $element.parent('li').parent('ul')
        .animate({"margin-left": marginValue }, 1000)   
} 
```

然后将其称为：

```
$(theImage2).each(      
    function(intIndex2){                
            $(this).nextAll('a')
            .bind("click", function(){
                var $this = $(this);
                if($this.is(".next")) {
                    animateParentUl( $this, (-(intIndex2 + 1) * 790) );
                } else if($this.is(".previous")){
                    animateParentUl( $this, (-(intIndex2 - 1) * 790) );
                } else if($this.is(".startover")){
                    animateParentUl( $this, 0 );
                }

            });//close .bind()                                   
});//close .each() 
```

# php - Symfony 2 内核接口处理请求

> ID：11780565
> 
> 赞同：1
> 
> 时间：2012-08-02T15:12:03.753
> 
> 标签：php, symfony

我对 Symfonys HttpKernelInterface handle() 函数有点困惑：文档说这个函数返回一个响应。但在我的情况下，这个函数似乎执行了重定向——并且重定向将我带到登录页面——在每种情况下。

所以我想要做的是将请求保存到会话：

```
$request = $event->getRequest();
$data = serialize($request);
$this->_session->set('pl_lastUserRequest', $data); 
```

然后显示了其他几个页面。稍后，请求将转换回请求对象并应进行处理：

```
$request = unserialize($this->_session->get('pl_lastUserRequest')); 
```

现在我想我可以将该请求对象传递给内核的句柄函数 - 但这样做我将被重定向到登录页面：

```
$response = $kernel->handle($request); 
```

我试图打印出（用于调试）这两个对象，请求和响应。我可以看到该页面一秒钟，然后重定向开始。任何想法我做错了什么？

# javascript - 使用javascript切换div的动态高度

> ID：11780567
> 
> 赞同：1
> 
> 时间：2012-08-02T15:12:15.727
> 
> 标签：javascript, html, css, dynamic, toggle

现在我正在尝试制作一个网站[投资组合](http://taylortomasini.me/projects)我遇到了一个问题。在链接的页面上会有相当多的内容，所以我研究并制作了结合锚点和 javascript 的侧选项卡以仅显示选定的部分。我现在遇到的问题是这种方法在内容很小的情况下有效，但是在“编码”部分我正在试验并注意到当内容超过 100% 时内容并没有导致父 div 扩展。我知道这是由于 display:none 可用性。我曾尝试使用可见性：隐藏并切换它，但问题是总内容的高度是为每个我不想要的页面计算的。任何帮助都会很棒：D（ps。

HTML：

```
<html>
    <head>
        <title>Taylor Tomasini</title>

        <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="../Style/IE_Stylesheet.css"/>
        <![endif]-->
        <![if !IE]>
            <link rel="stylesheet" type="text/css" href="../Style/Stylesheet.css"/>
        <![endif]>

        <meta charset="utf-8"/>
        <meta name="Author" content="Taylor Tomasini"/>
        <meta name="Keywords" content="Aerospace, Engineer, Taylor Tomasini, Florida Tech,
        FIT, Florida Institute of Technology, CAD, FEA, ProEngineer, ANSYS, AIAA,
        Project Management, Leadership, C++, Web Design, Driven, Creative"/>
        <meta name="Description" content="Professional Profile for the Aerospace Engineer Taylor Tomasini"/>

        <?php
        $page="Projects";
        ?>

        <script type="text/javascript" src="../Style/Content_Format.js"></script>
    </head>

    <body onload="format()" onresize="format()">
        <header>
            <h1>Taylor Tomasini</h1>
            <nav id="Global_Menu" role="navigation">
                <ul class="Global_Nav">
                <?php
                switch($page)
                {
                    case("Home"):
                ?>
                        <li><a href="/" class="active">Home</a></li>
                        <li><a href="/About/">About Me</a></li>
                        <li><a href="/Projects/">Projects</a></li>
                        <li><a href="/Qualifications/">Qualifications</a></li>
                        <li><a href="/Contact/">Contact</a></li>
                    <?php
                    break;
                    case("About"):
                    ?>
                        <li><a href="/">Home</a></li>
                        <li><a href="/About/" class="active">About Me</a></li>
                        <li><a href="/Projects/">Projects</a></li>
                        <li><a href="/Qualifications/">Qualifications</a></li>
                        <li><a href="/Contact/">Contact</a></li>
                    <?php
                    break;
                    case("Projects"):
                    ?>
                        <li><a href="/">Home</a></li>
                        <li><a href="/About/">About Me</a></li>
                        <li><a href="/Projects/" class="active">Projects</a></li>
                        <li><a href="/Qualifications/">Qualifications</a></li>
                        <li><a href="/Contact/">Contact</a></li>
                    <?php
                    break;
                    case("Qualifications"):
                    ?>
                        <li><a href="/">Home</a></li>
                        <li><a href="/About/">About Me</a></li>
                        <li><a href="/Projects/">Projects</a></li>
                        <li><a href="/Qualifications/" class="active">Qualifications</a></li>
                        <li><a href="/Contact/">Contact</a></li>
                    <?php
                    break;
                    case("Contact"):
                    ?>
                        <li><a href="/">Home</a></li>
                        <li><a href="/About/">About Me</a></li>
                        <li><a href="/Projects/">Projects</a></li>
                        <li><a href="/Qualifications/">Qualifications</a></li>
                        <li><a href="/Contact/" class="active">Contact</a></li>
                    <?php
                    break;
                    default:
                    ?>
                        <li><a href="/">Home</a></li>
                        <li><a href="/About/">About Me</a></li>
                        <li><a href="/Projects/">Projects</a></li>
                        <li><a href="/Qualifications/">Qualifications</a></li>
                        <li><a href="/Contact/">Contact</a></li>
                <?php
                break;
                }
                ?>
                </ul>
            </nav>
        </header>

        <div id="Wrapper">
            <div id="Left_Menu">
                <ul class="Left_Menu_Nav">
                    <!--[if IE]>
                    <li><a href="#CAD">CAD</a></li>
                    <li><a href="#FEA">FEA</a></li>
                    <li><a href="#MATLAB">MATLAB</a></li>
                    <li><a href="#Coding">Coding</a></li>
                    <li><a href="#Arduino">Arduino</a></li>
                    <li><a href="#Artwork">Artwork</a></li>
                    <![endif]-->

                    <![if !IE]>
                    <li><a href="javascript:Display_Section('CAD');">CAD</a></li>
                    <li><a href="javascript:Display_Section('FEA');">FEA</a></li>
                    <li><a href="javascript:Display_Section('MATLAB');">MATLAB</a></li>
                    <li><a href="javascript:Display_Section('Coding');">Coding</a></li>
                    <li><a href="javascript:Display_Section('Arduino');">Arduino</a></li>
                    <li><a href="javascript:Display_Section('Artwork');">Artwork</a></li>
                    <![endif]>
                </ul>
            </div>

            <div id="Content">
                <div id="CAD" name="Section">
                    Computer Aided Design
                </div>
                <div id="FEA" name="Section">
                    Finite Element Analysis
                </div>
                <div id="MATLAB" name="Section">
                    MATLAB
                </div>
                <div id="Coding" name="Section">
                    Coding
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    </br></br></br></br></br></br>
                    <p>hi</p>
                </div>
                <div id="Arduino" name="Section">
                    Hardware/software interaction
                </div>
                <div id="Artwork" name="Section">
                    Artwork
                </div>
            </div>
        </div>

        <footer>
                <p>Created by: Taylor Tomasini</p>          
        </footer>
    </body>

</html> 
```

CSS：

```
 html, body
{
    margin:0;
    padding:0;
    height:100%;
    background:#ECECEC;
}

header
{
    display:block;
    width:100%;
}

header h1
{
    text-align:center;
}

.Global_Nav
{
    list-style-type:none;
    font-size:150%;
    border:0;
    padding:0;
    margin-left:5%;
    margin-right:5%;
}

.Global_Nav li
{
    float:left;
    background:grey;
    width:20%;
    margin-bottom:1em;
}

.active
{
    background:#4C4C4C;
}

.Global_Nav a
{
    text-decoration:none;
    display:block;
    text-align:center;
    font:2em;
    border-right:1px solid #ECECEC;
}

.Global_Nav a:link, .Global_Nav a:visited
{
    color:white;
    font-weight:bold;
    text-transform:uppercase;
}

.Global_Nav a:hover
{
    background:black;
}

#Wrapper
{
    display:block;
    width:100%;
    height:auto; min-height:100%;
    background:clear;
    overflow:hidden;
}

#Left_Menu
{
    float:left;
    height:auto; min-height:100%;
    width:14%;
    margin-left:7%;
    background:grey;
}

.Left_Menu_Nav
{
    list-style-type:none;
}

.Left_Menu_Nav li
{
    background:black;
    border-bottom:1px solid grey;
}

.Left_Menu_Nav a
{
    text-decoration:none;
    display:block;
    font-size:1.5em;
}

.Left_Menu_Nav a:link, .Left_Menu_Nav a:visited
{
    color:white;
}

#Content
{
    float:right;
    height:auto; min-height:100%;
    width:68%;
    margin-right:7%;
    border:2px solid black;
    background:white;
}

.Content_Heading
{
    width:100%;
    text-align:center;
    background:grey;
}

.Content_Subheading
{
    text-align:center;
}

.Content_Divider
{
    float:left;
    width:50%;
}

.Code_Box
{
    border:black .15em solid;
    position:relative;
    left:5%;
    width:90%;
    color:green;
    height:25em;
    overflow:auto;

}

#CAD
{
    display:block;
}

#FEA,#MATLAB,#Coding,#Arduino,#Artwork
{
    display:none;
}

footer
{
    clear:both;
    display:block;
    background: clear;
    color: #565656;
    font-size: .5em;
    text-align: center;
    height:2em;
    width: 100%;
} 
```

JavaScript：

```
function format()
{
    //declare variables for wrapper, content, and side menu height
    var Wrapper_Height = document.getElementById("Wrapper").offsetHeight;
    var Center_Content = document.getElementById("Content");
    var Side_Menu = document.getElementById("Left_Menu");

    //set the content and side menu height
    Center_Content.style.height = Wrapper_Height + "px";
    Side_Menu.style.height = Wrapper_Height + "px";
}

function Display_Section(Current_Section)
{
    var Array = document.getElementsByName("Section");
    for(var x=0; x<Array.length; x++)
    {
        if (Array[x].id == Current_Section)
        {
            Array[x].style.display = 'block';
        }
        else
        {
            Array[x].style.display = 'none';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:26:29.850

您的格式函数将固定高度设置为父级（#Content）。所以它永远不会和它的孩子一起变大。

您可以改用 (Content_Format.js:9)：

```
Center_Content.style.minHeight = Wrapper_Height + "px"; 
```

# css - 在 A4 纸上打印 css A6

> ID：11780569
> 
> 赞同：1
> 
> 时间：2012-08-02T15:12:22.270
> 
> 标签：css, printing

我有一个网站生成一个 300dpi 为 png 的 DIN A6 页面（作为参考，我们将其命名为 tag.png）。我现在正在尝试仅提取页面的此图像并通过 print.css 在 A4 纸上以 A6 格式打印。然而，我所有的尝试都失败了，我得到了我的 .png 的升级版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:47:27.483

也许我错过了重点，但为什么不将 A6 尺寸应用于打印 css 中的图像？

```
style="width:105mm;height:148mm" 
```

# visual-studio-2010 - ReSharper 中的 Xunit

> ID：11780571
> 
> 赞同：3
> 
> 时间：2012-08-02T15:12:26.997
> 
> 标签：visual-studio-2010, resharper, xunit

我的 VS 2010 中有 ReSharper 6.1.1000.82，我正在尝试按照我必须的说明安装 XUnit 插件

> 在 Visual Studio 中挂载实时模板（ReSharper -> 实时模板 -> 挂载文件存储）并指向复制的文件

但是我的 ReSharper 菜单下没有这个选项，而是一个叫做 Templates Explorer 的东西，所以我真的不知道该怎么做。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:28:12.183

正如[JetBrains 的这篇博文](http://blogs.jetbrains.com/dotnet/2012/01/importing-exporting-templates-and-patterns-in-resharper-61/)所说，实时模板在 ReSharper 6.1 中的工作方式大不相同。

导入 XUnit 模板的快速方法是：

1.  从 Visual Studio“ReSharper”菜单打开模板资源管理器
2.  在“实时模板”选项卡上，单击“导入”图标：![进口](../Images/fca18ccf597b7a645434fea089f87047.png)
3.  浏览到其中一个`xunit-ae.xml`或`xunit-xe.xml`文件。您需要先将文件类型更改为“旧模板 XML 文件 (*.xml)”
4.  确认询问您是否要导入“实时模板”类型的模板的警告。

# javascript - Javascript getelementbyId iframe 合并

> ID：11780573
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:12:29.237
> 
> 标签：javascript, jquery, iframe, getelementbyid

诚然，我是 Javascript 的新手，所以感谢恩典......

A. 我想在没有 JQuery 的情况下应用该**功能**（`getelementbyId`我认为） ，并且

 **B. 我想将它应用于整个表格，但每个元素都有不同的悬停图像或状态......非常感谢任何帮助！

```
<code>
<article class="main_display">  
<p style="text-align: center;"><iframe id="bigVideo" width="850" height="500" src="http://player.vimeo.com/video/45587075?rel=0&autoplay=0&modestbranding=1&wmode=Opaque" frameborder="0" allowfullscreen></iframe>
<table width="142" cellspacing="1" cellpadding="2" id="mouseOvers">
  <tr>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46124645?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image7','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week1_vid.jpg" name="Image7" width="140" height="142" border="0" id="Image7" /></a></td>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46117474?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image2','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week2_vid.jpg" name="Image2" width="142" height="142" border="0" id="Image2" /></a></td>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46117474?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image3','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week3_vid.jpg" name="Image3" width="142" height="142" border="0" id="Image3" /></a></td>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46119637?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image4','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week4_vid.jpg" name="Image4" width="142" height="142" border="0" id="Image4" /></a></td>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46121214?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image5','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week5_vid.jpg" name="Image5" width="142" height="142" border="0" id="Image5" /></a></td>
    <td><a href="#" onclick="$('#bigVideo').attr('src', 'http://player.vimeo.com/video/46123371?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image6','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week6_vid.jpg" name="Image6" width="142" height="142" border="0" id="Image6" /></a></td>
  </tr>
</table>
</p>
</article>
</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:50:46.917

我建议使用 CSS 进行翻转：

```
<style>
      #Image2 div, #Image3 div, #Image4 div, #Image5 div, #Image6 div, #Image7 div { width:142px; height:142px; }
      #Image7 div { width:140px; } /*is it suppose to have a different width than the others? and is the id suppose to be "Image7" and not "Image1" ?*/
      #Image2 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week2_vid.jpg); }
      #Image3 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week3_vid.jpg); }
      #Image4 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week4_vid.jpg); }
      #Image5 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week5_vid.jpg); }
      #Image6 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week6_vid.jpg); }
      #Image7 div { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/week1_vid.jpg); }       
      #Image2 div:hover, #Image3 div:hover, #Image4 div:hover, #Image5 div:hover, #Image6 div:hover, #Image7 div:hover { background:url(http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg); }
</style> 
```

为您的视频转换器创建一个函数：

```
<script type="text/javascript">
    function bigVideo(src) { // this is regular javascript no JQuery
        var url      = 'http://player.vimeo.com/video/';
        var settings = '?rel=0&autoplay=1&modestbranding=1&wmode=Opaque';
        document.getElementById('bigVideo').src = url + src + settings;
    }
</script> 
```

这样做会清理你的 html 相当多。

```
<article class="main_display">  
    <p style="text-align: center;">
    <iframe id="bigVideo" width="850" height="500" src="http://player.vimeo.com/video/45587075?rel=0&autoplay=0&modestbranding=1&wmode=Opaque" frameborder="0" allowfullscreen></iframe>

    <table width="142" cellspacing="1" cellpadding="2" id="mouseOvers">
      <tr>
        <td><a id="Image7" href="#" onclick="bigVideo('46124645');"><div></div></a></td>

        <td><a id="Image2" href="#" onclick="bigVideo('46117474');"><div></div></a></td>

        <td><a id="Image3" href="#" onclick="bigVideo('46117474');"><div></div></a></td>

        <td><a id="Image4" href="#" onclick="bigVideo('46119637');"><div></div></a></td>

        <td><a id="Image5" href="#" onclick="bigVideo('46121214');"><div></div></a></td>

        <td><a id="Image6" href="#" onclick="bigVideo('46123371');"><div></div></a></td>
      </tr>
    </table>

    </p>
    </article> 
```

回顾：

1-用空的“div”标签替换“img”标签并将id传递给“a”标签。这允许我们使用背景图像进行 CSS 翻转。

2-创建一个函数来替换视频源，并在函数中保留所有不改变的数据，并将变化的变量传递给函数。

这会产生更清晰的 html。理想情况下，您希望尝试将 html css 和 javascript 分开。甚至您的表也具有可以传递给 css 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:19:03.617

如果您的问题是：“如何`onclick`用纯 javascript 替换处理程序中的表中的 jQuery”，那么您可以这样做：

```
<td><a href="#" onclick="document.getElementById('bigVideo').src = 'http://player.vimeo.com/video/46124645?rel=0&autoplay=1&modestbranding=1&wmode=Opaque')" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image7','','http://s3.amazonaws.com/worship/graphics/worshipmadness/play_rollover.jpg',1)"><img src="http://s3.amazonaws.com/worship/graphics/worshipmadness/week1_vid.jpg" name="Image7" width="140" height="142" border="0" id="Image7" /></a></td> 
```

在这个演示中，使用您的 HTML/代码似乎对我有用：http: [//jsfiddle.net/jfriend00/5cqgj/](http://jsfiddle.net/jfriend00/5cqgj/)

如果您想问一些不同的问题，请说明您要完成的工作。**

# c# - Linq-从特定日期选择组

> ID：11780576
> 
> 赞同：0
> 
> 时间：2012-08-02T15:12:48.287
> 
> 标签：c#, linq, linq-to-sql

**问题：**希望为每种类型选择 1 行

**表：** EntryPrices

参加类型 ID (int)

名称 (nvarchar)

价格（整数）

GroupId (int)

FromDate(日期时间) //yyyy-MM-dd

**示例：** 基本条目 - 100 - 1 - 2012-08-01

赞助商参赛 - 350 - 2 - 2012-08-01

员工入职 - 70 - 3 - 2012-08-01

基本条目 - 150 - 1 - 2012-10-01

基本条目 - 200 - 1 - 2012-12-01

如您所见，有 3 个基本条目。每个都有效，具体取决于他们注册的日期。因此，如果一个人在 9 月中旬注册，他将在 150 年 11 月中旬和 200 年 12 月结束时获得 100 个。

但是，我想根据今天的日期获得“有效”费用，并且我想将其列在下拉列表中。

> 因此，如果我今天（2012 年 8 月 2 日）查询这个，我应该得到以下行：
> 
> 基本条目 - 100 - 1 - 2012-08-01
> 
> 赞助商参赛 - 350 - 2 - 2012-08-01
> 
> 员工入职 - 70 - 3 - 2012-08-01
> 
> 如果我查询这个（2012 年 12 月 20 日），我应该得到以下行：
> 
> 赞助商参赛 - 350 - 2 - 2012-08-01
> 
> 员工入职 - 70 - 3 - 2012-08-01
> 
> 基本条目 - 200 - 1 - 2012-12-01

我如何在 linq-to-sql 中构造它？

我的想法是这样的：

```
var f = from data in mc.AttendingTypes
                    where DateTime.Now.CompareTo(data.FromDate) > 0
                    group data by new { data.GroupId, data.Name, data.Price, data.AttendingTypesId }
                    into newData
                    select new { newData.Key.Name, newData.Key.Price, newData.Key.AttendingTypesId }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:44:39.743

我宁愿做这样的事情：

```
var today = DateTime.Now;

var result = mc.AttendingTypes
             .Where(at => at.FromDate <= today)
             .GroupBy(at => at.GroupId)
             .Select(g => g.OrderByDescending(m => m.FromDate).FirstOrDefault())
             .ToList(); 
```

# ios - 通过 USB 从 Windows 机器上查看 Safari/iOS 上的本地网站

> ID：11780577
> 
> 赞同：3
> 
> 时间：2012-08-02T15:12:50.387
> 
> 标签：ios, windows, ipad, html, safari

有没有一种方法可以查看我通过 USB 连接的本地 Windows 7 笔记本电脑提供的 iPod touch 上的网站？我不能使用相互访问的无线网络，因为除了说 VPN 和代理涉及复杂性之外，我不会进入这里。

我们正在尝试为 iPad/iPhone 的 Safari 调试 HTML5 网站，而无需部署到远程服务器。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T07:33:17.707

我以前遇到过这个问题，以下是我的解决方法

*   使用桌面应用程序，例如：[http](http://www.electricplum.com/simulator.aspx)
    ://www.electricplum.com/simulator.aspx 有了这个，就不需要单独的设备了。
*   设置一个列入白名单的 nginx 服务器。但是，在您的情况下这是不可能的。

我还没有尝试过的最后一个选项是[apacheipple](http://ripple.incubator.apache.org/)。

-Relfor

# javascript - 将路径元素附加到 svg 元素而不覆盖

> ID：11780578
> 
> 赞同：0
> 
> 时间：2012-08-02T15:12:52.447
> 
> 标签：javascript, svg, d3.js

我有一个可视化，我已经附加了一些 svg 路径元素。然后我执行一些操作，我想在不覆盖现有数据的情况下附加更多的 svg 路径对象。我怎样才能做到这一点？如果我只是选择所有路径元素并尝试添加新元素，它就不起作用。

干杯

深蓝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:22:54.013

您必须选择 svg 路径的父级，通常是组元素`g`并使用键函数来标识您的数据点，因此该`enter()`方法将仅添加新数据，并且该`update()`方法将更新现有路径。[在Object Constancy](http://bost.ocks.org/mike/constancy/ "对象恒常性")一文中有一个例子，解释了这种机制并有示例代码。

# css - 在 div 图像上使用 :nth-child(odd) 选择器

> ID：11780589
> 
> 赞同：1
> 
> 时间：2012-08-02T15:13:31.513
> 
> 标签：css, css-selectors

我在使用 CSS 的`:nth-child(odd)`选择器时遇到了一些麻烦。当我基于 div 类选择它时，似乎将 CSS 规则应用于每个图像。

例如：

```
.class img:nth-child(odd) { margin-right:10px; } 
```

这导致所有这些都被选中。尝试使用

```
img.class:nth-child(odd) { margin-right:10px; } 
```

并得到相同的结果。 [http://jsfiddle.net/7mUDG/](http://jsfiddle.net/7mUDG/)

它仅适用于表格元素或其他东西吗？我是不是选错了？

非常感谢，所以

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:21:55.643

您的 :nth-child 选择器太深了一层。看看[http://jsfiddle.net/demchak_alex/7mUDG/2/](http://jsfiddle.net/demchak_alex/7mUDG/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T15:32:03.807

```
.hello a:nth-child(odd) {
    margin-right:10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:34:52.870

我用了 2n-1 效果很好

[http://jsfiddle.net/tjharrop/7mUDG/3/](http://jsfiddle.net/tjharrop/7mUDG/3/)

还将边距更改为红色边框，使其更容易看到

# jquery - jquery lightbox将文本链接识别为div内的图像

> ID：11780590
> 
> 赞同：1
> 
> 时间：2012-08-02T15:13:33.050
> 
> 标签：jquery, html, hyperlink, lightbox

我正在使用 jquery 灯箱，我有一个带有灯箱功能的 div。在这个 div 里面我有另一个 div 有一个文本链接。jquery 将文本链接识别为图像并尝试将其打开并忽略指向其他页面的链接。下面是 div 的 html。

```
**<div id="royalartcontent">

   <p><b> The Royal Artillery<br>
      <br>
      </b><strong>19th Regiment Royal Artillery, The Highland Gunners</strong>  </p>
   <p>    <a href="images/19reg.jpg"><img src="images/19regsm.jpg" alt="19th Regiment Royal Artillery, The Highland Gunners" width="126" height="142" border="1"></a>
    19th Regiment Royal Artillery, The Highland Gunners, currently supports 12 Mechanised Brigade in the armoured field artillery role. The regiment has Fire Support Teams mounted in Warrior Mechanised Artillery Observation Vehicles equipped with MSTAR. The regiment&rsquo;s three gun batteries are equipped with 18 AS-90 self-propelled guns.

  </p>
   <p>&nbsp;</p>
   <p>5 (Gibraltar 1779&ndash;1783) Battery<br>
     13 (Martinique 1809) Headquarters Battery<br>
     28/143 (Tombs&rsquo;s Troop) Battery<br>
     52 (Niagara) Battery<br>
     127 (Dragon) Battery</p>
   <p>19th Regiment is based in Tidworth, Wiltshire. They recruit from Highlands, Grampian, Tayside, Fife, Central and Argyle.</p>
   <p>19 Regiment RA is the local Artillery Regiment of the Highland areas of Scotland, The Western Islands, The Shetland Islands and The Orkney Islands. The Regiment has been granted the Freedom of the Cities of Inverness and Colchester and wears the Robertson Hunting tartan of the Clan Donnachaidh.<br>
     Freedom of the City<br>
     Taken from: wikipedia.org/wiki/19th_Regiment_Royal_Artillery</p>
   <p><div id="royalart"><a href="images/Guns.jpg"><img src="images/Gunssm.jpg" alt="Guns firing at Edinburgh Castle" width="170" height="112" border="1"></a></div>
   <div class="royalart1"><a href="105threg.html">105th Regiment Royal Artillery (Volunteers)</a></div>** 
```

主 div 是“royalartcontent” div，包含文本链接的是“royalart1”。我只复制了 div 的一部分，因为下面还有其他内容。

我在 div 中有一个 div，因为页面的完整内容太长，所以我在“royalartcontent”div 上使用溢出：自动。否则我不会在其他 div 中放置一个 div。

有人有想法吗？

# html - 调整内容大小以适应高度 CSS 溢出？

> ID：11780595
> 
> 赞同：0
> 
> 时间：2012-08-02T15:13:44.703
> 
> 标签：html, css, height

我想疯了，如果`height: 100%;`拉伸一个元素以适应其父高度，为什么它会溢出？我正在几个浏览器中进行测试，所有浏览器都显示相同的问题。

我有这个结构

```
html
>body
>>container
>>>header
>>>content
>>>footer 
```

我想要的是拉伸内容高度，以便容器适合浏览器窗口

我尝试了很多不同的方法，使 html 和正文高度为 100%，追求绝对值和零的顶部和底部......并且没有什么真正起作用，每当我拉伸内容时，页脚就会跳出容器

这是一个例子：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html, body {
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
}
#container 
{
 height: 100%;
}
#content 
{
min-height: 100%;
}
</style>
</head>
<body>
<div id="container">
<div id="header">
1
</div>
<div id="content">
2
</div>
<div id="footer">
3
</div>
</div>

</body>
</html> 
```

这有什么问题，为什么会消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:36:19.547

也许这可以解决您的问题。里面的div需要加起来100%

```
body{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

#container  
{ 
    height: 100%; 
} 
#header{
    height: 20%;  /*random number  but all three should add up to 100%*/
}
#content  
{ 
    min-height: 70%; /*random number*/
} 

#footer{
    height:10%; /*random number*/
} 
```

# php - 左右打印数组值（轮流）

> ID：11780596
> 
> 赞同：0
> 
> 时间：2012-08-02T15:13:45.577
> 
> 标签：php, html, css

我有数组

```
 $mas = array("aaa","bbb","ccc","ddd","fff"); 
```

我想打印这个数组：

```
 aaa bbb
 ccc ddd
 fff 
```

我不知道，如何为此制作html/css，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:21:09.093

CSS:

```
span.row {
  display:block;
}

span.margin {
  display:inline-block;
  margin-right:10px;
} 
```

PHP:

```
$mas = array("aaa","bbb","ccc","ddd","fff");

echo '<span class="row">';

for($i = 0; $i < count($mas); $i++) {
  echo $i % 2 == 0 ? '</span><span class="row">';
  echo '<span class="margin">' . $mas[$i] . '</span>';
}

echo '</span>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:21:53.847

If you want to print an array with two items per line, you can try the following:

```
<?php
$output = "<div>";
for($i = 0; $i < count($mas); $i++)
{
    if($i % 2 == 0)
        $output .= "<p>".$mas[$i]." ";
    else
        $output .= $mas[$i]."</p>";
}
echo $output."</div>"; 
```

Use CSS to style the `<p>` tags to your liking with regards to spacing.

# php - 访问媒体文件信息

> ID：11780604
> 
> 赞同：0
> 
> 时间：2012-08-02T15:14:05.623
> 
> 标签：php, file, media, extract

我有大量媒体文件 .wmv ，我想从中提取信息；文件名、大小、创建日期、评论和标签等。

我有一小段 php 代码，它允许我访问基本信息，如名称、大小和创建日期，但我找不到访问更详细信息（如评论、评级和标签）的方法。

```
<?php  
$imgdir = 'images/';

$strFileName = "meg4_big.wmv";  
$objFopen = fopen($strFileName,"r");  
echo "Files Size = ".filesize($strFileName) . "<br>";  
echo "Read able = ".is_readable($strFileName) . "<br>";  
echo "Write able = ".is_writable($strFileName) . "<br>";  
echo "Modify Date = ".date( "D d M Y g:i A", filemtime($strFileName)) . "<br>";  
echo "Last Updated Time = ".date( "D d M Y g:i A", filemtime($strFileName)) . "<br>"; 
fclose ($objFopen);

?> 
```

有谁知道访问这些额外信息的任何方法？它不需要是php，但它会是prefereable。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:06:21.147

目前尚不清楚这里会得到什么——该文件不包含评级。它可能包含诸如评论之类的元数据。对您的问题的评论指向如何提取元数据 - 您可能需要为此打开文件 - 但您无需打开文件即可获取当前正在捕获的数据。

# html - 常见的重叠问题，但通常的答案似乎不起作用

> ID：11780610
> 
> 赞同：1
> 
> 时间：2012-08-02T15:14:15.647
> 
> 标签：html, css

好吧，伙计们，我完全知道这个问题已经在几个网站上被问过好几次了，我已经完成了我的研究并尝试了人们给出的所有解决方案，但我显然错过了一些东西，因为他们没有帮助。我对 HTML 和 CSS 比较陌生，所以我可能忽略了一些简单的东西。

这是我的问题。我有页眉和容器 div，然后是页脚 div，我希望页脚 div 保持在窗口底部，但是当窗口调整大小时，我不希望它与容​​器 div 重叠。

我可以让页脚 div 粘在浏览器的底部，明显的绝对位置和底部 0 CSS 没有问题，但显然这会导致容器 div 的重叠问题，所以我做了我的研究并尝试添加一个相对定位到 body 标签，然后将页脚 div 移动到容器 div 的底部，而不是窗口的底部。我在这里创建了我的问题的迷你模拟：

首先没有身体上的相对位置：

[http://www.klstuff.com/test1](http://www.klstuff.com/test1)

然后在身体上的相对位置：

[http://www.klstuff.com/test2](http://www.klstuff.com/test2)

基本上我希望框 2 贴在窗口的底部，但是当窗口调整大小时，我不希望它与框 1 重叠。我还尝试将 min-height 和 height 100% 属性添加到 body 和 container 标签，但是似乎什么也没做。这是 test2 的代码（我认为相对位置属性稍微接近正确。）

```
<?xml version="1.0" encoding ="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<head>
<title>HTML/CSS Test Site</title>
<meta name="description" content="HTML/CSS testing page.">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>

<div id="Box1">
    <p>BOX 1</p>
</div>

<div id="Box2">
    <p>BOX 2</p>
</div>

</body>
</html>

body {
height: 100%;
position: relative;
}

#Box1 {
width: 980px;
background-color: blue;
color: #fff;
margin: auto;
text-align: center;
padding-bottom: 150px;
padding-bottom: 150px;
margin-top: 200px;
}

#Box2 {
width: 100%;
background-color: red;
text-align: center;
padding-bottom: 50px;
padding-bottom: 50px;
position: absolute;
bottom: 0;
left: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:20:17.007

哇呼终于做到了！花了我一段时间。

好的，首先，在两个盒子周围制作一个包含 div。将主体的高度设置为 100%，然后将容器的最小高度设置为 100%。将容器位置设置为绝对位置，并将其宽度设置为 100%。

然后，为您的页脚设置一个高度，并为您的主要内容设置一个相同值的边距底部（即框 1）。根据代码：

HTML：

```
<div id="container">
   <div id="Box1">
       <p>BOX 1</p>
   </div>

   <div id="Box2">
       <p>BOX 2</p>
   </div>
</div> 
```

CSS：

```
body {
  height: 100%;
  padding: 0px;
  margin: 0px;
}

#Box1 {
  width: 980px;
  background-color: blue;
  color: #fff;
  margin: auto;
  text-align: center;
  height: 150px;
  margin-bottom: 100px;
  margin-top: 200px;
}

#Box2 {
  width: 100%;
  background-color: red;
  text-align: center;
  position: absolute;
  bottom: 0;
  height: 100px;

}

#container {
  width: 100%;
  min-height: 100%;
  position:absolute;
} 
```

希望这可以帮助。这个对我有用。

# entity-framework - CI 构建服务器上的 EF 迁移

> ID：11780617
> 
> 赞同：7
> 
> 时间：2012-08-02T15:14:40.203
> 
> 标签：entity-framework, migration, continuous-integration

我在 Visual Studio 的包管理器中运行迁移。我目前正在为我们的项目设置 CI。我想知道如何从 CI 更新数据库（因为您不在 Visual Studio 环境中）。我是否需要找到一个 powershell.exe 并执行它？

附言。我正在使用 Teamcity 进行 CI。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T18:10:46.910

您可以使用 migrate.exe 在 Visual Studio 环境之外迁移数据库。它位于`packages/EntityFramework.x.x.x/tools`文件夹中。

该工具有一些您需要注意的粗糙边缘。

*   确保 EntityFramework.dll 和 migrate.exe 在同一目录中
*   您可能需要指定`startUpDirectory`参数。将其指向应用程序的输出目录。

您也可以编写自己的工具，Update-Database 命令由`Update`on 方法支持[`DbMigrator`](http://msdn.microsoft.com/en-us/library/hh829276)。

# c# - 如何从 xml 中提取用户数据并将其发送到字符串？

> ID：11780621
> 
> 赞同：-2
> 
> 时间：2012-08-02T15:14:59.393
> 
> 标签：c#, twitter, oauth

[http://www.voiceoftech.com/swhitley/index.php/2009/03/twitter-oauth-with-net/](http://www.voiceoftech.com/swhitley/index.php/2009/03/twitter-oauth-with-net/)

```
url = "http://twitter.com/account/verify_credentials.xml";
xml = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty);
apiResponse.InnerHtml = Server.HtmlEncode(xml); 
```

**如何从 xml 中提取用户数据并将其发送到字符串？即将xml转换为字符串。**

```
string name =
string id= 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:55:30.370

我知道您使用的是 .NET 2.0，所以我在此示例中使用了 XmlDocument：

```
System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
TwitterUser user = new TwitterUser();

string url = "http://api.twitter.com/1/account/verify_credentials.xml";
string xml = oAuth.oAuthWebRequest(oAuthTwitter.Method.GET, url, String.Empty);

xmlDoc.LoadXml(xml);

user.id = xmlDoc.SelectSingleNode("user/id").InnerText;
user.screen_name = xmlDoc.SelectSingleNode("user/screen_name").InnerText;
user.name = xmlDoc.SelectSingleNode("user/name").InnerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:26:44.457

可能是这样的？

```
XDocument doc = XDocument.Parse("<insert xml here or use variable>");
var username = doc.XPathSelectElement("/SomeNode/SomeOtherNode/@username").Value;
var id = doc.XPathSelectElement("/SomeNode/SomeOtherNode/@id").Value; 
```

# ruby - Ruby正则表达式删除空间

> ID：11780622
> 
> 赞同：0
> 
> 时间：2012-08-02T15:15:03.277
> 
> 标签：ruby, regex

你好，再次对不起

我需要一个正则表达式来删除字符空间（“”）。如果其他空格字符没有跟在这个字符后面。

```
Example String

"This  is  a  ex am ple" 

Result 

"This  is  a  example" 
```

我正在尝试这个正则表达式：

```
string.gsub(/\s{1}/,"") 
```

我还认为在子匹配中替换因为我不知道在 ruby​​ 中使用它

```
string.gsub(/(\w)( )(\w)/,/\1\3/) 
```

但是抛出异常。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:23:59.497

试试这个：

```
print "This  is  a  ex am ple".gsub(/(?<=\w)\s(?=\w)/, '') 
```

输出：

```
This  is  a  example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:23:32.187

您在第二个 gsub 中有小错误。试试这个：

```
string.gsub(/(\w)( )(\w)/, '\1\3') 
```

我在你的例子中检查了这个，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:18:32.160

试试这个 reg 表达式：

```
string.gsub(/(?<!\s)\s(?!\s)/, ''); 
```

输入：

```
"This     is    a  ex am ple" 
```

输出：

```
"This     is    a  example" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:23:03.540

```
string.gsub( /(\w) (\w)/, '\1\2' ) 
```

你想在一开始的空间发生什么？

# ruby - rspec中的存根正则表达式

> ID：11780623
> 
> 赞同：0
> 
> 时间：2012-08-02T15:15:05.937
> 
> 标签：ruby, regex, rspec

如何对正则表达式进行存根？例如

```
# somewhere deep in the code
reg = Regexp.new("foo bar")
res = reg.match string

# somewhere in rspec
reg = Regexp.new("foo bar")
reg.stub(:match).with(string).and_return "rspec_res" #doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:20:25.647

我认为这应该有效：

```
reg = stub :match => "rspec_res"
Regex.stub(:new) { reg } 
```

# java - 如何删除字符串中的特殊字符模式

> ID：11780628
> 
> 赞同：1
> 
> 时间：2012-08-02T15:15:27.200
> 
> 标签：java, regex, string

我有一个字符串名称 s，

```
String s = "He can speak English and Sinhala.[1]He<ename> has edited 12 CSE Staff Research Publications.[1][2]" 
```

我想从字符串中删除`[1]`和。`[1][2]`请注意，我们可以在方括号内有任何数字，也可以有任何数量的方括号（如`[number][number][number]...`）。我试过用这个，

```
String removedNoTag = s.replaceAll("[\\[0-9\\]]",""); 
```

是的，它删除了所有 [number].. 模式。但它也会**删除文本中的所有数字**（它`12`也会删除）。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:18:56.157

您正在转义正则表达式中的错误括号。您正在寻找的是：

```
String removedNoTag = s.replaceAll("\\[[0-9]+\\]",""); 
```

或者

```
String removedNoTag = s.replaceAll("\\[\\d+\\]",""); 
```

作为`\d`“ `[0-9]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:17:59.353

试试这个：`String removedNoTag = s.replaceAll("\\[\\d+\\]","");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T15:18:59.677

您的*外*括号定义了一组要删除的字符。该集合定义为`[`和。因此可以检测到这些的任何组合（例如, , , , , ）。`]``0-9``[]``2``]``[3]``[324]``]1[[[`

取而代之的是 try `\\[\\d+\\]`，这意味着左括号、一个或多个数字 ( `\d`) 和一个右括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:19:21.947

因为它删除了一个字符的任何实例，无论是数字还是括号。

用。。。来代替 ：`\\[[0-9]+\\]`

# session - 在 Zend Framework 2 身份验证组件中使用不同的会话命名空间

> ID：11780630
> 
> 赞同：0
> 
> 时间：2012-08-02T15:15:35.797
> 
> 标签：session, authentication, zend-framework2

我计划在未来的项目中使用 ZF2，所以我现在正在尝试 Zend Framework 2 RC1。我从身份验证步骤开始，并注意到当我为会话存储命名空间选择与“Zend_Auth”不同的名称时，我无法访问存储在会话中的对象（AuthenticationService 类的 hasIdentity 方法返回 false，尽管会话中设置了用户对象数据）。

```
<?php
namespace Application\Controller;

use Zend\Authentication\Adapter\DbTable as AuthAdapter;
use Zend\Authentication\AuthenticationService;
use Zend\Authentication\Storage\Session as SessionStorage;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Application\Model\User;
use Application\Form\LoginForm;

class LoginController extends AbstractActionController
{
    public function indexAction()
    {
        $auth = new AuthenticationService();

        if ($auth->hasIdentity()) {
            return $this->redirect()->toRoute('application');
        }

        $form = new LoginForm();
        return array('form' => $form);
    }

    public function loginAction()
    {
        $auth = new AuthenticationService();

        $form = new LoginForm();
        $form->get('submit')->setAttribute('value', 'Add');

        $request = $this->getRequest();

        if ($request->isPost()) {
            $user = new User();
            $form->setInputFilter($user->getInputFilter('login'));

            $form->setData($request->getPost());
            if ($form->isValid()) {
                $data = $form->getData();

                // Configure the instance with constructor parameters...
                $sm          = $this->getServiceLocator();
                $dbAdapter   = $sm->get('db-adapter');
                $authAdapter = new AuthAdapter($dbAdapter, 'users', 'username', 'password');

                $authAdapter
                    ->setIdentity($data['username'])
                    ->setCredential(sha1($data['password']));

                // Use 'users' instead of 'Zend_Auth'
                $auth->setStorage(new SessionStorage('users'));

                $result = $auth->authenticate($authAdapter);

                if ($result->isValid()) {
                    // store the identity as an object where only the username and
                    // real_name have been returned
                    $storage = $auth->getStorage();

                    // store the identity as an object where the password column has
                    // been omitted
                    $storage->write($authAdapter->getResultRowObject(
                        null,
                        'password'
                    ));

                    // Redirect to list of application
                    return $this->redirect()->toRoute('application');
                }
            }    
        }

        // processed if form is not valid
        return array('form' => $form);
    }
} 
```

在这段代码中，当我更改以下行时，

```
$auth->setStorage(new SessionStorage('users')); 
```

像这样：

```
$auth->setStorage(new SessionStorage()); 
```

hasIdentity 方法返回 true。

我检查了 Zend\Authentication\AuthenticationService 和 Zend\Authentication\Storage\Session 两个类，并没有看到访问会话数据的方法，这些会话数据具有不同于默认的会话命名空间。

我需要了解的是如何访问具有不同名称空间的会话数据，如果目前没有办法，我们应该将其定义为错误吗？

如果需要任何其他信息，我可以更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:15:48.950

我们有点遗漏了您代码的一部分，即您尝试接收用户身份的部分。我猜你忘记传递具有相同命名空间的 SessionStorage 对象。

身份验证对象的配置也应该移到工厂，这样就不会出现此类问题。

那至少是我的五美分:)

# ios - 确定 iOS UITextView 的填充和大小

> ID：11780631
> 
> 赞同：1
> 
> 时间：2012-08-02T15:15:49.640
> 
> 标签：ios, uitextview

### 项目

我正在尝试复制本机 iMessage 应用程序。我使用[AcaniChat](https://github.com/acani/AcaniChat/)作为基础。

我想要自动*突出显示*，所以我修改了代码以使用`UITextView`而不是`UILabel`. 我意识到有诸如[FancyLabel](http://furbo.org/2008/10/07/fancy-uilabels/)和[Three20 之](https://github.com/facebook/three20)类的选项。但是，`UITextView`这是本机的。

### 问题

我很难获得`UITextView`正确的填充/大小。[我根据其他答案](https://stackoverflow.com/questions/746670/how-to-lose-margin-padding-in-uitextview)中的建议更新了该`contentInset`属性。

```
msgText.contentInset = UIEdgeInsetsMake(-11.0f, -8.0f, 0.0f, -8.0f); 
```

我还通过以下方式确定大小：

```
CGSize size = [[(Message *)object text] sizeWithFont:[UIFont systemFontOfSize:kMessageFontSize]
                                   constrainedToSize:CGSizeMake(kMessageTextWidth, CGFLOAT_MAX)
                                       lineBreakMode:UILineBreakModeWordWrap]; 
```

尽管如此，一些文本仍然被截断（见下图）。值得注意的是电话号码和电子邮件地址（右）以及“那个切断？” （剩下）

我已经证实这不是由于`dataDetectorsTypes`财产。

### 问题

我可以通过`CGRect`增加`UITextView`. 但我想更好地了解边距/填充和大小的影响`UITextView`。我不想通过使其工作来任意`20.0f`增加*大小*。

因此，我可以可靠地设置消息气泡大小*的*代码或代码组合是什么？

![在此处输入图像描述](../Images/94825ceb0a66971800bfdee4119a7aec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:57:49.210

不是解决您的 UITextView 问题的解决方案，但是......我遇到了类似的问题，并决定给核心文本一个机会。您可以更好地控制正在发生的事情。您可以使用正则表达式声明您的字符串，以使链接/电子邮件/电话号码可见，并且还有机会使用其他字体。

# java - Eclipse中交互式控制台有什么用（调试视图）

> ID：11780633
> 
> 赞同：13
> 
> 时间：2012-08-02T15:15:54.227
> 
> 标签：java, eclipse

[一些线程](https://stackoverflow.com/questions/5579436/how-to-use-eclipse-interactive-console-in-debug)询问如何在 Eclipse 中使用“交互式控制台”，因为您无法在此控制台中键入任何内容。

有人建议您可以“显示视图”来执行代码。

那么“交互式控制台”的目的是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-06T21:34:23.983

Eclipse 在其默认安装中没有“交互式控制台”。它只有一个“显示”视图，可用于在当前断点范围内以调试模式执行 Java 代码（评估表达式或更改数据）

如果您有一个“交互式控制台”，它很可能是来自插件的视图。我读过谷歌插件可能会提供它。或者可能是 JRuby 或 Groovy 等脚本语言的插件。

如果您说您有一个“交互式控制台”并且无法输入，那么我怀疑您没有处于正确的模式以使视图处于活动状态（也许您没有使用提供视图的脚本语言）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T15:34:32.790

对不起，但接受的答案不正确。

当正在运行的应用程序从控制台输入流中读取数据时，Eclipse 中的控制台是交互式的。

它并不是 Eclipse 的一个特性来帮助调试，而是允许基于控制台的 Java 应用程序在调试时读取用户的输入（就像我可以输入控制台提示符一样）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:42:24.440

**较早的答案（接受但不正确）**：

```
The interactive console allows you to execute some extra code, while debugging, when stopped at via a `breakpoint`.

This is a really beneficial feature when you are debugging and suddenly want to change the value of variable, execute a sysout or some utility function. 
```

****如需正确答案，请查看@mmey 下面的答案。****

# php - 提交表单时如何进行 iframe 突破？我无权访问 iframe 页面代码

> ID：11780635
> 
> 赞同：0
> 
> 时间：2012-08-02T15:15:59.250
> 
> 标签：php, javascript, html, iframe, breakout

我试图让我网站上的用户为外部网站输入他们的用户名，然后被重定向到该网站以输入他们的密码。我试图去另一个站点查看表单详细信息并复制隐藏字段以让我的表单，但该站点动态设置了其中一些隐藏字段。

所以我认为接下来最好的解决方案是将页面放入 iframe 中。iframe 中的页面只有一个表单来输入用户 ID，然后重定向密码。

用户在 iframe 中提交表单后，有没有办法让 iframe 突破？

最好使用 html、php 或 javascript。-布莱恩

# jquery - 用一个导航控制多个 AnySlider

> ID：11780640
> 
> 赞同：1
> 
> 时间：2012-08-02T15:16:24.063
> 
> 标签：jquery, anythingslider

我正在使用 AnythingSlider，[http](http://proloser.github.com/AnythingSlider/) ://proloser.github.com/AnythingSlider/ ，并创建了一个包含 2 个滑块的页面。

是否可以仅使用其中一个的上一个/下一个箭头来控制这两个滑块？即您单击slider1 的'prev' 箭头，slider2 也移动到上一张幻灯片。

我在 onSlideBegin 回调中使用一个函数，并将 targetPage 传递给另一个滑块（$slider）：

```
$imgSlider = $('#imgSlider').anythingSlider({
    onSlideBegin: function(e, slider) {
        $slider.anythingSlider(slider.targetPage);
    }
}); 
```

问题是从第一张幻灯片移动到最后一张（或从最后一张到第一张）。箭头所属的滑块按需要运行（滑块是无限的，因此从第一个移动到最后一个使用克隆的幻灯片）。但是另一个滑块会倒回所有幻灯片。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:07:16.157

当您告诉 AnySlider 转到特定页面时，它会直接转到那里，而不是滑过克隆的幻灯片。[该演示](http://jsfiddle.net/Mottie/rWjrU/791/)来自[主页 wiki](https://github.com/ProLoser/AnythingSlider/wiki)页面，该页面具有一组控制两个滑块的箭头。

```
$('#slider1, #slider2').anythingSlider({

    // If true, builds the forwards and backwards buttons
    buildArrows: false

});

$('#fwd, #bck').click(function(){
    var direction = (this.id === 'fwd') ? 'goForward' : 'goBack';
    $('ul[id^=slider]').each(function(){
        $(this).data('AnythingSlider')[direction]();
    });
});​ 
```

# .net - .Net 4 - 返回用户 windows 登录

> ID：11780641
> 
> 赞同：1
> 
> 时间：2012-08-02T15:16:24.493
> 
> 标签：.net, visual-studio-2010, iis-7, active-directory

寻找一些关于在哪里改变这个的信息......我有一个 .net 4 web 应用程序坐在一个盒子上，它的 SQL db 坐在另一个盒子上。用户窗口 AD 登录被拾取并在整个应用程序中使用

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

如果我在本地运行应用程序，我会得到正确的登录名，例如“MyDomain\MyLogin”，如果我在其主机框中点击应用程序，则选择的登录名将变为“IIS APPPOOL\ASB”，ASB 是使用的 AppPool 的名称（并且应用程序的名称）。我真的需要返回“MyDomain\MyLogin”，所以我应该使用不同的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:46:33.350

如果您希望 Web 应用程序运行已连接用户的安全上下文，则需要将以下内容添加到`<system.web>`web.config 文件的部分：

```
 <authentication mode="Windows" />
  <identity impersonate="true" /> 
```

第一行告诉[IIS 如何对用户进行身份验证](http://msdn.microsoft.com/en-us/library/aa292114%28v=vs.71%29)，第二行告诉 ASP.Net 您希望在[已连接用户的安全上下文中](http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx)运行 Web 应用程序，而不是在 IIS 应用程序池的安全上下文中运行。

请注意，您还可以使用[标识元素](http://msdn.microsoft.com/en-us/library/72wdk8cc%28v=vs.71%29.aspx)来指定所有请求都将在特定用户的上下文中运行。

# javascript - 如何为日期创建 KnockoutJS 自定义绑定

> ID：11780643
> 
> 赞同：0
> 
> 时间：2012-08-02T15:16:27.447
> 
> 标签：javascript, knockout.js

我创建了以下 js fiddle [http://jsfiddle.net/pltaylor3/DsJKp/](http://jsfiddle.net/pltaylor3/DsJKp/)以尝试将 MVC4 创建的日期绑定到用户可编辑的日期，该日期也可以发送回服务器。我的日期显示正确，但是当我编辑日期时，它似乎没有更新淘汰模型。我的自定义绑定缺少什么来更新 Knockout 模型。我知道更新日期和年份缺少一些逻辑，但月份应该是可更新的。

# android - 如何读取 Android 屏幕亮度/暗度的真实当前值？

> ID：11780646
> 
> 赞同：6
> 
> 时间：2012-08-02T15:16:38.347
> 
> 标签：android, screen, brightness

整个问题都在标题中，所以我想尽可能强调：

*   我对**当前值**感兴趣（不是它的当前设置）

*   我对**实际值**感兴趣（因此，如果屏幕的亮度现在低于一秒前，该值也应该更低）

可悲的是，尽管阅读了许多帖子，但我不知道答案。我写了一个小实用程序，每一秒都显示时间和亮度。而且它不起作用-因为当手机（带有Android 4.0的LG L5）自动**降低**亮度（屏幕变暗，毫无疑问）时，值保持**不变**！

这是相关的代码：

```
try
{
  float sys_brightness = android.provider.Settings.System
                         .getFloat(getContentResolver(),
                                   android.provider.Settings
                                   .System.SCREEN_BRIGHTNESS);

  WindowManager.LayoutParams lp = getWindow().getAttributes();  
  float dim = lp.dimAmount;
  float scr_brightness = lp.screenBrightness;
  boolean dim_changed = (lp.flags & WindowManager.LayoutParams
                                    .DIM_AMOUNT_CHANGED)>0;  

  textView.setText(String.format("%02d:%02d:%02d", hours, minutes, seconds)+" "
                   +String.format("%02f, %02f, %02f", sys_brightness,dim,scr_brightness)
                   +" "+Boolean.toString(dim_changed));
}
catch (SettingNotFoundException ex)
{
  textView.setText("excepton");
} 
```

作为记录，值为 -- 92、1.0、-1.0、false。每时每刻。

**问题**——如何读取当前的真实亮度/暗淡值？

*我在输出中添加了时钟以确保我的读数在滴答作响。他们是。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:49:15.467

如果你`grep -r "SCREEN_BRIGHTNESS" *`在`android/system/frameworks`（android 源代码）中这样做，你会发现：BrightnessController.java 用于控制亮度。也许你可以把这门课当作灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:16:19.400

以下代码段产生一个从 0 到 1 的浮点数，这似乎与亮度相对应。

```
WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
Float darkness = layoutParams.screenBrightness; 
```

当亮度设置为零时，华硕平板电脑似乎显示暗屏。kindle 火很暗，退到锁屏后面。

# php - PHP尝试调用没有任何名称的函数

> ID：11780647
> 
> 赞同：0
> 
> 时间：2012-08-02T15:16:42.407
> 
> 标签：php, function, undefined, fatal-error

运行此 PHP 代码时：

```
// test value
$value = "123456-7890";

// remove blank spaces and explode
$value = str_replace(' ', '', $value);
$value = explode('-', $value);

// check number of digits depending on format
if ((count($value) == 1 && strlen($value[0]) != 10) || (strlen($value[0]) != 6 || strlen($value[1]) != 4))
{
    echo "wrong number of digits!";
} 
```

我收到以下错误：

```
PHP Fatal error:  Call to undefined function  () in /Users/Rikard/Desktop/test.php on line 10 
```

据我所知，这部分出现了问题：`strlen($value[0]) != 10`但我看不出它为什么会出现，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:20:07.407

# android - 阻止要发送的 Android 应用程序

> ID：11780648
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:16:44.577
> 
> 标签：android, block

是否可以阻止将我的应用程序（.apk 文件）从安装它的手机发送到另一部手机？它不会出现在市场上，我会手动安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:22:05.723

If you're asking whether it is possible to stop a user from doing stuff with the .APK application file then no, there is no full proof way. But you can make it more difficult for them.

[How to proect .apk file being shared with other people?](https://stackoverflow.com/questions/7717580/how-to-proect-apk-file-being-shared-with-other-people)

# machine-learning - 将翻转图像用于机器学习数据集

> ID：11780650
> 
> 赞同：2
> 
> 时间：2012-08-02T15:16:47.137
> 
> 标签：machine-learning, computer-vision

我有一个二进制分类问题。我正在尝试训练神经网络从图像中识别对象。目前我有大约 1500 张 50x50 的图像。问题是通过水平翻转的相同图像扩展我当前的训练集是否是一个好主意？（图像不是对称的）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:27:01.867

我认为你可以在更大程度上做到这一点，不仅仅是水平翻转图像，而是将图像的角度改变 1 度。这将为您的训练集中的每个实例生成 360 个样本。根据您的算法的速度，这可能是确保算法不仅经过训练以识别图像及其镜像的好方法。

这可能是一个好主意，但话又说回来，我不知道图像识别的目标或领域是什么。假设图像包含字符，并且您要求图像识别软件确定图像是否包含正斜杠`/`或反斜杠`\`，然后翻转图像将使您的训练数据无用。如果您的域没有遇到此类问题，那么我认为翻转它们甚至以不同程度旋转是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:46:57.250

我在 AdaBoost 中使用了翻转图像，并在课程中取得了巨大的成功： 来自 zip“TrainingImages.tar.gz”的[http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/Schedule.php 。](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/Schedule.php)

我知道有一些关于在幻灯片中某处（在主页上）使用翻转图像的利弊的信息，但我找不到它。还有一个很好的资源是[http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/DownloadMaterial/FaceLab/Manual.pdf](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/DownloadMaterial/FaceLab/Manual.pdf)（连同幻灯片）通过诸如查找不同尺度的东西和方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:02:44.660

这取决于您的NN基于什么。如果您要提取旋转不变特征或不依赖于图像内空间位置的特征（如直方图或其他）并使用这些特征训练您的 NN，那么旋转将不是一个好主意。

如果您直接在像素值上进行训练，那么这可能是一个好主意。更多细节可能有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T19:30:09.720

如果图像补丁不是对称的，我认为翻转不是一个好主意。更好的想法是对训练集进行一些相似性转换，但有一些限制。增加数据集的另一种方法是向其添加高斯平滑模板。确保正样本和负样本的数量成比例。太多的正面和太少的负面可能会扭曲分类器并在测试集上表现不佳。

# javascript - 如何在委托中获取列表项内元素的内部 HTML？

> ID：11780651
> 
> 赞同：1
> 
> 时间：2012-08-02T15:16:48.813
> 
> 标签：javascript, jquery

我有这段 HTML：

```
<li eventId="123">
    <img src="image.jpeg"/>
    <h3 id="eventName">Event Name</h3>
    <p id="eventDescription"></p>
</li> 
```

我希望能够通过 jQuery 拉出`<h3>`and`<p>`以便我可以更新它们的值。

我有一个绑定到列表项的委托，单击时我试图抓住`<h3>`并`<p>`使用：

```
function eventIdClicked()
{
    // This gets hold of "123" OK
        theEvent.id = $(this).get(0).getAttribute('eventId');

        // How to get the other 2 inner html?
    var existingEventName = $(this).get(1).getAttribute('eventName');
        var existingEventDesc = $(this).get(2).getAttribute('eventDescription');
    $.mobile.changePage("home.html");
} 
```

我能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:19:43.203

也许像`$(this).find("h3").text()`和`$(this).find("p").text()`？

非常简单的jquery。

此外，虽然在这种情况下它不会影响代码，但 ID 必须是唯一的。

如果 ID 不是唯一的，则元素也可能没有 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:27:50.753

首先，在您的情况下，如果将有多个事件名称和事件描述，您应该使用类而不是 Id。至于事件处理尝试将事件对象传递给函数，如下所示：

```
function eventIdClicked(evt){
   // Now you get get the event target.
   // In your case this is the li element.
   var target = $(evt.target);

   // Now you can pull out the children that you want.
   var eventName = target.children(".eventName").text();
   var eventDescription = target.children(".eventDescription").text();

   // Do more stuff...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:19:56.563

使用[`children`](http://api.jquery.com/children/)功能：

```
var existingEventName = $(this).children('h3')
var existingEventDesc = $(this).children('p'); 
```

现在您可以使用[`text`](http://api.jquery.com/text/)来获取或修改值。另一方面，这些元素也有 id，因此您可以使用 id 选择器访问它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T15:21:32.900

```
function eventIdClicked()
{
    // This gets hold of "123" OK
    theEvent.id = $(this).get(0).getAttribute('eventId');

    // since you used an id for both tags, you could even ommit the context 
    var existingEventName =  $("#eventName", this);
    var existingEventDesc =  $("#eventDescription", this);
    existingEventName.text("a new event name");
    existingEventDesc.text("a new description");

    $.mobile.changePage("home.html");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T15:27:08.380

首先，我认为其中有几个是理所当然的，`<li>`因此您不应该使用必须是唯一的`id`属性。`id`我用类名替换了这些。

```
<li eventId="123">
    <img src="image.jpeg"/>
    <h3 class="name">Event Name</h3>
    <p class="description"></p>
</li> 
```

我使用更简洁的 jQuery 方法清理了您的语法。我还将值添加到您已经引用的对象中。

```
function eventIdClicked()
{
    theEvent.id = $(this).attr('eventId');
    theEvent.name = $('.name', this).text();
    theEvent.description= $('.description', this).text();

    $.mobile.changePage("home.html");
} 
```

如果您使用的是 HTML5，这会更干净：

代替`<li eventId="123">`

*   和`<li data-event="{'id':123,'name':Event Name','description':'Event Description'}">`

代替

```
theEvent.id = $(this).attr('eventId');
theEvent.name = $('.name', this).text();
theEvent.description= $('.description', this).text(); 
```

*   和`theEvent = $(this).data('event');`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-02T15:25:33.280

如果你想改变`innerHTML`and `<h3>`，`<p>`你可以使用

```
$('#eventName').html(/*NEW HTML HERE*/);
$('#eventDescription').html(/*NEW HTML HERE*/); 
```

这是假设`ids`在您的文档中是唯一的

# batch-file - 在有条件的批处理文件上执行命令

> ID：11780655
> 
> 赞同：2
> 
> 时间：2012-08-02T15:17:21.980
> 
> 标签：batch-file, cmd, routes

我需要在 Windows 7 启动时执行两个命令（使用 .bat 文件）：

```
route delete 0.0.0.0 192.168.5.201
route -p add 192.168.4.0 mask 255.255.0.0 192.168.5.201 
```

如果系统上不存在第一条路线 - .bat 文件无法正确执行。第一个命令在无限循环上执行。我如何检查这条路线是否存在然后执行第一个命令？

PS或者也许有另一种方法可以在没有.bat文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:24:10.987

我无法在这里重现无限循环；对我来说，它只是因错误而退出。

但是您可以使用以下命令检查特定路线

```
route print 0.0.0.0 192.168.5.201 
```

但是，仅此还不够，因为退出代码`route`始终为 0。所以你必须通过管道`findstr`：

```
route print 0.0.0.0 192.168.5.201 | findstr 192.168.5.201 
```

之后，您可以检查`errorlevel`：

```
if not errorlevel 1 route delete 0.0.0.0 192.168.5.201 
```

或链接命令：

```
route print 0.0.0.0 192.168.5.201 | findstr 192.168.5.201 && route delete 0.0.0.0 192.168.5.201 
```

# javascript - 骨干数据映射

> ID：11780659
> 
> 赞同：0
> 
> 时间：2012-08-02T15:17:39.193
> 
> 标签：javascript, model-view-controller, backbone.js, datamapper

为了将我的主干模型映射到我从服务器获得的模型，我使用了 GroupOn Dev 博客中描述的技术：[https ://engineering.groupon.com/2012/javascript/extending-backbone-js-to-map-rough- api-responses-into-beautiful-client-side-models/](https://engineering.groupon.com/2012/javascript/extending-backbone-js-to-map-rough-api-responses-into-beautiful-client-side-models/)

但是，这仅将传入数据映射到模型。

我希望这是双向的，这样当我保存模型时，它会准备模型属性以匹配服务器模型。

准备模型输出的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:24:35.383

我遇到了同样的问题，我的服务器响应与我能够发布的完全不同。我在 Backbone.sync 对象的机制中发现了一种方法，我可以在 Backbone.sync 中的以下语句中将自定义 JSON 对象发布到我的服务器：

```
if (!options.data && model && (method == 'create' || method == 'update')) {
  params.contentType = 'application/json';
  params.data = JSON.stringify(model.toJSON());
} 
```

同步评估 options.data 是否不存在，然后将 params.data 设置为字符串化模型。options.data 检查让我失望了。如果存在，同步将使用它而不是模型。因此，鉴于此，我覆盖了我的 model.save 以便可以传入我的服务器期望的属性哈希。

这是我覆盖它的方式：

```
save : function(key, value, options) {
    var attributes = {}, opts = {};

    //Need to use the same conditional that Backbone is using
    //in its default save so that attributes and options
    //are properly passed on to the prototype
    if (_.isObject(key) || key == null) {
        attributes = key;
        opts = value;
    } else {
        attributes = {};
        attributes[key] = value;
        opts = options;
    }

    //In order to set .data to be used by Backbone.sync
    //both opts and attributes must be defined
    if (opts && attributes) {
        opts.data = JSON.stringify(attributes);
        opts.contentType = "application/json";
    }

    //Finally, make a call to the default save now that we've
    //got all the details worked out.
    return Backbone.Model.prototype.save.call(this, attributes, opts);
} 
```

那么你如何在你的情况下使用它呢？本质上，您要做的是创建一个反转映射并返回结果 JSON 的方法。然后你可以从你的视图或控制器调用 save 如下：

```
getReversedMapping : function() {
    ver reversedMap = {};
    ...
    return reversedMap;
},
saveToServer : function() {
    this._model.save(this.getReverseMapping, {
        success : function(model, response) {
            ...
        },
        error : function(model, response) {
            ...
        }
    })
} 
```

由于您覆盖的保存会自动将您传入的 JSON 复制到 options.data，Backbone.sync 将使用它来发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T15:33:52.517

*Brendan Delumpa*的答案很有效，但它使事情变得过于复杂。

不要在你的保存方法中这样做。您不想每次都复制这些参数检查（如果它们在 Backbone 中发生了某种变化怎么办？）。

相反，像这样覆盖模型中的同步方法：

```
var MyModel = Backbone.Model.extend({
    ...,
    sync: function (method, model, options) {
        if (method === 'create' || method === 'update') {

            // get data from model, manipulate and store in "data" variable
            // ...

            options.data = JSON.stringify(data);
            options.contentType = 'application/json';
        }

        return Backbone.Model.prototype.sync.apply(this, arguments);
    }
}); 
```

当您需要以服务器就绪格式“准备”数据时，这就是全部。

# php - 共享服务器上的 PHP 5.4 旧身份验证，无需编辑 mysql 服务器即可修复

> ID：11780661
> 
> 赞同：0
> 
> 时间：2012-08-02T15:17:40.823
> 
> 标签：php, mysql, shared-hosting

我刚刚将我的开发盒的 PHP 升级到了最新版本，`5.4.5`. 这台开发机器连接到远程**MySQL 服务器**，驻留在我从托管公司租用的**共享服务器上。**

尝试使用简单的方法连接到我的远程 MySQL 服务器`mysql_connect('myserver.com', 'user', 'password')`会导致以下错误：

> 警告：mysql_connect()：mysqlnd 无法使用旧的不安全身份验证连接到 MySQL 4.1+。请使用管理工具通过命令 SET PASSWORD = PASSWORD('your_existing_password') 重置密码。这将在 mysql.user 中存储一个新的、更安全的哈希值。如果此用户在 PHP 5.2 或更早版本执行的其他脚本中使用，您可能需要从第 2 行 file.php 中的 my.cnf 文件中删除 old-passwords 标志

就像建议的那样，只需执行：

```
SET PASSWORD = PASSWORD('my-password'); 
```

不会改变任何东西。执行时同样适用

```
SET SESSION old_passwords=FALSE; 
```

经过一番搜索，我意识到**我需要对 MySQL 服务器进行相当深入的访问才能解决这个问题**，而我没有。尝试执行此查询：

```
UPDATE mysql.user SET Password=PASSWORD('my-password')
  WHERE User='my_user' AND Host='my-server';
FLUSH PRIVILEGES; 
```

简单地给我以下错误：

> 1142 - UPDATE command denied to user 'u0112918'@'www10.aname.net' for table 'user'

Requests to have the company execute the query for me has, so far, been unsuccessfull. So my question is if there's any way to **fix this on the client side, without involving the MySQL server?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:23:28.747

Hm, try executing the following query through a **tool other then PhpMyAdmin**, such as Mysql Workbench or through a shell:

```
SET SESSION old_passwords=0; 
SET PASSWORD = PASSWORD('passwordString'); 
```

You should be allowed to change your own password without DML Rights on user-table.

Edit: since it did not resolve the issue - when "read_only" is enabled for the database then you need super rights to change (even your own) password ( [http://dev.mysql.com/doc/refman/5.5/en/set-password.html](http://dev.mysql.com/doc/refman/5.5/en/set-password.html) )

# c# - Visual Studio 2010 文档地图扩展

> ID：11780674
> 
> 赞同：4
> 
> 时间：2012-08-02T15:18:18.797
> 
> 标签：c#, visual-studio, visual-studio-extensions

还没有看到 Visual Studio 2010 的扩展，它使文档映射像这样（在右侧）：

[![在此处输入图像描述](../Images/89d925bf5d9c33316a5932de869ef11c.png)](https://i.stack.imgur.com/E8CnB.png)

是否有用于制作文档地图的 Visual Studio 2010 扩展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:29:41.993

[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef?SRC=VSIDE) （来自 Microsoft的VS2010 扩展）具有所谓的增强滚动条。具有三种模式。你想要的模式是全地图模式

安装后：工具 -> 选项... -> Productivity Power Tools -> 增强滚动条 -> 全地图模式

# matlab - 在 MATLAB 中矢量化组合矩阵和逐元素乘法

> ID：11780683
> 
> 赞同：1
> 
> 时间：2012-08-02T15:18:40.367
> 
> 标签：matlab

我正在寻找一种方法来矢量化组合矩阵乘法和逐元素加法。

假设我有一个矩阵函数 M_{ij}(x) 和一个向量函数 v_j(x)，其中 {i,j} 是矩阵索引，x 是位置变量。我想执行逐元素矩阵乘法并找到 u(x) = M(x).v(x)。一个简单的例子是：

```
imax = 2; jmax = 3; xmax = 10;

M=rand(imax,jmax,xmax);
v=rand(jmax,xmax);
u=zeros(imax,xmax);

for i=1:imax
    for j=1:jmax
        u(i,:) = u(i,:) + squeeze(M(i,j,:))'.*v(j,:);
    end
end 
```

有没有一种矢量化的方式来加速这个操作？在我的问题中，我们将假设 imax,jmax <5，并且 xmax 很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:16:25.083

尝试

```
 u=squeeze(sum(bsxfun(@times,permute(M, [2 3 1]), v)))'; 
```

# java - java通过重新排列链接列表移位项目

> ID：11780687
> 
> 赞同：0
> 
> 时间：2012-08-02T15:18:47.790
> 
> 标签：java, list, linked-list

我正在使用 java 中的链表，我需要获取 x 个对象的列表并将奇数定位的对象移动到列表的末尾。

我必须通过使用链接、没有新节点、没有 list.data 交换来做到这一点。

当我将东西从一个列表移动到另一个列表时，我觉得我有一个不错的处理，但是遍历和附加仅对一个列表的引用真的很困难。

这是实际的问题---

编写一个 shift 方法，通过将位于奇数位置的所有值移动到列表末尾并保留列表顺序来重新排列整数列表的元素。例如，假设一个变量列表存储以下值：

[0, 1, 2, 3, 4, 5, 6, 7] list.shift()的调用；应将列表重新排列为：

[0, 2, 4, 6, 1, 3, 5, 7] 你必须通过重新排列列表的链接来解决这个问题。

* * *

下面是我之前需要编写方法的类（具有上述限制。

我实在想不出一个进攻计划。

```
// A LinkedIntList object can be used to store a list of integers.
public class LinkedIntList {
    private ListNode front;   // node holding first value in list (null if empty)
    private String name = "front";   // string to print for front of list

    // Constructs an empty list.
    public LinkedIntList() {
        front = null;
    }

    // Constructs a list containing the given elements.
    // For quick initialization via Practice-It test cases.
    public LinkedIntList(int... elements) {
        this("front", elements);
    }

    public LinkedIntList(String name, int... elements) {
        this.name = name;
        if (elements.length > 0) {
            front = new ListNode(elements[0]);
            ListNode current = front;
            for (int i = 1; i < elements.length; i++) {
                current.next = new ListNode(elements[i]);
                current = current.next;
            }
        }
    }

    // Constructs a list containing the given front node.
    // For quick initialization via Practice-It ListNode test cases.
    private LinkedIntList(String name, ListNode front) {
        this.name  = name;
        this.front = front;
    }

    // Appends the given value to the end of the list.
    public void add(int value) {
        if (front == null) {
            front = new ListNode(value, front);
        } else {
            ListNode current = front;
            while (current.next != null) {
                current = current.next;
            } 
            current.next = new ListNode(value);
        }
    }

    // Inserts the given value at the given index in the list.
    // Precondition: 0 <= index <= size
    public void add(int index, int value) {
        if (index == 0) {
            front = new ListNode(value, front);
        } else {
            ListNode current = front;
            for (int i = 0; i < index - 1; i++) {
                current = current.next;
            } 
            current.next = new ListNode(value, current.next);
        }
    }

    public boolean equals(Object o) {
        if (o instanceof LinkedIntList) {
            LinkedIntList other = (LinkedIntList) o;
            return toString().equals(other.toString());   // hackish
        } else {
            return false;
        }
    }

    // Returns the integer at the given index in the list.
    // Precondition: 0 <= index < size
    public int get(int index) {
        ListNode current = front;
        for (int i = 0; i < index; i++) {
            current = current.next;
        }
        return current.data;
    }

    // Removes the value at the given index from the list.
    // Precondition: 0 <= index < size
    public void remove(int index) {
        if (index == 0) {
            front = front.next;
        } else {
            ListNode current = front;
            for (int i = 0; i < index - 1; i++) {
                current = current.next;
            }
            current.next = current.next.next;
        }
    }

    // Returns the number of elements in the list.
    public int size() {
        int count = 0;
        ListNode current = front;
        while (current != null) {
            count++;
            current = current.next;
        }
        return count;
    }

    // Returns a text representation of the list, giving
    // indications as to the nodes and link structure of the list.
    // Detects student bugs where the student has inserted a cycle
    // into the list.
    public String toFormattedString() {
        ListNode.clearCycleData();

        String result = this.name;

        ListNode current = front;
        boolean cycle = false;
        while (current != null) {
            result += " -> [" + current.data + "]";
            if (current.cycle) {
                result += " (cycle!)";
                cycle = true;
                break;
            }
            current = current.__gotoNext();
        }

        if (!cycle) {
            result += " /";
        }

        return result;
    }

    // Returns a text representation of the list.
    public String toString() {
        return toFormattedString();
    }

    // Returns a shorter, more "java.util.LinkedList"-like text representation of the list.
    public String toStringShort() {
        ListNode.clearCycleData();

        String result = "[";

        ListNode current = front;
        boolean cycle = false;
        while (current != null) {
            if (result.length() > 1) {
                result += ", ";
            }
            result += current.data;
            if (current.cycle) {
                result += " (cycle!)";
                cycle = true;
                break;
            }
            current = current.__gotoNext();
        }

        if (!cycle) {
            result += "]";
        }

        return result;
    }

    // ListNode is a class for storing a single node of a linked list.  This
    // node class is for a list of integer values.
    // Most of the icky code is related to the task of figuring out
    // if the student has accidentally created a cycle by pointing a later part of the list back to an earlier part.

    public static class ListNode {
        private static final List<ListNode> ALL_NODES = new ArrayList<ListNode>();

        public static void clearCycleData() {
            for (ListNode node : ALL_NODES) {
                node.visited = false;
                node.cycle = false;
            }
        }

        public int data;          // data stored in this node
        public ListNode next;     // link to next node in the list
        public boolean visited;   // has this node been seen yet?
        public boolean cycle;     // is there a cycle at this node?

        // post: constructs a node with data 0 and null link
        public ListNode() {
            this(0, null);
        }

        // post: constructs a node with given data and null link
        public ListNode(int data) {
            this(data, null);
        }

        // post: constructs a node with given data and given link
        public ListNode(int data, ListNode next) {
            ALL_NODES.add(this);
            this.data = data;
            this.next = next;
            this.visited = false;
            this.cycle = false;
        }

        public ListNode __gotoNext() {
            return __gotoNext(true);
        }

        public ListNode __gotoNext(boolean checkForCycle) {
            if (checkForCycle) {
                visited = true;

                if (next != null) {
                    if (next.visited) {
                        // throw new IllegalStateException("cycle detected in list");
                        next.cycle = true;
                    }
                    next.visited = true;
                }
            }
            return next;
        }
    }

// YOUR CODE GOES HERE

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:13:46.107

这样看：

首先，我们需要某种游标来遍历列表并指向我们的“当前”节点

其次，我们需要一些布尔变量（我称之为 INV）初始化为 FALSE ...每次我们在列表中移动一个节点时，我们都会反转 INV

如果你从左边遍历列表，第二个元素是第一个被重新排列的元素，所以这将是我们的初始光标位置

让我们对该元素/节点进行引用，并将该引用保留为中止标准

循环开始：

现在从列表中删除当前节点并将其插入列表的末尾（移动到末尾......不是光标可能不会随节点移动......）

将光标移动到我们刚刚移动的节点的先前位置右侧的节点（如果存在）

如果当前元素是我们的中止标准（我们移动的第一个元素），我们可以假设列表现在按所需顺序排序 -> 我们完成了 -> 退出循环......如果它不是我们的中止标准......继续

将“光标的索引为偶数”评估为 TRUE 或 FALSE ...与 INV 进行异或

如果结果为 TRUE，则将光标移动到下一个元素 ...如果为 FALSE，则删除节点并将其插入末尾（将其移至末尾）

做循环

--

当我们在列表中移动时，这种方法不会保留顺序，但会在列表完成时以所需的顺序排列......

INV var 用于补偿删除节点时索引会移动...（0,1,2,3 ...如果删除 1 并将其放在末尾，则 2 将具有奇数索引，因此如果我们反转每一步，我们都会得到“正确”的元素）

# c# - 是否可以使用 linq 对一组值进行分组？

> ID：11780694
> 
> 赞同：9
> 
> 时间：2012-08-02T15:19:02.320
> 
> 标签：c#, linq, group-by, hashset

我知道如何使用匿名类型按固定的值列表进行分组。我想要做的是按一组实际值分组。

例如，这个表达式的结果是 2。

```
new List<HashSet<int>> {
    new HashSet<int> { 4 },
    new HashSet<int> { 4 }
}.GroupBy (x => x).Count() 
```

我正在寻找一种将这些集合放在同一组中的方法，以便结果为 1。在 python 中，这将使用`frozenset`.

这样做最干净的方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T15:45:06.623

[`HashSet<T>.CreateSetComparer`](http://msdn.microsoft.com/en-us/library/bb335475.aspx)您可以为此目的使用静态方法。

> 返回值
> 
> 类型：System.Collections.Generic.IEqualityComparer> 一个 IEqualityComparer 对象，可用于 HashSet 对象的深度相等性测试。

```
new List<HashSet<int>> {
    new HashSet<int> { 4 },
    new HashSet<int> { 4 }
}.GroupBy (x => x, HashSet<int>.CreateSetComparer()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:40:56.297

（我假设您想将两个集合分组为“相等”——这个问题不是很清楚）

与 LINQ 的情况一样，实现这一点的脚手架已经存在，需要做的是为`IEqualityComparer<T>`适当的方法提供自定义。在这种情况下，这意味着使用[这个重载](http://msdn.microsoft.com/en-us/library/bb534334.aspx)。

这是一个泛型`IEqualityComparer<ISet<T>>`，如果它们的交集与它们的交集相同，则声明两个集合相等：

```
class SetComparer<T> : IEqualityComparer<ISet<T>> {
    public bool Equals(ISet<T> lhs, ISet<T> rhs) {
        // null checks omitted
        return lhs.SetEquals(rhs);
    }

    public int GetHashCode(ISet<T> set) {
        // Not the best choice for a hash function in general,
        // but in this case it's just fine.
        return set.Count;
    }
} 
```

以下是您如何将这两个集合分组在同一个保护伞下：

```
new List<HashSet<int>> {
    new HashSet<int> { 4 },
    new HashSet<int> { 4 }
}.GroupBy (x => x, new SetComparer<int>()).Count(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:34:46.060

```
var result=new HashSet<int> { 4 }.Union(new HashSet<int> { 4 }).Count(); 
```

# matlab - 如何将方程应用于 <12x1 单元格> 的单元格数组

> ID：11780697
> 
> 赞同：1
> 
> 时间：2012-08-02T15:19:07.897
> 
> 标签：matlab, matrix, cell

我有两个单元格数组，它们是 <12x1 cell>，它们分别标记为 A 和 B。每个都包含 12 个矩阵，每个矩阵都是 <45x13 double>。每个单元格内都有矩阵：A1,A2,...A12 和 B1,B2,...B12。

有没有办法让方程输出考虑每一对，而不必写出方程的十二个实例？

因此，创建一个新矩阵，该矩阵具有在对 A1 和 B1、A2 和 B2、... A12、B12 上运行此计算的结果

例如：

```
averageB = sum(B)/length(B);
averageA = sum(A)/length(A);
tapWithSign = (averageB - averageA) ./ (averageB + averageA / 2) * 100;
tapAB = abs(tapWithSign); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:31:48.467

## 方法#1

直截了当的方法是使用[`for`](http://www.mathworks.com/help/techdoc/ref/for.html)循环来完成：

```
C = [];
for i = 1:numel(A);
    C(i).averageB = sum(B{i}) / length(B{i});
    C(i).averageA = sum(A{i}) / length(A{i});
    C(i).tapWithSign = (C(i).averageB - C(i).averageA) ./ ...
       (C(i).averageB + C(i).averageA / 2) * 100;
    C(i).tapAB = abs(tapWithSign{i});
end 
```

我不确定您希望如何存储结果，所以我将它们存储在 中`C`，这是一个结构数组，计算结果作为字段。

## 方法#2

或者，您可以[`cellfun`](http://www.mathworks.com/help/techdoc/ref/cellfun.html)像这样使用：

```
averageA = cellfun(@(x)(sum(x)/length(x)), A, 'Un', 0);
averageB = cellfun(@(x)(sum(x)/length(x)), B, 'Un', 0);
tapWithSign = cellfun(@(x, y)deal((y - x) ./ (y + x / 2) * 100), ...
    averageA, averageB, 'Un', 0);
tapAB = cellfun(@abs, tapWithSign, 'Un', 0); 
```

请注意，这会将计算结果生成为元胞数组。如果要将它们存储在结构中，如第一个示例中所示：

```
C = struct('averageA', averageA, 'averageB', averageB, ...
    'tapWithSign', tapWithSign, 'tapAB', tapAB); 
```

# vb.net - 导出到 excel vb.net

> ID：11780703
> 
> 赞同：1
> 
> 时间：2012-08-02T15:19:26.347
> 
> 标签：vb.net

当我将 flexgrid 从 vb.net vs2008 导出到 office 2010 英文版时，我遇到了一个问题，打开了一个 excel 文件，但它是空的。但是，当我使用 Office 法语版本时，它会打开 [正确]

我的代码是：

```
On Error GoTo ErrorHandler

    Dim iRow As Short
    Dim iCol As Short
    Dim objExcl As Excel.Application
    Dim objWk As Excel.Workbook
    Dim objSht As Excel.Worksheet
    Dim iHead As Short
    Dim vHead As Object

    objExcl = New Excel.Application
    objExcl.Visible = True
    objExcl.UserControl = True

    Dim oldCI As System.Globalization.CultureInfo = _
System.Threading.Thread.CurrentThread.CurrentCulture
    System.Threading.Thread.CurrentThread.CurrentCulture = _
        New System.Globalization.CultureInfo("en-US")

    objWk = objExcl.Workbooks.Add
    System.Threading.Thread.CurrentThread.CurrentCulture = oldCI
    objSht = objWk.Sheets(1)

    vHead = Split(g.FormatString, "|")
    'populate heading in the sheet
    'take the column heading from flex grid and put it in the sheet
    For iHead = 1 To UBound(vHead)

        If Len(Trim(vHead(iHead))) > 0 Then objSht.Cells._Default(1, iHead) = vHead(iHead)
    Next 

    System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.WaitCursor

    For iRow = 0 To g.Rows - 1
        For iCol = 0 To g.get_Cols() - 1
            g.Row = iRow
            g.Col = iCol
            '
            'If g.Text <> "" Then objSht.Cells._Default(iRow + 2, iCol + 1) = g.Text
            If g.Text <> "" Then
                objSht.Range(NumCol2Lattre(iCol + 1) & "" & iRow + 2 & ":" & NumCol2Lattre(iCol + 1) & "" & iRow + 2 & "").Select()
                objExcl.ActiveCell.Value = g.Text
            End If
        Next iCol

    Next iRow

    objExcl.Application.Visible = True

    System.Windows.Forms.Cursor.Current = System.Windows.Forms.Cursors.Default

    objSht = Nothing

    objWk = Nothingl may not be destroyed until it is garbage collected. Click 
    objExcl = Nothing
    Exit Sub

ErrorHandler:    
    objSht = Nothing

    objWk = Nothing

    objExcl = Nothing

    MsgBox("Error In expotation task & " & Err.Description, MsgBoxStyle.Information)
    Err.Clear() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:02:43.207

查看此网站[将 MSFlexGrid 导出到 Excel](http://vbcity.com/forums/p/6685/30529.aspx)

我怀疑你的问题是`vHead = Split(g.FormatString, "|")`使用调试器找出`g.FormatString`. 它会导致错误吗？一次单步执行一行代码，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T07:02:28.363

```
On Error GoTo ErrorHandler

Imports System.Data
Imports System.IO
Imports System.Web.UI

Partial Class ExportGridviewDatainVB
    Inherits System.Web.UI.Page
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load

        If Not IsPostBack Then
            BindGridview()
        End If
    End Sub
    Protected Sub BindGridview()
        Dim dt As New DataTable()
        dt.Columns.Add("UserId", GetType(Int32))
        dt.Columns.Add("UserName", GetType(String))
        dt.Columns.Add("Education", GetType(String))
        dt.Columns.Add("Location", GetType(String))
        dt.Rows.Add(1, "SureshDasari", "B.Tech", "Chennai")
        dt.Rows.Add(2, "MadhavSai", "MBA", "Nagpur")
        dt.Rows.Add(3, "MaheshDasari", "B.Tech", "Nuzividu")
        dt.Rows.Add(4, "Rohini", "MSC", "Chennai")
        dt.Rows.Add(5, "Mahendra", "CA", "Guntur")
        dt.Rows.Add(6, "Honey", "B.Tech", "Nagpur")
        gvDetails.DataSource = dt
        gvDetails.DataBind()
    End Sub
    Public Overrides Sub VerifyRenderingInServerForm(ByVal control As Control)
        ' Verifies that the control is rendered 

    End Sub
    Protected Sub btnExport_Click(ByVal sender As Object, ByVal e As EventArgs)
        Response.ClearContent()
        Response.Buffer = True
        Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", "Customers.xls"))
        Response.ContentType = "application/ms-excel"
        Dim sw As New StringWriter()
        Dim htw As New HtmlTextWriter(sw)
        gvDetails.AllowPaging = False
        BindGridview()
        'Change the Header Row back to white color
        gvDetails.HeaderRow.Style.Add("background-color", "#FFFFFF")
        'Applying stlye to gridview header cells
        For i As Integer = 0 To gvDetails.HeaderRow.Cells.Count - 1
            gvDetails.HeaderRow.Cells(i).Style.Add("background-color", "#df5015")
        Next
        gvDetails.RenderControl(htw)
        Response.Write(sw.ToString())
        Response.[End]()
    End Sub
End Class 
```

# mysql - 根据重要性定期更新Mysql记录

> ID：11780705
> 
> 赞同：0
> 
> 时间：2012-08-02T15:19:31.617
> 
> 标签：mysql, cron

我有一个项目数据库表，我们称它们为游戏。每个游戏都有一个发布日期

我运行一个随机选择游戏的脚本，并从我的源数据中更新各种信息，例如价格等。这个脚本在一个 cron 上，全天定期触发

有 20,000 多条游戏记录并且还在不断增长，因此很明显，这些游戏中的一些保持最新状态比其他游戏更重要。这主要基于发布日期，但也可能包括其他领域的数据。

有什么方法可以让我的批处理脚本根据这个重要性选择一条记录，而不必遍历所有结果，直到每个结果都被更新然后从顶部开始？

那么重要游戏的更新频率会高于不重要的游戏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:47:19.183

正如@Usman 提到的，您需要定义一种可以正常工作的衡量重要性的方法。然后，我的建议是让您的脚本每次运行时更新两条记录。您将从“重要”记录中随机选择其中一条记录，并从所有记录中随机选择另一条记录。

这样您就不会降低更新任何给定记录的可能性，同时您会增加更新重要记录的可能性。

但是，您知道，即使您每秒运行一次随机更新脚本，也不能保证您每天都能获得全部 20,000 条记录。您一周不更新的游戏迷可能会对您的数据过时感到恼火。最好按固定时间表更新内容，或者在获得新数据时进行更新，而不是随机更新。

# jms - 对 weblogic 上的 JMS 进行故障排除

> ID：11780706
> 
> 赞同：1
> 
> 时间：2012-08-02T15:19:40.990
> 
> 标签：jms, weblogic-10.x

我的应用程序将消息写入 JMS 队列。我用调试器检查了一切都写得正确。

在服务器控制台上，在 JMS Monitoring 中，我可以看到`Message Current`数量增加（来自我的消息）。

但是，有一个组件应该从队列中读取消息并在服务器机器上写入文件，而这并没有发生。我还不熟悉JMS。

我应该怎么做才能解决这个问题？在我知道不是第 3 方，而是我们自己的应用程序之前，我应该在配置中寻找什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T15:58:28.897

第一步是检查 JMS 队列中是否有消费者。

以下是查看 JMS 目标上的使用者的方法：

**第 1 步 - 从主页或左侧导航栏中选择“服务”->“消息传递”下的“JMS 服务器”：** ![第 1 步 - 在“服务”->“消息传递”下选择“JMS 服务器”](../Images/01a556d95ede66fa575137bb63a0db13.png)

**第 2 步 - 为 AdminServer 或部署 JMS 队列的托管服务器之一选择“JMS 服务器”：**

![第 2 步 - 为 AdminServer 或部署 JMS 队列的托管服务器之一选择“JMS 服务器”](../Images/b59a0dc9c83548fe8b5d359f7a4fdb12.png)

**第 3 步 - 选择监控 -> 活动目的地。然后选择“自定义此表”并将“Consumers Current”和可选的“Consumers High”添加到表中：** ![第 3 步 - 选择监控 -> 活动目标](../Images/35a2202277454d394c712aa18f45f55e.png)

**第 4 步 - 如果您看不到“Consumers Current”列，请向右滚动。如果应该读取消息的应用程序正在侦听队列，您应该会看到计数 >0。如果 ConsumersCurrent==0 和 ConsumersHigh==0 则没有消费者连接到目的地来读取消息：**

![第 4 步 - 如果您看不到“Consumers Current”列，请向右滚动。 如果应该读取消息的应用程序正在侦听队列，您应该会看到计数 >0。](../Images/08496530aae96b92beb41cfdba4003f8.png)

如果没有消费者，请确保您应该使用消息的应用程序已正确部署和/或配置。

# c++ - How to get Get Process By Name on Mac Os?

> ID：11780718
> 
> 赞同：0
> 
> 时间：2012-08-02T15:20:09.400
> 
> 标签：c++, unix, process, osx-lion

So I want to get a process pointer and do something like Win32 `WaitForSingleObject(hProcess, INFINITE);` that would wait for process to quit if it is not null. How to create such GetProcessByName function for Mac/Unix like Os?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:34:58.360

看`[NSWorkspace runningApplications]`和`[NSRunningApplication runningApplicationsWithBundleIdentifier:]`。你可以通过 KVO 观察 NSRunningApplication 的`terminated`属性。您还可以观看通知`NSWorkspaceDidTerminateApplicationNotification`。

这些都是10.6+。如果您需要早期版本，请根据您的版本要求更新您的问题。在旧版本中是可能的，但 10.6 使它变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:22:51.987

无论如何，你只能等待一个子进程，如果它是一个子进程，你就会有它的 PID（我永远不会忘记我孩子的名字；只是他们的生日）。

请参阅：[waitpid(2)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man2/waitpid.2.html)

# .htaccess - .htaccess 中的重定向

> ID：11780719
> 
> 赞同：1
> 
> 时间：2012-08-02T15:20:10.493
> 
> 标签：.htaccess, redirect, http-status-code-302

我找到了使用 .htaccess 重定向到即将推出的页面的代码。代码有效，但订阅表格无效：

```
# ----------------------------------------------------------------------
# Maintenance page redirection
# ----------------------------------------------------------------------
<IfModule mod_rewrite.c>
  RewriteEngine on
 #  RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.000
   RewriteCond %{REQUEST_URI} !/notify$ [NC]
   RewriteCond %{REQUEST_URI} !\.(jpg|png|gif|css|js) [NC]
  RewriteRule .* /notify [R=302,L]
</IfModule> 
```

抱歉，如果这个问题听起来很基本，但是我如何将每个页面重定向到 /notify 除了 /home/submit_notify ？

当我谈到这个主题时，有人知道从头开始学习 .htaccess 的任何课程吗？我发现的每一个似乎都取决于你已经了解了基础知识。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:20:04.733

尝试添加一个额外的条件来排除`/home/submit_notify`：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_URI} !^/home/submit_notify 
  RewriteCond %{REQUEST_URI} !/notify$ [NC]
  RewriteCond %{REQUEST_URI} !\.(jpg|png|gif|css|js) [NC]
  RewriteRule .* /notify [R=302,L]
</IfModule> 
```

> 当我谈到这个主题时，有人知道从头开始学习 .htaccess 的任何课程吗？我发现的每一个似乎都取决于你已经了解了基础知识。

我认为最好只是反复试验。给自己安装一个本地 apache 和一些测试目录和 htaccess 文件，然后尝试不同的东西。或者尝试解决 Stack Overflow 上的一些 mod_rewrite 问题

# javascript - 具有自定义 json 响应的 Highcharts 系列数据

> ID：11780723
> 
> 赞同：0
> 
> 时间：2012-08-02T15:20:28.373
> 
> 标签：javascript, ajax, ruby-on-rails-3, json, highcharts

一旦调用提交按钮，此图表就会即时构建。该图表使用正确的系列名称呈现，但不显示任何线条。我的 Highcharts 图表中有一个 $.get 调用，如下所示：

```
series: [           
    <% {"WEB1" => Farm.WEB,
        "CAT1" => Farm.CAT,
        "ELK1" => Farm.ELK,
           }.each do |name, farm| %>
    {
    name: "<%= name %>",
    pointInterval: <%= 1.day * 1000 %>,
    pointStart: document.forms["myform"]["from"].value,
    data: $.get("/farm/1", {
        scope: "<%= name %>", 
        from: document.forms["myform"]["from"].value, 
        to: document.forms["myform"]["to"].value 
        }
          })
    },
    <% end %>] 
```

旨在返回此自定义 json 哈希：

```
[{"x":"2012-07-10T17:00:00Z","y":0.015}] 
```

这一切都有效。get 返回正确的哈希。但 Highcharts 不喜欢这样。有人对我如何正确格式化有任何建议吗？提前致谢！

编辑

这就是我的想法。。但它不起作用。。

```
 function(data){
        var arr = new Array();
            $.each(data, function(index,obj) {
               arr.push(obj.y);
       });setData(arr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:38:05.590

你只是，做错了。这不是 ajax 的工作方式。AJAX 是异步的，因此不返回任何内容，而是进行回调。

```
data: $.get(...) 
```

是问题所在，因为 $.get 不会立即返回任何内容，但它也不会阻止或中断 js 处理，因此浏览器会继续执行下一个 js 块，甚至在您的 ajax 调用完成之前。

这就是你通常会这样做的方式。您首先进行 $.get 调用，并在完成后创建图表。

```
$.get("/farm/1", {
    scope: "<%= name %>", 
    from: document.forms["myform"]["from"].value, 
    to: document.forms["myform"]["to"].value 
    },function(data){
          // use the data that was received to build the highchart
          chart=....
      }
}); 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# javascript - 文档准备好时将数据从一个文本框复制到另一个文本框

> ID：11780730
> 
> 赞同：0
> 
> 时间：2012-08-02T15:20:54.090
> 
> 标签：javascript, jquery

在表单中，当文档准备好时，我正在尝试使用 jQuery 将文本框的预设值复制到另一个文本框。我试过 `$("#b").val() = $("#a").val();`了，但它不起作用。请参考[this fiddle](http://jsfiddle.net/Z693R/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:21:59.520

你会用这个：

```
$(document).ready(function() {
    $("#b").val($("#a").val());
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T15:22:08.077

试试这个，

```
$(function() {
    $("#b").val($("#a").val());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:28:59.980

或者你可以这样做：

```
$(function() {
    $("#b")[0].value = $("#a")[0].value;
} 
```

# perl - 使用 PERL 从包含 .txt 文件的目录中去除 HTML

> ID：11780731
> 
> 赞同：0
> 
> 时间：2012-08-02T15:20:58.610
> 
> 标签：perl

我是一个完整的n00b。我已经阅读了该站点上的许多其他帖子，但我无法找到解决这个相对简单问题的方法。基本上，我有一个用 HTML 标记的文本文件目录。我想从这个目录中的每个文件中剥离 HTML，然后将每个单独的文件导出到一个新的文本文件（最好使用 _out.txt 扩展名）。这是我迄今为止尝试过的：

```
use strict;
use warnings;
use File::Find;
use HTML::FormatText;

my $root_path=qq{C:\\Filings\\test}; #Declare your input path
# Recursively it process all the sub directories in $root_path
find(\&process_multiple_dir, $root_path);
sub process_multiple_dir
{
    if (-f && $File::Find::name =~ m{\.txt$}) # It process .txt format files only
    {
          undef $/; # Input Record separator
          # Files Handling process
          open (FIN, "<$File::Find::name") || die "Cannot Open the Input file";
          my $file=<FIN>; # Assign the file handler to scalar variable
          #print $file;

          my $string = HTML::FormatText->format_file($file,leftmargin => 0, rightmargin => 50);
          #print $string;
          close (FIN);
          # Change the file name for the output file creation purpose
          $File::Find::name=~ s{\.txt}{_Out.txt};

          # Print the $file contents to new file
          open (FOUT, ">$File::Find::name") || die "Cannot Create the Output file";
          print FOUT $string;
          close (FOUT);
      }
} 
```

此代码将输出一个具有新文件名的文件（标记为 _out.txt 扩展名），但新创建的文件中没有文本...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:32:53.517

我自己不使用 HTML::FormatText，但我认为正确的语法是：

```
my $string = HTML::FormatText->format_file($File::Find::name,leftmargin => 0, rightmargin => 50); 
```

所以无需打开文件并将其放入`$file`.

（PS：在你的代码中使用一些缩进；它使它更具可读性:)）

# html - box-shadow on ::selection pseudo-element

> ID：11780735
> 
> 赞同：1
> 
> 时间：2012-08-02T15:21:13.797
> 
> 标签：html, css

Is there a way to add a box-shadow to the ::selection pseudo-element?

```
*::selection {
  box-shadow: 2px 2px black;
} 
```

seems not to be working.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:25:13.500

我不相信您可以将 box-shadow 添加到`::selection {}`.

它接受`background-color`：`color`和`text-shadow`。

例如：

```
::selection {
    background-color: black;
    color: white;
    text-shadow: 0 0 8px red;
} 
```

# php - 如何在 phpmyadmin/sql 中设置哈希字段？

> ID：11780738
> 
> 赞同：0
> 
> 时间：2012-08-02T15:21:23.427
> 
> 标签：php, sql, phpmyadmin

我想知道是否有可能在 PHPmyAdmin 中使用 SQL 来获取一个仅显示哈希字符或类似内容的字段，以便未经授权的用户无法看到字母和数字中的这些字符？这是我正在创建的密码字段。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:25:11.510

要直接回答您的问题，是的，MySQL 具有散列函数。它们在[此处](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)列出。

但是，如果您真的想安全地存储密码，请阅读[这篇文章](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)。

**更新**

例如，假设您正在使用`SHA2()`散列密码（在阅读上述文章后使用您自己的判断来确定使用哪种散列算法）。

要将身份验证字符串（读取：“用户从登录屏幕输入的密码”）与存储的密码（读取：“原始用户作为他/她的密码输入的密码”）进行比较，您可以执行以下伪代码：

```
$passwordHash       = getPasswordForUser($userName);
$authenticationHash = sha2($authenticationPassword);

if ($passwordHash === $authenticationHash) {
    // successful login. do something here.
} 
```

# c++ - C++枚举复制构造函数和赋值运算符

> ID：11780758
> 
> 赞同：1
> 
> 时间：2012-08-02T15:22:07.920
> 
> 标签：c++, enumeration, copy-constructor, assignment-operator

我刚刚发现枚举在 C++ 中具有默认构造函数和赋值运算符。有没有人有非默认复制构造函数和赋值运算符的枚举示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:23:41.647

`enum`只是`int`s，这就是为什么他们总是有“赋值运算符”的原因。

默认**情况下**，an 的第一个元素`enum`总是`0`作为值，而在第一个元素之后的所有其他元素都是“previous_value + 1”。

[当然，您可以更改第一个元素的值。实际上，您可以为枚举的每个“成员”赋值。
感谢@Konrad Rudolph 的评论。我只是在开始时没有提到“默认”，因为我们在谈论“默认构造”。]

所以不，`enum`没有“赋值运算符”和“默认/复制构造函数”就没有 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:24:04.123

除了较少的隐式转换之外，枚举器的行为与整数类型非常相似。我想不出一个枚举会有非默认复制构造函数或赋值运算符的情况（除非你将它包装在一个类中）。

# javascript - 使用 tinyMCE 设置文本区域的内容

> ID：11780766
> 
> 赞同：18
> 
> 时间：2012-08-02T15:22:20.980
> 
> 标签：javascript, tinymce, textarea

我有一些文本区域，它们都使用 tinyMCE。

我想设置特定文本区域的内容，但我找不到如何。

我试过这个：

```
 tinyMCE.get('title').setContent(selected_article_title); 
```

这是我的文本区域：

```
<textarea style="width: 95%;" name="Title"  id="title"></textarea> 
```

这里是我的 tinyMCE 初始化：

```
tinyMCE.init({
// General options
mode : "specific_textareas",
theme : "advanced",
width: "100%",
plugins : "pagebreak,paste,fullscreen,visualchars",

// Theme options
theme_advanced_buttons1 : "code,|,bold,italic,underline,|,sub,sup,|,charmap,|,fullscreen,|,bullist,numlist,|,pasteword",
theme_advanced_buttons2 :"",
theme_advanced_buttons3 :"",
theme_advanced_buttons4 :"",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
valid_elements : "i,sub,sup",
invalid_elements : "p, script",
editor_deselector : "mceOthers"
}); 
```

我不知道为什么这不起作用，我使用的是 tinyMCE 网站[http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent中的示例](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-12-02T03:02:16.153

我认为这将解决您的问题

它适用于 TinyMCE v:4。*.*

```
// Sets the HTML contents of the activeEditor editor
tinyMCE.activeEditor.setContent('<span>some</span> html');

// Sets the raw contents of the activeEditor editor
tinyMCE.activeEditor.setContent('<span>some</span> html', {format : 'raw'});

// Sets the content of a specific editor (my_editor in this example)
tinyMCE.get('my_editor').setContent(data); // here my_editor is the id of a specific editor

// Sets the bbcode contents of the activeEditor editor if the bbcode plugin was added
tinyMCE.activeEditor.setContent('[b]some[/b] html', {format : 'bbcode'}); 
```

代码的链接是[TinyMCE setContent](http://archive.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-03T06:36:52.523

我有解决方案（感谢Thariama，他给了我一些元素）

要使用 tinyMCE 设置 textarea 的内容，我们必须在初始化 tinyMCE 之前填写 textarea。此外，响应如下：

1.  创建文本区域：

    ```
    <textarea style="width: 95%;" name="Title"  id="title"></textarea> 
    ```

2.  设置textarea的内容：

    ```
    $('#title').html(selected_article_title); 
    ```

3.  初始化tinyMCE：

    ```
    tinyMCE.init({
    // General options
    mode : "specific_textareas",
    theme : "advanced",
    width: "100%",
    plugins : "pagebreak,paste,fullscreen,visualchars",

    // Theme options
    theme_advanced_buttons1 : "code,|,bold,italic,underline,|,sub,sup,|,charmap,|,fullscreen,|,bullist,numlist,|,pasteword",
    theme_advanced_buttons2 :"",
    theme_advanced_buttons3 :"",
    theme_advanced_buttons4 :"",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    valid_elements : "i,sub,sup",
    invalid_elements : "p, script",
    editor_deselector : "mceOthers"
    }); 
    ```

它完成了！享受。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-07-22T20:35:15.147

对于 tinymce 版本 4，

```
tinymce.get('title').setContent(selected_article_title); 
```

工作得很好 - 在初始化编辑器之后也是如此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-27T06:35:39.880

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-02T15:58:28.913

使用这个

```
tinyMCE.get('title').setContent(selected_article_title); 
```

不会工作。它将设置您的编辑器内容。

要设置编辑器源 html 元素（文本区域），您需要直接使用

```
$('#title').html(selected_article_title); 
```

您需要知道您的编辑器与文本区域不同！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-01T08:19:57.803

如果您设置了包含*mso*标签的内容（例如从 Outlook2013 生成的 html 内容，其中包含编号列表），则会丢失列表元素。通过*tinymce.activeEditor.setContent(foo)*设置或*首先设置 textarea 内容然后初始化 tinymce*给出相同的结果，我们无法正确看到列表元素，它们是左对齐的。但是如果我们使用`setContent(foo, { format:'raw' })`wee 设置，可以正确地看到列表元素。为什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-19T16:50:40.390

以下适用于 tinymce 版本 4，并且在拖动时不会将编辑器显示为文本区域：

```
function initializeEditors() {
    var editorContent = {};
    $("#photo-list").sortable({
        start: function (e, ui) {
            $('.attachment-info').each(function () {
                var id = $(this).attr('id');
                editorContent[id] = tinyMCE.get(id).getContent();
            });
        },
        stop: function (e, ui) {
            $('.attachment-info').each(function () {
                var id = $(this).attr('id');
                tinymce.execCommand('mceRemoveEditor', false, id);
                tinymce.execCommand('mceAddEditor', true, id);
                tinyMCE.get(id).setContent(editorContent[id]);
            });
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-13T19:35:09.887

```
$('#title').html(selected_article_title); 
```

确保 selected_article_title 不包含任何 html 标记。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-09T11:40:23.490

I just wrote this instead of setContent

```
const textarea = document.querySelector('#title')
textarea.innerHTML = selected_article_title 
```

and it worked

# javascript - 在（关闭头）标记之前回显 php var，以便使用 java 脚本检索它

> ID：11780767
> 
> 赞同：1
> 
> 时间：2012-08-02T15:22:30.500
> 
> 标签：javascript

我有一个名为**$myVar = "6542";的 php 变量**

我在哪里可以在我的网站标签之前回显它`</head>`（并且不会触发任何 html 问题），以便能够使用 javascript 获取值？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:25:03.543

把它扔到你的标签上方的某个地方。简单的。

```
<script type="text/javascript>var myvar = '<?=htmlspecialchars($myVar);?>';</script> 
```

可以放在页面的任意位置，不一定要在上面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:24:21.620

几乎在任何地方（HEAD 内容是最好的地方），只要你用`<script>`标签包装它：

```
<script>
  var myVar = "6542";
</script> 
```

# oracle - Oracle 查看权限

> ID：11780769
> 
> 赞同：1
> 
> 时间：2012-08-02T15:22:39.317
> 
> 标签：oracle

在 Oracle 中，我尝试创建这样的视图

```
create view ddd as
  select * 
    from myschema1.t1 
         join myschema2.t2 
.... 
```

当我运行这个语句时，我得到一个错误`ORA-01031 : insufficient privileges`。但是，如果我只是在查询工作表中执行查询，它就可以工作。

为什么我的`CREATE VIEW`语句失败，我需要什么权限才能使语句成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:32:36.037

为了创建一个引用`myschema1.t1`和的视图`myschema2.t2`，拥有该视图的用户必须被授予直接访问这两个表的权限，而不是通过角色。我的第一个猜测是，您已通过角色获得了基础表的权限。您可以在 SQL*Plus 中通过禁用角色并重新运行查询来验证这一点。如果你这样做

```
SQL> set role none;
SQL> select * 
       from myschema1.t1 
            join myschema2.t2 ... 
```

查询有效吗？如果没有，那么您只有通过角色而不是直接授予的权限。请注意，如果您希望能够授予其他用户访问您的视图的权限，则需要授予您对 objects 的权限`WITH GRANT OPTION`。

```
GRANT SELECT ON myschema1.t1 TO <<user that will own the view>> WITH GRANT OPTION;
GRANT SELECT ON myschema2.t2 TO <<user that will own the view>> WITH GRANT OPTION; 
```

如果问题不在于基础对象的权限，则问题很可能是您没有被授予`CREATE VIEW`权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:25:21.790

这听起来像你没有`CREATE VIEW`特权。如果您无权访问这些表，则应该获得`ORA-00942: table or view does not exist`.

# python - mysqldb的Warning: Truncated wrong DOUBLE value error的原因是什么？

> ID：11780770
> 
> 赞同：19
> 
> 时间：2012-08-02T15:22:39.333
> 
> 标签：python, mysql-python

我收到许多相同类型的警告——

```
Warning: Truncated incorrect DOUBLE value: '512121500B' 
```

——但不知道为什么。

MySQL 表 dr_snapshot 如下所示：

```
PremiseID char(10) Primary Key
cycle SMALLINT(6)
last_read DATETIME
reading INTEGER
DeviceID INTEGER 
```

我想通过 PremiseID 删除许多行。这是一个特别的：'512121500B'。

这是我的由 PremiseID 删除的 Python 函数：

```
def delDrSnapRow(premiseID, db):
    sql_cmd = " ".join([
        "delete ",
        "from dr_snapshot ",
        "where PremiseID = " + str(premiseID) + " ; "])

    del_cur = db.cursor()
    rc = del_cur.execute(sql_cmd)
    del_cur.close()

    return rc 
```

PremiseID 是一个字符串，而不是双精度。我在这里想念什么？

非常感谢。

## 编辑

在修改我的删除过程以使用 try: .. 之后，我没有看到警告。我相信我没有看到警告，因为我没有看到警告显示——`print(e)`在除外部分。

我得出的结论是 try: except 以某种方式消除了错误。

```
def delDrSnapRow(premiseID, db):
    sql_cmd = " ".join([
        "delete ",
        "from dr_snapshot ",
        "where PremiseID = " + "'" + premiseID + "' ; "])

    del_cur = db.cursor()

    try:
        rc = del_cur.execute(sql_cmd)

    except MySQLdb.Error, e:
        print "Error %d: %s" % (e.args[0], e.args[1])

    except MySQLdb.Warning, e:
        print(e)
        rc = del_cur.execute(sql_cmd)

    del_cur.close()

    return rc 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T16:31:09.803

看看这条线`"where PremiseID = " + str(premiseID) + " ; "])"`。比较发生在不同的类型上，当 MySQL 比较不同的数据类型时，它们在比较之前在内部被强制转换为 DOUBLE。因此，您可以尝试使用单引号或强制转换来解决问题。所以解决问题的不是try catch，而是引号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T15:36:57.923

不要滚动您自己的查询字符串生成器，它会导致各种问题。使用 Python SQL 库的内置查询构造语法。如果您至少使用 MySQLdb，您应该能够执行以下操作：

```
rc = del_cur.execute('delete from dr_snapshot where PremiseID = %s', (premiseID,)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T16:30:53.597

我相信你忘记了引号：

```
sql_cmd = " ".join([
        "delete ",
        "from dr_snapshot ",
        "where PremiseID = '" + premiseID + "' ; "]) 
```

但我强烈建议您不要像@sr2222 解释的那样以这种方式执行 sql 语句。

# c# - 每次单击时都会出现“Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：”错误

> ID：11780776
> 
> 赞同：0
> 
> 时间：2012-08-02T15:22:59.157
> 
> 标签：c#, asp.net, jscript

帮助！

我有一个`<asp:TemplateField><ItemTemplate>`组合的 GridView。在这个组合中，我有一个`<asp:ImageButton ...>`看起来不错但每次单击此按钮时都会出现错误：

> Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：500

我什至不知道按钮触发的事件。

这是我的 HTML 代码：

```
<asp:GridView 
    ID="PuckGridView" 
    runat="server" 
    EmptyDataText="Sorry, no data available"
    AutoGenerateColumns="False" 
    AllowSorting="True" 
    Font-Size = "X-Small" 
    Width = "1150px"
    Height = "410px"
    onselectedindexchanged="PuckGridView_SelectedIndexChanged" 
    onrowcommand="RowUserActivity" 
    onpageindexchanging="PuckGridView_PageIndexChanging" 
    onrowdatabound="PuckGridView_RowDataBound" 
    GridLines="Horizontal"
    onsorting="PuckGridView_Sorting"
    HeaderStyle-HorizontalAlign="Left">
    <AlternatingRowStyle BackColor="#99CCFF" ForeColor="Black" />
        <Columns>
        <asp:TemplateField SortExpression="Status" HeaderText="Status">
             <ItemTemplate>
                <asp:ImageButton runat="server" ImageUrl='<%# "~/Images/" +  Eval("StatusImage").ToString() %>' CommandName="UpdateStatus" />
                <%-- <asp:Image ID="statusImage" runat="server" ImageUrl='<%# "~/Images/" +  Eval("StatusImage").ToString() %>' />--%>
                <asp:Label ID="status" runat="server" Text='<%# Bind("StatusText") %>'></asp:Label>
                <br />
                <asp:Image ID="onCallImage" runat="server" ImageUrl='<%# "~/Images/" + DisplayCorrectOnCallImage(Eval("OnCallImage")) %>' />
                <asp:HiddenField ID="HiddenEmail" runat="server" Value='<%# Eval("Email") %>' />
                <asp:HiddenField ID="HiddenUserName" runat="server" Value='<%# Eval("UserName") %>' />
                <asp:HiddenField ID="HiddenFirstName" runat="server" Value='<%# Eval("FirstName") %>' />
                <asp:HiddenField ID="HiddenLastName" runat="server" Value='<%# Eval("LastName") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" SortExpression="FirstName" DataField="FirstName" HeaderText="FirstName" Visible="true" />
        <asp:BoundField ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" SortExpression="LastName" DataField="LastName" HeaderText="LastName" Visible="true" />
        <asp:BoundField ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" DataField="OfficePhone" HeaderText="Phone" Visible="true" />
        <asp:BoundField ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" SortExpression="TeamRole" DataField="TeamRole" HeaderText="Team/Role" Visible="true" />
        <asp:BoundField ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left" SortExpression="Location" DataField="Location" HeaderText="Location" Visible="true" />
        <asp:ButtonField  HeaderText="Mail" ButtonType="Image" CommandName="SendMail" ImageUrl="~/Images/mail.gif" Visible="true"/>
        <asp:TemplateField>
             <ItemTemplate>
                 <asp:Image ID="imgHours" ToolTip=' <%# Eval("Hours") %> ' ImageUrl='<%# "~/Images/clock.gif"  %>' runat="server" />
             </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField ItemStyle-HorizontalAlign="Left" DataField="Message" HeaderText="Message" Visible="true" />
    </Columns>
    <HeaderStyle BackColor="#CCCCCC" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:34:36.797

尝试查看是否有任何无效的 html 标签。或尝试 viewstate=false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:12:24.380

尝试删除此行：

```
 <%-- <asp:Image ID="statusImage" runat="server" ImageUrl='<%# "~/Images/" +  Eval("StatusImage").ToString() %>' />--%> 
```

我以前对模板中的注释内容感到困扰

还要检查你的

```
 onselectedindexchanged="PuckGridView_SelectedIndexChanged" 
```

事件，因为这也可能在您单击该行时触发

# regex - 当有正则表达式匹配时，未初始化的 eq 警告

> ID：11780777
> 
> 赞同：3
> 
> 时间：2012-08-02T15:22:59.900
> 
> 标签：regex, perl, mod-perl

我在我的代码中收到`uninitialized value in string eq at *** line xxx`警告，如果该行确实有一个警告，这也很容易修复`eq`。

但是 hashref 中的值存在正则表达式匹配。

```
if ($hashref->{parameters}->{type} =~ m/:/) { 
```

在此之前的一些行我什至有这个：

```
$hashref->{parameters} = defined($hashref->{parameters}) ? $hashref->{parameters} : '';
$hashref->{parameters}->{type} = defined($hashref->{parameters}->{type}) ? $hashref->{parameters}->{type} : ''; 
```

所以这个值至少应该被初始化。

我问自己和你：为什么我仍然会收到值未初始化的警告，而且为什么它说`eq`而不是`pattern match`

**编辑：**

`parameters`subhash 包含通过 url 输入（post 和/或 get）给出的所有变量。该`type`值是**可能**在 url 中的变量之一。`type`该值是否在 url 中都没有关系，如果它包含一个值，我总是会收到`uninitialized value in string eq`警告。即使我通过在错误行之前警告它来控制类型行的值。

**2\. 编辑：** 正如@ikegami 所假设的，确实有一个`elsif`导致警告的

整个 if - elsif 语句看起来像：

```
if ($hashref->{parameters}->{type} =~ m/:/) {
    …
elsif ($hashref->{parameters}->{type} eq $somevalue) {
    …
} 
```

这`$somevalue`就是未初始化的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T16:12:29.990

您只显示了该行语句的一半。完整的声明实际上看起来像

```
456: if ($foo =~ /bar/) {
457:    ...
458: }
459: elsif ($baz eq 'qux') {
460:    ...
461: } 
```

语句的运行时警告通常使用语句开始处的行号，因此如果正则表达式不匹配且未`$baz`定义，您将`eq`在第 459 行收到警告列表第 456 行。

这里的想法是一样的：

```
$ perl -wE' my $x;  # 1
            say     # 2
            4       # 3
            +       # 4
            $x      # 5
            +       # 6
            5;      # 7 '
Use of uninitialized value $x in addition (+) at -e line 2.
9 
```

最近*，Perl 进行了更改，以便将`elsif`条件视为不同的语句以避免此类问题。您必须拥有旧版本的 Perl。

*   ——实际上，不是最近。5.10 和 5.12 都已停产，但您似乎使用的是更旧的版本。如果您要询问有关 Perl 过时版本的问题，请提及。

* * *

```
$ perlbrew use 5.10.1

$ perl -we'
my ($x,$y,$z);
if ($x) {
} elsif ($y eq $z) {
}'
Use of uninitialized value $y in string eq at -e line 4.
Use of uninitialized value $z in string eq at -e line 4.

$ perlbrew use 5.8.9

$ perl -we'
my ($x,$y,$z);
if ($x) {
} elsif ($y eq $z) {
}'
Use of uninitialized value in string eq at -e line 3.
Use of uninitialized value in string eq at -e line 3. 
```

# php - 在 MySQL 中执行 UPDATE 时在重复键上求和“counts”列

> ID：11780792
> 
> 赞同：0
> 
> 时间：2012-08-02T15:23:52.500
> 
> 标签：php, mysql

我有一个计数表，我希望能够在重命名一个复合键字段时对计数求和。这很难解释，所以让我给你看一些 SQL：

示例表：

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL,
  `type` int(11) NOT NULL,
  `count` int(11) NOT NULL,
  PRIMARY KEY (`id`,`type`)
); 
```

插入一些数据：

```
INSERT INTO test VALUES(1, 10, 1);
INSERT INTO test VALUES(2, 20, 3);
INSERT INTO test VALUES(2, 10, 3);
INSERT INTO test VALUES(2, 30, 3); 
```

查询数据：

```
mysql> SELECT SUM(count) as count FROM test WHERE id = 2;
+-------+
| count |
+-------+
|     9 |
+-------+

mysql> SELECT SUM(count) as count FROM test WHERE type = 10;
+-------+
| count |
+-------+
|     4 |
+-------+ 
```

效果很好，快速灵活。

现在，我想将类型 10*重新映射*为类型 20

```
UPDATE test SET type = 20 WHERE type = 10;
Duplicate entry '2-20' for key 'PRIMARY' 
```

在这里使用`ON DUPLICATE KEY UPDATE`是无效的。我认为这应该可以通过创意插入来实现，但我不确定。谁能想到一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:26:46.300

更新查询时，您将使用`id = 2`and创建多行，由于您的约束`type = 20`，这是不允许的。`primary key`

您应该改为使用单列作为主键，并在插入新行时使其自动递增。这样可以保证它是独一无二的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T22:59:23.273

一种方法是“松开”PRIMARY KEY，意思是将其从 PRIMARY（唯一）KEY 更改为非唯一 KEY。这将允许重复值，并允许您的 UPDATE 语句成功，这样您将有两个（或更多）行匹配（id，type）。（请注意，这会使更新单行出现问题，因此您可能希望添加一个可以唯一的新列。AUTO_INCREMENT 列可以很好地工作。）

* * *

如果您不想这样做，那么另一种方法是将类型 10 和类型 20 行的计数“组合”在一起（对于每个 id）进入类型 20 行，设置类型 10 行的计数为零，并且（可选）在单独的语句中删除冗余类型 10 行。

下面的语句通过在第一次选择中将 10 值“映射”到 20 来“组合”类型 10 和类型 20 计数。

* * *

```
 -- combine count for types 10 and 20 as new count for type 20
 -- and set count to zero for type 10

 INSERT INTO test (id, `type`, `count`)
 SELECT t.id
      , IF(t.`type`=10,20,t.`type`) AS new_type
      , SUM(t.`count`) AS `count`
   FROM test t
  WHERE t.`type` IN (10,20)
  GROUP BY id, new_type
  UNION ALL
 SELECT u.id
      , u.`type`
      , 0 AS `count`
   FROM test u
  WHERE u.`type` = 10
     ON DUPLICATE KEY UPDATE `count` = VALUES(`count`);

 -- remove unnecessary type 10 rows.
 DELETE FROM test WHERE `type` = 10 AND `count` = 0; 
```

* * *

注意：第一个 SELECT 中的 IF() 表达式等价于：

```
CASE WHEN t.type = 10 THEN 20 ELSE t.type END 
```

第二个选择是为我们提供所有需要更新的类型 10 行。我们使用 UNION ALL 运算符连接这两个结果集。

然后我们获取组合（连接）的结果集，并将它们运行到插入中。任何我们点击“重复”键的地方，我们都会通过 ON DUPLICATE KEY 子句执行更新操作。

您可能希望在事务中执行此操作（如果您使用的是 InnoDB）并验证第一条语句是否成功完成，然后再执行`DELETE`. 如果第一条语句抛出异常（可能有一个不稳定的触发器），那么您可能想要 ROLLBACK 事务。如果 DELETE 由于某种原因失败，您还需要 ROLLBACK（可能存在会被违反的外键约束。）

或者，您不一定需要执行 DELETE，您可以只保留 10 行类型，计数为零。

* * *

**重要的：**

不要同时实施这两种解决方案！只有其中之一。

第一种方法是模式更改，它不需要任何数据更改。该更改将使您的 UPDATE 成功。

第二种方法要求模式保持不变，并且取决于 (id,type) 上 UNIQUE KEY 的存在（和执行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:27:42.990

您在两列上设置了主键，更新后第三行主键将与第二行相同，因此不允许这样做。

最后你会得到 1..20；2..20、2..20 等

# cuda - CUDA：如何使用纹理和 char4（或 int4）在每个线程的一个事务中读取 4 个（或 16 个）字符？

> ID：11780793
> 
> 赞同：2
> 
> 时间：2012-08-02T15:23:53.337
> 
> 标签：cuda, textures, texture-packing

我在设备全局内存中有一个大型字符数组，由线程以合并方式访问。我在某处读过，我可以通过在每个线程的一个内存事务中读取 4 或 16 个字符来加快内存访问。我相信我必须使用纹理和 char4 或 int4 结构。但是，我找不到任何关于此的文档或示例。有人可以在这里提供一个简单的示例或指向我可以在哪里了解更多信息的指针吗？

在我的代码中，我将 char 数组定义为

```
char *database = NULL;
cudaMalloc( (void**) &database, SIZE * sizeof(char) ); 
```

如果我想使用纹理和 char4（或 int4），定义是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:11:15.163

我终于找到了自己问题的答案。char4 的定义是

```
char4 *database = NULL;
cudaMalloc( (void**) &database, SIZE * sizeof(char4)/4 ); 
```

不需要纹理。内核确实使用 char4 将速度提高了三倍，但如果我进行循环展开，则减少到两倍。为了完整起见，我的内核是

```
__global__ void kernel(unsigned int jobs_todo, char* database, float* results ) {

  unsigned int id = threadIdx.x + blockIdx.x * blockDim.x;
  float A = 0; int i; char ch;
  if(id < jobs_todo) {
    for(i = 0; i < 1000; i += 1){
     ch = database[jobs_todo*i + id];
     if(ch == 'A') A++;
    }
    results[id] = A;
  }
} 
```

和 char4 它是

```
__global__ void kernel4(unsigned int jobs_todo, char4* database, float* results ) {

  unsigned int id = threadIdx.x + blockIdx.x * blockDim.x;
  float A = 0; int i; char4 ch4;
  if(id < jobs_todo) {
    for(i = 0; i < 1000/4; i += 1){
     ch4 = database[jobs_todo*i + id];
     if(ch4.x == 'A') A++;
     if(ch4.y == 'A') A++;
     if(ch4.z == 'A') A++;
     if(ch4.w == 'A') A++;
    }
    results[id] = A;
  }
} 
```

我也试过 int4 但它比 char4 时间快 0.0002 秒。

# queue - 如何为使用 Web 控件创建队列，以便一次只有一个用户可以看到它们？

> ID：11780795
> 
> 赞同：0
> 
> 时间：2012-08-02T15:23:57.577
> 
> 标签：queue, controls, websocket, arduino

我正在研究小机器人竞技场，使用 AJAX/PHP 前端、Websockets 向 arduino 发送命令，以及 arduino 向机器人发送 IR 命令。用户通过网络摄像头观看机器人。

现在，如果您访问该网站，它对所有人都是免费的。有两个具有独立控制按钮的机器人，但许多人可以同时加载站点并单击按钮，这意味着没有人可以独占控制机器人。

我不希望人们注册并创建用户名/密码，但我希望网站要求他们在连接时输入昵称。输入昵称后，如果没有人在等待，他们可以选择控制机器人，并且控制将被显示。（如果用户 #2 现在想要控制该机器人，该站点将向他显示用户 1 具有控制权，并且他可能会将他的名字放在队列中。（我想如果其他人，我会给人们 45 秒到一分钟的控制权正在等待）

我对 PHP 和 javascript 有一点了解，但我不确定如何解决这个问题。我是否需要使用 mySQL 数据库来跟踪控件的队列和锁定/解锁状态？

谢谢！

TL/DR 我需要创建一个队列，因此两个用户不能同时访问网站上的同一组按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:15:27.970

我建议您将 cookie 用于“用户识别”，您可以在其中保存时间戳。这既可以唯一标识用户，也可以让您了解用户队列。如果您介意 cookie 黑客攻击，您应该加密该时间戳。

使用此过程，您无需要求昵称，也无需使用数据库。

您还可以提供时间窗口访问，检查每次发送信号时“cookie 时间戳”和“实际时间”之间的时间差。

# vba - 如何使用嵌套数组来存储单元格的行号和列号

> ID：11780797
> 
> 赞同：0
> 
> 时间：2012-08-02T15:24:08.083
> 
> 标签：vba, excel

我编写了一段简单的代码，它基本上扫描 A 列，检测条件，一旦连续满足条件，它将同一行的 B 列中的单元格复制到一个数组中。我希望有人可以帮助我制作一个嵌套数组，它不仅可以将值存储在 B 列中，还可以存储它的行数。这是我到目前为止所拥有的，任何帮助表示赞赏。

```
Dim col2 As Range
Dim cell2 As Excel.Range
Dim rowcount2 As Integer
Dim ii As Integer

ii = 0
rowcount2 = DataSheet.UsedRange.Rows.Count
Set col2 = DataSheet.Range("A1:A" & rowcount2)
Dim parsedcell() As String
Dim oldarray() As String

    For Each cell2 In col2

        If cell2.Value <> Empty Then
            parsedcell = Split(cell2.Value, "$")
            sheetName = parsedcell(0)

                If sheetName = DHRSheet.Name Then

                    Dim oldvalue As Range
                    ReDim Preserve oldarray(ii)
                    Set oldvalue = DataSheet.Cells(cell2.Row, 2)

                    oldarray(ii) = oldvalue.Value

                    ii = ii + 1

                End If

      End If

    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:33:00.580

你需要一个二维数组。对值使用一个维度，对行使用另一个维度。这是一个例子

```
Sub GetArray()

    Dim vaInput As Variant
    Dim rRng As Range
    Dim aOutput() As Variant
    Dim i As Long
    Dim lCnt As Long

    'Define the range to test
    Set rRng = DataSheet.Range("A1", DataSheet.Cells(DataSheet.Rows.Count, 1).End(xlUp)).Resize(, 2)
    'Put the values in that range into an array
    vaInput = rRng.Value

    'Lopo through the array
    For i = LBound(vaInput, 1) To UBound(vaInput, 1)
        'Skip blank cells
        If Len(vaInput(i, 1)) > 0 Then
            'Test for the sheet's name in the value
            If Split(vaInput(i, 1), "$")(0) = DHRSheet.Name Then
                'Write the value and row to the output array
                lCnt = lCnt + 1
                'You can only adjust the second dimension with a redim preserve
                ReDim Preserve aOutput(1 To 2, 1 To lCnt)
                aOutput(1, lCnt) = vaInput(i, 2) 'write the value
                aOutput(2, lCnt) = i 'write the row count
            End If
        End If
    Next i

    'Output to see if you got it right
    For i = LBound(aOutput, 2) To UBound(aOutput, 2)
        Debug.Print aOutput(1, i), aOutput(2, i)
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:35:31.250

```
Dim col2 As Range
Dim cell2 As Excel.Range
Dim rowcount2 As Integer
Dim arr() As Variant
Dim p As Integer
p = 0

rowcount2 = DataSheet.UsedRange.Rows.Count
Set col2 = DataSheet.Range("A1:A" & rowcount2)
Dim parsedcell() As String

    For Each cell2 In col2

        If cell2.Value <> Empty Then
            parsedcell = Split(cell2.Value, "$")
            sheetName = parsedcell(0)

                If sheetName = DHRSheet.Name Then
                    Dim subarr(1) As Variant
                    Dim oldvalue As Range

                    ReDim Preserve arr(p)

                    Set oldvalue = DataSheet.Cells(cell2.Row, 2)

                    subarr(0) = oldvalue.Value
                    subarr(1) = cell2.Row
                    arr(p) = subarr
                    p = p + 1

                    'MsgBox (oldvalue)

                End If

      End If

    Next 
```

# php - 每个帖子后的删除按钮（php，sql）

> ID：11780800
> 
> 赞同：2
> 
> 时间：2012-08-02T15:24:17.850
> 
> 标签：php, button, posts, spl

我需要一些有关 PHP 和 SQL 的帮助。我正在做一个网站，您可以在其中发布不同主题（工作、家庭、学校等）的笔记。在从我的数据库中选择每个注释之后，我想要一个可以在不再需要时删除该特定帖子的按钮。我可以让它删除，但删除错误的笔记，总是上面或下面的一个。我不知道我的代码有什么问题？请帮我。

```
 <?php 
    $query = "SELECT * FROM notes WHERE subject='Work' order by id desc";
    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)) { 
            $id = $row['id'];
            $subject = $row['subject'];
            $date = $row['date'];
            $note = $row['note']; 

            print "<p><strong>$subject</strong> ($id), $date </p>"; 
            print "<p> $note </p>";

        ?>
        //delete button starts here here
        <form id="delete" method="post" action="">
        <input type="submit" name="delete" value="Delete!"/>    
        <?php
        if(isset($_POST['delete'])){
           $query = "DELETE FROM notes WHERE id=$id"; 
           $result = mysql_query($query);
        }
        ?>  
        </form>
        <?php
    }   
    ?> 
```

当我按删除时，我得到了这个：

> 警告：mysql_fetch_array()：提供的参数不是第 40 行 /home/mirho663/www-pub/webbpage/menu2.php 中的有效 MySQL 结果资源

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:33:17.250

我在下面更新了您的脚本，如果可行，请尝试。

```
<?php 

    if(isset($_POST['delete'])){
       $id = $_POST['delete_rec_id'];  
       $query = "DELETE FROM notes WHERE id=$id"; 
       $result = mysql_query($query);
    }

    $query = "SELECT * FROM notes WHERE subject='Work' order by id desc";
    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)) { 
            $id = $row['id'];
            $subject = $row['subject'];
            $date = $row['date'];
            $note = $row['note']; 

            print "<p><strong>$subject</strong> ($id), $date </p>"; 
            print "<p> $note </p>";

        ?>
        //delete button starts here here
        <form id="delete" method="post" action="">
        <input type="hidden" name="delete_rec_id" value="<?php print $id; ?>"/> 
        <input type="submit" name="delete" value="Delete!"/>    

        </form>
        <?php
    }   
    ?> 
```

# java - JTable 冻结列对齐问题 (Java 1.6)

> ID：11780802
> 
> 赞同：0
> 
> 时间：2012-08-02T15:24:23.640
> 
> 标签：java, swing, jtable

我已经实现了 JTable 冻结列，如下所示。使用垂直滚动条在大型数据集上滚动时，冻结表中的列与主表不对齐。请帮助

![在此处输入图像描述](../Images/83234e294c571d02886c611eba035a3c.png)

```
JTable      table,fixedTable
JScrollPane     _scrl_table;

table = new JTable();
table.setName("MAIN_TABLE");
table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
table.setVisibleRowCount(8);

fixedTable = new JTable();
fixedTable.setName("FIXED_TABLE");
fixedTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
fixedTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

 _scrl_table = new JScrollPane(table,JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);

fixedTable.setPreferredScrollableViewportSize(fixedTable.getPreferredSize());
    _scrl_table.setRowHeaderView( fixedTable );
    _scrl_table.setCorner(JScrollPane.UPPER_LEFT_CORNER,         fixedTable.getTableHeader()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:12:21.953

*   也许没有理由使用两个`JTables`

*   [通过 camickr](http://tips4java.wordpress.com/2008/11/18/row-number-table/)或[RowHeader](https://stackoverflow.com/a/8187799/714968)使用正确的RowNumberTable

*   你可以分享`AdjustmentListener`，有或没有`BoundedRangeModel`

例如滚动水平方向，必须更改为垂直

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.*;

public class FixedRowExample extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[][] data;
    private Object[] column;
    private JTable fixedTable, table;
    private int FIXED_NUM = 2;

    public FixedRowExample() {
        super("Fixed Row Example");
        data = new Object[][]{
                    {"a", "", "", "", "", ""},
                    {"", "b", "", "", "", ""},
                    {"", "", "c", "", "", ""},
                    {"", "", "", "d", "", ""},
                    {"", "", "", "", "e", ""},
                    {"", "", "", "", "", "f"},
                    {"fixed1", "", "", "", "", "", "", ""},
                    {"fixed2", "", "", "", "", "", "", ""}};
        column = new Object[]{"A", "B", "C", "D", "E", "F"};
        AbstractTableModel model = new AbstractTableModel() {

            private static final long serialVersionUID = 1L;

            @Override
            public int getColumnCount() {
                return column.length;
            }

            @Override
            public int getRowCount() {
                return data.length - FIXED_NUM;
            }

            @Override
            public String getColumnName(int col) {
                return (String) column[col];
            }

            @Override
            public Object getValueAt(int row, int col) {
                return data[row][col];
            }

            @Override
            public void setValueAt(Object obj, int row, int col) {
                data[row][col] = obj;
            }

            public boolean CellEditable(int row, int col) {
                return true;
            }
        };

        AbstractTableModel fixedModel = new AbstractTableModel() {

            private static final long serialVersionUID = 1L;

            @Override
            public int getColumnCount() {
                return column.length;
            }

            @Override
            public int getRowCount() {
                return FIXED_NUM;
            }

            @Override
            public Object getValueAt(int row, int col) {
                return data[row + (data.length - FIXED_NUM)][col];
            }
        };
        table = new JTable(model);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        fixedTable = new JTable(fixedModel);
        fixedTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        fixedTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        JScrollPane scroll = new JScrollPane(table);
        scroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        JScrollPane fixedScroll = new JScrollPane(fixedTable) {

            private static final long serialVersionUID = 1L;

            @Override
            public void setColumnHeaderView(Component view) {
            } // work around
        }; // fixedScroll.setColumnHeader(null);  
        fixedScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        JScrollBar bar = fixedScroll.getVerticalScrollBar();
        JScrollBar dummyBar = new JScrollBar() {

            private static final long serialVersionUID = 1L;

            @Override
            public void paint(Graphics g) {
            }
        };
        dummyBar.setPreferredSize(bar.getPreferredSize());
        fixedScroll.setVerticalScrollBar(dummyBar);

        final JScrollBar bar1 = scroll.getHorizontalScrollBar();
        JScrollBar bar2 = fixedScroll.getHorizontalScrollBar();
        bar2.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                bar1.setValue(e.getValue());
            }
        });
        scroll.setPreferredSize(new Dimension(400, 100));
        fixedScroll.setPreferredSize(new Dimension(400, 52)); 
        getContentPane().add(scroll, BorderLayout.CENTER);
        getContentPane().add(fixedScroll, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        FixedRowExample frame = new FixedRowExample();
        frame.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# android - 刷新 Android 蓝牙名称缓存

> ID：11780806
> 
> 赞同：2
> 
> 时间：2012-08-02T15:24:52.540
> 
> 标签：android, bluetooth

我正在尝试编写一些执行蓝牙设备发现的代码。

Android 为蓝牙设备保留一个友好名称的缓存：调用`BluetoothDevice.getName()`返回缓存中的值，或者`null`该名称尚未缓存。

我正在尝试测试没有名称可用时的代码路径。不幸的是，这真的很难，因为缓存是持久的。一旦 Android 看到过一次设备，它就会被缓存，我再也不会看到 Android 尝试再次查找该名称。

有没有办法刷新名称缓存以强制 Android 重新获取名称 --- 最重要的是，报告名称在这样做时不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:51:28.353

我相信这个问题[如何以编程方式清除 Android 中的蓝牙名称缓存？](https://stackoverflow.com/questions/10793761/how-to-programmatically-clear-the-bluetooth-name-cache-in-android)与您的问题非常相似，可能对您有所帮助。

# c - 字符串文字是否算作部分初始化程序并进行零初始化？

> ID：11780809
> 
> 赞同：15
> 
> 时间：2012-08-02T15:24:58.137
> 
> 标签：c, string, initialization, literals

在 C 中，您可以*部分初始化*结构或数组，结果初始化器中未提及的成员/元素被零初始化。（C99 第 6.7.8.19 节）。例如：-

```
int a[4] = {1, 2};
// a[0] == 1
// a[1] == 2
// a[2] == 0
// a[3] == 0 
```

您还可以使用字符串文字（C99 第 6.7.8.14 节）初始化“字符类型的数组”，以及“连续字符......初始化数组的元素”。例如：-

```
char b[4] = "abc";
// b[0] == 'a'
// b[1] == 'b'
// b[2] == 'c'
// b[3] == '\0' 
```

一切都很简单。但是，如果您明确给出数组的长度，但使用的文字太短而无法填充数组，会发生什么？剩余的字符是零初始化的，还是它们有未定义的值？

```
char c[4] = "a";
// c[0] == 'a'
// c[1] == '\0'
// c[2] == ?
// c[3] == ? 
```

把它当作一个部分初始化器是有意义的，它的行为完全`char c[4] = "a"`像规范要求。`char c[4] = {'a'}``char d[N] = ""`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-02T15:27:24.050

```
 char c[4] = "a"; 
```

数组的所有剩余元素将设置为`0`。也就是说，不仅`c[1]`而且`c[2]`和`c[3]`。

请注意，这不取决于 的存储持续时间`c`，即，即使`c`具有自动存储持续时间，其余元素也将设置为`0`。

来自 C 标准（强调我的）：

> (C99, 6.7.8p21) “如果大括号括起来的列表中的初始化程序少于聚合的元素或成员，或者用于初始化已知大小数组的**字符串文字中的字符少于**数组，聚合的其余部分**应隐式初始化，与具有静态存储持续时间的对象相同。** "

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T15:36:52.963

根据 C99 标准（如[ouah 所述](https://stackoverflow.com/users/1119701/ouah)）：

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

和：

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态存储持续时间的对象未显式初始化，则：
> 
> *   如果是指针类型，则初始化为空指针；
> *   如果它具有算术类型，则将其初始化为（正或无符号）零；
> *   如果是聚合，则每个成员都根据这些规则（递归地）初始化；
> *   如果是联合，则根据这些规则（递归地）初始化第一个命名成员。

And`char`是算术类型，因此数组的其余元素将被初始化为零。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T15:54:29.117

在 C 语言的任何地方，它都遵循*全有或全无*的初始化方法。如果您仅部分初始化聚合，则该聚合的其余部分将被初始化为零。

可以说这对于字符串来说是过度的并且不是最佳的，但这就是它在 C 中的工作方式。

# r - 使用指定路径启动 mac finder 窗口

> ID：11780810
> 
> 赞同：1
> 
> 时间：2012-08-02T15:25:02.833
> 
> 标签：r, rgui

有没有办法从 RGUI 命令行启动 mac finder 窗口？我正在浏览一堆文件，查看文件夹而不是使用 list.files() 会很有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:47:33.537

要从 RGUI 命令行打开 Finder，直接的解决方案是使用：

```
system("open /System/Library/CoreServices/Finder.app/") 
```

编辑：对于指定的路径，`system("open ~/Desktop")`将在用户桌面上打开 Finder，例如，因为在 MacOSX 中打开任何目录的默认应用程序是 Finder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:46:30.347

要使用 Mac 的本机文件选择对话框选择（并返回到 R）文件，可以按如下方式完成，尽管此解决方案依赖于`qtbase`Qt 库：

```
library(qtbase)
file_selector <- function(initial_dir=getwd(), multiple=FALSE) {
  f <- Qt$QFileDialog()
  ## configure
  f$setDirectory(initial_dir)
  if(multiple)
    f$setFileMode(Qt$QFileDialog$ExistingFiles)
  ## run
  out <- f$exec()
  if(out == 1)
    f$selectedFiles()
  else
    NULL
} 
```

如果您安装了 aqua tk 库（不是 X11 库），那么可能`tkgetOpenFile`可以使用，尽管我没有检查。

# html - 我可以让一个 div 调整到另一个 div 的最小宽度吗？

> ID：11780812
> 
> 赞同：3
> 
> 时间：2012-08-02T15:25:03.650
> 
> 标签：html, css

我有两个 div，一个用于主页内容，另一个用于侧边栏。

两者都将宽度设置为百分比，因此如果调整窗口大小，它们将保持其比例。但是，侧边栏有一个最小宽度，因为该内容在开始看起来破碎之前只能调整这么多。当窗口被调整到足够小的最小宽度时，侧边栏开始侵占主页内容，因为主页内容不知道它现在需要占用比定义的百分比更小的百分比对于侧边栏。我试图做到这一点，当我们有足够的宽度时，主要内容和侧边栏可以保持各自的比例，但是当我们到达侧边栏内容开始看起来破碎的地步时，主要内容会调整它的宽度更多的补偿。

有没有办法用 css/html 做到这一点，或者我需要编写一些 JavaScript 来计算新的宽度并动态调整样式表中的值？

这是我所拥有的（简化）示例：

HTML：

```
<div id="maincontent">
    <!-- Main page content here -->
</div>

<div id="sidebar">
    <!-- Sidebar content -->
</div> 
```

CSS：

```
#maincontent
{
    width: 85%;
}

#sidebar
{
    width: 15%;
    min-width: 120px;
} 
```

在这个例子中，只要浏览器窗口的宽度超过 800 像素，一切都会很好。但是一旦我们降到 800px 以下，maincontent 现在需要变得小于 85%，以弥补 120px 超过浏览器宽度的 15% 的事实。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:29:00.970

你可以试试

```
@media all and ( max-size: 800px )  {
    #maincontent { width: 75%; }
} 
```

当然，将 800px 和 75% 替换为适合的屏幕尺寸和百分比

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:41:26.177

这是你想要的？

CSS

```
#maincontent{
 background-color:orange;  
 }

 #sidebar
 {
 background-color:blue; 
 width:15%;
 min-width:120px;
 float:left;
 } 
```

HTML

```
<div id="sidebar">
 I am the sidebar!
</div>

 <div id="maincontent">
 I am the main content!
 </div> 
```

演示：http: [//jsfiddle.net/HFuCe/30/](http://jsfiddle.net/HFuCe/30/)

# android - getView 在自定义适配器中显示错误的图像？

> ID：11780816
> 
> 赞同：2
> 
> 时间：2012-08-02T15:25:13.210
> 
> 标签：android, listview, custom-adapter

我有一个带有自定义适配器和自定义行的列表。

问题是当我滚动列表视图时，图像位于错误的位置......

这是自定义行xml：

```
<LinearLayout
    android:id="@+id/imagequality_listview_row_linearlayout"
     android:layout_width="fill_parent" android:layout_height="fill_parent" 
    android:weightSum="1"
    android:orientation="horizontal" xmlns:android="http://schemas.android.com/apk/res/android">

    <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/imagequality_listview_row_textview"
android:layout_width="0dp"
android:layout_height="40dip"
android:gravity="right"
android:paddingLeft="5dip"
android:drawableLeft="?android:attr/listChoiceIndicatorMultiple"
android:layout_weight="0.6"
/>

       <com.example.listviewtest.LoaderImageView
   android:id="@+id/imagequality_listview_row_loaderImageView"
   android:layout_width="0dp"
   android:layout_weight="0.4"
   android:layout_height="100dp"
   image="http://developer.android.com/images/dialog_buttons.png"
   />

</LinearLayout> 
```

这是GetView：

```
List<ImageQuality_Item> items;
    Context context;
    List<CheckedTextView> checkedList;
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = View.inflate(context, R.layout.imagequality_listview_row, null);
            holder = new ViewHolder();
            holder.layout = (LinearLayout) convertView.findViewById(R.id.imagequality_listview_row_linearlayout);

            holder.textview = (CheckedTextView) convertView.findViewById(R.id.imagequality_listview_row_textview);
            holder.image = (LoaderImageView) convertView.findViewById(R.id.imagequality_listview_row_loaderImageView);
            checkedList.add(holder.textview);
            holder.layout.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    for (int i = 0; i < checkedList.size(); i++)
                        if (checkedList.get(i).isChecked())
                            checkedList.get(i).setChecked(false);
                    ((CheckedTextView) ((LinearLayout) v).getChildAt(0)).setChecked(true);
                }
            });

            holder.textview.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    for (int i = 0; i < checkedList.size(); i++)
                        if (checkedList.get(i).isChecked())
                            checkedList.get(i).setChecked(false);
                    ((CheckedTextView) v).setChecked(true);
                }
            });
            convertView.setTag(holder);
        } else
            holder = (ViewHolder) convertView.getTag();

        holder.textview.setText(items.get(position).getDescription());
        if (holder.image.used == false) {
            holder.image.setImageDrawable(items.get(position).getURL());
            holder.image.used = true;
        }

        return convertView;
    }

    class ViewHolder {
        LinearLayout layout;
        LoaderImageView image;
        CheckedTextView textview;
    } 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:43:01.930

你必须设置`Drawable`每次`getView()`被调用，因为 android 正在重用列表元素。如果您不更新它，可能会出现较早的设置图像。

只需删除您的条件以设置图像可绘制，它就会起作用。

# javascript - 使用空格在正则表达式中设置字符串限制

> ID：11780819
> 
> 赞同：0
> 
> 时间：2012-08-02T15:25:24.847
> 
> 标签：javascript, jquery, regex, string, whitespace

我有这个正则表达式

```
/^([a-zA-Z01-9]+ ?){0,20}$/ 
```

我有一套规则

*   字符串行不能以空格开头。
*   字符串不能超过 20 个字符**，包括空格**。
*   字符串不能连续有两个空格。
*   字符串可以以空格结尾。

我唯一的问题是将包括空格在内的字符串的长度设置为最大 20。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:30:42.663

试试这个：`^(?=[a-zA-Z\d\s]{0,20}$)([a-zA-Z01-9]+ ?)*$`

# php - 从另一个数组创建百分比数组的便捷方法

> ID：11780820
> 
> 赞同：2
> 
> 时间：2012-08-02T15:25:29.133
> 
> 标签：php

我想在 PHP 中执行以下服务器端...

如果我有一个这样的数组：`$array1 = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)`，我可以创建另一个数组，其中包含每个值的百分比（每个值除以总数）吗？有没有办法做到这一点，而无需使用 for 循环进行暴力破解？我本质上想创建array2

`sum_array($array1)`产生 55 (1+2+3+4+5+6+7+8+9+10 = 55)

`$array2 = array(1.8%, 3.6%, 5.4%, 7.2%, 9%, 10.9%, 12.7%, 15.5%, 16.3%, 18.2%)`

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T15:30:06.173

你可以用[`array_map`](http://php.net/manual/en/function.array-map.php)这个。

```
$array1 = array(1,2,3,4,5,6,7,8,9,10);
$total = array_sum($array1);

$array2 = array_map(function($a) use($total){
    return round(($a*100) / $total, 1) . '%';
}, $array1); 
```

# ios - 核心情节：doxygen 配置文件不存在

> ID：11780821
> 
> 赞同：1
> 
> 时间：2012-08-02T15:25:30.977
> 
> 标签：ios, xcode, warnings, core-plot

我知道在我的应用程序中有使用 Core Plot 的说明。编译和运行 Core Plot 示例时是否需要配置 XCode？

```
doxygen config file does not exist
/CorePlot_1.0/Source/framework/../build/CorePlot-CocoaTouch.build/Debug-iphonesimulator/Documentation.build/Script-C3566B7F10EED04900FB3866.sh: line 18: /Applications/Doxygen.app/Contents/Resources/doxygen: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:24:34.490

请确保一旦您正在执行项目名称文件。

![你应该执行你的项目文件](../Images/ddf2d222ba568c4e2c2799049ae4ec04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:42:57.380

构建脚本找不到 Doxygen 可执行文件。确保它已安装在您的 /Applications 文件夹中。

# c# - 如何获得 DevExpress TreeList 节点的 X、Y？

> ID：11780829
> 
> 赞同：1
> 
> 时间：2012-08-02T15:25:56.887
> 
> 标签：c#, winforms, xtratreelist

如何在 DevExpress TreeList 控件中获取 FocusedNode 的 X 和 Y 坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:25:39.270

这是我实现它的方式：

```
/// <summary>
/// Get the position and size of a displayed node.
/// </summary>
/// <param name="node">The node to get the bounds for.</param>
/// <param name="cellIndex">The cell within the row to get the bounds for.  
/// Defaults to 0.</param>
/// <returns>Bounds if exists or empty rectangle if not.</returns>
public Rectangle GetNodeBounds(NodeBase node, int cellIndex = 0)
{
    // Check row reference
    RowInfo rowInfo = this.ViewInfo.RowsInfo[node];
    if (rowInfo != null)
    {
        // Get cell info from row based on the cell index parameter provided.
        CellInfo cellInfo = this.ViewInfo.RowsInfo[node].Cells[cellIndex] as CellInfo;
        if (cellInfo != null)
        {
            // Return the bounds of the given cell.
            return cellInfo.Bounds;
        }
    }
    return Rectangle.Empty;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:58:21.720

通过挂钩 CustomDrawNodeCell 事件，可以在 xtraTeeList 控件中的单元格上收集几何数据。

但是，在绘制单元格之前，数据将不可用。

在下面的示例中，当焦点节点发生变化时会输出几何细节。

```
using System;
using System.Collections.Generic;
using System.Text;
using DevExpress.XtraTreeList;
using System.Windows.Forms;
using System.Drawing;

namespace StackOverflowExamples {
    public class XtraTreeListCellInformation {
        public void How_To_Get_Geometric_Data_From_XtraTreeList() {

            Form frm = new Form();
            Label status = new Label() { Dock = DockStyle.Bottom };
            TreeList list = new TreeList() { Dock = DockStyle.Fill };

            Dictionary<int/*NodeID*/, Rectangle> geometryInfo = new Dictionary<int, Rectangle>();

            frm.Controls.AddRange( new Control[] { list, status } );
            list.DataSource = new[] { new { Name = "One" }, new { Name = "Two" }, new { Name = "Three" } };

            list.CustomDrawNodeCell += ( object sender, CustomDrawNodeCellEventArgs e ) => {
                if( !geometryInfo.ContainsKey( e.Node.Id ) ) {
                    geometryInfo.Add( e.Node.Id, e.Bounds );
                } else {
                    geometryInfo[e.Node.Id] = e.Bounds;
            }
            };

            list.FocusedNodeChanged += ( object sender, FocusedNodeChangedEventArgs e ) => {
                status.Text = "Unknown";
                if( e.Node != null ) {
                    Rectangle rect = Rectangle.Empty;
                    if( geometryInfo.TryGetValue( e.Node.Id, out rect ) ) {
                        status.Text = rect.ToString();
                    } else {
                    status.Text = "Geometry Data Not Ready";
                    }
                }
            };

            frm.ShowDialog();
        }
    }
} 
```

# c++ - 类前向声明 失败

> ID：11780831
> 
> 赞同：0
> 
> 时间：2012-08-02T15:26:07.563
> 
> 标签：c++

我有 2 个头文件和一个源文件，

食物.h：

```
#ifndef _FOOD_H
#define _FOOD_H

struct food {
    char name[10];
};

#endif 
```

狗.h：

```
#ifndef _DOG_H
#define _DOG_H

class food;  //forward declaration

class Dog {
public:
    Dog(food f);

private:
    food _f;
};

#endif 
```

这是的源文件`class dog`，

```
//dog.cpp
#include "dog.h"
#include "food.h"

Dog::Dog(food f) : _f(f)
{} 
```

问题是我可以编译上面的代码，我得到一个错误说`_f has incomplete type`。

我以为我可以提出一个前向声明 in`dog.h`和 include `food.h`in `dog.cpp`，但它不起作用，为什么？而且我不应该将用户定义的头文件放在`.h`文件中，对吗？它已被弃用，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:28:52.973

在这种情况下，前向声明不起作用，因为您的`Dog`类有一个`food`. 编译器需要完整的声明`food`才能声明`Dog`.

至于关于弃用包含的问题，除非我误解了什么，否则根本不是真的。包括`food.h`这里将解决您的问题：

```
//dog.h
#ifndef DOG_H
#define DOG_H

#include "food.h";

class Dog {
public:
    Dog(food f);

private:
    food f_;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:28:51.603

编译器需要知道`_f`仅使用前向声明无法访问的对象的大小。如果您使用指向`class food`this 的指针，但由于您的成员是一个完整的类实例，您需要包含头文件，以便编译器可以知道`class food`.

同样，如果您继承自，前向声明将不起作用`class food`-您特别需要包含标头。

只需删除前向声明，`#include "food.h"`您的代码就会编译。

# java - 刷新数据库连接

> ID：11780833
> 
> 赞同：0
> 
> 时间：2012-08-02T15:26:13.553
> 
> 标签：java, mysql, swing

我有一个连接到 MySQL 数据库并使用 select 语句通过 JTable 显示状态为“O”的行的 Java 应用程序。我添加了一个鼠标事件，这样一旦单击选定的行，该行的详细信息就会显示在另一个 GUI 表单中。在新表单上发生鼠标事件后，数据库表将更新为状态“R”。当我回到 JTable 上的原始显示时，我希望该行不再显示。但是，我发现我之前选择的行仍然显示在 JTable 上，我必须退出整个程序才能让 JTable 以更新的状态刷新。

表状态正在更新为“R”并且正在使用

```
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

从每个表单导航。有没有办法刷新数据库连接，这样一旦我回到显示 GUI，表格就会使用更改的状态进行更新？

我使用以下代码显示：

```
public class ReceiveOrderedParts extends JFrame{
static Vector<Vector<String>> data = new Vector<Vector<String>>();
static JTable table;
ReceiveOrderedParts(final String st) throws InterruptedException, SQLException{             
    super("Order Details Inquiry");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JPanel topPanel = new JPanel();

    getContentPane().add(topPanel, BorderLayout.PAGE_START);

    Vector<String> headers = new Vector<String>();
    headers.add("Order Number");
    headers.add("Date");       
    headers.add("Part Number");
    headers.add("Part Name");
    headers.add("Application");
    headers.add("Quantity");  
    headers.add("Total Cost");
    headers.add("Supplier");                       
    headers.add("Country");

    getData();

    //this is the model which contain actual body of JTable
    DefaultTableModel model = new DefaultTableModel(data, headers);
    table = new JTable(model);
    table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);       
    //table.enable(false);
    table.addMouseListener(new ReceiveOrderedParts.MyMouseAdapter());
    boolean b = table.isCellEditable(WIDTH, WIDTH);
    b = false;

    header_size();

    JScrollPane scroll = new JScrollPane(table);

    scroll.setHorizontalScrollBarPolicy(
            JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scroll.setVerticalScrollBarPolicy(
            JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);

    getContentPane().add(scroll, BorderLayout.PAGE_START);

    pack();
    setResizable(false);
    setVisible(true);
    setSize(1000, 700);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
public class MyMouseAdapter extends MouseAdapter  {

    public void mousePressed(MouseEvent e)  {         
            int colIdx = table.columnAtPoint(e.getPoint());                
            int rowIdx = table.rowAtPoint(e.getPoint());
           Object obj = table.getModel().getValueAt(rowIdx, colIdx) ;
              String order = obj.toString();                
            JOptionPane.showMessageDialog(null,"Receive Order "+ order + "?", "Success",
                        JOptionPane.INFORMATION_MESSAGE);
                   // return;
        try {
            SelectOrder seo = new SelectOrder(order);
            seo.setVisible(true);
            setVisible(false);
        } catch (InterruptedException ex) {
            Logger.getLogger(ReceiveOrderedParts.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

}

/**
 * Setting the particular Column Size in JTable
 */
public static void header_size() {
    TableColumn column = table.getColumnModel().getColumn(0);
    column.setPreferredWidth(100);

    column = table.getColumnModel().getColumn(1);
    column.setPreferredWidth(100);
}

/**
 * Fetching Data From MySql Database and storing in a Vector of a Vector to
 * Display in JTable
 */
private static void getData() throws SQLException {
    // Enter Your MySQL Database Table name in below Select Query.
    String str = "select order_number, Part_number, spare_desc, vehicle_app, qnty_ordered,"
            + "seller_name, total_purchases, country, order_date from order_details_table where status = 'O'";
    Connection cn = null;
    ResultSet rs;
    Statement st;

    try {
        // Change the database name, hosty name, 
        // port and password as per MySQL installed in your PC.
        cn = DriverManager.getConnection("jdbc:mysql://"
                + "localhost:3306/test", "root", "gatungo@123");
        st = cn.createStatement();

        rs = st.executeQuery(str);

        while (rs.next()) {
            Vector<String> d = new Vector<String>();

            d.add(rs.getString("order_number"));
            d.add(rs.getString("order_date"));                
            d.add(rs.getString("Part_number"));
            d.add(rs.getString("spare_desc"));
            d.add(rs.getString("vehicle_app"));
            d.add(rs.getString("qnty_ordered"));  
            d.add(rs.getString("total_purchases"));
            d.add(rs.getString("seller_name"));                                                
            d.add(rs.getString("country"));

            d.add("\n\n\n\n\n\n\n");
            data.add(d);

        }
        cn.close();

    } catch (SQLException e) {

        e.printStackTrace();

    }
}
} 
```

我用这段代码回去；

```
Connection conn = null;
String url = "jdbc:mysql://localhost:3306/";
String db = "test";
String driver = "com.mysql.jdbc.Driver";
Class.forName(driver);
conn = DriverManager.getConnection(url + db, "user", "password");
Statement st = conn.createStatement();
String partno = tpart.getText();
String sparedesc = tdesc.getText();
String vapp = tapp.getText();
String qunty = tqnty.getText();
String costper = tcost.getText();
String country = tcountry.getText();
String retail = tretail.getText();
String store = tstore.getText();
String location = tlocation.getText();
String rdate = trdate.getText();
String storeit = "INSERT INTO Store_info_table (Part_number, spare_desc, vehicle_app, qnty_received, cost_per_unit"
        + ", selling_price, country, store_name, store_location, recvd_date) "
        + "VALUES ('" + partno + "', '" + sparedesc + "', '" + vapp + "', '" + qunty + "', '" + costper + "','" + retail + "','" + country + "','" + store + "','" + location + "','" + rdate + "' )";
st.execute(storeit);

String updateOrder = "UPDATE order_details_table set status = 'R' where order_number = '" + order + "'";
st.execute(updateOrder);

JOptionPane.showMessageDialog(null,"Item Stored Successfully", "Success",
        JOptionPane.INFORMATION_MESSAGE);
conn.close();

ReceiveOrderedParts rop = new ReceiveOrderedParts(order);
rop.invalidate();
rop.setVisible(true);
setVisible(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:32:28.080

您应该考虑实施`observer pattern`以处理这种情况。因此，当更新新表单中的数据时，会发送通知并通过从数据库中获取新值来更新原始表。

# c# - 如何使用 c# 类连接到 MS Access

> ID：11780834
> 
> 赞同：0
> 
> 时间：2012-08-02T15:26:15.737
> 
> 标签：c#, visual-studio-2010

我曾经使用 Windows 表单连接到 Microsoft Access，代码如下：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }
    OleDbConnection con = new OleDbConnection("Provider=Microsoft.jet.oledb.4.0; data source=C:/Users/titi/Desktop/db2.mdb");

    private void Form2_Load(object sender, EventArgs e)
    {
        con.Open();
        OleDbCommand cmd = new OleDbCommand("select * from tblBook", con);
        DataTable dt = new DataTable();
        dt.Load(cmd.ExecuteReader());
        con.Close();
    }
} 
```

它工作正常，但现在我创建了另一个 C# 类，它不是 Window 形式。我只想将 MS Access 中的一些数据与我使用 SQL Server 选择的数据进行比较。但是当我这样做时，我得到了如下错误：

> 错误 1 ​​类、结构或接口成员声明 C:\A\A\SynchronizeData.cs 12 17 AutoSync 中的无效标记 '('

谁能告诉我，如何使用 C# 中的类以 Windows 形式连接到 MS Access？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:35:34.413

该错误意味着您的文件中有错字`C:\A\A\SynchronizeData.cs`，可能在第 12 行左右。修复错字，您的代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:21:15.980

```
//on Form Load set your connection string
Conn = "..Your Connection String";
MyClass.MyCon = Conn;

//on event handler call your class
string conSTR = MyClass.MyCon

//this is your class
public class MyClass
{
  public static string iMyCon = "";

  public static string MyCon
  {
    get { return iMyCon; }
    set { iMyCon = value; }
  }
} 
```

# php - PHP会话丢失，IIS中有多个站点

> ID：11780835
> 
> 赞同：0
> 
> 时间：2012-08-02T15:26:16.797
> 
> 标签：php, session, ssl, iis-7

这里有点奇怪，这可能只是因为我没有完全理解 IIS。

我们在 IIS 中有两个网站（我们使用[这种方法](http://www.sslshopper.com/article-ssl-host-headers-in-iis-7.html)配置）。一个名为“https://theServerName.domain.com”，另一个名为“https://development.domain.com”。第二个基本上是第一个的克隆，允许我们在“上线”之前测试更改。

登录脚本的工作方式如下：

*   加载索引页面，页面检查会话，如果会话不存在，则将用户发送到登录页面
*   用户登录后，根据数据库检查凭据。如果凭据有效，则创建会话并将用户发送回索引页面

这非常适用于“theServerName.domain.com”。但是，当我们登录到“developer.domain.com”时，会创建会话，但是当我们被发送回索引页面时，该页面会检查会话并且找不到会话。

我很困惑，因为登录页面和登录验证页面的域是相同的，所以我唯一能想到的就是多个网站的情况是否令人困惑。

有任何想法吗？

编辑 1：我忘记了一个关键信息，**这似乎只发生在 IE 8 中**- 在 Firefox 14.0.1、Opera 12.01、Chrome 21.0 和 IE 9 中测试和工作。

编辑 2：我不知道这是否有帮助，但 IE 9 抛出错误“来自下面列出的网站的内容被 Internet Explorer 增强安全配置阻止。javascript://void(0)”（这是在单击“继续访问此网站（不推荐）。”由于未安装证书）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-14T07:04:52.537

[在这个答案](https://stackoverflow.com/questions/21012559/issue-with-session-and-cookie-in-internet-explorer-for-websites-containing-under/21032779#21032779)的帮助下，我终于意识到这个问题是**由于 IIS 虚拟目录/应用程序中有一个下划线**。

# vba - excel图表的条件最小轴值

> ID：11780838
> 
> 赞同：1
> 
> 时间：2012-08-02T15:26:23.200
> 
> 标签：vba, excel, axes

我正在寻找一些 VBA 代码，它可以根据最早检测到的日期和分配多个预定义值中的一个来自动化图表中 x 轴的固定最小值。

我正在处理大量数据，其中可用数据的开始日期经常变化。

是否可以检测 x 轴中最早的年份值并应用预定的开始日期？

例如，如果数据从 2002 年 5 月 4 日开始，代码将读取 x 轴范围内的最小值为 04/05/2002，检测到“2002”并将最小 x 轴值设置为“37258”与 Excel 日期编号系统中的 2002 年 1 月 1 日相对应。

如果数据从 2008 年年中开始可用，它会再次将 x 轴中的最小值设置为“39449”以适应 01/01/2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:15:43.597

```
ActiveChart.Axes(xlValue).MinimumScale = dateserial(year(ActiveChart.Axes(xlValue).MinimumScale),1,1) 
```

这会查看图表，从中获取年份，然后将开始设置为该年的 1/1。

# java - JXTable 列中的超链接，从数据库填充

> ID：11780845
> 
> 赞同：3
> 
> 时间：2012-08-02T15:26:49.047
> 
> 标签：java, swing, hyperlink, swingx, jxtable

我的问题是如何将 JXTable 列（仅针对一个/特定列）的超链接设置为我的默认桌面 Web 浏览器的“_blank”链接之类的操作。

我使用 JXTable 和 DefaultTableModel，也从 sqlite 数据库中调用数据。我在互联网、谷歌、[...] 上进行了研究，发现很多信息说，如果我没有弄错：

*   将 MouseListener 注册到 JXTable；
*   从 MouseEvent 生成点对象；
*   通过 getValueAt 获取文本

***注意：该列每个单元格只有 1 个链接，没有任何文字，只有链接。

现在我已经实现了这个代码来做一个双击单元格的动作。请有人可以帮助我实现在默认浏览器中打开的列超链接，就像在[这个例子](http://java-swing-tips.blogspot.ro/2009/02/hyperlink-in-jtable-cell.html)中一样（但我不知道如何适应，因为数据不是从数据库中调用的）。

```
Table_Employee.addMouseListener(new MouseAdapter() {
   public void mouseClicked(MouseEvent e) {
      if (e.getClickCount() == 2) {
         JXTable target = (JXTable)e.getSource();
         int row = target.getSelectedRow();
         int column = target.getSelectedColumn();
           JFrame newFrame = new JFrame();               //I want to open an distinc link
               newFrame.setTitle("Detail Screen");       //for every cell along one column
               newFrame.setVisible(true);                //in the web browser, not a frame.
         }
   }
}); 
```

**编辑 1** @Kleopatra 的编辑 2 中的代码对我的应用程序有一些问题。另外，我又尝试了下面的代码，瞧——当第一次点击时，链接就在那里，但没有反应（没有打开浏览器）。@Kleopatra，您能否向我提供有关您的建议的更多信息，因为当我尝试放置该代码时，IDE 无法识别*hyperlinkColumn*。

```
Table_Employee.addMouseListener(new MouseAdapter() {
   public void mouseClicked(MouseEvent e) {
      if (e.getClickCount() == 1) {
         JXTable target = (JXTable)e.getSource();
         int row = target.getSelectedRow();
         int column = target.getSelectedColumn();
         AbstractHyperlinkAction<Object> simpleAction = new AbstractHyperlinkAction<Object>(null) {

                public void actionPerformed(ActionEvent e) {
                //open the browser event?
                }
         };

    TableCellRenderer renderer = new DefaultTableRenderer(
    new HyperlinkProvider(simpleAction));
        Table_Employee.getColumnExt(2).setEditable(false);
        Table_Employee.getColumnExt(2).setCellRenderer(renderer);
      }
   }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T15:46:44.433

不涉及侦听器，SwingX 有一个 HyperlinkProvider，您只需根据需要配置一个操作：

```
JXTable table = new JXTable(myModel);
AbstractHyperlinkAction<Object> simpleAction = new AbstractHyperlinkAction<Object>(null) {

    public void actionPerformed(ActionEvent e) {
        // here goes what you want to do on activating the hyperlink
        //LOG.info("hit: " + getTarget());
    }

};
TableCellRenderer renderer = new DefaultTableRenderer(
    new HyperlinkProvider(simpleAction));
table.getColumnExt(0).setEditable(false);
table.getColumnExt(0).setCellRenderer(renderer); 
```

请注意，该列需要不可编辑才能自动支持超链接。

**编辑 2**

如果要打开浏览器/邮件客户端，请使用配置有 SwingX HyperlinkAction 的 HyerlinkProvider。这是由核心 DesktopAction 支持的。它的目标必须是 URI 类型，然后它会自动检测是否打开一个或另一个。

您可以按列手动安装它：

```
TableCellRenderer renderer = new DefaultTableRenderer(
    new HyperlinkProvider(new HyperlinkAction()));
table.getColumnExt(0).setEditable(false);
table.getColumnExt(0).setCellRenderer(renderer); 
```

事实上，它甚至更简单：JXTable 已经将它作为 URI 类的默认值。您所要做的就是实现您的模型，使其包含 uris 并报告它作为它的列类：

```
DefaultTableModel model = new DefaultTableModel(...) {

     @Override
     Class<?> getColumnClass(int column) {
         if (column == hyperlinkColumn) {
             return URI.class;
         } 
         ... // handle other columns
         return super.getColumnClass(column);
     }

     @Override
     boolean isCellEditable(int row, int column) {
         if (column == hyperlinkColumn) {
            return false; 
         }
         ... // handle other columns
         return super.isCellEditable(row, column); 
     }
} 
```

要查看实际支持 - JXList/JXTree 也是如此 - 运行[SwingLabs 网络演示](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)：示例位于多个页面上，包括 JXTable、超链接/扩展、荧光笔并浏览随附的代码

# php - RNG高斯分布

> ID：11780847
> 
> 赞同：1
> 
> 时间：2012-08-02T15:26:55.713
> 
> 标签：php, random, gaussian

我想要做的不完全是高斯分布，因为它有一个有限的最小值和最大值。这个想法更接近于掷 X 骰子并计算总数。

我目前有以下功能：

```
function bellcurve($min=0,$max=100,$entropy=-1) {
    $sum = 0;
    if( $entropy < 0) $entropy = ($max-$min)/15;
    for($i=0; $i<$entropy; $i++) $sum += rand(0,15);
    return floor($sum/(15*$entropy)*($max-$min)+$min);
} 
```

变量背后的想法`$entropy`是尝试掷足够多的骰子以获得更均匀的分数结果分布（这样就不会造成问题）。

它不需要是完美的 RNG，它只是用于游戏功能，与赌博或密码学无关。

但是，我在没有参数的情况下对 65,536 次迭代进行了测试`bellcurve()`，并出现了以下图表：（[来源：][[adamhaskell.net](http://adamhaskell.net/img/badentropy.png)][）]
[![图形](../Images/85fef006230dfae450c22e02c1dd0aca.png)](https://i.stack.imgur.com/8pvTE.png)

正如您所看到的，有几个值是“偏移”的，而且非常明显。虽然总的来说它并没有真正影响那么大（最坏的情况是它被抵消了 2，并且忽略了概率仍然或多或少在我想要的地方），我只是想知道我哪里出错了。

对此功能的任何其他建议也将不胜感激。

`round`更新：我只是通过使用而不是解决了上面的问题`floor`，但是我仍然无法为此获得一个好的功能。我已经尝试了几乎所有我能想到的函数，包括高斯、指数、逻辑等，但无济于事。到目前为止唯一有效的方法是这种掷骰子的近似值，这几乎肯定不是我需要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:10:35.780

如果您正在寻找钟形曲线分布，请生成多个随机数并将它们相加。如果您正在寻找更多的修饰符，只需将它们乘以最终结果。

随机生成一个钟形曲线数，奖励50% - 150%。总和（兰特（0,15），兰特（0,15），兰特（0,15））*（兰特（2,6）/2）

虽然如果您担心 rand 没有提供足够随机的数字，您可以使用 mt_rand ，它会有更好的分布（使用 mersenne twister）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:05:12.043

主要问题是我试图根据离散变量生成连续的钟形曲线。这就是在缩放结果时导致孔洞和偏移的原因。

我为此使用的修复是：`+rand(0,1000000)/1000000`- 它基本上采用整数离散变量并向其添加随机分数，或多或少使其连续。

现在的功能是：

```
function bellcurve() {
    $sum = 0;
    $entropy = 6;
    for($i=0; $i<$entropy; $i++) $sum += rand(0,15);
    return ($sum+rand(0,1000000)/1000000)/(15*$entropy);
} 
```

它返回一个介于 0 和 1 之间的浮点数（尽管这些精确值极不可能），然后可以根据需要对其进行缩放和舍入。

示例用法：

```
$damage *= bellcurve()-0.5; // adjusts $damage by a random amount
                            // between 50% and 150%, weighted in favour of 100% 
```

# c# - 使用计时器移动按钮

> ID：11780853
> 
> 赞同：0
> 
> 时间：2012-08-02T15:27:15.277
> 
> 标签：c#, forms, button, timer

我有四个按钮，称为“ship1,ship2”等。我希望它们移动到表单的右侧（以相同的速度并同时开始），每次单击一个“ship”时，所有的船都应该停下来。

我知道我需要使用计时器（我编写了使用线程的代码，但是在停止船只时给我带来了麻烦。）我不知道如何使用计时器。

我试图阅读 MDSN 中的计时器信息，但我不明白。所以你可以帮助我吗？

这里是使用线程的代码。 **我不想用它。我需要使用定时器！（我在这里发布它是因为它没有让我在没有任何代码的情况下发布**

```
 private bool flag = false;
    Thread thr;
    public Form1()
    {
        InitializeComponent();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        flag = false;
        thr = new Thread(Go);
        thr.Start();

    }

    private delegate void moveBd(Button btn);

    void moveButton(Button btn)
    {
        int x = btn.Location.X;
        int y = btn.Location.Y;
        btn.Location = new Point(x + 1, y);
    }

    private void Go()
    {
        while (((ship1.Location.X + ship1.Size.Width) < this.Size.Width)&&(flag==false))
        {
            Invoke(new moveBd(moveButton), ship1);
            Thread.Sleep(10);
        }

        MessageBox.Show("U LOOSE");

    }

    private void button1_Click(object sender, EventArgs e)
    {
        flag = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:33:18.890

你用谷歌搜索过[`Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)吗？

您可以通过以下方式启动计时器：

```
Timer timer = new Timer();

timer.Interval = 1000; //one second
timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
timer.Enabled = true;
timer.Start(); 
```

您需要一个事件处理程序来处理`Elapsed`事件，您将在其中放置代码来处理移动“按钮”：

```
private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)  
{
      MoveButton();       
} 
```

# mysql - php 和 mysql 中的投票系统用于州选票，如总统选举

> ID：11780855
> 
> 赞同：0
> 
> 时间：2012-08-02T15:27:23.123
> 
> 标签：mysql

我需要像选举系统一样进行一些思考，以便工作人员选择一个选举并为我的数据库中的每个人选择是否投票，并将其保存到另一个数据库表中，但如果我已经选择了一个人在一个选举它不应该再问我，但如果我选择另一个选举它会再问一次。我对一切都使用 PHP 和 MySQL。

我有不同的查询，例如：

```
SELECT * 
FROM   personas 
          LEFT OUTER JOIN votaciones 
                 on personas.id = votaciones.id_persona 
WHERE  personas.seccion = 6  AND 
       personas.mesa LIKE 'U' AND 
       votaciones.id_eleccion IS NULL 
LIMIT 5 
```

目前我有 3 张桌子。1 里面有人，它有它的 id、名字、第二个名字，以及他去哪张桌子投票，然后是所有不同选举的另一张桌子，比如 2000 年的全国选举，最后是人们所做的投票。

最后一个是 Id_person 作为人民的外键，id_elecction 来自选举，投票是 1 或 0（是和否）。

如果是 1 次选举，那会很容易，但有很多，我不知道有多少，因为您将来可以添加更多选举。

感谢每一个回答任何问题的人。

问题：我需要想出一个查询，它会给出仍未投票给特定选举的人的姓名，就像所有没有在选举 1 中投票的人一样。如果一个人在选举 1 中投票但仍然没有在选举中投票2\. 当我要求选举 1 时，那个人不会出现，但当我要求选举 2 时，他会出现，因为他还没有投票。

就像是：

```
SELECT distinct id, nombre, apellido1,
       apellido2, personas.seccion 
FROM  personas 
        LEFT JOIN votaciones 
             on personas.id = votaciones.id_persona 
WHERE  personas.seccion = 1 AND 
       mesa = 'A' AND 
      (id_eleccion IS NULL OR NOT EXISTS 
                 (SELECT * 
                  FROM votaciones
                  WHERE id_eleccion = 2 )
       ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:32:44.737

```
 SELECT distinct id,nombre, apellido1,apellido2, personas.seccion from personas
      LEFT JOIN votaciones on personas.id = votaciones.id_persona 
       WHERE personas.seccion = 1 AND mesa = 'A' 
        AND (id_eleccion IS NULL OR id 
         NOT IN (SELECT id FROM personas JOIN votaciones ON personas.id = votaciones.id_persona WHERE id_eleccion =1)) 
```

这就是我得出的结论。

# php - MVC 博客 - 如何包含 header\footer\other.php 文件

> ID：11780858
> 
> 赞同：3
> 
> 时间：2012-08-02T15:27:33.240
> 
> 标签：php, html, sql, model-view-controller

按照本教程[http://johnsquibb.com/tutorials/mvc-framework-in-1-hour-part-one](http://johnsquibb.com/tutorials/mvc-framework-in-1-hour-part-one)我正在尝试编写我的第一个**MVC**博客。

我了解它是如何工作的， router.php 调用合适的页面控制器。该控制器调用模型，然后使用返回值调用视图页面。

我的问题是，如果我想在同一个 news.php 页面中添加页眉\页脚怎么办。通常我会写"include("header.php")。但是现在使用 MVC 时，我该如何实现呢？

这些是我的文件：

> 路由器.php：

```
 <?php
/**
 * This controller routes all incoming requests to the appropriate controller
 */
//Automatically includes files containing classes that are called

//fetch the passed request
$pageURL = $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
$path_parts = pathinfo($pageURL);
$page_name = $path_parts['filename']; 
$parsed = explode('?' , $page_name);
//the page is the first element
$page = array_shift($parsed);

// If there is any variables, GET them.
if(!empty($parsed))
{
    $parsed = explode('&' , $parsed[0]);
    $getVars = array();
    foreach ($parsed as $argument)
    {
        //explode GET vars along '=' symbol to separate variable, values
        list($variable , $value) = explode('=' , $argument);
        $getVars[$variable] = urldecode($value);
    }
}

//compute the path to the suitable file
$target ='controllers/' . $page . '_controller.php';

//get target controller
if (file_exists($target))
{
    include_once($target);

    //modify page to fit naming convention
    $class = ucfirst($page) . '_Controller';

    //instantiate the appropriate class
    if (class_exists($class))
    {
        $controller = new $class;
    }
    else
    {
        //did we name our class correctly?
        die('class does not exist!');
    }
}
else
{
    //can't find the file in 'controllers'! 
    die('page does not exist!');
}

//once we have the controller instantiated, execute the default function
//pass any GET varaibles to the main method
$controller->main($getVars);

//  AutoLoad
function __autoload($className)
{        
    // Parse out filename where class should be located
    // This supports names like 'Example_Model' as well as 'Example_Two_Model'
    list($suffix, $filename) = preg_split('/_/', strrev($className), 2);
    $filename = strrev($filename);
    $suffix = strrev($suffix);

    //select the folder where class should be located based on suffix
    switch (strtolower($suffix))
    {    
        case 'model':

            $folder = '/models/';
            $filename = ($className);

        break;

        case 'library':

            $folder = '/libraries/';

        break;

        case 'driver':

            $folder = '/libraries/drivers/';

        break;
    }

    //compose file name
    $file = SERVER_ROOT . $folder . strtolower($filename) . '.php';

    //fetch file
    if (file_exists($file))
    {
        //get file
        include_once($file);        
    }
    else
    {
        //file does not exist!
        die("File '$filename' containing class '$className' not found in
'$folder'.");    
    }
}

?> 
```

> post_controller.php

```
<?php
    /**
     * This file handles the retrieval and serving of posts posts
     */
    class Posts_Controller
    {
        /**
         * This template variable will hold the 'view' portion of our MVC for this 
         * controller
         */
        public $template = 'posts';

        /**
         * This is the default function that will be called by router.php
         * 
         * @param array $getVars the GET variables posted to index.php
         */
        public function main(array $getVars)
        {
            //$b_controller =new  Bottom_Bar_Controller;
            //$b_controller->main($getVars);

            $postsModel = new Posts_Model;

            //get an post
            $post = $postsModel->get_post($getVars['id']);
            //create a new view and pass it our template
            $header = new View_Model('header_template');
            $bottom_bar = new View_Model('bottom_bar');
            $view = new View_Model($this->template);

            //assign post data to view
            $view->assign('header', $header->render(FALSE));
            $view->assign('bottom', $bottom_bar->render(FALSE));
            $view->assign('title' , $post['title']);
            $view->assign('content' , $post['content']);
            $view->assign('date' , $post['date']);
            $view->assign('by' , $post['added_by']);
            $view->render();

        }
    } 
```

> post_model.php

```
<?php
/**
 * The Posts Model does the back-end heavy lifting for the Posts Controller
 */
class Posts_Model
{
    /**
     * Holds instance of database connection
     */
    private $db;

    public function __construct()
    {
        $this->db = new MysqlImproved_Driver;
    }

    /**
     * Fetches article based on supplied name
     * 
     * @param string $author
     * 
     * @return array $article
     */
    public function get_post($id)
    {        
        //connect to database
        $this->db->connect();

        //sanitize data
        $author = $this->db->escape($id);

        //prepare query
        $this->db->prepare
        (
            "
            SELECT *  FROM `posts`
            WHERE
                `id` = '$id'
            LIMIT 1
            ;
            "
        );

        //execute query
        $this->db->query();

        $article = $this->db->fetch('array');

        return $article;
    }

}
?> 
```

> view_model.php

```
<?php
/**
 * Handles the view functionality of our MVC framework
 */
class View_Model
{
    /**
     * Holds variables assigned to template
     */
    private $data = array();

    /**
     * Holds render status of view.
     */
    private $render = FALSE;

    /**
     * Accept a template to load
     */

    public function __construct($template)
    {

        //compose file name
        $file = SERVER_ROOT . '/views/' . strtolower($template) . '.php';

        if (file_exists($file))
        {

            /**
             * trigger render to include file when this model is destroyed
             * if we render it now, we wouldn't be able to assign variables
             * to the view!
             */
            $this->render = $file;

        }        
    }

    /**
     * Receives assignments from controller and stores in local data array
     * 
     * @param $variable
     * @param $value
     */
    public function assign($variable , $value)
    {
        $this->data[$variable] = $value;
    }

    /**
     * Render the output directly to the page, or optionally, return the
     * generated output to caller.
     * 
     * @param $direct_output Set to any non-TRUE value to have the 
     * output returned rather than displayed directly.
     */
    public function render($direct_output = TRUE)
    {

        // Turn output buffering on, capturing all output
        if ($direct_output !== TRUE)
        {
            ob_start();
        }

        // Parse data variables into local variables
        $data = $this->data;

        // Get template
        include($this->render);

        // Get the contents of the buffer and return it
        if ($direct_output !== TRUE)
        {
            return ob_get_clean();
        }
    }

    public function __destruct()
    {
    }
} 
```

> 帖子.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../style/style.css" rel="stylesheet" type="text/css" media="screen" />  
<title> Posts (View)</title>
</head>

<body>
       <div id="main">
        <div class="container">
        <?=$data['header'];?>
            <div id="content">  
                <div class="content-background">
                <h2> <?=$data['title'];?></h2>
                <h4> <?=$data['date'];?> </h4>
                <p><?=$data['content'];?></p>
                </div>

            </div>
         </div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:15:53.057

部分问题是，您的教程对受 MVC 启发的设计模式有一个非常原始的解释*（实际上您无法在 PHP 中实现经典 MVC，但有基于它的[模式](https://stackoverflow.com/a/7622038/727208)*） 。

视图不仅仅是一个模板。视图应该是类实例，它包含所有表示逻辑并处理多个模板。你实际上有一个`layout`包含模板的`posts`模板。

```
// class \Application\View\Posts
public function render()
{
    $layout = new Template( $this->defaultTemplateDirectory . 'layout.html');
    $content = new Template( $this->defaultTemplateDirectory . 'posts.html' );

    $layout->assign( 'content' , $content->render() );

    return $layout->render();
} 
```

此外，视图实例应该做的一件事是从模型层请求信息。

您可能会发现一些有用的材料：

*   [Model-View-Confusion 第 1 部分：为什么 MVC 中的视图可以访问模型](http://r.je/views-are-not-templates.html)
*   [简单的 PHP 模板引擎](http://codeangel.org/articles/simple-php-template-engine.html)
*   [在 MVC 中应该如何构建模型？](https://stackoverflow.com/a/5864000/727208)

如果你想扩展你在 OOP 方面的知识，[这篇文章](https://stackoverflow.com/a/9855170/727208)包含推荐的讲座和书籍的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:48:03.840

MVC 结构中没有很好的解决方案。您可以在每个框架中找到解决方案。例如，在 CakePHP 中，您可以使用 AppController，这是一个始终为每个请求调用的控制器。基本控制器的排序。

但是不，不是很好。

最简单的一种是直接从视图中询问数据。这听起来很奇怪，但它在 MVC 结构中被接受。因此，在您看来，您调用 $News->getLatestItems(10); 并与他们合作。

我不喜欢它，但它有效。

如果你有很多小部件和块，单独的 MVC 可能不是正确的结构。然后您可以查看以下内容：[http](http://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/) ://techportal.inviqa.com/2010/02/22/scaling-web-applications-with-hmvc/ ，它是 MVC 的衍生产品。

您越来越多地看到的另一种解决方案：通过 AJAX 调用请求它。因此，只需在页面加载后加载它们。这样你也解决了这个问题，因为一个 MVC 请求然后变成了多个 MVC 请求。

# oracle - Oracle E-Business Suite：在文件系统中查找依赖对象

> ID：11780865
> 
> 赞同：0
> 
> 时间：2012-08-02T15:28:08.910
> 
> 标签：oracle, object

我在 oracle 电子商务套件中有一个看似简单的任务要完成。我需要扩展一个对象以从数据库中添加一个附加字段。（在这种情况下，供应商的部门需要出现在数据网格中）

我找到了几个站点和一些文档，告诉您这是*如何*工作的（更新视图对象、更新 Java 类、重新编译并将文件通过 ftp 传输回服务器）。问题是到目前为止我看到的每个教程都假设您已经*知道*受影响的文件在哪里。

我正在努力弄清楚我需要从我的服务器中获得哪些文件。我查看了**关于此页面**的链接，我认为它为我指明了正确的方向，但我只找到了一个对象。

关于如何找到我想要的文件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:30:14.480

要查找您希望扩展的基本 Oracle 应用程序页面的所有相关对象，请使用基本页面左下角显示的**“关于此页面”链接。**该链接呈现“关于”页面，该页面显示该基本页面的页面定义、当前会话和技术堆栈信息。如果您没有看到“关于此页面”链接，请确认`FND_DIAGNOSTICS`配置文件选项已启用。

`View Object`从列中找到 VO 对象名称。点击查看`SQL`VO后面的查询。接下来您必须创建一个包含扩展代码的新视图对象。创建一个目录结构，以便您可以将现有 VO 从 App 服务器复制到其中。获取现有的 VO`$JAVA_TOP`

登录到应用服务器（与系统管理员联系以更好地了解您的环境）-

1\. `cd $JAVA_TOP/oracle/apps/<xxx>`（其中 xxx 是您的产品 tops 目录）。

2.`tar -cvf <xxx>_top.tar xxx..`重复尽可能多的模块。

3.FTP每个`.tar`文件到`\jdevhome\jdev\myclasses`.

`\jdevhome\jdev\myclasses`4.解压缩和 `\jdevhome\jdev\myprojects`目录中的每个.tar 文件。

# php - 有没有更简单/更短的方法从 GoogleMaps 获取地理坐标？

> ID：11780871
> 
> 赞同：1
> 
> 时间：2012-08-02T15:28:35.433
> 
> 标签：php, google-maps

我目前正在使用以下方法从 GoogleMaps 获取坐标。我可以写这个更短/更有效吗？

**编辑 21.06.2013**

截至目前，旧的[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)已关闭。这是我修改后的代码，适用于最新版本。如果有人偶然发现它并发现它有用，我已经更新了这篇文章。

```
public function getGeographicCoordinatesFromGoogle()
{
    // create address string
    $value = $this->address_line_1 . ' ' .
             $this->postal_code . ' ' .
             $this->city . ' ' .
             $this->country;
    $value = preg_replace('!\s+!', '+', $value);

    // create request
    $request = 'http://maps.googleapis.com/maps/api/geocode/xml?address=' .
               $value . '&sensor=false';

    // get value from xml request
    $xml = file_get_contents($request);
    $doc = new \DOMDocument('1.0', 'UTF-8');
    @$doc->loadXML($xml);

    // fetch result
    $result = $doc->getElementsByTagName('lat')->item(0)->nodeValue . ',' .
              $doc->getElementsByTagName('lng')->item(0)->nodeValue;

    // check result
    if (!preg_match('/(-?\d+\.\d+),(-?\d+\.\d+)/', $result) ) {
        $result = null;
    }
    // assign value
    $this->setGeographicCoordinates($result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T09:45:46.087

您可以使用 json 代替 xml。json 是更新的、轻量级的和面向对象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:50:20.580

我建议您使用 http_build_query() 而不是尝试使用 Regex 构建 SearchQuery。还有其他需要转义的字符。

这是一个相当长的方法。也许有一个只处理与 GoogleMaps 的通信的类是有意义的（类 GeoBackend 带有方法 getGeoDataForAddress()，它返回一个 GeoData-Object，可以要求它提供坐标等）

# php - IE 的 innerHTML 的替代方案（Internet Explorer

> ID：11780873
> 
> 赞同：0
> 
> 时间：2012-08-02T15:28:38.547
> 
> 标签：php, internet-explorer, select, innerhtml, xajax

> **可能重复：**
> [innerHTML 在 FF 中工作，但在 IE 中没有！](https://stackoverflow.com/questions/1801960/innerhtml-working-in-ff-but-not-in-ie)
> [IE中的innerHTML？](https://stackoverflow.com/questions/2305038/innerhtml-in-ie)

我在 XAJAX 注册函数中使用 innerHTML 来动态构建 SELECT 标记。该功能在 FIREFOX、CHROME 和 SAFARI 中正常工作，但在 IE 中不起作用。是否有替代使用 innerHTML 在 IE 中进行这项工作的替代方法？以下是该函数的列表：

```
function getProducts($category_sname)
 {
    global $current_item_id;
    /*** a new xajax response object ***/
    $objResponse=new xajaxResponse();
    $objResponse->script("clearOption('item_identification');");

    $category_name = substr($category_sname,1,39);
                $cat_list = Jelly::select('catmst')
                        ->select('category_identification','name')
                        ->and_where('name','=',$category_name)
                        ->deleteflag()
                        ->execute();

                foreach ($cat_list as $catl)
                {
                        $category_id = $catl->category_identification;
                }
    /*** get the item_identification data ***/
    $OL=array();
    $OL=getProductData($category_id);

    /*** set first value ***/
    $ret = '<option value="">Select One</option>';
    foreach ($OL as $value => $text)
    {
        /*** the product dropdown options ***/
    $ret .= '<option value="'.$value.'">'.$text.'</option>';
    }
    /*** assign the options to the item_identification div ***/
    $objResponse->assign('item_identification', 'innerHTML', $ret);
    return $objResponse;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:40:23.537

[在http://support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)`<select>`中描述了在 DOM 模型中处理元素的更便携的方式

# r - 如何获得数字（n）？

> ID：11780874
> 
> 赞同：0
> 
> 时间：2012-08-02T15:28:41.113
> 
> 标签：r, plot

在 matplotlib 或 matlab 中，您可以执行以下操作：

```
figure(n)
clf() 
```

我们如何在 R 中做到这一点？

所需的操作是在窗口“n”中打开一个新的空白绘图窗口，即 n=3。所有后续的绘图命令都将出现在此活动窗口中。

我之前肯定已经弄清楚了这一点，但是当我回到 R 时，我总是必须查找它。我认为“x11”加上一些选项可能是诀窍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:08:55.110

如果您打开了多个图形设备，`dev.list`则将显示打开的设备列表。该`dev.cur`函数返回其中哪一个是当前/活动设备。您可以使用`dev.set`选择哪些打开的设备来制作当前或活动设备（新地块将转到的位置）。您还可以使用和`dev.next`来循环浏览活动设备。您可以查看这些函数的返回值的名称以了解它们是什么类型的设备，这可能有助于在跳过文件设备时旋转屏幕设备。`dev.prev``dev.set`

如果您在`par(mfrow=c(3,2))`单个设备中处于多个图形设置 ( ) 中，则可以使用`par(mfg=c(r,c))`将第 r 行和第 c 列中的图形设置为下一个要绘制的图形。

# scala - 如何用微风按双倍缩放矩阵

> ID：11780883
> 
> 赞同：4
> 
> 时间：2012-08-02T15:29:22.837
> 
> 标签：scala, linear-algebra

我正在使用[Breeze](https://github.com/dlwh/breeze)库的数学部分并具有以下矩阵：

```
val matrix = breeze.linalg.DenseMatrix((1.0,2.0),(3.0,4.0)) 
```

`*=`我想使用and运算符之一通过标量 Double 来缩放它（并将结果添加到另一个矩阵）`:*=`：

```
val scale = 2.0
val scaled = matrix * scale 
```

这很好用（下面我的答案中有更多详细信息）。

**更新** ~~此代码确实可以单独工作。我好像在别处有问题。很抱歉浪费您的带宽...~~

**更新 2**但是，如果我专门将类型分配给变量，则代码**无法编译**：`Matrix``matrix`

```
val matrix: Matrix[Double] = breeze.linalg.DenseMatrix((1.0,2.0),(3.0,4.0))
val scaled = matrix * scale // does not compile 
```

编译器一直抱怨它“找不到参数 op 的隐式值”。

任何人都可以解释一下吗？这是微风中的错误还是故意的？TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:00:23.357

对于那些使用 Scala 和 Breeze 库的人，我想在这里详细介绍一些可用于 Matrix 实例的函数/运算符。

我们的出发点是一个简单的`Double`矩阵（`Matrix`相关运算也支持`Float`and `Int`）：

```
scala> val matrix = breeze.linalg.DenseMatrix((1.0,2.0),(3.0,4.0)) 
```

您可以使用

```
scala> println(matrix)
1.0  2.0
3.0  4.0 
```

Breeze 支持保持左操作数不变的运算符和修改左操作数的运算符 - 例如`*`和`*=`：

```
scala> val scaled1 = matrix * 2.0 // returns new matrix!
scala> println(matrix)
1.0  2.0
3.0  4.0
scala> println(scaled1)
2.0  4.0
6.0  8.0
scala> println(matrix == scaled1)
false

scala> val scaled2 = matrix *= 2.0 // modifies and returns matrix!
scala> println(matrix)
2.0  4.0
6.0  8.0
scala> println(scaled2)
2.0  4.0
6.0  8.0
scala> println(matrix == scaled2) // rough equivalent of calling Java's equals()
true 
```

两个变量的哈希码表明它们实际上指向同一个对象（根据 javadoc 是正确的，可以通过查看源代码来验证）：

```
scala> println(matrix.##)
12345678
scala> println(scaled2.##)
12345678 
```

这进一步说明：

```
scala> val matrix2 = breeze.linalg.DenseMatrix((2.0,4.0),(6.0,8.0))
scala> println(matrix == matrix2)
true
scala> println(matrix2.##)
34567890 
```

# asp.net - 在 Windows 7 中为 asp.net 应用程序设置站点

> ID：11780884
> 
> 赞同：0
> 
> 时间：2012-08-02T15:29:30.573
> 
> 标签：asp.net, windows-7, configuration

买了一台Win 7 64位机器，安装了vs2010，一切都很好。

现在我想在 IIS 中为我​​的一个 asp.net 应用程序创建一个站点，这样我就可以访问和获取从 IIS 而不是 WebDev.Webserver.exe 提供的站点。

谷歌了很多，但没有找到解决方案。谁可以帮我这个事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:56:39.710

不确定您是否安装了 IIS，但[这里](http://digitizor.com/2009/02/20/how-to-install-microsoft-iis-server-on-windows-7/)是如何安装的。前提是您拥有正确版本的 Windows 7（专业版或旗舰版）。

概括：

*   开始 > 控制面板 > 程序
*   单击打开或关闭 Windows 功能。
*   选中“Internet 信息服务 (IIS)”复选框

安装后，您可以按照[microsoft 网站](http://technet.microsoft.com/en-us/library/cc772350.aspx)上的步骤进行操作。这应该让你启动并运行。

概括：

*   打开 IIS 管理器。

*   在“连接”窗格中，右键单击树中的“站点”节点，然后单击“添加网站”。

*   在“添加网站”对话框中，在“网站名称”框中键入您的网站的名称。

*   如果要选择与“应用程序池”框中列出的应用程序池不同的应用程序池，请单击“选择”。在“选择应用程序池”对话框中，从“应用程序池”列表中选择一个应用程序池，然后单击“确定”。

*   在物理路径框中，键入网站文件夹的物理路径，或单击浏览按钮 (...) 浏览文件系统以查找文件夹。

*   如果您不必对站点进行任何更改，并且希望网站立即可用，请选中立即启动网站复选框。

*   单击确定。

# android - 如何保持显示编辑文本的警报对话框

> ID：11780885
> 
> 赞同：1
> 
> 时间：2012-08-02T15:29:29.813
> 
> 标签：android, spinner, android-alertdialog

我目前正在尝试保持一个警报对话框，并在屏幕上显示编辑文本。像往常一样，有“确定”和“取消”按钮，我想在该过程中添加一些错误处理。如果用户没有在编辑文本框中输入任何文本并尝试按 OK，我希望弹出一条 toast 消息，通知他们他们的错误。对话框应该仍然显示，因为如果他们想按 OK，仍然需要输入一些内容。

这就是我到目前为止所拥有的。顺便说一句，对话框会根据用户从下拉列表中选择的内容弹出。任何帮助让对话框保持不变将不胜感激！！！

这是我的代码：

```
 regionSpinner.setOnItemSelectedListener(new OnItemSelectedListener()
    {
        @Override
        public void onItemSelected(AdapterView<?> parent, View v, int position, long rowId)
        {
            regionSelect = regionSpinner.getItemAtPosition(position).toString();
            regionInteger = (int) regionSpinner.getItemIdAtPosition(position);

            chosenRegion = regionSpinner.getSelectedItem().toString();

            if (chosenRegion.equals(ENTER_OPTION))

            {
                final AlertDialog.Builder alert = new AlertDialog.Builder(LoginActivity.this);

                alert.setTitle(TITLE_DIALOG);

                // Set an EditText view to get user input
                 final EditText input = new EditText(LoginActivity.this);
                alert.setView(input);

                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int whichButton)
                    {
                        if(input.getText().toString().length() > 0 && input != null)
                        {
                        textValueForEnteredRegion = input.getText().toString();
                        Toast.makeText(getApplicationContext(), "Input Accepted", Toast.LENGTH_SHORT).show();

                        dialog.dismiss();
                        //added soft keyboard code to make keyboard go away.
                        getWindow().setSoftInputMode(
                                  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

                        }
                        else
                        {

                            Toast.makeText(getApplicationContext(), "You must enter a selection.", Toast.LENGTH_SHORT).show();

                        }
                    }

                });

                alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int whichButton)
                    {
                        // Canceled.
                        dialog.dismiss();

                        //added soft keyboard code to make keyboard go away.
                        getWindow().setSoftInputMode(
                                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

                    }
                });

                alert.show();

            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0)
        {

        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:39:33.223

覆盖按钮的 onClick 方法。

请参阅：[Android SDK 覆盖 AlertDialog 事件](https://stackoverflow.com/questions/6720357/android-sdk-override-alertdialog-events)

```
 AlertDialog.Builder build=new AlertDialog.Builder(this);
build.setMessage("This is a message, dawg.")
.setPositiveButton("Awesomesauce.", new OnClickListener()
{
    public void onClick(DialogInterface dialog, int id)
    {
        //Change stuff in here so that dialog.dismiss() is not called.
        //dialog.dismiss(); //closes the window
    }
};
AlertDialog myAlert=build.create();
myAlert.show(); 
```

编辑：看起来你已经有了这个......你只需要在你的 onPostitiveButton onClick 方法中去掉 dialog.dismiss() ，并在它周围加上一个条件来检查你的 EditText 中是否有一些文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:46:34.980

要使 AlertDialog 不可取消，您需要调用此方法`alert.setCancelable(false);`

如果 Edittext 为空，则要显示 toast 消息，您只需要检查 Edittext 内容，如果它为空，则向他们显示 toast，否则做任何您想做的事情，您的代码应如下所示。

```
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener()
                {
                    public void onClick(DialogInterface dialog, int whichButton)
                    {
                        if(!input.getText().toString().equals("")) // if not empty do what u were doing
                        {
                        textValueForEnteredRegion = input.getText().toString();
                        Toast.makeText(getApplicationContext(), "Input Accepted", Toast.LENGTH_SHORT).show();

                        dialog.dismiss();
                        //added soft keyboard code to make keyboard go away.
                        getWindow().setSoftInputMode(
                                  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

                        } else{ // here edittext is empty.. show user a toast and return,
 Toast.makeText(getApplicationContext(), "Input is empty", Toast.LENGTH_SHORT).show();

} 
```

# java - 正确使用静电

> ID：11780887
> 
> 赞同：0
> 
> 时间：2012-08-02T15:29:39.360
> 
> 标签：java, mongodb, static

目前我正在使用带有java的mongodb。我不想每次都重新打开与数据存储的连接，所以我想我应该创建一个静态变量：

```
package Config;

import java.net.UnknownHostException;

import com.google.code.morphia.*;

import com.mongodb.Mongo;
import com.mongodb.MongoException;

public class Config {

    static String dbUrl = "url";
    static int dbPort = portnumber;
    static String username = "user";
    static String password = "pw";
    static String dbName = "dbname";
    public static Datastore ds;

    public static Datastore getDatastore() throws UnknownHostException,
            MongoException {
        if (ds == null) {
            ds = connect();
        }
        return ds;
    }

    public static Datastore connect() throws UnknownHostException,
            MongoException {
        Mongo m = new Mongo(dbUrl, dbPort);
        Datastore ds = new Morphia().createDatastore(m, dbName);
        boolean con = ds.getDB().authenticate(username, password.toCharArray());// todo
        return ds;
    }
} 
```

我会这样使用它：

```
Config.getDatastore().doSomthing(); 
```

除了那些未处理的异常，这是使用`static`变量的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:32:49.323

最好将`Config`类作为[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:31:46.273

给定的`Config`似乎表明这个类应该是一个单例，如果是这样，那么`static`为所有成员使用变量就可以了。你会有多个`Configs`，还是只有一个？

如果`Config`不打算成为单例，则`static`在这种情况下不需要，或者如果是这样，只有在可以与您的班级的每个实例共享您`Datastore`的*情况*下`Config`。您将通过一个简单的*非*静态成员变量来实现您的目标，并且您仍然可以拥有例如`getDataStore`方法。但是每个`Config`班级都有*自己的* `Datastore`

仅`static`当您还想在类的多个实例之间*共享*它时才使用。`Datastore``Config`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:47:13.823

> 这是使用静态变量的正确方法吗？

好吧，您的代码似乎可以按照正确的语言进行编译。就语义而言，用法*取决于*。这取决于问题中的课程，您想要实现的设计。

我会亲自去一个[连接池](http://commons.apache.org/pool/)。如果不需要多个连接，`singleton`如果我只需要维护一个连接，我可能会选择一个。如果不需要单个连接，我会使用成员变量。

在您的情况下，这取决于您希望如何使用`config`该类。在一般设计方面，您所做的事情是`problematic`出于以下原因：

*   您的类中的所有内容都是静态的，就面向对象而言没有任何用途。
*   `powermock`除非您使用或其他一些框架，否则您不能对此类进行单元测试。
*   当有人`connect()`多次打电话时会发生什么？

***注：** `Singleton`是一个[`anti-pattern`](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons). 通常，任何全局状态都是不好的。我会尽可能地避免它。

# biztalk - 无法使用 BTAHL72XSendPipeline 发送消息

> ID：11780889
> 
> 赞同：1
> 
> 时间：2012-08-02T15:29:45.920
> 
> 标签：biztalk, biztalk-2010, btahl7

我有一个接收端口和一个通过 MLLP 接受 HL7 2.x 消息的位置。我创建了一个聚会，并使用 BTAHL7 配置资源管理器配置了确认设置。消息解析良好，ACKS 返回到原始系统，我能够使用直通管道将反序列化的 xml 发送到文件，并使用直通管道将生成的 ACK 发送到文件，因此我可以确认成功接收解析并验证入站 xml。

作为一个简单的测试，我使用 BTAHL72XSendPipeline 创建了一个发送端口，以将 HL7 2.x 消息转储到文件中。为此，我在发送端口上放置了一个过滤器

> BTS.MessageType == [http://microsoft.com/HealthCare/HL7/2X#ADT_A04_21_GLO_DEF](http://microsoft.com/HealthCare/HL7/2X#ADT_A04_21_GLO_DEF)

我收到以下解析错误，我不明白，因为我收到消息时解析得很好：

```
There was a failure executing the send pipeline:  
  "BTAHL72XPipelines.BTAHL72XSendPipeline, BTAHL72XPipelines, Version=1.3.0.0, 
   Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
  Source: "BTAHL7 2.X Assembler" 
  Send Port: "Send.HL7" URI: "C:\Demo\HL7\In\HL7\%MessageID%.txt" 
  Reason: Serialization errors: 
Error # 1
Segment Id: NK1_NextOfKin
Sequence Number: 1
Field Number: 5
Error Number: 207
Error Description: Application internal error
Encoding System: HL7nnnn
Alternate Error Number: Z100
Alternate Error Description: Trailing delimiter found
Alternate Encoding System: HL7-BTA

Error # 2
Segment Id: PV1_PatientVisit
Sequence Number: 1
Field Number: 45
Error Number: 207
Error Description: Application internal error
Encoding System: HL7nnnn
Alternate Error Number: Z100
Alternate Error Description: Trailing delimiter found
Alternate Encoding System: HL7-BTA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T16:19:21.160

右键单击您的发送管道并选择属性，然后单击发送管道旁边的“..”按钮并为“TrailingDelmtierAllowed”选项选择“true”。还要确保在接收管道上检查这些。

# php - 如何使用 PHP 的 XMLReader 类中的 moveToAttribute 方法？

> ID：11780891
> 
> 赞同：0
> 
> 时间：2012-08-02T15:29:57.343
> 
> 标签：php, xml, class, xmlreader

我对`moveToAttribute`PHP`XMLReader`类的方法有疑问。
我不想阅读 XML 文件的每一行。我希望能够遍历 XML 文件，而不是按顺序进行；也就是随机访问。我认为 using`moveToAttribute`会将光标移动到具有指定属性值的节点，然后我可以在其中对其内部节点进行处理，但这并没有按计划进行。

这是 xml 文件的片段：

```
<?xml version="1.0" encoding="Shift-JIS"?>
    <CDs>
        <Cat Type="Rock">
            <CD>
                <Name>Elvis Prestley</Name>
                <Album>Elvis At Sun</Album>
            </CD>
            <CD>
                <Name>Elvis Prestley</Name>
                <Album>Best Of...</Album>
            </CD>
        </Cat>
        <Cat Type="JazzBlues">
            <CD>
                <Name>B.B. King</Name>
                <Album>Singin' The Blues</Album>
            </CD>
            <CD>
                <Name>B.B. King</Name>
                <Album>The Blues</Album>
            </CD>
        </Cat>
    </CDs> 
```

这是我的PHP代码：

```
<?php

    $xml = new XMLReader();
    $xml->open("MusicCatalog.xml") or die ("can't open file");
    $xml->moveToAttribute("JazzBlues");

    print $xml->nodeType . PHP_EOL; // 0
    print $xml->readString() . PHP_EOL; // blank ("")
?> 
```

关于 moveToAttribute，我做错了什么？如何使用节点的属性随机访问节点？我想以节点*Cat Type="JazzBlues"*为目标而不按顺序执行（即 $xml->read()），然后处理其内部节点。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T12:21:36.240

我认为没有办法避免 XMLReader::read。XMLreader::moveToAttribute 仅在 XMLReader 已经指向一个元素时才有效。此外，您还可以检查 XMLReader::moveToAttribute 的返回值以检测可能的故障。也许尝试这样的事情：

```
<?php
$xml = new XMLReader();
$xml->open("MusicCatalog.xml") or die ("can't open file");
while ($xml->read() && xml->name != "Cat"){ }
//the parser now found the "Cat"-element
//(or the end of the file, maybe you should check that)
//and points to the desired element, so moveToAttribute will work
if (!$xml->moveToAttribute("Type")){
    die("could not find the desired attribute");
}
//now $xml points to the attribute, so you can access the value just by $xml->value
echo "found a 'cat'-element, its type is " . $xml->value;
?> 
```

这段代码应该打印文件中第一个猫元素的类型属性的值。我不知道你想对文件做什么，所以你必须改变你的想法的代码。要处理内部节点，您可以使用：

```
<?php
//continuation of the code above
$depth = $xml->depth;
while ($xml->read() && $xml->depth >= $depth){
    //do something with the inner nodes
}
//the first time this Loop should fail is when the parser encountered
//the </cat>-element, because the depth inside the cat-element is higher than
//the depth of the cat-element itself
//maybe you can search for other cat-nodes here, after you processed one 
```

我不能告诉你，如何为随机访问示例重写这段代码，但我希望能帮助你。

# django - 诊断零星的 Django/Postgres“数据库错误：当前事务已中止”

> ID：11780893
> 
> 赞同：1
> 
> 时间：2012-08-02T15:29:58.660
> 
> 标签：django, postgresql, transactions

在使用 Postgres 的 Django 1.3 项目中，我有一个“DatabaseError：current transaction is aborted”来来去去（具体来说，841 次中有 11 次）。该项目是一个测验网站，当用户在视图中提交答案表单时会发生错误。从数据库的角度来看，该过程涉及许多查询，如下所示：

1.  收集问题的所有正确答案（它们是多项选择，可能需要多个答案）*
2.  抓取用户的个人资料
3.  保存此答案
4.  查询用户的新积分总数
5.  将总数保存到他们的个人资料中
6.  检查他们是否有资格获得新的奖励
7.  如果他们这样做了，就奖励新的奖励

在那个受折磨的过程中的某个地方，这个错误突然出现（我猜是因为一个查询没有等待其他查询）。有没有办法让我在生产中（即 DEBUG = False）在这种情况下记录数据库错误？我在 WebFaction 上，[我无法使用 Postgres 错误日志](http://community.webfaction.com/questions/2446/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-transaction-block)。我可以从这个[中间件示例](http://djangosnippets.org/snippets/290/)中窃取一些东西来在这种特定情况下触发吗？

或者，是否有更好的方法来查找此错误，或者我应该将单个查询包装在事务中（不幸的是，它们不在代码中的相同位置，不确定将视图包装在事务装饰器中是否会有所帮助）？

*只是为了混淆问题，在开发过程中添加了多个正确答案的要求，然后在我们上线之前就放弃了，所以我可以稍微简化这个过程，基本上跳过步骤 1 和 4，但我想知道一个这类神秘问题的一般答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T09:56:42.427

您必须为事务启用自动提交。在您的`DATABASES`条目中，包括：

`'OPTIONS': {'autocommit': True,},`

默认情况下，Django 在第一次查询时打开一个事务。通过使用此选项，您必须手动启动事务（例如使用`@commit_on_success`）。由于不再有交易打开，您将得到之前被交易错误掩盖的实际错误。

自动提交设置将是 Django 1.6 的新默认设置，请参阅[https://docs.djangoproject.com/en/dev/ref/databases/#postgresql-notes](https://docs.djangoproject.com/en/dev/ref/databases/#postgresql-notes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:45:09.597

你还没有说在你的 7 个步骤中你有交易的开始和结束。知道这会很有帮助。

“事务中止”消息的一种来源是由于死锁。更多详细信息将在 PostgreSQL 日志中。

但最重要的是，如果您无法访问 PostgreSQL 错误消息，您将继续在调试 PostgreSQL 时遇到痛苦且耗时的经历。使用 WebFaction 来解决这个问题。如果它们不能提供帮助并且您的时间很有价值，那么通过迁移到提供此基本功能的环境，您的底线成本将会降低。

# amazon-web-services - 如何从 Java API 获取 elasticache 节点的地址？

> ID：11780895
> 
> 赞同：1
> 
> 时间：2012-08-02T15:30:05.143
> 
> 标签：amazon-web-services, amazon-elasticache

我正在按如下方式发出 describeCacheClusters 请求并获得有效响应，但 getCacheClusters() 方法返回 null，即使该集群具有可用节点也是如此。我应该使用另一个请求还是缺少参数？

```
DescribeCacheClustersResult result = awsClient
        .describeCacheClusters(new DescribeCacheClustersRequest()
        .withCacheClusterId(ELASTICACHE_CLUSTER_ID)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:42:43.007

由于 API 设计有些混乱，您确实缺少一个参数。[Amazon ElastiCache](http://aws.amazon.com/elasticache/)的文档问题：

您需要将[setShowCacheNodeInfo()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/DescribeCacheClustersRequest.html#setShowCacheNodeInfo%28java.lang.Boolean%29)添加到您的[DescribeCacheClustersRequest](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/DescribeCacheClustersRequest.html) **并为通过**[getCacheClusters()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/DescribeCacheClustersResult.html#getCacheClusters%28%29)从[DescribeCacheClustersResult](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/DescribeCacheClustersResult.html)检索的每个[CacheCluster](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/CacheCluster.html)调用[getCacheNodes(](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticache/model/CacheCluster.html#getCacheNodes%28%29) ) -有关详细信息和代码示例，请参阅我对语义重复[使用 Java 查找 AWS ElastiCache 端点的回答。](https://stackoverflow.com/a/9693016/45773)

# ubuntu - 使用 Telnet 执行远程应用程序

> ID：11780898
> 
> 赞同：0
> 
> 时间：2012-08-02T15:30:10.340
> 
> 标签：ubuntu, telnet

我需要在 Ubuntu 服务器上设置 telnet 以绕过用户名/密码提示，但在连接时启动一个应用程序供用户使用。

我已经安装了`telnetd`，但现在我卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:24:25.997

由于我已经有一段时间没有做过这样的事情了，所以我只需要给你一些指导方针，而不是应该接近大纲：

您应该使用 sshd ，生成一些证书并使用它们进行身份验证并将其交给用户，我认为有一种方法可以将它们作为凭据并绕过登录提示。无论您使用的是 telnetd 还是 sshd，您都可以用程序替换启动的 shell，或者创建一个单独的用户帐户并包含一个 shell 脚本（如 bash.rc），该脚本在帐户登录时启动，无论它是否是本地的或远程，或者可能是客户端或两者都确定登录时运行的内容，我认为可以这样设置腻子。

# ruby-on-rails - Nested Form Rails

> ID：11780902
> 
> 赞同：0
> 
> 时间：2012-08-02T15:30:24.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

I followed Episode 196 from Railcasts but seem that if i follow his it doesn't work quite yet, maybe cause the code is old or i just don't get rails.

Here I have 3 models

```
Customer        Book                Book_Manager
id              id                  id
first           description         customer_id
last            book_manager_id     visible
email
password 
```

Here are my relationship

```
Book
    belongs_to :book_manager
    def customer
        book_manager.customer
    end
Customer
    has_many :book_managers, :dependent => :destroy
    accepts_nested_attributes_for :book_managers
BookManager
    belongs_to :customer
    has_many :books, :dependent => :destroy
    accepts_nested_attributes_for :books 
```

The form is has follow

```
<%= form_for @bookmanager do |f| %>
  <%= f.fields_for :books do |builder| %>
  <div>
    <%= builder.label :description %><br />
    <%= builder.text_area :description, :rows => 3 %>
  </div>
  <% end %>
  <div class="field">  
    <%= f.label :visible %><br />  
    <%= f.text_field :visible %>  
  </div>  
  <div class="actions">
    <%= f.submit %>
  </div>  
<% end %> 
```

If i comment out the line

```
accepts_nested_attributes_for :books 
```

It show the description box, if however i place it there the box does disapear. Did i miss something??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:54:16.717

I think you have to pass a book object here. Try

```
<%= f.fields_for :books, Book.new do |builder| %> 
```

# blender - 如何修复我所有的图像都被渲染为黑色？

> ID：11780904
> 
> 赞同：4
> 
> 时间：2012-08-02T15:30:25.967
> 
> 标签：blender

我所有的图像都呈现黑色。我的动画的输出是一个`.mpg`视频。图像本身是在 GIMP 中创建并保存为不透明`.png`的。

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T01:31:47.843

如果您进入属性菜单（Shift-F7），然后单击材料选项卡，您应该在此处选中“无阴影”框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-25T08:02:18.373

转到属性菜单 (SHIFT + F7) 并将***阴影类别***下的**发射值更改为****0**和**1**范围内的值。然后逐渐更改此发射值以获得对象的预期阴影。为此，您必须多次渲染视图。通过这种方式，您还可以保留对象的真实 3D 特性。

# php - 获取body html标签之外的所有内容

> ID：11780906
> 
> 赞同：0
> 
> 时间：2012-08-02T15:30:33.070
> 
> 标签：php, regex

我有一个脚本可以获取主体标签的内部，而不是外部，我需要两者。我四处搜索，我只能找到代码来获取主体标签的内部，而不是外部。有什么帮助吗？我可以用“body”来爆炸字符串，但问题是，body 标签的属性可以改变，这就是我难倒的 -_-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:54:22.233

如果您真的想使用 Regex 在 之外进行搜索`<body>...</body>`，请尝试使用此（PHP）：

```
/<body[^>]*+>([^<]*+(?:(?!<\/?+body)<[^<]*+)*+)<\/body>/ 
```

并保留搜索结果的开始和结束位置，将这些用于在正文标记之外进行搜索。

# struts2 - 在 Struts 2 中有什么方法可以让我在我的应用程序中获取所有命名空间？

> ID：11780911
> 
> 赞同：1
> 
> 时间：2012-08-02T15:31:04.273
> 
> 标签：struts2, struts

在 Struts2 中有什么方法可以让我在我的 App 中获取命名空间列表？我希望它在运行时设置或列出。

我正在使用 Struts2 RestActionMapper 插件。当为有效操作指定了无效的命名空间时，Struts 会抛出命名空间错误。但是发生此错误时，我无法重定向到标准错误页面。我尝试了几乎所有选项，例如全局错误映射默认命名空间等。没有任何效果。所以认为如果我能在我的应用程序中获得命名空间列表会很棒，因此我可以根据我的有效命名空间列表检查无效命名空间，因此我可以抛出通用错误，最终导致我的标准错误页面。

* * *

我正在寻找如何获取项目中所有命名空间的列表。所以基本上我想做这样的事情。

有效命名空间 = 获取命名空间（）；

if(validNamespaces.contains(namespaceRetrivedFromRestPlugin)) {Sysout("这是有效的命名空间。")} else {Sysout("无效的命名空间");}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:30:03.307

这是可能的，尽管就像史蒂文所说的那样，我不相信这是解决您重定向到错误页面的问题的正确方法。但是，我将把这部分留给您，并使用这个空间来回答命名空间问题。

该代码必须在 Struts2 创建的对象中才能使注入工作。

```
private Configuration configuration;

@Inject
public void setConfiguration(Configuration config) {
    this.configuration = config;
}

protected Set<String> getNamespaces() {
    Set<String> namespaces = Collections.emptySet();
    Map<String, Map<String, ActionConfig>> allActionConfigs = this.configuration.getRuntimeConfiguration().getActionConfigs();
    if (allActionConfigs != null) {
        namespaces = allActionConfigs.keySet();
    }
    return namespaces;
} 
```

配置也可以从`ConfigurationManager`. 此外，您显然希望将这些存储在一个变量中，而不是一遍又一遍地调用上述方法。例如，如果您的对象是 an `interceptor`，那么您可以从该方法调用此方法`init()`并将其存储在类级变量中。

# java - Eclipse：详细格式化程序错误： 无法解析为变量

> ID：11780913
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:10.040
> 
> 标签：java, eclipse

我正在为 hashmap 使用当前的详细格式化程序

```
key + "-" + value 
```

当我调试代码时..

```
import java.util.HashMap;

public class Test1
{
    public static void main(String[] args)
    {
        HashMap<String, Integer> wordcount = new HashMap<String, Integer>();       

        wordcount.put("foo", 1);
        wordcount.put("bar", 1);

        System.out.println("test"); // set a breakpoint here

    }
} 
```

Eclipse 在变量选项卡中说..

```
Detail formatter error:
    key cannot be resolved to a variable
    value cannot be resolved to a variable 
```

实际上，当断点停止在 ... 时，我想查看 HashMap 的值，`System.out.println`不仅仅是`wordcount HashMap<K,V> (id=16)`，而是它的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:03:56.733

详细格式化程序用于为您提供对象（及其属性）的字符串表示，而不是局部变量或方法参数。HashMap 没有“键”和“值”字段，因此您的代码实际上没有意义。

我猜您在另一个调试会话期间将详细格式化程序与一些局部变量（在 HashMap.put() 之类的方法中）混淆了。

要获得一些正常工作的代码，首先在像 put() 这样的 HashMap 方法中设置断点并在遇到断点时实现详细格式化程序可能是最简单的方法。这样您就可以直接验证您的新代码。

HashMaps 的示例详细格式化程序：

```
StringBuilder buffer = new StringBuilder();
buffer.append("entries: ").append(this.size()).append("\n");
for (Map.Entry entry : entrySet()) {
    buffer.append("key: ").append(entry.getKey().toString()).append(", value:").append(entry.getValue().toString()).append("\n");
}
return buffer.toString(); 
```

这将为您的示例提供以下输出：

```
entries: 2
key: foo, value:1
key: bar, value:1 
```

# html - HTML将图像链接到图像到图像

> ID：11780915
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:14.103
> 
> 标签：html

Html-我正在编写一个程序，以便用户单击一个图像并链接到另一个图像和另一个我可以为一个图像执行此操作但我正在努力使用代码将第二个图像链接到第三个等等建议非常感谢？

```
<!DOCTYPE html>
<html>
<head>
    <title>Untitled</title>
</head>
<body>

    <script language="JavaScript">
        var clockID = 0;
        function UpdateClock() {
            if(clockID) {
                clearTimeout(clockID);
                clockID  = 0;
            }
            var tDate = new Date();
            document.theClock.theTime.value = "" 
                + tDate.getHours() `enter code here`+ ":" 
                + tDate.getMinutes() + ":" 
                + tDate.getSeconds();
            clockID = setTimeout("UpdateClock()", 1000);
        }
        function StartClock() {
            clockID = setTimeout("UpdateClock()", 500);
        }
        function KillClock() {
            if(clockID) {
                clearTimeout(clockID);
                clockID  = 0;
            }
        }
    </script>

    <body onload="StartClock()" onunload="KillClock()">
        <form name="theClock">
            <input type=text name="theTime" size=8 style="text-align: center">
        </form>

    <font face="Tahoma"><a target="_blank" href="http://www.htmlfreecodes.com/"><span style="font-size: 8pt; text-decoration: none"></span></a></font>

    <A HREF = "img2.png">
        <img src= "img1.png">
        <!--<A HREF = "img4.png">
                <img src= "img3.png"> </a>-->
</body>
</html> 
```

# c# - 在运行时更改 Windows 窗体面板位置

> ID：11780920
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:31.100
> 
> 标签：c#, windows, winforms

我设计了一个表格用作打印模板。它是为填写表格而设计的，所以在绘制它们之前我必须考虑页边距。

我当前的问题是试图让[System.Windows.Forms.Panel](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)控件按[System.Drawing.Printing.Margins](http://msdn.microsoft.com/en-us/library/system.drawing.printing.margins.aspx)指定的数量移动。

```
private static void MarginShift(Control ctrl, Margins m) {
  Label lbl = ctrl as Label;
  if (lbl != null) {
    lbl.Location = new Point(lbl.Location.X + m.Left, lbl.Location.Y + m.Top);
  } else {
    Panel pnl = ctrl as Panel;
    if (pnl != null) {
      int x = pnl.Location.X;
      int y = pnl.Location.Y;
      pnl.Location = new Point(x + m.Left, y + m.Top);
      if ((pnl.Location.X == x) && (pnl.Location.Y == y) &&
          ((0 < m.Left) || (0 < m.Top))) {
        Console.WriteLine("WTF?");
      }
      foreach (Control c2 in pnl.Controls) {
        MarginShift(c2, m);
      }
    }
  }
} 
```

我从模板表单传递的每个[面板都会命中我的小控制台输出。](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)

Microsoft 的[Panel](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)控件文档说明了[Location](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)值：

> 获取或设置控件左上角相对于其容器左上角的坐标。

那么，为什么使用[边距移动](http://msdn.microsoft.com/en-us/library/system.drawing.printing.margins.aspx)[面板](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)不会移动[位置](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)？

我需要做什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:40:29.860

没关系。面板停靠在表单上。

# php - 导航返回的对象

> ID：11780921
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:37.223
> 
> 标签：php, javascript, ajax

在 PHP 中，我有一个通过 id 列表循环创建的多维对象

```
 $summary = array();
 foreach ( $request->id as $id ) {
 ...
 $summary[] = $summary_data;
 } 
```

然后它被传递给我的javascript。

```
 return json_encode(array('summary' => $summary)); 
```

不确定如何正确导航返回的对象。我是否必须使用 id 的原始列表，并将其用作该对象的索引？还是有更好的方法来跟踪这一点？

最终结果，我想要一个选择框，以便在选择新项目时显示其数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:41:25.827

一个通用的 JSON 对象看起来像这样（试图把所有可能的情况）：

```
{
    "key1":"value1", 
    "subObject":{
        "subKey1":"subValue1",
        "subKey2":"subValue2"
    },
    "arrayOfSubObjects":[
        {"subKey3":"subValue3"},
        {"subKey4":"subValue4"}
    ]
} 
```

您可以使用 jsonObject.key 引用 JSON 对象的任何元素，但请记住 [] 之间的那些部分是数组，因此您需要像在数组中一样对它们进行索引，因此：

```
// to point subKey1:

jsonObject.subObject.subKey1;

// to point subKey3

jsonObject.arrayOfSubObjects[0].subKey3;

OR

// to point subKey1:

jsonObject["subObject"]["subKey1"];

// to point subKey3

jsonObject["arrayOfSubObjects"][0]["subKey3"]; 
```

注意 0 没有引号，因为它是一个索引。

# java - Windows cmd 输出 (Java)

> ID：11780923
> 
> 赞同：1
> 
> 时间：2012-08-02T15:31:40.553
> 
> 标签：java

我找到了这个主题，但代码对我不起作用...[从 Java 返回 Windows cmd 文本？](https://stackoverflow.com/questions/8003144/return-windows-cmd-text-from-java/11749253)

按下按钮后，我想执行一个批处理文件，出于测试目的，它只是 ipconfig-command。

cmd 输出应写入 JTextFiled，但我得到的只是没有文本......

这是将其写入 JTextField 的代码：

```
btnLock.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) 
        {       
            String g = "";
            try {
                Runtime.getRuntime().exec(new String[] {"ipconfig", g});
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }  
            Process p = null;
            try {
                p = Runtime.getRuntime().exec(new String[] {"ipconfig", g});
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            InputStream s = p.getInputStream();

            BufferedReader in = new BufferedReader(new InputStreamReader(s));
            String temp;

            try {
                while ((temp = in.readLine()) != null) 
                {
                    System.out.println(temp);
                }
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }

    });
    btnLock.setBounds(10, 68, 89, 23);
    contentPane.add(btnLock); 
```

那么我做错了什么？

这是我第一个使用 cmd-input 的项目，所以请不要因为我犯的愚蠢错误而生气。;)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:34:32.463

如果我跑

```
 ipconfig "" 
```

我明白了

```
** Error: unrecognized or incomplete command line.** 
```

您只能从 Java 运行在命令行上运行的命令。

BTW：如果你正在寻找错误，你需要阅读错误流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T15:46:15.217

尝试`exec`只接受字符串参数的命令。以下测试代码在我的系统上运行（尽管我只打印到控制台，而不是文本字段）：

```
BufferedReader in = null;
try{
    Process p = Runtime.getRuntime().exec("ipconfig");
    InputStream s = p.getInputStream();

    in = new BufferedReader(new InputStreamReader(s));
    String temp;

    while ((temp = in.readLine()) != null) {
        System.out.println(temp);
    }
} catch (Exception e){
    e.printStackTrace();
} finally {
    if (in != null) in.close();
} 
```

此外，您在原始帖子中的代码也使用`System.out.println`. 据我所知，您不能使用`System.out.println`...打印到 JTextField。您必须使用该`setText`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:35:31.793

我会`Runtime.getRuntime().exec(new String[] {"ipconfig > temp.txt"});`然后将其作为文本文件使用`BufferedReader`.

我希望这有帮助。

# objective-c - 传递函数指针的困惑

> ID：11780929
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:57.323
> 
> 标签：objective-c, function, pointers

我正在读一本书来学习Objective-C，这个程序应该展示处理指针的关键概念，我真的迷路了。

函数的参数中是否发生了某种转换，将`p1`, `p2`, `&il`, 和指针`&i2`的值 ( `*`) 转换为指针的值 ( )？喜欢`p1`变成`*p1`?

我以为是变量的副本而不是实际变量被传递到函数中，那么为什么在函数之后传入的变量的值发生了变化？

另外，为什么我会在第 3 行收到一条警告，上面写着：`No previous prototype for function 'exchangeValues'`？

谢谢！！

```
#import <Foundation/Foundation.h>

void exchangeValues (int *pint1, int *pint2) {
    int temp;

    temp = *pint1;
    *pint1 = *pint2;
    *pint2 = temp;
}

int main (int argc, char *argv[]) {
    @autoreleasepool {
        void exchangeValues (int *pint1, int *pint2);
        int il = -5, i2 = 66, *p1 = &il, *p2 = &i2;

        NSLog(@"il = %i, i2 = %i", il, i2);

        exchangeValues(p1, p2);
        NSLog(@"il = %i, i2 = %i", il, i2);

        exchangeValues(&il, &i2);
        NSLog(@"il = %i, i2 = %i", il, i2);
    }
    return 0;
} 
```

* * *

输出：

```
2012-08-02 11:13:38.569 Test[381:707] il = -5, i2 = 66
2012-08-02 11:13:38.571 Test[381:707] il = 66, i2 = -5
2012-08-02 11:13:38.572 Test[381:707] il = -5, i2 = 66 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:40:18.827

如果您正在学习指针，我会说这是一个复杂的例子！

> 函数的参数中是否发生了某种转换，将 p1、p2、&il 和 &i2 转换为指针的值 (*)？就像 p1 变成 *p1 一样？

`p1`and`p2`被声明为`int *`（指向 的指针）并用and`int`的地址初始化 （使用运算符）。`i1``i2``&`

> 我以为是变量的副本而不是实际变量被传递到函数中，那么为什么在函数之后传入的变量的值发生了变化？

变量的副本被传递给函数，但在本例中是类型变量`int *`（指向 的指针`int`）。值发生变化的原因是该`exchangeValues()`函数正在取消引用这些指针并交换值。这是函数可以在其自身范围之外修改变量的唯一方法（在 C/Objective-C 中），而不是将变量分配为函数的返回值。

> 另外，为什么我在第 3 行收到一条警告，上面写着：没有函数'exchangeValues' 的先前原型？

你好像打错了；删除下面的行`@autoreleasepool`：

```
@autoreleasepool {
    void exchangeValues (int *pint1, int *pint2);   <-- delete this line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:39:38.923

如果您将指针传递给函数，它确实传递了该指针的副本 - 但它仍然引用内存中的相同地址。因此，取消引用该指针仍将指向函数范围之外的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:39:54.350

> 我以为是变量的副本而不是实际变量被传递到函数中，那么为什么在函数之后传入的变量的值发生了变化？

*指针*的副本在这里传递给函数。所以函数的内容指向变量`l1`和`l2`存储的内存位置。所以

```
void exchangeValues (int *pint1, int *pint2) {
    int temp;

    temp = *pint1;   // store the value that pint1 points to in temp
    *pint1 = *pint2; // store the value pint2 points to where pint1 points to
    *pint2 = temp;   // store the value saved in temp where pint2 points to
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:39:43.117

它有点令人困惑，变量是如何像这样连续声明和初始化的，但基本上你有：

`i1`是一个`int`集合 to`-5` `p1`是一个指针，指向一个`int`集合的地址`i1`

`i2`和_`p2`

没有发生转换。您实际上是在“交换”这些指针在函数中指向的值。

指针是令人困惑的事情，但坚持下去，它会变得清晰，有足够的parctice和这样的示例代码......

# google-app-engine - 即使 IdGeneratorStrategy.IDENTITY 被评论，JDO-GAE 密钥也会被创建

> ID：11780931
> 
> 赞同：0
> 
> 时间：2012-08-02T15:31:59.587
> 
> 标签：google-app-engine, google-cloud-datastore

我有以下代码，

```
public class UserAccount {

  @PrimaryKey
  @Persistent
  private Long id;  
  .... 
```

所以，通过代码创建主键，但是当我通过查看数据存储查看器时

```
http://localhost:8888/_ah/admin , I see key got populated via datastore (some encoded key). Is this an expected behavior ?. The problem however is when I try to connect my child objects with the parent objects. Thanks alot. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:38:25.493

是的，这是完全可以预料的。有关更多信息，请查看[JDO 密钥](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)

# css - 同位素选定元素控制

> ID：11780933
> 
> 赞同：0
> 
> 时间：2012-08-02T15:32:00.810
> 
> 标签：css, jquery-isotope

我在使用 Isotope 控制过滤选项卡和分页链接的视觉显示时遇到了一点麻烦。我想解决两个问题：

1 如何分类我的过滤选项卡之一，使其在页面加载时看起来已经被选中？

2 当我单击容器中的分页链接时，当前选定的选项卡被取消分类，这意味着它看起来不再被选中？

请在此处查看演示 andym.ca/designs/isotope/tester4.html，您就会明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:17:55.757

关于第一个问题；在你的同位素逻辑代码正确之前，你可以有这个匿名的自我执行功能来预设某些东西

```
(function(){
    var selector = $('.classtobefilteredoutonload');
    $container.isotope({ filter: selector });
    // other things that shall happen too go here, like assigning the right class to you PMTV tab div
    return false;
})(); 
```

或者做不到这一点，利用[哈希历史](http://isotope.metafizzy.co/docs/hash-history-jquery-bbq.html)来预设您的网站。

关于第二个问题，您似乎正在使用此 CngClass 函数来切换所有可单击“a”元素的焦点，因此当您单击分页“a”元素时，存档视频自然会失去焦点。当您点击标签和分页器时，您可以在 Google Chrome 的开发者工具中很好地看到它。

好吧，您应该在分页上单独切换“突出显示类”，其功能与切换选项卡的功能不同。一个匿名的自执行函数一遇到就会执行，所以看起来你的 DOM 的其余部分还没有准备好。尝试相同的功能，但准备好文档。

你可以这样[做](http://jsfiddle.net/ckCfS/)。

[您可以像这样](http://jsfiddle.net/ckCfS/2/)预先标记您的标签或屏幕上的任何项目

# linq - Linq 并行.ForEach

> ID：11780940
> 
> 赞同：0
> 
> 时间：2012-08-02T15:32:19.237
> 
> 标签：linq, c#-4.0, parallel.foreach

我有一个 foreach 循环，里面有 Linq 查询。

在我将 foreach 更改为 Parallel.ForEach 之前，一切都运行良好：

```
// get the task info   ---------
                Log("Populate task, guf code lists ...........................");
                List<SF_CO_ITEM> tasks = (from coi in ctx.SF_CO_ITEM
                                                    where coi.CO == co.ID
                                                    select coi).ToList();

               // foreach (SF_CO_ITEM t in tasks)
               // {
                Parallel.ForEach(tasks, t =>
                {
                    Log("Executing on t: " + t.ID);

                    // exception on next line:
                    List<SF_CO_LINE_ITEM> gufs = (from coli in ctx.SF_CO_LINE_ITEM      
                                                            where coli.CO_ITEM == t.ID
                                                            select coli).ToList(); 
```

我得到的例外是：

> System.AccessViolationException 未处理 Message=尝试读取或写入受保护的内存。这通常表明其他内存已损坏。Source=Oracle.DataAccess StackTrace：在 Oracle.DataAccess.Client.ConnectionDispenser.Open(OpoConCtx opoConCtx) 的 Oracle.DataAccess.Client.ConnectionDispenser.Open(IntPtr& opsConCtx, IntPtr& opsErrCtx, OpoConValCtx* pOpoConValCtx, OpoConRefCtx& pOpoConRefCtx) 处。 System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf 处的 Client.OracleConnection.Open()（布尔 openCondition，DbConnection storeConnectionToOpen，DbConnection originalConnection，字符串异常代码，字符串尝试操作，布尔和 closeStoreConnectionOnFailure）在 System.Data.EntityClient.EntityConnection.Open() 处。数据。`1.GetResults(Nullable`1 forMergeOption) 在 System.Data.Objects.ObjectQuery `1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Collections.Generic.List`1..ctor(IEnumerable `1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 源) 在 ChangeOrder.Program.<>c_ *DisplayClass19.b* _16(SF_CHANGE_ORDER_ITEM t) 在 C:\VS_apps\PMConsole\PMC Tools\ChangeOrderExecution\Program .cs：System.Threading.Tasks.Parallel.<>c_DisplayClass2d 处的 220 行*1.b `2.<ForEachWorker>b__23(Int32 i) at System.Threading.Tasks.Parallel.<>c__DisplayClassf`_c* () 处 System.Threading.Tasks.Task.InnerInvoke() 处 System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)在 System.Threading.Tasks.Task.<> *c_DisplayClass7.b*_6(Object ) 在 System.Threading.Tasks.Task.ExecuteSelfReplicating(Task root) 在 System.Threading.Tasks.Task.Execute() 在 System.Threading.Tasks.Task.ExecutionContextCallback(Object obj) 在 System.Threading.ExecutionContext .Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.Tasks.Task.ExecuteEntry(Boolean bPreventDoubleExecution) 在 System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot) 在 System.Threading.Tasks。 System.Threading.Tasks.TaskScheduler.TryRunInline(Task task, Boolean taskWasPrevouslyQueued, Object threadStatics) 在 System.Threading.Tasks.Task 的 ThreadPoolTask​​Scheduler.TryExecuteTaskInline(Task task, Boolean taskWasPreviousQueued)。InternalRunSynchronously(TaskScheduler scheduler) at System.Threading.Tasks.Task.RunSynchronously(TaskScheduler scheduler) at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState，Func `4 bodyWithLocal, Func`1 localInit，Action `1 localFinally) at System.Threading.Tasks.Parallel.ForEachWorker[TSource,TLocal](IList`1 列表，ParallelOptions parallelOptions，Action `1 body, Action`2 bodyWithState，Action `3 bodyWithStateAndIndex, Func`4 bodyWithStateAndLocal，Func `5 bodyWithEverything, Func`1 localInit，Action `1 localFinally) at System.Threading.Tasks.Parallel.ForEachWorker[TSource,TLocal](IEnumerable`1 source，ParallelOptions，Action `1 body, Action`2 bodyWithState，Action `3 bodyWithStateAndIndex, Func`4 bodyWithStateAndLocal，Func `5 bodyWithEverything, Func`1 localInit，Action`1 localFinally) at System.Threading.Tasks.Parallel.ForEach[TSource](IEnumerable`1 来源，Action`1 body) 在 ChangeOrder.Program.PerformChangeOrder(SF_CHANGE_ORDER co, SF_CLIENT_PROJECT cp, SFEntitiesQA ctx) 在 C:\VS_apps\PMConsole\PMC Tools\ChangeOrderExecution\Program.cs:line 216 at ChangeOrder.Program.Main( C:\VS_apps\PMConsole\PMC Tools\ChangeOrderExecution\Program.cs 中的 String[] args）：System.AppDomain._nExecuteAssembly 的第 1373 行（RuntimeAssembly 程序集，String[] args）在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，Evidence assemblySecurity, String[] args) 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state,Boolean ignoreSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart() InnerException:

我不确定我需要锁定什么，因为我只是在获取信息（只是 RO，对吗？）。

我考虑过添加“AsParallel”，但我的理解是这是一个 PLINQ 指令，它只会导致查询相对于自身并行运行。

我找不到任何人在 Parallel.ForEach 循环中运行 Linq 查询的例子，所以我什至不确定我在做什么是允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:09:06.990

为什么不直接加入而不是单独获取每个呢？由于这看起来像是在访问数据库，因此您的 LINQ 提供程序应该只编写查询并为您提供您正在寻找的行。试试这个：

```
List<SF_CO_LINE_ITEM> gufs;
var query = from coi in ctx.SF_CO_ITEM
            where coi.CO == co.ID
            join coli in ctx.SF_CO_LINE_ITEM      
                on coi.ID == coli.CO_ITEM
            select coli;
// Confirm what the query looks like by calling 'query.ToString()'
gufs = query.ToList(); 
```

我通常会将查询与实际的枚举/实现分开，这样我就可以验证查询看起来像我想要的那样。`SF_CO_ITEM`如果这是和之间的 1:M 关系`SF_CO_LINE_ITEM`，那么您应该通过将联接更改为来执行 GroupJoin：

```
join coli in ctx.SF_CO_LINE_ITEM      
    on coi.ID == coli.CO_ITEM into tcoli
from tc in tcoli
select tc 
```

至于为什么会出现此异常，可能与尝试从不同的线程访问上下文有关。根据[关于并行循环的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff963552.aspx)：

> 隐藏循环体依赖
> 
> 循环依赖的不正确分析是软件缺陷的常见来源。注意所有并行循环体不包含隐藏的依赖关系。这是一个很容易犯的错误。
> 
> 尝试在并行迭代之间共享非线程安全的类的实例（例如 Random 或 DbConnection）的情况是微妙依赖关系的一个示例。

因此，您唯一的选择是保持顺序而不是并行，或者将原始查询更改为连接，以便您在第一时间获得正确的数据。

希望有帮助！

# textmate - 你如何对齐javascript：textmate中的作业

> ID：11780944
> 
> 赞同：0
> 
> 时间：2012-08-02T15:32:39.353
> 
> 标签：textmate

你如何对齐javascript：textmate中的作业？

我看到 = assignments 与键盘快捷键对齐，但找不到对齐的方法： assignments.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T11:26:20.587

你需要一个恰当地命名为[Align 的包。](https://github.com/sicher/align-tmbundle)

分号并不是真正的赋值运算符：最好将其视为键与其值之间的分隔符。

# communication - 世界各地都在使用哪些小数分隔符？

> ID：11780945
> 
> 赞同：2
> 
> 时间：2012-08-02T15:32:41.770
> 
> 标签：communication

世界各地都在使用哪些小数分隔符？（我在程序之间有几个地方必须将浮点数交换为没有千位分隔符的字符串。）是的，我知道这不是一个好主意……有很多方法可以做到这一点，但更严重以后需要改进...

我知道“，”和“。” 但还有其他人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:37:57.610

[http://en.wikipedia.org/wiki/Decimal_mark](http://en.wikipedia.org/wiki/Decimal_mark)

在那里你有一个分隔符列表（基本上是“，”，“。”和“”在写作中，还有“'”和“˙”用于手写），在不同的国家有很多例子。

由于这适用于编程，您应该只担心“，”，“。” 和“”，也就是说，除非你正在做一些 OCR'ing。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:38:08.237

看看这个： http: [//mathworld.wolfram.com/DecimalPoint.html](http://mathworld.wolfram.com/DecimalPoint.html)。它使它听起来像小数点，小数点逗号和凸起的句点是唯一使用的东西。

您也可以查看维基百科[http://en.wikipedia.org/wiki/Decimal_point](http://en.wikipedia.org/wiki/Decimal_point)但它并没有真正说明其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T10:53:11.647

我通过循环所有 CultureInfos 框架（806）在 .NET 环境中检查了这一点。结果集是“.”、“”和“/”。最后一个是波斯文化信息。

# ios5 - 设置一个 ScheduledAudioFileRegion 重新开始

> ID：11780946
> 
> 赞同：2
> 
> 时间：2012-08-02T15:32:46.537
> 
> 标签：ios5, core-audio, audiounit

我正在尝试在点击按钮并使用 iOS 5 文件播放器音频单元时播放声音。

文件播放器使用 ScheduledAudioFileRegion 播放音频，并且可以根据需要安排播放尽可能多的帧

```
ScheduledAudioFileRegion rgn;
memset (&rgn.mTimeStamp, 0, sizeof(rgn.mTimeStamp));
rgn.mTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
rgn.mTimeStamp.mSampleTime = 0;
rgn.mCompletionProc = NULL;
rgn.mCompletionProcUserData = NULL;
rgn.mAudioFile = audioFile;
rgn.mLoopCount = INT_MAX;
rgn.mStartFrame = 0;
rgn.mFramesToPlay = nPackets * fileASBD.mFramesPerPacket; // plays entire file. 
```

每当按下按钮时，我如何告诉这个文件播放器从一开始就播放声音，或者我每次都必须创建一个新区域并memset它？我希望从开始到结束按下按钮时播放声音，但是当再次点击按钮时，即使文件当前正在播放，它也应该从头开始。文件播放器音频单元可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:30:22.650

调用`AudioUnitReset`以停止播放，然后启动并再次播放。立即发生（或尽可能接近没有区别。）

每当您的用户按下按钮时执行此操作：

```
// Reset
AudioUnitReset(filePlayerUnit, kAudioUnitScope_Global, 0);
// Prime (have to do this before every play call.)
UInt32 defaultVal = 0;
AudioUnitSetProperty(filePlayerUnit, 
                     kAudioUnitProperty_ScheduledFilePrime,                
                     kAudioUnitScope_Global, 
                     0, 
                     &defaultVal, 
                     sizeof(defaultVal));
// Play (again)
AudioUnitSetProperty(_playerUnit,
                     kAudioUnitProperty_ScheduleStartTimeStamp,
                     kAudioUnitScope_Global,
                     0,
                     &startTime,
                     sizeof(startTime)); 
```

您已经拥有该地区的时间戳。您需要这些，但您还必须创建一个`AudioTimeStamp`：

```
AudioTimeStamp startTime;
memset(&startTime, 0, sizeof(startTime));
startTime.mFlags = kAudioTimeStampSampleTimeValid;
startTime.mSampleTime = -1; 
```

创建它，并在第一次调用 play 之前从上面的第一个代码段调用相关的 SetProperty。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:49:06.450

你能不能让你的 UIButton 在调用 Play 之前触发一个 Stop 动作..？

# parsing - 在 C 中解析数据

> ID：11780955
> 
> 赞同：1
> 
> 时间：2012-08-02T15:33:24.680
> 
> 标签：parsing

我正在尝试使用 C 解析一些数据。

数据格式如下：

```
REMARK 280  100 MM MES PH 6.5, 5 % GLYCEROL                                     
REMARK 290                                                                      
REMARK 290 CRYSTALLOGRAPHIC SYMMETRY                                            
REMARK 290 SYMMETRY OPERATORS FOR SPACE GROUP: P 1 21 1                         
REMARK 290                                                                      
REMARK 290      SYMOP   SYMMETRY                                                
REMARK 290     NNNMMM   OPERATOR                                                
REMARK 290       1555   X,Y,Z                                                   
REMARK 290       2555   -X,Y+1/2,-Z 
```

我想提取“对称运算符”数据：X,Y,Z 和 -X,Y+1/2,-Z 并将数据转换为以下形式的每组对称运算符的两个矩阵：

```
[1 0 0   [0           [-1 0 0        [0
 0 1 0    0    and      0 1 0         1/2
 0 0 1]   0]            0 0 -1]       0] 
```

分别为 X,Y,Z 和 -X,Y+1/2,-Z。

我没有做太多的数据解析，如果有人能提供任何帮助，我将不胜感激。

# android - Android 4 ICS 构建源代码 - 最低系统要求

> ID：11780956
> 
> 赞同：3
> 
> 时间：2012-08-02T15:33:27.690
> 
> 标签：android, build, android-source

我已经下载了 Android 4.0.1_r1 源代码。解压 tar 后，整个源代码在磁盘中大约有 9.21 GB。

[http://source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)中引用的 Google 指南

> 注意：源下载大小约为 6GB。您将需要 25GB 的免费空间来完成单个构建，并需要高达 90GB（或更多）的空间来完成完整的构建。

背景信息
（我的系统）- *Intel i5 2 处理器（4 核），8 GB RAM*

我的主机系统是 Windows Server 2008，我正在尝试运行 Ubuntu 11.01（64 位）桌面，内存 4GB 分配为使用 Oracle Virtual Box 的虚拟机。VM 中的磁盘空间目前约为 50 GB。

这些是我的几个小问题：-

1.  单一构建和“全套”构建有什么区别？

2.  根据共享的配置，是否建议我在 Ubuntu VM 上构建 Android 4，或者我是否应该考虑在具有双启动的单独主分区上安装 Ubuntu 并在 Ubuntu 主机上开始构建？
3.  是否有任何已知的推荐最低系统配置来支持构建 Android 4 或更高版本，正如我在外部论坛的某处看到的那样，构建 android 需要 16 GB 的 RAM。我不希望对此有一个准确的答案，但根据某人过去使用 Android 4 ICS 的构建经验，一些最低限度的快速指针对我来说会很好。

[虽然在这里](https://stackoverflow.com/questions/4533116/minimum-hardware-requirements-for-android-development)可能会出现重复问题，但旧问题是指源代码少得多的以前版本的 Android。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:47:11.130

通过单一构建/全套，我猜它们是指您可以构建的所有变体（工程构建、用户调试、用户等）。

在构建时间方面，RAM 是一个非常严重的问题。话虽如此，我已经在具有 4 GB RAM 的四核（Intel Core 2 IIRC）上构建了 ICS。从头开始构建一个变体需要几个小时（使用`make -j4`），同时计算机几乎无法用于其他任务。

如果我要定期构建 Android，我认为八核 CPU 和 16 GB RAM 与我想要的规格一样低（我目前使用的是具有 20 GB RAM 的八核 Xeon，它有相当不错的构建时间）。

对我来说，构建单个变体的完整存储库的磁盘空间使用量略高于 30 GB，但这取决于您在构建中包含的确切内容，因此您提到的 25 GB 数字听起来并不合理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:35:26.737

你会很快在磁盘上非常低。你的配置是好的，但它会很慢，你需要很多时间来编译在真正的 ubuntu 上运行它会给你带来更好的性能

Ram 问题不是真正的问题，如果您的系统能够使用大量 RAM，它将编译得更快，因为它需要更少的磁盘访问，但是使用 4 gB 可以做到这一点。只是更慢
对于全套构建部分我不知道

祝你好运

# python - 无论输入如何，Python 函数都会运行到第一个 if 语句

> ID：11780957
> 
> 赞同：3
> 
> 时间：2012-08-02T15:33:28.047
> 
> 标签：python

我正在从在线教程中学习 Python。我的问题是，当我运行脚本时，无论我输入什么，我得到的响应都是 if go == "kitchen"...

```
def go_to():
    go = raw_input("Go to? ")

    if go == Kitchen or breakfast:
         print "You rumble down stairs and into the kitchen. Your mom has left some microwaved waffles on the table for you. Your big boy step sits by the counter."
    elif go == "back to bed" or "back to sleep" or bed or sleep:
        print "You hit snooze and roll over."
    elif go == "bathroom" or "toilet" or "potty" or "pee" or "poop" or "take a sh*t" or "take a dump" or "drop a load":
        print "You make a stop at the head first."
        go_to()
    else:
        print "That is not a command I understand."
        go_to()
go_to() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:38:12.137

正如评论中提到的，您`or`在这里的使用不正确。这个：

```
go == "kitchen" or "breakfast" 
```

相当于这个：

```
(go == "kitchen") or "breakfast" 
```

该`or`运算符将其两个操作数都转换为布尔值，这为您提供：

```
(something) or true 
```

这总是减少到`true`，所以你总是输入 if 语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:38:57.077

正如 Ignacio 所说，您需要一个新教程。

如果任一子表达式或计算结果为，则表达式`go == Kitchen or breakfast`将为真。如果评估为与 相同的对象，或者它们的类型定义了一个为它们定义相等性的方法，或者如果对象不是，就会发生这种情况。`go == Kitchen``breakfast``True``go``Kitchen``__eq__``breakfast``None`

检查变量是否包含列表中的值的方法是：

```
if go in (Kitchen, breakfast):
   # do something 
```

另请注意，您的代码没有显示变量`Kitchen`和`breakfast`定义的位置，并且您的缩进不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:37:28.107

我相信问题出在你的第一个 if 语句上

在大多数编程语言中，你不能像你一样只说“或”。您需要做的是在所有条件下重复“go ==”部分。

```
if go == Kitchen or go == breakfast: 
```

它现在正在做的是评估 (go == Kitchen) 并发现它是错误的。然后它正在评估“早餐”并返回真。因为它是一个“或”语句，所以整个 if 为真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T15:39:41.963

语法

```
if go == "Kitchen" or "breakfast": 
```

由于评估顺序是错误的。看来您打算检查 go 是“厨房”还是“早餐”。但是，您检查 go 是否为“kitchen”或字符串“breakfast”是否为真。后者总是如此，因为非空字符串的计算结果不是 False。

描述您的意图的直观方式是：

```
if (go == "kitchen") or (go == "breakfast"): 
```

可能更 Pythonic 你也可以写：

```
if go in ["kitchen", "breakfast"]: 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T15:39:51.930

要检查条件是否是事物列表之一，则应使用`in`，例如：

```
if go in ('Bathroom', 'take a dump', 'have a beep'):
    # do something...
elif go in ('Kitchen', 'Living room'):
    # etc...
else:
    # no idea where to go? 
```

的使用`or`并没有达到您的预期，并且已在其他帖子中进行了解释。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-06T03:21:15.283

你的代码说的是如果去厨房或早餐所以对于python来说这意味着如果去厨房或早餐

所以，它要么是Something，要么是True。它解析为 True ，因此第一个 if 语句总是被执行。您可以通过以下方式修复它 `if go in ['kitchen', 'breakfast']`

# php - 从python调用php脚本（子进程）

> ID：11780958
> 
> 赞同：3
> 
> 时间：2012-08-02T15:33:34.033
> 
> 标签：php, python, process, subprocess

我有一个像这样在命令行中调用的 php 脚本：

```
$php importTextFile.php --user "X" --title "name" notice_X.txt 
```

我想在 python 脚本中使用该文件。我试过了 ：

```
for file in os.listdir("."):
    subprocess.call(["php", "-f", "importTextFile.php"], "--user=X", "--title="'%s' % name, file) 
```

我有他以下错误：

```
 File "./pageFromFile.py", line 21, in main
    subprocess.call(["php", "-f","importTextFile.php"], "--user=Bot", "--title="'%s' % nom, fichier)
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 629, in __init__
    raise TypeError("bufsize must be an integer")
TypeError: bufsize must be an integer 
```

我不明白如何解决这个错误。谢谢你的帮助。

**edit1**：感谢它的工作原理，但我遇到了 args 的问题，因为出现了使用消息：

```
Usage: php [options] [-f] <file> [--] [args...]
       php [options] -r <code> [--] [args...]
       php [options] [-B <begin_code>] -R <code> [-E <end_code>] [--] [args...]
       php [options] [-B <begin_code>] -F <file> [-E <end_code>] [--] [args...]
       php [options] -- [args...]
       php [options] -a 
```

edit2：我改变了参数的顺序并且它有效：[“php”，“php /script /path”，“-f”，“--user”，“X”，“--title”，X，文件]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:38:39.873

```
subprocess.call(["php", "-f", "importTextFile.php", "--user=X", "--title="'%s' % name, file]) 
```

应该修

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:41:34.013

由于文档混乱，这是一个混乱的解释。

来自：[http ://docs.python.org/library/subprocess.html#frequently-used-arguments](http://docs.python.org/library/subprocess.html#frequently-used-arguments)

> 为了支持各种用例，Popen 构造函数（和便利函数）接受大量可选参数。对于大多数典型用例，这些参数中的许多都可以安全地保留其默认值。最常需要的参数是：

来自：[http ://docs.python.org/library/subprocess.html#subprocess.call](http://docs.python.org/library/subprocess.html#subprocess.call)

call() 的签名是：

```
subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

你会希望你的 CL 参数都在一个列表中 - 正如 Jakob 提供的那样。这是 call() 的第一个参数。

其他位置参数对应于类 subprocess.Popen ( [http://docs.python.org/library/subprocess.html#subprocess.Popen](http://docs.python.org/library/subprocess.html#subprocess.Popen) ) 的初始化参数。bufsize 恰好是其中之一。

# javascript - jQuery：设置值时 Javascript 抛出错误“操作不安全”

> ID：11780959
> 
> 赞同：12
> 
> 时间：2012-08-02T15:33:37.067
> 
> 标签：javascript, jquery

我正在尝试为不解释输入元素的占位符属性的浏览器找到一个后备解决方案。我有这个简单的 jQuery 脚本，但它会引发错误

```
SecurityError: "The operation is insecure.
this.value = val;" 
```

这是我的脚本：

```
$('document').ready(function(){
       $('input').each(function() {
           if ($(this).val() === '' || $(this).val() === undefined) {
               $(this).val($(this).attr('placeholder'));
           }
       });
}); 
```

有人知道我能做什么吗？或者我做错了什么？或者这个错误意味着什么？它发生在 Firefox 中，尚未在其他浏览器中测试过。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-03T14:47:26.327

我刚刚在我的项目中解决了类似的问题。原来我试图设置一个`<input type="file" ...>`输入的值。似乎您可能面临同样的问题，因为您正在选择文档的所有输入，而不管它们的类型如何。

如果您安装了 firebug，请尝试通过插入`log`命令来查找导致此错误的输入，然后再尝试修改输入的值。

```
$('document').ready(function(){
       $('input').each(function() {
           if ($(this).val() === '' || $(this).val() === undefined) {

               // Log goes here
               window.console.log(
                   'There is an input without a value!', 
                   this);

               $(this).val($(this).attr('placeholder'));
           }
       });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:03:57.077

我有一个不安全的警告与 antoher 功能。原因很简单，一个库函数是用一个作为参数的数组调用的，但它需要一个元素（dom）。结果是预期的，但我敢肯定，无论如何都不会这样。因此，请检查您的变量类型是否是您（或另一方）想要的类型。

# php - 仅在 Paypal 付款完成后接收表格

> ID：11780964
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:33:56.347
> 
> 标签：php, javascript, paypal

我正在寻找一种方法，仅当在 Paypal 上完成付款时才通过电子邮件接收表单结果。

我的购物车旁边有一个表格。我希望人们填写表格，然后他们可以在购物车中浏览。一旦他们点击购物车中的“结帐”，他们就会被重定向到 Paypal。我之前谈过的表格还在等待中……尚未发送。

当这个人填写他的信用卡信息时，在 Paypal 上单击 Proceed，然后... 付款完成后，他在我的网站上填写的表格将被提交。但如果他决定关闭贝宝窗口并停止购物，我将不会收到。

我需要你的帮助男孩/女孩。我不确定我需要什么语言才能完成这项工作。我猜是 PHP 和 Javascript。

非常感谢，这个功能对我们来说非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:38:20.743

查看 IPN（即时付款通知）。

[https://www.paypal.com/ipn/](https://www.paypal.com/ipn/)

付款后它会向您的服务器发送一条消息，听起来就像您正在寻找的那样。您可以用 PHP 编写侦听器，它们提供示例代码。

# java - 在 iOS 5 中使用 Java 类

> ID：11780966
> 
> 赞同：2
> 
> 时间：2012-08-02T15:34:01.293
> 
> 标签：java, objective-c, xcode, ios5

我是 Xcode/Apple 编程的新手，想知道是否有可能将一些 Java 类合并到 iOS 应用程序中？一种包装/打包它们以便我可以调用它的方法的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:39:28.940

不可能在 iOS 应用程序中包装 Java 类。首先，iOS 上没有 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:39:41.493

抱歉不行。您将不得不在 Objective-C 中重写它。我也没有遇到过能够做得足够好的转换器以使其值得付出努力。

# excel - 在 2 个不同的 excel 文件中的 2 个不同的列中查找匹配值

> ID：11780967
> 
> 赞同：0
> 
> 时间：2012-08-02T15:34:02.603
> 
> 标签：excel, excel-2007, vba

嗨，Excel 2007 中的 vba 新手

这是我想编写一个宏的场景，其中 abc.xls 的 A 列中的值位于 .xyz.xls 的 c 列中。如果有人可以帮助我解决这个逻辑并且可以轻松完成其余部分。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:37:13.750

欢迎来到 SO。继续蒂姆在他的评论`vlookup()`中所说的内容是在另一张纸上找到价值的简单方法。在你的情况下，函数看起来像这样：

```
vlookup([abc.xls]Sheet1!A1, [xyz.xls]Sheet1!C:C, 1, False) 
```

第一部分是要查找的值，第二部分是要在其中查找值的表（在我们的例子中只有一行），第三部分是要从表的哪一列返回值，第三部分是部分告诉它找到一个完全匹配。因此，此函数将在 xyz.xls 的 C 列中查找 abc.xls 的 A1 中的值，如果找到则返回该值。

如果您想要找到值的行，请使用 match 函数。

```
match([abc.xls]Sheet1!A1, [xyz.xls]Sheet1!C:C, 0) 
```

这将与 vlookup 执行相同的操作，但返回找到匹配项的行。

请注意，您不必直接输入这些公式。如果您导航到新工作簿并选择单元格，它应该生成引用，就像您从当前工作表中选择了一个一样。

# symfony - 在扩展控制器时管理路由

> ID：11780968
> 
> 赞同：0
> 
> 时间：2012-08-02T15:34:03.443
> 
> 标签：symfony

我正在尝试覆盖我在前端使用的控制器：

```
AcmeDemoBundle:DemoController       //route is /demo 
```

对于后端，我在 AdminDemoBundle 中扩展了这个控制器：

```
AdminDemoBundle:DemoController      //route is /admin/demo 
```

我还没有覆盖新控制器中的任何方法，但是来自 AcmeDemoController 的所有路由都转到 /admin/demo。

**有谁知道为什么？**

是否有解决方案可以覆盖前端控制器以用于后端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:30:14.743

基本上，通过扩展控制器，所有路由都被重新定义为相同的名称和不同的前缀，这意味着路由正在被替换。

实际上，为后端扩展控制器根本没有意义，因为控制器本来就是很小的。应用程序的逻辑必须保留在服务中。

将逻辑移至服务可以更好地组织代码。在谈论服务时，无需担心后端/前端。只需在服务中创建逻辑，并在前端控制器或后端控制器中使用方法。

# iphone - 用引号填充 plist

> ID：11780970
> 
> 赞同：-1
> 
> 时间：2012-08-02T15:34:09.530
> 
> 标签：iphone, xcode, random, plist

我在 iPhone 每日报价应用上做了一段时间的工作，我收到的大部分评论是使用 plist 存储报价，然后设置代码以每天随机访问报价。不过，我从来没有真正使用过 plist，并且不确定构建一个充满引号的新 plist 的最佳方法。我可以得到一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:47:17.670

您的 plist 可能看起来像这样。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>A Quote</string>
    <string>A Quote</string>
    <string>A Quote</string>
</array>
</plist> 
```

您可以像这样将 plist 打开到数组中。然后你会有一个字符串数组，你可以做任何你想做的事情。一旦你有了一个数组，我假设你知道如何从中获取一个随机对象。

```
[NSArray arrayWithContentsOfFile:@"myPlist.plist"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T01:33:42.117

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>files</key>
    <dict>
        <key>Resources/Info.plist</key>
        <data>
        OkWU6AfEeAr3G1LVjwgv3QVl/C4=
        </data>
    </dict>
    <key>files2</key>
    <dict>
        <key>Resources/Info.plist</key>
        <dict>
            <key>hash</key>
            <data>
            OkWU6AfEeAr3G1LVjwgv3QVl/C4=
            </data>
            <key>hash2</key>
            <data>
            bTnXxa3Ed3AQ3vCPs76DvwtUwOlgsWxMGNleo3ICfKA=
            </data>
        </dict>
    </dict>
    <key>rules</key>
    <dict>
        <key>^Resources/</key>
        <true/>
        <key>^Resources/.*\.lproj/</key>
        <dict>
            <key>optional</key>
            <true/>
            <key>weight</key>
            <real>1000</real>
        </dict>
        <key>^Resources/.*\.lproj/locversion.plist$</key>
        <dict>
            <key>omit</key>
            <true/>
            <key>weight</key>
            <real>1100</real>
        </dict>
        <key>^Resources/Base\.lproj/</key>
        <dict>
            <key>weight</key>
            <real>1010</real>
        </dict>
        <key>^version.plist$</key>
        <true/>
    </dict>
    <key>rules2</key>
    <dict>
        <key>.*\.dSYM($|/)</key>
        <dict>
            <key>weight</key>
            <real>11</real>
        </dict>
        <key>^(.*/)?\.DS_Store$</key>
        <dict>
            <key>omit</key>
            <true/>
            <key>weight</key>
            <real>2000</real>
        </dict>
        <key>^(Frameworks|SharedFrameworks|PlugIns|Plug-ins|XPCServices|Helpers|MacOS|Library/(Automator|Spotlight|LoginItems))/</key>
        <dict>
            <key>nested</key>
            <true/>
            <key>weight</key>
            <real>10</real>
        </dict>
        <key>^.*</key>
        <true/>
        <key>^Info\.plist$</key>
        <dict>
            <key>omit</key>
            <true/>
            <key>weight</key>
            <real>20</real>
        </dict>
        <key>^PkgInfo$</key>
        <dict>
            <key>omit</key>
            <true/>
            <key>weight</key>
            <real>20</real>
        </dict>
        <key>^Resources/</key>
        <dict>
            <key>weight</key>
            <real>20</real>
        </dict>
        <key>^Resources/.*\.lproj/</key>
        <dict>
            <key>optional</key>
            <true/>
            <key>weight</key>
            <real>1000</real>
        </dict>
        <key>^Resources/.*\.lproj/locversion.plist$</key>
        <dict>
            <key>omit</key>
            <true/>
            <key>weight</key>
            <real>1100</real>
        </dict>
        <key>^Resources/Base\.lproj/</key>
        <dict>
            <key>weight</key>
            <real>1010</real>
        </dict>
        <key>^[^/]+$</key>
        <dict>
            <key>nested</key>
            <true/>
            <key>weight</key>
            <real>10</real>
        </dict>
        <key>^embedded\.provisionprofile$</key>
        <dict>
            <key>weight</key>
            <real>20</real>
        </dict>
        <key>^version\.plist$</key>
        <dict>
            <key>weight</key>
            <real>20</real>
        </dict>
    </dict>
</dict>
</plist> 
```

# sql-server-2008 - 如何在 Broker Services 中设置/处理多种消息类型

> ID：11780972
> 
> 赞同：0
> 
> 时间：2012-08-02T15:34:22.793
> 
> 标签：sql-server-2008, service-broker

我刚刚开始了解代理服务，但我对多种消息类型/队列等有疑问……情况很简单；

我有一个作业队列（基于时间），并且每个作业都被“处理”，结果存储到一个表中。触发器将位于结果表上并使用代理服务来处理每个结果（异步）。每个结果（XML）都可能因作业类型而异，因此我需要为每种类型存储一个过程。我猜我需要多种消息类型来完成这个，但是......

1.  我是否还需要多个队列，每个消息类型一个？
2.  我还需要多份合同吗？
3.  我需要多项服务吗？
4.  知道类似这样的任何好的设计模式吗？

理想情况下，我想要一个有许多读者的队列（每种类型 1 个），但我不确定这是可能的，因为每个队列只能有 1 个存储过程。当我创建多种消息类型和多个队列时，似乎我也需要多种服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:16:11.220

我建议坚持一项服务/队列/合同。多种消息类型都可以。您应该对您的异步处理激活过程进行编码，如下所示（伪代码）：

```
begin transaction;
receive message into @msg
switch @msg.message_type
case 'A': exec proc_for_a @msg;
case 'B': exec proc_for_b @msg;
...
case 'Z': exec proc_for_z @msg;
end
commit; 
```

如果您曾经使用 WM_PAINT/WM_CREATE 等进行过旧式[Windows 编程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570%28v=vs.85%29.aspx#designing_proc)，则激活过程可能非常相似，SSB 消息类型扮演 WM_XXX 的角色。这是因为事件驱动编程类似于事件驱动编程......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:44:20.613

这就是我想出的（使用 Remus 关于坚持单一合同/队列/服务的回答）。

根据类型创建特定的消息/合同/队列/服务名称：

```
create message [//MyPrefix/SomeTypeMessage]
create queue dbo.SomeTypeQueue
create service [//MyPrefix/SomeTypeService]
create contract [//MyPrefix/SomeTypeContract] 
```

因此，“SomeType”是可以在某处插入的数据中找到的类型。创建调用开始对话的触发器时，该类型用于连接不同的系统名。根据在“myTypeDataField”中找到的数据，记录将被发送到不同的队列/进程。

```
declare @handle uniqueidentifier, 
        @service sysname, 
        @contract sysname,
        @messageType sysname,
        @myType varchar(50)

set @myType = (select myTypeDataField from inserted)
set @messageBody = (select * from inserted for xml auto)

set @service = N'//MyPrefix/' + @myType + 'Service'
set @contract = N'//MyPrefix/' + @myType + 'Contract'
set @messageType = N'//MyPrefix/' + @myType + 'Message'

begin tran

    begin dialog conversation @handle
    from service @service
    to service @service, 'current database'
    on contract @contract
    with encryption = off;

    send on conversation @handle
    message type @messageType(@messageBody);

commit 
```

# javascript - 在主干/下划线模板中使用循环

> ID：11780974
> 
> 赞同：27
> 
> 时间：2012-08-02T15:34:26.980
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个backbone.js/underscore.js 模板，我将其输入到主干视图中进行渲染。视图传递了一个模型，该模型包含一个`posts`对象数组（我`post`在模板中调用）。

**问题**：当我尝试遍历数组的所有元素时`posts`，我得到一个错误`Uncaught SyntaxError: Unexpected token )`并引用主干视图代码中的一行`template: _.template( $('#tpl_SetView').html() )`。

我是否错误地执行导致此错误的循环？

**模板代码**

```
<script type="text/template" id="tpl_SetView">
    <div class="row_4">
        <div class="photo_container">
            <div class="set_cover">
                <img src="/<%= posts[0].thumb_subpath %><%= posts[0].img_filename %>" width=240 />
            </div>
            <div class="set_thumbs">
                <%= _.each(posts, function(post) { %>
                    <img src="<%= post.thumb_subpath %><%= posts.img_filename %>" width=55 />
                <%= }); %>
            </div>
        </div>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-02T15:44:09.087

要回显变量使用`<%= %>`，但要解析 javaScript 代码，只需使用`<% %>`.

例如：

```
// In your Backbone View
var posts = {"posts": this.model.toJSON()};
var template = _.template($("#tpl_SetView").html(), posts);

// In your template
<div class="row_4">
    <div class="photo_container">
        <div class="set_cover">
            <img src="/<%= _.escape(posts[0].thumb_subpath) %><%= _.escape(posts[0].img_filename) %>" width=240 />
        </div>
    <div class="set_thumbs">
        <% _.each(posts, function(post){ %>
            <img src="<%= _.escape(post.thumb_subpath) %><%= _.escape(posts.img_filename) %>" width=55 />
        <% }); %>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T15:42:59.183

我想你会发现问题出在以下几行：

```
<%= _.each(posts, function(post) { %>
    <img src="<%= post.thumb_subpath %><%= posts.img_filename %>" width=55 />
<%= }); %> 
```

根据我对 underscore 评估模板的作用的回忆，这些行没有多大意义。 ~~每个 <%=..%> 项都是单独评估的。也就是说，它们必须是完全可评估的表达式，而不是部分功能块。。~~

编辑：实际上，詹姆斯是对的。<%..%> 可以单独定义（最终归结为一个大的javascript字符串）。它是转义的，并且内插的表达式必须是单独的表达式。

编辑二：即便如此，在评估上下文中，我认为功能块的使用仍然可能会创建一个奇怪的 javascript 字符串，它可能无法按预期进行评估......我必须考虑一下。它可能仍然完全正常。

# php - 如何清理用户提交的网址？

> ID：11780976
> 
> 赞同：12
> 
> 时间：2012-08-02T15:34:32.713
> 
> 标签：php, regex, security, url

我想将用户的个人网址存储为纯文本，由 htmlspecialchars() 编码。

然后我会检索这些数据并生成并显示一个链接，如下所示：

```
echo '<a href="'.$retrieved_string.'" target="_blank">'; 
```

然而，即使使用编码的特殊字符和引号，href 也可能不安全，因为可能插入了 javascript，错误链接的示例：

```
javascript:alert(document.cookie); 
```

所以我在想的是剥离一个潜在的'javascript'标签（当然在我进行特殊字符编码之前），如下所示：

```
preg_replace('/^javascript:?/', '', $submitted_and_trimmed_input); 
```

所以让我们总结一下：

```
$input=htmlspecialchars(preg_replace('/^javascript:?/', '', trim($_POST['link'])),11,'UTF-8',true);
mysql_query("update users set link='".mysql_real_escape_string($input)."'");

//And retrieving:

$query=mysql_query("select link from users");
$a=mysql_fetch_assoc($query);
echo '<a href="'.$a['link'].'" target="_blank">'; 
```

现在的问题是，对于安全的 url 链接是否足够，或者是否有任何其他潜在的意外我应该警惕？

**编辑：**

我读过一些关于 filter_var() 的内容，它似乎在很多方面都完全失败了。它不使用 unicode 字符验证国际域，然后以下字符串再次成功通过测试：

```
http://example.com/"><script>alert(document.cookie)</script> 
```

*   我的意思是普通...这太荒谬了，一定有更好的方法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:36:04.053

尝试使用[`filter_var()`](http://us.php.net/manual/en/function.filter-var.php)

```
filter_var('http://example.com', FILTER_VALIDATE_URL, FILTER_FLAG_PATH_REQUIRED) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-02T18:54:48.933

这就是我要做的。在我看来，最好的方法是在它前面加上 http：

```
$link=preg_replace('/^(http(s)?)?:?\/*/u','http$2://',trim($_POST['website'])); 
```

因此，即使脚本到达那里，我也不在乎。然后实际转换字符：

```
$link= htmlspecialchars($link, 11,'UTF-8',true); 
```

而已。不要拐弯抹角，也应该兼容 utf-8。

# android - 如何使用 Mapsforge 在线模式

> ID：11780980
> 
> 赞同：1
> 
> 时间：2012-08-02T15:34:43.417
> 
> 标签：android, map, openstreetmap

如何在我的 android 应用程序中实现地图。使用 mapsforge lib（避免创建地图或读取地图文件）？我可以从 OSM 服务器下载瓷砖吗？

在[本文](http://code.google.com/p/mapsforge/wiki/GettingStartedMapView)中，他们仅演示离线模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T22:33:47.780

[在https://code.google.com/p/mapsforge/source/browse](https://code.google.com/p/mapsforge/source/browse)查看 Mapsforge 的示例代码。

[`DownloadLayerViewer`](https://code.google.com/p/mapsforge/source/browse/Applications/Android/Samples/src/main/java/org/mapsforge/applications/android/samples/DownloadLayerViewer.java)演示如何从 OSM Mapnik 服务器获取切片。（在应用程序中使用它之前，请检查 OSM 的[Tile 使用政策！）](http://wiki.openstreetmap.org/wiki/Tile_Usage_Policy)

OpenCycleMap 还有一个类，其工作方式相同。

如果您想使用自定义磁贴源，请查看[`DownloadCustomLayerViewer`](https://code.google.com/p/mapsforge/source/browse/Applications/Android/Samples/src/main/java/org/mapsforge/applications/android/samples/DownloadCustomLayerViewer.java). 此示例向您展示如何指定要从中下载切片的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:21:28.923

瓷砖下载功能已被删除。请参阅mapsforge 邮件列表上的[此讨论。](https://groups.google.com/d/msg/mapsforge-dev/0dGCdh5jHmw/z-zKBcp9CHUJ)如果您只需要该特定功能，则可以恢复到较旧的版本。我不记得确切的修订版，但它应该是在链接评论之前大约一个月发布的修订版。

# cakephp - 由于不正确的字符串编码，CakePHP Cakemenu 插件在全局错误后失败

> ID：11780988
> 
> 赞同：0
> 
> 时间：2012-08-02T15:35:16.993
> 
> 标签：cakephp, character-encoding, eval

我正在使用带有 PHP 5.3.5 的 CakePHP 2.1.2 和一个名为“Cakemenu”的插件，它通常可以正常工作。该插件将菜单存储在数据库表中，菜单链接存储为文本，如

```
array('plugin'=>null,'controller'=>'assets','action'=>'index'); 
```

插件中的助手获取这些值，然后执行此代码以将该文本转换为数组：

```
 //Try to evaluate the link (if starts with array)
    if (eregi('^array', $value['Menu']['link'])) {
      $code = "\$parse = " . $value['Menu']['link'] . ";";
      $result = eval($code);
      if (is_array($parse)) {
        $value['Menu']['link'] = $parse;
      }
    } 
```

除非 CakePHP 正在处理错误，否则一切正常。例如，如果我在浏览器中输入了错误的控制器名称，我应该会得到一个菜单，然后是丢失的控制器消息。相反，我收到一个完整的页面“解析错误：语法错误，意外的 $end in...”消息指向带有 eval 语句的行。如果我打印出正在评估的变量，我会看到它已经（错误地）用 Html 实体编码，而它通常不会。

要评估的好字符串：

```
 $parse = array('plugin'=>null,'controller'=>'assets','action'=>'index'); 
```

要评估的错误字符串：

```
 $parse = array(&#039;plugin&#039;=>null,&#039;controller&#039;=>&#039;Parts&#039;,&#039;action&#039;=>&#039;add&#039;); 
```

为了暂时解决这个问题，我添加了两个语句来替换有问题的字符

```
 $value['Menu']['link'] = str_replace( '&#039;','\'',$value['Menu']['link']);
    $value['Menu']['link'] = str_replace( '&gt;','>',$value['Menu']['link']); 
```

一切都很好。其他一些可能有用的信息是，用于生成菜单的数据数组在应用程序的 beforeFilter 期间被读取并保存在视图变量中，然后菜单作为视图中的元素生成。

我认为该错误会导致 CakePHP（或 PHP）跳过一些加载或配置过程，从而导致字符串被错误处理。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:12:34.120

您的`beforeFilter()`方法不会在错误页面上执行。您必须自己处理错误并手动调用`beforeFilter()`. 我写了[一篇](http://www.hoffsays.com/2012/06/12/custom-404-not-found-error-pages-in-cakephp-2-0/)关于如何使用自定义错误页面的博文——密切关注**控制器回调**部分。

# php - Facebook 允许请求取消订阅的朋友

> ID：11780995
> 
> 赞同：1
> 
> 时间：2012-08-02T15:35:47.690
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk, facebook-php-sdk

我如何使用

```
FB.ui({
      method: 'apprequests',
      message: 'Gooby pls'
}, requestCallback); 
```

仅向尚未收到请求的朋友发送对我的应用程序的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:41:06.800

如果您有一个数据库，其中包含某种谁收到了谁的请求（可能已经有），您可以使用请求对话框的`exclude_ids`字段将它们从列表中删除。只需列出用户 ID：

```
 FB.ui({
     method: 'apprequests',
     message: 'Gooby pls',
     exclude_ids: ['42'] // add real facebook user ids here
}, requestCallback); 
```

# codeigniter - Code Igniter Form Validation Min Max Length count of unicode characters？

> ID：11780997
> 
> 赞同：1
> 
> 时间：2012-08-02T15:36:01.150
> 
> 标签：codeigniter, unicode, validation

好奇是否有人知道 max_length[n] 和 min_length[n] 函数中内置的 codeigniter 表单验证是否将 unicode 字符计为 1 个字符，或者使用的所有字符的总和是否表示 unicode 字符？

我注意到当我对字符串进行 var_dump 时，它会计算所有字符，只是想知道 code igniter 或 php 是否有内置函数来计算 unicode 字符？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:51:59.857

您可以进行自己的回调验证：

```
$this->form_validation->set_rules('rule', 'The rule', 'callback_checkUnicode'); 
```

并检查 unicode 字符串>

```
public function checkUnicode($string)
{
    if (strlen($string) != strlen(utf8_decode($string)))
    {
            //is unicode: add your own counter condition here
        return true;
    }

    return false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:45:59.993

Codeigniter 使用 php 的 mb_strlen 如果它在你的 php 安装中可用，它允许传递编码参数，否则它默认为 php 的基本 strlength，它不允许你传递字符串编码。问题是 CI 不能让你传递 max_length[n] 的可能编码...

如果您需要它来补偿编码，最好只使用原始 php 滚动您自己的验证。

# android - Android SQL 崩溃 - 没有这样的列

> ID：11780998
> 
> 赞同：1
> 
> 时间：2012-08-02T15:36:01.900
> 
> 标签：android, crash, android-contentprovider, android-sqlite

我最近几天一直在处理这个问题。我在这里阅读了所有类似的问题，并查阅了许多教程，即使一切对我来说看起来都正确，我的程序仍然崩溃。

这是logcat：

```
08-02 15:13:41.876: D/ReminderProvider(1242): main oncreate called
08-02 15:13:41.984: I/dalvikvm(1242): threadid=3: reacting to signal 3
08-02 15:13:42.074: I/dalvikvm(1242): Wrote stack traces to '/data/anr/traces.txt'
08-02 15:13:42.234: D/ReminderListActivity(1242): onCreate
08-02 15:13:42.406: D/ReminderListActivity(1242): Displaying all the reminders in a list
08-02 15:13:42.474: I/dalvikvm(1242): threadid=3: reacting to signal 3
08-02 15:13:42.524: I/dalvikvm(1242): Wrote stack traces to '/data/anr/traces.txt'
08-02 15:13:42.804: D/gralloc_goldfish(1242): Emulator without GPU emulation detected.
08-02 15:13:43.234: D/ReminderProvider(1242): query
08-02 15:13:43.264: I/SqliteDatabaseCpp(1242): sqlite returned: error code = 1, msg = no such column: modified, db=/data/data/com.corsair.android.taskreminder/databases/reminders.db
08-02 15:13:43.274: W/dalvikvm(1242): threadid=11: thread exiting with uncaught exception (group=0x409c01f8)
08-02 15:13:43.374: E/AndroidRuntime(1242): FATAL EXCEPTION: AsyncTask #1
08-02 15:13:43.374: E/AndroidRuntime(1242): java.lang.RuntimeException: An error occured while executing doInBackground()
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.lang.Thread.run(Thread.java:856)
08-02 15:13:43.374: E/AndroidRuntime(1242): Caused by: android.database.sqlite.SQLiteException: no such column: modified: , while compiling: SELECT _id, title FROM reminders ORDER BY modified DESC
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1564)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:354)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:291)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at com.corsair.android.taskreminder.ReminderListProvider.query(ReminderListProvider.java:133)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.ContentProvider$Transport.query(ContentProvider.java:178)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.ContentResolver.query(ContentResolver.java:311)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:56)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.CursorLoader.loadInBackground(CursorLoader.java:42)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:255)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:66)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:55)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-02 15:13:43.374: E/AndroidRuntime(1242):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

因此，它声称我正在尝试访问不存在的列。这是我的 ReminderListProvider 查询方法中第 133 行的位，它说错误正在发生。第 133 行是 queryBuilder.query 调用：

```
// get the database and run the query
    SQLiteDatabase db = mOpenHelper.getReadableDatabase();
    Cursor cursor = queryBuilder.query(db, projection, selection,
            selectionArgs, null, null, orderby); 
```

这是我声明列并创建数据库的代码（我没有 _id 声明，因为我的 RemindersTableMetaData 实现了 BaseColumns）：

```
public static final String REMINDER_TITLE = "title";
public static final String REMINDER_BODY = "body";
public static final String REMINDER_DATE_TIME = "reminder_date_time";

    // script to create database
    public static final String DATABASE_CREATE_SCHEMA = "create table "
            + DATABASE_TABLE_NAME + " (" + RemindersTableMetaData._ID
            + " integer primary key autoincrement, " + REMINDER_TITLE
            + " text not null, " + REMINDER_BODY + " text not null, "
            + REMINDER_DATE_TIME + " text not null" + ");"; 
```

这是在查询调用之前调用的代码：

```
String[] uiBindFrom = { RemindersTableMetaData._ID,
            RemindersTableMetaData.REMINDER_TITLE };
    int[] uiBindTo = { R.layout.layout_reminder_list };

    getLoaderManager().initLoader(REMINDER_LIST_LOADER, null, this);

    adapter = new SimpleCursorAdapter(this, R.layout.layout_reminder_row,
            null, uiBindFrom, uiBindTo, 0); 
```

问题已解决：只是为了让其他可能遇到此问题的人清楚：发生的事情是我对方法的 sortOrder 参数如何感到困惑

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) { 
```

被使用了。我认为这就像一个脚本命令。例如，您将传入 LOW_TO_HIGH 或其他内容，它会相应地对您的结果进行排序。是的，我有时是个白痴。您真正想要在这里传递的是一个列名，它将用于对游标中返回的行进行排序。无论如何，我传入了一个名为“modified”的字符串，它不是声明的列名，因此程序崩溃了。我一直认为我设置数据库的方式有问题，一直以来这都是我忘记自己做过的看似微不足道的事情。这就是生活。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:03:03.850

只是为了让其他可能遇到此问题的人清楚：发生的事情是我对`sortOrder`方法的论点感到困惑

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) { 
```

被使用了。我认为这就像一个脚本命令。例如，您将传入 LOW_TO_HIGH 或其他内容，它会相应地对您的结果进行排序。是的，我有时是个白痴。您真正想要在这里传递的是一个列名，它将用于对游标中返回的行进行排序。无论如何，我传入了一个名为“modified”的字符串，它不是声明的列名，因此程序崩溃了。我一直认为我设置数据库的方式有问题，一直以来这都是我忘记自己做过的看似微不足道的事情。这就是生活。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:46:30.633

尝试在您的设备/模拟器上卸载该应用程序，这可能是在没有修改列时创建数据库的情况......

编辑：

```
// script to create database
    public static final String DATABASE_CREATE_SCHEMA = "create table "
            + DATABASE_TABLE_NAME + " (" + RemindersTableMetaData._ID
            + " integer primary key autoincrement, " + REMINDER_TITLE
            + " text not null, " + REMINDER_BODY + " text not null, "
            + REMINDER_DATE_TIME + " text not null" + ");"; 
```

您永远不会在这里定义“修改”列...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T06:27:33.593

您传入的变量`projection`，甚至您的相应表，大多可能没有`modified`作为列。