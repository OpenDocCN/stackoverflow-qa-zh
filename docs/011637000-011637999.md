# StackOverflow 问答 11637000-11637999

# ruby-on-rails-3 - Rails 3.2 + Rolify：安装 Rolify 后应用程序中断（错误？）

> ID：11637000
> 
> 赞同：0
> 
> 时间：2012-07-24T18:24:49.577
> 
> 标签：ruby-on-rails-3

我有[这个 Rails 3.2 应用程序](https://github.com/AzizLight/AgileBaboon)运行良好。我按照以下步骤安装了[Rolify ：](https://github.com/EppO/rolify)

1.  添加`gem "rolify"`到 Gemfile
2.  跑`bundle install`
3.  跑`rails g rolify:role`
4.  检查新的迁移、新文件和修改的文件（由上面的命令生成/修改）。
5.  跑`rake db:migrate`

此时，我尝试创建/编辑用户并收到以下错误：

```
NoMethodError in UsersController#create

undefined method `user_id' for #<User:0x007f8f21f168e8> 
```

请注意，在我安装 Rolify 之前，一切正常，所以问题来自 Rolify。

以下是有问题的迁移、新文件和修改后的文件：

新的迁移：

```
class RolifyCreateRoles < ActiveRecord::Migration
  def change
    create_table(:roles) do |t|
      t.string :name
      t.references :resource, :polymorphic => true

      t.timestamps
    end

    create_table(:users_roles, :id => false) do |t|
      t.references :user
      t.references :role
    end

    add_index(:roles, :name)
    add_index(:roles, [ :name, :resource_type, :resource_id ])
    add_index(:users_roles, [ :user_id, :role_id ])
  end
end 
```

新型号：

```
class Role < ActiveRecord::Base
  has_and_belongs_to_many :users, :join_table => :users_roles
  belongs_to :resource, :polymorphic => true
end 
```

修改后的模型：

```
class User < ActiveRecord::Base
  rolify
  has_secure_password

  has_many :issues
  acts_as_tenant(:client)

  attr_accessible :email, :password, :password_confirmation, :username

  validates :username, presence: true,
                       length: { within: 4..50 },
                       format: { with: /(?:[\w\d]){4,255}/ }
  validates_uniqueness_to_tenant :username, case_sensitive: false

  validates :email, presence: true,
                    uniqueness: { case_sensitive: false },
                    length: { within: 8..255 },
                    format: { with: /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i }

  validates :password, presence: true, on: :create,
                       confirmation: true,
                       length: { within: 4..255 }

  validates :password_confirmation, presence: true, on: :create

  # NOTE: Used by SimpleForm to display the dropdown proerply
  def to_label
    "#{username}"
  end
end 
```

[您可以在Github](https://github.com/AzizLight/AgileBaboon)存储库中找到项目中的其余文件

请问有谁知道错误来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:52:05.563

`user_id`发生此错误是因为acts_as_tenant （错误地）为模型上的字段创建验证`User`。如果你在里面运行这个代码，你可以看到这个验证器`rails c`：

```
 User._validators 
```

我建议切换到看起来比acts_as_tenant 维护得更好的[公寓gem。](https://github.com/bradrobertson/apartment)

# maven - 将捆绑的 Maven NSIS 插件与 maven 3.x 一起使用

> ID：11637001
> 
> 赞同：6
> 
> 时间：2012-07-24T18:24:52.933
> 
> 标签：maven, maven-plugin, maven-3, nsis

我有一个 NSIS 脚本，用于为我的 Java 应用程序生成安装程序 - 我想使用 Maven 自动执行此操作。

除了使用 Mojo Project 中的插件[http://mojo.codehaus.org/nsis-maven-plugin/](http://mojo.codehaus.org/nsis-maven-plugin/)之外，是否可以使用捆绑插件[http://maven.apache.org/maven-1.x/ Maven 3.x 中的plugins/nsis/](http://maven.apache.org/maven-1.x/plugins/nsis/)还是仅适用于 Maven 1.x？

我知道如何使用 Mojo Project 插件，感谢这个问题，[Automating NSIS script build using maven2](https://stackoverflow.com/questions/10352351/automating-nsis-script-build-using-maven2/10595214)，我只是想确保我为我的 Maven 版本选择了正确的支持插件。

# powershell - 删除cabinet文件

> ID：11637003
> 
> 赞同：1
> 
> 时间：2012-07-24T18:24:55.893
> 
> 标签：powershell

我正在尝试创建一个脚本来删除虚拟服务器中的文件柜文件。出于某种原因，我创建的代码最终没有删除任何压缩文件，而是尝试删除整个 WINDOWS 目录，我不知道为什么会发生这种情况。很好奇是否有人对问题可能有任何想法，因为我找不到任何东西：

```
$dir = "\\$server" + '\C$\windows'

$cabinetArray = @()
foreach ($item in get-childitem -path $dir){
    if ($item.name -like "*.cab"){
        $cabinetArray = $cabinetArray + $item
        }
    }

for ($i = 0; $i -le $cabinetArray.length; $i++){
    $removal = $dir + "\" + $cabinetArray[$i]
    remove-item $removal -force -recurse 
    } 
```

我做了一些测试，似乎出于某种原因，我试图用来收集所有机柜文件的数组由于某种原因甚至没有被填满。我不确定是否有特定的方法来只收集 .cab 文件，因为现在每当我在测试服务器上运行它时，它都会尝试删除所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:33:28.300

我不知道删除该文件夹中的所有 cab 文件是否是个好主意，但我会回答你的问题。当 PoweShell 会为您做这一切时，您正在做大量的数学运算并构建您自己的对象集合。尝试这样的事情：

```
$dir = "\\" + $server + '\C$\windows'
$cabinetFiles = Get-ChildItem -Path $dir -Filter "*.cab" -Recurse
$cabinetFiles | %{
    Remove-Item -Path $_.FullName -Force
} 
```

或者，作为一个班轮：

```
Get-ChildItem -Path ("\\" + $server + '\C$\windows') -Filter "*.cab" -Recurse | %{Remove-Item -Path $_.FullName -Force} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:43:31.923

使用管道，这是您的代码的简化版本（删除 -WhatIf 确实删除文件）。代码从远程框的 windows 目录中获取所有 *.cab 文件（递归），确保只有文件对象传递，然后删除它们。

```
Get-ChildItem "\\$server\admin$" -Filter *.cab -Recurse | 
Where-Object {!$_.PSIsContainer} | 
Remove-Item -Force -WhatIf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T18:33:52.520

> 出于某种原因，我创建的代码最终没有删除任何压缩文件，而是尝试删除整个 WINDOWS 目录，我不知道为什么会发生这种情况。

这是因为你的 for 循环被输入了，这是因为 $cabinetArray 的长度为零。一旦进入 for 循环，$removal 变量就会被赋值为 $dir 的值加上尾部的反斜杠。然后，您在 windows 目录上调用 remove-item。

# php - 如何阅读 POST 响应并查找细节

> ID：11637004
> 
> 赞同：0
> 
> 时间：2012-07-24T18:24:56.270
> 
> 标签：php

我正在编写一个脚本来读取交易完成后支付网关给出的响应。 [http://docs.merchee.com/api/push-notifications/index.html](http://docs.merchee.com/api/push-notifications/index.html)

我得到的示例数据是

```
$received_values = "
    status_code PAID
    subtotal 10
    success_redirect http://site.com/thanks
    tax_total 0
    total_price 10
    transaction_amount 10
    transaction_date 07/24/2012
    transaction_nmb 101888
    transaction_time 12:43:52
    zip 12345 
"; 
```

我正在专门寻找线条`transaction_nmb`和`status_code`.

我在想我会做这样的事情：

```
$received_values = (array) stripslashes_deep( $_POST ); 
```

但是我坚持我应该如何去确认它.. `in_array`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:34:03.327

因为它看起来像 $received_values 是一个换行符分隔的字符串，也许你可以使用这个正则表达式（未经测试）来获取值？

```
preg_match_all('/status_code\s(\w+).+transaction_nmb\s(\d+)/',$received_values, $matches);
// PAID should be in $matches[1]
// 101888 should be in $matches[2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:37:18.773

按换行符爆炸（爆炸不是最有效的，但会有所帮助。

```
$array = explode('\n', $received_values); 
```

这将为您提供每一行一个数组。

```
$array[0] //status_code PAID 
```

然后，您可以通过再次拆分或使用 php 解析函数之一来寻找答案。

# java - 如何更改 NetBeans 平台框架应用程序的 LookAndFeel

> ID：11637006
> 
> 赞同：2
> 
> 时间：2012-07-24T18:25:02.023
> 
> 标签：java, swing, netbeans-7, look-and-feel, netbeans-platform

我不知道如何更改我在 NetBeans 平台框架上构建的应用程序的 LookAndFeel，有人可以帮忙吗？我想使用 TinyLAF java api [http://www.muntjak.de/hans/java/tinylaf/index.html](http://www.muntjak.de/hans/java/tinylaf/index.html)改变它的外观。我知道在 NetBeans IDE 中开发常规 Swing 应用程序时如何更改 LookAndFeel，但在 NetBeans 平台框架上开发时不知道。

这是我用于常规 Swing 应用程序的 TinyLAF 代码：

```
Toolkit.getDefaultToolkit().setDynamicLayout(true);
System.setProperty("sun.awt.noerasebackground", "true");
JFrame.setDefaultLookAndFeelDecorated(true);
JDialog.setDefaultLookAndFeelDecorated(true);

try {
    UIManager.setLookAndFeel("de.muntjak.tinylookandfeel.TinyLookAndFeel");
} catch(Exception ex) {
    ex.printStackTrace();
} 
```

TinyLaF 查找名为“Default.theme”（区分大小写）的默认主题文件。如果它找到一个，这个文件将在启动时加载。（'Default.theme' 文件是一个普通的 TinyLaF .theme 文件，只是有一个特殊的名称，你可以把任何 .theme 文件重命名为 'Default.theme'）。

TinyLaF 将搜索以下 URL：

1.  TinyLookAndFeel.class.getResource("/Default.theme");
    *   如果它在 tinylaf.jar 中，则找到“Default.theme”
2.  Thread.currentThread().getContextClassLoader().getResource("Default.theme");
    *   如果它在您的应用程序的 JAR 中，则找到“Default.theme”
3.  new File(System.getProperty("user.home"), "Default.theme").toURI().toURL();
    *   如果它位于主目录中，则查找“Default.theme”
4.  new File(System.getProperty("user.dir"), "Default.theme").toURI().toURL();
    *   如果它在工作目录中，则找到“Default.theme”

**请注意，我的问题不是如何更改 NetBeans IDE 的 LookAndFeel，而是如何为构建在 NetBeans 平台框架之上的 Java 应用程序进行更改。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:45:26.943

我在网上找到了以下内容：您需要在“安装程序”模块中进行。检查此链接以了解您需要添加的位置：http: [//joshiegeek.blogspot.co.il/2012/01/netbeans-platform-custom-laf.html](http://joshiegeek.blogspot.co.il/2012/01/netbeans-platform-custom-laf.html)

这个有实际的代码示例（请忽略标题:)）：[http ://forums.netbeans.org/topic39450.html](http://forums.netbeans.org/topic39450.html)

最后，这个人谈到了一个特定的 plaf，但一路上几乎没有评论：[https ://blogs.oracle.com/geertjan/entry/blue_look_and_feel_for](https://blogs.oracle.com/geertjan/entry/blue_look_and_feel_for)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:31:18.747

**1.**你可以很容易地改变 Swing 的外观和感觉，因为它基于**MVC 架构**。

**2.** Swing 也称为`PLAF` **(Pluggable Look And Feel)**，所以**保持相同的 Model 部分并更改 View**，例如桌面和 Web 应用程序的相同模型。

**3.**使用

```
UIManager.setLookAndFeel(Your_Choice_of_Look_and_Feel);  // To set the Look and Feel
SwingUtilities.updateComponentTreeUI(frame);        // To refresh the JFrame and Components 
```

**有关更多详细信息，请参见：**

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-24T10:44:16.230

必须找到早先关于waybackmachine的帖子中提到的第一个链接......

答案是添加运行时参数或将其放入 project.properties 文件中。添加的行（例如金属）是

```
run.args.extra=--laf javax.swing.plaf.metal.MetalLookAndFeel 
```

# android - 小部件出现在小部件预览中，但不在 Android 4 的小部件列表中

> ID：11637009
> 
> 赞同：3
> 
> 时间：2012-07-24T18:25:07.700
> 
> 标签：android, android-4.0-ice-cream-sandwich, widget, android-4.2-jelly-bean

我创建了一个简单的小部件应用程序，可以在 2.3.3 模拟中找到。相同的小部件在 Android 4.0.3 或 4.1 模拟上加载时，会出现在 APPS 选项卡上，而不是 WIDGETS 选项卡上。但是，它确实出现在小部件预览中列出的小部件中。在小部件预览中选择时，它可以正常工作。

有关调试此问题的最佳方法的任何建议？

我读过其他线程建议应用程序需要启动一次才能出现在小部件列表中。我已经这样做了，但没有成功。

这是应用程序清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="nds.android.silentmodetoggle"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion    = "8"
        android:targetSdkVersion = "15" />

    <application
        android:icon    = "@drawable/icon"
        android:label   = "@string/app_name"
        android:theme   = "@style/AppTheme" >

        <activity
            android:name    = ".MainActivity"
            android:label   = "@string/title_activity_main" >

            <intent-filter>
                 <action   android:name = "android.intent.action.MAIN" />
                 <category android:name = "android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

        <receiver
            android:name        = ".AppWidget"
            android:exported    = "false"
            android:label       = "@string/app_name"
            android:icon        = "@drawable/icon" >

            <intent-filter>
                <action android:name = "android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data 
                android:name    = "android.appwidget.provider"
                android:resource    = "@xml/widget_provider" />

        </receiver>    

        <service android:name       = ".AppWidget$ToggleService" />

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:36:37.600

我认为很多人都遇到了这样的问题（小部件没有出现）。

我已经看到有人猜测这是只有没有活动的“纯小部件”才会遇到的问题，但这显然不是你的问题。

我自己，我发现解决这个问题的方法是卸载并重新安装。不幸的是，经常重复这个是相当痛苦的，显然我们不能告诉我们的用户这样做。

如果卸载和重新安装对您有用，那么我建议您的小部件在使用时正在执行某些操作，导致它在后续尝试中无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T10:14:46.787

我认为，在 xml 文件：widget_provider 中，它应该为小部件添加最小尺寸，如下所示：android:minWidth="xxdp" android:minHeight="yydp"

试试看！它对我来说很好。

# html - 基本 css li 仅对某些元素有效

> ID：11637011
> 
> 赞同：0
> 
> 时间：2012-07-24T18:25:10.107
> 
> 标签：html, css

我有两个 HTML 列表，我需要一个来选择我的“活动”类，另一个来忽略它。

这是我的 css，我显示了一个图像“icon-plus.gif”，当用户单击 li 时，图像变为“icon-minus.gif”

```
 li:before {content: url("icon-plus.gif");}
    li.active:before {content: url("icon-minus.gif");} 
```

然后我有两个列表，当我单击图像更改时，所有 li 都显示图像“icon-plus.gif”。

```
<ul>
  <li>Coffee</li>
  <li>Milk</li>
</ul> 

<ul>
  <li>Bread</li>
  <li>Apples</li>
</ul> 
```

两者都显示图像！真的不明白为什么，我的想法是在 li 里面有这个类：

```
<ul>
  <li class"active">Coffee</li>
  <li class"active">Milk</li>
</ul> 
```

代码是从网上下载的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:33:44.190

使用 JQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$("li").click(function () {
  // Remove active class from all li elements
  $("li").removeClass("active");
  // add the active class to your clicked on element
  $(this).addClass("active");
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:31:44.340

javascript onclick() 事件和 jquery 的 css 操作可能会对您有所帮助。这是一个有用的链接：

[http://api.jquery.com/category/css/](http://api.jquery.com/category/css/)

# javascript - 当 div 宽度固定时，最聪明的中间截断方法是什么？

> ID：11637014
> 
> 赞同：2
> 
> 时间：2012-07-24T18:25:13.257
> 
> 标签：javascript, html, css

我有一个宽度固定的 html div。我想在里面放一些文本内容。如果文本太长，我想截断文本。但是，与`text-overflow: ellipsis`财产不同，我想在中间截断。我想听听你有什么有趣的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:16:35.853

您可以使用“测试” div 来确定值的大小，并通过修剪中间来调整它们的大小，直到它适合所需的宽度。

这个[jsfiddle 示例](http://jsfiddle.net/q4DxT/1/)是一个粗略的实现。它一次缩小一个字符的值（可以很容易地改进），直到大小+省略号小于容器宽度

**javascript / jQuery的**

```
// Text excision for generating middle ellipsis values to fit a specific size.

String.prototype.cutMiddleChar = function() {
    var charPosition = Math.floor(this.length / 2)
    return this.substr(0, charPosition) + this.substr(charPosition + 1);
};
String.prototype.insertMiddleEllipsis = function() {
    var charPosition = Math.floor(this.length / 2)
    return this.substr(0, charPosition) + '...' + this.substr(charPosition);
};

var w = 0,
    t = '',
    $test = $('.excision-test');

$('div').each(function() {
    // re-usable $this
    var $this = $(this);
    // get current width, this is the width we need to fit the value to
    w = $this.width();
    // get current text value, we'll be manipulating this till it's sized right
    t = $this.text();
    // set our test div to the value (plus our ellipsis) for sizing
    $test.text(t + '...');

    //console.log(w);
    //console.log($test.width());

    // when the value's width is greater than the width of the container loop through to size it down
    if ($test.width() > w) {
        while ($test.width() > w) {
            t = t.cutMiddleChar()
            //console.log('str cut: ' + t);
            $test.text(t + '...');
            //console.log('str len: ' + t.length);
            //console.log('width:   ' + $test.width());
        }
        $this.text(t.insertMiddleEllipsis());
    }
});​ 
```

**CSS**

```
/* manipulate font-family, font-size as needed */
body {font-family:arial;font-size:12px;}

/* div and test div must use same formatting (font-size, font-family, etc) */
div {width:300px;border:1px solid red}
.excision-test {position:absolute;left:-10000em;width:auto;} 
```

**HTML**

```
<div>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur vel orci quis nunc vulputate tristique quis id tortor. Donec dui ante, condimentum quis iaculis ut, venenatis vel lorem. Etiam ullamcorper aliquam imperdiet. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis tincidunt ligula lorem. Pellentesque pharetra ipsum nec erat tempor vel sagittis libero volutpat. Donec malesuada convallis pharetra.
</div>
<div class="excision-test"></div>​ 
```

一般概念是实用的，但性能不是很好，特别是如果您在页面上有很多这些值。

*前*

![在此处输入图像描述](../Images/61e3d54afec1369d24c919d27e296e66.png)

*后*

![在此处输入图像描述](../Images/6feaa45ec484dcb51647c2e1a9871006.png)

改善这一点的一些额外考虑因素是

*   按单词而不是字符修剪，以便单词不会被分开
*   添加一些基本猜测以更快地修剪值（例如：文本宽度为 1000，容器只有 100，可以相当容易地切掉约 80% 的值并从那里一次修剪一个）
*   在 div 上设置 title 属性，以便悬停工具提示仍显示完整值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:47:34.703

之前在 SO 上已经问过这个问题。也许[我在这里的回答](https://stackoverflow.com/questions/1199352/smart-way-to-shorten-long-strings-with-javascript/1199420#1199420)提供了更多线索？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:36:12.497

您可以使用 .substring 来执行此操作。假设您的宽度可以容纳 10 个字符加上省略号，您可以执行以下操作：

```
var myText = "This is a sentence that needs to be reduced";

myText = myText.substring(0,5) + "..." + myText.substring(myText.length-5); 
```

# eclipse - groovy 删除的文件在 Windows 7 中留下了什么？

> ID：11637018
> 
> 赞同：1
> 
> 时间：2012-07-24T18:25:37.063
> 
> 标签：eclipse, windows-7, groovy

我有一个 groovy 脚本，可以将远程目录中的多个文件保存到我的临时目录中，并将它们解析为 xml。它有一个有趣的错误。每次运行时，它都无法在我的临时目录中找到一个文件。下次运行时，它会找到该文件，但找不到新文件。如果我有 20 个文件，它会在第 20 次运行之前找到所有 20 个文件。每次运行后都会清除临时目录。我想知道程序是否还留下了其他工件？

如果我在 16 次运行后清理项目，它仍然会找到前 16 个文件。所以它似乎不是eclipse中的神器。

它在 Eclipse 3、Java 1.5、Windows 7、Groovy 1.0 中运行。

```
 remoteftpFile.findAll {
        println "in find" 
        ftp.getReply();
        it.isFile()
             }.each {
                println "in each"
                ftp.getReply();
                println it
                ftp.getReply();

            def tempDestination=PropertiesUtil.getTempDir()
            def procDestination=PropertiesUtil.getProcessedDir()
            def tempFile = new File(tempDestination+ it.name )
            def procFile = new File(procDestination+ it.name )
            //set it to delete
            ftp.getReply();
            println "got tempfile"
            def localftpFile = ftp.SaveToDisk(it,tempFile)  //Save each file to disk

            //************** Handles decryption via gpgexe
            println "Decrypting file";
            println localftpFile.toString();
            def localftpFileStr=localftpFile.toString();
            def processedftpFileStr=procFile.toString();
            def gpgstring=PropertiesUtil.getGpgString();
            def decryptedOutputName = localftpFileStr.substring(0, (localftpFileStr.length()-4));
            def decryptedProcOutputName= processedftpFileStr.substring(0, (processedftpFileStr.length()-4));
            def decryptedOutputXMLName = decryptedOutputName.substring(0, (decryptedOutputName.length()-4))+".xml";
            def decryptedProcOutputXMLName = decryptedProcOutputName.substring(0, (decryptedProcOutputName.length()-4))+".xml";
            println decryptedOutputName;

            def xmlfile = new File(decryptedOutputName)
            def cdmpXmlFile = new File(decryptedOutputXMLName)
            def procCdmpXmlFile = decryptedProcOutputXMLName

            println gpgstring + " --output ${decryptedOutputName} --decrypt ${localftpFile} "
            (new ExternalExecute()).run(gpgstring +" --output ${decryptedOutputName} --decrypt ${localftpFile} ");      
            Thread.sleep(1000);

            //************* Now Parse CSV file(s) into xml using stack overflow solution
            println "parsing file"

            def reader = new FileReader(xmlfile)
            def writer = new FileWriter(cdmpXmlFile)

            def csvdata = []
            xmlfile.eachLine { line ->
                if (line){
                csvdata << line.split(',')
                }
            }

            def headers = csvdata[0]
            def dataRows = csvdata[1..-1]

            def xml = new groovy.xml.MarkupBuilder(writer)

            // write 'root' element
            xml.root {
                dataRows.eachWithIndex { dataRow, index ->
                    // write 'entry' element with 'id' attribute
                       entry(id:index+1) {
                        headers.eachWithIndex { heading, i ->
                            // write each heading with associated content
                            "${heading}"(dataRow[i])
                                              }
                                         }
                                      }
                      }

            println  "Performing XSL Translation on ${cdmpXmlFile}"
            def cdmpXML = new XMLTransformer(xmlTranslate).run(cdmpXmlFile) //Run it on each of the xml files and set the output
            new File("C:\\temp\\temp.xml").write(cdmpXML)
            new File(procCdmpXmlFile).write(cdmpXML)
            println  "Done Performing XSL Translation"

            println "Uploading Data to CDMP"
            def cdmpUp = new UpdateCDMP(updateDB)
            cdmpUp.run(cdmpXML)

            println "Finished Upload and Import"

            //do clean-up backing it up AND removing the files

            println "Finished"
            println "Closing Buffers"
            reader.close();
            writer.close();
            println "Deleting Local Files"
            new File(decryptedOutputName).deleteOnExit();
            new File(localftpFile).deleteOnExit();
            xmlfile.deleteOnExit();
            cdmpXmlFile.deleteOnExit();

            println "Deleting " + cdmpXmlFile.getName()
            new File("C:\\temp\\temp.xml").deleteOnExit();
             }
    ftp.close() 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T07:50:38.973

这是因为你正在使用`deleteOnExit`，它[不能保证删除一个文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#deleteOnExit%28%29)。只有在以下情况下才会删除：

*   文件已正确关闭，
*   JVM 正确退出（没有例外），**并且**
*   a`System.exit()`使用`0`参数调用（或 VM 自然终止）。

在 Windows 操作系统上尤其成问题。我无法指出有关此问题的特定 Stack Overflow 问题，但大多数[涉及`deleteOnExit`](https://stackoverflow.com/search?q=java+deleteOnExit)此问题的问题都在讨论。

如果你真的想删除一个文件，那么你应该总是[直接](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29)[使用`aFile.delete()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29). 确实没有充分的理由将删除延迟到您的示例后面。

# mysql - MySQL Workbench 对象浏览器中的“Fetching...”消息

> ID：11637023
> 
> 赞同：2
> 
> 时间：2012-07-24T18:25:56.470
> 
> 标签：mysql, mysql-workbench

当我单击 MySQL Workbench 的“对象浏览器”部分中的数据库以查看其架构时，我得到显示消息“正在获取...”的行。对象浏览器挂在上面，并且永远不会显示数据库的模式。我在不同的服务器上遇到相同的错误。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:32:01.210

我刚刚在 OSX / XAMPP 上遇到了同样的问题，并发现我的 MySQL 配置文件的权限是最终的罪魁祸首。请参阅[此处](https://stackoverflow.com/questions/13127538/mysql-workbench-fetching-cannot-browse-db)的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:42:09.170

看起来 Workbench 是一个易于挂起的应用程序。尝试从控制台测试您的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:09:35.813

感谢 bmoeskau 的回答。在我安装新版本的 Workbench 后发布此问题几周后，“获取”消息实际上消失了。我不确定 XAMPP 堆栈中包含什么版本的 Workbench，但这个包中包含的 Workbench 通常不是最新版本。

# javascript - 窗口调整大小时的分离和附加到

> ID：11637024
> 
> 赞同：0
> 
> 时间：2012-07-24T18:25:59.283
> 
> 标签：javascript, jquery, document-ready, window-resize

所以我试图根据窗口大小分离并附加到一个 div 。以下是我目前拥有的。

我正在创建一个带有变量 SOCIALBAR 的函数，将其分配为 #SOCIALMEDIA 并将其分离。然后根据 (document).ready 和 (window).resize 的窗口大小，我调用 SOCIALBARPlACEMENT 函数，#SOCIALMEDIA 是附加到 #TOP 或 #LEFT div。

这在 (document).ready 上工作得很好，但对 (window).resize 不起作用。

事实上，如果我删除 document.ready 并保留 window.resize，该函数仍然在页面加载时运行，但在页面调整大小时不起作用。

任何想法将不胜感激。感谢！

```
function socialbarplacement() {
    var socialbar;
    socialbar = $("#socialmedia").detach();
    if (jQuery(window).width() < 1384) {
        socialbar.appendTo("#top");
    } else {
        socialbar.appendTo("#left");
    }
};
$(document).ready(socialbarplacement());
$(window).resize(socialbarplacement()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:28:53.583

您正在立即调用这些函数，而不是将它们作为事件处理程序传递，请尝试：

```
$(document).ready(socialbarplacement);
$(window).resize(socialbarplacement);
/*
someFunction() <-- invokes the function and resolves to the returned value
someFunction <-- resolves to the function reference
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:36:44.463

我可能会沿着这些路线做一些事情（未经测试的代码）：

```
$(window).resize( function(){
    var wnd = $(window), soc = $('#socialmedia');
    return function(){
        // might add a check to make sure you are not appending to the current parent.
        soc.appendTo( $(window).width() > 1384 ? '#left' : '#top');
    }
}); 
```

页面加载时会触发调整大小，因此您不需要同时准备好和调整大小。还看着它，当您确实应该按名称传递它时，您正在执行该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-09T12:03:57.477

我试过这样......享受吧！

```
$(function () {

   if (matchMedia) {
	  var mq = window.matchMedia('(max-width: 1384px)');
	  var socialmedia = $("#socialmedia");
	  mq.addListener(WidthChange);
	  WidthChange(mq);
	}

	function WidthChange(mq) {
	  if (mq.matches && socialmedia) {
		socialmedia.appendTo("#top");
		socialmedia = null;	
	  } else {
		socialmedia = $("#socialmedia").detach();	
        socialmedia.appendTo("#left");
	  }
	};

});
```

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

</head>

<body>

  <div id="top">
    <div id="socialmedia">SOCIALMEDIA</div> <br>
    **TOP**
  </div>

  <div id="left">
    <br>
    **LEFT** 
  </div>

</body>

</html>
```

# xcode - 使用多组件选择器进行 Xcode 计算

> ID：11637030
> 
> 赞同：0
> 
> 时间：2012-07-24T18:26:25.833
> 
> 标签：xcode, picker

我想设置一个带有 2 组件选择器的视图控制器，其中每一侧都包含相同的 7 个对象。每个对象对两个组件都具有相同的值。用户将从每一侧进行选择，在提供的文本字段中输入一个值（并可选择点击“计算”按钮）。将使用该值和来自选定的两个选取器组件对象的值进行计算，结果将显示在标签中。

例如，每个选择器都包含字母 a - g。对于选择器的每一侧，每个字母的值分别为 1 - 7。用户选择“b”和“d”并输入10。显示10 * 2 / 4 = 5的计算结果。

听起来很简单。我找到了使用与 1 组件选择器关联的值进行计算以及使用 2 组件选择器进行计算的教程，但没有找到使用 2 组件选择器进行计算的教程。我对 Xcode 的体验有点短。所以，请随意详细介绍。

# maven - 如何修改 Cucumber-jvm

> ID：11637037
> 
> 赞同：1
> 
> 时间：2012-07-24T18:26:48.967
> 
> 标签：maven, cucumber, cucumber-jvm

我正在通过 JUnit 和 maven 运行 cucumber-jvm。我可以进入源代码并对核心代码进行更改，但这些更改不会影响运行 cucumber-jvm 的其他项目。

如何更改核心并影响我机器上的其他项目？maven 只在 github 上运行 jars 吗？我是否必须创建一个新的 cucumber-jvm 项目并将该项目添加为依赖项而不是：

```
 <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-java</artifactId>
        <version>1.0.3</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>info.cukes</groupId>
        <artifactId>cucumber-junit</artifactId>
        <version>1.0.2</version>
        <scope>test</scope>
    </dependency> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:03:46.227

您已经拉下 Cucumber-JVM 代码并在本地对其进行了修改，是吗？然后您需要做的就是运行一个 Maven 构建（而不是在 Eclipse 中！）。这会将您的 Maven 存储库中下载的依赖项替换为您已更改的较新的依赖项（但只有您已更改的依赖项）。然后您的测试应该会接受您的更改。

如果您想将更改提交回 Cucumber-JVM 作为增强功能或错误修复，并且您应该，如果您觉得它们有用，您将需要通过 github 拉取请求流程 - 请参阅 Cucumber-JVM网站了解详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:18:39.010

正如[@TrueDub](https://stackoverflow.com/users/236936/truedub)所说，您需要在本地克隆[项目](https://github.com/cucumber/cucumber-jvm)，并使用`mvn install`. 这将构建项目并将其安装在您的本地存储库中。您在本地构建的任何引用您在 pom 中构建的 cucumber-jvm 版本的项目都将使用您修改后的版本。

如果您需要将您的 cucumber-jvm 版本分发到其他环境，最好的办法是使用[Nexus 存储库](http://www.sonatype.org/nexus/)来部署您的工件并使其可供组织内的其他人使用。确保为该工件指定一个名称（或分类器或版本），以将您的版本与官方版本区分开来，以避免潜在的混淆——在这种情况下，必须修改使用您的 cucumber-jvm 版本的 pom 以使用该特定版本。

# python - python中复杂的类似matlab的数据结构（numpy/scipy）

> ID：11637045
> 
> 赞同：15
> 
> 时间：2012-07-24T18:27:33.537
> 
> 标签：python, matlab, numpy

我目前在 Matlab 中的数据结构如下

```
item{i}.attribute1(2,j) 
```

其中 item 是 i = 1 .. n 中的一个单元格，每个单元格都包含多个属性的数据结构，每个属性都是一个大小为 2,j 的矩阵，其中 j = 1 .. m。属性的数量不是固定的。

我必须将此数据结构转换为 python，但我是 numpy 和 python 列表的新手。使用 numpy/scipy 在 python 中构造这些数据的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T18:35:01.020

我经常看到以下转换方法：

matlab 数组 -> python numpy 数组

matlab 单元格数组 -> python 列表

matlab结构-> python dict

因此，在您的情况下，这将对应于包含 dicts 的 python 列表，其本身包含 numpy 数组作为条目

`item[i]['attribute1'][2,j]`

**笔记**

不要忘记python中的0索引！

[更新]

**附加：类的使用**

除了上面给出的简单转换，您还可以定义一个虚拟类，例如

```
class structtype():
    pass 
```

这允许以下类型的使用：

```
>> s1 = structtype()
>> print s1.a
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-40-7734865fddd4> in <module>()
----> 1 print s1.a
AttributeError: structtype instance has no attribute 'a'
>> s1.a=10
>> print s1.a
10 
```

在这种情况下，您的示例变为，例如

```
>> item = [ structtype() for i in range(10)]
>> item[9].a = numpy.array([1,2,3])
>> item[9].a[1]
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-27T20:01:01.420

@dbouz 的一个简单版本的答案，使用了@jmetz 的想法

```
class structtype():
    def __init__(self,**kwargs):
        self.Set(**kwargs)
    def Set(self,**kwargs):
        self.__dict__.update(kwargs)
    def SetAttr(self,lab,val):
        self.__dict__[lab] = val 
```

那么你可以做

```
myst = structtype(a=1,b=2,c=3) 
```

或者

```
myst = structtype()
myst.Set(a=1,b=2,c=3) 
```

并且仍然做

```
myst.d = 4 # here, myst.a=1, myst.b=2, myst.c=3, myst.d=4 
```

甚至

```
myst = structtype(a=1,b=2,c=3)
lab = 'a'
myst.SetAttr(lab,10) # a=10,b=2,c=3 ... equivalent to myst.(lab)=10 in MATLAB 
```

并且您会得到您在 matlab 中所期望的`myst=struct('a',1,'b',2,'c',3)`.

一个结构单元的等价物将`list`是`structtype`

```
mystarr = [ structtype(a=1,b=2) for n in range(10) ] 
```

这会给你

```
mystarr[0].a # == 1
mystarr[0].b # == 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T09:27:41.793

如果您正在寻找一个如何在 Python 中创建结构化数组的好示例，就像在 MATLAB 中一样，您可能需要查看 scipy 主页 ( [basics.rec](http://docs.scipy.org/doc/numpy/user/basics.rec.html) )。

## 例子

```
x = np.zeros(1, dtype = [('Table', float64, (2, 2)),
                         ('Number', float),
                         ('String', '|S10')])

# Populate the array
x['Table']  = [1, 2]
x['Number'] = 23.5
x['String'] = 'Stringli'

# See what is written to the array
print(x) 
```

然后打印输出为：

```
[([[1.0, 2.0], [1.0, 2.0]], 23.5, 'Stringli')] 
```

不幸的是，我不知道如何在不知道结构化数组大小的情况下定义结构化数组。您还可以直接使用其内容定义数组。

```
x = np.array(([[1, 2], [1, 2]], 23.5, 'Stringli'),
                dtype = [('Table', float64, (2, 2)),
                         ('Number', float),
                         ('String', '|S10')])

# Same result as above but less code (if you know the contents in advance)
print(x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T12:28:28.150

对于某些应用程序，一个`dict`或一个字典列表就足够了。然而，如果你真的想`struct`在 Python 中模拟一个 MATLAB，你必须利用它的 OOP 并形成你自己的类似结构的类。

这是一个简单的示例，例如，它允许您将任意数量的变量存储为属性，也可以初始化为空（仅限 Python 3.x）。`i`是显示对象内存储了多少属性的索引器：

```
class Struct:
    def __init__(self, *args, prefix='arg'): # constructor
        self.prefix = prefix
        if len(args) == 0:
            self.i = 0
        else:
            i=0
            for arg in args:
                i+=1
                arg_str = prefix + str(i)
                # store arguments as attributes
                setattr(self, arg_str, arg) #self.arg1 = <value>
            self.i = i
    def add(self, arg):
        self.i += 1
        arg_str = self.prefix + str(self.i)
        setattr(self, arg_str, arg) 
```

您可以将其初始化为空 (i=0)，或使用初始属性填充它。然后您可以随意添加属性。尝试以下操作：

```
b = Struct(5, -99.99, [1,5,15,20], 'sample', {'key1':5, 'key2':-100})
b.add(150.0001)
print(b.__dict__)
print(type(b.arg3))
print(b.arg3[0:2])
print(b.arg5['key1'])

c = Struct(prefix='foo')
print(c.i) # empty Struct
c.add(500) # add a value as foo1
print(c.__dict__) 
```

将为您提供对象 b 的这些结果：

```
{'prefix': 'arg', 'arg1': 5, 'arg2': -99.99, 'arg3': [1, 5, 15, 20], 'arg4': 'sample', 'arg5': {'key1': 5, 'key2': -100}, 'i': 6, 'arg6': 150.0001}
<class 'list'>
[1, 5]
5 
```

对于对象 c：

```
0
{'prefix': 'foo', 'i': 1, 'foo1': 500} 
```

请注意，将属性分配给对象是通用的 - 不仅限于`scipy`/`numpy`对象，而且适用于所有数据类型和自定义对象（数组、数据框等）。当然，这是一个玩具模型 - 您可以根据您的项目需要进一步开发它以使其能够被索引、能够被漂亮地打印、能够删除元素、可调用等。只需在开始时定义类，然后将其用于存储检索。这就是 Python 的美妙之处——它并没有你真正想要的东西，特别是如果你来自 MATLAB，但它可以做得更多！

# css - 将 DIV 格式化到 FLOAT LEFT 右侧的填充和列表问题

> ID：11637049
> 
> 赞同：4
> 
> 时间：2012-07-24T18:27:44.363
> 
> 标签：css, css-float, padding

我有一个难题。我有一个应用程序，其中 CSS 似乎做了它应该做的事情，但没有像你期望的那样显示结果，我找不到获得“预期”结果的解决方案。问题是当内容左侧有一个浮动元素并且内容样式使用填充或边距时，内容如何流动。

在我的应用程序中，用户可以在 DIV 中输入文本。可能有也可能没有浮动左元素，因此带有文本的 div 可以位于正文区域的左侧或向右移动（即在浮动元素之后）。

当没有浮动元素时，文本可以与左、缩进、首行缩进或悬挂的段落（即带有 div 和适当的类）一起使用。

![示例段落](../Images/387541720fa23f9607947d8d4f727665.png)

段落的 CSS 是：

```
.firstindent { text-indent:30px; }
.indent { padding-left:30px; }
.hanging { padding-left:30px; text-indent:-30px; } 
```

但是，当添加一个左浮动元素时，只有标准缩进和第一个缩进正确显示。这是因为填充、边框和边距在盒子模型“内容”之外，并且只有“内容”区域中的项目会针对浮动进行调整。

> 浮动。在浮动模型中，首先按照正常流程布局一个盒子，然后>从流程中取出并尽可能向左或向右移动。内容可能会沿着浮动的一侧流动。

如果您使用带有 Firebug 的 Firefox，您可以突出显示 div，您会发现填充显示在左边缘，即浮动元素的“下方”，而不是调整到浮动元素的右侧。

结果，带有浮动左元素的段落如下所示：

![问题段落和列表](../Images/89a679cd4eada5be94c2229ed19f9269.png)

（请注意，浮动元素也会影响列表的呈现。）

到目前为止，我还没有想出一个 CSS 解决方案来让我设置主要文本内容，然后让它们正确显示左侧是否有浮动左侧元素。

我已经发布了一个完整的 HTML 示例，所以请随时获取源代码，看看是否能找到解决方案！[示例页面](http://www.villaakumal.com/FloatLeftAndPadding.html)

谢谢 - 我应该包括“你所期望的”。这里是浮动左侧和浮动左侧垫片。

![我想看到什么](../Images/66fdc88c287af04b5cc02b611ee08e81.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:50:47.897

要更正，请设置`overflow: hidden`所有段落元素（和列表等） 。[**请参阅 fiddle**](http://jsfiddle.net/wppBU/1/)。

# android - Android 中的向后兼容性

> ID：11637050
> 
> 赞同：0
> 
> 时间：2012-07-24T18:27:47.467
> 
> 标签：android

我需要在 Android SDK v9 中调用一个方法，同时保持与旧版本的兼容性。

[Android 开发者博客](http://android-developers.blogspot.com/2009/04/backward-compatibility-for-android.html)推荐使用反射或包装类，但这真的有必要吗？为什么我不能这样做？

```
if (Build.VERSION.SDK_INT >= 9)
    callNewMethod(); 
```

在我看来，由于 Java 运行时链接，这将起作用，因为我正在使用 SDK 9 构建。这种方法有什么问题吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:41:21.853

不一定是更好的答案，但您在那里进行的检查假定 OS/ROM 的构建者正确设置了该值。如果设置不正确，那么您可能会尝试访问 SDK 9 中确实不存在的方法。使用反射是 100% 确保不会通过尝试调用不存在的方法而产生运行时错误的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:42:20.700

一点都不。实际上，在开发具有广泛 API 级别目标的应用程序时，它被提升为最佳方法。

反射类是最扎实的方法，如果你不知道类的内容是什么，方法存在的话。但是在 Android 中，您知道什么是支持的，什么是不支持的。

结果，我不喜欢您提供的博客：p

# oracle - 两个 oracle 查询（一个带有 AND，另一个带有 OR）将返回相同的结果？

> ID：11637052
> 
> 赞同：-1
> 
> 时间：2012-07-24T18:27:53.090
> 
> 标签：oracle

是否存在两个查询会产生不同结果的任何条件？

```
select * from a,b,c where a.id = b.id(+) and a.id=c.id(+);

select * from a,b,c where a.id = b.id(+) or a.id=c.id(+); 
```

我认为在这两种情况下，如果 id 在表 a 中，它将返回该行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:39:23.983

第二次选择失败，出现 ORA-01719，OR 或 IN 的操作数中不允许外连接运算符 (+)。

使用 ANSI JOIN 语法的另一个原因。如果你这样做，你甚至无法想到这个问题。

# javascript - 如何判断 location.reload() 何时完成刷新页面？

> ID：11637055
> 
> 赞同：1
> 
> 时间：2012-07-24T18:28:06.830
> 
> 标签：javascript, reload

我`location.reload()`在一个脚本中使用，我想在`reload()`函数完成后运行另一个脚本。

有没有相关的事件`reload()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:38:59.310

页面重新加载时，前一页上的所有脚本早已不复存在。因此，无法从运行的脚本中`.reload()`得知页面已完全加载。

除非：

*   您使用 iframe，您可以只重新加载 iframe 并从框架外部侦听加载事件。这样，监听它的脚本就被保留了。

*   或者，让页面包含`onload`建议的内容。但是，当您刚刚重新加载页面时，之前的代码、值和所有内容早已不复存在。

您也可能以错误的角度解决问题。与其让脚本及其所有值在页面更改中保持不变，为什么不让数据在页面更改中保持不变并在每个页面上读取它们呢？在这种情况下，localStorage 或 cookie 是您的朋友。

# wpf - WPF 数据绑定自定义控件

> ID：11637056
> 
> 赞同：0
> 
> 时间：2012-07-24T18:28:09.423
> 
> 标签：wpf, data-binding, custom-controls

因此，我花了大约两个小时将头撞在桌子上，尝试了所有我能想到的绑定到自定义控件上的属性的方法，但都不起作用。如果我有这样的事情：

```
<Grid Name="Form1">
    <mine:SomeControl MyProp="{Binding ElementName=Form1, Path=DataContext.Enable}"/>
    <Button Click="toggleEnabled_Click"/>
</Grid> 
```

```
public class TestPage : Page
{
    private TestForm _form;

    public TestPage()
    {
        InitializeComponent();
        _form = new TestForm();
        Form1.DataContext = _form;
    }

    public void toggleEnabled_Click(object sender, RoutedEventArgs e)
    {
        _form.Enable = !_form.Enable;
    }
} 
```

TestForm 看起来像：

```
public class TestForm
{
    private bool _enable;

    public event PropertyChangedEventHandler PropertyChanged;

    public bool Enable
    {
       get { return _enable; }
       set { _enable = value; OnPropertyChanged("Enable"); }
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

我的控制看起来像：

```
<UserControl>
    <TextBox Name="TestBox"/>
</UserControl> 
```

```
public class SomeControl : UserControl
{
    public static readonly DependencyProperty MyPropProperty =
        DependencyProperty.Register("MyProp", typeof(bool), typeof(SomeControl));

    public bool MyProp
    {
        get { return (bool)GetValue(MyPropProperty); }
        set { SetValue(MyPropProperty, value); }
    }

    public SomeControl()
    {
        InitializeComponent();
        DependencyPropertyDescriptor.FromProperty(MyPropProperty)
            .AddValueChanged(this, Enable);
    }

    public void Enable(object sender, EventArgs e)
    {
        TestBox.IsEnabled = (bool)GetValue(MyPropProperty);
    }
} 
```

当我单击切换按钮时，绝对没有任何反应。如果我在回调中放置一个断点，`Enable`它永远不会被命中，有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:36:21.303

如果该`Enabled`方法只设置属性，则可以删除它并`TextBox.IsEnabled`直接绑定：

```
<UserControl Name="control">
    <TextBox IsEnabled="{Binding MyProp, ElementName=control}"/>
</UserControl> 
```

如果你想保留这样的方法，你应该[`UIPropertyMetadata`](http://msdn.microsoft.com/en-us/library/system.windows.uipropertymetadata.aspx)为依赖属性注册一个属性更改回调。

* * *

这个绑定也是多余的：

```
{Binding ElementName=Form1, Path=DataContext.Enable} 
```

是继承的`DataContext`（如果你不设置它`UserControl`（你永远不应该这样做！）），所以你可以使用：

```
{Binding Enable} 
```

此外，如果任何绑定有问题：[有一些方法可以调试它们](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)。

# java - 媒体播放器绑定服务在暂停线程时锁定 UI

> ID：11637057
> 
> 赞同：0
> 
> 时间：2012-07-24T18:28:17.097
> 
> 标签：java, android, service, media-player

我知道暂停线程很容易锁定 UI，这通常是个坏主意。但是，我的理解是，如果某些东西作为服务运行不会导致任何问题，因为该服务将暂停并且主应用程序将继续运行。

考虑到这一点，我要么做错了什么，要么只是误解了对 MediaPlayer 服务的使用。

我创建对象

```
public AudioService AudioService;
public boolean AudioServiceBound = false; 
```

然后在我的 SurfaceView 的 onStart 事件中绑定它：

```
public void onStart() {
    Intent intent = new Intent(gameContext, AudioService.class);
    gameContext.bindService(intent, myConnection, Context.BIND_AUTO_CREATE);
} 
```

在整个课程的其余部分，我运行基于 onResume 和 onPause 事件暂停和恢复 AudioService 的方法。

我试图为我的服务引入一种新能力。在我的主更新循环中，我运行`HalfOverSwitch()`如下所示的函数：

```
public void HalfOverSwitch()
{
    if (( ((float)player.getCurrentPosition()) / ((float)player.getDuration()) > 0.5) && !transitioning)
    {
        transitioning = true;

        MediaPlayer temp = MediaPlayer.create(this, R.raw.dumped);
        temp.setVolume(0, 0);
        temp.setLooping(true);
        temp.start();

        for (int i = 0; i < 100; i++)
        {
            player.setVolume(100-i, 100-i);
            temp.setVolume(i, i);
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        player = temp;
        player.setVolume(100,100);

        transitioning = false;
    }
} 
```

因为该函数不返回任何内容并且在不同的线程中运行，所以我的理解是主要活动不会暂停。然而确实如此。这就提出了一个问题，**做这样的事情的最好方法是什么，让我的 AudioService 成为一个服务（而不仅仅是一个类）有什么意义呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:36:15.350

服务在创建服务的同一线程中运行。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

“请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该产生自己的线程来完成这项工作。”

# php - 检查 var 是否与数组匹配

> ID：11637060
> 
> 赞同：0
> 
> 时间：2012-07-24T18:28:36.640
> 
> 标签：php, arrays, validation

首先，我知道这是一个重复的问题，在这里经常被问到，但是我已经仔细阅读了这些答案，但仍然无法弄清楚我的代码有什么问题。我对 PHP 相当陌生，我 99% 确信这是一件非常容易/新手完成的事情，这就是为什么它让我感到沮丧。

这是代码：

```
 $validProgram = 0;
$validProgramCodes = array('ITFZ', 'ITFC', 'ITFP', 'ITFE', 'ITFL', 'ITFS',
                           'ITFF', 'ITFM', 'ITFT', 'IEME', 'ISMK', 'IPKT');

if ( isset( $_GET[ 'category' ] ) && isset( $_GET[ 'subcategory' ] )
    && $_GET[ 'category' ] != '' && $_GET[ 'subcategory' ] != '' )
{
    $selectedSchool = $_GET[ 'category' ];
    $selectedProgram = $_GET[ 'subcategory' ];
    $selectedSchool = prepString( $selectedSchool );
    $selectedProgram = prepString( $selectedProgram );

    foreach ( $validProgramCodes as $temp )
    {
        if ( $temp == $selectedProgram )
        {
            $validProgram ++;
        }
    }

    if ( $validProgram == 1 )
    {
        echo "success!";
    }
    else if ( $validProgram !== 1)
    {
        echo "failure!";
    } 
} 
```

}

现在......出于某种原因，无论为 $selectedProgram 提供什么，验证检查都会回显失败声明。这是非常简单的代码，所以我确信它非常明显，但我想我只需要另一双眼睛快速浏览一下。:)

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:29:46.770

`if ( $validProgram = 1 )` *将*值分配`1`给`$validProgram`。这个赋值返回`1`，所以语句总是通过。

尝试`if ( $validProgram == 1 )`测试是否相等。

无论如何，查看整个块，看起来您将其中的很多内容压缩为一次[`in_array`](http://php.net/in_array)检查，完全删除了`foreach`循环和`$validProgram`变量：

```
$selectedProgram = prepString( $selectedProgram );

if(in_array($selectedProgram, $validProgramCodes))
{
    echo "success!";
}
else
{
    echo "failure!";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:30:40.740

你有：

```
if ( $validProgram = 1 ) 
```

它应该是：

```
if ( $validProgram == 1 ) 
```

否则，您总是将 1 分配给`$validProgram`，这将返回`TRUE`'.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:04:14.980

还有一种使用`RegExp`.

```
$codeIsValid = preg_match('/^('.implode('|', $validProgramCodes).')$/i', $programCodeToCheck);

if ($codeIsValid)
  echo 'Valid';
else
  echo 'Not Valid'; 
```

*注意：可以进行不区分大小写的匹配！*

或如先前建议的使用`in_array()`，但将代码（*您将与有效代码匹配*）引导到一个案例。

```
$programCodeToCheck = strtoupper($programCodeToCheck); // leading string to the case that validCodes are
$codeIsValid = in_array($selectedProgram, $validProgramCodes); // testing array for possible match 
```

# c++ - 异步 lib pcap：丢包？

> ID：11637063
> 
> 赞同：8
> 
> 时间：2012-07-24T18:28:52.293
> 
> 标签：c++, asynchronous, libpcap, raw-sockets

我有一个程序将一组 TCP SYN 数据包发送到主机（使用原始套接字）并使用`libpcap`（使用过滤器）来获取响应。我正在尝试在异步 I/O 框架中实现这一点，但似乎缺少一些响应（即当它在 TCP SYN 和响应之间`libpcap`花费的时间少于一系列的第一个数据包时）。`100 microseconds`pcap 句柄设置如下：

```
pcap_t* pcap = pcap_open_live(NULL, -1, false, -1, errorBuffer);
pcap_setnonblock(pcap, true, errorBuffer); 
```

然后我添加一个过滤器（包含在 filterExpression 字符串中）：

```
struct bpf_program filter;
pcap_compile(pcap, &filter, filterExpression.c_str(), false, 0);
pcap_setfilter(pcap, &filter);
pcap_freecode(&filter); 
```

在一个循环中，在发送每个数据包后，我使用 select 来知道我是否可以从 libpcap 中读取：

```
int pcapFd = pcap_get_selectable_fd(pcap);
fd_set fdRead;
FD_ZERO(&fdRead);
FD_SET(pcapFd, &fdRead);
select(pcapFd + 1, &fdRead, NULL, NULL, &selectTimeout); 
```

并阅读它：

```
if (FD_ISSET(pcapFd, &fdRead)) {
     struct pcap_pkthdr* pktHeader;
     const u_char* pktData;
     if (pcap_next_ex(pcap, &pktHeader, &pktData) > 0) {
         // Process received response.
     }
     else {
         // Nothing to receive (or error).
     }
} 
```

正如我之前所说，一些数据包被遗漏（落入“没有收到”的其他情况）。我知道这些数据包在那里，因为我可以以同步方式（使用`tcpdump`或正在运行的线程`pcap_loop`）捕获它们。我在这里遗漏了一些细节吗？或者这是一个问题`libpcap`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:49:38.060

如果 FD`pcap_t`被`select()`（或`poll()`您正在使用的任何调用/机制）报告为可读，则不能保证这意味着只能读取一个数据包而不会阻塞。

如果使用`pcap_next_ex()`，则只会读取一个数据包；如果有多个数据包可供读取，那么，如果你执行另一个`select()`，它应该立即返回，报告 FD 再次可读，在这种情况下你可能会`pcap_next_ex()`再次调用，依此类推。这意味着每个数据包至少有一个系统调用（`select()`），可能还有更多调用，具体取决于您正在执行的操作系统版本以及您拥有的 libpcap 版本。

相反，如果您要`pcap_dispatch()`使用 -1 的数据包计数参数调用 ，则该调用将返回可以通过单个读取操作获得的所有数据包并处理所有这些数据包，因此，在大多数平台上，您可能会得到如果有多个数据包可用，则具有一个或两个系统调用的多个数据包（如果您正在使用 SYN 洪水测试您的程序，可能会遇到高网络流量，很可能就是这种情况）。

此外，在支持内存映射数据包捕获的 Linux 系统上（我认为所有 2.6 及更高版本的内核都支持，如果不是所有 2.4 内核也支持），并且使用较新版本的 libpcap，`pcap_next_ex()`必须复制数据包以避免让内核从处理数据包的代码下更改数据包，并避免无限期地“锁定”环形缓冲区中的插槽，因此涉及额外的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T23:20:57.520

这似乎是 libpcap 在 Linux 下使用内存映射的问题。有关详细信息，请参阅[我的另一个问题](https://stackoverflow.com/questions/11660758/pcap-next-occasionally-losing-packets-on-linux)。

# objective-c - 如何通过 Objective-C 获取 iTunes 曲目的当前时间？

> ID：11637067
> 
> 赞同：0
> 
> 时间：2012-07-24T18:28:58.923
> 
> 标签：objective-c, cocoa, itunes

我目前正在从一些脚本接口事物（ScriptingBridge？）中为iTunes使用一些生成的标头。我可以得到当前正在播放的歌曲的名称

```
[[iTunes currentTrack] name]; 
```

但我似乎无法获得歌曲播放的当前时间。我目前没有使用 Applescript。

编辑：绝对是通过 ScriptingBridge 生成的。我生成了标题

```
sdef /Applications/iTunes.app | sdp -fh --basename iTunes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:33:32.760

找到它：[iTunes playerPosition]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:01:44.410

这是 AppleScript；我知道您没有使用它，但我不知道如何使用 Scripting Bridge 来做到这一点。据我所知，该方法应该类似于但更接近于 Objective-c 语法。

```
tell application "iTunes"
set this_time to time of current track as string
set elapsed_seconds to player position
set this_elapsed_minutes to round elapsed_seconds / 60 rounding down
set this_elapsed_seconds to elapsed_seconds mod 60
if {1, 2, 3, 4, 5, 6, 7, 8, 9, 0} contains this_elapsed_seconds then
set this_elapsed_seconds to "0" & (this_elapsed_seconds as string)
end if
end tell    

return (this_elapsed_minutes & ":" & this_elapsed_seconds & " of " & this_time) as text -- 
```

# c# - 如何在 ContentControl 中找到给定对象的项目容器？

> ID：11637068
> 
> 赞同：0
> 
> 时间：2012-07-24T18:28:59.293
> 
> 标签：c#, .net, wpf

为了详细说明我的问题，假设我有一个扩展器控件，它的内容是一个网格。我只有 Grid 的句柄，我想获取包含该 Grid 的父控件。如果我尝试获取父级，我将得到真正的父级，但不是控件，它是扩展器的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:32:34.717

您可以尝试使用此代码[`VisualTreeHelper.GetParent`](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getparent.aspx)：

```
DependencyObject parent = VisualTreeHelper.GetParent(controlChild); 
```

# asp.net - 如何通过单击 InsertItemTemplate 中的链接使用从 ModalPopup 中选择的值填充 InsertItemTemplate(ListView) 中的文本框？

> ID：11637070
> 
> 赞同：0
> 
> 时间：2012-07-24T18:29:34.087
> 
> 标签：asp.net, listview, modalpopup

我确实付出了巨大的努力以某种方式找到答案；失败后，我搜索了许多论坛，然后才来这里打扰专家。请帮忙！

我在主窗体的 USerControl 中有一个 Listview；它的 InsertItemTemplate 有一个文本框，其值将通过单击 ModalPopUp 面板中另一个列表视图（在另一个用户控件中）的行中的链接按钮来填充，当单击父用户控件中的链接按钮时弹出。选择后（通过单击 ModalPopUp 中的 LinkBut​​ton），ModalPopup 立即关闭，并且在 Child-UserControl 的代码隐藏中，我将 Selected-Value 保存在 Session 变量中。我的问题是（因为 InsertItemTemplate 已经显示）我不知道将用于填充 TextBox （在父用户控件中）的代码从会话变量中保存的值放在哪里。

ItemCreated、ItemDataBound 在显示 ModalPopUp 之前已经执行。因此，尽管我在 Session-Variable 中有所需的 TextBox 值，但我无法在 InsertItemTemplate 中填充 TextBox。

如果你们中的任何人找到了这种情况的任何答案，我将不胜感激。我觉得应该以某种方式再次加载 InsertItemTemplate，并且其中的这个 TextBox 应该填写 InserItem 数据类型的 ItemCreated。但是不知道怎么实现？？？

欢迎任何想法。我的应用程序中很多地方都有类似的逻辑；如果我做不到，它将严重影响我的应用程序:-(。

希望你们中的一位专家能帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:44:10.553

谢谢。我可以修复它。在这里为一些可能面临类似问题的新手（比如我）提到它。

`InsertItemTemplate`问题是，在上述问题中描述的场景中，将代码（用于填充 TextBox 中的选定值）放在哪里。

我发现在 Parent UserControl 的 Pre-Render Event 中，在 PostBack 模式下，通过`e.InsertItem.FindControl("TextBox")`，我可以用所选值填充它。我不知道这是否是最好的方法，但现在效果很好。

希望这可能对某人有所帮助！谢谢。

# javascript - 如何在 V8 中防止恶意 javascript（使用 Python）

> ID：11637075
> 
> 赞同：2
> 
> 时间：2012-07-24T18:29:45.543
> 
> 标签：javascript, python, v8

我正在使用 PyV8 运行不受信任的 javascript。如何检测并杀死其中包含无限循环或长时间运行循环的 javascript？我想告诉 v8 运行 javascript，如果它没有在 0.1 秒内完成，它会因超时而失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:35:17.210

如果是 python，你可以使用 Interrupting cow：

```
from interruptingcow import timeout

try:
    with timeout(5, exception=RuntimeError):
        # perform a potentially very slow operation
        pass
except RuntimeError:
    print "didn't finish within 5 seconds" 
```

[https://bitbucket.org/evzijst/interruptingcow](https://bitbucket.org/evzijst/interruptingcow)

# java - 动作上的字符编码 URLDecoder

> ID：11637078
> 
> 赞同：1
> 
> 时间：2012-07-24T18:29:55.983
> 
> 标签：java, arrays, jsp, tomcat, character-encoding

我正在尝试修复字符编码问题。我意识到这确实不是一个好方法，但目前我只是要把它包扎起来，当字符编码出现在一个新的待办事项列表中时，我会带来一个合适的解决方案。

无论如何，目前我已经通过在操作中执行此操作解决了法语字符的字符编码问题：

```
String folderName = request.getParameter(PK_FOLDER_NAME);
if (response.getCharacterEncoding().equals("ISO-8859-1") && folderName != null) {
            folderName = URLDecoder.decode(new String(folderName.getBytes("ISO-8859-1"), "UTF-8"), "UTF-8");
        } 
```

但是什么是字符串是一个数组？我该怎么做？例如，如果字符串是这样的：

```
String[] memos = request.getParameterValues(PK_MEMO); 
```

我将如何使用 URLDecoder 进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:14:53.353

多谢你们...

我正在寻找的答案是这个（有效）：

```
if (response.getCharacterEncoding().equals("ISO-8859-1") && memos != null) {
        for(int n=0; n< memos.length; n++) {
            memos[n] = URLDecoder.decode(new String(memos[n].getBytes("ISO-8859-1"), "UTF-8"), "UTF-8");
        }   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T02:14:16.583

你正在以完全错误的方式去做。

您首先获取 request 参数（因此它开始被解析，这使得为请求参数解析设置正确的编码为时已晚！）并且您正在确定**response**的编码而不是**request**。这是没有意义的。

只需在获取第一个参数*之前*设置请求编码。然后将在第一次解析请求参数时使用。

```
request.setCharacterEncoding("UTF-8");
String folderName = request.getParameter(PK_FOLDER_NAME);
String[] memos = request.getParameterValues(PK_MEMO);
// ... 
```

请注意，您通常希望调用`request.setCharacterEncoding("UTF-8")`servlet[过滤器](https://stackoverflow.com/tags/servlet-filters/info)，这样您就不需要在 webapp 的所有 servlet 上重复它。

响应编码通常在 JSP 端配置，`@page pageEncoding`基于每个 JSP 或`<page-encoding>`在`web.xml`应用程序范围内。

不要试图引入绷带/解决方法，它只会让事情变得更糟。从一开始就以正确的方式去做。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# node.js - node.js create and/or append to file

> ID：11637085
> 
> 赞同：0
> 
> 时间：2012-07-24T18:30:38.120
> 
> 标签：node.js

Using node.js I'm creating a function to update a file that contains a JSON list by appending a new element to the list. The updated list is rewritten back to the file. If the file doesn't exist I create it.

Below, `__list_append(..)` does the list append and file update.

My question is if (and should) I can restructure this code to not have two calls to `__list_append`. I'm a bit new to node.js, and don't have a good feel for the asynchronous tactics.

```
function list_append(filename, doc) {
  fs.exists(filename, function(exists) {
    if (exists) {
      fs.readFile(filename, function(err, data) {
        if (err)
          throw err;
        __list_append(filename, JSON.parse(data), doc);
      });
    } else
      __list_append(filename, [], doc);
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:18:29.317

It's easy to get a bit pedantic with "best practices," but when I'm writing code and I get a gut feeling that something's not right or that something could be changed, I go over some well known best practices and attempt to see if the code I'm writing adheres to them. [SOLID](http://en.wikipedia.org/wiki/SOLID), while being principles of object oriented programming, can be useful to think about in other contexts. In this case, it seems to me that the function is violating the [Single Responsibility Principle](http://programmer.97things.oreilly.com/wiki/index.php/The_Single_Responsibility_Principle):

> One of the most foundational principles of good design is:
> 
> > Gather together those things that change for the same reason, and separate those things that change for different reasons.
> 
> This principle is often known as the Single Responsibility Principle or SRP. In short, it says that a subsystem, module, class, or even a function, should not have more than one reason to change.

(This could perhaps be exchanged for [Separation of Concerns](http://en.wikipedia.org/wiki/Separation_of_concerns) or other similar principles for this example, but the concept is the same.)

In this case, the function has two responsibilities: (1) getting the current (or default) list associated with a filename, and (2) appending data to said list. A first pass at separating these concerns might look something like this:

```
function get_current_list(filename, callback) {
  fs.exists(filename, function(exists) {
    if (exists) {
      fs.readFile(filename, function(err, data) {
        if (err)
          return callback(err);
        callback(null, JSON.parse(data));
      });
    } else
      callback(null, []);
  });
}

function list_append(filename, doc) {
  get_current_list(filename, function(err, list) {
    if(err) throw err;
    __list_append(filename, list, doc);
  });
} 
```

Now, `get_current_list` is *only* responsible for getting the current list in a file (or an empty array if there is no file), and `__list_append` is (assumed to be) *only* responsible for appending to it; `list_append` is now a simple integration point between these two functions. The functions are a bit more reusable and can also be tested more easily (as an aside, a test-first or TDD approach to programming can help you notice these kinds of things up front). Furthermore, repeating `callback` in `get_current_list` is quite a bit more generic than repeating `__list_append`; if you need to change `__list_append` to something else, it now is only called in one place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:43:24.347

This case always feels unsatisfying to me because yes, you do have to repeat your call to `__list_append` on both branches because only one of the branches is synchronous.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:49:26.400

I like and up voted Brandon's answer, but this also works:

```
`function list_append(filename, doc) {
  fs.exists(filename, function(exists) {
    var data = [];
    if (exists) {
      data = fs.readFileSync(filename, "utf8");
    }
    __list_append(filename, data, doc);
  });
}` 
```

# python - 单独迭代 JSON 对象以处理每个帖子

> ID：11637087
> 
> 赞同：1
> 
> 时间：2012-07-24T18:30:48.120
> 
> 标签：python, json, simplejson

我有以下从 Instagram API 获得的 JSON 对象，它可以有 n 个帖子（取决于提供的 count 参数）。

```
{
  "pagination": {
    "next_url": "https:\/\/api.instagram.com\/v1\/users\/3\/media\/recent?access_token=184046392.f59def8.c5726b469ad2462f85c7cea5f72083c0&max_id=205140190233104928_3",
    "next_max_id": "205140190233104928_3"
  },
  "meta": {
    "code": 200
  },
  "data": [{
    "attribution": null,
    "tags": [],
    "type": "image",
    "location": {
      "latitude": 37.798594362,
      "name": "Presidio Bowling Center",
      "longitude": -122.459878922,
      "id": 27052
    },
    "comments": {
      "count": 132,
      "data": [{
        "created_time": "1342734265",
        "text": "Distinguishing!",
        "from": {
          "username": "naiicamilos",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_53690312_75sq_1336573463.jpg",
          "id": "53690312",
          "full_name": "Naii Camilos"
        },
        "id": "239194812924826175"
      }, {
        "created_time": "1342737428",
        "text": "@kevin in Spanish Presidio means Jail",
        "from": {
          "username": "jm0426",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_25881992_75sq_1342156673.jpg",
          "id": "25881992",
          "full_name": "Juan Mayen"
        },
        "id": "239221343768285211"
      }, {
        "created_time": "1342768120",
        "text": "Good imagination",
        "from": {
          "username": "kidloca",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_193133903_75sq_1342032241.jpg",
          "id": "193133903",
          "full_name": "Khaleda Noon"
        },
        "id": "239478811731694145"
      }, {
        "created_time": "1342775967",
        "text": "Cwl!",
        "from": {
          "username": "awesomeath",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_179252164_75sq_1339745821.jpg",
          "id": "179252164",
          "full_name": "awesomeath"
        },
        "id": "239544638740894674"
      }, {
        "created_time": "1342796153",
        "text": "\u597d\u7f8e\u263a",
        "from": {
          "username": "hidelau",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_47295330_75sq_1342763977.jpg",
          "id": "47295330",
          "full_name": "Hide Lau"
        },
        "id": "239713963951001995"
      }, {
        "created_time": "1343018007",
        "text": "#mindfreak",
        "from": {
          "username": "info2021",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/anonymousUser.jpg",
          "id": "27664191",
          "full_name": "info2021"
        },
        "id": "241575017119224582"
      }, {
        "created_time": "1343068374",
        "text": "@kevin please share and promote my last pic. This will be the new hype as instagram",
        "from": {
          "username": "thansy_mansy",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_189019343_75sq_1342951587.jpg",
          "id": "189019343",
          "full_name": "thansy_mansy"
        },
        "id": "241997523093295303"
      }, {
        "created_time": "1343068382",
        "text": "@kevin :P",
        "from": {
          "username": "thansy_mansy",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_189019343_75sq_1342951587.jpg",
          "id": "189019343",
          "full_name": "thansy_mansy"
        },
        "id": "241997589589790922"
      }]
    },
    "filter": "Rise",
    "created_time": "1342676212",
    "link": "http:\/\/instagr.am\/p\/NQD4KAABKF\/",
    "likes": {
      "count": 4810,
      "data": [{
        "username": "caitlyn_hammonds",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/anonymousUser.jpg",
        "id": "198322184",
        "full_name": "caitlyn_hammonds"
      }, {
        "username": "sophiafrancis",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_43092892_75sq_1340548333.jpg",
        "id": "43092892",
        "full_name": "Sophiaaa."
      }, {
        "username": "amna7861",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_175807260_75sq_1343135903.jpg",
        "id": "175807260",
        "full_name": "Amna Haroon"
      }, {
        "username": "yaya0318",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_74056_75sq_1287001004.jpg",
        "id": "74056",
        "full_name": "Mao Yaya"
      }, {
        "username": "jay_damage",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_197465040_75sq_1342932411.jpg",
        "id": "197465040",
        "full_name": "jay_damage"
      }, {
        "username": "reves",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_671833_75sq_1335966794.jpg",
        "id": "671833",
        "full_name": "Fernando D. Ramirez"
      }, {
        "username": "lizray1",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_198450407_75sq_1343144120.jpg",
        "id": "198450407",
        "full_name": "lizray1"
      }, {
        "username": "alivewtheglory",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_37907416_75sq_1341561441.jpg",
        "id": "37907416",
        "full_name": "Marilynn C"
      }, {
        "username": "mnforever55",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_29255977_75sq_1334833008.jpg",
        "id": "29255977",
        "full_name": "mnforever55"
      }]
    },
    "images": {
      "low_resolution": {
        "url": "http:\/\/distilleryimage9.s3.amazonaws.com\/beb7f896d16311e19fe21231380f3636_6.jpg",
        "width": 306,
        "height": 306
      },
      "thumbnail": {
        "url": "http:\/\/distilleryimage9.s3.amazonaws.com\/beb7f896d16311e19fe21231380f3636_5.jpg",
        "width": 150,
        "height": 150
      },
      "standard_resolution": {
        "url": "http:\/\/distilleryimage9.s3.amazonaws.com\/beb7f896d16311e19fe21231380f3636_7.jpg",
        "width": 612,
        "height": 612
      }
    },
    "caption": {
      "created_time": "1342676255",
      "text": "Happy birthday @amy !",
      "from": {
        "username": "kevin",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_3_75sq_1325536697.jpg",
        "id": "3",
        "full_name": "Kevin Systrom"
      },
      "id": "238708186813567655"
    },
    "user_has_liked": false,
    "id": "238707833418289797_3",
    "user": {
      "username": "kevin",
      "website": "",
      "bio": "CEO & Co-founder of Instagram",
      "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_3_75sq_1325536697.jpg",
      "full_name": "Kevin Systrom",
      "id": "3"
    }
  }, {
    "attribution": null,
    "tags": [],
    "type": "image",
    "location": {
      "latitude": 38.503100608,
      "name": "Goose & Gander",
      "longitude": -122.468387538,
      "id": 12059278
    },
    "comments": {
      "count": 85,
      "data": [{
        "created_time": "1342555499",
        "text": "Cheers !!! \ud83d\ude18\ud83d\ude18",
        "from": {
          "username": "kattiab",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_1345073_75sq_1340495505.jpg",
          "id": "1345073",
          "full_name": "kattia b"
        },
        "id": "237695212468572732"
      }, {
        "created_time": "1342558279",
        "text": "happy birthday instagram!",
        "from": {
          "username": "alanasayshi",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_4235095_75sq_1341960681.jpg",
          "id": "4235095",
          "full_name": "Alana Boy\u00e9r"
        },
        "id": "237718535382504383"
      }, {
        "created_time": "1342567977",
        "text": "Happy Natal Day Instagram!",
        "from": {
          "username": "cynrtst",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_12493918_75sq_1341538462.jpg",
          "id": "12493918",
          "full_name": "Cynthia L"
        },
        "id": "237799888639758668"
      }, {
        "created_time": "1342568896",
        "text": "Happy Birthday \ud83c\udf89\ud83c\udf89\ud83c\udf89 was it a long labour \ud83d\ude02\ud83d\ude02\ud83d\ude02",
        "from": {
          "username": "relzie",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_15718874_75sq_1332290975.jpg",
          "id": "15718874",
          "full_name": "Relz"
        },
        "id": "237807595966960050"
      }, {
        "created_time": "1342579289",
        "text": "Cheers @kevin and Happy Birthday #instagram thank you so much Kevin for creating instagram it's truly got me back out there taking more photos and falling in love with photography all over again...",
        "from": {
          "username": "bpphotographs",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_12149171_75sq_1339457436.jpg",
          "id": "12149171",
          "full_name": "bpphotographs"
        },
        "id": "237894779172557723"
      }, {
        "created_time": "1342652660",
        "text": "@suz_h",
        "from": {
          "username": "ianyorke",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_1041088_75sq_1339844137.jpg",
          "id": "1041088",
          "full_name": "Ian Yorke"
        },
        "id": "238510264889118973"
      }, {
        "created_time": "1342667574",
        "text": "Love your app\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97",
        "from": {
          "username": "gothangel1997",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_186799125_75sq_1342668825.jpg",
          "id": "186799125",
          "full_name": "Angel Mercado"
        },
        "id": "238635368570687940"
      }, {
        "created_time": "1342843274",
        "text": "\ud83d\ude09\u2764",
        "from": {
          "username": "andescu",
          "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_145554839_75sq_1337641309.jpg",
          "id": "145554839",
          "full_name": "andescu"
        },
        "id": "240109245637333685"
      }]
    },
    "filter": "Sierra",
    "created_time": "1342332400",
    "link": "http:\/\/instagr.am\/p\/NF0G6bABA2\/",
    "likes": {
      "count": 3282,
      "data": [{
        "username": "caysondesigns",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_23464609_75sq_1329177054.jpg",
        "id": "23464609",
        "full_name": "Jasmine at Cayson Designs"
      }, {
        "username": "m_azooz16",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_198179404_75sq_1343096096.jpg",
        "id": "198179404",
        "full_name": "m_azooz16"
      }, {
        "username": "shulinghuang",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_144887495_75sq_1342460246.jpg",
        "id": "144887495",
        "full_name": "H\u3002"
      }, {
        "username": "caitlyn_hammonds",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/anonymousUser.jpg",
        "id": "198322184",
        "full_name": "caitlyn_hammonds"
      }, {
        "username": "sophiafrancis",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_43092892_75sq_1340548333.jpg",
        "id": "43092892",
        "full_name": "Sophiaaa."
      }, {
        "username": "beatle1234",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/anonymousUser.jpg",
        "id": "197988834",
        "full_name": "beatle1234"
      }, {
        "username": "yaya0318",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_74056_75sq_1287001004.jpg",
        "id": "74056",
        "full_name": "Mao Yaya"
      }, {
        "username": "lizray1",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_198450407_75sq_1343144120.jpg",
        "id": "198450407",
        "full_name": "lizray1"
      }, {
        "username": "rawr1234321",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_198492630_75sq_1343151765.jpg",
        "id": "198492630",
        "full_name": "rawr1234321"
      }]
    },
    "images": {
      "low_resolution": {
        "url": "http:\/\/distilleryimage6.s3.amazonaws.com\/3ec59e18ce4311e1b8031231380702ee_6.jpg",
        "width": 306,
        "height": 306
      },
      "thumbnail": {
        "url": "http:\/\/distilleryimage6.s3.amazonaws.com\/3ec59e18ce4311e1b8031231380702ee_5.jpg",
        "width": 150,
        "height": 150
      },
      "standard_resolution": {
        "url": "http:\/\/distilleryimage6.s3.amazonaws.com\/3ec59e18ce4311e1b8031231380702ee_7.jpg",
        "width": 612,
        "height": 612
      }
    },
    "caption": {
      "created_time": "1342332465",
      "text": "Mellivora capensis - eagle rare, peat, honey, lemon, pineapple, black cardamom, chili, coconut foam",
      "from": {
        "username": "kevin",
        "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_3_75sq_1325536697.jpg",
        "id": "3",
        "full_name": "Kevin Systrom"
      },
      "id": "235824269324456712"
    },
    "user_has_liked": false,
    "id": "235823728972271670_3",
    "user": {
      "username": "kevin",
      "website": "",
      "bio": "CEO & Co-founder of Instagram",
      "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_3_75sq_1325536697.jpg",
      "full_name": "Kevin Systrom",
      "id": "3"
    }
  }, ..... 
```

所以我希望单独遍历每个帖子并提取`tags`,`id`和`image urls`. 我遇到了一些麻烦，（因为我是 PHP 开发人员，并且发现作为初学者使用 Python 真的很难）。

这是我用来遍历每个帖子并处理提供的属性的代码。我不想将它们存储在列表或字典中。只想通过标签搜索。

（这只是一个尝试的代码，因为我找不到应该使用哪个循环）

```
 info= simplejson.load(info)
    print type(info['data']) # I get it as a list
    for k, v in info['data']:
        print v 
```

我可以使用 php 轻松完成此操作`foreach`：

```
foreach($info->data as $i) {
   $tags = $i->tags();
   $id = $i->id();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:39:27.987

如果`info['data']`是一个列表，您应该能够像这样迭代它：

```
for post in info['data']:
    tags = post['tags']
    id = post['id']
    image_urls = [] # An empty list -- we'll fill it below
    for img_type in ['low_resolution', 'thumbnail', 'standard_resolution']:
        image_urls.append(post['images'][img_type]['url'])
    # Now image_urls has all the image urls in it 
```

我认为与 PHP 完全不同的部分是密钥`"tags"`在 JSON 结构中，您必须`"tags"`在 Python 中使用字符串，而`tags()`在 PHP 中使用文字。

# ruby-on-rails - 当协议为 https 时，Amazon S3 资产不会加载，-Rails、Heroku

> ID：11637091
> 
> 赞同：3
> 
> 时间：2012-07-24T18:30:52.120
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我在heroku上设置了asset_sync gem，遵循这个URL：[https ://github.com/rumblelabs/asset_sync](https://github.com/rumblelabs/asset_sync)

设置正常，我在 S3 上传了所有静态资产。

问题是，当我通过 https 协议打开页面时，无法访问任何资产，因为浏览器返回“此连接不受信任”。（与 Chrome 和 Firefox 相同）。

在我承认访问 s3 资产 url 后，每个资产都可以使用。[https://myapp.asset.s3.amazonaws.com/assets](https://myapp.asset.s3.amazonaws.com/assets)

有人有同样的问题吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:48:04.323

s3 的 SSL 证书是通配符证书，即*.s3.amazonaws.com。然而，许多证书检查库都定义了这一点，`foo.s3.amazonaws.com`但不包括`foo.bar.amazonaws.com`：通配符证书只下降一级。

最简单的解决方案是选择一个没有点的存储桶名称，例如`myapp-assets`.

另一种解决方案是以`https://s3.amazonaws.com/myapp.asset/assets/...`. 我相信你必须设置`config.assets.prefix`告诉 rails 资产不在资产主机的正常位置。

# apache-flex - 如何在flex中输入系统注册表？

> ID：11637093
> 
> 赞同：0
> 
> 时间：2012-07-24T18:31:05.717
> 
> 标签：apache-flex, registry

我有一个桌面应用程序并正在开发一个安装程序脚本。每当此脚本运行时，我都需要检查以前的安装。我不知道如何在 flex 中访问注册表。任何帮助或参考都将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:04:05.690

Flex，或者更具体地说是 AIR/AS3，不提供对 Windows 注册表的访问。您必须构建自己的本机扩展来公开此功能。

* * *

由于我被要求提供一些资源链接...

以下是一些关于在 Windows 中创建本[机扩展的](http://quetwo.com/2011/10/31/creating-an-windows-air-native-extension-with-eclipse-part-1/)博客文章。[以下是有关构建 Native Extensions](http://www.adobe.com/devnet/air/native-extensions-for-air.html)
的一些通用信息。

最后，谷歌应该告诉你如何[从 C 访问 Windows 注册表](https://www.google.com/search?q=Access%20Windows%20Registry%20from%20C&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)；这就是您想要在 Native Extension 中执行的操作。

# r - 在 GLMM 或 lme 中将 Family id 指定为随机效应

> ID：11637099
> 
> 赞同：0
> 
> 时间：2012-07-24T18:31:20.430
> 
> 标签：r

我正在尝试在 R 中拟合广义线性混合模型。我有很大的谱系和基因型数据。我试过这个：

```
m1 <- lmer(Final_sx~(1 | ID)+cohort2+cohort3+cohort4+sex,
           data=solar_new_phen,family=poisson) 
```

它给了我信息：

> 随机效应的分组因子的水平数 *等于*n，即观察数

我在大多数教程中看到人们使用 ID 作为聚类变量。在 kinship 包以及 lmekin 函数中是这样的：

```
rand.eff=formula(paste("~1|",sub.ID))
fit <- try(lmekin(fixed=fix.eff,data=x,random = rand.eff,varlist=list(kmat))) 
```

我应该使用个人身份证还是家庭身份证作为随机效应？我很困惑。我有家谱，我认为我应该使用 Family ID 作为聚类变量。如果有人可以指导我对随机效应的解释很少，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T15:31:47.057

因为您可能只有一行 ID ！为此，您需要为 1 个 ID 提供许多 obs

# mysql - 缺少记录的左外连接

> ID：11637105
> 
> 赞同：0
> 
> 时间：2012-07-24T18:31:45.327
> 
> 标签：mysql, left-join

我从几个表中选择数据，但主要思想是产品可能有也可能没有与之相关的折扣记录，如折扣百分比或折扣金额。我正在使用左外连接（这可能不正确），并且无论记录是否存在，我都会返回相同的美元值和百分比值。

查询类似于：

```
SELECT Items.ItemID, Items.name, Items.price, 
       ItemDiscounts.percentOff, ItemDiscounts.dollarOff, 
       ItemAttributes.ColorName, ItemStuff.StuffID
FROM Items, ItemAttributes, ItemStuff
LEFT OUTER JOIN ItemDiscounts
  ON ItemDiscounts.ItemID = ItemID
  AND (
    ItemDiscounts.percentOff > 0
    OR ItemDiscounts.dollarOff > 0
  )
WHERE Items.ItemID = ItemAttributes.ItemID
AND ItemStuff.ItemID = Items.ItemID
GROUP BY ItemStuff.StuffID 
```

奇怪的是，在所有结果中，`percentOff`返回“1”，并`dollarOff`返回“0”，不管每个项目是否有它自己的关联折扣记录。对于吐口水，我改为`ItemDiscounts.percentOff > 0`，`ItemDiscounts.percentOff > 1`然后`dollarAmount`改为全 2 和`percentOff`全 0。

我对此感到有些困惑，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:48:39.353

您在 ON 子句中有对 ItemID 的不合格引用……不清楚为什么这不会引发“模棱两可的列”异常。（显然，这对 MySQL 来说并不模棱两可，并且 MySQL 正在确定引用哪个 ItemId，很有可能它不是您想要的。

此外，您的查询包括对行源的`ItemStuff`引用，但您的查询中没有显示这样的行源。

我还怀疑 that 的行为`GROUP BY`会给你一个不符合你期望的结果集。（现在，它很可能掩盖了查询中的真正问题，这可能是`CROSS JOIN`您不打算进行的操作。

我建议您尝试不使用该`GROUP BY`子句的查询，并确认结果集是您在没有 GROUP BY 子句的情况下所期望的。

注意：大多数其他关系数据库引擎会抛出一个异常，`GROUP BY`就像您在查询中显示的那样。他们（基本上）要求 SELECT 列表中的每个非聚合都包含在`GROUP BY`. 您可以让 MySQL 以相同的方式运行（使用某些特定的 sql_mode 设置）。MySQL 更加自由，但是您返回的结果集可能不符合您的期望。

注意：鉴于对不存在的行源的引用，我看不到此查询如何通过语义检查，并且根本没有返回任何结果集`ItemStuff`。

* * *

为了提高可读性，我建议您不要使用逗号作为连接运算符，而是使用 JOIN 关键字。我还建议您将连接谓词从`WHERE`子句移动到`ON`子句。我还喜欢为每个行源指定一个别名，并使用该别名来限定其中的列。

鉴于您在查询中显示的内容，我会这样写（我可以理解的部分）：

```
SELECT i.ItemID
     , i.name
     , i.price
     , d.percentOff
     , d.dollarOff
     , a.ColorName
  FROM Items i 
  JOIN ItemAttributes a
    ON a.ItemID = i.ItemID
  LEFT 
  JOIN ItemDiscounts d
    ON d.ItemID = i.ItemID
       AND ( d.percentOff > 0 OR d.dollarOff > 0 ) 
```

我已经`ItemStuff.StuffID`从 SELECT 列表中省略了，因为我没有看到任`ItemStuff`何行源。

我还排除了 WHERE 子句，因为我`ItemStuff`在您的查询中看不到任何行源。

```
-- WHERE ItemStuff.ItemID = i.ItemID 
```

我省略了 GROUP BY，因为我在您的查询中没有看到任何 ItemStuff 行源，并且因为 GROUP BY 的行为可能不是我所期望的，而是掩盖了我的查询中的问题。

```
-- GROUP BY ItemStuff.StuffID 
```

* * *

**更新：**

@Kyle，您的查询“超时”这一事实使我相信您生成的行比预期的要多，就像您拥有笛卡尔积一样（表中的每一行都与其他表中的每一行“匹配”。 .. 一个表中有 10,000 行，另一个表中有 10,000 行，这将生成 100,000,000 行。

我认为该`GROUP BY`条款掩盖了真正的问题。

对于开发，我建议您将每个表的 PRIMARY KEY 作为结果集中的前导列。我会在驱动表中添加一些合理的谓词（例如`i.ItemID IN (2,3,5,7)`，限制结果集的大小，并按主键排序......这应该可以帮助您识别意外的笛卡尔积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:37:03.917

当你从查询中删除这些行时，你得到了你想要的吗？

AND（ItemDiscounts.percentOff > 0 或 ItemDiscounts.dollarOff > 0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:46:07.853

一旦为外连接的可能为空的一侧指定了绝对值，您的`WHERE`子句就必须考虑到它。

尝试使用以下子句：

```
AND (
ItemDiscounts.percentOff > 0
OR ItemDiscounts.percentOff is null
OR ItemDiscounts.dollarOff > 0
OR ItemDiscounts.dollarOff is null
) 
```

另外，您指定的是`GROUP BY`没有聚合的 a 。在大多数情况下，这没有任何意义。你可能想要`ORDER BY`排序。

# wordpress - Wordpress 自定义 the_content

> ID：11637107
> 
> 赞同：0
> 
> 时间：2012-07-24T18:31:52.927
> 
> 标签：wordpress

我对 Wordpress 很陌生，并尝试自定义我的 Wordpress 主题。我的帖子总是不一样。但基本上有一个标题、一个文本和一个 NivoSlider/Image/Vimeo 视频。

如果我使用基本的**the_content**函数，它会显示这样的帖子：

```
<h2>Title of the Post</h2>
<p><div class="slider-wrapper">Slider</div>Text</p> 
```

它总是在

标签。如何拆分**the_content**对象？

我想让我的帖子像 NivoSlider 那样显示：

```
<div class="slider-wrapper">Slider</div> 
<h2>Title of the Post</h2>
<p><Text</p> 
```

如果有人能告诉我为所有不同类型的帖子做最简单的方法，那就太好了。

希望您能理解我的解释，如果您需要更多详细信息，请告诉我。

先谢谢了。

最好的，布里吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:53:04.383

就个人而言，我会将短代码从您的内容正文中完全取出，并将其放在自定义字段中（命名为“postSlider”）。然后你可以像这样构造你的模板：

```
<?php
do_shortcode(get_post_meta(get_the_ID(), 'postSlider'));
?>
<h2><?php the_title(); ?></h2>
<p><?php the_content(); ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:54:39.243

您需要为您的帖子[**创建一个自定义页面模板**](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)。在该页面模板中，您可以定义滑块。然后只需将您的文本放在内容部分。

在进行认真的编码之前，请参阅：[Stepping Into Templates](http://codex.wordpress.org/Stepping_Into_Templates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:16:17.500

再次感谢您的回答。最后我使用了 Wordpress 的 Types 插件。您可以使用以下代码轻松自定义自己的字段并在 index.php 文件中使用它：

**自定义字段图像：**

```
<?php echo(types_render_field("field-slug-image", array("alt"=>"Product image", "width"=>"600","height"=>"300","proportional"=>"true"))); ?> 
```

**滑块的简码自定义字段：**

```
<?php echo apply_filters('the_content', get_post_meta($post->ID, 'field-slug-slider', true)); ?> 
```

**Vimeo 视频的简码自定义字段：**

```
<?php echo apply_filters('the_content', get_post_meta($post->ID, 'field-slug-video', true)); ?> 
```

**标题和内容：**

```
<h2><?php the_title(); ?></h2>
<?php the_content('Read the full post',true);?> 
```

# javascript - 动态javascript函数声明

> ID：11637108
> 
> 赞同：0
> 
> 时间：2012-07-24T18:31:55.290
> 
> 标签：javascript, function, dynamic, declaration

我正在编写一个代码，我必须将不同的函数传递给某些对象。

在这种情况下，我试图为 onchange 事件传递不同的函数。所以目前我得到的是这样的：

```
var ArrayList; //Contains some data to use with ObjectArray format { n: data }
var ObjectArray; //Contains several objects format Array[n] = Object;
for(var key in ArrayList){
    var doFunction = function() {
        Object[key].doSomething(ArrayList[key]);
    }
    Object[key].onchange = doFunction;
} 
```

我认为这里的问题是我担心它会在声明时执行代码，而不是使用实际变量的值。

有没有办法在函数执行时传递带有值的函数？或者变量会按照它的书写方式被解析吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:49:45.080

这是循环问题中的经典函数。您需要了解**闭包**的工作原理。

仔细阅读[此答案](https://stackoverflow.com/a/111111/352796)的“示例 3”部分。[JavaScript 闭包是如何工作](https://stackoverflow.com/q/111102/352796)的？问题，也是。

另一个可能有助于直观理解的示例：

```
var key = 5;

var onchange = function () {
    console.log(key);
};

onchange(); // 5

key = 10; // the loop reassigns the key on each iteration

onchange(); // 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:48:05.777

应该这样做：

```
var ArrayList; //Contains some data to use with ObjectArray format { n: data }
var ObjectArray; //Contains several objects format Array[n] = Object;
for(var key in ArrayList)
{
    (function(key)
    {
        var doFunction = function() 
        {
            Object[key].doSomething(ArrayList[key]);
        }
        Object[key].onchange = doFunction;
    }(key))    
} 
```

# sql - Ole DB 语句在 Access 中运行，但不在 Visual Studios 中

> ID：11637110
> 
> 赞同：-2
> 
> 时间：2012-07-24T18:32:03.557
> 
> 标签：sql, ms-access, oledb

我有以下语句，它会在 Access 中返回我想要的结果，但是在 Visual Studio 中，我收到一条错误消息“；预期”，可能是什么问题？

```
var query = "SELECT Count(*) FROM usersTable WHERE (((usersTable.[uDateCreated]) Between DateAdd("d",-2,Now()) And Now()))"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:34:32.667

您需要在字符串中转义引号：

```
" .. Between DateAdd(\"d\",-2 .. "
                     ^  ^ escape the quotes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:34:45.760

您在查询中使用了引号，它结束了字符串。改为使用撇号`d`：

```
var query = "SELECT Count(*) FROM usersTable WHERE (((usersTable.[uDateCreated]) " & _
    "Between DateAdd('d',-2,Now()) And Now()))" 
```

具体来说：

```
DateAdd('d',-2,Now()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:37:25.713

我认为您的问题是您的字符串中有 " （引号）而没有转义它们。我不知道您使用的是哪种语言，但是对于许多您使用 \ （反斜杠）转义的人来说，那么您的字符串将显示为*DateAdd(\"d\ ",*

# c# - 将 HTML 参数发送到 ASCX 子控件中的按钮单击事件

> ID：11637111
> 
> 赞同：0
> 
> 时间：2012-07-24T18:32:04.563
> 
> 标签：c#, asp.net, html, events, click

我正在尝试访问某些页面 HTML 以用于`Button_Click`事件中的电子邮件。

我无法在运行时在其他任何地方轻松设置此内容（例如在[TAG](https://stackoverflow.com/questions/2006507/add-parameter-to-button-click-event)中）。

所以我想知道是否可以使用 JQuery 将变量设置为`.innerHtml()`，然后在按钮单击中传递它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:43:38.110

像这样的东西...

```
<div id="myDiv">
    some content...
</div>
<asp:HiddenField ID="hdnHtml" ClientIDMode="Static" runat="server" />
<script type="text/javascript">
    $(function () {
        $('#hdnHtml').val($('#myDiv').html());
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:39:00.773

向表单添加隐藏字段：使用`javascript`/填充其值`jQuery`并通过`Button_Click`事件提交表单。

# html - HTML元素在浏览器调整大小时改变位置

> ID：11637114
> 
> 赞同：1
> 
> 时间：2012-07-24T18:32:12.550
> 
> 标签：html, css, layout, responsive-design

为什么在[此视频](http://www.youtube.com/watch?v=OPpDOngLoX8)中浏览器上移动的框和图像会调整大小？

这是我的代码：

```
style="width: 98pt; position: fixed; left: 112pt; bottom: 175pt" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:37:28.393

# 因为...

它的设计很灵活。

# 怎么做

根据[this other answer](https://stackoverflow.com/a/4733291/652669)：

> *   对页面和元素的尺寸使用基于百分比的宽度，而不是像素。
>     
>     
> *   使用 em 作为字体大小，而不是 px 或 pt。
>     
>     
> *   尽量不要使用图像进行导航，或者如果这样做，请使用滑动门方法使它们可扩展。阅读：[#1](http://www.alistapart.com/articles/slidingdoors)。
>     
>     
> *   阅读液体布局：[#2](http://www.maxdesign.com.au/articles/liquid)或[#3](http://www.alistapart.com/articles/negativemargins)。

# 走得更远

如果你想了解更多，我推荐这本书：

[*Ethan Marcotte 的响应式网页设计*](http://www.abookapart.com/products/responsive-web-design/)。

![enter image description here](../Images/542824bfaba831f5d6da1cfb018b6b3d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:37:48.630

Because they are attached to the bottom of its container (the body tag maybe?)

Use "top:###pt" instead of "bottom: 175pt".

I think it would be better to specify its height instead.

```
<body>

  <div style="position:fixed; top: 50px; left: 50px; width: 100px; height: 100px;">content</div>

</body> 
```

# java - 如何在 NetBeans 平台框架应用程序中包含文件

> ID：11637118
> 
> 赞同：0
> 
> 时间：2012-07-24T18:32:36.297
> 
> 标签：java, swing, netbeans, embedded-resource, netbeans-platform

我有一堆 .ini 文件，我希望将它们包含在我的 NetBeans 平台框架 Java 应用程序中，但我不知道该怎么做。我想要的是将这些文件包含在默认的 NetBeans 平台框架安装程序中。另外，如何使用 Java 代码访问这些文件？

**请注意，我的问题是关于 NetBeans 平台框架，而不是 NetBeans IDE。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:29:16.540

将文件添加到应用程序 Jar。使用信息中的建议访问它们。嵌入式资源页面（见上面的标签）。

# java - Google App Engine 文件上传已取消

> ID：11637121
> 
> 赞同：0
> 
> 时间：2012-07-24T18:33:10.330
> 
> 标签：java, google-app-engine, gwt, file-upload

[Google App Engine 文档](https://developers.google.com/appengine/docs/quotas#Requests)说 HTTP 请求有 32MB 的限制。

我正在尝试上传一个 44K 文件，但我得到一个“已取消”状态，而没有任何关于服务器日志上发生的事情的参考（它适用于开发环境）。当我使用 7.5K 文件（7.8K 请求）拍摄时，一切正常。

我只需要解析这个文件并向客户端返回一个响应，所以我不需要 Blobstore API 来保存它。

下面，我的客户（GWT）代码：

```
 form.setAction("/import_file_parser");
    form.setEncoding(FormPanel.ENCODING_MULTIPART);
    form.setMethod(FormPanel.METHOD_POST);
    form.addSubmitCompleteHandler(uploadReceiver); 
```

这个 32MB 的限制仍然有效吗？怎么了？

# jquery - Jquery datepicker计算不包括假期和周末的天数？

> ID：11637123
> 
> 赞同：1
> 
> 时间：2012-07-24T18:33:22.200
> 
> 标签：jquery, jquery-ui, datepicker

> **可能重复：**
> [可以使 jQuery UI Datepicker 禁用周六和周日（和节假日）吗？](https://stackoverflow.com/questions/501943/can-the-jquery-ui-datepicker-be-made-to-disable-saturdays-and-sundays-and-holid)

到目前为止，我已经显示了预计交货天数，但我想从计算中排除周末和节假日。有任何想法吗？

```
<script>
    $(function () {
        $("#datepicker").datepicker({
            onSelect: function () {
                var start = $('#datepicker').val();
                var date = new Date(start);
                var d = date.getDate();
                var m = date.getMonth();
                var y = date.getFullYear();
                var myday = new Date(y, m, d + 10);
                $('#showdate').val($.datepicker.formatDate('mm/dd/yy', myday));
            }
        });
    });
</script> 
```

# javascript - How to remove a comma that separates the values from an array in JavaScript?

> ID：11637127
> 
> 赞同：3
> 
> 时间：2012-07-24T18:33:27.877
> 
> 标签：javascript

I have this code in JS:

```
var array = ['one', 'two']; 
```

And each time I want to display the array, it is displayed with like this:

```
one,two 
```

Now my question is, is there any way to remove that nasty comma?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T18:34:54.393

To display them next to each other, you can use join. `array.join(' ');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:39:53.593

You could use the replace method of the string object:

```
array.toString().replace(',',' ') 
```

# google-maps - 谷歌地图 v3 标记聚类，不使用 markerClusterer 插件或融合或 KML 层

> ID：11637130
> 
> 赞同：0
> 
> 时间：2012-07-24T18:33:42.770
> 
> 标签：google-maps, google-maps-markers, drag, markerclusterer

是的，我在这里进行了研究，发现到目前为止只引用了 MarkerClusterer 插件，或使用 KML 或 Fusion 表层的指针。

这：[https](https://developers.google.com/maps/articles/toomanymarkers#markermanager) ://developers.google.com/maps/articles/toomanymarkers#markermanager 也是一本有趣的书。

我想这应该相对容易，不是吗？让我尝试用伪代码表达我在做什么：

```
WILE event: "drag the map"
  get current viewport bounds
  load ajax call to look up markers that are located inside current viewport
  remove previously visible markers
  add newly visible markers to the display
END WHILE 
```

我不擅长正确的计算机科学编程类型的东西，并且在必要的结构上苦苦挣扎，以执行像这样不断更新标记数组的有效循环动作。

不知何故，我的直觉告诉我这可能是一种低效的方式——我应该以不同的方式处理这个问题吗？我想避免的是在拖动端更新标记数组。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:58:09.057

经过一番摆弄和进一步搜索，解决方案被埋在这里：[谷歌地图v3重复标记 - 使用数组来管理标记但仍然得到重复](https://stackoverflow.com/questions/11641770/google-maps-v3-duplicate-markers-using-an-array-to-manage-markers-but-still-ge)

# xml - 通过 Smack xmpp api 从 JAXB 发送 XML

> ID：11637135
> 
> 赞同：0
> 
> 时间：2012-07-24T18:34:01.170
> 
> 标签：xml, jaxb, smack

我想知道通过 smack api 发送原始 XML 的最佳方式是什么。我的意思是，我可以将字符串作为消息发送给我的联系人列表中的某些人（又名朋友）。但我只想向他们发送一些 XML。我应该构建 XML，将其转换为字符串，发送它，然后将字符串解析回接收方的 xml 吗？这是推荐的吗？

我正在考虑通过 JAXB 将某些类转换为 XML，将其作为字符串发送并在接收方将其解组回类。它是有效的做事方式吗？是否有一些最佳实践如何做到这一点？

十分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:33:57.677

查看[PacketExtension](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/packet/PacketExtension.html)和[PacketExtensionProvider](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/providers.html)。扩展提供了一种将 XML 扩展添加到不同数据包类型的自定义方法，并且提供者是匹配的解组机制。

如果您检查源代码，您将看到许多它的用法示例。没有对 jaxb 的直接支持，但我认为您应该能够编写使用 JAXB 的扩展和提供程序。

# macos - 如何仅在下次启动时运行 shell 脚本？是否可以从脚本中进行设置？

> ID：11637138
> 
> 赞同：0
> 
> 时间：2012-07-24T18:34:03.267
> 
> 标签：macos, shell, applescript

我正在尝试制作一个脚本，以便在 OSX Lion 的下一次启动时运行一次。脚本非常简单，我只是记录启动时间并将其与以前的已知时间进行比较。我真正想做的是不必手动添加启动项，因为这将在大量计算机上进行设置。

有没有办法从脚本中添加一个启动项只运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:50:36.660

假设您的脚本名为 script.sh ... 将脚本放在目录中`/System/Library/StartupItems/`

然后，只需简单地将命令添加`rm -f /System/Library/StartupItems/script.sh`到脚本的末尾。

# javascript - 我如何在 asp.net 中的按钮单击末尾调用 javascript 函数

> ID：11637141
> 
> 赞同：1
> 
> 时间：2012-07-24T18:34:06.863
> 
> 标签：javascript, asp.net, vb.net

我试过

```
Protected Sub btn_add_question_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn_add_question.Click
        frm_course.Visible = False
        question_div.Visible = True
        ScriptManager.RegisterClientScriptBlock(btn_add_question, Me.GetType(), "BlockName", "alert('hello world');", True)
    End Sub 
```

和

```
Protected Sub btn_add_question_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btn_add_question.Click
        frm_course.Visible = False
        question_div.Visible = True
        Page.ClientScript.RegisterStartupScript(Me.GetType, "Javascript", "alert('hello')")
    End Sub 
```

但是，没有显示警报消息。需要帮忙 ！！

```
 <asp:Button ID="btn_add_question" runat="server" Text="Next" CssClass="btn_submit" Width="101px" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:44:15.983

您需要将`<script>`标签`True`作为最后一个参数传递给函数调用，`RegisterStartupScript`如下所示：

```
Page.ClientScript.RegisterStartupScript(Me.GetType, "Javascript", "alert('hello');",True) 
```

**更新**：

试试这个：

```
ScriptManager.RegisterStartupScript(Me.GetType, "Javascript", "alert('hello');",True) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-24T18:40:13.697

将`OnClientClick`处理程序添加到按钮，或者更好的是，通过 javascript 将处理程序附加到应该在的位置。

```
<asp:button id="myButton" runat="server" text="Postback" onclientclick="alert('hello world');" /> 
```

如果您所做的只是更改某些元素的某些可见性，那么您甚至根本不应该回帖。只需使用`input type="button"`并通过 javascript 显示/隐藏。

```
<input type="button" value="Next" id="btn_add_question" />

document.getElementById('btn_add_question').onclick = function () {
    document.getElementById('frm_course').style.visibility = 'hidden';
    document.getElementById('question_div').style.visibility = 'visible';
    alert('hello world');
}; 
```

# .htaccess - 使用 .htaccess 仅重定向某些不存在的 url

> ID：11637148
> 
> 赞同：0
> 
> 时间：2012-07-24T18:34:32.363
> 
> 标签：.htaccess, mod-rewrite

我有以下情况

我有一些存在的 url 和一些不存在的 url，具有以下结构

[http://site.co.za/component/docman/cat_view/388-documents-reports/test/sss/test/123](http://site.co.za/component/docman/cat_view/388-documents-reports/test/sss/test/123) http://site.co.za/component/docman/cat_view/388-documents-reports /file/asdsa [http://site.co.za/component/docman/cat_view/388-documents-reports/sadas](http://site.co.za/component/docman/cat_view/388-documents-reports/sadas) http://site.co.za/component/docman/cat_view/388-documents-reports/sadsad

我想要实现的是，当任何包含**component/docman/cat_view**的 url不存在时，它需要链接到父 url

例如

[http://site.co.za/component/docman/cat_view/388-documents-reports/test/sss/test/123](http://site.co.za/component/docman/cat_view/388-documents-reports/test/sss/test/123)

需要重定向到

[http://site.co.za/component/docman/cat_view/388-documents-reports](http://site.co.za/component/docman/cat_view/388-documents-reports)

[http://site.co.za/component/docman/cat_view/388-documents-reports/file/asdsa](http://site.co.za/component/docman/cat_view/388-documents-reports/file/asdsa)

需要重定向到[http://site.co.za/component/docman/cat_view/388-documents-reports](http://site.co.za/component/docman/cat_view/388-documents-reports)

所以换句话说，所有包含 component/docman/cat_view 的 url 都需要重定向到 url 加上 docman 之后的第一个参数

这可以使用 .htaccess 文件和 mod rewrite 来完成吗？如果可以的话怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:41:09.350

是的，使用 301 重定向

见下文教程

```
http://www.phatz.com/301redirect.php 
```

# objective-c - iOS 应用程序和 jQuery Mobile 站点 - 仅当在本机 iPhone 应用程序中查看页面时才包含 JS 文件

> ID：11637151
> 
> 赞同：1
> 
> 时间：2012-07-24T18:34:43.067
> 
> 标签：objective-c, xcode, ios5, jquery-mobile, if-statement

我有一个使用 jQuery Mobile 构建的移动网站。我目前正在设计一个带有单个 webView 的 iOS 原生应用程序来显示这个移动网站。

**问题：**

如果在普通的移动浏览器中查看 jQuery 移动网页，我希望一切正常。**但是**，如果使用我正在设计的 iPhone 应用程序（不是 Safari.app）中的 webView 查看网页，我想在网页上添加一行额外的代码以引入一些自定义 JS。

**只有**在我的 iPhone 应用程序的 webView 中查看时，我才希望将其添加到页面中：

```
<script type="text/javascript" src="http://www.example.com/mobile/js/custom-jqm-defaults.js"></script> 
```

在加载 jQuery Mobile 之前，需要拉入此代码（[根据 jQuery mobile 文档）。](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)这可能吗？如果是这样，你能指出我正确的方向并给我一些代码吗？

**编辑**

我找到[了这个链接](https://stackoverflow.com/questions/10627509/detect-if-mobile-web-app-is-within-native-facebook-app)，Facebook 可以借此检测他们是否在应用程序中被查看。有没有另一种方法可以做到这一点显然不使用 FB API？这是他们的代码：

```
if (FB.UA.nativeApp()) {
  // Hide your credits stuff
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:44:47.763

您可以在 NSURLRequest 中更改用户代理，然后在您的服务器上检查该代理。

在应用程序端更改它很[容易](https://stackoverflow.com/questions/1532206/changing-the-useragent-of-nsurlconnection)。

# html - SharePoint CSS：不在 IE 上工作之后

> ID：11637153
> 
> 赞同：2
> 
> 时间：2012-07-24T18:34:51.983
> 
> 标签：html, css, sharepoint

所以我可以很容易地让 IE8 使用 :after ：

```
<!DOCTYPE html>
<html>
<style type="text/css">
a.styled:after
{
content:" HAHA! Business.";
color:red;
font-size:12pt;
}
</style>
<body>
Here's some text and stuff. <a href="google.com" class="styled">Here's a link.</a>
</body>
</html> 
```

如果我把它放在一个文本文档中并在 IE 中打开它，它会显示它应该显示的内容：“这是一个链接”后面是“哈哈！商业”，红色。当我尝试将完全相同的代码放入 SharePoint 内容编辑器 Web 部件时，它适用于我尝试过的所有浏览器，但 Internet Explorer 除外。使用 IE，当我使用 :after 时，链接后不会显示任何内容，但任何其他类型的样式都可以正常工作。是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:37:41.410

IE 不支持`:after`IE 8 之前的版本，即使使用 IE 8[也无法在没有 doctype 的情况下工作](http://css-tricks.com/browser-support-pseudo-elements/)。您还可以查看[此 CSS 选择器图表及其支持](http://www.quirksmode.org/css/contents.html)以获取更多信息。

既然你提到使用 IE8，我找不到它不应该工作的任何原因。您的 Sharepoint Web 部件中可能有一些其他内容可能会导致问题。

您可能还对[how-do-you-work-around-ie-not-supporting-after](https://stackoverflow.com/questions/813419/how-do-you-work-around-ie-not-supporting-after)或[why-is-sharepoint-dispaying-my-html-and-css-content-improperly](https://stackoverflow.com/questions/4261451/why-is-sharepoint-dispalying-my-html-and-css-content-improperly)感兴趣，这里有两个类似的问题堆栈溢出。

# iphone - 为 IOS 应用程序警报启用 LED 手电筒（无需在 iPhone 系统设置中启用）

> ID：11637158
> 
> 赞同：1
> 
> 时间：2012-07-24T18:35:09.627
> 
> 标签：iphone, ios, background, avcapturesession, avcapturedevice

所以这是我的问题：我的应用程序经常收到警报。我已经做到了，所以当警报到来时，他们有一个自定义的铃声和振动。我也希望能够让他们的 LED 灯在警报时闪烁。

我已经设置好了，如果这些警报在应用程序处于前台时出现，LED 闪烁和响铃/振动工作得非常好。但是，如果应用程序在后台时出现警报，我只能让响铃/振动工作。

我不希望用户必须在 iPhone 系统设置中启用它才能从所有应用程序中获取 LED 闪光警报。我使用了 inAppSettingsKit 并添加了用户是否需要 LED 闪光警报的设置首选项。但即使在后台调用了我的 LED 警报方法，LED 实际上并没有闪烁。这是因为 Apple 不允许您控制 LED，除非您在前台使用它？有谁知道解决方法？

这是我打开和关闭它的最简单的部分。我用不同的计时器和通知方法来控制它。定时器和通知在后台调用的方式与它们在前台的调用方式相同，但是 LED 只是在后台没有打开。

```
AVCaptureDevice *torched=[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
        [torched lockForConfiguration:nil];
        [torched setTorchMode:YES];
        [torched setFlashMode:YES];
        [torched unlockForConfiguration]; 
```

谢谢！

# c# - 在 Metro/Windows 8 .NET 4.5 中将图像转换为字符串（base64）

> ID：11637161
> 
> 赞同：3
> 
> 时间：2012-07-24T18:35:32.733
> 
> 标签：c#, image, windows-8, microsoft-metro

我需要将图片（存储在 Image 类型的对象中）转换为字符串以在 Metro 应用程序中存储（然后再转换回 Image 对象以进行显示）

我在 .NET 4.0 等中找到了很多将图像转换为 base64 字符串的答案，但在 4.5 中没有 System.Windows.Bitmap 命名空间（Image 类在 Windows.UI.Xaml.Media.Imaging 中）和在 4.0“Save()”中实现该命名空间的方法似乎不在 4.5 中......除非我找不到它。

[这里](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/011c2c24-ffc5-4be5-883b-2430267b33c8/)有一个这样做的例子，但就像我说的那样，它在 Metro 应用程序/.NET 4.5 中不起作用

有任何想法吗？

更多详细信息：执行此操作的方法将转换包含图像对象的实例字段（我使用了它的源属性，这是正确的吗？）并且需要将转换的结果字符串存储在实例字符串字段中。然后可以序列化整个对象，忽略 Image 字段，希望稍后反序列化并将字符串恢复到 Image 字段以供显示。到目前为止，我尝试使用 DataContractSerializer 从图像中序列化字符串，但它似乎不喜欢它。一旦我从图像中得到一个字符串，我就可以对其进行序列化，但这不是我以前做过的事情。

此外，似乎唯一正确的 .net 4.5 文档是此处的页面：http: [//msdn.microsoft.com/library/windows/apps/](http://msdn.microsoft.com/library/windows/apps/)

.net 4.5 的“正常外观”msdn 站点上的页面似乎并不总是在 Metro 应用程序中工作？（只是一个理论？）

**[解决了]**

我终于明白了！对于其他必须这样做的人，答案在这里：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/38c6cb85-7454-424f-ae94-32782c036567/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/38c6cb85-7454-424f-ae94-32782c036567/)

我做了这个

```
var reader = new DataReader(myMemoryStream.GetInputStreamAt(0));
var bytes  = new byte[myMemoryStream.Size];
await reader.LoadAsync((uint)myMemoryStream.Size);
reader.ReadBytes(bytes); 
```

在这个序列之后，字节数组`bytes`将包含来自流的数据，从那里我将一个字符串设置为

```
Convert.ToBase64String(bytes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:18:59.767

我终于明白了！对于其他必须这样做的人，答案在这里：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/38c6cb85-7454-424f-ae94-32782c036567/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/38c6cb85-7454-424f-ae94-32782c036567/)

我做了这个

```
var reader = new DataReader(myMemoryStream.GetInputStreamAt(0));
var bytes  = new byte[myMemoryStream.Size];
await reader.LoadAsync((uint)myMemoryStream.Size);
reader.ReadBytes(bytes); 
```

在这个序列之后，字节数组字节将包含来自流的数据，从那里我将一个字符串设置为

```
Convert.ToBase64String(bytes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:55:24.600

我不确定这一点，因为我没有在这里安装 .net 4.5，但我认为这可以工作：

您可以使用 BitmapSource.CopyPixels() 方法来提取图像的像素：

[http://msdn.microsoft.com/en-us/library/ms616043(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms616043(v=vs.110).aspx)

然后使用 Convert.ToBase64String() 进行转换。

此外，这里有一些有用的成像 HOW-TO：

[http://msdn.microsoft.com/en-us/library/ms750864(v=vs.110](http://msdn.microsoft.com/en-us/library/ms750864(v=vs.110) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:53:03.243

试试[`BitmapEncoder`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.imaging.bitmapencoder.aspx)。 [如何在此处创建 BitmapEncoder 的示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh465076.aspx#create_an_encoder_object_for_a_new_or_existing_image)。适当的命名空间是`Windows.Graphics.Imaging`.

`BitmapEncoder`给你一个编码器。然后，您可以使用它`GetPixelDataAsync(BitmapPixelFormat, BitmapAlphaMode, BitmapTransform, ExifOrientationMode, ColorManagementMode)`来获取您的像素数据。之后，您可以使用任何通用 C# base64 编码器。

（示例是 Javascript，但也应该适用于 C#，因为这些类存在于 C# 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T20:22:02.670

您应该存储图像的编码格式（比如JPEG）格式，解码回字节[]，创建一个MemoryStream，然后可以从流中创建Metro BitmapImage。

# sql-server - 将游标变量传递给查询

> ID：11637172
> 
> 赞同：1
> 
> 时间：2012-07-24T18:36:15.937
> 
> 标签：sql-server, oracle, tsql, cursor

我是一名试图学习 T-SQL 的 Oracle 开发人员。我有一张表，其中有一列（`table_name`）。我需要能够遍历所有行并找到给定表的所有列。然后我需要将它的结果输出到文件中。在 Oracle 中，以这种方式使用游标非常简单：

```
cursor my_curr is select table_name from my_table;
for x in my_curr loop
   select column_name from user_tab_columns
   where table_name = x.table_name;

   utl_file ..... (writing result to an OS file)
end loop; 
```

在 T-SQL 中，上述内容的等价物是什么？我将如何使用游标变量将其传递给查询？

谢谢，尤金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:47:21.823

为列结果和游标声明一个变量。

```
declare @name varchar(100)
declare my_curr cursor 
for select table_name from my_table; 
```

打开光标

```
open my_curr 
```

将第一行提取到变量中

```
fetch from my_curr into @name 
```

`@@Fetch_Status`是获取是否成功

```
while @@Fetch_Status=0
begin 
```

使用从游标中获取的变量，与系统表进行比较以获取列。较新版本的 SQL Server 也可以使用 Information_Schema，但这适用于所有版本

```
 select c.name from syscolumns c
         inner join sysobjects o on c.id = o.id
    where o.name = @name;  

   --utl_file ..... (writing result to an OS file) 
```

获取下一行

```
 fetch next from my_curr into @name

end 
```

释放光标

```
close my_curr
deallocate my_curr 
```

# git - 用自己的 fork 交换 git 子模块

> ID：11637175
> 
> 赞同：44
> 
> 时间：2012-07-24T18:36:30.140
> 
> 标签：git, github, fork, git-submodules

我在我的 git repo 中添加了一个子模块，如下所示：

```
$ git submodule add git://github.com/user/some-library some-library 
```

我已经决定要创建该库的一个分支来进行一些调整。我怎样才能交换那个子模块，让它指向我自己的 github fork？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-24T18:42:40.450

子模块存储在`.gitmodules`：

```
$ cat .gitmodules
[submodule "ext/google-maps"]
    path = ext/google-maps
    url = git://git.naquadah.org/google-maps.git 
```

如果您`url`使用文本编辑器进行编辑，则需要运行以下命令：

```
$ git submodule sync 
```

此更新`.git/config`包含此子模块列表的副本（您也可以手动编辑相关`[submodule]`部分）`.git/config`

可能有一种方法可以只使用`git`命令，尽管`submodule`系统似乎有点不完整（例如，请参阅[删除子模块的说明](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-22T21:34:31.577

我不知道这是真的多久，但即使在相当老的 git 1.8 子模块中也肯定有遥控器。所以，你可以做

```
cd some-library   # this is entering the submodule
git remote -v     # just to see what you have; I guess origin only
git remote add myrepo git-URL-of-the-fork
git checkout -b my_new_idea
git push -u myrepo my_new_idea 
```

现在，子模块可以与您的 fork 一起使用，而不是原来的 repo。你可以做正常`push, pull, rebase`等。当你的拉取请求被合并时，你可以用 normal 删除遥控器`git remote remove myrepo`。当然，关于使用子模块的所有其他警告都适用（例如，您必须将子模块的更改作为超级模块中的新提交提交）。

# java - 从控制器向 DAO 中注入变量

> ID：11637182
> 
> 赞同：1
> 
> 时间：2012-07-24T18:36:55.610
> 
> 标签：java, spring

我有扩展“GenericDAO”的 DAO 类

通用 dao 具有带有 getter 和 setter 的 LanguageId 变量。

我从会话中获得了我的语言 ID。

有什么方法可以直接设置我的语言 ID `genericDAO`。这样每次我使用 dao 类时，我都不必从控制器传递 languageId 吗？

最后我想要的是，我应该能够`getLanguageId()`在我的 dao 对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:27:18.940

通常 DAO 被设置为单例，因此所有不同的线程只使用一个实例。如果是这种情况，那么您不能为一个用户设置语言而不影响其他用户，并且将其作为方法参数传递是确保其他线程不会无意中获取错误语言 ID 的唯一安全方法. 所以你是否能做你想做的事取决于你的 DAO 有什么范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:00:52.303

DAO 的关键在于它们是**无状态**的，而会话代表一些**有状态**的信息。所有**有状态**的信息都应该通过方法的参数传递给 DAO。

所以，如果你仍然想在 DAO 中拥有 getLanguageId()，那么你注定要为每个会话创建 DAO 实例，并在创建过程中将 languageId 注入其中。

# php - shell_exec(); 在 PHP 中无法正常工作

> ID：11637184
> 
> 赞同：0
> 
> 时间：2012-07-24T18:37:05.277
> 
> 标签：php, shell, command, exec, shell-exec

我正在尝试通过 shell_exec(); 执行命令 但它什么也没做。我知道 shell_exec(); 已启用，因为这些工作完美：

```
echo shell_exec('which php');
echo shell_exec('ls'); 
```

他们确实输出正确。

问题是当我想执行这样的事情时：

```
shell_exec("php file.php var1 var2 > /dev/null &"); 
```

它什么也不做，但是当我通过计算机上的终端运行它时，它确实有效。我也试过用这样的完整路径来做：

```
shell_exec("/usr/bin/php /full/path/file.php var1 var2 > /dev/null &"); 
```

它不起作用，但再次......如果我通过终端计算机运行它，它就会起作用。

php.ini 安全模式已关闭，并且上面没有禁用的功能，所以我不知道会发生什么。是的，我可以访问 SSH 并获得一个专用 IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:46:29.597

尝试查看函数的返回码`$return_var`（函数的最后一个参数`system` `exec`）。`0`如果成功应该是这样。如果`127`可能是服务器上不允许使用命令行，或者您没有足够的权限从 PHP 脚本运行命令（这取决于执行脚本的用户/组）。否则函数只返回空的输出数组，就像没有发生好或坏的事情一样。

不久前我遇到了类似的情况，`ls`工作正常，但`wget`总是失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:54:16.287

您可能会收到权限被拒绝错误，尤其是在您尝试将输出重定向到`/dev/null`. 可能想考虑一个 cron 作业，但我不确定您为什么要重定向输出并在后台运行它。

# ajax - Ajax 请求忽略 ASP.NET MVC 应用程序 URL 中的虚拟应用程序子文件夹名称

> ID：11637185
> 
> 赞同：3
> 
> 时间：2012-07-24T18:37:07.107
> 
> 标签：ajax, asp.net-mvc, url-routing, asp.net-mvc-routing

我的应用程序位于服务器上一个单独的虚拟目录下。要访问我的 ASP.NET MVC 应用程序，用户必须访问：

```
http://server-dev/superApp 
```

我对忽略“superApp”目录部分的 Ajax/Json 服务器请求有疑问。每当发出 Ajax 请求时，Fiddler 都会显示 404，因为不是`http://server-dev/superApp/User/GetUsersJson`例如，而是`http://server-dev/User/GetUsersJson`被调用（注意缺少的 superApp 名称）。

Ajax 请求示例：

```
function GetUsers(id) {
    $.ajax({
        url: "/User/GetUsersJson/",
        data:{ id: id},
        datatype: 'json',
        type:'post',
        success: function (result) {
            ////Do stuff with returned result
        }        
    });      
} 
```

注册路线：

```
r.Match("User/GetUsersJson", "User", "GetUsersJson"); 
```

我应该在哪里查看以及可以更改哪些内容以确保我的应用程序虚拟文件夹始终包含在所有 URL 请求中？

ps 请注意，所有 Javascript/Ajax 逻辑都保存在单独的 .js 文件中，因此没有 RAZOR 语法可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:39:23.110

您是否尝试过使用 HTML 辅助方法？

```
url: "@Url.ACtion("GetUsersJson","User)" 
```

**EDIT** : As per the comment

You may get the Path name using the HTML Helper method and Keep that in a Global variable and access that in the external javascript file

In the view

```
<script type="text/javascript>
  var globalGetJSONPath='@Url.ACtion("GetUsersJson","User)';
</script> 
```

And now you can use it in the external file like this

```
 $.ajax({
        url: globalGetJSONPath,
        data:{ id: id},
        //remaining items....

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:40:48.330

I solved this stuff by passing variable to js that contains hostname+vdir. Because of heavy js url generation.
In other cases Shyju's answer is best way to solve this.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T18:43:08.553

No way to do it without some server-side code generation. Easiest thing would be defining global variable (sorry) holding you application root and initializing it somewhere in master page.

Javascript generation of route urls always was one of the messiest parts of asp.net mvc.

# google-app-engine - 在 AppEngine 数据存储区中的列表中使用列表

> ID：11637186
> 
> 赞同：1
> 
> 时间：2012-07-24T18:37:08.113
> 
> 标签：google-app-engine, arraylist, google-cloud-datastore

是否可以将数组列表存储在 AppEngine 数据存储中的数组列表中？我从 2010 年发现了这个主题：推荐使用 pickle[的列表的数据存储列表](https://stackoverflow.com/questions/2028355/datastore-list-of-lists)，但我想使用尽可能少的包。

AppEngine 的数据存储区是否有任何更新允许这样做？我们在arraylist 中的arraylist 有5 层左右，如果这很重要的话。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:41:52.047

不，没有添加任何内容可以使这变得更容易。我认为我在您引用的问题中的建议仍然有效。

# grails - 获取上传文件grails的原始文件名

> ID：11637187
> 
> 赞同：6
> 
> 时间：2012-07-24T18:37:14.530
> 
> 标签：grails, file-upload

我正在使用 request.getFile("file") 获取上传的文件，其中“file”是我的 gsp 文件中文件输入元素的名称。我能够很好地解析这个文件，但是当我尝试获取文件的原始名称时，我遇到了以下错误

方法没有签名：org.springframework.web.multipart.commons.CommonsMultipartFile.getOriginalFileName() 适用于参数类型：() 值：[] 可能的解决方案：getOriginalFilename()

这是我的代码：

```
def f = request.getFile("file")
def name = f.getOriginalFileName() 
```

为什么我不能在 'f' 上调用 getOriginalFileName() 方法，我认为 request.getFile() 返回了一个 MultipartFile 对象

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:00:02.333

异常表明这是方法调用`f.getOriginalFileName()`->上的大写问题`f.getOriginalFilename()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-12T07:58:59.867

这是我的代码，对我有用：

```
def uploadedFileName = request.getFile("file")    
def fileName = uploadedFileName.originalFilename 
```

# cakephp - 管理员和会员的 cakephp 通用操作

> ID：11637188
> 
> 赞同：1
> 
> 时间：2012-07-24T18:37:15.460
> 
> 标签：cakephp

对于我的项目，我有三种类型的用户。管理员、成员和其他人。管理员和成员都可以执行某些功能。

我知道如何进行路由和检查管理员，以及调用管理员方法。但我不确定如何在用户类型之间共享功能。

有什么提示吗？

最好的，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:38:00.547

您可以简单地使用 Auth 组件来完成。`Routing.prefixes = array('admin', 'manager');`在您的 app/Config/core.php 文件中取消注释 。

借助[此链接](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)设置 Auth 组件。现在，如果您的控制器方法与两个用户角色“admin”和“manager”通用，那么为任何角色定义一个方法并在另一个方法中调用它很简单。

让我们在你的 UsersController.php 中说

```
public function admin_list()
{
  /*.... define here ..... */
}
public function manager_list()
{
    $this->admin_list();
} 
```

如果您想在经理用户角色的用户列表中显示其他内容，此技术也将帮助您进行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:55:14.817

使用 Auth 组件中的 isAuthorized() 。假设您的用户在表用户中。在你的 AppController.php 放：

```
public function isAuthorized($user){
     return true;
} 
```

在您的 UsersController 中，假设您希望 method1 和 method2 仅对管理员和成员可见，而对其他人不可见。

```
public function isAuthorized($user){
     if(in_array($this->action, array('method1', 'method2'))){
          if($user['role'] != 'admin' || $user['role'] != 'user'){
               return false;
          }
     }
     return true;
} 
```

当然，在 AppController 中包含您的 AuthComponent：

```
public $components = array('Session', 'Auth'); 
```

如果您还有其他问题，请随时提问。:)

# asp-classic - 可以在服务器上的 html 或 asp 页面中查找和替换吗？

> ID：11637195
> 
> 赞同：-1
> 
> 时间：2012-07-24T18:37:37.370
> 
> 标签：asp-classic

我想知道是否可以在服务器上的 .asp（经典）页面中自动查找和替换？这就是我想要做的：在经典的asp中，我在我的服务器上复制一个文件夹并将其粘贴到我的服务器上的另一个位置（这应该正常工作），在那个文件夹中我有3个.asp页面，在那些我想要的页面中将 userId=1 “查找并替换”为我从数据库中获取的其他一些用户 ID。

这可能与经典的 asp 或 jquery 吗？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:42:10.520

恐怕你的问题看起来很模糊。当您尝试查找替换字符串时，您是否希望将“userId=1”替换为“userId=X”，其中 X 是在数据库中查找的值？

如果是这样，您可能正在考虑错误的问题，而不是尝试查找替换文件，您不能编写一个与数据库通信的函数，而不是尝试在文件中查找/替换，那么您只需使用您的函数

```
userId=myfunction() 
```

使用 myFunction 返回用户的 ID。这样，您就不会遇到一些奇怪的字符串替换问题，您可能会或可能不会根据上下文知道它们的含义。

如果您真的想查找替换，那么我建议您编写一个可以挂钩`System.IO.FileSystemWatcher`函数并监视目录的程序，然后打开文件，正则表达式搜索您的数据并替换其中的值。您可以找到一个使用[FileSystemWatercer 在这里](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6ec4b09e-da13-4aea-95db-b3e822fc6b5b/)（帖子 3）。

# osx-snow-leopard - 有人知道如何在 Snow Leopard 中创建 1024x1024 icns 图标吗？Apple 现在需要 1024x1024 图标，而且它们只是 Lion

> ID：11637201
> 
> 赞同：0
> 
> 时间：2012-07-24T18:37:53.420
> 
> 标签：osx-snow-leopard

我无法将我的应用程序的快速更新提交到 mac appstore，因为苹果现在要求每个人都提交一个 1024x1024 icns 图标，该图标仅适用于 Lion。有人知道在雪豹中创建这些图标的方法吗？阅读另一个问题，有人用十六进制编辑做了它，如果有人提供制作这些图标的方法，我将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:48:52.337

我在 Snow Leopard 上也遇到过关于创建包含 1024x1024 图像的 icns 文件的问题。

我已经能够使用 png2icns 实用程序生成一个。它带有 libicns，安装起来相当简单。

您首先需要在以下网址下载 Jasper：http: [//www.ece.uvic.ca/~frodo/jasper/](http://www.ece.uvic.ca/~frodo/jasper/)

你还需要libpng。我在软百科上找到的。

首先构建 jasper，然后构建 libpng，然后构建 libicns。为此，对于它们中的每一个，我只需将它们添加到 cd 到它们解压的目录中，然后从命令工具中键入命令：

```
./configure;
make;
sudo make install; 
```

然后应该在命令行上有可用的 png2icns。要使用它，只需 cd 到包含图像的目录并输入：png2icns iconfile.icns image1.png image2.png......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T17:14:15.063

**虽然在 Snow Leopard Icon Composer 2.2**上确实可以保存具有 1024x1024 像素图标的文件，但如果在 xcodeproject 中使用这些 .icns 文件，该应用程序将被 App Store 拒绝。

目前，我发现唯一可行的解​​决方案是在 Snow Leopard 上创建一个 .iconset 文件夹，将 .iconset 移动到 Lion 机器上，使用 Lion 上的 icnsutil 将 iconset 转换为 .icns。然后将 .icns 文件移回 Snow Leopard 并包含在 xcode 构建中。构建和存档。然后共享并保存到磁盘：将 .pkg 文件移动到 Lion 并使用 Application Loader 上传。

这对我来说很成功。

我目前正在调查 libicns.sourceforge.net 的使用。如果有人提出另一种解决方案，将不胜感激。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:39:28.793

我构建了一个应用程序来简化此操作。将您的图标或图标拖到应用程序中，它会为您构建 .icns 文件。

如果你只有一个 512x512 的图标，那么它会自动放大到 1024x1024。

icns 生成器[https://itunes.apple.com/gb/app/icns-builder/id554660130?mt=12](https://itunes.apple.com/gb/app/icns-builder/id554660130?mt=12)

它只是命令行工具的一个包装器，但比手动缩放自己的图像要容易得多

# ember.js - ember.js 是否鼓励过多的控制器？

> ID：11637202
> 
> 赞同：16
> 
> 时间：2012-07-24T18:37:56.227
> 
> 标签：ember.js

我正在尝试了解构建 ember.js 应用程序的最佳实践。这张来自tomdale的幻灯片：

[https://speakerdeck.com/u/tomdale/p/emberjs-more-than-meets-the-eye?slide=55](https://speakerdeck.com/u/tomdale/p/emberjs-more-than-meets-the-eye?slide=55)

简明扼要地描述了如何分配应用程序逻辑。但是，在尝试遵循这些准则时，我发现了一些问题：

1.  路由器变得太大。根据介绍，路由器“响应来自视图的事件”，但是当有几十个视图时，这会导致大量代码。
2.  有大量的控制器。在 Rails 应用程序中，CRUD 操作通常驻留在同一个控制器中，但是对于 ember 应用程序，似乎应该有一个控制器来列出记录、一个控制器来查看记录、一个控制器来创建记录等。

感觉不是很干，因为我最终在控制器、视图和车把模板之间有这么多文件，每个模板只有几行代码。

我正在尝试确定问题是否在于我错误地应用了指南，或者这些指南是否仅适用于琐碎的应用程序。

有没有人有任何建议 - 特别是关于如何管理路由器的增长？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T16:58:47.160

我认为说 Ember 鼓励太多控制器就像说 Javascript 鼓励太多功能一样。是的，你可以疯狂地扩散任何一个。或者你可以做相反的事情，让它完全按照你的需要工作。一般来说，请始终记住，您的应用程序应该完全按照它需要的那样复杂，而且不能再复杂了。你不需要仅仅因为某个著名的程序员使用了某种架构或模式，甚至因为它似乎是“Ember 方式”。甚至像关注点分离、MVC 等“通用的好东西”也是您应该尝试完全理解的原则和模型，然后在它们满足您需求的范围内使用它们。我认为，出于正确的原因有选择地打破规则和模式的能力比对编程之神教条的盲目奉献更能说明一个伟大的黑客的标志。这是一门手艺，不是宗教。（但是 YMMV。也许有一个特殊的地狱圈是为像我这样的程序员保留的。我打赌它。）

具体到 Ember，我倾向于围绕我的数据模型和/或围绕特定用户工作流使用控制器，而不是围绕每个视图。然后使用路由/状态管理器作为视图之间的粘合剂，我通常在视图上使用事件管理器来处理每个视图内的浏览器事件，包括向路由器发送指令。因此，如果我有一个围绕客户和产品的应用程序，我将为每个应用程序设置一个控制器，就像我在 Rails 中所做的那样。这将导致每个控制器拥有比某些人喜欢在一个地方拥有的更多功能和计算属性。这也意味着我不一定能在另一个上下文中重用我的视图，因为它们是硬连接到控制器的。是的，这是糟糕的关注点分离。但是，如果它导致没有回报的复杂性，那也不是绝对的好。

同样关于控制器的主题，我认为人们特别倾向于为您的主要数据模型的子集不必要地增加控制器。假设您有一个产品控制器，并且您希望将给定用户正在收集的产品存储在比较工具中。大多数人似乎为此创建了一个新控制器，但是将它们推送到 Products 控制器或 Customers 控制器或 Customer 模型中的附加数组或其他 Enumerable 是完全合法的。这使依赖于相同功能和属性的对象保持在更近的范围内。这`content`每个控制器中的对象是，AFAIK，只是另一个 Enumerable。它有一些对控制器的特殊隐式引用，但并不神奇。我没有发现不使用其他功能的原因。它们与绑定、with`#each`等也一样有效。

类似地，有些人只是喜欢将他们的应用程序分解成一百万个文件，将它们嵌套在文件结构中的 15 层等。如果这有助于您可视化底层逻辑，并让其他人清楚地了解，那么您将获得更多的权力你的团队。对我来说，它只会让我在只有 1-3 人的工程团队的项目上放慢速度。人们还倾向于复制他们熟悉的其他 MVC 系统（如 Rails）的基于文件的样式，其中文件是分离视图和其他逻辑对象的必要显式结构。这成为信条和根深蒂固的习惯。但是在 Javascript MVC 中，我发现它通常没有这样的目的，并且对于隐式设计来说是严格冗余的。我倾向于为我的整个 Ember 应用程序使用一个精心组织的文件（将其与任何其他非库 JS 分开），有很多缩进和嵌套，这有助于我可视化层次结构。无论您做什么，就文件而言，它在运行时都是一样的，只要您在正确的时间将它们全部交付到正确的位置。使用 Ember 和 JS，文件结构只满足您团队的需求，仅此而已。相应地校准。

（重要警告：如果您*确实*使用了一百万个文件，则最好使用预编译器将它们一起显示以交付给用户，否则您将在单独交付所有这些文件时承受巨大的延迟.)

（另一个重要的警告：对于一个大型团队或[像 GitHub 这样的快速每日发布计划](http://scottchacon.com/2011/08/31/github-flow.html)，基于文件的逻辑分离可以使版本控制比在同一个文件中进行大量合并更容易，因为合并工具可能会混淆。再次，这是管理和监控您的人工流程以及仔细进行合并的问题，而不是您的 JS 框架强加的技术要求。）

（最后重要的警告：再一次，有时技术要求和人/程序要求之间的区别是模糊的。如果你破坏了开发人员的大脑，你也往往会拥有一个坏掉的应用程序。所以，做对人和流程有用的事情你必须处理它的构建。）

正如我之前所说，YMMV。我不是程序员之神，从我的声誉分数可以看出，所以你可以随意无视我。但我支持这样的想法，即您应该只使用尽可能多的复杂性、尽可能多的文件结构和尽可能多的高级抽象（如路由，这实际上对于用途有限的单页应用程序来说可能是多余的）。您的需求; 仅此而已。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T19:24:28.637

我认为我们正在开发一个相当大的 ember 应用程序（目前大约有 45 个视图）。它意味着几乎相同数量的控制器和模板）。事实上，我们的路由器非常大，但我们可以通过将其拆分为多个文件来轻松管理它。基本上，每个文件代表应用程序的一个屏幕，并负责维护一个功能集。这是路由器的摘录：

```
Router = Ember.Router.extend({
  root: Ember.Route.extend({

  index: Ember.Route.extend({
    route: '/',

  unlogged: Ember.Route.extend({
    route: 'welcome',

    connectOutlets: function (router) {
      var applicationController = router.get('applicationController');
      applicationController.connectOutlet('welcome');
    }
  }),

  logged: Ember.Route.extend({
    route: 'app',

    projects: Ember.Route.extend({
      route: 'projects',

      collection: ProjectsRoute,
      member: ProjectRoute,

      showProjects: function (router) {
        router.transitionTo('projects.collection');
      }
    })
  })
}) 
```

然后它在`ProjectRoute`. 每次在一条路线中似乎有很多功能时，我们都会将其拆分。您甚至可以重新打开一个路由来扩展它，并在其中插入其他功能。

```
ProjectState.reopen({

  scenarios: ScenariosRoute,

  showScenarios: function (router) {
    router.transitionTo('scenarios.collection');
  }
}); 
```

这意味着更多的文件，但如果组织良好，维护起来并不难，因为您很少同时处理所有功能。通常，我不会同时打开 4 个文件（视图、控制器、模板、路由）

我不知道这是否是最佳做法，但对我们来说效果很好

# c# - 使用win api模拟鼠标点击warcraft3按钮

> ID：11637208
> 
> 赞同：3
> 
> 时间：2012-07-24T18:38:21.387
> 
> 标签：c#, winapi

我想知道魔兽争霸3游戏的任何按钮是否可以处理？试图通过 spy++ 和 Control Viewer 获取它，但只有主 WC3 窗口可用。
那么有什么想法或建议吗？

我正在尝试模拟单击按钮。我认为可以使用按钮的坐标来做到这一点，但我不确定是否可以为所有屏幕分辨率计算这样的坐标。如果我在某个地方弄错了——请纠正我！

提前谢谢大家！

***添加***

WIN API

```
int x = 700;
int y = 70;
int lParam = ((x << 16) | (y & 0xffff));
int parentWindow = FindWindow("Warcraft III", "Warcraft III");
SendMessage(parentWindow, WM_LBUTTONDOWN, IntPtr.Zero, new IntPtr(lParam));
SendMessage(parentWindow, WM_LBUTTONUP, IntPtr.Zero, new IntPtr(lParam)); 
```

这样的代码将按下在我离开魔兽争霸 3 窗口后保持活动状态的任何按钮。

直接输入

```
public void testMouse()
        {
            INPUT input_down = new INPUT();
            input_down.mi.dx = 700;
            input_down.mi.dy = 70;
            input_down.mi.mouseData = 0;
            input_down.mi.dwFlags = (int)MOUSEEVENTF.LEFTDOWN;

            INPUT input_up = input_down;
            input_up.mi.dwFlags = (int)MOUSEEVENTF.LEFTUP;

            INPUT[] input = { input_down, input_up };
            SendInput(2, input, Marshal.SizeOf(input_down));
        } 
```

这样的代码什么都不做。

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:40:56.510

我相信魔兽争霸III使用DirectX。所以你应该寻找如何欺骗 DirectX 输入，而不是 Win32 API。

相关问题：

*   [directx鼠标点击模拟](https://stackoverflow.com/questions/475860/directx-mouse-click-simulation)
*   [在 3D 游戏中模拟鼠标移动？](https://stackoverflow.com/questions/5302473/simulate-mouse-move-in-3d-games)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T15:12:54.407

使用 spy++ 我发现，当我们做一个普通的点击时，魔兽会得到 PostMessage() 和 MK_BUTTON 作为 wParam。所以要在魔兽中模拟鼠标点击，你需要发送 PostMessage() 而不是 SendMessage()。

这是代码：

```
 IntPtr parentWindow = (IntPtr)WinApi.FindWindow("Warcraft III", "Warcraft III");
        int X = 770;
        int Y = 127;
        Point temp = new Point(X, Y);
        IntPtr lParam = (IntPtr)((temp.Y << 16) | temp.X);
        IntPtr wParam = IntPtr.Zero;
        WinApi.PostMessage(parentWindow, WM_LBUTTONDOWN, (IntPtr)MK_LBUTTON, lParam);
        WinApi.PostMessage(parentWindow, WM_LBUTTONUP, wParam, lParam); 
```

但是对于所有屏幕分辨率的按钮的通用坐标问题仍然存在。

# facebook-graph-api - 如何在新页面中“生成”相册

> ID：11637212
> 
> 赞同：1
> 
> 时间：2012-07-24T18:38:37.820
> 
> 标签：facebook-graph-api, facebook-wall, koala

我正在尝试将图片发布到客户的页面。页面中可能有也可能没有“Wall Photos”相册。

在没有预先存在的“墙照片”相册的情况下，我将如何创建/请求创建墙相册？

我正在使用考拉，我可以创建相册，但我无法创建 type = "wall" 的相册。

这是我用来创建/查找专辑的代码：

```
def get_photo_album(facebook_id)

  # Looking for a pre-existing WALL PHOTO album
  p "============= Getting Wall Photos album for fbid #{facebook_id}"
  album = get_album facebook_id, 'Wall Photos'

  unless album
    p ' ======= Album FAIL 1 - getting Photos '
    album = get_album facebook_id, FALLBACK_ALBUM_NAME
    unless album
      p ' ========== Album FAIL 2 - MAKING Phtoos '
      @graph_client.put_object facebook_id, 'albums', 'name' => FALLBACK_ALBUM_NAME

      sleep 3 # wait 3 seconds to let facebook make and fiddle with new album

      album = get_album facebook_id, FALLBACK_ALBUM_NAME
      unless album
        p ' ##################### UTTER ALBUM FAIL '
        raise "Cannot use alternative photo album"
      end
    end
  end

  if album && album.length > 0
    album
  else
    # ensure that there is an album.
    raise "Cannot use alternative photo album"
  end
end

def get_album(facebook_id, name)

  params = {'name' => name};

  albums = @graph_client.get_connections(facebook_id, "albums", params)

  p "Found #{albums ? albums.length : 0} albums named #{name} for fbid #{facebook_id}"
  albums = albums.reject do |a|
    a['name'] != name
  end
  p "Found #{albums ? albums.length : 0} albums named #{name} for fbid #{facebook_id} AFTER filtering for name"
  pp albums

  albums.length >0 ? albums[0] : nil
end 
```

结尾

这是我用来放置图片本身的考拉代码

```
def put_image(facebook_id, params)
  params = sanitize_params(params)
  params = encode_necessary_params(params)

  picture = URI.decode(params['picture'])

  photo_album = get_photo_album(facebook_id)
  photo_album_id = photo_album['id']

  params = params.reject do |key, value|
    key == 'metadata_type'
  end

  p ' -------------------------------------- PUT PICTURE ----------------------------'
  p "fbid:#{facebook_id}, message: #{params['message']}, picture: #{picture}"
  p ' -------------------------------------- PUT PICTURE ----------------------------'

  out = @graph_client.put_picture picture, {:message => params['message']}, photo_album_id
  Statsd.increment("posts")
  out
rescue Exception => ex

  handle_error(ex)

end 
```

我尝试了几种变体，包括：

*   将 'type' => 'wall' 放入 @graph_client.put_object 参数中：根本不发布图像
*   创建名为“Wall Photos”的相册 - 相册出现，但帖子看起来不像墙帖。

明确一点：**最终目标是让这张专辑的所有帖子都有“大”预览 - 完整的列宽，而不是平铺 1 英寸的预览。**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:10:27.937

您尝试做的事情是不可能的 - Wall Photos 相册是一个特殊相册，它是从发布到 feed 的照片生成的，并且没有 API 可用于以这种方式发布照片 - 如果您发布到 /photos他们进入专门为应用程序制作的专辑。

然而，一切都没有丢失。如果您愿意接受更新的功能，您将能够实现在 Feed 中包含大照片的目标，同时还可以为您的应用实现更大的病毒式传播潜力。答案是开放图形操作。特别[是 Open Graph 中用户生成的照片](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

这个过程相对简单：

1.  为您的应用程序创建一个 Open Graph 操作和对象（从该特定应用程序的开发者应用程序仪表板执行此操作），这可以是任何内容，具体取决于您的应用程序的功能，但是，例如，Instagram 使用“took”作为他们的 OG 操作和“一张照片”作为他们的 OG 对象。这意味着来自该应用程序的帖子看起来像“马修用 Instagram 拍了一张照片”并显示下面的照片。您要使用哪个操作取决于您。
2.  `publish_actions`如果您还没有，请向您的应用用户请求许可。
3.  进行 API 调用以：

`https://graph.facebook.com/me/YOURAPPNAMESPACE:YOURACTION? YOUROBJECTTYPE=URLWHEREYOUROGOBJECTISLOCATED& image[0][url]=URLOFPHOTOYOUWANTTOADD& image[0][user_generated]=true`

您还需要使用该用户的访问令牌签署此 API 调用，或者我相信，如果您有该用户的 publish_actions，您可以对 /USERID 而不是 /me 进行上述调用，并使用您的应用程序的访问令牌和它会起作用的。

正如您从[文档](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)中看到的那样，这将为您提供您所追求的全尺寸照片，并且通过 Open Graph 操作创建它，如果您合并诸如 OG 操作链接、经过身份验证的推荐等额外内容，则可以产生大量额外的病毒式传播等等

# visual-studio-2010 - SSRS Visual Studio 2010 报表服务器项目模板

> ID：11637214
> 
> 赞同：0
> 
> 时间：2012-07-24T18:38:53.577
> 
> 标签：visual-studio-2010, reporting-services

在哪里下载 Visual Studio 2010 的 SSRS（SQL Server 报告服务器）项目模板？我已经下载了 Sql Server Data Tools ( [http://msdn.microsoft.com/en-us/data/tools.aspx](http://msdn.microsoft.com/en-us/data/tools.aspx) ) 并安装了它，但是我在 VS 2010 中没有看到项目模板

![在此处输入图像描述](../Images/43aef7cfe380526171476e6286fadbc9.png)

# .net - 显示在菜单顶部的选择框中的选项

> ID：11637218
> 
> 赞同：2
> 
> 时间：2012-07-24T18:39:07.987
> 
> 标签：.net, html, css

我有一个*.Net*应用程序，它使用*skmMenu*控件来管理菜单下拉菜单。菜单正下方是一个***选择***框。如果您单击选择框，选项会弹出并保持显示，直到您单击关闭或选择一个。当它们显示时，如果您将鼠标悬停在菜单上，下拉菜单会显示，但会部分隐藏在**选择框的**选项后面。

我有选择框`z-index set`和`-1`菜单*下拉*菜单`z-index set`。`99`我不知道该怎么做才能让菜单显示在所有内容之上。

感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:45:06.977

您可以将选择菜单的 CSS 属性设置为：

```
display: none; 
```

当下拉悬停时，然后将其再次设置为可见。

# c# - c#空字符串？

> ID：11637219
> 
> 赞同：0
> 
> 时间：2012-07-24T18:39:09.373
> 
> 标签：c#, operator-precedence, null-coalescing-operator

我有以下内容：

```
string Name = name.First + " "  +  name.Last; 
```

这返回`Tom Jones`就好了。

如果 name.First 可能为 null 或 name.Last 可能为 null，我有以下内容：

```
string SpeakerName = name.First ?? string.Empty + " "  +  name.Last ?? string.Empty; 
```

奇怪的是它只返回`Tom`。为什么会这样，我该如何修复它，`if null`使其默认为空字符串的名字或姓氏？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T18:40:12.203

因为 ?? 的相对优先级 和 + 运算符。尝试这个：

```
string SpeakerName = (name.First ?? "") + " " + (name.Last ?? ""); 
```

您的原始示例正在评估，就好像它是：

```
string SpeakerName = name.First ?? ("" + " "  +  (name.Last ?? "")); 
```

另外，请在此处阅读 Jon 的回答：[C# null-coalescing (??) 运算符的运算符优先级是什么？](https://stackoverflow.com/questions/511093/what-is-the-operator-precedence-of-c-sharp-null-coalescing-operator?rq=1)

正如他在那里建议的那样，这也应该有效：

```
string SpeakerName = name.First + " " + name.Last; 
```

因为这编译为@LB下面的答案，减去修剪：

```
string SpeakerName = String.Format("{0} {1}", name.First, name.Last) 
```

编辑：

您还要求 first 和 last 都 == null 使结果为空字符串。通常，这可以通过调用`.Trim()`结果来解决，但这并不完全等效。例如，如果名称不为空，您可能出于某种原因*需要前导或尾随空格，例如“Fred”+“Astair”=>“Fred Astair”。*我们都认为你会想要修剪这些。如果你不这样做，那么我建议使用条件：

```
string SpeakerName = name.First + " " + name.Last;
SpeakerName = SpeakerName == " " ? String.Empty : SpeakerName; 
```

如果您从不想要前导或尾随空格，只需`.Trim()`像 @LB 一样添加

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T18:42:13.060

```
string SpeakerName = String.Format("{0} {1}", name.First, name.Last).Trim(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T18:43:54.707

```
string SpeakerName = name.First != null && name.Last != null 
                     ? string.Format("{0} {1}", name.First, name.Last) 
                     : string.Empty; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-24T18:55:10.893

```
string fullName = (name.First + " "  +  name.Last).Trim(); 
```

这适用于其中一个或两个为空，并且不会返回带有前导、尾随或只有空格的字符串。

# php - ion_auth 在 HTTP 位置添加不必要的 index.php

> ID：11637220
> 
> 赞同：1
> 
> 时间：2012-07-24T18:39:12.620
> 
> 标签：php, codeigniter, iis-7, ion-auth

最近在我的 CI 项目中设置了 ion_auth。在大多数情况下，一切都运行良好。但是，当用户退出网站时，他们会被重定向到

> http://*网站*/index.php/auth/login

而不是预期的

> http://*网站*/auth/login

地点。这会导致登录时出现问题，因为登录后给出的位置是

> http://*网站*/index.php/*网站*

这是一个无效的位置。

服务器是 IIS7 而不是 Apache。在站点根目录的 web.config 中使用以下配置：

```
<system.webServer>
    <directoryBrowse enabled="true" />
    <defaultDocument>
        <files>
            <add value="index.php" />
        </files>
    </defaultDocument> 
    <rewrite>
        <rules>
            <rule name="Imported Rule 1" stopProcessing="true">
                <match url="^(.*)" ignoreCase="false" />
                <conditions logicalGrouping="MatchAny">
                    <add input="{QUERY_STRING}" pattern="base64_encode.*\(.*\)" ignoreCase="false" />
                    <add input="{QUERY_STRING}" pattern="(\&lt;|%3C).*script.*(\>|%3E)" />
                    <add input="{QUERY_STRING}" pattern="GLOBALS(=|\[|\%[0-9A-Z]{0,2})" ignoreCase="false" />
                    <add input="{QUERY_STRING}" pattern="_REQUEST(=|\[|\%[0-9A-Z]{0,2})" ignoreCase="false" />
                </conditions>
                <action type="CustomResponse" url="index.php" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
            </rule>
            <rule name="Imported Rule 2">
                <match url="(.*)" ignoreCase="false" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                    <add input="{URL}" pattern="^/index.php" ignoreCase="true" negate="true" />
                    <add input="{URL}" pattern="(/component/)" ignoreCase="false" negate="true" />
                    <add input="{URL}" pattern="(/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$" />
                </conditions>
                <action type="Rewrite" url="index.php" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:51:34.900

您是否`index.php`从该配置项中删除了字符串（在 application/config/config.php 中）？

```
$config['index_page'] = 'index.php'; 
```

应该

```
$config['index_page'] = ''; 
```

重定向和 uri 生成基于此值。

# php - 在php中加载html邮件文件

> ID：11637224
> 
> 赞同：1
> 
> 时间：2012-07-24T18:39:24.107
> 
> 标签：php, html, email

我在一个 html 文件中实现了一个 html 电子邮件。我有一个使用`PHPMailer`该类发送电子邮件的 php 文件。我想要实现的是，我在 html 中有一些应该更改的文本取决于我发送电子邮件的人。

这是发送电子邮件的 php 文件

```
<?php
    // get variables
    $contact_name = addslashes($_GET['contact_name']);
    $contact_phone = addslashes($_GET['contact_phone']);
    $contact_email = addslashes($_GET['contact_email']);
    $contact_message = addslashes($_GET['contact_message']);

    // send mail
    require("class.phpmailer.php");
    $mailer = new PHPMailer();
    $mailer->IsSMTP();
    $mailer->Host = 'ssl://smtp.gmail.com:465';
    $mailer->SMTPAuth = TRUE;
    $mailer->Username = 'danyel.p@gmail.com';
    $mailer->Password = 'mypass';
    $mailer->From = 'contact_email';
    $mailer->FromName = 'PS Contact';
    $mailer->Subject = $contact_name;
    $mailer->AddAddress('pdaniel@gmail.com');
    $mailer->Body = $contact_message;
    if($mailer->Send())
        echo 'ok';
?> 
```

以及包含一个简单的 html 邮件的 html 文件，该邮件使用表格和它需要的所有标准实现。

我想问比我更勇敢的人，这是实现这一目标的最佳方法。:)

提前谢谢你，丹尼尔！

编辑：现在，在 $mailer->Body 我有 $contact_message 变量作为文本电子邮件。但我想在那个正文中加载一个包含 html 电子邮件的 html 文件，我想以某种方式更改 html 的正文使用此 $contact_message 变量中的文本发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:53:31.840

一种简单的方法是在您的 html 文件中添加特殊标记，这些标记将被调用者替换。例如，假设您有两个可能动态更改内容的变量`name`，`surname`然后在您的 html: 中放入类似的内容`%%NAME%%`，`%%SURNAME%%`然后在调用脚本中简单地：

```
$html = str_replace("%%NAME%%", $name, $html);
$html = str_replace("%%SURNAME%%", $surname, $html); 
```

或者通过嵌套上面的两个：

```
$html = str_replace("%%NAME%%", $name, str_replace("%%SURNAME%%", $surname, $html)); 
```

**编辑** 如果你有很多变量，一个更优雅的解决方案：定义一个关联数组来保存你的*针*和*替换*它们：

```
$myReplacements = array ( "%%NAME%%"    => $name,
                          "%%SURNAME%%" => $surname
); 
```

并使用循环来实现它：

```
foreach ($myReplacements as $needle => $replacement)
   $html = str_replace($needle, $replacement, $html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:47:28.603

如果我建立一个网站，我通常使用模板引擎，比如 Smarty... 你可以将你的 html 邮件写在 smarty 模板文件中。然后您可以根据标准自动添加想要的文本。只需将正确的值分配给模板引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:14:06.023

要回答您的编辑：

```
function renderHtmlEmail($body) {
    ob_start();
    include ('my_html_email.php');
    return ob_get_clean();
} 
```

在您的`my_html_email.php`文件中，您将拥有如下内容：

```
<html>
    <body>
        <p>....<p>
        <!-- the body -->
        <?php echo $body; ?>
    </body>
</html> 
```

和

```
 $mailer->Body = renderHtmlEmail($contact_message); 
```

`function renderHtmlEmail($viewVars)`如果您需要将其他变量传递给布局/模板文件，请将参数添加到该方法，或者像这样在函数内部传递关联数组`extract($viewVars);`

然后，您将能够在模板中使用这些变量，例如。`Dear <?php echo $to; ?>,`

如果还没有，您可能必须将 html 文件从 .html 更改为 .php。

也就是说，如果我正确理解了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T18:45:24.340

根据您要查看的电子邮件创建条件语句。然后将其包含在模板化的 php html 电子邮件文本中。

您还可以将更改的值传递给将实现上述功能的函数。

# sql - 复杂的内连接

> ID：11637226
> 
> 赞同：1
> 
> 时间：2012-07-24T18:39:29.007
> 
> 标签：sql

我有两张桌子，`t1`和`t2`。`t1`包含字段`file_id`和。 包含字段和。我想要做的是介于以下条件之间：`start``end``t2``start``end``loc``inner join``t1``t2`

```
t1.start >= t2.start AND t1.end <= t2.end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:41:54.540

通过加入这些标准

```
 Select * from
 t1 inner join t2
    on t1.start >= t2.start AND t1.end <= t2.end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:41:46.457

好吧，你基本上拥有它：

```
select <whatever>
from t1 join
     t2
     on t1.start >= t2.start and t1.end <= t2.end 
```

你还有什么需要的吗？

# grails - 如何在 AWS Elastic Beanstalk 中为多个 grails 环境使用单个 .war？

> ID：11637229
> 
> 赞同：3
> 
> 时间：2012-07-24T18:40:02.657
> 
> 标签：grails, amazon-web-services, environment-variables, amazon-elastic-beanstalk

我在 Elastic Beanstalk 中运行我的 Grails 应用程序的多个环境。不必为不同的环境构建和上传不同的 .war 文件将节省大量时间（我将所有环境差异作为“容器”配置区域中的系统属性传入，因此没有外部配置文件） . 根据这篇文章[http://mrhaki.blogspot.ca/2011/02/grails-goodness-one-war-to-rule-them.html](http://mrhaki.blogspot.ca/2011/02/grails-goodness-one-war-to-rule-them.html)，可以使用单个 .war 并通过传递动态设置环境grails.env 属性，但似乎不可能这样做，因为 beanstalk 将您限制为一组预定义的命名系统属性（JDBC_CONNECTION_STRING、PARAM1、PARAM2 等）

我在这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T17:46:52.240

事实证明，您可以通过配置的“容器”区域中的“JVM 命令行选项”字段将任意参数（包括环境变量）传递给容器。

```
-Dgrails.env=DesiredEnvironmentName 
```

像魅力一样工作，我现在对所有环境都使用一个 .war 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:11:01.383

将 PARAM1 设置为配置文件的名称，

然后在 Config.groovy

```
grails.config.locations = [ System.getProperty("PARAM1") ] 
```

或者，您可以通过动态配置插件 - [http://grails.org/plugin/dynamic-config为数据库中的每个环境存储不同的配置](http://grails.org/plugin/dynamic-config)

# java - Java 集合 - 顶部和底部 n 个元素

> ID：11637230
> 
> 赞同：4
> 
> 时间：2012-07-24T18:40:03.990
> 
> 标签：java, sorting, collections, filtering

我有一个相当独特的要求，在我的集合中应该只包含 Top 和 Bottom n 元素。这些元素是可比较的，并且集合本身是有界的，这意味着评估是在向集合添加条目时完成的。

例如，当以下一组值插入到“Top and Bottom 10”集合中时

5、15、10、1、12、8、11、2、16、14、9、3、20、7

该集合应仅包含以下内容

20、16、15、14、12、7、5、3、2、1

我正在考虑维护 2 个由 n/2 个元素组成的 SortedSet，然后最后将它们合并，但是这种方法并不干净，需要在使用结果之前进行合并步骤。

只是希望有人会对这个问题有更好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:47:41.560

**1.**你想要**排序和唯一性**，使用`TreeSet from java.util.Collection`。**您的数据将按自然顺序自动排序并保持唯一性**。

**2.**`Collections.reverse()`根据需要使用**反转集合**...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:26:31.323

因为我喜欢在这样的周日下午写文集，

```
import static org.junit.Assert.assertEquals;
import java.util.Arrays;
import org.junit.Test;

public class TopBottom {

    public int[] top;
    public int[] bottom;

    public TopBottom(int size) {
        top = new int[size];
        Arrays.fill(top, Integer.MIN_VALUE);
        bottom = new int[size];
        Arrays.fill(bottom, Integer.MAX_VALUE);
    }

    public void add(int element) {
        int n = Arrays.binarySearch(top, element);
        if (n < -1) {
            System.arraycopy(top, 1, top, 0, -2 - n);
            top[-2 - n] = element;
        }
        int m = Arrays.binarySearch(bottom, element);
        if (m < 0 && bottom.length >= -m) {
            System.arraycopy(bottom, -1 - m, bottom, 0 - m, bottom.length + m);
            bottom[-1 - m] = element;
        }
    }

    public void add(int... elements) {
        for (int each: elements) {
            add(each);
        }
    }

    public String toString() {
        StringBuilder buf = new StringBuilder();
        buf.append('[');
        for (int each: bottom) {
            buf.append(each);
            buf.append(", ");
        }
        for (int each: top) {
            buf.append(each);
            buf.append(", ");
        }
        buf.setLength(buf.length() - 2);
        buf.append("]");
        return buf.toString();
    }

    public static class Examples {

        @Test
        public void shouldHoldOnlyTopFiveAndBottomFive() {
            TopBottom tp = new TopBottom(5);
            tp.add(5, 15, 10, 1, 12, 8, 11, 2, 16, 14, 9, 3, 20, 7);
            assertEquals("[1, 2, 3, 5, 7, 12, 14, 15, 16, 20]", tp.toString());
        }

    }

} 
```

它使用该`Arrays#binarySearch`方法（除了查找现有元素外）如果缺少元素，则将插入点返回到排序列表中。插入点被返回，因此分别`(-1-index)`检查是否为负，然后返回表单的表达式以获取插入点或前后点。`n``m``-1-n`

# ruby-on-rails-3 - 允许在 Rails 中使用块语法配置我自己的类

> ID：11637236
> 
> 赞同：0
> 
> 时间：2012-07-24T18:40:16.400
> 
> 标签：ruby-on-rails-3, configuration

我经常看到表单的代码

```
RSpec.configure do |config|
  config.include ApiHelper

  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  config.include FactoryGirl::Syntax::Methods

end 
```

Rails 中是否有一个功能可以让我做类似的事情？我希望能够在 config/initializers/my_class.rb 中使用类似的语法配置我自己的库

```
MyClass.configure do |config|
  # allow configuration here
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:06:57.543

Rails 不需要什么特别的东西——它是简单的 Ruby 代码。这是如何完成的：

```
class MyClass
  def self.configure(&block)
    a_hash = { :car => "Red" }
    puts "Hello"
    yield a_hash
    puts "There"
  end    
end

MyClass.configure do |config|
  puts "In Block"
  puts config[:car]
end 
```

输出：

```
Hello
In Block
Red
There 
```

我正在产生一个哈希，但你可以产生任何你想要的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:13:50.050

Rails 将`config/initializers`在启动服务器时加载目录中的所有 Ruby 文件。

如果您想为您自己的自定义可配置类使用相同的样式，那么您只需实现一个`configure`接受块并将配置对象传递给该块的类方法。例如

```
class MyClassConfiguration
  # configuration attributes
end

class MyClass
  def self.configure
    yield configuration if block_given?
  end

  def self.configuration
    @config ||= MyClassConfiguration.new
  end
end 
```

使用 phoet 的 gem 会更容易。

如果你好奇的话，值得看看 RSpec 是如何做到的：

`RSpec.configure`方法在[https://github.com/rspec/rspec-core/blob/master/lib/rspec/core.rb](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core.rb)

该类`Configuration`在[https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/configuration.rb中实现](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/configuration.rb)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:05:50.710

我不知道 rails 是否为此提供了帮助，但我为这个问题编写了自己的小解决方案，我在几个 gem 中使用：[https ://github.com/phoet/confiture](https://github.com/phoet/confiture)

它让你定义配置：

```
module Your
  class Configuration
    include Confiture::Configuration

    confiture_allowed_keys(:secret, :key)
    confiture_defaults(secret: 'SECRET_STUFF', key: 'EVEN_MOAR_SECRET')
  end
end 
```

并有一个简单的 api 来进行配置：

```
Your::Configuration.configure do |config|
  config.secret = 'your-secret'
  config.key    = 'your-key'
end 
```

除此之外，还有很多其他的配置工具，比如 configatron 或 simpleconfig。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-04T19:36:53.820

通过块设置的全局配置。

```
module VkRobioAPI
  module Configuration

  OPTION_NAMES = [
      :client_id,
      :redirect_uri,
      :display,
      :response_type
    ]

    attr_accessor *OPTION_NAMES

    def configure 
      yield self if block_given?
      self
    end

  end
end

module VkRobioAPI
  extend VkRobioAPI::Configuration

  class << self
    def result
     puts VkRobioAPI.client_id 
    end
  end
end 
```

例子：

```
 VkRobioAPI.configure do |config|
    config.client_id       = '3427211'
    config.redirect_uri   = 'bEWLUZrNLxff1oQpEa6M'
    config.response_type = 'http://localhost:3000/oauth/callback'
    config.display = 'token'
  end 
```

结果：

```
VkRobioAPI.result
    #3427211
    #=> nil 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-18T17:40:06.673

如果您使用的是 Rails，您可以将`ActiveSupport::Configurable`其加入您的课程中，然后离开。在 Rails 之外，您必须将`activesuport`gem 添加到您的 Gemfile 或 gemspec 中，然后调用`require 'active_support/configurable'`.

**例子**

```
class MyClass
  include ActiveSupport::Configurable
end 
```

**用法**

*带块*

```
MyClass.configure do |config|
  config.key = "something"
  config.key2 = "something else"
end 
```

*或内联，无块*

```
MyClass.config.key = "something"
MyClass.config.key2 = "something else" 
```

*或像哈希*

```
MyClass.config[:key] = "somehting"
MyClass.config[:key2] = "something else" 
```

**注意：** key 可以是您选择的任何字符。

# facebook - Facebook 对 wordpress genisis 的评论

> ID：11637242
> 
> 赞同：0
> 
> 时间：2012-07-24T18:40:47.897
> 
> 标签：facebook, wordpress, comments

我正在应用 facebook 评论在每个帖子的 wordpress genisis 主题上显示。我在 211 主题上应用 facebook 评论它的工作。但未能适用于创世纪主题。谁能帮助我如何将 facebook 评论应用于 genisis 主题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:46:05.200

如果您使用的是 Genesis 主题框架，您可以通过将以下代码添加到 Functions.php 文件来轻松地将 Facebook 评论框添加到您的单个帖子中。

```
function add_fb_comments() {
    if (is_single()) { ?>
<h3>Comment With Facebook:</h3><div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<fb:comments href="<?php the_permalink(); ?>" num_posts="20" width="600">
</fb:comments>
    <?php }
}
add_action('genesis_after_post', 'add_fb_comments', '99'); 
```

希望这对你有用。

# java - 使用泛型和参数化列表的问题

> ID：11637244
> 
> 赞同：0
> 
> 时间：2012-07-24T18:40:53.937
> 
> 标签：java, list, generics, casting, parameterized

我创建了以下测试类：

```
public class GenericTest {

    public static class A implements Serializable {

    }

    public static class B implements Serializable {

    }

    public static void main(String[] args) {
        // Error: Type mismatch: cannot convert from List<capture#1-of ? extends Serializable> to List<GenericTest.A>
        //List<A> aList = getInfo().get("A");
        //List<B> BList = getInfo().get("B");

        // Warning: Type safety: Unchecked cast from List<capture#1-of ? extends Serializable> to List<GenericTest.A>
        List<A> aList = (List<A>)getInfo().get("A");
        List<B> BList = (List<B>)getInfo().get("B");
    }

    public static Map<String, List<? extends Serializable>> getInfo() {
        Map<String, List<? extends Serializable>> infoMap = new HashMap<String, List<? extends Serializable>>();

        List<A> aList = new ArrayList<A>();
        List<B> bList = new ArrayList<B>();

        try {
            aList.add(new A());
            infoMap.put("A", aList);

            bList.add(new B());
            infoMap.put("B", bList);
        }
        catch(Exception e) {
            e.printStackTrace();
        }

        return infoMap;
    }    
} 
```

有没有更好的方法来避免投射和抑制未经检查的警告？有人告诉我，首先使用强制转换几乎违背了使用泛型的目的。这样做有问题，还是“更安全”的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:32:18.673

你可以尝试这样做。您仍然需要在 getList 方法中抑制警告，但如果您只使用 addToMap 方法添加列表，编译器可以正确检查添加的列表是否与第一个参数中使用的类类型相同。也谷歌超级类型令牌。

```
public static void main(String[] args) {
    List<A> aList = new ArrayList<A>();
    aList.add(new A());
    List<B> bList = new ArrayList<B>();
    bList.add(new B());
    addToMap(A.class,aList);
    addToMap(B.class,bList);        

    List<A> aListFromMap = getList(A.class);
    List<B> bListFromMap = getList(B.class);
}

private static Map<Class<?>,Object> infoMap = new HashMap<Class<?>,Object>();

public static <T extends Serializable> void addToMap(Class<T> key, List<T> value) {
    infoMap.put(key,value);
}

public static <T extends Serializable> List<T> getList(Class<T> key) {
    return (List<T>)(infoMap.get(key));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:21:01.097

不，没有办法帮助这种情况。您有一个具有两种值的映射（这称为*异构*映射），类型系统无法表达这一点。您必须在没有类型安全的情况下沮丧。要么这样，要么完全重新设计以将这两种对象保持在两个独立的结构中。

# javascript - html页面之间的json数据传递

> ID：11637250
> 
> 赞同：0
> 
> 时间：2012-07-24T18:41:17.410
> 
> 标签：javascript, jquery, html, google-chrome, javascript-events

> **可能重复：**
> [Javascript DOM 错误](https://stackoverflow.com/questions/11622324/javascript-dom-errors)

我有以下 html 代码

```
<html>
<head>
</head>
<body>
<div id="1" "display:block">
</div>
<div id="2" "display:none">  // no onLoad() anymore!!
</div>
</body>
</html> 
```

我的Javascript代码如下

```
$.ajax({
        type: 'GET',
        url: ........,
        dataType: "json",
        complete: function (xhr, statusText) {
            alert(xhr.status);
        },
        success: function (data, textStatus, jqXHR) {
            alert(JSON.stringify(data));
            if(document.getElementById(1).style.display == "block"){ 
                document.getElementById(1).style.display = "none"; 
                document.getElementById(2).style.display = "block"; }
            addBooks(data); // Passing JSON to be replaced on page
        },

        function (data, textStatus, jqXHR) {
            alert(data);
            alert('error');
        },
    });

function addBooks(data) { // USing DOM to populate the tables 

    //var  newdata=document.getElementById('addBooks');
    //newdata.setattribute()

    //get the unordered list

    var newdata = document.getElementById('addBooks');
    var parent = document.getElementById('gBookList');
    //removeChildrenFromNode(parent);

    //create list divider
    var listdiv = document.createElement('li');
    listdiv.setAttribute('id', 'gBookListDiv');
    listdiv.innerHTML = ("Books Found:");
    parent.appendChild(listdiv);
    // (this is where the first error happens)

    //create dynamic list

    for (i = 0; i < data.length; i++) {
        // (this is where the second error happens)

        //create each list item 
        var listItem = document.createElement('li');
        listItem.setAttribute('id', 'gBookListItem');
        parent.appendChild(listItem);
        //var link = document.createElement('a');
        //link.setAttribute('onclick','displayBook(data[i])');
        //link.setAttribute('href','#FindBook)');
        //listItem.appendChild(link);
        var pic = document.createElement('img');
        pic.setAttribute('src', data[i].pictureURL);
        pic.setAttribute('width', '80px');
        pic.setAttribute('height', '100px');
        pic.setAttribute('style', 'padding-left: 10px');
        link.appendChild(pic);
        var brk = document.createElement('br')
        link.appendChild(brk);
        var title = document.createElement('p');
        title.innerHTML = data[i].title;
        title.setAttribute = ('style', 'float:right');
        link.appendChild(title);
        var author = document.createElement('p');
        author.innerHTML = data[i].author;
        link.appendChild(author);
    }
    var list = document.getElementById('gBookList');
    // $(list).listview("refresh");
}

/*function removeChildrenFromNode(node){
            while (node.hasChildNodes()){
                node.removeChild(node.firstChild);
            }
        //}*/ 
```

我不断收到以下错误，这使我无法填充列表，我正在使用 chrome

1) 未捕获的类型错误：无法调用 null 的方法“appendChild” 2) 未捕获的类型错误：无法读取未定义的属性“长度”

我昨天发布了这个问题，但我只是想对错误可能是什么有一个全新的看法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:45:23.620

这里可能存在一些问题：-

*   你在做这个跨域吗？如果您考虑改用 JSONP，这将解决您可能会遇到的一些问题，即由于安全策略而导致数据被“保留”。

*   您还在访问一个变量并假设它具有一个值

    `var parent = document.getElementById('gBookList');`

    在使用父标签之前，您应该确保它不为空（或空引用）并且元素 (gBookList) 确实存在于您的文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:45:25.803

必须取消注释

```
// var link = document.createElement('a'); 
```

在

```
link.appendChild(pic); 
```

这个元素还没有贴花（在你的情况下只是评论）！

# c# - 检查属性是否具有指定的属性，然后打印它的值

> ID：11637255
> 
> 赞同：5
> 
> 时间：2012-07-24T18:41:43.920
> 
> 标签：c#, .net

我有一个`ShowAttribute`并且我正在使用这个属性来标记类的一些属性。我想要的是通过具有 Name 属性的属性打印值。我怎样才能做到这一点 ？

```
public class Customer
{
    [Show("Name")]
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public Customer(string firstName, string lastName)
    {
        this.FirstName = firstName;
        this.LastName = lastName;
    }
}

class ShowAttribute : Attribute
{
    public string Name { get; set; }

    public ShowAttribute(string name)
    {
        Name = name;
    }
} 
```

我知道如何检查该属性是否有 ShowAttribute，但我不明白如何使用它。

```
var customers = new List<Customer> { 
    new Customer("Name1", "Surname1"), 
    new Customer("Name2", "Surname2"), 
    new Customer("Name3", "Surname3") 
};

foreach (var customer in customers)
{
    foreach (var property in typeof (Customer).GetProperties())
    {
        var attributes = property.GetCustomAttributes(true);

        if (attributes[0] is ShowAttribute)
        {
            Console.WriteLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:43:42.943

```
Console.WriteLine(property.GetValue(customer).ToString()); 
```

但是，这将非常缓慢。您可以通过`GetGetMethod`为每个属性创建一个委托来改进它。或者将带有属性访问表达式的表达式树编译到委托中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T18:52:57.307

您可以尝试以下方法：

```
var type = typeof(Customer);

foreach (var prop in type.GetProperties())
{
    var attribute = Attribute.GetCustomAttribute(prop, typeof(ShowAttribute)) as ShowAttribute;

    if (attribute != null)
    {
        Console.WriteLine(attribute.Name);
    }
} 
```

输出是

```
 Name 
```

如果你想要财产的价值：

```
foreach (var customer in customers)
{
    foreach (var property in typeof(Customer).GetProperties())
    {
        var attributes = property.GetCustomAttributes(false);
        var attr = Attribute.GetCustomAttribute(property, typeof(ShowAttribute)) as ShowAttribute;

        if (attr != null)
        {
            Console.WriteLine(property.GetValue(customer, null));
        }
    }
} 
```

输出在这里：

```
Name1
Name2
Name3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T19:03:05.720

```
foreach (var customer in customers)
{
    foreach (var property in typeof (Customer).GetProperties())
    {
        if (property.IsDefined(typeof(ShowAttribute))
        {
            Console.WriteLine(property.GetValue(customer, new object[0]));
        }
    }
} 
```

请注意性能损失。

# javascript - 将日期导出为 Javascript 格式

> ID：11637260
> 
> 赞同：2
> 
> 时间：2012-07-24T18:41:54.457
> 
> 标签：javascript, vba, date, formatting

如何将常规日期（dd/mm/yyyy 或任何其他格式）格式从 Excel 导出/转换为 JavaScript 日期格式，如下所示：1136005200000（适用于 2005 年 12 月 31 日）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:50:07.290

```
Function Tester()
    Dim sc As Object, o As Object
    Set sc = CreateObject("ScriptControl")
    sc.Language = "JScript"
    Debug.Print sc.Eval("new Date('12/31/2005')*1")
End Function 
```

# ios - iOS：UIImagePickerController - 使用工具栏属性？

> ID：11637261
> 
> 赞同：1
> 
> 时间：2012-07-24T18:41:54.613
> 
> 标签：ios, ipad, uiimagepickercontroller, uitoolbar

鉴于以下代码，按钮不会显示在工具栏上。有什么不对？

```
UIImagePickerController* cameraPickerController = [[UIImagePickerController alloc] init];
cameraPickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
cameraPickerController.delegate =self;
cameraPickerController.showsCameraControls = NO;
cameraPickerController.toolbarHidden = NO;

UIBarButtonItem *cancelBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target: self action: @selector(cancel)];
UIBarButtonItem *flexibleBarSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
flexibleBarSpace.width = 1000;
UIBarButtonItem *cameraBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCamera target:cameraPickerController action:@selector(takePicture)];
UIBarButtonItem *faceBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Show facemask" style:UIBarButtonItemStyleBordered target: self action: @selector(showFacemask)];
cameraPickerController.toolbar.items = [NSArray arrayWithObjects:cancelBarButtonItem,flexibleBarSpace,cameraBarButtonItem,flexibleBarSpace,faceBarButtonItem,nil];

[self presentModalViewController:cameraPickerController animated:YES]; 
```

理论上，那些 cancelBarButtons 和其他应该出现在工具栏上。但是，在这种情况下不会。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T14:31:59.467

为了那些搜索和找到这篇文章的人的利益，迟到的答案。

在 iOS 5 及更高版本中，解决方案是在完成块中调用`presentViewController:animated:completion`和设置工具栏项。

```
 UIImagePickerController* cameraPickerController = [[UIImagePickerController alloc] init];
    cameraPickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
    cameraPickerController.delegate =self;
    cameraPickerController.showsCameraControls = NO;
    cameraPickerController.toolbarHidden = NO;

    UIBarButtonItem *cancelBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target: self action: @selector(cancel)];
    UIBarButtonItem *flexibleBarSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    flexibleBarSpace.width = 1000;
    UIBarButtonItem *cameraBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCamera target:cameraPickerController action:@selector(takePicture)];
    UIBarButtonItem *faceBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Show facemask" style:UIBarButtonItemStyleBordered target: self action: @selector(showFacemask)];

    //cameraPickerController.toolbar.items = [NSArray arrayWithObjects:cancelBarButtonItem,flexibleBarSpace,cameraBarButtonItem,flexibleBarSpace,faceBarButtonItem,nil];
    NSArray *tbItems = [NSArray arrayWithObjects:cancelBarButtonItem,flexibleBarSpace,cameraBarButtonItem,flexibleBarSpace,faceBarButtonItem,nil];

    // [self presentModalViewController:cameraPickerController animated:YES];
    cameraPickerController.modalTransitionStyle = UIModalPresentationFullScreen;
    [self presentViewController:picker animated:YES completion:^{
        cameraPickerController.toolbar.items = tbItems;
    }]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:37:50.933

您不能将项目添加到工具栏，因为它还没有被`UIImagePickerController`（我认为）呈现。而是试试这个：

```
UIImagePickerController* cameraPickerController = [[UIImagePickerController alloc] init];
cameraPickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
cameraPickerController.delegate =self;
cameraPickerController.showsCameraControls = NO;

UIToolbar *theToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 436, 320, 44)];

UIBarButtonItem *cancelBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target: self action: @selector(cancel)];
UIBarButtonItem *flexibleBarSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
flexibleBarSpace.width = 1000;
UIBarButtonItem *cameraBarButtonItem = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCamera target:cameraPickerController action:@selector(takePicture)];
UIBarButtonItem *faceBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Show facemask" style:UIBarButtonItemStyleBordered target: self action: @selector(showFacemask)];

theToolbar.items = [NSArray arrayWithObjects:cancelBarButtonItem, flexibleBarSpace, cameraBarButtonItem, faceBarButtonItem, nil];

[cameraPickerController setCameraOverlayView:theToolbar];

[self presentModalViewController:cameraPickerController animated:YES]; 
```

基本上我只是创建了一个新工具栏并将其设置为`cameraOverlayView`.

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:00:51.053

所以我搜索了类似的问题，发现[了这个](http://www.iphonedevsdk.com/forum/iphone-sdk-development/26348-uiimagepickercontroller-the-presentmodalviewcontroller-doesnt-work.html)

但基本上他的问题是他正在尝试

```
[self presentModalViewController:foo animated:YES]; 
```

修复是

```
[self.tabBarController presentModalViewController:camera animated:YES]; 
```

看看这是否也能解决你的问题。如果没有看到更多代码，很难确定

# windows - 用于交叉编译到 SUA 的最佳 Linux 发行版

> ID：11637262
> 
> 赞同：2
> 
> 时间：2012-07-24T18:42:00.767
> 
> 标签：windows, linux, cross-compiling, sua, interix

我对使用 Linux / GCC 交叉编译为 Microsoft SUA（Unix 应用程序子系统）格式非常感兴趣（我将 SUA 6.1 作为 Windows 7 的一部分，64 位）。鉴于 MS 普遍缺乏支持，没有真正的包管理器等，使用 SUA 本地编译程序及其依赖项是一件麻烦事。使用 Linux 执行此操作的最佳方法是什么？我对其他方法持开放态度，但我个人认为 Linux 是解决方案的一部分。如果有更好的交叉编译器来完成我想知道的工作-似乎我必须选择较旧的发行版（根据 GNU 网页，SUA 支持以 GCC 3.3 结束）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:23:55.683

Gentoo 有一个针对 Interix的[前缀目标。](http://www.gentoo.org/proj/en/gentoo-alt/prefix/)你可以试试这个，但我不确定它是否是最新的。它基本上是您的 Interix 系统中的 Gentoo 安装（带有包管理器）。

前缀解决方案应该更容易维护交叉编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:15:55.697

您可以使用“mingw”作为 Windows 的替代编译器来编译 Linux 应用程序。

# c# - LINQ TO XML，如何用新值替换值c#

> ID：11637263
> 
> 赞同：2
> 
> 时间：2012-07-24T18:42:03.463
> 
> 标签：c#, xml, linq

以下是我的示例 XML 文件：-

我只想在 C# 中使用 LINQ to XML 将日期值替换为当前日期。

```
<?xml version="1.0" encoding="UTF-8"?>
<BasicImport xmlns="http://www.uk.SSp.com/SSR/XTI/Traffic/0010" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.uk.nds.com/SSR/XTI/Traffic/0010 0010.xsd" utcOffset="+05:30" frameRate="25">
  <SiEventSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59">
    <siService>Ssp</siService>
    <playoutSource>Ssp</playoutSource>
    <activationSourceId>0</activationSourceId>
    <CaSchedule deleteStart="2012/01/21 00:00:00" deleteEnd="2012/01/21 23:59:59" />
    <SiEvent>
      <displayDateTime>2012/01/21 00:00:00</displayDateTime>
      <activationDateTime>2012/01/21 00:00:00</activationDateTime>
      <displayDuration>00:30:00</displayDuration>
      <siTrafficKey>056049263</siTrafficKey>
      <detailKey>056049263 2012-07-12</detailKey>
     </SiEvent>
   </SiEventSchedule>
</BasicImport> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T18:47:22.687

哪些日期值？*全部*？具体要素？例如，这将用`displayDateTime`当前日期替换所有元素 - 采用标准 XML 格式，这*不是*您的源 XML 包含的内容......如果您想要不同的格式，您应该使用`DateTime.ToString`相关的元素的内容并将其替换文本。

```
using System;
using System.Linq;
using System.Xml.Linq;

class Test
{
    static void Main()
    {
        XNamespace ns = "http://www.uk.ssp.com/SSR/XTI/Traffic/0010";
        XDocument doc = XDocument.Load("ssp.xml");

        var elements = doc.Descendants(ns + "displayDateTime")
                          .ToList();

        var today = DateTime.Today;
        foreach (var element in elements)
        {
            element.ReplaceAll(today);
        }
        Console.WriteLine(doc);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T11:59:39.663

您可以按照以下方式进行

```
 [Test]
    public void Test()
    {
        XElement root = XElement.Load("Data.xml");
        root.Descendants()
           .Where(x => x.Name.LocalName == "displayDateTime")
           .ToList()
           .ForEach(x => x.ReplaceNodes(GetDate(x)));
    }

    private static DateTime GetDate(XElement element)
    {
         return DateTime.Today.Add(DateTime.Parse(element.Value).TimeOfDay);
    } 
```

# html - 如何在 Adob e AIR 中包含 html 文件？

> ID：11637265
> 
> 赞同：1
> 
> 时间：2012-07-24T18:42:09.323
> 
> 标签：html, templates, air, include, adobe

如何在 Adob​​e AIR 的另一个 html 文件中包含常见的 HTML 模板文件，如页眉、页脚等？

类似于 SSI 的东西：

```
<!--#include file="header.shtml"--> 
```

或 PHP：

```
include 'header.php'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:00:33.767

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
    <mx:XML id="keyboard">
    <keyboard><![CDATA[
            <script type="text/javascript">
                window.jQuery||document.write('<script type="text/'+'javascript" src="http:/'+'/ajax.googleapis.com'+'/ajax'+'/libs'+'/jquery'+'/1.8.0'+'/jquery.min.js"><'+'/script>');
            </script>
            <script type="text/javascript">
                $(function() {
                    $('h1').css('color','red');
                });
             </script>
             <style type="text/css">
                 h1{color:blue;}
             </style>
             <h1>html</h1>]]>
         </keyboard>
    </mx:XML>
    <mx:Script>
    <![CDATA[
        import flash.display.MovieClip;
        import flash.display.Sprite;
        import flash.display.StageDisplayState;
        import flash.display.StageScaleMode;
        import flash.events.Event;
        import mx.controls.HTML;

        [Bindable]
        private function insertHtml():void {
            browser.htmlLoader.window.document.write(keyboard.children());
        }
    ]]>
    </mx:Script>
    <mx:HTML id="browser" location="http://www.w3.org" htmlDOMInitialize="insertHtml()" />
</mx:Application> 
```

您还可以从文件中加载 html。

# python - 在两个字典之间创建和匹配令牌

> ID：11637271
> 
> 赞同：0
> 
> 时间：2012-07-24T18:42:41.943
> 
> 标签：python, dictionary, match, token

**更新**所以我有一个看起来像这样的数千行的纺织品

BRCA A2ML1 Missense_Mutation TCsA-A1-A0SO A8K2U0 W408C

BRCA A2ML1 Missense_Mutation TCsA-A8-A08P A8K2U0 R433H

BRCA A2ML1 Missense_Mutation TCsA-B6-A0WZ A8K2U0 P1341L

我已经编写了代码来捕获整行并且只有第 6 个令牌（下面的代码）现在我正在尝试将第 6 个令牌与其自己的行匹配。

**我希望得到的输出**是我正在尝试编写一个看起来像这样的输出文件（这只是几个例子）

> A8K2U0 |开始=1 结束.....| R433H |BRCA A2ML1 Missense_Mutation TCsA-A8-A08P A8K2U0 R433H

和其他行一样

> A8K2U0 |开始=1 结束.....| P1341L |BRCA A2ML1 Missense_Mutation TCsA-B6-A0WZ A8K2U0 P1341L

这是我的字典代码：

```
lookup = defaultdict(list) 
wholelookup = defaultdict(list)
wholeline = defaultdict(list)
mydata = open('file.txt')

for line in csv.reader(mydata, delimiter='\t'):
    code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
    if code:      
       lookup[line[-2]].append(code.group(1))
       wholelookup[line[-2]].append(code.group(0))
       s=' '.join(line)
       wholeline[line[-2]].append(s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:05:07.170

> 问题我如何使用 if 语句来找出是否`A177T`在`COADREAD ZNF271 Missense_Mutation MAAA-AA-3947 Q14591 A177T`？

琐碎：

```
test_string = 'A177T'
to_search = 'COADREAD ZNF271 Missense_Mutation MAAA-AA-3947 Q14591 A177T'
if test_string in to_search:
    print "found", test_string 
```

或根据帝斯曼的建议：

```
test_string = 'A177T'
to_search = 'COADREAD ZNF271 Missense_Mutation MAAA-AA-3947 Q14591 A177T'
if test_string in to_search.split(' '):
    print "found", test_string 
```

但我有一种明显的感觉，我误解了这个问题。

# java - 从 jtable 更新 jtextfield

> ID：11637273
> 
> 赞同：1
> 
> 时间：2012-07-24T18:42:52.623
> 
> 标签：java, swing, jtable, listener, listselectionlistener

有人可以帮我这个听众吗？

```
table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
table.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(ListSelectionEvent e){
        if(e.getValueIsAdjusting()){
            ListSelectionModel model = table.getSelectionModel();  
            int lead = model.getLeadSelectionIndex(); 
            displayRowValues(lead);
        }
    }
    private void displayRowValues(int rowIndex){
        String country = "";   
        Object oCountry = table.getValueAt(rowIndex, 0);  
        country += oCountry.toString();
        countryTxt.setText(country );
    }
}); 
```

它应该在选择其中一个行中将JTable（表）中的单元格（表）中的单元格发送到文本字段（Countrytxt），但只有在我点击行时时才有效，而不是当我使用箭头键的ricking trough我的表格时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:06:47.263

问题在于这一行：

```
if (e.getValueIsAdjusting()) { 
```

将此替换为：

```
if (e.getValueIsAdjusting()) return; 
```

这是对多个选择事件的检查 BTW。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:06:49.610

如果你注释掉`e.getValueIsAdjusting()`它的工作原理。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#setValueIsAdjusting(boolean)](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#setValueIsAdjusting%28boolean%29)

# c# - 在面向公众的网站上使用开箱即用的 aspnet 会员资格

> ID：11637279
> 
> 赞同：0
> 
> 时间：2012-07-24T18:43:28.037
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想知道对于面向公众的网站是否可以使用开箱即用的 aspnet 会员提供程序、帐户控制器、数据库模式等（ootb 登录/注册系统作为一个整体）？

*   我知道上面有很多多余的东西是不需要的，但我想节省时间而不必从头开始创建
*   我明确计划扩展它以适应定制需求

是否存在任何漏洞，或者仅仅是因为有很多不需要的东西让用户远离它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:54:50.940

在我的上一个项目中，我放弃了会员资格，转而采用基于 WIF 的解决方案。在进行身份验证时，我编写了包含用户身份的加密会话 cookie，然后使用 SessionAuthenticationModule 从 cookie 中设置主体。像魅力一样工作，我可以完全控制数据库和用户存储。它还允许一些复杂的东西，比如 ActsAs、Federation 等。
如果它是公共站点，也许你会添加一些带有自动注册的 OAuth 东西。使用您自己的存储模式会更干净。成员资格也决定了 RBAC 授权类型。就个人而言，还没有看到只用简单的 IsInRole 就可以的项目。

这只是恕我直言 =) 另请注意，.Net 4.5 将在核心中包含 WIF ..

# php - 致命错误：在第 108 行对非对象调用成员函数 http_request()

> ID：11637283
> 
> 赞同：0
> 
> 时间：2012-07-24T18:43:57.763
> 
> 标签：php

这是代码的 2 部分（第 108 行是 NoBlankFunctions.php 的最后一行）： 似乎 2me 一切都很好。它是一个带有 newReposnderOAuth 的 $responder 声明（可以假设这个类工作得很好，因为它被该公司的许多其他客户使用）。在某些时候，代码会调用 addNewUser，它是 NoBlankFunctions 的一部分。在这个函数内部有一个对响应者的调用，这是同一个 php 文件中的另一个函数。最后它在尝试发送http请求时崩溃。

```
include 'OAuth.php';
include 'responder_sdk.php';
include 'NoBlankFunctions.php';

$client_key = '28FB957EA00B920BE7F83A365CC7ABAF';    
$client_secret = '0B06B5A69DB0F3BCB80A716031C2DE6C';  
$user_key = '1F566B1DE821BE68B5F485F75610F610';  
$user_secret = '5D1406DACCA6B862AD4AE361823BB108';

$responder = new ResponderOAuth($client_key, $client_secret, $user_key, $user_secret);  
.  
.  
.  
addNewUser($registerFirstName, $registerLastName, $registerUserName,
                $registerPass, $registerEmail, $registerGender,
                $registerAge, $registerCountry, "Heb", $registerUserGMT); 
```

noBlankFunctions.php

```
function addNewUser($registerFirstName, $registerLastName, $registerUserName,
                $registerPass, $registerEmail, $registerGender,
                $registerAge, $registerCountry, $registerLang, $registerUserGMT)
{   
global $db;
$sql = "INSERT INTO `".$db."`.`users` (`userEmail`, `nickName`, `password`, `firstName`, `lastName`, `State`, `userGMT`, `language`, `gender`, `age`, `currentDay`, `dateForCurrentDay`, `isUserCheck`, `isUserDone`, `isUserPayed`)
        VALUES ('".$registerEmail."', '".$registerUserName."', '".$registerPass."', '".$registerFirstName."', '".$registerLastName."', '".$registerCountry."', '".$registerUserGMT."', '".$registerLang."', '".$registerGender."', '".$registerAge."', '0', '".date("Y/m/d")."', '0', '0', '0');";
$result = mysql_query($sql);

if ($registerLang == 'En')
{
    $listNum = 37742;
}
elseif($registerGender == 'Male')
{
    $listNum = 37713;
}
else
{
    $listNum = 37741;
}
responder($registerEmail, $registerFirstName, $listNum);
}

function responder($userMail, $userFirstName, $listNum)
{
    $post_data = array(
        'subscribers' => json_encode(
            array(
                array(
                    'EMAIL' => $userMail,
                    'NAME' => $userFirstName
                )
            )
        )
    );
$response = $responder->http_request('lists/'.$listNum.'/subscribers', 'post', $post_data);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:53:47.503

错误信息是说 $responder 不是一个对象，换句话说，它没有被实例化；尝试访问非对象的方法 http_request 显然是行不通的。

我注意到您已实例化`$responder`，但随后您尝试从文件中`$responder`的函数内部进行引用。我觉得您正在引用该变量的本地范围，它不是对象。如果您尝试使用应该引用您在上面实例化的原始 $responder 变量的全局前缀进行声明。`responder``noBlankFunctions.php``$responder``$responder`

`gloabl $responder`

[变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:01:32.083

`$responder`未在函数范围内定义。

要么（按从高到低的顺序）将其作为附加参数传递，要么`global $responder`在函数体中的某个位置添加（在尝试访问它之前），或者访问`$GLOBALS['responder']`.

# c - 在头文件中使用 typedef

> ID：11637285
> 
> 赞同：0
> 
> 时间：2012-07-24T18:44:08.240
> 
> 标签：c, typedef

所以我正在尝试使用 typedef 在头文件中定义数据。具体来说，我需要将下面的头文件代码指向我的主文件。我不知道该怎么做。我收到一条错误消息，说“（头文件中定义的所有数据类型）未声明（首先使用此函数。）”有人能指出我正确的方向吗？谢谢！

编辑：CalcTaxes.o 文件只是一个传递信息的外部文件。它应该对以下代码没有影响。

下面是头文件：

```
typedef char STR15[15+1];
typedef char STR10[10+1];
typedef struct EmployeeRecord 
{
   STR15 lastname;
   STR10 firstname;
   float hours,
   payrate,
   defr,
   gross,
   fedtax,
   statetax,
   ssitax,
   net;
} EmployeeRecord; 
```

以下是主文件：

```
#include <stdio.h>
#include <stdlib.h>
#include "EmployeeRecord.h"
#include "CalcTaxes.o"
#define ADDR(var) &var
#define REPORTCOLUMNHEADINGS1 "Employee           Pay    Reg Hrs  Gross    Fed     SSI     Net\n"
#define REPORTCOLUMNHEADINGS2 "Name               Rate   OVT Hrs  Pay      State   Defr    Pay\n"
#define BARS                  "========           =====  =======  =======  ======  ======  =======\n\n"  
#define REPORTCOLUMN1         "%s, %s\t%8.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n"
#define REPORTCOLUMN2         "%32.2f%18.2f%8.2f\n\n"

extern void CalculateTaxes(float gross, float defr, float *ft, float *st, float *ssit);

int main()
{
    EmployeeRecord r;

    float reghours,ovthours; 
    float ft,st,ssit;
    float pr,reg,ovt,gp,fedt,stt,sst,def,np;
    float avgpr,avgreg,avgovt,avggp,avgfedt,avgstt,avgsst,avgdef,avgnp;
    char answer;
    int empCount;

     FILE *ReportFile;    
     ReportFile = fopen("report.txt", "w");
     fprintf(ReportFile,REPORTCOLUMNHEADINGS1);
     fprintf(ReportFile,REPORTCOLUMNHEADINGS2);
     fprintf(ReportFile,BARS);
     fclose(ReportFile);    

    empCount = 0;// count initializations   
    pr = reg = ovt = gp = fedt = stt = def = sst = np = 0;
    do
    {

      printf("Enter employee's name: ");  // input section
      scanf("%s%s",firstname,lastname);
      printf("Enter hourly pay rate: ");
      scanf("%f",ADDR(payrate));
      printf("Enter deferred amount: ");
      scanf("%f",ADDR(defr));
      printf("Enter hours worked this pay period: ");
      scanf("%f",ADDR(hours));
          if (hours > 40)
          {
               reghours = 40;
               ovthours = hours - 40;
          }
          else {
               reghours = hours;
               ovthours = 0;
          }      
      gross = (reghours * payrate)+(ovthours * payrate * 1.5);
      CalculateTaxes(gross,defr,&ft,&st,&ssit);//Call 3.5 CalculateTaxes 
      net = gross - ft - st - ssit;
      printf(REPORTCOLUMNHEADINGS1);
      printf(REPORTCOLUMNHEADINGS2);
      printf(BARS); 
      printf(REPORTCOLUMN1,lastname,firstname,payrate,reghours,gross,ft,ssit,net); 
      printf(REPORTCOLUMN2,ovthours,st,defr);   
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,REPORTCOLUMN1,lastname,firstname,payrate,reghours,gross,ft,ssit,net); 
          fprintf(ReportFile,REPORTCOLUMN2,ovthours,st,defr); 
          fclose(ReportFile);
      empCount = empCount + 1;
      pr = pr + payrate;
      fedt = fedt + ft;
        if (hours > 40)
          {
               reghours = 40;
               ovthours = hours - 40;
          }
          else {
               reghours = hours;
               ovthours = 0;
          }
      reg = reg + reghours;    
      ovt = ovt + ovthours;
      gp = gp + gross;
      stt = stt + st;
      sst = sst + ssit;
      np = np + net;
      def = def + defr;
      avgpr = pr / empCount;
      avgfedt = fedt / empCount;
      avgreg = reg / empCount;
      avgovt = ovt / empCount;
      avggp = gp / empCount;
      avgstt = stt / empCount;
      avgsst = sst / empCount;
      avgnp = np / empCount;
      avgdef = def / empCount;

          fflush(stdin);
          printf(" Repeat (Y/N)? : ");
          scanf("%c",ADDR(answer)); 
    } while (answer == 'Y' || answer == 'y');
        printf("\n"); // print one line for spacing 
   printf("\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
   printf("%24.2f%10.2f%10.2f\n",ovt,stt,def); 
   printf("\nAverages %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgstt,avgnp); 
   printf("%24.2f%10.2f%10.2f\n",avgovt,avgsst,avgdef);
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,"\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
          fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",ovt,stt,def); 
          fprintf(ReportFile,"\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
          fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);
          fclose(ReportFile);   
    fflush(stdin);
    getchar();
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T00:09:50.150

您尚未声明名为 firstname 的变量。

您已经声明了一个以 firstname 作为成员的结构类型，尽管我以前从未见过这种语法，所以我不确定它是否会起作用。我见过的所有示例都具有在每个变量前的类型，每行上都有一个分号。

也许您想引用 r.firstname 来代替？

# regex - 从字符串中提取元素的正则表达式

> ID：11637288
> 
> 赞同：1
> 
> 时间：2012-07-24T18:44:23.943
> 
> 标签：regex, perl

在我的 perl 程序中，我有一个`$new`可变长度的字符串。以下是一些实例：

```
$new = "sdf / wer / wewe / dfg";
$new = "lkjz / dfgr / wdvf";
$new = "asdfe"; 
```

如何`/`使用正则表达式将分隔的元素提取到数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:49:04.203

您可以使用该`split`函数，该函数将要拆分的模式、要拆分的字符串以及可选择的拆分次数作为参数。

```
$new    = "sdf / wer / wewe / dfg";
@values = split(" / ", $new ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:48:54.637

如果您有固定的分隔符，那么正则表达式不一定是最佳选择。split 函数是一个更好的选择：

```
my @items = split " / ", $new; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T18:52:22.853

您没有说元素中可以包含哪些字符，但假设它们可以包含除斜杠之外的任何字符，这将为您提取它们。它还排除任何前导或尾随空格和空字段。

```
use strict;
use warnings;

my @new = (
  "  sdf / wer / wewe / dfg  ",
  "  sdf / dfgr / wdvf  ",
  "  asdfe  ",
  "  first field / second field  ",
  "  a / b / c / d / e / f  ",
);

for (@new) {
  my @fields = m|[^/\s](?:[^/]*[^/\s])?|g;
  printf "(%s)\n",  join ', ', map "'$_'", @fields;
} 
```

**输出**

```
('sdf', 'wer', 'wewe', 'dfg')
('sdf', 'dfgr', 'wdvf')
('asdfe')
('first field', 'second field')
('a', 'b', 'c', 'd', 'e', 'f') 
```

# python - 遍历python中的对象属性

> ID：11637293
> 
> 赞同：214
> 
> 时间：2012-07-24T18:44:55.827
> 
> 标签：python, oop, attributes, iteration

我有一个带有多个属性和方法的 python 对象。我想迭代对象属性。

```
class my_python_obj(object):
    attr1='a'
    attr2='b'
    attr3='c'

    def method1(self, etc, etc):
        #Statements 
```

我想生成一个包含所有对象属性及其当前值的字典，但我想以动态方式进行（所以如果稍后我添加另一个属性，我也不必记住更新我的函数）。

在 php 中，变量可以用作键，但在 python 中的对象是不可接受的，如果我为此使用点表示法，它会创建一个带有我的 var 名称的新属性，这不是我的意图。

只是为了让事情更清楚：

```
def to_dict(self):
    '''this is what I already have'''
    d={}
    d["attr1"]= self.attr1
    d["attr2"]= self.attr2
    d["attr3"]= self.attr3
    return d 
```

·

```
def to_dict(self):
    '''this is what I want to do'''
    d={}
    for v in my_python_obj.attributes:
        d[v] = self.v
    return d 
```

更新：对于属性，我只指这个对象的变量，而不是方法。

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2012-07-24T18:54:44.790

假设您有一个课程，例如

```
>>> class Cls(object):
...     foo = 1
...     bar = 'hello'
...     def func(self):
...         return 'call me'
...
>>> obj = Cls() 
```

调用`dir`对象会返回该对象的所有属性，包括 python 特殊属性。尽管某些对象属性是可调用的，例如方法。

```
>>> dir(obj)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'bar', 'foo', 'func'] 
```

您始终可以使用列表推导过滤掉特殊方法。

```
>>> [a for a in dir(obj) if not a.startswith('__')]
['bar', 'foo', 'func'] 
```

或者如果您更喜欢地图/过滤器。

```
>>> filter(lambda a: not a.startswith('__'), dir(obj))
['bar', 'foo', 'func'] 
```

如果要过滤掉方法，可以使用内置函数`callable`作为检查。

```
>>> [a for a in dir(obj) if not a.startswith('__') and not callable(getattr(obj, a))]
['bar', 'foo'] 
```

您还可以使用检查您的类与其实例对象之间的差异。

```
>>> set(dir(Cls)) - set(dir(object))
set(['__module__', 'bar', 'func', '__dict__', 'foo', '__weakref__']) 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-11-26T10:29:39.443

*通常在您的类*中放置一个`__iter__`方法并遍历对象属性或将此mixin类放入您的类中。

 *```
class IterMixin(object):
    def __iter__(self):
        for attr, value in self.__dict__.iteritems():
            yield attr, value 
```

你的班：

```
>>> class YourClass(IterMixin): pass
...
>>> yc = YourClass()
>>> yc.one = range(15)
>>> yc.two = 'test'
>>> dict(yc)
{'one': [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14], 'two': 'test'} 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2019-03-24T04:08:23.120

正如已经在一些答案/评论中提到的，Python 对象已经存储了它们的属性字典（不包括方法）。这可以作为 访问`__dict__`，但更好的方法是使用`vars`（尽管输出是相同的）。请注意，修改此字典将修改实例上的属性！这可能很有用，但也意味着您应该小心使用这本词典。这是一个简单的例子：

```
class A():
    def __init__(self, x=3, y=2, z=5):
        self.x = x
        self._y = y
        self.__z__ = z

    def f(self):
        pass

a = A()
print(vars(a))
# {'x': 3, '_y': 2, '__z__': 5}
# all of the attributes of `a` but no methods!

# note how the dictionary is always up-to-date
a.x = 10
print(vars(a))
# {'x': 10, '_y': 2, '__z__': 5}

# modifying the dictionary modifies the instance attribute
vars(a)["_y"] = 20
print(vars(a))
# {'x': 10, '_y': 20, '__z__': 5} 
```

使用`dir(a)`是解决这个问题的一种奇怪的方法，如果不是完全糟糕的话。如果您真的需要遍历类的所有属性*和方法*（包括特殊方法，如`__init__`），那就太好了。然而，这似乎不是你想要的，即使是[接受的答案](https://stackoverflow.com/a/11637457/4880003)也很糟糕，通过应用一些脆弱的过滤来尝试删除方法并只留下属性；您可以看到`A`上面定义的类会如何失败。

（使用`__dict__`已经在几个答案中完成，但它们都定义了不必要的方法而不是直接使用它。只有[评论](https://stackoverflow.com/questions/11637293/iterate-over-object-attributes-in-python#comment93597568_11637457))建议使用`vars`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-24T18:56:16.607

python 中的对象将它们的属性（包括函数）存储在一个名为`__dict__`. 您可以（但通常不应该）使用它直接访问属性。如果您只想要一个列表，您也可以调用`dir(obj)`，它返回一个包含所有属性名称的可迭代对象，然后您可以将其传递给`getattr`.

然而，需要对变量名做任何事情通常是糟糕的设计。为什么不把它们收藏起来呢？

```
class Foo(object):
    def __init__(self, **values):
        self.special_values = values 
```

然后，您可以使用`for key in obj.special_values:`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T19:05:21.833

```
class SomeClass:
    x = 1
    y = 2
    z = 3

    def __init__(self):
        self.current_idx = 0
        self.items = ["x", "y", "z"]

    def next(self):
        if self.current_idx < len(self.items):
            self.current_idx += 1
            k = self.items[self.current_idx-1]
            return (k, getattr(self, k))
        else:
            raise StopIteration

    def __iter__(self):
        return self 
```

然后将其称为可迭代

```
s = SomeClass()
for k, v in s:
    print k, "=", v 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T18:55:52.190

正确的答案是你不应该。如果你想要这种类型的东西，要么只使用一个 dict，要么你需要显式地将属性添加到某个容器。你可以通过学习装饰器来自动化它。

特别是，顺便说一下，您的示例中的 method1 也是一个很好的属性。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-03-09T16:23:39.407

对于python 3.6

```
class SomeClass:

    def attr_list(self, should_print=False):

        items = self.__dict__.items()
        if should_print:
            [print(f"attribute: {k}    value: {v}") for k, v in items]

        return items 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2018-03-09T15:54:50.480

对于所有 Pythonian 狂热者，我相信 Johan Cleeze 会赞同你的教条主义；）。我要留下这个答案，继续记过它它实际上让我更加知己。给小鸡留言！

对于python 3.6

```
class SomeClass:

    def attr_list1(self, should_print=False):

        for k in self.__dict__.keys():
            v = self.__dict__.__getitem__(k)
            if should_print:
                print(f"attr: {k}    value: {v}")

    def attr_list(self, should_print=False):

        b = [(k, v) for k, v in self.__dict__.items()]
        if should_print:
            [print(f"attr: {a[0]}    value: {a[1]}") for a in b]
        return b 
```*

# javascript - getNodeByText() 是否搜索整个 TreeView，以查找根目录下的匹配项或当前子项？

> ID：11637296
> 
> 赞同：0
> 
> 时间：2012-07-24T18:45:09.050
> 
> 标签：javascript, asp.net, user-controls, telerik

当您将客户端 javascript 用于 TreeView 时，有很多我不确定的信息。我没有要测试的样本，但我想知道 getNodeByText 是否会递归搜索第一次出现，或者只是搜索所选节点下的子节点。

一些文档位于[http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html](http://www.telerik.com/help/aspnet-ajax/treeview-client-objects-radtreeview.html)但它没有回答我的具体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:40:13.543

根据我的经验，每个`Node`功能当时只影响 1 个级别。

所以这段代码只会影响第一级节点（A`Node`的根`TreeView`）：

```
var firstLevelNode = yourTreeView.getNodeByText('someText'); 
```

那么你可以在 any 上调用这个函数`Node`，所以：

```
var secondLevelNode = firstLevelNode.getNodeByText('someOtherText'); 
```

你看？如果要搜索底层子节点，则必须对每个 root 进行迭代`Node`，如果要查找 3rd level `Node`，则必须遍历每个 2nd level `Node`，依此类推...

# mysql - 使用来自另一个查询的解析从表中选择

> ID：11637300
> 
> 赞同：0
> 
> 时间：2012-07-24T18:45:13.607
> 
> 标签：mysql

你看，t1 和 t2 有一些相似的行，在第一个查询中我选择了不匹配的行，我使用了以下查询

```
SELECT DISTINCT t1.usr_id
FROM t1, t2
WHERE t1.usr_id != t2.usr_id
AND t1.event =  '$event'
AND t1.client =  '$client'
GROUP BY t1.usr_id 
```

现在我想使用上面查询的结果从匹配 usr_id 的 t3 中选择 *。我已经尝试过其他几乎类似问题的答案，但没有一个是从一个查询中减去并使用结果从第二个查询中获取数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:04:03.987

尝试这个：

```
SELECT t3.usr_id FROM t3 WHERE t3.usr_id IN 
(SELECT DISTINCT t1.usr_id
FROM t1, t2
WHERE t1.usr_id != t2.usr_id
AND t1.event =  '$event'
AND t1.client =  '$client'
GROUP BY t1.usr_id) 
```

但它可能比：

```
SELECT table.usr_id
FROM ( SELECT DISTINCT t1.usr_id
FROM t1, t2
WHERE t1.usr_id != t2.usr_id
AND t1.event =  '$event'
AND t1.client =  '$client'
GROUP BY t1.usr_id ) as table
JOIN t3 ON t3.usr_id = table.usr_id 
```

# c - 以邻接矩阵为参数的 Prim MST

> ID：11637302
> 
> 赞同：1
> 
> 时间：2012-07-24T18:45:22.850
> 
> 标签：c, algorithm, minimum-spanning-tree, prims-algorithm

我正在使用 C 语言中的 Prim MST，该函数采用邻接矩阵。考虑到重量当然在`A[i][j]`.

假设我有一个前驱数组，可以追踪我到目前为止找到的最小边。 `predecessor[u]=v`{这也是最终的 MST}

现在我想修改当前`A[i][j]`矩阵并将权重更改为 1。也就是说，边（索引）也存在于前驱数组中。否则，我将其更改为零。

我该怎么做？这是我的解决方案：

```
for (x....)
   for (y...)
      if (x!=y && (p[x]==y || p[y]==x))
         set to 1
      else
         set to 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:26:04.493

您的伪代码是正确的，这将为您提供一个 0-1 矩阵，它代表 Prim 算法找到的树。然而，这种存储方法相当昂贵，因为它需要 O(n^2) 的空间，而一棵树可以存储在 O(n) 的内存中。

或者，您可以在 O(n^2) 中将矩阵初始化为零，然后在 O(n) 时间内添加边：

```
 for (x ...)
    for (y ...)
       A[x][y] = 0

 for (x ...)
    if (p[x] != x)
      A[x][p[x]] = A[p[x]][x] = 1 
```

# iphone - iPhone如何使用默认的UIImagePicker选择最新拍摄的图像

> ID：11637309
> 
> 赞同：2
> 
> 时间：2012-07-24T18:45:32.687
> 
> 标签：iphone, objective-c, ios, sorting, uiimagepickercontroller

我可以选择显示 UIImagePicker 并在我的应用程序中从用户的相机胶卷中选择图像。我遇到的问题是**照片按最旧的在顶部进行排序**。这使得选择几个月前拍摄的图像变得容易。我希望用户快速选择几分钟前拍摄的图像，而无需滚动到列表末尾（列表底部）。

**有没有要求默认的 UIImagePicker 对其结果进行排序并显示最新的结果，或者在呈现后至少滚动到列表的末尾？**

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
                                   usingDelegate: (id <UIImagePickerControllerDelegate,
                                                   UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] == NO)
        || (delegate == nil)   
        || (controller == nil))
        return NO;

    UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays a control that allows the user to choose picture or
    // movie capture, if both are available:
    cameraUI.mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeImage];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    cameraUI.allowsEditing = NO;

    cameraUI.delegate = delegate;
    [controller presentModalViewController: cameraUI animated: YES];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:03:21.723

如this [question所示](https://stackoverflow.com/questions/3947157/uiimagepickercontroller-is-it-possible-to-change-the-sort-order-of-the-images-i)

该解决方案涉及在选择带有线条的图像之前添加一个额外的步骤：

```
imagePickerController.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
```

这将显示可用照片库的列表并滚动到所选照片库的底部。

# powershell - Powershell - 循环脚本，直到用户选择退出

> ID：11637311
> 
> 赞同：4
> 
> 时间：2012-07-24T18:45:54.690
> 
> 标签：powershell, powershell-2.0

我怎样才能重新开始一个脚本？我有 3 个开关，我希望它们恢复到脚本的开头。

```
Import-Module ActiveDirectory
Write-Host "--Please Login using a.account--"
#login
$credential = Get-Credential
#Main
Write-Host "--Remote Computer Rename v2.0--"
Write-Host "1\. Query AD (Outputs to a text file)"
Write-Host "2\. Quick computer rename"
Write-host "3\. Quit"
$choice=Read-Host "Chose a number to continue"

#AD Query for computer
switch ($choice)
{
 1 {
Write-Host "--Enter first five characters of computer name or full computer name i.e.     USCLT--"
$cn=Read-Host 'Computer name'
$out="$cn*"
Get-ADComputer -Filter 'SamAccountName -like $out' >> c:\myscripts\dsquery.txt
Write-Host "Query complete.  See dsquery.txt saved to Desktop."
}

...rest of my code. 
```

所以在*看到 dsquery.txt 保存到桌面之后。”*我希望它回到写主机部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T14:14:10.650

简单、简短、愚蠢：

```
& cmd /c pause
exit 
```

这甚至会提供 TO 请求的“按任意键”消息。如果您更喜欢留在 PowerShell 中：

```
Read-Host "Press any key to exit..."
exit 
```

但我们也可以得到输入：

```
$reply = Read-Host "Please type EXIT to exit"
if ($reply -eq "EXIT") { exit; } 
```

我喜欢`Read-Host`在键入 Ctrl-C 时退出脚本，就像 cmd`pause`一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T19:09:54.853

我个人最喜欢检查用户输入的是`do { } until ()`循环。这是您添加循环的代码，这将完成您要查找的内容：

```
Import-Module ActiveDirectory
Write-Host "--Please Login using a.account--"
#login
$credential = Get-Credential
#Main
do {
Write-Host "--Remote Computer Rename v2.0--"
Write-Host "1\. Query AD (Outputs to a text file)"
Write-Host "2\. Quick computer rename"
Write-host "3\. Quit"
$choice=Read-Host "Chose a number to continue"

#AD Query for computer
switch ($choice)
{
 1 {
Write-Host "--Enter first five characters of computer name or full computer name i.e.     USCLT--"
$cn=Read-Host 'Computer name'
$out="$cn*"
Get-ADComputer -Filter 'SamAccountName -like $out' >> c:\myscripts\dsquery.txt
Write-Host "Query complete.  See dsquery.txt saved to Desktop."
}

...rest of my code.
} until ($choice -eq 3) 
```

在我看来，这是一个非常独特的策略。我从 Jerry Lee Ford 的书中摘录了这个：Microsoft Windows PowerShell Programming for the absolute 初学者

您可以在此处阅读有关这些和其他所有循环的更多信息：[http ://www.powershellpro.com/powershell-tutorial-introduction/logic-using-loops/](http://www.powershellpro.com/powershell-tutorial-introduction/logic-using-loops/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-13T09:20:54.750

从我发现的[一篇博文中：](https://devblogs.microsoft.com/scripting/powertip-use-powershell-to-wait-for-a-key-press/)

```
echo "Press any key to exit..."
$Host.UI.RawUI.ReadKey("NoEcho, IncludeKeyDown") | OUT-NULL
$Host.UI.RawUI.FlushInputbuffer() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:04:06.857

将整个东西封闭在一个`while (1) {}`块中。**这会创建一个无限循环，只有在遇到中断**（结束循环）或**退出**（结束脚本）时才会终止。据推测，选项 3 将导致这些陈述之一。

# jquery - jquery 加载一次

> ID：11637314
> 
> 赞同：0
> 
> 时间：2012-07-24T18:45:55.963
> 
> 标签：jquery

我有这个代码：

```
<script>   
$(document).ready(function () {
    $('#lnk').click(function(e) {
        e.preventDefault();
        url = $(this).attr('href');
        $("#content").load(this.href);
    });

});
</script>

<a href="http://google.com" id="lnk">Google</a>
<a href="http://gmail.com" id="lnk">Gmail</a>
<div id="content">

</div> 
```

当我单击第一个链接（谷歌）时，它可以工作并将内容加载到我的内容 div 中。但是，当我单击第二个链接 (gmail) 时，它不起作用。

谁能帮我理解这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:53:24.030

ID 是唯一的，您不能有多个具有相同 ID 的元素（`$('#lnk')`将获得第一个元素）。改用类

```
<script>   
$(document).ready(function () {
    $('.lnk').click(function(e) {
        e.preventDefault();
        $("#content").load(this.href);
    });

});
</script>

<a href="http://google.com" class="lnk">Google</a>
<a href="http://gmail.com" class="lnk">Gmail</a> 
```

此外，这也不起作用，因为您不能使用它`.load`来加载任意 URL。这就是所谓的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:53:36.823

JQuery 将事件附加到具有您指定的 ID 的第一件事，因为文档应该只有一个具有该 ID 的元素。试试这个：

```
<script>   
$(document).ready(function () {
    $('.lnk').on('click', function(e) {
        e.preventDefault();
        $("#content").load(this.href);
    });

});
</script>

<a href="http://google.com" class="lnk">Google</a>
<a href="http://gmail.com" class="lnk">Gmail</a>
<div id="content">

</div> 
```

# javascript - 函数调用中的javascript通配符

> ID：11637318
> 
> 赞同：0
> 
> 时间：2012-07-24T18:46:11.190
> 
> 标签：javascript

如果我在页面加载时调用以下函数：

```
addOnload(checkHeaders_m1)
addOnload(checkHeaders_m2)
addOnload(checkHeaders_m3)
addOnload(checkHeaders_m4)
addOnload(checkHeaders_m5) 
```

我可以使用通配符为自己保存一些代码吗？就像是：

```
addOnload(checkHeaders_m\*) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:50:42.963

如果您的 onload 函数是全局的，那么它们将存在于`window`对象上：

```
for (var i = 1; i < 6; i++) {
    addOnload(window['checkHeaders_m' + i]);
} 
```

或者，制作其他对象的函数属性，以免[污染全局命名空间](http://www.javascripttoolbox.com/bestpractices/#namespace)：

```
var myObj = {
    checkHeaders_m1: function () { ... },
    checkHeaders_m2: function () { ... },
    checkHeaders_m3: function () { ... },
    checkHeaders_m4: function () { ... },
    checkHeaders_m5: function () { ... }
};

for (var i = 1; i < 6; i++) {
    addOnload(myObj['checkHeaders_m' + i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:48:53.760

好吧，您总是可以使用数组。但是您仍然必须进行多个函数调用 - 至少使用数组您可以编写循环而不是手动键入这些调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:52:46.353

是什么`checkHeaders_m1...`？这看起来像是数组的理想候选者。

```
for(var i=0; i<checkHeaders_m.length; i++)
{
addOnload(checkHeaders_m[i]); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T18:58:36.117

怎么用`Array.map`？

```
[1,2,3,4,5].map(function(a){addOnload(window['checkHeaders_m'+a]); return a;}); 
```

`window`当然，其他命名空间可能在哪里

或者

```
[checkHeaders_m1,checkHeaders_m2,checkHeaders_m3,checkHeaders_m4,checkHeaders_m5]
 .map(function(ch){addOnload(ch);return ch;}); 
```

# dotnetnuke - 在 DNN 中安装模块期间创建模块控制

> ID：11637320
> 
> 赞同：2
> 
> 时间：2012-07-24T18:46:13.540
> 
> 标签：dotnetnuke, dotnetnuke-module, dotnetnuke-6

我已经完成了 dotnetnuke 模块的开发，但是我需要在安装模块后已经添加了我的控制页面，而不是自己添加所有控制页面

![在此处输入图像描述](../Images/55fbbc225b72c80d3f737224a311f308.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:37:59.387

找到我的答案：

在解决方案资源管理器中，有一个名为模块名称的文件，文件扩展名为 dnn。例如：MyModule.dnn

打开它并查找标签`<moduleControl>`。从那里您可以创建自己的控件，该控件将在安装过程中添加。

这是我的例子：

```
<moduleControl>
    <controlKey>GestionCategories</controlKey>
    <controlSrc>DesktopModules/DemandePosteEnLigne/GestionCategories.ascx</controlSrc>
    <supportsPartialRendering>False</supportsPartialRendering>
    <controlTitle>Gestion des Categories</controlTitle>
    <controlType>Edit</controlType>
    <iconFile />
    <helpUrl />
    <viewOrder>0</viewOrder>
    <supportsPopUps>True</supportsPopUps>
</moduleControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:09:38.493

dnn 之类的没有事件`OnModuleInstalled`。但是您可以通过根据您的要求创建页面模板/门户模板来实现您想要做的事情。

如果您愿意创建 2-3 个新页面，您只需将这些页面导出为模板，然后您可以使用 dnn 文件管理器上传页面模板，然后使用这些页面模板创建页面。这样做的好处是，将来如果您想创建类似的页面，您可以重复使用这些模板。

如果您愿意创建包含超过 5 个页面的整个门户的页面层次结构，则需要使用门户模板。您可以通过登录主机帐户并转到主机 > 门户（站点管理）将门户导出为模板。您必须通过 FTP 上传您的门户模板，然后您必须使用该模板创建新模板。

如果您需要任何其他帮助，请告诉我。

谢谢

# python - 日期时间对象格式

> ID：11637329
> 
> 赞同：13
> 
> 时间：2012-07-24T18:46:37.650
> 
> 标签：python

我正在尝试使用日期时间对象，包括`datetime.month`、`datetime.day`和`datetime.hour`.

问题是这些对象（比如`datetime.month`）将值作为 1、2、3 等赋予 12。相反，我需要这些格式为 01、02、03 等到 12。天数和个月。

我怎样才能切换到这种格式？

* * *

我意识到这不是一个非常明确的问题：

我正在使用字符串格式来打印带有时间戳的字典中的值。

所以，表达式大致是：

```
print "%s-%s-%s"%(date.year, date.month, date.day, etc., len(str) ) 
```

我的值最初采用正确的`"%Y-%m-%d`形式（例如 2000-01-01）。使用上述内容，我得到 2000-1-1。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-24T18:51:10.107

您可以使用字符串格式打印各个属性：

```
print ('%02d' % (mydate.month)) 
```

或者更新的字符串格式（在 python 2.6 中引入）：

```
print ('{0:02d}'.format(a.month))  # python 2.7+ -- '{:02d}' will work 
```

请注意，即使：

```
print ('{0:%m}'.format(a))  # python 2.7+ -- '{:%m}' will work. 
```

将工作。

或者使用 datetime 对象的[strftime](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)方法：

```
print (mydate.strftime('%m')) 
```

只是为了完整起见：

```
print (mydate.strftime('%Y-%m-%d')) 
```

将很好地替换您编辑中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:54:12.220

您可以将它们转换为字符串并简单地填充它们：

```
import datetime

d = datetime.datetime(2012, 5, 25)

m = str(d.month).rjust(2, '0')
print(m) # Outputs "05" 
```

或者你可以只是一个`str.format`：

```
import datetime

d = datetime.datetime(2012, 5, 25)

print("{:0>2}".format(d.month)) 
```

编辑：要回答更新后的问题，您尝试过吗？

```
import datetime
d = datetime.datetime(2012, 5, 25)
print("{:0>4}-{:0>2}-{:0>2}".format(d.year, d.month, d.day)) 
```

您说您最初使用字符串格式打印它们，那么您更改了什么？这段代码：

```
print "%s-%s-%s"%(date.year, date.month, date.day, etc., len(str) ) 
```

没有任何意义，因为我有点不清楚你传入的参数。我假设只是`date.year`,`date.month`和`date.day`，但不清楚。你在执行什么动作`len(str)`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-16T15:23:23.070

[zfill](https://docs.python.org/3/library/stdtypes.html#str.zfill)更容易记住：

```
In [19]: str(dt.month).zfill(2)
Out[19]: '07' 
```

# jenkins - 使用动态项目名称替代复制工件构建步骤

> ID：11637335
> 
> 赞同：2
> 
> 时间：2012-07-24T18:46:54.090
> 
> 标签：jenkins, jenkins-plugins

我有一份工作，当它完成时（构建后操作）触发参数化构建（工作 A）

被触发的构建为 JOB_NAME 的值设置了一个名为 foo 的字符串参数

“作业 A”有一个构建步骤来“从另一个项目复制工件”，如果我将项目名称设置为我正在传递的变量 (%foo%)

我可以确认 %foo% 正在获得正确的值，但是当构建步骤执行时它无法替换变量

这是我收到的错误消息 Unable to find project for artifact copy: %foo%

我正在寻找替代方案来解决我的问题，即如何为来自另一个项目的复制工件动态传递项目名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:24:15.927

您是否查看了 Copy artifacts 构建步骤的帮助？*如果单击项目名称*字段旁边的问号，您将看到以下文本：

> 用于复制工件的源项目的名称。可能包含对 $PARAM 等构建参数的引用（请注意，使用参数时，源项目必须可供所有经过身份验证的用户访问；这可以防止使用参数来访问私有作业的工件）

所以，你应该尝试`$foo`而不是`%foo%`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T20:49:07.350

有类似的问题。

@sti 引用的项目名称上的“问号文本”同时更改，仅显示 maven 模块的信息。

我得到的错误信息：

> 找不到工件副本的项目：XYZ
> 
> 这可能是由于项目名称或权限设置不正确；请参阅作业配置中项目名称的帮助。

提示您缺少权限，但可能很难捕捉或理解（什么样的项目权限？）。

所以对我来说缺少什么：

进入您要从中复制工件的“源”-作业/项目，并检查

```
Permission to Copy Artifact 
```

已正确设置为要复制 INTO 的作业。（或设置为 * 之类的通配符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T00:13:41.627

对于那些使用[jenkins-job-builder 的人](http://docs.openstack.org/infra/jenkins-job-builder/)，您可以像这样设置所需的权限：

```
- job:
    name: project-to-copy-from
    properties:
    - copyartifact:
        projects: "*" 
```

然后你可以`copyartifact`像这样使用：

```
- job:
    name: project-to-copy-to
    builders:
    - copyartifact:
        project: project-to-copy-from
        which-build: last-successful 
```

[http://docs.openstack.org/infra/jenkins-job-builder/properties.html#properties.copyartifact](http://docs.openstack.org/infra/jenkins-job-builder/properties.html#properties.copyartifact)

# mysql - SQL 查询 - 不在一组已在使用的项目中

> ID：11637337
> 
> 赞同：2
> 
> 时间：2012-07-24T18:47:12.043
> 
> 标签：mysql, sql

我正在尝试选择当前未分配给用户的作业。

```
Users table: id | name
Jobs:        id | name
Assigned:    id | user_id | job_id | date_assigned 
```

我想选择所有当前未采取的工作。例子：

用户：

```
id   |   name
--------------
1    |   Chris
2    |   Steve 
```

工作

```
id   |  name
---------------
1    |  Sweep
2    |  Skids
3    |  Mop 
```

已分配

```
id   |   user_id  |   job_id    |   date_assigned 
-------------------------------------------------
1    |   1        |   1         |   2012-01-01
2    |   1        |   2         |   2012-01-02
3    |   2        |   3         |   2012-01-05 
```

不能给两个人分配同一个工作。所以查询会返回

```
[1, Sweep] 
```

自从一天后 Chris 搬到 Skids 后，没有人在做这件事。

至今：

```
SELECT
    *
FROM
    jobs
WHERE
    id
NOT IN
    (
        SELECT
            DISTINCT(job_id)
        FROM
            assigned
        ORDER BY
            date_assigned
        DESC
    ) 
```

但是，此查询在同一数据集上返回 NULL。没有解决扫描作业现在打开的问题，因为它当前没有被处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:51:07.703

```
SELECT a.*
FROM jobs a
LEFT JOIN
(
    SELECT a.job_id
    FROM assigned a
    INNER JOIN
    (
        SELECT MAX(id) AS maxid
        FROM assigned
        GROUP BY user_id
    ) b ON a.id = b.maxid
) b ON a.id = b.job_id
WHERE b.job_id IS NULL 
```

这将获取每个用户的最新作业。一旦我们有了这些工作的列表，我们就会选择不在该列表中的所有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:52:13.900

你可以试试这个变种：

```
select * from jobs
 where id not in (
  select job_id from (
    select user_id, job_id, max(date_assigned)
      from assigned
  group by user_id, job_id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:03:51.380

首先，您需要查看仅包含当前工作分配的列表。订购是不够的。按照您的设置方式，您需要来自已分配的工作分配的不同子集，它们是最新的分配。

所以你想要一个分组子查询，比如

```
select job_id, user_id, max(date_assigned) last_assigned from assigned group by job_id, user_id 
```

把它们放在一起，你得到

```
select id, name from jobs
where id not in (
  select job_id as id from (
    select job_id, user_id, max(date_assigned) last_assigned from assigned 
    group by job_id, user_id
  )
) 
```

作为一项额外功能，您可以传递“last_assigned”的值，它会告诉您作业空闲了多长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T18:52:37.097

我想你可能想要：

```
SELECT *
FROM jobs
WHERE id NOT IN (SELECT job_id
                 from assigned
                 where user_id is not null
                ) 
```

这假设重新分配某人会更改原始分配中的用户 ID。这会发生吗？顺便说一句，我还简化了子查询。

# asp.net - IIS 7 授予文件夹访问权限

> ID：11637342
> 
> 赞同：0
> 
> 时间：2012-07-24T18:47:26.837
> 
> 标签：asp.net, .net, iis, iis-7, permissions

我收到以下错误：

```
ASP.NET is not authorized to access the requested resource. Consider granting access 
rights to the resource to the ASP.NET request identity. ASP.NET has a base process 
identity (typically {MACHINE}\ASPNET on IIS 5 or Network Service on IIS 6) that is used   
if the application is not impersonating. If the application is impersonating via 
<identity impersonate="true"/>, the identity will be the anonymous user (typically 
IUSR_MACHINENAME) orthe authenticated request user. 
```

我读过 IIS 7 中没有 ASPNET 用户。我还添加了 [Machine name]\IIS_IUSRS 但仍然出现错误。我需要添加哪个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:57:28.923

尝试 IIS APPPOOL[apppoolname_without_spaces]。
在 IIS7 中，您的所有应用程序池都在 AppPoolIdentity 下工作。例如，默认应用程序池将拥有用户 IIS APPPOOL\DefaultAppPool。

# c# - 加密 app.config 中的连接字符串

> ID：11637348
> 
> 赞同：49
> 
> 时间：2012-07-24T18:47:41.203
> 
> 标签：c#, sql-server-2008, app-config

我在加密 app.config 中的连接字符串时遇到问题。我有保护 app.config 的 connectionStrings 部分的代码，但密码仍以纯文本形式显示。

我需要加密连接字符串，因此在部署时它不是纯文本。我在 SO for web.config 上看到了类似的问题，但不是 app.config。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2015-03-21T00:11:31.283

您可以轻松地应用与 web.config 相同的解决方案，您只需将 app.config 重命名为 web.config，使用 aspnet_regiis 工具加密，然后将其重命名回 app.config。

1.  将 app.config 重命名为 web.config
2.  打开命令提示符并输入：（
    `%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis -pef "connectionStrings" c:\<folder containing your web.config>` 在文件夹级别停止，不要放结尾的“”）
3.  将 web.config 重命名回 app.config

您可以在记事本中打开它以查看加密文件。在 Visual Studio 中，您会看到它已被解密。您可以像未加密一样使用连接字符串。（请注意，它只能在加密的同一台机器上解密。）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-24T18:52:02.323

看看[这篇文章](http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A)它有一些非常有用的例子。您基本上是`System.Configuration.SectionInformation.ProtectSection`在这里寻求帮助。

还可以查看[实施受保护的配置](http://www.codeproject.com/Articles/15392/Implementing-Protected-Configuration-With-Windows)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-11T13:39:53.343

• 重命名`App.config file to web.config<br>` • 以管理员身份运行命令提示符：

**对于加密：**

`C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -pef "connectionStrings"`您在报价中的项目位置和`-prov "DataProtectionConfigurationProvider"`

前任：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -pef "connectionStrings" "D:\location\location1\location" -prov "DataProtectionConfigurationProvider" 
```

**对于解密：**

`C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -pdf "connectionStrings"`您的项目位置在引号内。

前任：

```
C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -pdf "connectionStrings" "D:\location1\location" 
```

**对于错误：**

在配置中添加这个`xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"`

像这样：

[![在此处输入图像描述](../Images/590825929f1c598eeddfe584532310a0.png)](https://i.stack.imgur.com/Xhiag.png)

• 最后，重命名`web.config`为`App.Config`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-26T20:23:12.077

此外，如果有人想在**网络场**中加密和解密连接字符串，请执行以下步骤：

1.  创建 RSA 密钥： `aspnet_regiis -pc "MyKeys" -exp`

2.  授予应用程序池标识对此密钥的访问权限： `aspnet_regiis -pa "MyKeys" "IIS AppPool\ApplicationPoolName" -full`

3.  将 RSA 提供程序添加到 web.config：

    ```
    <configuration>
        <configProtectedData>
            <providers>
                <add name="MyProvider" 
                     type="System.Configuration.RsaProtectedConfigurationProvider, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" 
                     keyContainerName="MyKeys" 
                     useMachineContainer="true" />
            </providers>
        </configProtectedData>
    </configuration> 
    ```

4.  使用 RSA 提供程序加密 web.config： `aspnet_regiis -pe "connectionStrings" -app "/MyApplication" -prov "MyProvider"` 注意：您可以使用另一种语法，就像我们为单个服务器方案所做的那样。例子： `ASPNET_REGIIS -pef "connectionStrings" "D:\inetpub\wwwroot\applicationFolder" -prov "MyProvider"`

5.  打开 web.config 并确认连接字符串已加密

6.  测试站点并确认它正在运行

7.  尝试解密 web.config。使用下面的代码创建一个 test.aspx 文件。浏览它以查看解密文件

8.  将 RSA 密钥导出到 C 盘： `aspnet_regiis -px "MyKeys" "c:\keys.xml" -pri`

9.  将此文件复制到网络场中的第二个服务器

10.  将其导入该服务器： `aspnet_regiis -pi "MyKeys" "c:\keys.xml"`

11.  授予对此密钥的访问权限（与步骤 2 相同）

12.  在第二台服务器中测试应用程序

来源：[如何加密和解密连接字符串](https://port135.com/2019/07/26/how-to-encrypt-and-decrypt-connection-strings/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-11T05:30:16.747

定义`config`文件的位置

```
Configuration config  = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

如果你想加密 `connectionStrings`

```
config.ConnectionStrings.SectionInformation.ProtectSection(Nothing); 
```

您必须了解应用程序配置部分

所以如果你想加密`AppSettings`

```
config.AppSettings.SectionInformation.ProtectSection(Nothing); 
```

[![在此处输入图像描述](../Images/948a807195b2a631bd81ed58fd4a3622.png)](https://i.stack.imgur.com/K9nf1.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-06T13:41:49.607

一种自动化的方法：

ProjectSettings > Compile > BuildEvents > Edit Post-build

粘贴以下代码：

```
SET ApplicationName=YourAppWithoutExtention
echo.
echo POST BUILD ACTIONS
echo ====================

if EXIST web.config (
    echo Deleting web.config
    DEL web.config
)

echo Renaming %ApplicationName%.exe.config to web.config
REN %ApplicationName%.exe.config web.config

echo Running aspnet_regis against webconfig
SET rpath=%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis -pef "connectionStrings" "$(TargetDir)
SET rpath=%rpath:~0,-1%"
echo Path: %rpath%
%rpath%

echo Renaming web.config to %ApplicationName%.exe.config 
REN web.config %ApplicationName%.exe.config

echo Done. 
```

将“YourAppWithoutExtention”替换为您的应用名称。

然后每次构建时，它都会自动加密你的 app.config。

# node.js - 比较猫鼬_id和字符串

> ID：11637353
> 
> 赞同：265
> 
> 时间：2012-07-24T18:48:04.830
> 
> 标签：node.js, mongodb, mongoose

我有一个 node.js 应用程序，它提取一些数据并将其粘贴到一个对象中，如下所示：

```
var results = new Object();

User.findOne(query, function(err, u) {
    results.userId = u._id;
} 
```

当我根据存储的 ID 执行 if/then 时，比较永远不会正确：

```
if (results.userId == AnotherMongoDocument._id) {
    console.log('This is never true');
} 
```

当我对两个 id 进行 console.log 时，它们完全匹配：

```
User id: 4fc67871349bb7bf6a000002 AnotherMongoDocument id: 4fc67871349bb7bf6a000002 
```

我假设这是某种数据类型问题，但我不确定如何将 results.userId 转换为会导致上述比较成立的数据类型，而我的外包大脑（又名 Google）一直无法提供帮助。

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-07-24T19:38:21.100

Mongoose 使用 mongodb-native 驱动程序，该驱动程序使用自定义 ObjectID 类型。您可以将 ObjectID 与`.equals()`方法进行比较。以你的例子，`results.userId.equals(AnotherMongoDocument._id)`. ObjectID 类型也有一个`toString()`方法，如果您希望以 JSON 格式或 cookie 存储 ObjectID 的字符串化版本。

如果您使用`ObjectID = require("mongodb").ObjectID`（需要 mongodb-native 库），您可以`results.userId`使用`results.userId instanceof ObjectID`.

等等。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-07-24T19:38:07.513

`ObjectID`s 是对象，所以如果你只是将它们与`==`你比较它们的引用。如果要比较它们的值，则需要使用以下`ObjectID.equals`方法：

```
if (results.userId.equals(AnotherMongoDocument._id)) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-03-28T10:27:01.793

将对象 id 转换为字符串（使用 toString() 方法）将完成这项工作。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-02-21T04:00:29.230

根据以上，我找到了解决问题的三种方法。

1.  `AnotherMongoDocument._id.toString()`
2.  `JSON.stringify(AnotherMongoDocument._id)`
3.  `results.userId.equals(AnotherMongoDocument._id)`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-05-24T18:58:26.773

接受的答案确实限制了您可以对代码执行的操作。例如，您将无法`Object Ids`使用 equals 方法搜索数组。相反，总是转换为字符串并比较键会更有意义。

如果您需要`indexOf()`在引用数组中检查特定 ID，这是一个示例答案。假设`query`是您正在执行的查询，假设`someModel`是您正在寻找的 id 的 mongo 模型，最后假设`results.idList`是您正在寻找对象 id 的字段。

```
query.exec(function(err,results){
   var array = results.idList.map(function(v){ return v.toString(); });
   var exists = array.indexOf(someModel._id.toString()) >= 0;
   console.log(exists);
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-01-16T18:58:03.823

这里建议的三种可能的解决方案具有不同的用例。

1.  `.equals`在像这样比较两个 mongoDocuments 上的 ObjectId 时使用

```
results.userId.equals(AnotherMongoDocument._id) 
```

2.  `.toString()`在将 ObjectId 的字符串表示形式与 mongoDocument 的 ObjectId 进行比较时使用。像这样

```
results.userId === AnotherMongoDocument._id.toString() 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-21T17:59:58.623

我遇到了完全相同的问题，我只是在以下帮助下解决了这个问题`JSON.stringify()`：-

```
if (JSON.stringify(results.userId) === JSON.stringify(AnotherMongoDocument._id)) {
        console.log('This is never true');
} 
```

# node.js - node.js sybase 驱动程序

> ID：11637354
> 
> 赞同：5
> 
> 时间：2012-07-24T18:48:05.673
> 
> 标签：node.js, sap-ase

我正在使用 node.js express 框架开发一个应用程序，并且需要连接到 sybase ASE 数据库。我做了足够的搜索，但找不到 node.js 的 sybase 驱动程序。node.js 不支持 sybase 还是我应该使用通用驱动程序之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T22:40:35.030

node.js wiki 上提供了详尽的数据库驱动程序列表：

[https://github.com/joyent/node/wiki/Modules#wiki-database](https://github.com/joyent/node/wiki/Modules#wiki-database)

但是没有 Sybase，因此只能使用 ODBC 驱动程序，如果 on `*nix`，那么您可以选择：

[https://github.com/w1nk/node-odbc](https://github.com/w1nk/node-odbc)

或者，Sybase ASE 拥有自己的[Web 服务引擎](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc10061.1570/html/wbsrvcs/BHCEGAEG.htm)，该引擎通过 SOAP API 公开 SQL 和存储过程。您最好的选择可能是针对该 API 在节点中滚动您自己的 SOAP 客户端，可能使用[node-soap](https://github.com/milewise/node-soap)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-27T15:28:31.250

截至 2015 年，基于 Jconnect 的非 odbc 实现可用。它需要Java。

你可以安装它

```
npm install sybase 
```

更多信息： [https ://www.npmjs.com/package/sybase](https://www.npmjs.com/package/sybase)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-23T17:33:34.060

我知道已经有一段时间了，但如果你还在寻找，试试这个：

[https://www.npmjs.org/package/sqlanywhere](https://www.npmjs.org/package/sqlanywhere)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:41:14.427

node.js 根本不提供数据库支持。

数据库连接器超出了 node.js 发行版的范围。但是 cummunity 填补了这里的空白，例如对于 mysql 有[node-mysql](https://github.com/felixge/node-mysql)。

这里的问题是您想使用没有大型（开源）社区的数据库，因此，经过一番谷歌搜索，没有 node.js 连接器。

如果您想为 sybase ASE 创建一个连接器，您可以查看 node-mysql 以获取入门。但这不是你在一个周末所做的事情。

# c# - 检查列表是否包含字符串

> ID：11637355
> 
> 赞同：-3
> 
> 时间：2012-07-24T18:48:05.823
> 
> 标签：c#

如何检查列表是否包含字符串或后跟该字符串的任何数字？我需要在列表中添加字符串。在将其添加到列表中时，我必须检查该字符串是否已存在于该列表中。如果是这样，需要插入具有整数计数的字符串。也就是说，如果名称已经存在意味着它应该作为“Name1”插入。如果我再次添加名称意味着它应该作为 name2 插入。等等......我怎样才能做到这一点？

```
List<Names> NameList=new List<Names>();

Name name=new Name();
name.Name="Name";
NameList.Add(Name);

Name name1=new Name();
name1.Name="Name";
NameList.Add(Name1);

Name name2=new Name();
name2.Name="Name";
NameList.Add(Name2);

Public class Name
{
 string Name {get;set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:52:20.050

您的代码无法编译，但我假设您正在谈论`List<string>`. 如果是这样，算法可能是：

```
string val = "Name";
string toInsert = val;
int n = 1;
while(list.Contains(toInsert))
{
   toInsert = val + n++;
}
list.Add(toInsert); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:45:44.203

你应该看看[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)课堂。

有了这个，您可以在 O(1) 中进行查找。但请注意，这会使用您的类的方法`Equals()`和方法`GetHashCode()`来检查是否相等。因此，要么将简单的字符串放入集合中进行检查，要么`IEqualityComparer`为您的 Name 类编写适当的字符串，并将其实例放入哈希集的构造函数中。如果您需要帮助来编写一个好的`GetHashCode`实现，请查看这个[SO question](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)。

# javascript - 在拖动期间更改 jQuery 可拖动助手

> ID：11637356
> 
> 赞同：3
> 
> 时间：2012-07-24T18:48:07.713
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

我正在尝试根据拖动元素所在位置的上下文来更改可拖动的帮助器（表明您可以通过更改帮助器将元素放在那里）。

我脑子里有两个想法：

1.  将助手声明为函数，并返回适当的助手。不幸的是，该函数仅在拖动开始时被调用一次。

2.  在拖动事件中，更改助手。这听起来像是最好的选择。问题是我找不到如何将帮助程序更改为特定的 DOM 元素（仅接受的值是“克隆”、“原始”和函数。

我错过了什么或者这是不可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:32:35.433

您可以在拖动事件中访问帮助程序：

```
$('#list').draggable({helper:'clone'});

$("#list").bind("drag", function(event, ui) {
    ui.helper.css("background-color", "red");
}); 
```

UI 参数是指被拖动的元素。ui.helper 是当前助手的实例，可以即时修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T17:56:48.423

在我的例子中，可拖动是 Adob​​e Edge 的一个符号，所以我必须在一个类中为其中一个“层”播种，然后我可以在拖动时更改它。因此，当创建符号时，我这样做了；

```
drag.$("drag_label").addClass("dragLabel"); 
```

此类分配将使用助手克隆（与对象数据不同），然后在可拖动对象中我可以执行此操作；

```
start: function(event, ui) {
    $(ui.helper).find(".dragLabel").css("color", "#FF0000");
    ...
}, 
```

# java - 使用 oracle ADF 进行分页

> ID：11637358
> 
> 赞同：0
> 
> 时间：2012-07-24T18:48:21.343
> 
> 标签：java, oracle-adf

```
I have problem in Oracle ADF pagination 
Bean code is:     
    private UIXIterator purVO1Iterator;
private int rowsPerPage = 20;
public void previousActionListener(ActionEvent actionEvent) {
this.getPurVO1Iterator().setFirst(this.getPurVO1Iterator().getFirst() -
                                  rowsPerPage);
}

public void nextActionListener(ActionEvent actionEvent) {
this.getPurVO1Iterator().setFirst(this.getPurVO1Iterator().getFirst() +
                                  rowsPerPage); 
```

} jsp 代码是：

```
 <af:iterator id="i11" var="row" 
          value="#{bindings.purVO1.collectionModel}"
          binding="#{backingBeanScope.Purchage.purVO1Iterator}"
          rows="#{backingBeanScope.Purchage.rowsPerPage}"> 
```

.....................

这里的问题是我们单击下一步按钮需要很长时间。有没有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:53:46.427

您需要检查迭代器 Purchage 使用的可执行文件的范围设置。此外，您应该检查 VO 调整部分的设置以进行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:45:04.863

您必须转到定义此迭代器树的 pageDef 并在那里设置迭代器的 rangeSize。此外，您可能需要检查 VO 定义。在迭代器上设置它不会覆盖在 VO 上完成的设置。

# xslt - 使用 XSLT 选择属性时遇到问题

> ID：11637360
> 
> 赞同：0
> 
> 时间：2012-07-24T18:48:31.910
> 
> 标签：xslt

我需要选择 Property1 和 SubProperty2 并删除任何其他属性。我需要做这个未来的证明，以便添加到 xml 的任何新属性都不会破坏验证。默认情况下，iow 的新字段必须被剥离。

```
<Root>
    <Property1/>
    <Property2/>
    <Thing>
        <SubProperty1/>
        <SubProperty2/>
    </Thing>
    <VariousProperties/>
</Root> 
```

所以在我的 xslt 中我这样做了：

```
 <xsl:template match="Property1">
     <Property1>
       <xsl:apply-templates/>
     </Property1>
  </xsl:template>

 <xsl:template match="/Thing">
    <SubProperty1>
      <xsl:apply-templates select="SubProperty1" />
    </SubProperty1>
 </xsl:template>

 <xsl:template match="*" /> 
```

最后一行应该去掉我没有定义为选中的任何内容。

这适用于选择我的 property1，但它总是为 SubProperty 选择一个空节点。* 上的匹配似乎在我对它们的匹配起作用之前去除了更深的对象。我删除了 * 上的匹配项，它选择了带有值的子属性。那么，我怎样才能选择子属性并仍然剥离我不使用的所有内容。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:43:58.843

**有两个问题**：

```
<xsl:template match="*"/> 
```

这将忽略任何没有覆盖的、更具体的模板的元素。

因为顶部元素没有特定的模板，所以`Root`它连同它的所有子树（即完整的文档）一起被忽略，根本不产生任何输出。

**第二个问题在这里**：

```
<xsl:template match="/Thing"> 
```

此模板匹配名为 的顶部元素`Thing`。

但是在提供的文档中，顶部元素被命名为`Root`. 因此，上面的模板与提供的 XML 文档中的任何节点都不匹配，并且永远不会被选中执行。由于其主体内的代码应该生成`SubProperty1`，因此不会生成这样的输出。

**解决方案**：

**改变**

```
<xsl:template match="*"/> 
```

**至**：

```
<xsl:template match="text()"/> 
```

**并改变**

```
<xsl:template match="/Thing"> 
```

**至**

```
<xsl:template match="Thing"> 
```

**整个转变变成**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

      <xsl:template match="Property1">
         <Property1>
           <xsl:apply-templates/>
         </Property1>
      </xsl:template>

     <xsl:template match="Thing">
        <SubProperty1>
          <xsl:apply-templates select="SubProperty1" />
        </SubProperty1>
     </xsl:template>

     <xsl:template match="text()" />
</xsl:stylesheet> 
```

**并且当应用于以下 XML 文档时**（由于提供的格式严重错误，必须对其进行修复）：

```
<Root>
    <Property1/>
    <Property2/>
    <Thing>
        <SubProperty1/>
        <SubProperty2/>
    </Thing>
    <VariousProperties/>
</Root> 
```

**现在的结果就是想要的**：

```
<Property1/>
<SubProperty1/> 
```

# php - Symfony 2 字段实体的翻译

> ID：11637363
> 
> 赞同：2
> 
> 时间：2012-07-24T18:48:44.310
> 
> 标签：php, frameworks, symfony, entity

对于一个项目，我必须在实体中有一些字段，这些字段需要使用多种语言。例如，对于一个实体`Product`，字段`description`需要使用多种语言。

如何用 Symfony 2 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:05:03.660

[`DoctrineExtensions`](https://github.com/l3pp4rd/DoctrineExtensions)提供您需要[的功能](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/translatable.md)[`StofDoctrineExtensionsBundle`](https://github.com/stof/StofDoctrineExtensionsBundle)并提供与 Symfony 的集成。

# java - dropwizard：从同一个类中生成 html 和 json

> ID：11637365
> 
> 赞同：2
> 
> 时间：2012-07-24T18:48:48.800
> 
> 标签：java, dropwizard

有没有办法从客户端控制输出格式？

我有一堂课

```
@Produces(MediaType.TEXT_HTML) 
```

我希望它在客户端请求时生成**json 。**

我可以逐字复制类，只替换**@Path**和**@Produces**注释，但这看起来完全是浪费。

我想知道客户端是否可以将**&content-type=application/json**之类的内容附加到 URL 并让我的服务器使用 json 而不是 html 响应？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T19:03:09.917

您需要将资源注释为同时提供 HTML 和 JSON：

```
@Produces({MediaType.TEXT_HTML, MediaType.APPLICATION_JSON}) 
```

然后只需确保您已`MessageBodyWriter`注册实现来处理方法的返回类型。Dropwizard`JacksonMessageBodyProvider`应该处理 JSON；如果您使用的是 Dropwizard 视图，`ViewMessageBodyWriter`则应处理其余部分。Jersey 将与客户端进行内容协商，前提是您的客户端`application/json`在请求的`Accept`标头中有。

# c# - 使用 FileStream 在 C# 中打开文件

> ID：11637370
> 
> 赞同：5
> 
> 时间：2012-07-24T18:49:02.217
> 
> 标签：c#, binary, hex, filestream

我正在尝试打开一个我计划转换为十六进制的二进制文件，但我在通过 FileStream 读取文件时遇到了问题，

```
private void button1_Click(object sender, EventArgs e)
{
    openFD.Title = "Insert a BIN file";
    openFD.InitialDirectory = "C:"; // Chooses the default location to open the file
    openFD.FileName = " "; // Iniitalizes the File name
    openFD.Filter = "Binary File|*.bin|Text File|*.txt"; // FIlters the types of files allowed to by chosen

    if (openFD.ShowDialog() != DialogResult.Cancel)
    {
        chosenFile = openFD.FileName;
        string directoryPath = Path.GetDirectoryName(chosenFile); // Returns the directory and the file name to reference the file
        string dirName = System.IO.Path.GetDirectoryName(openFD.FileName); // Returns the proper directory with which to refernce the file 
        richTextBox1.Text += dirName;
        richTextBox1.Text += chosenFile;
        FileStream InputBin = new FileStream(
            directoryPath, FileMode.Open, FileAccess.Read, FileShare.None);
    }
} 
```

我收到一条错误消息，提示访问路径被拒绝，有什么想法吗？

现在我已经解决了这个错误，我遇到了另一个问题，我可以读取二进制文件，但我想将它显示为 Hex 文件，我不确定我做错了什么，但我不是在 HEX 中获得输出，它似乎是 Int 值......

```
if (openFD.ShowDialog() != DialogResult.Cancel)
        {

            chosenFile = openFD.FileName;
            string directoryPath = Path.GetDirectoryName(chosenFile); 
            string dirName = System.IO.Path.GetDirectoryName(openFD.FileName);
            using (FileStream stream = new FileStream(chosenFile, FileMode.Open, FileAccess.Read))
            {
                size = (int)stream.Length;
                data = new byte[size];
                stream.Read(data, 0, size);
            }

            while (printCount < size)
            {
                richTextBox1.Text += data[printCount];
                printCount++;
            } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T18:51:47.863

您的代码注释错误

```
string directoryPath = Path.GetDirectoryName(chosenFile); // Returns the directory and the file name to reference the file 
```

不是文件名，而是目录路径。你要：

```
FileStream InputBin = new FileStream(chosenFile, FileMode.Open,FileAccess.Read, FileShare.None); 
```

另外，如果我要根据您的意图进行猜测，您应该将您的完整功能更新为：

```
private void button1_Click(object sender, EventArgs e)
{
    openFD.Title = "Insert a BIN file";
    openFD.InitialDirectory = "C:"; // Chooses the default location to open the file
    openFD.FileName = " "; // Iniitalizes the File name
    openFD.Filter = "Binary File|*.bin|Text File|*.txt"; // FIlters the types of files allowed to by chosen

    if (openFD.ShowDialog() != DialogResult.Cancel)
    {
        chosenFile = openFD.FileName;

        richTextBox1.Text += chosenFile; //You may want to replace this with = unless you mean to append something that is already there.

        FileStream InputBin = new FileStream(chosenFile, FileMode.Open,FileAccess.Read, FileShare.None);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:42:27.150

要回答您的第二个问题：

> 我收到一条错误消息，提示访问路径被拒绝，有什么想法吗？
> 
> 现在我已经解决了这个错误，我遇到了另一个问题，我可以读取二进制文件，但我想将它显示为 Hex 文件，我不确定我做错了什么，但我不是在 HEX 中获得输出，它似乎是 Int 值......

修改为使用string.Format：

```
 if (openFD.ShowDialog() != DialogResult.Cancel)
    {

        chosenFile = openFD.FileName;
        string directoryPath = Path.GetDirectoryName(chosenFile); 
        string dirName = System.IO.Path.GetDirectoryName(openFD.FileName);
        using (FileStream stream = new FileStream(chosenFile, FileMode.Open, FileAccess.Read))
        {
            size = (int)stream.Length;
            data = new byte[size];
            stream.Read(data, 0, size);
        }

        while (printCount < size)
        {
            richTextBox1.Text += string.Format( "{0:X} ", data[printCount];
            printCount++;
        }
    } 
```

我已经包含了一个[ideone 示例](http://ideone.com/GR8Uv)。

# scala - 为什么在 Scala 中没有 StringBuilder.+=(String)？

> ID：11637372
> 
> 赞同：10
> 
> 时间：2012-07-24T18:49:04.273
> 
> 标签：scala, types

这种行为似乎被打破了（我使用的是 Scala 2.9.1）

```
var b= new StringBuilder 
```

这些都可以：

```
b+='a'
b.append('b') 
b.append("de") 
```

这会产生编译错误：

```
b+="de" 
```

关于为什么只有 StringBuilder#+=(c: Char) 存在而 StringBuilder#append(c:Char) 和 StringBuilder#append(s:String) 愉快地共存的任何想法？声明和实现 StringBuilder#+=(s: String) 有什么问题？

是疏忽还是 Scala 类型系统中的一些更深层次的问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T18:52:18.180

试试`b ++= "de"`。A`String`被认为是 s 的集合`Char`。

# django - Django url 标签 - 静态与动态“path.to.view”参数

> ID：11637379
> 
> 赞同：0
> 
> 时间：2012-07-24T18:49:43.507
> 
> 标签：django, django-templates, django-1.4

我是 Django 的新手并且很困惑。使用 Django 1.4。在我的一个模板中，此代码有效：

```
{% for element0, element1 in menu.elements %}
    <li class='menu_{{ name }}'><a href="{% url users.views.home %}">{{ element0 }}</a></li>
{% endfor %} 
```

...但此代码引发“NoReverseMatch”错误：

```
{% for element0, element1 in menu.elements %}
    <li class='menu_{{ name }}'><a href="{% url element1 %}">{{ element0 }}</a></li>
{% endfor %} 
```

...尽管“element1”变量包含“users.views.home”。我在想/希望这个问题的解决方案真的很简单......我错过了一些关于 Django 模板中变量处理的明显内容？

我已经查阅了url 内置函数的[文档，但无济于事。](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:57:36.130

我认为您需要将其添加到您的模板中：

```
{% load url from future %} 
```

并将第一个调用更改为

```
 {% url 'users.views.home' %} 
```

请参阅您链接到的文档中的前向兼容性说明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:40:37.137

这样写不好`{% url 'users.views.home' %}`，最好使用命名为 url - `{% url 'users_home' %}`，以后容易维护。例如，如果您决定将`def home(request)`from移动`users.views`到`account.views`您将需要替换所有模板中出现的所有 url。但是如果你使用命名的 url，你只需要改变`urls.py`

# python - Pandas 加入/合并/合并两个数据帧

> ID：11637384
> 
> 赞同：22
> 
> 时间：2012-07-24T18:50:11.920
> 
> 标签：python, pandas

我在加入 pandas 时遇到问题，我试图找出问题所在。假设我有一个`dataframe`x：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 1941 entries, 2004-10-19 00:00:00 to 2012-07-23 00:00:00
Data columns:
close    1941  non-null values
high     1941  non-null values
low      1941  non-null values
open     1941  non-null values
dtypes: float64(4) 
```

我应该能够通过一个简单的连接命令将它与索引上的 y 连接起来，其中 y = x 除了 colnames 有 +2。

```
 <class 'pandas.core.frame.DataFrame'>
 DatetimeIndex: 1941 entries, 2004-10-19 00:00:00 to 2012-07-23 00:00:00
 Data columns:
 close2    1941  non-null values
 high2     1941  non-null values
 low2      1941  non-null values
 open2     1941  non-null values
 dtypes: float64(4)

 y.join(x) or pandas.DataFrame.join(y,x):
 <class 'pandas.core.frame.DataFrame'>
 DatetimeIndex: 34879 entries, 2004-12-16 00:00:00 to 2012-07-12 00:00:00
 Data columns:
 close2    34879  non-null values
 high2     34879  non-null values
 low2      34879  non-null values
 open2     34879  non-null values
 close     34879  non-null values
 high      34879  non-null values
 low       34879  non-null values
 open      34879  non-null values
 dtypes: float64(8) 
```

我希望决赛对两者都有 1941 个非值。我也尝试过合并，但我有同样的问题。

我原以为正确的答案是 pandas.concat([x,y])，但这也不是我想要的。

```
In [83]: pandas.concat([x,y]) 
Out[83]: <class 'pandas.core.frame.DataFrame'> 
DatetimeIndex: 3882 entries, 2004-10-19 00:00:00 to 2012-07-23 00:00:00 
Data columns: 
close2 3882 non-null values 
high2 3882 non-null values 
low2 3882 non-null values 
open2 3882 non-null values 
dtypes: float64(4) 
```

编辑：如果您在加入时遇到问题，请阅读下面 Wes 的回答。我有一个重复的时间戳。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-24T21:10:36.830

您的索引是否有重复项`x.index.is_unique`？如果是这样可以解释您所看到的行为：

```
In [16]: left
Out[16]: 
            a
2000-01-01  1
2000-01-01  1
2000-01-01  1
2000-01-02  2
2000-01-02  2
2000-01-02  2

In [17]: right
Out[17]: 
            b
2000-01-01  3
2000-01-01  3
2000-01-01  3
2000-01-02  4
2000-01-02  4
2000-01-02  4

In [18]: left.join(right)
Out[18]: 
            a  b
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-01  1  3
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4
2000-01-02  2  4 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-24T18:54:43.090

听起来你可能想要`pandas.concat`？ `merge`并且`join`，好吧，加入，这意味着它们会根据两个输入的笛卡尔积为您提供一些东西，但听起来您只是想将它们粘贴到一张大表中。

编辑：你尝试过 concat`axis=1`吗？它似乎可以满足您的要求：

```
>>> print x
          A         B         C
0  0.155614 -0.252148  0.861163
1  0.973517  1.156465 -0.458846
2  2.504356 -0.356371 -0.737842
3  0.012994  1.785123  0.161667
4  0.574578  0.123689  0.017598
>>> print y
         A2        B2        C2
0 -0.280993  1.278750 -0.704449
1  0.140282  1.955322 -0.953826
2  0.581997 -0.239829  2.227069
3 -0.876146 -1.955199 -0.155030
4 -0.518593 -2.630978  0.333264
>>> print pandas.concat([x, y], axis=1)
          A         B         C        A2        B2        C2
0  0.155614 -0.252148  0.861163 -0.280993  1.278750 -0.704449
1  0.973517  1.156465 -0.458846  0.140282  1.955322 -0.953826
2  2.504356 -0.356371 -0.737842  0.581997 -0.239829  2.227069
3  0.012994  1.785123  0.161667 -0.876146 -1.955199 -0.155030
4  0.574578  0.123689  0.017598 -0.518593 -2.630978  0.333264 
```

# jsf-2 - JSF p:remoteCommand 和 javascript 事件 onbeforeunload

> ID：11637386
> 
> 赞同：1
> 
> 时间：2012-07-24T18:50:24.917
> 
> 标签：jsf-2, primefaces, internet-explorer-9, java-ee-6, onbeforeunload

我们有几个用户可以登录的 Web 应用程序。单击注销按钮时，必须处理一些逻辑。问题是大多数用户没有点击注销按钮就关闭了浏览器。我尝试了以下方法在浏览器关闭时调用我的逻辑：

1.  将事件“onbeforeunload”添加到我的框架集中。在浏览器关闭时，将调用注销功能。
2.  在我的注销功能中，我使用 primefaces p:remoteCommand 组件来调用服务器上的操作侦听器。

在当前的 Firefox 版本中，一切正常，但 IE9 有一些问题。在 IE9 中关闭选项卡调用我的逻辑。关闭浏览器不起作用。调用了我的 JS 函数，但未执行对服务器的请求。有没有办法解决这个问题？顺便说一句：我知道这不是一个 100% 的解决方案，但我们确实需要这个功能。我的函数和 p:remoteCommand 看起来像这样。

```
function automaticLogout() {
    handleAutomaticLogout();
    alert('BlaBla');
}

<p:remoteCommand name="handleAutomaticLogout" actionListener="#{myBean.handleAutomaticLogout}" async="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:36:37.073

您是否特别需要客户端 Javascript 解决方案，或者这只是您目前采用的方式？

在服务器端，在 Backing Bean 方法上方放置`@PreDestroy`注释会导致该方法在 Bean 超出范围之前被调用。

如果您使用此注释编写[使会话](http://www.ibm.com/developerworks/websphere/library/bestpractices/releasing_and_invalidating_httpsessions.html)( `session.invalidate()`) 无效的方法，则当用户离开您的页面而不单击注销时将调用该方法。

**支持豆：**

```
import javax.annotation.PreDestroy;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;
import javax.servlet.http.HttpSession;

@ManagedBean
@SessionScoped
public class PreDestroyBean {

    //Called by button - log out perhaps?
    public void killTheSessionDeliberately() {
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        session.invalidate();
    }

    @PreDestroy
    public void revokeLicense() {
        System.out.println("PreDestroy method was called.");

    }
} 
```

**页面按钮：**

```
<h:form>
    <p:commandButton id="killSession" value="Kill Session" 
            actionListener="#{preDestroyBean.killTheSessionDeliberately()}" update="@form" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T15:07:54.350

您可以将 p:remoteCommand 与 onunload 一起使用。例子：

```
<body onunload="test();"> 
    <form id="exit">
       <p:remoteCommand  id="test" name="test" action="#{ContatoMB.teste}"/>
    </form>
</body> 
```

引用[http://forum.primefaces.org/viewtopic.php?f=3&t=15695](http://forum.primefaces.org/viewtopic.php?f=3&t=15695) 它对我有用。

# php - PHP - 带有特殊字符的 X 字符后的子字符串

> ID：11637390
> 
> 赞同：3
> 
> 时间：2012-07-24T18:50:35.180
> 
> 标签：php, special-characters

对不起标题，我真的不知道该怎么说......

我经常有一个字符串需要在 X 字符之后剪切，我的问题是这个字符串通常包含特殊字符，例如：& egrave ;

所以，我想知道，他们是在 php 中了解的一种方式，而无需转换我的字符串，如果当我切割我的字符串时，我处于一个特殊字符的中间。

**例子**

```
This is my string with a special char : &egrave; - and I want it to cut in the middle of the "&egrave;" but still keeping the string intact 
```

所以现在我的子字符串结果是：

```
This is my string with a special char : &egra 
```

但我想要这样的东西：

```
This is my string with a special char : &egrave; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:10:37.407

最好的办法是将您的字符串存储为 UTF-8 而不使用任何 html 实体，并使用`mb_*`函数族`utf8`作为编码。

但是，如果您的字符串是 ASCII 或 iso-8859-1/win1252，您可以使用`HTML-ENTITIES`mb_string 库的特殊编码：

```
$s = 'This is my string with a special char : &egrave; - and I want it to cut in the middle of the "&egrave;" but still keeping the string intact';
echo mb_substr($s, 0, 40, 'HTML-ENTITIES');
echo mb_substr($s, 0, 41, 'HTML-ENTITIES'); 
```

但是，**如果您的底层字符串是 UTF-8 或其他一些多字节编码**，那么使用`HTML-ENTITIES`是**不安全**的！这是因为`HTML-ENTITIES`真正的意思是“win1252 将高位字符作为 html 实体”。这是一个可能出错的示例：

```
// Assuming that é is in utf8:
mb_substr('é ', 0, 2, 'HTML-ENTITIES') === '&Atilde;&copy;'
// should be '&eacute; ' 
```

当您的字符串采用多字节编码时，您必须在拆分之前将所有 html 实体转换为通用编码。例如：

```
$strings_actual_encoding = 'utf8';
$s_noentities = html_entity_decode($s, ENT_QUOTES, $strings_actual_encoding); 
$s_trunc_noentities =  mb_substr($s_noentities, 0, 41, $strings_actual_encoding); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T18:55:19.343

您可以先使用 html_entity_decode() 来解码所有 HTML 实体。然后拆分你的字符串。然后 htmlentities() 重新编码实体。

```
$decoded_string = html_entity_decode($original_string);
// implement logic to split string here

// then for each string part do the following:
$encoded_string_part = htmlentities($split_string_part); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T18:57:04.240

最长的 HTML 实体为 10 个字符，包括 & 和分号。如果您打算在`X`字节处剪切字符串，请检查字节`X-9`中`X-1`的与号。如果相应的分号出现在 byte`X`或之后，则在分号之后而不是 byte 之后剪切字符串`X`。

但是，如果您愿意对字符串进行预处理，Mike 的解决方案会更准确，因为他在 characters 处切割字符串`X` *，*而不是字节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T19:04:12.193

*最好*的解决方案是将文本存储为 UTF-8，而不是将它们存储为 HTML 实体。除此之外，如果您不介意计数关闭（`&grave;`等于一个字符，而不是 7），那么以下代码段应该可以工作：

```
<?php
$string = 'This is my string with a special char : &egrave; - and I want it to cut in the middle of the "&egrave;" but still keeping the string intact';
$cut_string = htmlentities(mb_substr(html_entity_decode($string, NULL, 'UTF-8'), 0, 45), NULL, 'UTF-8')."<br><br>"; 
```

***注意：**如果您使用不同的函数对文本进行编码（例如`htmlspecialchars()`），则使用该函数而不是`htmlentities()`. 如果您使用自定义函数，则使用与新自定义函数相反的另一个自定义函数，而不是`html_entity_decode()`（和自定义函数而不是`htmlentities()`）。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T19:12:49.720

一个小蛮力解决方案，我对`PCRE`表达式不太满意，假设您要传递 80 个字符，并且可能的最长 HTML 表达式是 7 个字符长：

```
$regex = '~^(.{73}([^&]{7}|.{0,7}$|[^&]{0,6}&[^;]+;))(.*)~mx'
// Note, this could return a bit of shorter text
return preg_replace( $regexp, '$1', $text); 
```

只是让你知道：

*   `.{73}`- 73 个字符
*   `[^&]{7}`- 好吧，我们可以用任何不包含 & 的东西来填充它
*   `.{0,7}$`- 记住可能的结尾（这不应该是必要的，因为较短的文本根本不匹配）
*   `[^&]{0,6}&[^;]+;`- 最多 6 个字符（你会在第 79 位），然后`&`让它完成

看起来要好得多但需要玩一些数字的东西是：

```
// check whether $text is at least $N chars long :)
if( strlen( $text) < $N){
    return;
}

// Get last &
$pos = strrpos( $text, '&', $N);

// We're not young anymore, we have to check this too (not entries at all) :)
if( $pos === false){
    return substr( $text, 0, $N);
}

// Get Last
$end = strpos( $text, ';', $N);

// false wouldn't be smaller then 0 (entry open at the beginning
if( $end === false){
    $end = -1;
}

// Okay, entry closed (; is after &)(
if( $end > $pos){
   return substr($text, 0, $N);
}

// Now we need to find first ;
$end = strpos( $text, ';', $N)
if( $end === false){
    // Not valid HTML, not closed entry, do whatever you want
}

return substr($text, 0, $end); 
```

[检查数字，索引中的某处可能有 +/-1...]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T18:54:49.567

我认为您必须使用 strpos 和 strrpos 的组合来查找下一个和上一个空格，解析空格之间的文本，根据已知的特殊字符列表检查它，如果匹配，请将您的“剪切”扩展到下一个空格的位置。如果你有你现在拥有的代码示例，我们可以给你一个更好的答案。

# jquery - 如何避免两次调用 jquery

> ID：11637392
> 
> 赞同：6
> 
> 时间：2012-07-24T18:50:36.163
> 
> 标签：jquery, jquery-forms-plugin

我正在使用[Jquery Form Plugin](http://jquery.malsup.com/form/#getting-started)提交我的表单。我的 html 文件的 head 标签如下所示

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
 then 10 other javascript files

AND Then   
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.form.js">
<script type="text/javascript"> 
       $(document).ready(function() { 
      var options = { 
                       success:       showResponse
                         };
                         $('#myForm').ajaxForm(options); 
        }); 
  </script> 
```

要查看我的代码的实际图片，请查看此[http://jsfiddle.net/Xfrms/1/](http://jsfiddle.net/Xfrms/1/)

问题是即使我调用`jquery library`了代码的最顶部，如果我没有在 jquery.form.js 插件之前调用 jquery 库，那么它 (jquery.form.js) 就不起作用。我试图在`query.form.js`插件调用最顶部的 jquery 库之后调用其他 10 个 javascript 文件，但在这种情况下，调用 javascript 文件的功能不起作用。

看到这篇[文章后](https://stackoverflow.com/a/2733635/1209690)，我认为两次调用 jquery 会导致问题。

您能否告诉我我的代码中可能出现的问题以及如何避免在 jquery 表单插件之前加载 jquery 但仍然可以正常工作？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T19:48:12.610

我可以想象您的问题是其他一些库正在使用 $ 关键字标记来实例化每个调用。如果我是正确的，只需尝试以下操作，您就可以开始了..

```
var $jq = jQuery.noConflict(); 
```

然后对于你所有的 jquery 调用，尝试使用你的新标记.. $jq.

有关更多详细信息，请查看此页面： [http ://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

使用页面开头的 js 脚本参考，以确保所有代码在开始时都正确加载。此外，加载所有脚本可能会填充一些错误。要检查是否存在任何错误，请使用一些调试插件，如 Firebug。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T18:51:38.703

你有没有尝试过：

```
window.jQuery || document.write('<script src="js/jquery-1.7.2.min.js"><\/script>') 
```

# javascript - 使用 $('#foo').val() == $('#foo').is(':checked') 永远不会以 true 结尾？

> ID：11637400
> 
> 赞同：0
> 
> 时间：2012-07-24T18:51:10.173
> 
> 标签：javascript, jquery

我将如何比较这两个变量？

这是我的代码：

```
if ($('#<%= CheckBox1.ClientID %>').val() != $('#<%= CheckBox1.ClientID %>').is(':checked')) {
    /* ... */
} 
```

总是返回true。

如何比较这两个值？我正在尝试捕获复选框的最后状态，并查看它是否与当前状态相同。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:46:59.743

您对复选框和 .val() 函数的理解存在根本性错误。

```
<input id="test" type="checkbox" value="ValueToReturnIfChecked" name="WhateverToUseInYourPost" />

$("#test").val() //will return "ValueToReturnIfChecked.

$("#test").is(":checked") //will return true or false.

$("#test").prop("checked") //will return true or false.

$("#test").attr("checked") //will return checked or empty string 
```

**编辑：附加说明**

我想我应该回答你的实际问题。答案是您不能将 *.val() 与 *.is(":checked") 进行比较，它们根本不同。如果您想跟踪过去的状态，您可以随时执行以下操作：

```
$("#test").on("click", function(){
     $this = $(this);
     if($this.data("priorState") == $this.is(":checked")){
          //Do something
     }else{
          //The following will inject the state into the checkbox so you can track it.
          $this.data("priorState", $this.is(":checked"))
     }

}); 
```

# ms-access - MSAccess - 在输出中突出显示查询选择文本

> ID：11637402
> 
> 赞同：1
> 
> 时间：2012-07-24T18:51:24.703
> 
> 标签：ms-access, text, highlight

我希望在 MS Access 的查询列表中突出显示在查询中用作选择条件的文本。这是可能的还是只是一个白日梦？

# java - 如何在android中获取日期的格式？

> ID：11637404
> 
> 赞同：-4
> 
> 时间：2012-07-24T18:51:30.670
> 
> 标签：java, android

我想获取日期的格式。

就像我有一个约会一样`2012-07-24`

我需要一个方法，它将返回一个字符串，如 `yyyy-MM-dd`

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:06:29.247

> 由于与日期字符串的解释相关的歧义，您无法解析字符串以形成日期。例如，考虑显示为“2009 年 10 月 12 日”的日期。可以将其解释为 12 月 10 日和 10 月 12 日。除非您知道它符合的模式，否则您无法将此字符串映射到确定的日期值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:01:16.330

您想要做的是从日期倒退以从中获取格式。在某些方面是可能的，但仅限于一定程度。根据标准，像 2012-01-02 这样的日期可以解释为 1 月 2 日或 2 月 1 日，因此您对其的解析将是模棱两可的。但是像 2012-07-13 这样的日期绝对定义为 7 月 13 日。我会回去问你为什么需要获取格式，还有其他方法可以实现我需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:03:20.077

很久以前，我做了一个自定义方法，我确实使用子字符串从字符串的内容中获取特定值。请参阅下面的代码：

```
public class Initialise {

    public static void main(String[] args){
        System.out.println("Test: " + reverseDate("14-10-2012"));
    }

    /********************************************************************
    * REVERSE DATE                                                       *
    *********************************************************************/
    public static String reverseDate(String tempDate){

        String year     = tempDate.substring(0, 2);
        String month    = tempDate.substring(3, 5);
        String day      = tempDate.substring(6, 10);

        String rdate    = day + "-" + month + "-" + year;

        return rdate;
    }
} 
```

如果您可以逻辑思考，这非常简单，我也希望这确实可以帮助您解决问题。如果你完成了，标记正确。

# ios - iOS：推送通知在生产中不起作用

> ID：11637411
> 
> 赞同：1
> 
> 时间：2012-07-24T18:51:51.510
> 
> 标签：ios, push-notification, ssl-certificate, distribution, apple-push-notifications

我刚刚将我的第一个应用程序发布到苹果的应用程序商店，我发现推送通知不起作用。

我在 Stackoverflow 上偶然发现了许多重复的帖子，但对于其中一些人来说，我似乎没有足够的知识来处理它们。

**1** . 我的推送通知服务器将通知（通过 php）正确地传递给苹果推送服务 - 使用生产服务器而不是沙箱。

**2.**所以我认为错误与通过电话接收它们有关。也许发行证书和注册有问题？

**3** . 我该如何调试这样的问题？我考虑通过 xCode 使用 Build Configuration: Release 启动我的应用程序 - 检查手机是否注册了 Apple 的 apns。但它总是说：

> 找不到此可执行文件的有效配置文件。

但是我对**3**中的假设是否正确？- 该应用程序可能无法在发布模式下注册？

您将在下面找到我的分发配置文件的一部分。但对我来说，一切似乎都很好。

```
<key>Entitlements</key>
    <dict>
        <key>application-identifier</key>
        <string>***YGJ2X89.de.gruener.war***</string>
        <key>aps-environment</key>
        <string>production</string>
        <key>get-task-allow</key>
        <false/>
        <key>keychain-access-groups</key>
        <array>
            <string>***YGJ2X89.*</string>
        </array>
    </dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:04:02.827

您的 php 服务器是否跟踪注册的设备？是否可以检查设备是否已向服务器注册？

无法直接调试它，但如果您需要获取一些日志，请尝试在 Xcode -> Organizer 中从设备控制台读取日志。如果注册令牌时出现问题或服务器响应无效，则可能会从该日志中清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:19:39.473

> 它调用 didFailToRegisterForRemoteNotificationsWithError。didRegisterForRemoteNotificationsWithDeviceToken 没有被调用，因为我认为该应用程序已经在我的第 3 方 php 服务器上注册了

所以注册本身出了点问题。

当您说“我的 php 服务器上的设备注册工作正常”时，您是什么意思？

即使在调用 didFailToRegisterForRemoteNotificationsWithError 之后，您是否会从您的设备中获得 deviceToken ？尝试记录错误信息并查看错误是什么

```
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{
    NSLog(@"FAILED TO REGISTER FOR PUSH NOTIFICATIONS");
    NSLog(@"%@", error.userInfo);
} 
```

如果设备未能获取设备令牌（通常由应用程序传递给第三方服务器），则无论您保存了旧令牌还是发送成功，它都不会收到推送通知。

另外，您确定您的手机（或设置中的应用程序）没有禁用通知吗？

# android - Android相机没有保存在特定文件夹[MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA]

> ID：11637412
> 
> 赞同：4
> 
> 时间：2012-07-24T18:51:52.120
> 
> 标签：android, android-intent, camera, image

当我在 Intent 中使用 MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA 时，我遇到了问题。相机可以正确启动，但不会将文件保存在我的特定文件夹“/photo”中。但是当我使用 MediaStore.ACTION_IMAGE_CAPTURE 时它工作正常，但我不能使用它，因为它每次只拍一张照片。我需要相机启动并且用户拍摄许多照片。他关闭相机后，所有照片都保存在我的特定文件夹中。

谢谢你的帮助。

问候，

马塞洛

源代码：

```
public void startCamera() {     
    Intent takePictureIntent = new Intent(MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA);
    File file = null;
    try {
        file = createImageFile();
        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
    } catch (IOException e) {
        file = null;
        Log.e(this.getClass().getName(), e.getMessage(), e);            
    }
    activity.startActivity(takePictureIntent);
}

private File createImageFile() throws IOException {
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = JPEG_FILE_PREFIX + timeStamp + JPEG_FILE_SUFFIX;
    return new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/photo/", imageFileName);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T19:52:06.570

`MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA`此意图不支持活动结果或特定意图文件输出。此意图旨在简单地打开相机。您寻求的功能在 Android 中不存在。

# c# - 使用 lambda 填充 DataGridView

> ID：11637416
> 
> 赞同：0
> 
> 时间：2012-07-24T18:52:06.037
> 
> 标签：c#, linq, datagridview, directoryservices

我有一个目录条目列表`SearchResultCollection`。就像是：

```
SearchResultCollection src = ds.FindAll(); 
```

我需要类似的东西：

```
dgvItems.datasource = [... something ... ] 
```

现在，我正在使用 foreach 遍历集合并一次插入一行`DataGridView`，如下所示：

```
DataTable dt = new DataTable();
dgvItems.datasource = dt;
foreach (SearchResult sr in src)
{    
.
.
dt.rows.add(sAMAccountName, sn, givenName);
} 
```

这是一个慢，因为src在一个大表中。**有没有办法使用lambdas**或**linq**加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:06:31.697

LINQ 绝对不会加速你的代码。无论你是否使用 lambdas/LINQ，最终结果都是一样的：项目被一一添加到 DataGridView。

我怀疑这种缓慢的行为可能是由于每次添加项目时，DataGridView 对象都会执行一些昂贵的 UI 操作（例如重绘自身、计算滚动条位置）。

如果这是导致问题的原因，请在添加项目之前尝试隐藏 DataGridView，并在添加所有项目后使其再次可见。

或者，您可以尝试提前准备 DataTable，并在所有数据准备就绪后将其分配给 DataGridView 的 DataSource 属性。

希望这可以帮助。

# java - 如何在 JTable 中添加/删除选定的列？

> ID：11637418
> 
> 赞同：3
> 
> 时间：2012-07-24T18:52:10.140
> 
> 标签：java, swing, jtable, tablecolumn

我目前只能在最后一列中添加一列，并删除添加的最后一列。

我试图弄清楚如何添加或删除选定的列，但它只是不适合我。例如，如果我有 3 列 0、1 和 2，并且我想在 1 中添加一列或删除第 1 列。

我在图书馆里呆了一个小时，但我能做的最多的是删除行并将行添加到选定的位置。

有人可以帮忙吗？

这是我添加列的内容，但它没有做我想要的（只添加到最后）：

```
String colName = Integer.toString(i++);
        if (colName != null && colName.length() > 0) {

            model.addColumn(colName);
            table.updateUI();
            undo.push(new Object[]{"Column", "Add", colName});
            redo.clear(); 
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:36:30.387

要在任意索引处添加列，请使用表列模型，`addColumn()`后跟`moveColumn()`：

```
TableColumn newColumn = // ...
colModel.addColumn(newColumn);
colModel.moveColumn(colModel.getColumnCount() - 1, desiredIndex); 
```

删除索引处的列应该更容易：

```
colModel.removeColumn(colModel.getColumn(desiredIndex)); 
```

# java - 在 JPasswordField 中显示密码而不是将 0 设置为 echo char

> ID：11637424
> 
> 赞同：3
> 
> 时间：2012-07-24T18:52:30.597
> 
> 标签：java, swing, jpasswordfield

如何显示 JPasswordField 的文本而不是将 0 设置为 echo char？

Java 文档 说：

> 将值设置为 0 表示您希望看到键入的文本，类似于标准 JTextField 的行为。

以下导致不兼容的类型错误

```
outField.setEchoChar(0); 
```

哪里

```
outField.setEchoChar('0'); 
```

只需将 0 设置为 echo char（每个数字显示 0）。

在 JTextField 上使用 JPasswordField 的原因是我想更改 echo char 并用另一种方法隐藏密码。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:58:58.517

做这个：

```
outField.setEchoChar((char)0); 
```

如果你这样做：

```
outField.setEchoChar(0); 
```

那么 0 是一个整数，而不是一个 char，并且该方法需要一个 char。

如果你这样做：

```
outField.setEchoChar('0'); 
```

那么'0'相当于（char）48。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T18:58:31.763

当你这样做时：

```
outField.setEchoChar(0); 
```

您正在尝试将 int 传递给方法，这是不允许的，因为它需要 char 类型。而是尝试

```
outField.setEchoChar((char)0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T18:58:38.737

使用值为 0 的 char，而不是数字 0 或 char '0'：

```
 outField.setEchoChar((char)0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:01:53.957

像这样试试......

```
outField.setEchoChar((char)0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-01T21:21:25.397

尝试`outField.setEchoChar('\0');`

# command-line - 用于自动设置的批处理

> ID：11637426
> 
> 赞同：0
> 
> 时间：2012-07-24T18:52:40.810
> 
> 标签：command-line, scripting, batch-file

我刚开始玩批处理脚本，我想知道是否有熟悉 bash 或脚本的人可以给我一个很好的参考。

现在，我正在尝试运行 DiskPart，但会弹出另一个窗口。我可以将命令传递给它，使其自动化并自动关闭它吗？

我还想知道是否可以使用 Bash 脚本静默运行 exe 文件（例如安装 JRE）并运行多个 EXE 文件？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:33:38.367

> 我可以将命令传递给它，以便它自动化并自动关闭它。

这是一个问题？你试过打电话`diskpart /?`吗？

答案是`diskpart /s "full_path_to_diskpart_script_file"`

`full_path_to_diskpart_script_file`带有 DiskPart 命令的纯文本文件在哪里。

> 我还想知道是否可以使用 Bash 脚本静默运行 exe 文件（例如安装 JRE）并运行多个 EXE 文件。

另一个问题？看着`start /?`

例如，您可以从批处理运行

`start /min "Installing JRE" "full_path_to\jre-7u5-windows-x64.exe" /s`

[JRE 安装程序选项](http://www.oracle.com/technetwork/java/javase/silent-136552.html)

# sql - 使用文本输入搜索访问号码列

> ID：11637428
> 
> 赞同：0
> 
> 时间：2012-07-24T18:52:46.043
> 
> 标签：sql, jsp, ms-access

我有一个带有此文本输入表单的简单搜索页面

```
<form name="assetInput" action="assetResult.jsp" method="get">
<input type="text" name="assetNo" />
<input type="submit" value="Submit" />
</form> 
```

这会将您带到一个结果页面，该页面将按您在搜索页面中键入的资产编号搜索 Access 数据库。该列的数据类型是数字。

这是从文本框中获取输入的代码，也是我尝试将 String 转换为 int 的代码。

```
<%
    String assetNumber = request.getParameter("assetNo");
    int assetNum = Integer.parseInt(assetNumber);       
%> 
```

我的查询：

```
rs = stmt.executeQuery( "SELECT * FROM [Inventory Tracking] WHERE (([Inventory Tracking].AssetNumber) = '"+assetNum+"')"); 
```

我可以从数据库中搜索数据类型为文本的列，但是在尝试使用字符串搜索数字列时不断出错。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:54:19.953

数字不带分隔符，只有文本字段。

```
rs = stmt.executeQuery( "SELECT * FROM [Inventory Tracking] WHERE [Inventory Tracking].AssetNumber = "+assetNum); 
```

你可以避免参数的很多问题。

# php - 查找字符串是否为 PHP 中的 MySQL 函数

> ID：11637440
> 
> 赞同：4
> 
> 时间：2012-07-24T18:53:31.417
> 
> 标签：php, mysql, joomla, joomla-dbo

我有一个函数，它接受一个数组并根据数组的键/值对创建一个 SQL 语句。例如：

```
 name=>SomeKittens 
```

它会变成

```
(`name`) VALUES ('SomeKittens') 
```

唯一的问题是当我使用 MySQL 字符串函数时，例如`NOW()`.

```
creation_date=>NOW() 
```

变成

```
(`creation_date`) VALUES ('NOW()') 
```

请注意，`NOW()`已转义。有什么方法可以检测该值是否是 MySQL 字符串函数？（当然除了`$value === "NOW()"`）

我正在使用 Joomla DBO，但也对 PDO/MySQLi 解决方案持开放态度。

（[相关聊天讨论](https://chat.stackoverflow.com/transcript/message/4657210#4657210)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:00:17.950

如果您允许带有参数的函数，我认为您将无法保护您的数据库免受 SQL 注入。
如果您只允许不带参数的函数（例如 NOW()），您不妨硬编码一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:57:51.527

您可能只想定义一个像 MYSQL_NOW 这样的常量，在创建查询时您知道要转换为 NOW() 函数调用而不是 'NOW()' 字符串。

# python - Python App Engine 队列任务

> ID：11637442
> 
> 赞同：1
> 
> 时间：2012-07-24T18:53:43.923
> 
> 标签：python, google-app-engine, task-queue

我正在尝试在应用引擎上运行任务，但出现以下错误：

```
ERROR    2012-07-24 18:47:01,030 wsgi.py:189] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
ImportError: No module named tasks
INFO     2012-07-24 18:47:01,040 dev_appserver.py:2952] "POST /tasks HTTP/1.1" 500 -
WARNING  2012-07-24 18:47:01,045 taskqueue_stub.py:1934] Task task22 failed to execute. This task will retry in 0.100 seconds 
```

我这样做是为了添加任务：

```
import os
import webapp2
from google.appengine.ext.webapp import blobstore_handlers
from controllers.basehandler import BaseHandler
from google.appengine.ext import blobstore
from google.appengine.api import taskqueue
from google.appengine.ext.webapp.util import run_wsgi_app

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler, BaseHandler):
    def post(self):
        upload_files = self.get_uploads('video_file')
        blob_info = upload_files[0]

        current_user = self.current_user

        if current_user:
            if current_user.video_file_bob:
                old_video = current_user.video_file_bob.key()
                blobstore.delete(old_video)

            current_user.video_file_bob = blob_info.key()
            current_user.put()

            params = {'user':current_user}

            taskqueue.add(url='/tasks')

        self.redirect('/video_upload')

app = webapp2.WSGIApplication([('/store_video', UploadHandler)],
                                     debug=True) 
```

这是任务的代码：

```
import re
import urlparse
import webapp2
from google.appengine.ext import blobstore
from controllers.basehandler import BaseHandler
import gdata.youtube.service
from google.appengine.api import taskqueue
from google.appengine.ext.webapp.util import run_wsgi_app
import logging

class YoutubeUpload(BaseHandler):

    def post(self):
        logging.info('Here')

app = webapp2.WSGIApplication([('/tasks', YoutubeUpload)],
                                 debug=True) 
```

关于如何解决这个问题的任何想法？

编辑

我的 app.yalm 的内容：

```
application: traapp
version: 1
runtime: python27
api_version: 1
threadsafe: True

handlers:
- url: /images
  static_dir: assets/images 
- url: /link_submit
  script: controllers.video_link_submit.app
- url: /video_upload
  script: controllers.video_upload.app
- url: /store_video
  script: controllers.video_upload_handler.app
- url: /tasks
  script: tasks.youtube_upload.app
  login: admin
- url: /.*
  script: controllers.login.app

libraries:
- name: PIL
  version: latest

builtins:
- appstats: on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:35:25.983

它看起来像一个导入错误“ImportError：没有名为任务的模块”。所以我认为以下内容是不正确的。

```
- url: /tasks
  script: tasks.youtube_upload.app 
```

您问题中第二个块的路径和文件名是什么？按照您现在的设置方式，您需要将 youtube_upload.app 放在 /tasks 文件夹中，该文件夹中也有一个**init** .py。

# php - 在不支持它的 php 5.2 上使用 CRYPT_BLOWFISH

> ID：11637445
> 
> 赞同：2
> 
> 时间：2012-07-24T18:53:49.627
> 
> 标签：php, blowfish, crypt, php-5.2

我在不支持`CRYPT_BLOWFISH`but的 PHP 5.2 上运行我的页面`CRYPT_MD5`，并且听说河豚比 md5 安全得多。

由于我不是主管，我无法将 PHP 升级到支持它的版本。

`CRYPT_BLOWFISH`在 PHP 5.2 上使用有什么技巧吗？

和，

```
$hash_key = crypt($something, '$2a$anySalt'); 
```

在第一面粘贴 '$2a$' 是否正确？

很困惑。

Ps 如果我使用[`crypt()`](http://php.net/crypt)with `CRYPT_BLOWFISH`，bcrypt 会在`crypt()`函数中正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T18:57:33.740

您可以使用具有后备功能的[PHPASS](http://www.openwall.com/phpass/)来支持不支持 CRYPT_BLOWFISH 的系统。否则，您将无法真正使用我所知道的 PHP 中的 bcrypt。

# .net - 运行转换时如何调试 System.NullReferenceException？

> ID：11637447
> 
> 赞同：2
> 
> 时间：2012-07-24T18:54:10.077
> 
> 标签：.net, visual-studio, t4

我正在尝试使用 T4 文本模板生成代码，但是在运行脚本时，出现以下错误：

```
运行转换：System.NullReferenceException：对象引用未设置为对象的实例。
   在 Microsoft.VisualStudio.TextTemplatingB0A58A4C85EA3D7032675015C6052C89.GeneratedTextTransformation.TransformText()
   在 Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation（TemplateProcessingSession 会话，字符串源，ITextTemplatingEngineHost 主机，字符串和结果）
```

由于我对 T4 不熟悉，因此我不确定在哪里可以解决此问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T19:23:54.290

您需要调试模板以找到`NullReferenceException`发生的位置。Tim Larson[在这里有快速概述，Oleg Sych 在](http://adventuresindotnet.blogspot.com/2011/11/debugging-t4-templates.html)[这里](http://www.olegsych.com/2008/09/t4-tutorial-debugging-code-generation-files/)有更多细节，以及他在 T4 上的其他优秀博客文章。

这是简短的版本：

1.  将 debug="true" 添加到模板指令：`<#@ template debug="true" #>`
2.  启动调试器`System.Diagnostics.Debugger.Launch();`
3.  休息`System.Diagnostics.Debugger.Break();`
4.  在*Visual Studio 即时调试器*对话框中选择*Microsoft Visual Studio 的新实例，然后单击**是*
***   调试 T4 模板**

 **这是一个简单的示例，可帮助`NullReferenceException`在 bar 上调用 ToString 时捕获：

```
<#@ template debug="true" language="C#" #>
<#@ output extension=".txt" #>
<#
    System.Diagnostics.Debugger.Launch();
    System.Diagnostics.Debugger.Break();

    object bar = null;  
#>
foo<#= bar.ToString() #> 
```

请务必检查第一个链接，因为在某些版本上，您需要更新注册表项`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\DbgJITDebugLaunchSetting`才能`0x2`使事情正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:00:41.553

您可以调试 T4 模板。MSDN 对此提供了一些[帮助](http://msdn.microsoft.com/en-us/library/bb126600.aspx)。

在调试模式下，您可以查看生成的类以找出问题所在。T4 保存生成的代码、程序集和 PDB TEMP 文件夹 (%USERPROFILE%\Local Settings\Temp)。.cs 文件包含 GeneratedTextTransformation 的源代码。.cmdline 文件包含用于将 .cs 文件编译为 .NET 程序集（.dll 文件）的命令行选项。**

# magento - Magento - 类别锚未显示在主页上

> ID：11637453
> 
> 赞同：0
> 
> 时间：2012-07-24T18:54:25.527
> 
> 标签：magento, anchor, categories

我已经使用此代码向主页添加了一个类别。

```
{{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" category_id="4" template="catalog/product/list.phtml"}} 
```

该类别在主页上显示其产品 OK，但我无法在左侧显示类别锚。在 Magento 类别配置`Is Anchor`中设置为。`Yes`我正在使用 Magento 1.3.2.4

有谁知道如何使类别锚出现在主页上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:59:55.707

尝试将此添加到主页的设计 > 布局更新 XML

```
<reference name="left"> 
    <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/> 
</reference> 
```

# asp.net - ASP.NET MVC 3 应用程序下的 ASP.NET 3.5 网站 - 出现没有权限错误

> ID：11637458
> 
> 赞同：1
> 
> 时间：2012-07-24T18:54:44.977
> 
> 标签：asp.net, asp.net-mvc-3, httphandler

所以我正在重写一个 ASP.NET 3.5 网站的应用程序。有一个包含 ASHX 处理程序的文件夹。这些处理程序是由外部应用程序调用的 API。我的解决方案是在新的 MVC 站点下将此 API 文件夹作为 3.5 应用程序运行。URL 保持不变，一切都会很好地工作。

在 MVC 应用程序中，我在 web.config 中启用了表单身份验证。IgnoreRoute Global.asax.cs 中的 API 文件夹。我为 .NET 2.0 创建了一个新的应用程序池，并将其分配给在 API 文件夹上创建的新应用程序。

从服务器访问处理程序有效，我得到了我的自定义错误，因为我没有指定我的凭据。从我的机器访问处理程序，我得到*您无权查看此目录或页面。*我在 API 文件夹中创建了一个 default.aspx 页面并显示该页面。所以这是一个处理程序（ASHX）问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:25:26.390

我最终创建了一个针对 .NET 3.5 的新网站解决方案，并且只有一个返回 Hello World 的处理程序 Test.ashx。将 IIS 配置为对 API 文件夹使用不同的应用程序池（经典模式）并且它可以工作。所以我添加了我现有的处理程序并且它起作用了。我猜是 web.config 文件中的某些东西导致了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:01:06.280

尝试转到 IIS 并在您的网站下 -> 处理程序映射。检查 .ashx 是否被映射。

# c# - 如何从 .NET WebBrowser 插件/附加组件中捕获异常？尤其是闪

> ID：11637463
> 
> 赞同：1
> 
> 时间：2012-07-24T18:55:01.527
> 
> 标签：c#, flash, exception-handling, browser, access-violation

简洁版本：

我有一个 WinForms 应用程序，它使用 .NET 4.0 WebBrowser 控件来显示包含 Flash SWF 文件的 HTML 页面。SWF 文件通过一些 Javascript/jQuery/swf)iobject 魔术设置。我定期遇到一个 SWF 文件，该文件将导致 AccessViolationException 停止我的程序。据我所知，这发生在显示一个页面和启动另一个页面之间的清理过程中（想想网站的自动幻灯片放映）。

我添加了 AppDomain.CurrentDomain.UnhandledException 和 Application.ThreadException 处理程序，我的程序仍然停止并在屏幕上显示一个对话框。我想阻止对话框出现 - 如何捕获这些类型的异常并抑制它们？我可以重新启动我的程序或其他东西 - 我无法显示对话框。

血腥细节：

我有上面提到的异常处理程序，在我通过 InvokeScript() 在我的 WebBrowser DOM 中调用行为的地方周围还有一些 try/catch 逻辑。但我所拥有的一切似乎都没有被调用。

生成的异常如下所示：

```
Faulting application name: MyProgram.exe, version: 1.0.0.0, time stamp: 0x50096c59
Faulting module name: Flash64_11_3_300_257.ocx, version: 11.3.300.257, time stamp: 0x4fc81d71
Exception code: 0xc0000005
Fault offset: 0x000000000022b1db
Faulting process id: 0x10d0
Faulting application start time: 0x01cd668d0db086f8
Faulting application path: C:\Users\AUser\AppData\Local\Apps\2.0\AWMVPDR4.HEJ\Z9EP5M32.MQ4\mmm...tion_2c82cc3ef3e7d3e9_0001.0000_6ffd6d2ca43477ab\MyProgram.exe
Faulting module path: C:\Windows\system32\Macromed\Flash\Flash64_11_3_300_257.ocx
Report Id: a9f6977f-d284-11e1-a447-00187d1f4237 
```

然后这个：

```
Application: MyProgram.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.AccessViolationException
Stack:
   at System.Windows.Forms.UnsafeNativeMethods+IDispatch.GetIDsOfNames(System.Guid ByRef, System.String[], Int32, Int32, Int32[])
   at System.Windows.Forms.HtmlDocument.InvokeScript(System.String, System.Object[])
   at MyProgram.InvokeScriptExtension+<>c__DisplayClass2.<InvokeScript>b__0()
   at System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(System.Object)
   at System.Threading.ExecutionContext.runTryCode(System.Object)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Windows.Forms.Control.InvokeMarshaledCallback(ThreadMethodEntry)
   at System.Windows.Forms.Control.InvokeMarshaledCallbacks()
   at System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef)
   at System.Windows.Forms.WebBrowserBase.WndProc(System.Windows.Forms.Message ByRef)
   at System.Windows.Forms.WebBrowser.WndProc(System.Windows.Forms.Message ByRef)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr)
   at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG ByRef)
   at System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr, Int32, Int32)
   at System.Windows.Forms.Application+ThreadContext.RunMessageLoopInner(Int32, System.Windows.Forms.ApplicationContext)
   at System.Windows.Forms.Application+ThreadContext.RunMessageLoop(Int32, System.Windows.Forms.ApplicationContext)
   at MyProgram.Program.Main() 
```

我的挑战是阻止该异常在屏幕上显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T20:56:17.820

您可以包含禁止异常对话的 windows api 中的 pinvoke 方法。

这是图书馆。 [http://www.pinvoke.net/default.aspx/kernel32.seterrormode](http://www.pinvoke.net/default.aspx/kernel32.seterrormode)

这是 C++ 文档。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621(v=vs.85).aspx)

你把它调用到你的代码中

```
class MainClass
{
[DllImport("kernel32.dll")]
static extern ErrorModes SetErrorMode(ErrorModes uMode);

[Flags]
public enum ErrorModes : uint
{
    SYSTEM_DEFAULT = 0x0,
    SEM_FAILCRITICALERRORS = 0x0001,
    SEM_NOALIGNMENTFAULTEXCEPT = 0x0004,
    SEM_NOGPFAULTERRORBOX = 0x0002,
    SEM_NOOPENFILEERRORBOX = 0x8000
}
[System.STAThreadAttribute()]
static void Main()
{
    SetErrorMode(ErrorModes.SEM_NOGPFAULTERRORBOX | ErrorModes.SEM_NOOPENFILEERRORBOX);
  // this function prevents error dialog box to show up after application crash
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:12:45.267

好的 - 发现了一些关于 .NET 4 的信息。这不是新的，对我来说只是新的。对非托管内容的异常处理与以前的 .NET 版本（我从未真正使用过，对 .NET 编程有点新手）不同。以下链接有望提供一些指导和启发......

[http://msdn.microsoft.com/en-us/library/dd638517.aspx](http://msdn.microsoft.com/en-us/library/dd638517.aspx)

[是否可以在 .NET 中捕获访问冲突异常？](https://stackoverflow.com/questions/3312003/is-it-possible-to-catch-an-access-violation-exception-in-net)

[http://dotnetslackers.com/articles/net/All-about-Corrupted-State-Exceptions-in-NET4.aspx](http://dotnetslackers.com/articles/net/All-about-Corrupted-State-Exceptions-in-NET4.aspx)

[http://msdn.microsoft.com/en-us/magazine/dd419661.aspx](http://msdn.microsoft.com/en-us/magazine/dd419661.aspx)

有人声称您可以向 app.config 添加参数并获取旧的异常处理行为。这对我不起作用，但我不会声称我做得正确。将装饰器添加到 Main() 例程以启用 try/catch 行为的描述确实解决了我的问题。

# actionscript-3 - AS3 链接到网页

> ID：11637464
> 
> 赞同：2
> 
> 时间：2012-07-24T18:55:08.330
> 
> 标签：actionscript-3, flash, addeventlistener

我正在使用 AS3 在 Flash 中创建横幅，并且希望能够单击横幅以链接到网页。

我创建了一个与横幅大小一致的清除按钮，并将其放在顶层，命名为`click`.

我把这段代码放在`click`图层的第一帧：

```
buttonOne.addEventListener(MouseEvent.CLICK, launchOne);

function launchOne(event:MouseEvent):void {
      var swfOne:URLRequest=new URLRequest("http://www.mypage.com");
      navigateToURL(swfOne, "_self");
} 
```

Flash 自动添加到顶部：

```
import flash.events.MouseEvent;
import flash.net.URLLoader; 
```

尝试运行代码时，我收到错误消息：

```
Scene 1, Layer 'click', Frame 1, Line 4 1120: Access of undefined property buttonOne. 
```

我想要做的就是能够使用 AS3 链接到一个网站...有人可以提供我的代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:13:06.537

单击您的按钮并转到“属性”菜单。从那里，在顶部，确保它显示“实例名称”，然后键入 buttonOne。

这将告诉 Flash 创建一个名为 buttonOne 的公共变量，您可以使用代码对其进行操作。

您的代码很好，Flash 只是不知道“buttonOne”指的是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:35:15.637

正如安德烈所说，并在其他导入下添加下一行：

```
import flash.net.navigateToURL; 
```

# python - 用 Python 修改 INI 文件

> ID：11637467
> 
> 赞同：15
> 
> 时间：2012-07-24T18:55:10.677
> 
> 标签：python, configparser

我有一个需要使用 Python 修改的 INI 文件。我正在研究该`ConfigParser`模块，但仍然遇到问题。我的代码是这样的：

```
config= ConfigParser.RawConfigParser()
config.read('C:\itb\itb\Webcams\AMCap1\amcap.ini')
config.set('Video','Path','C:\itb\itb') 
```

但是在运行此代码后查看`amcap.ini`文件时，它保持不变。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-24T18:57:08.267

ConfigParser 不会自动写回磁盘上的文件。使用该[`.write()`方法](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.write)；它需要一个打开的文件对象作为它的参数。

```
config= ConfigParser.RawConfigParser()
config.read(r'C:\itb\itb\Webcams\AMCap1\amcap.ini')
config.set('Video','Path',r'C:\itb\itb')
with open(r'C:\itb\itb\Webcams\AMCap1\amcap.ini', 'wb') as configfile:
    config.write(configfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-04T21:57:32.737

您可以使用`python-benedict`dict 子类，它为大多数常见格式提供标准化 I/O 支持，包括`ini`.

```
from benedict import benedict

# path can be a ini string, a filepath or a remote url
path = 'path/to/config.ini'

d = benedict.from_ini(path)

# do stuff with your dict
# ...

# write it back to disk
d.to_ini(filepath=path) 
```

它经过了很好的测试和记录，请查看 README 以查看所有功能：

[https://github.com/fabiocaccamo/python-benedict](https://github.com/fabiocaccamo/python-benedict)

使用 pip 安装：`pip install python-benedict`

注意：我是这个项目的作者

# asp.net - 需要进行单选按钮选择

> ID：11637468
> 
> 赞同：0
> 
> 时间：2012-07-24T18:55:12.447
> 
> 标签：asp.net, radio-button

我在 a`datagrid`中有单选按钮，在`repeater`. `radiobuttons`为其中的每个“重复”创建了4 个，`repeater`我想强制选择这 4 个中的 1 个。我已经将它们`radiobuttons`放在同一个`GroupName`中，因此只能选择其中的一个。

它们不在单选按钮列表中，我不想将其放在单选按钮列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:14:08.600

由于您将它们放在相同的组名中，因此您可以制作自定义验证器。

```
<asp:CustomValidator ID="myValidator" runat="server" ErrorMessage="you must select one" onservervalidate="myValidator_serverValidate" /> 
```

然后在后面的代码中，

```
 protected void myValidator_serverValidate(object sender, ServerValidateEventArgs e) 
    { 
      bool isSelected = false; 

      foreach (Control control in yourForm.Controls) 
      { 
         if (control == RadioButton) 
         { 
         RadioButton rb = (RadioButton)control; 
         if (rb.GroupName == "myGroup" && rb.Checked) 
         { 
           isSelected = true; 
         } 
         } 
      } 
       e.IsValid = isSelected; 
    } 
```

# emacs - 更改 Emacs 欢迎启动画面/屏幕

> ID：11637471
> 
> 赞同：7
> 
> 时间：2012-07-24T18:55:19.220
> 
> 标签：emacs

我意识到它在 Stackoverflow 中被询问了一些奇怪的标题。我不能删除这篇文章，因为它已经有了答案。如果您有兴趣，请参阅以下内容：

1.  [我可以更改 emacs 花式启动文本吗？](https://stackoverflow.com/questions/2570605/can-i-change-the-emacs-fancy-startup-text)

2.  [如何在 Emacs 中将文件加载到缓冲区并在启动时切换到缓冲区](https://stackoverflow.com/questions/7083181/how-to-load-file-into-buffer-and-switch-to-buffer-on-start-up-in-emacs)

原始问题：我了解可以删除 Emacs 启动画面！（“[无法在 Emacs 中隐藏欢迎屏幕](https://stackoverflow.com/questions/744672/unable-to-hide-welcome-screen-in-emacs)”）。如何使用我自己的欢迎屏幕更改此欢迎屏幕？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T18:59:13.413

我相信您可以使用初始缓冲区选择，如此处所述：

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Startup-Summary.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Startup-Summary.html)

> 用户选项：初始缓冲区选择
> 
> 如果非零，此变量是一个字符串，它指定 Emacs 在启动后显示的文件或目录，而不是启动屏幕。

# google-chrome - Webkit 忽略 onwebkitspeechchange 回调

> ID：11637478
> 
> 赞同：1
> 
> 时间：2012-07-24T18:56:01.110
> 
> 标签：google-chrome, speech-recognition

使用 Google Chrome 版本 11 和 jquery 中可用的语音识别

```
<input type="text"  id="txtAns" x-webkit-speech="x-webkit-speech"  onwebkitspeechchange="onChange()"  /> 
```

我将 onChange() 函数放在我在网页头部引用的 js jquery 文件中

语音识别成功后，应该调用 onChange 函数，但不是。如果我在页面上创建一个名为 onChange() 的 javascript 函数，则会调用它。没有调用 jquery 版本的任何原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-16T06:10:15.293

我认为您将脚本放在 dom 的头部。尝试将脚本放在底部，如果您想将其包含在头部，也可以尝试添加准备好的文档。

```
<input id="queryField" type="text" x-webkit-speech> 
```

Javascript

* * *

```
<script>
var field = document.querySelector('#queryField');
field.onwebkitspeechchange = function(e) {
  console.log("You have spoken");
};
</script> 
```

jQuery

* * *

```
<script>
  $('#queryField').bind('webkitspeechchange', function() {
    console.log("You have spoken");
  });
</script> 
```

# iphone - 将带有 UIScrollView + UIPageControl 的 ViewController 推送到特定页面

> ID：11637483
> 
> 赞同：1
> 
> 时间：2012-07-24T18:56:19.900
> 
> 标签：iphone, uiscrollview, uipagecontrol

我有一个 VC，其中实现了滚动视图和页面控件。它有三个页面，它们都设置正确并且工作正常。我想要做的是根据用户按下的按钮将 VC 加载到不同的页面上。

在按钮调用的方法中我有

```
ViewController *vc = [[ViewController alloc] init];
vc.pageControl.currentPage = 2;
[self.navigationController pushViewController:vc animated:YES]; 
```

当 VC 加载时，它被加载到正确的页面（如页面底部的气泡所示），但它正在显示来自页面 [0] 的信息。如果我开始滚动，无论我做什么，它都会跳回 page[0]。

我最好的猜测是，我需要根据我要显示的页面将 VC 加载到特定的 x 原点，但我无法找到与此相关的任何内容，所以我很迷茫。

感谢任何帮助。

编辑：这是来自 VC 类的代码。这不是我写的，这是我第一次使用 PageControl，所以我正在尝试边做边学。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    self.scrollView = [[UIScrollView alloc] init];
    self.scrollView.pagingEnabled = TRUE;
    self.scrollView.showsVerticalScrollIndicator = NO;
    self.scrollView.showsHorizontalScrollIndicator = NO;
    self.scrollView.delegate = self;

    firstPage = [[UIView alloc] init];
    firstPage.tag = 0;

    secondPage = [[UIView alloc] init];
    secondPage.tag = 1;

    thirdPage = [[UIView alloc] init];
    thirdPage.tag = 2;

    pages = [[NSArray alloc] initWithObjects:firstPage, secondPage, thirdPage, nil];

    // Page Control
    self.pageControl = [[UIPageControl alloc] init];
    self.pageControl.numberOfPages = 3;
    self.pageControl.currentPage = 0;

    [self.view addSubview:self.scrollView];
    [self.view addSubview:self.pageControl];
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

// First Page Setup
//
[self setupFirstPage];

// Second Page Setup
//
[self setupSecondPage];

// Third Page Setup
//
[self setupThirdPage];

// Frame everything
//
CGRect screenFrame = [[UIScreen mainScreen] applicationFrame];
CGRect navBarFrame = self.navigationController.navigationBar.frame;

self.scrollView.frame = CGRectMake(0, navBarFrame.size.height, 320, screenFrame.size.height - navBarFrame.size.height);
self.pageControl.frame = CGRectMake(0, screenFrame.size.height - 70, 320, 20);

firstPage.frame = CGRectMake(0, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.height);
secondPage.frame = CGRectMake(320 * secondPage.tag, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.height);
thirdPage.frame = CGRectMake(320 * thirdPage.tag, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.height);

// Add Subviews
//
[self.scrollView addSubview:firstPage];
[self.scrollView addSubview:secondPage];
[self.scrollView addSubview:thirdPage];

self.scrollView.contentSize = CGSizeMake(320 * pages.count, self.scrollView.frame.size.height);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
CGFloat pageWidth = self.scrollView.frame.size.width;
int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
self.pageControl.currentPage = page;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:34:00.007

尝试添加此函数并在设置页码后立即调用它：

```
- (void)pageSelectorChanged 
{
    CGRect frame = self.scrollView.frame;
    frame.origin.x = frame.size.width * self.pageControl.currentPage;
    frame.origin.y = 0;
    [self.scrollView scrollRectToVisible:frame animated:NO];
} 
```

# testing - 不知道如何解决跨浏览器问题

> ID：11637487
> 
> 赞同：1
> 
> 时间：2012-07-24T18:56:50.870
> 
> 标签：testing, cross-browser, internet-explorer-9

谁能帮我解决一些跨浏览器问题？我的网址是[http://s423839726.onlinehome.us/index2.html](http://s423839726.onlinehome.us/index2.html)。它在 Firefox 13 中看起来不错，但在 IE9 中，“联系人”按钮很不可靠。

另外，从哪里学习如何解决跨浏览器的不一致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:32:04.897

这种不一致也可以在 Opera 中看到。你的问题是 UL 元素。它挂在右侧的那个位置，因为它具有显示“内联”集并包含一个杂散的 A 元素。这种组合将您的联系人菜单元素向下移动了一点。您应该尝试清理标记，因为它包含并非绝对必要的嵌套元素（主要是 A 元素）。另一个问题是，您正在混合左右浮动。此外，您正在混合左右填充和边距，这可能会导致浏览器中的不同行为，使计算更加困难，并可能导致边距折叠问题。我建议您为菜单尝试更多语义标记，例如：

```
<ul id="topnav">
    <li><a href="about.html">About</a></li>
    <li><a href="projects.html">Projects</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul> 
```

通过这个简单的标记，您可以设置菜单样式。如果你达到一个点，调整元素的尺寸、填充和边距不足以按照你想要的方式设置样式，你可能会开始在 LI 或 A 元素中引入非语义元素（例如 SPAN 元素）以获得更多方法通过 CSS 改变事物。

让您的导航样式化的一种简单方法如下：将每个 LI 浮动到左侧并仅使用左边距/填充来创建视觉空间。

```
ul {
    list-style-type: none;
    height: 60px;
    width: 300px;
    margin: auto;
}

li {
    float: left;
}

ul a {
    padding-right: 32px;
    padding-left: 32px;
    display: block;
    line-height: 50px;
    text-decoration: none;
    font-size: 40px;
    color: #ccc;
}

ul a:hover {
    color: #fff;
} 
```

类似的东西。左边框仍然缺失。您的整个菜单块（UL）应使用左填充或右浮动或其他方式定位到右侧。如果您想减少页面上其他地方的 UL 和 LI 样式变化，请在选择器前面加上 #topnav 前缀。这只是一个简单的说明，您不需要太多的标记或样式即可拥有您想要的水平菜单。开始简单并使用 UL/LI 搜索有关水平菜单的教程。那里有很多。祝你好运。

# excel - Pentaho 数据集成映射

> ID：11637488
> 
> 赞同：0
> 
> 时间：2012-07-24T18:56:52.260
> 
> 标签：excel, csv, pentaho

我正在使用 Pentaho 数据集成，我创建了一个新的转换，其中有 2 个步骤....1 是我的数据的 CSV 文件，第二个是包含两列的 Excel 文件，一个是州名，另一个是该州名的排序形式，例如（“纽约”“纽约”）

在我的 CSV 文件中，我有一个州名称为“纽约”的州列，我想使用我的 excel 文件将“纽约”映射到“纽约”

我在谷歌上搜索了一整天都没有明确的答案……有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-18T14:00:44.063

我建议您使用流查找来完成此任务。检查附加的测试转换。它会完成你的任务。

```
<?xml version="1.0" encoding="UTF-8"?>
<transformation-steps>
<steps>
  <step>
    <name>EXCEL</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>State</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>Short_state</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <data>
      <line> <item>New York</item><item>TX</item> </line>
      <line> <item>Texas</item><item>TX</item> </line>
    </data>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>392</xloc>
      <yloc>80</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>CSV</name>
    <type>DataGrid</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>Full_state_name</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <data>
      <line> <item>New York</item> </line>
      <line> <item>Texas</item> </line>
    </data>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>511</xloc>
      <yloc>169</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Stream lookup</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>EXCEL</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>Y</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>Full_state_name</name>
        <field>State</field>
      </key>
      <value>
        <name>State</name>
        <rename>State</rename>
        <default/>
        <type>String</type>
      </value>
      <value>
        <name>Short_state</name>
        <rename>Short_state</rename>
        <default/>
        <type>String</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>510</xloc>
      <yloc>79</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

</steps>
<order>
  <hop> <from>EXCEL</from><to>Stream lookup</to><enabled>Y</enabled> </hop>
  <hop> <from>CSV</from><to>Stream lookup</to><enabled>Y</enabled> </hop>
</order>
<notepads>
</notepads>
<step_error_handling>
</step_error_handling>
</transformation-steps>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T13:15:48.497

您可以使用[合并加入](http://wiki.pentaho.com/display/EAI/Merge+Join)。使用它，您可以合并两个文件并选择所需的列。在合并之前，您必须根据用于映射的字段对这些文件进行排序。在您的情况下，它将是`state name`.

# java - Java Propagating Exceptions

> ID：11637490
> 
> 赞同：1
> 
> 时间：2012-07-24T18:56:53.570
> 
> 标签：java

When would you want to propagate an exception to another Class/Method versus catching the Exception in the same Class/Method?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:58:35.627

You catch the exception where you have to handle it.

As a rule of thumb, you should let your exceptions bubble up, but if you don't want your subroutine to crash due to a (possibly expected) error, than you handle the exception, which normally involves logging an error and/or displaying an error message to the user.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:59:33.567

The good practice is "throw early and catch late". That allows you to better understand the cause of the exception.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:03:40.510

This topic is fairly broad; fortunately there are good resources already in place:

[Guidelines on Exception propagation (in Java)](https://stackoverflow.com/questions/3551221/guidelines-on-exception-propagation-in-java)

[http://www.javacodegeeks.com/2012/04/exception-handling-guidelines-best.html](http://www.javacodegeeks.com/2012/04/exception-handling-guidelines-best.html)

[Best practices for exception management in Java or C#](https://stackoverflow.com/questions/409563/best-practices-for-exception-management-in-java-or-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:10:26.073

The great majority of exceptions occuring in real-life code are not recoverable in the sense there's any meaningful code that will retry the operation or try to do it differently. The only recovery happening is aborting the current unit of work in an orderly manner—logging the exception, releasing any resources and similar.

This means that, as a first rule, you'll **always want to propagate the exception** towards that well-defined *exception barrier* that demarcates your unit of work.

If your code demands anything different than this, it is probably going to be obvious enough, so you don't need to think about it in the general.

# vmware - VMWare Snapshot 如何在不复制所有 VM 文件的情况下“保存”VM 的状态？

> ID：11637495
> 
> 赞同：0
> 
> 时间：2012-07-24T18:57:11.963
> 
> 标签：vmware

我想知道，VMware Snapshots 使用什么样的技术来确保您能够在不复制所有 VM 磁盘的情况下返回到以前的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:05:15.767

它基本上是一个增量子磁盘。在运行快照时进行操作。使它很容易恢复。

[解释链接](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1015180)

# windows - 将所有批处理文件参数转发到内部命令

> ID：11637501
> 
> 赞同：39
> 
> 时间：2012-07-24T18:57:37.953
> 
> 标签：windows, batch-file, automation

为了我在 Windows 中的舒适，我想准备一些在 Unix 中启动的 PHP 工具。

费：`composer create-project symfony/framework-standard-edition path/`

不是：`php composer.phar create-project symfony/framework-standard-edition path/`

我在系统路径目录中创建了**composer.bat文件：**

```
php C:\path\to\composer\composer.phar 
```

它的工作原理很简单。但是如何将所有参数和标志转发到里面的命令呢？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-24T19:09:55.383

在您的批处理文件*composer.bat*中，简单地说：

```
php C:\path\to\composer\composer.phar %* 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-24T19:09:32.633

windows让你`%*`参考所有的参数。

然后，您的新**composer.bat**文件将变为
`php C:\path\to\composer\composer.phar %*`

# post - YUI 日历中选择的日期的 POST 值

> ID：11637505
> 
> 赞同：0
> 
> 时间：2012-07-24T18:58:02.807
> 
> 标签：post, yui

我一直在寻找每个地方，当我使用它时，该教程似乎不起作用。我看到了类似的东西`getfullmonth`，`getfullyears`等等......无论如何，我正在使用这段代码：

我的js：

```
<script> 
   YAHOO.namespace("example.calendar"); 
   YAHOO.example.calendar.init = function() { 
      YAHOO.example.calendar.cal1 = new YAHOO.widget.CalendarGroup("cal1","cal1Container", {PAGES:1}); 
      YAHOO.example.calendar.cal1.render(); 
   } 
   YAHOO.util.Event.onDOMReady(YAHOO.example.calendar.init);    
</script> 
```

这是我的 HTML：

```
<input type="text" value="I WANT TO PUT THE SELECTED DATE HERE" id="datechoix" class="n-input2" name="datechoix" readonly="readonly"  />
<div id="cal1Container" style="margin-top:15px;"></div> 
```

有人有一个很好的教程或完整的答案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-29T15:11:07.040

您必须收听选择日期事件。如果用户选择一个日期并将日期信息作为参数保存，它就会触发。

见这个例子：http: [//yui.github.io/yui2/docs/yui_2.9.0_full/examples/button/btn_example09.html](http://yui.github.io/yui2/docs/yui_2.9.0_full/examples/button/btn_example09.html)

# java - Java 正则表达式：提取单词短语时遇到问题

> ID：11637506
> 
> 赞同：0
> 
> 时间：2012-07-24T18:58:03.960
> 
> 标签：java, regex, matching

我正在尝试从 Java 源文件中提取单词短语。例如我有一个简单的源类

```
class TestClass implements TestInterface implements TestInterface2 {

}

class TestClass2 {

} 
```

我想提取“类TestClass”和“类TestClass2”。我尝试了不同的正则表达式模式，但找不到解决方案

我的测试代码spinet：-

```
public static void wordPhraser(String sourceText) {

    Pattern p = Pattern.compile("class(\\s+)([a-zA-Z]*)");
    Matcher m = p.matcher(sourceText);
    while (m.find()) {
        System.out.println("output " + m.group());
    }
} 
```

还尝试过：-

```
"class\\s*([a-zA-Z])"
"class\\s*[a-zA-Z]"
"^class\\s+[a-zA-Z]$" 
```

这些都不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:02:41.307

这是我使用的正则表达式：

```
(final|abstract|\n|^) {0,}class {1,}.{1,} {0,}\\{ 
```

不过，这也将获得包括工具/接口在内的测试。这是我用来解析它们的代码，只需获取类名：

```
 String match = m.group();//m is my matcher for the regex
        String s = match.substring(match.indexOf("class ") + "class ".length(), match.lastIndexOf("{")).trim();
        if(s.contains("extends"))
            s=s.substring(0, s.indexOf("extends"));
        if(s.contains("implements"))
            s=s.substring(0, s.indexOf("implements"));
        s=s.trim();
        strings.add(s); 
```

注意：这不适用于公共或私有类，仅适用于具有简单 final/abstract 修饰符的类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:02:42.163

我不敢说它们有效，但还有改进的余地：

```
\bclass(\s+)([a-zA-Z_]\w*)\b 
```

是一个更好的正则表达式。你没有匹配数字。

当然，这就是你应该在 Java 中使用它的方式：

```
String regex = "\\bclass(\\s+)([a-zA-Z_]\\w*)\\b"; 
```

* * *

匹配更多：

```
\b((public|private|protected|static|abstract|final)\s*)*class(\s+)([a-zA-Z_]\w*)\b 
```

* * *

演示：

![在此处输入图像描述](../Images/d137dfc8bb9820c88c0f7d82fe427ff6.png)

# javascript - 从禁用选择中删除向下箭头

> ID：11637507
> 
> 赞同：6
> 
> 时间：2012-07-24T18:58:04.100
> 
> 标签：javascript, jquery, html

```
 <select>
               <option value="volvo">Volvo</option>
               <option value="saab">Saab</option>
               <option value="mercedes" selected>Mercedes</option>
               <option value="audi">Audi</option>
       </select>    

$('select').attr('disabled', 'disabled'); 
```

是否可以使用 jQuery 或仅使用 Javascript 或 HTML 删除禁用选择中的向下箭头？

[jsfiddle](http://jsfiddle.net/KRn4a/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-24T12:34:27.897

这是可行的，是的：

```
select[disabled] {
    -webkit-appearance: none;
    -moz-appearance: none;
    text-indent: 0.01px;
    text-overflow: '';
} 
```

现场示例： http: [//jsfiddle.net/joaocunha/UhfcA/1/](http://jsfiddle.net/joaocunha/UhfcA/1/)（**请务必查看里面的要点以了解其工作原理**）。

顺便说一句，我和@ThiefMaster 在一起：可行并不意味着应该这样做。在不提供自定义箭头的情况下删除选择箭头是非常糟糕的用户体验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T19:00:36.720

这是不可能的（尤其是不能在所有浏览器中使用）。

无论如何你都不应该这样做，因为禁用的选择框仍然有箭头 - 做与用户操作系统通常不同的事情通常是不好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T19:06:49.697

不，这是不可能的（至少跨浏览器），正如@ThiefMaster 所说（+1），在任何情况下都不是一个好主意，因为您正在扰乱用户 UI 的预期规范。

尽管如此，如果您坚持，您将需要使用下拉菜单的 HTML 模拟，而不是`select`标签，[**例如**](http://www.mitya.co.uk/scripts/Using-Dropdown-as-fancy-form-field-124)我在 100 年前制作的这个。这些天可能有更好的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T19:22:38.760

您还可以在父级中使用 css 溢出：隐藏。这样，您可以向右裁剪选择框，删除箭头。

CSS：

```
<style>
    .selectParent{width:80px;overflow:hidden;}
    .selectParent>select{width:100px;}
</style> 
```

标记：

```
 <div class="selectParent">
     <select>
           <option value="volvo">Volvo</option>
           <option value="saab">Saab</option>
           <option value="mercedes" selected>Mercedes</option>
           <option value="audi">Audi</option>
     </select>  
 </div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T19:04:14.033

这是不可能的。

尝试这样的事情。（用 CSS 自定义）

```
$('select').change(function(){
    $('<input />').val($(this).val()).appendTo($(this).parent()).attr('readonly','readonly').attr('disabled','disabled');
    $(this).remove();
}); 
```

如果在页面加载时选择已经具有值。

```
var mySelectBox = $('select');
$('<input />').val($(mySelectBox).val()).appendTo($(mySelectBox).parent()).attr('readonly'‌​,'readonly').attr('disabled','disabled');
$(mySelectBox).remove(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T19:05:09.150

在 Webkit *(Chrome, Safari)*中，您可以在**Css**中指定：

`-webkit-appearance: none;`
*而不是*
`-webkit-appearance: menulist;`

这样，您将不会有任何 Select 预格式化的 Css，即没有箭头。
但是正如*ThiefMaster*所说，最好的方法是像操作系统通常那样保持它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T19:06:32.007

它不是那样做的。

通常，“样式化”选择只是另一种类型的元素，其中应用了 css 颜色、渐变、图像等，以赋予它下拉的感觉。

例如，您可以使用下拉菜单来代替它。

css

```
.input.select { background: url('downarrow.jpg') no-repeat right top; }
.selectOptions { display: block; width: 100px; height: 200px; background: white; } 
```

标记

```
<div>
    <input type="text" class="select" value="click me" />
    <div class="selectOptions">
        <ul>
            <li val="some custom value">option</li>
        </ul>
    </div>
</div> 
```

在 jquery 中你会做这样的事情：

```
$('input.select').bind('click', function() {
    $(this).find('div.selectOptions').toggle();
});

$('div.selectOptions ul li').bind('click', function() {
    var val = $(this).attr('val');
    // update the input upon click.
    var input = $(this).parent().parent().parent().find('input.select');
    input.val( val );
}); 
```

当然，您可以只使用其他人的跨浏览器库，该库已经完成了此类工作……例如 jQuery UI。

# bitmap - DirectX -- 将四边形渲染到 WicBitmapRenderTarget (SharpDX)

> ID：11637521
> 
> 赞同：3
> 
> 时间：2012-07-24T18:59:20.257
> 
> 标签：bitmap, directx, direct3d, direct2d, wic

[根据前面的问题](https://stackoverflow.com/questions/11350000/mapping-corners-to-arbitrary-positions-using-direct2d/11362129)，我正在尝试使用 Direct3D11 非常快地执行一些图像变形，但似乎无法让所有东西一起工作。

当我尝试将 DXGI Surface 读入 Direct2D 位图时，一切都失败了。

```
var renderSurface = renderTexture.QueryInterface<SharpDX.DXGI.Surface>();
var props = new BitmapProperties
                {
                    PixelFormat = new SharpDX.Direct2D1.PixelFormat(
                        Format.B8G8R8A8_UNorm,
                        AlphaMode.Premultiplied
                    )
                };

// This throws "No such interface supported"
var direct2DBitmap = 
    new SharpDX.Direct2D1.Bitmap(_bitmapRenderTarget, renderSurface, props); 
```

我也尝试使用该`Map`方法直接读取表面，但在我尝试对数据做任何事情之前就失败了：

```
var renderSurface = renderTexture.QueryInterface<SharpDX.DXGI.Surface>();
// This throws "The parameter is incorrect."
renderSurface.Map(MapFlags.Read); 
```

更完整的代码如下。另外，如果这里有什么与这份工作无关的东西……我全神贯注。我不是一个真正的 3D 人，只是试图解决一个没有简单 Direct2D 解决方案的非常具体的问题。

```
public void AddImage(BitmapSource bitmapSource, SharpDX.Vector2[] abcd)
{
    Device device;
    Texture2D renderTexture = null;
    device = new Device(DriverType.Hardware, DeviceCreationFlags.BgraSupport);
    renderTexture = new Texture2D(device, new Texture2DDescription
    {
        Width = _size.Width,
        Height = _size.Height,
        Format = SharpDX.DXGI.Format.B8G8R8A8_UNorm,
        MipLevels = 1,
        ArraySize = 1,
        SampleDescription = new SharpDX.DXGI.SampleDescription(1, 0),
        BindFlags = BindFlags.RenderTarget | BindFlags.ShaderResource,
        Usage = ResourceUsage.Default,
    });
    var renderView = new RenderTargetView(device, renderTexture);

    //
    // Load the input bitmap as a texture
    //
    var texture = CreateTexture2DFromBitmap(device, bitmapSource);
    var textureView = new ShaderResourceView(device, texture);
    var sampler = new SamplerState(device, new SamplerStateDescription()
    {
        Filter = Filter.MinMagMipLinear,
        AddressU = TextureAddressMode.Wrap,
        AddressV = TextureAddressMode.Wrap,
        AddressW = TextureAddressMode.Wrap,
        BorderColor = Color.Black,
        ComparisonFunction = Comparison.Never,
        MaximumAnisotropy = 16,
        MipLodBias = 0,
        MinimumLod = 0,
        MaximumLod = 16,
    });

    //
    // Setup the scene
    // These shaders are from the MiniCubeTexture sample for SharpDX
    //
    var vertexShaderByteCode = ShaderBytecode.CompileFromFile("MiniCubeTexture.fx", "VS", "vs_4_0");
    var vertexShader = new VertexShader(device, vertexShaderByteCode);
    var pixelShaderByteCode = ShaderBytecode.CompileFromFile("MiniCubeTexture.fx", "PS", "ps_4_0");
    var pixelShader = new PixelShader(device, pixelShaderByteCode);

    var layout = new InputLayout(device, ShaderSignature.GetInputSignature(vertexShaderByteCode), new[] {
        new InputElement("POSITION", 0, SharpDX.DXGI.Format.R32G32B32A32_Float, 0, 0),
    new InputElement("TEXCOORD", 0, SharpDX.DXGI.Format.R32G32_Float, 16, 0),
    });

    var vertices = SharpDX.Direct3D11.Buffer.Create(device, BindFlags.VertexBuffer, new[] {
    // 3D coordinates              UV Texture coordinates
        abcd[0].X, abcd[0].Y,  0.0f, 1.0f,     0.0f, 1.0f, // Front
        abcd[1].X, abcd[1].Y,  0.0f, 1.0f,     0.0f, 0.0f,
        abcd[2].X, abcd[2].Y,  0.0f, 1.0f,     1.0f, 0.0f,
        abcd[3].X, abcd[3].Y,  0.0f, 1.0f,     0.0f, 1.0f,
    });

    var contantBuffer = new SharpDX.Direct3D11.Buffer(device, Utilities.SizeOf<Matrix>(), ResourceUsage.Default, BindFlags.ConstantBuffer, CpuAccessFlags.None, ResourceOptionFlags.None, 0);

    var context = device.ImmediateContext;
    context.InputAssembler.InputLayout = layout;
    context.InputAssembler.PrimitiveTopology = PrimitiveTopology.TriangleStrip;
    context.InputAssembler.SetVertexBuffers(0, new VertexBufferBinding(vertices, Utilities.SizeOf<Vector4>() + Utilities.SizeOf<Vector2>(), 0));
    context.VertexShader.SetConstantBuffer(0, contantBuffer);
    context.VertexShader.Set(vertexShader);
    context.Rasterizer.SetViewports(new Viewport(0, 0, _size.Width, _size.Height, 0.0f, 1.0f));
    context.PixelShader.Set(pixelShader);
    context.PixelShader.SetSampler(0, sampler);
    context.PixelShader.SetShaderResource(0, textureView);
    context.OutputMerger.SetTargets(renderView);

    //
    // Render 3D
    //          
    context.ClearRenderTargetView(renderView, Colors.Transparent);
    var worldViewProj = Matrix.Identity;// Matrix.Translation (_size.Width, _size.Height / 2, 0) * Matrix.Scaling (_size.Width / 2, _size.Height / 2, 1);
    context.UpdateSubresource(ref worldViewProj, contantBuffer);
    context.Draw(4, 0);

    //
    // Composite
    //

    //Create a render target

    var renderSurface = renderTexture.QueryInterface<SharpDX.DXGI.Surface>();
    var props = new BitmapProperties
                    {
                        PixelFormat = new SharpDX.Direct2D1.PixelFormat(Format.B8G8R8A8_UNorm,AlphaMode.Premultiplied)
                    };

    var direct2DBitmap = new SharpDX.Direct2D1.Bitmap(_bitmapRenderTarget, renderSurface, props);

    _wicRenderTarget.BeginDraw();
    _wicRenderTarget.DrawBitmap(direct2DBitmap, 1.0f, SharpDX.Direct2D1.BitmapInterpolationMode.Linear);
    _wicRenderTarget.EndDraw();

    direct2DBitmap.Dispose();
}

private static SharpDX.Direct3D11.Texture2D CreateTexture2DFromBitmap(SharpDX.Direct3D11.Device device, SharpDX.WIC.BitmapSource bitmapSource)
{
    // Allocate DataStream to receive the WIC image pixels
    int stride = bitmapSource.Size.Width * 4;
    using (var buffer = new SharpDX.DataStream(bitmapSource.Size.Height * stride, true, true))
    {
        // Copy the content of the WIC to the buffer
        bitmapSource.CopyPixels(stride, buffer);
        return new SharpDX.Direct3D11.Texture2D(device, new SharpDX.Direct3D11.Texture2DDescription()
        {
            Width = bitmapSource.Size.Width,
            Height = bitmapSource.Size.Height,
            ArraySize = 1,
            BindFlags = SharpDX.Direct3D11.BindFlags.ShaderResource,
            Usage = SharpDX.Direct3D11.ResourceUsage.Immutable,
            CpuAccessFlags = SharpDX.Direct3D11.CpuAccessFlags.None,
            Format = SharpDX.DXGI.Format.R8G8B8A8_UNorm,
            MipLevels = 1,
            OptionFlags = SharpDX.Direct3D11.ResourceOptionFlags.None,
            SampleDescription = new SharpDX.DXGI.SampleDescription(1, 0),
        }, new SharpDX.DataRectangle(buffer.DataPointer, stride));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:19:30.450

您应该能够使用[CreateSharedBitmap](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371865%28v=vs.85%29.aspx)创建一个 ID2D1Bitmap 并在您的 Direct2D 场景中使用它。从[SharpDX 来源](http://code.google.com/p/sharpdx/source/browse/Source/SharpDX.Direct2D1/Bitmap.cs?r=16afffae5bf5b7879abbb4ce6873122f576e0748#85)看来，Bitmap 有多个调用 CreateSharedBitmap 的重载构造函数。

[还可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370966%28v=vs.85%29.aspx#interoperability_through_dxgi)通过 DXGI 查看有关 Direct2D 和 Direct3D 之间互操作的文档。

**编辑：**经过一番搜索，[看起来](http://sharpdx.org/forum/5-api-usage/164-d3d11-d2d1-direct3d-and-2d-interop)我上面建议的方法[在 Windows 7 上不受支持](https://stackoverflow.com/questions/4485265/cant-create-direct2d-dxgi-surface)（仅在 Windows 8 上）。

[不过，这里](http://www.aaronblog.us/?p=36)有一个解决方法。

# python - opencv 的 cv.GetSubRect 和 PIL 的 .crop() 有区别吗？

> ID：11637523
> 
> 赞同：1
> 
> 时间：2012-07-24T18:59:32.070
> 
> 标签：python, opencv

我使用以下代码使用我的网络摄像头拍摄了一张图像：

```
cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)
capture = cv.CaptureFromCAM(0)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_WIDTH, 960)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_HEIGHT, 544)

def record():
    frame = cv.QueryFrame(capture)
    cv.ShowImage("w1", frame)
    splitter(frame, 4) 
```

我正在尝试使用 cv.GetSubRect 将其裁剪成更小的部分：

```
def splitter(image, split):
    width, height = cv.GetSize(image)
    x = width/split
    y = height/split

    # Form the 4-tuples.
    img_parts = []
    for y_pos in range(split):
        for x_pos in range(split):
            xy_section = (x_pos*x, y_pos*y, (x_pos+1)*x, (y_pos+1)*y)
            # print xy_section
            img_parts.append(xy_section)

    # The cropping.
    cropped_parts = []
    for part in img_parts:
        # print "part "+str(part)
        cropped = cv.GetSubRect(image, part) # Error is thrown here
        cropped_parts.append(cropped) 
```

但我不断收到错误消息

> OpenCV 错误：cvGetSubRect 中输入数组 () 的大小不正确，文件 /build/buildd/opencv-2.3.1/modules/core/src/array.cpp，第 1262 行

捕获的图像大小为 960x544，我将其拆分为 4 元组列表，其中前四个是：

*   (0, 0, 240, 136)
*   (240, 0, 480, 136)
*   (480, 0, 720, 136)
*   (720, 0, 960, 136)

矩形按该顺序获取，当尝试获取第三个 4 元组 (480, 0, 720, 136) 的矩形时会引发错误。原始图像大于（960x544），所以出了什么问题？使用 image.crop() 在 Python 的 PIL 中使用了相同的方法，但 opencv 的替代方法似乎有点不同，我只是不知道怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:43:03.223

Opencv 的 .GetSubRect() 与 PIL 的 .crop() 有点不同。两者都将 4 元组作为参数，但它们以不同的方式描述要裁剪的区域。

PIL .crop():

```
(pos_left, pos_top, pos_right, pos_bottom) 
```

例如，在 100x100 大小的图像（0、50、50、100）中，正好裁剪图像的左下角，从而生成 50x50 大小的图像。

Opencv .GetSubRect():

```
(pos_left, pos_top, width, height) 
```

对于相同大小的 100x100 图像，(0, 50, 50, 100) 将从原始图像的位置 (0, 50) 开始裁剪 50x100 大小的区域。以这种方式超出原始图像大小并引发错误。要裁剪左下角， (0, 50, 50, 50) 有效。

# objective-c - 寻找某种 TableViewDidDisplayNotification

> ID：11637528
> 
> 赞同：0
> 
> 时间：2012-07-24T18:59:37.187
> 
> 标签：objective-c, uitableview, nsnotificationcenter

我有一个基于拆分视图的应用程序，并且想在显示根菜单时收听某种通知。我想这样做的原因是因为键盘与菜单重叠，所以我想在显示菜单时隐藏键盘。

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillHide:) 
                                                 name:<Some Notification Here> 
                                               object:self.view.window]; 
```

我已经有了隐藏键盘的方法，我只是在寻找适当的通知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:08:13.440

您可以从根菜单中自己发布通知。`viewDidAppear`只需将其子类化并在or上发布通知`viewWillAppear`。

警告词：如果您的目标是 iOS 5 及更高版本，您应该记住`viewWillAppear`和`viewDidAppear`在 iOS6 中已弃用。使用 `willMoveToParentViewController`或`didMoveToParentViewController`或`-(void)viewWillLayoutSubviews`

```
-(void)willMoveToParentViewController:(UIViewController *)parent{
    if (!parent)
      //post notification here

} 
```

此外，您可以提供 nil 作为通知名称并收听任何可能的通知，然后 NSLog 将其注销，也许您可​​以在那里找到有用的通知，只需确保将其记录在案以确保您的产品不会过时。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationReceived:) name:nil object:nil]; 
```

# asp.net - Web 部署项目的更好替代方案

> ID：11637529
> 
> 赞同：5
> 
> 时间：2012-07-24T18:59:37.140
> 
> 标签：asp.net, deployment, web-deployment-project, webdeploy, microsoft-web-deploy

我有一个包含几个项目的解决方案，其中 3 个是基于 Web 的（IIS / MVC 站点中的 WCF）。当解决方案构建时，它将这个分布式系统的每个组件转储到“构建”文件夹中。运行整个输出的“配置器”部分将自动在云中设置系统。它非常整洁 :) 然而，Web 部署项目是一个主要的痛苦。他们“构建”（即部署）每次我构建时 - 即使没有对他们各自的项目进行任何更改。

改变了一行代码？期待等待大约一分钟以重新部署 3 个 Web 项目。

[这些项目目前非常简单 - 两个有一个 .svc 和一个 .ashx 文件 - 另一个是一个有大约 5 个视图的 MVC 应用程序]

我意识到我可以将解决方案配置更改为不“构建”它们，但我一直在这样做，而且很容易在第二天登录并忘记它，并花费几个小时追踪分布式系统中的错误根本没有建造的东西。

为什么我使用 Web 部署项目？好吧，因为我需要来自 web 项目的所有页面 + 二进制文件。项目本身的构建输出是“bin”文件夹，因此没有页面。整个项目文件夹？它有 .cs、.csproj 和其他我不想包含的文件。

这最终将建立在构建服务器上，但目前它是本地的。但我想要一种将实际输出文件从 Web 项目获取到我的目标文件夹的快速方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:55:33.747

不确定这是否对您的情况有所帮助（插入自己的项目），但我正在开发一个项目以帮助简化 IIS 部署：

[https://github.com/twistedtwig/AutomatedDeployments](https://github.com/twistedtwig/AutomatedDeployments)

这个想法是您可以使用 IIS（应用程序池、应用程序和网站）的配置文件来自动在本地（开发机器）或远程（测试和生产机器）创建和更新站点。

它仍在进行中，但已准备好在生产系统中使用。

使用包创建作为后期构建步骤可能会让你更接近你想要的，（不要相信它包含所有额外的文件），但是每次仍然会构建它，（尽管如果代码没有改变它应该除非您选择重建所有项目，否则不要重建）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:37:04.923

最后，我创建了一个实用程序/工具，给定一个项目文件，XCOPY 将 Web 项目的项目文件夹复制到目标位置，然后查看所述项目文件并删除没有将 Build Action 设置为 Content 的任何内容。非常快速有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:27:41.097

我知道它仍在 RC 中，但 VS2012 在发布时确实有一个简洁的功能，它可以检测到更改并仅发布这些更改。可能在构建中更深入一些，它也会自动发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:03:15.667

您可以查看 Octopus 项目：[http](http://octopusdeploy.com/) : //octopusdeploy.com/ 基于 nuget 包的部署。

# c# - 具有相同整数值的 C# 枚举中的元素排序

> ID：11637532
> 
> 赞同：2
> 
> 时间：2012-07-24T18:59:49.043
> 
> 标签：c#, .net

我有一个简单的枚举：

```
enum E
{
    FullNameForA = 1,
    A = 1,
    FullNameForB = 2,
    B = 2
} 
```

目标是能够对相同的整数值使用不同的字符串值，但必须使用 FullNameFor* 作为默认值。换句话说，用户可以提供 EA 作为输入，但代码应该使用 E.FullNameForA 作为输出。

似乎默认情况下 C# 将使用具有相同整数值的元素按字母顺序排列，这使我的目标更加困难。是对的吗？任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T19:02:45.143

> 似乎默认情况下 C# 将使用具有相同整数值的元素的字母顺序

在什么情况下？当您将值转换回字符串时？来自以下文档[`Enum.ToString`](http://msdn.microsoft.com/en-us/library/16c1xs4z)：

> 如果多个枚举成员具有相同的基础值，并且您尝试根据其基础值检索枚举成员名称的字符串表示形式，则您的代码不应对该方法将返回哪个名称做出任何假设。

（请注意，该决定在 BCL 中 - 这不是*语言*决定。）

我建议，如果您想要每个值的*规范*字符串表示，您可以创建一个`Dictionary<E, string>`并查阅它，而不是调用`ToString()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:04:11.117

考虑这个替代解决方案。您可以使用 DescriptionAttribute 装饰枚举值并使用更人性化的名称：

```
enum E
{
    [System.ComponentModel.Description("FullNameForA")]
    A = 1
} 
```

然后您可以像这样提取该属性的值：

```
public static string AsString(this Enum value)
{
    var type = value.GetType();

    if (!type.IsEnum)
        throw new ArgumentException();

    var fieldInfo = type.GetField(value.ToString());
    if (fieldInfo == null) 
        return value.ToString();

    var attribs = fieldInfo.GetCustomAttributes(typeof(DescriptionAttribute), false) as DescriptionAttribute[];

    return attribs.Length > 0 ? attribs[0].Description : value.ToString();
} 
```

这当然不是性能最好的解决方案，因为它依赖于反射。

# c# - 将位图转换为图标

> ID：11637538
> 
> 赞同：11
> 
> 时间：2012-07-24T19:00:06.063
> 
> 标签：c#, winforms, image, bitmap, icons

我正在尝试将图像从 a 转换`Bitmap`为 Windows 图标。这是代码。

```
private void btnCnvrtSave_Click(object sender, EventArgs e)
{
    Bitmap bmp = (Bitmap)picturePanel.BackgroundImage;
    Bitmap newBmp = new Bitmap(bmp);
    Bitmap targetBmp = newBmp.Clone(new Rectangle(0, 0, newBmp.Width, newBmp.Height), PixelFormat.Format64bppArgb);
    IntPtr Hicon = targetBmp.GetHicon();
    Icon myIcon = Icon.FromHandle(Hicon);

    SaveFileDialog sfd = new SaveFileDialog();
    sfd.Title = "Save Icon";
    sfd.Filter = "Icon|*.ico";
    sfd.ShowDialog();

    FileStream fileStream = new FileStream(sfd.FileName,FileMode.OpenOrCreate);
    myIcon.Save(fileStream);
    fileStream.Flush();
    fileStream.Close();

    MessageBox.Show("Image is converted successfully!");
} 
```

代码工作正常，但问题是，当我将图片转换为图标时，转换后的图标会失去其真实颜色和渐变（如图所示）。那么，有什么方法可以在不丢失颜色的情况下转换图像？

这就是我的图标的样子。

![转换前后](../Images/c4e4759313bef039ed2c6a16e7396b44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:09:34.067

这是 .Net 的一个已知问题，因为它没有图标编码器。有关可能的解决方法，请参阅以下内容。

[创建有效的图标文件](http://www.vbforums.com/showthread.php?t=396650)

[将位图转换为图标问题](http://channel9.msdn.com/Forums/TechOff/130238-C-20-convert-Bitmap-to-Icon-problem)

# sms - 如何将我的广播接收器上下文类传递给我的服务类

> ID：11637541
> 
> 赞同：0
> 
> 时间：2012-07-24T19:00:34.693
> 
> 标签：sms, broadcast

> **可能重复：**
> [在android上获取上下文的静态方式？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

我有一个广播接收器类和服务类，如果我收到一个字符串“testing”，我将在我的广播接收器中启动我的服务。

这就是我在广播接收器类中启动服务的方式。它正在工作

```
private void startSMSforwarderService(Context context,String y)
{
    if(y.startsWith("testing"))
    {
        Intent SmsForwarderService = new Intent(context,SmsForwarderService.class);
        SmsForwarderService.putExtra("var_msgbody",msgbody); //pass variable value via intent from broadcast receiver to android service
        SmsForwarderService.putExtra("var_from", from);

        context.startService(SmsForwarderService);
    }
} 
```

我的服务中有一个需要上下文的方法，我想将我的上下文从广播接收器扩展到我的服务。我怎么能那样做？一些片段将不胜感激..谢谢

我的接收器 [https://gist.github.com/3171877](https://gist.github.com/3171877)

我的服务等级

[https://gist.github.com/3171792](https://gist.github.com/3171792)

如您所见，我的服务中有一个方法，它需要一个上下文才能使用它..

```
void forwardSMS(String msgbody,Context smsSenderService, Intent SENT_ACTION) 
```

基本上我想将我的广播接收器上下文传递给我的服务类......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:16:02.713

问题解决了.. 我发现这种 [静态方式可以在 Android 上获取“上下文”？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

但他们是另一种方式吗？

# asp.net-mvc - 来自不同控制器的 mvc3 剃须刀视图

> ID：11637549
> 
> 赞同：1
> 
> 时间：2012-07-24T19:00:51.867
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

所以在我的个人资料控制器页面中。我在 create 方法中有一个方法调用 create

```
 if (Convert.ToInt32(calBMI) >= 25)
            {
                return View("Index", Survey);
            } 
```

我想将页面呈现到调查索引（调查是另一个负责调查的控制器），我该怎么做才能让它工作，谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:02:53.160

```
 return View("~/Views/Survey/Index.cshtml", objSurvey); 
```

假设`objSurvey`是您的模型/视图模型对象，并且`Survey/index`视图被强类型`objSurvey`化为模型/视图模型的类型

**编辑：**根据评论，如果您的视图不是强类型的，您可以忽略第二个参数

```
public ActionResult GetSomeThing()
{
   return View("~/Views/Survey/Index.cshtml");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:07:33.813

如果您打算在多个控制器之间共享此视图，它应该在`/Views/Shared/`文件夹中。在控制器文件夹或共享文件夹之外使用视图缺乏充分的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T21:56:40.540

在我看来，您可以重定向到调查列表（如果这是您的意图）。

```
return RedirectToAction("Index", "Survey"); 
```

# progress-bar - 在选项菜单上添加进度条

> ID：11637551
> 
> 赞同：0
> 
> 时间：2012-07-24T19:01:08.437
> 
> 标签：progress-bar, menuitem, options, progress

我正在尝试在选项菜单上添加一个进度条（当用户单击菜单上的一项时，我将在后台执行一项任务，并且在处理此操作时我想显示一个进度条）。有谁知道该怎么做？

谢谢！

# java - 代理模式的正则表达式

> ID：11637555
> 
> 赞同：1
> 
> 时间：2012-07-24T19:01:17.907
> 
> 标签：java, regex, proxy, notepad++

从文本垃圾列表中，我正在使用正则表达式。以下将完成解析代理模式的工作
`(\d{1,3}\.){3}\d{1,3}:\d{2,5}`。但是这种模式会像这样解析文本：

`692.248.222.879:43780`
`692.83.47.579:43780`

这是不可能的IP地址。我想知道，如何使用正则表达式跳过这种范围？

我喜欢的工具：Java 或 C#、notepad++。但是任何语言都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:08:01.003

试试这个：

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b:\d{2,5} 
```

'

```
692.248.222.879:43780 
692.83.47.579:43780
192.168.1.1:27052 
```

仅适用于最后一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:05:17.640

要使用正则表达式验证数字范围，您必须提供所有可能的组合，这就是为什么通常最好使用内置工具，例如 .NET 的`IPAddress.TryParse`. 但无论如何...

```
((?:1?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:1?\d{1,2}|2[0-4]\d|25[0-5]):\d{2,5} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:09:52.990

```
"^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])$:\d{2,5}"; 
```

[证明](http://www.mkyong.com/regular-expressions/how-to-validate-ip-address-with-regular-expression/)

# javascript - 将javascript中的随机数序列写入段落

> ID：11637567
> 
> 赞同：1
> 
> 时间：2012-07-24T19:01:45.797
> 
> 标签：javascript, html

真的是一个新手问题，但我似乎找不到答案。我需要让这个 html 文件显示一堆随机数，间隔 1 秒。出于某种原因（可能很明显），它只显示最后一个，除非在生成每个随机数后我有 1 个警报。我该如何纠正？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var randomnumber
var message

function placePossibleWinner()
{
randomnumber=Math.floor(Math.random()*11);
message="Teste ";
message=message.concat(randomnumber.toString());
document.getElementById("WINNER").innerHTML=message;
//alert(".")
}
</script>
</head>

<body>
<script type="text/javascript">
function runDraw()
{
    var i=1
    alert("start")
    while (i<20)
  {
        setTimeout("placePossibleWinner()",1000)
        i++
  }
}
</script>

<h1>H Draw</h1>

<p id="WINNER">Draw</p>
<p></p>
<button onclick="runDraw()">Get me winner!</button>

</body>
</html> 
```

提前感谢您的任何答案/评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:11:10.770

问题是您的所有`setTimeout`s 都同时被触发。添加`alert`s 会暂停 JavaScript 执行，因此您会看到每个数字。没有它，1 秒后，所有 19 `setTimeout`s 运行（一个接一个）并且您只看到一个数字（屏幕更新如此之快，您只看到一个）。

尝试`setInterval`改用。

```
function runDraw() {
    var i = 1;
    var interval = setInterval(function(){
        if(i < 20){
            placePossibleWinner();
            i++;
        }
        else{
            clearInterval(interval);
        }
    }, 1000);
}​ 
```

这将每秒运行一次该函数，直到`i`为 20，然后它将清除间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T19:14:29.717

我相信你想要`setInterval`的。在循环中使用`setTimeout`只会立即排队 20 个调用，它们将在 1 秒后立即触发。此外，您正在设置的`innerHTML`将`p`覆盖任何以前的文本。

```
function placePossibleWinner() {
    // add a var here, implicit global
    var randomnumber=Math.floor(Math.random()*11);

    // add a var here, implicit global
    message="Teste " + randomnumber + '\n'; // new line

    document.getElementById("WINNER").innerHTML += message; // concat, don't assign
}

function runDraw() {
    var counter = 1;
    var intervalID = setInterval(function () {
        if (counter < 20) {
            placePossibleWinner();
            counter++;
        } else {
           clearInterval(intervalID);
        }
    }, 1000);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:19:43.730

您正在重置函数中的消息，并且以错误的方式调用 placePossibleWinner() ......您想使用 setInterval。以下是对您的 html/javascript 的修改

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
    var randomnumber;
    var message = "Teste ";
    var timesCalled = 0;
    var funtionPointer;

    function placePossibleWinner()
    {
        timesCalled++;
        randomnumber=Math.floor(Math.random()*11);
        message=message.concat(randomnumber.toString());
        document.getElementById("WINNER").innerHTML=message;
        if (timesCalled > 20)
        {
         clearInterval(functionPointer);
        }
     }
</script>
</head>

<body>
<script type="text/javascript">
    function runDraw()
    {
        var i=1
        alert("start")
        functionPointer = setInterval(placePossibleWinner,1000)
    }
</script>

<h1>H Draw</h1>

<p id="WINNER">Draw</p>
<p></p>
<button onclick="runDraw()">Get me winner!</button>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:06:34.267

首先，

```
setTimeout("placePossibleWinner()",1000) 
```

应该

```
setTimeout(placePossibleWinner,1000) 
```

setTimeput 的参数应该是对函数的引用。见[JavaScript,setTimeout](https://stackoverflow.com/questions/10312963/javascript-settimeout)

# c# - Assembly.LoadFrom 没有在不同的项目中加载 DLL

> ID：11637568
> 
> 赞同：2
> 
> 时间：2012-07-24T19:01:48.777
> 
> 标签：c#, reflection

我在给定的解决方案中有多个项目。从 ProjectA 我将“myProjectB.dll”作为程序集名称传递给 ProjectC 中的方法调用。

当我在 ProjectC 中执行以下操作时，程序集名称为“myProjectB.dll”

```
Assembly assembly = Assembly.LoadFrom(assemblyname);
foreach (Type type in assembly.GetTypes())
{
       ... my code ...
} 
```

我收到以下错误

```
Could not load file or assembly 'file:///C:\MyProjectB\bin\Debug\myProjectB.dll' or one of its dependencies. The system cannot find the file specified. 
```

请让我知道如何将程序集名称正确传递到 Assembly.LoadFrom 方法调用中。

如何仅提供项目 DLL 名称并能够在运行时浏览解决方案并在解决方案中识别该 DLL 的完整绝对路径。甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:10:03.133

如果程序集与可执行文件或 GAC 中的路径不同，则需要在 LoadFrom 方法中提供完整路径。

例如：

```
Assembly assembly = Assembly.LoadFrom(@"C:\MyProjectB\bin\Debug\myProjectB.dll"); 
```

您还可以使用相对路径：

```
Assembly assembly = Assembly.LoadFrom(@"..\..\..\MyProjectB\bin\Debug\myProjectB.dll"); 
```

# c# - 使用使用它的类的名称调用静态方法 Main - C# 程序

> ID：11637569
> 
> 赞同：0
> 
> 时间：2012-07-24T19:01:48.580
> 
> 标签：c#, .net, main

我已经阅读了至少一个类应该包含 Main 方法，因为执行的入口点是 Main()。让我们看看下面的代码。

```
using System;
namespace consoleApplication
{
    class sample
    {
        public static void Main()
        {
            Console.WriteLine("Demo program");
            Console.ReadKey();
        }
    }
} 
```

我们知道可以使用带有类名的点运算符来调用类中的静态方法。那么我们可以将 Main() 称为

```
sample.Main(); 
```

就像我们打电话一样

```
Console.WriteLine(); 
```

并请告诉我它在语法上是否正确，即使我们没有使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:18:57.210

默认情况下，类和`Main()`方法被创建为私有成员。如果您绝对想要，您可以将它们设为公共成员，然后从另一个项目中调用它们。

```
namespace ConsoleApplication1
{
    public class sample
    {
        public static void Main()
        {
            Console.WriteLine("My Output...");
            Console.ReadKey();
        }
    }
}

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            sample.Main();
        }
    }
} 
```

> 输出：“我的输出……”

但是，我不知道为什么有必要这样做。这就是创建库的目的。相反，我会创建一个类库并在其中创建我的静态类/方法。

您的`Main()`方法只是控制台应用程序的入口点。每个应用程序都有一个入口点。我想不出你会创建几个应用程序项目，然后`Main()`从其他项目调用方法的用例。相反，我会创建一个将用作库而不是应用程序的新项目。这就是类库的意义所在。

最后一个问题的答案，这在语法上是否正确？是的。我再次强调，这不是好的做法。来自[MSDN](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx) “Main 必须是静态的，并且不应该是公共的。” 仅仅因为它可以做到，并不意味着它应该做到。

# php - PHP变量到javascript，不起作用

> ID：11637576
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:02:28.887
> 
> 标签：php, javascript, html

我遇到了 PHP 和 Javascript 变量通信的问题。我有这个代码：

```
<?php
$php_var = 'lol';
?>

<html>
<script type="text/javascript" charset="utf-8">
var php_var = "<?php echo $php_var; ?>";

alert(php_var);

</script>
</html> 
```

由于某种原因，此代码不起作用（按预期）。我无法将 PHP 变量的值传递给 Javascript 变量。出于某种原因，Javascript 完全忽略了 php 标记并为 php_var 分配了“”值。所以它会提醒我把它作为的文字 php 代码。

我究竟做错了什么？我已经在这个问题上停留了 3 个小时。是我服务器的问题吗？（使用网络托管，专用）。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T19:05:08.060

用于[`json_encode()`](http://php.net/json_encode)确保您获得有效的 JavaScript 表达式（否则换行符和引号等字符会破坏内容）：

```
var php_var = <?php echo json_encode($php_var); ?>; 
```

您还需要确保确实为该文件启用了 PHP。这通常是通过给文件一个`.php`扩展名来实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:07:03.190

使用 .php 文件扩展名，这将起作用。

如果没有，那么您的变量将没有值，您可以通过使用诸如 firebug 之类的东西来查看确切的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:11:51.987

您说您的代码所在的文件具有 .html 扩展名，它应该是 .php 以呈现 php 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:21:05.910

好吧，您可以将文件重命名为 .php 并且它应该可以工作，或者您可以执行以下操作：创建一个 .htaccess 文件，添加以下代码 ->

```
RewriteEngine On
<FilesMatch "(file.html)">
    SetHandler php5-script
</FilesMatch> 
```

保存文件，然后在 html 文件的开头添加以下 php 行 -> 你可以在选定的 html 文件中编写 php 代码

或者您可以添加以下规则

```
 RewriteEngine On
 file.html file.php 
```

# jquery - 使用 jQuery，如何创建发送到数据库的记录的克隆并将其附加到 dom 对象？

> ID：11637577
> 
> 赞同：0
> 
> 时间：2012-07-24T19:02:26.623
> 
> 标签：jquery

所以，我有一个“添加项目”脚本，可以在数据库中创建一个对象。效果很好。

我想，一旦对象成功保存到数据库，在将附加到列表视图的视图中创建该对象的克隆。它将从 DB 中接收 id，因此可以对其进行编辑，但其余部分只能从输入字段中克隆。

如何做到这一点的任何例子？具体来说，我需要帮助来思考要成功触发什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:22:32.340

首先，我猜你有一个发送数据的表单。您是使用 AJAX 发送此数据还是执行完整的回发？

如果您只是使用 AJAX 表单提交，您可以绑定 $.ajax({...}); 的成功函数；功能。

我想你的表格需要在成功时被清除，但由于问题的模糊性，我只提供一个例子：

```
$("#myForm").on("submit",function(){
     var formData = {
          field1: $("#inputWhatever").val(),
          field2: $("#inputWhatever2").val()
     };
     $.ajax({
          url: "/dopost/save",
          data: formData,
          success: function(){
               var domToAppend = $("#whateverYouWantToAppendTo");
               domToAppend.append(
                    $("<div>")
                         .addClass("row-container")
                         .append(
                              $("<div>")
                                   .text(formData.field1)
                         )
                         .append(
                              $("<div>")
                                   .text(formData.field2)
                         )
               );
          }
     });
}); 
```

这将发送您的数据，并在服务器回复时，您可以从成功函数中获取 id。一旦您知道如何获取数据，添加 dom 元素就非常简单。

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:19:46.183

另一种方法来做到这一点。有隐藏的行模板，在其上调用 JQuery*克隆*，填充字段并附加到容器。

HTML

```
<div id="row-template" style="display:none;">
    <div class="field1" />
    <div class="field2" />
    <div class="field3" />
</div> 
```

JS

```
var it = 0;   //global
...
$("form").submit(function(){

     var $rowsHolder = $("#rows-holder");

     $.post("/destination",
            $("form").serializeArray(),
            function(data){

            var $row = $("#row-template").clone();
            $row.attr("id", "row"+it);
            $row.css("display","block");
            $row.children(".field1").text(data.id);
            $row.children(".field2").text(dataForm.field1);
            ...
            $rowsHolder.append($row);
            it++;
     });
}); 
```

# javascript - 使用jquery逐字淡化段落？

> ID：11637582
> 
> 赞同：8
> 
> 时间：2012-07-24T19:02:44.023
> 
> 标签：javascript, jquery

```
 <p class="example">i want to split this paragraph into 
words and fade them in one by one</p> 
```

jquery/js：

```
$(document).ready(function() {

    var $txt = $(".example")
       ,$words = $txt.text()
       ,$splitWords = $words.split(" ");

    $txt.hide();

    for(i = 0; i < $splitWords.length; i++){
     // i want fade in each $splitWords[i]
     //$splitWords[i].fadeIn(....  - i tried this doesnt work

   }
  }); 
```

我试图将段落拆分为单词，并将它们逐个淡化，这可能是一种更简单的方法来做到这一点而不拆分单词，请对此有所了解。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T19:10:39.490

文本本身不能具有不透明度，因此您必须使用可以具有不透明度的元素（例如跨度）来包装文本。然后，您可以淡入这些跨度。

试试这个：

[http://jsfiddle.net/6czap/](http://jsfiddle.net/6czap/)

```
var $el = $(".example:first"), text = $el.text(),
    words = text.split(" "), html = "";

for (var i = 0; i < words.length; i++) {
    html += "<span>" + words[i] + " </span>";
}

$el.html(html).children().hide().each(function(i){
  $(this).delay(i*500).fadeIn(700);
}); 
```

Benekastah 更新：http: [//jsfiddle.net/6czap/3/](http://jsfiddle.net/6czap/3/)

```
var $el = $(".example:first"), text = $.trim($el.text()),
    words = text.split(" "), html = "";

for (var i = 0; i < words.length; i++) {
    html += "<span>" + words[i] + ((i+1) === words.length ? "" : " ") + "</span>";
};
$el.html(html).children().hide().each(function(i){
  $(this).delay(i*200).fadeIn(700);
});
$el.find("span").promise().done(function(){
    $el.text(function(i, text){
       return $.trim(text);
    });            
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T19:29:44.600

您将需要淡入元素，文本节点不能有不透明度。

> 请参阅[jsfiddle.net 上的演示](http://jsfiddle.net/LZ9G5/1)

```
var p = $("p.example").hide(); // possible flash! You should add some script
                               // to the <head> that writes a stylesheet
                               // to hide them right from the start
(function oneParagraph(i) {
    if (p.length <= i)
        return;
    var cur = p.eq(i),
        words = cur.text().split(/\s/),
        span = $("<span>"),
        before = document.createTextNode("");
    cur.empty().show().append(before, span);
    (function oneWord(j) {
        if (j < words.length) {
            span.hide().text(words[j]).fadeIn(200, function() {
                span.empty();
                before.data += words[j]+" ";
                oneWord(j+1);
            });
        } else {
            span.remove();
            before.data = words.join(" ");
            setTimeout(function(){
                oneParagraph(i+1);
            }, 500);
        }
    })(0);
})(0); 
```

如果您只需要一个段落，您可以省略所有属于该`oneParagraph`功能的内容 - 只需制作`cur`选定的元素。

如果你想要一个更流畅的动画，你需要同时为多个单词制作动画（[演示](http://jsfiddle.net/LZ9G5/2/)），或者不要褪色而是像[这里一样按](https://stackoverflow.com/a/10237157/1048572)字母顺序附加。或者，您可以使褪色时间取决于当前单词的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:10:52.677

到目前为止提到的建议会有一些问题。

首先，在 Javascript 中拆分然后隐藏文本将导致 Flash 的无样式内容。其次，对于长文本，重排的数量会非常糟糕。

与其隐藏文本，不如考虑将前景和背景设置为相同的颜色，然后再改回来。

# rest - 开始使用 Backbone 和 RESTful API

> ID：11637586
> 
> 赞同：1
> 
> 时间：2012-07-24T19:03:05.533
> 
> 标签：rest, backbone.js

在 Backbone，我有一个`User`模型：

```
var User = Backbone.Model.extend({
  url: '/api/user'
}); 
```

接下来，我实例化一个用户对象：

```
var user = new User({ id: "123" }); 
```

然后我打电话：

```
user.fetch(); 
```

在 Web Inspector 中检查网络窗格后，似乎`/api/user`在调用`fetch`方法时正在执行 API 调用`user`。我的问题很简单：我不应该期望它调用 API`/api/user/123`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:10:08.607

您正在使用集合之外的模型，因此您需要设置 urlroot

[http://backbonejs.org/#Model-url](http://backbonejs.org/#Model-url)

# php - 使用带有代码标签的语法高亮？

> ID：11637603
> 
> 赞同：0
> 
> 时间：2012-07-24T19:04:12.490
> 
> 标签：php, html, syntax-highlighting

我得到一些html输出：

```
<div class="test-code">    
   <pre>
       <code>
          <?php echo "hello world"; ?>
       </code>
    </pre>
</div> 
```

是否可以在不更改上述语法的任何内容的情况下使用具有上述 HTML 的任何基本 PHP 语法荧光笔？我一直在搜索，但大多数语法荧光笔似乎都非常先进，需要在`pre`（例如`pre class="php"`）中定义代码类。

编辑：我正在寻找任何基于 Javascript/jQuery 的语法高亮，它会自动假定其中的任何代码`<code>`都是 PHP 代码并突出显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:08:47.883

有[`highlight_string()`](http://php.net/highlight_string)，但这实际上只突出了 PHP 代码并将其他所有内容包装在`<code>`标签中

```
<?php

$markup = <<<MARKUP
<div class="test-code">    
   <pre>
       <code>
          <?php echo "hello world"; ?>
       </code>
    </pre>
</div>
MARKUP;

highlight_string($markup); 
```

输出：[http ://codepad.org/qnLGqP7N](http://codepad.org/qnLGqP7N)

据我所知，您提到的方法是由javascript荧光笔使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:12:43.763

我当然会推荐[prettify](http://code.google.com/p/google-code-prettify/)。

它通常会自动检测代码块中编写的语言。

常见用法如下：

```
<pre class="prettyprint">
  <code>
// your code here
  </code>
</pre> 
```

**注意：** Prettify 按字面意思使用制表符。不要在块中使用标签，而是使用空格。

# vb.net - 如何将链接文件添加到 VB.NET 项目中的“我的项目”文件夹？

> ID：11637605
> 
> 赞同：4
> 
> 时间：2012-07-24T19:04:17.763
> 
> 标签：vb.net, visual-studio

如何在 VS.NET 2010 中将链接文件添加到 VB.NET 中的**My Project文件夹？**“链接”文件是当您在 VS.NET 中右键单击项目时，选择“添加 -> 现有项目...”，然后在文件对话框中，单击箭头说“添加为链接”。

我正在尝试将共享的“SolutionInfo.vb”文件添加到我的项目中，但我希望它位于“我的项目”文件夹中的“AssemblyInfo.vb”文件旁边。不允许简单地将其拖到解决方案资源管理器中的位置。该文件已成功添加，但它位于我项目的根目录中。我希望它在“我的项目”文件夹中。

有人知道怎么做吗？

PS C# 伙计们，我知道可以做同样的事情*，*您*可以*将文件拖到“Properties”文件夹中，该文件夹是 C# 项目中 AssemblyInfo.cs 文件所在的位置。所以在 C# 中不是问题；只是 VB.NET。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T04:49:07.147

[您最初没有说您指的是哪个版本，但是当我回答问题时，我打开了 VS2010。]

使用鼠标而不是拖放，使用键盘的剪切粘贴可以工作！

也就是说，在顶层创建链接文件，然后选择它并键入`Ctrl`+`X`剪切，然后在`My Project`文件夹中选择一个文件（打开显示所有文件）并键入`Ctrl`+`V`粘贴。

# python - python瓶子框架-以静默（非详细）模式运行-如何？

> ID：11637607
> 
> 赞同：4
> 
> 时间：2012-07-24T19:04:32.257
> 
> 标签：python, bottle, verbose

我正在学习使用 python bottle web 框架。我开发了一个简单的应用程序，我想抑制终端上的所有请求（url）输出（尽管如果有任何错误消息，它们的输出应该没问题）。我尝试将 DEBUG 设置为 False，但这没有任何区别。还有其他设置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:22:45.353

这适用于某些服务器（包括 wsgiref）：

```
bottle.run(..., quiet=True) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T07:32:01.993

正如 Helgi 所提到的，瓶子开发服务器不应该在生产中使用。对于大多数生产服务器，您不会拥有这些日志。

但是，如果你想拥有一个安静的开发服务器，这样的东西应该可以工作。

```
import bottle

class QuietWSGIRefServer(bottle.WSGIRefServer):
    quiet = True

bottle.run(BOTTLE_APP, server=QuietWSGIRefServer) 
```

我希望它有帮助

# c++ - 一个对象被销毁后，标量类型的子对象会发生什么？

> ID：11637611
> 
> 赞同：3
> 
> 时间：2012-07-24T19:04:48.777
> 
> 标签：c++, destructor, language-lawyer, object-lifetime, explicit-destructor-call

`renew`考虑这段代码（对于和的不同值`cleanse`）：

```
struct T {
    int mem;
    T() { }
    ~T() { mem = 42; }
};

// identity functions, 
// but breaks any connexion between input and output
int &cleanse_ref(int &r) {
    int *volatile pv = &r; // could also use cin/cout here
    return *pv;
}

void foo () {
    T t;
    int &ref = t.mem;
    int &ref2 = cleanse ? cleanse_ref(ref) : ref;
    t.~T();
    if (renew)
        new (&t) T;
    assert(ref2 == 42);
    exit(0);
} 
```

`assert`保证通过吗？

我知道*不*推荐这种风格。像“这不是一个合理的做法”这样的*观点在这里**并不*感兴趣。

我想要一个答案，显示**标准报价的完整逻辑证明**。编译器作者的意见也可能很有趣。

编辑：现在有两个问题！查看`renew`参数（使用`renew == 0`，这是原始问题）。

编辑2：我想我的问题真的是：什么是成员对象？

编辑 3：现在有了另一个`cleanse`参数！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:24:11.990

我最初有这两个引号，但现在我认为它们实际上只是指定了诸如`int &ref = t.mem;`必须在`t`. 在您的示例中，它确实如此。

12.7 第 1 段：

> 对于具有非平凡析构函数的对象，在析构函数完成执行后引用对象的任何非静态成员或基类会导致未定义的行为。

第 3 段：

> 要形成指向（或访问）对象的直接非静态成员的指针（或访问其值）`obj`，应已开始构造`obj`且其销毁未完成，否则计算指针值（或访问成员值）导致未定义的行为。

我们这里有一个完整的类型对象`T`和一个类型的成员子对象`int`。

3.8 第 1 段：

> 类型对象的生命周期`T`开始于：
> 
> *   获得具有适当对齐和大小的类型`T`的存储，并且
> *   如果对象有非平凡的初始化，它的初始化就完成了。
> 
> 类型对象的生命周期在以下情况下`T`结束：
> 
> *   如果`T`是具有非平凡析构函数（12.4）的类类型，则析构函数调用开始，或者
> *   对象占用的存储空间被重用或释放。

顺便说一句，3.7.3 p1：

> 这些 [自动存储持续时间] 实体的存储将持续到创建它们的块退出。

和 3.7.5：

> 成员子对象、基类子对象和数组元素的存储时间是它们完整对象的存储时间（1.8）。

所以不用担心编译器`exit`在这个例子之前“释放”存储。

3.8p2 中的非规范性注释提到“12.6.2 描述了基子对象和成员子对象的生命周期”，但那里的语言只讨论初始化和析构函数，而不是“存储”或“生命周期”，所以我得出的结论是该部分确实不影响普通类型子对象的“生命周期”定义。

如果我正确地解释了这一切，那么当`renew`为假时，完整类对象的生命周期在显式析构函数调用结束时结束，但`int`子对象的生命周期继续到程序结束。

3.8 第 5 段和第 6 段说，在任何对象的生命周期之前或之后指向“分配的存储”的指针和引用都可以以有限的方式使用，并列出了很多你不能用它们做的事情。就像表达式所要求的那样，左值到右值的转换`ref == 42`就是其中之一，但如果 的生命周期`int`尚未结束，这不是问题。

所以我认为`renew`错误，程序格式正确并且`assert`成功！

`renew`如果为 true，则存储被程序“重用”，因此原始的`int`生命周期结束，另一个生命周期`int`开始。但随后我们进入 3.8 第 7 段：

> 如果在对象的生命周期结束之后，在对象占用的存储空间被重用或释放之前，在原始对象占用的存储位置创建一个新对象，一个指向原始对象的指针，一个指向原始对象的引用引用原始对象，或者原始对象的名称将自动引用新对象，并且一旦新对象的生命周期开始，可用于操作新对象，如果：
> 
> *   新对象的存储恰好覆盖了原始对象占用的存储位置，并且
> *   新对象与原始对象的类型相同（忽略顶级 cv 限定符），并且
> *   原始对象的类型不是 const 限定的，并且，如果是类类型，则不包含其类型为 const 限定或引用类型的任何非静态数据成员，并且
> *   原始对象是类型最衍生的对象（1.8），`T`而新对象是类型最衍生的对象`T`（也就是说，它们不是基类子对象）。

这里的第一个要点是最棘手的。对于像你这样的标准布局类`T`，同一个成员当然必须总是在同一个存储中。当类型不是标准布局时，我不确定这是否在技术上是必需的。

尽管是否`ref`仍然可以使用，但在这个例子中还有另一个问题。

12.6.2 第 8 段：

> 在对类的构造函数的调用完成后，如果在构造函数主体的*复合语句*`X`执行期间，成员`X`既没有初始化也没有给定值，则该成员具有不确定的值。

 *这意味着如果它设置`t.mem`为零或`0xDEADBEEF`（有时调试模式实际上会在调用构造函数之前执行此类操作），则实现是兼容的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:08:33.083

您没有破坏内存，您只是手动调用了析构函数（在这种情况下，它与调用普通方法没有什么不同）。变量的内存（堆栈部分）`t`未“释放”。因此，此断言将始终与您当前的代码一起通过。*

# mysql - 如何让 Sphinx 实时索引？

> ID：11637613
> 
> 赞同：1
> 
> 时间：2012-07-24T19:04:56.020
> 
> 标签：mysql, ruby-on-rails, full-text-search, sphinx, thinking-sphinx

我有一个 Rails 3.2.6 应用程序，我在其中使用[Sphinx 0.9.9](http://sphinxsearch.com/)和[Thinking Sphinx 2.0.12](http://freelancing-god.github.com/ts/en/)。

我需要 Sphinx 实时更新它的索引。例如，当用户创建新帖子时，它将立即出现在搜索中。或者，如果他们删除了一个帖子，它就不会出现，从他们删除它的那一刻开始。

[我关注了有关delta indexing](http://freelancing-god.github.com/ts/en/deltas.html)的文档。

根据这个建议，我有一个每二十分钟执行一次并运行的 cron 作业`bundle exec rake ts:index RAILS_ENV=production`......

> 打开增量索引并不会消除定期运行完整重新索引的需要，否则增量索引本身将增长到与核心索引一样大，这消除了保持独立的优势。它还会减慢您对更改模型记录的服务器的请求。

新条目仅在该作业运行后出现。

这是我的`define_index`...

```
define_index do

  indexes(title)
  indexes(entry)

  has user_id
  has created_at
  has updated_at

  set_property :delta => true

end 
```

* * *

这是我的`production.sphinx.conf`...

```
indexer
{
}

searchd
{
  listen = 127.0.0.1:9312
  log = /opt/deployed_rails_apps/my_app/releases/20120713022228/log/searchd.log
  query_log = /opt/deployed_rails_apps/my_app/releases/20120713022228/log/searchd.query.log
  pid_file = /opt/deployed_rails_apps/my_app/releases/20120713022228/log/searchd.production.pid
}

source entry_core_0
{
  type = mysql
  sql_host = localhost
  sql_user = abc
  sql_pass = abc
  sql_db = my_app_production
  sql_query_pre = UPDATE `entries` SET `delta` = 0 WHERE `delta` = 1
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `entries`.`id` * CAST(1 AS SIGNED) + 0 AS `id` , `entries`.`title` AS `title`, `entries`.`entry` AS `entry`, `entries`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3940594292 AS `class_crc`, `entries`.`user_id` AS `user_id`, UNIX_TIMESTAMP(`entries`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`entries`.`updated_at`) AS `updated_at` FROM `entries`  WHERE (`entries`.`id` >= $start AND `entries`.`id` <= $end AND `entries`.`delta` = 0) GROUP BY `entries`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `entries` WHERE `entries`.`delta` = 0
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = user_id
  sql_attr_timestamp = created_at
  sql_attr_timestamp = updated_at
  sql_query_info = SELECT * FROM `entries` WHERE `id` = (($id - 0) / 1)
}

index entry_core
{
  source = entry_core_0
  path = /opt/deployed_rails_apps/my_app/releases/20120713022228/db/sphinx/production/entry_core
  charset_type = utf-8
}

source entry_delta_0 : entry_core_0
{
  type = mysql
  sql_user = abc
  sql_pass = abc
  sql_db = my_app_production
  sql_query_pre = 
  sql_query_pre = SET NAMES utf8
  sql_query_pre = SET TIME_ZONE = '+0:00'
  sql_query = SELECT SQL_NO_CACHE `entries`.`id` * CAST(1 AS SIGNED) + 0 AS `id` , `entries`.`title` AS `title`, `entries`.`entry` AS `entry`, `entries`.`id` AS `sphinx_internal_id`, 0 AS `sphinx_deleted`, 3940594292 AS `class_crc`, `entries`.`user_id` AS `user_id`, UNIX_TIMESTAMP(`entries`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`entries`.`updated_at`) AS `updated_at` FROM `entries`  WHERE (`entries`.`id` >= $start AND `entries`.`id` <= $end AND `entries`.`delta` = 1) GROUP BY `entries`.`id` ORDER BY NULL
  sql_query_range = SELECT IFNULL(MIN(`id`), 1), IFNULL(MAX(`id`), 1) FROM `entries` WHERE `entries`.`delta` = 1
  sql_attr_uint = sphinx_internal_id
  sql_attr_uint = sphinx_deleted
  sql_attr_uint = class_crc
  sql_attr_uint = user_id
  sql_attr_timestamp = created_at
  sql_attr_timestamp = updated_at
  sql_query_info = SELECT * FROM `entries` WHERE `id` = (($id - 0) / 1)
}

index entry_delta : entry_core
{
  source = entry_delta_0
  path = /opt/deployed_rails_apps/my_app/releases/20120713022228/db/sphinx/production/entry_delta
}

index entry
{
  type = distributed
  local = entry_delta
  local = entry_core
} 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:27:37.770

我知道这很旧，但您应该考虑更新您的 Sphinx 版本并选择 RT 模型而不是 main+delta 方案。

[链接到 RT 索引 - Sphinx 文档](http://sphinxsearch.com/docs/current.html#rt-indexes)

# java - WebFilter、EL 和 SessionScoped ManagedBean 来处理记住我的登录

> ID：11637615
> 
> 赞同：1
> 
> 时间：2012-07-24T19:05:05.347
> 
> 标签：java, jsf, cookies, managed-bean

这个问题与我最近发布的另一个问题有关：[Understanding HttpServletRequest and cookies in JSF](https://stackoverflow.com/questions/11567277/understanding-httpservletrequest-and-cookies-in-jsf)。

为了实现**记住我**的登录`JSF`，我使用了一个 cookie 并读取它`WebFilter`。过滤器获取 cookie 并在 中设置 cookie 值`SessionScoped` `ManagedBean`，但由于某种原因`ManagedBean`无法在网页中显示它。

Filter 的**doFilter**实现：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain)
        throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) request;
    Cookie[] cookies = req.getCookies();
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (cookie.getName().equals("MyTestCookie")) {
                System.out.println("Filter got cookie: " + cookie.getValue());
                cookieBean.setValue(cookie.getValue());
            }
        }
    }
    chain.doFilter(request, response);
} 
```

**饼干豆类**：

```
@ManagedBean
@SessionScoped
public class CookieBean implements Serializable {

    private String value;

    @PostConstruct
    public void init() {
        System.out.println("Instantiated CookieBean");
    }

    public String getValue() {
        System.out.println("CookieBean returning Value: " + value);
        return value;
    }

    public void setValue(String value) {
        System.out.println("CookieBean getting Value: " + value);
        this.value = value;
    }

    public void create() {
        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
        Map<String, Object> props = new HashMap<String, Object>();
        props.put("maxAge", 10000);
        ec.addResponseCookie("MyTestCookie", "Hello Cookie", props);
    }    
} 
```

`CookieBean` `cookieBean`通过`javax.inject.Inject`注解的方式注入到过滤器中。

**index.xhtml**的正文：

```
<h:form>
    <h:commandButton value="Create Cookie!" action="#{cookieBean.create()}" >
        <f:ajax render="@form" />
    </h:commandButton>
    <p></p>
    <h:outputText value="Cookie value: #{cookieBean.value}" /> 
</h:form> 
```

第一个问题是，在设置 cookie 之后，如果我开始一个新会话（通过打开一个新的浏览器会话），网页不知道 cookie 值，因为在显示页面*后*`SessionScoped` `ManagedBean`会更新。

 ***问题1**：如何及时检测cookie值以更新`rendered`网页中的某些属性？

第二个问题是，如果我通过按浏览器中的重新加载（或刷新）按钮重新加载网页，ManagedBean 实例与之前相同（该`@PostConstruct`方法未触发），但网页显示空 cookie值，服务器的输出中也显示了相同的值：

```
CookieBean returning Value: null
Filter got cookie: Hello Cookie
CookieBean getting Value: Hello Cookie 
```

**问题 2**：a 怎么可能在`SessionScoped` `ManagedBean`没有被重新创建的情况下失去其属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:35:50.000

**问题 1**的答案：正如这个[问题](https://stackoverflow.com/questions/11567277/understanding-httpservletrequest-and-cookies-in-jsf)的已接受答案中所解释的，我只需要在支持 bean 中进行重定向。这会强制 JSF 生成一个包含 cookie 的新 GET 请求。假设请求页面是我的欢迎页面，我必须在我的`cookieBean`:

```
FacesContext.getCurrentInstance().getExternalContext().redirect("faces/index.xhtml"); 
```

好吧，这很好用，但完整的 URL 现在显示在地址栏中。如果有办法避免这种情况，我会进一步调查。

**对问题 2 的回答**：`SessionScoped` `cookieBean`被有效地实例化了两次，一次是在部署期间，一次是通过过滤器。问题是我使用的是 JSF ManagedBean 并将其注入`javax.inject.Inject`注释。我已经通过`javax.inject.Named`和`javax.enterprise.context.SessionScoped`注解将它变成了一个CDI Bean，并且注入现在运行良好。*

# mysql - 使用二进制文件的mysql批处理模式

> ID：11637620
> 
> 赞同：1
> 
> 时间：2012-07-24T19:05:12.940
> 
> 标签：mysql, database, batch-file

我只是想知道我们是否可以在批处理模式下执行二进制文件。我知道可以使用批处理模式执行文本文件`mysql < batch-file`。

这种特性的一个可能动机是，如果您`sql`从程序创建文件，那么您可能希望以二进制模式进行读/写，因为它速度很快。有没有这样的方式`mysql`，我只是好奇！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:25:00.410

mysql 生成二进制日志，通常用于复制。您可以生成一个虚假的复制日志并说服 mysql 加载它，尽管这很 hacky。通常使用 mysqlbinlog 将复制日志加载到 mysql 中：

```
mysqlbinlog replication_log | mysql 
```

在执行之前将二进制复制日志转换为文本文件。

请注意，执行 sql 几乎肯定比解析它慢很多，尤其是在生成它方面。所以你几乎肯定在优化错误的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:35:36.907

您可能想尝试使用`--hex-blob`选项`mysqldump`来创建纯文本的转储文件。通常你会这样做：

```
mysqldump --hex-blob ... | gzip -9 > backup.sql.gz 
```

稍后您将恢复：

```
gunzip -dc backup.sql.gz | mysql ... 
```

在这两种情况下，都`...`代表连接到数据库所需的命令行选项。

这不是在大型数据库中加载的最有效方式，但在实践中效果很好。

# c# - 如何在 C#/asp.net MVC 4 中将自定义属性绑定到注册用户

> ID：11637622
> 
> 赞同：0
> 
> 时间：2012-07-24T19:05:14.940
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-membership, asp.net-profiles

假设有三个角色，即：

*   挂号的
*   行政人员
*   赞助

我希望用户能够自行注册为已注册（开箱即用）。我希望管理员能够查看所有注册用户并选中“赞助商”复选框，使用户成为赞助商。

一旦用户被“选中”为赞助商，管理员应该能够为赞助商添加其他参数，包括徽标和赞助商 URL、他们赞助的网页、网页赞助的有效日期范围、展示次数和点击次数，以及“付费/未付费”。

我试图围绕会员资格和个人资料，看看它们如何适用于此。

任何人都可以提供一个关于我如何正确构建它的通用框架吗？是否有 Nuget 包可以做到这一点？

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:09:49.740

也许我对另一个问题的回答会有所帮助 将[开箱即用的 aspnet 会员资格用于面向公众的网站](https://stackoverflow.com/questions/11637279/using-out-of-the-box-aspnet-membership-for-public-facing-website/11637462#11637462)

在 Nuget - Thinktecture.IdentityModel 是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:18:59.997

使用表配置文件提供程序。然后，您可以通过一个简单的页面直接编辑此表中的值。

[不包括配置文件提供程序，是否有一种简单的方法可以将自定义字段添加到 ASP.NET 成员资格？](https://stackoverflow.com/questions/1013663/excluding-the-profile-provider-is-there-an-easy-way-to-add-custom-fields-to-asp)

然后，您可以使用 Web 界面将用户分配给管理员角色：http: [//msdn.microsoft.com/en-us/library/t32yf0a9.aspx](http://msdn.microsoft.com/en-us/library/t32yf0a9.aspx)

或者简单地编写这个页面并使用 Roles.AddUserToRole [http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertorole.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertorole.aspx)

# sql-server - 选择插入

> ID：11637625
> 
> 赞同：1
> 
> 时间：2012-07-24T19:05:23.410
> 
> 标签：sql-server, tsql

是否可以将 select 语句中的数据插入动态创建的表中？在我运行查询之前，我不会知道 select 语句中有多少列。它必须在运行时创建适当数量的列。谢谢你，史密斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:07:48.337

只需使用以下`SELECT INTO`语法：

```
SELECT *
INTO NewTable
FROM MyTable
WHERE ... 
```

`NewTable`将使用与您的 select 语句相同的列创建新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:08:44.437

您可以为此使用 CTAS 模式

```
USE AdventureWorks
GO    
----Create new table and insert into table using SELECT INSERT
SELECT FirstName, LastName
INTO TestTable
FROM Person.Contact
WHERE EmailPromotion = 2
----Verify that Data in TestTable
SELECT FirstName, LastName
FROM TestTable
----Clean Up Database
DROP TABLE TestTable
GO 
```

看看[这篇关于 CTAS 的文章](http://blog.sqlauthority.com/2011/04/30/sql-server-ctas-create-table-as-select-what-is-ctas/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:14:32.033

-- 这会创建临时表

从 YourTable 中选择 * 进入 #newtable

从#newtable中选择*

-- 这会在数据库中创建物理表

从 YourTable 中选择 * 进入 newtable

从新表中选择 *

# php - 恶意的 Wordpress 插件会窃取特权信息吗？

> ID：11637634
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:05:48.480
> 
> 标签：php, wordpress

我心想，是什么阻止了人们破解 Wordpress？我的意思是，您可以轻松地将配置文件包含在插件中并获取数据库设置并窃取管理员用户名和密码。如果我们已经在谈论它，有没有办法 100% 保护数据库设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:10:09.117

与任何代码一样，您应该只从您信任的来源安装 WordPress 插件。如果您特别谨慎且具有安全意识，则始终可以先查看代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:13:38.757

WordPress 用户帐户的密码使用盐进行安全哈希处理，因此即使恶意插件确实访问了您的数据库并将您的凭据发回，他们也必须暴力破解它们。

因此，如果您有一个安全的密码并且只安装受信任的插件并在没有共享访问权限的专用服务器上运行您的站点，那么您应该非常安全。

# php - 如何在不渲染网页的情况下从网页获取 HTML 文本？

> ID：11637637
> 
> 赞同：0
> 
> 时间：2012-07-24T19:05:58.573
> 
> 标签：php, html

使用 cURL 或这个...

```
$html = file_get_contents('http://stackoverflow.com/questions/ask'); 
```

获取网页，但它也将其呈现为普通网页，我只想要文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:09:10.383

我*假设*您只是在做`echo $html`并假设它以某种方式呈现。它不是。改为以纯文本形式查看：

```
header("Content-Type: text/plain");
echo $html; 
```

如果“渲染”是指“ASP.NET 将页面渲染为 HTML”，不，您无法获取任意远程页面的来源。那将是一个相当大的安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:08:30.990

呃...`file_get_contents`所做的就是获取文件的内容。它只是看起来像“渲染”的 HTML，因为您将它直接转储到输出流中。`htmlspecialchars`在输出之前尝试运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:18:52.463

我同意@Kolink。像这样的东西会起作用：

```
$html = htmlspecialchars(file_get_contents('http://stackoverflow.com/questions/ask')); 
```

未经测试，虽然相当知己！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:27:57.293

“只是文字”是什么意思？是否要抓取html 文件的文本*内容？*[然后您应该尝试解析文件，即使用simplehtmldom](http://simplehtmldom.sourceforge.net/)之类的工具过滤包含有趣内容的标签（查找选项卡“从html 中提取内容”）。或者编写自己的解析器，如有必要，使用 php 自己的[strip_tags](http://php.net/manual/de/function.strip-tags.php)从内容中去除剩余的标签。

# java - Porting 2d tile based iPhone game to Android.

> ID：11637638
> 
> 赞同：6
> 
> 时间：2012-07-24T19:06:02.477
> 
> 标签：java, android, game-engine

Are there any good 2d tile based game engines for android I should look into before just jumping right into canvas painting for this game?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T19:13:46.067

[AndEngine](http://www.andengine.org/) and [LibGDX](http://code.google.com/p/libgdx/) are the most common game engines used for Android. They both have good tileset support, and offer a lot of help for making games, including compatibility with the Box2D physics engine.

# r - 如果从一个点到另一个点的距离小于一定量，我如何告诉它改变点的标记？

> ID：11637641
> 
> 赞同：0
> 
> 时间：2012-07-24T19:06:05.003
> 
> 标签：r, loops, label, distance, spatstat

我正在使用包 spatstat。我有一个坐标数据框，我分为两组，健康（Mark=no）和患病（Mark=yes）。我能够找到病变点与所有其他点之间的距离：

```
>D<-crossdist(diseased,healthy) 
```

但是现在我需要根据它们与患病点的距离来评论我的点，有点像：

```
>i<-length(D)
>for n=1:i,
>   if D[n]<1,
>       mark(n)<-yes,
>   else,
>       mark(n)<-no,
>   end
>end 
```

我是在 R 中使用循环的新手，在 Matlab 中我从来没有真正擅长它，我仍在阅读所有帮助指南，但任何关于如何做到这一点的提示都会非常有帮助。

D 看起来像：

```
> D
              [,1]     [,2]     [,3]     [,4]    [,5]     [,6]     [,7]     [,8]
    [1,] 0.4796548 5.906068 6.061941 5.837476 5.62358 5.196297 7.687075 1.740198
             [,9]    [,10]    [,11]    [,12]    [,13]    [,14]    [,15]    [,16]
    [1,] 2.760947 8.921383 10.64188 8.385258 6.788703 6.542282 8.631057 11.19689
            [,17]    [,18]    [,19]    [,20]    [,21]    [,22]    [,23]    [,24]
    [1,] 11.38957 11.16738 10.88189 10.48931 9.116005 7.757465 7.907191 8.453458
            [,25]   [,26]    [,27]    [,28]    [,29]    [,30]    [,31]   [,32]
    [1,] 7.072456 6.89453 8.900875 8.613843 8.569073 11.82978 11.68813 9.27332
            [,33]   [,34]    [,35]    [,36]    [,37]    [,38]    [,39]
    [1,] 9.318501 9.64491 9.264779 9.357388 9.488624 10.57165 9.173374 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:06:15.977

如果你真的有一个矩阵（看起来你有），有两种方法可以解决这个问题：

```
set.seed(10)
D <- matrix(rnorm(20) + 2, 1)

D2 <- ifelse(D > 1, "yes", "no")       #method 1
D2

D2 <- matrix(rep("no", ncol(D)), 1)    #method 2
D2[D > 1] <- "yes"
D2 
```

编辑：

```
D2 <- ifelse(c(D) > 1, "yes", "no")       #method 1

D2 <- matrix(rep("no", ncol(D)), 1)    #method 2
D2[D > 1] <- "yes"
c(D2) 
```

# jquery - JQuery 模态弹出窗口

> ID：11637642
> 
> 赞同：2
> 
> 时间：2012-07-24T19:06:09.760
> 
> 标签：jquery, asp.net, jquery-ui, modal-dialog

我试图在 asp.net 页面上单击一个按钮后出现一个 modalpopup。

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeFile="TestFile.ascx.cs" Inherits="TestFile" %>
    <%@ Import Namespace="System.Collections.Generic" %>
    <%@ Import Namespace="System.IO" %>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
        <script type="text/javascript"> 

                function fnmodalpopup() {
        $( "#dialog-modal" ).dialog({
            height: 140,
            modal: true
});
        </script>
    </head>

    <!--Misc functions for operations -->
    <script runat="server" type="text/javascript">

    </script>

    <div id="dialog-modal" title="Basic modal dialog">
        <p>Adding the modal overlay screen makes the dialog look more prominent because it dims out the page content.</p>
    </div>

    <asp:Button ID="Button1" runat="server" Text="Button" /> 
```

[我正在尝试创建一个与http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)完全相同的对话框，但通过单击按钮以 asp.net 形式触发。页面闪烁，什么也没有出现。

任何反馈都会非常有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T21:00:44.750

您应该使用 OnClientClick 事件，然后使用**return false**来阻止回发，如下所示：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="return fnmodalpopup()" />

function fnmodalpopup() {   
    $( "#dialog-modal" ).dialog({
        height: 140,
        modal: true
    });
    return false;
}); 
```

**编辑：**
我已经更改了 OnClientClick=" **return** fnmodalpopup()"
现在它工作正常（至少在我测试它时）。

只是好奇，如果您不想创建回发，为什么要使用服务器端组件？如果没有此按钮必须回发的情况，也许最好使用 html 按钮标记（或任何其他 html 标记并使用 jQuery 捕获 'click' 事件）。是否在页面的其余部分使用 asp.net 控件并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:56:13.283

在 Asp.Net 中，如果您将脚本管理器拖到页面上，并将按钮放在更新面板 - 内容模板标记中，那么这也可以正常工作。因为 Ajax 更新面板在 asp.net 中默认阻止回发，所以按钮的 OnClientClick 可以正常工作以显示 jquery 弹出窗口。但这主要在按钮是提供丰富客户端体验的控件集的一部分而不是一直回发的情况下很有用（例如，在提供交互式客户端控制面板的用户控件中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:11:21.993

尝试改变

```
 <asp:Button ID="Button1" runat="server" Text="Button" /> 
```

到：

```
 <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="fnmodalpopup();" /> 
```

然后：

```
function fnmodalpopup() {   
    $( "#dialog-modal" ).dialog({
        height: 140,
        modal: true
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:20:25.600

试试这个。它可以防止使用 jQuery 回帖。我过去曾遇到过 return false 方法的问题。

```
$(function () {
    $("[id$=Button1]").click(function () {
        // prevent the default action, e.g., following a link
        event.preventDefault();
        $dialog.dialog('open');
    });
}); 
```

如果单击按钮不需要 ASP.Net 功能，还可以考虑使用其他一些 HTML 对象。它可以清理很多东西，并防止你不得不与服务器打架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-30T04:36:12.557

试试这个

```
 $(function () {
        modalPosition();
        $(window).resize(function () {
            modalPosition();
        });
        $('.openModal').click(function (e) {
            $('.modal, .modal-backdrop').fadeIn('fast');
            e.preventDefault();
        });
        $('.close-modal').click(function (e) {
            $('.modal, .modal-backdrop').fadeOut('fast');
        });
    });
    function modalPosition() {
        var width = $('.modal').width();
        var pageWidth = $(window).width();
        var x = (pageWidth / 2) - (width / 2);
        $('.modal').css({ left: x + "px" });
    } 
```

参考：-[在 asp.net 中使用 jquery 的模态弹出窗口](http://jqueryasp.net/modal-popup-using-jquery-asp-net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-09T07:05:15.997

```
<div class="container">

    <div class="row">
        <center><h2>Product Information</h2></center>
    </div>
    <div class="row">
        <div class="col-md-3">
                <div class="form-group">
                    <input type="text" id="txtpname" placeholder="Product Name" class="form-control">
                </div>

                <div class="form-group">
                    <input type="text" id="txtpprice" placeholder="Product Price" class="form-control">
                </div>

            <input type="submit" id="btninsert" value="Insert" class="btn btn-primary">
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-5">
            <table id="ProductTable" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <td>ID</td>
                        <td>Product Name</td>
                        <td>Product Price</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div id="mmd" class="modal fade" role="dialog">

        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">

                    <h3>Update Product</h3>

                </div>
                <div class="modal-body">
                    <input type="hidden" id="hdnID" value="0" />

                        <div class="form-group">
                            <input type="text" id="txtuppname" placeholder="Product Name" class="form-control">
                        </div>
                        <div class="form-group">
                            <input type="text" id="txtuppprice" placeholder="Product Price" class="form-control">
                        </div>
                </div>
                <div class="modal-footer">
                    <input type="submit" id="btnupdate" value="Update" class="btn btn-primary">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
        </div> 
```

# c# - 有没有办法在任何未捕获的异常期间执行代码块？

> ID：11637644
> 
> 赞同：0
> 
> 时间：2012-07-24T19:06:25.080
> 
> 标签：c#, asp.net

我意识到这是在黑暗中拍摄，而不是最佳实践或解决方法，但我想在抛出异常时做特定的日志记录信息。重要的是 Web 表单的状态不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:09:13.673

```
You can use 

    try
    {

    }
    catch(Exception ex)
    {
      //your treatment does not contain throw ex.
      //mute exception in order to not change state
    }

You can use this in your webform or in your gloabl.asax in Application_Error (in order to centralize exception treatment) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:09:52.700

```
try
{
    ExceptionProneCode()
}
catch(Exception ex)
{
    WriteToSomeLogFile(ex.Message);

    //if you want the exception to bubble up from this point, 
    //than you would type "throw;"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:10:51.020

如果我们在 ASP.NET 的上下文中讨论，[Application_Error](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)事件将是放置全局异常日志记录块的好地方。

# function - 将任意数量的函数添加到函数句柄中 MATLAB

> ID：11637645
> 
> 赞同：1
> 
> 时间：2012-07-24T19:06:26.607
> 
> 标签：function, matlab, anonymous-function, variadic-functions, function-handle

我正在尝试在 MATLAB 中生成 .bmp 图形，但无法将函数相加。我正在设计我的函数，使得给定任意一组输入，我的函数将添加任意数量的函数并输出一个函数句柄。输入是我的一般函数的系数，因此我可以指定任意数量的函数（仅因系数而异），然后将它们一起添加到函数句柄中。我尝试做的是将每个函数创建为字符串，然后将它们连接起来，然后将它们写为函数句柄。主要问题是因为 x 和 y 没有定义（因为我正在尝试创建函数句柄）MATLAB 无法定期添加它们。我目前的尝试：

```
 function HGHG = anyHGadd(multi) %my array of inputs
    m=length(multi);
    for k=3:3:m;
    m1=multi(k-2); %these three are the coefficients that I'd like to specify
    n1=multi(k-1);
    w1=multi(k);
    HGarrm1=hermite(m1); %these generate arrays
    HGarrn1=hermite(n1);
    arrm1=[length(HGarrm1)-1:-1:0];%these generate arrays with the same length
    arrn1=[length(HGarrn1)-1:-1:0];%the function below is the general form of my equation
    t{k/3}=num2str(((sum(((sqrt(2)*x/w1).^arrm1).*HGarrm1))*(sum(((sqrt(2)*y/w1).^arrn1).*HGarrn1))*exp(-(x^2+y^2)/(w1^2))));
    end
    a=cell2mat(t(1:length(t)));
    str2func(x,y)(a); 
```

任何帮助将非常感激。我在这里没有看到太多关于此的内容，我什至不确定这是否完全有可能。如果我的问题不清楚，请说出来，我会再试一次。

*编辑：*倒数第四行不应产生数字，因为未定义 x 和 y。它们不可能是因为我需要将它们保留为我的函数句柄的一部分。至于我的代码的精简版本，希望这能说明问题：

```
 function HGHG = anyHGadd(multi) %my array of inputs
    m=length(multi);
    for k=3:3:m;
    m1=multi(k-2); %these three are the coefficients that I'd like to specify
    n1=multi(k-1);
    w1=multi(k);
    t{k/3}=num2str(genericfunction(x,y,n1,m1,n1,w1); %where x and y are unspecified
    end
    a=cell2mat(t(1:length(t)));
    str2func(x,y)(a); 
```

*编辑*我希望这会输出一个函数句柄，它是我的任意数量的函数的总和。但是，我不确定使用字符串是否是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:05:02.967

你的问题对我来说不是很清楚，但我认为你正在尝试创建一个函数来生成由一些输入参数化的输出函数。

一种方法是使用[闭包](http://www.mathworks.com/matlabcentral/fileexchange/18223)（访问其父函数工作区的[嵌套函数）。](http://www.mathworks.com/help/techdoc/matlab_prog/f4-39683.html)让我用一个例子来说明：

```
function fh = combineFunctions(funcHandles)
    %# return a function handle
    fh = @myGeneralFunction;

    %# nested function. Implements the formula:
    %# f(x) = cos( f1(x) + f2(x) + ... + fN(x) )
    %# where f1,..,fN are the passed function handles 
    function y = myGeneralFunction(x)
        %# evaluate all functions on the input x
        y = cellfun(@(fcn) fcn(x), funcHandles);

        %# apply cos(.) to the sum of all the previous results
        %# (you can make this any formula you want)
        y = cos( sum(y) );
    end
end 
```

现在说我们要创建函数`@(x) cos(sin(x)+sin(2x)+sin(5x))`，我们会调用上面的生成器函数，并给它三个函数句柄，如下所示：

```
f = combineFunctions({@(x) sin(x), @(x) sin(2*x), @(x) sin(5*x)}); 
```

现在我们可以在给定任何输入的情况下评估这个创建的函数：

```
>> f(2*pi/5)         %# evaluate f(x) at x=2*pi/5
ans =
     0.031949 
```

注意：返回的函数将对标量起作用并返回一个标量值。如果您希望它矢量化（以便您可以一次将其应用于整个矢量`f(1:100)`），您必须设置`UniformOutput`为`false`in `cellfun`，然后将矢量组合成一个矩阵，将它们沿正确的维度求和，然后应用您的公式得到一个矢量结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:11:25.890

如果您的目标是创建一个函数句柄来对任意数字函数的输出求和，您可以执行以下操作：

```
n = 3; %# number of function handles
parameters = [1 2 4];
store = cell(2,3);

for i=1:n
  store{1,i} = sprintf('sin(t/%i)',parameters(i));
  store{2,i} = '+'; %# operator
end

%# combine such that we get
%# sin(t)+sin(t/2)+sin(t/4)
funStr = ['@(t)',store{1:end-1}]; %# ignore last operator

functionHandle = str2func(funStr)

functionHandle = 

    @(t)sin(t/1)+sin(t/2)+sin(t/4) 
```

# svg - 重叠图表系列的混合模式？

> ID：11637647
> 
> 赞同：1
> 
> 时间：2012-07-24T19:06:30.633
> 
> 标签：svg, highcharts

有没有办法用 HighCharts 中的图表内容模仿 Photoshop 的图层混合模式？例如，我有两个重叠的区域类型系列，而不是在我使用的颜色上设置不透明度（使用 rgba），我希望将重叠区域设置为乘法或线性燃烧。例如，见附图。这样做的另一个好处是，下方的网格线在彩色区域下更加清晰。![在此处输入图像描述](../Images/07b7561de8be13ed8bfd69f0a1bdc25a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:58:08.323

**[编辑]**现代浏览器确实支持混合模式，所以这可能是可能的。

* * *

目前唯一支持 SVG 混合模式的浏览器是 Opera 通过过滤器， [http://www.w3.org/TR/SVG/filters.html#feBlendElement](http://www.w3.org/TR/SVG/filters.html#feBlendElement)

另一个规范是 SVG 合成： [http](http://www.w3.org/TR/2009/WD-SVGCompositing-20090430/#containerElementCompositingOperators) ://www.w3.org/TR/2009/WD-SVGCompositing-20090430/#containerElementCompositingOperators 但是任何浏览器都不支持 SVG 合成。

我认为 VML 也不支持混合模式，所以恐怕你不走运。

# android - 如何从 Sqlite 中的表中以顺序方式提取记录？

> ID：11637649
> 
> 赞同：0
> 
> 时间：2012-07-24T19:06:32.507
> 
> 标签：android, mysql

我在Sqlite中有一个表，其中每条记录包含三个组件（例如A，B，C），主键（id）是随机的。我想要一个按顺序提取每条记录的 SQL 查询，就好像您正在对数据库应用循环一样。

我知道有一个像这样的子句，`LIMIT`但它只返回第一个元素（LIMIT 1），而不是两个元素（LIMIT 2）......但我想提取一条记录，然后处理它并移动到另一个。回想一下 id 是随机的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:22:01.753

什么样的加工？

如果您想以某种方式更新或更改数据，您可能可以在 SQL 中完成，但听起来您的想法更复杂，只是“UPDATE table SET value_column = value WHERE key_column = key”。

如果是这种情况，您将需要提取记录并在 java 中遍历它们。看看 android.database.*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:16:55.043

手动编写查询并不理想，因为已经提供了生成安全查询的方法。

```
database.query(DATABASE_TABLE, new String[] {ROW_ID, ROW_COLUMN_ONE, ROW_COLUMN_TWO, ... }, null, null, null, null, new String[] {ROW_ID}); 
```

这将返回数据库中按 ROW_ID 列排序的所有行。

该站点可能会进一步使用，因为它涵盖了 SQLite 实现的一些常见用例。 [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# jquery - SlickGrid - 顶部的冻结总计行

> ID：11637651
> 
> 赞同：1
> 
> 时间：2012-07-24T19:06:36.547
> 
> 标签：jquery, sticky, slickgrid

我正在使用[SlickGrid](https://github.com/mleibman/SlickGrid)，我想知道是否有办法让我在顶部的标题行下方创建一个总计行。

我看到这里提出了这个问题：[https ://github.com/mleibman/SlickGrid/issues/26](https://github.com/mleibman/SlickGrid/issues/26)

它在这里实现：[https](https://github.com/mleibman/SlickGrid/commit/19624f6687a0d2671639c4b1f2c05eb20c9ab0c7) ://github.com/mleibman/SlickGrid/commit/19624f6687a0d2671639c4b1f2c05eb20c9ab0c7 。（但我在当前版本中找不到这些方法了！）

另外，我在这个网站上找到了一个分支：[https](https://railadvisor.com/js/slickgrid/examples/example15-fork-feature-demo.html) ://railadvisor.com/js/slickgrid/examples/example15-fork-feature-demo.html 。

谁能告诉我如何使用当前的 SlickGrid 实现来做类似的事情？另外，我不希望过滤总计行。谢谢！

**编辑：**这是我在 jsFiddle 中的尝试：http: [//jsfiddle.net/crystality/Jwc6q/](http://jsfiddle.net/crystality/Jwc6q/)
（我从这些示例中复制了代码：[多列排序](http://mleibman.github.com/SlickGrid/examples/example-multi-column-sort.html)和[使用固定标题行进行快速过滤](http://mleibman.github.com/SlickGrid/examples/example-header-row.html)。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:15:52.250

你在正确的轨道上。您现在要做的就是计算每列的总数并将其附加到`<p>`（而不是 TOTAL）。此外，如果您的表格是可编辑的，您可以订阅该`grid.onCellChange`事件以更新您的标题。

# c# - 64 位 C# 编译器/JITer 会对 Int64 上的互锁操作执行什么样的优化？

> ID：11637664
> 
> 赞同：2
> 
> 时间：2012-07-24T19:07:33.283
> 
> 标签：c#, interlocked

我正在处理一些需要支持 32 位和 64 位代码库的线程库代码，因此在有争议的路径中存在各种互锁调用，专门用于处理 Int64 的非原子加载和存储。

我想知道，在 64 位平台上执行时，在 Int64 上运行时是否有任何特殊优化？具体来说，Interlocked.Read(...) 调用是否转换为等效的普通赋值？结果被丢弃的 Interlocked.Exchange(...) 调用是否也变成了普通赋值？

# c++ - 从返回int的函数中获取char的正确方法？

> ID：11637666
> 
> 赞同：2
> 
> 时间：2012-07-24T19:07:33.630
> 
> 标签：c++, c, file

我正在使用文件系统库，并且正在尝试创建一个 readline 函数。

```
int al_fgetc(ALLEGRO_FILE *f) 
```

> 在 5.0.0 中引入
> 
> 读取并返回给定文件中的下一个字节。在文件结尾或发生错误时返回 EOF。

那是我从库中使用的功能。我想要做的是 += 将结果字符转换为 std 字符串，如果它是 != EOF 是-1。我只是不确定是否需要强制转换以获得正确的结果。这样的事情会做到吗：

```
bool File::readLine( std::string& buff )
{
    if(eof() || !isOpen())
    {
        return false;
    }
    buff = "";
    int c = 0;
    while(c = al_fgetc(m_file) != EOF && c != '\n')
    {
        buff += (char)c;
    }
    return buff.length() > 0;
} 
```

我将从文件中读取 utf-8，所以我需要确保它正常工作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:17:13.000

是的，这将起作用，除非您需要一组额外的括号，因为`!=`运算符的优先级高于`=`运算符：

```
while((c = al_fgetc(m_file)) != EOF && c != '\n')
    ... 
```

`fgetc`返回`int`而不是的唯一原因`char`是有 257 个可能的返回值：所有 256 个可能的字节，或`EOF`，这表明文件中没有更多数据了。它将始终返回 0-255 或`EOF`，因此一旦您测试了它，将返回值强制转换为`char`或是安全的。`unsigned char``EOF`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:13:04.977

是的，他们返回 int 的唯一原因是因为 char 中没有可用于 EOF 信号的“自由”值。因此，检查它不是 EOF 并随后将其转换回 char 正是他们希望你做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:14:33.530

尝试使用 feof(m_file) 检查您是否已到达文件末尾，而不是检查 fgetc 返回的字符。这应该将您的读取循环与 eof 检查分开，因此不需要强制转换。

# c# - .count() 方法 c# 的问题

> ID：11637670
> 
> 赞同：1
> 
> 时间：2012-07-24T19:07:50.773
> 
> 标签：c#

`.count()`在 CloudTableQuery 上使用方法时遇到问题

```
 public void AccessEntites()
    {
        CloudTableQuery entries =
            (from e in ServiceContext.CreateQuery<T>(TableName)
             select e).AsTableServiceQuery();

        int count = entries.Count(); //An error occurred while processing this request.
    } 
```

我只想计算我们在条目中拥有的元素总数。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:09:26.777

确保您的条目不为空。

```
int count;
if (entries != null)
  count = entries.Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:15:52.637

此代码不起作用，因为 Azure 表存储（云表）不支持 Count() 操作来获取实体数量。获取此值的唯一方法是检索所有实体（最好是小投影）并计算检索到的实体。

编辑：这是 Microsoft 社交论坛的链接，在 2012 年 4 月也说过（仍然有效）。

[http://social.msdn.microsoft.com/Forums/nl-BE/windowsazuredata/thread/440e19fe-f3e0-4c98-a28f-85c535f3d735](http://social.msdn.microsoft.com/Forums/nl-BE/windowsazuredata/thread/440e19fe-f3e0-4c98-a28f-85c535f3d735)

# html - 将 Wordpress 添加到静态 HTML 页面？

> ID：11637671
> 
> 赞同：0
> 
> 时间：2012-07-24T19:07:51.193
> 
> 标签：html, wordpress

今天早些时候有人问我有关将 WordPress 添加到网站的问题，我想知道这是否可行以及需要做多少工作。

基本上有一个静态 HTML 页面millerat.com。该网站的所有者希望我使用 URL millerat.com/blog 创建一个 WordPress 博客。主题需要看起来与静态页面相似，并且所有者不想更改静态 HTML 页面，只是在博客中添加导航链接。

那么这可能吗？会有多难？

对此的所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:09:57.493

设计一个新的 wordpress 主题可能有点麻烦，但总体而言，您尝试做的事情并不难。您要做的只是将他的静态页面链接到 wordpess 博客，就像您链接任何网站一样。您提出的问题需要涵盖很多材料，但是[此链接](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)肯定可以帮助您入门。设置现有网站非常容易，设置 wordpress 将需要更多工作。您需要对 PHP、HTML 和 CSS 有一定的掌握才能以您想要的方式获得主题，但这一切都是绝对可行的。这又是一个非常广泛的主题，但您可以在[此处](http://codex.wordpress.org/Site_Design_and_Layout)找到设计 wordpress 主题的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:08:43.907

当然可以。

如果您不熟悉 WP，肯定会有一些学习曲线。

# php - 如何实现不能删除的默认类别（db行）

> ID：11637675
> 
> 赞同：0
> 
> 时间：2012-07-24T19:08:21.130
> 
> 标签：php, mysql, content-management-system

我正在构建一个带有页面和类别的 CMS（由 PHP 和 MYSQL 提供支持）。目前用户可以创建、编辑和删除页面/类别。但是当用户删除一个类别时，他们的页面最终会陷入困境......因为他们查看页面的唯一方法是选择一个类别。

我正在考虑为孤立页面指定一个无法删除的默认类别。但是我将如何实施这样的事情呢？

有没有更好的解决方案我不知道？我可以使用一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:17:52.967

如果每个类别在数据库中有一行，则有一个字段“is_deletable”（TINYINT 应该这样做）并将默认类别设置为 0。这比硬编码“默认”类别更灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:19:09.720

每当您删除一个类别时，请`UPDATE`对该类别中的页面进行查询，以将类别 ID 更新为 0（不存在）。

然后决定一个`Uncategorized`类别，该类别将包含所有类别为 0 的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:19:15.370

用户可以删除类别，因为您允许，如果您对删除类别提出了一些要求（如果页面仅属于一个类别并且这是用户要删除的类别，则不允许），那么他们将无法删除它。

# java - System.arraycopy 截断字节

> ID：11637676
> 
> 赞同：0
> 
> 时间：2012-07-24T19:08:23.507
> 
> 标签：java, sockets

我正在使用下面的代码从连接的套接字读取数据，并且在执行 System.arraycopy(tempBuffer, 0, buffer, 0, byteRead) 代码后我在缓冲区变量中接收的数据长度为 41 个字节。发送系统正在发送 43 个字节。任何人都知道为什么 arraycopy 会切断其他字节？

```
public class BluetoothClientSocket{
     private class ConnectedThread extends Thread {

          private final BluetoothSocket mmSocket;
          private final InputStream mmInStream;
          private final OutputStream mmOutStream;

         public ConnectedThread(BluetoothSocket socket) {
               mmSocket = socket;
               InputStream tmpIn = null;
               OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
            //handle exception logic
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
          }

         public void run(){
             byte[] tempBuffer = new byte[1024];
             byte[] buffer = null;
             int byteRead;

             while (true) {
                try {
                        InputStream itStrm = mmInStream;
                        byteRead = mmInStream.read(tempBuffer);
                        if(byteRead > 0){
                             buffer = new byte[byteRead];
                             System.arraycopy(tempBuffer, 0, buffer, 0, byteRead);
                        }
                   }
                   catch(Exception ex){
                       //handle exception logic
                   }
              }
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T19:11:27.697

> 发送系统正在发送 43 个字节。

这并不意味着您在*一次*调用`read`.

> 任何人都知道为什么 arraycopy 会切断其他字节？

它不是。我怀疑你会发现它`byteRead`是 41，这意味着“问题”发生在`arraycopy`参与之前。

我希望您在下一次调用`read`.

或者你的代码在另一端是错误的，你只发送 41 个字节开始。

# python - App Engine GQL 查询 - 排序

> ID：11637677
> 
> 赞同：1
> 
> 时间：2012-07-24T19:08:24.480
> 
> 标签：python, google-app-engine, gql

在 GAE (python) 中合并两个 GQLQueries 时遇到一些问题。

```
 fp_events = db.GqlQuery("SELECT * FROM Event WHERE firstPlayer=:1", alias).fetch(mylimit)
  sp_events = db.GqlQuery("SELECT * FROM Event WHERE secondPlayer=:1", alias).fetch(mylimit)
  events = fp_events.append(sp_events) 
```

但是，当我尝试使用 for 循环遍历这些事件时，该行`for event in events:`出现`TypeError: 'NoneType' object is not iterable`错误。我怀疑这与我尝试做的追加有关，尽管我不完全确定。

这些事件也有一个 datetime 属性......我如何按时间对结果事件列表进行降序排序？虽然我可以`ORDER BY time DESC`在上面的两个查询中使用，但不一定保证它们的合并是排序的。

我还应该提到 Event 表的 firstPlayer 和 secondPlayer 属性是互斥的（没有事件将 firstPlayer 和 secondPlayer 设置为同一个玩家）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:35:11.740

您可以使用`list`将可迭代对象转换为 Python 列表：

```
fp_events = db.GqlQuery("SELECT * FROM Event WHERE firstPlayer = :1", alias).fetch(mylimit)
sp_events = db.GqlQuery("SELECT * FROM Event WHERE secondPlayer = :1", alias).fetch(mylimit) 
```

要合并这两个列表，请尝试以下操作：

```
fp_events_list = list(fp_events)
sp_events_list = list(sp_events)
events = fp_events_list + sp_events_list 
```

我刚刚在远程 shell 中针对我自己的一个 AppEngine 数据存储区进行了尝试，它确实有效。

恐怕为了得到你想要的排序，你必须使用[sorted builtin](http://wiki.python.org/moin/HowTo/Sorting/)对它们进行排序：

```
sorted_events = sorted(events, key=lambda event: event.time) 
```

# c# - 处理多个正则表达式组

> ID：11637678
> 
> 赞同：3
> 
> 时间：2012-07-24T19:08:25.860
> 
> 标签：c#, regex

我正在使用以下代码递归解析 css`@import`语句以将嵌套 css 文件加载到 minifer 中。虽然这与标准`@import`语句完美配合，但它会错误地添加`@import`带有媒体查询的语句，而不会在它们周围创建条件。

我需要做的是：

1.  循环通过我的比赛抓住`filename`小组捕获
2.  检查是否存在相应的`media`组
3.  如果是这样，使用捕获的参数将整个加载的 css 包装在媒体查询中
4.  如果没有，只需添加文件名捕获内容。

例如

```
@import url(style.css) screen and (min-width: 768px); 
```

变成

```
@media screen and (min-width: 767px) {
    /* contents of style.css */
} 
```

我用来捕获语句的正则表达式是这样的：

```
(?:@import\surl\()(?<filename>[^.]+\.css)(?:\)((?<media>[^;]+);|;)) 
```

这是正确捕获。我只是对这些课程了解得不够多，无法`Regex`全部解决。

比我聪明的人能解决这个问题吗？

我的原始代码。

```
 /// <summary>
    /// Parses the string for css imports and adds them to the 
    /// file dependency list.
    /// </summary>
    /// <param name="css">
    /// The css to parse for import statements.
    /// </param>
    /// <param name="minify">
    /// Whether or not the local script should be minified.
    /// </param>
    /// <returns>The css file parsed for imports.</returns>
    private string ParseImportsAndCache(string css, bool minify)
    {
        // Check for imports and parse if necessary.
        if (!css.Contains("@import", StringComparison.OrdinalIgnoreCase))
        {
            return css;
        }

        // Recursivly parse the css for imports.
        foreach (Match match in ImportsRegex.Matches(css))
        {
            // Recursivly parse the css for imports.
            GroupCollection groups = match.Groups;

            // Check and add the @import params to the cache dependancy list.
            foreach (var groupName in groups["filename"].Captures)
            {
                // Get the match
                List<string> files = new List<string>();
                Array.ForEach(
                    CSSPaths,
                    cssPath => Array.ForEach(
                        Directory.GetFiles(
                            HttpContext.Current.Server.MapPath(cssPath),
                            groupName.ToString(),
                            SearchOption.AllDirectories),
                        files.Add));

                string file = files.FirstOrDefault();
                string thisCSS = string.Empty;

                // Read the file.
                if (file != null)
                {
                    using (StreamReader reader = new StreamReader(file))
                    {
                        // Recursiveley parse the css.
                        thisCSS = this.ParseImportsAndCache(reader.ReadToEnd(),
                                                            minify);
                    }
                }

                // Replace the regex match with the full qualified css.
                css = css.Replace(match.Value, thisCSS);

                if (minify)
                {
                    this.cacheDependencies
                        .Add(new CacheDependency(files.FirstOrDefault()));
                }
            }
        }

        return css;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:38:58.933

按照评论中的建议，这是最终的工作代码。

```
/// <summary>
/// Parses the string for css imports and adds them to the file dependency 
/// list.
/// </summary>
/// <param name="css">
/// The css to parse for import statements.
/// </param>
/// <param name="minify">Whether or not the local script should be minified.
////</param>
/// <returns>The css file parsed for imports.</returns>
private string ParseImportsAndCache(string css, bool minify)
{
    // Check for imports and parse if necessary.
    if (!css.Contains("@import", StringComparison.OrdinalIgnoreCase))
    {
        return css;
    }

    // Recursivly parse the css for imports.
    foreach (Match match in ImportsRegex.Matches(css))
    {
        // Recursivly parse the css for imports.
        GroupCollection groups = match.Groups;
        Capture fileName = groups["filename"].Captures[0];
        CaptureCollection mediaQueries = groups["media"].Captures;
        Capture mediaQuery = null;

        if (mediaQueries.Count > 0)
        {
            mediaQuery = mediaQueries[0];
        }

        // Check and add the @import params to the cache dependancy list.
        // Get the match
        List<string> files = CSSPaths
            .SelectMany(cssPath => Directory.GetFiles(
                HttpContext.Current.Server.MapPath(cssPath),
                Path.GetFileName(fileName.ToString()),
                SearchOption.AllDirectories))
            .ToList();

        string file = files.FirstOrDefault();
        string thisCSS = string.Empty;

        // Read the file.
        if (file != null)
        {
            using (StreamReader reader = new StreamReader(file))
            {
                thisCSS = mediaQuery != null
                    ? string.Format(CultureInfo.InvariantCulture,
                                "@media {0}{{{1}{2}{1}}}",
                                mediaQuery,
                                Environment.NewLine,
                                this.ParseImportsAndCache(
                                this.PreProcessInput(reader.ReadToEnd(), 
                                file),
                                minify))
                    : this.ParseImportsAndCache(this.PreProcessInput(
                                                reader.ReadToEnd(), 
                                                file), 
                                                minify);
            }
        }

        // Replace the regex match with the full qualified css.
        css = css.Replace(match.Value, thisCSS);

        if (minify)
        {
            this.cacheDependencies.Add(new CacheDependency(
                                           files.FirstOrDefault()));
        }
    }

    return css;
} 
```

# git - Git pull - 错误：以下未跟踪的工作树文件将被合并覆盖：

> ID：11637686
> 
> 赞同：17
> 
> 时间：2012-07-24T19:08:49.553
> 
> 标签：git, github

当我在监控服务器上每 60 秒执行一次 git pull 时，我不断收到此错误。我正在使用厨师和 python 脚本每 60 秒“git pull”一次。

```
Updating 70fe6e8..2da34fc
error: The following untracked working tree files would be overwritten by merge:
    rtb_redis_connections/redis_connections.pyc
Please move or remove them before you can merge.
Aborting 
```

我该如何处理？这些 pyc 文件不断被创建。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T11:54:59.920

我的猜测是其他人不小心提交了这个文件。如何解决这个问题：

删除本地 .pyc 文件

```
rm rtb_redis_connections/redis_connections.pyc 
```

做拉

```
git pull 
```

从 git 中删除文件并推送更改

```
git rm rtb_redis_connections/redis_connections.pyc
git commit -m "Remove pyc file"
git push origin master 
```

假设您正在处理 master 分支。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T06:11:37.480

> 请先移动或删除它们，然后才能合并。
> 
> 中止

解决方案其实很简单：

```
git clean  -d  -fx "" 
```

*   X - 删除忽略文件尚未识别 git 文件
*   D -- 文件路径中的git没有添加删除
*   F——强制运行

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T19:11:50.340

你为什么不把它们放进去`.gitignore`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:12:49.617

您需要将 te`rtb_redis_connections`目录添加到存储库以便它跟踪到远程，或者将文件或目录添加到`.gitignore`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T10:43:03.540

试试这个：

```
git config --global core.trustctime false 
```

# javascript - 保留当前点击事件jquery

> ID：11637687
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:08:55.377
> 
> 标签：javascript, jquery, web-applications, mobile

我需要临时更改元素的点击事件，如下所示：

```
var originalEvent = '';

$("#helpMode").click(function (e) {
      originalEvent = $("#element").getCurrentClickEventHandler();
      $("#element").click(function (e) {
          //Do something else
      });
});

//Later in the code
$("#helpModeOff").click(function (e) {
      $("#element").click(originalEvent);
}); 
```

我如何将作为事件处理程序的当前函数存储在全局变量中以供以后重用？

编辑：这就是我想要做的事情：

```
var evnt = '';

$("#helpTool").click(function (e) {
if(!this.isOn){

evnt = $("#Browse").data('events').click;
$("#ele").unbind('click');
$("#ele").click(function (e) {
    alert('dd');
});

this.isOn=true;
}else{
    this.isOn = false;
    alert('off');
    $("#ele").unblind('click');
    $("#ele").click(evnt);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:16:04.600

就个人而言，我认为我会避免手动绑定和解除绑定处理程序。

解决此问题的另一种方法是将点击事件绑定到类，然后您需要做的就是在切换到/从帮助模式时从适当的元素中添加和删除类。

这是一个[jsfiddle](http://jsfiddle.net/DyCVW/)说明我的意思。

切换到帮助模式和从帮助模式切换只涉及添加删除类：

```
$('#btnhelpmode').click(function(){
    if(!helpMode){
     helpMode = true;   
     $('.normalmode').addClass('helpmode').removeClass('normalmode');
     $(this).val('Switch to normal mode...');                            
    }else{
     helpMode = false;   
     $('.helpmode').addClass('normalmode').removeClass('helpmode');              
     $(this).val('Switch to help mode...');                                        
    }        
}); 
```

您只需创建所需的处理程序，将它们绑定到适当的类：

```
$('#pagecontent').on('click', '#element1.normalmode', function(){        
   alert('element1 normal mode'); 
});

$('#pagecontent').on('click', '#element1.helpmode', function(){        
   alert('element1 help mode'); 
});

$('#pagecontent').on('click', '#element2.normalmode', function(){        
   alert('element2 normal mode'); 
});

$('#pagecontent').on('click', '#element2.helpmode', function(){        
   alert('element2 help mode'); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:18:27.893

给你，想通了：

现在使用 e.srcElement.id 您可以获得 HelpMode 或 HelpModeOff 然后可以打开/关闭您的帮助内容！

[http://jsfiddle.net/zcDQ9/1/](http://jsfiddle.net/zcDQ9/1/)

```
var originalEvent = '';

$('#element').on('yourCustomEvent', function (e) {
   // do stuff
   alert(originalEvent);
   $(this).toggleClass('toggleThing');

   //test for helpMode or helpModeOff here now...
});

$("#helpMode").on('click', function (e) {
    originalEvent = e.srcElement.id;
    $("#element").trigger('yourCustomEvent');
});

//Later in the code
$("#helpModeOff").on('click', function (e) {
   originalEvent = e.srcElement.id;
   $("#element").trigger('yourCustomEvent');
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:18:43.023

好的。在 jQuery 1.7 中，我想这有点不同。

```
//get the handler from data('events')

$.each($("#element").data("events"), function(i, event) {
    if (i === "click") {
        $.each(event, function(j, h) {
            alert(h.handler);
        });
    }   
}); 
```

[http://jsfiddle.net/yQwZU/](http://jsfiddle.net/yQwZU/)

[这](https://stackoverflow.com/questions/2518421/jquery-find-events-handlers-registered-with-an-object)是参考。

不确定以下是否适用于 1.7。

```
originalEvent = $('#element').data('events').click; 
```

jQuery 将所有处理程序存储在`data`. 请参阅[此处](https://stackoverflow.com/questions/570960/how-to-debug-javascript-jquery-event-bindings-with-firebug-or-similar-tool)以了解有关`data('events')`.

# android - Android 移动、Gps 和 Wifi 设置

> ID：11637689
> 
> 赞同：0
> 
> 时间：2012-07-24T19:09:00.163
> 
> 标签：android

我想在 Android 中分享我的设置页面。它允许打开/关闭 gps、wifi 和移动数据。我寻找这个解决方案很长时间，现在，当我终于写出来时，也许这段代码会对你们中的许多人有所帮助。

如果您想纠正我的一些解决方案，请继续。

```
public class Settings extends Activity {
    ToggleButton        wifi, network, gps;

    WifiManager         wifiManager;
    ConnectivityManager connectivityManager;
    LocationManager     locationManager;

    Intent              gps_settings;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    gps_settings = new Intent("android.location.GPS_ENABLED_CHANGE");

    wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    wifi = (ToggleButton) findViewById(R.id.toggleWiFi);
    network = (ToggleButton) findViewById(R.id.toggleGSM);
    gps = (ToggleButton) findViewById(R.id.toggleGPS);

    wifi.setOnClickListener(new OnClickListener() {
        String  provider    = "Wifi";

        public void onClick(View v) {
            if (!wifi.isChecked()) wifiManager.setWifiEnabled(makeToast(provider, false));
            else if (!wifiManager.isWifiEnabled()) wifiManager.setWifiEnabled(makeToast(provider, true));
        }
    });

    network.setOnClickListener(new OnClickListener() {
        String  provider    = "Mobile data";

        public void onClick(View v) {
            try {
                if (!network.isChecked()) setMobileDataEnabled(makeToast(provider, false));
                else if (!connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting()) setMobileDataEnabled(makeToast(provider, true));
            }
            catch (Exception e) {
                Log.e("Debugging", "Reflexion error.");
            }
        }
    });

    gps.setOnClickListener(new OnClickListener() {
        String  provider    = "GPS";

        public void onClick(View v) {
            if (!gps.isChecked()) {
                gps_settings.putExtra("enabled", makeToast(provider, false));
                sendBroadcast(gps_settings);
            }

            else if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
                gps_settings.putExtra("enabled", makeToast(provider, true));
                sendBroadcast(gps_settings);
            }
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    toggle();
}

protected void toggle() {
    if (wifiManager.isWifiEnabled()) wifi.setChecked(true);
    else wifi.setChecked(false);

    if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting()) network.setChecked(true);
    else network.setChecked(false);

    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) gps.setChecked(true);
    else gps.setChecked(false);
}

protected void setMobileDataEnabled(boolean enabled) throws SecurityException, NoSuchMethodException, NoSuchFieldException, ClassNotFoundException, IllegalArgumentException, IllegalAccessException, InvocationTargetException {
    final Class<?> conmanClass = Class.forName(connectivityManager.getClass().getName());
    final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
    iConnectivityManagerField.setAccessible(true);
    final Object iConnectivityManager = iConnectivityManagerField.get(connectivityManager);
    final Class<?> iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
    final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    setMobileDataEnabledMethod.setAccessible(true);

    setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
}

protected boolean makeToast(String provider, boolean turningOn) {
    Toast.makeText(getApplicationContext(), "Turning "
            + (turningOn ? "on" : "off") + " " + provider + "...", Toast.LENGTH_SHORT).show();

    return turningOn;
    }
} 
```

* * *

**已编辑**

所有这些方法都安全吗？我是否正确使用它们？有什么更好的办法吗？

# asp.net-mvc - MVC C# 最佳方法 - 会话变量

> ID：11637690
> 
> 赞同：0
> 
> 时间：2012-07-24T19:09:02.873
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, session-variables

我有一个详细信息和编辑页面，用户可以通过单击电子邮件超链接从该页面发送电子邮件。

当他们单击“详细信息”或“编辑”页面超链接时，我会转到控制器，该控制器会打开一封用户可以编辑的电子邮件。

提交电子邮件后，我转到 [httppost]。

在 httppost actionresult 上，我需要使用 return RedirectToAction 来将用户重定向回他们开始的编辑或详细信息页面。

我正在考虑将此信息保存在会话变量中，以了解用户的来源：

```
 Session["Originated"] = "Edit"; 
```

或者

```
 Session["Originated"] = "Details"; 
```

或者有没有更好的方法来跟踪这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:12:07.820

也许添加路由参数？例如 /Email/Create?originated=Edit。它会让你所有的东西都保持无会话。

示例：在视图中

```
 @Html.ActionLink("Create email", "Create", "Email", new { originated = "Edit" }, null) 
```

在行动

```
public ActionResult Create(string originated)
{
...
} 
```

# code-snippets - 为什么我的 Sublime Text 片段不响应选项卡触发器？

> ID：11637697
> 
> 赞同：0
> 
> 时间：2012-07-24T19:09:23.350
> 
> 标签：code-snippets, sublimetext2

我刚开始使用 Sublime Text 2，但由于某种原因，我无法让我的代码片段工作：

例如，下面是一个片段，我想用它来设置 Handlebars.js 的脚本：

```
<snippet>
    <content><![CDATA[
<script id="template" type="text/x-handlebars-template">
    </script>
]]></content>
<!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
<!-- <tabTrigger>handlebars</tabTrigger> -->
</snippet> 
```

但是当我在编辑器中输入`handlebars`，然后按 Tab 时，我看到的只是`handlebars-1`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:12:48.017

你需要取消注释`<tabTrigger>`

```
<snippet>
    <content><![CDATA[
<script id="template" type="text/x-handlebars-template">
    </script>
]]></content>    
    <tabTrigger>handlebars</tabTrigger>
</snippet> 
```

# c - Sqlite C接口获取单值结果

> ID：11637701
> 
> 赞同：4
> 
> 时间：2012-07-24T19:09:34.047
> 
> 标签：c, sqlite

当我输入 Sqlite

```
SELECT Count(*) FROM tabl; 
```

它返回一个数字。

准备好语句后如何使用C接口获取这个数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T20:00:40.693

打开数据库文件，准备语句，执行步骤（即，如果结果中有不止一行，则必须一一获取），提取列值，完成语句，关闭数据库。

像这样的东西：

```
sqlite3_stmt* stmt = NULL;

sqlite3* local_db = NULL;

sqlite3_open("filename.sqlite", &local_db);

int retval, idx;
char sql[2048];

sprintf(sql, "select Something from Somewhere;");

// execute statement
retval = sqlite3_prepare_v2(local_db, sql, -1, &stmt, 0);

if(retval)
{
    printf("Selecting data from DB Failed (err_code=%d)\n", retval);
    return;
}

// iterate rows
idx = 0;

// for multiple results
while(1)
{
    // fetch a row's status
    retval = sqlite3_step(stmt);

    if(retval == SQLITE_ROW)
    {
        Something =
             (int)sqlite3_column_int(stmt, 0);
             // or other type - sqlite3_column_text etc.
        // ... fetch other columns, if there are any
    }
    else if(retval == SQLITE_DONE)
    {
        break;
    }
    else
    {
        sqlite3_finalize(stmt);
        printf("Some error encountered\n");
        break;
    }
}

sqlite3_finalize(stmt);

sqlite3_close(local_db); 
```

使用此代码，查找所有 API 调用（open、prepare_v2、step、column、finalize）。

如果这很难，那么首先你应该熟悉 C 本身。

# iphone - 在 AppDelegate.m 中获取当前屏幕上显示的 UIViewController

> ID：11637709
> 
> 赞同：133
> 
> 时间：2012-07-24T19:09:57.497
> 
> 标签：iphone, ios, uiviewcontroller, push-notification

屏幕上的当前`UIViewController`需要通过设置一些徽章视图来响应来自 APN 的推送通知。但是我怎么能得到`UIViewController`in 方法`application:didReceiveRemoteNotification`: of `AppDelegate.m`？

我尝试使用`self.window.rootViewController`来获取当前显示`UIViewController`，它可能是一个`UINavigationViewController`或其他类型的视图控制器。而且我发现 的`visibleViewController`属性`UINavigationViewController`可以用来`UIViewController`在屏幕上显示 。但是，如果它不是，我该怎么办`UINavigationViewController`？

任何帮助表示赞赏！相关代码如下。

**AppDelegate.m**

```
...
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    //I would like to find out which view controller is on the screen here.

    UIViewController *vc = [(UINavigationViewController *)self.window.rootViewController visibleViewController];
    [vc performSelector:@selector(handleThePushNotification:) withObject:userInfo];
}
... 
```

**视图控制器A.m**

```
- (void)handleThePushNotification:(NSDictionary *)userInfo{

    //set some badge view here

} 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2014-02-18T08:41:33.663

我总是喜欢涉及类别的解决方案，因为它们是固定的并且可以很容易地重复使用。

所以我在 UIWindow 上创建了一个类别。您现在可以在 UIWindow 上调用 visibleViewController ，这将通过向下搜索控制器层次结构为您提供可见视图控制器。如果您使用导航和/或标签栏控制器，这将有效。如果您有其他类型的控制器要建议，请告诉我，我可以添加它。

**UIWindow+PazLabs.h（头文件）**

```
#import <UIKit/UIKit.h>

@interface UIWindow (PazLabs)

- (UIViewController *) visibleViewController;

@end 
```

**UIWindow+PazLabs.m（实现文件）**

```
#import "UIWindow+PazLabs.h"

@implementation UIWindow (PazLabs)

- (UIViewController *)visibleViewController {
    UIViewController *rootViewController = self.rootViewController;
    return [UIWindow getVisibleViewControllerFrom:rootViewController];
}

+ (UIViewController *) getVisibleViewControllerFrom:(UIViewController *) vc {
    if ([vc isKindOfClass:[UINavigationController class]]) {
        return [UIWindow getVisibleViewControllerFrom:[((UINavigationController *) vc) visibleViewController]];
    } else if ([vc isKindOfClass:[UITabBarController class]]) {
        return [UIWindow getVisibleViewControllerFrom:[((UITabBarController *) vc) selectedViewController]];
    } else {
        if (vc.presentedViewController) {
            return [UIWindow getVisibleViewControllerFrom:vc.presentedViewController];
        } else {
            return vc;
        }
    }
}

@end 
```

**斯威夫特版本**

```
public extension UIWindow {
    public var visibleViewController: UIViewController? {
        return UIWindow.getVisibleViewControllerFrom(self.rootViewController)
    }

    public static func getVisibleViewControllerFrom(_ vc: UIViewController?) -> UIViewController? {
        if let nc = vc as? UINavigationController {
            return UIWindow.getVisibleViewControllerFrom(nc.visibleViewController)
        } else if let tc = vc as? UITabBarController {
            return UIWindow.getVisibleViewControllerFrom(tc.selectedViewController)
        } else {
            if let pvc = vc?.presentedViewController {
                return UIWindow.getVisibleViewControllerFrom(pvc)
            } else {
                return vc
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2012-07-24T19:14:37.477

`rootViewController`当您的控制器不是时，您也可以使用`UINavigationController`：

```
UIViewController *vc = self.window.rootViewController; 
```

一旦你知道了根视图控制器，那么它取决于你如何构建你的 UI，但你可能会找到一种方法来浏览控制器层次结构。

如果您提供有关定义应用程序方式的更多详细信息，那么我可能会提供更多提示。

编辑：

如果你想要最顶层的*视图*（不是视图控制器），你可以检查

```
[[[[UIApplication sharedApplication] keyWindow] subviews] lastObject]; 
```

虽然这个视图可能是不可见的，甚至被它的一些子视图覆盖......

同样，这取决于您的用户界面，但这可能会有所帮助......

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2015-02-24T14:59:25.060

Swift 中 UIApplication 的简单扩展*（甚至关心`UITabBarController`iPhone 上的 moreNavigationController）*：

```
extension UIApplication {
    class func topViewController(base: UIViewController? = UIApplication.sharedApplication().keyWindow?.rootViewController) -> UIViewController? {

        if let nav = base as? UINavigationController {
            return topViewController(base: nav.visibleViewController)
        }

        if let tab = base as? UITabBarController {
            let moreNavigationController = tab.moreNavigationController

            if let top = moreNavigationController.topViewController where top.view.window != nil {
                return topViewController(top)
            } else if let selected = tab.selectedViewController {
                return topViewController(selected)
            }
        }

        if let presented = base?.presentedViewController {
            return topViewController(base: presented)
        }

        return base
    }
} 
```

简单用法：

```
 if let rootViewController = UIApplication.topViewController() {
        //do sth with root view controller
    } 
```

完美运行:-)

**更新干净的代码：**

```
extension UIViewController {
    var top: UIViewController? {
        if let controller = self as? UINavigationController {
            return controller.topViewController?.top
        }
        if let controller = self as? UISplitViewController {
            return controller.viewControllers.last?.top
        }
        if let controller = self as? UITabBarController {
            return controller.selectedViewController?.top
        }
        if let controller = presentedViewController {
            return controller.top
        }
        return self
    }
} 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-04-21T14:52:43.340

你也可以通过 NSNotificationCenter 发布通知。这让您可以处理许多遍历视图控制器层次结构可能很棘手的情况 - 例如，当模态显示时等。

例如，

```
// MyAppDelegate.h
NSString * const UIApplicationDidReceiveRemoteNotification;

// MyAppDelegate.m
NSString * const UIApplicationDidReceiveRemoteNotification = @"UIApplicationDidReceiveRemoteNotification";

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    [[NSNotificationCenter defaultCenter]
     postNotificationName:UIApplicationDidReceiveRemoteNotification
     object:self
     userInfo:userInfo];
} 
```

在您的每个视图控制器中：

```
-(void)viewDidLoad {
    [[NSNotificationCenter defaultCenter] 
      addObserver:self
      selector:@selector(didReceiveRemoteNotification:)                                                  
      name:UIApplicationDidReceiveRemoteNotification
      object:nil];
}

-(void)viewDidUnload {
    [[NSNotificationCenter defaultCenter] 
      removeObserver:self
      name:UIApplicationDidReceiveRemoteNotification
      object:nil];
}

-(void)didReceiveRemoteNotification:(NSDictionary *)userInfo {
    // see http://stackoverflow.com/a/2777460/305149
   if (self.isViewLoaded && self.view.window) {
      // handle the notification
   }
} 
```

您还可以使用这种方法来检测需要在收到通知时更新并由多个视图控制器使用的控件。在这种情况下，分别在 init 和 dealloc 方法中处理添加/删除观察者调用。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-02-27T13:19:16.567

## 代码

这是一种使用**Swift 3/4/5中出色的****switch-case 语法**的方法：

 **```
import UIKit

extension UIWindow {
    /// Returns the currently visible view controller if any reachable within the window.
    public var visibleViewController: UIViewController? {
        return UIWindow.visibleViewController(from: rootViewController)
    }

    /// Recursively follows navigation controllers, tab bar controllers and modal presented view controllers starting
    /// from the given view controller to find the currently visible view controller.
    ///
    /// - Parameters:
    ///   - viewController: The view controller to start the recursive search from.
    /// - Returns: The view controller that is most probably visible on screen right now.
    public static func visibleViewController(from viewController: UIViewController?) -> UIViewController? {
        switch viewController {
        case let navigationController as UINavigationController:
            return UIWindow.visibleViewController(from: navigationController.visibleViewController ?? navigationController.topViewController)

        case let tabBarController as UITabBarController:
            return UIWindow.visibleViewController(from: tabBarController.selectedViewController)

        case let presentingViewController where viewController?.presentedViewController != nil:
            return UIWindow.visibleViewController(from: presentingViewController?.presentedViewController)

        default:
            return viewController
        }
    }
} 
```

基本思想与 zirinisp 的答案相同，只是使用了更类似于 Swift 3+ 的语法。

* * *

## 用法

您可能想要创建一个名为的文件并将`UIWindowExt.swift`上述**扩展代码复制**到其中。

在调用端，它可以在**没有任何特定视图控制器**的情况下使用：

```
if let visibleViewCtrl = UIApplication.shared.keyWindow?.visibleViewController {
    // do whatever you want with your `visibleViewCtrl`
} 
```

或者，如果您知道可以**从特定视图控制器访问您的可见视图控制器**：

```
if let visibleViewCtrl = UIWindow.visibleViewController(from: specificViewCtrl) {
    // do whatever you want with your `visibleViewCtrl`
} 
```

我希望它有帮助！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-09-19T23:15:53.963

我发现 iOS 8 把一切都搞砸了。在 iOS 7 中，`UITransitionView`只要您有一个模态呈现的`UINavigationController`. 无论如何，这是我发现获得最高 VC 的代码。调用`getTopMostViewController`应该返回一个 VC，您应该能够发送类似`presentViewController:animated:completion`. 它的目的是为您提供一个可用于呈现模态 VC 的 VC，因此它很可能会在容器类（`UINavigationController`而不是其中包含的 VC）处停止并返回。也应该不难调整代码来做到这一点。我已经在 iOS 6、7 和 8 的各种情况下测试了此代码。如果您发现错误，请告诉我。

```
+ (UIViewController*) getTopMostViewController
{
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    if (window.windowLevel != UIWindowLevelNormal) {
        NSArray *windows = [[UIApplication sharedApplication] windows];
        for(window in windows) {
            if (window.windowLevel == UIWindowLevelNormal) {
                break;
            }
        }
    }

    for (UIView *subView in [window subviews])
    {
        UIResponder *responder = [subView nextResponder];

        //added this block of code for iOS 8 which puts a UITransitionView in between the UIWindow and the UILayoutContainerView
        if ([responder isEqual:window])
        {
            //this is a UITransitionView
            if ([[subView subviews] count])
            {
                UIView *subSubView = [subView subviews][0]; //this should be the UILayoutContainerView
                responder = [subSubView nextResponder];
            }
        }

        if([responder isKindOfClass:[UIViewController class]]) {
            return [self topViewController: (UIViewController *) responder];
        }
    }

    return nil;
}

+ (UIViewController *) topViewController: (UIViewController *) controller
{
    BOOL isPresenting = NO;
    do {
        // this path is called only on iOS 6+, so -presentedViewController is fine here.
        UIViewController *presented = [controller presentedViewController];
        isPresenting = presented != nil;
        if(presented != nil) {
            controller = presented;
        }

    } while (isPresenting);

    return controller;
} 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2016-06-04T18:40:07.093

比所有其他解决方案更少的代码：

Objective-C 版本：

```
- (UIViewController *)getTopViewController {
    UIViewController *topViewController = [[[[UIApplication sharedApplication] delegate] window] rootViewController];
    while (topViewController.presentedViewController) topViewController = topViewController.presentedViewController;

    return topViewController;
} 
```

Swift 2.0 版本：（感谢 Steve.B）

```
func getTopViewController() -> UIViewController {
    var topViewController = UIApplication.sharedApplication().delegate!.window!!.rootViewController!
    while (topViewController.presentedViewController != nil) {
        topViewController = topViewController.presentedViewController!
    }
    return topViewController
} 
```

可以在您的应用程序中的任何位置使用，即使使用模态也是如此。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-12-19T14:59:36.137

zirinisp 在 Swift 中的回答：

```
extension UIWindow {

    func visibleViewController() -> UIViewController? {
        if let rootViewController: UIViewController  = self.rootViewController {
            return UIWindow.getVisibleViewControllerFrom(rootViewController)
        }
        return nil
    }

    class func getVisibleViewControllerFrom(vc:UIViewController) -> UIViewController {

        if vc.isKindOfClass(UINavigationController.self) {

            let navigationController = vc as UINavigationController
            return UIWindow.getVisibleViewControllerFrom( navigationController.visibleViewController)

        } else if vc.isKindOfClass(UITabBarController.self) {

            let tabBarController = vc as UITabBarController
            return UIWindow.getVisibleViewControllerFrom(tabBarController.selectedViewController!)

        } else {

            if let presentedViewController = vc.presentedViewController {

                return UIWindow.getVisibleViewControllerFrom(presentedViewController.presentedViewController!)

            } else {

                return vc;
            }
        }
    }
} 
```

用法：

```
 if let topController = window.visibleViewController() {
            println(topController)
        } 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-08-19T09:19:27.457

为每个 ViewController 指定标题，然后通过下面给出的代码获取当前 ViewController 的标题。

```
-(void)viewDidUnload {
  NSString *currentController = self.navigationController.visibleViewController.title; 
```

然后像这样通过你的标题检查它

```
 if([currentController isEqualToString:@"myViewControllerTitle"]){
    //write your code according to View controller.
  }
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-09-11T19:47:19.043

我的更好！:)

```
extension UIApplication {
    var visibleViewController : UIViewController? {
        return keyWindow?.rootViewController?.topViewController
    }
}

extension UIViewController {
    fileprivate var topViewController: UIViewController {
        switch self {
        case is UINavigationController:
            return (self as! UINavigationController).visibleViewController?.topViewController ?? self
        case is UITabBarController:
            return (self as! UITabBarController).selectedViewController?.topViewController ?? self
        default:
            return presentedViewController?.topViewController ?? self
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-07-24T19:16:46.283

为什么不在应用程序委托中处理推送通知代码？它与视图直接相关吗？

您可以检查 UIViewController 的视图当前是否可见，方法是检查它的视图的`window`属性是否有值。[在这里](https://stackoverflow.com/questions/2777438/how-to-tell-if-uiviewcontrollers-view-is-visible)查看更多。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-03-03T13:34:22.373

只是对@zirinisp 答案的补充。

创建一个文件，为其命名`UIWindowExtension.swift`并粘贴以下代码段：

```
import UIKit

public extension UIWindow {
    public var visibleViewController: UIViewController? {
        return UIWindow.getVisibleViewControllerFrom(self.rootViewController)
    }

    public static func getVisibleViewControllerFrom(vc: UIViewController?) -> UIViewController? {
        if let nc = vc as? UINavigationController {
            return UIWindow.getVisibleViewControllerFrom(nc.visibleViewController)
        } else if let tc = vc as? UITabBarController {
            return UIWindow.getVisibleViewControllerFrom(tc.selectedViewController)
        } else {
            if let pvc = vc?.presentedViewController {
                return UIWindow.getVisibleViewControllerFrom(pvc)
            } else {
                return vc
            }
        }
    }
}

func getTopViewController() -> UIViewController? {
    let appDelegate = UIApplication.sharedApplication().delegate
    if let window = appDelegate!.window {
        return window?.visibleViewController
    }
    return nil
} 
```

在任何地方使用它：

```
if let topVC = getTopViewController() {

} 
```

感谢@zirinisp。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-11-13T16:57:35.843

关于上面的 NSNotificationCenter 帖子（抱歉找不到在哪里发表评论...）

以防有些人收到 -[NSConcreteNotification allKeys] 错误。改变这个：

```
-(void)didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

对此：

```
-(void)didReceiveRemoteNotification:(NSNotification*)notif {
NSDictionary *dict = notif.userInfo;
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-04-23T19:57:20.323

这对我有用。我有许多具有不同控制器的目标，因此以前的答案似乎不起作用。

首先，您希望在 AppDelegate 类中使用它：

```
var window: UIWindow? 
```

然后，在你的功能

```
let navigationController = window?.rootViewController as? UINavigationController
if let activeController = navigationController!.visibleViewController {
    if activeController.isKindOfClass( MyViewController )  {
        println("I have found my controller!")    
   }
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-11-23T09:51:09.020

这是我尝试过的最好的方法。如果它应该帮助任何人......

```
+ (UIViewController*) topMostController
{
    UIViewController *topController = [UIApplication sharedApplication].keyWindow.rootViewController;

    while (topController.presentedViewController) {
        topController = topController.presentedViewController;
    }

    return topController;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-08-03T00:58:31.187

```
extension UIApplication {
    /// The top most view controller
    static var topMostViewController: UIViewController? {
        return UIApplication.shared.keyWindow?.rootViewController?.visibleViewController
    }
}

extension UIViewController {
    /// The visible view controller from a given view controller
    var visibleViewController: UIViewController? {
        if let navigationController = self as? UINavigationController {
            return navigationController.topViewController?.visibleViewController
        } else if let tabBarController = self as? UITabBarController {
            return tabBarController.selectedViewController?.visibleViewController
        } else if let presentedViewController = presentedViewController {
            return presentedViewController.visibleViewController
        } else {
            return self
        }
    }
} 
```

有了这个，你可以很容易地像这样获得顶部的后视图控制器

```
let viewController = UIApplication.topMostViewController 
```

需要注意的一点是，如果当前正在显示 UIAlertController，`UIApplication.topMostViewController`将返回一个`UIAlertController`.

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-08-30T14:24:25.090

Swift 2.0 版 Jungledev 的回答

```
func getTopViewController() -> UIViewController {
    var topViewController = UIApplication.sharedApplication().delegate!.window!!.rootViewController!
    while (topViewController.presentedViewController != nil) {
        topViewController = topViewController.presentedViewController!
    }
    return topViewController
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-11-28T10:08:55.687

`UIApplication`我为with`visibleViewControllers`属性创建了一个类别。主要思想很简单。我在. `viewDidAppear`_ 在方法中 viewController 被添加到堆栈中。在方法 viewController 从堆栈中删除。用于代替存储弱的引用。这种方法适用于任何 viewControllers 层次结构。`viewDidDisappear``UIViewController``viewDidAppear``viewDidDisappear``NSPointerArray``NSArray``UIViewController`

**UIApplication+VisibleViewControllers.h**

```
#import <UIKit/UIKit.h>

@interface UIApplication (VisibleViewControllers)

@property (nonatomic, readonly) NSArray<__kindof UIViewController *> *visibleViewControllers;

@end 
```

**UIApplication+VisibleViewControllers.m**

```
#import "UIApplication+VisibleViewControllers.h"
#import <objc/runtime.h>

@interface UIApplication ()

@property (nonatomic, readonly) NSPointerArray *visibleViewControllersPointers;

@end

@implementation UIApplication (VisibleViewControllers)

- (NSArray<__kindof UIViewController *> *)visibleViewControllers {
    return self.visibleViewControllersPointers.allObjects;
}

- (NSPointerArray *)visibleViewControllersPointers {
    NSPointerArray *pointers = objc_getAssociatedObject(self, @selector(visibleViewControllersPointers));
    if (!pointers) {
        pointers = [NSPointerArray weakObjectsPointerArray];
        objc_setAssociatedObject(self, @selector(visibleViewControllersPointers), pointers, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }
    return pointers;
}

@end

@implementation UIViewController (UIApplication_VisibleViewControllers)

+ (void)swizzleMethodWithOriginalSelector:(SEL)originalSelector swizzledSelector:(SEL)swizzledSelector {
    Method originalMethod = class_getInstanceMethod(self, originalSelector);
    Method swizzledMethod = class_getInstanceMethod(self, swizzledSelector);
    BOOL didAddMethod = class_addMethod(self, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod));
    if (didAddMethod) {
        class_replaceMethod(self, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod));
    } else {
        method_exchangeImplementations(originalMethod, swizzledMethod);
    }
}

+ (void)load {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        [self swizzleMethodWithOriginalSelector:@selector(viewDidAppear:)
                               swizzledSelector:@selector(uiapplication_visibleviewcontrollers_viewDidAppear:)];
        [self swizzleMethodWithOriginalSelector:@selector(viewDidDisappear:)
                               swizzledSelector:@selector(uiapplication_visibleviewcontrollers_viewDidDisappear:)];
    });
}

- (void)uiapplication_visibleviewcontrollers_viewDidAppear:(BOOL)animated {
    [[UIApplication sharedApplication].visibleViewControllersPointers addPointer:(__bridge void * _Nullable)self];
    [self uiapplication_visibleviewcontrollers_viewDidAppear:animated];
}

- (void)uiapplication_visibleviewcontrollers_viewDidDisappear:(BOOL)animated {
    NSPointerArray *pointers = [UIApplication sharedApplication].visibleViewControllersPointers;
    for (int i = 0; i < pointers.count; i++) {
        UIViewController *viewController = [pointers pointerAtIndex:i];
        if ([viewController isEqual:self]) {
            [pointers removePointerAtIndex:i];
            break;
        }
    }
    [self uiapplication_visibleviewcontrollers_viewDidDisappear:animated];
}

@end 
```

[https://gist.github.com/medvedzzz/e6287b99011f2437ac0beb5a72a897f0](https://gist.github.com/medvedzzz/e6287b99011f2437ac0beb5a72a897f0)

**斯威夫特 3 版本**

**UIApplication+VisibleViewControllers.swift**

```
import UIKit

extension UIApplication {

    private struct AssociatedObjectsKeys {
        static var visibleViewControllersPointers = "UIApplication_visibleViewControllersPointers"
    }

    fileprivate var visibleViewControllersPointers: NSPointerArray {
        var pointers = objc_getAssociatedObject(self, &AssociatedObjectsKeys.visibleViewControllersPointers) as! NSPointerArray?
        if (pointers == nil) {
            pointers = NSPointerArray.weakObjects()
            objc_setAssociatedObject(self, &AssociatedObjectsKeys.visibleViewControllersPointers, pointers, objc_AssociationPolicy.OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
        return pointers!
    }

    var visibleViewControllers: [UIViewController] {
        return visibleViewControllersPointers.allObjects as! [UIViewController]
    }
}

extension UIViewController {

    private static func swizzleFunc(withOriginalSelector originalSelector: Selector, swizzledSelector: Selector) {
        let originalMethod = class_getInstanceMethod(self, originalSelector)
        let swizzledMethod = class_getInstanceMethod(self, swizzledSelector)
        let didAddMethod = class_addMethod(self, originalSelector, method_getImplementation(swizzledMethod), method_getTypeEncoding(swizzledMethod))
        if didAddMethod {
            class_replaceMethod(self, swizzledSelector, method_getImplementation(originalMethod), method_getTypeEncoding(originalMethod))
        } else {
            method_exchangeImplementations(originalMethod, swizzledMethod);
        }
    }

    override open class func initialize() {
        if self != UIViewController.self {
            return
        }
        let swizzlingClosure: () = {
            UIViewController.swizzleFunc(withOriginalSelector: #selector(UIViewController.viewDidAppear(_:)),
                                         swizzledSelector: #selector(uiapplication_visibleviewcontrollers_viewDidAppear(_:)))
            UIViewController.swizzleFunc(withOriginalSelector: #selector(UIViewController.viewDidDisappear(_:)),
                                         swizzledSelector: #selector(uiapplication_visibleviewcontrollers_viewDidDisappear(_:)))
        }()
        swizzlingClosure
    }

    @objc private func uiapplication_visibleviewcontrollers_viewDidAppear(_ animated: Bool) {
        UIApplication.shared.visibleViewControllersPointers.addPointer(Unmanaged.passUnretained(self).toOpaque())
        uiapplication_visibleviewcontrollers_viewDidAppear(animated)
    }

    @objc private func uiapplication_visibleviewcontrollers_viewDidDisappear(_ animated: Bool) {
        let pointers = UIApplication.shared.visibleViewControllersPointers
        for i in 0..<pointers.count {
            if let pointer = pointers.pointer(at: i) {
                let viewController = Unmanaged<AnyObject>.fromOpaque(pointer).takeUnretainedValue() as? UIViewController
                if viewController.isEqual(self) {
                    pointers.removePointer(at: i)
                    break
                }
            }
        }
        uiapplication_visibleviewcontrollers_viewDidDisappear(animated)
    }
} 
```

[https://gist.github.com/medvedzzz/ee6f4071639d987793977dba04e11399](https://gist.github.com/medvedzzz/ee6f4071639d987793977dba04e11399)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-04-20T11:46:45.237

如果您正在运行带有调试或发布的应用程序，请务必检查您的构建配置。

**重要提示：如果不在调试模式下运行您的应用程序，您将无法对其进行测试**

这是我的解决方案**

# python - 如何使用 BeautifulSoup 从 Python 中的子组头之间提取数据？

> ID：11637711
> 
> 赞同：0
> 
> 时间：2012-07-24T19:10:06.247
> 
> 标签：python, html, tags, beautifulsoup

我正在使用 BeautifulSoup 从表中提取数据。此表列出了转入/转出子组负责人下的球员，所有这些人都分组在指定他们要去的足球队的“组负责人”下。我想遍历每个团队，然后遍历每个子头（转入/转出），以便我可以根据球员是否在转入或转出中列出来指定组头（团队）为传入或传出团队. 这是html：

```
<tr class="group-head">
    <th colspan="4"><h3><a href="/teams/england/arsenal-fc/">Arsenal</a></h3></th>
</tr>

    <tr class="subgroup-head">
        <th colspan="4">Transfers in (&euro;25.5M)</th>
    </tr>

    <tr class="odd">
        <td class="date"><span class='timestamp' data-value='1341093600' data-    format='mm/dd/yy'>07/01/12</span></td>
    <td class="player"><span class="flag_16 left_16 france_16_left"></span>O. Giroud</td>
    <td class="team">Montpellier</td>

    <td class="type">&euro; 12M</td>
  </tr> 
```

我会遍历 subgroup-head 类来获取数据，但是 tr 标签以每个子组结尾，所以我无法查看标签下面的数据。我试图得到的输出是一个具有这种格式的字典：

{玩家：[致团队、来自团队、价格、日期]}

我如何抓取html？

更新：

我开始了一个循环来遍历兄弟姐妹，因为每个兄弟姐妹都被两个连续的隔开，尽管它仍然有问题。有没有更简单的方法？我想确保它不会捕获团队或其他子组：

```
teams = table.findAll('tr', {'group-head'})
inout = table.findAll('tr', {'subgroup-head'})

for team in teams:
  for direction in inout:
    details = direction.next_sibling.next_sibling
    print details.text.encode('utf-8')
    while details.next_sibling.next_sibling:
      if details.next_sibling.next_sibling not in inout:
        if details.next_sibling.next_sibling not in teams:
          print 'NEXT ONE'
          details = details.next_sibling.next_sibling
          print details.text.encode('utf-8')
        else:
          break 
```

它似乎不想超越一线队，并且添加额外的休息时间不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:39:43.240

您可以`<tr>`使用 class 定位标签`subgroup-head`，然后使用[`next_sibling`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#next-sibling-and-previous-sibling)运算符获取下一行。然后深入了解元素并获取您需要的信息。

```
soup = BeautifulSoup(html)
subgrouphead = soup.find('tr', 'subgroup-head')
details = subgrouphead.next_sibling.next_sibling 
```

并从这里获取您需要的信息。

# ruby - 在 Net::HTTP 变量中展开单引号？

> ID：11637716
> 
> 赞同：0
> 
> 时间：2012-07-24T19:10:26.143
> 
> 标签：ruby

我正在使用 Net::HTTP 从带有自定义标头的 Google API 获取请求：

```
req = Net::HTTP::Get.new(uri.request_uri, {'Authorization' => 'GoogleLogin auth=#{auth}'}) 
```

这`#{auth}`是一个每次运行程序都会改变的变量，所以我用它做了一个变量，但是单引号并没有扩展它。我无法将单引号更改为双引号，因为 Google 只接受带有单引号的标题。

有什么方法可以扩展变量但保留单引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:15:15.387

> 但是，我不能将单引号更改为双引号，因为 google 只接受带有单引号的标题。

很难相信。

无论如何，尝试[`Kernel%sprintf`](http://ruby-doc.org/core-1.8.7/Kernel.html#method-i-sprintf)或它的较短版本只是`str % [arguments..]`. 我会帮你的。

# asp.net - 在连续项目中构建具有不同颜色的颜色矩阵的最佳方法

> ID：11637718
> 
> 赞同：2
> 
> 时间：2012-07-24T19:10:31.010
> 
> 标签：asp.net, .net, algorithm, c#-4.0

我有一个有趣的案例，我在数据库中有一个表格，我以十六进制格式存储一些颜色。我对该表进行查询并从数据库中获取具有不同颜色的列表。我需要以“矩阵样式”向用户显示查询结果，例如 8 行和 10 列。但结果矩阵在连续项矩阵项中不应具有相同或相似的色调。最好的方法是什么？

![结果示例](../Images/b2f591f7cb499f5ea65caab6ce96399d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T23:03:45.823

您正在对平面图进行[顶点着色](http://en.wikipedia.org/wiki/Graph_coloring#Vertex_coloring)。好消息是，由于您的图形是平面图，您实际上只需要四种颜色，坏消息是找到颜色并不总是那么容易。但是，如果您的图表总是那么大，那么带有回溯的递归解决方案可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:45:36.997

你可以从一个非常简单的算法开始：

1.  随机放置所有颜色
2.  查找错误条目（即颜色与邻居没有太大差异的条目）
3.  将此条目与另一个随机位置交换（但仅当交换使事情变得更好时）
4.  重复几次

# graph - 如何在 Graphviz 中添加弹出注释？

> ID：11637723
> 
> 赞同：1
> 
> 时间：2012-07-24T19:10:45.467
> 
> 标签：graph, graphviz

我是一个学习使用graphviz的新手。

当您在图形上移动光标时，是否可以生成交互式弹出注释？例如，悬停一个节点/边缘将弹出消息框，显示有关它的更多信息。

如果是这样，怎么办？

十分感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:46:21.500

根据[输出格式](http://www.graphviz.org/docs/outputs/)，有一些可能性：

*   您可以创建 png 图像和[图像映射](http://www.graphviz.org/docs/outputs/cmap/)并将其用作 html 页面。html 和 javascript 的世界提供了无限的可能性来进行交互、使用弹出消息等。
*   如果您更喜欢 svg，一些信息已经包含在输出中`<title>`，同样，如果在浏览器中提供，javascript 可能证明对丰富输出有用（不确定是否可以将现有 svg 与[raphaeljs](http://raphaeljs.com/)一起使用，但它确实显示得很好svg + javascript有什么可能）。
*   您可以简单地让 graphviz 呈现所有节点的位置并解析它的输出以将其呈现在您的自定义应用程序中

# php - mod_rewrite 规则

> ID：11637724
> 
> 赞同：2
> 
> 时间：2012-07-24T19:10:49.180
> 
> 标签：php, html, apache, mod-rewrite, webserver

您好，我正在尝试设置我的 URL 设置，并且我已经提出了一些要求，但我的最后一个问题如下：

例如，如果用户尝试访问`site.com/foo.php`，他们应该被重定向到`site.com/foo`；相反，如果用户输入`site.com/foo`，他们不应该被重定向，但请求的页面应该是`site.com/foo.php`.

这是我的.htacces：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^(.*)\.html$
RewriteRule ^.*\.html$ %1.php [L]  

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

AddType application/x-httpd-php .htm .html

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php

Redirect /anmeldung http://www.site.com/register
Redirect /anmeldung.htm http://www.site.com/register
Redirect /anmeldung.html http://www.site.com/register
Redirect /anmeldung.php http://www.site.com/register

Redirect /registierung http://www.site.com/register
Redirect /registierung.htm http://www.site.com/register
Redirect /registierung.html http://www.site.com/register
Redirect /registierung.php http://www.site.com/register

Redirect /register.htm http://www.site.com/register
Redirect /register.html http://www.site.com/register 
```

如果有人可以帮助我，我将不胜感激。非常感谢。

**更新：**

完整的 htaccess：

```
RewriteEngine On

EewriteRule ^(.*)\.(php|html)$ /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ /$1.php [L]

Redirect /anmeldung http://www.site.com/register
Redirect /anmeldung.htm http://www.site.com/register
Redirect /anmeldung.html http://www.site.com/register
Redirect /anmeldung.php http://www.site.com/register
Redirect /registierung http://www.site.com/register
Redirect /registierung.htm http://www.site.com/register
Redirect /registierung.html http://www.site.com/register
Redirect /registierung.php http://www.site.com/register 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:22:57.277

根据我上面的假设评论，您应该尝试

```
# This rewrites all incoming request to *.php or *.html to remove the extension. NOte the R=301 which give header indicating to the browser/spider that the resource has been relocated. The L indicates this is the last rule to be processed before sending headers to browser (which will start the process all over again) This rule MUST be first
RewriteRule ^(.*)\.(php|html)$ /$1 [R=301,L]

#This set of conditions is only applicable if the request is not a directory, is not itself a file, and has a similarly name file with .php extension.  Here we do not perform a URL rewrite (i.e. [R]), but just pass this to the .php file as the last htaccess rule executed.
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ /$1.php [L] 
```

# ruby-on-rails - 路由错误尝试运行 rake 路由

> ID：11637726
> 
> 赞同：0
> 
> 时间：2012-07-24T19:10:57.793
> 
> 标签：ruby-on-rails, ruby, routing, devise, controller

我收到了 2 条不同的消息，但出现了同样的错误，我正在为用户使用设计……这是我的 routes.rb

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :users 
```

就像我的 routes.rb 一样，我得到了下一个错误

```
uninitialized constant UsersController
Try running rake routes for more information on available routes. 
```

但是如果删除“资源：用户”，我会收到以下错误

```
No route matches [GET] "/users/27" 
```

我把我的用户控制器

```
class UsersController < ApplicationController

def new
     @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        redirect_to user_session_path
    else
    redirect_to new_user_session_path
end

end

def show
    @user = User.find(params[:id])
    #redirect_to @user
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:36:57.843

您的用户模型的文件名必须`users_controller.rb`位于且位于控制器文件夹中。

# c# - 如何在我的 Html.TextBoxFor() 中显示可由用户编辑的默认值？

> ID：11637727
> 
> 赞同：0
> 
> 时间：2012-07-24T19:11:00.793
> 
> 标签：c#, asp.net-mvc-3

我正在使用 TextBoxFor 来显示可编辑字段。我需要此字段显示“150”的值，但允许更改该值。

我试过使用`@Html.TextBoxFor(m => m.MembershipDues, new { @Value = "150" })`，但这对我不起作用。

**这是我的模型的字段：**

```
[Required]
    [DataType(DataType.Text)]
    public decimal MonthlyPayment { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public decimal MaintenanceFees { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public decimal MembershipDues { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public decimal ExchangeFees { get; set; }

    [Required]
    public string Duration { get; set; }

    public decimal AnnualPayment { get; set; }
    public decimal AnnualMaintenance { get; set; }
    public decimal AnnualTotal { get; set; }
    public decimal TenYearPayment { get; set; }
    public decimal TenYearMaintenancePercentage { get; set; }
    public decimal TenYearMembershipAndExchange { get; set; }
    public decimal TenYearTotal { get; set; }
    public decimal AnnualVacationCost { get; set; } 
```

**这是我的行动**

```
 [OutputCache(Duration = 60)]
    public ActionResult CalculationView()
    {         
        return View();
    }

    [HttpPost]
    [OutputCache(Duration = 60)]
    public ActionResult Index(CalculaterModel cm)
    {
        if (ModelState.IsValid)
        {
            if (cm.Duration == "Annual")
                cm.AnnualMaintenance = cm.CalculateMaintenanceFeesAnnually(cm.MaintenanceFees);
            else if (cm.Duration == "Monthly")
                cm.AnnualMaintenance = cm.CalculateMaintenanceFeesMonthly(cm.MaintenanceFees);

            cm.AnnualPayment = cm.MonthlyPayment * 12;
            cm.AnnualTotal = cm.AnnualPayment + cm.AnnualMaintenance;
            cm.TenYearPayment = cm.AnnualPayment * 10;

            decimal percentage = .08m;
            decimal cost;
            int i = 1;
            decimal rate = cm.AnnualMaintenance;
            while (i <= 10)
            {
                cost = rate * percentage;
                rate = cost + rate;
                cm.TenYearMaintenancePercentage = cm.TenYearMaintenancePercentage + rate;
                i++;
            }
            decimal MDF = cm.MembershipDues + cm.ExchangeFees;
            cm.TenYearMembershipAndExchange = MDF * 10;
            cm.TenYearTotal = cm.TenYearMembershipAndExchange + cm.TenYearMaintenancePercentage + cm.TenYearPayment;
            cm.AnnualVacationCost = cm.TenYearTotal / 10;
            return View(cm);
        }
        return View();
    } 
```

**我需要我的文本框显示“150”并且可以编辑。** 任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:16:57.913

有时会出现一个令人困惑的问题，即您没有在视图中指定模型，即使使用 Razor 语法设置默认值，您也不会设置默认值。

改变

```
return View(); 
```

和

```
var cm = new CalculaterModel();
return View(cm); 
```

看看这是否有效。

# sql - 在某个数据库的表中搜索具有特定值的列名

> ID：11637733
> 
> 赞同：3
> 
> 时间：2012-07-24T19:11:33.683
> 
> 标签：sql, database-schema

有什么方法可以搜索具有特定值的列，我试图通过数据库中的所有表查找？例如我有

```
SELECT t.name AS table_name,
SCHEMA_NAME(schema_id) AS schema_name,
c.name AS column_name
FROM sys.tables AS t
INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID
WHERE c.name LIKE '%VersionID%'
ORDER BY schema_name, table_name; 
```

我从搜索中找到的。它为我提供了“versionID”列存在的表名，但我如何搜索以返回例如该列值为“35”的表名。

提前致谢，

* * *

我很抱歉，也许我的要求并不清楚。也许这不能在 SQL 中完成，因为我没有通过我的研究发现任何东西。但让我澄清一下。

运行此脚本

```
SELECT t.name AS table_name,
SCHEMA_NAME(schema_id) AS schema_name,
c.name AS column_name
FROM sys.tables AS t
INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID
WHERE c.name LIKE '%factor%'
--and table_name in (Select name from sysobjects where ratingVersionID = 35)
ORDER BY schema_name, table_name; 
```

将返回此例如： ![查询结果](../Images/b1ab73d3a22a5513f9eb58960999a456.png)

但是假设“AutoAge_Factor”表中的“因子”列没有任何与“35”匹配的记录。我怎样才能从返回的结果中消除该表。但我真的更喜欢这样的结果格式，因为我想将此返回用作循环并在循环中执行一些其他操作。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:15:11.080

对您的 sql 的这种修改将生成更多您可以运行的 SQL

```
SELECT 
    'select '''+SCHEMA_NAME(schema_id) +'.'+t.name + ''', '+c.name + ' from ' 
      + SCHEMA_NAME(schema_id) +'.' + t.name
      + ' where ' + c.name + ' = 35'

FROM sys.tables AS t 
INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID 
WHERE c.name LIKE '%ID%' 
ORDER BY schema_name(schema_id), t.name 
```

如有必要，您可以使 SQL 自动运行，但其语法取决于您的平台。或者，将结果复制到您的查询工具中并运行它们，如果足够的话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:23:32.700

> select s.name, c.name from sys.columns c inner join sys.tables s on s.object_id = c.object_id where c.name like'%35%'

这将为您提供具有 35 的列和关联的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:11:57.297

> 声明@tableName varchar(100)，@colName varchar(100) 声明@sqlStatement nvarchar(100)
> 
> 为 select s.name 声明 tablelist 游标，c.name from sys.columns c inner join sys.tables s on s.object_id = c.object_id where c.name like'%YourSearchCondtion%' OPEN tablelist FETCH NEXT FROM tablelist into @tableName , @colName
> 
> 而@@FETCH_STATUS = 0 BEGIN
> 
> SELECT @sqlStatement = 'SELECT ' + @colName + ', * FROM ' + @tableName + ' WHERE ' + @colName + ' NOT LIKE ''%35%'''
> 
> exec sp_executesql @sqlStatement
> 
> -- 在这里你可以得到你不想要的表并添加到临时表中.. PRINT CAST(@@ROWCOUNT AS VARCHAR)
> 
> FETCH NEXT FROM tablelist INTO @tableName, @colName END
> 
> 关闭表列表 DEALLOCATE 表列表 GO

# apache-flex - 纹理作为 Flex 中 Sprites 的背景

> ID：11637739
> 
> 赞同：0
> 
> 时间：2012-07-24T19:12:12.550
> 
> 标签：apache-flex, sprite, textures

就像我可以用特定颜色填充 Sprite 一样，有没有办法使用我自己的纹理图像作为 Flex 中 Sprites 的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:38:57.593

您可以使用 Graphics.beginBitmapFill() 方法，然后使用标准方法绘制形状。不过还有其他方法。例如，我在 Flex 中使用 BitmapFill 实例来创建“方格背景”：

```
private static function getCheckeredBitmapData() : BitmapData {
    if (_checkeredBitmapData == null) {
        _checkeredBitmapData = new BitmapData(16, 16, false, 0xCCCCCC);
        _checkeredBitmapData.fillRect(new Rectangle(0, 0, 8, 8), 0xFFFFFF);
        _checkeredBitmapData.fillRect(new Rectangle(8, 8, 16, 16), 0xFFFFFF);
    }
    return _checkeredBitmapData;
} 
```

...

```
<s:fill>
    <s:BitmapFill source="{getCheckeredBitmapData()}" fillMode="repeat"/>
</s:fill> 
```

# ruby-on-rails - Rails Active Record 选择父子节点作为一个结果

> ID：11637741
> 
> 赞同：6
> 
> 时间：2012-07-24T19:12:35.573
> 
> 标签：ruby-on-rails, activerecord, nested-attributes

我的申请中有父/子关系

```
class Polling
 has_many :alerts, :dependent => :destroy

class Alert
 belongs_to :polling 
```

在我的警报索引页面上，我需要显示来自每个父级的一些数据，这会导致两个查询

```
Alert Load (6.1ms)  SELECT * FROM (SELECT * FROM "ALERTS" INNER JOIN "POLLINGS" ON "POLLINGS"."ID" = "ALERTS"."POLLING_ID" ORDER BY "ALERTS"."ID" DESC) WHERE ROWNUM <= 1
Polling Load (1.8ms)  SELECT "POLLINGS".* FROM "POLLINGS" WHERE "POLLINGS"."ID" = 10113 AND ROWNUM <= 1 
```

显然，这使得页面加载时间变得非常可怕，因为它必须遍历每一个并拉取父对象。

我尝试了一些事情，例如

```
> Alert.joins(:polling).where(...)
> Alert.includes(:polling).where(...)
> Alert.joins(:polling).select('*').where(...) 
```

每次访问索引页面时都会收到两个不同的查询。一个用于每个警报，然后另一个用于获取其父数据。我怎样才能在一行上做到这一点，以便当我拉警报时，我也能得到它们相关的父数据？似乎没有办法从另一端解决它，因为如果我这样做，`Pollings.where(...)`它不会把孩子们作为一个群体来抓。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:06:49.030

如果你想详细指定 SQL，你总是可以尝试`find`传递 :include、:joins、:where 等方法，`includes`或者`joins`当你尝试访问数据但 activerecord 的行为不同时做同样的事情。例如，以下 3 种方式设置对象数组，但它们是不同的。

[1]

```
alerts = Alert.joins(:polling) 
```

[2]

```
alerts = Alert.includes(:polling) 
```

[3]

```
alerts = Alert.find(:all, :includes => :polling, :joins => :polling) 
```

当你这样做时

```
alerts.each do |alert|
  alert.pollings.each do |polling|
    p polling
  end
end 
```

您可以看到 activerecord 如何尝试从数据库或缓存中获取数据。我相信 [3] 方式在其他人抛出多个查询时只抛出一个查询。

# javascript - 如何从 JavaScript 访问 Django 登录用户信息？

> ID：11637743
> 
> 赞同：0
> 
> 时间：2012-07-24T19:12:38.420
> 
> 标签：javascript, django, google-chrome-extension, session-cookies, django-sessions

我正在为我的 Django 网站制作一个 chrome 扩展（带有链接提交功能）。我正在使用[django-tastypie](https://github.com/toastdriven/django-tastypie)从 JavaScript 发布链接。但是，我不知道如何从 JavaScript 访问 django 会话以确定链接的提交者。使用`console.log(document.cookie)`听起来不太可能，因为 document.cookie 显然是从当前页面访问 cookie，而不是从我的 django 驱动的网站访问 cookie。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:37.723

据我所知，有两种方法可以做到这一点。

1.  在您的 Django 应用服务器端实现 oAuth，并使用[Javascript oAuth 方法](http://derek.io/blog/2010/how-to-secure-oauth-in-javascript/)来验证您的用户。如果您还没有提供 oAuth，这对您来说可能需要做很多工作，所以这可能是个坏主意。

2.  将 iframe 与您网站中的页面一起使用。将内容脚本注入 iframe 并从中提取数据。您可能必须设置特定端点。

在您的[清单](http://code.google.com/chrome/extensions/manifest.html)中使用[匹配模式](http://code.google.com/chrome/extensions/match_patterns.html)：

```
{
  ...,
  "content_scripts": [
    {
      "matches": ["http://yoursite.com/api/extension"],
      "js": ["content_script.js"],
      "all_frames": true
    }
  ],
  ...
} 
```

由另一个内容脚本加载到 iframe 中的端点可能如下所示：

```
...
<div id="user_info">joe_user</div>
... 
```

然后您的脚本将拉出`textContent`#user_info div 并将其发送到后台页面供您使用：

```
var elem = document.querySelector('#user_info');
chrome.extension.sendMessage({
  text: elem.textContent
}); 
```

有关消息传递的更多信息，请参阅 Google 的[消息传递文档](http://code.google.com/chrome/extensions/messaging.html)。

如果您只需要用户信息，我认为这应该对您有用。不过，我不会发送任何这样的敏感信息。

# ruby-on-rails - 导轨、回形针；验证附件

> ID：11637754
> 
> 赞同：0
> 
> 时间：2012-07-24T19:13:13.007
> 
> 标签：ruby-on-rails, paperclip, paperclip-validation

我想验证回形针附件的文件内容（https://github.com/thoughtbot/paperclip）。

我的模型：

```
class PackageArchive < ActiveRecord::Base
  attr_accessible :package
  has_attached_file :package

  validates_attachment :package,
            :presence => true
  validate :open

  def open
    Rails.logger.debug "####" + original_filename.inspect
    file_content = `cat "#{package.path}"`
  end
end 
```

“cat”中止并显示错误消息“没有这样的文件或目录”。有没有办法获得正确的文件名？

# wordpress - 没有插件的 WordPress 中的 Google Map API？

> ID：11637755
> 
> 赞同：4
> 
> 时间：2012-07-24T19:13:14.090
> 
> 标签：wordpress

我希望使用 google maps api 简单地将 google map 添加到我在 WordPress 中的一个页面中。有没有一种简单的方法可以简单地将“Hello, World”谷歌地图代码复制并粘贴到某处以将地图显示在页面上？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T19:34:48.267

是的，不需要这样的插件。首先，您可以在 header.php 中包含 Google 地图脚本，或者您可以将其加入队列；

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script> 
```

然后我通常在 header.php 中添加以下内容 - 这会将条件代码添加到仅包含地图的页面的标签（在本例中为 374 页）；

```
<body <?php if (is_page(374)) { echo 'onload="initialize()" onunload="GUnload()"'; } ?>> 
```

然后我会为联系页面创建一个自定义模板（因为这是地图通常所在的页面），并且在该页面的模板中包含如下内容。是的，代码示例可能有点长，但我只是给你一个真实的例子，它包含一个动画标记，可以点击它来显示你客户的地址。您可以更改内联尺寸以适合您的设计，还可以偏移地图，这样标记就不会正好位于地图中间。

```
 <div id="contact-content">

            <script type="text/javascript">
            function initialize() {

                var leeds = new google.maps.LatLng(53.80583, -1.548903);

                var firstLatlng = new google.maps.LatLng(53.80583, -1.548903);              

                var firstOptions = {
                    zoom: 16,
                    center: firstLatlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP 
                };

                var map = new google.maps.Map(document.getElementById("map_leeds"), firstOptions);

                firstmarker = new google.maps.Marker({
                    map:map,
                    draggable:false,
                    animation: google.maps.Animation.DROP,
                    title: 'Your Client',
                    position: leeds
                });

                var contentString1 = '<p>The Address<br />Of your client<br />in<br />here</p>';

                var infowindow1 = new google.maps.InfoWindow({
                    content: contentString1
                });

                google.maps.event.addListener(firstmarker, 'click', function() {
                    infowindow1.open(map,firstmarker);
                });

            }
            </script>

            <div class="map">

                <div id="map_leeds" style="width: 600px; height: 600px"></div>  

            </div>

        </div> 
```

如果其他人以不同的、更好的方式来做，那么我很想看到它，但我已经在很多网站上使用过它，而且效果非常好。

# c++ - 为什么删除指向指针向量的指针会导致指针无效？

> ID：11637756
> 
> 赞同：3
> 
> 时间：2012-07-24T19:13:28.927
> 
> 标签：c++, destructor, delete-operator

**编辑**：谢谢你的回答！我`tellSomething`用`std::string`返回类型声明了该方法，而它应该是`void`！

我把自己绊倒并责怪可怜的无罪`delete`操作员:)！

* * *

让我们考虑一个指向动态分配的指针，`vector`其中包含指向动态分配对象的指针：

```
// Create the vector of pointers
std::vector<A *>* v = new std::vector<A *>;

// Create two objects
A *a1 = new A;
A *a2 = new A;

// Populate the vector
v->push_back(a1);
v->push_back(a2);

// Delete the vector
delete v;

// Try accessing one of the objects
a1->tellSomething();    --> // Segmentation fault 
```

正如预期的那样，如果我删除`vector`，`delete`则不会调用包含的对象上的 （我还验证了`A::~A()`在上面的代码中从未调用过），但是，最后一条指令给出了分段错误。

我期望的`delete v`是两件事：

*   每个包含的对象的析构函数被调用
*   容器被释放

但是在这种情况下，包含的对象是指针，所以没有调用析构函数。

此外，`a1`不在`NULL`列表的末尾。

那么，为什么会出现分段错误？

* * *

此处的完整示例：http: [//ideone.com/r8YC0](http://ideone.com/r8YC0)。

* * *

注意：我通常不将原始指针与 STL 容器一起使用，请将此代码视为纯理论示例，以帮助我理解`delete v`指令的逻辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T19:16:59.997

你得到的崩溃是完全无关的；您声明`tellSomething`为返回 a `std::string`，但您从不返回任何内容，因此您进入未定义的行为领域；程序在释放向量后崩溃的事实是纯粹的运气，即使在第一次调用`tellSomething`.

[解决这个问题](http://ideone.com/Vrtgd)可以让你的程序运行良好（尽管你正在泄漏`a1`和`a2`）。

顺便说一句，这会教你打开所有警告：使用`-Wall`该代码会给你一个关于这个潜在问题的明确警告：

```
matteo@teolapmint ~/cpp $ g++ -Wall testwarns.cpp 
testwarns.cpp: In member function ‘std::string A::tellSomething()’:
testwarns.cpp:12:5: warning: no return statement in function returning non-void [-Wreturn-type] 
```

（仅作记录：我个人建议使用 编译`-Wall -Wextra -ansi -pedantic`，通常一个警告可以为您节省大量调试时间）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T19:16:46.440

崩溃来自尝试调用无效的`std::string`析构函数：

```
std::string tellSomething() {
    std::cout << "A!" << std::endl;
} 
```

调用`a1->tellSomething();`告诉运行时在作用域中期待一个自动存储`std::string`，然后它会尝试销毁它。但这是无效的。

从技术上讲，这是**未定义的行为**，因为您没有返回您承诺的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T19:17:11.213

删除向量不会删除向量元素。您遇到了一个完全不同的问题，它是由 tellSomething() 在指定返回字符串时未能返回值引起的。

[http://ideone.com/Jo9zi](http://ideone.com/Jo9zi)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T19:17:15.333

它崩溃是因为在方法中的链接代码中`A::tellSomething`你应该返回`std::string`你没有做的事情。与删除无关`v`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-24T19:16:23.837

您的`tellSomething`方法缺少返回值。

向该方法添加 a`return "";`可以使您的代码运行良好，尽管存在内存泄漏。

# css - 页面中心的页眉和页脚

> ID：11637758
> 
> 赞同：-3
> 
> 时间：2012-07-24T19:13:38.677
> 
> 标签：css

任何人都可以附加此代码以在中心制作页眉和页脚，例如。左右边距应该相同

```
.newheader
{
    background:#000;
    height:30px;
    left:0;
    position:fixed;
    width:100%;
    top:0;
}
.newfooter
{
    background:#000;
    bottom:0;
    height:30px;
    left:0;
    position:fixed;
    width:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:19:57.830

将元素放置在页面中间的标准方法是定义一个小于全宽的宽度，然后使用 auto 设置它的边距。

例如

```
.newheader {
    width:960px; /* less than 100% since 100% has no margin */
    margin : 0 auto /* top and bottom margin = 0 left and right auto*/
} 
```

**更新示例**

这里有一个基于页面的示例链接。[关联](http://jsfiddle.net/VakYX/2/)

全屏版[链接](http://jsfiddle.net/VakYX/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:16:21.543

您是否只是将页眉和页脚中的内容居中 - 就像文本一样？

```
.newheader                /* remove width: 100% */
{
    text-align: center;   /* this line */
    background:#000;
    height:30px;
    left:0;          /* this is setting the div all the way to the left */
    position:fixed;             
    top:0;
} 
```

试试这个

```
.newheader
{
    background:#000;
    height:30px;    
    position:relative;       
}

.header_container
{
    top: 0px
    position: fixed;
    text-align: center;
    width: 100%;
} 
```

将标头放入容器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:25:25.237

我认为您只需要同时添加`text-align:center;`newHeader 和 newFooter。由于您已经处于 100% 的宽度，因此不会有边距，因为它将占用 100% 的浏览器。

```
<style type="text/css">
.newheader {
    background:#FFF;
    top:0;
    height:30px;
    position:fixed;
    width:100%;
    text-align:center;
}

.newfooter {
    background:#CCC;
    bottom:0;
    height:30px;
    position:fixed;
    width:100%;
    text-align:center;
}
</style>

<div class='newHeader'>
   Test Header
</div>
<div>
    <p>Content</p>
</div>
<div class='newFooter'>
   Test Footer
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:51:14.100

根据对原始帖子的评论：`.newheader { background:#000; height:30px; left:5%; position:fixed; width:90%; top:0; }`是海报所做的尝试。

如果你有 90% 的宽度，你可以像这样居中这个标题：

```
.newheader {
    /*remove position: fixed; left: 5%; top: 0; */
    width:90%;
    margin: 0 auto; /* this centers it */
    height: 30px;
    background: #000;
} 
```

这是结果的示例[JSFiddle](http://jsfiddle.net/Yk2MG/)。

# .net - 如何在 .net 中为 Windows 服务设置 ACL？

> ID：11637764
> 
> 赞同：3
> 
> 时间：2012-07-24T19:14:11.800
> 
> 标签：.net, windows, vb.net, service, acl

我有一项服务，我需要能够通过按钮启动和停止。我在一个单独的程序中使用 ServiceController，当我以管理员身份运行这个单独的程序时，一切都按预期工作。但是，我需要能够像任何人一样控制这项服务。如何为我的服务设置权限，以便每个人都可以完全控制它？这需要作为服务或安装的一部分以编程方式完成。它是用 vb.net 编写的本地服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:22:49.457

你有几个选择：

1）您可以要求您的应用程序以管理员身份运行。每次您的应用程序启动时，系统都会提示您使用 UAC（在 Windows 7 和 Vista 上），并且您的应用程序将被提升到所需的级别。

[以管理员身份运行 .NET 应用程序](https://stackoverflow.com/questions/1781734/run-net-application-as-administrator)

2) 当需要停止和启动服务的操作时，您的应用程序可以请求提升。它将通过在更高级别启动另一个应用程序来做到这一点，而这个另一个应用程序将执行实际的启动和停止。

[如何仅在需要时提升权限？](https://stackoverflow.com/questions/573086/how-to-elevate-privileges-only-when-required)

3）首选选项，恕我直言 - 您应该构建您的服务以始终运行，但除了通过 TCP/IP、命名管道或其他一些通信机制侦听请求之外，不要做任何事情。然后，您的服务可以启动或停止执行实际工作的线程。

4) 可以修改服务权限。以下是一些提供有关此信息的帖子（我仍然更喜欢选项 3）：

[从非管理员用户帐户启动/停止 Windows 服务](https://stackoverflow.com/questions/4436558/start-stop-a-windows-service-from-a-non-administrator-user-account)

[http://msmvps.com/blogs/erikr/archive/2007/09/26/set-permissions-on-a-specific-service-windows.aspx](http://msmvps.com/blogs/erikr/archive/2007/09/26/set-permissions-on-a-specific-service-windows.aspx)

[http://fstaal01.home.xs4all.nl/swsc-us.html](http://fstaal01.home.xs4all.nl/swsc-us.html)

*更新*

根据 Harry 的评论，我更改了一些文本并添加了选项 4。似乎有一些方法可以调整权限。这些最初需要管理员权限，但是如果您将 swsc（第三个链接）之类的东西与您的安装捆绑在一起，您可以使用它来为您设置权限。我不确定这样做是否对许可证有任何影响。或者，您可以使用他粘贴的代码的变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T22:33:26.270

我的代码是用 C 语言编写的，但适应 VB 应该不会太难——或者你可以把它放在一个 DLL 中。或者，您可以启动命令外壳并使用该`sc sdset`命令。

```
wchar_t sddl[] = L"D:"
  L"(A;;CCLCSWRPWPDTLOCRRC;;;SY)"           
      // default permissions for local system
  L"(A;;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;BA)"   
      // default permissions for administrators
  L"(A;;CCLCSWLOCRRC;;;AU)"                 
      // default permissions for authenticated users
  L"(A;;CCLCSWRPWPDTLOCRRC;;;PU)"           
      // default permissions for power users
  L"(A;;RP;;;IU)"                           
      // added permission: start service for interactive users
  ;

DWORD InstallService() 
{
  SC_HANDLE manager, service;
  PSECURITY_DESCRIPTOR sd;
  DWORD err;

  wchar_t apppath[MAX_PATH + 2];

  // Note: because this is only called from main() which exits
  // immediately afterwards, no attempt is made to close the
  // handles generated.

  if (!ConvertStringSecurityDescriptorToSecurityDescriptor(sddl, 
      SDDL_REVISION_1, &sd, NULL))
  {
    err = GetLastError();
    printf("Error %u creating security descriptor.\n", err);
    return err;
  }

  if (!GetModuleFileName(0, apppath, MAX_PATH + 1)) 
  {
    err = GetLastError();
    printf("Error %u fetching module name.\n", err);
    return err;
  }

  if (_wcsicmp(apppath + wcslen(apppath) - wcslen(exename), exename) != 0) 
  {
    printf("Application name mismatch: %ls\n", 
      apppath + wcslen(apppath) - wcslen(exename));
    return ERROR_INVALID_FUNCTION;
  }

  manager = OpenSCManager(0, 0, SC_MANAGER_CREATE_SERVICE);

  if (!manager) 
  {
    err = GetLastError();
    printf("Error %u connecting to service manager.\n", err);
    return err;
  }

  service = CreateService(manager,
    servicename,
    displayname,
    WRITE_DAC,
    SERVICE_WIN32_OWN_PROCESS,
    SERVICE_DEMAND_START,
    SERVICE_ERROR_NORMAL,
    apppath,
    0,
    0,
    NULL,
    NULL,
    NULL);

  if (!service) 
  {
    err = GetLastError();
    printf("Error %u installing service.\n", err);
    return err;
  }

  if (!SetServiceObjectSecurity(service, DACL_SECURITY_INFORMATION, sd))
  {
    err = GetLastError();
    printf("Error %u setting service security.\n", err);
    return err;
  }

  printf("Service successfully installed.\n");
  return 0;
} 
```

# heroku - Neo4j 企业版可以在 Heroku 上运行吗？

> ID：11637765
> 
> 赞同：1
> 
> 时间：2012-07-24T19:14:20.497
> 
> 标签：heroku, neo4j

这个问题真的没有比标题更多的东西了，但我似乎无法在任何地方找到这个答案。

我主要对 Enterprise Edition 的备份功能以及 Neo4j 在 Heroku 上运行时是否可以访问它感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:37:21.773

Neo4j Heroku Add On ( [https://addons.heroku.com/neo4j](https://addons.heroku.com/neo4j) ) 由 Neo4j 团队管理。这是一个开发者实例，目前是免费的。

生产实例将在接下来的几周内发布，届时 Neo4j 版本 1.8 GA 将发布。

请参阅[https://groups.google.com/d/msg/neo4j/kidc4VeV_NA/spFwz2EeORgJ](https://groups.google.com/d/msg/neo4j/kidc4VeV_NA/spFwz2EeORgJ)

# android - Android：DSA 签名 - 签名和验证

> ID：11637766
> 
> 赞同：1
> 
> 时间：2012-07-24T19:14:26.680
> 
> 标签：android, base64, digital-signature, dsa

我在验证刚刚创建的签名时遇到问题。签名后，我首先使用 Base64 将签名转换为文本，作为测试，我想验证我是否可以解码 Base64 并验证签名。这失败了。这是一些没有错误处理的代码。

我有我的密钥对：

```
DSAPrivateKey privateKey = (DSAPrivateKey) keyPair.getPrivate();
DSAPublicKey publicKey = (DSAPublicKey) keyPair.getPublic(); 
```

现在我签署一些文本并打印到日志输出 - 看起来很好：

```
String text = "test";
Signature signer = null;
signer = Signature.getInstance(privateKey.getAlgorithm());
SignedObject signedObject = null;
signedObject = new SignedObject(text, privateKey, signer);
String print_signature = Base64.encodeToString(signedObject.getSignature(), Base64.DEFAULT);
System.out.println("Base64 Signature: " + print_signature); 
```

现在我使用上面创建的 SignedObject 对象而不是 Base64 来验证签名。这是成功的：

```
Signature verifier = null;
verifier = Signature.getInstance(publicKey.getAlgorithm());
boolean b = signedObject.verify(publicKey, verifier)); 
```

对于我的应用程序，我将只有签名者的公共证书和 Base64 编码字符串，因此我必须仅使用这些参数验证签名，因此 AFAIK 不能使用 SignedObject 对象。我使用了 Signature 对象：

```
Signature verifier1 = null;
verifier1 = Signature.getInstance(publicKey.getAlgorithm());
verifier1.initVerify(publicKey);
verifier1.update(text.getBytes()); // sorry I forgot this in original posting
byte[] sig1 = Base64.decode(print_signature, Base64.DEFAULT);
b = verifier1.verify(sig1)); 
```

此验证总是失败（b = false）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:53:17.427

你为什么首先使用`SignedObject`？它给你买了什么？至于验证失败，请确保在传输/接收后获得相同的字节。您是否以相同的编码发送/接收？有人修改字符串吗？

# c# - 从字符串中提取短语

> ID：11637772
> 
> 赞同：2
> 
> 时间：2012-07-24T19:15:02.310
> 
> 标签：c#

我有一个文本文件，我需要搜索然后打印以从中筛选某些短语。

我可以把文本文件变成一个字符串，然后像这样找到短语第一部分的索引；

```
int first = source.IndexOf(start-keyword); 
```

source 是文本文件字符串，start-of-phrase 是我要查找的第一个关键字。

但是，当我尝试获取 end 关键字的索引时，我会卡住，因为有时 end 关键字出现在第一个关键字之前。

所以我在我的代码中添加了以下位，所以它看起来像：

```
int first = source.IndexOf(start-keyword);
string source2 = source.Substring(first, source.Length - first);
int last = source2.IndexOf(end-keyword) + end-keyword.Length;
phrases.Add(source.Substring(first, last)); 
```

然后最后一行将其添加到名为短语的列表中。

但是，当我开始遇到诸如超出范围或未提取完整短语之类的错误时，我似乎找不到令人满意的循环方式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:18:31.687

您可能想查看使用[String.IndexOf Method(String, Int32)](http://msdn.microsoft.com/en-us/library/7cct0x33)，您可以在其中指定第一次开始出现结束的起始索引值。

```
int last = source.IndexOf(end-keyword, first + start-keyword.Length ) 
           + end-keyword.Length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:38:46.267

**这听起来像是正则表达式**的理想候选者。就像是

```
"(\b[Pp]rogram\b)(.*)(\b[Vv]cvarsall\b)" 
```

应该匹配

```
"Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall" 
```

在

```
"something Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall something" 
```

# javascript - jquery 内容滑块需要自动播放

> ID：11637775
> 
> 赞同：0
> 
> 时间：2012-07-24T19:15:21.907
> 
> 标签：javascript, jquery

我有这个内容滑块，我需要它像幻灯片一样，我需要自动播放

```
$(document).ready(function() {

$('.poveznicaDiv').click(function(){
    var broj = $(this).attr('id');
    broj = broj.split('ca');
    broj = parseInt(broj[1]);       
    $('#maskaSadrzaja').animate({'left': '-'+ 500*(broj-1) +'px'}, 'slow');
});
}); 
```

忽略他们在克罗地亚语上的 id 和类名：D

所以这很好用，但我需要自动播放

我试过这个：

```
slideShow();

function slideShow(){
    var i = 0;
    $('#maskaSadrzaja').animate({'left': '-'+ 500*(i) +'px'}, 'slow');
    broj++;
    // alert(i);
    if(i>5){
        i=0;
    }   
    setTimeout(slideShow, 1000);
}; 
```

但这没有用

我怎样才能让它自动播放？

编辑

所以我尝试了别的东西 .poveznicaDiv 类的 div 也有一个 id，比如 poveznica1、poveznica2 等等

所以我尝试添加一个点击它们的功能

像这样的东西：

```
i=1;
function autoplay() {
$('#poveznica'+i).click();
i++;
setTimeout(autoplay, 1000);
} 
```

为什么这不起作用？我已将它放入 .ready 并调用该函数（自动播放；）。请帮忙

编辑

我的滑块（以及 html 和 css）与这个几乎相同[http://www.webdeveloperjuice.com/2010/01/12/lightest-jquery-content-slider-ever-made-380-bytes/](http://www.webdeveloperjuice.com/2010/01/12/lightest-jquery-content-slider-ever-made-380-bytes/)

我怎样才能让它自动旋转？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:19:32.640

您没有`i`在代码中递增，您还必须将其传递给函数调用，因为它不是全局变量。

```
var slideShow = function(i){
  $('#maskaSadrzaja').animate({
    'left': '-' + 500*(i) + 'px'
  }, 'slow');

  broj++;

  if(i>5){
    i=0;
  }   

  setTimeout(function(){
    slideShow(i+1);
  }, 1000);
};

slideShow(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:18:06.410

把它放在 Document.Ready 中，或者简称为这样

```
$(function() {       
var i = 0;
$('#maskaSadrzaja').animate({'left': '-'+ 500*(i) +'px'}, 'slow');
broj++;
// alert(i);
if(i>5){
    i=0;
}   
setTimeout(slideShow, 1000); 
```

});

# php - 如何运行 Doctrine 2.2，我找不到自动加载 php 文件

> ID：11637789
> 
> 赞同：0
> 
> 时间：2012-07-24T19:16:49.903
> 
> 标签：php, doctrine-orm, wampserver

我在带有 php 5.4 的最新 32 位 WampServer 2 服务器上

我按照步骤从 Git 下载 Doctrine 2.2 没有问题。
现在我在配置步骤。
我坚持第一步。
[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/configuration.html)

文件 autoload.php 在哪里。我基本上有这个文件夹架构。
教义
..bin
..lib
....教义
......ORM
......供应商
........教义构建通用
........教义通用
........doctrine-dbal
........Symfony
..tests
..tools

供应商文件夹中没有 autoload.php 文件？那个文件在哪里？
有没有人有关于如何安装 Doctrine 2.2 的教程。我之前已经安装了 Doctrine 1.2 没有问题，但是 Doctrine 2.2 与旧版本完全不同。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:21:20.053

它使用命名空间来加载类。

# c - #include<>'ing 不同版本的 Python.h 并链接到多个版本的 Python

> ID：11637791
> 
> 赞同：3
> 
> 时间：2012-07-24T19:16:53.477
> 
> 标签：c, makefile

在我的新工作中维护旧资源时，我试图让事情变得更清洁。在本例中，我有一个非常静态地依赖于 python2.5 的大项目（1,001 个源文件）。在我的开发机器上，我安装了 2.6，我试图让这个项目包含并链接 >=2.5 和 <3.0。

我目前看到两个问题。从 .c 文件：

```
#include <python2.5/Python.h> 
```

从makefile

```
LDFLAGS = $(LIBS) -lusb-1.0 -lpthread -lSound -lsqlite3 -lm -lglib-2.0 -lpython2.5 
```

所以，我的问题是：如何更改 .c 文件以使其使用适当的目录，以及如何更新 makefile 以使其链接到适当的库？

编辑：当我这样做的时候，我想我可以给 glib-2.0 相同的待遇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:53:52.227

我不会更改 C 文件，而是更改包含路径和 LDFLAGS。

所以 .C 将有：

```
#include <Python.h> 
```

在包含路径上添加 -I/path/to/python/2.5/include 和 -Lpython2.5

如果使用 makefile，可以使用 += 将选项添加到包含路径和库路径。

```
LDFLAGS = $(LIBS) -lusb-1.0 -lpthread -lSound -lsqlite3 -lm
...
ifeq ($(PYTHON_VERSION),2.5)
    LDFLAGS += -lpython2.5
    CFLAGS += -I/path/to/python/2.5/include
else 
...
endif 
```

其中 PYTHON_VERSION 是您必须设置的变量。

或者，如果您的路径是统一的：

```
LDFLAGS += -lpython$(PYTHON_VERSION)
CFLAGS += -I/path/to/python/$(PYTHON_VERSION)/include 
```

如果您使用 SCONS，使用变体构建编写这种构建脚本会更容易。

你对不同版本的 Python 有不同的源代码吗？

或者您只是想使用不同版本的 Python 编译和链接相同的源代码？

# javascript - 为什么我在所有 HTML 内容下方都有一个大的空白？

> ID：11637794
> 
> 赞同：0
> 
> 时间：2012-07-24T19:16:58.553
> 
> 标签：javascript, jquery, css, drop-down-menu

出于某种原因，在此页面上使用了一个巨型下拉菜单，在所有内容下方有一个巨大的空白区域，您可以滚动过去页脚。你能帮我弄清楚发生了什么吗？

我很确定它与巨型下拉菜单有关，因为当你将鼠标悬停在它上面时，空白就会消失。（菜单项“合作社和职业”是巨型）

[http://www.georgiancollege.ca/student-success/](http://www.georgiancollege.ca/student-success/)

奇怪的是，这两个页面也使用它并且没有问题（其他一些样式在这两个上搞砸了，但这并不影响它，因为我让它们与损坏的页面具有相同的主题/样式并且它们仍然没有——他们目前的风格已经坏了，所以另一个开发者可以研究别的东西）

[http://www.georgiancollege.ca/athletics/](http://www.georgiancollege.ca/athletics/)（健身中心菜单项）

[http://www.georgiancollege.ca/sdvadev/](http://www.georgiancollege.ca/sdvadev/)（程序菜单项）

谢谢。

编辑：当您检查元素时，与检查器工具栏的大小相比，空白区域会按比例变大 - 如果有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:35:28.817

这可能是因为相对定位。例如，在底部自然结构化的 div 块被强制放置在顶部。在这种情况下，将始终保留 div 块的空间，从而留下空白！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:03:27.370

这是因为在**custom.css**你有：

```
#wrapper {
    min-height: 100%;
    position: relative;
} 
```

删除**min-height: 100%**，效果很好。

PS我将页脚更改为没有绝对定位，因为它使水平条出现在浏览器窗口下方，如下所示：

```
#footer {
    bottom: 0;
    height: 60px;
    width: auto;
    margin-top: 10px;
    margin-bottom: 0;
    padding: 1%;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:31:55.473

尝试设置`#menu-item-197 {overflow:hidden}`

或者干脆`#pagenav li {overflow:hidden}`

# c# - 正则表达式在c#中不匹配

> ID：11637796
> 
> 赞同：2
> 
> 时间：2012-07-24T19:17:07.587
> 
> 标签：c#, .net, regex

我正在尝试使用 C# 匹配以下模式并且找不到匹配项

正则表达式

```
^([[a-z][A-Z]]*):([[a-z][A-Z][0-9],]*)$ 
```

示例字符串

```
Student:Tom,Jerry 
```

而同样的事情在 ruby​​ 中也有效（使用[Rubular](http://rubular.com/)验证了它）。知道为什么这在 c# 中不起作用吗？

代码块

```
public static KeyValuePair<string, IList<string>> Parse(string s)
    {
        var pattern = new Regex(@"(\w*):([\w\d,]*)");
        var matches = pattern.Matches(s);
        if (matches.Count == 2)
        {
            return new KeyValuePair<string, IList<string>>(matches[0].Value, matches[1].Value.Split(','));
        }

        throw new System.FormatException();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T19:20:11.687

尝试稍微更改您的正则表达式：-

```
([a-zA-Z]*):([a-zA-Z0-9,]*) 
```

如果您想要所有单词字符（包括下划线），您甚至可以进一步简化它，如果没有，则使用上面的那个。

```
(\w*):([\w\d,]*) 
```

无需多组分组，例如`[[a-z][A-Z]]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:26:46.713

您可以进一步简化它：

```
^([A-z]*):([\w,]*)$ 
```

第一组等价于`[a-zA-Z]`，第二组等价于`[a-zA-Z0-9]`。如果您希望第一组匹配数字和字符，您可以简单地`\w`在任何地方使用。

# api - 制作我自己的 API，请查看此

> ID：11637801
> 
> 赞同：0
> 
> 时间：2012-07-24T19:17:18.170
> 
> 标签：api, oauth

这个OAuth认证方式我实在看不懂，所以就放弃了。我决定自己创建的原因是因为我相信我的 API 将执行的功能并没有那么大，它主要能够读取数据，偶尔也可以写入。

这是我在我的网站上的 API 请求计划。

*使用特殊密钥*的消费者 API 请求> 用户授权的应用程序（如果尚未这样做） > 授权后向消费者回调 URL > 在提供者上运行 API 脚本 > 将结果返回给消费者。

这个可以吗？这是我第一次为任何网站编写 API，所以我是来学习的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:23:29.230

一般来说，我会说，如果您因为不了解现有的身份验证协议而尝试推出自己的身份验证协议，那么您就犯了致命错误™。

您应该考虑这样做的唯一时间是，如果您完全了解相关协议，并且需要其中的一些功能，而您 100% 确定它不提供。OAuth 很复杂，因为它必须如此。存在某些要求以确保其安全。

在不了解复杂性的情况下编写自己的内容，您将自己设置为失败。

# android - 被操纵的底层应用程序或 Android 操作系统

> ID：11637805
> 
> 赞同：1
> 
> 时间：2012-07-24T19:17:51.760
> 
> 标签：android

我最初的问题是建立一个半透明的视图，允许操纵它下面的视图。Bluefalcon 很好地回答了这个问题，并帮助我更好地理解了视图机制：

[如何与半透明 Android 应用程序背后的元素进行交互？](https://stackoverflow.com/questions/11635934/touch-through-translucent-app)

我仍然不确定如何操作不属于我的应用程序的底层视图。我想要达到的效果就像 Screen Filter App：

[https://play.google.com/store/apps/details?id=com.haxor&hl=en](https://play.google.com/store/apps/details?id=com.haxor&hl=en)

在这个应用程序中，一旦启动，似乎一个“过滤器”视图被放置在一切之上，但你仍然可以与它下面运行的任何东西进行交互。应用商店、电子邮件、主屏幕等。

我目前有 getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE); 在我的应用程序的 onCreate 方法中。这似乎接近了。如果我在我的应用程序上滑动没有任何更新，但是当我退出应用程序时，主屏幕会更新，就像我滑动一样。

任何帮助将不胜感激！

# jquery - 使用内置 windows ftp 客户端时如何设置二进制模式

> ID：11637810
> 
> 赞同：0
> 
> 时间：2012-07-24T19:18:26.613
> 
> 标签：jquery, ftp, binary, slideshow, mode

嗨，我在 ftp 服务器上有图像，需要在 jquery 幻灯片中显示，但它们不会显示在浏览器和搜索中，看起来我必须将 ftp 服务器设置为二进制模式，但我使用的是内置的windows ftp 客户端，我只是将文件从桌面拖放到服务器，但找不到设置为二进制模式的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:35:36.560

事实证明，该系统是区分大小写的。在我的代码中，图像名称是大写的，但服务器上的相同名称是小写的，导致它们无法被识别。

# plone - 在 plone.app.registry 中存储文件内容（二进制数据）

> ID：11637814
> 
> 赞同：2
> 
> 时间：2012-07-24T19:18:35.350
> 
> 标签：plone, z3c.form

我需要以从 Plone 3.3 到 4.2 兼容的方式存储**plone.app.registry**二进制数据。

只需使用一种`schema.Byte`类型，我就可以在 Plone 4.2 上快速实现这一点（不是非常用户友好，但它有效），但在 Plone 3.3 上却不行。

在 Plone 3.3 上，注册表正在显示文件上传控件，但是当我尝试获取保存的数据时，我发现它只是存储了一个字符串，例如：

`'<... HTTPFileUpload...>'`

...所以一个对象的python repr。

我怎样才能解决这个问题？我需要使用*plone.namedfile*产品和*collective.z3cform.filewidget*吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:57:42.960

plone.app.registry 并不是真正为存储二进制数据而设计的。它的设计简单、轻巧且防迁移。

你想用这个来达到什么目的？可能有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:09:00.750

好的，看来您在 Plone 3 上也可以有相同的行为；只需要升级 plone.z3cform

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-28T11:26:44.363

由于 plone.formwidget.namedfile 1.0.12 您也可以在 ASCII 字段上使用该 wigets。然后将数据转换为 base64。Plone 5 将该功能用于其站点徽标，该徽标存储在注册表中。

例如，请参阅该功能的 Plone 4 backport：[https ://github.com/collective/collective.sitelogo](https://github.com/collective/collective.sitelogo)

尤其：

`ASCII`图片字段的用法： [https ://github.com/collective/collective.sitelogo/blob/master/src/collective/sitelogo/interfaces.py#L14](https://github.com/collective/collective.sitelogo/blob/master/src/collective/sitelogo/interfaces.py#L14)

`ASCII`将字段的控制面板小部件更改为`NamedImageFieldWidget`：[https ://github.com/collective/collective.sitelogo/blob/master/src/collective/sitelogo/controlpanel.py#L19](https://github.com/collective/collective.sitelogo/blob/master/src/collective/sitelogo/controlpanel.py#L19)

# jsf-2 - 如何在数据表中添加全局查找器

> ID：11637815
> 
> 赞同：0
> 
> 时间：2012-07-24T19:18:35.323
> 
> 标签：jsf-2, primefaces

我在我的 Web 应用程序中使用 primefaces，我需要在 dataTable 中添加一个搜索选项。

dataTable 包含大约 10 页（使用分页）

是否可以添加全局查找器之类的全局过滤器

[http://www.primefaces.org/showcase/ui/datatableFiltering.jsf](http://www.primefaces.org/showcase/ui/datatableFiltering.jsf)

谢谢

# javascript - 检测来自子级（iframe）的窗口关闭命令

> ID：11637819
> 
> 赞同：0
> 
> 时间：2012-07-24T19:18:47.653
> 
> 标签：javascript, html, iframe

我在另一个网站的 html 页面中有一个 iframe。

用户在该 iframe 中执行某些操作，然后页面自行关闭。（该页面不适合我，我无法更改其功能）

我希望我的 html 页面检测到来自子级的关闭命令，然后将 iframe 的可见性更改为 false。

怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:34:33.147

我认为这违反了跨源政策，并且无法实现。看一下：

[https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:10:18.483

保存当前位置并使用 setInterval 开始循环。

```
var startingLocation = document.getElementById('myIFrame').location;
setInterval("checkChildLocation",1000);
function checkChildLocation() {
  if(document.getElementById('myIFrame').location != startingLocation) {
    /* the iframe has changed */
  }
} 
```

或类似的东西。

# jquery - 将 Twitter Bootstrap 从固定的 940 像素更改为固定的 960 像素有什么缺点吗？

> ID：11637821
> 
> 赞同：3
> 
> 时间：2012-07-24T19:18:55.940
> 
> 标签：jquery, css, twitter-bootstrap

我希望使用 Twitter Bootstrap，但问题是我需要内容区域为 960px 宽，而不是 Twitter Bootstrap 默认使用的仅 940px。

我不想使用响应式网格，而是使用固定网格，因为 99% 的用户将通过电脑或 iPad 访问它，而不是手机。

如果我将行和容器的像素宽度更改为 960 像素的设计，它会搞砸什么大的时间吗？

我个人认为 960px 的宽度比 940px 的宽度要好，即使在 1024px/768px 的分辨率下，它仍然可以在没有水平滚动条的情况下显示良好。

还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T01:09:43.950

响应式设计不仅为小型设备的用户提供更好的体验。它还可以为屏幕宽度在 1024 像素以上的用户（[大多数 pc 用户](http://gs.statcounter.com/#resolution-ww-weekly-201201-201230)）提供更好的体验。

Twitter使用的网格系统与 960 网格系统使用的**完全相同**（12 列，60 像素列宽，20 像素间距），除了每边 10 像素的间距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T04:11:10.120

请注意，twitter bootstrap 的每一行都有一个 margin-left:-20px。这使得 960px 网格

```
.row {
  margin-left: -20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T00:54:30.767

如果您不想创建响应式站点，并且也不想使用 960 网格系统，您可以使用 Bootstrap，但需要进行更改。大的变化。几乎所有的框架。你可以这样做，或者简单地使用其他框架，如[960.gs](http://960.gs/)。

# regex - 使用 Isapi ReWrite 替换两个条件中的空格的正则表达式

> ID：11637824
> 
> 赞同：0
> 
> 时间：2012-07-24T19:19:08.940
> 
> 标签：regex, isapi, isapi-rewrite

我正在为 IIS 使用 Isapi Rewrite，我想为动态产品页面制作 SEO 友好的 URL。

我需要在两个查询字符串参数中以不同的方式替换空格。

在第一个参数中，\s 应替换为 + 在第二个参数中，所有 \s 应替换为 -

```
#seo. 2 conditions. split on _ delimiter.
RewriteRule ^Store/([^_]+)_([^/]+) Store/Details.aspx?id=$1&name=$2  [QSA,NC]

#replace spaces with + in first condition (doesn't work)
#RewriteRule ^Store/([^\w\s]+)\s(.+)$ Store/Details.aspx?id=$1+$2  [QSA, NC]

#replace spaces with dash in second condition ??? 
```

例子

```
Store/NP SP_name name
//$1: NP+SP
//$2: name-name
// output: Store/NP+SP_name-name

Store/mn%2098%20765_name%20name%20name
//$1: mn+98+765
//$2: name-name-name
//output: Store/mn+98+765_name-name-name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:36:37.117

前几天我也做过类似的事情，但是有一个更简单的任务，只有一种替换。尝试使用以下基本重定向（如果可行，我们将考虑更复杂的多参数场景）：

```
RewriteRule ^Store/(.+)\s([^_]+)_(.+)\s(.+) /Store/$1+$2_$3-$4  [NC,R=301,L] 
```

确保你在现有的重写之上。

# javascript - 在隐藏元素中显示元素

> ID：11637829
> 
> 赞同：1
> 
> 时间：2012-07-24T19:19:22.200
> 
> 标签：javascript, jquery, html

***HTML***

```
<body>
    <span>test</span>
    <span>test</span>
    <span>test</span>
    <span id="show">aaaaaa</span>
</body> 
```

***JS***

```
$('body').hide();

$('#show').show(); 
```

为什么这不起作用？我怎样才能让它工作？

现在一切都被隐藏了，但如果我使用`$('#show').show();`它应该让它`#show`可见。这可能吗？如果是，如何？

我想隐藏所有没有#show 的元素，但我不能修改 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:21:46.310

因为`#show`在里面`body`，这是不可见的。
`body`定义文档的主体，它包含所有元素，所以如果你隐藏它，你将隐藏所有元素。
尝试仅隐藏您想要的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T19:22:47.853

通过设置`display: none`（基本上`document.body`就是`.hide()`这样做的），第二次调用`#show`变得几乎无关紧要，因为父级仍然隐藏（`body`）。

您需要选择所有元素，没有特定节点并隐藏它们。

```
$(document.body).contents().not('#show, #show *').hide(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T19:22:07.107

要隐藏所有没有 的元素`id="show"`，您可以使用以下[`not`功能](http://api.jquery.com/not/)：

```
$('body').find('*').not('#show').hide(); 
```

或[`:not`伪选择器](http://api.jquery.com/not-selector/)：

```
$('body').find(':not("#show")').hide(); 
```

编辑：要同时显示#show 的所有子项，请将其添加到 not 选择器：

```
$('body').find('*').not('#show, #show > *').hide();​ 
```

[http://jsfiddle.net/ZD7gm/3/](http://jsfiddle.net/ZD7gm/3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T19:23:01.177

试试这个：

```
$('body').contents().hide();
$('#show').show();​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/wSgMt/)**

这将隐藏 body 的所有子元素并显示带有 ID 的元素`show`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T19:21:50.823

隐藏其他元素，而不是整个身体。

```
$('span').hide();
$('#show').show(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T19:24:30.203

尝试在 body 标记后附加 span，如下所示。

```
<body>
    <span>test</span>
    <span>test</span>
    <span>test</span>
    <span id="show">aaaaaa</span>
</body>    

$('body span').hide();

$('#show').show(); 
```

[jsfiddle.net 示例](http://jsfiddle.net/44yFM/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T14:20:25.953

```
$('body').find('*').not('#show, #show > *').hide(); 
```

# java - JDeveloper 与 IntelliJ IDEA

> ID：11637830
> 
> 赞同：3
> 
> 时间：2012-07-24T19:19:29.520
> 
> 标签：java, ide, intellij-idea, jdeveloper

最近我开始在一家公司工作。以前我只使用 IntelliJ。现在必须等待我再次使用 IntelliJ。所以我正在考虑任何类似于 IntelliJ 的 IDE。JDeveloper 怎么样，可能有人已经在使用它，所以我想听听人们的意见，谁已经在使用它，而不是从它的文档中评论“这个工具有多棒”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T19:22:55.937

与 eclipse 相比，我觉得 inteliJs GUI 更加精致。这只是我的意见

Jdeveloper 最酷的地方（让我想起了 netbeans）是当您的代码出现问题时出现的灯泡，并且大多数时候您可以单击它并修复您的许多问题。在 inteliJ 中，此功能似乎不太具体 imop 。

在我看来，它们在速度方面都相似。

我也喜欢 Jdeveloper 如何自动运行未处理的类，而不必选择一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:23:40.860

我很确定您可以使用这两种方法进行编程（即使使用 Eclipse ；）。这取决于您和您的日常工作使用哪一个。检查功能列表并下载它们（它们是免费的；）。

# asp.net - 从用户输入创建数据库登录名和用户

> ID：11637844
> 
> 赞同：2
> 
> 时间：2012-07-24T19:20:46.640
> 
> 标签：asp.net, sql-server, vb.net, user-input

我将 ASP.NET (VB.NET) 与 SQL Server 一起使用，并希望允许用户从 Web 表单创建服务器登录名和数据库用户。

我通过执行创建登录名和用户的命令来完成这项工作：

```
Dim cmd As New OleDb.OleDbCommand(
    "CREATE LOGIN [" & login & "] FROM WINDOWS WITH DEFAULT_DATABASE = Db; " & _
    "CREATE USER " & username & " FOR LOGIN [" & login & "]; ",
    connection)
cmd.ExecuteNonQuery() 
```

和是我正在清理（尽我所能）并直接插入`login`到. 虽然这是有效的，但我觉得我不应该这样做。`username``CommandText`

我希望有类似于参数化查询的东西，如下所示：

```
Dim cmd As New OleDb.OleDbCommand(
    "CREATE LOGIN [@login] FROM WINDOWS WITH DEFAULT_DATABASE = Db; " & _
    "CREATE USER @username FOR LOGIN [@login]; ",
    connection)
cmd.Parameters.AddWithValue("@login", login)
cmd.Parameters.AddWithValue("@username", username)
cmd.ExecuteNonQuery() 
```

但是，这不起作用，因为`CREATE LOGIN`并且`CREATE USER`似乎不允许参数化值，如[podiluska 所述](https://stackoverflow.com/a/11638014/1405830)：

> '@username' 附近的语法不正确。

有没有更好的方法从用户输入创建登录名和用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:32:38.717

您不能参数化`CREATE USER`and`CREATE LOGIN`命令。

您可以创建一个使用（已弃用）`sp_addlogin`和参数的存储过程`sp_adduser`，但是要创建具有 Windows 登录名的用户，您需要使用`CREATE LOGIN`动态 SQL，因此需要使用动态 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:44:37.343

一种可能的选择是使用存储过程，我以前避免使用它，因为它`sp_addlogin`被`sp_adduser`弃用[了](http://msdn.microsoft.com/en-us/library/ms173768.aspx)（如[podiluska 所述](https://stackoverflow.com/a/11638014/1405830)）。

但是，似乎可以在存储过程中使用`CREATE LOGIN`和，方法是将它们构建在一个带有 的字符串中，这在[这个问题](https://stackoverflow.com/questions/837358/sql-create-logon-cant-use-parameter-as-username)中有所描述。然后可以调整问题中包含的参数化查询代码片段以使用存储过程，只需稍作更改：`CREATE USER``EXEC`

```
cmd.CommandType = CommandType.StoredProcedure
cmd.CommandText = "sp_storedprocname" 
```

# excel - 从 Access 2007 中的查询获取 Excel 2007 中的表数据

> ID：11637845
> 
> 赞同：1
> 
> 时间：2012-07-24T19:20:52.253
> 
> 标签：excel, vba, ms-access, ms-access-2007, excel-2007

我有一个主要在 Access 中运行的自动化过程。但是，在中间，它将一些数据放入 Excel 中以将其整理成正确的形式（这比在 Access 中执行要快得多），最后它打开另一个 Excel 文件并将来自某些 Access 查询的数据放入 Excel 文件. 对于从 Excel 到 Access 的这些连接，我通过进入 Excel 并执行 Data --> Get External Data --> From Access，然后选择 Access 文件和我想要从中获取数据并告诉 Excel 的查询来完成它们把它做成一个表。

所以，我做了一次，然后我希望能够运行这个简单地刷新数据的自动化过程。为了刷新数据，我做了如下一行：

```
Worksheets("Data").Range("A1").ListObject.QueryTable.Refresh _
    BackgroundQuery:=False 
```

问题是，有一半的时间（我不明白为什么它一次而不是另一次），它说“你想连接到路径\文件名吗？” 当然可以，否则表格会如何刷新？因此，这会停止自动化。即使我单击是，我仍然无法让它继续。如果我单击是，它将打开数据链接属性。在我为此单击“确定”后，它会打开一个标题为“请输入 Microsoft Office Access 数据库引擎 OLE DB 初始化信息”的窗口。它有信息，包括我要访问的数据源的路径和名称，但是如果我单击确定，它会说，对不起，这不起作用，你想连接到吗（然后它列出了确切的刚才说的相同的路径和文件名不起作用）。它重复我刚才提到的步骤，然后出错。

万一这很重要，这是我用来从 Access 连接到 Excel 的（基本思想）代码：

```
Public Sub ExportToExcel()
    Dim ObjXLApp As Object
    Dim ObjXLBook As Object

    Dim ExcelFilePath As String

    ExcelFilePath = CurrentProject.Path & "\"

    Set ObjXLApp = CreateObject("Excel.Application")
    Set ObjXLBook = ObjXLApp.Workbooks.Open(ExcelFilePath & "filename.xlsm")        

    ObjXLApp.Visible = True

    ' Runs the "DataSetUp" macro in the Excel file.
    ObjXLApp.Run ("DataSetUp")

    ' The DataSetUp macro saves the Excel file

    ' Quit Excel
    ObjXLApp.Quit

    ' Free the memory
    Set ObjXLBook = Nothing
    Set ObjXLApp = Nothing
End Sub 
```

我不知道如何解决这个问题！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:12:15.663

这可能是因为您的 access 数据库仍然打开，新的 excel 文件需要从中输入数据。发生这种情况时无法打开数据库，这是excel出错并要求连接到另一个位置的原因。

因此，我可能会努力通过 vba 内部访问生成所需的清理。

# c++ - 如何将迭代器传递给灵气中的函数

> ID：11637846
> 
> 赞同：3
> 
> 时间：2012-07-24T19:20:54.227
> 
> 标签：c++, parsing, boost-spirit, boost-spirit-qi

```
template <typename Iterator>
struct parse_grammar
: qi::grammar<Iterator, std::string()>
{
    parse_grammar()
        : parse_grammar::base_type(start_p, "start_p"){
            a_p = ',' > qi::double_;
            b_p = *a_p;
            start_p = qi::double_ > b_p >> qi::eoi;
        }

    qi::rule<Iterator, std::string()> a_p;
    qi::rule<Iterator, std::string()> b_p;
    qi::rule<Iterator, std::string()> start_p;
};

// implementation

std::vector<double> parse(std::istream& input, const std::string& filename)

{

// iterate over stream input

    typedef std::istreambuf_iterator<char> base_iterator_type;
    base_iterator_type in_begin(input);

    // convert input iterator to forward iterator, usable by spirit parser
    typedef boost::spirit::multi_pass<base_iterator_type> forward_iterator_type;
    forward_iterator_type fwd_begin = boost::spirit::make_default_multi_pass(in_begin);
    forward_iterator_type fwd_end;

    // prepare output
    std::vector<double> output;
    // wrap forward iterator with position iterator, to record the position
    typedef classic::position_iterator2<forward_iterator_type> pos_iterator_type;
    pos_iterator_type position_begin(fwd_begin, fwd_end, filename);
    pos_iterator_type position_end;

    parse_grammar<pos_iterator_type> gram;

    // parse
    try
    {
        qi::phrase_parse(
                position_begin, position_end,                     // iterators over input
                gram,                                         // recognize list of doubles
                ascii::space);                                         // comment skipper
    }
    catch(const qi::expectation_failure<pos_iterator_type>& e)
    {
        const classic::file_position_base<std::string>& pos = e.first.get_position();
        std::stringstream msg;
        msg <<
            "parse error at file " << pos.file <<
            " line " << pos.line << " column " << pos.column << std::endl <<
            "'" << e.first.get_currentline() << "'" << std::endl <<
            " " << "^- here";
        throw std::runtime_error(msg.str());
    }

    // return result
    return output;
} 
```

我有上面的示例代码（此处使用的代码来自 boost-spirit 网站）。

在规则 a_p 的语法中，我想使用语义操作并调用一个方法并将迭代器传递给它，如下所示：

```
a_p = ',' > qi::double_[boost::bind(&parse_grammar::doStuff(), this, 
    boost::ref(position_begin), boost::ref(position_end)]; 
```

如果方法 doStuff 的签名是这样的：

```
void doStuff(pos_iterator_type const& first, pos_iterator_type const& last); 
```

任何想法如何做到这一点？只要迭代器以其当前状态传递的方法，我不介意任何方式（如果我可以使用 boost::phoenix 或不确定如何做到这一点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:35:32.690

我不完全确定您为什么认为您“需要”您所描述的内容。恐怕您的实际任务的解决方案可能非常简单：

```
start_p = qi::double_ % ',' > qi::eoi; 
```

然而，由于实际问题非常有趣，并且结合使用位置插入器`istream_buf`(而不仅仅是通常的 (slower) `boost::spirit::istream_iterator`) 有其优点，我将向您展示如何使用语义操作来做到这一点。

对于一个简单（但相当完整）的测试主要

```
int main()
{
    std::istringstream iss(
            "1, -3.4 ,3.1415926\n"
            ",+inF,-NaN  ,\n"
            "2,-.4,4.14e7\n");

    data_t parsed = parse(iss, "<inline-test>");

    std::cout << "Done, parsed " << parsed.size() << " values ("
        << "min: " << *std::min_element(parsed.begin(), parsed.end()) << ", "
        << "max: " << *std::max_element(parsed.begin(), parsed.end()) << ")\n";
} 
```

*具有语义操作*的输出现在变为：

```
debug ('start_p') at <inline-test>:1:[1..2] '1'  = 1
debug ('start_p') at <inline-test>:1:[4..8] '-3.4'   = -3.4
debug ('start_p') at <inline-test>:1:[10..19]   '3.1415926'  = 3.14159
debug ('start_p') at <inline-test>:2:[2..6] '+inF'   = inf
debug ('start_p') at <inline-test>:2:[7..11]    '-NaN'   = -nan
debug ('start_p') at <inline-test>:3:[1..2] '2'  = 2
debug ('start_p') at <inline-test>:3:[3..6] '-.4'    = -0.4
debug ('start_p') at <inline-test>:3:[7..13]    '4.14e7'     = 4.14e+07
Done, parsed 8 values (min: -3.4, max: inf) 
```

## 在***[http://liveworkspace.org/code/8a874ef3](http://liveworkspace.org/code/8a874ef32ebcfa8eebfa271127f4d202)******现场***观看...

注意它是如何

*   演示访问实际解析器实例的名称（'start_p'）
*   演示对完整源迭代器范围的访问
*   展示了如何在语义动作中进行专门的处理
*   *我仍然建议使用`qi::double_`来解析原始输入*，因为它是我所知道的唯一可以轻松处理所有情况的东西（请参阅测试数据和另一个问题：[是否可以使用输入流读取无穷大或 NaN 值？](https://stackoverflow.com/questions/11420263/is-it-possible-to-read-infinity-or-nan-values-using-input-streams/11420901#11420901)）
*   通过显示解析值的统计信息，演示如何将实际数据*有效地解析为向量*

* * *

## 完整代码

这是完整的代码以供将来参考：

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/support_multi_pass.hpp>
#include <boost/spirit/include/classic_position_iterator.hpp>
#include <boost/phoenix/function/adapt_function.hpp>

namespace qi      = boost::spirit::qi;
namespace phx     = boost::phoenix;
namespace classic = boost::spirit::classic;
namespace ascii   = boost::spirit::ascii;

typedef std::vector<double> data_t;

///////// USING A FREE FUNCTION
//
template <typename Grammar, typename Range>
    double doStuff_(Grammar &grammar, Range pos_range)
{
    // for efficiency, cache adhoc grammar:
    static const qi::rule   <typename Range::iterator, double()> r_double = qi::double_;
    static const qi::grammar<typename Range::iterator, double()> g_double(r_double); // caching just the rule may be enough, actually

    double value = 0;
    qi::parse(pos_range.begin(), pos_range.end(), g_double, value);

    std::cout << "debug ('" << grammar.name() << "') at "
       << pos_range.begin().get_position().file   << ":"
       << pos_range.begin().get_position().line   << ":["
       << pos_range.begin().get_position().column << ".." 
       << pos_range.end  ().get_position().column << "]\t" 
       << "'" << std::string(pos_range.begin(),pos_range.end()) << "'\t = "
       << value
       << '\n';

    return value;
}

BOOST_PHOENIX_ADAPT_FUNCTION(double, doStuff, doStuff_, 2)

template <typename Iterator, typename Skipper>
struct parse_grammar : qi::grammar<Iterator, data_t(), Skipper>
{
    parse_grammar()
        : parse_grammar::base_type(start_p, "start_p")
    {
        using qi::raw;
        using qi::double_;
        using qi::_1;
        using qi::_val;
        using qi::eoi;
        using phx::push_back;

        value_p = raw [ double_ ] [ _val = doStuff(phx::ref(*this), _1) ];
        start_p = value_p % ',' > eoi;

        // // To use without the semantic action (more efficient):
        // start_p = double_ % ',' >> eoi;
    }

    qi::rule<Iterator, data_t::value_type(), Skipper> value_p;
    qi::rule<Iterator, data_t(), Skipper> start_p;
};

// implementation
data_t parse(std::istream& input, const std::string& filename)
{
    // iterate over stream input
    typedef std::istreambuf_iterator<char> base_iterator_type;
    base_iterator_type in_begin(input);

    // convert input iterator to forward iterator, usable by spirit parser
    typedef boost::spirit::multi_pass<base_iterator_type> forward_iterator_type;
    forward_iterator_type fwd_begin = boost::spirit::make_default_multi_pass(in_begin);
    forward_iterator_type fwd_end;

    // wrap forward iterator with position iterator, to record the position
    typedef classic::position_iterator2<forward_iterator_type> pos_iterator_type;
    pos_iterator_type position_begin(fwd_begin, fwd_end, filename);
    pos_iterator_type position_end;

    parse_grammar<pos_iterator_type, ascii::space_type> gram;

    data_t output;
    // parse
    try
    {
        if (!qi::phrase_parse(
                position_begin, position_end,  // iterators over input
                gram,                          // recognize list of doubles
                ascii::space,                  // comment skipper
                output)                        // <-- attribute reference
           )
        {
            std::cerr << "Parse failed at " 
               << position_begin.get_position().file   << ":"
               << position_begin.get_position().line   << ":"
               << position_begin.get_position().column << "\n";
        }
    }
    catch(const qi::expectation_failure<pos_iterator_type>& e)
    {
        const classic::file_position_base<std::string>& pos = e.first.get_position();
        std::stringstream msg;
        msg << "parse error at file " << pos.file
            << " line "               << pos.line
            << " column "             << pos.column
            << "\n\t'"                << e.first.get_currentline()
            << "'\n\t "               << std::string(pos.column, ' ') << "^-- here";

        throw std::runtime_error(msg.str());
    }

    return output;
}

int main()
{
    std::istringstream iss(
            "1, -3.4 ,3.1415926\n"
            ",+inF,-NaN  ,\n"
            "2,-.4,4.14e7\n");

    data_t parsed = parse(iss, "<inline-test>");

    std::cout << "Done, parsed " << parsed.size() << " values ("
        << "min: " << *std::min_element(parsed.begin(), parsed.end()) << ", "
        << "max: " << *std::max_element(parsed.begin(), parsed.end()) << ")\n";
} 
```

# hibernate - 如何验证 Grails 2.1.0 Hibernate L2 Cache？

> ID：11637848
> 
> 赞同：1
> 
> 时间：2012-07-24T19:20:56.960
> 
> 标签：hibernate, grails, ehcache

我正在使用 Grails 2.1.0。我一直在尝试验证/分析我的 L2 缓存。现在，我怀疑休眠/缓存设置是否正确。

### **• 我在conf\DataSource.grooy 中的休眠设置中启用了generate_statistics。**

```
hibernate {
    generate_statistics = true
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
    format_sql = true
    use_sql_comments = true
} 
```

### **• 我在域映射中启用了缓存。**

```
package com.att.failbox.log.cause
class LogCauseMemento {
    Date dateCreated
    static mapping = {
        version false
        id generator: 'assigned'
        table 'log_cause'
        cache: true
    }
} 
```

### **• 我在ehcache.xml 中添加了相应的域条目**

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="ehcache.xsd" >
<diskStore path="java.io.tmpdir"/>
<cacheManagerEventListenerFactory class="" properties=""/>
<defaultCache
    eternal="false"
    timeToLiveSeconds="3600"
    overflowToDisk="false"
    diskPersistent="false"
    />
<cache name="com.att.failbox.log.cause.LogCauseMemento"
    maxElementsInMemory="100000"
    eternal="true"
    />
</ehcache> 
```

### **• 但是，当我尝试使用“stats.getSecondLevelCacheRegionNames()”验证 L2 缓存时，我只得到“StandardQueryCache, UpdateTimestampsCache”。**

```
import org.hibernate.stat.Statistics
class DomainProfilerService {
    def sessionFactory
    def displayStatistics() {
        Statistics stats = sessionFactory.getStatistics()
        def names = stats.getSecondLevelCacheRegionNames()
        names.each(){ println it }
    }
} 
```

## **我是否正在寻找正确的位置来验证我的 L2 缓存？**

# java - jar.libs.dir 没有被正确覆盖吗？

> ID：11637852
> 
> 赞同：2
> 
> 时间：2012-07-24T19:21:08.177
> 
> 标签：java, android, xml, ant

在[参考](https://stackoverflow.com/questions/3935753/android-include-external-jar-in-build-without-eclipse)了[其他](https://stackoverflow.com/questions/5312478/how-do-i-reference-external-jar-files-in-a-common-directory-not-libs-to-build)[几个](https://stackoverflow.com/questions/3217643/how-to-add-external-jar-libraries-to-an-android-project-from-the-command-line) [问题](https://stackoverflow.com/questions/7185488/android-what-is-the-folder-name-of-the-jar-files-lib-or-libs)之后，我发现这些答案都不适用于我的项目。将 jar 放入每个单独模块的 /libs 文件夹中，ant 构建可以正确运行并产生输出。在删除所有 /libs 文件夹并在我需要的每个模块中包含一个文件（又名）后，ant build 已停止工作。 `ant.properties``build.properties`

蚂蚁属性：

```
# This file is used to override default values used by the Ant build system.
#
# This file must be checked in Version Control Systems, as it is
# integral to the build system of your project.

# This file is only used by the Ant script.

# You can use this to override default values such as
#  'source.dir' for the location of your java source folder and
#  'out.dir' for the location of your output folder.

jar.libs.dir=../ExternalJars/libs 
```

构建.xml

```
<property file="ant.properties" />

<loadproperties srcFile="project.properties" />

<!-- version-tag: 1 -->
 <import file="${sdk.dir}/tools/ant/build.xml" />

<target name="full-debug" depends="debug">
</target>

<target name="full-release" depends="clean,release">
</target> 
```

据我所知，这些文件是正确编写的——相对于 ant.properties 文件，路径都是正确的，jar 是它们应该在的位置，模块使用所有正确的类和部分，等等。

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T00:28:49.457

根据另一个答案，这是我对 build.xml 脚本实现的，以支持 jar.libs.dir 属性：

```
<target name="-pre-compile">
    <property name="project.all.jars.path.temp" value="${toString:project.all.jars.path}" />
    <path id="project.all.jars.path">
        <path path="${project.all.jars.path.temp}"/>
        <fileset dir="${jar.libs.dir}">
            <include name="*.jar"/>
        </fileset>
    </path>
</target> 
```

由于使用了**<path path="..."/>**，它看起来足够安全，即使默认情况下将多个 JAR 文件添加到路径元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T01:49:35.943

这是一个已知的错误：[http ://code.google.com/p/android/issues/detail?id=33194](http://code.google.com/p/android/issues/detail?id=33194)

# php - PHP Post vars 到第三方

> ID：11637854
> 
> 赞同：0
> 
> 时间：2012-07-24T19:21:15.337
> 
> 标签：php, post

我正在尝试在 php 中获取一些变量并将用户重定向到第三方站点，并将变量作为 post vars 发送。我知道使用 cookie 可能会更容易，但第三方已经设置为处理帖子。有人对如何做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:25:42.807

您可以使用几种技术。一种是遍历 POST 变量并添加到表单并重新提交表单，可能使用 Javascript onLoad。

```
<html>
    <body onload="document.forms[0].submit()">
        <form action="new-location.php" method="post">
            <?php foreach( $_POST as $key => $val ): ?>
                <input type="hidden" name="<?php echo htmlSpecialChars( $key, ENT_COMPAT, 'UTF-8' ) ?>" value="<?php echo htmlSpecialChars( $val, ENT_COMPAT, 'UTF-8' ) ?>">
            <?php endforeach; ?>
        </form>
    </body>
</html> 
```

* * *

另一种选择是使用 PHP 和 cURL 并将数据发送到远程站点：

```
url_setopt($ch, CURLOPT_POSTFIELDS, $_POST); 
```

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:24:47.630

在 PHP 页面中，使用 cURL 打开到第三方网站的连接并使用此功能：

```
curl_setopt($Curl, CURLOPT_POST, 1); 
curl_setopt($Curl, CURLOPT_POSTFIELDS, 'field1=allo&field2=fsdfsd'); 
```

第三方将收到带有真实 POST 请求的请求。您还可以从第三方网站阅读答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:24:33.167

需要从用户浏览器发送帖子。一种常见的方法是使用一个中间页面，其中包含一个带有隐藏输入元素的表单，其中包含您要发布的变量，然后使用 Javascript 在加载时自动提交表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:25:27.160

一些谷歌搜索表明，除了可怕的表单混乱之外，cURL 是要走的路。我不是专家，但这个链接[http://www.electrictoolbox.com/php-curl-form-post/](http://www.electrictoolbox.com/php-curl-form-post/)和 php cURL 参考应该会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T19:27:13.857

信息不足，但也许您可以在 javascript (jQuery) 的帮助下使用表单发送它

```
<script>
$(function(){
    $('#form').submit();
});
</script>
<form action="external.url/page.php" action="post" id="form">
<input type="hidden" name="variable" value="value" />
</form> 
```

# .net - 将 EDI 转换为 Xml

> ID：11637856
> 
> 赞同：3
> 
> 时间：2012-07-24T19:21:18.033
> 
> 标签：.net, xml, parsing, edi

近 10 年来我没有用 edi 做过任何工作，而且可用于解析它的技术可能已经改变。是否有任何示例代码例程（实际代码，而不是产品）可用于解析 edi 字符串？我知道我可以解析它，但我敢打赌，一些好的例程可以帮助我更快地开始。

顺便说一句，我还不知道对方会发送什么。我想它可能是 x12 但我还不知道的文档类型，所以我现在只是在寻找适用于任何类型代码的一般可能低级别。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:55:33.883

如果您正在寻找免费软件，请从 codeplex 开始

[http://x12parser.codeplex.com/](http://x12parser.codeplex.com/)

# web-services - 如何在没有 ftp 的情况下将文件上传到站点？

> ID：11637859
> 
> 赞同：0
> 
> 时间：2012-07-24T19:21:20.730
> 
> 标签：web-services

我的公司使用的客户管理系统有点糟糕。我们必须向它上传大量文件，但它没有可供我们使用的 ftp 服务器，并且一次只允许通过它的上传器上传一个文件。反正有没有写一个程序来自动化这样的事情？谢谢。

# java - 在java中使用正则表达式进行搜索和替换

> ID：11637860
> 
> 赞同：0
> 
> 时间：2012-07-24T19:21:28.087
> 
> 标签：java

我需要查找并替换文档中存在的所有日期（基本上将其带到当前日期）。使用正则表达式的问题是日期是否采用这种格式

```
CreationDatetime="2012/07/24 10:00:19 649 GMT" 
```

正则表达式将找不到此条目，因为日期附加到另一个字符串。有没有其他方法可以找到所有格式的日期（yyyymmdd、yyyy/mm/dd 等）并将其带到当前日期。

用于搜索一种格式（yyyymmdd）的工作代码，但替换现在不起作用。

```
String re1=".*?";   // Non-greedy match on filler
String re2="((?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3}))[-:\\/.](?:[0]?[1-9]|[1][012])[-:\\/.](?:(?:[0-2]?\\d{1})|(?:[3][01]{1})))(?![\\d])"; // YYYYMMDD 1

    Pattern p = Pattern.compile(re1+re2,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);

    for(Object s : x){
        String temp = s.toString();
        Matcher m = p.matcher(s.toString());
        if (m.find())
        {
            temp.replaceAll(re1+re2, "test");
            System.out.println(temp.toString());
        } 
```

# java - JHelpDev 在搜索中缺少标题

> ID：11637861
> 
> 赞同：0
> 
> 时间：2012-07-24T19:21:28.360
> 
> 标签：java

我正在使用 JHelpDev 为应用程序创建帮助窗口。一切正常，除了当我使用搜索功能时，结果都显示为“无标题”。单击其中一个结果会弹出一个页面，其中突出显示了正确数量的结果，它只是将所有内容标记为“无标题”。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:26:41.680

JDevHelp 使用包裹在

```
<h1></h1> 
```

标签作为索引的标题

# javascript - 相对于 JS 中的 parent.parent 容器的位置元素？没有绝对/固定定位？

> ID：11637866
> 
> 赞同：1
> 
> 时间：2012-07-24T19:21:49.687
> 
> 标签：javascript, jquery, zepto

*我有一个棘手的问题，我正在拼命寻找可行的解决方案。*

A`article#post`和 a`aside#sidebar`并排浮动 - 相当简单。在 my 里面`article#post`是 a`h1`和 a `div.post-entry`。

我想知道我是否可以以某种方式确定`div.post-entry`外部容器的相对偏移量`section#content`。我想这样做的原因是我可以将浮动侧边栏`margin-top`放置在与“div.post-entry”相同的高度上。

**这是我当前的 html 结构的模型：**

```
<section id="content">

    <article id="post">
        <h1>Title of the post</h1>
        <div class="post-entry">
            <p>Something</p>
        </div>
    </article>

    <aside id="sidebar>
        Something
    </aside>

</section> 
```

所以再次，我想找到任何解决方案来获得距离顶部多远的像素值`div.post-entry`位于内部`section#content`。

我的主要问题是我什至`post-entry.offsetTop`无法工作。这应该得到`div.post-entry`相对于的偏移量，`article.post`因为这是它的父级。这实际上也应该对我有用。

```
var articleOffset = $('.post-entry').offsetTop;
console.log($('.post-entry')); //found and exists
console.log(articleOffset); undefined 
```

任何想法为什么这对我也不起作用？为什么我在`offsetTop`这里的值未定义。有一个大`<h1>`的，填充至少为“30px”，可以抵消`div.post-entry`.

关于这件事有什么想法吗？也许还有其他关于如何做到这一点的酷解决方案？我只想让`aside#sidebar`起点在相同的高度，`div.post-entry`但我不想更改标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:25:48.303

您需要从 jQuery 对象中选择 DOM 元素。

```
var articleOffset = $('.post-content')[0].offsetTop; 
```

# hibernate - 奇怪的休眠问题 saveOrupdate 或合并（都不起作用）

> ID：11637873
> 
> 赞同：2
> 
> 时间：2012-07-24T19:22:16.023
> 
> 标签：hibernate, merge

我们有一个电子邮件对象。

email.hbm 有

```
<bag name="emailRecipients" lazy="false" inverse="false"
             cascade="save-update" fetch="select">
            <key column="EMAIL_ID" />           
            <one-to-many class="EmailRecipient" />  
</bag>          
<bag name="emailStateRecipients" lazy="false" inverse="false"
             cascade="save-update" fetch="select">
            <key column="EMAIL_ID" />           
            <one-to-many class="EmailStateRecipient" /> 
</bag> 
```

我正在尝试保存一封包含 EmailRecipient 和 EmailStateRecipient 对象数组列表的新电子邮件。

当我尝试时：

```
this.getHibernateTemplate().saveOrUpdate(email); 
```

出现错误：

```
org.springframework.orm.hibernate3.HibernateSystemException: a different object with the same identifier value was already associated with the session: [com.abc.model.EmailRecipient#0]; nested exception is org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [com.abc.model.EmailRecipient#0] 
```

所以我改为：

```
this.getHibernateTemplate().merge(email); 
```

现在得到这个错误：

```
org.springframework.orm.hibernate3.HibernateObjectRetrievalFailureException: No row with the given identifier exists: [com.abc.model.EmailRecipient#0]; nested exception is org.hibernate.ObjectNotFoundException: No row with the given identifier exists: [com.abc.model.EmailRecipient#0] 
```

有人可以帮助解决这个问题。我想我必须检查对象是否已经存在，如果是，则合并或保存。但不确定如何。另外如果hbm正确？

谢谢

**编辑：**

电子邮件收件人.hbm

```
<hibernate-mapping package="com.abc.model">
    <class name="EmailRecipient" table="EMAIL_RCPNT">
        <id name="emailRecipientId" column="EMAIL_RCPNT_ID" type="long">
            <generator class="sequence">
                <param name="sequence">SEQ_RCPNT_ID_PK</param>
            </generator>            
        </id>
        <property name="roleId" column="ROLE_ID" type="long" />     
    </class>
</hibernate-mapping> 
```

尚未将 emailId 属性添加到 Recipient.hbm，因为它在 email.hbm 中声明为 OneToMany。

另一个奇怪的方面是，这个 (saveOrUpdate) 在我的单元测试中运行良好，但在从应用程序运行时却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:09:30.387

哇！终于解决了这个问题。

EmailRecipientId 被声明为“Long”并将其更改为原始类型解决了该问题。

感谢@Jeroen 要求检查

# java - 使用外部 JS 文件对 Servlet 的 HTML 输出进行更改

> ID：11637879
> 
> 赞同：0
> 
> 时间：2012-07-24T19:22:48.373
> 
> 标签：java, javascript, html, servlets

我想做一件简单的事。

我有一个小服务程序。在`DoPost()`函数内部，我正在编写要在浏览器中显示的 HTML 输出。此 HTML 包含单个图像。单击此图像时，我想提醒其元素 ID。

小服务程序：

```
public void printSinglePlayerBoard(int i_PlayerNumber, HttpServletResponse respose)
throws IOException
{
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    out.println("<html>\n");
    out.println("<script language='javascript' type='text/javascript'
    src='functions.js'></script>\n");
    out.println("<body>\n");
    out.print("<img id='someID' src='somePath' onclick='func(someID)'/>");
    out.print("</form>\n</body>\n</html>\n");
} 
```

函数.js：

```
function func(someID)
{
    alert(someID);
    var x = document.getElementById(someID);
    alert(x);
} 
```

我的问题是我想获得`someID`String 但既不`alert(someID)`或也不`alert(x)`返回我的结果。似乎是什么问题？

`alert(someID)`--> 返回`[Object HTMLImageElement]`

`alert(x)`--> 返回`null`

functions.js 甚至可以识别在 servlet 中创建的 HTML 元素吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:28:48.383

更改此行

```
out.print("<img id='someID' src='somePath' onclick='func(someID)'/>"); 
```

到

```
out.print("<img id='someID' src='somePath' onclick='func(\"someID\")'/>"); 
```

# java - 从 JPanel 内部切换 JFrame 中的 JPanel

> ID：11637885
> 
> 赞同：2
> 
> 时间：2012-07-24T19:23:04.243
> 
> 标签：java, swing, jframe, jpanel

我正在尝试基于从创建的面板内部切换 JFrame 的主面板（这是我的应用程序的顶部内容）的按钮构建一个动态应用程序。

该问题更多地与设计问题而不是开发问题相关。我不确定我的设计，但我会试着解释一下。

我有一个代表我的应用程序的 JFrame，其中包含一个 JTabbedPane（以及其中的多个选项卡）。每个选项卡都包含一个默认的 JPanel，在该 JPanel 内部，我正在调用一个控制器，该控制器正在呈现我的视图（我正在尝试使用 MVC 模式）。

但是从所谓的视图中，我有一些按钮，它们必须切换 JPanel 的内容（Jpanel 包含在 JTabbedPane 中）。而且我正在寻找切换视图的最佳方式，而不会违反 OOP 的标准规则。

示意图：

```
JFrame
    JTabbedPane
        JPanel
            View1
                Button (pointing somehow to View2)
        JPanel
            View3
                 Button (pointing somehow to View4) 
```

当我单击视图 1 中的按钮时，我想要这个：

```
JFrame
    JTabbedPane
        JPanel
            View2
                ...
        JPanel
            View3
                 Button (pointing somehow to View4) 
```

而且，一旦加载了 View 2，如果我通过 JTabbedPane 转到 View3 并单击 View3.button，我想要这样的东西：

```
JFrame
    JTabbedPane
        JPanel
            View2
                ...
        JPanel
            View4
                 ... 
```

正如我所说，这更像是一个设计问题。我的“设计”是否足够好，不必为每个组件提供 JFrame 的参考？我该怎么做？

我希望我的文字没有太多错误，英语不是我的母语。此外，欢迎对我的英语写作技巧进行任何更正。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:37:19.637

我会说你的 JTabbedPane 是对面板感兴趣的类 - 因为它是 JTabbedPane 可以切换它的内容。

所以我会说将 JTabbedPane 扩展为 ?TabbedPane（其中 ? 代表“我的”或您项目中的任何命名约定），并使其扩展 ActionListener，如下所示：

```
public class MyTabbedPane extends JTabbedPane implements ActionListener {
    ...
    public void actionPerformed(ActionEvent aev) {
        // replace panels
        revalidate();
        repaint();
    }
} 
```

然后将选项卡式窗格注册为需要的操作侦听器（可能是按钮）。

如果要切换到多个面板，则需要更多代码来传递状态。您可以编写自己的侦听器：

```
public class PanelSwitchActionListener {
    public void panelSwitchRequested(...);
} 
```

然后通过 Enum 表示要切换到哪个面板，或者甚至可能是面板本身在 panelSwitchRequested() 方法的 (...) 部分。然后向按钮添加一个 Action(Listener) 并使它们针对已注册的 PanelSwitchActionListener 触发 panelSwitchRequested() （希望是您的 JTabbedPane）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:13:12.447

就个人而言，我会重新考虑使用选项卡式窗格和在视图之间切换的设计。通常是/或首选选项卡式窗格。

但是，如果您仍然需要这种方式，请尝试以不同的方式思考您的观点。我认为 JPanels 实际上是 Views。如果您将控制器附加到每个视图并将模型附加到每个控制器，您将能够在它们之间切换，而无需在视图或控制器中放置太多逻辑，但仍将视图与模型解耦。我将一个粗略的例子放在一起，它使用[CardLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)和[Null Object](http://en.wikipedia.org/wiki/Null_Object_pattern)，但在其他方面相当简单。当然，所有的类都应该重命名为适合你项目的东西。

**查看.java**

```
public class View extends JPanel {

    private CardLayout layout;

    public View(Controller controller, JComponent... subviews) {
        layout = new CardLayout();
        setLayout(layout);

        for (int index = 0; index < subviews.length; ++index) {
            JButton changeButton = new JButton("Change");
            changeButton.addActionListener(controller);
            subviews[index].add(changeButton);
            add(subviews[index], "View" + index);
        }
    }

    public void setSubview(int index) {
        layout.show(this, "View" + index);
    }

} 
```

**空视图.java**

```
public class NullView extends View {

    public NullView() {
        super(null);
    }

    @Override
    public void setSubview(int index) {
        // do nothing
    }

} 
```

**控制器.java**

```
public class Controller implements ActionListener {

    private Model model;

    private View view;

    public Controller(Model model) {
        this.model = model;
        this.view = new NullView();
    }

    public void setView(View view) {
        this.view = view;
    }

    public void actionPerformed(ActionEvent e) {
        model.nextIndex();
        view.setSubview(model.getCurIndex());
    }

} 
```

**模型.java**

```
public class Model {

    private int nViews;

    private int curIndex;

    public Model(int nViews) {
        if (nViews <= 0) nViews = 1;
        this.nViews = nViews;
    }

    public void nextIndex() {
        curIndex = (curIndex + 1) % nViews;
    }

    public int getCurIndex() {
        return curIndex;
    }

 } 
```

**在您的内容窗格中：**

```
 Controller controller1 = new Controller(new Model(2));

 View view1 = new View(controller1, subview1, subview2);
 controller1.setView(view1);

 Controller controller2 = new Controller(new Model(3));

 View view2 = new View(controller2, subview3, subview4, subview5);
 controller2.setView(view2);

 JTabbedPane tabbedPane = new JTabbedPane();
 tabbedPane.addTab("Tab1", view1);
 tabbedPane.addTab("Tab2", view2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T22:51:45.797

我会尝试使用模型。该模型将维护一个视图列表和一种方法，给定视图引用，它可以返回下一个视图（即`model.getNextView(view)`）。

这个模型可以传递给你的控制器（在这里我会说一个自定义的 JTabbedPane，正如 pafau 提到的），它可以根据需要构建所有选项卡。通过这种方式，您可以将导航机制与视图分离，并将逻辑委托给模型。

# html - 设置 DOCTYPE 时无法将宽度/高度设置为 img (Firefox)

> ID：11637886
> 
> 赞同：1
> 
> 时间：2012-07-24T19:23:07.723
> 
> 标签：html, css, firefox, doctype

想象三个固定大小的图像：

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
        div.photos img {
            width: 320px;
            height: 240px;
            background-color: black;
        }
    </style>
  </head>
  <body>
    <div class="photos">
        <img src="abc" />
        <img src="def" />
        <img src="ghi" />
    </div>
  </body>
</html> 
```

当您在 IE 或 Chrome 中[查看此类页面](http://jsfiddle.net/wDQw6/)时，您会看到我所期望的 - 三个固定大小的图像。
然而，在 Firefox 中，它不起作用。

但是，如果我将图像设置为`display: block;`或删除`DOCTYPE`（不显示在 jsfiddle 上）它可以工作。

我究竟做错了什么？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:39:40.747

这似乎是 Firefox 中的一个旧功能：我从 2007 年发现了一个关于它的[讨论：](http://www.velocityreviews.com/forums/t548942-firefox-ignores-img-height-width.html)

所以我想这是故意的，不会消失。我猜他们可能会这样想：如果您在图像上设置尺寸，一切都很好，我们将对其进行缩放。但是如果图像丢失，我们将渲染替代文本，这会将`img`元素从替换的内联元素更改为*text*，一个不可替换的内联元素，对于它，我们将不支持`height`and `width`，根据规范。相反，文本决定了尺寸。并且大概 Firefox 的作者认为这是正确的做法，并且只有在 Quirks Mdoe 中他们才会像其他浏览器那样做。

如果您添加`alt`属性（正如您应该的那样，每个都`img`应该有一个），您将看到框大小如何随文本长度而变化。显然 Firefox 将此处的缺失`alt`视为等同于`alt=""`，表示宽度为零。

这可以解释为什么设置`display`为`inline-block`（或`block`）会改变行为：然后`width`和`height`被应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:29:50.277

我认为firefox不会对`<img>`空元素应用高度和宽度，因此它必须像这样渲染，所以使用CSS`display: block;`

这是我的[小提琴](http://jsfiddle.net/wDQw6/1/)

或使用图像并查看...

更新：**[小提琴](http://jsfiddle.net/wDQw6/2/)**

# android-listview - 项目模板中带有 ViewStub 的 ListView - 未显示最后一项的扩展控件

> ID：11637887
> 
> 赞同：0
> 
> 时间：2012-07-24T19:23:14.220
> 
> 标签：android-listview, xamarin.android, viewstub

我有以下应用程序布局： 带有承载片段的线性布局的活动，片段承载线性布局中的列表视图。我已经模板化（不确定这是正确的术语 - 我来自 WPF）如何显示 ListView。有一个始终显示的 3 行部分，以及一个在单击项目时展开的 ViewStub（并且始终只有一个项目要展开）。

在第一次单击每个 ListView 项目时，存根会膨胀（适用于所有项目），然后配置详细信息和 myButton 控件。这适用于所有 ListView 项目 - 但是，对于最后一个项目，详细信息和 myButton 永远不会显示。最重要的是，如果另一个存根被展开，最后一个 ListView 项目将变得不可见——而不是向下移动为当前展开的项目腾出空间。

因此，如果我单击位置 myListView.Items.Count -1 上的 ListView 项目，我看不到任何扩展。如果我单击任何其他 ListView 项目，最后一个 ListView 项目就会消失。

这是片段布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:minWidth="25px"
android:minHeight="25px">
<TextView
    android:text="@string/active_calls"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/Calls_Header" />
<ListView
    android:minWidth="25px"
    android:minHeight="25px"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/ActiveCallsList" />
</LinearLayout> 
```

以及每个 ListView 项的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tableLayout1"
    android:shrinkColumns="*"
    android:stretchColumns="*">
    <TableRow
        android:id="@+id/tableRow1">
        <TextView
            android:text="Caller Name"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:id="@+id/CallerName"
            android:layout_column="0"
            android:layout_span="2" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow2">
        <TextView
            android:text="+41 12 345 6789"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:id="@+id/CallerNumber"
            android:layout_column="0" />
        <TextView
            android:text="00:01:25"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:id="@+id/CallDuration"
            android:layout_column="1" />
    </TableRow>
    <TableRow
        android:id="@+id/tableRow3">
        <TextView
            android:text="Ringing"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:id="@+id/CallStatus"
            android:layout_column="0" />
    </TableRow>
</TableLayout>
<ViewStub
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/viewStub1" 
    android:inflatedId="@+id/CallDetails"
    android:layout="@layout/CallDetails" />
</LinearLayout> 
```

和要扩展的部分

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:text="Text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/CallDetailsText" />
<Button
    android:text="@string/endCall"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/EndCallButton" />
</LinearLayout> 
```

以及与我自己的从 BaseAdapter 派生的 ArrayAdapter 实现相关联的 ItemClick 处理程序。

```
void calls_ItemClick(object sender, AdapterView.ItemClickEventArgs e)
    {
        if (inflatedView != null)
            inflatedView.Visibility = ViewStates.Gone; // make sure only one item is inflated at all times

        var obj = e.Parent.GetItemAtPosition(e.Position);
        var listView = sender as ListView;
        Model.Call t = Model.Calls.MyCalls[e.Position];
        string text = t.CallerName + " " + t.CallState;

        Log.Debug("SmartAppMobile", "Call " + text + " clicked");

        //Toast.MakeText(this.Activity, text, ToastLength.Short).Show();
        ViewStub myStub = e.View.FindViewById<ViewStub>(Resource.Id.viewStub1);

        bool previouslyFound = false;
        if (myStub != null)
        {
            inflatedView = myStub.Inflate();
        }
        else
        {
            Log.Debug("myapp", "View stub not found for " + text);
            inflatedView = e.View.FindViewById<View>(Resource.Id.CallDetails);
            inflatedView.Visibility = ViewStates.Visible;
            previouslyFound = true;
        }

        TextView details = inflatedView.FindViewById<TextView>(Resource.Id.CallDetailsText);
        if (details != null)
            details.Text = "Call details go here... " + t.CallerNumber;
        else
            Log.Debug("myapp", "Call Details Text field not found for " + text);
        Button myButton = inflatedView.FindViewById<Button>(Resource.Id.EndCallButton);
        if (myButton != null)
        {
            if (!previouslyFound)
                myButton.Click += (x, y) =>
                {
                    Model.Calls.MyCalls.Remove(t);
                    //((ArrayAdapter)listView.Adapter).NotifyDataSetChanged();
                    inflatedView.Visibility = ViewStates.Gone;
                };
        }
    } 
```

此外，如果我单击 myButton，应用程序的反应就好像我按下了手机上的后退按钮一样 - 只有在我在代码中添加的 ListView 项才会被删除。

所以我想我必须添加我调用托管片段的活动的方式，以及 ListView 项目的绑定方式：

在我托管 ListView 的片段中：

```
 public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View fragment = inflater.Inflate(Resource.Layout.CallsFragment, null);
        calls = fragment.FindViewById<ListView>(Resource.Id.ActiveCallsList);
        calls.Adapter = new ActiveCallsAdapter(this.Activity, Model.Calls.MyCalls);
        calls.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>(calls_ItemClick);

        return fragment;
    } 
```

和我的通话数据模型

```
public class Calls
{

    private static List<Call> myCalls;

    private static object myLock = new object();

    public static List<Call> MyCalls
    {
        get 
        {
            lock (myLock)
            {
                if (myCalls != null)
                    return myCalls;
                myCalls = new List<Call>();
                myCalls.Add(new Call { CallerName = "some name", CallerNumber = "some phone number", CallState = Model.CallState.Init });
                myCalls.Add(new Call { CallerName = "some other name", CallerNumber = "another number", CallState = CallState.Held });
                return myCalls;
            }
        }
    }

} 
```

我在主要活动中使用的按钮将新项目添加到列表并显示列表：

```
Button button = FindViewById<Button> (Resource.Id.myButton);
        button.Click += delegate 
        {
            button.Text = string.Format ("{0} clicks!", count++);
            Model.Calls.MyCalls.Add(new Model.Call { CallerName = "test " + count, CallerNumber = "" + count, CallState = Model.CallState.Active });
            StartActivity(new Intent(this, typeof(CallsActivity)));
        }; 
```

当然，CallsActivity

```
[Activity(Label = "My Activity")]
public class CallsActivity : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.CallsActivity);
        // Create your application here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:11:38.590

这是一个布局错误。当您对选定的呼叫进行膨胀时，呼叫布局会变大，但其父级不会，因此底部的呼叫会从边缘脱落。这也是为什么看起来底部没有扩展的原因——扩展的内容从底部掉了下来。如果您编辑 CallDetails.axml 以将按钮的 layout_height 设置为 1dp，您可以看到这一点。

您可以通过将 activeCallsList/layout_height（在 CallsFragment.axml 中）更改为 match_parent 或 fill_parent 而不是 wrap_content 来解决此布局问题。在第一次绘制时，activeCallsList 不会保留足够的空间来显示调用，而是会保留尽可能多的空间。这使您的呼叫视图按预期运行。

-最大限度

# facebook - 为什么使用 Google、Facebook 或 Twitter 连接的网站需要新密码

> ID：11637892
> 
> 赞同：1
> 
> 时间：2012-07-24T19:23:32.460
> 
> 标签：facebook, openid, oauth-2.0, twitter-oauth, google-signin

我遇到的很少有网站使用 Google、Facebook 或 Twitter 连接登录。他们仍然要求创建新密码。

例如：[http ://setapp.me/](http://setapp.me/)

**为什么用户在使用 OpenID/Facebook/Twitter 连接时需要设置另一个密码？**

我能想到的一个需求：如果用户断开应用程序与上述任何 OAuth/OpenId 连接服务提供商（Google/FB/Twitter/...）的连接，那么作为用户登录的另一种方式 - 最好实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:42:04.857

他们正在做的是迈向联邦的渐进步骤，但不是我所说的最佳实践。对于尚未准备好完全接受依赖其他身份服务的应用程序，有时与身份提供者联系以加快注册过程仍然很有帮助。换句话说，就像预填充注册表单的一种机制。

但是，如果使用它进行登录，那么拥有本地密码是另一个潜在的漏洞。现实情况是，绝大多数用户只是跨站点重复使用密码。该密码仅与存储它的最弱应用程序一样安全。如果一个应用程序被入侵并且电子邮件和密码被恢复，攻击者就会知道其中很大一部分是其他地方的有效登录。

与 Google/Facebook/etc 联合时最好的办法是根本不向用户询问他们的密码。相信主要的身份提供商会确保帐户信息和凭据的安全，而不是自己承担责任并在您的应用程序遭到入侵时处理后果。

如果你愿意的话，这里有很多很好的阅读：[https ://docs.google.com/a/google.com/document/pub?id=1O7jyQLb7dW6EnJrFsWZDyh0Yq0aFJU5UJ4i5QzYlTjU#h.moajj1qnb85l](https://docs.google.com/a/google.com/document/pub?id=1O7jyQLb7dW6EnJrFsWZDyh0Yq0aFJU5UJ4i5QzYlTjU#h.moajj1qnb85l)

# python - Python没有很好地解析JSON API返回

> ID：11637893
> 
> 赞同：0
> 
> 时间：2012-07-24T19:23:34.507
> 
> 标签：python, json, macos

我回顾了一些与我相关的问题，发现这有点独特。我在 OS X 10.7 上使用 Python 2.7.1。还有一点需要注意：我更像是一名黑客而不是开发人员。

[我从Python 文档](http://docs.python.org/library/json.html)中获取了以下语法，以尝试执行“Pretty Print：”

```
date = {}
data = urllib2.urlopen(url)
s = json.dumps(data.read(), sort_keys=True, indent=4)
print '\n'.join([l.rstrip() for l in s.splitlines()]) 
```

我希望使用 rstrip / splitlines 命令会像示例中那样扩展调用。

另外，不确定它是否相关，但是当试图将输出通过管道传输到`python -mjson.tool`回复时`No JSON object could be decoded`

这是我要解析的 cURL 输出的片段：

```
{"data":[{"name":"Site Member","created_at":"2012-07-24T11:22:04-07:00","activity_id":"500ee7cbbaf02xxx8e011e2e", 
```

等等。

主要目标是让这些乱七八糟的数据更清晰易读，这样我就可以从中学习并开始构建一些基于参数的自动数据抓取。任何让我从绿色走向成功的指导都是巨大的帮助。

谢谢，
mjb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:37:29.520

urllib2.urlopen().read() 的输出是一个字符串，需要先转换为对象才能调用`json.dumps()`它。

修改后的代码：

```
date = {}
data = urllib2.urlopen(url)
data_obj = json.loads(data.read())
s = json.dumps(data_obj, sort_keys=True, indent=4)
print s 
```

# lucene - Lucene 索引 MAXFieldLength

> ID：11637896
> 
> 赞同：1
> 
> 时间：2012-07-24T19:23:39.597
> 
> 标签：lucene

我是 Lucene 的新手，我正在将 Lucene 与 Java 一起使用。我正在阅读涵盖 2.4 版本的 lucene in action book。同样，索引编写器构造函数参数中的最大字段长度将设置为无限制。现在参考javadocs，我推断如果我们想设置字段长度，那么我们使用LimitTokeneAnalyser。我运行了一个示例程序，其中我实例化了一个标准分析器并使用返回 255 的 gerMaxFieldLength 方法进行检查。因此，是否只能使用标准分析器索引 255 归档，并且不推荐使用无限字段长度选项。我们能以任何方式实现这一目标。maxField 长度是否表示该文档的字段中的字符数为 255？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:40:27.603

IndexWriter.MaxFieldLength 至少在 v3.0.2 之前存在于 Lucene 中。从 v3.0.2 开始，MaxFieldLength 的默认值为 10,000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-30T15:34:10.060

在`LimitTokenCountAnalyzer`构造函数中你可以很容易地设置这个' `maxTokenCount`'，这里是API：

> [https://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/LimitTokenCountAnalyzer.html#LimitTokenCountAnalyzer(org.apache.lucene.analysis.Analyzer](https://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/analysis/LimitTokenCountAnalyzer.html#LimitTokenCountAnalyzer%28org.apache.lucene.analysis.Analyzer) , int)

# php - SQL 从数组中插入值

> ID：11637899
> 
> 赞同：0
> 
> 时间：2012-07-24T19:24:01.647
> 
> 标签：php, sql

所以我正在研究一些将一段文本和一个 id 插入表格的代码。我向代码发送文本和用户名。我想取用户名，然后从 users 表中选择与其对应的 id。然后我将它插入到文本表中。

我试过这个：

```
$id = mysql_query("SELECT users.id FROM users WHERE name='$username'");

mysql_query("INSERT INTO `shouts` (`id`, `user`, `text`, `datetime`) VALUES (NULL, '$id', '$text', '$datetime');"); 
```

但它不起作用，因为变量`$id`保存了sql数据。我怎样才能把这些数据变成整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:30:00.107

从[手册](http://php.net/manual/en/function.mysql-query.php)：

> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。

同样来自手册：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

要回答您的问题，请尝试以下操作：

```
$id = mysql_query("SELECT users.id FROM users WHERE name='$username'");
$id = mysql_fetch_assoc($id);
mysql_query("INSERT INTO `shouts` (`id`, `user`, `text`, `datetime`) VALUES (NULL, '". $id['id']."', '$text', '$datetime');"); 
```

虽然这是一个坏主意™，但您应该真正考虑使用[PDO](http://php.net/manual/en/book.pdo.php)。这真的没那么难。它将为您提供准备 SQL 语句的能力，让您知道自己不会成为 SQL 注入的受害者，从而真正能够在晚上更轻松地入睡。无论您自己是否已经是受害者，您拥有的代码充其量也是模棱两可的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:27:09.857

尝试`$id = addslashes($id);`或任何其他编码 sql 字符串的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:27:59.840

> $id

将包含您需要获取 id 并将其放入变量的结果。查看 mysql_fetch_row 函数，我认为这会让你得到你想要的。[mysql_fetch_row 语法](http://php.net/manual/en/function.mysql-fetch-row.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:28:36.253

mysql_query 从不返回普通变量，只返回结果资源。尝试 mysql_fetch_assoc 从选择查询中获取数据。此外，不推荐使用 MySQL php 扩展，建议您迁移到 MySQLi 或 PDO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T19:30:35.660

这应该工作

```
 $sql = mysql_query("SELECT users.id FROM users WHERE name='$username'");
    $id = mysql_fetch_array($sql)['id']; 
```

# php - PHP：strtotime 格式化

> ID：11637900
> 
> 赞同：1
> 
> 时间：2012-07-24T19:24:04.790
> 
> 标签：php, timestamp, strtotime

我正在尝试将可读的时间和日期作为文件名的一部分（在 php 中）。我遇到了各种各样的麻烦，希望有人能提供帮助。我已经尝试了几种不同的建议，这些建议是我在互联网上阅读的（加上我阅读了手册），但我真的没有得到任何正确的工作。现在我有这个：

```
$Time=strtotime("now");
$date=DateTime::createFromFormat('m/d/Y H:i:s', '7/24/2012 14:40:30');
$date_readable=$date->$Timestamp(); 
```

然后，我将 $date_readable 添加到文件名中。它编译并运行，但它根本不格式化日期。它仍然将其作为时间戳提供。关于如何使这项工作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:27:25.893

例如，您可以使用简单的日期功能来做到这一点

```
$time = strtotime("now");
$formatDate = date('F jS, Y h:i:s A', $time);
echo $formatDate; 
```

这将打印类似

```
July 25th, 2012 1:02:29 am 
```

`DateTime``date`class 比使用简单函数更强大，因为`DateTime`class 提供了强大的 API，而且它是面向对象的。但是对于简单的日期转换，我会坚持使用 php 的日期函数。因为那可以达到我的目的。

有关更多格式选项，请查看此链接[http://www.php.net/manual/en/function.date.php#refsect1-function.date-parameters](http://www.php.net/manual/en/function.date.php#refsect1-function.date-parameters)

# unit-testing - 单元测试逻辑，集成测试数据

> ID：11637901
> 
> 赞同：2
> 
> 时间：2012-07-24T19:24:05.413
> 
> 标签：unit-testing, integration-testing

我在这里讨论了单元测试的价值：

[如果我只能使用集成测试，我为什么还要费心进行单元测试？](https://stackoverflow.com/questions/2609693/why-should-i-bother-with-unit-testing-if-i-can-just-use-integration-tests)

但我想我可以从中推断出，单元测试适用于谨慎的逻辑方法，但是当数据被操纵时，你需要退回到集成测试。

我遇到的问题是在现实世界的 LOB 应用程序中，它们 99% 的工作是操作数据，这是否意味着只有 1% 的典型应用程序适合进行单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:26:41.213

集成测试只是测试接口是否返回了预期的结果。单元测试是非常具体和非常小的测试，以确认内部工作正常。它们有助于暴露集成测试很难找到的代码的黑暗区域。如果您永远不允许更改或重用正在测试的组件，那么集成测试非常棒。

单元测试让您对可能未使用的代码功能充满信心，或者可能会遇到导致它们行为不端或失败的奇怪情况。这有点像对汽车的各个齿轮进行压力测试，而不是滥用整辆车让它们失效。

关于数据操作，如果您在对流程进行单元测试时遇到困难，那么它应该指向您，您还没有将其模块化得足够好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:31:02.087

当涉及数据时，我仍然会使用单元测试。例如，当我在 web 应用程序中测试我的响应处理程序时，我不想触发一个实际的 ajax 请求来测试我的处理程序。相反，我将一些示例 json 放在一个字符串中，然后将其传递给我的处理程序。

如果我正在编写一个从文件读取数据的应用程序，我的数据处理方法将与实际反序列化文件的代码完全分开。因此，在这种情况下，我可以再次获取一些真实世界的数据，并将其传递给正在测试的数据处理方法。

您会看到，使用单元测试也会影响您的代码*设计*。在这些示例中，处理数据的方法/类与我获取数据的方式完全分离（即解耦）。

作为说明，我可能还会在其中进行一些集成/功能测试以作为良好的衡量标准，但我完全不同意单元测试仅适用于 1% 的时间的观点。

# objective-c - CGDisplayCopyAllDisplayModes() 没有给出可用模式的完整列表

> ID：11637904
> 
> 赞同：2
> 
> 时间：2012-07-24T19:24:24.447
> 
> 标签：objective-c, macos, cocoa, osx-lion, screen-resolution

我一直在尝试编写一个简单的应用程序，将 iMac 和连接的投影仪的显示分辨率重置为 1024x768、85 Hz 和 32 位颜色。

当投影仪通过 VGA 或 HDMI 直接连接到 mac 时，CGDisplayCopyAllDisplayModes() 函数会给出一个模式列表，其中包括我要应用的设置。但是我的大学使用 Extron VGA 墙盒将 VGA 线连接到投影仪，这会导致 CGDisplayCopyAllDisplayModes() 提供更小的（仅 800x600 和 640X480）模式列表。此外，使用壁挂盒时的显示器名称只是 VGA 显示器，而不是 Np-511 或投影仪的名称。奇怪的是，系统偏好设置->显示即使在那时也显示 1024x768 设置，让我也应用它。

有什么方法可以为投影仪获取更大的模式列表，从头开始创建 1024x768 模式并应用它（我已经确认投影仪支持它）或者只是让系统偏好为我选择该模式？我已经写了一个applescript来做后者，但是显示偏好会根据连接的投影仪而变化，所以我需要一个更通用的解决方案。

期待您的帮助！我添加了一些我使用的代码，如果有帮助可以包含更多代码。

```
 CGGetOnlineDisplayList (MAX_DISPLAYS, displays, &numDisplays); // to get list of display ids
 // ... now iterating over list of displays
 CFArrayRef modeList = CGDisplayCopyAllDisplayModes (displays[i], NULL); 
```

# c# - 使用 AES / Rijndael 在 PHP 中加密，在 C# (WP7 / Silverlight) 中解密

> ID：11637905
> 
> 赞同：2
> 
> 时间：2012-07-24T19:24:26.317
> 
> 标签：c#, php, silverlight, windows-phone-7, encryption

我在我的 android 应用程序中使用了一个用 PHP 编写的 REST 服务，没有太多麻烦。现在我正在尝试在 Windows Phone 应用程序中使用它，我已经快疯了！

到目前为止我所知道的：[Silverlight 将只接受 CBC 模式下的 Aes 和 PKCS7 填充。](http://msdn.microsoft.com/en-us/library/bb352553%28v=vs.95%29)

我得到的是：“填充无效且无法删除”异常（参见底部的完整代码）：

```
plaintext = srDecrypt.ReadToEnd(); 
```

如果我在 C# 中加密和解密，使用相同的配置，它工作正常。当我尝试从 PHP 加密字符串中用 C# 进行解密时，它会因上述错误而失败。

我的 PHP 脚本执行以下操作：

```
function encrypt128($message) {
    $vector = "DB96A56CCA7A69FC";
    $key = "6DBC44F54CA3CFDEDDCA140CA46A99C1"; // PHP md5 function leaves it in lower case, so I just copied the key from C# debug.

    //PKCS7 Padding
    $block = mcrypt_get_block_size('rijndael_128', 'cbc');
    $pad = $block - (strlen($message) % $block);
    $message.= str_repeat(chr($pad), $pad);

    $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', 'cbc', '');
    mcrypt_generic_init($cipher, $key, $vector);
    $result = mcrypt_generic($cipher, $message);
    mcrypt_generic_deinit($cipher);

    return base64_encode($result);
} 
```

在 C# (Silverlight / Windows Phone 7) 中，我使用以下内容进行解密：

```
//Where buffer is the string data I got after calling the PHP REST service.
DecryptStringFromBytes(Convert.FromBase64String(buffer), MD5Core.GetHash("7a272d3e41372c547a272d3e41372c54"), System.Text.Encoding.UTF8.GetBytes("DB96A56CCA7A69FC"));

static string DecryptStringFromBytes(byte[] cipherText, byte[] Key, byte[] IV)
{
    // Check arguments.
    if (cipherText == null || cipherText.Length <= 0)
        throw new ArgumentNullException("cipherText");
    if (Key == null || Key.Length <= 0)
        throw new ArgumentNullException("Key");
    if (IV == null || IV.Length <= 0)
        throw new ArgumentNullException("Key");

    // Declare the string used to hold
    // the decrypted text.
    string plaintext = null;

    // Create an RijndaelManaged object
    // with the specified key and IV.
    using (AesManaged rijAlg = new AesManaged())
    {
        rijAlg.Key = Key;
        rijAlg.IV = IV;

        // Create a decrytor to perform the stream transform.
        ICryptoTransform decryptor = rijAlg.CreateDecryptor(rijAlg.Key, rijAlg.IV);

        // Create the streams used for decryption.
        using (MemoryStream msDecrypt = new MemoryStream(cipherText))
        {
            using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
            {
                using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                {

                    // Read the decrypted bytes from the decrypting stream
                    // and place them in a string.
                    plaintext = srDecrypt.ReadToEnd();
                }
            }
        }
    }
    return plaintext;
} 
```

最大的问题是：我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:52:50.587

所以这里是答案：

我从 PHP 和 C# 中删除了 MD5 废话，它们现在可以正常工作。

以防万一您在这里寻找相同的答案，这里有一个示例代码。不要忘记制作自己的密钥和iv（虽然下面的那些可以工作，但不建议使用！）

PHP：

```
function encrypt128($message) {
    $vector = "0000000000000000";
    $key = "00000000000000000000000000000000";

    $block = mcrypt_get_block_size('rijndael_128', 'cbc');
    $pad = $block - (strlen($message) % $block);
    $message .= str_repeat(chr($pad), $pad);

    $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', 'cbc', '');
    mcrypt_generic_init($cipher, $key, $vector);
    $result = mcrypt_generic($cipher, $message);
    mcrypt_generic_deinit($cipher);

    return base64_encode($result);
} 
```

C＃：

```
byte[] cripted = EncryptStringToBytes("Test", System.Text.Encoding.UTF8.GetBytes("00000000000000000000000000000000"), System.Text.Encoding.UTF8.GetBytes("0000000000000000")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-16T09:23:10.187

使用 PHP 加密/解密：

```
class Cipher {
    private $key, $iv;
    function __construct() {
        $this->key = "edrtjfjfjlldldld";
        $this->iv = "56666852251557009888889955123458";
    }
    function encrypt($text) {

        $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
        $padding = $block - (strlen($text) % $block);
        $text .= str_repeat(chr($padding), $padding);
        $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->key, $text, MCRYPT_MODE_CBC, $this->iv);

        return base64_encode($crypttext);
    }

    function decrypt($input) {
        $dectext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->key, base64_decode($input), MCRYPT_MODE_CBC, $this->iv);
        return $dectext;
    }
} 
```

使用 C# 加密/解密：

```
public class RijndaelSimple
    {
        const string iv = "56666852251557009888889955123458";
        const string key = "edrtjfjfjlldldld";

        static public String EncryptRJ256(string plainText)
        {
            var encoding = new UTF8Encoding();
            var Key = encoding.GetBytes(key);
            var IV = encoding.GetBytes(iv);
            byte[] encrypted;

            using (var rj = new RijndaelManaged())
            {
                try
                {
                    rj.Padding = PaddingMode.PKCS7;
                    rj.Mode = CipherMode.CBC;
                    rj.KeySize = 256;
                    rj.BlockSize = 256;
                    rj.Key = Key;
                    rj.IV = IV;

                    var ms = new MemoryStream();

                    using (var cs = new CryptoStream(ms, rj.CreateEncryptor(Key, IV), CryptoStreamMode.Write))
                    {
                        using (var sr = new StreamWriter(cs))
                        {
                            sr.Write(plainText);
                        }
                        encrypted = ms.ToArray();
                    }
                }
                finally
                {
                    rj.Clear();
                }
            }

            return Convert.ToBase64String(encrypted);
        }

        static public String DecryptRJ256(string input)
        {
            byte[] cypher = Convert.FromBase64String(input);

            var sRet = "";

            var encoding = new UTF8Encoding();
            var Key = encoding.GetBytes(key);
            var IV = encoding.GetBytes(iv);

            using (var rj = new RijndaelManaged())
            {
                try
                {
                    rj.Padding = PaddingMode.PKCS7;
                    rj.Mode = CipherMode.CBC;
                    rj.KeySize = 256;
                    rj.BlockSize = 256;
                    rj.Key = Key;
                    rj.IV = IV;
                    var ms = new MemoryStream(cypher);

                    using (var cs = new CryptoStream(ms, rj.CreateDecryptor(Key, IV), CryptoStreamMode.Read))
                    {
                        using (var sr = new StreamReader(cs))
                        {
                            sRet = sr.ReadLine();
                        }
                    }
                }
                finally
                {
                    rj.Clear();
                }
            }

            return sRet;
        }

    } 
```

# ankhsvn - 获取最新版本时，AnkhSVN 未获得引用的 dll

> ID：11637910
> 
> 赞同：2
> 
> 时间：2012-07-24T19:24:37.783
> 
> 标签：ankhsvn

一位同事修改了 Visual Studio 2010 解决方案以包含一个包含 Moq dll 的 Libs 文件夹。他使用 TortoiseSVN 对 SVN 进行了修改。

我安装了 AnkhSVN 版本 2.3.11269，它一直运行良好，直到现在。当我尝试将解决方案更新到最新版本时，Libs 文件夹显示在解决方案资源管理器中，但其中的 Moq.dll 文件旁边有一个蓝色问号，测试项目在 Moq 参考旁边显示一个警告标志，并且两者都没有dll 和文件夹都已下载到我的本地文件系统。

有没有人有这个问题？我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:00:28.670

在项目级别更新仅更新包含项目的目录。尝试在解决方案级别进行更新以获取所有更改。

如果你已经这样做了：

确保 Moq dll 与解决方案的其余部分位于同一工作副本中。如果是，请转到 File - Subversion - Change Source Control 以更正解决方案根目录的值。当您在解决方案级别更新时，此根会更新。

# java - 如何在解析html页面时从html页面中的javascript函数中提取变量值

> ID：11637911
> 
> 赞同：1
> 
> 时间：2012-07-24T19:24:37.973
> 
> 标签：java, javascript, html, html-parsing, jsoup

我必须解析一个html页面。我必须在下面分配给 javascript 函数的 html 中提取 name 元素的值。我如何使用 JSoup 来做到这一点。

```
<input type="hidden" name="fields.DEPTID.value"/> 
```

JS：

```
departmentId.onChange = function(value) {                                       
    var departmentId = dijit.byId("departmentId");

    if (value == null || value == "") {
        document.transferForm.elements["fields.DEPTID.value"].value = "";
        document.transferForm.elements["fields.DEPTID_DESC.value"].value = "";
    } else {
        document.transferForm.elements["fields.DEPTID.value"].value = value;
        document.transferForm.elements["fields.DEPTID_DESC.value"].value = departmentId.getDisplayedValue();

        var locationID = departmentId.store.getValue(departmentId.item, "loctID");
        var locationDesc = departmentId.store.getValue(departmentId.item, "loct");

        locationComboBox = dijit.byId("locationId");

        if (locationComboBox != null) {
            if (locationID != "") {
                setLocationComboBox(locationID, locationDesc);
            } else {
                setLocationComboBox("AMFL", "AMFL - AMY FLORIDA");
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:58:19.057

I'll try to teach you form the top:

```
//Connect to the url, and get its source html
Document doc = Jsoup.connect("url").get();

//Get ALL the elements in the page that meet the query
//you passed as parameter. 
//I'm querying for all the script tags that have the
//name attribute inside it
Elements elems = doc.select("script[name]");

//That Elements variable is a collection of
//Element. So now, you'll loop through it, and
//get all the stuff you're looking for
for (Element elem : elems) {
    String name = elem.attr("name");

    //Now you have the name attribute
    //Use it to whatever you need.
} 
```

Now if you want some help with the Jsoup querys to get any other elements you might want, here you go the API documentation to help: [Jsoup selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)

Hope that helped =)

# c# - gpx 文件扩展节点 gpxtpx:TrackPointExtension

> ID：11637912
> 
> 赞同：1
> 
> 时间：2012-07-24T19:24:41.940
> 
> 标签：c#, xml, xml-parsing, gpx, garmin

我正在尝试读取在 Garmin GPS 设备中创建的 GPX 文件。我有以下代码尝试提取所有数据，但它挂在节点中并且它是子节点，即。=>

这是代码

```
//returns http://www.topografix.com/GPX/1/1
XNamespace gpx = GetGpxNameSpace();
XDocument gpxDoc = GetGpxDoc();
XNamespace gpxtpx = XNamespace.Get("gpxtpx");
var waypoints = from waypoint in gpxDoc.Descendants(gpx + "trkpt")
                select new
                {
                    Latitude = waypoint.Attribute("lat").Value,
                    Longitude = waypoint.Attribute("lon").Value,
                    Elevation = waypoint.Element(gpx + "ele") != null ?
                        waypoint.Element(gpx + "ele").Value : null,
                    Dt = waypoint.Element(gpx + "time") != null ?
                        waypoint.Element(gpx + "time").Value : null,
                    hr = waypoint.Element(gpx+ "extensions").Element(gpxtpx +"TrackPointExtension").Element(gpxtpx +"hr").Value
                };

StringBuilder sb = new StringBuilder();
foreach (var wpt in waypoints)
{
    // This is where we'd instantiate data
    // containers for the information retrieved.
    sb.Append(
        string.Format("Name:{0} Latitude:{1} Longitude:{2} Elevation:{3} Date:{4}\n",
        "x", wpt.Latitude, wpt.Longitude,
        wpt.Elevation, wpt.Dt));
}

return sb.ToString(); 
```

和 xml 节点

```
<trkseg>
   <trkpt lon="-111.5252978168428" lat="35.07395471446216">
      <ele>2084.800048828125</ele>
      <time>2012-07-15T14:47:16.000Z</time>
      <extensions>
         <gpxtpx:TrackPointExtension>
            <gpxtpx:hr>155</gpxtpx:hr>
         </gpxtpx:TrackPointExtension>
      </extensions>
   </trkpt>
...
</trkseg> 
```

我可以很好地访问所有其他节点，但是在尝试访问 hr 节点时，出现错误。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T18:00:12.597

尝试改变

```
XNamespace gpxtpx = XNamespace.Get("gpxtpx"); 
```

到

```
XNamespace gpxtpx = XNamespace.Get("http://www.garmin.com/xmlschemas/TrackPointExtension/v1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T12:31:58.590

上面的命名空间建议有效，我发现有必要防止空节点：

```
HeartRate = trackpoint.Element(gpx + "extensions") != null ?
                                      (trackpoint.Element(gpx + "extensions").Element(gpxtpx + "TrackPointExtension") != null ?
                                       (trackpoint.Element(gpx + "extensions").Element(gpxtpx + "TrackPointExtension").Element(gpxtpx +"hr") != null ? 
                                          trackpoint.Element(gpx + "extensions").Element(gpxtpx + "TrackPointExtension").Element(gpxtpx +"hr").Value : null ) : null   ) : null 
```

# database - 即使用户名唯一也创建用户 ID？

> ID：11637914
> 
> 赞同：5
> 
> 时间：2012-07-24T19:24:47.033
> 
> 标签：database, database-design

我的 Web 应用程序将有各种类型的用户：root 用户、系统管理员、客户、承包商等。我想要一个表“用户”，其中包含“用户名”、“密码”和“角色”，其中角色是上述角色之一。例如，我还将有一个名为“客户”的表，用于存储客户特定的属性。

这是我的问题。由于所有用户名都是唯一的，我可以使用用户名作为 User 表的主键。但是，创建一个“用户 ID”列并使用它而不是用户名列作为 PK 是否更有意义？还有许多其他表将使用此用户 PK 作为外键，我认为从性能的角度来看，比较用户 ID 而不是用户名文本字符串会更快。

谢谢您的答复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T20:57:42.083

这是古老的自然与替代关键辩论。

简而言之，没有什么是一成不变的，您需要在相互竞争的利益之间取得平衡：

1.  如果您预计需要更新密钥，请使用代理（不需要更新）以避免 ON UPDATE CASCADE。
2.  如果您需要查找键，**而不是其他列**，请使用自然键来完全避免 JOIN。但是，如果您需要查找的不仅仅是键，请使用代理来使 FK 和随附的索引更精简、更高效。
3.  您是否预计自然键上的范围扫描？如果是，则将其[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)。但是，二级索引在聚集表中可能很昂贵，它与代理键相冲突。
4.  你的桌子很大吗？通过只有一个索引（在自然键上）而不是两个（在自然键**和**代理上）来节省空间。
5.  复合自然键（位于标识关系的子端点）可能是[正确建模菱形依赖项](https://stackoverflow.com/questions/9082575/choosing-from-multiple-candidate-keys/9082972#9082972)所必需的。
6.  代理可能对 ORM 工具更友好。

如果是用户名...

1.  您可能希望允许更新。
2.  您不太可能**只**需要查找用户名。
3.  对用户名的范围扫描没有意义（与 equi-searches 不同）。
4.  你不是在储存地球上的全部人口，是吗？
5.  我们在这里谈论的是“独立”自然键，而不是识别关系结果的自然键。
6.  未知？

...所以在这种情况下，代理键可能是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T19:33:49.810

我会创建用户 ID，因为虽然用户名可能是唯一的，但它们通常不是不可更改的，而且我不希望更改数千或数百万条记录，因为 HLGEM 想成为 HLGEM_1。整数上的进一步连接更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T19:40:29.387

有两种思想流派。数据库纯粹主义者认为，您应该始终尽可能使用自然键（这是有道理的）。因此，如果您订阅该思路，并且用户名是不可更改的，那么将密钥设为用户名。

数据库实用主义者认为代理键更有用，并且往往能更好地适应需求的变化。在某些情况下，它们也可以更快，特别是对于大字符串键。还有安全问题，因为使用自然密钥可能会泄露代理密钥无法提供的信息。

# django - 表 social_auth_association 不存在

> ID：11637916
> 
> 赞同：2
> 
> 时间：2012-07-24T19:24:49.890
> 
> 标签：django, django-models, django-socialauth

当我尝试使用[social_auth](https://github.com/krvss/django-social-auth)通过 OpenID 登录时，出现错误：表 'django_db.social_auth_association' 不存在。

我不得不调用**syncdb**，但它没有为 social_auth 创建任何表。

为什么**syncdb**不使用 social_auth 的模型？

这是我的日志：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/login/yandex/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django_ipgeobase',
 'myproject.main',
 'social_auth',
 'openid')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File ".../django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File ".../myproject/social_auth/decorators.py" in wrapper
  37\.                 return func(request, backend, *args, **kwargs)
File ".../myproject/social_auth/views.py" in auth
  27\.     return auth_process(request, backend)
File ".../myproject/social_auth/views.py" in auth_process
  85\.     if backend.uses_redirect:
File ".../myproject/social_auth/backends/__init__.py" in uses_redirect
  504\.         return self.openid_request().shouldSendRedirect()
File ".../myproject/social_auth/backends/__init__.py" in openid_request
  510\.                                                             extra_params))
File ".../myproject/openid/consumer/consumer.py" in begin
  353\.             return self.beginWithoutDiscovery(service, anonymous)
File ".../myproject/openid/consumer/consumer.py" in beginWithoutDiscovery
  376\.         auth_req = self.consumer.begin(service)
File ".../myproject/openid/consumer/consumer.py" in begin
  598\.             assoc = self._getAssociation(service_endpoint)
File ".../myproject/openid/consumer/consumer.py" in _getAssociation
  1158\.         assoc = self.store.getAssociation(endpoint.server_url)
File ".../myproject/social_auth/store.py" in getAssociation
  24\.                                                                handle)
File ".../myproject/social_auth/db/base.py" in get_oid_associations
  135\.                 for assoc in Association.objects.filter(**args)
File ".../django/db/models/query.py" in _result_iter
  118\.                 self._fill_cache()
File ".../django/db/models/query.py" in _fill_cache
  875\.                     self._result_cache.append(self._iter.next())
File ".../django/db/models/query.py" in iterator
  291\.         for row in compiler.results_iter():
File ".../django/db/models/sql/compiler.py" in results_iter
  763\.         for rows in self.execute_sql(MULTI):
File ".../django/db/models/sql/compiler.py" in execute_sql
  818\.         cursor.execute(sql, params)
File ".../django/db/backends/util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File ".../django/db/backends/mysql/base.py" in execute
  114\.             return self.cursor.execute(query, args)
File ".../MySQLdb/cursors.py" in execute
  174\.             self.errorhandler(self, exc, value)
File ".../MySQLdb/connections.py" in defaulterrorhandler
  36\.     raise errorclass, errorvalue

Exception Type: DatabaseError at /login/yandex/
Exception Value: (1146, "Table 'django_db.social_auth_association' doesn't exist") 
```

这是我的settings.py：

```
import os

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'django_db',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '1',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

DEFAULT_CHARSET = 'utf-8'

TIME_ZONE = 'Europe/Moscow'

LANGUAGE_CODE = 'en-us'

SITE_ID = 1

USE_I18N = True
USE_L10N = True

USE_TZ = True

MEDIA_ROOT = os.path.join(os.path.dirname(__file__), "media") 
MEDIA_URL = '/media/' 

STATIC_ROOT = ''
STATIC_URL = '/static/'

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.contrib.messages.context_processors.messages',
    'social_auth.context_processors.social_auth_by_type_backends',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'myproject.urls'

WSGI_APPLICATION = 'myproject.wsgi.application'

TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), 'templates'),)

INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django_ipgeobase',
    'myproject.main',
    'social_auth',
    'openid',
)

AUTHENTICATION_BACKENDS = (
    'social_auth.backends.contrib.vkontakte.VKontakteBackend',
    'social_auth.backends.OpenIDBackend',
    'social_auth.backends.google.GoogleBackend',
    'social_auth.backends.contrib.yandex.YandexBackend',
    'django.contrib.auth.backends.ModelBackend',
)

LOGIN_URL          = '/login-form/'
LOGIN_REDIRECT_URL = '/logged-in/'
LOGIN_ERROR_URL    = '/login-error/'

SOCIAL_AUTH_USER_MODEL = 'main.CustomUser'

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'main.pipeline.redirect_to_form',
    'main.pipeline.username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'main.pipeline.redirect_to_form2',
    'main.pipeline.first_name',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:37:14.067

经过一番研究，我找到了解决方案。

问题出在我使用的[fork](https://github.com/krvss/django-social-auth)上。当我从他们那里尝试干净的例子时，我得到了同样的错误，那个表 social_auth_association 不存在。

然后我尝试使用[原始](https://github.com/omab/django-social-auth)存储库。当我运行**syncdb**时，我得到了：

```
Creating table social_auth_usersocialauth
Creating table social_auth_nonce
Creating table social_auth_association 
```

因此，出现了所需的表。之后，我比较了存储库中的源并找到了影响模型搜索的行：

```
import types
..
globals().update((name, value) for name, value in
    ((name, getattr(SOCIAL_AUTH_MODELS_MODULE, name))
        for name in dir(SOCIAL_AUTH_MODELS_MODULE))
            if isinstance(value, (type, types.ClassType))) 
```

代替

```
globals().update((name, getattr(SOCIAL_AUTH_MODELS_MODULE, name))
    for name in dir(SOCIAL_AUTH_MODELS_MODULE)) 
```

在 social_auth/models.py 中。

换句话说，我将 fork 中的 models.py 替换为原始存储库中的 models.py 并运行了**syncdb**。

# xml - 在现有的 flash xml as3.0 模板中添加播放停止音乐按钮时出错

> ID：11637919
> 
> 赞同：0
> 
> 时间：2012-07-24T19:25:00.530
> 
> 标签：xml, actionscript-3, flash, addeventlistener

我正在尝试编辑现有的 Flash 模板。使用 Flash CS6 和 ActionScript 3.0 --- 有点新...

我在源文件中有一个页脚剪辑。我在那里编辑并添加了两个按钮。主 .fla 是模板的名称，它有一个单层和使用 main.as 定义和控制的动作层

通过使用以下脚本在此处编写动作层，我能够成功播放音乐：

```
var music:Sound = new Sound(new URLRequest("music.mp3"));
var sc:SoundChannel = music.play(); 
```

声音播放得很好。我现在面临的问题是添加播放和停止按钮。我使用以下脚本来实现这一点：

```
import flash.events.Event;
import flash.media.Sound;
import flash.net.URLRequest;
import flash.media.SoundChannel;
import flash.events.MouseEvent;

var music:Sound = new Sound(new URLRequest("music.mp3"));
var sc:SoundChannel = music.play();

btnStop.addEventListener(MouseEvent.CLICK, stopMusic);

function stopMusic(Event:MouseEvent):void{
    sc.stop;
}

btnPlay.addEventListener(MouseEvent.CLICK, playMusic);
function playMusic(Event:MouseEvent):void{
    sc = music.play();
} 
```

在这里我得到错误：

> 场景 1，图层“动作”，第 1 帧，第 10 行 1061：通过静态类型 Class 的引用调用可能未定义的方法 addEventListener。

请指导我如何纠正它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:41:20.430

我会试着亲切地指导你。

您的错误是告诉您 btnStop 类中没有名为 addEventListener 的静态方法。当你给一个 mc 一个名字时，它会创建一个新的类。你正在做的就像在做......

```
Sound.play(); 
```

当你想要 music.play();

要解决此问题，请单击设计部分中的按钮，在属性面板中向右转，您需要为按钮指定一个实例名称“btnStop”。您也必须对 btnPlay 按钮执行相同操作。现在，当您在代码中调用 btnStop 时，您将调用按钮的实例而不是类本身。

此外，在您的 stopMusic 功能中，您应该具有：

```
sc.stop(); 
```

代替：

```
sc.stop; 
```

此外，您的两个函数中的参数名称不能是“事件”事件是 AS3 API 中的类的名称。尝试使用参数名称“e”或“事件”（大小写很重要）。

# tsql - 从选择查询动态创建和加载表

> ID：11637925
> 
> 赞同：-1
> 
> 时间：2012-07-24T19:25:28.940
> 
> 标签：tsql

```
SELECT 
    MEM_ID, [C1],[C2] 
from  
   (select 
        MEM_ID, Condition_id, condition_result 
    from tbl_GConditionResult 
   ) x 
pivot  
   ( 
      sum(condition_result) 
      for condition_id in ([C1],[C2]) 
   ) p 
```

上面的查询返回三列数据。直到运行时，我才会知道 select 语句中有多少列。是否可以将 select 语句中的数据加载到动态创建的表中？处理完动态创建的表中的数据后，我想删除该表。

感谢您的帮助。

史密斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:45:12.640

是的，做一个 SELECT INTO 例如

```
SELECT 
    MEM_ID, [C1],[C2] 
into #TEMP
from  
   (select 
        MEM_ID, Condition_id, condition_result 
    from tbl_GConditionResult 
   ) x 
pivot  
   ( 
      sum(condition_result) 
      for condition_id in ([C1],[C2]) 
   ) p 

-- Do what you need with the TEMP table

DROP TABLE #TEMP 
```

# c# - 按顺序重命名文件扩展名

> ID：11637926
> 
> 赞同：0
> 
> 时间：2012-07-24T19:25:32.607
> 
> 标签：c#, loops, timer, windows-services

Windows 服务 - C# - VS2010

我有多个 FileWatcher 服务实例。每个人都在目录中寻找不同的扩展名。我有一个单独的路由器服务，它监视 zip 文件的目录并将扩展名重命名为服务查看的值之一。

例子：

有问题的目录（所有 FileWatcher 服务都监视此目录）包含以下文件：

a.zip、b.zip、c.zip

FileWatcher1 查找 *.000 的扩展名，FileWatcher2 查找 *.001 的扩展名，FileWatcher3 查找 *.002 的扩展名

路由器将看到 .zip 文件并更改 zip 文件的文件扩展名，但它应该保持顺序，以便将相同数量的工作委派给每个 FileWatcher。

另外，如果有两个 zip 文件被丢弃，它会改变 a.zip -> a.000 和 b.zip -> b.001，但如果 5 分钟后又有一批 zip 文件被丢弃，它应该知道将下一个文件重命名为 *.002。

我的一切工作正常，但现在我需要将顺序部分实现到路由器并且不确定最佳实现方式（当前路由器正在将每个扩展名更改为 *.000，因此只有一个 FileWatcher 正在完成工作）。我知道这可能被认为是一种廉价的方式，但这是我们目前真正需要的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:30:46.710

路由器可以只保留一个计数器并为每个新文件执行 mod 3（或 N，其中 N 是观察者的数量）操作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:40:40.367

或许换一种看待它的方式。你有没有想过有一个单一的观察者，然后使用一个线程池？我建议这样做的原因是您必须开始查看字段的大小和复杂性以充分分配工作。您可能会开始将更多工作推到 .000，因为当它仍在忙于处理第一个作业的大量数据时，它排在后面，而 .001 可能是空闲的，因为它正在处理一个小文件。

如果你真的想解决下一个分机的问题，为什么不保留一个带有下一个分机号码的静态变量。我不是 100% 确定 Router Filewatcher 是否会在一个接一个地看到新文件时运行多个线程，但我不这么认为。如果确实发生了这种情况，那么您将需要在访问静态变量时添加一些线程安全代码。

# gstreamer - 如何使用 gstreamer 创建直播？

> ID：11637927
> 
> 赞同：4
> 
> 时间：2012-07-24T19:25:34.327
> 
> 标签：gstreamer, gst-launch

我想流式传输我的网络摄像头，我尝试使用 vlc，但在同一网络上的服务器和客户端之间出现 10-15 秒的延迟

```
vlc v4l2:// :v4l2-dev=/dev/video0 :v4l2-width=640 :v4l2-height=480 --sout="#transcode{vcodec=h264,vb=800,scale=1,acodec=mp4a,ab=128,channels=2,samplerate=44100}:rtp{sdp=rtsp://:8554/live.ts}" -I dummy 
```

现在我想测试 gstreamer，但找不到任何示例，如何使用 gstreamer 设置实时网络摄像头流（rtsp 或 http）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-10T07:34:51.300

要创建 YouTube 直播活动，需要包含 x264+aac 的 RTMP 流。

```
gst-launch -v videotestsrc \
    ! video/x-raw-yuv,width=640,height=480,framerate=30/1 \
    ! x264enc key-int-max=60 \
    ! h264parse \
    ! flvmux name=mux \
    audiotestsrc ! queue ! audioconvert ! ffenc_aac ! aacparse ! mux. \
    mux. ! rtmpsink location="rtmp://<stream-server-url>/" 
```

实时提要中的关键帧必须最多每 2 秒出现一次，因此`key-int-max=<double framerate>`.

请注意，RTMP 在 TCP 上工作，因此在坏通道上它会遭受很大的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:51:26.110

[查看http://cgit.freedesktop.org/gstreamer/gst-rtsp-server/tree/examples](http://cgit.freedesktop.org/gstreamer/gst-rtsp-server/tree/examples%20gst-rtsp-server)中的 rtsp-server 示例

# php - FCKeditor阿拉伯语没有出现

> ID：11637928
> 
> 赞同：2
> 
> 时间：2012-07-24T19:25:37.420
> 
> 标签：php, jquery, fckeditor

我在我的一个项目中使用 FCKeditor。

```
<textarea name="Content_Arabic" id="Content_Arabic" cols="35" rows="4" class="txtfield"><?php echo (stripslashes(stripslashes($_POST['Content'])));?></textarea>
<script type="text/javascript">
    var editor = new ew_DHTMLEditor("Content_Arabic");

    editor.create = function() {
        var sBasePath = 'FCKeditor/';
        var oFCKeditor = new FCKeditor('Content_Arabic', '100%', 350, 'Default');
        oFCKeditor.BasePath = sBasePath;
        oFCKeditor.ReplaceTextarea();
        oFCKeditor.rtl;
         oFCKeditor.ContentLangDirection='rtl';
        this.active = true;
    }
    ew_DHTMLEditors[ew_DHTMLEditors.length] = editor;

    ew_CreateEditor();  // Create DHTML editor(s)

    //-->
</script> 
```

这个加载的编辑器，但它仍然是英式风格。

我希望它从右到左加载为阿拉伯语样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:06:25.453

下面的解决方案假定您希望此配置静态用于解决方案中的所有 FCKEditor 实例*。

只需编辑文件`/path/to/your_fckeditor_installation_dir/fckeditor.js`并更改以下属性，如下所示：

```
FCKConfig.AutoDetectLanguage    = false ;
FCKConfig.DefaultLanguage       = 'ar' ; 
```

**编辑**

从上面的代码中，您只需要以下几行（删除其余部分）：

```
var oFCKeditor = new FCKeditor('Content_Arabic', '100%', 350, 'Default');
oFCKeditor.BasePath = 'FCKeditor/';
oFCKeditor.ReplaceTextarea(); 
```

就这样！

*如果您希望它动态更改，那么您应该按照[这些](http://www.electrictoolbox.com/language-selection-fckeditor/)指南更改您的方法

# python - 从 matplotlib 绘图中删除填充

> ID：11637929
> 
> 赞同：18
> 
> 时间：2012-07-24T19:25:41.047
> 
> 标签：python, django, matplotlib, padding

我在 matplotlib 中绘制图像，它不断给我一些填充。这是我尝试过的：

```
def field_plot():
    x = [i[0] for i in path]
    y = [i[1] for i in path]
    plt.clf()
    plt.axis([0, 560, 0, 820])
    im = plt.imread('field.jpg')
    field = plt.imshow(im)
    for i in range(len(r)):
        plt.plot(r[i][0],r[i][1],c=(rgb_number(speeds[i]),0,1-rgb_number(speeds[i])),linewidth=1)
    plt.axis('off')
    plt.savefig( IMG_DIR + 'match.png',bbox_inches='tight', transparent="True")
    plt.clf() 
```

![这就是我看到图像的方式](../Images/2d61eed621d78117ea0ca49485f55e6c.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T23:57:09.790

尝试使用`pad_inches=0`，即

```
plt.savefig( IMG_DIR + 'match.png',bbox_inches='tight', transparent="True", pad_inches=0) 
```

从[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.savefig)中：

> pad_inches：当 bbox_inches 为“紧”时，图形周围的填充量。

我认为默认是`pad_inches=0.1`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-11-01T13:40:24.233

加`plt.tight_layout()`在前面`plt.savefig()`！！

```
plt.figure(figsize=(16, 10))

# ... Doing Something ...

plt.tight_layout()
plt.savefig('wethers.png')
plt.show() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-21T18:34:24.540

这对我有用。绘图后，使用 ax = plt.gca() 从 plt 获取 Axes 对象。然后设置 ax 对象的 xlim 和 ylim 以匹配图像宽度和图像高度。绘图时，Matplotlib 似乎会自动增加可视区域的 xlim 和 ylim。请注意，在设置 y_lim 时，您必须颠倒坐标的顺序。

```
for i in range(len(r)):
  plt.plot(r[i][0],r[i][1],c=(rgb_number(speeds[i]),0,1-rgb_number(speeds[i])),linewidth=1)

plt.axis('off')
ax = plt.gca();
ax.set_xlim(0.0, width_of_im);
ax.set_ylim(height_of_im, 0.0);
plt.savefig( IMG_DIR + 'match.png',bbox_inches='tight', transparent="True") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-08T11:07:03.687

以前的所有方法都不太适合我，它们都在图形周围留下了一些填充物。

以下行成功删除了留下的白色或透明填充：

```
plt.axis('off')
ax = plt.gca()
ax.xaxis.set_major_locator(matplotlib.ticker.NullLocator())
ax.yaxis.set_major_locator(matplotlib.ticker.NullLocator())
plt.savefig(IMG_DIR + 'match.png', pad_inches=0, bbox_inches='tight', transparent=True) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-11-05T23:38:48.763

用于`plt.gca().set_position((0, 0, 1, 1))`让轴跨越整个图形，请参阅[参考资料](https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_position.html)。如果`plt.imshow`使用，则要求图形具有正确的纵横比。

```
import matplotlib as mpl
import matplotlib.pyplot as plt

# set the correct aspect ratio
dpi = mpl.rcParams["figure.dpi"]
plt.figure(figsize=(560/dpi, 820/dpi))

plt.axis('off')
plt.gca().set_position((0, 0, 1, 1))

im = plt.imread('field.jpg')
plt.imshow(im)

plt.savefig("test.png")
plt.close() 
```

# java - java中的正则表达式帮助

> ID：11637930
> 
> 赞同：1
> 
> 时间：2012-07-24T19:25:42.423
> 
> 标签：java, regex

在构建正则表达式字符串时，我迷失了方向。我需要一个执行以下操作的正则表达式。

我有以下字符串：

```
[~class:obj]
[~class|class2|more classes:obj]
[!class:obj]
[!class|class2|more classes:obj]
[?method:class]
[text] 
```

一个字符串可以有多个上面的内容。示例字符串为“[if] [!class:obj]”

我想知道 [] 和分成匹配组之间的内容。例如，第一个匹配组将是符号（如果存在）（~|！|？）接下来是：之前的内容，因此可以是 class 或 class|class2|etc...然后是：右侧的内容和在 ] 之前停止。可能没有 : 以及它之前的内容，而只是 [] 之间的内容。

那么，我将如何编写这个正则表达式呢？是否可以给出匹配组名称以便我知道它匹配什么？

这是一个java项目。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:29:40.153

以下是一些可能有帮助的网站：

*   [http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)
*   [http://txt2re.com/index.php3?s=Test+test+june+2011+test&submit=Show+Matches](http://txt2re.com/index.php3?s=Test+test+june+2011+test&submit=Show+Matches)
*   [http://www.regexplanet.com/simple/](http://www.regexplanet.com/simple/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T19:36:31.867

如果您对自己的输入有足够的把握，您可能可以使用类似`/\[(\~|\!|\?)?(?:((?:[^:\]]*?)+):)?([^\]]+?)\]/`. （要将其翻译成 Java，您需要转义反斜杠并使用引号而不是正斜杠）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:37:26.403

我相信这应该有效：

```
/[(.*?)(?:\|(.*?))*]/ 
```

还：

```
[a-z]* 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:40:31.727

试试这个代码

```
final Pattern
  outerP = Pattern.compile("\\[.*?\\]"),
  innerP = Pattern.compile("\\[([~!?]?)([^:]*):?(.*)\\]");
for (String s : asList(
    "[~class:obj]",
    "[if][~class:obj]",
     "[~class|class2|more classes:obj]",
     "[!class:obj]",
     "[!class|class2|more classes:obj]",
     "[?method:class]",
     "[text]"))
{
  final Matcher outerM = outerP.matcher(s);
  System.out.println("Input: " + s);
  while (outerM.find()) {
    final Matcher m = innerP.matcher(outerM.group());
    if (m.matches()) System.out.println(
       m.group(1) + ";" + m.group(2) + ";" + m.group(3));
    else System.out.println("No match");
  }
} 
```

# mysql - 如何从值为 1 的表中提取字段名称？

> ID：11637937
> 
> 赞同：1
> 
> 时间：2012-07-24T19:26:27.520
> 
> 标签：mysql

我的桌子就像

```
CREATE TABLE IF NOT EXISTS `pricerange` (
  `priceRangeID` int(11) NOT NULL AUTO_INCREMENT,
  `catID` int(11) NOT NULL,
  `Below 500` tinyint(1) NOT NULL DEFAULT '0',
  `501-1000` tinyint(1) NOT NULL DEFAULT '0',
  `1001-2000` tinyint(1) NOT NULL DEFAULT '0',
  `2001-3000` tinyint(1) NOT NULL DEFAULT '0',
  `3001-4000` tinyint(1) NOT NULL DEFAULT '0',
  `4001-5000` tinyint(1) NOT NULL DEFAULT '0',
  `5001-6000` tinyint(1) NOT NULL DEFAULT '0',
  `6001-7000` tinyint(1) NOT NULL DEFAULT '0',
  `7001-8000` tinyint(1) NOT NULL DEFAULT '0',
  `8001-9000` tinyint(1) NOT NULL DEFAULT '0',
  `9001-10000` tinyint(1) NOT NULL DEFAULT '0',
  `10001-100000` tinyint(1) NOT NULL DEFAULT '0',
  `above 100000` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`priceRangeID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

INSERT INTO `pricerange` (`priceRangeID`, `catID`, `Below 500`, `501-1000`, `1001-2000`, `2001-3000`, `3001-4000`, `4001-5000`, `5001-6000`, `6001-7000`, `7001-8000`, `8001-9000`, `9001-10000`, `10001-100000`, `above 100000`) VALUES
(1, 3, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1); 
```

在这里，我想为给定的 catID 提取值为 1 的字段名称。谁能帮助我如何在mysql中编写这个查询？

我已经尝试**从 pricerange**显示字段，但它显示了所有字段名称及其详细信息，它不处理值，**从 pricerange 选择 *，**但它需要一些 php 操作。但我只想用 MYSQL 编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:14:11.520

解决这个问题的关键是使用information_schema

这是给您的查询：

```
SELECT A.column_name FROM
(select ordinal_position-3 pos,column_name from information_schema.columns
where table_name='pricerange' and LOCATE('-',column_name)) A
INNER JOIN
(SELECT CONCAT(`501-1000`,`1001-2000`,`2001-3000`,
`3001-4000`,`4001-5000`,`5001-6000`,`6001-7000`,
`7001-8000`,`8001-9000`,`9001-10000`,
`10001-100000`) bitmap FROM pricerange) B
ON SUBSTR(bitmap,pos,1) = '1'; 
```

我加载了你的数据

```
mysql> DROP DATABASE IF EXISTS sumant;
Query OK, 1 row affected (0.06 sec)
mysql> CREATE DATABASE sumant;
Query OK, 1 row affected (0.00 sec)
mysql> USE sumant
Database changed
mysql> CREATE TABLE IF NOT EXISTS `pricerange` (
    ->   `priceRangeID` int(11) NOT NULL AUTO_INCREMENT,
    ->   `catID` int(11) NOT NULL,
    ->   `Below 500` tinyint(1) NOT NULL DEFAULT '0',
    ->   `501-1000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `1001-2000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `2001-3000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `3001-4000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `4001-5000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `5001-6000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `6001-7000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `7001-8000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `8001-9000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `9001-10000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `10001-100000` tinyint(1) NOT NULL DEFAULT '0',
    ->   `above 100000` tinyint(1) NOT NULL DEFAULT '0',
    ->   PRIMARY KEY (`priceRangeID`)
    -> ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;
Query OK, 0 rows affected (0.17 sec)

mysql> INSERT INTO `pricerange` (`priceRangeID`, `catID`, `Below 500`, `501-1000`, `1001-2000`, `2001-3000`, `3001-4000`, `4001-5000`, `5001-6000`, `6001-7000`, `7001-8000`, `8001-9000`, `9001-10000`, `10001-100000`, `above 100000`) VALUES
    -> (1, 3, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1);
Query OK, 1 row affected (0.07 sec)

mysql> 
```

这是执行的查询：

```
mysql> SELECT A.column_name FROM
    -> (select ordinal_position-3 pos,column_name from information_schema.columns
    -> where table_name='pricerange' and LOCATE('-',column_name)) A
    -> INNER JOIN
    -> (SELECT CONCAT(`501-1000`,`1001-2000`,`2001-3000`,
    -> `3001-4000`,`4001-5000`,`5001-6000`,`6001-7000`,
    -> `7001-8000`,`8001-9000`,`9001-10000`,
    -> `10001-100000`) bitmap FROM pricerange) B
    -> ON SUBSTR(bitmap,pos,1) = '1';
+--------------+
| column_name  |
+--------------+
| 5001-6000    |
| 6001-7000    |
| 9001-10000   |
| 10001-100000 |
+--------------+
4 rows in set (0.02 sec)

mysql> 
```

它也可以反向工作。这是相同的查询，但只搜索零：

```
mysql> SELECT A.column_name FROM
    -> (select ordinal_position-3 pos,column_name from information_schema.columns
    -> where table_name='pricerange' and LOCATE('-',column_name)) A
    -> INNER JOIN
    -> (SELECT CONCAT(`501-1000`,`1001-2000`,`2001-3000`,
    -> `3001-4000`,`4001-5000`,`5001-6000`,`6001-7000`,
    -> `7001-8000`,`8001-9000`,`9001-10000`,
    -> `10001-100000`) bitmap FROM pricerange) B
    -> ON SUBSTR(bitmap,pos,1) = '0';
+-------------+
| column_name |
+-------------+
| 501-1000    |
| 1001-2000   |
| 2001-3000   |
| 3001-4000   |
| 4001-5000   |
| 7001-8000   |
| 8001-9000   |
+-------------+
7 rows in set (0.01 sec)

mysql> 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:35:04.973

我不认为 SQL 是该任务的正确工具（鉴于您的表结构），读取整个记录并在客户端获取名称要容易得多。但也可以使用 sql。想法是反透视：

```
SELECT 'Below 500' as field1
FROM  pricerange where catID = 1 AND `Below 500` is not null
UNION ALL
SELECT '501-1000' as field1
FROM  pricerange where catID = 1 AND `501-1000` is not null 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:38:00.103

也许您想使用 case 语句...例如

```
select case "Below 500" when 1 then "Below 500" else "" end, 
       case "501-1000" when 1 then "501-1000" else "" end, etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:43:54.833

你可以使用这样的东西：

```
SELECT
GROUP_CONCAT( (IF `Below 500`=1, `Below 500`, ''), (IF `501-1000`=1, `501-1000`, ''),...)
FROM `pricerange`
WHERE `catID`=myCatID 
```

但如果可能的话，我会改变那个数据库模式。为每个价格区间创建一个单独的表和记录。

# android - apk 文件大小从 175k 增加到 1711k，但有微小的变化——这是怎么回事？

> ID：11637941
> 
> 赞同：4
> 
> 时间：2012-07-24T19:26:43.687
> 
> 标签：android, eclipse

在 Tim 在此线程[Controlling Android app with bluetooth mouse/presenter](https://stackoverflow.com/questions/11596697/controlling-android-app-with-bluetooth-mouse-presenter)上的出色帮助下，我添加了我的应用程序的蓝牙远程控制。完成此操作后，我注意到我的 apk 文件从 175k 一直到 1711k - 大了 10 倍！我已经在测试应用程序上实现了蓝牙更改，但没有看到文件大小发生任何变化，所以我不确定是什么原因造成的。在此过程中，我确实遇到了某种 Eclipse 问题，并且必须进行重建以使源代码再次运行，所以这可能与它有关。

在这里和谷歌上搜索文件大小变化给了我想要制作更大文件以容纳更多东西的人的问题，而不是我的问题。我似乎找不到相关的答案。

该应用程序根本没有任何大小的图形、pdf 或其他文件。它只是读取一些 GPS 信息，进行一些数学运算，并将结果显示为文本。

有没有办法让文件大小变小？有 Eclipse 选项吗？这是我的第一个真正的（非测试）应用程序，它已经完成并且可以工作，但我担心文件大小会增加。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:50:51.720

您可以轻松检查`apk`文件的内容。`apk`文件只是`zip`具有不同扩展名的文件。只需替换`.apk`并`.zip`解压缩即可。然后将内容与您以前的`.apk`文件进行比较，并找出哪个文件有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T06:57:33.857

我遇到了与 APK 大小类似的问题。检查哪些资源是罪魁祸首的一种方法是在控制台中“打开编辑器日志”。

可以在这里找到一些有用的解释：

[Unity 将项目游戏 2d 构建为具有巨大尺寸的 apk，因为纹理](https://stackoverflow.com/questions/30414732/unity-build-project-game-2d-to-apk-with-huge-size-because-textures)

[https://docs.unity3d.com/432/Documentation/Manual/ReducingFilesize.html](https://docs.unity3d.com/432/Documentation/Manual/ReducingFilesize.html)

# vb.net - 从 VB.NET 打开 Windows 资源管理器：未在正确的文件夹中打开

> ID：11637943
> 
> 赞同：0
> 
> 时间：2012-07-24T19:26:53.023
> 
> 标签：vb.net, process, explorer

我正在尝试在 VB.NET 中从程序中查找文件

```
Dim exeName As String = "explorer.exe"
Dim params As String = "/e,""c:\test"",/select,""C:\test\a.txt""" 
Dim processInfo As New ProcessStartInfo(exeName, params)
Process.Start(processInfo) 
```

它会打开包含目录“c:\”，但不会进入“c:\test”，我希望选择文件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:33:30.167

```
 Dim filePath As String = "C:\test\a.txt" 'Example file
 Process.Start("explorer.exe", "/select," & filePath) 'Starts explorer.exe and selects desired file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:34:15.317

您不需要 /e 之后的文件夹路径，请为您的参数尝试以下操作：

```
Dim params As String = "/e, /select,""C:\temp\file.txt""" 
```

# ruby-on-rails - 将照片复制到 Staging S3（使用导轨和回形针）

> ID：11637944
> 
> 赞同：5
> 
> 时间：2012-07-24T19:27:04.083
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我有一个建立在 rails 上的网站，它使用回形针将照片保存到 S3。这很好用。我正在使用 Heroku，所以我还为将来的更改和用户测试设置了一个登台服务器。考虑到 12factor Dev/Prod parity [http://www.12factor.net/dev-prod-parity](http://www.12factor.net/dev-prod-parity)，我一直在使用 PGbackups 来保持与生产中相同的数据。但是，我找不到将生产 S3 存储桶同步到登台的好方法。

我不想在暂存中使用我的生产 S3 存储桶，以免意外删除生产照片。在用户测试期间显示丢失的照片会分散注意力且不可接受。是否有一种简单的解决方案可以在保存时将同一张照片推送到两个存储桶，或者将登台设置为 S3 中生产存储桶的“从属”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:52:12.123

您可以运行脚本将生产存储桶复制到同步数据库时的暂存区：谷歌搜索一下我找到[了这个](https://gist.github.com/zefer/901486)。您可以将其包装在 rake 任务中并从您的登台应用程序中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T21:19:49.533

最近的最佳答案是关于类似的问题：

[在 S3 存储桶之间移动文件的最佳方式？](https://stackoverflow.com/questions/9664904/best-way-to-move-files-between-s3-buckets/21081892)

向下滚动，直到看到 alberge 的答案

# php - 将一个表中的多个 URL 链接到另一个表中的单个记录？

> ID：11637956
> 
> 赞同：1
> 
> 时间：2012-07-24T19:27:39.613
> 
> 标签：php, mysql

好的，我有两个 mysql 表，一个包含电影的详细信息，即标题描述等。我在这个表中有一个名为 Awards 的列，现在我需要能够将多个图像附加或链接到该列中的单个记录。

我有一个单独的表格，其中包含指向 png 的 url 的链接，但我不确定如何链接它们。

现在第二部分是在一个页面上显示这些信息，每个 url 分开并在它自己的 div 中，我猜explode() 可以拆分。

我知道这是一对多的关系，但我找不到任何可以完成这项工作的东西。

如果有人能对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:32:46.970

您可以做的一种技术是加入两个表并使用 SELECT GROUP_CONCAT 将值连接为单个变量，是的，您可以在以后使用 explode() 将它们分解。

确实使用 GROUP_CONCAT ，这就是你可以做的：

```
mysql> SELECT f.name, GROUP_CONCAT(a.url SEPARATOR ",") AS awards FROM film f JOIN awards a ON a.film_id = f.id;
+-----------------------+-----------------------------------------------------------------------------+
| name                  | awards                                                                      |
+-----------------------+-----------------------------------------------------------------------------+
| River Runs Through It | http://www.ariverrunsthroughit.com,http://www.webby.com,http://www.imdb.com |
+-----------------------+-----------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

* * *

在 PHP 中，您使用上面的查询查询数据库，并说它是在一个名为 $row 的变量中输出的，然后您可以分解 Awards 变量并按照您的说明输出到单独的 DIVS 中。

```
<?php
// connection

$query = mysql_query("SELECT f.name, GROUP_CONCAT(a.url SEPARATOR ",") AS awards FROM film f JOIN awards a ON a.film_id = f.id");

while ($row = mysql_fetch_array($query)) {
   $title = $row['name'];
   // get awards
   $awards = explode(",", $row['awards']);

   // output title and awards (iterate through array)
   echo "<hr>";
   echo "<div id='title'>$title</div>";
   foreach ($awards AS $award) {
      echo "<div id='award'>$award</div>";
   }
} 
```

* * *

这是构建测试的 SQL：

```
mysql> create table film (id INT AUTO_INCREMENT, name VARCHAR(24), PRIMARY KEY (id));
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO film VALUES (1, "River Runs Through It");
Query OK, 1 row affected (0.00 sec)

mysql> CREATE TABLE awards (id INT AUTO_INCREMENT, film_id INT NOT NULL, url VARCHAR(64), title VARCHAR(24), PRIMARY KEY (id));
Query OK, 0 rows affected (0.01 sec)

mysql> INSERT INTO awards VALUES (1,1,'http://www.ariverrunsthroughit.com','Our Award'), (2,1,'http://www.webby.com', 'Webby Award'), (3,1,'http://www.imdb.com', 'IMDB Award');
Query OK, 3 rows affected (0.01 sec)
Records: 3  Duplicates: 0  Warnings: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:32:35.833

您要查找的内容称为联接。 [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

所以在 MYSQL 中应该是这样的：

```
SELECT * FROM `movies` WHERE `movie_id` = 1 JOIN `awards` ON `awards.mid` = `movies.movie_id` 
```

希望这会有所帮助:) 如果名称重叠，那么您可能需要为表/列命名：[http ://www.w3schools.com/sql/sql_alias.asp](http://www.w3schools.com/sql/sql_alias.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:36:25.727

如果您想在结果中的单个字段中包含所有图像，您可以使用

```
SELECT
films.*
GROUP_CONCAT(images.url SEPARATOR ',') as image_urls
FROM films
LEFT JOIN images ON images.film_id = film.id
WHERE ... 
```

然后使用 explode(',',$row->image_urls) 分隔网址。

# django - 如何管理扩展通用基础模板的 Django 可重用应用程序模板？

> ID：11637957
> 
> 赞同：3
> 
> 时间：2012-07-24T19:27:55.427
> 
> 标签：django, django-templates, django-apps

我有一个项目，其中一些组件可能应该被分离成可重用的应用程序。但是，所有模板都为整个站点扩展了几个基本模板。我应该在每个应用程序的模板目录中包含基本模板的副本吗？构建模板目录/继承的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:47:43.900

出于您的应用程序的目的，`base.html`或者无论调用什么基本模板，都应该包含*整个*HTML 文档，以便它可以独立运行。如果最终用户想要覆盖模板，他们可以将自己的副本添加到该文件中`templates/yourappname/base.html`并在该文件中做任何他们想做的事情，包括扩展他们的主站点模板。

# c++ - 将 NSInteger 传递给 size_t 并将 NSInteger* 传递给 size_t*

> ID：11637965
> 
> 赞同：2
> 
> 时间：2012-07-24T19:28:32.850
> 
> 标签：c++, objective-c

我的 C++ 知识很糟糕。我有一个 Apple 提供的代码，他们通常提供了一个不完整的解决方案。

在此代码中，它们提供了两个空方法标头：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length 
```

这些方法理论上应该调用两个 C++ 风格的函数，但是由于我的 C++ 知识很臭，无穷平方加一，请填写???

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
   // I need to call base64_encode and return its results as string... is this correct?

   return [NSString stringWithUTF8String:
       base64_encode(input, ???)];
    // ??? I need to pass a NSInteger to a size_t... how do I do that?
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{

// ??? = this method receives a NSInteger *length variable. How do I pass that
// to a size_t * variable required by base64_decode?

    NSString *st = [[NSString alloc] initWithBytes:
                    base64_decode([input UTF8String], ???)
                                            length:&length
                                          encoding: NSUTF8StringEncoding];

    return st;
} 
```

这 2 个方法调用这些 C++ 函数

```
char* base64_encode(const void* buf, size_t size)
{
   // bla bla bla
}

void* base64_decode(const char* s, size_t* data_len_ptr)
{
    // bla bla bla
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:32:26.563

假设`NSInteger`是某种整数类型，假设`ln`是该类型的变量（或参数），您可以`size_t`通过编码`(size_t)ln`或（仅限 C++）`size_t(ln)`或`static_cast<size_t>(ln)`

对于指向`p`[an array of] `NSInteger`-s的指针，如果它们的大小不同（由 给出），强制转换`NSInteger*`为可能没有意义（或至少产生奇怪的效果）。如果您仍然想要考虑编码，但首先尝试。`size_t*``sizeof``reinterpret_cast<size_t*>(p)``static_cast<size_t*>(p)`

请理解这一切在做什么，您可能会遇到不好的意外或未定义的行为（例如，从 32 位到 64 位处理器，或从大端到小端时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:59:11.490

首先，如果你想做 base64 编码/解码，你会发现从一个正确设计的例子开始会更容易。Matt Gallagher[在 Mac 和 iPhone 上的 Base64 编码选项](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)中提供了简单的方法。

如果您真的想充实您的示例，请记住 that `NSInteger`is a`long`和`size_t`is an `unsigned long`。您可以用以下内容替换有问题的行：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
    return [NSString stringWithUTF8String:base64_encode(input, (size_t)length)];
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{
    size_t retLen;
    uint8_t *retStr = base64_decode([input UTF8String], &retLen);
    if (length)
        *length = (NSInteger)retLen;
    NSString *st = [[[NSString alloc] initWithBytes:retStr
                                        length:retLen
                                      encoding:NSUTF8StringEncoding] autorelease];
    free(retStr);    // If base64_decode returns dynamically allocated memory
    return st;
} 
```

（如果您在 ARC 下编译，请删除自动释放。）

请注意，不保证任意字节序列是有效的 UTF-8 字符串。此 API 允许您发送任意字节，但假定它将解码为有效的 UTF-8 字符串，这不一定是正确的。

# c++ - 这个 c++ 宏在做什么？

> ID：11637970
> 
> 赞同：1
> 
> 时间：2012-07-24T19:28:57.907
> 
> 标签：c++, macros

我没有看到下面的宏在做什么？如果有人可以帮助我看到它，将不胜感激。

```
#define BASE_OFFSET(ClassName,BaseName)\
(DWORD(static_cast < BaseName* >( reinterpret_cast\
< ClassName* >(Ox10000000)))-Ox10000000) 
```

如果有人想知道它的来源，它来自 Don Box Book Essential COM 的第 3 章，他正在使用接口表构建 QueryInterface 函数，上面的宏以某种方式用于查找指向接口 vtable 的指针类，其中类是实现 BaseName 的 ClassName，虽然我不知道它是如何做到的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:38:53.673

它告诉编译器：“想象`ClassName`在 0x10000000 处有一个对象。相对于 0x10000000，该对象中的数据将从哪里`BaseName`开始”？

考虑具有多个基的类对象的内存布局：

```
class A: B, C{}; 
```

在构成 A 对象的内存块中，有属于 B 的数据块，也有属于 C 的数据块，以及特定于 A 的数据。由于至少有一个基数据的地址不能与整个类实例的地址相同，传递给不同方法的指针的数值`this`需要有所不同。宏检索差值。

编辑：按照惯例，指向 vtable 的指针是任何具有虚函数的类中的第一个数据成员。因此，通过查找基本数据的地址，可以找到其 vtable 指针的地址。

现在，关于类型转换。通常，当您对指针进行类型转换时，该操作在内部是微不足道的——地址的数值不取决于它指向的类型；数据类型的概念只存在于 C 级别。但是有一个重要的例外 - 当您使用多重继承转换对象指针时。正如我们刚刚讨论过的`this`，您需要传递给基类方法的指针可能在数值上与派生对象的指针不同。

因此 static_cast 和 reinterpret_cast 之间的区别巧妙地捕捉到了这种差异。当您使用 reinterpret_cast 时，您是在告诉编译器：“我知道得更好。取这个数值并将其解释为指向我所说内容的指针”。这是对类型系统的蓄意颠覆，很危险，但偶尔也是必要的。这种演员阵容根据定义是微不足道的——因为你这么说。

我所说的“微不足道”是指 - 指针的数值不会改变。

static_cast 是一个更高级别的构造。在这种特殊情况下，您在一个对象和它的基础之间进行转换。在 C++ 类规则下，这是一个合理、安全的强制转换——但它可能在数值上并不重要。这就是宏使用两种不同类型转换的原因。static_cast 不违反类型系统。

回顾一下：

```
reinterpret_cast<ClassName* >(OxlOOOOOOO) 
```

是不安全的操作。它返回一个指向虚假对象的虚假指针，但这没关系，因为我们从不取消引用它。

```
static_cast<BaseName*>(...) 
```

是一个安全的操作（具有不安全的指针，具有讽刺意味）。这是发生非平凡指针类型转换的部分。

```
(DWORD(...)-OxlOOOOOOO) 
```

是纯算术。这就是不安全性加倍自身的地方：我们没有将指针用作指针，而是将其转换回整数并忘记它曾经是指针。

最后阶段可以等效地改写为：

```
((char*)(...)-(char*)OxlOOOOOOO) 
```

如果这更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:30:39.607

关于魔术 0x10000000 常量的备注。

如果该常数为 0，则 GCC 将显示警告 -Winvalid-offset-of（当然，如果已启用）。也许其他编译器会做类似的事情。

# svn - 什么是 SVN 条目？

> ID：11637973
> 
> 赞同：0
> 
> 时间：2012-07-24T19:29:20.497
> 
> 标签：svn

例如，这样的事情是什么意思？

xxx.com/templates/default/image/.svn/entries:http://svn174.xxx.com:8174/svn/project

我在代码中注意到了这一点，并想知道它是什么，如果我从代码中删除它是否会发生任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:38:16.107

在旧版本（即 1.7 之前）的 SVN 中，您的工作副本使用一个名为的隐藏目录`.svn`，其中包含一些关于存储库的元数据，包括属性和最后提交的文件数据等内容。您可以在磁盘上存储在 SVN 存储库中的每个目录中获得这些 .svn 目录之一。拥有这些的原因是，当您对 SVN 工作副本进行一些操作时，它并不总是需要通过网络访问存储库。

您正在查看的内容看起来像是其中的一些元数据。如果从磁盘中删除它，您将失去工作副本和这些文件的存储库之间的链接。您必须执行一个`svn cleanup`，或更糟糕的情况，签出一个新的工作副本并将您的文件复制到它的顶部。

如果您对此不确定，请让您的 svn 管理员为您提供建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:36:35.253

当无法自动合并的文件之间存在冲突时，它几乎看起来像 subversion 使用的符号。

如果是这样，您可能会遇到更大的问题。通过 svn 手动解决这些冲突应该已经清理了所有内容，并为您留下了没有任何这些悬空引用的文件。如果他们仍然在附近徘徊，则表明您已经（或已经...）合并了未正确解决的冲突，并且有人通过错误丢失或错误解决的代码片段强制 svn 通过。

注释编辑：Subversion (svn) 用于在开发过程中跟踪代码更改。它不是代码的一部分，文件也不应该出现在生产系统（如公共 Web 服务器）上。但是，虽然很容易说删除 .svn/entries 文件和代码中的行并忘记所有内容应该是安全的，但这些东西一开始就不应该存在，所以你真的想要找出他们是如何到达那里的以及您还缺少什么。

# html - 页脚内的 HTML5 导航元素

> ID：11637978
> 
> 赞同：18
> 
> 时间：2012-07-24T19:29:52.367
> 
> 标签：html, footer, nav

我在几个地方读过，当你链接到的只是版权、条款和条件等时，不需要在`<nav>`里面使用。`<footer>`

但是，我正在处理的网站在页脚中有以下链接：新闻、职业、隐私。显然，隐私符合上述*不*使用的描述`<nav>`。但是新闻和职业——尽管它们显然没有像顶部主导航中的项目那样被赋予如此大的权重——是重要的内容领域，与其他地方没有联系。这些可以证明使用的合理性`<nav>`吗？

我的猜测是肯定的，但我是 HTML5 新手，所以我想我会征求第二意见！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-24T19:39:28.947

正如[W3C 规范](http://www.w3.org/TR/html5/the-nav-element.html#the-nav-element)所述

> 并非页面上的所有链接组都需要在一个`<nav>`元素中——该元素主要用于由主要导航块组成的部分。特别是，页脚通常有一个指向站点各个页面的链接的简短列表，例如服务条款、主页和版权页面。对于这种情况，仅页脚元素就足够了；虽然**在这种情况下可以使用元素****，`<nav>`**但通常没有必要。

请注意最后一句话 - 即使不建议您*将*元素`<nav>`用于 TOS、隐私等。

就您而言，当您有其他重要的导航元素（职业，新闻）时，我认为`<nav>`在您的`<footer>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T19:36:32.977

# 调查

根据[这篇法语文章](http://www.alsacreations.com/article/lire/1376-html5-section-article-nav-header-footer-aside.html)：

`<nav>`：

> 该`<nav>`元素是导航链接的一部分。它可以用于导航，**也可以为文档的其他部分列出内部导航链接。**

`<footer>`：

> 该`footer`元素表示页脚或部分的结尾。它放置有关作者、法律声明或**分页导航（与 组合`<nav>`）**、提醒标志、联系信息、出版日期的信息。

# 结论

你可以`<nav>`结合`<footer>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:36:58.577

这都是关于语义的。我的看法是这样的：如何仅使用 HTML 来传达尽可能多（和尽可能准确）的含义。如果有人只阅读我网站的源代码（例如使用屏幕阅读器），我希望它如何组织？我当然不是专家，但在我看来，您的场景将是对`<nav>`inside的完全有效使用`<footer>`

# database - 使用 Monotouch 创建 SQLite 数据库 - 权限被拒绝

> ID：11637981
> 
> 赞同：1
> 
> 时间：2012-07-24T19:30:12.290
> 
> 标签：database, sqlite, xamarin.ios

我正在尝试使用 Monotouch 3.0.3.4 创建一个 Sqlite 数据库。在 iPhone 模拟器上一切正常，但在测试 iPhone 上出现以下错误：

DataLayer.CreateDatabase 异常：System.UnauthorizedAccessException：访问路径“/private/var/mobile/Applications/4B4944BB-EC37-4B0C-980C-1A9B60DACB44/TestApp.app/myDatabase.db3”被拒绝。

这是我正在使用的代码：

```
// creates database and tables if they do not exist.
public void CreateDatabase ()
{
string sql = string.Empty;
string dbFileName = "myDatabase.db3";
try {
          if (!File.Exists (dbFileName)) {

    // create database
    SqliteConnection.CreateFile (dbFileName);  //This is where the error occurs
    Console.WriteLine ("CreateDatabase: Database created."); 
            ... 

    }  
      catch (Exception ex) {
        Console.WriteLine ("CreateDatabase Exception: " + ex.ToString ());
    }

    ... 
```

我也尝试过指定个人文件夹，但这没有效果。我需要做什么来确保权限正确？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:35:17.190

> 单点触控 3.0.3.4

这很可能是 MonoDevelop 3.0.3.4。请参阅**关于 MonoDevelop**以获取 MonoTouch 版本。

> “/private/var/mobile/Applications/4B4944BB-EC37-4B0C-980C-1A9B60DACB44/TestApp.app/myDatabase.db3”

在设备上，应用程序已签名，因此它们的内容不能更改（不破坏签名）。因此，您**不允许**更改`.app`目录中的内容。

您应该在目录中创建（或复制）数据库，`Documents`然后以读写方式打开数据库。

有关更多详细信息，请参阅[链接文章](http://docs.xamarin.com/ios/tutorials/Working_with_the_File_System)。

# java - 在java中返回数组？

> ID：11637984
> 
> 赞同：0
> 
> 时间：2012-07-24T19:30:26.137
> 
> 标签：java, arrays

在我的程序中，我试图返回 prevScore[i] 和 prevScoreName[i]。但是，两个返回语句都有错误，指出它们是不兼容的类型（需要 int[]，找到 int）。我觉得这可能是我在主项目中定义它们的方式（下面的前 2 行）。任何帮助，将不胜感激。

```
prevScore = scoreChange (prevScore, score);
prevScoreName = nameChange (prevScoreName, newName);

public static int[] scoreChange (int prevScore[], int score)
{
    for (i=1; i<prevScore.length;i++){
            prevScore[i] = score;
    }
    return prevScore[i];
}

public static String[] nameChange (String prevScoreName[], String newName)
{
    for (i=1; i<prevScoreName.length;i++){
            prevScoreName[i] = newName;
    }
    return prevScoreName[i];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T19:32:13.617

如果您只想从每个函数返回一项，请将返回类型更改为`int`and `String`（而不是`int[]`and `String[]`）。如果要返回整个数组，请将返回语句更改为`return prevScore;`and `return prevScoreName;`（不带`[i]`）。

请注意，无需返回整个数组 - 调用者已经拥有对它的引用。只需将返回类型更改为`void`，删除返回语句，并摆脱调用前的分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T19:31:55.240

您没有返回数组：

```
return prevScoreName[i]; // Returns the String at index 'i'
return prevScore[i];     // Returns the integer at index 'i' 
```

如果要返回实际数组，则需要丢失`[i]`：

```
return prevScoreName;   // Returns the array
return prevScore;       // Returns the array 
```

此外，甚至不需要返回任何东西：

```
prevScore = scoreChange (prevScore, score);
prevScoreName = nameChange (prevScoreName, newName); 
```

您正在使用函数调用修改这些数组的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:45:19.833

看来您可能不了解数组。当您说 `public static int[]`您正在引用整个数组时。（不是它的所有内容，而是你指向数组所在的内存空间。）当你说 `public static int`你只指一个整数时。

在您的方法中，您将返回类型声明为`int[]`，这意味着您将返回**整个**整数数组。但是您的`return`语句试图返回`prevScore[i]`，它是一个**整数**，恰好包含在数组中。如果你写的是：

```
int var = prevScore[i];
return var; 
```

在此示例中，您更容易看到您正在返回一个整数。

整数数组与整数不同，因此当您尝试返回单个整数时，编译器不知道该怎么做，而它期望看到整数数组。

# ruby-on-rails - Rails - 将@@var 传递给视图

> ID：11637985
> 
> 赞同：0
> 
> 时间：2012-07-24T19:30:28.790
> 
> 标签：ruby-on-rails

导轨 3.2.3

我需要将类变量传递给视图。由于某种原因，我无法做到这一点。

```
 class HomeController < ApplicationController
      @@user_id = '1343454'
      def index
       #.......................
      end
    def about
       #.......................
      end
    end

    /view/home/about.html.erb
    <% .... 
      @@user_id is not visible 
    ... %> 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:06:17.873

请不要使用`@@`.

在你的`application controller`你可以定义：

```
def current_user
  @current_user.id = '1343454'
end
helper_method :current_user 
```

辅助方法将使`current_user`应用程序中的任何控制器或视图中可用。

我相信，“1343454”只是一个例子。通常我们有类似的东西：

```
@current_user ||= User.find(session[:user_id]) if session[:user_id] 
```

# c# - 如果它总是与相同的东西比较，有没有办法缩短条件？

> ID：11637988
> 
> 赞同：4
> 
> 时间：2012-07-24T19:30:40.463
> 
> 标签：c#

当我需要编写一个反复比较同一个项目的条件时，我总是觉得很烦人，因为我会多次输入该项目：

```
string x = textBox1.Text;

if (x == "apple" || x == "orange" || x == "banana" ...)
... 
```

我想要这样的东西（但当然这不是正确的语法）：

```
if (x == "apple" || "orange" || "banana" ...) 
```

除了使用字符串数组之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T19:33:17.673

你的条件是：如果我匹配任何预定义的值，我就是真的。换句话说，如果我是预定义集合的一个元素，这在语义上是该`Contains`方法：

```
if (new [] { "apple", "orange", "banana" }.Contains(x))
{

} 
```

使用数组在未来提供了更多的灵活性。您可以将其提取出来、重用、存储、缓存等。当我必须处理超过 2 个已知值时，我总是使用“数组和循环”。

注意：正如 Scott Chamberlain 在评论中指出的那样，使用`HashSet<T>.Contains`大大提高了性能：

```
var values = new HashSet<string> { "apple", "banana", "orange" };
if (values.Contains(x))
{

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T19:38:37.763

扩展方法呢？

```
public static class Extensions
{
   public static bool IsOneOf<T>(this T input, params T[] possibilites)
   {
      bool result = possibilites.Contains(input);
      return result;
   }
} 
```

然后，您可以将代码重写为如下所示：

```
string input = textBox1.Text;
if(input.IsOneOf("apple", "orange", "banana"))
{
    // ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T19:34:11.620

您可以将重复的代码移动到该方法中，这也将解释**为什么**此代码是重复的 - 因为它会验证某物是否是水果。它将增加代码的可读性和可维护性。你也可以重构这个逻辑（例如把它变成`switch`语句）：

```
private bool IsFruit(string name)
{
   switch(name)
   {
       case "apple":
       case "orange":
       ...
       case "banana":
           return true;
       default:
           return false;
   }
} 
```

用法：

```
string x = textBox1.Text;
if(IsFruit(x))
   ... 
```

更新：最好不要使用如此复杂的条件 - 有时真的很难理解。您可以使用[Introduce Explaining Variable](http://www.refactoring.com/catalog/introduceExplainingVariable.html)或[Extract Method](http://refactoring.com/catalog/extractMethod.html)（如上）重构来使您的代码更清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T19:52:55.260

您最好的选择（就性能而言）是使用 HashSet

```
 static HashSet<string> Fruits = new HashSet<string> {"apple", "banana", "orange"};

    string x = textBox1.Text;
    if( Fruits.Contains( x)) { 
```

一旦在 if 条件中超过三个左右的可能性，HashSet 将比直接比较运行得更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T21:09:11.507

我喜欢扩展方法解决方案并且以前使用过它。以下是我在“CommonUtils”库中可用的方法：

```
 public static bool IsIn<T>(this T toFind, IEnumerable<T> collection)
    {
        return collection.Contains(toFind);
    }

    public static bool IsIn<T>(this T toFind, ICollection<T> collection)
    {
        return collection.Contains(toFind);
    }

    public static bool IsIn<T>(this T toFind, params T[] items)
    {
        return toFind.IsIn(items.AsEnumerable());
    } 
```

在这三个之间，您几乎可以使用任何集合，也可以将项目指定为参数列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T19:32:57.920

linq解决方案

```
var strarray = new string[]
        {
            "apple",
            "orange",
            "banana"
        };

bool a = strarray.Any( x=> x ==  textBox1.Text);
if(a)
 //CODE 
else 
 //code 
```

* * *

试试这样的开关盒

```
Switch(value)
{
  case "apple":
  case "orange":
  case "banana":....
    //code you want
  break;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T19:33:04.143

像这样使用 switch 语句

```
switch (x)
{
   case "apple":
   case "orange":
   case "banana":
      //code
      break;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T19:33:06.080

您可以尝试使用 switch 语句：

```
switch (x)
{
    case "apple":
    case "orange":
    case "banana":
        //...
        break;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-24T19:33:41.447

您可以使用 switch 语句：

```
switch(x)
{
    case "apple":
    case "orange":
    case "banana":
        // "if" code goes here
        break;
    default:
        // "else" code goes here
        break;
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-07-24T19:35:44.740

你可以这样做：

```
string it = "apple,orange,banana";

if(it.Contains(x))
{
  //do work
} 
```

更简单：

```
if("apple,orange,banana".Contains(x))
    {
      //do work
    } 
```

# hadoop - 云端小功能的并行处理

> ID：11637994
> 
> 赞同：3
> 
> 时间：2012-07-24T19:31:19.343
> 
> 标签：hadoop, parallel-processing, cloud, starcluster

我有几百万/十亿 (10^9) 数据输入集，需要处理。它们很小，小于 1kB。它们需要大约 1 秒的时间来处理。

我读过很多关于 Apache Hadoop、Map Reduce 和 StarCluster 的文章。但我不确定最有效和最快的处理方式是什么？

我正在考虑使用 Amazon EC2 或类似的云服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:52:21.953

您可能会考虑使用[Amazon EMR](http://aws.amazon.com/elasticmapreduce/)之类的东西，它负责处理 Hadoop 的大量工作。如果您只是想快速编写代码，hadoop 流、hive 和 PIG 都是开始使用 hadoop 的好工具，而无需您了解 MapReduce 的所有细节。

# php - 无法执行 INSERT INTO 成员

> ID：11637996
> 
> 赞同：0
> 
> 时间：2012-07-24T19:31:43.553
> 
> 标签：php, user-registration

这是代码有问题的部分：

```
$query = mysql_query("INSERT INTO members 
(user, pass, mail, country, city, www, credo)
VALUES  ('$_POST[user]','$_POST[pass]', '$_POST[mail]',
'$_POST[country]', '$_POST[city]', '$_POST[www]', '$_POST[credo]')")
or die ("Error - Couldn't register user."); 
```

我得到了模具错误。
我怎样才能找到无法执行的更具体的部分？
我试图一一消除字段 - 没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:52:31.873

这应该会向您展示查询失败的原因，并且至少可以防止一些安全问题：

**小改进**

```
// Run by each $_POST entry and set it to empty if not found
// Clean the value against tags and blank spaces at the edges
$dataArr = array();
foreach($_POST as $key => $value) {
    $dataArr[$key] = ($value == "undefined") ? '' : strip_tags(trim($value));
}

// try to perform the INSERT query or die with the returned mysql error
$query = mysql_query("
  INSERT INTO members 
  (user, pass, mail, country, city, www, credo)
  VALUES (
    '".$dataArr["user"]."',
    '".$dataArr["pass"]."',
    '".$dataArr["mail"]."',
    '".$dataArr["country"]."',
    '".$dataArr["city"]."',
    '".$dataArr["www"]."',
    '".$dataArr["credo"]."'
  )
") or die ("Error:<br/>".mysql_error()); 
```

* * *

**中等改进**

```
// Run by each $_POST entry and set it to empty if not found
// Clean the value against tags and blank spaces at the edges
$dataArr = array();
foreach($_POST as $key => $value) {
    $dataArr[$key] = ($value == "undefined") ? '' : strip_tags(trim($value));
}

// escape everything
$query = sprintf("
    INSERT INTO members 
    (user, pass, mail, country, city, www, credo) 
    value ('%s', '%s', '%s', '%s', '%s', '%s', '%s')",
    mysql_real_escape_string($dataArr["user"]), 
    mysql_real_escape_string($dataArr["pass"]), 
    mysql_real_escape_string($dataArr["mail"]), 
    mysql_real_escape_string($dataArr["country"]), 
    mysql_real_escape_string($dataArr["city"]), 
    mysql_real_escape_string($dataArr["www"]), 
    mysql_real_escape_string($dataArr["credo"])
);

// try to perform the INSERT query or die with the returned mysql error
$result = mysql_query($query) or die ("Error:<br/>".mysql_error()); 
```

* * *

**高级改进**

如果您正在开始一个新项目，或者您仍然可以改变您的方式，我强烈推荐使用[PHP PDO](http://php.net/manual/en/book.pdo.php)来防止与您正在使用的当前数据库连接相关的许多安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:35:21.930

```
INSERT INTO members 
(user, pass, mail, country, city, www, credo)
VALUES  
('".$_POST['user']."','".$_POST['pass']."', '".$_POST['mail']."',
'".$_POST['country']."', '".$_POST['city']."', '".$_POST['www']."', '".$_POST['credo']."')") 
```

只是一个简短的警告。将 POST 值直接插入数据库可能会导致安全漏洞。确保在将所有用户输入插入数据库之前对其进行验证和过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T05:35:29.520

您的 Sql 查询错误。这里

```
VALUES  ('$_POST[user]') 
```

你必须改用

```
 $_POST['user'] 
```

你直接在数据库中插入值..!!! 这完全是一种不好的感觉。让它逃脱

```
$user = mysql_real_escape_string(trim($_POST['user']));
$pass = mysql_real_escape_string(trim($_POST['pass']));
$mail = mysql_real_escape_string(trim($_POST['mail']));
$country = mysql_real_escape_string(trim($_POST['country']));
$city = mysql_real_escape_string(trim($_POST['city']));
$www = mysql_real_escape_string(trim($_POST['www']));
$credo = mysql_real_escape_string(trim($_POST['credo'])); 
```

然后将其插入数据库，

```
$query = mysql_query("INSERT INTO members 
        (user, pass, mail, country, city, www, credo)
        VALUES  ($user,$pass, $mail,$country, $city, $www, $credo)")
        or die ("Error - Couldn't register user."); 
```

该代码现在是安全的，可以插入数据库，是一个干净的代码。

# ruby - amqp 中突然出现可能的AuthenticationFailureError

> ID：11637998
> 
> 赞同：3
> 
> 时间：2012-07-24T19:31:47.363
> 
> 标签：ruby, amqp

我正在使用红宝石`amqp`。我运行了一个`AMQP.start`事件循环，但在循环期间出现了“突然`it raised a`可能的AuthenticationFailureError”。

```
 AMQP.start(amqp_config) do |connection|
    channel = AMQP::Channel.new connection
    channel.on_error do |channel, channel_close|
      puts "Oops... a channel-level exception: code = #{channel_close.reply_code}, message = #{channel_close.reply_text}"
    end

    my_worker = MyWorker.new
    my_worker.start
  end

[amqp] Detected TCP connection failure
/home/raincole/.rvm/gems/ruby-1.9.3-p125/gems/amq-client-0.9.3/lib/amq/client/async/adapters/event_machine.rb:164:in `block in initialize': AMQP broker closed TCP connection before authentication succeeded: this usually means authentication failure due to misconfiguration. Settings are {:host=>"localhost", :port=>5672, :user=>"guest", :pass=>"guest", :vhost=>"/", :timeout=>nil, :logging=>false, :ssl=>false, :broker=>nil, :frame_max=>131072} (AMQP::PossibleAuthenticationFailureError) 
```

奇怪的是，我的工人在我收到**之前**`PossibleAuthenticationFailureError`收到了一些消息。似乎配置应该是正确的（我一遍又一遍地检查它）。

还有其他潜在的原因`PossibleAuthenticationFailureError`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T17:10:37.670

我建议采用 4 步方法来调查此问题：

a) 消除明显 - 您的凭据是否正确，用户帐户是否有效（默认 = 'guest'）？您是否连接到适当的虚拟主机（默认 = '/'）？

```
$ rabbitmqctl list_users

Listing users ...
guest   [administrator]
...done.

$ rabbitmqctl list_user_permissions guest

Listing permissions for user "guest" ...
/   .*  .*  .*
<your_vhost>    .*  .*  .*
...done. 
```

b）rabbitmq 连接日志说什么？

在 Mac OS 上安装 rabbitmq（使用 brew），日志可以在 /usr/local/var/log/rabbitmq 中找到，但您的日志位置可能在其他位置，具体取决于操作系统和安装偏好。

您可能会在 rabbit@localhost.log 文件中看到以下行。没有太多帮助......所以继续步骤（c）。否则，请根据您在日志中看到的内容进行调查。

```
=INFO REPORT==== 15-Feb-2013::00:42:21 ===
accepting AMQP connection <0.691.0> (127.0.0.1:53108 -> 127.0.0.1:5672)

=WARNING REPORT==== 15-Feb-2013::00:42:21 ===
closing AMQP connection <0.691.0> (127.0.0.1:53108 -> 127.0.0.1:5672):
connection_closed_abruptly 
```

c) rabbitmq 的监听器（Erlang 客户端）是否还活着。默认端口 = 5672。最简单的检查方法是向该端口发送垃圾消息并查找“AMQP”响应：

```
$ telnet localhost 5672
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
asdasd
AMQP
Connection closed by foreign host. 
```

(d) 在 AMQP.connect（或 AMQP.start）操作有机会完成身份验证之前，事件循环反应器是否过早关闭？

```
EM.run
  connection = AMQP.connect(:host => 'localhost', :vhost => '/') do
    # your code here
  end
  EM.stop
end 
```

由于所有“您的代码”都位于回调中，EM.stop 在 AMQP.connect 指令之后立即运行。这样就没有时间适当地建立连接。

在这里对我有用的是添加一个计时器并优雅地处理断开连接。

```
EM.run
  connection = AMQP.connect(:host => 'localhost', :vhost => '/')
    # your code here
  end

  graceful_exit = Proc.new { 
    connection.close { EM.stop }
   }
  EM.add_timer(3, graceful_exit)
end 
```

我将 EM.stop 块放在 Proc 中的原因是我可以将它重用于其他优雅的退出（例如，当捕获“TERM”和“INT”信号时）

希望这可以帮助。

# iphone - 是否可以选择 UILabel 的第一行？

> ID：11637999
> 
> 赞同：0
> 
> 时间：2012-07-24T19:31:52.193
> 
> 标签：iphone, objective-c, uilabel

我有一个 UILabel，参数 numberOfLines 设置为 2。我想从这个 UIlabels 制作 2 个 UIlabels，第一个是第一行，第二个是第二行。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T19:55:38.030

在这个解决方案中，我假设您`UILabel`至少有 2 行，并且`\n`在第一行的末尾有一个字符。

```
UILabel *lbl = (UILabel *)[self.view viewWithTag:2];

NSString *firstString;
NSString *secondString;

NSRange foundRange = [lbl.text rangeOfString:@"\n"];
if (foundRange.location != NSNotFound)
{
    foundRange.length = foundRange.location + 1;
    foundRange.location = 0;
    firstString = [[NSString alloc] initWithString:[lbl.text substringWithRange:foundRange]];
    secondString = [[NSString alloc] initWithString:[lbl.text stringByReplacingCharactersInRange:foundRange withString:@""]];

    NSLog(@"first line = %@", firstString);
    NSLog(@"second line = %@", secondString);
    [firstString release];
    [secondString release];
} 
```