# StackOverflow 问答 10614000-10614999

# python - GAE 查询中如何实现 filter() 和 get()？

> ID：10614000
> 
> 赞同：2
> 
> 时间：2012-05-16T07:37:08.800
> 
> 标签：python, python-2.7, google-app-engine, google-cloud-datastore

我基本上想知道 GAE 是如何实现它的索引的，我熟悉诸如 B+ 树之类的索引，并且想知道 filter() 方法是否使用 B+ 树来实现它？我可以在 SDK 的 appengine 代码中看到这个实现，因为它是开源的吗？get() 和 get_by_id() 函数是否使用散列实现 O(1)`是过滤函数 O(log(n))，因为有人可能认为它使用 B+ 树，其中查找为 O(log(n) )?

感谢您的任何见解

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:44:15.527

长长的答案是我几年前的演讲：[在 Google App Engine Datastore 的掩护下](http://sites.google.com/site/io/under-the-covers-of-the-google-app-engine-datastore)。您还会对[Bigtable 论文](http://research.google.com/archive/bigtable.html)和[Megastore 论文](http://research.google.com/pubs/pub36971.html)感兴趣。

简短的回答是，查询过滤是通过单属性和多属性（又名复合）索引实现的。查询计划器选择一个或多个进行密集扫描和合并，即所有或几乎所有扫描的索引行都对应于查询的有效结果。我的谈话中的细节。

get() 被实现为一个大表单行查找。它介于 O(1) 和 O(log(n)) 之间，常数因子很小，因为 log(n) 部分通常完全发生在内存中。bigtable 论文中的详细信息。

# c# - AdsConnection 没有关闭？

> ID：10614003
> 
> 赞同：1
> 
> 时间：2012-05-16T07:37:22.807
> 
> 标签：c#, connection-pooling, advantage-database-server, handle-leak

考虑以下代码：

```
private static void GetData<TConnection, TCommand>( string connectionString, DataTable dataFromDbf, string commandText )
  where TConnection : IDbConnection
  where TCommand : IDbCommand {
  using( IDbConnection oConn = GetConnection<TConnection>( connectionString ) ) {

    oConn.Open( );
    IDbCommand oCmd = oConn.CreateCommand( );
    oCmd.CommandText = commandText;
    dataFromDbf.Load( oCmd.ExecuteReader( ) );
    oConn.Close( );
  }
} 
```

该方法是通用的，因为并非所有客户都有 Adavatage DB 服务器，我们需要回退到 OleDbConnection。然而，在大多数情况下，我们使用 AdsConnection 对象（来自 Advantage.Data.Provider.dll）。

上面的代码关闭连接，并且在退出 using 语句时对象被释放。

当我们使用 Advantage Management Utility 查看广告服务器上的所有连接时，我们注意到连接保持打开状态。但不是所有的！我们可能调用该方法 200 次，只有少数保持打开状态，有时超过客户端 MAX_CONNECTIONS。[感谢Jens Mühlenhoff](https://stackoverflow.com/questions/10582775/ads-server-settings-not-used-in-net-application-using-advantage-data-provider)，我们可以解决这个问题。

问题是：

为什么调用 oConn.Close() 时连接没有关闭？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T10:27:34.137

你使用连接池吗？

根据 ADS 在线帮助，可能`Close()`并没有真正关闭连接，而是将其返回到连接池。

在这种情况下，您要么禁用池化，要么调用`FlushConnectionPool()`. 请注意，这会刷新整个应用程序的连接池。

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/dotnet_adsconnection_close.htm](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/dotnet_adsconnection_close.htm)

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/dotnet_adsconnection_flushconnectionpool_.htm](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/dotnet_adsconnection_flushconnectionpool_.htm)

# android - 模拟器上的Android应用路径

> ID：10614004
> 
> 赞同：0
> 
> 时间：2012-05-16T07:37:23.697
> 
> 标签：android, html

嗨，我必须在浏览器和 Android 应用程序之间建立连接。我参考了链接 [http://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser.][1] 他们建议使用特殊方案。

```
<intent-filter>
    <data android:scheme="my.special.scheme" />
    <action android:name="android.intent.action.VIEW" />
</intent-filter> 
```

并且路径就像`<a href="my.special.scheme://other/parameters/here">` 在您的网络应用程序中一样。

我在模拟器上运行它。通过本地主机地址。特殊计划的确切路径是什么

我给了

```
<intent-filter>
            <data android:scheme="http" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter> 
```

并在按钮操作的网络应用程序中

```
 <FORM METHOD="LINK" ACTION="Integration://hello">
<INPUT TYPE="submit" VALUE="Clickable Button">
</FORM> 
```

你能告诉我我在哪里做错了吗？或者正确的路径是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:43:41.883

当您说时`"http://Integration"`，“http”就是方案。用你的方案替换它。 `action=Integration://whatever`

# netbeans - 如何在 netbeans IDE 中调用对 url 的浏览

> ID：10614005
> 
> 赞同：0
> 
> 时间：2012-05-16T07:37:25.997
> 
> 标签：netbeans, netbeans-7

是否有一个快捷命令可以浏览到 Netbeans 中的文件，例如：

```
 <a href=" how do i browse to a file from here  "> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:51:06.970

如果文件属于您的项目并且路径有效，那么您只需按住`Ctrl`并单击链接（按住时将带有下划线`Ctrl`）。

# php - 在学说中实体的列上输入更多类型

> ID：10614006
> 
> 赞同：0
> 
> 时间：2012-05-16T07:37:29.890
> 
> 标签：php, doctrine-orm, doctrine, zend-framework2

我目前正在解析我在 zf2 中的实体文件

我有以下用于解析实体的代码：

```
$classname =  get_class($this->object);

$cmf = $this->em->getMetadataFactory();
$class = $cmf->getMetadataFor($classname);

$fields = $class->fieldMappings; 
```

它返回：

```
array
  'id' => 
    array
      'fieldName' => string 'id' (length=2)
      'type' => string 'integer' (length=7)
      'length' => null
      'precision' => int 0
      'scale' => int 0
      'nullable' => boolean false
      'unique' => boolean false
      'id' => boolean true
      'columnName' => string 'id' (length=2)
  'artist' => 
    array
      'fieldName' => string 'artist' (length=6)
      'type' => string 'string' (length=6)
      'length' => null
      'precision' => int 0
      'scale' => int 0
      'nullable' => boolean false
      'unique' => boolean false
      'columnName' => string 'artist' (length=6)
  'title' => 
    array
      'fieldName' => string 'title' (length=5)
      'type' => string 'string' (length=6)
      'length' => null
      'precision' => int 0
      'scale' => int 0
      'nullable' => boolean false
      'unique' => boolean false
      'columnName' => string 'title' (length=5) 
```

我想在我的列中添加一个新类型。例如，用于配置列的是 uploadfield 或 Datepicker ：

```
/**
 * @ORM\Column(type="string")
 * @type = 'datepicker'
 */
protected $publishdate; 
```

并在类元数据中获取该日期选择器（用于以 zend 形式创建输入元素）

有什么建议吗？

由固定

```
$reader = new \Doctrine\Common\Annotations\AnnotationReader();
$reflClass = new \ReflectionClass($classname);

foreach ($reflClass->getProperties() as $property) {
    var_dump($reader->getPropertyAnnotations($property));
} 
```

和这个

```
namespace Admin\Model;

use Doctrine\ORM\Mapping as ORM,
    Admin\Scripts AS Scripts,
    Doctrine\ORM\Mapping\Annotation as Ano;

/**
 * @Annotation
 * @Target("PROPERTY")
 */
class sina extends \Doctrine\Common\Annotations\Annotation 
{
    /** @var string */
    public $sina;
}

/**
 * A news entity.
 *
 * @ORM\Entity
 * @ORM\Table(name="news")
 * @property string $artist
 * @property string $title
 * @property int $id
 */

class News extends Scripts\BaseObject 
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer");
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     * @Admin\Model\sina(sina="sina")
     */
    protected $artist;

    /**
     * @ORM\Column(type="string")
     */
    protected $title;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:20:04.563

你能行的。您需要创建一个新的注释类。使用注解注册表注册该注解。然后您需要为 LoadClassMetadata 事件创建一个事件侦听器，并使用 Reader 类将您的额外数据插入 FieldMappings。

该库的部分内容非常未完成且损坏，但请查看 Readonly 目录。它显示了如何读取和插入新注释（在这种情况下，它将字段标记为只读 - 即不允许对该字段进行更新）。[SdsDoctrineExtensions](http://github.com/superdweebie/SdsDoctrineExtensions)

# java - Spring security 保护服务层、Web 服务层还是两者兼而有之？

> ID：10614019
> 
> 赞同：8
> 
> 时间：2012-05-16T07:38:30.857
> 
> 标签：java, spring-security, layer, service-layer

我有一个通过 REST 公开的 API，我正在考虑在哪里设置权限限制。
我读过有一个关于保护服务层的最佳实践，因为它是做工作的那个，你不知道它会在哪里被调用，但我不确定关于 WS 的最佳实践是什么层。
我的一个想法是，我需要在服务层有一个非常细粒度的授权模型，在 WS 层有一个非常粗粒度的授权模型，以尽量减少违反 DRY 原则，但仍然有一些概念纵深防御。

**例子：**

对于`Users`资源，有 a`UserWS`和 a `UserService`。管理员可以创建/更新/删除用户，用户可以阅读其他用户的信息。
假设`UserWS`绑定到`%root%/users`我将`intercept-url`为该 url定义一个`ROLE_USER`权限，它只是说您必须是用户才能到达那里，但服务层本身将指定相关方法的特定权限。

**其他选项包括：**

*   对服务和 WS
    -Pro 设置相同的授权要求-您将尽可能早地过滤掉入侵者（如果您使用的是 spring mvc，则保存例如参数转换）-
    重复配置是一种维护问题并且容易出错=>安全问题

*   如果来自 WS Con，请尽快将授权要求仅放在 WS -Pro-Filter 上
    -可能从不同的上下文中使用服务层

*   仅在服务上列出授权要求-
    Pro- No Duplication
    Con- 允许“直言不讳”的无能请求到达服务层的开销

非常感谢有关选项的任何反馈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T07:05:28.743

Ittai，在 WS 和 Service 层使用完全相同的安全机制被认为是重复自己 - 它需要在这两个级别进行维护。在 WS 层没有任何安全性是一件坏事——因为你实际上让任何人进入你的系统（即使你稍后会阻止他们——许多人认为这是一件坏事）。简而言之，我认为您应该将这两者混为一谈——在 WS 层使用非常粗糙的机制，在服务层使用非常强大的机制，这样您就不会重复自己并且不必在两个地方维护代码（如它不是相同的安全级别）；并且您将能够尽快过滤掉身材矮小的用户，但仍然具有非常高的安全级别，应该放置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:45:16.727

如果你有时间，我会说两者，如果没有，只有服务层。

保护演示文稿和服务总是好的，因为如果您将服务公开给演示文稿以外的其他内容（例如公开 Web 服务），那么您的安全性已经到位并且已经完成。

此外，如果有人找到绕过您的表示层的方法（例如您有层并且您的服务在远程机器上运行），您仍然可以确保安全。

# xcode - 如何在 xcode 4 的大纲视图中禁用排序？

> ID：10614025
> 
> 赞同：0
> 
> 时间：2012-05-16T07:39:14.560
> 
> 标签：xcode, nsoutlineview

我正在使用`Nsoutline view`with`core data`和数组控制器，如何禁用排序数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:55:37.530

阵列控制器还是树控制器？通常，您会使用带有表格视图的数组控制器和带有大纲视图的树控制器。

分别使用键路径“arrangedObjects”和“selectionIndexPaths”将大纲视图本身的`content`和绑定绑定到树控制器。`selectionIndexPaths`不要将大纲视图的`sortDescriptors`绑定绑定到任何东西。

通常你不会直接绑定大纲视图的绑定。*在这种情况下，*大纲视图的`content`、`selectionIndexPaths`和绑定会自动绑定到树控制器以匹配列的值绑定。当您自己绑定其中一些时，它会阻止这种自动绑定。由于您尚未绑定并且已阻止自动绑定，因此禁用了排序。 *`sortDescriptors``sortDescriptors`*

# mysql - MySQL：使用连接多次搜索同一个表

> ID：10614032
> 
> 赞同：1
> 
> 时间：2012-05-16T07:39:52.530
> 
> 标签：mysql, sql, database, search

我正在编写一个脚本来对用户的消息进行部分单词搜索。每个对话都有一个 mail_id，每个单独的消息都有一个 msg_id。

我有一个表 mail_word_index，其中包含消息中每个单词的一行。

```
CREATE TABLE IF NOT EXISTS `mail_word_index` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `sender_id` int(10) unsigned NOT NULL DEFAULT '0',
  `dest_id` int(10) unsigned NOT NULL DEFAULT '0',
  `mail_id` int(10) unsigned NOT NULL DEFAULT '0',
  `msg_id` int(10) unsigned NOT NULL DEFAULT '0',
  `word` varchar(15) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `dest_id` (`dest_id`,`word`),
  KEY `sender_id` (`sender_id`,`word`),
  KEY `multiple_words` (`mail_id`,`msg_id`,`word`)
) ENGINE=MyISAM ; 
```

我有一个查询需要 0.01 秒才能完成

```
SELECT DISTINCT w1.mail_id FROM mail_word_index AS w1,
mail_word_index AS w2 
WHERE w1.sender_id=1 
AND w1.word LIKE 'str%' 
AND w1.mail_id=w2.mail_id 
AND w1.msg_id=w2.msg_id 
AND w2.word LIKE 'con%' LIMIT 20 
```

但是，一次搜索一个单词只需要 0.002 秒即可完成每个单词，总共需要 0.004 秒：

```
SELECT DISTINCT w1.mail_id FROM mail_word_index AS w1 
WHERE w1.sender_id=1 AND w1.word LIKE 'str%' LIMIT 20

SELECT DISTINCT w1.mail_id FROM mail_word_index AS w1 
WHERE w1.sender_id=1 AND w1.word LIKE 'con%' LIMIT 20 
```

内连接似乎减慢了第一个查询。我将如何更改第一个查询以使其更快？

解释告诉我这个：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  w1  range   sender_id,multiple_words    sender_id   21  NULL    1   Using where; Using temporary
1   SIMPLE  w2  ref multiple_words  multiple_words  8   game-node4.w1.mail_id,game-node4.w1.msg_id  8   Using where; Using index; Distinct 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:12:27.003

在这种情况下，为 w1 创建索引 multi：

```
ALTER TABLE `mail_word_index`
ADD INDEX `multi` USING BTREE (`sender_id`, `mail_id`, `msg_id`, `word`) ; 
```

# r - 使用文件名按月平均数据

> ID：10614033
> 
> 赞同：2
> 
> 时间：2012-05-16T07:39:53.590
> 
> 标签：r, filenames, lapply, read.table

我有一个与 R 相关的问题，这与必须读取许多文件并处理这些文件有关。每个文件用于在不同站点的不同时间进行的臭氧测量。数据采用表格格式，我可以使用以下方式读取数据：

```
files <- list.files()
data  <- lapply(files, read.table, skip=19) 
```

这为我现在要处理的所有文件提供了一个数据框。例如文件被命名为：

```
> head(files)
 [1] "fiji_19980105.dat" "fiji_19980112.dat" "fiji_19980119.dat"
 [4] "fiji_19980130.dat" "fiji_19980206.dat" "fiji_19980213.dat" 
```

其中“fiji”为电台名称，日期为 YMD 格式。我想对数据框进行平均以获得该站的月平均值（我一次只需要在一个站上工作，所以我真的只想对称为数据的数据框进行平均以产生 12 组平均数据）。

我想我可以使用一些 ?apply 函数来做到这一点，但我真的不知道如何做到这一点。任何关于解决方案的建议都非常感谢！

作为将日期添加到数据框中的结果示例，我们有：

```
> head(dat)
V1     V2    V3   V4 V5   V6    V7   V8   V9  V10       Date
1 9000 1007.7 0.006 29.6 74 0.59 0.006 9000 9000 9000 1998-01-05
2 9000 1005.2 0.028 29.3 75 0.62 0.006 9000 9000 9000 1998-01-05
3 9000 1001.6 0.060 28.5 78 0.63 0.006 9000 9000 9000 1998-01-05

 > str(dat)
'data.frame':   153994 obs. of  11 variables:
 $ V1  : int  9000 9000 9000 9000 9000 9000 9000 9000 9000 9000 ...
 $ V2  : num  1008 1005 1002 997 993 ...
 $ V3  : num  0.006 0.028 0.06 0.104 0.14 0.169 0.198 0.238 0.271 0.301 ...
 $ V4  : num  29.6 29.3 28.5 27.9 27.6 27.2 27 26.6 26.2 26 ...
 $ V5  : int  74 75 78 79 80 81 82 84 85 85 ...
 $ V6  : num  0.59 0.62 0.63 0.68 0.69 0.7 0.72 0.74 0.75 0.76 ...
 $ V7  : num  0.006 0.006 0.006 0.007 0.007 0.007 0.007 0.008 0.008 0.008 ...
 $ V8  : num  9000 9000 9000 9000 9000 9000 9000 9000 9000 9000 ...
 $ V9  : num  9000 9000 9000 9000 9000 9000 9000 9000 9000 9000 ...
 $ V10 : num  9000 9000 9000 9000 9000 9000 9000 9000 9000 9000 ...
 $ Date: Date, format: "1998-01-05" "1998-01-05" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:09:30.043

使用您的文件列表，获取`Date`s：

```
datetimes = as.Date(files, "fiji_%Y%m%d") 
```

有关`?strptime`格式模板的详细信息，请参阅 ，基本上您可以包含任何其他值作为文字填充符，并忽略任何无关紧要的尾随字符。

其余的要求您提供有关每个 data.frame 中内容的更多信息，因此请向我们提供有关这些数据的更多信息。

最好创建一个大型 data.frame，并将这些日期戳添加到每一行，然后从那里开始。

为了得到这样的东西会起作用（想象它被称为'dat'而不是'data'）：

```
dat = lapply(files, read.table, skip=19)

for (i in 1:length(files)) {
    dat[[i]]$Date = rep(datetimes[i], nrow(dat[[i]])

}

dat = do.call("rbind", dat) 
```

然后，您可以使用`format(dat$Date, "%m")`获取每个仅包含月份的日期的值，并`tapply`使用汇总函数（例如`mean`）。`plyr`毫无疑问，很快就会出现这种不那么经典的版本。:)

使用 lapply调用可能不是一个好主意`read.table`，所以我也会更改它，以便您可以对每个 I/O 和 data.frames 的合并进行基本检查。

# ruby-on-rails - 如何正确使用与同一模型有多个关联的工厂？

> ID：10614041
> 
> 赞同：2
> 
> 时间：2012-05-16T07:40:05.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, factory-bot

我正在使用 Ruby on Rails 3.2.2、FactoryGirl 3.1.0 和 FactoryGirlRails 3.1.0。我有一个模型与另一个模型有两个关联：

```
class Article < ActiveRecord::Base
  belongs_to a_users, :class_name  => 'User'
  belongs_to b_users, :class_name  => 'User'
end 
```

在我的工厂文件中，我有：

```
factory :article, :class => Article do
  title "Sample title"

  association :a_users, factory: :user
  association :b_users, factory: :user
end 
```

通过使用上面的代码，它将创建*两个*用户，但*我希望两个关联都具有相同的用户*（无需创建多个用户）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:34:31.177

也许这不是最优雅的解决方案或您正在寻找的解决方案，但我要做的是在您的测试中，使用您的工厂创建一篇文章和一个用户，然后对您创建的用户`a_user`和用户进行存根`b_user`。

# c - char* 到 char[] - 需要免费吗？

> ID：10614044
> 
> 赞同：1
> 
> 时间：2012-05-16T07:40:36.553
> 
> 标签：c, char

假设以下场景：

```
while(!notTheEnd) {
char str[1024];
char* ptr_to_str;

/* some strcat, strcpy on str */

ptr_to_str = str;

chmod(ptr_to_str, 0777);
} 
```

我是否必须设置 char* ptr_to_str = NULL 并释放它以避免内存泄漏？

只是我正在考虑的一个理论问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T07:41:48.677

你只需要`free()`你已经`malloc()`编辑过的东西。因此：没有。

另请参阅[free()](http://linux.die.net/man/3/free)手册页：

> free() 函数释放 ptr 指向的内存空间，该内存空间必须由先前对 malloc()、calloc() 或 realloc() 的调用返回。否则，或者如果之前已经调用过 free(ptr)，则会发生未定义的行为。如果 ptr 为 NULL，则不执行任何操作。

请注意，其他函数可能`malloc()`在内部使用或类似，因此也需要释放返回的缓冲区（例如[strdup](http://linux.die.net/man/3/strdup)）。

`NULL`根本不需要将指针设置为。`free()`然而，它增加了一些便利，因为对该指针的后续调用不会将应用程序暴露给未定义的行为。而且，如果始终如一地完成，您可以检查指针是否确实指向一个对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T07:41:54.227

你从来没有打电话`malloc()`，所以你不需要打电话`free()`。

您拥有的是指向堆栈上字符数组的指针，它不需要显式释放。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T07:42:21.133

不，只要您不分配内存（在堆上），您就不需要释放它。有一些例外（例如[`strdup`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)），但这是一般规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T08:26:27.127

`char str[1024]`将在当前堆栈中分配 1024 个字节。而这个空间会在函数返回时自动“弹出”。所以你不需要显式释放这个内存。

# jquery - 从 XML 中读取 Ajax 中大小未知的数组

> ID：10614046
> 
> 赞同：3
> 
> 时间：2012-05-16T07:40:42.700
> 
> 标签：jquery, xml, ajax

如何使用 jQuery 读取和签署 XML 数据（不同大小的数组）？

AJAX 从 XML 读取行节点并存储在 javascript 数组中，在 XML 数组中的大小不是恒定的。

我的代码：

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "sites.xml",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('msg').each(function() {
                var title = $(this).find('title').text();
                i = 0;
                tic = new Array();
                $(this).find('desc').each(function() {
                    tic.push($(this).find('line').text());
                    alert(tic[i]);
                    i++;
                });
            });
        }
    });
}); 
```

和 XML 文件（演示）

```
<msgs>
    <msg>
        <title>ABC</title>
        <desc>
            <line>test 1</line>
            <line>test 2</line>
            <line>test 2</line>
        </desc>
        <time>5</time>
    </msg>
</msgs> 
```

有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:09:21.587

将所有`line`元素读入数组更改

```
tic.push($(this).find('line').text()); 
```

至

```
$(this).find('line').each(function() {
    tic.push($(this).text());
}) 
```

这将处理每个`line`元素并将其添加到您的数组中，然后将您的数组初始化放在顶部`var tic = [];`......所以完整的成功函数如下所示：

```
var tic = [];
$(xml).find('msg').each(function() {
    var title = $(this).find('title').text();
    $(this).find('line').each(function() {
        tic.push($(this).text());
    });
});​ 
```

[这里的工作示例](http://jsfiddle.net/6gcCH/)

# java - 清除 Hibernate 验证器消息

> ID：10614047
> 
> 赞同：1
> 
> 时间：2012-05-16T07:40:43.277
> 
> 标签：java, hibernate, jsf

我有一个包含一些文件的页面（弹出窗口）。当我在此页面上提交表单时，会触发验证并出现错误。

问题是，如果我关闭弹出窗口并重新打开它，错误消息仍然在该页面上。重新打开弹出窗口时如何清除验证？

该页面是用 JSF 制作的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:04:31.860

让 ajax 在你打开它之前更新它。

目前尚不清楚您为弹出窗口使用的组件库，但假设它是 PrimeFaces，它应该如下所示：

```
<h:form>
    ....
    <p:commandButton ... update=":dialog:form" oncomplete="dialog.open()" />
</h:form>

<p:dialog id="dialog" widgetVar="dialog" visible="false" ...>
    <h:form id="form">
        <p:messages />
        ...
        <p:commandButton ... oncomplete="if (!args.validationFailed) dialog.hide()" />
    </h:form>
</p:dialog> 
```

# spotify - Spotify API：如何交叉淡化歌曲

> ID：10614052
> 
> 赞同：0
> 
> 时间：2012-05-16T07:41:11.493
> 
> 标签：spotify

我正在使用适用于 iOS 的 Spotify API 11.1.60 并成功创建了一个可以从 Spotify 下载/播放歌曲、下载和显示封面、执行搜索的应用程序。但我找不到交叉淡化歌曲的方法。我一次只能播放一首歌。

有人知道如何交叉淡化歌曲吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:16:11.450

我没有实现淡入淡出，但我认为唯一的解决方案是缓冲您当前的歌曲以便能够淡入淡出。

您必须更新您的 music_delivery 回调和用于播放声音的代码。解决方案取决于您使用的声音引擎（OpenAL、CoreAudio、...）

# grails - 如何实现“远程”域？

> ID：10614058
> 
> 赞同：13
> 
> 时间：2012-05-16T07:41:43.687
> 
> 标签：grails, groovy, grails-domain-class

想象一下两个共享一个域类的 Grails 应用程序。也许是 Book 域类。

一个应用程序被标识为数据的所有者，一个应用程序必须访问域数据。亚马逊和亚马逊网络服务之类的东西。

我想拥有的应用程序将使用普通的域类并通过 Web 服务公开数据是微不足道的——在 grails 中没有问题。

但是在其他应用程序中实现域的最佳实践是什么？

*   使用服务访问远程域而不实现本地域类？
*   实现一个本地域类，覆盖 get() 方法以获取远程数据并将本地数据库用作缓存？
*   你想到了什么其他的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T14:38:06.493

[Ryan Geyer](http://www.linkedin.com/in/rjgeyer)有一篇非常有趣的文章[Modularizing your Grails application domain classes](http://blog.ryangeyer.com/2010/03/09/modularizing-your-grails-application-domain-classes/)，其中列出了这个问题的 3 个解决方案：

1.  作为**RESTful JSON 服务**- 在 Grails 中很容易获得此设置，但随后您将失去自动 GORM 功能。

2.  **将域类分离到一个库 JAR 文件**中，并在我的其他两个应用程序中引用该库。这并不像最初听起来那么容易

3.  **创建一个 Grails 插件。**将域对象放入插件中。然后，您的每个应用程序都可以导入此插件。然后，您可以根据需要创建具有不同功能的不同控制器。示例代码可在以下位置获得：

    `git clone git://ec2.nslms.com/grails/blog_example_modular`

Ted Naleid 稍后在[帖子](http://blog.ryangeyer.com/2010/03/09/modularizing-your-grails-application-domain-classes/#comment-250108075)中给出了一个很好的提示并建议......

> “创建一个 grails-app/conf/BuildConfig.groovy 文件并将插件名称和源路径放入其中。...如果您这样做，**您的应用程序将看到您的域/控制器/服务/等的实时更改类，就好像它们实际上在当前应用程序中一样**，并且在您进行更改时无需重新打包和重新安装插件。”

[使用 memcache](http://www.nslms.com/2010/03/10/modularizing-your-grails-application-domain-classes/#comment-442091111)应该使两个应用程序能够拥有一致的数据视图，并避免每个单独的应用程序拥有自己的不一致缓存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T05:42:47.980

我认为您可以制作域类的 JAR 文件并添加对其他 grails 应用程序的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T07:36:33.607

找到另一个有趣的解决方案：

Riak 是具有一流 REST API 的键/值数据库。riak 有一个 grails 插件，它将大部分 GORM 功能（关系、动态查找器等）映射到 riak 的 REST API：http: [//grails.org/plugin/riak](http://grails.org/plugin/riak)

现在是我尚未测试的部分：如果您使用 grails 2.0 的 DataSources 功能，应该可以只将那些“远程”域连接到 riak 数据库。

结果，将有一个域存储在 riak 数据库中，并且多个应用程序将能够通过干净的 REST API 轻松访问它。

好的。这也表明我的问题是多么愚蠢 - 如果您通过同一个 SQL 数据库连接多个应用程序，它会是一样的。但有时人们想要一些更时髦的东西，比如 web 服务。

# c - 用于文件下载的 libcurl 控制台进度条

> ID：10614062
> 
> 赞同：1
> 
> 时间：2012-05-16T07:41:48.707
> 
> 标签：c, libcurl

在这里，我实现了从服务器下载文件的代码。它工作正常。现在我想制作自己的进度条函数，它计算一些数据，如剩余秒数数据每秒速率等。所以从[这里](https://stackoverflow.com/questions/1637587/c-libcurl-console-progress-bar/1639047#comment13750148_1639047)我找到了一种使用 curl 进度条选项的方法。我们如何启用此选项。我完全完成了这个。

我把我的代码放在下面。在此代码`my_progress_func`中，根据 curl 库时间间隔频繁调用。我想更改此间隔时间并将其设置为 1 秒。是否可以在 curl 库中使用为 curl 库设置一些选项？

我想`my_progress_func`每隔 1 秒调用一次这个函数。

代码 ：

```
#include <stdio.h>
#include <curl/curl.h>

long test =0;

struct FtpFile {
  const char *filename;
  FILE *stream;
  long iAppend;
};

static size_t my_fwrite(void *buffer, size_t size, size_t nmemb, void *stream)
{
  struct FtpFile *out=(struct FtpFile *)stream;
  if(out && !out->stream) {
    /* open file for writing */
      out->stream=fopen(out->filename, out->iAppend ? "ab":"wb");
    if(!out->stream)
      return -1; /* failure, can't open file to write */
  }
  out->iAppend += nmemb;
  return fwrite(buffer, size, nmemb, out->stream);
}

int my_progress_func(void *bar,
                     double t, /* dltotal */ 
                     double d, /* dlnow */ 
                     double ultotal,
                     double ulnow)
{
    printf("%f : %f \n", d, t);

  return 0;
}

int main(void)
{
  CURL *curl;
  CURLcode res;
  int c;

  struct FtpFile ftpfile={
    "dev.zip", /* name to store the file as if succesful */
    NULL,
  };

  curl_global_init(CURL_GLOBAL_DEFAULT);

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL,
                     "sftp://root:xyz_@192.170.10.1/mnt/xyz.tar");

    curl_easy_setopt(curl, CURLOPT_TIMEOUT, 120L);

    /* Define our callback to get called when there's data to be written */
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, my_fwrite);
    /* Set a pointer to our struct to pass to the callback */
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &ftpfile);

    curl_easy_setopt(curl, CURLOPT_FTPPORT, "-");

    /* Switch on full protocol/debug output */

    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 0L);
    curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, my_progress_func);

    res = curl_easy_perform(curl);

    printf("res is %d\n, data get %ld\n", res, ftpfile.iAppend);

    ///Retry upto 100 times it timeout or connection drop occur
    for (c = 0; (res != CURLE_OK) && (c < 100); c++) {

        curl_easy_setopt(curl, CURLOPT_RESUME_FROM , ftpfile.iAppend);
        res = curl_easy_perform(curl);
        if(res == CURLE_OK) c =0;
        printf("%d res is %d\n, data get %ld\n",c, res, ftpfile.iAppend);

    }
    /* always cleanup */
    curl_easy_cleanup(curl);
  }
  if(ftpfile.stream)
    fclose(ftpfile.stream); /* close the local file */
  curl_global_cleanup();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:32:12.770

根据卷曲文档： [http ://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

> 应该匹配 curl_progress_callback 原型的函数指针在 . 这个函数被 libcurl 调用，而不是它的内部等效函数，**在操作期间（大约每秒一次或更早），**无论是否正在传输数据。传递给回调的未知/未使用参数值将设置为零（例如，如果您只下载数据，则上传大小将保持为 0）。从此回调返回非零值将导致 libcurl 中止传输并返回 CURLE_ABORTED_BY_CALLBACK。

如果它调用太频繁，那么您可以使用 time() 和静态 var 来限制它，如下所示：

```
static time_t prevtime;
time_t currtime;
double dif;
static int first = 1;
if(first) {
    time(&prevtime);
    first = 0;
}
time(&currtime);
dif = difftime(currtime, prevtime);
if(dif < 1.0)
    return;
prevtime = currtime; 
```

显然，您冒着 curl 可能不会再次调用此函数的风险。

# python - 显示二维元组的下拉列表

> ID：10614066
> 
> 赞同：1
> 
> 时间：2012-05-16T07:42:05.340
> 
> 标签：python, django

我在文件中有一个国家/地区列表，如下所示，

```
COUNTRIES = (
    ('AF', 'Afghanistan'),
    ('AX', '\xc5land Islands'),
    ('AL', 'Albania'),... 
```

我想在我的下拉列表中只显示国家的全名，并且只在模型中保存全名。

现在我的models.py是

```
class UserProfiles(models.Model):
   location = models.CharField(max_length=60, blank=True, null=True) 
```

和 forms.py 是

```
class UserProfileForm(ModelForm):
    location = forms.ChoiceField(choices=COUNTRIES) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:51:00.343

像这样调整 COUNTRIES 列表

```
COUNTRIES = [ (long, long) for short, long in COUNTRIES ] 
```

然后在你的模型中使用它

```
class UserProfiles(models.Model):
    location = models.CharField(max_length=60, blank=True, null=True, choices=COUNTRIES) 
```

表格应该没问题

# python - 是否有类似游戏或 Python 挑战的 RoboCode？

> ID：10614068
> 
> 赞同：15
> 
> 时间：2012-05-16T07:42:10.827
> 
> 标签：python, robocode

我正在寻找类似于[RoboCode](http://robocode.sourceforge.net/)或[Scalatron](http://scalatron.github.com/)的游戏或挑战。我对像[Project Euler](http://projecteuler.net/)这样的挑战不感兴趣，因为我可以通过解决特定问题获得积分。我正在寻找直接竞争。我知道[http://sumost.ca/steve/games/](http://sumost.ca/steve/games/)但遗憾的是没有基于 python 的项目。如果您有任何建议，请与我分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:19:48.460

那么挑战呢？

由 Google 赞助，您搜索的比赛类型以及可用的语言负载。他们提供了一个可以运行的示例应用程序，您必须自己增加蚂蚁的智能。

[http://aichallenge.org/](http://aichallenge.org/)

如果你发帖，我想你会喜欢的:)

顺便说一句，昨天在[黑客新闻上](http://news.ycombinator.com/)**[发现了这个](http://coding.scribd.com/2012/05/24/compete-against-our-developers/)**

为什么不一边玩，一边写代码，一边找工作^^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:30:36.780

Scalatron 有一个 RESTFUL Web API [https://github.com/scalatron/scalatron/blob/master/Scalatron/doc/markdown/Scalatron%20APIs.md#scalatron-restful-web-api](https://github.com/scalatron/scalatron/blob/master/Scalatron/doc/markdown/Scalatron%20APIs.md#scalatron-restful-web-api)

这意味着您可以通过 API 使用 Python 进行游戏。

我也对这种游戏很感兴趣，并考虑创建自己的游戏。我宁愿让玩家在 RESTFUL API 上玩游戏，以便灵活地玩他们选择的任何语言。

至于使用 IronPython，这个用户似乎没有运气：[Robocode + Python](https://stackoverflow.com/questions/8683501/robocode-python)

# python - 如何使用python的lambda函数从列表中删除负值

> ID：10614069
> 
> 赞同：4
> 
> 时间：2012-05-16T07:42:12.450
> 
> 标签：python, list, lambda

我已经实现了一个 lambda 函数来对列表进行排序。现在我想使用 lambda 函数从列表中删除所有负面对象。

```
dto_list.sort(key=lambda x: x.count, reverse=True) 
```

任何人都知道一种编写 lambda 表达式的方法吗？我找不到合适的教程

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T07:45:08.553

不是很pythonic，但这里是如何使用lambda

```
>>> L = list(range(-10,10))
>>> L
[-10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> filter(lambda x: x >= 0, L)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> 
```

大多数人会使用列表推导

```
>>> [x for x in L if x >= 0]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

# android - AndEngine 是游戏引擎吗？

> ID：10614079
> 
> 赞同：4
> 
> 时间：2012-05-16T07:42:39.707
> 
> 标签：android, game-engine, libgdx

我是 Android 游戏开发的新手，我有几个问题，对某些人来说可能是愚蠢或幼稚的。

首先，在标题中，AndEngine 是游戏引擎还是库？我从网上阅读了不同的帖子，有不同的观点和答案。

而且，如果不使用 AndEngine，假设我使用了 libgdx，像我这样的 Android 游戏开发新手会在 5-7 个月内创建一个像样的游戏吗？

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:45:57.460

正如[AndEngine](http://www.tov.be/campagnes.aspx?pageid=184156)网站所说，它确实是一个 Android 游戏引擎。对于你问题的第二部分，我没有信息或类似的东西，所以我会把它交给其他人讨论。

# variables - XSLT：当条件至少满足一次时循环并设置变量

> ID：10614082
> 
> 赞同：1
> 
> 时间：2012-05-16T07:42:53.650
> 
> 标签：variables, loops, conditional, xslt-2.0, setting

我正在尝试遍历一个节点，这本身不是问题。我想检查 selectedLetter 是否与节点的第一个字母匹配，这是否按预期工作（请参见下面的代码）。困难在于，如果在循环期间至少一次没有满足条件“”，我想提供一些替代文本，沿着“对不起，没有文件以该字母开头”的行。我正在考虑在条件中设置一个变量，即标志，稍后检查是否已设置此变量，但从我在这里阅读的内容来看，变量的范围受到限制并且只能在循环中使用？任何人都可以提供任何帮助吗？

干杯，塔夫

```
<xsl:param name="selectedLetter" select="''"/>
<xsl:key name="docLetter" match="docs" use="substring(text()),1,1)"/>

                <xsl:for-each select="//ad-documents/item">

                    <xsl:sort select="documentName"/>
                    <xsl:variable name="firstLetter" select="upper-case(substring(documentName, 1, 1))"/>

                    <xsl:choose>

                        <xsl:when test="$firstLetter = $selectedLetter">

                            <div class="doc-date">
                                <xsl:if test="upload-date/day &lt; 10">0</xsl:if>
                                <xsl:value-of select="upload-date/day"/>
                                <xsl:text>.</xsl:text>
                                <xsl:if test="upload-date/month &lt; 10">0</xsl:if>
                                <xsl:value-of select="upload-date/month"/>
                                <xsl:text>.</xsl:text>
                                <xsl:value-of select="upload-date/year"/>
                            </div>

                            <div class="doc-link">
                                <a>
                                    <xsl:attribute name="href">
                                        <xsl:choose>
                                            <xsl:when test="isEditableFormDoc/box = 'true'">
                                                #
                                            </xsl:when>
                                            <xsl:otherwise>
                                                <xsl:text>/img/ejbfile/</xsl:text>
                                                <xsl:value-of select="documents/document/@documentName"/>
                                                <xsl:text>?id=</xsl:text>
                                                <xsl:value-of select="documents/document/@src"/>
                                            </xsl:otherwise>
                                        </xsl:choose>      
                                    </xsl:attribute>
                                    <xsl:if test="isEditableFormDoc/box = 'true'">
                                        <xsl:attribute name="target">
                                            <xsl:text>_blank</xsl:text>
                                        </xsl:attribute>
                                    </xsl:if>
                                    <xsl:value-of select="documentName"/>
                                </a>
                            </div>

                            <div class="doc-short-desc">
                                <xsl:apply-templates select="document-short-desc" mode="format"/>
                            </div>

                            <!--<xsl:apply-templates select="//ad-documents/item" mode="filteredDocuments"/>-->
                        </xsl:when>
                    </xsl:choose>

              </xsl:for-each> 
```

编辑：

XML 示例

```
<ad-documents name="ad-documents" label="Dokumente (limitiert auf 20 pro Seite)">
  <item description="Doc%203" id="1" timestamp="1328525592205">
    <documentName name="documentName" description="Doc%203">Doc 3</documentName>
    <optionalLetter name="optionalLetter" description="c">c</optionalLetter>
    <document-short-desc name="document-short-desc" description="">
      <p>yxf</p>
    </document-short-desc>
    <upload-date name="upload-date" description="">
      <day>24</day>
      <month>2</month>
      <year>2012</year>
    </upload-date>
    <isEditableFormDoc name="isEditableFormDoc" description="">
      <box/>
    </isEditableFormDoc>
    <documents name="documents" description=""/>
  </item>
  <item description="Doc%204" id="2" timestamp="1328525624889">
    <documentName name="documentName" description="Doc%204">Doc 4</documentName>
    <optionalLetter name="optionalLetter" description="z%2Ci%2Cg">z,i,g</optionalLetter>
    <document-short-desc name="document-short-desc" description="">
      <p>asff</p>
    </document-short-desc>
    <upload-date name="upload-date" description="">
      <day>25</day>
      <month>2</month>
      <year>2012</year>
    </upload-date>
    <isEditableFormDoc name="isEditableFormDoc" description="">
      <box/>
    </isEditableFormDoc>
    <documents name="documents" description=""/>
  </item>
  <item description="Doc%201" id="1" timestamp="1328523551639">
    <documentName name="documentName" description="Doc%201">Doc 1</documentName>
    <optionalLetter name="optionalLetter" description="b%2Cc">b,c</optionalLetter>
    <document-short-desc name="document-short-desc" description="">
      <p>Short Desc 1</p>
    </document-short-desc>
    <upload-date name="upload-date" description="">
      <day>9</day>
      <month>2</month>
      <year>2012</year>
    </upload-date>
    <isEditableFormDoc name="isEditableFormDoc" description="">
      <box/>
    </isEditableFormDoc>
    <documents name="documents" description=""/>
  </item>
</ad-documents> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:06:13.620

**解决方案很简单**：

只需更换：

```
 <xsl:for-each select="//ad-documents/item"> 
```

和

```
 <xsl:for-each select=
    "//ad-documents/item
            [$selectedLetter eq upper-case(substring(documentName, 1, 1) ]"> 
```

您可以在此之后添加`xsl:for-each`

```
<xsl:sequence select=
 "'YourErrorMessage'
     [not(//ad-documents/item
                [$selectedLetter eq upper-case(substring(documentName, 1, 1) ]

         )
      ]"
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:08:07.030

感谢 Dimitre，我设法用 count() 解决了这个问题

```
<xsl:variable name="foundDocs" select="count(//ad-documents/item[$selectedLetter eq upper-case(substring(documentName, 1, 1))])"/>
                <xsl:if test="$foundDocs = 0">
                    <div class="no-documents">
                        <xsl:text>Leider keine Dokumente gefunden</xsl:text>
                    </div>
                </xsl:if> 
```

# ruby-on-rails - 向 Devise 中的登录添加自定义字段

> ID：10614085
> 
> 赞同：0
> 
> 时间：2012-05-16T07:43:15.523
> 
> 标签：ruby-on-rails, login, devise

我尝试添加到用户模型：

attr_accessible :client_version

使用迁移将添加的列 client_version 添加到数据库

在登录请求中，我添加了以下字段：

addParameter("user[client_version]", clientVersion);

我也尝试调整可跟踪模块但这不起作用，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:06:21.620

覆盖注册表单视图并将您的字段添加到其中。您可以检测客户端并在字段中预填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:06:38.220

为了覆盖默认的设计视图，您首先需要运行：

`rails generate devise:views`

从您的终端。这将使您能够访问 Devise 使用的所有视图`app/views/devise`。然后，您可以添加`sessions/new.html.erb`所需的任何其他字段。

# iphone - MBProgressHUD 中的内存泄漏

> ID：10614087
> 
> 赞同：0
> 
> 时间：2012-05-16T07:43:18.223
> 
> 标签：iphone, memory-management

在下面的代码中有大约 3MB 的泄漏。如果我删除`[self.view addSubview:progressDialog];` 它们，那么它们就没有泄漏。

```
 -(void)showProgressDialog:(NSString*)title setTimer:(BOOL)isTimerSet
    {
        progressDialog = [[MBProgressHUD alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
        [progressDialog setLabelText:title];
        progressDialog.dimBackground=YES;
        [self.view addSubview:progressDialog];//Leak is here
        [progressDialog show:YES];
    }

    -(void)hideProgressDialog
    {
        if(progressDialog !=nil)
        {
            [progressDialog hide:YES];
            [progressDialog removeFromSuperview];
            [progressDialog release];
            progressDialog = nil;
        }
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:44:23.053

你没有释放它progressDialog或者如果它是ivar，那么使用属性而不是ivar，并合成它，然后按照这个方法

```
 MBProgressHUD *obj = [[MBProgressHUD alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
   self.progressDialog=obj;
   [obj release]; 
```

像这样

```
 MBProgressHUD *obj = [[MBProgressHUD alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]; 
    self.progressDialog=obj;
    [obj release];        
    [self.progressDialog setLabelText:title];
    self.progressDialog.dimBackground=YES;
    [self.view addSubview:self.progressDialog];//Leak is here
    [self.progressDialog show:YES]; 
```

# c# - 在 C# 中过滤字符串的子列表

> ID：10614088
> 
> 赞同：1
> 
> 时间：2012-05-16T07:43:20.043
> 
> 标签：c#, list

我有一个看起来像这样的对象

```
class MyObject
{
    string Name;
    string Description;
    List<string> Keywords;
} 
```

当我搜索这些时，我有一个`List<MyObject> AllObjects`，我想根据`Keywords`

```
var query = Request["q"];
//will only return exact matches
var exactHits = GetAll().Where(x => x.Keywords.Contains(query));
//I want something like this
var searchHits = GetAll().Where(x => x.Keywords.Contains(Regex.Match(query))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:45:37.687

不是 100% 确定 Regex.Match 语法，但应该是这样的：

```
var searchHits = GetAll().Where(x => x.Keywords.Any( k => Regex.Match(k, query).Success)); 
```

这将返回`MyObject`至少一个关键字与查询正则表达式匹配的所有 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:45:59.667

```
Regex reg = new Regex(query);
var searchHits = GetAll().Where(x => x.Keywords.Any(k => reg.IsMatch(k))); 
```

# unit-testing - 如何在 TFS 中使用起订量

> ID：10614090
> 
> 赞同：2
> 
> 时间：2012-05-16T07:43:27.457
> 
> 标签：unit-testing, testing, tfs, moq

我使用最小起订量和我的问题 Tfs 属性 (ItemSet)，如何使用最小起订量，因为 ItemSet 只能获得...

```
public sealed class ItemSet
{
    public Item[] Items { get; }
    public string Pattern { get; }
    public string QueryPath { get; }

    public override string ToString();
} 
```

样本，

```
ItemSet allItems = versionControl.GetItems(@"$/"); 
```

如何在单元测试和模拟中写作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:26:40.247

您不能使用 Moq 来模拟密封类。

您可以编写一系列封装密封 TFS 类的[代理](http://en.wikipedia.org/wiki/Proxy_pattern)，其中每个代理都基于您可以用来编写测试的抽象。

通常（特别是对于像集合这样的对象），可以使用密封类并使用[测试构建器](http://mariuszwojcik.wordpress.com/2011/04/16/create-test-objects-using-builder-pattern-and-methods-chaining/)类或类似的类来消除实例化所有依赖项并将所有内容插入在一起的痛苦。在您的情况下，您需要创建所有项目、模式和查询路径（以及每个项目的所有依赖项，如果有的话）并创建一个具有测试安全值的真实项目集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:48:42.773

您可以在这样的非密封类上使用 SetupGet 方法。

```
Mock<ItemSet> itemSetMock = new Mock<ItemSet>();
itemSetMock.SetupGet(x => x.Items).Returns(someItems); 
```

我不知道 Moq 如何处理密封类，但在单元测试中模拟抽象而不是具体类是个好主意。

# c# - 在winforms应用程序中存储数据库访问密码的位置

> ID：10614091
> 
> 赞同：2
> 
> 时间：2012-05-16T07:43:30.213
> 
> 标签：c#, .net, winforms, security

我的应用程序使用唯一密码来访问 MS Access 数据库。目前，这以纯文本形式存储在设置项目中。

存放这个的最佳位置是什么？

谢谢，亚历克斯

PS 一位同事推荐源码混淆。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:51:57.530

代码混淆本身并不能帮助您，因为它是一种通过重命名类、方法和属性来隐藏代码意图的方法。您正在寻找加密。各种代码混淆工具还提供加密文字字符串的选项。

*   [更多关于混淆（维基百科）](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:52:17.447

你会想看看`ProtectedData`课堂。这里有一篇关于如何加密密码并将其存储在文件中的好[文章](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)`app.config`，尽管您应该能够在存储密码的任何地方使用相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:23:29.937

如果您查看谷歌“恢复访问数据库密码”，您会发现密码不是对 mdb 的保护。也许最好在 WinForms 应用程序中加密关键数据（例如通过应用程序用户密码 - 而不是 mdb 用户密码），然后将加密数据存储到 mdb。

# eclipse - Eclipse 代码质量检查 - 使用 == 查找比较整数的情况？

> ID：10614092
> 
> 赞同：1
> 
> 时间：2012-05-16T07:43:38.490
> 
> 标签：eclipse, pmd

是否有 Eclipse 插件通过使用而不是使用该方法来查找比较`Integer`s、`String`s 等的出现？`==``!=``equals()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:55:00.883

Yes, the [Sonar](http://www.sonarsource.org/) plugin can do that (and it will find a ton of other problems, too).

# php - 使用 PHP 制作 PNG 图像

> ID：10614099
> 
> 赞同：0
> 
> 时间：2012-05-16T07:44:05.413
> 
> 标签：php, image-processing, png

我正在搜索是否可以使用 php 制作 PNG 图像。

```
$image = imagecreatetruecolor(100,100);
$black = imagecolorallocate($image,0,0,0);
imagefill($image,0,0,$black); 
```

这将创建 100 X 100 黑色图像。但是，我想创建没有背景的 100 X 100 图像，即 100 X 100 透明图像。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:50:15.597

您可以选择一种颜色变成透明的，如下所示：

```
$im = imagecreatetruecolor(100, 100);

$transparent = imagecolorallocate($im, 0, 0, 0);
imagecolortransparent($im, $transparent);

imagefill($im, 0, 0, $transparent); 
```

取自手册示例： http: [//php.net/manual/en/function.imagecolortransparent.php](http://php.net/manual/en/function.imagecolortransparent.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:46:09.743

```
$image = imagecreatetruecolor(100,100);
imagesavealpha($image, true);
$transparent = 0xFF000000; //0xAARRGGBB
imagefill($image, 0, 0, $transparent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:47:03.853

这是您需要的功能：

```
imagecolorallocatealpha ( resource $image , int $red , int $green , int $blue , int $alpha ) 
```

[http://www.php.net/manual/en/function.imagecolorallocatealpha.php](http://www.php.net/manual/en/function.imagecolorallocatealpha.php)

```
$image = imagecreatetruecolor(100,100);
$transparent = imagecolorallocatealpha ($image,0,0,0,0);
imagefill($image,0,0,$transparent); 
```

# c# - 我有一个列表框和复选框，我怎样才能找到 wpf 中选中的多少复选框

> ID：10614100
> 
> 赞同：0
> 
> 时间：2012-05-16T07:44:07.330
> 
> 标签：c#, .net, wpf

我想找出代码检查了多少复选框：

```
 <Grid Width="440" >

<ListBox Name="listBoxZone" ItemsSource="{Binding TheList}"  Background="White" Margin="0,120,2,131">  
      <ListBox.ItemTemplate>
            <HierarchicalDataTemplate>
  <CheckBox Name="CheckBoxZone" Content="{Binding StatusName}" Tag="{Binding StatusId}" Margin="0,5,0,0" VerticalAlignment ="Top"   />
             </HierarchicalDataTemplate>
      </ListBox.ItemTemplate>
</ListBox>

      </Grid> 
```

* * *

这是我的代码，我想在其中找到选中了多少复选框？

```
for (int i = 0; i < listBoxZone.Items.Count; i++)
                    {
                        if (CheckBoxZone.IsChecked == true )
                        { 

                        }

                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:05:11.140

您可以将`IsChecked`类型的属性`Nullable<bool>`（可以写为`bool?`）添加到数据项类并双向绑定[CheckBox.IsChecked](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.ischecked)属性：

```
<CheckBox Name="CheckBoxZone" IsChecked={Binding IsChecked, Mode=TwoWay} ... /> 
```

现在您可以简单地遍历所有项目并检查它们的`IsChecked`状态：

```
int numChecked = 0;
foreach (MyItem item in listBoxZone.Items)
{
    if ((bool)item.IsChecked) // cast Nullable<bool> to bool
    {
        numChecked++;
    }
} 
```

或使用 Linq：

```
int numChecked =
    itemsControl.Items.Cast<MyItem>().Count(i => (bool)i.IsChecked); 
```

请注意：为什么要在 ListBox 中使用 HierarchicalDataTemplate，而[DataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)就足够了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:38:07.240

`OfType`LINQ的使用方法

```
int result = 
            listBoxZone.Items.OfType<CheckBox>().Count(i => i.IsChecked == true); 
```

我使用`OfType`而不是`Cast`因为`OfType`即使有一个复选框项目或所有项目都是复选框，它也会起作用。

如果`Cast`即使单个项目不是复选框，也会出错。

# xml - 如何在转换文件时从文档中删除 XML 声明

> ID：10614105
> 
> 赞同：0
> 
> 时间：2012-05-16T07:44:33.473
> 
> 标签：xml, dom

我正在使用 DOM 解析器来解析我的 xml 内容。

完成解析后，我将文档转换为一个新文件。但它会生成一个新文件，该文件为 XML 声明添加了新行。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<TFORMer major="1" minor="0">
<!-- (c) 1998-2008 TEC-IT Datenverarbeitung GmbH --> 
```

在上面的行中，xml 版本声明是由转换器自动添加的。

如何将转换器配置为不添加该 XML 声明行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:09:54.993

将此行添加到您的 xslt 文件（处理器），方法也可以是“html”

```
<xsl:output omit-xml-declaration="yes" method="xml"/> 
```

# browser - 在任何地方停止浏览器

> ID：10614107
> 
> 赞同：4
> 
> 时间：2012-05-16T07:44:40.907
> 
> 标签：browser

我已经检查了许多关于如何随时停止任何浏览器的问题和答案，但我还没有找到解决问题的方法。

我的应用程序中有一个注销按钮，当我按下它时，它会将一些类添加到`<a>`标签中。是否有任何键/快捷方式可以阻止 Mozilla/Chrome（任何浏览器）执行操作或保持同一页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:59:11.130

我相信您正在寻找的是带有**断点**的调试器。断点允许您将代码的某些部分标记为您希望执行该代码暂时暂停其状态的点，直到您准备好进入下一个断点为止。

现代浏览器，例如 Google Chrome（或任何其他 WebKit 浏览器，如 Safari）或带有 Firebug Firefox 扩展的 Mozilla Firefox 具有此功能。

## **Chrome（WebKit 浏览器）：**

您可以在 Chrome（和大多数 WebKit 浏览器）的“脚本”选项卡中的 JavaScript 中设置断点：

来自[Chrome 开发人员工具：脚本断点](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)：

> *   通过点击 Control-Shift-I 快捷键打开开发者工具
> *   打开脚本面板并从脚本下拉菜单中选择“script.js”
> *   通过单击行间距在第 19 行设置断点（您可以使用 Control-G 快捷方式在大文件中显示一行）
> *   将鼠标移到此页面上
> *   您应该在断点处停止
> *   将鼠标悬停在源代码上以检查局部和全局变量、函数参数等。
> *   通过单击蓝色标记断点指示器删除断点
> *   单击继续按钮或在开发人员工具窗口中按 F8 以恢复

![在 Chrome 中设置断点](../Images/be08ec0e8cc42477b8e0f91cc32c4525.png)

## **带有 Firebug 的 Firefox：**

此页面上有无[数次 Firebug 断点](http://getfirebug.com/doc/breakpoints/demo.html)和其他调试器功能的演示。

该功能与 WebKit 浏览器中的开发工具非常相似。

![在此处输入图像描述](../Images/7d6df50b4bd2c5ef5f1a10ba0a834ae1.png)

## **IE浏览器：**

Internet Explorer 还内置了开发人员工具，其中包括许多其他功能，使用户能够设置断点和停止脚本的执行。虽然 Chrome 调试器在许多情况下就足够了，但与其他浏览器相比，某些错误和跨浏览器问题往往对 Internet Explorer 的影响更大。

因此，在尝试解决仅影响 Internet Explorer 的问题时，“使用开发人员工具调试脚本”页面的[设置断点](http://msdn.microsoft.com/en-us/library/dd565625(v=vs.85).aspx#_break)部分将非常有用。

![在此处输入图像描述](../Images/cf428d260293550b08be07844add0c1c.png)

# php - 如何将 EasyPhp 升级到 php 5.4？

> ID：10614115
> 
> 赞同：0
> 
> 时间：2012-05-16T07:45:17.893
> 
> 标签：php, apache, wamp, easyphp

easyphp 目前是 5.3.9，我需要最新的。我从 php.net 下载了最新的 php 包，并删除了旧的 php 并复制了新的 php 目录。我尝试“ `phpinfo();`”，首先它显示结果，但最后 Windows 7 说 apache 已崩溃。如何升级到最新的php？错误日志：

```
[Wed May 16 09:38:36 2012] [notice] Apache/2.2.21 (Win32) PHP/5.4.2 configured -- resuming normal operations
[Wed May 16 09:38:36 2012] [notice] Server built: Sep 10 2011 11:34:11
[Wed May 16 09:38:36 2012] [notice] Parent: Created child process 3900
[Wed May 16 09:38:36 2012] [notice] Child 3900: Child process is running
[Wed May 16 09:38:36 2012] [notice] Child 3900: Acquired the start mutex.
[Wed May 16 09:38:36 2012] [notice] Child 3900: Starting 64 worker threads.
[Wed May 16 09:38:36 2012] [notice] Child 3900: Starting thread to listen on port 8887.
[Wed May 16 09:39:03 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Wed May 16 09:39:04 2012] [notice] Apache/2.2.21 (Win32) PHP/5.4.2 configured -- resuming normal operations
[Wed May 16 09:39:04 2012] [notice] Server built: Sep 10 2011 11:34:11
[Wed May 16 09:39:04 2012] [notice] Parent: Created child process 2764
[Wed May 16 09:39:04 2012] [notice] Child 2764: Child process is running
[Wed May 16 09:39:04 2012] [notice] Child 2764: Acquired the start mutex.
[Wed May 16 09:39:04 2012] [notice] Child 2764: Starting 64 worker threads.
[Wed May 16 09:39:04 2012] [notice] Child 2764: Starting thread to listen on port 8887.
[Wed May 16 09:39:23 2012] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Wed May 16 09:39:23 2012] [notice] Child 2764: Exit event signaled. Child process is ending.
[Wed May 16 09:39:24 2012] [notice] Child 2764: Released the start mutex
[Wed May 16 09:39:25 2012] [notice] Child 2764: All worker threads have exited.
[Wed May 16 09:39:25 2012] [notice] Child 2764: Child process is exiting
[Wed May 16 09:39:25 2012] [notice] Parent: Child process exited successfully.
[Wed May 16 09:40:46 2012] [notice] Apache/2.2.21 (Win32) PHP/5.4.2 configured -- resuming normal operations
[Wed May 16 09:40:46 2012] [notice] Server built: Sep 10 2011 11:34:11
[Wed May 16 09:40:46 2012] [notice] Parent: Created child process 5712
[Wed May 16 09:40:46 2012] [notice] Child 5712: Child process is running
[Wed May 16 09:40:46 2012] [notice] Child 5712: Acquired the start mutex.
[Wed May 16 09:40:46 2012] [notice] Child 5712: Starting 64 worker threads.
[Wed May 16 09:40:46 2012] [notice] Child 5712: Starting thread to listen on port 8887.
[Wed May 16 09:41:01 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting.
[Wed May 16 09:41:01 2012] [notice] Apache/2.2.21 (Win32) PHP/5.4.2 configured -- resuming normal operations
[Wed May 16 09:41:01 2012] [notice] Server built: Sep 10 2011 11:34:11
[Wed May 16 09:41:01 2012] [notice] Parent: Created child process 3972
[Wed May 16 09:41:01 2012] [notice] Child 3972: Child process is running
[Wed May 16 09:41:01 2012] [notice] Child 3972: Acquired the start mutex.
[Wed May 16 09:41:01 2012] [notice] Child 3972: Starting 64 worker threads.
[Wed May 16 09:41:01 2012] [notice] Child 3972: Starting thread to listen on port 8887.
[Wed May 16 09:42:20 2012] [notice] Parent: Received shutdown signal -- Shutting down the server.
[Wed May 16 09:42:20 2012] [notice] Child 3972: Exit event signaled. Child process is ending.
[Wed May 16 09:42:21 2012] [notice] Child 3972: Released the start mutex
[Wed May 16 09:42:22 2012] [notice] Child 3972: All worker threads have exited.
[Wed May 16 09:42:22 2012] [notice] Child 3972: Child process is exiting
[Wed May 16 09:42:22 2012] [notice] Parent: Child process exited successfully. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:50:58.233

虽然不是您正在寻找的确切答案.. 我曾经使用 EasyPHP，直到我意识到他们的更新非常非常缓慢。从那以后，我开始改用[The Uniform Server](http://www.uniformserver.com/)，它提供或多或少相同的工具，但更新更频繁，也可以从 USB 运行。

# c - 在 char * var 中分配的内存；宣言

> ID：10614118
> 
> 赞同：0
> 
> 时间：2012-05-16T07:45:37.827
> 
> 标签：c, string, cstring, string-literals

在 C 中，像这样声明一个 char 指针

```
char* p="Hello"; 
```

为字符串文字分配一些内存`Hello\0`。当我之后这样做时

```
p="FTW"; 
```

分配给的内存会发生什么`Hello\0`？p 指向的地址是否改变了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T07:47:44.533

这两个语句中都没有动态内存分配。

这些字符串存储在您的可执行文件中，加载在内存的（可能是只读的）部分中，该部分将与您的进程一样长。

第二个任务只改变`p`指向的内容。没有其他事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:48:20.573

内存仍然被 占用`"Hello"`。它丢失了（除非您有其他引用它）。

`p`指向的地址（的值`p`）当然会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:48:41.433

在这种情况下，“Hello”是在编译时创建的，并且是二进制文件的一部分。在大多数情况下，“Hello”存储在只读存储器中。“FTW”也是二进制文件的一部分。第二次赋值只会改变指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:49:55.307

此外 -正如大都会指出的那样`"Hello"`，具有静态存储持续时间`"FTW"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T10:03:07.407

它创建了一个无法修改的字符串常量，应该按原样使用。

如果你尝试做

```
p[0]='m'; 
```

它会给出分段错误，因为这不是具有分配内存的字符串文字，您可以在其中重新分配和读回值。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-17T07:08:34.037

如果

```
p = getbuffer();

getbuffer()
{
   return buf = malloc(buf, size);
} 
```

在将新内存分配给 p 之前如何释放此内存！想象一下 p 应该多次使用 getbuffer() 。

# android - 如何从 Unity 发送值并在 Java 中为我的插件接收？

> ID：10614119
> 
> 赞同：1
> 
> 时间：2012-05-16T07:45:54.257
> 
> 标签：android, unity3d

我想为我的 android 插件将数据从 Unity 发送到 java。

**这是我的统一代码：**

```
AndroidJNI.AttachCurrentThread();
IntPtr cls_Activity = AndroidJNI.FindClass("com/unity3d/player/UnityPlayer");
    IntPtr fid_Activity = AndroidJNI.GetStaticFieldID(cls_Activity, "currentActivity", "Landroid/app/Activity;");
    IntPtr obj_Activity = AndroidJNI.GetStaticObjectField(cls_Activity, fid_Activity);                  
    Debug.Log("Setup Objects Complete");        

    IntPtr cls_OurAppNameActivityClass = AndroidJNI.FindClass("org/plugin/test/AdmobTestActivity"); 

    IntPtr startAdsMethod = AndroidJNI.GetMethodID(cls_OurAppNameActivityClass, "EnableAds", "(J)V");
    Debug.Log("before If Loop");        

    if (AndroidJNI.IsInstanceOf(obj_Activity, cls_OurAppNameActivityClass) != false)
    {
        //Debug.Log("Activity IS a OurAppNameActivity");
        jvalue[] myArray = new jvalue[1];
            myArray[0] = new jvalue();
            myArray[0].i = 12;
            AndroidJNI.CallVoidMethod(obj_Activity, startAdsMethod, myArray);                    

            Debug.Log("Activity Leaving a OurAppNameActivity");
    } 
```

**这是我的 Java 代码：**

```
public void EnableAds(int qwe)
{       
    Log.i(APP_TAG, "Value" + qwe);
} 
```

**错误：**

```
05-16 13:11:30.906: W/dalvikvm(12315): threadid=8: thread exiting with uncaught exception (group=0x40018578)
05-16 13:11:30.921: E/AndroidRuntime(12315): FATAL EXCEPTION: GLThread 9
05-16 13:11:30.921: E/AndroidRuntime(12315): java.lang.NoSuchMethodError: EnableAds
05-16 13:11:30.921: E/AndroidRuntime(12315):    at com.unity3d.player.UnityPlayer.nativeRender(Native Method)
05-16 13:11:30.921: E/AndroidRuntime(12315):    at com.unity3d.player.UnityPlayer.onDrawFrame(Unknown Source)
05-16 13:11:30.921: E/AndroidRuntime(12315):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1368)
05-16 13:11:30.921: E/AndroidRuntime(12315):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

**并强制关闭..**

如果我在 java 代码中从 EnableAdv(int qwe) 中删除了 int 参数，则此应用程序工作正常。

谁能告诉我，这段代码中缺少什么。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:13:32.410

**我找到了答案。。**

我想使用“（J）V”作为我的参数类型..但我不想使用“（I）V”。

**例如，Java 方法：**

long f (int n, String s, int[] arr); 具有以下类型签名：

"(ILjava/lang/String;[I)V

请参阅[此](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html#wp276)以进一步阅读

# xml - 为什么这个 XML 文件不显示任何内容？

> ID：10614120
> 
> 赞同：4
> 
> 时间：2012-05-16T07:45:54.487
> 
> 标签：xml, xslt, google-chrome

> **可能重复：**
> [如何使 XSLT 在 chrome 中工作？](https://stackoverflow.com/questions/2981524/how-can-i-make-xslt-work-in-chrome)

我有这个 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="catalog.xsl"?>

<catalog>
    <album>
        <title>Exodus</title>
        <artist>Bob Marley</artist>
        <country>Jamaica</country>
        <price>19,99</price>
    </album>
    <album>
        <title>Black Album</title>
        <artist>Metallica</artist>
        <country>USA</country>
        <price>20,00</price>
    </album>
    <album>
        <title>Nevermind</title>
        <artist>Nirvana</artist>
        <country>USA</country>
        <price>22,00</price>
    </album>
</catalog> 
```

链接到这个 XSL 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">
        <html>
            <body>
                <h2>My Catalog</h2>
                <table border="1">
                    <tr bgcolor="#9ACD32">
                        <th>Title</th>
                        <th>Artist</th>
                    </tr>
                    <xsl:for-each select="catalog/album">
                        <tr>
                            <td><xsl:value-of select="title"/></td>
                            <td><xsl:value-of select="artist"/></td>
                        </tr>
                    </xsl:for-each>
                </table>
           </body>
       </html>
    </xsl:template>
</xsl:stylesheet> 
```

当我在浏览器中打开 XML 文件时，我看不到任何显示。由于我按照说明从教程中复制，我不确定这里出了什么问题。您对可能导致显示不足的原因有任何线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:42:51.507

根据您使用的浏览器的 XSLT 约束，您可能什么也看不到。

我使用 Chrome 19.0.1084.46 和 Firefox 3.6.22 在本地测试了您的文件。

在 Firefox 中我可以毫无问题地查看它，但在 Chrome 中我什么也没看到。

当我在 Chrome 的开发人员工具中打开控制台选项卡时，它会显示以下消息：

> 从带有 URL 文件:///temp/web/catalog.xml 的框架加载 URL 文件：///temp/web/catalog.xsl 的尝试不安全。域、协议和端口必须匹配。

然后，我启动了我的 Tomcat 并部署了 2 个文件，当我从 Chrome 访问 xml 时*，*它按预期显示了所有内容。

我猜您正在使用 file:/// 访问它，这与此问题有关[Bug 397894](https://bugzilla.mozilla.org/show_bug.cgi?id=397894#c6)

# android - 关于 NoClassDefFoundError

> ID：10614128
> 
> 赞同：0
> 
> 时间：2012-05-16T07:46:24.650
> 
> 标签：android

我使用了 apache 的 StringUtils 类的 isEmpty 和 isBlank 方法。这些方法效果很好，几周后突然我得到了错误

**java.lang.NoClassDefFoundError: org.apache.commons.lang3.StringUtils**

我很困惑为什么会突然发生这个错误。如果有人帮助我理解这突然发生的事情，那就太好了。

人们说 apache 可能已经更改了他们 JAR 文件中的定义，这是正确的吗，我真的很困惑为什么会突然发生这种情况，我从构建路径中删除了旧 jar 并下载了相同版本的 New Jar 并将其添加到构建路径，那么这个问题就解决了。

它发生在市场代码中，与 ADT 和市场代码没有交互

在这个问题上真的很困惑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:10:22.417

这也发生在我身上 - 在更新 Android SDK 工具之后。在当前版本 (19) 中，您需要做的是：

1.  在项目的根目录中创建 libs/ 文件夹，并将所有 jars 放在那里（文件夹的名称固定为“libs”）
2.  在此之后，转到项目属性 --> Java 构建路径 --> 库，然后删除您之前添加的所有自定义 jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:57:52.630

[NoClassDefFoundError](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NoClassDefFoundError.html)表示如果 JVM 或 ClassLoader 实例尝试加载类的定义并且找不到该类的定义，则抛出 NoClassDefFoundError。

也许[启动脚本覆盖了 Classpath 环境变量](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html)。

# wcf - 在 WCF app.config 中，为什么基地址需要前缀 http:// 或 net.tcp？

> ID：10614132
> 
> 赞同：1
> 
> 时间：2012-05-16T07:46:44.230
> 
> 标签：wcf

我正在观看关于 WCF 的网络广播，它在 app.config 中定义了两个端点，一个`netTcpBinding`和一个`mexHttpBinding`.

它还有两个基地址，`net.tcp://localhost:9000`和`http://localhost:8000`.

我想知道它如何将这些基地址与端点相关联。既然你的端点指定了 tcp 或 http，为什么基地址要以 net.tcp 和 http 为前缀？

如果 WCF 使用带有 netTcpBinding 端点的 net.tcp 基地址，那么如果您有两个侦听 9000 和 9001 的 tcp 端点会发生什么情况，您会在配置中添加什么来阻止冲突？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T08:36:33.090

> 我想知道它如何将这些基地址与端点相关联。

根据协议。

当您定义服务端点时，您可以为端点提供相对或绝对地址，如果您提供绝对端点地址，则基地址将不会用于生成实际端点地址，但是如果您在端点中提供相对地址，那么您的基地址和相对地址的组合将用于生成最终端点地址。

例如，相对端点地址如下所示：

```
 <endpoint address="/hostHttp"  binding="wsHttpBinding"  contract="IMyService" />
  <endpoint address="/hostNetTcp"  binding="netTcpBinding"  contract="IMyService" /> 
```

现在 WCF 将使用您为*每个协议*定义的基地址生成实际的端点地址：

```
<baseAddresses>
            <add baseAddress="http://localhost:8550/MyServiceHost/Service"/>
            <add baseAddress="net.tcp://localhost:8551/MyServiceHost/Service"/>
</baseAddresses> 
```

因此，您的 HTTP 端点地址最终将是：

```
http://localhost:8550/MyServiceHost/Service/hostHttp 
```

和你的 netTcp 端点：

```
net.tcp://localhost:8551/MyServiceHost/Service/hostNetTcp 
```

现在，如果您定义了另一个协议，并且尚未在端点中定义绝对地址，WCF 将查找为该特定协议定义的基地址，并使用基地址生成端点。

> 如果 WCF 使用带有 netTcpBinding 端点的 net.tcp 基地址，那么如果您有两个侦听 9000 和 9001 的 tcp 端点会发生什么情况，您会在配置中添加什么来阻止冲突？

我认为在这种情况下最好在 ypour 端点中给出绝对地址：

```
<endpoint address="net.tcp://localhost:9000/MyServiceHost/Service"
                   binding="netTcpBinding"
                   contract="IMyService" />

<endpoint address="net.tcp://localhost:9001/MyServiceHost/Service"
                   binding="netTcpBinding"
                   contract="IMyService" /> 
```

如前所述，当您提供绝对地址时，在生成端点地址时不会参考您的基地址。

你可能想看看[这个](http://msdn.microsoft.com/en-us/library/ms734786.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:18:17.693

我可能有点误解，但如果你想修改（我不知道你为什么会这样做！）它将 net.tcp 地址与 nettcpbinding 相关联 - 你可以在配置文件的协议映射部分中这样做

[如此处](http://msdn.microsoft.com/en-us/library/ee816881.aspx)突出显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:29:18.683

关于多个基地址。它是如何选择正确的，我不确定，但是正如您所观察到的，“您也可以为一个服务设置多个基地址，但每个服务只允许每个传输一个基地址”，更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms733749.aspx)。

您不能有两个相同类型的基地址。

# javascript - 在没有商店的情况下使用带有选择器列插件的 Dojo dgrid？

> ID：10614136
> 
> 赞同：0
> 
> 时间：2012-05-16T07:47:18.220
> 
> 标签：javascript, dojo, widget, dgrid

是否可以使用带有复选框的数组（而不是数据存储）支持的 Dojo [dgrid小部件来选择行？](http://dojofoundation.org/packages/dgrid/tutorials/hello_dgrid/)

我成功地从一个基本的数组支持的 dgrid 开始，然后添加了[Selection mixin](https://github.com/SitePen/dgrid/wiki/Components-Mixins)以启用行选择。所以现在我有一个由数组支持并允许行选择的 dgrid。但是，当我尝试通过[选择器列插件](https://github.com/SitePen/dgrid/wiki/Components-Plugins)添加复选框时，出现错误：`this.store is undefined.`

我确定 this.store 用于识别选择了哪些行：有几个调用 this.store.getIdentity(rowObject) 方法，它与查询网格选择时返回的结果直接相关。

当使用对象数组而不是存储时，是否可以指定某个列字段来标识选定的行？下面我的代码中的 WORKAROUND_STORE 有效地做到了这一点，但也许我错过了一个简单的解决方案，比如设置一些属性，例如：`selector({idProperty: 'col1'}).`看起来它应该更容易做到。

```
require(["dgrid/Grid",
         "dgrid/selector",
         "dgrid/Selection",
         "dojo/_base/declare"],
    function(Grid, selector, Selection, declare){

        var columns = {
            col1: selector({}),
            col2: {label: 'COL2'},
            col3: {label: 'COL3'},
        };

        var data = [
            { col1: '1', col2: 'A', col3: 'I'},
            { col1: '2', col2: 'B', col3: 'II'},
            { col1: '3', col2: 'C', col3: 'III'}
        ];

        WORKAROUND_STORE = {
            getIdentity: function(item) { return item.col1 }
        }

        var SelectionGrid = declare([Grid, Selection]);
        window.methodGrid = new SelectionGrid({
            store: WORKAROUND_STORE,
            columns: columns,
            selectionMode: "none",
            allowSelectAll: true
        }, "methodGridDiv");
        window.methodGrid.renderArray(data);
    }
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T06:06:36.157

这就是我最终要做的事情：我将我的数据数组包装在一个 Dojo 内存存储中，它有一个 setData() 方法来接受一个新的数据数组。主要变化：

*   使用 OnDemandGrid 而不是 Grid
*   将数据数组包装在 Dojo Memory 存储对象中
*   更新网格的存储以更新数据数组
*   调用网格的刷新方法()

完整代码：

```
require(["dgrid/OnDemandGrid",
         "dgrid/selector",
         "dgrid/Selection",
         "dojo/_base/declare",
         "dojo/store/Memory"],
    function(OnDemandGrid, selector, Selection, declare, Memory){

        var columns = {
            col1: selector({}),
            col2: {label: 'COL2'},
            col3: {label: 'COL3'},
        };

        var data = [
            { col1: '1', col2: 'A', col3: 'I'},
            { col1: '2', col2: 'B', col3: 'II'},
            { col1: '3', col2: 'C', col3: 'III'}
        ];

        var SelectionGrid = declare([OnDemandGrid, Selection]);
        window.methodGrid = new SelectionGrid({
            store: Memory({idProperty: 'methodId'}),
            columns: columns,
            selectionMode: "none",
            allowSelectAll: true
        }, "methodGridDiv");
        window.methodGrid.store.setData(data);
        window.methodGrid.refresh();
    }
); 
```

* * *

**更新**以响应：

> 你真的在那里得到了复选框吗？我在您的代码片段中看不到这一点。

添加复选框的代码是：`col1: selector({})`. 或更明确地说：`col1: selector({selectorType: 'checkbox'})`

请注意，选择器插件是另一个[列插件](https://github.com/SitePen/dgrid/wiki/Column-Plugins)，其工作方式与编辑器插件不同。

# sql - 即使一张表中的计数为0，SQL查询也能获取记录

> ID：10614150
> 
> 赞同：1
> 
> 时间：2012-05-16T07:48:47.687
> 
> 标签：sql

```
select id, name, 'First Category' as category, count(id) as totalCalls
from missed_call
where name = 'whatever1'
group by name, category
UNION
select id, name, 'Second Category' as category, count(id) as totalCalls
from missed_call
where name = 'whatever2'
group by name, category
order by name ASC, totalCalls DESC 
```

前面的查询不会检索*totalCalls*为 0 的记录。

那么，我该如何获取这些记录并将*totalCalls 显示*为 0？

**更新**：我试过改变`count(id) as totalCalls`，`IFNULL(count(id), 0) as totalCalls`但它不能解决问题。也许，因为 count(id) 实际上不为空，它只是不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:18:06.537

如果你不愿意扩展你的数据库模式，你可以假装有一个表：

```
select surrogateTable.name, 
       surrogateTable.Category, 
       count(id) as totalCalls
from 
(
  select 'whatever1' Name,
         'First Category' Category
  union all
  select 'whatever2',
         'Second Category'
) surrogateTable
left join missed_call
  on surrogateTable.Name = missed_call.Name
group by surrogateTable.name, surrogateTable.category 
```

我在 select 中删除了 id 因为你不应该选择你没有分组的东西——这可能是 MySql。

[在 Sql Fiddle 上检查这个](http://sqlfiddle.com/#!2/19a20/3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:17:21.150

您的问题是您只查看未接电话而不查看类别，因此您无法注意到没有相应未接电话的类别。

这是执行此操作的框架，假设您将使其适应类别表的真实结构。

```
SELECT ...
FROM Category cat
    LEFT JOIN missed_call call ON call.category = category.id
WHERE (call.name = 'whatever1' OR call.category IS NULL)
GROUP BY call.name, call.category
... 
```

特别注意`call.category IS NULL`。该列应该是不可为空的；所以这确实检查了`Category`没有任何相应调用的行，这是外部连接的工件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:17:34.393

您应该定义一个名为的表`category`，以包含所有可能的类别名称的完整列表，即使是那些没有分配给它们的调用（即零）。

```
create table category
(
    id  numeric(10,0) NOT NULL,
    name    varchar(10) NULL
) 
```

然后，您可以从该表中查询完整的类别列表，并将结果与​​上面的结果进行左连接。

然后，您可以修改`missed_call`对新`category`表使用外键以提高效率和更好的架构设计

```
create table missed_call
(
    id  numeric(10,0) NOT NULL,
    first_category_id numeric(10,0) NULL,
    second_category_id numeric(10,0) NULL,
    name  varchar(12)
) 
```

# java - 如何根据 JComboBox 选择动态地将控件添加到表单中？

> ID：10614151
> 
> 赞同：2
> 
> 时间：2012-05-16T07:48:48.630
> 
> 标签：java, swing

我正在尝试使用 Swing 创建一个简单的 java 表单。基本思想是用户将在 JComboBox 中选择 0 到 5。然后，通过 ItemStateChanged 监听器，将动态添加几个面板，每个面板都包含 4 个控件。因此，如果用户选择数字三，则会添加三个面板，每个面板包含一个文本框和一个组合框。然后我想将此信息发送到数据库。我不想在我的数据库中有一堆空值，这是由一种尺寸适合所有形式的。因此，如果用户选择 3，则会将 3 个新行添加到数据库中。任何帮助或见解将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:52:30.710

我认为您已经看过[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，教程显示了有关在[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)事件中切换[JPanel的示例](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

# c# - 我可以在返回时执行此操作以处理异常吗

> ID：10614154
> 
> 赞同：0
> 
> 时间：2012-05-16T07:49:08.077
> 
> 标签：c#, datatable, return, try-catch

在我的函数中，我返回一个由方法返回的数据表

`MyDatatable(sqlQuery, connection ),`

但它可能会产生一些会引发错误的异常我可以做这样的事情吗

```
return  try {cmn.MyDatatable(qry, con)} catch(Exception ex){null}; 
```

我不想这样做

```
DataTable dt =null;
try{
dt = cmn.MyDatatable(qry, con);
}catch().....
return dt==null ? null :dt; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T07:50:23.530

你的语法是完全错误的。你可以这样做：

```
try
{
    return cmd.MyDatatable(qry, con);
}
catch(Exception ex)
{
    return null;
} 
```

虽然我怀疑你想吞下*所有*的例外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:54:24.227

IMO，最好的方法是这样做：

```
{
  object l_oOutDatatable = null;
  try
  {
    oOutDatable = cmd.MyDatatable(qry, con);
  }
  catch(Exception e)
  {
    log.Message(e.ToString);
  }

  return l_oOutDatatable;
} 
```

您必须始终管理异常，因为它们必须有充分的理由被抛出;)。此外，在每种方法中都有一个返回被认为是一种好习惯。

另外，您可以使用`??`关键字：此关键字表示返回值或其他内容（如果它为空）。例如：`c = a ?? b`与此类似：`c = (a!=null) ? a : b;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:56:22.883

您应该将异常一直返回给调用此代码的客户端。由客户端来处理异常。

请记住，您应该只在您期望它们发生的地方捕获异常，例如尝试连接到数据库或将文件写入磁盘等。

您还应该使您的异常捕获尽可能具体，以捕获通常在获取数据集时发生的已知异常。

```
try
{
    return cmd.MyDatatable(qry, con);
}
catch(Exception ex)
{
    //Log exeption
    Throw ex
} 
```

如果这只是在没有结果时处理空数据表的检查，那么您应该测试它们是否为空或已填充。如果它是您的应用程序返回空数据表的能力的一部分，这将是一个更好的解决方案。

```
var dataTableResult = cmd.MyDatatable(qry, con);
if ( dataTableResult != null)
{
    return dataTableResult;
}

return null; 
```

# c# - 在 Visual C# 2010 Express 中编译 C# 代码

> ID：10614159
> 
> 赞同：0
> 
> 时间：2012-05-16T07:49:43.590
> 
> 标签：c#, visual-studio-2010

我只有一个关于 C# 的问题。

我已经下载了 Microsoft Visual C# 2010 Express 来编写 C# 代码。

现在，我想使用相同的可视化 C# 编译代码。我可以吗？

我已经搜索了一种编译代码的方法，但是我创建的所有方法都在谈论命令行“cmd”。我尝试使用它，但它给了我“csc 不被识别为内部或外部命令.....”尽管我所在的目录与 C# 代码目录相同

我想编译并在输出中查看结果。

这是要编译的原始代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Project1
{
    class Example1_1
    {
        public static void Main()
        {
            // display “Hello World!” on the screen
            System.Console.WriteLine("Hello World!");
            // display the current date and time
            System.Console.WriteLine("The current date and time is " +
            System.DateTime.Now);
        }
    }
} 
```

按 F6 'build' 的结果是：

> ------ 构建开始：项目：Project1，配置：Release x86 ------
> Project1 -> C:\Users\Ali Alnufaili\AppData\Local\Temporary Projects\Project1\bin\Release\Project1.exe ========== 构建：1 个成功或最新，0 个失败，0 个跳过 ==========

如果您有任何建议，请告诉我。^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:53:06.240

只需按下此按钮：

![在此处输入图像描述](../Images/529b059facdd03312e3a4ba69575d88d.png)

或点击`F5`编译并运行您的代码。

**编辑：**

因此，您正在运行一个控制台应用程序并将一些文本写入控制台。也许您的问题是控制台窗口弹出并立即关闭？

尝试`System.Console.ReadKey();`在 Main 方法的底部添加。然后控制台窗口将保持打开状态，直到您按下一个键。

或者去你编译的程序所在的目录（看起来是C:\Users\Ali Alnufaili\AppData\Local\Temporary Projects\Project1\bin\Release），打开命令提示符（在Windows资源管理器中，按住`SHIFT`并按鼠标右键并选择*在此处打开命令提示符*），然后在命令提示符下运行可执行文件（只需键入*Project1.exe*并按回车键）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:52:28.727

如果您在 Visual Studio 中创建了一个项目，您应该能够简单地使用菜单/工具栏中的“构建”选项。

如果您有默认的 C# 键绑定，我相信`F6`这是在调试器下启动的快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:22:44.787

我确定您已经使用了一些教程作为示例。教程没有提到按下`**F5**`编译和运行应用程序吗？

您的 Build 输出表明您的程序已成功编译，但要启动您的应用程序，您也需要按`**F5**`。

此外，目前您的程序将在完成后立即退出。要让它等待，请在末尾添加以下行：

```
Console.ReadLine(); 
```

这会让你看到你的输出，然后程序会等到你按下回车键。

# android - 在不同的屏幕分辨率上绘制视图

> ID：10614162
> 
> 赞同：1
> 
> 时间：2012-05-16T07:49:47.357
> 
> 标签：android, canvas, android-view, ondraw

我正在尝试在我的应用程序中绘制一个矩形视图，但它在具有不同屏幕分辨率的不同设备中看起来不同。任何想法如何在所有不同的分辨率设计中绘制相同大小的视图。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T07:54:24.227

从[文档（支持多种屏幕尺寸）](http://developer.android.com/guide/practices/screens_support.html)：

将您的尺寸乘以`scale`

```
// Get the screen's density scale
final float scale = getResources().getDisplayMetrics().density; 
```

# java - 多svn分支中多模块maven项目的最佳实践是什么

> ID：10614166
> 
> 赞同：1
> 
> 时间：2012-05-16T07:50:01.017
> 
> 标签：java, svn, maven-2, branch

**背景**

1.  标准 svn 布局中的一个主干和一个分支，`/trunk`以及`/branches/prod`
2.  maven项目中大约20个模块
3.  当我想编译主干时，只需键入`cd trunk; mvn clean package`. 但它会编译每个模块。当需要构建生产时类似的东西。
4.  一个中心 Maven 回购

**问题**

1.  是否可以仅编译更新的模块？实际上，我只想在可能的情况下编译修改后的源文件。我知道这是一件简单的事情`ant`or `make`。但是，`maven compile`始终从头开始。
2.  主干和产品中的 pom.xml 是否应该保持相同的 artifactId 和版本？相同的 artifactId 和 version 不能与 maven:deploy 一起使用，因为trunk 和 prod 将覆盖彼此部署的包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:47:24.370

您可以尝试使用 mvn -am -pl 选项，它将操作限制在给定的模块。

```
+-- root (pom.xml)
     +-- client (pom.xml) dep: core
     +-- server (pom.xml) dep: client
     +-- core (pom.xml) 
     +-- cli (pom.xml) dep:core 
```

如果你做一个

```
mvn -am -pl server LifeCycle 
```

只有服务器模块和服务器使用的模块将运行适当的生命周期。

```
mvn -am -pl cli LifeCycle 
```

在这种情况下，只有 cli 模块和核心模块将在给定的生命周期中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:52:24.893

mvn compile 并不总是从头开始构建。它只编译更改的 java 文件。除非你运行 mvn clean compile。然后，当然，所有项目都将被清理，然后从头开始编译。

您始终可以 cd 进入您想要的项目并自行编译。

**编辑**如果您调用 mvn compile， Maven*确实*总是运行所有阶段直到编译阶段，并且那里可能存在耗时的插件执行。但是java文件的实际编译并没有超出需要。运行 mvn compile 两次，您将看到消息“没有要编译的所有类都是最新的”

还是“所有*文件*都是最新的”..？

**编辑-问题nbr 2** 如果从两者生成的工件不是不同的版本，为什么要从主干和产品中发布？*是*的，他们应该有不同的版本。除非您创建一个实验分支，您可能会合并回主干，并且您从不打算自行发布它。在这种情况下，实验分支不需要自己的版本号。

# c# - 在更新面板中的 AsyncPostBackTrigger 之后在 Javascript 中访问时下拉列表（ddlState）值丢失

> ID：10614167
> 
> 赞同：1
> 
> 时间：2012-05-16T07:50:01.057
> 
> 标签：c#, asp.net, .net, asp.net-ajax

我有 ddlCountry 下拉列表和 ddlState 下拉列表。ddlState 在更新面板中。在选择国家时，我使用 ddlCountry 的 selectedindexchanged 事件填充了它的状态。绑定后，我在两个下拉列表中都添加了起始值“-1”，如果下拉列表内容为 [Select] 值“-1”，则检查 Javascript，然后发出警报并返回 false。

但是验证适用于 ddlCountry 和 ddlState 在 ajax 更新面板触发并且验证失败后，其值变为“空白”。

我应该如何解决它们？我不知道为什么在 AsyncPostBackTrigger 之后 ddlState 值会丢失。

```
 //javascript validation

        function validateForm()
                {
                    if (ddlCountry .value == "-1")
                    {
                        alert("Country  should not be blank.");
                        ddlCountry .focus();
                        return false;
                    }
                    if (ddlState .value == "-1")
                    {
                        alert("State should not be blank.");
                        ddlState .focus();
                        return false;
                    }

                    return true;
                }
        //Aspx code
<asp:DropDownList ID="ddlCountry " runat="server" CssClass="csstextbox" Width="207px"
                                AutoPostBack="true"  OnSelectedIndexChanged="ddlCountry _SelectedIndexChanged">
                            </asp:DropDownList>
                 <asp:UpdatePanel ID="updatePanelState" runat="server">
                                                    <ContentTemplate>                               
                        <asp:DropDownList ID="ddlState " runat="server" CssClass="csstextbox" Width="177px">
                                                        </asp:DropDownList>
                                                    </ContentTemplate>
                                                    <Triggers>
                                                        <asp:AsyncPostBackTrigger ControlID="ddlCountry" EventName="SelectedIndexChanged" />
                                                    </Triggers>
                                                </asp:UpdatePanel>
            //Code Behind

    protected void Page_Load(object sender, EventArgs e)
        {
               if(!IsPostBack)
            {
                    BindCountry();
                    }
            }
            protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
                {       
                    int countryID = Convert.ToInt32(ddlCountry.SelectedItem.Value);

                    ifcountryID == -1)
                    {
                        return;
                    }

                    strSQL = @"SELECT State_ID,State_Desc
                                FROM State_Master 
                                WHERE countryID = '" + countryID + @"';

                    DataTable dataTableState = null;
                    dataTableState = objSqlDbComm.ExecuteDatasetQuery(strSQL).Tables[0];

                    var dictioneryState = new Dictionary<int, string>();
                    foreach(DataRow dr in dataTableStudy.Rows)
                    {
                        dictioneryState .Add(Convert.ToInt32(dr["State_ID"]), dr["State_Desc"].ToString());
                    }

                    ddlState.DataTextField = "Value";
                    ddlState.DataValueField = "Key";
                    ddlState.DataSource = dictioneryState;
                    ddlState.DataBind();
                    ddlState.Items.Insert(0, new ListItem("[Select]", "-1"));
                    ddlState.Items[0].Selected = true;          

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:15:20.937

为两个下拉列表启用 viewstate 为 true，如下所示：

```
 <asp:DropDownList ID="ddlState " runat="server" CssClass="csstextbox" Width="177px" EnableViewState=true>                                                     </asp:DropDownList> 
```

它可能会解决您的问题。

谢谢

# visual-studio-2010 - 如何更改“分配给”字段的格式

> ID：10614168
> 
> 赞同：1
> 
> 时间：2012-05-16T07:50:06.997
> 
> 标签：visual-studio-2010

我们已经使用 TFS 2010/VS 2010 对很长时间了。“分配给”字段的格式为：last_name first_name。前几天突然变成：first_name last_name。目前，当我想分配一个错误时，我必须输入确切的名字（因为有很多人共享相同的名字）和至少一个姓氏的字母。以前只有 2-3 次击键才能让我找到想要的人。

两个问题：

1.  有什么可以改变的？

2.  如何恢复旧格式？

在项目/团队成员下，人员以 first_name last_name 格式列出。不幸的是，我不记得更改之前的格式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:26:20.757

1.  分配给字段中的值是 Active Directory 中相应帐户的显示名称。因此，通常您的系统管理员会在 Active Directory 中进行一些更改。

2.  正如我所说，这不是 TFS 问题，而是 Active Directory 问题。

我不是 AD 方面的专家，但如果我没记错的话，当您更改区域设置或类似的设置时，名字/姓氏的顺序会改变。

# javascript - 我可以控制 xul javascript 文件中的功能吗？

> ID：10614169
> 
> 赞同：0
> 
> 时间：2012-05-16T07:50:12.830
> 
> 标签：javascript, dom, xul, xulrunner

我在 xul 文件中的 js 文件中有这个对象：

```
var show={
showIt:function(){
alert("simple function");
}

}; 
```

这是html文件：

```
 <html> 
<body> 
<div id="clickMe"></div> 
```

//此外，我在页面上还有脚本：

```
<script>
document.getElementById('clickMe').addEventListener('click',show.showIt,false);
</script>

</body>
</html> 
```

我试过这个东西，但是没有成功
，我可以做这个动作，以某种方式为我工作吗？

谢谢，

# iphone - 确定谁调用了委托方法

> ID：10614170
> 
> 赞同：1
> 
> 时间：2012-05-16T07:50:15.237
> 
> 标签：iphone, uiscrollview

在我的项目中，我有一些滚动视图和一个表格视图。我已经实现了委托方法`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`它被滚动视图和tableview调用，（因为tableview是滚动视图的子类）。我想知道该方法不是由表视图调用的。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T07:54:59.163

像这样的简单检查应该可以解决问题：

```
if ([scrollView isKindOfClass:[UITableView class]] == YES) {
    // table
}
else {
    // scroll view
} 
```

或为多个表格/滚动视图设置和比较标签

# excel - MSEXCEL 将数据转置为数据库格式

> ID：10614178
> 
> 赞同：2
> 
> 时间：2012-05-16T07:50:54.057
> 
> 标签：excel, vba

我正在将表格数据上传到我的 SQL 数据库中。

以下是数据的原始外观。

![在此处输入图像描述](../Images/1d8f0adfbf739fff814bfe3ce4e8ac21.png)

我想在一列中获取每个温度（Y 轴），然后在下一列中获取每个重力（X 轴），然后是相交值。

像这样：

![在此处输入图像描述](../Images/0af92909e08ac352d98a3f176de63a91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:35:59.443

我从 ExcelForum 的一个人那里得到了帮助。这是宏代码，它解决了我的问题。

```
 Option Explicit

    Sub transpose_data()
    Dim lrow As Long, lcol As Long, a As Long, i As Long, j As Long

    Worksheets.Add(after:=Worksheets(Worksheets.Count)).Name = "Output"
    a = 1
    With Worksheets("Original")
        lrow = .Range("A" & .Rows.Count).End(xlUp).Row
        lcol = .Range("IV1").End(xlToLeft).Column
        For i = 2 To lrow
            For j = 2 To lcol
                Worksheets("Output").Cells(a, 1).Value = .Cells(i, 1).Value
                Worksheets("Output").Cells(a, 2).Value = .Cells(1, j).Value
                Worksheets("Output").Cells(a, 3).Value = .Cells(i, j).Value
                a = a + 1
            Next j
        Next i
    End With

Worksheets("Output").Columns("A:C").NumberFormat = "0.00"

End Sub 
```

确保将工作表名称更改为“原始”以使此代码正常工作。

# java - 空参数检查、断言或异常有什么更好的？

> ID：10614181
> 
> 赞同：1
> 
> 时间：2012-05-16T07:50:59.620
> 
> 标签：java, null

有时我看到程序员使用“断言”，有时我看到对参数进行空检查并抛出异常。

最好的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:57:10.817

始终考虑到**“断言”并不总是启用**。这是您应该始终牢记在心的主要规则。将其视为一种机制来检测代码中的错误，不应该发生的意外情况（前置/后置条件）。另一方面，如果有机会从调用者那里获得空值，则抛出异常（即 IllegalArgumentException）。

例如：

*   如果您正在为第三方创建库，则无法使用 assert 验证参数。
*   在私有方法中，您可以使用 assert 来包含必须满足的前置/后置条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:52:24.717

这取决于你的使用情况，

如果你希望你的参数不*明确地*为空，那么你应该断言或抛出`IllegalArgusmentException`

另一方面，如果它没问题，`null`那么简单检查不为空并分配回退值并继续代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:14:00.573

我不知道我在哪里读到的，（也许有人会指出），但一般规则是这样的：

1) 对于接口使用 null 检查，因为接口必须处理所有参数，包括 null，但这并不禁止您另外抛出异常。

2) 在特殊情况下抛出异常，例如在不应将 null 作为参数的私有方法中。

3) 使用 assert 但不要过分依赖它，因为它可以被禁用，并且不包含在生成的字节码中。所以在开发时使用它，而不是在真实环境中使用。

# php - mysql中酒店的在线旅行社数据库设计（价格表）

> ID：10614186
> 
> 赞同：1
> 
> 时间：2012-05-16T07:51:16.500
> 
> 标签：php, mysql

我为一家拥有大约 150 家酒店的旅行社开发了一个使用 php 和 mysql 管理酒店价格、分配和预订的系统。由于酒店房价因日期而异，表设计大致如下

```
hotel_tbl{
 hotel_id,
 hotel_name
}    

room_type_tbl{
 room_type_id,
 room_type_name,
 hotel_id 
}

room_rates_tbl{
  room_type_id,
  **from_date,
  **till_date,
  meal_basis,//(Breakfast,halfboard,fullboard) BB,HB,FB
  sleeps,//(Single,Double,Triple) SGL,DBL,TPL
  currency,
  room_rate
} 
```

由于酒店价格随日期波动，当我查询表格以进行复杂的旅游套餐计算（涉及多家酒店）时，我注意到性能比预期的要慢。我的问题是，如果我在每个日期都有一个价格行而不是使用日期范围（我的系统包含大约 150 家酒店），您认为性能会提高吗，如下所示：

```
room_rates_tbl { // A row for each day as opposed to using a date range
  room_type_id,
  **date,
  meal_basis,//(Breakfast,halfboard,fullboard) BB,HB,FB
  sleeps,//(Single,Double,Triple) SGL,DBL,TPL
  currency,
  room_rate} 
```

希望问题足够清楚...

我已经更新了我的问题以使其更清楚。房间类型例如是“标准房”或“豪华房”或“家庭房”，睡眠将包含单人房、双人房等。我已从问题中删除了 market_type，因为它与市场组无关（例如国家）的费率是 targarted。我的问题是在查询费率表时，存储日期费率是否比使用日期范围更有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:24:11.483

Let's assume that your query is for a particular type of room for all hotels between two given dates. What do you need to get from the database? I would suggest:

1.  The rate for that type of room for all hotels on the start date
2.  The rate for that type of room for all hotels on the end date

You want avoid table scans, because these slow down your response to the user. So any lookup needs to use an index. Since the query is based on dates, the date field should be indexed. So if the user wants a room between 31/12/12 and 05/01/13, we can use range operators over the index as described in [http://dev.mysql.com/doc/refman/5.1/en/range-optimization.html#range-access-single-part](http://dev.mysql.com/doc/refman/5.1/en/range-optimization.html#range-access-single-part)). (If you store the date value as a timestamp value, you reduce the storage size of the values, which should improve the performance of the index.) If you use your original table schema, you'll need two indexes - one on start date and one on end date - but fewer rows in the table, compared with the amended table you suggest, which will need one index but more table rows (one for each day etc.) It's too variable to suggest which one will perform better.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:57:35.593

我认为将您的日期和费率分开到另一个表中会更好。

room_tbl - **room_id** , room_type_id, market_type_id & 任何房间信息

room_rate_tbl - **room_id**，from_date，till_date，货币，room_rate

这样您的房间信息是独立的，您可以轻松地将任何房价添加、编辑、删除到特定的 room_id。

# delphi - Delphi Chromium - 当用户单击网页中的按钮时，在 Delphi 应用程序中启动命令

> ID：10614187
> 
> 赞同：4
> 
> 时间：2012-05-16T07:51:18.140
> 
> 标签：delphi, button, hyperlink, tchromium

我在 Delphi 应用程序中使用 Chromium 组件。

我想要以下行为：

当用户单击网页中的特定按钮时，Delphi 应用程序（“容器”）必须执行命令（使用...启动外部可执行文件）。

是否可以 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:28:48.470

***更新：***

由于您实际上已经要求 DOM 事件侦听器用于单击事件，请检查以下示例侦听 Google 搜索按钮单击事件（具有 ID 的元素`gbqfba`）：

```
uses
  ShellAPI, cefvcl, ceflib;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Chromium1.Load('www.google.com');
end;

procedure OnClickEvent(const AEvent: ICefDomEvent);
begin
  ShellExecute(Form1.Handle, nil, 'notepad.exe', nil, nil, SW_SHOWNORMAL);
end;

procedure OnExploreDOM(const ADocument: ICefDomDocument);
var
  DOMNode: ICefDomNode;
begin
  DOMNode := ADocument.GetElementById('gbqfba');
  if Assigned(DOMNode) then
    DOMNode.AddEventListenerProc('click', True, OnClickEvent);
end;

procedure TForm1.Chromium1LoadEnd(Sender: TObject; const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer; out Result: Boolean);
begin
  if Assigned(frame) then
  begin
    // here you should check the frame.Url to verify if you're on the right URL
    // before you try to search for the element and attach the event if found
    frame.VisitDomProc(OnExploreDOM);
  end;
end; 
```

# objective-c - 转换后检查重叠视图

> ID：10614190
> 
> 赞同：4
> 
> 时间：2012-05-16T07:51:32.587
> 
> 标签：objective-c, ios, frame, cgrect

我`UIImageView's`在一个`UIView`. 这些`UIImageViews`都被改造了。

当手势应用于任何一个`UIImageView's`重叠的 imageView 时，应该以这样的方式移动，即移出`UIImageView's`框架，我们可以看到图像的完整视图（所有这些都将以动画方式完成）。

另请注意，图像将被转换，因此我将无法使用框架属性。

现在我正在使用`CGRectIntersectsRect`，但它没有给我想要的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:33:30.320

经过一番苦苦挣扎，我终于用这个算法达到了预期的效果。

*   我计算重叠列表`UIImageView's`并将其存储在一个数组中。我正在使用`CGRectIntersectsRect`这个。

    注意：这还将包括`UIImageView`应用手势的对象（比如目标 ImageView）。

*   对于每个重叠的 UIImageView，我执行以下步骤：

    1）计算重叠的ImageView与目标ImageView的夹角。这将为我提供移动重叠 ImageView 的方向。

    2) 现在将重叠的 ImageView 移动一些恒定的距离（比如 len），使其保持相同的角度。方向应使其远离目标 ImageView。

    3) 您可以使用 Sin/Cos 函数计算新的 x,y 坐标。

    x = start_x + len * cos(角度);
    y = start_y + len * sin(角度);

    注意：对于中心小于目标 ImageView 中心的 ImageView，您需要减去该值。

    4) 现在将重叠的 ImageView 移动到新的计算中心。

    5) 继续移动它，直到视图不再相交。

*   我附上我的代码。我希望它有所帮助。

    > -(void)moveImage:(UIImageView *)viewToMove fromView:(UIImageView *)imageToSendBack
    > {
    > 
    > ```
    >  CGFloat angle = angleBetweenLines(viewToMove.center, imageToSendBack.center);
    > 
    >         CGFloat extraSpace = 50;
    > 
    >         CGRect oldBounds = viewToMove.bounds;
    >         CGPoint oldCenter = viewToMove.center;
    > 
    >         CGPoint shiftedCenter;
    > 
    >         while(CGRectIntersectsRect(viewToMove.frame,imageToSendBack.frame))
    >         {
    >              CGPoint startPoint = viewToMove.center;
    > 
    >             shiftedCenter.x = startPoint.x - (extraSpace * cos(angle));
    > 
    >             if(imageToSendBack.center.y < viewToMove.center.y)
    >                 shiftedCenter.y = startPoint.y + extraSpace * sin(angle);
    >             else
    >                 shiftedCenter.y = startPoint.y - extraSpace * sin(angle);
    > 
    >             viewToMove.center = shiftedCenter;
    > 
    >         }
    >         viewToMove.bounds = oldBounds;
    >         viewToMove.center = oldCenter;
    > 
    >         [self moveImageAnimationBegin:viewToMove toNewCenter:shiftedCenter];
    >     } 
    > ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:13:22.453

我没有尝试过，但我会这样做：

从 CGRectIntersectsRect 获取 bool 后，将重叠的 UIImageView x 和 y 乘以它的宽度和高度。

并且由于您在更改转换后无法使用 frame 属性，因此您需要将宽度和高度乘以 1.5 以获得最大旋转量。

> 警告：如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

这可能会移动一些视图父亲而不是其他视图，但您会确定所有视图都将移到 UIImageView 的框架之外。

如果您尝试它但它不起作用，请发布一些代码，我会帮助您。

编辑：对于 x,y 小于 UIImageView 的 x,y 的视图，您需要减去偏移量。

# grails - 在 1.3.7 中无法将任何使用 @Transactional 注释的服务注入任何控制器

> ID：10614195
> 
> 赞同：3
> 
> 时间：2012-05-16T07:51:54.497
> 
> 标签：grails, transactions

我遇到了一个奇怪的问题，即 grails 将任何使用 @Transactional 注释的服务注入 1.3.7 中的任何控制器。

SyncSpInfoService：</p>

```
 package test
 import org.springframework.transaction.annotation.*

 class SyncSpInfoService {
    static transactional = false
            @Transactional
    def syncSpInfoData(def dataSource)throws RuntimeException{
              ...
            } 
```

控制器：

```
 package test
class SyncSpInfoController {
def syncSpInfoService
def dataSource
    def index = { 
    try{            
    syncSpInfoService.syncSpInfoData(dataSource)
    render  "Success"
    return
    }catch(RuntimeException e){
       e.printStackTrace()
       render "Error:"+e.getMessage()
       return
    }           
} 
```

}

运行控制器，如果SyncSpInfoService出错，我修改它，再次运行，出现如下错误：Error:test.SyncSpInfoService cannot be cast to test.SyncSpInfoService

我不知道为什么？请帮助我，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:21:25.430

尝试删除服务方法参数中的“def”：

```
 def syncSpInfoData(datasource) {} // and you don't need the throws 
```

# javascript - JavaScript 使用索引更新数组元素

> ID：10614212
> 
> 赞同：2
> 
> 时间：2012-05-16T07:53:04.357
> 
> 标签：javascript, jquery, node.js

我目前在 JavaScript 中有一个`arrayList()`调用，在其中我使用以下方法将数据导入它：`players``push``players.push({name: msg.name, map: msg.map, coords: msg.coords});`

这是一个示例数据：`{ name: 'weka', map: '5', coords: '12.4' }`例如`players[0]`.

这是我正在做的事情：

```
for (var i = 0; i < players.length; ++i) {
  if (msg.name === players[i].name) {
    console.log("Updating  index ("+i+") player: " + msg.name);
    //players[i].push({name: msg.name, map: msg.map, coords: msg.coords});
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:55:15.110

```
players[i].push({name: msg.name, map: msg.map, coords: msg.coords}); 
```

应该

```
players[i] = {name: msg.name, map: msg.map, coords: msg.coords}); 
```

你还没有定义`players[i]`为一个数组，所以没有什么可以“推动”的。而且我假设您希望更改现有值而不是插入额外的深度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:56:16.593

`players.push({name: msg.name, map: msg.map, coords: msg.coords});`没问题，

你所做的是`players[i].push({name: msg.name, map: msg.map, coords: msg.coords});`， `players[i]`不是一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:56:48.757

玩家[i] - 是对象（`{ name: 'weka', map: '5', coords: '12.4' } for example`），而不是数组如果你想设置设置道具，只需使用`palyers[i]['prop'] = 'prop';`

# serialization - 检测 boost::serialization 文件的魔法

> ID：10614215
> 
> 赞同：0
> 
> 时间：2012-05-16T07:53:12.207
> 
> 标签：serialization, boost

我需要检测特定文件是否是 boost::serialization 保存的二进制文件。查看一些文件，我看到它们的开头有 16 个字节：

```
0000000 0016 0000 0000 0000 6573 6972 6c61 7a69  | ........serializ
0000010 7461 6f69 3a6e 613a 6372 6968 6576 0009  | ation::archive.. 
```

这是检测此类档案的可靠顺序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:21:40.527

可靠的？可能是的，只要您继续使用相同的 boost::serialization 实现。也可能跨越图书馆的更新。但是参考文档没有提到对文件魔术的任何支持，所以正式地，检查文件头的效果是未定义的，并且可能会在未来的版本中默默地中断。如果您需要健壮，最好尝试反序列化并捕获失败时抛出的任何内容。因此，对于打印信息图标的快速文件浏览器，当然，继续使用标题检测。在用于归档备份的企业系统中，没有那么多。

# c++ - 包含具有 CString 成员变量的类的集合仅存储首字母

> ID：10614216
> 
> 赞同：-1
> 
> 时间：2012-05-16T07:53:15.623
> 
> 标签：c++, stl, mfc, cstring

我正在使用 MFC，并且我有这个课程：

```
class CUnit
{
private:
    CString name;
    CString init;
    CString chp;
    CString rhp;
    CString condition;
public:
    CUnit(void);
    ~CUnit(void);
    void setName( CString str );
    void setInit( CString str );
    void setCHP( CString str );
    void setRHP( CString str );
    void setCond( CString str );
    CString getName() const;
    CString getInit() const;
    CString getCHP() const;
    CString getRHP() const;
    CString getCond() const;    
    bool operator< ( CUnit ) const;
};

CUnit::CUnit(void)
{
}

CUnit::~CUnit(void)
{
}

bool CUnit::operator< ( CUnit unit ) const
{
    return !( this->init < unit.init );
}

void CUnit::setName( CString str )
    {
        name = str;
    }
void CUnit::setInit( CString str )
    {
        init = str;
    }
void CUnit::setCHP( CString str )
    {
        chp = str;
    }
void CUnit::setRHP( CString str )
    {
        rhp = str;
    }
void CUnit::setCond( CString str )
    {
        condition = str;
    }
CString CUnit::getName() const
{
    return name;
}
CString CUnit::getInit() const
{
    return init;
}
CString CUnit::getCHP() const
{
    return chp;
}
CString CUnit::getRHP() const
{
    return rhp;
}
CString CUnit::getCond() const
{
    return condition;
} 
```

我成功地从 Editboxes 中获取了值，但是当我将它们插入 a 时，`set<CUnit>`当我取回`CString`值时，我只得到第一个字母。我尝试了一个向量，但它都是一样的。
我像这样填充集合：

```
vector<CUnit> units;
CUnit unit;
CEdit *edit;
CString str;
edit = reinterpret_cast<CEdit *>(GetDlgItem(IDC_NAME1));
edit->GetWindowText(str);
unit.setName(str);
edit = reinterpret_cast<CEdit *>(GetDlgItem(IDC_INIT1));
edit->GetWindowText(str);
unit.setInit(str);
edit = reinterpret_cast<CEdit *>(GetDlgItem(IDC_CHP1);
edit->GetWindowText(str);
unit.setCHP(str);
edit = reinterpret_cast<CEdit *>(GetDlgItem(IDC_RHP1));
edit->GetWindowText(str);
unit.setRHP(str);
edit = reinterpret_cast<CEdit *>(GetDlgItem(IDC_COND1+i));
edit->GetWindowText(str);
unit.setCond(str);
units.push_back(unit); 
```

我用它来检查一切是否正常：

```
vector<CUnit>::iterator pos = units.begin();
str = *pos->getName();
SetDlgItemText(IDC_NAME2, str ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:52:47.867

你可以使用如下：

```
 str = *(pos->getName()); 
```

或者

```
 str = (*pos).getName(); 
```

希望能帮到你！

# html - 有没有办法选择第一个字符？:first-letter 似乎不起作用

> ID：10614219
> 
> 赞同：13
> 
> 时间：2012-05-16T07:53:42.650
> 
> 标签：html, css, css-selectors

示例问题：http: [//jsfiddle.net/6WYXk/](http://jsfiddle.net/6WYXk/)

我有一些html：`<p>% hello world</p>`

我想让 % 加粗。为此，我通常会用 CSS 编写：

```
p:first-letter
{
    font-weight: bold;
}​ 
```

但是，这会使 %*和*h 变粗。

理想情况下，我想要一个伪选择器`:first-character`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T08:02:15.923

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:16:40.013

# mingw - 构建无需额外的 MinGW 和 MSYS dll 即可运行的程序

> ID：10614221
> 
> 赞同：4
> 
> 时间：2012-05-16T07:53:53.847
> 
> 标签：mingw, msys

我在 Windows 7 上的 MinGW 和 MSYS 下使用 gfortran 构建了一些 fortran 程序。但是当我在未安装 MinGW 和 MSYS 的其他计算机上运行它们时，系统总是要求提供一些 dll，例如 libgfortran-3.dll 或 libgcc_s_dw2-1 .dll。

我想问是否有一种方法可以构建无需额外的 MinGW 和 MSYS dll 运行的程序。我听说 cygwin 用户有一个选项，名为“-mno-cygwin”，它使程序在没有 cygwin1.dll 的情况下运行。MinGW 和 MSYS 是否有类似的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:41:53.130

[**MinGW-w64 项目**](http://mingw-w64.sourceforge.net)将创建静态的32 位和 64 位应用程序。

也就是说，它们不需要外部 dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-23T19:27:50.417

[您可以通过Cygwin 安装](https://cygwin.com/)程序安装 MinGW-w64并使用`-static`命令行选项来避免对`libgfortran-3.dll`. 例如

```
i686-w64-mingw32-gfortran -o hello.exe -Wall -static hello.f 
```

# c# - 类库中的计时器对象？

> ID：10614224
> 
> 赞同：1
> 
> 时间：2012-05-16T07:54:38.460
> 
> 标签：c#, timer, class-library

我尝试使用以下代码在类库中运行计时器，但 timer_Elapsed 没有被触发。我也尝试使用 System.Windows.Forms 中的计时器，但没有奏效。

```
private static void SetTimer(DateTime dateTime)
{
    timer = new System.Timers.Timer();
    TimeSpan timeSpan = dateTime - DateTime.Now;
    timer.Interval = timeSpan.Milliseconds;
    timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    timer.Enabled = true;
    timer.Start();
}

private static void timer_Elapsed(object myobject, System.Timers.ElapsedEventArgs e) 
{ 
    timer.Enabled = false; 
    timer.Stop(); 
    Start(_appCastURL, _remindLaterAt, _remindLaterFormat); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:55:28.460

你将不得不这样`.Start()`做:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:58:34.203

基于表单的计时器不起作用，它需要运行活动的消息泵才能处理滴答事件。

[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)将按预期工作，但前提是您启用[`Start`](http://msdn.microsoft.com/en-us/library/system.timers.timer.start.aspx)它或启用它（通过`Enabled = true`）。请注意，默认情况下，该`Elapsed`事件将在任意`ThreadPool`线程上触发。您可以使用该[`SynchronizingObject`](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)属性来控制事件运行的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T05:34:46.767

从计时器声明中删除静态，从事件和 SetTimer 方法中删除静态，将其放在类库中扩展 Form 的类中，它就可以工作了。

```
private void SetTimer(DateTime remindLater)
{
    timer = new System.Timers.Timer();
    TimeSpan timeSpan = remindLater - DateTime.Now;
    timer.Interval = (int) timeSpan.TotalMilliseconds;
    timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    timer.Start();
}

private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    timer.Stop();
    AutoUpdater.Start(appCast, remindLaterAt, remindLaterFormat);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T07:56:47.480

尝试使用 System.Threading.Timer

# java - 如何访问数组中的字段，其中字段的名称存储在变量中？

> ID：10614225
> 
> 赞同：1
> 
> 时间：2012-05-16T07:54:38.917
> 
> 标签：java, arrays, variables

我有一个 Records[] 类型的数组，其中包含姓名、年龄和分数等字段。

我有一个方法需要访问这些字段之一，但我不知道是哪个。

例如，我想执行以下操作：

```
String fieldToUse = "name";
System.out.println(myRecords[0].fieldToUse); 
```

在这种情况下，我可以将 fieldToUse 切换到我想找到的任何字段。但是，这不起作用-我该怎么做？

提前致谢。

编辑： myRecords 属于 Records 类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:33:10.687

这可以使用反射来完成：

```
Field field = Record.class.getField(fieldToUse);
Object fieldValue = field.get(record); 
```

* * *

完整示例：

```
static class Record {
    public String name;
    public int age;

    public Record(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

public static void main(String[] args) throws Exception {
    Record[] records = new Record[2];
    records[0] = new Record("David", 29);
    records[1] = new Record("Andreas", 28);

    System.out.println("Davids name: " + getField("name", records[0]));
    System.out.println("Andreas age: " + getField("age", records[1]));
}

private static Object getField(String field, Record record) throws Exception {
    return record.getClass().getField(field).get(record);
} 
```

印刷：

```
Davids name: David
Andreas age: 28 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T07:58:49.617

我认为你需要做的事情对于 Java 是不可能的。

使用您的结构，您应该遍历`Records[]`并选择正确的结构。

您可以尝试使用`HashMap<String, Record>`where the `String`is `fieldToUse`。

这样你就可以使用类似的东西`hashmap.get(fieldToUse)`来获得正确的`Record`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:00:32.003

一种可能性是更改接口`Records`以具有`getProperty()`样式方法：

```
System.out.println(Records[0].getProperty(fieldToUse)); 
```

在内部，`Records`可以使用`Map`实现来存储值。假设`name`是 a `String`，`age`并且`score`是`Integer`s`Map`将是`Map<String, String>`，由属性名称键入。此外，`Records`可以为每个属性提供方法，以在其他地方使用返回适当的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T07:58:52.317

您可以制作 Record 类型的 Map 表示。以每个字段名作为键。

```
Record
 name: "YXZ"
 age: 12
 score: 657 
```

现在将其存储在一个数组中。

您现在可以访问

记录[0].get("名称");

就Java而言，这是我能想到的最好的。

# c# - 期望中的 Rhinomock 非原始对象

> ID：10614229
> 
> 赞同：2
> 
> 时间：2012-05-16T07:54:56.777
> 
> 标签：c#, unit-testing, mocking, rhino-mocks

看来评论不能支持代码

假设我调用了一个方法（例如 SaveTicket）并使用构造函数（例如 Repository、Logging）来注入各种模拟接口。如果该方法调用另一个对象并在该方法内创建一个非原始对象。有没有简单的方法来测试那个非原始对象的值？

我想尝试用属性替换那个非原始对象并注入是可能的，或者使用 LastCall.Constraints。有没有更好的办法？

这是一个示例 - 在下面的示例中 - 为了验证 Repository.save(t);

用正确的 t 值调用我可以

1.  做 lastcall.constraints

2.  lastcall.ignorarguments

有没有更好的办法？

```
CreateMyTicket(int ticketnumber, string name)
{
   ticketobject t = new ticketObject(ticketnumber, name);
   t.upgrade = ticketnumber+2;
   Repository.save(t);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:27:26.423

让我们举个例子。假设您有以下类，并且要对该`CreateMyTicket`方法进行单元测试：

```
public class ClassToTest
{
    public IRepository Repository { get; private set; }

    public ClassToTest(IRepository repository)
    {
        Repository = repository;
    }

    public void CreateMyTicket(int ticketnumber, string name)
    {
        var t = new TicketObject(ticketnumber, name);
        t.Upgrade = ticketnumber + 2;
        Repository.Save(t);
    }
} 
```

这假设我们有一个`IRepository`接口：

```
public interface IRepository
{
    void Save(TicketObject t);
} 
```

这是一个示例单元测试的样子：

```
[TestMethod]
public void CreateMyTicketTest() 
{
    // arrange
    var repositoryStub = MockRepository.GenerateStub<IRepository>();
    var sut = new ClassToTest(repositoryStub);
    var ticketNumber = 5;
    var name = "John";

    // act
    sut.CreateMyTicket(ticketNumber, name);

    // assert
    repositoryStub.AssertWasCalled(
        x => x.Save(
            Arg<TicketObject>.Matches(t => 
                t.Upgrade == 7 && 
                t.Name == name && 
                t.TicketNumber == ticketNumber
            )
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:02:10.833

您应该只测试在模拟依赖项（存储库、日志记录）上调用了哪些方法。验证从模拟返回的对象不会给您任何东西（因为您验证了刚刚手动创建的内容并设置为返回结果）。

# iphone - 使用 NSUserDefaults 保存按钮的状态

> ID：10614232
> 
> 赞同：-3
> 
> 时间：2012-05-16T07:55:09.290
> 
> 标签：iphone

我是 iphone 的新手。我正在做一个项目，因为我在中间被击中了。我的问题是我的应用程序中有一个按钮，当我们单击时，我放置了一个代码来更改按钮的标题，如下所示

```
- (IBAction)syncOffClickedInRegisterUserScreen:(id)sender {
     if ([syncOnorOff.titleLabel.text isEqualToString:@"Sync off"]) {
        [syncOnorOff setTitle:@"Sync on" forState:UIControlStateNormal];
    } 
    else{
        [syncOnorOff setTitle:@"Sync off" forState:UIControlStateNormal];
    }
  } 
```

它在这里正常工作是应用程序进入后台的代码

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSLog(@"1");
   registerUserScreen = [[RegisterUserScreen alloc]init];
    //if([[[registerUserScreen syncOnorOff]currentTitle]isEqualToString:@"Sync off"]){
    // NSLog(@"title is %@",[[registerUserScreen syncOnorOff]currentTitle]);
    NSTimeInterval interval = 1;
    NSDate *alertTime = [NSDate dateWithTimeIntervalSinceNow:interval];
    UIApplication *app = [UIApplication sharedApplication];
    UILocalNotification *notifyAlarm = [[UILocalNotification alloc]init];
    if(notifyAlarm){
        notifyAlarm.fireDate = alertTime;
        notifyAlarm.alertBody = @"Sync Events";
        notifyAlarm.alertAction = @"Sync";
        notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
        [app scheduleLocalNotification:notifyAlarm];
    }
 } 
```

我的问题是每当用户屏幕中的标题同步关闭并进入后台状态时，它将执行后台的数据，如果用户屏幕中标题同步打开的按钮进入后台状态，它不会执行后台的数据。怎么可能。如果有人知道，请帮助我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:03:03.463

我不太了解您的问题，但根据您的标题，以下是如何将按钮的标题保存到/从 NSUserDefaults 读取/读取的方法：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//read
[defaults stringForKey:@"buttontitle"];
//write
[defaults setValue:[[registerUserScreen syncOnorOff]currentTitle] forKey:@"buttontitle"]; 
```

# java - 在 JSF 中没有刷新

> ID：10614239
> 
> 赞同：2
> 
> 时间：2012-05-16T07:55:29.540
> 
> 标签：java, jsf

我想在 jsf Web 应用程序中显示一个图形图像，该图像来自一个每次运行都会发生变化的 xhtml 文件。上传完成后，我正在显示图像。但是在上传任何图像后，它总是显示我第一次上传的图像。在进行刷新时，它会显示最近上传的图像。为什么它总是显示我第一次尝试上传的图像。我怎样才能显示最近上传的图像`h:graphicImage`。我正在使用 servlet 来显示图像。谁能帮我吗...？？？

这是我显示图像的代码：

```
public void displayImage(byte[] image,HttpServletResponse response) { 
      ServletOutputStream out;
      if ( image != null ) {
      BufferedImage bufferedImage; 
           try {
                      bufferedImage = ImageIO.read(new ByteArrayInputStream(image)); 
                out = response.getOutputStream(); 
                ImageIO.write(bufferedImage, "png",out);
           } catch (IOException e) { 
                logger.info("Exception in reading the image" + e);
           }
      } else {     
           logger.info("No bytes present ");    
      } 
```

这是我的实际要求...在第一个窗口中，我有签名框。因为我有上传按钮。上传完成后，我将显示一个带有上传图像的窗口（2），我可以裁剪图像，以便我可以将其保存在第一个窗口的签名框中。它工作正常。但是当我取消/关闭第二个窗口时会发生什么是第一个签名框仍然是空的。所以用户可以上传一些其他的图像。在这种情况下，当我尝试上传图像时，它已成功上传，但未显示在第二个窗口中，它仍然显示我第一次尝试上传的图像。我如何解决它...？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:51:33.333

告诉浏览器不要缓存图像。在第一个位写入其主体之前，在 servlet 响应上设置以下标头：

```
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
response.setDateHeader("Expires", 0); // Proxies. 
```

为了防止顽固的浏览器仍然缓存它，请将带有时间戳的请求参数添加到 servlet URL。

```
<h:graphicImage value="imageServlet?id=#{bean.imageId}&amp;t=#{now.time}" /> 
```

注册`#{now}`地`faces-config.xml`如下：

```
<managed-bean>
    <managed-bean-name>now</managed-bean-name>
    <managed-bean-class>java.util.Date</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

# api - Tridion 2011 - Engine.GetObject 重载

> ID：10614241
> 
> 赞同：2
> 
> 时间：2012-05-16T07:55:35.840
> 
> 标签：api, tridion, tridion-2011

我发现旧的 VBScript API 和 .Net API 之间有以下区别：

在旧的 VBScript API 中，可以调用“TDSE.getObject”来检索通过 webdav 路径传递的 Tridion 对象、一个整数来选择如何打开它（只读、读取和写入等）以及发布位置的 ID有我们想要的蓝图的确切元素。

在新的 .Net API 中，我发现的只是“Engine.GetObject”，但它只接收 TCM ID 或元素的 webdav 路径。

我们的场景如下；在旧的 VBScript 代码中，getObject 方法的这种重载被用来避免在使用 TCM ID 而不是 webdav 路径时检测到的一些权限问题，并且因为当您需要在不同环境之间复制代码时，它会更加少见（参见 DEV，PREPROD和 PROD 例如），避免更改 TCM ID。

所以我的问题是：

1.  新的 .Net API 中是否存在和旧的一样的过载？
2.  如果没有，是否有办法通过 webdav 检索项目，记住其中一些可以本地化并从其父项更改？（旧方法适用于此，如果您发送根 webdav 路径，它将检索本地对象，即使它们的名称与父对象不完全相同）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:52:09.937

您是否希望能够使用顶级项目的 webdav url，并指定从中获取项目的发布 id？

我会在 Engine 上为您创建一个扩展方法：

```
public static T GetObject<T>(this Engine engine, string webDavUrl, int publicationId)
    where T : IdentifiableObject
{
    [logic to retreive the item and then if needed
     get the correct tcm uri and get the intended item]

    return item as T;
} 
```

然而，这是一个相当昂贵的操作，因为你得到了两个对象而不是一个。所以我不知道我是否会经常使用这种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T18:22:35.560

这里有一些样本

```
IdentifiableObject item = engine.GetObject(new TcmUri("tcm:5-677")); 
//will give you the latest approved version in the publication 5.

IdentifiableObject item = engine.GetObject(new TcmUri("tcm:5-677-v0")); 
//will give you the WF or Editable version.

TcmUri uri = new TcmUri("tcm:5-677");
uri.PublicationId = 6;
IdentifiableObject item = engine.GetObject(uri); 
//will give you the latest approved version in the publication 6. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T08:12:52.447

Engine.GetObject 有 4 个重载方法。

GetObject（会话，字符串）

获取对象（字符串）

获取对象（TcmUri）

获取对象（项目）

您可以查看 Tom.Net Api 了解更多详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T10:38:01.637

实际上，使用**`Engine.GetObject Method (String)`**应该可以。

```
public virtual IdentifiableObject GetObject(
    string itemUriOrWebDavUrl
) 
```

你可以用这种方式做一些事情： -

1.  根据 WebDav URL 获取 Object
2.  从此对象获取 TCM ID
3.  根据您的出版物，相应地修改您的 TCM ID 并做您的事情

或者

也尝试这种方式：-

```
Repository testRepository = (Repository)session.GetObject("tcm:0-2-1");
Component testComponent = (Component)testRepository.GetObject(webdavURL); //Assuming actual TCM ID is "tcm:1-3"
Console.WriteLine(testComponent.Id); // should show "tcm:2-3"
// Do Your Other Stuff 
```

# php - PHP 中的 WePay 支付网关集成

> ID：10614247
> 
> 赞同：0
> 
> 时间：2012-05-16T07:56:06.873
> 
> 标签：php, payment-gateway

我想为我的网站集成 WePay 支付网关。我已经从 www.wepay.com 下载了 SDK 并将其集成为 WePay 中提供的 API 教程，直到帐户创建和 API 调用完成，但卡在结帐页面。我的结帐页面变为空白，我无法找到实际问题是什么？

如果有人熟悉WePay支付网关，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:01:09.710

我建议您首先尝试获得一个体面的错误消息。[你可以在这里](https://www.wepay.com/developer/reference/errors)查看它们的含义。使用 Chrome 中的网络选项卡或 Firebug 等开发人员工具来查看请求是如何发送的以及发回的错误是什么。API 调用基于 HTTP 请求，因此易于监控。可能是用户不好，也可能是令牌或其他一百万件事。

# java - RequestParam 和会话 Spring MVC

> ID：10614252
> 
> 赞同：0
> 
> 时间：2012-05-16T07:56:35.393
> 
> 标签：java, spring, spring-mvc

我有一个问题我正在使用

```
 @RequestMapping(value = "/user", method = RequestMethod.GET)
  public String getUser(@RequestParam("id"), Model model){

  } 
```

这意味着当我给 url/user?id=1

这会给我一些数据。现在在登录时，我正在使用此 ID，并将其保存在会话中。

```
 session.setAttribute("userId", result.getBody().getId()); 
```

我希望当用户单击选项卡时自动将 id 与存储在会话中的属性绑定。即假设 userId 的值为 1。然后当我单击选项卡以自动重定向到：url/user?id=1 我该怎么做？

对于标签，我有这个：

```
<a href="<c:url value='/user'/>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:05:05.687

您可以使用：

```
<a href="<c:url value='/user?id=${userId}'/>"> ...</a> 
```

对于 SpringMVC，我建议你使用 Restful url like `/usr/1`，动作可以是

```
@RequestMapping(value = "/user/{id}")
public String show(@PathVariable Long id, Model model) {
  ...
}

//link
<a href="<c:url value='/user/${userId}'/>"> ...</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:06:00.757

就像@donnior asnwered`@RequestMapping(value = "/user/{id}")`是我遇到的最好的事情。它提供了一种非常干净和安全的方式来导航到 Spring 中的 url。

我建议你使用它。:)

# visual-studio - 未找到标识符 GetClientRect

> ID：10614255
> 
> 赞同：0
> 
> 时间：2012-05-16T07:56:38.227
> 
> 标签：visual-studio, winapi

我有一个小程序（在 Visual Studio 2010 Professional 中），尽管 GetClientRect 调用在代码编辑器中以红色下划线显示，但它可以在调试模式下编译和运行。尽管针对所有对 GetClientRect 的调用报告了错误消息“未找到标识符”，但该代码无法在发布模式下编译。

我可以使用以下命令在控制台程序中重现它，但我现在什至无法在调试模式下编译。有什么提示吗？

```
#include "stdafx.h"
#include <Windows.h>

int _tmain(int argc, _TCHAR* argv[])
{
   HWND hwnd = FindWindow(NULL, NULL);
   RECT r;
   GetClientRect(hwnd, &r);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-16T08:42:52.250

在控制台中调用 GetClientRect 没有任何意义，因为控制台应用程序没有 Window 对象。

# ruby-on-rails - 如何为循环包含来自不同模型的数据的变量提供条件

> ID：10614259
> 
> 赞同：0
> 
> 时间：2012-05-16T07:56:57.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的控制器索引操作中有以下四个变量，它们从不同的模型中检索数据，我将它们加入如下：

```
@forum = Forum.where(:user_id => @users.collect(&:user_id)).all
@poll=Poll.where(:created_by => @users.collect(&:user_id)).all
@article = Article.where(:user_id => @users.collect(&:user_id)).all
@jobpost = Jobplacement.where(:user_id => @users.collect(&:user_id)).all
@post =  @article + @jobpost + @forum + @poll 
```

**在视图中，我想遍历@post，所以我写了-@post.reverse.each do | 帖子| 但问题是这篇文章包含来自 4 个不同模型和论坛的数据，文章，jobpost 有 :user_id 列，而 poll 有 created_by 作为 user_id 字段的列名。因为这个 m 得到错误 undefined method `user_id' for #在以下几行中**

```
- if User.find(post.user_id).basic_info or User.find(post.created_by).basic_info
  - if User.find(post.user_id).basic_info.profilephoto?
    = image_tag User.find(post.user_id).basic_info.profilephoto.url(:thumb) 
```

**我怎样才能给出条件**

```
- if User.find(post.user_id).basic_info or User.find(post.created_by).basic_info 
```

或者

```
- if User.find(post.user_id or post.created_by).basic_info 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:04:28.070

这似乎是一件很麻烦的事情。

但这样的事情应该有效：

```
user_id = post.user_id || post.created_by
if User.find(user_id).basic_info 
```

但是，您真的不应该从您的视图中的循环中进行数据库调用。在控制器和模型中进行所有数据收集会更干净。

# vb.net - 如何将具有无限小节的xml解析为数据集

> ID：10614262
> 
> 赞同：0
> 
> 时间：2012-05-16T07:57:09.273
> 
> 标签：vb.net, dataset, xml-parsing

我有不寻常的 XML 格式，如下例所示

```
<mainmenu>
    <menu caption="File">
        <menuitem caption="New" tooltip="Create New File" shortcut="Ctrl-N" Action="New">
        <menuitem caption="Open" tooltip="Open Existing File" shortcut="Ctrl-O" Action="Open">
        <menu caption="Import">
            <menuitem caption="As New File" tooltip="Import To New Sheet" shortcut="F11" Action="ImportNew">
            <menuitem caption="As Current File" tooltip="Import To Current Active Sheet" shortcut="F12" Action="ImportOpen">
        </menu>
        <menuitem caption="Exit" tooltip="Exit Program" shortcut="Ctrl-Q" Action="Exit">
    </menu>
    <menu caption="Edit">
        <menuitem caption="Cut" tooltip="" shortcut="Ctrl-C" Action="Cut">
        <menuitem caption="Copy" tooltip="" shortcut="Ctrl-X" Action="Copy">
        <menuitem caption="Paste" tooltip="" shortcut="Ctrl-V" Action="Paste">
    </menu>
</mainmenu> 
```

我需要将上面的 XML 解析为带有数据集的表格数据视图，然后可以从函数中检索，例如：

```
getData("Edit")

result:

caption tooltip shortcut action
cut     ...
copy    ...
paste   ... 
```

另一个例子

```
getData("File.Import")

result:

caption         tooltip shortcut action
as new file     ...
as current file ... 
```

那么，解析 XML 的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:29:45.087

Linq to Xml 将是一个很好的方法。您可以根据条件选择*菜单元素，然后根据**menuitem*元素的属性选择您需要的任何数据类型的集合。我在下面写了一个示例，它实现了简单的示例*getData("Edit")并使用子菜单项（在您的示例中为**Cut*、*Copy*、*Paste* ）填充 DataTable 。

```
Dim xdoc As XDocument
Dim filename As string    // TODO set XML filename
Dim name As String
Dim dt as DataTable
xdoc = XDocument.Load(filename)
name = "Edit"
dt = New DataTable()

xdoc.Root.Elements().Where(Function(s) s.Attribute("caption") = name).Elements("menuitem").ToList(). _
    ForEach(dt.Rows.Add(x.Attribute("caption"), x.Attribute("tooltip"), x.Attribute("shortcut"), x.Attribute("action"))) 
```

应该可以根据需要扩展这种方法以选择基于“File.Import”等的嵌套菜单项。

# python - 如何多次测试和记录 -nosetest unittest - python

> ID：10614267
> 
> 赞同：0
> 
> 时间：2012-05-16T07:57:50.057
> 
> 标签：python, unit-testing, for-loop, nosetests

这是问题的迷你版

```
a = [[1,2,3][0,0,0]]
b = [[1,0,1][0,0,0]]
c = [[0,0,0][1,0,1]] 
```

因此，如果级别 1 是 [] 而级别 2 是 [[]]，那么我要做的是测试曾经的列表以查看级别 2 是否匹配（无论顺序如何），所以在这种情况下 b，c 是等价的。

我正在使用单元测试和鼻子测试来运行它们如果我只想针对另一个表测试一个表，我会执行以下操作：

函数 truth() 创建我的表

```
def test_table1_table2(self):
    for row in truth(1,3):
        self.assertIn(row,truth(2,4)) 
```

但我的目标是针对我创建的所有其他表（大约 20 个并且还在增长）测试所有表。一些我无法解决的问题（我不确定我是否需要阅读单元测试文档或鼻子测试，或者甚至不需要它们！）

我的猜测是只使用更多的 for 循环来消除任何可能性。但是使用

```
>>> nosetest 
```

与

```
assertIn 
```

只是在第一个错误处停止，这不是我想要的。我需要扫描并收集有关哪些列表等效的信息（无论顺序或嵌套列表）。也许我应该创建一些东西而忘记单元测试？

所以我的首选输出类似于

```
table1 and table2 are not equivalent 
table1 and table2 are not equivalent 
```

或者可能更有用和更短只是

```
table1 and table10 are equivalent 
```

这是我目前拥有的代码，几乎所有内容都只是一个整数，期望真值（）生成真值表（嵌套列表）：

```
114     def test_all(self):$                                                  |~                      
115         ''' will test all tables'''$                                      |~                      
116         for expression in range(self.count_expressions()):$               |~                      
117             num_var = count_vars(exp_choose(expression))$                 |~                      
118             for row in truth(expression, num_var):$                       |~                      
119                 for expression2 in range(self.count_expressions()):$      |~                      
120                     num_var2 = count_vars(exp_choose(expression2))$       |~                      
121                     for row2 in truth(expression2, num_var2):$            |~                      
122                         self.assertIn(row, truth(expression2,num_var2)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:43:40.623

尝试这种方法：在测试方法之外运行外部循环，而不是在测试方法中运行循环。内部代码应该向测试类添加新的测试方法。

请参见此处的示例：[如何在 python 中生成动态（参数化）单元测试？](https://stackoverflow.com/questions/32899/how-to-generate-dynamic-unit-tests-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:54:05.253

更新为更短的解决方案：

```
def match(a,b):
  aSets = map(set, a)
  bSets = map(set, b)
  return ((aSets[0] == bSets[0]) and (aSets[1] == bSets[1])) \
      or ((aSets[0] == bSets[1]) and (aSets[1] == bSets[0]))

tables = {}
tables['a'] = [[1,2,3],[0,0,0]]
tables['b'] = [[1,0,1],[0,0,0]]
tables['c'] = [[0,0,0],[1,0,1]]
tables['d'] = [[0,0,0],[1,1,0]]

for key1, value1 in tables.items():
  for key2, value2 in tables.items():
    result = 'equivalent' if match(value1,value2) else 'not eqivalent'
    print '%s and %s are %s' % (key1, key2, result) 
```

`map`可以说，这可以使用像and这样的函数更优雅地完成，`zip`但重点是将代码分解成更小的片段并减少循环的深度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:54:17.147

一种更简单的方法是使用 unittest 的[assertItemsEqual](http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertItemsEqual)，它正是为此目的而设计的。给定 OP'sa, b, & c 嵌套列表：

```
class CheckingEqualityIgnoreOrder(unittest.TestCase):
    def testAB(self):
        self.assertItemsEqual(a, b)
        #fails

    def testBC(self):
        self.assertItemsEqual(b, c)
        #passes

    def testAC(self):
        self.assertItemsEqual(a, c)
        #fails 
```

# javascript - 将数据从 json 文件插入到 sqlite

> ID：10614269
> 
> 赞同：0
> 
> 时间：2012-05-16T07:57:57.540
> 
> 标签：javascript, json, sqlite

这里有什么问题，我无法插入：

```
 $.getJSON('file.json', function(data) {   

 tx.executeSql("INSERT INTO table (DATE, LIB, BID)  VALUES("+data.date+","+data.Lib+","+data.BID+")");

      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:59:42.440

如果它们是字符串类型，则需要引用要插入的数据。

```
"INSERT INTO table (DATE, LIB, BID)  VALUES('"+data.date+"','"+data.Lib+"','"+data.BID+"')" 
```

下面更好。

```
tx.executeSql("INSERT INTO table (DATE, LIB, BID)  VALUES(?,?,?)", [data.date, data.Lib, data.BID])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:35:50.143

我尝试了这段代码，但它没有在函数（数据）中执行查询

在函数之前和之后保留查询并且它有效

所以必须将数据传递给另一个函数来执行查询

# twitter - 更改 Twitter 应用程序 OAuth 访问级别并重新授权用户

> ID：10614272
> 
> 赞同：1
> 
> 时间：2012-05-16T07:58:15.713
> 
> 标签：twitter, oauth

如果用户对应用程序的现有授权与所需的访问级别不匹配，Twitter API 似乎不会通过授权过程自动将 OAuth 身份验证请求路由回。例如，假设一个应用程序已从“读、写”更改为“读、写、直接消息”，但用户仅对“读、写”进行了身份验证。

您是否只需清除数据库中所有现有的 oauth 令牌，从而要求所有用户重新授权应用程序 - 还是有办法检查 oauth 记录是否符合所需的访问级别，如果不匹配，则路由用户通过授权过程返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:42:58.807

Twitter 开发者论坛上的一个帖子[https://dev.twitter.com/discussions/1253](https://dev.twitter.com/discussions/1253)建议必须使用 /authorize URL（导致授权过程）来授权第一个读、写、DM 权限时间（覆盖任何以前的权限级别）。一旦应用程序被授权，从那时起就可以使用 /authenticate 方法——尽管我还没有找到任何关于如何确定用户在重定向到 /authorize 或 /authenticate 之前是否已经授权应用程序的任何信息。

# sql - 描述 Oracle 模式

> ID：10614274
> 
> 赞同：0
> 
> 时间：2012-05-16T07:58:37.197
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有一个巨大的 Oracle 数据库，其中包含多个模式。

我想用该模式中的所有表和这些表的结构（即列名、数据类型）来描述整个模式（一次一个模式）。

我如何使用 SqlDeveloper 完成这项任务？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:14:38.173

使用 Oracle 的观点：

all_tables, all_tab_columns

# objective-c - 克隆或复制 UIViewController 或 UIView

> ID：10614276
> 
> 赞同：15
> 
> 时间：2012-05-16T07:58:47.897
> 
> 标签：objective-c, uiview, uiviewcontroller, copy, clone

UII 需要副本、自我控制器或 self.view，我尝试过：

```
UIView* viewOfSelf =[self.view copy];
UIViewController* controller = [self copy];

UIView* viewOfSelf =[self.view mutableCopy];
UIViewController* controller = [self mutableCopy]; 
```

错误是：

```
 -[UIViewController mutableCopyWithZone:]: unrecognized selector sent to instance 0xb803490
    -[UIView copyWithZone:]: unrecognized selector sent to instance 0x6e0acb0 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-16T08:13:01.287

采用 -

```
NSData *tempArchiveView = [NSKeyedArchiver archivedDataWithRootObject:self.view];
UIView *viewOfSelf = [NSKeyedUnarchiver unarchiveObjectWithData:tempArchiveView]; 
```

相似地 -

```
NSData *tempArchiveViewController = [NSKeyedArchiver archivedDataWithRootObject:self];
UIViewController *controller = [NSKeyedUnarchiver unarchiveObjectWithData:tempArchiveViewController]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T08:04:07.230

对于可复制的对象，它必须实现类或类不实现的`NSCopying`协议。`UIView``UIViewController`

如果你想复制一个视图，我很确定你做错了什么。复制应该`UIView`像`UITableView`using`dequeueReusableCellWithIdentifier:`方法一样替换为可重用。

复制视图控制器绝对是一种反模式。如果您想要您已经拥有的视图控制器的精确副本 - 使用与当前参数相同的参数创建它的新实例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-01T10:05:23.440

不幸的是，我还不能发表评论，但是 rishi 的解决方案有一个问题：它不复制`NSLayoutConstraint`s. 因此，如果您的任何视图使用自动布局，则不会被复制。我正在编写一个 mini-lib 来解决这个问题，并在完成后将其发布到 github。不幸的是，我在任何地方都没有找到现成的解决方案。

//编辑

对不起，我之前写的不完全正确。我做了更多的研究，结果发现默认情况下，`NSLayoutConstraint`存档视图中的 s 没有保存。`shouldBeArchived`但是，您实际上可以通过将其属性设置为来指定是否要归档约束`YES`。然后，即使在这个 fake 之后`copy`，您仍会在复制的视图中保留正确的约束。

# r - 将字符串列表分成多个分区

> ID：10614280
> 
> 赞同：5
> 
> 时间：2012-05-16T07:59:01.253
> 
> 标签：r, subset, plyr, data.table

这是我的问题。我有一个包含 200k 行的数据集。

*   每行对应于对一个主题进行的测试。
*   受试者的测试次数不等。
*   每个测试都有日期。

我想为每个测试分配一个索引。例如，主题 1 的第一次测试将是 1，主题 1 的第二次测试将是 2。主题 2 的第一次测试将是 1，依此类推。

我的策略是获取唯一主题 ID 的列表，使用 lapply 将数据集子集到使用唯一主题 ID 的数据框列表中，每个主题都有他/她自己的数据框并进行测试。理想情况下，我将能够对每个主题的每个数据框进行排序并为每个测试分配一个索引。

但是，在 200k x 32 数据帧上执行此操作会使我的笔记本电脑（i5、Sandy Bridge、4GB 内存）很快耗尽内存。

我有两个问题：

1.  有一个更好的方法吗？
2.  如果没有，我克服内存限制的唯一选择是将我唯一的 SubjectID 列表分解为更小的集合，例如每个列表 1000 个 SubjectID，将其应用到数据集中，最后将列表连接在一起。然后，我如何通过提供一个表示分区数的整数来创建一个函数来破坏我的 SubjectID 列表。例如 BreakPartition(Dataset, 5) 将数据集平均分成 5 个分区。

这是生成一些虚拟数据的代码：

```
UniqueSubjectID <- sapply(1:500, function(i) paste(letters[sample(1:26, 5, replace = TRUE)], collapse =""))
UniqueSubjectID <- subset(UniqueSubjectID, !duplicated(UniqueSubjectID))
Dataset <- data.frame(SubID = sample(sapply(1:500, function(i) paste(letters[sample(1:26, 5, replace = TRUE)], collapse ="")),5000, replace = TRUE))
Dates <- sample(c(dates = format(seq(ISOdate(2010,1,1), by='day', length=365), format='%d.%m.%Y')), 5000, replace = TRUE)
Dataset <- cbind(Dataset, Dates) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:41:30.563

我猜想分裂/lapply 是什么耗尽了内存。您应该考虑一种更加矢量化的方法。从示例代码的略微修改版本开始：

```
n <- 200000
UniqueSubjectID <- replicate(500, paste(letters[sample(26, 5, replace=TRUE)], collapse =""))
UniqueSubjectID <- unique(UniqueSubjectID)
Dataset <- data.frame(SubID = sample(UniqueSubjectID , n, replace = TRUE))
Dataset$Dates <- sample(c(dates = format(seq(ISOdate(2010,1,1), by='day', length=365), format='%d.%m.%Y')), n, replace = TRUE) 
```

并假设您想要的是按主题按日期顺序计算测试的索引，您可以执行以下操作。

```
Dataset <- Dataset[order(Dataset$SubID, Dataset$Dates), ]
ids.rle <- rle(as.character(Dataset$SubID))
Dataset$SubIndex <- unlist(sapply(ids.rle$lengths, function(n) 1:n)) 
```

现在“数据集”中的“子索引”列包含测试的按主题编号索引。这需要非常少的内存，并在我的 4GB Core 2 duo 笔记本电脑上运行几秒钟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T08:39:00.517

这听起来像是`plyr`包裹的工作。我会以这种方式添加索引：

```
require(plyr)
system.time(new_dat <- ddply(Dataset, .(SubID), function(dum) {
    dum = dum[order(dum$SubID, dum$Dates), ]
    mutate(dum, index = 1:nrow(dum))
  })) 
```

这将数据集分成每个块`SubID`，并添加一个索引。新对象已将所有对象`SubID`组合在一起，并按时间排序。您的示例在我的机器上花费了大约 2 秒，并且几乎没有使用内存。我不确定如何`ddply`扩展到您的数据大小和特征，但您可以尝试。我这不够快，一定要看看`data.table`包装。我的一篇[博文](http://www.numbertheory.nl/2011/10/28/comparison-of-ave-ddply-and-data-table/)比较（除其他外）`ddply`并`data.table`可以作为一些灵感。

# c# - Windows 窗体 C# 中的值不能为空异常

> ID：10614282
> 
> 赞同：3
> 
> 时间：2012-05-16T07:59:09.630
> 
> 标签：c#, .net, winforms, visual-studio-2010

我正在使用 Windows 窗体来创建员工卡布局。除此之外，我还添加了一个名为“打印”的按钮，它将打印面板内容。当我运行代码时，表单加载时显示错误： ![表格错误](../Images/8c30db70e980ae30c0476ddc85999ee1.png)

这是我的代码：

```
namespace SimpleReport
{
public partial class EmployeeCardForm : Form
{
    //Declare following Object Variables
    PrintDocument printdoc1 = new PrintDocument();
    PrintPreviewDialog previewdlg = new PrintPreviewDialog();
    Panel pannel = null;

    public EmployeeCardForm()
    {
        InitializeComponent();
        //declare event handler for printing in constructor
        printdoc1.PrintPage += new PrintPageEventHandler(printdoc1_PrintPage);
    }

    Bitmap MemoryImage;
    public void GetPrintArea(Panel pnl)
    {
        MemoryImage = new Bitmap(pnl.Width, pnl.Height);
        Rectangle rect = new Rectangle(0, 0, pnl.Width, pnl.Height);
        pnl.DrawToBitmap(MemoryImage, new Rectangle(0, 0, pnl.Width, pnl.Height));
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawImage(MemoryImage, 0, 0);
        base.OnPaint(e);
    }
    void printdoc1_PrintPage(object sender, PrintPageEventArgs e)
    {
        Rectangle pagearea = e.PageBounds;
        e.Graphics.DrawImage(MemoryImage, (pagearea.Width / 2) - (this.panel1.Width / 2), this.panel1.Location.Y);
    }

    public void Print(Panel pnl)
    {
        pannel = pnl;
        GetPrintArea(pnl);
        previewdlg.Document = printdoc1;
        previewdlg.ShowDialog();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Print(this.panel1);
    }
  }
} 
```

当我调试代码时，我知道它在 OnPaint 事件的第一行崩溃了。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:02:12.403

`MemoryImage``GetPrintArea()`在被调用之前为 null 。

试试这个：

```
protected override void OnPaint(PaintEventArgs e)
{
    if (MemoryImage != null)
    {
        e.Graphics.DrawImage(MemoryImage, 0, 0);
    }
    base.OnPaint(e);
} 
```

只有当它为空时你不想绘制它。因为它最初为 null，然后您将其设置为`GetPrintArea()`. 根据您的情况，您可以调用 GetPrintArea() 而不是 null 检查，或者您可以立即初始化 MemoryImage，这完全取决于您希望它如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:01:17.370

你永远不会设置你的 MemoryImage。在您的 printpage 事件中，在调用 DrawImage 之前添加 GetPrintArea(pnl)

# c# - 如何通过串口 RS-232 或 USB 转换器将体重秤的重量显示到文本框中？

> ID：10614286
> 
> 赞同：6
> 
> 时间：2012-05-16T07:59:28.837
> 
> 标签：c#, usb, serial-port

我被分配使用 C# 将体重从称重秤 (CAS CI-201A) 显示到文本框中。重量将通过串口 RS-232 或 USB 转换器发送。秤在我身边，但我不知道从哪里开始。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T08:27:18.063

你有没有尝试过什么？

如果您想使用串行端口，首先让用户选择使用哪个端口是有意义的。这可以通过使用所有可用端口填充组合框来轻松完成。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        string[] portNames = SerialPort.GetPortNames();
        foreach (var portName in portNames)
        {
            comboBox1.Items.Add(portName);
        }
        comboBox1.SelectedIndex = 0;
    } 
```

此代码使用一个带有组合框的表单，称为“comboBox1”（默认）。您将需要添加：

```
using System.IO.Ports; 
```

到 using 指令。

然后在表单中添加一个按钮 (button1) 和一个多行文本框 (textbox1) 并添加以下代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        _serialPort = new SerialPort(comboBox1.Text, BaudRate, Parity.None, 8, StopBits.One);
        _serialPort.DataReceived += SerialPortOnDataReceived;
        _serialPort.Open();
        textBox1.Text = "Listening on " + comboBox1.Text + "...";
    }

    private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
    {
        while(_serialPort.BytesToRead >0)
        {
            textBox1.Text += string.Format("{0:X2} ", _serialPort.ReadByte());
        }
    } 
```

这还需要您添加：

```
 private SerialPort _serialPort;
    private const int BaudRate = 9600; 
```

正下方的左括号

```
public partial class Form1 : Form 
```

单击按钮后，从选定的 comPort 接收到的所有数据将在 TextBox 中显示为十六进制值。

免责声明：上述代码不包含错误处理，如果多次单击 button1 将产生错误，因为之前的“SerialPort”实例未正确关闭。使用此示例时请记住这一点。

问候尼科

完整代码：

```
using System;
using System.IO.Ports;          //<-- necessary to use "SerialPort"
using System.Windows.Forms;

namespace ComPortTests
{
    public partial class Form1 : Form
    {
        private SerialPort _serialPort;         //<-- declares a SerialPort Variable to be used throughout the form
        private const int BaudRate = 9600;      //<-- BaudRate Constant. 9600 seems to be the scale-units default value
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string[] portNames = SerialPort.GetPortNames();     //<-- Reads all available comPorts
            foreach (var portName in portNames)
            {
                comboBox1.Items.Add(portName);                  //<-- Adds Ports to combobox
            }
            comboBox1.SelectedIndex = 0;                        //<-- Selects first entry (convenience purposes)
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //<-- This block ensures that no exceptions happen
            if(_serialPort != null && _serialPort.IsOpen)
                _serialPort.Close();
            if (_serialPort != null)
                _serialPort.Dispose();
            //<-- End of Block

            _serialPort = new SerialPort(comboBox1.Text, BaudRate, Parity.None, 8, StopBits.One);       //<-- Creates new SerialPort using the name selected in the combobox
            _serialPort.DataReceived += SerialPortOnDataReceived;       //<-- this event happens everytime when new data is received by the ComPort
            _serialPort.Open();     //<-- make the comport listen
            textBox1.Text = "Listening on " + _serialPort.PortName + "...\r\n";
        }

        private delegate void Closure();
        private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
        {
            if (InvokeRequired)     //<-- Makes sure the function is invoked to work properly in the UI-Thread
                BeginInvoke(new Closure(() => { SerialPortOnDataReceived(sender, serialDataReceivedEventArgs); }));     //<-- Function invokes itself
            else
            {
                while (_serialPort.BytesToRead > 0) //<-- repeats until the In-Buffer is empty
                {
                    textBox1.Text += string.Format("{0:X2} ", _serialPort.ReadByte());
                        //<-- bytewise adds inbuffer to textbox
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T16:52:59.913

基于此：

> 监听 COM1... 30 30 33 33 20 49 44 5F 30 30 3A 20 20 20 31 30 2E 36 20 6B 67 20 0D 0A 0D 0A

作为这个的ASCII：

> 0033 ID_00：10.6 公斤

您可以通过修剪接收到的字符串来获得结果。假设您的侦听器将字节放入数组中`byte[] serialReceived`：

```
string reading = System.Text.Encoding.UTF8.GetString(serialReceived);
textBox1.Text = reading.Substring(13); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-16T08:11:38.287

首先，在您开始编写任何代码之前，我会检查您是否使用了正确的电缆。尝试打开您选择的串行终端（HyperTerm、putty）并检查是否有任何数据。

确保在体重秤和终端程序上配置相同的波特率、停止位和奇偶校验。

如果您收到数据（终端程序至少应该显示一些垃圾），那么您可以继续编码。如果没有，请检查您是否使用了正确的电缆（nullmodem aka cross-over）。

当你走到这一步时，你可以使用`SerialPort`C# 的类 [http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-30T11:52:32.280

根据亚当的建议，我将输出转换为人类可读的格式（从 ASCII 到 UTF8）我将字节放入数组 byte[]

```
private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
        {
            if (InvokeRequired)     //<-- Makes sure the function is invoked to work properly in the UI-Thread
                BeginInvoke(new Closure(() => { SerialPortOnDataReceived(sender, serialDataReceivedEventArgs); }));     //<-- Function invokes itself
            else
            {
                int dataLength = _serialPort.BytesToRead;
                byte[] data = new byte[dataLength];
                int nbrDataRead = _serialPort.Read(data, 0, dataLength);
                if (nbrDataRead == 0)
                    return;
                string str = System.Text.Encoding.UTF8.GetString(data);
                textBox1.Text = str.ToString();
            }
        } 
```

这是完整的工作代码

```
using System;
using System.IO.Ports;          //<-- necessary to use "SerialPort"
using System.Windows.Forms;

namespace ComPortTests
{
    public partial class Form1 : Form
    {
        private SerialPort _serialPort;         //<-- declares a SerialPort Variable to be used throughout the form
        private const int BaudRate = 9600;      //<-- BaudRate Constant. 9600 seems to be the scale-units default value
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string[] portNames = SerialPort.GetPortNames();     //<-- Reads all available comPorts
            foreach (var portName in portNames)
            {
                comboBox1.Items.Add(portName);                  //<-- Adds Ports to combobox
            }
            comboBox1.SelectedIndex = 0;                        //<-- Selects first entry (convenience purposes)
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //<-- This block ensures that no exceptions happen
            if(_serialPort != null && _serialPort.IsOpen)
                _serialPort.Close();
            if (_serialPort != null)
                _serialPort.Dispose();
            //<-- End of Block

            _serialPort = new SerialPort(comboBox1.Text, BaudRate, Parity.None, 8, StopBits.One);       //<-- Creates new SerialPort using the name selected in the combobox
            _serialPort.DataReceived += SerialPortOnDataReceived;       //<-- this event happens everytime when new data is received by the ComPort
            _serialPort.Open();     //<-- make the comport listen
            textBox1.Text = "Listening on " + _serialPort.PortName + "...\r\n";
        }

        private delegate void Closure();
        private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
        {
            if (InvokeRequired)     //<-- Makes sure the function is invoked to work properly in the UI-Thread
                BeginInvoke(new Closure(() => { SerialPortOnDataReceived(sender, serialDataReceivedEventArgs); }));     //<-- Function invokes itself
            else
            {
                int dataLength = _serialPort.BytesToRead;
                byte[] data = new byte[dataLength];
                int nbrDataRead = _serialPort.Read(data, 0, dataLength);
                if (nbrDataRead == 0)
                    return;
                string str = System.Text.Encoding.UTF8.GetString(data);
                textBox1.Text = str.ToString();
            }
        }
} 
```

如果您使用的是 A&D EK V 校准型号：和 EK-610V。你已经使用 BaudRate = 2400; 和数据位 = 7

注意：如果你得到这样的输出 [![在此处输入图像描述](../Images/4175f19962b33a0309826f670a8faa6b.png)](https://i.stack.imgur.com/7CiFU.png)

您必须检查 BaudRate、DataBits（请参阅您的称重机手册）或检查您的电缆

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-23T15:23:28.933

我使用的是 Anto sujesh 的代码，但我遇到的问题是我从秤中获得的一些值已损坏。我通过缓冲缓存文件中的值来解决它。

```
 private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
    {

        if (InvokeRequired)     //<-- Makes sure the function is invoked to work properly in the UI-Thread
            BeginInvoke(new Closure(() => { SerialPortOnDataReceived(sender, serialDataReceivedEventArgs); }));     //<-- Function invokes itself
        else
        {
            int dataLength = _serialPort.BytesToRead;                

            byte[] data = new byte[dataLength];
            int nbrDataRead = _serialPort.Read(data, 0, dataLength);
            if (nbrDataRead == 0)
                return;
            string str = Encoding.UTF8.GetString(data);

            //Buffers values in a file
            File.AppendAllText("buffer1", str);

            //Read from buffer and write into "strnew" String
            string strnew = File.ReadLines("buffer1").Last();

            //Shows actual true value coming from scale
            textBox5.Text = strnew; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T05:18:45.890

```
 using System;
    using System.IO.Ports;         
    using System.Windows.Forms;
    namespace ComPortTests
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }
                private SerialPort _serialPort = null;
    private void Form1_Load(object sender, EventArgs e)
    {
     _serialPort = new SerialPort("COM1", 9600, Parity.None, 8);

     _serialPort.DataReceived += new SerialDataReceivedEventHandler(_serialPort_DataReceived);

     _serialPort.Open();
    }

    void _serialPort_DataReceived(object sender, SerialDataReceivedEventArgs e)

            {

                string data = _serialPort.ReadExisting();
                textBox2.Text = data;    
            }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-31T17:02:52.217

我正在使用 连接到我的串口**的yaohua xk3190-a9体重秤。**在尝试了很多代码之后，下面的代码终于为我工作了。我在这里粘贴代码，以便如果有人使用相同的设备可以获得帮助。

```
 private SerialPort _serialPort;
    private const int BaudRate = 2400;
    private void Form1_Load(object sender, EventArgs e)
    {
        string[] portNames = SerialPort.GetPortNames();
        foreach (var portName in portNames)
        {
            comboBox1.Items.Add(portName);
        }
        comboBox1.SelectedIndex = 0;
        //<-- This block ensures that no exceptions happen
        if (_serialPort != null && _serialPort.IsOpen)
            _serialPort.Close();
        if (_serialPort != null)
            _serialPort.Dispose();
        //<-- End of Block

        _serialPort = new SerialPort(comboBox1.Text, BaudRate, Parity.None, 7, StopBits.One);       //<-- Creates new SerialPort using the name selected in the combobox
        _serialPort.DataReceived += SerialPortOnDataReceived;       //<-- this event happens everytime when new data is received by the ComPort
        _serialPort.Open();     //<-- make the comport listen

    }
    private delegate void Closure();
    private void SerialPortOnDataReceived(object sender, SerialDataReceivedEventArgs serialDataReceivedEventArgs)
    {
        if (InvokeRequired)     //<-- Makes sure the function is invoked to work properly in the UI-Thread
            BeginInvoke(new Closure(() => { SerialPortOnDataReceived(sender, serialDataReceivedEventArgs); }));     //<-- Function invokes itself
        else
        {
            string data = _serialPort.ReadExisting();
            if (data != null)
            {
                if (data.ToString() != "")
                {
                    if (data.Length > 6)
                    {
                        var result = data.Substring(data.Length - 5);
                        textBox1.Text = result.ToString().TrimStart(new Char[] { '0' });
                    }
                }
            }

        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-23T05:31:45.937

```
using System;

using System.IO;

using System.IO.Ports;

namespace comport

{
    public partial class Form1 : Form

    {
        public Form1()

        {

            InitializeComponent();
        }

        private SerialPort _serialPort = null;

        private void Form1_Load(object sender, EventArgs e)
        {
            AppConfiguration.sConfigType = "default";

            _serialPort = new SerialPort("COM1", 9600, Parity.None, 8);

            _serialPort.DataReceived += new SerialDataReceivedEventHandler(_serialPort_DataReceived);

            _serialPort.Open();

        }

        void _serialPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            string data = _serialPort.ReadExisting();

            textBox2.Text = data;
        }
    }

} 
```

# visual-studio - 编辑和继续不再起作用

> ID：10614294
> 
> 赞同：1
> 
> 时间：2012-05-16T08:00:01.050
> 
> 标签：visual-studio, edit, continue

我最近在尝试调试和编辑时遇到了 VisualStudio 的问题：

启用非托管调试时不允许更改？

我已经检查了我的解决方案的所有项目，并且都列出了这个：

查找所有“EnableUnmanagedDebugging”、子文件夹、查找结果 1、“整个解决方案”匹配行：0 匹配文件：0 搜索的文件总数：5030

所以我没有选择非托管调试。我还查看了调试选项。我已将标志设置为仅启用我的代码。我试图重置它，但它没有帮助。

有谁知道，我可以在哪里查看如何打开它？我不是一个人在解决这个问题，所以改变可能是通过另一个人发生的，我不知道。

此致，

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T05:44:31.300

我解决了这个问题。有一个项目打开了非托管代码调试。不幸的是，这是一个开始项目。我不知道，为什么文件搜索没有显示项目文件，但是如果你有类似的问题，你需要检查项目。

此致，

帕特里克

# html - 如何在不使用phonegap中的php的情况下从html5表单中获取数据

> ID：10614299
> 
> 赞同：0
> 
> 时间：2012-05-16T08:00:11.583
> 
> 标签：html, cordova

必须使用 html5 在 phonegap 中设计一个应用程序，其中必须从表单中收集一些数据并存储在数据库中。
问题是，我怎样才能在不使用 php 和 'post' 方法的情况下从表单中获取这些数据..？
假设用户必须在继续之前登录，现在我如何从表单中获取用户名和密码并将其与数据库匹配。问题不在于

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:08:57.143

Phonegap 是完整的 javascript api。你不会有一个带有 html 表单发送请求/响应的系统。您必须以使用服务的方式设计您的应用程序。尝试添加一些 JavaScript 库，如[jquery mobile](http://jquerymobile.com/)、[sencha](http://www.sencha.com/)或只是[jquery](http://jquery.com/)（如下面的示例）来帮助您的工作。这些库与 Phonegap 一起工作得很好（而 sencha 是最优化的）。

*   写下你的**服务端**；它可能只是简单的 php 页面，可以像标准的 html 应用程序一样处理表单参数。你需要一个服务器端来访问数据库；因此，将此文件托管在应用程序可以访问的某个 php/apache 上。

--

```
<?php 
   /* mySaveService.php */
   /* do something like $_GET['param1'] mysql_connect() / mysql_query() and all the stuff */
?> 
```

--

*   设计**客户端的视图**，您可以编写裸 html 代码或使用 Sencha 之类的框架（更简洁、更难的方式）。

--

```
<form>
  <input type="text" name="param1" value="" />
  <input type="button" class="submit" value="send" />
</form> 
```

--

*   在您的表单提交或提交按钮单击上添加一个**侦听器：**

--

```
$('form .submit').click( function() {
  saveInDb($(this).parents('form:first'));
}); 
```

--

*   编写一个 javascript 函数，该函数使用表单数据发送**ajax 调用。**url 不会在同一个域中，一定要允许跨域请求。

--

```
saveInDb = function($form) {   
  var myParams = array();   
  $form.find('input').each(function() {
    myParams[$(this).attr('name')] = $(this).val(); 
  });   
  $.ajax({
    url: 'http://domain.com/mySaveService.php',
    data: myParams,
    success: myCallback
  });   
} 
```

--

*   不要忘记编写回调函数，以提醒用户一切正常

--

```
myCallback = function() {
  alert('It works');
} 
```

--

*   或者，如果您不需要在一个地方收集所有表单的数据，您可以直接使用[localstorage](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)。

我希望它会有所帮助。问候

# html - 混合 HTML 4 和 HTML 5 是否被认为可以（标准方面）？

> ID：10614300
> 
> 赞同：2
> 
> 时间：2012-05-16T08:00:13.047
> 
> 标签：html, seo, web-standards, html4

我基本上想知道混合 HTML 4 和 HTML 5 是否可以（在标准方面）。

例如，如果我有一个`body`带有 HTML5`audio`标签的 HTML 4 元素怎么办。我知道它可以正常工作和渲染，但是在标准方面可以吗，我的 SEO 值会因此受到惩罚吗？

**编辑** 正如很多帖子所指出的，HTML 5 也有一个 body 元素。显然，每次新的 HTML 标准到来时，只有少数元素被弃用并标记为过时。请不要现在对我的问题投反对票，因为我认为还有其他人对此也有误解。这样，我不必删除它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:01:44.210

您指定的元素都是 HTML 5，因此您没有混合任何内容。

（如果你给出一个更好的例子来说明你面临的问题，或者你正在考虑的元素，也许我们可以详细说明。）

在 HTML 5 中使用 HTML 4 元素是安全的，因为引入了新元素并且只删除了一些已弃用的元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T08:07:37.943

没关系，混合没有错。但是，您需要为旧版浏览器不支持的 html5 元素提供后备。您可能需要包含一些库，如[Modernizer](http://www.modernizr.com/)和[shiv](http://ejohn.org/blog/html5-shiv/)以使事情变得无缝。

# ruby - 需要在 Ruby On Rails 中设置自定义的日期范围验证器

> ID：10614302
> 
> 赞同：0
> 
> 时间：2012-05-16T08:00:14.623
> 
> 标签：ruby, ruby-on-rails-3, validation

我有以下模型，对应于下表：

```
PriceAvailability

ID| PRODUCT_ID| VALID_FROM|VALID_TO|PRICE 
```

基本上，该表存储特定日期范围内特定产品的价格。就像一个产品可能在 2012 年 1 月 1 日到 2012 年 5 月 3 日之间花费 10 美元，从 5 月 3 日到 6 月底等花费 12 美元。事情是我需要设置一个验证器：

*   确保每条记录的日期范围不与该特定产品的另一个日期范围重叠或冲突，即您不能有两行的日期范围为 2012 年 1 月 1 日至 2012 年 3 月 1 日和 2012 年 2 月 1 日至 2012 年 4 月 1 日分别用于产品 ID 1。

我有了设置验证器的想法，甚至为开始日期设置了一个简单的验证器，但是我坚持实施这种检查。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:59:45.203

让我知道这是否适合您：

```
validate :ensure_unique_date_ranges

def ensure_unique_date_ranges
  date_ranges = (products.price_availabilities - [self]).map{ |pa| (pa.valid_from.to_i..pa.valid_to.to_i) }
  self.errors[:base] << 'date range is invalid' if date_ranges.detect{ |dr| (dr.to_a & (valid_from.to_i..valid_to.to_i).to_a).empty? }
end 
```

需要注意的一件事是 date.to_i。如果范围很大，那么性能可能会下降。试试看是否可以接受。

# c# - 通过网络服务器编译 exe 或 dll

> ID：10614303
> 
> 赞同：1
> 
> 时间：2012-05-16T08:00:27.073
> 
> 标签：c#, compiler-construction

我想通过我的一个网络服务器编译我的源代码（或其中的一部分）（比如一些网站提供他们程序的夜间构建）。因为我希望我的程序由第三方定制，并且他们有自己的独立应用程序，其中包含他们的徽标和一些自定义字符串。我更喜欢的解决方案是一个 dll 文件，该文件将被加载到我的应用程序中，这样我仍然可以更新主应用程序，同时保留第三方的定制。

于是，第三方进入我的网站，输入一些字段并生成一个dll文件（或者您有没有其他*更好*的方法来做到这一点？）并且该dll文件将被应用程序包含，它将获取徽标资源以及其中的一些字符串，以显示在应用程序中。

如何才能做到这一点？我宁愿使用 Linux 来构建它，但如果 Windows 更容易，那也不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:03:55.327

您可以为此使用 CSharpCodeProvider API，这是一个示例：

```
var csc = new CSharpCodeProvider(new Dictionary<string, string>() { { "CompilerVersion", "v3.5" } });
var parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll" }, "foo.exe", true);
parameters.GenerateExecutable = true;
CompilerResults results = csc.CompileAssemblyFromSource(parameters,
@"using System.Linq;
    class Program {
      public static void Main(string[] args) {
        var q = from i in Enumerable.Rnge(1,100)
                  where i % 2 == 0
                  select i;
      }
    }");

results.Errors.Cast<CompilerError>().ToList().ForEach(error => Console.WriteLine(error.ErrorText)); 
```

如果您想使用 linux，请查看[Mono MCS C# Compiler](http://www.mono-project.com/CSharp_Compiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:04:35.437

在任何一个平台上都很容易。只需将数据接受到模板 C# 文件中即可（String.Replace 可以正常工作）。然后只需向编译器发送壳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:04:37.303

如果您信任您的第三方供应商，请尝试使用 JetBrains 的 Team City，在 svn repo 文件夹中提交一些更改，将导致重新编译项目，您将获得预编译的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:05:53.377

这个怎么样

构建一个 Web 界面以将第三方的定制内容捕获到数据库中。

设置一个持续集成服务器来管理自动化构建（例如[Jenkins](http://jenkins-ci.org/)）。

然后在您的 CI 解决方案中实施自定义构建步骤以获取自定义项，将它们放入源代码的副本中，并让您的 CI 为每个客户端进行构建 - 将构建工件发布到客户端可以看到的地方（例如，在内部的某个地方）网页界面）

您可以在 CI 服务器中设置自定义触发器，以观察数据库是否有新的自定义。或者被 Web UI 中的某些操作触发。

# javascript - 从 javascript 在 Flash 播放器中打开 swf

> ID：10614314
> 
> 赞同：0
> 
> 时间：2012-05-16T08:01:21.113
> 
> 标签：javascript, apache-flex, flash

我有一个使用 flex 开发的项目，其中报告生成为 SWF 文件。我的要求是，当我单击页面上的 html 按钮时，应使用系统中安装的 flash 播放器打开该 SWF 文件。如果我想用 javascript 做同样的事情，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:18:43.803

如果您直接链接到 SWF 文件，浏览器将尝试打开它。为了能够选择是否要在外部应用程序中保存/打开文件，您需要更改 HTTP 标头 - 这意味着一些服务器端脚本

# http - 防火墙会阻止端口 80 上的非 HTTP 流量吗？

> ID：10614318
> 
> 赞同：8
> 
> 时间：2012-05-16T08:01:47.883
> 
> 标签：http, networking, tcp, firewall, network-protocols

任何人都可以确认在端口 80 上使用持久的传出 TCP 连接不会被绝大多数消费者防火墙阻止吗？

这是基于 HTTP 在 TCP 上运行的事实的假设，但当然理论上可以分析数据包。问题是大多数消费者防火墙是否这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:18:46.303

该功能称为 ALG，即应用层网关。这是防火墙知道甚至可能参与应用程序协议的地方

防火墙可能执行此操作的主要原因有两个：

*   协议支持，为了支持协议，必须监听/参与，例如为非被动 FTP 开放额外端口或为 SIP+SDP 开放媒体端口
*   额外的安全性，ALG 可以充当透明代理并过滤协议命令和操作以执行策略。例如阻止 HTTP CONNECT 方法

多年来，ALG 一直是状态防火墙的共同特征，但通常是不稳定的根源。

对于安全禁止环境，期望 HTTP 由防火墙或其他专用策略实施设备验证和过滤。

* * *

住宅宽带路由器往往不具备高级防火墙功能。我会惊讶地发现在端口 80 上有 HTTP 验证/过滤。

个人软件防火墙有两种类型，基本的和高级的。大多数消费者都会有一个基本的，可能是他们的操作系统附带的，不会做任何 HTTP 验证/过滤。

但是，用于威胁防护的高级 Internet 内容过滤的防病毒产品差异化呈上升趋势，这些产品很可能会过滤 HTTP 活动（但很难从其功能列表中确定）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:40:45.400

除了“它取决于”之外，几乎不可能用任何其他东西来回答这个问题。

大多数领先的防火墙供应商解决方案将通过他们的配置来做到这一点。

您会发现偏执的组织（金融、政府、军事、赌博等）通常会启用此类应用程序智能。他们会将流量检测为无效的 HTTP，因此出于安全和性能原因将其阻止。

这种类型的功能（这些天）通常默认打开，如您所知，大多数人在供应商或顾问离开后不会更改默认配置。

但是，一些技术人员不了解或没有决策权的公司会关闭此类应用程序智能，因为它会干扰业务，即内部应用程序或外部应用程序（在局域网上运行并连接回来） ，作为定制解决方案开发，在 TCP 端口 80 上工作（嘿，它总是打开的）并且是非 http 的。

不过，您不必担心防火墙，大多数公司运行内部代理服务器来处理传出流量，这些通常现在只允许端口 80 上的有效 HTTP，并且它们的配置不会更改，因为基础架构通常会请求代理服务器，并且安全团队，他们不希望端口 80 上的非 http。此外，还有负载平衡器，它们通常配置为端口 80 上的 HTTP，原因有多种，例如内容切换、重写、负载平衡和安全性.

总而言之，根据我的经验，这是肯定的，但我与中小企业，主要是大型企业合作不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:05:30.877

端口 80 被许多防火墙阻止，例如，您必须添加例外，例如我允许 Skype 或 msn messenger 使用端口 80 传输流量

# ruby-on-rails - Accepts_nested_attributes_for 给出错误：无法批量分配受保护的属性

> ID：10614322
> 
> 赞同：0
> 
> 时间：2012-05-16T08:02:00.093
> 
> 标签：ruby-on-rails

尝试保存使用“accepts_nested_attributes_for”的表单时出现“无法批量分配受保护的属性”错误。我想我已经正确地对模型进行了编码，但不确定我错过了什么。任何的想法？

错误：无法批量分配受保护的属性：组织

用户.rb

```
class User < ActiveRecord::Base
  belongs_to :organization

  accepts_nested_attributes_for :organization

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me,
                  :username, :first_name, :last_name, :organization_attributes
end 
```

组织.rb

```
class Organization < ActiveRecord::Base
  has_many :users

  attr_accessible :address1, :address2, :city, :country, :fax, :name, :phone, :state, :zip
end 
```

users_controller.rb

```
 def new
    @user = User.new
    @organization = Organization.new

    respond_to do |format|
      format.html # new.html.erb
    end
  end

  def create
    @user = User.new(params[:user])
    @organization = @user.organizations.build(params[:organization])

    respond_to do |format|
      if @user.save
        @organization.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T02:11:32.850

根据这个问题的答案设法得到我想要的东西：[Use both Account and User tables with Devise](https://stackoverflow.com/questions/8305120/use-both-account-and-user-tables-with-devise)

顺便说一句，我也在使用 STI，效果很好。

# jquery - jQuery 插件最佳实践

> ID：10614329
> 
> 赞同：4
> 
> 时间：2012-05-16T08:02:21.170
> 
> 标签：jquery, jquery-plugins

我是 jQuery 插件开发的新手，我很想知道下面列出的两种方式之间有什么区别？这样做的正确方法是什么？

```
(function($){
  $.myplugin = {
    // plugin code
  };
})(jQuery); 
```

第二个：

```
(function($){
  $.fn.myPlugin = function() {
    // plugin code 
  };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T08:03:26.917

第一个向 jQuery 添加了一个*实用函数*，称为`$.myplugin(...)`.

第二个添加了一个作用于 jQuery*对象*的插件，它被称为`$(selector).myPlugin(...)`

如果您正在开发一个作用于元素的插件，并且可以是 jQuery 风格的函数调用“链”的一部分，请选择后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:07:23.983

$.fn 指向 jQuery.prototype。您添加到其中的任何方法或属性都可用于 jQuery 包装对象的所有实例。

$.something 将属性或函数添加到 jQuery 对象本身。

当您处理页面上的 DOM 元素时，使用第一种形式 $.fn.something，并且您的插件会对元素执行某些操作。当插件与 DOM 元素无关时，使用另一种形式 $.something

类似的问题:-)

*   [jquery - $.functionName 和 $.fn.FunctionName 之间的区别](https://stackoverflow.com/questions/2845981/jquery-difference-between-functionname-and-fn-functionname)
*   [jQuery.extend 和 jQuery.fn.extend 的区别？](https://stackoverflow.com/questions/1991126/difference-jquery-extend-and-jquery-fn-extend)
*   [jQuery 插件 .fn 问题](https://stackoverflow.com/questions/2671734/jquery-plugin-fn-question)
*   [jQuery 插件创作：为什么有些人使用 jQuery.pluginName 而其他人使用 jQuery.fn.pluginName？](https://stackoverflow.com/questions/538043/jquery-plugin-authoring-why-do-some-do-jquery-pluginname-and-others-jquery-fn-pl)
*   [在 jQuery 中，$.myFunction 和 $.fn.myFunction 有什么区别？](https://stackoverflow.com/questions/2398007/in-jquery-what-is-the-difference-between-myfunction-and-fn-myfunction)

# google-docs-api - 符号 ø 的问题

> ID：10614330
> 
> 赞同：0
> 
> 时间：2012-05-16T08:02:30.740
> 
> 标签：google-docs-api

我注意到我的应用程序的用户无法创建名称中带有符号 ø 的文件夹。例如“Infomøder og Workshop”。Google docs api 响应错误：“实体“oslash”已被引用，但未声明。” 在对 API 的 XML 请求中，符号 ø 被编码为 ø。示例：Infomøder og 研讨会

这是错误的要求吗？我需要用一些不同的方式对这些符号进行编码吗？

更新：我发现用 Ø 替换 ø 可以解决问题。因此需要对所有非 HTML 格式的实体进行编码。正确的？

# java - javafx 1.3 jnlp 不工作

> ID：10614336
> 
> 赞同：1
> 
> 时间：2012-05-16T08:03:02.393
> 
> 标签：java, javafx, jnlp, java-web-start

我有一个 javafx 1.3 应用程序，它与“javafx -jar myjar.jar”完美运行，但我需要分发它，并且我正在构建 jnlp 对应文件。问题是每次我运行它时都会出现以下错误：

```
Java Web Start 1.6.0_31
Using JRE version 1.6.0_31-b04-415-11M3635 Java HotSpot(TM) 64-Bit Server VM
User home directory = /Users/ana
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
m:   print memory usage
o:   trigger logging 
p:   reload proxy configuration
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
0-5: set trace level to <n>
----------------------------------------------------
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: com/sun/javafx/runtime/eula/Eula
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at com.sun.jnlp.JNLPClassLoader.findClass(JNLPClassLoader.java:345)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:295)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at com.sun.javafx.tk.swing.SwingToolkit$StartupRoutine.run(SwingToolkit.fx:855)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
at java.awt.EventQueue.access$000(EventQueue.java:85)
at java.awt.EventQueue$1.run(EventQueue.java:643)
at java.awt.EventQueue$1.run(EventQueue.java:641)
at java.security.AccessController.doPrivileged(Native Method)
at        java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.ClassNotFoundException: com.sun.javafx.runtime.eula.Eula
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at com.sun.jnlp.JNLPClassLoader.findClass(JNLPClassLoader.java:345)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 30 more 
```

如果我解压缩 jar 文件，我可以在路径 com/sun/javafx/runtime/eula 中看到类 Eula.class，所以我不知道是否必须以某种方式指定它应该在 jar 文件中查看。

我的 jnlp 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="file:/Users/ana/Projects/" href="MatchTestCaseGenerator.jnlp">
<information>
    <title>Match Test Case Generator</title>
    <vendor>Knowledge Values</vendor>
    <homepage href="null"/>
    <description>somc description</description>
    <offline-allowed/>
    <shortcut>
        <desktop/>
    </shortcut>
</information>
<security>
     <all-permissions/>
</security>
<update check="background" policy="always"/>
<resources>
    <j2se version="1.5+"/>
    <jar href="MatchTestCaseGenerator-2.0-jar-with-dependencies.jar" download="eager" main="true"/>
    <extension href="http://dl.javafx.com/1.3/javafx-rt.jnlp" name="JavaFX Runtime"/>
</resources>
<application-desc main-class="com.sun.javafx.runtime.main.Main" progress-class="com.javafx.progressbar.ProgressManager">
    <argument>MainJavaFXScript=com.knowledgevalues.mtcg.javafx.MainFx</argument>
</application-desc>
</jnlp> 
```

# codeigniter - 在 codeigniter 中设置新路由时出错

> ID：10614346
> 
> 赞同：0
> 
> 时间：2012-05-16T08:03:54.157
> 
> 标签：codeigniter

我有一个 URL：mydomain.com/view/page/about 然后我想将其更改为：mydomain.com/page/about

我尝试添加新路线： $route['page/(:any)'] = 'view/page/$1';

但是当我刷新浏览器时，它总是显示页面：mydomain.com/view/page/index 有什么建议可以解决我的问题吗？

之前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:10:39.300

请注意，这`mydomain.com/page`不会让您到达`view/page`. 您的正则表达式希望`/`url 有一个结尾。

要么做一个

```
$route[‘page/?(:any)’] = ‘view/page/$1’; 
```

或者

```
$route[‘page’] = ‘view/page’;
$route[‘page/(:any)’] = ‘view/page/$1’; 
```

如果您希望更准确。

# sharepoint - 如何在 SharePoint Server 中开发基于角色的工作流？

> ID：10614348
> 
> 赞同：0
> 
> 时间：2012-05-16T08:04:05.017
> 
> 标签：sharepoint, sharepoint-2010, workflow, moss, infopath2010

如何在 SharePoint Server 2010 中使用 InfoPath 表单开发基于角色的工作流？

共有三个角色：
user1 - 此用户创建请求表单
user2 - 此用户验证并批准/拒绝表单，如果用户批准邮件将发送给 user3。
用户3

如何开发这种类型的工作流程？请解释共享点设计器工作流程操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:23:35.670

当然，确切的步骤将取决于您想要完成的具体目标。根据我所阅读的内容以及问题上的标签，您似乎想要：

*   InfoPath 请求表单（由某种用户创建）
*   该表格的审批流程
*   审批完成后通知某人

您的确切需求可能会大大改变其工作方式；例如，您是否需要在表单本身上进行审批？例如，我可以单击填写的请求表作为批准者，然后单击批准或拒绝

或者您是否需要基本的 SharePoint 批准？我是在这个假设下运作的。

为此，您可以将 InfoPath 表单提交到库并在创建项目时运行工作流。然后，此工作流程将启动审批流程。完成后，使用发送电子邮件操作通知需要通知的组。

同样，更多信息可以得到更完整的解决方案，但这应该让您开始走上正确的道路。

# c# - 创建存储过程以添加自动增量作为其主要字段？

> ID：10614351
> 
> 赞同：0
> 
> 时间：2012-05-16T08:04:10.500
> 
> 标签：c#, sql, sql-server, sql-server-2008, stored-procedures

我正在尝试通过 C# 将数据插入到我的 Sql-Server 数据库中。我正在调用一个存储过程，然后希望它添加。我不确定要进行哪些更改，但最终我希望它在存储过程中完成。

我现在的存储过程：

```
CREATE PROCEDURE [dbo].[InsertTagProcdure]
       @TagID int, 
       @Value nvarchar(200), 
       @TagCount nvarchar(200) 
AS
IF NOT EXISTS (SELECT NULL FROM Tag
                WHERE @TagID = @TagID)
BEGIN
    INSERT INTO 
        Tag 
        (TagID,Value,TagCount) 
        VALUES 
        (@TagID,@Value,@TagCount)
END 
```

还有我的 C# 代码：

```
int TagID = int.Parse(txtTagID.Text); //This should fall away so auto increment.
            String Value = txtValue.Text;
            int TagCount = int.Parse(txtCount.Text); 

            using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
            using (var cmd = conn.CreateCommand())
            {
                    conn.Open();
                    cmd.CommandText = "InsertTagProcdure";
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.AddWithValue("@TagID", TagID);
                    cmd.Parameters.AddWithValue("@Value", Value);
                    cmd.Parameters.AddWithValue("@TagCount", TagCount);
                    cmd.ExecuteNonQuery();
                } 
```

我使用的表创建：//不能改变这是老板给我的。

```
CREATE TABLE [dbo].[Tag](
    [TagID] [int] IDENTITY(1,1) NOT NULL,
    [Value] [varchar](200) NOT NULL,
    [TagCount] [varchar](200) NULL,
 CONSTRAINT [PK_Tag] PRIMARY KEY CLUSTERED 
(
    [TagID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:12:11.710

理想情况下，您只需通过更改表定义使 TagID 成为身份字段。如果你不能这样做，下一个最好的方法是：

```
CREATE PROCEDURE [dbo].[InsertTagProcdure]
       @Value nvarchar(200), 
       @TagCount nvarchar(200) 
AS
BEGIN
    BEGIN TRANSACTION
        DECLARE @TagID int;
        SELECT @TagID = coalesce((select max(TagID) + 1 from Tag), 1)
    COMMIT      
    INSERT INTO 
        Tag 
        (TagID,Value,TagCount) 
        VALUES 
        (@TagID,@Value,@TagCount)
END 
```

事务确保您不会得到唯一的 TagID，并且合并处理表为空的特殊情况并给出初始值 1。

**编辑：**

根据对原始问题的更改，该表已经有一个标识列，因此您的存储过程应该是：

```
CREATE PROCEDURE [dbo].[InsertTagProcdure]
       @Value nvarchar(200), 
       @TagCount nvarchar(200) 
AS
BEGIN
    INSERT INTO Tag (Value,TagCount) VALUES (@Value,@TagCount)
END 
```

你的 C# 代码应该是

int TagID = int.Parse(txtTagID.Text); //这应该会自动增加。字符串值 = txtValue.Text; int TagCount = int.Parse(txtCount.Text);

```
 using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
        using (var cmd = conn.CreateCommand())
        {
                conn.Open();
                cmd.CommandText = "InsertTagProcdure";
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@Value", Value);
                cmd.Parameters.AddWithValue("@TagCount", TagCount);
                cmd.ExecuteNonQuery();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:10:26.133

您想要设置标记表，以便它使用标识属性。请参阅此处： http: [//msdn.microsoft.com/en-us/library/aa933196](http://msdn.microsoft.com/en-us/library/aa933196(v=sql.80).aspx) (v=sql.80).aspx 。

然后，您可以从过程、过程中的插入语句和 c# 代码中删除 TagId。

然后它变成这样：

```
CREATE PROCEDURE [dbo].[InsertTagProcdure]
       @Value nvarchar(200), 
       @TagCount nvarchar(200) 
AS
BEGIN
    INSERT INTO 
        Tag 
        (Value,TagCount) 
        VALUES 
        (@Value,@TagCount)
END 
```

C#代码：

```
 String Value = txtValue.Text;
            int TagCount = int.Parse(txtCount.Text); 

            using (var conn = new SqlConnection(Properties.Settings.Default.DBConnectionString))
            using (var cmd = conn.CreateCommand())
            {
                    conn.Open();
                    cmd.CommandText = "InsertTagProcdure";
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.AddWithValue("@Value", Value);
                    cmd.Parameters.AddWithValue("@TagCount", TagCount);
                    cmd.ExecuteNonQuery();
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:10:36.820

语句 WHERE @TagID = @TagID 将始终为真，因为您比较相同的值。我*认为*您正在寻找这个（假设 TagID 是您的 AUTO-ID 字段）；

```
CREATE PROCEDURE [dbo].[InsertTagProcdure] 
       @TagID int,  
       @Value nvarchar(200),  
       @TagCount nvarchar(200)  
AS 
BEGIN
IF NOT EXISTS (SELECT TagID FROM Tag WHERE TagID = @TagID) 
BEGIN 
    INSERT INTO  
        Tag  
        (Value,TagCount)  
        VALUES  
        (@Value,@TagCount) 
  SET @TagID = @@IDENTITY
END 
ELSE
BEGIN
  UPDATE Tag
    SET Value=@Value,
    TagCount=@TagCount
  WHERE TagID = @TagID
END
RETURN @TagID
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:11:24.273

您必须在 SQL Server 中的相应列上打开“身份规范”。进入表格设计模式，选择列，在底部属性屏幕中有一个名为“身份规范”的属性。

在此之后，您可以在存储过程中省略 TagId。Sql Server 会自动为新记录分配一个 id。

如果您想知道新插入的 id 是什么（我假设这是您的下一个问题），您可以在存储过程中使用函数 SCOPE_IDENTITY()，它返回新插入记录的 id。

# debugging - 硬件观察点是否仅适用于某些内存地址？

> ID：10614352
> 
> 赞同：4
> 
> 时间：2012-05-16T08:04:22.440
> 
> 标签：debugging, gdb, watch, watchpoint

我有 gdb 7.3 和支持硬件观察点的设备。

我键入这样的后续命令：

```
Breakpoint 1, 0x000db808 in ?? ()
(gdb) info break     
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x000db808 
    breakpoint already hit 1 time
(gdb) watch *0x15588a
Watchpoint 2: *0x15588a
(gdb) watch *0x1557f8
Hardware watchpoint 3: *0x1557f8
(gdb) info break
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x000db808 
    breakpoint already hit 1 time
2       watchpoint     keep y              *0x15588a
3       hw watchpoint  keep y              *0x1557f8
(gdb) 
```

为什么在第一个命令之后不接受硬件观察点？怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:39:52.730

> 为什么在第一个命令之后不接受硬件观察点？

您没有告诉我们您使用的是什么*处理器。*

我猜您的处理器不支持未在 4 字节边界上对齐的地址的硬件观察点。

如果您的硬件不支持这样的观察点，GDB 不能在地址上设置硬件观察点。

# python - 为什么 django-south 不包含在 django.contrib 中？

> ID：10614356
> 
> 赞同：6
> 
> 时间：2012-05-16T08:04:36.973
> 
> 标签：python, database, django, migration, django-south

> **可能重复：**
> [核心 django 是否支持没有 django-south 或类似应用程序的迁移？](https://stackoverflow.com/questions/10613932/does-core-django-supports-migration-without-django-south-or-similar-app)

`django-south`是 django 中 db 迁移的事实上的标准，而且 django 本身不支持 db-migrations。

现在，由于 django 带有一些几乎是必备的高质量应用程序`django.contrib`：

*   为什么不包括 django-south ？
*   这背后的思考过程是什么？
*   是不够好还是许可问题？

## 相关问题：

*   [核心 django 是否支持没有 django-south 或类似应用程序的迁移？](https://stackoverflow.com/questions/10613932/does-django-supports-migration-without-django-south)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T09:02:53.070

我记得看过一段视频，Jacob Kaplan-Moss 回答了这个问题。虽然我不记得逐字逐句的谈话，但他的回答是——他们不想将 South 捆绑到 Django 中，因为 South 仍处于婴儿阶段，在这个阶段整合 South 可能会减慢它的发展。

更新 03/13 - South 名声的 Andrew Godwin[启动](http://www.kickstarter.com/projects/andrewgodwin/schema-migrations-for-django)了一个项目，将数据库迁移内置到 Django 的核心中。预计这将登陆 Django 1.6 / 1.7。

04/14 更新 - 迁移使其成为 Django 1.7 的核心。您可以阅读有关迁移的更多信息 @ [https://docs.djangoproject.com/en/dev/topics/migrations/](https://docs.djangoproject.com/en/dev/topics/migrations/)。

# java - 如何初始化公共静态最终只读 LinkedMap（双向映射）

> ID：10614359
> 
> 赞同：8
> 
> 时间：2012-05-16T08:04:39.587
> 
> 标签：java, map, final, apache-commons-collection

我想创建一个

```
public static final LinkedMap myMap; 
```

在某处我发现了类似的地图：

```
 public class Test {
        private static final Map<Integer, String> MY_MAP = createMap();

        private static Map<Integer, String> createMap() {
            Map<Integer, String> result = new HashMap<Integer, String>();
            result.put(1, "one");
            result.put(2, "two");
            return Collections.unmodifiableMap(result);
        }
    } 
```

但我不能将 'unmodifiableMap' 方法应用于[`LinkedMap`](http://commons.apache.org/collections/api-release/index.html). 有谁能够帮助我？有可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T08:08:27.233

最流行的解决方法几乎可以肯定是[Guava](http://github.com/google/guava/) [`ImmutableMap`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableMap.html)。（披露：我为 Guava 做出了贡献。）

```
Map<Integer, String> map = ImmutableMap.of(
  1, "one",
  2, "two"); 
```

或者

```
ImmutableMap<Integer, String> map = ImmutableMap
  .<Integer, String> builder()
  .put(1, "one")
  .put(2, "two")
  .build(); 
```

如果没有其他库，除了您编写的库之外，唯一的解决方法是

```
static final Map<Integer, String> CONSTANT_MAP;
static {
  Map<Integer, String> tmp = new LinkedHashMap<Integer, String>();
  tmp.put(1, "one");
  tmp.put(2, "two");
  CONSTANT_MAP = Collections.unmodifiableMap(tmp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:33:39.777

声明等于函数 Create() 的变量对我来说没有任何意义。

如果你需要一个最终变量 myMap 你必须这样写：

```
// = createMap();
private final static LinkedHashMap<Integer, String> 
                                          myMap = new LinkedHashMap<Integer, String>();
static {
    myMap.put(1, "one");
    myMap.put(2, "Two");
};

public static void main(String[] args) {

  for( String link : myMap.values()){
    System.out.println("Value in myMap: "+link);
  }

} 
```

或者如果你想使用 create() 函数，你必须从 myMap 中删除 final 关键字并在 main 中使用 myMap ，例如：

```
 public static void main(String[] args) {

    myMap = Test.createMap(); 
```

# visual-studio-2010 - 无法使用 resharper 解决符号问题，但代码可以编译

> ID：10614362
> 
> 赞同：12
> 
> 时间：2012-05-16T08:05:01.770
> 
> 标签：visual-studio-2010, resharper-6.0

我知道以前有人问过这个问题，但是没有解决这个问题，而且是去年，所以我想也许有人现在已经找到了解决这个问题的方法。我正在使用带有 SP1 的 VS2010。在安装 SP1 之前没有问题。如果我卸载 re# 它工作正常。我有一个 ASP.Net 网站和一些其他项目。来自其他项目的类无法识别，resharper 建议使用其他项目，所以我这样做了，它把它放在 usings 上，然后 using 也得到一个“无法解析符号”。我已经尝试了他们在 2011 年[在这里](https://stackoverflow.com/questions/5539131/resharper-cannot-resolve-symbol-eval-in-vs2010-sp1)给出的建议，但没有。如果我删除_Resharper。然后重启vs，它会工作5秒，然后又变红了……

希望从那时起有人找到解决方案...谢谢

编辑：我注意到它使用 Web 服务执行此操作

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-06T14:18:25.403

尽管这个问题相当古老，但它今天发生在我身上。我通过进入菜单解决了它`Tools -> Options -> Resharper`

单击`Options`并按下`Clear Caches`按钮，然后按`Save`。

然后只需单击`Suspend Now`后面的`Resume Now`按钮以重新启动 Resharper，您的代码应该会再次正常。

编辑：再次发生在我身上。清除缓存有帮助。唯一改变的是“清除缓存”隐藏在 resharper 选项的“**常规”选项卡下。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T23:34:24.860

I was having the same problem with one of my projects. I reported the issue to JetBrains and they requested a VS solution which has the problem.

So, I decided to spend a few hours trying to narrow down the problem as much as possible. I found out that the issue is related to a tool I use which strips out information from .DLLs.

If I don’t strip the .DLLs, Resharper works fine without showing any “cannot resolve symbol” errors. However, If I do strip the .dll, then ReSharper starts to show these “cannot resolve symbol” errors. In both cases, Visual Studio compiles the program and the program runs fine.

I am working with JetBrains to get the issue resolved.

In the mean time, I am able to workaround the problem by using versions of my .DLLs which do not have any information stripped out of them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T10:33:53.090

1.  在 Visual Studio 中，工具 -> 选项 -> Resharper，按立即暂停
2.  删除文件夹 _ReSharper.*
3.  工具 -> 选项 -> Resharper，按立即恢复

# java - 休眠枚举插入从 0 开始应该从 1 开始

> ID：10614366
> 
> 赞同：0
> 
> 时间：2012-05-16T08:05:23.703
> 
> 标签：java, hibernate

好吧，当我使用枚举类型并将所有类型值插入数据库时​​，所有类型值都从 0 而不是 1 开始。任何简单的修复 +1 都不是好的解决方案。

枚举类

```
public enum ServiceRequestType {
    REGISTERED(1), REJECTED(2), DONE(3);

    int value;
    ServiceRequestType(int value) {
        this.value = value;
    }
} 
```

还有休眠映射。

```
 <property name="type" column="service_request_status_type_fk">
        <type name="org.hibernate.type.EnumType">
            <param name="enumClass">ee.ttu.support.model.domain.service.ServiceRequestType</param>
        </type>
    </property> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:24:46.933

您可以使用 java5 枚举类型。检查[此](http://tkdao.wordpress.com/2009/08/17/mapping-java-5-enums-with-hibernate/)链接以获得完美的休眠枚举示例。如果您有问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:12:49.347

我相信正确的语法是

```
public enum ServiceRequestType
{
    REGISTERED = 1, REJECTED, DONE
} 
```

如果你想从 int 中获取枚举，你可以这样做`Enum.ToObject(typeof(ServiceRequestType), 1)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T19:45:47.890

好吧，对于这个简单的问题，我没有找到任何简单的解决方案，但这是一个

```
public enum ServiceRequestType {
    REGISTERED, REJECTED, DONE;

    public int getIndex() {
        return ordinal() + 1;
    }
} 
```

调用时使用 .getIndex 方法

```
ServiceRequestType.REGISTERED.getIndex() 
```

# android - 如何知道哪个按钮被点击“第一个”

> ID：10614367
> 
> 赞同：-5
> 
> 时间：2012-05-16T08:05:26.373
> 
> 标签：android, database, events

我有一个包含 9 个按钮的活动，它提供了一些价值。我想按点击顺序获得该值 - 这怎么可能？这是我的代码：

```
 public boolean onTouch(View arg0, MotionEvent arg1) {
            // TODO Auto-generated method stub
            s1="1";
            i1.setImageResource(R.drawable.lockk1);
            i1.setBackgroundColor(Color.TRANSPARENT);
           // i1.setBackgroundResource(R.drawable.back);
            return false;
        }
    });       
});

Button b=(Button)findViewById(R.id.butt);
b.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        System.out.println("**********"+s1+s2+s3+s4+s5+s6+s7+s8+s9+"******");
          mydb=LockerActivity.this.openOrCreateDatabase("pattern", MODE_PRIVATE, null); 
            Cursor cr= mydb.rawQuery("SELECT * FROM patterntable", null);
 if (cr.getCount() > 0) {                   
    if(cr.moveToFirst()){
            do 
            {
            pass = cr.getString(cr.getColumnIndex("password"));

            password=s1+s2+s3+s4+s5+s6+s7+s8+s9;
            if(password.equals(pass))
            {   
                Intent i=new Intent(LockerActivity.this,first.class);
                startActivity(i);
            }
            else{
                 Intent i=new Intent(LockerActivity.this,LockerActivity.class);
                 startActivity(i);
                 }        
                }   while (cr.moveToNext());

             cr.close();
             mydb.close();
    }   
    }
 } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:42:35.590

我不是 Android 程序员，但如果我需要在 iOS 上做同样的事情，我会执行以下操作：

```
int firstPressedButton = -1;
void settingFirstPressedButton (int buttonPressed)
{
if (firstPressedButton == -1)   //when firstPressedButton = -1 it means no button was pressed
  firstPressedButton = buttonPressed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:45:19.390

```
public void updateDisplay(View v){
    s1=(String) ((Button)v).getTag();
    ss.add(s1);
    System.out.println("nos are**********"+ss);
} 
```

为相应的按钮设置一些标签

# linux - 本地安装的 FTP 文件夹，用于 SVN 存储库

> ID：10614372
> 
> 赞同：0
> 
> 时间：2012-05-16T08:05:48.017
> 
> 标签：linux, svn, ftp

我想使用 FTP 协议远程创建一个 SVN 存储库。是否建议执行以下步骤

1.  使用 culftpfs 将 FTP 目录挂载为本地
2.  使用 svnadmin create 创建一个存储库，就好像它是本地的一样
3.  在日常生活中使用它？

你知道这种方法有什么问题吗？

我尝试后的结果

我确实尝试了一次尝试，但我得到了一个看起来像超时的错误。真正的问题是这种方法太慢了。每次复制存储库的解决方案看起来更可行或使用简单的脚本来备份文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:55:04.007

这是一种危险的方法，但是如果您独自工作（如“单个用户”），它会起作用。最大的问题是：

*   您不能通过网络提供独占锁定机制
*   所有用户都可以直接访问所有存储库的内部文件，如果有人删除 revs 中的文件，您的存储库已损坏无法修复

你应该设置一个apache

```
SVNAutoversioning on 
```

然后你可以将你的 repoURL 挂载为 WebDav 文件夹。对这些文件的每次更改都将导致一次提交，而无需工作副本

# android - 单击Android的html文件中的链接后如何显示popupMenu

> ID：10614375
> 
> 赞同：0
> 
> 时间：2012-05-16T08:05:54.803
> 
> 标签：android, android-layout, android-listview, android-webview

我创建了一个应用程序，该应用程序需要在单击 html 文件中的特定链接时显示 popupMenu。

现在我不确定如何获取链接的单击事件以打开 popupMenu。有人可以请教吗？我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:15:22.907

为[`WebViewClient`](http://developer.android.com/reference/android/webkit/WebViewClient.html)您的[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html). 现在，每次用户单击链接时，[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)都会调用该函数并将按下的链接作为字符串参数传递。这样，您可以通过检查此 url 参数（函数的第二个参数）来捕捉用户单击链接的时间。

最后，当您发现链接被按下时，您会显示弹出窗口。

```
webview.setWebViewClient(new WebViewClient()
{
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
             //if the url is your popup url
             //show the popup
             //if you want the web view to load the url return false; else return true;             
             //by default return false btw!

       }
 }); 
```

# asp.net-mvc-3 - Code First 约定混乱

> ID：10614377
> 
> 赞同：0
> 
> 时间：2012-05-16T08:06:16.567
> 
> 标签：asp.net-mvc-3, entity-framework, html.dropdownlistfor

楷模：

```
public class Status
{
    public int Id { get; set; }
}

public class Podcast
{
    public int Id { get; set; }

    public virtual Status Status { get; set; }
} 
```

Podcast 表有 StatusId 列，该列是外键。在这种情况下，我收到以下错误消息：`Invalid column name 'Status_Id'.`为什么？- 很多次我都用这样的例子来面对那些文章。这是第一个问题。好的，没问题 - 我在这些列中添加了一个下划线字符：Sttaus_Id 等等。现在似乎一切正常，但是当我通过以下方式修改我的模型时：

```
public class Podcast
{
    public int Id { get; set; }

    public int Status_Id { get; set; }

    public virtual Status Status { get; set; }
} 
```

现在我收到以下错误：`Invalid column name 'Status_Id1'.` 为什么？如果没有这些 xx_id 属性，我将无法使用 DropDownListFor 助手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:24:43.630

我相信这里的问题是您首先创建了数据库并为您的 FK 引用创建了一个名为 StatusId 的列，但您没有告诉 EF 您正在为您的 FK 使用非默认列名。

以下将为您提供您所追求的结构（ps 我同意您的命名约定，我个人不喜欢 fk ids 中的 _）

```
 public class MyContext : DbContext
    {
        public DbSet<Podcast> Podcasts { get; set; }
        public DbSet<Status> Status { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Podcast>().HasOptional(p => p.Status)
                .WithMany().HasForeignKey(p => p.StatusId);
            base.OnModelCreating(modelBuilder);
        }
    }

    public class Status
    {
        public int Id { get; set; }
    }

    public class Podcast
    {
        public int Id { get; set; }

        public int? StatusId { get; set; }
        public virtual Status Status { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T08:11:26.083

至少外键字段的约定是表名+字段名，所以在你的情况下 StatusId 没有下划线。但我不确定它为什么这么说`invalid column name Status_Id1`。

删除下划线，然后重试。如果您仍然收到错误消息，请使用结果对您的问题进行编辑。

# php - 如何将 4 个不同大小的数组组合在一起，以使结果数组的元素在 4 个数组的每个元素之间交替

> ID：10614381
> 
> 赞同：1
> 
> 时间：2012-05-16T08:06:50.847
> 
> 标签：php

很难给它起一个易于理解的描述性标题，所以我将在这里更深入地尝试。假设我有 4 个不同大小的数组，a1、a2、a3 和 a4，我想将它们组合成数组 SUM。

我希望 SUM[0] 为 a1[0]，SUM[1] 为 a2[0]，SUM[2] 为 a3[0]，SUM[3] 为 a4[0]，然后 SUM[4 ] 为 a1[1] 等等。

需要考虑的一件棘手的事情是数组的大小不同。

编辑：如果任何数组 a1,a2,a3,a4 终止，只需移动到下一个 - 抱歉没有说清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:12:01.547

```
$a1=array(1,2,3);
$a2=array(4,5,6,7,8,9);
$a3=array(10,11);
$a4=array(12,13,14,15);
$maxlen = max(count($a1), count($a2), count($a3), count($a4));
$a = array($a1, $a2, $a3, $a4);
$SUM = array();
for ($i = 0; $i < $maxlen; $i++) {
    foreach ($a as $arr) {
        if (array_key_exists($i, $arr)) {
            $SUM[] = $arr[$i];
        }
    }
}

var_dump($SUM); 
```

输出：

数组(15) { [0]=> int(1) [1]=> int(4) [2]=> int(10) [3]=> int(12) [4]=> int(2) [5]=> int(5) [6]=> int(11) [7]=> int(13) [8]=> int(3) [9]=> int(6) [10]=> int(14) [11]=> int(7) [12]=> int(15) [13]=> int(8) [14]=> int(9) }

# c# - 我如何为这个关系数据库建模，并将所有数据放在集合类中

> ID：10614383
> 
> 赞同：2
> 
> 时间：2012-05-16T08:07:03.930
> 
> 标签：c#, sql-server, database, entity-framework

如何在 EF 中对这个关系数据库进行建模，以便我可以为食物类型、维生素和每种食物类型中的维生素含量提供列表集合类？

![在此处输入图像描述](../Images/27c7b106f39509befd073ccd26c554f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:13:25.277

为了在现实数据库中对您的表进行建模，我认为这一定是个问题，您将拥有 3 个实体。`FoodType`，`Vitamin`以及`FoodTypeVitamin`关系。

`FoodType`会有一个名为 的属性`Id`，值为 1,2,3,4 等。

`Vitamin`会有一个`Id`和一个`Name`属性，值是

```
Id    Name
1     'A'
2     'B'
3     'C'
4     'D' 
```

`FoodTypeVitamin`会有一个外键`FoodType`和`Vitamin`和一个`Mg`属性来保存每个关系的毫克数。所以数据可能是这样开始的

```
VitmainId  FoodTypeId  Mg
1          1           200
3          1           100
2          2           50
3          2           11
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:22:59.420

如果您想使用 EF Code First，您可以执行以下操作：

```
public class Vitamin 
{
    [Key]
    public String Name {get; set;}
    public double Amount {get; set;}
    public virtual Food Food {get; set;}
}

public class Food
{
    [Key]
    public int FoodID {get; set;}
    public String FoodName {get; set;}
    public virtual List<Vitamin> Vitamins {get; set;}
}

public DataContext: DbContext 
{
     public DbSet<Vitamin> Vitamin {get; set;}
     public DbSet<Food> Foods {get; set;}
} 
```

# android - listView 的元素未完全突出显示

> ID：10614392
> 
> 赞同：0
> 
> 时间：2012-05-16T08:07:41.280
> 
> 标签：android, listview

我尝试做最简单的listView。我创建布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/history_menu_item"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="center_horizontal"
    android:padding="60dp" >
</TextView> 
```

和列表活动：

```
public class HistoryMenu extends ListActivity {

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        String[] values = new String[] { "Edit", "Send" };

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.history_menu, values);

        setListAdapter(adapter);
    }
} 
```

listView 的元素未完全突出显示，仅在文本处突出显示。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:43:21.597

进行更改 `Textview`

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/history_menu_item"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:padding="60dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:45:05.993

将此用作您的列表项布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<TextView
android:id="@+id/history_menu_item"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:gravity="center_horizontal"
android:padding="60dp" >

</TextView>
</LinearLayout> 
```

# c++ - C++11：如何访问不同类型的 std::functions 目标？

> ID：10614396
> 
> 赞同：1
> 
> 时间：2012-05-16T08:07:46.177
> 
> 标签：c++, lambda, c++11, function-pointers, std-function

我想编写一个最小的多播委托类。它的接口包含三个运算符 operator() 用于调用委托和 operator+=/operator-= 用于添加/删除可调用类型，如函数、方法、lambda 或仿函数。

我在实现 operator-= 时遇到了麻烦，我需要比较函数目标的地址以进行删除。到目前为止，这是我想出的（我使用 g++ 4.6.3）：

```
#include <functional>
#include <list>

template <typename ... EventArgs>
class Event
{
public:
    typedef std::function<void (EventArgs...)> EventHandler;

    Event() = default;
    ~Event() = default;
    Event(const Event &) = delete;
    Event & operator=(const Event &) = delete;

    void operator()(EventArgs... eventArgs)
    {
        for (auto eventHandler : m_eventHandlers)
            eventHandler(eventArgs...);
    }

    Event & operator+=(const EventHandler &eventHandler)
    {
        m_eventHandlers.push_back(eventHandler);
        return *this;
    }

    Event & operator-=(const EventHandler &eventHandler)
    {
        m_eventHandlers.remove_if([&](const EventHandler &_eventHandler)
        {
            return false; // TODO: Compare event handlers
        });

        return *this;
    }

private:
    std::list<EventHandler> m_eventHandlers;
}; 
```

当我用以下代码替换 TODO 行时，operator-= 适用于函数：

```
return * eventHandler.template target<void (*)(EventArgs...)>() ==
       *_eventHandler.template target<void (*)(EventArgs...)>(); 
```

这是一个最小的例子：

```
void eventHandler() { /* ... */ }

Event<> event;
event += eventHandler;
event();
event -= eventHandler; // works 
```

但是，对于其他可调用类型，它会崩溃，因为 std::function.target() 返回空指针。显然模板不再适合，所以我尝试模板 Event::operator-= 但由于“不完整类型”，它不能编译最可调用的类型：

```
template<typename T>
Event & operator-=(const T &eventHandler)
{
    m_eventHandlers.remove_if([&](const EventHandler &_eventHandler)
    {
        if (_eventHandler.template target<T>() != null_ptr) // <- ERROR
        {
            // ...
        }
    });

    return *this;
} 
```

我也尝试过 T* 作为 target() 的模板参数，但我被卡住了。是否可以编写一个通用 operator-= 来正确比较任何可调用类型？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:17:10.940

问题是`std::function<>`不支持比较运算符`==`和`!=`. [`boost::function`对此有解释](http://www.boost.org/doc/libs/1_49_0/doc/html/function/faq.html#id1549884)。

一种解决方案是将函数存储在映射或以整数为键的哈希中。注册将返回该整数键。要取消注册，必须传递密钥，例如：

```
typedef int handler_id_t;
handler_id_t add(const EventHandler &eventHandler);
void del(handler_id_t); 
```

# javascript - 将变量传递给 mongo 更新？

> ID：10614397
> 
> 赞同：2
> 
> 时间：2012-05-16T08:08:00.390
> 
> 标签：javascript, node.js, mongodb

我有一个看起来像这样的 mongo 文档：

```
{ 
   "_id" : '4fb2a4809ad7324ccba1f6b8',
   "events" : { 
     "4fb2a4809ad7324ccba1f6b9" : {a:{z:1},b:{z:2},c:{z:3}},
     "4fb2a4809ad7324ccba1f610" : {a:{z:1},b:{z:2},c:{z:3}}
   } 
} 
```

然后我的服务器收到一个更新对象。

```
update = { 
  _id = '4fb2a4809ad7324ccba1f6b8', 
  event_id: '4fb2a4809ad7324ccba1f610', 
  changed_data: {a:{b:3}} 
} 
```

ab = 3 已创建或更改。这并不意味着 a = {b:3} 因此我不想覆盖已经存储在文档中的现有 az = 1 。

我将如何为这些更改编写原子更新？我无法弄清楚的主要事情是如何将变量传递到命令中以定位子对象。（使用 node-mongodb-native）

谢谢你的帮助！

更新后的文档如下所示：

```
{ 
   "_id" : '4fb2a4809ad7324ccba1f6b8',
   "events" : { 
     "4fb2a4809ad7324ccba1f6b9" : {a:{z:1},b:{z:2},c:{z:3}},
     "4fb2a4809ad7324ccba1f610" : {a:{z:1, b:3},b:{z:2},c:{z:3}}
   } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:11:23.720

```
for (var id in update.changed_data) {
  for (var sub_id in update.changed_data[id]) {
    db.collection.update({ "_id" : update._id, "$atomic" : "true" },{ $set: {'events.' + update.event_id + '.'+ id +'.' + sub_id : update.changed_data[id][sub_id] } });
  }
} 
```

您还可以查看此 URL：[http ://www.mongodb.org/display/DOCS/Updating#Updating-ModifierOperations](http://www.mongodb.org/display/DOCS/Updating#Updating-ModifierOperations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T15:09:46.277

变量，这里 dt 是日期和评论，评级和价格可以是另一个变量 Python：3.x

```
rev = str(dt)+'_review'
rat = str(dt)+'-rating'
pri = str(dt)+'_price'
col.update_one({'brand':brand,'product':product},{'$set': {rev : review, rat : rating, pri : price}}) 
```

输出：

```
2019-04-23_review: 1234
2019-04-23_rating: 2345
2019-04-23_price: 1234 
```

# jquery - window.location 不工作

> ID：10614399
> 
> 赞同：-2
> 
> 时间：2012-05-16T08:08:19.510
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在 JQuery 中遇到问题，我正在尝试制作一个页面，在使用单选按钮选择贷款类型后，该页面将重定向到另一个页面。不幸的是，`window.location`不工作。

```
 <script src="js/jquery-1.7.2.min.js"></script>
  <script>
     $(document).ready(function () {
       $('#apply_but').click(function () {
         var rad_but = $('input[@name="loan_type"]:checked');
         if($(rad_but).val() == "loan_business_corp"){
            $(location).attr('href','sss_pension_loan_step5.php');
         }
         else if($(rad_but).val() == "loan_business_sol"){
           alert("lol");
         }
       });
     });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:12:00.983

`window.location`不是 DOM 对象，所以你**不能**写：

```
$(window.location).attr('href', ...); 
```

`window.location.href`只是一个*属性*，恰好与标签的*属性*`window.location`同名。`href` *`<a>`*

 *相反，您必须编写：

```
window.location.href = ...; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:10:45.510

为什么要使用 jquery 来加载页面 javascript 可以这样做：

```
window.location.href='<url>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:33:25.420

**通过使用 jQuery，我们可以这样做:)**

```
<input type="radio" name="url" value="url.com"  id="url" /> op1<br />
<input type="radio" name="url" value="url1.com" id="url" /> op2<br />
<input type="radio" name="url" value="url2.com" id="url" /> op3<br />
 <script>
    ​function displayVals() {
           window.location.href=$('input:radio:checked').val();
          //alert($('input:radio:checked').val());
    }

    $('input').click(function() {
        displayVals();
    });​
</script> 
```

[http://jsfiddle.net/ipsjolly/rL6WK/](http://jsfiddle.net/ipsjolly/rL6WK/)*

# iphone - 如何在 iPhone 应用程序的饼图上显示百分比值

> ID：10614402
> 
> 赞同：0
> 
> 时间：2012-05-16T08:08:47.327
> 
> 标签：iphone, xcode

我正在 iPhone 应用程序中创建一个饼图，它工作正常，但我还想显示每个部分的百分比，例如 17% 25% 等。

我正在使用以下代码

```
-(void)createGraph
{
    PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(50,440,320,230)];
    myPieClass.backgroundColor=[UIColor clearColor];
    myPieClass.itemArray=[[NSArray alloc]initWithObjects:valueOne,valueTwo,valueThree,valueFour, nil];
    myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor blueColor],[UIColor redColor],[UIColor greenColor],[UIColor brownColor], nil];
    myPieClass.radius=100;
    [self.view addSubview:myPieClass];
} 
```

馅饼类

```
 #import <UIKit/UIKit.h>
   @interface PieClass : UIView 
   {
          NSArray* itemArray;
          NSArray* myColorArray; 
          int radius;
   }

  @property(nonatomic,retain)NSArray* itemArray;
  @property(nonatomic,retain)NSArray* myColorArray;
  @property(nonatomic,assign) int radius;

  @end

  #import "PieClass.h"
  @implementation PieClass
  @synthesize itemArray,myColorArray,radius;

 - (id)initWithFrame:(CGRect)frame
 {
   self = [super initWithFrame:frame];
   if (self) {
    // Initialization code
   }
   return self;
 } 
```

// 仅覆盖 drawRect: 如果您执行自定义绘图。// 空实现会对动画期间的性能产生不利影响。

```
 - (void)drawRect:(CGRect)rect
 {
   // Drawing code
   int c=[itemArray count];
   CGFloat angleArray[c];
   CGFloat offset;
   int sum=0;

   CGContextRef context = UIGraphicsGetCurrentContext();    
   CGContextSetAllowsAntialiasing(context, false);
   CGContextSetShouldAntialias(context, false);

   for(int i=0;i<[itemArray count];i++)
          sum+=[[itemArray objectAtIndex:i] intValue];

   for(int i=0;i<[itemArray count];i++)
   {
          angleArray[i]=(float)(([[itemArray objectAtIndex:i] intValue])/(float)sum)*(2*3.14); // in radians
           CGContextMoveToPoint(context, radius, radius);
           if(i==0)
               CGContextAddArc(context, radius, radius, radius, 0,angleArray[i], 0);
           else
               CGContextAddArc(context, radius, radius, radius,offset,offset+angleArray[i], 0);
           offset+=angleArray[i];

           CGContextSetFillColorWithColor(context, ((UIColor *)[myColorArray objectAtIndex:i]).CGColor);
           CGContextClosePath(context); 
           CGContextFillPath(context);
    }
 } 
```

# android - 系统加载 .so 文件时出现 jni 问题

> ID：10614405
> 
> 赞同：0
> 
> 时间：2012-05-16T08:08:55.853
> 
> 标签：android, c++, java-native-interface

我已经创建了 .so 文件并将其放在正确的路径中。但是，当我尝试运行 android 程序时，问题就来了。问题是：

```
`5-16 15:34:16.704: E/AndroidRuntime(9968): Caused by: java.lang.UnsatisfiedLinkError: 
Cannot load library: reloc_library[1311]:  1584 cannot locate '_Z13raptor_decodePKhtPKtPhjPK15RaptorParam_tag'... 
```

raptor_decode 是 jni_function 中包含的一个函数。

我应该怎么做才能纠正这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:48:33.790

我认为这是你的问题：

```
1584 cannot locate '_Z13raptor_decodePKhtPKtPhjPK15RaptorParam_tag' 
```

如果 raptor_decode 是您要调用的方法，请在此处阅读：http: [//java.sun.com/docs/books/jni/html/design.html](http://java.sun.com/docs/books/jni/html/design.html)（并阅读 11.3）

# c++ - 创建临时文件：无法写入

> ID：10614406
> 
> 赞同：2
> 
> 时间：2012-05-16T08:08:56.087
> 
> 标签：c++, winapi

每当我在 C++ Native WinAPI 中创建临时文件时，返回的 HANDLE 始终为 INVALID_FILE_HANDLE 但临时文件已正确创建？

难道我做错了什么？

如果我使用 GetLastError() 输出是：

> “文件存在”

在下面的代码中，我可以成功创建一个临时文件，但 CreateFile 函数总是返回 INVALID_FILE_HANDLE 并且我无法将任何文本写入文件句柄：

```
GetTempPath(dirLen, dir);
GetTempFileName(dir, fName, 0, tName);
HANDLE file = CreateFile(tName, GENERIC_WRITE, 0, NULL, CREATE_NEW,
                         FILE_ATTRIBUTE_TEMPORARY, NULL);
if (file == INVALID_HANDLE_VALUE) {
   outputLastError(); // Outputs: "The file exists"
}

if (FAILED(WriteFile(file, (LPTSTR)toWrite.c_str(), strLen, 0, NULL))) {
   cout << (_T("Failed to write string to file \r\n"));
   outputLastError();
   res = false;
}

// WriteFile doesn't fail but the temporary file is empty when I open it? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T08:17:09.200

将[`GetTempFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364991(v=vs.85).aspx)始终创建文件：

> 如果 uUnique 为零，该函数将尝试使用当前系统时间形成一个唯一的文件名。如果文件已经存在，则数字加一并且函数测试该文件是否已经存在。这一直持续到找到唯一的文件名；**该函数使用该名称创建一个文件并关闭它。**请注意，当 uUnique 为非零时，该函数不会尝试验证文件名的唯一性。

`CREATE_NEW`然后在中指定（正如[Mat](https://stackoverflow.com/users/635608/mat)`CreateFile()`已经指出的那样）导致返回：`CreateFile()``INVALID_FILE_HANDLE`

> CREATE_NEW 创建一个新文件，仅当它不存在时。如果指定的文件存在，则函数失败并且最后一个错误代码设置为 ERROR_FILE_EXISTS (80)。如果指定的文件不存在并且是可写位置的有效路径，则创建一个新文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:15:01.197

您指定`CREATE_NEW`为创建处置。如果文件已经存在，这将*失败*，因此您会返回一个无效的句柄 - 显然，您不能写入无效的句柄。

如果要始终重新创建文件，请使用`CREATE_ALWAYS`.

请参阅[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx) API 文档。

# fortran - 根据 Fortran 中的掩码读取

> ID：10614416
> 
> 赞同：0
> 
> 时间：2012-05-16T08:09:42.647
> 
> 标签：fortran, mask

我有一个带有一定数量的行和列的掩码。我只想阅读包含例如 1 的 (i,j) 组件。然后一旦找到具有 1 的 (i,j) 组件，如果 (i+1,j),(ii ,j),(i,j+1),(i,j-1) 等于 1。

希望这很清楚。欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:37:43.123

让你的面具是这样的：

```
integer, dimension(1:r,1:c) :: mask 
```

那么以下片段应该为您指明正确的方向：

```
forall (i=1:r, j=1:c, mask(i,j)==1)
   if ( mask(i-1,j)==1) then
      ! do the right thing
   else if ( mask(i+1,j)==1) then
      ! I hope you get the picture now
... 
```

`+/- i/j`我将留给您处理超出数组边界 的边缘情况。`forall`不一定是使用最快的构造，我们可以争论使用它的优雅性和可读性，而不是一系列循环，但我们不要。

# java - 将视频划分为字节

> ID：10614419
> 
> 赞同：2
> 
> 时间：2012-05-16T08:09:55.377
> 
> 标签：java, video, byte, video-encoding, bytebuffer

我想将视频转换为字节，它给了我结果，但我认为结果不正确，因为我测试了不同的视频并且给了我相同的结果，所以任何人都可以帮助请做如何将视频转换为字节

```
String filename = "D:/try.avi";
byte[] myByteArray = filename.getBytes();
for(int i = 0; i<myByteArray.length;i ++)
{
    System.out.println(myByteArray[i]);
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:12:31.463

```
String filename = "D:/try.avi";
byte[] myByteArray = filename.getBytes(); 
```

那是将文件**名**转换为字节，而不是文件**内容。**

至于读取文件的内容，请参阅Java 教程的[Basic I/O课程。](http://docs.oracle.com/javase/tutorial/essential/io/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:16:31.953

相同容器格式的视频以相同的字节开头。使用的编解码器决定了实际的视频文件。

如果您计划开发视频应用程序，我建议您首先阅读有关容器文件格式和编解码器的更多信息。

但是你有一个不同的问题。正如 Andrew Thompson 正确指出的那样，您正在获取*文件名字符串*的字节。

正确的方法是：

```
private static File fl=new File("D:\video.avi");
byte[] myByteArray = getBytesFromFile(fl); 
```

还请记住，终端通常具有固定的缓冲区大小（在 Windows 上，它是几行），因此输出一大块数据只会显示最后几行。

**编辑：**这是 getBytesFromFile 的实现；java专家可能会提供更标准的方法。

```
public static byte[] getBytesFromFile(File file) throws IOException {
        InputStream is = openFile(file.getPath());

        // Get the size of the file
        long length = file.length();

        if (length > Integer.MAX_VALUE) {
            // File is too large
            Assert.assertExp(false);
            logger.warn(file.getPath()+" is too big");
        }

        // Create the byte array to hold the data
        byte[] bytes = new byte[(int)length];

        // debug - init array
        for (int i = 0; i < length; i++){
            bytes[i] = 0x0;
        }

        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
            offset += numRead;
        }

        // Ensure all the bytes have been read in
        if (offset < bytes.length) {
            throw new IOException("Could not completely read file "+file.getName());
        }

        // Close the input stream and return bytes
        is.close();
        return bytes;
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-06-08T05:32:33.123

如果要读取视频文件的内容，请使用`File`.

```
String filename = "D:/try.avi";
File file=new File(filename);
byte myByteArray[]=new byte[(int)file.length()];
RandomAccessFile raf=new RandomAccessFile(file,"rw");
raf.read(myByteArray); 
```

# tcl - 期望：在运行时获取字符串

> ID：10614421
> 
> 赞同：-1
> 
> 时间：2012-05-16T08:10:00.123
> 
> 标签：tcl, expect

有没有办法在运行时获取字符串？（比如“C”中的 scanf 函数，我们可以在运行时输入字符串）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-16T08:16:49.277

是的，您可以使用**read**来接受字符串，或者**读取**一行。有关更多信息，请参见此处：[http ://www.tcl.tk/man/tcl8.5/TclCmd/read.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/read.htm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T09:56:43.490

在标准 Tcl 中，相当于 C 的 scanf()：

```
scan [gets stdin] "the pattern..." var1 var2 ... 
```

但是，对于期望，您需要使用`expect_user`：

```
expect_user -re "(.*)\n"
scan $expect_out(1,string) "the pattern..." var1 var2 ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T08:12:38.137

如果你说的是 C#

**Console.ReadLine**应该为您完成工作！

您可以在此处获取更多详细信息 - [http://msdn.microsoft.com/en-us/library/system.console.readline.aspx](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)

# html - Outlook 2007/2010 中的 Vspace

> ID：10614432
> 
> 赞同：0
> 
> 时间：2012-05-16T08:10:38.300
> 
> 标签：html, email, outlook, html-email

我有一个适用于大多数电子邮件运营商的 html 时事通讯，但格式在 Outlook 中被弄乱了。我在图像标签上放置了 vspace="10" 以在图像的顶部和底部放置 10px 的边距，以便在图像和其下方的文本之间留出空间。但是，在 Outlook 中，没有拾取 vspace，文本直接显示在图像下方，中间没有空格。

有谁知道如何让它工作？我试图在图像上放置 10px 的边距底部，但这同样不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:43:33.877

使用嵌套表并将行高定义为 10px 可能更容易。您在 Outlook 2007+ 中遇到的问题是 Word HTML 渲染，它以自己的特殊方式处理 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:35:58.567

使用 HTML 电子邮件，不同浏览器之间存在许多细微差别。我从创建电子邮件中学到的一件事是它需要非常简单。Outlook 不支持边距和填充（由于它使用文字渲染引擎）。

**解决方案**

将图像和空间替换为包含 2 个间隔 gif 和中间图像的表格。例如（您需要使用图像的绝对路径）：

```
<table cellpadding="0" cellspacing="0">
  <tr>
    <td>
      <img style="display:block" border="0" src="images/spacer.gif" width="IMAGEWIDTH" height="10" />
    </td>
  </tr>
  <tr>
    <td>
      <img style="display:block" border="0" src="YOUR IMAGE" width="" height="" />
    </td>
  </tr>
  <tr>
    <td>
      <img style="display:block" border="0" src="images/spacer.gif" width="IMAGEWIDTH" height="10" />
    </td>
  </tr>
</table> 
```

# node.js - 使用 winston 的文件轮换出乎意料

> ID：10614435
> 
> 赞同：0
> 
> 时间：2012-05-16T08:10:42.643
> 
> 标签：node.js, winston

我创建了一个[Winston](https://github.com/flatiron/winston)记录器：

```
_logger.add(logger.transports.File, {
    filename: conf_fileName,
    timestamp:'true',
    maxsize: 1024,
    maxFiles: 2
}); 
```

但几个小时后，我有很多大小约为 2kb 的文件。记录器定义有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:23:03.583

以`maxsize`字节为单位 - 因此您将日志文件限制为 1KB（您的操作系统可能将其报告为 2KB）。

如果你想要 1MB，试试`maxsize: 1048576`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T16:38:51.003

存在一个问题，其中设置`maxFiles`和`maxsize`设置都不符合您的`maxFiles`设置。

[在问题跟踪器上查看此问题](https://github.com/winstonjs/winston/issues/397)

# asp.net - MVC 4 中的运行时动态捆绑和缩小

> ID：10614441
> 
> 赞同：19
> 
> 时间：2012-05-16T08:11:08.707
> 
> 标签：asp.net, asp.net-mvc-4, optimization, bundle, asp.net-optimization

我想知道是否有人可以帮助我使用 MVC 4 附带的新优化命名空间进行捆绑和缩小。我有一个多租户应用程序，我想根据每个用户的设置来决定应该加载哪些 js 文件。一种方法是预先创建所有捆绑包并根据用户的设置更改 resolvebundleurl 的虚拟路径，但这感觉不是正确的方法。此外，我在基于用户设置的 cshtml 视图中有动态 css，我希望在运行时将其缩小。

有什么建议么？我还在其他问题中看到很多关于查看 Requestreduce 的反应，但它们都来自同一个用户。

处理这两种情况的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-02T04:09:00.033

您可以采用的一种方法是在应用程序启动时动态构建捆绑包。因此，如果您的脚本位于`~/scripts`您可以执行以下操作：

```
Bundle bundle = new Bundle("~/scripts/js", new JsMinify());

if (includeJquery == true) {     
  bundle.IncludeDirectory("~/scripts", "jquery-*");
  bundle.IncludeDirectory("~/scripts", "jquery-ui*");
} 

if (includeAwesomenes == true) {
  bundle.IncludeDirectory("~/scripts", "awesomeness.js");
}

BundleTable.Bundles.Add(bundle); 
```

然后你的标记看起来像这样

`@Scripts.Render("~/Scripts/Libs/js")`

**注意：**我正在使用位于[此处](http://nuget.org/packages/microsoft.web.optimization)的 system.web.optimization（现为 Microsoft.AspNet.Web.Optimization）的最新 nuget 包。Scott Hanselman 有一篇关于它的好[帖子。](http://www.hanselman.com/blog/VisualStudio2012RCIsReleasedTheBigWebRollup.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-26T06:57:25.100

我写了一个辅助函数来动态缩小我的 css & js

```
 public static IHtmlString RenderStyles(this HtmlHelper helper, params string[] additionalPaths)
    {
        var page = helper.ViewDataContainer as WebPageExecutingBase;
        if (page != null && page.VirtualPath.StartsWith("~/"))
        {
            var virtualPath = "~/bundles" + page.VirtualPath.Substring(1);
            if (BundleTable.Bundles.GetBundleFor(virtualPath) == null)
            {
                var defaultPath = page.VirtualPath + ".css";
                BundleTable.Bundles.Add(new StyleBundle(virtualPath).Include(defaultPath).Include(additionalPaths));
            }
            return MvcHtmlString.Create(@"<link href=""" + HttpUtility.HtmlAttributeEncode(BundleTable.Bundles.ResolveBundleUrl(virtualPath)) + @""" rel=""stylesheet""/>");
        }
        return MvcHtmlString.Empty;
    }

    public static IHtmlString RenderScripts(this HtmlHelper helper, params string[] additionalPaths)
    {
        var page = helper.ViewDataContainer as WebPageExecutingBase;
        if (page != null && page.VirtualPath.StartsWith("~/"))
        {
            var virtualPath = "~/bundles" + page.VirtualPath.Substring(1);
            if (BundleTable.Bundles.GetBundleFor(virtualPath) == null)
            {
                var defaultPath = page.VirtualPath + ".js";
                BundleTable.Bundles.Add(new ScriptBundle(virtualPath).Include(defaultPath).Include(additionalPaths));
            }
            return MvcHtmlString.Create(@"<script src=""" + HttpUtility.HtmlAttributeEncode(BundleTable.Bundles.ResolveBundleUrl(virtualPath)) + @"""></script>");
        }
        return MvcHtmlString.Empty;
    } 
```

用法

~/views/Home/Test1.cshtml

~/Views/Home/Test1.cshtml.css

~/Views/Home/Test1.cshtml.js

在 Test1.cshtml

```
@model object
@{
   // init
}@{

}@section MainContent {
  {<div>@{
     if ("work" != "fun")
     {
        {<hr/>}
     }
  }</div>}
}@{

}@section Scripts {@{
  {@Html.RenderScripts()}
}@{

}@section Styles {@{
  {@Html.RenderStyles()}
}} 
```

但是 ofcoz，我把我的大部分 sripts、样式放在 ~/Scripts/ *.js、~/Content/* .css

并在 Appp_Start 中注册它们

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T23:22:15.083

我们很早就考虑过支持动态捆绑包，但这种方法的根本问题是多服务器场景（即云）不起作用。如果未预先定义所有捆绑包，则任何发送到与提供页面请求的服务器不同的服务器的捆绑包请求都将获得 404 响应（因为捆绑包定义仅存在于处理页面请求的服务器上）。因此，我建议预先创建所有捆绑包，这是主线方案。捆绑包的动态配置也可以工作，但这不是完全支持的方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-27T00:43:16.237

更新：不确定是否重要，但我使用的是 MVC 5.2.3 和 Visual Studio 2015，问题有点老了。

但是，我制作了在 _viewStart.cshtml 中工作的动态捆绑。我所做的是创建了一个帮助类，将捆绑包存储在捆绑包字典中。然后在应用程序启动时，我从字典中提取它们并注册它们。我制作了一个静态布尔“bundlesInitialzed”，以便捆绑只添加到字典中一次。

示例助手：

```
public static class KBApplicationCore: .....
{
    private static Dictionary<string, Bundle> _bundleDictionary = new Dictionary<string, Bundle>();
    public static bool BundlesFinalized { get { return _BundlesFinalized; } }
    /// <summary>
    /// Add a bundle to the bundle dictionary
    /// </summary>
    /// <param name="bundle"></param>
    /// <returns></returns>
    public static bool RegisterBundle(Bundle bundle)
    {
        if (bundle == null)
            throw new ArgumentNullException("bundle");
        if (_BundlesFinalized)
            throw new InvalidOperationException("The bundles have been finalized and frozen, you can only finalize the bundles once as an app pool recycle is needed to change the bundles afterwards!");
        if (_bundleDictionary.ContainsKey(bundle.Path))
            return false;
        _bundleDictionary.Add(bundle.Path, bundle);
        return true;
    }
    /// <summary>
    /// Finalize the bundles, which commits them to the BundleTable.Bundles collection, respects the web.config's debug setting for optimizations
    /// </summary>
    public static void FinalizeBundles()
    {
        FinalizeBundles(null);
    }
    /// <summary>
    /// Finalize the bundles, which commits them to the BundleTable.Bundles collection
    /// </summary>
    /// <param name="forceMinimize">Null = Respect web.config debug setting, True force minification regardless of web.config, False force no minification regardless of web.config</param>
    public static void FinalizeBundles(bool? forceMinimize)
    {
        var bundles = BundleTable.Bundles;
        foreach (var bundle in _bundleDictionary.Values)
        {
            bundles.Add(bundle);
        }
        if (forceMinimize != null)
            BundleTable.EnableOptimizations = forceMinimize.Value;
        _BundlesFinalized = true;
    }        
} 
```

示例 _ViewStart.cshtml

```
@{

    var bundles = BundleTable.Bundles;
    var baseUrl = string.Concat("~/App_Plugins/", KBApplicationCore.PackageManifest.FolderName, "/");
    //Maybe there is a better way to do this, the goal is to make the bundle configurable without having to recompile the code
    if (!KBApplicationCore.BundlesFinalized)
    {
        //Note, you need to reset the application pool in order for any changes here to be reloaded as the BundlesFinalized property is a static field that will only reset to false when the app restarts.
        Bundle mainScripts = new ScriptBundle("~/bundles/scripts/main.js");
        mainScripts.Include(new string[] {
            baseUrl + "Assets/lib/jquery/jquery.js",
            baseUrl + "Assets/lib/jquery/plugins/jqcloud/jqcloud.js",
            baseUrl + "Assets/lib/bootstrap/js/bootstrap.js",            
            baseUrl + "Assets/lib/bootstrap/plugins/treeview/bootstrap-treeview.js",   
            baseUrl + "Assets/lib/angular/angular.js",
            baseUrl + "Assets/lib/ckEditor/ckEditor.js"      
        });
        KBApplicationCore.RegisterBundle(mainScripts);

        Bundle appScripts = new ScriptBundle("~/bundles/scripts/app.js");
        appScripts.Include(new string[] {
            baseUrl + "Assets/app/app.js",
            baseUrl + "Assets/app/services/*.js",
            baseUrl + "Assets/app/directives/*.js",
            baseUrl + "Assets/app/controllers/*.js"
        });
        KBApplicationCore.RegisterBundle(appScripts);

        Bundle mainStyles = new StyleBundle("~/bundles/styles/main.css");
        mainStyles.Include(new string[] {
           baseUrl + "Assets/lib/bootstrap/build/less/bootstrap.less",
           baseUrl + "Assets/lib/bootstrap/plugins/treeview/bootstrap-treeview.css",   
           baseUrl + "Assets/lib/ckeditor/contents.css",
           baseUrl + "Assets/lib/font-awesome/less/font-awesome.less",
           baseUrl + "Assets/styles/tlckb.less"
        });
        mainStyles.Transforms.Add(new BundleTransformer.Core.Transformers.CssTransformer());
        mainStyles.Transforms.Add(new CssMinify());
        mainStyles.Orderer = new BundleTransformer.Core.Orderers.NullOrderer();
        KBApplicationCore.RegisterBundle(mainStyles);

        KBApplicationCore.FinalizeBundles(true); //true = Force Optimizations, false = Force non Optmizations, null = respect web.config which is the same as calling the parameterless constructor.
    }
} 
```

注意：这应该被更新为使用线程锁定来防止 2 个请求在第一个退出之前进入捆绑代码。

其工作方式是在应用程序池重置后对站点的第一个请求运行视图启动。它调用助手上的 RegisterBundle，并按照调用 RegisterBundles 的顺序将 ScriptBundle 或 StyleBundle 传递给字典。

当 FinalizeBundles 被调用时，您可以指定 True ，无论 web.config 调试设置如何，都将强制优化，或者将其保留为 null 或使用没有该参数的构造函数以使其尊重 web.config 设置。传递 false 将强制它不使用优化，即使 debug 为 true。FinalizeBundles 在捆绑表中注册捆绑包并将 _BundlesFinalized 设置为 true。

一旦完成，再次调用 RegisterBundle 的尝试将引发异常，此时它被冻结。

此设置允许您添加新捆绑包以查看启动并重置应用程序池以使其生效。我写这篇文章的最初目标是因为我正在制作其他人会使用的东西，所以我希望他们能够完全更改前端 UI，而无需重建源代码来更改捆绑包。

# css - CSS：百分比最小高度元素嵌套在百分比最小高度元素中

> ID：10614445
> 
> 赞同：3
> 
> 时间：2012-05-16T08:11:26.143
> 
> 标签：css

我想让 html、body 和 wrapper 元素的最小高度都为 100% 以覆盖整个查看窗口，但我发现我只能让 html 遵守这个声明。

```
html, body, #wrapper {
        min-height:100%;
        }

html {
        border: 2px red solid;
        }

body{
        border: 2px blue solid;
        }

#wrapper {
        border: 2px pink dotted;
        } 
```

创建一个简单的 html 文档，其中只有一个 #wrapper div，其中可以包含内容或不包含内容。如果使用像素的最小高度，元素会服从它，但是当我使用百分比时，只有 html 会起作用。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:42:30.433

使用`height`而不是`min-height`.

```
body,html{
    height: 100%;
}
#wrapper {
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:40:53.733

这绝对会帮助你...

[http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

# jquery - 使用 animate-scrollTo 时 jQuery 闪烁

> ID：10614446
> 
> 赞同：31
> 
> 时间：2012-05-16T08:11:26.830
> 
> 标签：jquery, html, cross-browser

`scrollTo`当它被 jQuery 函数调用时，我遇到了这个函数的问题`animate`。

这是我的代码：

```
$("#button").click(function(){
    $("body").animate({scrollTop: 1400},"slow");
}); 
```

当我单击按钮时，闪烁出现在正文滚动之前。例如，我在（滚动位置）1000，当我单击按钮时，发生了以下情况：

1.  （滚动位置）1400 上的页面/图像出现，看起来我已经去了（位置）1400
2.  然后它再次移动到（位置）1000，这发生得如此之快，看起来像闪烁
3.  最后它像普通滚动一样滚动到1400..

在 Firefox 上它总是出现，有时也出现在 chrome 上。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-26T20:36:34.027

我有同样的闪烁问题。它是由触发函数的链接中的哈希锚引起的。用 preventDefault() 修复它：

```
$("#button").click(function(e){
    e.preventDefault();
    $("body").animate({scrollTop: 1400},"slow");
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-16T15:03:38.000

```
<a href="#" onclick="return scrollFromTop(1400, 2000);">scroll</a>

function scrollFromTop(offset, duration) {
    $('body').stop(true).animate({scrollTop: offset}, duration);
    return false;
}); 
```

有同样的问题...通过在点击处理程序上返回 false 来修复它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-27T00:34:48.760

通过像这样停止动画解决了这个问题：

```
$('body,html').bind('scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove', function(e){
            if ( e.which > 0 || e.type == "mousedown" || e.type == "mousewheel" || e.type == "touchmove"){
                $("html,body").stop();
            }
        })
```

在那里找到：[当用户手动滚动时，Jquery .animate() 停止滚动？](https://stackoverflow.com/questions/18445590/jquery-animate-stop-scrolling-when-user-scrolls-manually)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-25T17:49:48.043

在 laravel 项目中使用“barryvdh/laravel-debugbar”包时遇到了同样的问题。如果这是您的情况，请禁用它。

# c# - 在 Entity Framework 4.1 中更新外键关系

> ID：10614448
> 
> 赞同：0
> 
> 时间：2012-05-16T08:11:38.067
> 
> 标签：c#, asp.net-mvc, entity-framework-4.1

我想我已经阅读了有关此问题的所有文章和堆栈溢出问题，但无法找到解决方案。让我从我的模型开始

```
public class Entry
{
    public Entry ()
    {
        DateEntered = DateTime.Now;
    }

    public int Id { get; set; }
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }
    [Required]
    public string Email { get; set; }
    public string Number { get; set; }
    public string FbId { get; set; }
    [ReadOnly(true)]
    public DateTime DateEntered { get; set; }
    public string AccessToken { get; set; }

    //Relationsips
    public Backgrounds Background { get; set; }
    public Cars Car { get; set; }
}

public class Backgrounds
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Filename { get; set; }
}

public class Cars
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string FileName { get; set; }
} 
```

现在在我的控制器中，我正在更新条目。如下

```
 // PUT /api/entries/5
    public HttpResponseMessage Put(Entry entry)
    {
        if(ModelState.IsValid)
        {

            _db.Entries.Attach(entry);
            _db.Entry(entry).State = EntityState.Modified;
            _db.SaveChanges();

            return new HttpResponseMessage(HttpStatusCode.NoContent);
        }

        throw new HttpResponseException(HttpStatusCode.BadRequest);
    } 
```

我的 Entry 模型得到正确更新，但如果 entry.Background.Name 发生更改，则不会将其保存到数据库中。我的控制器正在接受整个入口模型，包括它的关系 => 背景和汽车。但是，更改为关系的任何值都不会更新或反映。无需查询数据库然后更新的任何优雅的解决方案？我不想在更新之前进行任何额外的查询或查找。

谢谢

泰隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:08:40.463

您必须手动告知 EF 对对象图所做的所有更改。您只告诉 EF 对条目实例的更改，但您没有告诉它对相关实体或关系本身的任何更改。没有优雅的方法可以解决这个问题。您通常有两种选择：

*   您将使用一些 DTO 代替您的实体，并且这些 DTO 将具有一些标志，例如`IsDirty`- 当您将对象图接收回控制器时，您将从 DTO 重建实体并基于`IsDirty`. 此解决方案需要进一步扩展，例如，如果您的客户也可以删除关系。
*   您将从数据库中查询对象图，并将传入的更改合并到从数据库中检索到的实体。

有一些部分解决方案，例如通过将所有相关对象的状态设置为已修改和标识新对象来强制保存对所有相关对象的更改，`Id == 0`但同样这些解决方案仅适用于特定场景。

关于这个问题的更复杂的[讨论。](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)

# joomla - Joomla 链接不起作用

> ID：10614450
> 
> 赞同：0
> 
> 时间：2012-05-16T08:11:46.517
> 
> 标签：joomla, hyperlink

我有两个网站

[http://buildingindustry.org/](http://buildingindustry.org/)

和他的副本

[http://beauty-industry.org](http://beauty-industry.org)

最后一个是从第一个站点的备份中恢复的。第二个站点上的链接不起作用。第二个站点会发生什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:00:26.300

尝试刷新/清除缓存和重定向扩展中的任何条目。应该做的伎俩。如果您使用任何 SEF 组件，请不要忘记在此处删除缓存。

# php - PHP Heroku 后台工作者？

> ID：10614454
> 
> 赞同：10
> 
> 时间：2012-05-16T08:12:01.960
> 
> 标签：php, heroku, background-process

我正在使用 Heroku 运行 PHP 应用程序，我需要设置与外部 API 对话并写入我的数据库的后台工作人员，Heroku 有很多关于为 Ruby 设置工作人员但不是为 PHP 设置工作人员的信息。

这在使用 PHP 的 Heroku 上很容易实现吗？

我从来没有处理过启动后台进程，我似乎找不到任何详细说明它的文档......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T20:47:05.277

添加以下环境变量：

```
# Add this config
$ heroku config:add LD_LIBRARY_PATH=/app/php/ext:/app/apache/lib 
```

然后您可以将工作人员添加到您的 Procfile 中。

```
worker: cd ~/www/ && ~/php/bin/php worker.php 
```

# ios - 如何在 Apple 本地/推送通知消息中添加图像？

> ID：10614455
> 
> 赞同：1
> 
> 时间：2012-05-16T08:12:09.080
> 
> 标签：ios, push-notification, apple-push-notifications, uilocalnotification

在某些 iOS 游戏中，我在本地/推送通知中看到图像：心形、微笑……我如何获得此功能？此时我已经在使用 en.lproj 和 Localizable.strings。可能是那里的解决方案？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:25:59.197

我猜这不是像素图形意义上的真正“图像”，而是来自 Emojii 键盘的字符，您可以将其添加到 iPhone 上的任何文本中。

[然后它与在 iOS 上通过 PHP 在推送通知中发送表情符号的](https://stackoverflow.com/questions/7012485/sending-emoji-in-push-notifications-via-php-on-ios)问题相同。

# jquery - 获取同一父级中元素的文本

> ID：10614458
> 
> 赞同：1
> 
> 时间：2012-05-16T08:12:23.167
> 
> 标签：jquery

我有以下 HTML。我试图实现的是在选择框`h4`调用的更改函数中获取返回文本`#my_id`。

```
<div class="product_box">
    <h4>title</h4>
    <select id="my_id">
        <option value="1"></option>
        <option value="2"></option>
        <option value="4"></option>
    </select>
</div> 
```

```
$("#ajax_call").change(function(){
    var count = $('#ajax_call :selected').val();
    var prod_modul =$('#ajax_call').parents();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:18:16.080

尝试使用父元素作为上下文，如下所示：

```
$("#my_id").change(function() {
    var $parent = $(this).closest(".product_box");
    var text = $("h4", $parent).text();
}); 
```

或者，如果您可以保证`h4`始终**是**的前一个元素`select`，那么您可以使用`prev()`：

```
$("#my_id").change(function() {
    var text = $(this).prev().text();
}); 
```

我的偏好是前者，因为它不依赖于元素的位置保持不变——这永远无法真正得到保证。始终`next()`谨慎`prev()`使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:21:31.810

使用[兄弟姐妹](http://api.jquery.com/siblings/)：

```
$("#my_id").change(function() {
    var text = $(this).siblings("h4").text();
    //.....
}); 
```

[**演示**](http://jsfiddle.net/eBPvv/)

# javascript - 如何修改时间正则表达式？

> ID：10614460
> 
> 赞同：0
> 
> 时间：2012-05-16T08:12:29.610
> 
> 标签：javascript, regex

我是正则表达式的新手。

我需要通过正则表达式检查这个时间 18:00(00:00, 01:00, 05:12, 这种格式的任何时间)，它是否正确。

这是我的变体：

```
/[0-9][0-9]:[0-9][0-9]/ 
```

我可以将 [0-9][0-9] 更改为 2*[0-9] 之类的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:19:05.613

如果你特别想匹配`18:00`你应该使用`/^\d{2}:\d{2}$/`. 到目前为止提供的答案将匹配`aaa12:99ddd`。`^`and是锚点，将`$`指示正则表达式专门匹配给定的字符串。

如果您在 24 小时验证正则表达式之后，您可以使用这个：（`/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/`取自[此处](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:17:01.797

你也可以这样写：`/^\d{2}:\d{2}$/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:15:41.060

您可以通过添加重复子句来修改它：

```
/^[0-9]{2}:[0-9]{2}/ 
```

但是你应该添加开始和结束子句：

```
/^[0-9]{2}:[0-9]{2}$/ 
```

# javascript - easeljs 不适用于 Android 2

> ID：10614464
> 
> 赞同：1
> 
> 时间：2012-05-16T08:12:38.440
> 
> 标签：javascript, android, easeljs

我在 RaphaelJS 中做了一个 Jigsaw Puzzle，但发现它在 Android 2x 上不起作用，因为默认浏览器中的 SVG 支持仅在 Android 3x 版本之后可用。

因此，我一直在寻找合适的具有拖放功能的 HTML5 Javascript 库替代品，以便我可以在其中构建 Jigsaw Puzzle。[EaselJS 看起来很有前途，但是当我尝试在其网站http://createjs.com/#!/EaselJS/demos/dragdrop](http://createjs.com/#!/EaselJS/demos/dragdrop)上播放拖放演示时，它不起作用，我只能看到 Android 浏览器中的一个红色块.

你能帮我确定可以在 Android 2.x 环境中工作的合适的 JS 库吗？

-提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:08:37.910

我认为它不起作用，因为 Canvas.toDataURL 在早期的 Android 版本中没有实现。请参阅此处：[http](http://code.google.com/p/android/issues/detail?id=7901) ://code.google.com/p/android/issues/detail?id=7901 。如果您想支持没有此 API 的 Android，您可以找到解决方法。

# iphone - 在newstand+iphone上订阅这封信

> ID：10614467
> 
> 赞同：0
> 
> 时间：2012-05-16T08:12:48.587
> 
> 标签：iphone, newsstand-kit

我想订阅 iphone 报亭功能中的信件或杂志。任何人都可以帮助我..可以这样做吗？如果可以，请指导我..怎么做。github或任何地方有没有可用的url或示例代码...请与我分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T13:45:19.930

如果您正在寻找如何与报亭框架集成，您可以[在这里找到我的答案](https://stackoverflow.com/questions/9584061/how-to-integrate-the-newsstand-in-app/9662228#9662228)

# asp.net-mvc - 如何在asp.net mvc中获取当前查看产品的ID？

> ID：10614470
> 
> 赞同：0
> 
> 时间：2012-05-16T08:13:00.423
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个用户可以滚动的产品（图像）列表（我使用 Jquery 来做）&他们的 id 与每个图像相关联，如果用户单击按钮（添加到购物车），我希望该产品应该添加到大车。我不知道如何获取当前显示产品的 ID。请帮助我是 MVC 的新手。

看法

```
@using (Html.BeginForm("Index","Product"))
{
    <input type=submit value="Add To Cart"/>
} 
```

控制器

```
 [HttpPost]
    public ActionResult Index(MyUsers user)
    {
        string s = user.Name;
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:00:18.467

如果每个产品都有一个“添加到图表”按钮，请在每个按钮旁边添加一个带有适当产品 ID 的隐藏字段。

```
@using (Html.BeginForm("Index","Product"))
{
    @Html.Hidden("ProductID", productID)
    <input type="submit" value="Add To Cart"/>
} 
```

然后将参数 ProductID 添加到操作方法中。

```
[HttpPost]
public ActionResult Index(MyUsers user, int productID)
{
    // Your code...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:49:56.673

看法：

```
@using (Html.BeginForm()) 
{ 
    foreach(Product product in Model)
    {
        @Html.LabelFor(model => product.Name)
        @Html.ActionLink("Add To Cart", "Add", "Product", new { id = product.Id })
    }
} 
```

控制器：

```
public ActionResult Add(int id)   
{   
    // Your code...   
} 
```

# hibernate - 如何不持久化属于活动会话（并已映射）的对象

> ID：10614476
> 
> 赞同：0
> 
> 时间：2012-05-16T08:13:32.110
> 
> 标签：hibernate

对于我正在处理的项目，我正在添加导入/导出功能。这工作正常，没有问题。

我现在要做的是有一个名为“dryRun”的选项，它允许用户在实际执行任何操作之前测试导入，然后返回报告。

所以，我的设置是：

1.  通过spring mvc（使用OpenSessionInView）获取导入数据
2.  将其反序列化为我的域类（这是实际映射的休眠类）
3.  扫描所有内容并确保引用等都正常。
4.  我所有的服务都有一个@Transactional

这大部分都可以，但是在某个地方..触发了保存（我从不调用保存），并且我的分组对象抱怨瞬态引用..这是正确的，因为它没有保存..我认为这是某种默认模式休眠具有，因为分组对象引用另一个映射的对象。那么我怎样才能确保休眠永远不会保存任何东西？不删除 @Transactional 和 OpenSessionInView （正常情况下需要）

有任何想法吗？

问候，莫腾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:36:23.637

你说

> 某处..触发保存

那个“某处”在你得到的堆栈跟踪中，但有例外。

**[编辑]**堆栈跟踪基本上说“方法 MetaDataController.importXml() 用 @Transactional 注释”。当它返回时，Hibernate 尝试按应有的方式提交事务，然后，它偶然发现了一个未保存的依赖项`OrganisationUnitGroup`（是的，如果它会说*哪个字段*包含依赖项会很好，因为 Hibernate 也知道这一点）。

有几种解决方案：

1.  创建两个导入方法。新的，`.importXmlDryRun()`不能有`@Transactional`注释。这*可能会*奏效，但我的直觉提醒我注意问题，即使我现在无法说出它们的名字。

2.  请求空运行时抛出异常`.importXml()`以中止事务，并在默认处理程序中忽略此异常。该异常将导致 Hibernate 回滚。这是最安全的解决方案。

3.  获取休眠会话并调用`clear()`（[文档](https://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/Session.html#clear%28%29)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:22:36.847

Hibernate 隐式存储实体中的更改。这是它持久性无知的一部分，这实际上是非常重要的。（请参阅[此问题](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance)。）您可以通过将刷新模式设置为从不来关闭它，但通常不建议这样做。如果您在导入代码中有查询，他们不会考虑内存的变化并返回不同的结果（这可能会破坏空运行的目的）。

选项：

*   让您执行并在最后回滚所有内容。它仅在您不想同时更改数据库中的某些内容时才有效（例如，发生空运行的日志）。
*   设置刷新模式 = 从不，避免调用“保存”和“更新”。这有点骇人听闻。
*   将所有对干运行重要的东西拉到一个不会更改任何实体并且只运行这个的验证类。这是最复杂但也是最干净的解决方案。

# apache - 请帮助 htaccess 重定向规则（URL 中的通配符）

> ID：10614477
> 
> 赞同：0
> 
> 时间：2012-05-16T08:13:34.783
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在从头开始重建一个站点，但是我将要替换的站点已经在 SEO 方面排名很好。

我有许多页面格式如下：

```
http://URL/SECTION/ANOTHERSECTION/send-me-information-on-PRODUCTNAME.php 
```

“send-me-information-on-”在所有产品中都是一致的。

我可以基于每个产品编写重定向，但我有超过 200 种产品，所以使用重写规则处理这个会很棒。

我需要实现的是以下新 URL：

```
http://URL/SECTION/ANOTHERSECTION/product-information-request.php?product=PRODUCTNAME 
```

现在我明白了出于 SEO 的目的，这可能不是最好的方法，但我想维护一个信息请求页面。

我认为最好的方法是使用正则表达式来匹配字符串，并设置我将在结果 URL 中使用的环境变量。不过，我对 .htaccess 规则不太熟悉。

谁能帮我实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:20:56.860

```
RewriteRule ^/([^/]+)/([^/]+)/send-me-information-on-([^.]+).php$ $1/$2/product-information-request.php?product=$3 [QSA,L] 
```

# c# - 事件处理程序和接口

> ID：10614478
> 
> 赞同：21
> 
> 时间：2012-05-16T08:13:35.533
> 
> 标签：c#, .net, events, interface

我有一个名为 IDataIO 的接口：

```
public interface IDataIO
{
  event DataReceivedEvent DataReceived;
  //.....more events,methods and properties
} 
```

我也有多个实现这个接口的类，即`UdpIO`, `TcpIO`, `SerialIO`。

现在，我有一个`IO`类可以让我在不同的输入/输出硬件之间切换。此类的每个实例都有一个属性，`CurrentIODevice`可以是或之一。分配此属性后，我将 1 个或多个处理程序附加到 ，以便在收到传入数据时通知我的 GUI，以及需要通知的其他类。`SerialIO``UdpIO``TcpIO``DataReceivedEvent`

```
public class IO
{
  IDataIO CurrentIODevice;

  public IO()
  {
    SerialIO serial = new SerialIO();
    TcpIO tcp = new TcpIO();
    UdpIO udp = new UdpIO();
    CurrentIODevice = serial;
  }
} 
```

我还有一个`IOManager`包含多个`IO`对象的类。

```
public class IOManager
{
  List<IO> Ports = new List<IO>();
  public IOManager()
  {
    Ports.Add(new IO());
    Ports.Add(new IO());
  }

  Ports[0].CurrentIODevice = serial;
  Ports[0].CurrentIODevice.DataReceivedHandler += MyGuiUpdate;
  Ports[0].CurrentIODevice.DataReceivedHandler += MyDataProcessing;
} 
```

我担心（这不是问题 atm）是我将如何在运行时在不同的 IDataIO 接口之间进行更改。

在运行时执行以下语句的效果是什么：

```
//i know this is illegal but just to demonstrate
IOManager.Ports[0].CurrentIODevice = tcp; 
```

事件处理程序是否仍然正常运行（并且正确）？

我是否需要在分配 CurrentIODevice 之前取消分配事件，然后再重新分配处理程序？如果是这种情况，我可以看到这种方法变得非常混乱，所以如果有人有更好的方法来解决这个问题，我会全神贯注:)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T08:16:22.367

不，您的处理程序将**无法工作**，因为它们已附加到旧对象。接口提供...对象的接口，将其视为一种**合同**，但它们本身并不是不同的对象。

如果您需要在接口的不同实现之间切换（在运行时）并保持所有处理程序正常工作，您必须对接口本身具有相同的对象引用，一种[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)（或多或少）。

例如，在您的情况下，您可以在对象中实现`IDataIO`接口。`DataIO`它将公开一个属性（或方法，我认为它的意图更清楚）以在该接口的不同实现（串行、TCP 或其他）之间切换。它将是唯一一个将事件处理程序附加到该接口的对象（当具体实现发生变化时，它将删除处理程序）。该对象的用户将始终看到它，无论它使用的是什么具体实现。

## 例子

这是一个解释这个概念的小例子。通用接口是这样的：

```
interface IDataIO
{
    void Write(byte[] data);

    byte[] Read();

    event EventHandler DataReceived;
} 
```

这是IDataIO的具体实现，其他类直接使用这个类：

```
sealed class DataIO : IDataIO
{
    public void SetChannel(IDataIO concreteChannel)
    {
        if (_concreteChannel != null)
            _concreteChannel.DataReceived -= OnDataReceived;

        _concreteChannel = concreteChannel;
        _concreteChannel.DataReceived += OnDataReceived;
    }

    public void Write(byte[] data)
    {
        _concreteChannel.Write(data);
    }

    public byte[] Read()
    {
        return _concreteChannel.Read();
    }

    public event EventHandler DataReceived;

    private IDataIO _concreteChannel;

    private void OnDataReceived(object sender, EventArgs e)
    {
        EventHandler dataReceived = DataReceived;
        if (dataReceived != null)
            dataReceived(this, e);
    }
} 
```

最后是一些测试代码：

```
class Test
{
    public Test()
    {
        _channel = new TcpIO();

        _channel.DataReceived += OnDataReceived;
    }

    public void SetChannel(IDataIO channel)
    {
        _channel.SetChannel(channel);

        // Nothing will change for this "user" of DataIO
        // but now the channel used for transport will be
        // the one defined here
    }

    private void OnDataReceived(object sender, EventArgs e)
    {
        // You can use this
        byte[] data = ((IDataIO)sender).Read();

        // Or this, the sender is always the concrete
        // implementation that abstracts the strategy in use
        data = _channel.Read();
    }

    private DataIO _channel;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:39:34.080

显然你应该考虑[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。我先贴出代码，稍后再解释：

```
public interface IDataIO
{
    event DataReceivedEvent DataReceived;

    //this the new added method that each IO type should implement.
    void SetStrategy();
}

public class SerialIO : IDataIO
{
    public void SetStrategy()
    {
        //put the code that related to the Serial IO.
        this.DataReceivedHandler += MyGuiUpdate;
        this.DataReceivedHandler += MyDataProcessing;
    }
}

public class TcpIO : IDataIO
{
    public void SetStrategy()
    {
        //put the code that related to the Tcp IO.
        //I will not implement it because it is a demo.
    }
}

public class UdpIO : IDataIO
{
    public void SetStrategy()
    {
        //put the code that related to the Udp IO.
        //I will not implement it because it is a demo.
    }
}

public class IO
{
    IDataIO port = new IDataIO();

    public void SetIOType(IDataIO ioType)
    {
        this.port = ioType;

        port.SetStrategy();
    }

}

public class IOManager
{
    List<IO> ports = new List<IO>();

    SerialIO serial = new SerialIO();
    TcpIO tcp = new TcpIO();

    ports[0].SetIOType(serial);
    ports[1].SetIOType(tcp);
} 
```

1.  接口 IDataIO 定义了所有 IO 类型应该实现的基础。

2.  从 IDataIO 派生的 SerialIO、TcpIO、UdpIO 类实现方法 SetStrategy() 以满足各自的需要。

3.  IO类拥有一个字段（命名端口），引用一个IDataIO类型，该字段可以在运行时通过调用IO类中定义的SetIOType()方法设置为某种IO类型。一旦调用此方法，我们就知道“端口”字段所指的类型，然后调用 SetStrategy() 方法，它将在其中一个 IO 类中运行被覆盖的方法。

4.  IOManager 类是客户端。当它需要某种 IO 类型，比如 SerialIO 时，只需要新建一个 IO 类，并通过传递一个 SerialIO 类实例调用 SetIOType() 方法，所有与 SerialIO 类型相关的逻辑都会自动设置。

希望我的描述可以帮助到你。

# spring - 找不到@RequestMapping servlet

> ID：10614480
> 
> 赞同：0
> 
> 时间：2012-05-16T08:13:49.647
> 
> 标签：spring, http-status-code-404, spring-3, jetspeed2

我有一个这样定义的控制器注释：

```
@RequestMapping(value = "/myServlet" , method = RequestMethod.GET)
      public @ResponseBody String performAction() {
        return "success";
      } 
```

此 servlet 正在通过 ajax 请求调用。但是由于某种原因，这个请求没有被映射。当我尝试通过 URL 直接导航到 servlet 时，找不到它。没有错误被抛出。我只是在寻找一些关于如何找出我的问题可能是什么的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:21:41.437

您是否将控制器添加到`dispatcher-servlet.xml`（或您使用的任何名称）？

至少，对于每个控制器，你应该有类似的东西

```
<bean name="contollerName"  class="package.ControllerName"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:54:54.163

您是否将注解**@Controller**放在了控制器类的顶部，您已将此方法用于 RequestMapping？

如果是，请确保您没有忘记在 xml 中很好地扫描您的控制器包。

你的问题有很多猜测。请为其他人提供更多代码以更好地理解问题。

希望这对您有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:13:38.140

如果你使用注解，你应该指定 spring 它应该扫描哪些包

```
<context:component-scan base-package="your package" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T03:00:09.037

如果您使用@configuration，请务必扫描您的控制器所在的包：

@Configuration @ComponentScan(basePackages = "org.xxxx.web")

# html - 在触摸设备的浏览器中禁用双击“缩放”选项

> ID：10614481
> 
> 赞同：150
> 
> 时间：2012-05-16T08:13:58.350
> 
> 标签：html, browser, touch, zooming

我想**禁用浏览器****中指定元素**的**双击缩放**功能（在触摸设备上），**而不禁用所有缩放功能**。

 ****例如：一个元素可以被多次点击以使某事发生。这在桌面浏览器上运行良好（如预期的那样），但在触摸设备浏览器上，它会放大。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2018-11-10T04:35:38.443

***注意（截至 2020 年 8 月 4 日）：此解决方案似乎不适用于 iOS Safari v12+。一旦找到涵盖 iOS Safari 的明确解决方案，我将更新此答案并删除此注释。***

**纯 CSS 解决方案**

添加`touch-action: manipulation`到要禁用双击缩放的任何元素，例如以下`disable-dbl-tap-zoom`类：

```
.disable-dbl-tap-zoom {
  touch-action: manipulation;
}
```

```
<button>plain button</button>

<button class="disable-dbl-tap-zoom">button with disabled double-tap zoom</button>

<p>A <b>plain</b> paragraph. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.</p>

<p class="disable-dbl-tap-zoom">A paragraph <b>with disabled double-tap zoom</b>. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.</p>
```

从[`touch-action`](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action#manipulation)文档（强调我的）：

> **操纵**
> 
> 启用平移和捏缩放手势，但***禁用***其他非标准手势，例如***双击缩放***。

此值适用于 Android 和 iOS。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-05-16T08:17:51.307

```
<head>
<title>Site</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
etc...
</head> 
```

我最近使用过它，它在 iPad 上运行良好。尚未在 Android 或其他设备上进行测试（因为该网站将仅在 iPad 上显示）。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2015-02-26T20:40:04.870

我知道这可能已经过时了，但我找到了一个非常适合我的解决方案。无需疯狂的元标记和停止内容缩放。

~~我不是 100% 确定它是如何跨设备的~~，但它完全按照我的意愿工作。

```
$('.no-zoom').bind('touchend', function(e) {
  e.preventDefault();
  // Add your code here. 
  $(this).click();
  // This line still calls the standard click event, in case the user needs to interact with the element that is being clicked on, but still avoids zooming in cases of double clicking.
}) 
```

这将简单地禁用正常的点击功能，然后再次调用标准点击事件。这可以防止移动设备缩放，但在其他方面正常工作。

编辑：这现在已经过时间测试并在几个实时应用程序中运行。似乎是 100% 跨浏览器和平台。在大多数情况下，上面的代码应该可以用作复制粘贴解决方案，除非您希望在单击事件*之前进行自定义行为。*

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-06-06T08:17:22.187

我只是想正确回答我的问题，因为有些人没有阅读答案下方的评论。所以这里是：

```
(function($) {
  $.fn.nodoubletapzoom = function() {
      $(this).bind('touchstart', function preventZoom(e) {
        var t2 = e.timeStamp
          , t1 = $(this).data('lastTouch') || t2
          , dt = t2 - t1
          , fingers = e.originalEvent.touches.length;
        $(this).data('lastTouch', t2);
        if (!dt || dt > 500 || fingers > 1) return; // not double-tap

        e.preventDefault(); // double tap - prevent the zoom
        // also synthesize click events we just swallowed up
        $(this).trigger('click').trigger('click');
      });
  };
})(jQuery); 
```

我没有写这个，我只是修改它。我在这里找到了仅限 iOS 的版本：[https](https://gist.github.com/2047491) ://gist.github.com/2047491（感谢 Kablam）

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2019-01-15T22:35:29.097

CSS 全局禁用双击缩放（在任何元素上）：

```
 * {
      touch-action: manipulation;
  } 
```

> **操纵**
> 
> 启用平移和捏缩放手势，但禁用其他非标准手势，例如双击缩放。

谢谢罗斯，我的回答扩展了他的：[https ://stackoverflow.com/a/53236027/9986657](https://stackoverflow.com/a/53236027/9986657)

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-09-29T19:50:25.960

如果您需要一个**不使用 jQuery**的版本，我修改了[Wouter Konecny 的答案](https://stackoverflow.com/a/10910547/6901429)（也是通过[Johan Sundström修改](https://github.com/johan)[此要点](https://gist.github.com/johan/2047491)创建的）以使用 vanilla JavaScript。

```
function preventZoom(e) {
  var t2 = e.timeStamp;
  var t1 = e.currentTarget.dataset.lastTouch || t2;
  var dt = t2 - t1;
  var fingers = e.touches.length;
  e.currentTarget.dataset.lastTouch = t2;

  if (!dt || dt > 500 || fingers > 1) return; // not double-tap

  e.preventDefault();
  e.target.click();
} 
```

`touchstart`然后添加一个调用此函数的事件处理程序：

```
myButton.addEventListener('touchstart', preventZoom); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-12-20T06:44:27.647

您应该将 css 属性`touch-action`设置`none`为其他答案[https://stackoverflow.com/a/42288386/1128216中所述](https://stackoverflow.com/a/42288386/1128216)

```
.disable-doubletap-to-zoom {
    touch-action: none;
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-04-07T07:34:54.000

```
* {
    -ms-touch-action: manipulation;
    touch-action: manipulation;
} 
```

禁用双击以放大触摸屏。包括互联网浏览器。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-08-24T19:54:48.503

简单阻止 的默认行为`click`，`dblclick`否则`touchend`事件将禁用缩放功能。

如果您已经对其中一个事件进行了回调，只需调用`event.preventDefault()`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-23T08:01:15.757

如果像我这样的人在使用**Vue.js**时遇到此问题，只需添加[.prevent](https://vuejs.org/v2/guide/events.html#Event-Modifiers)即可：`@click.prevent="someAction"`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-15T13:55:01.267

如果您只想防止在所有设备上双击缩放，请尝试将`dblclick`按钮的事件侦听器设置为`preventDefault()`. 这对我有用！

编辑：“dblclick”中的错字

```
const button = document.querySelector('#button');

button.addEventListener('dblclick', function(el) {
  el.preventDefault();
});
```

```
<button id="button"> No double click zoom here</button>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-17T15:22:25.767

这将防止双击缩放“正文”中的元素这可以更改为任何其他选择器

```
$('body').bind('touchstart', function preventZoom(e){
            var t2 = e.timeStamp;
            var t1 = $(this).data('lastTouch') || t2;
            var dt = t2 - t1;
            var fingers = e.originalEvent.touches.length;
            $(this).data('lastTouch', t2);
            if (!dt || dt > 500 || fingers > 1){
                return; // not double-tap
            }
            e.preventDefault(); // double tap - prevent the zoom
            // also synthesize click events we just swallowed up
            $(e.target).trigger('click');

}); 
```

但这也阻止了我的点击事件在多次点击时触发，所以我不得不绑定另一个事件来触发多次点击事件

```
$('.selector').bind('touchstart click', preventZoom(e) {    
    e.stopPropagation(); //stops propagation
    if(e.type == "touchstart") {
      // Handle touchstart event.
    } else if(e.type == "click") {
      // Handle click event.
    }
}); 
```

在 touchstart 上，我添加了代码以防止缩放并触发点击。

```
$('.selector').bind('touchstart, click', function preventZoom(e){
            e.stopPropagation(); //stops propagation
            if(e.type == "touchstart") {
                // Handle touchstart event.
                var t2 = e.timeStamp;
                var t1 = $(this).data('lastTouch') || t2;
                var dt = t2 - t1;
                var fingers = e.originalEvent.touches.length;
                $(this).data('lastTouch', t2);

                if (!dt || dt > 500 || fingers > 1){
                    return; // not double-tap
                }

                e.preventDefault(); // double tap - prevent the zoom
                // also synthesize click events we just swallowed up
                $(e.target).trigger('click');

            } else if(e.type == "click") {
                // Handle click event.
               "Put your events for click and touchstart here"
            }

 }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-07T20:38:42.350

目前，截至 2022 年，这是一种变体，可以在大多数设备版本上使用；安卓/iOS。请注意，例如 iOS 14+ 会放大任何字体大小小于 1rem 16px 的文本输入字段，这也是相当资深的专业人士似乎错过的。

一个普通的*javascript*示例 - 可以进一步改进 - 例如使用逻辑来允许正常行为场景 - 所以对于您的实验。

```
document.getElementById('selectorid').addEventListener('touchend' || 'dblclick', event => { 
event.preventDefault();
event.stopImmediatePropagation();
    }, {
    passive: false
    }); 
```

这是一个覆盖面更广的示例，用于测试目的，看看它是否达到了预期的结果。这会影响在 DOM 中继承的页面上的所有元素。

```
 /* For testing purposes, overrides events that may trigger a "zoom"; note that this may cause other unexpected behavior */
 window.addEventListener('touchmove' || 'touchdowm' || 'touchend' || 'mousedown' || 'dblclick', event => {
            event.preventDefault();
            event.stopImmediatePropagation();

        }, {
            passive: false
        }); 
```

这是**一些简单的 CSS，用于覆盖测试目的**- 在页面上尝试一下，如果表单字段是什么问题，您可能会期待补救线索。尽管 16px 的最小尺寸实际上是出于可访问性问题的一厢情愿。请注意，“！important”标志不被认为是在生产部署中体现的好习惯。

```
/* CSS to test prevention of zoom when interacting with input fields */
input[type=text] {
   font-size: 1rem !important; 
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-08-16T13:58:31.250

我假设我确实有一个`<div>`输入容器区域，其中包含文本、滑块和按钮，并且想要禁止在`<div>`. 以下内容不禁止对输入区域进行缩放，也与在我的`<div>`区域外双击和缩放无关。根据浏览器应用程序存在差异。

我刚试过。

(1) 适用于 iOS 上的 Safari 和 Android 上的 Chrome，是首选方法。除了三星上的 Internet 应用程序外，它会禁用双击，而不是完全禁用双击`<div>`，但至少在处理轻击的元素上禁用。它返回`return false`，但有异常 on`text`和`range`输入。

```
$('selector of <div> input area').on('touchend',disabledoubletap);

function disabledoubletap(ev) {

    var preventok=$(ev.target).is('input[type=text],input[type=range]');

    if(preventok==false) return false; 
} 
```

(2) 对于 Android（5.1，Samsung）上的内置 Internet 应用程序（可选），禁止双击`<div>`，但禁止缩放`<div>`：

```
$('selector of <div> input area').on('touchstart touchend',disabledoubletap); 
```

(3) 对于 Android 5.1 上的 Chrome，完全禁用双击，不禁止缩放，并且在其他浏览器中对双击没有任何作用。的双击抑制`<meta name="viewport" ...>`很烦人，因为这`<meta name="viewport" ...>`似乎是一种很好的做法。

```
<meta name="viewport" content="width=device-width, initial-scale=1, 
          maximum-scale=5, user-scalable=yes"> 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2018-01-09T12:58:12.733

使用 CSS touch-events: none 完全取出所有的触摸事件。只是把这个留在这里，以防有人也有这个问题，我花了 2 个小时才找到这个解决方案，它只是一行 css。 [https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action)

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2016-11-02T10:40:17.350

开始了

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">`****

# clearcase - 区分 ClearCase 元素是否是 UCM 环境的一部分的最佳方法是什么？

> ID：10614483
> 
> 赞同：1
> 
> 时间：2012-05-16T08:14:05.987
> 
> 标签：clearcase

我做了一些脚本，我必须同时支持 Base 和 UCM。

我得到一个元素名称，我必须弄清楚这是否是 UCM 环境的一部分。最有效的方法是什么？例如，检查 UCM 语句的视图配置规范？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:37:41.313

您可以`cleartool catcs`在视图中的任何位置执行 ,。

UCM vie 的配置规范与基线 ClearCase 完全不同：

它将开始

```
ucm
identity UCM.Stream ... 
```

因此，除非您在配置规范的最后部分有特殊的基本 ClearCase 选择规则：

```
#UCMCustomElemBegin - DO NOT REMOVE - ADD CUSTOM ELEMENT RULES AFTER THIS LINE

[... my base ClearCase selection rules ...]

#UCMCustomElemEnd - DO NOT REMOVE - END CUSTOM ELEMENT RULES 
```

您可以考虑，由 UCM 视图选择的元素是 UCM 环境的一部分。

# c# - 阅读 DynamicMethod 的 LocalSignature：非标准类型令牌？

> ID：10614484
> 
> 赞同：3
> 
> 时间：2012-05-16T08:14:06.433
> 
> 标签：c#, cil, reflection.emit

我最近开始在 VS2010 中使用 ILVisualizer 来检查 IL 中的动态方法。但是它不会从 IL 流中提取 LocalVariable 信息，所以我尝试一下（当然是为了它的乐趣，并且因为它是一个很好的学习体验 :)

对于静态编译的方法，这不是问题，因为我们可以通过 GetMethodBody() 访问方法的主体并从那里获取局部变量。

然而，对于 DynamicMethods，方法体不能通过 GetMethodBody() 获得。我找到了一种解决方法，它将本地签名作为字节数组获取，然后根据 CIL 规范，我可以从那里提取方法的本地变量的计数、类型和索引。只要我们处理本地类型（短、字节、字符串...），一切都很好。

但是，如果局部变量是类类型，则使用 E​​LEMENT_TYPE_INTERNAL (0x21) 标志而不是本地签名中的 ELEMENT_TYPE_CLASS 来引用它。

不幸的是，我找不到任何关于如何读取存储为 ELEMENT_TYPE_INTERNAL 的类型的信息。那是怎么回事 ？MS 是否将非标准 CIL 用于动态方法？有人知道正确阅读这些签名的方法吗？

**编辑**我偶然发现了一些 mscorlib.dll 的源文件，并从 SignatureHelper 的源代码中发现，当类是运行时类型时，这可能会发生。我会调查那个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:38:49.167

好吧，我相信我明白了！

事实证明，ELEMENT_TYPE_INTERNAL 标志之后的数据不是压缩数据，它是一个普通的 32 位整数（或 64，取决于平台，尽管我必须确认）存储在 4 个字节上，它是指向引用的指针类型。

即使我找不到从 IntPtr 获取 RuntimeTypeHandle 的方法，循环遍历该方法的 DynamicScope 对象中的标记并比较值也可以获取类型句柄。

# c# - Windows 身份验证仍然显示登录表单

> ID：10614486
> 
> 赞同：0
> 
> 时间：2012-05-16T08:14:28.763
> 
> 标签：c#, windows, silverlight, authentication

我正在使用我在 IIS 中使用的 Silverlight 业务应用程序。

我已禁用除`Windows Authentication`.

在 web.config 文件中，身份验证设置为 -

```
<authentication mode="Windows">
        <forms name=".FrontEnd_ASPXAUTH" timeout="2880" />
</authentication> 
```

而且，在我设置的 App.xaml.cs 中 -

```
WebContext webContext = new WebContext();

webContext.Authentication = new WindowsAuthentication();
this.ApplicationLifetimeObjects.Add(webContext); 
```

我认为这意味着因为设置了 Windows 身份验证，这意味着该应用程序正在针对我机器上的 Windows 用户帐户进行身份验证。

但是，当我启动应用程序时，它仍然会弹出一个登录表单，有没有一种方法可以加载应用程序，基于没有登录表单的 windows 登录？

# iphone - 为什么我需要将某种 UI 小部件控制拖动到代表视图控制器的黄色球体中？

> ID：10614489
> 
> 赞同：0
> 
> 时间：2012-05-16T08:14:45.393
> 
> 标签：iphone, ios, cocoa-touch, xcode4.3

我是新手，正在通过阅读官方教程*Your First iOS App*来学习 iOS-dev 。

虽然我不太明白控制拖动文本文件到由黄色球体图标表示的视图控制器的背后含义。

我的意思是很容易理解，但很难知道背后的原因。

操作后我检查了代码，发现没有添加任何内容。

有人可以帮忙找出原因吗？TIA。

* * *

好吧，我发布了一些教程说的描述，以帮助我的问题可以被准确理解。

*“在视图中，按住 Control 从文本字段拖动到场景停靠栏中的黄色球体（黄色球体代表视图控制器对象）。当您释放 Control 拖动时，您应该看到如下内容： **[抱歉，图像不是暂时允许上传]**。在出现的半透明面板的 Outlets 部分中选择委托。”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:51:15.840

考虑它的最佳方式是，您在 Interface Builder 中创建的内容必须链接到您的代码。.xib 文件实际上只是一个复杂的 XML 文档。通过将 .xib 链接到控制器，它将在 XML 中编写代码，将其链接到代码。否则，当编译 .xib 和您的源代码时，编译器不会链接这两个实体。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:56:23.127

通过控制拖动，我们在 nib (.xib) 文件中的对象/视图与视图控制器中的操作 (IBAction) 或出口 (IBOutlet) 之间创建连接。

Nib 文件 (.xib) 负责建立所有连接（动作和出口）。控制器代码中不会添加任何内容来反映连接。

# vbscript - 从另一个 .VBS 文件创建一个类的实例（位于 B.vbs 中）

> ID：10614492
> 
> 赞同：4
> 
> 时间：2012-05-16T08:15:06.953
> 
> 标签：vbscript

我有 2 个 vbs 文件。

`A.vbs`：

```
Class test
  public a
  public b
End Class 
```

`B.vbs`：

```
Dim objShell
Set objShell = Wscript.CreateObject("WScript.Shell")
objShell.Run "C:\Users\shanmugavel.chinnago\Desktop\Test3.vbs" 

Dim ins
Set ins = new test 'Here throws "Class not defined: test"
ins.a = 10
ins.b = "SCS"

msgbox ins.a
msgbox ins.b 
```

现在我想在 B.vbs 文件中实现这一点。但是在为 A.vbs 中可用的类创建实例时会引发错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T09:39:03.937

. **运行**.vbs 不会使代码在另一个中可用。一个简单但可扩展的策略是在“库”上使用 .ExecuteGlobal。给定

库.vbs：

```
' Lib.vbs - simple VBScript library/module
' use
'  ExecuteGlobal goFS.OpenTextFile(<PathTo\Lib.vbs>).ReadAll()
' to 'include' Lib.vbs in you main script

Class ToBeAShamedOf
  Public a
  Public b
End Class ' ToBeAShamedOf 
```

和 main.vbs：

```
' main.vbs - demo use of library/module Lib.vbs

' Globals
Dim gsLibDir : gsLibDir = ".\"
Dim goFS     : Set goFS = CreateObject("Scripting.FileSystemObject")

' LibraryInclude
ExecuteGlobal goFS.OpenTextFile(goFS.BuildPath(gsLibDir, "Lib.vbs")).ReadAll()

WScript.Quit main()

Function main()
  Dim o : Set o = New ToBeAShamedOf
  o.a = 4711
  o.b = "whatever"
  WScript.Echo o.a, o.b
  main = 1 ' can't call this a success
End Function ' main 
```

你会得到：

```
cscript main.vbs
4711 whatever 
```

（参见[this answer](https://stackoverflow.com/a/10616669/603855)以获得有用类的种子）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:36:45.283

您的 b 脚本与您的 a 脚本没有联系，您需要像这样包含代码，然后您可以使用来自 a 的代码，就像它存在于 b 中一样

```
call Include("a.vbs")

Sub Include (Scriptnaam)
  Dim oFile
  Set oFile = oFso.OpenTextFile(Scriptnaam)
  ExecuteGlobal oFile.ReadAll()
  oFile.Close
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T07:22:54.467

您可以将 B.vbs 转换为允许您包含 A.vbs的[Windows 脚本文件。](http://msdn.microsoft.com/en-us/library/15x4407c%28VS.84%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-14T23:34:48.120

这是我们用来执行此操作的代码。

```
Sub Include(sInstFile)
    Dim f, s, oFSO
    Set oFSO = CreateObject("Scripting.FileSystemObject")
    On Error Resume Next
    If oFSO.FileExists(sInstFile) Then
        Set f = oFSO.OpenTextFile(sInstFile)
        s = f.ReadAll
        f.Close
        ExecuteGlobal s
    End If
    On Error Goto 0
    Set f = Nothing
    Set oFSO = Nothing
End Sub

Include("c:\files\SSDConnection.vbs")
Include("c:\files\SSDTable.vbs") 
```

对我们的团队完美无瑕

# iphone - *.ANE 用于扩展 iPhone 应用程序，当我将它添加到我的主 Flex 项目并编译它时，我收到“ld：绝对寻址”错误

> ID：10614498
> 
> 赞同：0
> 
> 时间：2012-05-16T08:15:53.307
> 
> 标签：iphone, objective-c, apache-flex, flash-builder, air-native-extension

我正在为读取联系人列表的 iPhone 编写扩展程序 (ANE)。将 .ane 添加到我的 Flash Builder 项目并对其进行编译时，我收到一个错误。我在 *.a 库中编译了 Objective-c 代码，没有问题。我编译了.ane，没有错误。

这是我在主 Flex 项目中添加 .ane 时的错误：

```
Error occurred while packaging the application:

ld: absolute addressing (perhaps -mdynamic-no-pic) used in _getContatti from
/var/folders/j9/j9OzOTqhGJGpr2m87bnYEU+++TQ/-Tmp-/888e0e80-9ef5-4d2a-9e34-
c01545b25bfc/mylib.library.com.a(ExtensionMyLibIOSNative.o) 
not allowed in slidable image. Use '-read_only_relocs suppress' to enable text 
relocs
Compilation failed while executing : ld64 
```

在 Xcode 中，我已经在构建设置中将“启用与共享库的链接”设置为“否”。这是导致错误的 Objective-c 代码：

```
FREObject getContatti(FREContext ctx, void* funcData, uint32_t argc, FREObject argv[]) {

FREObject nome_visualizzato;
FREObject nome_visualizzatoPrimario;
FREObject nome_visualizzatoAlternativo;

ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

FREObject arrayContatti;
FRENewObject((const uint8_t*)"Vector.<extension.MyLibrary.entity.Contatto>", 0, NULL, &arrayContatti, NULL);
FRESetArrayLength(arrayContatti, nPeople);

for ( int i = 0; i < nPeople; i++ )
{
    ABRecordRef ref = CFArrayGetValueAtIndex( allPeople, i );
    CFStringRef first = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    CFStringRef last = ABRecordCopyValue(ref, kABPersonLastNameProperty);
    CFStringRef company = ABRecordCopyValue(ref, kABPersonOrganizationProperty);
    -- DO SOMETHING --
}
    return result;
} 
```

如果我评论\删除行，它会起作用：

```
CFStringRef first = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
CFStringRef last = ABRecordCopyValue(ref, kABPersonLastNameProperty);
CFStringRef company = ABRecordCopyValue(ref, kABPersonOrganizationProperty); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:45:20.290

1.  Check if AddressBook framework (and possibly AddressBookUI, if you are using any views from AddressBook) is included in your project in 'link binary with libraries' (you can find it here: [http://wordpress.rcntech.com/wp-content/uploads/2011/05/Xcode4_Adding_Existing_Framework3.png](http://wordpress.rcntech.com/wp-content/uploads/2011/05/Xcode4_Adding_Existing_Framework3.png)) Try setting 'enable linking with shared libraries' to yes (if it is set to 'no') Add required frameworks to platform options when compiling the ane (if they are not included in air already)

Alternatively, since you are trying to access AddressBook, you can check this extension: [https://github.com/memeller/ContactEditor](https://github.com/memeller/ContactEditor)

# sql - 如何使用 SQL（SQL Server）将数字列表转换为（临时）表

> ID：10614499
> 
> 赞同：5
> 
> 时间：2012-05-16T08:15:55.173
> 
> 标签：sql, sql-server, sql-server-2008, temp-tables

这是一个例子；

我有数字列表（1、5、8、36），我希望这些值作为（临时）表行。一种方法如下

```
select 1 as n into ##temp
union
select 5  as n 
union 
select 8 as n
union 
select 36 as n 
```

问题是号码列表是动态的。它可以有任何值。所以我需要一种适当的系统方法将这些值转换为临时表行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T08:33:18.990

我经常使用的解决方案...

将您的数字列表作为`VARCHAR(MAX)`逗号分隔的字符串提供，然后使用`dbo.fn_split()`人们在线编写的众多功能之一。

*在线众多*示例 之一... [SQL-User-Defined-Function-to-Parse-a-Delimited-Str](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)

这些函数将字符串作为参数，并返回一个表。

然后你可以做类似的事情......

```
INSERT INTO @temp SELECT * FROM dbo.split(@myList)

SELECT
  *
FROM
  myTable
INNER JOIN
  dbo.split(@myList) AS list
    ON list.id = myTable.id 
```

另一种方法是查看表值参数。这些允许您将整个表作为参数传递给存储过程。如何取决于您使用的框架。您使用 .NET、Java、Ruby 等，您是如何与数据库通信的？

一旦我们了解有关您的应用程序代码的更多详细信息，我们就可以向您展示客户端代码和 SQL 存储过程模板，以使用表值参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T22:59:46.760

您可以使用以下查询从 1 到 9 选择 100 个随机值

```
Declare @Index Int = 1
Declare @Result Table (Col Int)
While @Index <= 100 Begin
    Insert Into @Result (Col)
    Select FLOOR( RAND() * 10)

    Set @Index = @Index + 1 
End

Select * From @Result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T17:41:43.597

我将它用于一组通用的编号行。

```
SELECT DISTINCT ORDINAL_POSITION AS NUMBER_VAL 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE ORDINAL_POSITION BETWEEN 1 AND 36
ORDER BY ORDINAL_POSITION 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T22:10:03.867

```
 create temporary table NS AS (
    SELECT a+b+c+d+e+f+g+h 
    FROM       (SELECT 0 as a UNION SELECT 1) 
    CROSS JOIN (SELECT 0 as b UNION SELECT 2) 
    CROSS JOIN (SELECT 0 as c UNION SELECT 4)
    CROSS JOIN (SELECT 0 as d UNION SELECT 8)
    CROSS JOIN (SELECT 0 as e UNION SELECT 16)
    CROSS JOIN (SELECT 0 as f UNION SELECT 32)
    CROSS JOIN (SELECT 0 as g UNION SELECT 64)
    CROSS JOIN (SELECT 0 as h UNION SELECT 128)
    WHERE a+b+c+d+e+f+g+h BETWEEN 1 AND 200
    ORDER BY 1
) 
```

# html - 从 Rails 控制器发布并重定向到外部站点？

> ID：10614502
> 
> 赞同：3
> 
> 时间：2012-05-16T08:16:09.453
> 
> 标签：html, ruby-on-rails, http-post

在用户注册页面之后，Web 客户端会来到这个页面，该页面只包含一个继续按钮。但我想跳过此页面并继续付款页面。有没有办法在控制器中完全执行此操作？

```
<form method="post" action="https://www.ccavenue.com/shopzone/cc_details.jsp">
    <input type=hidden name=Merchant_Id value="<%= @Merchant_id %>">
    <input type=hidden name=Amount value="<%= @Amount %>">
    <input type=hidden name=Order_Id value="<%= @user_id %>">
    <input type=hidden name=Redirect_Url value="<%= @redirect_url %>">
    <input type=hidden name=Checksum value="<%= @checksum %>">
    <input type="submit" class="Register_button" value="Proceed to payment">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:33:05.120

您应该从控制器发出**POST**请求。

```
uri = URI.parse("https://www.ccavenue.com/shopzone/cc_details.jsp")
http = Net::HTTP.new(uri.host, uri.port)

form_data = {
  "Merchant_Id" => @Merchant_id,
  "Amount" => @Amount,
  "Order_Id" => @user_id,
  "Redirect_Url" => @redirect_url,
  "Checksum" => @checksum
}

request = Net::HTTP::Post.new(uri.request_uri)
request.set_form_data(form_data)

response = http.request(request) 
```

您可以使用[httparty](https://github.com/jnunemaker/httparty) gem 进行发布请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:30:20.737

不，不是你想要的方式。

正如其他人所说，您可以从控制器内部发布，并接收响应，但如果您想让浏览器发布到远程页面，则必须通过表单。一个常见的解决方案是通过 javascript 在加载时提交表单。例如

```
<body onload="document.forms['myform'].submit();">
    <form id="myform">
        …
    </form>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-26T13:13:57.063

这可能是几年后的回应，但如果有人还在寻找，我发现这个[Repost 插件](https://github.com/vergilet/repost)可以实现这种行为。

可以像`redirect_to`控制器中的正常方法一样使用。

```
redirect_post('https://external-url.io/endpoint', params: {...}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:33:19.460

没有理由不能使用 Ruby 标准库中的 uri 和 net/http 从控制器发布并处理来自服务器的响应。

可以在这里找到一些使用 net/http 的好例子。[https://github.com/augustl/net-http-cheat-sheet/blob/master/post_form.rb](https://github.com/augustl/net-http-cheat-sheet/blob/master/post_form.rb)

不过，这可能不是处理这个问题的最佳方法。

# postgresql - 窗口函数和更多“本地”聚合

> ID：10614505
> 
> 赞同：7
> 
> 时间：2012-05-16T08:16:13.193
> 
> 标签：postgresql, common-table-expression, window-functions

假设我有这张桌子：

```
select * from window_test;

 k | v
---+---
 a | 1
 a | 2
 b | 3
 a | 4 
```

最终我想得到：

```
 k | min_v | max_v
---+-------+-------
 a | 1     | 2
 b | 3     | 3
 a | 4     | 4 
```

但我会很高兴得到这个（因为我可以很容易地用 过滤它`distinct`）：

```
 k | min_v | max_v
---+-------+-------
 a | 1     | 2
 a | 1     | 2
 b | 3     | 3
 a | 4     | 4 
```

是否可以使用 PostgreSQL 9.1+ 窗口函数来实现这一点？我试图了解是否可以让它`k=a`在此示例中的第一次和最后一次出现使用单独的分区（按 排序`v`）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T18:39:56.830

这将使用示例数据返回您想要的结果。不确定它是否适用于现实世界的数据：

```
select k, 
       min(v) over (partition by group_nr) as min_v,
       max(v) over (partition by group_nr) as max_v
from (
    select *,
           sum(group_flag) over (order by v,k) as group_nr
    from (
    select *,
           case
              when lag(k) over (order by v) = k then null
              else 1
            end as group_flag
    from window_test
    ) t1
) t2
order by min_v; 
```

我忽略了`DISTINCT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:01:38.930

**编辑：**我想出了以下查询——根本没有窗口函数：

```
WITH RECURSIVE tree AS (
  SELECT k, v, ''::text as next_k, 0 as next_v, 0 AS level FROM window_test
  UNION ALL
  SELECT c.k, c.v, t.k, t.v + level, t.level + 1
    FROM tree t JOIN window_test c ON c.k = t.k AND c.v + 1 = t.v),
partitions AS (
  SELECT t.k, t.v, t.next_k,
         coalesce(nullif(t.next_v, 0), t.v) AS next_v, t.level
    FROM tree t
   WHERE NOT EXISTS (SELECT 1 FROM tree WHERE next_k = t.k AND next_v = t.v))
SELECT min(k) AS k, v AS min_v, max(next_v) AS max_v
  FROM partitions p
 GROUP BY v
 ORDER BY 2; 
```

我现在提供了 2 个工作查询，我希望其中一个适合您。

[此变体的SQL Fiddle](http://www.sqlfiddle.com/#!1/f7076/1)。

* * *

实现此目的的另一种方法是使用支持序列。

1.  创建支持序列：

    ```
    CREATE SEQUENCE wt_rank START WITH 1; 
    ```

2.  查询：

    ```
    WITH source AS (
      SELECT k, v,
             coalesce(lag(k) OVER (ORDER BY v), k) AS prev_k
        FROM window_test
        CROSS JOIN (SELECT setval('wt_rank', 1)) AS ri),
    ranking AS (
      SELECT k, v, prev_k,
             CASE WHEN k = prev_k THEN currval('wt_rank')
                  ELSE nextval('wt_rank') END AS rank
        FROM source)
    SELECT r.k, min(s.v) AS min_v, max(s.v) AS max_v
        FROM ranking r
        JOIN source s ON r.v = s.v
       GROUP BY r.rank, r.k
       ORDER BY 2; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T12:39:53.517

如果不需要窗户、隔板或聚结，这对您来说不合适吗？它只是使用传统的 SQL 技巧来通过自连接查找最近的元组，并稍加区别：

```
SELECT k, min(v), max(v) FROM (
    SELECT k, v, v + min(d) lim FROM (
        SELECT x.*, y.k n, y.v - x.v d FROM window_test x
        LEFT JOIN window_test y ON x.k <> y.k AND y.v - x.v > 0) 
    z GROUP BY k, v, n)
w GROUP BY k, lim ORDER BY 2; 
```

我认为这可能是一个更“相关”的解决方案，但我不确定它的效率。

# asp.net-mvc-3 - 如何在 Orchard CMS 中根据 URL 选择主题

> ID：10614506
> 
> 赞同：0
> 
> 时间：2012-05-16T08:16:18.733
> 
> 标签：asp.net-mvc-3, orchardcms

假设，我有一个名为 test.com 的网站，它当然有一个选定的主题。现在我有另一个名为 alpha.test.com 的租户站点，它也使用了一个主题。

1.  但我想从 orchard 用于选择主题的代码中为 alpha.test.com 选择主题。怎么样？请帮忙。

2.  我的另一个问题是如何为 Orchard CMS 中的不同控制器或操作选择不同的主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:24:45.057

只需实现您自己的 IThemeSelector 并使用比默认优先级更高的优先级。建议不要更改现有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T15:57:46.480

我认为这些链接可能会对您有所帮助：

[https://orchard.codeplex.com/discussions/359115](https://orchard.codeplex.com/discussions/359115)

[http://weblogs.asp.net/bleroy/dynamically-switching-the-theme-in-orchard](http://weblogs.asp.net/bleroy/dynamically-switching-the-theme-in-orchard)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T16:19:20.417

Orchard 中没有包含已安装主题的表，但 Themes_ThemeSiteSettingsPartRecord 表仅用于存储当前主题的记录。如果我们想根据 URL 选择多个/另一个主题，那么

Ans1 & Ans2：在 Orchard.Themes/Services 中 SiteThemeSelector 类的 GetTheme 方法中指定 currentThemeName 变量和所需的安装主题名称。如果您想根据 URL 应用不同的主题，则在逻辑中设置 currentThemeName，并且 URL 可以从 context.HttpContext.Request 中检索。

# sql - pl/sql 中的过程

> ID：10614515
> 
> 赞同：-4
> 
> 时间：2012-05-16T08:17:00.877
> 
> 标签：sql, oracle, stored-procedures, plsql

我在这个问题上遇到了一个小问题..我已经做了我所知道的帮助如果你能

a) 创建一个将新记录插入到“历史”表中的过程“insert_History”。
b) 编写一个小型 PL/SQL 程序，该程序调用“insert_History”过程以根据以下给出的事实插入三个记录：

一世。Mark jackop 于 2009 年 1 月 5 日聘用，因为 'SH-CLERK' 于 2009 年 4 月 6 日获得了销售代表的新职位 (Job_ID = 'SA-REP')。假设前一个职位的结束日期是“2009 年 5 月 31 日”。

表：历史---> emp_id、start_date、end_date、job_id、dep_id
表：员工----> emp_id、name、job_id、dep_id

这就是我所做的！

```
create or replace
procedure insert_History(emp_id in integer , job_id in number) 
is 
begin 
update History
set ?????? = insert into history(.....) 
where employees.emp_id= emp_id;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:13:30.493

首先，我会将您的工作放入包中，因为这样可以使事情井井有条，更易于阅读/调用，并且让回过头来记住事情的工作方式变得非常容易（因为我在几个月没有看程序后就知道了我会忘记它到底是做什么的。）我可以想象当某人的代码只是堆积成程序而几乎没有解释它是如何工作的时候，它会是一场噩梦。您不会只在一个类中创建一个 java/oop 程序！

另外要注意的是，使用包只是养成习惯的好习惯，并确保您注释掉代码中的废话以解释它的作用。

请注意，如果我错了，请注意并纠正我，指示要您**插入**而不是更新 3 条记录。此外，它似乎需要的不仅仅是 emp_id 和 job_id（开始和结束日期以及 dep_id。所以这些值需要通过程序获得。

```
 create or replace
    PACKAGE "history" AS 
       procedure insert_history(pEmp_id integer, pstart_date date, pend_date date, pJob_id number, pdep_id);
    end history;

create or replace 
package body "history" as 
 procedure insert_history(pEmp_id in integer, pstart_date in date, pend_date in date,               pJob_id in number, pdep_id in number)
 is 
 begin
   insert into history(emp_id , start_date , end_date , job_id, dep_id)
   values(pEmp_id, pstart_date, pend_date, pJob_id, pdep_id );
   commit;
 end insert_history; 
```

这就是插入过程。现在你需要一些可以调用这个过程的东西。在这里，我假设您从应用程序或应用程序中的更高级别获取这些日期，因此开始和结束日期以及 emp 名称作为参数传入。所以我们将把它创建为优秀的程序。

```
create or replace procedure call_insert_history(Pemp_name in varchar2(256), varchar2(256), Pstart_date in date, Pend_date in date)
is
Vemp_id number;
Vdep_id number;
Vjob_id number;
begin
--first get the emp_id, dep_id, job_id
select emp_id, dep_id, job_id into Vemp_id, Vdep_id, Vjob_id from employees where emp_name = Pemp_name;
--now call the insert_history procedure using the obtained variables.
history.insert_history(Vemp_id, Pstart_date, Pend_date, Vjob_id, Vdep_id);
end call_insert_history; 
```

应该就是这样。

**笔记：**

这只是我最好的猜测，我还没有测试过。我只是从相当模糊的方向上理解我所理解的。如果您没有从应用程序中获取这些值，则必须存储每个值，然后在不使用参数的情况下调用上述过程的其余部分。

希望这有助于或至少为您指明正确的方向！

# python - 在 openpyxl 的优化阅读器中使用 ws.iter_rows 迭代一系列行

> ID：10614518
> 
> 赞同：11
> 
> 时间：2012-05-16T08:17:05.090
> 
> 标签：python, excel, xlsx, openpyxl

我需要读取 10x5324 个单元格的 xlsx 文件

这是我试图做的事情的要点：

```
from openpyxl import load_workbook
filename = 'file_path'

wb = load_workbook(filename)
ws = wb.get_sheet_by_name('LOG')

col = {'Time':0 ...}

for i in ws.columns[col['Time']][1:]:
    print i.value.hour 
```

代码运行时间太长了（我正在执行操作，而不是打印），过了一会儿我不耐烦了，取消了它。

知道如何在优化的阅读器中工作吗？我需要遍历一系列行，而不是所有行。这是我尝试过的，但它是错误的：

```
wb = load_workbook(filename, use_iterators = True)
ws = wb.get_sheet_by_name('LOG')
for i in ws.iter_rows[1:]:
    print i[col['Time']].value.hour 
```

没有范围功能有什么办法可以做到吗？

我想一种方法是：

```
for i in ws.iter_rows[1:]:
    if i.row == startrow:
        continue
    print i[col['Time']].value.hour
    if i.row == endrow:
        break 
```

但是有更优雅的解决方案吗？（顺便说一句，这也不起作用）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T22:49:55.090

具有下限的最简单解决方案是这样的：

```
# Your code:
from openpyxl import load_workbook
filename = 'file_path'
wb = load_workbook(filename, use_iterators=True)
ws = wb.get_sheet_by_name('LOG')

# Solution 1:
for row in ws.iter_rows(row_offset=1):
    # code to execute per row... 
```

这是执行您所描述的另一种方法，使用[`enumerate`](http://docs.python.org/2.7/library/functions.html?highlight=enumerate#enumerate)函数：

```
# Solution 2:
start, stop = 1, 100    # This will allow you to set a lower and upper limit
for index, row in enumerate(ws.iter_rows()):
    if start < index < stop:
        # code to execute per row... 
```

index 变量会记录您所在的行，因此可以使用它来代替 range 或 xrange。这种方法非常简单，可以与范围或切片不同的迭代器一起使用，如果需要，也可以只与下限一起使用。干杯!

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T10:20:45.817

从[文档](http://packages.python.org/openpyxl/tutorial.html)中：

> 注意：在内存中创建工作表时，它不包含单元格。它们是在首次访问时创建的。这样我们就不会创建永远不会被访问的对象，从而减少内存占用。
> 
> 警告：由于此功能，滚动单元格而不是直接访问它们会将它们全部创建在内存中，即使您没有为它们分配值。就像是
> 
> ```
> >>> for i in xrange(0,100):
> ...             for j in xrange(0,100):
> ...                     ws.cell(row = i, column = j) 
> ```
> 
> 将在内存中创建 100x100 个单元格，一无所获。
> 
> 但是，有一种方法可以清除所有不需要的单元格，我们稍后会看到。

我认为访问列或行属性将导致许多单元格必须加载到内存中。我建议只尝试直接访问您需要的单元格。

例如。

```
col_name = 'A'
start_row = 1
end_row = 99

range_expr = "{col}{start_row}:{col}{end_row}".format(
    col=col_name, start_row=start_row, end_row=end_row)

for (time_cell,) in ws.iter_rows(range_string=range_expr):
    print time_cell.value.hour 
```

# jquery - setTimeout 不适用于 jquery.each，这

> ID：10614521
> 
> 赞同：8
> 
> 时间：2012-05-16T08:17:11.213
> 
> 标签：jquery, settimeout, each

我试图在遍历表的单元格时在 jquery .removeClass 调用之间添加延迟。单元格在没有 setTimeout 的情况下正确显示，但使用 setTimeout 时代码会中断。我究竟做错了什么？

```
function reveal_board() {
$("td").each(function() {
    var t=setTimeout('$(this).removeClass("invisible")', 500);
});
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T08:20:39.847

试试这个：

```
function reveal_board() {
    $("div").each(function(index) {        
        (function(that, i) { 
            var t = setTimeout(function() { 
                $(that).removeClass("invisible"); 
            }, 500 * i);
        })(this, index);
    });
} 
```

将字符串传递给通常是一种不好的做法，`setTimeout()`而且我认为以这种方式使用它时不能传递任何变量。

我还将它包装在一个闭包中，以确保它`that`始终适用于正确的元素并且不会被替换。

虽然，就像 NiftyDude 说的那样，您可能希望传入索引并使用它来依次显示每个元素。

工作示例 - [http://jsfiddle.net/Cc5sG/](http://jsfiddle.net/Cc5sG/)

**编辑**

看起来你不需要关闭：

```
function reveal_board() {
    $("div").each(function(index) {        
        var that = this;
        var t = setTimeout(function() { 
            $(that).removeClass("invisible"); 
        }, 500 * index);        
    });
} 
```

[http://jsfiddle.net/Cc5sG/1/](http://jsfiddle.net/Cc5sG/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:20:25.177

您`this`指向全局`window`.

```
function reveal_board() {
  $("td").each(function() {
    $this = $(this);
    var t=setTimeout(function(){$this.removeClass("invisible");}, 500);
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:20:24.660

首先，避免对 的第一个参数使用字符串，`setTimeout`而是使用 anon 函数，因为它更易于调试和维护：

```
$("td").each(function() {
    var $this = $(this);
    var t=setTimeout(function() {
       $this.removeClass("invisible")
    }, 500);
}); 
```

另外，我不确定您在这里要实现什么（稍后更新您的问题，我会调整我的答案），但是如果您想`invisible`从每`td`500 毫秒一个接一个地删除课程，您可以使用`index`：

```
$("td").each(function() {
    var $this = $(this);
    var t=setTimeout(function(index) {
       $this.removeClass("invisible")
    }, 500 * (index+1));
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-08T12:22:17.270

好吧，我遇到了同样的问题，我用这种方式解决了它......但我不知道性能或其他什么，我在一个非常短的循环中使用它（最多 10 个元素）并且它工作得很好......我用它来添加一个类的方式，所以我会让你弄清楚它给删除一个类提供了什么;)。

```
var elements = $(".elements");
var timeout;

elements.each(function(e){
    timeout = setTimeout(function(index) {
       elements[elements.length-e-1].setAttribute('class', elements[elements.length-e-1].getAttribute('class')+' MY-NEW-CLASS');
    }, 500 * e);
}); 
```

# php - Google 电子表格：使用 GData API 添加列

> ID：10614522
> 
> 赞同：2
> 
> 时间：2012-05-16T08:17:11.247
> 
> 标签：php, gdata, gdata-api, zend-gdata

目前，新创建的 Google 电子表格似乎默认为 20 列。

我可以通过单元格提要创建新的列*标题*，但仅限于那些现有的 20 列。除此之外，我无法创建新列，更不用说新列标题，因为我收到以下错误：

> 预期响应代码 200，得到 403
> 看起来其他人已经删除了此单元格。

使用 Zend GData API，这就是我正在做的事情：

```
 <?php

        /*
         *  Given:
         *
         *      $columnNames, e.g. array('FirstName', 'LastName', 'DateOfBirth')
         *      $lastColumnOnSpreadsheet, e.g. 20
         *      $spreadsheetService
         *      $spreadsheetKey
         *      $worksheetId
         */

        foreach ($columnNames as $columnName)
        {
            if (!array_key_exists($columnName, $columnsAlreadyOnSpreadsheet))
            {
                $spreadsheetService->updateCell(1 /* first row */,
                                                ++$lastColumnOnSpreadsheet,
                                                $columnName,
                                                $spreadsheetKey,
                                                $worksheetId);
            }
        }

    ?> 
```

所以，`$lastColumnOnSpreadsheet`在 19 岁之后，我得到了上述错误。目前，唯一的解决方法是手动将列一一插入到右侧，除了繁琐之外，这有点破坏了通过 GData 进行自动化的目的。

是否可以通过 GData API 插入列？如果是这样，如何，特别是通过 Zend 框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:03:59.343

Java/.net：这显示了如何设置工作表的大小，您可以使用它来附加行和列 [https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

但我发现 OAuth 很难。对于 OAuth，我使用了 GDrive 教程“DrEdit”，这是我见过的最好的 OAuth 教程。

# python - 全局替换为负前瞻？

> ID：10614524
> 
> 赞同：0
> 
> 时间：2012-05-16T08:17:20.383
> 
> 标签：python, regex

我是 Python 正则表达式新手，所以请耐心等待...

我有一个长的多行字符串，我必须用其他东西替换 [[...]] 字符串的目录部分，但只有当它们不以'file://'开头时，例如

```
 s= 'chk1 [[file:///excursions/digital/MindMaps/|mm]],
    local file [[file:///inFolder/tmptest/a/fan.txt|a/fan.txt]]
    and nonlocal [[/excursions/books/calsync.txt|/excursions/books]]' 
```

我使用了它的变体（目前替换字符串只是对我发现的内容的检查）：

```
re.sub('\[\[(?!file:)(^])*',"found:< \\1 >",s) 
```

但我得到一个“sre_constants.error：unmatched group”。你知道我做错了什么吗？

谢谢！

亚历山德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:25:07.157

您缺少`[]`第二组中的运算符：

```
'\[\[(?!file:)(^])* 
```

应该

```
'\[\[(?!file:)([^\]]*)' 
```

当您有很多转义时，最好使用原始字符串：

```
re.sub(r'\[\[(?!file:)([^\]]*)', r"found:<\1>", s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:22:52.357

由于转义，您的方括号不匹配

# c# - 外部照片查看器 (Windows Phone)

> ID：10614531
> 
> 赞同：0
> 
> 时间：2012-05-16T08:17:44.710
> 
> 标签：c#, windows-phone-7

在这篇文章中：[使用 PhotoChooserTask](https://stackoverflow.com/questions/10603764/using-of-photochoosertask/10603867#10603867)我发现可以从外部电话照片查看器中显示图片。所以我需要点击媒体库中的照片，它会显示在我的应用程序页面中。我想再做一个。单击按钮后是否可以在外部照片查看器中查看当前图片（例如）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:34:20.467

不，这是不可能的，目前 Windows Phone 不支持任何功能来为第 3 方提供替换系统应用程序（如照片库）的必要手段。

# oracle11g - 数据仓库中的 Oracle 物化视图或聚合表

> ID：10614538
> 
> 赞同：0
> 
> 时间：2012-05-16T08:18:03.810
> 
> 标签：oracle11g, data-warehouse, materialized-views

oracle(11g) 的物化视图是数据仓库中聚合表的好习惯吗？

我们有 DW 流程，每天替换 2 个月的数据。有时这意味着每个月的演出很少（约 10 万行）。最重要的是物化视图，在夜间数据传输周期后刷新。我的问题是创建聚合表而不是 MV 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:38:19.187

我认为聚合表可能有益的一种情况是聚合可以有效地与原子级数据负载相结合，最好用一个例子来说明。

假设您每天通过分区交换将大量数据加载到事实表中。使用分区更改跟踪的物化视图刷新将在分区交换期间或之后触发，它将扫描已修改的分区并将更改应用于 MV。

作为要与事实表分区交换的表的一部分，您还可以使用 CUBE/ROLLUP 计算各个级别的聚合，并使用多表插入加载您可以使用的表然后将交换分区为一个或多个聚合表。通过避免重新扫描原子级数据，这不仅可能在本质上更有效，而且您的聚合是在事实表分区交换之前计算的，因此如果出现任何问题，您可以暂停对事实表本身的修改。

稍后可能会出现其他想法......如果其他人有想法，我将作为社区 Wiki 打开答案。

# asp.net-mvc - 在 MVC 3 中上传文件

> ID：10614541
> 
> 赞同：0
> 
> 时间：2012-05-16T08:18:10.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, file-upload, razor

我需要一个操作来创建`MyModel`包含一些字段的类型以及一些要上传到数据库的文件。所以这是我观点的一部分：

```
@using(Html.BeginForm()) {

<fieldset>
 <dl>
    <dt>
  @Html.LabelFor(model => model.Name)
</dt>
<dd>
  @Html.EditorFor(model => model.Name)
  @Html.ValidationMessageFor(model => model.Name)
</dd>
    <dt>
 @Html.LabelFor(model => model.NeededFiles)
</dt>
    <dd>
@foreach(var item in Model.NeededFiles) { 
 <div style="margin:5px;">
       @Html.Label(item.Title)
       <input type="file" name="@item.Name" />
 </div>
}
     </dl>
 </fieldset>
 <input type="submit" value="Create" class="button red" />
} 
```

但是在操作后我在获取文件路径时遇到了一些问题：这是我的操作：

```
[HttpPost]
public ActionResult Create(MyModel ViewModel FormCollection collection, IEnumerable<HttpPostedFileBase> files) {

 //....
 } 
```

`Request.Files`所以`null`我不能使用它，我不知道为什么。文件也`IEnumerable<HttpPostedFileBase>`为空。然后我尝试从中获取，`FormCollection` 所以我使用它：

```
 string filePath = collection.GetValue(item.Name).AttemptedValue; 
```

但`filePath`只是返回文件名而不是文件路径，我不明白。当我选择文件时，我可以看到输入中的所有路径，但是当我想获取它时，只返回文件名。我的问题在哪里？你的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:22:26.487

您是否在表单标签上将 enctype 设置为 multipart/form-data ？我看不到那里...

一旦你这样做了，看看这个：

[尝试使用 ASP.NET MVC 上传文件](https://stackoverflow.com/questions/718400/trying-to-upload-a-file-with-asp-net-mvc)

那应该涵盖您的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T13:24:19.823

您应该修改您的视图以包含多部分/表单数据：

```
@using(Html.BeginForm("YourAction", "YourController", FormMethod.Post, new { enctype = "multipart/form-data" } )) {
   //....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T00:44:21.237

看起来你错过了

@using(Html.BeginForm("YourAction", "YourController", FormMethod.Post, new { enctype = "multipart/form-data" } )) { //.... }

退房 - [http://hozefam.com/post/2012/08/10/Exploring-File-Upload-and-Download-in-MVC-3.aspx](http://hozefam.com/post/2012/08/10/Exploring-File-Upload-and-Download-in-MVC-3.aspx)

# php - 为什么这适用于 Mysql 而不是 Postgres

> ID：10614545
> 
> 赞同：0
> 
> 时间：2012-05-16T08:18:37.920
> 
> 标签：php, ajax, postgresql

我正忙于学习 Ajax，需要将 Postgres 用于支持的数据库。我找到了一个适用于 Mysql 的示例，但是当我将其转换为 Postgres 时，它停止工作。从 Mysql 切换到 Postgres 时，我没有对 HTML 代码进行任何更改。

当我在命令行 (php test.php) 执行 php 代码时，它会工作并输出正确的行数和数据。

这是php

```
<?php 

$dbh = pg_connect("host=192.168.0.8 dbname=test user=test password=test");
if (!$dbh) {
    die("Error in connection: " . pg_last_error());
}       

// execute query
$sql = "SELECT * FROM users";
$result = pg_query($dbh, $sql);
if (!$result) {
 die("Error in SQL query: " . pg_last_error());
}       

// iterate over result set
// print each row
while ($row = pg_fetch_array($result)) {
   echo "Name: " . $row[1];
    echo "<BR />";
}       

// free memory
pg_free_result($result);       

// close connection
pg_close($dbh);
?> 
```

这是html

```
<html>
<head>
    <script language="JavaScript" type="text/javascript">
    function ajax_post(){
        // Create our XMLHttpRequest object
        var hr = new XMLHttpRequest();
        // Create some variables we need to send to our PHP file
    var url = "test.php";
    var fn = document.getElementById("name").value;
    var vars = "name="+fn;
    hr.open("POST", url, true);
    // Set content type header information for sending url encoded variables in the request
    hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    // Access the onreadystatechange event for the XMLHttpRequest object
    hr.onreadystatechange = function() {
            if(hr.readyState == 4 && hr.status == 200) {
                var return_data = hr.responseText;
                document.getElementById("status").innerHTML = return_data;
        }
    }
    // Send the data to PHP now... and wait for response to update the status div
    hr.send(vars); // Actually execute the request
    document.getElementById("status").innerHTML = "processing...";
        document.getElementById("name").value = "";
    }
    </script>
    <script type="text/javascript">
        function setFocus() 
        {
          document.getElementById("name").focus();
        }
    </script>
</head>

<body onload="setFocus()">
    <div>
    <form name="input" action="" onsubmit="ajax_post(); return false;"> 
        Barcode : <input type="text" id="name" size="30"><br />       
    </form>
    </div>
    <div style="background-color: lightyellow; border: 1px solid black; width: 400; height: 300;">
        <div id="status"></div>
    </div>
</body> 
```

我注意到的一件事是，当我在命令行中使用 postgres 运行 test.php 文件时，总是将换行符附加到数据的末尾。

谢谢哦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:20:12.323

安装 Firefox 和[Firebug](https://addons.mozilla.org/de/firefox/addon/firebug/)插件。在 Firebug 中，您可以方便地查看 HTML 和 PHP 页面之间的整个通信，还有一个很棒的 JS 调试器，包括断点等。您似乎不太清楚错误究竟是什么，但您仍然应该能够使用这些工具发现它。

# c# - 显示从视频服务器（轴 240Q）到 WPF/WINFORM 的视频流并在视频上绘制椭圆（在运行时）

> ID：10614546
> 
> 赞同：0
> 
> 时间：2012-05-16T08:18:43.243
> 
> 标签：c#, wpf, winforms, video, video-streaming

我通过局域网从视频服务器获取视频，将视频带到我的浏览器。

我想做的是：在显示视频的winform或WPF中创建应用程序并在其上绘制（在视频控件上）Ellipse 1.Location参数和2.diameter X 2（因为它是Ellipse）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:44:32.937

我想我可以通过使用 Web 浏览器控件并在其上使用 GDI（自定义控件）进行绘制来解决这个问题。你怎么看？

# c++ - C++ 考试，谁答对了第一个？

> ID：10614550
> 
> 赞同：1
> 
> 时间：2012-05-16T08:18:50.810
> 
> 标签：c++, types, main

> **可能重复：**
> [main 的正确声明是什么？](https://stackoverflow.com/questions/4207134/what-is-the-proper-declaration-of-main)

我刚刚参加了我的第一次 C++ 考试。第一个问题是

> **int main(◊, char ** argv)**
> 以下哪个建议不起作用（作为第一个形式参数替代◊）：
> 
> ```
>     a) 字符 argc
>     b) 整数 argc
>     c) 双 argc
>     d) 布尔型 argc
> 
> ```

在 4 小时的纯手写个人考试中，答案占 2%。
允许使用所有工具，接受任何可编程设备或任何通信方式

谁能做到这一点:)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:21:05.537

定义“有效”的含义。其中任何一个都*可能*有效，但一个有效的、符合标准的、格式良好的 C++ 程序具有以下任一签名：

```
int main()
int main(int argc, char** argv)
int main(int argc, char* argv[]) 
```

所以 a)、c) 和 d) 是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T08:25:56.673

定义“行不通”？

```
int main(char argc, char ** argv)
{
    printf("%d\n", argc);
    return 0;
}

./a.out 1 2 3
Output: 4

int main(int argc, char ** argv)
{
    printf("%d\n", argc);
    return 0;
}

./a.out 1 2 3
Output: 4

int main(double argc, char ** argv)
{
    printf("%d\n", *(int*)&argc);
    return 0;
}

./a.out 1 2 3
Output: 4

int main(bool argc, char ** argv)
{
    printf("%d\n", argc);
    return 0;
}

./a.out 1 2 3
Output: 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T08:24:50.587

鉴于问题是问**哪个不起作用**。它必须是`double`所有其他的都是整数。

我相信这将是*正确*的答案，因为除了整数值之外，您不能对数组进行索引。但这假设您实际上想要索引`argv`数组。

但是在 C++ 考试中问一个多么糟糕的问题啊。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:24:35.513

“int argc”是正确的用法。argc 表示传递给 main 的参数数量。所以它唯一的整数。

# c# - 是否有用于 C# 的 Linq to REST 库

> ID：10614551
> 
> 赞同：9
> 
> 时间：2012-05-16T08:18:51.943
> 
> 标签：c#, linq, rest

我有一个 Linq 表达式，我想将它转换为 REST 的查询字符串，即

```
public IQueryable<Organisation> Organisations;

...
var organisations = Organisations.Where(x => x.Name == "Bob"); 
```

变成

```
http://restservice.com/Organisations?$filter=Name eq "Bob" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T23:29:29.717

我最终在[Linq2Rest](https://bitbucket.org/jjrdk/linq2rest)（也是[NuGet](http://nuget.org/packages/linq2rest)）中找到了一个似乎符合要求的产品。不支持 OAuth，但可以构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:23:04.240

如果您可以控制数据源，那么您正在寻找的就是[OData 。](http://www.odata.org)

谷歌搜索了[HttpEntityClient](http://nuget.org/packages/netfx-System.Net.Http.HttpEntityClient)，虽然我没有任何经验，但它看起来很有用。

我想您也可以编写自己的实现，因为坦率地说，rest-apis 在过滤、排序等方面不必遵循一定的标准......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T14:40:37.403

[PocoHttp](https://github.com/PocoHttp/PocoHttp)可以做你想做的事。此外，它可以为您调用服务并反序列化实体。

您还可以轻松修改其 ODataProvider 以支持其他 OData 本机功能（长度、startswith 等）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T23:01:41.873

OData 库的早期预发布版本有一个查询字符串解析器，但表达式构建从未完全实现，然后该功能被删除。这是库中的主要漏洞，因为没有它，您只剩下有效负载和一些标头支持。

幸运的是， [Linq2Rest](https://bitbucket.org/jjrdk/linq2rest)完全符合您的需求，只需一行代码：

```
var organisations = Organisations.sources.Filter(Request.Params).OfType<Organisations>() 
```

强制转换是必要的，因为查询字符串可以针对集合进行选择，从而产生不同的类型集合。如果您只预测属性，那么您就不会关心这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-25T03:03:28.530

我发现微软开发的 DataServiceContext 比这里提到的 Linq2Rest 和 HttpEntityClient 第三方库更流畅。文档也好多了。缺点是 DataServiceContext 仅适用于 XML（无 JSON）。但是，如果客户端在 HTTP 标头中请求，WebAPI OData REST 服务和 WCF 数据服务都可以返回 XML。因为 XML 支持不需要额外的开发工作，所以缺少 JSON 支持不太可能成为问题。

有使用 DataServiceContext 的 LINQ to REST 示例：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd894039.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894039.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T08:23:18.747

试试[大数据](http://www.odata.org/)

开放数据协议 (OData) 是一种用于查询和更新数据的 Web 协议，它提供了一种解锁数据并将其从当今应用程序中存在的孤岛中解放出来的方法。OData 通过应用和构建 Web 技术（例如 HTTP、Atom 发布协议 (AtomPub) 和 JSON）来实现这一点，以提供对来自各种应用程序、服务和商店的信息的访问。该协议源于过去几年在各种产品中实现 AtomPub 客户端和服务器的经验。OData 被用于公开和访问来自各种来源的信息，包括但不限于关系数据库、文件系统、内容管理系统和传统网站。

编辑 1：也请看这里：http: [//paulhammant.com/2012/02/13/client-side-mvc-frameworks-compared/](http://paulhammant.com/2012/02/13/client-side-mvc-frameworks-compared/)

# java - 使用 Java 而非 JavaScript 自动完成

> ID：10614554
> 
> 赞同：1
> 
> 时间：2012-05-16T08:18:58.437
> 
> 标签：java, search-engine

我必须在我的应用程序中进行所谓的“超文本搜索”。基本上，您开始在一个字段中输入，就像谷歌为您输入的每个字母一样，相关搜索匹配更改。唯一的区别是，我将在表格中填写信息，并且每次用户在框中键入一个字母时，表格都会根据您开始输入的内容更改内容。

一个例子是，如果你想找一本*哈利波特*的书，你开始输入哈利。

对于您键入的每个字母，表格都会发生变化，逐个字母地确定您要查找的书。

我的问题是：哪种方式是最好或最合适的有效方式？我将有一个包含对象的数组列表，我可以访问并在桌子上显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:56:51.380

您是否尝试 [过使用 GWT](http://www.roseindia.net/tutorials/gwt/suggestion-box.shtml)和 [Facebook Style Autocomplete](http://raibledesigns.com/rd/entry/creating_a_facebook_style_autocomplete)的 SuggestBox ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:27:40.200

此功能称为自动完成。

如果您在谷歌上搜索“javascript autocompletion”，有很多解决方案。

我个人使用 jquery ui，它有一个用于[http://jqueryui.com/demos/autocomplete/的组件](http://jqueryui.com/demos/autocomplete/)

编辑：我的错，问题是关于java，而不是javascript

# jquery - 使用 connectWith 和 maxLevels 的 jQuery UI nestedSortable 无法正常工作

> ID：10614556
> 
> 赞同：0
> 
> 时间：2012-05-16T08:19:01.780
> 
> 标签：jquery, jquery-ui, nested-sortable

由于我使用的是 jQuery UI 的可排序扩展 nestedSortable，因此我试图创建多个（连接的）列表，每个列表在最大嵌套级别中都有单独的选项。但是插件会检查原始项目（被拖动）中的最大级别数量，而不是应该放置它的位置。

```
<script type="text/javascript"> 
_isAllowed: function(parentItem, levels) {
    var o = this.options;
    // Are we trying to nest under a no-nest or are we nesting too deep?
    if (parentItem == null || !(parentItem.hasClass(o.disableNesting))) {
        if (o.maxLevels < levels && o.maxLevels != 0) {
            this.placeholder.addClass(o.errorClass);
            this.beyondMaxLevels = levels - o.maxLevels;
        } else {
            this.placeholder.removeClass(o.errorClass);
            this.beyondMaxLevels = 0;
        }
    } else {
        this.placeholder.addClass(o.errorClass);
        if (o.maxLevels < levels && o.maxLevels != 0) {
            this.beyondMaxLevels = levels - o.maxLevels;
        } else {
            this.beyondMaxLevels = 1;
        }
    }
}
</script> 
```

我如何才能使插件的这一部分选择项目被放置位置的 maxLevel 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:00:06.110

我做了一个快速（肮脏的）修复来解决问题：

```
<script type="text/javascript"> 
_isAllowed: function(parentItem, levels) {
    var o = this.options;
    o.maxLevels=$(this.placeholder[0]).closest('.ui-sortable').nestedSortable("option","maxLevels");
</script> 
```

# c# - 在 XP 上安装服务时出现错误 1920 Insufficient Privileges

> ID：10614557
> 
> 赞同：0
> 
> 时间：2012-05-16T08:19:02.840
> 
> 标签：c#, asp.net, operating-system, windows-xp

我正在尝试在 Windows XP 上安装窗口服务。我有 4 台机器，其中三台正在安装服务，但其中一台显示问题

```
Error 1920 insufficent privileges 
```

为什么会这样？所有机器上的每一件事都是一样的。Windows Service pack3 和 .Net framework 一切都是一样的，那为什么会出现这个错误呢？

# iphone - 我想在选项卡式应用程序中添加导航控制器

> ID：10614558
> 
> 赞同：-1
> 
> 时间：2012-05-16T08:19:04.257
> 
> 标签：iphone, xcode

我正在研究 xcode4.3.2 并且我已经创建了选项卡式应用程序 7 现在我想向它添加导航控制器，有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:41:08.407

 在`applicationDidFinishingLoading`你的`AppDelegate`：

```
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
UINavigationController *myNav1=[[UINavigationController alloc] initWithRootViewController:viewController1];
UINavigationController *myNav2=[[UINavigationController alloc] initWithRootViewController:viewController2];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:myNav1, myNav2, nil];
self.window.rootViewController = self.tabBarController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:25:50.950

他们在互联网上有很多教程，但这里有一些问题：

开始创建您的选项卡式应用程序

在任何选项卡的每个“第一视图”：

编辑器/嵌入/导航控制器

# php - 将值存储到 cookie 中并在页面加载时显示这些值

> ID：10614560
> 
> 赞同：0
> 
> 时间：2012-05-16T08:19:19.903
> 
> 标签：php, javascript, cookies

嗨，我有一个包含许多字段的 php 表单，现在我尝试编写将所有这些值存储到数组中的代码，并将它们存储在 javascript 中的 cookie 中。代码如下：

```
<script type="text/javascript">

function setDate()
{
var today = new Date();
var month = today.getMonth() + 1;
var day = today.getDate();
var year = today.getFullYear();
document.forms['form1'].elements['date'].value= month + "/" + day + "/" + year;
}

function add_newoption(optionname)
{
  document.getElementById(optionname).InnerHTML = "";
}
var win = null;
function optionWindow(mypage,myname,w,h){
LeftPosition = (screen.width) ? (screen.width-w)/2: 0;
TopPosition = (screen.height) ? (screen.height-h)/2: 0;
settings =
'height='+h+',width='+w+',top='+TopPosition+',left='+LeftPosition;
win = window.open(mypage,myname,settings);
win.focus();
}

function setAction(act)
{
    document.forms['form1'].action = act;
    document.forms['form1'].submit();
}

</script> 
```

表格的代码如下：

```
<body onLoad="setDate();">
<br/>
<center>
<fieldset class="style1" style="width:800px; background-color:#FFFFFF">
<h4 align="center"> Designer Form </h4>
<form id="form1" name="form1" method="post" >
  <table width="700" border="0" cellpadding="2" cellspacing="2" bgcolor="#FFFFFF" style="text-align:left; padding: 25px 0px 25px 0px;">
    <tr>
      <td width="174" align="right">Date:</td>
      <td width="331"><input name="date" type="text" size="10" readonly/></td>
      <td width="175" style="text-align:center;">Order Number:
      <input name="order_num" type="text" size="10" value=""/></td>
    </tr>
    <tr>
      <td >&nbsp;</td>
      <td>&nbsp;</td>
      <td style="text-align:center;"><input name="orderdetails" type="submit" value="Get Order Details" onClick="setAction('?action=getorder');"/></td>
    </tr>
    <tr>

      <td colspan='4'>     <input name="email" id="email" type="hidden" value=""/>     </td> 
    </tr>
    <tr>
      <td align="right">First Name:</td>
      <td><input name="fname" type="text" value=""/></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="right">Last Name:</td>
      <td><input name="lname" type="text" value=""/></td>
      <td>&nbsp;</td>
    </tr>

    <tr>
      <td align="right">Image Submitted:</td>
      <td><input name="image" type="text" /></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="right">General Comments: </td>
      <td><textarea name="gen_comments" cols="50" rows="6"></textarea></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="right">Internal Comments:</td>
      <td><textarea name="int_comments" cols="50" rows="6"></textarea></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td align="right">Quality of the File:</td>
      <td colspan="2" style="padding-right:4px">
       <select name="quality">
       <option>Select One</option><option value="good">Good</option><option value="ok">A bit low but we can use it</option><option value="low">Low. We are concerned it might effect the qaulity of the final</option><option value="not good">Not good. We cannot work with it</option><option value="test2">test2</option><option value="test">test</option><option value="lisa">Lisa1</option><option value="bbb">aaa</option>        <!--option value="good">Good</option>
       <option value="ok">A bit low but we can use it</option>
       <option value="low">Low. We are concerned it might effect the qaulity of the final </option>
       <option value="not good">Not good. We can't work with it</option-->
        </select> 
```

现在我想做的是让所有这些输入到表单中的值存储到一个数组中，并且必须设置 cookie 以在页面重新加载时检索它们......我如何使用 javascript 和在哪里调用表单中的该函数，以便在页面重新加载时将这些值放入表单中......？？我需要任何帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:56:26.400

好吧，我认为您应该`localStorage.setItem("DataKey","DataValue");`用于存储任何价值。为了获得价值，您可以使用`localStorage.getItem("DataKey");`

FF、chrome、safari 都支持 localStorage 但我不知道 IE。

# android - 如何避免同一活动的多个实例？

> ID：10614565
> 
> 赞同：28
> 
> 时间：2012-05-16T08:20:02.073
> 
> 标签：android, android-activity

在我的 PoC 中，我有一些活动、`HomeActivity`、`CreateActivity`、`SearchActivity`、`ResultsActivity`、`ResultDetailsActivity`和`UpdateActivity`。

我有两个主要的导航路径：**Create**和**Search**。

**创建**路径的导航如下：`HomeActivity`--> `CreateActivity`-（完成时）->`HomeActivity`

**搜索**导航如下：`HomeActivity`--> `SearchActivity`--> `ResultsActivity`( `ListActivity`) --> `ResultDetailsActivity`--> `UpdateActivity`-（完成时）-> `ResultDetailsActivity`（更新数据）。

目前，导航到一个新`Activity`的是通过`startActivity(intent)`方法。`Activity`但是，这会导致打开每个实例的多个实例。

我对Android很陌生。有人可以建议我如何避免这种情况吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-16T08:26:02.260

在您的 android 清单中，`<activity>`将`android:launchMode="singleTask"`

如需完整列表，请查看[活动文档](http://developer.android.com/guide/topics/manifest/activity-element.html)

在您的清单中：

```
 <activity android:name=".YourActivity"
              android:launchMode="singleTask"
              android:label="@string/app_name" /> 
```

注意：不要使用单例。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-16T08:26:37.093

设置以下任一标志可能会帮助您解决问题：

*   `Intent.FLAG_ACTIVITY_CLEAR_TOP`
*   `Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-16T08:25:49.740

在以下情况下使用`Intent`标志`startActivity`：

```
Intent intent = new Intent(this, MyActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

旗帜有很多种。

这会很有帮助： [android 单例活动](https://stackoverflow.com/questions/8131352/android-singleton-activity)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T08:29:10.670

管理活动的最佳形式是使用

startActivityForRestult（意图，ID）

使用此方法调用活动，您的 HomeActivity 可以管理 Override 方法中其他活动的结果

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
} 
```

您可以为不同的活动发送已知结果并对其进行管理。例如：（
*总是使用 startActivityForResult）*

HomeActivity --> SearchActivity --> ResultsActivity(ListActivity) --> ResultDetailsActivity --> UpdateActivity -（完成时）-> ResultDetailsActivity（更新数据）。按 Return 并发送 SEARCH_fINISHED -->UpdateActivity 捕获它并在 onActivityResult 方法和 finish() 中发送相同的结果 --> 与 searchActivity 相同 --> Home

这也可以帮助您：

Intent.FLAG_ACTIVITY_CLEAR_TOP
Intent.FLAG_ACTIVITY_REORDER_TO_FRONT

[http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-22T11:52:53.280

在 JoonSung Kim 发布的答案中添加一些内容，更改 addFlag 方法，该方法将抛出“无法解决错误”

改变：`intent.addFlag(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`

到：`intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`

代码应该是：

```
Intent intent = new Intent(this, MyActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

为了防止同一活动的多个实例更改标志

从 ：`intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`

到：`intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`

代码应该是：

```
Intent intent = new Intent(this, MyActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-31T13:41:46.860

我的问题`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);` 出在 Activity 的 onCreate(...) 方法中。

# paypal - PayPal Payments Advanced 是否支持需要付款（订阅按钮）？

> ID：10614570
> 
> 赞同：2
> 
> 时间：2012-05-16T08:20:21.603
> 
> 标签：paypal, paypal-subscriptions

是否可以在不离开网站的情况下使用 PayPal Payments Advanced 在网站上提供订阅按钮（订阅）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T17:24:26.357

是的。您“在整个结帐过程中让客户留在您的网站上”。从技术上讲，有一个 iframe 可以浏览到 PayPal，但客户并没有意识到这一点。这是一件好事，因为 PayPal 已经符合 PCI 标准，相信我，您不想申请。

[来源](https://www.paypal.com/webapps/mpp/paypal-payments-advanced)

# entity-framework - 实体框架代码第一个唯一列

> ID：10614575
> 
> 赞同：131
> 
> 时间：2012-05-16T08:20:49.143
> 
> 标签：entity-framework, data-annotations, entity-framework-4.3

我正在使用 Entity Framework 4.3 并使用 Code Fist。

我有一堂课

```
public class User
{
   public int UserId{get;set;}
   public string UserName{get;set;}
} 
```

创建数据库表时，如何告诉 Entity Framework UserName 必须是唯一的？如果可能的话，我更喜欢使用数据注释而不是配置文件。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2014-04-14T08:51:59.367

在 Entity Framework 6.1+ 中，您可以在模型上使用此属性：

```
[Index(IsUnique=true)] 
```

您可以在此命名空间中找到它：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

如果您的模型字段是字符串，请确保在 SQL Server 中未将其设置为 nvarchar(MAX)，否则您将在 Entity Framework Code First 中看到此错误：

> 表 'dbo.y' 中的列 'x' 的类型不能用作索引中的键列。

原因是这样的：

> SQL Server 保留所有索引键列的最大总大小限制为 900 字节。”

*（来自：http: [//msdn.microsoft.com/en-us/library/ms191241.aspx](http://msdn.microsoft.com/en-us/library/ms191241.aspx)）*

您可以通过在模型上设置最大字符串长度来解决此问题：

```
[StringLength(450)] 
```

您的模型现在在 EF CF 6.1+ 中将如下所示：

```
public class User
{
   public int UserId{get;set;}
   [StringLength(450)]
   [Index(IsUnique=true)]
   public string UserName{get;set;}
} 
```

**更新：**

如果您使用流利：

```
 public class UserMap : EntityTypeConfiguration<User>
  {
    public UserMap()
    {
      // ....
      Property(x => x.Name).IsRequired().HasMaxLength(450).HasColumnAnnotation("Index", new IndexAnnotation(new[] { new IndexAttribute("Index") { IsUnique = true } }));
    }
  } 
```

并在您的模型构建器中使用：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  // ...
  modelBuilder.Configurations.Add(new UserMap());
  // ...
} 
```

**更新 2**

对于 EntityFrameworkCore，另请参阅此主题：[https ://github.com/aspnet/EntityFrameworkCore/issues/1698](https://github.com/aspnet/EntityFrameworkCore/issues/1698)

**更新 3**

对于 EF6.2，请参阅：[https ://github.com/aspnet/EntityFramework6/issues/274](https://github.com/aspnet/EntityFramework6/issues/274)

**更新 4**

带有 EF Core 的 ASP.NET Core Mvc 2.2：

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid Unique { get; set; } 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-16T08:36:17.630

EF 不支持键以外的唯一列。如果您使用 EF 迁移，您可以强制 EF 在`UserName`列上创建唯一索引（在迁移代码中，而不是通过任何注释），但唯一性将仅在数据库中强制执行。如果您尝试保存重复值，您将不得不捕获由数据库触发的异常（违反约束）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-17T15:32:44.583

从您的代码中可以明显看出您使用的是 POCO。不需要另一个键：您可以按照[juFo](https://stackoverflow.com/users/187650/jufo)的建议添加索引。
如果您使用 Fluent API 而不是归因于 UserName 属性，您的列注释应如下所示：

```
this.Property(p => p.UserName)
    .HasColumnAnnotation("Index", new IndexAnnotation(new[] { 
        new IndexAttribute("Index") { IsUnique = true } 
    }
)); 
```

这将创建以下 SQL 脚本：

```
CREATE UNIQUE NONCLUSTERED INDEX [Index] ON [dbo].[Users]
(
    [UserName] ASC
)
WITH (
    PAD_INDEX = OFF, 
    STATISTICS_NORECOMPUTE = OFF, 
    SORT_IN_TEMPDB = OFF, 
    IGNORE_DUP_KEY = OFF, 
    DROP_EXISTING = OFF, 
    ONLINE = OFF, 
    ALLOW_ROW_LOCKS = ON, 
    ALLOW_PAGE_LOCKS = ON
) ON [PRIMARY] 
```

如果您尝试插入具有相同 UserName 的多个用户，您将收到带有以下消息的 DbUpdateException：

```
Cannot insert duplicate key row in object 'dbo.Users' with unique index 'Index'. 
The duplicate key value is (...).
The statement has been terminated. 
```

同样，列注释在 6.1 版之前的实体框架中不可用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-09-25T06:37:07.670

**在使用 FluentAPI 的 EF 6.2 中**，您可以使用`HasIndex()`

```
modelBuilder.Entity<User>().HasIndex(u => u.UserName).IsUnique(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-03-09T19:58:15.987

请注意，在 Entity Framework 6.1（当前处于测试阶段）中，将支持 IndexAttribute 来注释索引属性，这将自动在您的 Code First 迁移中生成（唯一）索引。

* * *

## 回答 #6

> 赞同：-12
> 
> 时间：2012-05-23T12:40:22.637

EF4.3 解决方案

**唯一用户名**

在列上添加数据注释：

```
 [Index(IsUnique = true)]
 [MaxLength(255)] // for code-first implementations
 public string UserName{get;set;} 
```

**唯一 ID** ，我在我的列上添加了装饰 [Key] 并完成。与此处描述的解决方案相同：[https ://msdn.microsoft.com/en-gb/data/jj591583.aspx](https://msdn.microsoft.com/en-gb/data/jj591583.aspx)

IE：

```
[Key]
public int UserId{get;set;} 
```

**替代答案**

使用数据注释

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
[Column("UserId")] 
```

使用映射

```
 mb.Entity<User>()
            .HasKey(i => i.UserId);
        mb.User<User>()
          .Property(i => i.UserId)
          .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
          .HasColumnName("UserId"); 
```

# linux-kernel - 将 64 位 linux 主机上的地址分配给 64 位 pcie 卡

> ID：10614576
> 
> 赞同：2
> 
> 时间：2012-05-16T08:20:56.343
> 
> 标签：linux-kernel, linux-device-driver, pci-bus, pci-e

我在 64 位 linux 主机上使用 64 位 PCI Express 卡，问题是它的条是 64 位，但总是得到一个位于 32 位地址范围内的地址，即 BAR 的高 32 位始终为零。

如何强制它使用真正的 64 位地址？我试图通过将引导时间参数覆盖到内核来强制执行它，以便内核可以枚举 pci 设备，但结果与 BIOS 相同。

Linux 不支持真正的 64 位地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:07:14.880

您可以尝试以下操作。首先在内核中启用 PAE（物理地址扩展）。然后使用 setpci 命令或从驱动程序，将高 32 位 bar 寄存器更改为非零值，如果您的端点设备在 pci 桥下，那么不要忘记更改 Pre-fetchable Base Upper 32 Bit 和 Pre- fetchable Limit Upper 32 位寄存器适当。

# blackberry - 在没有 GPS 的情况下在黑莓上获取当前位置

> ID：10614579
> 
> 赞同：0
> 
> 时间：2012-05-16T08:21:00.997
> 
> 标签：blackberry, geolocation

我需要获取设备的当前位置，为此我在黑莓中使用了 GPS 模式，我成功获得了，但是 GPS 在户外的天空下而不是在屋顶下工作，所以也许有另一种方法或另一种方法来获取室内的位置。

我尝试使用此示例代码：

[http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949](http://supportforums.blackberry.com/t5/Java-Development/Location-APIs-Start-to-finish/ta-p/571949)

并且同样的结果无法在室内获得位置它没有回报

希望有什么帮助和thnx回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:10:15.350

再次阅读该链接。它解释了如何使用从 OS 5.0 开始提供的 Geolocation API。这些位置是根据小区信息 (OS 5.0) 和 Wi-Fi 接入点 (OS 6.0) 获得的。

更新
阅读[本教程](http://docs.blackberry.com/en/developers/deliverables/34488/Geolocation_overview_1679739_11.jsp)，了解如何使用地理定位。

# c# - 实体框架，获取子类的类型？

> ID：10614581
> 
> 赞同：2
> 
> 时间：2012-05-16T08:21:10.870
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个名为 Requestparent 的课程。我有 3 个类，分别称为 requesttype1、requesttype2、requesttype3，所有 3 个类都继承自 RequestParent。

在其中一个屏幕中，我需要进行查询以显示网格中所有类型的所有打开的请求

类似于：打开日期-类型-打开者。

如果我查询 requestparent，我不会得到类型。

另一种解决方案是对子对象进行 3 个不同的查询。

EF 自动创建了一个鉴别器列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:33:13.417

如果您对基本类型进行选择查询；然后 if 创建子表的连接语句并创建子类型的实体。

因此，即使您对基表进行查询，它也会创建子类型的实体。您可以只使用`Entity.GetType()`语句来获取实体的类型。

例如，假设您有一个名为 Base 的基本实体和两个名为 Derived1 和 Derived2 的派生实体。然后，如果您运行以下选择语句；

```
List<Base> temp = (from o in context.Base
           select o).ToList<Base>(); 
```

您将拥有 Derived 1 和 Derived 2 类型的实体。仅使用 oftype 就足以确定实体的类型。例如;

```
if (temp[0].GetType() == typeof(X))
   {
          .... 
   } 
```

# sed - 用“d”删除保留空间的sed模式空间是否也一样？

> ID：10614583
> 
> 赞同：4
> 
> 时间：2012-05-16T08:21:14.220
> 
> 标签：sed

有人可以解释为什么会这样吗？

这是预期的：

```
$ echo -e "foo\nbar" | sed -n 'h; x; p'
foo
bar 
```

我把每一行放在保持空间中，然后交换保持空间和模式空间，然后打印模式空间，这样每一行都被打印了。现在，为什么以下不同？

```
$ echo -e "foo\nbar" | sed -n 'h; d; x; p' 
```

我认为不会，因为我在交换之前删除了模式空间，所以无论如何都应该将存储的行放回模式空间。之后应该是空的*容纳空间*`x;`，对吗？我删除模式空间，**然后**交换。我保存的线路在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:25:52.633

使用`d`时，模式空间被清除，下一行被读取，处理从脚本的开头重新开始。因此，您实际上永远不会到达`x`and`p`步骤，而只是复制到保留空间并删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T08:25:27.650

我猜它与以下行有关`man sed`：

> d 删除模式空间。开始下一个循环。

以下按预期工作：

```
$ echo -e "foo\nbar" | sed -n 'h; s/.*//; g; p'
foo
bar 
```

很抱歉打扰各位了。

# asp.net - 从 ASP.NET 网站创建独立的 Windows 应用程序

> ID：10614584
> 
> 赞同：2
> 
> 时间：2012-05-16T08:21:15.223
> 
> 标签：asp.net, windows, web

我正在开发一个 ASP.NET 网站。用户在线时可以打开网页并处理数据。但我想让他们能够在离线时工作，并在他们再次在线时提交更改。离线应用程序必须非常易于运行，我不想为此开发单独的 Windows 应用程序。

所以我想构建一个可执行文件，它在启动时首先启动本地 IIS，然后在用户浏览器中打开我网站的启动页面（本地可用）。

当然，如果这个可执行文件可以与我的网站文件、IIS 和 SQL Server Express 一起安装在用户系统上，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:48:24.267

好的，我重新阅读了您的问题，发现您将在所有客户端系统上安装本地 IIS 和本地数据库。

那么解决方案就很简单了。

**申请表（主要形式）**

1.  创建一个 Windows 窗体应用程序。
2.  在窗体上放置一个 WebBrowser 控件和一个 StatusStrip 控件。
3.  添加两个名为 LocalStartUrl 和 OnlineStartUrl 的字符串资源，其中包含本地和在线网站主页/启动页面的地址。
4.  在 Form_Load 上，检查在线 Internet 连接并相应地在 webbrowser 控件中启动 LocalStartUrl 或 OnlineStartUrl。您可以显示消息框并使用状态栏来通知用户。

**同步模块：**

数据库同步模块在定时器/单独的线程中运行，并在后台将本地数据库与在线数据库同步。它将任何未保存的更改发送到服务器，并将任何丢失的数据从服务器下载到本地数据库。您需要控制此模块的速度，以免用户在浏览其他网站或流畅使用应用程序等方面遇到困难。它应该缓慢而稳定，并且一次只发送/请求小块数据。

在离线模式下，它只是定期检查在线连接。一旦可以找到互联网连接，就会通知用户。如果他们允许，它会切换到在线模式。否则，用户将继续离线工作，直到应用程序关闭并再次启动。

在在线模式下，同步模块与在线数据库同步数据。这不会影响用户，因为他们没有连接到这个数据库。相反，它们连接到在线网站和数据库。

简化这种方法需要努力，但最终很容易实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:27:15.717

这不仅仅是一项任务。这将是一系列同步工作的任务。

您的 Windows 应用程序执行以下操作：

*   将离线更改写入磁盘文件/数据库等。
*   定期检查您的网站/ftp 站点的在线可用性。
*   只要发现网站可用，并且有一些缓存更改，请将文件提交到网站/ftp 站点。

您的服务器执行以下操作：

*   每当收到文件时，请检查其有效性和完整性。如果发现正确，请将其放在特定文件夹中。
*   您服务器上的服务会监视该文件夹，并在其中找到任何文件后立即处理该文件
*   该服务在处理后将文件移动到另一个文件夹（备份）。

# c# - 向按钮添加评论

> ID：10614588
> 
> 赞同：0
> 
> 时间：2012-05-16T08:21:26.813
> 
> 标签：c#, wpf, button, tags

我需要使用 c# 语言将标签添加到 asp.net 中的按钮。每当鼠标指向按钮时，我都需要可以查看标签。我正在设计一个 wpf 应用程序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:26:17.823

如果这是 WPF，我认为您不需要标签，因为标签在指向控件时不可见，但工具提示是。

```
<Button Content="Submit" Tooltip="Click this to submit" 
    Command="{Binding SubmitCommand}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:24:21.887

我认为您在谈论工具提示：

```
<Button Content="Submit">
<Button.ToolTip>
    <ToolTip>
        <StackPanel>
            <TextBlock FontWeight="Bold">Submit Request</TextBlock>
            <TextBlock>Submits the request to the server.</TextBlock>
        </StackPanel>
    </ToolTip>
</Button.ToolTip> 
```

# iphone - 使用 NSFilemanager 存储 NSMutableArray 时崩溃

> ID：10614589
> 
> 赞同：0
> 
> 时间：2012-05-16T08:21:29.603
> 
> 标签：iphone, objective-c, xcode, nsmutablearray, nsfilemanager

所以我试图将数组保存到文件中。这应该在以下代码中完成，但通过调用该 `addProjectsObject`方法，程序会崩溃并出现以下错误代码：

```
***** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteData count]: unrecognized selector sent to instance 0x7eeb800'** 
```

我发布了我认为与问题相关的代码，我还需要提到在同一个*filePath*中存储了另一个文件，它运行良好。我突然想到路径可能是问题，但是由于两个文件的名称不同，这不应该是问题吗？

```
-(void) addProjectsObject:(NSString *)newProject{

    projects = [self getProjectsFromDisk];
    [projects addObject:newProject];
    [self saveProjectsToDisk];

}   

-(NSMutableArray *) getProjectsFromDisk{

    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName =  @"projects";
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];

    if(![[NSFileManager defaultManager] fileExistsAtPath:fileAtPath])
    {
        [[NSFileManager defaultManager] createFileAtPath:fileAtPath contents:nil attributes:nil];}

    NSMutableArray* temp = [[NSMutableArray alloc]initWithArray:[NSData dataWithContentsOfFile:fileAtPath]]; 

    return temp;

}

-(void) saveProjectsToDisk {

    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName =  @"projects";
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];

    if(![[NSFileManager defaultManager] fileExistsAtPath:fileAtPath])
    {
        [[NSFileManager defaultManager] createFileAtPath:fileAtPath contents:nil attributes:nil];}

    [projects writeToFile:fileAtPath atomically:NO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:24:35.093

这是 cz 您分配了不适当的指针，您将 NSConcreteData 对象指针分配给 NSMutablearray 并尝试调用某些数组方法，因此发生了这种情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:30:36.987

`NSData`不是。**_** `NSArray`

`[[NSMutableArray alloc]initWithArray:]`需要一个 NSArray 的实例。
`[NSData dataWithContentsOfFile:fileAtPath]`返回一个 NSData 的实例。
这两个不会一起工作。

如果`projects`是一个`NSMutableArray`简单的使用这个：

```
NSMutableArray* temp = [NSMutableArray arrayWithContentsOfFile:fileAtPath]; 
```

其余的代码也可以被剥离。无需检查文件是否存在，甚至无需在两行后创建文件即可覆盖它。

这也可以：

```
- (NSMutableArray *)projectsFromDisk {
    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName =  @"projects";
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];
    NSMutableArray* temp = [NSMutableArray arrayWithContentsOfFile:fileAtPath];
    if (!temp) {
        // if file can't be read (does not exist, or invalid format) create an empty array
        temp = [NSMutableArray array];
    }
    return temp;
}

- (void)saveProjectsToDisk {
    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName =  @"projects";
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];
    [projects writeToFile:fileAtPath atomically:NO];
} 
```

# flash - 在 Flash/Flex 中读取电影文件的属性

> ID：10614591
> 
> 赞同：0
> 
> 时间：2012-05-16T08:21:32.567
> 
> 标签：flash, apache-flex

如果我有一个电影文件，如果可能的话，我怎样才能获得它的属性，例如长度、比特率等？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:52:57.063

You can get all the information you need using the FLVPlayback component, either drag one on to the stage if using the Flash IDE or add to the library and attach dynamically.

All the properties you need like bitrate, duration (accessed through metadata object) are available to you, check out the docs on the [FLVPlayback Class](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/video/FLVPlayback.html)

# c# - c#中的十进制误解？

> ID：10614592
> 
> 赞同：10
> 
> 时间：2012-05-16T08:21:32.947
> 
> 标签：c#, .net, clr, decimal

*（在尝试分析其`decimal`工作原理时）&& 在阅读[了@jonskeet 文章](http://csharpindepth.com/Articles/General/Decimal.aspx) 并查看[了 msdn](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)并思考了过去 4 小时后，* 我有一些问题：

在[这个链接](http://mathsfirst.massey.ac.nz/Algebra/Decimals/SigFig.htm)中，他们说的很简单：

`1.5 x 10^2`有`2`重要数字

`1.50 x 10^2`有`3`重要数字。

`1.500 x 10^2`有`4`重要数字等...

好的...我们明白了。

*来自乔恩的文章：*

```
 sign * mantissa / 10^exponent 
```

> 像往常一样，符号只有一位，但有 96 位尾数和 5 位指数

```
 ^ _ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^___ ^^^^^

 1 _                     96                         5 
```

好的

所以 max **mantiss** val =`2^96-1 = 79228162514264337593543950335`这是：（`7.9228162514264*10^28` *根据我的 iphone ......在 windows calc 中看不到指数表示。）*

注意 ：

`7.9228162514264*10^28`有**14**位有效数字（根据上面的例子）

现在指数中 5 位的部分无关紧要，因为它在*分母*中- 所以我需要 2^0 的 min val

**问题 #1：**

msdn 说：![在此处输入图像描述](../Images/acdf123402a1acb50dda7969c0a67f32.png) `28-29 significant digits`

但根据我的样本（*`1.500 x 10^2`有`4`有效数字*），他们有**2 个** 有效数字，即`7.9`（7 和 9）。

如果 msdn 会写：

```
±79228162514264337593543950335 × 10^0 
```

我会理解这一点，因为所有有效数字都**在表达式中**。

*为什么他们写 28-29 但显示 2 ？*

**问题2 ：**

值 0.5 将如何显示十进制表示（螳螂 && 指数）？

*最大分母可以是`2^32-1 --> 31`*

多谢你们。

**问题 #3：**

1+96+5 = 102 位。

msdn 说：

> decimal 关键字表示 128 位数据类型。

```
128-102 = 26 
```

可以从文章中了解为什么没有使用那些 26 位

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:30:14.393

他们只给出了两位有效数字的*范围*，但分别指定了*精度*。这就是该范围被列为“近似范围”的原因。

0.5的`decimal`表示形式是尾数为 5 和指数为 1（以与正常相反的方式处理，即它*实际上*是-1）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T08:41:30.113

> 为什么他们写 28-29 但显示 2？

为了可读性。它说“近似范围”，并且 7.9E28 比 79228162514264337593543950335（此处为 E0，而不是 E1）更具可读性。

> 值 0.5 将如何显示十进制表示（螳螂 && 指数）？

指数的范围是 -28...0，但是，它作为绝对值 0...28 存储（并通过构造函数参数接收）。

所以 0.5 将具有与 5 相同的尾数表示，指数为 -1（存储为 1）。

# jquery - jQuery mobile 的图片库

> ID：10614598
> 
> 赞同：0
> 
> 时间：2012-05-16T08:21:48.827
> 
> 标签：jquery, jquery-plugins, mobile, jquery-mobile, gallery

我想在我的移动应用程序上使用 jQuery 移动图库插件。我想找到的是一种将所有图像放在一条线上的具有滑动功能的图像。

我尝试过 PhotoSwipe 和其他一些图片库，但它们都在单独的页面上打开图像，无法在缩略图上滑动。

谁能指出我正确的方向来寻找合适的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:26:35.647

试试[http://swipejs.com/](http://swipejs.com/)

人们已经成功地将它与 jQuery Mobile 一起使用。

如果遇到问题，您也可以在这里的论坛提问：http: [//forum.jquery.com/jquery-mobile](http://forum.jquery.com/jquery-mobile)

# php - 如何编写 Yii 扩展？有什么好的参考吗？

> ID：10614604
> 
> 赞同：7
> 
> 时间：2012-05-16T08:22:35.693
> 
> 标签：php, jquery, yii, yii-extensions

有谁知道关于如何编写 Yii 框架扩展的任何好的参考资料？我一直在网上搜索，我找不到任何东西。

如果没有这样的事情，我需要采取哪些步骤（一般）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T08:30:29.273

看官方教程

[http://www.yiiframework.com/doc/guide/1.1/en/extension.create](http://www.yiiframework.com/doc/guide/1.1/en/extension.create)

我认为这对于创建 Yii Extensions 来说已经足够了，也是一个好的开始

# cakephp - 具有翻译行为的 Cakephp

> ID：10614607
> 
> 赞同：2
> 
> 时间：2012-05-16T08:22:40.680
> 
> 标签：cakephp, behavior, translate

我已经设置了翻译行为并且它工作正常，但我需要更多的东西。如果我没有翻译这些字段，我需要 find() 以默认语言返回我的字段（本例为 eng）。我怎么能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:43:26.800

默认情况下，如果 cake 找不到给定语言的语言翻译，它将默认为应用程序中设置的语言。所以这应该已经起作用了。确认您已填写所有英文翻译。如果这仍然不起作用，您将需要提供一些代码和不起作用的示例。

# iphone - 使用 GCD、块和核心数据冻结（而不是崩溃）

> ID：10614623
> 
> 赞同：3
> 
> 时间：2012-05-16T08:23:28.260
> 
> 标签：iphone, core-data, grand-central-dispatch, freeze

我最近重写了我的核心数据驱动的数据库控制器，以使用 Grand Central Dispatch 在后台管理获取和导入。控制器可以在 2 个 NSManagedContext 上操作：

1.  `NSManagedObjectContext *mainMoc`主线程的实例变量。此上下文仅用于主线程或`dipatch_get_main_queue()`全局队列对 UI 的快速访问。

2.  `NSManagedObjectContext *bgMoc`用于后台任务（为表的 NSFetchedresultsController 导入和获取数据）。此后台任务仅由用户定义的队列触发：（`dispatch_queue_t bgQueue` 数据库控制器对象中的实例变量）。

当执行更大或更复杂的谓词时，在后台获取表的数据不会阻塞用户 UI。

在我的表视图控制器中获取 NSFetchedResultsController 的示例代码：

```
-(void)fetchData{

dispatch_async([CDdb db].bgQueue, ^{

        NSError *error = nil;
        [[self.fetchedResultsController fetchRequest] setPredicate:self.predicate];
        if (self.fetchedResultsController && ![self.fetchedResultsController performFetch:&error]) {

            NSSLog(@"Unresolved error in fetchData %@", error);
        }

        if (!initial_fetch_attampted)initial_fetch_attampted = YES;
        fetching = NO;

        dispatch_async(dispatch_get_main_queue(), ^{

            [self.table reloadData];
            [self.table scrollRectToVisible:CGRectMake(0, 0, 100, 20) animated:YES];
        });

    }); 
```

} // fetchData 函数结束

`bgMoc``mainMoc`与保存合并使用`NSManagedObjectContextDidSaveNotification`：

```
- (void)bgMocDidSave:(NSNotification *)saveNotification {

    // CDdb - bgMoc didsave - merging changes with main mainMoc
    dispatch_async(dispatch_get_main_queue(), ^{

    [self.mainMoc mergeChangesFromContextDidSaveNotification:saveNotification];
     // Extra notification for some other, potentially interested clients
       [[NSNotificationCenter defaultCenter] postNotificationName:DATABASE_SAVED_WITH_CHANGES object:saveNotification];

    });
}

- (void)mainMocDidSave:(NSNotification *)saveNotification {

    // CDdb - main mainMoc didSave - merging changes with bgMoc
    dispatch_async(self.bgQueue, ^{
     [self.bgMoc mergeChangesFromContextDidSaveNotification:saveNotification];
     });
} 
```

NSfetchedResultsController 委托只实现了一种方法（为简单起见）：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {

    dispatch_async(dispatch_get_main_queue(), ^{

        [self fetchData];

    });

} 
```

这样，我试图遵循 Apple 对 Core Data 的建议：每个线程 1 个 NSManagedObjectContext。我知道这种模式并不完全干净，最后有两个原因：

1.  `bgQueue`挂起后不一定会触发同一个线程，但由于它是串行的，所以应该没什么关系（从来没有 2 个线程尝试访问`bgMoc`专用于它的 NSManagedObjectContext）。
2.  有时表视图数据源方法会向 NSFetchedResultsController 询问来自 bgMoc 的信息（因为 fetch 是在 bgQueue 上完成的），例如节数、在节数中获取的对象等。

具有此缺陷的事件这种方法在 95% 的应用程序运行时间中运行良好，直到...

**这是我的问题：**

有时，**应用程序会随机冻结但不会崩溃**。它不会对任何触摸做出响应，使其恢复运行的唯一方法是完全重新启动它（切换回后台无济于事）。没有抛出异常，也没有任何内容打印到控制台（我在 Xcode 中为所有异常设置了断点）。

我尝试使用 Instruments（尤其是时间配置文件）对其进行调试，以查看主线程上是否发生了一些困难，但没有出现任何问题。

我知道 GCD 和 Core Data 是这里的主要嫌疑人，但我不知道如何跟踪/调试它。

让我指出，当我仅将所有任务异步分派到队列时也会发生这种情况（到处使用**dispatch_async ）。**这让我觉得这不仅仅是标准的僵局。

是否有任何可能性或提示我如何获得更多信息？一些额外的调试标志、仪器魔术技巧或构建设置等......

非常感谢任何关于可能原因的建议以及（或）如何以更好的方式实现 NSFetchedResultsController 的后台获取和后台导入的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:31:10.240

`NSFetchedResultsController`我的第一个也是非常糟糕的错误是在后台队列中获取数据。

测试后发现，我对获取时间太敏感了。`fetchData`当我可以生成的最长获取时间实际上是一秒钟的时间时，我没有必要将执行置于后台线程，从而使与核心数据相关的代码过于复杂。这为非常小的性能增益（如果有的话）引入了太多的复杂性和不确定性。

我通过将 fetchData 执行和所有 NSFetchedResultsControllerDelegate 方法移到主线程（通过删除 GCD 代码来简化代码）来辞职。

完成此操作后，我不再需要`mainMocDidSave:`并从侦听 `NSManagedObjectContextDidSaveNotification`for 主线程上下文中注销。我还可以删除和取消注册 DATABASE_SAVED_WITH_CHANGES 通知发布。

这大大简化了“合并”机制，因为从此时起，只有后台线程上下文将其更改与主线程上下文合并（保存时）。我们称其为一种定向更改通知。

`NSFetchedResultsControllerDelegate`方法将在合并后拾取主线程上下文更改时自动触发。

另一个重要的事情是将dispatch_async更改为**dispatch_sync**：

```
- (void)bgMocDidSave:(NSNotification *)saveNotification {

    // CDdb - bgMoc didsave - merging changes with main mainMoc
        // Previously was: dispatch_async
        // dispatch_sync in this place may prevent from overlapping merging in some cases (many blocks in background queue)
    dispatch_sync(dispatch_get_main_queue(), ^{

    [self.mainMoc mergeChangesFromContextDidSaveNotification:saveNotification];
     // !!! Extra notification NO needed anymore

    });
} 
```

**经验法则：**简化和最小化线程和 NSManagedContexts 的数量。我体验**到即使对于非常大的应用程序，拥有 2 个上下文也足够了**：

1.  importContext 在专用于 GCD 队列（必须是串行队列）中运行。请记住将其保存在队列块代码的末尾。
2.  mainConstext 在主 UI 线程（我称之为 READ 上下文 ;-）上操作，以便在为 UI（演示）提取数据时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:48:16.600

DATABASE_SAVED_WITH_CHANGES 通知看起来有点可疑：假设 bgMoc 保存。然后`bgMocDidSave:`触发并将更改与 mainMoc 合并，这很好。然后你触发一个通知，最终（我假设`mainMocDidSave:`在引发 DATABASE_SAVED_WITH_CHANGES 时触发）将更改合并回 bgMoc （这是起源的地方！）。这听起来对我来说不是正确的方法。此外，您可能想要检查`bgMocDidSave:`通知是否来自 bgMoc。如果 mainMoc 保存，则更改`bgMocDidSave:`也会触发。

# linux - 在同一台 Ubuntu 机器上运行的独立进程如何相互通信？

> ID：10614625
> 
> 赞同：2
> 
> 时间：2012-05-16T08:23:32.507
> 
> 标签：linux, ipc, inter-process-communicat

这个问题是独立于语言和连接方法的。实际上找到方法是个问题。我知道我可以像`prog1 | prog2`在 shell 中一样通过调用直接对两个进程进行管道传输，并且我已经阅读了有关 RPC 和 Sockets 的一些内容。但是一切都太抽象了，无法真正掌握它。例如，我不清楚套接字是如何创建的，是否每个进程都需要创建一个套接字，或者多个进程是否可以使用同一个套接字相互传输消息，或者我是否可以完全摆脱套接字。

有人能解释一下 Linux 中的进程间通信是如何工作的以及我有哪些选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:55:42.413

**管道**

在生产者-消费者场景中，您可以使用管道，它是 IPC。管道就是顾名思义，它将接收器和源连接在一起。在他的 shell 中，源是标准输出，而接收器是标准输入，所以 cmd1 | cmd2 只是将 cmd1 的输出连接到 cmd2 的输入。

使用管道，它会为您创建两个文件描述符。您可以将一个用于接收器，另一个用于源。创建管道后，您将分叉，一个进程使用文件描述符中的一个，而另一个进程使用另一个。

**其他工控机**

IPC 多种多样：管道（在内存中）、命名管道（通过文件）、套接字、共享内存、信号量、消息队列、信号等。它们都有优缺点。网上和书籍中有很多关于它们的文献。在这里描述它们是很困难的。

基本上，您必须了解每个进程都有自己的内存，与其他进程分开。因此，您需要找到用于交换数据的共享资源。资源可以是“物理的”，例如网络（用于套接字）或大容量存储（用于文件），也可以是“抽象的”，例如管道或信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:56:02.967

如果其中一个进程是生产者，另一个是消费者，那么您可以进行共享内存通信。为此，您需要一个信号量。一个进程将锁定信号量然后写入共享内存，另一个进程将锁定信号量并读取值。由于您使用信号量，因此会注意脏读/写。

# c# - 提供 TextAlignment 和 FontFamily 属性的超类/接口

> ID：10614626
> 
> 赞同：1
> 
> 时间：2012-05-16T08:23:34.570
> 
> 标签：c#, wpf

我正在尝试设置几个不同的 WPF RichTextBox 控件的属性，例如 List、ListItem、Paragraph。例如，我要设置的属性是 FontFamily 和 TextAlignment。

我想尽可能通用，所以我有一个用于 TextAlignment 的设置器，一个用于 FontFamily 的设置器，等等，但我找不到提供所有这些属性的通用超类。

你能告诉我我正在寻找什么超类，如果可能的话，如何找出哪些超类提供了不同的属性？

**编辑：**案例的更详细解释：
FontFamily 继承自 TextElement，在 Paragraph 和 ListItem
中 TextAdjust 显然在每个类中都继承自 Block，但 ListItem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:33:49.567

包含所有`Font...`属性的通用基类是[TextElement](http://msdn.microsoft.com/en-us/library/system.windows.documents.textelement.aspx)，而[ListItem](http://msdn.microsoft.com/en-us/library/system.windows.documents.listitem_properties)`TextAlignment`是一个属性。

当您浏览 MSDN 页面时，您可以自己轻松地找到它。左侧有一个树视图，显示类的构造函数、字段、方法、属性和事件。如果单击其中一项，则会显示在该类中定义的项列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:38:27.863

您尝试设置的所有属性都是依赖属性。您可以使用[DependencyObject.SetValue](http://msdn.microsoft.com/en-us/library/ms597473.aspx)方法，例如：

```
DependencyObject x;
x.SetValue(Block.TextAlignmentProperty, TextAlignment.Justify); 
```

这只是找到正确的依赖属性描述的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:39:03.980

您可以覆盖给定 UIElement 的元数据。

例如，如果要设置所有 FrameworkElements 的默认 FontSize：

```
System.Windows.Documents
              .TextElement
              .FontSizeProperty
              .OverrideMetadata(typeof(FrameworkElement), new PropertyMetadata(5)); 
```

UIElement/FrameworkElement 是通用的，如果您只想将这些默认值应用于少数类型，您需要为您想要的每种类型重复该行。

# c# - 无法访问母版页内容占位符中的标签

> ID：10614630
> 
> 赞同：1
> 
> 时间：2012-05-16T08:23:53.027
> 
> 标签：c#, asp.net, master-pages, contentplaceholder

我的母版页包含以下内容：

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    <asp:Label ID="User" runat="server" Text="Welcome, " Visible="false"></asp:Label>
</asp:ContentPlaceHolder> 
```

我正在尝试像这样访问标签：

```
Label welcomeLabel;
ContentPlaceHolder cPlaceHolder;            

cPlaceHolder = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");

if (cPlaceHolder != null)
{
    welcomeLabel = (Label)cPlaceHolder.FindControl("User");
    if (welcomeLabel != null)
    {
        welcomeLabel.Text = "Welcome, " + u.Name;
        welcomeLabel.Visible = true;
    }
 } 
```

我已经检查过 ContentPlaceHolder1 确实找到了，并且在它上面使用 HasControls() 返回 true，但我似乎无法访问标签。

帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:29:23.223

我也有同样的问题。

我所做的是

```
 MasterPage ctl00 = FindControl("ctl00") as MasterPage;
ContentPlaceHolder cplacehld = ctl00.FindControl("ContentPlaceHolder1") as ContentPlaceHolder;
                Label label1= cplacehld.FindControl("User") as Label; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T22:06:26.440

这个问题困扰了我大约两个小时，直到我意识到如果我的页面上有一个 asp:Content 标记，并且 contentplaceholderID 设置为母版页中 contentplaceholder 的 ID，我将永远无法访问 contenplacholder 中的任何控件. asp:Content 页面始终与 MasterPage 内容合并，即使 asp:Content 标记在您的内容页面上为空。为了提供默认内容，我将标签移到 contentplaceholder 标记之外，并将可见性设置为 false。如果我随后动态确定我的 asp:Content 标记没有任何内容，那么我只需将标签可见性设置为 true 以显示我的默认内容。不完全优雅，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:54:34.183

尝试：

```
((Label)this.Page.Master.FindControl("User")).Text = "Welcome, " + u.Name;   
((Label)this.Page.Master.FindControl("User")).Visible = true; 
```

# linux - 在 Linux 中劫持应用程序和网络之间的通信

> ID：10614631
> 
> 赞同：3
> 
> 时间：2012-05-16T08:23:53.927
> 
> 标签：linux, networking, network-programming, linux-kernel, embedded-linux

我有一个可以被视为接入点的嵌入式系统。有一个程序在该系统中运行，并与连接到该接入点的设备执行一些网络通信。它正在发送包含一些诊断信息（一种数据结构）的 UDP 数据包并接收命令。问题是有时该传出数据结构的某些字段未填充数据（例如，有零或一些垃圾）。我需要每次都正确填写这些字段，并且我知道应该在那里输入什么值。

我需要完成的另一项任务是过滤进入该程序的传入数据包（我知道它侦听的端口） - 通常我需要简单地传递它们，但偶尔（例如，当我从传感器获取一些信息时）它是有必要用我将生成的新数据包完全替换它们。

我有几个想法，从巧妙地使用 iptables 和 pcap 到编写我自己的内核模块。我不拥有该嵌入式应用程序的来源，因此我无法将此功能嵌入其代码中。性能在这里至关重要，我想听听您的建议：我应该追求什么？编写自己的内核模块对我来说似乎是最好的解决方案，但我没有网络黑客的经验，所以也许有一些其他方法更适合这个问题。任何意见将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:55:59.863

一种标准方法是使用 libnetfilter_queue 直接拦截和修改数据包。在尝试编写自己的内核模块之前，您至少应该尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:46:41.767

您可以在用户空间中执行此操作。只需编写一个接收数据包的服务器更改它们并再次发送它们。您必须配置应用程序才能使用您的本地主机作为目标 IP（或配置您的系统以使其具有目标地址）。它是典型的“中间人”设置。

# asp-classic - 特殊格式的 DateAdd()

> ID：10614633
> 
> 赞同：0
> 
> 时间：2012-05-16T08:24:15.160
> 
> 标签：asp-classic, vbscript

我已经尝试了所有我看到的将一个月添加到某个日期然后以特定格式返回的方法，但我不知所措。这是我的代码，但我需要对其进行格式化：

```
replace( formatdatetime( dateadd( "m" , 1 , request("date") ), 0 ) , "/" , "-" ) & "' ) 
```

`request("date")`是`yyyyy-dd-mm hh:mm:ss`格式，这就是我需要新日期的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:48:28.003

这可能会有所帮助：

```
FormatDateTime(DateAdd("M",1,DateSerial(Left(request("date"),4),Mid(request("date"),9,2),Mid(request("date"),6,2))) & " " & Mid(request("date"),12,8),d,0) 
```

它基本上将字符串转换为本机格式的有效日期，添加 1 个请求的月份，然后重建字符串。

注意： request("date") 看起来好像它返回当前日期时间，因此以这种方式运行它可能会生成一个大约一秒的最终值，如果这是一个问题，那么您最好将静态值存储在变量，否则这应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:20:59.253

以下应该可以完美运行：

```
replace( formatdatetime( dateadd( "m" , 1 , cDate(request("date")) ), 0 ) , "/" , "-" ) 
```

请注意使用该`cDate`函数将值显式转换为日期。

编辑：

我删除了你代码的最后一部分，`& "' )`否则它给了我一个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T10:28:48.127

处理日期时，特别重要的是要注意正确的数据（子）类型。将字符串提供给需要日期的函数（并依赖“VBScript - 和您的本地设置 - 将做正确的事情”）是危险的。

使用替换永远不会改变日期部分的顺序。

FormatDateTime 取决于本地/区域设置，应避免将其作为灾难的可靠途径。

解决此问题的一种方法 + 与 VBScript 中精美格式相关的大多数其他问题是使用 .Net **System.Text.StringBuilder**：

给定 Lib.vbs：

```
' Lib.vbs - simple VBScript library/module
' use
'  ExecuteGlobal goFS.OpenTextFile(<PathTo\Lib.vbs>).ReadAll()
' to 'include' Lib.vbs in you main script

Class ToBeAShamedOf
  Public a
  Public b
End Class ' ToBeAShamedOf

Class cFormat
  Private m_oSB
  Private Sub Class_Initialize()
    Set m_oSB = CreateObject("System.Text.StringBuilder")
  End Sub ' Class_Initialize
  Public Function formatOne(sFmt, vElm)
    m_oSB.AppendFormat sFmt, vElm
    formatOne = m_oSB.ToString()
    m_oSB.Length = 0
  End Function ' formatOne
  Public Function formatArray(sFmt, aElms)
    m_oSB.AppendFormat_4 sFmt, (aElms)
    formatArray = m_oSB.ToString()
    m_oSB.Length = 0
  End Function ' formatArray
End Class ' cFormat 
```

和 main.vbs：

```
' main.vbs - demo use of library/module Lib.vbs

' Globals
Dim gsLibDir : gsLibDir = ".\"
Dim goFS     : Set goFS = CreateObject("Scripting.FileSystemObject")

' LibraryInclude
ExecuteGlobal goFS.OpenTextFile(goFS.BuildPath(gsLibDir, "Lib.vbs")).ReadAll()

WScript.Quit demoDateFormat()
WScript.Quit main()

Function main()
  Dim o : Set o = New ToBeAShamedOf
  o.a = 4711
  o.b = "whatever"
  WScript.Echo o.a, o.b
  main = 1 ' can't call this a success
End Function ' main

Function demoDateFormat()
  Dim sD   : sD       = "2012-05-16 01:02:03" ' near future; not yyyyy!
  Dim dtD  : dtD      = CDate(sD)
  Dim dtDM : dtDM     = DateAdd("m", 1, dtD)
  Dim oFmt : Set oFmt = New cFormat
  WScript.Echo oFmt.formatArray( _
      "   sD: {1}{0}  dtD: {2}{0} dtDM: {3}{0}dtDM': {4}" _
    , Array(vbCrLf, sD, dtD, dtDM, oFmt.formatOne("{0:yyyy-MM-dd hh:mm:ss}", dtDM)))
  demoDateFormat = 0 ' seems to be decent
End Function ' demoDateFormat 
```

你会得到：

```
cscript main.vbs
   sD: 2012-05-16 01:02:03
  dtD: 16.05.2012 01:02:03
 dtDM: 16.06.2012 01:02:03
dtDM': 2012-06-16 01:02:03 
```

（要在[这个答案](https://stackoverflow.com/a/10615874/603855)的上下文中看到）

# c++ - 在矢量 C++ 中保存大数据

> ID：10614635
> 
> 赞同：0
> 
> 时间：2012-05-16T08:24:21.323
> 
> 标签：c++, vector, symbol-table, large-data

我在一个文件中有大量数据，我需要读取并对其进行一些概率处理，因此我需要计算整个文件中每个单词的出现次数并对其进行更多计算。这些文件包含 100 万条半记录，每条记录大约 6 个字符串。我使用向量来保存这些数据，但程序在保存大约 8000 条记录后崩溃。有没有办法将此向量保存在计算机上而不是程序的内存中？！.. 或者我从搜索中听到了一种叫做符号表的东西，但我不明白它是什么意思或如何使用它。

这个问题的任何解决方案？

这是主文件

```
#include <iostream>
#include <vector>
#include <string>
#include <fstream>
#include <istream>

#include "Tuple.h"
#include "VerbPair.h"
using namespace std;

string filename = "verb-argument-tuples.txt";
vector<Tuple> mytuples;
vector<VerbPair> verbpairs;

vector<Tuple> readTupleFile(string filename)
{
    cout << "Started parsing the file of tuples..." << endl;
    vector<Tuple> mt;
    string temp;
    Tuple t;

    ifstream infile;
    infile.open(filename);
    while(!(infile.eof()))
    {
        getline(infile,temp);
        t.parseTuple(temp);
        mt.push_back(t);
    }

    infile.close();
    cout << "Done with reading tuples file..." << endl;
    return mt;
}

vector<VerbPair> getVerbPairs(vector<Tuple> mytuples)
{
    vector<VerbPair> pairs;
    bool flag = false;
    VerbPair temp;
    for(int i=0;i<mytuples.size();i++)
    {
        flag = false;
        for(int h=0;h<pairs.size();h++)
        {
            if (mytuples[i].verb.compare(pairs[h].verb) == 0)
            {
                pairs[h].freq += mytuples[i].count;
                flag =true;
                break;
            }
        }
        if(! flag)
        {
            temp.verb = mytuples[i].verb;
            temp.freq = mytuples[i].count;
            pairs.push_back(temp);
        }
    }
    return pairs;
}

int numOfLines(string filename)
{
    int numLines = 0;
    string j ="";
    ifstream infile;
    infile.open(filename);

    while(!infile.eof())
    {
        getline(infile,j);
        numLines++;
    }
    infile.close();
    return numLines;
}

void train(string filename)
{
    mytuples = readTupleFile(filename);
    verbpairs = getVerbPairs(mytuples);
}
void store(string filename)
{

}
void load(string filename)
{

}

int main()
{
    cout << "Started Application..." << endl;
    train(filename);
    cout << "Size of verb pairs is " << verbpairs.size() << endl;
} 
```

元组.h

```
#include <iostream>
#include <vector>
#include <string>
#include <fstream>
#include <istream>
using namespace std;

class Tuple
{
public:
    int count;
    string verb;
    string frame;
    vector<string> args;
private:
    int i;
    int h;
    string p;

public:
    void parseTuple(string s)
    {
        cout << "parsing.... " << s << endl;
        i=0;
        h=0;
        p="";
        while(s[i] != 32 && s[i]!= 9) //that means temp[i] is a number
        {
            h = h*10 + (s[i] - '0');
            i++;
        }
        this->count = h;
        i++;

        // loops for everything but not the space and tab
        while(s[i] != 32 && s[i]!= 9)
        {
            p +=s[i];
            i++;
        }
        this->verb = p;
        i++;

        p="";
        while(s[i] != 32 && s[i]!= 9)
        {
            p +=s[i];
            i++;
        }
        this->frame = p;
        i++;

        p="";
        while(i < s.length())
        {
            while(s[i] != 32 && s[i]!= 9 && i < s.length())
            {
                p += s[i];
                i++;
            }
            this->args.push_back(p);
            i++;
            p="";
        }
    }
}; 
```

和 VerbPair.h

```
#include <iostream>
#include <vector>
#include <string>
#include <fstream>
#include <istream>
using namespace std;

class VerbPair
{
public:
    string verb;
    int freq;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:55:17.387

Can you try with using reserve function with vector. Since you possibly know that you have large data, you should also use reserve function.

Also, use map in this case, since using map, you will be able to count the number of occurences easily.

For the crash, you will have to show us the code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:25:53.520

既然有重复数据，为什么要使用`vector`. 只需使用`map<string,int>`. 每次遇到一个单词时，增加地图中的相应值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:32:45.410

你的代码中有很多影子变量，比如你`filename`全局声明变量，然后在三行后在本地使用它。你对元组向量和动词对向量做同样的事情。

也许一些封装会使您的调试任务更容易。

另一个样式问题是这样的函数：

```
vector<VerbPair> getVerbPairs(vector<Tuple> mytuples)
{
    vector<VerbPair> pairs;
    bool flag = false;
    VerbPair temp;
    for(int i=0;i<mytuples.size();i++)
    {
        flag = false;
        for(int h=0;h<pairs.size();h++)
        {
            if (mytuples[i].verb.compare(pairs[h].verb) == 0)
            {
                pairs[h].freq += mytuples[i].count;
                flag =true;
                break;
            }
        }
        if(! flag)
        {
            temp.verb = mytuples[i].verb;
            temp.freq = mytuples[i].count;
            pairs.push_back(temp);
        }
    }
    return pairs;
} 
```

有几件事使调试变得困难。第一个是影子，第二个是你不要让编译器帮助你。

```
vector<VerbPair> getVerbPairs(const vector<Tuple>& mytuples)
{
  vector<VerbPair> pairs;
  bool flag = false;
  VerbPair temp;
  for(int i=0;i<mytuples.size();i++)
    {
      flag = false;
      for(int h=0;h<pairs.size();h++)
    {
      if (mytuples[i].verb.compare(pairs[h].verb) == 0)
        {
          pairs[h].freq += mytuples[i].count;
          flag =true;
          break;
        }
    }
      if(! flag)
    {
      temp.verb = mytuples[i].verb;
      temp.freq = mytuples[i].count;
      pairs.push_back(temp);
    }
    }
  return pairs;
} 
```

这样编译器会告诉你是否试图弄乱 mytupes 向量。

# sql - oracle bitand 函数

> ID：10614637
> 
> 赞同：2
> 
> 时间：2012-05-16T08:24:31.730
> 
> 标签：sql, oracle

我对 oracle bitand 函数感到困惑。我知道它用于控制是否设置了两个位。但是，被设置是什么意思。何时以及为何使用它。如果你能根据一个真实的例子给出一个例子，那对我来说会很高兴。感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T11:38:11.677

在二进制中，“set”表示“值为 1”。“未设置”表示“值为 0”。

来自 BITAND 的 Oracle 文档：

“结果分几个步骤计算。首先，每个参数 A 都替换为值 SIGN(A)*FLOOR(ABS(A))。这种转换具有将每个参数截断为零的效果。接下来，每个参数 A (现在必须是整数值）转换为 n 位二进制补码二进制整数值。这两个位值使用按位与运算组合。最后，得到的 n 位二进制补码值转换回 NUMBER。

简而言之，此函数截断其参数，将它们转换为二进制数（目前限制为 128 位），将两个二进制数相加，并将二进制数转换回 NUMBER 的结果返回。

以下是所有可能的 0 和 1 组合的结果：

```
SELECT BITAND(0, 0) AS "0, 0",  -- i.e. 0 AND 0 = 0
       BITAND(0, 1) AS "0, 1",  -- i.e. 0 AND 1 = 0
       BITAND(1, 0) AS "1, 0",  -- i.e. 1 AND 0 = 0
       BITAND(1, 1) AS "1, 1"   -- i.e. 1 AND 1 = 1
  FROM DUAL; 
```

一个更复杂的例子是将 11 和 5 用与运算。在二进制中，十进制的 11 变为“1011”。十进制的 5 变为二进制的“0101”。如果您将这些值与在一起，如

```
1 0 1 1
0 1 0 1
-------
0 0 0 1 
```

你得到 1 个二进制，当转换回十进制时仍然是 1。

分享和享受。

# java - 使用 itText 将随机文件附加到 pdf

> ID：10614640
> 
> 赞同：2
> 
> 时间：2012-05-16T08:24:38.687
> 
> 标签：java, itext

我正在尝试使用 iText 将文件附加到 pdf 文档。文件可以是图片、xml、txt、pdf等。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:38:44.953

您可以将此方法与`src`原始文档`dest`的路径、新创建的 PDF`attachments`的路径以及要附加的文件的路径数组一起使用：

```
public void addAttachments(
  String src, String dest, String[] attachments) throws IOException, DocumentException {
  PdfReader reader = new PdfReader(src);
  PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));
  for (int i = 0; i < attachments.length; i++) {
    addAttachment(stamper.getWriter(), new File(attachments[i]));
  }
  stamper.close();
}

protected void addAttachment(PdfWriter writer, File src) throws IOException {
  PdfFileSpecification fs =
    PdfFileSpecification.fileEmbedded(writer, src.getAbsolutePath(), src.getName(), null);
  writer.addFileAttachment(src.getName().substring(0, src.getName().indexOf('.')), fs);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:38:10.360

简短的问题，简短的回答：D

[itext API：addFileAttachment](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfWriter.html#addFileAttachment%28java.lang.String,%20com.itextpdf.text.pdf.PdfFileSpecification%29)

# android - Android 编码更高效

> ID：10614642
> 
> 赞同：1
> 
> 时间：2012-05-16T08:24:42.840
> 
> 标签：android, memory-management

嗨，我一直在使用我的第一个 android 应用程序，它开始变得有点缓慢和滞后。我以前做过 iPhone 应用程序，我知道我必须发布一些东西。所以我想我的问题是在避免内存泄漏方面为 android 编码的最佳实践是什么。从 JSON 提要加载数据并通常简化我的代码以使其更有效地改善用户体验？

您可以提供的任何帮助都会受到赞赏和对 android 的热情，但只是想确保我做对了

到目前为止，这是我的代码示例

```
public class HomeActivity extends ListActivity {

    private MergeAdapter adapter=null;
    private ArrayAdapter<String> arrayAdapter=null;
    private ArrayAdapter<String> arrayAdapter2=null;
    private ArrayAdapter<String> arrayAdapter3=null;
    private static final String apiKey = "46fhr636gdbc737hjd92932dd"; 
    private static final String apiUser = "android-app-v1";
    private static final String ChosenTeam = null;
    private static String ChosenMethod = null; 
    public String fulldata = null;
    public String chosenLeagueId = "40";
    public List<String> newsList = null;
    public List<String> newsList2 = null;
    public List<String> newsList3 = null;

    public int newsAmount = 0;

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    //add Time Stamp to URL

    //public String chosenMethod; 

    String newsFeedRequest = "1.0/website/" + chosenLeagueId + "/news?timestamp=" + unixTimeStamp;
    String fixturesFeedURL = "https://website.com/_services/api/" + newsFeedRequest;
    private int container;

    private static String buildHmacSignature(String pKey, String pStringToSign)
    {
      String lSignature = "None";
      try
      {
        Mac lMac = Mac.getInstance("HmacSHA256");
        SecretKeySpec lSecret = new SecretKeySpec(pKey.getBytes(), "HmacSHA256");
        lMac.init(lSecret);

        byte[] lDigest = lMac.doFinal(pStringToSign.getBytes());
        BigInteger lHash = new BigInteger(1, lDigest);
        lSignature = lHash.toString(16);
        if ((lSignature.length() % 2) != 0) {
          lSignature = "0" + lSignature;
        }
      }
      catch (NoSuchAlgorithmException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }
      catch (InvalidKeyException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }

      return lSignature;
    }

    public void checkPreferences(){

        SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
        final String ChosenMethodPref = preferences.getString("ChosenMethod", ChosenMethod);
        Log.v("myapp", "ChosenMethod Home = " + ChosenMethodPref);

         if (ChosenMethodPref.equals("Team")) {
             setContentView(R.layout.homeactteam2);
             newsAmount = 5;

         } else {
             setContentView(R.layout.homeact);
             newsAmount = 10;
         }
}

    public void loadData(){String myhash = buildHmacSignature(apiKey, fixturesFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(fixturesFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList.add(newsTitleDict.getString("title"));
             newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    arrayAdapter3 = new ArrayAdapter<String>(this, R.layout.single_item, newsList3);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);
            View header2 = inflater.inflate( R.layout.homeheader2, list, false);
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header2);
        adapter.addAdapter(arrayAdapter2);
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    }   
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        checkPreferences();
        loadData();

        Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
                ChosenMethod = "null";
                SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("ChosenMethod", ChosenMethod);            
                editor.commit();
                previousScreen.putExtra("FullData", fulldata);
                startActivity(previousScreen);

            }
        });

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getItemId() == R.id.home) {

        startActivity(new Intent(HomeActivity.this, HomeActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.match) {

        startActivity(new Intent(HomeActivity.this, MatchActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.teams) {

        startActivity(new Intent(HomeActivity.this, TeamsActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.twitter) {

        startActivity(new Intent(HomeActivity.this, TwitterActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.info) {

        startActivity(new Intent(HomeActivity.this, InfoActivity.class));

        return(true);
  }

    return(super.onOptionsItemSelected(item));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:43:00.293

您应该看看[**Romain Guy**](http://www.youtube.com/watch?v=N6YdwzAvwOA)[的精彩演示](http://www.youtube.com/watch?v=N6YdwzAvwOA)**。**

 **它会给你一个你正在寻找的东西的内部视图，你也会得到一堆方便的提示:)

例如，除了使用`AsyncTasks`和`Handlers`避免重载 gui 线程之外，您可以将大部分变量声明为**`final`**. 自定义 itemrenderer 实现将显着加快您的 gui（滚动），并且 - 尽管这不是一个好的 Java 实践 - 使用直接引用而不是使用直接引用，`getters`并且`setters`也会在一定程度上提高性能。**

# logging - 如何在企业库日志记录应用程序块上使用 RollingFlatFileTraceListener 管理日志的保存期限？

> ID：10614644
> 
> 赞同：1
> 
> 时间：2012-05-16T08:24:45.450
> 
> 标签：logging, enterprise-library, enterprise, enterprise-library-5, logging-application-block

Enterprise Library(v5.0) 记录应用程序块的滚动平面文件跟踪侦听器具有滚动日志文件的选项。（[http://msdn.microsoft.com/en-us/library/ff664768(v=pandp.50)#trace_rolling](http://msdn.microsoft.com/en-us/library/ff664768(v=pandp.50)#trace_rolling)）

它们是“时间”和“文件大小”。

*   我可以通过控制“Max Archived Files”和“RollSizeKB”来管理日志文件的整体大小。
*   或者，我可以通过控制“Max Archived Files”和“RollInterval”来管理日志文件的最长保存期限。

但是，我想同时管理日志文件的最大保存期限和整体大小。

我该怎么做？我需要制作和使用自己的 TraceListener 吗？

# .net - 以编程方式附加模板的性能问题

> ID：10614646
> 
> 赞同：1
> 
> 时间：2012-05-16T08:24:49.153
> 
> 标签：.net, vsto

我正在为 Word 2010 创建一个插件，它与另一个第三方 Word 模板集成并以编程方式加载它。下面显示的是加载第 3 方加载项的代码：

```
Application.AddIns.Add("3rdPartyAddinName.dot"); 
```

我不能像往常那样将此`.dot`文件放在`%AppData%\Microsoft\Word\Startup`文件夹中（由于业务需求）。

当我们通过代码附加模板时，我们面临着巨大的性能问题。一个空白的 Word 文档大约需要**35-40 秒**才能启动并变得可编辑。但是，当我们将此模板放在 STARTUP 文件夹中时，启动时间会大幅减少到 2-3 秒左右。

任何有关以编程方式加载模板的正确方法的指针都将受到高度赞赏。

# session - Tomcat，会话管理员。带有负 TTL 的会话是什么意思？

> ID：10614649
> 
> 赞同：3
> 
> 时间：2012-05-16T08:24:57.250
> 
> 标签：session, tomcat7, ttl

我在活动 HTTPSessions 列表中的 Tomcat 7 的会话管理员中找到了具有负 TTL 的会话。这是什么意思？为什么这些会话在超时会话到期后没有死？

已经有超过 100 个负 TTL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:41:17.603

这可能意味着三件事之一。可能性之间存在一些重叠。

如果会话在生成会话列表和显示给您的时间之间过期，将显示 -1。

如果会话已通过 TTL，但使会话过期的后台线程尚未运行，您将看到一个小的负数，表示会话通过其过期时间后的秒数。

如果会话配置为永不过期（0 或负 TTL），那么您将看到一个负数，即 TTL - 自上次访问以来的秒数。

显然有一些范围可以澄清适用哪种情况。Tomcat 拥有所有必要的信息来确定它是什么。

# arrays - Array 和 Split 命令用于创建二维数组

> ID：10614650
> 
> 赞同：5
> 
> 时间：2012-05-16T08:25:02.680
> 
> 标签：arrays, vb6, multidimensional-array, split

我在使用 split 命令填充数组时遇到了一些问题。

我目前拥有的字符串如下

```
MyString = "Row1 Column1[~]Row1 Column2[~]Row1 Column3" & vbNewLine & _
"Row2 Column1[~]Row2 Column2[~]Row2 Column3" & vbNewLine & _
"Row3 Column1[~]Row3 Column2[~]Row3 Column3" & vbNewLine & _
"Row4 Column1[~]Row4 Column2[~]Row4 Column3" 
```

我有一个数组，我希望它是多维的，并且希望每个 Row# Column# 根据其数量位于数组的正确部分。

例如

```
MyArray(1,1) = "Row1 Column1"
MyArray(2,1) = "Row2 Column1"
MyArray(3,1) = "Row3 Column1"
MyArray(4,1) = "Row4 Column1"

MyArray(1,2) = "Row1 Column2"
MyArray(2,2) = "Row2 Column2"
MyArray(3,2) = "Row3 Column2"
MyArray(4,2) = "Row4 Column2"

MyArray(1,3) = "Row1 Column3"
MyArray(2,3) = "Row2 Column3"
MyArray(3,3) = "Row3 Column3"
MyArray(4,3) = "Row4 Column3" 
```

现在我了解了如何使用 split 命令填充一维数组

```
MyArray = Split(MyString, vbNewLine) 
```

这将意味着

```
MyArray(1) = "Row1 Column1[~]Row1 Column2[~]Row1 Column3"
MyArray(2) = "Row2 Column1[~]Row2 Column2[~]Row2 Column3"
MyArray(3) = "Row3 Column1[~]Row3 Column2[~]Row3 Column3"
MyArray(4) = "Row4 Column1[~]Row4 Column2[~]Row4 Column3" 
```

但我不知道如何使用拆分命令来填充第二个维度。

这是可能的吗？如果是这样的话？
如果不可能，任何人都可以建议如何实际填充它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:30:33.980

除了 String 或包含 String 的 Variant 之外，您不能对任何东西使用 Split()。如果要生成二维字符串数组，您将遍历 Split() 返回的数组，并对每个字符串运行 Split()。以下功能应该做你想做的事：

```
Private Function SplitTo2DArray(ByRef the_sValue As String, ByRef the_sRowSep As String, ByRef the_sColSep As String) As String()

    Dim vasValue                    As Variant
    Dim nUBoundValue                As Long
    Dim avasCells()                 As Variant
    Dim nRowIndex                   As Long
    Dim nMaxUBoundCells             As Long
    Dim nUBoundCells                As Long
    Dim asCells()                   As String
    Dim nColumnIndex                As Long

    ' Split up the table value by rows, get the number of rows, and dim a new array of Variants.
    vasValue = Split(the_sValue, the_sRowSep)
    nUBoundValue = UBound(vasValue)
    ReDim avasCells(0 To nUBoundValue)

    ' Iterate through each row, and split it into columns. Find the maximum number of columns.
    nMaxUBoundCells = 0
    For nRowIndex = 0 To nUBoundValue
        avasCells(nRowIndex) = Split(vasValue(nRowIndex), the_sColSep)
        nUBoundCells = UBound(avasCells(nRowIndex))
        If nUBoundCells > nMaxUBoundCells Then
            nMaxUBoundCells = nUBoundCells
        End If
    Next nRowIndex

    ' Create a 2D string array to contain the data in <avasCells>.
    ReDim asCells(0 To nUBoundValue, 0 To nMaxUBoundCells)

    ' Copy all the data from avasCells() to asCells().
    For nRowIndex = 0 To nUBoundValue
        For nColumnIndex = 0 To UBound(avasCells(nRowIndex))
            asCells(nRowIndex, nColumnIndex) = avasCells(nRowIndex)(nColumnIndex)
        Next nColumnIndex
    Next nRowIndex

    SplitTo2DArray = asCells()

End Function 
```

例子：

```
Dim asCells() As String

asCells() = SplitTo2DArray(MyString, vbNewline, "~") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T09:45:58.073

这是一个更快的 hack，它只是交换 1D 和 2D 数组而没有循环：

```
Option Explicit

Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal Length As Long)

Private Sub Form_Load()
    Dim MyString        As String
    Dim MyFlatArray     As Variant
    Dim MyArray         As Variant

    '--- split source string by column&row separator
    MyString = "Row1 Column1[~]Row1 Column2[~]Row1 Column3" & vbNewLine & _
        "Row2 Column1[~]Row2 Column2[~]Row2 Column3" & vbNewLine & _
        "Row3 Column1[~]Row3 Column2[~]Row3 Column3" & vbNewLine & _
        "Row4 Column1[~]Row4 Column2[~]Row4 Column3"
    MyFlatArray = Split(Replace(MyString, "[~]", vbCrLf), vbCrLf)
    '--- convert to 2D array
    ReDim MyArray(1 To 3, 1 To 4) As String
    pvSwapArrays MyArray, MyFlatArray
    '--- access row 2
    Debug.Print MyArray(1, 2)
    Debug.Print MyArray(2, 2)
    Debug.Print MyArray(3, 2)
End Sub

Private Sub pvSwapArrays(vDst As Variant, vSrc As Variant)
    Dim nDstType        As Integer
    Dim nSrcType        As Integer
    Dim pSrcArray       As Long
    Dim pDstArray       As Long
    Dim lTemp           As Long

    '--- sanity check types (VARIANT.vt)
    Call CopyMemory(nDstType, vDst, 2)
    Call CopyMemory(nSrcType, vSrc, 2)
    Debug.Assert (nSrcType And &H2000) <> 0 '--- check if VT_ARRAY
    Debug.Assert nDstType = nSrcType '--- check if dest type matches src (&H2008 = VT_ARRAY | VT_BSTR)
    '--- get VARIANT.parray
    Call CopyMemory(pSrcArray, ByVal VarPtr(vSrc) + 8, 4)
    Call CopyMemory(pDstArray, ByVal VarPtr(vDst) + 8, 4)
    '--- swap SAFEARRAY.pvData
    Call CopyMemory(lTemp, ByVal pSrcArray + 12, 4)
    Call CopyMemory(ByVal pSrcArray + 12, ByVal pDstArray + 12, 4)
    Call CopyMemory(ByVal pDstArray + 12, lTemp, 4)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:45:42.257

这是基于 Variant 类型包含数组的能力的另一种方法。我们有一个“数组数组”，而不是二维数组。

```
Option Explicit

Private Function SplitSplit(ByRef Delimited As String) As Variant
    Dim Rows() As String
    Dim AryOfArys As Variant
    Dim I As Long

    Rows = Split(Delimited, vbNewLine)
    ReDim AryOfArys(UBound(Rows))
    For I = 0 To UBound(Rows)
        AryOfArys(I) = Split(Rows(I), "[~]")
    Next
    SplitSplit = AryOfArys
End Function

Private Sub Form_Load()
    Dim MyString As String
    Dim MyAry As Variant

    MyString = "Row1 Column1[~]Row1 Column2[~]Row1 Column3" & vbNewLine _
             & "Row2 Column1[~]Row2 Column2[~]Row2 Column3" & vbNewLine _
             & "Row3 Column1[~]Row3 Column2[~]Row3 Column3" & vbNewLine _
             & "Row4 Column1[~]Row4 Column2[~]Row4 Column3"

    MyAry = SplitSplit(MyString)

    AutoRedraw = True
    DumpAry MyAry
End Sub

Private Sub DumpAry(ByRef AryOfArys As Variant)
    Dim Row As Long, Col As Long

    For Row = 0 To UBound(AryOfArys)
        For Col = 0 To UBound(AryOfArys(Row))
            Print AryOfArys(Row)(Col),
        Next
        Print
    Next
End Sub 
```

这里的好处是“参差不齐的数组”，其中每一行可以有不同数量的列。

# validation - 验证非必填字段

> ID：10614651
> 
> 赞同：6
> 
> 时间：2012-05-16T08:25:05.190
> 
> 标签：validation, jsf-2, primefaces

我有这些代码行来验证电子邮件地址：

```
<h:outputText value="#{labels.eMail}: " />
<p:inputText size="30" maxlength="50" validatorMessage="Please provide a valid e-mail address" value="#{personelView.eMail}">
  <f:validateRegex pattern=".+@.+\.[a-zA-Z]+" />
</p:inputText> 
```

当我将电子邮件地址字段留空并提交表单时，它会给出验证错误。为什么 JSf 这样做？难道不应该只用上面的代码验证电子邮件字段吗？我什至尝试添加：

```
required="false" 
```

还是不行。有人对这个案子有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T08:50:10.670

您的`inputText`值正在根据您的值进行验证`<f:validateRegex pattern=".+@.+\.[a-zA-Z]+" />`，如果它的值无效，您会收到错误消息，因此您需要改进您的正则表达式，以便它匹配您的模式或接受空字符串...

所以包装它`()`并添加一个`?`应该做的工作

尝试

```
<f:validateRegex pattern="(.+@.+\.[a-zA-Z]+)?"/> 
```

# xmpp - 围绕 Smack XMPP 的 Netty 包装器

> ID：10614653
> 
> 赞同：0
> 
> 时间：2012-05-16T08:25:15.333
> 
> 标签：xmpp, netty, openfire, smack

有没有人推荐一个围绕 smack/xmpp 的网络基础包装器。我需要一个客户通过 xmpp/telnet/ssh 等谈论基于文本的协议。

XMPP 有点不同，因为有一个 XMPPConnection，但是我需要使用不同的 xmpp 对等体，并且在连接我的协议时需要更改每个 xmpp 对等体的管道。

问候， 林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:01:05.107

查看**[netty-xmpp](https://github.com/xose/netty-xmpp)**（Netty 的 XMPP 解码器/编码器）。

# gnuplot - Gnuplot 图例顺序

> ID：10614654
> 
> 赞同：9
> 
> 时间：2012-05-16T08:25:21.993
> 
> 标签：gnuplot

有人知道如何在不更改绘图命令顺序的情况下更改键中的顺序吗？默认情况下，键与各个图的标题具有相同的顺序。

例如：我首先用实心绘制一个误差带，然后将平均值绘制为实线。现在我在顶部（在键中）有错误带标题，然后是实线的标题。但我想反其道而行之。

最好的祝愿

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-13T10:12:33.570

只需使用

```
set key invert 
```

更改键条目的顺序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T11:38:55.627

如果不诉诸丑陋的黑客，我就无法知道......这是一个如此丑陋的黑客：

```
plot sin(x) with filledcurves notitle, \
     cos(x) with lines, \
     NaN with filledcurves title 'sin(x)' lc rgb "#ff0000" 
```

基本上，我们照常绘制前两个图（除了我们从第一个图中删除标题）。然后我们制作一个“空”图 ( `plot NaN`)，其样式和标题与您在键中所需的相同......

# php - PHP中不区分大小写的子字符串首次出现替换

> ID：10614658
> 
> 赞同：1
> 
> 时间：2012-05-16T08:25:35.847
> 
> 标签：php, regex, preg-replace

我想执行不区分大小写的子字符串首次外观替换。

我试过这段代码：

```
$product_name_no_manufacturer = preg_replace("/$product_manufacturer/i","",$product_name, 1);
$product_name_no_manufacturer = trim($product_name_no_manufacturer); 
```

但在某些情况下它不起作用。

什么时候 -

```
$product_name = "3M 3M LAMP 027";

$product_manufacturer = "3m"; 
```

我得到的结果是：

> “3M 灯 027”

但是当参数不同时-

```
$product_name = "A+k A+k-SP-LAMP-027";

$product_manufacturer = "A+k"; 
```

我得到的结果是：

> “A+k A+k-SP-LAMP-027”

为什么 preg_replace 不替换的第一次出现`A+k`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:29:38.950

[`preg_quote()`](http://www.php.net/manual/en/function.preg-quote.php)就是你要找的。

尽管

`. \ + * ? [ ^ ] $ ( ) { } = ! < > | : -`

是模式中的特殊字符，您必须先将它们转义（A+k 变为 A\+k）。

编辑：[这里的例子](http://codepad.org/cqPzJotL)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:28:49.117

[`+`](http://www.regular-expressions.info/repeat.html)是 Regex 中的特殊字符（“匹配前面的标记一次或多次”），因此您必须对其进行转义。每当您将字符串插入正则表达式时，请使用 转义它[`preg_quote()`](http://www.php.net/manual/en/function.preg-quote.php)，因为它可能包含特殊字符（在这种情况下会导致看似奇怪的结果）。

```
$quoted = preg_quote($product_manufacturer, '/');
$product_name_no_manufacturer = preg_replace("/$quoted/i", "", $product_name, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:30:28.010

`+`在正则表达式中有特殊的手段，你应该逃避它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:24:20.040

Actually, this can be solved without any regular expressions. There is a useful function [strtr](http://php.net/manual/en/function.strtr.php). So, you can use it like that:

```
$product_name_no_manufacturer 
         = strtr( $product_manufacturer, array( $product_name => '' ) ); 
```

This will be more faster than regexp and I think more convenient.

# java - 输入没有可行的替代方案

> ID：10614659
> 
> 赞同：5
> 
> 时间：2012-05-16T08:25:38.603
> 
> 标签：java, parsing, antlr

我有一个关于我的语法的小问题。我想解析字符串，如下所示：

```
 "(ICOM LIKE '%bridge%' or ICOM LIKE '%Munich%')" 
```

我最终得到了以下语法（比我知道的需要复杂一点）：

// 旨在解析一个完整的 BQS 形成的 Query

```
grammar Logic;

options {
    output=AST;
}

tokens {
  NOT_LIKE;
}

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/
 // precedence order is (low to high): or, and, not, [comp_op, geo_op, rel_geo_op, like, not like, exists], ()
 parse  
    : expression EOF -> expression
    ; // ommit the EOF token

 expression
    : query
    ;       

 query  
    : term (OR^ term)*    // make `or` the root
    ;

 term   
    : factor (AND^ factor)*
    ;

 factor
  :  (notexp -> notexp) ( NOT LIKE e=notexp  -> ^(NOT_LIKE $factor $e))?
  ;

 notexp
  :  NOT^ like
  |  like
  ;

 like // this one has to be completed (a lot)
    : atom (LIKE^ atom)*
    ;

 atom   
    : ID 
    | | '(' expression ')' -> expression
    ;

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/
// GENERAL OPERATORS: 
//NOTLIKE   :   'notlike' | 'NOTLIKE'; // whitespaces have been removed
LIKE    :   'like' | 'LIKE';

OR          :   'or' | 'OR';
AND         :   'and' | 'AND';
NOT         :   'not' | 'NOT';

//ELEMENTS 
CONSTANT_EXPRESSION : DATE | NUMBER | QUOTED_STRING;    
ID          :   (CHARACTER|DIGIT)+; 

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ;

fragment DATE       :   '\'' YEAR '/' MONTH '/' DAY (' ' HOUR ':' MINUTE ':' SECOND)? '\'';

fragment QUOTED_STRING :    '\'' (CHARACTER)+ '\'' ; 

//UNITS
fragment CHARACTER :    ('a'..'z' | 'A'..'Z'|'.'|'\''|'%'); // FIXME: Careful, should be all ASCII
fragment DIGIT  :   '0'..'9' ;
fragment DIGIT_SEQ  :(DIGIT)+;
fragment DEL    :   SPACE ',' SPACE ; //Delimiter + may be space behind
fragment NUMBER :   (SIGN)? DIGIT_SEQ ('.' (DIGIT_SEQ)?)?; // should be given in decimal degrees, North is 0 and direction is clockwise, range is 0 to 360
fragment SIGN   :   '+' | '-';
fragment YEAR   :   DIGIT DIGIT DIGIT DIGIT;
fragment MONTH  :   DIGIT DIGIT;
fragment DAY    :   DIGIT DIGIT;
fragment HOUR   :   DIGIT DIGIT;
fragment MINUTE :   DIGIT DIGIT;
fragment SECOND :   DIGIT (DIGIT)? ('.' (DIGIT)+)?;

fragment SPACE : (' ')?;// used to increase compatibility 
```

事情是，我在创建 AST 时收到了这条消息：

```
line 1:11 no viable alternative at input ''%bridge%''
line 1:35 no viable alternative at input ''%Munich%'' 
```

生成的树虽然是正确的（至少就我而言）：

![antlr 可行的 ast 树](../Images/55b9d9bd017e69c8b57bc3c411f5d3aa.png)

那么，谁能给我提示一下那里出了什么问题？我认为字符包含正确解析此表达式所需的所有额外字符。. .

谢谢 ！

像往常一样，一些Java代码来快速测试语法：

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {

    // the expression
    String src = "(ICOM LIKE '%bridge%' or ICOM LIKE '%Munich%')";

    // create a lexer & parser
    //LogicLexer lexer = new LogicLexer(new ANTLRStringStream(src));
    //LogicParser parser = new LogicParser(new CommonTokenStream(lexer));

    LogicLexer lexer = new LogicLexer(new ANTLRStringStream(src));
    LogicParser parser = new LogicParser(new CommonTokenStream(lexer));

    // invoke the entry point of the parser (the parse() method) and get the AST
    CommonTree tree = (CommonTree)parser.parse().getTree();

    // print the DOT representation of the AST 
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT(tree);
    System.out.println(st);
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T18:07:00.283

我看到3个问题：

## 1

您的`atom`规则与 epsilon 匹配（无）：

```
atom   
 : ID 
 | | '(' expression ')' -> expression
 ; 
```

*（注意里面的“虚无” `| |`）*

导致你的语法模棱两可。我想应该是：

```
atom   
 : ID 
 | '(' expression ')' -> expression
 ; 
```

## 2

你`fragment CHARACTER`匹配一个单引号，而这个单引号也表示`fragment QUOTED_STRING`.

我想`CHARACTER`应该是这样的：

```
fragment CHARACTER : ('a'..'z' | 'A'..'Z' | '.' | '%'); 
```

## 3

在您的解析器规则中没有任何地方与 token 匹配`CONSTANT_EXPRESSION`，因此您发布的 AST 永远不可能由您发布的语法生成的解析器创建。我想你想在这样的`atom`规则中匹配它：

```
atom   
 : ID 
 | CONSTANT_EXPRESSION
 | '(' expression ')' -> expression
 ; 
```

通过上面概述的更改，我得到以下 AST，没有任何错误被打印到控制台：

![在此处输入图像描述](../Images/3ac0a2c91ab90c837190866d3ec982c5.png)

# python - Python - 如果输入无效，则返回到函数的开头？

> ID：10614673
> 
> 赞同：3
> 
> 时间：2012-05-16T08:26:26.800
> 
> 标签：python, int

我试图捕捉一个输入错误——唯一有效的输入是一个整数。

如果输入了非整数，我希望它返回到 func 的开头并重试：

```
def setItorator():
 try:
  iterationCap = int(raw_input("Please enter the number of nibbles you want to make: "))
  print "You will make", iterationCap, "nibbles per file"
 except ValueError:
  print "You did not enter a valid integer, please try again"
  setItorator()
 return iterationCap 

if __name__ == "__main__":
 iterationCap = setItorator() 
```

如果第一个输入有效，则此方法有效，如果输入无效，则返回到 func 的开头，但它似乎没有将正确的有效传递回主 func。我检查了子函数，它看到了正确的变量和正确的类型（int），它确实出现了，但我得到一个错误：

```
UnboundLocalError: local variable 'iterationCap' referenced before assignment 
```

如果第一个输入有效（例如“10”），仅当第一个输入无效（例如“a”后跟“10”）时，我不会看到此错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:30:10.273

尝试这样的事情。

```
while True:
   try:
    i = int(raw_input("Enter value "))
    break
   except ValueError:
    print "Bad input"

print "Value is ",i 
```

您当前的方法将为每个错误递归调用您的函数，这不是一个好习惯。该错误是因为在您的异常处理程序块中，您没有定义`iterationCap`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:29:31.247

你需要`return setItorator()`在except语句中。现在，您只是调用函数并忽略输出。

# qt - MS Word 不会读取用 QTextDocumentWriter 编写的 ODF 文件

> ID：10614681
> 
> 赞同：2
> 
> 时间：2012-05-16T08:26:51.950
> 
> 标签：qt, odf, opendocument

我尝试了 QTextDocumentWriter 并设法生成 ODF 文件复制粘贴[示例代码](http://doc.qt.nokia.com/qq/qq27-odfwriter.html#writingthebill)。代码看起来很简单。但是虽然OpenOffice打开生成的文档很好，但是我的MS Word 2010报错了。如果我选择忽略该错误，Word 会打开文档，但它看起来与 OpenOffice 中的不一样（看起来像是格式丢失的一部分）。

有没有人遇到过同样的情况。有没有我错过的作家配置可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T22:02:08.070

MS Word 不打开版本 >1.1 的 .odt 微软质量和对标准的支持一如既往地好。

# c# - jquery ajax 调用表单身份验证问题

> ID：10614684
> 
> 赞同：0
> 
> 时间：2012-05-16T08:27:16.077
> 
> 标签：c#, javascript, jquery, asp.net, iis-7

我从页面每 10 秒后对服务器进行 jquery ajax 调用。现在，当用户向服务器发出正常请求（没有 ajax 调用）时（如果他保持空闲 2 分钟），我希望用户退出。我已经制作了一个超时 2 分钟的表单身份验证 cookie，但问题是自动 jquery ajax 调用（每 10 秒后）不会使用户未经身份验证。我该如何处理这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:34:17.557

清除间隔并在 2 分钟后删除身份验证 cookie：

```
var intervalID=window.setInterval(yourajaxfunction,10000);

window.setTimeout(  
    function() {  
        clearInterval(intervalID);   // cancel the ajax requests
        clearCookie(); // remove the authentication cookie locally
    },  
    120000  // 2 minutes timeout
); 
```

我猜在服务器端检查身份验证cookie - 如果找不到，则用户被迫重新进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:31:06.000

您可以在@服务器端进行验证功能。每个 ajax 请求首先调用此验证，如果有效，则正常执行您的脚本。如果无效，您可以清除 cookie。

# java - Corba 编组和代理使用 writeReplace

> ID：10614686
> 
> 赞同：1
> 
> 时间：2012-05-16T08:27:22.880
> 
> 标签：java, serialization, proxy, corba

> **可能的重复：**
> [CORBA 中是否有与 writeReplace 等效的方法？](https://stackoverflow.com/questions/13252304/is-there-any-equivalent-to-writereplace-in-corba)

我的 JavaEE 应用程序的某些部分有一个自制的持久性组件，它返回集合和映射代理。这个组件由我的 EJB 使用，这些 EJB 可以通过 Web 服务访问。

不幸的是，当使用延迟加载的映射或集合时，Glassfish 使用的 CORBA 实现似乎无法序列化 EJB 返回值（通常是我的组件返回值）。确实，每次我尝试调用这样的方法时，我都会得到一个

```
Caused by: org.omg.CORBA.MARSHAL: ATTENTION: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy217.valuehandlerReadException(Unknown Source)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1022)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:935)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_abstract_interface(CDRInputStream_1_0.java:928)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_abstract_interface(CDRInputStream_1_0.java:918)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_abstract_interface(CDRInputObject.java:557)
    at com.sun.corba.ee.impl.io.IIOPInputStream.readObjectDelegate(IIOPInputStream.java:391)
    at com.sun.corba.ee.impl.io.IIOPInputStream.readObjectOverride(IIOPInputStream.java:544)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:344)
    at java.util.LinkedList.readObject(LinkedList.java:964)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.io.IIOPInputStream.invokeObjectReader(IIOPInputStream.java:1832)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1214)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:935)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_abstract_interface(CDRInputStream_1_0.java:928)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_abstract_interface(CDRInputStream_1_0.java:918)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_abstract_interface(CDRInputObject.java:557)
    at com.sun.corba.ee.impl.io.IIOPInputStream.readObjectDelegate(IIOPInputStream.java:391)
    at com.sun.corba.ee.impl.io.IIOPInputStream.readObjectOverride(IIOPInputStream.java:544)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:344)
    at java.util.LinkedList.readObject(LinkedList.java:964)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.io.IIOPInputStream.invokeObjectReader(IIOPInputStream.java:1832)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1214)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:935)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:525)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:78)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:65)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:69)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:59)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObject(Util.java:771)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.copyResult(DynamicMethodMarshallerImpl.java:473)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:243)
    ... 64 more
Caused by: java.lang.ClassCastException
    at com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:262)
    at javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:137)
    at com.sun.corba.ee.impl.util.Utility.readAbstractAndNarrow(Utility.java:1028)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2157)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    ... 130 more
Caused by: java.lang.ClassCastException: java.util.HashMap cannot be cast to org.omg.CORBA.Object
    at com.sun.corba.ee.impl.javax.rmi.PortableRemoteObject.narrow(PortableRemoteObject.java:245)
    ... 139 more 
```

我尝试[`writeReplace`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Serializable.html)在我的代理中实现方法，但没有可见的结果。

那么，我可以做些什么来让我的代理通过加载它们的值并返回它们来序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:26:30.773

有人试图使用 Java HashMap 作为 CORBA 对象，但这是行不通的。（见最后一个例外）。要为您的问题提供解决方案，请提供更多信息（代码）。

# asp.net - 从存储过程填充的数据列表

> ID：10614687
> 
> 赞同：0
> 
> 时间：2012-05-16T08:27:31.737
> 
> 标签：asp.net, visual-studio-2008, stored-procedures, datalist

这是一个包含 5 个简短步骤的具体示例：

1) 我在“ASCX”文件的设计视图中建立了一个数据列表。

2) 在数据列表的项目模板区域中，我创建了一个 1x3 表，并在每个单元格中使用 Eval(“columnx”) 指定如下所示的列 (fid) 通过存储过程返回。

<asp:Label ID="Label1" runat="server" Text='<%# Eval("fid") %>'>

以同样的方式，我指定了由同一个存储过程返回的其他两个字段。

3）我去了.ASCX.CS（代码隐藏文件）并将数据源指定为存储过程；我做了数据绑定：

```
DataList1.DataSource = FilmsAccess.GetFilms(); DataList1.DataBind(); 
```

PS：FilmsAccess 是 App_Code 内部的一个类，其中包含 GetFilms() 方法，在该方法中传递和执行 GetFilms 存储过程。SP 的结果是一个数据表。

4）我去了我的母版页并在内容占位符内复制了数据列表。

5) 我创建了一个名为 Catalog.aspx 的页面，它继承自 master。我将其 ContentPlaceHolder 默认设置为主从设计视图中显示的内容。结果，目录打开，但我没有看到数据列表 - 根本没有。我究竟做错了什么？？感谢您的阅读和跟进！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:01:43.347

我有答案：上面的步骤 4) 是错误的。无需复制包含在 ascx 文件中的数据列表，而是需要将整个 ascx 文件拖放到需要的位置（在本例中为 Catalog.aspx）！祝大家拥有美好的一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:47:19.997

不确定它是否有帮助，但这是我的一个旧网络应用程序中的一行，其中绑定数据集的结果被提供给 asp 标签：

```
<asp:Label runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Network_Name") %>'/> 
```

# git - 从 WHM 用户的帐户访问 linux 用户的 public_html

> ID：10614688
> 
> 赞同：1
> 
> 时间：2012-05-16T08:27:33.363
> 
> 标签：git, apache, vhosts, whm

我在服务器上设置了一个用户作为我所有 git 存储库的所有者。我是通过 ssh 完成的，所以没有为该用户设置 WHM 帐户。我将此用户命名为“git”。

在我的主域 exmaple.com 上，我创建了一个名为 git.example.com 的子域。

我希望这个指向 /home/example/subdomains/git 的子域改为指向 /home/git/public_html。

我为什么要这样做？好吧，我正在我的服务器上为我的 git 存储库构建一个 Web 界面，我认为将界面粘贴在 'git' 的 public_html 目录中会很有用，这样我在阅读时就不必担心权限/通过接口写入 repos。

（也许有更好的方法来做到这一点，不需要我弄乱权限？idk。）

* * *

我首先在此处创建了一个 vhost 包括：
/usr/local/apache/conf/userdata/std/2/example/git.example.com/config.conf
并在此文件中添加`DocumentRoot /home/git/public_html`
并运行`/scripts/ensure_vhost_includes --all-users`将我的 .conf 滚动到httpd.conf。

当然，当我尝试访问 git.example.com 时，我现在得到了 403，因为我无法访问用户 'git' 的 public_html 目录。

* * *

我需要添加什么到我的 config.conf 以便我能够访问用户 'git' 的 public_html？

* * *

**更新：**我尝试了一些方法来使其正常工作，但没有一个允许我访问子域而不会出现 403 错误：

*   一位同事建议`chgrp -R nobody /home/git/public_html`，但这没有用。
*   我尝试将用户 'git' 添加到组 'nobody' 中不起作用，并将用户 'nobody' 添加到组 'git' 中也不起作用。（没有人是 apache 使用的用户/组）
*   我尝试使用 SuexecUserGroup 和 RUidGid 从我的虚拟主机包含中添加为我的虚拟主机设置用户/组，但这也不起作用。（除了 git git 之外，我还尝试了 git nobody、nobody 和 nobody git，但没有运气。）

    > ```
    > <IfModule !mod_disable_suexec.c>
    >     <IfModule !mod_ruid2.c>
    >         SuexecUserGroup git git
    >     </IfModule>
    > </IfModule>
    > <IfModule mod_ruid2.c>
    >     RUidGid git git
    > </IfModule> 
    > ```

*   我的虚拟主机建议我备份所有“git”用户的数据，擦除帐户，然后使用 WHM 而不是`useradd`通过 ssh 创建“git”，然后恢复我的备份。看起来这是我唯一的选择。

# ruby-on-rails - Resque 和 redis 服务器不能很好地相互配合

> ID：10614689
> 
> 赞同：0
> 
> 时间：2012-05-16T08:27:36.407
> 
> 标签：ruby-on-rails, ubuntu, redis, resque

我已经使用这些命令安装了 redis 服务器，

```
wget http://download.redis.io/redis-stable.tar.gz
xvzf redis-stable.tar.gz
cd redis-stable
make
make test # to test everything is working out well or not 
```

在此之后，我导航到 redis-stable 目录以启动 redis 服务器

```
src/redis-server 
```

现在，如果我正在运行 rails 应用程序并尝试访问 localhost:3000/resque 它正在正常工作，没有错误，

但是当我尝试停止（我正在使用 cntrl+c 停止正在运行的服务器）并使用 src/redis-server 重新开始时，它会抛出这样的异常

```
 # Warning: no config file specified, using the default config. In order to specify a config file use 'redis-server /path/to/redis.conf'
    [10020] 16 May 13:30:31 # Opening port 6379: bind: Address already in use 
```

由此我推断 redis 服务器已经在运行但是当我访问 localhost:3000/resque 时出现此错误

```
Errno::EAGAIN at /resque/overview
Resource temporarily unavailable - Timeout reading from the socket 
```

目前我正在重新启动我的 ubuntu 系统以解决这个问题，有什么想法可以解决这个问题吗？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:01:44.057

你确定你是通过`Ctrl`-`C`而不仅仅是通过 - 暂停它`Ctrl`吗`Z`？从你写的内容来看，你已经有一些东西绑定到端口 6379，它对连接没有反应（因此我认为你正在使用`Ctrl`-`Z`事实上）。下次当它发生在你身上时，尝试运行`netstat -tlnp`你会看到哪个进程绑定了 6379 端口，这样你就可以杀死它。

# android - 如何将参数传递给 OnClickListener？

> ID：10614696
> 
> 赞同：64
> 
> 时间：2012-05-16T08:28:24.643
> 
> 标签：android, onclicklistener

如何将参数传递给 OnClickListener() ？

得到我的听众：

```
 OnClickListener myListener = new OnClickListener()
   {

     @Override
     public void onClick(View v)
     {
         //I want to reach params here

     }

  }; 
```

我有 12 个按钮，我不想为它们编写 12 个侦听器，将字符串传递给它们会很棒，它们可以做完全不同的事情。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-05-16T08:31:57.297

使用您自己的自定义 OnClickListener

```
public class MyLovelyOnClickListener implements OnClickListener
   {

     int myLovelyVariable;
     public MyLovelyOnClickListener(int myLovelyVariable) {
          this.myLovelyVariable = myLovelyVariable;
     }

     @Override
     public void onClick(View v)
     {
         //read your lovely variable
     }

  }; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-08-20T08:00:06.467

**该问题的另一个解决方案是，**您可以创建一个常规方法并将`View`您想要添加的方法传递给`onClickListener`它，并传递您想要与它一起使用的**参数：**

```
Button b1 = new Button();
String something = "something";
Button b2 = new Button();
String anotherSomething = "anotherSomething";
setOnClick(b1, something);
setOnClick(b2, anotherSomething);

private void setOnClick(final Button btn, final String str){
    btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                  // Do whatever you want(str can be used here)

           }
    });
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-20T13:52:39.877

我知道这是一个迟到的答案，但希望它可以帮助某人。现有的答案在我的情况下都不起作用，但我最终使用了像按钮一样的图像的 setTag 功能。我的帐户信息位于活动开始时设置的全局成员变量中。

在这种情况下，我正在设置一个表格，每一行都是一个帐户。单击图像时会显示帐户详细信息（图像只是一个信息图标）。
因此：

```
// prior code....
// NOTE: oneAccount is an object (AccountInfo) holding information about the account

// column with the "detail" arrow
image1 = new ImageView(this);
image1.setImageResource(R.drawable.info);
image1.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
image1.setPadding(15, 1, 15, 1);
image1.setTag(oneAccount);
// add a listener to go to that account detail on a click
image1.setOnClickListener(new TextView.OnClickListener() {
    public void onClick(View v) {
    // change the color to signify a click
    v.setBackgroundColor(getResources().getColor(R.color.button_selected));

    // get what we need out of the tag
    AccountInfo thisAcct = (AccountInfo) v.getTag();

        // your code would do other stuff here

}
});

// add the image to the table row
tr1.addView(image1); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-16T08:38:54.450

1.  让您的活动实现 View.OnClickListener
2.  将您的按钮注册到侦听器
3.  检查onClick中点击了哪个按钮
4.  根据单击的按钮处理您的字符串

    ```
    public class _Test2Activity extends Activity implements OnClickListener {

       private Button button1;
       private Button button2;
       private Button button3;

       private String myString;

       @Override
       public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         button1 = (Button)findViewById(R.id.button1);
         button2 = (Button)findViewById(R.id.button2);
         button3 = (Button)findViewById(R.id.button3);

         button1.setOnClickListener(this);
         button2.setOnClickListener(this);
         button3.setOnClickListener(this);   

         myString = "This is a string";

       } 

       @Override
       public void onClick(View v) {
           if(v==button1) {
              //do something with myString
           } else if(v==button2) {
              //do something with myString
           } else if (v==button3) {
              //do something with myString
           }
       }
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-13T04:30:28.857

如果您有与视图关联的静态内容，另一种选择是使用 a`HashMap`将视图 ID 映射到内容。

```
private static Map<Integer, String> idToStringMap = new HashMap<Integer, String>(); 
```

初始化地图`onCreate`：

```
idToStringMap.put(R.id.button1, "hello");
idToStringMap.put(R.id.button2, "world");
// ... 
```

然后从视图 id 中获取值`onClick`：

```
public void onClick(View v) {

    String myString = idToStringMap.get(v.getId());
} 
```

这比使用一长串开关盒要干净一些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-25T14:13:19.353

**在科特林：**

在这里，我将一个**视图作为**另一个视图的 onClick 参数传递

首先在 xml 布局中定义您的**Handler**类对象，如下所示：

```
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:bind="http://schemas.android.com/tools">
    <data>
        <import type="android.view.View" />
        <variable
            name="handler"
            type="com.demoapp.controllers.Handler" />
   </data> 
```

并定义**执行点击**功能的按钮。

```
<Button
  android:id="@+id/button2"
  android:onClick="@{(view) -> handler.getbuttonClickEvent(textViewId)}"
  .../> 
```

你的文本视图是这样的：记住你的**TextView id**将像**textViewId一样转换**

```
<TextView
        android:id="@+id/text_view_id"
        ... /> 
```

final set up method in your **Handler class**

```
fun getbuttonClickEvent(view: TextView){
        view.text="Hello World"
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T08:33:31.563

使用实现 OnClickListener 如下代码

```
public class Test extends Activity implements OnClickListener{
    Button btn1;
    Button btn2;
    Button btn3;
    Button btn4;
    Button btn5;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //initialize btn...~~~

        btn1.setOnClickListener(this);
        btn2.setOnClickListener(this);
        btn3.setOnClickListener(this);
        btn4.setOnClickListener(this);
        btn5.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        switch(view.getId()) {
            case will be determine by Button's Id (R.id.blablabla)
        }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-14T09:30:23.957

请注意，您在 Kotlin 中执行此操作与在 Java 中执行此操作的方式略有不同。在 Kotlin 中，您附加`NameOfParentClass()`到子类声明。

现在覆盖 Activity 的`onCreate()`方法。它看起来像这样。

```
class MainActivity : AppCompatActivity() {
        private var btnClick: Button? = null
        override fun onCreate(savedInstanceState: Bundle?) {
            super.onCreate(savedInstanceState)
            setContentView(R.layout.activity_main)
            btnClick = findViewById(R.id.btnClick) as Button
            btnClick!!.setOnClickListener { startActivity(Intent(this@MainActivity, KotlinActivity::class.java)) }
        }
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-04-09T09:16:29.230

另一种解决方案可能是不直接在 onClick() 方法中编写代码，或者在单独的方法中编写代码，然后在 onClick() 中调用该方法。

例子：

```
button.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    function();
   }
});

private void function() {
 //your code here
} 
```

# python - Python 元组列表：按唯一元素组织到字典中

> ID：10614702
> 
> 赞同：2
> 
> 时间：2012-05-16T08:29:00.147
> 
> 标签：python, list, dictionary, tuples

我有一个元组列表，说：

```
list_of_tuples = [('a', 1),('b',2),('c',1),('a',2),('d',3)] 
```

我需要获取元组中任何（唯一）第二个元素的对应值。例如作为字典。输出：

```
dict = {1:['a','c'],2:['b','a'],3:['d']} 
```

什么是最蟒蛇的做法？帮助很大！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:33:37.233

我可能会选择`defaultdict`类似 jamylak，但如果你想要一本“真正的”字典，你可以使用[`setdefault()`](http://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
>>> list_of_tuples = [('a', 1),('b',2),('c',1),('a',2),('d',3)]
>>> d = {}
>>> for item in list_of_tuples:
...     d.setdefault(item[1],[]).append(item[0])
...
>>> d
{1: ['a', 'c'], 2: ['b', 'a'], 3: ['d']} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T08:30:47.760

```
>>> from collections import defaultdict
>>> list_of_tuples = [('a', 1),('b',2),('c',1),('a',2),('d',3)]
>>> d = defaultdict(list)
>>> for c,num in list_of_tuples:
        d[num].append(c)

>>> d
defaultdict(<type 'list'>, {1: ['a', 'c'], 2: ['b', 'a'], 3: ['d']}) 
```

# python - 仅在 Python 中的特定文件中修改

> ID：10614703
> 
> 赞同：1
> 
> 时间：2012-05-16T08:29:06.280
> 
> 标签：python, file

我必须在文件开头添加一些行到目录中的特定文件，如（*.c 或 *.h）。我写了如下代码。

```
f = open('filename') 
text = f.read() 
f.close() 
f = open('filename~', 'w') 
f.write("This is the new first line\n") 
f.write(text) 
f.close() 
os.rename('filename~', 'filename') 
```

它获取目录中的所有文件并更新它。但我需要它应该更新一些特定的文件。怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:34:35.047

您可以使用[glob](http://docs.python.org/library/glob.html)模块来获取与 UNIX shell 模式匹配的所有文件名（例如`*.c`）。此外，您也许可以使用[fileinput](http://docs.python.org/library/fileinput.html)模块对文件进行就地替换。

# nhibernate - NHibernate 过滤器集合和父级

> ID：10614708
> 
> 赞同：0
> 
> 时间：2012-05-16T08:29:22.880
> 
> 标签：nhibernate, nhibernate-criteria

我有一个具有集合属性“汽车”的对象“所有者”。我想根据汽车标准过滤车主（例如：所有拥有红色汽车的车主），我不想查询非红色汽车`SomeOwner.Cars`。所以我想要一个用于父级和集合的查询过滤器。

```
<class name="Owner"> 
    <set name="Cars">
      <key column="FK_Owner" />
      <one-to-many class="Car" />
    </set>
</class>

<class name="Car"> 
    <many-to-one name="Owner" column="FK_Owner" />
</class> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:45:38.943

```
 Car carAlias = null;
 var cars = _session.QueryOver<Owner>()
   .JoinAlias(x=>Cars,()=>carAlias,JoinType.LeftOuterJoin)    
   .Where(x=>carAlias.Color=="Red")
   .List(); 
```

# php - 三元 IF 导致内存不足

> ID：10614711
> 
> 赞同：0
> 
> 时间：2012-05-16T08:29:24.957
> 
> 标签：php, memory-leaks, ternary-operator

我遇到了一些奇怪的事情。我试图使用以下三元 if 语句：

```
$output .= ($row['creditUsed'] > $row['creditLimit'] ? 'color:red;' : $output) ; 
```

这导致我的浏览器挂起并最终导致 PHP 内存不足错误。

现在我只是在使用：

```
if($row['creditUsed'] > $row['creditLimit'])
{
    $output .= 'color:red;' ;
} 
```

哪个工作正常。

有谁知道为什么会发生这种情况？if 语句在 while 循环中，完整代码太多，无法发布：

```
$i = 0 ;
while($row = $result->fetch(PDO::FETCH_ASSOC)) {

if($i == 0)
{
    //something
}
if($row['amountDue'] > $row['amount'] && $row['amount'] > 0.01)
{
// Stuff
}
else
{
    $output .= ($row['creditUsed'] > $row['creditLimit'] ? 'color:red;' : $output) ;
}
$i++ ;
} 
```

* * *

是我的错！我意识到 $output 在循环的每次迭代中都呈指数级增长。我将其更改为： $output .= ($row['creditUsed'] > $row['creditLimit'] ? 'color:red;' : '') ;

没关系。

对不起！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:33:58.150

您不断地附加`$output`到自身（如果条件失败），导致它在每次迭代时大小增加一倍（即指数增长）。

如果你真的必须在这里使用三元运算符，你需要在第三个操作数中附加一个*空字符串，而不是原始字符串：*

```
$output .= ($row['creditUsed'] > $row['creditLimit'] ? 'color:red;' : ''); 
```

# osx-lion - Netbeans 中的 Mac control-A/E 快捷方式

> ID：10614713
> 
> 赞同：1
> 
> 时间：2012-05-16T08:29:35.380
> 
> 标签：osx-lion, keyboard-shortcuts, netbeans-7

我是 Mac OSX 上的 Netbeans 新手，我想使用 control-A/E 快捷方式转到段落的开头/结尾，但它似乎在 netbeans 中不起作用。

有人知道使它起作用的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:35:32.783

好的，找到了解决方案，只是这个快捷方式被Netbeans覆盖了，只好改了。

# pdf - 如何阅读 PDF 文件

> ID：10614715
> 
> 赞同：0
> 
> 时间：2012-05-16T08:29:42.103
> 
> 标签：pdf, vb6

除了使用 ADO 之外，还有其他方法可以使用 VB6 从 PDF 文件中提取数据吗？我已经成功地在不使用 Acrobat Reader 的情况下使用 VB6 打开了 PDF 文件，但我项目的下一步需要读取 PDF 文件并从中查找数据。示例哪些页面显示“水泥”一词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:11:59.567

通常，您将需要依赖外部库。一个纯 VB 解决方案（即，将文件作为文本读取并自己处理）是您在一周内完成的任何事情。

您可以通过自动化使用 Adob​​e Acrobat。例如[http://www.freevbcode.com/ShowCode.asp?ID=7066](http://www.freevbcode.com/ShowCode.asp?ID=7066)可以帮助您入门。但是请注意，Adobe Reader 是不够的，您确实需要完整的 Acrobat。还有其他流行的 PDF 阅读库（例如 poppler），但是您可能很难使用 VB6 中的那些。

一般而言，您成功的机会取决于“提取”的含义。简而言之，PDF 是一种没有元信息的纯描述性格式。即该文件包含诸如“Put an A at (x1,y1); put 'foo' at (x2, y2)”等指令。读取表格或任何类型的结构化信息都需要大量的启发式方法。

最好的做法可能是尝试以更适合的数据格式（纯文本、XML 等）获取您想要提取的数据。

# eclipse - Eclipse Indigo Outline (PHP Mode, Subclipse) 闪烁着大类

> ID：10614716
> 
> 赞同：0
> 
> 时间：2012-05-16T08:29:44.123
> 
> 标签：eclipse, svn, subclipse, outline

当我单击大型 php 类的代码时，我的 Eclipse Indigo Outline 闪烁。我认为它与 subclipse 有关，因为闪烁结束后会显示修订号和日期。

有谁知道这个问题的解决方案？

我的日食看起来像这样：

```
 Android DDMS  18.0.0.v201203301601-306762

  Android Development Tools 18.0.0.v201203301601-306762

  Android Hierarchy Viewer  18.0.0.v201203301601-306762

  Android Traceview 18.0.0.v201203301601-306762

  CollabNet Merge Client    3.0.8

  Eclipse SDK   3.7.1.M20110909-1335

  PHP Development Tools (PDT) SDK Feature 3.0.0.v201201110400-77-184_2BEICRgM_fMVcz0M4Va9O

  Subclipse (Required)  1.8.9

  Subclipse Integration for Mylyn 3.x (Optional)    3.0.0

  Subversion Client Adapter (Required)  1.8.2

  Subversion JavaHL Native Library Adapter  1.7.4.1

  Subversion Revision Graph 1.1.1 
```

谢谢，

卢西安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:30:17.880

“ ***Eclipse SDK 版本：3.7.2 Build id：M20120208-0800*** ”的更新解决了我的问题！轮廓不再闪烁。

卢西安

# spring - 如何验证动态生成的字段服务器端

> ID：10614718
> 
> 赞同：4
> 
> 时间：2012-05-16T08:29:47.090
> 
> 标签：spring, spring-mvc, spring-3, hibernate-validator

我使用 Spring 3.1 开发了一个 Web 应用程序

在其中一个模块中，我需要保存一个具有许多 OperationParameter 对象的 Operation 对象。因此，在视图中，我为用户提供了添加按钮，以便为特定操作创建 OperationParameters。

两种模型都具有休眠映射，并且 Operation 和 OperationParameter 之间存在一对多的关系。在操作模型中，我有操作参数列表，当用户将使用动态添加的操作参数创建新操作时，这些操作参数列表将插入数据库中。

当我不使用验证时，它工作正常。当我对 Operation 模型执行插入操作时，OperationParameters 列表也将插入到 OperationParameter 表中。

我的问题是如何对 OperationParameter 字段进行服务器端验证？如果验证是通过错误完成的，那么我如何显示特定 OperationParameter 字段的错误？

**操作.java**

```
 package com.abcprocure.servicerepo.model;
// Generated Feb 9, 2012 11:30:06 AM by Hibernate Tools 3.2.1.GA

import java.util.ArrayList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.apache.commons.collections.FactoryUtils;
import org.apache.commons.collections.list.LazyList;

@Entity
@Table(name="Operations"
    ,schema="dbo"

)
public class Operations  implements java.io.Serializable {

     private int operationId;
     @Embedded
     private Services services;
     private String operationName;
     private String isHqlsql;
     private String isMultipleTables;
     private String listOfTablesAffected;
     private String hqlQuery;
     private String typeOfOperation;
     private String operationDetail;
     private String inputVariables;
     private String outputparamdatatype;
     private String isCountQuery;
     private String isDynamicWhereQry;
     private String isPaginationRequired;
     private String biInputParameters;
    private List<OperationParameters> operationParameterses = LazyList
            .decorate(new ArrayList<OperationParameters>(),
                    FactoryUtils.instantiateFactory(OperationParameters.class));

    public Operations() {
    }

    public Operations(int operationId, Services services, String operationName) {
        this.operationId = operationId;
        this.services = services;
        this.operationName = operationName;
    }
    public Operations(int operationId, Services services, String operationName, String isHqlsql, String isMultipleTables, String listOfTablesAffected, String hqlQuery, String typeOfOperation, String operationDetail, String inputVariables, String outputparamdatatype, String isCountQuery, List operationParameterses) {
       this.operationId = operationId;
       this.services = services;
       this.operationName = operationName;
       this.isHqlsql = isHqlsql;
       this.isMultipleTables = isMultipleTables;
       this.listOfTablesAffected = listOfTablesAffected;
       this.hqlQuery = hqlQuery;
       this.typeOfOperation = typeOfOperation;
       this.operationDetail = operationDetail;
       this.inputVariables = inputVariables;
       this.outputparamdatatype = outputparamdatatype;
       this.isCountQuery = isCountQuery;
       this.operationParameterses = operationParameterses;
    }

    @Id 
    @GeneratedValue
    @Column(name="operationId", unique=true, nullable=false)
    public int getOperationId() {
        return this.operationId;
    }

    public void setOperationId(int operationId) {
        this.operationId = operationId;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="serviceId", nullable=false)
    public Services getServices() {
        return this.services;
    }

    public void setServices(Services services) {
        this.services = services;
    }

    @Column(name="operationName", nullable=false, length=250)
    public String getOperationName() {
        return this.operationName;
    }

    public void setOperationName(String operationName) {
        this.operationName = operationName;
    }

    @Column(name="isHQLSQL", length=50)
    public String getIsHqlsql() {
        return this.isHqlsql;
    }

    public void setIsHqlsql(String isHqlsql) {
        this.isHqlsql = isHqlsql;
    }

    @Column(name="isMultipleTables", length=50)
    public String getIsMultipleTables() {
        return this.isMultipleTables;
    }

    public void setIsMultipleTables(String isMultipleTables) {
        this.isMultipleTables = isMultipleTables;
    }

    @Column(name="listOfTablesAffected", length=500)
    public String getListOfTablesAffected() {
        return this.listOfTablesAffected;
    }

    public void setListOfTablesAffected(String listOfTablesAffected) {
        this.listOfTablesAffected = listOfTablesAffected;
    }

    @Column(name="hqlQuery")
    public String getHqlQuery() {
        return this.hqlQuery;
    }

    public void setHqlQuery(String hqlQuery) {
        this.hqlQuery = hqlQuery;
    }

    @Column(name="typeOfOperation", length=50)
    public String getTypeOfOperation() {
        return this.typeOfOperation;
    }

    public void setTypeOfOperation(String typeOfOperation) {
        this.typeOfOperation = typeOfOperation;
    }

    @Column(name="operationDetail")
    public String getOperationDetail() {
        return this.operationDetail;
    }

    public void setOperationDetail(String operationDetail) {
        this.operationDetail = operationDetail;
    }

    @Column(name="inputVariables", length=5000)
    public String getInputVariables() {
        return this.inputVariables;
    }

    public void setInputVariables(String inputVariables) {
        this.inputVariables = inputVariables;
    }

    @Column(name="outputparamdatatype", length=50)
    public String getOutputparamdatatype() {
        return this.outputparamdatatype;
    }

    public void setOutputparamdatatype(String outputparamdatatype) {
        this.outputparamdatatype = outputparamdatatype;
    }

    @Column(name="isCountQuery", length=10)
    public String getIsCountQuery() {
        return this.isCountQuery;
    }

    public void setIsCountQuery(String isCountQuery) {
        this.isCountQuery = isCountQuery;
    }

    public String getIsDynamicWhereQry() {
        return isDynamicWhereQry;
    }

    public void setIsDynamicWhereQry(String isDynamicWhereQry) {
        this.isDynamicWhereQry = isDynamicWhereQry;
    }

    public String getIsPaginationRequired() {
        return isPaginationRequired;
    }

    public void setIsPaginationRequired(String isPaginationRequired) {
        this.isPaginationRequired = isPaginationRequired;
    }

    public String getBiInputParameters() {
        return biInputParameters;
    }

    public void setBiInputParameters(String biInputParameters) {
        this.biInputParameters = biInputParameters;
    }

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="operations")
    public List<OperationParameters> getOperationParameterses() {
        return this.operationParameterses;
    }

    public void setOperationParameterses(List<OperationParameters> operationParameterses) {
        this.operationParameterses = operationParameterses;
    }

} 
```

**操作参数.java**

```
package com.abcprocure.servicerepo.model;

// Generated Feb 9, 2012 11:30:06 AM by Hibernate Tools 3.2.1.GA

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name="OperationParameters"
    ,schema="dbo"

)
public class OperationParameters  implements java.io.Serializable {

     private int parameterId;
     private Operations operations;
     private String inputOutputParamName;
     private String inputOutputParamType;
     private String inputOutputParamDataType;

    public OperationParameters() {
    }

    public OperationParameters(int parameterId, Operations operations, String inputOutputParamName, String inputOutputParamType, String inputOutputParamDataType) {
       this.parameterId = parameterId;
       this.operations = operations;
       this.inputOutputParamName = inputOutputParamName;
       this.inputOutputParamType = inputOutputParamType;
       this.inputOutputParamDataType = inputOutputParamDataType;
    }

    @Id 
    @GeneratedValue
    @Column(name="parameterId", unique=true, nullable=false)
    public int getParameterId() {
        return this.parameterId;
    }

    public void setParameterId(int parameterId) {
        this.parameterId = parameterId;
    }
@ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="operationId", nullable=false)
    public Operations getOperations() {
        return this.operations;
    }

    public void setOperations(Operations operations) {
        this.operations = operations;
    }

    @Column(name="inputOutputParamName", nullable=false, length=250)
    public String getInputOutputParamName() {
        return this.inputOutputParamName;
    }

    public void setInputOutputParamName(String inputOutputParamName) {
        this.inputOutputParamName = inputOutputParamName;
    }

    @Column(name="inputOutputParamType", nullable=false, length=250)
    public String getInputOutputParamType() {
        return this.inputOutputParamType;
    }

    public void setInputOutputParamType(String inputOutputParamType) {
        this.inputOutputParamType = inputOutputParamType;
    }

    @Column(name="inputOutputParamDataType", nullable=false, length=250)
    public String getInputOutputParamDataType() {
        return this.inputOutputParamDataType;
    }

    public void setInputOutputParamDataType(String inputOutputParamDataType) {
        this.inputOutputParamDataType = inputOutputParamDataType;
    }

} 
```

**为添加新操作的发布请求提供服务的控制器方法。**

```
/**
     * Method that will serve the post request to add the operation and operation parameters submitted by the user.
     * @param operations
     * @param map
     * @return {@link String} The view name that will redirect to the get request to display the previous page with newly entered operation in the list. 
     */
    @RequestMapping(value="/add", method=RequestMethod.POST)
    public String addOperations(@ModelAttribute Operations operations, ModelMap map) {
        operations.getOperationParameterses().removeAll(Collections.singleton(null));

        for(int i=0; i<operations.getOperationParameterses().size(); i++) {
            System.out.println("parameterName :: " + ((OperationParameters)operations.getOperationParameterses().get(i)).getInputOutputParamName());
            if(((OperationParameters)operations.getOperationParameterses().get(i)).getInputOutputParamName() == null || "".equalsIgnoreCase((((OperationParameters)operations.getOperationParameterses().get(i))).getInputOutputParamName())) {
                operations.getOperationParameterses().remove(i);
                System.out.println("empty parameter removed....");
            }
        }

        return "redirect:/operations/" + operations.getServices().getServiceId();
    } 
```

在这方面任何好的建议或例子都会对我有很大的帮助。:)

**

## 更新

**

我还想知道是否可以验证字段数组并在 jsp 文件中显示错误？

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T12:44:06.873

您可以创建一个帮助程序类，根据其数据类型验证您的 OperationParameters。如果是字符串，请检查 null 或空字符串等。验证类也可以有一些上下文验证，比如有效的电子邮件地址。

掌握了这个，在保存操作对象之前，您将遍历操作参数的操作列表，检查数据类型和/或保存信息上下文的字段（例如电子邮件，工作日）并调用正确的验证你的助手类。

如果您确实发现了不一致，只需抛出一个自定义异常来描述它。处理它的代码部分可以将带有违规字段的 json 返回到您的页面，这反过来会向用户提供反馈（即该字段下的红色文本以及您的错误消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:51:42.527

经过一周的头脑风暴，我自己找到了解决方案。我真的很高兴我终于实现了这一目标。:)

为了验证动态生成的字段，您需要依赖服务器端的自定义验证。因为如果我们对动态生成的字段使用基于注释的验证，那么在验证之后它将不会出现在控制器函数中。

因此，每当您进行自定义验证时，将从控制器函数调用验证。在那里，您可以在列表中动态生成的字段上生成错误。

如果验证不成功，那么您需要返回 jsp 页面并在表单上显示错误。您需要使用显示动态生成的字段值及其错误**.**

 **我希望这可以帮助其他想要同样工作的人。**

# php - symfony jquery原型动态表单

> ID：10614720
> 
> 赞同：1
> 
> 时间：2012-05-16T08:29:50.733
> 
> 标签：php, javascript, jquery, symfony

我正在尝试实现一个动态表单，可以添加\删除字段（现在只需添加，因为它不起作用）。我正在使用 Symfony 2.0.13，并按照[此处](http://symfony.com/doc/current/cookbook/form/form_collections.html#allowing-new-tags-with-the-prototype)的指南进行操作， 但结果是我无法获得

```
<a href="#" class="add_tag_link">Add a tag</a> 
```

在呈现的 html 中，如您[在此处看到的 #2](http://pastebin.com/uQFw1Pf9)

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:41:25.570

只需将脚本更改为

```
jQuery(document).ready(function() {

 // Get the div that holds the collection of tags
var collectionHolder = $('ul.tags');

// setup an "add a tag" link
var $addTagLink = $('<a href="#" class="add_tag_link">Add a tag</a>');
var $newLinkLi = $('<li></li>').append($addTagLink);

    // add the "add a tag" anchor and li to the tags ul
    collectionHolder.append($newLinkLi);

    $addTagLink.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // add a new tag form (see next code block)
        addTagForm(collectionHolder, $newLinkLi);
    });
}); 
```

这将工作......

# blackberry - 将场的内容居中在场的中心

> ID：10614721
> 
> 赞同：1
> 
> 时间：2012-05-16T08:29:55.453
> 
> 标签：blackberry

![在此处输入图像描述](../Images/d15c33c7935a7d7efb261c2c8075be1c.png)我制作了一个水平场管理器，它将占据屏幕的全宽和 10% 的高度。现在我想分别向这个管理器添加 3 个字段。第一个是 BitmapField（屏幕宽度的 10%），第二个是 LabelField（屏幕宽度的 80%），第三个是 BitmapField（屏幕宽度的 10%）。

剩下的就是将这些字段的内容集中在字段本身的中心。

这是代码： -

```
public final class MyScreen extends MainScreen
{
public MyScreen()
{   
    final int disWidth = Display.getWidth();
    final int disHeight = Display.getHeight();
    final int heightHFM = (disHeight*10)/100;

    HorizontalFieldManager hfm = new HorizontalFieldManager(){
        protected void sublayout(int maxWidth, int maxHeight) {
            // TODO Auto-generated method stub
            super.sublayout(maxWidth, maxHeight);
            this.setExtent(disWidth,heightHFM);

    }
    };
    hfm.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));

    BitmapField bmp_leftArrow = new BitmapField(Bitmap.getBitmapResource("arrow_left.png")){
        protected void layout(int width, int height) {
            // TODO Auto-generated method stub
            super.layout(width, height);
            this.setExtent((disWidth*10)/100, height);
        }
    };
    bmp_leftArrow.setBackground(BackgroundFactory.createSolidBackground(Color.BLUE));

    LabelField lbl_tit = new LabelField("Current Date"){
        protected void layout(int width, int height) {
            // TODO Auto-generated method stub
            super.layout(width, height);
            this.setExtent((disWidth*80)/100, height);
        }
    };
    lbl_tit.setBackground(BackgroundFactory.createSolidBackground(Color.RED));
    BitmapField bmp_rightArrow = new BitmapField(Bitmap.getBitmapResource("arrow_left.png")){
        protected void layout(int width, int height) {
            // TODO Auto-generated method stub
            super.layout(width, height);
            this.setExtent((disWidth*10)/100, height);
        }
    };
    bmp_rightArrow.setBackground(BackgroundFactory.createSolidBackground(Color.GREEN));
    hfm.add(bmp_leftArrow);
    hfm.add(lbl_tit);
    hfm.add(bmp_rightArrow);
    add(hfm);

}
} 
```

**当我们在android中使用任何视图的重力时需要实现相同的输出**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:57:21.763

For custom positioning and alignment of the child fields, A dedicated FieldManger with specified layout and field positioning is useful. You can try the following `CustomHorizontalFieldManager` which extends `Manager`.

*Generated Output*

![enter image description here](../Images/c7052a155139ed085aa07783f7497e5a.png)

*Using the Manager*

```
public class MyScreen extends MainScreen
{
    public MyScreen()
    {        
        CustomHorizontalFieldManager chfm = new CustomHorizontalFieldManager();
        Background bg = BackgroundFactory.createSolidBackground(Color.BROWN);
        chfm.setBackground(bg);

        BitmapField bmf0 = new BitmapField(Bitmap.getBitmapResource("img0.png"));
        BitmapField bmf1 = new BitmapField(Bitmap.getBitmapResource("img1.png"));

        CutomLabelField lblf = new CutomLabelField("Current Date");

        bg = BackgroundFactory.createSolidBackground(Color.GREEN);
        lblf.setBackground(bg);

        bg = BackgroundFactory.createSolidBackground(Color.GREEN);
        bmf0.setBackground(bg);

        bg = BackgroundFactory.createSolidBackground(Color.GREEN);
        bmf1.setBackground(bg);

        chfm.add(bmf0);
        chfm.add(lblf);
        chfm.add(bmf1);

        add(chfm);
    }
} 
```

*Implementation of the Manager*

```
class CustomHorizontalFieldManager extends Manager {

    public CustomHorizontalFieldManager() {
        super(0);
    }

    private int width0, width1, width2;
    private Field f0, f1, f2;
    int x0, x1, x2, y0, y1, y2;

    protected void sublayout(int width, int height) {
        if (getFieldCount() == 3) {
            // calculate total width, total height
            width = Display.getWidth();
            height = getPercentage(Display.getHeight(), 10);

            // calculate field's width
            width0 = getPercentage(width, 10);
            width1 = getPercentage(width, 80);
            width2 = getPercentage(width, 10);

            f0 = getField(0);
            f1 = getField(1);
            f2 = getField(2);

            // layout all the child
            layoutChild(f0, width0, height);
            layoutChild(f1, width1, height);
            layoutChild(f2, width2, height);

            // Specify position of the child.           
            // Alignment of the fields can be adjusted here.
            // Following lines will align them
            // on center, both vertically and horizontally.
            x0 = (width0 - f0.getWidth()) / 2;
            x1 = width0 + (width1 - f1.getWidth()) / 2;
            x2 = width0 + width1 + (width2 - f2.getWidth()) / 2;

            y0 = (height - f0.getHeight()) / 2;
            y1 = (height - f1.getHeight()) / 2;
            y2 = (height - f2.getHeight()) / 2;

            setPositionChild(f0, x0, y0);
            setPositionChild(f1, x1, y1);
            setPositionChild(f2, x2, y2);

            setExtent(width, height);
        } else {
            // The manager contains some
            // invalid number of fields.

            // Make manager invisible.
            setExtent(0, 0);
        }
    }   

    int getPercentage(int value, int percent) {
        return (value * percent) / 100;
    }
} 
```

*Draft implementation of CustomLabelField*

```
class CutomLabelField extends Field {
    private String text;

    public CutomLabelField(String text) {
        this.text = (text == null) ? "" : text;
    }

    int xText;
    int yText;  
    int availableWidth;

    protected void layout(int width, int height) {      
        // positioning text.
        int textWidth = getFont().getAdvance(text);
        availableWidth = width - getPaddingLeft() - getPaddingRight();
        if (availableWidth < textWidth) {
            xText = getPaddingLeft();
        } else {
            xText = getPaddingLeft() + (availableWidth - textWidth) / 2;
        }
        yText = (height - getFont().getHeight()) / 2;

        // using all width and height
        setExtent(width, height);
    }

    protected void paint(Graphics graphics) {
        // set text color
        graphics.setColor(Color.BLACK);
        graphics.drawText(text, xText, yText, DrawStyle.ELLIPSIS, availableWidth);
    }

    public void setText(String text) {
        this.text = (text == null) ? "" : text;
        updateLayout();
    }

    public String getText() {
        return this.text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:14:59.830

而不是将您的`LabelField`(variable `lbl_tit`) 直接添加到您的`HorizontalFieldManager`添加到`VerticalFieldManager`第一个。然后添加`VerticalFieldManager`到您的`HorizontalFieldManager`.

当您创建`LabelField`设置`Field.FIELD_HCENTER`样式位时，将其居中对齐在`VerticalFieldManager`.

这是我的代码：

```
public final class MyScreen extends MainScreen
{
    public MyScreen()
    {   
        final int disWidth = Display.getWidth();
        final int disHeight = Display.getHeight();
        final int heightHFM = (disHeight*10)/100;

        HorizontalFieldManager hfm = new HorizontalFieldManager(){
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(maxWidth, maxHeight);
                this.setExtent(disWidth,heightHFM);

            }
        };
        hfm.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));

        BitmapField bmp_leftArrow = new BitmapField(Bitmap.getBitmapResource("arrow_left.png")){
            protected void layout(int width, int height) {
                super.layout(width, height);
                this.setExtent((disWidth*10)/100, height);
            }
        };
        bmp_leftArrow.setBackground(BackgroundFactory.createSolidBackground(Color.BLUE));

        VerticalFieldManager vfm = new VerticalFieldManager(USE_ALL_WIDTH){

            protected void sublayout(int width, int height) {
                super.sublayout((disWidth*80)/100, height);
                this.setExtent((disWidth*80)/100, height);                   
            }        
        };

        vfm.setBackground(BackgroundFactory.createSolidBackground(Color.RED));

        LabelField lbl_tit = new LabelField("Current Date", Field.FIELD_HCENTER);
        vfm.add(lbl_tit);

        BitmapField bmp_rightArrow = new BitmapField(Bitmap.getBitmapResource("arrow_left.png")){
            protected void layout(int width, int height) {
                super.layout(width, height);
                this.setExtent((disWidth*10)/100, height);
            }
        };
        bmp_rightArrow.setBackground(BackgroundFactory.createSolidBackground(Color.GREEN));
        hfm.add(bmp_leftArrow);
        hfm.add(vfm);
        hfm.add(bmp_rightArrow);
        add(hfm);

    }
} 
```

从您的 LabelField 中删除覆盖的`layout`方法，您不再需要它。它应该如下所示：

![模拟器截图](../Images/3ed88d6de5c556d0981248d6af4cb68d.png)

# radio-button - Wicket RadioChoice 默认选中

> ID：10614722
> 
> 赞同：4
> 
> 时间：2012-05-16T08:29:59.283
> 
> 标签：radio-button, wicket

我有一个带有附加模型的 RadioChoice 组件。单选选项与布尔字段相关联，因此我必须选择单选按钮（是/否）。我的问题是当页面呈现时没有按钮被预先选择，因为布尔字段设置为 false。有没有办法防止这种情况发生，因为我不想有一个预先选择的值。

任何想法都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:33:56.803

从 HTML 的角度来看，不建议省略预先选择的 radio 值（参见[http://www.w3.org/TR/html401/interact/forms.html#radio](http://www.w3.org/TR/html401/interact/forms.html#radio)）。这对用户来说也是相当烦人的，因为如果他/她不小心点击了一个单选组中的所有值，就无法取消选择。您可能应该重新考虑您的用户界面 - 是否有第三个“未知”选项的空间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T11:55:21.663

如果您不使用布尔值，而是使用原语，那么您可以在 RadioChoice 中覆盖 isSelected：

```
@Override
protected boolean isSelected(Boolean object, int index, String selected) {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:53:01.227

因为您的`RadioChoice`组件附加了模型；当你写作时， `yourRadioChoice.getValue()`你总是得到你的模型值而不是更新值。为了防止这种情况，您可以使用临时变量。

```
yourRadioChoice.add(new AjaxFormChoiceComponentUpdatingBehavior () {

    private static final long serialVersionUID = 1662824638126944259L;          

    @Override
    protected void onUpdate(AjaxRequestTarget target) {  
                   // you can get current value here and set to your temporary variable
                   // then use anywhere
        }

}); 
```

# vim - vim：拆分窗口时如何退出vim？

> ID：10614723
> 
> 赞同：8
> 
> 时间：2012-05-16T08:29:59.420
> 
> 标签：vim

如果我在 vim 中拆分窗口（或在新选项卡中打开文件）以关闭每个拆分窗口（或选项卡），我必须多次键入 :q。有什么方法可以退出 vim 只需键入一次 :q 并保存所有更改吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T08:38:53.447

保存并退出所有。这就是你需要的。

```
:wqa 
```

请注意，以下内容将做同样的事情，因为`:xa`是 的同义词`:wqa`。这是我最喜欢的，因为它打字更短。

```
:xa 
```

全部退出：

```
:qa 
```

不保存（丢失更改）并全部退出：

```
:qa! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T08:35:04.197

```
:qa
:wqa 
```

助记符：*写全部退出*。你可以在 Vim 中访问这样的文档：

```
:help :quit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:43:08.067

`:x`是`:wq`so`:xa`保存和关闭所有内容的简写。

# json - 使用 scala 管理 Play2 控制器上的 JSON 错误

> ID：10614725
> 
> 赞同：3
> 
> 时间：2012-05-16T08:30:11.840
> 
> 标签：json, scala, playframework-2.0

这是我在 scala 上的第一次体验。我尝试使用 Play2 制作一个小型 REST 控制器。

我的主要目标是有一个带有一些 json 数据的 POST 路由到正文。

这是我已经做过的：

```
def instMeasurement(variable: String) = Action { request =>
    request.body.asJson.map { json =>
        val measurement = MongoDBObject(
            "variable" -> variable,
             "quantity" -> (json \ "quantity").asOpt[Float].getOrElse(BadRequest("Missing parameter [quantity]")),
             "when" -> (json \ "occurTime").asOpt[String].getOrElse(BadRequest("Missing parameter [occurTime]")))

        dao("powermeter").save(measurement)

        Ok(json)
    }.getOrElse(
        BadRequest(Json.toJson("JSON Body missing"))
    )
} 
```

一切正常，除了错误过程。我想路由到一个 BadRequest。

Play 2 文档显示了一个小例子：

```
def sayHello = Action { request =>
  request.body.asJson.map { json =>
    (json \ "name").asOpt[String].map { name =>
      Ok("Hello " + name)
    }.getOrElse {
      BadRequest("Missing parameter [name]")
    }
  }.getOrElse {
    BadRequest("Expecting Json data")
  }
} 
```

听起来很完美，只是它没有显示如何处理 json 中的多个值。

如何使用 json 中的 2 个值（例如，姓名和名字）做同样的事情？如果 json 不完整，如何解析 json 并路由到 BadRequest？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:42:55.270

如果我理解正确，您想要处理多个缺失的字段。我的解决方案如下所示：

```
 val fields = List("firstname", "lastname")
    val options = fields.map(name => (json \ name).asOpt[String])
    val errors = options.zip(fields).collect { 
         case (None, f) => f
   }

   if(errors.isEmpty){  Ok(options.flatten.mkString(" "))} 
   else { BadRequest("Missing Fields: " + errors.mkString(" \n ")) 
```

# php - /admin 从 http:// 加载 /index.php/admin，但不是来自 http://

> ID：10614726
> 
> 赞同：0
> 
> 时间：2012-05-16T08:30:13.063
> 
> 标签：php, silverstripe

在 ubuntu 11.10 上，我在访问 http:///admin 时收到 404 错误，并且在 apache2 error.log 中出现相应的错误消息“文件不存在：/var/www//admin”。但是，当我转到 http:///index.php/admin 时，确实会出现管理员登录。

权限 755、775 或 777 得到相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:48:02.693

漂亮的 URL 设置似乎有问题。

> 友好的 URL 不起作用，因为您的网络服务器上未启用重写支持，或者未正确设置。
> 
> 阿帕奇：
> 
> 1.  确保 mod_rewrite 已启用
> 2.  确保为安装 SilverStripe 的位置设置 AllowOverride All
> 3.  确保 SilverStripe 目录中的 .htaccess 文件具有重写规则设置

你能确认这三个步骤吗？

*   引用[官方支持论坛](http://www.silverstripe.org/installing-silverstripe/show/12446)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:52:30.290

如果您使用的是 Apache Web 服务器，请确保该`mod_rewrite`模块已启用并在文件中使用类似这样的`.htaccess`内容：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
```

# c++ - C++ 数组中初始化列表的类型是什么？

> ID：10614728
> 
> 赞同：8
> 
> 时间：2012-05-16T08:30:15.620
> 
> 标签：c++, c

像这样的代码可以正常工作：

```
char str[] = {'a', 'b', '\0'}; 
```

左边是一个自动变量（数组）。

像这样的代码**不能**工作：

```
char *str = {'a', 'b', '\0'}; 
```

左边是一个指针。指针指向一个未知空间，所以这将失败。

我的问题是，右侧的类型是什么？

在 C++ 11 中，初始化列表变为`std::initializer_list`. 但是旧的 C++ 03 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T08:47:02.217

在 C++03 中，大括号括起来的初始化程序只是一种语法设备，可用于初始化聚合（例如数组或某些类型的类或结构）。它没有“类型”，只能用于那些特定类型的初始化器。

> 8.5.1/2 “聚合”：
> 
> 当一个聚合被初始化时，初始化器可以包含一个初始化器子句，该子句由一个用大括号括起来、逗号分隔的初始化器子句列表组成，用于聚合的成员，以递增的下标或成员顺序编写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T08:48:35.383

在 C++03 中，右侧是一个*initializer-list*。它没有任何类型，它只是用于提供一种初始化标识符值的方法。

这定义在：

**C++03 8.5.1 初始化程序 [dcl.init]**

> 声明者可以为被声明的标识符指定一个初始值。标识符指定正在初始化的对象或引用。8.5 其余部分中描述的初始化过程也适用于其他句法上下文指定的初始化，例如使用参数表达式的函数参数的初始化（5.2.2）或返回值的初始化（6.6.3）。

```
initializer:
         = initializer-clause
         ( expression-list )
initializer-clause:
         assignment-expression
         { initializer-list ,opt }
         { }
initializer-list:
         initializer-clause
         initializer-list , initializer-clause 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:41:00.623

来自 C++11 的草案：

> **8.5 初始化器**
> 
> 16 初始化器的语义如下。目标类型是正在初始化的对象或引用的类型，源类型是初始化表达式的类型。当初始值设定项是花括号初始化列表或带括号的表达式列表时，源类型未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T16:56:15.377

```
int num [3] = {1,2,3} ;

int num [0]= 1 ;
num [1]= 2 ;
num [2] = 3 ; 
```

# mootools - Mootools 注入代码 为 .each 修改它

> ID：10614732
> 
> 赞同：1
> 
> 时间：2012-05-16T08:30:28.810
> 
> 标签：mootools, selector, inject

我有以下html。

```
<ul>
<li>
    <label id="firstswitch-lbl" class="hasTip">My First Selector:</label>
    <select id="first_switch" class="switch">
        <option value="0">Enable</option>
        <option selected="selected" value="1">Disable</option>
    </select>
</li>
<li>
    <label id="first_title-lbl" class="hasTip">First Select:</label>
    <input id="first_title" class="text" type="text" size="3" value="50">
</li>
<li>
    <label id="secondswitch-lbl" class="hasTip">My Second Selector </label>
    <select id="second_switch" class="switch">
        <option value="0">Enable</option>
        <option selected="selected" value="1">Disable</option>
    </select>
</li>
<li>
    <label id="second_title-lbl" class="hasTip">Second Select:</label>
    <input id="second_title" class="text" type="text" size="3" value="100">
</li>
<li>
    <label id="thirdswitch-lbl" class="hasTip">My Third Selector </label>
    <select id="third_switch" class="switch">
        <option value="0">Enable</option>
        <option selected="selected" value="1">Disable</option>
    </select>
</li>
<li>
    <label id="third_title-lbl" class="hasTip">Third Select:</label>
    <input id="third_title" class="text" type="text" size="3" value="200">
</li>
<li>
    <label id="fourthswitch-lbl" class="hasTip">My Fourth Selector </label>
    <select id="fourth_switch" class="switch">
        <option value="0">Enable</option>
        <option selected="selected" value="1">Disable</option>
    </select>
</li>
<li>
    <label id="fourth_title-lbl" class="hasTip">Fourth Select:</label>
    <input id="fourth_title" class="text" type="text" size="3" value="200">
</li> 
```

并遵循 mootools javascript 工作正常。

```
 document.id('first_switch').inject(document.id('first_switch').getParent().getNext(), 'bottom');
document.id('first_title').getParent().getPrevious().dispose();
document.id('second_switch').inject(document.id('second_switch').getParent().getNext(), 'bottom');
document.id('second_title').getParent().getPrevious().dispose(); 
```

但是，我试图减少重复相同代码的次数，因为我有大约 20 条或更多类似的行，所以我希望使用 .each 函数使其更短或更简化，但无法弄清楚。

我正在尝试在 Selector 旁边添加值框，以便它们位于同一行而不是使用两行。任何帮助高度赞赏。先感谢您。

以下是 Fiddle[示例代码的链接](http://jsfiddle.net/GzVca/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:56:53.860

你应该稍微调整一下，但是：

```
document.getElements("li input.text").each(function(input) {
    var parent = input.getParent("li");
    input.inject(parent.getPrevious().getFirst(), "after");
    parent.destroy();
}); 
```

这将循环你的整个页面，所以我建议`document.id("ulel").getElements`

[http://jsfiddle.net/dimitar/GzVca/1/](http://jsfiddle.net/dimitar/GzVca/1/)

# actionscript-3 - AS3 - Facebook.init 为成功和失败对象返回 null

> ID：10614734
> 
> 赞同：0
> 
> 时间：2012-05-16T08:30:31.117
> 
> 标签：actionscript-3, facebook-graph-api

我做了两个测试

1.  当我登录时，我作为 initHandler 中的有效对象获得了成功
2.  当我没有登录 Facebook 时，我会在 initHandler 中作为 null 获得成功和失败，所以在我的其他情况下我有 Facebook.login。然后提示用户登录，但是在填写用户名和密码后，我的 loginHandler 没有被调用，我的应用程序怎么知道他已经登录，所以我可以继续玩游戏，它是如何工作的？请指教。

    ```
     private function connect(id:String):void { 
        Security.loadPolicyFile("https://fbcdn-profile-a.akamaihd.net/crossdomain.xml");
        Facebook.init(id, initHandler);
    }

    private function initHandler(success:Object, fail:Object):void { //success, fail are null
        if(success){

        } else {
            Facebook.login(loginHandler,{scope:"email, user_location"});
        }
    }

    private function loginHandler(success:Object, fail:Object):void {
        if(success) {

        } else {
            //permissions not given

        }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:35:38.533

你确定你没有得到回应？

也许这是语法问题 - loginHandler( **result:** Object, fail:Object)...？

如果您确实得到了响应，并且返回的对象是问题，那么可以使用 Facebook.getAuthResponse()

```
protected function loginHandler(result:Object, fail:Object):void 
{
    if (result) {
        // --> LOGIN SUCCESS

        var resp:String = Facebook.getAuthResponse().toString();
        var fbid:String = resp.substr(1, resp.length-2).split(":")[1];

        if(id == "null"){

            //  un-authorized. probably you're in sandbox mode and the user is not a registered tester

        }else{

            //  continue using 'fbid' 

        }

    } else {
        // --> LOGIN FAILED
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:19:56.673

参考我的问题中的第 2 点，我的 loginHandler 没有被调用，我发现另一个帖子说延迟登录调用，这是要运行的代码的完整序列。

```
 public function authorize():void {
        var response:FacebookAuthResponse = Facebook.getAuthResponse();
        if(response && response.uid) {
            this.success(response);
        } else {
            this.init();
        }
    }

    protected function init():void { 
        Security.loadPolicyFile("https://fbcdn-profile-a.akamaihd.net/crossdomain.xml");
        Facebook.init(this.appID, this.initHandler);
    }

    protected function initHandler(response:FacebookAuthResponse, fail:Object):void {
        if(response && response.uid){ 
            this.success(response);
        } else { 
            setTimeout(this.login, 200);
        }
    }

    protected function login():void {
        Facebook.login(loginHandler, this.permissions);
    }

    protected function loginHandler(response:FacebookAuthResponse, fail:Object):void {
        if(response && response.uid) {
            this.success(response);
        } else {
            //not authorized
        }
    }

    protected function success(response:FacebookAuthResponse):void {
        //authorized
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:09:11.670

init 回调永远不会为我触发。它曾经在几个月前使用，但现在对成功和失败对象都返回 null。如 adifmac 所述，您可以使用 getAuthResponse 测试用户 ID。我这样做：

```
// in the constructor or wherever, init Facebook without passing an onInitComplete callback
// then call function to check for session.

Facebook.init( APP_ID );
checkForActiveSession();

private function checkForActiveSession():void
{
    try
    {
        // looking for a user ID string from an active session
        var hasSession = Facebook.getAuthResponse().uid;

        if ( hasSession == null )
        {
            trace('null session, NOT logged in or has not given permissions');

            _userIsLoggedIn = false;
        }
        else
        {
            trace('active session, user logged in');

            _userIsLoggedIn = true;

            // now you can get user data
            getUserData();
        }
    }
    catch(e:Error)
    {
        trace('must be uploaded to server to test : ' + e.message);
    }
} 
```

此方法不会特别告诉您他们是否未登录，因为如果用户未授予应用程序权限，此方法也会显示空会话。尽管如此，我发现它工作得很好。请注意，此时 Facebook 已初始化，对 Facebook.login 的调用应该可以工作。

# java - 使用队列解耦 Java 应用程序：是最佳实践吗？

> ID：10614740
> 
> 赞同：1
> 
> 时间：2012-05-16T08:30:51.880
> 
> 标签：java, architecture, queue, decoupling

我有两个必须相互处理的应用程序（经典的 java 程序和批处理）。为了尽可能多地解耦它们的通信，我正在考虑在应用程序之间使用队列。

问题是第一个应用程序提供了一些 java 对象，第二个应用程序必须将其转换为另一种对象类型（某种 DTO 模式），并使用新构造的对象执行一些业务逻辑和 Web 服务调用。在这种情况下，使用队列是最好的解决方案吗？

如果是，队列中是否存在性能问题（特别是考虑大小和消耗时间）？实现此队列的最佳方法是什么？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:22:35.300

Queue is probably the best solution if the job is long running and resource intensive. For example if your batch application is sending out massive emails with the each content the classic application provides, then yes Queue is the right solution.

Drawbacks of queue includes it introduces management overhead like you have to worry about what if the queue gets too large, how to delivery response back to the classic application etc.

If the batch program can process each request from the classic application quickly then I would expose the batch program as web service so the classic application can get immediate response.

# pdf - 链接到控制器在 pdf 0.6 中不起作用

> ID：10614742
> 
> 赞同：0
> 
> 时间：2012-05-16T08:31:02.900
> 
> 标签：pdf, grails, controller, call

我正在使用 Groovy&Grails 门户网站进行编程，以显示不同的 pdf 页面。在一种情况下，我需要在 pdf 中显示来自数据库的图像。

对于 pdf 创建，我使用 pdf 0.6

该插件生成pdf，但.gsp中的图像不会显示：

```
<img style="height: 100px; float: right;" src="${grailsApplication.config.grails.tomcatURL}${createLinkTo(controller: 'mandant', action: 'logo_image', id: mandant.id)}" 
```

.gsp 忽略调用控制器，因为我在方法中有一些 println，所以我可以确定 .gsp 不会调用它。

如果我把那个 g 字符串：

`${grailsApplication.config.grails.tomcatURL}${createLinkTo(controller: 'mandant', action: 'logo_image', id: mandant.id)}`

如果没有`<img-tag>`gsp 中的 并单击该超链接，gsp 会调用控制器，并且图像会显示在新的浏览器选项卡中。

我希望有人能理解我的问题

格雷茨

马克斯·詹多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:46:05.453

如果您使用以下`base`属性（和`createLink` [标签](http://grails.org/doc/2.0.x/ref/Tags/createLink.html)），它是否有效：

```
${createLink(controller: 'mandant', action: 'logo_image', id: mandant.id, base:grailsApplication.config.grails.tomcatURL)} 
```

# jquery - 检查第一个字符是否为空格

> ID：10614744
> 
> 赞同：3
> 
> 时间：2012-05-16T08:31:03.227
> 
> 标签：jquery, validation, input, textfield

如何使用 jQuery 检查输入字段的第一个字符是否为空格？我需要检查以使用户无法输入像“rreea”这样的用户名。*第一个字符后*的空格是允许的。例如，“他的名字”可以，但“他的名字”或“他的名字”不被接受。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T08:33:53.063

尽管检查只是使用[`$.trim`](http://api.jquery.com/jQuery.trim/)方法添加字符串修剪。它从字符串的左右边缘删除所有空格。

```
var value = $.trim($("input").val()); 
```

否则，您可以使用

```
$("input").val().substring(0, 1) 
```

安全地获得第一个字符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T08:34:19.167

您可以使用`myString.substring(0,1)`或`myString[0]`来获取第一个字符。

您可以*修剪*输入；这不检查它是否以空格开头，它使这样的检查变得多余，并为您提供可用的输入，而不管原始字符串是否具有初始空格。

您还可以匹配`/^\s/`表示初始空格或`/^\s+/`表示任意数量的初始空格的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:42:48.350

您可以像数组一样访问字符串中的字符。所以以下应该工作：

```
if ($('#your-input').val()[0] === " ") {
    // error
} 
```

但是如果有两个空格呢？我认为你应该检查你的价值的修剪副本......</p>

```
var value = $('#your-input').val();
if (value.trim() !== value) {
    // error
} 
```

该`trim()`方法带有*Javascript 1.8.1*。如果你想支持早期版本，你也可以你的`$.trim(value)`. 希望这可以帮助。

# android - 如何避免在每个活动中获取位置和数据的重复代码？

> ID：10614747
> 
> 赞同：1
> 
> 时间：2012-05-16T08:31:10.100
> 
> 标签：android, android-activity, code-duplication

我有 2 个活动（一个带有 listview，1 个带有 mapview）。这两个活动都有刷新按钮，用于获取位置，然后从 Internet 下载一些数据。我在这两个活动中都有重复的位置和数据获取代码。

如何将这段代码放在一个地方并能够从任何活动中调用它？我可以把它放在应用程序对象中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:44:42.337

创建一个类，例如 GPSGetter，它不断从 GPS 获取坐标，然后在主活动的 onCreate 方法中通过该类的 createInstance() 方法进行实例化。然后在该类中定义一个 getInstance() 方法。

例如

```
class GPSGetter {

GPSGetter obj;

//constructor
private GPSGetter(){

//do some stuff here 
}

public GPSGetter createInstance(){
if(obj == null)
obj = new GPSGetter();
}

public getGPSGetter(){

return obj;

} 
```

通过这种方式，您可以从两个 Activity 类中调用 getInstance 而无需担心重复，这也将确保只创建一个类对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:39:14.447

```
 package com.;

    import android.content.Context;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Looper;
    import android.os.Message;
    import android.util.Log;

    /**
     * This class has the missionto get the current location, save it and manage it.
     * 
     * @author Aracem
     *
     */
    public class GetCurrentLocation implements Runnable {

    private Context mContext;
    private static GetCurrentLocation gcl = null;
    public static Location currentLocation = null;  
    private LocationManager mLocationManager;
    private MyLocationListener mLocationListener;
    private static Thread thread;
    private Handler handler = null;
    private static Location location = null;

    public static Location getLocation() {
        return location;
    }

    /**
     * @param Context de la aplicacion
     * 
     * Metodo que se encarga de crear la instancia de la clase de geolocalizacion
     */
    private synchronized static void createInstance(Context c) {
        if (gcl == null) gcl = new GetCurrentLocation(c);
    }//end method

    /**
     * @param Context de la aplicacion
     * @param han Handler with the handler that we want to call when the location
     * will found.
     * 
     * Metodo que se encarga de crear la instancia de la clase de geolocalizacion
     */
    private synchronized static void createInstance(Context c, Handler han) {
        if (gcl == null) gcl = new GetCurrentLocation(c, han);
    }//end method

    /**
     * @param Context context de la aplicacion
     */
    public static GetCurrentLocation getInstance(Context c) {
        if (gcl == null) createInstance(c);

        //if (currentLocation == null) getCurrentLocation();

        return gcl;
    }//end methodd

    /**
     * @param Context context de la aplicacion
     * @param han Handler with the handler that we want to call when the location
     * will found.
     */
    public static GetCurrentLocation getInstance(Context c, Handler han) {
        if (gcl == null) createInstance(c,han);

        //if (currentLocation == null) getCurrentLocation();

        return gcl;
    }//end methodd

    protected GetCurrentLocation(Context c){
        mContext = c;
        thread = new Thread(this,"Get Location");
        thread.start();

    }

    protected GetCurrentLocation(Context c, Handler han){
        mContext = c;
        handler = han;

        thread = new Thread(this,"Get Location");
        thread.start();

    }

    /**
     * Use this method to put a handler for the listener
     * this handler is activated when location is found.
     * @param han handle that you want to activate
     * when location is found.
     */
    public synchronized void setHandler(Handler han){
        handler = han;
    }

    //Location

    public static void setCurrentLocation(Location loc) {
        currentLocation = loc;
    }

    @Override
    public void run() {

        try{

            mLocationManager = (LocationManager)mContext.getSystemService(Context.LOCATION_SERVICE);

            if (mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
                Looper.prepare();
                Log.i("DEBUG","Location obtain with GPS.");
                mLocationListener = new MyLocationListener();
                mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mLocationListener);
                Looper.loop(); 
                Looper.myLooper().quit();  

            } else if (mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
                Looper.prepare();
                Log.i("DEBUG","Location obtain with network.");
                mLocationListener = new MyLocationListener();
                mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mLocationListener);
                Looper.loop();
                Looper.myLooper().quit();
            }else{
                Looper.prepare();;
                if (handler != null) handler.sendEmptyMessage(0);

                Log.i("DEBUG","Location cant be find.");
                Looper.loop();
                Looper.myLooper().quit();
            }   
        }
        catch(SecurityException e)
        {
            Log.i("DEBUG", e.getMessage() + " Continue with network_provider");

            if (mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
                Looper.prepare();
                Log.i("DEBUG","Location obtain with network.");
                mLocationListener = new MyLocationListener();
                mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mLocationListener);
                Looper.loop();
                Looper.myLooper().quit();
            }else{
                Looper.prepare();;
                if (handler != null) handler.sendEmptyMessage(0);

                Log.i("DEBUG","Location cant be find.");
                Looper.loop();
                Looper.myLooper().quit();
            }   
        }
    }

    /**
     * @author marcos
     * 
     * Clase de apoyo que extiende de LocationListener
     * que se utiliza para gestionar los cambios
     * en la recepción GPS tales como una nueva localizacion
     * o un cambio de Status
     */
    private class MyLocationListener implements LocationListener 
    {
        @Override
        public void onLocationChanged(Location loc) {
            if (loc != null) {
                setCurrentLocation(loc);
                //           handler.sendEmptyMessage(0);
                Log.i("DEBUG","Location: " + loc.toString());

                //Stop looking for locations
                mLocationManager.removeUpdates(mLocationListener);

                //If handler isnt null, call it 
                if (handler != null){
                    Message msg = new Message();
                    msg.obj = loc;
                    if (handler != null)
                        handler.sendMessage(msg);
                    location = loc;
                }
            }

        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, 
                Bundle extras) {
        }
    }  

} 
```

# algorithm - 朴素贝叶斯分类器中的“朴素”是什么？

> ID：10614754
> 
> 赞同：37
> 
> 时间：2012-05-16T08:32:04.770
> 
> 标签：algorithm, classification, naivebayes

什么是朴素的朴素贝叶斯？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-16T08:35:02.440

[Wikipedia 上](http://en.wikipedia.org/wiki/Naive_Bayes)有一个很好的例子：

> 简而言之，朴素贝叶斯分类器假设在给定类变量的情况下，一个类的特定特征的存在（或不存在）与任何其他特征的存在（或不存在）无关。例如，如果一个水果是红色的、圆形的并且直径约为 4 英寸，那么它可能被认为是一个苹果。即使这些特征相互依赖或依赖于其他特征的存在，朴素贝叶斯分类器也会考虑所有这些属性独立地影响了这种水果是苹果的概率。

基本上，它是“幼稚的”，因为它做出的假设可能会或可能不会被证明是正确的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-28T19:44:01.217

如果您的数据由特征向量 X = {x1, x2, ... x10} 和您的类标签 y = {y1, y2, .. y5} 组成，贝叶斯分类器将正确的类标签识别为最大化的类标签以下公式：

P(y|X) = P(X|y) * P(y) = P(x1,x2,...,x10|y) * P(y)

就目前而言，它仍然不幼稚。然而，P(x1,x2,...,x10|y) 很难计算，所以我们假设特征是独立的，这就是我们所说的朴素假设，因此，我们最终得到以下公式：

P(y|X) = P(x1|y) * P(x2|y) * ... * P(x10|y) * P(y)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-22T11:09:09.630

它之所以被称为幼稚，是因为它假设所有属性都是相互独立的。这个假设就是为什么它被称为幼稚的原因，因为在许多现实世界的情况下这并不适合。尽管如此，分类器在许多现实世界的情况下工作得非常好，并且在某些情况下（尽管不是全部）具有与中性网络和 SVM 相当的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-15T20:46:24.567

对于分类，当我们找到联合分布时，问题在于它只是反映了训练数据并且也很难计算。所以我们需要一些更有用的概括。

**朴素模型**强烈概括每个属性**独立**于任何其他属性分布。

它确实有助于在很大程度上不关心属性之间的依赖关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-25T01:13:20.717

在这里，我分享一个关于朴素贝叶斯分类器的实用解释的好文档，它会给你一个很好的想法。

[点击这里](https://monkeylearn.com/blog/practical-explanation-naive-bayes-classifier/)

# c - 多个目标模式？

> ID：10614758
> 
> 赞同：1
> 
> 时间：2012-05-16T08:32:37.743
> 
> 标签：c, cygwin

我正在尝试编译 ac 文件，其中包含 Mongo 数据库的驱动程序。我可以从 Cygwin 成功编译它，但是当我转向 Netbeans 时，我得到了这个。我应该提一下，这只有在 C 编译器的附加选项中添加“-std=c99”后才会发生。

更新：
从 Netbeans 成功编译它。但是“-std=c99”让我发疯。如果我有它，它会说（如果我不删除 obj 文件，则在每次编译后）：

```
build/Debug/Cygwin_4.x-Windows/main.o.d:1: *** multiple target patterns.  Stop. 
```

更新：
main.od 的内容是：

```
build/Debug/Cygwin_4.x-Windows/main.o: main.c \
 c:/mongodb-driver/src/mongo.h c:/mongodb-driver/src/bson.h \
 c:/mongodb-driver/src/platform.h

c:/mongodb-driver/src/mongo.h:

c:/mongodb-driver/src/bson.h:

c:/mongodb-driver/src/platform.h: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T09:55:29.733

引用现有答案，因为您可能有同样的问题

“我在使用 Cygwin 之前已经看到过这个问题——基本上，make 在路径中看到 : 并认为它是另一个目标定义，因此出现了错误。

如果您正在使用 Cygwin 安装，您可以尝试将 c:/ 替换为 /cygdrive/c/。如果没有，您可以尝试使用相对路径或使用网络挂载，看看是否可以修复它”。

[应用程序因 Eclipse 的多个目标而失败](https://stackoverflow.com/questions/2401976/very-simple-application-fails-with-multiple-target-patterns-from-eclipse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T11:36:26.293

从您的评论中：

> @Lumi 我怎样才能安装它而不必每次都编辑它？

修复生成`main.o.d`（可能还有许多其他`.d`文件）的脚本以编写相对路径或 Cygwin`make`理解的绝对路径。

或者，考虑使用[MinGW](http://www.mingw.org/)代替 Cygwin 是否适合您。（但我感觉你在走这条路时会遇到更多问题。）

Ultimately, to cope with Makefiles, you need to read up on how Make works. [GNU Make has a comprehensive manual.](http://www.gnu.org/software/make/manual/) I found [these tips](http://www.working-software.com/node/19) very useful. The best for you, at this stage, would probably be [Scott Duckworth's Make tutorial](http://www.cs.clemson.edu/~duckwos/make/).

# hadoop - Hadoop 块管理

> ID：10614762
> 
> 赞同：1
> 
> 时间：2012-05-16T08:32:50.960
> 
> 标签：hadoop

我是 Hadoop 的初学者（我已经学习了几个教程）。我目前正在研究 Hadoop 中的底层复制模型。我想知道模型的外观以及在哪里可以找到代码。

中期成果：研究了Hadoop的包后，我找到了包“org.apache.hadoop.hdfs.server.blockmanagement”。在这里我找到了几个类，比如 BlockManager.java。但是我已经走到了死胡同。

你能给我任何网站/书籍的参考，我可以在其中找到 Hadoop 中的底层复制模型。有没有？如果没有，你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:39:12.677

HDFS 架构指南中有一个高级概述：

*   [http://hadoop.apache.org/common/docs/current/hdfs_design.html#Data+Replication](http://hadoop.apache.org/common/docs/current/hdfs_design.html#Data+Replication)

至于溯源，NameNode会指示一个DataNode将一个block传输给其他DataNode。您可以通过以下方法在 DataNode 源中跟踪此命令：

```
org.apache.hadoop.hdfs.server.datanode.DataNode.processCommand(DatanodeCommand[])
 -> org.apache.hadoop.hdfs.server.datanode.DataNode.processCommand(DatanodeCommand)
     See the DatanodeProtocol.DNA_TRANSFER command type in the switch
   -> org.apache.hadoop.hdfs.server.datanode.DataNode.transferBlocks(Block[], DatanodeInfo[][])
     -> org.apache.hadoop.hdfs.server.datanode.DataNode.transferBlock(Block, DatanodeInfo[]) 
```

您可以从 NameNode 中发出的命令向后工作：

```
org.apache.hadoop.hdfs.server.namenode.DatanodeDescriptor.getReplicationCommand(int)
at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.handleHeartbeat(DatanodeRegistration, long, long, long, int, int) 
```

从这里你需要跟踪`pendingReplications`和`neededReplications`实例变量

# wcf - 在RootFrame.Navigating事件windows phone 7之前执行webservice方法异步

> ID：10614763
> 
> 赞同：0
> 
> 时间：2012-05-16T08:32:51.120
> 
> 标签：wcf, windows-phone-7, asynchronous, navigateurl

我想在 App.xaml.cs 类中进行身份验证，如果用户存在于数据库中，我想将用户引导到成员页面，否则想引导用户公共页面。我知道如何使用 rootframe 导航，但问题是即使我的 webervice 异步方法是在 RootFrameNavigating 之前编写的，但它没有在它之前执行。我的代码在这里

在 App 构造函数中

```
 dclient.GetUserByPhoneIdCompleted += new EventHandler<GetUserByPhoneIdCompletedEventArgs> (dclient_GetUserByPhoneIdCompleted);
        dclient.GetUserByPhoneIdAsync(GetDeviceUniqueID());
        if (getUserbyPhoneIdCompleted)
              RootFrame.Navigating += new NavigatingCancelEventHandler(RootFrame_Navigating); 
```

在我的方法中

```
 if (e.Uri.ToString().Contains("/MainPage.xaml") != true)
            return;
        e.Cancel = true;

        RootFrame.Dispatcher.BeginInvoke(delegate
        {
            if (userId == -1)
                RootFrame.Navigate(new Uri(string.Format("/View/PublicPage.xaml"), UriKind.Relative));
            else
                RootFrame.Navigate(new Uri(string.Format("/View/WelcomePage.xaml"), UriKind.Relative));
        }); 
```

并在我的webservice方法中返回整数，我在那里得到用户ID

像这样

```
 void dclient_GetUserByPhoneIdCompleted(object sender, GetUserByPhoneIdCompletedEventArgs e)
 {
     userId = e.Result;
     getUserbyPhoneIdCompleted = true; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:22:32.383

Your application starts, you send an asynchronous call to the webservice. Then the navigating event is triggered (why wouldn't it be? You're not blocking the thread), and your event handler is called. There, you're canceling the navigation, and checking the value returned by the webservice. But since there isn't any kind of waiting, you can reach that point before the webservice call has ended. There's many ways to fix that, but the one I would recommend is:

*   Don't call the webservice at application startup, let the application navigate to a custom loading page
*   On that page, call the webservice and display a 'Loading' message
*   Using the result of the webservice call, redirect to whichever page you want, then remove the loading page from the backstack

Don't forget to handle the case when the webservice call returns an error.

# plugins - Joomla 1.5.24 插件评级

> ID：10614770
> 
> 赞同：0
> 
> 时间：2012-05-16T08:33:13.593
> 
> 标签：plugins, joomla

我的问题是 Joomla 插件评级重要吗？如果是这样，如何知道哪个应该是第一个，第二个等等？或者在哪里可以找到这样的信息？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:33:23.047

一般来说：是的。这很重要。

我现在可以给您的唯一示例（可能也是最简单的示例）是：缓存插件（系统类型）。它们应该位于列表的末尾（更高的数字），以确保您正在缓存页面的“最终结果”（据我所知）。

大多数扩展在安装时会将自己放在列表中的“正确”位置。但是，如果您有很多插件，则最旧的安装插件可能会放错位置。

这是一篇关于它的小文章：

[http://www.kksou.com/php-gtk2/Joomla-Tips-Techniques/Ordering-of-Joomla-plugins.php](http://www.kksou.com/php-gtk2/Joomla-Tips-Techniques/Ordering-of-Joomla-plugins.php)

# java - 带有时区的 W3C XML 日期的 Java SimpleDateFormat 模式

> ID：10614771
> 
> 赞同：33
> 
> 时间：2012-05-16T08:33:13.763
> 
> 标签：java, date, simpledateformat, iso8601

我正在尝试解析[W3C](http://www.w3c.org) XML Schema 日期，如下所示

```
"2012-05-15T07:08:09+03:00" 
```

它符合[W3C XML Schema dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)规范的 ISO 8601 版本。

在上述日期中，时区标识符为`"+03:00"`，但`SimpleDateFormat`显然不存在表示它的模式。

如果时区是`"+0300"`，那么`Z`（大写）将适用并且`SimpleDateFormat`模式将是

```
yyyy-MM-dd'T'HH:mm:ssZ 
```

同样，如果时区为`"GMT+03:00"`，则`z`(小写) 将适用并且`SimpleDateFormat`模式将是

```
yyyy-MM-dd'T'HH:mm:ssz 
```

（顺便说一句，大写`'Z'`也可以）。

那么，是否有一种`SimpleDateFormat`模式或解决方法来表示上述日期而不对日期字符串进行预处理？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-16T08:46:35.257

如果您使用 Java 7+，则此模式应该有效（`X`适用于 ISO 8601 时区）：

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssX"); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-16T08:51:35.857

怎么样：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ"){ 
    public Date parse(String source,ParsePosition pos) {    
        return super.parse(source.replaceFirst(":(?=[0-9]{2}$)",""),pos);
    }
}; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-16T08:44:26.643

嗯，日期格式看起来像 XML 日期时间数据类型格式？如果是 XML 日期时间数据类型格式，您可以使用[javax.xml.datatype.DatatypeFactory](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/DatatypeFactory.html)来创建`XMLGregorianCalendar`

```
DatatypeFactory
  .newInstance()
  .newXMLGregorianCalendar("2012-05-15T07:08:09+03:00"); 
```

上面的调用返回实例，`XMLGregorianCalendar`您可以使用该对象转换为其他 Java 日期时间对象，如`GregorianCalendar`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T08:43:16.117

不，没有解决方法可以在`SimpleDateFormat`不预处理字符串的情况下理解这种格式（例如通过`:`从字符串中删除）。（编辑：除非您使用的是 assylias 指出的 Java 7 或更新版本）。

看起来您正在尝试以标准 XML 格式解析日期和时间 (ISO 8601) 的字符串。我建议使用[支持这种格式的](http://joda-time.sourceforge.net/cal_iso.html)[Joda Time](http://joda-time.sourceforge.net/)库。

如果由于某种原因您不能或不想使用 Joda Time，那么您可以使用包中的类`javax.xml.datatype`来解析和格式化这种格式的时间戳。例如：

```
DatatypeFactory factory = DatatypeFactory.newInstance();

// Parses a string in ISO 8601 format to an XMLGregorianCalendar
XMLGregorianCalendar xmlCal = factory.newXMLGregorianCalendar("2012-05-16T10:39:00+03:00");

// Convert it to a regular java.util.Calendar
Calendar cal = xmlCal.toGregorianCalendar(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-05T10:24:06.903

将 Apache commons DateUtils 与可能的模式一起使用。前任：

```
private static final String[] DATE_FORMATS = new String[] {
            "yyyy-MM-dd'T'HH:mm:ss.SSSZ", "yyyy-MM-dd'T'HH:mm:ssz",
            "yyyy-MM-dd'T'HH:mm:ssZ", "yyyy-MM-ddz", "yyyy-MM-ddZ" };

    public Date parse(String date) {

        Date parsedDate = null;
        try {
            parsedDate = DateUtils.parseDate(date, DATE_FORMATS);
        } catch (ParseException e) {
            logger.error("dates should be in valid format" + e);
            return null;
        }
               return parsedDate;
              } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-16T09:19:34.553

最好的方法是使用 Joda 的

```
org.joda.time.format.ISODateTimeFormat 
```

问候，

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-16T08:42:00.597

我不太确定这是否适合您。但是这里是我在将日期从一个时区转换为另一个时区时尝试过的代码。可能某些部分代码可以帮助您。

```
public Date convertToUserTimezone(long dateToConvert, String timezoneOffset){
        java.text.DateFormat format = SimpleDateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.MEDIUM);/*new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");*/
        // java.util.Calendar cal = Calendar.getInstance(new
        // SimpleTimeZone(0, "GMT+05:30"));
        TimeZone gmtTime = TimeZone.getTimeZone("GMT"+timezoneOffset);

        format.setTimeZone(gmtTime);
        java.util.Date date1 = new Date(format.format(new Date(dateToConvert)));

        return date1;
    } 
```

希望这对您有所帮助。干杯。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-16T09:06:03.787

关于 SimpleDateFormat，您已经提到了可用的格式模式，它们定义在：[http ://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

如果你想用你的 Date 做更多的事情，那么 GregorianCalendar 会给你更多的选择，例如：

```
TimeZone zone = TimeZone.getTimeZone(TimeZone.getTimeZone("GMT-8").getID());
GregorianCalendar calendar = new GregorianCalendar(zone);
calendar.setTime(new Date(SomeDate)); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-16T09:22:54.443

您可以尝试以下方法：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssz");
Date date = df.parse(stringDate.replaceAll("\\+", "GMT+")); 
```

# java - 通过 AJP 在 Tomcat 下的 Servlet 中忽略刷新输出流

> ID：10614775
> 
> 赞同：1
> 
> 时间：2012-05-16T08:33:30.947
> 
> 标签：java, apache, servlets, mod-jk, ajp

假设我有一个 Java Servlet 需要一段时间来完成计算它的响应，但我希望客户端看到中间响应而不是等待它完成。例如，假设我有以下 doGet 代码：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
{
    resp.setContentType("text/html");
    PrintWriter out = new PrintWriter(resp.getOutputStream());

    out.println("<h1>The Title</h1>");
    out.flush();

    // ... some computation that takes a while

    // ... now print the result via out

    out.close();
} 
```

当我在本地运行 Tomcat 并访问 Servlet 时，我可以看到整个计算完成`<h1>` **之前的情况。**

但是，当我在我的服务器上运行它并通过 Apache 访问它时，我只会在整个请求完成**后**得到响应（换句话说，我得到一个空白屏幕，而不是`<h1>`我期望收到的屏幕）。

我怀疑问题出在 AJP 或 Apache 中，似乎它忽略了对 的调用`flush()`，但我似乎无法找到问题所在。

在服务器上，我使用的是 Tomcat 6、Apache 2.2.21 和 AJP 1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:04:21.610

结果我只需要为 Tomcat 构建基于 APR 的 Native 库。根据[此处](http://tomcat.apache.org/tomcat-6.0-doc/apr.html)的说明正确构建和安装它后，它与 AJP 配合得很好。

# c - 使用无线电调制解调器可以使用的最快、可靠的波特率是多少？

> ID：10614777
> 
> 赞同：0
> 
> 时间：2012-05-16T08:33:33.463
> 
> 标签：c, serial-port, communication, radio, modem

我需要通过无线电调制解调器上的串行数据（使用 C）与 30 多个设备通信。每个消息周期都应该尽快完成。(< 500 毫秒)

基本设置是主机发送广播，然后每个从机在分配的时间段内回复其状态，所有这些都很好地同步。

我们将使用大约 870Mhz 的频率（无许可证），但我想知道物理限制是什么，这相当于最大可靠 (95%+) 波特率？

有没有人在这个领域有任何了解棒球场人物的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:45:13.540

您可以使用[香农-哈特利定理](https://i.stack.imgur.com/XQ0gK.png)来确定数据速率的上限。您需要知道*带宽*和*信噪比*。将这些数字代入公式，您将获得数据速率的上限：

![在此处输入图像描述](../Images/c8e705e6b70f2b8382dab89f490dc4c1.png)

```
C == channel capacity (bits per second)
B == bandwidth of the channel (Hz)
S/N == signal-to-noise ratio (NB: linear power ratio, not dB) 
```

# ios - IOS：appstore进程的entitlement.plist

> ID：10614786
> 
> 赞同：0
> 
> 时间：2012-05-16T08:33:59.487
> 
> 标签：ios, xcode, app-store, entitlements

我知道对于 ADhoc 版本，我应该在 entitlement.plist 中设置“get-task-allow”中的“NO”值，但对于 AppStore 流程？我应该设置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:37:43.903

对于 App Store，您还需要将其设置为 - `NO`。

# c# - 使用 C# 文本框更新 Mysql 中的多个列

> ID：10614793
> 
> 赞同：1
> 
> 时间：2012-05-16T08:34:26.790
> 
> 标签：c#, mysql

我想**使用 C# 更新 MySQL 中特定行中的 4 列**。我想更新

如果特定字段已经在文本框中输入到数据库中的值。我正在使用

以下查询。

```
 string query = " update orderform set enrolmentexpected = " +
    textBox2.Text + " stockonhand=" + textBox3.Text + " numberrequired = "
    + textBox4.Text +  " where name = " + textBox1.Text + ";"; 
```

我收到一个异常，即 mysql 语法有一些错误，但我无法

找到这样的。我的查询是正确的还是有一些语法错误，有什么方法可以

更新多列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:44:14.443

你在那条线上有很多问题。

*   值之间没有逗号
*   无参数使用[（有 Sql 注入问题](http://en.wikipedia.org/wiki/SQL_injection)）

使用这样的东西

```
using(MySqlConnection cn = GetConnection())
{
    cn.Open();
    string queryText = "update orderform set enrolmentexpected = ?en, stockonhand=?st, numberrequired=?num where name = ?name;";     
    MySqlCommand cmd = new MySqlCommand(queryText, cn);
    cmd.Parameters.AddWithValue("?en", textBox2.Text);
    cmd.Parameters.AddWithValue("?st", textBox3.Text);
    cmd.Parameters.AddWithValue("?num", textBox4.Text); // ?? require conversion to Int ???
    cmd.Parameters.AddWithValue("?name", textBox1.Text);
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:43:09.553

```
string query = " update orderform set enrolmentexpected = " +
textBox2.Text + ", stockonhand=" + textBox3.Text + ", numberrequired = "
+ textBox4.Text +  " where name = '" + textBox1.Text + "';" 
```

猜测 name 是一个字符串和其他两个 int

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:39:27.440

您似乎忘记了表达式后的逗号“，”：

`string query = " update orderform set enrolmentexpected = " + textBox2.Text + ", stockonhand=" + textBox3.Text + ", numberrequired = " + textBox4.Text + " where name = " + textBox1.Text + ";";`

和引号：

`string query = " update orderform set enrolmentexpected = '" + textBox2.Text + "', stockonhand= '" + textBox3.Text + "' , numberrequired = '" + textBox4.Text + "' where name = " + textBox1.Text + ";";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T08:41:55.883

看来您没有使用单引号和逗号。
用这个

```
string query = " update orderform set enrolmentexpected = '" +
textBox2.Text + "', stockonhand='" + textBox3.Text + "', numberrequired = '"
+ textBox4.Text +  "' where name = '" + textBox1.Text + "';"; 
```

这在所有数据类型都是 char 或 varchar 类型的情况下有效。

# ruby-on-rails - 对每个循环使用 Rspec 的单元测试用例

> ID：10614794
> 
> 赞同：2
> 
> 时间：2012-05-16T08:34:30.687
> 
> 标签：ruby-on-rails, rspec

我的模型中有以下方法

```
def get_performance_data para, child_para_hash
  performance_graph_data = {}
  child_para_hash.each do |cp|
    performance_graph_data[cp] =  fetch_per_child_para_data(para, cp)
  end
  performance_graph_data  
end

def fetch_per_child_para_data para, child_para
  test_performances.where(network_data_condition(para, child_para)).select("AVG(value)avg_value, activity").group('act_num')
end 
```

我在理解如何为模型方法中的每个循环编写测试用例时遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:33:11.250

好的测试是关于验证方法的行为，而不是它的内部运作。因此，根据发布的示例，您的测试应该检查**#get_performance_data**是否为您的夹具定义的 performance_graph_data 返回正确的值，而不是检查内部循环**实现**。

如果您的测试在概念上不是说“给定输入 X，我的结果应该始终为 Y”，那么您可能正在测试错误的东西。与往常一样，这条规则也有例外，但如果没有很好的理由，我不会违反规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:03:20.930

您可以通过将多个参数传递给 stub 来返回连续值`and_return`，例如

```
mock_object = double('my_object')
mock_object.stub(:foo).and_return(1,2,3)

mock_object.foo # => 1
mock_object.foo # => 2
mock_object.foo # => 3 
```

您可以在示例中调整此模式并将返回的值存根`fetch_per_child_para_data`以模拟循环中重复方法调用的效果。

# jquery - jQuery：创建一个对象后创建任何新对象

> ID：10614796
> 
> 赞同：0
> 
> 时间：2012-05-16T08:34:43.433
> 
> 标签：jquery, object, event-handling, thickbox, oncreate

我想插入一个对象，就像`$('<p>Test</p>').prependTo('#TB_window');`每次创建**#TB_window**对象一样。

创建后如何制作 `thickbox`？

我想在 wordpress 网站[http://hogdal.dk/?p=60中使用它](http://hogdal.dk/?p=60)

只需查看图库中的图片即可。

我正在使用 wordpress 默认的thickbox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:03:10.647

这个怎么样：

[http://jsfiddle.net/zerkms/YZwRu/](http://jsfiddle.net/zerkms/YZwRu/)

```
$(document).on('DOMNodeInserted', function(event) {
    var $target = $(event.target);

    if ($target.is('#TB_window')) {
        $target.append('<p>Test</p>');
    }
});

$('body').append('<p>a</p>');
$('body').append('<p id="TB_window">b</p>');
$('body').append('<p>c</p>');
​ 
```

在此示例中，我们使用[DOMNodeInserted](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)事件，该事件在另一个节点插入到文档时触发。之后，我们检查该元素是否具有所需的元素`id`，如果是，则为`append`它添加新节点

# jquery - 在父图像上的确切位置添加子图像，即使我将使用 jquery 增加/减小父图像大小

> ID：10614797
> 
> 赞同：0
> 
> 时间：2012-05-16T08:34:46.447
> 
> 标签：jquery, image

第 1 步：我有一个尺寸为 400x300 的图像。现在，我单击图像并找到单击位置（顶部，左侧）并用小图像图标标记该位置，并将此信息保存到数据库中（顶部和左侧）。

第 2 步：现在我有相同的图像，但尺寸为 (700*500)。现在，我想显示在步骤 1 中存储在数据库中的单击位置，并在此图像上显示一个小图像图标。

问题：问题是对于大小为 400*300 的图像，外观位置是正确的，但是对于大小为 700*500 的图像，我们在将图标放置在单击位置时遇到问题。在这两种情况下，小图标的 (top,left) 的值都是相等的。

这整个过程我想通过 jQuery 来完成。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:05:46.650

像这样的东西可以用来实现ckaufman的建议。

```
image1.click(function(e) {
    var offset = $(this).offset(),
        width = $(this).width(),
        height = $(this).height(),
        leftPercent = (e.clientX - offset.left)/width,
        topPercent = (e.clientY - offset.top)/height;

    // position marker image appropriately and 
    // store leftPercent and topPercent in database
}); 
```

然后要在同一图像的不同大小版本上设置标记的位置，您可以执行以下操作：

```
var leftPercent = .45, // from database
    toppercent = .23

image2.load(function() {
    var width = $(this).width(),
        height = $(this).height(),
        leftPosition = Math.round(leftPercent*width),
        topPosition = Math.round(topPercent*height);

    // set the marker position to leftPosition and topPosition
    // note: this is relative to the top left of the main image
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:36:07.480

请查看我的代码

获取Marking时的点击位置即为image1的点击事件

```
 var PosX = 0;
                    var PosY = 0;
                    var ImgPos;
      //here i am getting the exact position of image with size (400*300)
                    ImgPos = FindPosition(sender);
                    if (!e) var e = window.event;
                    if (e.pageX || e.pageY) {
                        PosX = e.pageX;
                        PosY = e.pageY;
                    }
                    else if (e.clientX || e.clientY) {
                        PosX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                        PosY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
                    }
     //these two value i am saving in database
                    PosX = PosX - ImgPos[0];
                    PosY = PosY - ImgPos[1];
      //gettting the position of image 
                    function FindPosition(oElement) {
                    if (typeof (oElement.offsetParent) != "undefined") {
                        for (var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent) {
                            posX += oElement.offsetLeft;
                            posY += oElement.offsetTop;
                        }                                                  
                        return [posX, posY];

                    }
                    else {
                        return [oElement.x, oElement.y];
                    }
                } 
```

# asp.net - 使用 SetFocusOnError="true" 时如何避免页面被刷新

> ID：10614806
> 
> 赞同：3
> 
> 时间：2012-05-16T08:35:36.850
> 
> 标签：asp.net, html

我有一个必填字段验证器，我在其中添加了 SetFocusOnError="true" 的属性

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidatorFirstName" runat="server" CssClass="message-validation-color"
                        Text="Required first name!"  
                        SetFocusOnError="true"
                        ControlToValidate="txtFirstName" />
                        <br/> 
```

但是每当我点击提交按钮时。焦点将设置在名字的文本框上（这实际上是我的目标）。但是然后页面重新加载并且焦点将丢失。我注意到当我不包含 SetFocusOnError="true" 时，页面不会重新加载。

使用 SetFocusOnError="true" 时是否需要添加任何验证？

我只想将焦点放在有错误的字段上，而不是要重新加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:24:42.170

2 things to try:

1.  Place an Update Panel around your form elements
2.  ensure that all your form elements and Validators all use the same "ValidationGroup", including the button you're using to submit the form

# c# - 在当前鼠标位置缩放/拉伸图片框？

> ID：10614807
> 
> 赞同：4
> 
> 时间：2012-05-16T08:35:44.687
> 
> 标签：c#, visual-studio, gis, picturebox, zooming

**问：如何在图片框上实现当前鼠标位置的缩放，例如在 Google 地图中进行缩放？**

我正在设计一个简单的 GIS / 地图引擎作为我的论文工作。该应用程序的设计方式是将地图加载到经过轻微修改的选项卡控件的选项卡中。

地图是标准的 JPEG 或 PNG 格式的数字图像，其中大多数具有非常高的分辨率（2000x2000 像素及以上）。

它们被加载到作为标签页的子控件添加的图片框中。我已经实现了一个简单的缩放方法作为按钮单击事件，它只缩放到图像/图片框的中心。

我想要做的是在图片框内的当前鼠标位置上缩放图片的方式实现鼠标滚轮事件的缩放。

目前放大的代码如下所示：

```
 timesZoomed += 1;
            zoomRatio += 0.1f;
            pbxMapa.Width = pbxMapa.Width * zoomRatio;
            pbxMapa.Height = pbxMapa.Height * zoomRatio;
            pbxMapa.Location = new Point((this.Width / 2) - (pbxMapa.Width / 2), this.Height / 2) - (pbxMapa.Height / 2)); 
```

*   默认的“zoomRatio”值为 1，并且正在增加到 0.6f。
*   参数“timesZoomed”默认值为 0，最大为 6。
*   “pbxMapa”是加载地图图像的图片框。图片框的“ImageSizeMode”属性设置为“缩放”，但图片框的大小设置为加载的地图图像的全尺寸。

另外，我正在试验这个简单的缩放代码。该计算有些有效，但在缩放/乘以更大的比率时仍然有相当大的偏移：

```
 pbxMapa.Location = new Point(pbxMapa.Location.X + (int)((pbxMapa.Location.X * zoomRatio - mouseXPbx) / 8), pbxMapa.Location.Y + (int)((pbxMapa.Location.Y * zoomRatio - mouseYPbx) / 8)); 
```

*   “mouseXPbx”和“mouseYPbx”变量表示“pbxMapa”内的当前鼠标位置。我除以 8 以最小化定位中的偏移。

任何帮助和建议表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-14T13:56:00.083

下面的代码在当前鼠标位置缩放和拉伸图片框

```
pictureBox1.Width = (int)(pictureBox1.Width * zoomratio );
pictureBox1.Height = (int)(pictureBox1.Height * zoomratio );                
pictureBox1.Top = (int)(e.Y - zoomratio * (e.Y - pictureBox1.Top));
pictureBox1.Left = (int)(e.X - zoomratio * (e.X - pictureBox1.Left)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:17:37.453

我设法在这行代码中调整了位置的计算。它工作正常，它正在按照我需要的方式缩放。

```
pbxMapa.Location = new Point(pbxMapa.Location.X + (int)(((pbxMapa.Location.X - mouseXPbx) / 10) * zoomRatio), pbxMapa.Location.Y + (int)(((pbxMapa.Location.Y - mouseYPbx) / 10) * zoomRatio)); 
```

# jquery - JQuery.parseJSON 的无效 JSON 错误

> ID：10614808
> 
> 赞同：1
> 
> 时间：2012-05-16T08:35:46.710
> 
> 标签：jquery, json

我正在尝试将以下字符串解析为 JSON 对象。它给了我错误。我不知道为什么。

```
var json1 = "{'firstName': 'John','lastName': 'Smith', 'age': 25, 'address': {'streetAddress': '21 2nd Street','city': 'New York','state': 'NY', 'postalCode': '10021'}, 'phoneNumber':   [ {'type': 'home','number': '212 555-1234'},  {'type': 'fax', 'number': '646 555-4567' }]}";
$.parseJSON(json1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T08:37:11.750

`"`对键和字符串值使用双引号：参见[jsonlint](http://jsonlint.com/)

如果您用双引号更改所有出现的单引号，则您的 JSON 是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:55:08.893

```
var json1 = '"result":[{"firstName": "John","lastName": "Smith", "age": 25, "address": [{"streetAddress": "21 2nd Street","city": "New York","state": "NY", "postalCode": 10021}, "phoneNumber":   [ {"type": "home","number": 212 555-1234"},  {"type": "fax", "number": 6465554567 }]]}]"; 
```

# vbscript - 带有 0 的 concat 字符串在 vbScript 中不起作用

> ID：10614809
> 
> 赞同：-1
> 
> 时间：2012-05-16T08:35:50.930
> 
> 标签：vbscript, concatenation

我在 VbScript 中尝试了以下每个代码，但它没有提供所需的输出：

```
alert("Day=" + <%= (CStr("0") + "6")%>);
alert("Day=" + <%= (0 + "6")%>);
alert("Day=" + <%= ("0" + "6")%>);
alert("Day=" + <%= (CStr(0) + "6")%>); 
```

我也用**&**而不是**+**

```
alert("Day=" + <%= (CStr("0") & "6")%>);
alert("Day=" + <%= (0 & "6")%>);
alert("Day=" + <%= ("0" & "6")%>);
alert("Day=" + <%= (CStr(0) & "6")%>); 
```

以上所有都给出相同的输出：**Day=6**

如果我使用 1 而不是 0 它可以工作（例如，它给出输出：**Day=16**）

但我想要这个输出：**Day=06**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:28:16.380

这是带有服务器端 asp-vbscript 代码的客户端 javascript 吗？

首先在服务器代码中编写你的字符串，然后显示它把它放在一个 asp 文件中，它会在你的浏览器中给出 Day=06

```
<%str = "'Day=" & "0" & "6'" '=> Day=06%>
<script>
document.write(<%=str%>) 
</script> 
```

# php - 缓存/离线网站脚本

> ID：10614810
> 
> 赞同：2
> 
> 时间：2012-05-16T08:35:55.777
> 
> 标签：php, caching, static

我创建了一个简单的 cms 来为我的客户构建简单的网站。cms 是数据库驱动的。我想制作网站的离线/缓存/静态副本，以提高性能。

是否有任何可用的 php 脚本，可以遍历网站并创建静态版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:40:45.650

自己制作一个并将其集成到您的简单 CMS 中？

您可以使用很多可能性，例如[Memcache](http://php.net/memcache)、[APC](http://php.net/apc)以及应用程序生成的纯静态文件。

您的问题非常含糊，因为您在编写缓存时没有提供任何真正的问题。但是除了我提到的前两个选项之外，一个简单的静态文件缓存可以使用[file_get_contents](http://php.net/file_get_contents)、[file_put_contents](http://php.net/file_put_contents)和[filemtime来完成](http://php.net/filemtime)

示例（松散）：

```
<?php

if( file_exists("/cache_dir/".$page_name) && (time() - filemtime("/cache_dir/".$page_name)) > 300)
{
  $contents = file_get_contens("/cache_dir/".$page_name);
}
else
{
  // getting the page contents
  ob_start();

  //output your page

  $contents = ob_get_clean();
  file_put_contens($contents, "/cache_dir/".$page_name);
}

echo $contents;

?> 
```

这是一个简短而松散的示例，但它可能会帮助您了解如何制作适合您的应用程序的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:44:44.897

您可以做很多事情来优化站点，大多数不遍历站点并创建缓存，您可以编写自己的非常简单的类，或者您可以使用已经编写的类：

[http://www.jongales.com/blog/2009/02/18/simple-file-based-php-cache-class/](http://www.jongales.com/blog/2009/02/18/simple-file-based-php-cache-class/)

它的工作方式是有人第一次访问实时页面时，如果缓存不存在，则创建缓存，如果缓存确实存在，则提供缓存版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:38:43.263

缓存，尤其是离线时，是由大多数现代浏览器自动完成的。由于 PHP 是一种服务器端语言，因此它仅限于在“在线”端产生影响。但是，如果您想提高性能，可以尝试通过 PHP自动[缩小资源。](http://code.google.com/p/minify/)

如果您非常想离线存储数据，您可以看到可以放入 cookie 的内容，但我并不认为这是一种传统方法。

编辑：

如果您的意思是在服务器端制作静态页面，那么可以。使用正确的权限，您可以使用 fopen() 和[相关函数](http://www.tizag.com/phpT/filewrite.php)创建和编辑页面。

# java - 有效地使用 Netty 管道

> ID：10614813
> 
> 赞同：4
> 
> 时间：2012-05-16T08:36:00.517
> 
> 标签：java, netty, pipeline

在服务器上，每个新连接都会调用 ChannelPipelineFactory#getPipeline()。我的服务器的 ChannelHandlers 分配了序列化缓冲区和其他非线程安全的对象。如何避免为每个连接分配它们？我的应用程序有大量的短期连接，这会损害性能。我不在处理程序中存储每个连接状态，我真的只需要为每个将使用管道的线程分配一次，因为处理程序中的对象不是线程安全的。

可能我可以使用带有单个处理程序的管道。当收到任何事件时，我会从 ThreadLocal 获取对我的实际处理程序的引用。这样，我只为每个服务连接的线程分配一次实际的处理程序。这确实意味着 ThreadLocal 查找每个事件。

还有其他可能更好的解决方案吗？

我的印象是，Netty 管道在相对简单的示例代码中看起来很棒，并且在它很好地适应问题（例如 HTTP 处理）时非常整洁，但是对于许多其他场景来说它不是很灵活。[这](http://lists.jboss.org/pipermail/netty-users/2010-August/002949.html)是其他人的想法。这不是任何灾难，因为使用单个处理程序来滚动您自己的“管道”似乎完全可行，但我想知道我是否做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T06:46:29.080

如果对您来说足够的话，使用 ThreadLocal 似乎是个好主意。请注意，这仅适用于上游事件，因为下游事件可能被任何线程触发，因此 ThreadLocal 的东西可能不会那么好。

# javascript - 如何在调用 toggelsidebar() 后在侧边栏中传递数据

> ID：10614814
> 
> 赞同：2
> 
> 时间：2012-05-16T08:36:03.027
> 
> 标签：javascript, xul

我想在它打开后在侧边栏中填充一些数据。

但是这里我的程序说的是——

document.getElementById("sidebarElement").value ------is Empety

```
 togglesidebar("viewSidebar");

    document.getElementById("sidebarElement").value="somevalue"; 
```

所以在这种情况下我能做些什么。请建议。

* * *

**感谢您的回复，**

我得到了为什么我的侧边栏文本框在调用 togglesidebar() 后没有填充数据的原因。

这是我正在尝试做的代码的一个小快照。

**在 overlay.js 文件中：**

```
function displaySidebar()
{
  toggleSidebar('vieweSidebar',false);
  val1="some string";
  val2="some string";
  myfun(val1,val2);// not calling
} 
```

**在 mySidebar.js 文件中：**

```
myfun(val1,val2)
{
 document.getElementById("textbox1").value=val1;
 document.getElementById("textbox2").value=val2;
} 
```

这里函数**myfun(val1,val2)**在调用**togglesidebar('viewSidebar',false)**后没有调用。

所以我无法在调用切换侧边栏后填充侧边栏上的文本框。

你能告诉我为什么 myfun() 没有在这里打电话吗？

**textbox1 和 textbox2 是侧边栏元素。**

# objective-c - 将 LocationManager 设置为默认精度

> ID：10614817
> 
> 赞同：0
> 
> 时间：2012-05-16T08:36:13.110
> 
> 标签：objective-c, cllocationmanager

我的应用程序使用 `significantLocationChanges`了很短的时间，但我需要使用 GPS，所以我将精度设置为`kCLLocationAccuracyBest`并`startUpdatingLocation`在短时间内 I `stopUpdatingLocation`。由于我仍将监视重大的位置变化，`kCLLocationAccuracyBest`但我不希望有一个不太准确的默认值，因此电池不会耗尽，那是哪一个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:43:07.760

完整的有效值集是......

```
extern const CLLocationAccuracy kCLLocationAccuracyBestForNavigation;
extern const CLLocationAccuracy kCLLocationAccuracyBest;
extern const CLLocationAccuracy kCLLocationAccuracyNearestTenMeters;
extern const CLLocationAccuracy kCLLocationAccuracyHundredMeters;
extern const CLLocationAccuracy kCLLocationAccuracyKilometer;
extern const CLLocationAccuracy kCLLocationAccuracyThreeKilometers; 
```

根据您的应用程序的需要，您需要选择不太精确的设置之一 - 即十米、百米、公里或三公里。

# jsf-2 - 设置 primefaces selectonemenu 值的整数范围

> ID：10614818
> 
> 赞同：2
> 
> 时间：2012-05-16T08:36:13.917
> 
> 标签：jsf-2, primefaces

我想显示从某个最小值到最大值的连续整数值。

是否有任何方法可以在 xhtml 页面上从 min 循环到 max 并将循环值添加到 selectItems

目前我正在做：

```
<p:selectOneMenu>
    <f:selectItems value="#{bean.intValuesFrom25ToMaxValue}" var="myInteger" itemValue="#{myInteger}" itemLabel="#{myInteger}" />
</p:selectOneMenu> 
```

**注意：**当前的解决方案没有问题，但是我有很多不同的选择一个菜单，其值只是一个连续的整数范围，所以对于所有我必须编写 getter 函数？这就是为什么我想在 xhtml 页面上创建一个循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:41:42.950

你可以这样做

```
 <ui:repeat value="#{bean.yourInts}" var="oneInt">
      <f:selectItem value="#{oneInt}" />
 </ui:repeat> 
```

我希望它是正确的，我现在没有机会尝试:-)

**编辑**

在这种情况下试试这个

```
 <c:forEach begin="25" end="100" var="i">
     <f:selectItem value="#{i}" />     
 </c:forEach> 
```

这不是一个完美的解决方案，因为您将 JSTL 与 JSF 混合（有时会导致问题），但在这种情况下很好，因为您的循环不使用任何动态值。

# jquery - JqueryUI 选项卡 - 需要更改 URL onSelect Tab

> ID：10614823
> 
> 赞同：1
> 
> 时间：2012-05-16T08:36:22.897
> 
> 标签：jquery, jquery-ui, hyperlink, tabs, jquery-ui-tabs

我有菜单标签结构：

```
<div id="tabs">
  <ul>
    <li><a href='#tabs-1'>TabGroup1</a></li>
    <li><a href='#tabs-2'>TabGroup2</a></li>            
  </ul>
  <div id='tabs-1'>
    <a href='tab1_link1.html'>TabGroup1-link1</a>
    <a href='tab1_link2.html'>TabGroup1-link2</a>
  </div>
  <div id='tabs-2'>
    <a href='tab2_link1.html'>TabGroup2-link1</a>
    <a href='tab2_link2.html'>TabGroup2-link2</a>
  </div>
</div> 
```

**任务**：我需要将位置自动更改为所选选项卡中的第一个链接。因此，当我单击第二个选项卡时，页面将重新加载并显示打开的第二个选项卡，其中包含选定的第一个链接 (tab2_link1.html)。

我找到了[解决方案](http://forum.jquery.com/topic/tabs-when-clicking-on-tab-load-a-new-page-instead-of-hide-show-divs)，它使选项卡成为活动链接，但如果选项卡为空 div，则此方法有效，并且我需要从选项卡的内容激活链接，所以这不能解决我的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:51:50.497

选择选项卡时触发“tabsselect”事件。所以让我们绑定到那个：

```
$( "#tabs" ).bind( "tabsselect", function(event, ui) {
    //Here we have:
    ui.options // options used to intialize this widget
    ui.tab // anchor element of the selected (clicked) tab
    ui.panel // element, that contains the contents of the selected (clicked) tab
    ui.index // zero-based index of the selected (clicked) tab 
```

因此，在您的情况下，您需要将窗口位置设置为所选选项卡中的第一个锚元素 href url。

```
window.location.href = $(ui.panel).find('a:first').attr(href);}); 
```

因此，鉴于上述内容和您的标记，这将导航到该选项卡上引用的第一个链接位置。

```
$( "#tabs" ).bind( "tabsselect", function(event, ui) {
    var myhref = $(ui.panel).find('a:first').attr('href');
    alert("Here we go to:"+href);
    window.location.href = href;
}); 
```

最终脚本：

```
$( "#tabs" ).bind( "tabsselect", function(event, ui) {
     window.location.href = $(ui.panel).find('a:first').attr('href');
}); 
```

上述示例工作示例：http: [//jsfiddle.net/PyM7p/](http://jsfiddle.net/PyM7p/)

自我注意：当在当前页面上只使用第一个链接时，在一个选项卡上有多个链接似乎很奇怪。不过，这不是我的页面标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:20:14.223

添加侦听器执行选择事件并在此函数中设置 location.href，然后重新加载浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T09:42:39.150

选项卡选择事件在 JQuery 1.9+ 中被丢弃，如此处[所述](http://jqueryui.com/upgrade-guide/1.9/)。要使用 jquery 1.9+，你必须做这样的事情

```
$( "#tabs" ).on( "tabsactivate", function( event, ui ) {

} ); 
```

UI 中有以下四个对象。它们都是 Jquery 对象。所以不需要再次包装它们。

*   新标签

刚刚激活的选项卡。

*   旧标签

刚刚停用的选项卡。

*   新面板

刚刚激活的面板。

*   旧面板

刚刚停用的面板。

所以最终的代码看起来像这样

```
$( "#tabs" ).on( "tabsactivate", function( event, ui ) {
     window.location.href = ui.newTab.find('a.ui-tabs-anchor').attr('href');
} ); 
```

# regex - 所有逗号后删除空格

> ID：10614829
> 
> 赞同：1
> 
> 时间：2012-05-16T08:36:40.510
> 
> 标签：regex, sed

我有一个 CSV 文件，每个逗号后都有一个空格。我希望删除每个逗号后的空格，然后尝试以下操作：

```
sed -e 's/ ,/,/g' local.csv > localNoSpaces.csv 
```

但这只会删除每行第一个逗号后的空格。所有逗号后如何删除空格？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:45:41.110

以防万一空格不是空格而是制表符和空格，您可以使用

```
 sed -e 's/\s\+,/,/g' local.csv > localNoSpaces.csv 
```

或者如果他们在每个逗号使用之后

```
 sed -e 's/,\s\+/,/g' local.csv > localNoSpaces.csv 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:43:09.273

您的正则表达式会删除逗号之前的空格，而不是之后的空格：

```
sed -e 's/, /,/g' local.csv > localNoSpaces.csv 
```

如果可以有多个空格，请使用`+`量词：

```
sed -e 's/, \+/,/g' local.csv > localNoSpaces.csv 
```

# javascript - 使用javascript选择文件然后上传

> ID：10614830
> 
> 赞同：2
> 
> 时间：2012-05-16T08:36:48.240
> 
> 标签：javascript, asp.net-mvc-3, html

我将 blob 数据（从 urldata 转换而来）附加到表单中。我使用的代码如下：

```
var blob = dataURItoBlob(row.pict);
var fd = new FormData(document.forms[0]);
fd.append("uploadFile", blob); 
```

我打算将 blob 设置为文件类型输入的选定文件：

```
<input type="file" name="uploadFile" id="btn_pic" /> 
```

但是当我单击提交按钮时，服务器无法识别我要上传的文件。服务器将参数读取为 null（我使用的是 ASP .NET MVC3）。我在服务器端使用下面的代码：

```
public ActionResult Create(Discussion d, HttpPostedFileBase uploadFile)
{
    ....
} 
```

有什么办法可以使用javascript设置选定的文件？

# css - 精灵加载多次，没有像我期望的那样缓存

> ID：10614831
> 
> 赞同：2
> 
> 时间：2012-05-16T08:36:49.090
> 
> 标签：css, asset-pipeline, compass-sass, sass

我正在尝试基于[SCSS 的指南针精灵](http://compass-style.org/reference/compass/utilities/sprites/sprite_img/)混合创建一个精灵混合。

问题是图像被多次加载。一个用于图像的每个唯一调用（因此每个引用精灵的新类名）

这是我正在使用的 SCSS。首先我们调用 compass mixins：

```
$sprite-default-size:29px;
@import "compass/utilities/sprites/sprite-img"; 
```

然后我创建了自己的 mixin，旨在接受一列图像，每个图像的右侧都有悬停状态：

```
$icons: "/assets/icons/socialMediaSprite.png";    
@mixin verticalHoverSprite($row){
        @include sprite-img("/assets/icons/socialMediaSprite.png",1,$row);
        &:hover{
            @include sprite-img($icons,2, $row);
        }
    } 
```

我使用将 mixins 应用到每个必需的类：

```
 .socialMediaLink{

        @include verticalHoverSprite(1);

        &.facebook{
                @include verticalHoverSprite(2);
        }
        &.twitter{
                @include verticalHoverSprite(3);
        }

    } 
```

这是我将图像附加到的 HTML：

```
<span class="socialMediaLink"></span>
<span class="facebook socialMediaLink"></span>
<span class="twitter socialMediaLink"></span> 
```

* * *

Chrome 网络面板的屏幕截图，显示图像加载了 3 次：

![Chrome 网络面板的屏幕截图](../Images/6b2c14b11b49769889aea134910f7253.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:32:24.197

检查您的浏览器中是否未禁用缓存（大约从 v17 开始可以禁用它）。

另一个想法是您只包含一次图像：

```
background: url(yourimage.png) no-repeat; 
```

然后只用 CSS 改变它的位置而不再次包含图像：

```
background-position: 0px 100px; 
```

我想您正在尝试这样做，我只是建议不要包含每个班级的图像，只更改位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:11:38.997

RynoRn 是正确的，但我认为他的答案需要扩展到特定于 Compass SCSS，而不仅仅是 CSS。

`compass`为了使用and修复它`scss`，我将代码从问题更改为以下内容：

mixin 现在没有对图像的引用，只是改变了位置：

```
@mixin verticalHoverSprite($row){
    @include sprite-position(1, $row);
    &:hover{
        @include sprite-position(2, $row);
    }
} 
```

我们将背景图像添加到`socialMediaLink`类中：

```
.socialMediaLink{

    @include sprite-background("/assets/icons/socialMediaSprite.png");

    @include verticalHoverSprite(1);

    &.facebook{
            @include verticalHoverSprite(2);
    }
    &.twitter{
            @include verticalHoverSprite(3);
    }
} 
```

# ssis - 如何在ssis中使用参数查找转换

> ID：10614832
> 
> 赞同：1
> 
> 时间：2012-05-16T08:36:57.310
> 
> 标签：ssis

我有一个输入 csv 文件，其中包含 eid、ename、designation 列。接下来我使用查找转换，里面查找我使用查询

```
select * from employee where ename=? 
```

我需要传递参数吗？来自 csv 文件。也就是说，必须使用查找转换将 csv 文件中的 ename 传递到查询中。

在查找中，我将模式更改为部分缓存，在高级选项卡中，我选择了修改 SQL 语句并放置了我的查询，然后单击参数选项卡。但我不知道如何传递参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:53:57.253

您不能向查找查询添加参数。如果通过添加参数，您的目标是减少从数据库读取的数据量，您不必担心，“部分缓存”会为您做到这一点。

部分缓存意味着在验证阶段不执行查找查询（如完整缓存选项），并且在从数据库中逐一查询时将行添加到缓存中。因此，如果您的查找缓存中有 100 万行，而您的查询只引用了其中的 10 行，那么您的查找将对您的数据库执行 10 次选择，最终只有 10 行。

# javascript - onMouseOver 用于 div 内的 span

> ID：10614835
> 
> 赞同：1
> 
> 时间：2012-05-16T08:37:10.790
> 
> 标签：javascript, jquery

我想为#AboutButton 做一个鼠标悬停。但是警报没有弹出。为什么以及如何做到这一点的任何线索。

--js代码

```
$(document).ready(function() {

$('#AboutButton').mouseover(function() {
 alert('test');  
});

}); 
```

--html代码

```
 <div id="Menu">
    <span id="HomeButton">Home</span>
    <span id="ButtonSeparator01">&nbsp;</span>
    <span id="AboutButton">About</span>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:50:17.967

Hiya**演示** [http://jsfiddle.net/m5sE2/](http://jsfiddle.net/m5sE2/)（复制我们在上面的评论中讨论）

有一个不错的布鲁夫！

**jQuery代码**

```
$(document).ready(function() {

$('#AboutButton').mouseover(function() {
 alert('test');  
});

});​ 
```

# javascript - jstree jquery插件中字段“左”和“右”的特点是什么？

> ID：10614839
> 
> 赞同：3
> 
> 时间：2012-05-16T08:37:21.767
> 
> 标签：javascript, jquery, html, jstree

我正在使用 jquery 插件 jstree 来构建一棵树。

当我执行这个插件的数据库文件时，这个db有2个字段“left”和“right”，所以我不知道这些字段是用来做什么的？如果我将这些字段的值设置为 0，树将只显示根注释，不会出现子注释。

请解释一下jsTree中字段“left”和“right”的用途：）谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T08:44:32.530

它被称为[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)，它用于通过一个数据库查询轻松检索整个树

# r - 彩色箱线图

> ID：10614842
> 
> 赞同：2
> 
> 时间：2012-05-16T08:37:39.400
> 
> 标签：r, boxplot

我有一个 12 列的矩阵，我正在使用`boxplot`函数 in`R`来绘制箱线图。

使用以下命令：

```
pdf("data.pdf") 
data<-read.table("data1", header=T) 
boxplot(data, outline=F)
dev.off() 
```

我想要的是用红色、绿色和蓝色呈现前三个箱线图。而接下来的三个是黄色的，接下来的三个是橙色的，接下来的三个是紫色的。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:52:16.670

要获取颜色，您只需将颜色向量传递给 boxplot 函数：

```
##Create some dummy data
runif(10*12), ncol=12)
##Create a vector of 12 colours
cols = rep(c("yellow", "orange", "purple"), each=3)
cols = col=c("red", "green","blue",cols)

##Plot as normal
boxplot(dd, col=cols) 
```

* * *

顺便说一句，不要在 for 循环的每次迭代中加载数据。加载一次：

```
data <- read.table("data1", header=T) 
pdf("data.pdf") 
boxplot(data, outline=F)
dev.off() 
```

# c# - Web 表单和 URL 重写：隐藏 ID，显示名称？

> ID：10614847
> 
> 赞同：1
> 
> 时间：2012-05-16T08:37:54.763
> 
> 标签：c#, asp.net, url-rewriting, webforms, url-routing

我正在处理 URL 重写，并且遇到了一些问题。我希望我的网址是这样的：

```
www.domain.com/product/myproduct 
```

但我也希望能够在不访问数据库的情况下检索产品的 ID。我想过有一个像这样的网址：

```
www.domain.com/product/myproduct/1 
```

或者

```
www.domain.com/product/1-myproduct 
```

但是如果我能隐藏ID就更好了。

那么，我该怎么做最简单的方法呢？

目前我的 Global.asax 有以下路线：

```
routes.MapPageRoute("Produkt visning",
                        "legetoej/{Categoryname}/{SubCategoryname}/{ProductName}",
                        "~/SingleProduct.aspx"); 
```

当我在 SIngleProduct.aspx 上检索名称时，我会这样做：

```
object productRoute = Page.RouteData.Values["ProductName"];

        if (productRoute != null && !string.IsNullOrEmpty(productRoute.ToString()))
        {
// do stuff
} 
```

如果我很简单就可以得到 ID 而不是名字，那就太棒了。

非常感谢-stackoveflowers ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:49:42.907

要隐藏产品的 ID...获取 ID 并对其应用加密...类似 DES 或 Triple DES，然后将 Server.URLEncode 方法应用于 ID，然后您可以轻松隐藏 ID。

当您打开页面时，您可以简单地获取加密的 ID 并执行 Server.URLDecode 并解密 ID。

无论如何...为什么不将产品的 ID 作为获取参数传递？像... www.domain.com/product/myproduct?PID=#$$#12 ，其中 PID 是加密的和 URL 编码的，然后您可以轻松地处理它。

# java - com.sun.xml.internal.ws.client 不存在

> ID：10614852
> 
> 赞同：24
> 
> 时间：2012-05-16T08:38:26.713
> 
> 标签：java

我正在尝试捕获 ClientTransportException 并且我的程序在编译阶段失败，并出现以下异常

```
[ERROR]\workspace\rates\java\service\bundle1\src\main\java\com\connector\ws\TestClass1.java:[72,70] package com.sun.xml.internal.ws.client does not exist 
```

据我所知，这个包来自 rt.jar 并且存在于 jre

如果我添加 @SuppressWarnings("restriction") 它从 Eclipse Maven 插件编译，但不是从 IntelliJ Idea（通过 maven）或命令行编译。

当我删除 @SuppressWarnings Eclipse 时显示以下警告

```
Access restriction: The type ClientTransportException is not accessible due to restriction on required library C:\Program Files\Java\jre6\lib\rt.jar 
```

我发现了类似的[问题](https://stackoverflow.com/questions/1269319/package-com-sun-xml-internal-bind-v2-model-annotation-does-not-exist)，但它的答案对我来说还不够清楚，因为我可以在 rt.jar 中看到这个类，而我的 IntelliJ Idea 也可以看到它。

有人可以解释这种行为和可能的解决方案吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-19T17:28:40.313

根据这个[常见问题解答](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)，直接调用“sun”包是一种不好的做法。当我遇到同样的问题时，它通过捕获`javax.xml.ws.WebServiceException`来解决（如 artbrisol 所建议的）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-16T09:27:07.203

您可以使用以下方法消除此错误：

```
javac -XDignore.symbol.file=true 
```

这是传递给 javac 以使用 rt.jar 而不是 ct.sym 的参数（默认使用[ct.sym](http://openjdk.java.net/jeps/247)并且需要编译到目标旧版本）

`ct.sym`不包含 rt.jar 中的所有类。因为`sun.*`不应该使用使用类，所以它们的类存根可能不会出现在`ct.sym`编译失败中。

删除调用`sun.*`应该可以解决这个问题。（使用 sun 包是一种不好的做法）

## 参考 ：

[https://blogs.oracle.com/geertjan/ctsym-steals-the-asm-class](https://blogs.oracle.com/geertjan/ctsym-steals-the-asm-class)

> 事情的真相是在 JDK 中有一个叫做“ct.sym”的东西。当 javac 编译代码时，它不会链接到 rt.jar。相反，它使用带有类存根的特殊符号文件 lib/ct.sym。内部 JDK 类没有放在该符号文件中，因为它们是内部类。你根本不想使用它们。

[https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6778491](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6778491)

> 这不是编译器问题。根据 ct.sym 中提供的信息，javac 行为正确。这个问题属于那些决定什么应该可用（以及什么应该被隐藏）ct.sym 我还不能确定这个错误的正确类别。这是故意的。也许包名称“com.sun.xml.internal ....”可能被视为一个提示。用户不应编写依赖于内部 JDK 实现类的代码。这些类是 JDK 的内部实现细节，如有更改，恕不另行通知。

[http://openjdk.java.net/jeps/247](http://openjdk.java.net/jeps/247)

> 对于JDK N和--release M，M < N，需要平台的release M的文档化API的签名数据。此数据存储在 $JDK_ROOT/lib/ct.sym 文件中，该文件与 JDK 8 中的同名文件相似但不相同。ct.sym 文件是一个包含精简类的 ZIP 文件与目标平台版本中的类文件对应的文件。对于 JDK N 和 --release N，JDK 自己的映像用作要编译的类文件的源。然而，可观察模块列表仅限于文档化模块和 jdk.unsupported 模块。

* * *

***笔记***

在这种情况下，最好不要使用`ClientTransportException`该类并将其替换为`javax.xml.ws.WebServiceException`，如**artbristol**所建议的那样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-27T11:07:58.777

Jre 系统库限制了一些包对编译器的访问，而它们可以被 JDK 访问。在这种情况下，代码不会出现错误，但是在编译时会显示诸如找不到类或找不到包之类的错误。

在这种情况下，有两种做法。 **1）**将**jre系统库的****rt.jar**添加到你的构建路径中进行编译构建。2)在构建路径中添加**jaxws-rt.jar 。**

 ****第二个选项是一个不错的选择，因为它可以避免将重复的库添加到您的构建路径中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-10T14:12:56.043

即使在 2015 年，我也发现许多项目使用了这种导入`com.sun.*`包的不良做法。

如果您（像我一样）无法更改导入这些包的类，那么添加`rt.jar`到您的类路径应该可以解决问题。

请注意，所说`rt.jar`的通常位于`<jdk_home>/jre/lib`文件夹下。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-23T15:57:55.727

在 pom.xml 中导入此依赖项

```
 <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.1.4</version>
   </dependency> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-14T18:00:32.670

解决方法很简单：复制现成的代码或者先写代码再加载依赖，就会出现依赖冲突。`com.sun.xml.*`package 已经是 JDK8 的一部分，但是 Maven 在编译时看不到它。因此，请确保您使用 mvn:repo:/...rt.jar 中的包，而不是 jdk* / .../rt.jar。[![在此处输入图像描述](../Images/b24761aa7832469b6f3f37f9f303c1cc.png)](https://i.stack.imgur.com/9BS43.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-06T13:59:17.077

即使我在我的 Maven 项目中也面临同样的问题。我已经导入 `import com.sun.xml.internal.ws.client.ResponseContext;`了一个类文件，但这没有被使用。我刚刚在我的类文件中注释了这一行，错误停止了，我可以成功运行我的 maven 项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-25T03:19:03.737

对于 Maven 构建，添加以下插件将解决该问题。

基本上添加编译器参数以引用 tools.jar 的正确路径

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.1</version>
        <configuration>
            <source>1.8</source>
            <target>1.8</target>
            <compilerArguments>
                <bootclasspath>${java.home}/lib/rt.jar${path.separator}${java.home}/lib/jce.jar${path.separator}${java.home}/../lib/tools.jar</bootclasspath>
            </compilerArguments>
        </configuration>
    </plugin> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-12-06T14:27:55.700

你不应该使用`com.sun.*`包。我们可以通过使用我们自己的类来解决这个问题：

```
/**
 * Copy of com.sun.xml.internal.ws.client.BindingProviderProperties since we're
 * not allowed to use com.sun.* packages..     
 */
public final class BindingProviderProperties {
    public static final java.lang.String CONNECT_TIMEOUT = "com.sun.xml.internal.ws.connect.timeout";
    public static final java.lang.String REQUEST_TIMEOUT = "com.sun.xml.internal.ws.request.timeout";
} 
```****

# mysql - 条件值 > 10 的 Mysql 查询，连续 3 小时的日期期间

> ID：10614854
> 
> 赞同：1
> 
> 时间：2012-05-16T08:38:36.950
> 
> 标签：mysql, sql

考虑一个 id,date datetime,value double 的表，我每分钟在表中都有数据。

我正在尝试使用 mysql 来识别值 > 10 连续超过 3 小时的“事件”。

当时我正在使用查询：

```
select date from table where value > 10; 
```

然后我手动读取日期连续的位置。

“事件”示例：

```
Date             - value
2000/01/01 00:00 - 5
2000/01/01 01:00 - 5
2000/01/01 02:00 - 5
2000/01/01 03:00 - 11
2000/01/01 04:00 - 11
2000/01/01 05:00 - 11
2000/01/01 06:00 - 5
2000/01/01 07:00 - 5
2000/01/01 08:00 - 5
2000/01/01 09:00 - 11
2000/01/01 10:00 - 11
2000/01/01 11:00 - 5 
```

在这种情况下，在 03:00 和 05:00 之间有一个“事件”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:21:00.873

在 MySQL 中，您可以在检索数据时在 SELECT 语句中分配变量。此功能有助于解决许多“通常”使用窗口函数（MySQL 没有）的问题。它也可以帮助你。这是我最终得到的解决方案：

```
SET @startdate = CAST(NULL AS datetime);
SET @granularity = 60;   /* minutes */
SET @minduration = 180;  /* minutes */
SET @minvalue = 10;

SELECT
  t.Date,
  t.Value
FROM (
  SELECT
    StartDate,
    MAX(Date) AS EndDate
  FROM (
    SELECT
      Date,
      Value,
      CASE
        WHEN Value > @minvalue OR @startdate IS NOT NULL
        THEN IFNULL(@startdate, Date)
      END AS StartDate,
      @startdate := CASE
        WHEN Value > @minvalue
        THEN IFNULL(@startdate, Date)
      END AS s
    FROM (
      SELECT Date, Value FROM YourTable
      UNION ALL
      SELECT MAX(Date) + INTERVAL @granularity MINUTE, @minvalue FROM YourTable
    ) s
    ORDER BY Date
  ) s
  WHERE StartDate IS NOT NULL
  GROUP BY StartDate
) s
  INNER JOIN YourTable t ON t.Date >= s.StartDate AND t.Date < s.EndDate
WHERE s.EndDate >= s.StartDate + INTERVAL @minduration MINUTE
; 
```

这里使用的四个变量中的三个仅仅是脚本参数，只有一个，`@startdate`实际上在查询中被赋值和检查。

基本上，查询遍历行，标记那些值大于特定最小值 ( `@minvalue`) 的行，最终生成值匹配条件的时间范围列表。实际上，为了正确计算结束边界，紧跟在匹配行后面的非匹配行也包含在各个组中。正因为如此，一个额外的行被添加到原始数据集中，其中`Date`计算出最新的`Date`加上`@granularity`表中指定的时间戳，并且`Value`只是`@minvalue`.

获得后，范围列表将连接回原始表，以检索位于范围边界之间的详细信息行，并在此过程`@minduration`中过滤掉不够长的范围（由 指定）。

如果您[在 SQL Fiddle 上](http://sqlfiddle.com/#!2/250e6/5)运行此解决方案，您将看到以下输出：

```
DATE                            VALUE
------------------------------  -----
January, 01 2000 03:00:00-0800  11
January, 01 2000 04:00:00-0800  11
January, 01 2000 05:00:00-0800  11 
```

据我所知，这是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:50:53.603

```
select count(*) from table where DATE_SUB(CURDATE(),INTERVAL 3 HOUR) < `date`

select count(*) from table where DATE_SUB(CURDATE(),INTERVAL 3 HOUR) < `date` AND `value` > 10 
```

然后比较结果，如果不一样，则不是连续的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:51:35.323

胡乱猜测：

```
select * from 
    (select event, MAX(date) as date from table where value > 10 group by event) maxs
inner join 
    (select event, MIN(date) as date from table where value > 10 group by event) mins
on maxs.event = mins.event
where (time_to_sec(timediff(maxes.date, mins.date)) / 3600) > 3 
```

# node.js - Socket.IO - 无法在 Google Chrome 中加载 XMLHttpRequest

> ID：10614857
> 
> 赞同：2
> 
> 时间：2012-05-16T08:38:51.657
> 
> 标签：node.js, socket.io

我正在尝试从在 Chrome(19.0.1048.46) 中工作的 socket.io 主页获取第一个示例，但出现错误：

> “XMLHttpRequest 无法加载 http://localhost:8080/socket.io/1/?t=1337156198176。Access-Control-Allow-Origin 不允许 Origin null。”

服务器代码：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8080);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

客户端代码：

```
<script src="socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8080');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });    
  });
</script> 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:04:00.867

我相信你是直接在浏览器中打开*index.html*文件，是这样吗？

使用*file://*协议没有为 XMLHttpRequest 设置来源，因此如果服务器未设置启用 CORS的*Access-Control-Allow-Origin标头，浏览器将引发该安全异常*

改为导航到*http://localhost:8080/*，代码中指定的处理程序应正确呈现 index.html 页面

# google-chrome - 谷歌 Chrome 扩展的高清截图

> ID：10614865
> 
> 赞同：1
> 
> 时间：2012-05-16T08:39:12.277
> 
> 标签：google-chrome, google-chrome-extension, screenshot

Google 使用非常酷的类似 SVG 的屏幕截图作为扩展（[翻译](https://lh3.googleusercontent.com/Y9p-P2ZpQkA4xTnOLBOMnQ9jAVaG6QWMQ6-8a3AbHsA4TjjAEjiuNKbUk8qt9YWFntPHftHVig=s1280-h800-e365)、[gmail](https://lh4.googleusercontent.com/T_Lsi_42fIjDoLI8tIJwtYhM_-3MfTZwgZSLdCnn2ntuZnNdxl_hT5EcBMltJFkpVNhFI9PO=s1280-h800-e365)）。它们是如何制作的？这些是截图吗？如果没有，是否有这些在任何地方公开可用的`*.ai`/模板文件？`*.svg`你知道有这样截图的非谷歌扩展吗（所以我可以问作者）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:43:09.003

它们都是经过Photoshop处理的。

我正在查看`chrome.dll`文件中的资源，这里的一切都是光栅。例如，这是您`Ctrl+J`在 Chrome 中按下时的下载按钮。

![在此处输入图像描述](../Images/e498ae466a7b9ff808143a0254add5c6.png)

您最好的选择是尝试在 Illustrator 或 Photoshop 中复制 UI。它只是一个带有圆角的矩形中的两个六边形和一个星形以及一些渐变，并不是很复杂。

您也可以搜索[类似](http://hazelmade.com/projects.html)的内容。我知道这不是矢量，但你知道……在互联网上搜索足够长的时间，你甚至会发现你的父母赤身裸体。

# jquery - 网页上的 Jquery Webcam 需要帮助

> ID：10614867
> 
> 赞同：0
> 
> 时间：2012-05-16T08:39:20.960
> 
> 标签：jquery, webcam

我试图在我的网页上安装网络摄像头。

我的jQuery代码：

```
$("#camera").webcam({  
            width: 320,  
            height: 240,  
            mode: "callback",  
            swffile: "webcam/jscam.swf",  
    }); 
```

我的网络摄像头正文代码：

> `<div id="camera"></div>`

我正在使用这个插件：
[http ://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

但在我的页面上我什么也没看到。它是空的。
有人知道我缺少什么来使网络摄像头工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:14:48.590

```
It might be throwing error in console please check it i.e jQuery is undefined.
So include js file in your html page.

eg:-

<html>
  <head>
     <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script type="text/javascript" src="jquery.webcam.js"></script>
 </head>
  <body>
<div id="camera"></div>
<script type="text/javascript">
$(document).ready(function(){
    $("#camera").webcam({
    width: 320,
    height: 240,
    mode: "callback",
    swffile: "jscam_canvas_only.swf",
    onTick: function() {},
    onSave: function() {},
    onCapture: function() {},
    debug: function() {},
    onLoad: function() {}
});

});
</script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T18:20:37.963

[我从这里](http://www.xarg.org/project/jquery-webcam-plugin/)找到了这个插件，如果它对你没有帮助，你可以随时加入他们开发:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:43:54.510

一个猜测，但是由于您使用的是回调模式，您是否尝试像示例中那样添加回调配置？

```
 onTick: function() {},
    onSave: function() {},
    onCapture: function() {},
    debug: function() {},
    onLoad: function() {} 
```

也有什么错误吗？你检查过萤火虫吗？

* * *

1/ 确保您加载了 JS 库。

2/ 尝试将它们放入 document.ready ：

```
$(document).ready(function(){
    // Your code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T19:14:39.277

您应该尝试使用以下内容更新您的 web.xml 文件：

```
<servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.swf</url-pattern>
    </servlet-mapping> 
```

# c# - 索引和长度必须引用字符串中的位置。参数名称：长度

> ID：10614870
> 
> 赞同：9
> 
> 时间：2012-05-16T08:39:28.487
> 
> 标签：c#, asp.net, substring

我收到此错误：

```
Index and length must refer to a location within the string.
Parameter name: length 
```

使用此代码：

```
string a1 = ddlweek.Text.Substring(0, 8);                
string a3 = ddlweek.Text.Substring(10, 14); 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T08:56:14.230

如果您的字符串 (ddlweek) 的长度为 23 个字符或更少，您将收到此错误：

```
 string ddlweek = "12345678901234567890123";//This is NOK
    string a1 = ddlweek.Substring(0, 8);                
    string a3 = ddlweek.Substring(10, 14);
    Console.WriteLine("a1="+a1);
    Console.WriteLine("a3="+a3);
    Console.ReadLine(); 
```

该字符串应至少有 24 个字符长.. 您可以考虑添加一个`if`以确保一切正常..

```
 string ddlweek = "123456789012345678901234";//This is OK
    string a1 = ddlweek.Substring(0, 8);                
    string a3 = ddlweek.Substring(10, 14);
    Console.WriteLine("a1="+a1);
    Console.WriteLine("a3="+a3);
    Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T08:49:37.510

这意味着您的`ddlweek.Text`字符串包含的字符数少于您在`Substring(index, length)`.

例子：

```
if (ddlweek.Text.Length >= 8)
    string a1 = ddlweek.Text.Substring(0, 8); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-27T10:58:43.967

当您超过总字符的结束限制时会发生此错误。例如

```
 string name = "iLovePakistan"; // Here i want to print only Pakistan

        string name2 = name.Substring(5, 150); // this code will throw same error. just replace 150 with name.Length - 5

        string name3 = name.Substring(5, name.Length - 5); // i skip firt 5 charchers then name.Length-5 means print rest 8 characters.

        string name4 = name.Substring(5, 8); // This will do exactly as name3
        Console.WriteLine(name4); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T08:48:06.167

这只是意味着您要求一个不存在的*ddlweek子字符串（即，它的长度超过 24 个字符）。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-13T11:23:42.183

```
Substring(startIndex,length); 
```

**startIndex**：获取您要获取的第一个值。0 开始。

**长度**：您获得的值的大小（您将获得多少位数）。

```
string Code = "KN32KLSW";
string str = Code.Substring(0,2);
Console.WriteLine("Value : ",str); 
```

在控制台屏幕上：**KN**

```
string str = Code.Substring(3,4);
Console.WriteLine("Value : ",str); 
```

在控制台屏幕上：**2KLS**

# iphone - 旋转精灵以面对一个点（cocos2d）

> ID：10614876
> 
> 赞同：2
> 
> 时间：2012-05-16T08:40:08.643
> 
> 标签：iphone, ios, ipad, cocos2d-iphone

我似乎在计算精灵和触摸点之间的角度时遇到了问题。每当用户触摸屏幕时，我试图让我的精灵直接面对触摸点的方向。这是我的代码：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    CGPoint tapPosition;
    for (UITouch *touch in touches){
        CGPoint location = [touch locationInView:[touch view]];
        tapPosition = [self convertToNodeSpace:[[CCDirector sharedDirector] convertToGL:location]];
    }

    float angle = CC_RADIANS_TO_DEGREES(ccpAngle(fish.position, tapPosition));
    [fish runAction:[CCRotateTo actionWithDuration:0.5 angle:angle]];
} 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:53:23.000

将此添加到 Nikhil 答案的末尾，以避免当触摸位置位于精灵的右下角时获得负角度。

```
if (calculatedAngle < 0) 
{
     calculatedAngle+=360;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T09:50:24.287

试试这个，首先你不需要那个 for 循环，因为无论如何你都会得到最后一个触摸位置。您也可以使用 [touches anyObject] 如下。

其次，我不确定 ccpAngle 做了什么，但是当这样的宏不起作用时，有时自己做数学会更容易。

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   CGPoint tapPosition;
   UITouch *touch = [touches anyObject];

   CGPoint location = [touch locationInView:[touch view]];
   tapPosition = [self convertToNodeSpace:[[CCDirector sharedDirector] convertToGL:location]];

   float dY = fish.position.y - tapPosition.y;
   float dX = fish.position.x - tapPosition.x;
   float offset = dX<0 ? 90.0f : -90.0f;
   float angle = CC_RADIANS_TO_DEGREES(atan2f(dY, dX)) + offset;

   [fish runAction:[CCRotateTo actionWithDuration:0.5 angle:angle]];
} 
```

您可能也可以用 ccpDiff 中的一个点替换 dX 和 dY ，但这并不重要。另外，根据鱼头的位置，您可能需要调整角度偏移，但我将由您决定。

让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T08:34:33.980

CCPoint pos1 = [鱼的位置]；CCPoint pos2 = 触摸位置；

```
float theta = atan((pos1.y-pos2.y)/(pos1.x-pos2.x)) * 180 * 7 /22;

float calculatedAngle;

if(pos1.y - pos2.y > 0)
{
    if(pos1.x - pos2.x < 0)
    {
        calculatedAngle = (-90-theta);
    }
    else if(pos1.x - pos2.x > 0)
    {
       calculatedAngle = (90-theta);
    }       
}
else if(pos1.y - pos2.y < 0)
{
    if(pos1.x - pos2.x < 0)
    {
       calculatedAngle = (270-theta);
    }
    else if(pos1.x - pos2.x > 0)
    {
       calculatedAngle = (90-theta);
    }
} 
```

在你的跑步动作中使用这个计算的角度..希望这会有所帮助...... :)

# javascript - 在 HTML 中显示随机 swf 横幅

> ID：10614879
> 
> 赞同：1
> 
> 时间：2012-05-16T08:40:28.553
> 
> 标签：javascript, jquery, html, random, banner

我有两个 Flash 横幅 (.swf)，我想在页面刷新时随机显示它们。我可以使用图像文件（使用 javascript）来做到这一点，但使用闪存它不起作用

对于图像文件，我可以这样做。

```
<script type='text/javascript'>

var HeaderImage= new Array()

HeaderImage[0]="URL-OF-HEADER-IMAGE-1";
HeaderImage[1]="URL-OF-HEADER-IMAGE-2";
var random=Math.round(2*Math.random());

document.write(&quot;<style>&quot;);
document.write(&quot;#header-wrapper {&quot;);
document.write(&#39; background:url(&quot;&#39; + HeaderImage[random] + &#39;&quot;) no-repeat left TOP;&#39;);
document.write(&quot; }&quot;);
document.write(&quot;</style>&quot;);

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:12:52.120

您可以使用 SWFObject 嵌入 flash 文件，然后随机选择文件名：

```
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript">

    function getRandomFilename()
    {
        var names = ['myFile1.swf', 'myFile2.swf', 'myFile3.swf'];
        var r = Math.floor(Math.random() * names.length);
        return names[r];
    }

    var flashvars = {};
    var params = {};
    var attributes = {};
    swfobject.embedSWF(getRandomFilename(), "myFlashContent", "800", "60", "9.0.0", false, flashvars, params, attributes);
</script>
</head>
<body>
<div id="myFlashContent">

</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:47:35.310

如果你可以用图像文件来做，你可以用flash来做。然而，嵌入闪存与使用图像文件有点不同。

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="movie_name" align="middle">
    <param name="movie" value="movie_name.swf"/>
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="movie_name.swf" width="550" height="400">
        <param name="movie" value="movie_name.swf"/>
    <!--<![endif]-->
        <a href="http://www.adobe.com/go/getflash">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/>
        </a>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

那是 Flash 应用程序的嵌入代码。一种替代方法是您可以使用 javascript 更改其中的参数。但是，您可以轻松地使用 iframe。

```
<iframe id="mov" src="movie.swf"></iframe> 
```

然后，只需使用 javascript 将 src 值更改为 Flash 电影的路径。

# java - 从服务器读取输入时，我的程序挂在一条线上.. Java

> ID：10614882
> 
> 赞同：0
> 
> 时间：2012-05-16T08:40:42.887
> 
> 标签：java, networking, input, client

我有一个与此链接完全相同的客户端/服务器应用程序。当我确切地说我的意思是我复制并粘贴它并将ip和端口内容调整到我的计算机时。

[http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)

当我到达需要从服务器（在客户端）读取一行的部分时，我的程序只是挂起并且不会继续。这是行：

```
while ((fromServer = in.readLine()) != null) { 
```

即使它为空，它也不会继续它只是卡在这条线上......我该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:42:48.957

`in.readLine()`与大多数 Java 阅读器一样，工作程序会挂起应用程序（等待），直到它获得一些要读取的数据。

我的猜测是您的客户根本没有收到任何数据，这就是您遇到问题的原因。确保您的客户端连接正确，服务器设置正确，并且服务器实际上正在向您的客户端发送数据（并且它实际上正在到达您的客户端）。

# javascript - 为 jQuery 滑块设置默认值并在需要时覆盖

> ID：10614886
> 
> 赞同：1
> 
> 时间：2012-05-16T08:40:46.160
> 
> 标签：javascript, jquery

**背景：**我目前在我的 .js 文件中的网站上有一个可用的**jQuery**滑块

```
$( "#slider-range-min" ).slider({
      range: "min",
      value: 100,
      min: 1,
      max: 100,
    }); 
```

有时我需要能够将“值”从 100 覆盖到其他值。所以我尝试了这个：

```
$( "#slider-range-min" ).slider({
      range: "min",
      value: _Slider_Value,
      min: 1,
      max: 100,
    }); 
```

并在我的 html 页面上定义了这个

```
<script type="text/javascript">  
    var _Slider_Value = 50;
</script> 
```

这也有效！**除了**在所有其他页面上，我收到一个 JavaScript 错误，指出“_Slider_Value 未定义”。如果可以避免的话，我宁愿不必将值复制并粘贴到我的所有页面上……这似乎不是一种“好”的方法吗？

**问题：**有没有更好的方法来做到这一点 - 所以我可以为我的滑块设置一个默认值，但偶尔会在需要时覆盖它？

**编辑：**另一种说法：除非我在我的 html 页面中另有说明，否则如何使我的滑块默认为“100”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:16:15.380

在每个页面中包含的 js 文件中定义它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:47:12.183

将 a`span`在您的 html 中，您在`div`容器中有滑块的位置是 ( `id="slider-range-min"`)

```
<span class="min">100</span> 
```

在滑块函数中读取此值

```
$( "#slider-range-min" ).slider({
      range: "min",
      value: $(this).find('.min').text();,
      min: 1,
      max: 100,
    }); 
```

如果您需要在页面上更新值，则动态更改跨度值，否则它将采用默认值，例如。100 在这里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-11T10:23:58.670

如果您试图最小化变量，您可以随时检查

```
if (_Slider_Value != undefined) {
    //your code here
} 
```

或者

```
(_Slider_Value != undefined) ? _Slider_Value : 100; 
```

所以你的最终代码可以是

```
$( "#slider-range-min" ).slider({
  range: "min",
  value: (_Slider_Value != undefined) ? _Slider_Value : 100,
  min: 1,
  max: 100,
}); 
```

如果 _Slider_Value 中没有值，则默认为 100

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T08:58:23.380

全局声明您的变量以在网页的任何位置访问它。这是[教程链接](http://www.w3schools.com/js/js_variables.asp)。

尝试声明没有 var 关键字的变量以使其成为全局变量

```
<script type="text/javascript">  
    _Slider_Value = 50;
</script> 
```

如果这不起作用，请尝试将变量绑定到窗口对象

```
var myValue;
function setValue()
{
    myValue = "test";
}

function getValue()
{
    alert(window.myValue); // yup, it's "test"
} 
```

这是完整的[解释](http://snook.ca/archives/javascript/global_variable)，我从中给出了例子。

希望它有效（实际上没有尝试过）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T08:47:59.410

您可以使用此字符串覆盖滑块的选项。$('#slider-range-min').slider({value: 50});

# android - android：在 2.3.3 上充气 Toast 没有获得 clickEvents

> ID：10614888
> 
> 赞同：0
> 
> 时间：2012-05-16T08:40:50.123
> 
> 标签：android, android-layout

以下代码适用于 ICS 而不是 2.3.3。

我使用带有 CheckBox 的自定义 Toast 并在 ICS 上触发 clickEvents。

我是否必须创建一个自定义对话框并将其称为活动，或者我可以解决它？

```
public void showToastwithImage(String text, int imageID, boolean forceShow) {

    if (prefs.getBoolean("prefs_showHelp", true)) {
        // create the view
        View view = inflateView(R.layout.message_panel);

        // set the image in the view
        ImageView im = (ImageView) view.findViewById(R.id.panel_icon);
        im.setImageResource(imageID);

        // set the text in the view
        TextView tv = (TextView) view.findViewById(R.id.message);
        tv.setText(text);

        CheckBox cb = (CheckBox) view.findViewById(R.id.checkBox1);

        if(forceShow){
            cb.setVisibility(View.GONE);
        }else{
            cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    SharedPreferences.Editor editor = prefs.edit();
                    editor.putBoolean("prefs_showHelp", false);
                    editor.commit();
                }
            });
        }

        // show the toast
        Toast toast = new Toast(this);
        toast.setView(view);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.show();
    }

}
private View inflateView(int resource) {
    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    return vi.inflate(resource, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:46:53.733

`custom dialog is better than toast...`

您可以在自定义对话框中轻松设置视图......并且 toast 用于 Flash 消息而无需交互。

```
Dialog dialog = new Dialog(YourActivityName.this);
dialog.setContentView(R.layout.dialoglayout);

ImageView im = (ImageView) dialog.findViewById(R.id.panel_icon);
TextView tv = (TextView) dialog.findViewById(R.id.message);
CheckBox cb = (CheckBox) dialog.findViewById(R.id.checkBox1);

dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:47:21.570

Toast 应该用于在不提供任何用户交互的情况下显示短消息，因为它们在 2 或 3.5 秒的持续时间内可见。因此，我建议您使用 Dialog 或 Activity（带有对话框主题）让用户与您的 CheckBox 进行交互。

# android - Android - Intent.setType() 参数

> ID：10614891
> 
> 赞同：2
> 
> 时间：2012-05-16T08:40:54.433
> 
> 标签：android, file, android-intent, sms

有谁知道这个方法的所有可用参数？像“图像/...”或“文件/...”？我在官方文档中没有找到该列表的线索。

特别是，我需要发送联系人 (.vcf) 文件的意图。但是输入“file/vcf”并没有显示我通过 sms 选项发送。

```
sendIntent.setData(Uri.parse("sms:")) 
```

也没有帮助

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:45:17.147

Intent.setType()[将 MIME 类型作为参数](http://developer.android.com/reference/android/content/Intent.html#setType%28java.lang.String%29)。

MIME 类型是[文本/电子名片](https://www.rfc-editor.org/rfc/rfc6350#section-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:31:41.277

怎么样`Intent.setAction`？例如发送短信：

```
intent.setAction(Intent.ACTION_VIEW);
intent.setData(Uri.parse("sms:" + phonenumberhere)); 
```

`Action View`在这种情况下是一种通用处理程序，但是当与 phonenumber 和 sms 结合使用时，它会发送文本。

# asp.net - mvc3中的泰米尔语和英语支持网站？

> ID：10614892
> 
> 赞同：0
> 
> 时间：2012-05-16T08:40:55.260
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0

我正在尝试创建一个同时支持泰米尔语和英语的网站。如果我点击泰米尔语链接网站必须自动更改为泰米尔语并与英语相同，我将有两个泰米尔语和英语链接按钮。在 mvc3 中，我尝试创建资源文件并在视图中应用。但没有成功。请**仅** **给出泰米尔语和英语的可行示例**。另外请告诉我在客户端和服务器端显示泰米尔语字体的依赖关系。

# wcf-data-services - WCFDataService 返回布尔值

> ID：10614895
> 
> 赞同：0
> 
> 时间：2012-05-16T08:41:06.510
> 
> 标签：wcf-data-services, odata

我正在尝试使用 WCFDataServices 执行任务。

我有一个服务操作喜欢

[WebInvoke(Method="POST")]

公共布尔添加（字符串 x1，字符串 x2，字符串 x3）

{

// 向数据库添加一条新记录。如果添加成功返回 true 或 false

}

在我的 MVC 客户端应用程序中。在存储库中，我有添加喜欢的功能

公共布尔添加（字符串 y1，字符串 y2，字符串 y3）

{

// 这里我想执行 URI 并捕获返回的值。并将其传递给我的控制器以在视图中显示一些操作。

}

我的服务没有任何问题。它按预期返回布尔值。

我不知道如何在我的存储库方法中捕获返回的布尔值。

// OperationResponse x = dsContext.Execute(requestUri, Microsoft.Data.OData.HttpMethod.Post);

我试图做类似上述的事情。但没有奏效。

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:44:49.493

我假设您在客户端上使用 WCF Data Services 5.0（因为您使用的是带有方法的 Execute）。请升级到 RTM 位 (http://blogs.msdn.com/b/astoriateam/archive/2012/04/09/wcf-data-services-5-0-rtm-release.aspx)，它们也可用在 NuGet 上（搜索 Microsoft.Data.Services.Client）。之后，这段代码应该可以正常工作：

```
public bool Add(string x1, string x2, string x3)
{
     return this.ctx.Execute<bool>(
         new Uri("Add", UriKind.Relative),
         "POST",
         /*singleResult*/ true,
         new UriOperationParameter("x1", x1),
         new UriOperationParameter("x2", x2),
         new UriOperationParameter("x3", x3))
         .Single();
} 
```

# windows-phone-7 - Blend 移除动画

> ID：10614900
> 
> 赞同：0
> 
> 时间：2012-05-16T08:41:29.457
> 
> 标签：windows-phone-7, animation, background, textbox, expression-blend

我在 Expression Blend 中创建了 Windows Phone 页面。我在页面中添加了一个 TextBox 元素，然后用默认模板的副本替换了我的 TextBox 的控件模板。Blend 为我生成了一切：样式、控制模板和视觉状态。

然后在 Focused 状态下，我尝试从模板更改 EnabledBorder 的背景画笔，我从编辑器顶部的 Blend 中收到这样的消息：

> 您的最后一个操作导致一些动画被自动删除，因为它们不再有效。

我知道如何用 xaml 编写这个动画，但我想用 Expression Blend 来做。

那么，这是 Expression Blend 的错误还是我遗漏了什么？并且是否有任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T06:43:53.760

我想你遇到了和我一样的问题。查看我自己对我的问题的回答：

[https://stackoverflow.com/a/16621494/494094](https://stackoverflow.com/a/16621494/494094)

# wcf - ServiceThrottling 默认值？

> ID：10614903
> 
> 赞同：8
> 
> 时间：2012-05-16T08:41:37.460
> 
> 标签：wcf, default-value, throttling

**你好，**

根据此[链接，](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and) **WCF 4.0**的默认值是这样的：

*   **MaxConcurrentSessions：** 16 * 处理器计数
*   **MaxConcurrentSessions：** MaxConcurrentCalls + MaxConcurrentSessions 100 * 处理器计数
*   **MaxConcurrentSessions：** 100 * 处理器计数

我知道，不是很清楚。在查看 MSDN（**WCF 4.0**）的文档时，它说：

*   **最大并发呼叫数：** 16
*   **最大并发实例数：** 26
*   **最大并发会话数：** 10

但是，如果我查看**WCF 4.5**，则某些值是基于 CPU 的，就像第一个示例一样

*   **maxConcurrentCalls ：**处理器计数的 16 倍
*   **maxConcurrentInstances ：**默认是 MaxConcurrentSessions 的默认值和 MaxConcurrentCalls 的默认值之和
*   **maxConcurrentSessions ：**默认为处理器计数的 100 倍

所以女巫一是正确的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T10:24:24.600

在 WCF 4.0 之前，默认值是

*   并发通话：16
*   同期会议：10
*   并发实例：并发调用 + 并发会话 (26)

从 WCF 4.0 开始，它们是

*   并发调用：16 * 处理器计数
*   并发会话数：100 * 处理器数
*   并发实例：并发调用+并发会话

# jquery - 如何在一个页面上有多个 jQuery TableSorter 表

> ID：10614904
> 
> 赞同：5
> 
> 时间：2012-05-16T08:41:41.387
> 
> 标签：jquery, tablesorter

当我在页面上只有 1 个表格时，该插件工作正常。

但是有两个，我得到一个错误：

> 未捕获的类型错误：无法设置未定义的属性“计数”

这是因为`sortList`下面设置的选项。我将它设置为在第 4 列进行排序，并且`aux_table`首先显示的只有 3 列。但它有效而`main_table`无效。我如何让它们都工作，或者只是第二个，更重要`main_table`？

两个表都是类`tablesorter`，它们有不同的 id (`main_table`和`aux_table`)。

页面上的第一个表格有效，第二个无效。这是我`<head>`标签中的 JS：

```
$(document).ready(function() { 
    // call the tablesorter plugin 
    $("table").tablesorter({ 
        // sort on the 4th column (index 3) column, DESC (1). ASC is (0). 
        sortList: [[3,1]] 
    });    
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T08:43:19.093

您需要更改代码以在每个单独的表上实例化表排序器，以便您可以为每个表指定单独的设置。

```
$("#table1").tablesorter({ 
   sortList: [[3,1]] 
}); 

$("#table2").tablesorter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T12:53:12.877

是的，您可以在一页中添加多个表格。您可以将每个表添加到 wrap 中，如下所示，并且可以单独添加分页和排序功能。

```
 $(document).ready(function() {
   $('.pearl-container').each(function(i) {
     $(this).children(".myTable")
       .tablesorter({
         widthFixed: true,
         widgets: ['zebra']
       })
       .tablesorterPager({
         container: $(this).children(".pager"),
         size: 5
       });
   });

 });
```

请参考这里。

[http://www.pearlbells.co.uk/table-pagination/](http://www.pearlbells.co.uk/table-pagination/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T12:11:41.267

选课怎么样？

```
$(".tablesorter").tablesorter(); 
```

如果需要对多个表进行排序..

# android - 如何在 android 2.2 中发送电子邮件？

> ID：10614908
> 
> 赞同：1
> 
> 时间：2012-05-16T08:42:14.900
> 
> 标签：android, android-intent

我想用 android 2.2 发送电子邮件。首先我做了一个带有 ACTION_SEND 的意图选择器来选择使用哪个：

```
Intent intent = new Intent(Intent.ACTION_SEND);

intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_SUBJECT, Resources.getString("EmailInvitationSubject", getBaseContext()));
String body = Resources.getString("EmailInvitationBody", getBaseContext()) + Local.User.FirstName;
intent.putExtra(Intent.EXTRA_TEXT, body);

startActivity(Intent.createChooser(intent, "Invite friends")); 
```

但在这种情况下，选择器会显示“蓝牙、消息、Google+、Gmail”。我只想显示 Gmail 或其他电子邮件应用程序。

我在 sdk 文档中看到有一个新的 CATEGORY_APP_EMAIL 可供使用，但它仅在 API 级别 15 中可用。我必须保持 API 级别 8。有没有办法做到这一点？

顺便说一句，我也想做消息传递，这样最后我可以有 2 个按钮：一个用于电子邮件，一个用于消息传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:58:10.997

此代码将仅显示电子邮件客户端，

```
 Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL, new String[]{"youremail@yahoo.com"});          
    email.putExtra(Intent.EXTRA_SUBJECT, "subject");
    email.putExtra(Intent.EXTRA_TEXT, "message");
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:51:57.327

您可能想要查看以下内容（以获得您最终看到的内容，即“....顺便说一句，我也想为消息传递这样做，以便最后我可以有 2 个按钮：”） ： [http ://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

或者您也可以结帐： [Android 电子邮件选择器](https://stackoverflow.com/questions/3979226/android-email-chooser)

亲切的问候，
博

# java - 按日期查询mysql数据库

> ID：10614910
> 
> 赞同：0
> 
> 时间：2012-05-16T08:42:30.747
> 
> 标签：java, hibernate

我正在尝试使用日期字段查询数据库。但它返回空集。我数据库中的日期字段就像`2012-05-16 00:00:00`.

```
String alDate = getStringParam(dataMap, "dt_" + i + j);
Date startdate = new SimpleDateFormat("yyyy-MM-dd hh:MM:ss").parse(alDate); 
```

其中 alDate 的值是来自 JSP 页面的日期字符串。但是当我用“startdate”查询时，要么抛出错误，要么返回空集。有什么建议么？

我如何知道特定日期的数据是否存在？我已经通过休眠条件中的日期对象来查找。它有效，但有时会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:45:26.103

[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)错误：

*   大写“M”代表月份，小写“m”代表分钟。
*   小时的大写“H”

例如 ：

```
startdate=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss") 
```

# javascript - Extjs 窗口在 IE 中不能很好地显示元素

> ID：10614915
> 
> 赞同：0
> 
> 时间：2012-05-16T08:42:44.133
> 
> 标签：javascript, internet-explorer, extjs

我有这个代码

```
 var main_container = Ext.create('Ext.container.Container',
 {
     xtype: 'container',
     id: "id_container",
     anchor: '100%',
     layout:'column',
     items:[
        column_1,
        column_2,
        column_3
     ]
}) 
```

当我调整容器的大小时，在某些情况下最右边的列会消失。在某些情况下，当我再次调整大小时，最右边的列会再次出现。这只发生在 IE 中。

这可能是什么原因造成的？任何想法都会有所帮助。

这是最右边一列的结构

```
 var column_3 = Ext.create('Ext.container.Container',
  {
    columnWidth: .33,
    layout: 'anchor',
    id: 'column_3',
    items:[
        grid_1,
        grid_2
    ]
  }) 
```

有 3 列，我希望它们的宽度为 33%

按下 ext js 菜单按钮会打开主容器。并且主容器放置在 ext js 窗口中。

这是我的问题

```
 <div class="x-container x-column x-container-default" id="column_roles" role="presentation" style="width: 400px;">
       <DIV style="WIDTH: 413px; HEIGHT: 45%" id=grid_1 class="x-panel  x-grid x-property-grid x-panel-default x-with-col-lines x-panel-with-col-lines x-panel-default-with-col-lines x-masked-relative x-masked" role=presentation aria-labelledby=component-1234>...</div>

        <DIV style="WIDTH: 413px; HEIGHT: 45%" id=grid_2 class="x-panel  x-grid x-property-grid x-panel-default x-with-col-lines x-panel-with-col-lines x-panel-default-with-col-lines x-masked-relative x-masked" role=presentation aria-labelledby=component-1237> ... </div>
 </div> 
```

您可以清楚地看到内部 div 比包含它们的 div 更宽。为什么 IE 生成不好？这在 Chrome 和 FF 中不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:53:44.177

如果这种情况只发生在 IE 中，您是否考虑过放弃 IE 作为浏览器？笑话不谈，如果它可以在除 IE 之外的任何浏览器中运行，则可能是一个错误，或者您必须为 IE 做一些特殊的事情。

例如，这对我有用：

```
Ext.onReady (function () {
    Ext.create ('Ext.window.Window', {
        renderTo: Ext.getBody () ,
        title: 'Win' ,
        width: 500 ,
        height: 100 ,
        layout: 'anchor' ,
        resizable: true ,
        items: [{
            xtype: 'container' ,
            anchor: '100%' ,
            layout: 'column' ,
            defaults: {
                layout: 'anchor'
            } ,
            items: [{
                xtype: 'container' ,
                columnWidth: .33 ,
                defaults: {
                    xtype: 'textfield' ,
                    anchor: '100%'
                } ,
                items: [{
                    fieldLabel: 'name'
                } , {
                    fieldLabel: 'surname'
                }]
            } , {
                xtype: 'container' ,
                columnWidth: .33 ,
                defaults: {
                    xtype: 'textfield' ,
                    anchor: '100%'
                } ,
                items: [{
                    fieldLabel: 'age'
                } , {
                    fieldLabel: 'place'
                }]
            } , {
                xtype: 'container' ,
                columnWidth: .33 ,
                defaults: {
                    xtype: 'textfield' ,
                    anchor: '100%'
                } ,
                items: [{
                    fieldLabel: 'nickname'
                } , {
                    fieldLabel: 'whatever'
                }]
            }]
        }]
    }).show();
}); 
```

当您调整窗口大小时，每列也会调整大小，并且没有一个会消失。

再见

威尔克

# java - 不完整的结果集数据

> ID：10614918
> 
> 赞同：0
> 
> 时间：2012-05-16T08:42:49.513
> 
> 标签：java, mysql, jdbc, prepared-statement, resultset

```
 Comment comment;
     ArrayList<Comment> commentList = null;

     try{
         ConnectionFactory myFactory = ConnectionFactory.getFactory();
         Connection conn = myFactory.getConnection();
         int i = 1; int j = 1; int k = 1;

         PreparedStatement pstmt = conn.prepareStatement("SELECT * FROM COMMENT WHERE deletestatus = 0 and workid = ?");

         PreparedStatement pstmtLName = conn.prepareStatement("SELECT * FROM LEADER WHERE leaderid = ?");

         PreparedStatement pstmtMName = conn.prepareStatement("SELECT * FROM MEMBER WHERE memberid = ?");

         pstmt.setInt(i++, Integer.parseInt(projid));

         ResultSet rs = pstmt.executeQuery();
         System.out.print(rs);
         commentList = new ArrayList<Comment>();
         while(rs.next())
            {
                comment = new Comment();
                comment.setDetails(rs.getString("details"));
                comment.setDateadded(rs.getTimestamp("dateadded"));
                comment.setUrgency(rs.getInt("urgency"));

                if(rs.getInt("leaderid") != 0){
                    comment.setLeaderid(rs.getInt("leaderid"));

                    pstmtLName.setInt(j++, rs.getInt("leaderid"));

                    ResultSet rs2 = pstmtLName.executeQuery();

                    if(rs2.next()){
                    comment.setFullname(rs2.getString("firstname") +" " + rs2.getString("lastname"));
                    }
                }
                if(rs.getInt("memberid") != 0) {
                    comment.setMemberid(rs.getInt("memberid"));

                    System.out.print("in the loop");

                    pstmtMName.setInt(j++, rs.getInt("memberid"));
                    ResultSet rs3 = pstmtMName.executeQuery();

                    if(rs2.next()){
                    comment.setFullname(rs3.getString("firstname") +" " + rs3.getString("lastname"));
                    }

                }   

                comment.setProjid(Integer.parseInt(projid));
                commentList.add(comment);
            }

         return commentList;
     } 
```

上面代码的问题是它只返回结果集的第一个结果。

当我删除`IF`子句中的两个`WHILE(RS.NEXT)`子句时，它返回了所有需要的结果，但信息不完整，因为我还需要 if 语句中的查询。

如果你们知道确切的问题，请帮忙，如果你们需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:33:16.853

在这里，问题似乎在

```
pstmtLName.setInt(j++, rs.getInt("leaderid"));
pstmtMName.setInt(j++, rs.getInt("memberid")); 
```

对于每个真实条件，j 的值都会增加，直到循环迭代。因此，它增加了你`parameterIndex`准备好的陈述。

它应该是

```
pstmtLName.setInt(1, rs.getInt("leaderid"));
pstmtMName.setInt(1, rs.getInt("memberid")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T10:03:43.767

您已定义`int k`但未使用它。我假设你想用它来设置`memberid`参数。
改变

```
pstmtMName.setInt( j++, rs.getInt( "memberid" ) ); 
```

至

```
pstmtMName.setInt( k++, rs.getInt( "memberid" ) ); 
```

它应该可以工作。

我想知道当查询中只看到一个参数标记时，为什么要使用`i++`,`j++`并设置语句的参数值。您应该直接使用. 否则，如果获取的记录多于 where and ，它们将导致标记索引增加，例如，这在您的查询案例中是无效参数并抛出 and 。 `k++``?``pstObject.setInt( 1, ...``rs``leaderid != 0``memberid != 0``pstObject.setInt( 2, ...``SQLException`

由于您`pstObject`在 while 循环中重复使用相同的内容，我建议您使用[`pstObject.clearParameters()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html#clearParameters%28%29)它来清除当前参数值。尽管这是可选的，但在某些情况下，立即释放当前参数值使用的资源很有用。

# jquery - 带有页面和 ID 的 Load()

> ID：10614920
> 
> 赞同：1
> 
> 时间：2012-05-16T08:42:53.857
> 
> 标签：jquery, variables, jquery-load

我正在尝试使用 jQuery 的 load() 从页面加载 ID。这是加载页面的 HTML：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head>

<body>
        <section id="content" class="contentPage">
        <h3>Home</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean id eros orci. Nam id interdum enim. Ut mauris enim, scelerisque a pellentesque in, molestie eget sem. Ut sagittis erat eget elit euismod laoreet. Vivamus odio mauris, aliquam sed ornare non, tempus nec augue. Proin id lectus elit. Donec pharetra viverra lectus, pellentesque sollicitudin magna gravida pellentesque. Quisque tristique, libero at pulvinar rutrum, neque nunc tincidunt lorem, sit amet varius lorem leo sit amet mi. Quisque vehicula diam in libero aliquet dapibus. Nullam eget arcu a sapien scelerisque fermentum. Integer suscipit magna sed quam aliquet mattis. Suspendisse in erat eu nisi hendrerit bibendum. Aliquam blandit malesuada metus. Duis dapibus consequat ultrices.
        </p>
        </section>
        <!-- end Page1 -->
</body>
</html> 
```

从此我只想加载#content 部分（出于兼容性原因，我无法摆脱除该部分之外的所有内容）。我正在使用变量来调用此函数，但这似乎不起作用：

```
var firstLink = $("ul > li:first-child > a");   
$("#sectionContainer").load("./" + firstLink.attr("href") + " #content"); 
```

其中变量`firstLink.attr("href")`返回一个链接，例如`Pages1.html`. 当最后一部分 ( `+ " #content"`) 被省略时，脚本可以正常工作。

我认为这会起作用，因为[jQuery 的文档](http://api.jquery.com/load/)指出您可以执行以下操作：

```
$('#result').load('ajax/test.html #container'); 
```

知道我做错了什么吗？或者你不能将这种文本添加到 jQuery 中的变量中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:10:01.423

如果您正在使用

```
var firstLink = $("ul > li:first-child > a");   
$("#sectionContainer").load("./" + firstLink.attr("href") + " #content"); 
```

然后在第一个链接引用的页面中应该有一个带有 ID 的元素（例如一个 div 或一个部分）`content`

在您的情况下，您的页面（第一个链接）包含`Pages1`您可以使用`#Pages1`的id`#content`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:56:46.327

此功能有效，只需尝试一下，您的页面中应该有一个“主页”文本：

```
 $(document).ready(function() {
    $("#content").load(". h3"); // reload in the same page
  }); 
```

最常见的问题是 .load() 的第一个参数中的 url。在您的网络控制台中查找 404。然后，尝试：

```
$("#sectionContainer").load("./Pages1.html #content"); 
```

您的页面中有 <base> 吗？绝对网址？

# c++ - 如何使用内联汇编器保存寄存器值

> ID：10614923
> 
> 赞同：1
> 
> 时间：2012-05-16T08:43:01.870
> 
> 标签：c++, c, assembly, x86

（嗯，这是我第一次在这里提问，英语不是我的第一语言，所以请原谅我的一些错误。我是程序的新手。）

我在做操作系统作业时遇到了这个问题，我们被要求模拟函数[SwitchToFiber](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686350%28v=vs.85%29.aspx)，而我目前的问题是我不知道如何保存寄存器值以便在下次调用时恢复该函数。

我不知道我的问题是否清楚。虽然我不认为我的代码有用，但我会将它们放在下面。

```
#include <stdio.h>

#define INVALID_THD NULL
#define N 5
#define REG_NUM 32
unsigned store[N][REG_NUM];
typedef struct
{
    void (*address) (void * arg);
    void* argu;
}thread_s;

thread_s ts[N];

void StartThds();
void YieldThd();
void *CreateThd(void (*ThdFunc)(void*), void * arg);
void thd1(void * arg);
void thd2(void * arg);
void StartThds()
{

}

void YieldThd()
{
    thd2((void*)2);

}

void *CreateThd(void (*ThdFunc)(void*), void * arg)
{
    ts[(int)arg].address = (*ThdFunc);
    ts[(int)arg].argu = arg;
}

void thd2(void * arg)
{
    for (int i = 4; i < 12; i++)
    {
        printf("\tthd2: arg=%d , i = %d\n", (int)arg, i);
        //in order to see clearly，i added /t abouve
        YieldThd();
    }
}

void thd1(void * arg)
{
/* 
    __asm__(

    );
*/ 
    for (int i = 0; i < 12; i++)
    {
        printf("thd1: arg=%d , i = %d\n", (int)arg, i);
        YieldThd();
    }
}

int main()
{
    //this is my first plan, to store the register value in some static arry 
    for(int i = 0; i<N; i++)
        for(int j = 0; j<REG_NUM; j++)
            store[i][j] = 0;
    //create the two thread 
    if (CreateThd(thd1, (void *)1) == INVALID_THD)
    {
        printf("cannot create\n");
    }
    if (CreateThd(thd2, (void *)2) == INVALID_THD)
    {
        printf("cannot create\n");
    }

    ts[1].address(ts[1].argu);      //thd1((void*)1),argu = 1； 
//  StartThds();
    return 0;
} 
```

这是我现在拥有的全部代码，因为我不知道哪个部分可能有用，所以我把它们都放在上面。如您所见，它们中的大多数仍然是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T09:06:02.300

有可能（正如评论中指出的那样）您不需要为此编写程序集，也许您可​​以只使用 using`[setjmp()/longjmp()](http://linux.die.net/man/3/setjmp)`并让它们进行必要的状态保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:25:35.157

我以前做过，但我总是要查看细节。以下当然只是伪代码。

基本上你所做的是用你的寄存器创建一个结构：

```
typedef struct regs {
   int ebx; //make sure these have the right size for the processors.
   int ecx;
   //...  for all registers you wish to backup
} registers;

//when changing from one thread
asm( //assembly varies from compiler to compiler check your manual
  "mov ebx, thread1.register.ebx;
   mov ecx, thread1.register.ecx;"
  // and so on

  //very important store the current program counter to the return address of this fu nction so we can continue from ther
  // you must know where the return address is stored
  "mov return address, thread1.register.ret"
);

//restore the other threads registers
asm(
  "mov thread2.register.ebx, ebx;
   mov thread2.register.ecx, ecx;
   //now restoer the pc and let it run
   mov thread2.register.ret, pc; //this will continue from where we stopped before
); 
```

这或多或少是它的工作原理。既然你正在学习这个，你应该能够自己弄清楚其余的。

# c# - 如何删除 MVC2 的验证消息？

> ID：10614927
> 
> 赞同：3
> 
> 时间：2012-05-16T08:43:08.443
> 
> 标签：c#, asp.net, asp.net-mvc-2, client-side-validation

我正在使用 ASP.NET C# MVC2，并且在具有以下数据注释验证属性的模型中有以下字段：

```
[DisplayName("My Custom Field")]
[Range(long.MinValue, long.MaxValue, ErrorMessage = "The stated My Custom Field value is invalid!")]
public long? MyCustomField{ get; set; } 
```

在表单中，该字段应允许用户将其留空并在用户尝试输入无法以数字表示的值时显示验证消息。从验证的角度来看，这是按预期工作并显示以下错误消息：

> 声明的“我的自定义字段”值无效！
> 
> 我的自定义字段字段必须是数字。

第一个验证消息是我编写的自定义验证消息，第二个验证消息是 MVC2 自动生成的。我需要摆脱第二个，因为它是多余的。我该怎么做呢？在我看来，我有以下标记

```
<% Html.EnableClientValidation(); %>
<% using (Html.BeginForm())
   { %>
   <%:Html.ValidationSummary(false)%>
   <% Html.ValidateFor(m => m.MyCustomField); %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:03:54.737

您在这里遇到的这个问题是因为被绑定的属性是一个数字，并且模型绑定会自动处理字符串无法转换为数字的事实。这不是在`RangeAttribute`做的。

相反，您可能会考虑将新属性作为 a`string`并派生您自己`RangeAttribute`的在字符串级别工作的属性，首先解析数字。

然后你有你现有的属性包装该字符串：

```
 [DisplayName("My Custom Field")]
 [MyCustomRangeAttribute(/* blah */)] //<-- the new range attribute you write
 public string MyCustomFieldString
 {
   get; set;
 }

 public int? MyCustomField
 {
   get 
   { 
     if(string.IsNullOrWhiteSpace(MyCustomField))
       return null;
     int result;
     if(int.TryParse(MyCustomField, out result))
       return result;
     return null;
   }    
   set
   {
      MyCustomFieldString = value != null ? value.Value.ToString() : null;
   }
 } 
```

您的代码可以非常愉快地继续在`int?`属性上工作，但是 - 所有模型绑定都是在字符串属性上完成的。

理想情况下，您还将添加`[Bind(Exclude"MyCustomField")]`到模型类型 - 以确保 MVC 不会尝试绑定该`int?`字段。或者你可以做到`internal`。如果在 web 项目中，只需要在 web 项目中引用即可。

您还可以考虑真正hacky的方法 - 并在您的控制器方法中找到该错误`ModelState.Errors`并在返回视图结果之前将其删除......

# blackberry - CustomTextField（确实收到 StackOverFlow 错误）

> ID：10614931
> 
> 赞同：0
> 
> 时间：2012-05-16T08:43:14.630
> 
> 标签：blackberry, customization, textfield

嗨，我输入了一个代码，但它似乎不起作用，你能告诉我错误是什么吗？

```
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FocusChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.component.EditField;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class CustomTextField extends VerticalFieldManager implements FocusChangeListener{
    private int textWidth=0;
    private Font font=Font.getDefault();
    private int textHeight=0;
    public EditField basicEditField;

    public CustomTextField(int width,int height) {
        textWidth=width;
        textHeight=height;
        VerticalFieldManager vfm=new VerticalFieldManager(Manager.FOCUSABLE);   
        basicEditField=new EditField(null,null,200, Field.EDITABLE|Field.FOCUSABLE|BasicEditField.NO_NEWLINE);

        basicEditField.setFocusListener(this);
        vfm.add(basicEditField);
        add(vfm);
    }

    protected void sublayout(int maxWidth, int maxHeight) {

        if(textWidth==0)
        {
            textWidth=maxWidth;
        }
        if(textHeight==0)
        {
            textHeight=maxHeight;
        }
        super.layout(textWidth, textHeight);
        setExtent(textWidth, textHeight);
    }

    protected void paint(Graphics graphics) {

        graphics.setColor(Color.BLACK);
        graphics.drawRect(basicEditField.getLeft(),basicEditField.getTop(), textWidth, textHeight);

    }

    public void setHeight(int height) {
        textHeight= height;
    }

    public void setWidth(int width) {
        textWidth= width;
    }

    public Font getFont() {
        return font;
    }

    public void setFont(Font font) {
        this.font = font;
    }

    public void focusChanged(Field field, int eventType) {
        if(eventType==FOCUS_GAINED)
        {
            if(field==basicEditField)
            {
                basicEditField.setCursorPosition(basicEditField.getText().length());
            }
        }

    }

} 
```

键入的内容在屏幕上不可见 我刚刚创建了一个在其中扩展 VerticalFieldManager 的 CustomTextField 我添加了一个 EditField ，它被添加到 VerticalFieldManager

但它不起作用我的意思是它不显示我在屏幕上输入的内容是什么错误你能检查一下吗

我确实使用调用 CustomTextField

```
CustomTextField ctf=new CustomTextField(100,200): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:12:11.337

查看

```
protected void paint(Graphics graphics) 
```

添加

```
super.paint(g); 
```

最后在里面。

# jquery - 初始化后改变rhinoslider方向

> ID：10614935
> 
> 赞同：0
> 
> 时间：2012-05-16T08:43:22.913
> 
> 标签：jquery, setting

我试图在每个动画之后改变 jQuery Rhinoslider 的方向。我认为这只是更改`slideNextDirection`设置的问题，但我不太了解 jQuery 插件结构以及如何获得该设置。这是我尝试过的，但显然它不起作用：

```
$slider = $('#slider').rhinoslider({
    slideNextDirection: 'toTop',
    callBackNext: function() {
        $(this).slideNextDirection = 'toLeft';
        //tried this too :)
        //$slider.slideNextDirection = 'toLeft';
        return false;
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:38:14.943

无法即时更改设置。但是您可以取消初始化 Rhinoslider 并在之后使用您的更改调用它。见：[http ://rhinoslider.com/api/external-calls-of-internal-functions/](http://rhinoslider.com/api/external-calls-of-internal-functions/)

在几周后的 1.1 版本中，您还可以设置幻灯片开始。

# facebook - Facebook“喜欢”按钮，打开图元标签 - 应用程序 ID 或管理员 ID？

> ID：10614943
> 
> 赞同：0
> 
> 时间：2012-05-16T08:43:53.850
> 
> 标签：facebook, facebook-opengraph, facebook-social-plugins

将 Open Graph 标记添加到网站每个页面上的“喜欢”按钮时，通过应用程序 ID（fb:app_id 元标记）而不是 fb:admins 元标记将页面连接到 Facebook 有什么好处？

编辑：两者之间的 Facebook Insights 有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:41:47.327

该`fb:app_id`标签允许该应用程序管理页面（发布帖子、删除帖子/评论等）。该`fb:admins`标签允许指定的用户通过他们安装到其个人资料中的任何页面管理应用程序来管理这些页面。他们还可以访问 Facebook 上只有他们可以访问的 Facebook 页面，用于管理页面（发布帖子、管理评论等），但我不确定它是否存在。

# c# - 按名称对键进行分组

> ID：10614952
> 
> 赞同：1
> 
> 时间：2012-05-16T08:44:35.760
> 
> 标签：c#, grouping, key, couchbase

我使用 couchbase 服务来存储临时信息。这是我的问题：我有很多键值对，但是它们通常分为组（key1_ *; key2_ *; key3_ *）。例如，这对看起来像：

"key1_1":"value1"; "key1_2":"value2"; "key1_3":"value3";
“key2_1”：“value4”；"key2_2":"value5"; "key2_3":"value6";
"key3_1":"value7"; "key3_2":"value8"; "key3_3":"value9";

我需要发送一个请求，该请求将用于返回有关任何这些组的值可用性的信息：例如：

var info = client.Get ("key1_ *") 或类似的东西。键名中是否有任何过滤器，或者是否有任何分组选项可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:47:40.707

在 couchbase 2.0 中，您可以使用视图。您可以将 json 对象存储在数据库中，因此 key-val 对应如下所示：

```
key:<guid>; value: {id:<guid>, group<int>, data<your_values_type>} 
```

其中 group 等效于 key1_*；然后用 Map 创建一个视图：

```
function (doc) {
  emit(doc.group, [doc.id, doc.group, doc.data]);
} 
```

您已经获得了这种格式的键值对：

```
key: <int>group ; value: <array>[id,group,data] 
```

然后您可以通过在请求中添加“？key =”来按键过滤结果。或者，如果您使用一些 api 库，即 .net api，您可以从您的代码中执行此操作：

```
Client.GetView<Int64>(Couchbase.Configuration.DevelopmentModeNameTransformer.NamePrefix + "MyViewName", "MyViewName").Key(<desired_key>) 
```

# sql - SQL 显示几个月的结果 - 如何仅显示当前年份？

> ID：10614955
> 
> 赞同：1
> 
> 时间：2012-05-16T08:44:44.910
> 
> 标签：sql, db2

我的 SQL 表达式运行良好，可以显示几个月的结果，今年可以。但一年后我知道它将包括今年的结果。如何仅显示当年的结果？

```
select case month(timestamp_iso(STATUSDATE))
        when 1 then 'January'
        when 2 then 'February'
        when 3 then 'March'
        when 4 then 'April'
        when 5 then 'May'
        when 6 then 'Jun'
        when 7 then 'July'
        when 8 then 'August'
        when 9 then 'September' 
        when 10 then 'October'
        when 11 then 'November'
        when 12 then 'December'
    end as Month, 

    count (case when service='ADSL' then 1 end) as  ADSL,
    count (*) as ALL

from INCIDENT
group by month(timestamp_iso(STATUSDATE)) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T08:51:17.620

在末尾添加一个`where`子句：

```
where year(STATUSDATE) = year(current_timestamp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:53:22.313

只需添加一个`where`子句！

您可以使用它`monthname`来获取您在案例中所做的事情：

```
select MONTHNAME(timestamp_iso(STATUSDATE)) as Month, 
    count (case when service='ADSL' then 1 end) as  ADSL,
    count (*) as ALL

from INCIDENT
where year(STATUSDATE) = year(current_timestamp)
group by month(timestamp_iso(STATUSDATE)) 
```

* * *

有关更多信息，请查看[THIS](http://www.ibm.com/developerworks/data/library/techarticle/0211yip/0211yip3.html)或[THIS](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0000872.htm)。

# java - 调整 Java 套接字的性能

> ID：10614962
> 
> 赞同：18
> 
> 时间：2012-05-16T08:45:08.233
> 
> 标签：java, performance, sockets, networking

我创建了一个远程桌面控制应用程序。显然，它由客户端和服务器部分组成：

**服务器：**

*   从客户端接收鼠标/键盘动作；
*   将桌面截图发送给客户端。

**客户：**

*   从服务器接收截图；
*   发送鼠标/键盘动作；

考虑发送屏幕截图。当我将家用 PC 用作服务器时，我最终会得到 1920x1080 的屏幕截图尺寸。通过使用[JAI Image I/O Tools](http://download.java.net/media/jai-imageio/builds/release/1.1/)并将其编码为 PNG，我能够为如此大的图像实现以下统计信息：

1.  写入时间~0.2 s；（不是进入套接字，而是进入一些“常规”输出流，**即编码时间**）
2.  读取时间~0.05 s；（不是来自套接字，而是来自一些“常规”输入流，**即解码时间**）
3.  大小 ~250 KB；
4.  完美的品质。

因此，根据#1 - 理想的可能 FPS 应该是 ~5。

不幸的是，我什至无法达到 5 FPS，甚至 2 FPS。我搜索了瓶颈，发现向/从**套接字 I/O 流**写入/读取最多需要约 2 秒（**请参阅附录 1 和 2 进行澄清**）。这当然是不可接受的。

我对该主题进行了一些研究 - 并在两侧添加了套接字 I/O 流的缓冲（使用`BufferedInputStream`and ）。`BufferedOutputStream`我从 64 KB 大小开始。这确实提高了性能。但仍然不能有至少 2 FPS！此外，我已经尝试过`Socket#setReceiveBufferSize`and`Socket#setSendBufferSize`并且速度有一些变化，但我不知道它们的行为如何，因此我不知道要使用哪些值。

看初始化代码：

**服务器：**

```
 ServerSocket serverSocket = new ServerSocket();
    serverSocket.setReceiveBufferSize( ? ); // #1
    serverSocket.bind(new InetSocketAddress(...));

    Socket clientSocket = serverSocket.accept();
    clientSocket.setSendBufferSize( ? ); // #2
    clientSocket.setReceiveBufferSize( ? ); // #3

    OutputStream outputStream = new BufferedOutputStream(
            clientSocket.getOutputStream(), ? ); // #4
    InputStream inputStream = new BufferedInputStream(
            clientSocket.getInputStream(), ? ); // #5 
```

**客户：**

```
 Socket socket = new Socket(...);
    socket.setSendBufferSize( ? ); // #6
    socket.setReceiveBufferSize( ? ); // #7

    OutputStream outputStream = new BufferedOutputStream(
            socket.getOutputStream(), ? ); // #8
    InputStream inputStream = new BufferedInputStream(
            socket.getInputStream(), ? ); // #9 
```

**问题：**

1.  对于所有这些情况，您会推荐哪些值（以提高性能），为什么？
2.  请澄清`Socket#setReceiveBufferSize`和 `Socket#setSendBufferSize`行为。
3.  您可以建议哪些其他方法/技术来提高此类应用程序的性能？
4.  Skype 提供高质量的实时桌面传输——他们是如何做到的？

**附录一：**添加客户端套接字读取的展开伪代码（@mcfinnigan）：

```
while(true) {
    // objectInputStream is wrapping socket's buffered input stream.
    Object object = objectInputStream.readObject(); // <--- Bottleneck (without setting proper buffer sizes is ~2 s)

    if(object == null)
        continue;

    if(object.getClass() == ImageCapsule.class) {
        ImageCapsule imageCapsule = (ImageCapsule)object;

        screen = imageCapsule.read(); // <--- Decode PNG (~0.05 s)

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                repaint();
            }
        });
    }
} 
```

**附录2：**添加服务器套接字写入的展开伪代码（@EJP）：

```
while(true) {
    // objectOutputStream is wrapping socket's buffered output stream.
    BufferedImage screen = ... // obtaining screenshot
    ImageCapsule imageCapsule = new ImageCapsule();

    imageCapsule.write(screen, formatName()); // <--- Encode PNG (~0.2 s)

    try {
        objectOutputStream.writeObject(imageCapsule); // <--- Bottleneck (without setting proper buffer sizes is ~2 s)
    }
    finally {
        objectOutputStream.flush();
        objectOutputStream.reset(); // Reset to free written objects.
    }
} 
```

**结论：**

感谢您的回答，特别是 EJP - 他让我更清楚了。如果您像我一样寻求有关如何调整套接字性能的答案，您绝对应该检查[Java 中的 TCP/IP 套接字，第二版：程序员实用指南](https://rads.stackoverflow.com/amzn/click/com/0123742552)，尤其是第 6 章“幕后”，它描述了幕后发生的事情`*Socket`类，如何管理和使用发送和接收缓冲区（这是性能的主要关键）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T09:26:32.950

> *   写入时间~0.2 s；
> *   读取时间~0.05 s；

如果不考虑中间网络的延迟和带宽，这些目标完全没有意义。

> 大小 ~250 KB；

题外话。图片大小由您决定，与实际编程无关，这是本站的宗旨。

> 完美的品质。

“完美的质量”只要求您不丢弃任何位，无论如何您都不会通过 TCP 获得这些位。

```
 serverSocket.setReceiveBufferSize( ? ); // #1 
```

这将为所有接受的套接字设置接收缓冲区大小。将其设置为尽可能大，如果可能的话，超过 64k。

```
socket.setSendBufferSize( ? ); // #6 
```

将其设置为尽可能大，如果可能的话，超过 64k。

```
 socket.setReceiveBufferSize( ? ); // #7 
```

由于这是一个接受的套接字，因此您已经在上面完成了此操作。消除。

```
 OutputStream outputStream = new BufferedOutputStream(
            socket.getOutputStream(), ? ); // #8
    InputStream inputStream = new BufferedInputStream(
            socket.getInputStream(), ? ); // #9 
```

这些的默认值为 8k；只要您有足够的套接字缓冲区大小就足够了。

> 对于所有这些情况，您会推荐哪些值（以提高性能），为什么？

往上看。

> 请澄清`Socket#setReceiveBufferSize()`和`Socket#setSendBufferSize()`行为。

它们控制 TCP“窗口”的大小。这是一个相当深奥的话题，但其想法是使大小至少等于网络的带宽延迟乘积，即以字节为单位的带宽乘以以秒为单位的延迟> = 以字节为单位的缓冲区大小。

> 您可以建议哪些其他方法/技术来提高此类应用程序的性能？

不要在发送数据时忙于睡觉和做其他任务。在您可以安排的最紧凑的循环中尽可能快地发送它。

> Skype 提供高质量的实时桌面传输——他们是如何做到的？

题外话，可能不可知，除非 Skype 员工碰巧想在这里泄露公司机密。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T09:53:19.307

*   如果客户端为每个图像打开新的 TCP 连接，则[TCP 慢启动](http://en.wikipedia.org/wiki/Slow-start)可能会导致缓慢。--> 对所有帧使用相同的 TCP 连接。

*   TCP 有自己的缓冲区，这些缓冲区是 TCP 使用的最佳方式 -->`BufferedOutputStream`有时会带来好处，有时则不会。

*   通常只有一小部分屏幕在屏幕截图之间发生变化。--> 只传输改变的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T09:24:26.220

我认为最大的带宽浪费将在于桌面的完全转移。您应该将其视为电影，并对帧进行差分编码。

缺点是处理比较复杂。也许那里有一些简单的视频编解码器 API/实现？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T12:09:21.760

问题很清楚。我上面的人建议使用多个 nio 通道，我宁愿使用多个阻塞套接字（nio 并不快）。但是，这并没有改善网络通信，这是并行编程，在您的情况下绝对是一个很好的解决方案。让我建议以下

[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setTcpNoDelay(boolean)](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setTcpNoDelay(boolean))

将其设置为 true，您将能够以增加带宽消耗为代价来加快套接字通信速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T09:16:56.977

您可以查看 Java NIO ( [http://www.cs.brown.edu/courses/cs161/papers/j-nio-ltr.pdf](http://www.cs.brown.edu/courses/cs161/papers/j-nio-ltr.pdf) )，使用多个频道等。

# cookies - 设置 Tomcat 7 sessionid 和值以通过硬件负载平衡识别会话亲缘关系

> ID：10614963
> 
> 赞同：0
> 
> 时间：2012-05-16T08:45:09.700
> 
> 标签：cookies, session-cookies, tomcat7, setcookie, jsessionid

尽管从我的角度来看，使用 IIS 很容易完成，但我对 Tomcat 完全是个菜鸟，并且不知道如何为 cookie 内容设置静态值。是的，我已经阅读了安全隐患，最终将通过 SSL 访问，所以我不担心。另外，我已经阅读了关于不更改值的 Servlet 3.0 规范，我接受了这一点。

在 IIS 中，我将简单地设置一个名为 Set-Cookie 的 HTTP Header，其 WebServerSID 的任意设置和值为 1001。

然后在包含这组真实服务器的负载平衡器 VIP 中，将值 WebServerSID 设置为 VIP 级别，并为第一个 Web 服务器设置 cookie 值 1001，以此类推，其余机器 1002 用于服务器 2，1003 用于服务器 3。

这通过 cookie 实现会话亲和性，直到客户端关闭浏览器。

Tomcat 7.0.22 如何做到这一点？

我看到在 Tomcat 6.x 和 7.x 之间发生了大量关于 cookie 及其设置方式的配置更改。经过上周的广泛研究，我尝试了以下方法。

在 web.xml 中：（这将在 Tomcat 7.x 下禁用 URL 重写） `<tracking-mode>COOKIE</tracking-mode>`在默认会话元素下

在 context.xml 中：（cookies 默认为 true，但我很明确，因为我无法让它工作）

```
cookies=true
sessionCookiePath=/
sessionCookieName=WebServerSID
sessionCookieName=1001 
```

我在 context.xml 中有 2 个用于 sessionCookieName 的条目，因为来自 Tomcat 6.x 的等效命令看起来已经合并为 1 个。请参阅[http://tomcat.apache.org/migration-7.html#Tomcat_7.0。 x_configuration_file_differences](http://tomcat.apache.org/migration-7.html#Tomcat_7.0.x_configuration_file_differences)

提炼：

org.apache.catalina.SESSION_COOKIE_NAME 系统属性：这已被删除。通过为全局 context.xml（在 CATALINA_BASE/conf/context.xml 中）配置 sessionCookieName 属性可以获得等效的效果。org.apache.catalina.SESSION_PARAMETER_NAME 系统属性：这已被删除。通过为全局 context.xml（在 CATALINA_BASE/conf/context.xml 中）配置 sessionCookieName 属性可以获得等效的效果。

如果这不正确，那么我根本不理解所需的语法，而且我找不到任何可以简单地用纯黑白拼写出来的地方。

在 Tomcat 6.x 下，我会在配置中使用 Java 选项，例如：

```
-Dorg.apache.catalina.SESSION_COOKIE_NAME=WebServerSID
-Dorg.apache.catalina.SESSION_PARAMETER_NAME=1001 
```

我正在使用的应用程序没有在其他地方设置任何这些值，所以它不是应用程序。

所有这些设置都在 Catalina 基地的 context/web/server.xml 文件中

在一天结束时，我需要在 Set-Cookies 下的响应标头中看到：（如使用 Fiddler 所见）是：

WebServerSID=1001

不是

JSESSIONID=as8sd9787ksjds9d8sdjks89s898

提前致谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:54:39.203

纯粹使用配置可以做的最好的事情是设置[引擎](http://tomcat.apache.org/tomcat-7.0-doc/config/engine.html)的 jvmRoute 属性，它将常量值添加到会话 ID 的末尾。大多数负载均衡器都可以处理。它看起来像：

`JSESSIONID=as8sd9787ksjds9d8sdjks89s898.route1`

如果这还不够好并且您需要`WebServerSID=1001`，则必须编写一个 ServletFilter 并将其配置为在每个响应上添加标头。

# ios - 如何在 iOS 中创建像真正的键盘一样的自定义键盘？

> ID：10614966
> 
> 赞同：1
> 
> 时间：2012-05-16T08:45:14.077
> 
> 标签：ios, keyboard

我必须像 iOS 中的真实键盘一样创建自定义键盘。我需要像键盘一样跟随。

![我想像这样创建我的董事会](../Images/3f83ae862eb4f2b461551b5f1ac41b84.png)

像那样。我怎么能这样创作？请告诉我，因为我只是新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:36:18.113

这是我创建的可能会有所帮助的东西。只需在 GitHub 上 fork 并将旁遮普语字符更改为缅甸。大部分的辛苦工作都是为你完成的：）

[https://github.com/kulpreetchilana/Custom-iOS-Keyboards](https://github.com/kulpreetchilana/Custom-iOS-Keyboards)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:05:45.500

带有自定义视图和自定义按钮。键盘本身很容易做，您只需在视图上放置一些按钮，然后显示该视图。您真正的问题是将按钮操作连接到文本字段。

您必须检查第一响应者，然后将与您的自定义键盘对应的值添加到其文本中。在文本字段中从键盘实际“输入”那些奇怪的字符将是一个更加困难的问题。我不熟悉它们，那些是真正的 ASCII 字符吗？

不管怎样，你要做很多工作。这不是很难编码的东西，需要一些复杂的算法，但实现会很棘手和复杂，所以要小心

# iphone - 推送通知在最近更新后停止工作

> ID：10614970
> 
> 赞同：1
> 
> 时间：2012-05-16T08:45:19.440
> 
> 标签：iphone, ios5, push-notification, apple-push-notifications

嗨，我在 App Store 上有一个应用程序，它曾经完美地接收推送通知，但在最近的更新之后，它似乎已经停止了。

我没有更改任何通知代码，所以如果 iOS 5.1 中有任何可能导致问题的更改，我就会徘徊。

有没有人有类似经历并且知道怎么解决？

在应用程序委托中，我正在注册通知：

```
[[UIApplication sharedApplication]
 registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)]; 
```

并实施以下方法：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
```

# python - 如何在 python 中从网页获取 POST 和 GET 参数

> ID：10614974
> 
> 赞同：0
> 
> 时间：2012-05-16T08:45:42.983
> 
> 标签：python, web-crawler, web-scraping, lxml

我想从网页获取所有 GET 和 POST 参数。假设有一些网页。我可以从此页面获取所有链接。但是，如果此页面采用输入参数（GET 和 POST），我该如何获取它们？我的算法是这样的：

```
find in web page this type of strings <form method="GET">...</form>;
then for each found result:
     get <input> fields and construct request
     then save it somewhere 
```

我的目的是编写爬虫，从网站获取所有链接、GET 和 POST 参数，然后将其保存在某处以供进一步分析。我的算法很简单，所以我想知道有没有其他方法（在 python 中）？你能推荐任何python库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:15:15.650

像这样的东西让你开始怎么样？它提取表单和输入属性：

```
from BeautifulSoup import BeautifulSoup

s = urllib2.urlopen('http://stackoverflow.com/questions/10614974/how-to-get-post-and-get-parameters-from-web-page-in-python').read()
soup = BeautifulSoup(s)

forms = soup.findall('form')
for form in forms:
  print 'form action: %s (%s)' % (form['action'], form['method'])
  inputs = form.findAll('input')
  for input in inputs:
    print "  -> %s" % (input.attrs) 
```

输出（本页）：

```
form action: /search (get)
  -> [(u'autocomplete', u'off'), (u'name', u'q'), (u'class', u'textbox'), (u'placeholder', u'search'), (u'tabindex', u'1'), (u'type', u'text'), (u'maxlength', u'140'), (u'size', u'28'), (u'value', u'')]
form action: /questions/10614974/answer/submit (post)
  -> [(u'id', u'fkey'), (u'name', u'fkey'), (u'type', u'hidden'), (u'value', u'923d3d8b45bbca57cbf0b126b2eb9342')]
  -> [(u'id', u'author'), (u'name', u'author'), (u'type', u'text')]
  -> [(u'id', u'display-name'), (u'name', u'display-name'), (u'type', u'text'), (u'size', u'30'), (u'maxlength', u'30'), (u'value', u''), (u'tabindex', u'105')]
  -> [(u'id', u'm-address'), (u'name', u'm-address'), (u'type', u'text'), (u'size', u'40'), (u'maxlength', u'100'), (u'value', u''), (u'tabindex', u'106')]
  -> [(u'id', u'home-page'), (u'name', u'home-page'), (u'type', u'text'), (u'size', u'40'), (u'maxlength', u'200'), (u'value', u''), (u'tabindex', u'107')]
  -> [(u'id', u'submit-button'), (u'type', u'submit'), (u'value', u'Post Your Answer'), (u'tabindex', u'110')] 
```

# c# - 类似网格的 WPF 控件

> ID：10614980
> 
> 赞同：0
> 
> 时间：2012-05-16T08:46:38.737
> 
> 标签：c#, wpf, xaml

我想实现一个“TabManager”控件，它可以像 XAML 中的网格一样实例化。这看起来是一个相当普遍的任务，但我似乎找不到教程，我仍然不想重新发明轮子，所以我想知道这里是否有人有一个例子。

我希望 XAML 生成的控件看起来像这样：

```
 <TabManager>
        <TabManager.TabDefinitions>
            <TabDefinition Caption="Tab 1"/>
            <TabDefinition Caption="Tab 2"/>
            <TabDefinition Caption="Tab 3"/>
        </TabManager.TabDefinitions>

        <TabPanel TabManager.Tab="0">
            <TextBlock Text="foo"/>
        </TabPanel>
        <TabPanel TabManager.Tab="1">
            <TextBlock Text="bar"/>
        </TabPanel>
        <TabPanel TabManager.Tab="2">
            <TextBlock Text="baz"/>
        </TabPanel>
    </TabManager> 
```

TabManager 将呈现一些按钮和一些元素以包含 TabPanel 的子项 - 例如将它们放入 DockPanel 或我选择做的任何其他事情；应该没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:19:32.633

你试过`<TabControl>`吗？

例如 -

```
<TabControl>
        <TabItem Header="Tab1" x:Name="Tab1">
            <Grid>
                <TextBlock Text="foo"/>
            </Grid>
        </TabItem>
        <TabItem Header="Tab2" x:Name="Tab2">
            <Grid>
                <TextBlock Text="bar"/>
            </Grid>
        </TabItem>
        <TabItem Header="Tab3" x:Name="Tab3">
            <Grid>
                <TextBlock Text="baz"/>
            </Grid>
         </TabItem>
    </TabControl> 
```

# c# - 如何在 C# 中捕获 403 错误

> ID：10614983
> 
> 赞同：0
> 
> 时间：2012-05-16T08:46:45.050
> 
> 标签：c#, asp.net

我的 C# 代码中有一个 TRY / Catch，我想捕获 403 错误，以便将用户发送到注册页面。

EXCEPTION 中是否有状态代码 (403) 的属性，或者我是否必须解析消息（{“HTTP 请求被客户端身份验证方案'Negotiate'禁止。”}）？

我有以下

尝试

访问网络服务

捕捉（异常错误）

所以我希望能够在 Exception 中找到 403 代码，还是应该在这里使用 Exception 以外的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:49:08.263

如果是 HttpException，你可以使用[HttpException.GetHttpCode 方法](http://msdn.microsoft.com/en-us/library/system.web.httpexception.gethttpcode.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:50:13.450

如果出现 403 错误代码，您可以使用自定义错误页面将使用重定向到登录页面。或者尝试在`Global.asax`.

# openlayers - 矢量图层的自定义样式

> ID：10614991
> 
> 赞同：3
> 
> 时间：2012-05-16T08:47:17.733
> 
> 标签：openlayers

我想更改地图图层中矢量特征的默认样式。阅读文档，我写了以下内容：

```
var myStyle = new OpenLayers.Style({fill: true,fillColor: "#ff0000"});
var vector_layer = new OpenLayers.Layer.Vector('CODLayer', {style: myStyle}); 
```

但是我把每一个特征都变成黑色......你知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T10:40:29.097

我通过以下方式解决了：

```
var myStyle = {fill: true,fillColor: "#ff0000"};
var vector_layer = new OpenLayers.Layer.Vector('CODLayer', {style: myStyle}); 
```

以[here](http://www.peterrobins.co.uk/it/ollatency.html)为例。

# c# - 如何将此 Perl 上传脚本翻译成 C#？

> ID：10614994
> 
> 赞同：3
> 
> 时间：2012-05-16T08:47:26.297
> 
> 标签：c#, perl, post, upload, rapidshare

我目前正在尝试将我的 Perl 上传脚本移植到 C#，但我不太熟悉该语言并且无法使其正常工作。我已经尝试了很长时间，但似乎没有任何效果。我很感激任何帮助。:)

Perl 版本：

```
#!/usr/bin/perl -w
use strict;
use warnings;
use LWP::Simple;
use LWP::UserAgent;
use HTTP::Request::Common;
my ($user, $pass, $type, $fileName);

# This chapter sets some vars and parses some vars.
$/         = undef;
$SIG{PIPE} = 'IGNORE';
$fileName  = $ARGV[0] || die "Syntax: $0 <filename to upload> <free|prem|col> [login] [password]\n";
$type      = $ARGV[1] || "";
$user      = $ARGV[2] || "";
$pass      = $ARGV[3] || "";

# RapidShare API Documentation @ http://images.rapidshare.com/apidoc.txt

my $nextuploadserver = get('http://rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver');
die 'nextuploadserver broken' if $nextuploadserver !~ /^\d+$/;
print 'nextuploadserver:' . $nextuploadserver . "\n";

my $userAgent = LWP::UserAgent->new();
my $request   = POST 'http://rs' . $nextuploadserver . '.rapidshare.com/cgi-bin/rsapi.cgi',
  Content_Type => 'form-data',
  Content      => [
    sub         => 'upload',
    login       => $user,
    password    => $pass,
    filename    => $fileName,
    filecontent => [$fileName],
  ];
my $response = $userAgent->request($request);
die 'fucked up' if $response->is_error();
print $response->content . "\n"; 
```

C#，这就是我尝试过的：

```
WebClient wc = new WebClient();
wc.Headers["Content-Type"] = "form-data";
System.Text.UTF8Encoding utf8 = new System.Text.UTF8Encoding();
string a = utf8.GetString(
wc.UploadData(
@"https://rs702l3.rapidshare.com/
cgi-bin/rsapi.cgi", "POST", System.Text.Encoding.UTF8.GetBytes(
"sub=upload&login=XXXX&password=XXXX&folder=0&filename=Test.jpg
&filecontent=" + utf8.GetString(File.ReadAllBytes(@"D:\Test.jpg")))));

Console.WriteLine("Test: " + a); 
```

PS：如果有人正在寻找有效的 Rapidshare 上传脚本，您可以免费使用我的，因为我在线程中发布了它。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:27:46.267

这是我们正在使用的一些 c# POST 代码：

```
string uri = "http://...";
string parameters = String.Format("param1={0}&param2={1}",
                                  HttpUtility.UrlEncode(param1),
                                  HttpUtility.UrlEncode(param2));

HttpWebRequest webRequest = (HttpWebRequest)HttpWebRequest.Create(uri);
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.Method = "POST";
webRequest.AllowAutoRedirect = true;
webRequest.MaximumAutomaticRedirections = 1;

byte[] bytes = Encoding.ASCII.GetBytes(parameters);
Stream os = null;
try {
    webRequest.ContentLength = bytes.Length;
    os = webRequest.GetRequestStream();
    os.Write(bytes, 0, bytes.Length);
} catch (Exception ex) {
    // Handle exception
} finally {
    if (os != null) {
        os.Close();
    }
} 
```

# php - 使用 php 检查发布的联系人以使用 mail() 函数发送到选定的联系人电子邮件

> ID：10614995
> 
> 赞同：0
> 
> 时间：2012-05-16T08:47:28.490
> 
> 标签：php, html, forms, email, post

嗨，大家好，

我正在尝试使用 php mail() 函数将表单发布给从选项下拉框中选择的人。

我的下拉框显示

```
<label for="contact">Job Contact:*</label>

<select id='contact' name='contact'>
<option value='' selected='selected'>Please select</option>
<option value='name1'>Name2</option>
<option value='name2'>Name1</option>
</select> 
```

我得到了价值。

```
$contact =  $_POST['contact']; 
```

与用户比较

```
switch ($contact) {

            case "name1":
            $to         = "name1@example.co.uk";
            break;
            case "name2":
            $to         = "name2@example.co.uk";
            break;

        } 
```

邮件($to, ..., ..., ...);

我看不出为什么开关不起作用？

如果我单独使用 $to 表单发送。

任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:59:58.620

这里有几个失败点；

您可以尝试扩展您的开关（仅用于调试目的）以执行以下操作：

```
switch ($contact) {

            case "name1":
            $to         = "name1@example.co.uk";
            break;
            case "name2":
            $to         = "name2@example.co.uk";
            break;
            default:
            var_dump($contact);
            exit();

        } 
```

这将强制您的开关处理`$contact`与任何开关都不匹配的内容。

其次，尝试确保它`$to`实际上包含一个值。

通过添加 'var_dump($to); 来做到这一点 就在`mail()`函数之前。

这是基本的调试——我怀疑其中之一会告诉你错误在哪里。

# regex - 从时间戳中删除冒号

> ID：10614996
> 
> 赞同：1
> 
> 时间：2012-05-16T08:47:28.880
> 
> 标签：regex, sed

我有一个日期时间戳，例如：

```
 07/May/2012:00:00:01 
```

我希望删除日期和时间之间的冒号并用空格替换它。

我尝试：

```
sed -e 's/....:../.... ../g' local.csv > local07_nocolon.csv 
```

但这给了我：

```
07/May/.... ..:00:01 
```

任何提示表示赞赏....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:51:47.650

你想只删除第一个冒号然后你可以试试这个

```
echo "07/May/2012:00:00:01" | sed 's/:/ /' 
```

如果您需要删除所有冒号，请使用此

```
echo "07/May/2012:00:00:01" | sed 's/:/ /g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:51:02.623

使用捕获组和反向引用（并确保仅匹配数字）：

```
sed -e 's/\([0-9][0-9][0-9][0-9]\):\([0-9][0-9]\)/\1 \2/g' local.csv > local07_nocolon.csv 
```

编辑：我忘记了[POSIX ERE 不支持`\d`简写](https://stackoverflow.com/a/8268190/20670)。现在它应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:47:52.133

这可能对您有用：

```
echo "07/May/2012:00:00:01" | sed 's/\([0-9]\{4\}\):/\1 /g' file
07/May/2012 00:00:01 
```

或者：

```
echo "07/May/2012:00:00:01" | sed 's/\([[:digit:]]\{4\}\):/\1 /g'
07/May/2012 00:00:01 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T09:10:57.107

下面的 sed 命令使用全局替换标志“g”将所有出现的 : 替换为“”。

```
sed 's/:/ /g' local.csv > local07_nocolon.csv 
```

文件的输出格式为

```
07/May/2012 00 00 01 
```

# c++ - Qt::QueuedConnection 来自 QML

> ID：10614997
> 
> 赞同：3
> 
> 时间：2012-05-16T08:47:30.843
> 
> 标签：c++, qt, qml

我有 C++ 类发射信号和 QML 插槽。程序返回事件循环后，我需要在同一个线程中执行槽。

我怎样才能实现这样的目标？

```
Connections {
    target: box2dCppEngine
    onBulletCollided: box2dCppEngine.deleteObject(bullet)
    connectionType: Qt.QueuedConnection
} 
```

我需要这个，因为我无法执行 deleteObject，在处理碰撞时，我需要在世界步骤之后执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:16:58.360

我不知道 QML 有多少，但我可以提供一种不同的方法：看看[QObject::deleteLater()](http://qt-project.org/doc/qt-4.8/qobject.html#deleteLater)

> 当控制返回事件循环时，该对象将被删除。

由于它是一个插槽，因此您可以将信号直接连接到`bullet.deleteLater()`，或`deleteLater`在`deleteObject`插槽内调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T11:37:15.330

不幸的是，Connections 组件中没有 connectionType 属性。但一个简单的解决方法是重新启动一次计时器，而不是直接在 Connections signalHandler 中调用该方法。

例如

```
Connections {
    target: box2dCppEngine
    onBulletCollided: timerHelper.restart()
}

Timer {
    id: timerHelper
    interval: 1
    onTriggered: box2dCppEngine.deleteObject(bullet)
} 
```

但正如 Tim Meyer 指出的那样，在您的情况下，使用 deleteLater() 可能更容易。

# php - PHP 使用 $_SESSION 来存储我的变量

> ID：10614999
> 
> 赞同：0
> 
> 时间：2012-05-16T08:47:33.760
> 
> 标签：php

是不是一个好习惯，使用php会话对象，存储我的几个变量，可以是请求结果的数组。

我需要这种方法，因为我想在 php 文件中执行请求，存储结果并立即（取决于结果）重定向到页面，
这可能不是最好的方法，这就是我问的原因

谢谢任何建议，

编辑：结构：

```
index.html
handler.php
view1.php 
```

在 index.html 中，我有一个

```
<form action="handler.php" ... 
```

在 handler.php 中，我构造一个请求并得到一个结果，

```
if ($result->success) 
    header("location ./view1.php");
else 
    echo 'failed'; 
```

在 view1.php 中，我想列出结果数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:53:43.227

网上商店这样做 - 那你为什么不呢？

一些较大的电子商务框架在会话中存储复杂的数据和对象，PHP 处理得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:09:53.750

这就是会议的目的！所以一般的答案是“是的：这是一个很好的做法”。

但是，这里有一些替代方案：

1.  考虑使用 ajax 调用来更新已加载页面的某些部分而不重新加载它；

2.  Cookies - 不适合大量数据，但通常比会话寿命更长。但是，在您的特定情况下没有用；

3.  SQL 服务器通常经过了很好的优化，当您的查询返回大量行并使用`LIMIT`子句将它们分割成多个部分时，或者只是在第一次之后不久重复完全相同的请求，后续请求的负载不会那么大用于数据库服务器。

我刚刚看到你对这个问题的更新。AJAX 可以为您做到最好。我可以想象这一切都在一个网页中完成：

1.  表单数据通过 AJAX 调用提交给您`handler.php`，其中..
2.  例如，返回 JSON 打包的结果数组或短字符串`NOT FOUND`。
3.  然后，页面上的 JS 要么创建一个新的 DOM 元素 - 一个表格或一组 div，并返回结果，或者只是创建一个带有悲伤卡通脸和“我们没有找到任何东西”消息的新 div .

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T08:58:37.327

```
// set session
session_start();
$_SESSION['my_session'] = array('var1' => 'value1', 'var2' => 'value2'); // your result list
session_write_close();

// get Session
echo ($_SESSION['my_sesson']['var1']); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T09:32:32.577

```
if ($result->success) 
    header("location ./view1.php");
else 
    echo 'failed'; 
```

这不是使用重定向来路由请求的好习惯。您可以在没有用户额外请求的情况下执行此操作。

像这样：

```
if ($result->success) {
    include(dirname(__FILE__) .'/'. 'view1.php');
} else { 
    echo 'failed';
} 
```

因此，handler.php 中的所有变量都将在 view1.php 中可用。