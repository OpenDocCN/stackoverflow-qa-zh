# StackOverflow 问答 11995000-11995999

# javascript - CSS 媒体查询和 Javascript/jQuery 不匹配

> ID：11995004
> 
> 赞同：2
> 
> 时间：2012-08-16T20:31:25.570
> 
> 标签：javascript, jquery, css, media-queries

在我的 CSS 中，我有一个媒体查询，如下所示：

```
@media (min-width: 800px) { /* styles */ } 
```

然后在我的 jQuery 中，我以窗口宽度为目标并执行一些操作。

**编辑：根据下面的答案，我已经改变了这个功能，但我的 JS 和 CSS 仍然没有对齐。通过使用已接受答案中指定的 Modernizr 函数解决了该问题。**

```
$(window).resize(function() {
    var viewportWidth = $(window).width();
    if (viewportWidth >= 800) {
        // do something
    }
}); 
```

问题是，当 jQuery 在 800 像素或更多像素上执行时，CSS 会在 740 像素处启动。

这些不对齐是否存在已知问题？或者我的页面上可能有什么东西影响了 CSS，为什么它是 740 像素而不是 800 像素？也许我应该使用其他东西来代替`$(window)`？

**编辑：我已经在 Safari 中进行了测试，它运行良好。在 Chrome 和 Firefox 中，jQuery 函数在 800px 上运行，CSS 也是如此。但是在 Chrome 中，*CSS*实际上在 740px 之后运行，即使媒体查询是 800px - 我怎样才能让这些完美对齐？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:39:55.200

您可以使用[Modernizr](http://modernizr.com/)在 JS中[执行媒体查询](http://modernizr.com/docs/#mq)`mq()`（该方法将返回一个布尔值）：

```
$(window).resize(function() {
    if (Modernizr.mq('(min-width: 800px)')) {
        // do something
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:39:42.493

移动您的宽度检查，否则`viewportWidth`变量将始终是相同的：

```
$(window).resize(function() {
    var viewportWidth = $(this).width();
    if (viewportWidth >= 800) {
        // do something
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T20:43:39.990

有效的代码是：

```
$(window).resize(function() {

    var viewportWidth = $(window).width();

    if (viewportWidth >= 800) {
        // do something
    }
}); 
```

每次窗口调整大小时，新值都将存储在`viewportWidth`变量中。在您的代码中获取页面加载时`viewportWidth`的唯一值。`$(window).width()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T20:35:07.780

我刚刚尝试过并且似乎可行的方法是使用 CSS 媒体查询来设置对象的样式，然后使用 javascript 测试对象是否具有该样式。Javascript 询问 CSS 答案是什么，而不是让页面的两个部分分别确定它：

CSS：

```
@media (min-width: 800px) {  
    #viewType {width:3px;}
} 
```

HTML：

```
<div id="viewType" style="display:none"></div> 
```

JavaScript：

```
var answer = ($("#viewType").width()==3) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T05:35:10.027

我同意史蒂夫的回答。jquery(window).width(); is 与媒体查询不匹配，甚至不提供准确的窗口宽度大小。这是我从史蒂夫那里得到并修改的答案。

```
CSS :
        @media (max-width: 767px) {

           //define your class value, anything make sure it won't affect your layout styling
           .open {
            min-width: 1px !important;
           }
        } 

        .open {
              min-width: 2px;
        } 
```

JS：

```
// when re-sizing the browser it will keep looking for the min-width size, if the media query is invoked the min-width size will be change.

$(window).on('resize orientation', function() {

    var media = $('.open').css('min-width');

    if( media == '1px') // means < 767px 
    {       
        // do your stuff
    }

}); 
```

就是这样~希望对你有帮助。

# java - Assignment problems: Credit card validation

> ID：11995006
> 
> 赞同：-1
> 
> 时间：2012-08-16T20:31:34.383
> 
> 标签：java, validation

Quoted from my assignment: The objectives of this question are (a) to practice selection structure (b) to apply iteration structure (c) to manipulate string

```
do {
    System.out.print("Enter MC for MasterCard or VISA for VISA card: ");
    cardType = scn.next();
} while (!cardType.equals("MC") && !cardType.equals("VISA"));
if (cardType.equals("MC")) {
    do {
        System.out.print("Enter MasterCard card no.: "); // Get input:
                                                            // mastercard
                                                            // number
        cardNo = scn.nextLong();
        cardLength = Long.toString(cardNo).length(); // Get length of
                                                        // mastercard
                                                        // number input
        dbUserPrefix = cardNo / java.lang.Math.pow(10, 14);
        intUserPrefix = (int) dbUserPrefix;
        for (int i = 0; i <= 5; i++) {// for validating prefix
            // 4 possibilities
            if (intUserPrefix == cardPrefix[i]) {
                if (cardLength == 16) { // Prefix & length correct                      break;
                } else { // Prefix correct, length wrong
                    state = 1;
                    break;
                }
            } else {
                if (cardLength == 16) { // Prefix wrong, length correct                     state = 2;
                } else { // Prefix & length incorrect
                    state = 3;
                }
            }
        }
        if (state == 0) {
            System.out.println("SUCESS");
        } else if (state == 1) {
            System.out.println("Your length of card number is incorrect.");
        } else if (state == 2) {
            System.out.println("Your card prefix is incorrect.");
        } else {
            System.out.println("Your card prefix and length of card number is incorrect.");
        }
        break;
    } while (cardLength != 16);
} 
```

The main thing I want here is the program to validate that the right Prefix of a credit card is 51,52,53,54 or 55\. and the right length to be 16 (number of digits). If validation fails, the error must be printed out. Problem is that other than prefix==51, the rest of the prefix i tried results in state==2.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:44:31.247

我会以不同的方式解决这个问题。你把你的输入（卡号）当作一个长的。我认为如果你把它当作一个字符串来做这种验证会更容易。

要验证长度，其中`cardNum`是 String 类型：

```
boolean isValidLength = (cardNum.length() == 16); 
```

获取前缀：

```
String prefix = cardNum.substring(0,2); // gets first two digits of cardNum 
```

为了验证，我将所有有效前缀放在一个列表中并调用`.contains()`：

```
List<String> validPrefixes = new ArrayList<String>();
validPrefixes.add("52");
// ... etc

boolean isValidPrefix = validPrefixes.contains(prefix); 
```

然后你的逻辑会是这样的：

1.  提示用户输入号码
2.  将输入作为字符串
3.  检查输入长度是否正确；如果不返回错误
4.  检查前缀是否正确；如果不返回错误
5.  返回成功

# objective-c - iPad UIPopoverController crashes with UIImagePicker, no ARC

> ID：11995012
> 
> 赞同：1
> 
> 时间：2012-08-16T20:32:06.880
> 
> 标签：objective-c, ipad, crash, uiimagepickercontroller, uipopovercontroller

I have a button that is supposed to create a popover with a UIImagePickerController, instead it crashes. I'm not using ARC, and I have looked through many other entries and no others helped. I'm not prematurely releasing anything. Does anyone have a fix?

```
-(void)pickImageAction {

    if ([popoverController isPopoverVisible]) {

        [popoverController dismissPopoverAnimated:YES];
        [popoverController release];

    } else {

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {

            picker = [[UIImagePickerController alloc] init];
            picker.delegate = self;
            picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

            popoverController = [[UIPopoverController alloc] initWithContentViewController:picker];
            popoverController.delegate = self;
                        //Crashes here
            [popoverController presentPopoverFromRect:CGRectMake(300, 300, 320, 480) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES];

        }

    }

}    

-(IBAction)buttonClicked {

[self pickImageAction];

} 
```

# java - 程序是如何用 Unicode 编写的？

> ID：11995021
> 
> 赞同：2
> 
> 时间：2012-08-16T20:32:41.617
> 
> 标签：java, unicode, character-encoding, javac

来自 Java 规范 SE 7 版

§3.1**统一码**

> *程序是使用 Unicode 字符集编写的。*

§3.2**词法翻译**

> *使用以下三个词法翻译步骤将原始 Unicode 字符流翻译成标记序列...*

我很困惑，因为我使用本机字符编码（Windows-1252）编写源代码，并且规范提到（？）都从原始 Unicode 字符流开始，然后执行词法转换（包括 Unicode 转义转换） .

他们提到 Unicode 转义可用于包含仅使用 ASCII 字符的任何 Unicode 字符；如果执行了先前的转换，我认为它们指的是 Unicode 字符集子集中的 ASCII 字符，这是有道理的。

是否有从用于将源文件写入 Unicode 的编码的先前转换？

一些相关信息，但我认为这更像是运行时的文本处理，而不是编译过程：

[转换非 Unicode 文本](http://docs.oracle.com/javase/tutorial/i18n/text/convertintro.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:59:48.863

基本上，规范所说的是您只能在源文件中使用 Unicode 字符。它没有定义这些字符如何实际编码为字节，这取决于您和您正在使用的平台。

基本上编译器内部发生的事情是从磁盘读取源文件作为字节流，然后将这些字节转换为 Java 的 Unicode 字符的内部表示。它将源文件的原始字节转换为 Unicode 字符的方式基于`-encoding`传递给`javac`. 如果未`-encoding`设置任何选项，它将使用您平台的默认编码。

现在还需要注意的是，在编译器将源代码字节转换为字符之后，它会执行另一个步骤来将字符文字（例如`\u00a5123`）转换为适当的单个 Unicode 字符。这实际上是您在问题中引用的第 3.2 节中引用的三个步骤中的第一个。这样就可以只使用纯 ASCII 字符来表示源中的任何 Unicode 字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:08:18.660

“Unicode”不是一种编码，它只是一个字符列表和相关数字（或“代码点”），但与传统字符集不同，数字不是 Unicode 字符的磁盘表示。要编码或解码 Unicode 字符，您需要一个单独的编码，它将字节序列映射到 Unicode 数字，从而映射到 Unicode 字符。

一些编码，如 UTF-8，旨在对所有可能的 Unicode 代码点进行编码。其他的，如 Windows CP 1252，只能表示一小部分 Unicode 字符。但是任何有效的 Windows CP 1252 数据仍然可以解码为有效的 Unicode 代码点序列。

所以，是的，存在从磁盘表示到虚拟 Unicode 字符流的转换。

# django - Django - unique_together validation

> ID：11995023
> 
> 赞同：2
> 
> 时间：2012-08-16T20:32:50.263
> 
> 标签：django, django-models, django-forms, django-validation

Given the example code below, what would be the best way to validate that there are no duplicate `code` per `account`?

**Model**

```
class Post(models.Model):
    account = models.ForeignKey('Account', editable=False)
    code = models.CharField()

    class Meta:
        unique_together = ('account', 'code') 
```

**Form**

```
class PostForm(forms.ModelForm):
    class Meta:
        model = Post
        fields = ('code',) 
```

**View**

```
def post_add(request):
    try:
        account = Account.objects.get(membership__user=request.user)
    except:
        login_url = reverse('login') + ('?next=%s') % request.path
        return HttpResponseRedirect(login_url)

    post = Post()

    if request.method == "POST":
        post_form = PostForm(request.POST, prefix='post')

        if post_form.is_valid():
            post = post_form.save(commit=False)
            post.account = account
            post.save()

        # other code 
```

I've found answers suggesting something similar to using `clean_code()` but `account` doesn't seem to exist at that point. What do you suggest?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:38:04.590

以下是文档中的相关示例：[https ://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)

基本上 clean() 可以通过 clean_data 访问所有字段。这是用于在 Form 中进行验证的方法。

如果您想在模型中执行此操作，请查看 pre_save。

# c# - c# 公共属性不可访问

> ID：11995028
> 
> 赞同：3
> 
> 时间：2012-08-16T20:33:24.583
> 
> 标签：c#, properties, public

```
[DataContract]
public class UniqueNamedItem
{
    [DataMember]
    int Id { public get; protected set; }
    [DataMember]
    string Name { public get; protected set; }
}

[KnownType(typeof(UniqueNamedItem))]
[DataContract]
public class BasicNode : UniqueNamedItem
{
    [DataMember]
    SortedList<string, BasicNode> Children { public get; private set; }

    public void addChild(BasicNode bn)
    {
        this.Children.Add(bn.Name, bn);
    }
} 
```

你能告诉我为什么在我的 addChild 函数中对 bn.Name 的调用无效，即使 UniqueNamedItem.Name 属性具有公共 get 访问器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T20:35:39.237

类成员的默认[可访问性](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)`private`是.

所以`Id`和`Name`是`private`。

您需要添加正确的访问修饰符（我添加了`public`，您可能的意思是`protected`）：

```
[DataContract]
public class UniqueNamedItem
{
    [DataMember]
    public int Id { public get; protected set; }
    [DataMember]
    public string Name { public get; protected set; }
} 
```

*始终*声明所需的可访问性的一个很好的理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T20:35:44.927

该`UniqueNamedItem.Name`物业本身是`private`; 您需要将该属性显式标记为`public`.

访问器上的修饰符只能进一步限制访问，而不是增加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:36:58.590

您需要将您的属性声明为公开的（见下文）。默认为私有。

```
[DataContract]
public class UniqueNamedItem
{
    [DataMember]
    public int Id { public get; protected set; }
    [DataMember]
    public string Name { public get; protected set; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T20:37:47.273

您需要公开您的属性：

```
[DataContract]
public class UniqueNamedItem
{
    [DataMember]
    public int Id { public get; protected set; }
    [DataMember]
    public string Name { public get; protected set; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T20:40:04.830

您的属性未明确标记为公共的，因此 C# 自动将它们视为私有的。

所以：

```
[DataContract]
public class UniqueNamedItem
{
    [DataMember]
    int Id { public get; protected set; }
    [DataMember]
    public string Name { public get; protected set; }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T20:58:16.460

默认访问是私有的，因为如果您在真正应该私有的时候将某些内容公开，它不会阻止任何正确的代码工作，而且在您意识到之前可能会持续多年（这也是当时的重大变化修理它）。

另一方面，如果您在应该公开的时候将某些内容设为私有，则某些内容将立即停止工作，您继续使用 stackoverflow，一堆人说它是私有的，您修复它，一切都很好。

因此，这是一个明智的默认设置。

# c# - 基于用户的字符串模板

> ID：11995034
> 
> 赞同：3
> 
> 时间：2012-08-16T20:33:50.037
> 
> 标签：c#

我有一个用户选择的字符串模板，我需要使用该模板并填写请求的信息。

```
string templateString = "%author% - %title% (%year%)"; 
```

我可以使用 .Contains() 和 .Replace()，但是模板可能有大量输入或少量输入，例如：

```
string templateString = "%author% - %publisher% - %isbn% - %asin% - %title% (%year%)"; 
```

因此，为用户可以选择的每个选项执行 .Contains() 和 .Replace() 似乎效率低下，我希望做的是找到一种更好的方法来使用请求的信息填充 templateString。任何帮助将不胜感激。这将用于数千个项目。

无论用户输入多少文件（电子书，我们中的一些人有数千个），该程序本身都会获取许多文件，它会根据个人用户的模板重命名每本电子书，并使用从电子书中抓取的元数据填充信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:44:20.407

我在其他地方发布了这个，但在你的情况下看起来这将是一个很好的方法（我自己也做过）。基本上，您使用正则表达式替换匹配评估器回调：

```
regex = new Regex(@"\%(?<value>.*?)\%", 
    RegexOptions.CultureInvariant | RegexOptions.ExplicitCapture);

string replacedText = regex.Replace(<text>, 
    new MatchEvaluator(this.EvaluateMatchCallback)); 
```

然后您的回调将如下所示：

```
private string EvaluateMatchCallback(Match match) {
    string templateInsert = match.Groups["value"].Value;
    // or whatever
    string replacedText = GetReplacementTextBasedOnTemplateValue(templateInsert);
    return replacedText;
} 
```

Where`GetReplacementTextBasedOnTemplateValue`是一个方法，它将返回与正则表达式匹配的占位符对应的任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:40:35.537

我过去做过这件事。而不是使用`.Contains`我只是调用`.Replace(pattern, replacement)`每个可用的选项。在典型的面向用户（例如数据显示/输入）的应用程序中，用户永远不会注意到任何减速。

在尝试优化性能之前，您确实应该确认您有性能问题。你很可能在浪费时间。

**测试数据：** 使用下面的测试代码，您可以看到替换 25,000 个“书”中的 10 个值需要不到 2 秒，其中大部分是由写入控制台引起的（如果删除 Console.WriteLine()，运行时间会下降到 160 毫秒以下只需将书籍添加到 a `List<String>()`)。对我来说似乎很容易接受。

```
String template = @"%index%.  %title% - %author% [%isbn%] - %year%";
            Dictionary<String, String> values = new Dictionary<String, String> { { "title", "A day in the life of..." }, { "author", "Joe S. Schmoe" }, { "year", "1945" }, { "isbn", "987-987-987-987-987" }, { "one", "1" }, { "two", "2" }, { "three", "3" }, { "four", "4" }, { "five", "5" }, { "six", "6" }, { "seven", "7" } };
            String output = string.Empty;
            Stopwatch watch = new Stopwatch();

            watch.Start();
            for (Int32 index = 0; index < 25000; index++) {
                output = template;
                foreach (String key in values.Keys) {
                    output = output.Replace("%" + key + "%", values[key]);
                }
                output = output.Replace("%index%", index.ToString());
                Console.WriteLine(output);
            }
            watch.Stop();

            Console.WriteLine("Elapsed time (ms): " + watch.ElapsedMilliseconds.ToString()); 
```

# python - 是否可以通过 url 传递非 ASCII 值？还是这里有其他我没有看到的错误？

> ID：11995036
> 
> 赞同：1
> 
> 时间：2012-08-16T20:34:20.760
> 
> 标签：python, utf-8, jinja2

从此代码块：

```
class MainHandler(webapp2.RequestHandler):
    def get(self):

        template_values = {"given_sentence":'put a sentence here'}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        nb = naivebayes(getfeatures)
        sampletrain(nb)
        given_sentence = self.request.get("given_sentence").encode('utf-8')
      #  given_sentence = self.request.get("given_sentence")
        spam_result = nb.classify(given_sentence)
        submit_button = self.request.get("submit_button")
        if submit_button:
            self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence)) 
```

我收到此错误：

```
 File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 262, in post
    self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence))
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 608, in redirect
    response=self.response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1767, in redirect
    uri = str(urlparse.urljoin(request.url, uri))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 82: ordinal not in range(128)
INFO     2012-08-16 20:02:52,229 dev_appserver.py:2952] "POST / HTTP/1.1" 500 -
INFO     2012-08-16 20:05:06,858 py_zipimport.py:148] zipimporter('C:\\Python27\\lib\\site-packages\\pyyaml-3.10-py2.7-win32.egg', '')
ERROR    2012-08-16 20:05:08,230 webapp2.py:1553] 'ascii' codec can't decode byte 0xc3 in position 16: ordinal not in range(128)
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 262, in post
    self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 16: ordinal not in range(128) 
```

当 的值`given_sentence`是这样的：`productos farmacéuticos comprar ahora`.

我的python代码是utf-8。我还将我的模板（在`<head>`标签中）放在这一行：`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>`.

问题似乎在于通过 url 传递一个非 ASCII 语句。如果我尝试这个（“productos comprar ahora”），没关系：

```
http://localhost:8084/test_result?spam_result=good&given_sentence=productos%20comprar%20ahora 
```

但是如果我尝试这个：“productos farmacéuticos comprar ahora”我得到了上述错误。是不是可以通过 url 传递一个非 ASCII 值？还是这里有其他我没有看到的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:44:52.907

这是一个基本的 Python 编码问题。您正在尝试将非 ASCII 字符串放入 ASCII 字符串中。改用 unicode（注意`u`）：

```
self.redirect(u'/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence)) 
```

（并放弃`encode`获取 given_sentence 的电话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:04:12.883

> 是不是可以通过 url 传递一个非 ASCII 值？

不，这不对。这里的问题不是 Python，而是 URL/URI 规范[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)（参见第 2.0-2.3 节）。

URL 只能包含来自 ASCII 受限子集的字符。

但是有一种方法可以将任意字节流作为 URL 的一部分传递：百分比编码（第 2.4 节）。因此，如果您有 UTF-8 字节字符串“farmac\xc3\xa9uticos”，则可以将其发送为“farmac%C3%A9uticos”。

如果您使用 urllib.urlencode 从 dict 中生成查询字符串，而不是尝试手动执行，它会为您解决这个问题。

但是如果你有 Unicode 字符串“farmacéuticos”呢？好吧，您必须将其编码为 UTF-8 或其他一些字节字符串编码，以便您可以对其进行百分比编码并通过 URL 传递它。另一端的服务器必须知道它正在获取 UTF-8（在 URL 解码之后），以便它可以重建您的 Unicode 字符串。

# html - 可靠地创建重复线性渐变图案

> ID：11995038
> 
> 赞同：1
> 
> 时间：2012-08-16T20:34:27.003
> 
> 标签：html, css

我创建了一个`repeating-linear-gradient`用作背景图像的元素。目前，元素的大小会对背景图案产生不利影响。我的目标是能够始终如一地产生相同的背景图案，而不管元素的大小。

我知道每次获得这种模式的最简单方法是创建一个 .png 具有可以重复的模式，但是无论如何都可以在没有图像的情况下制作它？旧版浏览器兼容性不是问题。

我只是在寻找我可能没想到的建议来解决这个实验。

为了演示，我创建了这个[代码笔](http://codepen.io/clang1234/pen/Cgxuo)。

HTML

```
<div class="bar"></div> 
```

CSS

```
.bar {
  display: block;
  width: 695px;
  height: 44px;
  left: 50%;
  margin: -22px -347px;
  position: absolute;
  top: 10%;
  background-color: #4d4d4d;
  background-image: repeating-linear-gradient(45deg, rgba(0, 191, 255, 0.5), rgba(0, 191, 255, 0.5) 1px, transparent 1px, transparent 15px), 
   repeating-linear-gradient(-45deg, rgba(39, 216, 5, 0.59), rgba(39, 216, 5, 0.59) 1px, transparent 1px, transparent 15px);
}
.bar.big {
  width: 1000px;
  top: 25%;
  margin-left: -500px;
  maring-right: -500px;
}
.bar.small {
  width: 400px;
  top: 40%;
  margin-left: -200px;
  maring-right: -200px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:11:24.357

设置`background-size`为`.bar`：

```
background-size: 695px 44px; 
```

[**演示**](http://codepen.io/anon/pen/fcpyF)

# java - 多线程 Java 应用程序中的 OpenGL 多上下文问题

> ID：11995043
> 
> 赞同：0
> 
> 时间：2012-08-16T20:34:44.677
> 
> 标签：java, multithreading, opengl, lwjgl

我认为设置起来很简单：我有 2 个线程，每个线程都包含完全分离的 OpenGL 应用程序，它从自己的 PBuffer 获取其上下文。所以想法是在 2 个不同的上下文中并行渲染。发生的是第一个线程渲染正常，但第二个失败。我想知道是否有可能使用单独的上下文进行并行渲染？我正在为 OpenGL使用 Java [LWJGL包装器。](http://lwjgl.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:47:05.790

找到了解决方案。我忘了删除一些我认为当时两个线程都不能使用的静态对象。现在它可以工作了。

# android - ImageView size from Camera capture

> ID：11995045
> 
> 赞同：1
> 
> 时间：2012-08-16T20:35:07.593
> 
> 标签：android

I followed another StackOverflow tutorial where you can capture a bitmap from the camera and set it to your image view. The issue I am having is that the picture that is returned is very small and does not fill the rest of the screen. In my XML I do the following...

```
<ImageView 
     android:id="@+id/imgview" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

If I change to "fill_parent" I get a larger image, but my question now is how would I go about getting the actual size image and putting it on a scrollable (in both the x and y directions) view container.

Thanks!

BTW, here is the code for capturing the Bitmap from the camera...

```
public class MainActivity extends Activity implements OnClickListener
{
private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.d("matt","1");

    Button b = (Button)this.findViewById(R.id.btn);
    imageView = (ImageView)this.findViewById(R.id.imgview);

    b.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v)
{
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent,1888);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if(requestCode == 1888)
    {
        Log.d("matt", "3.a");
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        Log.d("matt", "3.b");
        imageView.setImageBitmap(photo);
        Log.d("matt", "3.c");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:51:54.040

调用者可能会传递一个额外的 EXTRA_OUTPUT 来控制该图像将被写入的位置。如果 EXTRA_OUTPUT 不存在，则在额外字段中将小尺寸图像作为位图对象返回。这对于只需要小图像的应用程序很有用。如果存在 EXTRA_OUTPUT，则将全尺寸图像写入 EXTRA_OUTPUT 的 Uri 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:53:23.763

如果您需要捕获图像的尺寸，则可以使用：

```
int height = photo.getHeight();
int width = photo.getWidth(); 
```

否则，如果您想了解捕获的图像大小（以兆字节为单位），请参阅我对这个问题的回答：[https ://stackoverflow.com/a/11846455/1512836](https://stackoverflow.com/a/11846455/1512836)

[编辑] - 请检查这个以滚动图像视图：[Android ScrollView 中的图像](https://stackoverflow.com/questions/4990682/images-in-scrollview-in-android)

# asp.net-web-api - ActionMethodSelectorAttribute equivalent in ASP.NET Web API?

> ID：11995046
> 
> 赞同：1
> 
> 时间：2012-08-16T20:35:10.563
> 
> 标签：asp.net-web-api

Is there a Web API equivalent to the MVC `ActionMethodSelectorAttribute`?

My specific purpose is this: I have, for example, a `ResourceController` and when I `POST` to the controller, I'd like to be able to receive a single resource (`Resource`) or a list (`IEnumerable<Resource>`).

I was hoping creating two methods with different parameters would cause the deserialization process to do some evaluation but this doesn't seem to be the case (and frankly, I don't think it's efficiently realistic with the combination of content negotiation and the fact that many data formats, like JSON, make it difficult to infer the data type). So I originally had:

```
public HttpResponseMessage Post(Resource resource) {...}

public HttpResponseMessage Post(IEnumerable<Resource> resources) {...} 
```

...but this gets the "multiple actions" error. So I investigated how to annotate my methods and came across `ActionMethodSelectorAttribute` but also discovered this is only for MVC routing and not Web API.

So... without requiring a different path for POSTing multiple resources vs. one (which isn't the end of the world), what would I do to differentiate?

My thoughts along the `ActionMethodSelectorAttribute` were to require a query parameter specifying multiple, which I suppose is no different than a different path. So, I think I just eliminated my current need to do this, but I would still like to know if there is an equivalent `ActionMethodSelectorAttribute` for Web API :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:35:30.780

我还没有看到该方法的替代品（有一个`IActionMethodSelector`接口，但它在 DLL 内部）。一种选择（尽管看起来可能有些过头了）是重载所`IHttpActionSelector`使用的实现。

但是稍微改变一下，为什么不总是期待一个`IEnumerable<Resource>`？我的第一个猜测是收集方法（需要`IEnumerable<Resource>`）会简单地循环并调用单个值（只是`Resource`）函数吗？

# ios5 - Fancybox iframe 未在 iOS 上显示所有内容

> ID：11995052
> 
> 赞同：1
> 
> 时间：2012-08-16T20:36:00.617
> 
> 标签：ios5, fancybox

我在 Fancybox 1.3.4 中使用 iframe 来显示网页示例。某些页面包含大量图像并且可能很长。

它可以在除 iOS 之外的所有其他设备上完美运行。

弹窗一开始会加载内容，但很快就会停止加载。所以基本上，人们只能在他们的 iOS 设备上看到网页的顶部。当他们在弹出窗口中向下滚动时，他们看到的都是空白。有时，如果他们很幸运并且拥有快速的互联网，他们可能会看到更多......

我不确定这是 iOS 还是 Fancybox 的问题。

任何帮助表示赞赏。

谢谢，

米洛

# magento - magento：创建自己的收藏

> ID：11995059
> 
> 赞同：0
> 
> 时间：2012-08-16T20:36:40.607
> 
> 标签：magento, collections

希望每个人都做得很好。我是 magento 的新手。我正在研究 magento 模块。我想在管理员中使用网格，但我需要使用集合。我创建了一些集合，但在成功访问其中任何一个方面都没有成功。我想知道我错在哪里。让我和你分享我的问题。

我的配置文件块

```
<models>

    <exporter>
        <class>World_Exporter_Model</class>
        <!-- 
        need to create our own resource, cant just
        use core_mysql4
        -->
        <resourceModel>exporter_mysql4</resourceModel>
    </exporter>   
<exporter_mysql4>
      <class>World_Exporter_Model_Mysql4</class>
      <entities>
             <exporter>
                        <table>profiles</table>
             </exporter>
      </entities>

</exporter_mysql4>
 </models> 
```

我的模型

```
class World_Exporter_Model_Mysql4_Profiles extends Mage_Core_Model_Mysql4_Abstract
{
public function _construct()
{

    $this->_init('exporter/profiles', 'profile_id');
}
} 
```

还有我的收藏

```
 class World_Exporter_Model_Mysql4_Profiles_Collection extends    Mage_Core_Model_Mysql4_Collection_Abstract
 {
public function _construct(){
    parent::_construct();
    $this->_init('exporter/profiles');
}
 } 
```

如果你想帮助我。我很饱。

（得到答案后添加）....

```
 $model = Mage::getResourceModel('exporter/profiles');

    //  $model = Mage::getModel('exporter/profiles');           

    $collection = $model->getCollection(); 
```

致命错误：调用未定义的方法 World_Exporter_Model_Mysql4_Profiles::getCollection()

```
 //  $model = Mage::getResourceModel('exporter/profiles');

        $model = Mage::getModel('exporter/profiles');           

        $collection = $model->getCollection(); 
```

a:5:{i:0;s:47:无法检索实体配置：exporter/profiles";i:1;s:2542:

#0 \app\code\core\Mage\Core\Model\Resource.php(272): Mage::throwException('Can't retrieve ...')

#1 \app\code\core\Mage\Core\Model\Resource\Db\Abstract.php(284): Mage_Core_Model_Resource->getTableName('exporter/profile...')

#2 \app\code\core\Mage\Core\Model\Resource\Db\Abstract.php(247): Mage_Core_Model_Resource_Db_Abstract->getTable('profiles')

# 但我确实在数据库中有表“配置文件”

感谢您的帮助……</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:17:23.367

所以我终于自己得到了答案，因为我没有得到足够的回复，所以我必须自己做，非常感谢我问题的唯一回复者，实际上他的回答帮助我解决了这个问题，所以归功于他出色地。

现在解决方案

```
<exporter>
    <class>World_Exporter_Model</class>

    <resourceModel>exporter_mysql4</resourceModel>
</exporter>   
<exporter_mysql4>
  <class>World_Exporter_Model_Mysql4</class>
  <entities>
       <!-- This portion makes it stop working --> 
         <exporter>
                    <table>profiles</table>
         </exporter>
       <!-- This portion makes it stop working -->

       <!-- Replace the above highlighted portion with this portion -->
         <profiles>
                    <table>profiles</table>
         </profiles>

      <!-- Replace the above highlighted portion with this portion -->

  </entities>

 </exporter_mysql4>
</models> 
```

所以在上面的代码（xml）中，我们用profiles替换了exporter标签

然后编写代码

```
class World_Exporter_Model_Profiles extends Mage_Core_Model_Abstract
{
    public function _construct()
    {
        // now profiles in this will catch the table name within profiles tags
        $this->_init('exporter/profiles');
    }
} 
```

它开始为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:25:46.313

看起来您缺少模型。如果您查看配置 xml，您所称的模型就是您的资源模型。您仍然需要定义实际模型。同样，在您的配置 xml 中，已经声明了此模型：`<class>World_Exporter_Model</class>`

基本类应如下所示：

```
class World_Exporter_Model_Profiles extends Mage_Core_Model_Abstract
{
    public function _construct()
    {

        $this->_init('exporter/profiles');
    }
} 
```

并且应该在`/app/code/local/World/Exporter/Model/Profiles.php`

# linux - linux ftp lcd错误没有这样的文件或目录

> ID：11995064
> 
> 赞同：0
> 
> 时间：2012-08-16T20:37:14.323
> 
> 标签：linux, ftp

我编写了一个 bash 脚本来连接到 ftp 服务器并将文件从 FTP 服务器下载到本地 linux 机器上的不同目录。

我正在使用以下方法来实现这一点。

```
#! /bin/sh 
FILENAME='helloworld.txt'
USSER='username'
PASSWD='password'
ftp -niv ftp.domain.com <<HEREDOC
quote USER $USSER
quote PASS $PASSWD
lcd /home/username/scripts/data
mget $FILENAME
bye
HEREDOC 
```

我必须使用 USSER 登录，因为 USER 是关键字

此外，我能够手动运行命令而没有任何错误。

有谁知道问题可能是什么？对此的任何帮助或在哪里寻找的线索将不胜感激。

**编辑**

当我运行脚本时，我得到以下信息并注意到错误消息如何覆盖了它正在回显的大部分路径

```
# bash test.sh
test.sh: line 11: warning: here-document at line 5 delimited by end-of-file (wan')d `HEREDOC
Connected to ftp.domain.com (ipaddress).
220 Welcome to the domain FTP Server
331 Password required for username.
230 User username logged in.
: No such file or directoryts/data
local: helloworld.txt remote: helloworld.txt
227 Entering Passive Mode (216,19,206,212,226,85)
150 Data connection accepted from myipaddress:54375; transfer starting for /helloworld.txt (107828 bytes)
226 File sent ok.
107828 bytes received in 0.137 secs (789.81 Kbytes/sec)
?Invalid command
?Invalid command
221 Goodbye. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:57:54.517

错误消息覆盖自身的原因是您的文件名包含在错误消息中，而回车符包含在您的文件名中。你需要`dos2unix`那个东西并停止使用 DOS 式编辑器编辑 unix 脚本。

# php - 在一个查询中按来自不同表的结果排序结果

> ID：11995065
> 
> 赞同：1
> 
> 时间：2012-08-16T20:37:17.980
> 
> 标签：php, mysql

是否有可能在一个查询中有这样的东西，

计算某个 ID 的点赞数`image_likes`，然后按点赞数`images`降序排列结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:42:44.373

```
select * from (SELECT *,(SELECT COUNT(*) as count from image_likes il WHERE ID = i.ID)         
FROM images) tbl ORDER BY COUNT 
```

未经测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:40:20.440

```
SELECT
    *
FROM
    `images`
ORDER BY
    (SELECT COUNT(`id`) FROM `image_likes` WHERE `image_id`=images.`id`) ASC 
```

（我当然已经编好了字段名，但是这种格式应该可以）

如果可能，您可能希望更改系统的工作方式，以便您可以从字段名称中读取总喜欢数，而不是进行子选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:40:36.680

未经测试

```
select imageid, count(imageid) from image_likes 
Group by imageid
Order by Count(imageid) desc 
```

# c++ - 求数的因数。没有得到准确的结果

> ID：11995069
> 
> 赞同：2
> 
> 时间：2012-08-16T20:37:41.793
> 
> 标签：c++

有人可以帮助纠正我的算法吗？我已经在几个数字上对其进行了测试，但它没有输出完整的因式分解。对于具有大量因子的数字，它完全失败了。

```
int num = 20;

for(int i = 2; i <= num; i++)
{
    if(num%i == 0)
    {
        cout << i << endl;
        cout << num << endl;
        num = num/i;    
    }
} 
```

编辑：提供的两个答案不起作用，仍然没有得到完整的结果。

EDIT2：除数与因子

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T20:53:18.070

从您对 @ 的评论来看`Luchian Grigore`，您将**除数**与**(prime) factorization**混淆了。一个数的除数是所有`num % i == 0`为真的数。因式分解意味着`num`通过较小数字的乘积来表示。如果你想要分解的唯一性，你通常使用素数分解。

要获得所有除数，您的代码应该是

```
for ( int i = 1; i <= num; ++i ) // note that 1 and num are both trivially divisors of num
{
    if ( num % i == 0 ) // only check for divisibility
    {
        std::cout << i << std::endl;
    }
} 
```

要获得（质数）分解，它是

```
for ( int i = 2; i <= num; ++i )
{
    while ( num % i == 0 ) // check for divisibility
    {
        num /= i;
        std::cout << i << std::endl;
    }
    // at this point, i cannot be a divisor of the (possibly modified) num.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:39:06.557

问题是`i`即使它是一个除数，你也在增加，除非你找到它的所有出现，否则你不应该这样做。

因此，对于 4，您将有 2 两次。但是在遇到第一个 2 之后，您退出循环，因为`i`它递增到 3 并`num`变为 2。

以下应该有效：

```
for(int i = 2; i <= num; )
{
    if(num%i == 0)
    {
        cout << i << endl;
        cout << num << endl;
        num = num/i;    
    }
    else
    {
        i++;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:41:43.140

```
for(int i = 2; i <= num; i++)
{
    if(num%i == 0)
    {
        cout << i << endl;
        cout << num << endl;
        num = num/i;    
        i--; // Add this to account for multiple divisors
    }
}

for(int i = 2; i <= num; i++)
{
    if(num%i == 0)
    {
        cout << i << endl;
        cout << num << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T19:09:31.147

这应该有效。注意，应该使用 c++11 作为移动构造函数，否则你会想要传入一个 std::list& 来代替。

```
std::list<int64_t> factor(int64_t f)
{
    std::list<int64_t> factors;
    for(int64_t ii = 2; ii<=f; ii++) {
        while(f % ii == 0) {
            f = f/ii;
            factors.push_back(ii);
        }
    }

    return factors;
} 
```

# objective-c - NSSplitView 分隔线的起始位置

> ID：11995073
> 
> 赞同：12
> 
> 时间：2012-08-16T20:37:58.510
> 
> 标签：objective-c, macos, swift, nsview, nssplitview

如何设置 NSSplitView 的起始位置？

我发现最接近它的东西是 setPosition

```
//Set splitView position.
[splitView setPosition:330 ofDividerAtIndex:0]; 
```

不过，这似乎没有任何作用，我的拆分视图仍然从中间的分隔线开始。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-03T22:24:31.143

您不设置分隔线的位置，而是设置 NSSplitView 的子视图的大小。然后分隔器会自动重新定位。

这就是我定位分隔线和子视图大小的方式（快速）：

```
let subview: NSView = mySplitView.subviews[1] as NSView
subview.setFrameSize(NSMakeSize(subview.frame.size.width, 100)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-26T02:16:21.587

`NSSplitView`需要初始的非大小范围才能正确布局。如果您的视图大小为零，则它不会显示预期的布局。

最好的方法是提供非零布局（这是 IB 所做的），但有时这是不可能的。

如果您不能提供非零大小，那么我认为您必须提供适当的`- (void)splitView:(NSSplitView *)splitView resizeSubviewsWithOldSize:(NSSize)oldSize`委托方法实现来自己手动布局所有内容。（这是我目前的最佳做法）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-12T22:10:42.670

在包含拆分视图的视图类中

```
override func viewWillAppear() {
    self.mySplitView.setPosition(120, ofDividerAtIndex: 0)
} 
```

或您希望它开始的任何地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T00:46:44.217

也许这就是中心？如果 splitView 正确连接到您的拆分视图，则该代码应该可以工作。在尝试设置分隔线的位置之前，您可能应该记录 [splitView minPossiblePositionOfDividerAtIndex:0] 和 [splitView maxPossiblePositionOfDividerAtIndex:0]，以便了解可能的值。

# java - 在Android中旋转后不显示ImageView

> ID：11995076
> 
> 赞同：2
> 
> 时间：2012-08-16T20:38:06.447
> 
> 标签：java, android

实际上我编写了一个使用图像旋转的应用程序。但是当我旋转图像时，它没有显示任何内容。

这是我的代码：

XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rotate_test_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/android"
        android:src="@drawable/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:scaleType="matrix"
        android:adjustViewBounds="true"
        android:contentDescription="@string/android_description" >
    </ImageView>

</LinearLayout> 
```

活动文件：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rotate_test_layout);
    ImageView imageView = (ImageView)findViewById(R.id.android);
    imageView.setScaleType(ScaleType.MATRIX);
    Matrix matrix = new Matrix();
    matrix.postRotate(90);
    imageView.setImageMatrix(matrix);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:43:12.383

你在这里犯了一个错误：

```
imageView.setImageMatrix(matrix); 
```

而不是这样做，您必须将该矩阵应用于现有位图以获取一个新位图，然后您可以将其分配给 ImageView。

```
Drawable drawable = getResources().getDrawables(R.drawable.android);
Bitmap existingBitmap = ((BitmapDrawable) drawable).getBitmap();
Bitmap rotated = Bitmap.createBitmap(existingBitmap, 0, 0, existingBitmap.getWidth(), existingBitmap.getHeight(), matrix, true);
imageView.setImageBitmap(rotated); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-07T05:04:11.220

您可以在不使用矩阵的情况下旋转 ImageView。测试它。

```
imageView.setRotation(90.0f); 
```

# android - GridView 错误“ClassCastException：java.lang.Integer”

> ID：11995077
> 
> 赞同：0
> 
> 时间：2012-08-16T20:38:08.377
> 
> 标签：android, android-layout, gridview

我在看[google 2009](http://www.youtube.com/watch?feature=player_embedded&v=N6YdwzAvwOA#!)，发现我的代码效率低下，可能会导致内存问题。

这是我的实现

```
public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ViewHolder viewHolder;
            if(li == null){
            li = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }
        if(convertView == null){
            convertView = li.inflate(R.layout.book_case_view, parent, false);

            viewHolder = new ViewHolder();
            viewHolder.image = (ImageView)convertView.findViewById(R.id.bookCover);
            viewHolder.textView = (TextView)convertView.findViewById(R.id.bookLabel);

            convertView.setTag(viewHolder);
        }else{
            viewHolder = (ViewHolder) convertView.getTag();
        }
        bi = dbh.getData(FILES.get(position));

        convertView.setTag(position);
        convertView.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                BookCaseOnClick(position);
            }
        });

        viewHolder.image.setImageResource(R.drawable.book);//Create a drawable backup cover

        viewHolder.textView.setText( bi.getBook_Title());//Object refers to Book_information

viewHolder.textView.setBackgroundResource(R.drawable.alphabet_bar_bg_dark);
//          new LoadCover(image, bi).run();
            LoadCover(viewHolder.image, bi, position);
            return convertView;
        }

static class ViewHolder{
    ImageView image;
    TextView textView;
} 
```

但是，在第一个循环加载后，我在这一行遇到错误。（第二个）

```
viewHolder = (ViewHolder) convertView.getTag(); 
```

这些是错误。需要注意的主要是在调试过程中发现异常并在gridview类上传递了“java.lang.integer”错误

```
08-16 20:13:02.073: E/AndroidRuntime(6520): FATAL EXCEPTION: main
08-16 20:13:02.073: E/AndroidRuntime(6520): java.lang.ClassCastException: java.lang.Integer
08-16 20:13:02.073: E/AndroidRuntime(6520):     at epub.activity.View_Book_Selection_Screen$BookCaseAdapter.getView(View_Book_Selection_Screen.java:835)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.AbsListView.obtainView(AbsListView.java:1409)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.GridView.makeAndAddView(GridView.java:1222)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.GridView.makeRow(GridView.java:268)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.GridView.fillDown(GridView.java:221)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.GridView.fillFromTop(GridView.java:340)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.GridView.layoutChildren(GridView.java:1136)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.AbsListView.onLayout(AbsListView.java:1260)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1243)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1049)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1047)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.View.layout(View.java:7175)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.os.Looper.loop(Looper.java:123)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at java.lang.reflect.Method.invokeNative(Native Method)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at java.lang.reflect.Method.invoke(Method.java:507)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-16 20:13:02.073: E/AndroidRuntime(6520):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:56:43.930

Akyl，类似的东西可能会对你有所帮助。

```
ViewHolder holder = null;
if (convertView == null || !(convertView.getTag() instanceof ViewHolder)) {
    convertView = mInflater.inflate(R.layout.your_view, null);
    holder = new ViewHolder(your params);
    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:48:57.263

您正在将整数设置为标签

```
convertView.setTag(position); 
```

但是你正在做

```
viewHolder = (ViewHolder) convertView.getTag(); 
```

这就是您收到此异常的原因。将 viewHolder 设置为标签或将其转换为整数

# linux - 源特定的多播操作系统/驱动程序性能

> ID：11995080
> 
> 赞同：0
> 
> 时间：2012-08-16T20:38:50.043
> 
> 标签：linux, performance, multicast

我有一个运行 Linux 2.6.33 的嵌入式设备，它发送大量的多播数据，这通常是 LAN 上唯一的同类设备。但是，在同一网络上有两个或多个设备的极少数情况下，我需要一种客户端连接来区分设备的方法。

**编辑：**单个客户端只对来自单个设备的流量感兴趣。

1.  我可以在每个数据报中嵌入一个标识符，但这意味着客户端会花费宝贵的时间检查数据包，这可能在驱动程序中更快地实现。慢客户端肯定会开始丢包。

2.  我可以为每个设备使用单独的多播 IP 地址，或者只是区分每个设备发送到的端口。这已经实施。

3.  我可以使用特定于源的多播。

我不知道最常见的操作系统和驱动程序实现 SSM 的效率如何，或者每个设备使用不同的多播组是否比依赖 SSM 更快。

由于这完全取决于实现，我想从现场获得有关选项 2 和 3 的建议，并且我想知道仅切换多播端口是否足以区分流量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:42:35.963

在我看来，这三个选项之间没有太大区别。这就是为什么。无论如何，多播流量都会到达客户端主机。现在是发件人区分部分。无论您选择哪种方式，都需要比较：

1.  两个任意大小的标识符（您选择），但很可能是`int`s
2.  二...
    1.  IP 地址，在 IPv4 的情况下为 4 个字节，如果您选择使用不同的多播组
    2.  或端口，如果您选择使用不同的端口，则为 2 个字节
3.  再次两个 IP 地址，但比较将由内核执行，而不是您的应用程序

底线是性能方面没有太大区别，因为您将对两种原始数据类型进行一次比较。无论如何，这种比较将在几个处理器指令中实现，因此无论是在内核空间还是用户空间中执行都没有什么大不了的。

我会选择编程负担较小的方法。无论您选择哪种方法，性能都几乎相同。

# java - 一对多关系孩子抛出“一个或多个实例无法持久化”

> ID：11995081
> 
> 赞同：1
> 
> 时间：2012-08-16T20:38:54.767
> 
> 标签：java, google-app-engine, persistence, jdo

我有两个课程，每个课程都是 PersistentCapable——一个 Event 和一个 Score 课程。Event 类包含一个分数的 ArrayList。

我有一个建立事件列表的方法，然后尝试使用将事件及其相应的分数保存到数据存储区

```
PersistenceManager pm = PMF.get().getPersistenceManager();
        try {
            pm.makePersistentAll(Event.getEvents());
        } finally {
            pm.close();
        } 
```

事件全部保存到数据存储区（我可以在 /_ah/admin 中看到它们）。然而，分数不会保存（至少大多数不会保存）。

从第一个事件保存的所有分数，但没有其他事件的分数。所有事件都有分数，并且在尝试保存到数据存储之前填充列表。

我的电话`makePersistentAll()`也正在抛出`javax.jdo.JDOUserException: One or more instances could not be made persistent`

最后，我可以在数据存储区管理员中看到，虽然所有事件都被保存了，但它们的得分值是一堆 (~15) 空值的列表。所有其他值都是正确的。键也是唯一的（尽管我是手动生成的）。

关于出了什么问题的任何想法？

事件：

```
@PersistenceCapable(detachable="true")
public class Event {
    @NotPersistent
    protected static ArrayList<Event> events = new ArrayList<Event>();

    @PrimaryKey
    @Persistent
    private Key key;

    @Persistent
    private String name;
    @Persistent
    private String date;
    @Persistent
    private String year;
    @Persistent
    private String scoresUrl;
    @Persistent
    private ArrayList<Score> scores; 
```

分数：

```
@PersistenceCapable(detachable="true")
public class Score {
    @PrimaryKey
    @Persistent
    private Key key;
    @Persistent
    private Key eventKey;
    @Persistent
    private String unitName;
    @Persistent
    private int place;
    @Persistent
    private float score; 
```

在 logging.properties 中设置`.level = FINEST`后，我看到三个条目，我认为这三个条目可能会在所有事件都保存后导致问题。看起来好像连接在`makePersistentAll()`到达 Score 对象之前就被关闭了。

```
Aug 17, 2012 2:15:42 PM org.datanucleus.store.connection.ConnectionManagerImpl closeAllConnections
FINE: Connection found in the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@77a477b7 for key=org.datanucleus.ObjectManagerImpl@45e4d960 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@4eafccbe] but owner object closing so closing connection
Aug 17, 2012 2:15:42 PM org.datanucleus.store.connection.ConnectionManagerImpl$1 managedConnectionPostClose
FINE: Connection removed from the pool : com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection@77a477b7 for key=org.datanucleus.ObjectManagerImpl@45e4d960 in factory=ConnectionFactory:nontx[com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl@4eafccbe]
Aug 17, 2012 2:15:42 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /scores
javax.jdo.JDOUserException: One or more instances could not be made persistent 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:43:20.403

根据 Shivan Dragon 的建议，我从使用 PersistenceManager 转向在事务中执行所有操作。

它看起来不那么整洁（因为我需要显式设置每个属性），但它现在可以按预期工作并且不再抛出异常。

我绝对可以接受额外的混乱，因为这种方法还让我可以更好地控制何时以及何时不将我的单个实体的数据保存到数据存储区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-15T17:04:13.407

因为我遇到了同样的问题，所以我找到了这种解决方法。

我曾使用 PersistenceManager 来查找我想要删除的所有持久对象。在此之后，我试图只删除第一个。前任：

```
PersistenceManager pm = ...
List<MyEntity> myEntityList = pm.newQuery(MyEntity.class).executeList();
pm.deletePersistent(myEntityList.get(0));// Pretend that myEntityList has at least one object. 
```

这样你会得到另一个错误，它会告诉你这就是问题所在。从这第二个错误中，我了解到我需要删除外键上的非空约束。或者从这一点开始，您应该会看到 MySql 错误，而不是更多的 JDO 错误。

# popup - 如何在openlayers info-popup中退出滚动条

> ID：11995084
> 
> 赞同：2
> 
> 时间：2012-08-16T20:39:10.720
> 
> 标签：popup, gis, openlayers

这是我的代码

```
Info.newInfoPopUp = function (obj) {
    var table = createInfo(obj);
    popup = new OpenLayers.Popup.FramedCloud(
    obj.name, 
    obj.lonlat, 
    new OpenLayers.Size(), 
    '<table class="info-table popup">' + table.html() + '</table>', 
    null, 
    true, 
    obj.closeCallback
    );
    popup.minSize =new OpenLayers.Size(300,155);
    popup.maxSize = new OpenLayers.Size(800,200);
return popup;
}; 
```

弹出窗口有时会出现垂直滚动条

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:53:11.150

OpenLayers.Size 类构造函数应具有参数宽度和高度。尝试这个：

```
var popup = new OpenLayers.Popup.FramedCloud(
    obj.name, 
    obj.lonlat, 
    new OpenLayers.Size(100,100), 
    tablHtml, 
    null, 
    true, 
    obj.closeCallback
); 
```

# wpf - 独立的 Outlook 应用程序 - 数据绑定到文件夹邮件的方式？

> ID：11995090
> 
> 赞同：3
> 
> 时间：2012-08-16T20:39:22.287
> 
> 标签：wpf, outlook, mapi, mailitem

我正在用 C# 开发一个独立的 Outlook WPF 应用程序。我要做的是让程序监视任何传入邮件的公用文件夹，并通知用户任何邮件到达。

我已经成功地做到了这一点，但我觉得我这样做的方式很笨拙。本质上，我正在构建 MailItems 的集合，我的程序通过计时器重新扫描公用文件夹以查找任何新邮件。

我想知道的是，有没有办法将集合直接绑定到 MAPIFolder 或 MAPIFolder.Items。我实际上已经能够将 Listbox.ItemsSource 设置为 Outlook.Items 对象，但它只是将 (SysCom.Object) 显示为列表框项。所以我觉得这是可能的，但我需要一些方法来告诉列表框只显示 MailItems（以及 Mailitem 的主题字段的适当绑定路径）。

我想我最终想要做的是“镜像”一个 Outlook 文件夹，而不是将其中的项目复制到其他列表对象中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:55:27.133

无法以与绑定到记录集相同的方式进行绑定，但您需要做的是监视该文件夹 (Items.ItemAdd/ItemChange/ItemRemove) 上的事件。

此外，不要加载文件夹中的所有项目 - 除了效率极低之外，您可能会用完 RPC 通道限制（由 Exchange 强制执行）。仅加载足够的项目以显示给最终用户。其他项目需要在用户滚动时加载。

在低级别，Outlook 使用不需要将每个项目作为单独对象打开的 MAPI 表。扩展 MAPI 不能从 .Net 语言中使用，但您可以使用 Redemption 中的 MAPITable 对象 ( [http://www.dimastr.com/redemption/mapitable.htm](http://msdn.microsoft.com/en-us/library/office/bb176406%28v=office.12%29.aspx) ) 或 Outlook 2007 及更高版本 ( [http:// /msdn.microsoft.com/en-us/library/office/bb176406(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb176406%28v=office.12%29.aspx) )。

# php - javascript 函数是否在 php echo 中工作？

> ID：11995095
> 
> 赞同：1
> 
> 时间：2012-08-16T20:39:57.670
> 
> 标签：php, javascript, html

我正在清理我的代码，使其更加统一。我在 echo 命令中放置了几个 javascript 函数。我惊讶地发现，在我这样做之后，这些功能就不再起作用了。我没有收到任何错误，只是当我浏览该页面时，我才注意到我的功能不再起作用。我还处于 javascript 的初级阶段，所以我不确定这是否是一个常见错误，但我找不到任何相关的东西。

我通过消除所有回声并慢慢添加更多回声，直到问题再次出现，将其排除在第三行。所以，我不确定我做错了什么。

这些功能的目的是在所有内容上进行灰色覆盖，然后会弹出一个小的确认框，询问您是否要继续执行该任务。

```
echo '<script type="text/javascript">';
                echo 'function showPopUp(el) {';
                    echo 'var cvr = document.getElementById("cover")';
                    echo 'var dlg = document.getElementById(el)';
                    echo 'cvr.style.display = "block"';
                    echo 'dlg.style.display = "block"';
                    echo 'if (document.body.style.overflow = "hidden") {';
                        echo 'cvr.style.width = "100%"';
                        echo 'cvr.style.height = "100%"';
                    echo '}';
                echo '}';
                echo 'function closePopUp(el) {';
                    echo 'var cvr = document.getElementById("cover")';
                    echo 'var dlg = document.getElementById(el)';
                    echo 'cvr.style.display = "none"';
                    echo 'dlg.style.display = "none"';
                    echo 'document.body.style.overflowY = ""';
                echo '}';
echo '</script>'; 
```

额外信息：整个页面都在 php 标签内，我发现另一个行为相同的不相关函数。两者相似的唯一地方是它们都使用 var 命令并且它们都是函数。这可能是源头吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T20:43:36.437

**哦。我的。上帝。**

贵公司的标准是否“允许”以下内容？

```
echo <<<HTML
<script type="text/javascript">
    function showPopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "block"
        dlg.style.display = "block"
        if (document.body.style.overflow = "hidden") {
            cvr.style.width = "100%"
            cvr.style.height = "100%"
        }
    }
    function closePopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "none"
        dlg.style.display = "none"
        document.body.style.overflowY = ""
    }
</script>
HTML; 
```

要不就：

```
<?php
// some PHP code
?>
<script type="text/javascript">
    function showPopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "block"
        dlg.style.display = "block"
        if (document.body.style.overflow = "hidden") {
            cvr.style.width = "100%"
            cvr.style.height = "100%"
        }
    }
    function closePopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "none"
        dlg.style.display = "none"
        document.body.style.overflowY = ""
    }
</script>
<?php 
//some MORE PHP code... 
```

因为如果是这样，您会注意到您在`if`语句中使用了赋值：

```
if (document.body.style.overflow = "hidden") 
```

应该

```
if (document.body.style.overflow == "hidden") 
```

**注意：**您这样做的方式将***整个***javascript 块打印在一行上。如果您*必须*以这种方式打印出来，则必须在需要时为打印的每个字符串添加分号或换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:43:45.803

生成的 JavaScript 在语法上不正确 - 行既不以分号结尾，也不以换行符结尾。用。。。来代替

```
echo 'var cvr = document.getElementById("cover");'; 
```

等等。

`<script>`另外，我隐约记得元素末尾需要有一个换行符。在 PHP 中，echo 不会在末尾产生换行符，并且单引号中的字符串不允许像 \n 这样的转义序列。所以你需要这样做：

```
echo '<script type="text/javascript">'."\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:43:52.790

`echo`您的陈述的问题是缺少空格/分号：

```
echo 'var cvr = document.getElementById("cover")';
                echo 'var dlg = document.getElementById(el)';
                echo 'cvr.style.display = "block"'; 
```

在 html 中显示为：

```
var cvr = document.getElementById("cover")var dlg = document.getElementById(el)cvr.style.display = "block" 
```

等等

这在javascript中没有意义。

# android - 使用 AlarmManager 创建特定时间段的警报

> ID：11995098
> 
> 赞同：0
> 
> 时间：2012-08-16T20:40:01.007
> 
> 标签：android, broadcastreceiver, alarmmanager, alarm, android-alarms

有什么方法可以使用 AlarmManager 在特定时间段内激活警报？我在数据库中存储了开始时间和结束时间值。我想在开始时启动警报，这将使设备静音，并且警报应在设备音量再次正常时结束。

一种方法是在开始时间设置警报，然后在结束时间设置另一个警报。但问题是**时间段可能重叠**，如果我使用 2 个不同的警报（一个在开始时间，另一个在结束时间），则需要实施额外的逻辑。Android中是否有任何程序来应对这种情况？或者实现逻辑是克服这个问题的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:02:28.970

为什么不只是在您`Intent`的`PendingIntent`通行证中添加一个额外的“endTime”长类型来表示您想要结束警报的时间。（我假设它是重复的）然后在你的广播接收器中得到额外的，比较`System.currentTimeMillis()`，如果它小于当前时间，取消警报并退出？

# c# - 报告 Directory.GetFiles 的进度

> ID：11995100
> 
> 赞同：8
> 
> 时间：2012-08-16T20:40:05.490
> 
> 标签：c#, .net-4.0

有没有一种快速的方法可以从提供的根目录开始将每个文件（您具有读取权限）的完全限定路径加载到 a 中`string[]`？

我看到了`System.IO.Directory.GetFiles`，但是您必须在允许输入之前提供过滤器`SearchOption.AllDirectories`，所以我尝试了：

```
string[] directoryList = Directory.GetFiles(RootPath, "*.*",
                                            SearchOption.AllDirectories); 
```

`RootPath`我的有效根目录在哪里。这似乎工作正常，除了当它指向一个 29GB 的大目录/文件结构和几十万个文件时，它将我的 windows 窗体应用程序挂起很长时间。

所以我考虑通过 a 对其进行线程化，`BackgroundWorker`这样我的 GUI 就不会出现锁定，但我不确定如何报告类似这样的事情的进度 a`ProgressBar`因为它只是一个正在加载的语句，我已经没有关于预先文件总数的信息，或者它已经处理的数量等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T20:42:29.217

使用`Directory.GetFiles`，您将始终阻塞，直到所有结果都被完全处理，这在大型目录结构上可能需要很长时间。

您可以使用[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)而不是`Directory.GetFiles`. 这会将结果作为`IEnumerable<string>`数组而不是数组返回，因此您可以立即开始处理（或报告进度）结果。

否则，最好的选择是使用`Directory.GetFiles`，而不是`SearchOption.AllDirectories`。然后您可以使用[`Directory.GetDirectories`](http://msdn.microsoft.com/en-us/library/system.io.directory.getdirectories.aspx)自己处理递归，并分阶段解析结果。

# ios - 从 sqlite 读取时 UIButton 和 UILabel 显示奇怪的字符

> ID：11995102
> 
> 赞同：0
> 
> 时间：2012-08-16T20:40:14.123
> 
> 标签：ios, uilabel

我的应用程序从 SQLite 数据库读取并在 UILabel 上显示文本，但由于某些原因，出现了一个小的“矩形符号”，如图所示。当我在控制台使用NSLog打印文本时，文本正常显示，即只是打印出“Home”。（没有矩形符号）

![在此处输入图像描述](../Images/7fa524c0f48fa4e857ca4d139520746d.png)

这是我的代码：

```
NSString *text=[[NSString alloc] initWithUTF8String:(const char *)sqlite3_column_text(statement, 1)];

NSLog(text);
myLabel.text=text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:49:56.507

尝试：

```
NSLog ([NSString stringWithFormat:@"%s<--",text]); 
```

在您的控制台输出中， <-- 是否出现在文本下方的行中？如果是这样，您可能得到了一个 CR/LF 终止的字符串。

或者可能更有用，枚举字符串中的每个字符并作为十六进制值输出到控制台，然后您至少可以看到这些字符是什么（如果不是 CR/LF）。

# sql - 带有 WHERE 子句的 SQL 查询就像使用 % 通配符一样

> ID：11995108
> 
> 赞同：1
> 
> 时间：2012-08-16T20:40:44.473
> 
> 标签：sql, sql-server-2008, select, where

SQL Server 2008：我有一个使用`WHERE`子句查找具有特定字符串的行的查询。所以，假设我正在寻找带有 string 的条目`1234`，查询将类似于......

```
SELECT * FROM [table] WHERE [column] LIKE '1234' 
```

尽管此查询有效，但它也返回带有字符串`1234 [A]`和的行`1234 [B]`。

我不确定为什么它表现得好像我正在使用`%`通配符运算符。所以，我需要一些能返回严格相等的东西。我有一段时间没有使用 Microsoft SQL Server，所以我想知道我是否遗漏了一些明显的东西。我调查了一下`COLLATION`，但这似乎只处理区分大小写和口音的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:42:46.510

尝试这个：

```
SELECT * FROM [table] WHERE [column] = '1234' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:43:00.543

只需使用等号运算符

```
SELECT * FROM [table] WHERE [column] = '1234' 
```

# ruby - 运行 Ruby 脚本以输出到 Geektool 时，ANSI 转义序列消失

> ID：11995111
> 
> 赞同：4
> 
> 时间：2012-08-16T20:41:01.683
> 
> 标签：ruby, zsh, ansi, ansi-escape, geektool

我正在尝试使用 OS X 应用程序[GeekTool](http://itunes.apple.com/us/app/geektool/id456877552?mt=12)将彩色文本输出打印到我的桌面上。GeekTool 允许您将称为“geeklets”的小窗口放在桌面上。一种 Geeklet 显示 shell 命令的输出。

我想要的输出应该来自我用 ruby​​ 脚本解析的文本文件。我正在使用 ruby​​ gem [colorize](https://github.com/fazibear/colorize)在 Ruby 中的字符串周围添加 ANSI 转义序列。我的目标是将这些字符串输出到 Geektool 并显示彩色文本。

当我在终端（终端和 iTerm2，同时使用 zsh 和 bash）中运行 Ruby 脚本时，输出的颜色非常好。但是当我在 GeekTool 中运行脚本时，它不是——转义序列没有显示在输出中，但是没有颜色。我知道 GeekTool 支持 ANSI 转义序列，因为当我运行这个 shell 命令时：

```
printf "\e[0;35;49mabcd\e[0m" 
```

我得到彩色 GeekTool 输出。 `echo $SHELL`还告诉我 GeekTool 正在使用我通常使用的相同 zsh 可执行文件。但由于某种原因，我的 ruby​​ 脚本不会打印彩色输出。相反，我看到的是单色输出，但转义序列被剥离。

我的脚本使用 Ruby`puts`输出包含转义序列的字符串。我尝试切换到`p`. 在终端中运行时，这会产生具有完整转义序列的非彩色输出。在 GeekTool 中运行时，我也得到了非彩色输出，但转义序列再次消失了。

有人知道我的转义序列要去哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T04:47:54.830

我找到了解决这个问题的方法。我需要删除彩色宝石并“双重转义”转义序列。我通过用如下字符串包裹字符串来着色字符串：

```
"\\e[0;36;49m"  # example color
"\\e[0m"        # clear 
```

在构建了一个包含许多这些转义序列的大字符串之后，我做到了

```
command = "printf \"#{mystring}\n\""  # The trailing \n is needed to prevent Geektool from displaying [m at the end for some reason
exec(command) 
```

这成功了。在输出到 Geektool 时，字符串似乎被处理了两次。转义符前面`\\e`需要双反斜杠，以防止它们在第一次通过时被消耗。

# php - fputcsv 将 HTML 代码插入 csv 文件

> ID：11995117
> 
> 赞同：3
> 
> 时间：2012-08-16T20:41:59.460
> 
> 标签：php, html, excel, csv, fputcsv

我在使用 fputcsv 编写 csv 文件时遇到问题。它将页面 html 也放入 csv 文件中。我的代码有什么问题？

```
//Excel header
header("Content-Disposition: attachment; filename=\"Delivery_Reports.csv\";" );
header("Content-type: application/vnd.ms-excel");
$out = fopen("php://output", 'w');
$flag = false;
// $result = mysql_query("SELECT * FROM senderids ") or die('Query failed!');
//$sel="SELECT number as MobileNumber ,snum as Sender , msg as Subject ,crdate as Date ,status FROM savemsg WHERE userID='".$_SESSION['id']."' ".$str." ORDER BY sn DESC ";
$result = mysql_query("SELECT `count`, `dnd`, `credit`, `sender_id`, `to`, `message`, `status` FROM `reports` WHERE `unq_id` = '$dlr_id'");
while(false !== ($row = mysql_fetch_assoc($result))){
    if(!$flag){
        $list = array(
            "Total"=>"Total",
            "DND"=>"DND",
            "Credits"=>"Credits",
            "From"=>"From",
            "To"=>"To",
            "Message"=>"Message",
            "Status"=>"Status"
        );
        // display field/column names as first row
        fputcsv($out, array_keys($list), ',', '"');
        $flag = true;
    }
    // array_walk($row, 'cleanData');
    fputcsv($out, array_values($row), ',', '"');
}
fclose($out); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T22:27:22.623

您不能保证在一段代码中不会输出任何其他内容。如果此代码段之前的代码使用输出缓冲，您可以使用[ob_end_clean](http://php.net/manual/en/function.ob-end-clean.php)丢弃 HTML 。如果这段代码之后的代码导致了问题，你可以简单地调用[die](http://php.net/manual/en/function.die.php)来阻止它运行。但是，如果此代码段之前的代码直接将 HTML 输出到浏览器，或者它输出 HTML 之后的代码必须运行，那么您必须修改该代码才能解决您的问题。

正如蒂姆所提到的，[print](http://www.php.net/manual/en/function.print.php)、[echo](http://www.php.net/manual/en/function.echo.php)和输出到[伪文件](http://php.net/manual/en/wrappers.php.php) `php://output`做的事情完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T07:45:13.640

您也可以`continue`在关闭文件之前使用关键字 ( `fclose($f);`)。这也很可爱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T22:14:49.827

您还可以使用`exit;`after `fclose($out);`which 停止抓取我的 html 的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-05T11:39:28.187

我知道这是一个老问题，但它可以在 Google 中找到，所以添加这个。

如果在您尝试创建文件之前由 CMS（如 WordPress 等）输出 HTML，则在输出标题之前添加可能会有所`ob_clean();`帮助`ob_start();`。

例如：

```
function create_csv($records, $columns){
    ob_clean();
    ob_start();
    header('Content-Type: application/csv');
    header('Content-Disposition: attachment; filename="Export.csv"');
    $fp = fopen('php://output', 'w+');
    // Generate the file content.
    fclose($fp);
    die();
} 
```

# ruby-on-rails - 如何将 attr_accessible 添加到 schema.rb 中的数据库表

> ID：11995118
> 
> 赞同：0
> 
> 时间：2012-08-16T20:42:02.453
> 
> 标签：ruby-on-rails, model, attributes, schema

我在执行 rake:seed 时遇到此错误。无法批量分配受保护的属性

我知道他们是关于此错误的其他帖子，解决方案是将 attr_accessible 添加到模型中，但我不知道如何将其添加到`ActiveRecord::Schema.define`

实际上，我正在从实用书这本书中学习 Rails，我从那本书中得到了这段代码，

```
ActiveRecord::Schema.define(:version => 20120814110309) do

  create_table "products", :force => true do |t|
    t.string   "title"
    t.text     "descripton"
    t.string   "image_url"
    t.decimal  "price",      :precision => 8, :scale => 2
    t.datetime "created_at",                               :null => false
    t.datetime "updated_at",                               :null => false
  end

end 
```

我必须将 attr_accessible 添加到描述中，所以我该怎么做

更新：

我的 products.rb 已经有 attr_accessible，但它不起作用！？

```
# app/models/product.rb
class Product < ActiveRecord::Base  
    attr_accessible :descripton, :image_url, :price, :title
end 
```

更新：

*我想通了，这是一个错字问题，thanx 无论如何，它的工作，但我没有得到在 scema 中添加 attr_accessable 而不是在模型中添加它的实际解决方案。如果那是个坏主意，为什么会这样？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:47:14.500

attr_accessible 不在 schema.rb 上。它在你的模型上。根据您在上面发布的代码，您可能想要：

```
# app/models/product.rb
class Product < ActiveRecord::Base
 attr_accessible :title, :description # Add as needed
end 
```

# jquery - 添加jqueryui css后单击事件未触发

> ID：11995139
> 
> 赞同：1
> 
> 时间：2012-08-16T20:43:28.983
> 
> 标签：jquery, jquery-ui

我遇到了 jQueryUi css 的奇怪问题。一旦我引用它，一旦我添加 jqueryui css，click 事件就不会触发。

不带 jQueryUI css 的示例 ( [http://jsfiddle.net/dynamikus/CffPt/3/](http://jsfiddle.net/dynamikus/CffPt/3/) )
带 jQueryUI css 的示例 ( [http://jsfiddle.net/dynamikus/CffPt/2/](http://jsfiddle.net/dynamikus/CffPt/2/) )

有人可以帮我吗？谢谢

--编辑我正在 Windows 7/Chrome 上测试它：21.0.1180.79

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:01:15.943

这是一个 z-index 问题.. [http://jsfiddle.net/wirey00/CffPt/4/](http://jsfiddle.net/wirey00/CffPt/4/)如果您更改 z-index 它点击正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:57:13.513

当您将点击事件更改为鼠标按下事件时，它确实有效。

它似乎是z-index。将缩放元素的 z-index 更改为 99999（例如），您会注意到它会起作用。z-index 是一个样式属性，所以在这里添加 CSS 确实会搞砸你的行为 :)

[http://jsfiddle.net/3Z9yf/](http://jsfiddle.net/3Z9yf/) 你会注意到第一个按钮不起作用（默认z-index），而第二个按钮（有z-index）。

# python - Python xlwt：编写错误时使用easyxf对单元格进行样式化

> ID：11995141
> 
> 赞同：5
> 
> 时间：2012-08-16T20:43:37.340
> 
> 标签：python, styles, xlwt

我需要对通过程序创建的 xls 文件中的某些单元格和行进行样式化，但是我遇到了一些问题，可能对 xlwt easyxf 的工作方式有误解。

首先，如果我在没有值和样式的情况下写入单元格，里面的值会被删除吗？

其次，我正在尝试使用单元格的样式和值写入单元格，但我不断收到错误消息：

```
"TypeError: 'XFStyle' object is not callable". -Solved 
```

现在的问题是样式没有得到实现。写入单元格并将其输出到 xls 文件后，颜色、背景、大小、字体完全没有变化。

我尝试使用谷歌搜索并遵循其他人的示例，但无论出于何种原因，我的代码都不起作用。这里是：

```
def stylize_spreadsheet_accordingly(iFile, workbook, row_grey, row_underline, row_font_size, cells_yellow):
    #this time iFile is the file you're overwriting

    #styling stuff

    print "styling the document..."

    new_sheet.col(0).width = 256 * 18
    new_sheet.col(1).width = 256 * 69.43
    new_sheet.col(2).width = 256 * 9
    new_sheet.col(3).width = 256 * 20.71
    new_sheet.col(4).width = 256 * 8.43

    font_size_style = xlwt.easyxf('font: name Calibri, bold on, height 280;')
    font_underline_style = xlwt.easyxf('font: underline on;')
    fill_grey_style = xlwt.easyxf('pattern: back_color gray25;')
    fill_yellow_style = xlwt.easyxf('pattern: back_color yellow;')

    iBook = open_workbook(iFile)
    iSheet = iBook.sheet_by_index(0)

    for row_index in range(iSheet.nrows):
        if row_index in row_grey:
            for col_index in range(iSheet.ncols):
                new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, fill_grey_style)
        if row_index in row_underline:
            for col_index in range(iSheet.ncols):
                new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, font_underline_style)
        if row_index in row_font_size:
            for col_index in range(iSheet.ncols):
                new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, font_size_style)
    for each in cells_yellow:
        new_sheet.write(each[0], each[1], iSheet.cell(each[0],each[1]).value, fill_yellow_style)

    return workbook 
```

`new_sheet`是我在另一个函数中创建的全局变量，它代表我添加到 xlwt 工作簿中的工作表。我传入的工作簿是应该包含`new_sheet`. 我可能过于复杂或不道德地这样做，但它确实有效。

PS如果有不同的方式我可以做到这一点或以不同的方式将某些单元格更改为全彩色，请告诉我。再一次，谢谢。

谢谢，我将代码修复为你们所说的，TypeError 消失了，但完成后，我创建和使用的样式选项都没有通过。xls 文件仍是其默认格式。怎么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:17:00.027

你得到`'XFStyle' object is not callable`是因为你像一个函数一样调用它，而不是仅仅将它传递给`sheet.write`例如

代替

```
new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, fill_grey_style()) 
```

采用

```
new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, fill_grey_style) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:17:34.190

您正在创建样式，然后尝试调用它们。

例如：

```
font_size_style = xlwt.easyxf('font: name Calibri, bold on, height 280;')
...
new_sheet.write(row_index,col_index, iSheet.cell(row_index,col_index).value, fill_grey_style()) 
```

注意这一点：

```
fill_grey_style() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-04T08:05:39.730

以下代码段可能会对您有所帮助，我使用此代码用灰色填充列

```
dep_style = xlwt.easyxf('font: bold on,height 200;''align: horiz left;''borders: left 
thin, right thin, top thin, bottom thin')

import xlwt
pattern = xlwt.Pattern()
pattern.pattern = xlwt.Pattern.SOLID_PATTERN
pattern.pattern_fore_colour = xlwt.Style.colour_map['gray25']
dep_style.pattern = pattern
sheet1.write_merge(s2,s2,0,int(count[0])+13,dep_data['department_name'],dep_style) 
```

上面的代码给了我灰色的行，并附有名称。**您可以根据需要更改此代码**

# python - 用pyplot在不等轴上绘制圆

> ID：11995148
> 
> 赞同：11
> 
> 时间：2012-08-16T20:43:46.677
> 
> 标签：python, matplotlib

我想在自动缩放的 pyplot 生成的图形上绘制一个圆圈。当我跑

```
ax.get_aspect() 
```

希望有一个值可以用来操纵椭圆的轴，pyplot 返回：

```
auto 
```

这不太有用。您建议在不等轴的 pyplot 图上绘制圆的方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-07T08:05:12.713

这个问题已经有一年多了，但我也有这个问题。我需要将圆添加到 matplotlib 图中，并且我希望能够使用数据坐标指定圆在图中的位置，并且我不希望圆半径随着平移/缩放而改变（或者更糟的是圆变成了椭圆）。

我发现的最好和最简单的解决方案是简单地绘制一条带有单点的曲线并包含一个圆形标记：

```
ax.plot(center_x,center_y,'bo',fillstyle='none',markersize=5) 
```

这给出了一个漂亮的、固定大小的蓝色圆圈，没有填充！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T08:13:37.510

这确实取决于您想要它的用途。

当纵横比为自动时，在数据坐标中定义一个圆圈的问题在于，您将能够调整图形（或其窗口）的大小，并且数据比例会很好地拉伸。不幸的是，这也意味着您的圆不再是圆，而是椭圆。

有几种方法可以解决这个问题。首先，也是最简单的，您可以修复纵横比，然后在数据坐标中的绘图上画一个圆圈：

```
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = plt.axes()

ax.set_aspect(1)
theta = np.linspace(-np.pi, np.pi, 200)
plt.plot(np.sin(theta), np.cos(theta))

plt.show() 
```

![数据坐标圈](../Images/4518bdebc728ea086451934b9414da53.png)

有了这个，您将能够像往常一样缩放和平移，但形状将始终是圆形。

如果您只想在图形上放置一个圆，与数据坐标无关，这样轴的平移和缩放不会影响圆上的位置和缩放，那么您可以执行以下操作：

```
import matplotlib.patches as mpatches
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = plt.axes()
patch = mpatches.Circle((325, 245), 180, alpha=0.5, transform=None)
fig.artists.append(patch)

plt.show() 
```

![设备坐标圆](../Images/0c3b9aa9782a55a9ec21a6b863663b81.png)

这是相当高级的 mpl，但即便如此，我认为它还是相当可读的。

高温下，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T17:54:18.157

在@user3208430 的基础上，如果您希望圆始终出现在轴中的同一位置（无论数据范围如何），您可以通过*transform*使用轴坐标定位它：

```
ax.plot(.94, .94, 'ro', fillstyle='full', markersize=5, transform=ax.transAxes) 
```

其中 x 和 y 介于 [0 和 1] 之间。此示例将标记放置在坐标区的右上角。

# ios - 旋转时 UIPopover 崩溃

> ID：11995149
> 
> 赞同：0
> 
> 时间：2012-08-16T20:43:46.417
> 
> 标签：ios, ipad, uipopovercontroller

我有一个通用应用程序，可以在操作表中显示按钮。

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:[dataObj.preferences objectForKey:@"appts_name"], @"Reserve", nil];
[actionSheet showInView:self.view]; 
```

在 iPad 上自动更改为`UIPopoverController`. 这显示并运行良好，但是如果我在 iPad 上显示上述弹出窗口并更改方向然后点击其中一个按钮，它会在我想要显示另一个弹出窗口的那个按钮方法中崩溃，说

```
-[UIPopoverController presentPopoverFromRect:inView:permittedArrowDirections:animated:]: Popovers cannot be presented from a view which does not have a window. 
```

如果我不旋转 iPad 而只是点击一个按钮，它会执行相同的代码就好了。

```
UINavigationController *navBar = [[UINavigationController alloc] initWithRootViewController:addItemView];
popOver = [[UIPopoverController alloc] initWithContentViewController:navBar];
if (viewPopover) {
    if (self.view.window != nil) {
        CLS_LOG(@"Rect: %@ - View: %@", NSStringFromCGRect(rectPopover), viewPopover);
        [popOver presentPopoverFromRect:rectPopover inView:viewPopover permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
} else {
    // We should NEVER get here but just incase. I don't want the app to crash.
    CLS_LOG(@"No viewPopover or rectPopover - %@ - %@", viewPopover, NSStringFromCGRect(rectPopover));
} 
```

从 CLS_LOG 记录

```
-[AppointmentViewController showAppointmentAdd] line 148 $ Rect: {{341.333, 592}, {1, 1}} - View: <UIScrollView: 0xc8c5d40; frame = (1044 0; 768 872); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0xc8c7780>; contentOffset: {-0, 188}> 
```

`rectPopover`并且`viewPopover`是合法的。为什么popOver崩溃说它不在窗口中，但只有当我旋转设备时？

编辑：我发现这是因为在方向更改后，我正在重新加载视图以考虑新尺寸。看来这在窗口中优先。它似乎也只影响 UIActionSheet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:11:40.833

您是否尝试过在旋转后重新显示弹出框？

您知道旋转发生的时间（`willRotateToInterfaceOrientation:`），然后您可以根据它的新锚点重新显示弹出控制器。

# jsf - Myfaces Tomahawk：panelTab 内的内容

> ID：11995151
> 
> 赞同：0
> 
> 时间：2012-08-16T20:43:56.307
> 
> 标签：jsf, jakarta-ee, myfaces, tomahawk

我很好奇让内容（例如 div）占据 t:panelTabbedPane 内 100% 的 t:panelTab 的正确方法是什么。似乎内容在无法指定样式的 div 或 span 中呈现。我能够做到这一点的唯一方法是使用绝对布局。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:48:32.690

您是否尝试使用`tabContentStyleClass`for 属性提供自定义 CSS 类`<t:panelTabbedPane>`？假设您调用它`ownStyleClass`，窗格将呈现为

```
<tr class="myFaces_panelTabbedPane_contentRow">
    <td class="myFaces_panelTabbedPane_pane ownStyleClass" colspan="8"> 
```

这应该允许任何自定义布局。

# r - 将 data.frame 转换为稀疏表（带有 NA）

> ID：11995152
> 
> 赞同：0
> 
> 时间：2012-08-16T20:43:56.843
> 
> 标签：r, dataframe

> **可能重复：**
> [按因子拆分和组合成新列](https://stackoverflow.com/questions/11954948/split-and-combine-by-factor-into-new-columns)

在此处使用示例数据是为了便于说明。我有完整的希腊字母作为我的样本集。我也有完整的拉丁字母。

我目前正在使用一个看起来像这样的表。这将是一个小子集。我的实际数据是数千行的数百个。

```
sample  call    letter
alpha   y       A
alpha   y       D
alpha   n       C
beta    y       F
beta    y       B
gamma   n       F
gamma   y       B
gamma   n       A
delta   m       E
epsilon n       F
epsilon n       C
epsilon n       B
zeta    m       A
zeta    y       D 
```

我想制作一个最终表格，其中希腊字母是行，列是拉丁字母，我只会在可用时提供“调用”，否则 NA 或 0 可能是条目。

最终结果会是这样。

```
 A   B   C   D   E   F
alpha   y   NA  n   y   NA  NA
beta    NA  y   NA  NA  NA  y
gamma   n   y   NA  NA  NA  n
delta   NA  NA  NA  NA  m   NA
epsilon NA  n   n   NA  NA  n
zeta    m   NA  NA  y   NA  NA 
```

知道如何实现这样的目标吗？甚至是指向什么会很棒的一般指针。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:47:25.110

`dcast`从`reshape2`包装中可以很好地做到这一点

```
library(reshape2)
dat <- structure(list(sample = c("alpha", "alpha", "alpha", "beta", "beta", "gamma", "gamma", "gamma", "delta", "epsilon", "epsilon", "epsilon", "zeta", "zeta"), call = c("y", "y", "n", "y", "y", "n", "y", "n", "m", "n", "n", "n", "m", "y"), letter = c("A", "D", "C", "F", "B", "F", "B", "A", "E", "F", "C", "B", "A", "D")), .Names = c("sample", "call", "letter"), class = "data.frame", row.names = c(NA, -14L))

dcast(dat, sample ~ letter, value.var='call')

   sample    A    B    C    D    E    F
1   alpha    y <NA>    n    y <NA> <NA>
2    beta <NA>    y <NA> <NA> <NA>    y
3   delta <NA> <NA> <NA> <NA>    m <NA>
4 epsilon <NA>    n    n <NA> <NA>    n
5   gamma    n    y <NA> <NA> <NA>    n
6    zeta    m <NA> <NA>    y <NA> <NA> 
```

# ruby - Sinatra/Ruby - 内部服务器错误：US-ASCII 中的无效字节序列。由带有特殊字符的数组引起

> ID：11995158
> 
> 赞同：2
> 
> 时间：2012-08-16T20:44:40.380
> 
> 标签：ruby, arrays, utf-8, character-encoding, sinatra

我正在使用 Sinatra 构建一个应用程序。该应用程序运行良好，除非我最近将一个元素添加到具有特殊字符 (Yóü) 的数组中。

```
@peeps = ["Joe", "James", "Phil", "Jane", "Yóü"] 
```

我将这个数组用于许多事情，但我不确定是否需要将它们包含在这篇文章中。当我运行我的应用程序时，我的浏览器中出现以下错误：

```
Internal Server Error: invalid byte sequence in US-ASCII 
```

在我的终端窗口中，我在运行后看到以下内容`ruby app.rb`

```
app.rb:34: invalid multibyte char (US-ASCII)
app.rb:34: invalid multibyte char (US-ASCII)
app.rb:34: syntax error, unexpected $end, expecting ']' 
```

此外，为了它的价值，我通常使用[shotgun](http://rtomayko.github.com/shotgun/)来运行我的服务器，因为我可以进行更改并刷新页面。当我运行时显示此错误`shotgun app.rb`

```
[2012-08-16 21:36:37] ERROR ArgumentError: invalid byte sequence in US-ASCII
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rack-1.4.1/lib/rack/utils.rb:182:in `gsub'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rack-1.4.1/lib/rack/utils.rb:182:in `escape_html'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/loader.rb:76:in `format_error'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/loader.rb:52:in `proceed_as_parent'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/loader.rb:28:in `call!'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/loader.rb:18:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/favicon.rb:12:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/shotgun-0.9/lib/shotgun/static.rb:14:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
    /Users/me/.rvm/gems/ruby-1.9.3-p125@rails3tutorial2ndEd/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    /Users/me/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
    /Users/me/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
    /Users/me/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-27T16:16:50.080

最终对我有用的是在 config.ru 的顶部添加以下行：

```
Encoding.default_external = Encoding::UTF_8 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T20:48:32.687

您尚未发布所有代码，但您可能需要将文件标记为 UTF-8，您可以使用顶部的“魔术注释”来完成：

```
# encoding: utf-8 
```

这是对这个问题的一个[很好的解释](http://graysoftinc.com/character-encodings/ruby-19s-three-default-encodings)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T15:51:26.877

我已经有一个单文件应用程序，`# encoding: utf-8`并且该错误仍然存​​在。

帮助我的是创建`config.ru`文件：

```
require File.expand_path '../my_app.rb', __FILE__
run Sinatra::Application 
```

# ravendb - 如何将此 SQL 查询转换为 Raven Map/Reduce 查询？

> ID：11995159
> 
> 赞同：0
> 
> 时间：2012-08-16T20:44:40.913
> 
> 标签：ravendb

继我之前的问题之后，[在 RavenDB 中何时评估 groupby 查询？](https://stackoverflow.com/questions/11963777/ravendb-when-is-a-groupby-query-evaluated)我决定将数据完全重组为理论上更易于查询的格式。

现在已经创建了新的数据结构，我正在努力寻找如何查询它。

我花了 30 秒来编写以下 SQL 查询，它给出了我需要的结果：

```
 SELECT        GroupCompanyId, AccountCurrency, AccountName, DATEPART(year, Date) AS Year,
                                 (SELECT        SUM(Debit) AS Expr1
                                   FROM            Transactions AS T2
                                   WHERE        (T1.GroupCompanyId = GroupCompanyId) AND (T1.AccountCurrency = AccountCurrency) AND (T1.AccountName = AccountName) AND (DATEPART(year, 
                                                             Date) < DATEPART(year, T1.Date))) AS OpeningDebits,
                                 (SELECT        SUM(Credit) AS Expr1
                                   FROM            Transactions AS T2
                                   WHERE        (T1.GroupCompanyId = GroupCompanyId) AND (T1.AccountCurrency = AccountCurrency) AND (T1.AccountName = AccountName) AND (DATEPART(year, 
                                                             Date) < DATEPART(year, T1.Date))) AS OpeningCredits, SUM(Debit) AS Db, SUM(Credit) AS Cr
    FROM            Transactions AS T1
    WHERE        (DATEPART(year, Date) = 2011)
    GROUP BY GroupCompanyId, AccountCurrency, AccountName, DATEPART(year, Date)
    ORDER BY GroupCompanyId, AccountCurrency, Year, AccountName 
```

到目前为止，我得到了如下的 Map/Reduce，Studio 似乎给出了正确的结果 - 即它分解并按日期对数据进行分组。

```
public Transactions_ByDailyBalance()
    {
        Map = transactions => from transaction in transactions
                              select new
                                     {
                                         transaction.GroupCompanyId,
                                         transaction.AccountCurrency,
                                         transaction.Account.Category,
                                         transaction.Account.GroupType,
                                         transaction.AccountId,
                                         transaction.AccountName,
                                         transaction.Date,
                                         transaction.Debit,
                                         transaction.Credit,
                                     };
        Reduce = results => from result in results
                            group result by new
                                            {
                                                result.GroupCompanyId,
                                                result.AccountCurrency,
                                                result.Category,
                                                result.GroupType,
                                                result.AccountId,
                                                result.AccountName,
                                                result.Date,
                                            }
                            into g
                            select new
                                   {
                                       GroupCompanyId = g.Select(x=>x.GroupCompanyId).FirstOrDefault(),
                                       AccountCurrency = g.Select(x=>x.AccountCurrency).FirstOrDefault(),
                                       Category=g.Select(x=>x.Category).FirstOrDefault(),
                                       GroupType=g.Select(x=>x.GroupType).FirstOrDefault(),
                                       AccountId = g.Select(x=>x.AccountId).FirstOrDefault(),
                                       AccountName=g.Select(x=>x.AccountName).FirstOrDefault(),                                           
                                       Date=g.Select(x=>x.Date).FirstOrDefault(),
                                       Debit=g.Sum(x=>x.Debit),
                                       Credit=g.Sum(x=>x.Credit)
                                   };

        Index(x=>x.GroupCompanyId,FieldIndexing.Analyzed);
        Index(x=>x.AccountCurrency,FieldIndexing.Analyzed);
        Index(x=>x.Category,FieldIndexing.Analyzed);
        Index(x=>x.AccountId,FieldIndexing.Analyzed);
        Index(x=>x.AccountName,FieldIndexing.Analyzed);
        Index(x=>x.Date,FieldIndexing.Analyzed);
    }
} 
```

但是，我不知道如何一次性查询数据。我需要期初余额和期间余额，所以我最终编写了这个以帐户为参数的查询。继 Oren 对我上一个问题的评论之后，我将 Linq 与 Lucene 查询混合在一起，重写了查询，我基本上再次以混合查询结束。

尽管我在上面的 SQL 查询中显示我按年份过滤，但实际上我需要能够确定任何一天的当前余额。

```
 private LedgerBalanceDto GetAccountBalance(BaseAccountCode account, DateTime periodFrom, DateTime periodTo, string queryName)
    {
        using (var session = MvcApplication.RavenSession)
        {
            var query = session.Query<Transactions_ByDailyBalance.Result, Transactions_ByDailyBalance>()
                .Where(c=>c.AccountId==account.Id && c.Date>=periodFrom && c.Date<=periodTo)
                .OrderBy(c=>c.Date)
                .ToList();

            var debits = query.Sum(c => c.Debit);
            var credits = query.Sum(c => c.Credit);

            var ledgerBalanceDto = new LedgerBalanceDto
                                   {
                                       Account = account,
                                       Credits = credits,
                                       Debits = debits,
                                       Currency = account.Currency,
                                       CurrencySymbol = account.CurrencySymbol,
                                       Name = queryName,
                                       PeriodFrom = periodFrom,
                                       PeriodTo = periodTo
                                   };

            return ledgerBalanceDto;
        }
    } 
```

要求的结果：

```
 GroupCompanyId  AccountCurrency AccountName Year    OpeningDebits   OpeningCredits  Db  Cr
    Groupcompanies-2    EUR Customer 1  2011    148584.2393 125869.91   10297.6891  28023.98
    Groupcompanies-2    EUR Customer 2  2011    236818.0054 233671.55   50959.85    54323.38
    Groupcompanies-2    USD Customer 3  2011    69426.11761 23516.3776  10626.75    0
    Groupcompanies-2    USD Customer 4  2011    530587.9223 474960.51   97463.544   131497.16
    Groupcompanies-2    USD Customer 5  2011    29542.391   28850.19    4023.688    4231.388 
```

任何建议将不胜感激

杰里米

回答评论

我基本上最终做了几乎同样的事情。实际上，我编写了一个仅在两次点击中执行此操作的索引——一次用于期初余额，另一次用于期间余额。这对于按帐户名称、类别等进行分组几乎是即时的。

但是，我现在的问题是获取个人帐户的每日运行余额。如果我记下帐户和期间的所有数据，这不是问题 - 我可以汇总客户端的余额，但是，当数据被分页时，借方和贷方按日期和 ID 分组，分页跨越日期，因此期初/期末余额不正确。

```
Page 1

Opening balance until 26/7/12 = 0

25/7/12    Acct1       Db 100       Cr 0     Bal  +100    Runn Bal +100
26/7/12    Acct1       Db 100       Cr 0     Bal  +100    Runn Bal +200
26/7/12    Acct1       Db 200       Cr 0     Bal  +200    Runn Bal +400

Closing balance until 26/7/12 = +400

Page 2
Opening balance until 26/7/12 = +450 (this is wrong - it should be the balance at the end of Page 1, but it is the balance until the 26/7/12 - i.e. includes the first item on Page 2)
26/7/12    Acct1       Db 50        Cr 0     Bal  +50     Runn Bal +500 (should be +450)
27/7/12    Acct1       Db 60        Cr 0     Bal  +60     Runn Bal +560 (should be +510) 
```

我只是想不出一个算法来处理这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:08:29.977

嗨，这是我最近在使用 RavenDb 时也遇到的一个问题，当时我需要在任何可以想象的日期检索滚动余额。我从来没有找到一种一次性完成所有这些的方法，但我设法减少了为了计算滚动余额而需要撤回的文档数量。

为此，我编写了多个 map reduce 索引来总结特定时期内的交易价值：

1.  我的第一个总结了按年份分组的所有交易的价值
2.  My Second index 总结了 Day 级别所有交易的价值

因此，如果有人想要他们截至 2012 年 6 月 1 日的账户余额，我会：

1.  使用年份级别 Map-reduce 索引获取截至 2012 年的交易价值并将它们加在一起（所以如果交易在 2009 年开始被捕获，我应该撤回 3 个文档）
2.  使用 Day 级别 Map-reduce 索引获取年初和 6 月 1 日的所有文档

然后我将天总数添加到我最终滚动余额的年度总数中（我也可以每月减少地图，但没有打扰）。

无论如何不如 SQL 快，但它是我能想出的最好的选择，以避免带回每笔交易

# java - 在 java 中，何时使用 StringUtils.containsIgnoreCase 与 equalsIgnoreCase？

> ID：11995163
> 
> 赞同：0
> 
> 时间：2012-08-16T20:44:56.927
> 
> 标签：java, equals, contains

我正在用 java 进行一些编码，我很好奇何时使用 StringUtils.containsIgnoreCase 与 equalsIgnoreCase？什么时候使用一个比另一个更合适？实际上最大的区别是什么？谢谢大家...任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:46:58.550

如果您阅读[规范](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html)，您会看到 [`StringUtils.containsIgnoreCase()`](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#containsIgnoreCase-java.lang.CharSequence-java.lang.CharSequence-)检查一个字符串是否包含另一个字符串，同时[`StringUtils.equalsIgnoreCase()`](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#equalsIgnoreCase-java.lang.CharSequence-java.lang.CharSequence-)检查两个字符串是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:48:53.263

如果您有以下字符串：

```
String a = "ABCdefGHIjkl";
String b = "ABCDEFGHIJKL";
String c = "ABCd"; 
```

然后`a`包含`c`，但不等于`c`。`a`包含`b` *并且*等于`b`。（在这里我说“equals”，我的意思是“equalsIgnoreCase”；对于包含也是如此。）

您可以使用其中一个，具体取决于您是否希望接受部分匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:51:30.657

`StringUtils.containsIgnoreCase`: 检查一个特定的字符串是否包含另一个字符串。

例如：

```
StringUtils.contains(null, *) = false
StringUtils.contains("abc", "") = true 
```

`equalsIgnoreCase`: 检查两个字符串是否相同。

例如：

```
"Test".equalsIgnoreCase("Test") = true
"Test".equalsIgnoreCase("T") = false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:50:17.210

```
StringUtils.containsIgnoreCase 
```

来自 Apache Commons。它检查字符串是否包含搜索字符串。

```
 StringUtils.contains(null, *) = false
 StringUtils.contains(*, null) = false
 StringUtils.contains("", "") = true
 StringUtils.contains("abc", "") = true
 StringUtils.contains("abc", "a") = true
 StringUtils.contains("abc", "z") = false
 StringUtils.contains("abc", "A") = true
 StringUtils.contains("abc", "Z") = false 
```

两种方法的 API 文档：[equalsIgnoreCase](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#equalsIgnoreCase-java.lang.CharSequence-java.lang.CharSequence-)和[containsIgnoreCase](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#containsIgnoreCase-java.lang.CharSequence-java.lang.CharSequence-)

# magento - Magento：无法将数据保存在数据库上的多个表中

> ID：11995164
> 
> 赞同：0
> 
> 时间：2012-08-16T20:44:57.940
> 
> 标签：magento, ecommerce-sales

我遵循了一些建议，将一些数据从一个表复制到数据库上的另一个表，但它不起作用。

根据我收到的关于这个问题的回复：[Magento: How to save data to order_payment and quote_payment](https://stackoverflow.com/questions/11957429/magento-how-to-save-data-to-order-payment-and-quote-payment)

我尝试对 Mage/Sales/etc/Config.xml 文件执行以下操作

```
<sales_convert_order_payment>
            <cc_bankname>
                <to_quote_payment>cc_bankname</to_quote_payment>
            </cc_bankname>
</sales_convert_order_payment> 
```

和这个

```
<sales_convert_quote_payment>
            <cc_bankname>
                <to_order_payment>cc_bankname</to_order_payment>
            </cc_bankname>
</sales_convert_quote_payment> 
```

但是银行名称仅保存在 sales_flat_quote_payment 表上，而不是 sales_flat_order_payment 表上，这是我需要在订单发票和管理后端的订单/视图下显示此新数据的表。

如果我在数据库中手动输入数据（即银行名称），我可以在需要的地方显示此信息，但我无法跟踪每笔交易以在订单完成时手动输入数据，因为客户可以看到他们的订单详细信息一旦提交，他们将无法查看新数据，直到我自己这样做。

有谁知道为什么数据没有被转移到 sales_fat_order_payment 表？

我创建的新手机号码属性也有同样的问题，但我相信如果我能解决这个问题，那么我应该能够处理所有其他类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:34:12.097

该技术（使用与 Mage 相同的名称命名）不适用于 config.xml。这个怎么运作？你需要阅读 Alanstorm 写的这篇文章[http://alanstorm.com/magento_config_declared_modules_tutorial](http://alanstorm.com/magento_config_declared_modules_tutorial)

您需要通过在 app/etc/modules 中定义来创建自己的模块（当然，您应该将其命名为 Mage 以外的名称）。

例如： `app/etc/modules/Test_Sales.xml`

内容：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Test_Sales>
            <active>true</active>
            <codePool>local</codePool>
        </Test_Sales>
    </modules>
</config> 
```

`app/code/local/Test/Sales/etc/config.xml`-> 在这里定义你的新配置

在旧版本的 magento 中，销售订单以 eav 类型存储。在更高版本中，它已被扁平化。看名字：`sales_flat_quote_payment`,`sales_flat_order_payment`

Magento 始终保持其数据向后兼容，这就是它`cc_owner`在`eav_attribute`.

在您的情况下，您不需要在其中创建新值`eav_attribute`（您只需要`cc_bankname`在其中添加列`sales_flat_quote_payment`，`sales_flat_order_payment`我很确定您已经创建了该列）。

正如您之前所说，它没有保存到的`sales_flat_order_payment`问题是因为缓存问题（Magento 缓存了 config.xml 所以你需要刷新它`System > Cache Management > Configuration`）

# csv - Groovy 拆分 CSV

> ID：11995167
> 
> 赞同：4
> 
> 时间：2012-08-16T20:45:16.933
> 
> 标签：csv, groovy, split

我有一个 csv 文件（details.csv）

```
ID,NAME,ADDRESS
1,"{foo,bar}","{123,mainst,ny}"
2,"{abc,def}","{124,mainst,Va}"
3,"{pqr,xyz}","{125,mainst,IL}" 
```

当我使用时（注意：我上面还有其他闭包，它从目录中读取所有 csv 文件）

```
if(file.getName().equalsIgnoreCase("deatails.csv")) {
 input = new FileInputStream(file)
 reader = new BufferedReader(new InputStreamReader(input))
 reader.eachLine{line-> def cols = line.split(",")
 println cols.size() } 
```

而不是得到大小 3 我得到 6 值

```
1
"{foo
bar}"
"{123
mainst
ny}" 
```

spilt(",") 用逗号(,) 分割数据，但我希望我的结果为

```
1
"{foo,bar}"
"{123,mainst,ny}" 
```

我该如何解决这个关闭问题。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T20:53:45.847

编写 csv 解析器是一项棘手的工作。

我会让其他人做艰苦的工作，并使用[像 GroovyCsv 这样的东西](https://github.com/xlson/groovycsv/)

* * *

这是使用 GroovyCsv 解析它的方法

```
// I'm using Grab instead of just adding the jar and its
// dependencies to the classpath
@Grab( 'com.xlson.groovycsv:groovycsv:1.0' )
import com.xlson.groovycsv.CsvParser

def csv = '''ID,NAME,ADDRESS
1,"{foo,bar}","{123,mainst,ny}"
2,"{abc,def}","{124,mainst,Va}"
3,"{pqr,xyz}","{125,mainst,IL}"'''

def csva = CsvParser.parseCsv( csv )
csva.each {
  println it
} 
```

哪个打印：

```
ID: 1, NAME: {foo,bar}, ADDRESS: {123,mainst,ny}
ID: 2, NAME: {abc,def}, ADDRESS: {124,mainst,Va}
ID: 3, NAME: {pqr,xyz}, ADDRESS: {125,mainst,IL} 
```

因此，要获取第二行的 NAME 字段，您可以执行以下操作：

```
def csvb = CsvParser.parseCsv( csv )
println csvb[ 1 ].NAME 
```

哪个打印

```
{abc,def} 
```

当然，如果 CSV 是一个文件，你可以这样做：

```
def csvc = new File( 'path/to/csv' ).withReader {
  CsvParser.parseCsv( it )
} 
```

然后像上面那样使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:44:18.973

有两种做法。一种是使用收集

```
def processCsvData(Map csvDataMap, File file)
{

    InputStream inputFile = new FileInputStream(file);
    String[] lines = inputFile.text.split('\n')
    List<String[]> rows = lines.collect {it.split(',')}
          // Add processing logic
} 
```

这里的问题是它正在删除大括号（{}）之间的逗号，即“{foo，bar}”变成“{foo bar}”另一种使用java的方式，这很好用

```
public class CSVParser { 

    /* 
     * This Pattern will match on either quoted text or text between commas, including 
     * whitespace, and accounting for beginning and end of line. 
     */ 
    private final Pattern csvPattern = Pattern.compile("\"([^\"]*)\"|(?<=,|^)([^,]*)(?:,|$)");   
    private ArrayList<String> allMatches = null;         
    private Matcher matcher = null; 
    private int size; 

    public CSVParser() {                 
        allMatches = new ArrayList<String>(); 
        matcher = null; 
    } 

    public String[] parse(String csvLine) { 
        matcher = csvPattern.matcher(csvLine); 
        allMatches.clear(); 
        String match; 
        while (matcher.find()) { 
                match = matcher.group(1); 
                if (match!=null) { 
                        allMatches.add(match); 
                } 
                else { 
                        allMatches.add(matcher.group(2)); 
                } 
        } 

        size = allMatches.size();                
        if (size > 0) { 
                return allMatches.toArray(new String[size]); 
        } 
        else { 
                return new String[0]; 
        }                        
    }    

} 
```

希望这可以帮助！

# ruby-on-rails - Paperclip 不会仅通过控制台使用表单将头像保存给用户

> ID：11995170
> 
> 赞同：0
> 
> 时间：2012-08-16T20:45:33.327
> 
> 标签：ruby-on-rails, devise, paperclip

我是那些无法让 Rails 3.2.6、Devise 和 Paperclip 一起快乐玩耍的伤心人之一。我正在使用普通的 HTML 表单进行测试以创建用户并同时上传头像。根据日志，一切看起来都很好，但图像没有上传到 Amazon S3，图像详细信息也没有保存给用户。

这是我提交后直接来自 Heroku 日志的输出：

```
2012-08-16T20:29:16+00:00 app[web.1]: Started POST "/api/v1/users" for 90.224.160.143 at 2012-08-16 20:29:16 +0000
2012-08-16T20:29:16+00:00 app[web.1]: Processing by Api::V1::UsersController#create as JSON
2012-08-16T20:29:16+00:00 app[web.1]:   Parameters: {"email"=>"eee@eee.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "username"=>"eee", "avatar"=>#<ActionDispatch::Http::UploadedFile:0x000000060fa310 @original_filename="farmer.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"avatar\"; filename=\"farmer.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/tmp/RackMultipart20120816-2-1oz8ytm>>}
2012-08-16T20:29:16+00:00 app[web.1]: [paperclip] Saving attachments.
2012-08-16T20:29:16+00:00 app[web.1]: [paperclip] Saving attachments.
2012-08-16T20:29:16+00:00 app[web.1]: [paperclip] Saving attachments. 
```

这是我在用户模型中使用的附件代码：

```
has_attached_file :avatar,
      :storage => :s3,
      :s3_credentials => "#{Rails.root}/config/s3.yml",
      :bucket => "appprofilepictures",
      :styles => { :medium => "300x300>", :thumb => "100x100>"},
      :path => 'photos/:id/:style/:id.:extension' 
```

这是 attr_accessible：

```
attr_accessible :avatar, :firstname, :lastname, :username, :email, :password, :password_confirmation, :remember_me, :authentication_token 
```

这是我的 html 表单代码：

```
<form name='profile' action='http://example.com/users' method='post' enctype="multipart/form-data">
<input type="text" name="email" />
<input type="text" name="password" />
<input type="text" name="password_confirmation" />
<input type="text" name="username" />
<input type="file" name="avatar" />
<input type="submit" value="Send" />
</form> 
```

我可以在 Heroku 控制台中手动创建一个用户，然后上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:02:23.917

看起来您好像遗漏了几件`:has_attached_file`要上传到 S3 的内容。如果我没记错的话，我上次设置时，没有这些就不会上传。

```
:url            => ':s3_alias_url',
:s3_host_alias  => "<your-bucket-name>.s3.amazonaws.com", 
```

上次我用 S3 设置 Paperclip 时，这解决了我的问题。另请查看有关所需内容的[文档。](http://rubydoc.info/gems/paperclip/Paperclip/Storage/S3)

# haskell - 综合理解的状态如何？

> ID：11995172
> 
> 赞同：3
> 
> 时间：2012-08-16T20:45:36.977
> 
> 标签：haskell, list-comprehension

[这个提议的功能](http://hackage.haskell.org/trac/ghc/wiki/SQLLikeComprehensions)看起来真的很酷，并且该页面具有诱人的断言：“已于 2007 年 12 月 20 日集成到 GHCs HEAD 分支中”。

但我找不到更多关于它的信息。状态如何？如果它不是标准分发的一部分，那么简洁地实现相同目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:51:38.613

在那里。语言扩展名为`TransformListComp`. 语法与您链接的页面略有不同。此处描述了扩展：[http ://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#generalised-list-comprehensions](http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#generalised-list-comprehensions)

# javascript - 战斧时间表和javascript

> ID：11995180
> 
> 赞同：0
> 
> 时间：2012-08-16T20:46:21.017
> 
> 标签：javascript, jsf-2, tomahawk

我正在做一个 JSF 应用程序并提出了一个问题。是否可以将 javascript 函数与 Tomahawk 集成？具体来说，我想在用户单击 at:schedule 组件时显示一个确认对话框。我试过了

```
 submitOnClick="if(confirm('#{bundle.NewPatient}?'))return true; else return false;" 
```

但应用程序没有响应。有任何想法吗？谢谢，戴夫

# properties - Powershell v2 中的 java .properties 文件的等价物是什么？

> ID：11995181
> 
> 赞同：0
> 
> 时间：2012-08-16T20:46:44.337
> 
> 标签：properties, import, powershell-2.0

我想在一对 powershell 脚本之间包含一些公共变量，以便它们的值只设置在一个地方。是否可以在 Powershell v2 中导入某些变量的值，以便将它们设置在两个脚本都可以读取的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:23:57.227

将变量定义写入 PowerShell 脚本

```
# include.ps1
$foo = 23 
```

并将该脚本[点源](http://technet.microsoft.com/en-us/library/ee176949.aspx)到您的其他脚本中。

```
# run.ps1

# Defaults
$foo = 42
echo $foo

# Properties file...
. .\include.ps1
echo $foo 
```

* * *

输出：

```
PS C:\> **.\run.ps1**
42
23
```

# java - 在Java中插入树

> ID：11995183
> 
> 赞同：0
> 
> 时间：2012-08-16T20:47:00.990
> 
> 标签：java, tree

在 Java 文件中，我有以下代码：

```
MyTree atree = new MyTree();
atree.insert(1); 
```

这不是一棵普通的树。“atree”是根节点。这棵树中的每个节点都有 5 个孩子，最初都设置为 null。insert 的参数是您要“激活”的子项，即使其非空。所以我在 MyTree 类中有一个方法可以做到这一点：

```
public void insert(int i)
{
    if(i == 1)
    {
        MyTree current = this.getChildOne();
        current = new MyTree();
    }
} 
```

调用该函数后，我检查文件中调用它的第一个节点。

```
if(atree.getChildOne() == null)
{
    return -1;
} 
```

它总是返回负数。我怀疑插入函数实际上是在处理“atree”的副本，而不是实际的“atree”。但我并不完全确定。有人有解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:51:01.093

看起来您并没有在任何地方分配孩子。编码

```
MyTree current = this.getChildOne();
current = new MyTree(); 
```

不分配孩子一。您初始化了一个局部变量`current`，但是当方法结束时该变量会丢失。

我想你可能想在你的插入方法中做这样的事情

```
if ( i == i ) {
   this.childOne = // assign it here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:50:49.117

该行`current = new MyTree()`更改了局部变量`current`：它曾经指向指向的实例`this.getChildOne()`，现在它指向一个新实例。（所以你最好取消赋值`current = this.getChildOne()`：除非`getChildOne`有副作用，否则这个赋值是没有意义的，因为你会立即通过设置`current`其他东西来覆盖它。）

要实际修改 的某些属性`this`，您需要编写如下内容：

```
if(i == 1)
{
    this.setChildOne(new MyTree());
} 
```

# api - Facebook 广告 API 中的转化统计数据 - 累积还是特定于时间间隔？

> ID：11995185
> 
> 赞同：2
> 
> 时间：2012-08-16T20:47:08.477
> 
> 标签：api, facebook-ads-api

对于 Ads API 中的[转化统计](https://developers.facebook.com/docs/reference/ads-api/conversionstatistics/)归因值（即 post_click_1d、post_click_7d、post_click_28d、post_imp_1d、post_imp_7d、post_imp_28d），这些值是累积的，还是它们捕获相对于时间间隔的特定转化？

如果是累积的，它们会每天重置吗？
帐户、广告系列和广告级统计调用之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:08:20.847

这取决于您传递给 aggregate_days 的值。默认情况下，它的 0 是转换的总数。如果将其设置为 1，它将每天汇总，同样，每周汇总 7

请参阅文档的聚合窗口部分。 [https://developers.facebook.com/docs/reference/ads-api/conversionstatistics/](https://developers.facebook.com/docs/reference/ads-api/conversionstatistics/)

帐户、广告系列和广告级别的统计数据之间肯定存在差异。这取决于您需要哪个级别的统计信息，您是想要一个广告系列、帐户中的所有广告组，还是只需要几个特定的​​广告组。

# ruby-on-rails - 命名空间路由中的未命名空间路由

> ID：11995187
> 
> 赞同：0
> 
> 时间：2012-08-16T20:47:09.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我在一个应用程序中有几个命名空间路由。这是一个示例

```
namespace "battles" do
  resources :teams do
    resources :comments, :module => "comments", :controller=>'comments'
  end
end 
```

我的问题是我所有带有评论的资源都会路由到评论/评论控制器，但是因为 :teams 在战斗命名空间中，所以应用程序会尝试路由到战斗/评论/评论

有没有办法指定嵌套的评论资源应该路由到评论/评论控制器，而不是战斗/评论/评论控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:07:17.763

我放弃了，只是创建了一个 Battle::Comments 控制器。它会导致代码重复，因此并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:08:26.360

尝试

```
 scope :module => "battles" do  
        resources :teams do
         resources :comments, :module => "comments", :controller=>'comments'   
       end 
    end 
```

# java - JSF 按钮未显示

> ID：11995190
> 
> 赞同：0
> 
> 时间：2012-08-16T20:47:20.097
> 
> 标签：java, jsf, glassfish

我有以下代码，无论我做什么，我的网络浏览器都不会呈现任何提交按钮。

我正在使用 Eclipse 和 Glassfish。

问题还在于，当我快速尝试我的示例时，服务器有时会挂起，浏览器处于等待模式几分钟，没有任何错误或任何东西。

有时它确实会放弃页面，并且效果很好。

为什么没有显示按钮并且我的服务器如此不稳定？

```
<h:head><title>JSF 2: Using @ManagedBean</title>
<link href="./css/styles.css" 
      rel="stylesheet" type="text/css"/> 
</h:head>
<h:body>
<div align="center">
<table class="title">
  <tr><th>JSF 2: Using @ManagedBean</th></tr>
</table>
<p/>
<fieldset>
<legend>Random Results Page</legend>
<h:form>
  Press button to get one of three possible results pages.
  <br/>
  <h:commandButton value="Go to Random Page" action="#{navigator.choosePage}" />
</h:form>
</fieldset>
</div>

 package coreservlets;
import javax.faces.bean.*;

@ManagedBean
@ApplicationScoped 
public class Navigator {
  private String[] resultPages =
    { "page1", "page2", "page3" };

  public String choosePage() {
    return(RandomUtils.randomElement(resultPages));
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:36:08.440

如果您忘记声明XML 命名空间，就会发生这种情况，从而导致*无法*识别标签。这可以通过查看 JSF 源代码和生成的 HTML 输出来确认（右键单击 -在浏览器中*查看源代码*）。`h:``<h:xxx>`

 *```
<html ... xmlns:h="http://java.sun.com/jsf/html"> 
```

*或者*您在浏览器地址栏中看到的请求 URL 与映射中`<url-pattern>`的不匹配，导致标签未解析。这可以通过查看请求 URL和生成的 HTML 输出来确认。`FacesServlet``web.xml``<h:xxx>``web.xml`

```
<url-pattern>*.xhtml</url-pattern> 
```

*或者*其中的 CSS`styles.css`以某种方式隐藏了它。这可以通过检查 CSS 文件和/或使用浏览器的开发人员工具集和/或检查生成的 HTML 输出来确认。

```
input[type=submit] {
    display: none; 
} 
```

### 也可以看看：

*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 包含一个 Hello World 示例和几个教程链接

* * *

**与具体问题无关**，为特定用例使用应用程序范围的 bean 是很奇怪的。它已在所有会话中的所有用户之间共享。因此，如果该操作由世界其他地方的 webapp 用户 X 调用，则世界上所有其他 webapp 用户都会看到它被反映。您不想使用请求或查看范围 bean 吗？

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)*

# actionscript-3 - flash as3 - 防止对象被用作 dropTarget

> ID：11995196
> 
> 赞同：2
> 
> 时间：2012-08-16T20:47:56.700
> 
> 标签：actionscript-3, flash, drag-and-drop, droptarget

有没有办法防止 Flash 影片剪辑（或其子剪辑）被用作 dropTarget？我在舞台上有一些对象妨碍我确定正在放置可拖动项目的底层舞台对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:59:14.150

没有办法阻止 Flash 影片剪辑（或其子级）被用作 dropTarget。

你可以从另一端控制它：

```
function onMouseUp( e:MouseEvent ):void 
{
   var obj = evt.target;
   var target = obj.dropTarget;

   if( target != nonDropAreaMovieClip )
   {
        obj.stopDrag();
   }
} 
```

或者，如果您希望将 obj 实际拖放到 nonDropAreaMovieClip 后面的 backgroundMovieClip，您可以计算全局/局部坐标并执行以下操作：

```
function onMouseUp( e:MouseEvent ):void 
{
   var obj = evt.target;
   var target = obj.dropTarget;

   if( target != nonDropAreaMovieClip )
   {
        obj.stopDrag();
        obj.x = //calculated x
        obj.y = //calculated y
        backgroundMovieClip.addChild( obj );
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T09:11:18.150

我通过创建透明的movieclip 并将它们放置在放置区域上，或者通过创建一个透明对象作为最顶层的图层来防止子（在movieclip 中）成为dropTarget，从而解决了类似的问题。

# c# - 在“创建新行之前”确定新的自动增量主键值

> ID：11995197
> 
> 赞同：0
> 
> 时间：2012-08-16T20:48:13.200
> 
> 标签：c#, sqlite, system.data.sqlite

我有一个**Winforms TreeView**，我希望将节点数据存储到 SQLite 表中，以便下次应用程序启动时可以恢复 TreeView。我使用 TreeView 来驱动大多数桌面应用程序，并在用户单击节点时使用附加到 TreeNodes 的类中的索引指针字段来访问数据库中的其他表。

我试图避免的问题是每次创建新的 TreeNode 时 TreeView 和 TreeNode_Table 之间的大量“往返”。最好在创建TreeNode***之前*****提前知道 TreeNode_Table 中的下一个自动增量主键是**什么。这样我就可以创建节点并将其添加到树中，然后将数据一次性复制到新的 TreeNode_Table 行中。表和 TreeView 之间没有往返来同步主键、节点级别、节点索引以及其他节点和行值等值。

 *我试过：

```
string strFindLastRowInserted = @"SELECT MAX([id]) FROM [TreeNode_Table];";
var findLastRowInsertedCmd = new SQLiteCommand(strFindLastRowInserted, _cnn);
object resultObj = findLastRowInsertedCmd.ExecuteScalar();
findLastRowInsertedCmd.Dispose();
if( resultObj != null)
NodeTagDataObj.DataPtr = (long)resultObj + 1; 
```

但是，如果一些最近创建的节点/行先前已被删除，则向**MAX([id])添加一个会失败。**我正在使用**System.Data.Sqlite**库来访问数据文件。

感谢您的帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:55:26.650

最好的办法是在使用 SQLiteConnection 对象的 LastInsertRowId 属性插入新的行键后询问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:06:22.727

我最终通过在 Sqlite 的表元数据中探索来解决这个问题。***为了在创建新行之前***可靠地获取**下一个**自增键值，可以使用以下 SQL：

 *```
SELECT [seq] + 1 FROM [sqlite_sequence] WHERE [name] = 'my_table_name'; 
```

我向我的 SqliteHelper 类添加并测试了以下静态帮助器方法，一切都按预期工作，并且逻辑在最近的行删除、断开连接和应用程序重新启动后仍然存在。

### SqliteHelper.cs：

```
internal static long GetNextAutoincrementValue(SQLiteConnection cnn, 
                                               string tableName)
{
    long returnValue = -1;
    SQLiteCommand myCommand = cnn.CreateCommand();  
    myCommand.CommandText = 
        @"SELECT [seq] + 1 FROM [sqlite_sequence] WHERE [name] = @MyTableName;";

    SQLiteParameter myParam = new SQLiteParameter("@MyTableName",
                                                  System.Data.DbType.String);
    myParam.Value = tableName.Trim();
    myCommand.Parameters.Add(myParam);
    object resultObj = myCommand.ExecuteScalar();
    myCommand.Dispose();
    if( resultObj != null)
        returnValue = (long)resultObj;
    return returnValue;
} 
```

我希望其他人会发现这很有用...

-DougC**

# javascript - 对象属性在 console.log 中显示为未定义

> ID：11995200
> 
> 赞同：2
> 
> 时间：2012-08-16T20:48:29.447
> 
> 标签：javascript, safari, local-storage, local-database

我对以下代码有疑问：

```
var data = {};

$('table tr').each(function() {
  var uid = $('td a', $(this)).attr('href').split('=')[1];

  TTDB.transaction(
    function (tx) {
        tx.executeSql("SELECT id FROM players WHERE uid = ?;", [uid], function (txSub, results) {
          data[uid] = results.rows.item(0).id;
        }, TTDBerrorHandler);
    }
  );
});

$('#member tbody tr').each(function() {
  var uid = $('td a', $(this)).attr('href').split('=')[1];

  console.log(uid); // Returns correctly 1643 as shown below
  console.log(data); // Returns whole object correctly
  console.log(data['1643']); // Returns **undefined**
  console.log(data[uid]); // Returns **undefined**
  console.log(uid); // uid is still correctly set to 1643

  /* Following from Safari console
  1643
  Object
    156: 1
    217: 17
    295: 138
    579: 136
    764: 139
    774: 142
    816: 144
    826: 14
    955: 73
    1096: 137
    1133: 13
    1134: 141
    1232: 140
    1321: 11
    1643: 31
    2307: 143
    __proto__: Object
  undefined
  undefined
  1643
  */
}); 
```

这是一个可以正常工作的测试集。

```
var test = {};
test[156] = 1;
test[1643] = 31;

var testUid = 1643;

console.log(test);
console.log(test['1643']); // Returns correctly 31 as shown below
console.log(test[testUid]); // Returns correctly 31 as shown below

/* This is from Safari console
Object
  156: 1
  1643: 31
  __proto__: Object
31
31
*/ 
```

由于基本相同的测试集工作，我猜这个问题与本地数据库的异步操作有关，但我不知道如何解决这个问题......

**更新：** 澄清我的问题/我想要实现的目标。

例如，如果我有一个表，我对其进行迭代，然后想要添加一些包含数据库数据的字段。

```
<table>
  <tr><td class="uid">123<td></tr>
  <tr><td class="uid">234<td></tr>
</table> 
```

然后我想向它添加新列：

```
$('table tr').each(function() {
  var uid = $('td.uid', $(this)).text();

  TTDB.transaction(
    function (tx) {
        tx.executeSql("SELECT id FROM players WHERE uid = ?;", [uid], function (txSub, results) {
          // Problem is that because this transaction is asynchronous $(this) is 
          // not defined when this gets executed.
          $(this).append('<td class="id">' + id + '</td>'); 
        }, TTDBerrorHandler);
    }
  );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:01:54.007

如果您将日志更改为使用 JSON.stringify，您将看到该对象为空。

```
console.log(uid);
console.log(JSON.stringify(data)); // Returns empty object 
```

当您在控制台中展开对象时，使用 JSON.stringify 会强制控制台立即读取整个对象，而不是稍后读取。

您应该将您的日志记录代码放在`tx.executeSql`回调中，以便在响应到来后记录各个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:59:05.290

将代码的调用从此回调

`$('#member tbody tr').each(function() {...`

在`executeSql()`函数的回调中并完全摆脱第二个`$.each()`。

因此，对于每个获取的数据行，您将更新 HTML 表的相应行。

**更新：代码示例。**

```
$('table tr').each(function() {
  var uid = $('td a', $(this)).attr('href').split('=')[1],
  tr$ = $(this);
  TTDB.transaction(
    function (tx) {
        tx.executeSql("SELECT id FROM players WHERE uid = ?;", [uid], function (txSub, results) {
          // access tr$ here...
          // $('td', tr$).each(function() { var td$ = $(this); /* ... */ });
          data[uid] = results.rows.item(0).id;
        }, TTDBerrorHandler);
    }
  );
}); 
```

# mysql - mysql innodb 表恢复

> ID：11995205
> 
> 赞同：0
> 
> 时间：2012-08-16T20:48:36.467
> 
> 标签：mysql

背景信息：我们正在将数据库升级到 percona 构建版本，服务器挂了两个小时。然后我们取消了它，我们试图恢复表，但它没有恢复

```
 - I tried mysqlcheck -r to repair but did not work
  - I am not able to create table - it says table already exists
  - I am not able to drop table - it says table not found ...how do I resolve this 
```

# php - 在 Magento 中获取基本产品图像

> ID：11995206
> 
> 赞同：16
> 
> 时间：2012-08-16T20:48:44.463
> 
> 标签：php, image, magento, shopping-cart

我想在 Magento 中获取**基本产品图像以调整其大小并显示在购物车侧边栏中。**

不幸的是：

```
echo $this->helper('catalog/image')->init($_product, 'image')->resize(38, 38); 
```

打印 Magento 占位符图像。

为该产品正确设置了基本图像。小图像和缩略图效果很好。

不知道发生了什么。

**编辑：** 解决方案：以这种方式获取完整的产品数据：

```
$_product = Mage::getModel('catalog/product')->load($_item->getProduct()->getId()); 
```

然后根据需要使用它：

```
echo $this->helper('catalog/image')->init($_product, 'image')->resize(38, 38); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T20:54:14.817

我想你正在寻找这个：

```
echo Mage::getModel('catalog/product_media_config')
        ->getMediaUrl( $product->getImage() ); //getSmallImage(), getThumbnail() 
```

应该感谢给出这个[答案的](https://stackoverflow.com/questions/8288340/get-original-image-url-magento-1-6-1-0)[BenMarks](https://stackoverflow.com/users/833795/benmarks)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-10T08:24:48.183

**意识到！**

```
$this->helper('catalog/image')->init($_product, 'small_image')->resize(38, 38); 
```

是**object**，而不是它自己的**url 字符串。**是的，您可以直接将其与 echo 一起使用，但不应将其分配给 var。例如，这**不起作用**：

```
 $images = array();
    foreach($products as $_product){
        $images[]=$this->helper('catalog/image')->init($_product, 'small_image')
        ->resize(38, 38);
    } 
```

在 foreach 之后，您将只保存最后一个图像 url。获得真正字符串 url 的简单方法是：

```
$images = array();
foreach($products as $_product){
    $images_obj = $this->helper('catalog/image')->init($_product, 'small_image')
    ->resize(38, 38);
    $images[] = (string)$images_obj;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T20:54:04.853

尝试：

```
$this->helper('catalog/image')->init($_product, 'image')->keepFrame(false)
->constrainOnly(true)->resize(38,38); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-14T22:59:12.973

发生这种情况的原因是该`image`属性未加载到产品列表中。通常，您可以在编辑属性时更改此设置，但您无法编辑此属性的这些设置。我认为那是因为它是股票属性。

TLDR；

```
UPDATE catalog_eav_attribute SET used_in_product_listing = 1 WHERE attribute_id = 106; 
```

** 警告，在您确定实体的`image`attribute_id 为106之前，您不应执行此 ^^^ 查询！`catalog_product`

一些答案建议使用这种方法：

```
$_product = Mage::getModel('catalog/product')->load($_item->getProduct()->getId());

echo $this->helper('catalog/image')->init($_product, 'image')->resize(38, 38); 
```

你不应该这样做！这是因为您将执行完整的产品加载！这效率不高，而且很可能是在更糟糕的循环内完成的！对不起尖叫！

我通常不会容忍直接的数据库编辑，但在这种情况下，它对我来说是最简单的解决方案：

```
# First make sure we are using all the right IDs, who knows, I have seen some fubar'ed deployments

SELECT entity_type_id FROM eav_entity_type WHERE entity_type_code = 'catalog_product';
# 10
SELECT attribute_id FROM eav_attribute WHERE attribute_code = 'image' AND entity_type_id = 10;
# 106

# Now that we know the exact attribute_id....
UPDATE catalog_eav_attribute SET used_in_product_listing = 1 WHERE attribute_id = 106; 
```

现在`image`属性数据将自动加载到产品列表页面上，然后您可以像这样访问它：

```
echo $this->helper('catalog/image')->init($_product, 'image'); 
```

最好的部分是您不会循环加载整个产品！永远不要那样做

** 另外，因为我知道我会让人们说这不是 Magento 方式，替代方法是创建一个模块，该模块具有运行该命令的 SQL 设置脚本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T20:59:58.910

> 小图像和缩略图效果很好。

然后尝试使用 small_image 代替 image，如下所示：

```
echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(38, 38); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-25T07:47:41.790

**Magento 产品图像分配给变量**

`$product_image = Mage::helper('catalog/image')->init($productmodel,'small_image')->keepFrame(true)->resize(width,height).'';`

**Magento 产品图像分配给对象**

`$products[] = Mage::helper('catalog/image')->init($productmodel,'small_image')->keepFrame(true)->resize(width,height).'';`

这个对我有用....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T13:43:11.773

```
<img src='.$this->helper('catalog/image')->init($product, 'small_image')->resize(225, 225).' width=\'225\' height=\'225\'/> 
```

# c# - 为什么在使用 PLINQ Take() 时会抛出 OutOfMemoryException？

> ID：11995208
> 
> 赞同：6
> 
> 时间：2012-08-16T20:48:51.097
> 
> 标签：c#, out-of-memory, .net-4.5, plinq

在我升级到 DotNet 4.5 后，一个查询开始给我 OutOfMemoryExceptions。

（蒸馏）查询是：

```
var tests = new int[]{}
    .AsParallel()
    .GroupBy(_ => _)
    .Take(int.MaxValue)
    .ToArray(); 
```

我为任何有同样问题的人发布这个。下面我来回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:54:39.723

这似乎是框架的变化。

Take() 运算符在 TakeOrSkipQueryOperator 内部类中实现。代码中有一个分支通过 WrapHelper() 函数，该函数创建一个 FixedMapHeap 实例，该实例又创建一个大小最初传递给 Take() 的 Key 元素数组（在给定示例中将是一个 8Gb 的数组）。

# plugins - 如何从控制器中引用树形面板的 treeviewdragdrop 插件

> ID：11995212
> 
> 赞同：0
> 
> 时间：2012-08-16T20:49:00.283
> 
> 标签：plugins, extjs, treeview, extjs4, treepanel

我正在尝试在我的控制器中设置一些事件处理程序来处理 treeviewdragdrop 插件的 beforedrop 和 drop 事件。该插件属于树形视图，它是树形面板的子视图。我尝试了多种方法来引用 treeviewdragdrop 插件组件，但都没有成功。如何从控制器访问组件？

我试过以下方法：

```
'#treepanelID > treeviewdragdrop':{drop:this.afunction} 
```

这不起作用，我应该输入什么来引用组件并监听两个 afformentioend 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:51:53.653

您无法从`Controller`, 组件选择器访问插件。您只能访问`Ext.Component`s。插件不是一个并且通常会在它们添加功能时`Ext.Component`触发事件。`Ext.Component`

`treeviewdragdrop`正在触发事件`treeview`。试试这个：

```
'#treepanelID treeview': {drop: function() {}} 
```

# asp.net - 间歇性 ASP.NET WebForms 路由错误

> ID：11995213
> 
> 赞同：0
> 
> 时间：2012-08-16T20:49:12.797
> 
> 标签：asp.net, routing, webforms, iis-7.5, url-routing

我在我的生产网站中遇到了一个奇怪的问题，它的弹出有点一致，但没有已知的模式。
我的应用程序包含两个网站，一个是列出用户可以选择申请的课程的内容，另一个是在 https 下他实际申请（并支付）的地方。我在两者中都使用路由（根据客户的决定），有时，当用户从一个导航到另一个（简单的 href 链接）时，在 https 站点上“到达”时，带有课程 ID 的路由会得到丢失并直接重定向到 default.aspx 页面，然后崩溃。我正在记录错误，并且我知道路由（和路由数据）丢失是导致它的原因（路由应该是[https://shop.courses.com/ins/](https://shop.courses.com/ins/) {courseid}/ 它正在抛出[https://shop.courses.com/default.aspx](https://shop.courses.com/default.aspx)）。
在这两种情况下，我都使用 WebForms，而不是 MVC，并且如前所述，它不是恒定的。两个站点都在内部托管在 webfarm 中，运行 IIS 7.5

# ios - 在 Ubuntu 上编译 iOS 项目？

> ID：11995214
> 
> 赞同：1
> 
> 时间：2012-08-16T20:49:24.437
> 
> 标签：ios, ubuntu

是否可以在 OSX 以外的任何东西上编译我的 Objective-C iOS 特定项目？我在 Windows 上花了很多时间，如果我至少可以通过 SSH 连接到我的 Ubuntu 机器并在那里编辑代码/编译，那就不会那么麻烦了。我认为我唯一需要 Macbook 的就是编辑故事板和运行 iphone 模拟器。

我每天都有很多空闲时间，但直到晚上 7 点左右回到家才能使用我的 Macbook。有什么好的方法可以远程处理 XCode iOS 项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:55:46.127

是的，虽然你需要一个越狱设备来做这个。您还需要为[自己构建开源、非官方的工具链](http://code.google.com/p/iphonedevonlinux/)，或者[获取预编译版本。](http://xsellize.com/topic/111034-toolchain-for-ios-42/)

嘿，你甚至可以让 GCC 在你的 iPhone 上运行（这就是我使用它的方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:55:55.713

为什么不通过 SSH 连接到 Mac 并使用 Xcode 附带的命令行工具呢？

或者，更舒适的是，只需通过许多远程桌面解决方案之一远程进入 Mac（TeamViewer 可供个人免费使用，并且非常擅长通过 NAT 等，但还有很多其他选项）并使用 Xcode。

# java - Tomcat 连接池化多个数据源

> ID：11995218
> 
> 赞同：1
> 
> 时间：2012-08-16T20:50:08.180
> 
> 标签：java, tomcat, jndi

如果我在 Tomcat 中配置了 JNDI 资源，并且在我的代码中创建了两个引用相同 JNDI 资源的 DataSource 对象，这将创建两个不同的连接池，还是 DataSource 共享相同的连接池？如果可能的话，您能否提供支持您答案的资源，我已经搜索了所有内容，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:58:14.790

当您说“创建两个数据源对象”时，您实际上是在创建对象还是从 JNDI 获取它们？你能发布一段代码吗？

如果您通过 JNDI 获得数据源，它将成为您可以安全使用的池化数据源，它将是同一个池。如果您实际上是在创建新对象，那么情况就不同了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:59:10.937

他们将使用相同的连接池。

您声明的是对在 tomcat 上声明的真实连接池的引用，因此在您的情况下，您有 2 个引用。

如果您想确保通过泄漏一个数据源上的连接并显示 2 个数据源的大小来进行测试。

至于参考，请查看 oracle jndi 教程和连接池的 tomcat 文档配置。

问候

菲利普·M。

# python - Python以列表中给定元素之前的元素为目标

> ID：11995224
> 
> 赞同：1
> 
> 时间：2012-08-16T20:50:42.920
> 
> 标签：python, list, dictionary

我有一本字典：

```
d = {'a': ['Thing', 'City', 10], 'b': ['Thing' ,'City', 5]} 
```

等等和`num = 10`

我想浏览字典并检查 num 是否与字典列表中的任何其他数字匹配。如果是这样，我想获取数字之前的 2 个元素并返回所有 3 个。

例如，在这种情况下，因为`num = 10`and`a`有一个`10`，它应该返回`['Thing', 'City' 10]`。

到目前为止，我有这个：

```
for i in d.keys(): # goes through the dictionary
    for item in d[i]:
        if type(item) == int: # if the item is an int
            if num = item:
                 l.append(item)
                 #l.append the items before it 
```

我想我的问题归结为：如何在列表中的给定元素之前获取项目？所以在这种情况下，我有 10 个，但也想要 Thing 和 City。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:55:54.310

使用`in`关键字来简单的事情。

```
def get_list(num, d):
    for lst in d.values(): 
        if num in lst:
            return(lst) #or do whatever you want with the list 
```

例子：

```
d = {'a': ['Thing', 'City', 10], 'b': ['Thing' ,'City', 5]}
get_list(10, d)
>>>  ['Thing', 'City', 10]
get_list(5,d)
>>>  ['Thing', 'City', 5] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:54:01.307

尝试这样的事情：

```
for key, item in d.items():
  for idx, subitem in enumerate(item):
    if isinstance(subitem, int) and subitem == num:
      l.extend(subitem[idx-2:idx+1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:22:30.963

```
result = [v for v in d.itervalues() if v[2] == num] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:15:47.063

如果只是要比较 's 值的最后一个元素`d`，并且可能会出现多次......（但这不会进行隐式类型检查）......

```
matching = [k for k,v in d.iteritems() if v[-1] == 10]
for k in matching:
    print k, d[k] 
```

# c# - 如何编写 linq 语句以获取一组记录中的最后一条

> ID：11995228
> 
> 赞同：2
> 
> 时间：2012-08-16T20:50:57.180
> 
> 标签：c#, sql, linq, entity-framework, lambda

我有 2 个 SQL 语句，它们基本上做同样的事情，即根据一组记录的日期时间字段从表中检索最后一条记录。我正在使用数据优先的实体框架模型。我将如何使用 LINQ Lambda 函数编写这些 SQL 语句？

IE，

```
var u = db.AccessCodeUsage.Where(...).GroupBy(...) 
```

而不是

```
var u = from a in db.AccessCodeUsage
        where ...
        group by ... 
```

SQL 语句：

```
SELECT  *
FROM    AccessCodeUsage a  
WHERE   NOT EXISTS (SELECT  1 
                    FROM    AccessCodeUsage 
                    WHERE   LocationId = a.LocationId
                    AND     Timestamp > a.Timestamp)

SELECT    a.*
FROM    AccessCodeUsage a
WHERE   a.Timestamp = 
        (SELECT MAX(Timestamp)
        FROM    AccessCodeUsage
        WHERE   a.LocationId = LocationId
        AND     a.AccessCode = AccessCode
        GROUP   By LocationId, AccessCode) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T22:05:36.373

如果您需要方法调用形式，但发现它很难解决，请先使用其他语法：

```
from a in db.AccessCodeUsage
  orderby a.TimeStamp descending
  group a by a.LocationId into grp
  from g in grp select g.First(); 
```

然后通过一次一个地获取每个子句来转换为方法调用：

```
db.AccessCodeUsage
  .OrderByDescending(a => a.TimeStamp)
  .GroupBy(a => a.LocationId)
  .Select(g => g.First()); 
```

我可以从中锻炼第二个，而无需先写出 linq-syntax 表单：

```
db.AccessCodeUsage
  .OrderByDescending(a => a.TimeStamp)
  .GroupBy(a => new {a.LocationId, a.AccessCode})
  .Select(g => g.First()); 
```

（除非它不包含可能是错误的内容，因为如果时间戳不能保证唯一，则问题中给出的 SQL 可能包含一些额外的不适当结果）。

我现在无法检查生成的 SQL，但希望它的结果是等效的（如果不一定匹配）。在某些情况下，分组不能很好地转换为 SQL，但我当然不*认为*这是一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:32:14.500

我最终使用了与第一个 SQL 语句相对应的以下内容。

```
// Retrieve only the latest (greatest value in timestamp field) record for each Access Code
var last = AccessCodeUsages.Where(u1 => !AccessCodeUsages
                           .Any(u2 => u2.LocationId == u1.LocationId &&
                                      u2.AccessCode == u1.AccessCode &&
                                      u2.Timestamp > u1.Timestamp)); 
```

# html - SVG 向右对齐

> ID：11995231
> 
> 赞同：3
> 
> 时间：2012-08-16T20:51:10.313
> 
> 标签：html, text, svg

我试图证明右边的多行 svg 文本是合理的，但最后一行文本总是在右边更远，我不知道为什么。

重要的东西。

```
<svg style="border:1px solid blue;" text-anchor="end">
    <text font-size="30px">
        <tspan x="100%" dy="30">tspan line 1</tspan>
        <tspan x="100%" dy="35">tspan line 2</tspan>
        <tspan x="100%" dy="35">tspan line 3</tspan>
    </text>
</svg>
```

[http://jsfiddle.net/kCuSa/](http://jsfiddle.net/kCuSa/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:10:29.397

SVG 文本的默认设置是压缩空白。这意味着文本开头和结尾的所有空格都被删除，中间被压缩为一个空格。

`<tspan>`每个元素周围都有空格。第一个之前和最后一个之后的空格`<tspan>`被删除，所以最后一个`<tspan>`一直向右。第二个之后的空格只被压缩到一个空格（注意换行符也变成了空格）所以中间行实际上是“tspan line 2”

如果您删除 > 和 < 字符之间的所有空格，它将按照您的意愿显示。

# ruby-on-rails - 如何让这段代码更符合 Ruby 风格？

> ID：11995232
> 
> 赞同：3
> 
> 时间：2012-08-16T20:51:14.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, view-helpers, content-tag

我是 Ruby 和 Rails 的新手（从 Python 和 Python 框架切换）。我正在编写一个简单的仪表板网站，它显示有关硬盘 SMART 状态的信息。在这里，我编写了一个助手，如果它的值满足条件，则在相关 SMART 属性附近的表格单元格中显示一个徽章。起初，帮助程序代码与**清单 1**中一样简单，但后来我决定绘制特定驱动器的所有标记的摘要，以及表中各个 SMART 属性附近的标记。所以起初我添加了一个简单的方法，例如：

```
def smart_chk_device(attrs)
    attrs.each { |item| smart_chk_attr(item) }
end 
```

但是这种方法**不起作用**，它导致整个属性数组输出到结果页面。**当我按照清单 2**制作它时，它才开始起作用，但我相信那里有问题，同样的事情可以用更简单的方式完成。请告诉我正确的 Ruby 方式。

**清单 1：**

```
module HomeHelper
    def smart_chk_attr(attr)
        case attr[:id].to_i
        when 1,197
            content_tag(:span, "Warning", :class => "label label-warning") if attr[:raw].to_i > 0
        when 5,7,10,196,198
            content_tag(:span, "Critical", :class => "label label-important") if attr[:raw].to_i > 0
        end
    end
end 
```

**清单 2（有效，但我不喜欢它）：**

```
module HomeHelper
    def smart_chk_attr(attr)
        case attr[:id].to_i
        when 1,197
            return content_tag(:span, "Warning", :class => "label label-warning") if attr[:raw].to_i > 0
        when 5,7,10,196,198
            return content_tag(:span, "Critical", :class => "label label-important") if attr[:raw].to_i > 0
        else
            return String.new
        end
        return String.new
    end

    def smart_chk_device(attrs)
        output = ""
        attrs.each { |item| output << smart_chk_attr(item) }
        return output.html_safe
    end
end 
```

**attrs**是一个 Hash 数组，其中每个 Hash 包含键**:id**和**:raw**以及 SMART 属性的数字代码及其 RAW 值，两者都在字符串中。

此外，如果删除清单 2 中的最后一个“return String.new”，RoR 会抱怨。为什么会这样？“案例”不是阻止了所有可能的案例，因此控制永远不会到达函数的末尾吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:12:54.507

我相信这会以相同的方式表现，并且要短得多：

```
module HomeHelper

  def smart_chk_attr(attr)
    return '' unless attr[:raw].to_i > 0
    case attr[:id].to_i
      when 1,197
        content_tag(:span, "Warning", :class => "label label-warning")
      when 5,7,10,196,198
        content_tag(:span, "Critical", :class => "label label-important")
      else ''
    end
  end

  def smart_chk_device(attrs)
    attrs.map { |item| smart_chk_attr(item) }.join.html_safe
  end

end 
```

Ruby 方法返回最后一个表达式的值，因此摆脱整个方法的显式返回。另外，DRY：不要重复自己（attr[:raw] 检查）。在这种情况下，我在方法的开头用一个保护子句替换了那些。短路保护子句是个人喜好问题，但我喜欢它们，你会在很多 Ruby 代码中看到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:14:53.287

你的方法`smart_chk_attr(attr)`最后有一个额外的回报，它永远不会运行。

这`each`是一个枚举器，当它完成遍历您提供的每个项目时，它会返回传递给它的原始对象，而不是内部修改过的东西。

如果您使用`collect`，您将获得一个包含修改后对象的数组。如果您想要一个字符串输出，您可以使用`join`它们将它们放入一个字符串中。加入还将选择如何加入您的项目。

```
def smart_chk_device(attrs)
  attrs.collect{ |item| smart_chk_attr(item) }.join.html_safe
end 
```

# cocoa - NSUserNotification 呈现委托？

> ID：11995234
> 
> 赞同：0
> 
> 时间：2012-08-16T20:51:29.557
> 
> 标签：cocoa, notifications

当 NSUserNotification 在超时后消失时是否有一些回调？

类似于 Growl 的委托方法
`- (void) growlNotificationTimedOut:(id)clickContext;`。

我想使用这个回调来删除一些存储的数据，如果用户点击通知，就会使用这些数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:21:21.113

这可能是一种迂回的方式，但您 `NSUserNotification`有一个`presented`属性可以让您知道它是否实际显示。您可以使用它（或在通知传递后仅使用计时器）等到通知消失。

一旦您知道通知消失了，您可以检查该`activationType`属性以查看用户如何与之交互。如果他们没有触摸它，请执行您需要的任何内存删除。

检查[Mac 开发人员](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotification_Class/Reference/Reference.html)以获取更多信息。

# perl - perl 找不到模块，即使它在那里

> ID：11995236
> 
> 赞同：1
> 
> 时间：2012-08-16T20:51:33.440
> 
> 标签：perl, require

我正在尝试启动一个催化剂应用程序，但它在启动时一直失败，因为它说它找不到我使用的模块[HTML::FormHandler::Field::TextArea](https://metacpan.org/module/HTML::FormHandler::Field::TextArea)。这是它给我的错误：

```
Can't locate HTML/FormHandler/Field/Textarea.pm in @INC (@INC contains:
/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi
/usr/lib/perl5/site_perl/5.8.8
/usr/lib/perl5/site_perl /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi
/usr/lib/perl5/vendor_perl/5.8.8 /usr/lib/perl5/vendor_perl /usr/lib64/perl5/5.8.8/
x86_64-linux-thread-multi 
/usr/lib/perl5/5.8.8 .) 
```

但是，我查看了我的文件系统，并且知道该模块位于`/usr/lib/perl5/site_perl/5.8.8/HTML/FormHandler/Field/TextArea.pm`. 正如您在上面看到的，`@INC`确实包含该文件的路径。有谁知道为什么脚本找不到它？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:56:20.957

`Textarea`应该`TextArea`是我的想法。包括你的代码会钉它。

# c# - CollectionViewSource.View 为空

> ID：11995237
> 
> 赞同：0
> 
> 时间：2012-08-16T20:51:37.307
> 
> 标签：c#, wpf

**问题已解决 - 请参阅这篇文章的底部**- 我不断收到 nullreferenceexception 并且无法弄清楚原因，更不用说如何解决它了。我有两个组合框，从一个中选择一个值应该用一组相关的值填充另一个。

```
 <CollectionViewSource x:Key="branchesViewSource"
            Source="{Binding Path=Branches, Source={StaticResource contactDBDataSet}}" />
    <CollectionViewSource x:Key="ranksViewSource"
            Source="{Binding Path=RankPath, Source={StaticResource contactDBDataSet}}" />

        private void loadBranches()
    {
        DocMan.ContactDBDataSet contactDBDataSet = ((DocMan.ContactDBDataSet)(this.FindResource("contactDBDataSet")));
        // Load data into the table Branches. You can modify this code as needed.
        DocMan.ContactDBDataSetTableAdapters.BranchesTableAdapter contactDBDataSetBranchesTableAdapter = new DocMan.ContactDBDataSetTableAdapters.BranchesTableAdapter();
        contactDBDataSetBranchesTableAdapter.Fill(contactDBDataSet.Branches);
        System.Windows.Data.CollectionViewSource branchesViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("branchesViewSource")));
        branchesViewSource.View.MoveCurrentToFirst();
    } 
```

以上工作正常并填充第一个组合框。第二个代码块应该填充第二个组合框。

```
DocMan.ContactDBDataSet contactDBDataSet = ((DocMan.ContactDBDataSet)(this.FindResource("contactDBDataSet")));
            // Retrieve branchComboBox SelectedItem
            string currentItem = ((DataRowView)branchComboBox.SelectedItem)["Branch"].ToString();
            // Load data into table Ranks                 
            switch (currentItem)
            {
                case "Army":
                    rankPath = "ArmyRanks";
                    DocMan.ContactDBDataSetTableAdapters.ArmyRanksTableAdapter contactDBDataSetArmyRanksTableAdapter = new ContactDBDataSetTableAdapters.ArmyRanksTableAdapter();
                    contactDBDataSetArmyRanksTableAdapter.Fill(contactDBDataSet.ArmyRanks);
                    break;
                case "Navy":
                    rankPath = "NavyRanks";
                    DocMan.ContactDBDataSetTableAdapters.NavyRanksTableAdapter contactDBDataSetNavyRanksTableAdapter = new ContactDBDataSetTableAdapters.NavyRanksTableAdapter();
                    contactDBDataSetNavyRanksTableAdapter.Fill(contactDBDataSet.NavyRanks);
                    break;
                case blahblahblah and more cases

            }
            // Populate rankComboBox
            System.Windows.Data.CollectionViewSource ranksViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("ranksViewSource")));
            ranksViewSource.View.MoveCurrentToFirst();
        } 
```

nullreferenceexception 发生在最后一行，基本上告诉我ranksViewSource.View 为null。与第一段代码相比，branchesViewSource.View 的类型为 System.Windows.Data.BindingListCollectionView。提前非常感谢任何帮助或见解。

****_---- *_*** ----**

 **我需要创建一个新的绑定并设置绑定的源和路径，然后根据需要应用我的组合框的 SetBinding() 方法。

```
DocMan.ContactDBDataSet contactDBDataSet = ((DocMan.ContactDBDataSet)(this.FindResource("contactDBDataSet")));
            // Create binding
            Binding rankBinding = new Binding();
            // Retrieve branchComboBox SelectedItem
            string currentItem = branchComboBox.SelectedValuePath;
            // Load data into table Ranks                 
            switch (currentItem)
            {
                case "Army":
                    rankBinding.Path = new PropertyPath("ArmyRanks");
                    rankBinding.Source = this.FindResource("rankViewSource");
                    rankComboBox.SetBinding(ComboBox.ItemsSourceProperty, rankBinding);
                    DocMan.ContactDBDataSetTableAdapters.ArmyRanksTableAdapter contactDBDataSetArmyRanksTableAdapter = new ContactDBDataSetTableAdapters.ArmyRanksTableAdapter();
                    contactDBDataSetArmyRanksTableAdapter.Fill(contactDBDataSet.ArmyRanks);
                    // Populate rankComboBox
                    CollectionViewSource armyRanksViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("rankViewSource")));
                    armyRanksViewSource.View.MoveCurrentToFirst(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-01T01:22:34.333

我知道这是一个迟到的回应，但是，如果我的经历可以帮助某人度过我所经历的几天的痛苦，那么我觉得分享我的经历很有价值......

在我的代码的这个区域已经无故障运行了一段时间后，我发生了同样的错误。事实证明，在对我的数据库进行必要的重建后，我没有将试验数据重新加载到我的一张表中。由于表为空，FindResource 返回了一个有效的 CollectionViewSource，但其 View 属性为空。

我的简单解决方法是更改​​自动生成的代码以对此进行测试，并且如果 View 为空***则不***调用 MoveCurrentToFirst()：

```
CollectionViewSource myViewSource = ((CollectionViewSource)(FindResource("myViewSource")));
if (myViewSource.View != null)
    myViewSource.View.MoveCurrentToFirst(); 
```

@Archaios7，我必须承认我不明白你为什么说你“需要创建一个新的绑定并设置绑定的源和路径，然后应用我的组合框的 SetBinding() 方法”所以我不知道是否你的解决方案比我的好。（我感谢任何迫切需要向我解释这一点的人 :-)

我认为我的评论的重要性更多地在于问题的原因——我承认，这让我很惊讶——而不是我的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:27:28.140

我猜测了一下，因为其中的一些语法对我来说有点陌生，但我相信正在发生的事情是这样的......

```
<CollectionViewSource x:Key="branchesViewSource"
        Source="{Binding Path=Branches, Source={StaticResource contactDBDataSet}}" />
                           //  ^  ^ ---------------------------------------
contactDBDataSetBranchesTableAdapter.Fill(contactDBDataSet.Branches);//   |
                           //                                 ^  ^--------|
                           //             path matches so view is populated

<CollectionViewSource x:Key="ranksViewSource"
        Source="{Binding Path=RankPath, Source={StaticResource contactDBDataSet}}" />
        //                     ^  ^---------------------------------------|
contactDBDataSetArmyRanksTableAdapter.Fill(contactDBDataSet.ArmyRanks);// |
        //                                                     ^  ^-------|
        //                           These don't match so from code posted
        //                           view for ranksViewSource is still null 
```

在某些时候，您需要一些东西来填充 RankPath（目前还不清楚发布的代码是否会发生这种情况）。**

# jquery - 如何从我的选择中排除按钮？

> ID：11995240
> 
> 赞同：0
> 
> 时间：2012-08-16T20:51:41.953
> 
> 标签：jquery

我有这样的选择：

```
newElement.find(':input') 
```

结果是：

```
[input#id_sales_items_formset-0-id 1, 
select#id_sales_items_formset-0-sales_item, 
button.btn] 
```

请问如何排除`button.btn`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:52:41.363

尝试使用`.not`.

```
newElement.find(':input').not('button.btn') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:52:53.683

只需使用[not()](http://api.jquery.com/not-selector/)

```
newElement.find(':input').not('button.btn') 
```

# django-templates - 从 django 的模板文件中注销用户

> ID：11995244
> 
> 赞同：0
> 
> 时间：2012-08-16T20:52:00.460
> 
> 标签：django-templates, django-sessions

我想在我的 admin.html 中添加一个注销 href，例如：

```
<a href="/panel/">Log out</a> 
```

当用户通过单击“注销”链接重定向到 /panel/ 时，我该怎么做才能销毁会话？在模板文件中使用哪些会话变量？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:27:45.580

在你看来做这样的事情

```
#views.py
from django.contrib.auth import logout as auth_logout

def logout(request):
    response = auth_logout(request)
    return HttpResponseRedirect('http://yourdomain.com')

#urls.py
from django.conf.urls.defaults import *

urlpatterns = patterns('',
    url(r'^panel/$', 'views.logout', name='logout'),
) 
```

# php - 如何从 PHP 中的 JSON 输出中去除无效字符

> ID：11995245
> 
> 赞同：0
> 
> 时间：2012-08-16T20:52:06.463
> 
> 标签：php, json

我是一名 PHP 开发人员，正在编写将逐步执行并解析 JSON 对象的代码，以便我可以在以最终形式输出数据之前对其进行操作。这是一些 JSON 示例（它非常大，所以我删除了我需要的大部分项目，只放置了无效部分）：

```
[
    {
        "items": [
            {
                // this is valid and what I need.
            }
        ],
        "espots": [
            {
                "content": "
[TopNavigation_Appliances]
"
            }
        ]
    }, 
```

我已经有效地将 JSON 从其源中剥离，严格来说是传递给 json_decode() 的 JSON 数据。但是，我总是得到一个空结果，因为 JSON 对象有一个无效的部分，我的代码实际上并不需要它来运行。我的应用程序不需要 JSON 的整个“espots”部分，但多行“内容”部分正在搞砸 json_decode()。有没有办法通过 RegEx 或一些漂亮的 PHP 在 PHP 中从 JSON 输出中删除这些项目，以便我可以正确使用 json_decode() 检索 n 数组，然后我的代码可以按照我需要的方式操作和处理它至？

这是 JSONLint（和另一个验证器）给出的错误消息：

```
Parse error on line 263:
...         "content": "[TopNavigation_App
-----------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

我正在收集“[ 导致 JSON 无效，但我不是 Json 专家。

我尝试了以下无济于事：

*   str_replace() 在其原始格式的行上
*   trim() 和 str_replace
*   修剪（）
*   str_replace 删除换行符然后尝试 str_replace() JSON 的罪魁祸首部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:06:29.903

JSON 是作为字符串输入的吗？它不是“[”，而是方括号前面的新行，它把事情扔掉了。如果是这样，您可能可以使用 str_replace ，例如：

```
$jsonStr = str_replace("\n", '', str_replace("\r", '', $jsonStr) ); 
```

但是如果没有更多代码，很难确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:05:33.607

我通过使用以下 RegEx 去除空格然后从上面有问题的“espots”解决了这个问题：

```
preg_replace('#, "espots":.*?}\s]#', '', preg_replace('/\s+/', ' ',$nearlyThere[0])); 
```

然后在原始帖子中没有的随机无效字符串上进行次要 str_replaces 以使其 100% 有效。

# wordpress - 如何将插件添加到 Evolonix 的自定义菜单？

> ID：11995247
> 
> 赞同：0
> 
> 时间：2012-08-16T20:52:37.757
> 
> 标签：wordpress

我所在的网站正在使用来自 Evolonix [http://evolonix.com/wordpress/plugins/custom-menu/的自定义菜单](http://evolonix.com/wordpress/plugins/custom-menu/)

如何将插件添加到菜单层次结构中？

例如，url 层次结构将是：

```
Home (page)
About (page)
Resources (page)
    Support (page)
    Q & A  (plugin!) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:18:18.543

自定义菜单插件是一个简码，可以呈现您在站点中创建的任何菜单。要更改自定义菜单中显示的页面，请通过转到外观 -> 菜单来更新与其关联的菜单。在那里，您可以将自定义链接添加到指向问答插件页面的菜单。

要查看自定义菜单绑定到哪个菜单，请编辑该菜单所在的页面或发布该菜单。您应该看到简码 [menu name="xxx"... 其中 xxx 是菜单名称。

希望这能回答你的问题。

# php - 使用带有加载消息的 ob_flush 的 PHP 时间延迟

> ID：11995248
> 
> 赞同：1
> 
> 时间：2012-08-16T20:52:38.557
> 
> 标签：php, buffer, sleep

我正在运行一个访问一些 MySQL 数据库的 PHP 脚本，我需要等待几秒钟，直到上一个脚本将所有信息输入数据库。等待时间不应该很长，但以防万一服务器在休息日很慢，我使用 sleep(10) 等待 10 秒，然后再执行脚本。我想在等待 10 秒时显示“请稍候”消息，但不幸的是，该消息仅在 10 秒完成后才会显示。这就是我要这样做的方式：

```
ob_start();
echo "Please wait while your invoice is being created... </br>";
ob_flush();
sleep(10);
ob_end_clean();
echo "Success..."; 
```

根据网上的一些研究，我的印象是 ob_flush() 会在 10 秒之前输出文本，然后 ob_end_clean() 会擦除以前打印的文本，但我得到的是两个文本都是在 10 秒后显示并且第一个文本没有被删除。你们知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:56:57.553

您无法编辑已经使用 PHP 输出的任何内容，这需要重新加载页面。ob_flush 只是输出缓冲区并将其清空。ob_end_clean() 停止输出缓冲，让您再次正常输出。

要隐藏显示的文本，您将输出一个 javascript 来隐藏先前呈现的文本（最好包裹在 div 中以便于选择）。

# java - Web 应用程序中的 Jboss 共享库

> ID：11995253
> 
> 赞同：1
> 
> 时间：2012-08-16T20:52:58.280
> 
> 标签：java, jakarta-ee, web-applications, jboss, shared-libraries

我们在 jboss 4.2.3 中运行了 3 个 Web 应用程序。我发现所有这 3 个 Web 应用程序都有 95% 的通用库。我计划将常用的移动到 Jboss/server/[profile]/lib，这样我就不必在 webapps 中捆绑所有必要的。我觉得这会很好，也会减少当前使用的 perm gen 空间。

我只是想在这里问社区我所做的是标准方法还是这样做有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T00:36:40.873

我们也可以通过将公共库放在 lib 目录中来做到这一点。原来是系统管理员更新单个应用程序的噩梦。我们最终决定让战争包含所有必需的罐子，以尽量减少 SA 的额外步骤。也使 QA 部门更容易。它的工作原理取决于您的 QA 和 SA 组对它的看法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:09:04.803

只要所有 Web 应用程序使用这些公共库的相同版本并且您接受这样一个事实，即如果您出于任何原因需要升级库，那么所有 Web 应用程序都会受到影响，这对我来说似乎是合理的。
您还应该确保移动到共享位置的库在作为 Web 应用程序一部分的库中没有依赖项（避免类加载问题）

# jquery - 使用 Ajax 在 ASP .Net MVC 4 部分视图中调用登录功能

> ID：11995254
> 
> 赞同：1
> 
> 时间：2012-08-16T20:53:13.707
> 
> 标签：jquery, ajax, asp.net-mvc

在我问这个问题之前，让我澄清一下这个练习的目标是研究/概念证明，所以回答如何改进设计或者有更简单的方法来完成这个，虽然很感激，但可能无助于实现目标.

我正在修改 ASP .Net MVC 4 应用程序的模板，因此登录功能是通过 ajax 请求实现的，该请求仅更新包含登录控件的部分视图，并使页面的其余部分不受干扰。

到目前为止，我所做的如下：

我在局部视图上添加了一个表单，以便可以发布它并用按钮替换操作链接

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { ReturnUrl = ViewBag.ReturnUrl }))
{
    @Html.ValidationSummary(true)

    if (Request.IsAuthenticated)
     {
         <p>
             Hello, @Html.ActionLink(User.Identity.Name, "ChangePassword", "Account", routeValues: null, htmlAttributes: new {@class = "username", title = "Change password"})!
             @Html.ActionLink("Log off", "LogOff", "Account")
         </p>
     }
     else
     {
         <ul>
             <li>@Html.LabelFor(m => m.UserName)</li>
             <li>@Html.TextBoxFor(m => m.UserName)</li>
             <li>@Html.LabelFor(m => m.Password)</li>
             <li>@Html.PasswordFor(m => m.Password)</li>
             <li><input class="loginLink loginButton" type="button" value="Log in"/></li>
             <li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new {id = "registerLink"})</li>
         </ul>
     }
} 
```

我像这样修改了动作

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    ActionResult result = View("_LoginPartial", model);

    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl))
            {
                result = Redirect(returnUrl);
            }
            else
            {
                result = View("_LoginPartial", model);
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    return result;
} 
```

我创建了这个小的 Javascript 文件

```
var login = {
    callLogin: function () {
        var userName = $("#UserName").val();
        var password = $("#Password").val();

        var data = { UserName: userName, Password: password };
        $("#login").load("/Account/Login", data);
    }
};

$(document).ready(function () {
    $(".loginButton").click(login.callLogin);
}); 
```

登录本身有效。正在调用 POST 操作方法并验证凭据。问题是部分视图没有更新，我必须通过转到另一个页面来强制回帖，以便我可以看到部分视图，就好像用户已登录一样。

实现这一目标的缺失要素是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:05:21.497

两个可能的问题/解决方案：

1.  没有 ID 为的元素`login`- 确保您的表单具有该 ID 或将其包装在 div 中。
2.  在调用中将选择器作为 url 参数的一部分传递给`.load`- `$("section").load("/Account/Login #login", data)`- 确保正在生成 POST（它应该`data`是一个对象）
3.  使用 Firebug 或类似的工具检查网络流量，以验证是否正在进行 POST，并返回部分渲染。
4.  回退到更手动的方法：
    `$.ajax("/Account/Login", { data: data, type: 'POST', dataType: 'html' }).done(function(result) { $("#login").empty().append(result); });`

编辑：

> 我仍然想知道如果我只在成功登录尝试后返回部分视图，为什么这不起作用。

如果您仔细检查正在交换的 HTTP 标头，您会注意到检索该登录部分视图的初始调用导致 200（OK）以及登录页面，而不是预期的 401（未经授权，没有`[AllowAnonymous]`属性）。因此，响应 HTML 不是您期望的部分，而是一个完整的 html 文档。您的脚本并没有注意到这一点，并正常继续。要解决此问题，您需要修改应用程序响应未经身份验证的请求的方式。您可以做很多不同的事情，幸运的是，对于我们所有人来说，Phil Haack 不久前在博客中谈到了它们。他的帖子可以在[这里](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:26:48.290

ajax 调用应该返回需要显示的 html 内容，并且您应用负载的元素应该是将其内容替换为 ajax 响应的元素。

我想我错过了 load 的作用，因为我没有太多使用它（支持 $.post），但仍然应该返回一个视图（模型）。RedirectToAction 做同样的事情，因为它将重定向到一个动作，该动作将呈现该动作的视图（从而返回 html 内容），因此它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:02:05.247

找到并回答虽然不理想但确实很酷的答案。

事实证明，控制器需要稍微改变一下：

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    ActionResult result = View("_LoginPartial", model);

    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl))
            {
                result = Redirect(returnUrl);
            }
            else
            {
                //This is the only difference from the original action
                result = RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    return result;
} 
```

唯一的区别是，如果身份验证成功，我可以调用 RedirectToAction("index", "Home") 并且部分将正确更新。

现在这是很酷且不理想的部分。这样做的原因是，即使 RedirectToAction 方法返回完整的 Index 视图，因为我感兴趣的部分现在有一个“form”元素，并且感谢 Josh 建议在 jQuery 加载中包含一个“form”选择器方法，在完整的 Index 视图中，只有 _LoginPartial 视图被加载到“login”元素中。

我认为这并不理想，因为很多不需要的 HTML 被返回和丢弃，这是相当大的开销。此外，这还不错，如果返回的“索引”视图碰巧在其他地方有自己的表单，那么这两个表单将加载到“登录”元素中，这可以通过在其中放置更具体的选择器来轻松解决加载方法。

我仍然想知道如果我只在成功登录尝试后返回部分视图，为什么这不起作用。

# python - 从 For 循环接收内存地址

> ID：11995258
> 
> 赞同：2
> 
> 时间：2012-08-16T20:53:25.763
> 
> 标签：python, google-app-engine, jinja2

本质上，似乎我的数据是从数据库中提取的，但我收到的是地址而不是字符串本身。我试图从数据库中获得的是个人资料页面（字符串属性）的 3 个朋友的列表。

**这是我的数据库类：**

```
class Friends(db.Model):
    name = db.StringProperty(required = True)
    friend = db.StringProperty()
    added_date = db.DateTimeProperty(auto_now_add = True) 
```

**我的个人资料处理程序：**

```
class Profile(MainHandler):
    def get(self, profile_id):
        if self.user and profile_id:
            current_user = self.user.name
            name1 = ''
            friend_name = ''
            team_imagee = ''
            key = ''
            imgs  = db.GqlQuery("select * from Profile_Images WHERE name =:1", profile_id)
            team_name  = db.GqlQuery("select * from Teams WHERE name =:1", profile_id)
            team_images  = db.GqlQuery("select * from Teamimg WHERE user =:1", profile_id)
            friends  = db.GqlQuery("select * from Friends WHERE name =:1 order by added_date desc limit 10", profile_id)
            for clan in team_name:
                    name1 = clan.team_name_anycase
            for image in team_images:
                team_imagee = image.key()
            for img in imgs:
                key = img.key()
            self.render('profile.html', profile_id = profile_id,  current_user = current_user, friends = friends, team_img = team_imagee, team_name = name1, profile_image = key, username = self.user.name, email = self.user.email, firstname = self.user.first_name, last_name = self.user.last_name, country = self.user.country)
        else:
            self.redirect('/register') 
```

**还有我模板中的 for 循环：**

```
{% for friend in friends %}
    {{friend}}
    <br>
{%  endfor %} 
```

谁能告诉我为什么我有时会看到这些地址而不是对象本身（即使只是一般情况下）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:00:26.943

您还没有为您的`Friend`班级定义任何类型的默认表示。因此，Python 将使用默认的对象`__repr__`方法，该方法通常显示内存位置。

在模型上定义一个`__unicode__`方法，该方法返回您实际想要显示的字符串 - 它可能像`return self.name`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:05:13.727

在您看来，您正在返回作为[迭代器](http://nedbatchelder.com/text/iter.html)`db.GqlQuery("..")`的查询对象，并且您实际上正在打印查询返回的每个实体的默认对象字符串表示形式。

我想你应该`friend`像这样迭代和访问属性：

```
{% for friend_tmp in friends %}
    {{friend_tmp.friend}}
    <br>
{%  endfor %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T20:46:42.383

如果你使用 NDB，repr(friend) 会更有帮助。

# c# - RDLC 报告：如何在每个页面上重复组标题？

> ID：11995259
> 
> 赞同：4
> 
> 时间：2012-08-16T20:53:31.687
> 
> 标签：c#, rdlc

如何在每一页上重复一个组标题？我有一些组有很多行，因此不能放在一个页面中。我希望将组标题放在每个页面上。我可以重复报告标题以在每一页上重复，但不知道如何重复组标题。我也在研究 rdlc 报告（不是 rdl）报告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T18:07:16.460

这是解决方案。当您的报告中没有分组时，在其他页面上重复标题很容易。单击属性网格的高级模式 - 检查属性。转到右侧面板并设置`RepeatOnNewPage`为 True 和`keeptogether`“之后”。这很容易。

如果你有分组，那么它会变得有点复杂：

1.  选择 tablix 属性并选择“在每一页上重复标题行”。
2.  单击行组并选择“最上面的静态”，然后单击 - `RepeatOnNewPage`True and `KeepWithGroup`After。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:13:43.807

在 VS 2005 中，您可以单击标题并在属性网格中查看名为 RepeatOnNewPage 的属性。只需将其设置为true。（单击标题中的控件后单击最左侧的面板）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-22T01:40:06.090

我遇到过同样的问题。我找到了一个解决方案，它就像一个魅力。

首先，您需要使用高级 Tablix 成员属性。当您单击分组窗格右侧的小箭头时，高级 Tablix 成员属性变为可用。 [![在此处输入图像描述](../Images/678502e746dd721f3e2fada7fac0be72.png)](https://i.stack.imgur.com/TxT3Z.png)

然后，您需要更改 Tablix 成员的属性，如图所示。 [![在此处输入图像描述](../Images/41d6c7a121fa69da6d6db4693e2332e0.png)](https://i.stack.imgur.com/XMF8b.png)

有关更多详细信息，您可以查看下面的链接。

[https://www.sqlchick.com/entries/2011/8/20/repeating-column-headers-on-every-page-in-ssrs-doesnt-work-o.html](https://www.sqlchick.com/entries/2011/8/20/repeating-column-headers-on-every-page-in-ssrs-doesnt-work-o.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-06T03:46:36.997

查看此 url [[如何使用 Visual Studio 2010 在 Reportviewer11 中的每一页上重复表格的标题行](https://stackoverflow.com/questions/10846752/how-to-repeat-tables-header-rows-on-each-page-in-reportviewer11-with-visual-stu/16845266#16845266][1])

即在 xml 编辑器中打开 RDLC 文件（在 VS 中右键单击该文件并选择“Open With..”然后选择“XML Editor”）

搜索条目（如果您只有一个表，则可以发出此步骤）

```
<TablixRowHierarchy>
  <TablixMembers> 
```

在第一个节点（如果您的标题在表的第一行）添加以下条目 true，因此条目通常如下所示：

```
<TablixMember>
   <KeepWithGroup>After</KeepWithGroup>
   <RepeatOnNewPage>true</RepeatOnNewPage>
   <KeepTogether>true</KeepTogether>
</TablixMember> 
```

# c# - 为什么具有默认值枚举参数的泛型类的构造函数无法调用该类的受保护方法？

> ID：11995260
> 
> 赞同：7
> 
> 时间：2012-08-16T20:53:36.900
> 
> 标签：c#, generics, enums, mono

一个简单的测试用例：

```
using System;

public class Test<T>
{
    public enum TestEnum
    {
        A,
        B
    }
    public Test (TestEnum a = TestEnum.A)
    {
        DoSomething ();
    }

    protected void DoSomething()
    {
    }
} 
```

编译器（在 Unity3D 项目中使用 Mono，.NET4.0 目标）在`Test()`调用`DoSomething()`. 如果我删除了 on 的默认参数`TestEnum a`，它会构建得很好。MonoDevelop 想要调用默认参数`TestEnum<>.A`，但它不会编译，也不会`TestEnum<T>.A`（显然我不希望这些能工作，但使用 MonoDevelop 的自动完成功能就是我得到的）。

编辑：具体错误是：`the name DoSomething doesn't exists in the current context`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:41:20.633

正如评论中所说，这是一个编译器错误。

看来您的 Mono 开发环境并不真正喜欢受保护的关键字。

现在使用 {public,private}。

# jquery - jQuery 对话框中的元素未绑定到 Post 上的 ViewModel

> ID：11995263
> 
> 赞同：2
> 
> 时间：2012-08-16T20:53:45.313
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我有两个视图（创建/编辑），它们使用 EditorTemplate 获取/发布用户输入。EditorTemplate 有一个 jQuery 对话框来捕获一些附加信息。

**当我提交表单时，对话框内的元素没有发布。因此，它也搞乱了验证。验证会触发并更改元素的 css 类，但在编辑后不会变回来。**

当我将元素拉出对话框时，这些值将绑定到 ViewModel 并且验证按预期工作。

我之前将对话框中的值（使用不同的名称）复制到一些隐藏字段以绑定到 ViewModel——这有效但验证隐藏字段而不是具有实际值的字段。

**如何将元素绑定到 ViewModel 并仍然使用 jQuery 对话框？**

**代码示例**

```
@* The Create View *@

@using(Html.BeginForm())
        {
            @Html.ValidationSummary(false, "Please fix these errors:");
            @Html.EditorForModel("JobRecord", Model);
            <div id="button">
                <p>
                    @Html.Button("Create", new Dictionary<string, object>() { { "id", "create" }, { "type", "submit" } })
                    @Html.Button("Cancel", new Dictionary<string, object>() { { "id", "cancel" }, { "type", "button" } })
                </p>
            </div>
        }

@* The Edit Template *@

@model GyroviewOpsManager.UI.Models.JobRecordViewModel

@{
    Html.Assets().Styles.Add("/Content/jobrecord.css");
    Html.Assets().Styles.Add("/Content/themes/base/jquery.ui.all.css");
    Html.Assets().Scripts.Add("/Scripts/jobrecord.js");
    Html.Assets().Scripts.Add("/Scripts/jquery-ui-1.8.22.min.js");
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    <table id="jobinfo-table">
        <tr>
            <td>
                <a id="opener" href="#">Job Number...</a>
            </td>
            <td>
                @Html.TextBoxFor(model => model.JobNo)
            </td>
            ...
        </tr>
    </table>

@* The div for the jQuery dialog *@ 
<div id="dialog" title="Job Number Editor">
     <p>* All fields are required</p>
<table id="jobnumedit-table">
    <tr>
        <td>Job Number:</td>
        <td>@Html.TextBoxFor(model => model.JobNo, new { id = "jobNo", @readonly = "readonly" })</td>
    </tr>
    <tr>
        <td>Location:</td>
        <td>@Html.DropDownListFor(model => model.Location, new SelectList(Model.Locations, "LocnID", "Name", ViewBag.UserLocation), "-- Select --", new{id="Location"})</td>
    </tr>
    <tr>
        @{
            var jobNoDate = Model.JobNoDate;
            if (Model.JobNoDate == null)
            {
                jobNoDate = DateTime.Today;
            }
        }
        <td>Date:</td>
        <td>@Html.TextBoxFor(model => model.JobNoDate, new{id="JobNoDate"})</td>    
    </tr>
    ...
</table>
</div>

<script type="text/javascript">
// Dialog script
$("#dialog").dialog({
    autoOpen: false,
    height: 450,
    width: 450,
    modal: true,
    buttons: {
        "Ok": function () {
            ...
            $(this).dialog("close");
        },
        "Cancel": function () {
            $(this).dialog("close");
        }
    }
});

$("#opener").click(function () {
    ...
    return false;
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:57:05.427

我从另一个关于 SO 的问题中找到了这个问题的答案。

> 万一其他人遇到这种情况，jQuery-UI 对话框不会附加到表单，它只是在之前附加，因此要验证的元素在该部分之外

上面答案的问题标题不是很明显，所以这里是链接：[jQuery UI Dialog validation without using <form> tags](https://stackoverflow.com/questions/489722/jquery-ui-dialog-validation-without-using-form-tags)

答案包括一个样本。

# android - 错误：仍连接时调用 WebView.destroy()

> ID：11995270
> 
> 赞同：33
> 
> 时间：2012-08-16T20:54:13.677
> 
> 标签：android

当设备改变方向时出现此错误：

`Error: WebView.destroy() called while still attached`

使用此代码：

```
protected void onDestroy()
{
    if (adView != null)
    {
        adView.destroy();
    }
} 
```

这是什么原因？如何避免此错误？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-13T14:34:03.800

您首先需要分离 Webview：

```
webViewPlaceholder.removeView(myWebView);
myWebView.removeAllViews();
myWebView.destroy(); 
```

那是为我做的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-08T17:44:08.237

为避免该错误，您只需在销毁广告之前删除所有视图。

```
@Override
public void onDestroy()
{
    if (adView != null)
    {
        adView.removeAllViews();
        adView.destroy();
    }
    super.onDestroy();
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-16T02:54:16.663

```
 @Override
public void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    if (mWebView != null) {
        mWebView.destroy();
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-19T10:55:29.353

根据我的测试，这个问题在 AdMob SDK v6.4.1 和至少在 Android v4.2.2+ 中被发现。在测试[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals#android](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals#android)中提到的 AdMob 示例应用程序时（直接链接是[http://google-mobile-dev.googlecode.com/ files/Android_XML.zip](http://google-mobile-dev.googlecode.com/files/Android_XML.zip) )，关闭示例屏幕时会出现问题。

我的解决方法是：

```
 @Override
  public void onDestroy()
  {
    // Destroy the AdView.
    if (adView != null)
    {
      final ViewGroup viewGroup = (ViewGroup) adView.getParent();
      if (viewGroup != null)
      {
        viewGroup.removeView(adView);
      }
      adView.destroy();
    }

    super.onDestroy();
  } 
```

希望这对其他人有所帮助，并且 AdMob 将很快解决这个烦人的问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-19T11:15:58.423

对于您没有收到此错误，您需要有一个父布局，例如：RelativeLayout 并删除可能已在您的 layoutWebView.xml 上定义的 WebView 组件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webviewRelativeLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

<WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/headerAlarmsWebViewTxt"
    android:layout_marginBottom="0dip"
    android:hapticFeedbackEnabled="true"
    android:overScrollMode="never"
    android:scrollbarAlwaysDrawVerticalTrack="false"
    android:scrollbars="none" />

 </RelativeLayout> 
```

然后将其分配给实例变量，例如：

```
_layout = (RelativeLayout) findViewById(R.id.webviewRelativeLayout);
webView = (WebView) findViewById(R.id.webView1); 
```

在 Destroy 上做这样的事情：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    _layout.removeView(webView);
    webView.setFocusable(true);
    webView.removeAllViews();
    webView.clearHistory();
    webView.destroy();
} 
```

# sql - SQL 分组显示

> ID：11995282
> 
> 赞同：2
> 
> 时间：2012-08-16T20:55:02.733
> 
> 标签：sql

我有一个项目表，所有项目都标有相关客户的查找标签，并希望显示如下数据：

1.  客户 1
    *   项目一
    *   项目 2
    *   项目 3
2.  客户 2
    *   项目一
    *   项目 2
3.  客户 3
    *   项目一
    *   项目 2
    *   项目 3

这样我就可以从我的桌子上取回项目，并让它们按客户“分组”。你怎么称呼这个动作？是嵌套组还是类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:57:57.567

SQL 查询无法提供嵌套结果，因为您已经布置了¹。相反，您的结果集必须是平坦的，重复`Client`多次，每个项目一次。实际上，在您的 SQL 查询中，只需将类似的值排序`Client`在一起即可：`ORDER BY client`

```
Client 1    Project 1
Client 1    Project 2
Client 1    Project 3
Client 2    Project 1
Client 2    Project 2
Client 2    Project 3 
```

然后，在您的应用程序显示逻辑中，您仅`Client`在值从前一个值更改时打印新值。

### 伪代码：

```
# Start with empty last_client
last_client = ""
loop_over_rows

  if last_client is not equal to current_row->client
    print new row->client

  # Print all projects
  print row->project

  # Store the current client to compare on next loop
  last_client = row->client
endloop 
```

¹它可以通过大量疯狂的字符串操作在 SQL 中完成`UNION`，但这是一个表示问题，并且真正属于应用程序表示逻辑而不是 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:25:03.057

如果您的 RDBMS（未在您的标签中指定）支持递归 SQL，则您可以近似您尝试完成的布局。

以下 SQL 适用于 Teradata 的数据字典表。Hierarchy 列根据所有权链中数据库的深度进行偏移。从那里你应该能够接受这个概念并将其应用于你的情况。

```
WITH RECURSIVE cte (DatabaseName, Path, Parent, Level) AS
 (
  SELECT TRIM(DatabaseName)
         ,DatabaseName(VARCHAR(600))
         ,TRIM(DatabaseName)
         ,0 (BYTEINT)
  FROM   DBC.Databases d
  WHERE  DatabaseName = 'DBC'

  UNION ALL

  SELECT TRIM(d.DatabaseName)
         ,cte.Path || '.' || TRIM(d.DatabaseName)
         ,cte.Path
         ,Level + 1
  FROM   DBC.Databases d
         ,cte
  WHERE  d.OwnerName = cte.DatabaseName
  AND    d.DatabaseName <> d.OwnerName
  AND    Level < 20
 )
SELECT Level
     , SUBSTRING(CAST('' AS CHAR(60)) FROM 1 FOR Level * 2)  || DatabaseName AS Hierarchy
     , Path
     , Parent
FROM   cte
ORDER BY Path; 
```

# chef-infra - 为什么人们将 Puppet/Chef 与 Amazon Cloud Formation 结合使用，而不仅仅是使用 CloudInit？

> ID：11995290
> 
> 赞同：84
> 
> 时间：2012-08-16T20:55:34.753
> 
> 标签：chef-infra, puppet, configuration-management, cloud-init

我们计划使用非“预烘焙”的 AMI EC2 实例。即，当它们启动时，它们是 AWS linux 的裸安装。我们的引导过程将引入我们需要的各种安装，例如 python、tomcat。我们将有最少 3 个实例和最多 8 个实例。

鉴于这些要求，使用 Puppet/Chef 会比使用 Amazon Cloud Formation (CloudInit) 有用吗？

我能看到的最好的情况是，如果我们使用 Puppet，那么我们将拥有更容易审计的声明式编程，以查看发生了什么而不是脚本。CloudInit 也有一个 16k 的脚本大小限制，我们可能会也可能不会遇到。

是否有人出于特定原因从 CloudInit 迁移到 Puppet 或 Chef，他们可以在此处提供以回答我的问题？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-08-17T00:50:56.537

比 CloudInit 有优势吗？是的，当然，其中很多！

当然，您可以编写自上而下运行一次 CloudInit 脚本来配置服务器。但是当您需要更改配置文件、添加用户、更新包或安装新包时会发生什么？您最终将登录服务器或为此编写脚本，并且不可避免地会出现服务器的不协调状态。

CloudInit 不是配置管理。如果您选择开始使用配置管理软件，只需使用 cloud init 完成一项任务：引导 Puppet/Chef/other 代理。

Puppet 不仅可以帮助您自动安装包、设置 ssh 密钥或调整 Tomcat 堆。它确保了事物的状态。当开发人员在凌晨 3 点对 Java 应用程序进行故障排除并更改您的 Tomcat 配置时，Puppet 会将其更改回来。您可以快速更改所有节点或节点组的 Python 版本，如果有人安装了不同的版本，Puppet 会将其更改回来。

当您的应用程序堆栈发生更改并且您开始使用 RabbitMQ、Jetty 或新的 RDBMS 时，您可以轻松地在数万或数千台服务器上测试和部署更改。

使用配置管理软件还有许多其他原因，例如后端报告、审计和安全合规性。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-08-17T12:08:04.830

配置管理的全部意义在于以可预测和一致的方式启动机器。当您仅限于 AWS 时，CloudFormation 和 cloudinit 非常棒（尽管调试 CloudFormation 模板是一种[痛苦的体验](https://stackoverflow.com/questions/11854772/how-can-i-quickly-and-effectively-debug-cloudformation-templates)），但是对于同时使用数据中心资源和 AWS、本地测试环境或开发机器的应用程序呢？

如果你纯粹存在于 AWS 中，我想你可以只使用 cloudinit 而没有别的，但我不相信这对于任何规模的应用程序都是现实的（例如，Netflix 使用他们编写的 OSS 技术预烘焙他们的 AMI并向全世界发布；请查看[此视频](http://www.appdynamics.com/blog/cloud/appjam-2012-how-netflix-operates-monitors-in-the-cloud/)了解详情）。高可用性应用程序是跨区域的，通常基于 VPC，倾向于跨 VPN 备份到数据中心，这甚至不涉及演示、登台、测试或开发环境。作为负责配置机器的人，我*最*不想做的事情就是重复工作或在调试多种配置方法时陷入困境。

因此厨师或木偶。它们适用于 AWS 和适用于我的数据中心一样好，适用于我的运行[Vagrant](http://vagrantup.com/)的开发机器也适用于我偶尔需要的演示环境。我宁愿从 cloudinit 启动 Chef 或 Puppet，也不愿同时维护 cloudinit 和 Chef 或 Puppet。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-04T20:09:24.537

对于丢弃的服务器，比如说在自动缩放组后面运行，我会说 cloudinit 可能就足够了。linux shell 脚本或 windows powershell 脚本应该可以解决问题。

如果它是您计划管理的长期运行的服务器，则可能是厨师、木偶或码头工人可能会给您带来优势，如已接受的答案中所述。如果您在使用它们后看不到优势，那么您可能不需要该工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T22:45:53.520

根据我的经验，使用 AWS 提供的开箱即用的 GUI 工具可以轻松完成一些简单的事情，但是当您处理更复杂的事情时，您会开始发现您可以做的事情是有限的他们的工具。

此时，您可以停下来，也可以找到其他工具（如 Chef 或 Puppet）来帮助您实现更复杂的目标以及做更简单的事情。

你的选择。

# search - Solr splitOnCaseChange 在查询时？

> ID：11995291
> 
> 赞同：2
> 
> 时间：2012-08-16T20:55:39.343
> 
> 标签：search, solr, lucene, split

我在 Solr 中得到了意想不到的结果，希望有人能提供帮助。我的 schema.xml 对我正在搜索的字段（索引和查询）具有 splitOnCaseChange="1"，并且默认搜索行为是“OR”。

我有一个索引“航空公司”一词的字段。当我搜索“航空公司”时，我得到了匹配。当我搜索“航空公司别名”时，我得到了匹配（正如预期的那样，因为它是 OR）。但是，当我搜索“AirlineAlias”时，我找不到匹配项。我期待 splitOnCaseChange 属性将 AirlineAlias 查询分离为 2 个基本词。但是，如果发生这种情况，那么它应该找到与“Airline”的匹配项（即，它应该是与“Airline Alias”完全相同的查询）。

我的理解正确吗？如果是这样，关于为什么我不会得到正确的搜索结果的任何想法？

我已经从下面的 schema.xml 文件中复制了相关部分。

在此先感谢您的帮助。

```
<fieldType name="text_en_splitting" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
    <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.StopFilterFactory" 
                    ignoreCase="true" 
                    words="lang/stopwords_en.txt" 
                    enablePositionIncrements="true" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt" />
            <filter class="solr.PorterStemFilterFactory" />
    </analyzer>
            <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true" />
            <filter class="solr.StopFilterFactory" 
                            ignoreCase="true" 
                            words="lang/stopwords_en.txt" 
                            enablePositionIncrements="true" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt" />
            <filter class="solr.PorterStemFilterFactory" />
    </analyzer>
</fieldType>

<fields>

<field name="value" type="text_en_splitting" indexed="true" stored="true" multiValued="true" omitNorms="true" />
/fields> 

<solrQueryParser defaultOperator="OR" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T22:38:45.943

在 Solr 邮件列表上从 Jack Krupansky 那里得到了答案，所以在这里更新以供未来的搜索者使用……

> 只需在 ="text_en_splitting" 字段类型上设置 autoGeneratePhraseQueries="false"。当前设置将 AirlineAlias 视为引用的短语“Airline Alias”。

# sql - SQL - 将日期时间与当前日期时间进行比较

> ID：11995297
> 
> 赞同：2
> 
> 时间：2012-08-16T20:56:00.373
> 
> 标签：sql, datetime

我正在构建一个横幅旋转系统，在我的 sql 表中，我有一个日期时间字段来存储横幅何时加入打印队列，以及一个字段在它离开时存储。当我加载页面时，我需要一个查询来显示队列中的所有内容。

我试过这个没有成功：

```
SELECT * 
FROM banners 
WHERE banner_start_date <= NOW() 
    AND banner_end_date >= NOW() 
```

我将它与 PHP 一起使用。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:57:20.597

尝试

```
SELECT * FROM banners 
WHERE now() between banner_start_date AND banner_end_date 
```

# android - Android“content://gmail-ls/conversations/xxxxx@gmail.com”的正确权限是什么

> ID：11995298
> 
> 赞同：2
> 
> 时间：2012-08-16T20:56:04.410
> 
> 标签：android, permissions, gmail

我正在尝试在 Android 中阅读我的 gmail，例如：

```
Cursor cur = cr.query(Uri.parse("content://gmail-ls/conversations/xxxxx@gmail.com"), null,   null, null, null);

String[] columns = cur.getColumnNames(); 
```

并获得权限异常： Permission Denial: opening provider com.google.android.gm.provider.MailProvider from ProcessRecord{416bc448 3111:com.t2.bigbrother/10070} (pid=3111, uid=10070) 需要 com.google。 android.gm.permission.READ_GMAIL 或 com.google.android.gm.permission.WRITE_GMAIL

我试图添加权限，但仍然得到异常。我在吃冰淇淋 Sanwitch (Nexus)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:02:20.653

看起来你不能再这样做了

请参阅： [http ://productforums.google.com/forum/#!msg/gmail/XD0C4sw9K7U/LpNXxFNnfgc%5B1-25%5D](http://productforums.google.com/forum/#!msg/gmail/XD0C4sw9K7U/LpNXxFNnfgc%5B1-25%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T17:16:00.013

在这种情况下，com.google.android.gm.permission.READ_GMAIL 将是正确的权限。

# ruby - 如何将xml文件转换为yaml？

> ID：11995299
> 
> 赞同：2
> 
> 时间：2012-08-16T20:56:12.250
> 
> 标签：ruby, xml, serialization, yaml

基本上问题说明了一切，如何将 xml 文件转换为 yaml？

我试过这个：

```
require 'active_support/core_ext/hash/conversions'
require 'yaml'

file = File.open("data/mconvert.xml", "r")
hash = Hash.from_xml(file.read)
yaml = hash.to_yaml
File.open("data/mirador.yml", "w") { |file| file.write(yaml) } 
```

但是，我收到“异常解析”错误。我认为那是因为我在 xml 标记名称中有破折号，所以我将破折号替换为`dashcharacterr`但这仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:06:27.357

如果我们看一下 XML 1.0 规范，我们会看到[开始标记](http://www.w3.org/TR/xml/#dt-stag)如下所示：

```
[40]    STag ::= '<' Name (S Attribute)* S? '>' 
```

然后在其他地方，我们找到[的定义`Name`](http://www.w3.org/TR/xml/#NT-NameStartChar)：

```
[4]     NameStartChar ::= ":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
[4a]    NameChar      ::= NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040] 
```

你会注意到`-`不是`NameStartChar`这样：

```
<-vikings->1336162202</-vikings-> 
```

不是有效的 XML 和这部分代码：

```
hash = Hash.from_xml(file.read) 
```

失败是因为您的文件不包含 XML，它包含看起来像 XML 但不是真正的 XML 的文本。

修复您的`data/mconvert.xml`文件以包含真正的 XML，然后重试。

* * *

如果您在 Rails 控制台中尝试一个简单的实验，您会看到发生了什么：

```
> Hash.from_xml('<-vikings->1336162202</-vikings->')
REXML::ParseException: #<REXML::ParseException: malformed XML: missing tag start
Line: 1
Position: 33
Last 80 unconsumed characters:
<-vikings->1336162202</-vikings->> 
```

注意到“格式错误的 XML：缺少标签开始”吗？

# php - 如何修改 Moodle 1.9 中的第 0 部分？

> ID：11995306
> 
> 赞同：0
> 
> 时间：2012-08-16T20:56:51.873
> 
> 标签：php, moodle

我想在第 0 部分有资源，就像[http://moodlecommons.org](http://moodlecommons.org)网站一样。我在 \course\format\topics\format.php 找到了第 0 部分的代码，但我不知道在哪里修改该部分中出现的活动/资源类型。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:26:05.160

本节的代码似乎位于下面几行，在

```
echo '<div class="content">';
if (!is_null($thissection->name)) {
    echo $OUTPUT->heading(format_string($thissection->name, true, array('context' => $context)), 3, 'sectionname');
}

//CODE PERSONNALISE POUR CHAQUE DUT
echo '<div class="summary">';
echo '</div>'; 
```

# mysql - MySQL 不必要的索引

> ID：11995310
> 
> 赞同：1
> 
> 时间：2012-08-16T20:57:09.280
> 
> 标签：mysql

如果我有这个索引：

(col1, col2, col3)

我知道当我搜索 (col1) 时它会有所帮助；(col1, col2); (col1, col2, col3)。

如果我使用完全相同的列创建另一个索引，phpMyAdmin 会警告我可能会删除其中一个索引，因为它们是相同的。

但是，如果我有这些索引：

(col1, col2, col3)

(col1, col2)

(col1)

phpMyAdmin 根本不会警告我。

所以我的问题是，**最后两个索引在任何情况下都是必要的吗？我认为只有第一个索引就足够了**。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:06:12.003

MySQL 将只使用一个索引（最左边的）来优化搜索。从文档中引用：

"[*如果表有一个多列索引，优化器可以使用索引的任何最左边的前缀来查找行。例如，如果您在 (col1, col2, col3) 上有一个三列索引，则您已建立索引(col1)、(col1, col2) 和 (col1, col2, col3) 的搜索功能。*](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html) ”

但是，如果任何索引都是唯一的，那么它们可能有充分的理由存在。

如果在分析过程中您发现任何列经常彼此分开使用，那么您应该考虑为每个列添加单独的索引以优化这些查询。

例如

```
ALTER TABLE tablename ADD INDEX (col1), ADD INDEX (col2), ADD INDEX (col3); 
```

# arrays - 在 Perl 中，如何将未知长度的文件读入多个散列中以存储在数组中以备后用？

> ID：11995313
> 
> 赞同：0
> 
> 时间：2012-08-16T20:57:17.140
> 
> 标签：arrays, perl, hash

我有一个看起来有点像这样的配置文件：

```
add
    1
    2
concatenate
    foo
    bar
    blat 
```

我想要做的是把它变成像`%hash = (name=>"add", args=> [1,2])`etc这样的哈希，并将哈希引用推送到一个数组中。遍历文件并创建每个散列似乎很简单，除了在命名这些散列以将它们的引用推入数组时我卡住了。配置文件将一直在更改，并且要存储可变数量的不同名称/参数组合。有没有办法遍历哈希名称，以便我可以一次将它们推送到一个数组中？

到目前为止，它看起来像这样：

```
my %temphash = (name=>'add', args=>[1,2]);  

push (@array, \%temphash); 
```

我可以把它`%temphash`变成动态生成的东西并在继续下一个之前推动它吗？

编辑：上下文

计划是使用那些“名称”键来调用子程序。所以这样的事情可以工作：

```
my %subhash = (add=>\&addNumbers, concatenate=>\&concat); 
```

除了我需要调用的子例程列表在配置文件中，我不知道它们是什么，直到我开始阅读它。即使我在配置文件中包含子例程的名称，我如何遍历它们并将它们作为元素添加到该哈希中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:04:50.360

好吧，您可以简单地使用大括号来制作匿名哈希：

```
push @array, { name => 'add', args => [1,2] }; 
```

您可以利用`my`声明的词法范围创建相同的效果。例如：

```
my @array;
while ( ... ) {
    ...
    my %hash = ( ... );
    push @array, \%hash;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:04:39.377

如果我正确理解您的要求，那么您可以写：

```
push @array, { name=>'add', args=>[1,2] }; 
```

where`{ ... }`是对匿名哈希的引用。

`name`也就是说，当每个散列只有一个和时，你想要一个散列数组，我有点惊讶`args`。为什么没有从名称到参数的单个哈希映射？：

```
%array = ( add => [ 1, 2 ], concatenate => [ 'foo', 'bar', 'baz' ] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:34:00.397

像这样的东西会做你需要的

```
use strict;
use warnings;

open my $fh, '<', 'data_file' or die $!;

my $item;
my @data;

while (<$fh>) {
  chomp;
  next unless /^(\s*)(.+?)\s*$/;
  if ($1) {
    push @{ $item->{args} }, $2;
  }
  else {
    push @data, $item if $item;
    $item = { name => $2, args => [] };
  }
}
push @data, $item if $item;

use Data::Dump;
dd \@data; 
```

**输出**

```
[
  { args => [1, 2], name => "add" },
  { args => ["foo", "bar", "blat"], name => "concatenate" },
] 
```

# wpf - 如何绑定到 RelativeSource Self？

> ID：11995318
> 
> 赞同：23
> 
> 时间：2012-08-16T20:57:45.650
> 
> 标签：wpf, binding

我试图在我的 Xaml 中绑定几个不同的属性：

```
<Label Content="{Binding Description}" 
Visibility="{Binding Path=DescriptionVisibility, 
ElementName=_UserInputOutput}"               
FontSize="{Binding Path=FontSizeValue, ElementName=_UserInputOutput}"  
HorizontalAlignment="Left" VerticalAlignment="Top" Padding="0" /> 
```

你会注意到我在这里使用了两种不同的绑定技术。使用元素名称的工作，另一个不工作。这是后面的代码：

```
public string Description
{
     get { return (string)GetValue(DescriptionProperty); }
     set { SetValue(DescriptionProperty, value); }
}
public static readonly DependencyProperty DescriptionProperty = 
DependencyProperty.Register("Description", typeof(string), typeof(UserControl), 
new UIPropertyMetadata("")); 
```

每个绑定都有不同的名称，但它们大部分看起来都像这样。我希望我的 Binding 能够使用：

```
{Binding Description} 
```

代替：

```
{Binding Path=Description, ElementName=_UserInputOutput} 
```

它似乎只在使用 ElementName 时才有效。我需要导出/导入这个 XAML，所以我不能有 ElementName，否则导入将不起作用。

我认为这是最好的：

```
{Binding Path=Description, RelativeSource={RelativeSource Self}} 
```

这没有用。

有任何想法吗？？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-16T22:57:21.357

`{RelativeSource Self}`以拥有正在绑定的属性的对象为目标，如果您在 a 上有这样的绑定，`Label`它将查找`Label.Description`不存在的 。相反，您应该使用`{RelativeSource AncestorType=UserControl}`.

没有源 ( `ElementName`, `Source`, `RelativeSource`) 的绑定是相对于 的`DataContext`，但是在`UserControls`您应该[*避免*将 设置`DataContext`](https://stackoverflow.com/questions/7572005/setting-datacontext-within-usercontrol-is-affecting-bindings-in-parent)为不与外部绑定混淆。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-08-16T21:09:16.583

您还没有设置 DataContext，RelativeSource 使用它来确定它的相对对象。您需要在更高级别设置 DataContext，例如 UserControl。我通常有：

```
<UserControl ... DataContext="{Binding RelativeSource={RelativeSource Self}}">
</UserControl> 
```

这告诉 UserControl 将自己绑定到代码隐藏中的类。

# xml - XMLNS 属性声明

> ID：11995320
> 
> 赞同：3
> 
> 时间：2012-08-16T20:57:53.920
> 
> 标签：xml, xsd

我的 XSD 出现问题，当我将代码输入 XSD 验证器时出现此错误：“no-xmlns：属性声明的 {name} 不得匹配 'xmlns'。”

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Test">
        <xs:complexType>
            <xs:attribute name="xmlns" type="xs:string" use="required"/>
            <xs:sequence>
                <xs:choice minOccurs="1" maxOccurs="unbounded">
                    <xs:element name="Screens" minOccurs="0" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="Screen" minOccurs="1" maxOccurs="unbounded">
                                    <xs:complexType>
                                        <xs:attribute name="name" type="xs:string" use="required"/>
                                        <xs:attribute name="package" type="xs:string" use="required"/>
                                        <xs:attribute name="class" type="xs:string" use="required"/>
                                        <xs:sequence>
                                            <xs:element name="ScreenData" minOccurs="1" maxOccurs="unbounded">
                                                <xs:complexType>
                                                    <xs:attribute name="step" type="xs:int" use="required"/>
                                                    <xs:attribute name="description" type="xs:string" use="required"/>
                                                    <xs:sequence>
                                                        <xs:element name="element" minOccurs="1" maxOccurs="unbounded">
                                                            <xs:complexType>
                                                                <xs:attribute name="name" type="xs:string" use="required"/>
                                                                <xs:attribute name="type" type="xs:string" use="required"/>
                                                                <xs:attribute name="value" type="xs:string" use="required"/>
                                                            </xs:complexType>
                                                        </xs:element>
                                                    </xs:sequence>
                                                </xs:complexType>
                                            </xs:element>
                                        </xs:sequence>
                                    </xs:complexType>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                    <xs:element name="DBSession" minOccurs="0" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:attribute name="use_test.properties" type="xs:boolean" use="required"/>
                            <xs:attribute name="use_dbserver" type="xs:string" use="required"/>
                            <xs:attribute name="use_db" type="xs:string" use="required"/>
                            <xs:sequence>
                                <xs:element name="login" minOccurs="1" maxOccurs="1">
                                    <xs:complexType>
                                        <xs:attribute name="server" type="xs:string" use="required"/>
                                        <xs:attribute name="database" type="xs:string" use="required"/>
                                        <xs:attribute name="username" type="xs:string" use="required"/>
                                        <xs:attribute name="password" type="xs:string" use="required"/>
                                        <xs:sequence>
                                            <xs:element name="Queries" minOccurs="1" maxOccurs="1">
                                                <xs:complexType>
                                                    <xs:sequence>
                                                        <xs:attribute name="query" type="xs:string" use="required"/>
                                                        <xs:attribute name="expectedResults" type="xs:string" use="required"/>
                                                    </xs:sequence>
                                                </xs:complexType>
                                            </xs:element>
                                        </xs:sequence>
                                    </xs:complexType>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                    <xs:element name="CLISession" minOccurs="0" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:attribute name="use_test.properties" type="xs:boolean" use="required"/>
                            <xs:sequence>
                                <xs:element name="login" minOccurs="1" maxOccurs="unbounded">
                                    <xs:complexType>
                                        <xs:attribute name="host" type="xs:string" use="required"/>
                                        <xs:attribute name="password" type="xs:string" use="required"/>
                                        <xs:attribute name="username" type="xs:string" use="required"/>
                                        <xs:sequence>
                                            <xs:element name="Commands" minOccurs="1" maxOccurs="1">
                                                <xs:complexType>
                                                    <xs:sequence>
                                                        <xs:element name="Command" minOccurs="1" maxOccurs="unbounded">
                                                            <xs:complexType>
                                                                <xs:attribute name="exe" type="xs:string" use="required"/>
                                                                <xs:attribute name="args" type="xs:string" use="required"/>
                                                                <xs:attribute name="wait" type="xs:int" use="required"/>
                                                                <xs:attribute name="expectedOutput" type="xs:string" use="required"/>
                                                                <xs:attribute name="toVariable" type="xs:string" use="required"/>
                                                            </xs:complexType>
                                                        </xs:element>
                                                    </xs:sequence>
                                                </xs:complexType>
                                            </xs:element>
                                        </xs:sequence>
                                    </xs:complexType>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:choice>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我假设这与模式中的第二行代码有关。此行与我的 XML 文档中的以下行相关：

```
<Test xmlns="http://MyURL"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:20:35.003

问题出在您的架构中。只需删除该行：

```
<xs:attribute name="xmlns" type="xs:string" use="required"/> 
```

XML 文档是正确的。在您的文档中，您选择`http://MyURL`通过分配 value 属性将 URI 绑定到默认命名空间`xmlns`。这很好，正如[XML 1.0 中的命名空间中](http://www.w3.org/TR/REC-xml-names/#defaulting)所解释的那样。

命名空间是特殊的。[请参阅XML Schema Part 1](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#Attribute_Declaration_details)的最后一段：3.2.1 属性详细信息

> [XML-Infoset] 将具有 xmlns 或 xmlns:xsl 等名称的属性与普通属性区分开来，将它们标识为 [namespace attributes]。因此，模式没有必要也实际上不可能包含与此类命名空间声明相对应的属性声明，请参阅 xmlns Not Allowed (§3.2.6)。本规范中没有提供任何方法来为命名空间声明提供默认值。

您编写的架构中的所有内容都在您声明它的名称空间中，因此实际上没有必要束缚文档编写者以完全那样声明它。他们可以在更高级别的元素上声明命名空间。或者他们可以将其绑定到不同的命名空间前缀。

顺便说一句，您可能应该按照[XML Schema Primer](http://www.w3.org/TR/xmlschema-0/#UnqualLocals)`targetNamespace`中的说明在最顶层`schema`元素上设置来在文档中声明模式的命名空间

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://MyURL"> 
```

# heroku - zlib 模块不能很好地与 Web 部署配合使用

> ID：11995324
> 
> 赞同：1
> 
> 时间：2012-08-16T20:58:10.950
> 
> 标签：heroku, trigger.io

尝试部署到 heroku，似乎 zlib 模块玩得不好。有任何想法吗？

```
2012-08-16T20:50:07+00:00 heroku[slugc]: Slug compilation finished
2012-08-16T20:50:09+00:00 heroku[web.1]: Starting process with command `node web.js`
2012-08-16T20:50:09+00:00 app[web.1]: 
2012-08-16T20:50:09+00:00 app[web.1]: node.js:134
2012-08-16T20:50:09+00:00 app[web.1]:         throw e; // process.nextTick error, or 'error' event on first tick
2012-08-16T20:50:09+00:00 app[web.1]:         ^
2012-08-16T20:50:09+00:00 app[web.1]: Error: Cannot find module 'zlib'
2012-08-16T20:50:09+00:00 app[web.1]:     at Function._resolveFilename (module.js:320:11)
2012-08-16T20:50:09+00:00 app[web.1]:     at Function._load (module.js:266:25)
2012-08-16T20:50:09+00:00 app[web.1]:     at require (module.js:348:19)
2012-08-16T20:50:09+00:00 app[web.1]:     at Object.<anonymous> (/app/node_modules/express/node_modules/connect/lib/middleware/compress.js:14:12)
2012-08-16T20:50:09+00:00 app[web.1]:     at Module._compile (module.js:404:26)
2012-08-16T20:50:09+00:00 app[web.1]:     at Object..js (module.js:410:10)
2012-08-16T20:50:09+00:00 app[web.1]:     at Module.load (module.js:336:31)
2012-08-16T20:50:09+00:00 app[web.1]:     at Function._load (module.js:297:12)
2012-08-16T20:50:09+00:00 app[web.1]:     at require (module.js:348:19)
2012-08-16T20:50:09+00:00 app[web.1]:     at Object.compress (/app/node_modules/express/node_modules/connect/lib/connect.js:89:14)
2012-08-16T20:50:11+00:00 heroku[web.1]: Process exited with status 1
2012-08-16T20:50:11+00:00 heroku[web.1]: State changed from starting to crashed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:47:33.500

原来 express 摆脱了它的 zlib 依赖，所以你必须将 zlib（版本“1.0”）添加到 /development/web 下的 package.json

**更新：**这已在 v1.4.11 中修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:20:01.960

这已在 Forge 平台的 v1.4.11 中修复：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-4-11](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-11)

感谢您的报告！

# tsql - 插入挂起后的选择语句？

> ID：11995327
> 
> 赞同：0
> 
> 时间：2012-08-16T20:58:18.067
> 
> 标签：tsql

在我的存储过程中，我试图将记录插入到临时表中

在我的存储过程中，我试图将记录插入到临时表中

```
--Temporary table
create table #CR_TMP
    (

         ct_co_id               int        NULL 
         , ct_nbr               int        NULL 
         , ctrct_srvc_type         char(4)    NULL 
     , start_date          datetime   NULL 
     , end_date            datetime   NULL 
    )

  print 'Before insert' 

Insert into #CR_TMP
 select distinct col1,col2,......
from tableName
where conditions

print 'After insert'
select '#CR_TMP' as #CR_TMP, * from #CR_TMP
print 'here 1' 
```

我运行了选择查询，它提供了大约 583 行。但是当我执行上述程序时。我认为它卡在插入过程中。我确实得到了“插入后”的结果，但没有得到打印“here 1”的结果。我让这个程序执行了 2 个小时，它被卡在了同一个地方。这里有任何指示吗？

我运行了选择查询，它提供了大约 583 行。但是当我执行上述程序时。我认为它卡在插入过程中。我确实得到了“插入后”的结果，但没有得到打印“here 1”的结果。我让这个程序执行了 2 个小时，它被卡在了同一个地方。这里有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:06:07.857

该过程看起来不错，除了这部分：

```
print 'After insert'
select '#CR_TMP' as #CR_TMP, * 
from #CR_TMP
print 'here 1' 
```

尝试将其更改为：

```
print 'After insert'
select '#CR_TMP' as [#CR_TMP], * 
from #CR_TMP
print 'here 1' 
```

甚至删除的第一部分`select`

```
print 'After insert'
select * 
from #CR_TMP
print 'here 1' 
```

编辑：

在聊天讨论之后，确定 sanika 认为是问题的存储过程的初始部分实际上正在运行。因此，我建议他们开始逐个查询进行测试，以确定实际问题出在哪里。到那时，调试一个 30 页的存储过程会更容易。

# iphone - iOS 的 MIDI 文件播放库

> ID：11995330
> 
> 赞同：1
> 
> 时间：2012-08-16T20:58:43.497
> 
> 标签：iphone, ios, ipad, midi, coremidi

有人知道可以加载标准 MIDI 文件并将输出发送到 MIDI 接口的库吗？我见过许多将 MIDI 文件播放到内部合成器中的库，但没有一个库会输出到 MIDI 接口。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:08:04.633

`MusicSequence`从 AudioToolbox.framework开始。

创建一个 MusicSequence，然后使用`MusicSequenceSetMIDIEndpoint`.

# extjs - ExtJS (3.4)：为 TabPanel 中的面板更新 ToolTip

> ID：11995332
> 
> 赞同：1
> 
> 时间：2012-08-16T20:58:56.633
> 
> 标签：extjs, tooltip, extjs3, tabpanel

如何更改位于选项卡面板中的面板的工具提示？最初，当面板被添加到选项卡面板时，我使用面板构造函数的 tabtip 参数创建了一个工具提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:47:31.467

您需要获取代表选项卡的选项卡条的 DOM 元素。您可以使用[tabPanel.getTabEl(tabID)](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.TabPanel-method-getTabEl)来获取条形元素。然后，您可以抓取`.x-tab-strip-text`跨度并设置其`qtip`属性。

```
// be sure to set your tab's itemId
var tabPanel = new Ext.TabPanel({
   items: [{
      title: 'one tab',
      tabTip: 'something',
      itemId: 'firstTabID',
      html: 'haha wooo'
   }]
});

// later...
// .getTabEl grabs the tabstrip DOM element
// Ext.get converts it to an Ext.Element
Ext.get( tabPanel.getTabEl('firstTabID') )
   // find its descendent span that contains the tab's title text
   .child('span.x-tab-strip-text', true)
   // and set the tool tip
   .qtip = 'something completely different!'; 
```

我以前从未更改过选项卡工具提示，所以我[在 Ext.TabPanel 源代码](http://docs.sencha.com/ext-js/3-4/source/TabPanel.html#Ext-TabPanel-method-initTab)中挖掘，看看他们是如何设置它的。我也学到了一些东西：）

# jquery - 使用 jQuery Mobile 更新 URL 字符串并刷新 .load

> ID：11995333
> 
> 赞同：1
> 
> 时间：2012-08-16T20:58:56.673
> 
> 标签：jquery, ajax, mobile, jquery-mobile, cordova

我正在使用 PhoneGap 和 jQuery mobile 构建一个原生应用程序。除了页眉、导航和页脚之外，大多数应用程序都位于 web 视图中。我在 webview 中有一个文章链接列表以及一个分页链接。当用户单击文章链接时，新页面会加载到现有的 webview 中，这正是我想要的，但是分页链接给了我一个 jquery 移动加载错误。

基本上我想做的是将分页 url 附加到当前 webview URL 的末尾，例如：

*   当前的 webview URL 是：m.example.com/?mode=Native；
*   用户点击分页链接（href="2/"），webview 更新为：m.example.com/2/?mode=Native

javascript看起来像这样：

```
// loads first page into webview    
var mobPage = 'http://m.example.com/?mode=Native';

$('#content').load(mobPage, function() {
    $('#content').fadeIn(500);
});

// to load additional pages into webview
$('#articles a, #paginate a').live('click', function(){
    event.preventDefault();
    var nextPage = $(this).attr('href');
    var mobPage = nextPage+"?mode=Native";
    $('#content').load(mobPage);
}); 
```

这样做的正确方法是什么？

# git - 在多次错误合并后管理 GIT 存储库

> ID：11995342
> 
> 赞同：0
> 
> 时间：2012-08-16T20:59:34.973
> 
> 标签：git

如此简短的故事，我正在为应用程序管理一些代码的 GIT 存储库。该应用程序没有任何测试。其中一位开发人员将功能分支直接合并到 master 中，Jenkins 将其部署到 stage。此功能分支有数周的更改，并多次合并到主分支中。所以我从假期回来，发现一些功能被破坏了，而添加的功能还没有准备好迎接黄金时段。我设法通过恢复合并和提交来梳理出糟糕的代码。我想运行这个固定的代码库并手动测试它的废话。PM 想要将直播的内容放入 GIT 存储库中。这似乎大错特错。有人有其他解决方案或意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:31:23.307

我不明白首相想要做什么。

虽然我相信“维护良好”的 Git 存储库的每个功能都有一个分支，包括修复程序，一旦它稳定并通过测试，就会合并。

我知道并想象坚持这一点有多难。所以我猜你现在拥有的是一个 repo，你不知道任何提交可能代表什么，因为它很混乱并且你添加了还原（我个人认为应该尽可能避免还原）。

所以你想要一些稳定的东西吗？我会建议，即使我对它的经验很少，也可以从历史上的稳定提交开始。从它分支并将其称为“稳定”，这将成为您的主要分支。从引入新功能或错误的提交中连续合并。对于每一个，提交修复直到它稳定，并在下一次错误提交之前进行这些修复。

例如，之前：

A（稳定） - B（功能 1，有问题） - C（功能 2，有更多问题） - D（更糟）

后：

A - B - B1 - B2 - C - C1 - D - D1

（因此 A、B2、C1、D1 是稳定的里程碑）。总的来说，你可以使用 rebase、merge 和 cherry-pick 来执行你想做的事情。这篇文章：[Git Cherry-pick vs Merge Workflow](https://stackoverflow.com/questions/1241720/git-cherry-pick-vs-merge-workflow)告诉你，如果你对其他人不满意，你最好使用合并，但有一点差异是非常有用的。

希望你能解决你的问题

# sql - XQuery 存在方法

> ID：11995347
> 
> 赞同：2
> 
> 时间：2012-08-16T20:59:46.193
> 
> 标签：sql, sql-server, xquery, xpath-2.0, exist-db

如何检查`XQuery`存在方法中的多个值？我`XQuery`在 SQL 语句中运行它

```
Select [column1] [xmlcolumn] from tablet
where [xmlcolumn].exist('/node/subnode/subsubnode[.="value1"]') = 1 
```

我希望能够指定多个值`like [.="value1" OR "value2" OR ...]`。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T04:22:10.390

**使用**：

```
exists(/node/subnode/subsubnode[. eq "value1" or . eq "value2"]) 
```

XPath 区分大小写，要使用的运算符是`"or"`--not `"OR"`。

**如果您有很多值，则使用更实用**：

```
exists(/node/subnode/subsubnode
              [. = ("value1","value2","value3","value4","value5")]) 
```

# linux - 在 grep 中转义双引号

> ID：11995353
> 
> 赞同：109
> 
> 时间：2012-08-16T21:00:07.067
> 
> 标签：linux, shell

我想对里面有双引号的关键字做 grep。举一个简单的例子：

```
echo "member":"time" | grep -e "member\"" 
```

那不匹配。我该如何解决？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-08-16T21:01:43.683

问题是您没有正确转义输入字符串，请尝试：

```
echo "\"member\":\"time\"" | grep -e "member\"" 
```

或者，您可以在单引号内使用未转义的双引号：

```
echo '"member":"time"' | grep -e 'member"' 
```

尽管第二种方法会阻止您将命令嵌套在另一组单引号中（例如`ssh 'cmd'`），但您会发现这是一个更清楚的偏好问题。

# javascript - 如何在js中定义可变数量的变量？

> ID：11995356
> 
> 赞同：0
> 
> 时间：2012-08-16T21:00:09.777
> 
> 标签：javascript

这是我想要做的一个简单的例子。

我想要一个函数 returnFunctions ，它将一个整数 N 作为参数，并将定义以下函数：

```
func1(x) = x
func2(x) = 2*x
...
funcN(x) = n*x 
```

我怎样才能在javascript中做这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:04:10.500

你可以这样做：

```
function returnFunctions(n) {
  for (var i = 1; i <= n; i++) {
    (function(i){
      window['func' + i] = function(x) { return x * i; };
    })(i);
  }
} 
```

演示：http: [//jsfiddle.net/Guffa/H4juA/](http://jsfiddle.net/Guffa/H4juA/)

但是，完全不确定它是否是您要完成的任务的最佳解决方案，但该问题不包含任何相关信息......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T21:04:38.867

像这样的东西？

```
function Fn(n,x)
{ return n*x;
} 
```

# grails - Grails 无法在插件中引用名为 Config 的域类

> ID：11995357
> 
> 赞同：0
> 
> 时间：2012-08-16T21:00:19.153
> 
> 标签：grails, grails-2.0

我创建了一个 Grails 插件并在其中创建了一个域类，名为`Config`：

```
package com.company.common

class Config {

    String defaultTimeZone
    String defaultLanguage
} 
```

在另一个 Grails 项目中，我包含了插件，并且我在其中包含了这一行`Bootstrap.groovy:`

```
import com.company.common.Config 
```

每次我尝试运行该项目时，我都会收到此错误：

> C:\Code\grails-app\conf\BootStrap.groovy: 4: 无法解析类 com.company.common.Config

如果我`Config`在同一个 Grails 项目中有域类，它就可以工作。如果我将它重命名为类似于`ProjectConfig`插件项目中的名称，它似乎也可以工作。

有谁知道为什么我不能引用`Config`另一个项目中调用的域类？

PS插件项目中的所有其他域类都可以从主Grails项目中访问，只有`Config`类给我带来了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:33:22.090

Grails 插件具有在打包插件时删除的特定文件（因此您可以使用它们进行测试）。您可以在此处找到[Grails Plugins #Creating and Installation Plugins](http://grails.org/doc/latest/guide/plugins.html#creatingAndInstallingPlugins)列表。为方便起见，以下是列表：

```
grails-app/conf/BootStrap.groovy
grails-app/conf/BuildConfig.groovy (although it is used to generate dependencies.groovy)
grails-app/conf/Config.groovy
grails-app/conf/DataSource.groovy (and any other *DataSource.groovy)
grails-app/conf/UrlMappings.groovy
grails-app/conf/spring/resources.groovy
Everything within /web-app/WEB-INF
Everything within /web-app/plugins/**
Everything within /test/**
SCM management files within **/.svn/** and **/CVS/** 
```

虽然此列表不包括域类文件夹中的 Config.groovy 文件，但它可能会被此捕获。如果 Config.groovy 文件被转移到打包的插件中，或者您可以接受重命名文件，那将是值得检查的。

# xpages - XPages Ext Lib 值选择器 onChange 事件

> ID：11995360
> 
> 赞同：4
> 
> 时间：2012-08-16T21:00:28.467
> 
> 标签：xpages, xpages-extlib

我正在使用扩展库值选择器来选择名称。一旦用户点击确定，我需要使用选定的值来填充其他几个字段。但我不知道如何从 Ok 按钮触发 SSJS 函数。

感谢您的任何建议。

——杰夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T06:53:55.070

您可以从值选择器更新的字段中触发事件。

下面是一个简单的例子，它在使用值选择器时更新另一个字段：

```
<xe:djextListTextBox id="inputField">
    <xp:eventHandler event="onChange" submit="true" refreshMode="complete">
        <xe:this.action><![CDATA[#{javascript:getComponent("testField").setValue(getComponent("inputField").getValue())}]]></xe:this.action>
    </xp:eventHandler>
</xe:djextListTextBox>

<xe:valuePicker id="valuePicker1" for="inputField">
    <xe:this.dataProvider>
        <xe:simpleValuePicker valueList="1,2,3" valueListSeparator=","></xe:simpleValuePicker>
    </xe:this.dataProvider>
</xe:valuePicker>

<xp:br />
<xp:inputText id="testField"></xp:inputText> 
```

# r - sapply 2 矢量图

> ID：11995362
> 
> 赞同：1
> 
> 时间：2012-08-16T21:00:32.337
> 
> 标签：r

假设我有 2 个列表

```
divisor = c(0, 1, 1, 7, 7, 8, 8, 8, 9 )
remainder = c(99,  0,  1,  1, 99,  0,  1, 99,  0) 
```

如果相应的余数不是 0，我希望除数*元素*为*元素 + 1。最终答案应如下所示：*

```
updated.divisor = (1, 1, 2, 8, 8, 8, 9, 9, 9) 
```

我将如何使用`sapply`？

到目前为止我有

```
sapply(remainder, function(x) {
    if x != 0{
       #divisor = divisor + 1
    }
    else{
       #divisor = divisor + 0
    }
} 
```

PS 我可能可以使用嵌套循环，但我希望能够使用`sapply`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T21:04:23.720

您不需要循环：

```
divisor + (remainder!=0)
[1] 1 1 2 8 8 8 9 9 9 
```

* * *

这是 R 的最基本原则之一：所有基本操作（和许多函数）都接受向量作为输入，并同时对该向量的所有元素执行操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T23:36:47.297

对您的评论：如果您想要一个应用类型的解决方案，您会使用`mapply`它，因为它允许您“并排”处理两个参数：

```
mapply( function(x,y) {x + !(y==0)}, x=divisor, y=remainder)
#[1] 1 1 2 8 8 8 9 9 9 
```

一个`ifelse`解决方案也很有意义：

```
 ifelse(remainder !=0, divisor+1, divisor)
#[1] 1 1 2 8 8 8 9 9 9 
```

# django - 我如何在 django-haystack 搜索查询中使用布尔字段

> ID：11995367
> 
> 赞同：2
> 
> 时间：2012-08-16T21:01:06.880
> 
> 标签：django, elasticsearch, django-haystack

我正在使用 django-haystack 为我的应用程序提供动力搜索，并且我有布尔字段我想过滤我的模型。但是，当我尝试这样做时，我的搜索查询失败了。

我使用的搜索后端是 elasticsearch

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:59:19.530

在此处发布您的一些代码将有助于您找出问题所在，因为很难在没有任何问题的情况下进行故障排除。

我是如何实现的（使用 whoosh 而不是 elasticsearch，但 django 代码无论如何应该是相同/相似的）是这样的：

创建了我自己的搜索表单类（如果您还没有这样做，请查看[Haystack Docs - 创建您自己的表单](http://django-haystack.readthedocs.org/en/latest/views_and_forms.html#creating-your-own-form)

```
from django import forms
from haystack.forms import SearchForm

class PaidPropertySearchForm(SearchForm):
    q = forms.CharField(required=False, label=('Town Area'))
    #othersearchtermshere
    furnished = forms.BooleanField(required=False)

    def search(self):
        sqs = super(PaidPropertySearchForm, self).search()
        #other search filtering here
        if self.is_valid() and self.cleaned_data['furnished']:
            sqs = sqs.filter(furnished__contains=self.cleaned_data['furnished'])

        return sqs 
```

相关模型字段很简单：

```
class Properties (models.Model):.
    furnished = models.BooleanField() 
```

和我的 searchindexes.py：

```
class PropertyIndex(indexes.SearchIndex, indexes.Indexable):
    #other indexed terms
    furnished = indexes.BooleanField(model_attr='furnished', default='false') 
```

这里值得注意的是，haystack 和带有布尔值的 whoosh 后端之间存在一些问题，这需要我将默认索引值指定为字符串“false”而不是布尔值 False。如果我没有这样做或没有设置默认值，由于某种原因，所有布尔值都被索引为 True，无论模型存储了什么。我不知道这个问题是否会影响弹性搜索，所以你可能不需要

```
default='false' 
```

在您的搜索索引中

如果您还没有弄清楚，希望这有助于您走上正确的轨道。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-11T15:53:18.330

```
sqs = sqs.filter(boolean_field=True) 
```

对我也不起作用（使用 Haystack 2.1.0 和 Elasticsearch 1.2.1）但是

```
sqs = sqs.filter(boolean_field=1) 
```

做过。

# php - 发送电子邮件表单字段的 PHP 脚本不会发送所有字段并且并不总是发送

> ID：11995368
> 
> 赞同：0
> 
> 时间：2012-08-16T21:01:08.333
> 
> 标签：php, email

我已经在许多 php 电子邮件脚本上来回使用这个，甚至购买了 Formtoemailpro (http://formtoemail.com/)，现在我将使用这个。我最终确实收到了来自这个脚本（和 f2ep）的一封电子邮件，但它只发送了标签和部分名称和电子邮件地址，而不是任何其他字段。当我检查回声时，它**确实**知道每个变量应该定义为什么。

我使用dreamhost 作为我的托管计划。我在尝试的每个脚本上都得到了类似的结果——如果有的话，会显示电子邮件中的一个或多个字段。我用来测试的电子邮件是我的个人 gmail 帐户，但我的客户想要使用的电子邮件是他们使用新域/托管设置的电子邮件 - 我相信这是一个谷歌应用程序帐户。

*有什么基本的我弄错了吗？* 我也对脚本的改进持开放态度。

**html:**

```
 <form name="form1" id="form1" method="post" action="formtest.php"> 
   <span class="formtext">

    <p>
      <label for="nameFirst">First Name:</label>   
      <input type="text" name="nameFirst" id="nameFirst" />
    </p>
    <p>
      <label for="nameLast">Last Name:</label>
      <input type="text" name="nameLast" id="nameLast" />
    </p>
    <p>
      <label for="email">E-mail: </label>
      <input type="text" name="email" id="email" />
    </p>
    <p>
      <label for="phone"> Phone:</label>
      <input type="text" name="phone" id="phone" />
    </p>
    <p>
      <label for="subject">Reason for contacting us?</label>
        <br />
      <select name="subject"  id="subject">
        <option>Request more information</option>
        <option>Recommend a project</option>
        <option>Suggest a resource</option>
        <option>Get us to help a community</option>
      </select>
    </p>
    <p>
      <label for="messagebox" class="formtext">Message:</label>
      <br>
      <textarea name="messagebox" id="messagebox" cols="45" rows="5"></textarea>
    </p>
    <p>
      <input type="submit" name="submit" id="button" value="Send" />
    </p>
  </span>
</form> 
```

**php:**

```
<?php

  $to = "foo@example.com";
  $subject = $_POST['subject'];
  $name = $_POST['nameFirst'].$_POST['nameLast'];
  $phone = $_POST['phone'];
  $email = $_POST['email'];
  $message = $_POST['messagebox'];

if(isset($_POST['submit'])) {

  $body = "From: {$name}\n Phone: {$phone}\n E-Mail: {$email}\n Message:\n {$message}";

  $headers = "From: ". $name . " <" . $email . ">\r\n";
  $headers .= "Reply-To:". $email ."\r\n";

  mail($to, $subject, $body, $headers);

  // redirect 
  header('Location: ThankYouContact.html');
  } 

// Error Checking http://bit.ly/NDhVrm
 /* if (@mail($to, $subject, $message)) { //@ suppresses error msg
    echo('<p>Mail sent successfully.</p>'); 
  } else { 
    echo('<p>Mail could not be sent.</p>'); 
  } */

// Function to validate against any email injection attempts
function IsInjected($str)
{
  $injections = array('(\n+)',
              '(\r+)',
              '(\t+)',
              '(%0A+)',
              '(%0D+)',
              '(%08+)',
              '(%09+)'
              );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
     {
     return true;
   }
   else
     {
     return false;
   }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:06:03.580

你的代码有点冒险——你在使用它们之前没有测试所有这些 $_POST 值的存在，这可能会导致 PHP 输出警告消息。如果输出了这些警告，那么您的`header()`重定向将失败并出现通常的`headers already sent`错误。

需要检查的一些事项：

a) 的返回值`mail()`。现在你假设它成功了。您应该测试一个布尔值 false，表明 PHP 和 SMTP 服务器之间发生了故障。

b) 如果dreamhost 允许或可以提供它，请检查邮件服务器日志以查看PHP 移交电子邮件后那里发生的情况——记住，PHP 的mail() 相当于将信封放入邮箱中——实际上并没有传递邮件。

c) 您可能需要考虑改用[PHPMailer](http://phpmailer.worxware.com)或[SwiftMailer](http://swiftmailer.org)，这两种方法都可以为您提供更好的诊断信息，以防出现问题。

d）您应该做`if ($_SERVER['REQUEST_METHOD'] == 'POST') { ... }`而不是检查表单字段。REQUEST_METHOD 是 100% 可靠的，而检查表单域取决于您不更改任何内容。

# android - android 可以同时在 GCM 和 C2DM 上运行吗？

> ID：11995371
> 
> 赞同：1
> 
> 时间：2012-08-16T21:01:23.743
> 
> 标签：android, android-c2dm, google-cloud-messaging

我有一个当前使用 C2DM 推送通知的应用程序。我想询问我是否将应用程序更新到 GCM，如果某些用户不升级他们的应用程序，Google 是否允许我在我的应用程序的两个版本中同时使用 C2DM 和 GCM？

还是我以前的应用程序上的用户永远不会收到推送通知，尽管我仍然为 C2DM 实现了推送逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:28:06.063

只要您不删除任何授权密钥、ID 等，他们仍然会收到它们，因为 GCM 使用项目 ID，而 C2DM 使用注册的电子邮件地址。

更多信息：[C2DM 到 GCM 迁移](http://developer.android.com/guide/google/gcm/c2dm.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:12:10.960

我已经在应用程序中用 GCM 完全替换了 C2DM，并在服务器端保留了对这两种协议的支持。奇迹般有效; 细节在[这里](https://stackoverflow.com/questions/11260364/registration-confusion-android-gcm/11263828#11263828)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:55:19.703

一旦 C2DM 服务最近被弃用，我建议您将推送系统迁移到 GCM 服务。

处理它的最好方法是按照谷歌所说的那样做。查看官方 GCM 文档中的[这个](http://developer.android.com/guide/google/gcm/c2dm.html#interop)主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T19:56:02.603

虽然不是最初的问题，但一个有趣的问题是：一个应用程序能否同时使用 C2DM 和 GCM。

C2DM 使用 Sender-Account，而 GCM 使用 Project-ID 进行注册。他们唯一可能共享的是应用程序包名称（显然是设备的谷歌帐户，但这无关紧要，因为有多个应用程序可以并行使用 gcm/c2dm）。

根据我在同一个应用程序中注册 C2DM 和 GCM 的经验，可能会导致一些严重的问题。

在一个应用程序中同时使用两者的原因可能是您想在应用程序中使用 GCM，但不能无处不在，因为旧后端可能还无法切换到 GCM。可能是一个相当罕见的场景 - 但目前正在我们的应用程序中发生。

# ruby-on-rails - Rails 不会正确返回小数

> ID：11995372
> 
> 赞同：0
> 
> 时间：2012-08-16T21:01:26.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3.2.5，当它返回一个值 o :price 进行编辑时，它只带一位小数，例如。600.0，我需要在数据库中带 2 个小数（例如 600.00）记录为 600.00，在我的语言环境中我已经设置为 2 个小数，但仍然不起作用。

我试过了

```
number_to_currency(:price, :precision => 2) 
```

但它适用于像“show”这样的视图，我需要它在文本字段上返回用于编辑的propper值。

在我的迁移中，“价格”字段设置为十进制（15,2）。

有人可以帮忙吗？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:19:36.680

文本字段对字段的“本机”值进行操作，因为它由 ActiveRecord 处理，而不是存储在数据库中。

货币字段很棘手，因为 ActiveRecord 在数据库表示和 ruby​​/rails 表示之间进行转换，即 BigDecimal。

**如果您的目标是要向用户展示`$1,000.00`并允许他们编辑它，一些想法：**

1.  使用 Ylan S 所指的 Money gem。
2.  使用就地编辑小部件，例如[截屏](http://railscasts.com/episodes/302-in-place-editing)。您将`number_to_currency`用于显示该值。单击时，输入字段将显示不带货币符号的值、千位分隔符的逗号等。请注意，这是 Excel 的工作方式：当您编辑货币字段的值时，您不会输入 1,000。你输入 1000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:46:33.127

使用“离域”gem 解决了问题。旧但黄金！：） 谢谢你们！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T21:06:22.447

根据我的经验，最好将金额以美分存储为整数，而不是使用十进制存储货币。这将解决多个问题，包括您现在遇到的问题。

过去，我使用[Money gem](https://github.com/RubyMoney/money)及其伴侣[money-rails](https://github.com/RubyMoney/money-rails)取得了很大的成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:27:09.080

The simplest way to have your text_field display a formatted value is to pass it explicitly, like this:

```
f.text_field :price, :value => number_to_currency(:price, :precision => 2) 
```

You'll need to interpret (and possibly re-format) the value in the controller method that handles the form.

See [How can I format the value shown in a Rails edit field?](https://stackoverflow.com/questions/591939/how-can-i-format-the-value-shown-in-a-rails-edit-field)

# objective-c - iOS5 和 Facebook SDK 3.01/Facebook 订阅源

> ID：11995373
> 
> 赞同：1
> 
> 时间：2012-08-16T21:01:32.477
> 
> 标签：objective-c, facebook, ios5

我要疯了。我已经安装了 Facebook SDK 3.01。我已将其添加到我的框架中。我已经将它导入到我的视图控制器中。我正在使用 Facebook 开发人员页面中的代码，如下所示：

```
UIImage *pic = [self createImage];
NSString *list = self.haiku_text.text;
NSString *kAppId=@"xxxxxxxxx0507";
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:kAppId, @"app_id",nil, @"link", pic, @"picture",@"Haiku", @"name",nil, @"caption",@"Maybe he'll love me if I give him a haiku....",@"description",nil];
[facebook dialog:@"feed"
       andParams:params
     andDelegate:self]; 
```

无论我做什么，我都会遇到`use of undeclared identifier 'facebook'`错误。这向我表明，这`facebook`需要是某个类或属性的实例化——但我一直在寻找几千年来的感觉，但我无法在任何地方找到该类或属性是什么。我在 stackoverflow 上读到的内容让我觉得它曾经与 FBConnect 有关，但新的 Facebook SDK 中似乎不存在这种情况。

有什么想法可以帮助我至少保留一点我正在撕裂的头发吗？

# json - 是否存在用于回答一般 Prolog 查询的 JSON-RPC 服务器？

> ID：11995376
> 
> 赞同：1
> 
> 时间：2012-08-16T21:01:46.940
> 
> 标签：json, rpc, swi-prolog

我看到了这个为 SWI-Prolog 编写 JSON-RPC 服务器的[教程](http://technogems.blogspot.com/2011/08/easy-cross-platform-inter-process.html)。不幸的是，它所做的只是添加两个数字。我想知道是否存在用于 SWI-Prolog 的 RPC 服务器，它可以定义新规则并回答一般 Prolog 查询、返回 JSON 列表等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:41:29.477

当您参观[SWI-Prolog 网站](http://www.swi-prolog.org/)时，您可以自豪地自行供电，您可以在工作中看到[http 包](http://www.swi-prolog.org/pldoc/package/http.html)提供的一些功能。

这是一个相当大范围的工具，要掌握系统的基本知识，最简单的方法就是按照具体[的操作](http://www.swi-prolog.org/howto/http/)部分，一步一步来。[在LOD Crawler](http://www.swi-prolog.org/howto/http/HTMLStyle.html)中有一个你应该注意的小错误：在 lod.pl 的第 42 行添加一个选项：

```
...
    ;   rdf_load(URI2, [format(xml)]),
.... 
```

或者你可能会得到

> 内部服务器错误
> 
> 域错误：`content_type' expected, found` text/xml;charset=UTF-8'

运行示例时。

IDE 的一个重要特性是能够调试 HTTP 请求。

完成 HowTo 后，您可以查看[Cliopatria](http://cliopatria.swi-prolog.org/home)，它致力于将 RDF 连接到 HTML。它带有一个`pirates demo`，我必须说我觉得它对我的口味来说有点太“粗鲁”了，而且我不知道 YUI，它用于屡获殊荣的[MultimediaN](http://e-culture.multimedian.nl/software/ClioPatria.shtml)项目。然后，我使用[Bootstrap](http://twitter.github.com/bootstrap/)获得了前端的现代外观，并取得了可观的效果（抱歉，我还不能发布它，需要更多时间来设计系统）。

高温高压

# css - 语法错误：意外标记“”

> ID：11995380
> 
> 赞同：7
> 
> 时间：2012-08-16T21:01:59.657
> 
> 标签：css, error-handling

```
body
{
    margin: 0px;
}
.wrapper
{
    width: 960px;
    margin: 0 auto;
}
#header
{
    background-image: url('../images/cream-gravel-texture.png');
    height: 626px;
    overflow: auto;
}
#midHeader
{
    margin-top: 20px;
    background-image: url('../images/light-grey-bit-behind-logo.png');
    height: 194px;
}
#logo
{
    padding-top: 10px;
    float: left;
    clear: left;
    width: 287px;
}
#headContact
{
    margin-top: 60px;
    font-size: 21.95px;
    color: #4b1e19;
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    text-align: right;
    float: right;
    clear: right;
    width: 421px;
}
#contactUsNow
{
    float: left;
    clear: left;
}
#navMenu ul 
{
    list-style:none;
    margin: 5px;
    padding: 0px;
}
#navMenu ul li 
{
    display:inline;
}
#navMenu ul li a 
{
    display: block;
    text-decoration:none;
    float:left;
    text-align:center;
    margin: 5px 43px 10px 0;
    font-size: 20.4px;
    padding: 5px 10px 4px 10px;
    color: #4b1e19;
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    /*height: 33px;
    line-height: 33px;*/
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    -khtml-border-radius: 5px;
    border-radius: 5px;
}

#navMenu ul li a:hover, #navMenu ul li.active a 
{
    /*line-height: 33px;*/
    background-image: url('../images/nav-hover.png');
    /*height: 33px;*/
}​
#headShadow
{
    background-image: url('../images/gradient-under-beige-bit.png');
    height: 22px;
} 
```

这个 CSS 给了我标题中的错误。怎么了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T21:08:56.790

之前有一个隐藏的、不可打印的字符`#headShadow`，当我将您的 CSS 复制到文本编辑器中时会显示该字符。退格`}`在上一个指令中关闭以摆脱它。

```
#navMenu ul li a:hover, #navMenu ul li.active a 
{
    /*line-height: 33px;*/
    background-image: url('../images/nav-hover.png');
    /*height: 33px;*/
}​&lt;200b>
#headShadow 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T19:19:45.153

就我而言，我错误地运行了 Grunt 构建脚本。一个 CSS 文件被压缩为 Javascript，并且构建的 HTML 被交换`<link rel="stylesheet">`为一个`<script>`标签。第一个选择器在控制台中抛出一个 JS 错误。

在标记`<!-- build:js ...`中应该是`<!-- build:css ...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T21:11:08.733

当我将其复制并粘贴到本地时，我在 Firebug 中看到了一个不可读的字符 â€‹，在 #headShadow 行之前和 } 之后

请删除删除并重新键入该行

# javascript - 在 Selenium IDE 中执行 HTTP POST

> ID：11995383
> 
> 赞同：4
> 
> 时间：2012-08-16T21:02:17.220
> 
> 标签：javascript, web-services, testing, selenium, https

我想使用带有 XML 有效负载的 Selenium IDE 对服务器执行单个 HTTPS POST。我正在与之交互的服务不支持 HTTPS GET，否则我会这样做。（做一个 HTTPS GET 真的很容易，因为整个 URL 都进入了 Selenium*打开*命令。）我知道还有其他方法可以做 HTTP POST，比如 curl，但是我的 web 测试目前是在 Selenium IDE 中完成的，我没有希望不必担心两三个不同的工具来做我的测试。

我查看了[通过 Javascript 提交的 POST](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)并修改了我在那里找到的代码。我把它作为一个 storeEval 命令放在 Selenium IDE 中。代码的最终版本如下：

```
var method = method || "post"; 
var path = "https://service.url.srv/";
var post = "<xml>payload</xml>";    
var form = document.createElement("form");    
form.setAttribute("method", method);    
form.setAttribute("action", path); 
var hiddenField = document.createElement("input"); 
hiddenField.setAttribute("type", "hidden"); 
hiddenField.setAttribute("name", ""); 
hiddenField.setAttribute("value", post); 
form.appendChild(hiddenField); form.submit(); 
```

当我运行示例代码的略微修改版本时，我在 Selenium IDE 日志中收到一条消息，指出“document.body 未定义”。我尝试删除对 document.body 的所有引用，希望一个简单的表单对象本身就足够了。不是。我得到“form.submit 不是函数”。也许有一些 Javascript mojo 会起作用。

我没有在 Google 或 StackOverflow 上找到任何有人试图在 Selenium IDE 中进行 HTTP POST 的参考。如果甚至可以进行 POST，我愿意为 Selenium 编写扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-02T11:07:11.800

这是一个旧线程，但这可能会帮助其他人（比如上周的我！）寻找一种从 Selenium IDE 发送 POST 的方法。

我设法得到了一个可行的解决方案——我只发送参数和一个空的正文，因为我不需要发送数据有效负载，但也许这会对这里的人有所帮助。

在 IDE 中，我将基本 url 保存为 Selenium storedVars 项“testPageBaseUrl”：

```
<td>store</td>
<td>${TargetEnvironment}/testpage.html</td>
<td>testPageBaseUrl</td> 
```

我的参数字符串也作为storedVars项“params”：

```
<td>store</td>
<td>com=update&amp;some-param=false&amp;some-id=1</td>
<td>params</td> 
```

然后我调用我的 Selenium IDE 扩展函数，将基本 url 作为参数传递：

```
<td>postByXMLHttpRequest</td>
<td>testPageBaseUrl</td>
<td></td> 
```

我无法在 IDE 中的函数调用（命令）的 Target 字段中使用多个参数，因此该函数显式访问“params”storedVars 变量。

这是我添加到 user_extentions.js 文件中的函数，然后我在 Selenium IDE 设置中引用该文件：

```
Selenium.prototype.doPostByXMLHttpRequest = function (baseUrl) {
var httpReq = new XMLHttpRequest();

var params =  storedVars ["params"]; 
httpReq.open("POST",  storedVars[ baseUrl ]);

httpReq.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
httpReq.setRequestHeader("Content-length", params.length);
httpReq.setRequestHeader("Connection", "close");

httpReq.send(params);
}; 
```

一些背景信息： [https ://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest](https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest) [http://docs.seleniumhq.org/docs/08_user_extensions.jsp](http://docs.seleniumhq.org/docs/08_user_extensions.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:36:03.313

据我所知，没有办法通过 Selenium IDE 进行 HTTP POST，我想我试图强迫它做一些它从未打算做的事情。我将使用 JUnit 和 WebDriver 来代替我的 POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T13:25:07.730

您需要使用`seleinum.browserbot.getCurrentWindow()`来获取窗口并使用其文档成员。

```
Selenium.prototype.doCustomPost = function (baseUrl) {
    var win = selenium.browserbot.getCurrentWindow();
    var form = win.document.createElement("form");
    form.setAttribute("method", "post"  );
    form.setAttribute("action", baseUrl );

    //StoredVars is a selenium variable that can be added to by:
    //<td> store </td> <td> Value </td> <td> Key </td> 
    for(var key in storedVars ) {
        if(storedVars.hasOwnProperty( key )) {
            var hiddenField = win.document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", storedVars[ key ] );

            form.appendChild(hiddenField);
         }
    }

    win.document.body.appendChild(form);
    form.submit();
}; 
```

# ios - iOS 将一个 int 对象传递给 Coco2D CCLayer

> ID：11995386
> 
> 赞同：0
> 
> 时间：2012-08-16T21:02:23.323
> 
> 标签：ios, cocos2d-iphone

在 viewcontroller 文件中，我调用 CCLayer

```
 [director_ runWithScene:[game1 scene]]; 
```

game1 是一个 CCLayer，在

```
+ (CCScene *)scene
{
    CCScene *scene = [CCScene node];
    game1 *layer = [game node];
    [scene addChild:layer];

    return scene;
}

- (id)init
{
    if ((self = [super init]))
    {
    }
    ..
} 
```

在原始视图控制器中，我尝试通过在 game1 中编写一个新的类函数来将一个 int 对象传递给 game1 场景

```
 @synthesize point;

+ (void)setPoint:(int)point_
{
    point = point_;
} 
```

但我收到一个错误，说类函数 setPoint 无法设置实例变量。

那么如何将一个 int 值从 viewcontroller 传递给 game1 场景呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:14:20.637

正如错误所说，您无法从类方法访问实例变量。在类方法中，方法本身没有关于类的哪个特定实例应该设置变量的信息（这根本没有意义）。

您要做的是引用特定场景实例（例如，通过将其分配给属性）然后调用`[game1 setPoint:point];`

P.s.：您只需要`@synthesize point`一个手动实现`- setPoint:`（假设您的属性不是只读的）。

# html - html 和 body 元素的高度和宽度

> ID：11995392
> 
> 赞同：7
> 
> 时间：2012-08-16T21:02:40.167
> 
> 标签：html, css, height

如果我有以下标记

```
<html>
<body>
<div id="wrapper">
<div id="container">
<p>Lots of pragraphs here</p>
</div>
</div>
</body>
</html> 
```

具有以下样式

```
html, body, #wrapper
{
width: 100%;
height: 100%;
}
#container
{
width: 960px;
margin: 0 auto;
} 
```

为什么我的 html、body 和 wrapper 元素没有扩展到 FF13 中浏览器/视口的 100% 高度。在 Firebug 中查看时，html、body 和 wrapper 垂直停止在距底部一定距离的地方。容器 div 延伸到全高，因为它的高度由内容决定。

（1263px X 558px 用于 html、body、wrapper）和（960px X 880px 用于容器）

看看默认的 100%，上面的情况如下图所示。但是当我放大到最后一个 poosible 放大时，上述情况不会发生，因为下面的第二张图片显示并且 html、body、包装器延伸到全高。

（4267px X 1860px 用于 html、body、wrapper） - （960px X 1000px 用于容器）

![在此处输入图像描述](../Images/939da1cb59cb70f4c9415d47e58a1294.png) ![在此处输入图像描述](../Images/db3b458f92342ae89ffd5b997eff1593.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-16T22:07:08.157

您`html`实际上恰好延伸到视口的 100% 高度，因为这里的视口是浏览器窗口，而不是内部内容。

考虑一下（[jsfiddle](http://jsfiddle.net/AbDZu/1/)）：

```
<div id="div1">
    <div  id="div2">
        <div  id="div3">
            very much content
        </div>
    </div>
</div>

#div1 {
    height:300px;
    overflow-y:scroll;
    border: 1px solid black;
}
#div2 {
    height:100%;
}
#div3 {
    height:600px;
} 
```

`div1`这里有 300px 的高度并且是滚动的。当您滚动内容时，您只需移动内部 div 但高度保持不变，即`300px`. `height:100%`当您设置为 html时会发生完全相同的情况。您的浏览器高度保持不变。

当您缩小视口时，您没有滚动，因此内部内容的高度小于视口的高度。

**简而言之，`html {height:100%}`与父母的身高有关，而不是与内部内容的高度有关**

* * *

**更新：**

您可以为块元素的高度指定 3 种类型的值：

*   **长度**- 设置固定高度（ig '200px', '50em'）。仅此而已，对此我无话可说。

*   **百分比**- 来自[W3C 规范](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)：

> 该百分比是相对于生成框的包含块的高度计算的。如果包含块的高度没有明确指定（即，它取决于内容高度），并且该元素不是绝对定位的，则该值计算为'auto'。根元素上的百分比高度是相对于初始包含块的。

*   **auto** - 高度取决于其他属性的值。（一般在内部内容的高度上：文本、其他内联元素、块元素等）

当浏览器显示您的页面时会发生什么：

1.  它得到`height: 100%`了`<html>`。这意味着生成的高度是根据`html`包含块 ( `initial containing block`，即`browser window` 在这种情况下的生成框 ( 在这种情况下 - 元素) 的高度来计算的。比方说`1024px`。
2.  然后它`height: 100%`需要`<body>`。它会将`body`' 高度设置为 ' 的已计算高度`html`，即`1024px`.
3.  然后浏览器适用`height:auto`于`#wrapper`，然后`#container`和`<p>`。我不知道它究竟是如何做到的，但可以假设它推迟了高度设置（以及分别依赖于背景、边框等的所有其他样式）并继续处理内部内容。
4.  下一点是文本内容。浏览器采用指定的或它自己的相关属性，即`default styles`字体系列、字体大小和文本的高度。
5.  之后，它会将高度设置为 -`<p>`元素，因此`<p>`将向下延伸以包含所有内容（在这种情况下为文本）。同样的情况也发生在 `#container`和 上`#wrapper`。

如果碰巧 的高度`#wrapper`大于主体的高度（`1024 px`如已商定的那样），`overflow`则应将其应用于`body`. 这是`visible`默认设置。然后`overflow: visible`应用于`html`. 然后浏览器显示整个`window`. 老实说，我不知道这是否由 W3C 规范指定，但可以假设它是。

因此，当您滚动窗口时，您的`html`和`body`会像所有其他元素一样被移动。这与任何其他元素的行为相同（就像我在上面发布的 jsfiddle 中一样）：

![滚动身体的一部分](../Images/a66b0babf10b9868d37fddc501d97e1c.png)

**请注意，背景是在`body`元素上设置的，但它延伸到整个[画布](http://www.w3.org/TR/CSS2/intro.html#canvas)**，即远远超出`body`元素本身。这是为了您担心在 body 上设置 bg-property 的可能必要性。这 100% 符合[W3C 规范](http://www.w3.org/TR/CSS2/colors.html#background)，该规范声明（删减）：

> 对于根元素是...“html”元素的文档，其“背景颜色”的计算值为“透明”，“背景图像”的计算值为“无”，用户代理必须改为使用背景的计算值为**canvas**绘制背景时，该元素的第一个 ...“body”元素子元素的属性，并且不得为该子元素绘制背景。这样的背景也必须锚定在同一点，就像它们只为根元素绘制时一样。

当您缩小页面时，浏览器会重新计算所有尺寸。比方说，每次`Ctrl`+`-`点击页面都会缩小，例如 20%。然后你的所有文本都被缩小了，因为它的高度取决于字体大小，它受`Ctrl`+`-`点击的影响，相应地`<p>`，所有`#container`的`#wrapper`都被缩小了，因为它们的高度取决于`text`'s 的高度。但是`body`两者`html`都有高度，这取决于`window`不受`Ctrl`+`-`点击影响的高度。这就是为什么你最终得到这个： ![缩小页面](../Images/9043b292fbed9a2b50fb876b7bdb689e.png)

在这种情况下，宽度和高度行为之间没有区别。您看不到与水平尺寸相同的问题，因为您设置`width: 960px;`的尺寸`#container`小于浏览器窗口的宽度，因此不会发生溢出。如果宽度`#container`超过身体宽度，您会看到： ![同样的问题，但宽度](../Images/9615998cae0c8426814533682dce230b.png)

**这一切都是正常和预期的行为，这里没有什么要解决的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:07:39.967

因为如果元素相对于浏览器窗口，您永远无法将高度设置为 100%。这样做的原因是由于滚动，您的浏览器窗口可能会无限大。您必须设置一个固定的高度，或者您只需设置高度以扩展到其中的任何内容。

然而`width: 100%;`是完全有效的。

您还需要使用有效的 html 标签。我要做的是，而不是使用 <wrapper> 和 <container>，我会在你的 css 中创建一个类。类名通过以句点开头来声明。

```
.container{
width: 100%;
}

<div class="container"></div> 
```

祝你好运，

-布赖恩

# c# - 从 URL MVC3 中删除锚点

> ID：11995395
> 
> 赞同：0
> 
> 时间：2012-08-16T21:03:01.027
> 
> 标签：c#, asp.net-mvc-3, controller, anchor, redirecttoaction

因此，我在 PageA 上有一个附加锚点的表单，以便页面跳转到 PageA 上显示的错误。但是，当没有错误时，我正在尝试使用

```
return RedirectToAction("PageB", new { id = ID }); 
```

但是，由于某种原因，即使我正在重定向到不同的操作，锚点也会被附加。因此，如果出错，它将转到 www.domain.com/Controller/PageA#errors，它会转到 www.domain.com/Controller/PageB?id=5#errors。这会导致问题，因为 PageB 上也存在锚点错误。如何删除重定向上的锚点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:07:22.183

您可以使用 Url.RouteUrl 手动删除它（这将使用您的确切 URL 创建一个字符串）。

# .net - 在 CollectionChanged 事件 TPL 期间无法更改 ObservableCollection

> ID：11995396
> 
> 赞同：4
> 
> 时间：2012-08-16T21:03:04.277
> 
> 标签：.net, wpf, task-parallel-library, observablecollection

当我在按钮单击处理程序中的 ObservableCollection 上调用 .Clear() 时，我间歇性地收到此错误。我很困惑，因为我确实有其他 TPL 任务正在运行，但都通过以下方式更新 ObservableCollection：

```
mainWindow.Dispatcher.Invoke(new Action(delegate()
{
 this.myCollection.Add(myItem);
})); 
```

本质上的调度程序是否使我的 ObservableCollection 线程安全，因为所有操作在主 UI 线程上都是原子的？顺便说一句：我也在更新 DispatcherTimer 中集合成员的一些字段，但没有在 timer.tick 处理程序中删除或添加项目到集合中。

詹姆士：

我创建了一个示例应用程序来隔离问题，但该示例一切正常。所以我的应用程序中的其他东西必须在不同的线程上触发collectionchanged。这一切都很好，你可以 .Clear 没有错误：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <Button Name="clear" Height="23" Click="clear_Click"></Button>
    <ListBox ItemsSource="{Binding MyCollection}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"></TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

```
 public partial class MainWindow : Window
{
    private DispatcherTimer myTimer = null;

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;
        Loaded +=new RoutedEventHandler(MainWindow_Loaded);
    }

    private bool isLoaded = false;
    void  MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        if (isLoaded) return;
        isLoaded = true;

        var task = new Task(() => AddObjectsTask());
        task.Start();

        myTimer = new DispatcherTimer();
        myTimer.Interval = new TimeSpan(0, 0, 1);
        myTimer.Tick += new EventHandler(myTimer_Tick);
        myTimer.Start();

        _MyCollection.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(_MyCollection_CollectionChanged);

    }

    void _MyCollection_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Add)
        {
            var query = (from n in _MyCollection select n).ToList();
            if (query.Any())
            {
                foreach (SomeObject o in query)
                {
                    o.Name = (Convert.ToInt64(o.Name) + 1).ToString();
                }
            }
        }
    }

    void myTimer_Tick(object sender, EventArgs e)
    {
        this._MyCollection.Add(new SomeObject() { Name = 99.ToString() }); 
    }

    void AddObjectsTask()
    {
        int i = 0;
        while(true)
        {
        Thread.Sleep(10);
        this.Dispatcher.Invoke(new Action(delegate() 
        { 
            this._MyCollection.Add(new SomeObject() { Name = i.ToString() }); 
        })); 
            i++;
        }
    }

    private void clear_Click(object sender, RoutedEventArgs e)
    {
        _MyCollection.Clear();
    }

    private ObservableCollection<SomeObject> _MyCollection = new ObservableCollection<SomeObject>();
    public ObservableCollection<SomeObject> MyCollection
    {
        get
        {
            return _MyCollection;
        }
    }

}

public class SomeObject : INotifyPropertyChanged
{
    #region INotifyPropertyChanged
    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
    #endregion

    private string _Name = string.Empty;

    public string Name
    {
        get
        {
            return _Name;
        }
        set
        {
            _Name = value;
            NotifyPropertyChanged("Name");
        }
    }
} 
```

# objective-c - 一个类的 ivar 可以是它的超类的一个实例吗？

> ID：11995397
> 
> 赞同：0
> 
> 时间：2012-08-16T21:03:20.377
> 
> 标签：objective-c

如果ivars 的`ClassB`一个子类是 的一个实例，`ClassA`是否可以？对不起，如果这是一个愚蠢的问题。我只是觉得它如何继承令人困惑，但它可以拥有它的一个实例。`ClassB's``ClassA``ClassB``ClassA`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:04:45.517

这完全没问题。一个类甚至可以有一个它自己类型的 ivar。

假设您有一个 Wagon 类并且想要为火车建模。您的 Wagon 类可能有 2 个 Wagon 类型的 ivars。一个指向火车中的下一辆货车，另一个指向前一辆货车。

然后，您可以实现 Wagon 的 PassengerWagon 子类，它会从它的超类继承 Wagon ivars。需要明确的是：如果您只想跟踪 PassengerWagon 实例的邻居，您也可以只在 PassengerWagon 中定义 ivars（Wagon 类型）而不是超类，但这些邻居可以是任何 Wagon 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:06:58.477

是的，那样很好。基本上，您可以在任何类中拥有任何类型的 ivars。

# ios - 嵌套集的 NSPredicate

> ID：11995403
> 
> 赞同：-1
> 
> 时间：2012-08-16T21:04:08.080
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

假设我们有 A <-->> B <-->> C。我们有多个 A 实体，C 实体有一个名为 label 的属性。如何找到所有包含 C 实体且包含 @"1234" 的 A 实体？

我在核心数据中看到了这个[SUBQUERY，](https://stackoverflow.com/questions/6890079/subquery-in-core-data/6890424#comment15997401_6890424)效果很好，但我基本上是在尝试更深一层。

我怎么能做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:28:35.433

Dave DeLong 给出了这个问题的解决方案。

我在这里粘贴一行代码，显示对我有用的子查询，以防它可以帮助其他人。

NSPredicate * sp = [NSPredicate predicateWithFormat:@"SUBQUERY(catalogItemClasses, $b, ANY $b.catalogItems.label contains[cd] %@).@count > 0", searchText];

所以这里我处理的结构是 A <-->> B <-->> C。B 实体是“catalogItemClass”，C 是“catalogItem”实体。这允许我查询与 C 实体相关的 A 实体，这些实体具有包含字符串 searchText 的标签。

谢谢戴夫。

# javascript - socket.io - ReferenceError: io is not defined

> ID：11995406
> 
> 赞同：38
> 
> 时间：2012-08-16T21:04:22.797
> 
> 标签：javascript, android, ios, socket.io, referenceerror

我正在为 Android 2.3.5（也将与 iOS 兼容）编写一个应用程序。我希望将数据从应用程序的 HTML/Javascript 传输到服务器上的 Python 程序（它使用 Twisted 引擎来检索数据）。

我尝试了很多东西，查看了各种论坛、答案、教程和网页——包括这里的大部分——但找不到答案。这是我在 index.html 文件中的相关 Javascript：

```
<script src="socket-lib/socket.io.js"></script>
<script type="text/javascript" charset="utf-8">
function sendData() {
    try {
        var socket = io.connect('http://mywebsite.com:12345');
        socket.on('connect', function(data) {
            socket.send('Hello.');
            socket.on('message', function (msg) {
                socket.send('This is where I send data?');
            });
        });
    }
    catch(err) {
        alert('ERROR: socket.io encountered a problem:\n\n' + err);
    }
} // end of sendData 
```

如果你不知道，我仍然很困惑这是如何工作的；我什至无法测试任何东西。不断出现的错误是`ReferenceError: io is not defined`。一些网站使用类似`var io = require('socket.io');`. 但随后它会导致相同的错误：`ReferenceError: require is not defined`.

我将 socket-lib 文件夹放在 assets/www 中，任何其他 Javascript 源都应该放在其中。这也是 index.html 文件所在的位置。许多网站使用`<script src="/socket.io/socket.io.js"></script>`，但这对我来说毫无意义。许多网站也暗示使用 node.js，但我从未在任何地方看到它。

我怎样才能使这项工作？

**回复编辑：**

我在 Chrome 中尝试过，它给了我一个`Uncaught ReferenceError: require is not defined`socket.io.js 文件。所以我决定在 require.js 之前获取它。然后它给出了错误`Uncaught Error: Module name "socket.io-client" has not been loaded yet for context`。由于我没有使用它，所以我不在乎。但是，当我尝试连接时，它给出了同样的`io is not defined`错误。当我将其定义为`var io = require('socket.io')`时，错误为`Error: Module name "socket.io" has not been loaded yet for context: _ http://requirejs.org/docs/errors.html#notloaded`。我查看了网站，它对我没有任何帮助。当我尝试将“require”作为函数参数时，会发生另一个错误：`TypeError: undefined is not a function`.

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-08-28T13:37:51.850

对于那些因`socket.io`.

你不能来源`/socket-lib/socket.io.js`，

你必须来源`http://yourwebsite.com:12345/socket.io/socket.io.js`。

服务器会自动为您完成其余的工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-23T22:43:00.840

我通过更改 index.html 以从 bower 导入套接字 io 客户端自己解决了这个问题，首先我安装了 bower 组件：

```
 bower install socket.io-client 
```

然后我将 index.html 中的引用更改为：

```
 <script src="bower_components/socket.io-client/socket.io.js"></script> 
```

或者文件可以在 - lib/socket.io-client/dist/socket.io.js

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T05:23:16.970

我设法通过这个失误，并浪费了大约一个小时，结果证明是一个非常基本的错误。

什么时候没有定义函数？如“Uncaught ReferenceError: io is not defined”。这是否意味着该功能在“创建”之前就被“使用”了？

在我的 HTML 文件中“调用”javaScript 文件的部分中，它***看起来***像这样：

```
<script src='./js/playerChatter.js'></script> <!-- this one calls io -->
<script src="http://localhost:2019/socket.io/socket.io.js"></script><!-- This Creates io --> 
```

我***把***它改成了这个

```
<script src="http://localhost:2019/socket.io/socket.io.js"></script> <!-- This Creates  io -->
<script src='./js/playerChatter.js'></script> <!-- this on calls io --> 
```

所以现在项目“io”，无论是对象还是函数......实际上是在使用之前创建的：D

玩得开心！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-05T12:22:35.730

在 socket.io.js 文件中编写服务器端代码并​​尝试 src="/socket.io/socket.io.js"

希望这能解决你的问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T05:11:15.457

[当使用require.js](http://requirejs.org/)让 socket.io 与许多其他库一起工作时，我遇到了同样的错误，结果是因为尝试从同一个 /js 文件夹加载 socket.io.js 文件而不是其他文件夹文件。

将它放在一个单独的文件夹中，为我修复它，你可以**[在这个 gist 中看到代码，](https://gist.github.com/3651490)**但我所做的一切都是为了让它工作，是这样的：

代替：

> socketio: 'socket.io',

采用：

> socketio: '../socket.io/socket.io',

不确定这种行为的原因，但我希望它对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T21:14:04.993

这看起来像您的浏览器找不到 socket.io.js 文件。您可以尝试使用 Firefox+Firebug 或 Chrome Web 开发人员工具在您的计算机上打开 index.html，然后查看如何请求 .js 文件。另一方面，您可以检查为 .js 文件提供服务的网络服务器上的日志，是否有任何文件未找到错误。

该`require`功能将由例如[RequireJS](http://requirejs.org/)提供，但您仍需要正确配置脚本的路径才能使其正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-11T19:24:33.597

对我来说，在调试了所有非常有用的建议之后，结果证明我的节点服务器已经停止了。在开发期间，我一直在终端窗口中手动运行它。

确保您的节点 [yourservercode].js 在指定端口上运行！:-]

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-12T21:07:31.613

我使用jspm。

添加这个：

```
import 'btford/angular-socket-io/mock/socket-io'; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-07T17:36:37.870

在我的情况下，使用带有 C# **UnitySocketIO插件的****Unity WebGL**，我需要在 Init 和 Connect 之间添加**延迟**（1 秒），因为第一种方法没有时间将新的 JS Socket 对象和代码（侦听器）添加到页面以和它一起工作..

# sql-server - 如果列不是单例，如何从 sql server 中的 xml 列中进行选择

> ID：11995414
> 
> 赞同：1
> 
> 时间：2012-08-16T21:04:55.240
> 
> 标签：sql-server, xml, sql-server-2008

我正在尝试查询一个 xml 列...以下查询工作正常...

```
SELECT
            OrderID,
            AccountNumber, 
            ItemID,
            substring(replace(lower(s.Street),' ',''),1,8) 
                + substring(replace(lower(s.City),' ',''),1,8) 
                + substring(replace(lower(s.State),' ',''),1,8) 
                + substring(replace(s.ZipCode,' ',''),1,5)AddressHash,
            ShipName,
            Street,
            Street2
            City,
            State,
            ZipCode,
            OrderDate
    FROM   (SELECT UpwardOrderID, AccountNumber, UpwardLeagueID,
                    /* NOTE THAT THIS SYNTAX WORKS ONLY WORKS BECAUSE THE NODES ARE SINGLETONS. */
                   x.value('(./ShipTo/Name)[1]', 'VARCHAR(255)')                                                AS ShipName,
                   x.value('(./ShipTo/Street1)[1]', 'VARCHAR(255)')                                             AS Street,
                   x.value('(./ShipTo/Street2)[1]', 'VARCHAR(255)')                                             AS Street2,
                   x.value('(./ShipTo/Subdivision1)[1]', 'VARCHAR(255)')                                        AS City,
                   x.value('(./ShipTo/Subdivision2)[1]', 'VARCHAR(255)')                                        AS State,
                   x.value('(./ShipTo/PostalCode)[1]', 'VARCHAR(255)')                                          AS ZipCode,
                   x.value('(./Order/ClientOrderDate)[1]', 'DATETIME')                                          AS OrderDate
                   --x.value('(./ShippingMethods/ShippingMethod/ID)[../Selected/text()=1]','VARCHAR(255)')
            FROM   av_order CROSS APPLY orderXML.nodes('/Order/ShippingInformation') t(x)
            WHERE orderXML Is Not Null) s 
```

除了我试图在 FROM 子查询中选择的最后一列之外，此查询工作正常。

不同之处在于 (ShippingMethod) 列不是单例。XML 包含所有运输方式，我想选择 SELECTED 运输方式的 ID。这是 XML 的那部分的样子......

```
<Order>...
    <ShippingInformation>
        <ShipTo>
            <Name>DONT SHOW</Name>
            <Attention>DONT SHOW</Attention>
            <Street1>DONT SHOW</Street1>
            <Street2 />
            <Subdivision1>DONT SHOW</Subdivision1>
            <Subdivision2>IL</Subdivision2>
            <PostalCode>62092</PostalCode>
            <CountryCode>US</CountryCode>
            <AllowEmptyShipTo>0</AllowEmptyShipTo>
            <ContactInfo>DONT SHOW</ContactInfo>
        </ShipTo>
        <ShippingMethods>
            <ShippingMethod>
                <ID>UPSGROUND</ID>
                <Selected>1</Selected>
                <Cost>134.08</Cost>
            </ShippingMethod>
            <ShippingMethod>
                <ID>PICKUP</ID>
                <Selected>0</Selected>
                <Cost>0</Cost>
            </ShippingMethod>
            <ShippingMethod>
                <ID>UPS3DAY</ID>
                <Selected>0</Selected>
                <Cost>288.46</Cost>
            </ShippingMethod>
            <ShippingMethod>
                <ID>UPS2DAY</ID>
                <Selected>0</Selected>
                <Cost>347.91</Cost>
            </ShippingMethod>
            <ShippingMethod>
                <ID>UPSNEXTBUSDAY</ID>
                <Selected>0</Selected>
                <Cost>956.73</Cost>
            </ShippingMethod>
        </ShippingMethods>
    </ShippingInformation>
...</Order> 
```

我该怎么做才能选择已选择的运输方式 ID？

赛斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:30:40.497

`Selected`您可以在 xQuery 表达式中使用谓词。

这将选择值为 的第一个`ShippingMethod`节点。`Selected``1`

```
x.value('(./ShippingMethods/ShippingMethod[Selected = 1]/ID)[1]','VARCHAR(255)') 
```

# css - css 将 div 与 at 右侧 100% 的表格对齐

> ID：11995421
> 
> 赞同：0
> 
> 时间：2012-08-16T21:05:30.980
> 
> 标签：css, html, css-float, alignment

我有一个设置为 100% 宽度的表格。我有时会添加一个带有 php 广告的随机 div。我希望广告 div 位于右侧和表格的内容中。我希望表格位于左侧，但仍处于 100% 左右，它将填充广告 div 左侧的所有空间。

简而言之，所以当 div 不存在时，表格将填充 100% 宽度。当 div 存在时，div 将位于表格的右侧，设置宽度为 300 像素。

这是 div 的样式

```
.ContentAds {
    float: right;
    height: 100%;
    width: 300px;
    display: block;
    clear: none;
} 
```

该表不是一个 div，而是简单地设置为 100% 宽度。

```
<table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
  <tr>
    <td><p class="Title">Title</p>
    <p>This is the content. This is the content. This is the content. This is the content. This is the content. This is the content. This is the content. This is the content.. </p></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:43:23.080

现在我只能建议用定位的 div 包裹你的桌子。但我不能确定这对你来说是否足够，因为你提供了相当少量的代码 [jsfiddle](http://jsfiddle.net/ySx3j/)

```
<div class="ad">
    advertise... advertise
    advertise... advertise
    advertise... advertise
</div>
<div class="table_wr">
    <table>
        <tr>
            <td>
                <p class="Title">Title</p>
                <p>
                    This is the content. This is the content.
                    This is the content. This is the content.
                    This is the content. This is the content.
                    This is the content. This is the content..
                </p>
            </td>
        </tr>
    </table>
</div> 
```

CSS

```
body {
    position: relative;
}
table {
    border: 1px solid black;
    width: 100%;
}
.ad {
    float:right;
    width:300px;
    height: 500px;
    background-color: #a2e89f;
}
.table_wr {
    position: absolute;
    left: 0;
    right: 300px;
} 
```

为表格设置了边框，您可以看到表格的延伸位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:20:34.690

我认为这行不通，除非您在另一个 DIV 存在时为表格设置较小的设置宽度，然后您也可以将其浮动到左侧。

也许您可以将表格设置为 100%，然后当另一个 DIV 存在时，您可以在表格上添加一个类来调整宽度并使其浮动？

# c# - 由于 asp:Panel 导致 jQuery 未执行

> ID：11995423
> 
> 赞同：2
> 
> 时间：2012-08-16T21:05:35.593
> 
> 标签：c#, jquery, asp.net, html, panel

我在 contentcarousel 中使用 jQuery 插件。这是一个很好的插件，但我需要能够根据用户动态创建一定数量的 div。

为了实现这一点，我使用一个`<asp:panel>`然后在 C# 中运行一个 Literal & foreach 来填充面板。使用时出现问题`<asp:panel>`。

似乎 jQuery 插件只有在 div 以特定顺序出现时才能工作。

IE。

```
<div id="ca-container" class="ca-container">
<div class="cawrapper">
<div class="ca-item ca-item-2">
<div class="ca-item-main"> 
```

使用面板时，顺序变为

```
<div id="ca-container" class="ca-container">
<div class="cawrapper">
<div id="panelinfo">
<div class="ca-item ca-item-2">
<div class="ca-item-main"> 
```

并且插件停止工作。至少我是这样假设的，因为箭头没有出现，按钮都不起作用等等。

有谁知道是否有办法解决这个问题？也许是一种“隐藏”面板变成的 div 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:09:44.363

听起来您想要一个控件，其行为类似于`Panel`服务器端代码，而不是被呈现为`div`只是扑通一声将其内部的所有内容都放入其中，而无需添加任何“额外”内容。这几乎就是一个`asp:Placeholder`. 只需使用它而不是`Panel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:08:14.827

尝试将您的 JQuery 代码移动到 window.load 中。我假设您在 document.ready 中有您的 jquery，它将在 dom 准备就绪的第二秒触发。

```
$(window).load(function(){/*Your code*/} 
```

# android - 如何将行异步添加到列表视图？

> ID：11995429
> 
> 赞同：7
> 
> 时间：2012-08-16T21:06:11.743
> 
> 标签：android, android-listview, android-asynctask, android-fragments, android-arrayadapter

我需要`ListView`用来自网络的数据填充很长的时间，比如整个数据收集需要 2-3 秒。我不希望用户看到加载`Dialog`并等待整个列表下载。相反，我想在`ListView`每个项目可用时更新。

*   我怎样才能做到这一点？
*   我假设通过添加到`ArrayAdapter`from an `AsyncTask`with `OnProgressUpdate`?
*   我必须`notifyDatasetChanged()`在每添加一行后发出一个吗？
*   `Fragment`/`Loader`方法更好吗？
*   是否有此类案例的教程或 API 演示参考实现？

`Activity`在死亡之前完全获取数据并不重要（即`Service`没有必要）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T04:39:32.510

到目前为止，我见过的最好的方法来自[CommonsWare](https://github.com/commonsguy/cw-android/blob/master/Threads/Asyncer/src/com/commonsware/android/async/AsyncDemo.java)。在这个相关的[答案](https://stackoverflow.com/a/2131716/403455)中找到了。

显然没有调用没有`add`错`notifyDatasetChanged()`。

```
public class AsyncDemo extends ListActivity {
  private static final String[] items={"lorem", "ipsum", "dolor",
                                      "sit", "amet", "consectetuer",
                                      "adipiscing", "elit", "morbi",
                                      "vel", "ligula", "vitae",
                                      "arcu", "aliquet", "mollis",
                                      "etiam", "vel", "erat",
                                      "placerat", "ante",
                                      "porttitor", "sodales",
                                      "pellentesque", "augue",
                                      "purus"};
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setListAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1,
                        new ArrayList<String>()));

    new AddStringTask().execute();
  }

  class AddStringTask extends AsyncTask<Void, String, Void> {
    @Override
    protected Void doInBackground(Void... unused) {
      for (String item : items) {
        publishProgress(item);
        SystemClock.sleep(200);
      }

      return(null);
    }

    @Override
    protected void onProgressUpdate(String... item) {
      ((ArrayAdapter<String>)getListAdapter()).add(item[0]);
    }

    @Override
    protected void onPostExecute(Void unused) {
      Toast
        .makeText(AsyncDemo.this, "Done!", Toast.LENGTH_SHORT)
        .show();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:21:53.780

我想你可以从这里开始：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

因此，您需要对服务器进行异步调用以获取数据。或者您可以为此运行后台任务。

你可以谷歌`AsyncTask`搜索或在 stackoverflow 上搜索。这是示例：[AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:01:18.440

只是为了确保`ListView`'s`adapter`及其底层数据不能从 UI 线程以外的线程更新。更新必须在主应用程序线程上执行。非 UI 线程可以使用`post()`or`runOnUiThread()`等​​来调用更新。

像这样调用`notifyDatasetChanged()`不是很好的做法，它应该由它`Adapter`自己或改变数据的对象调用。

由于网络运行缓慢，请考虑是否不希望将下载的数据存储在`database`. `CursorAdapter`最后，您最好使用实现某种`Loader`，这样当您`database`在工作线程中更新时，`ListView`将自动收到有关更改的通知。

# java - 在不从数据库中提取实体的情况下获取 JPA 中实体的 id？

> ID：11995430
> 
> 赞同：2
> 
> 时间：2012-08-16T21:06:13.100
> 
> 标签：java, hibernate, jakarta-ee, jpa

假设我有以下两个具有一对一关系的 JPA 实体

```
@Entity
public class Foo {
  @Id 
  private Integer id; 

  @Column(...)
  private String data;
}

@Entity
public class Bar {
    @Id 
    private Integer id; 

    @OneToOne(fetchType=LAZY)
    @JoinColumn(name="foo_fk")
    private Foo foo; 

    @Column(...)
    private String x; 

    @Column(...)
    private String y; 
} 
```

我想要做的是找到所有符合某些搜索条件的 Bar 实体，例如`SELECT Bar b FROM Bar WHERE b.x = :xValue`我想要做的是迭代结果集并提取 foo 的主键和值 y 即代码沿线。

```
List<Bar> results = // query to get all the results that meet value x 
for(Bar bar: results) {
    String x = bar.getX();
    String y = bar.getY();
    Integer fooId = bar.getFoo().getId(); // at this point Hibernate pulls back foo from the db 
    // do something with x,y and fooId 
 } 
```

我想避免的是让 ORM 在我做的时候发出一个 SELECT `bar.getFoo().getId()` 。我知道我可以按照以下方式进行报告查询`SELECT new com.example.MyResult(b.x,b.y,b.foo.id) FORM Bar b WHERE b.x = :xValue`

有没有办法在`bar.getFoo().getId()`不编写报告查询的情况下避免选择？我正在使用 Hibernate 3.6.10 和 JPA 2 如果它可以做我想做的事，我很高兴升级到 Hibernate 4.1.x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:58:31.210

```
SELECT b.foo.id FROM Bar b WHERE b.x = :something 
```

这将只为您提供 ID，但不能保证 ORM 层将如何获取它们。如果您想绝对控制本机查询，请自己编写它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:32:17.333

来自 Bar的`foo`关联显然很懒惰，让它变得急切会有所帮助。

# visual-studio-2010 - Visual Studio 2010：是否有任何函数可以在 .cpp 文件中的所有行创建断点？

> ID：11995432
> 
> 赞同：1
> 
> 时间：2012-08-16T21:06:25.117
> 
> 标签：visual-studio-2010, breakpoints

当我的朋友编写一些代码时，我通常不会全部理解，除非我在各处插入断点并开始逐行运行代码。

他只是给我发了一个包含 500 行的 .cpp 文件，这意味着我需要单击 500 次才能在每一行指定一个断点。

Visual Studio 2010 中是否有任何功能可以为我完成这项工作？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:08:33.933

您始终可以在 main() 的第一行设置 1 个断点，然后只需使用 Step Through 选项遍历每一行，如果是函数调用，则使用 Step Into。

# sql - ORACLE 通过排除一个字段来选择和分组

> ID：11995437
> 
> 赞同：3
> 
> 时间：2012-08-16T21:06:58.360
> 
> 标签：sql, oracle, group-by

我有一个非常简单的查询（在 Oracle 11g 上）来选择 3 个字段：

```
select field1, field2, field3, count(*) from table
where...
group by field1, field2, field3
having count(*) > 10; 
```

现在，我需要的是从“group by”中排除“field3”，因为我只需要对字段 1 和 2 进行分组，但在输出中我还需要 field3。据我所知，选择中的所有字段也必须在“分组依据”中报告，那么我该如何处理呢？

谢谢卢卡斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:08:58.810

```
select t.field1, t.field2, t.field3, tc.Count
from table t
inner join (
    select field1, field2, count(*) as Count
    from table 
    where... 
    group by field1, field2 
    having count(*) > 10 
) tc on t.field1 = tc.field1 and t.field2 = tc.field2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:53:41.020

使用“count”函数的[解析版本：](http://hoopercharles.wordpress.com/2009/12/26/sql-%E2%80%93-count-analytical-function-group-by-having/)

```
select * from (
select field1, field2, field3, count(*) over(partition by field1, field2) mycounter
from table ) 
--simulate the having clause
where mycounter > 10; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-19T19:59:55.750

如果您不再分组，则每个组`field3`可能会突然不同。`field3`您必须决定显示哪一个，例如最大值：

```
select field1, field2, max(field3), count(*) from table
where...
group by field1, field2
having count(*) > 10; 
```

# ios - 如何压印 UIImage？

> ID：11995438
> 
> 赞同：2
> 
> 时间：2012-08-16T21:07:04.897
> 
> 标签：ios, core-graphics

我有 UITableView 与具有图像的单元格。现在我试图使图像在被选中时看起来像 UITabBarItem 图像。我打算按照这个小教程将图像剪辑成渐变。[http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)

我想压印剪辑图像以赋予它更多生命，但无法找到如何使用 UIImage 进行此操作的简单解释。

我发现了这一点，但我很难理解压花的过程。[http://javieralog.blogspot.com/2012/01/nice-emboss-effect-using-core-graphics.html](http://javieralog.blogspot.com/2012/01/nice-emboss-effect-using-core-graphics.html)

如果我能得到任何帮助或领导，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:46:48.420

除了 Core Graphics 实现和 NYXImagesKit，我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中还有一个浮雕过滤器。要对 UIImage 进行浮雕，您可以简单地使用以下代码：

```
GPUImageEmbossFilter *embossFilter = [[GPUImageEmbossFilter alloc] init];
embossFilter.intensity = 2.0;
UIImage *embossedImage = [embossFilter imageByFilteringImage:inputImage]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:45:24.073

我编写了一个名为[Cocoa Touch-Adding texture with overlay view](https://stackoverflow.com/questions/8083885/cocoa-touch-adding-texture-with-overlay-view/8090368#8090368)的方法。你可能会觉得这很有帮助。它确实要求您有一个灰度叠加视图，可以生成“浮雕”外观。如果您了解 Photoshop 或其他图像编辑程序，则可以创建适当的叠加层来满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:08:13.557

经过长时间的谷歌搜索。我相信我找到了我需要的东西。这是一组允许您轻松操作 UIImage 的类别。

[http://www.cocoaintheshell.com/2012/01/nyximagesutilities-nyximageskit/](http://www.cocoaintheshell.com/2012/01/nyximagesutilities-nyximageskit/)

# javascript - 在模态窗口中将值传递给 javascript 函数

> ID：11995439
> 
> 赞同：0
> 
> 时间：2012-08-16T21:07:07.557
> 
> 标签：javascript, jquery, coldfusion, modal-dialog

如果用户单击删除用户按钮，我会显示一个模式窗口，要求确认删除。在模态窗口中，如果他们单击“是”，则调用一个函数来删除用户（通过 ajax）。如果否，则模态窗口刚刚关闭。这就是它应该如何工作的方式。但我不知道如何将用户 ID 传递给是按钮。以下是我到目前为止要删除用户的内容，但可能还很遥远。

```
<div class="modal hide fade" id="DeleteUserModal">
<div class="modal-header">
    <button class="close" data-dismiss="modal">x</button>
    <h3>Delete User?</h3>
</div>
<div class="modal-body">
    <div class="row-fluid">
        <div class="span12">
            <p>Are you sure you want to permanently remove this user?</p>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <a href="javascript:deleteUser(#rsData.UserID#)" class="btn btn-danger">Yes, I'm sure</a>
            <button class="btn" type="submit" data-dismiss="modal">No way!</button>
        </div>            
    </div>
</div>
<div class="modal-footer">
    <a href="##" class="btn" data-dismiss="modal">Close</a>
</div> 
```

我不知道如何将用户 ID 传递到上述模式窗口中的这一特定行：

```
<a href="javascript:deleteUser(#rsData.UserID#)" class="btn btn-danger">Yes, I'm sure</a> 
```

当我使用 jQuery 时，答案可以用 JavaScript 编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:14:35.113

使用数据属性。他们会让你开心。[http://www.broken-links.com/2010/11/18/data-attributes-in-html-and-jquery/](http://www.broken-links.com/2010/11/18/data-attributes-in-html-and-jquery/)

而是给这个节点：

```
<a href="javascript:deleteUser(#rsData.UserID#)" class="btn btn-danger">Yes, I'm sure</a> 
```

..一个ID：

```
<a id="delete-user-link" class="btn btn-danger">Yes, I'm sure</a> 
```

..当您要删除特定用户时（因此单击列表中的删除按钮），为特定用户ID设置数据属性：

```
$(".delete-button").click(function(){
    $("#delete-user-link").data("user-id", $(this).data("user-id");
    // show the modal
}); 
```

这确实需要您的删除按钮（在列表中）具有数据属性，例如：

```
<a class="btn" data-user-id="123">delete</a> 
```

并添加一个小的 jQuery 方法：

```
$("#delete-user-link").click(function(){
    var userId = $(this).data("user-id");
    // do your delete stuff here
}); 
```

这应该够了吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:13:58.747

对于单击以加载模式窗口：

```
var delete_id = 1234;// Set this to the appropriate value
$(".span12 a.btn-danger").attr("href", "javascript:deleteUser("+delete_id+")"); 
```

# php - 如何在 symfony2 中向未绑定的表单字段添加验证

> ID：11995440
> 
> 赞同：2
> 
> 时间：2012-08-16T21:07:13.720
> 
> 标签：php, forms, symfony

我正在尝试验证 symfony2 表单中的未绑定字段。

我用谷歌搜索并找到了几个类似的解决方案，所以我复制粘贴并将我自己的东西放在那里，但它对我不起作用。我阅读的所有解决方案中可能都缺少使用声明或某些内容，因此省略了，因为每个人都知道它们是必要的……除了这里的菜鸟。

我的代码：

```
<?php

namespace BizTV\UserBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

use Symfony\Component\Validator\Constraints\CallbackValidator as CallbackValidator;
use Symfony\Component\Form\FormValidatorInterface;

use Doctrine\ORM\EntityRepository;

class newServerType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder
            ->add('company', 'entity', array(
                'label' => 'Vilket företag tillhör servern? ',
                'multiple' => FALSE,
                'expanded' => FALSE,
                'property' => 'companyName',
                'class'    => 'BizTV\BackendBundle\Entity\company',
            ));     

        $builder->add('screenName', null, array('property_path' => false, 'label' => 'Namn på skärmen (användaren kan ändra det senare) '));

        $builder-> addValidator(new CallbackValidator(function(FormInterface $form){
          $screenName = $form['screenName'];
            if (empty($screenName)) {
              $form['screenName']->addError(new FormError("Du måste ange ett namn för den nya skärmen"));
            }
        }));

        $builder
            ->add('username', 'text', array('label' => 'Servernamn (endast för serverns login samt vår referens)'))            
            ->add('plainPassword', 'repeated', array('type' => 'password', 'first_name' => 'Lösenord för server ', 'second_name' => 'Upprepa lösenord för server',));

    }

    public function getName()
    {
        return 'biztv_userbundle_newservertype';
    }
} 
```

我的错误：

> 可捕获的致命错误：传递给 Symfony\Component\Form\FormBuilder::addValidator() 的参数 1 必须实现接口 Symfony\Component\Form\FormValidatorInterface，给出 Symfony\Component\Validator\Constraints\CallbackValidator 的实例，在 /var/www 中调用/biztv_symfony/src/BizTV/UserBundle/Form/newServerType.php 在第 35 行并在 /var/www/biztv_symfony/vendor/symfony/src/Symfony/Component/Form/FormBuilder.php 第 255 行定义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T18:55:34.620

因此，对于其他需要验证 symfony 2 中未绑定表单字段的人来说，我最终是如何做到的 - 结果我错过了一堆使用语句，它们没有在我发现其他线程的任何网站上列出主题。

我已经清除了除了必需品之外的所有东西。感谢 m2mdas 在这方面帮助我。

```
<?php

namespace BizTV\UserBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormValidatorInterface;
use Symfony\Component\Form\FormError;

use Doctrine\ORM\EntityRepository;

class newServerType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {   
        $builder->add('screenName', null, array('property_path' => false, 'label' => 'Namn på skärmen (användaren kan ändra det senare) '));

        $builder-> addValidator(new CallbackValidator(function(FormInterface $form){
          $screenName = $form->get('screenName')->getData();
            if (empty($screenName)) {
              $form['screenName']->addError(new FormError("Du måste ange ett namn för den nya skärmen"));
            }
        }));    
    }

    public function getName()
    {
        return 'biztv_userbundle_newservertype';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:21:30.500

`CallbackValidator`FQCN 应该是`Symfony\Component\Form\CallbackValidator`.

# wpf - Windows 8 GUI，和 WPF/SilverLight/WinRT/Metro/BUILD 关系

> ID：11995445
> 
> 赞同：6
> 
> 时间：2012-08-16T21:07:27.297
> 
> 标签：wpf, windows-8, microsoft-metro

**固定**：

我没有使用上面指定的任何技术，并且我无法找到有关标题中技术之间关系的当前信息，所以如果有人能大致向我解释所有这些主题，我会很高兴..

根据事实和微软官方信息，WPF 是否仍然相关？大约一年前，我记得很多关于 WPF 已死的标题。是什么让人们这么说？去年有什么变化吗？

另外，metro/WinRT/build 需要哪些知识？知道 WPF 是否对这些都有帮助？多少？

我发现了类似的问题，但它们来自大约一年前，我认为有些东西已经改变了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:18:20.043

那可能是一个很长的对话...... :) 我会尽可能简短......

WPF -> 在 Windows 上构建桌面应用程序的首选基于 XAML 的技术。

WinRT 应用程序 -> 用于构建可通过 Windows 应用商店交付的应用程序的下一代平台。您选择的 HTML/js 堆栈、XAML/C#/VB 或 XAML/C++。堆栈的选择取决于您的技能组合和应用程序需求。--- HTML/js -> 利用 Web 开发技能和现有资产来创建 WinRT 应用程序 --- XAML/C#/VB -> 利用您的 .NET 和/或 XAML 技能和资产来创建 WinRT 应用程序 --- XAML/C++ -> 与上面相同，但适用于 C++，还提供对 DirectX 等内容的访问

一般来说，堆栈是相对相等的（除了 DirectX 之外，只有 C++），尽管有些堆栈比其他堆栈更容易。它更像是一种技能/资产选择。同样，这是一个广泛的刷子，根据您的要求，您可能会发现一个堆栈比另一个更好。

WinRT 和桌面都继续在英特尔平台上。ARM 平台具有 WinRT，但您无法部署桌面应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:44:35.950

WPF 在 .NET 4.5（Win8 附带的 .NET Framework 版本）中得到了增强。所以在 Windows 8 中并没有死，增强了.... 比以前更快、更强大。编写不针对 WinRT 的应用程序，也就是桌面应用程序，正如您所指出的，您仍然有很多选择。

仅供参考，在 4.5 中对 WPF 进行了一些非常酷的增强。诸如功能区控制、性能增强、绑定增强和各种其他好东西之类的东西。有关完整列表，请参阅 MSDN 文档[http://msdn.microsoft.com/en-us/library/bb613588(v=VS.110).aspx](http://msdn.microsoft.com/en-us/library/bb613588(v=VS.110).aspx)。

# java - Facebook SDK 无法启动活动 ComponentInfo

> ID：11995446
> 
> 赞同：0
> 
> 时间：2012-08-16T21:07:30.980
> 
> 标签：java, android, facebook

我卸载了我的应用程序并通过 ADB 重新安装它，现在 Facebook 的东西都不起作用。该代码与以前完全相同，但它只是给了我以下错误：

（顺便说一句，代码与 Android 教程的内容相同，当然是为了测试）。

以下错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.polygonattraction.lovebirds/com.polygonattraction.lovebirds.facebook.FacebookLoginTest}: java.lang.NullPointerException 
```

它似乎发生在这条线上：

```
facebook.authorize(this, new String[] {"user_photos","user_about_me","friends_photos","user_status", "publish_stream"}, Facebook.FORCE_DIALOG_AUTH, new DialogListener() 
```

问题是，没有调用任何函数（onComplete、onFacebookError、onError 或 onCancel）

这很奇怪，它只是在授权时崩溃。在我的所有 3 台设备上都试过了，其中一台没有安装 facebook，而且从未安装过该应用程序。仍然因相同的错误而崩溃。

我通过执行以下操作调用 facebook 活动：

```
 Intent intent = new Intent(this, com.polygonattraction.lovebirds.facebook.GetFacebookToken.class);
        startActivityForResult(intent, GET_FROM_FACEBOOK); 
```

还有其他人有这个错误/错误并知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:20:04.987

您可以粘贴完整的堆栈跟踪吗？

如果它是一个 NPE on `facebook.authorize(...)`，那么您可能忘记实例化`facebook`. 确保在方法的开头实例化它`onCreate`。

```
 Facebook facebook = new Facebook("YOUR_APP_ID"); 
```

还要确保您已将我们的 Facebook Android SDK 作为库包含在您的项目中。

# android - 如何检测何时选择了 pagerTabStrip？

> ID：11995449
> 
> 赞同：0
> 
> 时间：2012-08-16T21:07:48.937
> 
> 标签：android, touch, listener

使用旧的 SwipeyTabs，您可以简单地使用 onSwipeyTabSelected.onSwipeyTabSelected，现在 android 于 2012 年 6 月发布了 PageTabStrip，它旨在简化工作，实际上它适用于简单的情况。但我还没有找到任何实际上允许我检测选项卡选择的方法，例如：

```
__________________________ 

| |表1| 选项卡2| 

______________________________

```

如果我向右滑动并选择了 Tab2：

```
__________________________ 

|Tab1 |Tab2| Tab3| 

______________________________

```

如何在我的活动中检测/触发包含选择此选项卡的 PagerTabStrip 的事件？

PS请原谅我蹩脚的ascii艺术：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:24:38.260

由于 your`PagerTabStrip`与 a 绑定`ViewPager`，并更改了 的内容，因此`ViewPager`您可以将 a 注册`ViewPager.OnPageChangeListener`到`ViewPager` [via`setOnPageChangeListener()`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener%28android.support.v4.view.ViewPager.OnPageChangeListener%29)。

如果您的论点是“好吧，如果他们通过标签滑动而不是滑动寻呼机的正文，我想做不同的事情”，那么我不是那种 UX 的粉丝。

# regex - 使用 RegEx 仅替换段落中第一次出现的单词

> ID：11995450
> 
> 赞同：0
> 
> 时间：2012-08-16T21:08:01.657
> 
> 标签：regex

我有两段。我只想用' *{yootooltip :: 它是一种广泛使用的非处方镇痛药（止痛药）和解热药（退烧药）替换第一次出现的特定单词'***对乙酰氨基酚'。***过量使用扑热息痛会损害多个器官，尤其是肝脏和肾脏。}对乙酰氨基酚{/yootooltip}* '

该段落是： *Percocet 是一种止痛药，部分由羟考酮制成，部分由**对乙酰氨基酚**制成。通常会为患有急性剧烈疼痛的患者开处方。因为它含有羟考酮，这种物质会让人上瘾，也是一种危险的滥用处方药。出售或使用未经许可专业人员规定的 Percocet 是非法的。2008 年，Percocet 等药物（同时含有羟考酮和**对乙酰氨基酚）**作为它们的主要成分）是整个安大略省最畅销的处方药。记录还显示，羟考酮（包括 Percocet 等品牌）的死亡率翻了一番。这就是为什么上瘾的人必须去安大略省戒毒中心的原因。大多数戒毒所可以解决 Percocet 成瘾问题。*

我正在尝试为此编写一个正则表达式。我试过 \bacetaminophen\b 但它正在取代这两种情况。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:13:21.993

`$limit`在 PHP 的`preg_replace`函数[http://us2.php.net/manual/en/function.preg-replace.php](http://us2.php.net/manual/en/function.preg-replace.php)中使用可选参数

```
$text = preg_replace('/acetaminophen/i', 'da-da daa', $text, 1); 
```

将仅替换第一次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:15:11.663

对于[您正在使用的工具](http://www.pagecolumn.com/tool/regtest.htm)，只需使用以下命令：

```
(.*?)\bacetaminophen\b 
```

# python - 在 try...except 块中处理 generator.send() 时出现异常

> ID：11995454
> 
> 赞同：1
> 
> 时间：2012-08-16T21:08:14.837
> 
> 标签：python, try-catch, generator, yield, except

```
filename = 'tempfile'

def tail(filename):
    fd = open(filename)
    while True:
        line = fd.readline()
        if not line:
            continue
        else:
            if filename != 'uh':
                yield line
            else:
                print 'Returning f to close the file'
                yield fd

try:
    genObj = tail(filename) 
    valfromgen= genObj.next()
    while valfromgen:
        print valfromgen
        valfromgen= genObj.next()
except:
    traceback.print_exc()
    try:
        fd_Got_Back = genObj.send('uh')
        fd_Got_Back.close()
    except:
        traceback.print_exc() 
```

* * *

代码的意图：我只在生成器函数中打开了文件，而不是在它之外，但是，我想通过使用“发送”来关闭生成器函数之外的文件。

我正在尝试做的事情：`tail -f`从 unix 复制。

我想怎么做：

1.  以读取模式打开临时文件。
2.  如果临时文件中写入了 1 个新行*（我将继续手动编写并使用记事本保存临时文件）*，则生成新写入的行。

问题：

问题是我正在尝试检查如何在此 Python 代码在命令提示符下运行时按`Ctrl`+ `C` *（即 SIGTERM）关闭此 Python 代码中打开的临时文件。*为了模拟这一点，我在`tail`函数中打开了临时文件，每当出现异常（当我按下*+**时系统将引发异常）`Ctrl``C`*时，控件应该在第一个^(除外)。然后，从这里开始，我尝试向`uh`生成器函数发送一个值`tail`，以便它产生打开的文件的文件描述符，我可以使用它来关闭打开的临时文件。

PS：我希望有一个解决方案，我只在生成器函数中而不是在它之外打开文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:30:52.460

我认为您误解了“发送”的工作原理。发送只是使生成器在下一次迭代中产生该值。它不会改变原始参数的值。然后，您可以将产生的值用于某些目的。所以你可以制作你的代码：

```
filename = 'tempfile'

def tail(filename):
    fd = open(filename)
    while True:
        line = fd.readline()
        if not line:
            continue
        else:
            x = (yield line)
            if (x == 'uh'):
                print 'Returning f to close the file'
                yield fd

try:
    genObj = tail(filename) 
    valfromgen= genObj.next()
    while valfromgen:
        print valfromgen
        valfromgen= genObj.next()
except:
    traceback.print_exc()
    try:
        genObj.send('uh').close()
    except:
        traceback.print_exc() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:03:32.563

我已经弄清楚了我被卡住的问题，我想出了这个解决方案：-

1.  当我按 Ctrl + C（在 Windows 上）时，KeyboardInterrupt 实际上发生在 fd.readline() 中。所以，我只是在那里放置了一个 try...except ，以便生成器函数在按下 Ctrl + C 时生成文件描述符。如果没有 KeyBoardInterrupt ，则只需从 tempfile 打印新读取的行
2.  这个文件描述符在主体中使用 isinstance() 进行检查，如果发现它是一个文件，那么，我将关闭该文件以及生成器

**PS**：（这个KeyboardInterrupt在Linux上可能会有所不同..可能会引发SigTerm，但是，请检查。所以，为了使代码通用，只需删除KeyBoard Interrupt并使用正常的除外）

```
import sys,  traceback

filename = 'tempfile'

def tail(filename):
    fd = open(filename)
    while True:
        try:
            line = fd.readline()
        except KeyboardInterrupt:
            print 'keyboard interrupt here'
            yield fd
        if not line:
            continue
        else:
            yield line

try:
    genObj = tail(filename) 
    valfromgen= genObj.next()
    while valfromgen:       
        if isinstance(valfromgen, file):
            print 'Closing this file now as `tail` yielded a file descriptor'
            valfromgen.close()
            genObj.close()
            break
        print 'Yielded line: ', valfromgen
        valfromgen= genObj.next()

    print 'Just in order to check that things are in order, the following line will raise StopIteration. If it raises, it means we are good.'
    print genObj.next()
except:
    traceback.print_exc() 
```

* * *

# c# - Visual Studio 2010 的引导程序清单生成器

> ID：11995457
> 
> 赞同：8
> 
> 时间：2012-08-16T21:08:21.203
> 
> 标签：c#, mysql, setup-project, bootstrapper

我正在寻找 VS2010 的引导程序清单生成器。我在哪里可以下载它？我想以包含 Net Framework 的方式在我的 C# 安装项目中包含 MySQL 安装程序。你能帮助我吗？

# google-apps-script - 具有大量行的响应时间谷歌电子表格

> ID：11995460
> 
> 赞同：2
> 
> 时间：2012-08-16T21:08:30.267
> 
> 标签：google-apps-script, google-sheets

我正在开发一个使用谷歌电子表格作为数据库的网络应用程序。这将意味着在常规操作中解析多达 30.000 行（估计大小）以搜索 ID 等...

我担心我将要查看的响应时间。有人有这方面的经验吗？我不想把时间浪费在会在这样的问题上遇到死胡同的事情上。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:53:36.890

使用电子表格作为该数据集的数据库可能不是一个好主意。您是否已经设置了此电子表格？

30K 行将允许您只有 66 列，这对您来说足够了吗？查看[Google 文档大小限制](http://support.google.com/docs/bin/answer.py?hl=en&answer=37603)帮助页面了解更多信息。

无论如何，Google 电子表格具有“实时并发编辑”特性，这使其成为比任何其他选项都慢得多的数据库。您可能应该考虑其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T07:45:17.420

您打算使用电子表格来显示数据还是仅用作存储位置。？

在第二个选项中，电子表格的相对缓慢将不是问题，因为您只需读取其数据一次即可将其数据放入数组并使用它...

这当然意味着您在专用 UI​​ 中构建数据读取和写入的各个方面，并且从不显示电子表格本身，速度将仅取决于数组上的 JavaScript 引擎、UI 的速度和互联网连接的速度。 .. 如果与“普通”应用程序相比，所有 3 个因素的性能都不是很好，但具有易于共享和随处可用的优势。:-)

也就是说，我已经编写了这样一个包含大约 20 列数据和 1000 行的数据库应用程序，它非常有用，尽管即使对于简单的下一个/上一个请求也有一些延迟。另一方面，该应用程序可以发送邮件和创建文档.... Google 服务集成的优势 :-)

你可以看看[他的例子，看看我在说什么](https://script.google.com/macros/s/AKfycbxquizfGo85vdeaN7_qss2-LY--UxSLFFeF5ML5rXPWZfrX9oNt/exec)

# c# - C# 从另一个线程调用 form.show()

> ID：11995466
> 
> 赞同：26
> 
> 时间：2012-08-16T21:09:14.523
> 
> 标签：c#, winforms, multithreading, .net-3.5

如果我`form.show()`从另一个线程调用 WinForms 对象，表单将引发异常。我可以在哪里向主应用程序线程添加一个新的可见表单？否则，如何在不停止当前正在执行的线程的情况下打开表单？

这是我的示例代码。我正在尝试启动一个线程，然后在该线程中执行一些工作。随着工作的进展，我将展示表格。

```
public void Main()
{
    new Thread(new ThreadStart(showForm)).Start();
    // Rest of main thread goes here...
}

public void showForm() 
{
    // Do some work here.
    myForm form = new myForm();
    form.Text = "my text";
    form.Show();
    // Do some more work here
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-16T21:16:55.213

尝试使用调用调用：

```
public static Form globalForm;

void Main()
{
    globalForm = new Form();
    globalForm.Show();
    globalForm.Hide();
    // Spawn threads here
}

void ThreadProc()
{
    myForm form = new myForm();
    globalForm.Invoke((MethodInvoker)delegate() {
        form.Text = "my text";
        form.Show();
    });
} 
```

“invoke”调用告诉表单“请在你的线程而不是我的线程中执行此代码”。然后，您可以从委托中更改 WinForms UI。

有关 Invoke 的更多文档在这里：http: [//msdn.microsoft.com/en-us/library/zyzhdc6b.aspx](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)

编辑：您需要使用已经存在的 WinForms 对象才能调用调用。我在这里展示了如何创建一个全局对象；否则，如果您有任何其他 windows 对象，它们也将起作用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-12T00:29:40.203

你应该打电话`Application.Run()`后打电话`form.Show()`。例如：

```
public void showForm() 
{
    // Do some work here.
    myForm form = new myForm();
    form.Text = "my text";
    form.Show();
    Application.Run();
    // Do some more work here
} 
```

至于背后的细节，[这个 msdn 帖子](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3d4dd8b1-edcd-468c-9e43-9b502fdff20c/)可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-30T19:19:57.957

根据我的经验，最好的方法：

```
var ac = (ReportPre)Application.OpenForms["ReportPre"];
Thread shower = new Thread(new ThreadStart(() =>
    {
        if (ac == null)
        {                
            this.Invoke((MethodInvoker)delegate () {
                ac = new ReportPre();
                ac.Show();
            });       
        }
        else
        {
            this.Invoke((MethodInvoker)delegate
            {
                pictureBox1.Visible = true;
            });
            if (ac.InvokeRequired)
            {
                ac.Invoke(new MethodInvoker(delegate {
                    ac.Hide();
                    ac.Show();
                }));                          
            }
        }
    }));
shower.Start(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-14T10:11:29.340

如果您的用例是在主 GUI 线程忙（如加载栏）时显示 GUI，您可以执行以下操作：

```
private void MethodWithLoadingBar()
{
    Thread t1 = new Thread(ShowLoading);
    t1.Start();
    // Do the Main GUI Work Here
    t1.Abort();
}

private void ShowLoading()
{
    Thread.Sleep(1000); //Uncomment this if you want to delay the display 
                        //(So Loading Bar only shows if the Method takes longer than 1 Second)
    loadingGUI = new LoadingGUI();
    loadingGUI.label1.Text = "Try to Connect...";
    loadingGUI.ShowDialog();
} 
```

我的 LoadingGUI 是一个简单的表单，带有一个公共标签和一个带有样式设置为选取框的 ProgressBar

# javascript - 使用 Nivo 滑块自定义缩略图

> ID：11995469
> 
> 赞同：0
> 
> 时间：2012-08-16T21:09:23.967
> 
> 标签：javascript, jquery, html, nivo-slider

我需要为 Nivo Slider 缩略图使用文本链接而不是图像链接，并且我需要在完全任意的位置显示它们。有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:40:17.253

我想到了。我刚刚写了一点自定义脚本，为它的简单而自豪。

```
$(document).ready(function() {
    $(".custom-control").click(function(e) {
        e.preventDefault();
        var targetSlide = $(this).attr("rel");
        $(".slider-wrapper .nivoSlider .nivo-controlNav").find(".nivo-control").attr("rel", targetSlide).trigger("click");
    });
}); 
```

# c# - 为什么这个 SQL 会告诉我“在预期的地方找不到 FROM 关键字”？

> ID：11995470
> 
> 赞同：2
> 
> 时间：2012-08-16T21:09:31.090
> 
> 标签：c#, sql, oracle, toad

代码中的这个sql：

```
SELECT QHR, 
DECODE(DUCKBILLID1,NULL,' ',DUCKBILLID1) "DB1", 
DECODE(DUCKBILLID2,NULL,' ',DUCKBILLID2) "DB2", 
DECODE(DUCKBILLID3,NULL,' ',DUCKBILLID3) "DB3" 
FROM PLATYPUSSCHEDULE 
WHERE PLATYPUSID = :ABCID AND DOW = :DOW 
```

...失败，“ *FROM 关键字未在预期*的地方找到”

同样的事情（除了 DBN 周围的引号是 c# 代码中的单引号和双引号，如上所示，在 TOAD 中）在 TOAD 中工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:20:53.877

您可能需要转义引号 ( `\"`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:18:55.447

在 C# 中，我希望看到类似的东西

```
String qry = 
@"SELECT QHR,  
DECODE(DUCKBILLID1,NULL,' ',DUCKBILLID1) ""DB1"",  
DECODE(DUCKBILLID2,NULL,' ',DUCKBILLID2) ""DB2"",  
DECODE(DUCKBILLID3,NULL,' ',DUCKBILLID3) ""DB3""  
FROM PLATYPUSSCHEDULE  
WHERE PLATYPUSID = :ABCID AND DOW = :DOW"; 
```

或者

```
String qry = 
"SELECT QHR,DECODE(DUCKBILLID1,NULL,' ',DUCKBILLID1) \"DB1\",DECODE(DUCKBILLID2,NULL,' ',DUCKBILLID2) \"DB2\",DECODE(DUCKBILLID3,NULL,' ',DUCKBILLID3) \"DB3\" FROM PLATYPUSSCHEDULE WHERE PLATYPUSID = :ABCID AND DOW = :DOW"; 
```

我当然不希望看到单引号和双引号交换。

# c++ - 对象数组作为链表中的 char 数组——我对对齐的假设是否有效？

> ID：11995476
> 
> 赞同：0
> 
> 时间：2012-08-16T21:10:11.290
> 
> 标签：c++, alignment

我正在用**C++98**编写一个切片分配器。分配器将包含两个模板类：

1.  将分配实际内存的低级分配器类，
2.  高级分配器类，它将请求的对象包装`char[]`为适当长度的数组。

我想知道我下面关于对齐的假设是否有效。

* * *

首先，我假设在一个对象数组（类型为`T`）中，每个对象都正确对齐。我在标准中没有看到任何具体的内容，但这对我来说似乎是一个合理的假设。

考虑到，如果我采用`sizeof(T[n])`，返回的大小应该包含任何必要的填充，因此适合存储数组`T[n]`。

* * *

其次，*18.4.1.1* ( `operator new`) 规定：

> 1**效果：由***new 表达式*(5.3.4)调用的*分配函数*(3.7.3.1)用于分配适当对齐的存储字节以表示该大小的任何对象。**`size`**

 *因此，我假设`::operator new(sizeof(T[n]))`应该为数组创建一个适当对齐的内存块`T[n]`。

* * *

最后，*9.2*（*类成员*）声明：

> 17 指向 POD-struct 对象的指针，使用 a 进行适当转换`reinterpret_cast`，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。[*注意：*因此，在 POD 结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。]

因此，我会假设`struct`类似：

```
struct node
{
    char data[sizeof(T[n])];
    node* next;
}; 
```

通过分配`new node`，`data`成员将正确对齐数组`T[n]`。

* * *

上述假设是正确的还是我遗漏了什么？我相信我必须手动实现链表，因为 C++ 标准没有对节点成员顺序提供任何保证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:35:48.663

是的，你的假设是正确的。我可能错过了一些东西，但我不明白为什么你不能拥有这样的东西：

```
struct node
{
   T[n];
   node* next;
}; 
```*

# jquery - 结合负载和淡入淡出功能 + 一个微小的 bouns 任务

> ID：11995480
> 
> 赞同：0
> 
> 时间：2012-08-16T21:10:39.523
> 
> 标签：jquery, ajax, dynamic, load, fadein

**大家好！**

我知道这已经解决了几次，但是在查看其他问题后，我似乎无法正确解决这个问题。所以这里。

我已经把这个不带点的列表变成了一个包含 7 个项目的菜单。

```
 <ul id="om-ropox-menu">
        <li class="undotted"><a href="1">1</a></li>
        <li class="undotted"><a href="2">2</a></li>
        <li class="undotted"><a href="3">3</a></li>
        <li class="undotted"><a href="4">4</a></li>
        <li class="undotted"><a href="5">5</a></li>
        <li class="undotted"><a href="6">6</a></li>
        <li class="undotted"><a href="7">7</a></li>      
    </ul> 
```

href attr 没有扩展，因为我需要这种方式，我会让 javascript 处理它。因此，每当用户单击其中一个链接时，我都会拥有此 javascript 代码

```
 //on page load, get this file
$(document).ready(function(){
    $('#about_content').load('subpages/content_about/con_1.php');
    $('#about_content').fadeIn(1000);

    //handle menu clicks
    $('ul#om-ropox-menu li a').click(function(){
          var page = $(this).attr('href');
          $('#about_content').load('subpages/content_about/con_'+page+'.php', function(){
         });
     return false;
    });
}); 
```

这会从外部 php 文件加载内容，当用户单击 7 个链接之一时显示。（con_1.php，con_2.php...con_7.php）。

请注意，div 有一个隐藏它的类（显示：隐藏；在 CSS 中）。

但不仅仅是加载内容，我希望包含的 div 通过 jQuery 淡入和折叠，那么我在这里缺少什么？

**奖励任务（不能在标题中使用问题，哈哈）** 我可以修改 javascript 以获取，假设用户第一次到达页面时获取变量。假设我会让他们通过来自其他地方的 href 链接“向右跳”到 #4？

干杯!

**编辑**

我让它与fadeIn函数一起工作，所以现在加载时内容很好地淡入淡出。这就是我所拥有的。

```
 //on page load, get this file
$(document).ready(function(){
    $('#about_content').load('subpages/content_about/con_om.php', function(){
        $(this).fadeIn(1000)
        });

    //handle menu clicks
    $('ul#om-ropox-menu li a').click(function(){
        var page = $(this).attr('href');
        $('#about_content').fadeOut(1000, function() {
             $(this).load('subpages/content_about/con_'+page+'.php', function() {
             $(this).foldd(1000);
         });
         })
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:30:53.043

尝试更多类似的东西：

```
<ul id="om-ropox-menu">
    <li class="undotted"><a href="#1">1</a></li>
    <li class="undotted"><a href="#2">2</a></li>
    <li class="undotted"><a href="#3">3</a></li>
    <li class="undotted"><a href="#4">4</a></li>
    <li class="undotted"><a href="#5">5</a></li>
    <li class="undotted"><a href="#6">6</a></li>
    <li class="undotted"><a href="#7">7</a></li>      
</ul>​ 
```

js：

```
$(document).ready(function() {
    var page = document.location.hash.substring(1) || '1';
    $('#about_content').load('subpages/content_about/con_'+page+'.php', function() {
        $(this).fadeIn(1000);
    });

    $('#om-ropox-menu li a').on('click', function(e) {
        e.preventDefault();
        page = $(this).attr('href').substring(1);
        $('#about_content').fadeOut(1000, function() {
            $(this).load('subpages/content_about/con_'+page+'.php', function() {
                $(this).fadeIn(1000);
            });
        })
    });
});​ 
```

# php - 为什么我的 preg_replace 调用仅适用于字符，而不适用于数字？

> ID：11995481
> 
> 赞同：2
> 
> 时间：2012-08-16T21:10:39.940
> 
> 标签：php, regex

我正在尝试使用正则表达式从 PHP 更新配置文件。我似乎无法更新数字。

这是我的`$contents`：

```
$sugar_config['sysconfig_next_order_no'] = 'AAAAA';
$sugar_config['sysconfig_next_quote_no'] = '027827'; 
```

这是我的`$pattern`：

```
/(.*sysconfig_next_order_no']\s=\s')(.*)(';)/ 
```

* * *

当我使用所有字母“AAAAAA”时，它可以工作-

```
preg_replace($pattern, '$1AAAAAAA$3', $contents); 
```

结果：

```
$sugar_config['sysconfig_next_order_no'] = 'AAAAAAA';
$sugar_config['sysconfig_next_quote_no'] = '027827'; 
```

当我使用所有数字时，它失败了：

```
preg_replace($pattern, '$1123123$3', $contents); 
```

结果：

```
23123';
$sugar_config['sysconfig_next_quote_no'] = '027827'; 
```

有人能解释一下吗，我强迫自己总是使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:14:48.887

你有`next_order_no`你的正则表达式 - 所以它只会将文本与该键匹配。这与数字或字母无关 - 这是红鲱鱼！

# php - 将 ajax 结果存储到 PHP 会话中

> ID：11995482
> 
> 赞同：-1
> 
> 时间：2012-08-16T21:10:46.487
> 
> 标签：php

我看到了如何从 php 获取数据到 ajax 的示例（并通过 javascript 显示它。）在登录示例中，我们可以检查是否输入了有效的电子邮件和密码，我们可以简单地显示“您现在已登录。 " 直到这里我理解并锻炼了。但是，现在当用户登录时，我需要设置 php 会话。登录表单将数据发送到 ajax.php，它只是返回一条成功消息。在其他情况下，如果我只是使用 php 来检查有效的登录详细信息，我可以在脚本找到匹配数据后立即设置 php 会话。

我知道我可以通过 URL 将 ajax 数据发送到第二个 php 页面，它可以通过 $_GET 访问。但我想将该数据放入 SESSION 而不是通过 URL 发送。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:22:59.547

带有表单详细信息的 ajax 请求

```
 $.ajax({
        type:"POST",
        url:"file.php",
        data:"your data string to pass",
        complete:function(data){
     response of ajax

        }
    }); 
```

带有一些代码的 php 文件

```
<?php
 session_start();
 $_SESSION['varable'] = $info_to_add;
 $_SESSION['varable2'] = $info_to_addother;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:15:17.123

```
session_start();
$_SESSION['somevar'] = $_GET['somevar']; 
```

基本上就是你想要的。如果您通过 JSON 数据发送，那么

```
session_start();
$json = json_decode($_POST['jsonvar']);
$_SESSION['somevar'] = $json['somevar']; 
```

$_SESSION 是一个与 PHP 中的任何其他数组一样的数组 - 分配给它，从中读取，删除，推送，弹出等......它的特殊之处在于它是 a) 一个超全局 b) 如果你使用它，它会自动为你持久化`session_start()`

# excel - 如何在 Excel 中计算 2 个数字之间的差异（比您预期的要难 ;-)

> ID：11995490
> 
> 赞同：0
> 
> 时间：2012-08-16T21:11:29.803
> 
> 标签：excel, excel-formula

这可能很容易解决，但我已经摆弄了一段时间，似乎无法解决它。

专栏`A`持有市场回报，专栏`B`某只股票的回报。我要计算超额市场收益：股票的表现比市场好多少美元？在列`C`中，我手动计算了值：

```
 .      A       B       C
 ---------------------------
 1   -2.22    0.17    2.39
 2   -2.99    0.57    3.56     both the market as the stock have lost, but the
 3  -11.68   -0.40   11.28 <-- stock has lost 11.28 less than the market has
 4    6.16    0.06   -6.10 <-- compared to the market, the stock underperformed
 5    0.94   -0.22   -1.16      by 6.10
 6    7.45    0.17   -7.28
 7   -1.96   -0.07    1.89 
```

您不能只是简单地从 中提取`A1`，`B1`反之亦然。我很困惑; 谁不是并且知道使用什么公式来`C1;C7`获得正确的答案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:13:34.880

以下应该有效：

```
=B1-A1 
```

# c++ - C ++模板的类（非对象）参数

> ID：11995499
> 
> 赞同：1
> 
> 时间：2012-08-16T21:11:56.467
> 
> 标签：c++, class, templates, vector, smart-pointers

我有从具有虚函数的基类继承的派生类。我使用智能指针（shared_ptr）来创建对象，因为我希望将对象附加到向量中。但是我注意到我的代码在处理对象以执行某些任务时是重复的，所以我认为模板可以成为改进我的代码的解决方案。这是我迄今为止的尝试（不是确切的代码，简化）：

```
class Base{

    public:
     virtual ~Base(){}
     virtual void display_message() = 0;
};

class DerivedA : public Base{
    DerivedA(){}
};

class DerivedB : public Base{
    DerivedB(){}
};

//THE template- 
//<hold the smart pointer that points to different derived objects>

template<typename T1>

class HandleInstances{
      private:            

         vector<T1> ObjectVector;
         //the iterator

         T1 sp_base;

      public:

        HandleInstance(const T1 & sp){
            sp_base = sp; // set smart pointer
        }
        //somefunctions

        //this is what i need to figure out
        void AddToVector(){
             ObjectVector.push_back(sp_base(new 'The derived class') );
        }

}; 
```

AddToVector 函数是这里的问题。为了添加一个对象的元素，我必须这样做 push_back("the smart pointer"(new "the class"));。我如何让模板接受类（不是对象）并将其实现到 push_back() 的函数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:15:34.323

您正在尝试将对象用作类，但这不起作用（除非对象具有`operator()`返回正确对象的对象，但我离题了）。

请尝试：

```
void AddToVector(){
    ObjectVector.push_back(T1(sp_base));
} 
```

这将创建一个新对象，并调用新对象的复制构造函数并传递`sp_base`给它。所以本质上是创建一个`sp_base`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:15:14.353

将该函数也设为模板：

```
template<typename T2>
void AddToVector(){
    ObjectVector.push_back(smart(new T2));
} 
```

我假设您打算在`push_back`rether 中有一个智能指针，而不是您的成员变量`sp_base`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:19:58.653

这是一个具有挑战性的问题 - 为什么？因为模板通过基于模板参数动态构造类的变体来作为 C++ 中的一种预处理步骤。

换句话说，彼此`shared_ptr<DerivedA>`之间`shared_ptr<DerivedB>`没有*任何关系*，因为在 C++ 中，模板本质上使它们像 2 个独立的类声明 - 不相关的类型。

它们包含的指针都是基类的后代，但 shared_ptrs 本身也可能是 a`Vector<Bool>`和 a `Foo`。`DerivedA`从单个基类继承并没有关系`DerivedB`，它们的模板生成的类没有。

话虽如此，您确实具有一定的灵活性：如果您将工厂函数放在类的接口中，如下所示：

```
class DerivedA : public Base{
    public:
    static shared_ptr<DerivedA> construct{
        return shared_ptr<DerivedA>(new DerivedA());
    };
};

....similar for DerivedB 
```

然后你可以做这样的事情：

```
template<typename T>
class HandleInstances{
  private:            

     vector<shared_ptr<T> > ObjectVector;

  public:

    //this is what i need to figure out
    void AddToVector(){
         ObjectVector.push_back(T::construct());
    }
}; 
```

你应该没事。你正在做的是给每个类一个函数来弥补这个类本身不能被存储以在以后生成对象的事实。注意：

1.  HandleInstances 中的模板参数是基本类型，而不是 shared_ptr 类型。
2.  `Construct`在 DerivedA 和 DerivedB 中返回不同的类型。
3.  `Base`没有声明`construct`- 因为这些函数不返回兼容类型，所以它们不是从 Base 继承的。
4.  你仍然不能在你的 ObjectVector 中混合和匹配类型，如果那是你所希望的——但无论如何你永远无法做到这一点。（奖励：如果你使用更多类型来包装你的类型并处理这个是可能的：见[boost::any](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)

# iphone - 从没有框架的类中添加 UIView

> ID：11995502
> 
> 赞同：0
> 
> 时间：2012-08-16T21:12:07.100
> 
> 标签：iphone, objective-c, ios

有没有办法将 UIView 从函数（在这种情况下，在静态构建的库中）添加到视图，而无需为视图本身传递框架。

Paypal 的库实现了这一点，我想知道实施将如何进行。

我不想更改根控制器，我只想在当前控制器上添加我的视图。

以风格

```
[something addSubview:myNewView]; 
```

有些东西是我也无权访问的视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:16:13.457

是的。您只需使用默认`init`方法而不是`initWithFrame:`：

```
MyView *mySubview = [[MyView alloc] init];
[otherView addSubview:mySubview]; 
```

请注意，这将导致 mySubview 的原点 (0/0) 帧大小为零，尽管它是不可见的。您可以稍后指定框架，一旦您知道它，或者 MyView 可以覆盖 init 方法并将默认框架传递给`[super initWithFrame:defaultFrame]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:26:01.643

虽然 DrummberB 的回答是正确的，但视图不会出现在任何地方，因为在没有框架的情况下初始化的视图默认为 CGRectZero 的框架。迟早您需要为视图分配一个框架。

# ios - 切换视图时它是 facebook 的 UIScrollView 吗？

> ID：11995505
> 
> 赞同：0
> 
> 时间：2012-08-16T21:12:35.317
> 
> 标签：ios, uiscrollview

> **可能重复：**
> [开发类似 Facebook 新 iOS 应用程序中的侧滑菜单的最佳方法是什么？](https://stackoverflow.com/questions/7989020/whats-the-best-way-to-develop-a-sideswipe-menu-like-the-one-in-facebooks-new-i)

![在此处输入图像描述](../Images/a34587ee6a8658200a6a5fed8946a360.png)

我也在路径[http://itunes.apple.com/us/app/path/id403639508?mt=8](http://itunes.apple.com/us/app/path/id403639508?mt=8)看到它，所以认为是来自苹果官方 sdk，但不知道它是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:47:05.460

我相信 Facebook 应用程序使用 Master Detail Xcode 模板，但如果您打算创建一个设计类似的应用程序，我建议您使用[MFSideMenu](http://www.cocoacontrols.com/platforms/ios/controls/mfsidemenu) iOS 组件。

# c++ - 让 Qt 在 Mac OS X Mountain Lion 上运行

> ID：11995508
> 
> 赞同：0
> 
> 时间：2012-08-16T21:12:40.280
> 
> 标签：c++, qt, netbeans

我想设置 Qt，这样我就可以用它开发应用程序。这一切看起来都非常简单——我运行了安装程序并安装了它。然后我将路径变量添加到 /etc/profile. qmake -v 命令按照 netbeans 文档中的描述工作，但 netbeans 似乎没有检测到 Qt 所需的包含文件。

![在此处输入图像描述](../Images/9776a7f66f70a76c6c7e30daa0630722.png) ![在此处输入图像描述](../Images/f29a2b60c423cb59d3ec31c915f2267d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:35:56.083

是的，我修复了它：如果您遇到这些错误，请将 qmake 命令添加到您的路径变量，重新启动计算机，然后尝试在 netbeans 中运行基本的 QT 项目。它应该提示输入一个 qmake 目录。指向 QT 的 bin 文件夹，项目应该运行。因为在项目清理后波浪线消失了。

# neo4j - 组合 Cypher 查询结果

> ID：11995513
> 
> 赞同：2
> 
> 时间：2012-08-16T21:13:11.227
> 
> 标签：neo4j, cypher

这是我在 Cypher 中的查询...

```
START n=node(127) 
MATCH(n)-[:friends]->(x) 
WITH n, collect(distinct x) as friends 
MATCH(n)-[:outer_only_friends]->(y) 
RETURN friends, collect(distinct y) as outer 
```

我正在尝试将朋友添加到外部集合并返回查询内部的集合。这样我就可以在查询中使用 LIMIT 和 SKIP 。

任何帮助，将不胜感激。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T06:54:59.937

克里斯，这是在 ML 上回答的，[http](http://groups.google.com/group/neo4j/browse_thread/thread/56ecfef3130f2d92) ://groups.google.com/group/neo4j/browse_thread/thread/56ecfef3130f2d92 ？

# java - 在 JScrollPane 中使用绝对布局

> ID：11995516
> 
> 赞同：5
> 
> 时间：2012-08-16T21:13:28.283
> 
> 标签：java, swing, layout, jscrollpane, null-layout-manager

我需要使用具有绝对布局的 JScrollPane。我知道完全不推荐使用 setLayout(null) 。我一直在阅读，如果您想将绝对布局与 JScrollPane 一起使用，则必须设置内部元素的首选大小属性，以便 JScrollPane 可以计算其大小。

我一直在尝试下一个代码来更改元素的顺序和大小，但我无法弄清楚我错在哪里。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class frame extends JFrame {

private JPanel contentPane;
private JScrollPane scrollPane;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                frame frame = new frame();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public frame() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setLayout(null);
    setContentPane(contentPane);

    JPanel panel = new JPanel();
    panel.setBackground(Color.red);
    panel.setBounds(0,0,600,600);
    panel.setPreferredSize(new Dimension(420,280));

    scrollPane = new JScrollPane(panel);
    scrollPane.setBounds(0, 0, 600, 600);
    scrollPane.setLayout(null);
    scrollPane.setBackground(Color.green);

    scrollPane.add(panel);
    scrollPane.setPreferredSize(new Dimension(450,300));
    contentPane.add(scrollPane);
}
} 
```

为什么 setPreferredSize 没有做正确的工作？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:43:18.153

首先，不要更改滚动窗格的布局管理器，它不是您想要实现的要求

其次，滚动窗格通过`JViewport`. 您必须改为将容器添加到其中（这`scrollPane.add(panel)`是错误的做法），而是使用`scrollPane.setViewportView(panel)`

第三，您想看看[Scrollable](http://docs.oracle.com/javase/7/docs/api/javax/swing/Scrollable.html)界面，因为滚动窗格不仅仅依赖于其内容的首选大小

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T21:24:05.427

更改实际的布局管理器`JScrollPane`没有意义；如果您希望在应用程序中使用绝对布局，您通常会调用`setLayout(null)`容器类（例如`JPanel`），以便使用绝对定位在其中定位子组件。

我建议你应该尝试：

*   调用包含在其中的`setLayout(null)`（因为我*认为*这是你想要做的）。`JPanel``JScrollPane`
**   与其直接使用，不如将`JPanel`其子类化并让您的子类实现`Scrollable`接口，该接口提供`JScrollPane`有关最佳可滚动视口大小的附加信息。*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-05T14:01:18.133

我可以看到你的问题。

您可以在此处设置面板的边界和首选大小。

```
panel.setBounds(0,0,600,600);
panel.setPreferredSize(new Dimension(420,280)); 
```

然后你设置 scrollPane 的边界

```
scrollPane.setBounds(0, 0, 600, 600); 
```

好吧，面板的边界是没用的，因为scrollPane只关心首选大小，而面板的首选大小小于scrollPane的边界，所以scrollPanel认为他不需要显示其他任何东西，那就是为什么它不显示任何滚动条或启用它们。OBS：我认为设置滚动面板的布局没有意义。所以你可以跳过那一行。

就像评论一样：将滚动与绝对布局窗格一起使用就很好，因为您需要注意窗格的首选大小。*

# c# - 我只能在 Caliburn Micro 中的协程的帮助下执行异步操作吗？

> ID：11995520
> 
> 赞同：0
> 
> 时间：2012-08-16T21:13:38.933
> 
> 标签：c#, windows-phone-7, asynchronous, caliburn.micro, coroutine

从文档中我意识到我可以使用 Caliburn Micro 的协程进行异步操作。开箱即用，无需额外技术。所以我在我的 Windows Phone 应用程序中实现了下一个代码：

```
public class SimpleViewModel : Screen
{
    // ...

    protected override void OnViewLoaded(object view)
    {
        base.OnViewLoaded(view);

        Coroutine.BeginExecute(RunTask());
    }

    public IEnumerator<IResult> RunTask()
    {
        yield return new SimpleTask();
    }

    // ...
} 
```

简单任务：

```
public class SimpleTask : IResult 
{
    public void Execute(ActionExecutionContext context)
    {
        Thread.Sleep(10000);
    }

    public event EventHandler<ResultCompletionEventArgs> Completed;
} 
```

我希望 Execute 方法中的代码能够异步运行。但这不会发生。我的 UI 线程被阻塞了 10 秒。

我在哪里做错了？或者我对协程异步性质的假设是错误的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T15:42:03.840

我花了一整天的时间寻找和尝试代码示例，最终得到了一些可行的东西（即使用不阻塞 UI 的 Caliburn Coroutines 的异步操作），所以我允许自己分享它。

据我了解，Caliburn 中的协程不处理线程，它们只是提供了一种优雅的方式来以一种方法处理异步执行和控制代码。必须使用 BackgroundWorkers 等其他工具来处理后台线程中的操作。

对于silverlight，我发现[此链接非常有趣。](http://www.codinginstinct.com/2010/06/sequential-async-using-coroutines.html)目的是将后台工作人员包含在一个包装协程调用的类中。

由于我希望它在 WPF 中略有不同，因此我最终得到了可以在我的机器上运行的代码示例：

包装类：

```
using System;
using Caliburn.Micro;
using System.ComponentModel;

namespace MyApp.Implementation
{
    public class BackgroundCoRoutine : IResult
    {
        private readonly System.Action action;

        public BackgroundCoRoutine(System.Action action)
        {
            this.action = action;
        }

        public void Execute(ActionExecutionContext context)
        {
            using (var backgroundWorker = new BackgroundWorker())
            {
                backgroundWorker.DoWork += (e, sender) => action();
                backgroundWorker.RunWorkerCompleted += (e, sender) => Completed(this, new ResultCompletionEventArgs());
                backgroundWorker.RunWorkerAsync();
            }
        }

        public event EventHandler<ResultCompletionEventArgs> Completed = delegate { };

    }
} 
```

在我的一个 ViewModel 中，以下内容：

```
 public IEnumerable<IResult> ProcessTask()
    {
        IsBusy = true;
        TempObject result = null;

        for (int i = 1; i < 4; i++) // Simulates a loop that processes multiple items, files, fields...
        {
            yield return new BackgroundCoRoutine(() =>
            {
                System.Threading.Thread.Sleep(1000); // Time consuming task in another thread
                result = new TempObject("Item " + i);
            });

            MyObservableCollection.Add(result); // Update the UI with the result, in the GUI thread
        }

        IsBusy = false;
    } 
```

这样，当我单击 ProcessTask 按钮时，UI 不会冻结，并且计算结果会在后台工作进程可用时立即显示。IsBusy 状态不是强制性的，但显示了 UI 相关状态如何进入面向异步的代码。

希望这会帮助另一个我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:17:37.407

您的问题是 Coroutine.BeginExecute 立即运行代码。您必须在单独的任务或线程中运行代码，或者在协程中调用异步代码。协程代码不会自动阻止您的 UI 阻塞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T12:05:47.590

> Caliburn.Micro Coroutines 帮助您以同步方式执行异步例程。不是反过来。关于您的问题：开箱即用的 CM 为您提供了快速找到解决方案的可能性... ;-)
> 
> 为了完成您想做的事情，我建议您查看 .NET BackgroundWorker 并围绕它创建一个协程 (IResult)。

[http://caliburnmicro.codeplex.com/discussions/391929](http://caliburnmicro.codeplex.com/discussions/391929)

# javascript - 允许使用 jQuery 拖动具有相同 id 的对象

> ID：11995525
> 
> 赞同：1
> 
> 时间：2012-08-16T21:13:59.170
> 
> 标签：javascript, jquery, html

我创建了以下 jQuery 代码以允许对象可拖动：

JavaScript：

```
$(function(){
    $("#drag_item").draggable();
}); 
```

HTML：

```
<div id="drag-item">One</div>
<div id="drag-item">Two</div>
<div id="drag-item">Three</div> 
```

只有第一个`div`with`id` `"drag-item"`是可拖动的，但其他的不是。我希望它们都是可拖动的。我知道这可以通过为每个对象分配一个不同的 来完成`id`，但我宁愿只声明一个`id`允许所有对象具有`id`可拖动功能的对象。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:14:59.560

```
$(function(){
    $(".drag-item").draggable();
}); 
```

HTML：

```
<div class="drag-item">One</div>
<div class="drag-item">Two</div>
<div class="drag-item">Three</div> 
```

使用`class`而不是`id`.

重复的 html 是无效`id`的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T21:15:33.770

你不能像那样复制 ID。ID 应该是唯一的。使用类选择器

**HTML：**

```
<div class="drag-item">One</div>
<div class="drag-item">Two</div>
<div class="drag-item">Three</div> 
```

**JS：**

```
$(function(){
    $(".drag-item").draggable(); //Edit: as MrOBrian pointed out
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T21:19:46.533

如果您可以随意更改 HTML，则可以使用 a`class`而不是`id`.

```
$(function(){
    $(".drag-item").draggable();
}); 
```

```
<div class="drag-item">One</div>
<div class="drag-item">Two</div>
<div class="drag-item">Three</div> 
```

但是，如果您不能随意更改 HTML，则可以使用以下内容：

```
$(function(){
    $("[id=drag-item]").draggable();
}); 
```

与 不同的是`#drag-item`，[属性选择器](http://api.jquery.com/attribute-equals-selector/)将返回所有匹配的元素，而不仅仅是第一个。但请记住，具有多个相同元素`id`意味着您的[**HTML 无效**](https://softwareengineering.stackexchange.com/a/127180)。

# javascript - 我无法启动我的 node.js IRC 机器人

> ID：11995527
> 
> 赞同：0
> 
> 时间：2012-08-16T21:14:03.210
> 
> 标签：javascript, node.js, bots, irc

所以，作为一个项目，我正在为我的 IRC 频道调整这个机器人：[https ://gist.github.com/996827](https://gist.github.com/996827)

我正在尝试做的是测试它发送消息的能力。消息功能似乎工作正常，但我很难让它“收听”来自频道的消息。

```
//handles incoming messages
irc.handle = function(data)
{
  var i, info;
  for (i = 0; i < irc.listeners.length; i++)
  {
    info = irc.listeners[i][0].exec(data);
    if (info)
    {
      irc.listeners[i][1](info, data);
      if (irc.listeners[i][2])
      {
        irc.listeners.splice(i, 1);
      }
    }
    if (irc.listeners[i] == "string that is being listened for")
    {
      irc.msg("#solidoodle", "Test,test,test"); 
    }
  }
} 
```

我一直在尝试将其与我在控制台中看到的一些谈话相匹配。我在做任何明显错误的事情吗？我知道我需要一些正则表达式才能使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:54:27.427

`irc.listeners`显然是一个数组，其元素是数组（尽管看起来使它成为一个对象数组会是一个更好的设计，因为您使用“幻数”来索引子元素），但是在`if (irc.listeners[i] == "string that is being listened for")`您正在处理的行中就好像它是一个字符串数组一样。我猜你的意思是`if (irc.listeners[i][someOtherMagicNumber] == ...`

再一次，使用对象而不是子数组来表示每个侦听器，并为它们的元素赋予有意义的键。现在我们只能猜测监听器的第一个、第二个和第三个元素应该代表什么，如果您需要在几个月后重新访问您的代码，您也会如此。

此外，在某些情况下，您要从中删除一个元素，`irc.listeners`但随后会陷入对现在将成为下一个元素的进一步测试。但是，下一个元素永远不会受到早期测试的影响，因为循环的下一次迭代将跳过它。从您正在迭代的数组中删除或插入元素非常棘手且容易出错。

# html - Youtube Overlay Image Div - 下方自动播放

> ID：11995529
> 
> 赞同：2
> 
> 时间：2012-08-16T21:14:08.687
> 
> 标签：html, iframe, youtube, onclick, overlay

[我在此主页](http://www.belfastdigitalagency.com)的 YouTube iframe 顶部有一个 div 叠加层。

这个想法是你点击一次，然后视频会自动播放，但我就是不能让它打球。当我设置 YouTube 参数“自动播放 = 1”时，视频在图像下方播放，甚至没有点击它。

这是我在下面使用的代码；

```
<div onclick="thevid=document.getElementById('thevideo');
thevid.style.display='block'; 
this.style.display='none'">

<img style="cursor: pointer;"
src="http://www.belfastdigitalagency.com/wp-content/themes/responsy-v2.5/random_image1.php"
alt="belfast digital marketing agency animated video" />
</div>

<div id="thevideo" style="display: none;">
<iframe width="1280" height="720"
src="http://www.youtube.com/embed/iy_lolGhjPE?rel=0&vq=hd720&color=white&autoplay=0&wmode=transparent&theme=light&showinfo=0&origin=http://www.belfastdigitalagency.com"
frameborder="0" allowscriptaccess="always"
allowfullscreen="true"></iframe>
</div> 
```

任何想法出了什么问题？提前非常感谢，即使它只是一个检查看起来很糟糕的东西的指针！

干杯，

菲尔

PS - 感谢[UnLoCo](https://stackoverflow.com/users/179545/unloco)的传说，它很快就被修复了。这是要纠正的最终代码。再次感谢 UnLoCo！

```
<div onclick="thevid=document.getElementById('thevideo');
thevid.style.display='block'; this.style.display='none'; 
document.getElementById('iframe').src = 
document.getElementById('iframe').src.replace('autoplay=0','autoplay=1');">

<img style="cursor: pointer;" src="http://www.belfastdigitalagency.com/wp-content/themes/responsy-v2.5/random_image1.php" alt="belfast digital marketing agency animated video" />
</div>

<div id="thevideo" style="display: none;">
<iframe id="iframe" width="1280" height="720" src="http://www.youtube.com/embed/iy_lolGhjPE?rel=0&vq=hd720&color=white&autoplay=0&wmode=transparent&theme=light&showinfo=0&origin=http://www.belfastdigitalagency.com"
frameborder="0" allowscriptaccess="always" allowfullscreen="true"></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T21:56:25.773

点击，添加：

```
document.getElementById('iframe').src = 
document.getElementById('iframe').src.replace('autoplay=0','autoplay=1'); 
```

# android - 如何获取我的共享偏好？

> ID：11995534
> 
> 赞同：0
> 
> 时间：2012-08-16T21:14:30.183
> 
> 标签：android, facebook, sharedpreferences

我正在尝试在我的应用程序中进行简单的 Facebook 登录，但我有一些关于 SharedPreferences 的问题。

这个想法是应用程序启动并转到活动 A，它会查看您是否已登录，如果未登录，则将您发送到活动 B，您登录并返回 A。

发生的事情是，当我在 B 登录时，它会将我送回 A，但 A 似乎没有加载我的 SharedPreferences 并将我送回 B，于是我陷入了循环。

那是我在A中的代码。

```
public static String access_token = null;
long expires; 
```

...

```
private void SharedP() {
    // TODO Auto-generated method stub
    prefs = getSharedPreferences(access_token, MODE_PRIVATE);
    access_token = prefs.getString("access_token", null);
    expires = prefs.getLong("access_expires", 0);
    if (access_token == null && expires == 0) { //If it's not logged...
        Intent login = new Intent("android.intent.action.FACEBOOKLOGIN");
        startActivity(login);
    }
} 
```

我究竟做错了什么？我该怎么做？

我在 B 中的代码：

```
public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                Editor edit = fbSP.edit();
                edit.putString("access_token", fb.getAccessToken());
                edit.putLong("access_expires", fb.getAccessExpires());
                edit.commit();
                UpdateLoginImage();
                BackToA();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:20:22.723

当您将 SharedPreferences 存储在 ActivityB 中时，请确保调用`commit()`以保存首选项。

像这样：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
      SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("loggedIn", isLoggedIn);
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:45:05.090

这应该是有益的。您必须更好地将其转换为您的情况：

在一个：

```
private boolean isLogged;

// Check if the user is logged
SharedPreferences settings = getSharedPreferences(SETTINGS_FILENAME, MODE_PRIVATE);
isLogged= settings.getBoolean("isLogged", false); 
```

...然后比较：

```
if (!isLogged) {
     Intent intent = new Intent();
     intent.setClass(A.this, B.class);
     startActivity(intent);
} else {
     // Do anything
} 
```

在 B 中：

```
// ... after login
SharedPreferences settings = getSharedPreferences(SETTINGS_FILENAME, MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("isLogged", true);
editor.commit(); 
```

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:02:57.913

在我看来，您在 A 和 B 上没有阅读相同的共享偏好。

`getSharedPreferences(access_token, MODE_PRIVATE)`打开一个“access_token”共享首选项文件，您应该使用类似`getSharedPreferences("facebook_data", MODE_PRIVATE)`.

然后在活动 B 中，如果您遵循 Facebook 的 Android 登录指南，它会使用活动 sharedPreferences `getPreferences(MODE_PRIVATE)`。第二个返回一个仅可用于活动 B 的首选项文件。我只是猜测这是因为我没有您的代码，也许您没问题。

检查您是否在两个活动上打开相同的 sharedPreferences 文件。

# node.js - Node.js 覆盖文件

> ID：11995536
> 
> 赞同：6
> 
> 时间：2012-08-16T21:14:42.707
> 
> 标签：node.js, heroku, io, filesystems

我知道这是一个简单的问题，但在这个问题上找不到任何有用的东西。

你如何使用`fs.createWriteStream(dst)`覆盖文件？（请注意，该应用程序托管在 heroku 上）

我试过了`{flags: 'w'}`，`{flags: 'r+'}`甚至`{flags: 'wb'}`。这些都不起作用，我不断得到 `Error: File uploads/1.txt exists.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T22:01:30.157

从[文档](http://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options)：

> 修改文件而不是替换它可能需要标志模式 r+ 而不是默认模式 w。

所以`{flags: 'w'}`应该工作。这听起来像是权限问题？

你能`fs.unlink()`对那个文件做一个吗？如果您无法直接访问计算机，这应该测试该文件的权限。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-17T19:19:17.500

默认情况下不是设置标志'w'吗？[https://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options](https://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options)

# api - 服务验证失败：日历

> ID：11995540
> 
> 赞同：2
> 
> 时间：2012-08-16T21:14:57.797
> 
> 标签：api, google-apps-script, google-calendar-api, urlfetch

我正在尝试创建一个 Web 应用程序，允许用户将自己作为所有者添加到日历中。我正在尝试将新规则插入日历的 ACL，但我无法获得使用访问日历 API 的权限。

在我授权脚本通过弹出的对话框运行后，我收到以下错误消息：“无法对服务进行身份验证：日历。”

我做错了什么？

```
 function insertRule() {
     ScriptApp.invalidateAuth();
     var calId = MY_CAL_ID;
     var userEmail = Session.getActiveUser().getEmail();
     var API_KEY = MY_API_KEY; 

     var apiName = 'calendar';
     var scope = 'https://www.googleapis.com/auth/calendar';
     var fetchArgs = googleOAuth_(apiName, scope);

     fetchArgs.method = "POST";

     var payload = 
     {
       "role" : "owner",
       "scope" : 
       { 
         "type" : "user",
         "value" : userEmail
       }
     };

     fetchArgs.payload = payload;

     var base = 'https://www.googleapis.com/calendar/v3/calendars/'; 
     var url = base + calId + '/acl?key=' + API_KEY;

     var response = UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
```

}

```
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:53:23.647

我有同样的问题。我找到了下面的链接，但客户端是 scripts.google.com？希望它能让我们指出正确的方向。

[http://googleappsdeveloper.blogspot.ca/2011/12/calendar-api-v3-2-legged-oauth-java.html](http://googleappsdeveloper.blogspot.ca/2011/12/calendar-api-v3-2-legged-oauth-java.html)

# android - SQLite 多表

> ID：11995548
> 
> 赞同：1
> 
> 时间：2012-08-16T21:15:15.253
> 
> 标签：android, sqlite

我要做的是在具有多个表的android中创建一个sqlite db（我知道该怎么做）。我想做的是有一个类（活动）来创建每个表，打开和关闭数据库。然后为每个表创建一个类，用于我的插入、删除和选择语句。我很困惑如何做到这一点，因为我似乎找不到任何例子。

我目前拥有的是为每个表创建表、打开、插入和删除的类，但是一旦我的应用程序创建一个表，该应用程序将不会创建另一个表。如果我想做的是 A. 可能和 B. 好的做法，有人可以告诉我。

或者我应该把我所有的 SQL 放到一个类中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:37:56.223

我不确定是否完全理解您的问题，但我建议您寻找[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)。这是分离数据库创建和请求的最佳方式。

其次，您似乎无法创建数据库。我想你使用从`SQLiteOpenHelper`. 您可以分隔不同类中的表，但您只需调用扩展类`onCreate`的一次。`SQLiteOpenHelper`但是，您可以在此方法中为每个表调用来自不同类的其他静态方法。这是使数据库维护更容易的正确方法。如果我了解您的问题，我可以为您提供一些样品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T10:13:07.047

我刚刚解决了同样的问题。所有表必须同时创建，但通过单独的 SQL 语句。我所做的是保留我单独的 SQLOpenHelper 类，并使用一种方法创建一个新的“创建者”类，该方法执行所有 CREATE 语句，这些语句是 Helper 类中的静态字符串。然后每个助手类在其 onCreate() 中调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:51:24.960

有一些方法可能会带来良好的实践。Vogella 的博客对我来说总是一个很好的参考。看看[这个方法](http://www.vogella.com/articles/AndroidSQLite/article.html)。它由一个控制数据库的创建和更新的类和另一个作为 DAO 的类组成，以对某种类型的对象发出必要的请求。

就我个人而言，我一直在 Singleton 类中使用两者的组合，这非常适合维护和控制实例的整个生命周期（在我的情况下为 SQLiteDatabase），它允许您在不打开的情况下执行需要执行的任务，关闭或丢失对您的数据库对象的引用。同一个类继承自 SQLiteOpenHelper 来管理数据库的创建和更新。

一般结构可能如下所示：

```
package your.package;

import java.io.File;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBManager extends SQLiteOpenHelper {

private static DBManager sInstance;

private static SQLiteDatabase db;

private final String LOG_TAG = this.getClass().getSimpleName();

private static final String DB_NAME = "DBName";
private static final int DB_VERSION = 1;

public static synchronized DBManager getInstance(Context _c) {
if (sInstance == null) {
    sInstance = new DBManager(_c);
}
return sInstance;
}

private DBManager(Context _c) {
super(_c, DB_NAME, null, DB_VERSION);
}

public void deleteTable(String table) {
if (db == null || !db.isOpen()) {
    db = getWritableDatabase();
}

db.execSQL("DROP TABLE " + table);
db.close();
}

public void reset() {

File dbFile = new File(getReadableDatabase().getPath());
dbFile.delete();

sInstance = null;
db.close();
}

public static void closeDB() {
if (sInstance != null && db != null && db.isOpen()) {
    db.close();
}
}

public long insertContent(String table, ContentValues cv) {
if (db == null || !db.isOpen()) {
    db = getWritableDatabase();
}

return db.insert(table, null, cv);
}

public void updateContent(String table, ContentValues cv, String whereClause, String[] whereArgs) {
if (db == null || !db.isOpen()) {
    db = getWritableDatabase();
}

db.update(table, cv, whereClause, whereArgs);
}

@Override
public void onCreate(SQLiteDatabase db) {

if (db == null || !db.isOpen()) {
    db = getWritableDatabase();
}

db.execSQL("your query");
}

@Override
public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
Log.i(LOG_TAG, "onUpgrade old: " + oldVersion + " new: " + newVersion);
}

} 
```

# forms - Drupal 以编程方式呈现登录表单

> ID：11995551
> 
> 赞同：16
> 
> 时间：2012-08-16T21:15:25.890
> 
> 标签：forms, login, drupal-7

我正在尝试在基本页面中显示登录表单。当我登录时，这会将我重定向到用户帐户页面。当我注销时，这什么也没显示。

```
<?php drupal_get_form("user_login"); ?> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T21:47:52.863

解决了！

对于 D7：

```
<?php 
$elements = drupal_get_form("user_login"); 
$form = drupal_render($elements);
echo $form;
?> 
```

对于 D6：

```
<?php 
echo drupal_get_form("user_login");
?> 
```

# emacs - 交互式命令行模式 emacs

> ID：11995552
> 
> 赞同：3
> 
> 时间：2012-08-16T21:15:31.587
> 
> 标签：emacs, elisp

任何人都可以建议任何有关如何在 emacs 中获得交互式命令行模式的指针/教程或信息。我查看了 comint 和 shell 模式，但这些模式与子进程对话。我只想要一个与 elisp 函数对话的交互式命令行，而不是像`/bin/bash`. 我们的想法是使用它与用 elisp 编写的简单解释器进行交互（只是为了好玩）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:22:51.247

尝试[劣质 Emacs Lisp](http://emacswiki.org/emacs/InferiorEmacsLispMode)模式`M-x` `ielm`。您可以通过在提示符下键入来获得帮助。`(describe-mode)``RET`

奇怪的是，它使用“一个虚拟进程来保持 comint 快乐”，但该进程实际上并未用于处理您的命令。如果您想`ielm-eval-input`用自己的功能替换，您可能会破解它。

# javascript - Instagram API 不满足计数参数

> ID：11995555
> 
> 赞同：5
> 
> 时间：2012-08-16T21:15:41.087
> 
> 标签：javascript, jquery, api, count, instagram

该项目可以在[http://watchsuburbia.com查看](http://watchsuburbia.com)

我有一个带有特定标签的 Instagram 图片分页库，但它现在加载的照片不超过 64 张（之前加载了大约 70 张）。如果您转到[第 5 页](http://watchsuburbia.com/index.php?page=5)，您会看到它突然停止。我的 URL 中有**count**参数，它设置为 250 之类的高值只是为了测试，将其降低到 100 之类的值并没有什么不同。*目前*有211 张带有特定标签的照片。

我正在使用的网址是

```
https://api.instagram.com/v1/tags/watchsuburbia/media/recent?client_id=[CLIENTID]&access_token=[ACCESSTOKEN]&count=300 
```

*显然有真实的clientid和access_token*

**更新**限制再次变得更短，现在限制在 4 页照片。它似乎每天都在逐渐降低，这非常奇怪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T20:03:34.073

Instagram 所做的是找到您要求的最新 X 数量的图像（在这种情况下，任何标记为 #watchsuburbia 的图像）然后它检查这些图像是否是私有的，删除这些图像并返回该子集。因此，如果该 X 中的 3 个视频是私有的，它实际上会返回 X-3 个图像。

[联合创始人的建议](https://groups.google.com/forum/?fromgroups=#!topic/instagram-api-developers/nKik4i8OYhw)是，你寻找比你需要的更多的缓冲，然后自己过滤。

旁注：这些视频中的每个人听起来都很*加拿大*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:48:35.150

请参阅[Instagram API 端点的一般信息](http://instagram.com/developer/endpoints/)。它提到了 API 请求中存在`count`参数......但没有列出具体的最大数量。也许 Instagram 正在限制结果集中的媒体数量 - 因此结果集大小的变化 - 他们使用提供`count`的作为最大值。也许实际的最大计数取决于每个端点/对象类型。

您应该做的是`pagination`在结果中使用散列中返回的数字，并逐步检查结果。散列提到了下一页的下一个最大 id（例如，`next_max_tag_id`标签或`next_max_id`图像）的新值。通过它，您可以检索后续结果集，直到没有下一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T10:23:24.213

对不起 surrian 链接，但我遇到了同样的问题并[用 pagination 解决了它](http://plutov.by/post/instagram_api_count)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:24:12.750

我不认为 count 参数在此端点中有效（还没有？）。媒体的不同是因为我猜计数包括私人媒体。[您可以在http://statigr.am/](http://statigr.am/)中看到这一点。他们是相同的区别。

# php - PHP Header Content-Disposition：附件强制 .php 文件或内联

> ID：11995562
> 
> 赞同：3
> 
> 时间：2012-08-16T21:16:29.560
> 
> 标签：php, header, download, cross-browser, mp3

我想从我的网站下载一个 .mp3 文件，但是在使用此代码时，它会在 Firefox 和 Safari 中强制使用 .php。但在 chrome 中，它会强制将文件作为内联发送并在页面上播放。我怎样才能让他们真正下载 .mp3 文件？

```
$track = $_SERVER['QUERY_STRING'];

if (file_exists("/home/user/gets/" .$track)) {
    header("Content-Type: audio/mpeg");
    header('Content-Length: ' . filesize($track));
    header('Content-Disposition: attachment; filename="test.mp3"');
    $str = "/home/user/gets/".$track;
    readfile($str); 
    exit;
} else {
    header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found', true, 404);
    echo "no file";
} 
```

我也尝试下载 .zip 文件并将 Content-Type 更改为 application/ocetet-stream ，但它会强制所有浏览器上的 .php 文件。

```
//$track = $_SERVER['QUERY_STRING'];
$track = 'testfile.zip';
if (file_exists("/home/user/gets/" .$track)) {
    header("Content-Type: application/octet-stream");
    header('Content-Length: ' . filesize($track));
    header('Content-Disposition: attachment; filename="test.mp3"');
    $str = "/home/user/gets/".$track;
    readfile($str); 
    exit;
} else {
    header($_SERVER['SERVER_PROTOCOL'].' 404 Not Found', true, 404);
    echo "no file";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T21:20:48.783

尝试从文件名中去掉引号：

```
header('Content-Disposition: attachment; filename=test.mp3');
                                                  ^^^^^ 
```

获取脚本的名称而不是您尝试使用的文件名通常表明文件名包含浏览器尝试保存到的文件系统的无效字符。例如`"`，不允许。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:26:25.483

I think `filesize($track)` is wrong, it should be the whole path `filesize("/home/user/gets/".$track)`. This would cause php to output error messages, preventing you from setting the content-length and disposition header.

# c++ - 你如何有逻辑或万一的开关语句的一部分？

> ID：11995568
> 
> 赞同：4
> 
> 时间：2012-08-16T21:17:18.840
> 
> 标签：c++, switch-statement, logical-operators

如果你有一个 switch 语句，并且希望在值为一个值*或*另一个值时运行某些代码，你怎么做？以下代码始终适用于默认情况。

```
#include <iostream>
using namespace std;

int main()
{
    int x = 5;
    switch(x)
    {
        case 5 || 2:
            cout << "here I am" << endl;
            break;
        default:
            cout << "no go" << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T21:18:24.720

像这样：

```
switch (x)
{
case 5:
case 2:
    cout << "here I am" << endl;
    break;
} 
```

被称为“跌倒”。

只是要指出，`default`在发布的代码中执行案例的原因是结果`5 || 2`是`1`（`true`）。如果您在发布的代码中设置`x`为，则将执行案例（请参阅[http://ideone.com/zOI8Z](http://ideone.com/zOI8Z)）。`1``5 || 2`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T21:18:21.847

让它通过：

```
int main()
{
    int x = 5;
    switch(x)
    {
        case 5:
        // there's no break statement here,
        // so we fall through to 2
        case 2:
            cout << "here I am" << endl;
            break;
        default:
            cout << "no go" << endl;
    }

    return 0;
} 
```

`5 || 2`顺便说一下，计算结果为 1（或者`true`，因为它是一个逻辑表达式），您可以尝试一下。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T21:18:21.313

让我们`switch` **跌倒**：

```
switch(x)
{
    case 2:
    case 5:
        cout << "here I am" << endl;
        break;
    default:
        cout << "no go" << endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T21:21:13.067

```
case2:
case5:
   //do things
   break; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T22:32:16.733

[这是一篇](http://complete-concrete-concise.com/programming/c/keyword-switch-case-default)关于 switch/case 以及它们在 C/C++ 之间的细微差别以及您可能想知道的有关标签 (ABCD:) 的一些其他信息的非常好的读物。

# css - 如何在div中强制文本

> ID：11995571
> 
> 赞同：1
> 
> 时间：2012-08-16T21:17:42.443
> 
> 标签：css, html

我的网站有点问题。我有 3 个并排的三个盒子（box1、box2、box3）。Box1 中的文本将根据 date() 动态生成。

我遇到的问题是..box1 中的某些文本似乎将其他框上的框和图标向上推。

```
CSS

.box1{
margin-left: 0px;
margin-top: 60px;
width: 300px;
height: 200px;
background-color:#D8D8D8 ;  
position: relative; 

}

.box2{ 
 margin-left: 350px;
 margin-top: -200px;
  width: 300px;
height: 200px; 
background-color:#D8D8D8 ; 
}

.box3{
margin-left: 700px;
margin-top: -200px;
 width: 300px;
height: 200px;
background-color:#D8D8D8 ; 
}

.result{
        color :teal ;  
        font-family: cambria; 
        font-weight: normal; 
        text-align:center; 
        font-size:1.85em; 
         margin-top: 0px;   

}

.mic{
 position: absolute;
margin-left: 250px;
margin-top: -25px;
}

.clock{
 position: absolute;
margin-left: -460px;
margin-top: -25px;
}

.calendar{
position: absolute;
margin-left: 940px;
margin-top: -25px;
} 
```

3 个示例如下图所示

![](../Images/a1e28ad1f26df3d66918ff768dfef669.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:22:35.483

试试这个小曲子：

```
.prevent-text-breakouts {
  -ms-word-break: break-all;
      word-break: break-all;
      word-break: break-word;
  -webkit-hyphens: auto;
     -moz-hyphens: auto;
          hyphens: auto;
} 
```

您还可以考虑在这些框上使用溢出属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:30:41.893

1.  找出发生错误时将什么“文本”添加到**结果div 中。**可能是以某种方式插入了格式错误的 HTML。

2.  **你可以使用float:left;**来清理你的 CSS 。而不是根据过多的边距定位元素。如果你想让我详细说明，请告诉我。

看看这个小提琴：http: [//jsfiddle.net/dEhEt/5/](http://jsfiddle.net/dEhEt/5/)

它不包括每个框的图标，但有许多不同的方法可以实现这种效果，我会让你决定要使用哪一种。

# mobile - 移动网络应用程序 - 询问拨打哪个号码

> ID：11995572
> 
> 赞同：-4
> 
> 时间：2012-08-16T21:17:58.713
> 
> 标签：mobile, jquery-mobile, call

是否可以弹出一个通话链接并显示两个号码？

基本上我有两个位置，想要一个呼叫按钮。当点击它询问哪个位置。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:54:48.067

我会使用 jQuery 移动[对话框](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dialogs.html)。

对话框的内容看起来像这样：

```
<div data-role="dialog">
    <div data-role="header" data-theme="d">
        <h1>Dialog</h1>
    </div>

    <div data-role="content" data-theme="c">
        <h1>Which location?</h1>
        <p>Wich number do you wan't to call</p>
        <a href="tel:+440000000000" data-role="button" data-rel="back" data-theme="b">First location</a>
        <a href="tel:+440000000000" data-role="button" data-rel="back" data-theme="b">Second location</a>   
    </div>
</div> 
```

其中“+440000000000”是电话号码。正如@Shae 所说，进行一些研究，您就会想出类似的东西。

希望有帮助！祝你今天过得愉快。

# javascript - 使用 jQuery 为 NxN 拼图的解决方案制作动画

> ID：11995582
> 
> 赞同：0
> 
> 时间：2012-08-16T21:18:38.450
> 
> 标签：javascript, jquery, animation, puzzle

我编写了一个 JavaScript 程序，它为 NxN 滑动瓷砖拼图生成了一个解决方案。它找到了一个正确的解决方案，但是当涉及到在不同的拼图实例之间制作动画以得到解决方案时，事情变得一团糟。起初（3-4 步）瓷砖会按应有的方式移动，但随后一些瓷砖开始沿对角线移动并在其他瓷砖上方移动。终于找到了解决方案，但中间动画出错了。这是我的动画循环的代码：

```
var steps = solution.length;
for (i=0; i<steps; i++) {

    next = solution.pop();
    // ANIMATE TILE
    var delay = speed*i;
        // sp is an array where the position (y, x) of the free spot is
    var spA = current.spacePos;     
    var spB = next.spacePos;
    var movingTile = current.box[spB[0]][spB[1]];
    var leftOffset = size*(spA[1]-spB[1]);
    var topOffset = size*(spA[0]-spB[0]);
    var thisTile = $('#tile'+movingTile);
    thisTile.delay(delay).animate({
        opacity: 1.0,
        top: "+=" + topOffset,
        left: "+=" + leftOffset
        }, speed);
    // Update for next round
    current = next;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:21:42.707

如果您希望下一个动画的时间与前一个动画的完成时间完全一致（您这样做），那么您不能使用 a`delay()`来安排下一个动画。相反，您必须使用一个动画的完成功能来触发下一个动画。只有这样，时间才能完美，即使在数百个连续动画之后。

你可以这样做：

```
var current = xxx;   // this has to get initalized (I'm not sure how in your code)
function goNext() {
    if (!solution.length) {
        return;
    }

    var next = solution.pop();
    // ANIMATE TILE
    // sp is an array where the position (y, x) of the free spot is
    var spA = current.spacePos;     
    var spB = next.spacePos;
    var movingTile = current.box[spB[0]][spB[1]];
    var leftOffset = size*(spA[1]-spB[1]);
    var topOffset = size*(spA[0]-spB[0]);
    var thisTile = $('#tile'+movingTile);
    var current = next;
    thisTile.animate({
        opacity: 1.0,
        top: "+=" + topOffset,
        left: "+=" + leftOffset
        }, speed, goNext);
}

goNext(); 
```

# python - 在不应该使用正则表达式的情况下使用加号

> ID：11995587
> 
> 赞同：3
> 
> 时间：2012-08-16T21:18:51.187
> 
> 标签：python, regex

我在这里有这个正则表达式：

```
"\d+.?\d*\^\d+\.?\d*" 
```

它应该做的是在类似`2^10`的字符串中找到类似的东西，`1*1+2^10*1`但它会以`1+2^10`.

我究竟做错了什么？我认为这与`.`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:21:10.953

在正则表达式中，`.`字符代表“匹配任何字符”。你将不得不逃避它：

```
"\d+\.?\d*\^\d+\.?\d*" 
```

[您可以使用RegexPal](http://regexpal.com/)尝试您的正则表达式

# wordpress - 如何从 WP_User 对象中获取 Wordpress 用户的名字？

> ID：11995588
> 
> 赞同：9
> 
> 时间：2012-08-16T21:18:51.890
> 
> 标签：wordpress

我正在写一个基本的插件。这是我的代码：

```
 $new_user = get_userdata($user_id); //$user_id is passed as a parameter

$first_name1 = $new_user->user_firstname;
$last_name1 = $new_user->user_lastname;
    echo "<" . $first_name1 . $last_name1 . ">";
    //returns: <>

$first_name2 = $new_user-first_name;
$last_name2 = $new_user->last_name;
    echo "<" . $first_name2 . $last_name2 . ">";
    //returns: <> 
```

根据[codex](http://codex.wordpress.org/Function_Reference/get_userdata#Notes)，这应该可以，但是当我回显`$first_name`或`$last_name`它们为空时。奇怪的是，*这*确实有效：

```
 $id = $new_user->ID; 
```

难道我做错了什么？

更新：

我`var_dump`编辑 `$new_user`了，那些属性不在那里！这是因为我从 /mu-plugins 目录中的插件内部调用它吗？以后会添加这些属性吗？

```
object(WP_User)#334 (7) { ["data"]=> object(stdClass)#330 (10) { ["ID"]=> string(3) "758" ["user_login"]=> string(7) "emerson" ["user_pass"]=> string(34) "$P$BB2PuvRbyGUSVZR1M8FLSujPvMO2MW0" ["user_nicename"]=> string(7) "emerson" ["user_email"]=> string(16) "123esl@gmail.com" ["user_url"]=> string(0) "" ["user_registered"]=> string(19) "2012-08-17 01:03:27" ["user_activation_key"]=> string(0) "" ["user_status"]=> string(1) "0" ["display_name"]=> string(7) "emerson" } ["ID"]=> int(758) ["caps"]=> array(1) { ["subscriber"]=> string(1) "1" } ["cap_key"]=> string(15) "wp_capabilities" ["roles"]=> array(1) { [0]=> string(10) "subscriber" } ["allcaps"]=> array(15) { ["read"]=> bool(true) ["level_0"]=> bool(true) ["read_questions"]=> bool(true) ["read_answers"]=> bool(true) ["publish_questions"]=> bool(true) ["immediately_publish_questions"]=> bool(true) ["publish_answers"]=> bool(true) ["read_private_forums"]=> bool(true) ["publish_topics"]=> bool(true) ["edit_topics"]=> bool(true) ["publish_replies"]=> bool(true) ["edit_replies"]=> bool(true) ["assign_topic_tags"]=> bool(true) ["access_s2member_level0"]=> bool(true) ["subscriber"]=> string(1) "1" } ["filter"]=> NULL } 
```

更新2：

我试过这个：

```
$user_meta = get_user_meta( $new_user->ID );
var_dump($user_meta); 
```

我得到了这个（last_name 和 first_name 是空的，即使它们是在用户的配置文件中定义的）：

```
array(11) { ["wp_user_level"]=> array(1) { [0]=> string(1) "0" } ["show_admin_bar_front"]=> array(1) { [0]=> string(4) "true" } ["wp_capabilities"]=> array(1) { [0]=> string(32) "a:1:{s:10:"subscriber";s:1:"1";}" } ["use_ssl"]=> array(1) { [0]=> string(1) "0" } ["admin_color"]=> array(1) { [0]=> string(5) "fresh" } ["comment_shortcuts"]=> array(1) { [0]=> string(5) "false" } ["rich_editing"]=> array(1) { [0]=> string(4) "true" } ["description"]=> array(1) { [0]=> string(0) "" } ["nickname"]=> array(1) { [0]=> string(7) "emerson" } ["last_name"]=> array(1) { [0]=> string(0) "" } ["first_name"]=> array(1) { [0]=> string(0) "" } } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-17T01:59:34.923

用户的名字和姓氏存储在 user_meta 中。

[http://codex.wordpress.org/Function_Reference/get_user_meta](http://codex.wordpress.org/Function_Reference/get_user_meta)

因此，例如，如果您想访问所有这些数据，请尝试以下操作：

```
$user_meta = get_user_meta( $new_user->ID ); 
```

或者，如果您想访问单个元值，请尝试以下操作：

```
$last_name = get_user_meta( $new_user->ID, 'last_name', true ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-13T22:21:29.640

您要查找的数据已经在函数 get_userdata() 返回给您的 WP_USER 对象中。要访问用户的名字和姓氏，只需执行以下操作：

```
# Retrieve the user's data (here we suppose, of course, the user exists)
$new_user = get_userdata( $user_id );
# Get the user's first and last name
$first_name = $new_user->first_name;
$last_name = $new_user->last_name; 
```

参考：[https ://developer.wordpress.org/reference/classes/wp_user/](https://developer.wordpress.org/reference/classes/wp_user/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T12:08:26.390

我认为您是在 Wordpress StackExchange 中提出[类似问题的同一个人。](https://wordpress.stackexchange.com/questions/62063/no-first-name-or-user-firstname-property-in-wp-user-object)

这本身不是一个答案，但一个解释似乎是当从 mu-plugins 代码调用时获取这些元字段时，WP 平台本身存在一个错误。

我最近亲身体验过，我的functions.php中有一些代码在user_register钩子上调用。当在 mu-plugins 中定义该挂钩时，我得到了您报告的问题。在我的 functions.php 中定义该钩子时，它工作正常。

# c# - 使用嵌套类型 arg 动态实例化对象时引发 TypeLoadException

> ID：11995590
> 
> 赞同：1
> 
> 时间：2012-08-16T21:18:54.980
> 
> 标签：c#, .net, nested-generics

[在为OSS 项目](https://github.com/SparkDevNetwork/Rock-ChMS)做贡献的同时，我遇到了 TypeLoadException。我正在创建一个接缝，开发人员可以通过该接缝注入他们自己的 Repository 类来删除对 EF 的具体依赖，这样我就可以隔离我的新代码并运行一些测试。

似乎`Activator.CreateInstance()`针对具有嵌套类型 arg 的类型运行会在运行时创建它时遇到麻烦。我以前多次使用过这种模式，但这次不同的是我使用它来动态注入一个通用的存储库模式实现。问题似乎确实与该类型 arg 有关。我目前很难过，所以任何帮助将不胜感激。

**这是我得到的错误：**

```
System.TypeLoadException: Could not load type 'Rock.Tests.Fakes.FakeRepository' from assembly 'Rock.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.
    at System.Reflection.RuntimeAssembly.GetType(RuntimeAssembly assembly, String name, Boolean throwOnError, Boolean ignoreCase, ObjectHandleOnStack type)
    at System.Reflection.RuntimeAssembly.GetType(String name, Boolean throwOnError, Boolean ignoreCase)
    at System.Activator.CreateInstance(String assemblyName, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo, ref StackCrawlMark stackMark)
    at System.Activator.CreateInstance(String assemblyName, String typeName)
    at Rock.Data.RepositoryFactory`1.FindRepository() in RepositoryFactory.cs: line 30
    at Rock.Data.Service`1..ctor() in Service.cs: line 34
    at Rock.Core.AttributeService..ctor()
    at Rock.Attribute.Helper.LoadAttributes(IHasAttributes item) in Helper.cs: line 165
    at Rock.Data.ModelWithAttributes`1.get_Attributes() in ModelWithAttributes.cs: line 38
    at Rock.CMS.Page.MapPagesRecursive(Page page) in Page.cs: line 422
    at Rock.CMS.Page.ExportObject() in Page.cs: line 410
    at Rock.Tests.CMS.PageTests.TheExportObjectMethod.ShouldCopyPropertiesOfDTO() in PageTests.cs: line 16 
```

**以下是来自 Rock.Data 命名空间的一些相关（带注释的）代码片段：**

*IRepository.cs*

```
public interface IRepository<T> where T : class
{
    // Very basic CRUD repository contract...
} 
```

*EFRepository.cs*

```
public class EFRepository<T> where T : Model<T>
{
    // Concrete implementation of IRepository<T> specific to Entity Framework 4.3
} 
```

*服务.cs*

```
public class Service<T> where T : Model<T>
{
    private readonly IRepository<T> _repository;

    // Inside this constructor are my changes...
    public Service() // : this(new EFRepository<T>())
    {
        // Instead of hard-coding the use of EFRepository here, I
        // thought it might be worthwhile to add a call out to a
        // factory method implementation.

        var factory = new RepositoryFactory<T>();
        _repository = factory.FindRepository();
    }

    // This constructor never really appears to be called.
    // From my test code's entry point, there's no way for me to
    // explicitly call this constructor, hence the factory implemenation.
    public Service(IRepository<T> repository)
    {
        _repository = repository;
    }
} 
```

*RepositoryFactory.cs*

```
// Here's my quick/dirty factory method implementation to try to generically
// instantiate an IRepository of my choosing for testing purposes...
public class RepositoryFactory<T> where T : Model<T>
{
    public IRepository<T> FindRepository()
    {
        var repositoryTypeSetting = ConfiguraitonManager.AppSettings["RepositoryType"];

        if (string.IsNullOrEmpty(repositoryTypeSetting))
        {
            return new EFRepository<T>();
        }

        var settingArray = repositoryTypeSetting.Split(new[] { ',' });

        // I'm aware that Trim() is superfluous here, but this will be part of a development
        // framework, so I'm trying to take whitespace/developer error into account.
        var className = settingArray[0].Trim();
        var assemblyName = settingArray[1].Trim();

        // I've tried with and without Unwrap(), the exception originates from Activator.CreateInstance()
        return (IRepository<T>) Activator.CreateInstance(assemblyName, className).Unwrap();
    }
} 
```

**这是我在单独的 Rock.Tests 项目中使用的一些假对象和测试代码片段......**

*FakeRepository.cs*

```
// Basic fake/stub implementation
public class FakeRepository<T> : IRepository<T> where T : Model<T>
{
    // Nothing here yet other than `throw new NotImplementedException()` for each method in the contract
    // We never make it here...
} 
```

*PageTests.cs*

```
// Very basic XUnit test example...
public class PageTests
{
    public class TheExportMethod
    {
        [Fact]
        public void ShouldNotBeEmpty()
        {
            var page = new Page { Name = "FooPage" };
            var result = page.Export();
            Assert.NotEmpty(result);
        }
    }
} 
```

*应用程序配置*

```
<configuration>
    <appSettings>
        <clear/>
        <add key="RepositoryType" value="Rock.Tests.Fakes.FakeRepository,Rock.Tests"/>
    </appSettings>
</configuration> 
```

希望这涵盖了它相当彻底。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:30:44.740

看起来您正在尝试实例化一个开放的泛型类型，因为您的配置文件没有为`FakeRepository<T>`. 你需要做更多类似的事情：

```
<add key="RepositoryType" value="Rock.Tests.Fakes.FakeRepository`1[[Some.ModelType,Some.ModelAssembly]],Rock.Tests"/> 
```

# sublimetext2 - Sublime Text 2 - 在侧边栏中显示文件导航

> ID：11995591
> 
> 赞同：441
> 
> 时间：2012-08-16T21:18:56.937
> 
> 标签：sublimetext2, sublimetext

我刚刚切换到 Sublime Text 作为我的新编辑器。如果我打开侧边栏，它会显示打开文件，但我想要的是文件导航侧边栏，是否可以在不下载插件的情况下更改它？

* * *

## 回答 #1

> 赞同：730
> 
> 时间：2012-08-16T21:42:27.073

您必须在 Sublime Text 窗口中添加一个文件夹才能通过侧边栏导航。转到`File -> Open Folder...`并选择您希望能够导航的最高目录。

此外，“查看 -> 侧边栏 -> 显示侧边栏”如果仍然不显示。在新版本中，只有一个“打开”菜单，没有单独的打开文件夹的选项。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2012-09-30T13:40:00.193

您可以将文件夹拖放到侧栏。要启用侧栏，您应该执行查看 -> 侧栏 -> 显示打开的文件。您将在侧栏中获得打开的文件（选项卡）树和文件夹结构。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-10-30T19:08:59.450

使用`Ctrl`+`0`将焦点更改到侧边栏。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-01-07T13:04:07.747

不要打开文件夹，而是尝试通过转到“项目”->“将文件夹添加到项目...”来添加文件夹，这将打开一个文件夹选择对话框。这样该文件夹就不会在新窗口中打开，而是会添加到您当前的工作区中。

如果您然后转到“项目”->“将项目另存为...”，您甚至可以保存当前设置（单元格设置、打开的文件、未保存的更改等...），这使得在多个项目之间进行热切换变得容易没有失去控制和未保存的更改，这些更改现在可能不安全，但如果您放弃它们将是一种损失。（只需确保将`"hot_exit"`设置设置为`true`。）

并且`Ctrl`++ （Linux和Windows）/ ++ `Alt`（Mac）允许您在保存的项目之间切换。`P``Super``Ctrl``P`

这样您就不必在每次想要处理您的项目之一时设置您的编辑器。

提示：试试[http://sublime-text-unofficial-documentation.readthedocs.org/en/sublime-text-2/](http://sublime-text-unofficial-documentation.readthedocs.org/en/sublime-text-2/)，这是一个非常适合初学者的资源，它教你掌握技巧并展示你的“新”的力量编辑器，从[“编辑”一章](http://sublime-text-unofficial-documentation.readthedocs.org/en/sublime-text-2/editing/editing.html)开始。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-05-12T04:14:18.647

1.  打开 ST（崇高文本）

2.  **将您的项目根文件夹添加到 ST**：链接：[https ://stackoverflow.com/a/18798528/1241980](https://stackoverflow.com/a/18798528/1241980)

3.  **显示侧边栏**：菜单栏`View`>>`Side Bar``Show Side Bar`

4.  尝试`Ctrl`+`P`打开文件`someFileName.py`

*打开的文件*和*项目文件夹*的*导航面板*是否出现在 ST 的左侧？

 **额外：想要*查看*与 ?位于同一目录中的其他文件`someFileName.py`？
虽然我发现 ST 侧边栏似乎不支持此功能，但您可以尝试在 ST 中使用`Ctrl`+ `O`(Open) 快捷键来打开您的系统文件浏览器，ST 将在其中帮助您定位到包含`someFileName.py`它的同级文件的文件夹。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-05-12T19:46:27.197

Matt York 和 Cyber​​bolt 之前的两个答案都是正确的。

这里的基本想法是你想在 Sublime中获得某种**文件资源管理器。**

方法：

1)`File -> New Folder -> Click on Desired folder and Hit Open`你会在 sublime 中获得新的弹出窗口，这对我来说很烦人

2）我使用第二个选项，即从 nautilus（又名文件）窗口拖放。简直了`drag'n'drop your file you want to explore from nautilus to sublime sidebar`。这样你就呆在同一个窗口里，一切都很酷。

不要忘记启用 View -> Sidebar -> Show Sidebar 并从 nautilus 拖放到那里，当然可以使用`root privleges`. 它就像魅力一样

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-11-07T16:51:48.153

看到这个插件

[https://github.com/stvkoch/sublime-text-go-to-file](https://github.com/stvkoch/sublime-text-go-to-file)

> 此版本虽然没有与 fork 分支合并，但具有更大的根据类名查找文件的能力。
> 
> 尝试：
> 
> 选择命名空间并单击 alt+d 单击类名单词并单击 alt+d 单击模板文件的路径并单击 alt+d

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-01-14T21:01:49.757

只是做：`Ctrl`+ `K`+`B`

祝你今天过得愉快！:D

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-06-01T05:19:28.460

这不完全是一个解决方案，但对于**打开新文件**，这很好用：

### 高级新文件

[https://github.com/skuroda/Sublime-AdvancedNewFile](https://github.com/skuroda/Sublime-AdvancedNewFile)

`Command + Option + n`将文件保存在新目录或现有目录中。

![在此处输入图像描述](../Images/4448beca31b5aed966398fe5367fe4b0.png)

因此，这会将**your_file.html.erb**放在Rails 应用程序的现有*视图目录中。*如果您需要一个新目录 - 您只需键入它作为路径，然后按 Enter。

您还可以`Tab`在终端中为现有目录自动完成。

这并没有提供我正在寻找的侧边栏导航，但至少有助于解决一个经常重复的重要需求。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-31T10:05:27.443

我为要在 Sublime Text 中打开的文件夹添加了上下文菜单项。在 Windows 中，您可以右键单击任何文件夹并在 Sublime 中打开结构。您还可以为 Mac OS 创建一个服务（？）——我只是不熟悉这个过程。

以下内容可以保存到文件 (OpenFolderWithSublime.reg) 以合并到注册表。请务必修改目录结构以适当地指向您的 Sublime 安装。或者，您可以使用 REGEDIT 并浏览到 HKCR\Folder\shell 并手动创建值。

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\Folder\shell\Open with Sublime Text]

[HKEY_CLASSES_ROOT\Folder\shell\Open with Sublime Text\command]
@="C:\\Program Files\\Sublime Text 2\\sublime_text \"%1\"" 
```**

# ssl - 多个图像请求的 Amazon ssl 效率

> ID：11995592
> 
> 赞同：1
> 
> 时间：2012-08-16T21:18:59.290
> 
> 标签：ssl, amazon-web-services, https, amazon-s3, keep-alive

我正在使用 S3 使用 ssl 协议托管和提供大量图像，并希望最大限度地减少与 ssl 握手/协商相关的开销和延迟。当加载网页并且浏览器向 S3 存储桶发出大量 https 请求时，我是否可以合理地预期 ssl 握手开销只会发生一次，并且对于一系列请求，连接将保持活动状态？

我在 S3 的响应标头中没有看到任何 keep-alive 参数，表明是这种情况。是否有可以/需要调整的手动设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:44:06.173

1.  只要您配置了 SSL 会话超时，您应该只对每个客户端/服务器对的每个 SSL 会话超时值进行一次完全握手。将它设置得尽可能低，同时仍然可以获得一些好处，以减少服务器上的会话内存使用。例如 10-15 分钟。

2.  只要您配置了 HTTP keepalive，您就不会在恢复的连接上进行部分握手。再次将此超时设置为尽可能低，同时仍保留好处，例如 30 秒。

# regex - 在 perl 中用正则表达式替换点

> ID：11995594
> 
> 赞同：0
> 
> 时间：2012-08-16T21:19:13.147
> 
> 标签：regex, perl

我正在使用这个例子：

> `New Zealand cyclist Jack Bauer didn't know it during the Olympic road race, but there was a scantily-clad Kiwi 'snow angel' above him. http://www.stuff.co.nz/sport/olympics/7374497/Near-naked-snow-angel-over-cycle-road-race`

我想在`<br />`句号之后添加一个标签，但不在 HTTP 链接中。就在句末。

目前我正在使用：

```
$full_story = $read_story->[0]{story_text}; 
$full_story =~ s/(\D)\.(\D)/<br \/><br \/>/i; 
```

使用此代码，它添加了`<br />`但`m`from`him`正在被删除。

最后结果：

```
New Zealand cyclist Jack Bauer didn't know it during the Olympic road race, but there was a scantily-clad Kiwi 'snow angel' above him.

http://www.stuff.co.nz/sport/olympics/7374497/Near-naked-snow-angel-over-cycle-road-race 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:32:36.760

您可以进行搜索并替换 's///'

给定字符串：

```
my $string = 'The quick brown fox. Jumps over the lazy dog.'; 
```

你可以这样做：

```
$string =~ s/\./<br \/>/g 
```

's' 表示您正在进行搜索和替换。

前两个 '/ /' 之间是您要搜索的那个。在这种情况下，它是一个点 (.)，但您必须使用 \ 对其进行转义，因为正则表达式中的点是通配符。

在下一个“/ /”之间是您要替换的文本。在这种情况下，它是`<br />`. 再次，您必须在这里转义“/”，因为它是一个特殊字符。

最后，末尾的“g”标志表示您在整个字符串中进行搜索和替换。所以在我的例子中，输出将是：

```
print $string;
# The quick brown fox<br /> Jumps over the lazy dog<br /> 
```

由于您不想替换字符串中的点，您可以简单地将它们分隔在不同的变量中，以便更容易操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:14:29.303

用于`index`建立到任何`http`链接的字符串的第一部分的长度。然后`substr`用作左值来替换该部分中的所有句号。

这段代码显示了这个想法。为了测试目的，我添加了几个额外的句号。

```
use strict;
use warnings;

my $str = q{New Zealand cyclist Jack Bauer. didn't know it during the Olympic. road race, but there was a scantily-clad Kiwi 'snow angel' above him.http://www.stuff.co.nz/sport/olympics/7374497/Near-naked-snow-angel-over-cycle-road-race};

my $index = index lc $str, 'http';
$index = length $str if $index < 0;
substr($str, 0, $index) =~ s|\.|.<br/>\n<br/>\n|g;

print $str; 
```

**输出**

```
New Zealand cyclist Jack Bauer.<br/>
<br/>
 didn't know it during the Olympic.<br/>
<br/>
 road race, but there was a scantily-clad Kiwi 'snow angel' above him.<br/>
<br/>
http://www.stuff.co.nz/sport/olympics/7374497/Near-naked-snow-angel-over-cycle-road-race 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:30:02.170

```
$full_story =~ s/(.*?)\.(.*?)/$1<br \/><br \/>$2/i; 
```

# objective-c - 应用程序保持强制关闭/不会计算

> ID：11995598
> 
> 赞同：0
> 
> 时间：2012-08-16T21:19:52.647
> 
> 标签：objective-c, ios

链接到代码（这里的问题已解决）：[“...：”的方法定义未找到](https://stackoverflow.com/questions/11977385/method-definition-for-not-found#comment15977861_11977385)

链接到当前图像/问题：http: [//imgur.com/xVoyp](https://imgur.com/xVoyp)

该应用程序启动正常，文本字段和键盘工作正常。但是，如果我尝试在页面之间切换或点击计算按钮，应用程序强制关闭并失败。有什么建议、提示或线索吗？在这一点上，我完全迷失了。（固定的）

我现在已经把其他的事情都处理好了。但是，每当我尝试计算时，它什么也没做。第一个视图中的 PAR 和 PP 下的黑色文本标签以及第二个视图中的 Sell 和 PAR 是假设方程答案的输出。由于某种原因，它不计算。建议？

图片[http://imgur.com/q2lty](https://imgur.com/q2lty)

。H

```
#import <UIKit/UIKit.h>

@interface keyboardclose : UIViewController {
    IBOutlet UITextField *buy1;
    IBOutlet UITextField *sell1;
    IBOutlet UILabel *percentage1;
    IBOutlet UILabel *profit1;
    IBOutlet UITextField *royalty;
    IBOutlet UITextField *buy2;
    IBOutlet UILabel *sell2;
    IBOutlet UITextField *percentage2;
    IBOutlet UILabel *profit2;

}
@property (weak, nonatomic) IBOutlet UITextField *buytext1;
@property (weak, nonatomic) IBOutlet UITextField *selltext1;
@property (weak, nonatomic) IBOutlet UILabel *profit1;
@property (weak, nonatomic) IBOutlet UILabel *percentage1;
@property (weak, nonatomic) IBOutlet UITextField *royalty;
@property (weak, nonatomic) IBOutlet UITextField *buytext2;
@property (weak, nonatomic) IBOutlet UILabel *sell2;
@property (weak, nonatomic) IBOutlet UILabel *profit2;
@property (weak, nonatomic) IBOutlet UITextField *percentagetext2;

-(IBAction)answerQuestion1:(id) sender;
-(IBAction)answerQuestion2:(id) sender;

- (IBAction)backgroundTouched:(id)sender;
- (IBAction)textFieldReturn:(id)sender;

@end 
```

.m

```
#import "keyboardclose.h"

float VarBuy1 = 0;
float VarSell1 = 0;
float VarProfit1 =0;
float VarPercentage1 =0;
float VarRoyalty = 0;
float VarBuy2 = 0;
float VarSell2 = 0;
float VarProfit2 =0;
float VarPercentage2 =0;

@implementation keyboardclose
@synthesize buytext1;
@synthesize selltext1;
@synthesize buytext2;
@synthesize percentagetext2;

-(IBAction)answerQuestion1:(id) sender {
    VarBuy1 = ([buy1.text floatValue]);
    VarSell1 = ([sell1.text floatValue]);
    VarRoyalty =([royalty.text floatValue]);
    VarProfit1 =([profit1.text floatValue]);
    VarPercentage1 =([percentage1.text floatValue]);

    VarProfit1 = (VarSell1 - (VarSell1 * (VarRoyalty / 100)) - VarBuy1);
    VarPercentage1 = (VarProfit1 / VarSell1);

    profit1.text = [[NSNumber numberWithFloat:VarProfit1] stringValue];
    percentage1.text = [[NSNumber numberWithFloat:VarPercentage1] stringValue];

}

-(IBAction)answerQuestion2:(id) sender {
    VarRoyalty =([royalty.text floatValue]);
    VarBuy2 =([buy2.text floatValue]);
    VarSell2 = ([sell2.text floatValue]);
    VarProfit2 =([profit1.text floatValue]);
    VarPercentage2 =([percentage1.text floatValue]);

    VarSell2 = (VarBuy2 / ((100 - (VarRoyalty / 100)) / 100 - VarPercentage2));
    VarProfit2 = (VarSell2 - (VarSell2 * (VarRoyalty / 100)) - VarBuy2);

    sell2.text = [[NSNumber numberWithFloat:VarSell2] stringValue];
    profit2.text = [[NSNumber numberWithFloat:VarProfit2] stringValue];

}

- (IBAction)backgroundTouched:(id)sender {
    [buy1 resignFirstResponder];
    [sell1 resignFirstResponder];
    [buy2 resignFirstResponder];
    [percentage2 resignFirstResponder];

}

- (IBAction)textFieldReturn:(id)sender {
    [buy1 resignFirstResponder];
    [sell1 resignFirstResponder];
    [buy2 resignFirstResponder];
    [percentage2 resignFirstResponder];

}

@end 
```

# asp.net-mvc-3 - ASP.Net 中的图标

> ID：11995599
> 
> 赞同：0
> 
> 时间：2012-08-16T21:19:54.223
> 
> 标签：asp.net-mvc-3, twitter-bootstrap

我正在尝试在我的引导代码中添加一个图标，但我添加了以下代码：

```
<li><a href="#"><i class="icon-user"></i>Create Client</a></li> 
```

可以在 Rails 上工作，但不能在 ASP 上工作。该链接没有图标。这对 ASP 是否正确？

我的观点如下：

```
 <!DOCTYPE html>
    <html>
    <head>
        <title>@ViewData("Title")</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="@Url.Content("~/Content/bootstrap.css")" rel="stylesheet" type="text/css" />
        <style type="text/css">
          body {
            padding-top: 60px;
            padding-bottom: 40px;
          }
        </style>
        <link href="@Url.Content("~/Content/bootstrap-responsive.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    </head>

    <body>
      <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#">Courtenay's Laundry</a>
            <div class="nav-collapse">
                <ul class="nav nav-pills">
                  <li class="active"><a href="/Index">Home</a></li>

                <!-- Dropdown menu Service -->  
                <li class="dropdown" id="menu1">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">
                      Service
                      <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Action</a></li>
                      <li><a href="#">Another action</a></li>
                      <li><a href="#">Something else here</a></li>
                      <li class="divider"></li>
                      <li><a href="#">Separated link</a></li>
                    </ul>
                  </li>

                    <!-- Dropdown menu Clients --> 
                    <li class="dropdown" id="menu2">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu2">
                          Customers
                          <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Create Customer</a></li>
                          <li><a href="#">Modify Customer</a></li>
                          <li><a href="#">Delete Customer</a></li>
                          <li class="divider"></li>
                          <li><a href="#">View Loyalty</a></li>
                          <li><a href="#">Manually Change Loyalty</a></li>
                          <li class="divider"></li>
                          <li><a href="#">Notify Client</a></li>
                        </ul>
                      </li>

                    <!-- Dropdown menu Management --> 
                    <li class="dropdown" id="menu3">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#menu3">
                          Management
                          <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Action</a></li>
                          <li><a href="#">Another action</a></li>
                          <li><a href="#">Something else here</a></li>
                          <li class="divider"></li>
                          <li><a href="#">Separated link</a></li>
                        </ul>
                      </li>

                  <li class="active"><a href="#">Reporting</a></li>
                </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid">
      <div class="row-fluid">
        <div class="span2">
            <div class="well sidebar-nav">

            <!--Sidebar content-->
            <ul class="nav nav-list">
            <li class="nav-header">Service Links</li>
            <li><a href="#"><i class="icon-book icon-white"></i>Book Job</a></li>
            <li><a href="#"><i class="icon-book"></i>Book Out Job</a></li>
            <li><a href="#"><i class="icon-random"></i>Station Transfer</a></li>
            <li class="nav-header">Client Quick Links</li>
            <li><a href="#"><i class="icon-user"></i>Create Client</a></li>
            <li><a href="#"><i class="icon-share"></i>Notifications</a></li>
            <li class="nav-header">Reporting</li>
            <li><a href="#"><i class="icon-file"></i>Reporting</a></li>
            <li class="divider"></li>
            <li><a href="#"><i class="icon-cog"></i>Settings</a></li>
            </ul>

            </div>
        </div>
        <div class="span10">
            @RenderBody()      
        </div>
      </div>

    </div>

        <script src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-transition.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-alert.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/bootstrap-modal.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-dropdown.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-scrollspy.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-tab.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-tooltip.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-popover.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-button.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-collapse.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-carousel.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-typeahead.js")" type="text/javascript"></script>
    </body>
    </html> 
```

我有：

```
bootstrap-dropdown.js
bootstrap.js
bootstrap.min.js 
```

在我的脚本文件夹中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:24:12.487

你确定你已经包含了引导样式表吗？您可以使用浏览器控制台检查是否有任何文件无法加载等。您在这里使用的服务器端语言不应该有任何区别。否则 - 检查生成的代码并发布它。我一直使用 ASP.Net MVC 和 Bootstrap，没有问题 - 只要确保你的路径是正确的（我感觉你的 Contents 文件夹中有一个 /bootstrap 文件夹，而你没有正确引用它）！

这是一个简单的 ASP.NET MVC3 '样板'-ish 项目。所以你可以很容易地开始。[http://wearereasonablepeople.com/APSMVC3BootstrapBoilerplate.zip](http://wearereasonablepeople.com/APSMVC3BootstrapBoilerplate.zip)

请注意：这里没有花哨的构建脚本，它甚至不包含 LESS 文件，但它可能会帮助您入门。

# ios - 在 CA 层上绘图

> ID：11995608
> 
> 赞同：0
> 
> 时间：2012-08-16T21:20:38.100
> 
> 标签：ios, xcode, cocoa-touch, drawing, calayer

我有一个 CALayer，它是 ImageView 的子层。这显示了一个图像，用户可以调整大小/旋转等。

我希望能够让用户使用 PanGesture 在图像顶部绘制（擦除图像） - 如果图像是原始大小（用户没有尝试调整大小/旋转），这可以正常工作，但只要用户调整大小/旋转并再次尝试，他/她可以在图像上绘制的线将随图像缩放（即如果用户将图像层的大小减半，则绘制线将减半，如果用户旋转将图像层倾斜 45 度，向上平移将绘制一条对角线）。

我目前正在尝试通过绘制然后使用新创建的 self.image2 设置 layer.contents 来做到这一点（image2Position 是屏幕上图层的当前位置）：

```
 UIGraphicsBeginImageContextWithOptions(self.image2.size, NO, 0.0);
    [self.image2 drawInRect:CGRectMake(0, 0, self.image2.size.width, self.image2.size.height)];

    [eraser drawAtPoint:CGPointAdd2(CGPointAdd(currentPoint, CGPointMake(-center.x, -center.y)), CGPointMake(-self.image2Position.x, -self.image2Position.y)) blendMode:kCGBlendModeDestinationOut alpha:1];

    self.image2 = UIGraphicsGetImageFromCurrentImageContext(); 
```

无论用户如何旋转/调整图像大小，如何确保用户可以在相同的坐标系中绘制相同大小的线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:40:52.210

计算图像的比例，例如。0.5 并调整 lineWidth（我假设您使用 UIBezierPath，它比未优化的 CGPath 更快）。好的，这很容易。现在您需要转换您的 CALayer 并相应地旋转您的 UIBezierPath。由于尺寸等原因，这有点困难。

*   使用 convertPoint:toLayer: 或 convertPoint:fromLayer 检查点是否在 CALayer 内：

*   使用这个转换点来绘制这个 UIBezierPath。

# html - CSS在不同屏幕上的位置

> ID：11995611
> 
> 赞同：0
> 
> 时间：2012-08-16T21:20:50.210
> 
> 标签：html, css, position

当我试图给我的标志一个位置时，它在我的屏幕上看起来不错。但是，如果我将屏幕缩小或从手机浏览，则徽标会移动到中心或在标题中出现故障。菜单也有同样的问题。为什么会这样？

CSS：

```
#logo {
    margin-left: 20%;
    padding: 20px;
    float: left;
}

.navigation {
    list-style: none;
    font-family: Arial;
    float: left;
    margin-left: 400px;
    margin-top: 20px;
}

.navigation li {
     display: inline-block;
     margin: 10px;
} 
```

html:

```
<header>
    <div class="header">
    <div id="logo"><img src="img/logo.png"></div>
        <div id="headnav">
            <ul class="navigation">
                <li>Home</li>
                <li>Shop</li>
                <li>Rank</li>
                <li>Free</li>
            </ul>
        </div>
    </div>
    <div class="secondheader">
    </div>
    <div class="thirdheader">
    </div>
</header> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:45:38.977

你的利润很大。这就是为什么它们在小屏幕上看起来像那样。标志有这种风格：

```
margin-left: 350px;
padding: 20px;
float: left; 
```

这给了它 350px 的边距，然后你在 400px 的菜单上有一个巨大的边距，在你把它们加起来之后，它比正常的设备分辨率本身更大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:10:48.303

根据您的评论，您希望您的徽标图像位于左侧，导航文本位于右侧。最简单的解决方案是向左浮动图像，向右浮动导航，然后清除浮动。

那么你的 HTML 会是这样的：

```
<header>
    <div class="header">
        <div id="logo"><img src="img/logo.png"></div>
            <div id="headnav">
                <ul class="navigation">
                    <li>Home</li>
                    <li>Shop</li>
                    <li>Rank</li>
                    <li>Free</li>
                </ul>
            </div>
        <div class="clear"></div>
        </div>
... 
```

然后在你的 CSS 中：

```
#logo {
    float: left;
}
.navigation {
    float: right;
}
.clear {
    clear: both;
} 
```

我做了一个[JSFiddle](http://jsfiddle.net/ySyNy/)例子。（图片有一个明显更大的尺寸以使其更明显，仅供参考。您可以调整结果面板的大小以查看差异。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:55:36.377

我认为您正在尝试将内容集中在标题中。（如果你是，你做错了：P）

您应该`margin:0 auto;`为此使用某种容器。

我想你想要这样的东西：

**HTML**

```
<div class="header">
  <div class="margin-center">
    <div id="logo">
      LOGO
    </div>
    <div id="nav">
      stuff on the right
    </div>
  </div>
</div> 
```

**css**

```
.header{width:100%;}
.margin-center{margin:0 auto;max-width:960px;}
#logo{float:left;}
#nav{float:right;} 
```

* * *

编辑：它可能不起作用，因为你在那里有所有其他风格。

如果可以的话，请试试这个——

**将此添加到您的 CSS**

```
.margin_center {
    max-width: 960px;
    margin: 0 auto;
    position: relative;
    top: 19px;
    min-width: 600px;
}
#headnav {
    float: right;
} 
```

**在你的 CSS 中改变它**

```
#logo {
    margin-left: 350px;
    padding: 20px;
    float: left;
} 
```

至

```
#logo {
    float: left;
} 
```

**并改变这个**

```
.navigation {
    list-style: none;
    font-family: Arial;
    float: left;
    margin-left: 400px;
    margin-top: 20px;
} 
```

至

```
.navigation {
    list-style: none;
    font-family: Arial;
} 
```

**并更改此 HTML**

```
<div class="header">
    <div id="logo"><img src="img/logo.png"></div>
    <div id="headnav">
        <ul class="navigation">
            <li>Home</li>
            <li>Shop</li>
            <li>Rank</li>
            <li>Free</li>
        </ul>
    </div>
</div> 
```

至

```
<div class="header">
    <div class="margin_center">
        <div id="logo"><img src="img/logo.png"></div>
        <div id="headnav">
            <ul class="navigation">
                <li>Home</li>
                <li>Shop</li>
                <li>Rank</li>
                <li>Free</li>
            </ul>
        </div>
    </div>
</div> 
```

# r - 使用 ggplot 命名图，由 lapply 循环

> ID：11995613
> 
> 赞同：3
> 
> 时间：2012-08-16T21:21:06.903
> 
> 标签：r, ggplot2

我正在创建一个地块列表（由`ggplot2`）使用`lapply`

假设我有这个功能

```
plot <- function(x){
  ggplot(x,aes(x=timepoints,means)) + 
       geom_point() + 
       geom_line() +
       scale_x_continuous(name='some name') +
       scale_y_continuous(name='another name') +
       geom_errorbar(aes(ymin=means-stderrs,ymax=means+stderrs),width=2) + 
       opts(title = names(x))    
} 
```

我将通过数据框列表循环它，这是列表中两个数据框的示例：

```
$name1

   means    stderrs        timepoints
1  603.784863 289.952382       0
2  120.00     99.000           20
$name2
   means   stderrs
1  17.425819  5.204339         0
2  25.9       8.0              20 
```

我的问题：`names(x)`我的 ggplot 函数的一部分将每个绘图命名为“意思”，而不是函数所在的数据框的实际名称（例如 name1、name2）`list[[i]]`，我想要那个实际数据框的名称，这将是`names(list[i])`。

问题：可以这么说，有没有办法引用列表中的外层？或者有没有更简单的方法来获取这些带有各自名称的地块的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:44:23.343

它不漂亮，但它有效。

```
plot2 <- function(x, title){
  ggplot(x,aes(x=timepoints,means)) + 
      geom_point() + 
      geom_line() +
      scale_x_continuous(name='some name') +
      scale_y_continuous(name='another name') +
      geom_errorbar(aes(ymin=means-stderrs,ymax=means+stderrs),width=2) + 
      opts(title = title)
}

lapply(names(your_list), function(x) plot2(your_list[[x]], x)) 
```

# internet-explorer - 无法在 ie 中工作，Opera 如何解决？

> ID：11995614
> 
> 赞同：0
> 
> 时间：2012-08-16T21:21:09.230
> 
> 标签：internet-explorer, button, opera

[http://jsfiddle.net/altafali/G2pLW/16/](http://jsfiddle.net/altafali/G2pLW/16/)

我怎样才能修复它以在 ie 或 Opera 浏览器中工作？

我还想在这个 div 的可见性上添加一些延迟？像 30 秒的计时器询问 onclick 您的链接将在 30 秒内出现

在这里查看实际操作 [http://www.symbianhome.com/ibibo-ibrowser-free-download-v2](http://www.symbianhome.com/ibibo-ibrowser-free-download-v2)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:53:17.097

该代码适用于 Opera。对于延迟显示，使用它。单击后它还会禁用该按钮。

```
<script>
var remaining=30;
function countDown() {
  remaining--; //decrease remaining
  document.getElementById('counter').innerText = remaining; //update display
  if (remaining > 0) { //more remains?
    window.setTimeout(countDown, 1000); //yes. wait again
  } else { //no. show the content
    document.getElementById('divId').style.visibility = 'visible';
  }
}
function delayShow(ele) {
  ele.disabled = true;
  document.getElementById('counter').innerText = remaining; //show it
  window.setTimeout(countDown, 1000); //wait for 1 second then call countDown
}
</script>

<div id="divId" style="visibility:hidden">Content!</div>

<button onclick="delayShow(this)">DOWNLOAD</button> <span id="counter"></span> 
```

# c# - 在 C# 中，将字符串与 null 和“”返回 true 进行比较的最佳方法是什么

> ID：11995619
> 
> 赞同：13
> 
> 时间：2012-08-16T21:21:20.890
> 
> 标签：c#, string, string-comparison

我有以下代码（因为我正在尝试检测对字段的更改）

```
 if (person.State != source.State)
 {
      //update my data . .
  } 
```

问题是我遇到 person.State 为 NULL 且 source.State 为 "" 并因此返回 true 的情况。

如果一个为空而另一个为空字符串，我想将它们视为相等并且不更新我的数据。最干净的方法是什么？我是否需要创建自己的 Comparer 对象，因为这似乎是一个通用问题

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T21:24:44.233

如果你真的需要，你可以这样做：

```
if ((person.State ?? string.Empty) != (source.State ?? string.Empty))
{
    // ...
} 
```

但是，根据您的需要，更好的解决方案可能是修改您的`person.State`属性以从不返回空值。

```
public class Person
{
    string _state = string.Empty;
    public string State
    {
        get { return _state; }
        set { _state = value ?? string.Empty; }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-16T21:23:59.963

就个人而言，我会清理/规范化上游，但如果我***必须***在这里这样做：

```
// check different, treating null & "" as equivalent
if ((person.State ?? "") != (source.State ?? "")) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-16T21:30:04.800

虽然其他答案很好，但我会将它们提取到自己的方法中，以使读者更清楚：

```
public static bool StatesEqual(string first, string second)
{
  return first ?? "" == second ?? "";
} 
```

如果您在多个地方比较这些状态，或者允许您处理其他奇怪的情况（如果有），这将是有益的。（示例可能是将其更改为不区分大小写，或者如果两个状态在文本上不同但一个是另一个的缩写，即您希望“WI”等于“Wisconsin”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T21:50:16.593

你会认为会有一个 StringComparison 枚举值来处理这个与 String.Equals... 或一个 CompareOptions 枚举值来处理它与 String.Compare... 但没有。

无论如何，我认为您仍然应该使用 String.Equals 作为最佳实践。

```
string s1 = null;
string s2 = string.Empty;

bool areEqual = string.Equals(s1 ?? string.Empty, s2 ?? string.Empty);

// areEqual is now true. 
```

像这样，您可以轻松添加大小写或文化字符串比较选项...

```
bool areEqual = string.Equals(s1 ?? string.Empty, s2 ?? string.Empty, StringComparison.OrdinalIgnoreCase); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-17T00:54:08.077

这听起来像是扩展方法的完美解决方案。

```
 public static bool IsEqualNoNulls(this String str, string cmp) //bad name, but you get the point
    {
        return (str ?? "") == (cmp ?? "");
    } 
```

.... 或者只是使用我可能更喜欢的扩展方法的主体，因为我不认为这是一个太多的风格问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-17T03:40:28.007

String 类有一个函数“IsNullOrEmpty”，它接受一个字符串。

[http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

从文档中：

> ***IsNullOrEmpty***是一种方便的方法，可让您同时测试 String 是否为 null 或其值为**Empty**。它等价于以下代码：

```
result = s == null || s == String.Empty; 
```

例如：

```
if (!(string.IsNullOrEmpty(person.State) && string.IsNullOrEmpty(source.State)))
{
      //update your data . .
} 
```

或者，您可以使用类似于@Earlz 概述的扩展方法

您可以在此处了解有关它们的更多信息[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

因此，假设我有一个如下的扩展方法：

```
public static bool IsBlank(this string str)
{
    return string.IsNullOrEmpty(str);
} 
```

这将允许您执行类似的操作

```
if(!(person.State.IsBlank() && source.State.IsBlank())
{
     //do something
} 
```

这样做的原因，即使 person.State 或 source.State 为*null*也是因为扩展方法虽然看起来像字符串类的方法，但实际上转换为以字符串变量作为参数的静态方法（根据文档），因此即使字符串变量未设置为字符串的实例，它也会很高兴地工作。

但是请记住，如果您正在阅读代码并试图弄清楚当 person.State 或 source.State 设置为 null 时它为什么起作用，那么这样做可能会在以后绊倒您：P

或者，你知道，或者我只是写一个完整的比较:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-16T21:46:55.773

> 我是否需要创建自己的 Comparer 对象，因为这似乎是一个通用问题

现在从这里的好答案应该很清楚，您没有，但是如果您一遍又一遍地进行这种比较，或者想要使用状态作为键，那么：

```
public class NullEmptStringComparer : IComparer<string>
{
  public Equals(string x, string y)
  {
    return (x ?? string.Empty) == (y ?? string.Empty);
  }
  public int GetHashCode(string str)
  {
    return (str ?? string.Empty).GetHashCode();
  }
} 
```

或者基于另一个比较，以防默认`==`比较不合适（实际上很少）：

```
public class NullEmptCustStringComparer : IComparer<string>
{
  private readonly IComparer<string> _baseCmp;
  public NullEmptCustStringComparer(IComparer<string> baseCmp)
  {
    _baseCmp = baseCmp;
  }
  public Equals(string x, string y)
  {
    return _baseCmp.Equals(x ?? string.Empty, y ?? string.Empty);
  }
  public int GetHashCode(string str)
  {
    return _baseCmp.GetHashCode(str ?? string.Empty);
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-22T14:01:26.040

所有给出的答案都将无法通过[土耳其测试](http://www.moserware.com/2008/02/does-your-code-pass-turkey-test.html)。试试这个：

```
public static bool StatesEqual(string first, string second)
{
    if (first == null || second == null)
        return false; // You can also use return first == second if you want to compare null values.

    return first.Equals(second, StringComparison.InvariantCulture);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-16T23:53:47.883

我相信这是*装饰器*模式的一个案例。你需要装饰一个股票 StringComparer 来做你想做的事：

```
public enum Collapse
{
  None                      = 0 ,
  EmptyAndWhitespace        = 1 ,
  NullAndWhitespace         = 2 ,
  NullAndEmpty              = 3 ,
  NullAndEmptyAndWhitespace = 4 ,
}

public class MySpecialStringComparerDecorator : StringComparer
{
  const   string         COLLAPSED_VALUE = "" ;
  private StringComparer instance ;
  private Collapse     rule     ;

  public StringComparer Decorate( StringComparer sc , Collapse equivalencyRule )
  {
    StringComparer instance = new MySpecialStringComparer( sc , equivalencyRule ) ;
    return instance ;
  }

  private MySpecialStringComparerDecorator( StringComparer comparer , Collapse equivalencyRule )
  {
    if ( comparer == null                                  ) throw new ArgumentNullException("comparer") ;
    if ( !Enum.IsDefined(typeof(Collapse),equivalencyRule) ) throw new ArgumentOutOfRangeException("equivalencyRule") ;

    this.instance = comparer ;
    this.rule     = equivalencyRule ;

    return ;
  }

  private string CollapseAccordingToRule( string s )
    {
        string collapsed = s ;
        if ( rule != Collapse.None )
        {
            if ( string.IsNullOrWhiteSpace(s) )
            {
                bool isNull  = ( s == null ? true : false ) ;
                bool isEmpty = ( s == ""   ? true : false ) ;
                bool isWS    = !isNull && !isEmpty ;

                switch ( rule )
                {
                    case Collapse.EmptyAndWhitespace        : if ( isNull||isWS          ) collapsed = COLLAPSED_VALUE ; break ;
                    case Collapse.NullAndEmpty              : if ( isNull||isEmpty       ) collapsed = COLLAPSED_VALUE ; break ;
                    case Collapse.NullAndEmptyAndWhitespace : if ( isNull||isEmpty||isWS ) collapsed = COLLAPSED_VALUE ; break ;
                    case Collapse.NullAndWhitespace         : if ( isNull||isWS          ) collapsed = COLLAPSED_VALUE ; break ;
                    default                                 : throw new InvalidOperationException() ;
                }
            }
        }
        return collapsed ;
    }

  public override int Compare( string x , string y )
  {
    string a     = CollapseAccordingToRule(x) ;
    string b     = CollapseAccordingToRule(y) ;
    int    value = instance.Compare(a,b);
    return value ;
  }

  public override bool Equals( string x , string y )
  {
    string a     = CollapseAccordingToRule(x) ;
    string b     = CollapseAccordingToRule(y) ;
    bool   value = instance.Equals(a,b) ;
    return value ;
  }

  public override int GetHashCode( string obj )
  {
    string s     = CollapseAccordingToRule(obj) ;
    int    value = instance.GetHashCode( s ) ;
    return value ;
  }

} 
```

用法很简单：

```
StringComparer sc = new MySpecialStringDecorator( StringComparer.CurrentCultureIgnoreCase , Collapse.NullAndEmptyAndWhitespace ) ;

// go to town 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-16T21:28:26.937

Well, empty and null are not the same thing, so you're not referring to a generic problem here. Yours is a *domain* problem where your business rules demand that particular evaluation as being true. You can always write a method that looks like this:

```
public static bool AreMyStringsCustomEqual(string s1, string s2) {
    return (s1 == null || s1 == "" && s2 == null || s2 == "");
} 
```

Or something like that. And then call it from everywhere. You could even make it an extension method.

# mysql - SQLHeavy for MySQL/PostgreSQL - 从哪里开始

> ID：11995623
> 
> 赞同：0
> 
> 时间：2012-08-16T21:21:32.420
> 
> 标签：mysql, vala

我已经看过 SQLHeavy 的使用文档（我一直渴望类似的东西已经有一段时间了），它是一个非常酷的抽象层。

我希望 MySQL/PostgreSQL 具有相同的功能。

*   SQLHeavy 背后的代码是在考虑可插入数据库驱动程序的情况下创建的，还是 100% 专用于 SQLite？
*   如果不考虑插入能力，知道代码库对我来说尝试移植有多干净？为了澄清它是否需要在代码中进行严重的结构/逻辑更改，或者只是识别替换每个 SQLite 特定函数并更改为 MySQL 特定函数并适应/处理参数？

注意：我是一名 PHP 开发人员（具有一些 C/C++/Java 背景），计划在 Vala 从事宠物项目（不一定是低参与度）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:13:35.170

它专用于 SQLite，移植它并不可行。

当我创建 SQLHeavy 时，我（非常）简要地考虑过支持多个数据库，但是很多功能根本无法很好地转换为其他数据库，而 SQLHeavy 的真正设计目的是使访问 SQLite 数据库更容易，而不是抽象出数据库之间的差异。

您可能想看看 libgda，这是一个非常令人印象深刻的项目。它们分发 Vala 绑定，并支持多个数据库（包括 Postgres 和 MySQL）。

# java - 在 Android 上的特定情况下格式化日期和时间

> ID：11995625
> 
> 赞同：0
> 
> 时间：2012-08-16T21:21:33.677
> 
> 标签：java, android, string, date, datetime

我搜索了很多，但没有任何接缝可以帮助我......我用许多资源构建了一个字符串，最终看起来像这样（我使用了一些子字符串方法和类似的东西）：

```
xxxa="16.Aug.2012 07:15:00" 
```

我想将其解析为日期，以便将其与当前时间进行比较。所以，我使用这些行：

```
Date datex=null;
DateFormat formatter = new SimpleDateFormat("dd.Mmm.yyyy hh:mm:ss");
try {
            datex = (Date)formatter.parse(xxxa);
            //Log.w("TIME: ", datex.toString());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

从我的角度来看，这两件事匹配并且应该正常解析..还是应该？

我总是收到这样的错误：

```
java.text.ParseException: Unparseable date: "16.Aug.2012 07:00:00" at Java.text.DateFormat.parse(DateFormat.java:626) ........ 
```

我试图改变字母的位置，改变一些东西的位置..但仍然不适合。我可以改变那个字符串看起来像任何东西......我只是希望它看起来像一个实时，所以我可以比较现在和那个时间......

任何人 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:29:58.917

根据[SimpleDateFormat javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

> **M**一年中的月份
> 
> **m**分钟

```
 String dateStr = "16.Aug.2012 07:15:00";
        Date datex = null;
        DateFormat formatter = new SimpleDateFormat("dd.MMM.yyyy hh:mm:ss");
        try {
            datex = (Date) formatter.parse(dateStr);
            System.out.println(datex);
            //Log.w("TIME: ", datex.toString());
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# jquery - 使用 Jquery 搜索滚动 div 菜单

> ID：11995628
> 
> 赞同：1
> 
> 时间：2012-08-16T21:21:47.393
> 
> 标签：jquery

我在 jquery 中有一个滚动菜单，它在鼠标悬停时垂直滚动：（它的一部分被隐藏，直到滚动到视图中）

```
<script type="text/javascript">
$(document).ready(function() {

    //Scroll the menu on mouse move above the #sidebar layer
    $('#sidebar').mousemove(function(e) {

        //Sidebar Offset, Top value
        var s_top = parseInt($('#sidebar').offset().top);

        //Sidebar Offset, Bottom value
        var s_bottom = parseInt($('#sidebar').height() + s_top);

        //Roughly calculate the height of the menu by multiply height of a single LI with the total of LIs
        var mheight = parseInt($('#menu li').height() * $('#menu li').length);

        //Calculate the top value
        //This equation is not the perfect, but it 's very close    
        var top_value = Math.round(((s_top - e.pageY) / 100) * mheight / 2);

        //Animate the #menu by chaging the top value
        $('#menu').animate({
            top: top_value
        }, {
            queue: false,
            duration: 5000
        });
    });
});​
</script> 
```

然后我使用搜索并突出显示 jquery 脚本在滚动菜单中搜索名称：

```
<script type="text/javascript">
$(function() {
    $('#text-search').bind('keyup change', function(ev) {
        // pull in the new value
        var searchTerm = $(this).val();)

    // remove any old highlighted terms
    $('#sidebar').removeHighlight();

    // disable highlighting if empty
    if (searchTerm) {
        // highlight the new term
        $('#sidebar').highlight(searchTerm);
    }
    });
});​
</script> 
```

但是我的问题是：当我输入搜索词时，它只会突出显示可见的菜单项。如何让 jquery 自动滚动到 div 中的搜索词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:45:28.883

类似于：

```
var searchTermTop,
    searchTermBottom;

searchTermTop = searchTerm.offsetParent().top;
searchTermBottom = searchTerm.offsetParent().bottom;

if(searchTermTop < 0){
    //set the menu scroll to it's current scroll + the searchTermTop
}
if(searchTermBottom > mheight){
    //set the menu scroll to it's current scroll + the searchTermBottom
} 
```

类似的东西。如果您需要更多细节，请告诉我。现在需要跑出办公室，否则我会填写一些详细信息。

# asp.net - Extjs4，包含MS dateFormat 同步的存储？

> ID：11995630
> 
> 赞同：1
> 
> 时间：2012-08-16T21:22:10.013
> 
> 标签：asp.net, extjs4, extjs4.1

Extjs 网格模型有，

```
{
    name: "ORDERDATE",
    type: 'date',
    dateFormat: 'MS'
} 
```

我尝试了具有上述模型的同步存储，

那么发布日期的格式是这样的（Json Type），

```
ORDERDATE "\/Date(1346212800000)\/" 
```

我猜是因为这种格式，

在 Asp.net(C#) 中无法使用 DateTime 获得该值？多变的。

我尝试使用**DateTime 接收该数据？ORDERDATE**，但它始终具有 Null 值。

所以，我想尝试将日期发布格式更改为“m/d/y”，但我不知道该怎么做，

有人知道，请给我建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:20:25.333

我遇到了同样的问题。在我的日期字段上使用`convert`配置（[docs](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-convert)）对我有用。

所以我的模型有这样的：

```
fields: [
    { name: 'SomeField', type: 'string'} 
    ...
    , { name: 'TimeStamp',
      type: 'date',
      //dateFormat: 'MS',          
      convert: function (value, record) {
        //Convert date type that .NET can bind to DateTime
        var date = new Date(parseInt(value.substr(6)));
        return Ext.Date.format(date, 'l, F d, Y g:i:s A'); //Full Date Time
      }
    }
] 
```

我相信将来我们可以使用`serialize`配置（[docs](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-serialize)）在将模型发送到服务器之前转换字段。听起来它只适用于 4.1.2 及更高版本。

在这种情况下，我相信这会起作用：

```
fields: [
    { name: 'SomeField', type: 'string'} 
    ...
    , { name: 'TimeStamp',
      type: 'date',
      dateFormat: 'MS',          
      serialize: function (value, record) {
        //Convert date type that .NET can bind to DateTime
        var date = new Date(parseInt(value.substr(6)));
        return Ext.Date.format(date, 'l, F d, Y g:i:s A'); //Full Date Time
      }
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:19:15.690

要更改日期格式，您可以使用[文档中的此图表](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date)。

所以`dateFormat: 'm/d/y'`应该为你做这个把戏。

虽然我会等着看是否有任何 asp.net 向导弹出来提供帮助，因为它自己的 Asp.net 不支持微软格式对我来说看起来很奇怪。

# iphone - OpenGL：只有一些纹理有效

> ID：11995633
> 
> 赞同：0
> 
> 时间：2012-08-16T21:22:23.800
> 
> 标签：iphone, opengl-es

我正在使用[此处](http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures)找到的 RayWenderlich OpenGL 教程作为应用程序的起点。不过，在添加我自己的纹理后，我遇到了一些困难。无论我添加到项目中的任何图像都会变黑。我尝试了 png（在示例中使用）和 JPEG 的不同设置。我试过只是更改默认加载和绘制的文件名并制作不同的纹理实例，两者都只是黑色。

我尝试在 Photoshop 中打开地板纹理并重新保存它，结果它在游戏中不可见。

但是我尝试使用不同的名称复制项目原始的 tile_floor.png 文件，效果很好，所以我假设 opengl 需要一种非常特定的格式。

我该怎么做才能让它工作？

编辑：

这是用于加载图像的方法：

```
static GLuint setupTexture(NSString *fileName) {

// 1
CGImageRef spriteImage = [UIImage imageNamed:fileName].CGImage;
if (!spriteImage) {
    NSLog(@"Failed to load image %@", fileName);
    exit(1);
}

// 2
size_t width = CGImageGetWidth(spriteImage);
size_t height = CGImageGetHeight(spriteImage);

GLubyte * spriteData = (GLubyte *) calloc(width*height*4, sizeof(GLubyte));

CGContextRef spriteContext = CGBitmapContextCreate(spriteData, width, height, 8, width*4, CGImageGetColorSpace(spriteImage), kCGImageAlphaPremultipliedLast);    

// 3
CGContextDrawImage(spriteContext, CGRectMake(0, 0, width, height), spriteImage);

CGContextRelease(spriteContext);

// 4
GLuint texName;
glGenTextures(1, &texName);
glBindTexture(GL_TEXTURE_2D, texName);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, spriteData);

free(spriteData);        
return texName;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:02:43.313

对于非二次幂纹理，您需要在 glTexImage2D 之前为纹理设置参数 GL_CLAMP_TO_EDGE。

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE)
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:46:08.137

我发现我的问题是我的图像尺寸不是 2 的幂（2、4、8、16、32、64、128、256、512、1024）。显然 OpenGL ES 需要这个。

# jquery - Jquery Animate ScrollLeft 在 ipad 上不起作用

> ID：11995642
> 
> 赞同：0
> 
> 时间：2012-08-16T21:23:12.367
> 
> 标签：jquery, html, css, ipad, ipad-2

所以我正在开发这个网站，它可以在 pc 和 mac 上完美运行，但在 ipad 上我遇到了导航问题。

[http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/](http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/)

此代码将 html,body 移动到另一个部分。它可以在 pc 和 mac 上完美运行。但是当我在 ipad 上时，它就不起作用了。

在这种情况下，它移动到索引部分。

```
$("#ini").click(function() {
        if($("#todolocal").css("left") == '0px'){
            $("#todolocal").animate({left: '3500px'}, 1000,'easeInOutQuad',function(){
            $("#todolocal").css('left', '-2500px')
            $('html,body').stop(true,false).animate({
                scrollLeft: $("#todoini").offset().left ,
                scrollTop: 0}, 650);
         $('#todoini').stop(true,false).animate({
                scrollTop: 0 }, 650);
                lugar= 0;
                window.location.hash = '';
                document.title="Kipling: Inicio";
                $("#ini").addClass('focusini');
                $("#hist").removeClass('focushist');
                $("#col").removeClass('focuscoleccion');
                $("#cuid").removeClass('focuscuidados');
                $("#suc").removeClass('focussucursales');
                $("#cont").removeClass('focuscontacto');
                return false;
        });
        }
        if($("#todobolsas").css("left") == '0px'){
            $("#todobolsas").animate({left: '3500px'}, 1000,'easeInOutQuad',function(){
            $("#todobolsas").css('left', '-2500px')
            $('html,body').stop(true,false).animate({
                scrollLeft: $("#todoini").offset().left ,
                scrollTop: 0}, 650);
         $('#todoini').stop(true,false).animate({
                scrollTop: 0 }, 650);
                lugar= 0;
                window.location.hash = ''
                document.title="Kipling: Inicio";
                $("#ini").addClass('focusini');
                $("#hist").removeClass('focushist');
                $("#col").removeClass('focuscoleccion');
                $("#cuid").removeClass('focuscuidados');
                $("#suc").removeClass('focussucursales');
                $("#cont").removeClass('focuscontacto');
                return false;
        });
        }
        else{
        $('html,body').stop(true,false).animate({
                scrollLeft: $("#todoini").offset().left ,
                scrollTop: 0}, 650);
         $('#todoini').stop(true,false).animate({
                scrollTop: 0 }, 650);
                lugar= 0;
                window.location.hash = ''
                document.title="Kipling: Inicio";
                $("#ini").addClass('focusini');
                $("#hist").removeClass('focushist');
                $("#col").removeClass('focuscoleccion');
                $("#cuid").removeClass('focuscuidados');
                $("#suc").removeClass('focussucursales');
                $("#cont").removeClass('focuscontacto');
                return false;
            }
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:37:33.197

我通过一次只动画一次而不是同时动画来解决它并且它有效:)

```
$('html,body').stop(true,false).animate({
                scrollLeft: $("#todoini").offset().left}, 650,function(){
                    $(this).stop(true,false).animate({scrollTop:0})
                });
         $('#todoini').stop(true,false).animate({
                scrollTop: 0 }, 650);
                lugar= 0;
                window.location.hash = '';
                document.title="Kipling: Inicio";
                $("#ini").addClass('focusini');
                $("#hist").removeClass('focushist');
                $("#col").removeClass('focuscoleccion');
                $("#cuid").removeClass('focuscuidados');
                $("#suc").removeClass('focussucursales');
                $("#cont").removeClass('focuscontacto'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:36:06.960

您是否在加载 JavaScript 之前明确设置了移动元素的左侧 CSS 属性？此外，在为左、上等设置动画时，您只需执行 left: 350 即可。无需使用 px 封装在引号中。

# usb - CE6 USB 启动时连接时无法识别，但启动后连接正常

> ID：11995643
> 
> 赞同：0
> 
> 时间：2012-08-16T21:23:15.063
> 
> 标签：usb, windows-ce, ftdi

我有一根 FTDI USB 电缆将设备连接到 CE6.0 R3。

如果我等待 CE6 设备启动然后插入 USB 没问题。

如果我在启动时连接了 USB，它会说它无法识别并要求提供驱动程序名称。

我正在使用 FTDI VCP。

感谢任何帮助以使其正常工作。

我没有平台构建器，我使用的是制造商标准映像，CE 设备基本上每次都会启动一个干净的映像（windows 等目录是易变的）

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:05:10.350

这是 OEM 的 USB 主机驱动程序（或底层平台中断处理程序）的问题。他们没有正确处理连接中断。只有他们，或者具有 BSP 和至少该驱动程序和系统中断处理程序的来源的人，才能解决这个问题。

# ruby-on-rails - 使用 render_to_string 从模型方法导出 PDF

> ID：11995644
> 
> 赞同：2
> 
> 时间：2012-08-16T21:23:17.093
> 
> 标签：ruby-on-rails, ruby, pdf, rendering, htmldoc

我需要在我的 ProjectBill 模型上实现一个 _to_pdf 方法，它会在这个地方生成我的账单的 PDF：

```
/public/xls/bills/project_#{project.number}_bill_#{bill.number}.pdf 
```

我的应用程序使用 HTMLDoc 生成 PDF。我正在使用**Rails 2.3.11**。使用 HTMLDoc gem，我需要将我的部分视图**_bill.pdf.haml的****render_to_string**传递给 HTMLDoc ，它在模型中（仅在控制器中）是不可访问的。

 **我的控制器中已经有一个 export_to_pdf 操作，由用户在需要导出时触发（这个操作有效）。模型方法将被一个计划任务调用，一个电子邮件发送者在 schedule_date 等于 Date.today 时发送账单。

我已经尝试了很多解决方案：

*   [http://www.omninerd.com/articles/render_to_string_in_Rails_Models_or_Rake_Tasks/print_friendly](http://www.omninerd.com/articles/render_to_string_in_Rails_Models_or_Rake_Tasks/print_friendly)
*   在我的 ProjectBill 控制器上有一个 to_pdf 操作并从模型中调用它（但不起作用，说即使在控制器中调用了 render_to_string 也没有定义）
*   将我的工作 export_to_pdf 方法与从我的模型发送的获取请求一起使用（但我发现我不能真正从模型发送请求......）
*   使用带有 render_to_string 的 Helper（不起作用：未定义的方法）
*   甚至更多！

但仍然无法正常工作。

有人可以帮我解决这个问题吗？我卡住了，找不到任何解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T18:20:06.577

啊，我终于做到了！

感谢您的回答 Sean，但我不是在寻找更好的 Gem，而是在寻找解决问题的方法。

出于某种原因，我无法在模型中使用 render_to_string 方法......所以我在模型上创建了 export_to_pdf 方法：

```
 def export_to_pdf
    bill = self
    project = self.project

    path = "facture_#{self.project.id}_#{self.bill_number}_#{Date.today.strftime('%Y_%m_%d')}.pdf"

    Plus::BillingItemsController.new._to_pdf(bill.id)

    if File.exists?(path)
      return path
    else
      return nil
    end
  end 
```

如您所见，我在模型中调用了我的控制器。这是我的 _to_pdf 方法：

```
 def _to_pdf(bill_id)
    @bill = Plus::ProjectBill.find_by_id(bill_id)
    @project = @bill.project
    path = "#{RAILS_ROOT}/public/xls/facture_#{@project.id}_#{@bill.bill_number}_#{Date.today.strftime('%Y_%m_%d')}.pdf"

    av = ActionView::Base.new(Rails::Configuration.new.view_path)
    av.class_eval do
      include ApplicationHelper
      include ActionController::UrlWriter
      default_url_options[:host] = 'mysite.com'
    end

    av.extend ApplicationController.master_helper_module
    html = av.render(:partial => "/plus/billing_items/bill_for_pdf.haml", :locals => {:bill => @bill})
    data = to_pdf(html, false, {:header => '', :headfootsize => 0, :outfile => path})
  end 
```

我的 to_pdf 函数只是执行 PDF::HTMLDoc.new 和链接、 logoimage 等的 set_option 并返回 pdf.generate

我希望这可以在某天帮助某人！**

# android - GPS三星galaxy s2

> ID：11995646
> 
> 赞同：3
> 
> 时间：2012-08-16T21:23:38.483
> 
> 标签：android

我有一个三星galaxy s2。我的 GPS 有点问题。如果我使用互联网，我的导航工作。但是当我关闭 3G 时，GPS 不起作用。

我的问题是我需要互联网/3G 才能使用 GPS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:26:49.593

It sounds like your GPS is set to use the "network" to identify its location.

Go to the GPS Settings and change it to use the GPS Sattelite.

EDIT: You need WIFI or 3G to connect to the internet yes. But it shouldnt be a requirement for GPS. If you have turned on GPS sattelite, ensure you are outside, with clear sky to obtain a fix. It might just have trouble finding you with the sattelite at the moment so is resorting to the network if possible.

# redirect - wordpress 插件 add_filter(login_redirect 不起作用

> ID：11995647
> 
> 赞同：3
> 
> 时间：2012-08-16T21:23:40.917
> 
> 标签：redirect, login, wordpress

我从这个[例子](http://codex.wordpress.org/Plugin_API/Filter_Reference/login_redirect)中做了一个简单的插件：

```
<?php
/*
Plugin Name: Redirect on login
Plugin URI: some URI
Description: Custom Redirect on login
Author: Some Autor
Version: 1.0
Author URI: some URI
*/

function my_login_redirect($redirect_to, $request){
global $current_user;
get_currentuserinfo();
//is there a user to check?
if(is_array($current_user->roles))
{
    //check for admins
    if(in_array("administrator", $current_user->roles))
       return home_url("/wp-admin/?administrator");
    else
        return home_url("?NOTadministrator");
}
}
add_filter("login_redirect", "my_login_redirect", 10, 3);

?> 
```

它仅在您已经登录时才有效。

请尝试一下 - 将插件代码放在您的 WordPress 插件目录中 - 激活它 -**确保您已完全退出**`/wp-admin/?administrator`- 如果您已经登录，它只会将您重定向到。

**在这种情况下，10、3**代表什么？

从本网站和其他网站上的其他示例 - 人们正在参考`$user->ID`而不是全局`$user_ID`和其他信息 - 但我没有看到任何完整的代码显示使用这些方法的完整功能的复制粘贴插件。我不是要求某人为我做我的工作——我只是真的需要看到一个完整的工作示例。

如果您有一个完整的工作示例，清楚地显示了所需的所有变量和值 - 您可以在这里发布吗？非常感谢。

我正在添加另一个示例，然后要跳下一座桥——自从我第一次开始编程以来，我还没有在某件事上浪费太多时间。

我不明白**login_redirect**是如何工作的——如果我在调用它时无法确定用户信息。

```
 function my_login_redirect(){

    if($user->ID){

        if($user->has_cap('manage_options')) {
            return home_url("/wp-admin/?administrator");
        }else{
            return home_url("?NOTadministrator");
        }

    }else{

        echo "WHY DOES $user->ID NOT HAVE ANY VALUE YET WHEN CALLING 'login_redirect'? How am I to decide where to send the user - if I do not know who the user is because - I can not get the user ID yet?!";

    }
 }

 add_filter('login_redirect', 'my_login_redirect', 10, 3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:56:17.373

*   `10`表示您的函数在其他过滤 login_redirect 中的优先级
*   `3`表示您的函数接受的参数数量。

请参阅：[http ://codex.wordpress.org/Function_Reference/add_filter](http://codex.wordpress.org/Function_Reference/add_filter)

# excel - 在处理过程中禁用按钮或其他控件

> ID：11995655
> 
> 赞同：1
> 
> 时间：2012-08-16T21:24:13.693
> 
> 标签：excel, vba

我有一些按钮控件可以触发冗长的处理。我是否必须担心用户在第一次执行处于活动状态时按下按钮并触发另一个执行？

我发现我可以使用点击事件来禁用按钮，调用处理例程，然后启用按钮。但是，如果处理程序失败，这似乎充满了危险。

我可以在点击例程中添加错误内容以捕获失败，但处理例程中的任何错误调用会取消这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:06:10.810

根据经验，我发现期望您*可能会*看到多个并行执行并计划避免它们更安全。尝试使用和不使用标记线并重复单击按钮：

```
Sub CommandButton1_Click()

    Static InProgress As Boolean

    If InProgress Then Exit Sub  'try commenting out...

    InProgress = True

    Debug.Print "starting...."
    DoProcessing
    Debug.Print "....Done"

    InProgress = False

End Sub

Sub DoProcessing()
    Dim x As Long, v

    For x = 1 To 1000
        ActiveSheet.Cells(x, 1).Copy ActiveSheet.Cells(x, 2)
        DoEvents
    Next x

End Sub 
```

这种特定行为是由`DoEvents`调用引起的——没有这个，你不应该看到并行运行，正如 enderland 指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T23:12:37.477

我决定在其单击处理程序中禁用该按钮，然后在调用处理例程后重新启用它。

```
Private Sub CommandButton2_Click()
    Dim s As Integer
    s = CommandButton2.Enabled
    If s Then
        On Error GoTo Fail
        CommandButton2.Enabled = False
        GetData
Fail:
        CommandButton2.Enabled = True
    End If
End Sub 
```

我还发现这比删除默认嵌入公式 =EMBED("Forms.CommandButton.1","") 并附加宏更令人愉悦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:42:37.377

> 我是否必须担心用户在第一次执行处于活动状态时按下按钮并触发另一个执行？

不 - 只要您的处理过程中没有任何代码调用`DoEvents`.

尝试将以下代码分配给工作表中的按钮（您可能需要将迭代器调整得更高以获得足够的运行时间）并单击其他按钮 - 或在 Excel 中执行任何其他操作。

```
Sub test()
    For i = 1 To 100
        For j = 1 To 100
            Range("A1").Select
        Next j

    Next i
End Sub 
```

一个额外的好处是它有助于说明如何`.select`导致使用 Excel 时操作变慢......

> 我发现我可以使用点击事件来禁用按钮，调用处理例程，然后启用按钮。但是，如果处理程序失败，这似乎充满了危险。

包含某种错误处理可能是一个好主意，而不考虑简单地重新启用按钮以进行任何有意义的操作，除非您是唯一的用户。

> 我可以在点击例程中添加错误内容以捕获失败，但处理例程中的任何错误调用会取消这些吗？

您必须正确考虑错误和不同的地方。答案是“这取决于你的实现”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T22:07:47.603

我得到与 enderland 相反的结果，在表单或工作表上有一个按钮（来自“表单”菜单的按钮）。我设置了一个静态变量，每次按下按钮时都会增加，如果我在代码运行时按下它，它会运行并再次增加。所以我会说是的，你需要设置一个全局变量来处理这个：

```
Sub CommandButton1_Click()
Static Incrementer As Long
Dim i As Long

Incrementer = Incrementer + 1
For i = 1 To 1000
Debug.Print Incrementer
Next i
End Sub 
```

# jquery - 如何在浏览器打开和重新初始化时调整 div 最大高度

> ID：11995665
> 
> 赞同：5
> 
> 时间：2012-08-16T21:25:07.733
> 
> 标签：jquery, html, css

好的，我有一个 div 类“内容”，每当浏览器将高度调整为 800 像素时，内容 div 会将其最大高度调整为 500 像素。我遇到的问题是，如果浏览器以 800px 的高度打开，那么除非我刷新浏览器，否则 div 没有滚动条。

我的代码：

```
<script type="text/javascript">
$(window).on('resize', function(){
if($(this).height() <= 800){
    $('.content').css('max-height', '500px'); //set max height
}else{
    $('.content').css('max-height', ''); //delete attribute
}
});
</script> 
```

此外，我正在使用 jScrollPane，如果我在 css 中设置最大高度，它工作正常，但如果我使用上面的代码，而不是使用常规滚动条。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T21:28:57.313

试试这个：

```
$(document).ready(function() {

   $(window).on('resize', function(){
     if ($(this).height() <= 800){
          $('.content').css('max-height', '500px'); //set max height
     } else{
          $('.content').css('max-height', ''); 
     }
   }).resize()

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:29:09.157

调用该代码一次`$(document).ready()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:29:29.560

把它包起来

```
$(function() {
    //Script in here should run on document.ready
}); 
```

# fullcalendar - Fullcalendar clientEvents 的长度为零

> ID：11995666
> 
> 赞同：2
> 
> 时间：2012-08-16T21:25:25.740
> 
> 标签：fullcalendar

在尝试根据来自 URL 的信息加载页面和日历后突出显示特定事件时，我了解到我已经让事件对象使用[updateEvent](http://arshaw.com/fullcalendar/docs/event_data/updateEvent/)。我还了解到，使用[clientEvents](http://arshaw.com/fullcalendar/docs/event_data/clientEvents/)是您应该这样做的方式。当我尝试使用`clientEvents`时，我只是得到一个空数组。文档和[来源](https://github.com/arshaw/fullcalendar/blob/master/src/EventManager.js)似乎同意，如果我不提供可选参数，那么我应该取回当前日历上的所有内容。

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js'></script>
<script type='text/javascript'>
$(document).ready(function() {

  $('#calendar').fullCalendar({
    defaultView: 'agendaWeek',
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay',
    },
  });

  $('#calendar').fullCalendar('addEventSource',
    { url: 'https://www.example.org/combinedcalendar/feed/json.php',
      dataType: 'jsonp'});

  console.log($('#calendar').fullCalendar('clientEvents').length);

});
</script>
<div id='calendar'></div> 
```

在 javascript 控制台中记录的值为`0`;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:25:25.740

当我撰写这个问题并进行测试时，我意识到首先应该是显而易见的。使用 ajax的`$('#calendar').fullCalendar('addEventSource',...);`调用是异步的。因此，`clientEvents`控制台的日志记录发生**在**事件数据实际下载并添加到日历之前。

我将我的日志记录移到了 fullCalendar[加载](http://arshaw.com/fullcalendar/docs/event_data/loading/)函数中，该函数在加载开始或完成时触发。

```
$('#calendar').fullCalendar({ 
  loading:function(isLoading,view){
    if (!isLoading)
    {
      console.log($('#calendar').fullCalendar('clientEvents').length);
    }
  },
  ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T12:19:09.320

我尝试了 Zoredache 的片段，但发现它没有涵盖加载仍在进行时的情况。在这种情况下，最好使用函数来检查加载是否已经完成：

```
function onCalLoad(el, isLoading, view){
  if (isLoading){
     setTimeout(onCalLoad, 300);
  } else {
     if (el.fullCalendar('clientEvents').length==0){
         some ops..
     };
   }
}
$('#calendar').fullCalendar({ 
  loading:function(isLoading,view){
    onCalLoad($(this), isLoading, view);
  },
  ...
}); 
```

# mysql - 复杂的 MySQL 查询，可变的人口

> ID：11995667
> 
> 赞同：-1
> 
> 时间：2012-08-16T21:25:26.420
> 
> 标签：mysql

我有一个包含列的表：

AnswerID、OwnerUserID、CreationDate

如何使用 OwnerUserID 在为该 AnswerID 列出的 CreationDate 之前发布的答案总数填充标题为 (AnswersPosted) 的第四列？

编辑：

下面是表格应该是什么样子的示例。（抱歉，我刚加入后无法发布图片……）我有兴趣让最后一列显示所有正确的数字。谢谢！

![在此处输入图像描述](../Images/88dcdd9074a3ab963cd321bf834790f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:29:58.847

Use this solution:

```
SELECT a.AnswerID,
       a.OwnerUserID,
       a.CreationDate,
       b.cnt AS AnswersPosted
FROM   tbl a
JOIN   (
       SELECT    a.OwnerUserID,
                 a.CreationDate,
                 COUNT(b.OwnerUserID) AS cnt
       FROM      tbl a
       LEFT JOIN tbl b ON a.OwnerUserID  = b.OwnerUserID
                      AND b.CreationDate < a.CreationDate
       GROUP BY  a.OwnerUserID,
                 a.CreationDate
       ) b ON a.OwnerUserID  = b.OwnerUserID
          AND a.CreationDate = b.CreationDate 
```

* * *

[*SQLFiddle Demo*](http://www.sqlfiddle.com/#!2/43d5f/6)

# c# - 将数据附加到现有的 xml 文件

> ID：11995669
> 
> 赞同：1
> 
> 时间：2012-08-16T21:25:40.507
> 
> 标签：c#, xml

我不想覆盖 XML 文件中的数据我想将新旧数据保存在 XML 文件中。

我有一个三类：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }       

    public Person()
    {
    }

    public override string ToString()
    {
        return FirstName + " " +LastName + "\t" +Email;
    }
}

public class Student : Person
{
    public Student()
    {
    }
    public double AssessmentGrade { get; set; }
    public double AssignmentGrade { get; set; }

    public override string ToString()
    {
        return base.ToString() + "," +AssessmentGrade + "," + AssignmentGrade;
    }
}

public class Teacher : Person
{
    public int RoomNumber { get; set; }

    public override string ToString()
    {
        return base.ToString() + "," + RoomNumber;
    }
} 
```

我还有一门课，我只是从 PeronDB （类）中调用数据

```
public class Persons
{
    private List<Person> persons = null;

      public void Save()
    {
        PersonDB.SavePersons(persons);
    }
 } 
```

我正在做的 InPersonDB 类将整个数据保存在 XML 文件中，但它会覆盖

```
public class PersonDB
{
    private const string path = @"..\..\Persons.xml";

    public static void SavePersons(List<Person> Persons)
    {
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.IndentChars = ("   ");

        XmlWriter xmlOut = XmlWriter.Create(path, settings);

        xmlOut.WriteStartDocument();
        xmlOut.WriteStartElement("Persons");

        foreach (Person person in Persons)
        {

                if (typeof(Student).IsInstanceOfType(person))
                {
                    AppendStudentInfo(person, xmlOut);
                }
                else if (typeof(Teacher).IsInstanceOfType(person))
                {
                    AppendTeacherInfo(person, xmlOut);
                }
                else
                {
                    AppendPersonInfo(person, xmlOut);
                }
        }

        xmlOut.WriteEndElement();
        xmlOut.Close();
    } 
```

在我正在做的 Form_Load 事件中：

```
 Persons personList = null;

    private void FillPersonlstBox()
    {
        Person p;
        listBox1.Items.Clear();
        for (int i = 0; i < personList.Count; i++)
        {
            p = personList[i];
            listBox1.Items.Add(p.ToString());
        }
    }

    private void Save_Click(object sender, EventArgs e)
    {
        HandleChange(personList);
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        personList.Changed += new Persons.ChangeHandler(HandleChange);
    }

    private void HandleChange(Persons Persons)
    {
        Persons.Save();
        FillPersonlstBox();
    }

    private void Load_Click(object sender, EventArgs e)
    {
        personList.Changed += new Persons.ChangeHandler(HandleChange);
        personList.Fill();
        FillPersonlstBox();
    } 
```

当我单击保存按钮时，它会覆盖数据，它会删除旧数据并保存新数据，即使我按下第一个加载按钮并加载数据，然后在保存按下按钮后添加更多数据，它仍然会覆盖..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:46:06.950

您在 PersonDB 中的常量中有文件路径。而是将文件路径作为参数传递给 Save() 和 SavePersons()。这样，您可以提示用户输入文件名并将其传入或让方法根据约定生成名称。

**编辑：**

这是更改 SavePersons 的签名以将路径作为参数包含的示例。

```
public static void SavePersons(List<Person> Persons, String path)
{
//your code
} 
```

# actionscript-3 - 为 swf 创建安装程序

> ID：11995678
> 
> 赞同：0
> 
> 时间：2012-08-16T21:26:22.567
> 
> 标签：actionscript-3, installation, flash-cs6

我想知道为我创建的 Flash 游戏创建可执行文件的最佳方法是什么。我认为我的问题很简单。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:31:17.037

最简单的方法是从 Flash Pro 中简单地发布 *.exe 投影仪文件。

除此之外，您还可以使用 swf 包装器，例如[MDM Zinc](http://www.multidmedia.com/)或[swf studio](http://www.northcode.com/)。

就安装程序而言，您可以查看[Inno Installer](http://www.jrsoftware.org/isinfo.php/)，它不仅适用于 Flash。

您还可以走 Adob​​e AIR 路线，该路线同时解决打包和安装问题。

**编辑：设置在 Flash Pro 中的位置：**

![在此处输入图像描述](../Images/2165b5261db51c4e63d3970feeed8900.png)

# python - Create private Facebook app to link Chatterbot to sent chats to people

> ID：11995680
> 
> 赞同：-2
> 
> 时间：2012-08-16T21:26:40.973
> 
> 标签：python, facebook, chat

I have written a Python script to send and fetch Chatterbot chat messages. I now want to create a Facebook app that only I can access that has permission to send chat messages to people, and I want my script to send the messages to Facebook to people, and then back. The end aim to to say hi to everyone, then see how they react. How would I do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:15:40.523

有关已知 Facebook 聊天机器人的列表，请参阅我的 Meta Guide 网页“最佳 Facebook 聊天机器人”[1]。Facebook 聊天 API 与 XMPP 兼容 [2]。Google App Engine 也兼容 XMPP [3]；因此，您应该能够在 AppEngine 上使用 Python 来使用 Facebook Chat XMPP。

[1] [http://www.meta-guide.com/home/ai-engine/best-facebook-chatbots](http://www.meta-guide.com/home/ai-engine/best-facebook-chatbots)

[2] [http://developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

[3] [http://developers.google.com/appengine/articles/using_xmpp](http://developers.google.com/appengine/articles/using_xmpp)

# javascript - UIWebView 中的单击事件不起作用

> ID：11995681
> 
> 赞同：1
> 
> 时间：2012-08-16T21:26:41.427
> 
> 标签：javascript, ios, uiwebview

这是我在网页中提供的脚本：

```
var myDiv = document.createElement('div');
var style = myDiv.style;
style.opacity = 0;
style.zIndex = 10000;
style.position = 'absolute';
style.top = '0px';
style.left = '0px';
style.width = '100%';
style.height = '100%';
myDiv.addEventListener("click", function(event) {
    new Image().src="http://myhostna.me/something.png?CLICKED"+Math.random(); 
});
document.body.appendChild(myDiv); 
```

当我在 Android 上的 WebView 网页中提供此脚本时，我知道 click 事件已触发，因为我可以`something.png?CLICKED`在访问日志中看到 GET 请求。

问题是当我将脚本提供到 iOS 上的 UIWebView 网页时，我看不到这些请求。

有谁知道为什么会这样？

我服务的这些网络视图是第三方的，我不知道它们启用或禁用了哪些选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:38:36.123

请更换

```
new Image().src="http://myhostna.me/something.png?CLICKED" 
```

到

```
new Image().src="http://myhostna.me/something.png?CLICKED"+Math.random(); 
```

* * *

编辑：

请将这些行添加到您的代码中：（它可以在 line style.zIndex = 1000; 之后）

```
style.width='500px';
style.height='500px';
style.background='red';
myDiv.innerHTML = 'my div'; 
```

和改变

```
style.opacity = 0; 
```

到

```
style.opacity = 1; 
```

（这种方式更容易调试）

同时保持 alert('test'); 在 eventlistener 函数内部

如果一切都成功执行，您应该会看到警告框。

* * *

看起来问题是您的 div 没有大小（除非您在其他地方使用 CSS 设置它）

* * *

调试新思路：

将此添加到脚本中

```
myDiv.id = 'myDiv';

document.body.addEventListener("touchstart", function(event) {
    alert(event.target.id+' '+event.target.tagName);
}, false); 
```

然后，当您单击 div 标签时，您应该会在警告框中看到“myDiv DIV”。如果您看到其他 id（或空字符串，因为某些页面元素可能没有 id 属性），这意味着您实际上并没有点击您期望的 div。那么它可能是与 z-index 相关的问题。

# c# - C# Metro serializing a class?

> ID：11995693
> 
> 赞同：3
> 
> 时间：2012-08-16T21:28:03.143
> 
> 标签：c#, class, serialization, file-io, microsoft-metro

I was coding a game in C# WPF .NET 4.0 but I've been in the process of porting it to WinRT to be a Metro app.

I can't figure out serialization. Before I would mark a class with [serializable()] and save it to disk.

So far I've found DataContracts and xmlserialization, but how do I serialize a class and write it to disk?

Do I have to mark every property in the class with an attribute, please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:40:12.150

使用`XmlSerializer`，不，你不需要 - 事实上，在很多情况下你不需要标记任何东西。不过，添加属性允许对最终 xml 进行更多控制。

有了`DataContractSerializer`，当然首选添加`[DataContract]`和`[DataMember]`属性；你没有得到相同类型的控制，但它工作得很好。

两者的特点是不同的：

*   DCS 不使用构造函数 - XS 使用公共无参数构造函数
*   DCS 支持序列化回调（XS 不支持）
*   XS 支持条件序列化（DCS 不支持）
*   ETC

您可能还想考虑 protobuf-net，它最近支持 WinRT，输出更小*，*速度比其他两个快得多（使用[新的预编译器](http://marcgravell.blogspot.co.uk/2012/07/introducing-protobuf-net-precompiler.html)时）；它支持 DCS 和 XS 组合的几乎所有功能和选项，但具有快速的二进制、跨平台输出。

# c# - How do I reduce a scanned image to a consistent hash?

> ID：11995701
> 
> 赞同：1
> 
> 时间：2012-08-16T21:28:37.587
> 
> 标签：c#, image-processing, image-scanner

I'd like to be able to scan an image and reduce it to a consistent hash that I can subsequently compare to a new scan to see if the two images are the same.

Any help in this regard would be greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:26:37.457

以下方法可能比您实际需要的更强大。

在计算机视觉中，一个活跃的研究领域是识别。

例如，如果我要为我的房子建造一个清洁机器人，它应该能够识别我的狗（以免在它身上喷洒致命的化学物质）。这变得更加困难，因为机器人不一定每次都从相同的角度看狗（它可以移动）。即它应该从侧面、前面或后面认出它是我的狗。

为了训练这个机器人，我给它看了几张我的狗在不同光照条件下的照片，它应该能够在未来识别它。

使用不同的方法从图像中提取显着特征，即使照片是在不同的光线或不同的角度拍摄的，也可以帮助您识别相同的特征。

一些特征提取技术包括：

*   [SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)（尺度不变特征变换）

*   [GIST](http://people.csail.mit.edu/torralba/code/spatialenvelope/)（GIST 描述符）

*   [HoG](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)（定向梯度直方图）

*   [形状上下文](http://en.wikipedia.org/wiki/Shape_context)

*   [德士顿](http://en.wikipedia.org/wiki/Texton)

*   [旋转图像](http://www.ri.cmu.edu/publication_view.html?pub_id=559)

然而，许多现代系统不是手动提取特征，而是使用[神经网络](http://en.wikipedia.org/wiki/Neural_network)机器学习方法，因此机器人/计算机可以学习识别物体，使用的方式可能与人类学习相同。

我从来没有做过图像识别，所以我不确定它们的优缺点，但我发现这个主题很吸引人，我希望计算机能更好地识别东西（视觉、声音、手势等）。

# jquery - 如何在 jquery 中使用命名空间字符串？

> ID：11995704
> 
> 赞同：2
> 
> 时间：2012-08-16T21:28:54.843
> 
> 标签：jquery, variables, javascript-namespaces

我有以下代码示例...

```
$.pg = {
width : 700,
height: 200,
rate: 30
    }; 
```

有没有一种方便的方法可以写 $.pg[width]，而不是 $.pg['width'] 一直得到 700？我将宽度、高度和速率放入 pg 的全部意义在于，我可以写得更少。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:30:00.503

您可以使用：

```
$.pg.width
$.pg.height
$.pg.rate 
```

引用这些属性。如果在编写代码时属性名称是已知的（就像这里一样），那么您可以使用点语法`.propName`，或者`["propName"]`但正如您所注意到的，点语法更短。如果在代码编写时不知道属性名称（因此存储在变量中），那么您必须使用`[variableName]`语法。

# sql - 在 SQL 中加入后计算具有相同值的行

> ID：11995708
> 
> 赞同：2
> 
> 时间：2012-08-16T21:29:04.013
> 
> 标签：sql, sql-server, count, jointable

如何添加一列来显示两列中具有相同值的总行数，并且已经连接了多个表。在所有连接和 where 语句之后，我最终得到一个包含以下列的表：

产品 | 保单编号 | 行号 | 背书名称

表中有更多列，但这些是我需要参考的。从产品到保单编号存在一对多关系，从保单编号到行号存在一对多关系，从行号到背书或没有匹配关系可能存在一对多关系。

这是查询现在的样子：

```
Select pd.ProductName AS Product
,p.PolicyNumber AS Policy
,l.LineNumber AS Line
,e.EndorsementName AS Endorsement

FROM Lines l
INNER JOIN Policies p On p.PolicyID = l.PolicyID
LEFT OUTER JOIN Endorsements e on e.EndorsementID = l.EndorsementID
INNER JOIN Product pd on pd.ProductID = p.ProductID 
```

结果表看起来像这样

```
Product     Policy     Line     Endorsement
CH           8001       1            A
CH           8001       2            A
CH           8001       3            A
CH           8001       3            B
CH           8002       1            D
CH           8002       2            D
CH           8002       3            A
PP           9001       1            NULL
PP           9001       2            NULL
PP           9002       1            A
PP           9002       2            A
PP           9002       2            B 
```

我需要做的是计算每条政策线的背书数量。在上面的示例中，我会看到对于产品 CH，具有多个背书的唯一行项目是策略 8001 - 第 3 行。对于产品 PP，唯一具有多个背书的行项目是策略 9002 - 第 2 行。

我想要的第一件事是一个新列，它显示每一行的计数，显示该行的相同 Policy 和 Line 值的出现总数。该表将如下所示：

```
Product     Policy     Line     Endorsement     Line Endorsement Count
CH           8001       1            A                   1
CH           8001       2            A                   1
CH           8001       3            A                   2
CH           8001       3            B                   2
CH           8002       1            D                   1
CH           8002       2            D                   1
CH           8002       3            A                   1
PP           9001       1            A                   1
PP           9001       2            A                   1
PP           9002       1            A                   1
PP           9002       2            A                   2
PP           9002       2            B                   2 
```

在我成功实现此计数后，我想要一个单独的查询，该查询仅返回包含没有任何具有多个背书的行的策略的行，因此在这种情况下，策略 8001 和 9002 不会出现。

我已经尝试过在不同的帖子中看到的各种不同的东西，并适应了我的需求，但还没有找到适用于这个特定示例的解决方案`GROUP BY`。`HAVING`请记住，我也已经有很多`WHERE`陈述和一些订购依据。

**编辑：** 我正在使用 Microsoft SQL Server Management Studio 2010 来执行这些查询

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:43:40.463

这取决于数据库。如果你有窗口函数，你可以很简单地做到这一点：

```
Select pd.ProductName as Product, p.PolicyNumber as Policy,
       l.LineNumber Line, e.EndorsementName as Endorsement,
       count(*) over (partition by policy, line) as Policy_Line_Count
FROM Lines l INNER JOIN
     Policies p
     On p.PolicyID = l.PolicyID LEFT OUTER JOIN
     Endorsements e
     on e.EndorsementID = l.EndorsementID INNER JOIN
     Product pd
     on pd.ProductID = p.ProductID 
```

如果您没有 windows 功能，那么您可以使用 WITH 语句来简化查询：

```
with t as (
         Select pd.ProductName as Product, p.PolicyNumber as Policy,
            l.LineNumber Line, e.EndorsementName as Endorsement
     FROM Lines l INNER JOIN
          Policies p
          On p.PolicyID = l.PolicyID LEFT OUTER JOIN
          Endorsements e
          on e.EndorsementID = l.EndorsementID INNER JOIN
          Product pd
          on pd.ProductID = p.ProductID
   )
select t.*, tpl.cnt
from t join
     (select Policy, Line, count(*) as cnt
      from t
      group by Policy, Line
     ) tpl
     on t.Policy = tpl.Policy and
        t.Line= tpl.Line 
```

最后，您可能正在使用既没有 WITH 语句也没有 windows 函数的 mysql。在这种情况下，您可以创建一个视图并使用上述查询。或者，您可以将原始查询放在临时表中并使用上述查询。或者，您使用原始查询并按照示例重复两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:49:16.873

试一试：

```
Select pd.ProductName AS Product
,p.PolicyNumber AS Policy
,l.LineNumber AS Line
,e.EndorsementName AS Endorsement
,cnt

FROM Lines l
INNER JOIN Policies p On p.PolicyID = l.PolicyID
LEFT OUTER JOIN Endorsements e on e.EndorsementID = l.EndorsementID
INNER JOIN Product pd on pd.ProductID = p.ProductID
INNER JOIN (
    Select pd.ProductName AS subProduct
    ,p.PolicyNumber AS subPolicy
    ,l.LineNumber AS subLine
    ,COUNT(*) AS cnt

    FROM Lines l
    INNER JOIN Policies p On p.PolicyID = l.PolicyID
    INNER JOIN Product pd on pd.ProductID = p.ProductID
    GROUP BY pd.ProductName, p.PolicyNumber, l.LineNumber
    ) AS Sub ON pd.ProductName = subProduct, p.PolicyNumber = subPolicy, l.LineNumber = subLine 
```

# javascript - Jquery/CSS3 过渡链接仅部分工作

> ID：11995709
> 
> 赞同：0
> 
> 时间：2012-08-16T21:29:08.357
> 
> 标签：javascript, jquery, html, css

问题是我的链接会转换，但在`register`链接上它不会转换回来。单击`"You have an account already? Log in here"`链接并清楚地观察它的转换，但然后单击`"You don't have an account yet? Register here"`链接，您会看到问题 - [**jsFiddle**](http://jsfiddle.net/v8X9H/95/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:41:06.683

您忘记`.register`在第一个表单上设置课程 - [**DEMO**](http://jsfiddle.net/v8X9H/96/)

```
<form class="container register active" method="post"> 
```

# php - Zend_Validate::is - 我怎么能从中得到错误信息？

> ID：11995712
> 
> 赞同：0
> 
> 时间：2012-08-16T21:29:15.163
> 
> 标签：php, zend-framework, zend-validate

> **可能重复：**
> [Zend_Validate::is() 静态检查，获取验证消息工作](https://stackoverflow.com/questions/11370294/zend-validateis-static-check-get-validation-message-work-around)

我需要一个简单的检查正确的电子邮件地址。所以我使用`Zend_Validate::is($email, 'EmailAddress');`但它只返回 gmail.com 地址的“false”。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:39:39.887

我认为使用 Zend 进行验证的正确语法是 $value = new Zend_Validate_EmailAdress $value->isValid($the variable or string you want to check)，对于任何电子邮件地址都应该返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:43:25.870

对不起，我拼错了部分答案，正确的语法是：

```
$value = new Zend_Validate_EmailAddress; $value->isValid($the variable or string you want to check); 
```

# java - iTextPdf: Using a non-embedded font

> ID：11995715
> 
> 赞同：0
> 
> 时间：2012-08-16T21:29:36.213
> 
> 标签：java, itextpdf

I've created a table using Java and iTextPdf that lays out a bunch of cells. I can't quite figure out how to change the font for the text inside of these cells. It's something for my kids, so I'm trying to use Comic Sans MS. Everything compiles and runs just fine, but I get a generic font (probably Helvetica or something like it).

Anyone know how to generate a font like this? Thanks!

Here is the scaled down version of what I wrote:

```
import com.itextpdf.text.FontFactory; 
import com.itextpdf.text.pdf.FontSelector;

public static PdfPTable createTable() {
        FontSelector selector = new FontSelector();
        selector.addFont(FontFactory.getFont("Comic Sans MS"));
        PdfPTable table = new PdfPTable(3);
        PdfPCell cell;
        Phrase ph;

        ph = selector.process("My Title");
        cell = new PdfPCell(ph);
        table.addCell(cell);
        return table; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:09:57.690

您可以将字体导入到`FontFactory`然后将其用作

```
 String filename = "Comic Sans MS.ttf";
    FontFactory.register(filename, filename);
    Font font = FontFactory.getFont(filename, BaseFont.CP1252, BaseFont.EMBEDDED); 
```

这也会将字体嵌入到 PDF 文件中，因此即使目标 PDF 阅读器没有安装此字体，它也能正常工作。

# java - How to add a package declaration to java generated by SWIG

> ID：11995716
> 
> 赞同：5
> 
> 时间：2012-08-16T21:29:37.810
> 
> 标签：java, java-native-interface, swig

I'm using SWIG to generate a bunch of Java files -- I want the files to be part of a certain package ... right now after I generate them I have to go in and manually add the import declaration ... is there a way to template this into swig?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T21:50:31.013

只需要指定包如下

```
mkdir -p com/example/package
swig -java -package com.example.package -outdir com/example/package example.i 
```

# c++ - How can I do profiling for my EXE developed with Visual Studio 2005 on my user's machine?

> ID：11995717
> 
> 赞同：0
> 
> 时间：2012-08-16T21:29:38.960
> 
> 标签：c++, performance, visual-studio, profiling

I am using Visual Studio 2005 to develop C++ standalone application. On one of my users' computer, my program is performing really badly. It runs slow, some iterations of a particular loop take an unusually long time to complete, etc. I have saved the symbol (PDB file) of my EXE for the build that my user is using.

Now, I want to know if there is a way I can start profiling the performance of this EXE when the user starts using it. I can request the user to run the profiler and my EXE together. I am looking for some kind of tool that starts profiling it, writes all profile-data into a file and then I should be able to use that file along with my PDB function to learn how much time was spent in which function. In this way, I will be able to identify which function was causing the bottleneck.

Is there such a tool available?

# python - 带有正文内容的 Python 电子邮件多部分

> ID：11995720
> 
> 赞同：2
> 
> 时间：2012-08-16T21:29:57.423
> 
> 标签：python, email, smtp, mime

我无法在 python 中发送带有正文的电子邮件作为多部分电子邮件。我尝试过的所有内容都导致所有内容都作为附件，并且我无法让文本或 html 显示在正文中。

```
msg = MIMEMultipart()
if msg_mime_type == 'text' or not msg_mime_type:
    new_body = MIMEText(body, 'text')
elif msg_mime_type == 'image':
    new_body = MIMEImage(body)
elif msg_mime_type == 'html':
    new_body = MIMEText(body, 'html')
new_body.add_header('Content-Disposition', 'inline', filename='body')
msg.set_payload(new_body) #also tried msg.attach(new_body) 
```

我需要使用 a`Multipart`以便我还可以添加附件，但为了简单起见，我保留了该代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:32:27.353

您需要指定这些部分是彼此的替代品，例如`multipart/alternative`mime 类型：

```
msg = MIMEMultipart('alternative') 
```

默认值为`mixed`; 请参阅[电子邮件库示例](http://docs.python.org/library/email-examples.html)。

请注意，要创建包含附件和替代（HTML / CSS）选项的电子邮件，您需要有一个顶级`multipart/related`容器，其中包含`alternative`作为第一个条目的部分。

# servlets - 在 glassfish 上创建网络侦听器导致启动时发生炸弹

> ID：11995727
> 
> 赞同：0
> 
> 时间：2012-08-16T21:30:09.667
> 
> 标签：servlets, ssl, https, glassfish-3

我有一个网络监听器，我监听一个网站 www.aaaa.com 的端口 8181，该网站正在安全地访问我 glassfish 服务器上的模块 aaa.war。我有另一个网站 www.bbbb.com 也可以安全地访问 glassfish 服务器上的模块 bbb.war。我为每个模块创建了一个虚拟服务器，但每个服务器都有自己的安全 SSL 票证。据我所知，在 glassfish 中，每个听众只能有一个证书昵称。因此，因此我需要两个侦听器...但是如果我为要使用的虚拟服务器 www.bbb.com 创建一个网络侦听器，当我重新启动 glassfish 时它会失败，因为第二个网络侦听器也需要在 8181 上侦听不是吗？所以它说端口已绑定并正在使用中。在 glassfish 和虚拟服务器中使用网络侦听器是否缺少一些关键步骤？

我相信这个问题与这里提出的问题有关：

[http://www.java.net/forum/topic/glassfish/glassfish/glassfish-301-cannot-be-configured-use-ssl-certificates-different-internet-domain-names](http://www.java.net/forum/topic/glassfish/glassfish/glassfish-301-cannot-be-configured-use-ssl-certificates-different-internet-domain-names)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:48:48.190

Glassfish 似乎还不支持**SNI**（服务器名称指示）一项新的 TLS 功能，该功能允许在 SSL 握手期间指示主机名。所以现在每个端口只能有一个证书。

请参阅[这张 JIRA 票](http://java.net/jira/browse/GLASSFISH-17934)。如果你愿意，你可以投票支持这个问题。

无论如何，如果您有多个 IP 地址，您可以为同一个端口创建多个侦听器，然后绑定多个 SSL 证书。

# objective-c - iOS设备上出现不正确的界面，但模拟器上没有

> ID：11995728
> 
> 赞同：0
> 
> 时间：2012-08-16T21:30:11.450
> 
> 标签：objective-c, ios, xcode, ios-simulator, ios-universal-app

我有一个在模拟器上运行良好的通用应用程序，但是当我将它放在实际设备（4S 和第 3 代 iPad）上时，视图控制器界面（“EditNameViewControlleriPhone”，忽略 iPhone 是名称的一部分这一事实）仅显示为iPhone 版虽然我也有 iPad xib。

这是我如何命名东西的屏幕截图：

![在此处输入图像描述](../Images/9c2e49107570486b0a9cc049bb16bee1.png)

我的 SettingViewController 中的一个按钮会调出 EditName 界面。这是他的代码：

```
-(IBAction)editclass{
    EditNameViewControlleriPhone*vc2 = [[EditNameViewControlleriPhone alloc] init];
    vc2.delegate = self;
    [self presentModalViewController:vc2 animated:YES];
}

-(void)dismiss{
    [self dismissModalViewControllerAnimated:YES];
} 
```

这段代码是错误的，还是我遗漏了一些命名约定，或者是别的什么？对不起，如果这真的很简单——我是 Xcode 的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:03:09.900

您可以使用以下代码手动加载正确的界面：

```
-(IBAction)editclass{
    EditNameViewControlleriPhone *vc2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        vc2 = [[EditNameViewControlleriPhone alloc] initWithNibName:@"EditNameViewControlleriPhone_iPhone" bundle:nil];
    } else {
        vc2 = [[EditNameViewControlleriPhone alloc] initWithNibName:@"EditNameViewControlleriPhone_iPad" bundle:nil];
    }
    vc2.delegate = self;
    [self presentModalViewController:vc2 animated:YES];
} 
```

if 子句检查您当前的设备是 iPad 还是 iPhone。该子句中的初始化程序使用正确的 xib 文件实例化 viewController。

* * *

或者，您可以通过遵循简单的命名方案将其留给系统执行；

`EditNameViewControlleriPhone~iphone.xib` 适用于您的 iPhone 版本 `EditNameViewControlleriPhone~ipad.xib` 适用于您的 iPad 版本

这样，您的代码可能会保持原样。

* * *

每当您发现文件在设备或模拟器上不可用时存在差异，反之亦然，通常的原因是大写字母有问题。模拟器通常不区分大小写（取决于您的 OSX 文件系统），设备区分大小写（始终）。

* * *

最后但并非最不重要的一点是，当事情仍然在没有合理解释的情况下仍然存在错误时，构建清理通常会产生奇迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:48:57.620

在 下`Target`，有一个名为 的选项卡`Summary`，检查您的界面以控制您使用的是正确的界面

# c# - 如何在 C# express 中打开 ASP.NET 空 Web 应用程序模板？

> ID：11995729
> 
> 赞同：8
> 
> 时间：2012-08-16T21:30:14.347
> 
> 标签：c#, visual-studio, templates

程序员！！！

我正在从一本书中学习 c#，并想打开一个模板，例如顶部的 Visual Studio 所示的模板，但是我只有底部所示的 c# 菜单中的选项。有没有办法下载或手动创建相同的效果？谢谢！！！

![视觉工作室](../Images/4314a56727cf4a00322ea71ebc4c45cd.png)

![Visual C# 速成](../Images/cc55543d7bbd148f55b5017bec5cf061.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T21:37:04.633

Microsoft 为 Web 应用程序开发提供 Visual Web Developer Express。C# Express 用于桌面开发。付费版本不会像 Express 版本那样分开。

[您可以从http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)下载 Visual Web Developer Express，尽管今天是（发布日）您可以去更新版本[http://www.microsoft.com/visualstudio/11/en-us/downloads#express-web](http://www.microsoft.com/visualstudio/11/en-us/downloads#express-web)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T22:41:51.493

感谢所有出色的答案，我下载了 VS 2012 for web。很高兴拥有最新最好的！我想我在正确的日子发布了，因为它是发布日！以下是 VS 2012 for web 的屏幕截图...

![适用于 Web 的 Visual Studio Express](../Images/1440d5c5bb684baac94390501372fc23.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T21:37:40.747

安装这个：[Visual Web Developer 2010 Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T21:41:58.640

看起来它在 Visual C# 2010 Express 中不可用，但它在[Visual Web Developer 2010 Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)中，您仍然可以在学习 C# 时使用它。

# python - 如何在 Python 中修改此字符串

> ID：11995733
> 
> 赞同：1
> 
> 时间：2012-08-16T21:30:41.750
> 
> 标签：python, regex, string

我有一个字符串，我需要在每个'['或']'前面添加一个'\'，除非括号括起来这样的x：'[x]'。在其他情况下，括号将始终包含一个数字。

示例： `'Foo[123].bar[x]'`应该成为`'Foo\[123\].bar[x]'`.

实现这一目标的最佳方法是什么？非常感谢事先。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T21:33:40.263

像这样的东西应该可以工作：

```
>>> import re
>>>
>>> re.sub(r'\[(\d+)\]', r'\[\1\]', 'Foo[123].bar[x]')
'Foo\\[123\\].bar[x]' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T21:33:57.793

你可以做到这一点，而无需使用这样的正则表达式：

```
s.replace('[', '\[').replace(']', '\]').replace('\[x\]', '[x]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:38:09.353

`[]`一种不同的方法，只有在它们后面没有`x]`或前面没有时才放一个斜线`[x`。

```
result = re.sub(r"(\[(?!x\])|(?<!\[x)\])", r"\\\1", subject) 
```

**解释：**

```
# (\[(?!x\])|(?<!\[x)\])
# 
# Match the regular expression below and capture its match into backreference number 1 «(\[(?!x\])|(?<!\[x)\])»
# Match either the regular expression below (attempting the next alternative only if this one fails) «\[(?!x\])»
# Match the character “[” literally «\[»
# Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?!x\])»
# Match the character “x” literally «x»
# Match the character “]” literally «\]»
# Or match regular expression number 2 below (the entire group fails if this one fails to match) «(?<!\[x)\]»
# Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind) «(?<!\[x)»
# Match the character “[” literally «\[»
# Match the character “x” literally «x»
# Match the character “]” literally «\]» 
```

# wpf - XML节点列表作为依赖属性？

> ID：11995735
> 
> 赞同：0
> 
> 时间：2012-08-16T21:30:49.643
> 
> 标签：wpf, xml, data-binding, wpf-controls

我有一个 xml 文件并创建了控件来显示其中的数据。大多数显示的节点没有子节点，但有少数节点有。对于那些我需要在 ItemsControl 中列出一些属性值的人。我能够创建一个 List 作为依赖属性以对其进行测试，并且字符串按预期显示。但是，现在我正在尝试绑定到 xml，但它似乎不起作用。

我已将依赖属性更改为 List 并将此依赖属性与值 SubOptions="{Binding Path=ChildNodes}" 绑定。在控件内部，ItemsControl 的 ItemsSource 也绑定到它自己的依赖属性。

为什么这不起作用？当我在绑定上放置一个测试转换器时，它给我的值是“XmlChildNodes”，我无法直接创建它，但每次我尝试将其隐式转换为 List 时，它都可以工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:56:32.180

好的，我相信我找到了。对于遇到此问题的其他任何人，这是发生的事情：

使用 List 时，我得到了表单上每个控件实例的列表都相同的位置（所以我不能有多个具有不同列表的控件实例）。我在这里搜索，发现依赖属性由于某种原因默认为每个实例使用相同的列表（愚蠢），但解决方案是放置代码：

```
SetValue(SubOptionsProperty, new List<string>()); 
```

在构造函数中，使其设置为新列表。这对字符串很有用，但是绑定或 xml 列表显然不能那样工作，似乎它是从绑定中设置值，然后构造函数中的这段代码正在转储它并设置到一个新列表。有趣的是，它不使用相同的列表，我仍然可以在每个控件上使用不同的列表。

在注释掉那条线之后，它现在似乎正在工作，但如果有人有更多信息，我很想知道它为什么工作......

# visual-studio - Visual Studio 不断构建到哪里？

> ID：11995737
> 
> 赞同：0
> 
> 时间：2012-08-16T21:30:50.463
> 
> 标签：visual-studio, build, visual-studio-extensions

据我了解，Visual Studio 不断构建以提供定义查找和智能感知等功能，但这些信息存储在哪里？

它是全部存储在工作内存中，还是存储在某个地方的磁盘中？

有没有办法访问这些“部分构建”的集合并从中读取？

我对 Visual Studio 使用 C# 语言的功能特别感兴趣。

这种信息是否与 .pdb 文件类型有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T23:52:05.897

对于 C# 和 VB，它只存储在内存中。C++ 将一些东西存储在磁盘数据库中。

> 有没有办法访问这些“部分构建”的集合并从中读取？

目前唯一存在的公共 API 是[CodeModel API](http://msdn.microsoft.com/en-us/library/envdte.codemodel%28v=vs.80%29.aspx)，它可以让您通过声明信息来查看。根据您的情况，它可能不够，也可能不够。如果不是……对不起，你运气不好（或者至少在 Roslyn 项目发布之前。）

# php - 如何使用 PHP 去除 mysql_query 的最后一个逗号？

> ID：11995747
> 
> 赞同：0
> 
> 时间：2012-08-16T21:31:35.350
> 
> 标签：php, mysql, stack

我有一个 mysql_query ，我需要在最后一个项目后面去掉最后一个逗号。

我怎样才能做到这一点？

这是代码片段：

```
mysql_query('INSERT INTO `items` (itemName, itemDescription  ) VALUES ("' . $form_input0 . '","' . $form_input1 . '",);'); 
```

给出“form_input”的部分是我关心的

```
"' . $form_input1 . '", 
```

那个尾随的逗号是我需要删除的......

有些人建议我编辑问题并包含我正在使用的所有代码。也许它会有所帮助...

```
<?php

$host = '%id=server%';
$user = '%id=username%';
$password = '%id=password%';

$link = mysql_connect($host, $user, $password);

$selected = mysql_select_db('%id=database%', $link);

if(!isset($_POST['text-input']))

?>

    <form method="post">
        %slice%
        <input type="submit" value="Submit" />
    </form>
    %[if !edit]%

<?php
%[repeat items]%
$form_input%id=repeatIndex% =  $_POST['element-%id=repeatIndex%'] ;

%[endrepeat]%

mysql_query('INSERT INTO `%id=table%` (%[repeat items]%  %[endif]%%html="Edit Me"%%[if !edit]% %[endrepeat]% ) VALUES (%[repeat items]%"' . $form_input%id=repeatIndex% . '",%[endrepeat]%);');

?>
%[endif]% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:35:53.327

正如**hookman**在评论中正确提到的那样，[mysql 扩展已被贬值](http://news.php.net/php.internals/53799)，不应使用。

**编辑**现在您的代码已被编辑。正如您提到*的，我不知道 API*，但我知道一种可能的解决方案。

*   将您的查询分配给一个变量。
*   替换查询的最后一部分，以便`,`删除。

尝试：

```
...
%[endrepeat]%

$query = 'INSERT INTO `%id=table%` (%[repeat items]%  %[endif]%%html="Edit Me"%%[if !edit]% %[endrepeat]% ) VALUES (%[repeat items]%"' . $form_input%id=repeatIndex% . '",%[endrepeat]%);';
$query = preg_replace('/,\);$/',');',$query);
mysql_query($query);

.... 
```

将`preg_replace`简单地编辑您的查询，以便它`,);`末尾的任何字符串都将替换为`);`. 您可以将其与其他查询一起使用，只需弄清楚如何使用 RegEx 转换它们。

我了解您的标记语言（无论您使用的是什么）有一些限制，可能会阻止您使用它的标准功能来执行此操作 - 在这种情况下，“手动”（使用正则表达式或以其他方式替换）编辑字符串是您唯一的选择（即或以某种方式解析它）。

或者，这可能有效：

```
...

%[repeat items]%
$values = array(
    mysql_real_escape_string($form_input%id=repeatIndex%),
    mysql_real_escape_string($form_input%id=repeatIndex%)
);
%[endrepeat]%
$query = 'INSERT INTO `%id=table%` (%[repeat items]%  %[endif]%%html="Edit Me"%%[if !edit]% %[endrepeat]% ) VALUES (' . "'" . implode("','", $values) . "')";

... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T21:41:00.120

```
$sql = str_replace(',);', ');', $sql); 
```

但我会这样做：

```
$values = array(
    $form_input0,
    $form_input1
);
$sql = sprintf(
    'INSERT INTO `items` (itemName, itemDescription  ) VALUES ("%s")',
    implode('", "', $values)
);
$result = mysql_query($sql); 
```

# dependencies - 是否可以为 Debian 软件包中的冲突指定一系列版本？

> ID：11995748
> 
> 赞同：2
> 
> 时间：2012-08-16T21:31:39.890
> 
> 标签：dependencies, version, debian, conflict

我有一个 Debian 软件包（我们称之为`foo`），我将它分成两部分（`foo`和`foo-icons`）。以前的软件包有三个发布版本（比如 1.5、2.3 和 3.1）。拆分出来的新包将在所有三个版本中通用。如何确保新包与旧包的正确版本冲突？

我的问题有两个：

1.  我如何与一系列版本发生冲突。IE

    ```
    Conflicts: foo (>= 2.0 & <= 2.3) 
    ```

2.  如何与新`foo-icons`包的多个（范围）版本发生冲突？

    从逻辑上讲，我想要的是：

    ```
    Conflicts: foo (<= 1.5) & foo (>= 2.0 & <= 2.3) & foo (>= 3.0 & <= 3.1) 
    ```

这有可能吗？如果没有，我有什么选择？我是否需要重命名我的原始包（`foo`to`foo1`或 somesuch）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T19:45:55.340

**1\. 如何与一系列版本发生冲突**

```
Conflicts: foo (>= 2.0), foo (<= 2.3) 
```

**2\. 如何与新`foo-icons`包的多个（范围）版本发生冲突？**

我不认为你可以做到这一点，但你为什么不增加拆分`foo`包的版本（例如 3.2）和`Confict`with `foo (<< 3.2)`？

此外，来自[*Debian 政策手册*](http://www.debian.org/doc/debian-policy/ch-relationships.html#s-conflicts)：

*如果`Conflicts`在其中一个包的更高版本中更正了冲突原因，则条目可能具有“早于”版本子句。但是，通常“早于”版本子句的存在是`Breaks`应该使用的标志。中的“早于”版本子句`Conflicts`阻止 dpkg 升级或安装声明此类冲突的软件包，直到升级或删除冲突软件包完成，这是一个严格的限制。*

# excel - 在列表中查找小于另一个值的值

> ID：11995751
> 
> 赞同：4
> 
> 时间：2012-08-16T21:32:16.757
> 
> 标签：excel

我有以下庞大的 excel 设置，但这是一个简化的设置：

```
 A     B         C       D       E
   1 Site1 X-Given   Y-Given Site2   X-New-Given 
   2 A     10        400     A       15         
   3 A     20        500     A       25          
   4 A     30        600     A       30          
   5 A     40        700     B       35          
   6 A     50        800     B       30          
   7 B     2         400     B       15          
   8 B     25        500     B       25          
   9 B     300       600     B       30 
```

这就是我想要做的：

给定“E列”中的值，只要它们位于同一站点，我想找到一个<=“E列”中的值

然后我想做同样的事情，只在“E列”中找到>值

因此，所需的公式将是两个单元格，一个具有更大的值，一个具有小于值

```
Example 1: Given 15 (E2) ---> would return "10" (from B2) and "20" (from B3)
Example 2: Given 15 (E7) ---> would return "2" (from B7) and "25" (from B8) 
```

如您所见，输出会因站点而异，这是我似乎无法掌握的部分！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:58:47.973

这些是使用 Control+Shift+Enter 输入的数组公式，而不仅仅是 Enter。如果输入正确，Excel 会在它们周围加上花括号 - 不要自己输入花括号。

**较小的**

```
{=MAX(($A$2:$A$9=D2)*($B$2:$B$9<=E2)*($B$2:$B$9))} 
```

**更大**

```
{=MIN(IF((($A$2:$A$9=D2)*($B$2:$B$9>=E2)*($B$2:$B$9))=0,"",$B$2:$B$9))} 
```

较小的找到小于或等于 E2 的站点的最大值。较大的会查找大于或等于 E2 的站点的最小值。填写完成剩下的工作。

公式中的数组为 FALSE 返回 0，为 TRUE 返回 1，因此只要其中一行为 FALSE，MIN 将始终返回 0。这就是你必须使用 IF 语句的原因。通过为 FALSE 注入一个字符串，它会忽略它们，因为 MIN 忽略字符串。

# asp.net-mvc - 从 System.Web.Mvc.Controller 派生时要实现什么

> ID：11995753
> 
> 赞同：0
> 
> 时间：2012-08-16T21:32:27.323
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想创建一个自定义 HandleErrorAction 属性并将其应用于基本控制器类。但是，当我扩展 Controller 时，我马上就遇到了问题。

例如，我创建了以下控制器。

```
public CMSController : Controller
{
    ...nothing implemented, just extended (and I did call base constructor as well - no args though
} 
```

现在，我以为我可以简单地做

```
public class YearsController : CMSController
{
    ...
} 
```

并与基类中的动作、路线等处理一起愉快地移动。

但是，我遇到了一个例外：

> 当前对控制器类型“YearsController”的操作“索引”请求在以下操作方法之间不明确： CMS.WebUI.Controllers.YearsController 类型上的 System.Web.Mvc.ViewResult Index() System.Web.Mvc.ViewResult Index( CMS.WebUI.Controllers.CMSController 类型上的System.Nullable `1[System.Int32], System.Nullable`1[System.Int32]、System.Nullable `1[System.Int32], System.Nullable`1[System.Int32]、System.Nullable 1[System.Int32])`1[System.Int32], System.Nullable`

所以，我问。我必须实施什么才能使它起作用？从 Controller 扩展时，是否需要重写路由器处理等？

如果没有，有什么问题？

非常感谢。

# javascript - 在 javascript 函数中访问 Google map api

> ID：11995754
> 
> 赞同：0
> 
> 时间：2012-08-16T21:32:27.583
> 
> 标签：javascript, google-maps-api-3, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我曾经用

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=KEY&sensor=false"></script> 
```

在 HTML 页面的标题中

如果我只能在没有 HTML 的 Java 脚本函数 (.js) 中使用谷歌地图 API，会发生什么情况

```
function getMap()
{
     var geocoder = new google.maps.Geocoder();
} 
```

此 java Script 函数将根据 Microsoft Dynamic CRM online 2011 中的 onSave 事件执行

我做了一些研究，我是否必须使用`document.write(...)`并创建一个 html 页面来执行 java 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:21:02.853

有一个[Geocoding Web Service](https://developers.google.com/maps/documentation/geocoding/)，这就是您所需要的。

请确认您遵守使用条款（结果数据必须显示在 Google 地图上，用于网络服务和 javascript API）

# java - 不需要的 Java 位移行为

> ID：11995756
> 
> 赞同：3
> 
> 时间：2012-08-16T21:32:53.887
> 
> 标签：java, bit-shift

我正在为我正在做的一些计算生成位掩码，我需要屏蔽一个 int 以便除 x 最右边的位之外的所有位都变为零。我这样做使用：

```
int mask = ~(-1 << x); 
```

这适用于除 x = 32 之外的所有 x 值。它应该返回 -1，但它返回 0。这里发生了什么？

另外，我试过这个：

```
int mask = -1 >>> 32 - x; 
```

在 x = 0 它应该返回 0，但它返回 -1。不知何故，将某些东西移动 32 会导致操作返回运算符的左侧。当我尝试将 -1 移动 33 或 34 位时，它会返回一个值，就好像它移动了 1 或 2 一样。我假设 Java 实际上做了这样的事情是否正确：

```
int mask = ~(-1 << x % 32); 
```

和

```
int mask = -1 >>> (32 - x) % 32; 
```

?

如果是这样，如果超过 int 的 32 位长度，为什么要围绕行为进行这种循环？Oracle 上的文档明确指出：

> 无符号右移运算符“>>>”将零移到最左边的位置

但很明显，当它必须移动超过 32 倍时，它实际上并没有这样做......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T21:34:52.670

是的，你是对的；班次`long`在应用之前被修改了 32（或 64，对于 s）。

[JLS 15.19](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> 如果左侧操作数的提升类型是 int，则只有右侧操作数的五个最低位用作移位距离。就好像右手操作数受到按位逻辑与运算符 & (§15.22.1) 的影响，掩码值为 0x1f (0b11111)。因此，实际使用的移动距离总是在 0 到 31 的范围内，包括 0 到 31。
> 
> 如果左手操作数的提升类型是长的，那么只有右手操作数的六个最低位被用作移位距离。就好像右手操作数经过位逻辑与运算符 & (§15.22.1) 与掩码值 0x3f (0b111111)。因此，实际使用的移位距离总是在 0 到 63 的范围内，包括 0 到 63。

至于Java*为什么*选择这种行为，我对你没有任何建议。

# arrays - 如何将过滤后的范围复制到数组中？(Excel VBA)

> ID：11995761
> 
> 赞同：4
> 
> 时间：2012-08-16T21:33:50.667
> 
> 标签：arrays, excel, vba

我使用此公式将唯一记录从 A 列复制到 B 列。

```
Range("A1", Range("A100").End(xlUp)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("B1"), Unique:=True 
```

您如何将过滤后的结果放入 Excel VBA 中的数组中，而不是将其复制到 B 列中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-16T09:42:26.040

问这个问题已经整整一年了，但我今天遇到了同样的问题，这是我的解决方案：

```
Function copyFilteredData() As Variant
    Dim selectedData() As Variant
    Dim aCnt As Long
    Dim rCnt As Long

    Range("A1").CurrentRegion.SpecialCells(xlCellTypeVisible).Select
    On Error GoTo MakeArray:
    For aCnt = 1 To Selection.Areas.Count
        For rCnt = 1 To Selection.Areas(aCnt).Rows.Count
            ReDim Preserve SelectedData(UBound(selectedData) + 1)
            selectedData(UBound(selectedData)) = Selection.Areas(aCnt).Rows(rCnt)
        Next
    Next

    copyFilteredData = selectedData
    Exit Function

MakeArray:
    ReDim selectedData(1)
    Resume Next

End Function 
```

这将使数组的元素 0 为空，但 UBound(SelectedData) 返回选择中的行数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-20T15:26:20.550

以防万一有人再次看到这个......我创建了这个函数来处理一维范围，但它也会将更高维度的范围写入一维数组；修改以将多维范围写入“相同形状”数组应该不会太难。您需要引用 scrrun.dll 来创建字典对象。缩放可能是个问题，因为使用了“for each”循环，但如果您使用的是 EXCEL，您可能不必担心：

```
Function RangeToArrUnique(rng As Range)
    Dim d As Object, cl As Range
    Set d = CreateObject("Scripting.Dictionary")
    For Each cl In rng
        d(cl.Value) = 1
    Next cl
    RangeToArrUnique = d.keys
End Function 
```

我已经以这种方式对此进行了测试：

```
Dim dat as worksheet
set dat = sheets("Data")
roomArr = Array("OR01","OR02","OR03")
dat.UsedRange.AutoFilter field:=2, criteria1:=roomArr, operator:=xlFilterValues
fltArr = RangeToArrUnique(dat.UsedRange.SpecialCells(CellTypeVisible)) 
```

希望这可以帮助那里的人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T22:05:26.817

你会想[读这个](http://www.mrexcel.com/forum/excel-questions/67144-filter-list-visual-basic-applications-array.html)，它会为你指明正确的方向

它说：

1.  使用 AdvancedFilter 方法在工作表的某些未使用区域中创建过滤范围
2.  将该范围的 Value 属性分配给 Variant 以创建二维数组
3.  使用该范围的 ClearContents 方法来摆脱它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T22:15:46.810

```
Sub tester()

    Dim arr
    arr = UniquesFromRange(ActiveSheet.Range("A1:A5"))
    If UBound(arr) = -1 Then
        Debug.Print "no values found"
    Else
        Debug.Print "got array of unique values"
    End If

End Sub

Function UniquesFromRange(rng As Range)
    Dim d As Object, c As Range, tmp
    Set d = CreateObject("scripting.dictionary")
    For Each c In rng.Cells
       tmp = Trim(c.Value)
       If Len(tmp) > 0 Then
            If Not d.Exists(tmp) Then d.Add tmp, 1
       End If
    Next c
    UniquesFromRange = d.keys
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T21:58:31.777

下面从 A 列获取信息并给出一个列表。它假设您有一个可用于数据输入的“Sheet3”（您可能希望更改它）。

```
Sub test()

    Dim targetRng As Range
    Dim i As Integer

    Set targetRng = Sheets(3).Range("a1")
    Range("A1", Range("A999").End(xlUp)).AdvancedFilter Action:=xlFilterCopy, CopyToRange:=targetRng, Unique:=True

    Dim numbElements As Integer
    numbElements = targetRng.End(xlDown).Row
    Dim arr() As String

    ReDim arr(1 To numbElements) As String

    For i = 1 To numbElements
        arr(i) = targetRng.Offset(i - 1, 0).Value
    Next i

End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-01T13:52:08.030

**将过滤范围存储在数组中的一种简单方法**是使用复制粘贴技巧。创建一个工作表并将其隐藏或非常隐藏。说它的代号是`sht_calc`。此函数将为您提供一个二维数组，除非您只有一列并且过滤的行只有一列，在这种情况下，它将是一个简单的变体变量而不是数组

```
Function GetArrayFromFilteredRange(rng As Range) As Variant
    Dim arr As Variant

    sht_calc.Cells.Clear
    rng.Copy sht_calc.Range("A1")
    arr = sht_calc.UsedRange.Value

    GetArrayFromFilteredRange = arr
End Function 
```

例如，如果您想在工作表中调用`Table1`的表中获取过滤行的数组，代码名称为`sht1`您可以简单地执行以下操作：

```
dim rng as range
arr = GetArrayFromFilteredRange(sht1.ListObjects("Table1").DataBodyRange.SpecialCells(xlCellTypeVisible))

arr=GetArrayFromFilteredRange(rng) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-11T13:16:41.727

这是另一种方法。如果没有结果，它什么也不做。

```
Public Sub filteredRangeToArray(rg As Range, arr As Variant)

Dim i As Long
Dim j As Long
Dim row As Range
'If 0 results in Filter just exit
If Not rg.SpecialCells(xlCellTypeVisible).Count > 0 Then Exit Sub
i = 1
Erase arr
ReDim arr(1 To rg.Columns.Count, 1 To _
   rg.Columns(1).SpecialCells(xlCellTypeVisible).Count)
For Each row In rg.Rows
 If Not row.Hidden Then
  For j = LBound(arr, 1) To UBound(arr, 1)
  arr(j, i) = row.Cells(j)
  Next j
  i = i + 1
 End If
Next row
arr = WorksheetFunction.Transpose(arr)
End Sub 
```

# haskell - 扬帕值开关

> ID：11995770
> 
> 赞同：0
> 
> 时间：2012-08-16T21:34:29.353
> 
> 标签：haskell, sdl, yampa

我有一个事件`SF Input (Event ())`，代表空格键的键。我有一些`gravity`，每次用户释放密钥时，它都必须在`1`和之间切换`(-1)`。所以我这样做了：

```
gravity <- accumHold 1 <<< (arr $ tag (*(-1))) <<< keyUp SDLK_SPACE -< ev 
```

但它所做的是在重复时上下切换值，直到我再次按下该键。我不知道我在哪里做错了。

完整的来源在[这里](https://github.com/scan/ponyv)，也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:40:10.480

显而易见的答案是使用开关：

```
gravity = dir 1
dir x = switch (constant x &&& keyUp SDLK_SPACE) (const (dir (-x))) 
```

这当然也可以通过映射事件值而无需切换，但切换似乎是自然的解决方案。您还可以使用[Netwire](http://hackage.haskell.org/package/netwire)，这使得这更简单：

```
hold (iterateW negate 1 . keyUp SDLK_SPACE) 
```

该`iterateW`线将在 Netwire 4 中可用。在此之前，您可以这样编写：

```
hold (accum 1 . pure negate . keyUp SDLK_SPACE) 
```

# java - 如何将列表中的项目作为单独的参数传递给函数？

> ID：11995772
> 
> 赞同：-2
> 
> 时间：2012-08-16T21:34:40.793
> 
> 标签：java

例如

我有一个清单：

`List <Example> examp = new ArrayList();`

我想将列表中的项目作为参数传递给函数

`public void Example(example1,example2,example3.......);`

其中`example1`,`example2`都是数组列表项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:39:41.783

问：如何将列表中的项目作为单独的参数传递给函数？

A：

```
List<Integer> exampleList = new ArrayList<Integer>();

// Use this for a few specific items in the list
public void Example1(Integer arg1, Integer arg2, Integer argc);
...
Example1 (exampleList.get(0), exampleList.get(1), exampleList.get(2));

// Use this to pass many items (just pass the whole list)
public void Example2(List<Integer> args);
...
Example2 (exampleList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:35:34.150

`examp .get(index)`获取索引处的元素。

例子：

```
Example(examp .get(0), examp .get(1), examp .get(20) 
```

另一种方法：

```
example(examp); 
```

你的方法签名应该是

```
public void example(List<int> args); 
```

列表索引从零开始。

一个建议：Java 命名约定在方法签名中使用小写字母作为第一个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T21:41:21.593

您可以使用可变参数定义方法：

```
void exampleMethod(Example... example) {
  // ...
} 
```

并像这样传递它们：

```
exampleMethod(examp.get(0), examp.get(1), examp.get(6);  // individual examples
exampleMethod(examp.toArray(new Example[]{}));           // all examples at once 
```

但与直接通过列表相比，我认为没有显着优势......

# multithreading - 实体框架不使用 Ninject 更新另一个线程中的实体

> ID：11995775
> 
> 赞同：0
> 
> 时间：2012-08-16T21:34:57.853
> 
> 标签：multithreading, entity-framework, entity-framework-4.1, ninject, code-first

我遇到了 EF 没有在另一个线程中更新我的对象的问题。我能够检索对象，但是当我调用时`UnitOfWork.Commit();`，SQL Server 探查器不显示正在更新的项目。如果我在线程之外按顺序运行它，那么它工作正常。有任何想法吗？

```
 new Thread(() =>
                {
                    var divisionBracketsService = DependencyResolver.Current.GetService<IDivisionBracketsService>();

                    if (divisionBracketsService != null)
                        divisionBracketsService.ProcessGame(gameId);

                }).Start(); 
```

**更新**

好吧，当我将范围更新为线程时，它起作用了。是否有任何模式可以同时使用这两个范围？

```
kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>().InThreadScope(); 
```

**更新**

我注意到这个问题[Ninject InRequestScope fallback to InThreadScope](https://stackoverflow.com/questions/7951914/ninject-inrequestscope-fallback-to-inthreadscope)，但我使用的是 Ninject 3.0 版，它不包含`StandardScopeCallbacks.Request`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:48:10.043

从您的问题中，我看到您不知道在 ASP.NET 中启动线程以使其变短的问题，IIS 可以决定随时终止该线程，从而使您的应用程序处于不一致的状态。如果此线程的执行对您的应用程序至关重要，那么要么同步执行，要么将其委托给其他进程，例如 Windows 服务，或者通过向 ASP.NET 注册来了解如何正确执行此操作

使用混合作用域不是确定性的，因为在执行线程时，http 上下文可能存在或不存在，但它可以随时释放。更好的方法是注入一些处理器类，并使用命名范围将其定义为它的关联范围，而不是新线程。

# lucene - neo4j 从索引中获取随机节点

> ID：11995776
> 
> 赞同：1
> 
> 时间：2012-08-16T21:35:03.533
> 
> 标签：lucene, indexing, neo4j

是否有任何选项可以从带有 index.query 的 lucene 索引中获取随机节点，如下所示？

```
Index<Node> index = graphDb.index().forNodes("actors");
Node rand = index.query("foo:bar").getRandom(); 
```

谢谢乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:59:28.263

我的问题是逐步通过节点列表工作，但顺序是随机的。

我玩了一会儿，最终以“id 缓存”作为临时解决方案，其中仅存储具有特定属性（未使用且 foo=bar）的节点。

如果您将新节点也添加到缓存中并从缓存中删除它们，您可以使用更长时间的缓存。

```
private ArrayList<Long> myIndexIDs = new ArrayList<Long>();
private int minCacheSize = 100;
private int maxCacheSize = 5000;

public Node getRandomNode() {
    boolean found  = false;
    Node n = null;

    int index = getMyNodeIndex();
    long id = myIndexIDs.get(index);

    System.out.println(String.format("found id %d at index: %d", id, index));
    ExecutionResult result = search.execute("START n=node(" + id + ") RETURN n");

    for (Map<String, Object> row : result) {
        n = (Node) row.get("n");
        found = true;
        break;
    }

    if (found) {
        myIndexIDs.remove(index);
        myIndexIDs.trimToSize();
    }

    return n;
}

// fill the arraylist with node ids
private void createMyNodeIDs() {
    System.out.println("create node cache");
    IndexHits<Node> result = this.myIndex.query("used:false");
    int count = 0;

    while (result.hasNext() && count <= this.maxCacheSize) {
        Node n = result.next();
        if (!(n.hasProperty("foo") && "bar" == (String) n.getProperty("foo"))) {
            myIndexIDs.add(n.getId());
            count++;
        }
    }

    result.close();
}

// returns a random index from the cache
private int getMyIndexNodeIndex() {
    // create a new index if you're feeling that it became too small
    if (this.myIndexIDs.size() < this.minCacheSize) {
        createMyNodeIDs();
    }
    // the current size of the cache
    System.out.println(this.myIndexIDs.size());

    // http://stackoverflow.com/a/363732/520544
    return (int) (Math.random() * ((this.myIndexIDs.size() - 1) + 1));
} 
```

# sql-server - %% 与可包含

> ID：11995777
> 
> 赞同：2
> 
> 时间：2012-08-16T21:35:12.177
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

这是我**[以前的查询的延续](https://stackoverflow.com/questions/11994281/near-matches-not-found-in-containstable)**

## DDL

```
CREATE TABLE [dbo].[t](
    [words] [varchar](1000) NULL,
    [id] [int] IDENTITY(1,1) NOT NULL
) ON [PRIMARY] 
```

## DML

```
insert into t(words)values('this is my laptop')
insert into t(words)values('this does not contains heqadphone') 
```

这两个插入被迭代 250 次......

## SQL 查询 - 1

```
SELECT * FROM 
t as t
JOIN CONTAINSTABLE(t, words,'"*heqadphone"') fulltextSearch
ON
t.[Id] = fulltextSearch.[KEY] 
```

## SQL 查询 - 2

```
Select * from t where words like '%heqadphone%' 
```

## 困惑

通常，我们建议不要使用我稍后查询中所述的双倍 %% 。但是在检查 SQL Profiler Reads and Duration 之后

## 查询 1 显示更多 reads/duration 。点击以下链接查看详情

**[SQL Profiler 读取和查询持续时间 - 1](https://i.stack.imgur.com/kRVhe.jpg)**

## 查询 2 显示较少的 reads/duration 。点击以下链接查看详情

**[SQL Profiler 读取和查询持续时间 - 2](https://i.stack.imgur.com/72fNC.jpg)**

您能否确认，理想情况下哪个查询可以很好地使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T16:03:14.790

您正在比较具有不同功能的两个不同功能：`CONTAINSTABLE`为您提供其他信息，例如`LIKE`没有的排名。所以第一个问题是，你真的需要全文功能吗？如果你这样做了，那么你别无选择：你必须使用`CONTAINSTABLE`.

另一方面，如果您不需要 FTS 功能，但只想以最快的方式在列中搜索单个单词，那么最好的方法就是您正在做的事情：使用真实的数据集测试这两个选项并查看哪一个在您的环境中表现更好。如果`LIKE`性能更好，那么您可以使用它，但正如 erikkallen 所提到的，请确保您使用与生产中相同的数据量进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T23:40:01.310

您将拥有多少数据。如果你有 250 行，你几乎可以做任何事情而不会很慢。如果那是您的生产数据量，那么做任何您想做的事情。如果没有，请使用您期望在生产系统中拥有的数据量运行您的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:20:20.160

我认为对于性能测量/分析，您需要的数据远不止`250*2 = 500`行。您应该尝试测试记录范围内的`100,000`数据

# grails - 无法为 webFlow 2.0.0 运行 Grails 集成测试

> ID：11995778
> 
> 赞同：0
> 
> 时间：2012-08-16T21:35:20.153
> 
> 标签：grails, spring-webflow, grails-plugin, grails-2.0

我正在使用 Grails 2.0.3 和 webFlow 2.0.0。

我的控制器中有一个运行良好的 WebFlow 定义，但我仍想添加集成测试以方便将来的维护。

每当控制器尝试向流范围添加一些值时，我的测试中都会出现以下异常：

```
ERROR org.codehaus.groovy.grails.webflow.engine.builder.ClosureInvokingAction  - Exception occured invoking flow action: No such property: poInfo for class: org.springframework.webflow.core.collection.LocalAttributeMap 
groovy.lang.MissingPropertyException: No such property: poInfo for class: org.springframework.webflow.core.collection.LocalAttributeMap 
        at com.psswm.inboundcal.ReceivingEventController$_closure1_closure6_closure12.doCall(ReceivingEventController.groovy:83) 
        at grails.test.WebFlowTestCase.signalEvent(WebFlowTestCase.groovy:143) 
        at com.psswm.inboundcal.ReceivingEventCreationFlowTests.testAddPoInfoMissingPiecesPallets(ReceivingEventCreationFlowTests.groovy:32) 
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45) 
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42) 
        at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) 
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28) 
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30) 
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263) 
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68) 
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47) 
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231) 
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60) 
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229) 
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50) 
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222) 
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28) 
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30) 
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300) 
        at org.junit.runners.Suite.runChild(Suite.java:128) 
        at org.junit.runners.Suite.runChild(Suite.java:24) 
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231) 
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60) 
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229) 
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50) 
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222) 
        at org.junit.runners.ParentRunner.run(ParentRunner.java:300) 
        at _GrailsTest_groovy$_run_closure4.doCall(_GrailsTest_groovy:290) 
        at _GrailsTest_groovy$_run_closure2.doCall(_GrailsTest_groovy:248) 
        at _GrailsTest_groovy$_run_closure1_closure21.doCall(_GrailsTest_groovy:195) 
        at _GrailsTest_groovy$_run_closure1.doCall(_GrailsTest_groovy:184) 
        at TestApp$_run_closure1.doCall(TestApp.groovy:82) 
| Failure:  testAddPoInfoMissingPiecesPallets(com.psswm.inboundcal.ReceivingEventCreationFlowTests) 
|  org.springframework.webflow.execution.ActionExecutionException: Exception thrown executing org.codehaus.groovy.grails.webflow.engine.builder.ClosureInvokingAction@3beff9ad in state 'addPO' of flow 'create' -- action execution attributes were 'map[[empty]]' 
        at grails.test.WebFlowTestCase.signalEvent(WebFlowTestCase.groovy:143) 
        at com.psswm.inboundcal.ReceivingEventCreationFlowTests.testAddPoInfoMissingPiecesPallets(ReceivingEventCreationFlowTests.groovy:32) 
Caused by: groovy.lang.MissingPropertyException: No such property: poInfo for class: org.springframework.webflow.core.collection.LocalAttributeMap 
        at com.psswm.inboundcal.ReceivingEventController$_closure1_closure6_closure12.doCall(ReceivingEventController.groovy:83) 
        ... 2 more 
```

* * *

这是我要测试的 My WebFlow 代码的一部分：

```
def createFlow = { 
    initialize { 
        action { 
            if (params.eventId) { 
                flow.receivingEventId = params.eventId as int 
                ReceivingEvent existingReceivingEvent = ReceivingEvent.get(flow.receivingEventId) 
                flow.receivingEvent = new ReceivingEvent(branch:existingReceivingEvent.branch) 
            } 
        } 
        on ("success").to "addPO" 
    } 

    addPO { 
        on("add") { 
            log.debug("addPO") 
            // Initialize flow objects 
            flow.poInfo = new PoInfo(params) 
            if (flow.receivingEvent == null) { 
                flow.receivingEvent = new ReceivingEvent() 
            } 

            // validate and populate poInfo object 
            boolean objectIsValid = flow.poInfo.validateAndPopulate() 
            if(!objectIsValid) { 
                if(!flow.poInfo.hasErrors()) { 
                    flash.warning = 'poInfo.poNumber.unknown' 
                } 
                return error() 
            } 
            // add poInfo object to receivingEvent for additional processing/validation 
            String errorMessage = flow.receivingEvent.addPoInfo(flow.poInfo) 

            if(null != errorMessage) { 
                flash.warning = errorMessage 
                return error() 
            } else { 
                flow.poInfo = null 
            } 
        }.to("addPO") 
```

...........

* * *

这是我的集成测试：

```
class ReceivingEventCreationFlowTests extends WebFlowTestCase{ 

ReceivingEventController receivingEventController = new ReceivingEventController() 

void testInitializeFlow() { 
    startFlow() 
    assertCurrentStateEquals "addPO" 
} 

void testAddPoInfoMissingPiecesPallets() { 
    println("Hola mundo") 
    startFlow() 
    assertCurrentStateEquals "addPO" 

    receivingEventController.params.poNumber = '63055024UI1063' 
    receivingEventController.params.pro = '3' 
    println "flow scope: " + getFlowScope().getClass() 
    println ("Hola again") 
    signalEvent('add') 
    assertTrue getFlowScope().poInfo.hasErrors() 
    assertCurrentStateEquals "addPO" 
} 

@Override 
public Object getFlow() { 
    receivingEventController.createFlow 
} 

String getFlowId() { "create" } 
} 
```

* * *

有人对我在这里缺少什么有任何想法吗？或者 webFlow 2.0.0 和 grails 2.0.3 是否存在任何已知的集成测试问题？

我正在遵循书中的指导方针：Grails in Action，第 9.4 章：测试 WebFlows……但我不断收到上述错误。

提前致谢，

豪尔赫·巴斯克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:25:45.830

Grails in Action 是一本非常好的书，但有些旧。我建议您使用单元测试而不是集成测试。文档几乎不存在，但您可以在 grails 源代码中看到一个很好的示例：

[WebFlow 单元测试代码](https://github.com/grails/grails-core/blob/master/grails-plugin-testing/src/test/groovy/grails/test/mixin/WebFlowUnitTestMixinTests.groovy)

您可以看到带有输入、输出、子流等的网络流。（输入和输出比 GIA 书更新）

在 Roeche 使用对话范围的示例中，您可以改用流范围。

# jquery - rails + jquery函数回调问题

> ID：11995782
> 
> 赞同：0
> 
> 时间：2012-08-16T21:35:45.057
> 
> 标签：jquery, ruby-on-rails

在我的页面上，我想检查用户是否已登录，如果他已登录，那么我允许用户执行各种操作（例如上传如下所示的照片）。为了检查用户是否登录，我在 jquery 中编写了这个简单的函数。

```
$(document).ready(function(){

 function checkLogin(callback){
  <% if !current_user %>
    $.colorbox({href:"/signup", width: "400px", height: "200px"});
    var status = false;
    callback(status)
  <% end %>
 } 
```

当我想检查用户是否登录时，我调用上面的代码：

```
$(".upload-pics").click(function(){
  checkLogin(function(c){
    if(c == false){
      return false;
    }
  });
  // open colorbox to upload pictures
  $("a.upload-pics").colorbox();
}) 
```

问题是每次我调用 checkLogin 并说如果用户没有登录，“返回 false”并没有阻止其余代码执行，这意味着上传图片的颜色框代码无论如何都会被触发。真正奇怪的部分是“return false”确实被执行了，但这并没有阻止其余代码的执行。我的代码有问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:41:28.830

因为它在另一个函数里面..做

```
$(".upload-pics").click(function(e){

    var x = checkLogin(function(c){
       if(c == false){
          return false;
       }
    });

    if(!x){
        return false;
    }else{        
       $("a.upload-pics").colorbox();
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:03:30.247

嗯，感觉这里有点傻。我不必进入回调和其他东西..这是一个非常简单的方法。感谢wirey为我指明了正确的方向。

```
function checkLogin(){
  <% if !current_user %>
    $.colorbox({href:"/signup", width: "400px", height: "200px"});
    return false;
  <% end %>
  return true;
}

$(".upload-pics").click(function(){
  var x = checkLogin();
  if(!x){
    return false;
  } 
```

# web-services - jax-ws vs axis2 - 需要帮助

> ID：11995786
> 
> 赞同：1
> 
> 时间：2012-08-16T21:36:01.600
> 
> 标签：web-services, jaxb, jax-ws, axis2, jaxb2

我需要以下帮助：

Q.1) 性能比较 - 1) 包含部署在 Jetty 上的基于 jax-ws 的 Web 服务的大量 war 文件 2) 部署在 Jetty 上运行的 axis2 上的大量 Web 服务

Q.2) 另外，如果有多种类型的客户端，例如 .net、java、c++，它们将使用这些 Web 服务，那么我应该使用哪种方法 - axis2 作为 SOAP 引擎还是 jax-ws？

Q.3) 如果我对 WS-* 标准不感兴趣，那么我应该使用 axis2 还是 jax-ws？

Q.4) 通常为什么需要 SOAP 引擎？仅用于 WS-* 标准支持还是对他们有更多好处？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:15:16.987

Java API for XML Web Services (JAX-WS) 只是一个 API。

您需要使用 SOAP 堆栈实现（SOAP 引擎）。

有2个主要实现：

*   [轴 2](http://axis.apache.org/axis2/java/core/)
*   [地铁](http://jax-ws.java.net/)

由于 Metro 提供了参考实现并随 JDK 一起提供，我假设您一直在向 RI 调用 jax-ws。但是 metro 是一个完整的 SOAP Stack 实现。

现在你已经有了名字和地点，你可以开始寻找你最喜欢的实现了。两者都有优点和缺点。请记住，两者都为您提供 WS-* 标准支持，并且由于 SOAP 是“独立于编程语言的”，因此客户端类型并不重要。

我个人更喜欢 Metro，因为它更易于使用。

# testing - 创建回归测试

> ID：11995787
> 
> 赞同：0
> 
> 时间：2012-08-16T21:36:07.687
> 
> 标签：testing, regression-testing

我们正在工作中实施功能/回归测试系统来测试我们的服务（我们的应用程序是使用客户端/服务器架构设置的）。

你如何开始？您是否构建了一些测试用例？启动一个新功能怎么样？所有的测试用例是否会进入一个文件（我们使用的是 mocha 和 node.js）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:48:19.123

对于回归，您应该从系统中实际工作且没有错误的部分开始。您针对该部分编写一些测试用例，并在以后的版本中重新执行它们以确保应用程序始终以正确的方式工作。

[http://en.wikipedia.org/wiki/Regression_testing](http://en.wikipedia.org/wiki/Regression_testing)

我建议使用某种形式的自动化，以确保您始终以准确的方式进行相同的检查。以下是常用软件列表

[http://en.wikipedia.org/wiki/Test_automation#Notable_test_automation_tools](http://en.wikipedia.org/wiki/Test_automation#Notable_test_automation_tools)

# ruby-on-rails - 谷歌可视化库没有加载 Rails 3.2 和咖啡

> ID：11995790
> 
> 赞同：1
> 
> 时间：2012-08-16T21:36:11.093
> 
> 标签：ruby-on-rails, google-visualization

我正在尝试在 Rails 3.2 应用程序中使用 Google Visualization 库。我的 application.html.erb 中有以下内容

```
<head>
 <title>Website</title>
 <%= stylesheet_link_tag    "application", media: "all" %>
 <%= javascript_include_tag "application" %>
 <script src="http://www.google.com/jsapi" type="text/javascript"></script>
 <%= csrf_meta_tags %>
</head> 
```

我的 stuff.js.coffee 中有以下内容：

```
google.load('visualization', '1', packages: ['gauge'])
google.setOnLoadCallback(drawChart)
drawChart ->
  data = google.visualization.arrayToDataTable([
    ['Label', 'Value'],
    ['Memory', 80],
    ['CPU', 55],
    ['Network', 68]
  ])
  options = {
    width: 400, height: 120,
    redFrom: 90, redTo: 100,
    yellowFrom:75, yellowTo: 90,
    minorTicks: 5
  }
  chart = new google.visualization.Gauge(document.getElementById('result'))
  chart.draw(data, options) 
```

页面加载时出现 js 错误：Uncaught ReferenceError: google is not defined

如果我将图表设置/创建 js 向上移动到 application.hmtl.erb 中，则一切正常。显然这里的某些东西没有按正确的顺序加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:08:04.723

尝试在application.js*之前*包含 Google 的 jsapi 文件

```
<head>
 <title>Website</title>
 <%= stylesheet_link_tag    "application", media: "all" %>
 <script src="http://www.google.com/jsapi" type="text/javascript"></script>
 <%= javascript_include_tag "application" %>
 <%= csrf_meta_tags %>
</head> 
```

我在[这个 github 问题](https://github.com/sgruhier/jquery-addresspicker/issues/10#issuecomment-5455408)中看到了这个解决方案，它对我有用。

# python - gevent-socketio：命名空间的几个实例

> ID：11995791
> 
> 赞同：1
> 
> 时间：2012-08-16T21:36:25.147
> 
> 标签：python, socket.io, gevent

创建 socketio 应用程序时，我的服务器使用类变量声明了一个命名空间

```
class MyNamespace(BaseNamespace):
    _registry = {}
    ...

    def _broadcast(self, event, message):
        for s in self._registry.values():
            s.emit(event, message)

def application(environ, start_response):
    return socketio_manage(environ, {'/socket': MyNamespace}) 
```

我怎样才能有多个连接但到命名空间的不同实例？例如，假设这是一个聊天室应用程序并`_registry`存储不同的人。我怎样才能实现不同的房间？给定房间中的任何用户都可以互相发送消息，但其他房间的其他用户不能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:29:24.163

将房间作为某种对象，消息有地址。

地址可以是房间，也可以是单个用户。

房间应将发送给他们的所有消息重新发送给其中的用户。

# javascript - 动态背景幻灯片

> ID：11995795
> 
> 赞同：0
> 
> 时间：2012-08-16T21:36:51.283
> 
> 标签：javascript, jquery, slideshow

我正在尝试通过更改背景图像来做一个简单的幻灯片放映，而不必对每个图像路径进行硬编码。我将所有图像命名为“slideShow”，并在末尾带有一个数字（slideShow1.png/slideShow2.png）。这是我的代码，但它只是淡出原始背景图像，而不是用新的背景图像替换它。请帮忙谢谢。

```
var imgArr = new Array();
for(var i=0; i < 5; i++){
var count = i+1;
imgArr[i] = new Image();
imgArr[i].src = "http://localhost/website/css/images/slideShow" + count + ".png";
}

 function changeImg(){
 for(var i=0; i < imgArr.length; i++){
 $('#slideshow').animate({opacity: 0}, 1000, function(){
 $(this).css('background',"url('" + imgArr[i].src +"') no-repeat scroll 0 0 transparent")
 }).animate({opacity: 1}, 1000);
}
};
var startRolling = setInterval(changeImg, 3000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:48:08.550

对您的代码进行了很多更改：

不要做新的数组（）。只需使用 var x = []; 无论哪种情况，您都不需要这里。

您不需要创建图像对象来设置背景图像。如果您想预加载图像，您*可以*，但在您的情况下，这可能过于复杂。

修改后的代码：

```
(function(){
    var count = 0,
    slideshow = $('#slideshow'),

    startRolling = setInterval(function(){

        count > 5?
            count = 0:
            count++;

        slideshow.css('background-image', 'url(http://localhost/website/css/images/slideShow' + count + '.png');

    }, 3000);
})(); 
```

请注意，在此示例中，我没有添加淡入/淡出动画。我把它作为练习留给 OP 来解决这个问题。

另外，请注意，您应该*只*更改需要更改的 css 属性。因此，需要在样式表中设置“无重复滚动 0 0 透明”的额外定义，而不是直接通过样式对象。请记住，*任何*类型的 DOM 操作的诀窍是尽可能少地进行操作。

# sql-server - 将默认值传递给 SSRS 查询

> ID：11995797
> 
> 赞同：1
> 
> 时间：2012-08-16T21:37:00.167
> 
> 标签：sql-server, sql-server-2008, tsql, ssrs-2008, reporting-services

在 SSRS 中，我有一个多选报告参数，默认标签为（无），默认值为 0。

在我的查询中，我想对其进行设置，以便我可以传入 0 或其他一些值。但是，如果我传入 0，我不希望它过滤掉数据。

通常，您会将以下子句添加到您的 where 语句中，但我不确定是否或如何使用多个值完成此操作。

（@Parameter = 0 或 table.column = @Parameter）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:46:46.973

不知道我是否理解这个问题，您将传递一个可能值或 0 的列表，对吗？...

如果是这样，也许您要做的唯一更改是将参数设置为字符串（'0' 或 '1,2,3'）并执行这样的条件

```
(@Parameter = '0' OR table.column IN (@Parameter)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:43:19.647

您是在调用过程还是从 SSRS 运行直接查询？

如果您正在调用 proc，您可以尝试在 proc 中确定是否需要进行任何过滤，例如

```
DECLARE @filter INT
SELECT @filter = LEN(@parameter)
-- or something similar to determine if there are any parameters

SELECT
   -- everything you want
WHERE
    @filter = 0 OR table.Column IN (@parameter) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:03:06.937

您不必完全按照用户将参数填写到查询中来传递参数。

在您的数据集上，您可以有 2 个参数： `@Parameters`和`@ApplyFilter`

然后在数据集的参数选项卡上（参数名称 = 参数值）：

```
@Parameters = @Parameters
@ApplyFilter = IIF(And(Parameters!Parameters.Value.Length = 1,Parameters!Parameters.Value(0)=0),"0","1") 
```

最后，您的 SQL 过滤器需要类似于：

```
WHERE
   (@ApplyFilter = 1 AND tbl.column IN (@Parameters)) 
```

我更喜欢这个解决方案的原因是因为你使查询更具可读性！

# javascript - jquery中的查询选择器导致无法识别的表达式

> ID：11995798
> 
> 赞同：0
> 
> 时间：2012-08-16T21:37:01.443
> 
> 标签：javascript, jquery

如果我将以下内容插入我的控制台（Chrome）：

```
$('input[name=shopping-cart.merchant-private-data]'); 
```

结果是：

```
Error: Syntax error, unrecognized expression: [name=shopping-cart.merchant-private-data] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:37:01.443

真正的问题（和解决方案）实际上是在发布时让我意识到的。

问题是选择器中的小数位。您需要使用两个反斜杠将其转义，如下所示：

```
$('input[name=shopping-cart\\.merchant-private-data]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:39:29.413

根据属性的值创建选择器时，应始终将值括在引号中：

```
$('input[name="shopping-cart.merchant-private-data"]'); 
```

# oracle - 使用 oracle 解析器从 XML 中获取第一个出现的值

> ID：11995803
> 
> 赞同：4
> 
> 时间：2012-08-16T21:37:24.190
> 
> 标签：oracle, xml-parsing, oracle-apex, plsqldeveloper

我不是 Oracle 专家，但根据要求，我使用 Oracle Parser 来解析 Xml。对于下面列出的 xml 即

```
<?xml version="1.0" encoding="iso-8859-1" ?>
<SearchOutput>
<rowArray>
    <Row>
        <cellArray>
            <Cell>
                <columnId>1</columnId>
                <valueArray>
                    <Value>
                        <value>IR000024575453</value>
                    </Value>
                </valueArray>
            </Cell>
            <Cell>
                <columnId>5</columnId>
                <valueArray>
                    <Value>
                        <value>AZ12604823-001</value>
                    </Value>
                </valueArray>
            </Cell>
            <Cell>
                <columnId>2</columnId>
                <valueArray>
                    <Value>
                        <value>IT06686</value>
                    </Value>
                </valueArray>
            </Cell>
            <Cell>
                <columnId>9</columnId>
                <valueArray>
                    <Value>
                        <value>Hu Mics Metab K</value>
                    </Value>
                </valueArray>
            </Cell>
            <Cell>
                <columnId>8</columnId>
                <valueArray>
                    <Value>
                        <value>2006-06-21</value>
                    </Value>
                </valueArray>
            </Cell>
            <Cell>
                <columnId>7</columnId>
                <valueArray>
                    <Value>
                        <value>2006-07-27</value>
                    </Value>
                </valueArray>
            </Cell>
        </cellArray>
    </Row>
</rowArray>
</SearchOutput> 
```

我使用了该方法，其中 l_xmlclob 具有 CLOB 数据类型并在上面分配了 xml。

```
FOR r IN (  SELECT rownum rn, cells
           FROM xmltable('/SearchOutput/rowArray/Row' passing XMLTYPE(l_xmlclob)
                                     columns CELLS  XMLTYPE PATH './cellArray')
        )
 LOOP
  DBMS_OUTPUT.PUT_LINE('Row: '||r.rn);      

  FOR c IN ( SELECT colid, colval
               FROM xmltable('/cellArray/Cell' passing r.cells
                                               columns COLID NUMBER PATH './columnId',
                                                       COLVAL VARCHAR(20) PATH     './valueArray/Value/value')
           )
  LOOP
     DBMS_OUTPUT.PUT_LINE('colid, col value: '||c.colid||', '||c.colval);
  END LOOP;
 END LOOP; 
```

它的工作正常，它的输出就像

```
Row: 1
colid, col value: 1, IR000024575453
colid, col value: 5, AZ12604823-001
colid, col value: 2, IT06686
colid, col value: 9, Hu Mics Metab K
colid, col value: 8, 2006-06-21
colid, col value: 7, 2006-07-27 
```

但是如果在 xml 中一个接一个地有两个值，并且我只想选择第一个出现的值，即下面的 xml，就会出现问题

```
<?xml version="1.0" encoding="iso-8859-1" ?>
<SearchOutput>
<rowArray>
<Row>
    <cellArray>
        <Cell>
            <columnId>1</columnId>
            <valueArray>
                <Value>
                    <value>Uganda</value>
                </Value>
                <Value>
                    <value>Italy</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>5</columnId>
            <valueArray>
                <Value>
                    <value>AZ12604823-001</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>2</columnId>
            <valueArray>
                <Value>
                    <value>IT06686</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>9</columnId>
            <valueArray>
                <Value>
                    <value>Hu Mics Metab K</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>8</columnId>
            <valueArray>
                <Value>
                    <value>2006-06-21</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>7</columnId>
            <valueArray>
                <Value>
                    <value>2006-07-27</value>
                </Value>
                <Value>
                    <value>2012-02-27</value>
                </Value>
            </valueArray>
        </Cell>
    </cellArray>
</Row>
</rowArray>
</SearchOutput> 
```

我希望仅在该 valueArray 中选择“uganda, AZ12604823-001, IT06686, Hu Mics Metab K, 2006-06-21,2006-07-27” 而不是“Italy and 2012-02-27”。但不知道如何修改现有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:57:17.777

我想这就是你要找的-

```
FOR r IN (  SELECT rownum rn, cells
           FROM xmltable('/SearchOutput/rowArray/Row' passing XMLTYPE(l_xmlclob)
                                     columns CELLS  XMLTYPE PATH './cellArray') f
        )
 LOOP
  DBMS_OUTPUT.PUT_LINE('Row: '||r.rn);      
  FOR c IN ( SELECT colid, 
                    colval
               FROM xmltable('for $i in /cellArray/Cell
                              return $i' 
                              passing r.cells
                              columns COLID NUMBER PATH 'columnId',
                                      COLVAL VARCHAR(20) PATH 'valueArray/Value[1]/value')                  
           )
  LOOP
     DBMS_OUTPUT.PUT_LINE('colid, col value: '||c.colid||', '||c.colval);
  END LOOP;
 END LOOP;
end; 
```

或者

```
FOR r IN (  SELECT rownum rn, cells
           FROM xmltable('/SearchOutput/rowArray/Row' passing XMLTYPE(l_xmlclob)
                                     columns CELLS  XMLTYPE PATH './cellArray')
        )
 LOOP
  DBMS_OUTPUT.PUT_LINE('Row: '||r.rn);      

  FOR c IN ( SELECT colid, colval
               FROM xmltable('/cellArray/Cell' passing r.cells
                                               columns COLID NUMBER PATH './columnId',
                                                       COLVAL VARCHAR(20) PATH     './valueArray/Value[1]/value')
           )
  LOOP
     DBMS_OUTPUT.PUT_LINE('colid, col value: '||c.colid||', '||c.colval);
  END LOOP;
 END LOOP; 
```

输出-

```
Row: 1
colid, col value: 1, Uganda
colid, col value: 5, AZ12604823-001
colid, col value: 2, IT06686
colid, col value: 9, Hu Mics Metab K
colid, col value: 8, 2006-06-21
colid, col value: 7, 2006-07-27 
```

`Value[1]`会给你第一个多行元素，即第一个`Value`单例。

# clojure - 懒惰地从大文件中提取行

> ID：11995807
> 
> 赞同：7
> 
> 时间：2012-08-16T21:37:53.290
> 
> 标签：clojure, lazy-evaluation, stream-processing

我正在尝试使用 Clojure 从一个大（> 1GB）文件中按行号获取 5 行。我快到了，但看到了一些奇怪的东西，我想了解发生了什么。

到目前为止，我有：

```
(defn multi-nth [values indices]
  (map (partial nth values) indices))

(defn read-lines [file indices]
  (with-open [rdr (clojure.java.io/reader file)]
    (let [lines (line-seq rdr)]
      (multi-nth lines indices)))) 
```

现在，`(read-lines "my-file" [0])`工作没有问题。但是，传入`[0 1]`给我以下堆栈跟踪：

```
java.lang.RuntimeException: java.io.IOException: Stream closed
        Util.java:165 clojure.lang.Util.runtimeException
      LazySeq.java:51 clojure.lang.LazySeq.sval
      LazySeq.java:60 clojure.lang.LazySeq.seq
         Cons.java:39 clojure.lang.Cons.next
          RT.java:769 clojure.lang.RT.nthFrom
          RT.java:742 clojure.lang.RT.nth
         core.clj:832 clojure.core/nth
         AFn.java:163 clojure.lang.AFn.applyToHelper
         AFn.java:151 clojure.lang.AFn.applyTo
         core.clj:602 clojure.core/apply
        core.clj:2341 clojure.core/partial[fn]
      RestFn.java:408 clojure.lang.RestFn.invoke
        core.clj:2430 clojure.core/map[fn] 
```

在我从文件中读取第二行之前，流似乎已被关闭。有趣的是，如果我手动从文件中拉出一行，则`(nth lines 200)`该`multi-nth`调用适用于所有 <= 200 的值。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T22:24:46.273

map（和 line-seq）返回惰性序列，因此在您调用 with-open 返回时，没有必要读取任何行，这会关闭文件。

基本上，您需要在 with-open 返回之前实现整个返回值，您可以使用 doall：

```
(defn multi-nth [values indices]
  (map (partial nth values) indices))

(defn read-lines [file indices]
  (with-open [rdr (clojure.java.io/reader file)]
    (let [lines (line-seq rdr)]
      (doall (multi-nth lines indices))))) 
```

或类似的东西。请记住，在搜索指定行时，您的 multi-nth 会保留行 seq 的开头，这意味着它将保持所有行直到内存中的最后一个指定行 - 并且像这样使用 nth 意味着您'正在为每个索引重复遍历 line-seq - 你会想要解决这个问题。

更新：

像这样的东西会起作用。它比我喜欢的要丑一些，但它显示了原理，我认为：注意这里的索引需要是一个**set**。

```
(defn multi-nth [values indices]
 (keep 
   (fn [[number line]] 
     (if (contains? indices number) 
       line))
   (map-indexed vector values)))

(multi-nth '(a b c d e) #{2 3})
  => c d 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T22:31:25.110

`with-file`文件主体执行后关闭文件。因此，一旦`multi-nth`执行了文件，文件就会关闭，这意味着您最终会得到一个指向已关闭文件的惰性序列。

`(read-lines "my-file" [0])`之所以有效，是因为仅实现了惰性序列的第一个元素。

要解决此问题，您需要强制使用以下命令实现序列`doall`：

```
(defn multi-nth [values indices]
  (doall (map (partial nth values) indices))) 
```

有关非常详细的说明，请参见[https://stackoverflow.com/a/10462159/151650](https://stackoverflow.com/a/10462159/151650)

# objective-c - 显式声明assign

> ID：11995811
> 
> 赞同：0
> 
> 时间：2012-08-16T21:38:11.350
> 
> 标签：objective-c, assign

我正在阅读的 Objective-C 书使用的是 Xcode 4.2，我想我记得读过它，`strong`而不是`assign`4.3 的新默认值。`@property int numerator`这是否意味着在 4.3 及更高版本中，如果我想为类似我必须写的东西做作业`@property (assign) int numerator`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:05:24.180

首先，在属性声明中指定属性而不依赖默认值始终是一种好习惯。其次，您不能将强属性与标量类型一起使用，它适用于对象。 即使在 Xcode 4.4 中，**@property int 分子也会默认为 assign 属性。**

# asp.net-mvc - jquery 和 mvc .net：动作返回 json 返回“对象”

> ID：11995812
> 
> 赞同：0
> 
> 时间：2012-08-16T21:38:11.100
> 
> 标签：asp.net-mvc, jquery

所以我有一个调用 JsonResult 的 json

班上：

```
public class Client{
    public int Id {get;set;}
    public string Name {get;set;}
} 
```

被调用的动作：

```
public JsonResult Index(int Id)
        {
      var a = context.Clients.ToList();
      return Json(a, JsonRequestBehavior.AllowGet);
} 
```

这是电话

```
<script type="text/javascript">
    $(document).ready(function () {
        var link;
        $('a.client-list').click(function () {
            link= $(this);
            $.ajax({
                url: '/client/index?Id=4455',
                dataType: 'json',
                success: function (data) {
                    $.each(data, function (id, val) {
                        alert(id.toString() + ' ' + val.toString());
                    });
                }
            });
            return false;
        });
    });
    </script> 
```

所以我的问题是，我知道它会返回一些东西，因为它会循环通过我输入的警报。但是弹出的值是这个

```
0 [object Object]
1 [object Object] 
```

我不确定为什么它不能正确阅读。顺便说一句，查询的值是

```
1 TestCompany1
2 TestCompany2 
```

我在 jquery 上遗漏了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T23:15:10.077

像这样更新你的 $.each ：

```
$.each( data, function (index, client ) {
    alert( client.Id + ' ' + client.Name );
}); 
```

您正在返回 Client 类型的集合 ( `Array`)。该`$.each`函数将提供数组的索引以及与该索引关联的数组中的项。在这种情况下，数组中的每个项目都是一个 Client `Object`。更多信息在`$.each`这里：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

有关调试 JavaScript 时的更多详细信息，请尝试使用控制台：

```
$.each(data, function ( index, client ) {
    console.log( client );
}); 
```

只需在浏览器 (PC) 中按 F12 并选择控制台选项卡。您将能够看到有关`Object`包括其属性的更多详细信息。

# iphone - UISearchBar 奇怪的条形线

> ID：11995819
> 
> 赞同：1
> 
> 时间：2012-08-16T21:39:01.053
> 
> 标签：iphone, objective-c, ios, ipad, cocoa-touch

我正在研究我以编程方式创建的 UISearchBar。以下是我遇到的问题：

![http://oi46.tinypic.com/2lo25qu.jpg](../Images/d120e7e5901b6a184cde65a0bc976978.png)

我怎样才能摆脱这个搜索栏上的那条线？

代码如下：

```
[self setBackgroundColor:[UIColor clearColor]];
[self setBarStyle:UIBarStyleDefault];
[self setTintColor:[UIColor whiteColor]];
[self setShowsCancelButton:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T01:58:39.530

我所做的是更改支持层：

```
self.searchBar.layer.borderWidth = 1;
self.searchBar.layer.borderColor = [[UIColor redColor] CGColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:16:35.857

您可以使用

```
 [[UISearchBar appearance] setSearchFieldBackgroundImage:[UIImage imageNamed:@"someImage.png"]forState:UIControlStateNormal]; 
```

在 iOS 5+ 上摆脱这条线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T06:33:34.237

您将背景颜色设置为 clearColor。您可以删除的背景视图，`UISearchBar`而不是：

```
for(UIView *view in [searchBar subviews]){
    if([view isKindOfClass:NSClassFromString(@"UISearchBarBackground")]){
        [view removeFromSuperview];
    }
}

// in the above code in place of "searchBar" you have to use "self" 
```

# c++ - QT - C++ 错误：'QWidget::QWidget(const QWidget&)' 在此上下文中是私有的

> ID：11995821
> 
> 赞同：2
> 
> 时间：2012-08-16T21:39:07.190
> 
> 标签：c++, qt

我对 C++ 中的 qt 有疑问

头文件：

```
#ifndef TIMER_H
#define TIMER_H
#include <QWidget>
#include <QTimer>
#include <QtGui>
#include <QObject>

class Timer : public QWidget
{
    Q_OBJECT
public:
    Timer(QWidget * parent = 0);
    void setTimer(QString title, QString description, QDate date);
public slots:
    void showWarning() {QString show = tit;
                        QPushButton * thanks = new QPushButton(QObject::tr("Thank you for reminding me!"));
                        show.append("\n");
                        show.append(des);
                        QMessageBox popup;
                        popup.setText(show);
                        popup.setWindowTitle("Calendar : Reminder");
                        popup.setDefaultButton(thanks);
                        popup.exec();
                       }
private:
    QString tit;
    QString des;
};

#endif // TIMER_H 
```

cpp文件：

```
#include "timer.h"

Timer::Timer(QWidget * parent)
    : QWidget(parent)
{
}

void Timer::setTimer(QString title, QString description, QDate date)
{
    QDateTime now = QDateTime::currentDateTime();
    QDateTime timeoftheaction;
    QTimer *timer=new QTimer;
    tit = title;
    des = description;
    timeoftheaction.setDate(date);
    timeoftheaction.setTime(reminderTime);
    QObject::connect(timer, SIGNAL(timeout()),this,SLOT(showWarning()));
    timer->start(now.secsTo(timeoftheaction)*1000);
} 
```

当我编译我得到错误：

> ........\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtGui/qwidget.h：在复制构造函数'Timer::Timer(const Timer&)'中：..\projectOOI/timer。 h:9: 实例化自 'void QList::node_construct(QList::Node*, const T&) [with T =ointment]' ........\QtSDK\Desktop\Qt\4.8.1\mingw\ include/QtCore/qlist.h:512:
> 从 'void QList::append(const T&) [with T =ointment]' 实例化 ..\projectOOI/apppointoverview.h:10: 从这里实例化...... .\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtGui/qwidget.h:806: **错误：'QWidget::QWidget(const QWidget&)' 是私有的 ..\projectOOI/timer.h:9: 错误: 在这种情况下**

虽然我已经公开继承了 QWidget ......所以我不明白我哪里出错了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T21:45:06.310

这是因为 QObject（以及继承的 QWidget）有一个私有的拷贝构造函数。

一般来说，你应该通过指针/引用而不是值来传递你的对象，以避免使用复制构造函数。或者，您应该能够定义自己的复制构造函数。

来自 Qt 文档

> QObject 既没有复制构造函数也没有赋值运算符。这是设计使然。实际上，它们是被声明的，但是在一个带有宏 Q_DISABLE_COPY() 的私有部分中。事实上，所有从 QObject 派生的 Qt 类（直接或间接）都使用这个宏来声明它们的复制构造函数和赋值运算符是私有的。推理可以在 Qt 对象模型页面上关于 Identity vs Value 的讨论中找到。
> 
> 主要结果是您应该使用指向 QObject（或指向您的 QObject 子类）的指针，否则您可能会试图将 QObject 子类用作值。例如，如果没有复制构造函数，就不能使用 QObject 的子类作为要存储在容器类之一中的值。您必须存储指针。

# jquery - 用tablesorter排序后保留原来的顺序

> ID：11995825
> 
> 赞同：0
> 
> 时间：2012-08-16T21:40:00.800
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors, tablesorter

我所有的表格数据都按排序顺序排列。我正在使用表格排序器按日期对列进行排序。它工作正常。现在我想提供一个选项来将排序恢复为我收到的原始排序顺序。

我怎样才能做到这一点

1）我想的一种方法是在将表发送到表分拣机之前克隆表。有没有比这更好的方法

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T17:40:01.350

我在 github 上有一个 tablesorter 的分支，我在其中添加了一个名为的新选项`sortReset`，在第三次单击标题后会将表格重置为其原始顺序。看看[这个演示](http://mottie.github.com/tablesorter/docs/example-option-sortreset-sortrestart.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:46:51.160

我在原始表中添加了一个新列，该列对行进行编号。所以现在如果我按日期排序并想要以前的顺序，我只需按新创建的列排序。

# r - R中矩阵的逆

> ID：11995832
> 
> 赞同：97
> 
> 时间：2010-11-20T00:40:53.173
> 
> 标签：r, matrix-inverse

我想知道您推荐的计算矩阵逆的方法是什么？

我发现的方法似乎并不令人满意。例如，

```
> c=rbind(c(1, -1/4), c(-1/4, 1))  
> c  
      [,1]  [,2]  
[1,]  1.00 -0.25  
[2,] -0.25  1.00  
> inv(c)  
Error: could not find function "inv"  
> solve(c)    
          [,1]      [,2]  
[1,] 1.0666667 0.2666667  
[2,] 0.2666667 1.0666667  
> solve(c)*c  
            [,1]        [,2]  
[1,]  1.06666667 -0.06666667  
[2,] -0.06666667  1.06666667  
> qr.solve(c)*c  
            [,1]        [,2]  
[1,]  1.06666667 -0.06666667  
[2,] -0.06666667  1.06666667 
```

谢谢！

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2010-11-20T01:13:35.630

`solve(c)`确实给出了正确的逆。您的代码的问题是您使用错误的运算符进行矩阵乘法。您应该使用`solve(c) %*% c`在 R 中调用矩阵乘法。

R 在调用时执行逐个元素的乘法`solve(c) * c`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2010-11-20T01:44:55.550

您可以使用**MASS**包中的函数***ginv()***（Moore-Penrose 广义逆）

 *** * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-27T16:37:57.437

请注意，如果您关心速度并且不需要担心奇点，`solve()`应该首选它，`ginv()`因为它更快，您可以检查：

```
require(MASS)
mat <- matrix(rnorm(1e6),nrow=1e3,ncol=1e3)

t0 <- proc.time()
inv0 <- ginv(mat)
proc.time() - t0 

t1 <- proc.time()
inv1 <- solve(mat)
proc.time() - t1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-05T18:46:43.930

solve(matrix) = 矩阵的逆，它完美地完成了这项工作。**

# image - 如何从 JavaScript 中的函数传回图像？

> ID：11995836
> 
> 赞同：0
> 
> 时间：2012-08-16T21:40:31.867
> 
> 标签：image, object, return, javascript

我的 GUI 将向服务器查询序列化图像。现在，我只想加载一个本地文件并显示它，但是在 WebStorm 中 queryGetSiteMap() 的结果是无效的。

```
function queryGetSiteMap() {
    var local_image = new Image();
    local_image.onload = function() {
        return local_image;
    };
    local_image.src = "./images/myImage.png";
}
var site_image = queryGetSiteMap(); 
```

提前致谢！很多 JS 对我来说都是新的。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:54:30.543

首先，您的`queryGetSiteMap`函数返回`void`（实际上是*undefined*），因为该函数不返回任何内容。

最有可能的是，您想要做的是传递对一个函数的引用，以便在图像加载完成时调用。就像是：

```
function queryGetSiteMap(callback) {
    var local_image = new Image();
    local_image.onload = callback;
    local_image.src = "./images/myImage.png";
}
queryGetSiteMap( function ()
  {
    //Code that gets run when image is loaded
  }); 
```

# r - 将迭代存储在数据框中

> ID：11995841
> 
> 赞同：0
> 
> 时间：2012-08-16T21:40:41.993
> 
> 标签：r

我想计算：`val = s*m^y`并将每次 y 迭代的结果存储在数据框中。

例子：

在 m=10、s=1 和 y 的 2 次迭代中，这将导致：

```
df <- data.frame(y=c(0:2), val = c(1,10,100)) 
```

我不知道如何创建这个数据框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:48:46.270

`^`是矢量化的。无需迭代。

```
Data <- data.frame(y=0:2)
Data$val <- 1*10^Data$y 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:49:05.860

`data.frame`您可以通过指定其列的值来构造 a 。为此，您可以使用通常可以使用的相同向量计算：

```
> y <- 0:2
> y
[1] 0 1 2
> s <- 1
> m <- 10
> val <- s*m^y
> val
[1] 1 10 100
> df <- data.frame(y=y, val=val)
> df 
  y val
1 0   1
2 1  10
3 2 100 
```

# css - 如何在其父 div 中对齐/调整 css 旋转跨度

> ID：11995851
> 
> 赞同：0
> 
> 时间：2012-08-16T21:41:27.250
> 
> 标签：css, css-transforms

如何在紫色 div 中间获得“反馈”跨度爆炸？

[http://jsfiddle.net/XcWHr/](http://jsfiddle.net/XcWHr/)

我在这些主题上尝试了一些变体：[https ://developer.mozilla.org/en-US/docs/CSS/transform-origin?redirectlocale=en-US&redirectslug=CSS%2F-moz-transform-origin](https://developer.mozilla.org/en-US/docs/CSS/transform-origin?redirectlocale=en-US&redirectslug=CSS%2F-moz-transform-origin)

比特不能完全击中头部......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:09:14.853

我认为在这种情况下，旋转紫色 div 而不是反馈跨度会更容易。这样，您就可以将水平和垂直居中与旋转分开进行推理。这可行吗？我已经更新了你的 jsfiddle：http: [//jsfiddle.net/XcWHr/2/](http://jsfiddle.net/XcWHr/2/)

我将您的“反馈”跨度设置为以常规方式居中并反转容器的宽度和高度：

```
.feedbackTab 
{
    height: 42px; 
    width: 156px;
    text-align: center;
    line-height: 42px;
} 
```

然后我将“反馈”跨度设置`display: inline-block`为尊重其容器上的居中规则。最后，我将您的`.rotate`课程放在容器上，而不是“反馈”范围内。

# xml - XSLT 疑难解答...尝试更改 XML 输出

> ID：11995853
> 
> 赞同：0
> 
> 时间：2012-08-16T21:41:31.357
> 
> 标签：xml, xslt

好的，所以我有我正在尝试更改的 XML 数据。我已经编写了 XSLT，但它并没有起到作用，我需要帮助找出它有什么问题。

这是我需要使用 XSLT 更改的 XML：

```
<?xml version='1.0' encoding='UTF-8'?>
<bb:Report_Data xmlns:bb="urn:com.playdate.report/Absence_Balances-Outbound">
   <bb:Report_Entry>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:All_Eligible_Time_Off_Plans_for_Worker>
         <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      </bb:All_Eligible_Time_Off_Plans_for_Worker>
      <bb:projectedBalanceTotal.effectiveDate1>08122012</bb:projectedBalanceTotal.effectiveDate1>
      <bb:projectedBalanceTotal.effectiveDate2>08262012</bb:projectedBalanceTotal.effectiveDate2>
      <bb:projectedBalanceTotal.effectiveDate3>09092012</bb:projectedBalanceTotal.effectiveDate3>
                <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </bb:Report_Entry>

</bb:Report_Data> 
```

这就是我需要它的样子：

```
<?xml version='1.0' encoding='UTF-8'?>
<bb:Report_Data xmlns:bb="urn:com.playdate.report/Absence_Balances-Outbound">

   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>

   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>

   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
         <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
         <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
         <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
         <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
         <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
         <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>

</bb:Report_Data> 
```

这是我正在使用的 XSLT，它没有起到作用：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:wd="urn:com.playdate.report/Projected_Absence_Balances-Outbound">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <bb:Report_Data>
   <xsl:apply-templates select="*/*/*/*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]"/>
 </bb:Report_Data>
</xsl:template>

<xsl:template match="*">
   <projectedBalanceTotal>
     <xsl:copy-of select="
       ../../bb:projectedBalanceTotal.principalId      |
       ../bb:projectedBalanceTotal.planCodeId          |
       ../bb:projectedBalanceTotal.leaveDescription    |
       ../bb:projected_balance_accrual_amount_for_the_pay_period" />
     <bb:projectedBalanceTotal.effectiveDate>
      <xsl:value-of select="." />
     </bb:projectedBalanceTotal.effectiveDate>
     <xsl:copy-of select="../../bb:projectedBalanceTotal.employeeId" />
   </projectedBalanceTotal>
</xsl:template>

</xsl:stylesheet> 
```

如果我可以删除 WD 前缀也很好。任何帮助将不胜感激！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:17:46.887

在查看您的样式表时，首先让我印象深刻的是，未声明的名称空间前缀`bb`在 XPath 表达式和文字结果元素中多次出现。您声明了前缀`wd`但不使用它；我想命名空间是`bb`应该绑定的。

第二件事是您的 XML 迫使您的 XSLT 执行不自然的行为；如果你对词汇表的设计有任何影响，你应该去掉名字`projectedBalanceTotal.effectiveDate1`等等：去掉序列号（它不提供任何信息并阻止使用正常的 XPath 表达式）并重组元素，所以没有元素名以这些方式携带两条信息。

第三件事是即使在命名空间错误被修复后样式表也没有输出的原因是模板中指令`select`上的属性`xsl:apply-templates`/ 不匹配任何东西。

我希望这有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:18:12.710

我认为您可能首先需要从匹配**bb:Report_Entry**元素开始

```
<xsl:apply-templates select="bb:Report_Data/bb:Report_Entry"/> 
```

然后，对于每个这样的条目，您尝试匹配生效日期

```
<xsl:apply-templates 
   select="*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]"/> 
```

然后，在匹配日期的模板中，匹配**bb:All_Eligible_Time_Off_Plans_for_Worker**元素，但将日期作为参数传入。

```
<xsl:template match="*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]">
   <xsl:apply-templates select="../bb:All_Eligible_Time_Off_Plans_for_Worker">
      <xsl:with-param name="date" select="."/>
   </xsl:apply-templates>
</xsl:template> 
```

**bb:All_Eligible_Time_Off_Plans_for_Worker**的模板然后可以输出 in 中的元素，以及作为参数传递的有效。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:bb="urn:com.playdate.report/Absence_Balances-Outbound">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <bb:Report_Data>
         <xsl:apply-templates select="bb:Report_Data/bb:Report_Entry"/>
      </bb:Report_Data>
   </xsl:template>

   <xsl:template match="bb:Report_Entry">
      <xsl:apply-templates select="*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]"/>
   </xsl:template>

   <xsl:template match="*[starts-with(local-name(),'projectedBalanceTotal.effectiveDate')]">
      <xsl:apply-templates select="../bb:All_Eligible_Time_Off_Plans_for_Worker">
         <xsl:with-param name="date" select="."/>
      </xsl:apply-templates>
   </xsl:template>

   <xsl:template match="bb:All_Eligible_Time_Off_Plans_for_Worker">
      <xsl:param name="date"/>
      <projectedBalanceTotal>
         <xsl:copy-of select="../bb:projectedBalanceTotal.principalId"/>
         <xsl:copy-of select="*"/>
         <bb:projectedBalanceTotal.effectiveDate>
            <xsl:value-of select="$date"/>
         </bb:projectedBalanceTotal.effectiveDate>
         <xsl:copy-of select="../bb:projectedBalanceTotal.employeeId"/>
      </projectedBalanceTotal>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<?xml version="1.0"?>
<bb:Report_Data xmlns:bb="urn:com.playdate.report/Absence_Balances-Outbound">
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08122012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>08262012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Sick</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Sick</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Vacation</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Vacation</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>3.323077</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
   <projectedBalanceTotal>
      <bb:projectedBalanceTotal.principalId>1040182074</bb:projectedBalanceTotal.principalId>
      <bb:projectedBalanceTotal.planCodeId>Winter Recess</bb:projectedBalanceTotal.planCodeId>
      <bb:projectedBalanceTotal.leaveDescription>Winter Recess</bb:projectedBalanceTotal.leaveDescription>
      <bb:projected_balance_accrual_amount_for_the_pay_period>0</bb:projected_balance_accrual_amount_for_the_pay_period>
      <bb:projectedBalanceTotal.effectiveDate>09092012</bb:projectedBalanceTotal.effectiveDate>
      <bb:projectedBalanceTotal.employeeId>0260971</bb:projectedBalanceTotal.employeeId>
   </projectedBalanceTotal>
</bb:Report_Data> 
```

我不完全确定您是否真的想更改名称空间，所以目前 XSLT 保持不变。

# iphone - 将 JSON 放入数组并放入 UITableView

> ID：11995854
> 
> 赞同：0
> 
> 时间：2012-08-16T21:41:49.860
> 
> 标签：iphone, ios4, sdk

假设我有一些 JSON 数据：

```
[{"id":"1","case_name":"NZXT Phantom 
410","case_description":"","case_type":"ATX","case_color":"White","case_price":"99.99","case_i
mage":""},{"id":"2","case_name":"Thermaltake 
MK+","case_description":"","case_type":"ATX","case_color":"Black","case_price":"84.99","case_i
mage":""}] 
```

我已经将它提取到 NSString 中，但我似乎无法弄清楚如何将它放入 NSArray 中，例如：

```
 parts = [NSArray arrayWithObjects:
            [[part alloc] initWithpartName:@"Penguin" imageName:@"penguin.jpg"],
            [[part alloc] initWithpartName:@"Crow" imageName:@"crow.jpg"], 
```

我也使用此代码返回单元格：

```
part *part = [parts objectAtIndex:(indexPath.indexPath.row)];
cell.label.text = part.partName;
cell.imageView.image = [UIImage imageNamed:part.imageName]; 
```

Part 类看起来像：

```
@interface part : NSObject

@property (strong, nonatomic) NSString * imageName;
@property (strong, nonatomic) NSString * partName;

- (id) initWithpartName:(NSString*)part imageName:(NSString*)image; 
```

如何使用 SBJSON 解析器将此 json 代码转换为 nsarray：`parts = [NSArray arrayWithObjects:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:27:05.757

这是你想要的？

```
- (NSArray *)partsFromJSONString:(NSString *)JSONString
{
    NSData *JSONData = [JSONString dataUsingEncoding:NSUTF8StringEncoding];
    NSArray *JSONArray = [NSJSONSerialization JSONObjectWithData:JSONData
                                                         options:0 error:NULL];
    NSMutableArray *returnArray = [[NSMutableArray alloc] init];
    for (NSDictionary *object in JSONArray) {
        Part *part = [[Part alloc] initWithPartName:object[@"case_name"]
                                          imageName:object[@"case_image"]];
        [returnArray addObject:part];
    }
    return returnArray.copy;
} 
```

# javascript - jQuery .clone 将 onchange 更改为 onclick

> ID：11995856
> 
> 赞同：0
> 
> 时间：2012-08-16T21:42:07.027
> 
> 标签：javascript, jquery, html, clone

当我使用 jQuery 克隆一个对象时，如果它是一个选择，则“onchange”事件将更改为“onclick”。如何使用 jQuery 克隆元素并保留所有属性和事件？已使用 .clone(true)。

这是JS的代码：

```
function addNovoPasseio (obj){
    newobj=$(".passeios").clone(true);
    $(newobj).find("*").removeAttr('id');
    $(newobj).insertBefore("#addPasseio");
} 
```

这是我试图克隆的 HTML 代码：

```
<div class="passeios">
    <div class="select-cidade">
         <label for="cidade">Cidade</label>
         <select name="cidade" id="cidade" onchange="getBairros(this,$(this).parent().next().find('select'));" class="select-obr">
             <option value="-1">&nbsp;</option>
             <option>Cidades</option>
         </select>
    </div>
</div>
<div class="botoeira" id="addPasseio"><button onclick="addNovoPasseio(this);">New</button></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:29:10.713

看起来您正在寻找的不仅仅是一个普通的克隆，而是更像一个深拷贝的东西。

从以下网址下载 deepCopy.js：http: [//oranlooney.com/deep-copy-javascript/](http://oranlooney.com/deep-copy-javascript/)

然后，您可以使用以下内容创建精确副本：

```
var myCopiedItem = owl.deepCopy(myItem) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T21:47:01.533

尝试像这样克隆：

```
.clone(true, true) 
```

您始终可以检查绑定到元素的事件：

```
$('selector').data('events') 
```

# memory-leaks - Ajax 驱动页面上的 Knockout.js 绑定

> ID：11995860
> 
> 赞同：6
> 
> 时间：2012-08-16T21:42:27.010
> 
> 标签：memory-leaks, knockout.js, resource-cleanup

真正开始享受 KnockoutJs (http://knockoutjs.com)。我的大多数网络应用程序都是 ajax 驱动的。加载整个站点，然后从链接到链接，我们只需通过 ajax 调用更改正文内容。

当 ajax 返回新的正文内容时，我可以进行 Knockout 绑定。没问题。当我链接到下一页时（只是一个替换正文的 ajax 调用）。我认为 Knockout 建筑物仍在记忆中，但并没有真正受到限制，因为 dom 已经改变。关于这个话题的几个问题。

1.  如果下一页没有任何 Knockout，那么让 Knockout 对象在内存中徘徊真的有那么糟糕吗？更好的是有没有办法重置（清除）淘汰赛对象？

2.  当我从一个具有淘汰赛绑定的页面转到另一个具有淘汰赛绑定的页面时，是否只是再次调用 ko.applyBindings() 清除旧内容并重新绑定新内容？（再一次，当我说从一页转到另一页时，我只是用 ajax 调用重新加载正文）。

3.  淘汰赛是否有任何“实时”绑定。有点像 jQuery 的实时绑定？这种方式可以预先加载 Knockout，然后不必从内容更改重新应用到内容更改。

一般来说，我正在寻找有关如何在浏览器不从页面刷新到页面的应用程序中最好地使用逐页淘汰的建议。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:07:33.990

> 1）如果下一页没有任何淘汰赛，那么让淘汰赛对象在内存中徘徊真的有那么糟糕吗？更好的是有没有办法重置（清除）淘汰赛对象？

不，没那么糟。但如果你真的想清理，那么你可以打电话给[`ko.removeNode`](https://groups.google.com/d/msg/knockoutjs/cIwSL2JkyQU/NKXcdYvWdAcJ).

* * *

> 2）当我从一个具有淘汰赛绑定的页面转到另一个具有淘汰赛绑定的页面时，是否只是再次调用 ko.applyBindings() 清除旧内容并重新绑定新内容？（再一次，当我说从一页转到另一页时，我只是用 ajax 调用重新加载正文）。

这取决于。

首先，正如[GregT 提到](https://stackoverflow.com/questions/9853850/knockoutjs-memory-leak#comment14384828_9969819)的：

> 不应`applyBindings()`在同一个 DOM 节点上多次调用。

我从经验中知道 -`ko.applyBindings()`在同一个 DOM 节点上多次调用**会导致内存泄漏**。[如果您需要这样做，请致电[`ko.cleanNode()`](https://stackoverflow.com/a/10049722/109941)。]

OTOH，如果您没有`ko.applyBindings()`在同一个 DOM 节点上多次调用，那么您应该没问题，[因为](https://groups.google.com/d/msg/knockoutjs/cIwSL2JkyQU/lbLrPNspQTAJ)：

> KO 在添加/删除节点时会进行一些清理。发生这种情况的典型时间是重新渲染模板时。

* * *

> 3) 淘汰赛是否有任何“实时”绑定。有点像 jQuery 的实时绑定？这种方式可以预先加载 Knockout，然后不必从内容更改重新应用到内容更改。

不是我所知道的，但如果我正确理解了您的问题，则您不需要任何本机 Knockout 功能来实现您需要的功能。您应该能够使用 jQuery 的[`on()`](http://api.jquery.com/on/)方法自己连接它（因为[`live()`](http://api.jquery.com/live/)已弃用）。

# jquery - 在 CakePHP 中使用 jQuery 可排序 ajax 调用更新数据库

> ID：11995864
> 
> 赞同：0
> 
> 时间：2012-08-16T21:42:43.760
> 
> 标签：jquery, ajax, jquery-ui, cakephp, jquery-ui-sortable

我正在尝试使用 jQuery 的 sortable 对表中的行进行简单的重新排序。我的拖放工作正常，我的问题是保存我的 ajax 调用的新行顺序，特别是将数据发送到我在 CakePHP 中的操作。我整天都在搜索和尝试不同的东西，但无济于事。基本上，根本没有更新数据库。

如果我使用空操作运行我的 ajax 调用，我可以获得成功：回调以提醒某些东西，我理解这意味着它成功地击中了我的操作。如果我在那里错了，请纠正我。这是我的 jQuery 和 AJAX 调用：

```
$('#featured-items tbody').sortable({

    cursor: 'move',
    stop:function(i) {

        $.ajax({
            type: "GET",
            url: "/admin/features/reorder",
            data: $('#featured-items tbody').sortable("serialize"),
            success: function() {
                alert($('#featured-items tbody').sortable("serialize"));
            }               
        });

    }

}).disableSelection(); 
```

我发送的数据是：

```
item[]=2&item[]=1&item[]=24 
```

有人可以帮助我了解如何在控制器操作中访问我的数据吗？到目前为止，我有这个（通过查看其他示例）。我正在使用 Cake 1.3，我的模型称为 Feature。

```
function admin_reorder()
{
    $this->autoRender = false;

    if($this->RequestHandler->isAjax())
    {
        foreach($this->data['item'] as $order => $id)
            $this->Feature->id = $id;
            $this->Feature->saveField('priority', $order);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T07:54:42.513

尝试使用 $_GET/$_POST 而不是 $this->data ：

```
function admin_reorder()
{
    $this->autoRender = false;

    if($this->RequestHandler->isAjax())
    {
        foreach($_GET['item'] as $order => $id)
            $this->Feature->id = $id;
            $this->Feature->saveField('priority', $order);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:18:25.077

据我所知，`$this->data`仅用于*发布*的数据，而在您的 AJAX 调用中，您使用的是*GET*方法。尝试将您的方法更改为 POST：

```
$('#featured-items tbody').sortable({

    cursor: 'move',
    stop:function(i) {

        $.ajax({
            type: "POST",
            url: "/admin/features/reorder",
            data: $('#featured-items tbody').sortable("serialize"),
            success: function() {
                alert($('#featured-items tbody').sortable("serialize"));
            }               
        });

    }

}).disableSelection(); 
```

# xcode - Xcode 在尝试编辑断点时崩溃

> ID：11995865
> 
> 赞同：0
> 
> 时间：2012-08-16T21:42:45.497
> 
> 标签：xcode, crash, breakpoints, lldb

所以我已经让 LLDB 使用[这个解决方案](https://stackoverflow.com/questions/11905378/xcode-4-3-4-4-crashes-with-breakpoints-using-lldb-breakpoints-useless-with-gdb)在 Xcode 中工作。但是，现在每当我尝试在 Xcode 中编辑断点时，都会崩溃。您可以从崩溃线程的回溯中看到，第 7 帧和第 8 帧指向可能涉及的 libc++abi.dylib。从 LLDB 的控制台操作断点对象似乎工作得很好

这是崩溃日志：

```
Process:         Xcode [21079]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.4.1 (1488)
Build Info:      IDEApplication-1488000000000000~2
App Item ID:     497799835
App External ID: 9950605
Code Type:       X86-64 (Native)
Parent Process:  launchd [295]

Date/Time:       2012-08-16 17:02:42.589 -0400
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9

Interval Since Last Report:          37967 sec
Crashes Since Last Report:           43
Per-App Interval Since Last Report:  98301 sec
Per-App Crashes Since Last Report:   2
Anonymous UUID:                      50D9F896-324C-4624-8C00-C460577BD2AE

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000001280

VM Regions Near 0x1280:
--> 
    __TEXT                 000000010d4df000-000000010d4e2000 [   12K] r-x/rwx SM=COW  /Applications/Xcode.app/Contents/MacOS/Xcode

Application Specific Information:
ProductBuildVersion: 4F1003
objc[21079]: garbage collection is ON
Performing @selector(_editBreakpoint:) from sender NSMenuItem 0x40430d3c0

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff933cd75f realizeClass(class_t*) + 197
1   libobjc.A.dylib                 0x00007fff933d349e prepareForMethodLookup + 116
2   libobjc.A.dylib                 0x00007fff933d32bb lookUpMethod + 63
3   libobjc.A.dylib                 0x00007fff933d5a5c class_respondsToSelector + 26
4   com.apple.CoreFoundation        0x00007fff8b4cf002 objectIsKindOfClass + 66
5   com.apple.CoreFoundation        0x00007fff8b4cf062 __exceptionMatch + 18
6   libobjc.A.dylib                 0x00007fff933ddb36 _objc_exception_do_catch + 125
7   libc++abi.dylib                 0x000000010e90ff55 scan_eh_tab + 1333
8   libc++abi.dylib                 0x000000010e90f8d8 __gxx_personality_v0 + 104
9   libunwind.dylib                 0x00007fff8e20091f _Unwind_RaiseException + 139
10  libc++abi.dylib                 0x000000010e90ebb8 __cxa_throw + 104
11  libobjc.A.dylib                 0x00007fff933dde7a objc_exception_throw + 327
12  com.apple.CoreFoundation        0x00007fff8b4ced8a +[NSException raise:format:arguments:] + 106
13  com.apple.CoreFoundation        0x00007fff8b4ced14 +[NSException raise:format:] + 116
14  com.apple.AppKit                0x00007fff929f043b LAYOUT_CONSTRAINTS_NOT_SATISFIABLE + 101
15  com.apple.AppKit                0x00007fff929e0d4a -[NSISEngine handleUnsatisfiableRowWithHead:body:mutuallyExclusiveConstraints:] + 427
16  com.apple.AppKit                0x00007fff929defbe -[NSISEngine tryUsingArtificialVariableToAddConstraintWithMarker:rowBody:constraintName:mutuallyExclusiveConstraints:] + 397
17  com.apple.AppKit                0x00007fff929e2bf1 -[NSISEngine tryToAddConstraintWithMarker:expression:roundingAdjustment:mutuallyExclusiveConstraints:] + 484
18  com.apple.AppKit                0x00007fff929e79d8 -[NSLayoutConstraint _addToEngine:roundingAdjustment:mutuallyExclusiveConstraints:] + 443
19  com.apple.AppKit                0x00007fff9230d678 -[NSView(NSConstraintBasedLayout) _layoutEngineDidChange] + 296
20  com.apple.AppKit                0x00007fff92308530 -[NSView _setWindow:] + 1301
21  com.apple.AppKit                0x00007fff92236ac8 __NSViewRecursionHelper + 25
22  com.apple.CoreFoundation        0x00007fff8b45ccb4 CFArrayApplyFunction + 68
23  com.apple.AppKit                0x00007fff92308a3e -[NSView _setWindow:] + 2595
24  com.apple.AppKit                0x00007fff92236ac8 __NSViewRecursionHelper + 25
25  com.apple.CoreFoundation        0x00007fff8b45ccb4 CFArrayApplyFunction + 68
26  com.apple.AppKit                0x00007fff92308a3e -[NSView _setWindow:] + 2595
27  com.apple.AppKit                0x00007fff92236ac8 __NSViewRecursionHelper + 25
28  com.apple.CoreFoundation        0x00007fff8b45ccb4 CFArrayApplyFunction + 68
29  com.apple.AppKit                0x00007fff92308a3e -[NSView _setWindow:] + 2595
30  com.apple.AppKit                0x00007fff92306c6d -[NSView addSubview:] + 405
31  com.apple.AppKit                0x00007fff92375270 -[NSWindow setContentView:] + 376
32  com.apple.AppKit                0x00007fff92a4bcfc -[_NSPopoverWindow setContentView:] + 69
33  com.apple.AppKit                0x00007fff92a40874 -[NSPopover _makePopoverWindowIfNeeded] + 519
34  com.apple.AppKit                0x00007fff92a400fa -[NSPopover showRelativeToRect:ofView:preferredEdge:] + 1031
35  com.apple.dt.dbg.DebuggerUI     0x0000000110d1c562 +[IDEBreakpointEditorPopoverViewController showEditorForBreakpoint:relativeToRect:ofView:] + 193
36  com.apple.dt.dbg.DebuggerUI     0x0000000110d109ee -[DBGBreakpointAnnotationProvider _editBreakpointForAnnotation:inTextSideBarView:] + 213
37  com.apple.CoreFoundation        0x00007fff8b4be70d -[NSObject performSelector:withObject:] + 61
38  com.apple.AppKit                0x00007fff922f9f7e -[NSApplication sendAction:to:from:] + 139
39  com.apple.dt.DVTKit             0x000000010d9190b8 -[DVTApplication sendAction:to:from:] + 318
40  com.apple.dt.IDEKit             0x000000010e113219 -[IDEApplication sendAction:to:from:] + 154
41  com.apple.AppKit                0x00007fff923e6bfb -[NSMenuItem _corePerformAction] + 399
42  com.apple.AppKit                0x00007fff923e6932 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 125
43  com.apple.AppKit                0x00007fff92685dd4 -[NSMenu _internalPerformActionForItemAtIndex:] + 38
44  com.apple.AppKit                0x00007fff92514a91 -[NSCarbonMenuImpl _carbonCommandProcessEvent:handlerCallRef:] + 138
45  com.apple.AppKit                0x00007fff92360e0b NSSLMMenuEventHandler + 339
46  com.apple.HIToolbox             0x00007fff9048b448 DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1263
47  com.apple.HIToolbox             0x00007fff9048aa54 SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 446
48  com.apple.HIToolbox             0x00007fff904a18f3 SendEventToEventTarget + 76
49  com.apple.HIToolbox             0x00007fff904e799d SendHICommandEvent(unsigned int, HICommand const*, unsigned int, unsigned int, unsigned char, void const*, OpaqueEventTargetRef*, OpaqueEventTargetRef*, OpaqueEventRef**) + 398
50  com.apple.HIToolbox             0x00007fff905cf035 SendMenuCommandWithContextAndModifiers + 56
51  com.apple.HIToolbox             0x00007fff906167a9 SendMenuItemSelectedEvent + 253
52  com.apple.HIToolbox             0x00007fff904e0a6b FinishMenuSelection(SelectionData*, MenuResult*, MenuResult*) + 101
53  com.apple.HIToolbox             0x00007fff9060f1e1 PopUpMenuSelectCore(MenuData*, Point, double, Point, unsigned short, unsigned int, Rect const*, unsigned short, unsigned int, Rect const*, Rect const*, __CFString const*, OpaqueMenuRef**, unsigned short*) + 1660
54  com.apple.HIToolbox             0x00007fff9060f4a0 _HandlePopUpMenuSelection7 + 621
55  com.apple.AppKit                0x00007fff9251775d _NSSLMPopUpCarbonMenu3 + 3860
56  com.apple.AppKit                0x00007fff9251575d -[NSCarbonMenuImpl _popUpContextMenu:withEvent:forView:withFont:] + 190
57  com.apple.AppKit                0x00007fff92685c0b -[NSMenu _popUpContextMenu:withEvent:forView:withFont:] + 193
58  com.apple.AppKit                0x00007fff9286d086 -[NSView rightMouseDown:] + 129
59  com.apple.AppKit                0x00007fff9271f32a -[NSRulerView rightMouseDown:] + 561
60  com.apple.AppKit                0x00007fff922c37ac -[NSWindow sendEvent:] + 7430
61  com.apple.AppKit                0x00007fff9225ca55 -[NSApplication sendEvent:] + 5593
62  com.apple.dt.IDEKit             0x000000010e10f2b4 -[IDEApplication sendEvent:] + 369
63  com.apple.AppKit                0x00007fff921f30c6 -[NSApplication run] + 555
64  com.apple.AppKit                0x00007fff9246f244 NSApplicationMain + 867
65  com.apple.dt.Xcode              0x000000010d4e0dc0 0x10d4df000 + 7616

Model: Macmini4,1, BootROM MM41.0042.B03, 2 processors, Intel Core 2 Duo, 2.66 GHz, 4 GB, SMC 1.65f2
Graphics: NVIDIA GeForce 320M, NVIDIA GeForce 320M, PCI, 256 MB
Memory Module: BANK 0/DIMM0, 2 GB, DDR3, 1067 MHz, 0x80CE, 0x4D34373142353637334648302D4346382020
Memory Module: BANK 1/DIMM0, 2 GB, DDR3, 1067 MHz, 0x80CE, 0x4D34373142353637334648302D4346382020
AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x93), Broadcom BCM43xx 1.0 (5.106.198.4.20)
Bluetooth: Version 4.0.5f11, 2 service, 18 devices, 1 incoming serial ports
Network Service: AirPort, AirPort, en0
Serial ATA Device: Hitachi HTS725050A9A362, 500.11 GB
Serial ATA Device: Hitachi HTS725050A9A362, 500.11 GB
USB Device: Keyboard Hub, apple_vendor_id, 0x1006, 0x24100000 / 2
USB Device: Apple Keyboard, apple_vendor_id, 0x024f, 0x24120000 / 3
USB Device: iPhone, apple_vendor_id, 0x12a0, 0x26400000 / 2
USB Device: BRCM2070 Hub, 0x0a5c  (Broadcom Corp.), 0x4500, 0x06600000 / 3
USB Device: Bluetooth USB Host Controller, apple_vendor_id, 0x8218, 0x06630000 / 5
USB Device: IR Receiver, apple_vendor_id, 0x8242, 0x06500000 / 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:18:20.617

您正在运行 Xcode 4.4——如果可能，请更新到 Xcode 4.5。Xcode 4.5 中包含了 C++ 解构修复，并且不再需要之前发布的解决方法（并且很可能会导致类似您遇到的问题。）

# asp.net-mvc - 单元测试 ASP.Net 视图函数

> ID：11995866
> 
> 赞同：2
> 
> 时间：2012-08-16T21:42:46.897
> 
> 标签：asp.net-mvc, unit-testing

在 Razor 中，我可以在如下视图中定义一个函数：

```
@functions{
    internal string Foo(string text)
    {
        // Do Stuff
    }
} 
```

是否可以对这样的功能进行单元测试？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:13:58.610

> 是否可以对这样的功能进行单元测试？

不，但是你让这个函数调用了一个可以进行单元测试的真实函数。

# entity-framework - 实体框架找不到连接字符串

> ID：11995867
> 
> 赞同：1
> 
> 时间：2012-08-16T21:42:56.027
> 
> 标签：entity-framework, entity

我正在构建的网站有问题。我可以毫无问题地让数据显示在屏幕上，但是当我让网站写回数据库时，我收到以下错误：

在应用程序配置文件中找不到名为“MyApplication”的连接字符串。

所以我做了一些搜索，发现如果我改变它应该会有所帮助：

```
 public TP90Entities()
        : base("name=TP90Entities")
    {
    } 
```

对此：

```
 public TP90Entities()
        : base("TP90Entities")
    {
    } 
```

如果我这样做，我会收到以下错误：

> 如果在 Code First 模式下使用，使用用于 Database First 和 Model First 开发的 T4 模板生成的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码。

我已经多次重建数据连接，试图遵循数据库优先方法。此外，我已将项目升级到 Entity Framework 5。有人能告诉我我做错了什么吗？

# css - 溢出-X ，根本不工作？

> ID：11995868
> 
> 赞同：0
> 
> 时间：2012-08-16T21:43:07.290
> 
> 标签：css

我正在做这个项目：http: [//jimenarguelles.mx](http://jimenarguelles.mx)。溢出有一个奇怪的情况。

请水平滚动网站，这根本不应该发生。

`class="sidebar"`是_`position:absolute` `right:0`

你怎么看？我需要重新构建我的 css 或 html 结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:51:08.427

尝试将其添加到“body”中：

```
body {
    overflow-x:hidden;
    position:relative;
} 
```

# php - 无法在虚拟机上运行 magento

> ID：11995869
> 
> 赞同：1
> 
> 时间：2012-08-16T21:43:12.513
> 
> 标签：php, mysql, magento-1.6, mysql5

我正在设置一个虚拟机来处理 magento。

我正确设置了网络服务器（apache2）、PHP、mysql，就像我在其他服务器上做的一样，我让 magento 工作，但这次它不想运行......

我得到的只是这个错误：

```
Notice: Trying to get property of non-object in /home/lex/code/site/app/code/core/Mage/Core/Model/Config.php on line 1229 Notice: Trying to get property of non-object in /home/lex/code/site/app/code/core/Mage/Core/Model/Config.php on line 1229 Notice: Trying to get property of non-object in /home/lex/code/site/app/code/core/Mage/Core/Model/Config.php on line 1229 Notice: Trying to get property of non-object in /home/lex/code/site/app/code/core/Mage/Core/Model/Config.php on line 1241 Fatal error: Call to a member function getIdFieldName() on a non-object in /home/lex/code/site/app/code/core/Mage/Core/Model/Abstract.php on line 151 
```

不幸的是，我无法使用网上找到的建议来修复它（更改文件权限等）。这些文件位于我的本地目录下，但我将组所有者设置为 www-data。

我正在运行 Ubuntu 12.04 桌面和 Magento 1.6。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:31:27.900

是的，我终于明白了。这是一个缺少的配置...

也许 magento 团队的人应该预料到一切都会失败并打印一些有用的信息......至少引导应用程序。

我想我会为此做一些补丁......

# php - 得到之间的话标签

> ID：11995871
> 
> 赞同：1
> 
> 时间：2012-08-16T21:43:18.583
> 
> 标签：php, html

如果我有一个像这样的 html 行：

```
<a href="your.link-and-stuf.php" title="here your page title and stuf">this word</a> 
```

我希望用 php 摆脱“这个词”。我尝试使用 str_replace() 但我没有走远。因为链接改变了。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:46:19.803

一个简单的解决方案是使用内置函数`strip_tags`，复杂的解决方案是使用正则表达式

**剥离标签实施**

```
$str = '<a href="your.link-and-stuf.php" title="here your page title and stuf">this word</a>';
$strip = strip_tags($str);

echo $strip; // this word 
```

**正则表达式匹配**

```
$str = '<a href="your.link-and-stuf.php" title="here your page title and stuf">this word</a>';
$strip = preg_replace("/<\\/?a(\\s+.*?>|>)/", "", $str); // removes only a tags

echo $strip; // this word 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:48:32.293

我会使用[simplehtmldom 之](http://simplehtmldom.sourceforge.net/)类的库。

代码可能类似于：

```
$html = str_get_html('<a href="your.link-and-stuf.php" title="here your page title and stuf">this word</a>');
$text = $html->find('a', 0)->innerText; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T23:03:26.303

我会使用[DOMDocument](http://ua2.php.net/manual/en/domdocument.construct.php)

```
$doc = new DOMDocument();
$doc->loadHTML('<a href="your.link-and-stuf.php" title="here your page title and stuf">this word</a>');
echo $doc->getElementsByTagName('a')->item(0)->nodeValue; 
```

# scala - 使用 Play 框架在 Scala 中编写我的 API。实现 OAuth 的最简单方法是什么？

> ID：11995879
> 
> 赞同：3
> 
> 时间：2012-08-16T21:43:47.267
> 
> 标签：scala, oauth, playframework

我正在用 Scala 编写 REST API。这是一次很好的体验，但现在我想实现用户注册部分。行业标准是 OAuth 2.0，我想实现一个更简单的 OAuth（1 或 2）版本。现在，我不知道实现它的最简单方法是什么？我是否必须自己编写整个内容，或者是否有任何库可以让我的生活更轻松？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:53:17.053

我尝试将 socialauth 集成到我的应用程序中，这非常简单。您可以按照[http://code.google.com/p/socialauth/wiki/GettingStarted#Step_3._Implementation](http://code.google.com/p/socialauth/wiki/GettingStarted#Step_3._Implementation)上的指南进行操作。

它为您处理所有细节并支持所有“通常的提供者”。

我必须对 play 2.0 和 scala 进行两次改编：

1.  将 SocialAuthManager 存储在播放缓存中，因为我们没有服务器会话
2.  SocialAuthUtil.getRequestParametersMap 需要一个 servlet 请求来构造 paramsMap。我在回调操作中使用了以下代码：

    req.queryString.map { p => p._1 -> p._2.head }.asJava

    （.asJava 需要“import scala.collection.JavaConversions._”）

# google-analytics - Google Analytics - 忽略页面上的流失

> ID：11995881
> 
> 赞同：0
> 
> 时间：2012-08-16T21:44:08.070
> 
> 标签：google-analytics, statistics

当用户只访问网站上的一个页面，并且有一段时间没有再次访问时，它被认为是“掉线”。我的网站是一个网络游戏，很多用户在访问该网站时只访问“玩”页面，该页面被标记为“下线”。这不是真的，因为他们实际上玩了 30 分钟以上的游戏，而且这并不是一个下降。

除了强迫人们通过另一个页面（创建 2 个请求）进入游戏页面之外，我怎样才能在页面上忽略掉线而不弄乱其他统计信息（如浏览量）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:15:51.183

Google Analytics（分析）博客上最近的一篇文章讨论了为长时间停留在单个页面上的访问者[跟踪调整后的跳出率：在 Google Analytics](http://analytics.blogspot.com/2012/07/tracking-adjusted-bounce-rate-in-google.html)中跟踪调整后的跳出率。听起来在您的情况下，跳出率和下降率是相关的。

解决方案是在经过一段时间后进行跟踪事件调用，例如：

```
setTimeout(function(){_gaq.push(['_trackEvent', 'timer', 'in play')}, 60000); 
```

在您的情况下，我很想继续定期进行事件跟踪调用，包括跟踪会话时间的 opt-value 参数——这将允许您跟踪 GA 播放时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:03:40.113

我假设您的意思是“访客流量”报告中显示的下降，我认为这与退出有关。如果您在访问者由于长时间停留在同一页面上而“退出”您的网站时遇到问题，那么听起来您需要延长会话超时时间。

Google Analytics 默认会话长度为 30 分钟，可以在[此处](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSessionCookieTimeout)找到更改说明。

# wpf - Process.Start 就像一个没有菜单栏的 javascript 弹出窗口？

> ID：11995883
> 
> 赞同：0
> 
> 时间：2012-08-16T21:44:27.443
> 
> 标签：wpf

我正在使用 Process.Start() 在我的 WPF 应用程序中弹出一个网页。这样它会在我的默认浏览器中打开。

在 HTML/Javascript 中，您可以弹出窗口并且窗口不会有菜单栏、滚动条、工具栏等。是否可以使用 Process.Start() 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:32:10.417

创建一个包含对象的`ChildWindow`（来自扩展工具包，或只是另一个标准 WPF `Window`）`WebBrowser`怎么样？

您将轻松摆脱边框、滚动条...除了页面之外的任何控件（您也可以在窗口中轻松拉伸它！）...

```
<Window x:Class="TestWpf.TestBrowser"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TestBrowser">
    <Grid>
        <WebBrowser Source="http://www.ribo.it/"
                    HorizontalAlignment="Center"
                    Width="300" Height="300" />
    </Grid>
</Window> 
```

...然后像往常一样显示您的浏览器窗口：

```
TestBrowser window = new TestBrowser();
window.Show(); 
```

# c# - 添加自定义响应头；当服务调用引发异常时，标头会丢失

> ID：11995885
> 
> 赞同：3
> 
> 时间：2012-08-16T21:44:34.260
> 
> 标签：c#, asp.net-mvc-3

我的 global.asax.cs 中有以下代码，用于为某些域启用跨域 AJAX 请求：

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        string whiteList =
            System.Configuration.ConfigurationManager.AppSettings["AjaxCrossDomainWhitelist"];

        if (!string.IsNullOrWhiteSpace(whiteList))
        {

            string[] whiteListDomains = whiteList.Split(';');

            string origin = Request.Headers["origin"];

            if (!string.IsNullOrEmpty(origin))
            {
                origin = origin.ToLower();

                foreach (string domain in whiteListDomains)
                {
                    if (domain.ToLower() == origin)
                    {
                        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", domain);
                        break;
                    }
                }
            }

            if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
            {

                //These headers are handling the "pre-flight" OPTIONS call sent by the browser
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
                //Access Control policy has a lifetime of one hour
                HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "3600");
                HttpContext.Current.Response.End();
            }
        }

    } 
```

当网站上调用的 Web 服务之一成功返回时，“Access-Control-Allow-Origin”标头将成功发送，一切正常。但是，当服务调用导致异常时；“Access-Control-Allow-Origin”标头仍添加到 HttpContext.Response；我通过捕获 Application_EndRequest 并检查 Response.Headers 集合确认了这一点。但是，当我在 Firebug、Chrome 开发工具或 Charles 中检查发送的响应时，没有发送“Access-Control-Allow-Origin”标头，我不知道为什么。

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T16:07:44.090

创建一个 HTTP 模块并将其注册到您的 web.config 中，而不是在 global.asax 中执行此操作[请参阅 msdn 链接](http://msdn.microsoft.com/en-us/library/ms227673%28v=vs.100%29.aspx)

# javascript - jQuery 移动。PhoneGap，动态模块加载

> ID：11995888
> 
> 赞同：1
> 
> 时间：2012-08-16T21:45:00.503
> 
> 标签：javascript, jquery, mobile, cordova, requirejs

我正在创建一个使用 jQuery Mobile 的 PhoneGap 应用程序，我目前在使用 $.getScript(); 动态加载 javascript 时遇到问题；

以下失败：

```
$(document).on('pageinit','#index',function() {
               $.getScript("/assets/js/alert.js",function(data, textStatus, jqxhr){});
}); 
```

但是......当我通过 HTTP 调用它时......工作：

```
$(document).on('pageinit','#index',function() {
               $.getScript("http://testdomain.com/assets/js/alert.js",function(data, textStatus, jqxhr){});
}); 
```

Google Groups 上的以下线程是相关的，但事实证明对我来说毫无结果： [https ://groups.google.com/forum/?fromgroups#!topic/phonegap/LkIN97HYX5k](https://groups.google.com/forum/?fromgroups#!topic/phonegap/LkIN97HYX5k)

理想情况下，当 jQuery mobile 引入新页面时，我需要延迟加载某些脚本文件。对于任何熟悉的人来说，新页面都不需要页眉或页脚，因为它们是动态生成的：

[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

> 构建 jQuery Mobile 站点时最简单的方法是在每个页面的头部引用相同的样式表和脚本集。如果您需要为特定页面加载特定脚本或样式，我们建议将逻辑绑定到 pageinit 事件（详细信息如下）以在创建特定页面时运行必要的代码（可以由其 id 属性或数字确定其他方式）。如果页面直接加载或通过 Ajax 拉入并显示，遵循这种方法将确保代码执行。

我想知道的是，首先，是否有其他人以这种方式遇到过 jQuery 的 getScript 问题，或者是否有解决方法。其次，关于动态 javascript 加载器的建议，它们将在 PhoneGap 和 jQuery mobile 的范围内工作。通过阅读，Require.js 似乎走在正确的道路上，但并不完全兼容 PhoneGap。

希望我说得通。

# web-services - 无法使用 simplexml_load_string / php 读取 web 服务

> ID：11995891
> 
> 赞同：0
> 
> 时间：2012-08-16T21:45:13.133
> 
> 标签：web-services, simplexml

我在尝试使用 php 使用 web 服务时遇到了一些问题。

当使用 curl 获取 xml 时，第一部分似乎工作正常。

但是当尝试使用 simplexml_load_string 时，我收到以下错误：

*“致命错误：在第 35 行的 /home/sites/site1/web/DataDriver/pruebas/dev_lee_ws2.php 中读取 XML 字符串时出错”*

代码编写如下：

```
$sGLN = "7505000010064";
$sUsuario = "DISTRIBU";
$sContrasena = "DISTRIBU";
$sGLNPublicador = "";
$sGTIN = "7500112045058";

$url = "http://demo.syncfonia.com.mx/ws/wsexportaproducto/Productos.asmx/ObtieneProducto?GLN=$sGLN&Usuario=$sUsuario&Contrasena=$sContrasena&GLNPublicador=$sGLNPublicador&GTIN=$sGTIN";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

echo $result = curl_exec($ch);

curl_close($ch);

if(!$xmlobj=simplexml_load_string($result)){
    echo "<br>";
    trigger_error('Error reading XML string',E_USER_ERROR);
}
echo 'Displaying email addresses of XML string...<br />';
foreach($xmlobj as $Exportacion){
    echo 'Values of email nodes: '.$Exportacion->refpaismercado.'<br />';
} 
```

这里也是xml的结构：

```
<DataSet xmlns="http://tempuri.org/wsexportaproducto/Productos">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="Exportacion">
<xs:complexType>
<xs:sequence>
<xs:element name="gtin" type="xs:string" minOccurs="0"/>
<xs:element name="gtinreemplazado" type="xs:string" minOccurs="0"/>
<xs:element name="refidcateglobal" type="xs:string" minOccurs="0"/>
<xs:element name="refidcatelocal" type="xs:decimal" minOccurs="0"/>
<xs:element name="gln" type="xs:string" minOccurs="0"/>
<xs:element name="glnfabricante" type="xs:string" minOccurs="0"/>
<xs:element name="nombrefabricante" type="xs:string" minOccurs="0"/>
<xs:element name="refpaismercado" type="xs:string" minOccurs="0"/>
<xs:element name="iniciovigenciadn" type="xs:dateTime" minOccurs="0"/>
<xs:element name="finvigenciadn" type="xs:dateTime" minOccurs="0"/>
<xs:element name="vida" type="xs:decimal" minOccurs="0"/>
<xs:element name="nomproducto" type="xs:string" minOccurs="0"/>
<xs:element name="marca" type="xs:string" minOccurs="0"/>
<xs:element name="descproducto" type="xs:string" minOccurs="0"/>
<xs:element name="descripcioncorta" type="xs:string" minOccurs="0"/>
<xs:element name="profundo" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidprofundo" type="xs:string" minOccurs="0"/>
<xs:element name="alto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidalto" type="xs:string" minOccurs="0"/>
<xs:element name="ancho" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidancho" type="xs:string" minOccurs="0"/>
<xs:element name="pesobruto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesobruto" type="xs:string" minOccurs="0"/>
<xs:element name="pesoempaque" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesoempaque" type="xs:string" minOccurs="0"/>
<xs:element name="contenidoneto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidcontenidoneto" type="xs:string" minOccurs="0"/>
<xs:element name="escontenidovariable" type="xs:boolean" minOccurs="0"/>
<xs:element name="refembalaje" type="xs:string" minOccurs="0"/>
<xs:element name="esretornable" type="xs:boolean" minOccurs="0"/>
<xs:element name="factorestiba" type="xs:decimal" minOccurs="0"/>
<xs:element name="esunidadminima" type="xs:boolean" minOccurs="0"/>
<xs:element name="contenidos" type="xs:string" minOccurs="0"/>
<xs:element name="refpaisorigen" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcolorcodigo" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcoloragencia" type="xs:string" minOccurs="0"/>
<xs:element name="variedadcolor" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtalleagencia" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtallecodigo" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtalle" type="xs:string" minOccurs="0"/>
<xs:element name="esunidadordenable" type="xs:boolean" minOccurs="0"/>
<xs:element name="cantminimapedir" type="xs:decimal" minOccurs="0"/>
<xs:element name="multiplopedir" type="xs:decimal" minOccurs="0"/>
<xs:element name="esfacturable" type="xs:boolean" minOccurs="0"/>
<xs:element name="esunidadembarque" type="xs:boolean" minOccurs="0"/>
<xs:element name="nrocapasartcomercial" type="xs:decimal" minOccurs="0"/>
<xs:element name="nroartcomercialesporcapa" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidadesporpallet" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidporcapa" type="xs:decimal" minOccurs="0"/>
<xs:element name="nrodecapas" type="xs:decimal" minOccurs="0"/>
<xs:element name="submarca" type="xs:string" minOccurs="0"/>
<xs:element name="variedadtipo" type="xs:string" minOccurs="0"/>
<xs:element name="oferta" type="xs:boolean" minOccurs="0"/>
<xs:element name="dscompania" type="xs:string" minOccurs="0"/>
<xs:element name="nombregen" type="xs:string" minOccurs="0"/>
<xs:element name="variedadsabor" type="xs:string" minOccurs="0"/>
<xs:element name="continentes" type="xs:string" minOccurs="0"/>
<xs:element name="reftiponivel" type="xs:string" minOccurs="0"/>
<xs:element name="esunidadconsumo" type="xs:boolean" minOccurs="0"/>
<xs:element name="pesoneto" type="xs:decimal" minOccurs="0"/>
<xs:element name="unidpesoneto" type="xs:string" minOccurs="0"/>
<xs:element name="cantidadtotalcontenida" type="xs:decimal" minOccurs="0"/>
<xs:element name="reftipogtin" type="xs:string" minOccurs="0"/>
<xs:element name="esprivado" type="xs:boolean" minOccurs="0"/>
<xs:element name="statussecodat" type="xs:string" minOccurs="0"/>
<xs:element name="accion" type="xs:int" minOccurs="0"/>
<xs:element name="fechaaccion" type="xs:int" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<NewDataSet xmlns="">
<Exportacion diffgr:id="Exportacion1" msdata:rowOrder="0">
<gtin>07500112045058</gtin>
<refidcateglobal>10005730</refidcateglobal>
<gln>7505000010064</gln>
<refpaismercado>484</refpaismercado>
<iniciovigenciadn>2012-08-09T00:00:00-05:00</iniciovigenciadn>
<finvigenciadn>4999-12-31T23:59:59-06:00</finvigenciadn>
<marca>PINTACOLOR</marca>
<descproducto>PINTACOLOR BLANCO</descproducto>
<descripcioncorta>PINTURA PINTACOLOR 18 L</descripcioncorta>
<profundo>40.000000000000000</profundo>
<unidprofundo>CM</unidprofundo>
<alto>60.000000000000000</alto>
<unidalto>CM</unidalto>
<ancho>40.000000000000000</ancho>
<unidancho>CM</unidancho>
<pesobruto>26.200000000000000</pesobruto>
<unidpesobruto>KG</unidpesobruto>
<unidpesoempaque>KG</unidpesoempaque>
<escontenidovariable>false</escontenidovariable>
<esretornable>false</esretornable>
<esunidadminima>true</esunidadminima>
<contenidos/>
<esunidadordenable>false</esunidadordenable>
<esfacturable>true</esfacturable>
<esunidadembarque>false</esunidadembarque>
<oferta>false</oferta>
<dscompania>DISTRIBUIDOR</dscompania>
<nombregen>PINTURA</nombregen>
<continentes/>
<reftiponivel>EA</reftiponivel>
<esunidadconsumo>false</esunidadconsumo>
<esprivado>false</esprivado>
<statussecodat>2</statussecodat>
</Exportacion>
</NewDataSet>
</diffgr:diffgram>
</DataSet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-17T16:04:14.107

在解析之前，我可以通过用冒号替换`:`他名字中的所有属性来解决这个问题，比如`diffgr:id`等等`simplexml_load_string()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:17:34.627

尝试删除前 8 行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body> 
```

从`$result`字符串

# linux - cd 后 umask 设置更改

> ID：11995894
> 
> 赞同：5
> 
> 时间：2012-08-16T21:45:37.113
> 
> 标签：linux, redhat, umask

我有一些奇怪的事情要报告。在我新配置的 RHEL5 服务器上，我的 shell 设置为 /bin/bash 我在 .bashrc 中将 umask 设置为 002。

当我第一次登录时，umask 似乎工作正常：

```
$ touch a
$ ls -l a
-rw-rw-r-- etc..... 
```

如果我创建另一个文件它可以工作：

```
$ touch b
$ ls -l b
-rw-rw-r-- etc..... 
```

但是...如果我更改目录（到任何目录），那么 umask 会被设置回 022：

```
$ cd /var/www/whatever
$ touch c
$ ls -l c
-rw-r--r-- etc..... 
```

完全奇怪。

有人见过这样的吗？他们能想到要检查的东西吗？

为什么 cd'ing 后 umask 设置会改变？

谢谢，

-查理

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:22:08.507

感谢 Barry Brown 的上述评论 - 我为这个问题（在 OSX 上，而不是 Linux 上）而烦恼，而 rvm 确实是我的罪魁祸首。检查您的 .profile、.bash_profile 等是否有这样的行：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

将其注释掉，重新启动您的外壳，这应该可以解决问题。我不知道 rvm 如此粗鲁和侵入性。最好只在需要时才加载它，而不是为每个 shell 加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T02:12:41.533

简短的回答是：umask 有四位数字，不会随意更改，但 /etc/profile 和 fiends 会默认设置为 022；

**更新**
我有点忘乎所以，忘了正确回答你的问题：

检查安装在您更改到的文件夹上的分区（如果有）没有设置 umask。（只需输入**mount**）

长答案是：

**man chmod** §6：数字模式是从一​​到四个八进制数字 (0-7)，通过将具有值 4、2 和 1 的位相加得出。省略的数字假定为前导零。第一个数字选择设置用户 ID (4) 和设置组 ID (2) 以及限制删除或粘性 (1) 属性。第二个数字选择拥有文件的用户的权限：读（4）、写（2）和执行（1）；第三个选择文件组中其他用户的权限，具有相同的值；第四个用于不在文件组中的其他用户，具有相同的值。

GNU coreutils 8.14 2011 年 10 月

* * *

我记得几年前多次阅读这个手册页，在我设置表格之前从未完全理解所有这些意味着什么。由于我丢失了我的参考表，我将在这里重新创建它。由于我不喜欢符号表示法，因为它输入起来更麻烦（例如 chmod u+x），我将省略它的任何提及。

* * *

# **chmod**和**umask**的解读

 **可能的设置： 4：读取 2：写入 1：执行

## 每个数字的可能值以及示例

```
域 setuid 用户组 world
数字 1 2 3 4
值 0-7 0-7 0-7 0-7

```

花括号 {} 中的“可能设置”值可以加在一起以产生有效的权限位（数字）。

**常见示例**

*0755*：用户可以进入一个文件夹并在该文件夹中写入（删除）文件如果这个掩码设置在一个文件上，用户可以执行该文件（即./filenme.bin）。最后两位数字表示文件所属的组和世界（系统上的任何其他人）也可以执行文件。应用于目录意味着组和世界可以进入该目录。

*0644* : 用户可以读写文件，但不能执行。组和世界只能读取文件。应用于文件夹，此掩码将阻止任何人进入该目录。

*0600* : 只有所有者可以使用此掩码读写文件

*0700* : 只有文件夹的所有者可以使用此掩码进入、读取和写入文件夹的内容。

*0000*：用于“隐藏”文件或（向您自己）发出不应使用文件或文件夹的信号。

**无意义的面具**

*0200* : 如果用户可以写入文件，那么他们也可以更改文件的 umask。

**危险的面具**

*0666* : 每个人都可以使用此掩码读取、写入和删除文件

*0777*：文件夹也一样。如果二进制文件设置为*777*，那么任何人都可以将任何他们想要的内容放入该文件并运行它，即使它位于系统范围的二进制目录中，例如 /usr/bin。

*4755*：超级用户（root）拥有的二进制文件将以超级用户权限运行。这其中的含义应该很清楚。也许，用 4755 直观地设置解释脚本将不起作用，因为脚本（例如 bash 脚本）仍然由 /bin/bash 运行。存储脚本的文本文件并不是真正的可执行文件。

在所有上述示例中，为方便起见，可以省略前导零。

## 将 umask 转换为 chmod

要设置正确的 umask，只需从“最大掩码”中减去不需要的权限，文件夹为 0777，文件为 666。

要强制 shell 创建具有默认权限 644 的文件，请将 umask 设置为 0022。对于文件夹，典型的（所需）umask 可能是 755，可以通过将 umask 设置为 0022 来实现。

```
0666 0777
-0022 -0022
 ____ ____
 0644 0755

```

* * *

相关链接： [https ://unix.stackexchange.com/questions/364/allow-setuid-on-shell-scripts](https://unix.stackexchange.com/questions/364/allow-setuid-on-shell-scripts)**

# solr - 如何通过 DIH 实现字段级索引时间提升？

> ID：11995896
> 
> 赞同：1
> 
> 时间：2012-08-16T21:45:38.103
> 
> 标签：solr, lucene

我正在尝试通过 DIH 实现索引时间提升。但我想在字段级别而不是文档级别进行提升。前任：

考虑文档中有 2 个字段：LastUpdatedBy、fullName。索引两个字段后，我将两个字段中的数据复制到默认搜索字段中。现在，当在默认搜索字段上进行搜索时，我希望 fullName 获得比 LastUpdatedBy 更高的优先级，即使两者都可能具有搜索关键字。

注意：我之前尝试过使用 dismax 处理程序进行运行时提升，想尝试使用 DIH 进行索引时间提升。

谢谢！！！

谢谢，BB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:19:56.407

通过向 DIH 添加[特殊命令](http://wiki.apache.org/solr/DataImportHandler#Special_Commands)，您可以增强文档。但当时没有实现 DIH 的场增强。

[您可以在此处](https://svn.apache.org/repos/asf/lucene/dev/trunk/solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/DocBuilder.java)查看最新的源代码。

# java - Java我只想在变量更改时重新绘制

> ID：11995898
> 
> 赞同：1
> 
> 时间：2012-08-16T21:45:45.227
> 
> 标签：java, swing, repaint, paintcomponent

我有一个方法可以写出还有多少猜测，我希望每次人们错过字母或单词时都重新绘制它，但是它一直在重新绘制自己，这会导致整个程序不断闪烁。

我的方法如下所示：

```
public void repaintWord(Graphics g){
    g.SetColor(Color.RED);
    g.drawString("You have " + getN() + " guesses left", 400, 50);
    repaint();
} 
```

当 getN() 更改其值时，如何使其仅重绘一次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:48:42.297

存储上次退出时间的值`getN()`并`repaintWord()`与`getN()`入口比较：

```
private int lastN = ??; /* Value for max guesses. */

public void repaintWord(Graphics g)
{
    if (lastN != getN())
    {
        lastN = getN();
        g.SetColor(Color.RED);
        g.drawString("You have " + lastN + " guesses left", 400, 50);
        repaint();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T21:49:29.750

存储`lastGuessCount`为成员变量：

猜错*了*：

```
lastGuessCount--; 
```

然后使用：

```
if (getN() != lastGuessCount) {
    repaintWord(g);
} 
```

# java - 用纯代码设置MyButton的代码，XML就是This

> ID：11995905
> 
> 赞同：0
> 
> 时间：2012-08-16T21:46:40.460
> 
> 标签：java, android, android-layout, user-interface

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/ImageButton3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawablePadding="-15sp"
    android:drawableTop="@drawable/ic_launcher"
    android:paddingTop="32sp"
    android:text="this is text"
    android:textColor="@color/Black" >
</Button> 
```

这是我的 XML 代码，我在动态创建它时遇到了麻烦，我只需要知道创建这个按钮的代码是什么样的。提前致谢。

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        for (int i = 0; i < 10; i++) {

            Button btn = new Button(this);
            btn.setLayoutParams(params);
            btn.setPadding(0, 32, 0, 0);
            btn.setText("MyButton");
            btn.setTextColor(color.Green);
            Drawable image = Drawable.createFromPath("@drawable/ic_launcher"); //
            // btn.setBackgroundDrawable(image);
            btn.setCompoundDrawables(null, image, null, null);
            btn.setCompoundDrawablePadding(15);
            // btn.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);

            ObjectLayout.addView(btn);
        } 
```

这就是我拥有的，拥有的，但仍然不一样 不知道为什么我不能让它填补相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:58:49.717

如果要`Drawable`在.`Drawable``Drawable`

并且`setPadding(...)`使用像素而不是`sp`.

```
 Button myButton = new Button(/* your context, probably "this" */);
    myButton.setLayoutParams(
            new LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    myButton.setPadding(0, 32, 0, 0);
    myButton.setText("this is a test");
    myButton.setTextColor(android.R.color.black);
    myButton.setBackgroundResource(R.id.ic_launcher); 
```

# linux - 文件上传尝试时 error_log 上的 MaxRequestLen 错误

> ID：11995906
> 
> 赞同：0
> 
> 时间：2012-08-16T21:46:42.870
> 
> 标签：linux, apache, centos, mod-fcgid, fcgid

我在 Media Temple 的 apache 服务器上使用 PHP/MySQL 设置。

当尝试通过客户的管理部分上传大文件时（通常会有 100MB 的文件上传），我收到此错误：

```
[Thu Aug 16 14:30:38 2012] [warn] [client 64.46.17.53] mod_fcgid: HTTP request length 16785212 (so far) exceeds MaxRequestLen (16777216) 
```

在 fcgid.conf 文件中，我有以下行：

```
FcgidMaxRequestLen 1073741824600 
```

我也尝试将其更改为

```
MaxRequestLen 1073741824600 
```

无论如何，整个文件现在看起来像这样，当我重新启动 apache 时，配置中没有错误。

```
# This is the Apache server configuration file for providing FastCGI support
# via mod_fcgid
#
# Documentation is available at http://fastcgi.coremail.cn/doc.htm

LoadModule fcgid_module modules/mod_fcgid.so

<IfModule mod_fcgid.c>

<IfModule !mod_fastcgi.c>
    AddHandler fcgid-script fcg fcgi fpl
</IfModule>

  FcgidIPCDir /var/run/mod_fcgid/sock
  FcgidProcessTableFile /var/run/mod_fcgid/fcgid_shm

  FcgidIdleTimeout 600
  FcgidMaxRequestLen 1073741824600
  FcgidBusyTimeout 600
  FcgidProcessLifeTime 30
  MaxRequestLen 1073741824600
  FcgidMaxProcesses 20
  FcgidMaxProcessesPerClass 8
  FcgidMinProcessesPerClass 0
  FcgidConnectTimeout 600
  FcgidIOTimeout 600
  FcgidInitialEnv RAILS_ENV production
  FcgidIdleScanInterval 10

</IfModule> 
```

我还需要覆盖哪些其他值？我有 SSH root 访问权限，尽管对命令行输入很不适应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:40:47.283

我猜你的价值太高了。检查[MediaTemple Wiki 以了解该问题](http://wiki.mediatemple.net/w/%28dv%29_4.0%3aResolve_FastCGI_issues#.27HTTP_error.27_When_Uploading_Files)，它为您提供 1Gb 的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:46:10.040

尽管 PHP 不在支持范围内，但我可以为您提供一篇关于编辑 PHP 的 (mt) 知识库文章[http://kb.mediatemple.net/questions/137](http://kb.mediatemple.net/questions/137)。我希望这会给你一些帮助。但是，我们总是在这里回答问题并指导您正确的方向。如果您有任何其他问题，请随时与我们联系。我们通过聊天、电话和 Twitter 全天候 24/7 提供服务。祝你有美好的一天！

Kat D. (mt) Media Temple 社交媒体团队

# data-binding - Infragistics WebHierarchicalDataGrid 中的 ContainerGridDataBinding

> ID：11995908
> 
> 赞同：0
> 
> 时间：2012-08-16T21:46:49.470
> 
> 标签：data-binding, infragistics

我正在尝试使用 Infragistics WebHierarchicalDataGrid 控件中的自定义数据绑定来实现分页。当用户在 WHDG 寻呼机中单击页面链接时，期望的行为是从后端检索一页数据（我已经有一个 SQL Server SP 可以执行此操作）并将其绑定到 WHDG 以一次显示一页。

我相信使用“ContainerGridDataBinding”事件是这样做的方法，但无法设置工作代码。非常感谢任何有关如何执行此操作的帮助或代码示例。

如果 WHDG 的子乐队继续存在同样的行为，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:05:41.243

一旦您有了 SQL 请求/选择命令，您将获得一个页面，您将需要创建一个自定义寻呼机来执行此操作。然后在与您在寻呼机中的按钮/下拉菜单或其他控件相关的事件中，您将调用您的 SQL 命令。请参阅以下内容了解如何为 WebDataGrid 实现自定义寻呼机：

[http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=WebDataGrid_Using_Custom_Paging_Template.html](http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=WebDataGrid_Using_Custom_Paging_Template.html)

通过代码自定义寻呼机： [http ://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=WebDataGrid_Using_Custom_Paging_Template_in_Code.html](http://help.infragistics.com/NetAdvantage/ASPNET/2012.1/CLR4.0/?page=WebDataGrid_Using_Custom_Paging_Template_in_Code.html)

为 WebHierarchicalDataGrid 执行此操作与父带区相同。对于孩子，你会想要为那个乐队而不是父乐队的行为做这件事。

现在，如果您不想在寻呼机中使用按钮和/或下拉菜单，而是想要链接（1、2、3、4 等），可以通过在代码中执行以下操作来完成：

```
 private class CustomItemTemplate : ITemplate
    {
        #region ITemplate Members

        public void InstantiateIn(Control container)
        {
            for (int i = 0; i < 3; i++)
            {
                LiteralControl link = new LiteralControl();
                //class for current page: igg_PageCurrent
                //class for other pages: igg_PageLink
                link.Text = "<span class='igg_PageLink' idx='" + i.ToString() + "'>" + (i+1).ToString() + "</span>";

                container.Controls.Add(link);
            }
        }

        #endregion
    }

    protected void Page_PreInit(object sender, EventArgs e)
    {
        whdg1.Behaviors.Paging.PagerTemplate = new CustomItemTemplate();
    } 
```

但真正的问题是，以这种方式从数据库中获取数据时，您只能为一页获取足够的数据，因此网格不知道数据库中有多少页。所以你要么需要知道如何找到它，要么只知道它。这也将使子带的实现更加困难，因为您需要知道每一行可以扩展多少子记录或记录页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:56:27.860

结果比我想象的要容易得多。在每个 PageIndexChanged 事件上（甚至是由自定义寻呼机引起的，它可以是自定义 UserControl）我将 WHDG 绑定到一个假的空数据集，导致 ContainerGridDataBinding 触发，其中仅从数据库中检索当前页面的数据

# javascript - 需要一个链接去一个页面然后快速返回到当前页面

> ID：11995914
> 
> 赞同：0
> 
> 时间：2012-08-16T21:47:07.543
> 
> 标签：javascript, href

我在一个页面上，想提供一个链接，该链接将转到第 2 页，然后快速返回当前页面（第 1 页）（用户需要转到第 2 页进行验证，然后返回到当前页面，即第 1 页） .

```
<script language=”javascript” type=”text/javascript”&gt;  

window.location.href="https://www.sitename.com/page2/?backurl="+window.location.replace="https://www.sitename.com/page1";  

</script> 

<p><a href="https://www.page2/">Go to Page 2 to Refresh and come back</a></p> 
```

这不起作用，它停留在第 2 页，并且不会自动返回到第 1 页。我该如何以这种方式进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:51:31.637

Javascript*只会*在它被初始化的上下文中运行。换句话说，在第 1 页上运行的脚本将在第 2 页加载后立即停止运行。不同的上下文。

您需要在第 2 页上添加一个脚本，该脚本执行类似的重定向回第 1 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:51:43.073

您不能仅使用 javascript 来做到这一点。我会考虑从第 1 页向第 2 页发出 AJAX 请求。

# php - 不是 var_dump() 也不是 print_r() 将显示可读信息....但同样令人困惑的输出。为什么？

> ID：11995919
> 
> 赞同：11
> 
> 时间：2012-08-16T21:47:25.810
> 
> 标签：php, variables

我在drupal节点中有一些评论，并尝试了

> var_dump()

和

> 打印_r()

看看他们之间的区别。我想看看 $comment 对象的 $content 变量里面有什么。

我都试过了，我得到的是相同的输出！

```
array(5) { ["#printed"]=> bool(true) ["comment_body"]=> array(18) { ["#theme"]=> string(5) "field" ["#weight"]=> int(0) ["#title"]=> string(10) "Comentario" ["#access"]=> bool(true) ["#label_display"]=> string(6) "hidden" ["#view_mode"]=> string(4) "full" ["#language"]=> string(3) "und" ["#field_name"]=> string(12) "comment_body" ["#field_type"]=> string(9) "text_long" ["#field_translatable"]=> string(1) "0" ["#entity_type"]=> string(7) "comment" ["#bundle"]=> string(21) "comment_node_noticias" ["#object"]=> object(stdClass)#105 (25) { ["cid"]=> string(5) "37616" ["pid"]=> string(1) "0" ["nid"]=> string(4) "4355" ["uid"]=> string(4) "1411" ["subject"]=> string(30) "Esperemos que así sea, ya que" ["hostname"]=> string(15) "190.246.225.229" ["created"]=> string(10) "1307259450" ["changed"]=> string(10) "1307259450" ["status"]=> string(1) "1" ["thread"]=> string(3) "01/" ["name"]=> string(11) "dominguezpm" ["mail"]=> string(0) "" ["homepage"]=> string(0) "" ["language"]=> string(0) "" ["node_type"]=> string(21) "comment_node_noticias" ["registered_name"]=> string(11) "dominguezpm" ["u_uid"]=> string(4) "1411" ["signature"]=> string(0) "" ["signature_format"]=> NULL ["picture"]=> string(1) "0" ["new"]=> int(0) ["comment_body"]=> array(1) { ["und"]=> array(1) { [0]=> array(3) { ["value"]=> string(235) 

[...] 
```

什么是“可读”选项？我在某处读到 print_r() 非常易读和有序。但是我怎么能理解那里发生了什么？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-16T21:50:06.367

尝试对其进行预格式化以获得更好的可读性：

```
echo "<pre>";
print_r($some_var);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T21:50:31.623

试试这个代码：

```
<pre>
<?php
   print_r($content);
   var_dump($content);
?>
</pre> 
```

Using`<pre>`告诉您的浏览器块内的内容已经预先格式化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T21:50:46.273

我建议您安装[Xdebug](http://xdebug.org/) php 扩展 - 它可以自定义`var_dump()`为彩色 HTML 输出。

例子：

```
$pages = PageQuery::create()->find();
var_dump($pages);die; 
```

输出：

![在此处输入图像描述](../Images/25f9750349cc43d769460643c58ccb36.png)

# windows - 分割视频帧缓冲

> ID：11995921
> 
> 赞同：0
> 
> 时间：2012-08-16T21:47:36.270
> 
> 标签：windows, linux, graphics

是否可以拆分视频帧缓冲区以显示，例如，在一台监视器中显示两个逻辑屏幕？

有“标准”解决方案吗？是否有专有的解决方案，使用 nVida 或 Ati 的驱动程序？

该解决方案在 Windows 或 Linux 中可行吗？

# html - 如何不显示两个相邻 div 之间的公共边框？

> ID：11995928
> 
> 赞同：3
> 
> 时间：2012-08-16T21:48:22.147
> 
> 标签：html, css

我有两个具有相同边框样式的 div，具有不同的高度并且彼此背靠背。我希望它们之间的共同边界不显示。这如何在 html 和 css 中完成？

![在此处输入图像描述](../Images/aabe74c8a258ca440d366983cf980844.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:25:52.540

很多人建议让较小`div`的与较大的重叠，并将左边框设置为与背景颜色相同的颜色。这样做的问题是，您将在**边界重叠****的两个点处获得 1px 的间隙`div`**：

[http://jsfiddle.net/RWz4A/](http://jsfiddle.net/RWz4A/)

为了避免这种情况，您可以显式删除左边框，并设置不透明的背景。

**HTML**

```
<div id="one"></div><div id="two"></div>​ 
```

**CSS**

```
#one, #two {
    width: 100px;
    border: 1px solid black;
    display: inline-block;
}
#one {
    height: 200px;
}
#two {
    height: 100px;

    position: relative;
    left: -1px;
    background: white;
    border-left: none;
}​ 
```

**[jsFiddle 演示](http://jsfiddle.net/RWz4A/1/)**

**编辑：**

正如第三者所提到的，您也可以使用和`margin-left`的组合来代替。这对您来说可能是一个更好的选择，具体取决于您之前的样式和元素的排列方式（如果尚未设置，在大多数情况下可能会更好）。`position``left``margin-left`

Zach Shipley 还对浏览器支持提出了很好的观点，`display: inline-block`并添加了以下 CSS：

```
*display: inline;
zoom: 1;
vertical-align: bottom; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:54:05.490

将较小的 div 放置在右侧以与左侧 div 的边框重叠，并确保它没有设置border-left

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T22:09:01.410

放`border-right: ... border-left: ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T22:19:33.693

根据您在问题下的评论，@Tony_Henrich，在这种情况下，我通常会通过使`border-left-color`较小的 div 等于两个 div' 来“伪造”它`background-color`。然后在较小的 div 上设置`position: relative`和`left: -<border-width value>`，使其与较大的 div 重叠。

这是一个 jsfiddle：http: [//jsfiddle.net/5Q3A5/](http://jsfiddle.net/5Q3A5/)

# c++ - 从偏移位置开始复制内存

> ID：11995938
> 
> 赞同：1
> 
> 时间：2012-08-16T21:49:16.707
> 
> 标签：c++, offset, memcpy

我如何从给定的偏移量开始复制内存。例如

```
int main()
{
   int a1[100], a2[100], i;
   errno_t err;

   // Populate a2 with squares of integers
   for (i = 0; i < 100; i++)
   {
      a2[i] = i*i;
   }

   // Tell memcpy_s to copy 10 ints (40 bytes), giving
   // the size of the a1 array (also 40 bytes).
   err = memcpy_s(a1, sizeof(a1), a2, 10 * sizeof (int) );    
   if (err)
   {
      printf("Error executing memcpy_s.\n");
   }
   else
   {
     for (i = 0; i < 10; i++)
       printf("%d ", a1[i]);
   }
   printf("\n");
} 
```

如何从 a1 的索引 50 开始将内存从 a2 复制到 a1。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T21:51:19.733

加 50 到`a1`. 无需为添加而弄乱 sizeof ；编译器知道怎么做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T21:51:20.167

将地址传递给要复制到的索引，作为 的目标`memcpy`：

```
memcpy(&a1[50], &a2[50], 10 * sizeof a[0]); 
```

# objective-c - Facebook iOS 应用程序 - 如何了解授权我的 Facebook 应用程序的用户

> ID：11995940
> 
> 赞同：1
> 
> 时间：2012-08-16T21:49:33.933
> 
> 标签：objective-c, ios, facebook, authorization

[我在https://developers.facebook.com](https://developers.facebook.com)有一个 Facebook 应用程序，它连接到我的原生 iOS 应用程序，我还使用 Facebook iOS SDK 来扩展我的应用程序，使其具有社交网络功能。

我的应用程序将要求用户通过使用 Facebook 登录来对其进行授权。

我的问题是如何知道已经授权该应用程序的用户，以便我可以将它们放入一个特殊列表 ( `UITableView`)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:58:03.557

除非您一直在跟踪此服务器端，否则您无法获得所有应用用户的列表。

您可以通过调用获取也使用您的应用程序的用户朋友列表`/me/friends?fields=installed`- 对于已授权您的应用程序的朋友，响应中将显示“已安装：true”

# php - Uploadify 防止未来的 Ajax 请求

> ID：11995943
> 
> 赞同：0
> 
> 时间：2012-08-16T21:49:49.230
> 
> 标签：php, jquery, session, uploadify

我正在尝试将 Uploadify 用于 Ajax 文件请求。但是，我遇到了一个非常奇怪的情况。这是我的代码：

```
$.ajax({
    type: "POST",
    data: "choice="+choice,
    url: "getformdata.php",
    cache: false,
    async: false,
    success: function(msg) {

        $(".file-upload").each(function() {
            var $p = $(this).parent();
            $(this).uploadify({
                'swf': 'uploadify.swf',
                'uploader': 'uploadify.php',
                'fileTypeDesc': '.doc, .docx, or .pdf',
                'fileTypeExts' : '*.doc; *.docx; *.pdf',
                'onUploadError' : function(file, errorCode, errorMsg, errorString) {
                    alert('The file ' + file.name + ' could not be uploaded: ' + errorString);
                },
                'onUploadSuccess' : function(file, data, response) {
                    $($p).find("input[type='hidden']").val(data);
                    $($p).find(".file-name span").text(data);
                }
            });
        });
    }
}); 
```

目前，如果我尝试发出另一个 Ajax 请求，PHP 不知何故不知道我的任何会话变量。我一拿出 .uploadify() 方法，它就突然又知道我的会话变量了。

究竟是什么原因造成的？有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:10:06.430

使用您发布的代码，您正在执行 2 个请求，一个在文件 getformdata.php 上，另一个在文件 uploadify.php 上，第二个是与 uploadify 打包的...它不使用 session_start() ...所以我认为您的 PHPSESSID 已更改...问候

咪咪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:07:59.013

这是uploadify引擎中的一个错误。如果您查看他们的网站，也会发生同样的事情。当您多次使用控件时，不知何故尝试加载两次 swf 并错误地调用您的 URL 所在的文件夹，如果您知道我的意思的话。

# asp.net - 如何避免用户打开同一个网页两次

> ID：11995949
> 
> 赞同：0
> 
> 时间：2012-08-16T21:50:13.247
> 
> 标签：asp.net

我想也许如果我像 PTC 页面所做的那样做一些事情；避免两次提交同一页面。我需要更多的想法来执行它。例如在 asp.net 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:15:46.133

最简单的方法是在用户单击它时隐藏按钮、链接按钮。这是 asp.net 应用程序中最简单的方法。您也可以禁用它，但在这种情况下，回发根本不会发生。所以最好把它藏起来。如果您不想隐藏它，那么程序有点棘手

例如

```
<asp:button id="btn" runat="server" onclientclick="this.style.visibility='hidden';" /> 
```

漫长的过程：

如果您看到 asp.net 页面的源代码，它会将事件附加到按钮上

```
settimeout(__doPostback); etc etc... 
```

因此，万一我们也可以禁用按钮，但 settimeout 大于 asp.net 控件指定的超时时间，因此在用户单击它后，我们的函数将被调用并禁用按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:42:07.537

在表单中出现单击事件后，您可以隐藏链接按钮。请尝试以下代码

**按钮代码**

```
<asp:button id="btnName" runat="server" onclientclick="javascript:return disableButton()" OnClick="btnName_Click" /> 
```

# networking - IP租赁是否会在租赁期限内锁定IP？

> ID：11995950
> 
> 赞同：1
> 
> 时间：2012-08-16T21:50:15.710
> 
> 标签：networking, ip

我被安排负责一家酒店的无线网络，我对 IP 租赁有一些疑问，因为这是我正在处理的一家酒店，新机器不断通过...

如果租期是3天，并且在IP分配给机器后的第一天，如果机器断网，请说当天，如果另一台机器没有使用，是否可以分配该IP？还在租约的时间范围内吗？

了解这一点很重要，因为客人只逗留很短的时间，所以如果租约是一周，而客人平均逗留两天，这是否意味着租给他们机器的 IP 被锁定，直到租约到期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:55:21.803

它被锁定，因为 IP 租赁发生在服务器端。指示服务器在预设的时间段内向连接的计算机（具有相同的 MAC 地址）提供相同的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:03:51.127

无法分配另一台机器，这就是首先要租用的全部原因。但是，没有理由不将租约设置为较短的时间，例如一个小时。客户端计算机会自动更新，并且对用户来说是无缝的。我的 ISP 将其设置在几分钟范围内。

# php - mysql_result 导致 php 错误

> ID：11995952
> 
> 赞同：0
> 
> 时间：2012-08-16T21:50:17.340
> 
> 标签：php, mysql, sql, apache, phpmyadmin

我只是将我的数据库从 MS-Access 转移到 mysql

我正在使用以下代码（仅相关代码的一部分）从 mysql 检索数据

```
$con = mysql_connect("localhost","abc","abc@123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

  $conn= mysql_select_db('xyz', $con);
if (!$con) {
    die ('Can\'t connect to database : ' . mysql_error());
}

$sql="SELECT * FROM Inventory where Text5='y' OR Text5='Y'  ";
$rs=mysql_query($sql);
if (!$rs)
  {exit("Error connecting database,,,");}

while (mysql_fetch_row($rs))
//while (!$rs->EOF)
  {
        $ASIN=trim(mysql_result($rs,"ASIN"));

        $LocalSKU = trim(mysql_result($rs,"LocalSKU"));

        //$ASIN=trim($rs->fields[120]);
        if(trim($ASIN)!=""){
            //include('funtions.php');
            $shipArray = shipingPrice($ASIN);
            $Price=round((mysql_result($rs,"Price")),2);
            $Price2=round((mysql_result($rs,"Price2")),2); 
```

但是当我运行脚本时，我收到以下错误消息

> 警告：mysql_result() 期望参数 2 很长，字符串在第 67 行的 C:\wamp1\www\nathan\amazonPrice.php 中给出

基本上，从查询结果中，我想选择`ASIN`和`LocalSKU`字段的值来进一步处理它。

有人可以建议我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:52:52.790

[http://php.net/mysql_result](http://php.net/mysql_result)

mysql_result 的第二个参数是你想要的行。它**不是**一个字符串字段。

你的代码相当可怕。您可以通过以下方式大大简化它：

```
$row = mysql_fetch_assoc($rs);
$price = $row['price'];
$pric2 = $row['price2'];
etc... 
```

# java - JavaFX 背景图像在scenebuilder 和win 中有效，但在osx 上无效

> ID：11995958
> 
> 赞同：1
> 
> 时间：2012-08-16T21:50:54.057
> 
> 标签：java, javafx, javafx-2, netbeans-7, scenebuilder

我有一个简单的 FXML，它有一个为外部 css 文件中的选项卡窗格定义的背景图像。

背景图像位于图像目录中，该目录与 .FXML 位于同一文件夹中

问题是该背景图像显示在 SceneBuilder（Win 7 和 OSX Mountain Lion）中，但在运行应用程序时，仅在 Windows 7 上显示。

我正在使用 Netbeans 7.2，还尝试在 OSX 上更新到 JDK 7.0_06。我还确保我的项目是使用 7.0_06 构建的。

```
#mainNavigation .tab-content-area,
#mainNavigation .tab {
  -fx-background-color: #dddddd;
  -fx-background-image: url('./img/tabpaneBG.png');
} 
```

我还能尝试什么？

# javascript - 如何在html中插入空格？

> ID：11995959
> 
> 赞同：-1
> 
> 时间：2012-08-16T21:51:03.713
> 
> 标签：javascript, jquery-ui, jquery, jquery-selectors

当我尝试使用`.html()`JQuery 中的方法插入空间时，我遇到了问题。以下是我的代码：

```
html += '<td >'+description+". "+location;
html += +" "+position;
html += +" &nbsp; "+side+'</td>'; 
$('#tempResult').html(html); 
```

我得到的结果如下： `Green Tint. 0FrontNaNRight`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T21:53:12.700

`+`从字符串中删除运算符。`+=`负责字符串连接，因此附加`+`符号只是试图使字符串为正（导致解释器将其更改为`NaN`- 而不是数字）。

`a += b`是说的“速记方式”（也许是简化）`a = a + b`。

```
html += '<td >'+description+". "+location;
html += " "+position;
html += " &nbsp; "+side+'</td>'; 
$('#tempResult').html(html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:59:24.533

+= + 位正在做一些类型转换。摆脱第二个+。

构建 html 的另一种方法是通过数组和加入。一个例子：

```
var description = 'DESCRIPTION',
    location = 'LOCATION',
    position = 'POSITION',
    side = 'SIDE',
    html = [
        '<td>' + description,
        '. ' + location,
        ' ' + position,
        ' ' + side,
        '</td>'
    ];

$('#tempResult').html(html.join('')); 
```

# git - Beanstalk：如何将服务器上生成的文件同步回 beanstalk 存储库？

> ID：11995961
> 
> 赞同：0
> 
> 时间：2012-08-16T21:51:09.127
> 
> 标签：git, version-control, amazon-elastic-beanstalk, beanstalk-svn

我正在使用 beanstalk 在本地开发我的文件并通过 beanstalk 将它们部署到生产服务器。

但是，通过 cms 在网站上进行的更改或用户进行的任何其他更改（图像、文本等）如何使我始终拥有 1:1 副本？

如何将在生产服务器上所做的更改同步回我的 beanstalk 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:04:24.803

### 简单的：

获取实时文件的备份并将它们应用到本地 git 存储库。也许将它们提交到一个特殊的分支（incoming-live），你可以在需要/想要的时候合并。

### 难的：

您可以将部署服务器设置为 git 存储库。

然后，可以使用`push`es 直接部署到服务器并使用钩子重置为最新版本。

新文件可以自动添加和提交（更多钩子）并推回原点。然后，您可以在 git 中访问实时更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:06:32.620

这就是为什么我不建议将 beanstalk 用于 cms 系统。

最好使用将应用程序存储在 NFS 中的主主机手动创建整个环境，该 NFS 会自动挂载实例。你总是有 1:1 并且文件在被写入时被锁定

# java - JTable 上的鼠标侦听器触发时组件位置无效

> ID：11995962
> 
> 赞同：1
> 
> 时间：2012-08-16T21:51:12.513
> 
> 标签：java, swing, jtable

我想当我单击某个`JTable`在标签中更改的文本上的单元格时`JFrame`。我写下面的代码；但是当我点击时，组件的位置被破坏了，我看到了一个重新排列的 gui。我在日志文件中也没有任何异常！

`JTable`鼠标侦听器的代码部分： ( `x`is a `JTable`)

```
x.addMouseListener(new MouseListener() {

    @Override
    public void mouseClicked(MouseEvent e) {

        try {
            String temp = (String) model.getValueAt(x.getSelectedRow(), 0);
            Class.forName(Configure.driver);
            Connection con = DriverManager.getConnection(Configure.url
                + Configure.dbName, Configure.userName, Configure.password);

            java.sql.PreparedStatement prs2 = con.prepareStatement(
                "select count(*) as tedad from messages where receiver=?");

            prs2.setString(1, temp);
            temppResultSet = prs2.executeQuery();
            if (temppResultSet.next()) {

                int RecNum = temppResultSet.getInt("tedad");
                System.out.print("RECEIVED NUM: " + RecNum);

                numberOfMessageReceiveByuser.setText("dsdsdsaf");//LABEL NAME
            }
        } catch (Exception ex) {
            Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
        }

    //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mousePressed(MouseEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void mouseExited(MouseEvent e) {
        // throw new UnsupportedOperationException("Not supported yet.");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:57:53.017

问题解决了。我静态设置了我的组件的所有位置（不是使用布局管理器）。当您想静态设置位置时，您应该使用 .setLayout(null) 将组件布局设置为 null，这是我忘记做的手指注释！

# java - 是否可以在 Sun Spot 上运行 Ruby（可能是 JRuby）？如果有怎么办？

> ID：11995975
> 
> 赞同：0
> 
> 时间：2012-08-16T21:52:02.980
> 
> 标签：java, ruby, jruby

这可能是一个非常幼稚的问题，但无论如何我都会问。我最近得到了一套[Sun Spot 的](http://www.sunspotworld.com/)套件，我想知道是否可以在虫子上运行 ruby​​。我立即想到了 JRuby，但由于缺乏对 Java Vm 的了解，我担心这是一个失败的原因。如果是的话，需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:26:48.963

似乎 SunSpot 在 Squawk (http://labs.oracle.com/projects/squawk/squawk-sunspot.html) 上运行，这是一个具有 CLDC 1.1 配置和 IMP 配置文件的 Java ME JVM。

我以前从未尝试过，但您应该为 CLDC 寻找特定的 JRuby 移植。也许这篇文章可能是一个开始：[http ://blog.headius.com/2009/02/jruby-on-java-me.html](http://blog.headius.com/2009/02/jruby-on-java-me.html)

# javascript - 从 PDF 调用 JavaScript

> ID：11995977
> 
> 赞同：0
> 
> 时间：2012-08-16T21:52:17.530
> 
> 标签：javascript, google-chrome, pdf

PDF 可以在 Chrome 中呈现。有趣的是，JavaScript 控制台仍然可以在这种情况下工作，并且可以成功调用`alert('Hello')`.

是否可以让一个 PDF 文件告诉 Chrome 调用一些 JavaScript 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:55:17.063

绝对地。查看[此页面](http://www.adobe.com/devnet/acrobat/javascript.html)了解更多详情。

# jsf - 从 PhaseListener 添加消息

> ID：11995979
> 
> 赞同：1
> 
> 时间：2012-08-16T21:52:22.887
> 
> 标签：jsf, error-handling, primefaces

我基本上从通过 Primefaces AJAX 调用的 SQL 操作中得到了一些未捕获的异常。有趣的是，这个未捕获的异常在 FireBug 的 JavaScript 部分出现为错误：

```
<?xml 版本='1.0' 编码='UTF-8'?>
<partial-response><error><error-name>class javax.faces.el.E​​valuationException</error-name><error-message><![CDATA[事务回滚]]></error-message>< /error></partial-response>

```

并在带有所有堆栈跟踪和所有内容的 server.log 上。

但是如果不将它们重定向到单独的错误页面（并丢失所有输入数据），我无法将其引起用户注意。

处理此问题的正确方法是创建验证器，我会这样做，但总是有可能出现不知情的数据库问题，只会出现在执行 SQL 操作。所以我只谈论没有验证者的情况。

假设我有这个 JSF 片段。

```
    <h:form>
        <p:消息 />
        <..... primefaces (AJX) 一些按钮 .... action="bean.save()" />
    </h:form>

```

和 bean.save();

```
  公共无效保存（）
  {
    尝试
    {
       em.merge(this.data);
    }
    捕获（异常 e）
    {
       // 即使由于某些破坏约束的原因无法合并数据，也从未在这里。
    }
  }

```

如果存在数据库错误，我们将在事务结束（AFTER save()）之前看到它，所以我无法捕获它。（这通过调试演练得到证实，并且在此处添加“em.flush()”可以使整个工作正常进行）。

在左右看了之后，我创建了一个 PhaseListener 并且我能够得到异常。但是，我无法在 <p:messages /> 上显示该异常

```
    public void afterPhase（最终 PhaseEvent 事件）
    {
        final Iterable exceptionEvents = event.getFacesContext().getExceptionHandler().getUnhandledExceptionQueuedEvents();
        对于（最终的 ExceptionQueuedEvent 异常事件：异常事件）
        {
            // 这个打印出来（在 server.log 中找到）。
            System.out.println("问题：" + exceptionEvent.getContext().getException());
            // 但是这个消息没有。
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Problem", "Problem:" + exceptionEvent.getContext().getException()));
        }
    }

```

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:18:10.793

A[`PhaseListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/PhaseListener.html)不是处理异常的正确位置。您应该使用[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html). 您需要在代码中进行的唯一其他更改是您应该使用它`Iterator`来迭代异常并用于`Iterator#remove()`从队列中删除已处理的异常。否则，它仍将由默认异常处理程序以您所看到的 ajax 响应的形式处理。

### 也可以看看：

*   [处理 AJAXified 组件的 JSF 2.0 异常的正确方法是什么？](https://stackoverflow.com/questions/10449862/what-is-the-correct-way-to-deal-with-jsf-2-0-exceptions-for-ajaxified-components)

# jquery - Rails 部分局部变量

> ID：11995981
> 
> 赞同：0
> 
> 时间：2012-08-16T21:52:27.577
> 
> 标签：jquery, ruby-on-rails, partials

我在文件中有以下代码`js.erb`::

```
var title = $('#kase_listing_title_show_determinator').attr('data-known-title-display');
$('#kase_list_core').fadeOut('slow');
$('#kase_list_core').html("<%= escape_javascript(render :partial => 'kase_details', :locals => {:kases => @cases, :displayingtitle => "title" }) %> ");
$('#kase_list_core').fadeIn('slow'); 
```

我在这里尝试做的是，我正在使用 jquery 从 div 读取 data-* 属性，并且基于该属性的值，我必须在部分中隐藏/显示某些内容。

我想在我的 rails 代码中将此值作为局部变量传递。但是每次加载到parital时，我都会得到：

#<#Class:0x007fed82319bc0>:0x007fed88f5ec40> 错误的未定义局部变量或方法 `displayingtitle'。

我不知道为什么没有设置第二个变量。

也许我只是在这里做一些愚蠢的事情。请帮忙。

部分代码：

如果我删除其中包含此变量的一行 - 一切正常。

```
<% kases.each do |kase| %>

  <!-- This div is used to determine whether to show or hide the known/ unknown title mode -->
  <!-- Do Not Delete this div - it is used for the kases with video's and show diagnosis check boxes -->
  <div id="kase_listing_title_show_determinator" data-known-title-display="false" data-show-kase-with-video-only="false" ></div>

  <div id="kase_listing_display<%= "#{kase.id}" %>" onmouseover="kase_list_display_mouse_over(<%= "#{kase.id}" %>)" onmouseout="kase_list_display_mouse_out(<%= "#{kase.id}" %>)" class="kase_listing_display" >

    <% if displayingtitle == 0 %>NO<% else %>YES<% end %>

    <div id="kase_listing_known_diagnosis<%= "#{kase.id}" %>" class="mediumtitle gray" style="display:none;">
      <%= kase.knowntitle %>
    </div>

    <br>

    <div id="kase_listing_unknown_diagnosis<%= "#{kase.id}" %>" class="mediumtitle gray" >
      <%= kase.unknowntitle %>
    </div>

    <br>

    <div class="titles gray">
      Author: <%= Author.primaryauthor(kase.id).first.displaystring %>
    </div>

    <br>

    <div class="regularfont gray">
      <strong>Presentation:</strong><%= kase.presentation.truncate(100, :separator => ' ', :ommission => "...").html_safe unless kase.presentation.blank? %>&nbsp;<%= link_to "Read More", kase_path(kase.id), :class => "topmenulinks" %>
    </div>

    <br>

    <!-- # <%= image_tag("#{kase.id}/#{kase.kase_images.first.name}", :width => "150") %><br><br> -->
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:18:08.780

您是否尝试过：标题周围的“+”：

```
var title = $('#kase_listing_title_show_determinator').attr('data-known-title-display');
$('#kase_list_core').fadeOut('slow');
$('#kase_list_core').html("<%= escape_javascript(render :partial => 'kase_details', :locals => {:kases => @cases, :displayingtitle => "+title+" }) %> ");
$('#kase_list_core').fadeIn('slow'); 
```

为了检索数据，您还可以执行 data() 而不是 attr()：

```
var title = $('#kase_listing_title_show_determinator').data('known-title-display'); 
```

# java - JVM生命周期？

> ID：11995983
> 
> 赞同：2
> 
> 时间：2012-08-16T21:52:30.327
> 
> 标签：java, jar, jvm

我需要一步一步地解释当我们调用时到底发生了什么，`java -jar JAR_FILE.jar`直到 JVM 完成它的工作并返回。

阶段如何准备好让 JVM 在主机上运行？
调用了哪些函数？创建了哪些线程？
当 JVM 将要关闭时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:53:44.723

Here is my list of steps it is very high level.

1.  JVM boots up and setups up the various memory areas that the GC will be managing, it will also setup some system threads
2.  Look the jar file manifest to determine the class that has the main method to load
3.  Load the main class and verify that the byte code in the just loaded class is correct and not doing anything illegal.
4.  resolve what classes are needed by the class being loaded and load those classes each class being loaded goes through step 3 and 4
5.  Find the the byte code for the main method and execute it.

This is a really simplified list, full details are much more specific and are probably dependent on the JVM implementation.

You might want to look at this book Inside the Java Virtual Machine 2nd Edition for a something more readable than the JVM spec [http://www.artima.com/insidejvm/ed2/](http://www.artima.com/insidejvm/ed2/)

# c++ - 是否有任何工具可以警告可能误用 delete 或 delete []？

> ID：11995989
> 
> 赞同：2
> 
> 时间：2012-08-16T21:53:07.223
> 
> 标签：c++, vector, delete-operator, scalar

我想我很清楚删除和删除[]之间的区别。我在这里问的问题是：有时我确实有错字并使用了错误的。然后它可能会或可能不会崩溃，通常会以数小时的调试结束。

我希望 gcc 能够在一些最简单的情况下检测并警告可能的误用。由于需要调用遗留函数，我仍然需要不时使用“new float[size]”，所以我更感兴趣的是找到一个错误检查工具来捕捉这些错误的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T22:09:35.063

> *我希望 gcc 能够在一些最简单的情况下检测到可能的误用并发出警告。*

使用[valgrind](http://valgrind.org)。

> *由于需要调用的遗留函数，我仍然需要`new float[size]`不时使用*

不，你没有。如果遗留函数需要一个指向浮点数组的第一个元素的指针，请执行以下操作：

```
std::vector<float> numbers(10);
legacy_func(&numbers[0]); 
```

不要这样做：

```
float *numbers = new float[10];
legacy_func(numbers);
delete[] numbers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:59:03.747

您可以将您的浮点数放入 a 中`std::vector<float>`，然后将其传递`front()`给`&front()`那些遗留函数。我不确定这是否能保证按标准工作，但它应该在常见的实现中工作。

如果你有 C++11 库支持并且`size`在编译时是已知的，`std::array<float, size>`效率会更高。

# c++ - #12 Project Euler：找到第一个具有 500 多个除数的三角形数

> ID：11995994
> 
> 赞同：0
> 
> 时间：2012-08-16T21:54:06.240
> 
> 标签：c++

所以我尝试解决这个问题，但我的程序表现得很奇怪。

```
#include <iostream>
using namespace std;

int triangle_numbers(int n, int meh = 0)
{
    int count = 0;

    //calculate how many divisors there are for meh
    for(int i = 1; i <= meh; i++)
        if(meh%i == 0)
            count++;

    //if the number of divisors for meh is over 500, return meh
    if(count > 500)
        return meh;

    //recursive call to increment n by 1 and set meh to the next triangle number
    triangle_numbers(n+1, meh += n);
}

int main()
{
    int cc = triangle_numbers(1);
    cout << cc << endl;
} 
```

如果我单独输出`meh`，`count`我会得到准确的结果，所以我不确定为什么我的程序给了我相同的数字（4246934），即使我这样做了，比如说`if(count > 10)`。我有一种感觉，这可能与我的递归调用有关，但到目前为止我尝试过的一切都没有奏效。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:57:34.233

您缺少`return`完成递归所必需的最终语句（编译器不是警告说`triangle_numbers`实际上并非在所有情况下都返回某些东西吗？）。

计算出最终值后`meh`，您需要

```
return triangle_numbers(n+1, meh += n); 
```

这样`meh`就可以一路返回调用栈，最后返回到`main`.

您现在看到的数字可能是递归结束后留在堆栈上的值。

旁注：该算法中的一个经典优化是`i`迭代到`meh / 2`但不再进行。显然，大于一半的数字`meh`不能均匀地划分它，因此可以跳过它们。

# java - 有没有办法确定任意 java 方法的一般成本函数？

> ID：11995996
> 
> 赞同：5
> 
> 时间：2012-08-16T21:54:09.577
> 
> 标签：java

我很想知道是否已经存在一种将 java 方法代码作为输入并确定此类代码的成本函数（循环数、ifs/elses、I/O 和其他常见事物）的方法。我的意思不是以毫秒为单位的确切成本，而是此代码可能导致的一些一般成本。问题是我希望能够让用户编写的任意方法说出这种方法的成本是多少（当然不考虑 JVM 等一些特殊性）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:57:14.607

我不知道这样的工具是否存在，但我怀疑它的可行性和可用性：

*   对于这种工具在一般情况下的可行性，请查看[停机问题](http://en.wikipedia.org/wiki/Halting_problem)，这是您所要求的重要部分，并且已被证明是[不可判定](http://en.wikipedia.org/wiki/Undecidable_problem)的。

*   对于这样一个工具的可用性，我认为静态代码分析本身是没有用的，因为系统性能的很大一部分取决于它的*使用模式*，即它的输入。

    *甚至在运行时*对系统进行基准测试也不是直截了当的，这是有原因的。相同的软件在某些情况下速度可能快得惊人，而在其他情况下速度则慢得惊人。

也就是说，有[多种代码复杂性分析工具](https://stackoverflow.com/q/1143084/507519)，但这些指标侧重于结构复杂性，这与质量和可维护性有关，而不是性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:09:37.973

对于循环数，如果/否则，您可以使用圈复杂度度量。有计算它的工具。例如，[JavaNCSS](http://www.kclee.de/clemens/java/javancss/)。关于其他事情，你应该决定你对什么感兴趣。有很多[软件指标](http://en.wikipedia.org/wiki/Software_metric)，其中一些可能适合你。如果没有，你可以发明你的并实施它们。比如说，[PMD](http://pmd.sourceforge.net/) - 另一种收集不同指标的流行工具 - 允许您编写自己的规则。

如果您想自动预测代码的性能，那么您就不走运了。thkala 指出了原因，其他原因包括 JVM JIT 编译和运行时优化。您最好的朋友是分析、（自动）性能测试和算法分析。静态分析可以向您展示*一些*潜在的性能问题，例如连接字符串或在循环中分配对象。现代 IDE 能够做到这一点。尽管如此，性能主要是由算法和架构决定的，因此在静态分析的方式上几乎不会有太大的改进。

# php - 将字段从一个表复制到另一个表

> ID：11995999
> 
> 赞同：0
> 
> 时间：2012-08-16T21:54:30.230
> 
> 标签：php, mysql, sql

我正在遍历一组值`$id`，在某些情况下，我需要将 2 个数据字段从一个表（产品）复制到另一个表（product_new）。两个表都已经存在，并且都包含相同的字段“product_description”和“image”。我正在尝试这样做：

```
$copy_query = "SELECT product_description, image INTO product_new FROM product WHERE product_id=$id";
$result = mysql_query($copy_query) or die('Could not copy the database data: ' . mysql_error() .  '<br>Query: ' . $copy_query); 
```

错误是“未声明的变量：product_new”。我不明白这一点，因为我对表 product_new 执行其他操作没有问题。有什么想法吗？谢谢。

**更新**

感谢您提供差异文档的链接。这肯定有帮助，但是我还有一个问题。我目前的查询是：

```
$copy_query = "INSERT INTO product_new (product_description, image)
    SELECT product.product_description, product.image
    FROM product
    WHERE product_id=$id"; 
```

但这是将数据写入 product_id = 0 的新行。我需要它写入 product_id = $id 的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:58:07.160

MySQL 不支持该`SELECT INTO`语法。

此外，在循环内运行查询通常效率很低。`id`相反，您可以在 PHP中创建一个逗号分隔的s 列表并使用：

```
$copy_query = '
    INSERT INTO product_new (product_description, image)
    SELECT product_description, image
    FROM   product
    WHERE  product_id IN (' . implode(',', $ids) . ')';

mysql_query($copy_query); 
```

`$ids`您的 ID 数组在哪里。

该解决方案只需要执行一次（而不是在一个循环中执行多次）。

* * *

**编辑**：如果您已经有行`product_new`并且想要更新它们，您可以使用：

```
$copy_query = '
    UPDATE product_new a
    JOIN   product b ON a.product_id = b.product_id
                    AND b.product_id IN (' . implode(',', $ids) . ')
    SET    a.product_description = b.product_description,
           a.image = b.image';

mysql_query($copy_query); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T22:00:16.380

原因是因为 MySQL 不支持`SELECT...INTO`查询。

而是使用`INSERT INTO...SELECT`来达到相同的结果。

有关详细信息，请参阅参考手册中的[SELECT INTO 表差异](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-select-into-table.html)。