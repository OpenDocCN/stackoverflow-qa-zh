# StackOverflow 问答 10946000-10946999

# matlab - 从 MATLAB 中的手绘中捕获数组中的点

> ID：10946001
> 
> 赞同：3
> 
> 时间：2012-06-08T09:10:38.330
> 
> 标签：matlab, image-processing

假设我在 Matlab 中显示图像，然后想在图像上绘制手绘轮廓/形状。然后在数组中捕获轮廓上的点。

在matlab中可以吗？如果是这样，请建议我如何实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:17:29.010

有内置的[ginput](http://www.mathworks.nl/help/techdoc/ref/ginput.html)功能，但它需要您单击点，所以它不是真正的徒手。

[这个](http://www.mathworks.com/matlabcentral/fileexchange/4170-trace-the-position-of-cursor-without-click)用户制作的功能可能会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T07:32:02.163

图像处理工具箱中的`imfreehand`功能可以满足您的需求：

[http://www.mathworks.com/help/toolbox/images/ref/imfreehand.html](http://www.mathworks.com/help/toolbox/images/ref/imfreehand.html)

# php - 将查询结果作为行存储到数据库表中

> ID：10946003
> 
> 赞同：0
> 
> 时间：2012-06-08T09:10:50.797
> 
> 标签：php, mysql, arrays, object

查询结果

```
Array
(
[0] => stdClass Object
    (
        [ingredientID] => 2
        [code] => Bf
        [description] => 1st Class Flour
        [volume] => 8268
        [price] => 750
        [amount_gram] => 0.02980
        [status] => Inactive
        [uom_id] => 1
        [flour] => Yes
    )

[1] => stdClass Object
    (
        [ingredientID] => 3
        [code] => Sf
        [description] => 3rd Class Flour
        [volume] => 18490
        [price] => 635
        [amount_gram] => 0.02540
        [status] => Inactive
        [uom_id] => 5
        [flour] => Yes
    )
.......... 
```

我想将此结果作为行库存存储到另一个表中。该表将如下所示：

```
ID        inventory
1         (the result)
2         (another result) 
```

之后我会再次查询它，以便我可以显示结果。

这是我最近所做的。

店铺：

```
//getting the result
$inv = $this->db->get_from('table','id'=>'1')->row();
<input type="hidden" name="inventory" value="<?php print_r($inv)?>">
//storing in the new table
$this->db->insert('table2',array('inventory'=>$this->input->post('inventory'))); 
```

得到：

```
$inventory = $this->db->get_where('table2',array('ID'=>'1'))->row_array();
//result
array
(
      [ID] => 1
      [inventory] =>
      array
      (
            [0] => stdClass Object
            (
                 [ingredientID] => 2
                 ...... and so on 
```

我想显示数组 ['inventory'] 中的所有内容，它是一个对象数组。

我已经完成了这个 foreach($arr['inventory'] as $invent): echo $invent['ingredientID'];

但是 foreach 部分有错误。错误：为 foreach() 提供的参数无效

我应该怎么办？结束；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:43:59.947

假设：

```
$results = $this->db->get_where('table2',array('ID'=>'1'))->row_array(); 
```

你应该用它来打印它

```
foreach($results['inventory'] as $inventory)
{
    print_r($inventory->ingredientID);
} 
```

# msbuild - 如何在 x64 机器上运行 NCover v1.5.8 & Gallio v3.3

> ID：10946006
> 
> 赞同：0
> 
> 时间：2012-06-08T09:11:02.130
> 
> 标签：msbuild, mbunit, gallio, ncover

我在 x64 机器上使用 NCover v1.5.8 和 Gallio v3.3 苦苦挣扎。它可以运行所有测试，但不能生成覆盖率报告。错误消息：“已分析的​​进程已终止。未建立 Profiler 连接”

我使用的命令行：

ñ`Cover.Console.exe Gallio.Echo.exe MyTests.dll //reg`

我尝试做同样的事情，因为 TestDriven.NET 可以生成报告，但我不知道从哪里获得“Gallio TestDriven.Net Runner”。我的期望是从我的 MBUnit 测试中获得覆盖率报告：D。

我也试过这样跑

ñ`Gallio.Echo.exe MyTests.dll /runner:NCover`

但它随后抱怨 NCover 1.5.8 无法在 .NET Fx v4.0 上运行

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:58:35.030

如果您安装 Gallio（使用 msi）并且您已经安装了 TestDriven，它将安装 TD.Net 运行器。

# java - 如何在android中选择多个文件

> ID：10946008
> 
> 赞同：5
> 
> 时间：2012-06-08T09:11:22.227
> 
> 标签：java, android, android-image

我使用以下代码选择文件，但我只能选择一个文件。如何选择多个文件。

```
 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
 intent.setType("image/*");
 startActivityForResult(intent, CHOOSE_FILE_RESULT_CODE);
 .....

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // User has picked an image. 
    Uri uri = data.getData();
    //File URI.. 

} 
```

感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:30:01.627

您可以创建自己的自定义画廊。可以从这里获得更多信息。 [Android 自定义图片库](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

# ios - 定义一个字节的方法有很多

> ID：10946012
> 
> 赞同：25
> 
> 时间：2012-06-08T09:11:36.723
> 
> 标签：ios, objective-c, byte, typedef

我在objective-c中使用哪个（特别是在iOS上）有什么不同吗？我假设它来自从 C 及其类型继承，以及从 iOS 所基于的 Mac OS 继承类型，但我不知道应该使用哪一个：

`unsigned char`从...嗯..编译器？

`uint8_t`来自 stdint.h

`UInt8`来自 MacTypes.h

`Byte`来自 MacTypes.h

`Bytef`来自 zconf.h

我知道各种 defs 是出于可移植性的原因，并且使用类似`unsigned char`的文字并不是好的未来想法（大小可能会改变，事情最终会像 Windows API 一样）。我想要一些关于如何找到最适合我使用的建议的建议。或者，如果我只是傻的话，我会狠狠地鞭笞……

**编辑**：只是为了获得更多信息，如果我想要一些*永远*是 1 字节的东西，我应该使用 uint8_t （看起来它不会用这样的名字改变）？我想 UInt8 也不会改变，但我看到 UInt32 的定义因处理器是否为 64 位而异。

**进一步编辑**：当我说字节时，我的意思是我想要 8 位。我正在为磁盘存储进行像素压缩操作（32 位-> 8 位）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T09:15:24.383

这是完全无动于衷的。无论您使用哪个，它很可能最终会成为`unsigned char`. 但是，如果您希望它看起来不错，我建议您使用`uint8_t`from `<stdint.h>`。

两者都不会随着架构而改变。`char`根据 C 标准，它始终为 1 个字节，如果在实现中 UInt8 突然变成 16 位长，那么从用户的角度来看，这将是不支持的。

（然而，情况并非如此，它`char`必须是 8 位宽，只是如果一个类型的名称表明它是 8 位长，那么任何明智的实现确实会对其进行 typedef。顺便说一下，一个字节 (即`char`）通常是一个 8 位单元，即一个八位字节。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-20T21:58:40.893

与从 C 语言类型模型派生的每种编程语言一样，Objective C 有一些**等效**的选项来声明一个 8 位整数。

为什么我说等价？因为正如 OP 正确陈述的那样，很明显所有这些选项最终都被编译`typedef`为`unsigned char`内置编译器类型。现在这是正确的，让我们实际来说，没有人会在未来将它们更改为非 8 位整数。

所以，这里的实际问题是**在为 8 位整数选择类型名称时优先考虑的更好顺序是什么？**

## 代码可读性

由于基本上在每个具有`C`语言根的代码中，原始类型名称都是一团糟。因此，可能**最重要的因素是可读性**。我的意思是对于大多数阅读您的代码的人来说，为这个特定整数选择这个特定类型的明确且唯一可识别的意图。

因此，让我们从对 C 语言知之甚少的普通 Objective C 程序员的角度来看看这些类型。

*   `unsigned char`- 这是什么？？？为什么 char 意味着要签名？？？
*   `uint8_t`- 好的，无符号 8 位整数
*   `UInt8`- 嗯，和上面一样
*   `Byte`- 有符号或无符号 8 位整数
*   `Bytef`- 这是什么？字节浮点数？那个'f'是什么意思？

很明显，这`unsigned char`不是`Bytef`一个好的选择。

更进一步，您会注意到`Byte`类型名称的另一个麻烦：您无法确定它是否代表`signed`或`unsigned`整数，当您试图了解该整数可以容纳的值范围是多少时（-128 . . 127 或 0 .. 256)。这也没有增加代码的可读性。

## 统一的代码风格

我们现在剩下 2 个类型名称：`uint8_t`和`UInt8`. 如何在它们之间进行选择？

再一次，通过一个 Objective C 程序员的眼睛来看它们，他使用的类型名称很多`NSInteger`，`NSUInteger`当他看到 . 时看起来很自然`UInt8`。`uint8_t`只是看起来像一个非常低级的令人生畏的东西。

## 结论

因此，我们最终只剩下一个选项 - **`UInt8`**。就位数、范围和外观而言，这是可以清楚地识别的。所以这里可能是最好的选择。

# javascript - 如何在javascript中获取上一页URL？

> ID：10946014
> 
> 赞同：0
> 
> 时间：2012-06-08T09:11:46.147
> 
> 标签：javascript, cookies, browser, back-button

如何设计一个功能来跟踪用户查看过的上一页。它将被设计为在每个页面上调用。

我肯定会使用 cookie，而且它们应该在访问结束时过期。

如何做到这一点？我是 JavaScript 新手 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:18:41.493

如果您能解释为什么需要它，我们可能会找到更好的解决方案。

您可以使用 histroy.back() 函数，我认为这会对您有所帮助。

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_his_back](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_his_back)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:16:27.643

文档引用者将执行此操作，然后您可以选择使用此 url 做任何您想做的事情。

```
document.referrer 
```

# css - 谷歌浏览器工具栏破坏网站布局

> ID：10946017
> 
> 赞同：5
> 
> 时间：2012-06-08T09:12:06.980
> 
> 标签：css, google-chrome, web, google-chrome-extension

我在使用 Google Chrome 时遇到问题：19.0.1084.52 m 当我安装了[Ask Toolbar](http://about.ask.com/apn/toolbar/docs/default/faq/en/chrome/chrome.html#na1)时，它会破坏网站布局。

见打印屏幕： ![在此处输入图像描述](../Images/3cdf2df5219735ed4c1dc9457d9c5b4d.png)

Chrome 中的工具栏是否会影响网站的常见行为？

编辑：我想我应该将所有内容都包装在 a`<div>`中并从中移动背景图像，`<body>`尽管有没有更好的选择而不添加这个额外的标记？

[网站链接](http://supremebeing.co.za)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T17:12:14.317

Javascript 片段可以禁用 chrome 中的询问工具栏。希望这个功能快点普及！！

```
function removeAsk(){
    if(document.getElementById("apn-null-toolbar") != null){
        // mainMenu had a style change for its top positioning, returning it to normal
        // perhaps a function can be made which iterates over every element ask has changed
        document.getElementById("mainMenu").style.top = "-16px";
        // Just remove the iframe and style elements
        (elem=document.getElementById("apn-null-toolbar")).parentNode.removeChild(elem);
        (elem=document.getElementById("apn-body-style")).parentNode.removeChild(elem);
    }
} 
```

在正文加载后调用此方法

```
<body onload="removeAsk()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:39:31.757

没有用于创建工具栏的 Chrome 扩展 API，因此提到的扩展必须是通过内容脚本创建的。这意味着对于您打开的每个页面，此扩展程序都会注入 CSS 和 JavaScript 文件，以在页面内创建一个充当工具栏的 DOM 元素。这个解决方案的问题是，使用内容脚本可能会弄乱网站的外观甚至是它的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T18:30:31.293

我在询问工具栏上遇到了同样的问题。我基本上取出了我的定位属性和 top/left/right/bottom 并替换为边距。边距使用的空间更少，而且更干净。

虽然我同意，但容纳工具栏有点荒谬，因为最终用户可能安装了任何会破坏并给您的布局错误的东西。即使是 Skype 扩展程序也会破坏仅更改电话号码的布局。

所以你可以做的不多，但使用边距并将 CSS 保持在最低限度。只是我的2美分。如果您必须使用 CSS，请坚持使用边距。

# sql-server-2005 - 返回存储过程中使用的所有表和视图

> ID：10946018
> 
> 赞同：2
> 
> 时间：2012-06-08T09:12:09.820
> 
> 标签：sql-server-2005, stored-procedures

我正在使用 SQL Server 2005

我想通过仅给出存储过程名称来查看存储过程中使用了哪些表和视图。

可以做到这一点，如果可以，如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T09:13:55.880

使用[sp_depends](http://msdn.microsoft.com/en-us/library/ms189487.aspx)

```
sp_depends 'sp_name' 
```

* * *

显示有关数据库对象依赖关系的信息，例如依赖于表或视图的视图和过程，**以及视图或过程所依赖的表和视图**。不报告对当前数据库之外的对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:24:25.460

如果您使用的是 Management Studio，您还可以右键单击存储过程并选择“查看依赖关系”。有一个切换开关可以查看依赖于过程的对象或过程所依赖的对象。

# c# - 阈值计算的优化

> ID：10946020
> 
> 赞同：2
> 
> 时间：2012-06-08T09:12:18.613
> 
> 标签：c#, optimization, ternary-operator, threshold

我正在尝试优化以下 C# 代码，它将字节设置为`0x00`或`0xFF`基于阈值。

```
for (int i = 0; i < veryLargeNumber; i++)
{
    data[i] = (byte)(data[i] < threshold ? 0 : 255);
} 
```

Visual Studio 的性能分析器显示，上述代码相当昂贵，需要将近 8 秒的时间来计算 - 占我总处理费用的 98%。我正在处理不到一千件物品，因此加起来超过两个小时。

我认为问题与三元条件运算符有关，因为它会导致分支。我想某种纯数学运算可能会快得多，因为它对 CPU 缓存友好。

有没有办法优化这个？如果有帮助，我可以修复阈值。我认为任何高于约 7% 的性能提升都是胜利，因为总处理时间缩短了整整 10 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:15:48.330

如果您使用的是 .NET 4.0 Framework，您可以在以下链接中使用并行库，

[http://msdn.microsoft.com/en-us/library/dd460717](http://msdn.microsoft.com/en-us/library/dd460717)

在您的情况下，您必须验证阈值，无论如何这需要时间。所以使用线程或 lambda 表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:19:52.163

只是建议，为此目的使用按位运算符，因为它们更快，以及并行方法。

```
0x00 = 0000 0000 
0xFF = 1111 1111 
```

尝试使用`OR`运算符（即`0 | 1 = 1`代表`|`运算`OR`符的位置

编辑：

这就是你可以比较哪个数字更大的方法：让`a,b`数字：

```
int temp= a ^ b;
temp|= temp>> 1;
temp|= temp>> 2;
temp|= temp>> 4;
temp|= temp>> 8;
temp|= temp>> 16;

temp&= ~(temp>> 1) | 0x80000000;
temp&= (a ^ 0x80000000) & (b ^ 0x7fffffff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:10:40.247

如果您想要一个位解决方案 -

```
int intSize = sizeof(int) * 8 - 1;
byte t = (byte)(threshold - 1);
for (....)
{
    data[i] = (byte)(255 + 1 ^ ((t - data[i]) >> intSize));
} 
```

注意：不适用于 0 的极端情况。抱歉

另外，尝试使用 int 数组而不是 byte 看看它是否更快

# java - rtsp 客户端流到服务器

> ID：10946022
> 
> 赞同：0
> 
> 时间：2012-06-08T09:12:29.840
> 
> 标签：java, android, streaming, live, rtsp

我正在尝试将（实时 rtsp）从 java（android）客户端流式传输到 darwin 流服务器。

我搜索了互联网，但我无法找到如何做到这一点。

我首先要做的是调用 SETUP。

我发送的是这样的：

```
SETUP rtsp://user:password@ip/ RTSP/1.0
CSeq: 1
Transport: RTP/AVP;unicast;client_port=0-1
User-Agent: RtspClient 
```

我得到：

```
RTSP/1.0 415 Unsupported Media Type
Server: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )
Cseq: 1
Connection: Close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:23:54.980

这不是一个有效的传输标题，并且您在 CSeq 标题之前缺少一个新行。

查看这篇文章以获得一些指导......

[http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

它包括一个开放项目的链接，其中包含供您遵循的源代码。

# java - 使用 JSR303 验证器和 AJAX 动态生成网页

> ID：10946024
> 
> 赞同：2
> 
> 时间：2012-06-08T09:12:38.603
> 
> 标签：java, ajax, model-view-controller, jsf-2, bean-validation

我对基于 JSF2.0、richfaces 4、MVC 的网站非常满意。我有一个网页，用户应该在其中输入他的地址。

但是他可以选择只输入 1 个或 3 个地址。起初只显示一个地址，然后通过选中一些复选框，他可以选择添加更多地址。

![这页纸](../Images/d2d4bfea8c965dc84bdf0b46e81229ce.png)

![编码](../Images/250805f00124c5ac7c8b08b2d5c0b099.png)

但是如果我使用 JSR303 验证器，那么即使对于未生成的地址，也会检查验证约束。

有没有办法为这些验证器添加条件？比如，@NotEmpty(if="chekboxe1")

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:29:32.323

这是一个已知问题，没有直接的解决方案（google for keywords: multi-field JSR 303 custom validation annotations）。

尽管 JSR 303 的使用非常吸引人，但我们也可以争辩说，在数据方面进行天气多属性验证是有意义的。我说的是多属性，因为您是从数据而不是从输入（归档）接近验证过程。因此，您可能会遇到某些多重验证对一个用户有意义（创建记录）但对另一个用户有意义（由管理员编辑）的情况。

在我看来，您应该使用 JSR 303 进行非常基本的检查（例如，如果数据与数据库约束兼容），但对于前端细节，我将使用常规的 JSF 验证过程。

# jquery - 在某些 div 中重命名文本字段的一部分

> ID：10946028
> 
> 赞同：3
> 
> 时间：2012-06-08T09:12:42.600
> 
> 标签：jquery

我有一个 html 页面，其中有一些文本字段。每组文本字段都属于一个 DIV。我想更改某些文本字段的名称。但是，当您查看示例 html 时，这可能会变得更清楚：

[http://jsfiddle.net/dg2Bz/](http://jsfiddle.net/dg2Bz/)

如您所见，第一个 div 有 3 个文本元素，名称如下：

```
test[something][xxxx] 
```

但其他“虚拟” div 的文本字段带有数字：

```
<input name="test[100][name]" value="display" />
<input name="test[100][option1]" value="op1" />
<input name="test[100][option2]" value="op2" /> 
```

和

```
<input name="test[101][name]" value="borders" />
<input name="test[101][option1]" value="op1" />
<input name="test[101][option2]" value="op2" /> 
```

* * *

这些字段都属于一个div。我想要做的是更改名称的数字部分并将其替换为“名称”属性中具有“名称”的第一个文本字段的值。所以它变成了这样：

```
<input name="test[display][name]" value="display" />
<input name="test[display][option1]" value="op1" />
<input name="test[display][option2]" value="op2" /> 
```

和

```
<input name="test[borders][name]" value="borders" />
<input name="test[borders][option1]" value="op1" />
<input name="test[borders][option2]" value="op2" /> 
```

我不确定如何使用 jQuery 实际做到这一点。我敢肯定它是可能的，它可能涉及一些正则表达式。就是摸不着头脑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:17:47.513

这是一种可能的解决方案：

```
$(".dummy :input[name^=test]")​​​​​​​​​​​​​.attr("name", ​​function(i, value) {
    var name = $(this).parent().children(":first").val();
    return value.replace(/\[\d{3}\]/, "[" + name + "]");
});​ 
```

**演示：http:** [//jsfiddle.net/dg2Bz/1/](http://jsfiddle.net/dg2Bz/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:21:31.210

尝试这个 ：

```
$(".dummy > input[name*=name]").change(function(){
    var newName = this.value;
    $.each($(this).parent(".dummy").find("input"),function(){
        $(this).attr("name",function(i,value){
            return value.replace(/\[\d{3}\]/, "[" + newName + "]");
        });
    });

}); 
```

# mysql - 如何在单个查询中插入多个 mysql 表？

> ID：10946035
> 
> 赞同：1
> 
> 时间：2012-06-08T09:13:06.750
> 
> 标签：mysql, jdbc

我有这个查询，在我的 sql 命令行客户端中执行时可以正常执行并在两个表中获取条目，但是执行它会给我错误。

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'INSERT INTO tm_belonging(B ID,BELONGING_TYPE,BELONGING_TEXT)VALUES(LAST_INSERT_ID' 附近使用正确的语法

```
String sql="INSERT INTO tm_visitor(VISITOR_TEXT,COMPANY_TEXT,CONTACT,PERSON_TO_MEET,DEPARTMENT_TEXT,FLOOR)Values(?,?,?,?,?,?);"+"INSERT INTO tm_belonging(BID,BELONGING_TYPE,BELONGING_TEXT)VALUES(LAST_INSERT_ID(),?,?);";

PreparedStatement pst = conn.prepareStatement(sql);

pst.setString(1,VisitorName.toUpperCase());
pst.setString(2,Company.toUpperCase());
pst.setString(3,Contact);
pst.setString(4,WhomeToMeet.toUpperCase());
pst.setString(5,Department);
pst.setString(6,DepartmentFloor);
pst.setString(7,BType);
pst.setString(8,Belonging);
pst.executeUpdate();    
pst.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:19:43.517

我不认为你可以。您必须为两个插入查询使用两个准备好的语句。通常，如果我必须在一个事务中处理多个表并使用可调用语句，我会创建存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:02:42.620

嗯试试这个：

```
String sql="INSERT INTO tm_visitor(VISITOR_TEXT,COMPANY_TEXT,CONTACT,PERSON_TO_MEET,DEPARTMENT_TEXT,FLOOR)Values(?,?,?,?,?,?);"+"set @lastid=LAST_INSERT_ID();"+"INSERT INTO tm_belonging(BID,BELONGING_TYPE,BELONGING_TEXT)VALUES(@lastid,?,?);"; 
```

如果这不起作用，您必须使用一个准备好的语句进行查询

# button - Sencha Touch 2 按钮单击在部署后不起作用

> ID：10946036
> 
> 赞同：0
> 
> 时间：2012-06-08T09:13:07.690
> 
> 标签：button, sencha-touch-2, listeners, handlers

我有一个 sencha touch 2 应用程序，无需部署即可完美运行。但是，当我部署到测试、生产或本机时，导航视图中有几个按钮，这些按钮将不再起作用。没有显示错误。我无法理解为什么只有在部署之后才会发生这种情况。

以下是相关代码：

控制器：

```
control: {

        '#main-function': {
            tap: 'loadFunction'
         },

         loadMyBoat: function() {
              this.getProducts().up().push({
          xtype: 'myxtype',
         })

         Ext.getStore('Items').getProxy().setUrl('myurl');
         Ext.getStore('Items').load();
}, 
```

看法：

```
Ext.define('MyBoat.view.ItemList', {
extend: 'Ext.navigation.View',
xtype: 'myxtype',

config: {
    title: 'My Title',
    styleHtmlContent: true,
    defaultBackButtonText: 'Items List',

    items: {
        xtype: 'list',
        itemTpl: '{Field_Name}',

        title: 'Tap on a boat to access further details',
        store: 'Boats'
    }
}
}) 
```

有人遇到过这个吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:28:58.843

After lots of debugging I managed to fix the problem. Turns out that using the following code to generate any component will not work well after deployment:

```
new Ext.button({.....}) 
```

Instead you have to use xtypes rather than the new keyword. I think this has something to do with the fact that the deployer stores all the js code in one file and thus since I was using the new keyword, it was being created somewhere in the js file when it actually won't exist in the context. The weird thing is that it does not show any errors so hopefully this will help other folks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:59:58.667

打开你的 DOM 编辑器（我相信在 chrome 中，F12）。您的控件选择器正在选择#main-function，因此您需要确保这是一个有效的选择器。

在开发人员工具窗口的控制台上，键入：

```
Ext.ComponentQuery.query('#main-function') 
```

这应该是控制器正在尝试的。

# python - Python 将音频流 PCM 字符串高效转换为数组，以供重复使用

> ID：10946039
> 
> 赞同：2
> 
> 时间：2012-06-08T09:13:29.777
> 
> 标签：python, arrays, string, memory, audio

您好我想将通过麦克风录制的音频流转换为整数数组（或浮点数或其他）以供以后分析（fft 等）。然而，我目前的方法让我觉得效率有点低，而且我认为我看到了零星的内存分配延迟。

我正在使用 alsaaudio，因为 ossaudiodev 不再适用于大多数 Linux 发行版，但这并不重要。我从设备中得到的音频流是一串 2048 个字符，对应于 1024 个 16 位音频帧。我认为“数组”是将字符串转换为整数数组的最佳方法，但是在每个循环结束时，我必须为下一轮数据清除数组，`del`如果查看时间需要循环内部运行（不包括读取）我看到每第 4 个或第 5 个（它是零星的）循环将花费更长的时间，所以我的问题是在内存分配方面我当前的策略有效吗？

音频设备设置如下：

```
import array
import alsaaudio as alsa
audio_data = array.array("h")
ain = alsa.PCM(alsa.PCM_CAPTURE,alsa.PCM_NORMAL,card='default')
ain.setchannels(1)
ain.setrate(rate)
ain.setformat(alsa.PCM_FORMAT_S16_LE)
ain.setperiodsize(1024) 
```

然后在一个循环中我这样做

```
Nsamples,astream = ain.read()
audio_data.fromstring(astream)
## some analysis is done (FFT, plot whatever)
# i.e. 
Freq = np.abs(sy.fft(audio_data))
# clear the audio data array for next segment
del audio_data[:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:55:25.810

你试过 numpy.fromstring 吗？

# modelica - 在 OpenModelica 中对封闭式液压循环进行建模

> ID：10946041
> 
> 赞同：3
> 
> 时间：2012-06-08T09:13:46.350
> 
> 标签：modelica, openmodelica

我想模拟一个封闭的液压循环，可以在 Modelica 标准库/流体/示例/加热系统中找到。对于加热系统以及我的（简约）示例，我遇到了同样的问题：系统过度确定。您可以在接下来的讲座中发现 HeatingSystem 是一个“坏例子”，所以我想这是一个众所周知的问题，但我并不真正明白这一点。 [http://www.modprod.liu.se/MODPROD2011/1.252944/modprod2011-day2-talk3-Keynote-Francesco-Casella-Control-and-Modelica.pdf](http://www.modprod.liu.se/MODPROD2011/1.252944/modprod2011-day2-talk3-Keynote-Francesco-Casella-Control-and-Modelica.pdf)（第 20 页）

我的例子是：

一个泵

```
model producer
  pipe_flange w,k;
  parameter Real a,b,c;
equation
  w.p = k.p + a * k.Vp ^ 2 + b * k.Vp + c;
end producer; 
```

抵抗

```
model consumer
  pipe_flange w,k;
  parameter Real rho;
  parameter Real d_i;
  parameter Real zeta;
equation
  k.p = w.p - rho / 2 * ((w.Vp * 4) / 3.14 * d_i ^ 2) ^ 2 * zeta;
end consumer; 
```

它们与一个

```
connector pipe_flange
  Real p;
  flow Real Vp;
end pipe_flange; 
```

整个系统是：

```
model System
  consumer consumer1(rho = 1000, d_i = 0.06, zeta = 0.5);
  producer producer1(a = -740741, b = -19630, c = 1070);
equation
  connect(consumer1.w,producer1.w);
  connect(consumer1.k,producer1.k);
end System; 
```

任何人都可以给我一个提示问题的全部内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:21:10.060

你确定你的系统是**超定**的吗？我是; 不确定这是怎么回事，因为您的模型`producer`和`consumer`模型都未确定。

作为一般规则，组件中需要的方程数等于其所有连接器上的流量变量数 + 内部变量数（参数不计算在内）+ 输出数。

通过这种方法，您的`producer`模型应该有 2 个方程（因为它的所有连接器都有 2 个流量变量）。同样，您的`consumer`模型应该有 2 个方程（因为它的所有连接器都有两个流量变量）。所以我看不出你怎么能生成太多的方程。

您的模型也很棘手，因为您正在对通过系统的动量流进行建模（通过连接器上存在的速度作为流量变量来表示）。但你的潜在变量是压力。您的问题中没有质量跟踪（通常是这样）。

因此，总而言之，您的组件模型肯定存在问题，因为它们是“不平衡的”（根据 Modelica 规范），因为它们没有正确数量的方程。但即使在“物理”层面上，你的公式（压力和速度）在我的经验中也是不寻常的，在我看来，一旦方程平衡问题得到解决，它也可能导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:43:29.430

也许它有助于引入一个所谓的**[循环断路器](https://www.google.com/search?q=modelica%20loop%20breaker)**组件。对于封闭的液压循环，这可能是具有可变液位的[膨胀容器](https://www.google.com/search?q=modelica%20expansion%20vessel)或[储罐](https://www.google.com/search?q=modelica%20loop%20breaker%20storage%20tank)（这种组件在现实中也将存在）。

# facebook - 来自 Facebook 的即将到来的朋友生日列表

> ID：10946042
> 
> 赞同：0
> 
> 时间：2012-06-08T09:13:47.030
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

如何获取包含用户 ID、姓名和生日的朋友即将到来的生日列表。我正在使用以下 fql 查询来获取朋友 b'day 列表。

```
 query = "SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY birthday_date DESC LIMIT 50 "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:05:55.633

将您的 FQL 查询更改为：

```
SELECT uid, name, birthday_date FROM user
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me())
AND birthday_date >= "06/08"
AND birthday_date <= "06/15"
ORDER BY birthday_date ASC 
```

这会将日期限制为下周，按下一个可用生日排序。

# jquery - 注册 swf/flash 对象播放

> ID：10946046
> 
> 赞同：1
> 
> 时间：2012-06-08T09:13:58.753
> 
> 标签：jquery, flash, video-capture

这里的大问题：我有一些 Flash 游戏。排行榜显示分数，但我想将玩得最好的游戏的视频与相对分数相关联。为此，我需要在客户端浏览器上注册 swf 的视频，然后将其发回给我。假设我知道上传给我的 2 或 3 大型视频需要用户花费一些时间和耐心，我必须这样做（当然，只有当分数是最好的 3 之一时，我才会上传视频）。- 是否有任何 jquery 插件能够做到这一点？我想没有，因为我还没有找到它们... - 闪存程序员是否有可能初始化某种库来注册 swf 的输出？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:07:45.837

没有简单的方法来做你所要求的。假设游戏非常简单（例如回合制），您可能可以：

1.  记录每回合的游戏状态，并将其输出为 XML 或 JSON。然后可以将数据用作另一个游戏实例的输入，并用于驱动自动播放模式。
2.  将游戏的快照保存为`BitmapData`每回合。这些可以导出为 JPG 并按顺序显示以模拟游戏视频。

无论哪种方式，这都是需要在游戏本身中实现的。

# database-design - 数据库中没有域模型关系的原因？

> ID：10946049
> 
> 赞同：1
> 
> 时间：2012-06-08T09:14:11.177
> 
> 标签：database-design, domain-driven-design

是否存在不希望在数据库中保留域模型之间的关系的情况？

我最近在一次谈话中，设计师通过说从安全角度来看某些关系应该可以导航给给定用户来证明他的方法的合理性，因此他不赞成在 db/entity 模型中明确定义这些关系。

还有其他标准方法来解决这个问题吗？是否还有其他众所周知的场景可能不想保持关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:59:45.170

这听起来像是一种解决建模不当的数据库和/或应用程序的方法。除非应用程序明确允许/显示，否则用户无法直接访问其部门。

导航到数据和检索数据的查询应该是两个不同的东西 (IMO)，即使在 DDD 中也是如此。通过删除自然关系来进行基于角色的访问似乎是倒退的。

此外，由于无法在 DB 级别进行连接会导致速度损失，而是将它们降级为应用程序代码级别的临时“连接”，这似乎会使事情复杂化

# android - 如何以编程方式将雅虎邮件发送到 Android 应用程序

> ID：10946053
> 
> 赞同：0
> 
> 时间：2012-06-08T09:14:33.007
> 
> 标签：android

我想在我的 android 应用程序中显示所有 yahoomail 邮件。可以使用 Imap 吗？Imap 是否支持 yahoomail？

以下是我尝试过的代码。

以下是获取 yahoomails 的代码

```
public void getYahooMails(View V) throws MessagingException {

    try {

        store = imapSession.getStore("imaps");

        store.connect("imap.mail.yahoo.com", "username", "password");
        System.out.println("*******Message here********"
                + store.isConnected());
        if (store.isConnected()) {
            inbox = store.getFolder("Inbox");
            inbox.open(Folder.READ_ONLY);
            Message[] result = inbox.getMessages();
            System.out.println(result.length + "======"
                    + inbox.getUnreadMessageCount());

            /*
             * for(int i=result.length;i>0;i--) { if(i==1000) {
             * System.out.println
             * (result[i].getSubject()+"=====mesaage ====>"
             * +result[i].getSentDate()); } }
             */

        }
    } catch (Exception w) {

        // w.printStackTrace();
        System.out.println("*******Message here********"
                + store.isConnected());
        // System.out.println(w.getMessage());
        w.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:42:49.043

也许您可以使用[android k9 mail的源代码](https://github.com/k9mail/k-9)作为示例。

我正在使用 k9 使用**pop3 协议**阅读我的雅虎邮件。我不知道你是否可以通过 imap 访问 yahoo。

# iphone - tabBar didSelectItem 似乎不起作用

> ID：10946058
> 
> 赞同：8
> 
> 时间：2012-06-08T09:14:55.633
> 
> 标签：iphone, ios, xcode, uitabbar

在我的头文件中，我有这个：

```
@interface TabBarController : UIViewController <UIApplicationDelegate, UITabBarDelegate, UITabBarControllerDelegate>{

    IBOutlet UITabBarController *tabBarController;

}

-(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item;

@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;

@end 
```

在我的主文件中，我有这个：

```
@synthesize tabBarController;

-(void)viewDidLoad{
    [super viewDidLoad];
    self.tabBarController.delegate = self;
    self.view = tabBarController.view;
}

-(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{
    NSLog(@"rawr"); 
}

- (void)viewDidUnload {
    [super viewDidUnload];
}

- (void)dealloc {
    [tabBarController release];
    [super dealloc];
}

@end 
```

我已经将我`tabbarcontroller`作为委托人连接到接口构建器中的文件所有者，但它仍然从未调用该`didSelectItem`方法。

有什么我在这里想念的吗？

我已经加了`tabBarController.delegate = self;`，还是不行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T04:31:11.600

```
-(void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item; 
```

这个方法是UITabBar的委托方法，不是UITabBarController，所以

```
self.tabBarController.delegate = self; 
```

不管用。

选项卡栏控制器有自己的 UITabBar，但不允许更改由选项卡栏控制器管理的选项卡栏的委托，所以只需尝试这样的 UITabBarControllerDelegate 方法：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:18:43.957

你需要添加这个：

```
tabbarcontroller.delegate = self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T12:49:41.013

使用`UITabBarControllerDelegate`代替`UITabBarDelegate`和
`-tabBarController:didSelectViewController{}`代替`tabBar:didSelectItem{}`

> 界面

```
@interface TabBarController : UIViewController <UIApplicationDelegate, UITabBarControllerDelegate, UITabBarControllerDelegate>{

    IBOutlet UITabBarController *tabBarController;
}
@property (nonatomic, retain) IBOutlet UITabBarController *tabBarController;
@end 
```

> 主文件

```
@implementation TabBarController
    @synthesize tabBarController;

    /*other stuff*/
    - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{
        NSLog(@"rawr"); 
    }
    /*other stuff*/
@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:40:19.227

只需为标签栏设置委托。您可以通过`self.tabBarController.delegate = self;`对 tabbarcontroller 对象（而不是 bar）设置或使用 Interface builder do 查看连接检查器并拖动文件所有者上的连接来完成此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:21:33.200

您已经合成了标签栏，所以您现在需要编写：`self.tabBarController.delegate = self;`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-25T00:16:44.320

如上所述，它可能无法正常工作的原因有很多。这是一个更微妙的原因。如果您以编程方式创建 UI（没有情节提要或 Xib），则需要设置 UIWindow 的屏幕。

```
self.window = [[UIWindow alloc] init];
self.window.screen = [UIScreen mainScreen];  // <- The UITabViewController will not
                                             //    accept taps without this. 
```

如果您使用的是 Xib，我相信这相当于选择了“启动时全屏”。这必须检查，否则我注意到我的选项卡不起作用。

**更新：**无论如何，如果你必须给我投票，但我有一个不工作的选项卡控制器，这是我必须做的才能让它工作。此页面上的其他答案都没有帮助我。我想这些天使用 xib/storyboard 是非常罕见的（我认为这是从 iOS 5 天开始的），但是离开这里是为了遇到这种情况的人。

# php - 如何在shell中转储sql

> ID：10946059
> 
> 赞同：2
> 
> 时间：2012-06-08T09:14:58.280
> 
> 标签：php, postgresql, cakephp

我从这里找到了 SQL 转储任务[http://bakery.cakephp.org/articles/carcus88/2011/04/08/sql_dump_task_for_shells](http://bakery.cakephp.org/articles/carcus88/2011/04/08/sql_dump_task_for_shells)

我在外壳中使用。我已经声明了

> $tasks = array('SqlDump')

而且，我把这些代码放在 main() 的最后一行

> pr($this->SqlDump->dump_array());

但是没有sql打印出来。如果有人知道如何使用，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:39:02.063

shell 通常会限制输出的大小（如果打印输出过多，可能会切断其中的一部分）。因此我会选择日志解决方案。

检查我的组件方法： [https ://github.com/dereuromark/tools/blob/2.0/Controller/Component/CommonComponent.php#L601](https://github.com/dereuromark/tools/blob/2.0/Controller/Component/CommonComponent.php#L601)

对于 shell 环境，它可能是可重写的。基本上获取sql日志并将其写入文件：

```
$log = $object->getDataSource()->getLog(false, false);
CakeLog::write('sql', $log); 
```

当然你也可以在屏幕上打印出来。

# jquery - JQuery：是否可以在不迭代DOM树两次的情况下选择靠近选中复选框的项目？

> ID：10946062
> 
> 赞同：0
> 
> 时间：2012-06-08T09:15:09.047
> 
> 标签：jquery

有没有一种简单的方法可以选择靠近选中复选框（相同的 tr fe）的某个类的所有项目，**而无需两次迭代树？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:19:27.863

尝试：

`$('input:checked').closest('tr').find('.yourClass')`

# android - Andengine Collisions - 检测碰撞和删除物体时的异常

> ID：10946066
> 
> 赞同：0
> 
> 时间：2012-06-08T09:15:35.680
> 
> 标签：android, box2d, andengine

我正在开发一个由andengine 驱动的box2d 游戏。当我尝试从场景中删除碰撞的物体时，有时会发生以下错误。似乎这是一个随机错误。

```
Uncaught handler: thread GLThread exiting due to uncaught exception
java.lang.IndexOutOfBoundsException: Invalid location 48, size is 48
at java.util.ArrayList.get(ArrayList.java:341)
at org.anddev.andengine.entity.Entity.onManagedDraw(Entity.java:835)
at org.anddev.andengine.entity.shape.Shape.onManagedDraw(Shape.java:105)
at org.anddev.andengine.entity.Entity.onDraw(Entity.java:719)
at org.anddev.andengine.entity.Entity.onManagedDraw(Entity.java:835)
at org.anddev.andengine.entity.scene.Scene.onManagedDraw(Scene.java:271)
at org.anddev.andengine.entity.Entity.onDraw(Entity.java:719)
at org.anddev.andengine.engine.Engine.onDrawScene(Engine.java:507)
at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:499)
at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:148)
at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:617)
at org.anddev.andengine.opengl.view.GLSurfaceView$GLThread.run(GLSurfaceView.java:549) 
```

* * *

以下是我的更新代码块：

```
scene.registerUpdateHandler(new IUpdateHandler(){

            public void onUpdate(float pSecondsElapsed) {
                // TODO Auto-generated method stub
                try{
                scoreA = "SCORE  : "+p1score;
                hudTxtScoreA.setText(scoreA);
                scoreB = "SCORE  : "+p2score;
                hudTxtScoreB.setText(scoreB);
                if(p1score==900)
                {
                    hudTxtScoreA.setText("won");
                    runOnUiThread(new Runnable() {
                        public void run() {

                            AlertDialog.Builder builder = new AlertDialog.Builder(GmailGame.this);
                            builder.setMessage(playerA+" won the game !!!")
                                   .setCancelable(false)
                                   .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                       public void onClick(DialogInterface dialog, int id) {
                                           startActivity(new Intent(GmailGame.this, JoinGame.class));
                                           GlobalClass.setPartner("");

                                       }
                                   });
                            AlertDialog alert = builder.create();

                            alert.show();
                        }
                    });

                    //mEngine.stop();
                }
                else if(p2score==900)
                {
                    hudTxtScoreB.setText("won");

                    runOnUiThread(new Runnable() {
                        public void run() {

                            AlertDialog.Builder builder = new AlertDialog.Builder(GmailGame.this);
                            builder.setMessage(playerB+" won the game !!!")
                                   .setCancelable(false)
                                   .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                       public void onClick(DialogInterface dialog, int id) {
                                           startActivity(new Intent(GmailGame.this, JoinGame.class));
                                           GlobalClass.setPartner("");

                                       }
                                   });
                            AlertDialog alert = builder.create();

                            alert.show();
                        }
                    });

                    //mEngine.stop();
                }

                if(x1!=null)
                {   
                    if(status.equals("1")){
                        isMyTurn=true;
                        status="0";
                    }

                if((x1.getBody().getUserData().toString().equals("cat1"))||(x2.getBody().getUserData().toString().equals("cat1"))){
                    if(icat1==0){
                        icat1=1;
                Log.e("suchith", x1.getBody().getUserData().toString());

                String x1String = x1.getBody().getUserData().toString();
                String x2String = x2.getBody().getUserData().toString();

                mPhysicsWorld.destroyBody(bcat1);
                scene.getLastChild().detachChild(scat1);

                p1score=p1score+100;
                //scene.detachChild(scat1);

                if(isMyTurn)
                sendMessage1(x1String,x2String,"body");

                    }

                }
                else if((x1.getBody().getUserData().toString().equals("cat2"))||x2.getBody().getUserData().toString().equals("cat2")){
                    if(icat2==0){
                        icat2=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bcat2);   
                    scene.getLastChild().detachChild(scat2);
                    p1score=p1score+100;
                    p1win=p1win+1;
                    //scene.detachChild(scat2);

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");

                    }
                    }
                else if((x1.getBody().getUserData().toString().equals("dog1"))||(x2.getBody().getUserData().toString().equals("dog1"))){
                    if(idog1==0)
                    {
                        idog1=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bdog1);
                    scene.getLastChild().detachChild(sdog1);
                    //scene.detachChild(sdog1);
                    p1score=p1score+200;
                    p1win=p1win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");

                    }
                    }
                else if((x1.getBody().getUserData().toString().equals("dog2"))||x2.getBody().getUserData().toString().equals("dog2")){
                    if(idog2==0){
                        idog2=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bdog2);   
                    scene.getLastChild().detachChild(sdog2);
                    //scene.detachChild(sdog2);
                    p1score=p1score+200;
                    p1win=p1win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");
                }
                    }
                else if((x1.getBody().getUserData().toString().equals("dog3"))||x2.getBody().getUserData().toString().equals("dog3")){
                    if(idog3==0){
                        idog3=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bdog3);
                    scene.getLastChild().detachChild(sdog3);
                    //scene.detachChild(sdog2);
                    p1score=p1score+300;
                    p1win=p1win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");
                }
                    }
                if((x1.getBody().getUserData().toString().equals("ecat1"))||(x2.getBody().getUserData().toString().equals("ecat1"))){
                    if(iecat1==0){
                        iecat1=1;
                Log.e("suchith", x1.getBody().getUserData().toString());

                String x1String = x1.getBody().getUserData().toString();
                String x2String = x2.getBody().getUserData().toString();

                mPhysicsWorld.destroyBody(becat1);
                scene.getLastChild().detachChild(secat1);
                p2score=p2score+100;
                p2win=p2win+1;
                //scene.detachChild(scat1);

                if(isMyTurn)
                sendMessage1(x1String,x2String,"body");

                    }

                }
                else if((x1.getBody().getUserData().toString().equals("ecat2"))||x2.getBody().getUserData().toString().equals("ecat2")){
                    if(iecat2==0){
                        iecat2=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(becat2);  
                    scene.getLastChild().detachChild(secat2);
                    p2score=p2score+100;
                    p2win=p2win+1;
                    //scene.detachChild(scat2);

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");

                    }
                    }
                else if((x1.getBody().getUserData().toString().equals("edog1"))||(x2.getBody().getUserData().toString().equals("edog1"))){
                    if(iedog1==0)
                    {
                        iedog1=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bedog1);
                    scene.getLastChild().detachChild(sedog1);
                    //scene.detachChild(sdog1);
                    p2score=p2score+200;
                    p2win=p2win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");

                    }
                    }
                else if((x1.getBody().getUserData().toString().equals("edog2"))||x2.getBody().getUserData().toString().equals("edog2")){
                    if(iedog2==0){
                        iedog2=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bedog2);  
                    scene.getLastChild().detachChild(sedog2);
                    //scene.detachChild(sdog2);
                    p2score=p2score+200;
                    p2win=p2win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");
                }
                    }
                else if((x1.getBody().getUserData().toString().equals("edog3"))||x2.getBody().getUserData().toString().equals("edog3")){
                    if(iedog3==0){
                        iedog3=1;
                    Log.e("suchith", x1.getBody().getUserData().toString());

                    String x1String = x1.getBody().getUserData().toString();
                    String x2String = x2.getBody().getUserData().toString();

                    mPhysicsWorld.destroyBody(bedog3);
                    scene.getLastChild().detachChild(sedog3);
                    //scene.detachChild(sdog2);
                    p2score=p2score+300;
                    p2win=p2win+1;

                    if(isMyTurn)
                    sendMessage1(x1String,x2String,"body");
                }
                    }                   

                }           
                }
                catch(NullPointerException e)
                {
                    Log.e("Update","Null");
                }
                catch(Exception e){
                                            Log.e("Udate","Error");
                }
            }
            public void reset() {
                // TODO Auto-generated method stub

            }
        });
        return scene;
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T18:24:09.920

您正在删除 UI 线程上的正文。这意味着在绘制场景时，它会尝试绘制不再附加到场景的东西，并且您会得到 ArrayIndexOutOfBoundsException。如果您使用 runOnUpdateThread 而不是 runOnUiThread，则应该没有问题。

# c# - 将 html-widget (form) 实现到 asp-site

> ID：10946068
> 
> 赞同：0
> 
> 时间：2012-06-08T09:15:43.850
> 
> 标签：c#, javascript, asp.net, forms, widget

我尝试在我的 asp.net 站点中实现以下小部件：

```
<div style="width: 175px; margin: 0px; padding: 0px; text-align: right; background-color:#FFFFFF;">
<img src="http://fahrplan.sbb.ch/img/igm-sbblogo.gif" width="110" height="18" alt="SBB|CFF|FFS" />
<h1 style="width:175px; background-color: #DDDDDD; color: #000000; font-family: Arial, Helvetica, sans-serif; font-size:12px; font-weight: bold; padding: 2px 0px; margin: 0; height: 15px; text-align: left;clear:both;"> Fahrplan</h1>
<div style="width: 100%; background-color: #F8F8F8; margin: 0; padding: 0px;" summary="Layout">
<form action="http://fahrplan.sbb.ch/bin/query.exe/dn?externalCall=yes&DCSext.wt_fp_request=partner_mini" name="formular" method="post" style="display:inline" target="_blank">
<input type="hidden" name="queryPageDisplayed" value="yes">
<table cellspacing="0" cellpadding="4" style="width: 170px; margin: 2px;" class="ig">
<tr>
<th nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; font-weight:bold; width: 55px;">
 Von: 
</th>
<td style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;" colspan="2">
<input type="hidden" name="REQ0JourneyStopsSID" value="A=1@O=Stettbach, Bahnhof@X=8596132@Y=47397270@U=85@L=008591065@B=1@p=1338878028@">
<span style="font-weight:bold;">Stettbach, Bahnhof</span>
</td>
</tr>
<tr>
<td style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;">
<select name="REQ0JourneyStopsZA" style="background-color:#fff; border: 1px solid #7F9DB9; color: #000; width: 60px; font-size:11px; margin:0px 0px;">
<option selected="selected" value="7">Nach:</option>
<option  value="1">Bhf./Haltest.</option>
<option  value="2">Ort, Strasse Nr.</option>
<option  value="4">Sehenswürdigkeit</option>
</select>
</td>
<td style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;" colspan="2">
<input type="text" name="REQ0JourneyStopsZG" value="" size="16" style="background-color:#fff; border: 1px solid #7F9DB9; color: #000; width: 100px; height: 18px; font-size: 11px" accesskey="t" tabindex="2">
<input type="hidden" name="REQ0JourneyStopsZID">
</td>
</tr>
<tr>
<th nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; font-weight:bold; width: 55px;">
 Datum: 
</th>
<td nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;">
<b>08.06.12</b>
<input type="hidden" name="REQ0JourneyDate" value="08.06.12" accesskey="d">
</td>
</tr>
<tr>
<th nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; font-weight:bold; width: 55px;">
 Zeit: 
</th>
<td nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;">
<input type="text" name="REQ0JourneyTime" value="11:02" size="5" maxlength="5" style="background-color:#fff; border: 1px solid #7F9DB9; color: #000; width: 100px; height: 18px; font-size: 11px" accesskey="c" tabindex="4">
</td>
</tr>
<tr>
<th> </th>
<td nowrap="nowrap" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:left; vertical-align:middle; padding:2px 3px 2px 0px;">
<input class="radio" type="radio" name="REQ0HafasSearchForw" value="1"  checked style="margin-right:3px;">Abfahrt 
<br /><input class="radio" type="radio" name="REQ0HafasSearchForw" value="0"   style="margin-right:3px;">Ankunft
</td>
</tr>
<tr>
<td colspan="2" style="text-align:left;">
<input type="hidden" name="start" value="Suchen">
<input type="submit" name="start" value="Verbindung suchen" tabindex="5" style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:center; width:130px; vertical-align: middle; cursor:pointer; -moz-border-radius: 3px 3px 3px 3px; background-color:#EE0000; border:1px solid #B20000; color:#FFFFFF; font-weight:bold; height:auto; line-height:20px; padding:0px 10px; text-decoration:none; white-space:nowrap;">
</td>
</tr>
<tr>
<td colspan="2" style="text-align:left;">
<a style="font-family:Arial,Helvetica,sans-serif; font-size:12px; text-align:left; margin-top:4px; color: #6B7786; text-decoration:none; display:block;" href="http://www.sbb.ch/166" target="_blank" title="Aktuelle Informationen zu Streiks und grösseren Unterbrüchen im Schienenverkehr."><img src="http://fahrplan.sbb.ch/img/one/icon_arrow_right.png" alt="" style="vertical-align:top; padding-right:2px; border:none;" />Bahnverkehrsinformation</a>
</td>
</tr>
</table>
</form>
</div>
</div>
<script language="JavaScript1.2" type="text/javascript">
/* <![CDATA[ */
var time=new Date();
var hour = time.getHours(); hour=(hour<10)? '0'+hour:hour;
var minute = time.getMinutes();minute=(minute<10)? '0'+minute:minute;
var travelTime = hour+':'+minute;
document.formular.REQ0JourneyTime.value=travelTime;
// /* ]]> */
</script> 
```

代码来源： http://fahrplan.sbb.ch/bin/help.exe/en?application=INPUTGEN& [tpl=inputgen_start](http://fahrplan.sbb.ch/bin/help.exe/en?application=INPUTGEN&tpl=inputgen_start)

当我创建一个普通的 HTML 站点时，小部件可以正常工作。

但是在asp站点中，javascript存在问题。在“document.formular.REQ0JourneyTime.value=travelTime;”行中 出现此错误消息：

“JScript 运行时错误：无法检索属性“REQ0JourneyTime”值：对象为空或未定义。”

我认为这个问题与小部件的表单标签和后期操作有关，但我不知道，它到底是什么：S

有人知道如何解决这个问题吗？非常感谢！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:26:56.920

我认为您在 ASPX 服务器端表单标记中嵌套了一个 HTML 表单。

[ASP.net 页面上的表单标签](https://stackoverflow.com/questions/926481/form-tag-on-asp-net-page)

您可以尝试在您的小部件中使用 AJaX，而不是通过传统表单发回。

也阅读这篇文章：http: [//msdn.microsoft.com/en-us/magazine/cc164151.aspx](http://msdn.microsoft.com/en-us/magazine/cc164151.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:22:55.733

您可能应该通过`document.forms.formular`or访问表单`document.forms['formular']`，而不是`document.formular`。

另外，最后`<input ... name="REQ0JourneyTime" ... />`你还`>`没有`/>`。

# sql-server - 查询以创建没有唯一参数的子类型

> ID：10946070
> 
> 赞同：1
> 
> 时间：2012-06-08T09:15:47.687
> 
> 标签：sql-server, relational-database, create-table, subtype

假设我有一个名为 Box 的超类型实体和三个子类型 BlackBox、WhiteBox、GrayBox。Blackbox 和 WhiteBox 没有自己的参数。在我的关系图中，Box 将 BoxCode 作为主键，BlackBox 将 BLBoxCode 作为其 pk。

如何在 MS SQL 中为 BlackBox 创建表？请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:23:54.390

同一列应该是直接超类型的主键和外键。

```
CREATE TABLE BlackBox
(
    box_id int NOT NULL PRIMARY KEY REFERENCES Box (box_id),
    ...
) 
```

# c - libcurl c CURLOPT_PROGRESSFUNCTION

> ID：10946075
> 
> 赞同：1
> 
> 时间：2012-06-08T09:15:56.663
> 
> 标签：c, libcurl

我需要知道我在 C 中使用 libcurl 的下载状态。我发现我必须使用 CURLOPT_PROGRESSFUNCTION。

```
int progress_func(void* ptr, double TotalToDownload, double NowDownloaded, 
                    double TotalToUpload, double NowUploaded)
{
   //Bla bla
}

curl_easy_setopt(curl, CURLOPT_NOPROGRESS, FALSE);
curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, progress_func); 
```

我无法理解两件事：1）这个函数progress_func“多久”被调用？2) 如何将其他参数传递给progress_func 函数？因为我必须将连接状态（速度，下载量）写入一个带有变量 url 的文件中，所以我必须将这个 url 传递给函数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:22:22.643

见[`CURLOPT_PROGRESSDATA`](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROGRESSDATA)：

```
struct my_progress_data_struct
{
    /* Some data fields */
};

struct my_progress_data_struct progress_data;

curl_easy_setopt(curl, CURLOPT_PROGRESSDATA, &progress_data); 
```

数据将在`ptr`进度回调的参数中传递。

至于第一个问题，根据[API 参考](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTPROGRESSFUNCTION)，回调将被称为“大约每秒一次或更快”。

# php - 使用 Content-Disposition 的 PHP 文件下载问题：附件

> ID：10946077
> 
> 赞同：3
> 
> 时间：2012-06-08T09:16:08.850
> 
> 标签：php, zend-framework, download, attachment, content-disposition

我的网页上有一个链接，可以下载我在服务器上生成的 .CSV 文件。下载代码如下：

```
//open/save dialog box
header('Content-Disposition: attachment; filename="inventoryData.csv"');
//content type
header('Content-type: application/excel');
//read from server and write to buffer
readfile('spreadsheet/inventory.csv'); 
```

当我在服务器上打开文件时，它看起来很好。但是，当我通过对话框下载文件时，它会将网页的 HTML 代码预先添加到 .csv 文件中。

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T17:12:12.667

如果此代码在我认为是因为您使用 ZF 的控制器操作中，那么您需要禁用您的布局和视图渲染器，因为它将尝试渲染视图。

尝试：

```
public function downloadAction()
{
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);

    //...

    //open/save dialog box
    header('Content-Disposition: attachment; filename="inventoryData.csv"');
    //content type
    header('Content-type: application/excel');
    //read from server and write to buffer
    readfile('spreadsheet/inventory.csv');
} 
```

`$this->_helper->layout()->disableLayout();`防止您的布局脚本被渲染（假设您使用布局），并`$this->_helper->viewRenderer->setNoRender(true);`告诉视图渲染器不要为可能包含一些 HTML 或空白的控制器操作渲染视图脚本。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T09:29:46.880

这应该可以解决问题

```
 header("Pragma: public");
  header("Expires: 0");
  header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
  header("Cache-Control: private",false);
  header("Content-Type: application/octet-stream");
  header("Content-Disposition: attachment; filename=\"inventoryData.csv\";" );
  header("Content-Transfer-Encoding: binary"); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-08T09:24:43.637

试试这个：

```
header("Content-type: application/octet-stream");
header("Content-disposition:attachment; filename=inventoryData.csv"); 
```

# ruby-on-rails - Rails 允许用户在运行时配置 ActionMailer

> ID：10946079
> 
> 赞同：1
> 
> 时间：2012-06-08T09:16:13.790
> 
> 标签：ruby-on-rails, actionmailer

我想创建一个 Rails 应用程序，在第一次请求用户被引导到设置配置向导时。在此向导中，他们需要配置其电子邮件设置以供 ActionMailer 使用，即。SMTP 服务器设置/凭据。

如何以编程方式更新 ActionMailer 的配置条目（我假设 Application.rb 需要更新）？

如何让 ActionMailer 重新加载这些更新的配置设置？我注意到很多这些设置是在应用程序启动/初始化时加载的，我不想重新启动 Rails 应用程序以使这些更改生效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T12:13:52.573

只需将设置存储到会话中并在为您的 AC 过滤之前在内部执行此操作：

```
class ApplicationController < ActionController::Base

    before_filter :set_mailer_settings

    private

      def set_mailer_settings

        ActionMailer::Base.smtp_settings = {
          :address  => session[:smtp_address],
          :port  => session[:smtp_port],
          :domain => session[:smtp_domain],
          :authentication => session[:smtp_authentication],
          :user_name => session[:smtp_user_name],
          :password => session[:smtp_password]
        }

      end

end 
```

# linux-kernel - 编译器/链接器如何解析内核 API，如从 linux 上的模块调用的“printk”

> ID：10946081
> 
> 赞同：3
> 
> 时间：2012-06-08T09:16:17.360
> 
> 标签：linux-kernel, linux-device-driver, kernel, kernel-module

我编写了一个示例 hello.ko 内核模块：

```
#include <linux/module.h>      /* Needed by all modules */
#include <linux/kernel.h>      /* Needed for KERN_INFO */

int init_module(void)
{
        printk(KERN_INFO "Hello world.\n");
        return 0;
}

void cleanup_module(void)
{
        printk(KERN_INFO "Goodbye world 1.\n");
} 
```

在这里，我使用了“printk”方法，它是 Linux 公开的内核 API。我可以在“/proc/kallsyms”中看到 Linux 导出的符号。我很想知道 gcc/ld 如何链接被调用的内核 API？gcc/ld 是否从“/proc/kallsyms”或其他文件中获取内核方法的地址并执行链接？如果是，gcc/ld 如何知道这一点？我没有任何选择可以说明这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T16:55:02.723

Linux 内核的模块加载器基本上包含一个专用的运行时链接器。.ko 文件实际上是一个与任何其他文件一样的目标文件，因此它带有一个符号表。如果你`nm`在它上面运行（`nm <path/to/some_module.ko>`），你会看到很多标记为“U”的符号，即“未定义”。这包括模块使用的核心内核函数的符号，例如`printk`、`__kmalloc`、`kfree`等，但在许多情况下还包括其他模块实现的符号。

加载模块时，内核运行模块的未定义符号并在（运行时）符号表中查找它们，修补相关的内存位置，就像任何其他链接器一样。`insmod`如果符号表中还没有任何未定义的符号，加载将失败（通过使用而不是易于演示，`modprobe`因为它不会加载依赖项）。它还将模块导出的任何符号添加到符号表中以供其他模块使用，跟踪依赖关系，因此您不能抽出另一个模块使用的模块。[Ilya Matveychikov](https://stackoverflow.com/users/651394)已在评论中链接到模块加载器中的相关代码，如果您想了解所有血腥细节，这将有所帮助。

# javascript - 如何使用自定义配置缩小 CSS 和 JS？

> ID：10946082
> 
> 赞同：3
> 
> 时间：2012-06-08T09:16:23.507
> 
> 标签：javascript, css, obfuscation, minimization

我需要一个可靠的 JS 和 CSS 最小化器，它可以自定义并与现代 CSS3 属性兼容。我更喜欢它有类似属性文件的东西以便配置。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:20:34.363

正如此[线程](https://stackoverflow.com/questions/4843871/javascript-and-css-minimizer)中提到的@Calgary Coder ：

> 有多种选择。就实际工具而言，最常见的是：
> 
> 1）[谷歌闭包编译器服务](http://closure-compiler.appspot.com/home)
> 
> 2)[微软 AJAX 缩小器](http://aspnet.codeplex.com/releases/view/40584)
> 
> 3) [YuiCompressor](http://yuilibrary.com/projects/yuicompressor/)或[YuiCompressor.NET](http://yuicompressor.codeplex.com/)
> 
> 可能还有更多，但我已经使用了这些工具中的每一个，并且都非常适合使用。
> 
> 如果您正在使用 .NET 应用程序库，还有各种其他选项可以扩展这些基本工具，以组合类似资源并减少整体 HTTP 请求。
> 
> 1)[梳子](http://combres.codeplex.com/)
> 
> 2) [Xpedite](http://xpedite.codeplex.com/)
> 
> 3)[压扁](http://www.codethinked.com/post/2010/05/26/SquishIt-The-Friendly-ASPNET-JavaScript-and-CSS-Squisher.aspx)
> 
> 同样，可能还有更多……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:21:34.357

这是一个出色的 JS 缩小器：[https ://github.com/mishoo/UglifyJS](https://github.com/mishoo/UglifyJS)

由 jQuery 使用

# android - 如何使用 FB API 从 android 应用程序在 facebook 上发布链接？

> ID：10946085
> 
> 赞同：4
> 
> 时间：2012-06-08T09:16:37.220
> 
> 标签：android, facebook, share

我浏览了所有互联网，但找不到如何使用 fb sdk\api 在 facebook 墙上发布带有特定图片的链接。

我知道这是我需要使用的代码的一部分：

```
Facebook facebookClient = new Facebook("fb_App_id");

Bundle parameters = new Bundle();
parameters.putString("message", "Test Photo");
parameters.putString("link", "https://www.google.com");
parameters.putString("picture", "link to some pictrue");
facebookClient.dialog(MainActivity.this, "stream.publish", parameters, new DialogListener() {

@Override
public void onFacebookError(FacebookError e) {
    // TODO Auto-generated method stub

}

@Override
public void onError(DialogError e) {
    // TODO Auto-generated method stub

}

@Override
public void onComplete(Bundle values) {
    // TODO Auto-generated method stub

}

@Override
public void onCancel() {
    // TODO Auto-generated method stub

}
}); 
```

当我尝试使用此代码时，出现“找不到源”错误。我认为我错过了连接\验证步骤......

我怎样才能让它工作？

另一件事：如果我在我在 Google Play 上共享的个人应用程序中使用 FB SDK，并且该应用程序是免费的但上面有广告，那么在我的应用程序中使用 FB SDK 是否合法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T07:47:10.503

最后我找到了怎么做。

您需要声明这两个：

```
Facebook facebookClient;    
SharedPreferences mPrefs; 
```

在 onCreate 函数中，我使用 facebook AppID 初始化 facebookClient。

**午餐 facebook 分享的课程必须是 Activity**

我在活动中添加了三个功能：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebookClient.authorizeCallback(requestCode, resultCode, data);
}

public void loginToFacebook() {
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebookClient.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebookClient.setAccessExpires(expires);
    }

    if (!facebookClient.isSessionValid()) {
        facebookClient.authorize(this, new String[] { "publish_stream" }, new DialogListener() {

            @Override
            public void onCancel() {
                // Function to handle cancel event
            }

            @Override
            public void onComplete(Bundle values) {
                // Function to handle complete event
                // Edit Preferences and update facebook acess_token
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebookClient.getAccessToken());
                editor.putLong("access_expires", facebookClient.getAccessExpires());
                editor.commit();

                postToWall();
            }

            @Override
            public void onError(DialogError error) {
                // Function to handle error

            }

            @Override
            public void onFacebookError(FacebookError fberror) {
                // Function to handle Facebook errors

            }

        });
    }
}

private void postToWall() {
    Bundle parameters = new Bundle();
    parameters.putString("name", "Battery Monitor");
    parameters.putString("link", "https://play.google.com/store/apps/details?id=com.ck.batterymonitor");
    parameters.putString("picture", "link to the picture");
    parameters.putString("display", "page");
    // parameters.putString("app_id", "228476323938322");

    facebookClient.dialog(MainActivity.this, "feed", parameters, new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onError(DialogError e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onComplete(Bundle values) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onCancel() {
            // TODO Auto-generated method stub
        }
    });
} 
```

最后：

```
 ImageButton facebookButton = (ImageButton) findViewById(R.id.button_FacebookShare);
        facebookButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                loginToFacebook();

                if (facebookClient.isSessionValid()) {
                    postToWall();
                }
            }
        }); 
```

它会自动登录到 facebook，然后显示 facebook share\post 对话框。代码取自本[教程](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:41:57.853

我猜您的问题是您正在使用已弃用的[stream.publish路径：](http://developers.facebook.com/docs/reference/rest/stream.publish/)

> 请注意：我们正在弃用 REST API，因此如果您正在构建新应用程序，则不应使用此功能。而是使用 Graph API 并将 Post 对象发布到`feed` User 对象的连接

而是这样做：

```
facebookClient.dialog(MainActivity.this, "feed", parameters, new DialogListener() {
...

}); 
```

# android - Android WebView 硬件加速键盘故障

> ID：10946086
> 
> 赞同：1
> 
> 时间：2012-06-08T09:16:45.750
> 
> 标签：android, webview, keyboard, hardware-acceleration, duplication

当 WebView 是硬件加速时，单击输入字段会导致键盘出现，并且 html 会被重绘并移动并复制片刻：

1) 当软键盘出现时，WebView 将其内容平移到左下角，然后再回到正常位置。导致简短的可见重复。

2) 更改键盘时（例如 abc->numbers），内容按键盘高度向下平移，然后返回正常位置。导致简短的可见重复。

在两台 Android 4.0 平板电脑上进行测试，如果关闭硬件加速，则不会出现此类故障。

我没有找到这方面的*任何*信息，有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T07:20:19.093

所以我终于找到了一些解决方案：

1.  整个 WebView 内容按布局边距宽度移动，因此将其设置为`0px`解决此问题。

2.  `android:windowSoftInputMode="adjustPan"`用于 WebView 活动。

# java - 如何将 odbc 数据库连接到我的 java 代码？

> ID：10946090
> 
> 赞同：2
> 
> 时间：2012-06-08T09:16:55.473
> 
> 标签：java, sql, database, database-connection, jdbc-odbc

我需要将 odbc 数据库连接到我的 java 代码。我知道要连接 mdb 数据库，我需要使用此代码，但它不起作用：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
// set this to a MS Access DB you have on your machine
String filename = "C:/porogram/pro.mdb";
String database = "jdbc:odbc:Driver={Microsoft Access Driver(*.mdb)};DBQ="; 
database+= filename.trim() + ";DriverID=22;READONLY=true}"; // add on to the end 
// now we can get the connection from the DriverManager
Connection con = DriverManager.getConnection( database ,"",""); 
Statement s = con.createStatement(); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:24:27.457

目前我正在使用 jdbc-odbc 网桥，我的代码 100% 为我工作：

```
this.jdbcUser = PropUtil.getValue(configFile, "jdbc.user");
this.jdbcPass = PropUtil.getValue(configFile, "jdbc.pass");
this.jdbcUrl = PropUtil.getValue(configFile, "jdbc.url");
this.jdbcDriver = PropUtil.getValue(configFile, "jdbc.driver");

//Be sure to load required JDBC driver
Class.forName(jdbcDriver);
dbconn = DriverManager.getConnection(jdbcUrl, jdbcUser, jdbcPass); 
```

属性文件：

```
jdbc.user=db_user
jdbc.pass=db_pass
jdbc.url=jdbc\:odbc\:Driver={Microsoft Access Driver (*.mdb)};DBQ=C\:/Data/data1.mdb
jdbc.driver=sun.jdbc.odbc.JdbcOdbcDriver 
```

请分享有关您的问题的更多信息，例如 stacktrace 或其他。

# mysql - 从复杂的mysql语句中获取计数

> ID：10946092
> 
> 赞同：1
> 
> 时间：2012-06-08T09:17:02.930
> 
> 标签：mysql

我试图从以下 mysql 语句中获取唯一问题的计数，但每次我尝试将 count(q.id) 添加为 questionCount 时，该语句只返回一个结果。我显然做错了什么，但我无法弄清楚它是什么。

[http://www.sqlfiddle.com/#!2/34906/58](http://www.sqlfiddle.com/#!2/34906/58)

希望有人可以提供帮助。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:24:30.030

只需将查询的第二行编辑为此：

```
select
  count(distinct FinalQA.QUESTION_ID)   from..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:20:06.780

It appears you want the total questions "stamped" on every row... for example you are auto-generating a test and want it to show "Out of 5 questions" in the output. To simplify this, since you KNOW you want 5 questions via your WHERE clause, I would slightly adjust it to...

```
select
      FinalQA.*
   from
      ( select 
              5 as TotalQuestionsOffered,
              QWithAllAnswers.*,
              ... rest of query ) FinalQA
   where
      FinalQA.ARankSeq <= FinalQA.TotalQuestionsOffered 
```

# android - 触摸文本在图像上的移动

> ID：10946094
> 
> 赞同：0
> 
> 时间：2012-06-08T09:17:28.227
> 
> 标签：android

我想将文本移动到图像上以将文本固定在图像上所需的位置。我成功运行了这段代码，但它不是最佳的，因为它不是用户友好的。
文本移动有时与手指的拾取和放下不匹配。
如果有人有更好的代码请与我分享或让我知道我是否遗漏了什么。

```
//Listeners for the Canvas that is being awarded
                 popImgae.setOnTouchListener( new OnTouchListener(){

                        public boolean onTouch(View v, MotionEvent e) {
                            someGlobalXvariable = e.getX();
                            someGlobalYvariable = e.getY();
                            setTextPosition();

                            //saveImage(imgRecord.get(1),leftPos,topPos,popText.getTextSize(),popText.getText().toString());
                            return true;
                        }
                    });
                                     public void setTextPosition(){
                                         try {
                                        redrawImage(imgRecord.get(1),Integer.parseInt(imgRecord.get(8)),imgRecord.get(6),Integer.parseInt(imgRecord.get(9)));
                                        } catch (Exception e) {
                                            // TODO: handle exception
                                            System.out.println("##########Error in setTextPositio========="+e.getMessage());
                                        }

                                     }

                                    ///Redrawing the image & touchin Move of the Canvas with text
                                    public void redrawImage(String path,float sizeValue,String textValue,int colorValue) {

                                        //Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.fashion_pic);
                                        BitmapFactory.Options options = new BitmapFactory.Options();
                                        try {
                                             options.inMutable = true;
                                        } catch (Exception e) {
                                            // TODO: handle exception
                                            System.out.println("#############Error is======"+e.getMessage());
                                        }

                                        Bitmap bm = BitmapFactory.decodeFile(path,options);
                                        //bm = imageManipulation.convertToMutable(bm);

                                        proxy = Bitmap.createBitmap(bm.getWidth(), bm.getHeight(), Config.ARGB_8888);
                                        Canvas c = new Canvas(proxy);

                                        //Here, we draw the background image.
                                        c.drawBitmap(bm, new Matrix(), null);

                                        Paint paint = new Paint();
                                        paint.setColor(colorValue); // Text Color
                                        paint.setStrokeWidth(30); // Text Size
                                        paint.setTextSize(sizeValue);

                                        System.out.println("Values passing=========="+someGlobalXvariable+",   "+someGlobalYvariable+",   "
                                              +sizeValue+",   "+textValue);

                                        //Here, we draw the text where the user last touched.
                                        c.drawText(textValue, someGlobalXvariable, someGlobalYvariable, paint);

                                        popImgae.setImageBitmap(proxy);
                                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:35:40.250

```
class MyView  extends View{

        public MyView(Context context) {
            super(context);
            //get your drawable image 
            setBackgroundDrawable(drawable);

        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            canvas.drawText("text", x, y, new Paint());
        }

        float x,y;
        @Override
        public boolean onTouchEvent(MotionEvent event) {

            x= event.getX();
            y= event.getX();
            invalidate();
            return true;
        }

    } 
```

# xslt - 使用 XSLT 将命名空间前缀替换为作用域默认命名空间

> ID：10946100
> 
> 赞同：0
> 
> 时间：2012-06-08T09:17:49.947
> 
> 标签：xslt, xmlbeans

你能和我分享一个实现以下功能的 XSLT 吗？

输入：

```
<alfa data="abc" xmlns="http://test1.com/">
  <mus:beta xmlns:mus="http://test2.com">
    <mus:a>1234567897</mus:a>
    <mus:s>777666</mus:s>
  </mus:beta>
</alfa> 
```

输出应该是：

```
<alfa data="abc" xmlns="http://test1.com/">
  <beta xmlns="http://test2.com">
    <a>1234567897</a>
    <s>777666</s>
  </beta>
</alfa> 
```

实际上; 输入是用 XmlBeans 生成的；我无法用 xmlbeans 实现输出；所以我将在调解中使用 xslt 进行转换；但是我首先需要一个 xslt :) XmlBeans 解决方案也是可以接受的。:)

对于 xmlbeans 用户；以下不起作用，仅供参考：

```
Map map = new HashMap();
 map.put("http://test1.com/",""); 
 map.put("http://test2.com/","");
 xo.setSaveSuggestedPrefixes(map); 
```

干杯，卡恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:22:27.607

这是一个样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:mus="http://test2.com"
  exclude-result-prefixes="mus"
  version="1.0">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="mus:*">
  <xsl:element name="{local-name()}" namespace="namespace-uri()}">
     <xsl:apply-templates select="@* | node()"/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T16:09:59.487

如果您向文档显式添加名称空间声明，XmlBeans 将尊重它。您可以使用[XmlCursor](http://xmlbeans.apache.org/docs/2.4.0/reference/org/apache/xmlbeans/XmlCursor.html) API 添加新的默认命名空间中间文档。例如，

```
 XmlObject xobj = XmlObject.Factory.parse(
            "<a xmlns='testA'>\n" +
            "  <B:b xmlns:B='testB'>\n" +
            "    <B:x>12345</B:x>\n" +
            "  </B:b>\n" +
            "</a>");

    // Use xpath with namespace declaration to find <B:b> element.
    XmlObject bobj = xobj.selectPath(
            "declare namespace B='testB'" +
            ".//B:b")[0];

    XmlCursor cur = null;
    try
    {
        cur = bobj.newCursor();
        cur.removeAttribute(new QName("http://www.w3.org/2000/xmlns/", "B"));
        cur.toNextToken();
        cur.insertNamespace("", "testB");
    }
    finally
    {
        cur.dispose();
    }

    System.out.println(xobj.xmlText()); 
```

# jquery - 在 jQuery 中解除绑定会冒泡吗？

> ID：10946118
> 
> 赞同：1
> 
> 时间：2012-06-08T09:19:14.673
> 
> 标签：jquery, javascript-events

如果我将一个事件绑定到 jQuery 中的一个元素，我是否总是必须将它与绑定它的完全相同的元素解除绑定？我可以解除与孩子或父母的绑定吗？我也在使用事件命名空间——这对情况有影响吗？

```
<div id="id1">
    <div id="id2">
        <div id="id3">
            hello
        </div>
    </div>
</div>

$("#id2").bind("click.mynamespace", function() { alert("hi!");});
$("#id1").unbind("click.mynamespace"); //will this work?
$("#id3").unbind("click.mynamespace"); //will this work? 
```

jQuery 文档中的任何地方似乎都没有提到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:20:48.543

不，这不是一个事件，因此不会冒泡。所有与事件相关的函数都将作用于*jQuery*对象中的元素。

如果您想要这种行为，只需选择所有元素：

```
// element and its children
$('#id1').find('*').andSelf().unbind('click.mynamespace');
// element and its parents
$('#id3').parents().andSelf().unbind('click.mynamespace'); 
```

附带说明一下，`.bind()`并且`.unbind()`从 jQuery 1.7 开始已被弃用 - 更好地使用`.on()`，`.off()`而不是（在您的情况下使用相同的参数）。

# java - 在 Jtable 中重复按下向下箭头键

> ID：10946119
> 
> 赞同：0
> 
> 时间：2012-06-08T09:19:15.577
> 
> 标签：java, swing, jtable, keylistener

On `JTable`，当反复按下向下箭头键时，会快速连续触发多个 KeyEvent。我的要求是我只需要对 last 采取行动`KeyEvent`。我正在尝试使用`TimerTask`in `KeySelectionListener`，但它给出了不确定的结果。

知道可以进行哪些更改`KeyListener`吗？

示例代码 -

```
addKeyListener(new KeyListener() {

        Timer t = new Timer();
        TimerTask tt;

        @Override
        public void keyTyped(KeyEvent e) {

        }

        @Override
        public void keyReleased(KeyEvent e) {

             tt.cancel();
             tt = null;

        }

        @Override
        public void keyPressed(KeyEvent e) {

            if (tt != null)
                return;

            tt = new TimerTask() {
                @Override
                public void run() {

                    System.out.println("Selected-- "+getModel().getValueAt(getSelectedRow(), 2));
                }
            };

           // t.scheduleAtFixedRate(tt, 0, 500);
            t.schedule(tt, 0, 200);

        }
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:15:15.583

带有 a 的想法`Timer`（我强烈建议使用`javax.swing.Timer`该类，因为您与 Swing 组件交互）应该可行。

只需将重复设置为`false`，如果计时器未运行，则在收到击键时启动计时器，或者在计时器已运行时重新启动计时器。这将导致对最后一个键的处理稍有延迟（延迟 = 您在计时器上设置的延迟），但要避免您对每个按键做出反应

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:53:22.380

我只使用了定时器。我在侦听器中维护了 KeyEvent 的引用，如果在预定义的延迟中收到另一个 KeyEvent（测试保持 1 秒），则引用新事件。因此，当 1 秒内没有新的 keyEvent 时，将使用最后引用的事件进行进一步处理。它现在工作。随意提出你的意见。

addKeyListener(new KeyListener() {

```
 KeyEvent eventToProcess;
        Timer t = new Timer();
        TimerTask tt;

        @Override
        public void keyTyped(KeyEvent e) {

        }

        @Override
        public void keyPressed(KeyEvent e) {

            if(tt != null){
                tt.cancel();
                tt = null;
            }

        }

        @Override
        public void keyReleased(KeyEvent e) {

            eventToProcess = e;

            tt = new TimerTask() {
                @Override
                public void run() {

                    System.out.println("Selected-- "+getModel().getValueAt(getSelectedRow(), 2)+"  Key Event > "+eventToProcess.getKeyChar());
                }
            };

            t.schedule(tt, 1000);
          }
    }); 
```

# ios - 十位数后如何关闭数字键盘？

> ID：10946125
> 
> 赞同：1
> 
> 时间：2012-06-08T09:19:44.513
> 
> 标签：ios

我在故事板中有一个场景，在那个场景中有一个文本字段。

此文本字段用于保存电话号码，因此我希望小键盘在输入 10 位数字后关闭/消失。

我看到了一个非常相似[的帖子](https://stackoverflow.com/questions/8203647/uitextfield-dismiss-keyboard-when-two-digits-have-been-entered)，但是当我尝试将代码放入 ViewController.m 文件时，小键盘并没有消失。如果有人可以帮助阐明我的情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:33:19.347

哦，该解决方案**应该**有效。其中之一：

*   检查你的目标 UITextField 有一个委托，它等于`self`
*   使用调试器查看是否`-(BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`调用过。

# database - Oracle：在缺少值的日期范围内选择值

> ID：10946128
> 
> 赞同：1
> 
> 时间：2012-06-08T09:20:01.063
> 
> 标签：database, oracle, view, oracle10g

我想从范围内的表中选择值。像这样的东西：

```
SELECT
  date_values.date_from,
  date_values.date_to,
  sum(values.value)
FROM values
  inner join date_values on values.id_date = date_values.id
  inner join date_units on date_values.id_unit = date_units.id
WHERE
  date_values.date_from >= '14.1.2012' AND
  date_values.date_to <= '30.1.2012' AND
  date_units.id = 4
GROUP BY
  date_values.date_from,
  date_values.date_to
ORDER BY
  date_values.date_from,
  date_values.date_to; 
```

但是这个查询只给我返回日期范围，任何值在哪里。像这样：

```
14.01.12    15.01.12    66
15.01.12    16.01.12    4
17.01.12    18.01.12    8
...etc 
```

（这里缺少 16.01.12 到 17.01.12）

但我也想选择缺失值，如下所示：

```
14.01.12    15.01.12    66
15.01.12    16.01.12    4
16.01.12    17.01.12    0
17.01.12    18.01.12    8
...etc 
```

我不能使用 PL/SQL，如果您能建议更通用的解决方案，我可以将其扩展到小时、月、年；会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:41:26.340

我将假设您提供`date_from`和`date_to`. 如果是这样，您可以先生成日期列表，然后加入它以获得剩余的结果。或者，您可以对您的表进行`union`此查询，就像distinct 这将删除任何额外数据一样。`date_values``union`

如果这是生成日期列表的方式：

```
 select to_date('14.1.2012','dd.mm.yyyy') + level - 1 as date_from
      , to_date('14.1.2012','dd.mm.yyyy') + level as date_to
   from dual
connect by level <= to_date('30.1.2012','dd.mm.yyyy') 
                  - to_date('14.1.2012','dd.mm.yyyy') 
```

您的查询可能会变成

```
with the_dates as (
 select to_date('14.1.2012','dd.mm.yyyy') + level - 1 as date_from
      , to_date('14.1.2012','dd.mm.yyyy') + level as date_to
   from dual
connect by level <= to_date('30.1.2012','dd.mm.yyyy') 
                  - to_date('14.1.2012','dd.mm.yyyy')
         )
SELECT
  dv.date_from,
  dv.date_to,
  sum(values.value)
FROM values
  inner join ( select the_dates.date_from, the_dates.date_to, date_values.id
                 from the_dates
                 left outer join date_values
                   on the_dates.date_from = date_values.date_from ) dv
     on values.id_date = dv.id
  inner join date_units on date_values.id_unit = date_units.id
WHERE
  date_units.id = 4
GROUP BY
  dv.date_from,
  dv.date_to
ORDER BY
  dv.date_from,
  dv.date_to; 
```

该`with`语法称为子查询分解，在这种情况下并不真正需要，但它使代码更清晰。

我还假设其中的`date`列`date_values`是日期。当您进行字符串比较时，这并不明显。您应始终在适用的情况下显式转换为日期，并且应始终将日期存储为日期。从长远来看，它可以节省很多麻烦，因为输入错误或比较错误是不可能的。

# java - Mac 上的 Java 编译错误

> ID：10946129
> 
> 赞同：1
> 
> 时间：2012-06-08T09:20:01.810
> 
> 标签：java

我一直在使用 Eclipse 进行编码，并使用 OS X 10.7.4 上的终端测试代码。当我用 Eclipse 运行代码时，它可以工作。但是，使用终端运行给了我以下错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: PacketPrinter : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我检查了我的 java 和 javac 版本。他们都是1.7。我一直在谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:23:17.197

似乎您在 eclipse 和终端中运行了不同版本的 java。

请执行下列操作：

在终端类型中： java -version 在 eclipse 中转到首选项并查看 Java/Installed JRE

比较版本。

将 $JAVA_HOME 和 $PATH 变量指向您在 Eclipse 中使用的同一个 JRE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:22:13.153

您在命令行上使用的运行时可能与从 Eclipse 中启动程序时使用的运行时不同。

尝试执行

```
java -version 
```

从命令行查看您在终端上使用的 java 版本。

（您也可以运行`which java`以准确查看正在执行的文件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:27:27.087

正如 aioobe 所说，使用以下命令检查您的 java 版本

```
java -version 
```

将 PATH 设置的内容复制到记事本并检查其中是否存在任何其他 java 版本路径以及是否在 7 之前。如果是，请在 PATH 设置中删除该路径并保存。

我建议您在完成后重新登录。

AFAIK 当路径中存在旧版本的 java 路径时会出现此错误。

# forms - Drupal，覆盖自定义内容类型的添加/编辑表单表单

> ID：10946131
> 
> 赞同：1
> 
> 时间：2012-06-08T09:20:08.513
> 
> 标签：forms, drupal, content-type

我创建了一个名为协议的新内容类型。问题在于，当您定义内容类型时，这意味着您还说明了如何在表单中添加和编辑内容，例如将有哪些表单元素。

协议是一种存储标题、摘要和指令的内容类型。我想通过一个文本区域添加标题/说明/摘要，您可以在其中标记文本的各个部分，如下所示：

[title]这是一个标题[/title] [abstract]这是一个摘要。[/abstract][instructions]这些是我的指示。[/instructions]

然后处理该文本，并且可以挑选出每个标签之间的内容并将其存储在一个变量中，然后该变量应该存储为内容类型，就像它通过添加/编辑内容表单中的单独字段/文本区域添加一样。

这可能吗？我应该阅读哪些内容？drupal 代码中的哪里是描述当您为标准添加内容表单的新内容类型推送“保存”时会发生什么的函数/函数？（我只想阅读它，而不是更改任何内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:34:03.647

不确定这是否完全符合您想要做的事情，但从基本意义上说，它应该让您朝着自己的目标前进。我为 Drupal 6 编写了一个名为 endorse 的模块，它提供了一个自定义表单，将提交的值输入到一个新节点中：

[http://drupal.org/project/endorse](http://drupal.org/project/endorse)

这是表单定义：

[http://drupalcode.org/project/endorse.git/blob/refs/heads/master:/endorse.module#l136](http://drupalcode.org/project/endorse.git/blob/refs/heads/master:/endorse.module#l136)

接下来是一些基本的验证，然后实际的节点保存发生在提交函数的顶部，直到第 231 行：

[http://drupalcode.org/project/endorse.git/blob/refs/heads/master:/endorse.module#l206](http://drupalcode.org/project/endorse.git/blob/refs/heads/master:/endorse.module#l206)

该函数中的其余部分无关紧要，除了在提交函数的最后表示感谢和重定向。如果您在 D7 中执行此操作，它会发生一些变化（请参阅 api.drupal.org 了解函数定义等），但它应该看起来或多或少相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:45:12.143

解决您的问题的步骤。

1.  创建一个模块。使用您的自定义添加页面实现**hook_menu 。**
2.  **使用FORM API**创建一个自定义表单，它将显示在您的新页面中。
3.  在您的**hook_form_submit**从变量表单状态中获取您的值。
4.  解析文本并创建并保存一个新节点（此处为片段）。

    ```
    $newNode = (object) NULL;
    $newNode->type = 'protocol';
    $newNode->title = $parsed_title;
    $newNode->uid = 1;
    $newNode->created = strtotime("now");
    $newNode->changed = strtotime("now");
    $newNode->status = 1;
    $newNode->comment = 0;
    $newNode->promote = 0;
    $newNode->moderate = 0;
    $newNode->sticky = 0;

    // add CCK field data
    $newNode->field_{YOUR_CUSTOM_FIELD_1}[0]['value'] = $parsed_data1;
    $newNode->field_{YOUR_CUSTOM_FIELD_2}[0]['value'] = $parsed_data2;

    // save node
    node_save($newNode); 
    ```

这些是基本步骤。如果您还有任何问题，请提出。

提示：安装 Devel 模块并在需要了解某个变量的内容时使用函数 dpm()。当您实现 hook_form_validate 或 hook_form_submit 以了解变量 $form_state 中的内容时，您可能会需要它。

所以就这样做：

```
dpm($form_state); //this will give you the variables inside the array with a krumo view. 
```

# css - 防止eclipse破坏CSS格式

> ID：10946133
> 
> 赞同：11
> 
> 时间：2012-06-08T09:20:18.303
> 
> 标签：css, eclipse, formatting, el

Eclipse 似乎完全忘记了 CSS 中的 EL 表达式。当我格式化我的样式表时，会发生这种情况：

```
.tooltip:hover span.info {
  ...
  border-color: #{theme.get('borderTooltip')};
  border-style: solid;
  ...
} 
```

变成

```
.tooltip:hover span.info {
  ...
  border-color: #{theme.get('borderTooltip' )
}

;
border-style
:

solid
;
...
} 
```

我能做些什么来防止这种情况并仍然使用格式化程序吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-08T09:40:28.703

转到 Eclipse 首选项`Window`-> `Preferences`。并在左上角的搜索框中输入*formatter 。*我不知道在您的情况下哪个插件执行格式化也许您在这里找到正确的插件并可以更改其配置。

# python - 在 Python 中，如何打开一个文件并在一行上读取它，然后仍然能够关闭该文件？

> ID：10946134
> 
> 赞同：5
> 
> 时间：2012-06-08T09:20:28.153
> 
> 标签：python

在完成这个练习时，我遇到了一个问题。

```
from sys import argv
from os.path import exists

script, from_file, to_file = argv
print "Copying from %s to %s" % (from_file, to_file)

# we could do these two on one line too, how?
input = open(from_file)
indata = input.read()

print "The input file is %d bytes long" % len(indata)
print "Does the output file exist? %r" % exists(to_file)
print "Ready, hit RETURN to continue, CTRL-C to abort."

raw_input()

output = open(to_file, 'w')
output.write(indata)
print "Alright, all done."
output.close()
input.close() 
```

这条线`# we could do these two on one line too, how?`让我感到困惑。我能想到的唯一答案是：

```
indata = open(from_file).read() 
```

这执行了我想要的方式，但它需要我删除：

```
input.close() 
```

因为输入变量不再存在。那么，我该如何执行此关闭操作？

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T09:24:09.290

在 python 中使用资源的首选方法是使用[上下文管理器](http://docs.python.org/whatsnew/2.6.html#pep-343-the-with-statement)：

```
 with open(infile) as fp:
    indata = fp.read() 
```

该`with`语句负责关闭资源和清理。

如果需要，您*可以*将其写在一行上：

```
 with open(infile) as fp: indata = fp.read() 
```

但是，这在 python 中被认为是不好的样式。

您还可以在一个`with`块中打开多个文件：

```
with open(input, 'r') as infile, open(output, 'w') as outfile:
    # use infile, outfile 
```

有趣的是，当我开始学习 python 时，我问[了完全相同的问题。](https://stackoverflow.com/questions/7878844/read-the-whole-file-at-once)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:27:51.637

```
with open(from_file, 'r') as f:
  indata = f.read()

# outputs True
print f.closed 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:29:31.063

您应该将此视为一种练习，以了解这`input`只是`open`返回的名称，而不是建议您*应该*以更短的方式进行操作。

正如其他答案所提到的，在这种特殊情况下，您正确识别的问题并不是什么大问题 - 您的脚本很快就会关闭，因此您打开的任何文件都会很快关闭。但情况并非总是如此，保证文件在完成后将关闭的常用方法是使用`with`语句 - 当您继续使用 Python 时，您会发现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:23:07.807

当您的脚本完成时，该文件将自动安全地关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:33:06.697

以下 Python 代码将实现您的目标。

```
from contextlib import nested

with nested(open('input.txt', 'r'), open('output.txt', 'w')) as inp, out:
    indata = inp.read()
    ...
    out.write(out_data) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-13T03:30:09.960

只需在现有代码行之间使用分号，即

```
in_file = open(from_file); indata = in_file.read() 
```

我想他就是你所追求的..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-17T09:52:07.000

```
in_file = open(from_file).read(); out_file = open(to_file,'w').write(in_file) 
```

# html - html拉伸div

> ID：10946136
> 
> 赞同：2
> 
> 时间：2012-06-08T09:20:36.530
> 
> 标签：html, stretching

我有这个标记

```
<div id="line" width="100%; height: 44px;">
   <div id="identifier" style="position: absolute;left:0px width: 90px;">blabla</div>
   <div id="title" style="position: absolute; left: 90px;float: left; display:inline;">title</div>
   <div id="button" style="width:100px;float:right">gfgh</div>
</div> 
```

如何拉伸 div[id='title'] 使其填充所有剩余空间，直到下一个 div （按钮）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:25:47.570

*   `position:relative`在 div#line 上设置。
*   设置`right:100px`在 div#title 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:25:52.517

您可以尝试将其 CSS 更改为：

```
position: absolute; left: 90px; right: 100px; width: auto; 
```

您必须添加它`position:relative`才能`#line`可靠地工作（例如，如果`#line`将来更改其宽度）。

另请注意，这在旧版本的 IE 中可能无法可靠地工作，但理论上应该可以工作。

# django - 访问 save_formset 和 save_model 的父对象字段

> ID：10946141
> 
> 赞同：0
> 
> 时间：2012-06-08T09:21:08.067
> 
> 标签：django, forms, django-admin, django-forms, inline-formset

我有一个 ActionAdmin 模型，在 InvoiceAdmin 模型中用作 ActionAdminInline。

在 InvoiceModel 中，我覆盖了 save_formset，以自动设置一些值。为每个 Action 实例设置值没有问题，但我无法获取父 Invoice 的字段。

我认为它必须是**self**或**self.project.pk** 我还尝试通过在其他线程中看到的**form.project.pk来获取它。**

我得到的错误是关于 InvoiceAdmin 中没有这样的字段。这对我来说很有意义，self 是一个 InvoiceAdmin 对象，而不是一个 Invoice 对象。我想我必须获取 Invoice 对象字段来设置 Action instance.invoice 和 instance.project。

有人知道，如何获得这个父对象的值？？？

看起来像这样：

```
class ActionAdmin(admin.ModelAdmin):
...

class ActionInlineForm(ModelForm):
    class Meta:
        model = Action
        fields = ['name','tax', 'price','duration_extern',]

class ActionInline(admin.TabularInline):
    model = Action
    form = ActionInlineForm
    extra = 0
    ordering = ('date_finished',)
    can_delete=False
    readonly_fields = ['non_editable_date_finished','non_editable_duration','get_remove_invoice_pos_link']

class InvoiceAdmin(admin.ModelAdmin):
...
...
...
  inlines = [ActionInline,]
  ...
  ...
  ...
  def save_formset(self, request, form, formset, change):
      instances = formset.save(commit=False)
      for instance in instances:
          usr = User.objects.get(id=7)
          try:
            instance.created_by = instance.created_by
          except:
            instance.created_by = usr

          try:
            instance.owner = instance.owner
          except:
            instance.owner = usr

          instance.modified_by = usr

          try:
            instance.date_created = instance.date_created
          except:
            instance.date_created = date.today

          instance.date_modified = date.today:

          ### MAN, This WORKS NOW ###
          try:
              instance.project = instance.project
          except:
            pr = Project.objects.get(id=instance.invoice.project.id)
            instance.project = pr

          actstat = ActionStatus.objects.get(id=2)
          instance.actionstatus = actstat

          try:
            instance.actioncategory = instance.actioncategory
          except:
            cat = ActionCategory.objects.get(id=9)
            instance.actioncategory = cat

          instance.done = True
          instance.billed = True    
          instance.save()
      formset.save_m2m() 
```

这是错误消息：

```
AttributeError at /workflow/invoice/21/
    ...
    Exception Type:     AttributeError
    Exception Value:    'InvoiceAdmin' object has no attribute 'id'
    ...

Traceback
    form <django.forms.models.InvoiceForm object at 0x7f7f7421de10>
    instances [<Action: aaaaa>]
    self <workflow.admin.InvoiceAdmin object at 0x7f7f7421dad0> 
```

问题是，self 对象是 InvoiveAdmin 而不是 Invoice？我的意思是实例对象是 Action 而不是 ActionAdmin？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:31:52.627

好的。我找到了 instance.invoice 的解决方案。它是正确设置的，无需执行任何操作，例如 instance.invoice。我从上面的代码中删除了“instance.invoice = self”行。

通过父对象（即发票）获取项目的解决方案由“instance.invoice.project.id”完成

所以我遍历表单动作来开发票，而不是它的 id。在上面也改变了这个。

并且必须使用 try,except 检查实例字段。首先，我尝试了
**if not instance.project**
和
**if not hasatrr(instance,'project')**
或
**if instance.project=""**
但如果没有异常处理，它会引发**DoesNotExists 错误**。将其从**if/else**更改为**try/except**上面。

* * *

顺便提一句

真的很少见。我只是在 ActionAdmin **save_model**
中更改某些内容 当我尝试在那里验证实例字段时，与 try/except 中的 save_formset 一样，我不起作用。

在 save_model 我必须这样做：

```
 if not instance.price:
        instance.price = instance.project.customer.price 
```

这失败了

```
 try:
      instance.price = instance.price
  except:
      instance.price = instance.project.customer.price 
```

在 save_formset 中反之亦然？？？！

有人可以向我解释一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-17T11:33:29.957

就我而言，我想在 save_formset 中访问父表单的详细信息。这很简单，我只是使用`form.cleaned_data.get("field_name")`. 例如：

```
def save_formset(self, request, form, formset, change):
    # `form` refers to parent form object
    if "field_name" in form.changed_data:
       if "bar" in form.cleaned_data("field_name"):
          # Do something 
```

在 Django 3.2.11 上

# c# - 如何在 RavenDB 中的对象集合上搜索“不包含”条件

> ID：10946144
> 
> 赞同：3
> 
> 时间：2012-06-08T09:21:20.850
> 
> 标签：c#, linq, ravendb

我是 RavenDB 的新手，我对这里的一个条件感到震惊。基本上这就是我想要实现的我有一个 RavenDB 中的员工列表，我需要获取不属于“合同”类型的员工。我尝试使用基本的 linq 查询，但无法解决问题，因为我遇到了“不支持方法”和“无法理解如何翻译……等”等异常。

这是我到目前为止所尝试的。

```
 class Program
    {
        static void Main(string[] args)
        {
            using (var documentStore = new DocumentStore() { ConnectionStringName = "RavenDBConnectionString" })
            {
                documentStore.Initialize();
                /* using (var session = documentStore.OpenSession())
                {
                    session.Store(new User { Id = 1, Roles = new List<Role> { new Role { Type = UserType.Contract }, new Role { Type = UserType.Developer } } });
                    session.Store(new User { Id = 2, Roles = new List<Role> { new Role { Type = UserType.Permanent }, new Role { Type = UserType.Developer } } });
                    session.Store(new User { Id = 3, Roles = new List<Role> { new Role { Type = UserType.SeniorDeveloper }, new Role { Type = UserType.Manager } } });
                    session.Store(new User { Id = 4, Roles = new List<Role> { new Role { Type = UserType.Contract }, new Role { Type = UserType.SeniorDeveloper } } });
                    session.Store(new User { Id = 5, Roles = new List<Role> { new Role { Type = UserType.Permanent }, new Role { Type = UserType.Manager } } });
                    session.Store(new User { Id = 6, Roles = new List<Role> { new Role { Type = UserType.Contract }, new Role { Type = UserType.Developer } } });
                    session.SaveChanges();
                }*/

                using (var session = documentStore.OpenSession())
                {

                    //var nonContractEmployees = session.Query<User>().Where(x => !x.Roles.Exists(y => y.Type == UserType.Contract)).ToList();
                     var nonContractEmployees = session.Query<User>().Where(x => x.Roles.Count(y => y.Type == UserType.Contract) == 0).ToList();
                    // var nonContractEmployees = session.Query<User>().Where(x => !x.Roles.Contains(x.Roles.FirstOrDefault(y => y.Type == UserType.Contract))).ToList();
                    //var nonContractEmployees = session.Query<User>().Where(x => x.Roles.FirstOrDefault(y => y.Type == UserType.Contract) == null).ToList();
                }
            }
        }
    }

    public class User
    {
        public int Id { get; set; }
        public List<Role> Roles { get; set; }
    }

    public class Role
    {
        public UserType Type { get; set; }
    }

    public enum UserType
    {
        Manager,
        Permanent,
        Contract,
        Developer,
        SeniorDeveloper
    } 
```

如果有人可以帮助我解决这个问题，我真的很感激。

谢谢，
卡皮尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:56:53.927

尝试：

```
var nonContractEmployees = session.Query<User>()
    .Where(x => !x.Roles.Any(y => y.Type == UserType.Contract))
    .ToList(); 
```

我已经用它应该是什么更新了我的查询。（目前失败）

我已经向 Ayende 提交了一个失败的测试，以解决您在 Google 网上论坛上的查询。

[https://groups.google.com/forum/?fromgroups#!topic/ravendb/LpSo3VdkavI](https://groups.google.com/forum/?fromgroups#!topic/ravendb/LpSo3VdkavI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:40:39.820

**编辑 1**

```
var nonContractEmployees = session.Query<User>()
    .Where(x => !x.Roles.In(new [] {new Role { Type = UserType.Contract}))
    .ToList(); 
```

**编辑 2**

这有效，但效率不高。

```
using (var session = documentStore.OpenSession())
{
    var nonContractEmployees = session.Query<User>()
        .ToList()
        .Where(x => x.Roles.Contains(
            new Role {Type = UserType.Contract},
            new RoleComparer()));                        
}

public class RoleComparer : IEqualityComparer<Role>
{
    public bool Equals(Role x, Role y)
    {
        return
            x == null && y == null ||
            x != null &&
            y != null &&
            x.Type == y.Type;
    }

    public int GetHashCode(Role obj)
    {
        return
            obj == null
                ? 0
                : obj.Type.GetHashCode();
    }
} 
```

# visual-studio - 检测 Visual Studio 的存在（任何版本，任何版本）

> ID：10946151
> 
> 赞同：1
> 
> 时间：2012-06-08T09:21:42.177
> 
> 标签：visual-studio, runtime, nsis

我创建了一个 setup.exe，它可以是可分发的。它对 Visual Studio 的可分发文件有一些依赖。因此，我想安装以下 2 个依赖项（如在 NSIS 代码中检查的那样，如果不存在，则会安装） ，但如果有任何版本/版本的 Visual Studio，那么我不需要安装这些依赖项。

所以我想知道如何以编程方式检查系统上是否存在 Visual Studio 的任何版本/版本，如果没有，我将使用以下 NSIS 脚本自行安装我的依赖项。有人可以给我一些想法来检查系统中存在的任何版本/版本的 Visual Studio 还是不使用 NSIS ......

```
Section "VS05 Redist (required)" MVR1
  ReadRegStr $STRING_REDIST HKEY_LOCAL_MACHINE "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{837B34E3-7C30-493C-8F6A-2B0F04E2912C}" "UninstallString"
  StrCmp $STRING_REDIST "MsiExec.exe /X{837B34E3-7C30-493C-8F6A-2B0F04E2912C}" +3 0
  File "vcredist_x86ATL.exe"
  ExecWait "$INSTDIR\vcredist_x86ATL.exe"
SectionEnd

Section "VS08 Redist (required)" MVR2
 ReadRegStr $STRING_REDIST HKEY_LOCAL_MACHINE "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{FF66E9F6-83E7-3A3E-AF14-8DE9A809A6A4}" "UninstallString"
 StrCmp $STRING_REDIST "MsiExec.exe /X{FF66E9F6-83E7-3A3E-AF14-8DE9A809A6A4}" +3 0
 File "vcredist_x86VS2008.exe"
 ExecWait "$INSTDIR\vcredist_x86VS2008.exe"
SectionEnd 
```

上面的代码将只检查 VS05 分发和 VS08 分发，而我想查找是否存在任何版本的 VS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:52:41.070

您可以测试任何子键的存在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio`。如果有，它会给你版本号。

# windows-phone-7 - 暂时禁用后退按钮

> ID：10946154
> 
> 赞同：0
> 
> 时间：2012-06-08T09:21:51.033
> 
> 标签：windows-phone-7, navigation

在我的程序中，我有一个在导航到页面时执行的异步任务。问题是，当我离开该任务（使用手机的硬件后退按钮）时，任务尚未完成，应用程序崩溃。所以我的问题是，我怎样才能暂时禁用后退按钮。这样我就可以在异步任务完成时重新启用它？

谢谢，

巴特·特尼森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T00:53:17.123

在我看来，我认为您应该在尽可能多的情况下尝试启用后退按钮，因为有一个后退按钮，因为您应该能够后退（有意义）。但是，如果您想知道如何做到这一点，这里有一种方法：您可以初始化 OnBackKeyPress 方法并使用布尔值来定义异步任务是否已完成。定义变量 BusyWithAsync 并在异步任务启动时将其设置为 true，一旦完成，只需将 BusyWithAsync 变量设置为 false，您就可以开始了。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    if (BusyWithAsync)
    {
        e.Cancel = true;
    }
} 
```

# android - 当一个活动在android中加载'N'次时做一些事情

> ID：10946155
> 
> 赞同：1
> 
> 时间：2012-06-08T09:21:53.433
> 
> 标签：android, android-activity, sharedpreferences

我正在开发一个 android 应用程序，我希望它在用户加载它“N”次时执行特定操作（例如，转到特定 URL）。我该怎么做。我知道它与 SharedPrefs 和 Activity LifeCycle 有关，但我无法抢占先机。有人可以建议如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:25:56.480

在您的活动中使用 onCreate 方法在 SharedPrefs 中设置一个计数器。每次增加1，当它达到N时，做你的事..

```
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
int count = sharedPreferences.getInt("count", 0);
if (count == N) {
  ...
} else {
  SharedPreferences.Editor editor = sharedPreferences.edit();
  editor.putInt("count", count + 1);
  editor.commit(); 
```

}

# android - 视图的背景不刷新

> ID：10946158
> 
> 赞同：2
> 
> 时间：2012-06-08T09:22:05.360
> 
> 标签：android, android-gridview, android-adapter

我有一个 GridView 的自定义适配器，并且我实现了自己的选择处理，因为自定义视图吸收了网格的单击事件。一切正常，但现在我想添加通过代码选择项目的功能。我为此编写了一个函数并从活动中调用它，但是当用户选择另一个项目时，代码选定项目的背景（表示选择）没有得到更新！我尝试调用 postInvalidate，但没有任何效果。这是适配器的代码：

```
class PaintActionsAdapter extends BaseAdapter
{
private Context context;
private View[] listItemsViews;
private OnListItemClickListener itemClickListener;
private int[] actionsImagesResources;
private int lastSelectedPosition=-1;
private int pendingSelectedPosition=-1;

private class ActionButtonClickListener implements View.OnClickListener
{
    private int position;

    public ActionButtonClickListener(int position)
    { this.position=position; }

    public void onClick(View view)
    {
        changeSelectedListItem(position);
        if (itemClickListener!=null)
            itemClickListener.onListItemClick(view,position);
    }
}

public PaintActionsAdapter(Context context,OnListItemClickListener 
        itemClickListener)
{
    if (context==null)
        throw new IllegalArgumentException("The context must be non-null!");
    this.context=context;
    this.itemClickListener=itemClickListener;
    TypedArray imagesResourcesNames=context.getResources().obtainTypedArray(
            R.array.actions_images);
    actionsImagesResources=new int[imagesResourcesNames.length()];
    for (int counter=0;counter<actionsImagesResources.length;counter++)
    {
        actionsImagesResources[counter]=imagesResourcesNames.getResourceId(
                counter,-1);
    }
    imagesResourcesNames.recycle();
    listItemsViews=new View[actionsImagesResources.length];
}

public int getCount() { return actionsImagesResources.length; }
public long getItemId(int position)
{ return actionsImagesResources[position]; }
public Object getItem(int position) 
{ return actionsImagesResources[position]; }

public View getView(int position,View convertView,ViewGroup parent)
{
    ImageView actionImageView;
    if (convertView==null)
    {
        actionImageView=new ImageView(context);
        /*actionToggleButton=new ToggleButton(context);
        actionToggleButton.setTextOn(null);
        actionToggleButton.setTextOff(null);
        actionToggleButton.setText(null);*/
        AbsListView.LayoutParams layoutParams=new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.
                WRAP_CONTENT);
        actionImageView.setLayoutParams(layoutParams);
    }
    else actionImageView=(ImageView)convertView;
    actionImageView.setImageResource(actionsImagesResources[position]);
    actionImageView.setOnClickListener(new ActionButtonClickListener(position));
    listItemsViews[position]=actionImageView;
    if (pendingSelectedPosition==position)
    {
        changeSelectedListItem(position);
        pendingSelectedPosition=-1;
    }
    return actionImageView;
}

public void setSelectedListItem(int position)
{
    if ((position<0)||(position>actionsImagesResources.length))
        throw new IndexOutOfBoundsException("The position of the list " +
                "item to select must be between 0 and " + actionsImagesResources.
                length + "! The value supplied was " + position);
    if (listItemsViews[position]==null) pendingSelectedPosition=position;
    else changeSelectedListItem(position);
}

private void changeSelectedListItem(int position)
{
    listItemsViews[position].setBackgroundResource(R.drawable.
            actions_list_selector);
    if (lastSelectedPosition>-1) 
    {
        listItemsViews[lastSelectedPosition].setBackgroundResource(0);
        listItemsViews[lastSelectedPosition].postInvalidate();
    }
    lastSelectedPosition=position;
}
} 
```

函数 setSelectedListItem 让活动更改选择，并调用 changeSelectedListItem，它使用 setBackgroundResource(0) 从最后选择的项目中删除选择指示。当用户通过单击选择项目时，这非常有效，但如果最后一个项目的选择是通过 setSelectedListItem 完成的，则不会。

我希望我清楚地解释了这个问题，任何帮助将不胜感激。

# c# - 运行时复杂的类型生成

> ID：10946161
> 
> 赞同：0
> 
> 时间：2012-06-08T09:22:16.320
> 
> 标签：c#, .net, reflection

我需要`List<T>`在运行时创建一个类型：我有一个表示列表中单个项目类型的字符串（`T`）和一个对象数组。我的问题是：我怎样才能获得`List<T>`？

我希望我解释了自己:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:26:07.597

你可以使用类似的东西：

```
Type itemType = Type.GetType("my type name as string");
Type listType = typeof(List<>).MakeGenericType(itemType);
return (IList) Activator.CreateInstance(listType); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:28:23.853

首先，您确定要这样做吗？闻起来像一个设计缺陷。

以下是如何执行此操作的示例：

```
var stringType = Type.GetType("System.String");
var listType = typeof (List<>);
var stringListType = listType.MakeGenericType(stringType);
var list = Activator.CreateInstance(stringListType) as IList;

list.Add("Foo");
list.Add("Bar");
list.Add("Baz"); 
```

# .net - 如何在 .NET Web 应用程序中为经过身份验证的用户获取 UPN，而不查询 Active Directory

> ID：10946163
> 
> 赞同：6
> 
> 时间：2012-06-08T09:22:24.827
> 
> 标签：.net, active-directory, upn

（这个问题类似于[Get UPN or email for login user in a .NET web application](https://stackoverflow.com/questions/1101938/get-upn-or-email-for-logged-in-user-in-a-net-web-application)，但不完全一样。）

在使用 Windows 身份验证的 .NET (C#) Web 应用程序中，我想找到登录用户的 UPN。

我知道如何通过查询 Active Directory 来做到这一点：取 'DOMAINNAME\userName' from `HttpContext.Current.User.Identity as WindowsIdentity`; 在 下查找 DOMAINNAME`ldap://RootDSE`并找到它的`dnsRoot`; 查询`(&(objectCategory=person)(objectClass=user)(sAMAccountName=...userName...))`下`ldap://...dnsRoot...`；获取此条目的`userPrincipalName`属性。（更多细节在回答[https://stackoverflow.com/a/513668/223837](https://stackoverflow.com/a/513668/223837)）。

**我的问题：是否**可以在*不*调用 Active Directory 的情况下找到 UPN？鉴于 Microsoft 专注于在任何地方使用 UPN，UPN 是否已经存储在用户向 Web 服务器进行身份验证时创建的令牌中的某处？

（支持观察：如果我`whoami /upn`在 Windows 7 上运行，那么 Wireshark 不会显示任何 Active Directory 连接。）

（如果有任何区别：请注意，我们的 Web 应用程序不**使用模拟**，即我们的 Web 应用程序不会在用户身份下运行。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T09:33:17.320

试试看[`System.DirectoryServices.AccountManagement.UserPrincipal.Current`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal.current.aspx)，里面有属性`UserPrincipalName`。当然，这需要应用程序在 Windows 身份验证下运行。

**编辑**嗯，看起来这个 API 仍然执行目录查找。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-03T18:47:55.480

我在使用 时遇到了 Active Directory 查询问题`System.DirectoryServices.AccountManagement.UserPrincipal.Current`，因此我使用[`GetUserNameEx`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724435(v=vs.85).aspx)了该`NameUserPrincipal`格式。

此函数获取有关当前用户的信息，因此如果您还没有模拟，它确实需要您模拟。在 C# 中，可以通过导入函数来完成：

```
public enum EXTENDED_NAME_FORMAT
{
    NameUnknown = 0,
    NameFullyQualifiedDN = 1,
    NameSamCompatible = 2,
    NameDisplay = 3,
    NameUniqueId = 6,
    NameCanonical = 7,
    NameUserPrincipal = 8,
    NameCanonicalEx = 9,
    NameServicePrincipal = 10,
    NameDnsDomain = 12
}

[DllImport("secur32.dll", CharSet = CharSet.Auto)]
public static extern int GetUserNameEx(int nameFormat, StringBuilder userName, ref int userNameSize); 
```

然后像这样调用它：

```
string upn = null;
StringBuilder userName = new StringBuilder(1024);
int userNameSize = userName.Capacity;
if (GetUserNameEx((int)EXTENDED_NAME_FORMAT.NameUserPrincipal, userName, ref userNameSize) != 0)
{
    upn = userName.ToString();
} 
```

# java - 将数据从 Excelsheet 移植到 Java 中的 oracle 10g 的最佳方法

> ID：10946164
> 
> 赞同：0
> 
> 时间：2012-06-08T09:22:31.873
> 
> 标签：java, excel, oracle10g

我们将在我的应用程序中使用 jxl.jar 将数据从 excelsheet 移植到 Java 中的 oracle 10g。最近几天，我们在移植屏幕中添加了多个业务验证。在实施业务验证之前，数据移植工作正常。添加条件后，移植过程非常缓慢，最终或有时在 oracle 中上传数据出现异常（超时异常）。少于 500 条记录的 excelsheet 表示它工作正常。如果超过 500 条记录意味着我们面临问题？什么是最好的方法按照使用 java 上传数据？如果有任何错误对不起。

编辑：我正在使用 JDBC Batch。首先，我正在检查 excelsheet 中所有记录的业务验证。如果满足所有条件，则执行批处理，否则将在屏幕本身中引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:29:35.653

我认为您使用 jxl 的方式是正确的（不过我更喜欢[Apache POI](http://poi.apache.org/)）。当您插入大量数据并提交每 500 个条目时，您应该使用[批处理。](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#addBatch%28java.lang.String%29)

此外，您不应将 Excel 文件中的所有数据加载到内存中，然后将它们添加到数据库中。而是从 Excel 中读取前 500 行，将它们提交到数据库，然后继续接下来的 500 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:31:01.813

一种方法是从 excelsheet 导出 CSV，然后将该 CSV 数据导入到您的 oracle 表中。我发现这很有效。

这是一个启动线程： [http ://www.velocityreviews.com/forums/t387780-populate-oracle-table-with-values-in-csv-using-java.html](http://www.velocityreviews.com/forums/t387780-populate-oracle-table-with-values-in-csv-using-java.html)

# linux - 源包目录

> ID：10946166
> 
> 赞同：0
> 
> 时间：2012-06-08T09:22:44.090
> 
> 标签：linux, open-source, directory

我是新手，请多多包涵。当你下载一个随机的开源包时，你会发现每个包中都有一个相似的目录树。它是这样的：

```
\
|- doc
|- m4
|- src
|- tests 
```

这是某种标准吗？我在哪里可以找到它的规格？是否有任何程序为您在您的目录中生成此树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:06:45.440

对此没有标准，更不用说规范了；这只是一个约定（有许多变体）。一些包的源文件直接在顶级目录中，另一些在 . 中`src/`，还有一些在每个组件中都有一个目录。`tests`也可能被称为`test`. 然而，缩写`doc`（文档）和`src`（源代码）在 Unix 开发人员的集体记忆中根深蒂固。

（IDE 可能会为您创建这样的目录层次结构，但要意识到许多 Unix/Linux 开发人员，包括您的开发人员，根本不使用 IDE。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:58:42.360

~~是的，这个结构是由~~不，这种结构只是与称为[GNU 构建系统](http://en.wikipedia.org/wiki/GNU_build_system)（简称 Autotools）的软件一起使用的约定。它是一组程序，用于简化跨不同操作系统和环境的项目配置、编译、链接和构建。许多 IDE 和编辑器都支持它。

# haskell - 实现解释器时处理嵌套变量范围

> ID：10946167
> 
> 赞同：2
> 
> 时间：2012-06-08T09:22:54.907
> 
> 标签：haskell, interpreter

我目前正在为一种简单的编程语言编写解释器，只是想问最好的方法是解决它。

一个程序的环境如下：

```
type Env = [[(Var, Int)]] 
```

所以我已经编写了`lookup`and`update`但我有点坚持如何处理每个 begin 块的范围。一个例子如下所示：

```
begin [a,b,c] 
    read i
    n = 1
    while i < 0 do
        begin
        n = 2 * n
        i = i - 1
        end;
    write n
end 
```

据我了解，第一个开始的范围是 [a,b,c,i,n] 然后第二个开始将包含 [i, n]

因此环境将是

```
[ [ ("a",0), (b",0), ("c",0), ("i",3), ("n",2) ], [("n",8), ("i",0) ]    ]` 
```

目前我的查找函数返回第一次出现的变量，所以我遇到了第二个作用域（第二个开始）的问题。

我不太确定如何使`update`and`lookup`函数返回与该特定范围关联的值。

基本上我的代码适用于一个`begin`语句，但我在示例程序中遇到了 2 个或更多语句的问题。

# jquery - stopPropagation() “防止事件冒泡 DOM 树”：这是什么意思？

> ID：10946168
> 
> 赞同：5
> 
> 时间：2012-06-08T09:22:55.133
> 
> 标签：jquery, event-propagation

我真的不明白 e.stopPropagation() 做什么。

如果我有一个指向处理程序的[链接](http://jsfiddle.net/4xG3a/2/)`return false`，我应该得到我想要的（防止默认链接行为，所以它不会“调用”下一个 href 位置）：

```
<a id="myLink" href="http://www.google.com">Go to google</a>​

$('#myLink').click(function (e) {
    alert("No, you don't go to Google");
    return false;
});​ 
```

添加`e.stopPropagation()`我能得到什么？你能给我一个可靠的例子，向我展示`e.stopPropagation()`可以做什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T09:27:58.057

简单，`stopPropagation`阻止任何事件冒泡到它的容器、它的容器的容器等。

这是一个活生生的例子：http: [//jsfiddle.net/5B7sw/](http://jsfiddle.net/5B7sw/)

HTML：

```
<div id="container">
    <button id="propagate">Propagate</button>
    <button id="nopropagate">Do not Propagate</button>
</div> 
```

和js：

```
$('#container').click(function(){
   console.log('container click') ;
});

$('#propagate').click(function(){
   console.log('propagateclick');
});

$('#nopropagate').click(function(e){
   console.log('nopropagateclick');
    e.stopPropagation();
}); 
```

单击按钮标题“传播”（默认行为）会将“传播单击”和“容器单击”写入控制台。单击包含调用的按钮`e.stopPropagation()`将不会打印“容器单击”消息，因为到容器的传播已停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:26:57.727

在你的例子`e.stopPropagation()`中什么都不做。

`e.stopPropagation()`可以在嵌套元素的情况下使用，以防止其他元素接收事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:28:03.263

不是你想的那样。。

停止传播意味着同一事件不会传播到其父标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:42:42.033

event.stopPropagation() 将防止事件通过其祖先冒泡。这意味着任何使用[.delegate()](http://api.jquery.com/delegate/)或[.live()](http://api.jquery.com/live)匹配相关子元素的处理程序都不会触发。这是一个演示来说明这一事实：http: [//jsfiddle.net/fSBGC/6/](http://jsfiddle.net/fSBGC/6/)

# php - Mongo DB 创建一个以日期为键的数组？

> ID：10946169
> 
> 赞同：0
> 
> 时间：2012-06-08T09:22:56.023
> 
> 标签：php, mongodb

Mongo 创建一个以日期为键的数组？

```
[_id] => MongoId Object (
    [$id] => 4fcf2f2313cfcd225700000d
)
[id] => 14
[name] => Aryan Roban
[news] => Array (
    [08-06-2012] => 12
) 
```

在这里，我想要一个以日期为键的数组，以及如何删除特定的键行？

例如

我想删除 news 数组中键为 '08-06-2012' 的数组元素，我不知道它的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:01:52.727

查找文档不会是问题，这很容易。只需查看是否`news`有与您的搜索条件匹配的键：

```
db.foo.find({'news.08-06-2012': {'$exists': true}}) 
```

不要忘记在`news`.

但是删除它们并不容易。还有另一个线程显示了一种方法，但它确实是一种解决方法：[在 mongoDb 中，如何通过索引删除数组元素](https://stackoverflow.com/questions/4588303/in-mongodb-how-do-you-remove-an-array-element-by-its-index)遗憾的是，这仅适用于具有数字索引的数组，不适用于关联数组。

也许您可以使用自己的新闻收藏？然后您可以轻松更新和删除它们。否则，您可以从数据库中加载完整的文档，在应用程序中处理新闻，然后保存。这将需要两个数据库查询，但应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:04:07.203

我们可以像这样使用

```
db.foo.update({/*...*/}, {$unset: {'news.11-06-2012', 1}}) 
```

# c++ - netbeans 项目的发布构建和调试构建

> ID：10946171
> 
> 赞同：0
> 
> 时间：2012-06-08T09:22:55.840
> 
> 标签：c++, build, wxwidgets

我使用 build=release 编译了 wxwidgets 现在我需要知道在编译我的项目时应该进行“调试”还是“发布”构建，它有什么效果吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:59:34.007

wxWidgets 库和项目的构建需要完全相同。因此，如果您发布构建您的应用程序，您必须与库的发布构建链接。如果您尝试链接使用不同参数构建的应用程序和库，那么您将收到链接器错误并且不会创建可执行文件。

大多数人保留两份已构建的库，一份用于链接调试应用程序，一份用于链接发布应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:33:25.803

没什么不好的，但调试整个项目可能会在调试构建中更加困难，因为您将分发以发布模式编译的产品并且没有任何效果。

# java - 文档的根元素不是

> ID：10946173
> 
> 赞同：5
> 
> 时间：2012-06-08T09:22:58.400
> 
> 标签：java, spring, ivr

我的项目中有一个名为 jvxml-implementation-0-7.xsd 的文件。

该文件的内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<xsi:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema"
 xmlns="http://www.jvoicexml.org/xsd/jvxml-implementation-0-7.xsd"
   xmlns:tns="http://www.example.org/jvxml-implementation"    
xmlns:beans="http://www.springframework.org/schema/beans"
  elementFormDefault="qualified">
  <xsi:import namespace="http://www.springframework.org/schema/beans"
    schemaLocation="spring-beans-2.0.xsd" />
  <xsi:element name="implementation">
    <xsi:annotation>
      <xsi:documentation>
    Implementation platform for JVoiceXML
  </xsi:documentation>
</xsi:annotation>
<xsi:complexType>
  <xsi:sequence minOccurs="0" maxOccurs="unbounded">
    <xsi:element name="repository" type="xsi:string"
      minOccurs="0" maxOccurs="1">
      <xsi:annotation>
        <xsi:documentation>
          The name of the loader repository.
        </xsi:documentation>
      </xsi:annotation>
    </xsi:element>
    <xsi:element name="classpath" type="xsi:string"
      minOccurs="0" maxOccurs="unbounded">
      <xsi:annotation>
        <xsi:documentation>
          Entry to be added to the CLASSPATH when
          loading this implementation platform^M
        </xsi:documentation>
      </xsi:annotation>
    </xsi:element>
    <xsi:element ref="beans:bean" minOccurs="1"
      maxOccurs="unbounded">
      <xsi:annotation>
        <xsi:documentation>Spring bean configuration
        </xsi:documentation>
      </xsi:annotation>
    </xsi:element>
  </xsi:sequence>
</xsi:complexType> 
```

但是当它被加载时，就会发生这样的错误。

```
org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'jvxml-implementation-0-7.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>. 
```

我已经更改了权限并将文件放在应该的位置。所以我留下了第三个错误。

请告诉我如何处理它。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-20T15:07:24.190

XSI 是模式实例引用 - 不是模式。

2 件事中的 1 件将在这里工作。

1.  更改`<xsi:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema"`为 `<xsi:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`

或者

1.  更改`<xsi:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema"`为 `<xsd:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema"` 并用“xsd”替换所有“xsi”

# powershell - Powershell：使用 Get-aduser 查找用户正在使用的 PC 的机器主机名

> ID：10946174
> 
> 赞同：2
> 
> 时间：2012-06-08T09:23:00.857
> 
> 标签：powershell

我正在尝试使用 get-aduser 来查找用户正在使用的机器主机名。

到目前为止，我已经得到了这个，但它不起作用。

```
get-aduser username -properties extensionattribute3 | select extentionattribute3 
```

什么都没有被退回。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:04:43.880

不幸的是，AD 并没有真正捕捉到这些信息。您可以启用安全审计，然后转到您域中的每个 DC，查看安全日志并查看该用户从何处登录。但即便如此，我也不确定主机名是否被捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T18:26:44.893

这是 Systernal 的实用程序，可解决您的需求：

[PsLoggedOn](http://technet.microsoft.com/en-us/sysinternals/bb897545.aspx)

`PsLoggedOn``HKEY_USERS`通过扫描所有域计算机中的密钥下的密钥来确定谁登录。您需要`local administrative credential`客户端计算机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:14:08.420

您可以使用它来获取计算机名称：

```
 $objIPProperties = [System.Net.NetworkInformation.IPGlobalProperties]::GetIPGlobalProperties()
 $domainname = "{0}.{1}" -f $objIPProperties.HostName, $objIPProperties.DomainName 
```

资料来源：[http ://boerlowie.wordpress.com/2010/12/31/get-the-fqdn-of-your-host-with-powershell/](http://boerlowie.wordpress.com/2010/12/31/get-the-fqdn-of-your-host-with-powershell/)

希望这可以帮助。

# c# - 如何将 og:Title og:Image og:Description og:url 信息从 C# 发送到 Facebook

> ID：10946177
> 
> 赞同：4
> 
> 时间：2012-06-08T09:23:05.390
> 
> 标签：c#, asp.net, c#-4.0, facebook-like, meta-tags

我的页面中有一个赞按钮。单击按钮时，我正在尝试在 facebook 中发送以下标签信息...

```
<meta property="og:title" content="Title" />
<meta property="og:description" content="Description" />
<meta property="og:url" content="url info" />
<meta property="og:image" content="image url" /> 
```

以下是我的喜欢按钮框架

```
<iframe frameborder="0" scrolling="no" allowtransparency="true" 
  style="border: none; overflow: hidden; width: 260px; height: 35px;" 
  src="http://www.facebook.com/plugins/like.php?
  href=http://localhost:49334/WebForm1.aspx&amp;send=false&amp;
  layout=button_count&amp;width=100&amp;show_faces=false&amp;
  action=like&amp;colorscheme=light&amp;font=arial&amp;height=35">
</iframe> 
```

**以下是动态处理元标记的第一种方法。**

```
var fbTitleTag = new MetaTag
{
    AgentPageURL = "/",
    MetaTagName = "og:title",
    UserSiteName = CurrentAgent.UserSiteName,
    MetaTagContent = Request.Cookies.Get("MasterTitle").Value
};

var fbDesc = new MetaTag
{
    AgentPageURL = "/",
    MetaTagName = "og:description",
    UserSiteName = CurrentAgent.UserSiteName,
    MetaTagContent = Request.Cookies.Get("MasterDescription").Value
};

var fbUrl = new MetaTag
{
    AgentPageURL = "/",
    MetaTagName = "og:url",
    UserSiteName = CurrentAgent.UserSiteName,
    MetaTagContent = Request.Cookies.Get("MasterURL").Value
};

var fbImage = new MetaTag
{
    AgentPageURL = "/",
    MetaTagName = "og:image",
    UserSiteName = CurrentAgent.UserSiteName,
    MetaTagContent = Request.Cookies.Get("MasterImage").Value
};

var tags = new MetaTagCollection { fbTitleTag, fbDesc, fbUrl, fbImage };

Literal ltMetaTags = null;
ltMetaTags = (Literal)this.Master.FindControl("ltMetaTags");

MetaTags(tags, "wsws", "/", ltMetaTags, true);

public static void MetaTags(MetaTagCollection MetaTags, string name, string strRawURL, Literal ltlMetaHolders, bool isProp)
{
    //  ltlMetaHolders.Text = "";

    foreach (AgentMetaTag oAgentMetaTag in agentMetaTags)
    {
        if (string.Compare(strRawURL, oAgentMetaTag.AgentPageURL, true) == 0)
        {
            if (oAgentMetaTag.MetaTagName.ToLower().Trim() != "footer" && oAgentMetaTag.MetaTagName.ToLower().Trim() != "title")
            {
                if (oAgentMetaTag.MetaTagName.ToLower().Trim() == "fbtitle")
                    oAgentMetaTag.MetaTagName = "title";

                RenderMetaTagByContentName(ltlMetaHolders, oAgentMetaTag.MetaTagName, oAgentMetaTag.MetaTagContent, isProp);
            }
        }
    }
}

public static void RenderMetaTagByContentName(Literal ltlMetaHolder, string contentName, string content, bool isProp)
{
    var metaTagFromat = isProp ? "<meta property=\"{0}\" content=\"{1}\" />" : "<meta name=\"{0}\" content=\"{1}\" /> ";

    ltlMetaHolder.Text += string.Format(metaTagFromat, contentName, content);

} 
```

**以下是动态处理元标记的第二种方法。**

```
HtmlMeta tag = new HtmlMeta();
tag.Attributes.Add("property", "og:title");
tag.Content = "Title";
Page.Header.Controls.Add(tag);

HtmlMeta tag1 = new HtmlMeta();
tag1.Attributes.Add("property", "og:description");
tag1.Content = "Desc";
Page.Header.Controls.Add(tag1);

HtmlMeta tagurl = new HtmlMeta();
tagurl.Attributes.Add("property", "og:url");
tagurl.Content = "URL info";
Page.Header.Controls.Add(tagurl);

HtmlMeta tagimg = new HtmlMeta();
tagimg.Attributes.Add("property", "og:img");
tagimg.Content = "Image URL";
Page.Header.Controls.Add(tagimg); 
```

**最后它呈现元标记如下..**

```
<meta property="og:title" content="Title" />
<meta property="og:description" content="Description" />
<meta property="og:url" content="url info" />
<meta property="og:image" content="image url" /> 
```

现在，当我单击`Like button`它时，它只发送 url。并且不发送`Description/Image/Title`.

我正在使用链接“http://developers.facebook.com/tools/debug”。它说`Description/Image/Title`缺少。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:28:47.113

您无需将元数据发送到 Facebook，Facebook 在加载页面时会从页面的 HTML 中检索元数据。尝试使用以下工具查看您的 URL：

```
http://developers.facebook.com/tools/debug/og/echo?q=<your URL here> 
```

它将向您展示 Facebook 看到的内容（它是您现在正在使用的调试工具底部的“抓取的 URL”链接）。

如果它不包含元数据标签，则 Facebook 不会看到它们，并且不会将元数据添加到其 Open Graph 对象中。如果是这种情况，那么您可能没有将元数据正确添加到 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:47:50.980

第二种方法看起来是正确的。问题是，你把代码放在哪里了？它应该在 Page_Load 上调用。

单击 Like 按钮不会发送 og:xxxx 信息。您的页面应该从一开始就已经具有这些 og:xxxx 元标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T15:51:21.657

你使用 MVC ASP.NET 吗？

您可以尝试将 Layout.cshtml 中的元标记设置为

```
<meta property="og:type" content="website">
<meta property="og:site_name" content="Site name">
<meta property="og:title" content="@ViewBag.OGTitle" />
<meta property="og:description" content="@ViewBag.OGDesc" />
<meta property="og:url" content="@ViewBag.OGUrl">
<meta property="og:image" content="@ViewBag.OGImage" /> 
```

然后在单独的页面 MyPage.cshtml 中设置标签值

```
@model Books.Web.Models.ItemSource
@{
    ViewBag.OGTitle = Model.Item.Title;
    ViewBag.OGDesc = Model.Item.Description;
    ViewBag.OGUrl = Request.Url.AbsoluteUri;
    ViewBag.OGImage = Request.Url.Scheme + "://" + Request.Url.Host + Url.Action("ItemCover", "Image", new { id = Model.Item.Id, height = 350 });
    Layout = "~/Views/Shared/Layout.cshtml";
}
<div>Page content here</div> 
```

# visual-studio-2012 - 无法在 Visual Studio 2012 RC 上安装“Web 开发人员工具”

> ID：10946180
> 
> 赞同：6
> 
> 时间：2012-06-08T09:23:09.260
> 
> 标签：visual-studio-2012

在 Visual Studio 2012 RC 中，我无法正确安装 Web Developer Tools。我的 ASP .NET MVC 项目都不会在 VS2012 中加载，而且我无法创建新项目。ASP .NET MVC 项目的选项根本不存在，如下所示。

![在此处输入图像描述](../Images/7c5f6699015702c0f030263704b651d1.png)

此外，除了 .NET Framework 4 和更早版本之外，我无法选择任何其他框架。我似乎无法选择 .NET 4.5，但这可能是因为它只是 .NET 4.0 的补充。我不知道。

我正在运行 Windows 8 Release Preview，它应该已经安装了 .NET 4.5 RC，所以这不应该是问题。此外，如果我单击“我想下载更多 .NET 可再发行组件”，我会被带到一个网站，该网站说 Visual Studio 2012 RC 已经包含该内容。

我似乎无法下载 MVC 4.5 并单独安装。这是因为他们声称它也已包含在 VS2012 中。

当我尝试在我的 Visual Studio 2012 RC 安装程序中单击“修改安装”时，我看到以下内容。

![在此处输入图像描述](../Images/5fc57cd22302311d1547fcd32470db0f.png)

这里有趣的是“Web 开发人员工具”从未被检查过。如果我检查它并单击“更新”并重新启动，它会再次被取消选中，并且似乎整个功能都丢失了。我想这确实是问题的原因。

我尝试完全重新安装 Visual Studio 2012 RC，首先将其删除，然后重新启动，然后重新安装。运行安装修复也不起作用。

到目前为止，我已经设法在任何地方都找不到此类问题的其他示例。

你能帮助我吗？

**编辑 1** 我刚刚发现了另一个奇怪的症状。每当我想制作一个“Windows Metro Style”应用程序时，它也不起作用，并出现此消息。

![在此处输入图像描述](../Images/842ae156404a5d8581111e7abbbe8070.png)

就像我之前说的，这可能确实是因为它没有检测到我已经安装了 .NET 4.5，但我不确定。我所知道的是，我根本无法从框架列表中选择 .NET 4.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:03:34.603

在 ISO 上，我提取了 packages/WPT 文件夹。里面是 Web 工具组件的所有安装程序。我卸载并重新安装了名称中包含 vs11 的所有内容，并且成功了！

# ruby-on-rails - 用 ruby 正则表达式替换 url 中的字符串

> ID：10946181
> 
> 赞同：0
> 
> 时间：2012-06-08T09:23:11.770
> 
> 标签：ruby-on-rails, ruby, regex

我在变量图像中有这个 url：

```
 image = http://graph.facebook.com/111111111111111/picture?type=square 
```

`=`我想要一个正则表达式 ruby​​ 来替换这些网址的等号后的最后一个字符串：

```
image = http://graph.facebook.com/111111111111111/picture?type=small
image = http://graph.facebook.com/111111111111111/picture?type=large
image = http://graph.facebook.com/111111111111111/picture?type=normal 
```

数字 111111111111111 是一个 15 位数字。

我该怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:33:08.443

```
s.gsub(%r{(http://graph.facebook.com/\d{15}/picture\?type=)\w+}, '\1replaced')
#=> "http://graph.facebook.com/111111111111111/picture?type=replaced" 
```

# php - 用于 youtube 上传的 curl 响应

> ID：10946186
> 
> 赞同：0
> 
> 时间：2012-06-08T09:23:33.540
> 
> 标签：php, curl

我还有一个关于 YouTube 上传的问题。根据我在这里从 khael 收到的答案（[将表单输入文件替换为直接文件上传](https://stackoverflow.com/questions/10918115/replace-form-input-file-with-direct-file-upload)），该脚本完美地上传了视频。但是，卷曲响应是“临时移动”。我需要的是取回 YouTube 视频 ID。

另一个问题是“nexturl”永远不会被调用。如果它被调用，我可以很容易地用 "$_GET['id']" 读取视频 ID 并将其写入数据库。

这是我正在使用的代码

```
$ch = curl_init($response->url."?nexturl=".urlencode($nexturl));
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]);
curl_setopt($ch, CURLOPT_POST, true);
$post = array(
   "file"=>"@/path/to/file.avi",
   "token"=>$response->token
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
$response = curl_exec($ch); 
```

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:45:25.620

如果没有测试，我猜如果你添加 FOLLOWLOCATION 选项，你会得到你想要的：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

# c# - PropertyChanged 事件处理程序始终为空

> ID：10946188
> 
> 赞同：1
> 
> 时间：2012-06-08T09:23:40.583
> 
> 标签：c#, wpf, binding, event-handling

当我第一次在其构造函数中将投标分配给标签时，标签会正确绑定并根据 CurrentMarket 类的当前 ComponentData 值显示正确的信息。但是，当 ComponentData 更改时，OnPropertyChanged 事件触发正常，但 ProperyChanged 处理程序始终为 NULL。有人可以建议我做错了什么吗？

我有一个标签，我像这样设置绑定：

```
 public StyledLabel(string Property, int i)
    {
        Binding BindingText = new System.Windows.Data.Binding(Property);
        BindingText.Source = Statics.CurrentMarket.ComponentData;
        BindingText.Converter = new TextConverter();
        this.SetBinding(Label.ContentProperty, BindingText);

     } 
```

当前的市场类别如下所示：

```
public class CurrentMarket : INotifyPropertyChanged
{
    string sMarket = "";
    ComponentData cComponentData;

    public string Market
    {
        set
        {
            sMarket = value;
            OnPropertyChanged("Market");
            ComponentData = SharedBoxAdmin.Components[sMarket];
        }
        get
        {
            return sMarket;
        }
    }

    public ComponentData ComponentData
    {
        get { return cComponentData; }
        set
        {
            cComponentData = value;
            OnPropertyChanged("ComponentData");
        }
    }

    public CurrentMarket()
    {
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string info)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(info));
        }
    }

 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:35:16.253

尝试将要绑定的属性名称指定为`Path`（`Binding`而不是 的一部分`Source`）：

```
Binding BindingText = new System.Windows.Data.Binding(Property);
BindingText.Source = Statics.CurrentMarket;
BindingText.Path = new PropertyPath("ComponentData");
BindingText.Converter = new TextConverter();
this.SetBinding(Label.ContentProperty, BindingText); 
```

# java - 如何使用 twitter4j 构建可靠的多线程 twitter api 查询应用程序？

> ID：10946189
> 
> 赞同：3
> 
> 时间：2012-06-08T09:23:42.200
> 
> 标签：java, multithreading, twitter, twitter4j

我正在尝试使用 java 在 twitter4j 之上构建到 twitter 的连接器。Twitte4j 没有处理并希望您处理的问题之一是速率限制问题。

我使用 Twitter4j 充分利用 twitter api 的方法是在其上构建多个线程。我的推文转储只有推文 ID 和用户 ID 的用户在我的数据库中，我需要我的推特线程来查询推特并在新信息流入它们时更新这些表。所以，我构建了两个不同的线程，一个更新用户表，一个更新推文表。用户更新线程相当容易做到，因为 twitter 支持一次查询多达 100 个用户（用户/查找）。但是，推文线程一次只支持一个（推文/节目）。所以，我有我的“推文更新”线程，再启动 5 个线程，其中每个线程去查询 twitter 并一次更新一个帖子。这就是 ratelimit 发挥作用的地方。所以，任何时候，我有 6 个线程正在运行并查询 TwitterService（我的服务类）。这些线程在查询之前总是检查是否达到了速率限制，如果是，它们进入睡眠模式。所以线程调用的服务方法如下所示：

```
private synchronized void checkRateLimitStatus() {
        if (rateLimitHit) {
            try {
                logger.warn("RateLimit has been reached");
                wait(secondsUntilReset * 1000);
                rateLimitHit = false;
                secondsUntilReset = 0;

            } catch (InterruptedException ie) {
                ie.printStackTrace();
            }
            notifyAll();
        }
    } 
```

布尔 rateLimitHit 由 Twitter4J 侦听器设置，它检查剩余的请求数。一旦计数为零，此布尔值设置为真。代码如下所示：

```
public synchronized void onRateLimitStatus(RateLimitStatusEvent evt) {
                RateLimitStatus status = evt.getRateLimitStatus();
                if (status.getRemainingHits() == 0) {
                    rateLimitHit = true;
                    secondsUntilReset = status.getSecondsUntilReset();
                }

            } 
```

这个问题是，比如说，我还有 3 个查询留给 Twitter，并且方法 checkRateLimitStatus() 将为所有 6 个查询返回 false（因为它尚未设置）。因此，所有线程都开始了，因为计数还不是零。但是，当前 3 个线程使用 Twitter 完成时，计数将达到零，其余三个线程失败。

我该如何解决这个问题？如何使这些线程更可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:21:59.927

假设获取速率限制状态是基于与其他操作相同的 Twitter 消息传递，那么总会有一个滞后，这使得任何通过检查此状态来带来可靠性的尝试都失败了。除非您以同步方式操作，否则状态总是有可能过时。我建议您尝试在本地计算速率限制状态并使所有线程自恢复以防出错。从浪费 CPU 时间的角度来看，对于任何可重复的操作，使用等待/通知机制也是一个好点。

# c - 在 C 中，何时支持有条件的“测试？：替代”形式（空真大小写）？

> ID：10946195
> 
> 赞同：14
> 
> 时间：2012-06-08T09:24:18.853
> 
> 标签：c, gcc, conditional

在 gcc 中，我可以写`foo ? : bar`which 是的简写形式，`foo ? foo : bar`但我看到 K&R 没有提到它。

这是我应该依赖的东西，在某些标准中定义吗？或者只是我应该避免的（邪恶的）gcc 扩展？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T09:29:10.420

这是一个***GCC 扩展***，名称为：
**[Conditionals with Omitted Operands](http://gcc.gnu.org/onlinedocs/gcc-4.5.0/gcc/Conditionals.html#Conditionals)**。

它**不是**标准的 c.Using`-pedantic`编译标志会告诉你。

> 条件表达式中的中间操作数可以省略。那么如果第一个操作数非零，它的值就是条件表达式的值。
> 
> 因此，表达式
> 
> `    x ? : y`
> 
> 如果 x 不为零，则具有 x 的值；否则，y 的值。
> 
> 这个例子完全等同于
> 
> `    x ? x : y`
> 
> 在这种简单的情况下，省略中间操作数的能力并不是特别有用。当它变得有用时，第一个操作数确实或可能（如果它是宏参数）包含副作用。然后在中间重复操作数将执行两次副作用。省略中间操作数会使用已经计算的值，而不会产生重新计算的不良影响。

> **这是我应该依赖的东西，在某些标准中定义吗？或者只是我应该避免的（邪恶的）gcc 扩展？**

取决于您的要求，如果您的代码不需要在 GCC 以外的任何其他编译器实现上运行，那么您可以使用它。但是，如果您的代码要跨不同的其他编译器实现构建，那么您不应该使用它。

*无论如何，考虑到我总是建议避免这种（丑陋*的）结构，一个人的目标应该是尽可能多地编写直观和可读的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T09:27:58.330

这是一个 GCC 扩展。它不是 C 标准的一部分，但 GCC 编译器允许您使用它。有关详细信息，请参阅其[文档](http://gcc.gnu.org/onlinedocs/gcc/Conditionals.html#Conditionals)，并注意其与“等效”三元表达式的行为差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:27:17.537

这是 GCC 中包含的扩展。

如果使用另一个编译器（不支持该扩展）进行编译，它将不起作用*。*

所以我建议避免使用这种类型的快捷方式。

编辑：正如@KevinCox 指出的那样，即使 a`DEFINE`也行不通（见下面的第二条评论）。

# android - Android：未设置电子邮件附件的 MIME 类型

> ID：10946203
> 
> 赞同：4
> 
> 时间：2012-06-08T09:24:59.240
> 
> 标签：android, mime-types, email-attachments

我正在为 Android 2.3.3 开发一个非常小的应用程序。我想发送一封包含 jpeg 图像作为附件的电子邮件（通过 android 电子邮件应用程序），位于相关代码下方（仅使用 sdk 模拟器测试）：

```
public void sendArtwork(View aView){
        EditText subj = (EditText)findViewById(R.id.edit_subj);
        EditText descr = (EditText)findViewById(R.id.edit_descr);
        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.setType("image/jpeg");  // attachment is a jpeg
        emailIntent.putExtra(Intent.EXTRA_EMAIL,new String[]{"contribute@unintentional.org"}); 
        emailIntent.putExtra(Intent.EXTRA_SUBJECT,subj.getText().toString()); //get subject from one EditText in the UI
        emailIntent.putExtra(Intent.EXTRA_TEXT,descr.getText().toString()); //get body from one EditText in the UI
        emailIntent.putExtra(Intent.EXTRA_STREAM, fileURI); // add attachment
        startActivityForResult(Intent.createChooser(emailIntent, "Choose Email application:"), EMAIL_CODE);

    } 
```

它按预期工作：它打开一个选择器，使用正确的地址、主题、文本和附件创建一封电子邮件并发送它。

我唯一无法完成的是为图像设置正确的 mime 类型：正确接收附件（我可以将其分离到磁盘并打开它）但没有内容类型，因此电子邮件客户端（Thunderbird）不显示预览，也无法提供打开它的应用程序。有人对此有什么建议吗？

----**编辑**

图像文件在没有任何错误的情况下发送：如前所述，如果我将其保存在我的 PC 上的磁盘上并使用合适的应用程序（即 Picasa）打开它，它会正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:57:44.080

我使用相同的方法发送电子邮件，并在几个电子邮件客户端的不同版本上进行了测试。甚至 gmail 也不一致，有些版本设置了附件的 mime 类型，有些则忽略了它。我得出的结论是没有安全的解决方案。至少不是通过使用 ACTION_SEND Intent。

# wpf - 如何根据视图模型中的属性渲染不同的路径形状

> ID：10946206
> 
> 赞同：2
> 
> 时间：2012-06-08T09:25:19.333
> 
> 标签：wpf, mvvm, path, styles, datatrigger

我有一个视图模型，它公开了一个 Activity 类型的 observablecollection。每个 Activity 都有一个名为 ActivityType 的属性。

在我的视图中，我有一个 ItemsControl，其中 ItemsPanelTemplate 是一个画布。我将 ItemsControl 的 itemsource 属性绑定到视图中的 observablecollection。observablecollection 中的每个 Activity 必须在视图中呈现为 wpf 路径对象，根据 observablecollection 中每个 Activity 的 ActivityType 属性，该对象看起来不同。

如果我在 View 的资源部分中为要显示的每个路径定义一组样式，如何根据每个 Activity 的 ActivityType 属性在画布上创建不同的 Path 对象？

我是否在 DataTemplate 中使用了 DataTraiggers？

视图的 XAML 如下： DarkBlue

```
 <LinearGradientBrush x:Key="ItemBrush" StartPoint="0,0" EndPoint="0,1">
        <LinearGradientBrush.GradientStops>
            <GradientStop Color="#FAFBE9" Offset="0" />
            <GradientStop Color="Blue" Offset="1" />
        </LinearGradientBrush.GradientStops>
    </LinearGradientBrush>

    <Style x:Key="FlowChartItemStyle" TargetType="Path">
        <Setter Property="Fill" Value="{StaticResource ItemBrush}"/>
        <Setter Property="Stroke" Value="{StaticResource ItemStroke}"/>
        <Setter Property="StrokeThickness" Value="1"/>
        <Setter Property="StrokeLineJoin" Value="Round"/>
        <Setter Property="Stretch" Value="Fill"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Height" Value="50"/>
        <Setter Property="Width" Value="50"/>
    </Style>

    <!-- Process -->
    <Style x:Key="Process" TargetType="Path" BasedOn="{StaticResource FlowChartItemStyle}">
        <Setter Property="Data" Value="M 0,0 H 60 V40 H 0 Z"/>
    </Style>

    <Style x:Key="Process_DragThumb" TargetType="Path" BasedOn="{StaticResource Process}">
        <Setter Property="Height" Value="30"/>
        <Setter Property="Width" Value="30"/>
        <Setter Property="Margin" Value="5,5,5,5"/>
    </Style>

    <!-- Decision -->
    <Style x:Key="Decision" TargetType="Path" BasedOn="{StaticResource FlowChartItemStyle}">
        <Setter Property="Data" Value="M 0,20 L 30 0 L 60,20 L 30,40 Z"/>
    </Style>

    <Style x:Key="Decision_DragThumb" TargetType="Path" BasedOn="{StaticResource Decision}">
        <Setter Property="Height" Value="30"/>
        <Setter Property="Width" Value="30"/>
        <Setter Property="Margin" Value="5,5,5,5"/>
        <Setter Property="ToolTip" Value="Decision"/>
    </Style>

    <!-- Start -->
    <Style x:Key="Start" TargetType="Path" BasedOn="{StaticResource FlowChartItemStyle}">
        <Setter Property="Data" Value="M 10,20 A 20,20 0 1 1 50,20 A 20,20 0 1 1 10,20"/>
    </Style>

    <Style x:Key="Start_DragThumb" TargetType="Path" BasedOn="{StaticResource Start}">
        <Setter Property="Height" Value="30"/>
        <Setter Property="Width" Value="30"/>
        <Setter Property="Margin" Value="5,5,5,5"/>
    </Style>

    <!-- Terminator -->
    <Style x:Key="Terminator" TargetType="Path" BasedOn="{StaticResource FlowChartItemStyle}">
        <Setter Property="Data" Value="M 20,40 A 20,20 0 0 1 20,0 H 40 A 20,20 0 0 1 40,40 Z"/>
    </Style>

    <Style x:Key="Terminator_DragThumb" TargetType="Path" BasedOn="{StaticResource Terminator}">
        <Setter Property="Height" Value="30"/>
        <Setter Property="Width" Value="30"/>
        <Setter Property="Margin" Value="5,5,5,5"/>
    </Style>        
</Window.Resources>
<Grid>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <ItemsControl ItemsSource="{Binding CanvasActivities}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style>
                    <Setter Property="Canvas.Top" Value="{Binding Path=Top}"/>
                    <Setter Property="Canvas.Left" Value="{Binding Path=Left}"/>
                </Style>
            </ItemsControl.ItemContainerStyle>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <DataTemplate.Triggers>
                        <DataTrigger Value="0" Binding="{Binding Path=ActivityType}">

                        </DataTrigger>
                        <DataTrigger Value="1" Binding="{Binding Path=ActivityType}">

                        </DataTrigger>
                        <DataTrigger Value="2" Binding="{Binding Path=ActivityType}">

                        </DataTrigger>
                        <DataTrigger Value="3" Binding="{Binding Path=ActivityType}">

                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:35:25.233

另一种选择是使用`ItemsControl.ItemTemplateSelector`您自己的`DataTemplateSelector`类 - 请参阅[http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplateselector.aspx)和[http://msdn.microsoft.com/en -us/library/system.windows.controls.datatemplateselector.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)了解更多信息。

然后你会`DataTemplate`为你展示的每条不同的路径设置一个单独的路径。

# html - 图像背景未填充所有 div

> ID：10946207
> 
> 赞同：-1
> 
> 时间：2012-06-08T09:25:27.463
> 
> 标签：html, css

背景应显示在所有 div 中，但不可见。

[http://jsfiddle.net/uxUqJ/1/](http://jsfiddle.net/uxUqJ/1/)

我需要在所有 div 中显示我的背景。背景在样式容器 div 中定义。等等。

```
<div id="container">
<div id="1"></div>
<div id="2"></div>
<div id="3"></div>
</div> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:29:46.727

我认为您需要添加`overflow:auto;`到您的 CSS 中...我还删除了引号

```
#content{
    width:1049px;
    overflow:auto;
    background: #000 url(http://s1.wp.com/wp-content/themes/pub/dark-wood/images/postflowerback.png) ;
} 
```

Div 目前没有高度......但是关于重复或位置，您想对背景做什么，这是一个很好的参考点[https://developer.mozilla.org/en/CSS/background](https://developer.mozilla.org/en/CSS/background)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:29:54.933

您必须指定`height`属性和`repeating`背景集。

```
#content{
    width:349px;
    height: 700px;
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:34:42.013

或者，您可以`<div style="clear:both;"></div>`在 text3 结束后添加。即使它们是浮动的，这也会在元素周围拉伸容器 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:36:18.313

将您的 css 更改为智能方式

```
 <style>#content{ display:table;
    width:1049px;

    background: url("image_src") ;

}
#text{
  display:table-row;
    width:1049px;   
    padding-left:27px;
    padding-right:28px;}

#text_1,#text_2,#text_3{ display:table-cell;

    padding-left: 40px;
    width: 278px;
}#text_3{
    padding-right:40px;
}

</style> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:32:55.710

清除`#text`div。

**添加以下样式：**

```
#text {
    zoom:1; /* For IE 6/7 (trigger hasLayout) */
}

#text:after {
    content:"";
    display:table;
    clear: both;
} 
```

**演示：http:** [//jsfiddle.net/uxUqJ/13/](http://jsfiddle.net/uxUqJ/13/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T09:34:54.817

你有你的元素浮动。您需要在关闭包装元素之前清除浮动，以便`#content`正常增长：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/uxUqJ/7/)示例！

**将您的标记更改为：**

```
<div id="content">
  <div id="text">
    <div id="text_1">...</div>
    <div id="text_2">...</div>
    <div id="text_3">...</div>
    <div style="clear:both;"></div>  <!-- Add this line -->
  </div>
</div> 
```

*此外，您可以删除内联样式并使用类。*

# list - 在 glassfish webservice 测试器中传递 List 对象

> ID：10946212
> 
> 赞同：0
> 
> 时间：2012-06-08T09:25:48.677
> 
> 标签：list, glassfish

glassfish 测试器中的每个参数都有所有 Web 服务方法的输入。传递整数、字符串等很容易，但是如何传递 List 呢？我正在尝试使用 java 语法，例如

```
new List().add(3) 
```

但它不起作用。如何将列表对象作为参数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:17:58.423

在这种情况下最好使用序列化，因此传递序列化列表不是问题 - 它只是一个字符串。

# android - 如何为应用内广告配置 AdMob 发布商帐户

> ID：10946216
> 
> 赞同：1
> 
> 时间：2012-06-08T09:25:54.807
> 
> 标签：android, admob, adsense

当我注册为谷歌开发者发布我的第一个应用程序时，我也在 AdMob 上注册了自己，但后来我不再使用它了。现在我正在考虑将 AdMob 广告的视图添加到我的应用程序中并关注他们提到的 Google 指南中提到您必须在 AdMob 上注册为发布者...此发布者订阅是我第一次完成的订阅，还是我必须做一些特别的事情才能成为发布者？如果我实施 AdMob 广告，然后 AdMob 必须为从我的应用中获得的点击付费，我会在 AdMob 帐户中收到资金，然后我会找到取回资金的选项？

**编辑：**如果有必要在 AdMob 中注册您的应用程序，我应该在必填字段*公司名称*中输入什么，因为我没有为任何公司开发 android 并且我正在空闲时间进行开发？我可以销售应用程序或使用 AdMob 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:53:08.537

我正在执行以下操作：

*   使用我的 Google 帐户登录 admob (admob.com)
*   设置 admob 发布者帐户（获取发布者 ID）并声明不同的应用
*   按照 admob 实施指南和最佳实践在应用​​中放置 AdView：[admob 最佳实践](https://developers.google.com/mobile-ads-sdk/docs/bestpractices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:05:13.000

如果您根本不为任何公司工作，则公司名称应该是您作为开发人员使用的名称。例如，如果您使用开发人员名称“yourappsdev”，您可以将公司名称设置为“yourappsdev”。

# get - 从上一页获取数据

> ID：10946217
> 
> 赞同：0
> 
> 时间：2012-06-08T09:25:56.307
> 
> 标签：get

我创建了一个弹出窗口，使用`onclick="window.open()"`的问题是如何从上一页获取数据？这是我的代码：

```
<?php
include ("conn.php");
extract($_GET); 

$applicantID = $_GET['applicantID'];          
$sql = "SELECT * FROM applicant WHERE applicantID ='$applicantID'";
$query = mysql_query($sql);
$data = mysql_fetch_array($query);

echo $data['applicantID']; 
```

?>

当我回`$data['applicantID'];`显时，它不显示任何数据。

我用这个`<input type="button" value="Check" onclick="window.open('checkstatus.php','popup','width=800,height=800,scrollbars=yes,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0'); return false" />`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:33:45.160

你为什么不使用`window.open('checkstatus.php?applicantID=something')`？并检索它，`$applicantID = $_GET['applicantID']`以便我希望它能够工作。

# emacs - Emacs 编译模式不会看到 bash 别名

> ID：10946219
> 
> 赞同：18
> 
> 时间：2012-06-08T09:25:57.990
> 
> 标签：emacs, emacs23

Emacs Mx 编译没有看到 .bashrc 中设置的任何别名。如果我使用 Mx shell 然后输入别名，就可以了。我尝试从 /etc/profile、~/.profile、~/bash_env 采购 .bashrc，任何我能想到的都无济于事。

我在 Emacs 23 和 Ubuntu 11 上。我使用 /usr/bin/emacs %F 从桌面按钮启动 emacs。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-09T03:28:36.577

Emacs 从父进程继承其环境。您如何调用 Emacs - 从命令行或其他方式？

如果您：

`M-x`编译`RET` `C-a` `C-k`bash -i -c **your_alias** `RET`

调用 bash 作为交互式 shell（-i 选项）应该读取您的 .bashrc 别名。

编辑：我认为`M-x`shell-command 和`M-x`compile 都通过调用进程在劣质 shell 中执行命令。在您的 .emacs 中尝试以下操作（或仅评估）：

```
(setq shell-file-name "bash")
(setq shell-command-switch "-ic") 
```

我注意到，在对上述内容进行评估之后，会选择 .bashrc 别名供`M-x`shell-command 和`M-x`compile 使用，即

`M-x`编译`RET` **your_alias** `RET`

然后应该工作。

我的环境：Emacs 24.1（预测试 rc1），OSX 10.7.3

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-11T13:44:23.933

Keith Flower 的回答有效，但由于 .bashrc 在其他地方被不必要地加载，可能会导致一些速度变慢（大概很多次，我的计算机并不是完全功率不足，但在尝试使用 autocomplete.el 时，emacs 几乎无法使用）。

另一种方法是`shell-command-switch`仅对需要的功能进行本地修改。这可以使用 emacs 的“建议”功能来创建围绕这些函数的包装器来完成。这是一个修改的示例`compile`：

```
;; Define + active modification to compile that locally sets
;; shell-command-switch to "-ic".
(defadvice compile (around use-bashrc activate)
  "Load .bashrc in any calls to bash (e.g. so we can use aliases)"
  (let ((shell-command-switch "-ic"))
    ad-do-it)) 
```

您需要为每个要使用 .bashrc 的函数编写类似的“建议”（例如，我还需要为 .bashrc 定义相同的建议`recompile`），只需复制上面的内容并`compile`用另一个函数名称替换上面的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:03:37.453

你可能喜欢 emac 的 bash-completion ：

[https://github.com/szermatt/emacs-bash-completion](https://github.com/szermatt/emacs-bash-completion)

您将能够在编译 minibuffer 和 shell 模式中使用别名的制表符完成。

享受 ！

（他们在这里谈论它[Bash autocompletion in Emacs shell-mode](https://stackoverflow.com/questions/163591/bash-autocompletion-in-emacs-shell-mode)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T10:39:36.523

我认为编译命令不是通过 shell 解释的：它们是由 emacs 执行的（这意味着不考虑别名、shell 函数和其他特定于 shell 的东西）。

尝试将您的编译命令包装到一个 shell 脚本中，该脚本将获取正确的环境。

您可以使用以下形式的完整 shell 脚本来执行此操作

```
#!/bin/bash
source "~/.bashrc"
my_command 
```

或直接在 emacs 中使用以下形式的编译命令

`bash -c "source ~/.bashrc; my_command"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-28T22:04:36.177

请参阅[当我运行 shell 命令时，是否有办法让我的 emacs 识别我的 bash 别名和自定义函数？](https://stackoverflow.com/questions/12224909)对于不运行所有 .bashrc 并且不创建这些错误消息的修复程序：

> bash：无法设置终端进程组（-1）：设备 bash 的 ioctl 不合适：此 shell 中没有作业控制

# c# - 配置设置的数组/列表c#

> ID：10946223
> 
> 赞同：1
> 
> 时间：2012-06-08T09:26:36.583
> 
> 标签：c#, configuration, settings

我有一个包含一些典型用户设置的 winform 应用程序。此表单可以根据安装时的设置进行复制，允许用户选择此 UI 的 1、10 或 100 个实例，它们都将驻留在同一个主表单中。对于单一/默认设置，有一组“设置”。在同一应用程序中处理这些设置的多个实例的首选方法是什么？我应该只使用每个标准属性和设置并使用 app.config 文件，还是有更合适的方法？

感谢您的任何建议，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:35:50.793

我认为创建一个表单基类（例如 FrmBase）。这个基表单应该包含几个保存用户设置的属性。您可以让基类在创建时加载标准设置。在创建继承表单期间，您可以调整这些标准设置。

# c# - 检查输入以创建有效的三角形

> ID：10946230
> 
> 赞同：0
> 
> 时间：2012-06-08T09:27:12.137
> 
> 标签：c#, math

我正在执行一项任务，用户输入三角形的三个边来计算底面积和周长。我必须更新我的代码，因为它没有被老师接受。我必须进行某种检查以确保这些值构成一个有效的三角形。我搜索并找到了一些关于三角形不等式定理的信息，它是关于三角形任意两条边的长度之和大于第三条边的长度

因此，如果我做对了，我有值 A、B 和 C，我将对 A + B 求和以检查这是否大于 C 并求和 A + C 它是否大于 B，最后检查如果在计算完成之前 B + C 的总和大于 A。它是否正确？帮助是preciated！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T09:40:15.687

您总结两侧长度并将它们与第三侧进行比较的方法是正确的，但您必须对*每一*对线都这样做。

```
a + b > c
a + c > b
b + c > a 
```

只有当这三个都为真时，你才有一个三角形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:29:42.840

一点都不。*您选择的每*三个点组成一个有效的三角形，*除非*它们都在同一条直线上。

# java - 如何使用另一个 android 应用程序从一个 android 应用程序读取写入文件的数据

> ID：10946231
> 
> 赞同：0
> 
> 时间：2012-06-08T09:27:13.843
> 
> 标签：java, android, android-emulator

我使用以下方法将数据写入一个 android 应用程序中的文件

```
 private void writeFileToInternalStorage() {

    String eol = System.getProperty("line.separator");
    BufferedWriter writer = null;

 try{
    writer = new BufferedWriter(new OutputStreamWriter(openFileOutput("myFile.txt", MODE_WORLD_WRITEABLE|MODE_WORLD_READABLE)));
      writer.write("Hello world!");
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
      if (writer != null) 
      {
        try 
        {
            writer.close();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
      }
    }
} 
```

然后我尝试使用此方法从另一个 android 应用程序中读取该文件

```
 private void readFileFromInternalStorage(){
    String eol = System.getProperty("line.separator");
    BufferedReader input = null;
    try 
    {
        input = new BufferedReader(new InputStreamReader(openFileInput("myFile1.txt")));
         String line;
        StringBuffer buffer = new StringBuffer();
        while ((line = input.readLine()) != null) 
        {
            buffer.append(line + eol);

        }

       TextView tv = (TextView) findViewById(R.id.textView);  
        tv.setText(buffer.toString().trim());

    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
        if (input != null) 
        {
            try 
            {
                input.close();
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
        }
    }
} 
```

第二种方法无法读取文件。我也添加了读写权限，但它只显示空白屏幕。可能是什么错误，我该如何纠正？我是 Android 编程新手，需要您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:35:18.020

问题是

```
openFileOutput("myFile.txt", MODE_WORLD_WRITEABLE|MODE_WORLD_READABLE)) 
```

文档说：

> 该文件被写入相对于您的应用程序的路径中

**所以情况是你在相对于应用程序 1 的路径中写入文件，并试图从相对于应用程序 2 的路径中读取它。**

您应该能够调用 Environment.getExternalStorageDirectory() 来获取 SD 卡的根路径并使用它来创建 FileOutputStream。从那里，只需使用标准的 java.io 例程。

**查看下面的代码段以将文件写入 SD 卡。**

```
private void writeToSDCard() {

try
        {
            File file = new File(Environment.getExternalStorageDirectory(),
                    "filename");
            BufferedWriter writer = new BufferedWriter(new FileWriter(file));
            writer.write("Hello World");
            writer.close();
        } catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

**查看下面的片段以读取保存在 SD 卡上的文件。**

```
private void readFileFromSDCard() {
    File directory = Environment.getExternalStorageDirectory();
    // Assumes that a file article.rss is available on the SD card
    File file = new File(directory + "/article.rss");
    if (!file.exists()) {
        throw new RuntimeException("File not found");
    }
    Log.e("Testing", "Starting to read");
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader(file));
        StringBuilder builder = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            builder.append(line);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:31:49.250

您最好的选择是将其放入 scdcard 中，例如`/sdcard/Android/data/package/shared/`

# sql - 根据记录集中的值动态连接表

> ID：10946234
> 
> 赞同：1
> 
> 时间：2012-06-08T09:27:21.300
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

这个问题可能不完全描述我想要做什么，但我有一个存储过程，它有一个返回以下列的查询

ID 标题 表名

Title 当前作为 NULL 返回，因为我需要能够从 Tablename 列中引用的 JOINED 表中获取它。查询中可能返回几个不同的 Tablename 值，并且需要从每条记录的 Tablename 字段中引用的表中获取每条记录的 Title。

有没有一种纯粹的 SQL 方式来做到这一点？

我考虑过创建一个临时表，然后遍历每条记录并通过对 Tablename 中的表运行单独的查询来设置标题，但我希望有一个更清洁的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:39:05.237

这可能表明设计不直接适合 SQL。您的 Title 信息存储在多个表中的原因是什么？可以重新考虑不是这样吗？

但是，如果表列表是固定列表，则有解决方案；在视图中使用`UNION ALL`，或 CTE 使用内联视图，使您的许多表看起来像一个表......

```
WITH
  inlineView
AS
(
              SELECT 'table1' AS tableName, x, y, z, title FROM table1
  UNION ALL   SELECT 'table2' AS tableName, x, y, z, title FROM table2
  UNION ALL   SELECT 'table3' AS tableName, x, y, z, title FROM table3
)
SELECT
  *
FROM
  aTable
INNER JOIN
  inlineView
    ON  aTable.tableName = inlineView.tableName
    AND aTable.x         = inlineView.x 
```

如果你不能让它适应它，或者你需要在视图中包含的表的数量不固定，你可能需要一个循环和一些动态 SQL。同样，一个强有力的指标表明该模式对 SQL 并不友好。

# asp.net-mvc - 通过登录屏幕使用 JQuery 将数据发布到控制器

> ID：10946239
> 
> 赞同：0
> 
> 时间：2012-06-08T09:27:52.437
> 
> 标签：asp.net-mvc, jquery-ui, jquery

我在我的 ASP.NET MVC3 网站中有一个部分，用户可以在其中单击一个按钮以将条目添加到他们帐户中的“已保存项目”部分。这是通过 JQuery Ajax 请求完成的，如果他们已登录，则效果很好。如果他们没有登录，我希望他们被重定向到登录页面，然后自动将条目添加到他们的 Saved项目部分。

我让所有部分单独工作 - 即当单击按钮时，如果未登录，则会显示登录框。登录弹出窗口也可以成功运行。问题是试图一次无缝地完成所有事情。这是我到目前为止的代码：

保存按钮的单击事件 - 检查用户是否一路登录：

```
 var loggedIn = false;

    $(document).ready(function () {
        $('a#saveSearch').live('click', function (event) {
            $.get('@Url.Action("IsLoggedIn", "Account", null)', function (response) {
                if (response == "True")
                    loggedIn = true;
                else
                    loggedIn = false;
            });
            if (loggedIn){
                SaveSearch();
            }
            else{                        
                $('#dialog').dialog('open');
                SaveSearch(); //don't think this is correct because it hits this line before login is complete
            }
        }); 
```

保存到数据库的功能：

```
 function SaveSearch(){                    
            var url = '@Url.Action("SaveSearch", "User")';
            $.ajax({
                url: url,
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({
                    json: "@Html.Raw(Session["MyFormString"].ToString())"
                }),
                success: function (data) {
                    $('a#saveSearch').attr('disabled', "disabled");
                    $('div#savedResponse').html('<p>Search saved to user account</p>');
                },
                error: function () {
                }
            });
        }
    }); 
```

JQuery UI 对话框弹出：

```
$(function () {
    $('#dialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        title: 'Login',
        modal: true,
        open: function(event, ui) {
            $(this).load("@Url.Action("Logon", "Account", null)");
        },
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    }); 
```

我认为我的代码有一些根本性的问题，因为这样，登录弹出窗口只出现一秒钟，然后立即消失。看起来我需要让它停止推进代码，直到登录完成。

任何有助于实现这一目标的建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:31:58.673

我想你的问题可能与：

```
$.get('@Url.Action("IsLoggedIn", "Account", null)', function (response) {
  if (response == "True")
    loggedIn = true;
  else
    loggedIn = false;
});
if (loggedIn){
  SaveSearch();
}
else{                        
  $('#dialog').dialog('open');
  SaveSearch(); //don't think this is correct because it hits this line before login is complete
} 
```

调用是异步的`$.get`，这意味着后面的代码：

```
if (loggedIn){ 
```

在服务器响应之前正在执行。您需要将该代码放在响应回调中：

```
$.get('@Url.Action("IsLoggedIn", "Account", null)', function (response) {
  if (response == "True")
    loggedIn = true;
  else
    loggedIn = false;

  if (loggedIn){
    SaveSearch();
  }
  else{                        
    $('#dialog').dialog('open');
    SaveSearch(); //don't think this is correct because it hits this line before login is complete
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:36:01.963

尝试为您的模态添加一个关闭回调函数，然后代码只会在模态关闭并且所有登录成功完成后才完成。查看代码中的注释

```
$(document).ready(function () { 
    $('a#saveSearch').live('click', function (event) { 
        $.get('@Url.Action("IsLoggedIn", "Account", null)', function (response) { 
            if (response == "True") 
                loggedIn = true; 
            else 
                loggedIn = false; 
        }); 
        if (loggedIn){ 
            SaveSearch(); 
        } 
        else{  
            //in this dialog, add a close handler,then add the SaveSearch(); function in that handler
            $('#dialog').dialog('open'); 

           } 
    }); 
```

# android - 如何实现整个活动的多点触控？

> ID：10946240
> 
> 赞同：2
> 
> 时间：2012-06-08T09:27:52.690
> 
> 标签：android, android-layout, android-widget, multi-touch

我有一个具有线性布局的活动，并且在此布局内部有几个线性布局，并且每个线性布局都设置了按钮和文本视图。我想为整个屏幕实现多点触控功能意味着如果用户使用手指执行放大和缩小，那么它应该放大和缩小整个屏幕（相应地增加和减少所有按钮，文本视图大小一次）。

如何使用 android 2.1 实现它？

问候， 皮克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:05:51.937

这可能会给你一个想法：

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.graphics.PointF;
import android.util.AttributeSet;
//import android.util.FloatMath;
import android.view.MotionEvent;
import android.view.View;

public class MultitouchView extends View {
    private static final int STROKE_WIDTH = 1;
    private static final int CIRCLE_RADIUS = 20;

    private ArrayList<PointF> touchPoints = null;
    private Paint drawingPaint = null;
    private boolean isMultiTouch = false;
    private int pathEffectPhase = 0;

    public MultitouchView(Context context) {
        super(context);

        initialize(context);
    }

    public MultitouchView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        initialize(context);
    }

    public MultitouchView(Context context, AttributeSet attrs) {
        super(context, attrs);

        initialize(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if(touchPoints.size() > 0)
        {
            DashPathEffect effect = new DashPathEffect(new float[] {7,7}, pathEffectPhase);
            PointF midpt = null;

            drawingPaint.setPathEffect(effect);

            for(int index=1; index<touchPoints.size(); ++index)
            {
                midpt = getMidPoint(
                        touchPoints.get(index - 1).x,touchPoints.get(index - 1).y,
                        touchPoints.get(index).x,touchPoints.get(index).y);

                canvas.drawCircle(
                        touchPoints.get(index - 1).x,touchPoints.get(index - 1).y, 
                        1, drawingPaint);
                canvas.drawCircle(
                        touchPoints.get(index - 1).x,touchPoints.get(index - 1).y, 
                        CIRCLE_RADIUS, drawingPaint);

                canvas.drawCircle(touchPoints.get(index).x,touchPoints.get(index).y, 
                        1, drawingPaint);
                canvas.drawCircle(touchPoints.get(index).x,touchPoints.get(index).y, 
                        CIRCLE_RADIUS, drawingPaint);

                canvas.drawLine(
                        touchPoints.get(index - 1).x,touchPoints.get(index - 1).y,
                        touchPoints.get(index).x,touchPoints.get(index).y,
                        drawingPaint);

                canvas.drawCircle(midpt.x,midpt.y, 10, drawingPaint);
            }

            ++pathEffectPhase;

            invalidate();
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        super.onTouchEvent(event);

        int action = event.getAction() & MotionEvent.ACTION_MASK;

        switch(action)
        {
            case MotionEvent.ACTION_DOWN:
            {
                invalidate();

                break;
            }
            case MotionEvent.ACTION_POINTER_DOWN:
            {
                isMultiTouch = true;

                setPoints(event);
                invalidate();

                break;
            }
            case MotionEvent.ACTION_POINTER_UP:
            {
                isMultiTouch = false;

                break;
            }
            case MotionEvent.ACTION_MOVE:
            {
                if(isMultiTouch)
                {
                    setPoints(event);
                    invalidate();
                }

                break;
            }
        }

        return true;
    }   

    private void initialize(Context context){
        drawingPaint = new Paint();

        drawingPaint.setColor(Color.RED);
        drawingPaint.setStrokeWidth(STROKE_WIDTH);
        drawingPaint.setStyle(Paint.Style.STROKE);
        drawingPaint.setAntiAlias(true);

        touchPoints = new ArrayList<PointF>();
    }

    public void setPoints(MotionEvent event){
        touchPoints.clear();

        int pointerIndex = 0;

        for(int index=0; index<event.getPointerCount(); ++index)
        {
            pointerIndex = event.getPointerId(index);

            touchPoints.add(new PointF(event.getX(pointerIndex),event.getY(pointerIndex)));
        }
    }

    private PointF getMidPoint(float x1,float y1, float x2, float y2) {
        PointF point = new PointF();

        float x = x1 + x2;
        float y = y1 + y2;

        point.set(x / 2, y / 2);

        return point;
    }
} 
```

# javascript - 从 javascript 文件访问网络表单

> ID：10946245
> 
> 赞同：1
> 
> 时间：2012-06-08T09:27:59.530
> 
> 标签：javascript, html, django, forms

我正在寻找一种将一些隐藏的表单数据发送到 Django 服务器的方法，只要将 javascript 和 html（模板）保持在同一个文件中，它就可以正常工作，但现在我正在尝试分开他们。

可能真的很简单，但我想我所要做的就是获取（设置？）窗口/html的“名称”并从javascript模块访问它？

HTML：

```
<html>
<head>
<script src="/media/postIt.js"></script>
</head>
<body>
<form action="" method="post" id="postForm">{% csrf_token %}
<input type="hidden" id="scoreField1" name="score1"></input>    
<input type="hidden" id="scoreFieldSet1" name="score1Set"></input>
<input type="hidden" id="scoreField2" name="score2"></input>
<input type="hidden" id="scoreFieldSet2" name="score2Set"></input>
<input type="hidden" id="scoreField3" name="score3"></input>
<input type="hidden" id="scoreFieldSet3" name="score3Set"></input>
</form>

<table>
<tr>
        <td id="bg1" onclick="postIt('score1')">
            Ones
        </td>   
        <td id="bg1_1">

        </td>
    </tr>

    <tr>
        <td id="bg2" onclick="postIt('score2')">
            Twos
        </td>
        <td id="bg2_1">

         </td>
    </tr>
</table> 
```

Javascript：

```
 function postIt(x){

var pointArray = [d1,d2,d3,d4,d5];
var totVal = d1+d2+d3+d4+d5;

pointArray.sort(function(a,b){return a-b});
alert(pointArray);

alert("total value: " + totVal);    

if(x == "score2"){
    if("{{ res.score2Set }}" == 0){     

            var form = document.getElementById('postForm');

            document.getElementById('scoreField1').value = score1;
            document.getElementById('scoreFieldSet1').value = score1Set;

            document.getElementById('scoreField2').value = score;
            document.getElementById('scoreFieldSet2').value = 1;

            document.getElementById('scoreField3').value = score3;
            document.getElementById('scoreFieldSet3').value = score3Set;

            form.submit();

    }       
} 
```

编辑：澄清：我无法通过调用 document.getElement 来访问 html“文档”中的元素......因为它们现在位于不同的文档中（物理上......）。我想我必须以某种方式为文档分配一个名称/变量。并将其称为：nameOfDocument.getElement..

等等..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:58:41.520

我猜这条线

```
if("{{ res.score2Set }}" == 0) 
```

是问题 - 包含的 Javascript 文件不会通过 Django 模板加载器，因此您不能在其中放置变量。此条件将始终评估为假。

您需要以某种方式在模板文件中设置变量，然后在 Javascript 中检索它。做到这一点的最佳方法可能是将`res.score2Set`作为附加参数添加到 postIt() 函数中，然后执行以下操作：

```
<td id="bg1" onclick="postIt('score2', '{{ res.score2Set }}')"> 
```

虽然显然我并不真正知道您的应用程序做了什么，所以这可能不适用。如果`res.score2Set`在 HTML 中的其他地方使用，最好从 Javascript 中的 DOM 加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:59:38.290

您对 javascript 的假设是错误的。无论您在何处编写 JS 代码（内联、文件内、外部文件），所有 JS 代码都可以访问 DOM。所以，问题是您没有正确加载 JS 文件。

# ubuntu - IzPack 不在 Ubuntu 中创建桌面快捷方式

> ID：10946248
> 
> 赞同：2
> 
> 时间：2012-06-08T09:28:11.503
> 
> 标签：ubuntu, shortcut, izpack

Izpack 4.3.5 在安装文件夹中创建 .desktop 文件和 IzPackLocaleEnabledXdgDesktopIconScript.sh 但不在桌面上创建 .desktop 文件。

Unix_shortcutSpec.xml 的内容：

```
<shortcuts>
    <skipIfNotSupported/>
    <shortcut KdeUsername="root" applications="no" desktop="yes"
        encoding="UTF-8" initialState="normal" name="Desktop shortcut"
        programGroup="no" startMenu="no" startup="no"
        target="$INSTALL_PATH/src2/ec2ea" type="Application"/>
</shortcuts> 
```

# ruby - 单分支哈希树

> ID：10946253
> 
> 赞同：1
> 
> 时间：2012-06-08T09:28:31.127
> 
> 标签：ruby, activesupport

有没有一些方便的方法来转换数组

```
[a,b,c] 
```

散列树结构，但只有一个分支，如下所示：

```
{node: {a: {node: {b: {node: :c}}}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:43:10.827

您可以使用`reduce`来获得结果：

```
l = [:a, :b, :c]
t = l.reverse.reduce{|h,v|{v=>{node:h}}}  # {:a=>{:node=>{:b=>{:node=>:c}}}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:38:49.733

这样的事情会做：

```
 a=[:a,:b,:c]
 l=lambda{|ar| if ar.empty? then 
        {}
    else 
        ar.length==1 ? {:node=>ar[0]} : {:node=> {ar.shift => (l.call ar)}}
    end
  }
 puts l.call a 
```

不知道有没有更简单的方法。

**UPD：**哎呀，没有注意到它与 ActiveSupport 有关。无论如何，将此哈希转换为您需要的结构应该不难。

# sockets - Groovy TCP 客户端挂起

> ID：10946254
> 
> 赞同：2
> 
> 时间：2012-06-08T09:28:31.127
> 
> 标签：sockets, groovy, tcp

我通常是 .net 开发人员（不要伤害我！）所以请原谅我在这里犯的任何非常愚蠢的错误 :)

我有一个用 .net 编写的 TCP 侦听器，它接收 xml 并发回响应。我正在尝试用 groovy 为它编写一个客户端，以便我可以使用 loadUI 加载测试。这是我到目前为止所拥有的：

```
def s = new Socket("10.208.24.59", 9061);
s.withStreams { inStream, outStream ->
  def reader = inStream.newReader()
  def responseText = reader.readLine()
  outStream << "Hello test server"
  println "response = $responseText"
}
s.close(); 
```

我在 Eclipse 中调试，它挂在 withStreams 线上。我应该收到一条“消息不是 XML”消息，我可以通过 telnet 得到它。

任何想法我做错了什么？

**更新** 我刚刚尝试过这个而不是 withStreams 闭包：

```
def r = new BufferedReader(new InputStreamReader(s.getInputStream()));
def w = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
w.write("Hello test server 2");
w.flush();
println r.readLine();
w.flush();
w.close(); 
```

它现在挂在 println r.readLine() 调用上

**再次更新**

事实证明，这是远程服务关闭（或者更确切地说 -*没有*关闭）流的方式的问题。.net 和我们的大型机都正确处理了它，但 groovy 脚本并不满意。我已经修复了服务并且脚本现在运行愉快，对于遇到类似问题的其他人来说值得牢记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:58:09.183

**===== 更新 ====**

嘿，克里斯；

尝试将套接字写入流处理器之外。*由于 Groovy左移*了套接字类，因此您可以将输出直接指向套接字。此外，不直接相关，但有助于调试，设置套接字读取超时，这样您的线程就不会无休止地阻塞。

```
def s = new Socket("10.208.24.59", 9061);
s.setSoTimeout(3000);
s << "Hello test server";
s.withStreams { inStream, outStream ->
  def reader = inStream.newReader()
  def responseText = reader.readLine()
  println "response = $responseText"
}
s.close() 
```

**===== /更新 ====**

问题是[newReader](http://groovy.codehaus.org/groovy-jdk/java/io/InputStream.html#newReader%28%29)阻塞等待服务器的输出。请参阅下面的堆栈跟踪。由于您永远无法发送请求，因此服务器没有响应。简而言之，使用单线程时，在发送请求之前不要发出监听。将您的代码更改为此，它应该可以工作：

```
def s = new Socket("10.208.24.59", 9061);
s.withStreams { inStream, outStream ->
  outStream << "Hello test server"  // send request first
  def reader = inStream.newReader()
  def responseText = reader.readLine()      
  println "response = $responseText"
}
s.close(); 
```

等待线程的堆栈跟踪如下所示：

```
Stack trace: 
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
   - locked java.io.InputStreamReader@2119899e
java.io.InputStreamReader.read(InputStreamReader.java:167)
java.io.BufferedReader.fill(BufferedReader.java:136)
java.io.BufferedReader.readLine(BufferedReader.java:299)
   - locked java.io.InputStreamReader@2119899e
java.io.BufferedReader.readLine(BufferedReader.java:362)
java_io_BufferedReader$readLine.call(Unknown Source)
org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112) 
```

# sql - NHibernate：由单元格总和组成的映射字段

> ID：10946256
> 
> 赞同：0
> 
> 时间：2012-06-08T09:28:37.007
> 
> 标签：sql, sql-server, nhibernate, nhibernate-mapping

SQL：

```
 [FirstName] [nvarchar](250) NULL,
    [MiddleInitial] [nvarchar](250) NULL,
    [Surname] [nvarchar](250) NULL, 
```

映射：

```
 public string    FirstName { get; set; }
    public string    MiddleInitial { get; set; }
    public string    Surname { get; set; }

    m.Map(x => x.FirstName).Length(255);
    m.Map(x => x.MiddleInitial).Length(255);
    m.Map(x => x.Surname).Length(255); 
```

我需要添加由 [FirstName] + " " +[MiddleInitial]+ " " + [Surname] 组成的全名字段。（用于在 jqGrid 中使用搜索）

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:45:32.710

考虑到您似乎只是在前端使用它：不可持久化的只读属性怎么样？

```
private static string _fullNameFormat = "{0} {1} {2}";
public string FullName
{
    get
    {
        return string.Format(_fullNameFormat,this.FirstName,this.MiddleInitial,this.Surname);
    }
} 
```

未经测试，但应该这样做。如果 NHibernate 坚持保留该属性，请参见[此处](https://stackoverflow.com/questions/907576/how-to-tell-fluent-nhibernate-not-to-map-a-class-property)

另一种侵入性最小的替代方法是对该模型使用扩展方法

```
public static class ModelExtensions
{
    private static string _fullNameFormat = "{0} {1} {2}";
    public static string ToFullName(this Person person)
    {
        return string.Format(_fullNameFormat,person.FistName,person.MiddleInitial,person.Surname);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:23:05.707

我用公式做这个

```
Map(x => x.Fullname).Formula("select FirstName+ ' ' + Surname + ' ' + MiddleInitial from Customer"); 
```

*ICriteria 需要它*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T06:39:26.000

在这种情况下，您将计算模型中的属性：

public string Fullname { get { return string.Format("{0} {1} {2}", FirstName, MiddleInitial, Surname) .Replace(" "," ").Trim(); } }

# java - Java 将 SHA-256 散列字符串与密码明文字符串进行比较

> ID：10946263
> 
> 赞同：2
> 
> 时间：2012-06-08T09:29:05.637
> 
> 标签：java, bytearray, sha256

我正在尝试一个例子：

```
String hashAlgorithm ="sha-256"
...
md=MessageDigest.getInstance(hashAlgorithm);
byte[] enteredPasswordDigest = md.digest(policy.getPassword().getBytes());
if (!MessageDigest.isEqual(enteredPasswordDigest, realPassword.getBytes())) {
    ...
} 
```

但是，散列密码作为字符串存储在数据库中。当我进行比较时，它失败了。当我调试它时，它`enteredPasswordDigest`有 32 字节长度和`realPassword.getBytes()`64 字节长度。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:37:53.733

简单地，

*   获取输入的密码并对其进行哈希/消化
*   转换`byte[]`为字符串
*   将该字符串与数据库中已经散列的密码字符串进行比较

试试这个，

```
String hashedStr = new String(enteredPasswordDigest);
if (!hashedStr.equals(realPassword)) {
  ...
} else {
  ...
} 
```

**文件：** `String.getBytes()`

> 当此字符串无法以默认字符集编码时，此方法的行为未指定。当`java.nio.charset.CharsetEncoder` 需要对编码过程进行更多控制时，应使用该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:36:12.417

假设 realPassword 是一个字符串，问题可能是 Java 字符串是 UTF16，即每个字符 2 个字节。尝试打印两个字节数组以更好地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T05:24:46.680

我用这一点解决了我的问题： Hashed password as a string at database is **"hex"**。这是重点。所以我得到了输入密码的字节数组摘要的十六进制。然后我比较了具有十六进制值的字符串。

# java - “W/AudioFlinger（34）：写入阻塞 70 毫秒，2236 延迟写入，线程”是什么意思？

> ID：10946265
> 
> 赞同：3
> 
> 时间：2012-06-08T09:29:11.643
> 
> 标签：java, android, debugging, audio, xamarin.android

我有一个单声道应用程序，它同时播放很少的声音，日志中有很多这样的消息。这是什么意思？

```
W/AudioFlinger(   34): write blocked for 84 msecs, 2153 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 69 msecs, 2182 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 76 msecs, 2205 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 70 msecs, 2236 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 73 msecs, 2269 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 75 msecs, 2300 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 70 msecs, 2325 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 69 msecs, 2356 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 75 msecs, 2386 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 70 msecs, 2418 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 80 msecs, 2445 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 71 msecs, 2473 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 90 msecs, 2498 delayed writes, thread 0xc658
W/AudioFlinger(   34): write blocked for 72 msecs, 2528 delayed writes, thread 0xc658 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T14:35:00.370

这意味着您应该忽略这些消息。:-)

每条消息都包含一个*进程 ID* (pid)，它是括号内的值。这些消息来自 pid 34；您的进程*不太可能*是 pid 34。

您可以使用`adb shell ps`来获取进程列表。

例如，在我的 Nexus One 上，我看到：

```
W/AudioFlinger(14104): write blocked for 172 msecs, 901 delayed writes, thread 0xea50 
```

什么是 pid 14104？

```
$ adb shell ps | grep 14104
media     14104 1     23992  1996  ffffffff 00000000 S /system/bin/mediaserver 
```

`/system/bin/mediaserver`当然不是您应该过度关注的应用程序。:-)

您如何确定 Mono for Android 进程的 pid？[通过查找进程启动消息。](http://docs.xamarin.com/android/advanced_topics/android_debug_log#Interesting_Messages)在进程启动期间，Android 将列出`ContentProvider`它正在加载到进程中的所有 s。感兴趣的是`__mono_init__`提供者：

```
I/ActivityThread(  602): Pub TouchTest.TouchTest.__mono_init__: mono.MonoRuntimeProvider 
```

上面的消息来自你的 Mono for Android 进程，所以所有带有 pid 602 的消息（在这种情况下）都将是来自你的应用程序的消息；您可以随意忽略其他 pid。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:58:11.073

它可能是也可能不是你可以忽略的东西。输出该消息的过程确实不是您的应用程序，但这并不意味着该消息不是由您的应用程序引起的。您的应用程序通过 Binder 与位于 mediaserver 进程中的 AudioFlinger 进行通信，因此警告消息的 PID 不是您的应用程序的 PID。然而，该消息可能是因为请求 AudioFlinger 播放数据的速度比实际应该播放的音频数据快（基于采样率、通道数和缓冲区的大小）。如果应用程序正在使用 AudioTrack 类来写入原始数据（并且这是从多个线程完成的？），那么数据发送的速度可能比播放速度快，因此 AudioFligner 是“过载”的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T14:55:50.080

快速谷歌搜索后，我发现这`AudioFlinger`是提供最低要求音频功能的音频软件实现。它实现`AudioHardwareInterface`，这基本上是硬件抽象层，它从 Android 平台隐藏驱动程序特定的音频实现（见下图）。

![在此处输入图像描述](../Images/b507d1795e10befe850cd1d9c7313920.png)

就像开发人员一样，支持 Android 框架的库可以将信息记录到 logcat。一些设备记录的数量非常可笑（根据我的经验，即支持三星设备的库），而另一些则记录的很少。无论哪种方式，您都不应该担心这些日志，因为它们特定于 Android 操作系统的内部工作。它们不反映您的应用程序存在任何问题。你可以忽略它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T06:59:51.280

是的，正如 Jnop 所说，让我们忽略它。让我分享我的经验，可能对某些人有用。我们通常会忽略这些消息，因为它不会对功能造成任何问题，并且 android 平台会记录有关内核进程、库、应用程序框架等的大量信息，这些信息可能对 API 开发人员有用，而不是对应用程序开发人员有用。

如果您使用 NDK 开发应用程序，那么了解本地方法显然会有所帮助。

如果 MediaPlayback 和 MediaPlayer API 上的文档需要，我建议您理解这个概念。

1)http://developer.android.com/guide/topics/media/mediaplayer.html 2)什么是关键类 3)MediaPlay 回放实现的最佳方法 4)https://groups.google.com/forum /?fromgroups#!topic/android-developers/s6Bqu3K20Ng

如果您已经实施，也请分享您的经验。因为我强烈认为它们是 Mediaplayer 中的已知问题，Android 开发团队可能出于某种原因对此并不感兴趣。

您可以单击暂停按钮来停止冗长的记录消息，并且您可以轻松地在 logcat 窗口中滚动。

# php - 如何序列化查询数组结果并存储在数据库表中

> ID：10946268
> 
> 赞同：0
> 
> 时间：2012-06-08T09:29:32.293
> 
> 标签：php, sql, serialization

我如何序列化这个结果并将其存储在数据库中；

```
Array
(
[0] => stdClass Object
    (
        [ingredientID] => 2
        [code] => Bf
        [description] => 1st Class Flour
        [volume] => 8268
        [price] => 750
        [amount_gram] => 0.02980
        [status] => Inactive
        [uom_id] => 1
        [flour] => Yes
    )

[1] => stdClass Object
    (
        [ingredientID] => 3
        [code] => Sf
        [description] => 3rd Class Flour
        [volume] => 18490
        [price] => 635
        [amount_gram] => 0.02540
        [status] => Inactive
        [uom_id] => 5
        [flour] => Yes
    )

[2] => stdClass Object
................ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:31:27.180

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

```
$i = serialize($var2serialized); 
```

`$i`将包含数组的序列化形式。

然后，您需要将其添加`$i`为要存储的数据库查询的一部分。

# .net - Azure 诊断不存储数据，即使使用默认应用程序

> ID：10946278
> 
> 赞同：1
> 
> 时间：2012-06-08T09:30:17.690
> 
> 标签：.net, azure, azure-storage, azure-diagnostics

我正在尝试将天蓝色诊断数据存储在存储帐户上。我尝试了以下代码：

```
public override bool OnStart()
    {
        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.
        // Get the default initial configuration for DiagnosticMonitor.
        DiagnosticMonitorConfiguration diagnosticConfiguration = DiagnosticMonitor.GetDefaultInitialConfiguration();

        // Filter the logs so that only error-level logs are transferred to persistent storage.
        diagnosticConfiguration.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;

        // Schedule a transfer period of 30 minutes.
        diagnosticConfiguration.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1.0);

        // Specify a buffer quota of 1GB.
        diagnosticConfiguration.Logs.BufferQuotaInMB = 900;

        // Start the DiagnosticMonitor using the diagnosticConfig and our connection string.
        DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagnosticConfiguration);

        Trace.TraceInformation("WebRole started");

        return base.OnStart();
    } 
```

此代码与微软在 MSDN [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.diagnostics.diagnosticmonitorconfiguration.logs上建议的相同](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.diagnostics.diagnosticmonitorconfiguration.logs)

我试图注释掉 BufferQuotaInMB 没有运气。我已经在本地环境和实时部署中使用新创建的应用程序进行了尝试。事实证明，甚至没有创建 WADLogsTable。
我错过了什么？

注意：它在使用 windowsEventLogs 进行实时部署时工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:40:50.263

不确定出了什么问题，作为替代方案，您可以尝试在代码中使用 Diagnostics.wadcfg 作为配置选项？

很少有博客文章解释如何使用它：

如何使用 Diagnostics.wadcfg 配置 Windows Azure 诊断集合：[http ://www.davidaiken.com/2012/02/27/how-to-use-diagnostics-wadcfg-to-configure-windows-azure-diagnostics-collection /](http://www.davidaiken.com/2012/02/27/how-to-use-diagnostics-wadcfg-to-configure-windows-azure-diagnostics-collection/)

通过 diagnostics.wadcfg 配置文件配置 WAD：http: [//blogs.msdn.com/b/davidhardin/archive/2011/03/29/configuring-wad-via-the-diagnostics-wadcfg-config-file.aspx](http://blogs.msdn.com/b/davidhardin/archive/2011/03/29/configuring-wad-via-the-diagnostics-wadcfg-config-file.aspx)

如何使用 Windows Azure 诊断配置文件：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh411551.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh411551.aspx)

值得一试，对不起，我无法提供更多帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:27:54.670

没有创建 WadLogTable 是因为我们的问题是您没有使用 SetCurrentConfiguration() 和 GetDefaultInitialConfiguration() 来最终节省传输时间和日志级别。您必须使用这些 API 的集合，如下所示：

```
GetDefaultInitialConfiguration() 
SetCurrentConfiguration() 
```

或者

```
GetCurrentConfiguration()
SetCurrentConfiguration() 
```

更多信息：[Azure 诊断和 WadLogsTable](https://stackoverflow.com/questions/10870665/azure-diagnostics-and-wadlogstable/10871834#10871834)

# linux - ftp mput 只发送四个文件 - ubuntu

> ID：10946280
> 
> 赞同：0
> 
> 时间：2012-06-08T09:30:35.713
> 
> 标签：linux, bash, ftp

我编写了一个 bash 脚本，并且每分钟都在 ubuntu 12.04 中使用 cron 运行它。

下面你可以看到我的 ftp 上传脚本：

```
#!/bin/sh 
HOST='192.168.10.40' 
USER='user1' 
PASSWD='Oo123456' 
FILE='CAM_1_*'
DIR='SecImg' 
UP='..' 
cd  /home/user1/Masaüstü/BBTCP/
chmod 777 $FILE
ftp -v -n $HOST <<__END_OF_SESSION
user $USER $PASSWD 
type binary 
cd $DIR 
mput $FILE
cd $UP 
bye 
__END_OF_SESSION 
```

在该目录中有 10 个不同的文件，格式为 CAM_1_IP_EPOCH.jpg

例如

CAM_1_192.168.10.30_12345678.jpg

CAM_1_192.168.10.30_12345688.jpg

CAM_1_192.168.10.30_12345698.jpg

...

CAM_1_192.168.10.30_12345878.jpg

但 mput 只发送 4 个文件。如何通过 ftp 发送所有文件。

当我尝试在这里发送是输出：

这是输出：

```
Connected to 192.168.10.40.
220-FileZilla Server version 0.9.41 beta
220-written by Tim Kosse (Tim.Kosse@gmx.de)
220 Please visit http://sourceforge.net/projects/filezilla/
331 Password required for ozen.ozkaya
230 Logged on
Remote system type is UNIX.
?Invalid command
200 Type set to I
250 CWD successful. "/SecImg" is current directory.
mput CAM_1_192.168.10.33_1339750625.jpg? 200 Port command successful
150 Opening data channel for file transfer.
226 Transfer OK
14682 bytes sent in 0.00 secs (5206.2 kB/s)
mput CAM_1_192.168.10.33_1339750628.jpg? 200 Port command successful
150 Opening data channel for file transfer.
226 Transfer OK
14636 bytes sent in 0.00 secs (4809.2 kB/s)
mput CAM_1_192.168.10.33_1339750631.jpg? 200 Port command successful
150 Opening data channel for file transfer.
226 Transfer OK
14872 bytes sent in 0.00 secs (5260.2 kB/s)
mput CAM_1_192.168.10.33_1339750635.jpg? 200 Port command successful
150 Opening data channel for file transfer.
226 Transfer OK
14569 bytes sent in 0.00 secs (4850.8 kB/s)
mput CAM_1_192.168.10.33_1339750638.jpg? mput CAM_1_192.168.10.33_1339750640.jpg? mput CAM_1_192.168.10.33_1339750644.jpg? mput CAM_1_192.168.10.33_1339750647.jpg? mput CAM_1_192.168.10.33_1339750650.jpg? mput CAM_1_192.168.10.33_1339750654.jpg? mput CAM_1_192.168.10.33_1339750658.jpg? mput CAM_1_192.168.10.33_1339750660.jpg? mput CAM_1_192.168.10.33_1339750694.jpg? mput CAM_1_192.168.10.33_1339750696.jpg? mput CAM_1_192.168.10.33_1339750699.jpg? mput CAM_1_192.168.10.33_1339750703.jpg? mput CAM_1_192.168.10.33_1339750706.jpg? mput CAM_1_192.168.10.33_1339750709.jpg? mput CAM_1_192.168.10.33_1339750713.jpg? mput CAM_1_192.168.10.33_1339750716.jpg? mput CAM_1_192.168.10.33_1339750719.jpg? mput CAM_1_192.168.10.33_1339750723.jpg? 221 Goodbye 
```

它只发送前四个，不能发送其余的......

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:39:01.950

我怀疑发生的事情是 bash 将 FILE='CAM_1_*' 扩展为本地系统上的完整文件列表，然后 mput 命令行太长而无法处理所有文件。

尝试在设置 FILE 后添加一个 'echo ${FILE} 行以查看变量的值。

如果发生这种情况，请在设置 FILE 之前添加一个“set -f”命令以禁用文件名扩展。

# jquery-ui - 多个选项卡 + 可排序 + connectedLists 正确移动选项卡 + 目标 div

> ID：10946282
> 
> 赞同：-1
> 
> 时间：2012-06-08T09:30:37.210
> 
> 标签：jquery-ui, jquery-ui-tabs, jquery-ui-sortable

我已经设置了 3 组选项卡并使它们可排序。我还通过 sortable 中的 connectedLists 选项将它们连接起来。当我将选项卡从一个列表移动到另一个列表时，我想将选项卡 + 目标 div 移动到新上下文。目前，当我单击移动的选项卡时，目标仍在旧空间中，这是预期的。但主要的问题是，它仍然作为前一个标签集的一部分工作。我想改变这种行为。

```
<div id="tabs-1"><ul class="gadget-tabs">...</ul></div>
<div id="tabs-2"><ul class="gadget-tabs">...</ul></div> 
<div id="tabs-3"><ul class="gadget-tabs">...</ul></div>
<script>
$('div[id^=tabs-]').tabs();
$('.gadget-tabs').sortable({
        connectWith: ".gadget-tabs"
}).disableSelection();
</script> 
```

请注意，所有选项卡都是 ajax 加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:52:16.823

以下解决方法适用于大多数情况，但`Uncaught jQuery UI Tabs: Mismatching fragment identifier.`对于少数测试仍会抛出异常。想知道为什么这种不一致的行为！

还有轻微的晃动，可以通过减少超时值来减少。

```
<div id="tabs-1"><ul class="gadget-tabs">...</ul></div>
<div id="tabs-2"><ul class="gadget-tabs">...</ul></div> 
<div id="tabs-3"><ul class="gadget-tabs">...</ul></div>
<script>
$('div[id^=tabs-]').tabs();
$('.gadget-tabs').sortable({
        connectWith: ".gadget-tabs",
        receive: function (event, ui) {
            var receiver = $(this).parent();
            var sender = $(ui.sender[0]).parent();
            receiver.tabs('destroy');
            sender.tabs('destroy');
            setTimeout(function () { receiver.tabs(); sender.tabs()}, 100);
        }
}).disableSelection();
</script> 
```

# objective-c - lldb：如何获取调用函数？

> ID：10946284
> 
> 赞同：3
> 
> 时间：2012-06-08T09:30:43.123
> 
> 标签：objective-c, llvm, lldb

我想知道是否可以从`bt`命令中获取选定的项目。例如，查找某个函数的调用函数。这个想法基本上是在有问题的函数处添加一个不间断断点，然后打印调用堆栈，例如调用函数，也可能是调用函数。最后，这可能归结为过滤`bt`命令的结果。过滤将有必要排除两者之间的框架和运行时方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T05:31:45.113

您今天需要编写一些 Python 脚本来执行此操作 - 这还不错。

```
(lldb) br se -n mach_msg
(lldb) br comm add -s python 1
Enter your Python command(s). Type 'DONE' to end.
> thread = frame.GetThread()
> frnum = 0
> for fr in thread.frames:
>   print '% 2d %s' % (frnum, fr.GetFunctionName())
>   frnum = frnum + 1
> frame.GetThread().GetProcess().Continue()
> DONE 
```

我设置了断点（`mach_msg`在本例中为 on ()），我在断点中添加了一个命令（`-s python`意味着它是用脚本语言 python 编写的；我正在将此命令添加到断点 #1）。

python 代码自动提供当前断点对象和框架对象（参见`help break command add`lldb 中的“”）。我从框架对象中获取当前线程，然后遍历该线程的堆栈帧。

lldb 有很多关于您可以对这些 python 对象执行哪些操作的内置信息。例如

```
(lldb) script help (lldb.SBFrame)
(lldb) script help (lldb.SBThread) 
```

另见[http://lldb.llvm.org/python-reference.html](http://lldb.llvm.org/python-reference.html)

# android - android实现倒计时时钟

> ID：10946285
> 
> 赞同：-1
> 
> 时间：2012-06-08T09:30:45.663
> 
> 标签：android

我是android的新手，我需要开发一个倒计时时钟组件。该组件看起来就像秒表。

请帮助我。

谢谢迷你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:34:29.740

使用`CountDownTimer`你可以做到这一点，并且按时完成`onFinish`被称为。

```
new CountDownTimer(30000, 1000) {//here time completing is 30 seconds

        @Override
        public void onTick(long millisUntilFinished) {

         }
        @Override
        public void onFinish() {

        //finish here ,do stuff here
    }
}; 
```

# jquery - 未触发 onchange

> ID：10946289
> 
> 赞同：0
> 
> 时间：2012-06-08T09:31:09.160
> 
> 标签：jquery

我无法以编程方式触发`onChange`选择标签的事件。 [http://jsfiddle.net/XqnLE/](http://jsfiddle.net/XqnLE/)

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:34:33.590

您的`TestIt`函数超出了范围，因为在 JavaScript 窗口内的 JSFiddle 代码中通常配置为在 DOM 就绪处理程序内。

如果将其放在全局范围内，它将正常工作：

```
<script>
    function TestIt() {
        $("#tt").trigger("change");
    }
</script>

<select id="tt" onchange="alert('onchange triggered!!')">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select>

<input type="button" value="trigger" onclick="TestIt();"/> 
```

**演示：http:** [//jsfiddle.net/XqnLE/2/](http://jsfiddle.net/XqnLE/2/)

* * *

如果您设置`no wrap`而不是`onLoad`选择 JQuery 设置，它也将起作用。

**演示：http:** [//jsfiddle.net/XqnLE/5/](http://jsfiddle.net/XqnLE/5/)。

# java - Cayenne：使用由 cayenne 生成的手动创建的类实例更新数据库

> ID：10946301
> 
> 赞同：2
> 
> 时间：2012-06-08T09:32:01.953
> 
> 标签：java, struts2, apache-cayenne

我正在尝试使用 cayenne 与 PostgreSQL 数据库进行交互。到目前为止，一切都按预期工作，但我现在遇到了一个我不太了解的问题（我是卡宴新手）。

假设我有一个包含常用字段（book_id、title、editor、price）的表“books”、一个“表”作者（author_id、author_name）和一个链接表“books_authors”（book_id、author_id）。

与添加或编辑一本书的过程相关的所有类共享一个 DataContext。

我有一个 struts2（我使用速度模板）表单，可以让您添加一本书，并使用 ajax 与多个作者关联。我对某个事件做出反应，触发一个调用 struts2 操作的 ajax 请求，该操作验证作者是否存在，然后将 Books_Authors 对象（由 cayenne 生成的类）添加到 struts2 会话（该操作实现 SessionAware）。

表格如下所示：

```
<form action="AddOrEditBook.do">
    <input type="hidden" name="book.book_id" value="$!book.book_id" />

    <input type="text" name="book.title" value="$!book.title" />

    <input type="text" name="book.editor" value="$!book.editor" />

    <input type="number" name="book.price" value="$!book.price" />

    <input type="text" name="author" /> <input type="button" name="addAuthor" value="Add" />

    <ul>
        <li id="author_2">Author 2 <input type="button" name="removeAuthor" value="Remove" /></li>
        <li id="author_16">Author 16 <input type="button" name="removeAuthor" value="Remove" /> </li>
    </ul>

    <input type="submit" />
</form> 
```

一旦我将表单提交给 AddOrEditBook.do，它有一个用于 book 的 setter 和 getter，struts2 就会创建 book 对象并用表单的值填充它。那很好。

这是困扰我的事情：

当我更新一本书时，我没有找到使用struts创建的对象来更新db的方法。我想要实现的是以某种方式指示 cayenne 使用 struts 创建的对象来更新数据库中的相应实体。

我在 object_id、PersistenceState 等方面搞砸了很多：

```
Expression exp_book = ExpressionFactory.matchExp(Book.BOOK_ID_PROPERTY, book.getBook_id());
Book bookFromDb = RetrieveHelper.retrieveScalarByExpression(ctxt, new Book(), exp_book);

book.setObjectContext(ctxt);
book.setObjectId(bookFromDb.getObjectId());
ctxt.getObjectStore().registerNode(book.getObjectId(), book);
book.setPersistenceState(PersistenceState.MODIFIED); 
```

使用 cayenne 更新数据库实体时正确的策略是什么？是否只能通过制作诸如 bookFromDb.setTitle(book.getTitle()); 之类的东西来做到这一点？?

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T08:05:59.807

> struts2 创建 book 对象并用表单的值填充它。那很好。

我不是 Struts2 专家，但从我在有关表单对象生命周期的文档中阅读的内容来看，此类对象是由 Struts2 通过调用默认构造函数创建的。除非有一种方法可以覆盖此行为，否则将其替换为可以从正确的 DataContext 为您提供 Cayenne 对象的工厂，您在这里所做的是正确的 - 您正在分离附加到表单的值对象（以及动作类）来自持久对象。

使用 Tapestry 等其他框架，您可以直接将表单绑定到 Cayenne 持久对象。也许您也可以以类似的方式扩展 Struts2？

> 与添加或编辑一本书的过程相关的所有类共享一个 DataContext。

一条不相关的建议。您必须至少为每个用户拥有一个单独的 DataContext（例如，将其放在 HttpSession 中）。或者，如果您不在请求之间保持未提交状态 - 甚至每个请求可能有一个 DataContext。换句话说 - 不要共享 DataContexts，除非它们是只读的。否则你的应用程序不是线程安全的。

# java - JAXB：带注释实例的编组列表

> ID：10946303
> 
> 赞同：1
> 
> 时间：2012-06-08T09:32:13.337
> 
> 标签：java, list, jaxb, marshalling

我被困在应该非常基本的东西上。我有一个带注释的 Person POJO（字段上的@XMLAttribute 和@XMLElement 注释）。该类被注释为 @XMLRootElement 。现在我有一个服务，它执行一个返回这些实例列表的查询。换句话说，我最终得到

```
List<Person> 
```

我只是想将此列表编组为 xml，并放入我的 servlet 的响应输出中。

如果我只是遍历列表并单独编组每个对象：

```
for(Person person : people){
    jaxbMarshaller.marshal(person, out);
} 
```

它多次输出整个文档（我最终为每条记录提供了多个 xml 标题行）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<person>
<name>Bob</name>
</person>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<person>
<name>Gary</name>
</person> 
```

它不应该在记录之间输出重复的标题行。

另一方面，如果我尝试通过一次调用来编组整个列表： jaxbMarshaller.marshal(people, out);

我得到以下异常：

```
javax.xml.bind.JAXBException: class java.util.ArrayList nor any of its super class is
known to this context. 
```

简单地编组带注释的 POJO 的多个实例的“正确”方法是什么？我假设它必须被包裹在另一个名为“人”的“上层”根元素中，然后每个人节点都作为一个子节点。但是您如何使用 JAXB 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T09:50:03.240

是的，你是对的。您必须将父元素作为 LIST，然后尝试在列表对象中添加人员值。

# sql-server - 如何管理 sql server 的内存使用情况？

> ID：10946306
> 
> 赞同：4
> 
> 时间：2012-06-08T09:32:37.773
> 
> 标签：sql-server, sql-server-2008

我有一个 sql srever 2008 实例，一个开发服务器。所有开发人员同时在不同数据库的服务器上工作。RAM 的内存使用量超过 2GB，服务器的总 RAM 为 4GB。sys.sysprocesses 列表中没有被阻止的进程。总和（memusage）只有 190，当前连接的总进程，即计数（*）是 111，来自 sys.sysprocesses。我已经配置了一个 powershell 脚本，它会在进程 sql server 的使用量超过 2000 MB 时发出警报。我不断警觉。我没有找到任何解决方案，即在这种情况下该怎么做。

我对 sum(memusage) =190 和 RAM 使用量 2000+MB 感到困惑。其余进程在哪里消耗 RAM。

请帮帮我。

谢谢

尼特什·库马尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:45:32.653

检查*Server Properties*窗口的*Memory*窗格（在*Server Management Studio*中，右键单击*Object Explorer*中的数据库服务器图标并选择*Properties*）Maximum server memory 的值。我们发现分配比机器中的总内存略少的方法效果很好。

 ***略小于总内存，因为我们不希望操作系统强制进入虚拟内存。

SQL Server 将根据需要占用尽可能多的内存，直至达到此限制。将此限制为物理内存量会强制 SQL Server 优化查询以使用 tempdb 而不是使用虚拟内存。我们发现这更好。

如果 SQL Server 没有使用所有内存，那么它可能根本不需要它。这是我们对一些服务器的经验。瓶颈可能在其他地方——可能是磁盘 IO——所以接下来的步骤是开始了解正在运行的查询以及为什么运行缓慢......***

# c - 没有溢出的减法？

> ID：10946307
> 
> 赞同：12
> 
> 时间：2012-06-08T09:32:43.060
> 
> 标签：c, integer, overflow, precision

假设有两个整数（`int x, y;`）。
`x`是负数并且`y = 0x80000000`。

为什么不`(x - y)`溢出而`x + (-y)`呢？
计算机不做加法减法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:39:53.043

要回答您的第一个问题，0x80000000 (-2,147,483,648) 表示有符号整数的最小 32 位值。2,147,483,647 是最大值。[当使用二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)存储时，最大值的大小比最小值的大小小一。不能`(-y)`单独表示，因为它超过了最大值（1）。的最终整数值`(x-y)`在范围内（假定`x`为负数）并且可以用 32 位整数表示。

要回答您的第二个问题，减法是通过将要减去的数字转换为其加法倒数来实现的。鉴于在这种情况下可能发生溢出，您的编译器可以`(x-y)`通过执行`-((-x)+y)`. 然而，这纯粹是猜测（这是我能想到的唯一安全的方法）。

# java - 通过 Android Emulator 使用 Web 服务

> ID：10946311
> 
> 赞同：0
> 
> 时间：2012-06-08T09:33:02.420
> 
> 标签：java, android, web-services, android-emulator

我正在使用带有 Android 3.2 的 Android 虚拟设备，并且我尝试使用 Web 服务。

我在清单中添加了允许我的应用程序在 Internet 上运行的行： `<uses-permission android:name="android.permission.INTERNET" />`

我可以通过我的模拟设备访问互联网，在我的浏览器上我可以使用“ `http://192.168.2.114/test`”访问我的本地网站。

我使用`vtwsclib-1.4`( `for vtiger`) 并且有一些功能可以`login`进行查询，...（使用 的 Web 服务`Client Relationship Management`）

我在 Eclipse 上用一个简单的项目进行了测试，一切正常，但是当我尝试通过模拟器进行测试时..

我的问题是我无法使用 crm 的 web 服务。你知道这个问题吗？我没有任何错误信息。

我想防火墙，但不知道要更改什么

谢谢

# java - 如何使 JScrollPane 与嵌套的 JTable 一起正常工作？

> ID：10946314
> 
> 赞同：1
> 
> 时间：2012-06-08T09:33:06.730
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

我遇到的问题是，当更多行添加到 JTable (jtbls) 时，垂直滚动条不会出现在我的 JScrollPane（外部）上。

```
JPanel panel = new JPanel();
panel.setLayout(new GridLayout(1, 4));
JScrollPane outer = new JScrollPane(panel);

jtbls = new JTable[4];
for (int i = 0; i < jtbls.length; i++) {
    jtbls[i] = new JTable(new MyTableModel());
    jtbls[i].setFillsViewportHeight(true);
    jtbls[i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 1));

    JPanel inner = new JPanel(new BorderLayout());
    inner.add(jtbls[i], BorderLayout.CENTER);
    inner.add(jtbls[i].getTableHeader(), BorderLayout.NORTH);
    inner.setPreferredSize(new Dimension(outer.getWidth() / 4, 70));

    panel.add(inner);
}

add(outer); 
```

![截屏](../Images/74da92da3715db3b40754f2dce3ef670.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:50:52.753

您可以将除一个滚动条之外的所有滚动条设置为`VERTICAL_SCROLLBAR_NEVER`并将一个设置为`VERTICAL_SCROLLBAR_ALWAYS`。然后像@camickr[在这里](https://stackoverflow.com/q/2614457/261156)向我展示的那样将滚动条模型绑定在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:27:24.330

这是因为你设置

```
inner.setPreferredSize(new Dimension(outer.getWidth() / 4, 70)); 
```

`inner` `JPanel`高于高度的“罚款”也是如此，`70`并且不向父级请求更多空间 -`JPanel panel`它不会向其父级请求更多空间 - `JVieport`。

此外，如果您查看`JTable`- 方法的源代码`setFillsViewportHeight`仅适用于`javax.swing.JLayer`, `javax.swing.ScrollPaneLayout`, `javax.swing.ViewportLayout`（查看 的调用`getScrollableTracksViewportHeight()`） - 所以这仅在 JTable 位于某个视口内时才有效。

# twitter-bootstrap - Bootstrap scrollspy 在部分之间轻弹

> ID：10946316
> 
> 赞同：3
> 
> 时间：2012-06-08T09:33:09.177
> 
> 标签：twitter-bootstrap

我已经在我的页面上实现了一个 subnav 样式的 Bootstrap scrollspy，但似乎正在发生奇怪的事情。我有四个部分，每个部分都在一个 div 中，并且我已经给了一个 id。但是，当单击链接或滚动时，它会跳到奇怪的地方。

可以在这里查看。 [http://www.writeupp.com/faq.aspx](http://www.writeupp.com/faq.aspx)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:28:23.050

我遇到了你所说的类似问题。滚动时顶部导航闪烁的位置。我意识到这是因为我在页面上有可选项卡的内容。除了 data-spy="scroll" 之外，我的解决方法是在我的 body 元素中添加 data-target=".navbar" ，以便 scrollspy 知道要更改哪个导航栏。我希望这有帮助。

```
<body data-spy="scroll" data-target=".navbar"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:02:35.297

另请注意，`scrollspy`在旧版本的 IE 中使用时 - 如果您`anchor`的 s 指向 html5 元素，例如`section`，您`.nav`将`anchors`在`ul`. 这是因为 jquery 无法确定这些“外来”DOM 元素的位置。要解决此问题，请使用`div`s 而不是`section`s 或使用`modernizr.js`（特别是`html5shiv`组件）。

查看[Modernizr](http://modernizr.com/)网站了解更多信息。

# php - 仅使用查询复制 mysqldump 功能

> ID：10946317
> 
> 赞同：0
> 
> 时间：2012-06-08T09:33:10.817
> 
> 标签：php, mysql, dump

如何仅使用查询备份 MySQL 数据库？我的意思是，出于安全原因，PHP 的`system()`功能被禁用，因此我无法调用`mysqldump`.

对于表结构，我使用这个：

```
SHOW CREATE TABLE table_name 
```

但是表格数据呢？是否存在预定义的 SQL 命令？我试过了`SELECT ... INTO var_list`，但我无法让它工作（`SELECT ... INTO OUTFILE`不适合我，因为数据库主机与我有权访问的服务器不同）。

感谢您的帮助，很抱歉成为这样的菜鸟，但这是我在这里的第一个问题！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:38:30.937

您不想让 PHP 备份您的数据库。只有数据库（管理软件）本身可以正确备份数据库，您没有充分的理由要自己做。

如果您要使用 PHP 或单独的查询或两者的组合来执行此操作，您将面临巨大的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:52:26.140

`INSERT`通过查询在 PHP 代码中创建语句应该非常简单`SELECT * FROM table`。这是一个例子：

```
$db = new PDO('mysql:dbname=DATABASE;host=HOST', 'USER', 'PASSWORD');
$result = $db->query('SELECT * FROM table');

$columns = array();
for($i = 0; $i < $result->columnCount(); $i++) {
  $column = $result->getColumnMeta($i);
  $columns[] = sprintf('`%s`', $column['name']);
}
$colstring = implode(',', $columns);

$rows = $result->fetchAll(PDO::FETCH_NUM);
$inserts = array();
foreach($rows as $r) {
  $values = array_map(function($e) use ($db) {
      return $db->quote($e);
    },
    $r);
  $valstring = implode(',', $values);
  $inserts[] = sprintf('INSERT INTO table (%s) VALUES (%s)',
                       $colstring,
                       $valstring);
} 
```

# sql - 如何使 SQL Server 在不使用 order by 的选择中首先返回最后一行

> ID：10946318
> 
> 赞同：2
> 
> 时间：2012-06-08T09:33:12.170
> 
> 标签：sql

我有一张有 350 000 行的表。当我搜索前 50 个时，我得到了 50 个最旧的行。有没有办法让 SQL 服务器从底部开始，所以我得到了 bin 插入的最后 50 行？

我们有一些性能问题，所以我不能使用任何循环遍历所有记录的语法。

如果我按 ID 添加订单，则需要 14 秒而不是 1 秒。我使用动态 SQL 来解决动态表结构的搜索功能。

```
ALTER Procedure [CS.Core].[spDynamicSearchInsuranceDemoCar] 
```

> @ChassisNumber AS NVARCHAR(50) = NULL，@FirstOwner AS BIT = NULL，@GroupId AS INT = NULL，@InsuranceNumber AS INT = NULL，@InsuredId AS INT = NULL，@Model AS NVARCHAR(50) = NULL，@OwnerYearOfBirth AS INT = NULL，@RegistrationNumber AS NVARCHAR(12) = NULL，@StakeholderId AS INT = NULL，@StatusId AS INT = NULL，@UserId 作为 int，@LanguageId 作为 int AS SET NOCOUNT ON；开始声明 @sql nvarchar(MAX),@paramlist nvarchar(4000) 选择 @sql ='SELECT TOP 50 Insurance.InsuranceId, ISNULL(ProductCaption.CaptionText, [CS.Core].Entity.Name) AS Product_462, Stakeholder.RefStakeholderName AS Stakeholder_1093，Insurance.ValidFrom 作为 ValidFrom_925，Insurance.InsuranceNumber，Insurance.GroupId，Insurance.StatusId，Insurance.ValidFrom，DemoCar.RegistrationNumber，DemoCar.Year，DemoCar.ChassisNumber，DemoCar.FirstOwner，DemoCar。
> 
> > 0 SELECT @sql = @sql + ' AND ([CS.Entity].[DemoCar].[RegistrationNumber] Like @RegistrationNumber)' ELSE SELECT @sql = @sql + ' AND ([CS.Entity].[DemoCar]. [RegistrationNumber] = @RegistrationNumber)' IF @StakeholderId 不为 NULL SELECT @sql = @sql + ' AND ([CS.Entity].[Insurance].[StakeholderId] = @StakeholderId)' IF @StatusId 不为 NULL SELECT @ sql = @sql + ' AND ([CS.Entity].[Insurance].[StatusId] = @StatusId)' SELECT @sql = @sql + ''
> 
> SELECT @paramlist = '@ChassisNumber AS NVARCHAR(50) = NULL，@FirstOwner AS BIT = NULL，@GroupId AS INT = NULL，@InsuranceNumber AS INT = NULL，@InsuredId AS INT = NULL，@Model AS NVARCHAR(50) = NULL，@OwnerYearOfBirth AS INT = NULL，@RegistrationNumber AS NVARCHAR(12) = NULL，@StakeholderId AS INT = NULL，@StatusId AS INT = NULL，@UserId 作为 int，@LanguageId 作为 int' EXEC sp_executesql @sql，@参数列表,@ChassisNumber,@FirstOwner,@GroupId,@InsuranceNumber,@InsuredId,@Model,@OwnerYearOfBirth,@RegistrationNumber,@StakeholderId,@StatusId,@UserId,@LanguageId END

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T09:38:51.527

> *“当我搜索前 50 个时，我会得到 50 个最旧的行。”*

不，你得到 50 行。时期。DBMS 选择返回的 50 行。50 个或多或少的随机行。

如果您想要最后插入的 50 行，则必须有一列存储此类信息 (InsertionDateTime)。然后索引它。然后你可以运行：

```
SELECT TOP (50)
    * 
FROM 
    mytable 
ORDER BY
    InsertionDateTime DESC ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:38:53.010

考虑到您有一个 IDENTITY ID 列

```
select * 
from YOUR_TABLE
where id > (select max(id) from YOUR_TABLE) - 50 
```

编辑：

如果您没有 ID，则需要使用 row_number 做一些事情，但您需要订单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:35:49.763

如果您有一个 IDENTITY 主键列，那么您可以按该列降序排序（因为这是插入的顺序行，并且 id 单调递增）

```
SELECT TOP 50 *  
FROM MyTable
ORDER BY IdentityColId DESC 
```

**注意**：默认情况下，SQL Server 在表的 Identity 主键列上创建聚集索引这一事实不足以保证排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:36:08.993

在您选择的末尾添加一个“ORDER BY inserttime DESC”（或任何您的“旧”标准，顺序 ID 等）。但是，是的，还要检查您是否设置了合适的索引。如果您不确定，请使用解释计划。

# php - 通过 imagemap 传递变量

> ID：10946326
> 
> 赞同：0
> 
> 时间：2012-06-08T09:33:43.370
> 
> 标签：php, html

我有一张包含许多城市的国家地图。我用图像地图发现了每个城市。我想在点击地点时显示与每个城市相关的数据库数据。是否有任何可能的方法通过图像映射传递变量（id？）以使用此变量显示数据？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:42:02.197

`href`您可以在元素的属性中使用 URL 的查询部分`area`（我假设您正在使用所谓的客户端图像映射，使用`map`包含元素的`area`元素）。例子：

```
<area shape="circle" coords="100,200,5" alt="London" href=
  "/foo.php?thing=42&amp;stuff=something&amp;country=GB"> 
```

# node.js - Express.js + Less：如何正确配置

> ID：10946329
> 
> 赞同：16
> 
> 时间：2012-06-08T09:33:53.703
> 
> 标签：node.js, express, less

我尝试了模块'less'和'less-middleware'。我尝试了在所有教程中找到的所有不同的代码片段。没有可用的文档。有人可以解释一下如何配置 Express.js 和 Less，以便正确预编译 less 吗？！

使用以下问题作为指导：

1.  你应该使用“less”**模块**还是“less-middleware”模块？什么是官方/支持的方式？什么是优越？
2.  您的目录**结构**`/public`应该如何？（您需要任何特定的文件夹？'styles'/'less'/'css'？还是由你自己决定？）
3.  如何配置有关目录结构的**快速应用程序**（来自问题 2）。（静态文件和编译器选项或less-middleware，这里哪些目录很重要）
4.  如何从 html中**引用**我的预编译**样式表？**（使用 .less 或 .css？什么引用类型？什么目录路径？）

如果有人能回答，那就太好了:-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T08:55:59.230

***此解决方案仅适用于 express 2.x。***

我找到了一个解决方案，希望这可以帮助某人：

* * *

**1.less or less-middleware**

我使用较少，因为我读过它是官方端口。但不确定有什么区别，因为没有可用的文档。

**2.目录结构：**

您的目录结构无关紧要。但强烈建议有一个公用文件夹来提供所有静态内容，如 JavaScript、、Less、CSS 或图像文件。

**3.应用配置：**

您需要两个特定的东西来减少正常工作：

首先是编译器，它编译较少的文件：

```
 app.use(express.compiler({ src : __dirname + '/public', enable: ['less']})); 
```

其次，显示在哪里可以找到静态文件！

```
 app.use(express.static(__dirname + '/public')); 
```

两者都应该指向您的公用文件夹！

**4.html**

```
 <link rel="stylesheet" href="/styles/bootstrap.css"> 
```

直接指向您的无根文件，该文件位于您的公共文件夹中的某个位置。

**5\. 更少的文件**

感谢[这个](https://stackoverflow.com/a/9174969/389430)答案，我一直知道出了什么问题。less.js 中存在某种错误。它不会找到您在根文件中导入的所有较少文件。所以**你必须为每个导入添加正确的路径！！！**

替换 为您`@import "reset.less";` 拥有 `@import "/public/styles/reset.less";` 的每个导入！

**等等... :-)**

* * *

感谢所有帮助解决此问题的人。也看看韦斯约翰逊的回答。我认为他有一个非常好的解决方案，但不知何故对我不起作用......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T09:10:53.090

根据[这个答案（我也做过）](https://stackoverflow.com/a/10214982/124486)。首先配置你的`app.js`，

```
app.use(require('less-middleware')({ src: __dirname + '/public' }));
app.use(express.static(path.join(__dirname, 'public')));

// This is just boilerplate you should already have
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router); 
```

然后只需包含指向`less`文件的链接，但将扩展名更改为`css`. 像这样，

```
<link rel="stylesheet" href="components/bootstrap/less/bootstrap.css" /> 
```

而且，这将编译`components/bootstrap/less/bootstrap.less`为 css 并将其提供给您的客户。

有关如何执行诸如自动缩小等很酷的事情的更多信息，请参阅[文档。`less-middleware`](https://github.com/emberfeather/less.js-middleware)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T18:49:02.237

我从来没有使用过较少的中间件，但我不确定这对于大多数应用程序有多重要。大多数可能应该只是预先编译，即：当你启动 Node.js 时。可以这么简单：

```
var fs      = require('fs'),
    less    = require('less');

fs.readFile('styles.less', function(err,styles) {
    if(err) return console.error('Could not open file: %s',err);
    less.render(styles.toString(), function(er,css) {
        if(er) return console.error(er);
        fs.writeFile('styles.css', css, function(e) {
            if(e) return console.error(e);
            console.log('Compiled CSS');
        });
    });
}); 
```

目录结构完全是您的偏好。我会`express.static`在提供已编译的 CSS 文件时使用。

# java - 如何检查键盘是否按一次？

> ID：10946332
> 
> 赞同：1
> 
> 时间：2012-06-08T09:33:59.140
> 
> 标签：java, lwjgl

我不知道如何让条件发挥作用。是否有类似 Keyboard.isKeyDown(//anykey) 的条件？

```
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;

public class InputHandler {

    public static boolean currentKeyState, previousKeyState;

    public static void update() {
        previousKeyState = currentKeyState;

        if (//condition for keydown) {
            currentKeyState = true;
         } else {
            currentKeyState = false;
        }
    }

    public static boolean keyReleased() {
       if (currentKeyState == true && previousKeyState == false) {
            return true;
       } else {
            return false;
        }
   }
} 
```

这是我想要完成的 C# 版本。Java中有没有类似于Keyboard.GetState()的方法？

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Input;

namespace Game.Controls
{
    public class InputHandler
    {
    public KeyboardState currentKeyState;
    public KeyboardState previousKeyState;

    public InputHandler()
    {
        currentKeyState = new KeyboardState();
        previousKeyState = new KeyboardState();
    }

    public void Update()
    {
        previousKeyState = currentKeyState;
        currentKeyState = Keyboard.GetState();
    }

    public bool IsHeld(Keys key)
    {
        if (currentKeyState.IsKeyDown(key))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public bool IsReleased(Keys key)
    {
        if (currentKeyState.IsKeyUp(key) && previousKeyState.IsKeyDown(key))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public bool IsPressed(Keys key)
    {
        if (currentKeyState.IsKeyDown(key) && previousKeyState.IsKeyUp(key))
        {
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T15:28:34.243

我发现这是检查事件驱动输入的最简单方法：

```
while (Keyboard.next()) {
    if (Keyboard.getEventKeyState()) {
        switch (Keyboard.getEventKey()) {
            // case Keyboard.KEY_UP: /** do something here **/ break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:54:46.547

```
if (Keyboard.getEventKey() == Keyboard.KEY_A) {
    if (Keyboard.getEventKeyState()) {
        System.out.println("A Key Pressed");
    }
    else {
        System.out.println("A Key Released");
    }
} 
```

你可以参考[这个文件](http://www.lwjgl.org/wiki/index.php?title=LWJGL_Basics_2_%28Input%29)

用于获取所有输入法。

对于支持的所有键，请参阅[http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html](http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:54:08.287

```
import org.lwjgl.input.Keyboard;

public class InputHandler {

public static boolean currentKeyState = true, previousKeyState;

public static void update() {
    previousKeyState = currentKeyState;

    if (Keyboard.getEventKeyState()) {
        currentKeyState = true;
    } else {
        previousKeyState = false;
    }
}

public static boolean keyPressed() {
    if (currentKeyState == true && previousKeyState == true) {
        return true;
    } else {
        return false;
    }
} 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T09:40:48.027

您可以为此使用 java KeyEvent 类

# c# - 防止任务继续

> ID：10946334
> 
> 赞同：2
> 
> 时间：2012-06-08T09:34:12.730
> 
> 标签：c#, task-parallel-library

我正在使用任务延续在 WinForm 项目上进行长时间运行的操作。

```
var task1 = Task.Factory.StartNew(() => DoSomeWork());

var task2 = task1.ContinueWith(result => DoSomeMoreWork(), TaskContinuationOptions.OnlyOnRanToCompletion);

var task3 = task2.ContinueWith(result => DoFinalWork(), TaskContinuationOptions.OnlyOnRanToCompletion); 
```

如果在 task2 上执行的 DoSomeMoreWork() 函数满足某些条件，我只想继续执行 task3。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:42:14.673

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

> 用户定义的值可以在 Result 属性中从前件传递给它的延续，这样前件的输出就可以作为延续的输入

所以一种方法是在任务 3 中，在做任何工作之前检查任务 2 的结果。

```
var task2 = task1.ContinueWith(result => DoSomeMoreWOrk(), TaskContinuationOptions.OnlyOnRanToCompletion);
var task3 = task2.ContinueWith(x => DoFinalWork(x.Result)); 
```

从 task2 返回的 Result 决定了 task3 中发生的情况。

***编辑*** 如果在操作中不满足某些条件，另一个解决方案是取消 task2。然后甚至没有安排继续任务。

来自 MSDN

> 要防止在其前件被取消时继续执行，请在创建继续时指定 NotOnCanceled 选项。

所以task3定义变成

```
var task3 = task2.ContinueWith(result => DoFinalWork(), TaskContinuationOptions.NotOnCancelled); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:00:37.200

另一种选择是将 task2 和 task3 转换为嵌套任务，仅在满足条件时执行它们。

假设 DoSomeMoreWork 返回 true 来执行此操作，您可以编写类似这样的内容

```
 var task1 = Task.Factory.StartNew(DoSomeWork);
        var task2 = task1.ContinueWith(result =>
            {
                if (DoSomeMoreWork())
                {
                    Task.Factory.StartNew(DoFinalWork, TaskCreationOptions.AttachedToParent);
                }
            }, TaskContinuationOptions.OnlyOnRanToCompletion); 
```

如果您可以使用 Async CTP 或 .NET 4.5（我认为两者都有 Go Live 许可证），您可以用 async/await 替换延续，以获得更简洁的代码。

如果您将工作函数转换为使用异步，您的代码将变得几乎与同步版本一样清晰：

```
 private static async void WorkAsync()
    {
        await DoSomeWork();
        if (await DoSomeMoreWork())
        {
            await DoFinalWork();
        }
    }

    private static async Task DoFinalWork()
    {
        Console.WriteLine("Completed");
    }

    private static async Task<bool> DoSomeMoreWork()
    {
        Console.WriteLine("Some More");
        return true;
    }

    private static async Task DoSomeWork()
    {
        Console.WriteLine("Some");
    } 
```

如果您不想从方法中返回任务，可以使用以下代码：

```
 private static async void WorkAsync()
    {
        await Task.Run(()=>DoSomeWork());
        if (await Task.Run(()=>DoSomeMoreWork()))
        {
            await Task.Run(()=>DoFinalWork());
        }
    } 
```

# jquery - 如何通过jQuery更改浏览器上HTML表格的宽度

> ID：10946335
> 
> 赞同：2
> 
> 时间：2012-06-08T09:34:21.073
> 
> 标签：jquery, api

我正在制作一个考试网站，我为 jQuery 准备了我的 html，现在我想为用户提供在他将鼠标放在表格边框上并拖动它时更改表格的宽度。因为有些答案可能比我的默认位置长。

我应该使用什么api？我猜我应该使用 drag() api，但我还需要什么？

如果你们也能给我提供一些例子，我也会很感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:36:47.733

一些提示：

```
$(selector).width();

$(selector).mousedown(function(){});

$(selector).mouseup(function(){}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:28:55.093

**工作演示** [http://jsfiddle.net/YfnjA/](http://jsfiddle.net/YfnjA/)

希望能帮助到你。

当您单击并拖动它时，它将允许您调整大小，休息时您可以随意玩耍并按照自己的方式进行操作：)

**代码**

```
$(function() {
    var pressed;
    var start;
    var startX;
    var startWidth;
    var wrapper = $("div#wrapper");
    var container = $("table#container");

    $("table th").mousedown(function(e) {
        start = $(this);
        startX = e.pageX;
        startWidth = $(this).width();
        $(start).addClass("resizing");
        pressed = true;
    });

    $(document).mousemove(function(e) {
        if(pressed) {
            var newWidth = startWidth + (e.pageX - startX);
            start.width(newWidth);
            wrapper.width(container.width() + 10);
        }
    });

    $(document).mouseup(function() {
        if(pressed) {
            $(start).removeClass("resizing");
            pressed = false;
        }
    });
});​ 
```

# asp.net-mvc - MVC4 单页应用程序 - 多个屏幕

> ID：10946336
> 
> 赞同：5
> 
> 时间：2012-06-08T09:34:24.527
> 
> 标签：asp.net-mvc, asp.net-mvc-4, singlepage

翻阅微软的教程，他们似乎在非常简单的场景中使用了 SPA，即过滤或更新单个列表。

假设我有一个稍微复杂一点的界面，我可能有多个列表、多个添加屏幕和一些向导等来指导用户完成某些过程。

单页应用程序的首选方法是否会为系统的每个区域拥有多个控制器和视图，即如果我有一个用户管理区域 - 这可能是一个控制器/视图，维护用户配置文件可能是另一个控制器/视图。

因此，用户体验将是页面之间的导航，但是在他们想要执行某些操作的页面上，这都是 AJAX 吗？

如果这样的应用程序是***真正的 SPA***，我想我最终会在一个页面中显示大量**div**，反映系统中每个区域的用户界面 - 此页面的占用空间可能很大？

***我想我可以通过将其与FaceBook***进行比较来比较我想要实现的目标？但是，我假设他们正在通过 AJAX 即时下载视图，因此占用空间相对较小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:18:48.087

真正的 SPA 会“实时”生成/销毁 UI，通常是为了响应某种 JSON 调用。这就是像[knockout.js](http://knockoutjs.com/)这样的框架词真正有帮助的地方 [消除了很多双向绑定代码]。

当然，在“幕后”代码中，您可以按照您喜欢的任何方式对其进行结构化。新的 ASP.NET Web API 非常适合这一点。设置您的初始 UI，将操作（通常是 RESTful 端点）编码为 JSON API；然后让 javascript 进行 JSON 调用并即时构建额外的 UI。

您可能不需要很多完整视图，但一些部分视图作为 javascript 创建 UI 元素的模板可能会有所帮助。

# python - Python try except finally：无效的语法错误（这段代码有什么问题？）

> ID：10946339
> 
> 赞同：6
> 
> 时间：2012-06-08T09:34:39.077
> 
> 标签：python, sqlalchemy

我试图在下面的函数中使用 finally，但是，Python 报告了一个语法错误。我确定我在做一些愚蠢的事情，但我似乎无法发现它......

片段如下：

```
# Store ids with key
# Returns GUID (used to clear table after words)
def storeIdsInTemporaryTable(dbinfo, id_list):
    conn = dbinfo['db_connection']

    guid = genutils.getGUID()
    orig_tableinfo = dbinfo['table']
    orig_datarows = dbinfo['datarows']

    metadata = dbinfo['metadata']

    sql = "INSERT INTO temporary_data_key (key) VALUES ({0}) RETURNING id".format(guid)
    key_id = executeSQLonDbConnection(dbinfo, sql, return_field='id')

    tableinfo = Table('temporary_data', metadata, autoload=True)
    datarows = []

    for id_value in id_list:
        datarows.append( { 'key_id': key_id, 'id_value': id_value} )

    try:
        insertToDb(dbinfo)
    except:
        guid = None # to indicate an error occured
        if key_id:
            conn.execute("DELETE FROM temporary_data_key WHERE key={0}".format(guid)

    finally:
        dbinfo['table'] = orig_tableinfo
        dbinfo['datarows'] = orig_datarows

    return guid 
```

是什么导致语法错误？

顺便说一句，我知道我需要将两个插入包装在一个事务中，但由于某种原因，我无法让事务工作（SQLALchemy 引发与事务相关的错误） - 所以下次再问另一个问题..

**[[编辑]]**

异常错误（现已修复）是​​：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/path/to/script.py", line 1632
    finally:
          ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T09:38:53.557

您使用的是 < 2.5 的 Python 吗？try except finally 仅在 2.5 中添加，并且在您必须将 try except 包装在 try finally 中之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T09:37:05.677

您在调用 . 时缺少右括号`execute()`。它应该是：

```
conn.execute("DELETE FROM temporary_data_key WHERE key={0}".format(guid)) 
```

代替：

```
conn.execute("DELETE FROM temporary_data_key WHERE key={0}".format(guid) 
```

# wordpress - img 滑块的下一个和上一个

> ID：10946343
> 
> 赞同：0
> 
> 时间：2012-06-08T09:34:45.180
> 
> 标签：wordpress

我想要一个免费的 wordpress 插件来显示带有下一个和上一个按钮的图像我正在使用 img-show-box 插件，但是这个插件没有下一个和上一个按钮..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:27:32.810

> 您可以使用缓动滑块 [wordpress 缓动滑块](http://wordpress.org/extend/plugins/easing-slider/)
> 
> 然后你必须从管理面板启用下一个和上一个按钮。

# c# - C#中事件的正常实现和显式实现有什么区别

> ID：10946346
> 
> 赞同：2
> 
> 时间：2012-06-08T09:34:55.133
> 
> 标签：c#, .net, events

这是一个正常的实现：

```
public event MyDelegate MyEvent; 
```

这是明确的实现：

```
private MyDelegate eventStorage
public event MyDelegate MyEvent
{
  add
  {
     eventStorage += value;
  }
  remove
  {
     eventStorage -= value;
  }
} 
```

那么，哪种实现更合适，在哪些情况下我应该使用它们？谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:36:49.033

这两个示例是等价的——编译器在编译第一个版本时会生成第二个版本（或类似版本）。

这只是[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)- 使用您更熟悉的任何一个。

您可以认为这类似于编译器对[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)所做的事情，只是反过来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:37:22.887

无论如何，Normal 将简单地编译成与显式实现非常相似的东西，如果它所做的只是订阅。手动实现的好处是当有人订阅或取消订阅事件时，您有机会做某事。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/8627sbea%28v=vs.71%29.aspx)演示了示例 2 中的示例用法。

就我个人而言，我从不需要在日常活动中手动触发事件。因此，对于绝大多数情况，如果您认为***表达***相同事物所需的代码更少，则通常的方式“更合适”。

只要您想执行示例中的操作，那么不仅明确地“更适合”它，而且实际上是*必需*的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:39:54.430

只有当自动实现不适合您时，您才应该使用显式。

例如，WinForms 事件使用显式实现来减少类上的委托字段的数量（每个事件都生成一个），如果没有人订阅特定事件，这些字段是无用的，为某人的每个事件保留一个委托的字典曾经订阅过。这只是可能有用的一种情况。

您还可以在订阅/删除事件期间记录或应用安全检查。

# java - 如何告诉 Dozer 在目标字段中使用 LinkedHashSet 集合？

> ID：10946350
> 
> 赞同：3
> 
> 时间：2012-06-08T09:35:04.770
> 
> 标签：java, mapping, dozer

在头等舱我有领域：

```
private Set<Country> countries;

public Set<Country> getCountries() {
    return countries;
}

public void setCountries(Set<Country> countries) {
    this.countries = countries;
} 
```

它将包含 LinkedHashSet 实现。

在第二类中我有相同的声明，但在映射期间，Dozer 在目标类中创建 HashSet 实现，这破坏了元素的顺序。如何告诉 Dozer 在目标类中使用 LinkedHashSet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T15:46:04.683

当 Dozer 映射 a`Set`时，它使用[`org.dozer.util.CollectionUtils.createNewSet`](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.dozer/dozer/5.2.2/org/dozer/util/CollectionUtils.java#CollectionUtils.createNewSet%28java.lang.Class%29)来创建目标`Set`实例。你得到 a`HashSet`或`TreeSet`.

如果您的元素的顺序与它们的自然顺序相同，您可以[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)在目标中使用 a。如果没有，那么您需要自己创建目标对象并提供所需的`Set`实现。

Dozer 允许使用自定义[创建方法](http://dozer.sourceforge.net/documentation/customCreateMethod.html)或自定义[bean 工厂](http://dozer.sourceforge.net/documentation/custombeanfactories.html)来实例化对象，而不是使用默认构造函数，因此您可以使用任何一种方法：

**创建方法**

Java代码：

```
public class MyInstanceCreator {
    public static DestinationObject createDestinationObject() {
        DestinationObject result = new DestinationObject();
        result.setCountries(new LinkedHashSet<Country>());
        return result;
    }
    private MyInstanceCreator() { }
} 
```

映射：

```
<mapping>
    <class-a create-method="MyInstanceCreator.createDestinationObject">DestinationObject</class-a>
    <class-b>SourceObject</class-b>
    <field>
        <a>countries</a>
        <b>countries</b>
    </field>
</mapping> 
```

**豆厂**

Java代码：

```
public class MyBeanFactory implements BeanFactory {
    public Object createBean(Object source, Class<?> sourceClass, String targetBeanId) {
        DestinationObject result = new DestinationObject();
        result.setCountries(new LinkedHashSet<Country>());
        return result;
    }
} 
```

映射：

```
<mapping>
    <class-a bean-factory="MyBeanFactory">DestinationObject</class-a>
    <class-b>SourceObject</class-b>
    <field>
        <a>countries</a>
        <b>countries</b>
    </field>
</mapping> 
```

# openlayers - 使用 OpenLayers 保存策略而不向地图添加图层

> ID：10946354
> 
> 赞同：0
> 
> 时间：2012-06-08T09:35:19.190
> 
> 标签：openlayers

无论如何都可以在图层上使用保存策略（用于数据表中）而不必先将图层添加到地图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:12:11.823

如果您在创建时将“isBaseLayer：true”添加到图层，则稍后添加时将不会绘制它。

# wpf - 将 WPF ComboBox 与数据表中定义的选项绑定

> ID：10946373
> 
> 赞同：1
> 
> 时间：2012-06-08T09:36:30.903
> 
> 标签：wpf, xaml

我想做一些类似于[Data bound WPF ComboBox 的事情，选择在 XAML 中定义？](https://stackoverflow.com/questions/1917996/data-bound-wpf-combobox-with-choices-defined-in-xaml)但我想在数据表 SettingValues 中指定选项。此数据表将包含三列：SettingType (int)、SettingId (int) 和 Description。我想在组合框中显示某个 SettingType（例如 1）的所有行的描述。我想为每个设置对这个 SettingType 进行硬编码。然后，我想将所选的 SettingId 保存在另一个带有 Setting1 列的表中。

这个问题似乎也做了类似的事情：[如何将 ComboBox 与 DataTable 绑定](https://stackoverflow.com/questions/2749842/how-to-bind-combobox-with-datatable)。

第一次尝试（代码片段）：

```
<ComboBox SelectedValue="{Binding Setting1}" SelectedValuePath="SettingId">
 <ComboBox.ItemTemplate>
  <DataTemplate>
   <TextBlock Text="{Binding Path=Description}"/>                                 
  </DataTemplate>
</ComboBox> 
```

如何指定要使用的表？现在只是指定的列。如何指定仅使用某些行，其 SettingType 与某个 int 匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:49:47.030

通过使用解决了从数据表中读取值的问题

```
<ComboBox x:Name="cbSetting1" ItemsSource="{Binding}">
 <ComboBox.ItemTemplate>
  <DataTemplate>
   <TextBlock Text="{Binding Path=ValueDescription}" />
  </DataTemplate>
 </ComboBox.ItemTemplate>
</ComboBox> 
```

在 .cs 文件中，通过使用将 DataContext 设置为 SettingType == 1 的行

```
var dataRows1 = svds.SettingValues.Select("SettingType = 1");
cbSetting1.ItemsSource = dataRows1.AsEnumerable(); 
```

其中 svds 是一个数据集。

通过使用 cbSetting1.SelectedItem 来保存会话之间的选定设置，以设置和获取值。

# asp.net-mvc-3 - MVC3 只读文本框，但必须发布值

> ID：10946375
> 
> 赞同：4
> 
> 时间：2012-06-08T09:36:38.747
> 
> 标签：asp.net-mvc-3

在 MVC3 中有没有办法制作一个只读文本框，其中值被 POST 回传？

我尝试了以下方法（来自本网站上的其他人）：

```
@Html.TextBoxFor(m => m.Model.xxxx, new { disabled = "disabled", @class = "text-box single-line", @readonly = "readonly" }) 
```

但是，该值不会被 POST，检查它会给出 NULL。出于样式原因，我使用了一个文本框，因为我认为它会正确回发。我在更新值的页面上有 JScript，因此为什么能够取回其 POST 值很重要。

我将开始考虑使用 DisplayFor 和 HiddenFor 对，但想知道是否有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:39:14.977

Html 规范说不应该提交禁用的字段，因此您只能在您想要从 JS 更新值并提交它的情况下使用 readonly。带有使其看起来被禁用的 CSS 类的 readonly 可提供更好的 UI 体验。或者，只需使用跨度加隐藏输入。

见：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.12.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)

“禁用的控件无法成功。” 和“一个成功的控制是‘有效的’提交。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:49:28.403

试试这个：

```
@Html.TextBoxFor(m => m.Model.xxxx, new {@class = "text-box single-line", @readonly = "readonly", onfocus = "this.blur()" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:53:39.837

试试这个。您似乎在@disabled 中有拼写错误！

```
@Html.TextBoxFor(m => m.Model.xxxx, new { @disabled = "disabled", @class = "text-box single-line", @readonly = "readonly" }) 
```

由于用户无法编辑它，您的另一个选项是 HiddenFor，然后您可以通过您的 ViewModel 提交该值

或者，您可以在页面加载而不是在标记中禁用文本框，并根据需要使用 Javascript 或 jQuery 再次启用它（即编辑按钮或其他东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:18:22.350

正如你提到的（和其他人），我会使用：

```
@Html.DisplayFor(m => m.Model.xxxx) 
```

和

```
@Html.HiddenFor(m => m.Model.xxxx). 
```

# c - 使用 openssl 的服务器程序在尝试与 Linux 中的标准客户端连接时显示错误

> ID：10946380
> 
> 赞同：1
> 
> 时间：2012-06-08T09:37:00.630
> 
> 标签：c, linux, sockets, ssl, openssl

下面是服务器程序的c代码

```
#define RSA_SERVER_CERT "certificate.pem"
#define RSA_SERVER_KEY "private.pem"     
#define RSA_SERVER_CA_CERT "certificate.pem"
#define RSA_SERVER_CA_PATH "sys$common:[syshlp.examples.ssl]"     
#define ON 1
#define OFF 0     
#define RETURN_NULL(x) if ((x)==NULL) exit(1)
#define RETURN_ERR(err,s) if ((err)==-1) { perror(s); exit(1); }
#define RETURN_SSL(err) if ((err)==-1) { ERR_print_errors_fp(stderr); exit(1); }
int main()
{    
    int err;
    int verify_client = OFF;
    int sock, connected, bytes_recieved , true = 1, pid;
    char send_data [1024] , recv_data[1024];
    struct sockaddr_in server_addr,client_addr;
    int sin_size;
    size_t client_len;
    char *str;
    char buf[4096];
    SSL_CTX *ctx;
    SSL *ssl;
    SSL_METHOD *meth;
    X509 *client_cert = NULL;
    short int s_port = 443;
    SSL_library_init();
    SSL_load_error_strings();
    meth = SSLv3_method();
    ctx = SSL_CTX_new(meth);     
    if (!ctx) 
    {    
        ERR_print_errors_fp(stderr);
        exit(1);     
    }    
    if (SSL_CTX_use_certificate_file(ctx, RSA_SERVER_CERT, SSL_FILETYPE_PEM) <= 0)
    {    
        ERR_print_errors_fp(stderr);
        exit(1);    
    }    
    if (SSL_CTX_use_PrivateKey_file(ctx, RSA_SERVER_KEY, SSL_FILETYPE_PEM) <= 0) 
    {    
            ERR_print_errors_fp(stderr);
            exit(1);    
    }    
    if (!SSL_CTX_check_private_key(ctx))
    {    
            fprintf(stderr,"Private key does not match the certificate public key\n");
            exit(1);    
    }    
    if(verify_client == ON)
    {    
        if (!SSL_CTX_load_verify_locations(ctx, RSA_SERVER_CA_CERT, NULL)) 
        {    
            ERR_print_errors_fp(stderr);
            exit(1);    
        }    
        SSL_CTX_set_verify(ctx,SSL_VERIFY_PEER,NULL);
        SSL_CTX_set_verify_depth(ctx,1);    
    }    
    sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
    RETURN_ERR(sock, "socket");
    memset (&server_addr, '\0', sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(s_port);
    server_addr.sin_addr.s_addr = INADDR_ANY;
    bzero(&(server_addr.sin_zero),8);
    err = bind(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr));
    RETURN_ERR(err, "bind");
    err = listen(sock, 5);
    RETURN_ERR(err, "listen");
    client_len = sizeof(client_addr);
    printf("\nSSL Server Waiting for client on port 443");
    fflush(stdout);     
    sin_size = sizeof(struct sockaddr_in);
    connected = accept(sock, (struct sockaddr *)&client_addr,&sin_size);
    RETURN_ERR(connected, "accept");
    close(sock);
    printf("\n I got a connection from (%s , %d)", inet_ntoa(client_addr.sin_addr), ntohs(client_addr.sin_port));
    ssl = SSL_new(ctx);
    RETURN_NULL(ssl);
    SSL_set_fd(ssl, connected);
    err = SSL_accept(ssl);
    RETURN_SSL(err);
    printf("SSL connection using %s\n", SSL_get_cipher (ssl));    
    if (verify_client == ON)
    {    
    client_cert = SSL_get_peer_certificate(ssl);    
    }  
    //necessary code for sending and recieving irrelevant to the issue
    err = SSL_shutdown(ssl);
    RETURN_SSL(err);
    err = close(sock);
    RETURN_ERR(err, "close");
    SSL_free(ssl);
    SSL_CTX_free(ctx);
    close(sock);
    return 0;    
} 
```

客户端程序的代码是：

```
#define RETURN_NULL(x) if ((x)==NULL) exit (1)
#define RETURN_ERR(err,s) if ((err)==-1) { perror(s); exit(1); }
#define RETURN_SSL(err) if ((err)==-1) { ERR_print_errors_fp(stderr); exit(1); }
static int verify_callback(int ok, X509_STORE_CTX *ctx);
#define RSA_CLIENT_CERT "certificate.pem"
#define RSA_CLIENT_KEY "private.pem"
#define RSA_CLIENT_CA_CERT "certificate.pem"
#define RSA_CLIENT_CA_PATH "sys$common:[syshlp.examples.ssl]"
#define ON 1
#define OFF 0
int main()
{
    int sock, err, verify_client = OFF;  
    char recv_data[1024];
    char  *str;
    struct hostent *host;
    struct sockaddr_in server_addr;    
    SSL_CTX *ctx;
    SSL *ssl;
    SSL_METHOD *meth;
    X509 *server_cert;
    EVP_PKEY *pkey;   
    short int s_port = 443;
    const char *s_ipaddr = "127.0.0.1";    
    SSL_library_init();
    SSL_load_error_strings();
    meth = SSLv3_method();
    ctx = SSL_CTX_new(meth);
    RETURN_NULL(ctx);    
    if(verify_client == ON)
    {
        if (SSL_CTX_use_certificate_file(ctx, RSA_CLIENT_CERT, SSL_FILETYPE_PEM) <= 0)
        {
            ERR_print_errors_fp(stderr);
        exit(1);
        }
        if (SSL_CTX_use_PrivateKey_file(ctx, RSA_CLIENT_KEY, SSL_FILETYPE_PEM) <= 0)
        {
            ERR_print_errors_fp(stderr);
    exit(1);
        }
        if (!SSL_CTX_check_private_key(ctx))
        {
            fprintf(stderr,"Private key does not match the certificate public key\n");
            exit(1);
        }
    }    
    if (!SSL_CTX_load_verify_locations(ctx, RSA_CLIENT_CA_CERT, NULL))
    {
         ERR_print_errors_fp(stderr);
         exit(1);
     }
     SSL_CTX_set_verify(ctx,SSL_VERIFY_PEER,NULL);
     SSL_CTX_set_verify_depth(ctx,1);
     sock = socket(AF_INET, SOCK_STREAM, 0);
     RETURN_ERR(sock, "socket");
     memset (&server_addr, '\0', sizeof(server_addr));        
     server_addr.sin_family = AF_INET;     
     server_addr.sin_port = htons(s_port);
     server_addr.sin_addr.s_addr = inet_addr(s_ipaddr);
     bzero(&(server_addr.sin_zero),8); 
     err = connect(sock, (struct sockaddr *)&server_addr, sizeof(struct sockaddr));
     RETURN_ERR(err, "connect");
     ssl = SSL_new (ctx);
     RETURN_NULL(ssl);
     SSL_set_fd(ssl, sock);
     err = SSL_connect(ssl);
     RETURN_SSL(err);
     printf ("SSL connection using %s\n", SSL_get_cipher (ssl));
     server_cert = SSL_get_peer_certificate (ssl);        
     //necessary code irrelevant to the issue
     err = SSL_shutdown(ssl);
     RETURN_SSL(err);
     err = close(sock);
     RETURN_ERR(err, "close");
     SSL_free(ssl);
     SSL_CTX_free(ctx);
     fclose(log); 
     return 0;
} 
```

当上面的代码在两个 linux 系统中运行时它工作，当我尝试上面的服务器程序使用终端使用命令连接标准客户端时`openssl s_client -connect localhost:443`，它显示如下

```
connect: Connection refused
connect:errno=111 
```

为什么会这样？有什么办法可以解决吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:20:23.113

我没有收到此代码的连接被拒绝错误。

问题是`openssl s_client -connect localhost:443`默认情况下使用 TSL v1。但是你有 SSLV3。

所以你必须使用

```
openssl s_client -connect localhost:443 -ssl3 
```

# actionscript-3 - 多站点阵列 AS3

> ID：10946385
> 
> 赞同：0
> 
> 时间：2012-06-08T09:37:19.970
> 
> 标签：actionscript-3

试试这个，但在 flashbuilder 中不断出现错误。

原来的：

允许单个站点。

```
var lock:SiteLock = new SiteLock(); 
lock.addSite("mysite.com", false);       
lock.allowLocalPlay(true);
addChild(lock); 
```

这个运行没有错误。

然后我为多个站点数组尝试这个。

```
var lock:SiteLock = new SiteLock(); 
lock.addSites("mysite.com", "mysite2.com", "mysite3.com", "mysite4.com", false);     
lock.allowLocalPlay(true);
addChild(lock); 
```

但收到一条警告消息：

3590：在预期布尔值的地方使用了字符串。表达式将被强制转换为布尔值。

我刚刚遇到另一个问题。

```
lock.addSites(false, "mysite.com", "mysite2.com", "mysite3.com", "mysite4.com"); 
```

工作正常并加载 mysite4.com 没有问题。

但是，当我尝试打开像 mysite4-mysite.com 这样的 url 时，当它被包含在锁中时会被阻止，例如：

lock.addSites（假，“mysite.com”，“mysite2.com”，“mysite3-mysite.org”，“mysite4-myusite.com”）；

我认为这是 Sitelock 类的问题：[我在这里使用这个类](http://tarunkhurana.net/utilities/otherswfs/slideshow/assets/portfolioprojects/work2/BubbleGame/utilities/skyboy/security/SiteLock.as)

非常感谢所有帮助。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:55:46.577

试试这个：

```
lock.addSites(false, "mysite.com", "mysite2.com", "mysite3.com", "mysite4.com"); 
```

这只是我的猜测，因为我不知道`SiteLock`您使用的是什么课程。您可以发布代码/链接吗？

另外，您是否需要将您的添加`lock`到显示列表中？

# c - Eclipses - C 语言 - 调试 - 以任何方式查看指针指向的值？

> ID：10946388
> 
> 赞同：0
> 
> 时间：2012-06-08T09:37:29.517
> 
> 标签：c, eclipse, debugging

使用 Eclipse，使用（ANSI）C 语言，有没有办法查看指针从调试中指向的值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:45:54.723

我已经好几年没用过 Eclipse 了，但不是有一个“监视”窗口，你可以在其中添加要监视的变量吗？在这种情况下，您应该可以放在`*pointer`那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:42:11.463

您可以随时`printf`在要检查的地方打印所需的值。

# c# - 十进制值到字符串

> ID：10946391
> 
> 赞同：1
> 
> 时间：2012-06-08T09:37:52.770
> 
> 标签：c#, winforms, .net-2.0

下面的计算结果应该是 33.3333333 的值，但是在显示该值时，我没有在消息框中得到正确的输出。

这里有什么需要先完成的格式化吗？

```
decimal result = (1/3)*100;
MessageBox.Show(result.ToString()); 
```

![在此处输入图像描述](../Images/1e14d85397aed34a3e18778f6148b808.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T09:39:10.913

您正在使用整数执行计算，因此结果是 an`int`并转换为`decimal`赋值。因为`1/3`已经`0`（在`int`算术中）乘以它`100`并不会改变任何东西。

改用小数：

```
decimal result = (1m / 3m) * 100m; 
```

数字文字的`m`后缀使其成为小数。

纳入[Kay Zed](https://stackoverflow.com/questions/10946391/decimal-value-to-string#comment14285347_10946412)的评论：

> 如果您正在处理变量而不是文字，您可以强制转换：
> 
> ```
> decimal result = ((decimal)a / (decimal)b) * 100m; 
> ```

# backbone.js - 在显示另一个视图时隐藏区域管理器中的视图

> ID：10946392
> 
> 赞同：8
> 
> 时间：2012-06-08T09:37:53.363
> 
> 标签：backbone.js, marionette

我正在使用 Marionette 区域管理器来管理我的视图。有三个主要区域：1]顶部菜单区域2]侧边栏区域3]主区域（实际页面不断变化）

根据顶部菜单和侧边栏上的操作，我不断更改在主要区域中呈现的视图，使用`App.MainRegion.show(view)`.

现在有一个特定的 view( `persistView`) ，除非关闭选项卡/浏览器，否则不应关闭它。

`App.MainRegion.show(view)`当然，出于以下原因，我不能使用这里：

1.  当`show(persistView)`第一次调用时，一切都很好。
2.  如果我离开了，意志的`show(otherview)`召唤`close()`。`persistView`这不是必需的。

我目前的解决方案是：

1.  `persistRegion`在 .下方有一个名为的新区域`mainRegion`。
2.  `persistView`将始终呈现在`persistRegion`.
3.  在`onShow()`中`persistView`，我隐藏`mainRegion`并显示`peristRegion`

以上工作，但我认为是非常hackish。当在第 3 步之后] 用户导航到任何其他视图时，我也被卡住了。现在我如何告诉`persistView`它应该隐藏自己并显示`mainRegion`？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-17T18:14:23.340

我认为您的布局听起来不错，就拥有一个区域来保存“持久”视图与主视图而言。但我不会让这两个区域相互了解或试图控制彼此的显示。相反，我会创建一个知道如何执行此操作的单独对象。

该对象将负责从所涉及的各种视图和区域中侦听正确的事件。然后它将确定要显示和隐藏的区域。

不过，关键在于如何显示和隐藏这些区域。您不想关闭这些区域并删除其中的视图 - 至少，不是`persistRegion`. 但是，您可以做的是`hide()`该地区的`el`

`persistRegion.$el.hide()`

和

`persistRegion.$el.show()`

在区域内显示视图后或调用 后，区域的`$el`属性将可用`region.ensureElement()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T18:23:57.010

我可能会建议使用来自木偶区域的 reset() 方法，而不是隐藏和显示区域的元素。这是文档[http://marionettejs.com/docs/v2.4.4/marionette.region.html#reset-a-region](http://marionettejs.com/docs/v2.4.4/marionette.region.html#reset-a-region) =>可以随时重置区域的链接。这会破坏正在显示的任何现有视图，并删除缓存的 el。下次区域显示视图时，会从 DOM 中查询区域的 el。

myRegion.reset(); 这在跨视图实例和单元测试重用区域时很有用。

# java - Scala，参数化特征的具体实现的反映

> ID：10946394
> 
> 赞同：1
> 
> 时间：2012-06-08T09:37:58.697
> 
> 标签：java, scala, cqrs, parameterized

我正在寻找在以下情况下是否有任何方法可以绕过类型擦除：

我有一个特质

```
trait IHandle[T <: ICommand] {
    def handle(command: T) : Unit
} 
```

我希望使用反射找到say的具体实现

```
IHandle[MyCommand] 
```

这可能看起来像

```
class MyCommandHandler(dependency:Dependency) extends IHandle[MyCommand] {
  def handle(command:MyCommand): Unit = ...
} 
```

（我正在尝试在 CQRS 模型中创建命令调度程序，我很高兴听到这是否是采用 Scala 的完全错误的方法并且愿意接受建议）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T20:51:53.960

你可以使用 Manifest，但我强烈建议避免在 Scala 中使用这样的东西……这绝对是 IMO 的错误方法。

基本上你需要一个注册表（可能是`Map[Manifest[_], IHandle[_]]`你存储所有实现的地方，然后你可以在注册表中查找。

```
def store[T : Manifest](handle: Handle[T]) = map.put(manifest[T], handle)
def lookup[T : Manifest] = map.get(manifest[T])

// And then ...
store(new Handle[Foo])
lookup[Foo] 
```

一个正确的方法可能意味着使用类型类（尝试谷歌），如果没有你在做什么的大局，很难真正给你一个完整的解决方案......即使我正在做一些 CQRS 开发在斯卡拉上。

不要犹豫，连接到 freenode 服务器上的#scala 频道来讨论这个问题。

# java - Java Swing，如何使 JPanel 用鼠标调整大小？

> ID：10946396
> 
> 赞同：1
> 
> 时间：2012-06-08T09:38:13.537
> 
> 标签：java, swing, user-interface, jpanel

我一直在使用 Java Swing 开发用户界面，但在 JPanel 调整大小时遇到​​了问题。

这是我的问题：当用户将鼠标指向 JPanel 边界线时（如下图所述），我想让用户调整 JPanel 的大小。现在，如果我将鼠标移到那条线上，什么也不会发生。我希望我可以用鼠标改变它的大小。

![界面大小调整问题](../Images/40803aac2431daee9e93d4c65f7226dc.png)

这是我的代码部分：

```
 JTabbedPane _tabbedPane = new JTabbedPane();
JPanel gridAndCommandPaneValidation = new JPanel(); 
    gridAndCommandPaneValidation.setLayout(new BorderLayout()); 

    ValidationTableModel vtm = new ValidationTableModel(new LinkedList<DatabaseAnalysisValues>());
    tableValidation = new JTable(vtm);
    JScrollPane scrollpaneVal = new JScrollPane(tableValidation);

 tableValidation.setAutoscrolls(true);
    gridAndCommandPaneValidation.add(scrollpaneVal, BorderLayout.WEST);
    gridAndCommandPaneValidation.add(getKBestValidationCommandsPanel(), BorderLayout.EAST);
    _tabbedPane.add("Validation", gridAndCommandPaneValidation); 
```

有没有人可以帮助我？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:53:18.543

看看[`JSplitPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html)和相应的[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)。该组件可以完全按照您的意愿进行操作，并且表现非常好。试试教程中的第一个例子，你会看到。

# c++ - 有什么方法可以避免在特定的自定义类继承结构中使用虚拟方法？

> ID：10946400
> 
> 赞同：0
> 
> 时间：2012-06-08T09:38:28.407
> 
> 标签：c++, oop, inheritance, polymorphism, virtual

我有一组类似于下面显示的类。但是，我希望允许用户从它们派生而不必使用额外的虚拟方法修改基类。有没有一种无需`virtual int GetT(void){return 0;};`在类中声明就可以修改代码的方法`A`？

为了进一步解释这个问题，我想允许用户使用他们自己的方法来扩展`A`and `B`（或`Aext`and ），这些方法在and中没有定义为虚拟方法。我正在寻找一种转换方法，该方法允许将指向基类的指针转换为派生类的指针。本质上，我想使用类似于if包含指向派生类的指针的东西，即.`Bext``A``B``dynamic_cast<Aext*>(Trajectory[i])``Trajectory[i]``Aext`

```
class A {
    public:
    int a;
    A(int& ca) {a=ca;}
    virtual int GetT(void){return 0;};
};

class B{
    public:
    boost::ptr_vector<A> Trajectory;
    void PushBackStatePoint(int& ca);
};

void B::PushBackStatePoint(int& ca) {
    Trajectory.push_back(new A(ca));
}

class Aext: public A {
    public:
    int t;
    Aext(int& ca, int& ct) : A(ca) {t=ct;}
    virtual int GetT(void) {return t;}
};

class Bext: public B {
    public:
    void PushBackStatePoint(int& ca, int &ct);
    int GetFirstElement(void){return Trajectory[0].GetT();}
};

void Bext::PushBackStatePoint(int& ca, int &ct) {
    Trajectory.push_back(new Aext(ca,ct));

}

int main(){     
    Bext MyB;
    int a(5);
    int t(3);
    MyB.PushBackStatePoint(a,t);
    std::cout << MyB.GetFirstElement();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:47:50.343

您可以在基类中将该方法定义为纯虚拟方法，如下所示：

```
class A {
    public:
    int a;
    A(int& ca) : a(ca) {}
    virtual int GetT() = 0;
}; 
```

这使得派生类必须实现 GetT()，从而使类 A 抽象。

另请注意，我将构造函数更改为使用初始化列表，这是初始化类成员的更好方法。

这可能有点离题，但是您执行 push_back 的方式可以改进以更好地封装 Trajectory 向量，如下所示：

```
class B{
public:
    boost::ptr_vector<A> Trajectory;
    void PushBackStatePoint(int& ca);
protected:
    void PushBackStatePoint(A *a) { Trajectory.push_back(a); }
    A getTrajectoryElement(int index) { return Trajectory[index]; }
};

void B::PushBackStatePoint(int& ca) {
    PushBackStatePoint(new A(ca));
}

class Bext: public B {
    public:
    void PushBackStatePoint(int& ca, int &ct);
    int GetFirstElement(void){return getTrajectoryElement(0).GetT();}
};

void Bext::PushBackStatePoint(int& ca, int &ct) {
    PushBackStatePoint(new Aext(ca,ct));
} 
```

这样，基类属性仅在其中进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:49:09.043

如果将`GetT`方法编写为：

```
virtual int GetT() = 0; 
```

...代替：

```
virtual int GetT(void){return 0;} 
```

您将让所有用户为他们的类实现他们自己的 GetT 方法，而 A 类将保持不变。也不可能从 A 类创建对象。

> 所以，我真正在寻找的是某种类型的转换方法，将指向基类的指针转换为派生类的指针。

如果您以后想区分 A 类或 B 类的对象，那么您应该这样做：

```
A * ptrA = dynamic_cast<A*>( Trajectory[ 0 ] );
B * ptrB = dynamic_cast<B*>( Trajectory[ 0 ] );

if ( ptrA != NULL ) {
    // more things..
}
else
if ( ptrB != NULL ) {
    // more things..
} 
```

我不确定这是您正在寻找的答案；无论如何，希望这会有所帮助。

# c# - Sharepoint 2010 更新的远程通知？

> ID：10946403
> 
> 赞同：5
> 
> 时间：2012-06-08T09:38:37.707
> 
> 标签：c#, asp.net, sharepoint-2010, notifications, apple-push-notifications

我有一个客户的业务需求，即根据对 Sharepoint 2010 服务器的更改向 Apple 设备生成推送通知。我需要几乎实时地支持这些通知并访问 VPN 后面的服务器。

我难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:50:48.313

您需要实现两件事，一个将检测您感兴趣的更改的项目事件接收器和一个用于发送通知的 APNS 通知“服务”。

对 SharePoint 中的更改做出反应的标准方法是通过[事件接收器](http://msdn.microsoft.com/en-us/library/gg749858.aspx)。事件接收器实现了一个特定接口，该接口为特定事件提供回调函数。

从网站集级别到项目级别，有多种类型的事件。我假设您对项目级事件接收器更感兴趣。

有两种广泛的事件类型：

*   在事件（添加、更改、删​​除）之前是同步的，这意味着操作会阻塞，直到事件接收器完成处理。
*   After 事件（Added、Changed 等）是异步的，不会阻塞操作。

您应该创建一个*后*事件接收器，该接收器将创建一个 APNS 通知并发送它。

要发送通知，您可以使用[APNS-Sharp](https://github.com/Redth/APNS-Sharp)之类的库。最简单的解决方案是直接从事件接收器调用库。如果您不担心通知因问题（例如连接）而丢失，这可能没问题。

一个更健壮和可测试的解决方案是将通知放在一个队列中并创建一个单独的项目（例如 windows 服务、sharepoint 服务甚至是一个简单的计划任务）来读取队列并发送通知。

# asp.net - 从 umbraco 后端导出 CSV 格式的表格

> ID：10946410
> 
> 赞同：0
> 
> 时间：2012-06-08T09:39:07.113
> 
> 标签：asp.net, user-controls, umbraco

我在数据库中有一个表 [newsletter]，它保存了电子邮件地址，我想要的是在 umbraco 后端有一个按钮或一个部分，我可以在其中导出时事通讯表中的整个电子邮件地址列表CSV 格式。

任何人都可以就如何使其正常工作提供任何帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:21:27.017

您可以通过添加自定义部分来扩展 umbraco 后端。这是一个关于如何向 Umbraco 添加自定义部分的好教程... [http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco- 4](http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco-4)

您需要有一个 Web 表单，您可以将其添加到 Umbraco 自定义部分的自定义树中。这可以通过在 Visual Studio 中创建一个新项目来完成。添加一个带有按钮的 Web 表单，其中包含执行所有导出到 csv 的代码，从您的表中获取数据。然后构建您的项目并将您的 dll 添加到 Umbraco 上的“bin”文件夹中。

# html-table - Mootools 可排序表

> ID：10946413
> 
> 赞同：1
> 
> 时间：2012-06-08T09:39:12.627
> 
> 标签：html-table, mootools, jquery-ui-sortable

我有一个可排序的 mootools 表，并且想创建一个或两个不可排序的标题列。我怎样才能做到这一点。我的代码如下：

```
var myTable = new HtmlTable({
    properties: {border: 0,  cellspacing: 0},
    headers: ['Column1', 'Column2', 'Column3', 'Column4'],
    rows: [],
    zebra: true,
    sortable: true
});

myTable.inject($('column2'));
myTable.sort(0); 
```

我只想对“Column1”和“Column2”进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:03:22.907

尝试将*“table-th-nosort”*类设置为表格标题单元格：

```
<th class="table-th-nosort">Not sortable</th> 
```

看看**[`HtmlTable.Sort`参考](http://mootools.net/docs/more/Interface/HtmlTable.Sort)**`classNoSort`选项。

# php - 我刚刚在（运行）MAMP 上安装了 Codeigniter。为什么我不能点击欢迎页面？

> ID：10946416
> 
> 赞同：1
> 
> 时间：2012-06-08T09:39:25.360
> 
> 标签：php, codeigniter

我刚刚下载并解压了 Codeigniter 2.1，并将其内容放入我的 htdocs MAMP 文件夹中名为 CI 的文件夹中。然后我打开 config.php 并`$config['base_url']` 按照安装说明设置为“http://localhost:8888/CI/”。

我现在应该能够导航到 localhost:8888/CI/ 并点击欢迎页面，对吗？

我得到的只是一个 500 错误。

> “服务器遇到内部错误或配置错误，无法完成您的请求。”

MAMP 正在运行。那么我的问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:05:43.793

你启用了 mod_rewrite 吗？如果没有，您应该尝试启用它。并确保您尝试在其中安装/解压缩框架（文件）的文件夹中没有一些隐藏的（.htaccess）文件。

# c# - 在 C# 中使用 FileSystemWatcher 时 HttpContext.Current 为空

> ID：10946418
> 
> 赞同：3
> 
> 时间：2012-06-08T09:39:36.310
> 
> 标签：c#, filesystemwatcher

我在我的 ASP.NET Web 应用程序中使用表单身份验证，并在特定表单中使用 FileSystemWatcher。

它有两个事件`watcher_Changed`和`watcher_Created`。事件被正确调用。一旦事件被触发，`HttpContext.Current`就会变为空。

我不明白会话是否被`FileSystemWatcher`. 谁可以帮我这个事？代码如下。

```
void watcher_Created(object sender, FileSystemEventArgs e)
{
    watcher_Event(sender, e);
}

private void watcher_Event(object sender, FileSystemEventArgs e)
{
    try
    {
        if (getUserName() != null)
        {
            //Some Code
        }
    }
}

public string getUserName()
{
    FormsIdentity useridentity = (FormsIdentity)HttpContext.Current.User.Identity;   //Exception is thrown here. ("Object reference not set to instance of an object")
    FormsAuthenticationTicket userticket = useridentity.Ticket;
    string username = userticket.Name;
    return username;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:49:36.737

该`FileSystemWatcher.Changed`事件本质上是异步的。这意味着它可能会在HTTP 请求得到服务并且会话关闭*后引发。*如果您想将 a`FileSystemWatcher`的事件与导致其创建的用户相关联，则需要显式地维护它——例如，通过将每个事件映射`FileSystemWatcher`到用户名的字典。

# c# - 将数据附加到 C# 中的现有文件

> ID：10946421
> 
> 赞同：8
> 
> 时间：2012-06-08T09:39:53.227
> 
> 标签：c#

我已经编写了以下代码来将数据附加到现有数据中，但是我的代码会覆盖它

我应该如何更改代码附加数据。

```
protected void Page_Load(object sender, EventArgs e)
{
    fname = Request.Form["Text1"];
    lname = Request.Form["Text2"];
    ph = Request.Form["Text3"];
    Empcode = Request.Form["Text4"];

    string filePath = @"E:Employee.txt";
    if (File.Exists(filePath))
    {
        //StreamWriter SW;
        //SW = File.CreateText(filePath);
        //SW.Write(text);
        //SW.Close();
        FileStream aFile = new FileStream(filePath, FileMode.Create, FileAccess.Write);
        StreamWriter sw = new StreamWriter(aFile);
        sw.WriteLine(Empcode);
        sw.WriteLine(fname);
        sw.WriteLine(lname);
        sw.WriteLine(ph);
        sw.WriteLine("**********************************************************************");

        sw.Close();
        aFile.Close();
    }
    else
    {
        //sw.Write(text);
        //sw.Flush();
        //sw.Close();
        //StreamWriter SW;
        //SW = File.AppendText(filePath);
        //SW.WriteLine(text);
        //SW.Close();

        FileStream aFile = new FileStream(filePath, FileMode.Append, FileAccess.Write);
        StreamWriter sw = new StreamWriter(aFile);

        sw.WriteLine(Empcode);
        sw.WriteLine(fname);
        sw.WriteLine(lname);
        sw.WriteLine(ph);
        sw.WriteLine("**********************************************************************");

        sw.Close();
        aFile.Close();
        //System.IO.File.WriteAllText(filePath, text);
    }
    Response.Write("Employee Add Successfully.........");
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-08T09:42:07.270

FileMode.Append的[文档](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)说：

> 如果文件存在，则打开文件并查找文件末尾，或创建一个新文件。此操作需要 FileIOPermissionAccess.Append 权限。FileMode.Append 只能与 FileAccess.Write 结合使用。试图在文件结尾之前寻找一个位置会引发 IOException 异常，任何读取尝试都会失败并引发 NotSupportedException 异常。

因此`if`不再需要该语句，因为`FileMode.Append`如果文件不存在，则会自动创建该文件。

因此，完整的解决方案是：

```
using (FileStream aFile = new FileStream(filePath, FileMode.Append, FileAccess.Write))
using (StreamWriter sw = new StreamWriter(aFile)) {
    sw.WriteLine(Empcode);
    sw.WriteLine(fname);
    sw.WriteLine(lname);
    sw.WriteLine(ph);
    sw.WriteLine("**********************************************************************");
} 
```

提示：使用`using`，因为它会自动关闭资源，发生异常时也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T09:42:27.067

如果文件存在，您正在创建文件，如果不存在，则追加。这与你想要的相反。

将其更改为：

```
if (!File.Exists(filePath)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T09:41:54.517

你必须把

```
 if (!File.Exists(filePath)) 
```

代替

```
 if (File.Exists(filePath)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T09:44:31.820

更改`File.Exists(filePath)`为`!File.Exists(filePath)` 或者更好的是，始终使用附加模式。如果文件不存在，它将创建文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:46:34.067

在我看来，if 和 else 语句必须是相反的，不是吗？

现在您创建文件，当它存在时，并在它不存在时追加。（如果该文件尚不存在，Append 也会创建该文件。）

# javascript - 用 JavaScript 控制的 Flash 对象

> ID：10946424
> 
> 赞同：0
> 
> 时间：2012-06-08T09:39:59.883
> 
> 标签：javascript, flash

我正在尝试在 Flash 电影中包装用于网站背景的视频。当用户单击元素列表时，我需要视频在预定义的帧处播放和暂停。是否可以使用 JavaScript 控制 swf 播放？

特别是，我需要：

*   Flash 对象在预加载时必须触发一个 Javascript 事件，以便我可以使用 JQuery 淡入（）一系列 div
*   单击 HTML 锚点必须播放视频并使其在某个点暂停

你能指出任何已知的兼容性问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:49:50.993

两种方式的通信都是可能的并且易于实现。

有一个名为 Actionscript 的类`ExternalInterface`，它使整个过程几乎没有痛苦。

检查[示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)。

# visual-studio-2010 - 如何使用安装在另一台计算机上的 Visual Studio 创建与 SQL DB 的新连接

> ID：10946425
> 
> 赞同：0
> 
> 时间：2012-06-08T09:40:06.473
> 
> 标签：visual-studio-2010, sql-server-2008

//我正在尝试通过我的 Visual Studio 2010 连接到安装在另一台计算机上的 SQL Server。我看到另一台计算机的 SQL Server，但是当我测试连接时，它总是给我一条错误消息![在此处输入图像描述](../Images/2040c99b3f420c9587ed6cfbef7705ae.png)

//我是否必须更改安全性？> 请注意我选择：允许远程连接到此服务器

# asp.net - ASP.NET 嵌入式用户控件不起作用

> ID：10946432
> 
> 赞同：0
> 
> 时间：2012-06-08T09:40:17.987
> 
> 标签：asp.net, webusercontrol

我曾经在一个运行良好的 ASP.NET 网站中有一个嵌入式用户控件。但后来我将网站转换为 Web 应用程序之后，当我引用用户控件时，它给出了错误。

System.Web.HttpException 未被用户代码处理 Message=文件“/Controls/CustomControls.dll/TestCustomControl.ascx”不存在。

我验证了 dll 位于正确的位置，并且 TestCustomControl.ascx 的构建操作设置为“嵌入式资源”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:11:05.643

此用户控件通过将其属性 Build Action 设置为 Embedded Resource 来嵌入到 dll 中。

问题出在我的虚拟路径提供程序上。我必须在 Global.asax 的“Application_Start”方法中注册虚拟路径提供程序。在我的工作网站中，它是在 App_Code 的 AssemblyResourceProvider 中完成的。将网站转换为 Web 应用程序时，由于 Web 应用程序中没有 App_Code，因此缺少整个代码。

# java - 通过套接字发送 System.out

> ID：10946435
> 
> 赞同：3
> 
> 时间：2012-06-08T09:40:23.710
> 
> 标签：java, sockets, system.out

如何将 System.out 的输出发送到套接字，例如 PrintWriter？

我需要将控制台输出（std 和 err）上出现的任何内容发送到 PrintWriter，因此是一个套接字。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:45:29.933

也许你可以这样尝试：

```
OutputStream os = socket.getOutputStream(); // for example
PrintStream ps = new PrintStream(os);
System.setOut(ps); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:49:06.283

好吧，您*可以*，但请更具体地说明您的要求。如果要发送日志消息，最好使用一些日志框架，例如[logback](/questions/tagged/logback "显示标记为“logback”的问题")，您可以在其中`ConsoleAppender`立即切换`SocketAppender`。

您还可以替换`System.out`为`System.setOut()`并将输出重定向到其他目标。

如果您想重定向某个应用程序的整个输出，您也可以尝试一些 bash/`nc`解决方法：

```
$ java -jar your_app.jar | nc some_server 
```

# c# - 不能在类中使用 DataSet

> ID：10946438
> 
> 赞同：0
> 
> 时间：2012-06-08T09:40:46.753
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2010 修改 C# 中的应用程序（我没有开发它，只是修改过）。我添加了一个名为 DSSolucion 的数据集来获取数据库数据，但我无法在类中使用它，因为我收到以下错误： *命名空间“CCTV.DataSets”中不存在类型或命名空间名称“DSSolucion”（是您缺少程序集参考？）* 我已经构建并重建了解决方案，但没有任何结果。任何想法？（bin文件夹里有一个CCTV.dll文件，不知道要不要用它）。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:59:39.377

请确保您在类的顶部添加了 using 子句

**使用 System.Data；**

# javascript - 这个网络工作者代码是多线程的吗，我有什么收获吗

> ID：10946443
> 
> 赞同：1
> 
> 时间：2012-06-08T09:41:00.933
> 
> 标签：javascript, html, web-worker

我有如下定义的网络工作者代码和 onMessage 处理程序

```
var worker = new Worker('worker.js');

worker.addEventListener('message', function(e){
  App.store.loadMany(App.Activity, e.data);
});

worker.postMessage(structure); 
```

我在 worker.js 中的所有 web worker 代码都是调用 onmessage 回调并传回传入的对象：

```
self.addEventListener('message', function(e){ 
  self.postMessage(e.data);
}, false); 
```

我有点不确定这段代码是否是多线程的，我认为它不是，如果我想知道我是否通过这种方式获得了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:42:29.603

您的**Worker**正在向 GUI 线程回显一条消息，然后该线程必须执行调用`App.store.loadMany()`. 所以在这种情况下没有任何好处。

如果您将主 GUI 线程更改为：

```
var worker = new Worker('worker.js');
worker.postMessage(structure); 
```

和你的**worker.js**：

```
self.addEventListener('message', function(e){
  App.store.loadMany(App.Activity, e.data);
  self.postMessage('done');
}); 
```

您将把工作`App.store.loadMany()`放入**Worker**线程中。这是假设`App.store.loadMany()`可以在 Worker 中运行。**Worker**可以做什么有一些限制。

[这里](http://www.html5rocks.com/en/tutorials/workers/basics/)和[这里](https://developer.mozilla.org/en/Using_web_workers)有一个很好的教程。

# freemarker - 在 Freemarker 中检测数值的 NaN

> ID：10946445
> 
> 赞同：3
> 
> 时间：2012-06-08T09:41:02.340
> 
> 标签：freemarker

有没有办法检测在 Freemarker 模板中设置为 NaN 的数字（java double）？

基本上我想做类似的事情：

```
<#if val?is_nan>
  -
<#else>
   ${val}
</#if> 
```

我尝试转换为字符串，然后检查`\uFFFD`字符，但未能在此处进行正确的比较。

我的印象是我的问题来自方式，我将数据交给处理

```
 Map<String, Object> root = new HashMap<String, Object>();
            root.put("var", objectToRender);
            template.process(root, out); 
```

`objectToRender`我使用的数据结构在哪里。也许我需要为双重处理设置一些特殊标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:40:30.673

**更新：**从 FreeMarker 2.3.20 开始，您只需编写`val?is_nan`. 对于旧版本，请参见下文...

没有`n?is_nan`，但您可以创建自己的方法，您可以将其用作`isNaN(n)`：

```
import java.util.List;

import freemarker.template.TemplateBooleanModel;
import freemarker.template.TemplateMethodModelEx;
import freemarker.template.TemplateModelException;
import freemarker.template.TemplateNumberModel;

public class IsNaNMethod implements TemplateMethodModelEx {

    public static final IsNaNMethod INSTANCE = new IsNaNMethod();

    public Object exec(@SuppressWarnings("rawtypes") List args)
    throws TemplateModelException {
        if (args.size() != 1) {
            throw new TemplateModelException("isNaN needs exactly 1 arguments!");
        }

        Object arg = args.get(0);

        if (arg == null) {
            throw new TemplateModelException(
                    "The argument to the isNaN method must not be null!");
        }

        if (!(arg instanceof TemplateNumberModel)) {
            throw new TemplateModelException(
                    "The argument to the isNaN method must be a number! " +
                    "(The class of the value was: " + arg.getClass().getName() + ")");
        }

        Number n = ((TemplateNumberModel) arg).getAsNumber();
        if (n instanceof Double) {
            return ((Double) n).isNaN()
                    ? TemplateBooleanModel.TRUE : TemplateBooleanModel.FALSE;
        } else if (n instanceof Float) {
            return ((Float) n).isNaN()
                    ? TemplateBooleanModel.TRUE : TemplateBooleanModel.FALSE;
        } else {
            return TemplateBooleanModel.FALSE;
        }
    }

} 
```

将`IsNaNMethod.INSTANCE`其作为“isNaN”放入数据模型（或使用 放入所有数据模型`config.setSharderVariable`），或者将其放入带有.d 的`#include`-d/ `#import`-ed 模板中`<#assign isNaN = "com.example.IsNaNMethod"?new()>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:28:10.197

我现在正在使用“解决方法”：在 Java 代码中，我检查值是否为 NaN，然后​​使变量无效。为此，我必须先将 from 转换`double`为`Double`type 。

```
if (Double.isNaN(var)
    var = null; 
```

所以`var`要么有一个非 NaN 值，要么`null`

在 Freemarker 模板中，我这样处理它：

```
<#if var?has_content>
   ${var}
<#else>
   NaN
</#if> 
```

不是很好，但它的工作原理

# java - LWJGL displayMode() 的问题

> ID：10946447
> 
> 赞同：0
> 
> 时间：2012-06-08T09:41:08.593
> 
> 标签：java, eclipse, opengl, lwjgl

我收到一个错误

> > 设置显示模式

它说“Display.setDisplayMode(new DisplayMode[], String[]) 类型的 Display.setDisplayMode(new DisplayMode[], String[]) 不适用于参数（显示模式）”，并建议“在文件中重命名”。

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.Display;

public class GameLoop 
{
    //Main
        public static void main(String[] argv)
        {
            GameLoop.start();
        }

        //Metodo che gestisce il loop
        public static void start() 
        {
            //Inizializzazione OpenGL
            GL11.glMatrixMode(GL11.GL_PROJECTION);
            GL11.glLoadIdentity();
            GL11.glOrtho(0, 800, 600, 0, 1, -1);
            GL11.glMatrixMode(GL11.GL_MODELVIEW);

            try 
            {
                Display.setDisplayMode(new DisplayMode(800, 600));
                Display.create();
            } catch (LWJGLException e) 
            {
                e.printStackTrace();
                System.exit(0);
            }

            while(!Display.isCloseRequested())
            {
                Entità.pulisci();
                Entità.colora();
                Entità.disegna();
                Display.update();
            }
        }

}

import org.lwjgl.opengl.GL11;

public class Entità 
{
    //Disegna un poligono
        public static void disegna()
        {
            GL11.glBegin(GL11.GL_QUADS);
            GL11.glVertex2f(100,100);
            GL11.glVertex2f(200,100);
            GL11.glVertex2f(200,200);
            GL11.glVertex2f(100,200);
            GL11.glEnd();
        }

        //Pulisce il buffer
        public static void pulisci()
        {
            GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT); 
        }

        //Setta il colore al poligono
        public static void colora()
        {
            GL11.glColor3f(0.5f,0.5f,1.0f);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:46:59.693

问题在于：

```
import org.lwjgl.util.Display; 
```

您导入了错误的 Display 类。而是使用：

```
import org.lwjgl.opengl.Display; 
```

# php - PHP：strtotime() 总是返回 01/01/1970

> ID：10946457
> 
> 赞同：5
> 
> 时间：2012-06-08T09:41:56.483
> 
> 标签：php, date, format, strtotime

我试图在`European format (dd/mm/yyyy)`with中显示日期，`strtotime`但它总是返回 01/01/1970。

这是我的代码：

```
echo "<p><h6>".date('d/m/Y', strtotime($row['DMT_DATE_DOCUMENT']))."</h6></p>"; 
```

在我的数据库中，该字段是 varchar，记录的格式类似于**yyyy.mm.dd**

**我对另一个格式为yyyy-mm-dd**（也是 varchar）的字段使用相同的代码行，它工作正常。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:44:41.363

由于格式`yyyy-mm-dd`有效，请尝试替换`.`为`-`：

```
date('d/m/Y', strtotime(str_replace('.', '-', $row['DMT_DATE_DOCUMENT']))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:45:11.630

尝试：

```
$date = date_parse_from_format("Y.m.d", $row['DMT_DATE_DOCUMENT']);
$time = mktime($date['hour'], $date['minute'], $date['second'], $date['month'], $date['day'], $date['year']);
echo "<p><h6>".date('d/m/Y', $time)."</h6></p>"; 
```

（使用`date_parse_from_format()`代替`strtotime()`）

要不就：

```
$date = date_parse_from_format("Y.m.d", $row['DMT_DATE_DOCUMENT']);
echo "<p><h6>{$date['day']}/{$date['month']}/{$date['year']}</h6></p>"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T09:54:21.080

引用[PHP 手册中的 strtotime 页面](http://php.net/manual/en/function.strtotime.php)。

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

为避免潜在的歧义，最好使用 ISO 8601 (YYYY-MM-DD) 日期或`DateTime::createFromFormat()`尽可能使用。

因此，在您的情况下，它应该采用 YYYY-MM-DD 或 dmy 格式

如果要解析自定义格式，请使用[date_create_from_format](http://www.php.net/manual/en/datetime.createfromformat.php)

例如，

```
date_create_from_format('Y.m.d',$row['DMT_DATE_DOCUMENT']) 
```

# c# - 在数据库之间复制实体和关联的最简单方法？

> ID：10946459
> 
> 赞同：0
> 
> 时间：2012-06-08T09:42:01.137
> 
> 标签：c#, copy, associations, entity

我真的需要有人在黑暗中照亮。在数据库之间复制实体及其关联的最简单方法是什么？Schemas 完全相同。

我们有以下情况：

```
Standard 1 -> * StandardDomain 1 -> * StandardSubDomain 1 -> * StandardControl 
```

我需要能够复制标准记录及其所有相关实体并将其复制到另一个数据库。

是否有某种类型的库可用于此类操作？

**解决了**

我通过使用 linq 加载实体到 sql 并使用 AutoMapper 将它们映射到我的域对象来解决这个问题。保存我的域后，NHibernate 将通过启用 Cascade.All 来保存它的关联

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:23:03.007

我通过使用 linq 加载实体到 sql 并使用 AutoMapper 将它们映射到我的域对象来解决这个问题。保存我的域后，NHibernate 将通过启用 Cascade.All 来保存它的关联

# iphone - 关闭应用程序时删除核心数据中保存的元素

> ID：10946467
> 
> 赞同：0
> 
> 时间：2012-06-08T09:42:20.107
> 
> 标签：iphone, ios, xcode

如何让我的应用程序在关闭时存储信息。因为每次我重新打开它，所有的核心数据都会被删除。

这是一个例子：

```
NSString *nomville = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"label"];
NSString *idVille = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"id"];

detailView.title = nomville;
detailView.idVille = idVille;

NSLog(@"Valor: %@", nomville);
NSLog(@"Valor: %@", idVille);

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSManagedObject *villesR = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"Ville"
                                   inManagedObjectContext:context];
[villesR setValue:idVille forKey:@"idV"];
[villesR setValue:nomville forKey:@"nom"];

[self.navigationController pushViewController:detailView animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:50:34.563

当您的应用程序被推送到后台或退出时，您通常会调用保存方法。

你可以在你的应用委托中这样做：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
    [self saveContext];
}

- (void)applicationWillTerminate:(UIApplication *)application {
    [self saveContext];
}

#pragma mark - Core Data stack

- (void)saveContext {
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

# php - 如何从 js 文件中检索值？

> ID：10946469
> 
> 赞同：0
> 
> 时间：2012-06-08T09:42:24.320
> 
> 标签：php, javascript

基本上我的问题是**如何在 js 文件中获取变量的值。**

例如

```
var now = (new Date() - 0);

other_var = 'Whats up';//how to pull the value of the other_var which is 'Whats Up'

key.embed(); 
```

如何获取`other_var`使用 php 的值？我只需要“whats up”变量的值。

我自己做了一些挖掘，现在我可以使用`file_get_content`php中的函数获取js文件的内容，只是不知道如何拉取变量并拉取它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:10:29.857

只需查找“other_var =”，然后检查它后面的内容......获取文件

```
$content = file_get_contents(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:17:45.910

```
<?php

  $file = file_get_contents('myfile.js');

  $varNameToFind = 'other_var';

  $expr = '/^\s*(?:var)?\s*'.$varNameToFind.'\s*=\s*([\'"])(.*?)\1\s*;?/m';

  if (preg_match($expr, $file, $matches)) {
    echo "I found it: $matches[2]";
  } else {
    echo "I couldn't find it";
  } 
```

[例子](http://codepad.viper-7.com/rApVNx)

类似的东西？请注意，它只会在查找引号时找到字符串值，并且其中有各种漏洞允许它匹配一些语法上无效的 Javascript 并且当字符串中有转义引号时它会掉下来 - 但作为只要 JS 有效，它就应该在文件中找到将字符串值分配给命名变量的第一个位置，无论是否带有`var`关键字。

**编辑**

[一个更好的版本](http://codepad.viper-7.com/MbD7mM)，它只匹配语法上有效的 Javascript 字符串，并且应该匹配任何有效的单个字符串，包括那些带有转义引号的字符串，尽管它仍然不能处理连接表达式。它还获取字符串的实际值，就像加载到 Javascript 时一样 - 即，它插入[此处](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Using_special_characters_in_strings)定义的转义序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:24:23.013

如果我假设文件内容如您所述：

```
 var now = (new Date() - 0);

other_var = 'Whats up';//how to pull the value of the other_var which is 'Whats Up'

key.embed(); 
```

那么我可以建议您使用以下内容：

```
 $data = file_get_contents("javascriptfile.js"); //read the file
//create array separate by new line
//this is the part where you need to know how to navigate the file contents 
//if your lucky enough, it may be structured statement-by-statement on each
$contents = explode("\n", $data); 
$interestvar = "other_var";
$interestvalue = "";
foreach ($contents as $linevalue)  
{
    //what we are looking for is :: other_var = 'Whats up';
    //so if "other_var" can be found in a line, then get its value from right side of the "=" sign
    //mind you it could be in any of the formats 'other_var=xxxxxx', 'other_var= xxxxxx', 'other_var =xxxxxx', 'other_var = xxxxxx', 
    if(strpos($linevalue,$interestvar." =")!==false){
        //cut from '=' to ';'
        //print strpos($linevalue,";");
        $start = strpos($linevalue,"=");
        $end = strpos($linevalue,";");
        //print "start ".$start ." end: ".$end;
        $interestvalue = substr($linevalue,$start,$end-$start);
        //print $interestvalue;
        break;
    }
}
if($interestvalue!=="")
print "found: ".$interestvar. " of value : ".$interestvalue; 
```

# html - CSS：这个边距从何而来？

> ID：10946472
> 
> 赞同：0
> 
> 时间：2012-06-08T09:42:39.570
> 
> 标签：html, css

这是我的问题：http: [//jsfiddle.net/gregseth/548S2/](http://jsfiddle.net/gregseth/548S2/)

为什么元素之间有空白？我怎样才能摆脱它？

另外`<img>`，当它在“普通”HTML页面（Firefox）上时，为什么没有考虑jsfiddle的尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:47:52.133

这是当块项目之间有空格或换行符时 HTML 呈现空格的结果。您可以将项目浮动到左侧：

[http://jsfiddle.net/548S2/4/](http://jsfiddle.net/548S2/4/)

或删除元素之间的换行符：

[http://jsfiddle.net/548S2/2/](http://jsfiddle.net/548S2/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:44:46.730

这是因为

```
nav a { display:inline-block; } 
```

如果您将其更改为：

```
nav a {    
    display:block;
    float:left;
} 
```

边距消失了。

jsfiddle：http: [//jsfiddle.net/548S2/3/](http://jsfiddle.net/548S2/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:00:22.900

只需将**float:left**应用于 CSS 中的“nav a”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T09:44:30.077

`<a>`它是html 中元素之间的空格（换行符） 。这发生在所有`inline`或`inline-block`元素上。

**选项 1：**`margin-right:-4px;`在`<a>`标签上 使用。

**选项 2：**`<a>`删除标签 之间的空格。

**选项 3：**`<a>`将标签 更改`display:block; float:left`为其他答案中所述。在这种情况下，您需要固定容器元素的高度（`<nav>`在您的情况下），或者`clear:left`在下一个元素上使用 a 以防止浮动与其重叠。有时避免这种浮动方法并使用其他选项之一很有用。

# c++ - 减小 .exe 大小。exe压缩器

> ID：10946477
> 
> 赞同：0
> 
> 时间：2012-06-08T09:43:02.650
> 
> 标签：c++, visual-studio-2010, compression, exe

1.  为什么VS2010把这种信息（函数名）放在Release模式下可执行？

2.  我可以摆脱 exe 文件中所有未使用的数据/段，重新链接它，重新构建它等，在一些第三方软件的帮助下“分析”现有的 .exe 并重建它？

3.  我可以通过添加一些启动时解压缩的二进制代码来压缩 .exe 文件以缩小其大小吗？

![在此处输入图像描述](../Images/f02840d20cd966531e5ef419474947a1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T09:55:13.753

1.  事实上，放置这些细节的并不是真正的 VStudio，而是您的项目静态使用的 Qt 库。就库的大小而言，Qt 是众所周知的“慷慨”。

2.  是的，拥有这些详细信息有助于了解您的软件的功能。（例如使用 Qt）。

3.  就压缩和可移植性而言，UPX 是众所周知的并且非常高效。但不要忘记 UPX 是一种压缩（和解压缩）机制，而不是加密机制。要隐藏一些导出表等...您可以使用真正的压缩和加密包，如[VMProtect](http://vmpsoft.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:46:12.567

除非你的可执行文件有几十兆，否则我不会打扰。

但要回答这个问题，我会做 3\. 使用[UPX](http://upx.sourceforge.net/)

# html - jquery 切换显示/隐藏

> ID：10946483
> 
> 赞同：0
> 
> 时间：2012-06-08T09:43:44.430
> 
> 标签：html, css

我已经在[我的网站](http://pligg.marsgibson.info/)上成功实现了 jQuery show/hide toddle 。

我希望图像（加减号）位于上方（在其他 div 中）并在下面的相同位置显示所需的切换

看这个[屏幕截图](http://i49.tinypic.com/xlihr7.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:01:01.767

像这样写：

```
.title h2 span, .title h2 a{
 vertical-align:top;
} 
```

因为**span** & **a** inside`.title`是`inline`元素。所以，给`vertical-align:top;`它。

# java - 如何在java中使用xerces？

> ID：10946484
> 
> 赞同：1
> 
> 时间：2012-06-08T09:43:44.580
> 
> 标签：java, xml, xerces

这是我用于验证 xml 的代码，唯一的问题是我在导入 org.apache.xerces 时在第 2 行...我下载了 xerces.jar，然后将其作为外部 jar 从运行配置添加到类中，你能告诉我吗如果我正在这样做，如果是，那么为什么会出现这个错误，如果不是，那么我该怎么办。

```
import java.io.File;
import org.apache.xerces.parsers.DOMParser;
public class SchemaTest {
    public static void main (String[] args) {
        File docFile = new File("C:\\Users\\ahussain\\Desktop\\Xml_Validation\\memory.xml");
        try {
            DOMParser parser = new DOMParser();
            parser.setFeature("http://xml.org/sax/features/validation", true);
            parser.setProperty("http://apache.org/xml/properties/schema/external-   noNamespaceSchemaLocation","memory.xsd");
            ErrorChecker errors = new ErrorChecker();
            parser.setErrorHandler(errors);
            parser.parse("memory.xml");
        } catch (Exception e) {
            System.out.print("Problem parsing the file.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:48:47.047

不要添加运行配置，而是将 jar 添加到您的类路径中，

项目 - BuildPath - 配置构建路径 - 库 - 添加你的 jar。

# iphone - iPad：由于添加了三个以上的 CCSpriteFrameCache 文件而导致崩溃

> ID：10946488
> 
> 赞同：1
> 
> 时间：2012-06-08T09:43:58.043
> 
> 标签：iphone, ios, cocos2d-iphone

在我的 cocos2d 应用程序中，我使用了五个 CCSpriteFrameCache(.plist) 文件。当我加载超过三个 .plist 文件应用程序崩溃时。

只是这样打印

```
2012-06-08 16:45:08.575 VoiceChangingBowtie[5611:707] cocos2d: CCSpriteFrameCache: Trying to use file 'windowAnimationsiPad.png' as texture

2012-06-08 16:45:13.089 VoiceChangingBowtie[5611:707] cocos2d: CCSpriteFrameCache: Trying to use file 'iPadShark.png' as texture

2012-06-08 16:45:14.297 VoiceChangingBowtie[5611:707] cocos2d: CCSpriteFrameCache: Trying to use file 'iPadSharkSecond.png' as texture ... 
```

然后应用程序崩溃了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:28:41.837

几乎在所有情况下都没有消息的崩溃意味着您有记忆问题。您尝试加载的纹理有多大？使用仪器工具检查内存使用情况。

# android - 没有道路/城市/国家标签的 Android 卫星地图视图

> ID：10946491
> 
> 赞同：1
> 
> 时间：2012-06-08T09:44:05.067
> 
> 标签：android, google-maps-api-3, android-mapview, android-maps

我想在没有道路/城市/国家标签重叠的 Android 中显示卫星地图视图。在Android中默认情况下我该怎么做。

我想显示图片中显示的两个视图。我可以显示混合视图，但不能显示卫星视图。

![在此处输入图像描述](../Images/815707614edd333fdfd6533d2cfe1e21.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:22:17.333

您指的是城镇、建筑物、城市、街道名称标签，Android 中没有禁用标签的 API，但将来他们可能会意识到将其包含在 API 中，您永远不会知道。我们确实有其他选择，例如使用 Javascript MAP API [Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:22:29.733

试试这个代码..

MapView 地图 =(MapView)findViewById(R.id.map);

map.setSatellite（真）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:47:28.373

如果您使用 Google maps android api v2，您可以这样做：

```
GoogleMap map;
...
// Satellite photograph data. Road and feature labels are not visible.
map.setMapType(GoogleMap.Satellite); 
```

[文件](https://developers.google.com/maps/documentation/android/map#map_types)

# java - 无法使用 autocmd 设置的 gcc 在 MacVim 中编译 java

> ID：10946492
> 
> 赞同：1
> 
> 时间：2012-06-08T09:44:05.847
> 
> 标签：java, vim, gcc, javac

我想使用 gcc 而不是 javac 编译我的 java 程序，因为与 javac 相比，它可以提供更详细的信息。

在我的启动配置中。我使用“make”来帮助我编译我的程序，所以我必须先将编译器设置为“make”

当文件类型为 java 时，我使用此命令将编译器自动设置为 gcc。 **autocmd FileType java 编译器 gcc**

但是当我尝试使用“make”编译我的程序时，它发出了很多我不明白的消息，并且无法编译程序。

但是，当我第一次将编译器设置为 javac 时，稍后将其设置为 gcc。“制作”作品！

1.  在我的启动配置中：**autocmd FileType java compiler javac**
2.  当我编辑文件时，**:compiler gcc**

然后我可以使用 make 和 gcc 编译器来编译我的 java 程序

我不知道这是什么问题。我可以在编辑文件时自动将编译器设置为 gcc 而不是稍后设置它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:56:05.877

试试`autocmd FileType java set makeprg=gcc`你的 .vimrc。

# parsing - h264 参考帧

> ID：10946496
> 
> 赞同：3
> 
> 时间：2012-06-08T09:44:21.230
> 
> 标签：parsing, h.264, decoding

我正在寻找一种在 h264 流中查找参考帧的算法。我在不同的解决方案中看到的最常见的方法是查找访问单元分隔符和 IDR 类型的 NAL。不幸的是，我检查的大多数流都没有 IDR 类型的 NAL。我将不胜感激。问候雅克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T06:50:54.753

H264 帧由一个特殊的标签分割，称为起始码前缀，它是**0x00 0x00 0x01**或**0x00 0x00 0x00 0x01**之一。两个起始码之间的所有数据都包含在 H264 语音中的一个 NAL 单元。所以你要做的是在你的 h264 流中搜索 startcode 前缀。紧跟 startcode 前缀的字节是**NAL 标头**。NAL 标头的最低 5 位将为您提供 NAL 单元类型。如果 nal_unit_type = 5，则该特定 NAL 单元是参考帧。

像这样的东西：

```
void h264_find_IDR_frame(char *buf)
{
    while(1)
    {
        if (buf[0]==0x00 && buf[1]==0x00 && buf[2]==0x01)
        {
            // Found a NAL unit with 3-byte startcode
            if(buf[3] & 0x1F == 0x5)
            {
                // Found a reference frame, do something with it
            }
            break;
        }
        else if (buf[0]==0x00 && buf[1]==0x00 && buf[2]==0x00 && buf[3]==0x01)
        {
            // Found a NAL unit with 4-byte startcode
            if(buf[4] & 0x1F == 0x5)
            {
                // Found a reference frame, do something with it
            }
            break;
        }
        buf++;
    }
} 
```

# php - PHP 在使用 Ajax 时无法回显表单输入

> ID：10946497
> 
> 赞同：0
> 
> 时间：2012-06-08T09:44:26.307
> 
> 标签：php, javascript, ajax, forms, input

我的 PHP 文件回显了语句，但无法回显用户给出的实际值。

我正在使用 ajax，在左侧有一个要求输入电子邮件 ID 的表单。输入电子邮件 ID 并提交表单后，结果需要显示在右侧。

但是，在提交表单时，php 能够回显语句“您已输入：”，但无法回显输入的实际电子邮件 ID。

请帮忙

**这是表格：-**

```
<form action="javascript:ajaxpage('files/search2.php', 'columnTwo')" method="POST">
                        Email :<input type="text" name="email" value=""/>
                        <input type="submit" value="Submit">`
</form> 
```

**这是 PHP 文件：-**

```
<?php
$email = $_POST['email'];
echo "The Email ID is :";
echo $email;
?>
<html>
<body>
<h1>Hello World</h1>
</body>
</html> 
```

仅显示消息“电子邮件 ID 为：”

$email 未显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:39:21.873

第一：使用 eventHandlers，而不是`action="javascript:blah()";` 第二：在您的 javascript ajax 函数中从您的输入中获取值并使用 post 方法将它们发送到 php 文件。您可以制作自己的 ajax，但也有类似的库，如prototype.js 或易于使用的jquery。稍微阅读一下，这很容易，如果您在实现它时遇到问题，请返回这里。

# android - AsyncTask 检测是否完成

> ID：10946499
> 
> 赞同：3
> 
> 时间：2012-06-08T09:44:27.867
> 
> 标签：android, android-asynctask, queuing

我创建了一个 AsyncTask，它在执行时从网站加载数据。目前我收到一个空指针异常，我认为这是因为我试图过早地填充 UI，所以我希望创建某种 if 语句来说明 AsyncTask 是否未完成显示加载图形以及何时填充数据。但我不知道该怎么做，有人知道我怎么能做到这一点，或者至少为我指明了正确的方向。

到目前为止，这是我的代码

```
public void checkPreferences(){

    SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
    ChosenMethod = preferences.getString("ChosenMethod", ChosenMethod);
    ChosenLeagueID = preferences.getString("ChosenLeagueId", ChosenLeagueID);
    ChosenTeamId = preferences.getString("ChosenTeamId", ChosenTeamId);

    Log.v("lc", "newsurl" + newsFeedURL);

    Log.v("myapp", "ChosenMethod Home = " + ChosenMethod);
    Log.v("myapp", "ChosenLeagueID Home = " + ChosenLeagueID);
    Log.v("myapp", "ChosenTeamID Home = " + ChosenTeamId);

    if (ChosenMethod.equals("Team")) {
        setContentView(R.layout.homeactteam2);
        newsAmount = 5;

    } else {
        newsAmount = 10;
        setContentView(R.layout.homeactteam);
    }

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    //Check Preferences which sets UI

    checkPreferences();
   PostTask posttask;
   posttask = new PostTask();
   posttask.execute();

   FillData();

    Button backbtn = (Button) findViewById(R.id.backbtn);

    //Listening to button event
    backbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            //Starting a new Intent
            Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
            ChosenMethod = "null";
            SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = preferences.edit();
            editor.putString("ChosenMethod", ChosenMethod);            
            editor.commit();
            previousScreen.putExtra("FullData", fulldata);
            startActivity(previousScreen);

        }
    });

//((PullToRefreshListView) getListView()).setOnRefreshListener(new OnRefreshListener() {
//   
//    public void onRefresh() {
//        // Do work to refresh the list here.
//        loadData();
//    }
//});
//

}

public void loadNewsFeed(){

     newsFeedRequest = "website/" + chosenLeagueId + "/news?timestamp=" + unixTimeStamp;
     newsFeedURL = "https://www.website.com" + newsFeedRequest; 

        String myhash = buildHmacSignature(apiKey, newsFeedURL);
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(newsFeedURL);

        List<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("requestToken", myhash));
        pairs.add(new BasicNameValuePair("apiUser", apiUser));

            try {
                post.setEntity (new UrlEncodedFormEntity(pairs));
                HttpResponse response = client.execute(post);
                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                String json = reader.readLine();
                fulldata = String.valueOf(json);
                Log.v("myApp","newsdata" + fulldata);

                newsList = new ArrayList<String>();
                newsList2 = new ArrayList<String>();
                newsList3 = new ArrayList<String>();
                imageList = new ArrayList<String>();

                JSONObject obj = new JSONObject(json);    
                JSONObject objData = obj.getJSONObject("data");
                JSONArray jArray = objData.getJSONArray("news");
                Log.v("lc","newsAmount= " + newsAmount);

                   for(int t = 0; t < newsAmount; t++){
                       JSONObject newsTitleDict = jArray.getJSONObject(t);
                       imageList.add(newsTitleDict.getString("image_small"));
                     newsList3.add(newsTitleDict.getString("title"));

                   }

                   for(int t = 0; t < 1; t++){
                       JSONObject newsTitleDict = jArray.getJSONObject(t);

                 newsList.add(newsTitleDict.getString("title"));
            //       newsList2.add(newsTitleDict.getString("title"));

                   }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}           

public void loadResultsFeed(){

    resultsFeedRequest = "website/" + chosenLeagueId + "/results?&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
    resultsFeedURL = "https://www.website.com" + resultsFeedRequest;    

    String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

        if(jArray.length() < 1) loadLastResults();

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   

}

public void loadLastResults(){

    resultsFeedRequest = "website/" + chosenLeagueId + "/results?month=04&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
    resultsFeedURL = "https://www.website.com" + resultsFeedRequest;    

     String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    Date anotherCurDate = new Date();  
    SimpleDateFormat formatter = new SimpleDateFormat("MM");  
    String CurMonth = formatter.format(anotherCurDate);  

    int Int = Integer.parseInt(CurMonth);

    int MonthInt = Int -1;

    CurMonth = (String) (String.valueOf(MonthInt));

    if (CurMonth.equals("1")){

        lastMonth = "12";

    }    
     else {
        if(CurMonth.length() < 2){
            lastMonth = "0" + CurMonth;
        } else {
            lastMonth = CurMonth;
        }
    }

    Log.v("lc","month= " + CurMonth);
    Log.v("lc","LastMonth= " + lastMonth);

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(resultsFeedURL);

        List<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("requestToken", myhash));
        pairs.add(new BasicNameValuePair("apiUser", apiUser));

        try {
            post.setEntity (new UrlEncodedFormEntity(pairs));
            HttpResponse response = client.execute(post);
            BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            String json = reader.readLine();
            fulldata = String.valueOf(json);
            Log.v("myApp","resultsdata" + fulldata);

            newsList = new ArrayList<String>();
            newsList2 = new ArrayList<String>();
            newsList3 = new ArrayList<String>();
            imageList = new ArrayList<String>();

            JSONObject obj = new JSONObject(json);    
            JSONObject objData = obj.getJSONObject("data");
            JSONArray jArray = objData.getJSONArray("results");

               for(int t = 0; t < 1; t++){

                   resultsDict = jArray.getJSONObject(t);
                  HomeTeam = resultsDict.getString("hometeam");
                  AwayTeam = resultsDict.getString("awayteam");
                  HomeScore = resultsDict.getString("homescore");
                  AwayScore = resultsDict.getString("awayscore");
                  Attendance = resultsDict.getString("attendance");
                  Division = resultsDict.getString("division");

                  Log.v("lc","hometeam" + HomeTeam);
                  Log.v("lc","awayteam" + AwayTeam);

               }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }   

public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;
        loadNewsFeed();
        loadResultsFeed();
        loadLastResults();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");
            }
    }

}

public void FillData(){ 

     if (ChosenMethod.equals("Team")) {

         resultsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.resultscell,
                 null);

       TextView homeTeam = (TextView) resultsView.findViewById(R.id.HomeTeam);
       homeTeam.setText(HomeTeam);

       TextView awayTeam = (TextView) resultsView.findViewById(R.id.AwayTeam);
       awayTeam.setText(AwayTeam);

       TextView homeScore = (TextView) resultsView.findViewById(R.id.HomeScore);
       homeScore.setText(HomeScore);

       TextView awayScore = (TextView) resultsView.findViewById(R.id.AwayScore);
       awayScore.setText(AwayScore);

       TextView attendance = (TextView) resultsView.findViewById(R.id.Attendence);
       attendance.setText("Att:" + Attendance);

       TextView division = (TextView) resultsView.findViewById(R.id.Division);
       division.setText(Division);

        arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);

         String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
         String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

         arrayAdapter3 = new LazyAdapter(this, mStrings, news);

            ListView list = getListView();
               list.setTextFilterEnabled(true);

               LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
                View header = inflater.inflate( R.layout.homeheader, list, false);
                View header2 = inflater.inflate( R.layout.homeheader2, list, false);
                View header3 = inflater.inflate( R.layout.homeheader3, list, false);

        //setListAdapter (arrayAdapter);

            adapter = new MergeAdapter();
            adapter.addView(header);
            adapter.addAdapter(arrayAdapter);
            adapter.addView(header2);
            adapter.addView(resultsView);
            adapter.addView(header3);
            adapter.addAdapter(arrayAdapter3);
            setListAdapter(adapter);

     } else {

         arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
            arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
            //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

             String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
             String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

             arrayAdapter3 = new LazyAdapter(this, mStrings, news);

                ListView list = getListView();
                   list.setTextFilterEnabled(true);

                   LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
                    View header3 = inflater.inflate( R.layout.homeheader3, list, false);

            //setListAdapter (arrayAdapter);

                adapter = new MergeAdapter();
                adapter.addView(header3);
                adapter.addAdapter(arrayAdapter3);
                setListAdapter(adapter);
         } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:48:30.383

盲目假设...！（没有 StackTrace 报告）

`onPostExecute()`在你的实现`AsyncTask`并在其中放置`FillData()`方法..当你的`doInBackground()`..完成控制`onPostExecute()`自动进入..然后填充你的 UI 部分..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T09:48:35.750

在里面调用你的`FillData()`方法`onPostExecute Method of AsyncTask`

**它应该是：：**

```
public class PostTask extends AsyncTask<Void, String, Boolean> {

    @Override
    protected Boolean doInBackground(Void... params) {
        boolean result = false;
        loadNewsFeed();
        loadResultsFeed();
        loadLastResults();
        publishProgress("progress");
        return result;
    }

    protected void onProgressUpdate(String... progress) {
        StringBuilder str = new StringBuilder();
            for (int i = 1; i < progress.length; i++) {
                str.append(progress[i] + " ");
            }
    }

        @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);

         fillData();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:47:57.140

您应该使用另一种方法`AsyncTask`来更新 UI。

```
protected void onPostExecute(Long result) {
    showDialog("Downloaded " + result + " bytes");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T10:03:26.913

`asynctask`在ie 中添加一个方法

```
public void onPostExecute(Void result){} 
```

并在其中关闭对话并致电您的`fillData()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T09:50:32.087

您可以使用 ProgressDialog 直到来自服务器的完整数据到达您的末尾并填写数据...

请阅读[此](https://stackoverflow.com/questions/9414190/to-use-progressdialog-till-gridview-gets-loaded-from-webservice/9477553#9477553)。

让我知道是否有任何问题。

谢谢，

哈普斯。

# powershell - 通过 TCP 发送/接收字节数组

> ID：10946501
> 
> 赞同：2
> 
> 时间：2012-06-08T09:44:30.800
> 
> 标签：powershell, tcp

我的目标是向服务器应用程序发送和接收简单的字节数组（简单的 Java 工具，向所有请求返回 30 字节的固定响应）。

我已经使用以下代码完成了第一部分（通过 TCP 发送字节数组）：

```
 # Define port and target IP address 
  [int] $Port = 2222
  $IP = "172.16.0.51"
  $Address = [system.net.IPAddress]::Parse($IP) 

  # Create IP Endpoint 
  $End = New-Object System.Net.IPEndPoint $address, $port 

  # Create Socket 
  $Saddrf = [System.Net.Sockets.AddressFamily]::InterNetwork 
  $Stype = [System.Net.Sockets.SocketType]::Stream 
  $Ptype = [System.Net.Sockets.ProtocolType]::TCP
  $Sock = New-Object System.Net.Sockets.Socket $saddrf, $stype, $ptype 
  $Sock.TTL = 26 

  # Connect to socket 
  $sock.Connect($end)

  # Create byte array
  # TCP [Byte[]] $Message = 0xAA,0x55,0x00,0x12,0x00,0x00,0x00,0x7B,0x00,0x00,0x00,0x41,0x00,0x00,0x00,0x00,0xD6,0xDE,0xD5,0xA7,0x14,0x00
  [Byte[]] $Message = 0xAA,0x55,0x00,0x12,0x00,0x00,0x00,0x7B,0x00,0x00,0x00,0x41,0x00,0x00,0x00,0x00,0xD6,0xDE,0xD5,0xA7,0x14,0x00

 # for ($i=0; $i -le 1000; $i++)
 # {
  # Send the byte array 
  $Sent = $Sock.Send($Message)
  "{0} characters sent to: {1} " -f $Sent,$IP
  "Message is: $Message" 
  # End of Script
 # } 
```

但我无法在发送此类请求后找到/添加/创建能够接收响应的代码。有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:48:06.140

谢谢，最后我有以下代码：

```
# Getting responses  
    $script:compare = new-object System.Byte[] 40  
    $end = 0  
    do  
    {  
            # Receive response  
        Start-Sleep -m 30  
        $buffer = new-object System.Byte[] 40  
        $Received = $Sock.Receive($buffer)  
        if (@(Compare-Object $buffer $compare).length -ne 0)  
        {     
            Write-Host "TCP Message received:" $buffer  
            # Encode received response to ASCII  
            $Encode = new-object "System.Text.ASCIIEncoding"  
            $test = $Encode.GetString($buffer)  
            Add-Content -value "$(Time) $test" -Path tcp_response.log  
            $end = 1  
        }  
    } while ($end -eq 0)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:54:12.793

查看[MSDN 上 System.Net.Sockets.Socket 类](http://msdn.microsoft.com/en-us/library/attbb8f5)的文档。该类具有多种`Receive`可用于从流中读取数据的方法。

# memory - 在现有的庞大代码中使用 jemalloc

> ID：10946506
> 
> 赞同：6
> 
> 时间：2012-06-08T09:44:49.833
> 
> 标签：memory, malloc, profiler

我有一个庞大的代码分布在许多文件中。此代码当前使用普通 malloc。

我想在其中实现 Jemalloc 以获得更好的性能，并且我还想使用 Jemalloc 的内存分析器来了解每个分配在该代码中是如何以及在何处发生的。

我正在尝试这个超过 3 周。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T14:27:03.973

在没有任何前缀的情况下构建后`jemalloc`，您将拥有一个共享库，其中`malloc`重新实现了所有函数族。

*假设：Linux环境*

如果它在单个终端中运行，您可以在运行应用程序之前使用`LD_PRELOAD`环境变量预加载。`jemalloc.so`就像是：

```
export LD_PRELOAD=$LD_PRELOAD:/path/to/jemalloc-build/lib/jemalloc.so.1 
```

对于受更改影响的所有应用程序，您可以在文件中添加一个`/etc/ld.so.preload`带有 lib 路径的新行。（这肯定适用于基于 Debian 的系统，但也可能适用于其他系统）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-14T23:32:31.707

我已经在 /usr/local 中安装了我的 jemalloc，所以他不在“正常”库路径中。

安装程序为我创建了一个 shell，用于使用 jemalloc 库启动程序。

在某种程度上，它自动化了上述 Iulius 描述的过程，但它仅将 jemalloc 用于我想要执行的程序。如果这是预期用途，您可以执行以下操作：

首先，检查那个小脚本是否存在于你的路径中：

`me@mypc /root #`**`which jemalloc.sh`**

**`/usr/local/bin/jemalloc.sh`**

如果它存在，您可以简单地以这种方式执行您的程序：

`me@mypc /root #`**`jemalloc.sh your-program your-program-arguments &`**

您可以阅读*`/usr/local/bin/jemalloc.sh`*以验证它是否使用与 Iulius 描述的类似的方式。

`me@mypc /root #`**`jemalloc-config --help`** 将帮助您了解您的 jemalloc 是如何编译的， `me@mypc /root #`**`jemalloc-config --version`** 并将显示您的 jemalloc 版本。

这样您就可以验证您的程序是否可以与 jemalloc 一起正常工作，而无需重新编译它们。然后，您可以做出最终决定。

乔治。

# android - Android Facebook 聊天示例项目

> ID：10946508
> 
> 赞同：7
> 
> 时间：2012-06-08T09:44:59.617
> 
> 标签：android, facebook, facebook-graph-api, facebook-chat

[我在这里](https://stackoverflow.com/questions/5035636/how-to-make-facebook-chat)找到 了适用于 iOS 的**Facebook 聊天项目**示例。

[我也在这里](https://developers.facebook.com/docs/chat/)获得了**facebook 聊天文档**

同样的方法，

有人知道 facebook 聊天示例应用程序或在 android 中实现 fb 聊天的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T04:35:51.043

有一个可用的 Android 开源项目：[Beem 项目](http://beem-project.com/)和连接 Facebook 聊天，您可以使用以下指南。

**在 Android 中实现 Facebook 聊天 API 的步骤：**

1.  首先，我们必须在现有项目中实现[MemorizingTrustManager](https://github.com/ge0rg/MemorizingTrustManager) Library 项目。

    => 为此，您必须在现有项目中复制以下三个文件

    *   MemorizingTrustManager/src/de/duenndns/ssl/MTMDecision.java
    *   MemorizingTrustManager/src/de/duenndns/ssl/MemorizingActivity.java
    *   MemorizingTrustManager/src/de/duenndns/ssl/MemorizingTrustManager.java

    => 并在**values/string.xml中添加以下值**

    ```
    <resources>
        <string name="mtm_accept_cert">Accept Unknown Certificate?</string>
        <string name="mtm_decision_always">Always</string>
        <string name="mtm_decision_once">Once</string>
        <string name="mtm_decision_abort">Abort</string>
        <string name="mtm_notification">Certificate Verification</string>
    </resources> 
    ```

2.  第二步，您可以使用以下代码连接 Facebook 并使用您的**Facebook Jabber ID (username@chat.facebook.com)登录，而不是使用****X-FACEBOOK-PLATFORM**等**SASLAuthentication**

     ****```
    public void connectToFb() throws XMPPException {

    ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
    config.setSASLAuthenticationEnabled(true);
    config.setSecurityMode(SecurityMode.required);
    config.setRosterLoadedAtLogin(true);
    config.setTruststorePath("/system/etc/security/cacerts.bks");
    config.setTruststorePassword("changeit");
    config.setTruststoreType("bks");
    config.setSendPresence(false);
    try {
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(null, MemorizingTrustManager.getInstanceList(this), new java.security.SecureRandom());
        config.setCustomSSLContext(sc);
    } catch (GeneralSecurityException e) {
        Log.w("TAG", "Unable to use MemorizingTrustManager", e);
    }
    XMPPConnection xmpp = new XMPPConnection(config);
    try {
        xmpp.connect();
        xmpp.login("facebookusername", "****"); // Here you have to used only facebookusername from facebookusername@chat.facebook.com
        Roster roster = xmpp.getRoster();
        Collection<RosterEntry> entries = roster.getEntries();
        System.out.println("Connected!");
        System.out.println("\n\n" + entries.size() + " buddy(ies):");
        // shows first time onliners---->
        String temp[] = new String[50];
        int i = 0;
        for (RosterEntry entry : entries) {
            String user = entry.getUser();
            Log.i("TAG", user);
        }
    } catch (XMPPException e) {
        xmpp.disconnect();
        e.printStackTrace();
    }
    } 
    ```**** 

 ****最后，如果您在 LogCat 视图中获取您 Facebook 帐户的所有好友列表，则可以使用[本教程](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)实现简单的 Facebook 聊天。****

# c# - 分配大数组；OutOfMemoryException VS 溢出异常

> ID：10946513
> 
> 赞同：6
> 
> 时间：2012-06-08T09:45:15.623
> 
> 标签：c#, .net

考虑以下：

```
long size = int.MaxValue;
long[] huge = new long[size];     // throws OutOfMemoryException
long[] huge = new long[size + 1]; // throws OverflowException 
```

我知道单个对象的大小有 2GB 的限制，这解释了第一个异常，但是为什么一旦元素数量超过 32 位，我会得到不同的异常？

（如果这很重要，我使用的是 64 位计算机）。

编辑：我还可以定义和使用一个可以毫无问题地接受 a 的索引器`long`：

```
internal sealed class MyClass
{
   public object this[long x]
   { 
      get
      {
         Console.WriteLine("{0}", x);
         return null;
      }
   }
}

...

long size = int.MaxValue;
MyClass asdf = new MyClass();
object o = asdf[size * 50]; // outputs 107374182350 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:47:54.557

C# 数组由`System.Int32`. 由于`size + 1`is beyond `Int32.MaxValue`，你会得到一个整数溢出。

`Array.CreateInstance`如果您真的想使用 a`long`作为索引，请改用需要很长时间的重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:01:49.280

因此，根据我收集到的信息，这里发生了以下情况：

*   索引器通常可以使用任何类型的参数。
*   内置数组索引器可以接受任何整数类型...
*   **但是**内置数组索引器的底层实现需要一个值，`<= Int32.MaxValue`并且对于超出的值将引发溢出异常`Int32.MaxValue`。

虽然后一点感觉像是某种奇怪的矛盾（接受大于 的类型`Int32`，但如果您碰巧实际使用了这些额外位中的任何一个，则会引发异常），但这显然是其中一些是一半的事实的副作用- 为将来允许包含多个`Int32.MaxValue`元素的数组实现。

# php - PHP：如何从我的 gmail 帐户下载 dot csv 文件？

> ID：10946521
> 
> 赞同：0
> 
> 时间：2012-06-08T09:45:44.590
> 
> 标签：php, gmail, download, incoming-mail

我的 gmail 帐户中有数千封电子邮件。在电子邮件中，每封电子邮件中有很多文件，但我需要下载一个带有 csv 扩展名的文件并将其复制到我电脑中的文件夹中。知道我将如何在 PHP 中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:21:30.497

对于从 PHP/IMAP 连接到 gmail 的基础知识，您可能会发现[这很有用。](http://davidwalsh.name/gmail-php-imap)

这里有更多关于通过 IMAP 获取附件[的](http://www.electrictoolbox.com/extract-attachments-email-php-imap/)详细信息。

[您可以使用preg_match()](http://php.net/manual/en/function.preg-match.php)甚至[strpos()](http://dk2.php.net/manual/en/function.strpos.php)轻松按文件名过滤附件以仅获取 .CSV 文件。

# java - 将参数传递给Java中的方法

> ID：10946523
> 
> 赞同：1
> 
> 时间：2012-06-08T09:45:56.293
> 
> 标签：java, parameter-passing

我对一件微不足道的事情感到困惑 - 将参数传递给方法并更改它们的值......我最好给你一些代码：

```
public class Test {
  public static void main(String[] args) {
    Integer val = new Integer(41);
    upd(val);
    System.out.println(val);

    Man man = new Man();
    updMan(man);
    System.out.println(man.name);
  }

  static void upd(Integer val) {
    val = new Integer(42);
  }

  static void updMan(Man man) {
    man.name = "Name";
  }

  static class Man {
    String name;
  }
} 
```

你能解释一下为什么我传递的 Integer 对象没有更新，而 Man 对象是？Integer 和 Man 对象不是通过引用传递（由于它们的非原始性质）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:49:43.613

因为`Integer`您正在创建一个新对象。对于`Man`您只需更改其值之一，对象`man`将保持不变。

考虑以下：

```
static void updMan(Man man) {
  man = new Man();
  man.name = "Another Man";
} 
```

这也不会改变您的初始`man`.

- 编辑

您可以通过以下方式“模拟” 的可变性`Integer`：

```
static void upd(Integer val) {
    try {
        Field declaredField = val.getClass().getDeclaredField("value");
        declaredField.setAccessible(true);
        declaredField.set(val, 42);
    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:57:00.027

它被称为*按值传递*。当您将某个对象传递给圆顶方法时，Java 会创建对该对象的引用副本。如果您在进入方法主体后立即检查对象的哈希码，它将与传递对象的哈希码相同。但是当您在方法内部更改它时，对象会更改并且引用不再指向同一个对象。

**编辑**：代码示例

```
public class TestPass {

    public static void main(String[] args) {
        String ss= "sample";
        System.out.println("Outside method: "+ss.hashCode());
        method(ss);

    }

    static void method(String s){
        System.out.println("Inside method: "+s.hashCode());
        s+='!';
        System.out.println("Inside method after object change: "+s.hashCode());
    }

} 
```

输出：

```
Outside method: -909675094
Inside method: -909675094
Inside method after change: 1864843191 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:03:13.233

Java中作为参数的对象通过引用副本作为参数传输-因此，如果您通过引用副本更改对象-您将更新对象。

在您的`upd(Integer val)`方法的情况下，您创建一个新`Integer`对象，以便引用副本现在指向一个新对象，而不是旧对象。因此更改该对象不会影响原始对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:51:33.050

```
man.name = "Name"; 
```

您实际上是在此处更改同一对象中的某些内容，而不是像在 Integer 中那样创建新对象。

# java - ListView 不会从 AsyncTask 刷新

> ID：10946525
> 
> 赞同：0
> 
> 时间：2012-06-08T09:46:11.650
> 
> 标签：java, android, listview, android-asynctask

我做了一个应用程序，每 5 秒刷新一次 WiFi 的状态。这是主要活动

```
public class WiFiList extends Activity {
/** Called when the activity is first created. */

private String screen;
private ListView nets;
private WifiManager wifi;
private NetAdapter nAdap;
SharedPreferences getPrefs;
Updater skaner;
List<ScanResult> scan;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String screen = getPrefs.getString("start", "list");
    wifi = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
    if(screen.equals("list")){
        setContentView(R.layout.main);
        nets = (ListView) findViewById(R.id.lvNets);
        wifi.startScan();
        scan = new ArrayList<ScanResult>();
        nAdap = new NetAdapter(getApplicationContext(), scan);
        nets.setAdapter(nAdap);
        nAdap.notifyDataSetChanged();
    }
    skaner = new Updater();
    skaner.execute();
}

public void refresh(){
    nAdap.notifyDataSetChanged();
}

class Updater extends AsyncTask<Void, Void, Void>{
    @Override
    protected Void doInBackground(Void... params) {
       // doSomething();
        while(wifi.isWifiEnabled()){
            int waiter = getPrefs.getInt("intervals", 5) * 1000;
            wifi.startScan();
            scan = wifi.getScanResults();
            publishProgress();
            try {
                Thread.sleep(waiter);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if(isCancelled()){
                break;
            }
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        refresh();
    }
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    skaner.cancel(true);
    super.onBackPressed();
} 
```

但是 ListView 不会刷新。当我运行调试器时，我看到它`refresh()`被调用并且列表每次都有不同的值。是什么阻止了它令人耳目一新？当我让它扫描 中的网络时`onCreate()`，它们会出现在列表中，所以我假设适配器是正确的，但无论如何这里是代码：

```
public class NetAdapter extends BaseAdapter{

private LayoutInflater mInflater;
List<ScanResult> res;

public NetAdapter(Context context, List<ScanResult> l){
    mInflater = LayoutInflater.from(context);
    res = l;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return res.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return res.get(arg0);
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.netitem, null);
        holder = new ViewHolder();
        holder.tvName = (TextView) convertView.findViewById(R.id.tvName);
        holder.tvFreq = (TextView) convertView.findViewById(R.id.tvFreq);
        holder.tvRssi = (TextView) convertView.findViewById(R.id.tvRssi);
        holder.ivState = (ImageView) convertView.findViewById(R.id.ivSignal);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }   
    holder.tvName.setText(res.get(position).SSID +" (" + res.get(position).BSSID + ")");
    holder.tvFreq.setText(Integer.toString(res.get(position).frequency)+"MHz");
    holder.tvRssi.setText(Integer.toString(res.get(position).level)+"dBm");
    holder.ivState.setImageResource(R.drawable.ic_launcher);
    return convertView;
}

static class ViewHolder{
    TextView tvName;
    TextView tvFreq;
    TextView tvRssi;
    ImageView ivState;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:14:54.267

Keep in mind that `startScan()` returns immediately and the availability of results is made known asynchronously when the results are available. so when you read the scan results straight after the call to `startscan()` the results are most likely not there hence you are sending blank information to the adapter.

So this covers why your view is not refreshing. So how do you make sure that you only read results when they are available. See recommendation below.

it will be better to use the BroadcastReceiver to receive the scan results. Register for `SCAN_RESULTS_AVAILABLE_ACTION`

so you run the scan in your async but don't do any refreshes from there just use it keep your loop running. you can use just a thread for that as well if you wanted to.

To update simply make a call back from your receiver back to your activity where you read the scan results.

I also noticed that your are calling `startscan()` in `onCreate` and then straight after you create an Async task to do the same again. what is the point of doing that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:33:19.737

如果我正确理解您的问题。

假设：1.您正在更新适配器中的值

解决方案：

要刷新列表视图，您需要做的就是：

```
your_list_adapter.notifyDataSetChanged(); 
```

我希望这有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:56:25.270

您应该使用下面的 AsyncTask 方法来更新列表视图。

```
protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     } 
```

# c# - 如何编写数据传输对象？

> ID：10946527
> 
> 赞同：0
> 
> 时间：2012-06-08T09:46:12.570
> 
> 标签：c#, .net, n-tier-architecture

在我的 N 层架构中，我有 DTO (AddressResponseDTO)，其中有大约 20 个属性。当表示层向我的业务层请求（AddressRequestContext）特定搜索操作的响应时，我会将此 DTO（AddressResponseDTO）发送给 PL。

但情况并非总是如此。地址搜索请求将被更改有时我只需要发送它的 3 个属性（比如说城市、邮编和地址计数），有时它可能是 5 个。所以我仍然可以拥有具有 20 个属性的相同 DTO 来重用所有类型的搜索要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:17:54.647

As the OP states that sometimes only 3 of the properties are used, there can be several solutions:

*   Create a DTO with all the properties, and specifiy special values to show which properties aren't specificed (i.e. use nullables, or special values). This requires lots of checkings in the code.

*   Create a DTO with the 3 properties. Inherit a second DTO from this and add all the remaining properties. Your methods can receive the base class as parameter and check if a base or derived class is received. A simple check like `if (myDto is DtoBase) ...` will quickly show which properties have been sent with the DTO. (This will work only for increasing number of properties, in a hierarchy of inherited DTOs)

*   If there are more than one possible grouping of properties of interest, you can use a DTO class for each group and:

    *   create a class which has this DTO as members. If you don't need them, leave them null. This way you can check each group with a simple `if (containerDto.Dto1 != null)`
    *   define as many DTO parameters as you need for each case.

I don't like the "special value" way, because it requires more code and it's more error prone. Besides, it makes you (de)serialize more info than neccessary on many occasions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:51:14.917

编写具有 20 个属性的 DTO 并没有什么坏处。

但是，如果属性可以组合在一起，最好将相关属性组合成一个实体，就像您可以将 City、Zip 组合成一个地址一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T09:51:00.150

是的，如果在这些情况下空属性或默认属性不会打扰您，您可以。从理论上讲，没有什么可以阻止您在所有情况下都使用一个类。

或者，您可以针对不同的用例创建多个 DTO 类定义。在这种情况下，我建议在这些类之间使用一些类层次结构。

我认为这取决于您以及您喜欢使用哪种方式的用例的复杂性。

# android - ActionbarSherlock：长按操作项显示 Toast？

> ID：10946529
> 
> 赞同：8
> 
> 时间：2012-06-08T09:46:22.827
> 
> 标签：android, actionbarsherlock, toast, long-click

长按操作项时，操作项下方会显示没有文字的 Toast。我可以禁用`Toast`吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T20:03:16.357

如果您省略标题或指定操作项应与文本一起显示，则长按不会吐司。否则，敬酒会增加对每个操作项所代表的内容的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T09:02:44.390

使用此答案获取操作栏视图：[https](https://stackoverflow.com/a/21125631/555914) ://stackoverflow.com/a/21125631/555914 我用它来禁用吐司：

```
View actionBar = AppUtils.getActionBarView(getActivity());
        if(actionBar!=null) {
            View item = actionBar.findViewById(id);
            if(item!=null) {
                item.setOnLongClickListener(null);
            }
        } 
```

虽然我不建议禁用此功能，但有时设计师出于审美原因想要一些东西......

# ios - ios中传输文件如何使用TCP套接字（stream-out-in）

> ID：10946532
> 
> 赞同：1
> 
> 时间：2012-06-08T09:46:50.933
> 
> 标签：ios, tcp, client-server, transfer

`enter code here`我通过 TCP 套接字从两个设备 (ios) 写入应用程序传输数据。我使用 NSString 成功，我尝试使用图像文件。

```
CODE SEND DATA :
NSString* docsDir;
NSArray*  dirPaths;

dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
filePath = [[NSBundle mainBundle] pathForResource:@"image1.png" ofType:@""];
NSFileManager * filemgr = [NSFileManager defaultManager];
if ([filemgr fileExistsAtPath:filePath] == YES)
{
    NSLog(@"OKie");
}

UInt64 offset = 0;
UInt32 chunkSize = 1024;

NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:filePath];
NSAutoreleasePool *autoreleasePool = [[NSAutoreleasePool alloc] init];
NSFileManager *fm = [NSFileManager defaultManager];
NSLog(@"%llu", [[fm attributesOfItemAtPath:[filePath stringByStandardizingPath] error:NULL] fileSize]);
chunkSize = [[fm attributesOfItemAtPath:[filePath stringByStandardizingPath] error:NULL] fileSize];
NSData *data = [handle readDataOfLength:chunkSize];

NSLog(@"Start send");

while ([data length] > 0 ) {        
    NSLog(@"sending");        

    autoreleasePool = [[NSAutoreleasePool alloc] init];   
    const uint8_t *bytes = (const uint8_t*)[data bytes];
    if([_outStream write:bytes maxLength:sizeof(const uint8_t)] == -1)
    {
        break;
    }
    offset += [data length];
    [handle seekToFileOffset:offset];
    data = [handle readDataOfLength:chunkSize];
    NSLog(@"%d",[data length]);
}

NSLog(@"Send Finish.");

[handle closeFile];
[autoreleasePool release];

CODE RECEIVE DATA 

 - (void) stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode
    {
        switch(eventCode) {
            case NSStreamEventOpenCompleted:
            {
                [self destroyPicker];

                [_server release];
                _server = nil;

                if (stream == _inStream)
                    _inReady = YES;
                else
                    _outReady = YES;

                if (_inReady && _outReady) {
                    NSLog(@"Connected");
                }
                break;
            }
            case NSStreamEventHasBytesAvailable:
            {
                NSString* docsDir;
                NSArray*  dirPaths;
                dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                 docsDir = [dirPaths objectAtIndex:0];
                filePath = [docsDir stringByAppendingPathComponent:@"image12.png"];
                if (stream == _inStream) {
                    NSLog(@"packet");
    //              uint8_t b;
                    uint8_t *Buffer;
                    NSUInteger length;
                    //uint8_t buf[1024];
    //                unsigned int len = 0;             
                    [(NSInputStream *)stream getBuffer:&Buffer length:&length];
    //                len = [_inStream read:&b maxLength:sizeof(uint8_t)];
                    NSData * data = [NSData dataWithBytes:&Buffer  length:6957];

                    NSLog(@"Entering Loop.");

                        if ([data length] > 0) 
                        {

                            NSFileHandle *file;
                            file = [NSFileHandle fileHandleForWritingAtPath: filePath];
                                //file = [NSFileHandle fileHandleForUpdatingAtPath: filePath];

                            if (file == nil)
                            {
                                     NSLog(@"Failed to open file");
                                    [data writeToFile: filePath atomically: YES];
                                NSFileManager *fm = [NSFileManager defaultManager];
                                NSLog(@"%llu", [[fm attributesOfItemAtPath:[filePath stringByStandardizingPath] error:NULL] fileSize]);
                            }
                            else
                            {
                                [file seekToEndOfFile];                            
                                [file writeData: data];                            
                                [file closeFile];
                                NSFileManager *fm = [NSFileManager defaultManager];
                                NSLog(@"%llu", [[fm attributesOfItemAtPath:[filePath stringByStandardizingPath] error:NULL] fileSize]);
                            }    
                        }
    //                }
                    NSLog(@"Exited Loop.");              

                }
                break;
            }
            case NSStreamEventErrorOccurred:
            {
                [self _showAlert:@"Error encountered on stream!"];          
                break;
            }

            case NSStreamEventEndEncountered:
            {

                UIAlertView *alertView;

                //Notify all tap views
    //          for(view in array)
    //              [view touchUp:YES];

                alertView = [[UIAlertView alloc] initWithTitle:@"Peer Disconnected!" message:nil delegate:self cancelButtonTitle:nil otherButtonTitles:@"Continue", nil];
                [alertView show];
                [alertView release];

                break;
            }
        }
    } 
```

*注意 fileSize = 6957（文件 image1.png）。我检查文件 image12.png 已写入并且大小 = 6957；（检查服务器已发送并且数据已发送到客户端 6957 字节）。问题我无法将其作为图像文件读取。（不是图片）。-link down 项目发送-接收 NSString（聊天）：[http](http://www.mediafire.com/?f80if0y2x3lcoea) ://www.mediafire.com/? f80if0y2x3lcoea -link down 项目发送-接收图像（问题）：[http](http://www.mediafire.com/?d2l9fl63i176m2z) ://www.mediafire.com/?d2l9fl63i176m2z （我从 dev.apple 的 witap 编辑）希望你能帮助我

# ios - iOS AVFoundation - 以 60 fps 将视频转换为图像

> ID：10946534
> 
> 赞同：5
> 
> 时间：2012-06-08T09:46:56.317
> 
> 标签：ios, video, avfoundation

我正在尝试以 60fps 的速度将整个视频转换为一系列图像，这意味着每秒视频生成 60 张图像...

为此，我正在使用 AVAssetImageGenerator 和 generateCGImagesAsynchronouslyForTimes 方法......

事情进展顺利，只是我在批处理执行时间方面遇到了严重的性能问题（13 秒视频大约需要 5 分钟）......

此外，在以下大小 CGSizeMake(512, 324) 之上，我遇到崩溃...

有没有人已经有过这种处理的经验并且知道如何减少执行时间以及能够以更高分辨率提取图像？

下面是我正在测试的代码...

```
NSURL *movieURL = [NSURL fileURLWithPath:getCaptureMoviePath()];

AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:movieURL options:nil];
AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc]  initWithAsset:asset];
generator.appliesPreferredTrackTransform=TRUE;
generator.requestedTimeToleranceAfter=kCMTimeZero;
generator.requestedTimeToleranceBefore=kCMTimeZero;
NSMutableArray *thumbTimes=[NSMutableArray arrayWithCapacity:asset.duration.value];

for(int t=0;t < asset.duration.value;t=t+2) {
    CMTime thumbTime = CMTimeMake(t, asset.duration.timescale);
    NSLog(@"Time Scale : %d ", asset.duration.timescale);
    NSValue *v=[NSValue valueWithCMTime:thumbTime];
        [thumbTimes addObject:v];
}
NSLog(@"thumbTimes array contains %d objects : ", [thumbTimes count]);
[asset release];
AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error) {
    if (result != AVAssetImageGeneratorSucceeded) {
        NSLog(@"couldn't generate thumbnail, error:%@", error);
    } else {
        NSLog(@"actual time: %lld/%d (requested: %lld/%d)",actualTime.value,actualTime.timescale,requestedTime.value,requestedTime.timescale);
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"yyyyMMdd-HHmmss"];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filename = [NSString stringWithFormat:@"%@.png", [formatter stringFromDate:[NSDate date]]];
        NSString *filepath = [documentsDirectory stringByAppendingPathComponent:filename];
        CFURLRef url = (CFURLRef)[NSURL fileURLWithPath:filepath];
        CGImageDestinationRef destination = CGImageDestinationCreateWithURL(url, kUTTypePNG, 1, NULL);
        CGImageDestinationAddImage(destination, im, nil);
        if (!CGImageDestinationFinalize(destination)) {     
            NSLog(@"Failed to write image to %@", filepath);
        }
        CFRelease(destination);
    }
    //[generator release];
};
CGSize maxSize = CGSizeMake(512, 324);
generator.maximumSize = maxSize;

[generator generateCGImagesAsynchronouslyForTimes:thumbTimes completionHandler:handler]; 
```

提前谢谢你，

j.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-06T12:19:55.727

嘿@Sooriah Joel 尝试使用以下代码。它对我来说很好。

```
- (void)generateCMTimesArrayOfAllFramesUsingAsset:(AVURLAsset *)asset
{
    if (cmTimeArray.count>0) {
        [cmTimeArray removeAllObjects];
    }
    //Generate all frames present in video
    for(int t=0;t < asset.duration.value;t++) {
        CMTime thumbTime = CMTimeMake(t,asset.duration.timescale);
        NSValue *v=[NSValue valueWithCMTime:thumbTime];
        [cmTimeArray addObject:v];
    }
    NSLog(@"Array of time %@ count = %d",cmTimeArray, cmTimeArray.count);
    //NSLog(@"Array count = %d",cmTimeArray.count);
}

- (void)generateCMTimesArrayOfFrames:(int)framesInterval UsingAsset:(AVURLAsset *)asset
{
    int videoDuration = ceilf(((float)asset.duration.value/asset.duration.timescale));
    NSLog(@"Video duration %lld seconds timescale = %d",asset.duration.value,asset.duration.timescale);
    if (cmTimeArray.count>0) {
        [cmTimeArray removeAllObjects];
    }
    //Generate limited frames present in video
    for (int i = 0; i<videoDuration; i++)
   {
       int64_t tempInt = i;
       CMTime tempCMTime = CMTimeMake(tempInt,1);
       int32_t interval = framesInterval;
       for (int j = 1; j<framesInterval+1; j++)
       {
            CMTime newCMtime = CMTimeMake(j,interval);
            CMTime addition = CMTimeAdd(tempCMTime, newCMtime);
            [cmTimeArray addObject:[NSValue valueWithCMTime:addition]];
       }
   }
   NSLog(@"Array of time %@ count = %d",cmTimeArray, cmTimeArray.count);
   //NSLog(@"Array count = %d",cmTimeArray.count);
}

- (void)generateThumbnailsFromVideoURL:(AVURLAsset *)videoAsset
{
    //Generate CMTimes Array of required frames
    //1.Generate All Frames
    //[self generateCMTimesArrayOfAllFramesUsingAsset:asset];

    //2.Generate specific frames per second
    [self generateCMTimesArrayOfFrames:30 UsingAsset:videoAsset];

    __block int i = 0;
    AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
    if (result == AVAssetImageGeneratorSucceeded) {
        [framesArray addObject:[UIImage imageWithCGImage:im]];
    }
    if (result == AVAssetImageGeneratorFailed) {
        NSLog(@"Failed with error: %@ code %d", [error localizedDescription],error.code);
    }
    if (result == AVAssetImageGeneratorCancelled) {
        NSLog(@"Canceled");
    }

    i++;
    imageIndex = i;

    if(i == cmTimeArray.count) {
        //Thumbnail generation completed
    }
};

    // Launching the process...
    self.generator = [[AVAssetImageGenerator alloc] initWithAsset:videoAsset];
    self.generator.apertureMode = AVAssetImageGeneratorApertureModeCleanAperture;
    self.generator.appliesPreferredTrackTransform=TRUE;
    self.generator.requestedTimeToleranceBefore = kCMTimeZero;
    self.generator.requestedTimeToleranceAfter = kCMTimeZero;
    self.generator.maximumSize = CGSizeMake(40, 40);
    [self.generator generateCGImagesAsynchronouslyForTimes:cmTimeArray completionHandler:handler];
} 
```

# java-me - 显示“NoClassDefinationFound for java/util/Comparator”虽然将 jre 添加到构建路径

> ID：10946541
> 
> 赞同：1
> 
> 时间：2012-06-08T09:47:25.600
> 
> 标签：java-me, java, s60-5th-edition

我在win7上使用j2me + S60 symbian SDK，最初我安装了jdk6和IDE（Eclipse），然后我安装了SDK S60。但正如您所知，j2me 仅支持项目的 1.3 合规级别，所以我下载了 jdk1.3.1_28 并将其安装到首选项 -> Java -> installJREs。

所以现在它将添加到新项目的构建路径中，但如果我使用 Comparator (java.util.Comparator) 类它不会发生它要求我添加 1.3 jre 来构建路径。

我做到了，但仍然显示“ NoClassDefinationFound for java/util/Comparator ”的错误。

如果我删除了添加的参考库（jre1.3.1）然后在类（我使用过的 Hashmap、Comparator、StringTokenizer）上显示错误，提供创建类的建议或要求添加 jre1.3.1 以构建项目路径。

我不明白为什么会这样..请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:48:38.407

您尝试使用的某些类不是 Java ME 的一部分。您必须注意CLDC和MIDP版本以及它们带来的类。

如果您想使用 Eclipse 开发 Java ME 应用程序，您应该使用 Pulsar [http://www.eclipse.org/pulsar/](http://www.eclipse.org/pulsar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:09:47.813

请查看此链接，它可能会有所帮助

JDK不是J2ME的一部分，所以没有包含所有的api，必须使用J2ME CDC API来包含它们，它基本上基于J2SE 1.3 API

[http://jcp.org/aboutJava/communityprocess/review/jsr036/J2ME_CDC_Specification.html](http://jcp.org/aboutJava/communityprocess/review/jsr036/J2ME_CDC_Specification.html)

# ruby-on-rails - 更新现有的 Rails 应用程序以使用 Twitter Bootstrap？

> ID：10946542
> 
> 赞同：1
> 
> 时间：2012-06-08T09:47:25.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我有一个围绕 Themeforest 模板构建的现有应用程序，该模板几乎可以启动了，但是，布局存在问题和一些跨浏览器问题。通过在我从头开始构建的其他应用程序中使用 Twitter Bootstrap 的经验，我想将此应用程序转移到使用 Bootstrap。

有谁知道迁移东西是否有安全且相对轻松的方法？我从我使用脚手架的其他应用程序中知道，sass 文件生成的引导程序样式混乱，所以我很确定使用现有应用程序安装引导程序会导致各种噩梦。

简而言之，谁能提出最好的方法来抛弃我的旧模板布局/样式，然后迁移到引导程序而不会使应用程序无用？如果我能以某种方式运行并发版本，然后在我高兴的时候切换，那就太好了，这一切都在新的“外观”中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:31:15.383

你在用 git 做版本控制吗？如果是这样，您可以克隆您的本地存储库：

`$ git clone existing_repo bootstrapped_repo`

然后用新的存储库来破解你的心内容。当我最近将一个应用程序从 Blueprint 切换到 Bootstrap 时，它相当简单；我使用了 twitter-bootstrap-rails gem，删除了 Blueprint 和任何脚手架生成的 css 的所有痕迹，并经历了应用新类等。主要的痛苦在于必须根据新的网格系统重构应用程序。

**编辑：**无论您决定采用哪种方法，您都将面临维护新开发、补丁等的问题。无论这一切是否都在应用程序的同一个实例中，您必须决定是冻结其他开发还是同时进行。

另一个可能适合正在进行开发的开发模型的选项是分支您的存储库并在该分支中进行引导工作，然后在完成后将其与您的主分支合并。这样，您应该能够在 Bootstrapping 项目中运行并发开发。

成功的 git 分支模型有很多东西：

*   [http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)
*   这是一个视频： http: [//krasimrtsonev.com/blog/article/Git-flow-a-nice-Git-branching-model](http://krasimirtsonev.com/blog/article/Git-flow-a-nice-Git-branching-model)

希望有帮助。

# javascript - 用户关闭地理位置弹窗时如何处理

> ID：10946543
> 
> 赞同：2
> 
> 时间：2012-06-08T09:47:38.687
> 
> 标签：javascript, html, geolocation

我使用`HTML5`地理位置来跟踪用户在我的应用程序中的位置。

我能够处理几乎所有情况，例如当他拒绝许可时，当他允许许可时，超时甚至还会发生一些错误。但是当用户关闭弹出框时，我怎么能以编程方式知道用户关闭了弹出框？我想处理这种情况/案例。同样，在 Firefox 中，当他单击“不是现在”选项时。我想处理这两种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:59:41.550

当用户关闭弹出框时，您可以在弹出框中提出自定义功能！前提是弹出框是自己写的。

第二种情况的解决方案是您可以为“Not now”选项准备一个点击事件。

# wcf - WCF 监听服务总线

> ID：10946549
> 
> 赞同：0
> 
> 时间：2012-06-08T09:47:56.237
> 
> 标签：wcf, azure

我是 WCF 的新手，并且在找到解决问题的方法时遇到了问题。我设置了处理一些逻辑（简单的数据库处理）的 WCF。然后我有一个网页（ASP.NET），它从 WCF 获取数据（并将数据发送到 WCF）。现在我正在尝试使用 Azure 服务总线将数据发送到 WCF。当我浏览 ASP.NET 网站时，它工作正常。它的工作原理是这样的： 1，客户端应用程序将数据发送到服务总线。2、ASP.NET网页从Service Bus中读取数据。3、ASP.NET向WCF发送数据。4、WCF更新数据库。一切正常。但是，我希望 WCF 不断收听服务总线。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:56:07.653

在这种情况下，您有 2 个选项：

*   使用服务总线队列的 WCF 端点：http: [//blogs.msdn.com/b/tomholl/archive/2011/10/07/using-service-bus-queues-with-wcf.aspx](http://blogs.msdn.com/b/tomholl/archive/2011/10/07/using-service-bus-queues-with-wcf.aspx)
*   使用服务总线中继：[https ://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/)

根据您的情况，您将使用这些选项之一。第一个场景使用排队。如果您的 WCF 服务因任何原因不可用，您的客户端仍将继续工作（消息被传递到队列并由 WCF 服务在可用时提取）。

第二种方案将在您的客户端和 WCF 服务之间建立一座桥梁（可以在本地、在其他数据中心......）。由于它是直接连接，因此您可以收到响应。但请记住，如果您的 WCF 服务处于脱机状态，您的客户端将收到异常，您需要处理它。

# php - PHP中来自必需/包含文件的变量变量

> ID：10946551
> 
> 赞同：3
> 
> 时间：2012-06-08T09:47:59.790
> 
> 标签：php, class-method, require-once, variable-variables

我正在编写一个 MVC 框架（为了学习和发现，而不是实际打算使用它），我遇到了一个小问题。

我有一个`config.php`文件：

```
$route['default'] = 'home';

$db['host'] = 'localhost';
$db['name'] = 'db-name';
$db['user'] = 'user-name';
$db['pass'] = 'user-pass';

$enc_key = 'enc_key' 
```

我通过`boot`类中的静态方法加载这些：

```
public static function getConfig($type) {
    /**
     * static getConfig method gets configuration data from the config file
     *
     * @param string $type - variable to return from the config file.
     * @return string|bool|array - the specified element from the config file, or FALSE on failure
     */
    if (require_once \BASE . 'config.php') {
        if (isset(${$type})) {
            return ${$type};
        } else {
            throw new \Exception("Variable '{$type}' is undefined in " . \BASE . "config.php");
            return FALSE;
        }
    } else {
        throw new \Exception("Can not load config file at: " . \BASE . 'config.php');
        return FALSE;
    }
} 
```

然后像这样加载路线：

```
public function routeURI($uri) {
    ...
    $route = $this::getConfig('route');
    ...
} 
```

捕获异常：

```
"Variable 'route' is undefined in skeleton/config.php" 
```

现在，如果我`config.php`像这样制作文件，它工作正常

```
$config['route']['default'] = 'home'
... 
```

并像这样更改方法中的两行：

```
if (isset($config[$type])) {
        return $config[$type]; 
```

我也尝试过使用`$$type`而不是`${$type}`同样的问题。

有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:54:10.913

正如所写，这个函数只能被调用一次，因为它使用`require_once`并且在随后的调用中你将不再引入定义的局部变量`config.php`。我怀疑您在第二次调用`getConfig()`.

# visual-studio-2010 - VS2010 负载测试运行准备和验证一次

> ID：10946556
> 
> 赞同：2
> 
> 时间：2012-06-08T09:48:11.780
> 
> 标签：visual-studio-2010, load-testing

我们有一个运行 100 个并发用户的负载测试。我们还有“准备”和“验证”测试，我们希望在整个负载测试的开始和结束时只运行一次——而不是针对负载测试中的每个模拟用户 (*100)。

谁能建议最简单的配置方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:47:36.637

您可以创建一个[负载测试插件](http://msdn.microsoft.com/en-us/library/ms243153%28v=vs.100%29.aspx)并使用`LoadTestStarting`&`LoadTestFinished`事件来调用您想要的方法：

```
public class Plugin : ILoadTestPlugin
{
    private LoadTest _loadTest;

    public void Initialize(LoadTest loadTest)
    {
        _loadTest = loadTest;
        _loadTest.LoadTestStarting += new System.EventHandler(loadTest_LoadTestStarting);
        _loadTest.LoadTestFinished += new System.EventHandler(loadTest_LoadTestFinished);
    }

    void loadTest_LoadTestStarting(object sender, System.EventArgs e)
    {
        //call your prepare method
    }

    void loadTest_LoadTestFinished(object sender, System.EventArgs e)
    {
        //call your verify method
    }
} 
```

# c# - 绑定 List 的 ObservableCollection

> ID：10946562
> 
> 赞同：2
> 
> 时间：2012-06-08T09:48:31.987
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 应用程序中，我有一个带有 ContentItems 绑定的列表框：

```
private ObservableCollection<ContentItemViewModel> _contentItems;

public ObservableCollection<ContentItemViewModel> ContentItems
{
    get { return _contentItems; }
} 
```

```
 <ListBox x:Name="ContentListBox"   Margin="0,117,12,0"  VirtualizingStackPanel.VirtualizationMode="Standard" Logic1:TiltEffect.IsTiltEnabled="True" ItemsSource="{Binding ContentItems}"   Tap="ContentListBox_Tap" MinHeight="656"  >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="vertical" >
                <Grid Height="{Binding ItemHeight}" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Image   Grid.Column="0"  x:Name="itemIco1"  Width="Auto" Height="Auto" HorizontalAlignment="Left" Source="{Binding IconURL}" Stretch="Fill" CacheMode="BitmapCache" VerticalAlignment="Top" Margin="5,5,5,5" Visibility="Visible"/>
                    <ListBox IsHitTestVisible="False" Grid.Column="1"  VerticalAlignment="Center"  >
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <TextBlock x:Name="ContentCategoryTitle" Height="70" Text="{Binding ContentTitle}" Width="460"  Margin="5,34,0,0"  TextTrimming="WordEllipsis" TextWrapping="NoWrap"    FontSize="28" FontFamily="Segoe WP Semibold"   Foreground="#FFF7F7F7"  VerticalAlignment="Bottom" />
                    </ListBox>
                </Grid>
                <Rectangle Fill="#FF585858" Height="1" Margin="0,0,0,0"  Width="460" VerticalAlignment="Bottom" HorizontalAlignment="Left" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

是否可以绑定不是`ObservableCollection<ContentItemViewModel>`，而是 - `ObservableCollection<List<ContentItemViewModel>>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:53:25.720

是的，这是可能的，如果你有一个集合。或者为什么不这样做？

```
ObservableCollection<ObservableCollection<ContentItemViewModel>> 
```

如果您希望您的 UI 收到关于您的子集合的集合更改的通知。

**更新**

例如：

*查看模型*

```
public ObservableCollection<ObservableCollection<ContentItemViewModel>> ContentItems
{
   get { return _contentItems; }
   set { _contentItems = value; // Notify of property change here, this allows you to change the ContentItems reference after view model construction }
}

public MyViewModel()
{
    // Populate content items
    this.ContentItems = new ObservableCollection 
          {
              new ObservableCollection { new ContentItemViewModel() },
              new ObservableCollection { new ContentItemViewModel(), new ContentItemViewModel() }
          };
} 
```

*看法*

```
<ListBox ItemsSource="{Binding ContentItems}" ...>
   <ListBox.ItemTemplate>
      <DataTemplate>
         <Grid>
            <ListBox ItemsSource="{Binding}">
               <ListBox.ItemTemplate>
                 <DataTemplate>
                    <Grid>
                       <TextBlock Text="{Binding MyContentItemViewModelProperty}" />
                    </Grid>
                 </DataTemplate>
               </ListBox.ItemTemplate>
            </ListBox>
         </Grid>
      </DataTemplate>
    <ListBox.ItemTemplate>
 </ListBox> 
```

# java - Java 线程同步 - Thread.sleep() 方法无法正常工作

> ID：10946565
> 
> 赞同：4
> 
> 时间：2012-06-08T09:48:39.260
> 
> 标签：java, multithreading, synchronization, sync

我听说，sleep() 将锁定当前同步方法/块但是在这里，当我在线程 1 上调用 sleep() 时，线程 2 能够访问同一个块？谁能解释一下？

## 主.java

```
public class Main {     
    public static void main(String args[])
    {
        Thread1 t1 = new Thread1();
        Thread2 t2 = new Thread2();
        System.out.println("going to start t1");
        t1.start();
        System.out.println("going to start t2");
        t2.start();

    }

} 
```

==================================================== ====================

## Thread1.java

```
public class Thread1 extends Thread{

    public void run() { 
        Syncc s1 = new Syncc();
        s1.me("T1:");
    }   

} 
```

==================================================== ====================

## 线程2.java

```
public class Thread2 extends Thread{

    public void run() { 
        Syncc s2 = new Syncc();
        s2.me("T2:");
    }   
} 
```

==================================================== ====================

## 同步.java

```
public class Syncc{

    public void me(String s){
        synchronized(this){
        for(int i=0; i<=5; i++)
        {
            System.out.println(s+" "+" "+i);
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {              
                e.printStackTrace();
            }
        }
    }
}
} 
```

===========================================

## 输出：

```
going to start t1
going to start t2
T2:  0
T1:  0
T2:  1
T1:  1
T1:  2
T2:  2
T1:  3
T2:  3
T1:  4
T2:  4
T2:  5
T1:  5 
```

但是根据 sleep() 方法，它不应该解锁当前同步块吗？如果是这样，输出应该是..

开始t1 开始t2

```
T1:  0
T1:  1
T1:  2
T1:  3
T1:  4
T1:  5
T2:  0
T2:  1
T2:  2
T2:  3
T2:  4
T2:  5 
```

我的意思是在线程 1 执行之后，只有线程 2 应该启动对吗？什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T09:54:18.660

`Syncc`这是因为您在这里有两个不同的 in play实例。每个线程都有自己的`Syncc`.

尝试对单个实例执行相同操作。您还可以在静态上下文上同步并尝试。

模拟、修改`Thread1`和`Thread2`接受`Syncc`.

```
public class Thread1 extends Thread {
    private Syncc syncc;

    public Thread1(Syncc syncc) {
        this.syncc = syncc;
    }

    public void run() { 
        this.syncc.me("T1:");
    }   
} 
```

然后您可以这样启动它们：

```
public static void main(String args[]) {
    Syncc syncc = new Syncc();

    Thread1 t1 = new Thread1(syncc);
    Thread2 t2 = new Thread2(syncc);

    System.out.println("going to start t1");
    t1.start();
    System.out.println("going to start t2");
    t2.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:58:56.323

**睡眠、让步和加入规则**

*   睡眠用于延迟执行一段时间，当线程进入睡眠状态时不会释放任何锁。

*   睡眠线程保证至少在 sleep() 方法的参数中指定的时间内睡眠（除非它被中断），**但不能保证新唤醒的线程何时真正恢复运行。**

*   sleep() 方法是一个静态方法，它使当前正在执行的线程的状态休眠。一个线程不能告诉另一个线程休眠。

*   setPriority() 方法用于 Thread 对象，以赋予线程介于 1（低）和 10（高）之间的优先级，尽管不能保证优先级，并且并非所有 JVM 都识别 10 个不同的优先级 - 某些级别可能被视为有效平等的。

*   如果未明确设置，线程的优先级将与创建它的线程的优先级具有相同的优先级。

*   如果有相同优先级的可运行线程，yield() 方法可能会导致正在运行的线程退出。不能保证会发生这种情况，也不能保证当线程退出时会选择另一个线程来运行。线程可能会屈服，然后立即重新进入运行状态。

*   最接近保证的是，在任何给定时间，当线程运行时，它的优先级通常不会低于处于可运行状态的任何线程。如果高优先级线程进入runnable时低优先级线程正在运行，JVM通常会抢占正在运行的低优先级线程，将高优先级线程放入。

*   当一个线程调用另一个线程的 join() 方法时，当前运行的线程会一直等待，直到它加入的线程完成。将 join() 方法想象为：“嘿，线程，我想加入到你的末尾。完成后告诉我，这样我就可以进入可运行状态。”

[http://www.amazon.com/SCJP-Certified-Programmer-Java-310-065/dp/0071591060](https://rads.stackoverflow.com/amzn/click/com/0071591060)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:11:44.540

您已经创建了两个同步对象，每个对象对应一个线程。每个对象都有自己的我的副本。因此，当您启动每个线程时，线程使用 run 方法调用它自己的函数 me 副本。由于这两个线程仅作用于它们的副本，因此这就像单线程场景一样工作。如果您确实想测试多线程场景，则将方法设为静态（类级别方法）并应用类级别锁定。

**Thread1.java**

```
public class Thread1 extends Thread{

public void run() { 
    Syncc.me("T1:");
} 
```

}

**线程2.java**

```
public class Thread2 extends Thread{

public void run() { 
    Syncc.me("T2:");
} 
```

}

**同步.java**

```
public class Syncc{

public static void me(String s){
    synchronized(Syncc.class){
    for(int i=0; i<=5; i++)
    {
        System.out.println(s+" "+" "+i);
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e) {              
            e.printStackTrace();
        }
    }
} 
```

} }

# java - 如何获取调用者的（或调用者的调用者，或更深的调用堆栈）实例 ID - my.package.MyClass@3e7bfc04

> ID：10946574
> 
> 赞同：1
> 
> 时间：2012-06-08T09:49:22.203
> 
> 标签：java, call, stack-trace, aspectj

其实有两个问题。

第一个是 - 我怎样才能获得这样的 id (my.package.MyClass@3e7bfc04) 具有“this”（在方面内部，使用 pjp.getTarget() 来获取“this”）。

第二个是 - 如何在当前程序执行点（其他类的某些方法，或更深层次）获取调用者的实例 ID。我可以使用调用堆栈

```
StackTraceElement [] trace = Thread.currentThread().getStackTrace(); 
```

然后决定是否有我需要的来电者。然后我想获取调用者的实例ID，但不知道如何获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T09:54:07.507

您可以使用[Java 反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)和[StackTraceElement](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StackTraceElement.html)。

```
StackTraceElement[] elements = new Throwable().getStackTrace();

    String calleeMethod = elements[0].getMethodName();
    String callerMethodName = elements[1].getMethodName();
    String callerClassName = elements[1].getClassName();

    System.out.println("CallerClassName=" + callerClassName + " , Caller method name: " + callerMethodName);
    System.out.println("Callee method name: " + calleeMethod); 
```

# asp.net-mvc - 如何在使用之前在控制器中编辑 Html.TextBoxFor 的值？

> ID：10946575
> 
> 赞同：0
> 
> 时间：2012-06-08T09:49:24.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html.textboxfor

我正在 MVC 3 中处理我的项目并寻找一种方法，可以将此功能添加到我的所有 Html.TextboxFor：
当用户键入“foo”并提交表单时，在控制器级别我通过模型将它作为“fuu”例如。

我需要这个功能来用其他一些字符替换一些 Unicode 字符。

让我在 View 和 Controller 中显示我的代码：

看法：

```
@Html.TextBoxFor(model => model.Title) // user will type "foo", in TitleTexbox! 
```

控制器：

```
 [HttpPost]
    public virtual ActionResult Create(MyModel model)
    {
     var x = model.Title;
     //I need variable x have 'fuu' instead of 'foo', replaceing "o" by "u"
     //...
    } 
```

我应该为 Html.TextboxFor 写一个覆盖吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:27:12.130

正如我从您的代码中了解到的那样，您希望模型在传递给您的控制器操作时准备好（已处理）。要完成此操作，唯一的方法是使用模型绑定。但这种方法仅限于特定类型/类/模型/视图模型或任何您命名的方法。

您可以创建自己的 modelBinder 为：

```
 public class MyCustomModelBinder : DefaultModelBinder
    {
          public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 
          {
              var request = controllerContext.HttpContext.Request;
              var myModel= (MyModel ) base.BindModel(controllerContext, bindingContext) ?? new MyModel ();

              myModel.Title.Replace('o','u');

              return myModel;
         }
    } 
```

然后您在 Global.asax 中注册您的自定义模型绑定器

```
 ModelBinders.Binders.Add(typeof(MyModel),new MyCustomModelBinder()); 
```

像这样改变你的行为：

```
 [HttpPost]
    public virtual ActionResult Create([ModelBinder(typeof(MyCustomModelBinder))] MyModel model)
    {
     var x = model.Title;
     //here you will have the modified version of your model 
     //...
    } 
```

祝你好运。

# asp.net - If Container.DataItem.BooleanValue Then

> ID：10946576
> 
> 赞同：0
> 
> 时间：2012-06-08T09:49:24.490
> 
> 标签：asp.net, vb.net, if-statement, repeater

在 VB.NET 中工作，在中继器中。如果数据项的字段设置为 true，我只想显示部分转发器。

我正在努力写一行来实现这一点，但我正在尝试这样做：

```
<% If '<%# Container.DataItem.IsLive%>' Then %>
   <asp:PlaceHolder ...
<% End If%> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:55:38.493

```
<asp:PlaceHolder runat="server" Visible='Eval("IsLive")'>
...
</asp:PlaceHolder> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:58:57.937

**您可以在 repeater1_ItemDataBound 事件中做到这一点：**

```
Private Sub repeater1_ItemDataBound(Sender As [Object], e As RepeaterItemEventArgs)
       ' This event is raised for the header, the footer, separators, and items.
       ' Execute the following logic for Items and Alternating Items.
       If e.Item.ItemType = ListItemType.Item OrElse e.Item.ItemType = ListItemType.AlternatingItem Then
              Dim PlaceHolder1 As PlaceHolder = DirectCast(e.Item.FindControl("PlaceHolder1"), PlaceHolder)
        If (e.Item.DataItem).IsLive Then
          PlaceHolder1.Visible = False
        End If
       End If
End Sub 
```

# jquery - 使用 jQuery 在一系列菜单中切换可见性的问题

> ID：10946581
> 
> 赞同：0
> 
> 时间：2012-06-08T09:49:43.677
> 
> 标签：jquery

编码有点乱，到处都是，所以请原谅我，但我急于尽快完成。现在有了那个小小的免责声明......

我被要求创建一个具有 3 层分隔的表单，您可以使用两个菜单进行导航 - 顶部的选项卡层用于导航第一级。然后侧菜单将允许用户向下导航问题字段，最后一级是问题的手风琴显示。必须以这种方式进行，我的客户固执地拒绝以另一种方式进行。它还必须完全兼容 IE6 ><

你可以在这里看到我的代码转储：[jsFiddle](http://fiddle.jshell.net/pPgzg/)

好吧。问题。首先，当单击顶部的选项卡时，您应该能够在我作为示例的两个选项卡之间导航，这在 jquery v.3 中有效，但现在它与另一个选项卡一起隐藏了当前选项卡。我不知道发生了什么。另一个与侧面菜单完全相同，而不是显示下一个选定的问题，它也只是隐藏它们。

我已经为此工作了很长时间，以至于我无法做出任何事情。如果有人能提供新的视角，或者至少在这里为我指明正确的方向，那就太好了。再次对我的代码状态感到抱歉，这是我第一次尝试这样的事情。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:06:53.373

似乎`tab`您传递给 selectedTab 的变量会在其前面添加完整的 url。所以 `#tab1`例如变成`http://fiddle.jshell.net/pPgzg/2/#tab1`了jsfiddle。

我为 selectedTab 添加了一个快速修复，似乎可以修复它。

[http://fiddle.jshell.net/pPgzg/2/](http://fiddle.jshell.net/pPgzg/2/)

* * *

我再次检查并发现如果您使用`.attr('href');`而不是`.prop('href');`.

另一件事，我认为也是造成几个问题的原因是，您有重复的 ID。ID 必须是唯一的。现在，例如，如果您这样做`$('#question1')`，则不知道将打开哪个问题。

# tsql - 如何遍历表，查找值并插入（如果存在）？

> ID：10946582
> 
> 赞同：0
> 
> 时间：2012-06-08T09:49:43.910
> 
> 标签：tsql

我有两个表：表 A ID Field1 ....

表 B ID 字段 2 字段 3 ...

我想通过表 B 循环，如果表 A 中存在具有相同 ID 的记录，则在表 A 中添加值 Field2 和 Field3。

我不知道怎么用 T-SQL 做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:02:58.797

此更新不需要使用循环构造，您可以通过使用集合操作以更简洁的方式解决它。如果我正确理解了这个问题，您想使用表 B 中的值[更新](http://msdn.microsoft.com/en-us/library/ms177523%28v=sql.105%29.aspx)表 A。使用如下查询：

```
UPDATE TableA
  SET TableA.Field2 = TableB.Field2, TableA.Field3 = TableB.Field3
  FROM TableB
  WHERE TableA.ID = TableB.ID 
```

您可能想在此查询中进行额外检查，以查看表 A 中字段 2 和 3 中的值，然后再替换它们。

（要首先测试此查询的结果，请从上面的 UPDATE 查询构建一个 SELECT 查询！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:54:02.660

```
SELECT CASE
    WHEN TableA.ID IS NULL THEN TableB.Field2
    ELSE TableB.Field3
END as FieldX
FROM TableB LEFT OUTER JOIN TableA
        ON TableA.ID = TableB.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:00:30.997

可能你可以像这样简单地做到这一点：

```
select tab2.id, (tab2.field2 + tab2.field3) as sumfield 
from tab2 join tab1 on tab2.id = tab1.id 
```

或者

```
select tab2.id, (tab2.field2 + tab2.field3) as sumfield 
from tab2 
join 
(select distinct id from tab1) tab1
on tab2.id = tab1.id 
```

# magento - 将分层导航添加到 magento 标签页面

> ID：10946593
> 
> 赞同：1
> 
> 时间：2012-06-08T09:50:34.383
> 
> 标签：magento, tags, layered-navigation

对于标签页面，我的意思是这种页面：

[http://demo.magentocommerce.com/tag/product/list/tagId/448/](http://demo.magentocommerce.com/tag/product/list/tagId/448/)

我已将以下代码添加到 mytheme/layout/tag.xml 行之后

```
<label>Tagged Products List</label> 
```

//添加的代码

```
<reference name="left">
    <block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/>
</reference> 
```

但分层导航不显示。感谢您的任何回答。

# php - 如何在php中创建图像

> ID：10946596
> 
> 赞同：-1
> 
> 时间：2012-06-08T09:50:45.627
> 
> 标签：php

我正在用 php 创建图像

代码

```
$src = array ("22.jpg","33.jpg","44.jpg","55.jpg","66.jpg","77.jpg");    
                $imgBuf = array (); 
                foreach ($src as $link) 
                { 
                   switch(substr ($link,strrpos ($link,".")+1)) 
                   { 
                       case 'png': 
                           $iTmp = imagecreatefrompng($link); 
                           break; 
                       case 'gif': 
                           $iTmp = imagecreatefromgif($link); 
                           break;                
                       case 'jpeg':            
                       case 'jpg': 
                           $iTmp = imagecreatefromjpeg($link); 
                           break;                
                   } 
                   array_push ($imgBuf,$iTmp); 
                } 

                $iOut = imagecreatetruecolor ("35","210") ; 

                imagecopy ($iOut,$imgBuf[0],0,0,0,0,imagesx($imgBuf[0]),imagesy($imgBuf[0])); 
                imagedestroy ($imgBuf[0]); 
                imagecopy ($iOut,$imgBuf[1],0,35,0,0,imagesx($imgBuf[1]),imagesy($imgBuf[1])); 
                imagedestroy ($imgBuf[1]); 
                imagecopy ($iOut,$imgBuf[2],0,70,0,0,imagesx($imgBuf[2]),imagesy($imgBuf[2])); 
                imagedestroy ($imgBuf[2]); 
                imagecopy ($iOut,$imgBuf[3],0,105,0,0,imagesx($imgBuf[3]),imagesy($imgBuf[3])); 
                imagedestroy ($imgBuf[3]); 
                imagecopy ($iOut,$imgBuf[4],0,140,0,0,imagesx($imgBuf[4]),imagesy($imgBuf[4])); 
                imagedestroy ($imgBuf[4]); 
                imagecopy ($iOut,$imgBuf[5],0,175,0,0,imagesx($imgBuf[5]),imagesy($imgBuf[5])); 
                imagedestroy ($imgBuf[5]);
                imagepng($iOut); 

            //header ( 'Content-type:image/png' );
                // save the img to directory 

                $char='0123456789';
                $length=10;
                $max_i=strlen($char)-1;
                $value='';
                for($j=0;$j<$length;$j++)
                {
                $value.=$char{mt_rand(0,$max_i)};
                }
                $imageid=$value; 
```

它在页面上给出错误

> ‰PNG IHDR#ÒOuî² CIDATxœíÖ]ŒdÇUðÿ9§êÞþ˜™]ïìÇlbc,ÀÐ†(@dQž @"$ƒ"<°E,XX `Y~ E D¼€"!ÂI’;Q$£°M¼ïzw½_3ÓÓÝ÷Ö×9<ôÌ¬óÄRê§V«Õ·»ÿU]uÏ)JÙ ‚Ì€˜7€wâÕ½«¯^»Óçþå™åfÈ¹-š© *6›çŸù¹÷ðêðÌ[í‰%üÈ]Ø†0‡8@@ÙL3¼Än‘×ãÞ«·žxôñ»×69àôú©e?ÊóÙÊx™’W+Ü”˜C1Vö4Üîowq÷zwë?ýI·u§,É~@½™@PF¼Ž'>ô»ÇýÚ‘áÊòêÒh8Hëá¬ Œ,eïÄ9îK ¡Lº½4ëºÙüÖ7Óä¿ø—Ø–€‡(™€b’ »øØ¹ß\K÷o¾ãÌúI&*‚lÙÁR4P£ÄEÕ‰P¢ó!Î}ë:ëEdÄ-gX_.ß¸òòök¯ûŸúöß£Mp~1'ç($àßo½-­ÿÀÛï][Z/1Ëloî½Ÿ‡PaÕa#¥›{4ÓÉ˜4—\Š9í%©FË'7ÓÕñÝîƒÅ_h¹@øNþÄû}ðØ­?6NsLªêü0ö¡q%ö#fÖ2²Óbð’´¨ªjS¸,¾GE.ì\x~÷ùO>ûØ x`°"*¶ñ±|äÄÚ™ñÊ±Év§Á4X‰¶·Óõ† S‹½€½Ž£QFècÅcŒ¡OH ˆ²ÝË¤Ï·ws›ë›'è$þûòþ:931þkû¸-Z;1Ÿv%ôÐ'c ß¸&Lûaëgq:Ó>Í•àÃñ`¼:;EŠÉHBL¸ºv<š ¤É€†§†Ç¿õ¥¯ŸýÉì');¾óÂ·7ëÜ' 9ö¥^H\C–Çäß¼ùæ%Ýž #µs¦áéptU–}±lST°F:£#úÃ£Ï}ù«g?HÊ Q<÷¥=5>–»b¢M¹uV †½8»<»úûŸ{ooa€xmïÓ|üÈÚÀ›Ï}/

我怎么能解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:52:40.170

您看到的是生成的图像的实际内容。您确实需要指定内容/类型，否则将假定为`text/plain`或`text/html`。您的图像似乎是PNG，所以

```
header("Content-type: image/png") 
```

应该足够了。我可以看到这条线被注释掉了——但它需要被包括在内。不过需要注意的是：它需要**在输出实际图像数据之前**进行，因此您需要将其移动到脚本的顶部（或至少在`imagephp`调用上方）。

**编辑**：如果要将生成的图像保存到文件中而不是将其输出到浏览器，则需要将第二个参数传递给`imagepng`函数：

```
imagepng($iOut, $myfilename) 
```

有关更多详细信息，请参阅[Imagephp 文档](http://php.net/manual/en/function.imagepng.php)

**编辑2：**如果您需要获取创建图像的内容以在其他地方使用，您可以使用这个技巧：

```
ob_start();
imagephp($iOut);
$image_data = ob_get_clean(); 
```

现在您在变量中获得了生成的图像数据，您可以继续执行您的脚本。

# xml - TYPO3 TV 从 1.3.7 升级到 1.7.0 后，FCE 内容元素字段不显示在后端

> ID：10946597
> 
> 赞同：0
> 
> 时间：2012-06-08T09:50:48.013
> 
> 标签：xml, data-structures, content-management-system, typo3, typoscript

我已经将 TYPO3 的扩展 TemplaVoilà 从 1.3.7 升级到 1.7.0，一切正常。但是现在在我的编辑页面模块中，我所有具有 eType“ce”（内容元素）字段的 FCE 将不再显示在后端。

我重新映射了我的 FCE，检查了数据结构，但没有错。

有人有想法吗？

这是我的 ce 字段的 xml

```
<field_fce_text type="array">
    <tx_templavoila type="array">
        <title>Texte</title>
        <sample_data type="array">
            <numIndex index="0"></numIndex>
        </sample_data>
        <eType>ce</eType>
        <preview>1</preview>
        <proc type="array">
            <int>0</int>
            <HSC>0</HSC>
            <stdWrap></stdWrap>
        </proc>
        <oldStyleColumnNumber>0</oldStyleColumnNumber>
        <enableDragDrop>1</enableDragDrop>
    </tx_templavoila>
    <TCEforms type="array">
        <config type="array">
            <type>group</type>
            <internal_type>db</internal_type>
            <allowed>tt_content</allowed>
            <size>5</size>
            <maxitems>200</maxitems>
            <minitems>0</minitems>
            <multiple>1</multiple>
            <show_thumbs>1</show_thumbs>
        </config>
        <label>Texte</label>
    </TCEforms>
</field_fce_text> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:27:45.350

解决方案很简单……我不得不重新映射所有 FCE

# jquery - 在rails中按id隐藏jquery对话框

> ID：10946598
> 
> 赞同：0
> 
> 时间：2012-06-08T09:50:50.390
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui, dialog

我有一个包含对象列表（@contacts）的索引页面，我需要能够使用 ajax 编辑弹出窗口中的每个@contact 条目。对象列表：

```
 <% @contacts.each do |contact| %>
    <div><%= contact.name %> | <%= link_to 'Edit', edit_contact_path(contact), :id => "edit_contact_dialog_link_#{contact.id}" %></div>
    <% @contact = contact %><%= render :template => "contacts/edit" %>
  <% end %> 
```

在这里，我为所有编辑链接添加了一个唯一的 ID。在以下方面做得很好`edit.html.erb`：

```
<div id="edit_contact_dialog_<%= @contact.id %>">
  <h1>Editing contact</h1>
  <%= render 'form' %>
</div> 
```

现在在索引页面上，我有一个联系人列表（带有唯一的编辑链接`edit_contact_dialog_link_ID`）和编辑表单（带有唯一的 div id `edit_contact_dialog_ID`）

我需要隐藏所有`edit_contact_dialog_ID`框并在每次`edit_contact_dialog_link_ID`单击时打开相应的对话框窗口，但不知道如何。

我的`contacts.js`：

```
 $("#edit_contact_dialog_(here i need a regexp or smthng?)").dialog({
    autoOpen: false,
    width: 455,
    modal: true
  });

  $("#edit_contact_dialog_link_???").click(function(){
    $("#edit_contact_dialog_???").dialog("open");
    return false;
  }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:57:53.710

使用类属性

```
$(".dialog").dialog({
    autoOpen: false,
    width: 455,
    modal: true
});

$(".edit_handler").click(function(){
    var id = $(this).attr('id');
    $("#edit_contact_dialog_" + id).dialog("open");
    return false;
}); 
```

# sql - SQL 列中的 XML：无法调用 nvarchar(max) 上的方法

> ID：10946600
> 
> 赞同：9
> 
> 时间：2012-06-08T09:50:56.827
> 
> 标签：sql, xml

我有一个 sql 查询，它在我的列名上出现错误，说“无法调用 nvarchar(max) 上的方法。

```
 SELECT [LEARNER_COURSE_XML_TEST].[XML_EX].Query('declare namespace
      x="http://tempuri.org/cmi.xsd";] (/x:cmi/x:core/x:time_taken)') 
      AS TimeTaken FROM [LEARNER_COURSE_XML_TEST] 
```

问题似乎集中在 [XML_EX].value 上，但我尝试了一些方法，包括更改列类型，但我终于摆脱了困境。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T10:00:18.750

听起来像是`XML_EX`类型`nvarchar(max)`。尝试将其更改为`xml`.

您也可以在查询中强制转换它，如下所示：

```
select  cast(lcxt.XML_EX as xml).query(...)
from    learner_course_xml_test lcxt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T10:22:33.853

谢谢你们的回复。事实证明我过于复杂了，因为我无法访问 SQL 表中的命名空间。然而，我确实首先将我的字段类型更改为 XML，所以感谢 Andomar。我的解决方案如下：

```
SELECT [LEARNER_COURSE_XML_TEST].[XML_EX].query('data(sco/cmicore/total_time)') AS  TimeTaken FROM [LEARNER_COURSE_XML_TEST] 
```

正如我所希望的那样，这提取了我的总时间。再次感谢。

# css - 如何使背景图像（或空跨度）的高度响应？

> ID：10946603
> 
> 赞同：1
> 
> 时间：2012-06-08T09:51:04.623
> 
> 标签：css, responsive-design

这可能是 html 标记

```
<header>
   <span> <!-- background image here -->  </span>
  <hgroup>
     <h1 class="testing">CSS3 and Compass Documentation</h1>
     <h2>here I am going to document my compass and CSS3 learning</h2>
  </hgroup>
</header>​ 
```

这将是我的 css 的集市：

```
header span {
    background: url(banner.gif) center 0 no-repeat;
    background-size: 100% auto;
    display: block;
    height: 170px;  /* maybe this is where it needs changing*/
    width: 100%; 
} 
```

一旦您开始缩小浏览器窗口（例如 iphone 尺寸），问题就开始了。图像缩小（如我所愿）但**高度仍然`170px`**`hgroup`在图像和内容之间留下更大的差距

我曾尝试使用`height: 100%`，但这根本不起作用（至少在这种情况下）。

如果您需要演示[http://jsfiddle.net/Jcp6H/](http://jsfiddle.net/Jcp6H/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:28:44.687

在这种情况下，您希望`<span>`根据（背景）图像的高度调整元素的大小。

我建议使用`<img>`标签而不是背景图像。

```
<header>
    <img src="http://movethewebforward.org/css/img/beanie-webasaurs.gif" alt="Webasaurs!" />
    <hgroup>
        <h1 class="testing">CSS3 and Compass Documentation</h1>
        <h2>here I am going to document my compass and CSS3 learning</h2>
    </hgroup>
</header>​ 
```

​在 CSS 样式中，你的图像是这样的：

```
header {
  max-width: 950px; 
}

header img{
    display: block;
    width: 100%;
}

  header h1 {
    color: #324a69;
    font-size: 3em;
    text-align: center;
    text-shadow: 1px 1px 0 white;
    position: relative; 
}

  header h2 {
    clear: both;
    color: #705635;
    text-shadow: 1px 1px 0 white;
    font-size: 2em;
    text-align: center; 
}​ 
```

很难根据背景图像来调整元素的高度...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:42:21.327

首先使用跨度内的图像，因为它更容易使用。

```
 <span><img src="banner.jpg" /></span> 
```

我试过这个作为一个例子，你可以用你需要的任何东西替换

```
header span img {
background: #960;
display: block;
max-height: 170px;
max-width:950px;
width: 100%;
height:100%; 
```

}

您需要做的就是设置一个最大高度和最大宽度，这样它们就会随着浏览器缩小而不会添加额外的空格。如果需要，您还可以设置最小高度等以阻止它变得太小。

试试看，看看是否适合你。

# sql - 如何编写查询以获取日志文件提供的数据库中每分钟的查询数

> ID：10946608
> 
> 赞同：0
> 
> 时间：2012-06-08T09:51:33.270
> 
> 标签：sql, sql-server-2008, reporting-services

表（日志分析器）结构是：

![日志表](../Images/14a8e03b6415f5a233fe90eae42f5876.png)

我想绘制一个显示每分钟请求数的折线图。我想编写一个查询，它显示包含以下信息的两列：

1.  日期：时：分
2.  请求数

我试图编写一个显示每小时请求的示例查询：

```
SELECT ( Str(Datepart(HOUR, TimeLog)) + '.00' ) AS 'From (hours)',
       ( Str(CASE
               WHEN Datepart(HOUR, TimeLog) + 1 = 24 THEN 00
               ELSE Datepart(HOUR, TimeLog) + 1
             END) + '.00' )AS 'To (hours)',
       Count(DISTINCT Request) AS 'Number Of Queries '
FROM   LogData
GROUP  BY Datepart(HOUR, TimeLog); 
```

这个问题是当我使用它`MINUTE`而不是`HOUR`它结合所有小时和天的分钟时，它只显示 60 行。我希望根据日期和时间将所有行分开。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:57:56.580

```
select  convert(nvarchar(16), TimeLog, 120) requestTime,
        count(*)
from    LogData
group by convert(nvarchar(16), TimeLog, 120)` 
```

# java - 我需要为手机编写程序

> ID：10946611
> 
> 赞同：-6
> 
> 时间：2012-06-08T09:51:39.450
> 
> 标签：java

假设它是一部手机，我想用 java 编写一个程序，我知道如何用 java 编程，但是我需要什么 IDE 或程序？

例如，如果我想编写一个程序，在其中编写一些文本，然后将该文本保存在数据库 SQL-lite 中，例如，你能给我一些可以下载的链接吗？

例如：NOKIA、SAMSUNG 等... - 支持 java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:01:52.393

首先，您需要检查手机的操作系统是否有 Java 的 SDK（源代码开发工具包）。目前可用的是Android、Blackberry OS 和Symbian。

例如，IOS 没有 JRE 实现，因此您不能用 Java 为它编写应用程序。老实说，我有点怀疑他们是否会在未来提供一个，因为他们似乎专注于 Objective C 的开发。

在您决定要针对哪个操作系统后，您需要下载 SDK。快速的谷歌搜索将为您提供所需的内容。

至于 IDE，它归结为支持和个人喜好。从经验来看，我只能谈谈Android开发。Google 决定为 Eclipse 提供官方支持（！！！）您也可以使用 Netbeans（通过使用 netbeans android 插件）甚至 IntelliJ，有很多选择。

# c# - 运行涉及远程对象的 nunit 测试会抛出错误 The operating system cannot run 。（来自 HRESULT 的异常：0x800700B6）

> ID：10946614
> 
> 赞同：0
> 
> 时间：2012-06-08T09:51:47.200
> 
> 标签：c#, .net, nunit, .net-remoting

我在 NUnit 中运行我的测试。但是在调试时，我检查了在访问任何远程对象时测试是否失败。我得到的错误是

> 操作系统无法运行。（来自 HRESULT 的异常：0x800700B6）

可能的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:26:43.920

我在使用两个不同版本的 OpenMP 时看到了这个问题。

还有一个类似问题的答案：[I am getting System.BadImageFormatException : The operating system cannot run exception while running unit tests](https://stackoverflow.com/q/10926227/90475)

# iphone - 从 UIVIEW+ipad 截图

> ID：10946615
> 
> 赞同：2
> 
> 时间：2012-06-08T09:51:48.140
> 
> 标签：iphone

我想截取我写的视图控制器的屏幕截图：-

```
- (UIImage *)captureScreenInRectWOScroll:(CGRect)captureFrame {    
    CALayer *layer;
    layer = self.view.layer;
    UIGraphicsBeginImageContext(captureFrame.size); 
    CGContextClipToRect (UIGraphicsGetCurrentContext(),captureFrame);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return screenImage; 
} 
```

我调用此方法的方式：-

```
UIImage *img_woscroll1 =[self captureScreenInRectWOScroll:CGRectMake(35,147,497,260)]; 
```

我想从下面的附图中截取地址的屏幕截图：- ![在此处输入图像描述](../Images/0dde5185f58505d2119f6de2e6f33202.png)

当我从上面的代码中截取屏幕截图时，如果图像：-

![在此处输入图像描述](../Images/fd1f98a740b718c586c265561bbbfb46.png)

请帮助我..如何从图像中获取正确的屏幕截图，这样我就不会在顶部看到空白图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:31:11.300

试试这个

```
UIGraphicsBeginImageContext(myView.frame.size);
[myView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData *data=UIImagePNGRepresentation(viewImage);
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *strPath = [documentsDirectory stringByAppendingPathComponent:@"myimage.png"];
[data writeToFile:strPath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:14:46.953

试试这个：-

```
CGRect screenRect = CGRectMake(0, 90, 320,460);
UIGraphicsBeginImageContext(screenRect.size);

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextFillRect(ctx, screenRect);

//you probably need an offset, adjust here
CGContextTranslateCTM(ctx, -20, -20);
[self.view.layer renderInContext:ctx];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

它可能会帮助你。谢谢 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:50:03.973

试试这个。这可能会对您有所帮助。

```
- (UIImage *)captureView:(UIView *)view {
CGRect screenRect = [[UIScreen mainScreen] bounds];

UIGraphicsBeginImageContext(screenRect.size);

CGContextRef ctx = UIGraphicsGetCurrentContext();
[[UIColor blackColor] set];
CGContextFillRect(ctx, screenRect);

[view.layer renderInContext:ctx];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return newImage; 
```

}

# iphone - 查找 iPhone 的 IP 地址

> ID：10946624
> 
> 赞同：8
> 
> 时间：2012-06-08T09:52:46.377
> 
> 标签：iphone, ip

我正在研究 iPhone。我想知道如何通过 USB/3G 而不是在 wifi 上找到 iphone 的 IP 地址。如果通过 WiFI 连接，我知道看到 IP。（通过设置并在 Wifi 下查看）但我需要通过 USB / 3G 获得 IP。我所做的意味着我使用了个人热点，并通过 USB 将我的 iphone 连接到了 PC。我有一个IP。但是，当我再添加一部启用了相同热点并通过 USB 连接的 iPhone 时，我变得像身份不明的网络。

通过使用 whatismyip.com 网站，我得到了一个 ip。但我不能用它做任何事情。我无法使用该网站提供的 ip 访问我的 iphone。

因此，任何人都可以提供有关如何查找连接到同一台 PC 的多个 Iphone 的 IP 的信息。

目的是用他们的IP与多个iphone进行通信。

提前一百万谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T02:47:41.720

不幸的是，这些回答并不完全正确。在 3G/4G 网络中，每个设备都有一个 IP 地址，但这不是您在访问 www.whatismyip.com 等网站时看到的 IP 地址。这是电信公司向外部世界提供的地址，而不是设备 IP 地址。

AT&t、Verizon、Telefonica 等电信公司分配一个“私有”IP 地址，该地址仅在其网络中有效。这类似于您连接到家庭无线时手机中的内部 IP 地址，但是如果您在 www.whatismyip.com 中查看，您将获得无线路由器的外部 IP 地址（您可以检查这些地址是否不同） ）。电信公司所做的称为 NAT 或 PAT。原因是当前版本的 IP 的可用 IP 地址数量非常有限，并且所有这些数以百万计的设备都无法获得公共 IP 地址（就像您在 whatismyip.com 中看到的那样）。实际上，多个设备共享该外部 IP 地址。

与您可以获得电信公司分配给设备的 IP 的 Android 设备不同，iOS 不会将该信息呈现给用户（除非您越狱设备或拥有应用程序）。

虽然 whatismyip 提供的地址不是您的真实 IP，但它是外部世界识别的地址，因此足以满足大多数用途。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T09:58:33.300

您看到的`whatismyip.com`是您从移动提供商处获得的 IP 地址，这取决于您获得的操作 IP 类型。很多时候 3G 网络都经过 NAT，这意味着您从`10.0.0.0/8`无法从外部访问的范围内获得 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:02:26.760

使用 www.whatismyip.com 肯定应该给你正确的地址？

你回来时得到什么地址？

您如何验证这是否是您 iPhone 的地址？我假设您的 iPhone 上没有安装防火墙？嗯，另一件事是您的提供商正在执行某种过滤、NAT-ing 或其他愚蠢行为。如果你不介意我问，你到底想在这里实现什么？你想在你的 iPhone 上运行某种服务器风格的应用程序吗？或者您只是想在 iPhone 和服务器之间建立连接 - 从 iPhone 端启动连接可能更容易。

您应该检查它是否在您的提供商的 IP 块范围内 - 在线 whois 检查应该告诉您 (www.whois.net)。

您如何测试这是否是您 iPhone 的地址？

其他选择只是让您的 iPhone 访问您控制的服务器（使用 3G），然后检查服务器日志。

或者只是让事情变得更容易，并使用一个应用程序告诉你 - 例如 iStat：

[http://bjango.com/iphone/istat/](http://bjango.com/iphone/istat/)

这也将为您提供您的手机 (3G) IP 地址。

干杯，维克多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-24T16:46:23.293

有两种类型的 IP 地址：

私有 IP 地址（您的设备 IP，您从家庭 Wi-Fi 路由器或电信提供商路由器获取它以与这两个路由器通话）。

公共 IP 地址（您的家庭 Wi-Fi 路由器和/或来自电信提供商的路由器，他们将使用它来让您与 Internet 上的其他人交谈）。

**注意：如果没有公共 IP 地址，您将无法与互联网上的人交谈。

现在两者（您的家庭 Wi-Fi 路由器或电信提供商路由器）都有称为 DHCP 或动态主机配置协议的东西。该协议用于将私有 IP 地址分配给连接到本地网络的任何人（家庭 Wi-Fi 或电信提供商）。

这意味着（家庭 Wi-Fi 路由器和电信提供商路由器）都有一个称为公共 IP 地址的 IP 地址，以允许您与外部世界交谈，但首先他们需要提供私有 IP 地址才能与他们交谈（您的家 Wi-Fi 路由器和您的电信提供商路由器）。

如果您的 iOS 连接到您的家庭 Wi-Fi，那么您将拥有一个专用 IP 地址：

1-进入设置。

2- 点击无线网络。

3- 将出现 Wi-Fi 网络列表。

4- 单击您的 Wi-Fi 网络名称（称为 SSID）。

5- 单击 Wi-Fi 名称右侧感叹号的蓝色圆圈。

您将在那里非常清楚地看到您的私有 IP 地址。

现在，如果您的 iOS 设备未连接到任何 Wi-Fi 网络，但已连接到您的电信提供商，那么您将看不到您的私有 IP 地址。我确信有一种方法可以查看您从电信提供商 DHCP 获得的私有 IP 地址。您必须从互联网上搜索或通过越狱破坏您的设备。

对于公共 IP 地址（无论您是连接到家庭 Wi-Fi 还是电信提供商），请转到您的互联网浏览器（例如 google chrome）并输入：“我的 IP 地址是什么”。结果将在几分之一秒内出现在您的手之间！

现在回到你的问题：

如果您将两部 iPhone 连接到您的 PC 并且都启用了热点，这意味着您的 PC USB 端口将处理两个 IP 专用地址，因为您的 iPhone 将充当您的家庭 Wi-Fi 路由器。

如果您的笔记本电脑中有 Windows 操作系统，请转到 Windows CMD 终端并输入：

ipconfig

CMD 提示终端将为您提供 IP 地址编号，您的 iPhone 有两个私有 IP 地址。

现在，如果仍然存在未识别的网络消息，请在 Windows 操作系统中打开 RUN 并键入 [ncpa.cpl]，它将带您进入网络连接设置部分，右键单击其中一个 iPhone 网络并将其禁用，保持另一个启用。

我希望现在很清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-25T20:52:58.700

当手机是电信蜂窝提供商的热点时，它实际上被用作路由器，因此如果您将笔记本电脑连接到该热点，您可以在笔记本电脑上打开网络设置以查看其 tcp/ip 设置并查看笔记本电脑的 ip 和路由器的 ip 是你手机的 IP。Ip 是私有的，您可以 ping 到它或做任何您想做的事情。

将 Iphone 无线连接到 Mac Xcode 的示例：

1.  从您的手机共享个人热点。
2.  使用wifi将您的笔记本电脑连接到您的手机专用网络，搜索您在手机中设置的ssid并设置正确的密码。
3.  在 Mac 中转到系统偏好设置->网络->wifi 连接->高级->Tcp/Ip 复制路由器 Ip - 这是您的 Iphone 私有 Ip。

为了将Xcode无线连接到Iphone，您首先需要将手机与USB连接，打开窗口->设备和模拟器，选择您的手机并设置复选框“通过网络连接”

现在，如果手机与 Mac 断开连接并且按照说明共享了专用网络，您知道手机 Ip，那么您可以在 Xcode 中选择手机（它会记住已连接的手机），打开窗口->设备和模拟器，选择您的手机，单击它以获取选项菜单，选择“使用 ip 连接”，提供您之前看到的“路由器”的 ip。就是这样，希望它会帮助某人。

# iphone - ViewController 中的 UITableview 连接到 SQLite

> ID：10946627
> 
> 赞同：0
> 
> 时间：2012-06-08T09:53:10.917
> 
> 标签：iphone, ios, ipad

我正在做一个 iPad 应用程序.. 我想从数据库中填充 UITabelView 中的数据，因为它是 UIViewController 中的 tabelview 而不是 UITableViewController，我不知道如何连接它们..请帮助我.!!!!!!

找到我的代码供您参考。

```
viewController.h:

#import <UIKit/UIKit.h>
#import "sqlite3.h"

@interface ViewController : UIViewController  {
    NSString *databaseName;
    NSString * databasePath;
    NSMutableArray *tableOne;
    NSString * string1;
    IBOutlet UITableView *tabelView;
}
@property(nonatomic, retain)  NSMutableArray  *tableOne;
@property (strong, nonatomic) IBOutlet UITableView *tabelView;
@property(nonatomic, retain)  NSString * string1;

-(void)checkAndCreateDatabase;
-(void)readDataFromDatabase;
@end

#import "ViewController.h"
#import "db.h"

@implementation ViewController
//inserted 
@synthesize tabelView;
@synthesize tableOne, string1;

#pragma mark - View lifecycle
- (void)viewDidLoad
{

    databaseName=@"register.db";

    NSArray *documentPaths= NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString * documentDir = [documentPaths objectAtIndex:0];
    databasePath=[documentDir stringByAppendingPathComponent:databaseName];
    [self checkAndCreateDatabase];
    [self readDataFromDatabase];
    [self.tabelView reloadData];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark - TableView Data Source methods
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [tableOne count];
    NSLog(@"a");}
// Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
// Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString * CellIdentifier=@"cell";

    UITableViewCell *cell= nil;
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];}

    db * temp =(db *)[self.tableOne objectAtIndex:indexPath.row];
    cell.textLabel.text=temp.name;

    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;

}

// Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
// Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    string1 = cell.textLabel.text;
    NSLog(@"%@",string1);
}
-(void)checkAndCreateDatabase{
    BOOL success;
    NSFileManager *fileManager=[NSFileManager defaultManager];
    success=[fileManager fileExistsAtPath:databasePath];
    if(success)
        return;

    NSString *databasePathFromApp = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:databaseName];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
}
-(void)readDataFromDatabase{
    sqlite3 *database;
    tableOne=[[NSMutableArray alloc]init];
    if(sqlite3_open([databasePath UTF8String], &database)== SQLITE_OK){
        const char *sqlStatement = "SELECT * FROM employee;";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL)==SQLITE_OK){
            while (sqlite3_step(compiledStatement)==SQLITE_ROW) {
                NSString  *stringName=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                db *info =[[db alloc]initWithText:stringName ];
                [tableOne addObject:info];
            }            
        }
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);
}

- (void)viewDidUnload {
    [self setTabelView:nil];
    [super viewDidUnload];
}
@end

db.h:

#import <Foundation/Foundation.h>

@interface db : NSObject{
    NSString * name;
}

@property (nonatomic, retain) NSString * name;

-(id)initWithText:(NSString *)d ;
@end
#import "db.h"

@implementation db

@synthesize name;

-(id)initWithText:(NSString *)d{
    self=[super init];
    if(self)
    {
        self.name = d;
    }
    return self;
}

@end 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:01:11.653

`UITableView`我认为您应该在从数据库文件中提取数据之前确保您的工作正常。只需创建一个`NSArray`作为数据源并在您的中填写一些数据，`-ViewDidLoad()`然后查看您是否`UITableView`可以提取。在你知道它有效之后，你可以从数据库中获取数据并使用这些数据来填充你的表视图。

从您的代码中，我没有看到您将视图控制器指定为`UITableViewDelegate`and `UITableViewDataSource`。我看到你实现了这些方法，但你肯定需要告诉你的类继承 `UITableViewDelegate`和`UITableViewDataSource`.

甚至在此之前，在您的界面构建器中，将 uitableview 控件拖到您的视图后，不要忘记右键单击它并将委托和数据源设置为文件的所有者。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:03:09.533

您是否在界面生成器中设置了 tableview 数据源并委托给您的 nib 文件中的视图？您必须通过设置在 viewdidload 中或在代码中设置它们

```
self.tabelView.datasource = self;
self.tabelView.delegate = self; 
```

此外，您的 tableOne 可变数组应该只在 viewDidLoad 中初始化一次，当您从数据库重新加载数据时，您应该使用以下方法删除所有数组数据：

```
[tableOne removeAllObjects]; 
```

# windows-phone-7 - WP7 如何在 TombStoning 期间存储 LiveConnectSession？

> ID：10946629
> 
> 赞同：3
> 
> 时间：2012-06-08T09:53:14.193
> 
> 标签：windows-phone-7, tombstoning, windows-live

我正在使用 MS 提供的 PhotoSkyOnTheGo 示例的 windows live 登录策略。因此，当我的应用程序启动时，它会显示一个 Windows 实时登录页面。

在应用程序运行时，我记得 LiveConnectSession 连接到 SkyDrive。

现在，当应用程序墓碑时，我需要一种方法来保存 LiveConnectSession。IsolatedStorageSettings.ApplicationSettings 不起作用，可能是因为 LiveConnectSession 不可序列化（它在调试输出中显示一些 InvalidDataContractException）。

那么如何存储 Session 以防应用程序墓碑？或者提供的 PhotoSkyOnTheGo 示例是垃圾，我需要能够在访问 SkyDrive 的任何时候重新连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:57:21.837

If your app uses `wl.offline_access` scope than the `live:SignInButton` control saves it for you and loads it automatically. Just use the `SessionChanged` event to capture the session object. This way the user will need to sign in only once.

Scope: [http://msdn.microsoft.com/en-us/library/live/hh243646.aspx#wlofflineaccess](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx#wlofflineaccess)

Event: [http://msdn.microsoft.com/en-us/library/live/microsoft.live.controls.signinbutton.sessionchanged.aspx](http://msdn.microsoft.com/en-us/library/live/microsoft.live.controls.signinbutton.sessionchanged.aspx)

# sql - 更改 NULL 在排序中的位置

> ID：10946632
> 
> 赞同：2
> 
> 时间：2012-06-08T09:53:17.843
> 
> 标签：sql, sql-server, sql-server-2008, sorting, null

我正在整理一张桌子。小提琴可以在[这里](http://sqlfiddle.com/#!3/51733/1)找到。

```
CREATE TABLE test
(
field date NULL
);

INSERT INTO test VALUES
('2000-01-05'),
('2004-01-05'),
(NULL),
('2008-01-05');

SELECT * FROM test ORDER BY field DESC; 
```

我得到的结果：

```
2008-01-05
2004-01-05
2000-01-05
(null) 
```

但是我需要结果是这样的：

```
(null)
2008-01-05
2004-01-05
2000-01-05 
```

因此 NULL 值被视为高于任何其他值。有可能这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:55:06.150

使用“时间结束”标记替换空值：

```
SELECT * FROM test 
ORDER BY ISNULL(field, '9999-01-01') DESC; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T09:56:14.130

最简单的方法是先添加一个额外的排序条件：

```
ORDER BY CASE WHEN field is null then 0 else 1 END,field DESC 
```

或者，您可以尝试将其设置为其数据类型的最大值：

```
ORDER BY COALESCE(field,'99991231') DESC 
```

`COALESCE`/`ISNULL`工作正常，前提是您没有使用相同最大值的“真实”数据。如果这样做，并且需要区分它们，请使用第一种形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:05:32.277

小心调用每行函数的查询，它们很少能很好地扩展。

对于较小的数据集，这可能不是问题，但如果它们变得很大，就会出现问题。这应该通过定期对查询执行测试来监控。如果您的数据从不更改（非常罕见），则数据库优化只是一种设置后的操作。

有时最好引入人工主排序列，例如：

```
select 1 as art_id, mydate, col1, col2 from mytable where mydate is null
union all
select 2 as art_id, mydate, col1, col2 from mytable where mydate is not null
order by art_id, mydate desc 
```

然后只`result_set["everything except art_id"]`在你的程序中使用。

通过这样做，您不会引入（可能）缓慢的每行函数，而是依赖于`mydate`列上的快速索引查找。高级执行引擎实际上可以同时运行这两个查询，并在它们都完成后将它们组合起来。

# ios - 从 iPhone 移动平台分享链接

> ID：10946636
> 
> 赞同：2
> 
> 时间：2012-06-08T09:53:47.373
> 
> 标签：ios, facebook, hyperlink, share

我们有一个可以分享到 Facebook 的 iPhone 应用程序，但是我们的一个分享链接有问题（所有链接都使用相同的代码）。

代码如下：

```
NSString *fullUrl = [NSString stringWithFormat:@"http://www.facebook.com/sharer.php?u=%@", 
[campaignToShare.shareurl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:fullUrl]]; 
```

当我们用参数调用openURL方法时：http: [//www.facebook.com/sharer.php? u=http://open.mikz.com/upvudd](http://www.facebook.com/sharer.php?u=http://open.mikz.com/upvudd)

我们在 safari（也是歌剧）上将其翻译为以下网址： http://m.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fopen.mikz.com%2Fupvudd& [_rdr](http://m.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fopen.mikz.com%2Fupvudd&_rdr)

这不起作用，但是如果在重定向到 m.facebook （在计算机上）之前使用 url，那么它可以工作。

我们编写的代码是错误的还是我们发现了 iOS + m.facebook.com 的错误？

Obs：它适用于我们拥有的所有其他链接，这些链接的唯一区别是它们具有不同的代码（而不是 upvudd）。

# iphone - 在后台加载 WebView

> ID：10946648
> 
> 赞同：0
> 
> 时间：2012-06-08T09:54:24.037
> 
> 标签：iphone, xcode, uiwebview, background, loading

我有一个带有 6 个视图控制器的标签栏应用程序。
第三个选项卡是在 WebView 上加载 google 表单的视图控制器。
问题是当我移动到 webview 的视图控制器时 webview 开始加载，但我希望 webview 在我移动到它的视图控制器之前在后台加载，就在应用程序启动之后。我不希望用户等待表单加载。
这是我的网页视图代码：

```
-(void)webViewDisplay
{
    CGSize webScreen;
    webScreen = [[UIScreen mainScreen] applicationFrame].size;
    self.formWebView.scalesPageToFit = YES;
    self.formWebView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

    formWebView.inputView.hidden = YES;

    [self.view addSubview: self.formWebView];

    [self.formWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:
                                                                [NSString stringWithFormat:(NSString *)@"%@", @"https://docs.google.com/spreadsheet/viewform?formkey=dHphcHBIaVQ5TFh1b2JOQWItd0JCTkE6MQ"]]]];
    formWebView.scrollView.bounces = NO;
} 
```

最好的方法是什么？
谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:13:35.127

设法找到了方法:)
在我的 AppDelegate 中，我做了：

```
ThirdViewController *thirdVC = [[ThirdViewController alloc] init];  
[thirdVC performSelector:@selector(webViewDisplay) withObject:nil]; 
```

效果很好。
不管怎么说，还是要谢谢你...

# google-app-engine - Google App Engine：在 HTTP 请求（Java）之间保持对象的状态

> ID：10946649
> 
> 赞同：0
> 
> 时间：2012-06-08T09:54:25.053
> 
> 标签：google-app-engine

用户向服务器发出 HTTP 请求。这个请求是用某个类的对象处理的，我们称之为“处理器”。然后同一用户在两分钟内发出另一个 HTTP 请求。我希望它使用与第一个处理器相同的实例进行处理。所以基本上我想在几个请求中保持某个对象的状态。

我知道我可以每次都将它保存到数据存储区，然后再加载回来，但是这种方法似乎很慢。有没有办法将对象存储在某个 RAM 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:07:56.800

使用[内存缓存](https://developers.google.com/appengine/docs/java/memcache/)怎么样？

您无法确保对应用程序的连续请求会发送到同一个实例，但 memcache 可以帮助减少或消除每个请求访问数据存储区的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T06:58:04.443

听起来你描述的是一个*session*。

我不确定您使用的是哪种语言运行时和 Web 框架，但它肯定包含对会话的支持。（如果您使用的是 Java，则需要[启用它](https://developers.google.com/appengine/docs/java/config/appconfig#Java_appengine_web_xml_Enabling_sessions)。）

标准会话机制将一个小 ID 放入存储在用户浏览器中的 cookie 中。对于每个请求，每个请求都可能转到不同的应用程序服务器，此 ID 用作从数据存储读取和写入持久信息的密钥。

如果数据存储访问对您来说太慢，我建议不要将 memcache 用于此会话存储，因为 memcache 在设计上是*不可靠*的，因此用户的会话信息可能随时消失，这对他们来说将是一个糟糕的体验。

如果您要存储的数据量小于几千字节，那么我建议您执行 Play Framework 所做的事情，即加密您的会话数据并将其直接存储在存储在用户浏览器中的 cookie 中。这是快速且真正无状态的。

如果您的数据多于 cookie 可存储的数据，并且您不想使用数据存储，则可以在浏览器上使用 JavaScript 本地存储，并使用 AJAX 调用与服务器通信。（如果您想支持旧版浏览器，您可能需要使用[jStorage](http://www.jstorage.info/)包装库。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T16:40:02.237

如果内存缓存不够，您可以使用后端来维护状态。使用常驻后端（或其中的一组）并将来自前端的传入请求路由到具有该状态的后端机器。

文档：[Python](https://developers.google.com/appengine/docs/python/backends/overview) [Java](https://developers.google.com/appengine/docs/java/backends/overview)

# iis - 尝试连接到 TFS 2012 Express 服务器并在浏览器中查看时出错

> ID：10946650
> 
> 赞同：3
> 
> 时间：2012-06-08T09:54:30.497
> 
> 标签：iis, tfs

我已经安装了 Team Foundation Server 2012 Express，我想通过 Visual Studio 2010 Ultimate 进行连接。

TFS 似乎已安装好，但是当我尝试连接时，出现以下错误：

```
TF31002: Unable to connect to this team foundation server:
http://<servername>:8080/tfs.

possible reasons for failure include:
- The name, port number, or protocol for the team foundation server is incorrect.
- The team Foundation server is offline
- The password has expired or is incorrect. 
```

现在，当我尝试浏览到提供的 url 时，我收到以下 Web 浏览器错误：

```
HTTP Error 500.0 - Internal Server Error
Calling LoadLibraryEx on ISAPI filter "c:\Windows\Microsoft.NET\Framework\v4.0.30319\\aspnet_filter.dll" failed 
```

我读到这个问题可能是由 .net 4 的错误安装引起的，详见[此处，](http://dailydevscoveries.blogspot.co.uk/2011/09/calling-loadlibraryex-on-isapi-filter.html)但我认为这不太可能，因为我已经编程/使用 .net 4 进行开发一段时间了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:44:00.467

这行得通.....看起来TFS 2012 Express的自动设置没有正确设置。

[关联](http://www.codertakeout.com/v/35674/4O9BY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:37:18.143

也许您需要添加完整的 tfs 服务器路径和端口号，而不是依赖“添加 Team Foundation Server”对话框中的“连接详细信息”框。:8080/tfs 或者你可能写了这个地址: :8080/tfs/ 所以在你的地址末尾省略“/”。

# java - 在 spring dispatcher xml 中添加 .jsp 和 .html 后缀

> ID：10946651
> 
> 赞同：0
> 
> 时间：2012-06-08T09:54:36.280
> 
> 标签：java, spring, servlets, sts-springsourcetoolsuite

我在使用 eID servlet 时遇到了一点问题。它现在搜索一个 .jnlp 文件来启动 servlet 它永远不会找到那个 .jnlp 文件，即使它已经在同一个映射中。我认为这与映射有关。我有一个 registercontroller 向他发送 register.jsp，它从 servlet 运行一点 javascript 代码而不是我下载的代码这个 servlet 包括我的 spring 视图的屏幕截图以获取结构：

[http://dl.dropbox.com/u/608219/Naamloos.png](http://dl.dropbox.com/u/608219/Naamloos.png)

那么我的servlet给出的错误是：

```
exception: JNLP file error: http://localhost:8080/Burgerdemocratie/register/WEB-INF/views/eid/beid.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct..
java.io.FileNotFoundException: JNLP file error: http://localhost:8080/Burgerdemocratie/register/WEB-INF/views/eid/beid.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct.
    at sun.plugin2.applet.JNLP2Manager.loadJarFiles(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception: java.io.FileNotFoundException: JNLP file error: http://localhost:8080/Burgerdemocratie/register/WEB-INF/views/eid/beid.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct. 
```

所以我真的认为这与映射有关，如果我错了，请纠正我。

有没有办法解决这个问题，让它找到 .jnlp 文件？

亲切的问候，

# jquery - 如何知道 jquery 检查了哪个单选按钮？

> ID：10946653
> 
> 赞同：0
> 
> 时间：2012-06-08T09:54:42.007
> 
> 标签：jquery, button, radio

我需要推迟单选按钮上的点击事件。第一个是选中其他单选按钮时，然后必须选中单选按钮。第二种情况是必须选中单选按钮，然后用户再次单击同一按钮。我知道如何获取选中按钮的值：

```
$('input[name=group1]:checked').val() 
```

但是如何获取之前选中的按钮值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:58:08.223

您可以做的是将先前单击单选按钮值的值存储在其他字段（即隐藏字段）中，然后使用它或使用 cookie 来存储值，或者您可以将其放入全局变量中。

**隐藏字段示例**

```
<input type="hidden" value="" id="rdValue" /> 
```

当单选按钮单击时

```
 oldclickvalue = $("#rdValue").val();
  $("#rdValue").val( $('input[name=group1]:checked').val() ); 
```

# android - 单击图像按钮时如何转动图像？

> ID：10946655
> 
> 赞同：0
> 
> 时间：2012-06-08T09:54:49.727
> 
> 标签：android, android-layout, android-intent, android-imageview

谁能告诉我，我开发了安卓“配对游戏”。所以我需要当我点击图像按钮时，它会转动图像并显示动物或鸟类图像。请给我建议，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:01:27.440

尝试为此使用动画效果 -

```
package com.example.flip3d;

import android.graphics.Camera;
import android.graphics.Matrix;
import android.view.animation.Animation;
import android.view.animation.Transformation;

public class Flip3dAnimation  extends Animation {
private final float mFromDegrees;
private final float mToDegrees;
private final float mCenterX;
private final float mCenterY;
private Camera mCamera;

public Flip3dAnimation(float fromDegrees, float toDegrees,
   float centerX, float centerY) {
mFromDegrees = fromDegrees;
mToDegrees = toDegrees;
mCenterX = centerX;
mCenterY = centerY;
}

@Override
public void initialize(int width, int height, int parentWidth, int parentHeight) {
super.initialize(width, height, parentWidth, parentHeight);
mCamera = new Camera();
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
final float fromDegrees = mFromDegrees;
float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

final float centerX = mCenterX;
final float centerY = mCenterY;
final Camera camera = mCamera;

final Matrix matrix = t.getMatrix();

camera.save();

camera.rotateY(degrees);

camera.getMatrix(matrix);
camera.restore();

matrix.preTranslate(-centerX, -centerY);
matrix.postTranslate(centerX, centerY);

}

} 
```

我建议您为此参考[Flip3dAnimation](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)。

# objective-c - 如何在 UIPopoverController 上显示 UIView

> ID：10946658
> 
> 赞同：2
> 
> 时间：2012-06-08T09:54:56.590
> 
> 标签：objective-c, ipad, uikit, uipopovercontroller

在我的应用程序中，我有我的主视图，当我单击一个按钮时，一个 UIPopoverController 会显示在我的主视图上（不是全屏，所以我仍然看到后面的视图），其中包含一个 UITableView。当我单击其中一个 tableview 单元格时，我想显示一个以屏幕为中心的自定义视图（简单视图通知用户应用程序正在处理），该视图将在特定时间内淡入和淡出。

问题是我的自定义视图总是出现在 UIPopover 下...我尝试了所有我能想到的，bringSubviewToFront 等...没有任何效果...我还尝试将我的自定义视图包装在 UIViewController 中并使用 [mainView presentViewController: myCustomView ...] 但是当我这样做时，主视图消失了

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:40:17.307

Thx Ole Begemann，这个问题确实是重复的。虽然，我的问题的解决方案不是子类 UIWindow 而是将我的 UIView 添加到关键 UIWindow ：

```
NSArray * windows = [[UIApplication sharedApplication] windows];
UIWindow* win0 = [windows objectAtIndex:0];

[win0 addSubview:loadingView];
[win0 bringSubviewToFront:loadingWindow]; 
```

# database - 提取数据库对象的代码或脚本

> ID：10946666
> 
> 赞同：0
> 
> 时间：2012-06-08T09:55:14.533
> 
> 标签：database, plsql, oracle10g, toad, plsqldeveloper

我需要从我的所有函数、过程、包、视图和表中提取代码（脚本），这样当我转移到生产环境时，我可以运行脚本来创建所有对象。

在开发过程中，我没有对所有数据库对象进行脚本备份。

提取代码或脚本的最佳方法是什么？任何建议或帮助都是非常值得赞赏的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T10:15:56.977

你确实使用版本控制系统，不是吗？请做。

如果您无法使用系统函数[`dbms_metadata.get_ddl`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#i1019414)，它将返回用于创建对象的 DDL 的 clob。这将需要为每个单独的对象完成，因此可能值得循环遍历[`user_objects`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5366.htm#REFRN26146)。

或者，您可以通过右键单击对象并使用`view`选项在 PL/SQL Developer 中浏览定义，然后在右下角您可以查看用于创建对象的 SQL。

还有一个[导出“工具”](http://www.allroundautomations.com/plsqldev.html)，它对如何使用它的解释不如 SQL Developer 变体。

当然，正确的答案是获得一个版本控制系统并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:14:09.907

我不知道数据库本身，但[SQL Developer](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/sqldev/r30/SQLdev3.0_Import_Export/sqldev3.0_import_export.htm)会这样做。我很确定 TOAD 和其他此类工具也会如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-21T12:58:43.177

就我而言，所有自定义对象都以“XX”开头。您可以使用或修改我的脚本：

```
DECLARE
   CURSOR c_tables IS
     SELECT replace(object_type, ' ', '_') type,
            object_name name,
            owner schema,
            object_type||'#'||object_name||'.sql' files
       FROM all_objects
      WHERE UPPER(object_name) LIKE 'XX%'
        AND object_type NOT IN ('DIRECTORY');

   ddl_text CLOB;

 BEGIN
   FOR rec_tables IN c_tables LOOP
     dbms_output.put_line('OBJECT_TYPE: '||rec_tables.type||', OBJECT_NAME: '||rec_tables.name||', SCHEMA: '||rec_tables.schema||' ->'||rec_tables.files);

     SELECT dbms_metadata.get_ddl(rec_tables.type, rec_tables.name, rec_tables.schema)
       INTO ddl_text
       FROM DUAL;

     dbms_xslprocessor.clob2file(ddl_text, 'UTL_CUSTOM_DDL', rec_tables.files, nls_charset_id('WE8MSWIN1252'));
   END LOOP;
 END; 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T06:53:07.933

抱歉，您有一个非最佳开发实践，无法扩展到一个开发人员之外。

永远不要使用 SQL GUI 客户端的能力直接在数据库中编辑数据库对象。（除非你故意想制造人为的问题。）

相反，所有 SQL 和 PL/SQL DDL 和 DML 都应该位于保存到[版本控制系统](https://en.wikipedia.org/wiki/Revision_control)(VCS) 中的文本文件中（例如[subversion](https://subversion.apache.org/)、[git](https://git-scm.com/)、[mercurial](https://mercurial.selenic.com/)）。使用您[喜欢的编辑器](https://www.google.com/search?q=favorite+editor)来编辑文件。

通过使用命令行工具（在 Oracle 中）执行保存在 VCS 中的文本文件来修改数据库`sqlplus`。这适用于所有数据库实例：开发、QA、生产。

对于大型开发项目，请考虑使用[模式迁移](https://en.wikipedia.org/wiki/Schema_migration)工具（例如[Flyway](http://flywaydb.org/)、[Roundhouse](https://github.com/chucknorris/roundhouse)）。

多年来，我已经能够通过执行一个简单的规则来消除大量的开发和生产问题：

> 如果代码不在 VCS 中，则它不存在。

（令人惊讶的是，在 2015 年仍有许多开发团队不使用 VCS。）

# jquery - jquery触发加载时模糊的所有输入元素

> ID：10946667
> 
> 赞同：1
> 
> 时间：2012-06-08T09:55:36.000
> 
> 标签：jquery, events, triggers, copy

我正在使用*blur()*将用户在表单中写入的内容复制到注册向导结束时的摘要页面中。这很好用。

但是当我预设一些字段值并且这些值是正确的时，不会复制任何内容，因为用户可能不会与该特定字段进行交互。他们只会点击继续。

有没有办法触发所有文本字段、文本区域以便同时复制这些值？

**这是我正在使用的功能：**

```
/**
 *  Author: Thomas Kile
 *  Desc:   Copy text from a form element into a given tag.
 **
 *  @param string $type type of form element
 *  @param string $from Id of form element to copy text/value from.
 *  @param string $to Id of element to copy text/value into.
 */
    function copyFormData(type,from,to)
    {   
        switch (type)
        {
            case 'text':  var copied_text = $(from).val();  break; //  get input text value
            case 'select': var copied_text = $(from+' option:selected').text();  break;
        }
        $(to).text(copied_text);   //  put inside this tag
    } 
```

**这就是我使用它的方式：**

```
$(firstName).blur(function(){   copyFormData('text',firstName,'strong#firstName');  });
$(lastName).blur(function(){    copyFormData('text',lastName,'strong#lastName');    }); 
```

我应该在哪里放置*trigger()*事件？使用 getJSON 获取列表后，我在 select>first 选项上使用了*trigger()*，以便在链式选择事物中自动填充下一个列表。但这有点不同……

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T09:59:11.717

你可以使用技巧:)

```
$('input').each(function(){
  $(this).trigger('blur');
  //each input event one by one... will be blured
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:00:25.630

```
$('input[type=text], textarea').blur(); 
```

或者（如果一切都与 jQuery 绑定，可能会更快）：

```
$('input[type=text], textarea').triggerHandler('blur'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:59:35.730

你试过 .trigger() 吗？

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T09:59:51.217

怎么样，将您的复制输入带到摘要代码中并将其放入函数中。保持原样（除了调用此函数而不是内联代码）并在 $(document).ready() 上选择所有文本框并复制它们（如果它们包含任何内容）。比试图捏造事件更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T10:00:50.377

您可以尝试通过启动以编程方式触发它们

```
$("selector").trigger("blur"); 
```

api.jquery.com/trigger 是你的朋友 :-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-17T09:58:58.540

你可以使用下面的代码它会帮助你

```
 $('input:text').each(function(){
        $(this).trigger('blur');
    }) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-29T10:42:50.110

如果您碰巧为输入的所有 ID 添加了相同的前缀，并且希望一次只模糊这些输入，您可以使用通配符选择并这样做：

```
$("[id^=inputbox] input").trigger("blur"); 
```

# xml - 如何计算xsl中不同数字格式的节点总和？

> ID：10946673
> 
> 赞同：3
> 
> 时间：2012-06-08T09:56:04.017
> 
> 标签：xml, xslt, xslt-2.0

我有以下 XML 结构：

```
 <example>
    <data>
       <numberGer>3,40</numberGer>
    </data>
    <data>
      <numberGer>7,40</numberGer>
    </data>
    <data>
       <numberGer>17,40</numberGer>
    </data>
  </example> 
```

我需要所有“numberGer”节点的总和。数字的格式是一个问题。由于使用了“，”，函数“sum”会产生错误。所以像 sum(//numberGer) 这样的东西不起作用。我可以使用 XSLT 2.0 函数。

我想我需要编写一个递归模板，它采用计算值和节点列表。

就像是：

```
<xsl:template name="addGerNumbers">
        <xsl:param name="number"/>
        <xsl:param name="nodes"/>
      <xsl:choose>
        <xsl:when test="$nodes">
          <xsl:variable name="recursive_result">
            ...
           <xsl:call-template name="addGerNumbers">
             ...
            </xsl:call-template>
            </xsl:variable>
          <xsl:value-of select="$number + $recursive_result"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="0"/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template> 
```

最后，我需要一个值作为结果。

[如何在 XSL for-each 循环中对所有先前的节点进行 XPath sum()？](https://stackoverflow.com/questions/7818804/how-to-xpath-sum-all-previous-nodes-in-a-xsl-for-each-loop)对我不起作用，因为我最后需要一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:03:16.313

一个 XPath 2.0 表达式就足够了：

```
<xsl:value-of select="sum( for $i in //numberGer return number(translate( $i, ',','.') ) )"/> 
```

循环将`for`翻译每个值以用点替换逗号，然后将它们转换为数字。它返回一个数字序列，您现在可以正常求和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:57:51.113

**可能是最短/最简单和最精确的 XPath 2.0 单线**：

```
sum(/*/*/numberGer/xs:decimal(translate(., ',', '.'))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:09:49.870

如果您使用的是 XSLT 2.0，那么`sum()`可以很容易地将其应用于您的输入 XML。例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output indent="yes"/>
    <xsl:template match="/">
        <xsl:variable name="numbers" as="xs:double*">
            <xsl:for-each select="example/data/numberGer">
                <xsl:sequence select="number(translate(., ',', '.'))"/>
            </xsl:for-each>
        </xsl:variable>
        <result>
            <xsl:value-of select="sum($numbers)"/>
        </result>
    </xsl:template>
</xsl:stylesheet> 
```

XSLT 产生：

```
<?xml version="1.0" encoding="UTF-8"?>
<result>28.2</result> 
```

# c# - 解决方法：RichTextBox 以小间隔移动字体尺寸

> ID：10946677
> 
> 赞同：0
> 
> 时间：2012-06-08T09:56:09.633
> 
> 标签：c#, winforms, fonts, richtextbox

我在我的项目中使用 RichTextBox，我注意到它会以很小的间隔改变它的字体尺寸。例如：

```
rtb1.Font = new Font("Arial", 1.869f*254.0f / 72.0f, FontStyle.Regular); // 5,3pt
rtb1.AppendText("lorem ipsum bla bla bla\n");

rtb2.Font = new Font("Arial", 1.834f*254.0f / 72.0f, FontStyle.Regular); // 5,2pt
rtb2.AppendText("lorem ipsum bla bla bla\n"); 
```

这段代码给出了视觉上相同的文字。是否有任何解决方法，使 RichTextBox 实际上连续地改变字体尺寸，没有间隔？

upd：玩了一下，我发现即使间隔更大，字体也保持相同的尺寸，例如：2.01f 和 1.81 给出相同的字体大小。

# sql - 如何在 sql server 中找到平均值（以日期/天计）？

> ID：10946680
> 
> 赞同：0
> 
> 时间：2012-06-08T09:56:17.023
> 
> 标签：sql, sql-server, sql-server-2008, average

我想找到这样的结果

1.  我想从系统中获取当前日期。
2.  我想检索该日期的相应日期。
3.  并回到当前日期的 90 天，并想尝试找出类似的日子发生了多少次。
4.  想知道那些天就诊的患者总数。(ex.COUNT(VisitId)) 来自我的 PtientVisist 表。
5.  最后想计算当天访问的患者的平均值。

喜欢-> 如果我得到今天的日期 2012 年 6 月 8 日并在今天检索为 Friday 。所以想知道从今天起的最后 90 天以来发生了多少个星期五以及在该总星期五访问了多少患者，并且想要计算 AVG = 访问的总患者数/总星期五。

请提供一些帮助提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:39:06.493

获取时间跨度中一周中的天数的空气代码：

```
DECLARE @enddate datetime
SET @enddate = GETDATE()

DECLARE @dayofweek nvarchar(50)
SELECT @dayofweek = DATENAME(dw, getdate())

DECLARE @startdate datetime
SELECT @startdate = DATEADD(d,-90,  getdate())

DECLARE @count int
SET @count = 0

WHILE (@startdate < @enddate)
BEGIN
    IF (DATENAME(dw, @startdate) = @dayofweek)
        BEGIN
            SET @count = @count + 1
        END
    SET @startdate = DATEADD(d, 1, @startdate)
END

PRINT @count 
```

您可以对循环中的实际日期执行某些操作，以获得最终查询。

# asp.net - ASP.NET 通用提供程序 - 它们是否自动提供 SQL Azure 重试逻辑？

> ID：10946684
> 
> 赞同：2
> 
> 时间：2012-06-08T09:56:38.953
> 
> 标签：asp.net, asp.net-membership, membership-provider

关于 ASP.NET 通用提供程序 (System.Web.Providers)，它们在与 SQL Azure 一起使用时会自动提供重试逻辑吗？例如在我的代码中，我调用：

```
Membership.CreateUser 
```

如果由于 Azure 的暂时性错误而失败，库是否会自动处理这种情况并重试操作？还是我应该手动处理异常+重试？

下面的[问题暗示](https://stackoverflow.com/questions/6940732/what-do-the-asp-net-universal-providers-enable-that-the-default-sql-providers-do)回复逻辑是内置的，但是有没有我可以确认的地方，比如这些提供者的一些主页或源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:11:38.667

我看不到它在失败后再次重试的任何地方。DefaultMembershipProvider 使用简单的实体框架 AddObject，除非您实现 CustomMembershipProvider。

```
internal static User CreateUser(MembershipEntities ctx, Guid id, 
   string userName, Guid appId, bool isAnon)
{
   User user = new User();
   user.UserId = id;
   user.ApplicationId = appId;
   user.LastActivityDate = DateTime.UtcNow;
   user.UserName = userName;
   user.IsAnonymous = isAnon;
   ctx.Users.AddObject(user);
   User user1 = user;
   return user1;
} 
```

# java - 排序“普通列表树结构”的算法

> ID：10946685
> 
> 赞同：0
> 
> 时间：2012-06-08T09:56:44.533
> 
> 标签：java, algorithm, sorting, tree

对不起，我没有找到更好的标题:-)

我有一个树结构，这是我的“节点”类：

```
public class Categoria implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @NotNull
    private String name;

    @OneToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)
    @JoinColumn(name = "parent_id")
    private List<Categoria> children = new LinkedList<Categoria>();

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(
        name = "parent_id",
        insertable=false,
        updatable=false
    )
    private Categoria parent;

    @Transient
    private Integer depth;

    private Integer orderNumber;

... getters, setters, ....
} 
```

不用关心 Hibernate/JPA 注释，它们没有问题，只要想一个理想的 pojo 世界。

我做了一个递归方法，它建立了一个“普通”的相邻节点列表。所以，想象一下这棵树：

```
grandfather

 |_ father

    |_ son1

    |_ son2

 |_ uncle

grandmother

 |_ mother 
```

我们将得到一个这样的列表（数字是“深度”）：-祖父（1）-父亲（2）-儿子1（3）-儿子2（3）-叔叔（2）-祖母（1）-母亲（ 2)

所有这些都很好。

现在我想让我的用户编辑节点排序（在相同深度节点之间），我的意思是：如果我想要上面列表中的“son1”之前的“son2”怎么办？

所以我要添加一个“orderNumber”属性：所有 orderNumbers 最初都是 0。然后我的用户将son1的orderNumber设置为99，将son2的orderNumber设置为88。

问题是：**如何重新排列结果列表以根据 orderNumber 进行排序？**

但是等等....我只想对“子列表”进行排序，所以儿子排序绝对与“父亲”和“叔叔”排序无关！

谢谢你帮助我们。

**编辑：**你们都错过了一件事。我没有很好地解释自己。这是一个例子：

*   祖父（深度：1，订单号：1）
*   父亲（深度：2，订单号：1）
*   儿子1（深度：3，订单号：1）
*   儿子2（深度：3，订单号：2）
*   叔叔（深度：2，订单号：2）
*   祖母（深度：1，订单号：2）
*   母亲（深度：2，订单号：1）

现在我想交换son1和son2，所以结果列表将是：

*   祖父（深度：1，订单号：1）
*   父亲（深度：2，订单号：1）
*   **儿子2（深度：3，订单号：1）**
*   **儿子1（深度：3，订单号：2）**
*   叔叔（深度：2，订单号：2）
*   祖母（深度：1，订单号：2）
*   母亲（深度：2，订单号：1）

我怎样才能为此目的实现 sort / compareTo ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:06:59.020

让 Categoria 实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。创建一个自定义 compareTo 实现，您可以在其中按深度排序，并根据您的附加 OrderNumber 属性决定。这适用于任何可排序的集合。

但是根据您使用该树结构解决的问题，为您的树实现自定义迭代器而不是递归创建“列表快照”可能更合适？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:08:27.880

您可以使用 Collections.sort() 和适当的比较器对子列表进行显式排序。

如果在创建列表时知道排序，则可以使用带有比较器而不是 LinkedList 的有序集（如 TreeSet）。因此，插入时将对项目进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:59:47.033

我会让你的类实现`Comparable`，并且在`compareTo`方法中我会使用字段`depth`并`orderNumber`计算顺序。完成此操作后，您可以使用 Collectoins.sort() 对列表进行排序。

示例代码：

```
public class Categoria implements Serializable, Comparable<Categoria> {

    private static final long serialVersionUID = 1L;

    // ... omitting other fields/annotations/getters/setters

    private Integer depth;

    private Integer orderNumber;

    @Override
    public int compareTo(Categoria other) {
        if (depth < other.depth)
            return -1;
        if (depth > other.depth)
            return 1;
        // if we get here the two objects have the same depth, so we compare 
        // based on orderNumber
        if (orderNumber < other.orderNumber)
            return -1;
        if (orderNumber > other.orderNumber)
            return 1;
        return 0;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T06:56:27.930

我需要那个：

```
private List<Categoria> getAlberoCategorie(Categoria root, int profondita) {
        List<Categoria> tmpList = new ArrayList<Categoria>();
        root.setProfondita(profondita);
        if ( root.getParent() != null ) {
            Hibernate.initialize(root.getTraduzioni());
            tmpList.add(root);
        }       

        List<Categoria> children = root.getChildren();
        Collections.sort(children, new Comparator<Categoria>() {
            @Override
            public int compare(Categoria o1, Categoria o2) {
                return o1.getOrdinamento().compareTo(o2.getOrdinamento());
            }
        });

        if (!children.isEmpty()) {
            profondita++;
            for (Categoria figlia : children) {
                List<Categoria> discendenza = getAlberoCategorie(figlia,profondita);                
                tmpList.addAll(discendenza);
            }
        }       
        return tmpList;
    } 
```

总之谢谢大家！

# php - Javascript弹出选择器+ PHP

> ID：10946689
> 
> 赞同：3
> 
> 时间：2012-06-08T09:57:03.080
> 
> 标签：php, javascript, internet-explorer, google-chrome

在 SO 社区的帮助下，我编写了一个 javascript 和 php 页面，允许我将弹出页面中的值传递回父页面。

这在 Internet Explorer 上 100% 有效，但在 google chrome 或我的 ipad / galaxt 平板电脑上无效。

关于如何纠正这个问题的任何想法？一如既往地感谢任何帮助。

下面是来自父页面（newsale.php）和弹出页面（sku.php）的部分代码。我知道建议使用其他方法而不是使用弹出窗口，但出于应用程序原因，我需要让此解决方案与弹出页面一起使用。

**newsale.php**父页面（代码片段，不是整个页面）

```
<script type="text/javascript">  
function selectValue(id) 
{ 
    // open popup window and pass field id 
    window.open('sku.php?id=' + encodeURIComponent(id),'popuppage', 
      'width=1000,toolbar=1,resizable=1,scrollbars=yes,height=200,top=100,left=100'); 
} 

function updateValue(id, value) 
{ 
    // this gets called from the popup window and updates the field with a new value 
    document.getElementById(id).value = value; 
} 

</script> 

<table>
<tr id="r1">  
<input size=10  type=number id=sku1 name=sku1 onchange="showUser(1, this.value)" <? if($rows>0){echo "value=".mysql_result($resultorder,0,1);}  ?>><img src=q.png  name="choice" onClick="selectValue('sku1')" value="?">
</td>
</tr>
<tr id="r2"> 
<td>
<input size=10  type=number id=sku2 name=sku2 onchange="showUser(2, this.value)" <? if($rows>1){echo "value=".mysql_result($resultorder,1,1);}  ?> ><img src=q.png  name="choice" onClick="selectValue('sku2')" value="?">
</td>
</tr>
</table> 
```

**sku.php**弹出页面（整个页面）

```
<? 

  $con = mysql_connect('localhost', 'username', 'password'); 
 if (!$con) 
   { 
   die('Could not connect to server: ' . mysql_error()); 
   } 
   $db=mysql_select_db("DBName", $con); 

    if (!$db) 
   { 
   die('Could not connect to DB: ' . mysql_error()); 
   } 

$sql="select packcode,category,description,grouping,packconfig,sellingunits,eottpoints from skudata order by category, packcode";
$result=mysql_query($sql);

 ?> 

<script type="text/javascript"> 

  function AjaxFunction(cat_id) { 
    var httpxml; 
    try { 
      // Firefox, Opera 8.0+, Safari 
      httpxml = new XMLHttpRequest(); 
    } catch (e) { 
      // Internet Explorer 
      try { 
        httpxml = new ActiveXObject("Msxml2.XMLHTTP"); 
      } catch (e) { 
        try { 
          httpxml = new ActiveXObject("Microsoft.XMLHTTP"); 
        } catch (e) { 
          alert("Your browser does not support AJAX!"); 
          return false; 
        } 
      } 
    } 
    function stateck() { 
      if (httpxml.readyState == 4) { 
        var myarray = eval(httpxml.responseText); 
        // Before adding new we must remove previously loaded elements 
        for (j = document.testform.subcat.options.length - 1; j >= 0; j--) { 
          document.testform.subcat.remove(j); 
        } 
        for (i = 0; i < myarray.length; i++) { 
          var optn = document.createElement("OPTION"); 
          optn.text = myarray[i]; 
          optn.value = myarray[i]; 
          document.testform.subcat.options.add(optn); 
        }  
      } 
    } 
    var url="dd.php"; 
    url = url+"?cat_id="+cat_id; 
    url = url+"&sid="+Math.random(); 
    httpxml.onreadystatechange = stateck; 
    httpxml.open("GET",url,true); 
    httpxml.send(null); 
  } 

</script> 

 <script type="text/javascript"> 
 function sendValue(value)
 {
 var e = document.getElementById("subcat"); 
 value = e.options[e.selectedIndex].value; 
 var parentId = <?php echo json_encode($_GET['id']); ?>; 
 window.opener.updateValue(parentId, value); 
 window.close(); 
 } 
 </script>

 <script type="text/javascript"> 
function updateinput(){ 
var e = document.getElementById("subcat"); 
var catSelected = e.options[e.selectedIndex].value; 

document.getElementById("copycat").value=catSelected; 
} 
</script> 

<form name="testform">
Category: &nbsp; <select name=cat id=cat onchange="AjaxFunction(this.value);" style="width=300"> <br>
<option value='' style="width=300">Select One</option> 
<br>
<? 

  require "config.php";// connection to database  
  $q=mysql_query("select * from categories"); 
  while($n=mysql_fetch_array($q)){ 
    echo "<option value=$n[cat_id]>$n[category]</option>"; 
  } 

?> 
</select> 
 <br><br>
 Pack Code:
<select name=subcat onchange="updateinput();" > 
 <br><br>
</select>
<br><br>
<input type=hidden name=copycat id=copycat > 
<td><input type=button value="Select" onClick="sendValue(document.getElementById(copycat))" /></td>
</form> 
```

**dd.php**（用于动态下拉列表）

```
<? 

  $cat_id=$_GET['cat_id']; 
  require "config.php"; 
  $q=mysql_query("select concat(packcode,', ',description) as details from skudata where cat_id='$cat_id'"); 
  echo mysql_error(); 
  $myarray=array(); 
  $str=""; 
  while($nt=mysql_fetch_array($q)){ 
    $str=$str . "\"$nt[details]\"".","; 
  } 
  $str=substr($str,0,(strLen($str)-1)); // Removing the last char , from the string 
  echo "new Array($str)"; 

?> 
```

我认为 dd.php 对父弹出关系的功能没有任何影响，但已将其包含在内，以便您可以按照代码进行操作。

如前所述，这在 Internet Explorer 上 100% 有效，但在 google chrome 或我的 ipad 上无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:52:35.523

当你使用

```
document.getElementById("subcat"); 
```

那么你也应该有一个具有这样一个 id 的元素。您的

```
<select name=subcat onchange="updateinput();" > 
```

不适用于 chrome、firefox、konqueror 等浏览器，可能还有很多其他浏览器。采用

```
<select id="subcat" onchange="updateinput();" > 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:52:44.087

不幸的是，我不能让你的代码工作，所以我不能测试这个，但改变

```
 window.opener.updateValue(parentId, value); 
```

到

```
 window.opener.contentWindow.updateValue(parentId, value); 
```

或者

```
 window.opener.window.updateValue(parentId, value); 
```

可以解决这个问题。

如果没有，也许您可​​以发布从 Chrome 控制台显示的错误，并更好地解释**究竟是什么**不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:55:50.150

在下面的函数中，你也调用了 subcat。

```
 function sendValue(value)
  {
    var e = document.getElementById("subcat"); 
  }
along with one mentioned by Themroc. 
```

您首先应该有一个 id="subcat"。

您仍然遇到一些问题，请发布错误。

谢谢。

# android - Android 中 ProgressDialog 的关键监听器的奇怪行为

> ID：10946690
> 
> 赞同：0
> 
> 时间：2012-06-08T09:57:05.630
> 
> 标签：android

我写了一个小程序来测试Android中的ProgressDialog。

```
 DialogInterface.OnKeyListener dialogKey = new DialogInterface.OnKeyListener() {
        public boolean onKey(DialogInterface arg0, int arg1, KeyEvent arg2) {
            switch(arg1) {
            case KeyEvent.KEYCODE_VOLUME_DOWN:
                Log.i("Spinner Key", "Key Volume Down");
                            Log.i("Spinner Key", "" + arg0.toString());
                return true;
            case KeyEvent.KEYCODE_VOLUME_UP:    
                Log.i("Spinner Key", "Key Volume Up"); 
                            Log.i("Spinner Key", "" + arg0.toString());
                return true;                
            default:
                    break;
            }
            return true;
        }
    };            

        this.mypDialog = new ProgressDialog(SensorDefenceActivity.this);             
        this.mypDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        this.mypDialog.setTitle("Count");
        this.mypDialog.setIndeterminate(false);
        this.mypDialog.setMessage(this.start + "");
        this.mypDialog.setCancelable(false);
        this.mypDialog.setCanceledOnTouchOutside(false);
        this.mypDialog.setButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int i)
            {
                dialog.cancel();
            }
        });

        mypDialog.setOnKeyListener(dialogKey);
        mypDialog.show();   
        mypDialog.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD); 
```

当对话框显示时，我按下音量键之一。但是我在 logcat 中两次收到相同的按键通知！

```
06-08 17:54:07.130: I/Spinner Key(11636): Key Volume Up
06-08 17:54:07.130: I/Spinner Key(11636): android.app.ProgressDialog@402bdd78
06-08 17:54:07.260: I/Spinner Key(11636): Key Volume Up
06-08 17:54:07.260: I/Spinner Key(11636): android.app.ProgressDialog@402bdd78
06-08 17:54:11.320: I/Spinner Key(11636): Key Volume Down
06-08 17:54:11.320: I/Spinner Key(11636): android.app.ProgressDialog@402bdd78
06-08 17:54:11.530: I/Spinner Key(11636): Key Volume Down
06-08 17:54:11.530: I/Spinner Key(11636): android.app.ProgressDialog@402bdd78 
```

我保证按下时间非常短，因此它不会触发相同的按键消息两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:01:37.570

`onKey`对 Both`KeyEvent.ACTION_UP`和执行`KeyEvent.ACTION_DOWN`。（即`arg2`）

只为其中一个执行您的代码。我觉得`ACTION_DOWN`应该是那个。

# forms - 如何在 codeigniter 表单中同时拥有默认值和设定值？

> ID：10946694
> 
> 赞同：6
> 
> 时间：2012-06-08T09:57:24.783
> 
> 标签：forms, codeigniter, helper, default-value

我在 codeigniter 中有一个表单，希望为我的输入和 set_value() 设置一个默认值。

这是我的输入：

```
echo form_input('job_position',set_value('job_position')); 
```

我有一个设定值并且可以工作，但是如何添加默认值“12”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T10:06:49.653

如果值为空，您可以设置默认值。

从[codeigniter网站](http://codeigniter.com/user_guide/libraries/form_validation.html)：

> 设定值（）
> 
> 允许您设置输入表单或文本区域的值。您必须通过函数的第一个参数提供字段名称。第二个（可选）参数允许您为表单设置默认值。例子：

```
<input type="text" name="job_position" value="<?php echo set_value('job_position', '12'); ?>" size="50" /> 
```

> 上述表格第一次加载时会显示“12”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T00:45:45.033

**您可以同时使用 set_value 和默认值的另一个场景：**

该`set_value()`函数只是设置值。当您提交带有验证错误的表单时，此功能对于保留输入值更有用。这样用户就不需要重新输入字段。此函数有第二个可选参数，允许您为表单设置默认值。

*但是，如果您要使用相同的表单来编辑和添加*数据，则要填充默认值。

`<input type="text" name= "name" value = "<?php if($form['name']) echo $form['name']; else echo set_value('name');`

如果您在表单中添加值，上述语句将设置值。如果您正在编辑表单，它只会显示从数据库中捕获的值或发布数据。

# sql-server - SQL Server 2008 R2 中的韩语（和其他 Unicode）字符在查询结果中未正确显示

> ID：10946696
> 
> 赞同：0
> 
> 时间：2012-06-08T09:57:43.530
> 
> 标签：sql-server, sql-server-2008, unicode, collation, cjk

我有一个数据库，它需要以各种语言和字母保存数据。我使用默认的拉丁语排序规则，但所有文本字段都是 Unicode 种类（nchar、nvarchar）。

我可以使用我的前端应用程序愉快地从数据库中插入和检索 Unicode 数据，但是如果我使用 SSMS 查看数据，那么我看到的只是乱码！

我可以插入这个：

```
극단적으로 
```

然后在 SSMS 中看起来像这样：

```
ê·¹ë‹¨ì ìœ¼ë¡œ 
```

但是由我的前端应用程序检索为：

```
극단적으로 
```

现在显然数据本身存储正常，但为什么 SSMS 将其显示为乱码？有趣的是，如果我使用 SSMS 直接编辑数据并将其粘贴在上面，然后将其显示为这样（**编辑：**结果将结果从[网格切换到文本](http://social.msdn.microsoft.com/Forums/en/sqldatabaseengine/thread/b8b52b86-7dc9-4e59-9a54-9b826ca8e710)会减轻我的这部分问题，因为显示的是正确的文本而不是框.):

```
□□□□□ 
```

但是，如果我将其复制并粘贴到文本编辑器中，它会显示为：

```
극단적으로 
```

为了查看这是否只是 SSMS 行为不端（/我配置错误），我使用了 MS Access 并将其链接到我的 SQL Server 数据库，但它显示的乱码与 SQL Server 相同。

该数据库将保存 Web 应用程序的所有静态文本，因此能够轻松查看和编辑数据对我来说很重要，当您看到的只有以下内容时不容易做到：

```
ê·¹ë‹¨ì ìœ¼ë¡œ 
```

任何建议都会很棒，我真的坚持这一点。

**编辑**

这是我目前在 PHP 中完成的数据插入示例：

```
$con = sqlsrv_connect("(local)", array("Database" => "myDatabase"));
$SQL = "INSERT INTO TableName (col1,col2) VALUES (N'극단적으로',N'극단적으로')";
sqlsrv_query($con,$SQL); 
```

这是我的数据检索示例：

```
$SQL = "SELECT col1,col2 FROM TableName";
$rs = sqlsrv_query($con,$SQL);
while($row = sqlsrv_fetch_array($rs)){
    echo $row["col1"]." ".$row["col2"]."\n";
} 
```

这导致 PHP 输出：

```
극단적으로 극단적으로 
```

但是，如果我在该表上运行选择，则数据在 SSMS 的输出窗口中显示为乱码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:58:15.370

所以看起来你在 PHP 文件中有一个字符串文字：

```
$SQL = "INSERT INTO TableName (col1,col2) VALUES (N'극단적으로',N'극단적으로')"; 
```

看看[这个帖子](http://www.php.net/manual/es/function.mssql-query.php#105843)：

* * *

以下是您可能需要了解的一些事项：

1.  为 Debian 安装 mssql 支持（Lenny/Squeeze）：

    ```
    apt-get install php5-sybase 
    ```

2.  当您收到此错误消息时：“无法使用 DB-Library（如 ISQL）或 ODBC 版本 3.7 或更早版本将仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据发送到客户端。”

    在 /etc/freetds/freetds.conf 添加这两行（最后两行）：

    ```
    [global]
    ;tds version = 4.2
    tds version = 8.0
    client charset = UTF-8 
    ```

    您也可以在 php.ini 中编辑“charset”（但如果您之前在 freetds.conf 中做过，则不需要）：

    ```
    ; Specify client character set..
    ; If empty or not set the client charset from freetds.comf is used
    ; This is only used when compiled with FreeTDS
    mssql.charset = "UTF-8" 
    ```

3.  如果您需要 unicode 支持，请使用 nchar/nvarchar/ntext 列类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T05:43:48.067

I know this is an old question, but I could see no resolution to the problem, I've just started encountering the same problem in SSMS. I don't believe that the issue is with the PHP encoding, based on the edit regarding that if the results are viewed as text instead of grid then the problem is resolved (I experience the same behavior). I think that the issue is actually in SSMS and the encoding of the grid output, given that even SSMS can correctly display the Korean characters when viewed as text.

I've managed to fix the issue in SSMS by changing the font to "Arial Unicode MS". However I have noticed that the issue has occured in other applications as well particularly text editor such as Notepad++ and Notepad.

The following post seems to contain a more permanent fix for the issue (however I am on a network computer without sufficient privileges to verify it).

[sql server management console doesn't work with multi-byte characters](https://stackoverflow.com/questions/5174399/sql-server-management-console-doesnt-work-with-multi-byte-characters)

Note: I have been using Korean/Hangul data in SQL Server for the past 6 weeks without encountering this issue. It has only just occurred today, I have had windows updates but no other reason for the change in behavior. I have also used this viewed/queried this data previously with no issues on tables that have not been updated and are definitely encoded to NVARCHAR. My Korean colleagues can still view the data correctly in the Grid output in SSMS.

I hope this helps anyone else who stumbles upon this question.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:09:47.743

# android - 在android动画中setfillafter（true）之后视图的实际位置没有改变

> ID：10946699
> 
> 赞同：3
> 
> 时间：2012-06-08T09:57:52.903
> 
> 标签：android, listview, animation

我正在通过这段代码移动视图，但视图的实际位置没有改变，为什么

```
 TranslateAnimation ta = new TranslateAnimation(0, 0, Animation.RELATIVE_TO_SELF, -mbar4.getHeight());
                ta.setDuration(1000);
                ta.setFillAfter(true);
                v4.startAnimation(ta); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:07:37.257

直到 android 的版本 3 (API 11) 除外，所有动画都不会真正改变视图，只会改变它的显示方式。不仅如此，我认为他们根本不使用 GPU。

为了检查它，您可以使用一个按钮并为其设置 setOnClickListener ，并查看无论您使用哪个动画，单击都只会在其原始位置和大小上起作用。

这是使用 translateAnimation 移动视图的示例代码：

```
final int deltaXToMove=50;
TranslateAnimation translateAnimation=new TranslateAnimation(0,deltaXToMove,0,0);
int animationTime=1000;
translateAnimation.setDuration(animationTime);
translateAnimation.setFillEnabled(true);
translateAnimation.setFillAfter(true);
final Button b=(Button)findViewById(R.id.button);
translateAnimation.setAnimationListener(new AnimationListener()
  {
  @Override
  public void onAnimationEnd(Animation animation)
    {
    animation.setFillAfter(false);
    FrameLayout.LayoutParams par=(LayoutParams)b.getLayoutParams();
    par.leftMargin=deltaXToMove;
    b.setLayoutParams(par);
    }
...
b.startAnimation(translateAnimation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:05:11.857

因为 TranslateAnimation 只改变 View 的绘制位置。

尝试这个：

```
 TranslateAnimation ta = new TranslateAnimation(0, 0, Animation.RELATIVE_TO_SELF, -mbar4.getHeight());
    ta.setDuration(1000);
    ta.setFillAfter(true);
    ta.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {}

        public void onAnimationRepeat(Animation animation) {}

        public void onAnimationEnd(Animation animation) {
            ((RelativeLayout.LayoutParams)v4.getLayoutParams()).bottomMargin = mbar4.getHeight();
            v4.requestLayou();
        }
    });
    v4.startAnimation(ta); 
```

将 RelativeLayout.LayoutParams 更改为父布局。

# c# - 用于桌面应用程序的 DatacontractSerializer

> ID：10946702
> 
> 赞同：1
> 
> 时间：2012-06-08T09:58:04.763
> 
> 标签：c#, datacontractserializer

在搜索 DataContractSerialization 时，我发现了各种文章，其中提到 DataContractSerialization 与 WCF 一起使用。现在我正在使用.net 4.0（不是任何类型的服务）开发一个桌面应用程序。此应用程序具有要序列化的各种数据。

通过查看 DataContractSerialization 的功能，我想为我的应用程序使用 DataContractSerialization。

所以请告诉我 DataContractSerialization 是否可用于桌面应用程序以及处理版本控制的任何指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:04:32.407

是的，DataContractSerializer 是*为 WCF 使用*而编写的，但它是独立且自包含的，可以在不以任何方式使用 WCF 的情况下使用。它甚至在一个单独的组件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:06:44.883

您可以将 datacontractserializer 用于桌面应用程序没有问题。至于版本控制，您可以将新成员添加到现有数据合约中，并且很容易处理丢失的数据。

但是，如果您想删除字段或更改现有字段的含义（例如，您的鞋子属性“尺码”曾经是欧元尺码，但现在是英国鞋码），那么很快就会变得困难。然后你应该创建一个新的合约版本。请参阅此问题：[使用 DataContractSerializer 进行简单数据文件版本控制](https://stackoverflow.com/questions/1513589/simple-data-file-versioning-with-datacontractserializer)。

这是微软关于[版本控制策略的文档](http://msdn.microsoft.com/en-us/library/ff384251.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T09:59:50.403

是的，你可以使用它。当您尝试序列化字典和列表时，Xml 序列化有一些缺点。但是 DataContractSerialization 提供了我们需要的所有功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:20:51.740

是的你可以。

Aside from that WCF does ***not*** exclude Desktop apps - it can be hosted in a desktop application by using the [ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx) class.

# c# - 删除 GridFS 中的文件路径

> ID：10946706
> 
> 赞同：1
> 
> 时间：2012-06-08T09:58:16.637
> 
> 标签：c#, mongodb, gridfs

我正在使用 MongoDB 的官方 c# 驱动程序，当我上传文件时，元数据包含带有路径的文件名，这不是我想要的：

```
var gfs = new MongoGridFS(database);
var gfsi = gfs.Upload("c:\a.pdf"); 
```

生成的元数据是：

```
"_id" ...
"filename" : "c:\\a.pdf",
... 
```

是否可以删除路径或只写文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:27:18.110

MongoGridFS 类公开了 Upload 和 Download 方法的多个重载，包括您可以在其中指定不同的远程/本地路径的重载。

例如

```
var gfs = new MongoGridFS
gfs.Upload(@"c:\a.pdf", "a.pdf");
gfs.Download(@"c:\b.pdf", "a.pdf"); 
```

GridFS 对象的文件名始终引用您在此处设置的远程文件名，否则原始文件名将丢失。

# c# - 元素绑定问题

> ID：10946709
> 
> 赞同：1
> 
> 时间：2012-06-08T09:58:26.293
> 
> 标签：c#, wpf

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
x:Class="Trainning.biding"
x:Name="Window"
Title="biding"
Width="640" Height="480">
<Window.Resources>
    <Style x:Key="ListBoxItemStyle1" TargetType="{x:Type ListBoxItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="2,0,0,0"/>
    </Style>
</Window.Resources>
<Grid Margin="8,8,0,8" DataContext="{Binding Source={StaticResource kirupaZuneDataSampleDataSource}}">
    <ComboBox x:Name="comboBox" Height="48" Margin="99,83,0,0" VerticalAlignment="Top" SelectedIndex="0" HorizontalAlignment="Left" Width="96">
        <ComboBoxItem Content="#FF13428D"/>
        <ComboBoxItem Content="#00FFFFFF" Background="#00166A13"/>
        <ComboBoxItem Content="#FF890E6F" Background="#0005116E"/>
        <ComboBoxItem Content="#0005116E" Background="#0009683A"/>
        <ComboBoxItem Content="##0009683A"/>
    </ComboBox>
    <TextBox Margin="99,145,297,0" TextWrapping="Wrap" Text="{Binding SelectedItem, ElementName=comboBox}" Height="41" VerticalAlignment="Top"/>
</Grid> 
```

它的输出将如下图所示

![element_binding](../Images/2bb7aeb53ddb4e819e3cc981dec356b2.png)

但我确实需要将字符串“#FF13428D”绑定到文本框中。

我该怎么办...请帮帮我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:02:49.113

采用

```
Text="{Binding SelectedItem.Content, ElementName=comboBox}" 
```

访问所选组合框项目的内容。

# iphone - 目标 C：哪个发生了变化，属性还是 ivar？

> ID：10946710
> 
> 赞同：0
> 
> 时间：2012-06-08T09:58:27.790
> 
> 标签：iphone, objective-c, xcode4.2, ivar

担心重复但似乎无法找到并回答我可以在任何其他帖子中理解，我只需要问：

当我在我的 .h 中时：

```
@interface SecondViewController : UIViewController{    
NSString *changeName;    
}

@property (readwrite, retain) NSString *changeName; 
```

然后在我的.m

```
@synthesize changeName;

-(IBAction)changeButton:(id)sender{
changeName = @"changed";
} 
```

当我按下“changeButton”时，是合成属性还是实例变量发生了变化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T10:11:39.097

您（似乎其他一些回答的人）将属性与实际变量混淆了。

属性的工作方式是，它们创建设置或获取/返回 ivars 的方法（称为 setter 和 getter）。而 do 表示法 (self.string) 实际上会调用这些方法。所以一个属性不能改变，只有声明的 iVar 是。

当你像这样声明一个属性时：

```
@property (nonatomic, retain) NSString *string; 
```

并且@synthesize 它会发生以下情况：

*   创建了一个名为 string（NString* 类型）的 iVar

    （如果你这样做

    ```
    @synthesize string = whateverYouWant 
    ```

    创建的 iVar 称为whateverYouWant - 惯例是将 iVar 命名为与前面带有下划线 (_string) 的属性相同的名称

*   像这样创建访问器方法

    ```
    -(NSString*) string; 
    ```

*   像这样创建一个setter

    ```
    -(void) setString: (NSString*) newString; 
    ```

现在 self.xxxx 所做的是，它实际上将消息 xxxx 发送给自己（如 [self xxxx]）。它适用于任何方法，而不仅仅是属性，尽管它只能与属性一起使用。

所以当你做 self.string = @"hello" 它实际上归结为

```
[self setString: @"hello"]; 
```

（请注意，编译器实际上知道您正在尝试设置，因此会发送 setString 消息而不仅仅是字符串。如果您访问 self.string，它将发送 [self string]）

因此，您无需设置属性，而是调用本身设置 iVar 的（合成的）setter 方法。

如果您知道自己在做什么，直接访问您的 iVar 是可以的。只是打电话

```
string = @"something else"; 
```

将产生泄漏代码，因为没有进行内存管理。合成的访问器和设置器实际上为您执行此操作，具体取决于您如何定义属性（保留、复制、分配）。

因为设置器（用于保留属性）不只是做

```
IVar = newValue 
```

如果您声明了一个保留属性，它实际上看起来像这样：

```
-(void) setString: (NSString*) newString {
  if (string) [string release];
  string = [newString retain];
 } 
```

因此，属性合成需要您完成一些工作。

编辑

由于它似乎仍然不清楚，因此声明的属性不应被视为变量。在上面的例子中，当使用

```
@synthesize string = _string; 
```

没有称为“字符串”的变量。这只是您访问通过 setter 方法设置 iVar _string 的方法结构的方式。由于 string 不是变量/对象指针，因此您无法向其发送消息（[string doSomething] 不起作用）。当您使用@synthesize 字符串合成属性时；生成的 iVar 获得与属性相同的名称。然后调用 [string doSomething] 将起作用，但它与属性无关。“字符串”指的是 iVar。因此，将 iVar 命名为下划线的约定，因此当您打算使用 getter/setter 时，您不会意外访问 iVar。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:03:55.980

两个都。属性使用实例变量作为其存储。在您的代码中，您更改了实例变量，但如果您访问该属性（通过`self.changeName`），您将获得与实例变量相同的值。

通常为了区分 ivars 和属性，人们使用`_`ivars 的前缀。然后合成如下属性：

```
@synthesize myProperty=_myProperty; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T10:04:39.203

好吧，var

它始终是 var

在您的情况下，根本不使用属性方法。

现在，考虑这种情况：

```
self.changeName = @"changed"; 
```

这样您就可以使用该属性，但这仅意味着您正在使用编译器为您“神奇地”创建的方法，setter 和 getter 方法，您再次更改 var（属性不存在，在实际上，这只是为您创建 setter 和 getter 方法的一种方式）

# sql-server - 如何检查 SQL Server 实例中是否存在凭据？

> ID：10946718
> 
> 赞同：4
> 
> 时间：2012-06-08T09:58:54.687
> 
> 标签：sql-server, sql-server-2008, tsql

如何检查 SQL Server 实例中是否已存在凭据，以避免在运行时出错`DROP CREDENTIAL`？

通常我使用 SSMS 中的`SCRIPT AS ...`and`DROP And CREATE To`功能来创建脚本，但`CREDENTIAL`没有该选项

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:02:05.007

```
if exists (select * from sys.credentials where name = 'CredName')
    drop credential CredName 
```

# dexterity - 删除按钮触发器不起作用 - 敏捷动态 GP

> ID：10946724
> 
> 赞同：0
> 
> 时间：2012-06-08T09:59:08.947
> 
> 标签：dexterity, dynamics-gp

我正在查看 Microsoft Dynamics 自定义并在采购交易输入表单上创建触发器。

当我单击删除触发器时不会执行，因为 GP 询问消息“您确定要删除此记录”

这是cde片段

局部整数 l_result；

local string strMnuAddDocs = "PaperSave - 添加文档";

local string strMnuShowDocs = "PaperSave - 显示文档";

警告“Startup_PM_Transaction_Entry Called”；

l_result = Trigger_RegisterFocus(anonymous('Delete Button' of window PM_Transaction_Entry of form PM_Transaction_Entry), TRIGGER_FOCUS_CHANGE, TRIGGER_BEFORE_ORIGINAL, script PPSTrigger_PM_Transaction_Entry_Delete);

如果 l_result <> SY_NOERR 那么

```
warning "Focus trigger registration on PM_Transaction_Inquiry failed."; 
```

万一;

任何人都可以知道我如何使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:47:48.307

您还没有发布 PPSTrigger_PM_Transaction_Entry_Delete 的代码。由于上面的代码，错误即将到来。并且只是为了您的信息，您使用了错误的触发器，甚至在 gp delete 启动之前您就被删除了。如果用户改变主意按下取消按钮并且不删除记录怎么办？在您的表格中记录或您在删除按钮上尝试执行的任何操作都已经完成。请改用 DB 触发器。

埃尔莫

# mysql - 新年伊始，成绩从头开始

> ID：10946726
> 
> 赞同：2
> 
> 时间：2012-06-08T09:59:12.517
> 
> 标签：mysql

嗨，我的代码需要一点帮助，它几乎是正确的，但只是出了点小问题。

我的结果中有 3 列：

*   `entries_per_week`它每周都会获得新条目，因此可能有 5 个一周 3 下一个 8 下一个，依此类推。
*   `total_entries`它跟踪每周的总条目数，因此它不断增加“entries_per_week”列。
*   然后将`6WK_total`前 6 周的总数加起来。

所以基本上加起来 6 个`previous_total_entries`。我几乎让它工作了，但在新的一年`6WK_total`开始时，从那一年开始新的开始，而不是把上一年的条目加起来。

这是我的代码：

```
SELECT a.*
 , sum(b.total_entries) 6WK_total
FROM 
 ( SELECT x.*
        , SUM(y.entries_per_week) total_entries
     FROM
        ( SELECT YEARWEEK(date_created) week_created
               , COUNT(*) entries_per_week
FROM entries
           GROUP 
              BY week_created
        ) x
     JOIN   
        ( SELECT YEARWEEK(date_created) week_created
                 , COUNT(*) entries_per_week
FROM entries
             GROUP 
                BY week_created
        ) y
       ON y.week_created <= x.week_created

    GROUP
       BY x.week_created
 ) a

JOIN
 ( SELECT x.*
        , SUM(y.entries_per_week) total_entries
     FROM
        ( SELECT  YEARWEEK(date_created) week_created
               , COUNT(*) entries_per_week
FROM entries
           GROUP 
              BY week_created
        ) x
     JOIN   
        ( SELECT YEARWEEK(date_created) week_created
                 , COUNT(*) entries_per_week
FROM entries
             GROUP 
                BY week_created
        ) y
       ON y.week_created <= x.week_created

    GROUP
       BY x.week_created
 ) b
  ON b.week_created BETWEEN a.week_created - (6 - 1) AND a.week_created

GROUP
BY week_created; 
```

会发生什么，这里有一些结果，注意盯着 (**) 的结果，我想要的结果在另一个表的下方。它应该是 1056，如下面的期望结果表而不是 248

```
 +--------------+-------+-----------------------+-----------+
  | week_created | total | total_entries         | 6WK_total |
  +--------------+-------+-----------------------+-----------+
  |       201149 |     49| 131                   |       243 |
  |       201150 |     37| 168                   |       411 |
  |       201151 |     37| 205                   |       614 |
  |       201152 |     18| 223                   |       837 |
**|       201201 |     25| 248                   |       248 |**
  |       201202 |     33| 281                   |       529 |
  |       201203 |     66| 347                   |       876 |
  |       201204 |     70| 417                   |       1293|
  |       201205 |     61| 478                   |       1771|
  |       201206 |     88| 566                   |       2337|
  |       201207 |     72| 638                   |       2727|
  |       201208 |     72| 710                   |       3156|
  |       201209 |     67| 777                   |       4030|
  +--------------+-------+-----------------------+-----------+ 
```

所需的结果，请注意在 week_create '201206' 处，6 周总数将是 total_entries 中先前的 6 个结果，因此它将是 566 + 478 + 417 + 347 + 281 + 248 = 2337。

```
+--------------+-------+-----------------------+-----------+
| week_created | total | total_entries         | 6WK_total |
+--------------+-------+-----------------------+-----------+
|       201149 |     49| 131                   |       243 |
|       201150 |     37| 168                   |       411 |
|       201151 |     37| 205                   |       614 |
|       201152 |     18| 223                   |       837 |
|       201201 |     25| 248                   |       1056|
|       201202 |     33| 281                   |       1256|
|       201203 |     66| 347                   |       1472|
|       201204 |     70| 417                   |       1127|
|       201205 |     61| 478                   |       1989|
|       201206 |     88| 566                   |       2337|
|       201207 |     72| 638                   |       2727|
|       201208 |     72| 710                   |       3156|
|       201209 |     67| 777                   |       4030|
+--------------+-------+-----------------------+-----------+ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:27:36.500

我不确定我是否在关注您写的所有内容，但如果是，那么您的问题似乎出在您用来提取星期的 YEARWEEK 函数中。

这是上面示例中发生的情况。当 YEARWEEK 函数应用于 2012 年的第一周时，它解析为“201201”，但当 YEARWEEK 函数应用于 2011 年的最后一周时，它解析为“201153”。由于一年中没有 100 周，查询末尾的 between 子句在年初失败，因为上个月是 201153 而不是 201199。

如果您将添加的星期字段保留为日期格式，并且仅在外部查询中应用 YEARWEEK 函数，则可以使用 DATE_SUB() 函数为您执行星期减法​​。这可能看起来像`BETWEEN DATE_SUB(week_created, INTERVAL 5 WEEK) AND week_created`.

# php - 使用ajax post请求发送两个数组

> ID：10946728
> 
> 赞同：3
> 
> 时间：2012-06-08T09:59:32.143
> 
> 标签：php, jquery, mysql, ajax

我正在使用 ajax/jquery 和 php/mysql 开发过滤器功能。我有两组复选框**1)=>for Regions 2)=>for Localities**。过滤器类似于[这里](http://www.proptiger.com/property-in-pune-real-estate.php)的那个。我想发送两个复选框的值来过滤记录。地方的过滤器将在选择**区域复选框**时进行本地过滤。我已经让它在某种程度上工作这在第一组中调用复选框。

**html**

```
<div class="locality">
                <input type="checkbox" id="checkbox1" class="checkbox1" value="<?php echo $suburb['suburb_name']?>" name="Suburb_check[]" onClick="changeResults();" onChange="" ><?php echo $suburb['suburb_name']?>  <span class="grey">(<?php echo $suburb['total']?>)</span>
            </div>
            <?php }?> 
```

**Javascript/Jquery**

```
function changeResults(){
    var data = { 'venue[]' : []};
        $("input:checked").each(function() {
            var chck1 = $(this).val();
            //alert(chck1);

                data['venue[]'].push($(this).val());

        });

    $.ajax({
     type : 'POST',
     url : 'process.php',
     data : data,
     success : function(data){

          $('#project_section').html(data); // replace the contents coming from php file

            }  
        });

   $.ajax({
     type : 'POST',
     url : 'loadLocality.php',
     data : data,

     success : function(data){
     document.getElementById("searchLoader").style.display = 'block';
              $('#localityList').html(data); // replace the contents coming from php file
        //   alert(data);
     document.getElementById("searchLoader").style.display = 'none'; 
            }  
        });  

    } 
```

这是第二组带有 Localities 的检查框

```
<div class="locality" id="localities">
            <input type="checkbox" onClick="changeLocality();" id="1" value="<?php echo $locality['locality_name'];?>" name="Locality_check[]"><?php echo $locality['locality_name'];?> <span class="grey">(<?php echo $locality['total'];?>)</span>
        </div> 
```

我调用了一个与上述类似的函数并将其发布到不同的页面。这是第二个检查框功能：

```
function changeLocality(){
    var dataLocality = {'locality[]' : []};
        $("input:checked").each(function() {
            var chcklocal = $(this).val();
            //alert(chcklocal);
            dataLocality['locality[]'].push($(this).val());
        });

 $.ajax({
 type : 'POST',
 url : 'processLocality.php',
 data : dataLocality,
 success : function(dataLocality){
    // document.getElementById("newloader").style.display ="block";
          $('#project_section').html(dataLocality);        // replace the contents coming from php file
          //alert('data');
   // document.getElementById("newloader").style.display ="none";

        }  
    });

} 
```

但是，当我选择一个**区域框，然后选择一个位置**框，然后取消选择该区域时，我还得到了区域数组中的先前**位置**值（数组**的名称是场地**）我只希望区域进入场地数组和**区域+localities 在位置数组中**。实际上，如果我取消选择区域，则后续位置值也应该从数组中删除。此外，即使我将它们发布到不同的页面，区域页面也会保存位置值。我被卡住了JQUERY知识。
浏览了帖子，但无法修复它。任何帮助将不胜感激。

**编辑** 当我检查第一组检查框时，我得到一个数组，并且还使用上述函数过滤记录。

```
Array
 (
    [venue] => Array
    (
        [0] => Pune East
        [1] => Pune West
        [2] => Pune North
        [3] => Pune South
    ) 
```

)

如果我现在单击第二组检查框中的任何一个，我会得到一个此类数组。

```
 Array
 (
  [locality] => Array
    (
        [0] => Pune East
        [1] => Pune West        //[0] and [1] are regions
        [2] => Aundh
        [3] => Kalyaninagar     //[2] and [3] are localities
    ) 
```

)

**注意：**一个区域可以有多个位置。但我希望它们都是不同的数组，因为它们是用于过滤数据的 SQL 查询的两个不同参数。希望我现在足够清楚！
**我的方法正确吗？或者可以以更简单的方式完成吗？**
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:10:29.313

您使用 a 选择对象的`.`内容

```
data['venue[]'].push($(this).val()); 
```

应该：

```
data.venue[].push($(this).val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:37:10.867

尝试改变

```
 $("input:checked").each(function() { 
```

到

```
$("checkbox[name=check_box_name]:checked").each(function() { 
```

改变这两个，我希望这会奏效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T16:03:59.240

Well now I think its a stupid mistake!! :P The issue was with the names of the checkboxes. In Javascript we cannot have `venue[]` brackets[] in the name of the checkboxes.I presumed it to be similar to PHP for posting arrays. Learnt it after some reading and search!!!Issue is resolved Thanks to those who answered.

# android - 在 android 图像视图中放大和缩小，在其上绘制另一个图像

> ID：10946730
> 
> 赞同：0
> 
> 时间：2012-06-08T09:59:36.620
> 
> 标签：android, android-canvas, android-imageview

我有一张使用画布绘制位图的图像。我已经在imageview上实现了放大和缩小功能，但是当imageview上有缩放效果时，我绘制的画布不会移动。

我必须实现一种谷歌地图类型的视图，当我们放大和缩小地图时，标记会停留在那里（因为这是一个地图功能，但我想在 imageview 中实现它）。

我已经关注了这个链接： [在 ImageView 上绘制矩形以突出显示可以在 android 中放大](https://stackoverflow.com/questions/10482229/draw-rectangle-over-imageview-for-highlight-that-can-be-zoom-in-out-in-android) 但没有实现我想要的确切功能。

# c# - 如果我已经登录 Facebook，请避免自动登录网站

> ID：10946738
> 
> 赞同：1
> 
> 时间：2012-06-08T10:00:02.517
> 
> 标签：c#, facebook, facebook-javascript-sdk

我的问题是：
如果我已经登录了 facebook，那么它会自动重定向页面并登录到我的网站。

我需要的是，即使我登录到 facebook，它也应该留在页面上，当我点击“facebook 登录”按钮后，它会登录到我的网站。

```
<script>
    // Load the SDK Asynchronously
    (function(d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));

    // Init the SDK upon load
    window.fbAsyncInit = function() {
        FB.init({
            appId: 'XXXXXXXXXXX', // App ID
            channelUrl: '//' + window.location.hostname + '/channel', // Path to your     Channel File
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        FB.Event.subscribe('auth.login', function(response) {
            if (response.status === 'connected') {
                FB.api('/me', function(me) {
                    if (me.name) {
                        // the user is logged in and connected to your
                        // app, and response.authResponse supplies
                        // the user’s ID, a valid access token, a signed
                        // request, and the time the access token
                        // and signed request each expire
                        var uid = response.authResponse.userID;
                        var accessToken = response.authResponse.accessToken;
                        done1(uid, accessToken, me.email, me.name);
                    }
                })
            }

        });

        FB.Event.subscribe('auth.logout', function(response) {
        });

        // listen for and handle auth.statusChange events
        FB.Event.subscribe('auth.statusChange', function(response) {
            if (response.authResponse) {
                // user has auth'd your app and is logged into Facebook
                FB.api('/me', function(me) {
                    if (me.name) {
                        document.getElementById("authdisplayname").innerHTML = me.name;
                        if (response.status === 'connected') {
                            var uid = response.authResponse.userID;
                            var accessToken = response.authResponse.accessToken;
                            done1(uid, accessToken, me.email, me.name);
                        }
                    }
                })
                document.getElementById('auth-loggedout').style.display = 'none';
                document.getElementById('auth-loggedin').style.display = 'block';
            } else {
                // user has not auth'd your app, or is not logged into Facebook
                document.getElementById('auth-loggedout').style.display = 'block';
                document.getElementById('auth-loggedin').style.display = 'none';
            }
        }); 
        $("#authlogoutlink").click(function() { FB.logout(function() { window.location.reload(); }); });
    }

    function done1(a, b, c, d) {
        document.getElementById("<%= uid.ClientID %>").value = a;
        document.getElementById("<%= token.ClientID %>").value = b;
        window.location = "http://localhost:59019/fgfgf_2008/new_login.aspx?token=" + b + "&email=" + c + "&name=" + d;
    }
</script> 
```

HTML 代码：

```
<div id="fb-root">
</div>

<div>
    <div id="auth-status">
        <div id="auth-loggedout">
            <div class="fb-login-button" onlogin="done();" autologoutlink="true" scope="email,user_checkins">
                Log in with Facebook</div>
        </div>
        <div id="auth-loggedin" style="display: none">
            Hi, <span id="authdisplayname" runat="server"></span>(<a href="#" id="authlogoutlink">logout</a>)
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:21:51.460

我不是 facebook 登录问题的专家，但在阅读了您的问题后，看起来如果 facebook 用户登录到其 facebook 帐户，那么它也会自动登录到您的应用程序。但是您希望它发生在用户单击登录按钮时，对。

您可以做的是，您可以创建一个“FacebookLogin()”函数，然后可以在点击事件上调用该函数。

就像是：

**在 HTML 按钮上**

```
<div class="fb-login-button" onclick="FacebookLogin()" onlogin="done();" autologoutlink="true" scope="email,user_checkins">
                Log in with Facebook</div> 
```

在您的情况下，我不太确定，但它对我有用，尝试一次，删除您的所有`FB.Event.subscribe('auth.login', function(response)`功能，并使用 FB.login() 功能，然后将用户信息重定向到您想要的页面。在这里，我将它重定向到 Login.aspx 页面。

**在javascript函数中**

```
function FacebookLogin() {
    FB.login(function(response) {
        if (response.authResponse) {
            window.location = "/Login.aspx?NewFacebookConnect=true&accessToken=" + response.authResponse.accessToken + "&userID=" + response.authResponse.userID;
        }
    });
} 
```

# drop-down-menu - 下拉列表的参数篡改 - ASP.NET

> ID：10946739
> 
> 赞同：0
> 
> 时间：2012-06-08T10:00:07.993
> 
> 标签：drop-down-menu, parameters

我有一个问题，如果我在 web.config 中设置了以下属性

`viewStateEncryptionMode="Always" enableViewStateMac="true"`

是否仍然可以篡改我的 Web 表单上的控件值？例如，如果我有一个包含 3 个可能值的下拉列表，例如“IND”、“AU”、“ML”，有人还能篡改这个下拉列表并发送垃圾数​​据`$%^`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:05:20.813

使用这些设置，ViewState 应该可以防止类似的事情发生——如果在请求页面时返回的值不存在，您应该会收到**Invalid Viewstate错误。**

当然，对于其他输入控件（例如 TextBox 或 Hidden 字段），它们被设计为具有由客户端指定的值，而无需检查它是否是来自服务器的值列表之一。在这些情况下，不要只依赖 ViewState - 自己也验证输入。

# javascript - Watir WebDriver：未定义的方法“警报”

> ID：10946741
> 
> 赞同：1
> 
> 时间：2012-06-08T10:00:19.413
> 
> 标签：javascript, cucumber, watir-webdriver

我尝试在 watir webdriver with JavaScript 的帮助下使用 Cucumber。

如果我提示：browser.alert.exists？我变成：未定义的方法“警报”

如果我要使用此命令，我必须做什么：[http ://watirwebdriver.com/javascript-dialogs/](http://watirwebdriver.com/javascript-dialogs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:40:45.440

您提到的警报 API 只是非常新的并且在最新版本的 watir-webdriver 中。

您应该更新到最新的 watir-webdriver gem：

```
gem update watir-webdriver 
```

# objective-c - 按下按钮时应用程序崩溃

> ID：10946747
> 
> 赞同：1
> 
> 时间：2012-06-08T10:00:43.280
> 
> 标签：objective-c, ios, cocoa-touch

我已经使用代码加载了一个新视图

```
UIViewController* newController = [[UIViewController alloc] initWithNibName:@"NFCController" bundle:nil];
[self.view addSubview:newController.view]; 
```

这可以完美地加载到新视图中。但是，我已将新视图中的一个按钮连接到一个类，以便我可以使用按下事件来做事。但是，即使该方法仍然只是：

```
- (IBAction)donePress:(id)sender {} 
```

该应用程序仍然崩溃。我在 main.m 中的主要方法上收到错误 EXC_BAD_ACCESS。

有没有人有任何想法可能导致这种情况？我可以根据要求提供更多信息。

谢谢。

编辑：所有连接到方法的控件都会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:19:57.033

您的控制器将被释放，因为它没有保留在任何导致崩溃的地方。只有您的控制器的视图被保留。

保持您的控制器与

```
//declaring newController as (strong) in .h file and use
self.newController = [[UIViewController alloc] initWithNibName:@"NFCController" bundle:nil];

[self.view addSubview:self.newController.view]; 
```

现在你的控制器也被保留了。您的代码现在可以正常工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:32:28.553

尝试您是否输入了正确的 nib 文件名称，以及 nib 文件是否响应您的控制器类。

# codeigniter - 无法在 codeigniter 中安装 datamapper

> ID：10946748
> 
> 赞同：0
> 
> 时间：2012-06-08T10:00:50.460
> 
> 标签：codeigniter, codeigniter-2, codeigniter-datamapper

我已经完成了所有必需的设置，但我不知道我哪里出错了。谁能帮帮我。它真的很紧迫。以下是我运行项目时遇到的错误。

**无法加载请求的文件：helpers/datamapper_helper.php**

请有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:51:17.997

在文件“autoload.php”中应该定义如下：

```
$ autoload ['helper'] = array (.... something ....., 'DataMapper'); 
```

用以下方式更好地说明：

```
$ autoload ['helper'] = array ('url'); 
```

或者你放置控制器的地方：

```
$ this-> load-> helper (array (... something ....., 'form', 'DataMapper')); 
```

用以下方式更好地说明：

```
$ this-> load-> helper (array (... something ....., 'form')); 
```

即删除“DataMapper”一词并再次将您的设置修改为： [http ://datamapper.wanwizard.eu/pages/installation.html](http://datamapper.wanwizard.eu/pages/installation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:47:28.497

Datamapper 不包含名为 datamapper_helper 的帮助程序。

所以要么你在你的应用程序中使用了第三方产品，要么你没有使用官方的 Datamapper 版本。

# android - Android中的onTouch、onLongClick一起

> ID：10946751
> 
> 赞同：8
> 
> 时间：2012-06-08T10:01:03.547
> 
> 标签：android, event-handling, touch-event, onlongclicklistener, ontouch

我正在动态地将 ImageViews 添加到父布局，`onTouch`并对添加的图像执行放大/缩小操作。

我想用`onLongPress`它删除添加的视图。

```
img.setOnLongClickListener(longClickAction);
img.setOnTouchListener(touchAction); 
```

长按：

```
OnLongClickListener longClickAction = new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        parentLayout.removeView((ImageView)v);
        return false;
    }
}; 
```

触摸：

```
OnTouchListener touchAction = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        ImageView i = (ImageView)v;

        // Perform zoom operation onTouch of ImageView
        zoom(i, event);
        return true; 
    }
}; 
```

为什么只有 onTouch 事件有效？

我怎样才能让他们都工作？

我应该怎么做才能删除添加的视图？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T10:09:56.610

`onTouch`总是为您的视图调用，因为这是将事件分派到视图的初始状态。当您长按您的视图时，它仍然会首先调用，`onTouch`并且由于您返回（这意味着您已经使用了此事件并且不应进一步分派它），您将不会被调用。诀窍是返回`true``onTouch``onLongPress``false``onTouch`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-31T07:55:07.890

正如@asenovm 所讨论的，[onTouch](https://stackoverflow.com/a/10946881/4629101) **() 总是被调用，因为它是将事件分派到视图的初始状态，**但如果我们在**onTouch()中返回值****false** ，那么两者都会像魅力一样工作，**问题就会得到解决。**

 ******编辑：**我对用户的建议是，不要同时实现 OnLongClickListener() 和 OnTouch()，而是尝试在**双击**事件中使用 OnLongClickListener() 的功能。

**您可以通过以下方式实现双击：**

```
int i = 0;
btn.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    i++;
    Handler handler = new Handler();
    Runnable r = new Runnable() {

        @Override
        public void run() {
            i = 0;
        }
    };

    if (i == 1) {
        //Single click
        handler.postDelayed(r, 250);
    } else if (i == 2) {
        //Double click
        i = 0;
        ShowDailog();
    }

  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-28T06:41:52.483

试试这个，它对我来说很好用。

```
boolean isMoving= false;

yourView.setOnTouchListener(new View.OnTouchListener(){
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            isMoving = true;
            Log.i("isMoving:", "true");
        }
        if(event.getAction()==MotionEvent.ACTION_UP){
            isMoving=false;
            Log.i("isMoving:","false");
        }
        return false;
    }
});
yourView.setOnLongClickListener(new View.OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        if(!isMoving){
            //do onlongclick event here
        }
        return true;
    }
});; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:07:01.637

[动态删除控件](https://stackoverflow.com/a/10515816/1438915)

可以帮助你

[使用 onTouch 和 onLongClick](http://androidforums.com/application-development/17033-ontouch-onlongclick-together.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-21T04:21:58.473

如果您需要手指保持静止，那么在**Kotlin**中最简单的方法就是这样

在*onCreateView*：

```
view.setOnTouchListener(this)
view.setOnClickListener(this)
view.setOnLongClickListener {
    if (! isFingerMoving) {
        Toast.makeText(activity, "Long click detected", Toast.LENGTH_LONG).show()
        //do something
    }
    false
} 
```

在*onTouch*中：

```
fun onTouch(v: View?, event: MotionEvent): Boolean {
    when (event.actionMasked) {
        MotionEvent.ACTION_DOWN -> {
            isFingerMoving = false
            lastTouchX = event.getX(0)
            lastTouchY = event.getY(0)
            ...
        }

        MotionEvent.ACTION_MOVE -> {
            val deltaX = (x - lastTouchX) * event.xPrecision
            val deltaY = (y - lastTouchY) * event.yPrecision
            if ((deltaX.absoluteValue > 0.1) || (deltaY.absoluteValue > 0.1)) 
                isFingerMoving = true            
            ...                 
        }
    }
    return false
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-07T15:21:30.133

您无法通过 setOnLongClickListener 和 setOnTouchListener 一起实现这一点，因为当您在 onTouch 方法中返回 true 时，它​​假定您处理所有触摸事件，您可以通过延迟后实现长点击并在超时后调用方法，但您需要检查是否仍在按下或操作被解雇可能是这个代码快照帮助你

```
 mBinding.iv2.setOnTouchListener(object : View.OnTouchListener {

        var stillPress = false
        override fun onTouch(view: View?, motionEvent: MotionEvent?): Boolean {
            if(motionEvent?.action == MotionEvent.ACTION_DOWN){
                 stillPress = true
                Handler(Looper.getMainLooper()).postDelayed({
                    if(stillPress)
                        zoomImageFromThumb(view!!,R.drawable.ic_baseline_adb_24)
                },1000)
            }

            if(motionEvent?.action == MotionEvent.ACTION_UP){
                stillPress = false
                mBinding.expandedImage.performClick()
            }
            return true

        }
    }) 
```****

# linux - 负责配置进程数和线程数的 Linux 配置参数有哪些？

> ID：10946755
> 
> 赞同：0
> 
> 时间：2012-06-08T10:01:37.753
> 
> 标签：linux, multithreading, operating-system, linux-kernel, pthreads

1.  Linux 进程和线程在哪里以及如何配置？

2.  管理进程和线程并确定其总数的底层 Linux 资源的名称是什么？

3.  是否有限制，如果有，可以在 Linux 系统中创建的线程和进程的总数是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T05:17:03.393

有一堆与此相关的 sysctl 和 ulimit。

linux 上的线程和进程都是在底层使用 clone 系统调用创建的，实际上都是一样的，只是参数不同。所以当你在 linux 上看到“进程”相关的设置时，大多数时候它们也是线程相关的设置。

```
$ ulimit -u 
```

...将获取/设置最大用户进程

您还需要查看：

```
/etc/security/limits.conf 
```

而且当然：

```
/proc/sys/kernel/threads-max 
```

我有超过 10000 个线程在 64 位系统上运行完全没有问题。如果您需要更多，则最好进行协作多任务处理，并自己处理“任务调度”。

# c - SSE/AVX 向量类型的差异

> ID：10946759
> 
> 赞同：1
> 
> 时间：2012-06-08T10:01:49.460
> 
> 标签：c, x86, sse, simd, avx

`_m256i`和 和`_m256d`和有什么不一样`_m256`？和 和 和有什么
区别？`_m128i``_m128d``_m128`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:51:42.623

经验法则：`i`后缀用于所有**整数**向量类型，`d`用于**双精度**浮点向量类型，如果没有后缀，则用于**单精度**浮点向量类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:38:13.943

[该文件指出](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/cpp/lin/intref_cls/common/intref_avx_details.htm)：

> `__m256`数据类型用于表示扩展 SSE 寄存器的内容 - YMM 寄存器，由英特尔® AVX 内部函数使用。该`__m256`数据类型可以保存 8 个 32 位浮点值。
> 
> 该`__m256d`数据类型可以保存四个 64 位双精度浮点值。
> 
> 数据类型可以保存 32个`__m256i`8 位、16 个 16 位、8 个 32 位或 4 个 64 位整数值。

# javascript - Google Maps API V3 和 Internet Explorer

> ID：10946762
> 
> 赞同：1
> 
> 时间：2012-06-08T10:01:55.020
> 
> 标签：javascript, internet-explorer, google-maps, google-maps-api-3

我正在使用 Google API 的页面内创建一个带有 wordpress 的网站。

该地图适用于除 IE 之外的所有浏览器（Firefox、Chrome、Safari、Opera）。

有地图的页是这个

[http://www.guicciardinistrozzi.it/tenute](http://www.guicciardinistrozzi.it/tenute)

如果我复制我链接的页面的源并复制到一个html文件中，就会发生一件奇怪的事情，IE可以显示地图。

我们证明了[http://www.guicciardinistrozzi.it/tenute_/index.html](http://www.guicciardinistrozzi.it/tenute_/index.html)

我试图用 wordpress strandard 更改永久链接结构，但没有结果。

我使用的javascript脚本如下：

*   inizializza.js

*   luoghi.js

地图的 CSS 代码是 luoghi.css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:02:05.070

谢谢！问题是 window.onload 事件。我已经解决了这个问题，将此代码添加到我的 inizializza.js 文件中。

函数加载脚本（）{

```
 var script = document.createElement("script");
 script.type = "text/javascript";
 script.src ="http://maps.googleapis.com/maps/api/js?key=****&sensor=false&callback=initialize";
 document.body.appendChild(script);
 }
 window.onload = loadScript; 
```

// IE（我添加的代码）

```
 document.write("<script id=__ie_onload defer src=javascript:void(0)><\/script>");
 var script = document.getElementById("__ie_onload");
 script.onreadystatechange = function() {
     if (this.readyState == "complete") {
         loadScript(); // call the onload handler
     }
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:33:35.203

您可以尝试在标题中添加此内容吗？

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T16:45:30.467

您的脚本插入没有发生在 IE 中。特别是，这条线没有效果：

```
window.onload = loadScript; 
```

如果您手动执行`loadScript`事件，则会显示地图。特定于 IE 的某些东西可能会覆盖 onload 事件。

查看[不带 jQuery 的 $(document).ready 等效](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery)项，以获得更好的方法来向 onload 事件添加侦听器。

# php - 按行内容将文件排序为数组

> ID：10946764
> 
> 赞同：1
> 
> 时间：2012-06-08T10:02:04.243
> 
> 标签：php, regex, arrays

我有一个这样的降价文件数组：

```
$mdfiles = glob("content/*.txt", GLOB_NOSORT); 
```

我想按每个文件中的某一行对文件进行排序。

一个示例文件是：

```
File
====
line-one:
date: [number-to-sort] 
```

然后在每个文件中按 [number-to-sort] 对文件数组进行排序，可以通过以下方式访问：

```
$file_array = file($mdfiles[*], FILE_IGNORE_NEW_LINES)
substr($file_array[*], 6); 
```

最后，我想从数组键值中删除每个`content/`和。`.md`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:31:56.823

代码在我看来要小得多，但生成的代码只有三行 :)

```
$files = glob('content/*.txt', GLOB_NOSORT);
// sort the file array by date; see below
usort($files, 'by_file_date');
// strip the filename
$files = array_map('strip_filename', $files); 
```

该`'by_file_date'`函数稍后声明，基本上在`get_date`内部使用该函数从文件中“拉取”日期。我`preg_match`根据您显示的表格使用了查找日期值；我假设这`date`是一个整数（即数字序列）。如果没有，请告诉我。

```
// pull date value from the file
// @todo this function can be optimized by keeping a static array of
//   files that have already been processed
function get_date($f)
{
    // match the date portion; i'm assuming it's an integer number
    if (preg_match('/^date:\s*(\d+)/', file_get_contents($f), $matches)) {
        return (int)$matches[1];
    }
    return 0;
}

function by_file_date($a, $b)
{
    // sort by date ASC
    return get_date($a) - get_date($b);
} 
```

最后，您需要剥离文件名；假设您只想要文件名而不是目录：

```
function strip_filename($f)
{
    // strip the directory portion
    return basename($f);
} 
```

不知道从哪里来`.md`，所以你必须让我知道那个:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T10:09:36.063

尝试类似的东西

```
foreach( $mdfiles as $file ) {
    $file_array = file($file, FILE_IGNORE_NEW_LINES);
    $order = substr( $file_array[0], 6 ); // get 6th character till the end of the first line
    $files[$order] = basename( $file, '.md' );
}
ksort($files); // might need this depending on how youre using the array 
```

你有大部分。只需要将文件放在一个新数组中，然后将目录和分机命名为基本名称

# javascript - 如何从模板级别呈现 JavaScript Image 对象？

> ID：10946766
> 
> 赞同：0
> 
> 时间：2012-06-08T10:02:15.793
> 
> 标签：javascript, image, knockout.js

我有一个可观察的图像对象数组，我想知道如何从模板角度渲染这些图像？

**编辑：**

我要做的是这样的：

```
<div data-bind="html: viewBoxImageHTML()"> 
```

`viewBoxImageHTML`对象的属性在哪里：

```
 self.viewBoxImage = ko.observable();
    self.viewBoxImageHTML = ko.computed(function(){
      if(self.viewBoxImage()){
          return self.viewBoxImage();
      }
      return '<p>LOADING IMAGE</p>';
    }); 
```

而这个 viewBoxImage 只是一个以某种异步加载方法加载的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:01:36.723

我已经通过这样的自定义活页夹完成了它：

```
ko.bindingHandlers.imageBinding = {
update: function (element, valueAccessor) {
    //appends the image to the binded element
    var value = ko.utils.unwrapObservable(valueAccessor());
    $(element).html(value);
} 
```

};

示例用法：

```
<div class="divWithImage"
     data-bind="imageBinding: SomeImageObject">                    
</div> 
```

# javascript - jquery焦点没有设置在firefox上

> ID：10946767
> 
> 赞同：4
> 
> 时间：2012-06-08T10:02:17.133
> 
> 标签：javascript, jquery

我想将焦点设置到我的文本区域。以下是我的代码：

```
$this.textInput.val('').show().focus(); 
```

但它不起作用。实际上，当我按下鼠标按钮时，它出现了，但是当我鼠标向上时，它从文本区域中删除。所以经过大量搜索后，我发现了 setTimout 方法，例如：

```
$this.textInput.mouseover(function(){                                
setTimeout($this.focus(),0);
}); 
```

但它仍然不能在Firefox中工作。我有最新的 13.0 版本，但它仍然包含问题，但谷歌浏览器工作正常。firefox有什么问题，有什么解决办法。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:04:20.857

使用`.trigger('focus')`. 我发现它有时比`.focus()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:50:27.223

试试这个 ：

```
$('#textareaid').click(function(){
                $(this).after('focused?');
                el = $(this);
                setTimeout(function(){
                    el.trigger('focus')
                },1);
            }) 
```

使用 .click 方法。我会为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:10:13.710

**$this**没有任何意义。你应该使用**$(this)**或者你可以设置一个像这样的变量 -

```
var $this=$(this) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T10:17:17.650

并非所有元素都是可聚焦的，但默认情况下，有一个 tabindex 属性可以解决这个问题。

当您分配`tabindex=<number>`给一个元素时：

它变得可聚焦。

用户可以使用 tab 键从具有较小正 tabindex 的元素移动到下一个元素。例外是一个特殊值`tabindex="0"`，意味着该元素将始终位于最后。这`tabindex=-1`意味着一个元素变得可聚焦，但 tab 键总是会跳过它。只有`focus()`方法有效

# c++ - noskipws对cin的影响>>

> ID：10946771
> 
> 赞同：8
> 
> 时间：2012-06-08T10:03:00.753
> 
> 标签：c++, stream, manipulators

据我了解，提取运算符会在开头跳过空格，并在遇到空格或流结尾时停止。noskipws 可用于停止忽略前导空格。

我有以下使用 noskipws 的程序。

```
#include <iostream>
using namespace std;

int main()
{
    char name[128];

    cout<<"Enter a name ";
    cin>>noskipws>>name;
    cout<<"You entered "<<name<<"\n";

    cout<<"Enter another name ";
    cin>>name;
    cout<<"You entered "<<(int)name[0]<<"\n";

    return 0;
} 
```

我的查询是：

1.  如果我输入“John”作为第一个输入，那么第二个 cin>> 操作不会等待输入并且不会将任何内容复制到目标，即名称数组。我希望第二个 cin>> 至少传输一个换行符或流的结尾，而不是仅仅将目标字符串设置为空。为什么会这样？

2.  当我输入“John Smith”作为第一个 cin>> 语句的输入时，也会观察到同样的情况。为什么第二个 cin>> 语句不将空格或“Smith”复制到目标变量？

以下是程序的输出：

```
Enter a name John
You entered John
Enter another name You entered 0

Enter a name John Smith
You entered John
Enter another name You entered 0 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T10:13:10.667

字符串的基本算法`>>`是：

```
skip whitespace
read and extract until next whitespace 
```

如果使用`noskipws`，则跳过第一步。第一次读取后，您将定位在空白处，因此下一次（以及所有后续）读取将立即停止，不提取任何内容。

`>>`到字符串永远不会将空格放入字符串中。更一般地说，使用`>>`with`noskipws`是有问题的，因为空格始终是 ; 的分隔符`>>`。准时使用它可能是有意义的，但通常应在使用后立即重置。（可能有意义的一次情况是使用`>>`to a时`char`。在这种情况下，流*总是*提取一个字符。）

# c# - c# 检查是否应用了任何图片

> ID：10946774
> 
> 赞同：0
> 
> 时间：2012-06-08T10:03:03.637
> 
> 标签：c#, winforms, picturebox

我正在尝试显示用户选择的文件夹中的图像。如果他选择了没有任何图片的记录，它将显示一个名为的图像

> 空.png

这是我写的代码。我怎样才能改变它以符合我在解释中写的内容？（这个问题的顶部）

```
 string[] fileEntries = Directory.GetFiles(@"C:\Projects_2012\Project_Noam\Files\ProteinPic");

            foreach (string fileName in fileEntries)
            {
                if (fileName.Contains(comboBox1.SelectedItem.ToString()))
                {
                    Image image = Image.FromFile(fileName);
                    // Set the PictureBox image property to this image.
                    // ... Then, adjust its height and width properties.
                    pictureBox1.Image = image;
                    pictureBox1.Height = image.Height;
                    pictureBox1.Width = image.Width;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:09:37.047

```
foreach (string fileName in fileEntries)
{
   if (fileName.Contains(comboBox1.SelectedItem.ToString()))
   {
     pictureBox1.Image = Image.FromFile(fileName);              
   }
   else
   {
     pictureBox1.Image = ImageFromFile("Empty.png");                
   }

   // Set the PictureBox image property to this image.
   // ... Then, adjust its height and width properties.
   pictureBox1.Image = image;
   pictureBox1.Height = image.Height;
   pictureBox1.Width = image.Width;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:11:03.863

```
string[] fileEntries = Directory.GetFiles(@"C:\Projects_2012\Project_Noam\Files\ProteinPic");

        if (fileEntries.Length == 0)
        {
            Image image = Image.FromFile("Path of empty.png");
            pictureBox1.Image = image;
            pictureBox1.Height = image.Height;
            pictureBox1.Width = image.Width;
        }
        else
        {
            foreach (string fileName in fileEntries)
            {
                if (fileName.Contains(comboBox1.SelectedItem.ToString()))
                {
                    Image image = Image.FromFile(fileName);
                    pictureBox1.Image = image;
                    pictureBox1.Height = image.Height;
                    pictureBox1.Width = image.Width;
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:21:10.503

我不认为你需要遍历目录中的每个文件来实现你想要的

```
 Image image;

        string imagePath = System.IO.Path.Combine(@"C:\Projects_2012\Project_Noam\Files\ProteinPic", comboBox1.SelectedItem.ToString());
        if (System.IO.File.Exists(imagePath))
        {
            image = Image.FromFile(imagePath);
        }
        else
        {
            image = Image.FromFile(@"C:\Projects_2012\Project_Noam\Files\ProteinPic\Empty.png");
        }

        pictureBox1.Image = image;
        pictureBox1.Height = image.Height;
        pictureBox1.Width = image.Width; 
```

# ruby-on-rails - 网址安全问题

> ID：10946775
> 
> 赞同：0
> 
> 时间：2012-06-08T10:03:05.037
> 
> 标签：ruby-on-rails, controller, routes

我知道这是个老问题，但我不明白为什么半年前有效的代码不起作用。所以我想让只有所有者才能访问他们的帖子。我认为它可以这样写：

```
 def create
   @post = current_user.posts.new params[:post]
  if @post.save
    flash[:notice] = 'Post created'
    redirect_to @post
  else
    render :new
  end
    end 
```

并在编辑和其他控制器中

```
 def edit
       if (current_user.id == @post.user_id)
    @post = Post.find params[:id]
  else
    flash[:notice] = 'You are not owner!'
  end
end| 
```

但是在我登录时得到的视图中：

```
 undefined method `user_id' for nil:NilClass 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:07:30.873

```
def edit
  # The @post is nil unless you set it in a before filter.
  if (current_user.id == @post.user_id)
    @post = Post.find params[:id]
  else
    flash[:notice] = 'You are not owner!'
  end
end 
```

你应该先找到帖子。

```
def edit
  @post = Post.find params[:id]
  if (current_user.id != @post.user_id)
    flash[:notice] = 'You are not owner!'
  end
end 
```

# c# - 在 Windows Embedded CE 6.0 上开发 .Net Compact Framework

> ID：10946776
> 
> 赞同：5
> 
> 时间：2012-06-08T10:03:07.710
> 
> 标签：c#, compact-framework, windows-ce

我正忙于为 Windows CE 6.0 开发一个 .Net compact Framework 3.5 应用程序，并且真的很难弄清楚如何启动并运行开发环境来调试我的代码。

创建 Visual Studio 项目并编写代码不是问题。但是现在按 F5 并在实际的 Win CE 6.0 模拟器（或类似的模拟器？！）中运行这只小狗是我卡住的地方，我已经用谷歌搜索了这个主题，只是没有找到任何好的教程/文档/帮助从'n Visual Studio 项目中获取它以在 Win CE 6.0 中调试项目（甚至运行简单的 hello world）。

所以我的问题是这个。任何人都可以向我指出一个好的教程的方向（或自己提供一个）以启动并运行 Win CE 6.0 开发环境。

也许我遗漏了一些东西，只是无法连接和调试到 Win CE？如果是这样，您一般如何建议调试 Compact Framework 代码？

我最接近 CE 教程的是：[http](http://tech-stuff-home.blogspot.com/2011/03/building-workspace-for-device-emulator.html) ://tech-stuff-home.blogspot.com/2011/03/building-workspace-for-device-emulator.html 我已经完成了所有步骤本教程让 Win CE 构建运行，但问题是这不会将 Compact Framework 开发连接到上面创建的设备。编辑：即使我在设备模拟器中运行 CE（使用上面的教程），在部署 CF 项目时，我也无法将其作为设备模拟器管理器中的部署选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:53:03.050

您应该使用 CoreCon 建立连接。所涉及的步骤是

*   将所有 CoreCon 位从您的开发 PC 复制到设备（模拟器只是一个设备）

![在此处输入图像描述](../Images/37256a93423bb06be01e10df4c145e29.png)

*   验证/记下设备的 IP 地址

![在此处输入图像描述](../Images/97b7f3c1f755729b90b9cabac6991456.png)

*   修改 PC 中的连接以使用该地址进行连接

![在此处输入图像描述](../Images/8bb881aed48d85e54893416b66570dac.png)

*   运行 conmanclient2.exe（在设备上）
*   运行 cmaccept.exe（在设备上）
*   验证目标设备是否设置为您配置的设备

![在此处输入图像描述](../Images/8dacf24da6d1059d28a8745213497597.png)

*   从 Studio 测试连接

![在此处输入图像描述](../Images/2f409f4354298c287c69270b8b326098.png)

*   调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:49:47.093

这对我来说并不完全清楚，但我知道您在模拟器中运行没有问题，但您无法在实际设备上运行或调试应用程序？

我不能说实际上是什么导致了它，但我总是检查的事情：

*   设备未连接（您可以在我的电脑中看到它吗？）

*   确保选择设备选项而不是模拟器（在 VS2008 的工具栏中，您应该可以看到“设备”面板。在此面板中，您可以切换设备，并且应该选择“Windows Mobile 6 ... 设备” . 尝试从那里连接而不实际运行应用程序。

*   检查配置管理器，将其设置为调试（发布有时会出现问题）
*   在项目选项中，检查设备选项卡。选择适当的目标并选择性地检查“部署最新版本的 .NET”以确保所有文件都在那里。
*   根据您的系统操作系统，可能需要安装 ActiveSync (XP) 或 Windows Mobile Device Center（Vista 及更高版本）。安装后，连接设备并让 Windows 安装所需的所有驱动程序。然后重新启动并尝试再次连接。在这两种情况下，连接设备都应该调用来自 Windows 的响应以连接到您的设备。
*   尝试使用 Visual Studio 远程工具，例如远程文件查看器。它有效吗？

尝试连接时是否收到任何类型的错误消息？不幸的是，我从来没有找到关于这个主题的好教程。几年前我开始 CF 开发时，我学到了所有这些东西。

# java - 使用文档根设置嵌入式码头

> ID：10946780
> 
> 赞同：2
> 
> 时间：2012-06-08T10:03:13.873
> 
> 标签：java, servlets, webserver, embedded-jetty

如果我在浏览器中输入[http://example.com/index.html，jetty](http://example.com/index.html)应该在指定的目录中查找文件 index.html。

如何使用嵌入式码头实现这一目标？

这是我启动码头的代码：

```
InetSocketAddress socketAddress =InetSocketAddress.createUnresolved("0.0.0.0", 80);
Server server = new Server(socketAddress);
server.start();
server.join(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:18:48.343

[在http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)找到了一个很好的描述

```
public class FileServer{

    public static void main(String[] args) throws Exception{

        Server server = new Server();
        SelectChannelConnector connector = new SelectChannelConnector();
        connector.setPort(8080);
        server.addConnector(connector);

        ResourceHandler resource_handler = new ResourceHandler();
        resource_handler.setDirectoriesListed(true);
        resource_handler.setWelcomeFiles(new String[]{ "index.html" });

        resource_handler.setResourceBase(".");

        HandlerList handlers = new HandlerList();
        handlers.setHandlers(new Handler[] { resource_handler, new DefaultHandler() });
        server.setHandler(handlers);

        server.start();
        server.join();
    }
} 
```

# android - Android默认锁屏上的应用小部件？

> ID：10946784
> 
> 赞同：3
> 
> 时间：2012-06-08T10:03:23.433
> 
> 标签：android, android-widget, widget, android-appwidget, appwidgetprovider

我只想知道是否可以将小部件添加到我们的 Android 锁定屏幕。实际上，通过在主屏幕的菜单中选择小部件选项，我们将自己的或默认的小部件添加到主屏幕。是否可以将以下小部件添加到我们的锁定屏幕。可能吗....？我浏览了很多关于锁屏的网站，但我没有得到正确的信息。他们提供了与定制锁屏相关的信息。

![默认锁屏](../Images/2e110e6e2ac6fcadffea3fc56cc19092.png)

根据图像，我想要的主要是时间和日期，我们可以显示我们自己的小部件。我不想要任何定制的或我们自己创建的锁屏。我们可以将小部件添加到 android 提供的默认锁屏...？

等待回复，提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:58:07.273

Android 支持 Android 4.2+ 中的锁屏小部件。您问题中的屏幕截图显示了运行非常旧版本的 Android 的设备（我不确定是哪个版本），因此它无法正常工作。

# junit - TestNG 中是否有特定于测试类的侦听器（类似于 Junit runner）？

> ID：10946786
> 
> 赞同：0
> 
> 时间：2012-06-08T10:03:39.670
> 
> 标签：junit, testng

现有的 Junit 设置：

我编写了一个 junit 测试运行程序，它在执行测试类之前对其进行解析，并读取编写在测试类中每个可测试方法上的自定义注释。基于注释的聚合值制定一个配置，然后我用它来设置测试环境和操纵它。当基于对测试环境进行的操作执行测试时，我会生成结果。

当前状态 ：

现在我们正在为相同的任务评估 TestNg。我理解 TestNG 中的术语和执行方式有点不同。现在我为 TestNG 中的各种套件提供了不同的套件文件，每个套件都有一个测试部分，其中包含多个测试类。我也想要在 TestNG 中为 Junit（如上所述）所做的事情，因此，当执行套件并执行每个测试类时，就在执行测试类之前，我想执行我的环境设置和操作。我看到了文档TestNG 中的各种侦听器，并且无法为我的目的找到特定的侦听器（能够拦截单个类的执行）。那是做我需要的听众还是有办法实现我想做的事情？

我不希望以编程方式执行我的测试设置，而是想评估 TestNg 的功能，因此请为我寻求的内容提供答案，而不是谴责该方法本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:31:48.303

您能否发布一个测试类的示例，您使用的自定义注释并解释它们的作用？

根据您的描述，`IMethodInterceptor`可能是您需要的（TestNG 为您提供了即将运行的方法列表，您有机会更改该列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:43:38.067

得到了我正在寻找的解决方案。似乎我正在寻找的功能是通过实现接口 ITestRunnerFactory 提供的，它的 newTestRunner 方法返回一个 Test runner 。

# java - 无法在新行中写入字符串

> ID：10946788
> 
> 赞同：1
> 
> 时间：2012-06-08T10:03:50.627
> 
> 标签：java, io

我无法在文件中的新行中写入字符串，尽管我在字符串末尾添加了“\n”

```
public void writeEquation(String fileName, String expr) {     
        File aFile = new File(fileName);
        try {
            FileWriter writer = new FileWriter(aFile, true);
            BufferedWriter buffered = new BufferedWriter(writer);
            buffered.write(expr+"\n");
            buffered.flush();
            buffered.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    } 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T10:06:12.153

为什么不使用类提供的[newLine()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html#newLine%28%29)方法`BufferedWriter`呢？

> 写入行分隔符。行分隔符字符串由系统属性 line.separator 定义，不一定是单个换行符 ('\n')。

在您的代码中，更改：

```
 buffered.write(expr+"\n"); 
```

到 ：

```
 buffered.write(expr);
 buffered.newLine(); 
```

稍后编辑：我也不确定你想要新行的位置，但是如果你想确保你的`expr`字符串被添加**到文件末尾的新行上**，那么在调用之前调用该方法`buffered.write(expr)`：

```
buffered.newLine();
buffered.write(expr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:06:53.730

的使用`BufferedWriter.newLine()`方法`BufferedWriter`。这将有助于克服依赖于操作系统的怪癖

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:06:05.130

做

```
buffered.write("\n"+expr); 
```

当您执行 expr+"\n" 时，您的字符串后面会出现换行符。

# c# - 使用 mvc3 将图像保存到文件系统

> ID：10946789
> 
> 赞同：4
> 
> 时间：2012-06-08T10:03:53.483
> 
> 标签：c#, asp.net-mvc-3, image

我有一些简单的实体，现在需要一个个人资料图像。这样做的正确方法是什么？因此，这是一对一的关系，一张图像仅与一个实体相关，反之亦然。此图像应通过网络表单上传，并插入相关实体。

因此，正如我被指出使用文件系统来存储图像并仅将路径图像持久保存到数据库中时，我不得不询问是否有人提供任何教程或链接，或代码示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:14:20.013

我使用实体框架将图像源本身保存到数据库中，并确保在数据库中包含以下内容：

*   创建日期
*   文件类型（内容类型）
*   源（二进制）
*   文件名
*   文件大小
*   高度
*   宽度

我使用字节流/BinaryReaders 加载它。我的代码在这里：

[http://garfbradazweb.wordpress.com/2011/08/16/mvc-3-upload-sql-server-entity-framework/](http://garfbradazweb.wordpress.com/2011/08/16/mvc-3-upload-sql-server-entity-framework/)

完整的教程系列在这里： http: [//garfbradazweb.wordpress.com/welcome-to-my-ancedotes/#](http://garfbradazweb.wordpress.com/welcome-to-my-ancedotes/#)

在关系方面，我有以下几点：

**媒体表**- 存储所有图像并包括上述列。您可能需要与其他表格相关的图像。关键是 C# 类型为 Guid 的 uniquieid (SQL)。

**个人资料表**- 存储我的用户个人资料。在这里，我有一个 ImageId，它是配置文件行和图像之间的一对一关系。

我已经编写了一个 MVCImage 应用程序，它向您展示了如何在这里使用它：

[http://mvcimage.codeplex.com/](http://mvcimage.codeplex.com/) 让我知道这是否可行或者您是否需要代码示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:11:40.103

使用图像创建实体应执行的步骤。

1.  创建带有图像上传的 asp 表单并为实体收集数据。理想情况下，如果您分两步进行，即第一个图像上传。
2.  在提交帖子图像（也许你必须为大图像配置一些东西）和实体数据
3.  在后端检查图像。如果可以，请存储在文件夹中。
4.  如果图像正常，则在数据库中创建实体。实体图像路径应从步骤 3 中的数据更新。

一些建议：

*   防守代码。
*   在上传图像时检查图像是否有效（甚至对图像头进行二进制检查）
*   等到图像上传并检查以创建实体。
*   在插入新实体的情况下，不允许覆盖现有图像。
*   将图像命名为主键（1.jpg、2.jpg）
*   在加载图像时不要假设图像会在那里。
*   不允许（如果可能）与图像进行手动交互（禁止在机器中远程处理并将图像从一个地方复制到另一个地方）。手动交互可能会导致不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:11:19.980

对于单个图像，我会将其直接存储在表中。您不会膨胀数据库，因为您会将图像大小调整为可接受的大小（即 128x128 像素）。

此外，无需担心文件系统备份和多个 Web 服务器的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:09:06.143

您可以将 HTML 输入标记与文件类型一起使用：

```
<input type="file" name="file" /> 
```

[可以在此处](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0)找到完整的 MVC 示例。

# android - 方向改变后恢复视图

> ID：10946790
> 
> 赞同：0
> 
> 时间：2012-06-08T10:03:54.303
> 
> 标签：android, view, screen-orientation

我正在将 TextViews 添加到我的布局中，并且我想在屏幕方向更改时保留它们。

我尝试了以下代码，但它不起作用。

```
public class DetailsActivity extends Activity {

    private HashMap<View, TextView> views = new HashMap<View, TextView>();;

    @Override
    public Object onRetainNonConfigurationInstance() {      
        return views;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.layout44);

        findViewById(R.id.layout44_11).setOnLongClickListener(onLongClickListener);
        ...

        HashMap<View, TextView> data = (HashMap<View, TextView>)this.getLastNonConfigurationInstance();

        if (data == null) {
            System.out.println("is null");
        } else {
            for(View key : data.keySet()) {
                ViewGroup parent = (ViewGroup) key;
                System.out.println(key + " " + data.get(key));

                System.out.println(parent.getChildCount());
                System.out.println("child: " + parent.getChildAt(0));;

                parent.removeView(data.get(key));
                data.get(key).setText("asd");
                data.get(key).setVisibility(View.VISIBLE);
                parent.addView(data.get(key));
            }
            System.out.println("-------------------");
        }
    }

    private View.OnLongClickListener onLongClickListener = new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            ViewGroup parent = (ViewGroup) v;
            if(parent != null) {
                TextView tv = new TextView(getApplicationContext());
                tv.setText("TextView");
                views.put(parent, tv);
                parent.addView(tv);
            }
            return false;
        }
    };
} 
```

我遇到了异常：

> 引起：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

为什么？我究竟做错了什么？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:52:56.167

当您更改屏幕方向时，您实际上所做的是破坏您的活动，然后重新启动它。

如果您在 onCreate() 方法中添加了 10 个 TextView，请不要担心，它们将完全按照以前的方式添加，无需任何交互。

但是，如果您的活动有一些用户输入或一些处理使活动有状态（活动有按钮按下或提交数据），您将需要使用`onSavedInstanceState(Bundle out)`保存所有状态信息（基本类型，**非**视图）和然后`onCreate()`您可以将这些信息从 Bundle 中提取出来以重新创建状态。

**永远不要**绕过`Views`活动（或在方向更改之间）。视图归其活动所有，当它们被传递时，它们会带上它们的原始活动。

如果您是 Android 新手，可以这样想：如果您在艺术画廊中，并且建筑物即将被拆除，并且将建造一个新的艺术画廊（您从横向切换到纵向），那么您将想从第一个画廊拿走所有的艺术品，然后把它放在新的画廊里。您不会将第一个画廊的墙壁（视图）撕开来建造第二个画廊，您将建造第二个画廊，然后将艺术品挂在新画廊的墙壁（视图）上。

# android - 如果 AsyncTask 需要时间，则显示 ProgressDialog

> ID：10946793
> 
> 赞同：1
> 
> 时间：2012-06-08T10:04:02.157
> 
> 标签：android, android-asynctask, progressdialog

我有一个这样的 AsyncTask：

```
private class RetrieveDataAsyncTask extends AsyncTask<Void, Void, Boolean> {

    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
            progressDialog = ProgressDialog.show(getSherlockActivity(), "In progress", "Loading"); 
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        try {
            currentScreen.retrieveData();
            return true;
        } catch (IOException ex) {
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean result) {
            progressDialog.dismiss();
            if (result) {
                currentScreen.retrieveDataFinished();
            } else {
                showExceptionOccurred();
            }
    } 
```

现在，当 AsyncTask 花费的时间少于 500 毫秒时，我不想显示 ProgressDialog，它只会导致闪烁并且可能会令人讨厌。我想要的是等待 500 毫秒，检查 AsyncTask 是否仍然忙，如果是，则显示 ProgressDialog。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:22:49.317

尝试这样做：

```
final Handler handler = new Handler();

private class RetrieveDataAsyncTask extends AsyncTask<Void, Void, Boolean> {

    ProgressDialog progressDialog = null;

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected Boolean doInBackground(Void... params) {
        handler.postDelayed(pdRunnable, 500);

        try {
            currentScreen.retrieveData();
            return true;
        } catch (IOException ex) {
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean result) {
            handler.removeCallbacks(pdRunnable);
            if(progressDialog != null)
                 progressDialog.dismiss();

            if (result) {
                currentScreen.retrieveDataFinished();
            } else {
                showExceptionOccurred();
            }
    }

    final Runnable pdRunnable = new Runnable() {
            @Override
            public void run() {
                progressDialog = ProgressDialog.show(getSherlockActivity(),
                "In progress", "Loading");
            }
    };

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:31:58.540

@Stan 的建议似乎是正确的：

尝试以下行`onPreExecute()`：

```
@Override
protected void onPreExecute() {
    Timer t =new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
        progressDialog = ProgressDialog.show(getSherlockActivity(), "In progress", "Loading"); 
        }
    }, 500);

} 
```

# asp.net - ASP.Net MVC Web API 返回对象列表

> ID：10946794
> 
> 赞同：1
> 
> 时间：2012-06-08T10:04:06.703
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

如何正确返回“CarTypes”对象列表（来自第二种方法），其中传入的 TyreID 不是 CarType 类的主键 - 例如，我想返回所有 CarTypes 的列表，其中 TyreID 为 5：

```
// GET api/CarTypes
public IEnumerable<CarTypes> GetCarTypes()
{
    return db.CarTypes.AsEnumerable();  //This works fineCar
}

// GET api/CarTypes/5
public IEnumerable<CarTypes> GetCarTypes(long id)
{
    CarTypes cartypes = db.CarTypes.Select(t => t.TyreID == id).AsEnumerable();
    if (roomtypes == null)
    {
        throw new HttpResponseException(Request
            .CreateResponse(HttpStatusCode.NotFound));
    }

    return cartypes;
} 
```

它当前显示错误：

无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“MvcApplication4.Models.CarTypes”。存在显式转换（您是否缺少演员表？）

如果我在查询中使用 Select/SelectMany/Where 是否重要？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T10:31:14.417

首先，您需要使用`Where`而不是`Select`; 其次，在将 AsEnumerable() 更改为 Where 后，您不需要使用它，但您可能必须调用 ToList() 以便 Linq2Sql/EntityFramework 在将值返回到视图之前执行查询。

```
 // GET api/CarTypes/5
    public IEnumerable<CarTypes> GetCarTypes(long id)
    {
        var cartypes = db.CarTypes.Where(t => t.TyreID == id).ToList();
        if (cartypes == null || !cartypes.Any())
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return cartypes;
    } 
```

我还在查询执行后添加了一个额外的检查，但你可能不需要这个，这取决于你想如何处理一个空集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:28:01.320

你不应该有：

```
IEnumerable<CarTypes> cartypes = db.CarTypes.Where(t => t.TyreID == id).AsEnumerable(); 
```

代替：

```
CarTypes cartypes = db.CarTypes.Select(t => t.TyreID == id).AsEnumerable(); 
```

注意：我会在 PanJanek 的回答下发表评论，但由于我的声誉低下，我目前不被允许...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:08:57.850

您应该使用“Where”而不是“Select”。

```
CarTypes cartypes = db.CarTypes.Where(t => t.TyreID == id).AsEnumerable(); 
```

“选择”用于指定应为**每条**记录返回哪些数据，而不是用于过滤记录。您使用“Select”的查询返回布尔值：对于 TyreID != id 的记录为 false ，对于 TyreID = id 的一条记录为 true :)

# templates - 在 Flask 中一次渲染多个模板

> ID：10946795
> 
> 赞同：17
> 
> 时间：2012-06-08T10:04:07.253
> 
> 标签：templates, render, flask

我正在制作一个 Flask 应用程序。我有一个登录区，一个博客区。如果我想获取用户的登录信息，我将渲染登录模板。但这不会呈现必须显示在登录区域下方的博客模板。：/

我会尽量让它更清楚：

```
{% block login %} {% endblock %}
blah blah
{% block blog_display %} {% endblock %} 
```

现在我有一个`login.html`扩展它，并进入登录块。我有一个`blogs.html`进入`blog_display`. 如何渲染两者？当我这样做时`render_template()`，我只能在`login.html`or之一上调用它`blogs.html`。

请帮帮我。如果您要求，我会提供更多详细信息。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T16:48:00.520

您可能以错误的方式考虑布局。您的布局是*最*通用的模板，而不是最复杂的模板。如果您需要很少的独立功能，请*按原样*编写它们，并[`include`](http://jinja.pocoo.org/docs/templates/#include)在需要它们的地方编写它们。

也就是说，如果你想要这样的东西：

```
----------------------------------
                  +--------------+
  Header          |   Login      |
                  +--------------+
----------------------------------

  Body Content (Blog) 
```

而且您还希望有一个独立的登录页面，如下所示：

```
----------------------------------

  Header

----------------------------------

  +--------------+
  |   Login      |
  +--------------+ 
```

然后[`include`](http://jinja.pocoo.org/docs/templates/#include)在需要的地方创建一个登录部分。

## 例子

**模板/部分/login.html**

```
<form action="/login" method="post">
<!-- Your login goes here -->
</form> 
```

**模板/your_base.html**

```
<!DOCTYPE html>
<html>
<head>
{% block head %}
{# 
Default HEAD content goes here 
with extra nested blocks for children to override 
if needed. 
#}
{% endblock head %}
</head>
<body>
<header>{% block header %}{% endblock header %}</header>
{# Note: This assumes we *always* want a header #}
{% block content %}{% endblock content %}
</body>
</html> 
```

**模板/login.html**

```
{% extends "your_base.html" -%}
{% block content -%}
{% include "partials/login.html" %}
{%- endblock content %} 
```

**模板/blog.html**

```
{% extends "your_base.html" -%}
{% block header -%}
{{ super() }}{# Render the default header contents here #}
{% include "partials/login.html" %}
{%- endblock header %}
{% block content -%}
{# Render your blog posts here #}
{%- endblock content %} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-03T17:50:15.457

肖恩的回答很好，但如果你不想扩展块，你可以选择一个更简单的解决方案，我更喜欢这个。

```
{% include "partials/login.html" %} 
```

只需在需要包含模板的任何地方使用它

# javascript - 如何使用 javascript 在子窗口中添加脚本文件？

> ID：10946800
> 
> 赞同：3
> 
> 时间：2012-06-08T10:04:22.030
> 
> 标签：javascript

如何使用 javascript 在子窗口中添加脚本文件？

考虑以下代码：

```
myWindow = window.open("", "", 'width=650,height=700,menubar=yes,resizable=yes,scrollbars=yes');
myWindow.focus();
myWindow.document.write('<script src="'+App.data.assets_url+'\/javascript\/jquery.js"><\/script>'); 
```

上面的代码在 IE 中不能正常工作。它显示空白（子）窗口，但在 chrome 中它可以正常工作。它显示了子窗口的所有内容。

`myWindow.document.write`在 Mozilla 中，由于上述浏览器的打印选项，它也无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:13:13.897

基本上：

```
var win, doc;

win = window.open('', 'dialog', opts);
doc = win.document;

doc.write(
    "<html><head>"
    + "<script type='text/javascript' src='path/to/your/script.js'></script>"
    + "<script type='text/javascript'>"
    + "/* this is inline script inserted by JavaScript, below is a function converted to it's string representation */"
    + someFuncInVariable.toString()
    + "</script>"
    + "</head><body>"
    + "</body></html>"
);
doc.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:06:33.430

假设您没有跨域，您可以简单地执行此操作（使用 jquery）：

```
$(childwindow.document.body).append('<script src="..."></script>'); 
```

但是更详细的问题可能会提供更多关于主题的答案。

# linux - 是否有与justniffer for windows等效的嗅探器？

> ID：10946806
> 
> 赞同：0
> 
> 时间：2012-06-08T10:04:39.643
> 
> 标签：linux, http, email, networking, sniffer

我使用一个非常酷的[嗅探器](http://justniffer.sourceforge.net/)来记录来自网络的所有 Web 和邮件流量。它被动地捕获流量并将其记录为 apache 访问日志格式。所以我可以发布网络导航统计的进程日志（访问最多的主机、内容大小等）

我们还使用它来创建邮件流量，以便能够识别由安装在连接到 LAN 的 PC 上的恶意软件（垃圾邮件恶意软件等）引起的异常流量。

问题是有一个仅适用于 linux 操作系统的版本。但它基于 libpcap。所以我认为由于 winpcap 是 libpcap 上的窗口版本，因此为 Window Server 找到类似的工具可能并不难。

任何机构都可以向我推荐一个类似的 Windows 工具吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:09:29.827

考虑[cain 和 abel](http://www.oxid.it/cain.html)，它们也有其他很好的设施。该网站将其描述为“密码恢复工具……[它]可以通过嗅探网络、破解加密密码等方式轻松恢复各种密码”。它的目标用户是网络管理员、法医专业人员和其他打算以合乎道德的方式使用它的人。

# java - JPA joinColumn 错误

> ID：10946809
> 
> 赞同：0
> 
> 时间：2012-06-08T10:04:57.550
> 
> 标签：java, jakarta-ee, jpa

我正在尝试模拟一对一的关系。当我尝试
在连接列属性中添加 nullable = false 时，我得到一个 SQLIntegrityContraintViolationException 说地址的 ID 为空。我期待这是因为，我在 id 中使用的自动生成的值是在提交时生成的。（我对吗 ？） ...

但是，当我在地址构造函数中进行修改时，通过在那里设置一个 id 然后尝试持久化..我得到了同样的异常。我不懂为什么。

但是，如果我删除 nullable = false，我可以正常执行它。请解释我哪里出错了。

这是我的实现.. 为简单起见，省略了 Getter 和 Setter。

```
 @Entity
    public class CustomerEX implements Serializable {
        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        private Long id;
        private String name;
        @OneToOne(fetch = FetchType.LAZY,cascade = CascadeType.PERSIST)
        @JoinColumn(name="address_fk")  
        private AddressEx address;

  public void setAddress(AddressEx address) {
    this.address = address;
    this.address.setCustomer(this);
 }

        ---
        ----
    }

and 

       @Entity
    public class AddressEx implements Serializable {

        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue
        private Long id;
        private String city;
        private String country;
        @OneToOne
        private CustomerEX customer;
        } 
```

我的主要功能是......

```
public class CustomerTest {

    public static void main(String[] args) {
        AddressEx addr = new AddressEx();
        addr.setCity("Bangalore");
        addr.setCountry("India");
        System.out.println(addr.getId()+ " is the id of this object");
        CustomerEX cust = new CustomerEX();
        cust.setName("ravi");

        cust.setAddress(addr);

        EntityManagerFactory emf = Persistence.createEntityManagerFactory("PersistenceAppPU");
        EntityManager em = emf.createEntityManager();

        EntityTransaction etx = em.getTransaction();                 
        etx.begin();
        em.persist(cust);
        etx.commit();
    }
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:54:06.083

您应该将持久操作从客户级联到地址。您正在保存客户，但地址还没有 ID，因为它是生成的

# php - 将 PHP crypt() 结果存储在数据库中是否安全？

> ID：10946810
> 
> 赞同：8
> 
> 时间：2012-06-08T10:04:58.373
> 
> 标签：php, security, crypt

例如，对于***河豚***，它会返回如下内容：

`$2a$12$DEzG.CRsHpxpTOAHooQ.wuR6Xe9h6PxFPhOcOvf.lqDNw1TVYVnEO`

它包含有关散列算法类型的信息，并且包含盐。很多资源说只将这个值存储在数据库中，它将是安全的。但是，难道不能有人针对这些值测试一个常见的密码列表来破解其中的一些吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T10:18:55.513

密码散列的安全性并非来自于信息的机密性。您已经丢弃了实际的秘密，即作为哈希值基础的密码。剩余的哈希只是原始数据的一种指纹。安全性来自这样一个事实，即不可能从散列中导出原始数据。唯一的可能性是尝试所有可能的密码，看看哪个产生相同的哈希值。这里的安全性来自这样一个事实，即这在计算上非常昂贵并且不太可能在有用的时间内成功。

引入盐只是为了防止有人使用已经预先计算的一组已知散列密码，从而迫使攻击者使用唯一的盐实际重新散列所有可能的密码。盐本身不是秘密，散列算法也不是。

简而言之：是的，该值绝对可以安全地存储在数据库中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T10:08:43.870

生成的哈希`crypt()`是专门用于存储的。无论您的密码散列方案是什么，如果有人掌握了您的数据库内容，他们将能够暴力破解您的密码，并且您根本无法选择不存储密码散列。所应用的算法`crypt()`是专门选择的，因为它们需要大量时间来计算哈希；当您只测试一个密码时，这并不明显，但是暴力破解数千个密码变得不切实际地慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T10:15:56.237

> 但是，难道不能有人针对这些值测试一个常见的密码列表来破解其中的一些吗？

无论密码如何存储，您始终可以这样做。crypt 函数并不能阻止这一点，但它会让它变得非常慢。如果用户使用一个真正常见的密码（如 123456），世界上没有散列算法可以保护他。

如果您不允许使用这些简单的密码并使用良好的散列算法（crypt() 提供），那么您已尽最大努力保护密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:26:55.630

如果有人可以访问您的数据库，那么他们将可以通过任何方式访问 salt，因为您应该为每个用户密码使用不同的 salt（您很可能将其存储在数据库中）。

盐的重点是彩虹表不起作用。个人必须重新散列密码+盐的每个组合才能确定密码。您对每个密码使用不同的盐，因此他必须为每个密码重新生成数百万个哈希值。

可以在此处找到有关 crypt 的更多有用信息： [为什么 PHP crypt() 将盐添加到哈希中？](https://stackoverflow.com/questions/4807677/why-does-php-crypt-prepend-the-salt-to-the-hash)

# ruby - 如何在heroku中停止控制台进程

> ID：10946811
> 
> 赞同：0
> 
> 时间：2012-06-08T10:05:08.310
> 
> 标签：ruby, heroku, console

我正在使用 ps:stop 但这不起作用。

有谁知道他们最近是否更新了？

谢谢！

```
M-MacBook-Pro:SN m$ heroku ps
Process       State               Command
------------  ------------------  ------------------------------
run.5         up for 17h          rails c
web.1         up for 1h           bundle exec rails server -p $PORT
web.2         up for 1h           bundle exec rails server -p $PORT
worker.1      up for 1h           bundle exec rake jobs:work
M-MacBook-Pro:SN m$ heroku ps:stop run.5
 !   ps:stop is not a heroku command. See 'heroku help'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:46:42.990

听起来您可能正在使用旧版本的 Heroku CLI，我能否确保您是最新版本以便能够使用该`heroku ps`命令

# visual-studio-2010 - 如何将键盘快捷键放在 Visual Studio 的上下文菜单中？

> ID：10946814
> 
> 赞同：0
> 
> 时间：2012-06-08T10:05:26.283
> 
> 标签：visual-studio-2010, shortcut

我想放入菜单下的上下文菜单“**切换大纲扩展**”：

`Edit->Outlining->Toggle outlining expansion`

但是当我去：

`Tools->Customize->Commands->Context menu->Edit context menu->Add command`

我在编辑菜单“切换大纲扩展”上找不到它。

为什么？

可能是因为它现在只是命令它是宏。

所以现在我的问题是我应该怎么做才能把这些宏放在上下文菜单中，它有快捷键`Ctrl`++ 。`M``M`

**如何将这些键盘快捷键放在上下文菜单中？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:01:39.717

我解决了录制“Toogle 大纲扩展”的问题，而不是从自定义中调用这些新宏。

脚步：

1.  **使用快捷键++**开始录制**宏****`CTRL``SHIFT``R`**
2.  启动您的快捷方式（在本例中为“Toogle 大纲扩展”）**`CTRL`+ `M`+`M`**
3.  停止录制**宏****`CTRL`++`SHIFT``R`**
4.  在宏资源管理器上保存那些新的宏**宏资源管理器->保存**
5.  打开自定义文件以加载宏**工具->自定义->命令->上下文菜单->宏->“name_of_your_macro”**

在保存的宏代码中看起来像这样

```
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports EnvDTE90a
Imports EnvDTE100
Imports System.Diagnostics
Public Module RecordingModule
    Sub TemporaryMacro()
        DTE.ExecuteCommand("Edit.ToggleOutliningExpansion")
    End Sub
End Module 
```

# sql - 转置查询结果？

> ID：10946818
> 
> 赞同：0
> 
> 时间：2012-06-08T10:05:37.397
> 
> 标签：sql, sql-server, sql-server-2008

我有一个产生 5 列结果的**函数**（例如，10 行）。

该数据被插入到键值表中，因此我需要将其转换为 50 行的格式以进行插入。

目前我正在选择每列五次并将结果合并在一起。因为它是运行五次相同的查询，但每次只选择一列，这似乎非常低效。理想情况下，我只能运行一次查询，但将数据从 5 x 10 转换为 1 x 50。

因此，如果我的查询返回两行：[ID]、[ColA]、[ColB]、[ColC]、[ColD]、[ColE]

我想把它变成这样的格式：

[ID0],[ColA0]

[ID0],[ColB0]

[ID0],[ColC0]

[ID0],[ColD0]

[ID0],[ColE0]

[ID1],[ColA1]

[ID1],[ColB1]

.

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:19:47.790

使用 PIVOT 和 UNPIVOT

检查这些链接

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

[http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:35:07.460

只需用您的数据替换 CTE，您就可以开始使用了。

```
;WITH CTE AS
(   SELECT 1 [ID], 'A1' [ColA], 'B1' [ColB], 'C1' [ColC], 'D1' [ColD], 'E1' [ColE]
    UNION ALL
    SELECT 2 [ID], 'A2' [ColA], 'B2' [ColB], 'C2' [ColC], 'D2' [ColD], 'E2' [ColE]
)
SELECT  [ID], [ColumnName], Value
FROM    CTE
        UNPIVOT
        (   Value
            FOR [ColumnName] IN ([ColA], [ColB], [ColC], [ColD], [ColE])
        ) upvt 
```

# c# - 从 gps 坐标创建高度图

> ID：10946819
> 
> 赞同：-1
> 
> 时间：2012-06-08T10:05:41.500
> 
> 标签：c#, android, gps, terrain

我目前正在做一个项目，我想整合基于 gps 坐标的 3d 地形的创建。现在，渲染算法使用高度图，我一直坚持从 gps 坐标创建高度图，基本上，我很感兴趣将 gps 坐标转换为适合我的高度图的笛卡尔坐标。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:49:13.150

这基本上是相反的：

[球体上的 3D 坐标到纬度和经度](https://stackoverflow.com/questions/5674149/3d-coordinates-on-a-sphere-to-latitude-and-longitude)

但是所有的逻辑/数学都在那里。基本上 GPS 坐标以经度和纬度坐标表示，它们是以弧度表示的球坐标。

但是，我不确定 GPS 坐标中的高度是如何表示的。

# ssrs-2008 - 计算 SSRS 中过滤后的 tablix 的行数

> ID：10946820
> 
> 赞同：10
> 
> 时间：2012-06-08T10:05:41.873
> 
> 标签：ssrs-2008, reporting-services, report-builder2.0

我想在 SSRS 报告标题内的文本框中显示过滤后的 tablix 的行数。我用谷歌搜索了很多，但没有任何帮助。

[此链接](http://social.msdn.microsoft.com/Forums/is/sqlreportingservices/thread/4f8789cf-010e-4ae3-8368-10a4c177574f)上的建议给了我计数，但仅限于当前页面上的行数。即使我的结果有 2 页，我也只能获得第一页的行数。

我还尝试为行号添加一个新列，然后在标题的文本框中显示它的值，但问题仍然与上面相同。

我尝试在报告中使用全局共享变量（我正在使用自定义代码进行过滤），这在一定程度上有所帮助，但每次单击查看报告按钮时它们都会继续积累价值:(

另外请考虑在存储过程中移动过滤条件对我来说不是一个选项。

谢谢，拉维

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-02-06T00:57:41.667

下面的解决方案对我来说就像一个魅力。它来自 QuestionDude 在 asp.net 论坛上的[帖子](http://forums.asp.net/t/1356392.aspx?How%20to%20get%20record%20count%20or%20row%20count%20of%20rows%20in%20reporting%20service%20table%20object%20)：

1.  在明细组之外的 tablix 底部添加一行。
2.  在此“页脚”行的任何单元格中，将表达式设置为`=COUNT("Fields.[pick a field].Value")`。总是偏执，我使用了一个独特的领域。不确定这是否重要。我们称该单元格为 Textbox17。
3.  在 tablix 之外，您可以使用表达式 ReportItems!Textbox17.Value 来显示过滤后的 tablix 的行数。
4.  隐藏页脚行。

所有功劳归功于 QuestionDude。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T12:15:04.990

右键单击白色部分之外的页面，您将进入 ReportProperties 部分。

将页面高度调整为 500 左右（您可以将其设置为任意高度，它只会将页面扩展到所需的高度）单击确定

返回页面，右键单击 tablix 上方，然后单击插入文本框。

右键单击文本框，然后单击表达式。

粘贴`=CountRows()`

单击确定，预览报告。希望这是您所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-28T07:19:40.073

对我来说，计数在过滤后的数据集上不起作用，它总是（对于 COUNT 和 COUNTROWS）返回原始数据集的计数。

由于我没有办法让它工作，我最终使用了 CountDistinct，因为过滤是静态的，而且我知道要依靠哪个数据列值。

```
=CountDistinct(Fields![Fieldname].Value) 
```

# iphone - BluetoothManager：没有得到任何“BluetoothDeviceDiscoveredNotification”

> ID：10946823
> 
> 赞同：3
> 
> 时间：2012-06-08T10:05:51.417
> 
> 标签：iphone, objective-c, bluetooth, device

我希望我的 iPhone 应用程序显示附近所有蓝牙设备的列表（例如其他 iPhone、Android ......基本上所有启用蓝牙的设备）。我正在使用私有框架“BluetoothManager”（我知道这会导致 AppStore 被拒绝）。

到目前为止，一切正常：

*   我可以关闭蓝牙，...
*   我得到一个 NSLog 设置 DeviceScanning 已启用...
*   如果我检查功能 (BOOL)deviceScanningInProgress 我也会得到“是”。

但 BTM 似乎从未发布过“BluetoothDeviceDiscoveredNotification”。我在设备旁边还有另外两部启用了蓝牙的 iPhone，我正在测试我的应用程序，但没有一个被发现（它们都是可发现的，我的 MAC 找到了它们！）

任何想法可能是什么问题？

我浏览了stackoverflow，发现了另一个问题，有人使用基本相同的代码，并且对他有用！请参阅：我不知道的[其他问题，为什么我的应用程序在“工作”时没有发现任何设备。](https://stackoverflow.com/questions/10613036/getting-mac-address-of-a-bluetooth-using-bluetoothmanager-private-framework)

我真的很感激一些答案！由于没有关于 BluetoothManager 的文档，我正在慢慢耗尽资源来获得帮助；o)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:21:56.880

我用：

```
[btManager  setDeviceScanningEnabled:YES];
[btManager scanForServices:0xFFFFFFFF]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:57:26.117

我想我自己可能已经找到了问题的答案：看来，iOS5 在发布任何“BluetoothDeviceDiscoveredNotification”之前正在过滤 DeviceScanning 的结果。最后，只有耳机和类似设备被“报告”，而像其他 iPhone 等设备被“阻止”。

现在是一个后续问题：有没有人有想法，如何通过这个过滤？我真的不需要对设备做任何事情（通信或任何事情），我只想发现它们！我不敢相信在 iOS5 中应该没有办法做到这一点！有任何想法吗？

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:38:11.487

我有同样的问题，我用`scanForServices:~0x0`而不是`setDeviceScanningEnabled:YES`

# php - 在 php 中使用纯文本数据库

> ID：10946829
> 
> 赞同：0
> 
> 时间：2012-06-08T10:06:09.080
> 
> 标签：php, database, plaintext

我正在为一个朋友开发一个小型 Web 应用程序，并且正在考虑使用纯文本文件而不是 MySQL，这对于这个应用程序的简单性来说似乎有点太多了。

该应用程序基本上可以让人们将他们的名字放在网络表单的列表中。一次可能会有大约 30-100 人将他们的名字列入名单，有时可能会超过 200-300 人。输入所有名称后，提交表单将关闭，单个用户将查看列表并可能很快将其删除。

我很好奇的是，如果有很多人试图同时将他们的名字放在名单上，是否会有任何问题。如果有人在服务器正在写入文件的过程中提交了一个名称，这会导致第二个人的提交失败，因为该文件已经在使用中，还是服务器会等待一个提交完成后再开始另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:09:53.340

不，它不会等待，谷歌搜索“比赛条件”。如果提交表单上的流量不多，那不会有什么坏处，但我还是建议使用mysql，因为努力是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:46:05.283

我会使用一个简单的文本文件并逐行放置名称。每次输入新名称时，只需通过以下方式获取名称/行

```
$array_of_names = file("textfile.txt"); 
```

检查新行是否已经存在，如果不存在则添加新行。[http://php.net/manual/en/function.file.php](http://php.net/manual/en/function.file.php)上给出了一个确切的例子

# search - gae可搜索模型信息

> ID：10946833
> 
> 赞同：2
> 
> 时间：2012-06-08T10:06:26.677
> 
> 标签：search, google-cloud-datastore

有谁知道我在哪里可以找到有关如何使用 Google App Engine 中的 SearchableModel 功能对数据存储执行搜索的官方文档？我能找到的唯一信息是新的搜索 API 仅适用于文档，而不是单个数据存储条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T02:54:29.983

不要使用这个类。它不受支持、未记录和已弃用。请改用支持的（虽然目前是实验性的）全文搜索工具。

# windows-phone-7 - 在 windows phone 7 中使用 zbar sdk 读取条形码

> ID：10946835
> 
> 赞同：0
> 
> 时间：2012-06-08T10:06:28.877
> 
> 标签：windows-phone-7, barcode, zbar-sdk

我想在 windows phone 中使用 zbar sdk 从相机读取条形码。有适用于 iPhone 和 Android 平台的 SDK，查看此链接 [http://sourceforge.net/projects/zbar/files/](http://sourceforge.net/projects/zbar/files/)

我不确定 Windows Phone 中的 zbar 条码是否有任何 sdk 可用。

**编辑：**目前，我正在使用 zXing 条码库来扫描条码，但它不支持 zbar 库支持的某些条码格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:58:48.163

WP7 上还有另一个用于条码扫描的选项 -`ZXing`库。看[ZXing Helper](http://blogs.msdn.com/b/stephe/archive/2011/11/07/wp7-real-time-video-scan-a-barcode-qr-code-in-your-app-using-zxing-lib.aspx)，也许它会适合你

# asp.net - 迁移 ASP.Net 成员资格

> ID：10946837
> 
> 赞同：0
> 
> 时间：2012-06-08T10:06:39.050
> 
> 标签：asp.net, sql, ssms, sql-server-2008

我在复制我的 ASP.Net Membership 表时遇到问题。因为我只想要架构，所以我生成了脚本而不复制数据。

当我访问新站点时，它显示

> “System.Web.Security.SqlMembershipProvider”需要与架构版本“1”兼容的数据库架构。但是，当前的数据库架构与此版本不兼容。您可能需要使用 aspnet_regsql.exe（在框架安装目录中提供）安装兼容架构，或者将提供程序升级到更新版本。

这是我一步一步完成的，我无法让它工作。

1.  从源服务器的 SSMS 中，右键单击数据库。
2.  任务 -> 生成脚本

4.  在选择脚本选项中，我单击了下一步。
5.  在选择对象类型中，我选择了所有，然后单击下一步。
6.  在选择数据库角色中，我选择了所有。
7.  在选择架构中，我选择了所有。
8.  在选择存储过程中，选择标题，全部选中。
9.  选择所有视图。
10.  脚本到新的查询窗口。
11.  在目标服务器的 SSMS 中，我运行脚本。
12.  创建的表是空的。
13.  我运行了 aspnet_regsql.exe，并填充了 aspnet_SchemaVersions。

但是，错误仍然发生......我已经没有想法了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:30:26.903

您需要 aspnet_SchemaVersion 表中的一些数据。查看您正在使用的数据库表中的信息，并在脚本末尾添加一个插入以将该数据添加到 aspnet_SchemaVersion 表中。我不记得我的头顶有什么，但它相当简单的东西。

在这里你应该这样做我不认为版本号已经改变但你应该检查你现有的数据库。

```
INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘common’, 1, 1) 

INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘health monitoring’, 1, 1) 

INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘membership’, 1, 1) 

INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘personalization’, 1, 1) 

INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘profile’, 1, 1) 

INSERT INTO aspnet_SchemaVersions (Feature, CompatibleSchemaVersion, IsCurrentVersion)
VALUES(‘role manager’, 1, 1) 
```

# java - Applet 在 Google Chrome 上挂起

> ID：10946839
> 
> 赞同：6
> 
> 时间：2012-06-08T10:06:44.277
> 
> 标签：java, google-chrome, applet, java-7, freeze

很抱歉这篇长文，但我想知道在我向 Sun 提交错误报告之前是否可以得到更多建议。

JVM：7u04

操作系统：Windows XP SP3

硬件：Pentium(R) 双核 E6700 3.20GHz，3.25 GB RAM。

浏览：谷歌浏览器版本 19.0.1084.52

当页面加载 Applet 时，它会挂起，直到我关闭它。检查窗口任务管理器，我发现如果杀死Applet处理器，页面不会挂起。我尝试在Applet init()和start()上打印一些消息，但这些消息没有显示。只有我能做的是通过 JVM 获取完整转储，如下所示。谁能告诉我为什么Applet在它开始之前就挂了？感谢帮助。

```
2012-06-07 10:08:25
Full thread dump Java HotSpot(TM) Client VM (23.0-b21 mixed mode, sharing):

"thread applet-com.arcare.extend.ExtendFunc-2" prio=4 tid=0x03021400 nid=0xbe8 in Object.wait() [0x03dad000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x22fa0158> (a sun.plugin2.message.Queue)
    at sun.plugin2.message.Queue.waitForMessage(Unknown Source)
    - locked <0x22fa0158> (a sun.plugin2.message.Queue)
    at sun.plugin2.message.Pipe$2.run(Unknown Source)
    at com.sun.deploy.util.Waiter$1.wait(Unknown Source)
    at com.sun.deploy.util.Waiter.runAndWait(Unknown Source)
    at sun.plugin2.message.Pipe.receive(Unknown Source)
    at sun.plugin2.main.client.MessagePassingExecutionContext.doCookieOp(Unknown Source)
    at sun.plugin2.main.client.MessagePassingExecutionContext.getCookie(Unknown Source)
    at sun.plugin2.main.client.PluginCookieSelector.getCookieFromBrowser(Unknown Source)
    at com.sun.deploy.net.cookie.DeployCookieSelector.getCookieInfo(Unknown Source)
    at com.sun.deploy.net.cookie.DeployCookieSelector.get(Unknown Source)
    - locked <0x2805a508> (a sun.plugin2.main.client.PluginCookieSelector)
    at sun.net.www.protocol.http.HttpURLConnection.setCookieHeader(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.writeRequests(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    - locked <0x22fa02e8> (a sun.net.www.protocol.http.HttpURLConnection)
    at com.sun.deploy.net.HttpUtils.followRedirects(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
    at com.sun.deploy.net.BasicHttpRequest.doGetRequestEX(Unknown Source)
    at com.sun.deploy.net.DownloadEngine.isUpdateAvailable(Unknown Source)
    at com.sun.deploy.cache.DeployCacheHandler.get(Unknown Source)
    - locked <0x22fa0568> (a java.lang.Object)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    - locked <0x22fa05c0> (a sun.net.www.protocol.http.HttpURLConnection)
    at sun.plugin.PluginURLJarFileCallBack.downloadJAR(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack.access$000(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin.PluginURLJarFileCallBack.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source)
    at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source)
    at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(Unknown Source)
    - locked <0x22fa2738> (a sun.plugin.net.protocol.jar.CachedJarURLConnection)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(Unknown Source)
    - locked <0x22fa2738> (a sun.plugin.net.protocol.jar.CachedJarURLConnection)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$1000(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    - locked <0x22fa2850> (a com.sun.deploy.security.DeployURLClassPath)
    at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x22fa2910> (a sun.plugin2.applet.Applet2ClassLoader)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x22fa29e8> (a sun.plugin2.applet.Applet2ClassLoader)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x22fa29e8> (a sun.plugin2.applet.Applet2ClassLoader)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"AWT-EventQueue-3" prio=4 tid=0x0301fc00 nid=0x39c waiting on condition [0x0457f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x22fa2c08> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"Applet 11 LiveConnect Worker Thread" prio=4 tid=0x0301e400 nid=0xcf4 in Object.wait() [0x044df000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x22fa2d08> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
    - locked <0x22fa2d08> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"TimerQueue" daemon prio=6 tid=0x03eb6800 nid=0xcd0 waiting on condition [0x0357f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x2844c680> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Windows Tray Icon Thread" daemon prio=6 tid=0x03e1d000 nid=0x92c runnable [0x043ff000]
   java.lang.Thread.State: RUNNABLE
    at com.sun.deploy.ui.WindowsJavaTrayIcon.mainLoop(Native Method)
    at com.sun.deploy.ui.WindowsJavaTrayIcon.access$700(Unknown Source)
    at com.sun.deploy.ui.WindowsJavaTrayIcon$2.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"ConsoleTraceListener" daemon prio=6 tid=0x0315d800 nid=0xec0 in Object.wait() [0x037ef000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2807aaf0> (a com.sun.deploy.uitoolkit.ui.ConsoleTraceListener$BoundedStringBuffer)
    at java.lang.Object.wait(Object.java:503)
    at com.sun.deploy.uitoolkit.ui.ConsoleTraceListener$ConsoleWriterThread.run(Unknown Source)
    - locked <0x2807aaf0> (a com.sun.deploy.uitoolkit.ui.ConsoleTraceListener$BoundedStringBuffer)

"TimerQueue" daemon prio=4 tid=0x03e8fc00 nid=0x980 waiting on condition [0x03d0f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x28302b10> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"thread applet-com.arcare.extend.ExtendFunc-1" prio=4 tid=0x031f2c00 nid=0xc08 in Object.wait() [0x03c6f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2807a4b0> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    - locked <0x2807a4b0> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"AWT-EventQueue-1" prio=6 tid=0x0314d000 nid=0xd50 waiting on condition [0x036be000]
   java.lang.Thread.State: RUNNABLE
    at com.sun.deploy.uitoolkit.ui.ConsoleHelper.dumpAllStacksImpl(Native Method)
    at com.sun.deploy.uitoolkit.ui.ConsoleHelper.dumpAllStacks(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.ui.SwingConsoleWindow$2.actionPerformed(Unknown Source)
    at javax.swing.JComponent$ActionStandin.actionPerformed(Unknown Source)
    at javax.swing.SwingUtilities.notifyAction(Unknown Source)
    at javax.swing.JComponent.processKeyBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireKeyboardAction(Unknown Source)
    at javax.swing.JComponent.processKeyBindingsForAllComponents(Unknown Source)
    at javax.swing.JComponent.processKeyBindings(Unknown Source)
    at javax.swing.JComponent.processKeyEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"AWT-EventQueue-2" prio=4 tid=0x0312b400 nid=0x270 waiting on condition [0x0375f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x2816fb78> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"JVM[id=2]-Heartbeat" daemon prio=6 tid=0x03128c00 nid=0x2f8 in Object.wait() [0x0370f000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129b98> (a sun.plugin2.main.client.PluginMain$Heartbeat)
    at sun.plugin2.main.server.HeartbeatThread.run(Unknown Source)
    - locked <0x28129b98> (a sun.plugin2.main.client.PluginMain$Heartbeat)

"Applet 10 LiveConnect Worker Thread" prio=4 tid=0x03101800 nid=0x620 in Object.wait() [0x034df000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129ce8> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
    - locked <0x28129ce8> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"Browser Side Object Cleanup Thread" prio=6 tid=0x030f1400 nid=0x4fc in Object.wait() [0x0366f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129d70> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x28129d70> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$BrowserSideObjectCleanupThread.run(Unknown Source)

"CacheCleanUpThread" daemon prio=6 tid=0x030df400 nid=0x860 in Object.wait() [0x0361f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129d90> (a com.sun.deploy.cache.CleanupThread)
    at java.lang.Object.wait(Object.java:503)
    at com.sun.deploy.cache.CleanupThread.run(Unknown Source)
    - locked <0x28129d90> (a com.sun.deploy.cache.CleanupThread)

"CacheMemoryCleanUpThread" daemon prio=6 tid=0x030d9400 nid=0x568 in Object.wait() [0x035cf000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129e80> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x28129e80> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at com.sun.deploy.cache.MemoryCache$LoadedResourceCleanupThread.run(Unknown Source)

"SysExecutionTheadCreator" daemon prio=6 tid=0x030cf400 nid=0xec4 in Object.wait() [0x0339f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a000> (a sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator.run(Unknown Source)
    - locked <0x2812a000> (a sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator)

"AWT-EventQueue-0" prio=6 tid=0x030c7400 nid=0xea8 waiting on condition [0x0352f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x2812a0f0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"AWT-Windows" daemon prio=6 tid=0x030bf400 nid=0x4a8 runnable [0x00a2f000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)

"AWT-Shutdown" prio=6 tid=0x030bdc00 nid=0xe38 in Object.wait() [0x0348f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a258> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    - locked <0x2812a258> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"Java2D Disposer" daemon prio=10 tid=0x030bc800 nid=0xaa8 in Object.wait() [0x0343f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a2e8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2812a2e8> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Java Plug-In Pipe Worker Thread (Client-Side)" daemon prio=6 tid=0x030b6c00 nid=0xb60 runnable [0x033ef000]
   java.lang.Thread.State: RUNNABLE
    at sun.plugin2.os.windows.Windows.ReadFile0(Native Method)
    at sun.plugin2.os.windows.Windows.ReadFile(Unknown Source)
    at sun.plugin2.ipc.windows.WindowsNamedPipe.read(Unknown Source)
    at sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.read(Unknown Source)
    at sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.readByte(Unknown Source)
    at sun.plugin2.message.AbstractSerializer.readInt(Unknown Source)
    at sun.plugin2.message.transport.SerializingTransport.read(Unknown Source)
    at sun.plugin2.message.Pipe$WorkerThread.run(Unknown Source)

"Timer-0" prio=6 tid=0x03085800 nid=0x8cc in Object.wait() [0x0334f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a628> (a java.util.TaskQueue)
    at java.lang.Object.wait(Object.java:503)
    at java.util.TimerThread.mainLoop(Unknown Source)
    - locked <0x2812a628> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Unknown Source)

"traceMsgQueueThread" daemon prio=6 tid=0x03064c00 nid=0xcc0 runnable [0x0327f000]
   java.lang.Thread.State: RUNNABLE
    at java.io.WinNTFileSystem.canonicalize0(Native Method)
    at java.io.Win32FileSystem.canonicalize(Unknown Source)
    at java.io.File.getCanonicalPath(Unknown Source)
    at java.io.FilePermission$1.run(Unknown Source)
    at java.io.FilePermission$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.io.FilePermission.init(Unknown Source)
    at java.io.FilePermission.<init>(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.length(Unknown Source)
    at com.sun.deploy.trace.FileTraceListener.print(Unknown Source)
    at com.sun.deploy.trace.Trace.firePrintlnEvent(Unknown Source)
    at com.sun.deploy.trace.Trace.access$200(Unknown Source)
    at com.sun.deploy.trace.Trace$TraceMsgQueueChecker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Service Thread" daemon prio=6 tid=0x02ba9800 nid=0xf24 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C1 CompilerThread0" daemon prio=10 tid=0x02ba7000 nid=0xcdc waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x02ba2000 nid=0x4ac runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x02ba0800 nid=0xed8 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x02b7b800 nid=0xc10 in Object.wait() [0x02e2f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a8b0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2812a8b0> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

"Reference Handler" daemon prio=10 tid=0x02b76c00 nid=0x70 in Object.wait() [0x02ddf000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x28129480> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
    - locked <0x28129480> (a java.lang.ref.Reference$Lock)

"main" prio=6 tid=0x0087a000 nid=0xcfc in Object.wait() [0x0092f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2812a938> (a sun.plugin2.message.Queue)
    at sun.plugin2.message.Queue.waitForMessage(Unknown Source)
    - locked <0x2812a938> (a sun.plugin2.message.Queue)
    at sun.plugin2.message.Pipe$1.run(Unknown Source)
    at com.sun.deploy.util.Waiter$1.wait(Unknown Source)
    at com.sun.deploy.util.Waiter.runAndWait(Unknown Source)
    at sun.plugin2.message.Pipe.receive(Unknown Source)
    at sun.plugin2.main.client.PluginMain.mainLoop(Unknown Source)
    at sun.plugin2.main.client.PluginMain.run(Unknown Source)
    at sun.plugin2.main.client.PluginMain.main(Unknown Source)

"VM Thread" prio=10 tid=0x02b75400 nid=0x614 runnable 

"VM Periodic Task Thread" prio=10 tid=0x02bac000 nid=0x6c4 waiting on condition 

.plugin2.message.Pipe.receive(Unknown Source)
    at sun.plugin2.main.client.PluginMain.mainLoop(Unknown Source)
    at sun.plugin2.main.client.PluginMain.run(Unknown Source)
    at sun.plugin2.main.client.PluginMain.main(Unknown Source)

"VM Thread" prio=10 tid=0x02b75400 nid=0x614 runnable 

"VM Periodic Task Thread" prio=10 tid=0x02bac000 nid=0x6c4 waiting on condition 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:01:42.430

您可以使用[小程序部署示例](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html#tagAttrsParams)。`deployJava.js`根据您或您的客户端浏览器，脚本添加到您的页面不同的标签（小程序、对象或嵌入）。
我对无响应的页面有很大的问题，我把我的解决方案放在[这里](https://stackoverflow.com/questions/7885715/java-applet-deadlock-on-chrome-on-win-7-64-with-either-jre-1-6-0-29-or-1-7-0-1)——stackoverflow 上的类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T01:54:35.080

试试这个网站来解决你的问题。确保在小程序完全加载后调用小程序函数 [http://springflex.blogspot.com/2014/09/my-practices-to-resolve-applet-stuck.html](http://springflex.blogspot.com/2014/09/my-practices-to-resolve-applet-stuck.html)

# java - 传递给 Spring JDBC LobHandler 后关闭 Java InputStream？

> ID：10946849
> 
> 赞同：0
> 
> 时间：2012-06-08T10:07:06.447
> 
> 标签：java, spring, jdbc, blob, inputstream

在这样的代码中传递给 Spring JDBC lobCreator.setBlobAsBinaryStream(,,) 后是否需要在 java 中手动关闭 InputStream (bean.getContentAsStream())？

```
 getJdbcTemplate().execute(
                "INSERT INTO file (" +
                "id, " +                      //1
                "FILE_DATA) " +               //2
                " VALUES (?, ?)",
                 // lobhandler is instance of org.springframework.jdbc.support.lob.OracleLobHandler
                new AbstractLobCreatingPreparedStatementCallback(lobhandler){
                    @Override
                    protected void setValues(PreparedStatement ps, LobCreator lobCreator) throws SQLException, DataAccessException {
                        ps.setString(1, bean.getRecordId());
                        lobCreator.setBlobAsBinaryStream(ps, 2, bean.getContentAsStream(), (int) bean.getContentSize());
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:00:58.110

我希望春天会关闭它，但文档没有说。您可以通过创建一个记录消息或在关闭时引发异常的 InputStream 包装器来轻松进行测试。

# .net - 以描述性文本格式格式化.Net日期时间，如“上个月”？

> ID：10946853
> 
> 赞同：4
> 
> 时间：2012-06-08T10:07:59.263
> 
> 标签：.net, datetime, datetime-format

.Net 或任何 Nuget 包中是否有任何功能可以将时间以描述性格式描述过去有多远。

例如，给定一个日期，说出过去的情况。

*   昨天
*   5天前
*   上个星期
*   上个月
*   4个月前
*   去年

我在 Perl 中看到过类似的东西，我不想重新发明轮子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:22:55.917

您可以安装[此](http://nuget.org/packages/netfx-System.Collections.Generic.DateTimeToNaturalTime)NuGet 包，您将拥有一个`DateTime.ToNaturalRelativeTime`扩展方法，似乎可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:22:46.250

在 .NET 上没有内置的方法可以做到这一点，但是制作扩展方法很简单（来自[这个问题](https://stackoverflow.com/questions/11/calculating-relative-time)的想法，由文森特罗伯特和杰夫阿特伍德提出）：

```
public static string AsRelative(this DateTime dt) {
    var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);
    double delta = Math.Abs(ts.TotalSeconds);
    const int SECOND = 1;
    const int MINUTE = 60 * SECOND;
    const int HOUR = 60 * MINUTE;
    const int DAY = 24 * HOUR;
    const int MONTH = 30 * DAY;

    if (delta < 0)
    {
      return "not yet";
    }
    if (delta < 1 * MINUTE)
    {
      return ts.Seconds == 1 ? "one second ago" : ts.Seconds + " seconds ago";
    }
    if (delta < 2 * MINUTE)
    {
      return "a minute ago";
    }
    if (delta < 45 * MINUTE)
    {
      return ts.Minutes + " minutes ago";
    }
    if (delta < 90 * MINUTE)
    {
      return "an hour ago";
    }
    if (delta < 24 * HOUR)
    {
      return ts.Hours + " hours ago";
    }
    if (delta < 48 * HOUR)
    {
      return "yesterday";
    }
    if (delta < 30 * DAY)
    {
      return ts.Days + " days ago";
    }
    if (delta < 12 * MONTH)
    {
      int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));
      return months <= 1 ? "one month ago" : months + " months ago";
    }
    else
    {
      int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));
      return years <= 1 ? "one year ago" : years + " years ago";
    }
} 
```

# facebook - 使用 chat.facebook 向 IM 发送消息

> ID：10946856
> 
> 赞同：1
> 
> 时间：2012-06-08T10:08:30.313
> 
> 标签：facebook, api

我有一个场景，人们使用 facebook 凭据登录到我们开发的 IM。我们发送聊天消息，以便 IM 上的其他用户可以处理该消息。现在我需要这些 IM 在它们之间发送消息，这些消息不会显示在其他用户的聊天窗口中或存储在消息历史记录中。我们如何通过 facebook 聊天来实现这一点？（使用 facebook，我们不会直接获取用户的 JID，而是获取一个 Id 并在内部进行翻译）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:29:28.287

根据您上面的评论，这不是 API 的功能 - 通过 API 代表用户发送的消息将始终出现在该用户的消息列表中 - 您不能“隐形发送”消息。

# opencv - OpenCV 网络摄像头帧率

> ID：10946857
> 
> 赞同：4
> 
> 时间：2012-06-08T10:08:32.743
> 
> 标签：opencv, video, webcam

我有一个能够达到 1080p 30fps 的网络摄像头，我已经通过使用 VirtualDub 来预览和保存来自网络摄像头本身的视频进行了确认。

出于某种原因，OpenCV 只会给我大约 4FPS，CPU 没有使任何内核最大化，所以我不明白为什么？（顺便说一句，这实际上并没有输出提要，只是获取帧）。

有OpenCV经验的人知道为什么吗？可能是 OpenCV 没有使用 DirectShow 从网络摄像头读取数据（假设 DirectShow 是 30fps/1080p 所需的 - 我相信这就是 virtualdub 使用的）。OpenCV 将图像读入其专有数据类型这一事实是否`Mat`会成为瓶颈？

我的相机是 Microsoft LifeCam Studio，我的操作系统是带有 Visual Studios 2010 的 Windows 7。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:12:55.430

30 FPS 是通过捕获压缩视频（很可能是 JPEG）来实现的。我碰巧 OpenCV 正在切换以捕获原始视频，例如 RGB，在这种情况下，有效 FPS 受到 USB 带宽的限制。4 FPS 大约是 USB 可以在 1920x2080 24 位 RGB (25 MB/s) 中传输的数据量。

解决方案是确保捕获格式（DirectShow 术语中的媒体类型）是压缩视频，并在软件中进行后解压缩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-01T20:48:25.000

正如 Roman 所指出的，大多数网络摄像头的*默认*模式是*MJPEG 压缩*，以降低需要通过 USB 连接（可能还有 USB 集线器等）的数据速率和/或最大化可用的帧速率/分辨率。

对于计算机视觉，这通常是不可取的，因为我们宁愿拥有较低的帧速率，但没有压缩伪影。实际上，通常可以以与例如改变分辨率的方式大致相同的方式来改变*流格式*（例如到未压缩的YUV）。这对你来说是否*真的*可行取决于

*   *硬件*支持哪些模式，
*   低级驱动程序支持哪些模式（通常是通用 USB 视频类/UVC 驱动程序），
*   后一种模式是通过所涉及的各种框架实现的（例如 Windows 的视频 / DirectX / Video4Linux2 等），以及
*   最后，在 OpenCV 中使用了视频捕获后端支持的这些。

不幸的是，后者的答案是**none**。OpenCV 有 18 个（！）不同的捕获后端（用于各种平台，例如手机、OS X、Windows 和 Linux，通常有几个用于不同版本的底层框架），尽管似乎有一个用于更改流格式的 API [ 1]，它似乎没有被任何后端实现。:-(

如果您或其他任何人想要解决这个问题，您可能需要检查我打开的 OpenCV 问题：[http ://code.opencv.org/issues/3007](http://code.opencv.org/issues/3007)

就我而言，我对一些罗技网络摄像头进行了调查，这些摄像头甚至具有由 Windows 和 Linux 低级驱动程序公开的不同功能。在 Linux 下，我在不知不觉中使用了 OpenCV 的 GStreamer 后端，这意味着另一个层次的间接性——在底层它总是归结为 V4L（Linux 视频）内核 API。使用 libv4l 后端改进了一些事情，因为它具有默认为某些 YUV 流格式的好特性（尽管帧速率可能较低，这在其他情况下可能是不受欢迎的）。（甚至有[不同的、不同的后端](http://code.opencv.org/issues/3006 "libv4l 捕获后端与 v4l 后端不同 (OpenCV Bug #3006)")用于直接访问 v4l 内核 API 或通过 libv4l。）

[1] 请参阅 API 文档中的 CV_CAP_PROP_FORMAT：http: [//opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)

# php - 通过 PHP 到 APNS 的持久连接

> ID：10946865
> 
> 赞同：5
> 
> 时间：2012-06-08T10:09:06.490
> 
> 标签：php, ios, push-notification, apple-push-notifications

我知道在 SO 上有很多帖子可以解决这个问题，不幸的是我在 PHP 编程方面并不那么先进，而且我有一个其他地方没有回答的问题：

Apple Push Notifications 的许多教程都通过 stream_socket_client() 创建连接。但他们中的大多数都缺少“STREAM_CLIENT_PERSISTENT”标志。这个标志会使连接真正持久吗？如果有，什么时候关闭？文档说它也会在页面重新加载时保持连接。这取决于会话吗？

没有此标志的版本正在运行，但我担心一旦我放入生产证书等，APNS 就会阻止我（在[此处](https://stackoverflow.com/questions/2462280/iphone-sdk-push-notification-randomly-fails)描述）。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T13:21:47.680

根据[Predefined Constants](http://php.net/manual/en/stream.constants.php)上的 PHP 文档，将**STREAM_CLIENT_PERSISTENT**与 APNS 连接一起使用*应该*在页面加载之间保持连接处于活动状态。这是 APNS 连接的要求，因为它会**限制**您，因为它会在发送有效负载后将任何断开连接视为潜在的拒绝服务攻击。

如果您在 presisitent 连接之外的客户端有任何问题，您可能想尝试以下方法，因为这是迄今为止我见过的在 PHP 中处理 APNS 连接的最佳方式。这使用来自[PHPXMLRPC](http://phpxmlrpc.sourceforge.net/)的客户端，因此您必须下载该包。

```
<?php

include '../vendors/xmlrpc.inc';

$hostName = 'localhost'; # Your services endpoint here.
$rpcPath = '';
$port = 7077;

if($_GET['action'] == 'provisioning')
{
    $echoString = new xmlrpcmsg(
        'provision',
        array(
            php_xmlrpc_encode('appid'),
            php_xmlrpc_encode('/path/to/certificate.pem'),
            php_xmlrpc_encode('sandbox'),
            php_xmlrpc_encode(100)
        )
    );
    $continue = TRUE;
}

if($_GET['action'] == 'notify')
{
    $echoString = new xmlrpcmsg(
        'notify',
        array(
            php_xmlrpc_encode('paparazzme'),
            php_xmlrpc_encode(array('6bcda...', '7c008...')),
            php_xmlrpc_encode(array(array("aps" => array("alert" => "Hello User 1" )), array("aps" => array("alert" => "Hello User 2" ))))
        )
    );
    $continue = TRUE;
}

if($continue == true)
{
    # Create a client handle and send request
    $client = new xmlrpc_client($rpcPath, $hostName, $port);

    # A little verbose debug
    $client->setDebug(2);

    # The response
    $response = &$client->send($echoString);

    # Check if response is good
    if (! $response->faultCode())
        print "\nReturned string is: " . php_xmlrpc_decode($response->value()) . "\n";
    else
        print "An error occurred: \nCode: " . $response->faultCode() . " Reason: '" . htmlspecialchars($response->faultString()) . "'\n";
}

?> 
```

**资料来源：[如何开始使用适用于 iPhone 或 iTouch 的 APNS](http://www.how2s.org/index.php/How_to_get_started_with_Apple_Push_Notifications_for_iPhone_or_iPhone_Touch)**

我想花点时间指出，我没有测试任何代码，我现在没有 iPhone 应用程序来测试它，所以我可以告诉你这是否真的有效。

如果对您可行，我建议您改用 Uban Airship，因为他们确实每月向每个客户提供 250,000 次免费推送，并为您处理与 APN 服务器的连接，从那里您使用他们的[API](http://urbanairship.com/docs/push_index.html)与您的客户交谈。

# c# - 委托同时打开2个无参数消息框

> ID：10946866
> 
> 赞同：0
> 
> 时间：2012-06-08T10:09:07.677
> 
> 标签：c#, delegates

我正在尝试学习委托的用法，我见过的所有代码示例都使用参数传递给内部方法，

该示例的目标是在不传递参数的情况下在表单启动时打开 2 个消息框这是我尝试过的代码，但我不知道如何调用内部函数

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;

namespace Messageboxes2
{
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
        Delegation delegated = new Delegation();
        delegated.
    }

}
class Delegation
{    
    public delegate string mbox ();

    static void msgboz1(mbox d)
    {
        MessageBox.Show("1rstBox");
    }
    static void msbox2(mbox d)
    { 
        MessageBox.Show("2ndbox");
    }
}
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:16:43.537

Simply passing delegate as a parameter does not call the method. You better learn more about delegates, you can try following for better understanding.

```
public partial class MainForm : Form
{
public MainForm()
{
    InitializeComponent();
    Delegation.Invoke(Delegation.msgboz1);
    Delegation.Invoke(Delegation.msbox2);
}

}
class Delegation
{    
public delegate void mbox ();

public static void msgboz1()
{
    MessageBox.Show("1rstBox");
}
public static void msbox2()
{ 
    MessageBox.Show("2ndbox");
}
public static void Invoke(mbox method)
{ 
    method();
}
} 
```

EDIT: You can use BeginInvoke method to call methods asynchronously.

```
class Program
{
    static void Main(string[] args)
    {
        Delegation.MethodCaller mc1 = new Delegation.MethodCaller(Delegation.Method1);
        Delegation.MethodCaller mc2 = new Delegation.MethodCaller(Delegation.Method2);
        mc1.BeginInvoke(null, null);
        mc2.BeginInvoke(null, null);
        Console.ReadLine();
    }

    class Delegation
    {
        public delegate void MethodCaller();

        public static void Method1()
        {
            Console.WriteLine("Method 1 Invoked");
            Thread.Sleep(2000);
            Console.WriteLine("Method 1 Completed");
        }
        public static void Method2()
        {
            Console.WriteLine("Method 2 Invoked");
            Thread.Sleep(2000);
            Console.WriteLine("Method 2 Completed");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:22:34.940

首先从这两种方法中删除参数。然后，如果您了解 lambda 表达式，那么：

```
mbox myMboxDelegate = new mBox(() =>
{
   msgboz1();
   msbox2();
});

myMBoxDelegate(); 
```

或尝试：

```
mbox myMboxDelegate = new mBox();
myMboxDelegate += msgboz1();
myMboxDelegate += msbox2();
myMboxDelegate(); 
```

# facebook - 是否有可能更改应用程序的冻结标题？

> ID：10946869
> 
> 赞同：0
> 
> 时间：2012-06-08T10:09:13.480
> 
> 标签：facebook, title

我创建了一个以代号为名称的应用程序，在应用程序位于沙盒中时进行初始测试后，我将其名称更改为正确的名称，并且它更新了在 Facebook 页面上看到的大多数操作。

现在，在离开沙盒并且许多用户访问应用程序后，我收到报告称在某些地方出现了第一个旧名称。在调试器中，我看到旧名称出现在 og:title 和关于标题被冻结的通知，并且不可能从元标记更新它......

有没有办法将标题更改为应用程序的当前名称？在大多数地方，它会显示新名称，但在某些地方（例如“最近玩的游戏”）会看到旧名称，我认为这种更改不会对 Facebook 用户造成任何伤害。

# css - CSS浮动固定和流体在同一行

> ID：10946870
> 
> 赞同：0
> 
> 时间：2012-06-08T10:09:23.650
> 
> 标签：css, css-float

好的，情况就是这样。我有一个固定宽度的图像和 2 个可变宽度的文本字符串。

我希望 2 个内联内容跨度留在他们的专栏中，但我想出的解决方案不起作用。

```
<div class="fluid-container">
  <img class="fixed-width" src="x.png">

  <p class="dynamic-width">
    <span class="inline-content">Some&nbsp;content</span> 
    <span class="inline-content-2">Some&nbsp;content</span>  
  </p>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:52:39.133

尝试将图像向左浮动并为其留出一些边距。这会将图像固定在左侧，而 p 将向右移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:05:40.007

经过数小时的谷歌搜索和黑客攻击，我找到了一个适用于所有主要浏览器的解决方案。这是codepen [http://codepen.io/lajlev/pen/mzgkw](http://codepen.io/lajlev/pen/mzgkw)

。苗条的

```
.fillout-container
  input.left type="button" value="Filter reviews"
  .fillout
    input type="text" placeholder="Start typing" 
```

.scss

```
body {
  max-width: 480px;
  margin: 40px auto;
  box-sizing: border-box;
  background: #efefef;
}

// Fillout technique
.left {
  float:left;
}

.fillout-container {
    padding: 20px;  
    background: #fff;
    box-sizing: border-box;
    width: 100%;
    overflow: hidden;

  .fillout {
    display: block;
    box-sizing: border-box;
    overflow: hidden;
    padding-left: 10px;

    > input, > div {
      width: 100%;   
      box-sizing: border-box;
    }
  }
} 
```

# ruby - 如何运行 hbase 示例数据脚本“index-builder-setup.rb”？

> ID：10946871
> 
> 赞同：0
> 
> 时间：2012-06-08T10:09:24.383
> 
> 标签：ruby, mapreduce, hbase

> hbase-0.94.0/src/examples/mapreduce/index-builder-setup.rb 当我运行脚本时，它报告错误：[zhouhh@Hadoop48 mapreduce]$ ruby​​ index-builder-setup.rb index-builder-setup。 rb:18: main:Object (NoMethodError) index-builder-setup.rb 的未定义方法“创建”：

```
# Set up sample data for IndexBuilder example
create "people", "attributes"
create "people-email", "INDEX"
create "people-phone", "INDEX"
create "people-name", "INDEX"

[["1", "jenny", "jenny@example.com", "867-5309"],
 ["2", "alice", "alice@example.com", "555-1234"],
 ["3", "kevin", "kevinpet@example.com", "555-1212"]].each do |fields|
  (id, name, email, phone) = *fields
  put "people", id, "attributes:name", name
  put "people", id, "attributes:email", email
  put "people", id, "attributes:phone", phone
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:52:49.723

我们不应该为此使用 ruby​​，因为它不知道什么是 hbase。

对于你的情况，试试这个：

`./bin/hbase shell /path-to-your-hbase-dir/src/examples/mapreduce/index-builder-setup.rb`

# iphone - UIGestureRecognizer 在 iphone 中无法正常工作

> ID：10946875
> 
> 赞同：0
> 
> 时间：2012-06-08T10:09:45.567
> 
> 标签：iphone, ios, uigesturerecognizer

我正在使用 UIPanGestureRecognizer 在视图中移动 imageview 并使用 UISwipeGestureRecognizer 从视图中删除 imageview。这是我的代码。

```
- (void)viewDidLoad
{

UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
panRecognizer.delegate = self;
[imgView1 addGestureRecognizer:panRecognizer];
[panRecognizer release];

UISwipeGestureRecognizer *swipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
swipeRecognizer.delegate = self;
swipeRecognizer.direction = (UISwipeGestureRecognizerDirectionLeft | 
                             UISwipeGestureRecognizerDirectionRight);
[imgView1 addGestureRecognizer:swipeRecognizer];
[swipeRecognizer release];
}

-(void)handleSwipe:(UITapGestureRecognizer *)recognizer{
NSLog(@"swipe");
UIView *viewGes = [recognizer view];

[viewGes removeFromSuperview];
}
- (void)handlePan:(UIPanGestureRecognizer *)recognizer {

NSLog(@"handlePan");
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

if (recognizer.state == UIGestureRecognizerStateEnded) {

    CGPoint velocity = [recognizer velocityInView:self.view];
    CGFloat magnitude = sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y));
    CGFloat slideMult = magnitude / 200;

    float slideFactor = 0.1 * slideMult; // Increase for more of a slide
    CGPoint finalPoint = CGPointMake(recognizer.view.center.x + (velocity.x * slideFactor), 
                                     recognizer.view.center.y + (velocity.y * slideFactor));
    finalPoint.x = MIN(MAX(finalPoint.x, 0), self.view.bounds.size.width);
    finalPoint.y = MIN(MAX(finalPoint.y, 0), self.view.bounds.size.height);

    [UIView animateWithDuration:slideFactor*2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        recognizer.view.center = finalPoint;
    } completion:nil];
}
} 
```

但我的问题滑动手势无法正常工作。有时会接到电话，有时没有。一些时间滑动移动图像，然后它也删除图像。有人知道正确处理这两种手势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:16:40.050

Make sure your class conforms to `<UIGestureRecognizerDelegate>` protocol.

Try adding this delegate method (to the class where you use this recognizers):

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T08:56:48.087

仔细检查您的所有图像视图用户交互是否已启用：

```
[imgView1 setUserInteractionEnabled:YES]; 
```

# javascript - 有效地对 word_number 键上的字典（或 js 中的任何键值数据结构）进行排序

> ID：10946880
> 
> 赞同：16
> 
> 时间：2012-06-08T10:09:54.260
> 
> 标签：javascript, jquery

我如何按键对字典进行排序

```
dict["word_21"] = "Hello Java";
dict["word_22"] = "Hello World";
dict["word_11"] = "Hello Javascript"; 
```

所以我得到

```
dict["word_22"] = "Hello World";
dict["word_21"] = "Hello Java";
dict["word_11"] = "Hello Javascript"; 
```

仅索引上有 word_number 组合，值是字符串。索引是不同的（没有相等的值），但在错误情况下可能是“未定义的”

编辑：其实我需要它的降序和升序。但是降序是我目前需要的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T11:18:14.150

此处用作键值映射（称为“字典”）的 javascript 对象没有顺序；IE。你不能排序。

你需要一个数组，例如

```
[
    {id: "word_11", entry:"Hello Javascript"},
    {id: "word_21", entry:"Hello Java"},
    {id: "word_22", entry:"Hello World"},
] 
```

然后您可以按id 或按条目[对其进行排序。](http://documentcloud.github.com/underscore/docs/underscore.html#section-28)您可以为此使用[您的 id-sort-algorithm](https://stackoverflow.com/questions/10921422/sort-javascript-array-with-word-number-values)。

* * *

或者，您可以在未排序的数据结构旁边使用一组键进行排序。这可能是最好（有效）和最简单的方法：

```
var dict = {
    "word_21": "Hello Java",
    "word_22": "Hello World",
    "word_11": "Hello Javascript"
}; // init (like your example)

var keys = Object.keys(dict); // or loop over the object to get the array
// keys will be in any order
keys.sort(); // maybe use custom sort, to change direction use .reverse()
// keys now will be in wanted order

for (var i=0; i<keys.length; i++) { // now lets iterate in sort order
    var key = keys[i];
    var value = dict[key];
    /* do something with key & value here */
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-08T10:16:50.637

试试这个

```
var sorted = [];
for(var key in dict) {
    sorted[sorted.length] = key;
}
sorted.sort(); 
```

对它的键进行排序`dict`并将其写回对象对我来说没有意义，但它是这样的：

```
function sortOnKeys(dict) {

    var sorted = [];
    for(var key in dict) {
        sorted[sorted.length] = key;
    }
    sorted.sort();

    var tempDict = {};
    for(var i = 0; i < sorted.length; i++) {
        tempDict[sorted[i]] = dict[sorted[i]];
    }

    return tempDict;
}

dict = sortOnKeys(dict); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-23T21:02:04.667

如果您只想对对象中的键进行排序，则可以使用以下方法（它是单行）

```
/**
 * (typescript) returns the given object with keys sorted alphanumerically.
 * @param {T} obj the object to sort
 * @returns {T} the sorted object
 */
 const sort = <T extends object>(obj: T): T => Object.keys(obj).sort()
        .reduce((acc, c) => { acc[c] = obj[c]; return acc }, {}) as T 
```

或在javascript中相同

```
/**
 * (javascript) returns the given object with keys sorted alphanumerically.
 * @param {T} obj the object to sort
 * @returns {T} the sorted object
 */
 const sort = (obj) => Object.keys(obj).sort()
        .reduce((acc, c) => { acc[c] = obj[c]; return acc }, {}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-15T23:11:32.633

@Amberlamps 不错的解决方案大部分时间都有效。但是，OP 是正确的，某些键存在*拆分问题*。javascript 中 sort() 的默认行为是使用字符串 Unicode 代码点来确定元素的顺序。例如，使用 @Amberlamps 方法*无法*正确排序以下键：

```
canvas_2_1/15/2018__2:55:20_PM

canvas_24_1/15/2018__2:55:20_PM 
```

*但是我们可以利用 sort() 接受一个可选参数*的事实来自定义排序方法，该参数是一个比较数组的 2 个元素的**函数。**

通过自定义比较函数的排序逻辑并将其传递给 sort() 方法，上面的键得到正确排序：

```
sorted.sort(function(a, b) {
    a = parseInt(get_between(a, 'canvas_', '_'));
    b = parseInt(get_between(b, 'canvas_', '_'));
    if (a > b) {
        return 1;
    }
    if (b > a) {
        return -1;
    }
    return 0;
    }); 
```

在这种情况下，我使用以下 get_between 方法：

```
function get_between(str, char_a, char_b) {
   res = str.split(char_a).pop().split(char_b).shift();
   return(res)
} 
```

要点是，如果您有棘手的键（可能是也可能不是“正确”使用 dict），您可以调整排序功能以仍然正确排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-10T18:20:52.883

简单地说，字典类型没有 keys() 方法，而 Object 类型有。您可以将 Object.keys() 方法传递给可迭代对象，并将键作为具有 .sort() 方法的列表返回。

```
Object.keys({r:2,d:2,c:3,p:0})
// returns ["r", "d", "c", "p"]
Object.keys({r:2,d:2,c:3,p:0}).sort()
// returns ["c", "d", "p", "r"]
Object.keys([6,7,8,9])
// returns ["0", "1", "2", "3"] 
```

最后，让我们[jsFiddle OP 的代码](http://jsfiddle.net/txcsthy0/1/)。

更新：Bergi 的答案太多了，我完全错过了“好答案”部分。我什至没有注意到他做了我在 jsFiddle 中所做的同样的事情。

# c# - SessionChannel 是如何工作的

> ID：10946882
> 
> 赞同：1
> 
> 时间：2012-06-08T10:10:00.603
> 
> 标签：c#, .net, wcf, wcf-sessions

[从这篇 MSDN 文章中](http://msdn.microsoft.com/en-us/library/aa751829.aspx)，我一遍又一遍地无法理解我们为什么要使用它以及它是如何工作的：

1.  带有会话的数据报
2.  请求-响应会话
3.  与会话双工

假设我有一个服务

```
InstanceContextMode = InstanceContextMode.PerSession
ConcurrencyMode=ConcurrencyMode.Single 
```

如果我有 2 个用于此服务的客户端，并且他们同时激活了该服务中的一个方法，为什么其中一个要等到服务完成另一个请求？PerSession + 2 个客户端 = 每个都有 ConcurrencyMode.Single 的“2”个服务。我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:21:18.303

至于您问题的 B 部分，这里有一系列关于 WCF 实例化、并发和节流的优秀文章：

*   [第 1 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-1.aspx)（实例化）
*   [第 2 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-2.aspx)（并发）
*   [第 3 部分](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-3.aspx)（节流）

**更新**

检查每个客户端调用的服务实例上下文 ID、会话 ID 和线程 ID，并首先验证它们是否不同。

要检查实例上下文 ID：

```
OperationContext.Current.InstanceContext.GetHashCode() 
```

检查会话 ID：

```
OperationContext.Current.SessionId 
```

要检查线程 ID：

```
Thread.CurrentThread.ManagedThreadId 
```

如果每个客户的它们都不同，那么我无法解释您遇到的问题。

# jquery - html方法中的jQuery访问变量

> ID：10946883
> 
> 赞同：0
> 
> 时间：2012-06-08T10:10:00.370
> 
> 标签：jquery, variables

这是我的代码（仅此而已）

```
$(document).ready(function() {
        $(".system").click(function() {
            var sid = this.id;
            alert(sid); // Outputs correct id
            $("#graph").html('<img src="graph.php?system=' + sid + '" />'); // sid seems to be null (call looks like "http://host/grap.php?system=")
        })
    }) 
```

显然，警报`sid`有效，而`sid`在选择器的 html 方法中使用则无效。我也尝试将值写入表单输入，然后从那里读取，但这也不起作用。

我认为，html 方法不支持其他调用或变量访问。对此有什么解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:12:19.230

**注意**：问题现已被编辑，因此在问题的示例代码中不再明显。

* * *

您正在`src`提前关闭属性值。将其更改为：

```
$("#graph").html('<img src="graph.php?system=' + sid + '" />');
                                          //^Removed " here 
```

您当前拥有的内容将导致如下标记：

```
<img src="graph.php?system="something" /> 
```

从中可以看出，`src`属性值只有*graph.php?system=*，这正是你所说的你注意到的。

通过更改上述行，您将获得如下标记：

```
<img src="graph.php?system=something" /> 
```

# java - 如何使用治理 API 将服务注册到 WSO2 治理注册表？

> ID：10946884
> 
> 赞同：0
> 
> 时间：2012-06-08T10:10:03.620
> 
> 标签：java, wso2

我想使用 Governance Registry API 注册服务，编写如下代码：

```
 ServiceManager serviceManager = new ServiceManager(registry);
    Service newService = serviceManager.newService(new QName("http://services.talend.org/ReservationService", "ReservationServiceProvider"));
    newService.addAttribute("endpoint", "http://localhost:8040/services/ReservationServiceProvider");
    newService.addAttribute("metadataVersion",String.valueOf(1));

    String scope = "http://com.talend/Reservation";
    URI[] scopes = new URI[] { URI.create(scope) };
    newService.setAttributes("scopes", Util.toStringArray(scopes));

    String address1 = "http://localhost:8040/services/ReservationServiceProvider";
    String address2 = "https://localhost:9001/services/ReservationServiceProvider";
    URI[] xAddresses = new URI[] { URI.create(address1), URI.create(address2) };
    newService.setAttributes("xAddresses", Util.toStringArray(xAddresses));

    serviceManager.addService(newService);
    //newService.activate(); 
```

它可以工作，并且可以在 Web-UI 中找到该服务。

然后，我想使用 org.wso2.carbon.discovery.client.DiscoveryClient 类来探测这个服务，如下所示：

```
public String[] lookupEndpoints(String scope) throws DiscoveryException{
    URI[] scopes = new URI[] { URI.create(scope) };
    TargetService[] services = client.probe(null, scopes);
    if (services != null && services.length > 0) {
        URI[] endpoints = services[0].getXAddresses();

        if (endpoints != null && endpoints.length > 0) {
            String[] returnEps = new String[endpoints.length];
            for (int i =0; i< endpoints.length; i ++){
                returnEps[i] = endpoints[i].toString();
            }
            return returnEps;
        }
    }
    throw new DiscoveryException("Unable to locate a service for the scope: " + scope);
} 
```

但有例外：

```
[java] Exception in thread "main" org.wso2.carbon.discovery.DiscoveryException: Error while executing the WS-Discovery probe
[java]     at org.wso2.carbon.discovery.client.DiscoveryClient.probe(DiscoveryClient.java:134)
[java]     at org.wso2.carbon.discovery.client.DiscoveryClient.probe(DiscoveryClient.java:100)
[java]     at com.talend.esb.test.wso2.greg.WSDiscoveryClient.lookupEndpoints(WSDiscoveryClient.java:54)
[java]     at com.talend.esb.test.wso2.greg.WSDiscoveryClient.main(WSDiscoveryClient.java:97)
[java] Caused by: org.apache.axis2.AxisFault: Error while searching for services
[java]     at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531)
[java]     at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:375)
[java]     at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
[java]     at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
[java]     at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
[java]     at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:555)
[java]     at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:531)
[java]     at org.wso2.carbon.discovery.client.DiscoveryClient.probe(DiscoveryClient.java:128)
[java]     ... 3 more 
```

我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:17:01.320

Those services are not the actual service endpoints(like hosted in application server). In Governance Registry , We are storing the contract details(wsdl, policy, schema, endpoints...etc) of the actual services.

# c# - 如何使用 C# 将字符串转换为 XML

> ID：10946888
> 
> 赞同：46
> 
> 时间：2012-06-08T10:10:23.277
> 
> 标签：c#, xml

全局变量`m_xDoc`

我有一个财产

```
public XmlDocument xDoc
{
    get {return m_xDoc; }
    set {value = m_xDoc; }           
} 

string xml = "<head><body><Inner> welcome </head></Inner><Outer> Bye</Outer></body></head>" 
```

现在我必须将此字符串设置为 XML 文档的属性...请指导我如何执行此操作

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-08T10:12:12.927

使用 XmlDocument 的 LoadXml 方法；

```
string xml = "<head><body><Inner> welcome </head> </Inner> <Outer> Bye</Outer></body></head>";
xDoc.LoadXml(xml); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-08T10:14:35.053

```
// using System.Xml;

String rawXml =
      @"<root>
          <person firstname=""Riley"" lastname=""Scott"" />
          <person firstname=""Thomas"" lastname=""Scott"" />
      </root>";

XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(rawXml); 
```

我认为这应该有效。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-09-25T19:37:08.610

```
string test = "<body><head>test header</head></body>";

XmlDocument xmltest = new XmlDocument();
xmltest.LoadXml(test);

XmlNodeList elemlist = xmltest.GetElementsByTagName("head");

string result = elemlist[0].InnerXml; 

//result -> "test header" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-08T10:12:55.377

```
xDoc.LoadXML("<head><body><Inner> welcome </head> </Inner> <Outer> Bye</Outer>                    
                    </body></head>"); 
```

# git - Git：名称和电子邮件地址配置

> ID：10946893
> 
> 赞同：40
> 
> 时间：2012-06-08T10:10:34.673
> 
> 标签：git

偶尔我会从 Git 收到如下所示的消息。我对此的问题是：

1.  为什么会这样？
2.  我怎样才能防止这种情况再次发生？
3.  这对我的提交或我可能采取的任何其他 Git 操作有何影响？

我意识到类似的问题已经发布到 Stack Overflow，但我不相信他们***特别***解决了这个消息。

* * *

您的姓名和电子邮件地址是根据您的用户名和主机名自动配置的。请检查它们是否准确。您可以通过显式设置来抑制此消息：

```
git config --global user.name "Your Name"
git config --global user.email you@example.com 
```

完成此操作后，您可以通过以下方式修复用于此提交的身份：

```
git commit --amend --reset-author 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-08T10:14:53.567

`Git`只是检测到您的配置文件中没有以下部分：

```
[user]
    name = <your name>
    email = <your mail> 
```

*   `<project_path>/.git/config`对于项目特定的配置文件。
*   `~/.gitconfig`全局配置文件

当你这样做时：

```
git config --global user.name "Your Name"
git config --global user.email you@example.com 
```

Git 将该信息写入配置文件（`--global`意味着在全局配置文件中）。

要在提交中包含正确的作者部分，如以下示例提交：

```
commit 79eeaa9f22321580a0e5bee6e237331691cd3b68
Author: Sandro Munda <foo@bar.com>
Date:   Thu Jun 8 10:40:05 2012 +0200

    My first commit 
```

您需要使用以下命令重置提交信息：

`git commit --amend --reset-author`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T10:13:46.007

这仅仅是因为您没有设置全局 user.name 和 user.email，因此 git 在创建新存储库时必须猜测它们。

用这个 ：

```
git config --global user.email "some@email.com"
git config --global user.name "ha" 
```

所以下次将使用这些设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T06:48:39.450

如果你想防止 git 猜测自动值，你可以设置

```
git config --global user.useConfigOnly true 
```

请参阅[https://git-scm.com/docs/git-config#Documentation/git-config.txt-useruseConfigOnly](https://git-scm.com/docs/git-config#Documentation/git-config.txt-useruseConfigOnly)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:13:47.733

您尚未为“桌面用户帐户”设置默认用户名和电子邮件。

请按照您发布的说明进行操作。

# asp.net-mvc-3 - RenderAction 拒绝访问

> ID：10946904
> 
> 赞同：0
> 
> 时间：2012-06-08T10:11:22.620
> 
> 标签：asp.net-mvc-3, razor, html-helper, access-denied, renderaction

我正在开发一个新项目并尝试登录该站点（它使用表单身份验证），但是一旦登录，我就会收到此错误。

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))

ASP.NET is not authorized to access the requested resource. Consider granting access rights to the resource to the ASP.NET request identity. ASP.NET has a base process identity (typically {MACHINE}\ASPNET on IIS 5 or Network Service on IIS 6 and IIS 7, and the configured application pool identity on IIS 7.5) that is used if the application is not impersonating. If the application is impersonating via <identity impersonate="true"/>, the identity will be the anonymous user (typically IUSR_MACHINENAME) or the authenticated request user.

To grant ASP.NET access to a file, right-click the file in Explorer, choose "Properties" and select the Security tab. Click "Add" to add the appropriate user or group. Highlight the ASP.NET account, and check the boxes for the desired access.

Source Error:

Line 10: 
Line 11:     <div id="partialListOfAuctionsDiv">
Line 12:         @{ Html.RenderAction("PartialListOfAuctions"); }
Line 13:     </div>
Line 14: </fieldset> 
```

突出显示为错误源的行是

```
@{ Html.RenderAction("PartialListOfAuctions"); } 
```

我不知道这可能意味着什么以及如何解决它。任何帮助将不胜感激。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:25:30.583

看起来好像 ASP.NET 进程没有对 web 文件夹的物理访问。您可以在获得授权之前访问该站点这一事实意味着 MVC 可以在此之前访问这些文件；这意味着它的凭据在您登录后正在更改。我相信，只有在您打开模拟时才会发生这种情况。在您的 web.config 中查找此行：

```
<identity impersonate="true" /> 
```

# actionscript-3 - 在 Flash Builder 4.6 中单击弹出窗口中的文本区域时出现空对象引用异常

> ID：10946905
> 
> 赞同：0
> 
> 时间：2012-06-08T10:11:23.307
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flex4.5

这是我的代码。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import comps.sampleTextArea;

        import mx.managers.PopUpManager;

        protected function button1_clickHandler(event:MouseEvent):void
        {
            var pop:sampleTextArea = new sampleTextArea();
            PopUpManager.createPopUp(this, sampleTextArea, false);
            PopUpManager.centerPopUp(pop);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:Button click="button1_clickHandler(event)" label="open popup"/> 
```

这是弹出代码

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import mx.managers.PopUpManager;
        protected function button1_clickHandler(event:MouseEvent):void
        {
            ta.text = '';
            PopUpManager.removePopUp(this);
        }
    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:layout>
    <s:VerticalLayout horizontalAlign="center" verticalAlign="top" />
</s:layout>
<s:TextArea id="ta" width="100%" height="90%">

</s:TextArea>
<s:Button label="Submit" click="button1_clickHandler(event)" /> 
```

当我点击应用程序错误后的文本区域时。

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at spark.components::Scroller/focusInHandler()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Scroller.as:2139]
at flash.display::Stage/set focus()
at flashx.textLayout.container::ContainerController/http://ns.adobe.com/textLayout/internal/2008::setFocus()[C:\Vellum\branches\v2\2.0\dev\output\openSource\textLayout\src\flashx\textLayout\container\ContainerController.as:2265]
at flashx.textLayout.container::ContainerController/mouseDownHandler()[C:\Vellum\branches\v2\2.0\dev\output\openSource\textLayout\src\flashx\textLayout\container\ContainerController.as:2067]
at flashx.textLayout.container::TextContainerManager/mouseDownHandler()[C:\Vellum\branches\v2\2.0\dev\output\openSource\textLayout\src\flashx\textLayout\container\TextContainerManager.as:1939]
at spark.components.supportClasses::RichEditableTextContainerManager/mouseDownHandler()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\supportClasses\RichEditableTextContainerManager.as:666]
at flashx.textLayout.container::ContainerController/http://ns.adobe.com/textLayout/internal/2008::requiredMouseDownHandler()[C:\Vellum\branches\v2\2.0\dev\output\openSource\textLayout\src\flashx\textLayout\container\ContainerController.as:2088]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:13152]
at mx.managers::SystemManager/mouseEventHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2918] 
```

我如何处理这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:16:17.623

试试看，因为`this`参考阶段没有点击的元素：

```
PopUpManager.removePopUp(event.target); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:00:56.107

在做了许多实验/方法后，我得出结论，问题是由于弹出组件父容器造成的。

我使用 Spark 的 Group/VGroup/HGroup，那么这个问题仍然存在，但是如果我用 spark Panel/SkinnableContainer 更改父容器，那么问题就解决了。

尝试自己并享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T15:25:38.983

您可能无法在非 IFocusManagerContainer 中弹出可聚焦组件。如果你的 Group 容器实现了 IFocusManagerContainer 类，你可以使用 PopUpManager。

```
<s:Group implements="mx.managers.IFocusManagerContainer"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:53:29.793

我遇到了同样的问题，根本原因是如果弹出的组件没有实现`IFocusManagerContainer`接口，PopUpManager/PopUpAnchor 将无法正确设置 focusManager。实现这样的接口后，问题就消失了。

您可以阅读启发解决方案的这篇[博文。](http://eastmond.org/blog/?tag=popupmanager)

# php - 更新mysql中的lastlogin列值

> ID：10946912
> 
> 赞同：0
> 
> 时间：2012-06-08T10:11:46.443
> 
> 标签：php, mysql

我想更新 lastlogin 列的值。我写了这样的代码，但是列没有更新。我在 main.js 中写了一些代码来插入查询。这里我没有写任何代码来更新 main 中的 lastlogin 列值。 js。为了更新 lastlogin 列，我在 dbfunc.php 中编写了 updatelogin 函数，如下所示。

```
function updatelogin($lastlogin)
    {
         alert("hi");
        $query="UPDATE users set last_login='$lastlogin' where email='".$email."'";
         $queryresult= mysql_query($query);
         $count=mysql_num_rows($queryresult);
            if($count>0)
             {
                    return 1;
             }
            else
             {
                return 0;
            }    
        }   

    function register($details_arr)
       {
          $emailcheck=db_func::checkemail($details_arr['email']);
            if($emailcheck == 0){

         //print_r($details_arr);
         $regemail=$details_arr['email'];
       $regpwd=$details_arr['password'];
       $zip=$details_arr['zip'];
       $secqun=$details_arr['secqun'];
       $answer=$details_arr['answer'];
       $now=date("Y-m-d H:i:s",time());
       $lastlogin=date("Y-m-d H:i:s",time());

       $query= "INSERT INTO users (email,md5pwd,zip,squestion,sanswer,member_since,last_login,last_ip) VALUES('".$regemail."','".$regpwd."','".$zip."','".$secqun."','".$answer."','".$now."','".$lastlogin."','".$_SERVER['REMOTE_ADDR']."')";
                 $queryresult=mysql_query($query);
                 echo mysql_error();
                if($queryresult)
                {
                    non_db_func::loginuser($email);
                    db_func::updatelogin($details_arr['lastlogin']);
                    return 1;
                    }

                else
                    return 0;
                    }
                     else{

                     return 2;    
                      } 
```

谁能告诉我，为什么我的数据库中没有更新 lastlogin 列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:14:43.690

要么你有一个你没有看到的 mysql 错误，要么你试图找到的电子邮件地址不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:15:43.197

您必须在函数 updatelogin 中传递 $email

因为在 updatelogin 中无法访问 $email

**还有你在更新查询中使用 $email 而不是 $regemail 的其他东西。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:54:03.537

**问题是在函数中`updatelogin($lastlogin)`你还没有定义`$email`将持有什么。**

如果您在查询更新语句之后回显您的查询（之后`$query = UPDATE .....`）

```
echo $query 
```

你会看到你的问题是什么。

## 更新 1

我认为你应该在`$query`声明之前有这样的东西
`$email=$details_arr['email'];`

## 或者

在函数中传递`$email`值作为`updatelogin($lastlogin, $email)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:59:30.447

**你能不能用下面的一个替换你的函数，然后再试一次！**

```
function updatelogin($lastlogin,$email)
{
 $query="UPDATE users set last_login='".$lastlogin."' where email='".$email."'";
 $queryresult= mysql_query($query);
 $count=mysql_num_rows($queryresult);
    if($count>0)
     {
            return 1;
     }
    else
     {
        return 0;
    }    
}   

function register($details_arr)
{
  $emailcheck=db_func::checkemail($details_arr['email']);
    if($emailcheck == 0){

        //print_r($details_arr);
        $regemail=$details_arr['email'];
        $regpwd=$details_arr['password'];
        $zip=$details_arr['zip'];
        $secqun=$details_arr['secqun'];
        $answer=$details_arr['answer'];
        $now=date("Y-m-d H:i:s",time());
        $lastlogin=date("Y-m-d H:i:s",time());

        $query= "INSERT INTO users (email,md5pwd,zip,squestion,sanswer,member_since,last_login,last_ip) VALUES('".$regemail."','".$regpwd."','".$zip."','".$secqun."','".$answer."','".$now."','".$lastlogin."','".$_SERVER['REMOTE_ADDR']."')";
        $queryresult=mysql_query($query) or die(mysql_error());

        if($queryresult)
        {
            non_db_func::loginuser($email);
            db_func::updatelogin($lastlogin,$regemail);
            return 1;
        }
        else
        {
            return 0;
        }
   }else{
        return 2;    
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-08T10:19:34.600

首先，您的代码中有错误。`alert('hi)`是一个javascript函数。以后试试`print_r('hi)`，第二。你的mysql格式不正确。

```
$query="UPDATE users set last_login='$lastlogin' where email='".$email."'"; 
```

您已经转义了 $email，但没有转义 $lastlogin。试试这个：

```
$query="UPDATE users set last_login='".$lastlogin."' where email='".$email."'"; 
```

另外如前所述，您需要将 $email 传递到您的函数中以在 mysql 中使用

# c# - 尝试确定两个列表中的共同元素时出现问题

> ID：10946914
> 
> 赞同：2
> 
> 时间：2012-06-08T10:11:49.780
> 
> 标签：c#, .net, linq

我有一个类，`ClassX`为了这个问题的目的而调用，声明如下：

```
class X 
{ 
    public Guid Id { get; set; } 
    public string Name { get; set; } 
    public string Description { get; set; } 
} 
```

如果我有这些类的两个实例（`instanceOne`和`instanceTwo`），`List<T>`我怎样才能找到两个实例中相同的元素：

假设 instanceOne 中有两个元素，instanceTwo 中有四个元素。在每个实例中，其中两个元素是相同的（由它们具有相同的 Guid Id 的事实定义）

我认为我应该能够以我的方式进行 LINQ，但这不是为我做的

```
// What's common to the two instances?
var commonElements = (
    from a in instanceTwo
    join b in instanceOne on a.Id equals b.Id
    select b).ToList();

// What's not in instanceOne and in instanceTwo? 
var notInInstanceOne = instanceTwo.Except(commonElements) 
```

在这种情况下`instanceTwo`是一个超集，`instanceOne`但情况可能并非总是如此，因此我应该能够翻转原始 LINQ 语句以获取`instanceOne`不在`instanceTwo`即的元素：

```
var notInInstanceTwo = instanceOne.Except(commonElements) 
```

令人沮丧的是，原来的 LINQ 语句（我试图确定共同元素）不起作用，谁能发现我做错了什么？

**编辑 2012-06-08 11:00 UTC**

根据@Nikhil Agrawal 和@Trust me - 我是一名医生，我使用了 Intersect 方法，但这不会产生预期的结果：

```
 var commonItems = instanceTwo.Intersect(instanceOne); // Returns nothing
    var itemsInTwoNotOne= instanceTwo.Except(instanceOne); // Returns everything in instanceTwo 
```

FWIW 我对 Equals() 方法的实现是：

```
public bool Equals(Guid x, Guid y)
{
   if (x == y)
   {
      return true;
   }
   return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:15:35.173

如果`Except`有效，那么

```
var commonItems = instanceOne.Intersect(instanceTwo); 
```

也应该工作。:)

在旁注中，它会比较引用，所以如果你想要不同的功能，你必须实现你自己的`IEqualityComparer`- 但同样适用于`Except`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:04:16.293

使用可以使用[intersect](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)来获取所有常见元素的列表。您还应该创建一个[IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)，因为您想通过其 Id 来识别元素。

例子：

```
class Program
{
    class X
    {
        public Guid Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }

    class XequalityComparer : IEqualityComparer<X>
    {
        //Note: maybe add a null check in these methods
        public bool Equals(X x, X y) { return x.Id.Equals(y.Id); }
        public int GetHashCode(X obj) { return obj.Id.GetHashCode(); }
    }

    static void Main(string[] args)
    {
        var instanceOne = new List<X>() { 
            new X() { Id = Guid.NewGuid() }, 
            new X() { Id = Guid.Parse("EF42EE32-1B9E-493C-9D39-4610E0FB29D0") } 
        };
        var instanceTwo = new List<X>() { 
            new X() { Id = Guid.NewGuid() }, 
            new X() { Id = Guid.Parse("EF42EE32-1B9E-493C-9D39-4610E0FB29D0") } 
        };

        var common = instanceOne.Intersect(instanceTwo, new XequalityComparer());
    }
} 
```

# html - 使用 css3 在表格上旋转文本

> ID：10946915
> 
> 赞同：3
> 
> 时间：2012-06-08T10:11:56.413
> 
> 标签：html, css

我正在尝试创建一个用于打印目的的表格。
正如在许多表单中看到的那样，我想要垂直旋转的文本以及表单的左侧和右侧。

到目前为止，我已经实现了这一点

![在此处输入图像描述](../Images/705250605080410f69be6dd3da42e390.png)

小提琴：http: [//jsfiddle.net/naveen/P8AZD/](http://jsfiddle.net/naveen/P8AZD/)

这有两个问题

1.  我希望边框 td 宽度为 50 像素，文本跨越更多区域。目前旋转的文本也被剪裁为 50px。如何克服这一点？
2.  样式`rotate-right`有误`filter: progid:DXImageTransform.Microsoft.Matrix`。它已从 复制`.rotate-left`。过滤器中的值（M11、M12、M21、M22）表示什么？

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:27:29.990

见[http://jsfiddle.net/P8AZD/7/](http://jsfiddle.net/P8AZD/7/)

我在您的文本周围添加了一个 div 并使其不换行

# iphone - 在这种情况下是否可以一次又一次地重新分配窗口的rootviewcontroller...？

> ID：10946918
> 
> 赞同：3
> 
> 时间：2012-06-08T10:12:08.207
> 
> 标签：iphone, objective-c, ios, uisplitviewcontroller

我有一个基于 splitviewcontroller 的应用程序，但问题是拆分视图在两个模态视图之后出现。

1.  用于登录
2.  其他一些对用户有用的信息。

现在我知道 splitview 控制器应该始终是根视图控制器。所以我要做的是在我的 appDelegate 类中创建三个对象。A、B 和拆分视图控制器 C。

导航顺序为A-->B-->C；

所以在应用程序委托中，这就是我所做的..

```
self.loginViewController=[[LoginViewController alloc] init];
self.window.rootViewController = self.loginViewController; 
```

然后一旦按下登录按钮，这就是我从 loginView 控制器所做的事情。

```
TSAppDelegate *appDelegate=(TSAppDelegate *)[[UIApplication sharedApplication] delegate];
                appDelegate.meetingsViewController=[[MeetingsViewController alloc] init];
                [UIView
                 transitionWithView:appDelegate.window 
                 duration:0.8
                 options:UIViewAnimationOptionTransitionCrossDissolve
                 animations:^(void) {
                     BOOL oldState = [UIView areAnimationsEnabled];
                     [UIView setAnimationsEnabled:NO];
                     appDelegate.window.rootViewController=appDelegate.meetingsViewController;    
                     [UIView setAnimationsEnabled:oldState];
                 } 
                 completion:nil]; 
```

这里展示了第二个视图......同样，如果在第二个视图控制器上执行了某些操作，我将显示拆分视图控制器......

所以我的问题是这是否是正确的方法......？（顺便说一句，这很好用，它也是一个企业应用程序）

PS我还尝试将拆分视图控制器作为根视图控制器并将其他视图控制器视图添加为其子视图，但这不能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:27:18.757

当然，重新分配窗口的`rootViewController`.

# javascript - 如何显示一个 div 并隐藏所有其他

> ID：10946927
> 
> 赞同：1
> 
> 时间：2012-06-08T10:12:43.257
> 
> 标签：javascript, jquery, html

我想在每个按钮单击时显示一个 div，并且还想隐藏其他所有 div 我该怎么做。

**HTML**

```
<div id=a style="display:none">1</diV>
<div id=b style="display:none">2</diV>
<div id=c style="display:none">3</diV>
<div id=d style="display:none" >4</diV>

<input type=button value=1 id=w>
<input type=button value=2 id=x>
<input type=button value=3 id=y>
<input type=button value=4 id=z> 
```

**jQuery**

```
$​('#w').live('click', function () {
    $('#a').css('display', 'block');
});

$('#x').live('click', function () {
    $('#b').css('display', 'block');
});

$('#y').live('click', function () {
    $('#c').css('display', 'block');
});

$('#z').live('click', function () {
    $('#d').css('display', 'block');
}); 
```

[​http://jsfiddle.net/6UcDR/](http://jsfiddle.net/6UcDR/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:20:03.843

在您的 JSFiddle 中，您使用的是 jQuery 1.7.2。如果您在实际应用程序中使用此版本，则不应**使用**，`$.live()`而应使用`$.on()`- 前者已被弃用，而支持后者。

解决问题的最简单和最干净的方法是将按钮和 div 都包装在容器中，并用于`$.index()`将按钮与 div 关联：

```
<div class="showThese">
    <div id="a" style="display:none">1</div>
    <div id="b" style="display:none">2</div>
    <div id="c" style="display:none">3</div>
    <div id="d" style="display:none" >4</div>
</div>

<div class="buttons">
    <input type="button" value="1" id="w">
    <input type="button" value="2" id="x">
    <input type="button" value="3" id="y">
    <input type="button" value="4" id="z">
</div> 
```

请注意，您的属性*必须*被引用，如上面的 HTML 中一样。

然后，在 JavaScript 中，您只需要将一个委托事件绑定到按钮容器。我将`$.on()`在这种情况下使用：

```
$('div.buttons').on('click', 'input', function() {
    var divs = $('div.showThese').children();

    divs.eq($(this).index()).show().siblings().hide();
}); 
```

[这](http://jsfiddle.net/LBfEK/)是一个演示。

上述方法无需使用 ID 和其他属性，但是如果您想要容器中的其他元素，则需要小心，否则`$.index()`将开始失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:15:33.383

Just start by hiding all other div's, then showing the one you want to be shown.

```
$​('#w').live('click', function(){
    $('div').hide();
    $('#a').show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:18:15.277

`live` is deprecated, use `on`

```
$​('input').on('click', function(){

    var index = $(this).index();
    $('div').hide().eq(index).show();

}); 
```

example from jQuery.com:

```
function notify() { alert("clicked"); }
$("button").on("click", notify); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T10:20:09.137

如果理解正确，它应该只是在显示您的特定 div 之前为 div 设置 display:none 。

```
 $('#w').live('click', function(){
        $('div').css('display','none');
        $('#a').css('display','block');

    });

    $('#x').live('click', function(){
         $('div').css('display','none');
        $('#b').css('display','block');
    });

    $('#y').live('click', function(){
         $('div').css('display','none');
        $('#c').css('display','block');
    });

    $('#z').live('click', function(){
         $('div').css('display','none');
        $('#d').css('display','block');
    });

​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T10:36:10.590

检查演示[http://jsfiddle.net/6UcDR/2/](http://jsfiddle.net/6UcDR/2/)这是你想要实现的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T10:22:14.543

试试这个**jQuery** -

```
$​('#w').click(function(){
$('#a').show()
$('#b,#c,#d').hide()
});

$('#x').click(function(){
$('#b').show();
$('#a,#c,#d').hide()
});

$('#y').click(function(){
$('#c').show();
$('#b,#a,#d').hide()
});

$('#z').click(function(){
$('#d').show();
$('#b,#c,#d').hide()
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T10:22:53.457

为您想要显示或隐藏的所有 div 添加一个类，例如：

```
<div id=a class="hide" style="display:none">1</diV> 
```

然后在每个onclick函数中加入如下语句

```
 $('.hide').css('display','none'); /* Replace .hide with whatever class name u have chosen*/ 
```

要查看实际答案：http: [//jsfiddle.net/6UcDR/1/](http://jsfiddle.net/6UcDR/1/)

# dapper - 忽略 Dapper 中的属性

> ID：10946931
> 
> 赞同：9
> 
> 时间：2012-06-08T10:12:56.477
> 
> 标签：dapper

在 Dapper ( [http://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/) ) 中，有没有办法忽略模型类中的属性，即在使用`Insert`扩展方法时？我的模型类有一组未保存在关联表中的*计算属性。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T09:50:16.080

好吧，Dapper 没有`Insert`扩展方法，那就是在 dapper.contrib、dapper extensions 或 dapper rainbow。

Dapper 本身允许您执行以下操作：

```
Animal a = new Animal {Age = 10, Family = "Canine"}
// only insert Age
cnn.Execute("insert Animal(Age) values (@Age)", a); 
```

要解决某些扩展类，您有时可以这样做：

```
cnn.InsertExtension("Animal", new{a.Age}); 
```

无论如何，您始终可以使用原始 Dapper 来处理复杂的过滤插入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-14T16:40:59.847

如果您使用的是 Dapper.Contrib，请在 SqlMapperExtensions 中查看以下代码：

[https://github.com/StackExchange/dapper-dot-net/blob/master/Dapper.Contrib/SqlMapperExtensions.cs#L54-L66](https://github.com/StackExchange/dapper-dot-net/blob/master/Dapper.Contrib/SqlMapperExtensions.cs#L54-L66)

```
 private static List<PropertyInfo> ComputedPropertiesCache(Type type)
        {
            //...
            var computedProperties = TypePropertiesCache(type).Where(p => p.GetCustomAttributes(true).Any(a => a is ComputedAttribute)).ToList(); 
```

和[https://github.com/StackExchange/dapper-dot-net/blob/master/Dapper.Contrib/SqlMapperExtensions.Async.cs#L147-L165](https://github.com/StackExchange/dapper-dot-net/blob/master/Dapper.Contrib/SqlMapperExtensions.Async.cs#L147-L165)

```
 var computedProperties = ComputedPropertiesCache(type);
        var allPropertiesExceptKeyAndComputed = allProperties.Except(keyProperties.Union(computedProperties)).ToList();
        //...
        for (var i = 0; i < allPropertiesExceptKeyAndComputed.Count; i++)
        {
            //... 
```

因此，如果您`ComputedAttribute`在类的属性中添加 a，Dapper.Contrib 不会尝试将它们插入数据库！您不必担心让 Dapper 忽略这些属性，只需 Dapper.Contrib。因为如果您`select * from tablename`在 dapper 查询中使用，它只会尝试映射存在的列。因此，您只是不为标记为的属性创建列`[Computed]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-30T23:12:11.910

只需将`[Computed]`属性添加到相关属性即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-06T21:16:34.810

如果您只想从插入/更新语句中“隐藏”一个属性，那么在 dapper 扩展中有一种官方方法可以做到这一点：

```
using DapperExtensions.Mapper;

    public class UserMapper : ClassMapper<User>
        {
            public UserMapper()
            {
                base.Map(m => m.IsTrialUser).Ignore();
                base.AutoMap();
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-10T14:30:23.463

我编写了 SqlMapperExtensions 类的修改版本，并添加了一个 string[] 参数 ExcludeProperties 用于排除列。使用此类，您可以进行如下调用：

```
// Insert
result = (int)cn.Insert<Animal>(box, new string[] { "Errors", "IsValid" });

// Update
cn.UpdateEntity<Animal>(box, new string[] { "Errors", "IsValid" }); 
```

在上面的语句中，我添加的 'Errors' 和 'IsValid' 属性不会包含在 SQL 语句中。

这是修改后的扩展类：

SqlMapperExtensions.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Collections.Concurrent;
using System.Reflection.Emit;
using System.Threading;
using System.Runtime.CompilerServices;

namespace Dapper.Contrib.Extensions
{

    public static class SqlMapperExtensions
    {
        public interface IProxy
        {
            bool IsDirty { get; set; }
        }

        private static readonly ConcurrentDictionary<RuntimeTypeHandle, IEnumerable<PropertyInfo>> KeyProperties = new ConcurrentDictionary<RuntimeTypeHandle, IEnumerable<PropertyInfo>>();
        private static readonly ConcurrentDictionary<RuntimeTypeHandle, IEnumerable<PropertyInfo>> TypeProperties = new ConcurrentDictionary<RuntimeTypeHandle, IEnumerable<PropertyInfo>>();
        private static readonly ConcurrentDictionary<RuntimeTypeHandle, string> GetQueries = new ConcurrentDictionary<RuntimeTypeHandle, string>();
        private static readonly ConcurrentDictionary<RuntimeTypeHandle, string> TypeTableName = new ConcurrentDictionary<RuntimeTypeHandle, string>();

        private static IEnumerable<PropertyInfo> KeyPropertiesCache(Type type)
        {
            if (KeyProperties.ContainsKey(type.TypeHandle))
            {
                return KeyProperties[type.TypeHandle];
            }

            var allProperties = TypePropertiesCache(type);
            var keyProperties = allProperties.Where(p => p.GetCustomAttributes(true).Any(a => a is KeyAttribute)).ToList();

            if (keyProperties.Count == 0)
            {
                var idProp = allProperties.Where(p => p.Name.ToLower() == "id" || p.Name.ToLower() == (type.Name.ToLower() + "id")).FirstOrDefault();
                if (idProp != null)
                {
                    keyProperties.Add(idProp);
                }
            }

            KeyProperties[type.TypeHandle] = keyProperties;
            return keyProperties;
        }
        private static IEnumerable<PropertyInfo> TypePropertiesCache(Type type)
        {
            if (TypeProperties.ContainsKey(type.TypeHandle))
            {
                return TypeProperties[type.TypeHandle];
            }

            var properties = type.GetProperties();
            TypeProperties[type.TypeHandle] = properties;
            return properties;
        }

        /// <summary>
        /// Returns a single entity by a single id from table "Ts". T must be of interface type. 
        /// Id must be marked with [Key] attribute.
        /// Created entity is tracked/intercepted for changes and used by the Update() extension. 
        /// </summary>
        /// <typeparam name="T">Interface type to create and populate</typeparam>
        /// <param name="connection">Open SqlConnection</param>
        /// <param name="id">Id of the entity to get, must be marked with [Key] attribute</param>
        /// <returns>Entity of T</returns>
        public static T GetEntity<T>(this IDbConnection connection, dynamic id, IDbTransaction transaction = null, int? commandTimeout = null) where T : class
        {
            var type = typeof(T);
            string sql;
            if (!GetQueries.TryGetValue(type.TypeHandle, out sql))
            { 
                var keys = KeyPropertiesCache(type);
                if (keys.Count() > 1)
                    throw new DataException("Get<T> only supports an entity with a single [Key] property");
                if (keys.Count() == 0)
                    throw new DataException("Get<T> only supports en entity with a [Key] property");

                var onlyKey = keys.First();

                var name = GetTableName(type);

                // TODO: pluralizer 
                // TODO: query information schema and only select fields that are both in information schema and underlying class / interface 
                sql = "select * from " + name + " where " + onlyKey.Name + " = @id";
                GetQueries[type.TypeHandle] = sql;
            }

            var dynParms = new DynamicParameters();
            dynParms.Add("@id", id);

            T obj = null;

            if (type.IsInterface)
            {
                var res = connection.Query(sql, dynParms).FirstOrDefault() as IDictionary<string, object>;

                if (res == null)
                    return (T)((object)null);

                obj = ProxyGenerator.GetInterfaceProxy<T>();

                foreach (var property in TypePropertiesCache(type))
                {
                    var val = res[property.Name];
                    property.SetValue(obj, val, null);
                }

                ((IProxy)obj).IsDirty = false;   //reset change tracking and return
            }
            else
            {
                obj = connection.Query<T>(sql, dynParms, transaction: transaction, commandTimeout: commandTimeout).FirstOrDefault();
            }
            return obj;
        }

        private static string GetTableName(Type type)
        {
            string name;
            if (!TypeTableName.TryGetValue(type.TypeHandle, out name))
            {
                //name = type.Name + "s";
                name = type.Name;
                if (type.IsInterface && name.StartsWith("I"))
                    name = name.Substring(1);

                //NOTE: This as dynamic trick should be able to handle both our own Table-attribute as well as the one in EntityFramework 
                var tableattr = type.GetCustomAttributes(false).Where(attr => attr.GetType().Name == "TableAttribute").SingleOrDefault() as
                    dynamic;
                if (tableattr != null)
                    name = tableattr.Name;
                TypeTableName[type.TypeHandle] = name;
            }
            return name;
        }

        /// <summary>
        /// Inserts an entity into table "Ts" and returns identity id.
        /// </summary>
        /// <param name="connection">Open SqlConnection</param>
        /// <param name="entityToInsert">Entity to insert</param>
        /// <returns>Identity of inserted entity</returns>
        public static long Insert<T>(this IDbConnection connection, T entityToInsert, string[] ExcludeProperties = null, IDbTransaction transaction = null, int? commandTimeout = null) where T : class
        {
            //using (var tx = connection.BeginTransaction())
            //{
                var type = typeof(T);

                var name = GetTableName(type);

                var sb = new StringBuilder(null);
                sb.AppendFormat("insert into {0} (", name);

                var allProperties = TypePropertiesCache(type);
                if (ExcludeProperties != null)
                {
                    List<PropertyInfo> someProperties = allProperties.ToList();
                    foreach (PropertyInfo prop in allProperties.ToArray())
                    {
                        if (ExcludeProperties.Contains(prop.Name))
                        {
                            someProperties.Remove(prop);
                        }
                    }
                    allProperties = someProperties.AsEnumerable();
                }

                var keyProperties = KeyPropertiesCache(type);

                for (var i = 0; i < allProperties.Count(); i++)
                {
                    var property = allProperties.ElementAt(i);
                    if (keyProperties.Contains(property)) continue;

                    sb.Append(property.Name);
                    if (i < allProperties.Count() - 1)
                        sb.Append(", ");
                }
                sb.Append(") values (");
                for (var i = 0; i < allProperties.Count(); i++)
                {
                    var property = allProperties.ElementAt(i);
                    if (keyProperties.Contains(property)) continue;

                    sb.AppendFormat("@{0}", property.Name);
                    if (i < allProperties.Count() - 1)
                        sb.Append(", ");
                }
                sb.Append(") ");
                connection.Execute(sb.ToString(), entityToInsert, transaction: transaction, commandTimeout: commandTimeout);
                //NOTE: would prefer to use IDENT_CURRENT('tablename') or IDENT_SCOPE but these are not available on SQLCE
                var r = connection.Query("select @@IDENTITY id");
                //tx.Commit();
                return (int)r.First().id;
            //}
        }

        /// <summary>
        /// Updates entity in table "Ts", checks if the entity is modified if the entity is tracked by the Get() extension.
        /// </summary>
        /// <typeparam name="T">Type to be updated</typeparam>
        /// <param name="connection">Open SqlConnection</param>
        /// <param name="entityToUpdate">Entity to be updated</param>
        /// <returns>true if updated, false if not found or not modified (tracked entities)</returns>
        public static bool UpdateEntity<T>(this IDbConnection connection, T entityToUpdate, string[] ExcludeProperties = null, IDbTransaction transaction = null, int? commandTimeout = null) where T : class
        {
            var proxy = entityToUpdate as IProxy;
            if (proxy != null)
            {
                if (!proxy.IsDirty) return false;
            }

            var type = typeof(T);

            var keyProperties = KeyPropertiesCache(type);
            if (keyProperties.Count() == 0)
                throw new ArgumentException("Entity must have at least one [Key] property");

            var name = GetTableName(type);

            var sb = new StringBuilder();
            sb.AppendFormat("update {0} set ", name);

            var allProperties = TypePropertiesCache(type);
            if (ExcludeProperties != null)
            {
                List<PropertyInfo> someProperties = allProperties.ToList();
                foreach (PropertyInfo prop in allProperties.ToArray())
                {
                    if (ExcludeProperties.Contains(prop.Name))
                    {
                        someProperties.Remove(prop);
                    }
                }
                allProperties = someProperties.AsEnumerable();
            }

            var nonIdProps = allProperties.Where(a => !keyProperties.Contains(a));

            for (var i = 0; i < nonIdProps.Count(); i++)
            {
                var property = nonIdProps.ElementAt(i);
                sb.AppendFormat("{0} = @{1}", property.Name, property.Name);
                if (i < nonIdProps.Count() - 1)
                    sb.AppendFormat(", ");
            }
            sb.Append(" where ");
            for (var i = 0; i < keyProperties.Count(); i++)
            {
                var property = keyProperties.ElementAt(i);
                sb.AppendFormat("{0} = @{1}", property.Name, property.Name);
                if (i < keyProperties.Count() - 1)
                    sb.AppendFormat(" and ");
            }
            var updated = connection.Execute(sb.ToString(), entityToUpdate, commandTimeout: commandTimeout, transaction: transaction);
            return updated > 0;
        }

        /// <summary>
        /// Delete entity in table "Ts".
        /// </summary>
        /// <typeparam name="T">Type of entity</typeparam>
        /// <param name="connection">Open SqlConnection</param>
        /// <param name="entityToDelete">Entity to delete</param>
        /// <returns>true if deleted, false if not found</returns>
        public static bool Delete<T>(this IDbConnection connection, T entityToDelete, IDbTransaction transaction = null, int? commandTimeout = null) where T : class
        {
            var type = typeof(T);

            var keyProperties = KeyPropertiesCache(type);
            if (keyProperties.Count() == 0)
                throw new ArgumentException("Entity must have at least one [Key] property");

            var name = GetTableName(type);

            var sb = new StringBuilder();
            sb.AppendFormat("delete from {0} where ", name);

            for (var i = 0; i < keyProperties.Count(); i++)
            {
                var property = keyProperties.ElementAt(i);
                sb.AppendFormat("{0} = @{1}", property.Name, property.Name);
                if (i < keyProperties.Count() - 1)
                    sb.AppendFormat(" and ");
            }
            var deleted = connection.Execute(sb.ToString(), entityToDelete, transaction: transaction, commandTimeout: commandTimeout);
            return deleted > 0;
        }

        class ProxyGenerator
        {
            private static readonly Dictionary<Type, object> TypeCache = new Dictionary<Type, object>();

            private static AssemblyBuilder GetAsmBuilder(string name)
            {
                var assemblyBuilder = Thread.GetDomain().DefineDynamicAssembly(new AssemblyName { Name = name },
                    AssemblyBuilderAccess.Run);       //NOTE: to save, use RunAndSave

                return assemblyBuilder;
            }

            public static T GetClassProxy<T>()
            {
                // A class proxy could be implemented if all properties are virtual
                //  otherwise there is a pretty dangerous case where internal actions will not update dirty tracking
                throw new NotImplementedException();
            }

            public static T GetInterfaceProxy<T>()
            {
                Type typeOfT = typeof(T);

                if (TypeCache.ContainsKey(typeOfT))
                {
                    return (T)TypeCache[typeOfT];
                }
                var assemblyBuilder = GetAsmBuilder(typeOfT.Name);

                var moduleBuilder = assemblyBuilder.DefineDynamicModule("SqlMapperExtensions." + typeOfT.Name); //NOTE: to save, add "asdasd.dll" parameter

                var interfaceType = typeof(Dapper.Contrib.Extensions.SqlMapperExtensions.IProxy);
                var typeBuilder = moduleBuilder.DefineType(typeOfT.Name + "_" + Guid.NewGuid(),
                    TypeAttributes.Public | TypeAttributes.Class);
                typeBuilder.AddInterfaceImplementation(typeOfT);
                typeBuilder.AddInterfaceImplementation(interfaceType);

                //create our _isDirty field, which implements IProxy
                var setIsDirtyMethod = CreateIsDirtyProperty(typeBuilder);

                // Generate a field for each property, which implements the T
                foreach (var property in typeof(T).GetProperties())
                {
                    var isId = property.GetCustomAttributes(true).Any(a => a is KeyAttribute);
                    CreateProperty<T>(typeBuilder, property.Name, property.PropertyType, setIsDirtyMethod, isId);
                }

                var generatedType = typeBuilder.CreateType();

                //assemblyBuilder.Save(name + ".dll");  //NOTE: to save, uncomment

                var generatedObject = Activator.CreateInstance(generatedType);

                TypeCache.Add(typeOfT, generatedObject);
                return (T)generatedObject;
            }

            private static MethodInfo CreateIsDirtyProperty(TypeBuilder typeBuilder)
            {
                var propType = typeof(bool);
                var field = typeBuilder.DefineField("_" + "IsDirty", propType, FieldAttributes.Private);
                var property = typeBuilder.DefineProperty("IsDirty",
                                               System.Reflection.PropertyAttributes.None,
                                               propType,
                                               new Type[] { propType });

                const MethodAttributes getSetAttr = MethodAttributes.Public | MethodAttributes.NewSlot | MethodAttributes.SpecialName |
                                                    MethodAttributes.Final | MethodAttributes.Virtual | MethodAttributes.HideBySig;

                // Define the "get" and "set" accessor methods
                var currGetPropMthdBldr = typeBuilder.DefineMethod("get_" + "IsDirty",
                                             getSetAttr,
                                             propType,
                                             Type.EmptyTypes);
                var currGetIL = currGetPropMthdBldr.GetILGenerator();
                currGetIL.Emit(OpCodes.Ldarg_0);
                currGetIL.Emit(OpCodes.Ldfld, field);
                currGetIL.Emit(OpCodes.Ret);
                var currSetPropMthdBldr = typeBuilder.DefineMethod("set_" + "IsDirty",
                                             getSetAttr,
                                             null,
                                             new Type[] { propType });
                var currSetIL = currSetPropMthdBldr.GetILGenerator();
                currSetIL.Emit(OpCodes.Ldarg_0);
                currSetIL.Emit(OpCodes.Ldarg_1);
                currSetIL.Emit(OpCodes.Stfld, field);
                currSetIL.Emit(OpCodes.Ret);

                property.SetGetMethod(currGetPropMthdBldr);
                property.SetSetMethod(currSetPropMthdBldr);
                var getMethod = typeof(Dapper.Contrib.Extensions.SqlMapperExtensions.IProxy).GetMethod("get_" + "IsDirty");
                var setMethod = typeof(Dapper.Contrib.Extensions.SqlMapperExtensions.IProxy).GetMethod("set_" + "IsDirty");
                typeBuilder.DefineMethodOverride(currGetPropMthdBldr, getMethod);
                typeBuilder.DefineMethodOverride(currSetPropMthdBldr, setMethod);

                return currSetPropMthdBldr;
            }

            private static void CreateProperty<T>(TypeBuilder typeBuilder, string propertyName, Type propType, MethodInfo setIsDirtyMethod, bool isIdentity)
            {
                //Define the field and the property 
                var field = typeBuilder.DefineField("_" + propertyName, propType, FieldAttributes.Private);
                var property = typeBuilder.DefineProperty(propertyName,
                                               System.Reflection.PropertyAttributes.None,
                                               propType,
                                               new Type[] { propType });

                const MethodAttributes getSetAttr = MethodAttributes.Public | MethodAttributes.Virtual |
                                                    MethodAttributes.HideBySig;

                // Define the "get" and "set" accessor methods
                var currGetPropMthdBldr = typeBuilder.DefineMethod("get_" + propertyName,
                                             getSetAttr,
                                             propType,
                                             Type.EmptyTypes);

                var currGetIL = currGetPropMthdBldr.GetILGenerator();
                currGetIL.Emit(OpCodes.Ldarg_0);
                currGetIL.Emit(OpCodes.Ldfld, field);
                currGetIL.Emit(OpCodes.Ret);

                var currSetPropMthdBldr = typeBuilder.DefineMethod("set_" + propertyName,
                                             getSetAttr,
                                             null,
                                             new Type[] { propType });

                //store value in private field and set the isdirty flag
                var currSetIL = currSetPropMthdBldr.GetILGenerator();
                currSetIL.Emit(OpCodes.Ldarg_0);
                currSetIL.Emit(OpCodes.Ldarg_1);
                currSetIL.Emit(OpCodes.Stfld, field);
                currSetIL.Emit(OpCodes.Ldarg_0);
                currSetIL.Emit(OpCodes.Ldc_I4_1);
                currSetIL.Emit(OpCodes.Call, setIsDirtyMethod);
                currSetIL.Emit(OpCodes.Ret);

                //TODO: Should copy all attributes defined by the interface?
                if (isIdentity)
                {
                    var keyAttribute = typeof(KeyAttribute);
                    var myConstructorInfo = keyAttribute.GetConstructor(new Type[] { });
                    var attributeBuilder = new CustomAttributeBuilder(myConstructorInfo, new object[] { });
                    property.SetCustomAttribute(attributeBuilder);
                }

                property.SetGetMethod(currGetPropMthdBldr);
                property.SetSetMethod(currSetPropMthdBldr);
                var getMethod = typeof(T).GetMethod("get_" + propertyName);
                var setMethod = typeof(T).GetMethod("set_" + propertyName);
                typeBuilder.DefineMethodOverride(currGetPropMthdBldr, getMethod);
                typeBuilder.DefineMethodOverride(currSetPropMthdBldr, setMethod);
            }

        }
    }

    [AttributeUsage(AttributeTargets.Class)]
    public class TableAttribute : Attribute
    {
        public TableAttribute(string tableName)
        {
            Name = tableName;
        }
        public string Name { get; private set; }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-25T17:52:57.377

我写了一个轻量级的 ORM，它是 Dapper 的扩展。它实际上可以满足您的需求。如果您不使用属性的“成员”属性，ORM 会将其从插入中排除。

您可以在[https://www.github.com/ricericebaby/ADOCRUD访问它](https://www.github.com/ricericebaby/ADOCRUD)

# ruby-on-rails - 如何重命名 Rails 应用程序、文件夹和 git 远程仓库？

> ID：10946932
> 
> 赞同：0
> 
> 时间：2012-06-08T10:12:58.687
> 
> 标签：ruby-on-rails, git, bitbucket

我`appname`在 bitbucket 上有一个名为 rails 的应用程序和一个同名的远程仓库。我想将其重命名为`another_name`.

到目前为止，我已经尝试将远程仓库的名称更改为`another_name`，尝试过`git push`但失败了。不过，我没有尝试重命名 rails 应用程序及其文件夹，因为担心某些东西可能会损坏。

这样做的正确步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:31:33.827

如果重命名远程存储库，还必须在本地 git 存储库中更新远程的 URL：

```
git remote set-url origin https://new-url-here 
```

您可以自由重命名本地文件夹而不会产生任何副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:16:35.500

感谢 Agis 的[回答](https://stackoverflow.com/a/10947185/294869)，这就是我的做法：

1.  将 bitbucket 网站中的 repo 重命名为`another_name`.
2.  运行`git remote set-url origin git@bitbucket.org:myname/another_name.git`（我使用的是 SSH 而不是 HTTPS）
3.  将我的 rails 应用程序本地文件夹重命名为`another_name`使用 Windows 资源管理器。
4.  打开文本编辑器，使用该`find all`功能查找所有包含旧名称的文件并将旧名称替换为新名称。

# macos - 如何识别正在关闭的文件在 Mac KEXT 的操作 KAUTH_FILEOP_CLOSE 中被修改或创建

> ID：10946933
> 
> 赞同：1
> 
> 时间：2012-06-08T10:13:09.323
> 
> 标签：macos, bsd, iokit, kernel-extension, kpi

观察到在文件修改或文件复制期间，FWRITE 或 KAUTH_FILEOP_CLOSE_MODIFIED 在动作 KAUTH_FILEOP_CLOSE 中的设置不一致。

我的用例是 - 我试图弄清楚正在关闭的文件是修改后的文件还是新创建的文件。我想忽略未修改的文件。

根据文档，当文件操作为 KAUTH_FILEOP_CLOSE 时，我正在检查 KAUTH_FILEOP_CLOSE_MODIFIED 标志。大多数时候，我观察到当文件从一个位置复制到另一个位置或文件被修改时，未设置 KAUTH_FILEOP_CLOSE_MODIFIED。

我还观察到设置了 FWRITE 标志，但对于修改或复制的文件并不一致。我只是想知道为什么行为如此不一致。

我在想的另一种方法是依赖 vnode 操作 KAUTH_VNODE_WRITE_DATA，但我观察到在 KAUTH_FILEOP_CLOSE 之后甚至没有修改文件时也有多次调用 KAUTH_VNODE_WRITE_DATA。

知道为什么存在这种行为吗？

提前致谢。

问候，

鲁佩什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:44:45.047

KAuth 尤其`KAUTH_FILEOP_CLOSE_MODIFIED`是错误的，我已经向 Apple 报告了一些与它相关的问题（很久以前）：

*   从父进程继承的文件描述符上发生的事件似乎根本不会触发对 KAuth 回调的调用。（见[http://www.openradar.me/8898118](http://www.openradar.me/8898118)）

*   `KAUTH_FILEOP_CLOSE_MODIFIED`当给定文件启用了透明 zlib 压缩时，未指定该标志。（见[http://www.openradar.me/23029109](http://www.openradar.me/23029109)）

也就是说，我非常有信心（从 10.5.x、10.6.x、10.7.x 开始）回调总是直接从执行系统调用的内核线程调用。例如，当`open(2)`被调用时，它会调用 vnode 上下文的 kauth 回调，然后（如果返回值允许）调用 VFS 驱动程序来实现操作。fileop ( `KAUTH_FILEOP_CLOSE`) 也可以在同一个线程中工作，但只是在关闭本身之后调用。

因此，我认为`KAUTH_VNODE_WRITE_DATA`不能参加`KAUTH_FILEOP_CLOSE`同一活动。

您的代码中存在错误，或者它是另一个事件（例如，在同一个或其他进程中关闭同一个文件后下一次打开该文件。）

仍然有一些你必须注意的陷阱：

*   内核本身（包括其他 kexts）执行的任何 I/O 都不会触发 kauth 回调。
*   如果 vnode 上下文有多个回调（例如，来自多个 Kext），内核会为每个事件一个接一个地调用它们。然而，一旦它们中的一些返回`KAUTH_RESULT_ALLOW`or `KAUTH_RESULT_DENY`，它最终决定并且不会调用其余的回调。即所有回调仅在除最后一个 return 之外的所有回调时被调用`KAUTH_RESULT_DEFER`。（AFAIK，对于 fileop，这是不正确的，因为在这种情况下，返回值被完全忽略。）

# java - 使用 GPS 寻找方向

> ID：10946936
> 
> 赞同：1
> 
> 时间：2012-06-08T10:13:10.353
> 
> 标签：java, android, gps

请考虑这种情况：

借助 GPS，应用程序可以知道手机在几条路线中的哪一条。这意味着它知道设备行进的唯一两个方向。

我是否认为确定手机正在移动的方向的最佳方法（它几乎肯定不会指向正确的方向，所以指南针不是一个选项）是轮询 GPS 直到它开始移动，并找到方向Co-Ords要搬进来？

您建议民意调查/持续多久？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:24:05.860

这本身就是一门科学，请阅读卡尔曼滤波。基本上，GPS 给出的最后两点之间的差异就是您移动的方向。然后错误进入等式，您需要开始学习过滤数据并获得更好结果的好方法。

尝试解释卡尔曼滤波：

卡尔曼滤波器使用模型来预测预测事物的新值。它做了一个假设，比如“东西通常会沿着它们的速度方向移动。所以如果它在一秒钟前在这里，它现在就会在那里”。然后它将使用这个模型来预测下一个点，当它实际上可以测量下一个点时，它将使用该数据来更新模型并评估预测的准确性。然后它将开始根据真实数据和预测的组合为您提供预测，这些预测根据其对预测准确性的测量进行加权。因此，如果模型通常非常准确，但数据突然出现跳跃，它会认为这是侥幸，不会让它对价值产生太大影响。如果数据非常跳跃，它会更信任数据而更少信任模型。

# architecture - 功能需求和架构

> ID：10946938
> 
> 赞同：0
> 
> 时间：2012-06-08T10:13:17.890
> 
> 标签：architecture

关键**功能**需求如何影响软件架构？

在选择架构模式时，您通常会根据非功能性需求进行选择。我想知道功能要求如何影响选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:22:17.797

如果您怀疑功能需求定义不明确或必然会发生变化，您可以选择更灵活的架构。如果它们的定义非常明确或基于标准，您可以选择更严格、更不灵活的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T03:27:16.050

功能需求在应用程序的软件架构决策中确实有发言权。例如，应用程序的类型是数据密集型还是计算昂贵，在决策中起着重要作用。

# serialization - actionscript的排队系统

> ID：10946939
> 
> 赞同：1
> 
> 时间：2012-06-08T10:13:31.960
> 
> 标签：serialization, actionscript, queue, eval

是否有提供排队系统的 actionscript 库？
该系统必须允许我传递对象、我想在其上调用的函数和参数，例如：

```
Queue.push(Object, function_to_invoke, array_of_arguments) 
```

或者，是否可以（反）序列化函数调用？我将如何使用给定的参数评估“function_to_invoke”？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:53:14.010

ActionScript 3.0 中没有可用的特定队列或堆栈类型数据结构，但您可能能够找到一个库（也许是[CasaLib](http://casalib.org/)）来提供这些方面的内容。

以下代码段应该对您有用，但您应该知道，由于它通过字符串引用函数名称，因此如果引用不正确，您将不会收到任何有用的编译器错误。

该示例使用允许您指定任意长度的数组作为方法的参数的参数[`rest`。](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f56.html)

```
function test(... args):void 
{
    trace(args);
}

var queue:Array = [];
queue.push({target: this, func: "test", args: [1, 2, "hello world"] });
queue.push({target: this, func: "test", args: ["apple", "pear", "hello world"] });

for (var i:int = 0; i < queue.length; i ++) 
{
    var queued:Object = queue[i];
    queued.target[queued.func].apply(null, queued.args);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:47:00.867

当然，这类似于 JavaScript

```
const name:String = 'addChild'
    , container:Sprite = new Sprite()
    , method:Function = container.hasOwnProperty(name) ? container[name] : null
    , child:Sprite = new Sprite();
if (method)
  method.apply(this, [child]); 
```

因此查询方法可能如下所示：

```
function queryFor(name:String, scope:*, args:Array = null):void
{
    const method:Function = scope && name && scope.hasOwnProperty(name) ? scope[name] : null
    if (method)
        method.apply(this, args);
} 
```

# c# - 在 Windows Azure 中如何进行数据库迁移？

> ID：10946941
> 
> 赞同：1
> 
> 时间：2012-06-08T10:13:40.200
> 
> 标签：c#, azure, relational-database

如何将数据库从 sql azure 迁移到另一个数据库服务器，例如 oracle，用于托管在 windows azure 中的单个应用程序，用于一个客户端 sql azure，另一个客户端 oracle 作为数据库服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:23:31.687

您的问题不是很清楚，但在大多数情况下，当您想要迁移到云或从云迁移时，您可以使用[SQL Azure 迁移向导。](http://sqlazuremw.codeplex.com/)

> SQL Azure 迁移向导 (SQLAzureMW) 为您提供分析、生成脚本和迁移数据（通过 BCP）的选项：
> 
> *   SQL Server 到 SQL Azure
> *   SQL Azure 到 SQL Server
> *   SQL Azure 到 SQL Azure

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:55:30.723

正如 Sandrino 提到的，问题不清楚，您始终可以使用 BACPAC 导出到 blob 存储。

如何：导出数据层应用程序 (SQL Azure)：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx)

我更喜欢这个选项而不是迁移向导，但不得不说它是一个很棒的工具！

*请注意，不支持 SQL 数据库迁移向导，它仍然是一个出色的工具，从未让我失望过 :) [http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee730904.aspx)

# c# - 显示当前页码 DocumentViewer 中的总页数？

> ID：10946944
> 
> 赞同：1
> 
> 时间：2012-06-08T10:13:48.380
> 
> 标签：c#, wpf

我正在使用 DocumentViewer 并在其中显示 .xps 文件。一切正常，但是当我尝试显示当前页面和总页面时，它不起作用。我尝试了 DocumentViewerReading_PageViewsChanged 事件，它工作不正常。

按当前页号 应该在页面滚动时更改，例如在 Adob​​e Reader 和 XPS 查看器中。

我正在使用 C#/WPF 和 Visual Studio 2010

以下是我尝试过的代码。

```
string strFile = @"data\lib.xps";
xpsDoc = new XpsDocument(strFile, FileAccess.Read);
DocumentViewerReading.Document = xpsDoc.GetFixedDocumentSequence();

///////////////////////////////////

private void txtCurrentPageNo_TextChanged(object sender, TextChangedEventArgs e)
{
    if (txtCurrentPageNo.Text != "")
    {
        DocumentViewerReading.GoToPage(Convert.ToInt32(txtCurrentPageNo.Text));
    }
}

private void DocumentViewerReading_PageViewsChanged(object sender, EventArgs e)
{
    txtCurrentPageNo.Text = DocumentViewerReading.MasterPageNumber.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T13:04:14.470

我知道这来得太晚了，但这是您的解决方案。从 DocumentViewer 派生并公开事件。

```
public class GenericDocumentViewer : DocumentViewer
{
    public event Action<object> MasterPageNumberChanged;

    protected override void OnMasterPageNumberChanged()
    {
        base.OnMasterPageNumberChanged();
        if (MasterPageNumberChanged != null)
            MasterPageNumberChanged(this);
    }
} 
```

我使用它（结合您上面的代码）成功地制作了一个在滚动时更新的当前页面显示。

# php - PHP随机提前结束脚本

> ID：10946948
> 
> 赞同：1
> 
> 时间：2012-06-08T10:14:04.150
> 
> 标签：php, exit

长期读者，第一次海报

我有一个脚本，它从 CSV 文件导入行，处理，然后插入 MYSQL 数据库，CSV 文件本身有大约 18,800 行。

该脚本作为 WordPress 插件安装的一部分运行，看起来非常喜怒无常。有时它会完成整个脚本并正常加载页面，其他时候，假设有 2/3 的时间，它只会导入大约 17.5k 的行，然后静默终止脚本并重新加载页面而无需任何 GET 或发布变量，

我已经尝试了我能想到的一切，看看它为什么这样做，但没有运气。

服务器软件是安装在 Linux 上的 Apache，
服务器错误日志没有任何条目，
最大执行时间设置为 0，
PHP 最大输入时间为 1800，
PHP 注册长数组设置为打开，
脚本作为 PHP 运行5.3.5CGI
数据库托管在同一台服务器
上 最大内存限制为 256M
最大帖子大小为 7M

有什么我遗漏的东西可能会导致错误吗？

任何帮助将不胜感激，因为我完全被难住了！

提前致谢！

编辑：如果我使用 15k 行而不是 18k 行的 CSV 文件，它会正确完成，这可能是时间问题吗？

# .net - 如何使数据网格单元格接受带逗号和 n 个小数的数字

> ID：10946952
> 
> 赞同：0
> 
> 时间：2012-06-08T10:14:21.653
> 
> 标签：.net, winforms

我在带有 4 个双类型单元格的 winforms 中有数据网格。在设计时，我将 Cellformat 设置为“N2”。但它不允许输入像 456.23 或 45612,12.23 这样的值。如果我输入上述值，tts 会将值恢复为以前的值。

如何在设计时设置单元格格式以接受 45,612.52 45,612.5 等值

编辑：我可以用代码来做吗？所有我想要的单元格应该是两位小数的值，如果单元格值为 55，它应该显示为 55.00。并且用户可以输入 55.12 之类的值。

任何人都可以尽快帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:17:19.847

您可能需要一个自定义验证器。请参阅[http://msdn.microsoft.com/en-us/library/0ye0dkkw](http://msdn.microsoft.com/en-us/library/0ye0dkkw)

对于验证，您需要使用[Double.TryParse](http://msdn.microsoft.com/en-us/library/3s27fasw)。该主题有一个使用该`AllowThousands`样式的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:59:15.027

我在设计时设置了格式“#,0.00”。现在它的工作。

# windows - printPreviewDialog 显示太多窗口

> ID：10946953
> 
> 赞同：0
> 
> 时间：2012-06-08T10:14:23.800
> 
> 标签：windows, forms, printing, c++-cli

我想使用 printPreviewDialog 控件。我添加了 4 个控件：richTextBox、按钮、printPreviewDialog 和 printDocument。对于 printDocument1 我添加：

```
 private: System::Void printDocument1_PrintPage(System::Object^  sender, System::Drawing::Printing::PrintPageEventArgs^  e) {
               printDocument1->Print();
               e->Graphics->DrawString(richTextBox1->Text,richTextBox1->Font, Brushes::Black,(float)80,(float)80 );
    } 
```

对于按钮：

```
 private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
    printPreviewDialog1->Document = printDocument1;
    printPreviewDialog1 -> ShowDialog();
     } 
```

代码没问题，我可以构建和运行应用程序。但是当我点击按钮时，我收到了这样的信息：

[http://www.screenr.com/fJr8](http://www.screenr.com/fJr8)

谁能帮我？多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:30:38.330

不要在 PrintPage 事件处理程序中调用 PrintDocument::Print()。当 Print() 方法调用再次调用 PrintPage 事件处理程序时，所有的地狱都会崩溃。让您的程序因该网站的名称而崩溃需要一段时间，您可能首先会用完句柄配额。

只需删除该语句，它不会做任何有用的事情。

# javascript - 将项目从 Store 动态加载到控制器

> ID：10946954
> 
> 赞同：0
> 
> 时间：2012-06-08T10:14:26.310
> 
> 标签：javascript, google-maps, extjs, sencha-touch-2

如何将我的商店动态加载到我的控制器中，以便能够在列表中的任何项目被录制后加载纬度并登录地图。

```
listeners: {
            maprender: function(component, map, geo, eOpts) {
                var position = new google.maps.LatLng(5.978132,116.072617);
                var marker = new google.maps.Marker({
                    position: position,
                    map: map
                        });

                var infowindow = new google.maps.InfoWindow({
                    content: 'Working Fine'
                        });

            google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                        });

            setTimeout(function() {
                    map.panTo(position);
                }, 1000);

                },
           }, 
```

上面的代码有效，但它只为列表中的所有项目定位一个特定位置，原因是 lat 和 log 是静态的。我想让它加载纬度并从我的商店动态记录。

我的店铺：

```
Ext.define('List.store.Presidents', {
extend : 'Ext.data.Store',

config : {
model : 'List.model.President',
sorters : 'lastName',
storeId: 'contactmap',
grouper : function(record) {
    return record.get('lastName')[0];
},

data : [{
    firstName : "Ikhlas HQ",
    lastName : "Tower 11A, Avenue 5, Bangsar South, No.8 Jalan Kerinchi 59200 Kuala Lumpur",
    lat : 3.110649,
    lng : 101.664991,
    id: '200',
},
{
    firstName : "PEJABAT WILAYAH SELANGOR",
    lastName : "No. 97, 97-1 & 97-2, Jalan Mahogani 5/KS7, Ambang Botanic, 41200 Klang, Selangor",
    lat : 3.003384,
    log : 101.45256,
    id: '001',
},]}
}); 
```

我的控制器：

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',
config: {
refs: {
    main: 'mainpanel',
  },
control: {
    myList: {
        itemtap: 'onMyListItemTap'
    },
    'presidentlist': {
            disclose: 'showDetail'
        },
 }
},
showDetail: function(list, record) {
            this.getMain().push({
                xtype: 'presidentdetail',
                title: record.fullName(),

onMyListItemTap: function(list, index, target, record, e, eOpts) { 
```

// 一些功能需要在这里加载我的商店 } }); }, });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:03:14.937

有两种方法可以做到...

```
list.getStore(); 
```

应该返回与列表关联的商店。

但是，onMyListItemTap 函数将“记录”作为其参数的一部分返回，因此您可以这样做：

```
var lat = record.get('lat'),
    long = record.get('long'); 
```

# c# - C# 中 IValueConverter 和异步 DomainService Invoke 的问题

> ID：10946956
> 
> 赞同：0
> 
> 时间：2012-06-08T10:14:37.917
> 
> 标签：c#, asynchronous, ivalueconverter, domainservices

在我搜索这个问题的常见解决方案是添加一个事件处理程序以在调用操作完成后进行处理。

不幸的是，我的 IValueConverter 需要返回一个值，因此拥有处理程序并没有多大帮助。我还尝试了一个 do/while 循环，直到操作完成但循环永远不会关闭。

我也尝试了一个简单的等待操作，但它仍然返回 null。我知道我的 DomainService 返回正确的值，但 Converter 永远看不到它。

在这种情况下我能做些什么吗？拥有一个可以工作的转换器将消除/减少我可以预见的几乎所有未来的问题。

我的代码：（我需要这样的东西）

```
 InspectDomainContext context = new InspectDomainContext();
    string name;
    InvokeOperation<string> inv;

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string id = (string)value;
        inv = context.GetName(id);
        inv.Completed += new EventHandler(inv_Completed);
        // return here after the handler has completed
        return name;
    }

    void inv_Completed(object sender, EventArgs e)
    {
        name = inv.Value;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:24:51.680

（新答案，因为它与第一个完全不同！）

这假设您正在使用某种 ViewModel 数据上下文模式......

`IValueConverter`您可以在 ViewModel 上创建第二个属性来保存转换后的值，而不是在 中执行此操作。

```
public class MyViewModel
{
    private string _id;
    public string Id
    {
        get { return _id; }
        set 
        { 
            _id = value; 
            UpdateConvertedName(_id);
        }
    }

    private void UpdateConvertedName(string id)
    {
        // Same as your 'Convert' code above
    }

    private void inv_Completed(object sender, EventArgs e)
    {
        Name = inv.Value;        
    } 

    public string Name { get; set; }
} 
```

因此，您无需使用转换器绑定到 ID，而是直接绑定到 Name。每当更改 ID 时，名称都会异步更新。您可能还需要`INotifyPropertyChanged`Name getter/setter 中的一些内容，如果您使用的是 ViewModels，您将已经熟悉所有这些。

由于您遇到了异步调用，因此还值得添加一些值旧或不完整的 UI 指示符 - 我不知道您的设置是什么，但理论上客户端计算机可能在 28.8k 连接上世界的另一端或非常慢的移动设备，因此您的响应时间会很差。但这与手头的答案并不相关！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:35:20.273

您可以改为同步调用它吗？

```
return context.GetName(id.ToString()); 
```

否则，您可能必须等待 .NET 4.5 和 async/await 关键字，据我了解（我自己还没有玩过它），这将让您在方法中的某处放置一个“等待”点，直到异步部分已经完成。

但是，正如您所要求的那样，无法使异步调用表现得像同步调用一样。为什么需要异步？

# codeigniter - 如何确定 CodeIgniter 是否存在第一段？

> ID：10946961
> 
> 赞同：0
> 
> 时间：2012-06-08T10:14:54.227
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我想我会因为拔头发而变成秃头...

根据 CodeIgniter 教程以及我之前的经验，我可以很容易地确定是否存在第 2、第 3 或第 4 段，或者它们的值是什么。

```
if($this->uri->segment(3)) {
     //do something
} 
```

或者

```
if($this->uri->segment(3)=="foo") {
     //do something
} 
```

除第一段外，其他所有段都正常！

我不能对第一段使用任何条件语句！

if($this->uri->segment(1)) 不起作用。因为它总是返回 true。但我想检查第一段是否存在。当我浏览到我的网站时，由于删除了 index.php，它看起来像 www.domain.com 。所有其他控制器都像 domain.com/firstcontroller、domain.com/secondcontroller

但是我需要为 WEB ROOT 创建一个条件。

我尝试了 __construct() 函数，但它也没有工作。

我想做的是：如果当前页面不是 webroot（即使没有第一段）或者它不是我的主控制器，我将显示一些 HTML。

你能帮忙吗？

编辑： Errr ...我很抱歉。我已经弄清楚了问题所在。这是关于使用正确的运算符。我应该使用 XOR 而不是 OR。所以确定 $this->uri->segment(1) 没有问题...它和其他segment一样...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:24:32.593

您在运行函数之前尝试过类型转换吗？

例如

```
$seg = (int) 1; $this->uri->segment($seg); 
```

或者您可以尝试从

```
$seg_array = $this->uri->segment_array(); 
```

然后只需检查返回的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:53:03.517

不知道为什么需要这个以及从哪里调用它？第一段总是执行的控制器的名称，第二段是执行的控制器的函数的名称。如果您没有更改默认路由。

`$this->uri->uri_string()`将返回控制器/方法。您可能还想[在此处](http://codeigniter.com/user_guide/libraries/uri.html)`$this->uri->ruri_string()`查看并查找更多信息。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:47:33.787

```
if ($this->router->class != $this->router->default_controller) {
    // Run stuff here
} 
```

自己试试这个：`print_r($this->router)`

您可以通过以下方式更加确定：

```
if ($this->router->class != $this->router->default_controller or $this->router->directory or $this->router->method != 'index') {
    // Run stuff here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T14:27:18.593

我应该在条件函数中使用 XOR 而不是 OR。所以确定没有问题`$this->uri->segment(1)`……和其他段一样……

# blackberry - How to Block Blackberry Application programmatically?

> ID：10946964
> 
> 赞同：0
> 
> 时间：2012-06-08T10:15:07.903
> 
> 标签：blackberry

How to Block BlackBerry native application or Third party application.

e.g. - Enable and Disable camera. - Enable and Disable Wifi connection. - Block Facebook,twitter app.

Same as Mr.safe application on BlackBerry app world.

[http://appworld.blackberry.com/webstore/content/63110/?lang=en][1]

How it Possible to programatically ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:58:56.047

他们只是在此时监听应用程序前台并调用他们的应用程序前台。

这是[回答](https://stackoverflow.com/questions/1968142/blackberry-background-application-to-listen-starts-and-foreground-app)如何监听应用程序前台事件的答案。

# math - Circle-Rectangle 的边界碰撞检测

> ID：10946965
> 
> 赞同：1
> 
> 时间：2012-06-08T10:15:12.357
> 
> 标签：math, geometry, collision-detection

如何判断一个**圆是与外部矩形相切还是位于（部分）**在二维欧几里得空间中的矩形之外？

矩形将始终与轴对齐。 ![圆矩形边界碰撞的可视化表示](../Images/3265b3c9233357dd24490e22fc418501.png)

基本上，我正在用一个球创建一个简单的游戏，该球以一定的角度在空间中以一定的步骤移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:25:20.300

让我们表示矩形的四个边，`s1, s2, s3, s4`从顶部开始并顺时针移动。

检查圆心到四条线的距离；`d1, d2, d3, d4`（编号对应于侧面）。请注意，有一个简单的公式可以得出从点到线的（正交）距离。

一个必要的（尽管不是充分的）条件是与其中一条线的距离是半径长度（实际上差异小于您选择的某个增量）：
`|d1 - r| < delta || ...`

如果圆完全在矩形内，则可以将此作为充分条件，如果每个距离小于矩形对应边之间的距离，则为真，小于半径：
`d1 <= |s1 - s3|-r && d2 <= |s2 - s4|-r && ...`

检查部分外部就像检查最后一段的相反部分一样简单（如果需要，检查半径是否仍在框内）：
`d1 > |s1 - s3|-r || d2 > |s2 - s4|-r || ...`

# javascript - 滚动值未进入内容页面

> ID：10946966
> 
> 赞同：0
> 
> 时间：2012-06-08T10:15:12.747
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试以这种方式获取滚动高度，滚动内容页面 div 的顶部

但结果未定义

```
var scrolltop = $('#DivUserWebDetail').attr('scrollTop');
//scroll height 
var scrollheight = $('#DivUserWebDetail').attr('scrollHeight');
//client height 
var windowheight = $('#DivUserWebDetail').attr('clientHeight'); 
```

“DivUserWebDetail”是我的内容页面 div，高度为 400px，溢出隐藏

请给出任何解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:19:10.460

它`.prop('scrollHeight');` 不是 `.attr('scrollHeight');`

# ios - How is Instapaper on iOS embedding YouTube Videos?

> ID：10946972
> 
> 赞同：1
> 
> 时间：2012-06-08T10:15:56.780
> 
> 标签：ios, embed, youtube-api, instapaper

I trying to find a good way to embed YouTube Videos in my app. I really like the way Instapaper is embedding them but I can't figure out what YouTube Player is being used.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T20:11:20.920

您应该尝试使用以下代码在 youtube 应用程序中播放 youtube 视频

```
 NSString *stringURL = @"http://www.youtube.com/watch?v=qzUXXXXXXXM&feature=youtube_gdata_player";
    NSURL *url = [NSURL URLWithString:stringURL];
    [[UIApplication sharedApplication] openURL:url]; 
```

但是，如果您觉得必须在应用程序中播放视频，请查看以下链接

[http://www.iphonedevsdk.com/forum/tutorial-discussion/70282-tutorial-embedding-youtube-vids.html](http://www.iphonedevsdk.com/forum/tutorial-discussion/70282-tutorial-embedding-youtube-vids.html)

[将 YouTube 视频嵌入到](https://stackoverflow.com/questions/5117617/embedding-youtube-videos-on-ios)

希望这会有所帮助......快乐的编码......

# iphone - How to READ/PARSE the PDF contents loaded in an UIWEBVIEW

> ID：10946978
> 
> 赞同：5
> 
> 时间：2012-06-08T10:16:32.523
> 
> 标签：iphone, objective-c, ios

Assume the situation, i have an `UIWebView` and signed in into my gmail account, i have received an e-mail with an attached pdf file. Now am clicking on the attachment link the webview will open the pdf file there itself.

At this time if am trying to read the html contents it returns `NULL`.

Please help me by giving an idea. Now how could i read/parse that pdf content already loaded in webview and store the data into `NSString`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:27:25.187

如果您有 PDF 文件的 URL，则直接在 WebView 中加载 URL，否则您必须使用 NSURLRequest 下载文件，然后从应用程序的本地目录加载文件。我很乐意为您提供从本地目录加载 PDF 文件的代码，但我建议您使用 Google 搜索。

# android - porting libjingle to Android issue

> ID：10946983
> 
> 赞同：1
> 
> 时间：2012-06-08T10:16:44.787
> 
> 标签：android, stl, android-ndk, libjingle

I found a very strange issue.when I try to invoke connect() in signal1.(sigslot.h).

```
m_connected_slots.push_back(conn); 
```

it doesn't work.

For example.

```
std::list<_connection_base1<arg1_type, mt_policy> *>  connections_list_test; 
connections_list_test.push_back(conn); 
```

If I create a temp list named connections_list_test.It can work and push_back is correctly.

But the m_connected_slots can't push_back.

Obviously I must be hitting some nonstandard behavior in the STL library i'm using.

Can you guys give some suggest about this issue? or some other android porting experience?

Here is some logs for this:

```
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000008c
Stack frame #00  pc 00096f7a  /data/data/com.molo.app/lib/libjingle_jni.so: Routine           insert in /Users/gongchen/Dev/android-ndk-r8/sources/cxx-stl/stlport/stlport/stl/_list.h:427
Stack frame #01  pc 00098ae8  /data/data/com.molo.app/lib/libjingle_jni.so: Routine MoloClient in   /Users/gongchen/Dev/Eclipse_workspace/P2Pdemo/jni/talk/mymolo/moloclient.cc:136
Stack frame #02  pc 00094f54  /data/data/com.molo.app/lib/libjingle_jni.so: Routine    Java_com_molo_app_NativeMethod_doLogin in  /Users/gongchen/Dev/Eclipse_workspace/P2Pdemo/jni/com_molo_app_NativeMethod.cc:215
Stack frame #03  pc 00017d74  /system/lib/libdvm.so
Stack frame #04  pc 00048f54  /system/lib/libdvm.so
Stack frame #05  pc 00041b16  /system/lib/libdvm.so
Stack frame #06  pc 0004e624  /system/lib/libdvm.so
Stack frame #07  pc 0001cfd4  /system/lib/libdvm.so
Stack frame #08  pc 000220dc  /system/lib/libdvm.so
Stack frame #09  pc 00020fd0  /system/lib/libdvm.so
Stack frame #10  pc 0005f430  /system/lib/libdvm.so
Stack frame #11  pc 0005f656  /system/lib/libdvm.so
Stack frame #12  pc 00053b4e  /system/lib/libdvm.so
Stack frame #13  pc 00011a7c  /system/lib/libc.so
Stack frame #14  pc 00011640  /system/lib/libc.so 
```

# oracle - ORA-01722: 创建实体化视图时编号无效

> ID：10946985
> 
> 赞同：4
> 
> 时间：2012-06-08T10:16:58.717
> 
> 标签：oracle, oracle10g, materialized-views

我正在创建一个视图，并将同一视图转换为同一系统中的物化视图。但是在另一个系统中做同样的事情我`ORA-01722: invalid number`在创建物化视图时出错了。为什么？

```
create materialized view MV_EMP_VALI 
 refresh complete with rowid start with SYSDATE+1/24 AS 
 (select * from V_CHA1); 
```

看法：-

```
CREATE OR REPLACE VIEW V_CHA1 AS(SELECT EMPNO,
       MONTHYEAR,
       to_number(SUM(CPFEMO)) AS EMOLUMENTS,
       to_number(SUM(CPEPF)) AS EMPPFSTATUARY,
       to_number(SUM(AEMO)) AS AEMO,
       to_number(SUM(APEPF)) AS APEPF,
       MAX(recsts) AS recsts
  FROM ((SELECT RECDATE,
                   (CASE WHEN (REPFEMOFLAG='N') THEN
                round(NVL(trim(EMO), 0))
                ELSE
                round(NVL(REVISEMO, 0)) END ) as CPFEMO,
                round(NVL(trim(EPF), 0)) AS CPEPF,
                0 as AEMO,
                0 as APEPF,
                '' as recsts,
                EMPNO
           FROM EMP_VALI
          WHERE EFLAG = 'Y' AND SFLAG = 'N' AND EMPNO IS NOT NULL and
                RECDATE >'01-Apr-2011')
        union all
        (SELECT NDT.RECDATE AS RECDATE,
                sum(round(NVL(trim(NDT.EMO), 0))) as CPFEMO,
                sum(round(NVL(trim(NDT.EPF), 0))) as CPEPF,
                0 as AEMO,
                0 AS APEPF,
                NDT.EMPNO
           FROM EMP_VALI VAL, EMP_SUPP NDT
          WHERE VAL.EMPNO = NDT.EMPNO AND VAL.EFLAG = NDT.EFLAG AND
                VAL.EFLAG = 'Y' AND VAL.SFLAG = 'Y' AND
                NDT.SLIFLAG='N' and
                 VAL.EMPNO is not null and
                NDT.RECDATE = VAL.RECDATE
           GROUP BY NDT.RECDATE, NDT.EMPNO) UNION ALL
        (SELECT DT.RECPAIDDATE AS RECDATE,
                0           as CPFEMO,
                0           as CPEPF,
                sum(round(NVL(trim(DT.EMO), 0))) as AEMO,
                sum(round(NVL(trim(DT.EPF), 0))) AS APEPF,
        max('') as recsts,
                DT.EMPNO
           FROM EMP_VALI VAL, EMP_SUPP DT
          WHERE VAL.EMPNO = DT.EMPNO AND VAL.EFLAG = DT.EFLAG AND
                VAL.EFLAG = 'Y' AND VAL.SFLAG = 'Y'  AND
                VAL.EMPNO IS NOT NULL and dt.RECDATE=val.RECDATE AND DT.SFLAG IS NOT NULL AND DT.SFLAG not in ('N','F')
           GROUP BY DT.RECPAIDDATE, DT.EMPNO)UNION ALL
        (SELECT DT.RECPAIDDATE AS RECDATE,
      SUM((CASE
             WHEN (DT.ECR4FLAG = 'C') then
              round(NVL(trim(DT.EMO), 0))
             else
             0
           end)) as CPFEMO,
       sum((CASE
             WHEN DT.ECR4FLAG = 'C' then
              round(NVL(trim(DT.EPF), 0))
             else
              0
           end)) as CPEPF,
          sum((CASE
             WHEN DT.ECR4FLAG = 'A' then
              round(NVL(trim(DT.EMO), 0))
             else
              0
           end)) as AEMO,
       sum((CASE
             WHEN DT.ECR4FLAG = 'A' then
              round(NVL(trim(DT.EPF), 0))
             else
              0
           end)) as APEPF,
       max(EMPRECOVERYSTS) as recsts,
       DT.EMPNO
  FROM EMP_VALI VAL, EMP_SUPP DT
WHERE VAL.EMPNO = DT.EMPNO AND VAL.EFLAG = DT.EFLAG AND
       VAL.EFLAG = 'Y' AND VAL.SFLAG = 'Y' AND
       VAL.EMPRECSTS = 'DEP' AND VAL.EMPNO IS NOT NULL and
       dt.RECDATE = val.RECDATE AND DT.SFLAG IS NOT NULL AND
       DT.SFLAG in ('F')
GROUP BY DT.RECPAIDDATE, DT.EMPNO))
GROUP BY RECDATE, EMPNO)
/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T10:31:29.647

从语句中很难看出，但如果我不得不猜测，我会把钱放在表达式上：

```
RECDATE >'01-Apr-2011' 
```

假设该列`RECDATE`实际上是 type `DATE`。因此，Oracle 也尝试将字符值转换`'01-Apr-2011'` 为 DATE。由于您没有为此指定格式掩码，因此使用默认的 NLS 设置。如果他们为月份定义了一个数字，那么上述值将无法转换。

您**永远不**应该依赖隐式数据类型转换。*特别是*没有日期。请改用 ANSI 文字：

```
RECDATE > DATE '2011-04-01' 
```

或使用带有格式掩码的 to_date() 函数：

```
RECDATE > to_date('01-Apr-2011', 'dd-mon-yyyy') 
```

请注意，对于 NLS_LANG 的某些设置，这仍然可能会失败。在法语中，您需要指定“Avr”而不是“Apr”。因此，除非您绝对确定您可以始终控制所有 NLS_XXX 设置，否则我强烈建议您改用月份数字。如果您使用 to_date() 比使用 ANSI 文字更舒服，您可以使用：

```
RECDATE > to_date('01-04-2011', 'dd-mm-yyyy') 
```

**编辑**

如果它不是日期列，您需要检查任何其他列以进行隐式数据转换。

这些表达式：

```
sum(round(NVL(trim(DT.EMO), 0)))
round(NVL(trim(EMOLUMENTS), 0))
round(NVL(trim(DT.EMO), 0))
round(NVL(trim(DT.EPF), 0)) 
```

看起来很可疑。如果其中的列是实数，则`trim()`无效且无用。如果这些不是数字，则可能会导致该错误，具体取决于列的内容。

这个表达式`to_number(SUM(CPFEMO))`也没有用，因为 sum() 已经返回一个数字，没有理由在 number() 上调用 to_number。虽然我怀疑它会引发你的错误，但你仍然应该避免它，因为它没有任何意义。

# c# - Unable to view MICR font in print preview

> ID：10946986
> 
> 赞同：1
> 
> 时间：2012-06-08T10:17:01.667
> 
> 标签：c#, asp.net, micr

I have written a code to print a cheque using MICR font, every thing works fine but when coming to print preview I am getting normal text but while printing the document I am getting the required in MICR font. How can I show MICR font in print preview

This is my code

```
PrivateFontCollection PFC = new PrivateFontCollection();
    PFC.AddFontFile(Server.MapPath("ADVMICR.TTF"));
    FontFamily fm = new FontFamily(PFC.Families[0].Name, PFC);
    Font PrintFont = new Font(fm, 12);

    PrintDocument pd = new PrintDocument();
    pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
    // Specify the printer to use.
    pd.PrinterSettings.PrinterName = "SnagIt 9";
    PrintPreviewDialog ppdlg = new PrintPreviewDialog();
    ppdlg.Document = pd;
    ppdlg.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:40:04.060

尝试这个

`ppdlg.PrintPreviewControl.Font = new Font("ADVMICR.TTF", 12);`

# php - OpenCart not resizing the image properly

> ID：10946987
> 
> 赞同：0
> 
> 时间：2012-06-08T10:17:13.470
> 
> 标签：php

I'm using the resize function in OpenCart , but it's resizing the image whit white spaces in it's top and bottom. I'm not sure, but it looks like, that the resize function is watching only the width, and then mesuring the height.

```
if (!empty($product_info) && $product_info['image'] && file_exists(DIR_IMAGE . $product_info['image'])) {
        $this->data['thumb'] = $this->model_tool_image->resize($product_info['image'], 100, 100);
    } else {
        $this->data['thumb'] = $this->model_tool_image->resize('no_image.jpg', 100, 100);
    } 
```

This is the code i'm using, nothing much . The width of the image is how I'm setting it, in my case 100px. The width is being setted 100px - to, but it's showing like 20px on top and 20px on bottom , white space.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:39:24.090

原始图像尺寸比（宽高比）是多少？如果它是 1（假设原始图像是 500px 宽和高），那么应该没有空白。如果比率大于 1，则宽度大于高度（假设为 700px*500px），并且在调整图像大小后，图像顶部和底部的空白区域会被填充。当然，如果比率小于 1，则宽度小于高度（比如说 500 像素*700 像素），您会在图像的左侧和右侧看到空白区域。我在这里没有 OpenCart 资源，但是在调整大小时搜索裁剪参数（或裁剪能力） - 如果它存在然后使用它 - 它将保留生成的图像没有空白，并将较小的尺寸调整为您的设置，而更大的被裁剪了...

# opencv - 静止针图像捕捉响应时间

> ID：10946988
> 
> 赞同：1
> 
> 时间：2012-06-08T10:17:16.423
> 
> 标签：opencv, camera, video-streaming, directshow

我遇到了从静止引脚捕获图像的响应时间问题。

我有系统从捕获引脚以 320*480 运行视频流，并按下按钮同时直接从静止引脚捕捉 720P 图像。但是响应时间太长，大约 6 秒，这是不可取的。

我试过其他视频帽软件支持在视频流时抓图，响应时间类似。

我想知道这是硬件问题还是软件问题。以及静态引脚捕获实际上是如何工作的。这是来自插值还是通过硬件更改分辨率。

例如，相机以一个分辨率集启动，不断感应并通过 USB 将数据推送到缓冲区。是否可以立即更改为另一个分辨率集并拍摄图像？这就是系统拍照慢的原因吗？

或者，有没有办法让视频流保持高帧率并立即拍摄高分辨率图像？没有插值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T02:00:56.100

我正在做一个项目，它具有从视频流中捕捉图像的功能。我使用的技术是 DirectShow。而且响应时间没有你的那么长。根据我的经验，响应时间与流帧无关。

通常，相机有自己的默认分辨率。它不可能立即更改为另一个分辨率设置并拍摄图像。所以这不是原因。

你能告诉我一些代码吗？还有你的相机类型？

# json - Parse private gcal JSON object with FullCalendar

> ID：10946993
> 
> 赞同：1
> 
> 时间：2012-06-08T10:17:26.573
> 
> 标签：json, fullcalendar, gcal

I wonder how I can provide FullCalendar a private gcal JSON feed. I know it is possible to provide a public gcal url, so I would like to either hack the gcal.js to manipulate the JSON object instead of the url, or manually transform my JSON object to comply with FullCalendar's JSON format.

So shall I follow one of this ways (and how) or is there any other alternative?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:25:49.990

我认为在这一点上文档有点*模糊*。

您不需要发布您的日历，但您必须使用您日历的**私人订阅**源！

您可以在日历详细信息的底部找到供稿地址，称为**“私人地址”**，然后是**“XML”**按钮。

![在此处输入图像描述](../Images/21c24d6a68bfc8be1c41f1540151f9c4.png)

# c# - 将 UTF8 数据存储在 UTF16 列中

> ID：10946994
> 
> 赞同：3
> 
> 时间：2012-06-08T10:17:28.900
> 
> 标签：c#, sql-server, xml

我将 XML 存储在 SQL Server 的 XML 列中。SQL Server 在内部以 UTF-16 存储数据。因此，存储的 XML 必须采用 UTF-16 格式。

我拥有的 XML 是 utf-8，它的顶部有这个声明：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

当我尝试使用 UTF-8 声明插入 xml 时，我收到一个异常，说明有关编码的内容。我可以通过两种方式轻松解决此问题：

*   通过删除声明或

*   通过将声明更改为

：

```
<?xml version="1.0" encoding="UTF-16" ?> 
```

**问题**

我不知道仅删除或替换声明是否“安全”或正确。我会丢失数据，还是 XML 会损坏？还是我必须将 C# 中的字符串从 utf-8 转换为 utf-16？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:31:20.233

C# 将字符串存储在 UCS-2 中，这是 UTF-16 标准的旧版本。因此，当您在 C# 中读取 UTF-8 字符串时，C# 会将其转换为 UCS-2。它是您传输到 SQL Server 的 UCS-2 变体。

您可以将 xml 声明更改为`encoding="UTF-16"`或完全省略它。UCS-2 和 UTF-16 有一些区别；我很想知道这会如何影响 C# 和 SQL Server！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:26:31.600

SQL Server 在内部使用 UCS-2 来存储 XML 数据，但这与将数据传递给 SQL Server 的形式无关。

例如，如果您使用`varchar`文字插入它，请将其`nvarchar`改为文字并将编码声明为 UTF-16。样本：

```
DECLARE @VAR XML
INSERT INTO MyTable (MyXmlColumn) 
    VALUES (N'<?xml version="1.0" encoding="UTF-16" ?><doc></doc>') 
```

# java - Issue with "GL11.glMatrixMode()"

> ID：10946995
> 
> 赞同：1
> 
> 时间：2012-06-08T10:17:29.607
> 
> 标签：java, eclipse, opengl, matrix

I recevie 0 errors but I get this in the console:

```
>Exception in thread "main" java.lang.NullPointerException
  >>at org.lwjgl.opengl.GL11.glMatrixMode(GL11.java:2052)
  >>>at game.engine.GameLoop.start(GameLoop.java:22)
  >>>>at game.engine.GameLoop.main(GameLoop.java:15) 
```

I tried to put the actual value into "glMatrixMode()" instead of "GL11.GL_PROJECTION" but it returns same Exception.

```
 import org.lwjgl.LWJGLException;
    import org.lwjgl.opengl.DisplayMode;
    import org.lwjgl.opengl.GL11;
    import org.lwjgl.util.Display;

    public class GameLoop 
    {
        //Main
            public static void main(String[] argv)
            {
                GameLoop.start();
            }

            //Metodo che gestisce il loop
            public static void start() 
            {
                //Inizializzazione OpenGL
                GL11.glMatrixMode(GL11.GL_PROJECTION);
                GL11.glLoadIdentity();
                GL11.glOrtho(0, 800, 600, 0, 1, -1);
                GL11.glMatrixMode(GL11.GL_MODELVIEW);

                try 
                {
                    Display.setDisplayMode(new DisplayMode(800, 600));
                    Display.create();
                } catch (LWJGLException e) 
                {
                    e.printStackTrace();
                    System.exit(0);
                }

                while(!Display.isCloseRequested())
                {
                    Entità.pulisci();
                    Entità.colora();
                    Entità.disegna();
                    Display.update();
                }
            }

    }

    import org.lwjgl.opengl.GL11;

    public class Entità 
    {
        //Disegna un poligono
            public static void disegna()
            {
                GL11.glBegin(GL11.GL_QUADS);
                GL11.glVertex2f(100,100);
                GL11.glVertex2f(200,100);
                GL11.glVertex2f(200,200);
                GL11.glVertex2f(100,200);
                GL11.glEnd();
            }

            //Pulisce il buffer
            public static void pulisci()
            {
                GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT); 
            }

            //Setta il colore al poligono
            public static void colora()
            {
                GL11.glColor3f(0.5f,0.5f,1.0f);
            }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:03:31.690

我对 Java 或 LWJGL 没有任何经验，但从您的代码看来

```
Display.setDisplayMode(new DisplayMode(800, 600));
Display.create(); 
```

创建实际的显示画布（或者您可以调用它），它还设置了 OpenGL 上下文。因此，在这些函数之前调用任何 OpenGL 函数（如`GL11.glMatrixMode`）可能会导致一些错误，例如在您的情况下是空指针异常。

所以试着把这四个功能放在显示创建之后。您正在对 OpenGL 上下文进行更改，因此您首先需要一个有效的上下文。

# java - 如何让简单的计算器在 Android 上的 EditText 中返回最终结果

> ID：10946998
> 
> 赞同：0
> 
> 时间：2012-06-08T10:17:59.087
> 
> 标签：java, android, calculator

我现在在 java 和 eclipse 中，我只是试图构建一个简单的计算器，但我不能让它返回结果。

我的计划基本上是当用户单击其中一个操作符时，EditText 不为空，那么 First 变量将与 EditText 相等，并且 Operator 变量发生变化，当用户点击 Result 按钮时，First 变量不为空，则 EditText 将与 Second 变量相等，Result 变量将与结果基本相等。我想我把类型和变量搞砸了，但我不知道到底是什么。

有人可以帮忙吗？

这是java代码；

```
public class Main extends Activity implements OnClickListener {
LinearLayout linear;

float First, Second, Operator, Result;

Button b1, b2, b3, b4, b5, b6, b7, b8, b9, b0, bResult, bTizedes, bSzorzas,  bKivonas, bOsztas, bOsszeadas;
EditText eT;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    First = 0;
    Second = 0;
    Operator = 0;
    Result = 0;

    b0 = (Button) findViewById(R.id.b0);
    b1 = (Button) findViewById(R.id.b1);
    b2 = (Button) findViewById(R.id.b2);
    b3 = (Button) findViewById(R.id.b3);
    b4 = (Button) findViewById(R.id.b4);
    b5 = (Button) findViewById(R.id.b5);
    b6 = (Button) findViewById(R.id.b6);
    b7 = (Button) findViewById(R.id.b7);
    b8 = (Button) findViewById(R.id.b8);
    b9 = (Button) findViewById(R.id.b9);
    bTizedes = (Button) findViewById(R.id.bTizedes);
    bSzorzas = (Button) findViewById(R.id.bSzorzas);
    bResult = (Button) findViewById(R.id.bEgyenlo);
    bKivonas = (Button) findViewById(R.id.bKivonas);
    bOsztas = (Button) findViewById(R.id.bOsztas);
    bOsszeadas = (Button) findViewById(R.id.bOsszeadas);
    eT = (EditText) findViewById(R.id.eT);

    b0.setOnClickListener(this);b1.setOnClickListener(this);b2.setOnClickListener(this);b3.setOnClickListener(this);
    b4.setOnClickListener(this);b5.setOnClickListener(this);b6.setOnClickListener(this);b7.setOnClickListener(this);
    b8.setOnClickListener(this);b9.setOnClickListener(this);bTizedes.setOnClickListener(this);bSzorzas.setOnClickListener(this);
    bResult.setOnClickListener(this);bKivonas.setOnClickListener(this);bOsztas.setOnClickListener(this);bOsszeadas.setOnClickListener(this);

    bSzorzas.setOnClickListener(new OnClickListener() {
    public void onClick(View view) {
            if(First == 0)
        {
            EditText eT = (EditText) findViewById(R.id.eT);
            float First = Float.valueOf(eT.getText().toString());
            Operator = 2;
            eT.setText(null);
        }
        else if(First != 0)
        {
            Operator = 2;
        };
        }
    });
    bKivonas.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
                if(First == 0)
            {
                EditText eT = (EditText) findViewById(R.id.eT);
                float First = Float.valueOf(eT.getText().toString());
                Operator = 4;
                eT.setText(null);
            }
            else if(First != 0)
            {
                Operator = 4;
            };
            }
        });
    bOsztas.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
                if(First == 0)
            {
                EditText eT = (EditText) findViewById(R.id.eT);
                float First = Float.valueOf(eT.getText().toString());
                Operator = 1;
                eT.setText(null);
            }
            else if(First != 0)
            {
                Operator = 1;
            };
            }
        });
    bOsszeadas.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
                if(First == 0)
            {
                EditText eT = (EditText) findViewById(R.id.eT);
                float First = Float.valueOf(eT.getText().toString());
                Operator = 3;
                eT.setText(null);
            }
            else if(First != 0)
            {
                Operator = 3;
            };
            }
        });
    bResult.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
                if(First != 0)
            {
                EditText eT = (EditText) findViewById(R.id.eT);
                float Second = Float.valueOf(eT.getText().toString());

                if(Operator == 1){
                    int Result = (int) (First) / (int) (Second);
                    eT.setText(Result);
                }

                else if(Operator == 2){
                    int Result = (int) (First) * (int) (Second);
                    eT.setText(Result);
                }

                else if(Operator == 3){
                    int Result = (int) (First) + (int) (Second);
                    eT.setText(Result);
                }

                else if(Operator == 4){
                    int Result = (int) (First) - (int) (Second);
                    eT.setText(Result);
                }

                eT.setText(null);
            }
            else if(First == 0)
            {

            };
            }
        });

}
    public void onClick(View v) {

        switch(v.getId()){

        case R.id.b0:
            eT.setText( eT.getText() + "0");
            break;
        case R.id.b1:
            eT.setText( eT.getText() + "1");
            break;
        case R.id.b2:
            eT.setText( eT.getText() + "2");
            break;
        case R.id.b3:
            eT.setText( eT.getText() + "3");
            break;
        case R.id.b4:
            eT.setText( eT.getText() + "4");
            break;
        case R.id.b5:
            eT.setText( eT.getText() + "5");
            break;
        case R.id.b6:
            eT.setText( eT.getText() + "6");
            break;
        case R.id.b7:
            eT.setText( eT.getText() + "7");
            break;
        case R.id.b8:
            eT.setText( eT.getText() + "8");
            break;
        case R.id.b9:
            eT.setText( eT.getText() + "9");
            break;
    } 
    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:49:04.490

尝试专注于本[教程](http://www.codeproject.com/Articles/104931/Introduction-to-Android-development-TouchCalculato)，看看事情是如何完成的，同时尝试改进它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:20:19.480

```
 float First = Float.valueOf(eT.getText().toString()); 
```

2个问题：

1.  为什么在这里重新声明你的变量`First`？只需使用它。
2.  要解析，请使用`Float.parseFloat(eT.getText().toString());`

为什么你把你的变量命名为`First`？使用`first`.Follow 约定。

编辑：

可以看到重新声明几乎所有变量的相同问题。请不要那样做。

# c++ - print,printto on MAC OS X

> ID：10946999
> 
> 赞同：0
> 
> 时间：2012-06-08T10:18:03.710
> 
> 标签：c++, xcode

I'm trying to call printing of a document from my C++(XCode) application on MAC.I'm currently using Launch Services framework,but I didn't noticed where is printto option(flag).Is this supported by Launch Services at all?Is there some other way to do this?

Thanks, Marko

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:23:49.793

根据[Technical Note TN2082: The Enhanced Print Apple Event](https://developer.apple.com/legacy/mac/library/#technotes/tn2002/tn2082.html#//apple_ref/doc/uid/DTS10003113) (in the legacy docs)，您应该能够指定其值为参考`keyAEPropData`的类型参数。`kPMPrinterAEType``PMPrinter`

不过，那个 TechNote 有点不清楚。似乎该`keyAEPropData`参数同时带有打印设置和打印机。接收者可以通过将参数的“实际”值强制为两种不同的类型来检索这两条信息。这就提出了一个问题，您是否可以使用 just 指定参数值`kPMPrinterAEType`并让它工作，或者它是否需要其他类型。

无论如何，您可以`AEDesc`为参数构造一个并将其传递给结构`LSOpenFromRefSpec()`的`passThruParams`字段`LSLaunchFSRefSpec`。

使用脚本编辑器将增强的打印 Apple 事件发送到测试应用程序然后转储该事件可能会有所帮助。这可能会弄清楚参数是如何构造的，因此您可以以相同的方式构造它。