# StackOverflow 问答 12304000-12304999

# symfony1 - 如何在 symfony 1.4 中呈现布局之前设置文化？

> ID：12304000
> 
> 赞同：0
> 
> 时间：2012-09-06T16:00:21.773
> 
> 标签：symfony1, internationalization, symfony-1.4

我需要根据浏览网站的国家/地区显示不同的徽标图像（在 layout.php 中）。在操作中设置它不起作用，因为布局是在调用 preExecute() （或任何其他操作）之前呈现的。

在呈现布局之前如何设置文化，然后在 layout.php 中调用此变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:18:32.547

您应该阅读文档的用户文化[部分](http://www.symfony-project.org/gentle-introduction/1_4/en/13-I18n-and-L10n#chapter_13_user_culture)。当您正确设置用户文化时，您也可以`$sf_user->getCulture()`在模板和布局中使用。

注意：@glerendegui 是正确的，布局是在操作之后甚至在模板之后呈现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:27:10.167

我不认为那是真的。调用操作后呈现布局。例如，您可以使用 $this->setLayout(); 更改 actions.class 中的 de 布局；无论如何，我认为您可以使用一个插槽来解决您的问题。在布局中：

```
<?php if(!has_slot('logo_image')) { ?>
<img src="<?php ... default logo;?>" />
<?php else { include_slot('logo_image'); } ?> 
```

然后，在您的操作模板中（fe indexSuccess）

```
<?php
slot('logo_image');
?><img src="<?php .... l10n image ?>" />
<?php end_slot(); ?> 
```

# java - 为什么pdf文件下载为损坏？

> ID：12304004
> 
> 赞同：0
> 
> 时间：2012-09-06T16:00:30.120
> 
> 标签：java, http, url, file-io, download

我编写了通过 url 下载文件的小程序。我可以正确打开的所有其他文件格式，但对于下载的 pdf，这是不可能的。

```
public static void saveFile(String fileUrl, String destinationFile) throws IOException {
    URL url = new URL(fileUrl);
    InputStream is = url.openStream();
    OutputStream os = new FileOutputStream(destinationFile);

    byte[] b = new byte[2048];
    int length;

    while ((length = is.read(b)) != -1) {
        os.write(b, 0, length);
    }
    os.flush();
    is.close();
    os.close();
} 
```

我需要特殊的方式来处理 pdf 下载吗？

当我尝试通过浏览器中的 URL 获取选定的 pdf 时，它会正确显示

**编辑**

在代码中添加了flush（），仍然没有成功

尝试在浏览器 (FF) 中打开损坏的 pdf 会返回错误：

> 文件不以“%PDF-”开头

Adobe Reader 返回：

> 文件无法打开，因为它不是受支持的文件类型或文件已损坏。

损害赔偿 pdf 的尺寸比原始文件小（约 80%）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:55:11.363

损坏的pdf文件里面有网站html代码。

# javascript - 数字文件命名系统

> ID：12304008
> 
> 赞同：-2
> 
> 时间：2012-09-06T16:00:36.190
> 
> 标签：javascript

我需要你的帮助。

我希望能够有一个文件命名系统来检测文件名是否存在以及它是否会自动在其末尾添加一个数字。从 2 开始

IE。

```
var myString = "2011-1234567";

myString = myString + "-2";

if (2011-1234567-2 already exists) then output new file number as: 2011-1234567-3 
```

所以 id 希望能够在理想情况下创建一个函数，如果文件名已经存在，该函数会在其末尾自动添加一个数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:08:43.200

这个*很*一般。。。

```
var base_filename = "file"
var i = 0;

function newFileName(){
    i++;
    var filename = base_filename + "-" +i;
    return filename;
} 
```

所以你会像这样使用它：

```
var new_file = newFileName(); 
```

同样，这是*非常*通用的。玩弄它一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:30:23.037

```
var exists = 0
function file_exists(name) {
   // replace with something suitable for your environment
   exists = 1 - exists 
   return exists
}

function new_name(suggested) {
   // just return back new name if it available
   if (!file_exists(suggested)) { return suggested }
   // try to split name to "base" and "index" parts
   var have_index = suggested.match(/^(.+)\-(\d+)$/)
   var unused_index
   if (have_index && have_index[2]) {
      base = have_index[1]
      unused_index = ++have_index[2]
   } else {
      // use entire name and start from index 2 if not found
      base = suggested
      unused_index = 2
   }
   // loop until you find next free index
   while (file_exists(base  + "-" + unused_index)) { unused_index++ }
   // ... and return result
   return base  + "-" + unused_index
} 
```

运行`new_name("tommy")`，给出“tommy-2”。`new_name("tommy-2")`- “tommy-3”等。当然你需要在`file_exists`函数中定义你自己对“exists”的看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:41:57.760

javascript中的文件命名系统？你在使用 node.js 吗？如果没有，则使用此 bash 脚本：

```
#!/bin/bash
filename= tommy
i=0
for file in *
i++
 do mv "$filename" "${filename}-i"
done 
```

# java - Websphere 上的 JPA 问题——在 Tomcat 上运行良好

> ID：12304009
> 
> 赞同：2
> 
> 时间：2012-09-06T16:00:41.277
> 
> 标签：java, spring, jpa, websphere, openjpa

我有一个使用 openJPA 作为持久性管理的 Spring 3 应用程序，以下部分在 STS/Tomcat 中运行良好

```
@Transactional
createBalance(){
.....
    Balance balance = new SummaryBalance();
    balance.setName(name);
    balance.setCurrency(currency);
    balance.setClosingTimestamp(closingTime);
    balance.setStatus(BalanceStatus.OPEN);
    balance.persist(); // persist !!
 ......

    balance.setCloseAmount(amount);
    balance.setLastUpdateTimestamp(now);
} 
```

但是，当在 websphere 7 中部署相同的代码时，`closeAmount`and`lastUpdate`不会更新（DB 中的两个字段都没有得到更新，但从日志中两个字段都可以通过它们的 getter 返回值）然后显示为 null，但之前更改为其他`persist()`字段方法完成后生效。所以我敢打赌，当完成 WS 的方法没有刷新这些字段的更改时。

我认为 JPA（无论供应商如何）应该保持平衡实体对象的管理，`persist()`并在方法完成后刷新对象并进行后续更改。事实证明 Websphere 7 没有成功。甚至我放了一个`merge()`方法

```
 balance.setCloseAmount(amount);
    balance.setLastUpdateTimestamp(now);
    balance.merge(); 
```

仍然没有帮助。

问题：

1.  OpenJPA 已经作为依赖项包含在部署中，但是为什么 websphere 还需要参与 JPA 管理呢？
2.  如何解决问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:35:06.610

我不确定这是否能准确回答您的问题，但我认为您应该重新配置以使用 WebSphere 功能，请查看[Spring 3.1 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-application-server-integration-websphere)

> 11.8.1 IBM WebSphere
> 
> 在 WebSphere 6.1.0.9 及更高版本上，推荐使用的 Spring JTA 事务管理器是 WebSphereUowTransactionManager。这个特殊的适配器利用 IBM 的 UOWManager API，它在 WebSphere Application Server 6.0.2.19 及更高版本和 6.1.0.9 及更高版本中可用。有了这个适配器，IBM 正式支持 Spring 驱动的事务暂停（由 PROPAGATION_REQUIRES_NEW 发起的暂停/恢复）！

和

> 11.9.1 对特定数据源使用错误的事务管理器
> 
> 根据您选择的事务技术和要求使用正确的 PlatformTransactionManager 实现。如果使用得当，Spring 框架仅仅提供了一个简单且可移植的抽象。如果您使用全局事务，则必须使用 org.springframework.transaction.jta.JtaTransactionManager 类（或它的特定于应用程序服务器的子类）进行所有事务操作。否则，事务基础结构会尝试对容器 DataSource 实例等资源执行本地事务。这样的本地事务没有意义，一个好的应用服务器会将它们视为错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:39:03.477

通过猜测工作自己找出解决方案。只需将persist() 放在整个方法体的末尾即可。

```
@Transactional
createBalance(){
.....
    Balance balance = new SummaryBalance();
    balance.setName(name);
    balance.setCurrency(currency);
    balance.setClosingTimestamp(closingTime);
    balance.setStatus(BalanceStatus.OPEN);
 ......

    balance.setCloseAmount(amount);
    balance.setLastUpdateTimestamp(now);
 ......
    balance.persist(); // persist !!
} 
```

这可以确保在方法完成之前设置每个字段。merge() 和显式 flush() 都不能完成这项工作，但只能在上述妥协的情况下完成。仍然不太确定官方的解决方法....

我会保持这个线程开放，以便有任何新的想法进来:)

# c++ - 指向函数成员的指针

> ID：12304010
> 
> 赞同：5
> 
> 时间：2012-09-06T16:00:43.197
> 
> 标签：c++, function-pointers

我正在尝试用指向函数成员的指针做一些事情，但我无法弄清楚这是如何工作的。

我有一个看起来像这样的 A 类

```
class A
{
    public:
    float Plus    (float a, float b) { return a+b; }
    float Minus   (float a, float b) { return a-b; }
    float Multiply(float a, float b) { return a*b; }
    float Divide  (float a, float b) { return a/b; }
}; 
```

我想声明一个指向 A 的指针，然后将一个指向 A 成员之一的函数指针传递给另一个函数。

像这样的东西：

```
void Will_Get_Function_Pointer(float a, float b, float (A::*pt2Func)(float, float))
{
    (...)
} 
```

我会用这样的东西来称呼它

```
A* myA = new A;
Will_Get_Function_Pointer(1.00,2.00, &myA->Minus) 
```

我不能使用静态/常量成员，因为在我的最终实现中，A 将指向 A 对象集合中的特定 A，看起来像这样

```
vector<A> vecA;
myA = &vecA[xxx] 
```

这样做很失败

```
typedef  float (A::*pA)(float x, float y);
pA p = &myA->Minus; 
```

并且编译器告诉我使用 &A::Minus 但这对我不起作用。

我什至可以这样做吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:05:43.037

```
A* myA = new A;
Will_Get_Function_Pointer(1.00,2.00, &myA->Minus) 
```

你不能。你应该使用类似的东西

```
void Will_Get_Function_Pointer(A* object, float a, float b,
float (A::*pt2Func)(float, float))
{
   (object->*pt2Func)(a, b);
} 
```

并将其称为

```
A* myA = new A;
Will_Get_Function_Pointer(myA, 1.00, 2.00, &A::Minus); 
```

简单的例子。

[http://liveworkspace.org/code/79939893695e40f1761d81ba834c5d15](http://liveworkspace.org/code/79939893695e40f1761d81ba834c5d15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:13:19.077

不幸的是，该语言不允许您使用该语法将对象绑定到成员函数以创建可调用对象。您可以传入对象引用（或指针）并在调用函数时绑定它：

```
void Will_Get_Function_Pointer(float a, float b, A & obj, float (A::*pt2Func)(float, float))
{
    (obj.pt2Func)(a,b);
}

Will_Get_Function_Pointer(1.00, 2.00, myA, &A::Minus); 
```

或者您可以创建一个将函数指针绑定到对象的函数对象：

```
void Will_Get_Function(float a, float b, std::function<float(float,float)> f)
{
    f(a,b);
}

Will_Get_Function(1.00, 2.00, std::bind(&A::Minus, &myA)); 
```

注意`function`和`bind`是 C++11 中的新内容；如果您使用旧版本的语言，Boost 会提供等价物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T16:13:27.173

[使用宏。](http://www.parashift.com/c++-faq-lite/macro-for-ptr-to-memfn.html)

```
#define CALL_MEMBER_FN(object,ptrToMember)  ((object).*(ptrToMember)) 
```

调用你的成员函数很简单，因为你[已经有了](http://www.parashift.com/c++-faq-lite/typedef-for-ptr-to-memfn.html)你想要调用的函数的 typedef。

```
float result = CALL_MEMBER_FN(*myA, pA)(a, b); 
```

# javascript - 阻止移动 Safari（iPad / iPhone）中长按/长按的默认上下文菜单

> ID：12304012
> 
> 赞同：37
> 
> 时间：2012-09-06T16:00:54.053
> 
> 标签：javascript, jquery, iphone, ipad, mobile-safari

对于一个网站，我想在用户“长按”屏幕时显示自定义上下文菜单。我在代码中创建了一个[jQuery Longclick](https://github.com/pisi/Longclick)侦听器来显示自定义上下文菜单。显示了上下文菜单，但也显示了 iPad 的默认上下文菜单！我试图通过[`preventDefault()`](http://api.jquery.com/event.preventDefault/)在我的监听器中添加一个事件来防止这种情况，但这不起作用：

```
function showContextMenu(e){
  e.preventDefault();
  // code to show custom context menu
}

$("#myId").click(500, showContextMenu); 
```

**问题**

1.  你能阻止 iPad 的默认上下文菜单显示吗？
2.  可以通过使用 jQuery Longclick 插件来完成吗？

* * *

Longclick 插件对 iPad 有一些特定的处理（假设通过[它的源代码](https://github.com/pisi/Longclick/blob/master/jquery.longclick.js)片段）：

```
if (!(/iphone|ipad|ipod/i).test(navigator.userAgent)){
  $(this)
  .bind(_mousedown_, schedule)
  .bind([_mousemove_, _mouseup_, _mouseout_, _contextmenu_].join(' '), annul)
  .bind(_click_, click)
} 
```

所以我假设这回答了我的第二个问题（假设插件使用了正确的事件）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-18T07:42:09.350

感谢 JDandChips 为我[指出](https://stackoverflow.com/a/12424987/880619)了解决方案。它与 longclick 插件完美结合。为了文档起见，我将发布我自己的答案以展示我所做的事情。

HTML：

```
<script type="text/javascript"
        src="https://raw.github.com/pisi/Longclick/master/jquery.longclick-min.js"></script>

<p><a href="http://www.google.com/">Longclick me!</a></p> 
```

Javascript 已经可以了：

```
function longClickHandler(e){
  e.preventDefault();
  $("body").append("<p>You longclicked. Nice!</p>");
}

$("p a").longclick(250, longClickHandler); 
```

解决方法是将这些规则添加到样式表中：

```
body { -webkit-touch-callout: none !important; }
a { -webkit-user-select: none !important; } 
```

[禁用上下文菜单**示例**](http://jsfiddle.net/z9ZNU/53/)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-10-28T14:31:01.030

```
<style type="text/css">
*:not(input):not(textarea) {
  -webkit-user-select: none; /* disable selection/Copy of UIWebView */
  -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
}       
</style> 
```

如果您只想禁用锚按钮标签，请使用：

```
a {
  -webkit-user-select: none; /* disable selection/Copy of UIWebView */
  -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-11T19:33:49.263

一个快速的CSS解决方案：

```
html {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
} 
```

用户选择禁用突出显示文本/区域。
touch-callout 禁用上下文菜单弹出。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-03T09:15:29.523

无需使用 JavaScript，可以使用 css 执行。

要仅对图像禁用上下文菜单，请使用

```
img{
-webkit-touch-callout: none !important; 
 -webkit-user-select: none !important; } 
```

如果我们需要禁用特定类的上下文菜单，请使用

```
.className{-webkit-touch-callout: none !important; 
-webkit-user-select: none !important; } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-14T12:53:05.457

我没有 iPad，因此无法测试解决方案，但我确实遇到了类似的问题，该问题已解决。我不知道它是否对你有任何帮助，但这里是链接：[How to disable the default behavior of an Anchor in jQuery Mobile (iOS)](https://stackoverflow.com/questions/10714868/how-to-disable-the-default-behavior-of-an-anchor-in-jquery-mobile-ios)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-31T00:29:03.063

没有必要依赖`-webkit-`属性。

如果您的链接是一个 Javascript 调用，它就像`href="void(0)"`完全删除一样简单！您的`ontouchend`or`onclick`属性仍然有效。如果您希望链接看起来是原始的，请添加以下 css：

```
a .originalLink { color: blue; text-decoration: underline; cursor: pointer; } 
```

这将运行得更顺畅，尤其是当页面中有数百个链接时。

您还可以以损失 SEO 为代价将其扩展到“真实”页面链接：

```
<a class="originalLink" onclick="location.href='http://mylink';">Real URL Link</a> 
```

对于大多数网站来说，这并不完全是好的做法，但对于*特定*的移动友好情况（移动网络应用程序）来说，这可能是至关重要的。

快乐编码！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-26T21:48:04.727

这个 github 存储库对我有用。就我而言，我使用 UIWebView 编写了一个 iPad 应用程序。

[https://github.com/vaidik/jquery-longpress](https://github.com/vaidik/jquery-longpress)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-02T12:20:16.970

我用这个：

```
<p onclick="window.location.href='https://google.com‘“&gt;Link</p> 
```

# sharepoint - SharePoint 安全组

> ID：12304013
> 
> 赞同：2
> 
> 时间：2012-09-06T16:00:54.600
> 
> 标签：sharepoint, sharepoint-2010

我希望建立一个名为 Head Company 的新安全组，其中将包括我的 SharePoint 上的现有安全组，例如子公司 1、子公司 2 等。这是为了让公司集团 CEO 经理访问所有公司的总公司拥有。

不幸的是，SharePoint 似乎不允许这样做？错误：SharePoint 组不能包含其他 SharePoint 组。从用户框中删除 SharePoint 组，然后重试。

这是你们在 SharePoint 上做过的事情，还是你们已经能够解决的事情？

就我将如何设置它而言，这个问题搞砸了我的总体计划！双毒！

分享点 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:59:28.850

如果您可以切换到使用 AD 组，那么您可以将 AD 组放在彼此之间，但这也有缺点，试图管理它。

重组可能很耗时，但将来会更容易管理。而且我相信您现在可以相当轻松地在子站点内移动站点 看看这个

[http://movesites.codeplex.com/](http://movesites.codeplex.com/)

# rally - 自定义字段名称和 Web 服务的问题

> ID：12304019
> 
> 赞同：1
> 
> 时间：2012-09-06T16:01:23.993
> 
> 标签：rally

我正在使用 Rally SOAP API 通过 Java 执行给定自定义字段值的查询。

我收到错误“java.lang.IllegalArgumentException: The char '0x1f' after 'return code: 401' is not a valid XML character.”

我查看了自定义字段名称（名称，而不是显示名称），其中包含一些空白字符。会不会是这个问题？

如果是，重命名自定义字段是否安全，因为它已经在使用？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:09:55.503

您始终可以对您尝试发送到网络服务的任何内容进行 URLEncode，尽管这听起来可能不是您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:29:29.397

您是否考虑过使用 Java Toolkit for Rally REST API？

[http://developer.rallydev.com/help/java-toolkit-rally-rest-api](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)

REST 不如 SOAP 脆弱，是访问 Rally 的 Web 服务的首选方式。

# git - 清除我的主分支并发送一个干净的拉取请求

> ID：12304022
> 
> 赞同：2
> 
> 时间：2012-09-06T16:01:29.310
> 
> 标签：git, github

我是使用 git 的新手，这是问题所在。我已经分叉了一个 repo，并且已经将一个补丁合并到原始项目中，没有任何麻烦。在那之后，该项目的主要版本发布了，我拉动上游 master 以将我的 master 分支与新的更新合并。但是在我这样做之后，我会尝试在合并后推送我的 orign master 之后是否可以发出干净的拉取请求。结果变成我修改了文件（不是我修改的）并在拉取请求页面中提交了其他人的日志。我觉得这有点奇怪。

我想我在更新上游时搞砸了一些重要的步骤。如果我不想删除我的 fork 并重新分配 repo，我该如何清理我的 repo 以与上游 master 同步并且不伤害我的原始提交历史记录？（我不希望在拉取并合并上游主节点之后提交历史记录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:07:04.370

你考虑过 git [rebase](http://gitready.com/intermediate/2009/01/31/intro-to-rebase.html)吗？

# html - 关于代码复制的理论

> ID：12304027
> 
> 赞同：0
> 
> 时间：2012-09-06T16:01:57.850
> 
> 标签：html, css

我已经开始在学校的一个班级工作，教授给了我们一些网页的图片，并要求我们在一定的限制下复制它。第一个任务是创建只包含 HTML 和 CSS 的网页，我知道两者的基础知识并且想知道这一点：

1.  **当面对文本的字体/阴影时，在 CSS 中复制它的最佳方法是什么？**标题栏有一些我什至不知道从哪里开始复制的格式。

2.  **其次，您可以使用 html 制作一个水平表格并用图像填充它吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:06:41.347

最简单的方法是复制网站和样式表，也许还有 javascript，然后在这里说，但这可能是作弊:-)

> 当面对文本的字体/阴影时，在 CSS 中复制它的最佳方法是什么？

有该[`text-shadow`](http://caniuse.com/#search=text-shadow)属性，但并非所有浏览器都支持它。您始终可以使用图像或只是放弃 text-shadow 要求。

> 标题栏有一些我什至不知道从哪里开始复制的格式。

Rightmouse clikc 检查元素并查看它是如何完成的。这是针对 Chrome 的。对于 FF，您必须安装 FireBug。

> 其次，你可以用 html) 制作一个水平表格并用图像填充它吗？

是的，你可以，不，你不应该。表格应该用于表格数据，并且您正在将其用于布局。需要时使用 CSS 和`div`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:08:04.433

> 当面对文本的字体/阴影时，在 CSS 中复制它的最佳方法是什么？

CSS3 提供了几个属性来处理文本格式，例如`text-shadow`和`@font-face`。

> 其次，您可以（使用 html）制作一个水平表格并用图像填充它吗？

是的，为什么不？如果我理解正确，您正在寻找一个单行表，即一个内部`<tr>`带有`<td>`s 的表，每个表都包含一个`<img>`元素。但请注意：如果您希望表格只是并排布置图像，这是不好的做法。您应该`<img>`一个接一个地添加，或者使用`display: inline`or `inline-block`，或者使用浮点数。

# ruby - 映射 ElasticSearch GeoPoint 字段

> ID：12304031
> 
> 赞同：0
> 
> 时间：2012-09-06T16:02:30.010
> 
> 标签：ruby, search, geolocation, elasticsearch, tire

我们存储看起来像这样的文档：

```
{
    "id": "dQesbpxeQniUWXpsnjPQ",
    "title": "Golf in Hamburg, Altona",
    "user": "CtGjEaDxSrhPbf7W7NcH",
    "location": {
        "id": "Q6sZhRHdiS3mP2innbJ9",
        "name": "Hamburg, Altona",
        "lat": 53.55,
        "lon": 9.93333,
        "slug": "hamburg-altona"
    },
    "_type": "announcement"
} 
```

我们需要`announcement.location.slug`成为`not_analyzed`（毕竟这是一个蛞蝓）

但是映射不会，我们有这些设置：

```
Tire.index(@@index_name) do
  delete
  create(mappings: {
    announcement: {
      properties: {
        "id"       => { type: 'string', index: 'not_analyzed' },
        "user"     => { type: 'string', index: 'not_analyzed' },
        "location" => {
          type: 'geo_point',
          properties: {
            "slug" => { type: 'string', index: 'not_analyzed' }
          }
        },
        "times"    => { type: 'string', analyzer: 'keyword'   },
        "sport" => {
          "properties" => {
            "slug" => { type: 'string', index: 'not_analyzed' }
          }
        }
      }
    }
  },
  settings: {
    index: {
      number_of_shards: 1,
      number_of_replicas: 0
    }
  })
  refresh
end 
```

**注意：**语法中的相同映射`curl`也不起作用，但对 SO 的可读性较差，所以我发布了 Ruby 代码。

似乎`geo_point`正在覆盖文档该部分的所有其他映射。[文档](http://www.elasticsearch.org/guide/reference/mapping/geo-point-type.html)似乎同意。

我确信有一种方法可以使用该`lat_lon`选项，但我找不到任何关于它如何工作的文档。（我假设一个人用设置映射个人`lat`和`lon`字段`lat_lon`）

也有可能，我曾希望使用[字段`multi`类型](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)，但这似乎不适用于主文档属性的整个子树。

如何在不必更改整个数据模型的情况下继续操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:14:25.787

恐怕您必须更改模型，因为 geo_point 是完整的数据类型，您不能在其中添加属性（元）。

# c# - 在 Sharepoint 文档库中创建文件夹的 ssis 脚本任务

> ID：12304034
> 
> 赞同：1
> 
> 时间：2012-09-06T16:02:33.427
> 
> 标签：c#, sharepoint, ssis

我正在尝试创建一个 SSIS 包，该包从远程 SQL DB 获取文件夹树结构，并在 Sharepoint 的文档库中重新创建该结构。

我试图（硬）编写一个脚本任务来创建一个文件夹，但我收到了这个错误：http: [//img856.imageshack.us/img856/1386/helpel.png](http://img856.imageshack.us/img856/1386/helpel.png)

仅运行此脚本的一部分后：

```
Microsoft.Sharepoint.Client.dll
Microsoft.Sharepoint.Client.Runtime.dll

public void Main()
    {
        ClientContext clientContext = new ClientContext("http://spdemo.example.com/");
        clientContext.Credentials = new System.Net.NetworkCredential("admin", "password", "SPDEMO");
        Web rootWeb = clientContext.Web;

        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

我已经在互联网上搜索了解决方案，但没有找到适合我的东西。

所以基本上我需要找出如何：

1.  创建文件夹
2.  用子文件夹填充它
3.  将比特流中的文件从 SQL 复制到 Sharepoint，全部在 SSIS 中

提前致谢！问候， 弗拉德·阿德林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:01:23.583

经过一些研究，我发现为了在 SSIS 脚本任务中引用 DLL，它首先必须是[强命名的](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)

相反，我找到了一种更简单的方法来创建文件夹和上传文件：

```
public void CreateFolder(string url)
    {
        HttpWebRequest request = (System.Net.HttpWebRequest)HttpWebRequest.Create(url);
        request.Credentials = new NetworkCredential(user, pass);
        request.Method = "MKCOL";
        HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
        response.Close();
    }

public void UploadDocument(byte[] file, string destinationName)
    {
        byte[] buffer = file;

        WebRequest request = WebRequest.Create(destinationName);
        request.Credentials = new System.Net.NetworkCredential(user, pass);
        request.Method = "PUT";
        request.ContentLength = buffer.Length;

        BinaryWriter writer = new BinaryWriter(request.GetRequestStream());
        writer.Write(buffer, 0, buffer.Length);
        writer.Close();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        response.Close();
    } 
```

url ：表示要创建的文件夹的url路径

```
http://spsite.host.com/DocLib/FolderToCreate 
```

目的地名称：路径+文档名称

```
http://spsite.host.com/DocLib/FolderToCreate/DocToCreate.docx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:37:22.837

您是否尝试在 Visual Studio 中从用 C# 编写的独立 Windows 应用程序运行代码？如果我在 SSIS 中遇到错误，我的偏好是在 Visual Studio 中彻底测试该代码，然后将其移植到 SSIS 中的脚本任务。

如果您尚未创建文件夹并将文件复制到 SharePoint，以下链接可能会有所帮助。

1.  创建一个文件夹 - [http://thingsthatshouldbeeasy.blogspot.in/2009/09/how-to-add-folder-to-sharepoint-list.html](http://thingsthatshouldbeeasy.blogspot.in/2009/09/how-to-add-folder-to-sharepoint-list.html)

2.  您可以递归地执行创建文件夹步骤，直到您创建了目标树结构。

3.  复制[文件](http://msdn.microsoft.com/en-us/library/ms470176.aspx)- [http://msdn.microsoft.com/en-us/library/ms454491.aspx，http://msdn.microsoft.com/en-us/library/ms470176.aspx](http://msdn.microsoft.com/en-us/library/ms454491.aspx)

我不明白你在从 SQL 中复制文件是什么意思。如果您想通过 ADO.Net 从 SQLServer 读取二进制数据，请使用`System.Data.SqlDbType.VarBinary`

将数据从 SQL 服务器读取到流并写入临时文件，将该临时文件从本地复制到 SP。或者您甚至可以在没有临时文件的情况下直接将流中的数据写入 SP。

# python - 在字典的字符串键中使用非字母数字字符是否有任何性能影响

> ID：12304035
> 
> 赞同：0
> 
> 时间：2012-09-06T16:02:37.830
> 
> 标签：python, dictionary

我所有的键都是字符串，但我正在考虑使用非字母数字字符，例如`+`、`:`、`_`等作为键的一部分。

使用它们是否有任何性能（或任何其他）影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:04:02.537

不，python dicts 不会看到您在密钥字符串中使用的字符有任何区别。

它们经过优化以*仅*处理字符串而不是任意键对象，但如果您*只*对键使用字符串值，您将不会看到使用不带和不带非字母数字字符的键之间有任何区别。

纯字符串代码路径是对 python dicts 最常见用例的优化：命名空间和函数定义。这是 dict 的默认模式；一旦你在其中存储了一个非字符串键，查找方法就会切换，你手上就会有一个很小的速度较慢的字典。不过，这在大多数 Python 应用程序中并不重要。

# spring - 非所有者时 Spring Security 更新 acl

> ID：12304044
> 
> 赞同：0
> 
> 时间：2012-09-06T16:03:01.803
> 
> 标签：spring, spring-security

我想将 ACE 添加到 ACL，但当前用户不一定是 ACL 的所有者。
这导致异常

org.springframework.security.acls.model.NotFoundException：无法为传递的权限和 SID 找到匹配的 ACE

如何授予当前用户或角色更新 ACL 的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:12:11.080

您需要做的就是给他们 BasePermission.ADMINISTRATION

# oracle - Oracle Trace 文件中 mxlc 的含义

> ID：12304048
> 
> 赞同：5
> 
> 时间：2012-09-06T16:03:16.253
> 
> 标签：oracle, oracle11g

我在跟踪文件中看到以下内容：

> 绑定#3 oacdty=01 mxl=128(35) **mxlc=36** mal=00 scl=00 pre=00
> oacflg=03 fl2=1000010 frm=01 csi=31 siz=0 off=168
> kxsbbbfp=ffffffff79f139a8 bln=128 avl= 35 flg=01 value="1234 W 1234 West, West Groves City"

我想知道 mxlc 值是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:08:19.813

我引用

```
Bind #n
oacdty  - Datatype code 
mxl     - Maximum length of the bind variable value (private maximum length in parentheses)
mxlc    - Unknown    :(
mal     - array length
scl     - Scale
pre     - Precision
oacflg  - Special flag indicating bind options
fl2     - second part of oacflg
frm     - Unknown        :(
csi     - Unknown        :(
siz     - Amount of memory to be allocated for this chunk
off     - Offset into this chunk for this bind buffer
kxsbbbfp- Bind address
bln     - Bind buffer length
avl     - actual value length
flg     - bind status flag
value   - Value of the bind variable 
```

[**来源**](https://rads.stackoverflow.com/amzn/click/com/1435705513)（和[**书的片段**](http://books.google.com/books?id=Go3QBdT-qysC&pg=PA237&lpg=PA237&dq=mxlc%20Oracle&source=bl&ots=J4ZRhUvF5s&sig=A9Dkbn6XoNk2PonfkrGKzAYH8u4&hl=en#v=onepage&q=mxlc%20Oracle&f=false)）

书中还引用了——

> 目前没有关于三个参数的信息。

分别是`mxlc`、`frm`和`csi`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T05:56:53.190

**概括**

`mxlc`似乎是绑定变量的最大字符数，但前提是该变量使用字符长度语义。

**方法**

我在 My Oracle Support 中搜索`mxlc`. 几乎每篇文章都有`mxlc=00`，唯一的例外涉及一个`NVARCHAR`or `NCHAR`。下面的代码基于文档 ID 552262.1 中的代码。我改变了变量大小（`99`和`123 char`），如果使用字符长度语义，每次`mxlc`都设置为变量大小。

**代码**

```
create table t1(ncol1 nvarchar2(100), col1 varchar2(100));

alter session set timed_statistics = true;
alter session set statistics_level=all;
alter session set max_dump_file_size = unlimited;
alter session set events '10046 trace name context forever,level 4';

VAR nvar1 NVARCHAR2(99)
VAR var1 VARCHAR2(123 char)
EXEC :nvar1 := 'nvarchar'
EXEC :var1 := 'varchar'

SELECT * FROM T1 WHERE ncol1 = :nvar1 and col1 = :var1;
ALTER SESSION SET EVENTS '10046 trace name context off'; 
```

**结果：**

```
 Bind#0
  oacdty=01 mxl=2000(198) mxlc=99 mal=00 scl=00 pre=00
  oacflg=03 fl2=1000010 frm=02 csi=2000 siz=4000 off=0
  kxsbbbfp=0e702edc  bln=2000  avl=16  flg=05
  value=0 6e 0 76 0 61 0 72 0 63 0 68 0 61 0 72 
 Bind#1
  oacdty=01 mxl=2000(369) mxlc=123 mal=00 scl=00 pre=00
  oacflg=03 fl2=1000010 frm=01 csi=873 siz=0 off=2000
  kxsbbbfp=0e7036ac  bln=2000  avl=07  flg=01
  value="varchar" 
```

**更多问题**

`mxl`通常和之间的关系`mxlc`是有意义的。对于`NVARCHAR`我系统上的 UTF16，每个字符将有 2 个字节，即 198 和 99。我的数据库是 UTF8，一个字符最多可能占用 4 个字节。也许 Oracle 猜测平均大小是 3 个字节，因此是 123 和 369。显然它可能超过 369，也许这只是最初分配的内存，以后还会增长吗？

But your numbers, 36 and 35, don't make sense to me. Surely the number of bytes can never be *LESS* than the number of characters? Is Oracle making a bad guess, or is some client program sending in bad data?

# python - Django 教程：通用视图。属性错误

> ID：12304050
> 
> 赞同：15
> 
> 时间：2012-09-06T16:03:21.680
> 
> 标签：python, django, django-generic-views

我在[本](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)教程的最后一部分。

```
from django.conf.urls import patterns, include, url
from django.views.generic import DetailView, ListView
from polls.models import Poll

urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset=Poll.objects.order_by('-pub_date')[:5],
            context_object_name='latest_poll_list',
            template_name='polls/index.html')),
    url(r'^(?P<pk>\d+)/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/detail.html')),
    url(r'^(?P<pk>\d+)/results/$',
        DetailView.as_view(
            model=Poll,
            template_name='polls/results.html'),
        name='poll_results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'polls.views.vote'),
) 
```

ListView 有效，但是当我使用 DetailView 访问 url 时，我得到了。

```
AttributeError at /polls/2/
Generic detail view DetailView must be called with either an object pk or a slug.
Request Method: GET
Request URL:    http://127.0.0.1:8000/polls/2/
Django Version: 1.4.1
Exception Type: AttributeError
Exception Value:    
Generic detail view DetailView must be called with either an object pk or a slug.
Exception Location: /home/yasith/coding/django/django-tutorial/lib/python2.7/site-packages/django/views/generic/detail.py in get_object, line 46
Python Executable:  /home/yasith/coding/django/django-tutorial/bin/python2
Python Version: 2.7.3 
```

我不确定我做错了什么。任何帮助，将不胜感激。

编辑：添加主 urls.py

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^polls/', include('polls.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-15T19:32:19.117

我认为您在上面发布的代码不是您磁盘上的代码。

我遇到了同样的问题，但后来我仔细查看了我的代码和教程。我在代码中使用的正则表达式与教程不同。

这是我的代码：

```
 url(r'^(?P<poll_id>\d+)/$',-$                                               
 url(r'^(?P<poll_id>\d+)/results/$',-$ 
```

这是正确的核心：

```
 url(r'^(?P<pk>\d+)/$',-$                                               
 url(r'^(?P<pk>\d+)/results/$',-$ 
```

请注意， *poll_id* 在本教程的前面部分中，但通用视图需要*pk*。另请注意，教程是正确的，并且您发布了正确的代码（来自教程。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T18:01:55.530

仔细查看他们提到的将 urlpatterns 更改为使用 primarykey 而不是 question_id 的教程。

# haxe - 如何在 Erazor 中进行 HTML 转义？

> ID：12304053
> 
> 赞同：1
> 
> 时间：2012-09-06T16:03:28.607
> 
> 标签：haxe, ufront, erazor

我是 Haxe 的新手，我正在尝试使用[Ufront](https://github.com/ufront/ufront)。

我在使用 Erazor 模板时遇到了问题：我不明白如何在输出变量时转义 HTML。

使用这个简单的模板：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Users list</title>
</head>
<body>
    <ul>
        @for(user in users)
        {
            <li>@user.name</li>
        }
    </ul>
</body>

</html> 
```

如果任何用户的名称为 ' `<script>`'，则模板将简单地输出 <script> 作为其名称。

如何在 Erazor 中正确地进行 HTML 转义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T21:57:31.113

### 如何 HTML 转义视图参数

为了在 Erazor 视图中对参数进行 HTML 转义，您可以简单地使用 HTML 帮助器方法 encode()。

假设您的参数称为 pageContent ，其值为：

```
<script>
    alert("BAD things could happens if you don't properly escape!!");
</script> 
```

您可以使用以下代码对其进行转义：

```
@Html.encode(pageContent) 
```

您的模板将安全地呈现为

```
&lt;script&gt;
    alert("BAD things could happens if you don't properly escape!!");
&lt;/script&gt; 
```

*Html.encode() 在内部使用 StringTools.htmlEscape() 来转义它的参数。*

[感谢 Franco 的帮助，我在 Ufront 网站上写了一个页面来解释如何在 Ufront 中进行 HTML 转义。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:57:08.440

Ufron 自动包含包含所需方法的辅助类：

```
<li>@Html.encode(user.name)</li> 
```

# c# - Spring.net，AOP导致无法设置属性

> ID：12304055
> 
> 赞同：2
> 
> 时间：2012-09-06T16:03:34.783
> 
> 标签：c#, c#-4.0, spring.net, spring-aop

我是 C# 新手，但在 Java 中的 Spring 中是 exp。我可以使用 Spring 示例项目 Spring.WcfQuickStart.2010 轻松地重现我的问题。

在 Spring.WcfQuickStart.ServerApp.2010 项目中执行以下操作

1）添加以下TestDI类。

```
namespace Spring.WcfQuickStart
{
    public class TestDI
    {
        public int test { get; set; }

        public TestDI()
        { 
            this.test = 10;
            Console.WriteLine("TestDI cons called, value set to {0}", test);
        }
    }
} 
```

2）在CalculatorService.cs中，返回“ServerApp Calculator testDI value=" + tdi.test;

3) 在 App.config 中执行以下操作。

```
<object id="testObj" type="Spring.WcfQuickStart.TestDI, Spring.WcfQuickStart.ServerApp" singleton="true"/> 

  <object id="calculator" singleton="true"
          type="Spring.WcfQuickStart.CalculatorService, Spring.WcfQuickStart.ServerApp">
    <property name="tdi" ref="testObj"/>
    <property name="SleepInSeconds" value="1"/>
</object> 
```

现在，如果您运行程序，您会期望客户端将返回值 10，但我得到的值是 0。这对于我定义的任何属性都是相同的。如果 TestDI 属性测试更改为静态，同样的问题。

防止这种情况并获得值 10 的唯一方法是从 App.config 文件中删除以下内容。

```
<object id="serviceOperation" type="Spring.Aop.Support.SdkRegularExpressionMethodPointcut, Spring.Aop">
    <property name="pattern" value="Spring.WcfQuickStart.*"/>
</object> 
```

我也可以将 value="Spring.WcfQuickStart.*" 更改为其他内容，但我的代码没有任何方面。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:44:05.233

尝试将您的属性设置为“虚拟”。我发现如果在使用 AOP 时属性不是虚拟的，您通常会看到空值/默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:41:14.957

其原因在 Spring.NET 文档的第 13.6 节中进行了解释：[http](http://www.springframework.net/doc-latest/reference/html/aop.html#aop-proxy-mechanism) ://www.springframework.net/doc-latest/reference/html/aop.html#aop-proxy-mechanism 。听起来您正在使用基于继承的机制。

# drupal - Drupal 视图和 URL 别名覆盖问题

> ID：12304060
> 
> 赞同：0
> 
> 时间：2012-09-06T16:04:13.347
> 
> 标签：drupal, drupal-views

我有一个称为“目录”的分类词汇。在此范围内，我有术语级别。有些有子术语，有些有节点。

我有两个视图来处理这些：一个显示子类别，一个显示节点，每个视图都有一个基于 URL 应用的过滤器。如果我转到`sub-category/category-name`，它将显示类别名称中的所有子术语。如果我去`product-category/category-name`，我会得到一个相关节点的列表。

没有别名，视图在`sub-category/%`. 这样做的问题是为子术语生成的链接不是视图，而是术语页面。

如果我创建别名，它会覆盖视图并且在`sub-category/%`页面和默认节点预告片上不显示任何结果`product-category/%`。

我可以以这种方式在视图中使用别名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:16:50.833

听起来您想重写 Field 的输出而不是创建别名。如果您不熟悉 Views 中的特定功能，请参阅以下来自[http://highrockmedia.com/blog/rewriting-drupal-views-output-custom-theming-css的屏幕截图](http://highrockmedia.com/blog/rewriting-drupal-views-output-custom-theming-css)

请注意`<div>`，您可以根据需要创建自己的链接，而不是创建包装器。希望这将帮助您朝着正确的方向开始。

![重写字段输出](../Images/6bbdbbe72a2b1965cd0832e38333acce.png)

# maven - Maven 父项目上的 Maven 部署失败

> ID：12304061
> 
> 赞同：2
> 
> 时间：2012-09-06T16:04:16.200
> 
> 标签：maven, maven-release-plugin

我有一个使用 NetBeans 创建的具有以下层次结构的 Maven 项目：

```
 root/
       Parent/
              pom.xml
              Project 1/
                        pom.xml
              Project 2/
                        pom.xml
              ....
              Project x/
                        pom.xml 
```

当我尝试发布时：执行它在尝试部署时失败：

```
 [ERROR] The build could not read 1 project -> [Help 1]
    [ERROR]   
    [ERROR]   The project  (C:\checkout\pom.xml) has 1 error
    [ERROR]     Non-readable POM C:\checkout\pom.xml: C:\checkout\pom.xml (The system cannot find the file specified) 
```

看起来插件希望 pom 位于根文件夹中。我无法在插件上找到自定义点来指定 pom.xml 位置。

这是不可能的，还是我组织项目错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:10:04.260

在网上搜索，我发现[了这篇文章，它向我指出了一个问题，](http://maven.40175.n5.nabble.com/Release-plugin-when-POM-is-not-in-root-directory-td4956364.html)[这里](https://stackoverflow.com/questions/5558785/maven-release-plugin-git-and-the-poms-not-at-the-top)有答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:09:50.040

看起来您正在尝试`mvn release:perform`从结帐根目录运行，而您应该`cd`这样做`Parent`。

我假设您的项目确实存储在 Subversion 或其他一些 Maven 支持的版本控制工具下，并且您在`C:\checkout`目录中签出了它。

# callback - 窗口调整大小后未发生同位素回调

> ID：12304062
> 
> 赞同：1
> 
> 时间：2012-09-06T16:04:18.947
> 
> 标签：callback, resize, jquery-isotope

在调整窗口大小并完成同位素操作后，我需要运行一个脚本。我认为回调会有所帮助，但在调整窗口大小的情况下它们不会被触发。

由于我需要调整大小后更新容器的宽度值，还有其他方法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:27:00.747

这有效..

[文档](http://isotope.metafizzy.co/docs/options.html#onlayout)

与回调类似，onLayout 是一个函数，每次 Isotope 实例运行完其布局逻辑后都会触发该函数。

```
$('#container').isotope({
  onLayout: function( $elems, instance ) {
    // `this` refers to jQuery object of the container element
    console.log( this.height() );
    // callback provides jQuery object of laid-out item elements
    $elems.css({ background: 'blue' });
    // instance is the Isotope instance
    console.log( instance.$filteredAtoms.length );
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:56:45.433

我正在调查那个eather，但找不到解决方案。所以我选择了这个*丑陋*的：

```
$(window).smartresize(function () {
    setTimeout(function () {
        //your function
    }, 810);
}); 
```

所以在调整大小时，我设置了一个在同位素重新布局后调用 810 毫秒的超时，在 jquery 中应该需要 800 毫秒，在 css3 中应该是 0.8 秒。就像说的那样，它很丑，但现在我符合目的..

# jquery - JQuery UI Resiable 右下角

> ID：12304067
> 
> 赞同：0
> 
> 时间：2012-09-06T16:04:59.697
> 
> 标签：jquery, jquery-ui, jquery-resizable

我想通过拖动右下角来调整 DIV 的大小。

我想要的是：

*   可以访问动画、助手、轴、遏制选项。

我看到了基于 JQuery *draggable*的实现，但我的理解是我将失去所有*可调整大小*的选项，这些选项非常方便。

*   仅使用不带自定义插件的 jquery UI。**

我确定有很多，但我必须坚持使用 JQuery UI。

*   隐藏 NS/WE 图标，所以它只会通过拖动右上角来调整大小（这是一个简单的部分，我自己可能会弄清楚）

任何人都可以建议我的场景是否可以采用*可调整大小*，或者我必须在其他地方搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:07:50.107

css 有一个[resize 属性](http://www.w3schools.com/cssref/css3_pr_resize.asp)

IE不支持，但可能对你有用......

# ruby-on-rails - 将数据从 FTP 加载到 Heroku 应用程序

> ID：12304068
> 
> 赞同：2
> 
> 时间：2012-09-06T16:05:05.317
> 
> 标签：ruby-on-rails, ruby, database, heroku, ftp

先介绍一点背景。我一直在为我的公司开发一个库存应用程序，该程序的一部分从我公司销售产品的各个站点（亚马逊、网站等）获取订单。我们已经开始使用 Buy.com，他们目前存储订单历史的唯一方式是通过 FTP。我已经在本地工作了，但是当我将它加载到heroku时，它会出错（BrokenPipe）

```
ftp = Net::FTP.new('example.com')
ftp.login(user = "username", passwd = "pass")
files = ftp.chdir('/Orders')
files = ftp.list('*.txt')
(0..(files.count-1)).to_a.each do |i|
    ftp.getbinaryfile(files[i].split(' ').last, 'order.txt', 1024)
    # use order.txt to load data to db
end 
```

问题是它在 list 命令处开始出错。任何帮助将不胜感激。如果我遗漏了任何信息，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:28:17.177

Heroku 是一个只读文件系统。所以直接这样做是不可能的。我建议尝试将信息转移到 S3，在那里您可以使用诸如`fog`.

# css - 为禁用的表单元素覆盖 jqm css 样式

> ID：12304073
> 
> 赞同：0
> 
> 时间：2012-09-06T16:05:26.627
> 
> 标签：css, forms, jqmobi

jqm 中禁用表单元素的默认样式使它们难以阅读

我尝试添加一种样式来更改文本颜色，例如。

```
.ui-disabled{
    color: red;
} 
```

这确实改变了文本的颜色（变为浅红色而不是默认颜色），但顶部似乎有一个半透明层，我在 DOM 中找不到？

理想情况下，我只是在寻找一种方法来降低覆盖层的透明度

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:28:13.603

禁用元素的不透明度设置为 .5，因此如果设置 opacity:1 应该没问题

```
.ui-disabled{
    color:red;
    opacity:1 !important;
} 
```

# php - 在 Google 邮件帐户中搜索邮件？

> ID：12304079
> 
> 赞同：1
> 
> 时间：2012-09-06T16:05:50.833
> 
> 标签：php, gmail, google-api

我想在我的 Google 邮件帐户中查找与某个搜索词匹配的邮件。计划是给它一个搜索词并搜索任何邮件主题、发件人和正文。我知道如何浏览所有邮件，并且我确信我可以获得我想要的数据并使用一些正则表达式将其与我的搜索词匹配，但是有更好的方法吗？

也许有一个 API 或我可以使用的更好的东西？我正在用 PHP 做这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:45:56.670

每个 Gmail 帐户都可以通过 IMAP 访问，并且有一个[IMAP PHP 扩展](http://at2.php.net/manual/en/book.imap.php)。但是，Google 为 IMAP 扩展提供了附加功能。文档可以在[这里](https://developers.google.com/google-apps/gmail/imap_extensions)找到。

# z3 - 实现一个模拟字符串 Contains 方法的公式

> ID：12304081
> 
> 赞同：0
> 
> 时间：2012-09-06T16:05:57.930
> 
> 标签：z3, smt

我正在尝试实现 String.Containts 函数。我写了一些简单的测试用例，但是下面的一个（应该返回 UNSAT）返回 SAT。

该测试尝试通过将所有可能的子字符串与想要的字符串（取自 Z3 输出的文本）进行比较来匹配字符串 'abcd' 中的子字符串 'bd'：

```
{(exists ((i Int))
  (let ((a!1 (forall ((k Int))
               (and (>= k i)
                    (<= k (+ i 1))
                    (= (select stringToScan k) (select substring (- k i)))
                    (= (select stringToScan 0) #x0061)
                    (= (select stringToScan 1) #x0062)
                    (= (select stringToScan 2) #x0063)
                    (= (select stringToScan 3) #x0064)
                    (= (select stringToSearch 0) #x0062)
                    (= (select stringToSearch 1) #x0064)))))
    (and (>= i 0)
         (< i 2)
         a!1
         (= (select substring 0) (select stringToSearch 0))
         (= (select substring 1) (select stringToSearch 1)))))} 
```

我尝试了各种实现，但没有任何成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:41:40.957

如果您断言公式，它将返回 UNSAT。

[http://rise4fun.com/Z3/szN](http://rise4fun.com/Z3/szN)

那个部分：

```
(forall ((k Int))
           (and (>= k i)
                (<= k (+ i 1)) ...))) 
```

是错误的，因为您可以将 k 设置为 i + 2 或 i - 1。您可能的意思是写一个暗示而不是连词。有时对字符串使用数组并不是执行编码的最佳方式。自动机工具包（参见：[http](http://rise4fun.com/Rex) ://rise4fun.com/Rex ）使用序列。

# cuda - 如果我使用 Windows RDP 远程访问计算机，我可以在计算机上运行 CUDA 程序吗？

> ID：12304082
> 
> 赞同：6
> 
> 时间：2012-09-06T16:05:59.870
> 
> 标签：cuda

我有一台位于其他地方的服务器。在该服务器上，我计划运行一个程序，以利用该物理机器上支持 CUDA 的图形卡。这个程序与图形无关——它只会将图形卡用于计算数学。

我能在那台机器上运行这个程序吗？如果我使用 Windows 远程桌面登录，程序会识别物理显卡吗？或者服务器甚至不会识别出插入了显卡，因为我正在远程处理？

编辑：我想提一下，所有计算都将远程进行，并且这台机器上的任何内容都取决于我家用 PC 上本地发生的事情。我只是在使用我的家用 PC 来“查看”该服务器上正在发生的事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T16:15:23.457

您不能使用远程桌面运行 CUDA。远程桌面卸载禁用 CUDA 的图形驱动程序。

您需要使用 VNC 或 Splashtop 或其他东西而不是远程桌面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T16:20:01.420

RDP 在 Session 0 中运行——就像服务一样。无法从 Session 0 访问图形驱动程序，因此通常 CUDA 程序将无法工作（因为它们将无法访问底层硬件）。

如果您使用的是 Tesla，您可以将驱动程序置于 Tesla Compute Cluster (TCC) 模式并绕过此问题，因此任何 CUDA 程序都可以在 RDP 上正常工作。

# jquery - 似乎无法在平板电脑上使用 JQuery / jQuery mobile 更改元素的 CSS

> ID：12304086
> 
> 赞同：2
> 
> 时间：2012-09-06T16:06:07.453
> 
> 标签：jquery, jquery-ui, jquery-mobile

单击超链接时，我会更改页面上 DIV 的`left`或`scrollLeft()`值。在我的笔记本电脑（Windows：Firefox、Chrome、Opera、IE）上测试时一切正常，但是当转移到平板电脑（Xoom2）时，一切都不起作用......例如，考虑以下......

```
$('#clickme').live("tap", function(event){
    alert($("#entry_level_phones").scrollLeft()) // the alert outputs a value which is a number so the .scrollLeft() is captured
    $("#entry_level_phones").scrollLeft(500) // nothing happens? This is ignored?
}); 
```

在这个例子中，我可以保证`#clickme`, 这是一个 href 并且`#entry_level_phones`是一个 div 存在。

如果我尝试使用好的旧 JavaScript 来做同样的事情......我会得到相同的结果

```
$('#clickme').live("tap", function(event){
    alert($("#entry_level_phones").scrollLeft()) // the alert outputs a value which is a number
    document.getElementById("entry_level_phones").style.left = 500 + "px" // nothing happends? This is ignored?
}); 
```

即使我尝试更改诸如 CSS 之类的微不足道的`$("#entry_level_phones")`事情，但我可以发出警报、确认或使用窗口对象。有人可以解释为什么吗？

我的项目使用 jQuery、jQuery UI 和 jQuery Mobile。我是否需要刷新页面以更改 css 使用`$.mobile.changePage`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:10:56.467

我会尝试的一种选择是替换`live`为`on`. [在这里](http://api.jquery.com/live/)解释。此外，由于 alert 是一个阻塞调用，请尝试使用 console.log。

# javascript - 在 IE 中创建范围而不选择或突出显示

> ID：12304087
> 
> 赞同：0
> 
> 时间：2012-09-06T16:06:09.100
> 
> 标签：javascript, internet-explorer, replace, highlight, paste

我需要`pasteHTML()`代替未突出显示的文本。我知道如果做类似的事情`mySelectedText.createRange().pasteHTML()`我会得到我想要的但是如何为未选择的文本设置范围？在这种情况下，我唯一拥有的只是光标/插入符号，它位于我想要突出显示和替换的行中。谢谢你的帮助。

**更新：**

```
This is one line.
|This is ano|ther line.| 
```

`|`- 可能的插入符号位置。我需要突出显示插入符号所在的整行。未选择任何文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:53:44.810

我还不确定你真正需要什么。下面的（仅限 IE）代码选择插入符号/选择所在的行，并返回`textRange`包含该行的对象。

```
selectLine = function () {
    var range = document.selection.createRange(),
        origTop = range.offsetTop,
        origHeight = range.boundingHeight;      
    range.moveToElementText(range.parentElement()); 
    while (range.offsetTop !== origTop) {
        range.moveStart('character', 1);
    }
    while (range.boundingHeight !== origHeight) {
        range.moveEnd('character', -1);
    }
    range.select();
    return range;
} 
```

此功能允许插入符号/字符/交叉线选择，并且如果有可用的选择，也适用于不可编辑的元素。

# performance - hbase 过滤器 - 它是否表现良好

> ID：12304088
> 
> 赞同：2
> 
> 时间：2012-09-06T16:06:15.720
> 
> 标签：performance, hbase

在我的例子中，我们为初始查询集定义了行键，我们正在查询行键并单独保留列族和列。

例如。行键类似于：

```
%userid%_%timestamp% 
```

我们正在做一些查询，比如

```
select columnFamily{A,B,C} from userid=blabla and blabla < timestamp < blabla 
```

性能相当不错，因为这就是 hbase 的用途 - 行键查找。

但是由于新要求的建立，我们将需要查询更多字段：列。喜欢：

```
select * from userid=blabla and blabla < timestamp < blabla and A=blabla and B=blabla and c=blabla 
```

我们开始使用 hbase 过滤器。我们在其中一列上尝试了 EqualFilter - A，从功能的角度来看，它工作正常。

考虑到我们拥有的行键，我在这里有一个普遍的担忧，

1.  我们可以继续对所有列 A、B、C 添加过滤器以满足不同的查询需求吗？hbase 查询中添加的过滤器数量是否会降低读取性能？
2.  如果有的话，影响有多大？
3.  有人可以从性能角度向我解释我们应该如何使用最好的 hbase 过滤器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T20:01:08.043

1）我们是否可以继续对所有列 A、B、C 添加过滤器以满足不同的查询需求？hbase 查询中添加的过滤器数量是否会
降低读取性能？

是的，你可以这样做。它会根据数据集的大小和您使用的过滤器影响性能。

2）如果有的话，影响有多大？

返回的数据越少越好。您不想获取不需要的数据。过滤器可帮助您仅返回您需要的数据。

3) 有人可以从性能角度向我解释我们应该如何使用最好的 hbase 过滤器吗？

最好使用过滤器，例如前缀过滤器、与特定值（或限定符、列等）完全匹配的过滤器，或者对数据进行大于/小于类型比较之类的操作。这些类型的过滤器不需要查看每行或表中的所有数据来返回正确的结果。避免使用正则表达式过滤器，因为必须对过滤器正在查看的每条数据执行正则表达式，这可能会对大型数据集造成负担。

此外，HBase 一书的作者 Lars George 提到，人们更多地转向协处理器而不是过滤器。可能还想看看协处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-02T05:41:09.290

1）我们是否可以继续对所有列 A、B、C 添加过滤器以满足不同的查询需求？HBase 查询中添加的过滤器数量是否会降低读取性能？- 是的，您可以为所有列添加过滤器，但如果您存储了大量数据，它肯定会影响查询的性能。尽量避免使用列过滤器，因为无论何时添加任何列过滤器，最终都会增加基于列的比较次数。

2）如果有的话，影响有多大？-Filter 可帮助您减少结果集，因此您只有在获取时才会拥有所需的数据。

3) 有人可以从性能角度向我解释我们应该如何使用最好的 hbase 过滤器吗？- 在 HBase 中 rowFilter（它将包含前缀）是最有效的过滤器，因为它们不需要为此查找所有记录。因此，请制作您的 rowkey，因为它将包含您需要经常查询的组件。-值过滤器是最低效的过滤器，因为它必须比较列的值。-在 HBase 过滤器中，过滤器的顺序很重要，如果您有多个过滤器要添加到过滤器列表中，那么添加的过滤器的顺序将对性能产生影响。我将举例说明如果您需要将三个不同的过滤器添加到查询中。那么当应用第一个过滤器时，下一个过滤器将具有要查询的较小数据，之后对于第三个过滤器也是如此。

因此，尝试首先添加有效的过滤器 ie.rowkey 相关过滤器，然后再添加其他过滤器

# jquery - 使用 jQuery 为棋盘交替黑白颜色

> ID：12304089
> 
> 赞同：0
> 
> 时间：2012-09-06T16:06:19.793
> 
> 标签：jquery

`div`是否可以使用仅带有元素（没有嵌套元素）的jQuery 为棋盘创建交替的黑白颜色，也可以不使用[id 或类名](https://stackoverflow.com/questions/8128581/alternate-row-colors-using-jquery)？

[我在jsfiddle](http://jsfiddle.net/venkateshwar/W7p5F/19/)中创建了一个示例示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:19:48.233

无需更改您的 HTML。

```
$('#mainChessBoard div').each(function(index){
    $(this).css('background-color', (parseInt(index / 8) + index) % 2 == 0 ? 'grey' : '#CCCCCC');
});​ 
```

[http://jsfiddle.net/W7p5F/24/](http://jsfiddle.net/W7p5F/24/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:10:23.583

如果您想使用 jQuery，请在每个 H 列之后添加一个空白 (width: 0) div，以反转新行的奇偶校验。

* * *

更新：我的意思是[这样](http://jsfiddle.net/W7p5F/23/)的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:17:24.973

我不得不稍微更改您的 HTML 和 CSS，但我猜这就是您想要的。它是用 jQuery 中的 :odd 和 :even 选择器完成的

[http://jsfiddle.net/U8kZe/](http://jsfiddle.net/U8kZe/)

我已经将你的 8 个正方形行包裹在另一个 div 中来实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:17:57.543

您当前的 JSfiddle 示例很好（使用 :odd 和 :even 选择器）。但是，我实际上建议对这个特定的 UI 使用表（而不是 DIV）。然后，您可以轻松地将行选择器与 TD（表格数据单元格）选择器组合以交替颜色。

# jmx - 无法创建嵌套的 javax.management.openmbean.CompositeData 对象

> ID：12304090
> 
> 赞同：0
> 
> 时间：2012-09-06T16:06:22.890
> 
> 标签：jmx, mbeans

我知道我可以在 CompositeData 中有 SimpleType 值，例如 SimpleType.INTEGER、SimpleType.STRING。但我想知道如何将 CompositeData 的另一个实例放入 CompositeData。例如：

```
CompositeType type = new CompositeType("My Type", "My Type", new String[]{"item1", "item2"}, new String[]{"item1", "item2"}, new OpenType[]{SimpleType.STRING, SimpleType.STRING});
CompositeData data = new CompositeDataSupport(type, new String[]{"item1", "item2"}, new String[]{"item value 1", "item value 2"});

CompositeType compType = new CompositeType("compData", "compData", new String[]{"compItem1"}, new String[]{"compItem1"}, new OpenType[]{I_DONT_KNOW_WHAT_TO_PUT_HERE});
CompositeData compData = new CompositeDataSupport(compType, new String[]{"compData"}, data); 
```

请参阅上面的“I_DONT_KNOW_WHAT_TO_PUT_HERE”，我不知道如何传递 CompositeData 的 OpenType。我已经看到了一个从 CompositeData 递归获取嵌套 CompositeData 实例的示例。

一些参考资料：

[http://docs.oracle.com/javase/6/docs/api/javax/management/openmbean/CompositeData.html](http://docs.oracle.com/javase/6/docs/api/javax/management/openmbean/CompositeData.html) http://docs.oracle.com/javase/6/docs/api/javax/management/openmbean /CompositeType.html [http://docs.oracle.com/javase/6/docs/api/javax/management/openmbean/OpenType.html](http://docs.oracle.com/javase/6/docs/api/javax/management/openmbean/OpenType.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:01:36.560

**I_DONT_KNOW_WHAT_TO_PUT_HERE**的值是***type***，但代码行 4 的构造函数中的第二个参数应该有字符串“ ***compItem1*** ”，而不是“ ***compData*** ”，因为它代表您在代码行 4 的第三个参数中定义的项目名称。

这是完整的代码：

```
 CompositeType type = new CompositeType("My Type", "My Type", new String[]{"item1", "item2"}, new String[]{"item1", "item2"}, new OpenType[]{SimpleType.STRING, SimpleType.STRING});
    CompositeData data = new CompositeDataSupport(type, new String[]{"item1", "item2"}, new String[]{"item value 1", "item value 2"});

    CompositeType compType = new CompositeType("compData", "compData", new String[]{"compItem1"}, new String[]{"compItem1"}, new OpenType[]{type});
    CompositeData compData = new CompositeDataSupport(compType, new String[]{"compItem1"}, new Object[]{data}); 
```

您是否考虑过使用[MXBeans](http://docs.oracle.com/javase/tutorial/jmx/mbeans/mxbeans.html)？除非您真的需要所有额外的元数据，否则在 JMX 中公开复杂属性是一种更简单（且可维护）的方法。

# c++ - 我的 SendMessage/PostMessage 部分代码有什么问题？

> ID：12304092
> 
> 赞同：1
> 
> 时间：2012-09-06T16:06:25.903
> 
> 标签：c++, python, windows, winapi, pywinauto

我创建了简单的脚本，尝试通过[在此处输入链接描述来](http://www.pokerstove.com/blog/)计算权益：

```
import time
import win32api
import win32con

from pywinauto import application

def getEquity(ps_pid, hand1, hand2):
    def set_hand(handle, hand, kf=0):
        win32api.SendMessage(handle, win32con.WM_SETFOCUS, 0, 0) # f: losefocus
        #win32api.SendMessage(handle, win32con.WM_GETDLGCODE, 0, 0)
        time.sleep(0.05)
        len = win32api.SendMessage(handle, win32con.WM_GETTEXTLENGTH, 0, 0)
        time.sleep(0.05)
        win32api.SendMessage(handle, win32con.EM_SETSEL, 0, len)
        time.sleep(0.05)
        for c in hand:
            win32api.PostMessage(handle, win32con.WM_CHAR, ord(c), 0)
            #win32api.SendMessage(handle, win32con.WM_GETDLGCODE, 0, 0)
            time.sleep(0.05)
        win32api.SendMessage(handle, win32con.WM_KILLFOCUS, 0, 0)

    app = application.Application()
    app.connect_(process=ps_pid)

    set_hand(app.PokerStove.REdit1.handle, hand1)
    set_hand(app.PokerStove.REdit2.handle, hand2)

    app.PokerStove.Evaluate.Click()
    while app.PokerStove.EvaluateButton.WindowText() != 'Evaluate':
        time.sleep(0.1)

    return app.PokerStove.Edit12.GetLine(0)

import sys
print getEquity(int(sys.argv[1]), sys.argv[2], sys.argv[3]) 
```

我决定使用窗口消息而不是 SendKey，因为我需要让它在 PokerStove 最小化时也能正常工作。

当 PokerStove 最小化时，此脚本可以正常工作。但奇怪的事情发生的时候不是。脚本正确填充文本编辑并单击按钮，我得到了正确的结果。但在那之后将他的标题改为奇怪的东西：

![扑克炉](../Images/30014a2e81100c5ed1d947ebfa85da78.png)

所以看起来 PokerStove 仍在计算，但结果已经准备好。由于此更改，当我再次启动脚本时它将失败。但是当 PokerStove 最小化时，我没有这个问题。

我怀疑我在向编辑框发送消息时做错了。因为如果我手动填写它们并单击按钮，那么一切都很好。当我使用`set_hand`函数填充它时，即使我手动单击按钮，我也会得到这个奇怪的结果。

那么我的脚本有什么问题？

**编辑：**

当我将 spy++ 连接到 EvaluateButton 时，我可以看到该按钮仍然收到 WM_SETTEXT 消息，将其设置为“停止（99% 完成）”。

**编辑2：**

它在 Windows 7 上进行了测试。但是在家里的 VirtualBox 代码中的 Windows XP 上运行良好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:39:15.527

你用 . 发送字符`PostMessage`。这个函数是异步的。嗯，关注 SendMessage 的结果可能很奇怪。

# ruby-on-rails - 无法在 Windows Server 2008 R2 / Windows 7 中安装 capybara-webkit

> ID：12304095
> 
> 赞同：1
> 
> 时间：2012-09-06T16:06:33.430
> 
> 标签：ruby-on-rails, windows, installation, capybara-webkit

我需要在安装在 Windows Server 2008 R2 x64 上的 Jenkins 中运行测试，因此在没有“测试”部分的情况下运行 bundle install 的建议不适合这里。

我需要在 Windows 中安装 capybara-webkit。我收到的错误消息一如既往地包括本机扩展：

```
Installing capybara-webkit (0.12.0) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.0 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.0/./gem_make.out 
```

似乎安装了本机 QT 组件（我已经下载了 1,7 GB (!!!) 分发包并安装了它）。增强 PATH 没有帮助。

也安装了 DevKit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T09:47:35.990

错误信息是什么？

您需要所有正确版本的 QT、mingw、更新路径，然后在[https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)中运行所有内容正确的方式...确保您在最后的 pkg 目录中。

请参阅[capybara-webkit (0.8.0) 无法在窗口 7 上构建](https://stackoverflow.com/questions/11480048/capybara-webkit-0-8-0-failed-to-build-on-window-7)

# mysql - 选择查询忽略字段

> ID：12304099
> 
> 赞同：2
> 
> 时间：2012-09-06T16:06:45.477
> 
> 标签：mysql, sql

我有一个名为 test 的表，其中包含以下值。我想获取有多少用户正在使用开放 ID。

```
----+----------+-----------+
| NAME   | PROVIDER | OPERATION |
+--------+----------+-----------+
| Samuel | Google   | P         |
| Samuel | Google   | V         |
| Kannan | Google   | V         |
| George | Google   | V         |
| Bush   | Google   | V         |
| Bush   | Yahoo    | V         |
+--------+----------+-----------+ 
```

询问：`select distinct(Name) from test group by PROVIDER`

结果：

```
+-----------------------+----------+  
| count(distinct(NAME)) | PROVIDER |  
+-----------------------+----------+  
|                     4 | Google   |  
|                     1 | Yahoo    |  
+-----------------------+----------+ 
```

在此查询中，我想忽略PROVIDER的用户操作为**P的计数。**如何在单个查询中执行此操作？

输出应该是

```
+-----------------------+----------+
| count(distinct(NAME)) | PROVIDER |
+-----------------------+----------+
|                     3 | Google   |
|                     1 | Yahoo    |
+-----------------------+----------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:09:23.813

试试这个，

```
SELECT  `Provider`, COUNT(DISTINCT Name)
FROM    tableName
WHERE   NAME NOT IN
            (
                SELECT Name
                FROM tableName
                WHERE Operation = 'P'
            )
GROUP BY Provider 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/51b33/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:08:24.967

```
select count(distinct(Name)) from test where operation != 'P' group by PROVIDER; 
```

# mysql - 是否可以在相邻列中获得结果和行数？

> ID：12304103
> 
> 赞同：1
> 
> 时间：2012-09-06T16:07:01.230
> 
> 标签：mysql, sql, jdbc

`t1`可以说我们是一张桌子

```
>desc t1;
      id     int 
     name    varchar(30) 
```

和

```
>select count(*) from t1;
      count(*)
       10 
```

是否可以将结果获取为

```
id   name   count
1    abc     10
2    def     10
.     .      .
.     .      .
.     .      . 
```

实际结果列`id` `name`和结果查询的计数`count`在同一个结果集中。有可能吗？基本思想是获取结果行计数以及结果，而不必单独查询数据库以获取计数。即使是子查询也很好。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:13:11.593

```
SELECT * FROM t1, (SELECT COUNT(*) AS count FROM t1) t2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:13:24.880

是的，这是可能的。由于 MySQL 优化东西的方式，它也非常有效

```
 SELECT t.*, 
         (select count(*) from t1) as count
    FROM t1 t 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T16:13:17.673

尝试：

```
select id, name, (select count(*) from t1) as cnt from t1; 
```

# c++ - 如何将 strncpy() 转换为 WCHAR

> ID：12304108
> 
> 赞同：2
> 
> 时间：2012-09-06T16:07:13.257
> 
> 标签：c++, c, unicode, strncpy

我得到了一段在多字节字符集下工作的代码。但是，我想将这段代码转换为 UNICODE。所以我修复了很多东西，但在 strncpy() 行失败了。这是我要更改的行：

```
strncpy(a.szTip, szToolTip, bLength); 
```

我使用了很多功能来解决这个问题，但都失败了。

这是错误：

```
strncpy cannot convert parameter 1 from WCHAR[128] to char * 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T16:13:56.360

处理宽字符时，使用[`wcsncpy()`](http://linux.die.net/man/3/wcsncpy)（和其他相关功能）。

正如 Remy Lebeau 指出的那样，`_tcsncpy()`如果您想同时支持 ANSI 和 Unicode 构建（它分别扩展为正确的功能），使用宏会更安全。

# mysql - 在其他列旁边插入值

> ID：12304119
> 
> 赞同：0
> 
> 时间：2012-09-06T16:07:53.903
> 
> 标签：mysql

我需要将值添加到列中。这里的问题是我需要将它插入到列旁边。当我运行插入查询时，

```
INSERT INTO `livemigrationauditingdb`.`system_audit` (
                        `Comp`
                        )
                        VALUES (
                        'standard1'
                        )"); 
```

它显示：

```
---------+---------+
         |standard1|
---------+---------+
  default|         |
---------+---------+
  default|         |
---------+---------+ 
```

我希望它能够显示：

```
---------+---------+
 default |standard1|
---------+---------+
 default |         |
---------+---------+ 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:10:39.193

您想要做的不是插入，而是对现有行的更新。

假设您的表有某种`id`列来标识相应的行，您可以使用`UPDATE`语句（[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/update.html)）：

```
UPDATE `livemigrationauditingdb`.`system_audit` SET `Comp`='standard1' WHERE `id`='identifyingValue'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:16:57.407

您正在使用`INSERT`，因此它正在插入下一行。相反，您应该使用`UPDATE`命令。

假设您要将其设置在相邻列中的特定值旁边，例如`xxx`在 column 中`yyy`。所以你可以这样做：

```
UPDATE `livemigrationauditingdb`.`system_audit`
SET  `Comp` = 'standard1'
WHERE `yyy` = `xxx`; 
```

# objective-c - 如何在 Ubuntu 上使用 Objective-C ParseKit 编译项目？

> ID：12304126
> 
> 赞同：1
> 
> 时间：2012-09-06T16:08:28.553
> 
> 标签：objective-c, ubuntu, compilation, parsekit

我正在开发一个我们将使用 ParseKit 的项目。目前我无法使用 Mac，但想开始对 Ubuntu 上的应用程序进行一些初始测试和解析。

我认为这应该只需要一个控制台应用程序来测试 ParseKit 的一些解析，但也许它比这更复杂。

我已经安装了 GNUstep，并且可以使用 GNUmakefile 编译一个 Objective-C 程序（允许我使用`#import <Foundation/Foundation.h>`所有的“NS”对象）。

是否可以在没有 XCode 的情况下在 Ubuntu 上与 ParseKit 一起编译和运行项目？如果有可能，那么我将如何处理？我是否需要将 ParseKit 源文件移动到特定文件夹或以任何方式更改源？我是否需要在 makefile 中包含所有 ParseKit 文件？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:19:39.473

据我所知，你不能单独使用 GNUstep Foundation 构建 ParseKit，至少不能在没有一些源代码修改的情况下，这可能包括尝试为 CoreFoundation 类型安装 gnustep-corebase。您还需要绕过特定于操作系统的标头，例如 TargetConditionals.h 或 AvailabilityMacros.h。我不确定要使原始源更便携，您需要多少技巧。如果这真的值得，您将不得不编写一个简单的 GNUmakefile，这样您就可以开始编译项目并修复问题。

# php - 将 $ 添加到字符串以使其成为变量

> ID：12304127
> 
> 赞同：0
> 
> 时间：2012-09-06T16:08:31.430
> 
> 标签：php

如何将 $ 符号添加到字符串以使其成为变量？

```
Eg: 
$consumer = array()
$industrial = array()//These 2 are in a separate include file.

$var = $_GET['val'] // value here is 'consumer'

function ('$'.$var,$bar) //I'm trying to make consumer -> $consumer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:10:28.210

不是达到该值的最佳方式，但 PHP 支持：$$var :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:10:30.847

```
$$var 
```

将是你想要的。第二个 $ 表示变量的值应该用作变量的名称。

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)有更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:09:43.687

为什么不只是：

```
if ($_GET['val'] == 'customer') {
    function($bar);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:11:20.060

```
$consumer = array()
$industrial = array()//These 2 are in a separate include file.

$var = $_GET['val'] // value here is 'consumer'

function ($$var,$bar) //I'm trying to make consumer -> $consumer 
```

不要忘记检查 $_GET['val'] 的值是否是您（程序员）期望的值，而不是其他值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T16:25:50.127

只需执行以下操作：

$var = '我的字符串';

${$var} = '输出';

回声 $myString;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T18:02:14.400

好的，这是您绝对应该包括的白名单。

```
$whitelist = array('customer', 'consumer');
$fallback = $whitelist[0];
$var = in_array($whitelist, $_GET['val'] ? $_GET['val'] : $fallback; 
```

# python - 为什么这个 Python RegEx 管道不能同时选择两个 unicode 范围？

> ID：12304128
> 
> 赞同：1
> 
> 时间：2012-09-06T16:08:35.067
> 
> 标签：python, regex, unicode

包含平假名和片假名 unicode 字符的示例字符串：

```
myString = u"Eliminate ひらがな non-alphabetic カタカナ characters" 
```

匹配两个范围的模式，根据： [http ://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml](http://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml)

```
myPattern = u"[\u3041-\u309f]*|[\u30a0-\u30ff]*" 
```

简单的 Python 正则表达式替换函数

```
import re
print re.sub(myPattern, "", myString) 
```

回报：

```
Eliminate  non-alphabetic カタカナ characters 
```

我可以让它工作的唯一方法是如果我分别使用这两个范围，一个接一个。是什么阻止了这个 RegEx 简单地选择 |-pipe 的两侧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:13:02.137

您需要将范围组合成一个字符类，否则它将匹配一个或另一个范围，而不是两者：

```
myPattern = u"[\u3041-\u309f\u30a0-\u30ff]*" 
```

演示：

```
>>> myPattern = u"[\u3041-\u309f\u30a0-\u30ff]*"
>>> print re.sub(myPattern, "", u"Eliminate ひらがな non-alphabetic カタカナ characters")
Eliminate  non-alphabetic  characters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:15:49.340

```
>>> myPattern = u"[\u3041-\u309f]|[\u30a0-\u30ff]"
>>> print re.sub(myPattern, "", myString)
Eliminate  non-alphabetic  characters
>>> 
```

*编辑*您也可以将两个字符类与 OR 运算符结合起来

# javascript - 寻找免费的交互式美国地图，其中包含突出显示的州

> ID：12304129
> 
> 赞同：0
> 
> 时间：2012-09-06T16:08:42.367
> 
> 标签：javascript, asp.net

我正在寻找像这样的免费交互式地图“http://davidlynch.org/projects/maphilight/docs/demo_usa.html”，甚至像这样的“http://www.fusioncharts.com/demos/gallery/#usa -states”第一个我在将 javascript 实现到它会突出显示的位置时遇到了麻烦。我也不是很喜欢这张地图“http://www.fedstats.gov/qf/”。有人可以帮我吗？即使我做了第一个，我也必须调整它的大小以适应所有的坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:50:35.937

[谷歌地理图表](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)并将地区设置为美国

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:49:54.097

地图： [http ://commons.wikimedia.org/wiki/Category:SVG_maps_of_the_United_States](http://commons.wikimedia.org/wiki/Category:SVG_maps_of_the_United_States)

可能有帮助的图书馆（查看地图示例）： [http ://raphaeljs.com/](http://raphaeljs.com/)

# c++ - 使用两个模板参数调用函数

> ID：12304139
> 
> 赞同：1
> 
> 时间：2012-09-06T16:09:36.753
> 
> 标签：c++, templates

我在调用带有两个模板参数的模板函数时遇到问题。

我有一个类，该类接受两种不同类型的对象。我还不知道类型，所以我把它们作为模板参数。然后我将对象存储在包装类中。最后，我希望能够调用带有两个模板参数的模板函数，这需要我的两个对象。但我对如何做到这一点感到困惑。

这是代码的精简版本来解释我的问题。

```
template<typename A, typename B>
void someTemplateFunction(A a, B b);

class Problem
{
  private:
    class WrapperA
    {
      public:
        virtual void doSomething() = 0;
    };

    template<typename A>
    class ConcreteWrapperA : public wrapperA
    {
      private:
        A a;
      public:
        ConcreteWrapperB(A b_) : a(a_) {}
        virtual void doSomething();
    };

    class WrapperB
    {
      public:
        virtual void doSomething() = 0;
    };

    template<typename B>
    class ConcreteWrapperB : public wrapperB
    {
      private:
        B b;
      public:
        ConcreteWrapperB(B b_) : b(b_) {}
        virtual void doSomething();
    };

    WrapperA *a;
    WrapperB *b;

  public:

    template<typename A>
    void setA(A a)
    {
      a = new ConcreteWrapperA<A>(a);
    }

    template<typename B>
    void setB(B b)
    {
      a = new ConcreteWrapperB<B>(b);
    }

    void call_someTemplateFunction(); // ??????? How do i do this?
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:14:27.720

问题是您已经分别对两种类型进行了类型擦除`A`，`B`因此在您的代码翻译中没有任何类型`A`和`B`已知的地方。

如果您可以编写单个函数`template<typename A, typename B> void set(A, B)`，那么您可以在此时捕获对类型`<A, B>`。

或者，是否可以`someTemplateFunction`在不知道两种类型`A`的情况下同时进行操作`B`？

* * *

这是将 C++ 设计为单通道、独立的编译语言的基本问题。

Suppose that your program has three compilation units; `A.cpp` calls `setA` with a range of types `T[A]`, `B.cpp` calls `setB` with another range of types `T[B]`, and `C.cpp` owns the `Problem` object and wants to call `someTemplateFunction`. Then there's no time during compilation when the compiler knows both the range of types in `A.cpp` *and* the range of types in `B.cpp`, so it can't instantiate `someTemplateFunction` with the appropriate cross-product `T[A] x T[B]`.

# .net - 未指定 Source 和 DataContext 时的默认绑定

> ID：12304143
> 
> 赞同：0
> 
> 时间：2012-09-06T16:09:49.513
> 
> 标签：.net, wpf, xaml, data-binding

我试图掌握 WPF 中数据绑定的一些细微差别。我知道可以直接在绑定上指定源（使用`Source`,`RelativeSource`等）或依赖`DataContext`目标对象层次结构中的a ，以便`DataContext`遇到遍历目标祖先的第一个设置值提供任何绑定的源。

我无法解决的是，如果源没有以某种方式设置（即`DataContext`没有在目标祖先的任何地方明确设置并且绑定只指定 a `Path`）会发生什么。

1.  绑定引擎在哪里（如果在任何地方）查找指定的源属性`Path`？
2.  如果在这种情况下绑定失败，为什么我在 VS“输出”窗口中似乎没有任何错误（绑定错误通常显示在这里）？

（.net 4.5，VS 2012 RC，Win 7 32 位）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:15:20.837

发生的事情是您的绑定不绑定到任何东西。这不是绑定错误，因为您不必显式设置 DataContext（它是从逻辑树的其他元素继承的），因此拥有一个等待其 DataContext 设置的控件是完全有效的。

# actionscript-3 - 如何在 Flex 3 中增加水平网格线的粗细

> ID：12304150
> 
> 赞同：2
> 
> 时间：2012-09-06T16:10:09.853
> 
> 标签：actionscript-3, apache-flex, datagrid, flex3

我已将数据网格行之间的水平网格线设置为 true。但我无法增加它的厚度。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:24:23.960

有两种方法可以解决这个问题。如果您查看文档，DataGrid 有一个 Horizo​​ntalSeparatorSkin[样式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DataGrid.html#style%3ahorizontalSeparatorSkin)。文档声明默认情况下这是未定义的，在这种情况下，网格使用它的`drawHorizontalLine()`方法来绘制线条。

因此，您可以将`horizontalSeparatorSkin`样式设置为您自己的扩展`ProgramaticSkin` **或**扩展`DataGrid`该类并覆盖该`drawHorizontalLine()`方法的类。两者都相当容易做到，这里的应用程序每个都有一个示例：

**应用程序**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:local="*"
                layout="vertical"
                creationComplete="onCreationComplete()">
    <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            protected function onCreationComplete():void
            {
                var dp:ArrayCollection= new ArrayCollection([ { label: "one", value: 1 }, { label: "two", value: 2 }, { label: "three", value: 3 } ]);
                grid.dataProvider=dp;
                customGrid.dataProvider=dp;
            }

        ]]>
    </mx:Script>

    <mx:DataGrid id="grid" horizontalGridLines="true" horizontalSeparatorSkin="{HorizontalSeparatorSkin}">
        <mx:columns>
            <mx:DataGridColumn dataField="label" />
            <mx:DataGridColumn dataField="value"/>
        </mx:columns>
    </mx:DataGrid>

    <local:CustomGrid id="customGrid" horizontalGridLines="true" horizontalGridLineColor="#FF0000">
        <local:columns>
            <mx:DataGridColumn dataField="label" />
            <mx:DataGridColumn dataField="value"/>
        </local:columns>
    </local:CustomGrid>
</mx:Application> 
```

程序化皮肤（`HorizontalSeparatorSkin.as`）：

```
package
{
    import flash.display.Graphics;

    import mx.skins.ProgrammaticSkin;

    public class HorizontalSeparatorSkin extends ProgrammaticSkin
    {
        public function HorizontalSeparatorSkin()
        {
            super();
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            // draw a line at the bottom of the rectangle defined by
            // unscaledWidth and unscaledHeight
            var g:Graphics = this.graphics;
            g.clear();
            g.lineStyle(3, 0x00FF00); // change thickness / color here
            g.moveTo(0,unscaledHeight);
            g.lineTo(unscaledWidth, unscaledHeight);
        }
    }
} 
```

自定义网格 ( `CustomGrid.as`)：

```
package
{
    import flash.display.Graphics;
    import flash.display.Sprite;

    import mx.controls.DataGrid;
    import mx.controls.listClasses.ListBaseContentHolder;

    public class CustomGrid extends DataGrid
    {
        public function CustomGrid()
        {
            super();
        }

        override protected function drawHorizontalLine(s:Sprite, rowIndex:int, color:uint, y:Number):void
        {
            var contentHolder:ListBaseContentHolder = s.parent.parent as ListBaseContentHolder;
            var g:Graphics = s.graphics;
            g.lineStyle(3, color); // change the thickness here
            g.moveTo(0, y);
            g.lineTo(contentHolder.width, y);
        }
    }
} 
```

# objective-c - 多个 uitextfields 的字符限制

> ID：12304151
> 
> 赞同：1
> 
> 时间：2012-09-06T16:10:13.693
> 
> 标签：objective-c, textfield

我是一个相当新的程序员，并且遇到了一些 UITextfields 的问题，基本上我有两个文本字段，我想将其中一个中的字符数量限制在一定数量，同时允许另一个字段有很多。

我找到了一个推荐这个的帖子：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

   NSUInteger newLength = [[textField text] length] + [string length] - range.length;
   return (newLength > 2) ? NO : YES;

} 
```

但是，这似乎会影响两个文本字段。我不确定如何定位一个领域。

任何人都可以提供帮助，还有一件事，我知道该代码中发生了什么，直到 - 范围。长度，范围是字符总数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:09:55.710

好的，这里的问题是包含此代码的对象是两个文本字段的委托。两种方法来解决它。要么不添加您不关心长度的文本字段作为委托，要么更好的方法是在`shouldChangeCharactersInRange`方法期间区分字段。

对于您的问题范围的第二部分，是文本字段中正在更改的字符，包括：要更改的字符串的位置，正在更改的字符串的长度。

我个人的偏好是说如果文本长度大于最大长度并且您不删除然后拒绝更改。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    if(textField == self.textfieldYouWantToLimitTheLengthOf){

        if(textField.text.length > 2 && ![string isEqualToString:@""]){

            return NO;
        }
    }
    return YES;
} 
```

# scala - 如何定义添加到 Seq 的特征？

> ID：12304152
> 
> 赞同：-1
> 
> 时间：2012-09-06T16:10:18.923
> 
> 标签：scala

我有一个初学者 Scala 问题。我有一个类，Sample，它扩展了特征 SampleAPI。现在我正在尝试使用 seq 构建一系列 Sample 实例。我会看起来像这样：

```
var samples: Seq[SampleAPI] = Seq()
for(...) {
    samples :+= new Sample(...))
} 
```

这给了我以下编译器错误：“类型不匹配；发现：需要 Seq[java.lang.Object]：Seq[se.uu.medsci.queue.setup.SampleAPI]”

所以我尝试了：

```
samples :+= (new Sample(sampleName, this, illuminaXMLReportReader)).asInstanceOf[SampleAPI] 
```

相反，它会引发运行时异常，表示 Sample 不能对 SampleAPI 感到厌烦。我想这归结为我对 Scala 中使用特征的理解存在问题。任何帮助弄清楚这一点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:52:04.050

编译器错误是否出现在这一行？

```
samples :+= new Sample(...)) 
```

如果是这样，我认为问题在于您的`Sample`课程实际上并没有扩展`SampleAPI`。

发生的事情与Scala 中类型的[逆变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)类型参数有关。`List`如果您以 a 开头`List[SampleAPI]`，然后将 a 添加`Sample`到该列表中，则它需要找到列表中包含的类型的最小上限以用作新的类型参数。如果`Sample`是 a `SampleAPI`，那么最小上界是 just`SampleAPI`并且您得到 a`List[SampleAPI]`作为`:+=`操作的结果。但是，如果`Sample`不是a那么*这*`SampleAPI`两种类型的最小上限是 just `Object`，因此您的编译器错误说它期待 a`Seq[SampleAPI]`但找到了 a `Seq[Object]`。

# javascript - jQuery 完整日历添加事件仅包含月份和日期

> ID：12304154
> 
> 赞同：1
> 
> 时间：2012-09-06T16:10:21.197
> 
> 标签：javascript, jquery, fullcalendar

我正在使用完整的日历，想知道是否可以仅添加带有月份和日期的事件。为了简化我的意思，让我们看一下脚本

```
jQuery("#calendar").fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        events: [
            {
            'title': 'something',
            'start': '2012-09-06'
            }

        ]
    }); 
```

这样一切正常，但我只想在月份和日期的帮助下添加数据=>

```
events: [
    {
    'title': 'something',
    'start': '09-06'
    }               
] 
```

但它不起作用，有什么解决办法吗？请帮助，预先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T05:45:39.483

此代码工作正常，

在变量中分配当前年份：`$date = date("Y");`

连接变量， `$date."-".date("m-d",$birthday["date_of_birth"]);`

而已

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:15:54.133

你不能这样做 - 根据 fullcalendar 文档，日期应该是这样的：

“日期。必填。事件开始的日期/时间。为事件或事件源指定事件对象时，您可以指定 IETF 格式的字符串（例如：“Wed, 18 Oct 2009 13:00:00 EST”），一个字符串ISO8601 格式（例如：“2009-11-05T13:15:30Z”）或 UNIX 时间戳。”

添加重复事件-这是您尝试做的事情，每年同一天的重复事件（例如生日）是[这里](http://code.google.com/p/fullcalendar/issues/detail?id=116)提出并解决给fullcalendar创建者的问题 -他们没有提供使用 fullcalendar 的解决方案 - 建议的解决方案是将日期存储在某处并将新事件绑定到您的数据源，或者在将事件添加到日历之前创建日期的其他方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:28:52.717

1.  您需要创建一个包含所有生日事件的通用事件数组。在这里使用正确的格式 - 比如`'start': '2012-09-06'`
2.  使用`viewDisplay`回调来捕捉视图的变化 - 年复一年。在这里编辑您的原始事件数组以添加日历的当前年份。
3.  然后使用`renderEvent`or`rerenderEvents`方法在日历上呈现这些新事件。

这应该可行 - 理论上。如果您有任何问题，请告诉我。一切顺利！

# c++ - 将命令行拆分为可执行文件和参数

> ID：12304164
> 
> 赞同：2
> 
> 时间：2012-09-06T16:10:43.850
> 
> 标签：c++, string

C ++ 03中将命令行拆分为两个字符串的最佳方法是什么：可执行文件和参数？

例如：

*   `"\"c:\\Program Files\\MyFile.exe\" /a /b /c" => "c:\Program Files\MyFile.exe", "/a /b /c"`

*   `"c:\\Foo\\bar.exe -t \"myfile.txt\"" => "c:\Foo\bar.exe", "-t \"myfile.txt\""`

*   `"baz.exe \"quantum conundrum\"" => "baz.exe", "\"quantum conundrum\""`

一个好的解决方案应该同时处理引号和空格。

升压是可以接受的。

我目前的（工作）解决方案：

```
void split_cmd( const std::string& cmd, 
                std::string* executable, 
                std::string* parameters )
{
    std::string c( cmd );
    size_t exec_end;
    boost::trim_all( c );
    if( c[ 0 ] == '\"' )
    {
        exec_end = c.find_first_of( '\"', 1 );
        if( std::string::npos != exec_end )
        {
            *executable = c.substr( 1, exec_end - 1 );
            *parameters = c.substr( exec_end + 1 );
        }
        else
        {
            *executable = c.substr( 1, exec_end );
            std::string().swap( *parameters );
        }
    }
    else
    {
        exec_end = c.find_first_of( ' ', 0 );
        if( std::string::npos != exec_end )
        {
            *executable = c.substr( 0, exec_end );
            *parameters = c.substr( exec_end + 1 );
        }
        else
        {
            *executable = c.substr( 0, exec_end );
            std::string().swap( *parameters );
        }
    }
} 
```

# c++ - 通过 boost::python 在 C++ Python 扩展中嵌入 Python

> ID：12304165
> 
> 赞同：1
> 
> 时间：2012-09-06T16:10:44.963
> 
> 标签：c++, python, embedding, extending

我有以下场景：自定义 C++ 库应该通过 boost::python 嵌入 Python。这个库应该与不同的包装器静态链接，这些包装器允许该库与 .NET 框架、其他语言以及 Python 本身一起使用。

在包装库以使其最终成为 Python C 扩展的情况下，库本身嵌入 Python 解释器这一事实是否会成为问题？

此外，如果嵌入式 Python 版本与导入扩展的解释器版本不匹配，会产生什么后果？

亲切的问候，丹尼尔

# java - 在 Apache Utils 中读取 CSV 的最佳方式

> ID：12304166
> 
> 赞同：1
> 
> 时间：2012-09-06T16:10:47.273
> 
> 标签：java

CSV 阅读的最佳选择是什么？我知道有一种方法可以使用 super-csv API，java-csv API。但是我的老板要求我提供一个仅由 Apache 组织提供的 API。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:36:46.087

你在原来的问题中说：

> 仅由 Apache 组织提供

[Apache Commons CSV 项目](http://commons.apache.org/csv/)目前位于[Commons Sandbox](http://commons.apache.org/sandbox/)中。

从 Commons CSV 页面：

> 目前没有官方下载，直到 CSV 移出沙盒后才会下载，但可从[http://people.apache.org/builds/commons/nightly/commons-csv/获得每晚构建](http://people.apache.org/builds/commons/nightly/commons-csv/)

我要提到的一个警告是，我在这里找到的最新的夜间版本是 2007 年 7 月 30 日。

99% 的时间我都主张不要重新发明轮子。例如，使用 Apache Commons Lang StringUtils，而不是滚动您自己的字符串实用程序类来检查空白或空字符串。

但是，由于以下事实：

*   Apache Commons CSV 位于沙箱中
*   找不到任何晚于 2007 年 7 月的夜间构建
*   编写自己的 CSV 解析器相对容易

在这种情况下，我建议您自己编写。

如果您只需要读取和解析逗号分隔值文件，您应该能够使用核心 Java IO 和 Util 类来完成此操作而无需太多代码或困难。

您应该能够将 a 包装`java.io.FileReader`在 a 中`java.io.BufferedReader`，逐行读取。

对于每一行，使用 a`java.util.StringTokenizer`分隔逗号。

这是您需要的逻辑，显然您需要处理关闭阅读器、异常处理等。

# java - 来自 HSQLDB 的 Spring JDBC 查询 BETWEEN DATE

> ID：12304167
> 
> 赞同：2
> 
> 时间：2012-09-06T16:10:52.647
> 
> 标签：java, spring, spring-mvc, hsqldb, spring-jdbc

我正在尝试使用**Spring JDBC 3.1.2.RELEASE从****HSQLDB 2.2.8**查询数据，这是语句：

 **```
"SELECT id, account_id, operator_id, amount, currency_type, date
    FROM account_entries WHERE account_id=? AND date BETWEEN DATE '?' AND DATE '?' + 1 DAY" 
```

属性是：

```
1 (java.lang.Integer)
2012-09-06 (java.sql.Date)
2012-09-06 (java.sql.Date) 
```

我收到的错误：

```
PreparedStatementCallback; SQL [SELECT id, account_id, operator_id, amount,
currency_type, date FROM account_entries WHERE account_id=?
AND date BETWEEN DATE '?' AND DATE '?' + 1 DAY]; data exception:
invalid datetime format; nested exception is java.sql.SQLDataException:
data exception: invalid datetime format 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:30:20.333

您必须要么删除日期演员表：

`... date BETWEEN ? AND ? + 1 DAY ...`

或保留它们，但将参数作为格式正确的字符串 (YYYY-MM-DD) 而不是 java.sql.Date 对象传递。**

# python - Ruby 中的函数装饰器，与 Python 中一样

> ID：12304168
> 
> 赞同：3
> 
> 时间：2012-09-06T16:10:55.853
> 
> 标签：python, ruby, function, functional-programming, decorator

有没有办法像在 Python 中那样在 Ruby 中装饰函数？也就是说，在每个函数的开头（和结尾？）执行某些操作。

像这样： http: [//programmingbits.pythonblogs.com/27_programmingbits/archive/50_function_decorators.html](http://programmingbits.pythonblogs.com/27_programmingbits/archive/50_function_decorators.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:38:44.863

如果按功能表示闭包，则可以使用块：

```
def foo
  puts 'before code'

  yield

  puts 'after code'
end

foo { puts 'here is the code' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:23:38.870

该`alias_method`工具可用于实现此效果：

```
alias_method :old_foo, :foo
def foo
  # ... before stuff ...
  r = old_foo
  # ... after stuff ...
  return r
end 
```

在 Ruby on Rails 中，您可以使用`alias_method_chain`它为您做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:42:03.240

Python 的装饰器语法（可能不完全是您要模拟的功能）可以在 ruby​​ 中通过混合一个修改装饰类的方法的模块来实现，如“[使用 Ruby 的 8 行装饰器模式](http://lukeredpath.co.uk/blog/decorator-pattern-with-ruby-in-8-lines.html "8 行 Ruby 装饰器模式")”中简洁描述的那样卢克·雷德帕斯。

# c# - Razor View IsAuthenticated 未按预期工作

> ID：12304170
> 
> 赞同：13
> 
> 时间：2012-09-06T16:11:07.703
> 
> 标签：c#, asp.net-mvc, razor

我创建了一个简单的 MVC 应用程序，它使用了新项目提供的 .Net Membership Provider。

我试图让标签正确显示。我可能不明白这一点，但这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <div id="header">
            <div id="title">
                <h1>Suburban Customer Portal</h1>
            </div>
            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <div id="menucontainer">
              <ul id="menu">

                @if (Request.IsAuthenticated)
                {
                  <li>@Html.ActionLink("ChangePassword", "ChangePassword", "Account")</li>
                }else { 
                  <li>@Html.ActionLink("Logon", "Logon", "Account")</li>
                  <li>@Html.ActionLink("Register", "Register", "Account")</li>
                }

                  <li>@Html.ActionLink("ContactUs", "ContactUs", "Home")</li>
              </ul>
            </div>
        </div>
        <div id="main">
            @RenderBody()
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

在这一行：

```
@if (Request.IsAuthenticated) 
```

我正在尝试显示正确的选项卡是否已通过身份验证。这总是出来的真实...

我应该怎么做？我显然没有以正确的方式做这件事......

再次感谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T16:16:12.100

我认为你应该使用

`@if(User.Identity.IsAuthenticated)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:16:26.497

好吧，你的问题不是很清楚，但是[Request.IsAuthenticated](http://msdn.microsoft.com/en-us/library/system.web.httprequest.isauthenticated%28loband%29.aspx)在这一行：

```
@if(Request.IsAuthenticated) 
```

检查请求是否包含有关经过身份验证的用户的数据。如果为真，将显示您的链接。

在您的特定情况下，`Change Password`仅当用户登录时才会显示链接。

它看起来是正确的。

对于要隐藏的选项卡，也就是说，`Request.IsAuthenticated = false`您必须首先`logout`从用户浏览器中清除存储登录信息的 cookie。

# c++ - 如何重载 * op 以将常量和单个昏暗数组成员相乘

> ID：12304171
> 
> 赞同：0
> 
> 时间：2012-09-06T16:11:11.430
> 
> 标签：c++, operator-overloading

所以，我有一个相当具体的问题，我一生都无法在互联网上的任何地方找到参考。

我想知道如何重载 * 运算符，以便可以在常量和数组的一部分之间相乘。

我的代码，至少是相关的，如果需要更多，我可以发布：

```
 licenseCount licenseCount::operator * (const licenseCount& u) const
    {
        return(this->fxdx*u.fxdx, this->y_array*u.y_array);
    }

    int licenseCount::calc_vol(double z, char *argv[])
    {
        int area;
        std::string y_array[9];

        std::ifstream y_data;

        y_data.open( argv[1] );

        if(y_data.fail())
        {
            std::cout << "Can't open file!\n";
            exit(1);
        }

        else
        {
            for(int i=0; i<=9;i++)
            {
                int temp;
                y_data >> y_array[i];
                std::cout << y_array[i] << '\n';

                if(i%2 == 0)
                {
                    temp = 2 * y_array[i];
                    area += fxdx * temp;
                }
                else if(i = 0)
                {
                   area += fxdx * y_array[i];
                }
                else
                {   
                   temp = 4 * y_array[i];
                   area += fxdx * temp;
                }
                std::cout << area;
            }

        vol = area * depth;

        return vol;
    } 
```

我的错误：

```
licenseCount.cpp:62: error: 'const class licenseCount' has no member named 'y_array'
licenseCount.cpp:62: error: 'const class licenseCount' has no member named 'y_array'
licenseCount.cpp: In member function `int licenseCount::calc_vol(double, char**)':
licenseCount.cpp:90: error: no match for 'operator*' in '2 * y_array[i]'
licenseCount.cpp:91: warning: converting to `int' from `double'
licenseCount.cpp:95: error: no match for 'operator*' in '((licenseCount*)this)-licenseCount::fxdx * y_array[i]'
licenseCount.cpp:98: error: no match for 'operator*' in '4 * y_array[i]'
licenseCount.cpp:99: warning: converting to `int' from `double'
licenseCount.cpp:111: error: a function-definition is not allowed here before '{' token
licenseCount.cpp:113: error: expected `}' at end of input 
```

我在互联网上进行了广泛的搜索，也许我的搜索词有问题，但我使用了我能想到的每一个词组合来试图找到答案。/叹

注意，这是家庭作业，但您的解释/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:50:41.077

看起来您正在尝试通过 u.y_array 表示法访问 y_array，这是一个仅对 calc_vol 本地的变量，该表示法将引用 y_array，类许可证计数的成员，它与 y_array 不同的命名空间您的代码显示了一个声明。

您需要在您的类 licenseCount（等等）中将 y_array 声明为 std::string，而不是在 calc_vol 中。calc_vol 中的错误声明将掩盖 y_array 的正确类内成员声明。稍后与 y_array[i] 的使用将保持不变，除了引用 this->y_array （“this->”将是隐含的）。

在 licenseCount 中使用 this 是多余的，因为类方法可以引用没有“this->”的实例方法。

# jquery - 多部分/表单数据使用什么编码，是否可以使用 JQuery 对数据进行编码？

> ID：12304172
> 
> 赞同：2
> 
> 时间：2012-09-06T16:11:16.517
> 
> 标签：jquery, file-upload, encoding, multipartform-data

我实际上想使用 jQuery 将图片发送到我的服务器而不使用 html 表单。但我想检索与使用编码类型的 html 表单收到的相同数据：

```
multipart/form-data 
```

我使用了 HTML5 FileReader：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

但是当我使用`FileReader.readAsText(Blob|File, opt_encoding)`功能时。我检索到的数据与使用 html 表单编码的数据不同。

“multipart/form-data”使用什么编码，是否可以在将数据发送到我的服务器之前使用 jquery 或 javascript 对数据进行编码？

//编辑

来自 w3schools：[http ://www.w3schools.com/html5/att_form_enctype.asp](http://www.w3schools.com/html5/att_form_enctype.asp)

multipart/form-data ==> 没有字符被编码。当您使用具有文件上传控件的表单时，此值是必需的

我遇到的问题是，当我从 FileReader 检索数据时，它与来自 HTML 表单数据的数据不同。

对于同一张图片：使用 html 表单：

```
\xff\xd8\xff\xe1\x00\x18Exif\x00\x00II*\x00\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xec\x00\x11Ducky\x00\x01\x00\x04\x00\x00\x00U\x00\x00\xff\xe1\x03)http://ns.adobe.com/xap/1.0/\x00<?xpacket begin="\xef\xbb\xbf" id="W5M0MpCehiHzreSzNTczkc9d"?>... 
```

使用 FileReader.readAsText()：

```
\xc3\xbf\xc3\x98\xc3\xbf\xc3\xa1\\u0000\\u0018Exif\\u0000\\u0000II*\\u0000\\b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000\xc3\xbf\xc3\xac\\u0000\\u0011Ducky\\u0000\\u0001\\u0000\\u0004\\u0000\\u0000\\u0000U\\u0000\\u0000\xc3\xbf\xc3\xa1\\u0003)http://ns.adobe.com/xap/1.0/\\u0000<?xpacket begin=\\"\xc3\xaf\xc2\xbb\xc2\xbf\\" id=\\"W5M0MpCehiHzreSzNTczkc9d\\"?> 
```

如何检索相同的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:41:53.840

您应该使用[`FileReader.readAsBinaryString`](https://developer.mozilla.org/en-US/docs/DOM/FileReader#readAsBinaryString%28%29)来获取非文本文件的文件内容。

此外，当您尝试发送将被编码的数据时，为防止这种情况发生，您可以使用[XMLHttpRequest.sendAsBinary](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#sendAsBinary)，它是非标准的，仅在 Gecko(firefox) 中可用。这是一个使用它的polyfill[`Uint8Array`](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Uint8Array)

```
if (!XMLHttpRequest.prototype.sendAsBinary){
    XMLHttpRequest.prototype.sendAsBinary = function(datastr) {
        function byteValue(x) {
            return x.charCodeAt(0) & 0xff;
        }
        var ords = Array.prototype.map.call(datastr, byteValue);
        var ui8a = new Uint8Array(ords);
        this.send(ui8a.buffer);
    }
} 
```

当然这都是微不足道的，因为支持 File Api 和 Uint8Array 的浏览器也支持[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData#append%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:02:40.637

好的，我实际上在测试很多解决方案时找到了答案，而我发现的那个有点奇怪。

实际上，我使用函数将数据以 Base64 格式发送到我的服务器`FileReader.readAsDataURL()`。

然后，我`split(',')`的数据只在我的服务器端获取 Base64 数据我使用解码数据`my_base64_data_decoded = base64.b64decode(my_base64_data_encoded)`

起初，我使用“boto”将这些数据发送到亚马逊，并使用：序列化数据：`cStringIO.StringIO(my_base64_data_decoded)`但它没有用。

我创建了一个字典`my_dict`：

我做到了`my_dict['data'] = base64.b64decode(my_base64_data_encoded)`

然后：`cStringIO.StringIO(my_dict['data'])`它起作用了。

现在我的问题是在插入字典时对数据做了什么处理？

但至少，我找到了答案。

# python - python json到csv转换脚本？

> ID：12304176
> 
> 赞同：1
> 
> 时间：2012-09-06T16:11:23.863
> 
> 标签：python

让我首先声明我是 python 新手。我编写了一个脚本，将 .json 文件转换为 csv 格式。我设法编写了一个脚本来完成这项工作，但是如果要更改 json 文件的格式，我认为我的脚本不会起作用。我的脚本假定 json 文件始终采用相同的格式。

```
<json file example>
 {
"Order":
    {
        "order_id":"8251662",
        "order_date":"2012-08-20 13:17:37",
        "order_date_shipped":"0000-00-00 00:00:00",
        "order_status":"fraudreview",
        "order_ship_firstname":"pam",
        "order_ship_lastname":"Gregorio",
        "order_ship_address1":"1533 E. Dexter St",
        "order_ship_address2":"",
        "order_ship_city":"Covina",
        "order_ship_state":"CA",
        "order_ship_zip":"91746",
        "order_ship_country":"US United States",
        "order_ship_phone":"6268936923",
        "order_ship_email":"pgregorio@brighton.com",
        "order_bill_firstname":"pam",
        "order_bill_lastname":"Gregorio",
        "order_bill_address1":"1533 E. Dexter St",
        "order_bill_address2":"",
        "order_bill_city":"Covina",
        "order_bill_state":"CA",
        "order_bill_zip":"91746",
        "order_bill_country":"US United States",
        "order_bill_phone":"6268936923",
        "order_bill_email":"pgregorio@brighton.com",
        "order_gift_message":"",
        "order_giftwrap":"0",
        "order_gift_charge":"0",
        "order_shipping":"Standard (Within 5-10 Business Days)",
        "order_tax_charge":"62.83",
        "order_tax_shipping":"0",
        "order_tax_rate":"0.0875",
        "order_shipping_charge":"7.5",
        "order_total":"788.33",
        "order_item_count":"12",
        "order_tracking":"",
        "order_carrier":"1"
    },

"Items":
    [
    {
        "item_id":"25379",
        "item_date_shipped":"",
        "item_code":"17345-J3553-J35532",
        "item_quantity":"2","item_taxable":"YES",
        "item_unit_price":"32","item_shipping":"0.67",
        "item_addcharge_price":"0",
        "item_description":" ABC Slide Bracelet: : Size: OS: Silver Sku: J35532",
        "item_quantity_returned":"0",
        "item_quantity_shipped":"0",
        "item_quantity_canceled":"0",
        "item_status":"pending",
        "item_product_id":"17345",
        "item_product_kit_id":"0",
        "item_product_sku":"J35532",
        "item_product_barcode":"881934310775",
        "item_tracking":"",
        "item_carrier":"0",
        "item_source_orderid":""
    },
    {
        "item_id":"25382",
        "item_date_shipped":"",
        "item_code":"17608-J3809-J3809C",
        "item_quantity":"1",
        "item_taxable":"YES",
        "item_unit_price":"22",
        "item_shipping":"0.23",
        "item_addcharge_price":"0",
        "item_description":" \"ABC Starter Bracelet 7 1\/4\"\"\": : Size: OS: Silver Sku: J3809C",
        "item_quantity_returned":"0",
        "item_quantity_shipped":"0",
        "item_quantity_canceled":"0",
        "item_status":"pending",
        "item_product_id":"17608",
        "item_product_kit_id":"0",
        "item_product_sku":"J3809C",
        "item_product_barcode":"881934594175",
        "item_tracking":"",
        "item_carrier":"0",
        "item_source_orderid":""
    },
    {
        "item_id":"25385",
        "item_date_shipped":"",
        "item_code":"17687-J9200-J92000",
        "item_quantity":"2",
        "item_taxable":"YES",
        "item_unit_price":"12",
        "item_shipping":"0.25",
        "item_addcharge_price":"0",
        "item_description":" ABC Cathedral Bead: : Size: OS: Silver Sku: J92000",
        "item_quantity_returned":"0",
        "item_quantity_shipped":"0",
        "item_quantity_canceled":"0",
        "item_status":"pending",
        "item_product_id":"17687",
        "item_product_kit_id":"0",
        "item_product_sku":"J92000",
        "item_product_barcode":"881934602832",
        "item_tracking":"",
        "item_carrier":"0",
        "item_source_orderid":""
    },
    {
        "item_id":"25388",
        "item_date_shipped":"",
        "item_code":"17766-J9240-J92402",
        "item_quantity":"2",
        "item_taxable":"YES",
        "item_unit_price":"22",
        "item_shipping":"0.46",
        "item_addcharge_price":"0",
        "item_description":" ABC Ice Diva Bead: : Size: OS: Silver Sku: J92402",
        "item_quantity_returned":"0",
        "item_quantity_shipped":"0",
        "item_quantity_canceled":"0",
        "item_status":"pending",
        "item_product_id":"17766",
        "item_product_kit_id":"0",
        "item_product_sku":"J92402",
        "item_product_barcode":"881934655838",
        "item_tracking":"",
        "item_carrier":"0",
        "item_source_orderid":""
    },
    ],

"FraudReasons":
    [
    {
        "order_id":"11957",
        "fraud_reason":"order total exceeds max amount"
    },
    {
        "order_id":"11957",
        "fraud_reason":"order exceeds max item count"
    }
]
} 
```

我的脚本目前可以很好地处理这个 json 文件，但是如果只有一个项目或一个欺诈原因，它就不会工作。这是我的脚本的代码。

```
<script code>
#!/usr/bin/python
import simplejson as json
import optparse
import pycurl
import sys
import csv

json_data = open(file)
data = json.load(json_data)
json_data.close()

csv_file = '/tmp/' + str(options.orderId) + '.csv'
orders = data['Order']
items = data['Items']
frauds = data['FraudReasons']

o = csv.writer(open(csv_file, 'w'), lineterminator=',')

o.writerow([orders['order_id'],orders['order_date'],orders['order_date_shipped'],orders['order_status'],orders['order_ship_firstname'],orders['order_ship_lastname'],orders['order_ship_address1'],orders['order_ship_address2'],orders['order_ship_city'],orders['order_ship_state'],orders['order_ship_zip'],orders['order_ship_country'],orders['order_ship_phone'],orders['order_ship_email'],orders['order_bill_firstname'],orders['order_bill_lastname'],orders['order_bill_address1'],orders['order_bill_address2'],orders['order_bill_city'],orders['order_bill_state'],orders['order_bill_zip'],orders['order_bill_country'],orders['order_bill_phone'],orders['order_bill_email'],orders['order_gift_message'],orders['order_giftwrap'],orders['order_gift_charge'],orders['order_shipping'],orders['order_tax_charge'],orders['order_tax_shipping'],orders['order_tax_rate'],orders['order_shipping_charge'],orders['order_total'],orders['order_item_count'],orders['order_tracking'],orders['order_carrier']])

for item in items:
    o.writerow([item['item_id'],item['item_date_shipped'],item['item_code'],item['item_quantity'],item['item_taxable'],item['item_unit_price'],item['item_shipping'],item['item_addcharge_price'],item['item_description'],item['item_quantity_returned'],item['item_quantity_shipped'],item['item_quantity_canceled'],item['item_status'],item['item_product_id'],item['item_product_kit_id'],item['item_product_sku'],item['item_product_barcode'],item['item_tracking'],item['item_carrier'],item['item_source_orderid']])

for fraud in frauds:
    o.writerow([fraud['fraud_reason']],) 
```

我也无法弄清楚如何不使用标签我希望有人可以帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:42:55.687

您可能想使用[csv.DictWriter](http://docs.python.org/library/csv.html?highlight=dictwriter#csv.DictWriter)：

```
 # It's considered best to stash the main logic of your script
    # in a main() function like this.
    def main(filename, options):
        with open(filename) as fi:
            data = json.load(fi)

        csv_file = '/tmp/' + str(options.orderId) + '.csv'
        order = data['Order']
        items = data['Items']
        frauds = data['FraudReasons']

        # Here's one way to keep this maintainable if the JSON
        # format changes, and you don't care too much about the
        # order of the fields...
        orders_fields = sorted(orders.keys())
        item_fields = sorted(items[0].keys()) if items else ()
        fraud_fields = sorted(fraud[0].keys()) if fraud else ()

        csv_options = dict(lineterminator=',')

        with open(csv_file, 'w') as fo:
            o = csv.DictWriter(fo, order_fields, **csv_options)
            o.writeheader()
            o.writerow(orders)

            fo.write('\n')  # Optional, if you want to keep them separated.
            o = csv.DictWriter(fo, item_fields, **csv_options)
            o.writeheader()
            o.writerows(items)

            fo.write('\n')  # Optional, if you want to keep them separated.
            o = csv.DictWriter(fo, fraud_fields, **csv_options)
            o.writeheader()
            o.writerows(frauds)

    # If this script is run from the command line, just run
    # main(). Here's the place to use `optparse`.
    if __name__ == '__main__':
        main(...) # You'll need to fill in the main() arguments... 
```

如果您需要指定字段的顺序，请将它们分配给这样的元组：

```
orders_fields = (
    'order_id',
    'order_date',
    'order_date_shipped',
    # ... etc.
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:52:41.310

您应该向 json 生成的对象 ( `data`) 询问字段的名称。要保留输入顺序，请告诉 json 使用`collections.OrderedDict`而不是 plain `dict`（需要 python 2.7）：

```
import json
from collections import OrderedDict as ordereddict

data = json.loads(open('mydata.json', object_pairs_hook=ordereddict)
orders = data['Order']
print orders.keys()  # Will print the keys in the order they were read 
```

然后，您可以使用with或（更简单） with`orders.keys()`代替硬编码列表。`writerow``csv.DictWriter`

请注意，这使用 default `json`， not `simplejson`，并且需要 python 2.7 作为`ordered_pairs_hook`参数和`OrderedDict`类型。

**编辑：**是的，我从评论中看到你坚持使用 2.4。您可以从 PyPi 下载一个`ordereddict`，您可以扩展[`JSONDecoder`](http://docs.python.org/library/json.html#json.JSONDecoder)该类并使用`cls`参数传递它（请参见[此处](http://docs.python.org/library/json.html#json.load)），而不是`object_pairs_hook`，但这更丑陋且需要更多工作......

# intellij-idea - Intellij 右键单击 测试不显示“运行”选项

> ID：12304177
> 
> 赞同：49
> 
> 时间：2012-09-06T16:11:29.653
> 
> 标签：intellij-idea

在 IntelliJ 中，当我右键单击测试时，我不再看到“运行 ClassX 或 MethodY”。事实上，没有“运行”窗口，当我右键单击时，我无法运行任何类。

大约 3 小时前一切正常，所以我不太确定发生了什么变化？

IntelliJ 10.5.1（许可版而非社区版）Java 1.6.0_24

有没有人可以帮我解决这个问题？PS：所有项目都会发生这种情况。

**更新 1**我安装了 IDEA 11 并从 10 导入设置，然后发现它不是免费升级关闭 IDEA 11 并开始使用 IDEA 10。我相当肯定事情从那时起停止工作，但不确定。那是问题吗？我可以以某种方式删除 IntelliJ 配置目录并重新启动吗？

当我右键单击没有运行选项时添加屏幕截图 ![在此处输入图像描述](../Images/5777766d9963d0483893bfe125653b35.png)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2017-08-29T10:01:26.880

如果您的项目是一个 Maven 项目，那么您只需右键单击 pom.xml 文件并选择“添加为 Maven 项目”。

这种方法对我有用。（绿色加上倒数第三个）

[![在此处输入图像描述](../Images/ab0524de6ede290fb614386ac81dc798.png)](https://i.stack.imgur.com/Q9yNA.png)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-01-17T18:07:02.157

我的问题是我的测试课不是公开的。我需要：

```
public class MyTest {

    @Test
    public void testMethod() { 
```

代替：

```
class MyTest {

    @Test
    void testMethod() { 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-09-30T17:29:23.700

我有同样的问题。为了解决这个问题，我必须确保我的类有一个正确的 main 方法：

```
public static void main(String[] args) {
} 
```

我忘记了我的论点；-)

编辑：确保您的源代码在`src`文件夹中。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-04-20T23:33:06.293

就我而言，原因是禁用了 JUnit 插件。（文件——设置——插件——JUnit，检查，确定）

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-01-20T05:53:39.217

如果您使用的是 JUnit 5 (Jupiter)，当您使用`@Test`JUnit 4 中的旧注释时会发生这种情况。只需替换

```
import org.junit.Test; 
```

和

```
import org.junit.jupiter.api.Test; 
```

IntelliJ 应该再次显示“运行”按钮。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-09-07T16:33:57.653

好的，经过大量观察后，我找到了一个 {HOME}/.java 目录，该目录似乎包含一些与 Jetbrains 相关的首选项。我删除了该目录以及 {HOME}/.IntelliJ* 目录。然后删除了我所有的intellij安装并从头开始重新下载它现在可以正常工作了..

叹....

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-12-21T14:50:53.793

禁用`gradle`插件为我解决了这个问题（社区版 2018.2）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-26T09:27:49.210

在我的情况下，我右键单击 src 文件夹并转到 -> 将目录标记为 -> 源根目录。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-12T09:00:33.090

因为我有同样的问题，我可以清楚地看到当我按下控制键并悬停时@Test 没有提供任何提示，并且同样被确认为外部库没有添加 Gradle 依赖项所以我不得不将项目更新为 gradle启动 Intellij 时弹出的建议项目。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-03T16:02:36.440

应该不需要删除任何配置文件。

我发现我曾经在上下文菜单中有 Run 选项来选择运行测试或运行 Scala 测试等。在我第一次选择一个选项后，我的选项不再存在。

通过按照此处文档中的说明创建运行/调试配置，我能够解决此问题并为该文件夹选择所需的测试类型...

[https://www.jetbrains.com/help/idea/2016.1/creating-run-debug-configuration-for-tests.html?origin=old_help](https://www.jetbrains.com/help/idea/2016.1/creating-run-debug-configuration-for-tests.html?origin=old_help)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-08T12:28:47.640

我有同样的问题。我通过 File -> Invalidate Caches / Restart 右键单击​​顶部 pom.xml -> Maven -> reimport 来解决它 [![在此处输入图像描述](../Images/89e2154e3bf079a8f5a2a56be85c00cb.png)](https://i.stack.imgur.com/fT8RK.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-13T00:27:59.207

不幸的是，这些都不适合我。我不得不

1.  “文件”->“使缓存无效/重新启动”
2.  单击 pom.xml 文件，然后单击“maven”->“生成源” [![maven，生成源](../Images/1bf678816bdeb5561cb7015eca903350.png)](https://i.stack.imgur.com/CGg5m.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-30T21:56:22.297

如果您可以在主功能的左侧看到播放按钮，请单击右键并按运行。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-30T09:54:26.753

就我而言，我没有输出文件夹。文件->项目结构->在“项目”选项卡下有“项目编译器输出”->定义您的文件夹。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-04-30T08:53:24.110

对我来说，这发生在更新 Idea，然后更新所有插件之后。显然Idea还没有重新启动。要去`File -> Settings -> Plugins and clicking 'Restart Idea'`解决问题

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-01-27T14:05:07.090

我可以通过从插件菜单中禁用**Gradle**插件并重新启动来解决此问题。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-11-28T15:35:25.493

我刚刚遇到了同样的问题并通过以下方式解决了它。

转到您的 $USER/$INTELLIJ 目录，例如 $USER/.IdeaC2018.3，然后找到 config/plugins。重命名插件目录并重新启动 IntelliJ。

我的猜测是，当我升级 IntelliJ 并且与黄瓜插件不兼容时导致了问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-29T15:27:39.607

所以我在pycharm上遇到了这个问题，问题是已经有一个运行配置（在播放按钮旁边的下拉菜单中）具有文件名。当我删除该运行配置时，它会创建一个正确的新配置。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-12-10T16:33:18.120

从 2019.2.4 更新后，我在 Intellij 2019.3 上遇到了同样的问题。我以为问题首先来自更新，但是回滚没有解决，所以我尝试了上面的解决方案，问题得到解决。从头开始配置我的所有项目后，问题又回来了，所以我开始检查我所做的一切。我发现来自 Eclipse 的一个旧项目使用文件***.launch***运行并且需要一些插件才能在 Intellij 上执行导致问题，在禁用以下插件后测试选项返回。

[![插件](../Images/c9c06a8d849eccf599583c1935c75b2a.png)](https://i.stack.imgur.com/3I8Td.png)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-06-10T07:52:57.970

搜索**pom.xml**文件 -->***右键单击***​​ pom.xml --> 单击**Add as Maven** Project。

你应该得到一个弹出窗口，说正在下载 Mavin 插件。

[![在此处输入图像描述](../Images/0bf2370e0490a75b99e6f5f6099d2cab.png)](https://i.stack.imgur.com/Y29ME.png)

等它完成。这需要一些时间，具体取决于 pom.xml 中的内容数量。

在下面的屏幕截图中，“ **BackendApp.java** ”是 Driver Java 文件，它包含

> **公共静态 void main(String[] args){}**

右键单击此类驱动程序 java 文件，您会看到绿色的运行选项。

[![在此处输入图像描述](../Images/bc2f3989507853eb5da8dca6e4892819.png)](https://i.stack.imgur.com/83H1V.png)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-20T13:13:37.313

如果项目已经添加为 Maven 项目，请取消链接。

**右键单击项目 -> Maven -> 取消链接 Maven 项目**

然后再次链接：

**右键单击 pom.xml -> + 添加为 Maven 项目**

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-07-23T21:14:55.240

由于这是在尝试弄清楚如何运行 Scala 项目时谷歌的顶级结果，并且由于某种原因 IntelliJ（我在 2020.1.2）不会自动为 Scala 项目创建运行配置（相反Java 项目），值得为未来的读者介绍基础知识：

1.  单击屏幕右上角的“编辑配置”。
2.  在打开的窗口中，单击`+`左上角的按钮。
3.  选择“应用程序”。

现在，让我们浏览必填字段：

4.  在“名称”字段中，输入此配置的名称，例如“运行”。
5.  在“主类”字段中，输入您的主类名称。
    或者，使用`...`左侧的按钮：在打开的窗口中，单击“项目”选项卡，导航到您的主类，选择它并单击“确定”。
    注意：如果您的主类没有 main 方法，IntelliJ 会显示警报。见下面的清单 9。
6.  确保“工作目录”字段中的值正确（它应该是项目文件夹）。
7.  在“使用模块的类路径”中，选择您的模块（请参阅[IntelliJ 中的项目与模块](https://stackoverflow.com/questions/17839461/libraries-projects-modules-and-packages-in-intellij-idea)）
8.  这就是配置。单击“应用”，然后关闭窗口。这是最终结果的示例：

[![在此处输入图像描述](../Images/0052844e8271acc5da7f358fa9ca5070.png)](https://i.stack.imgur.com/4CB2a.png)

*   请注意，我的`Main`课程是名为 的包的一部分`Demo`，但没有必要拥有包。

9.  在主类中，确保有一个主方法。
    请参阅[@Josiah Yoder](https://stackoverflow.com/a/19100245/3002584)对 java 的回答，对于 Scala 它是：

    ```
    def main(args: Array[String]): Unit = {
    } 
    ```

10.  而已。您现在应该启用了绿色的运行和调试按钮。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-08-13T20:34:17.243

我遇到了同样的问题，我尝试了所有上述解决方案，但对我没有任何效果，但是在我安装 TestNG 插件后它开始工作，因为我的单元测试中使用了一些 TestNG 注释

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-02-19T12:23:13.720

就我而言，我的项目正在使用 Bazel。

解决方案是从 Bazel 插件**同步 Bazel 。**

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-13T20:43:36.863

确保方法不是`static`！JUnit 仅允许使用`@Test`实例方法，但 Intellij 不会抱怨，即使您使用`@Test`上述`static`方法。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-02-15T12:27:56.227

似乎插件和 IDEA 本身之间存在版本冲突，通常会破坏此功能。这里的许多解决方案表明人们手动尝试识别插件，我发现这是不可能的。因此，这是一种通用方式，无需像建议的解决方案那样卸载 IDEA：

文件 > 设置 > 插件 > 齿轮图标 > 禁用所有下载的插件

这为我修好了。

# unix - 如何使进程进入“不间断睡眠”？

> ID：12304183
> 
> 赞同：4
> 
> 时间：2012-09-06T16:11:47.907
> 
> 标签：unix, process, signals, coredump

我正在测试一些功能来监控进程，我需要用确定的“延迟”模拟长核心转储（例如，我需要创建一个进程来“转储核心”30 秒）。我注意到转储核心的进程处于不间断睡眠状态，因此不能用 SIGKILL 杀死它，但是当我尝试使用接收 coredump 的管道命令来模拟这种行为时，我可以轻松地杀死这样的进程。那么有没有办法让进程进入不间断的睡眠（在**ps**中具有这样的状态）并让它忽略 SIGKILL？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-31T06:37:11.330

最合适的方法是使用 freezer cgroup。在 FROZEN cgroup 状态的情况下，它将进程置于不间断睡眠状态。

```
# mkdir /sys/fs/cgroup/freezer
# mount -t cgroup -ofreezer freezer /sys/fs/cgroup/freezer
# mkdir /sys/fs/cgroup/freezer/frozen
# echo FROZEN > /sys/fs/cgroup/freezer/frozen/freezer.state
# echo `pidof you_process` > /sys/fs/cgroup/freezer/frozen/tasks 
```

要再次进入可中断睡眠，只需将 cgroup 状态更改为 THAWED。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:54:39.513

要将进程置于可中断睡眠模式，您必须进入内核代码。使用`wake_up_interruptible`自旋锁的功能，您将能够实现这种状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T09:44:30.877

一种可靠（如果复杂）的方法是硬挂载 NFS 目录，然后关闭 NFS 服务器。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-28T15:58:29.047

没有办法阻止 SIGKILL。这就是目的。摆脱流程的大锤方法。SIGKILL 可以阻塞的唯一方法是进程被锁定在内核中。

# objective-c - 如何配置 Xcode 以忽略选择文件中的分析警告？

> ID：12304184
> 
> 赞同：1
> 
> 时间：2012-09-06T16:12:00.510
> 
> 标签：objective-c, xcode, warnings, profile

我知道我可以忽略`-w`Xcode 中给定文件的编译器警告。

我想同样忽略给定文件上的分析警告（在这种情况下为 JSONKit.m，它有两个潜在的泄漏）。我相信那个库的开发者知道他们在做什么，我不想维护它的一个分支。更不用说我不知道​​那里发生了什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:13:18.457

不要相信开发商。找出潜在泄漏存在的原因并修复它们（理想情况下，将补丁发送回开发人员）。

如果你想采取懒惰的方式（j/k;），你可以添加代码来解决分析器下的问题，只使用：

```
#ifdef __clang_analyzer__
... release the offending variable here ...
#endif 
```

与禁用整个文件相比，我更喜欢这种解决方案，因为它既可以通过易于搜索的标识符准确识别问题区域，又允许文件的其余部分由不断改进的分析器进行审查。

# java - Java 序列打印

> ID：12304186
> 
> 赞同：1
> 
> 时间：2012-09-06T16:12:03.357
> 
> 标签：java, sequences

如何在我的编辑器中编写 simpla Java 序列（使用记事本++）？

我熟悉基础知识，但无法在我的 cmd 中打印这个。

`int a = 1; a = a + a; a = a + a; a = a + a; ...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:14:14.873

尝试这个：

```
int a = 1;
for (int i = 0 ; i < MAX_PRINTS ; i++) {
    System.out.println(a);
    a *= 2;
} 
```

或者，如果您想打印直到达到某个值：

```
int a = 1;
while (a <= MAX_VALUE) {
    System.out.println(a);
    a *= 2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:07:25.267

这应该是您正在寻找的。

```
public static void main(String[] args)
{
    int startValue = 1;
    int numberOfAdditions = 10;
    int currentValue = startValue;
    for(int i = 0;i<numberOfAdditions;i++)
    {
        //do opperations here
         currentValue = currentValue+currentValue;
        //print out value
         System.out.println(currentValue);
    }
} 
```

# api - sublime 2 api：列出项目文件夹

> ID：12304188
> 
> 赞同：2
> 
> 时间：2012-09-06T16:12:09.433
> 
> 标签：api, sublimetext2

我正在写一个插件。

在打开的项目中获取每个文件夹路径的“正确”方法是什么？我应该自己打开和解析项目文件吗？

我需要的是 .*sublime-project 中的“文件夹”部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:22:24.573

看起来`view.window().folders()`是我想要的

# spring - @RequestMapping 中的“值”属性是什么意思

> ID：12304191
> 
> 赞同：-1
> 
> 时间：2012-09-06T16:12:30.433
> 
> 标签：spring, spring-mvc

我想知道 org.springframework.web.bind.annotation.RequestMapping 中“value”属性的用途是什么。例如 ：

**@RequestMapping(value="/person/count")**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:15:39.993

这就是调用该方法需要调用的 url - 它是实际的请求映射。

# graphics - 为 Fireworks cs5 中的 html 电子邮件设计的最后状态动画 Gif 在某些客户端中失败

> ID：12304192
> 
> 赞同：0
> 
> 时间：2012-09-06T16:12:42.320
> 
> 标签：graphics, html-email, animated-gif, fireworks

这是我的第二个问题，我希望能解决一个我没有找到解决的问题，尽管我确实在寻找答案。

问题的链接和屏幕截图如下。使用 Fireworks CS5，我创建了一个动画 gif，其中包含 3 个循环 3 次的状态。它建立在图层之上，3 个州只共享一个背景边框。它们不共享背景（背景是由带有白色剪切路径的红色框组成的分组层，这似乎在前两种状态下工作，但在第三状态下失败）本身或任何其他元素。

它是 html 电子通讯的平铺广告，它适用于某些客户端（例如 gmail），但最终状态无法在其他客户端（例如 mac 邮件）中正确呈现。更重要的是，之前在 Mac Mail 中正确呈现了相同的文件。如果我在浏览器中打开它（通常），gif也可以工作。

我认为动画 gif 跨平台非常稳定，除了 Outlook 2007 中的循环问题，我以前从未遇到过这个问题（当然我的经验有限）。有没有其他人有这种经验？有人对这个问题有建议吗？

非常感谢，
安德鲁。

**[链接到善。](http://www.thurmancreekmedia.com/TEMP/macAnimatedDRAFT5.gif)**这是动画 gif 文件。它可能不适用于所有浏览器（我确实彻底测试了文件，但奇怪的问题似乎完全是零星的），但在最新的 Firefox for Mac OS 10.7x 中正确呈现。

**[链接到坏处。](http://www.thurmancreekmedia.com/TEMP/macAnimIssdues.jpg)**第三种状态是透明的，背景层不渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:22:54.347

在优化面板中关闭 Alpha Transparency。仔细检查每个状态后，我意识到我在导出中打开了 Alpha Transparency。即使每个状态都有纯红色背景，即使其他状态正确渲染纯红色背景，Alpha Transparency 还是弄乱了动画的最后一个状态。为了纠正它，我只是关闭了 Alpha Transparency。我不知道为什么我以前没有将其视为解决方案。我希望这个答案对某人有所帮助！

# ios - 如何接收像 Axe iAd 这样的广告

> ID：12304203
> 
> 赞同：0
> 
> 时间：2012-09-06T16:13:24.660
> 
> 标签：ios, iad

请参阅以下链接 [http://www.youtube.com/watch?v=uc5yTo4viwQ](http://www.youtube.com/watch?v=uc5yTo4viwQ)。使用 iAd 制作的精美广告视频。我正在开发一个 PDF 阅读器应用程序，我们正在使用 google Mediation SDK 展示一些广告。我的疑问是我应该怎么做才能显示 Add like 'Axe iAdd' 他们检测到抖动，可以旋转天使等；我应该怎么做才能在我的应用程序中接收该特定添加？目前我正在从 inMoby 获得正常的广告。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:17:44.540

我不是 100% 了解 Google 中介，但在 iAD 中，无法选择您收到的广告。您能做的最好的事情就是为您不想要的广告提供 iAd 关键字。此外，对于 iAd 中的功能，您无需在应用程序中执行任何操作（摇晃等）。这些是广告开发者的职责，不依赖于您应用中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:16:21.297

这是有关在您的应用程序中使用 Apple 的 iAd 广告的文档。那里有很多信息，不仅仅是一个答案可以解决的。您可能需要拥有开发者帐户才能访问此文档。

[在您的 iOS 应用程序中使用 iAd](https://developer.apple.com/iad/resources/)

# python - 在视频教程中重现功能

> ID：12304204
> 
> 赞同：-1
> 
> 时间：2012-09-06T16:13:25.337
> 
> 标签：python, pyqt4

如何在 PyQt4 中执行与[此 youtube 视频教程](http://www.youtube.com/watch?v=icCPY_PvKag&feature=channel&list=UL)中的功能相同的操作。

有一个代码，但我需要按下按钮的数字来写数字`QlineEdit`- 例如在这个计算器中：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        numbers = [ '7', '8', '9',
            '4', '5', '6',
            '1', '2', '3',
                    '*', '0', '#',]
        grid = QtGui.QGridLayout()
        j = 0
        pos = [(0, 0), (0, 1), (0, 2),
                (1, 0), (1, 1), (1, 2),
                (2, 0), (2, 1), (2, 2),
                (3, 0), (3, 1), (3, 2),
              ]
        for i in numbers:
            button = QtGui.QPushButton(i)
            grid.addWidget(button, pos[j][0], pos[j][1])
            j = j + 1
        self.setLayout(grid)   
        self.move(300, 150)
        self.setWindowTitle('Calculator')    
        self.show()

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:03:27.893

您需要将按钮连接到单击事件，这是更新后的代码，其工作方式与该视频类似：)

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from functools import partial
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        numbers = [ '7', '8', '9',
            '4', '5', '6',
            '1', '2', '3',
                    '*', '0', '#',]
        self.vert_lay = QtGui.QVBoxLayout()
        self.dig_out = QtGui.QLineEdit()
        self.vert_lay.addWidget(self.dig_out)
        grid = QtGui.QGridLayout()
        j = 0
        pos = [(0, 0), (0, 1), (0, 2),
                (1, 0), (1, 1), (1, 2),
                (2, 0), (2, 1), (2, 2),
                (3, 0), (3, 1), (3, 2),
              ]
        for i in numbers:
            button = QtGui.QPushButton(i)
            grid.addWidget(button, pos[j][0], pos[j][1])
            j = j + 1
            button.clicked.connect(partial(self.addNumber,i))

        self.vert_lay.addLayout(grid)
        self.setLayout(self.vert_lay)  

        self.move(300, 150)
        self.setWindowTitle('Calculator')    
        self.show()

    def addNumber(self,num):
        current_txt = self.dig_out.text()
        self.dig_out.setText("%s%s" % (current_txt,num))

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# c++ - 使用 Glade 和 gtkmm 对 GTK+ 对象进行内存管理

> ID：12304206
> 
> 赞同：1
> 
> 时间：2012-09-06T16:13:27.217
> 
> 标签：c++, gtk, gnome, glade, gtkmm

我正在使用 C++ 创建一个使用 GTK+ 和 glade 的程序。我担心林间空地创建的对象的内存管理。例如，我创建了一个由一个窗口、一个按钮和两个输入字段组成的 glade 文件。然后在我的 C++ 代码中，我从该文件创建一个对象并获取指向该窗口的指针。我的问题是，完成后是否必须安全地释放窗口对象？如果没有，为什么我不必这样做？下面是我的代码示例...

```
#include <gtkmm.h>
#include "MattWindow.h"

#include <iostream>

using namespace std;

void buttonpush();

int main(int argc, char* argv[])
{
    //This line initializes the GTK+ system
    Gtk::Main kit(argc,argv);

    //Declare a pointer to a window
    Gtk::Window* window = 0;

    try
    {
        //Load the glade file
        Glib::RefPtr<Gtk::Builder> builder = Gtk::Builder::create_from_file("layout.glade");

        Assign window to point to the window object
        builder->get_widget("window1",window);
        window->show();
    }
    catch(Gtk::BuilderError& e)
    {
        cout<<e.what();
    }

    //Start everything up
    Gtk::Main::run();

    //Who destroys the object that window is currently pointing to?

    return 0;
}

void buttonpush()
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:06:39.520

来自[GTK+ 参考手册](http://developer.gnome.org/gtk3/stable/GtkBuilder.html)：

> GtkBuilder 持有对它所构造的所有对象的引用，并在完成时删除这些引用。这种终结可能导致非小部件对象或不包含在顶级窗口中的小部件的破坏。对于由构建器构建的顶层窗口，用户有责任调用 gtk_widget_destroy() 来删除它们以及它们包含的所有小部件。
> 
> 函数 gtk_builder_get_object() 和 gtk_builder_get_objects() 可用于通过在 UI 描述中分配给它们的名称来访问界面中的小部件。这些函数返回的顶层窗口将一直存在，直到用户使用 gtk_widget_destroy() 明确地销毁它们。其他小部件要么是构建器构建的更大层次结构的一部分（在这种情况下，您不必担心它们的生命周期），要么没有父级，在这种情况下，它们必须添加到某个容器中才能使用它们. 非小部件对象需要使用 g_object_ref() 重新引用，以使它们超出构建器的生命周期。

回答您的问题：是的，您应该在完成后手动销毁窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:04:32.743

GTK 小部件是引用计数的。当您关闭或销毁窗口时，它将释放其最后一个引用并被释放。（虽然我相信构建器也有一个参考 - 但应该在构建器被销毁时释放。）

# php - 使用 mysql 数据加载下拉列表

> ID：12304208
> 
> 赞同：0
> 
> 时间：2012-09-06T16:13:48.487
> 
> 标签：php

嗨，这里是新手，非常感谢您在以下问题上的帮助。

我需要制作一个包含 SQL 数据的动态下拉列表。我的数据库有三列，检查起始编号、结束编号和检查叶数。它还有三个数据集，分别在起始校验号 200,310,401 和结束号 205,315,422 和校验叶 6,6,22 下。

我需要包含 200 到 205 和 310 到 315 和 401 到 422 之间的所有数字的下拉列表。

请帮我提供一个示例代码，因为我不知道如何从数据库中提取这些数据。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:58:07.460

这可能会对您有所帮助。

示例代码：

```
 <?php
      $query="select `name`,`age`,`sex` from person;"; //query to extract results from database
      $result=mysql_query($query);
      $row=mysql_fetch_assoc($result);
   ?>
   <select name="dyndrop">
         <option><?php echo $row['name'];?></option>   // Displaying results
         <option><?php echo $row['age'];?></option>
         <option><?php echo $row['sex'];?></option>
   </select> 
```

# logging - Cxf SOAP 日志记录。不同文件中的不同服务

> ID：12304212
> 
> 赞同：0
> 
> 时间：2012-09-06T16:14:00.730
> 
> 标签：logging, soap, cxf

我的问题是我必须使用不同的服务并且： 1\. 在我的 beans.xml 中有这个

```
<cxf:bus >
        <cxf:features>
            <cxf:logging/>
        </cxf:features>

    </cxf:bus> 
```

这在 log4.xml 中：

```
 <logger name="org.apache.cxf" additivity="false">
    <level value="info" />
    <appender-ref ref="sessionSoapFile" />
    <appender-ref ref="console" />
</logger> 
```

我可以从我的所有服务客户之一看到我的控制台只有肥皂。我不明白为什么。可以添加正确声明的写入日志的服务，如下所示：

```
<jaxws:client id="sessionService" address="${session-storage.url}/services/SessionService?wsdl" serviceClass="ru.vtsft.exchange.session.service.SessionService">
    <jaxws:dataBinding>
        <bean class="org.apache.cxf.aegis.databinding.AegisDatabinding" />
    </jaxws:dataBinding>
</jaxws:client> 
```

和不喜欢这样的服务：

```
<bean id="agencyClient" class="comtech.swc.service.AgencyService"
        factory-bean="agencyFactory" factory-method="create" />

    <bean id="agencyFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
        <property name="serviceClass" value="comtech.swc.service.AgencyService" />
        <property name="address" value="${swc.url}/agency" />
        <property name="outInterceptors">
            <list>
                <bean class="org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor" />
                <ref bean="authorizationOutInterceptor" />
                <bean class="ru.vtsft.exchange.cxfinterceptors.DynamicIdOutInterceptor" />
            </list>
        </property>
    </bean> 
```

结果，我想在不同的文件中写入来自不同服务的肥皂日志。谢谢你的建议，对不起我的英语=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:08:47.320

好的，昨晚我收到了！cxf 不会为第二种类型的客户端编写日志，因为我覆盖了他自己的拦截器。解决方案是：

```
<bean id="exchangeFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
        <property name="serviceClass" value="comtech.swc.service.ExchangeService" />
        <property name="address" value="${swc.url}/exchange" />
        <property name="inInterceptors">
            <list>
                <ref bean="loggingInInterceptor" /> <!---- Here -->
            </list>
        </property>
        <property name="outInterceptors">
            <list>
                <ref bean="loggingOutInterceptor" /> <!---- And here -->
                <bean class="org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor" />
                <ref bean="authorizationOutInterceptor" />
                <bean class="ru.vtsft.exchange.cxfinterceptors.DynamicIdOutInterceptor" />
            </list>
        </property>
    </bean>

 <!-- Logging interceptors -->
 <bean id="loggingInInterceptor" class="org.apache.cxf.interceptor.LoggingInInterceptor" />
 <bean id="loggingOutInterceptor" class="org.apache.cxf.interceptor.LoggingOutInterceptor" /> 
```

感谢您的关注=)

# html - Chrome - 找不到图像图标

> ID：12304213
> 
> 赞同：4
> 
> 时间：2012-09-06T16:14:03.353
> 
> 标签：html, css, google-chrome

> **可能重复：**
> [如何在找不到 src 源图像时静默隐藏“找不到图像”图标](https://stackoverflow.com/questions/3235913/how-to-silently-hide-image-not-found-icon-when-src-source-image-is-not-found)

有什么办法可以禁用未找到图像的默认图标？如果 src 给出 404，Chrome 会显示小图标。Firefox 不显示任何内容，我希望在 Chrome 中也一样。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T16:18:53.780

```
<img onerror='this.style.display = "none"'> 
```

或者

您可以使用`onerror`JavaScript 中的事件在图像加载失败时采取行动：

```
var img = document.getElementById("myImg");
img.onerror = function () { 
    this.style.display = "none";
} 
```

在 jQuery 中：

```
$("#myImg").error(function () { 
    $(this).hide(); 
}); 
```

或者对于所有图像：

```
$("img").error(function () { 
    $(this).hide();
    // or $(this).css({visibility:"hidden"}); 
}); 
```

如果隐藏图像可能会改变布局，您应该使用`visibility: hidden`而不是。`.hide()`Web 上的许多站点都使用默认的“无图像”图像，`src`当指定的图像位置不可用时，将属性指向该图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:19:56.267

有一个使用 htaccess 的小解决方案。如果找不到图片，您必须重定向到 1x1 透明 png。唯一的缺点是，如果您明确定义图像的宽度和高度，图像仍将占据应有的位置。但什么都不会被看到。

# sql-server - 一组挑战

> ID：12304215
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:10.220
> 
> 标签：sql-server

假设我有这张桌子`MyTbl`

```
Record    Id_try   Id        Type IsOk DateOk
1         1        MYDB00125  A     0   NULL
2         1        MYDB00125  B     1   2012-07-19 20:10:05.000
3         1        MYDB00125  A     0   2012-07-25 14:10:05.000
4         2        MYDB00125  A     0   2012-07-19 22:10:05.000
5         1        MYDB00254  B     0   2012-07-19 22:10:05.000
6         1        MYDB00254  A     0   NULL
7         3        MYDB00125  A     1   2012-07-19 22:15:05.000
8         3        MYDB00125  B     1   2012-07-19 22:42:53.000
9         1        MYDB00323  A     1   2012-07-22 00:15:05.00 0
10        1        MYDB00323  C     0   NULL 
```

*我想要一个小组，为我的每一个`Id`和`Type`我的最后一个“`Id_Try`记录”带来。*

```
SELECT Id, MAX(Id_Try), MyTbl.Type, IsOK, MAX(DateOk) from MyTbl
GROUP BY Id, MyTbl.Type, IsOK 
```

不会，因为它会给我带来最后一个 Id_Try**和**最后一个日期（*示例中的记录日期 3*）。而且我不在乎它是否是最后一个日期，我需要最后一个 Id_Try 的日期。

这只能通过子选择解决吗？或者有条款可以做吗？

这是预期的结果：

```
Record    Id_try   Id        Type IsOk DateOk
5         1        MYDB00254  B     0   2012-07-19 22:10:05.000
6         1        MYDB00254  A     0   NULL
7         3        MYDB00125  A     1   2012-07-19 22:15:05.000
8         3        MYDB00125  B     1   2012-07-19 22:42:53.000
9         1        MYDB00323  A     1   2012-07-22 00:15:05.00 0
10        1        MYDB00323  B     0   NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:53:16.030

希望这可以帮助。

```
SELECT  A.Record, A.Id_try, A.Id, A.Type, A.IsOk, A.DateOk
FROM    MyTbl A INNER JOIN (
        SELECT MAX(Id_Try) Id_Try, Id, B1.Type 
        from MyTbl B1
        GROUP BY Id, B1.Type) AS B 
ON A.Id_Try = B.Id_Try AND A.Id = B.Id AND A.Type = B.Type
ORDER BY A.RECORD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:24:35.470

我认为您需要将其分为两部分：

```
with maxIDTry as
(
   SELECT MAX(Id_try) as maxId, ID
   FROM MyTable
   GROUP BY ID
)
SELECT * FROM MyTable as mt
INNER JOIN maxIDTry as max
ON mt.id_try = max.maxId AND mt.id = max.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:42:24.423

我想你想要这个：

```
select * FROM 
 (
   select *, row_number() over (partition by id,type order by Id_try desc) as position from mytbl
) foo 
where position = 1
order by record 
```

[http://www.sqlfiddle.com/#!3/95742/5](http://www.sqlfiddle.com/#!3/95742/5)

您的样本结果集列表

```
9         1        MYDB00323  A     1   2012-07-22 00:15:05.00 0
10        1        MYDB00323  A     0   NULL 
```

但这没有意义，因为您说 ID*和*Id_try 具有相同的值。我假设您的意思是 Id_try 可能是 2？否则我认为我的结果匹配。

# javascript - WebSocket onmessage 未触发

> ID：12304216
> 
> 赞同：2
> 
> 时间：2012-09-06T16:14:12.213
> 
> 标签：javascript, python, websocket

我正在尝试实现我自己的 websocket 服务器，并且在 JavaScript 中的 onmessage 函数中遇到了一些麻烦。就是不会火！我在其中设置了一个警报，以便在它被调用时触发，并且警报永远不会出现。我在firefox和chrome上都试过了，都无济于事。

据我所知，我的服务器也在发送正确的消息，当我将其转换为十六进制时，它与此处文档第 5.7 节中的示例完美匹配：

[http://datatracker.ietf.org/doc/rfc6455/?include_text=1](http://datatracker.ietf.org/doc/rfc6455/?include_text=1)

所以我不完全确定我做错了什么。握手工作正常，关闭也是如此。这是我当前发送消息的代码：

```
formatted_bytes = []
formatted_bytes.append( 129 )

message_bytes = bytearray( message )

data_start = 0

if ( len( message_bytes ) <= 125 ):
    formatted_bytes.append( len( message_bytes ) )
    start = 2

for byte in message_bytes:
    formatted_bytes.append( byte )

client_socket.send( bytes( formatted_bytes ) ) 
```

服务器是用python写的，忘了说。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:44:39.300

**这与您的其他问题的答案相同：[Compressed bit must be 0 when sent a message to websocket client](https://stackoverflow.com/questions/12308728/compressed-bit-must-be-0-when-sending-a-message-to-websocket-client)**

您的问题是您`bytes`在 python 2.X 中使用该函数，但希望它能够像在 python 3.X 中那样工作

python2.6.6：

```
>>> bytes([129, 19])
'[129, 19]' 
```

蟒蛇3：

```
>>> bytes([129, 19])
b'\x81\x13' 
```

通过在您的服务器代码中将 send 替换为以下内容，它在 python2.X 中对我有用：

```
client_socket.send( "".join( [chr(c) for c in formatted_bytes] ) 
```

其他几点注意事项：

*   您链接到的代码将消息长度加 1，这是不正确的。

*   您确实应该将握手代码与正常的消息解析代码分开。如果有人碰巧发送了一条包含“Sec-WebSocket-Key:”的消息，你最终会通过再次发送原始握手来破坏流。

# c# - 检查相册中是否存在文件

> ID：12304217
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:12.510
> 
> 标签：c#, .net, windows-phone-7

我正在研究简单的图像处理程序。我目前处于必须保存图像的阶段：我现在正在做类似的事情： [外部来源](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769549%28v=vs.92%29.aspx)

但有一个问题。每次我想保存图像时，我都会覆盖以前的图像。如何检查相册“已保存图片”中是否存在文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:20:17.353

假设您知道文件名，您可以使用如下内容：

```
using (var ml = new MediaLibrary())
{
    using (var pics = ml.SavedPictures)
    {
        using (var img = pics.LastOrDefault(pic => pic.Name == FILENAME))
        {
            if (img == null)
            {
                // file doesn't exist
            }
            else
            {
                // file does exist
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T07:27:21.087

试试这个。在pictureAlbum 中查找文件

```
using (var library = new MediaLibrary())
{
   var appFolder = library.RootPictureAlbum.Albums.FirstOrDefault(al => al.Name == "folderName");
    if (appFolder != null && appFolder.Pictures.Count > 0)
    {
        var file = appFolder.Pictures.FirstOrDefault(pc => pc.Name == ("fileName"));
        if (file == null)
        {
            // file doesn't exist
        }
        else
        {
            // file does exist
        }
    }
} 
```

# three.js - Three.js 粒子系统作为背景被强制落后于其他对象？

> ID：12304221
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:30.407
> 
> 标签：three.js, particle-system

我有一个粒子系统，我用它来生成背景星星——我让它用相机跟踪位置，但有时，星星会渲染得比它们作为背景的物体更近。

有没有办法强制粒子系统始终在我的场景中的其他网格后面渲染（几乎作为背景壁纸 - 但随着旋转移动）？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:51:03.320

这相对容易。

*   使用 autoclear = false 创建渲染器
*   使用 renderer.clear() 清除渲染；
*   将您的粒子系统渲染为单独的场景
*   使用 renderer.clear(false, true, false) 清除渲染的深度；
*   然后渲染所有其他对象。

瞧，你有一个粒子系统，它总是在幕后。

[http://jsfiddle.net/vuQ9R/10/](http://jsfiddle.net/vuQ9R/10/)

# c++ - c 库版本的 igraph vs.select() 函数

> ID：12304222
> 
> 赞同：0
> 
> 时间：2012-09-06T16:14:32.870
> 
> 标签：c++, python, select, igraph

在 igraph 的 python 库中，可以根据节点的属性搜索节点的 ID

```
seqIDs = myGraph.vs.select(attribute1, attribute2) 
```

对于 igraph 的 c 库版本，是否有这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:00:50.487

不，没有，而且在不久的将来也不太可能有——成本（开发时间）远远超过收益，特别是因为大多数 igraph 用户使用更高级别的接口之一并且不与C核心直接。

*免责声明*：我是 igraph 的作者之一。

# html - 使垂直堆叠在容器内的 div 具有相同的宽度

> ID：12304223
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:34.133
> 
> 标签：html, css

我有一个容器 div，它有四个垂直堆叠的 div。这些 div 中的每一个都包含文本和页面加载时的更改。我正在尝试设置四个堆叠 div 的样式，以便我可以根据它们是奇数行还是偶数行来更改它们的背景。

我可以做到这一点，但我需要堆叠的 div 与容器一样宽。

```
<ul class="level2">
<li><div class="subCatodd"><a href="cPath=8">Clothes</a></div></li>
<li><div class="subCateven"><a href="cPath=9">Hats</a></div></li>
<li><div class="subCatodd"><a href="cPath=10">kitchen</a></div></li>
</ul> 
```

我无法让 subCatodd/subCateven div 填充 ul 的宽度

谁能帮我吗？

编辑：继承人我拥有的CSS（应该已经发布了对不起）

```
div#dropMenu ul.level2 {-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;background-image:url(../images/dropdownbg.gif); background-repeat:repeat-x;padding:8px 0px; background-color:#7b631d;font-size:13px;white-space: nowrap;}
div#dropMenu ul.level2 a {color: white;}  /* this is text color on drop-down submenu */
div#dropMenu ul.level2 a:hover {color:#e0e211;}
.subCatodd{background-color:#7b631d;padding:10px 25px 10px 25px;}
.subCateven {background-color:#665011;padding:10px 25px 10px 25px;}
div#dropMenu ul.level2 {top: 50px;z-index:1000;} 
```

**第二次编辑：** 这是我的确切代码，如果有人能完成这项工作，我将非常感激 [http://jsfiddle.net/3fazn/2/](http://jsfiddle.net/3fazn/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:23:02.930

如果`css`为奇数创建一个子选择器会更好`divs`（如下文提到的 jsFiddle 所示）。

看看这个 jsFiddle：http: [//jsfiddle.net/SsM4V/12/](http://jsfiddle.net/SsM4V/12/)

这是你想要的？

**编辑：**评论后修改了jsFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:19:17.503

只是浮动你的 ul 容器怎么样，所以它包裹了所包含内容的宽度：

```
ul { float:left; }
.subCatodd { background:#bdb; }
.subCateven { background:#dbd; } 
```

这是一个要演示的[小提琴（](http://jsfiddle.net/xzHAU/1/)**编辑**：我已经更新了小提琴以使用您的 css）。

或者，您可以将显示设置为包含 ul 的内联块，只要知道它在 IE7 中不起作用，因为默认情况下 ul 不是内联的。这是该版本的[小提琴](http://jsfiddle.net/xzHAU/2/)。

**编辑**：这是最新版本-我在评论中添加了我在下面提到的子选择器，并从您使用的类中删除了宽度值到斑马条纹-这是您要实现的目标：[http://jsfiddle .net/3fazn/7/](http://jsfiddle.net/3fazn/7/)

# php - 处理具有未知换行位置的文本文件

> ID：12304224
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:37.513
> 
> 标签：php, mysql, file, text, newline

我的问题很简单：我有一个文本文件，我处理并插入数据库中的所有数据，并为每个新行处理它。问题是文本文件是在我的网关中接收到的短信的日志，并且根据正在发送的文本，我将有一行对应于每个短信。如果 SMS 在其正文中没有任何新行，则一切正常，另一方面，如果 SMS 是这样发送的：

```
"Test 
TestOnANewLine" 
```

我得到一个日志文件，每次都会中断并换行。示例如下：

```
2012-01-01 10:10:10,4C64DCD6.req,192.168.999.999,+12223334444,OK -- SMPP - 999.999.999.999:9999,SubmitUser=user;Sender=sender;SMSCMsgId=999999999;Text="Test1
NewLineTest
AnotherNEwLineTEst" 
```

日志文件解释如下：

```
date time, smsid, ip that processed it, number that is being sent to, status --connection type - ip that is sent from, user that submitted; sender name that is displayed; sms connection id; body of the sms 
```

至于我使用 PHP 的语言和使用的函数，它很简单

```
 foreach($lines as $line)
        {    explode and do stuff   } 
```

我该如何处理这种情况？在这一点上，任何帮助表示赞赏

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:56:11.623

[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)可以处理包含在 '"' 中的换行符，但是在正文中添加一个额外的 '"' 字符会失败......

那么一些不负责任的[正则表达式](http://de.php.net/manual/en/function.preg-match-all.php)使用呢？

```
preg_match_all(#^(\d{4}-\d{2}-\d{2}[^,]+),([^,]+),([^,]+),([^,]+),([^,]+),SubmitUser=([^;])+;Sender=([^;])+;SMSCMsgId=([^;])+;Text="([\w\d\s\.\-,:;'"]+)"$#im', $file, $matches); 
```

应该做的工作，不是太疯狂的文本，也许你应该把 \w\d\s.-,:;'" 表达更多地满足你的需要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:53:39.617

首先，感谢您的所有反馈，这真的很宝贵，它帮助我解决了这个问题。此外，对于所有将浏览这篇文章并希望在这里找到解决方案的人来说，这是我的：

我将解释行尾的方式`/r/n`从常规行更改为`/r/n2`这意味着当且仅当有一个常规的新行`/r/n`并且在新的物理行上有一个`2`（即年初）

实际解决的部分是：

```
$data = file_get_contents($backup_file);
$lines=explode("\r\n2",$data);
foreach($lines as $line)
{
  //explode and do stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:36:09.057

尝试此操作以将所有日志条目标准化为每个日志条目的单个数组项（即，将多个换行符的条目组合成一个条目）

```
$line_array = file('/path/to/file');
$log_array = array();

$i = -1;
$date_pattern = '/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}/';
foreach ($line_array as $line) {
    if (1 === preg_match($date_pattern, $line)) {
        // this is a new log entry
        // let's trim the whitespace from the end of the last log array entry since we are done with it 
        if(isset($log_array[$i])) {
            $log_array[$i] = rtrim($log_array[$i]);
        }

        // start a new log array entry
        $i++;
        $log_array[$i] = $line;
    } else {
        // this is not a new log entry
        $log_array[$i] .= $line;
    }
} 
```

之后，您应该能够`$log_array`提取所需的数据。顺便说一句，我应该注意，当您循环遍历`$log_array`. 首先提取味精文本可能会有所帮助。如果您`preg_match`对双引号进行了贪婪，那么在其中包含引号的消息应该没有任何问题，因为贪婪匹配会找到最大可能的匹配字符串，在您的情况下，这将是限制消息内容的引号之间的所有内容.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T16:21:22.147

在可以从中解析日期之前，您不能循环遍历换行符吗？也许考虑到前一行以双引号结尾？

我知道它不是万无一失的，但没有一些可识别的“消息结束”字符。这是我能想到的最好的：P

# asp.net-mvc-4 - 不正确的重定向 mvc4

> ID：12304225
> 
> 赞同：1
> 
> 时间：2012-09-06T16:14:40.087
> 
> 标签：asp.net-mvc-4

我是 mvc 的新手。

我正在使用 mvc4 移动模板开发 Web 应用程序。

我有控制器说：

> **控制器1**

和两种类型的动作

> （获取，发布）：action1，action2，action3

现在，假设我当前的 URL：**http://localhost:12345/controller1/action1** 并且我单击按钮调用其发布操作，代码正确执行

```
 [HttpPost]
 [ActionName("action1")]
 public ActionResult action1_post()
 {
     //some code here
     return RedirectToAction("action2","controller2");
 } 
```

但是在浏览器中，它仍然显示这个 URL：**http://localhost:12345/controller1/action1**

这个看不懂。。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:51:36.027

您必须将 ActionName 更改为其他内容。这就是它在 url 中仍然显示为**action1的原因。**如果您将其更改为**action1post**，那么它应该会更改。例如：

```
[HttpPost]
[ActionName("action1post")]
 public ActionResult action1_post() 
```

# javascript - 在 Javascript (jquery) 中，有没有办法检测页面锚点何时更改？

> ID：12304230
> 
> 赞同：3
> 
> 时间：2012-09-06T16:15:16.223
> 
> 标签：javascript, jquery

基本上，我希望在整个页面中都有链接来更改锚点——# 符号之后的 URL 部分。当 URL 的那部分发生变化时，JavaScript 应该做出响应。

我可以为每个链接添加一个 onclick 方法，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:18:22.853

那不是锚，是哈希？

```
$(window).on('hashchange', function() {
    alert('My fracking hash changed to : '+document.location.hash);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:19:14.003

```
$(window).bind('hashchange', function() {
  // code here
}); 
```

认为应该这样做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:18:04.063

在 jQuery 中，您不需要将 onclick 事件添加到所有单独的链接。使用像这样的选择器，`$('a')`您可以一次将事件添加到所有链接。

```
$('a').click(function(){
    // code here
}); 
```

在此事件中，您可以使用该`$(this)`对象来获取`href`.

但我建议其他答案向您展示解决此问题的更优雅的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:23:07.863

[Sammy.js](http://sammyjs.org/)是你的朋友。我已经在我正在研究的 SPA 上使用它，我喜欢它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T16:20:56.693

首先，您必须选择元素。

例如 var links = $("a");

然后添加 jquery 函数 .click()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T16:20:56.570

您可以将[委托](http://api.jquery.com/delegate/)添加到`a`,

$(元素).on(事件、选择器、数据、处理程序);

不同的是它不会`onClick`在每个`a`元素中添加“”，但它会捕获“ `onClick`”事件`a`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T16:21:17.183

尝试这个

1.  存储`window.location.hash`在一个全局变量上，比如说，`currentHash`
2.  创建一个函数来检查`window.location.hash !== currentHash`
3.  如果检查失败设置`currentHash = window.location.hash`
4.  `setInterval`使用on执行此功能`DOMReady`

# google-app-engine - 使用 Go 的 App 脚本 appengine 教程

> ID：12304239
> 
> 赞同：0
> 
> 时间：2012-09-06T16:15:48.440
> 
> 标签：google-app-engine, go, google-apps-script

在 Apps Script/Appengine 的教程中：

[https://developers.google.com/apps-script/articles/appengine](https://developers.google.com/apps-script/articles/appengine)

尝试运行`google_appengine/dev_appserver.py google-apps-script/`时响应是：

```
WARNING  2012-09-06 14:56:33,570 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
INFO     2012-09-06 14:56:33,840 appengine_rpc.py:163] Server: appengine.google.com
CRITICAL 2012-09-06 14:56:33,842 appcfg.py:561] The api_version specified in app.yaml (1) is not supported by this release of the SDK.  The supported api_versions are ['3', 'go1']. 
```

我尝试了以下 app.yaml，但它不起作用。

```
application: google-apps-script-tutorial
version: 1
runtime: go
api_version: go1

handlers:
- url: /*
  script: _go_app 
```

也与`- url: /rpc`它不工作。由于代码是 Python，是否可以在应用引擎中获取 App 脚本和 Go 链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:33:33.087

该教程的代码使用 Python 和 Javascript。如果要使用 go 运行时，则必须在 Go 中重写 Python 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T12:38:40.027

该示例演示了将[Google Apps 脚本](https://developers.google.com/apps-script/)前端与用[Python编写的](http://python.org/)[Google App Engine (GAE)](https://developers.google.com/appengine/)后端结合使用。GAE 目前运行用[Java](https://developers.google.com/appengine/docs/java/)、[Python](https://developers.google.com/appengine/docs/python/)、[Go](https://developers.google.com/appengine/docs/go/)和[PHP](https://developers.google.com/appengine/docs/php/)编写的应用程序。

该特定 Python 后端接受并生成[JSON 格式](http://www.json.org/)的消息。因此，要以类似方式链接 Apps Script 和 Go，无论是否使用 GAE，您都需要使用可能的[net/http](http://golang.org/pkg/net/http/)库和[encoding/json](http://golang.org/pkg/encoding/json/)库来复制 Python 后端的功能。

有关一起使用这些库的示例，请查看[this](http://blog.golang.org/json-and-go)、[this](http://golang.org/doc/articles/json_and_go.html)和[this](http://nesv.blogspot.com.au/2012/09/super-easy-json-http-responses-in-go.html)。

有关在 GAE 中使用 Go 的示例，请查看[this](http://blog.golang.org/the-app-engine-sdk-and-workspaces-gopath)和[this](https://gist.github.com/chrishamant/1075842)。

希望有帮助。

# jquery - Uncaught SyntaxError: Unexpected token e

> ID：12304241
> 
> 赞同：6
> 
> 时间：2012-09-06T16:16:07.793
> 
> 标签：jquery, json, jsf, primefaces

我新收到未捕获的语法错误，唯一的补充是从服务器向客户端发送/检索 json 数据。如何调查它是什么？下面是屏幕截图![在此处输入图像描述](../Images/37cc4bf8acae0e583beb15a97dac8345.png)

有时我在谷歌浏览器中收到以下错误。 ![在此处输入图像描述](../Images/a1f8474b0d6df87bb7e748dfacff48e7.png)

在我们收到此错误之前，下面有我最近更新到我的代码的详细信息。

## Java 脚本

```
// Post the topic in the post section
     function  updatePost(xhr, status,jsonData){
                    var args = $.parseJSON(jsonData); 
```

## 在发送到客户端之前从服务器日志打印的数据

```
10:20:15,101 INFO  [stdout] (http--127.0.0.1-8080-14)  Printing json data  {

10:20:15,102 INFO  [stdout] (http--127.0.0.1-8080-14)   "topic_username" : "srikanth marni",

10:20:15,102 INFO  [stdout] (http--127.0.0.1-8080-14)   "topic_lstUpdate" : "2012-09-06 10:20:15.025",

10:20:15,103 INFO  [stdout] (http--127.0.0.1-8080-14)   "topic_body" : "Whats up",

10:20:15,104 INFO  [stdout] (http--127.0.0.1-8080-14)   "isValid" : "true"

10:20:15,105 INFO  [stdout] (http--127.0.0.1-8080-14) } 
```

## 创建 Json 对象的服务器代码

```
stringWriter = new StringWriter();
                // jfactory.createJsonGenerator(writer, JsonEncoding.UTF8);
                jGenerator = jfactory.createJsonGenerator(stringWriter);

                jGenerator.useDefaultPrettyPrinter();
                jGenerator.writeStartObject(); // {
                jGenerator.writeStringField("topic_username", loginUserName); // "title" : title
                jGenerator.writeStringField("topic_lstUpdate", topicBean.getTopicVO().getLastUpdatedTimestamp().toString());
                jGenerator.writeStringField("topic_body",              topicBean.getTopicVO().getBody());

                jGenerator.writeStringField("isValid", "true");
                jGenerator.writeEndObject(); // }
                jGenerator.close();
                //String jsonData = topicBean.getTopicVO().getBody();
                request.setAttribute("JSON_DATA", stringWriter.toString());
                System.out.println(" Printing json data  " +stringWriter.toString());

                RequestDispatcher rd = servletContext.getRequestDispatcher("/meteor"); 
```

## 控制台中显示 Json Parser 错误

```
Uncaught SyntaxError: Unexpected token e jquery.js.jsf:16
bF.extend.parseJSON jquery.js.jsf:16
updatePost circle_topic.js.jsf:216
request.onMessage publish_subscribe.js.jsf:56
_f jquery.atmosphere.js.jsf:1975
_invokeFunction jquery.atmosphere.js.jsf:1967
_invokeCallback jquery.atmosphere.js.jsf:2027
AtmosphereRequest.ajaxRequest.onreadystatechange jquery.atmosphere.js.jsf:1438 
```

## JSON数据

```
Logging message from publish_subsrcibe :{
  "topic_username" : "srikanth marni",
  "topic_lstUpdate" : "2012-09-06 11:52:59.966",
  "topic_body" : "testing",
  "isValid" : "true"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-16T06:40:31.980

这可能有帮助，也可能没有帮助，但是当外部系统调用的处理程序因语法错误而失败时，我也遇到了“意外的令牌 E”错误。

```
function handleSubsystemResult(text) {
   // Chrome reported "Unexpected token E" here
   var something = JSON.parse(text);  
   ...
}

function main() {
   ...
   callExternSubsystem( "externalSubsystemCode()", handleSubsystemResult );
} 
```

外部子系统代码因语法错误而失败。Chrome 仅在尝试 JSON.parse() 结果时才报告错误。如果在某种处理程序中调用 JSON.parse()，我会仔细检查谁调用了该处理程序。

# linux - Linux HZ 和公平调度时间片

> ID：12304246
> 
> 赞同：5
> 
> 时间：2012-09-06T16:16:27.707
> 
> 标签：linux, linux-kernel, preemption

其中`sched_fair.c`有：

```
unsigned int sysctl_sched_latency = 5000000ULL //5m 

unsigned int sysctl_sched_min_granularity = 1000000ULL //1ms 
```

我知道 Linux 公平时间片取决于 nr_running 和这个公平任务的相对权重，但通过代码研究，我发现主要思想是将时间片保持在 1 到 5 毫秒。如果我理解错了，请纠正我。我在这里一定是错的，但我就是不知道怎么做！

还知道 HZ 或每秒系统滴答数或每秒计时器中断数对于 arm 机器（以及大多数非桌面机器）通常为 200 或 100，这给了我们 5 到 10 毫秒的滴答声速度。

时间片通过启动 rq->hrtick_timer in`set_next_entity()`来执行，每次公平任务被安排运行，并调用`resched_task()`超时回调函数`hrtick()`。该计时器只是计时器 irq 处理程序在每个滴答时处理的排队计时器之一，`timer_tick()`...。`run_local_timer()`似乎没有其他隐藏的秘密。

那么我们如何才能得到一个小于 5 ms 的时间片呢？请帮助我理解这一点。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T12:39:50.163

正如 Robert Love 的 Linux Kernel Development 中所述，缩短时间片的唯一方法是增加正在运行的进程（或优先级低于其他进程的进程）的数量。

运行进程数量的增加需要缩短时间片以保证适当的目标延迟（但时间片的下限是最小粒度）。但是不能保证进程会在给定的时间片内被抢占。那是因为时间计费是由定时器中断驱动的。

增加 HZ 的值会使定时器中断更频繁地发生，这使得时间计费更加宝贵，因此重新调度可能会更频繁地发生。

* * *

该`vruntime`变量存储一个进程的*虚拟运行时*，它是由可运行进程的数量标准化的实际运行时。在理想的多任务系统上，所有进程的 vruntime 都是相同的——所有任务都将获得同等、公平的处理器份额。

通常，时间片是目标延迟除以正在运行的进程数。但是当正在运行的进程数接近无穷大时，timeslice 接近 0。由于这最终会导致不可接受的切换成本，CFS 对分配给每个进程的时间片施加了一个下限。这个下限称为*最小粒度*。所以时间片是 和 之间的`sysctl_sched_latency`值`sysctl_sched_granularity`。（见`sched_timeslice()`）

`vruntime`变量由 管理`update_curr()`。`update_curr()`由系统计时器定期调用，并且每当一个进程变为可运行或阻塞时，变为不可运行。

为了驱动任务之间的抢占，`hrtick()`调用`task_tick_fair()`每个定时器中断，然后调用`entity_tick()`. `entity_tick()`调用`update_curr()`更新进程`vruntime`，然后调用`check_preempt_tick()`. `check_preempt_tick()`检查当前运行时间是否大于理想运行时间（时间片），如果是，则调用`resched_task()`设置`TIF_NEED_RESCHED`标志。

`TIF_NEED_RESCHED`设置时，`schedule()`在最近的可能场合被调用。

因此，随着 值的增加`HZ`，定时器中断更频繁地发生，从而导致更宝贵的时间计费，并允许调度程序更频繁地重新调度任务。

# objective-c - Objective-C 中的静态变量

> ID：12304247
> 
> 赞同：0
> 
> 时间：2012-09-06T16:16:27.613
> 
> 标签：objective-c

我已经搜索了有关 Objective-C 中静态变量的帖子，但还没有找到这个问题的答案：

在 Java 中，我可以创建一个具有相同类类型的静态变量的类，如下所示：

```
public class Status {

    public static final Status SUCCESS = new Status(0, "Success");
    public static final Status FAILURE = new Status(-1, "It's Broke");

    private int number;
    private String message;

    private Status(int number, String message) {
        this.number = number;
        this.message = message;
    }
} 
```

然后我可以像这样使用 Status 中的静态变量：

```
public Status foo() {
    ...
    return Status.FAILURE;
} 
```

有人可以告诉我如何在 Objective-C 中做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:24:56.413

大多数 Cocoa API 使用简单的枚举来返回这样的结果。

```
typedef enum {
    MyClassResultSuccess = 0,
    MyClassResultFailure = -1
} MyClassResult; 
```

如果您想使用与您发布的内容更相似的方法，您可以使用类方法：

```
@interface Status
@property (nonatomic) int value;
@property (nonatomic, copy) NSString *message;
- (id)initWithValue:(int)value message:(NSString *)message;
+ (Status *)success;
+ (Status *)failure;
@end

@implementation Status

static Status *_success = nil;
static Status *_failure = nil;

- (id)initWithValue:(int)value message:(NSString *)message {
    self = [super init];
    if (self) {
        self.value = value;
        self.message = message;
    }
    return self;
}

+ (Status *)success {
    if (!_success)
        _success = [[Status alloc] initWithValue:0 message:@"Success"];
    return _success;
}

+ (Status *)failure {
     if (!_failure)
        _failure = [[Status alloc] initWithValue:-1 message:@"Failure"];
    return _failure;
}

@end 
```

# python - pyqt - 没有子目录的 QFileSystemModel？

> ID：12304249
> 
> 赞同：0
> 
> 时间：2012-09-06T16:16:28.983
> 
> 标签：python, windows, pyqt

是否可以在没有子文件夹的路径`QFileSystemModel`中`QTreeWidget`仅显示文件夹？另外，我可以使用获取文件夹大小（其中包含任何内容）`QFileSystemModel`吗？

这是我只过滤到文件夹的代码：

```
m_index = r"C:/folder"

model = QtGui.QFileSystemModel()
model.setRootPath(m_index)
model.setFilter(QtCore.QDir.Dirs|QtCore.QDir.NoDotAndDotDot)

view = QtGui.QTreeView()
view.setModel(model)
view.setColumnHidden(2, True)
view.setColumnHidden(3, True)
view.setRootIndex(model.index(m_index)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:08:46.770

没关系，`view.setItemsExpandable(False)`做任务...

# objective-c - .m 文件中声明的成员变量在类的实例之间保持其值

> ID：12304250
> 
> 赞同：0
> 
> 时间：2012-09-06T16:16:33.277
> 
> 标签：objective-c, instance-variables, variable-declaration

我有以下实现文件`MyClass`：

```
BOOL myBool;

@implementation MyClass

// ...

- (void) someMethod {
    myBool = YES;
}

@end 
```

似乎对于after的每个实例都`myBool`只会在. 但是，如果我这样定义，它对每个实例都有一个唯一的值：`YES``MyClass``someMethod``MyClass``myBool``MyClass`

```
@interface MyClass ()
@property (nonatomic) BOOL myBool;
@end 
```

以上两种“成员变量”语法有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:19:12.753

不同之处在于，在第一种情况下，它不是成员变量，而是全局变量，因此它自然会在类的多个实例之间保持其值。

如果要在类实现文件中声明 ivar，可以执行以下操作：

```
@implementation MyClass{
   BOOL myBool;
}
... 
```

# php - 使用 str_replace()

> ID：12304256
> 
> 赞同：-2
> 
> 时间：2012-09-06T16:17:02.183
> 
> 标签：php

如何删除 `onmousedown="return curwt(this, 'http://www.example.com/2009/07/content.html')"`using `str_replace( )`，我知道如何使用此字符串，但无法理解配置此字符串以`onmousedown="all content"`这种方式删除的方式。
我以这种方式尝试过：`$result = str_replace("onmousedown''", " ", $result);`
但它不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:18:46.417

我认为您想使用正则表达式

```
$result = preg_replace('/onmousedown=".*?"/', '', $result); 
```

或者，如果它可以是撇号和引号：

```
$result = preg_replace('/onmousedown=("|\').*?\1/', '', $result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:19:08.297

您不能为此使用 str_replace，因为它只能替换预定义的字符串，不能替换通配符。

您可以为此使用[preg_replace 。](http://php.net/preg_replace)

# ruby-on-rails - rake 资产期间未初始化的常量：lib 类的预编译

> ID：12304258
> 
> 赞同：3
> 
> 时间：2012-09-06T16:17:17.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

导轨 3.2.2

运行 rake assets:precompile 时出现以下错误：

```
uninitialized constant Redirect 
```

Redirect 是一个自定义中间件类，它将裸域请求从 mydomain.com 重定向到 www.mydomain.com。

我使用以下方法在 production.rb 中加载中间件：

```
config.middleware.use Redirect 
```

redirect.rb 位于 lib/middleware/redirect.rb。我使用以下方法加载 application.rb 中的路径：

```
config.autoload_paths += %W(#{config.root}/lib/middleware) 
```

当您运行应用程序时它运行良好，并且其他 rake 任务运行良好。但是运行 rake assets:precompile 似乎无法正确加载库。我首先注意到在 Heroku 上运行的问题，但我已经能够在本地重现没有问题。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:56:06.597

你可能已经`config.assets.initialize_on_precompile = false`设置了某个地方。

在设置与 Heroku 相关的配置后，我遇到了这个错误。要修复，我就`require "#{Rails.root}/lib/my_middleware.rb"`在我配置应用程序以使用中间件的行的正上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:37:01.553

从 /lib 加载类并将其分配给`::GLOBAL`变量时，我遇到了同样的错误。

这是因为我忘记将它放在一个`after_initialize`块中，这就是我在开发中所做的。

```
config.after_initialize do
  ::GLOBAL = MyLib::MyClass.new
end 
```

希望这对某人有帮助！

# settings.bundle - 获取ios多值用户偏好

> ID：12304263
> 
> 赞同：2
> 
> 时间：2012-09-06T16:17:36.410
> 
> 标签：settings.bundle

我尝试使用“设置包”检索在设置应用程序中选择的值。该字段是“PSMultiValueSpecifier”。在“Root.plist”中，我实现了：

*   类型：PSMultiValueSpecifier
*   标题： Abcdefg
*   键：abcdefg
*   默认值：aaa
*   值（数组）：

    ```
     Item 0: aaa
     Item 1: bbb 
    ```

*   标题（数组）：

    ```
    Item 0: A
    Item 1: B 
    ```

而且，在我写的实现文件中：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *string = [defaults objectForKey:@"abcdefg"]; 
```

但是“字符串”是空的。当我对用户默认类型执行相同操作时：“PSTextFieldSpecifier”我可以检索该值。

我按照“Apress - 开始 iOS 5 开发：探索 iOS SDK”一书中的说明进行操作，但我无法检索所选值。

说明与“Apple 开发帮助”相同。

我不明白是什么问题。这似乎很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:00:17.080

我发现了这个错误。

如果您在“Settings.bundle”（使用其“默认值”）中实现“多值”用户首选项，但从不进入设置 iPhone 模拟器并且从不更改多值首选项，则语句：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *string = [defaults objectForKey:@"key"]; 
```

返回一个“零”值。难以置信，我花了一周的时间试图找到问题！！！！

但我有一个疑问：

如果我实施“多值”用户首选项并在 iTunes Store 中发布应用程序，但用户不使用此“多值”用户首选项，“NSUserDefaults”将返回零值？

我是否必须考虑收到空值的可能性？

真的，我觉得这很荒谬。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T14:48:25.040

不，我认为您需要注册您的默认值，例如：

```
 -(BOOL) application: (UIApplication*) application didFinishLaunchingWithOptions: (NSDictionary*) launchOptions
{

     NSDictionary* defaults = @{@"key": @"default value"};
     [[NSUserDefaults standardUserDefaults] registerDefaults:defaults];
} 
```

这是因为应用程序对其包含的设置包一无所知。书的第430页`Beginning iOS6 Development: Exploring the iOS SDK`对此有明确的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T21:11:22.980

似乎`DefaultValue`仅在官方设置应用程序中使用。显然，您必须通过以下方式注册默认值：1）测试您的一项设置以查看它是否为 NULL，然后 2）遍历设置，获取并设置默认值：

[示例 Obj-C 代码`just.do.it`](https://discussions.apple.com/thread/1855262?start=0&tstart=0)

[PSMultiValueSpecifier](http://developer.apple.com/library/ios/#documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSMultiValueSpecifier.html)上的文档在这里似乎有缺陷。对此的困惑出现在 SO 和网络上。例如：

*   [SO上的defaultvalue-for-psmultivaluespecifier](https://stackoverflow.com/questions/5809869/defaultvalue-for-psmultivaluespecifier)
*   [SO 上的应用程序首选项如何获取 psmultivaluespecifier-property](http://developer.appcelerator.com/question/104231/app-preferences-how-to-get-psmultivaluespecifier-property)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T08:03:57.160

如果返回的对象为 nil，则设置默认值。

```
NSString * key = @"the key";
NSUserDefaults * uD = [NSUserDefaults standardUserDefaults];
NSString * stringValue = [uD objectForKey:key];

if (!stringValue) {
    stringValue = @"the default value";
    [uD registerDefaults:@{key: stringValue}];
} 
```

# nsis - 在 nsis 安装程序窗口的完成页面中添加复选框

> ID：12304267
> 
> 赞同：2
> 
> 时间：2012-09-06T16:17:51.717
> 
> 标签：nsis

如何在 nsis 安装程序窗口的完成页面上添加一个复选框？

我想在 nsis 安装程序窗口的完成页面上添加一个复选框。如果用户选中该复选框，则`.exe`应该启动另一个复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:35:03.710

NSIS 已经支持这个：[MUI_FINISHPAGE_RUN](http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html)。

您甚至可以强制 MUI_FINISHPAGE_SHOWREADME 也[查看并执行您想要的任何操作](https://stackoverflow.com/questions/1517471/how-to-add-a-desktop-shortcut-option-on-finish-page-in-nsis-installer/1517851#1517851)...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-28T17:39:18.583

```
!include nsDialogs.nsh
!include LogicLib.nsh

Name nsDialogs
OutFile nsDialogs.exe

XPStyle on
Var Dialog
Var Checkbox

Page custom nsDialogsPage
Page license
Page instfiles

Function nsDialogsPage
    nsDialogs::Create 1018
    Pop $Dialog
    ${If} $Dialog == error
        Abort
    ${EndIf}    
    ${NSD_CreateCheckbox} 0 30u 100% 10u "&Something"
    Pop $Checkbox
    ${If} $Checkbox_State == ${BST_CHECKED}
        ${NSD_Check} $Checkbox
    ${EndIf}
    # alternative for the above ${If}:
    #${NSD_SetState} $Checkbox_State
    nsDialogs::Show
FunctionEnd

Section
    DetailPrint "hello world"
SectionEnd 
```

# c# - 解析嵌套的 JSON——子属性为空

> ID：12304270
> 
> 赞同：2
> 
> 时间：2012-09-06T16:18:03.167
> 
> 标签：c#, json

所以我试图解析一些由第三方api返回给我的JSON，看起来像：

```
{
    "status":"ok",
    "links":
    [
        {
            "link":
            {
                "link_name":"Sample",
                "link_id":"9999"
            }
        },

    ],//and so on with other nested properties 
```

我创建了将 JSON 映射到的类

```
 [DataContract]
    public class JsonTestResults
    {
        [DataMember]
        public string status { get; set; }
        [DataMember]
        public IEnumerable<Link> links { get; set; }
    }
    [DataContract]
    public class Link
    {
        [DataMember]
        public string link_name { get; set; }
        [DataMember]
        public string link_id { get; set; }
    } 
```

我正在通过这个反序列化器推动响应（取自[这篇文章](https://stackoverflow.com/questions/1212344/parse-json-in-c-sharp)

```
public  T Deserialise<T>( string json )
        {
            T obj = Activator.CreateInstance<T>( );
            using (MemoryStream ms = new MemoryStream( Encoding.Unicode.GetBytes( json ) ))
            {
                DataContractJsonSerializer serializer = new DataContractJsonSerializer( obj.GetType( ) );
                obj = (T)serializer.ReadObject( ms ); 
                return obj;
            }
        } 
```

但是，我的反序列化结果将 Link[] 的内容显示为空。（每个返回的都有一个 Link 对象，但 link_name 和 link_id 为空。）

我已经检查了[this](https://stackoverflow.com/questions/1212344/parse-json-in-c-sharp) , [this](https://stackoverflow.com/questions/802766/c-sharp-parsing-json-formatted-data-into-nested-hashtables) , [this](https://stackoverflow.com/questions/10642590/parsing-json-page) , [this](https://stackoverflow.com/questions/8790754/parsing-json-in-c-sharp)和[this](https://stackoverflow.com/questions/6220635/c-sharp-json-parsing-parse-escaped-json)，但无法解决这个问题。我正在寻找不需要第三方库的解决方案。（根据我的主要开发人员）。

我不相信与 JSON 匹配的类有问题，但如果有人想查看它，我可以发布完整的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:46:50.617

您还需要一个类来正确反序列化它

```
public class JsonTestResults
{
    public string status { get; set; }
    public IEnumerable<TempLink> links { get; set; }
}

public class TempLink
{
    public Link link;
}

public class Link
{
    public string link_name { get; set; }
    public string link_id { get; set; }
} 
```

我用[Json.Net](http://json.codeplex.com/)对其进行了测试并工作了。

```
var obj = JsonConvert.DeserializeObject <JsonTestResults>(json); 
```

`JavaScriptSerializer`也有效

```
var obj2 = new JavaScriptSerializer().Deserialize<JsonTestResults>(json); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T16:37:17.147

它是 JSON 中的语法错误，

在 JSON 数组中，最后一个元素后面没有“，”。

```
 {
"status":"ok",
"links":
[
    {
        "link":
        {
            "link_name":"Sample",
            "link_id":"9999"
        }
    }
], 
```

这将工作！

# c++ - 从整数中检索最后 6 位

> ID：12304273
> 
> 赞同：3
> 
> 时间：2012-09-06T16:18:04.353
> 
> 标签：c++, visual-c++

我需要获取整数或 Uint32 的最后 6 位。例如，如果我的值为 183，我需要最后六位，`110 111`即 ie `55`。

我已经编写了一小段代码，但它的行为不如预期。你们能指出我在哪里犯了错误吗？

```
int compress8bitTolessBit( int value_to_compress, int no_of_bits_to_compress )
{
    int ret = 0;
    while(no_of_bits_to_compress--)
    {
        std::cout << " the value of bits "<< no_of_bits_to_compress << std::endl;
        ret >>= 1;
        ret |= ( value_to_compress%2 );
        value_to_compress /= 2;
    }
    return ret;
}

int _tmain(int argc, _TCHAR* argv[])
{
    int val = compress8bitTolessBit( 183, 5 );

    std::cout <<" the value is "<< val << std::endl;
      system("pause>nul");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-06T16:23:06.240

您已进入二进制算术领域。C++ 为这种事情提供了内置的运算符。“获取整数的某些位”的行为是使用“AND”二元运算符完成的。

```
 0101 0101
AND 0000 1111
    ---------
    0000 0101 
```

在 C++ 中，这是：

```
int n = 0x55 & 0xF;
// n = 0x5 
```

所以要得到最右边的 6 位，

```
int n = original_value & 0x3F; 
```

为了得到最右边的 N 位，

```
int n = original_value & ((1 << N) - 1); 
```

这里有更多信息

*   [C++ 中的二元算术运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Bitwise_operators)
*   [一般的二元运算符](http://en.wikipedia.org/wiki/Bitwise_operation#Bitwise_operators)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T16:20:04.410

我不明白这个问题，你不能只使用按位运算符吗？例如

```
u32 trimmed = value & 0x3F; 
```

这将通过使用[按位与](http://en.wikipedia.org/wiki/Bitwise_operation#AND)运算符仅保留 6 个最低有效位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T16:19:45.773

tl;博士：

```
int val = x & 0x3F; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T16:21:27.693

```
int value = input & ((1 << (no_of_bits_to_compress + 1) - 1) 
```

这个计算 2 的 (n+1) 次方：`1 << (no_of_bits_to_compress + 1)`并减去 1 以获得所有`n`位都设置的掩码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T10:13:18.543

整数 A 的最后 k 位。

```
1\. A % (1<<k); // simply A % 2^k
2\. A - ((A>>k)<<k); 
```

第一种方法使用的事实是最后 k 位是在执行 k 次正确操作（除以 2^k）之后修剪的内容。

# php - 使用同一个 CakePHP 核心的多个应用程序

> ID：12304277
> 
> 赞同：0
> 
> 时间：2012-09-06T16:18:24.027
> 
> 标签：php, cakephp, cakephp-2.1

我目前正在使用`CakePHP 2.1.x`并且我想做的是为同一域上的许多应用程序使用一个核心安装的 cakePHP。

这就是我目前的结构。

```
/var/www
    /app/
        /webroot
    /lib
        /Cake
    /plugins
    /vendors 
```

我希望能够完成的是 mydomain.com/myApp1 mydomain.com/myApp2 mydomain.com/myApp3

```
/var/www
    /apps/
        /myApp1
        /myApp2
        /myApp3
    /lib
        /Cake
    /plugins
    /vendors 
```

在上述情况下，我不确定`/webroot`会去哪里或是否会有多个`/webroot`文件夹。另外，如果我必须继续`/app`打电话`/app`或者我可以打电话给它`/apps`。

我也不确定`.htaccess`必须修改哪些文件。这种情况可能吗？这样做是一个坏主意吗？

# excel - excel将唯一值复制到新工作表

> ID：12304280
> 
> 赞同：0
> 
> 时间：2012-09-06T16:18:42.180
> 
> 标签：excel, function

我有一个包含许多行/列的工作表，如下所示：

![在此处输入图像描述](../Images/3f2af71d37e48a41408403d1351a4422.png)

如何使用函数仅将这张表中的唯一值复制到空白表中？我只需要第一次出现的行，其余的无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:28:56.290

您可以在下一列中添加一个公式，以指示该值是否已出现在上面的单元格中。见下文：

![在此处输入图像描述](../Images/d63c5be0a499c2aaaeca6182f0615836.png)

将此公式添加到除第一行之外的所有单元格。现在您可以过滤不包含“DUP”的单元格并将过滤后的列表复制粘贴到另一个工作表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T12:06:40.390

我通常使用 Tim Williams 建议的方法，但我在另一个堆栈线程上发现了这个。

[忽略重复并在 Excel 中创建新的唯一值列表](https://stackoverflow.com/questions/13307927/ignore-duplicates-and-create-new-list-of-unique-values-in-excel)

```
=INDEX(Sheet1!$A$1:$A$20, MATCH(0, COUNTIF($B$1:B1,Sheet!$A$1:$A$20), 0)) 
```

我发现这对于增长的列表非常有用。您需要确保将其拉得足够远以捕获所有结果，并且您获得的 NA# 超出了正确结果的数量。但是你可以用 if(iserror( 或者一点 VBA.

# c - 列表到列表分配变成垃圾

> ID：12304282
> 
> 赞同：1
> 
> 时间：2012-09-06T16:18:48.127
> 
> 标签：c, list, pointers, parameters

我在以下方面遇到了一些麻烦：

```
void BuildList(cs460hwp hw)
{

    FILE* fp;
    fp = fopen("HW2input.dat", "r");
    if(fp == NULL)
    {
        printf("Couldn't open the file.");
        return;
    }
    int numStudents;
    int i;
    bool success;
    char* dueDate = malloc(9*sizeof(char));
    char* course = malloc(7*sizeof(char));
    char* wsuid = malloc(9*sizeof(char));
    char* subDate = malloc(9*sizeof(char));
    double points1 = 0;
    double points2 = 0;
    cs460hwp stuInsert = NULL;
    fscanf(fp, "%d", &numStudents);
    fscanf(fp, "%s", dueDate);
    for(i = 0; i < numStudents; i++)
    {
        stuInsert = malloc(sizeof(cs460hwp));
        fscanf(fp, "%s %s %s %lf", course, wsuid, subDate, &points1);
        strcpy(stuInsert->course, course);
        strcpy(stuInsert->wsuid, wsuid);
        strcpy(stuInsert->subdate, subDate);
        stuInsert->points1 = points1;
        stuInsert->points2 = CalculatePoints(dueDate, subDate, points1);
        stuInsert->nextPtr = NULL;
        if(hw == NULL)
        {
            hw = stuInsert;
        } 
        else
        {
            stuInsert->nextPtr = hw;
            hw = stuInsert;
        }
    }
    free(course);
    free(wsuid);
    free(subDate);
    free(dueDate);
    PrintGrades(hw);
    fclose(fp);
}

struct hwpoints
{
    char course[7];
    char wsuid[9];
    char subdate[9];
    double points1;
    double points2;
    struct hwpoints *nextPtr;
};

typedef struct hwpoints *cs460hwp; 
```

我的目标是将每个条目插入列表顶部。但是，每当我尝试将任何内容分配给 nextPtr（例如在 else 子句中）时，它都会被垃圾值填充。它们大多是旧数据的截断版本，这让我相信它们是从堆中取出的。我一直在阅读（很多），但我很难找到关于这个特定问题的建议。

nextPtr 总是变成垃圾，并且 nextPtr->nextPtr 会导致段错误。对于循环的每次迭代。hw 仍然很好，但它的指针值永远不会正确更新。

即使我尝试将结构的内存分配移动到函数中，我也遇到了相同（或类似）的问题。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:27:46.027

您的函数的一个问题`BuildList`是您正在传递一个指向 a 的指针`struct hwpoints`，并且您正在尝试重新分配参数指向的内容。由于 C 中的函数参数是*按值传递的，*因此您只需更改函数接收到的指针的*副本*，而这些更改不会反映在调用者中。

您*可以*使用此指针来修改列表的内容：您可以更改例如`hw->course`或`hw->nextPtr`，您可以在列表中移动元素。但是你**不能**改变头`hw`指向*的*东西，所以你不能在列表的开头插入元素。

如果你想改变你的头指针，就像在这些语句中一样：

```
hw = stuInsert;
// ...
hw = stuInsert; 
```

然后您需要将指针传递给指针：

```
void BuildList(cs460hwp *hw) 
```

并在函数体中根据需要取消引用它。

我不能确定这是您观察到的输出的原因，这可能是由于其他问题。但是，如果在调用了一定次数后`BuildList`，从头指针等于 开始`NULL`，您试图打印您的列表，假设它具有有效节点，您可能会看到垃圾数据。

感谢@Mike 的回答，我们还看到您没有为列表节点分配足够的空间：

```
stuInsert = malloc(sizeof(cs460hwp)); 
```

只会为*指针*分配足够的空间，因为`cs460hwp`is `typedef`'d 是一个指向`struct hwpoints`. 您需要为结构分配足够的空间，而不是指向它的指针：

```
stuInsert = malloc(sizeof(struct hwpoints)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:51:07.317

两个问题。

1）正如 pb2q 提到的，您正在传递一个指向结构的指针并尝试分配 arg 指向的内容。编译器允许这样做，但在函数之外它不会为您做任何事情。在您的情况下，如果：

```
void main()
{
   cs460hwp hw = NULL;
   BuildList(hw);
   return;
} 
```

是你的全部功能。我不知道任务，所以你需要弄清楚你是否可以接受。

2）更大的问题：

```
stuInsert = malloc(sizeof(cs460hwp)); 
```

你检查过 sizeof(cs460hwp) 是什么吗？它是 4。您为指针的大小分配了足够的内存，而不是结构的大小。我很确定这不是你想要做的，这就是杀死你的原因。只是为了好玩，用 malloc(100) 替换它，看看你的问题是否消失。如果是这样，您只需要弄清楚您真正想要的尺寸。;)

# python - 如何设置类的默认属性访问？

> ID：12304284
> 
> 赞同：3
> 
> 时间：2012-09-06T16:19:00.480
> 
> 标签：python

Python（2.7）新手在这里。我想要做的是引用一个类的实例，将给定的属性作为“默认”返回，而不必指定该属性。我想这样做是因为绝大多数时候我指的是一个实例，它是访问这个属性。

例如，假设我有几个类来描述一本书：

```
class book:
    def __init__(self):
        self.title = ''
        self.author = ''
        self.page = {}

class page:
    def __init__(self):
        self.text = ''
        self.length = 0 
```

我创建了一个实例并用一本书的内容填充它，如下所示：

```
...    
war_and_peace = book()
page_count = 0
for page in pages:  #Let's say pages is a list of strings each of a page of the book
    pagenum += 1
    war_and_peace.page[pagenum] = page 
```

现在在程序的其余部分中，99.9% 的时间我参考了页面的文本。因此，为了让我的生活更轻松，我希望能够使用以下方式引用页面：

```
if 'Anna' in war_and_peace[15]:
    ... 
```

代替

```
if 'Anna' in war_and_peace.page[15].text:
    ... 
```

我该怎么办？（抱歉，如果这已被回答；我可能使用了错误的搜索词！）

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T16:20:39.313

[`__getitem__`](http://docs.python.org/reference/datamodel.html#object.__getitem__)覆盖`book`会给你这个：

```
def __getitem__(self, item):
    return self.page[item].text 
```

# android - Java 密钥对 - 私有和公共 - 我只有私有

> ID：12304285
> 
> 赞同：0
> 
> 时间：2012-09-06T16:19:02.690
> 
> 标签：android, java, keystore, keytool

我在打包应用程序时遇到了一些问题，因为 jarsigner 一直告诉我：

```
jarsigner: Certificate chain not found for: MyApp.  MyApp must reference a valid KeyStore key entry containing a private key and corresponding public key certificate chain. 
```

我使用以下命令生成了密钥库：

```
 keytool -genkey -keystore myAppKeystore.keystore -alias myApp 
```

然后按照提示填写其余信息。

当我使用此命令检查应用程序时，我发现：

```
keytool -keystore myAppKeystore.keystore -list -v 
```

它说了这样的话，似乎只说私钥：

```
Alias name: myApp
Creation date: 06-Sep-2012
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: ......etc 
```

我敢肯定这将是非常明显的事情，但我错过了什么？我的印象是之前的命令创建了一个密钥对？不仅仅是私钥。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:03:18.367

您需要使用“keytool -selfcert ...”为密钥对生成证书。更好的是，生成 CSR 并让您的 CA 颁发代码签名证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:39:31.117

您需要获得一个[公钥证书](http://en.wikipedia.org/wiki/Public_key_certificate)。您可以使用`keytool`向证书颁发机构生成证书请求并导入证书回复。也许您所需要的只是一个[自签名证书](http://www.sslshopper.com/article-how-to-create-a-self-signed-certificate-using-java-keytool.html)。

# c# - 从继承类的实例轻松转换

> ID：12304287
> 
> 赞同：3
> 
> 时间：2012-09-06T16:19:08.773
> 
> 标签：c#, .net, inheritance

我有两个类，一个继承另一个，例如：-

```
public class A
{
    public string AA { get; set; }
    public double AB { get; set; }
} 
```

和

```
public class B : A
{
    public double? BA { get; set; }
} 
```

现在，我知道如果我有一个对象 B 的实例，我可以将它转换为类型 A，但是我有一个 A 的实例，我想将它实例化为类型 B 的对象。我知道我可以在 B 的类中放置一个构造函数来复制所有属性值，但是基类 A 有很多属性并且很可能添加了更多属性，所以我担心缺少一个或忘记添加它当我将其添加到 A 时，将其添加到 B 的构造函数中。请问有没有一种简单的方法可以做到这一点？

- - - -编辑 - - -

谢谢大家，不幸的是，不是我的用例，这是一个伙伴向我开火的问题。据我所知，存在问题，他无法更改基类。据我了解，基类是一个与数据库调用挂钩的类，然后他想要获取该数据并为管理员编辑屏幕添加一些额外的属性，然后他的代码将使用这些属性来更新基本数据对象的属性。我的第一反应是将基础对象作为他对象的属性，但他使用他使用的工具将其“展平”要容易得多，这是有原因的。我没*想到*有一种方法可以做到这一点，但我想我会检查以防我遗漏了什么——我认为只问基本问题会更容易，而不是包括背景，这可能只会引发更多问题和混乱水（AFAIK 他正遭受“他无法控制的情况”，与此有关）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:21:28.883

> 我知道我可以在 B 的类中放置一个构造函数来复制所有属性值，但是基类 A 有很多属性并且很可能添加了更多属性，所以我担心缺少一个或忘记添加它当我将其添加到 A 时，将其添加到 B 的构造函数中。请问有没有一种简单的方法可以做到这一点？

通常，这是设计缺陷的标志。我会首先重新考虑您的设计*，*并确定这是否真的有必要，或者您是否可以在这里使用另一种方法。话虽如此...

没有简单的方法可以做到这一点。如果您需要`B`从您的实例创建一个`A`实例，您确实需要将值复制到新实例。

然而，一个更好的选择可能是添加一个（可能`protected`）构造函数来`A`设置所有这些属性，给定另一个`A`实例。 `B`然后可以使用它来创建自己，这至少保留了匹配定义它们的类中所有属性的要求。随着时间的推移，这应该更容易维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:49:19.827

我同意其他评论，您最好使用不同的设计，例如组合而不是继承。

组合（如下所示）允许您修改 A 类，而无需对 B 类进行任何更改。

```
 public class B
    {
        // Constructor
        public B(A A) { this.A = A; }

        // Class A as a read-only property
        public A A { get; private set; }

        // Other properties of class B
        public double? BA { get; set; }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:34:45.043

正如 Reed Copsey 所说，这通常是设计缺陷的标志。如果您需要这样的工作，我会重新设计类图。听起来好像在某处的继承架构中犯了某种错误。

如果您只需要孩子和父母都实现通用方法，以便当其中一个对象传递给某个函数时，它可以对传入对象的某些通用方法进行操作，那么只需让它们两个实现相同接口（多态），或将函数参数键入为基类，并确保方法存在于基类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:22:12.353

c# 不支持反向多态。

# javascript - AngularJS：AngularJS 渲染模板后如何运行附加代码？

> ID：12304291
> 
> 赞同：184
> 
> 时间：2012-09-06T16:19:22.463
> 
> 标签：javascript, jquery, dom, angularjs

我在 DOM 中有一个 Angular 模板。当我的控制器从服务中获取新数据时，它会更新 $scope 中的模型，并重新渲染模板。到目前为止一切都很好。

问题是在模板被重新渲染并且在 DOM 中（在本例中为 jQuery 插件）之后，我还需要做一些额外的工作。

似乎应该有一个事件要听，比如 AfterRender，但我找不到任何这样的东西。也许指令会是一种方法，但它似乎也太早了。

这是一个概述我的问题的 jsFiddle：[Fiddle-AngularIssue](http://jsfiddle.net/gorebash/uNREn/3/)

**== 更新 ==**

基于有用的评论，我相应地切换到一个指令来处理 DOM 操作，并在指令中实现了一个模型 $watch。但是，我仍然有同样的基本问题；$watch 事件内部的代码在模板被编译并插入 DOM 之前触发，因此，jquery 插件总是在评估一个空表。

有趣的是，如果我删除异步调用，整个事情就可以正常工作，所以这是朝着正确方向迈出的一步。

这是我更新的小提琴以反映这些变化：http: [//jsfiddle.net/uNREn/12/](http://jsfiddle.net/uNREn/12/)

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2014-06-15T10:15:35.787

首先，处理渲染的正确位置是指令。我的建议是通过像这样的指令来包装 DOM 操作 jQuery 插件。

我遇到了同样的问题并想出了这个片段。它使用`$watch`并`$evalAsync`确保您的代码在诸如`ng-repeat`已解析的指令和已`{{ value }}`呈现的模板之类的模板之后运行。

```
app.directive('name', function() {
    return {
        link: function($scope, element, attrs) {
            // Trigger when number of children changes,
            // including by directives like ng-repeat
            var watch = $scope.$watch(function() {
                return element.children().length;
            }, function() {
                // Wait for templates to render
                $scope.$evalAsync(function() {
                    // Finally, directives are evaluated
                    // and templates are renderer here
                    var children = element.children();
                    console.log(children);
                });
            });
        },
    };
}); 
```

希望这可以帮助您防止一些挣扎。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-03T20:48:04.607

这篇文章很旧，但我将您的代码更改为：

```
scope.$watch("assignments", function (value) {//I change here
  var val = value || null;            
  if (val)
    element.dataTable({"bDestroy": true});
  });
} 
```

见[jsfiddle](http://jsfiddle.net/dnzY9/)。

希望对你有帮助

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-11-29T05:17:58.063

按照 Misko 的建议，如果您想要异步操作，那么不要使用 $timeout() （这不起作用）

```
$timeout(function () { $scope.assignmentsLoaded(data); }, 1000); 
```

使用 $evalAsync() （确实有效）

```
$scope.$evalAsync(function() { $scope.assignmentsLoaded(data); } ); 
```

[小提琴](http://jsfiddle.net/mrajcok/UCasc/)。我还添加了一个“删除数据行”链接，它将修改 $scope.assignments，模拟对数据/模型的更改——以表明更改数据是有效的。

概念概述页面的[运行时](https://code.angularjs.org/1.1.5/docs/guide/concepts#runtime)部分解释说，当您需要在当前堆栈框架之外但在浏览器呈现之前发生某些事情时，应该使用 evalAsync。（在这里猜测......“当前堆栈框架”可能包括 Angular DOM 更新。）如果您需要在浏览器呈现后发生某些事情，请使用 $timeout。

但是，正如您已经发现的那样，我认为这里不需要异步操作。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-11-16T20:03:40.950

我发现最简单（便宜又愉快）的解决方案就是在最后一个渲染元素的末尾添加一个带有 ng-show = "someFunctionThatAlwaysReturnsZeroOrNothing()" 的空跨度。当检查是否应显示 span 元素时，将运行此函数。执行此函数中的任何其他代码。

我意识到这不是最优雅的做事方式，但是，它对我有用......

我也遇到过类似的情况，虽然在动画开始时我需要删除加载指示器的地方略有相反，但在移动设备上，角度的初始化速度比要显示的动画快得多，并且使用 ng-cloak 是不够的，因为加载指示器是在显示任何真实数据之前就已将其删除。在这种情况下，我只是将 my return 0 函数添加到第一个渲染元素，并在该函数中翻转了隐藏加载指示器的 var。（当然我在这个函数触发的加载指示器中添加了一个 ng-hide。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-07T05:49:30.777

我认为您正在寻找 $evalAsync [http://docs.angularjs.org/api/ng.$ro ​​otScope.Scope#$evalAsync](http://docs.angularjs.org/api/ng.$rootScope.Scope#$evalAsync)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-25T18:47:55.663

最后我找到了解决方案，我正在使用 REST 服务来更新我的收藏。为了转换数据表 jquery 是以下代码：

```
$scope.$watchCollection( 'conferences', function( old, nuew ) {
        if( old === nuew ) return;
        $( '#dataTablex' ).dataTable().fnDestroy();
        $timeout(function () {
                $( '#dataTablex' ).dataTable();
        });
    }); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-23T21:49:23.947

我不得不经常这样做。我有一个指令，需要在模型内容完全加载到 DOM 后执行一些 jquery 内容。所以我把我的逻辑放在链接中：指令的函数并将代码包装在 setTimeout(function() { ..... }, 1); setTimout 将在加载 DOM 后触发，1 毫秒是加载 DOM 后代码执行之前的最短时间。这似乎对我有用，但我确实希望 angular 在模板加载完成后引发一个事件，以便该模板使用的指令可以执行 jquery 内容并访问 DOM 元素。希望这可以帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-24T16:24:40.417

您还可以创建一个指令，在链接函数中运行您的代码。

看到[那个stackoverflow回复](https://stackoverflow.com/a/11953711/535203)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-03-01T21:22:55.423

$scope.$evalAsync() 或 $timeout(fn, 0) 对我来说都不可靠。

我不得不将两者结合起来。我制定了一个指令，并且将优先级设置为高于默认值以获得良好的衡量标准。这是它的指令（注意我使用 ngInject 注入依赖项）：

```
app.directive('postrenderAction', postrenderAction);

/* @ngInject */
function postrenderAction($timeout) {
    // ### Directive Interface
    // Defines base properties for the directive.
    var directive = {
        restrict: 'A',
        priority: 101,
        link: link
    };
    return directive;

    // ### Link Function
    // Provides functionality for the directive during the DOM building/data binding stage.
    function link(scope, element, attrs) {
        $timeout(function() {
            scope.$evalAsync(attrs.postrenderAction);
        }, 0);
    }
} 
```

要调用该指令，您可以这样做：

```
<div postrender-action="functionToRun()"></div> 
```

如果你想在 ng-repeat 完成运行后调用它，我在我的 ng-repeat 和 ng-if="$last" 中添加了一个空跨度：

```
<li ng-repeat="item in list">
    <!-- Do stuff with list -->
    ...

    <!-- Fire function after the last element is rendered -->
    <span ng-if="$last" postrender-action="$ctrl.postRender()"></span>
</li> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-09-10T11:29:17.750

在某些情况下，您更新服务并重定向到新视图（页面），然后在更新服务之前加载指令，然后您可以使用 $rootScope.$broadcast 如果您的 $watch 或 $timeout 失败

看法

```
<service-history log="log" data-ng-repeat="log in requiedData"></service-history> 
```

控制器

```
app.controller("MyController",['$scope','$rootScope', function($scope, $rootScope) {

   $scope.$on('$viewContentLoaded', function () {
       SomeSerive.getHistory().then(function(data) {
           $scope.requiedData = data;
           $rootScope.$broadcast("history-updation");
       });
  });

}]); 
```

指示

```
app.directive("serviceHistory", function() {
    return {
        restrict: 'E',
        replace: true,
        scope: {
           log: '='
        },
        link: function($scope, element, attrs) {
            function updateHistory() {
               if(log) {
                   //do something
               }
            }
            $rootScope.$on("history-updation", updateHistory);
        }
   };
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-09-27T06:12:12.027

我提出了一个非常简单的解决方案。我不确定这是否是正确的方法，但它在实际意义上有效。让我们直接看我们想要渲染什么。例如，在包含一些`ng-repeat`s 的指令中，我会注意段落或整个 html 的文本长度（您可能还有其他内容！）。该指令将如下所示：

```
.directive('myDirective', [function () {
    'use strict';
    return {

        link: function (scope, element, attrs) {
            scope.$watch(function(){
               var whole_p_length = 0;
               var ps = element.find('p');
                for (var i=0;i<ps.length;i++){
                    if (ps[i].innerHTML == undefined){
                        continue
                    }
                    whole_p_length+= ps[i].innerHTML.length;
                }
                //it could be this too:  whole_p_length = element[0].innerHTML.length; but my test showed that the above method is a bit faster
                console.log(whole_p_length);
                return whole_p_length;
            }, function (value) {   
                //Code you want to be run after rendering changes
            });
        }
}]); 
```

**请注意**，代码实际上是在*渲染更改*而不是完整渲染之后运行的。但我想在大多数情况下，只要发生渲染更改，您就可以处理这些情况。`p`如果您只想在渲染完成后运行*一次*代码，您也可以考虑将此s 长度（或任何其他度量）与您的模型进行比较。**我感谢对此的任何想法/评论。**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-17T10:20:03.427

You can use the 'jQuery Passthrough' module of the [angular-ui utils](http://angular-ui.github.io/ui-utils/). I successfully binded a jQuery touch carousel plugin to some images that I retrieve async from a web service and render them with ng-repeat.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-16T11:40:45.100

在我的解决方案中，我有一些需要首先加载的自定义指令，因为它们包含其兄弟指令调用的函数的定义。例如：

```
<div id="container">
    <custom-directive1></custom-directive1>
    <custom-directive2></custom-directive2>
    <custom-directive3></custom-directive3>
</div> 
```

不幸的是，这里没有一个解决方案对我有用，因为它们只在渲染指令后才有效，而不是在指令代码后面。

因此，当我实现上述任何解决方案时，为了执行一些加载函数，即使渲染了指令，作用域也不知道这些指令中的函数是什么。

所以我在控制器的任何地方创建了一个 observable：

```
//Call every time a directive is loaded
$scope.$watch('directiveLoaded', function (value) {
            debugger;
    if (value == document.querySelector('#container').children.length) {
        //Its ok to use childHead as we have only one child scope
        $scope.$$childHead.function1_Of_Directive1();
        $scope.$$childHead.function1_Of_Directive2();
    }
}); 
```

然后我有这两个指令，我放置

```
scope.$parent.directiveLoaded += 1; 
```

在每个指令的底部。因为在控制器中我定义了 observable，所以每次更新变量`directiveLoaded`时，它都会执行 observable 函数。是的，我知道这是一个 hack，但要保证所有指令在执行最终函数之前完成渲染及其背后的代码，这是一个很小的代价。

为了完成这里的演示，有两个指令定义了以后需要调用的函数。

指令1

```
(function () {
    app.directive('customDirective1', function () {
        return {
            restrict: 'E',
            templateUrl: '/directive1.html',
            link: function (scope) {

                scope.function1_Of_Directive1 = function() {
                    scope.function2_Of_Directive2();
                    console.log("F1_D1")
                }

                //AT BOTTOM OF EVERY DIRECTIVE
                scope.$parent.directiveLoaded += 1;
            }
        }
    });
})(); 
```

指令2

```
(function () {
    app.directive('customDirective2', function () {
        return {
            restrict: 'E',
            templateUrl: '/directive1.html',
            link: function (scope) {

                scope.function1_Of_Directive2 = function() {
                    console.log("F1_D2")
                }
                scope.function2_Of_Directive2 = function() {
                    console.log("F2_D2")
                }

                //AT BOTTOM OF EVERY DIRECTIVE
                scope.$parent.directiveLoaded += 1;
            }
        }
    });
})(); 
```

# qt - 在 Qt 中同步滚动条

> ID：12304293
> 
> 赞同：3
> 
> 时间：2012-09-06T16:19:31.540
> 
> 标签：qt, qgraphicsview

如图所示，我有 2 个图形视图，每个都有一个单独的滚动[条](http://www.qtcentre.org/attachment.php?attachmentid=8192&d=1346939235)。我想知道我怎样才能同步，以便移动一个另一个移动。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:23:31.520

这很简单，只需将每个视图的滚动条的`valueChanged(int)`信号（或`sliderMoved(int)`）信号连接到另一个视图的滚动条的`setValue(int)`插槽，如下所示：

```
connect(view1->horizontalScrollBar(), SIGNAL(valueChanged(int)), view2->horizontalScrollBar(), SLOT(setValue(int)));
connect(view2->horizontalScrollBar(), SIGNAL(valueChanged(int)), view1->horizontalScrollBar(), SLOT(setValue(int))); 
```

# entity-framework - EF：许多具有相同列的表 - 我可以在不复制代码的情况下访问它吗？

> ID：12304294
> 
> 赞同：1
> 
> 时间：2012-09-06T16:19:36.420
> 
> 标签：entity-framework

我有一些存储文件数据的表，例如`TabA`, `TabB`, `TabC`, ... `TabX`。他们每个人都有相同的列`FileTypeID`。

对于每个表，我需要使用扩展方法根据列的条件获取行`FileTypeID`。为此，我有一个这样的扩展方法：

```
public static class FilesTab_Extenders
{
    public static IList<TabA> GetSpecificFiles(this EntityCollection<TabA> mc)
    {
        ///
    }
} 
```

但是，我不想盲目地为其余表克隆相同的代码。唯一的区别是参数 -`this EntityCollection<TabB>`等`this EntityCollection<TabC>`。那么，是否有可能为该场景制作通用代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:18:21.457

对我来说，最简单的方法是使用界面。然后，您将让您的部分类实现此接口并在您的扩展方法中使用它：

```
public interface IFileTypeable
{
    Guid FileTypeId { get; set;}
} 
```

现在，您将为遵循此模板的每个 TabA、TabB、TabC、... TabX 创建部分类文件：

```
namespace MyDBContextNamespace
{
    public partial class TabA : IFileTypeable
    {
        // no need to do anything, the property is already implemented on the original class file.
    }

    public partial class TabB : IFileTypeable
    {
        // no need to do anything, the property is already implemented on the original class file.
    }
} 
```

最后，您的扩展方法将更改为如下所示：

```
public static IList<IFileTypeable> GetSpecificFiles(this EntityCollection<IFileTypeable> mc)             
{             
    foreach (var item in mc)
    {
        Guid fileTypeId = item.FileTypeId;       
    }
} 
```

# silverlight - 带圆角的边框内的 Silverlight StackPanel

> ID：12304295
> 
> 赞同：0
> 
> 时间：2012-09-06T16:19:42.213
> 
> 标签：silverlight, xaml

这通常是如何处理的？我有这个 xaml：

```
 <Border Grid.Column="1" HorizontalAlignment="Right" 
        VerticalAlignment="Top" Margin="10,25,10,0" Opacity="0.7" 
        BorderBrush="Black" BorderThickness="1" CornerRadius="5">
        <StackPanel>
            <StackPanel.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="LightGray" Offset="0.0" />
                    <GradientStop Color="Gray" Offset="1.0" />
                </LinearGradientBrush>
            </StackPanel.Background> 
```

StackPanel 的左上角和右上角是 LightGray，并且似乎位于 Border 的顶部，因此圆角黑色角的中间是一个或两个 LightGray 像素，打破了圆角。底部边框是灰色而不是黑色。

我想我会用上面的代码得到一个带有圆角的 StackPanel ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:26:39.783

我建议将背景放在 Border 而不是 Stackpanel

```
<Border Grid.Column="1" HorizontalAlignment="Right" 
    VerticalAlignment="Top" Margin="10,25,10,0" Opacity="0.7" 
    BorderBrush="Black" BorderThickness="1" CornerRadius="5">
    <Border.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="LightGray" Offset="0.0" />
            <GradientStop Color="Gray" Offset="1.0" />
        </LinearGradientBrush>
    </Border.Background>
    <StackPanel>
        <!-- Items here -->
    </StackPanel>
</Border> 
```

# iphone - 当应用程序在iphone sdk的后台时如何检测拨出电话

> ID：12304296
> 
> 赞同：1
> 
> 时间：2012-09-06T16:19:42.853
> 
> 标签：iphone, ios5

当我的应用程序在后台时，我需要检测 iPhone 应用程序中的通话状态。当通话状态为传出时，我需要做一些事情。

这可能吗？如果这是可能的，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:26:19.747

这是不可能的。`CTCallCenter`在通话状态下提供一些信息，但您只会在您的应用程序处于活动状态时收到这些通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:37:37.890

签出[`CTCallCenter Class Reference`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCallCenter/Reference/Reference.html)和[`CTCall Class Reference`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCall/Reference/Reference.html#//apple_ref/doc/uid/TP40009590)。可用状态定义为：

## CT呼叫中心

```
callEventHandler 
```

## CTCall

```
callState 
```

## 蜂窝呼叫状态

```
CTCallStateDialing  
CTCallStateIncoming  
CTCallStateConnected  
CTCallStateDisconnected 
```

# c++ - 从 C 函数返回的指针数组的 C++ 包装器

> ID：12304299
> 
> 赞同：3
> 
> 时间：2012-09-06T16:19:52.247
> 
> 标签：c++, stl

我正在将 C++ 前端添加到 C 库中。这个库中的一个函数回调一个带有数组和数组大小的整数的处理程序。因此，您必须提供一个 C 函数，

```
int handler(int argc, sometype **argv); 
```

现在，我想允许 C++ 调用代码提供更多 C++ish 处理函数，例如，

```
int handler(std::vector<sometype*> args); 
```

更改处理程序类型并不难，我只需要提供我自己的`handler`，然后调用用户提供的处理程序。所以我需要创建一个`std::vector`并将其内容复制`argv`到其中。

但是，如果可能的话，我真的不想复制整个指针列表。不幸的是，我认为不可能告诉`std::vector`其内部数组使用已分配的内存块，而且该数组是静态的，应该考虑`const`。

是否有一些类似的 STL 类型`std::vector`可用于以更友好的界面包装预先分配的 C 样式数组？它应该支持大小查询和迭代，类似于`std::vector`.

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:39:31.637

你有没有想过让你的函数使用一对迭代器而不是一个容器？您必须将其设为模板函数，所以我可以理解为什么它可能无法像您希望的那样工作，但它会让您传入数组。

```
template<typename I>
int handler(I begin, I end);

handler(argv, &argv[argc]); 
```

它仍然不是一个完美的解决方案，但它会更通用，并允许您使用预先存在的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:41:21.803

我不确定你在问什么，但如果给我这个函数原型

```
int handler(int argc, const sometype *const *argv); 
```

这是一个 C++ 包装器：

```
int handler(const std::vector<sometype*>& arg) 
{return handler(arg.size(), &arg[0]);} //no copies

template<class const_iterator>
int handler(const_iterator begin, const_iterator end) //can pass any structure
{return handler(std::distance(begin, end), &*begin);} //no copies 
```

下面是我在 C++ 中实现这个 API 的方法：

```
int handler(int argc, const sometype *const*argv) {
    const std::vector<const sometype*> arg(argv, argv+argc); //this will copy the pointers
    //stuff
} 
```

不幸的是，没有办法将现有数组放入向量中，但是复制一些指针真的慢到可以关心吗？

编译证明：http: [//ideone.com/BkSVd](http://ideone.com/BkSVd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:24:55.820

好吧，我确定您是否了解 ::vector，您是否研究过 ::array？

[http://www.cplusplus.com/reference/stl/array/](http://www.cplusplus.com/reference/stl/array/)

然而，主要问题 - 将对象覆盖到现有内存上 - 让我想起了简单的数据包嗅探器：创建对象结构，然后通过将其引用移动到已知数据上来覆盖它。我不确定你是否可以在你的问题中做到这一点，但这将是我考虑的第一个途径。

注意：我不确切知道 std::array 是如何布局的，很明显这很难实现：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:45:10.027

**这些指针元素将引用什么类型的数据？**

**谁是这些指针元素的所有者，我的意思是，那些元素只是被集合/数据结构引用，还是该集合负责分配、解除分配这些项目？**

**这些项目是相同类型还是相同大小？**

**例如，不同大小的字符数组，或可能是不同基类但来自共同祖先的对象。**

所有这些主题都可以用来决定使用哪个库、是否面向对象以及使用哪个数据结构或集合。

似乎 std 和 Boost 应该是首先查找的首选。但是，有时，您可能必须建立自己的收藏。

你的库似乎需要一个可索引的列表概念而不是一个数组，但有时是可以互换的。

干杯。

# perl - 如何在 Perl 中搜索和替换文件中的字符串

> ID：12304301
> 
> 赞同：3
> 
> 时间：2012-09-06T16:19:57.577
> 
> 标签：perl

我的输入文件的内容如下所示：

```
abc\**def\ghi**\abc\!!!!!
abc\**4nfiug\frgrefd\gtefe\wf4fs**\abc\df3gwddw
abc\**eg4/refw**\abc\f3 
```

我需要将`abc \ --------------\abc`输入文件中的任何字符串替换为`ABC\CBA`.

我已经尝试过类似下面的方法来获取需要替换的字符串。但是当我需要使用搜索和替换时我卡住了：

```
my $string1 = qr/abc\W+([^a]+)/;
my $string2 = map{/$string1/ => " "} @input_file; # The string that needs to be replaced
my $string3 = 'ABC\CBA'  # String in that. I want it to replace to

s/$string2/$string3/g 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T22:31:45.913

```
perl -i -pe 's/this/that/g;'  file1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:02:41.093

修复文件的单行：

```
perl -plwe 's/abc\\\K.*(?=\\abc)/ABC\\CBA/' input.txt > output.txt 
```

或作为脚本：

```
use strict;
use warnings;

while (<DATA>) {
    s/abc\\\K.*(?=\\abc)/ABC\\CBA/;
    print;
}

__DATA__
abc\**def\ghi**\abc\!!!!!
abc\**4nfiug\frgrefd\gtefe\wf4fs**\abc\df3gwddw
abc\**eg4/refw**\abc\f3 
```

( `\K`keep) 转义序列意味着这些字符不会被删除。类似地，前瞻断言`(?= ... )`将保留匹配的那部分。我假设您只想更改两者之间的字符。

而不是`\K`一个可以使用后视断言：`(?<=abc\\)`. 作为个人喜好，我`\K`改用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:28:25.510

如果您不希望替换对默认变量进行操作，`$_`则必须使用`=~`运算符：

```
#!/usr/bin/perl
use warnings;
use strict;

my @input_file = split /\n/, <<'__EOF__';
abc\**def\ghi**\abc\!!!!!
abc\**4nfiug\frgrefd\gtefe\wf4fs**\abc\df3gwddw
abc\**eg4/refw**\abc\f3
__EOF__

my $pattern = qr/abc\\.*\\abc/;       # pattern to be matched
my $string2 = join "\n", @input_file; # the string that need to be replaced
my $string3 = 'ABC\CBA';              # string i that i want it to replace to

$string2 =~ s/$pattern/$string3/g;
print $string2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:17:13.443

```
#!/usr/bin/perl
use strict;
use warnings;

open my $fh,"<", "tryit.txt" or die $!;

while (my $line = <$fh>) {
    $line =~ s/(abc\\)(.*?)(\\abc)/$1ABC\\CBA$3/;
    print $line;
} 
```

给出以下输入数据。

```
abc\ABC\CBA\abc\!!!!!
abc\ABC\CBA\abc\df3gwddw
abc\ABC\CBA\abc\f3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T01:32:30.953

要解决您对直接在文件中“就地”替换文本的评论，您可以将[`-i`](http://perldoc.perl.org/perlrun.html)开关用于单行。在脚本中，您也许可以查看 using [`Tie::File`](http://p3rl.org/Tie%3a%3aFile)，它允许对文件行作为数组中的（可变）元素进行读写访问。要复制 Mike/TLP 的答案：

```
#!/usr/bin/perl
use strict;
use warnings;

use Tie::File;

tie my @file, "Tie::File", "tryit.txt" or die $!;

# I think you have to use $_ here (done implicitly)
while (@file) {
    s/(abc\\)(.*?)(\\abc)/$1ABC\\CBA$3/;
    print;
} 
```

# mysql - Magento：在登台和生产之间同步数据库

> ID：12304305
> 
> 赞同：2
> 
> 时间：2012-09-06T16:20:09.937
> 
> 标签：mysql, database, magento, synchronization

我有两个 Magento 实例，一个生产站点和一个临时站点，它们都有自己的代码库和 mysql 数据库。

我们一直在对临时站点进行一些更改，特别是我们已经安装了已经配置**好的预付款和订阅模块。**

我们需要将所有产品从生产站点同步到暂存站点，然后我们需要对产品进行更改，以便将它们配置为与预付款和订阅模块一起使用，最后将所有内容上传回生产站点在我们进行更改时，不会删除任何已添加到生产站点的新客户/订单。

谁能解释一下我们如何做到这一点？

谢谢

史蒂文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:16:29.240

我建议首先将整个实时数据库复制到您的登台环境中。这样，您就可以在暂存时使用最新（实时）数据。之后，在登台时对新安装的模块进行一些测试。实施所需的任何模板和代码更改，并测试所需功能是否正常工作（针对一种产品）。一旦一切按预期工作，就可以实时安装模块，在那里配置它并开始在那里使用它。

因此，请尝试仅在 live 上进行大多数数据库/管理员更改，并使用暂存环境仅用于测试模块是否满足您的需要。这样一来，您就不必进行复杂的数据库同步，也不必做两次相同的事情。同步数据库很容易导致重复订单 ID 等问题，这是我会尽量避免的大量细致工作。在所有产品实时更改后，您可以将整个数据库复制到再次登台，然后进行同步。这样做的风险和细致程度要小得多。希望这可以帮助。

# java - 无法恢复 Android 默认音乐播放器

> ID：12304306
> 
> 赞同：2
> 
> 时间：2012-09-06T16:20:09.890
> 
> 标签：java, android, android-music-player

我正在尝试暂停任何已经在使用默认音乐播放器的 Android 设备中播放的音乐。我浏览了 Android 文档[http://developer.android.com/training/managing-audio/audio-focus.html](http://developer.android.com/training/managing-audio/audio-focus.html)。我可以在需要时暂停音乐，但我无法在工作完成后恢复之前暂停的音乐，尽管我使用了 am.abandonAudioFocus(afChangeListener);

```
 AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

        // Request audio focus for playback
        int result = am.requestAudioFocus(mAudioFocusListener,
                                         // Use the music stream.
                                         AudioManager.STREAM_MUSIC,
                                         // Request permanent focus.
                                         AudioManager.AUDIOFOCUS_GAIN);

        if (result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED) {

                mPlayer.start();
        } 
```

一旦我的语气停止，我就会打电话`am.abandonAudioFocus(mAudioFocusListener)`并且无法做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:40:52.327

尝试使用 AudioManager.AUDIOFOCUS_GAIN_TRANSIENT，而不是使用 AudioManager.AUDIOFOCUS_GAIN。

# javascript - 服务器端 JavaScript 会话

> ID：12304307
> 
> 赞同：0
> 
> 时间：2012-09-06T16:20:10.690
> 
> 标签：javascript, session, login, server-side, exacttarget

我在一个专有环境（ExactTarget）中工作，我必须使用我不熟悉的服务器端 JavaScript。我需要为受 pw 保护的页面创建登录名。任何人都知道如何在 SSJS 中创建/启动会话、设置会话变量等？我似乎无法在那里找到太多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:31:07.637

如果你想使用节点，那么你应该参考这个线程关于 node.js 的[会话管理 Node.js 中的会话？](https://stackoverflow.com/questions/3737062/managing-sessions-in-nodejs)

# php - 将 php 代码作为文件中的纯文本输出

> ID：12304308
> 
> 赞同：0
> 
> 时间：2012-09-06T16:20:10.493
> 
> 标签：php, html

假设我们有一个`template.php`包含一堆 html 和一些 php 代码的文件，例如：

```
...
<body>
    <div class="content">
        <?php echo $content; ?>
    </div>
</body>
... 
```

我想将文件的内容作为文本（包括 php 代码）读取并在文本区域中输出，以便用户能够编辑模板。我正在尝试使用 来完成此操作`file_get_contents`并使用 渲染它`htmlspecialchars`，但它似乎在从文件中读取 php 代码时执行它。在这种情况下如何避免解释和执行php代码？谷歌搜索没有帮助，也许我还不够努力。有小费吗？谢谢！

编辑：好的，我解决了这个问题。问题是我将文件的 URL 路径传递给`file_get_contents`而不是其文件系统路径，显然这导致所有 php 代码被剥离和忽略（？）。感谢您的提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:32:49.020

`file_get_contents`不会执行 PHP 代码，除非您尝试在远程服务器上编辑文件并提供 URL。在这种情况下，您从远程服务器获得的将是执行的 PHP 代码，而不是源代码。

要么编辑一个本地文件，要么你需要提供一个“后门”，它将把给定 PHP 文件的代码发回给你。小心，因为这是一个安全漏洞——任何人都可能阅读你的 PHP 源代码。

避免这种情况的一种方法是仅在文件位于给定目录中时才接受提供文件。另一个可能是检查文件内容：

```
<?php

    // This file will read any local PHP file (or any file of any kind,
    // returning it as text), provided they contain a written agreement
    // to be read.
    if (!isset($_REQUEST['file']))
        die("ERROR: no file supplied");
    $path = $_REQUEST['file'];
    if (!is_readable($path))
        die("ERROR: file is not readable");
    $content = file_get_contents($path);
    if (false === strpos($content, "IT IS OK TO READ THIS FILE AS SOURCE"))
        die("ERROR: this file is not authorized");
    if (false !== strpos($content, "IT IS NOT OK TO READ THIS FILE AS SOURCE"))
        die("ERROR: this file is not authorized");
    Header("Content-Type: text/plain");
    Header("Content-Length: " . strlen($content));
    die($content);
?> 
```

为了能够读取文件，文件本身必须包含声明，例如

```
// IT IS OK TO READ THIS FILE AS SOURCE 
```

并且*不得*包含相反含义的声明。

# actionscript-3 - URLrequest 缓存响应不起作用

> ID：12304309
> 
> 赞同：1
> 
> 时间：2012-09-06T16:20:25.443
> 
> 标签：actionscript-3, flash, actionscript, air

我想缓存 urlRequest 的响应以在 Adob​​e Air 中离线使用。当我为 Flash Player 编译时，缓存可以工作，即使我断开网络连接我也会得到响应，但是当我为 Adob​​e Air 编译时，我得到了错误。PS：useCache 和 cacheResponse 不起作用！

```
stage.addEventListener(MouseEvent.CLICK , callReq)
var loader:URLLoader = new URLLoader()

    function callReq(e:Event):void 
    {
            //URLRequestDefaults.manageCookies = true; 
        //URLRequestDefaults.useCache = true;
        var r:String = "http://onecom.no/presentation_json.php?what=get_slides&slide_id[]=2540"
        var urlRequest:URLRequest = new URLRequest(r)

        //  urlRequest.cacheResponse = true
        //  urlRequest.useCache = true

            urlRequest.url = r
        loader.addEventListener(Event.COMPLETE , Comp)
        loader.load(request)
    }

    function Comp(e:Event):void 
    {
        trace( e.target.data)   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:35:47.583

将它们保存到变量并将它们存储在设备/计算机上的本地 SQLlite 数据库中？... [在设备上使用本地 SQLlite](http://www.adobe.com/devnet/air/flash/quickstart/articles/encrypted_database_flash.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:57:13.473

Air 无法使用浏览器缓存。我必须构建自己的缓存类，将所有 URLRequest 响应保存到共享对象并在没有互联网连接时加载它们

# ruby-on-rails - 邮件在 ruby on rails 中合并，但数量很大

> ID：12304310
> 
> 赞同：5
> 
> 时间：2012-09-06T16:20:28.383
> 
> 标签：ruby-on-rails, ruby, pdf, printing, mailmerge

我正在尝试为 Ruby on Rails 3.2 中的打印文档实现某种邮件合并。我在 Microsoft Word 中有大约 8000 个收件人和模板来源。模板包括图像（照片），包含大约 10-20 页。

实际情况是，我将原始模板重写为 Textile (redcloth)，并且图片是从互联网 (http 地址) 插入的。我做了所有的个性化等。所以我生成了 HTML 文件，并且必须将它分成许多小文件，每个文件 1000 页。我总共需要打印大约 8000 x 20 页 = 160.000 页。

任何人都知道如何将其从 HTML 打印为 PDF？或者如何在每 20 页后插入更改纸盘（第一页和最后一页）或装订的命令等？

谢谢你的任何想法:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:28:20.690

这是一个想法：在您的 Rails 应用程序中，将其设置为每个用户返回一个 html。另外，有一个很好的 /users/ index 方法，它可以方便地返回用户列表，可能是 json 格式。

现在，您需要一个用 ruby​​、bash 等方便的方式编写的*本地脚本：*

*   从该 /users/ 方法获取用户列表，可能将其保存到文件中
*   遍历用户列表（从文件中，所以他们并不都在内存中），并获取电子邮件的 HTML
*   从每个下载的 HTML 生成 pdf，无论是在循环内，还是在您保存 HTML 的目录中循环文件。使用 wkhtmltopdf 或类似的。
*   将每个 pdf 发送到打印机，再次在同一个循环内，或者在保存的 pdf 上循环。

如果你想变得花哨，更高效，你可以使用像 resque 这样的队列系统，并将这些要点中的每一个都放入一个队列中，每个队列运行一个工作人员。这将让您开始打印一些 pdf，而其他人仍在下载和转换，因此总体上应该更少时间。但是，如果您还不熟悉这样的排队系统，那么一个简单的脚本也应该可以完成。

# bash - BASH 发现 ctime 没有按预期工作

> ID：12304311
> 
> 赞同：2
> 
> 时间：2012-09-06T16:20:33.370
> 
> 标签：bash

我无法“查找”来定位旧文件。我将我的发现链接到一个语句中，并且所有其他部分都运行良好。这是我所拥有的精简版。它搜索 $path 的目录树并为找到的每个项目创建仅包含换行符的单独临时文件：所有文件、365 天前更改的文件以及所有目录。文件和目录工作正常（以及我在这里没有包括的其他 6 个链式搜索），但是 ctime 返回 0 个命中，我知道我正在使用的目录中有匹配的文件。

```
find $path \
\( -type f -fprintf /tmp/files.txt "\n" \) , \
\( -type f -ctime +365 -fprintf /tmp/oldfiles.txt "\n" \) , \
\( -type d -fprintf /tmp/dirs.txt "\n" \) 
```

这似乎与 find 的手册页一致。它说 -ctime n 查找更改时间为 n 天的文件。+ 给出 >n 天，- 给出 <n 天，没有符号正好给出 n 天。尽管看起来一切正常，但我的临时文件仍然出现 0 行。有什么想法吗？另外值得注意的是，为了节省处理时间，我需要在一次遍历文件系统时找到这些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:54:52.177

“更改时间”是指“元数据更改时间”，即权限或所有权发生更改的时间。考虑改用 mtime。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:01:29.207

-ctime n 文件状态最后一次更改是 n*24 小时前。请参阅 -atime 的注释以了解舍入如何影响文件状态更改时间的解释。

-mtime n 文件的数据最后一次修改是在 n*24 小时前。请参阅 -atime 的注释以了解舍入如何影响文件修改时间的解释。

状态 = 权限、用户、组，可能还有 ACL 等。

内容 = 您的文件数据

如果您的文件在 1.5 年前更改了其所有权并且没有显示，那是个问题，但如果您要检测的是其内容的更改，请尝试 -mtime。

旁注： -atime 在某些系统中使用起来可能很棘手，因为它也构成了访问。旁注 2：这是一个*查找*问题，并且完全不特定于 bash。

# java - 自定义注解采用抽象关键字

> ID：12304316
> 
> 赞同：0
> 
> 时间：2012-09-06T16:20:54.043
> 
> 标签：java

当尝试在 java 中定义自定义注解时，我们也可以将其与 public 关键字一起指定为抽象的。我想知道它解决了什么目的，因为注释无法扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:30:53.583

注释类型被声明为接口，并且`abstract`在接口上没有任何意义：

> [9.1.1.1 抽象接口](http://docs.oracle.com/javase/specs/jls/se5.0/html/interfaces.html#9.1.1.1)
> 
> 每个接口都是隐式抽象的。此修饰符已过时，不应在新程序中使用。

# c++ - Clang 和 C++11 头文件

> ID：12304319
> 
> 赞同：12
> 
> 时间：2012-09-06T16:21:02.123
> 
> 标签：c++, windows, c++11, mingw, clang

我试图让 Clang 在 Windows 上工作，最终使用 Qt Creator 进行开发，看看它是否是 Visual Studio 的可行替代方案。

我让 LLVM 和 Clang 3.2（SVN 修订版 163238）使用[MinGW w64](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/)`AddMinGWCPlusPlusIncludePaths("D:/Code/mingw/lib/gcc", "x86_64-w64-mingw32", "4.7.0");` （mingw-w64-bin_i686-mingw_20111220.zip）进行编译，并且还通过添加指向gcc 的 C++ 头目录`clang/lib/Frontend/InitHeaderSearch.cpp`，尽管我认为这可能不是最高级的迄今为止的方法。无论如何，Clang 似乎找到了大多数这些标题。

但是，在编译一个简单的 Hello World 时：

```
#include <iostream>
int main(int argc, char* argv[])
{
  std::cout << "test\n";
  return 0;
} 
```

使用`clang++ main.cpp`我得到这个错误：

```
In file included from main.cpp:1:
In file included from D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\iostream:39:
In file included from D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\ostream:39:
In file included from D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\ios:39:
In file included from D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\iosfwd:41:
In file included from D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\postypes.h:41:
D:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++\cwchar:45:10: fatal error:
      'wchar.h' file not found 
```

因此，Clang 显然找到了几个 C++ 头文件，包括`iostream`但未能找到`wchar.h`. 原来它`wchar.h`位于`.../include/c++\tr1`Clang 不寻找它的地方。将这些 TR1 标头向上移动一个目录也无济于事。

我在这里做错了什么？gcc C++ 库是否与 Clang 不兼容，因为显然它还没有将一些 TR1 库集成到标准中？我在哪里可以获得 Clang 兼容的 C++11 库（适用于 Windows！）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T12:58:20.210

您配置错误/分配错误的 Clang。您还需要在添加版本的位置附近添加 MinGW-w64 路径。

使用我在此处提供解释的预构建版本： [Windows 上的 Clang](https://stackoverflow.com/questions/8882753/clang-on-windows/8883505#8883505)

我修改了 Clang 以使用 MinGW-w64 头文件和 GCC 4.6.3 libstdc++ 头文件和库。目前，它停留在 3.2 版，但如果您对源应用类似的补丁（遗憾的是我没有补丁文件），您应该也可以使用它。

我提供的只是提取、添加到 PATH 并使用。并且仅限 32 位。

另请注意，您使用的是旧版 MinGW-w64 GCC，您应该真正更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T05:41:58.903

尝试手动下载“wchar.h”并将其放在 Visual Studio 项目的本地工作目录中。对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T12:31:23.807

如果您传递`-nostdinc++`给 clang，您应该能够将其指向包含多个`-I`开关的确切配置。也试试`-nostdsysteminc -nobuiltininc`。

并且`-v`应该向您展示它在编译时在哪里以及以什么顺序查找标头：

```
clang++ -v -nostdinc++ -ID:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++ -ID:/Code/mingw/lib/gcc/x86_64-w64-ming32/4.7.0./include/c++/tr1 foo.cpp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T17:21:25.763

我使用 Clang --version 3.4 (198054) 和 mingw-get.exe --version 0.6.2-beta-20131004-1 遇到了同样的问题：原来我错误地安装了 MinGW：我最初只选中了该框对于 mingw-get.exe 包选择对话框中的“mingw-gcc-g++”，稍后添加“mingw32-base”解决了这个 wchar_t.h 问题：clang++.exe -std=c++11 编译的 C++11 iostream代码就好了。

# sql - 分布式查询是否禁用绑定窥视？

> ID：12304320
> 
> 赞同：8
> 
> 时间：2012-09-06T16:21:10.717
> 
> 标签：sql, oracle, plsql, oracle11g

在升级到 Oracle 11g 后，我在优化 Oracle 查询时遇到了问题，这个问题开始让我有点抓狂。

请注意，这个问题现在已经完全编辑，因为我在创建一个简单的测试用例后获得了更多信息。原始问题可在此处获得：[https](https://stackoverflow.com/revisions/12304320/1) ://stackoverflow.com/revisions/12304320/1 。

这个问题是，当连接两个表时，其中一个表`between`在日期列上有条件，如果查询连接到远程表，则不会发生绑定窥视。

这是一个帮助重现问题的测试用例。首先设置两个源表。第一个是日期列表，是本月的第一天，可以追溯到三十年前

```
create table mike_temp_etl_control
as 
select
  add_months(trunc(sysdate, 'MM'), 1-row_count) as reporting_date
from (
  select level as row_count
  from dual
  connect by level < 360
); 
```

然后一些数据来自`dba_objects`：

```
create table mike_temp_dba_objects as
select owner, object_name, subobject_name, object_id, created
from dba_objects
union all
select owner, object_name, subobject_name, object_id, created
from dba_objects; 
```

然后创建一个空表来运行数据：

```
create table mike_temp_1
as
select 
  a.OWNER,
  a.OBJECT_NAME,
  a.SUBOBJECT_NAME,
  a.OBJECT_ID,
  a.CREATED,
  b.REPORTING_DATE
from 
  mike_temp_dba_objects a
  join mike_temp_etl_control b on (
      b.reporting_date between add_months(a.created, -24) and a.created)
  where 1=2; 
```

然后运行代码。您可能需要创建一个更大的版本 mike_temp_dba_objects 以减慢查询速度（或使用其他方法来获取执行计划）。在查询运行时，我通过从不同的会话运行从会话中获取执行计划`select * from table(dbms_xplan.display_cursor(sql_id => 'xxxxxxxxxxx'))`。

```
declare
  pv_report_start_date date := date '2002-01-01';
  v_report_end_date date := date '2012-07-01';

begin

  INSERT /*+ APPEND */
  INTO mike_temp_5
  select 
    a.OWNER,
    a.OBJECT_NAME,
    a.SUBOBJECT_NAME,
    a.OBJECT_ID,
    a.CREATED,
    b.REPORTING_DATE
from 
  mike_temp_dba_objects a
  join mike_temp_etl_control b on (
    b.reporting_date between add_months(a.created, -24) and a.created)
  cross join dual@emirrl -- This line causes problems...
where 
  b.reporting_date between add_months(pv_report_start_date, -12) and v_report_end_date;

  rollback;  
end; 
```

通过在查询中有一个远程表，mike_temp_etl_control 表的基数估计是完全错误的，并且绑定偷看似乎没有发生。

上面查询的执行计划如下所示：

```
---------------------------------------------------------------------------------------
| Id  | Operation                | Name                  | Rows  | Bytes | Cost (%CPU)|
---------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                       |       |       |   373 (100)|
|   1 |  LOAD AS SELECT          |                       |       |       |            |
|*  2 |   FILTER                 |                       |       |       |            |
|   3 |    MERGE JOIN            |                       |     5 |   655 |   373  (21)|
|   4 |     SORT JOIN            |                       |  1096 |   130K|   370  (20)|
|   5 |      MERGE JOIN CARTESIAN|                       |  1096 |   130K|   369  (20)|
|   6 |       REMOTE             | DUAL                  |     1 |       |     2   (0)|
|   7 |       BUFFER SORT        |                       |  1096 |   130K|   367  (20)|
|*  8 |        TABLE ACCESS FULL | MIKE_TEMP_DBA_OBJECTS |  1096 |   130K|   367  (20)|
|*  9 |     FILTER               |                       |       |       |            |
|* 10 |      SORT JOIN           |                       |     2 |    18 |     3  (34)|
|* 11 |       TABLE ACCESS FULL  | MIKE_TEMP_ETL_CONTROL |     2 |    18 |     2   (0)|
--------------------------------------------------------------------------------------- 
```

如果我然后用`dual`本地版本替换遥控器，我会得到正确的基数（139 而不是 2）：

```
-------------------------------------------------------------------------------------
| Id  | Operation              | Name                  | Rows  | Bytes | Cost (%CPU)|
-------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT       |                       |       |       | 10682 (100)|
|   1 |  LOAD AS SELECT        |                       |       |       |            |
|*  2 |   FILTER               |                       |       |       |            |
|   3 |    MERGE JOIN          |                       |   152K|    19M| 10682   (3)|
|   4 |     SORT JOIN          |                       |   438K|    51M| 10632   (2)|
|   5 |      NESTED LOOPS      |                       |   438K|    51M|   369  (20)|
|   6 |       FAST DUAL        |                       |     1 |       |     2   (0)|
|*  7 |       TABLE ACCESS FULL| MIKE_TEMP_DBA_OBJECTS |   438K|    51M|   367  (20)|
|*  8 |     FILTER             |                       |       |       |            |
|*  9 |      SORT JOIN         |                       |   139 |  1251 |     3  (34)|
|* 10 |       TABLE ACCESS FULL| MIKE_TEMP_ETL_CONTROL |   139 |  1251 |     2   (0)|
------------------------------------------------------------------------------------- 
```

所以，我想问题是我怎样才能得到正确的基数来估计？这是 Oracle 错误还是预期的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:18:34.893

我认为你应该搞砸动态采样。它在 11g 中的工作方式不同，因此可能是您遇到麻烦的原因。

# datetime - 如何清除 SOAP Web 服务中的日期时间字段？

> ID：12304321
> 
> 赞同：2
> 
> 时间：2012-09-06T16:21:10.913
> 
> 标签：datetime, soap, jaxb, unmarshalling

我有一个网络服务，用户可以使用它更新他/她的个人资料。现在的问题是，如果用户想要在他们的个人资料中清除任何日期字段（比如 DOB 或注册日期）并且用户发送 ，那么响应如下

```
<faultcode>ns1:Client</faultcode>
<faultstring>Unmarshalling Error:</faultstring> 
```

如何通过soapUI 删除日期？我搜索了很多，尝试了 nillable 但徒劳无功。

技术：jaxb

以下是应用程序控制台输出：

```
 16:05:39,508 INFO  [WSCallbackHandler] WSPasswordCallback attempt: rd
16:05:39,534 INFO  [STDOUT] DefaultValidationEventHandler: [ERROR]:  
     Location: line 0
16:05:39,534 WARNING [PhaseInterceptorChain] Interceptor for {http://abc.com/services/}ProfileUpdateService#{http://abc.com/services/}updateProfile has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Unmarshalling Error:  
    at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:773)
    at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:624)
    at org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:128)
    at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:109)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:110)
    at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:98)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:423)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:178)
    at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:142)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:619)
Caused by: javax.xml.bind.UnmarshalException
 - with linked exception:
[javax.xml.bind.UnmarshalException: 
 - with linked exception:
[java.lang.IllegalArgumentException: ]]
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:425)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:362)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:339)
    at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:755)
    ... 33 more
Caused by: javax.xml.bind.UnmarshalException: 
 - with linked exception:
[java.lang.IllegalArgumentException: ]
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:642)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext.java:671)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleError(UnmarshallingContext.java:667)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.handleParseConversionException(Loader.java:267)
    at com.sun.xml.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:65)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:494)
    at com.sun.xml.bind.v2.runtime.unmarshaller.InterningXmlVisitor.text(InterningXmlVisitor.java:89)
    at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.processText(StAXStreamConnector.java:334)
    at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleEndElement(StAXStreamConnector.java:212)
    at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:181)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)
    ... 35 more
Caused by: javax.xml.bind.UnmarshalException: 
 - with linked exception:
[java.lang.IllegalArgumentException: ]
    ... 46 more
Caused by: java.lang.IllegalArgumentException: 
    at org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl$Parser.parseYear(Unknown Source)
    at org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl$Parser.parse(Unknown Source)
    at org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl.<init>(Unknown Source)
    at org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl.newXMLGregorianCalendar(Unknown Source)
    at com.sun.xml.bind.DatatypeConverterImpl._parseDateTime(DatatypeConverterImpl.java:397)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:280)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$4.parse(RuntimeBuiltinLeafInfoImpl.java:282)
    at com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.parse(TransducedAccessor.java:243)
    at com.sun.xml.bind.v2.runtime.unmarshaller.LeafPropertyLoader.text(LeafPropertyLoader.java:61)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:19:17.560

利用`XmlAdapter`

```
 public class Foo 
 {
     @XmlJavaTypeAdapter(DateAdapter.class)
     YourDateTimeType hashmap;
     ...
 } 
```

和适配器

```
public class DateAdapter extends XmlAdapter<YourDateTimeType, String>
{

   @Override
   public String unmarshal(YourDateTimeType v) throws Exception
   {
      // your date time to string
   }

   @Override
   public YourDateTimeType marshal(String v) throws Exception
   {
      // string to your date time
   }

} 
```

在您可以检查的适配器中，字段是否为空

# c - 使用 __attribute__(__packed__) 填充结构，真的值得吗？

> ID：12304326
> 
> 赞同：6
> 
> 时间：2012-09-06T16:21:26.300
> 
> 标签：c, gcc, struct

```
gcc (GCC) 4.7.0
c89
x86_64 
```

你好，

我想知道使用`__attribute__ ((__packed__))`on 结构是否值得。在我看来，有了它，结构的尺寸会更小。通过我在下面进行的测试。所以使用它在尺寸上将是一个优势。

不使用它的情况，因为它不能跨其他编译器移植。因此，对于 Visual Studio C++，这是行不通的。加上其他编译器。

编译器不会优化代码吗？所以真的让编译器来决定做什么会更好地提高性能吗？

使用对齐的属性会有什么不同吗？`__attribute__((packed, aligned(4)))`当我添加它返回 12 的大小时。

非常感谢您的任何建议，

```
#include <stdio.h>

struct padded {
    int age;      /* 4                    */
    char initial; /* 1 + 3 padded bytes   */
    int weight;   /* 4     --> total = 12 */ 
};

struct __attribute__ ((__packed__)) unpadded {
    int age;      /* 4                  */
    char initial; /* 1                  */
    int weight;   /* 4    --> total = 9 */
};

int main(int argc, char **argv)
{
    struct padded padded_test;
    struct unpadded unpadded_test;

    printf("Padded   [ %ld ]\n", sizeof(struct padded));
    printf("Unpadded [ %ld ]\n", sizeof(struct unpadded));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T16:31:27.693

在某些体系结构（例如 ia64、sparc64）上，未对齐的内存访问可能非常缓慢。 `__attribute__((__packed__))`主要用于您通过线路发送数据并希望确定布局的情况；不值得尝试使用它来节省内存空间。

如果您*正在*考虑使用`__attribute__((__packed__))`有线传输，请再考虑一下；它不处理字节顺序，而且它是非标准的。自己编写编组代码更安全，使用库（例如协议缓冲区）更智能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T13:42:18.263

另一个用途`__attribute__((packed))`是访问内存映射控制器。正如其他人所建议的那样，除了非常具体的事情之外，它并没有真正有用。未对齐的访问是不好的，在某些架构上它会产生异常。

# android - Android Fade Out LinearLayout 从不启动

> ID：12304332
> 
> 赞同：6
> 
> 时间：2012-09-06T16:21:52.163
> 
> 标签：android, android-animation, fadeout

我是 Android 上的动画新手，我似乎遇到了一个简单的问题......我有一个启动/加载屏幕，我想在它完成后淡出，然后显示应用程序。

我的布局看起来像这样（样式只是设置了背景图像）：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeParentContainer"
    style="@style/LayoutWithBgStyle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/homeSplashLayout"
        style="@style/LayoutWithSplashStyle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/homeMainLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical"
        android:visibility="gone" >
    </LinearLayout>
</RelativeLayout> 
```

然后我尝试了两种不同的方法来淡出启动屏幕并设置主屏幕可见：

```
final Animation fadeOut = AnimationUtils.loadAnimation(this, android.R.anim.fade_out);
final View splash = findViewById(R.id.homeMainLayout);
fadeOut.setAnimationListener(new AnimationAdapter()
{
    @Override
    public void onAnimationEnd(final Animation animation)
    {
        splash.setVisibility(View.GONE);
        findViewById(R.id.homeMainLayout).setVisibility(View.VISIBLE);
    }

    /** And the other two methods */

});
splash.startAnimation(fadeOut); 
```

然后我尝试了自己的动画：

```
final AlphaAnimation fadeOut = new AlphaAnimation(1.0F,  0.0F);
fadeOut.setDuration(1000);
final View splash = findViewById(R.id.homeMainLayout);
fadeOut.setAnimationListener(new AnimationListener()
{
    @Override
    public void onAnimationEnd(final Animation animation)
    {
        splash.setVisibility(View.GONE);
        findViewById(R.id.homeMainLayout).setVisibility(View.VISIBLE);
    }

    /** And the other two methods */

});
splash.startAnimation(fadeOut); 
```

我得到了 startAnimation 代码，但动画似乎从来没有开始，而且我从来没有得到 onAnimationEnd() 调用。我忘记包含什么才能让动画真正运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:48:49.807

我一直是一个粗心的程序员。

```
final View splash = findViewById(R.id.homeMainLayout); 
```

实际上应该是：

```
final View splash = findViewById(R.id.homeSplashLayout); 
```

因为淡出不可见的东西不是我的本意。

# ios - 将新的配置文件添加到现有的 TestFlight 构建

> ID：12304338
> 
> 赞同：12
> 
> 时间：2012-09-06T16:22:20.600
> 
> 标签：ios, testflight

所以我一直在使用 TestFlight 和一个正在开发的应用程序。到目前为止，Beta 用户的变化并没有那么快，因此只需将新设备添加到配置文件并在需要时发布新版本就很容易了。但是，我们最近开始快速扩展 Beta 用户池，并且每次我们想要添加新用户时都向 TestFlight 发布新版本似乎不再是理想的解决方案。所以我知道他们有一个功能，可以让你在我正在尝试使用的新配置文件中上传带有新设备的新配置文件。所以那时我让新用户尝试安装应用程序，TestFlight WebClip 要求用户安装新配置文件（因为它不再像初始构建/配置文件那样嵌入到应用程序中）。

好的，完整的详细信息：

*   我使用 testUsers1.mobileprovision 文件构建了一个应用程序并将其上传到 TestFlight。

*   稍后，我将 UserX 添加到新的移动配置文件 testUsers2.mobileprovision。

*   在旧版本的权限部分下，我使用“更新配置文件”将 testUsers2 加载到 TestFlight。

*   UserX 然后在他们的设备上启动 TestFlight webclip/app。

*   TestFlight 不是安装/下载应用程序，而是要求他们安装新的 testUsers2 配置文件，并且用户确实安装了该文件。

*   UserX 然后在设备上重新启动 TestFlight 并再次要求他们安装新配置文件，而不是实际安装/下载应用程序。

我已经写信给 TestFlight，询问任何可能出现问题的想法，但尚未收到答复。有人看到我在这里做错了吗？还是我在设备上的 TestFlight Webclip 中遇到了某种错误？

更新：我与 TestFlight 交换了几封电子邮件，他们回复说“虽然我们解决了这个问题，但我们可以推荐的最好的事情是重新上传相同的构建以及与之关联的新配置文件。它将不会创建新版本，但会更新 TestFlight 中的最新版本。”

所以，希望他们很快就会有答案。

谢谢，

将要

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-10T17:35:59.807

**自 iOS 8 推出以来，**这不再可能，请查看他们的支持页面**[添加更多测试人员到构建？](http://help.testflightapp.com/customer/portal/articles/829818-adding-more-testers-to-a-build-)：**

 **> 由于 iOS 8 中的更改，测试人员无法再从 iOS 设置应用程序安装配置文件。应用程序开发人员现在需要重建他们的 Ad Hoc beta 应用程序，以更新应用程序 IPA 文件中的嵌入式配置文件。

您将需要使用更新的配置文件添加新构建。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-10T19:36:32.330

每次配置文件更改时，您都不需要创建新的构建 - 您所要做的就是从 Provising Portal 下载更新的配置文件，然后转到 TestFlight 上所选构建的页面，单击“权限”，然后单击“更新配置文件”并选择新的配置文件文件。

您描述的问题可能与构建的配置配置文件无关，而是 WebClip 本身 - 尝试在 Settings -> General -> Profiles -> TestFlight WebClip 中删除它，然后重新安装。**

# javascript - 使用 Javascript 模块模式覆盖方法

> ID：12304341
> 
> 赞同：0
> 
> 时间：2012-09-06T16:22:34.567
> 
> 标签：javascript, overriding, virtual-functions

我有一个浏览器插件，我已经维护了 5 年，我想在 Firefox 和 Chrome 版本之间分享一些通用代码。

我决定使用[Javascript 模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)，但我遇到了一个问题，例如，加载特定于浏览器的首选项、保存数据和其他与浏览器相关的东西。

我想做的是让共享代码引用虚拟的、可覆盖的方法，这些方法可以在派生的、特定于浏览器的子模块中实现。

这是我到目前为止所获得的一个快速示例，我在 Firebug 控制台中使用我引用的文章中的 Tight Augmentation 方法进行了尝试：

```
var core = (function(core)
{
    // PRIVATE METHODS
    var over = function(){ return "core"; };

    var foo = function() {
        console.log(over());
    };

    // PUBLIC METHODS
    core.over = over;
    core.foo = foo;

    return core;
}(core = core || {}));

var ff_specific = (function(base)
{
    var old_over = base.over;

    base.over = function() { return "ff_specific"; };

    return base;
}(core));

core.foo();
ff_specific.foo(); 
```

不幸的是，对 foo() 的两个调用似乎都打印了“核心”，所以我认为我对某些东西有一个根本的误解。

本质上，我希望能够调用：

```
get_preference(key)
set_preference(key, value)
load_data(key)
save_data(key, value) 
```

并让每个浏览器做自己的事情。这可能吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:38:41.103

您永远不会在 ff_specific 代码中覆盖对 foo 的调用，它直接引用私有函数 over() （永远不会被覆盖），而不是函数 core.over() （确实如此）。

根据您的用例解决它的方法是将对 over() 的调用更改为对 core.over() 的调用。

也就是说，海事组织，重用事物的名称真的让自己感到困惑。也许这只是示例代码。我也不相信您需要将核心传递给基本函数（仅传递给孩子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:40:24.127

在 javascript 函数中具有“词法范围”。这意味着函数在定义它们时创建它们的环境 - 范围，而不是在它们执行时。这就是为什么你不能稍后替换“over”函数的原因：

```
var over = function(){ return "core"; };

var foo = function() {
    console.log(over());
};
//this closure over "over" function cannot be changed later 
```

此外，您“说”“over”应该是“core”的私有方法，而“ff_specific”应该以某种方式扩展“core”并更改它（在这种情况下，私有方法不应被设计覆盖）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:58:54.377

谢谢你的帮助。我忘记了在定义闭包后我无法重新分配闭包。我确实想出了一个解决方案。

部分问题只是盲目地遵循文章中的示例代码，这意味着构建模块的匿名函数被立即调用（Paul 提到的名称的重用）。无法重新分配闭包，即使是我专门公开的闭包，这意味着我以后甚至无法将具有自己方法的对象传递给它，然后检查它们。

这就是我最终要做的事情，并且看起来效果很好：

```
var ff_prefs = (function(ff_prefs)
{
    ff_prefs.foo = function() { return "ff_prefs browser specific"; };

    return ff_prefs;
}({}));

var chrome_prefs = (function(chrome_prefs)
{
    chrome_prefs.foo = function() { return "chrome_prefs browser specific"; };

    return chrome_prefs;
}({}));

var test_module = function(extern)
{
    var test_module = {};

    var talk = function() {
        if(extern.foo)
        {
            console.log(extern.foo());
        }
        else
        {
            console.log("No external function!");
        }
    };

    test_module.talk = talk;

    return test_module;
};

var test_module_ff = new test_module(ff_prefs);
var test_module_chrome = new test_module(chrome_prefs);
var test_module_none = new test_module({});

test_module_ff.talk();
test_module_chrome.talk();
test_module_none.talk(); 
```

之前，它自己运行，然后当扩展启动时，它会调用一个 init() 函数，它仍然可以这样做。它不再是一个匿名函数。

# android - Android TextView 中的 setText() 什么都不做

> ID：12304344
> 
> 赞同：1
> 
> 时间：2012-09-06T16:22:36.593
> 
> 标签：android, android-layout

我有一个这样的 Android xml 布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="#184A64">

<ImageView
    android:id="@+id/logoTop"
    android:layout_width="fill_parent"
    android:layout_height="42dip"
    android:layout_alignParentTop="true"
    android:layout_gravity="center"
    android:background="#F1CF2F"
    android:contentDescription="@string/descLogoTop"
    android:padding="4dip"
    android:src="@drawable/logoTop" />

<ImageView
    android:id="@+id/logoBot"
    android:layout_width="fill_parent"
    android:layout_height="42dip"
    android:layout_alignParentBottom="true"
    android:layout_gravity="center"
    android:background="#F1CF2F"
    android:contentDescription="@string/descLogoBot"
    android:padding="4dip"
    android:src="@drawable/logoBot" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/logoTop"
    android:orientation="vertical"
    android:padding="6dip" >

    <TextView
        android:id="@+id/data"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:text="date"
        android:textColor="#FFFFFF"
        android:textSize="12sp"
        android:textStyle="normal" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="103dip"
        android:layout_height="62dip"
        android:layout_marginBottom="6dip"
        android:layout_marginRight="6dip"
        android:contentDescription="@string/descLogo"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/toptext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:text="title"
        android:textColor="#F1CF2F"
        android:textSize="12sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/bottomtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:text="text"
        android:textColor="#FFFFFF"
        android:textSize="12sp" />
</LinearLayout>
</RelativeLayout> 
```

它是一个简单的布局，屏幕顶部和底部有两个 ImageView，中间有一个 LinearLayout。我想要的是从 Bundle 中获取一些数据并将其写入 LinearLayout。为此，我有以下 Java 代码：

```
public class NewsD extends Activity {

    private ProgressDialog m_ProgressDialog = null; 
    private Runnable viewNews;
    private Bundle bundle;
    private News m_news = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_news_activity);

        bundle = this.getIntent().getExtras();

        m_ProgressDialog = ProgressDialog.show(NewsD.this,    
                this.getString(R.string.wait), this.getString(R.string.receiving, true));

        runOnUiThread(new Runnable(){
            @Override
            public void run() { 
                getNews();
            }
        });                                 
    }

    public void getNews() {

        m_news = new News();
        m_news.setNewsTitle(bundle.getString("title"));
        m_news.setNewsText(bundle.getString("text"));
        m_news.setNewsDate(bundle.getString("data"));
        m_news.setNewsPhoto(bundle.getString("photo"));

        LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = vi.inflate(R.layout.activity_news_activity, null);

        try{
            ImageView iv = (ImageView) v.findViewById(R.id.icon);
            TextView tt = (TextView) v.findViewById(R.id.toptext);
            TextView bt = (TextView) v.findViewById(R.id.bottomtext);

            if (iv != null) {
                try{
                    Bitmap bmp = Utils.getBitmapFromURL("http://www.myserver.com/IMG/" + m_news.getNewsPhoto());
                    if (bmp == null){
                        Log.i("PHOTO ERROR", "http://www.myserver.com/IMG/" + m_news.getNewsPhoto());
                    }
                    iv.setImageBitmap(bmp);                     
                } catch (Exception e){
                    Log.e("IMAGE ERROR", e.getMessage() + " - " + e.getStackTrace());
                }
            }
            if (tt != null) {
                tt.setText(m_news.getNewsTitle());
            }
            if(bt != null){
                bt.setText(m_news.getNewsText());
            }   
            TextView dt = (TextView) v.findViewById(R.id.data);         
            Date nd = new Date(Long.parseLong(m_news.getNewsDate())*1000);
            Calendar cal = Calendar.getInstance();
            cal.setTime(nd);
            dt.setText(cal.get(Calendar.DAY_OF_MONTH) + "/" + cal.get(Calendar.MONTH) + "/" + cal.get(Calendar.YEAR));

        } catch (Exception e){
            Log.e("ERROR", e.getMessage());
        }

        m_ProgressDialog.dismiss();
    }
} 
```

问题是 3 TextViews 和 ImageView 显示默认文本/图像，在 xml 中指定。我检查过

```
ImageView iv = (ImageView) v.findViewById(R.id.icon);
TextView tt = (TextView) v.findViewById(R.id.toptext);
TextView bt = (TextView) v.findViewById(R.id.bottomtext); 
```

声明，似乎工作正常。它们不为空。此外，来自捆绑包的数据也很好。我对此进行了大约 1 小时的研究，并更改了代码以添加 runOnUiThread() 语句以确保 getNews() 函数在 UI 线程中运行。但没有任何效果。任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:28:34.153

好的，问题是您将 getNews 调用中的视图膨胀到内存中，但该视图未显示。一旦你调用 setContentView，视图就已经膨胀了。所以，相反，使用这样的视图：

```
public void getNews() {

    m_news = new News();
    m_news.setNewsTitle(bundle.getString("title"));
    m_news.setNewsText(bundle.getString("text"));
    m_news.setNewsDate(bundle.getString("data"));
    m_news.setNewsPhoto(bundle.getString("photo"));

    try{
        ImageView iv = (ImageView) findViewById(R.id.icon);
        TextView tt = (TextView) findViewById(R.id.toptext);
        TextView bt = (TextView) findViewById(R.id.bottomtext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:31:17.137

我相信，您会收到 NetworkOnMainThreadException，但是由于您正在捕获异常，因此您正在丢失有关您遇到的异常的数据。RunOnuiThread 在您的情况下不是正确的方法。

使用 Asynctask 并将所有 UI 代码（例如 layoutinflation、setText、setImageBitmap）移动到 OnPreExecute 或 OnPostExecute 并将行下方移动到 Asynctask 的 doInbackground。

```
Bitmap bmp = Utils.getBitmapFromURL("http://www.myserver.com/IMG/" + m_news.getNewsPhoto()); 
```

# javascript - enter() 选择上的额外 select() 到底有什么作用？

> ID：12304357
> 
> 赞同：2
> 
> 时间：2012-09-06T16:23:27.953
> 
> 标签：javascript, select, d3.js, selectall

enter() 选择上的额外 select() 究竟做了什么，为什么它没有 selectAll()？

现在，我可能应该在这里发布更多文字以“满足您的质量标准”，但我很确定这个问题足够精确，希望不会太愚蠢。我花了几天时间阅读各种 d3 教程和文档，这部分仍然从我这里逃脱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T22:48:45.587

在[enter 选择](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)上调用[select](https://github.com/mbostock/d3/wiki/Selections#wiki-select)是很少见的；[使用追加](https://github.com/mbostock/d3/wiki/Selections#wiki-append)或[插入](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)更为常见。然而，这三种方法的最终结果是相同的：**它指定了如何在 enter selection 中实例化元素**。

 **执行[data-join](http://bost.ocks.org/mike/join/)时，将返回三个新选择：

*   更新选择：选择的元素对应的数据
*   退出选择：任何剩余元素（无对应数据）
*   enter 选择：任何剩余数据（没有对应的元素）

由于输入选择是剩余数据，因此根据定义没有相应的元素。因此，输入选择最初包含*占位符节点*，您必须将其实例化为适当的元素。您几乎不会看到这些节点，因为您会立即告诉 D3 如何创建缺失的元素，通常是通过调用 append 或 insert。这些方法创建新元素并将它们插入到 DOM 中。（父节点由前面的[select](https://github.com/mbostock/d3/wiki/Selections#wiki-select)确定，如[嵌套选择](http://bost.ocks.org/mike/nest/)教程中所述。）

在极少数情况下，您可能想要做一些超出标准附加或插入的操作来实例化输入节点。例如，标准的 append 方法总是创建同名的元素（例如“div”或“rect”）。如果您想动态指定名称，则可以使用 select 并传入一个函数来创建新元素（如[d3-js 邮件列表中的此线程所述](https://groups.google.com/d/topic/d3-js/omM3HZHj3mk/discussion)）：

```
enterSelection.select(function(d) {
  return this.appendChild(document.createElement(d.name));
}); 
```

实际上，如果您查看[append 是如何实现](https://github.com/mbostock/d3/blob/master/src/core/selection-append.js)的，您会发现它只是 select 之上的一个包装器。稍微简化的实现是：

```
d3.selection.prototype.append = function(name) {
  return this.select(function() {
    return this.appendChild(document.createElement(name));
  });
}; 
```

这些示例实现被简化了，因为它们不处理命名空间的 SVG 元素。由于这个原因，使用内置方法更容易，这些示例仅用于解释 D3 内部的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:28:21.803

调用`.select()`一个`.enter()`选择与对其他选择的作用相同——您可以使用它来进一步缩小您选择的范围。拥有`.selectAll()`并没有真正的意义，因为`.enter()`选择指的是实际上还没有的东西。因此，您只能再次选择整个选择（因为没有显着特征）。**

# makefile - 在 Fedora 17 中使用“make”命令编译时出错

> ID：12304359
> 
> 赞同：0
> 
> 时间：2012-09-06T16:23:30.507
> 
> 标签：makefile, compiler-errors, linux-kernel, fedora, system-calls

我正在尝试构建一个新内核并向该构建的内核添加一个新的系统调用，当我在创建新的系统调用后尝试使用“make”命令重新编译时，我得到了这个错误。

```
scripts/Makefile.build:44: /usr/src/linux-3.0.42/block/helloworld/Makefile: No such file or directory
make[1]: *** No rule to make target `/usr/src/linux-3.0.42/block/helloworld/Makefile'.  Stop.
make: *** [block/helloworld] Error 2 
```

如果有人可以帮助我，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T03:18:00.807

内核模块使用的 make 版本可能与您可能习惯的不同。它极大地简化了事情，但一开始可能会有点混乱。这是内核制作的文档：http: [//lwn.net/Articles/21835/](http://lwn.net/Articles/21835/)

这是关于 hello world 模块的教程：

c代码：[http ://tldp.org/LDP/lkmpg/2.6/html/x121.html](http://tldp.org/LDP/lkmpg/2.6/html/x121.html)

对应的makefile：[http ://tldp.org/LDP/lkmpg/2.6/html/x181.html](http://tldp.org/LDP/lkmpg/2.6/html/x181.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:55:26.617

不要带回旧帖子，但我遇到了类似的问题，我很惊讶没有人提出这个建议。

编辑 linux3-xx/Makefile 时

您想通过修改以下行来包含您的目录：

core-y += kernel/mm/fs/ipc/security/crypto/block/

至

core-y += kernel/mm/fs/ipc/security/crypto/block/helloworld/

一个简单的错误就是忘记了每个目录块后面的**THE SPACE** /_helloworld/下划线代表一个SPACE

如果您没有该空间，那么无论如何您都会收到上述错误。

只是想我会添加这个以防其他人正在四处寻找回应

# r - 抑制 r 图中的刻度和标签

> ID：12304361
> 
> 赞同：-2
> 
> 时间：2012-09-06T16:23:39.057
> 
> 标签：r, plot

我想使用轴（）在图的上方和右侧创建一个带有刻度和标签的图。如何抑制使用 plot() 函数“自动”打印的刻度和标签？谢谢

```
x<-1:10
y<-1:10

quartz("test")
par(mar=c(10,10,10,10)+0.1)#sets margins of plotting area
par(pty="s")#fixes the aspect ratio to 1:1

#Automatically adds ticks, numbers and axis labels. How can I avoid this?
plot(x,y,typ="n")

#Adds axes above and to the right of plot area...I want these only
axis(side=4,las=2, ylab="y label")
axis(side=3,las=1,xlab="x label") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:31:04.963

见`?plot.default`：

```
plot(x, y, type="n", axes=FALSE, frame.plot=TRUE, xlab="", ylab="") 
```

# php - 显示中的文本注入

> ID：12304365
> 
> 赞同：0
> 
> 时间：2012-09-06T16:23:51.097
> 
> 标签：php, sql-server, web-applications, web

好的，所以我得到了一个这样的部分列表：

```
PartID    CatID    PartName
0             1           Part 1
1             2           Part 2
2             1           Part 3
3             3           Part 4
4             2           Part 5
5             2           Part 6 
```

我正在使用PHP来拉。如何在 CatID 的每次更改时注入一段文本，而无需运行多个循环？

所以在页面上，我可以像这样显示它：

```
"BLURB OF TEXT"
Part 1
Part 3
"BLURB OF TEXT"
Part 2
Part 5
Part 6
"BLURB OF TEXT"
Part 4 
```

这是到目前为止的代码。我想过给 = $row["CatID"] 赋值，并检查变量是否 == CatID，但它总是 ==...

```
while($row = sqlsrv_fetch_array($qry, SQLSRV_FETCH_ASSOC)) {
    echo $row["PartName"]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:31:14.323

将 ID 放入循环外的变量中。这样您就可以检查以前的 ID 和当前的 ID。如果当前的与上一个不同，则回显一些文本：

```
$LastID = 0;
while($row = sqlsrv_fetch_array($qry, SQLSRV_FETCH_ASSOC)) {
    echo $row["PartName"];
    if($row["CatID"] > $LastID)
    {
        // ID changed!
        echo "Insert Text!";
    }
    $LastID = $row["CatID"];
} 
```

当然，这是假设数据按`CatID`您想要显示的结果升序排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:43:18.997

我的逻辑倒退了.... grr，数字我在寻求帮助后立即弄清楚了...

```
 if($cCat == $row["catID"]){
                    //echo 'nothing here';
                }else{
                    echo '<a name="' . $row["PartCategory"] . '"></a>';
                    echo $this->GetPartCategories();
                    $cCat = $row["catID"];
                } 
```

是有效的， 和 while 语句上方是 $cCat = '';

我在尝试

```
 if(!$cCat == $row["catID"]){
                    echo '<a name="' . $row["PartCategory"] . '"></a>';
                    echo $this->GetPartCategories();
                    $cCat = $row["catID"];
                } 
```

由于某种原因，这不起作用。

ps 在我的查询中已经有订单。它按 catID、partSortOrder 和 partName 排序

# facebook - Like Box ('无法检索指定的页面。请验证是否传入了正确的href。')

> ID：12304366
> 
> 赞同：1
> 
> 时间：2012-09-06T16:23:55.493
> 
> 标签：facebook, facebook-like

我需要一些信息，为什么像框框不起作用：'无法检索指定的页面。请验证正确的 href 是否已传入。'。[我正在http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)中测试这个 href - 它说正确答案，但框架不起作用。

在 UA facebookexternalhit/1.1 的访问日志中，始终回答状态 200（以及特定页面的 301/302）。

示例页面：[http ://www.now.ru/item/series/comedy/Univer_222394](http://www.now.ru/item/series/comedy/Univer_222394)

附加信息：在某些页面上框架有效，而有些则无效

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:09:17.230

The [Facebook Like Box](http://developers.facebook.com/docs/reference/plugins/like-box/) is really designed to use the URL for a Facebook page, not for a general Web Page. It pulls Timeline content from a fan page within Facebook.

It can be used for a Web Page if the page has defined Open Graph Meta Tags and has been Liked at least once. However, there will be no "stream" functionality. The Like-Box for a Web Page would just have functionality similar to the Facepile plugin (except that Facepile just shows you friends, and a Like-Box also shows non-friends.)

Typically, though, you would want to supply the Like-Box with a Facebook Page URL in the following format:

```
http://www.facebook.com/pages/Facebook-Page-Name/Facebook-Page-ID 
```

Perhaps you are intending to use a Like Button or Facepile [Social Plugin](http://developers.facebook.com/docs/plugins/) instead? Either of those can accept any URL as input.

# jquery-ui - Jquery ui MultiSelect IE 8 问题

> ID：12304370
> 
> 赞同：1
> 
> 时间：2012-09-06T16:24:31.947
> 
> 标签：jquery-ui, multi-select

使用最新的[Jquery UI Multiselect](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)它在 firefox、chrome 中运行良好

[但在 IE8 中，选项为空白，如此处](http://imgur.com/azJ1M)所示

我正在使用以下库 jquery-1.7.2.min.js jquery-ui-1.8.20.custom.min.js

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:08:13.090

解决了，在我使用的 IE 8 中将选项添加到 JQuery 列表中的方式存在[问题](http://bugs.jquery.com/ticket/1641)

```
$('#foldersBUSelect').append( new Option(folderName,folderID,false,nowSelected) ); 
```

当我应该做以下 IE 8 喜欢的事情时

```
$("#foldersBUSelect").append( "<option selected='selected' value='" + folderID + "'>" + folderName + "</option>" ); 
```

# sql-server - SQL Server 2008 开发版和 SQL Server 2008 标准版的下载链接？

> ID：12304373
> 
> 赞同：0
> 
> 时间：2012-09-06T16:24:38.967
> 
> 标签：sql-server, windows-xp-sp3

我想在 Microsoft 的网站上下载 SQL Server 2008 Developer 版和 SQL Server 2008 Standard 版，但我找不到下载 iso 映像的链接。

你能帮我找到链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:38:58.230

这里解释了为什么你找不到开发者版链接和快速版下载链接。 [sql-server-2008-download-copy-of-developer-edition-for-free-is-myth](http://blog.sqlauthority.com/2008/12/23/sql-server-2008-download-copy-of-developer-edition-for-free-is-myth/)

# c# - C# 建立从笔记本电脑内部蓝牙 4.0 到蓝牙低功耗 (BLE) 外围设备的流

> ID：12304377
> 
> 赞同：7
> 
> 时间：2012-09-06T16:24:50.320
> 
> 标签：c#, .net, bluetooth-lowenergy, 32feet

我正在尝试编写一个连接到蓝牙低功耗设备（BLE）的程序，然后在更新或给定时间间隔读取特征。

我的外设是德州仪器 CC2540 BLE 设备。

我的出发点是查看 TI 的示例程序，它有一个心率监测器：http://processors.wiki.ti.com/index.php/Category: [HealthDemo](http://processors.wiki.ti.com/index.php/Category:HealthDemo)

但是，这使用了加密狗，我的任务是使用内部蓝牙 4.0 调制解调器（稍后将在 android 上实现，但现在，我只使用 windows）。

现在我的问题是加密狗创建了一个 COM 端口，但内部调制解调器没有。我仍然设法使用 32feet API 扫描并成功找到 CC2540。但是，从这里我不知道该怎么办。我试过调用 connect() 方法，但它总是无法连接，要么是超时，要么是说有一个死网。

任何想法为什么会发生这种情况？除了打电话给我的 device.connect() 之外，我还应该做点别的吗？

代码片段：

```
BluetoothClient cli;
BluetoothDeviceInfo[] peers;
BluetoothDeviceInfo device;
BluetoothAddress adr;

//... skipping code that finds the device and assigns the address to it.

if (device.InstalledServices.Length != 0)
{
     try
     {
          //MessageBox.Show("attempting to connect");
          cli.Connect(device.DeviceAddress, device.InstalledServices[2]);
          //tbDeviceInfo.AppendText("\n\nConnected " + device.Connected);
     }
     catch (Exception ex)
     {                        
          MessageBox.Show(ex.Message);
          // i always get this exception.
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:53:38.683

我不想误会你，但 32feet 目前不支持蓝牙低功耗。（截至 2012 年 11 月）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:59:15.790

使用 32Feet 库似乎不支持低功耗蓝牙。[见这里](http://32feet.codeplex.com/discussions/399076)。或者，您可以查看这个确实提供支持的蓝牙库，但我没有尝试过，也不能声称支持有多好。[看这里](http://code.google.com/p/btstack/)

# javascript - JQuery .css() 函数不会改变所有属性

> ID：12304381
> 
> 赞同：0
> 
> 时间：2012-09-06T16:25:00.590
> 
> 标签：javascript, jquery, css, z-index

我正在以本网站的方式创建一个带有滑动面板的 UI：http: [//smithandhawken.catalogs.target.com/#/intro-cover](http://smithandhawken.catalogs.target.com/#/intro-cover)

不过，我有两种方法可以按列和按行更改页面。用户可以使用键盘以及一些视觉元素来导航页面。运动由如下函数处理：

```
function moveDown()
{
unbindAll();
currentPage = 1;

$('div.section').each(function(index, element) {
    if(index+1 == currentSec) {
        console.log($(this));
        $(this).css({ 'margin-top': 0, 'z-index': (storyCount-1)*100 });
        if($(this).next().size()) {
            populate(currentSec+1, currentPage);
            $(this).next().children('div.page').css('left', $(window).width());
            $(this).next().children('div.page').eq(0).css('left', 0);
            console.log(storyCount);
            $(this).next().css({ 'margin-top': $(window).height(), 'z-index': storyCount*100 }).stop().animate({marginTop:0}, 500, function() { 
                currentSec++;
                bindAll();
            });
        }
        else {
            populate(1, currentPage);
            $(this).parent().children().first().children('div.page').css('left', $(window).width());
            $(this).parent().children().first().children('div.page').eq(0).css('left', 0);
            $(this).parent().children().first().css({ 'margin-top': $(window).height(), 'z-index': storyCount*100 }).stop().animate({marginTop:0}, 500, function() {
                currentSec = 1;
                bindAll();
            });
        }
    }
    else if(index != currentSec) {
        $('#section'+(index+1)).css({ 'margin-top': 0, 'z-index': 100 });
    }
    });
} 
```

上面那行在 100% 的情况下不会以同样的方式工作 - $(this).css({ 'margin-top': 0, 'z-index': (storyCount-1)*100 });

当用户使用键盘和左/右视觉元素时，一切正常。当他们使用在每一行之间转换的可视元素（仅限 up/down 方法）时，函数会触发，但并非所有 CSS 属性都被应用。这是我正在谈论的视觉元素的功能：

```
function mdlButton(btnHit)
{
btnLabel = btnHit.attr('id').substr(3);
console.log('enter first swtich '+currentSec);
switch(currentSec)
{
    case 1:
        console.log('enter second switch '+btnLabel);
        if (btnLabel == 1) {
            console.log('dont do anything');
        }
        else if (btnLabel == 2) {
            console.log('move down one');
            moveDown();
        }
        else if (btnLabel == 3) {
            console.log('move down two');
            moveDown();
            moveDown();
        }
        break;
    case 2:
        console.log('enter second switch');
        if (btnLabel == 1) {
            console.log('move up');
            moveUp();
        }
        else if (btnLabel == 2) {
            console.log('dont do anything');
        }
        else if (btnLabel == 3) {
            console.log('move down one');
            moveDown();
        }
        break;
    case 3:
        console.log('enter second switch');
        if (btnLabel == 1) {
            console.log('move up two');
            moveUp();
            moveUp();
        }
        else if (btnLabel == 2) {
            console.log('move up');
            moveUp();
        }
        else if (btnLabel == 3) {
            console.log('dont do anything');
        }
        break;
}

if(!btnHit.hasClass('mdlSelected')) {
    $('div.mdlSec').removeClass('mdlSelected');
    $('div.mdlSec').find('#selected').remove();
    btnHit.addClass('mdlSelected');
    btnHit.find('div.divider').after('<div id="selected"></div>');
    reSize();
}
} 
```

我无法弄清楚从上述函数调用时 z-index 不会改变的原因，而不仅仅是键盘或左/右调用 moveDown()/moveUp() 方法时。以防万一，这是左/右的样子：

```
function moveLeft()
{
unbindAll();
$('#section'+currentSec+' div.page').each(function(index, element) {
    if(index+1 == currentPage) {
        if($(element).prev().size()) {
            populate(currentSec, currentPage-1);
            $(this).animate({'left': $(window).width()}, 500, function() {
                currentPage--;
                bindAll();
            });
        }
        else {
            moveUp();
        }
    }
    });
} 
```

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:08:40.283

z-index 被 reSize() 函数重置为另一个值，该函数被调用来调整页脚按钮的大小。我已经分离了调整大小的功能，问题就消失了。代码本身没有问题，只是执行顺序。

感谢所有的帮助！

# web-services - 为不同服务的 gwteventservice 提供数据

> ID：12304382
> 
> 赞同：0
> 
> 时间：2012-09-06T16:25:02.283
> 
> 标签：web-services, gwt, comet, server-push, gwt-eventservice

我正在尝试使用 gwteventservice 将数据从我的服务推送到浏览器，但我无法从与**MyServiceImpl.java**不同的服务执行此操作。情况如下：我有从客户端读取数据的服务**DifferentService.java 。**然后我有类**MyServiceImpl.java**，它代表 MyService.java 的服务器端**（**经典 gwt 项目结构）。最后，我有类**CallEvent.java**，它使用**addEvent**方法将数据发送到侦听器（gwteventservice 的东西）。当我在**MyServiceImpl.java中实例化一个****CallEvent**类并调用正确的方法（**addEvent******) 消息已成功传递给侦听器。**当我从DifferentService.java**类调用相同的代码时，什么也没发生（没有消息传递给侦听器）。我认为这是一个典型的情况，当数据需要从某个数据提供者发送到使用 gwteventservice 的客户端时。你能帮我找出问题吗？在这种情况下，您使用哪种解决方案或方法？这是我用于数据传递的代码片段。****

 ****MsgEvent.java（代表消息携带数据——gwteventstuff）

```
public class MsgEvent implements Event {

    public static final Domain SERVER_MESSAGE_DOMAIN = DomainFactory.getDomain("my_domain");
    public String message;

    public MsgEvent(){}

    public MsgEvent(String message) {
            this.setMessage(message);
    }

    public String getMessage() {
            return message;
    }

    public void setMessage(String message) {
            this.message = message;
    }
} 
```

CallEvent.java (gwteventstuff)

```
public class CallEvent extends RemoteEventServiceServlet{
    public void SendData(String data){
           //create the event
           Event theEvent = new MsgEvent("DagaMsg");
           //add the event, so clients can receive it
           addEvent(MsgEvent.SERVER_MESSAGE_DOMAIN, theEvent);
}
} 
```

不同服务.java

```
 public class DifferentService{
 ...
 //Reading string data from client
 CallEvent ce = new CallEvent();
 ce.SendData(stringData);        //this code delivers nothing to a listener
 ...
 } 
```

MyServiceImpl.java（gwt 的东西）

```
 public class MyServiceImpl extends RemoteEventServiceServlet implements MyService {
     public void sendMessage(String message) {
          CallEvent ce = new CallEvent();
          ce.SendData("Data");     //this code deliver message succesfully to a listener
     }
 } 
```

web.xml（gwt 和 gwteventservice 的东西）

```
<web-app>
    <!-- Default page to serve -->
    <welcome-file-list>
         <welcome-file>My.html</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>MyService</servlet-name>
        <servlet-class>cz.pohanka.my.server.MyServiceImpl</servlet-class>
    </servlet>
    <servlet-mapping>
         <servlet-name>MyService</servlet-name>
         <url-pattern>/cz.pohanka.my.My/MyService</url-pattern>
    </servlet-mapping>
    <servlet> 
         <servlet-name>EventService</servlet-name> 
         <servlet-class>de.novanic.eventservice.service.EventServiceImpl</servlet-class> 
    </servlet>
    <servlet-mapping>   
         <servlet-name>EventService</servlet-name> 
         <url-pattern>/cz.pohanka.my.My/gwteventservice</url-pattern> 
    </servlet-mapping>
 </web-app> 
```

我希望我已经包括了所有重要的东西。我认为这个问题可能出在 web.xml 中。你怎么看。谢谢你。

帕维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:52:29.777

我知道这个问题是几个月前提出的，但也许它可以帮助某人......

在您的`DifferentService`中，您不能创建一个 servlet`new CallEvent()`来发送您的事件......

相反，使用类似的东西：

```
EventExecutorServiceFactory pushServiceFactory = EventExecutorServiceFactory.getInstance();
EventExecutorService pushService = pushServiceFactory.getEventExecutorService( /* param */);
pushService.addEvent(...); 
```

替换`param`为`HttpServletRequest`或客户端 ID。****

# javascript - JQuery Widget，失去对“this”的引用

> ID：12304383
> 
> 赞同：1
> 
> 时间：2012-09-06T16:25:05.337
> 
> 标签：javascript, jquery, jquery-ui, jquery-widgets

**注意**：代码看起来很长，但其简单的伪代码用于演示目的。不要逃跑！

我编写了一个监听按键的小部件。当`onKeyDown`事件被触发时，对的引用将`this`丢失。所以我设置了一个作用域变量`self`来引用小部件。 `self`在创建小部件时初始化。

这可行，但我不确定这是正确的方法。我认为这里的解决方案与代理有关？也许`self`变量已经在充当代理？有人想对发生的事情有所了解吗？

```
(function($)
{   
    var vendorPrefix = Modernizr.prefixed("transform");
    var self;

    $.widget("ui.myWidget", {

        _create: function()
        {  
            self = this;            
            //Do some widget stuff  
            document.addEventListener('keydown', this.onKeyDown, false)
            return this;
        },

        exampleFn: function()
        {
        },

        onKeyDown: function(event)
        {
            // this now refers to "document" and not the widget             
            switch(event.keyCode)
            {
                case 37: 
                    self.exampleFn();
                    break;
                case 39:
                    self.exampleFn();
                    break;
            }
        }

    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:44:39.607

如果您想摆脱变量，也可以使用[jQuery.proxy() ：](http://api.jquery.com/jQuery.proxy/)`self`

```
onKeyDown: $.proxy(function(event)
{
    // this now refers to "document" and not the widget             
    switch(event.keyCode)
    {
        case 37: 
            this.exampleFn();
            break;
        case 39:
            this.exampleFn();
            break;
    }
}, this) 
```

无论如何，正在发生的事情是`this`在一个函数中引用该函数。所以`this`in`onKeyDown`是`onKeyDown`函数。如果你像我上面那样使用代理，`this`in`onKeyDown`将成为对父函数的引用。

更多关于`this`JavaScript 中的行为：[“this”关键字是如何工作的？](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:28:34.793

这是因为“this”关键字指的是附加事件的对象。

使用自提示是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:41:28.890

我不确定您所说的代理是什么意思，因为 javascript 中没有这样的东西，但是不，这不是正确的做法，因为您实际上已经创建了一个全局变量。

例如，如果小部件被多次初始化，您可能会看到一些非常奇怪的行为，具体取决于您的代码。

摆脱全局`var self`并将其移至`_create`对象声明内的方法上方，因此它是该对象的私有变量。

# java - JmDNS.create() 是阻塞还是非阻塞

> ID：12304387
> 
> 赞同：1
> 
> 时间：2012-09-06T16:25:36.813
> 
> 标签：java, jmdns

我创建了 JmDNS 示例：

```
public class Service {
public static void main(String[] args) {
    try {
        JmDNS mdnsServer = null;

        mdnsServer = JmDNS.create("localhost");

        // Register a test service.
        ServiceInfo testService = ServiceInfo.create("_myTest._tcp.local.", "Test-Service", 3, "test_service");
        mdnsServer.registerService(testService);
    } catch (IOException e) {
        e.printStackTrace();  
    }

} 
```

}

它运行几秒钟然后退出程序，所以我想知道它是阻塞还是非阻塞。我在想，因为它通过网络广播服务，所以我们需要手动退出应用程序

跟随也是如此`ServiceDiscovery`

```
public class ServiceDiscovery {
private static ServiceListenerClass listener;
private static int count = 0;

public static void main(String[] args) throws IOException {
    JmDNS jmdns = null;
    InetAddress address = null;
    String type = "_myTest._tcp.local.";
        Enumeration<NetworkInterface> ifc = NetworkInterface.getNetworkInterfaces();
        while (ifc.hasMoreElements()) {
            NetworkInterface anInterface = ifc.nextElement();
            if (anInterface.isUp()) {
                Enumeration<InetAddress> addr = anInterface.getInetAddresses();
                while (addr.hasMoreElements()) {
                    if (!(address = addr.nextElement()).isLoopbackAddress())
                        break;
                }
            }
        }
        jmdns = JmDNS.create(address, type);
        listener = new ServiceListenerClass();
        jmdns.addServiceListener(type, listener);
}

public static class ServiceListenerClass implements ServiceListener {
    public void serviceAdded(ServiceEvent event) {
        event.getDNS().requestServiceInfo(event.getInfo().getServer(), event.getName(), true);
    }

    public void serviceRemoved(ServiceEvent event) {
        System.out.println((count--) + " " + event.getInfo().getName());
    }

    public void serviceResolved(ServiceEvent event) {
        System.out.println((count++) + " :Res: " + event.getInfo().getName() + " " + event.getInfo().getPort() + " " + event.getInfo().getApplication()
                + " " + event.getInfo().getDomain() + " " + event.getInfo().getKey());
        for (InetAddress address : event.getInfo().getInetAddresses())
            System.out.println(address.getHostAddress());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:36:42.753

没有保证： `JmDNS.create`是非阻塞的，阻塞的就是`jmdns.registerService()`方法。

# perl - 在 Perl 中基于哈希值打印键

> ID：12304390
> 
> 赞同：3
> 
> 时间：2012-09-06T16:25:57.273
> 
> 标签：perl, hash

我需要根据哈希值打印密钥。这是我写的代码

```
foreach $value (values %hash)
{
    print "$value\t$hash{$value}\n";
} 
```

错误：我只能打印值，但不能打印键。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T16:27:36.570

哈希被设计为通过键访问，而不是通过值访问。您需要遍历键列表，而不是值。

然后，您可以使用键来访问关联的值。

```
foreach my $key (keys %hash) {
    my $value = $hash{$key};
    say "$key = \t$value";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:29:26.577

尝试：

```
for my $key (keys %hash) {
    print "$key\t$hash{$key}\n";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T19:03:39.783

```
print "$_\t$hash{$_}\n" for keys %hash; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T16:38:18.157

单线：

```
map { print "$_\t$hash{$_}\n" } keys %hash; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T20:28:44.567

如果您想遍历键和值，我可能会使用 while 和 each：

```
while (my ($key, $value) = each %hash) {
    say "$key -> $value";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-20T04:37:04.590

标题请求根据值打印键。

如果您在苛刻表中的键和值应该是一对一的

```
foreach $key (keys %hash)
{
  $r_hash{$hash{$key}}=$key;
}
.... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T22:02:55.910

如果您想按值访问它，则将您的哈希定义为

```
$x = {  'x1' => [ 'one','x1']}   

foreach ( values %$x ) 
{                                                                                     
     foreach $m1 (@$_) { 
        print "$m1\n";
     }
} 
```

请注意，您可以通过 value 数组的第二个成员从 value 中获取键。

# jquery - 使用 jquery cookie 插件不会删除 cookie

> ID：12304391
> 
> 赞同：1
> 
> 时间：2012-09-06T16:26:02.367
> 
> 标签：jquery, jquery-plugins, cookies

我正在使用来自[https://github.com/carhartl/jquery-cookie的 jquery.cookie.js](https://github.com/carhartl/jquery-cookie)

如果有任何遗漏或理解错误，请告知

```
$.cookie('cartQuantity', 3, { expires: 180 , path : '/' });
alert( $.cookie('cartQuantity') ); //alerts 3
$.cookie('cartQuantity', null);
alert( $.cookie('cartQuantity') );//alerts 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:29:10.443

**您必须通过与创建时使用的相同**选项来删除 cookie ：

```
$.cookie('cartQuantity', null, { expires: 180 , path : '/' }); 
```

还有[最近](https://github.com/carhartl/jquery-cookie/commit/84a7de2014acd71d835f5940ad229a0185b2901f#jquery.cookie.js)`$.removeCookie`添加到插件中的方法（2个月前），所以如果您使用的是支持它的版本，您可以改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:28:00.663

您错误地删除了 cookie。根据[文档](https://github.com/carhartl/jquery-cookie)，这就是您应该删除它的方式：

```
$.removeCookie('the_cookie'[, options]); 
```

所以在你的情况下，它将是：

```
$.removeCookie('cartQuantity', { expires: 180 , path : '/' }); 
```

> 您必须传递用于设置 cookie 的完全相同的路径、域和安全选项

删除时实际上不需要包含过期数据。

# android - 文字放大缩小功能

> ID：12304393
> 
> 赞同：0
> 
> 时间：2012-09-06T16:26:09.193
> 
> 标签：android, android-layout, android-intent, android-widget

我在 Activity 的 textView 中有一些文本。通过单击缩放按钮，我需要获取文本的缩放。我在 clickListener 中使用了以下代码

```
 pixel=pixel+20;
            text.setTextSize(pixel); 
```

但我没有得到那个文本的缩放。

任何人都可以给出答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:34:02.387

您可以绘制文本`ImageView`而不是使用`TextView`，然后只使用放大和缩小动画。这是一个[教程](http://jongladwin.blogspot.com/2010/03/android-how-to-zoom-in-zoom-out-images.html)

# php - PHP邮件功能不发送HTML邮件

> ID：12304400
> 
> 赞同：1
> 
> 时间：2012-09-06T16:26:39.507
> 
> 标签：php, email

Hello The Genious peoples.... 我正在尝试使用 php 发送 html 邮件，我的 php 脚本中的所有内容看起来都是正确的，但是当我发送邮件时，我只收到纯文本。这是我用来测试脚本的链接 url [http://www.mailme.netne.net](http://www.mailme.netne.net) 你可以在这里查看..

这些是脚本中的代码：

```
<?php 
require 'ErrorHandler.inc.php';  
//.....set up a boundary to seperate the message..........  
$boundary = '======'.md5(mt_rand(4,time())).'======';  
$headers=array();  
$headers[]='MIME-Version:1.0';  
$headers[]='Content-type:multipart/alternative;boundary="'.$boundary.'"'; 
$headers[]='From: '.$_POST['from'];  
$msg_body = 'This a is Multipart Message in MIME Format'."\n";  
$msg_body .= '--'.$boundary."\n";  
$msg_body .= 'Content-Type:text/html; charset="iso-8859-1"'."\n"; 
$msg_body .= 'Content-Transfer-Encoding:7bit'."\n\n";  
$msg_body .=$_POST['message'] ."\n"; 
$msg_body .= '--'.$boundary."\n"; 
$msg_body .= 'Content-Type:text/plain; charset="iso-8859-1"'."\n";
$msg_body .= 'Content-Transfer-Encoding:7bit'."\n\n";  
$msg_body .=strip_tags($_POST['message']) . "\n";  
$msg_body .= '--'.$boundary.'--'."\n";  
//======================send n test return value=======================
$success  = mail($_POST['to'],$_POST['sub'],$msg_body,implode("\r\n",$headers)) ;
if($success)  
{ echo "<strong>Your mail sent </strong>";}    
else     
{echo "<strong>Error Sending your mail..please try again later</strong>";}  
echo " with following details:<br /><br />";  
echo "<strong>From : </strong><em>" .$_POST['from']."<br />";  
echo "<strong>To&nbsp;&nbsp;: </strong><em>".$_POST['to'].  "<br/>";  
echo "<strong>Subject : </strong><em>".$_POST['sub']."<br />";  
echo "<strong>Message : </strong><em>".$msg_body."<br />";  
 ?> 
```

请帮助我..我从过去 6 天开始就在尝试..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:32:45.403

您正在将标头数据添加到您的邮件正文中：

```
$msg_body .= 'Content-Type:text/html; charset="iso-8859-1"'."\n"; 
$msg_body .= 'Content-Transfer-Encoding:7bit'."\n\n"; 
```

但是你实际上并没有像这样将它添加到你的标题中：

```
$headers[] = 'Content-Type:text/html; charset="iso-8859-1"';
$headers[] = 'Content-Transfer-Encoding:7bit'; 
```

尝试这个：

```
<?php 
require 'ErrorHandler.inc.php'; 

//.....set up a boundary to seperate the message..........  
$boundary = '======'.md5(mt_rand(4,time())).'======';  

$headers    =   array();  
$headers[]  =   'MIME-Version:1.0';  
$headers[]  =   'Content-type:multipart/alternative;boundary="'.$boundary.'"'; 
$headers[]  =   'From: '.$_POST['from']; 
$headers[]  =   'Content-Type:text/html; charset="iso-8859-1"';
$headers[]  =   'Content-Transfer-Encoding:7bit';

$msg_body = 'This a is Multipart Message in MIME Format'."\n";  
$msg_body .= '--'.$boundary."\n";  
$msg_body .= 'Content-Type:text/html; charset="iso-8859-1"'."\n"; 
$msg_body .= 'Content-Transfer-Encoding:7bit'."\n\n";  
$msg_body .=$_POST['message'] ."\n"; 
$msg_body .= '--'.$boundary."\n"; 
$msg_body .= 'Content-Type:text/plain; charset="iso-8859-1"'."\n";
$msg_body .= 'Content-Transfer-Encoding:7bit'."\n\n";  
$msg_body .=strip_tags($_POST['message']) . "\n";  
$msg_body .= '--'.$boundary.'--'."\n";  

//======================send n test return value=======================
$success  = mail($_POST['to'],$_POST['sub'],$msg_body,implode("\r\n",$headers)) ;
if($success){ 
    echo "<strong>Your mail sent </strong>";
}    
else     
{
    echo "<strong>Error Sending your mail..please try again later</strong>";    
}  

echo " with following details:<br /><br />";  
echo "<strong>From : </strong><em>" .$_POST['from']."<br />";  
echo "<strong>To&nbsp;&nbsp;: </strong><em>".$_POST['to'].  "<br/>";  
echo "<strong>Subject : </strong><em>".$_POST['sub']."<br />";  
echo "<strong>Message : </strong><em>".$msg_body."<br />";
?> 
```

# symfony - 如何将 Symfony 2.0.16 中完全开发的项目升级到 Symfony 2.1.0？

> ID：12304408
> 
> 赞同：4
> 
> 时间：2012-09-06T16:27:09.277
> 
> 标签：symfony, symfony-2.1

我在 symfony2.0.16 中开发了一个项目。现在我想升级到 sysmfony2.1.0。

正如我从[https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)中读到的，与以前的版本（2.0）相比，很多事情都发生了变化。

我是否需要查找并替换我的旧代码片段并手动重构它们，或者有一些命令或更好的方法来做到这一点？

例如升级文档中提到的：

```
Before: {{ app.request.session.locale }} or {{ app.session.locale }}

After: {{ app.request.locale }} 
```

我真的必须将 `{{ app.request.session.locale }}`整个大型项目中的所有内容都重构（查找和替换）`{{ app.request.locale }}`吗？任何关于如何重构的建议，如果这是唯一的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T20:05:08.653

正如其他人已经说过的那样，没有自动工具可以为您做到这一点，至少来自框架的官方开发者。

自 2.0 版以来已发生重大变化的 Form 组件发生了最大的变化。总的来说，我知道这是一项艰巨的任务，因为您需要查找和替换东西，但总的来说，应该是一天或半天的事情。

此外，您可能不会使用自 Symfony 2.0 以来发生的所有更改的所有功能。这意味着您无需为升级说明中的每一点都修改代码。

在我的情况下，我所做的是针对每个项目符号，首先检查我是否使用了该功能，然后进入搜索和替换模式。

它应该很快。它很长，但你可以做到:)

祝你好运，马特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T05:09:03.760

最好的方法是从新版本创建项目结构并将所有旧功能一一合并。

# c# - Lightswitch 从相关数据表中获取数据

> ID：12304411
> 
> 赞同：0
> 
> 时间：2012-09-06T16:27:24.517
> 
> 标签：c#, data-binding, visual-studio-lightswitch

在 Lightswitch 中，我有一个与供应商表具有一对多关系的订单表。

在订单屏幕中完成订单后，我想向选定的供应商发送一封包含订单的电子邮件。

理想情况下，我想在代码 (c#) 中执行此操作，但我似乎看不到将供应商表中的电子邮件字段连接到订单类代码的方法。我只能调用通过自动完成框获取的供应商名称。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:04:44.267

找到了一个解决方案，并认为我应该与其他陷入困境的人分享它。

```
this.Orders.Supplier.Email 
```

这不适用于列表和详细信息屏幕，但确实适用于有意义的详细信息屏幕。

# ruby-on-rails - 使用 rails 命令“rake db:create:all”时出错 - 我认为它与 Ruby 的版本冲突有关

> ID：12304414
> 
> 赞同：2
> 
> 时间：2012-09-06T16:27:28.223
> 
> 标签：ruby-on-rails, ruby, api, postgresql, rake

我创建了一个新的 Rails API 应用程序。我正在尝试使用 postgres db 的命令为应用程序创建数据库表

```
rake db:create:all 
```

我收到此错误：

```
 AM@~/Documents/RailsWS/iosprototypevendors >rake db:create:all --trace
 rake aborted!
 Valid types are [:development, :runtime], not nil
 /usr/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:52:in `initialize'
 /Users/AM/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler- 1.2.0/lib/bundler/resolver.rb:371:in `new'
 /Users/AM/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-     1.2.0/lib/bundler/resolver.rb:371:in `search'
 /Users/AM/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-
   .............. 
```

一堆谷歌搜索我发现这可能与拾取的错误版本的红宝石有关。

（我最近将我的操作系统升级到 Mountain Lion 并且不得不将我的 Rails 和 Ruby 版本升级到最新版本。经历了 8 小时的地狱来让 Rails 正常运行。Rails 现在可以在我的系统上运行，但这是一个刚刚出现的差异）。

* * *

此外

我还注意到，对于我系统上的不同 Rails 应用程序，当我使用 rails -v 检查它们的版本时，rails 的版本有时会显示为 3.2.1，有时会显示为 3.2.8，有时我会收到上述错误消息。

这怎么会发生？这是我通过运行此命令得到的结果：

```
rvm info

ruby-1.9.3-p194:

system:
 uname:       "Darwin A-Ms-MacBook-Pro.local 12.1.0 Darwin Kernel Version 12.1.0: Tue Aug 14 13:29:55 PDT 2012; root:xnu-2050.9.2~1/RELEASE_X86_64 x86_64"
 bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)"
 zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin12.0)"

 rvm:
  version:      "rvm 1.15.8 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
  updated:      "1 day 22 hours 15 minutes 59 seconds ago"

 ruby:
  interpreter:  "ruby"
  version:      "1.9.3p194"
  date:         "2012-04-20"
  platform:     "x86_64-darwin12.1.0"
  patchlevel:   "2012-04-20 revision 35410"
  full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.1.0]"

 homes:
  gem:          "/Users/AM/.rvm/gems/ruby-1.9.3-p194"
  ruby:         "/Users/AM/.rvm/rubies/ruby-1.9.3-p194"

 binaries:
   ruby:         "/Users/AM/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
   irb:          "/Users/AM/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
   gem:          "/Users/AM/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
   rake:         "/Users/AM/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"

 environment:
   PATH:         "/Users/AM/.rvm/gems/ruby-1.9.3-p194/bin:/Users/AM/.rvm/gems/ruby- 1.9.3-p194@global/bin:/Users/AM/.rvm/rubies/ruby-1.9.3-    p194/bin:/Users/AM/.rvm/bin:/Users/AM/.rbenv/shims:/Users/AM/.rbenv/bin:/usr/local/bin:/usr/   local/sbin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/PostgreSQL/9.1/bin/"
  GEM_HOME:     "/Users/AM/.rvm/gems/ruby-1.9.3-p194"
  GEM_PATH:     "/Users/AM/.rvm/gems/ruby-1.9.3-p194:/Users/AM/.rvm/gems/ruby-1.9.3-p194@global"
  MY_RUBY_HOME: "/Users/AM/.rvm/rubies/ruby-1.9.3-p194"
  IRBRC:        "/Users/AM/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
  RUBYOPT:      ""
  gemset:       "" 
```

任何帮助表示赞赏

编辑

* * *

这是我运行命令时得到的

```
echo $PATH on my terminal

/Users/AM/.rbenv/shims:
/Users/AM/.rbenv/bin:
/usr/local/bin:/usr/local/sbin:
/usr/local/mysql/bin:
/Users/AM/.rvm/gems/ruby-1.9.3-p194/bin:
/Users/AM/.rvm/gems/ruby-1.9.3-p194@global/bin:
/Users/AM/.rvm/rubies/ruby-1.9.3-p194/bin:
/Users/AM/.rvm/bin:
/usr/local/bin:
/usr/bin:/usr/bin:
/bin:/usr/sbin:/sbin:
/usr/local/bin:
/Library/PostgreSQL/9.1/bin/ 
```

所以这些是我系统上的路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:33:53.260

这是一个知道路径问题。检查您的路径是否包含有效的 gem 路径。您是否也安装了ruby `rvm`？看一看：[Path 与 bundler 的问题，改还是不改？](https://stackoverflow.com/questions/4827944/paths-issue-with-bundler-to-change-or-not-to-change)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:40:21.543

所以我没有得到我想要的答案。所以经过我自己的研究，我发现了这一点，（如果其他人有这个问题）

Mountain Lion 附带 Postgresql 和原生 ruby​​ 版本 1.8.7。当前的 ruby
​​ 版本是 1.9.3。因此，一旦您升级到山狮，也要升级您的 rails
和 ruby​​ 版本，并确保您运行的是正确的版本。

rvm 是山狮上的版本管理工具，可以为你更新和下载。[在这里](http://net.tutsplus.com/tutorials/why-you-should-use-rvm/)看到这篇文章

此外，如果您安装升级，您的计算机上将拥有多个版本的 ruby​​ 和 rails。因此，将正确的版本设置为系统的默认版本变得很重要。每次通过以下命令打开终端窗口时都必须这样做以首先检查版本：rails -v 和 ruby​​ -v 或 rvm list

然后你设置像这样的默认版本 rvm --default 1.9.3-p194 这将为该终端会话设置默认值。如果您想为每个项目进行更永久的设置，那么]
您必须在每个项目的根目录中创建一个 .rvmrc 文件，并在那里指定该项目要使用的 vcersions。再次查看上面链接的帖子。

当我找到更多细节时，我会编辑这个答案。同时，如果这个答案对您有帮助，请考虑投票。谢谢

# swing - 分层列单元格上的 JXTreeTable 和 BorderHighlighter 渲染问题

> ID：12304415
> 
> 赞同：1
> 
> 时间：2012-09-06T16:27:30.570
> 
> 标签：swing, swingx, jxtreetable

我正在构建一个 JXTreeTable，其中隐藏根下方只有两个级别，所以我想要一个分隔顶级节点的边框。但是，当我使用 BorderHighlighter 时，它没有正确绘制分层列。

只需将鼠标移到表格上，就会不断向分层单元格添加边框，直到最终整列变为黑色。

我使用来自多个站点的 JXTableTree 示例代码构建了一个小示例，包括 [InformIT]，我在其中复制/粘贴了要构建的代码。[2](http://java.net/projects/swingx/downloads/directory/releases "1.6.4")

我只是在示例中的 main() 方法中添加了荧光笔代码。

```
Highlighter topHighlighter = new BorderHighlighter(new HighlightPredicate() {
    @Override
    public boolean isHighlighted(Component renderer, ComponentAdapter adapter) {
        return true;
    }
}, BorderFactory.createMatteBorder(1, 0, 0, 0, Color.BLACK));
treeTable.addHighlighter(topHighlighter); 
```

我已经尝试过我认为是最新的 SwingX[版本 1.6.4](http://java.net/projects/swingx/downloads/directory/releases "1.6.4")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T06:10:21.990

**最终更新**

该[问题](http://java.net/jira/browse/SWINGX-1525)自修订版 #4239 起已修复，因此将在下一个版本中可用（或查看当前代码库）

**原来的**

这是一个错误（不确定我们是否已经有问题），如果它与[SwingLabs 演示应用程序](http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)中看到的效果相同：

*   在左侧的任务中选择荧光笔演示
*   在右侧的演示中选择 JXTreeTable 选项卡
*   在荧光笔组合中选择 BorderHighlighter
*   在谓词组合中选择 Always On

根本原因是分层列是通过显示一棵树的裁剪区域来呈现的。因此，荧光笔作为一个整体应用在树上，有些——比如边框——具有令人讨厌的效果。

目前，唯一的出路是不使用此类荧光笔。不完全确定，是否会/可以有一个令人满意的解决方案。

**更新**

[在 SwingX 跟踪器中](http://java.net/jira/browse/SWINGX-1525)提交了一个问题，所以我们不要忘记。

# adsutil.vbs - IIS6 - 使用 adsutil 将应用程序池与应用程序相关联

> ID：12304418
> 
> 赞同：3
> 
> 时间：2012-09-06T16:27:40.673
> 
> 标签：adsutil.vbs

我正在尝试以编程方式进行一些 IIS 6 设置。我已经成功创建了一个应用程序池：

```
adsutil create w3svc/apppools/myapppool iisapplicationpool 
```

并创建了一个应用程序：

```
mkwebdir -c localhost -w 1 -v "myapp","c:\inetpub\myapp"
adsutil appcreateinproc w3svc/1/root/myapp 
```

但是我一直想不通的是如何将应用程序池与应用程序相关联。我的第一个想法是这将是 appcreateinproc 命令的附加参数，但在这方面我没有任何运气。因此，我开始使用 set 命令，但也没有任何运气。

我找到了将应用程序池与站点相关联的示例，但对于应用程序却没有。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:36:27.720

这应该有助于您创建应用程序、应用程序池并将应用程序分配到池中。

[http://ayesamson.com/2010/06/14/create-virtual-directory-in-iis-6-0-via-command-line/](http://ayesamson.com/2010/06/14/create-virtual-directory-in-iis-6-0-via-command-line/)

# wordpress - Wordpress 自定义帖子类型每月存档

> ID：12304419
> 
> 赞同：3
> 
> 时间：2012-09-06T16:27:42.240
> 
> 标签：wordpress, custom-post-type

我有一个名为“press_release”的自定义帖子类型

我有一些帖子，查看它们使用“single-press_release.php”模板文件。这一切都很好，但是我想为这个帖子类型提供一个每月存档列表。

```
<?php wp_get_archives();?> 
```

在我的 single-press_release.php 页面中显示此内容会显示标准博客帖子的每月存档列表，而不是新闻稿，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:37:03.630

`wp_get_archives`不适用于自定义帖子类型。检查这个讨论：[http ://wordpress.org/support/topic/archive-list-and-page-for-custom-post-types-mysql?replies=9](http://wordpress.org/support/topic/archive-list-and-page-for-custom-post-types-mysql?replies=9)

# excel - 运行delphi客户端自动化程序后excel.exe仍然加载的原因？

> ID：12304422
> 
> 赞同：8
> 
> 时间：2012-09-06T16:27:48.510
> 
> 标签：excel, delphi, office-automation

我编写了一个 Delphi 程序，该程序从单个 .XLS 文件的多个不同电子表格中提取数据并将其合并到一个文本文件中以供以后处理。它是一个 Delphi 7**控制台**程序。

一段最相关的代码片段将向您展示，显然，我的程序表现得非常好，或者至少与它需要的一样多。

```
uses ...  ActiveX, ComObj ... ;

procedure Fatal(s:string);
  ...
  Halt(1);

var ExcelApp:Variant; (* global var *)

begin (* main program block *)
  coInitialize(nil);
  ExcelApp:=CreateOleObject('Excel.Application');
  try
    ExcelApp.Visible:=False;
    ExcelApp.WorkBooks.Open(ExcelFileName);
  ...
    XLSSheet := ExcelApp.Worksheets[ExcelSheetName];
  ...
    try
      XLSRange := XLSSheet.Range[ExcelRangeName];
    except
      Fatal('Range "'+ExcelRangeName+'" not found');
    end;
    if VarIsNull(XLSRange) then Fatal('Range '+ExcelRangeName+' not found');
    for row:=XLSRange.Row to XLSRange.Rows[XLSRange.Rows.Count].Row do
      for col:=XLSRange.Column to XLSRange.Columns[XLSRange.Columns.Count].Column do
        CellValue:=XLSSheet.Cells[Row,Col].Value;
        ...
        if CellValue<>'' then ...
        ...
    ExcelApp.Workbooks.Close;
    ...
  finally
    ExcelApp.Quit;
    coUninitialize;
  end;   
end. 
```

有时，当程序退出时，XLS 仍处于锁定状态。查看任务管理器，我看到客户端程序运行时启动的 Excel.exe 进程仍在运行，即使客户端程序已退出并成功卸载。

您是否知道这种行为的常见嫌疑人是什么？知道在客户端执行时在哪里寻找总是卸载 excel 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:42:44.720

您需要发布`ExcelApp`变体。它的引用计数仍然为 1，因此 Excel 并未完全关闭。

将此添加到您的代码中（标记的行）：

```
finally
  ExcelApp.Quit;
  ExcelApp := Unassigned;        // Add this line
  coUninitialize;
end; 
```

这是一些重现问题并测试解决方案的简单代码：

```
// Add two buttons to a form, and declare a private form field. 
// Add OnClick handlers to the two buttons, and use the code provided. 
// Run the app, and click Button1\. Wait until Excel is shown, and then click
// Button2 to close it. See the comments in the Button2Click event handler.
type
  TForm1=class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    ExcelApp: Variant;
  end;

implementation

uses
  ComObj;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ExcelApp := CreateOleObject('Excel.Application');
  ExcelApp.Visible := True;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  ExcelApp.Visible := False;
  ExcelApp.Quit;

  // Leave the next line commented, run the app, and click the button.
  // After exiting your app NORMALLY, check Task Manager processes, and you'll
  // see an instance of Excel.exe still running, even though it's not
  // in the Applications tab. 
  //
  // Do an "end process" in Task Manager to remove the orphaned instance 
  // of Excel.exe left from the above. Uncomment the next line of code
  // and repeat the process, again closing your app normally after clicking
  // Button2\. You'll note that Excel.exe is no longer in
  // Task Manager Processes after closing your app.

  // ExcelApp := Unassigned;
end;

end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-19T13:25:01.137

我在 XE2 中遇到了同样的问题，我的解决方案是替换这样的代码示例：

```
fExcel.ActiveWorkBook.ActiveSheet.Range[
    fExcel.ActiveWorkBook.ActiveSheet.Cells[3, 2],
    fExcel.ActiveWorkBook.ActiveSheet.Cells[3+i,1+XL_PT_Tip_FieldCount]
].Formula := VarArr; 
```

和：

```
cl := fExcel.ActiveWorkBook.ActiveSheet.Cells[3, 2];
ch := fExcel.ActiveWorkBook.ActiveSheet.Cells[3+i,1+XL_PT_Tip_FieldCount];
fExcel.ActiveWorkBook.ActiveSheet.Range[cl, ch].Formula := VarArr; 
```

在这种情况下也会发生同样的情况，其中使用了工作表变量：

```
sheetDynamicHb := fExcel.ActiveWorkBook.Sheets['Dynamics Hb'];
cl := sheetDynamicHb.Cells[52, 2];
ch := sheetDynamicHb.Cells[52+i, 2+3];
sheetDynamicHb.Range[cl, ch].Formula := VarArr; 
```

不知何故，引入临时变量 ( `cl,ch: Variant`) 可以解决问题。似乎嵌套的 Excel 变量访问做了一些奇怪的事情。我无法解释为什么会这样，但它确实有效..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-23T13:25:05.450

我在尝试关闭“僵尸”Excel 进程时遇到了同样的问题（如果我从我的应用程序启动它们然后强制终止应用程序，这些进程会继续运行）。我尝试了所有建议的操作，但没有运气。最后，我创建了一个组合杀手程序，如果通常的 COM 方法没有帮助，它可以使用 WinApi 稳健地完成这个技巧。

```
procedure KillExcel(var App: Variant);
var
  ProcID: DWORD;
  hProc: THandle;
  hW: HWND;
begin
  hW := App.Application.Hwnd;
  // close with usual methods
  App.DisplayAlerts := False;
  App.Workbooks.Close;
  App.Quit;
  App := Unassigned;
  // close with WinApi
  if not IsWindow(hW) then Exit; // already closed?
  GetWindowThreadProcessId(hW, ProcID);
  hProc := OpenProcess(PROCESS_TERMINATE, False, ProcID);
  TerminateProcess(hProc, 0);
end; 
```

# ruby-on-rails - rails 中的联系表格 - 没有正文的电子邮件

> ID：12304423
> 
> 赞同：0
> 
> 时间：2012-09-06T16:27:54.603
> 
> 标签：ruby-on-rails

我正在为我在 Rails 上的网站填写联系表格。我发送电子邮件，我收到了带有主题的电子邮件，往返于；但身体是空白的。这里的代码：

contact_mailer.rb

```
class ContactMailer < ActionMailer::Base
  default from: "noreplay@hybrid-tech.net"
  default to:   "info@hybrid-tech.net"

  def new_message(contact_message)
    @contact_message = contact_message
    mail(subject: "Send it from Hybrid Tech Website - #{@contact_message.subject} ")
  end
end 
```

风景

contact_email.html.erb

```
<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  </head>
  <body>
    <h1>Name: <%= @contact_message.name %></h1>
    <h1>E-Mail: <%= @contact_message.email %></h1>
    <p>
      Message: <%= @contact_message.body %><br/>
    </p>
  </body>
</html> 
```

有没有人知道这里有什么问题。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:36:25.757

重命名`contact_email.html.erb`为`new_message.html.erb`.

该视图应该与您的 Mailer 中的操作具有相同的名称。

# javascript - 根据元素高度和宽度的百分比变化增加或减少字体大小

> ID：12304426
> 
> 赞同：1
> 
> 时间：2012-09-06T16:28:07.757
> 
> 标签：javascript, jquery, html, math, font-size

我想在调整元素大小时调整元素内文本的字体大小。我设法让它用这个jsFiddle中的宽度很好地调整字体大小：

[http://jsfiddle.net/jWKWS/3/](http://jsfiddle.net/jWKWS/3/)

但是，我只能根据一维调整它的大小。我可以使用高度百分比，也可以使用宽度百分比。是否可以通过一个方程式将两个尺寸都考虑在内，以便尺寸针对高度和宽度进行适当调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:42:27.173

以区域为基础如何？添加：

```
percentageAreaDifference = (1-percentageWidthDifference)*(1-percentageHeightDifference) 
```

接着

```
newFontSize = startingFontSize * percentageAreaDifference; 
```

尽管您可能想玩它；我怀疑这会比需要的更快地缩小/增长字体。你可能想这样做：

```
newFontSize = startingFontSize * Math.sqrt(percentageAreaDifference); 
```

由于更改字体大小实际上会沿两个维度缩小它，因此字体大小减少 50% 会使字符占用的区域减少 75%（大约）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:40:44.270

我投入的时间比我愿意承认的要多得多，但我和一个朋友终于找到了用元素缩放文本的最佳方法。您必须使用勾股定理计算二维对角线并获得对角线的百分比差异。

```
var diagonal = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)); 
```

只需为原始尺寸计算一次，然后为新尺寸计算一次，然后得到百分比差异。

```
var percentage = (newDiagonal - oldDiagonal) / newDiagonal; 
```

然后只需将字体大小增加相同的百分比。

```
var newFontSize = oldFontSize + (oldFontSize * percentage); 
```

* * *

另一种选择是跳过所有糟糕的数学并使用我们编写的这个插件：

[jquery.dynamiText](https://github.com/Chevex/jquery.dynamitext)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:48:26.700

我认为您只需要将 newfontsize 计算更改为：

```
newFontSize = startingFontSize + (startingFontSize * (percentageWidthDifference + percentageHeightDifference )); 
```

如果宽度减少很多，高度增加一点，净减少。反之亦然。但是，您可能希望将文本保留在框中，并且回流会咬住您。不知道你会如何确定地控制它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T11:45:28.963

我认为您可能想要该区域的 sqrt（作为原始区域的倍数）。[这个 jsfiddle](http://jsfiddle.net/jEZQL/)中的演示。

关键行是（在 var 语句中）：

```
 newArea = newWidth*newHeight,
        origArea = startingWidth*startingHeight,
        areaDiff = (newArea/origArea),
        newFontSize = (startingFontSize * Math.sqrt(areaDiff)); 
```

使用 sqrt 是因为字符占用的区域大致与字体大小的平方成正比。所以N个字符需要的总面积是~[(f1/f0)^2]N。因此，面积“因子”的平方根给出了要使用的新字体大小因子的度量。

一个工作的例子；如果新宽度是旧宽度的 1.2 倍，新高度是旧高度的 1.5 倍，则新区域是旧区域的 1.8 倍。然后这个公式说新字体大小应该是旧字体大小的 1.34 倍。它似乎有效。

# c++ - 如何将 QGraphicsScene 动画渲染成电影文件？

> ID：12304427
> 
> 赞同：2
> 
> 时间：2012-09-06T16:28:09.613
> 
> 标签：c++, python, qt, render, movie

有人知道如何将 QGraphicsView / QGraphicsScene 中的动画渲染成磁盘上的电影文件格式（AVI、MPG、MP4、MOV 等）吗？我已经看到了使用 QPrinter 将场景渲染为图像文件的示例。关于是否可以将动画渲染到电影的任何想法？

我想最坏的情况是逐帧保存图像，然后使用一些外部工具将图像组合成电影......有更好的建议吗？是否有可能以某种方式直接从 QT 做到这一点？

谢谢！- 布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:59:28.277

我认为其中一种方法是`QPixmap`用于捕获图像，

```
QPixmap pixMap = QPixmap::grabWidget(view); 
```

用于`QPixmap::toImage()`将其转换为`QImage`.

并使用[QtFFmpegWrapper](http://code.google.com/p/qtffmpegwrapper/)直接从`QImage`.

您不需要使用外部工具。只是一个外部库。

# android - 使用 Web 视图从服务器加载 html 和 js 的 iOS 和 Android 项目的架构（单一代码库）

> ID：12304428
> 
> 赞同：0
> 
> 时间：2012-09-06T16:28:13.877
> 
> 标签：android, ios, architecture, webview

我们最近开始了一个混合项目（？），在 iOS 和 Android 上工作，具有以下规格：

Html 页面、Javascript 文件、基于 Jquery 的库文件和资源文件（图像）托管在服务器上。混合代码（iOS 或 android）在 web 视图中加载 html 页面，页面导航和事件处理与任何基于 html 和 js 的普通网站完全一样。我们已经为 AJAX Web 服务调用处理了 CORS。数据基本上存储为本地存储（浏览器的支持）。

用户查看的大部分数据都是来自 Web 服务调用的实时数据，除了一些使用相机捕获的图像，这些图像将本地存储在应用程序沙箱中。（对于相机调用，我们编写了本机代码。）

为什么架构是这样规划的？原因之一 - 应用程序中的任何修改都将直接从服务器处理，因为我提到所有 html 和 js 文件都集中位于服务器上，当然也可以跳过 Apple 的应用程序提交过程）。

现在我不太确定这种应用程序是否存在任何问题 - 问题可能是因为 1\. Apple 是否接受此类应用程序？2\. 项目维护 3\. 对应用程序架构设计的任何批评。

我是这个项目的一个小开发者，我有这些问题要问你。如果我没有以适当的方式提出疑问，请向我道歉。非常欢迎您的批评和回答/提示。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T19:40:58.580

如果可能，您应该使用原生代码，HTML5 应用程序的性能与原生应用程序相比并不是很好，而且您可以使用原生应用程序做的事情是值得的。尽管 Apple 不应该对您的应用程序有任何问题。但正如韦斯利所说，他们从来没有真正遵循平台的一致性，所以他们只是看起来不合时宜。即使在本机应用程序中，您仍然可以从服务器控制应用程序的简单方面，例如主题等，您只需要提前考虑。

# mongodb - 在 mongoengine 中模拟双端队列结构

> ID：12304429
> 
> 赞同：0
> 
> 时间：2012-09-06T16:28:16.103
> 
> 标签：mongodb, mongoengine

所以我有一个“部分”，每个部分都有一些“掘金”。我的模型是这样的：

```
class Nugget(EmbeddedDocument):
    title = StringField(required=True)
    img = StringField(required=True)
    content = StringField(required=True)
    section = StringField(required=True)
    next_nugget = StringField(required=True)
    previous_nugget = StringField(required=True)

class Section(Document):
    meta = {"collection":"Sections"}
    title = StringField(required=True)
    nuggets = ListField(EmbeddedDocumentField(Nugget), default=list) 
```

我的问题是如何确保以特定顺序（比如说插入顺序）存储和检索块？最有效的方法是模拟双端队列结构对吗？那么我怎么能用 mongoengine 做到这一点？如果可能的话，我可以使用 mongoengine 的 SortedListField 来获得相同的效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:34:28.723

最好的方法是在您的应用程序中管理它 - 始终`push`在列表中。否则，您必须确保按照您希望的顺序保存（覆盖）列表 - 缺点是您必须小心不要在代码中引入竞争条件。出于这个原因，我提倡只使用推送操作 - 请参阅：[http ://docs.mongoengine.org/en/latest/guide/querying.html?highlight=push#atomic-updates](http://docs.mongoengine.org/en/latest/guide/querying.html?highlight=push#atomic-updates)

# mongodb - 多线程插入 mongodb 使数据过时

> ID：12304431
> 
> 赞同：0
> 
> 时间：2012-09-06T16:28:22.117
> 
> 标签：mongodb

在我的测试环境中：node1:shard1 primary,shard2 primary node2:shard1 secondary,shard2 secondary node3:shard1 arbiter,shard2 artbiter 我写了一个多线程并发写入mongo副本集shard，1小时后（主有6g数据) 我发现secondary的状态是：recovering 我检查了secondary log，说：stale data from primary oplog 所以是我的写请求非常频繁？然后导致secondary无法及时复制？还是其他原因？我很困惑...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:40:55.670

如果 OpLog 的大小不足以记录主节点上发生的所有操作，或者辅助节点跟不上主节点，就会发生这种情况。在这种情况下会发生的是 OpLog 中辅助节点所在的位置将被来自主节点的新插入覆盖。此时，辅助节点将报告其状态为`Recovering`，您将`RS102`在日志中看到一条消息，表明它太陈旧而无法赶上。

要解决此问题，您需要按照[文档](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)中列出的步骤进行操作。

为了防止以后发生问题，您需要调整 OpLog 的大小，并确保辅助设备具有相同的硬件配置。

为了帮助调整 OpLog，您可以查看其输出，`db.printReplicationInfo()`它会告诉您在 OpLog 中有多少时间。该[文档](http://docs.mongodb.org/manual/tutorial/change-oplog-size/)概述了如果 OpLog 太小，如何调整它的大小。

# c++ - 如何获得返回自身的 boost::function （或其他通用函数包装器）？

> ID：12304438
> 
> 赞同：6
> 
> 时间：2012-09-06T16:28:35.203
> 
> 标签：c++, gcc, boost, fsm

我最近迷上了 Erlang 基于 actor 的并发模型的简单性，并且正在尝试用 C++ 实现它的某些部分的想法。沿着这些思路，我也喜欢将有限状态机实现为表示状态的函数集合的想法，其中通过从一个函数到下一个函数的尾调用来进行转换。

我想在 C++ 中尝试类似的东西。但是一个天真的实现很可能会遇到这样一个事实，即在我的编译器（GCC 4.1 with `-O0`）中进行尾部调用最终会导致堆栈溢出。所以相反，我想做的是让每个状态/函数返回一个仿函数（下一个要进入的状态），并有一个底层循环，它只是顺序调用一个仿函数，然后调用返回的仿函数，然后调用仿函数因此返回，等等。类似的东西：

```
typedef ... context_t;

// A statefunctor is a functor which takes a context_t and 
// returns a statefunctor
//
// FIXME: of course, this typedef won't compile.
typedef boost::function<statefunctor (context_t& )> statefunctor;

// NULL boost::function<> represents the exit condition.
static const statefunctor EXIT_FSM;

// primary loop which runs the FSM
void run_fsm(context_t& ctx, statefunctor initial_state)
{
    while (initial_state)
    {
        initial_state=initial_state(boost::ref(ctx));
    }
}

// states 'foo', 'bar', and 'baz';
statefunctor foo(context_t& ctx);
statefunctor bar(context_t& ctx, int inval);
statefunctor baz(context_t& ctx);

// State 'foo'
statefunctor foo(context_t& ctx)
{
    // act somehow on the external context
    int magic_number_1=ctx.get_magic_number();
    int magic_number_2=ctx.get_magic_number();

    // Always transition to 'bar'
    return boost::bind(&bar, _1, magic_number_1-magic_number_2);
}

// State 'bar'
statefunctor bar(context_t& ctx, int inval)
{
    inval+=ctx.get_magic_number(); // Act on external context somehow

    // transition to foo or baz
    if (inval>0) { return &foo; }
    else { return &baz; }
}

// State 'baz'
statefunctor baz(context_t& ctx)
{
    // Transition to foo or exit
    if (ctx.get_magic_number()==5) {return EXIT_FSM;}
    else {return &foo;}
}

int main()
{
    context_t ctx;
    // start the state machine in state 'foo'
    run_fsm(ctx, &foo);
} 
```

所以，我的问题是，我该如何定义`statefunctor`？特别是，我希望它能够保存任意函子（如`boost::bind(...)`可能创建），而不仅仅是函数指针。

**注意：**我使用`boost::bind`, `boost::function`，`boost::ref`而不是他们的`std::`对应物，因为我坚持使用不支持 C++11 的 GCC 4.1。赞赏 C++03 中有效的解决方案；-)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:58:06.407

您不能直接通过 a 执行此操作`typedef`，但可以将其包装`boost::function`在 struct / class 中（感谢[@R. Martinho Fernandes](https://chat.stackoverflow.com/transcript/message/5253400#5253400)让我有这种洞察力）：

```
#include <boost/function.hpp>

typedef int context_t;

struct statefunctor
  : boost::function<statefunctor(context_t&)>
{
  typedef boost::function<statefunctor(context_t&)> base_type;
  statefunctor() : base_type(){}
  template<class F>
  statefunctor(F f) : base_type(f){}
}; 
```

[活生生的例子。](http://liveworkspace.org/code/68cc68c988efc0d4bb8390708a4b8c3b)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:38:27.670

这是不可能的。类型将是无限的，问题与定义返回自身的函数指针时遇到的问题相同。做到这一点的唯一方法是使用 operator() 手动编写自己的函数对象，这可以返回`*this`和链式`()`调用。您还可以通过其他方式使用运算符链接，如`std::cout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:38:10.660

你不能。问题是返回类型的定义必须是递归的，这是不可能的。

# html - 可组合和/或可插入的网站架构

> ID：12304440
> 
> 赞同：2
> 
> 时间：2012-09-06T16:28:42.967
> 
> 标签：html, asp.net-mvc, architecture

我正在做一些研究/探索不同的网站设计和架构。一般来说，我想了解当今为网站所做的不同模式和实践。

具体来说，我正在寻找可组合和/或插件的网站设计。此设置的主要目的是允许每个插件或网站的一部分独立于其他部分进行开发。希望对其他部分的工作知识很少。我知道在身份验证和授权方面会有一些知识传播。主要目标是限制站点各部分之间的耦合，并限制代码更改对站点其他部分的影响。

我有一些想法，但我不确定它们是否是盗版的。这就是为什么我试图找到更多关于其他人做了什么的信息。

一些想法。
想法 1 是创建一个允许部署插件的 MVC 站点。有几种方法可以做到这一点。看到[这里](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)，[这里](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins)和[这里](https://stackoverflow.com/questions/236972/using-virtualpathprovider-to-load-asp-net-mvc-views-from-dlls)。插件可以独立于主站点开发和运行。完成后可以放入并使用主核心进行测试。一组母版页、CSS 和其他任何东西。这类似于大多数 CMS 系统的插件模型（例如：wordpress）

第二个想法是设计上的单一标志。站点的每个部分都可以作为自己的域/站点/等托管。但身份验证将在一个标志点完成。关于如何做到这一点的一些想法可以在[这里](http://www.codeproject.com/Articles/106439/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic)看到。母版页、CSS 和其他项目可能必须在不同部分之间重复。

第三个想法是两者的混合。“核心”站点将处理样式和布局。内容将是对站点不同部分的 ajax 调用，这些部分可以托管在同一域上，也可以不托管在同一域上。

我还没有把这些想法冲洗掉，也没有做过任何原型设计。我正在这个过程的头脑风暴部分。唯一一成不变的是它将使用 C#/asp.net mvc 编写，并且站点的各个部分之间必须只有一个登录。除此之外，一切都是公平的游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:37:55.420

我使用[RazorGenerator](http://razorgenerator.codeplex.com/)。它可以通过 NuGet 安装（加上一个 VS 工具的安装），您所要做的就是在您的视图上设置自定义工具属性。

然后，您的核心站点将不得不使用虚拟路径提供程序的想法。您可以使用[Chris van de Steeg 的方法，](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)因为他已经构建了您需要的所有代码。

第三点，可以说是最重要的一点：如何让插件“暴露”它们的端点（控制器和动作）？您如何在正确的上下文和站点上的位置执行此操作？

为此，我使用了一个框架 DLL，它为不同的场景公开了大量的接口。主站点为不同类型的端点创建管理器，我有几个布局和助手类，它们调用管理器将端点呈现在正确的位置。在应用程序启动时，我遍历预定义目录中的所有插件 DLL，并使用反射检查它们的接口，然后将它们添加到适当的管理器中。

我还在站点中创建了一个“管理”区域来禁用端点，以便管理员可以覆盖插件的默认行为。

据我所知，并且正如我迄今为止所做的努力所证明的那样，没有预先存在的项目来处理这个问题。希望这对您的方向有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T13:13:47.213

我选择了上面的想法1。这是一些为 ASP.NET MVC 创建插件站点的示例代码，不需要任何第三方引用。它还包括要嵌入到插件 dll 中的所有站点内容。享受！

[https://github.com/Oobert/ASP.NET-MVC-Plugins](https://github.com/Oobert/ASP.NET-MVC-Plugins)

# android - 在网格中对齐

> ID：12304441
> 
> 赞同：0
> 
> 时间：2012-09-06T16:28:44.947
> 
> 标签：android

我正在开发一个 android 日历应用程序，所以我需要以类似网格的方式对齐日期。我正在使用 API Level 8，所以我需要按边距对齐它们。但是当切换到更大的屏幕时，数字会出现在屏幕的左侧，并且不会覆盖整个屏幕。（我知道这是因为我使用 dp 作为左侧边距的单位）。Android 布局中是否有类似 CSS %（百分比）的内容？

![这就是我要的](../Images/6e24a5f16a04243c49038b2c84838e9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:29:56.587

试试这个

```
android:layout_weight="1" 
```

在该部分的每个元素上。它应该均匀分布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:51:49.543

它是`weight`内部视图的属性`LinearLayout`。[这](https://stackoverflow.com/questions/3995825/what-does-androidlayout-weight-mean)是一个很好的解释它的含义。但是您只能使用它来设置视图大小，而不是边距。但是，您可以将视图放入`RelativeLayout`，放置此布局以获取所有可用的屏幕宽度并`centerInParent=true`在视图中设置属性。

# asp.net-mvc - jqueryUI拖放，目标更新后如何重新启用拖放？

> ID：12304449
> 
> 赞同：0
> 
> 时间：2012-09-06T16:29:22.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-draggable

我正在使用 asp.net mvc3 和 jqueryUI。这是我的拖放代码，它可以工作，拖放没有问题。

```
<script type="text/javascript">
    $(function () {
        $(".sourceItem").draggable({
            helper: "clone",
            appendTo: "body"
        });

        $("#targetBox").droppable({
            accept: ".sourceItem",
            hoverClass: "drop-active",
            drop: function (event, ui) {
                $("#targetBox").append("test");                   
            }
        });
    }); 
</script> 
```

将内容拖放到“targetBox”后，现在，如果单击“btnBlend”按钮，“smoothieBox”Div 将被更新。

```
 <div id="smoothieBox">
        @using (Ajax.BeginForm("Summary", "Home", new AjaxOptions { UpdateTargetId = "smoothieBox" }))
        {
            @Html.ValidationSummary(true)
            @Html.AntiForgeryToken()
            <div id="blender">
                <div id="targetBox" class="clearfix">
                </div>
                <input id="btnBlend"  type="image" src="@Links.Content.images.btn_blend_png" name="image" width="137" height="33" />
            </div>           
        }
    </div> 
```

“smoothieBox” div 中的新内容将是：

```
@using (Ajax.BeginForm("Blender", "Home", new AjaxOptions { UpdateTargetId = "smoothieBox" }))
{
    @Html.ValidationSummary(true)
    @Html.AntiForgeryToken()

    @Html.HiddenFor(x =>x.SmoothieId )

    <input id="btnGoBack"  type="image" src="@Links.Content.images.btn_go_back" name="image" width="137" height="33" />            
} 
```

现在，如果您单击“btnGoBack”按钮，“smoothieBox”Div 将再次更新以显示原始内容，您应该可以再次拖放。但是，这一次我不能放弃它。我不知道为什么，可能是因为目标 div“targetBox”被删除，然后使用 ajax 将其添加回来。我可能必须重新启用 drop，但不太确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:05:16.013

我猜想当 ajax 发生时，这个事件就会解除绑定到那个 DOM 元素。所以你必须重新绑定这些事件。

在表单中添加一个 ajax 选项“OnSuccess”。此方法将在 ajax 请求成功后调用。

```
@using (Ajax.BeginForm("Blender", "Home", new AjaxOptions 
                                  { 
                                     UpdateTargetId = "smoothieBox",
                                     OnSuccess = "OnSuccess"
                                  })) 
```

在脚本中：

```
<script type="text/javascript">
  $(function () {
     BindEvents();
  });

  function OnSuccess() {
     BindEvents();
  }

  function BindEvents(){
     $(".sourceItem").unbind("draggable").draggable({
        helper: "clone",
        appendTo: "body"
     });

     $("#targetBox").unbind("droppable").droppable({
        accept: ".sourceItem",
        hoverClass: "drop-active",
        drop: function (event, ui) {
            $("#targetBox").append("test");                   
        }
     }); 
  } 

</script> 
```

希望这会有所帮助！

# java - 如何将 Java HttpPost 对象显示为字符串？

> ID：12304454
> 
> 赞同：7
> 
> 时间：2012-09-06T16:29:55.807
> 
> 标签：java, android, http-post

我正在`HttpPost`Android 中创建一个对象以与客户端操作的服务器进行通信。不幸的是，服务器没有为我们提供非常有用的错误消息；我想将`HttpPost`对象的内容作为字符串查看，以便我可以将其发送给我们的客户，他可以将其与他的期望进行比较。

如何将 HttpPost 对象转换为反映它到达服务器时的外观的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T08:34:24.807

应该在执行后使用它

```
public static String httpPostToString(HttpPost httppost) {
    StringBuilder sb = new StringBuilder();
    sb.append("\nRequestLine:");
    sb.append(httppost.getRequestLine().toString());

    int i = 0;
    for(Header header : httppost.getAllHeaders()){
      if(i == 0){
          sb.append("\nHeader:");
      }
        i++;
        for(HeaderElement element : header.getElements()){
            for(NameValuePair nvp :element.getParameters()){
                sb.append(nvp.getName());
                sb.append("=");
                sb.append(nvp.getValue());
                sb.append(";");
            }
        }
    }
    HttpEntity entity = httppost.getEntity();

    String content = "";
    if(entity != null){
        try {

            content = IOUtils.toString(entity.getContent());
        } catch (Exception e) {
            e.printStackTrace();
        } 
    }
    sb.append("\nContent:");
    sb.append(content);

    return sb.toString();
} 
```

[片段](https://gist.github.com/proofy/264e957ba0cc190ee8d3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:19:38.380

好吧，我实际上确实`HTTP-Post`使用`NameValuePair`了......我正在展示我用来做的代码，`HTTP-Post`然后**将响应**转换为`String`

**请参阅下面的方法代码：**

```
public String postData(String url, String xmlQuery) {

final String urlStr = url;
final String xmlStr = xmlQuery;
final StringBuilder sb  = new StringBuilder();

Thread t1 = new Thread(new Runnable() {

public void run() {

    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(urlStr);

    try {

         List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);

         nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

         httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

         HttpResponse response = httpclient.execute(httppost);

         Log.d("Vivek", response.toString());

        HttpEntity entity = response.getEntity();
        InputStream i = entity.getContent();

        Log.d("Vivek", i.toString());
        InputStreamReader isr = new InputStreamReader(i);

        BufferedReader br = new BufferedReader(isr);

        String s = null;

        while ((s = br.readLine()) != null) {

            Log.d("YumZing", s);
            sb.append(s);
        }

        Log.d("Check Now",sb+"");

        } catch (ClientProtocolException e) {

                e.printStackTrace();

                } catch (IOException e) {

                    e.printStackTrace();
                } 
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method "+sb.toString());

        return sb.toString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:04:01.720

I usually do post in this way (The server answer is a JSON object) :

```
 try {
        postJSON.put("param1", param1);
        postJSON.put("param2",param2);

    } catch (JSONException e) {
        e.printStackTrace();
    }

    String result = JSONGetHTTP.postData(url);
    if (result != null) {
        try {

            JSONObject jObjec = new JSONObject(result);

            }
        } catch (JSONException e) {
            Log.e(TAG, "Error setting data " + e.toString());
        }
    } 
```

And postData is:

```
public static String postData(String url, JSONObject obj) {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = null;
    try {
        HttpParams myParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(myParams, 30000);
        HttpConnectionParams.setSoTimeout(myParams, 30000);
        httpclient = new DefaultHttpClient(myParams);

    } catch (Exception e) {
        Log.e("POST_DATA", "error in httpConnection");
        e.printStackTrace();
    }

    InputStream is = null;
    try {
        HttpPost httppost = new HttpPost(url.toString());
        //Header here   httppost.setHeader();
        StringEntity se = new StringEntity(obj.toString());

        httppost.setEntity(se);

        HttpResponse response = httpclient.execute(httppost);

        HttpEntity entity = response.getEntity();
        // // Do something with response...
        is = entity.getContent();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // convert response to string
    BufferedReader reader = null;
    String result = null;
    try {
        reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        result = sb.toString();

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    } finally {

        try {
            if (reader != null)
                reader.close();
            if (is != null)
                is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    if (result != null) {
        try {
            @SuppressWarnings("unused")
            JSONObject jObjec = new JSONObject(result);

        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
    }

    return result;
} 
```

Hope it helps

# javascript - 显示：带有 css 的块/无 html 元素 ..未从内存中释放

> ID：12304455
> 
> 赞同：1
> 
> 时间：2012-09-06T16:29:59.113
> 
> 标签：javascript, css, html

我无法解决这个问题。我在一个`HTML`页面中有几个 Div。每个 Div 代表一个不同的部分，因此包含该部分的不同图像。所有图像均从 css 引用并使用 javascript ( `document.getElementById('DIV').style.display='none/block';`) 显示/删除。

出于本示例的目的，假设我有 2 个 div。每个部分 Div(Div1 & Div2) 将是父 div，并且这些父级中的任何 Div 都将是其子级。（DIV1a，DIV2a）

我发现如果使用 display: block 设置 Div1 并使用 css Background-image:.... 而 Div2 是`display='none'`当我使用它隐藏 Div1 时`style.display = 'none';`它确实将其从屏幕上删除并允许我显示 Div2 ..但是background-image 仍然存在于浏览器内存中。

有趣的是，如果我将 background-img 放入 DIV1 中的子 div(div1a) 中，当我使用`style.display = 'none'`父 DIV1 时，子 div1a 图像确实会从浏览器内存中删除我`style.display = 'none'`在父 DIV1 上使用。但是我发现这也不一致....它似乎适用于某些父 div 而不适用于其他 div。

正如你可能知道的那样，我很困惑，真的不知道如何解决这个问题。

谢谢大家的时间和想法。

代码示例：

使用此方法时

```
<div id="Div1">
    content....
</div>

<div id="Div2" style="display: none">
    ...content
</div>

div#Div1{
    background-image: url(images/mybg.png);
    background-repeat: no-repeat;
    width: 480px;
    height: 360px;
}

document.getElementById("Div1").style.display='none';
document.getElementById("Div2").style.display='block'; 
```

当我执行上述 javascript 时，图像仍然存在于资源选项卡中

使用此方法时：

```
<div id="Div1">
    <div id="Div1a">
        content....
    </div>
</div>

<div id="Div2" style="display: none">
    content....
</div>

div#Div1a{
    background-image: url(images/mybg.png);
    background-repeat: no-repeat;
    width: 480px;
    height: 360px;
}

document.getElementById("Div1").style.display='none';
document.getElementById("Div2").style.display='block'; 
```

当我执行上面的 javascript 时，图像会从资源选项卡中删除......但这种效果不一致并且并不总是有效：s

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:04:26.430

Setting something to `display: none` does not remove anything from memory in any browser. The entire DOM element is still in the DOM occupying the same amount of memory, it is just marked hidden from view and layout.

If you want to actually remove an element from memory, then you need to physically remove it from the DOM, usually using `parent.removeChild(child)` AND make sure that there are no references to the DOM element anywhere in your javascript which would keep it from getting garbage collected.

* * *

Also, I don't know how you are assessing memory usage in your browser, but most methods will not accurately detect whether a browser has freed a given image or not because the memory may have been freed from an internal pool of memory (available for reuse), but not returned to the OS. Just releasing an image will not necessarily show a reduction in memory usage by the browser. What does show would be highly browser specific and even OS specific and would certainly depend upon exactly what tools you were using to examine memory usage.

# asp.net-mvc-3 - 从 foreach 循环 (razor/webmatrix) 发布登录凭据

> ID：12304456
> 
> 赞同：0
> 
> 时间：2012-09-06T16:30:04.183
> 
> 标签：asp.net-mvc-3, razor, webmatrix

对于这种情况，我有一个用 razor/webmatrix 编写的简单表格。我希望用户能够使用我的 db.Query 通过 foreach 循环提供的登录凭据登录到外部网站。如果我不使用 foreach 循环，则登录有效。它只是从数据库查询中返回第一行，然后登录。当我添加 foreach 循环时，它会打开没有任何凭据的登录页面。任何帮助，将不胜感激。我的代码如下：

```
var selectQueryString = "SELECT user_id,password FROM user_table
var user_row = db.Query(selectQueryString);

     <form name="UpdateOrRac" method="POST" action="Login Page URL would be here">      

             @foreach (var row in user_row){
                <div>
                 <input  name="txtUserID" value="@row.user_id" readonly="readonly" />
                 <input  name="txtPassword" value="@row.password" readonly="readonly" />
                 <input type="submit" value="Login" />
                    </div> 
            }

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:43:14.940

使用 foreach 循环，您的页面会将存储在数据库中的所有用户/密码对一起发送到登录页面。

我认为您应该选择一个用户并用它填充表单。像这样的东西：

```
@{   
    var db = Database.Open("MyDb");
    var selectQueryString = "SELECT user_id,password FROM user_table WHERE user_id = @0";
    var user_row = db.QuerySingle(selectQueryString, "YourUserName");
}
 <form name="UpdateOrRac" method="POST" action="Login.cshtml">
    <div>
        <input  name="txtUserID" value="@user_row.user_id" readonly="readonly" />
        <input  name="txtPassword" value="@user_row.password" readonly="readonly" />
        <input type="submit" value="Login" />
    </div>
</form> 
```

**编辑**

回应您的评论，是的，但现在您的目标更明确了。

要获取可以登录的帐户列表，最简单的方法是使用带有用户 ID 和密码的查询字符串的登录页面链接：

```
@{   
    var db = Database.Open("MyDb");
    var selectQueryString = "SELECT user_id,password FROM user_table";
    var user_row = db.Query(selectQueryString); 
} 

<div>
    @foreach(var row in user_row)
    {
        <p>
            @row.user_id &nbsp;&nbsp; 
            @row.password &nbsp;&nbsp;
            <a href="~/Login?id=@row.user_id&pwrd=@row.password">Login</a>
        </p>
    }
</div> 
```

您可以使用以下语句在 Login.cshtml 页面中获取传递的数据：

```
var user = Request.QueryString["id"];
var pwrd = Request.QueryString["pwrd"]; 
```

如果安全是一个问题，您必须考虑 GET 和 POST 几乎相同（查看[GET 或 POST 是否比另一个更安全？](https://stackoverflow.com/questions/198462/is-either-get-or-post-more-secure-than-the-other)）

# c# - 在sql asp.net后面的查询代码中使用本地表变量

> ID：12304463
> 
> 赞同：0
> 
> 时间：2012-09-06T16:30:30.330
> 
> 标签：c#, asp.net, sql, code-behind

我可以在 sql 查询中使用带有一列的本地 DataTable 吗？如何？

```
List<int> k_p = null;
k_p = new List<int>();
k_p = (List<int>)Session["kosarica"];
DataTable spremljeno = new DataTable();
spremljeno.Columns.Add("id_k_p");
for(int i=0; i<k_p.Count; i++)
{
    spremljeno.Rows.Add(k_p[i]);
}
String ConnString = "Data Source=BRACO-PC\\SQL1;Initial Catalog=DiplomskiSQL1SQL;Integrated Security=True;";
SqlConnection Conn = new SqlConnection(ConnString);
Conn.Open();
DataTable ukosarici = new DataTable();
SqlDataAdapter da = new SqlDataAdapter("Select Proizvod.id_p, Proizvod.ime, TipProizvoda.tip, Proizvod.dimenzije, Proizvod.cijena FROM Proizvod LEFT JOIN TipProizvoda ON Proizvod.tip=TipProizvoda.id_t WHERE Proizvod.id_p IN @spremljeno", Conn);
SqlCommandBuilder cmd = new SqlCommandBuilder(da);
da.Fill(ukosarici);
GridView1.DataSource = ukosarici;
GridView1.DataBind();
Conn.Close(); 
```

我只想显示 id_p 等于 spremljeno 中的值的数据，并且不想在 db 中创建临时表，但不知道是否有可能...连接到 SQL Server 2008...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:40:49.323

您可以将所有 ID 作为参数添加到`IN`SQL 中的子句：

```
var parameters = new string[k_p.Count];
using(var cmd = new SqlCommand())
{
    for (int i = 0; i < k_p.Count; i++)
    {
        parameters[i] = string.Format("@id_p{0}", i);
        cmd.Parameters.AddWithValue(parameters[i], k_p[i]);
    }
    var sql = "Select Proizvod.id_p, Proizvod.ime, TipProizvoda.tip, Proizvod.dimenzije, Proizvod.cijena FROM Proizvod LEFT JOIN TipProizvoda ON Proizvod.tip=TipProizvoda.id_t WHERE Proizvod.id_p IN ({0})";
    cmd.CommandText = string.Format(sql, string.Join(", ", parameters));
    using(var con = new SqlConnection(connStr))
    {
        cmd.Connection = con;
        using(var da = new SqlDataAdapter(cmd))
        {
            da.Fill(ukosarici);
        }
    }
} 
```

请注意，您应该`using`对实现的所有内容使用 -statements `IDisposable`（fe`SqlConnection`也`Dispose`关闭连接）。另请注意，我只使用了你的`List<int>`，第二个`DataTable`是多余的。

# java - 你能帮我理解 java:comp/env （企业命名上下文又名 ENC）的目的吗？

> ID：12304464
> 
> 赞同：0
> 
> 时间：2012-09-06T16:30:37.083
> 
> 标签：java, jndi

我一直在阅读有关 JBoss 命名服务 JNDI 提供程序的信息。

我在代码中看到过一百万次但我从未真正理解过的东西——ENC。

```
// Obtain the application component's ENC
Context iniCtx = new InitialContext();
Context compEnv = (Context) iniCtx.lookup("java:comp/env"); 
```

我已经阅读了一些关于 ENC 的信息

[Stackoverflow 文章的答案稍微描述了 ENC](https://stackoverflow.com/questions/6180144/declaring-resource-and-ejb-at-the-class-level-in-java-ee6/6185960)

[J2EE 和 JNDI - 应用程序组件环境](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/Naming_on_JBoss-J2EE_and_JNDI___The_Application_Component_Environment.html#J2EE_and_JNDI___The_Application_Component_Environment-ENC_access_sample_code "J2EE 和 JNDI")

[另一个 Stackoverflow 文章](https://stackoverflow.com/questions/6853864/ejb-jndi-enc-real-life-scenario)

但是，我真的很难理解何时以及为什么要使用 java:comp/env JNDI 上下文。谁能帮我分解一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:49:27.310

ENC 的目的是提供一个隔离的、只读的命名空间，应用程序组件可以依赖该命名空间，而不管组件部署的环境类型如何。

# gradle - 如何在 gradle 中将版本号或其他内容放入我的 zip 存档中

> ID：12304465
> 
> 赞同：0
> 
> 时间：2012-09-06T16:30:37.217
> 
> 标签：gradle

编辑：我正在尝试运行这两个命令并在 gradle 子项目中获得这些结果......

```
gradle assemble -> databus-Developer-Build.zip
gradle -DmyVersion=1.0.2 -> databus-1.0.2.zip 
```

目前，如果我使用 $version 而不是 $myVersion，我的输出是 databus-null.zip。使用 $MyVersion 时，我收到错误“myVersion 不是该任务的属性”。:( :(。

**编辑**

因此，尝试第一个答案完全失败了“在任务'：webserver：myZip”上找不到属性$ myVersion

注意：我现在正在尝试在子项目中执行此操作。这是子项目的gradle代码...

```
project(':webserver') {
    project.ext.genLibDir = file('lib')
    project.ext.fixedLibDir = file('../master/libother')

    dependencies {    
        compile project(':master')
        compile fileTree(dir: '../webserver/lib', include: '*.jar')
        compile fileTree(dir: '../webserver/play-1.2.4/framework/lib', include: '*.jar')
        compile fileTree(dir: '../webserver/play-1.2.4/framework', include: 'play-*.jar')   
    }

    task deleteJars(type: Delete) {
        ext.collection = files { genLibDir.listFiles() }
        delete ext.collection
    }
    task copyJars(type: Copy) { 
        from(configurations.compile) {}
        from(fixedLibDir) {}
        into genLibDir
    }
    copyJars.dependsOn('deleteJars')
    classes.dependsOn('copyJars')

    task myZip(type: Zip) {
        archiveName "dashboard-"+$myVersion+".zip"
        from('..') {
            include 'webserver/run*.sh'
            include 'webserver/app/**'
            include 'webserver/conf/**'
            include 'webserver/play-1.2.4/**'
            include 'webserver/public/**'
        }
    }

    assemble.dependsOn('myZip')

    //playframework has it's own generation of .classpath and .project fils so do not 
    //overwrite their versions.  NEED to call "play.bat eclipsify" here...
    task eclipse(overwrite: true) {
    }

    gradle.taskGraph.whenReady {taskGraph ->
        if (taskGraph.hasTask(assemble) && myVersion == null) {
            myVersion = 'Developer-Build'
        }
    }
} 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:09:05.273

好的，正确的答案是这样做......（将其添加到 allprojects 部分）..

```
 if (project.hasProperty('myVersion')) {
     project.ext.xVersion = project.myVersion
   } else {
     project.ext.xVersion = 'Developer-Build'
   } 
```

有趣的是，下面这个不起作用，因为“版本”似乎是某种保留属性，并且在启动时设置为未指定......

```
 if (project.hasProperty('version')) {
     project.ext.xVersion = project.version
   } else {
     project.ext.xVersion = 'Developer-Build'
   } 
```

看到版本似乎是一个保留属性，它最有可能用于发布工件，所以最好的解决方案可能是以下

```
 if (project.hasProperty('myVersion')) {
     project.version = project.myVersion
   } else {
     project.version = 'Developer-Build'
   } 
```

并且 myVersion 中的自动构建传递和开发人员当然不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:45:11.447

我认为您收到错误“myVersion 不是该任务的属性”的原因是，您必须使用 -P 而不是“-D”传递属性

# asp.net - 需要了解如何在aspx页面中格式化控件

> ID：12304472
> 
> 赞同：1
> 
> 时间：2012-09-06T16:31:06.897
> 
> 标签：asp.net, css, alignment, stylesheet, webpage

很抱歉在这里问一些基本的问题，但我无法在格式化控件中应用正确的方法。

下面是 ASPX 页面中的部分代码。我无法正确格式化它。我需要一些关于要考虑什么以及如何去做的帮助。下面是输出的样子。

![在此处输入图像描述](../Images/74d10576b9a30fc295df7b1095f46d0d.png)

我希望文本框（或下拉菜单）正确对齐它的标签。我知道我没有在这里使用样式表，但想知道我是否可以在没有样式表的情况下实现。即使需要样式表来实现格式，请建议考虑什么以及如何进行。

下面是 ASPX 页面中的内容，

```
<div runat="server" id="DivCCInfo">
<fieldset class="CreditCardInformation">
    <legend>
        <asp:Literal runat="server" ID="CCHeaderLabel" Text= "Credit Card Information" />
    </legend>
    <div>
        <asp:Label ID="CreditCardHolderLabel" runat="server" AssociatedControlID="CreditCardHolder" Text="Cardholder's Name" />
        <br />
        <asp:TextBox ID="CreditCardHolder" runat="server" CssClass="TextBox" MaxLength="30" Width="300" style ="left:-100px" ></asp:TextBox>
        <asp:Label ID="CreditCardTypeLabel" runat="server" AssociatedControlID="CreditCardType" Text="Credit Card Type" />
        <asp:Label ID="CreditCardNumberLabel" runat="server" AssociatedControlID="CreditCardNumber" Text="Credit Card Number" />
        <asp:Label ID="ExpirationLabel" runat="server" AssociatedControlID="ExpirationMonth" Text="Expiration Date"  />
        <asp:Label ID="CVVLabel" runat="server" AssociatedControlID="CVV" Text="CVV Code" />
        <br /><br />
        <asp:DropDownList runat="server" ID="CreditCardType"  Width="105">
            <asp:ListItem Text="VISA"  Value="VISA" />
            <asp:ListItem Text="MasterCard" Value="MasterCard" />
            <asp:ListItem Text="Discover" Value="Discover" />
            <asp:ListItem Text="Amex" Value="Amex" />
        </asp:DropDownList>
        <asp:TextBox ID="CreditCardNumber" runat="server" CssClass="TextBox" MaxLength="16" Width="120"></asp:TextBox>
        <asp:DropDownList runat="server" ID="ExpirationMonth" Width="40">
            <asp:ListItem Text="01" Value="01" />
            <asp:ListItem Text="02" Value="02" />
        </asp:DropDownList>
        <asp:DropDownList runat="server" ID="ExpirationYear" Width="60">
            <asp:ListItem Text="2012" Value="2012" />
            <asp:ListItem Text="2013" Value="2013" />
        </asp:DropDownList>

        <asp:TextBox ID="CVV" runat="server" CssClass="TextBox"   MaxLength="4" Width="50"></asp:TextBox>
    </div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:35:58.300

我可以看到使用[`<table>`](http://www.w3schools.com/html/html_tables.asp)HTML 元素执行此操作的快速方法：

像这样的东西：

```
<table>
    <tr>
        <td>
            <asp:Label
                 ID="CreditCardTypeLabel"
                 runat="server"
                 AssociatedControlID="CreditCardType"
                 Text="Credit Card Type" />
        </td>
        <td>
            <asp:Label
                 ID="CreditCardNumberLabel"
                 runat="server"
                 AssociatedControlID="CreditCardNumber"
                 Text="Credit Card Number" />
        </td>
        <td>
            <asp:Label
                 ID="ExpirationLabel"
                 runat="server"
                 AssociatedControlID="ExpirationMonth"
                 Text="Expiration Date"  />
        </td>
        <td>
            <asp:Label
                 ID="CVVLabel"
                 runat="server"
                 AssociatedControlID="CVV"
                 Text="CVV Code" />
        </td>
    </tr>
    <tr>
        <td>
            <asp:DropDownList
                 runat="server"
                 ID="CreditCardType"
                 Width="105">
                 <asp:ListItem
                      Text="VISA"
                      Value="VISA" />
                 <asp:ListItem 
                      Text="MasterCard"
                      Value="MasterCard" />
                 <asp:ListItem
                      Text="Discover"
                      Value="Discover" />
                 <asp:ListItem
                      Text="Amex"
                      Value="Amex" />
             </asp:DropDownList>
        </td>
        <td>
            <asp:TextBox
                 ID="CreditCardNumber"
                 runat="server"
                 CssClass="TextBox"
                 MaxLength="16"
                 Width="120">
             </asp:TextBox>
        </td>
        <td>
            <asp:DropDownList
                 runat="server"
                 ID="ExpirationMonth"
                 Width="40">
                 <asp:ListItem
                      Text="01"
                      Value="01" />
                 <asp:ListItem
                      Text="02"
                      Value="02" />
             </asp:DropDownList>
             <asp:DropDownList runat="server" ID="ExpirationYear" Width="60">
                  <asp:ListItem Text="2012" Value="2012" />
                  <asp:ListItem Text="2013" Value="2013" />
             </asp:DropDownList>
        </td>
        <td>
            <asp:TextBox
                 ID="CVV"
                 runat="server"
                 CssClass="TextBox"
                 MaxLength="4"
                 Width="50">
             </asp:TextBox>
        </td>
    </tr>
</table> 
```

只需将您的控件放在表格元素内，它们就会完美对齐，如果您愿意，您甚至可以将它们左/中/右对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:35:57.167

如果你真的不想使用 css，你可以试试这样

将标签的宽度设置为某物

```
 <asp:Label ID="CreditCardNumberLabel" runat="server" AssociatedControlID="CreditCardNumber" Text="Credit Card Number" Width="200"/> 
```

将文本框的宽度设置为相同的宽度

```
 <asp:TextBox ID="CreditCardNumber" runat="server" CssClass="TextBox" MaxLength="16" Width="200"></asp:TextBox> 
```

现在在编写 HTML 时，先将标签设置为宽度，然后是空格`&nbsp;`，然后是另一个设置宽度的标签，下一行是设置宽度的文本框，然后是空格`&nbsp;`

我不建议使用表格来设置表格样式，我会坚持使用表格来显示数据表

另外我有一段时间没有在 asp.net 中使用 Width 属性，我通常使用 css ，它可能在您的代码中设置不正确我认为它可能`Width="120px"`是`Width="120"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:49:05.407

您可以使用 div 显式设置宽度并使用 float: left ，也可以按照建议使用表格进行操作。将项目随机放置在没有容器的页面上并期望使它们对齐是一种虚弱且浪费时间的尝试。

这是一种可能性（未经测试并根据您的需要调整 div 大小）：

```
<div>
<div style="margin-bottom: 20px;">
    <asp:Label ID="CreditCardHolderLabel" runat="server" AssociatedControlID="CreditCardHolder" Text="Cardholder's Name" />
    <br />
    <asp:TextBox ID="CreditCardHolder" runat="server" CssClass="TextBox" MaxLength="30" Width="300" style ="left:-100px" ></asp:TextBox>
</div>
<div style="clear: both; width: 200px;">
    <asp:Label ID="CreditCardTypeLabel" runat="server" AssociatedControlID="CreditCardType" Text="Credit Card Type" />
    <br />
     <asp:DropDownList runat="server" ID="CreditCardType"  Width="105">
        <asp:ListItem Text="VISA"  Value="VISA" />
        <asp:ListItem Text="MasterCard" Value="MasterCard" />
        <asp:ListItem Text="Discover" Value="Discover" />
        <asp:ListItem Text="Amex" Value="Amex" />
    </asp:DropDownList>
</div>
<div style="float: left; width: 200px;">
    <asp:Label ID="CreditCardNumberLabel" runat="server" AssociatedControlID="CreditCardNumber" Text="Credit Card Number" />
    <br />
     <asp:TextBox ID="CreditCardNumber" runat="server" CssClass="TextBox" MaxLength="16" Width="120"></asp:TextBox>
</div>
<div style="float: left; width: 200px;">
    <asp:Label ID="ExpirationLabel" runat="server" AssociatedControlID="ExpirationMonth" Text="Expiration Date"  />
    <br />
    <asp:DropDownList runat="server" ID="ExpirationMonth" Width="40">
        <asp:ListItem Text="01" Value="01" />
        <asp:ListItem Text="02" Value="02" />
    </asp:DropDownList>
    <asp:DropDownList runat="server" ID="ExpirationYear" Width="60">
        <asp:ListItem Text="2012" Value="2012" />
        <asp:ListItem Text="2013" Value="2013" />
    </asp:DropDownList>
</div>
<div style="float: left; width: 200px;">
    <asp:Label ID="CVVLabel" runat="server" AssociatedControlID="CVV" Text="CVV Code" />
    <br />
     <asp:TextBox ID="CVV" runat="server" CssClass="TextBox"   MaxLength="4" Width="50"></asp:TextBox>
</div> 
```

# html - 如何从框架集移动到页面？

> ID：12304475
> 
> 赞同：0
> 
> 时间：2012-09-06T16:31:13.480
> 
> 标签：html, html-frames

在我的网站中，我有一个页面有 3 个框架，比如说 left_frame、top_frame 和 bottom_frame。在 top_frame 中，我有一个链接`<a href="some_page.php">Click</a>`。目前，这个 some_page.php 加载在 top_frame 内，但我想完全加载一个新页面。有什么出路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:33:21.360

这应该可以解决问题。

```
<a href="some_page.php" target="_top">Click</a> 
```

# powershell - 使用显示名称属性将用户从 CSV 文件添加到安全组

> ID：12304476
> 
> 赞同：0
> 
> 时间：2012-09-06T16:31:15.663
> 
> 标签：powershell, active-directory

我从这里的帖子中得到了这段代码，效果很好：

```
Import-CSV $file | % {$myGroup | Add-ADGroupMember -Members $_.Alias} 
```

我的 CSV 文件的第一行是“别名”，每隔一行是用户名。这很好用。

但是，当我将代码修改为此：

```
Import-CSV $file | % {$myGroup | Add-ADGroupMember -Members $_.displayName} 
```

我将 CSV 文件的第一行修改为“displayName”，每隔一行修改为显示名称，它不起作用。我猜这是因为 displayName 不是此代码的有效属性，那么如何修改它以使用用户的显示名称而不是用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:53:32.447

这不起作用，因为 DisplayName 不是一个可接受的值。这是有效值的列表。在此处查看 cmdlet 联机帮助：[http ://technet.microsoft.com/en-us/library/ee617210.aspx](http://technet.microsoft.com/en-us/library/ee617210.aspx)

```
Members

Specifies a set of user, group, and computer objects in a
comma-separated list to add to a group. To identify each object, use
one of the following property values. Note: The identifier in
parentheses is the LDAP display name.

Distinguished Name 
Example: CN=SaraDavis,CN=Europe,CN=Users,DC=corp,DC=contoso,DC=com

GUID (objectGUID) 
Example: 599c3d2e-f72d-4d20-8a88-030d99495f20

Security Identifier (objectSid)
Example: S-1-5-21-3165297888-301567370-576410423-1103

SAM Account Name (sAMAccountName) 
Example: saradavis 
```

此外，Members 参数接受一组值，因此您也可以这样做：

```
$members = Import-CSV $file | Foreach-Object {$_.Alias}
$myGroup | Add-ADGroupMember -Members $members 
```

# jquery - jQuery插件如果对象存在

> ID：12304478
> 
> 赞同：1
> 
> 时间：2012-09-06T16:31:16.510
> 
> 标签：jquery, jquery-plugins, jquery-datatables

我在我的脚本中使用它：

```
$.fn.dataTableExt.oSort['title-numeric-asc']  = function(a,b) {
    var x = a.match(/title="*(-?[0-9\.]+)/)[1];
    var y = b.match(/title="*(-?[0-9\.]+)/)[1];
    x = parseFloat( x );
    y = parseFloat( y );
    return ((x < y) ? -1 : ((x > y) ?  1 : 0));
}; 
```

datatableExt 来自：
[http ://datatables.net/download/build/jquery.dataTables.js](http://datatables.net/download/build/jquery.dataTables.js)

有时我包含“jquery.dataTables.js”，有时我不包含。
所以如果包含数据表代码，我想添加这个插件。
我该如何检查？
是不是有点像`(typeof fn.dataTableExt != 'undefined')`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:33:07.430

我认为这很简单

```
if (!$.fn.dataTableExt) {
    alert('does not exist');
} else {
    alert('does exist');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:40:12.823

与检查 JQuery 的 Google 存储库是否已加载相同的方式：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript">!window.jQuery && document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script> 
```

但它会是：

```
<script type="text/javascript">if (!$.fn.dataTableExt) { document.write('<script src="http://datatables.net/download/build/jquery.dataTables.js"><\/script>')}</script> 
```

# java - ColdFusion：关于使用自定义的“自己编写的”Java 类

> ID：12304479
> 
> 赞同：7
> 
> 时间：2012-09-06T16:31:22.097
> 
> 标签：java, class, coldfusion, classpath, coldfusion-10

我需要在 cfml 页面中使用我自己的 java 类。

[文档中的这个条目](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7880.html)听起来不错，但没有解释我必须创建哪些文件。

我试图`test.cfm`在我的网站根目录下创建一个页面。然后将`TestClass.java`+`TestClass.class`放在同一路径中。但这会导致错误“找不到类”！。

你能帮我么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T16:49:32.767

> 同一路径中的 TestClass.java + TestClass.class。

您不能只是将`.class`文件放在任何地方。当 CF 服务器启动时，*它只*检查类/jar 的特定位置。这些位置称为“CF 类路径”。您编译`.class`的文件必须放在 CF 类路径中，否则将不会被检测到。

要使用自定义 java 类：

1.  创建一个源文件，即`YourTestClass.java`
2.  将源代码编译成一个类文件，即`YourTestClass.class`
3.  将编译`.class`后的文件放在 CF 类路径中的某处，例如：

    *   `WEB-INF\classes`- 对于单个`.class`文件
    *   `WEB-INF\lib`- 对于`.jar`文件（多个类）

    [注意：您也可以通过ColdFusion Administrator](http://help.adobe.com/en_US/ColdFusion/9.0/Admin/WSc3ff6d0ea77859461172e0811cbf3638e6-7ffc.html#WSc3ff6d0ea77859461172e0811cbf3638e6-7feb)将该项目添加到 CF 类路径中。但是，将类放在默认目录之一中更简单。

4.  重新启动 ColdFusion 服务器，以便它检测到新类

注意：虽然您可以使用单个`.class`文件，但将它们打包成`.jar`文件更为常见。

# jquery - 窗口调整大小时多次追加 HTML

> ID：12304483
> 
> 赞同：1
> 
> 时间：2012-09-06T16:31:34.820
> 
> 标签：jquery, append, media-queries, multiple-instances, window-resize

我想从变量中附加一些 HTML 内容以获得较小的屏幕尺寸。但是，当我调整浏览器的大小时，内容会附加（应该如此），但是如果我继续移动窗口，它会继续附加 HTML 的多个副本。

我怎么能阻止它这样做呢？

这就是我正在做的：

```
function adjustStyle(width) {
      width = parseInt(width);
        if (width < 700) {
            $('ul.nav li.top ul.submenu').removeAttr("style");
            $('body').append(str);  // this is when I am having the problem appending

        } else if (width >= 700) {
            $('ul.nav').removeAttr("style");
            $('.form-wrapper').removeAttr("style");
            var toggle = function(direction, display) {
            return function() {
              var self = this;
              var ul = $('ul.submenu', this);
              if( ul.css('display') === display && !self['block' + direction] ) {
                self['block' + direction] = true;
                ul['slide' + direction]('fast', function() {
                  self['block' + direction] = false;
                });
              }
            };
          };
          $('ul.nav li.top').hover(toggle('Down', 'none'), toggle('Up', 'block'));
          $('ul.nav li.top ul.submenu').hide();
          $('#gallery').remove();
        } else {

        }
    }
$(function() {
    adjustStyle($(this).width());
    $(window).resize(function() {
        adjustStyle($(this).width());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:34:19.877

您需要对resize 事件进行[去抖动](http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/)，使其**仅在 resize 完成时**触发。

这是必需的，因为 -

> *   在 IE、Safari 和 Chrome 中，只要用户继续调整窗口大小，就会触发许多调整大小事件。
> *   Opera 使用尽可能多的调整大小事件，但在调整大小结束时将它们全部触发。
> *   虽然，Firefox 在调整大小结束时会触发一个调整大小事件。

以下是我对[这个问题](https://stackoverflow.com/questions/12119107/prevent-javascript-function-from-firing-multiple-times/12119274#12119274)的回答的片段。

```
var resizeTimer = null;    

$(window).resize(function(){

   clearTimeout(resizeTimer); //ignore previous trigger

   resizeTimer= setTimeout(function(){ //wait to execute handler again
     //execute actual handler here
   }, 10);
}); 
```

* * *

除此之外，我建议你有一个占位符来添加你的内容 -

```
$('body #appendTarget').html(str); //Since .append() will anyways append multiple times 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:34:46.393

在您的 adjustStyle 函数中，您可以删除事件处理程序，`$(window).off('resize')`或者只使用一个默认为 true 但在第一次运行时设置为 false 的布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:35:25.323

您正在做的是将值附加到页面，或者只是将它们添加到那里。听起来你想做的只是替换值。使用 .html() 函数代替 .append()。

# iphone - html页面中的iphone访问指南针

> ID：12304484
> 
> 赞同：0
> 
> 时间：2012-09-06T16:31:39.410
> 
> 标签：iphone, compass-geolocation

我想在网页（不是应用程序）中获取 iPhone 指向的方向（N/S/E/W）。理想情况下，它将在 javascript 中获得。

这可能是不可能的，但我想确定一下。你知道一种方法来得到这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:17:42.673

对此有一个 HTML5 草案规范，但鉴于该规范是今年才编写的，它是否在 Mobile Safari 或 Webkit 中处于活跃状态值得怀疑。 [http://dev.w3.org/geo/api/spec-source-orientation](http://dev.w3.org/geo/api/spec-source-orientation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:52:57.217

实际上我在这里找到了一个演示：http: [//ariya.ofilabs.com/2011/10/magnetic-compass-via-device-orientation.html](http://ariya.ofilabs.com/2011/10/magnetic-compass-via-device-orientation.html)

它已在 iOS 5 上成功测试。

据说 iOS < 4.2 也支持它，但是 DeviceOrientation 的错误实现会使磁北无法检测到。

# ios - 核心数据：我应该在多对多关系中使用什么作为排序描述符（ios5）

> ID：12304488
> 
> 赞同：13
> 
> 时间：2012-09-06T16:32:03.683
> 
> 标签：ios, core-data, nspredicate

![在此处输入图像描述](../Images/cf9d44a6a77cc6dbe91a969351fc4455.png)- 我有一个`Item`实体和一个`Tag`实体。- 项目可以有多个标签，标签可以链接到多个项目（多对多关系）。- 关系是“有序关系”（在IOS5中使用有序关系）两种方式。

我想获取给定项目的所有子标签

我使用以下获取请求：

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"Item"];

// Fetch all items that have a given tag
Tag* myTag = ....;
request.predicate = [NSPredicate predicateWithFormat:@"ANY tag == %@", myTag];

// This is my attempt to get the correct sort ordering (it crashes)
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"tag"
                                                                 ascending:YES];
request.sortDescriptors = @[sortDescriptor]; 
```

上面的排序描述符返回数据（我假设它是按某种顺序）但随后崩溃：

```
[_NSFaultingMutableOrderedSet compare:]: unrecognized selector sent to instance 0x10b058f0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[_NSFaultingMutableOrderedSet compare:]: unrecognised selector sent to instance 0x10b058f0' 
```

如果我给出一个空的排序描述符数组，那么我不会崩溃，但结果不是有序的。

如何使用 ios5 中的有序关系功能在多对多关系中正确实现排序描述符？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T16:27:44.687

我认为您可能误解了 Core Data 中有序关系的含义。根据[这个问题](https://stackoverflow.com/questions/7346073/what-does-the-ordered-flag-do-in-a-to-many-relationship)，“有序”并不意味着“关于某些属性” - 相反，“有序”意味着“保留用户的订单”（或其他看似任意的特定订单）。一些例子：

*   有序关系对于配方中的步骤（来自 Apple 的[核心数据发布说明](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html#//apple_ref/doc/uid/TP40010637-CH1-DontLinkElementID_2)的示例）是有益的 - 这些步骤不一定针对它们的任何属性（例如它们的文本）进行排序，并且必须维护一个 "如果 Core Data 没有进行排序，则它们自己的 index" 或 "order" 属性。
*   有序关系*不适*用于名称列表 - 例如，用户可以选择按名字或姓氏排序，而名称集合在内部没有真正的内在排序。唯一重要的是显示顺序 - 数据本身不需要维护该顺序。（Apple 文档中的经验法则是，如果用户可以在排序说明符之间进行选择，则*不应*在 Core Data 中对关系进行排序。）

在您的情况下，您尝试将排序描述符应用于您正在获取的一*组有序集*（`tags`属性的值）。这是您崩溃的原因- NSOrderedSet 子类（`_NSFaultingMutableOrderedSet`在您的情况下）没有实现`-compare:`排序描述符用于对它们进行排序的方法，因此您会遇到该异常。

我认为对您来说一个好的解决方案是*根本不使用*排序描述符。相反，如果您想更改保留的顺序以显示给用户，请获取`tags`某个项目的 NSOrderedSet 值，然后使用您自己的排序从中获取一个数组[`-sortedArrayUsingComparator:`](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009980-CH2-SW5)。这将使数据在 Core Data 中保持正确的顺序，但让您以编程方式自行重新排序。

在更高的层次上，你可能还想考虑你是否真的需要在你的关系中保持秩序。它会导致显着的性能损失，您真正得到的只是将标签添加到项目的原始顺序（反之亦然）。如果您打算在每次显示标签时更改该顺序，那么您会在没有真正的好处的情况下对性能造成影响 - 使您的关系无序，然后以编程方式继续排序或使用聚合键上的排序描述符，例如`tags.@count`，正如评论中所建议的那样。

# javascript - WebView 返回错误的 window.innerHeight

> ID：12304489
> 
> 赞同：11
> 
> 时间：2012-09-06T16:32:16.870
> 
> 标签：javascript, android, android-webview

我有一个使用 Android WebView 以及一些 JavaScript 的应用程序。当我的 WebViewClient 调用`onPageFinished()`时，我提醒我的 JavaScript 运行一个初始化方法。我的 JavaScript 在点击`onPageFinished()`.

在那个 JavaScript 方法中，我使用了`window.innerWidth`. 但是，它返回的值总是错误的并且总是相同的。无论我的方向如何，它都会报告内部宽度为 320，内部高度为 240。（纵向和横向的正确宽度值分别为 360 和 598。）在我访问的其他任何地方`window.innerWidth`或`window.innerHeight`在 JavaScript 中，它都会给我一个准确的数字。

更令人费解的是，如果我在`onPageFinished()`调用中直接检查 WebView 的高度或宽度，使用

`int height = view.getHeight();`

`int width = view.getWidth();`

然后它总是正确返回（尽管它返回确切的像素数，而不是 DIP）。这让我觉得一切都已经完成了 WebView 的加载，所以我的 JavaScript 不应该有任何问题。

关于发生了什么的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T05:19:28.707

这是因为 Javascript 在 WebView 的 View 相关初始化之前执行。并且 Android WebView 返回一个 320x240 的默认值给 JS。一段时间后执行你的JS就可以了，像这样

```
function go() {
int height = view.getHeight();
int width = view.getWidth();
};
window.setTimeout(go, 300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T13:04:48.827

最后，我使用了`webView.getHeight()`和中的值`webView.getWidth()`，根据屏幕密度调整了它们，并将它们作为参数传递到 javascript 方法中`webView.loadUrl()`。这是我可以确定我得到正确值的唯一方法。

执行上面评论中建议的操作，检查 320 的宽度和 240 的高度会很好......直到您在具有这些精确尺寸的设备上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T18:20:05.557

我用这个：

**中的Java**代码`Activity`：

```
webView.addJavascriptInterface(new WebAppInterface(this), "Android"); 
```

...

```
public class WebAppInterface {
    Context mContext;

    WebAppInterface(Context c) {
        mContext = c;
    }

    public int getWinHeight() {
      return webView.getHeight();
    }
} 
```

**JS**代码：

```
var winHeight = Android.getWinHeight(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T08:04:12.543

经过一番阅读，出现了另一种解决方案。在java代码中，我们可以使用

```
new Handler().post(new Runnable(){ 
    @Override 
    public void run(){
        webview.loadUrl("...")
    }
}); 
```

将其添加到QueueMessage，并延迟js执行，它可以工作。

# doxygen - 条件化 html 输出的文本

> ID：12304491
> 
> 赞同：1
> 
> 时间：2012-09-06T16:32:42.797
> 
> 标签：doxygen

什么是条件化文本（不是代码）的最佳方法。我希望对 3 个级别的文档进行条件化并标记为： **开发人员**- 这将是我根本不希望 doxygen 输出的文档。比如给开发者的注释。 **内部**– 仅对文档的内部版本可见的信息。 **NDA** - 客户信息以及未标记为开发人员或内部的任何信息；内部文档的一个子集，例如会过滤掉内部网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:54:39.560

有许多 doxygen 命令和配置选项可以帮助您实现这一目标。这些包括[`\internal`](http://www.doxygen.nl/manual/commands.html#cmdinternal)和`\endinternal`。来自 doxygen 手册：

> `\internal`此命令启动仅供内部使用的文档片段。
> 
> 您可以`INTERNAL_DOCS`在配置文件中使用来显示 ( `YES`) 或隐藏 ( `NO`) 内部文档。

要解决您想要的三个版本的文档：

*   **开发人员**：使用标准 C/C++ 注释，`/* ... */`. 这些不会被 doxygen 触及。

*   **Internal**：对于仅供内部使用的文档，使用 doxygen 注释， ，并使用and命令`/** ... */`包装文档的这些部分。在内部分发文档时，将配置文件选项设置为构建文档时。`\internal``\endinternal``INTERNAL_DOCS``YES`

*   **NDA**：对于客户可见的文档，只需在构建文档时使用 doxygen 注释并在配置文件中设置`/** ... */`配置选项。`INTERNAL_DOCS``NO`

# .net - 从 Windows 命令行运行 MSTests

> ID：12304494
> 
> 赞同：13
> 
> 时间：2012-09-06T16:32:49.923
> 
> 标签：.net, visual-studio-2010, visual-studio, unit-testing, mstest

我有 5 个使用 MSTest 的解决方案，我想在根文件夹中有一个 cmd 文件来运行所有测试

所以我想从命令行调用 MsTests 运行器

```
\Solution1\Tests\Debug\Test.dll
...
\Solution5\Tests\Debug\Test.dll 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T16:43:02.290

这在 MSDN 上有详细说明：[如何：使用 MSTest 从命令行运行自动化测试](http://msdn.microsoft.com/en-us/library/ms182487%28v=vs.110%29.aspx)

基本上，你可以这样做：

```
MSTest /testcontainer:\Solution1\Tests\Debug\Test.dll 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-24T12:57:21.357

如果使用 .Net Core：

```
dotnet test ./nameoftest.dll 
```

在测试所在的文件夹中。

有关命令行选项，请参阅： [https ://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T05:47:47.820

我从这个线程得到了答案：[https ://gist.github.com/leniel/2438148](https://gist.github.com/leniel/2438148)

只需运行以下命令即可使用以下命令运行测试用例`MSTest /testcontainer`

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\TestAgent\Common7\IDE>MSTest /testcontainer:"C:\project-name\projectTestSolutionFolder\bin\Release\ProjectTest.dll" 
```

# java - 解决 Eclipse 中 sql server 2008 r2 与 java 之间的连接错误

> ID：12304495
> 
> 赞同：1
> 
> 时间：2012-09-06T16:32:51.747
> 
> 标签：java, sql-server-2008, jdbc

我正在尝试使用 Eclipse IDE 中的 microsoft JDBC sqljdbc_4.0 驱动程序将 SQL Server 2008 r2 与我的 java 应用程序连接起来，我多次使用 java 和 sql server 2008 之间的 JDBC 连接，我已经尝试了一些但得到相同的错误消息，所以最后我决定把问题放在这里，错误信息是什么，我可以知道我在做什么错？

我跟着[一个链接](http://thusithamabotuwana.wordpress.com/2012/07/19/connecting-to-sql-server-from-java/)！用于连接 SQL Server 和 Java 的链接。

我的java程序：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Connect
{
    public static void main(String[] args) throws Exception
    {
        String userName = "Abhishek";
        String password = "abhishek-nayak";
        String url = "jdbc:sqlserver://Abhishek-VAIO\\MSSQLSERVER;databaseName=master;integratedSecurity=true";
        try
        {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Connection conn = DriverManager.getConnection(url,userName,password);
            System.out.println("Connected");
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }
} 
```

我的错误信息是：

```
Sep 06, 2012 9:09:55 PM com.microsoft.sqlserver.jdbc.AuthenticationJNI <clinit>
WARNING: Failed to load the sqljdbc_auth.dll cause : no sqljdbc_auth in java.library.path
com.microsoft.sqlserver.jdbc.SQLServerException: This driver is not configured for integrated authentication. ClientConnectionId:5cb4d70b-f644-4670-b7bc-a2312b8547b4
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1667)
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.<init>(AuthenticationJNI.java:60)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:2229)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:2220)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1326)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at com.abhishek.Connect.main(Connect.java:17)
Caused by: java.lang.UnsatisfiedLinkError: no sqljdbc_auth in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.microsoft.sqlserver.jdbc.AuthenticationJNI.<clinit>(AuthenticationJNI.java:35)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:00:24.000

您正在使用依赖于本机 SQL Server 驱动程序的 JDBC 驱动程序，并且需要将它所依赖的 DLL (sqljdbc_auth.dll) 的路径添加到 java 中的库路径。

要将其添加到 Eclipse 项目的设置中（假设您已经安装了 SQL Server 驱动程序），请执行以下操作：

在 Project Explorer -> Properties -> Java Build Path -> select 中右键单击项目`sqljdbc4.jar`，因此它展开 -> 选择 Native library location -> Edit... -> enter `<location of SQL server driver on your machine>/sqljdbc_2.0/enu/auth/x64`-> OK。

结果应如下所示：

![Eclipse 中的本机库路径位置](../Images/57545715bad92f56d89d6e68581d42c3.png)

# html - 将子 ID 动态添加到 iframe 代码

> ID：12304500
> 
> 赞同：0
> 
> 时间：2012-09-06T16:33:02.733
> 
> 标签：html, iframe, google-ads-api

在加载页面或 iframe 之前，我如何从目标 url 获取子 ID 并动态插入到 iframe 代码中？

这是我在目标网址末尾的代码

```
&subid=campaignname_{keyword} 
```

这是我希望 subid 在加载之前动态插入的 iframe 代码

```
<iframe border="0" frameborder="0" width="680" height="800" src="http://xxxxxxx.com?PublisherSubID=</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:51:19.173

尝试这个。

像这样形成你的 URL:: (`#`里面有)

```
http://example.com/page.html?#subid=subid_{keyword} 
```

然后使用这个 jscript ::

```
$(document).ready(function() {
    var tags = ["subid"];
    for (var i = 0; i < tags.length; ++i) {
        var param = GetURLParameter(tags[i]);
        if (param) {
            var subid = GetURLParameter('subid');
        }
    }

if(typeof(subid) != 'undefined' && dynimage != null && dynimage != '') {
    document.getElementById('subid-iframe').innerHTML = '<iframe border="0" frameborder="0" width="680" height="800" src="http://xxxxxxx.com?PublisherSubID=' + subid + '</iframe>"';
    }
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    } 
```

并使用带有 .... 的 innerHTML 将您的“subid”值插入 iframe 标记中，如下所示：

```
<span id="subid-iframe"></span> 
```

这可能需要一些调整......它对我有用。我知道你想做什么。

# jquery - 拖动的项目不会停留在其新位置

> ID：12304506
> 
> 赞同：0
> 
> 时间：2012-09-06T16:33:31.190
> 
> 标签：jquery, jquery-ui

我正在使用此代码来动态添加新项目

```
 <!Doctype html>
    <head>
    <meta charset="utf-8">
    <style type="text/css">
    .tr_deco{
    background-color:pink;
    border:1px solid red;
    }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script type="text/javascript">
    jQuery(function() {
    jQuery(".new_krud_slider").click(function(e){
    e.preventDefault();
    jQuery('.krud_dom').append("<form name='krud_submit' action='admin.php?page=exchange_page' method='post'><table class='sortable'><tr class='tr_deco'><td>Slider Title</td><td><input type='text' /></td><td>Slider Description</td><td><textarea></textarea></td><td>Slider Location</td><td><input type='text' name='x' value='Jenna Doe'/></td><td><a href=''>I</a></td></tr><tr class='tr_deco'><td></td><td></td><td></td><td></td><td></td><td><button>Save</button></td><td><button>Delete</button></td></tr></table></form>");
jQuery( ".sortable" ).sortable();
    });
    });
    </script>
    </head>
    <body>
    <a class="new_krud_slider" href="">make new</a>
    <table>
    <tr><td class="krud_dom"></td></tr>
</table>
    </body>
    </html> 
```

​这里是小提琴[http://jsfiddle.net/TRJXe/](http://jsfiddle.net/TRJXe/) 我需要拖动的项目留在它被丢弃的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:38:39.367

您正在使用`sortable`jQuery 小部件。您需要使用`draggable`小部件

```
jQuery( ".sortable" ).draggable(); 
```

这将使项目停留在被拖动的位置。使用`sortable`可以让你拖动项目，是的，但是当你放手时，项目会自动分类到它的新位置。由于您只有一项，因此它始终会排在最前面；这就是为什么在你放开它后它会跳回到同一个位置。

**更新**

在澄清问题的性质之后，问题的根源是您正在调用`.sortable`每个单独的表格。要正确使用`sortable`jQuery UI 小部件，您需要调用**包含**要排序的所有元素的元素`.sortable()`。在这种情况下，那将是**`.krud_dom`**

 **因此，您需要首先调用`.sortable`on `.krud_dom`，如下所示：

```
jQuery( ".krud_dom" ).sortable(); 
```

然后，每次向页面添加新表单时，都需要“刷新”小部件，并再次调用`.sortable`：

```
jQuery( ".krud_dom" ).sortable("refresh"); 
```

我创建了一个 jsFiddle 演示，展示了它是如何工作的：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/3fuKp/2/)**

# asp.net - ASP.Net 下拉列表不会引发错误

> ID：12304507
> 
> 赞同：3
> 
> 时间：2012-09-06T16:33:44.447
> 
> 标签：asp.net

我在下拉列表中遇到问题，在 ASP.Net 4.0 中使用以下代码未引发错误

下拉列表为空开始。有问题的页面是一个简单的测试页面，除了 Page_Load 中的以下行之外不包含任何代码。

```
ddlTest.Items.Add(new ListItem("test","test"));
ddlTest.SelectedValue = "Fail"; 
```

当我加载页面时，DDL 将“test”显示为唯一的项目（如预期的那样）并且不会引发错误。我认为会引发错误，例如“项目'失败'不存在”

我已经在 if (!IsPostBack) 块内部和外部测试了代码。结果是一样的。

这有意义吗？我不明白为什么这不会引发错误。任何解释将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:45:13.490

如果 ddlTest 中没有项目，它只会抛出异常，否则它只是找不到值。

如果您试图找出该项目是否存在于列表中，您始终可以先执行此操作：

```
if (ddlTest.Items.FindByValue("Fail") != null)
  ddlTest.SelectedValue = "Fail";
else
  //item doesn't exist, do something meaningful here 
```

# openid - 使用 DotNetOpenAuth 创建 OpenID 提供程序

> ID：12304512
> 
> 赞同：1
> 
> 时间：2012-09-06T16:33:57.880
> 
> 标签：openid, dotnetopenauth

我正在尝试使用 DotNetOpenAuth 实现 OpenID 提供程序。我提供了一个 OpenID url，消费者发现了我的端点。

我登录到我的提供者，提供者将声明的标识符和本地标识符返回给消费者。

但消费者响应有以下例外：

```
The OpenID Provider issued an assertion for an Identifier whose discovery information did not match. 
Assertion endpoint info: 
  ClaimedIdentifier: http://localhost/OpenIDUser.aspx/myuser
  ProviderLocalIdentifier: http://localhost/OpenIDUser.aspx/myuser 
  ProviderEndpoint: http://localhost/OpenIDAuth.aspx
  OpenID version: 2.0 
  Service Type URIs: 
Discovered endpoint info: [] 
```

`http://localhost/OpenIDAuth.aspx`是我的终点。 `http://localhost/OpenIDUser.aspx/myuser`是我的用户标识符 url，我可以成功浏览到它。它在标头中有一个指向端点的链接，如下所示： `<link rel="openid.server" href="http://localhost/OpenIDAuth.aspx"></link>`

无论我尝试什么，异常的“发现的端点信息：[]”部分始终是一个空数组。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:38:47.697

令人费解的是，您已经走到了这一步，因为要看到此错误，RP 必须能够在重定向到 Provider 之前成功完成发现阶段（在这种情况下它为什么会第二次失败），或者这是一个不请自来的断言（这很好，但不寻常）。

但我看到的一个缺陷是你的标签：

```
<link rel="openid.server" href="http://localhost/OpenIDAuth.aspx"></link> 
```

是 OpenID 1.1 的广告，而您的 Provider 声明的是 OpenID 2.0。IIRC，正确的标签是：

```
<link rel="openid2.provider" href="http://localhost/OpenIDAuth.aspx"></link> 
```

提示：当您开发 Provider 并使用 DotNetOpenAuth RP 对其进行测试时，请务必将 RP（也可能是 OP）设置为不在 web.config 中缓存发现结果，以便您知道成功和您当前的代码实际上是当前的故障：

```
<dotNetOpenAuth>
    <openid cacheDiscovery="false"> 
```

[您可以在 docs](http://www.dotnetopenauth.net/developers/help/configuration-options/)中看到更多配置选项，以及上述 xml 出现的上下文。

# node.js - 带有 IISNode 进程的 node.exe 进程停止运行

> ID：12304513
> 
> 赞同：2
> 
> 时间：2012-09-06T16:34:01.767
> 
> 标签：node.js, iisnode

我正在使用 iisnode 运行我的 node.js 应用程序。但是，大约一个小时后，node.exe 进程停止运行（我需要它运行，因为我有一个 setInterval() 方法，每隔几秒从数据库中提取数据）。有什么建议吗？

另外，如果我使用 process.env.PORT 设置服务器，如何在客户端使用 socket.io 连接到它？我明白我必须使用

```
io.configure(function () { 
    io.set("transports", ["xhr-polling"]); // no websockets
    io.set("polling duration", 10); 
    io.set("log level", 1); // no debug msg
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:51:04.403

当应用程序使用 iisnode 托管在 IIS 中时，这是 socket.io 的正确配置。在客户端，您使用 IIS 公开的端点的常规 HTTP 地址连接到服务器。请注意，为了让 socket.io 开箱即用，您需要将 node.js 应用程序托管为 IIS 网站，而不是网站中的虚拟目录：您的应用程序应该可以使用[http://foobar 进行寻址。 com/](http://foobar.com/)而不是[http://foobar.com/myapp/](http://foobar.com/myapp/)。

当您说 node.exe 进程停止运行时，您的意思是它已终止并消失或挂起吗？IIS 将在一段时间不活动后（当没有以该服务器为目标的 HTTP 请求到达时）终止工作进程（包括它们产生的任何子进程，在本例中为 node.exe）。该时间段的持续时间可在应用程序池设置中配置。

如果您依赖于应用程序中的逻辑，需要定期运行代码，则 IIS 本身不提供最佳托管模型，因为进程生命周期与 HTTP 消息传递密切相关。你真的需要一个持久的服务器（例如 Windows 服务，查看[http://nssm.cc/](http://nssm.cc/)），或者某种形式的 web cron。

# asp.net-mvc-3 - HTTP 400 上的自定义错误页面错误在 Azure ASP.Net MVC 上不起作用

> ID：12304516
> 
> 赞同：3
> 
> 时间：2012-09-06T16:34:24.617
> 
> 标签：asp.net-mvc-3, azure

我正在尝试在 Azure 上为所有 HTTP 错误创建一个自定义错误页面。

在我的开发机器上一切正常，在 Windows Azure 上它适用于 HTTP404，但我仍然有一个适用于 HTTP400 的 YSOD。

这是我的 web.config 中的内容

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <httpErrors errorMode="Custom" existingResponse="PassThrough">
        <clear />
        <error statusCode="400" path="~/Error" responseMode="ExecuteURL" />
        <error statusCode="401" path="~/Error" responseMode="ExecuteURL" />
        <error statusCode="403" path="~/Error" responseMode="ExecuteURL" />
        <error statusCode="404" path="~/Error" responseMode="ExecuteURL" />
        <error statusCode="500" path="~/Error" responseMode="ExecuteURL" />
    </httpErrors>
</system.webServer>

<system.web>
    <customErrors mode="On" defaultRedirect="~/Error" />
    .....
</system.web> 
```

知道在哪里可以解决这个问题吗？

提前致谢

# c# - Growl for windows，自定义订阅者 - 如何在代码中设置通知属性？例如声音

> ID：12304519
> 
> 赞同：0
> 
> 时间：2012-09-06T16:34:48.207
> 
> 标签：c#, binary-data, growl-for-windows

尝试在 Growl for Windows 中为应用程序通知设置某些属性。（属性为：持续时间、粘性、优先级和声音）...

因此，例如，我正在创建一个新应用程序，为其命名等。

```
Application application = new Application(this.AppName)
{
   Icon = FeedSubscriptionHandler.Icon,

}; 
```

然后我创建一个新的通知类型并尝试添加一个 custombinary 属性（用于声音）。

```
NotificationType ntNewFeedItem; 

ntNewFeedItem.CustomBinaryAttributes.Add("Sound", new BinaryData(bytes)); 
```

咆哮应用程序似乎没有使用字节数组获取 custombinaryattribute。

当编译我的订阅项目并将 feedmonitor dll 移动到 growl appdata 订阅者文件夹中时，growl 在运行时崩溃并显示以下事件查看器消息：

> 已添加具有相同密钥的项目。
> 
> 在 System.ThrowHelper.ThrowArgumentException(ExceptionResource 资源) 在 System.Collections.Generic.Dictionary `2.Insert(TKey key, TValue value, Boolean add) at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
> 在 GrowlExtras.Subscriptions.FeedMonitor.FeedSubscription.Subscribe() 在 Growl.SubscriptionManager.Update(订阅订阅， Boolean enabled) at Growl.Controller.AddSubscription(Subscription subscription) at Growl.AddComputer.buttonSave_Click(Object sender, EventArgs e)

所以，在玩了一些之后，咆哮似乎不喜欢重新添加“已经存在的”“声音”键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:31:18.557

在此处的 Growl for Windows 组中回答了您的问题：[http ://groups.google.com/group/growl-for-windows/browse_thread/thread/4d633f531c9451e3?hl=en](http://groups.google.com/group/growl-for-windows/browse_thread/thread/4d633f531c9451e3?hl=en)

# vim - 有没有办法从vim一次打开多个文件？

> ID：12304520
> 
> 赞同：43
> 
> 时间：2012-09-06T16:34:51.840
> 
> 标签：vim

从命令行启动 vim 时，例如，我可以`vim *.txt`一次打开目录中的所有文本文件。

出于某种原因，从 vim ( `:e *.txt`) 内部尝试相同的操作会出现错误：`E77: Too many file names`.

vim 拒绝一次打开多个是否有原因？有没有办法改变它？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-06T16:40:52.647

这应该工作：

```
:next *.txt 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-06T16:43:16.607

它通过两个操作完成。

`*.js`以尽可能多的垂直拆分打开所有文件：

```
:argadd *.js
:argdo vs 
```

在水平拆分中：

```
:argdo sp 
```

在标签中： 

```
:argdo tabe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-23T18:06:55.087

`:args *.txt`也有效。

`:help argument-list` 如果有帮助，在和上有更多关于这个主题的信息`:help 07.2`。这两个部分都有助于解释如何使用参数列表以及缓冲区列表如何不同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-25T23:54:15.973

此外，要添加到其他答案，当您第一次启动 vim 时，您可以同时打开多个文件，例如：

```
vim *.txt 
```

# android - 安卓谷歌地图API密钥

> ID：12304523
> 
> 赞同：0
> 
> 时间：2012-09-06T16:35:00.447
> 
> 标签：android, google-maps

有没有办法确定我是否生成了正确的 API 密钥？

从同一个 debug.keystore 我设法毫无问题地获得 Facebook HASH 密钥，但由于某种原因，在生成 MD5 指纹并从 Google 生成 API 密钥后，我的地图仍然是空白的。这意味着我只能在其中看到网格没有地图。。

我的互联网连接已打开，并且我的 LogCat 中没有错误。我可以进行某种调试以检查我的 API 密钥是否正确？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="my_generated_key"/> 
```

更新：运行新的测试应用程序时，它与我的 api 密钥配合得很好。当我试图将地图嵌入到我的应用程序中（在选项卡主机内）时，我只得到网格视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:24:08.303

您应该像这样添加您的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
          android:id="@+id/mapView"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:enabled="true"
                 android:clickable="true"
                 android:apiKey="api key" />

</RelativeLayout> 
```

如果您没有布局，则无法查看地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:45:56.963

如果您的项目中有灰色背景，请确保您在清单中具有 INTERNET 权限，就在应用程序标记之前。如果您的设备上出现灰色背景，请确保您已根据您在导出应用程序时创建的 application.keystore 为您的应用程序创建了一个具有新 MD5 的新 Api 密钥。

如果您还没有这样做，请参阅此链接以获得更好的解释：[一个适用于所有开发人员的 Google 地图密钥？](https://stackoverflow.com/questions/7444392/google-maps-key/7445030#7445030)

如果您的 LogCat 很好，并且您甚至没有红色的“无法获取连接工厂客户端”，那么您的地图键就可以了。:) 但是，即使您在 LogCat 中遇到此错误，这也没有任何意义，因为它可能代表 Eclipse 中的一些错误，并且无论如何，在模拟器和真实设备上，您的地图仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:02:17.763

确保您设置了 INTERNET 权限并且您的密钥确实是 MD5。较新版本的 keytool 返回 SHA1 密钥而不是 MD5。要获取 MD5，请将 -v 添加到 keytool 选项

# php - 替换php中字符串的值？

> ID：12304527
> 
> 赞同：-3
> 
> 时间：2012-09-06T16:35:14.793
> 
> 标签：php, string, preg-replace, str-replace

我有这个字符串：

```
$string=<iframe width="425" height="350" frameborder="0" scrolling="no" 
marginheight="0" marginwidth="0" src="www.yourwebiste.com"></iframe> 
```

我想将宽度从 425 替换为 248，高度从 350 替换为 160？

我试过了

```
str_replace('"350"', '"160"', $string); 
```

但我没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:41:21.277

正如 meustrus 提到的，首先你需要在 $string 周围加上引号。

要替换值，您可以使用单个 str_replace：

```
$string='<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="www.yourwebiste.com"></iframe>';
$newString = str_replace(array('425', '350'), array('248', '160'), $string); 
```

# ios - 检查文件是否保存在文档目录中

> ID：12304534
> 
> 赞同：0
> 
> 时间：2012-09-06T16:35:58.693
> 
> 标签：ios, xcode

在我的应用程序中，当我按下一个按钮时，我会从 Internet 下载一个文件，然后阅读它。唯一的问题是加载文件大约需要五秒钟，具体取决于网络的速度，但由于文件越来越大，所需的时间也会增加。如果我保存文件并在运行代码来读取它之后，代码会运行但文件不是他们的，因为它不会等待文件加载。所以我添加了一个 6 秒的 NSTimer，它可以工作。但如果文件变大，我需要更改它。加载完成后，是否有运行代码来读取文件的代码？

谢谢您的帮助

由于我使用保管箱，我可以使用此代码（刚刚发现）：

```
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)localPath {

} 
```

但是每次下载文件时它都会运行，我想为每加载2个文件运行它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:20:55.693

```
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)localPath {
    NSLog(@"%@",localPath); //just to see the console log of what this method spits out
    NSString *documents = ***DOC_DIRECTORY_METHOD***;
    NSString *expectedFilePath = [documents stringByAppendingPathComponent:@"myDownloadedFile"];
    if ([localPath isEqualToString:expectedFilePath]) {
        //insert my read file method here
    }
} 
```

我不知道变量 localPath 将输出什么，无论是完整路径还是文件名。您可能需要对此进行调整。

祝你好运。

# android - Google Drive 将错误 400 或 403 返回到我的 Android 应用程序？

> ID：12304535
> 
> 赞同：1
> 
> 时间：2012-09-06T16:36:06.007
> 
> 标签：android, google-drive-api

这是我请求身份验证令牌的代码...

```
AccountManager am = AccountManager.get(this);
Bundle options = new Bundle();
am.getAuthToken(
    (am.getAccounts())[0], // My test device only has one account. I'll add a picker before releasing this app.
    "oauth2:" + DriveScopes.DRIVE,
    options,
    true, // I've tried both true and false... doesn't seem to change anything?
    new OnTokenAcquired(),
    null); // I used to have a handler, but it absolutely never got called. 
```

这是处理令牌的代码：

```
private class OnTokenAcquired implements AccountManagerCallback<Bundle> {
    @Override
    public void run(AccountManagerFuture<Bundle> result) {
        String token = result.getResult().getString(AccountManager.KEY_AUTHTOKEN);

        HttpTransport httpTransport = new NetHttpTransport();
        JacksonFactory jsonFactory = new JacksonFactory();

        Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setKey("xxxxxxxxxxxx.apps.googleusercontent.com"); // I replaced the number with x's. I'll explain where I got the number from below.
                driveRequest.setOauthToken(token);
            }
        });

        final Drive drive = b.build();

        final com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
        body.setTitle("My document");
        body.setDescription("A test document");
        body.setMimeType("text/plain");

        java.io.File fileContent = new java.io.File("document.txt");
        final FileContent mediaContent = new FileContent("text/plain", fileContent);

        new Thread(new Runnable() {
            public void run() {
                com.google.api.services.drive.model.File file;
                try {
                    file = drive.files().insert(body, mediaContent).execute();
                    Log.i("Hi", "File ID: " + file.getId());
                } catch (IOException e) {
                    Log.i("Hi", "The upload/insert was caught, which suggests it wasn't successful...");
                    e.printStackTrace();
                    AccountManager am = AccountManager.get(activity);
                    am.invalidateAuthToken(am.getAccounts()[0].type, null);
                    Bundle options = new Bundle();
                    am.getAuthToken(
                        (am.getAccounts())[0],
                        "oauth2:" + DriveScopes.DRIVE,
                        options,
                        true,
                        new OnTokenAcquired(),
                        null);
                    }
                }
            }).start();
        Intent launch = (Intent)result.getResult().get(AccountManager.KEY_INTENT);
        if (launch != null) {
            Log.i("Hi", "Something came back as a KEY_INTENT");
            startActivityForResult(launch, 3025);
            return;
        } else {
            Log.i("Hi", "I checked, but there was nothing for KEY_INTENT.");
        }
    }
} 
```

我已经实现了 onActivityResult 并将其设置为记录 requestCode 和 resultCode 如果它曾经被调用过，但它从来没有被调用过。如果它被调用，它只会触发另一个令牌请求，如果 requestCode 是 3025 并且 resultCode 是 RESULT_OK。

以下是我获得客户 ID 的方式：

*   我去了 Google APIs 控制台或其他任何名称。
*   我做了一个新产品。
*   我启用并设置了 Drive SDK（有点……我不是在制作网络应用程序，所以我只是将 URL 指向我拥有的网站。）
*   在“API 访问”下，我单击“创建另一个客户端 ID...”并为已安装的 Android 应用程序进行设置。（指纹可能不太对？那会导致错误吗？）
*   我复制了已安装应用程序的客户端 ID 下列出的客户端 ID（不是 Drive SDK 的客户端 ID）。

事实上，这是我从日志中得到的：

```
I checked, but there was nothing for KEY_INTENT // My log message.
The upload/insert was caught, which suggests it didn't work... // Another one of my log messages.
com.google.api.client.http.HttpResponseException: 400 Bad Request
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "keyInvalid",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

接下来是更普通的堆栈跟踪......

**编辑** 最近它停止给我400，而是开始给我403 Forbidden，仍然使用usageLimits域，原因现在是accessNotConfigured，消息是Access Not Figd。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:16:15.717

您将从 API 控制台获得的客户端 ID 传递给`driveRequest.setKey`，但是该方法用于设置 API 密钥而不是客户端 ID。这就是为什么您的应用程序没有从 API 控制台正确绑定到项目并且您的应用程序不允许使用 API 的原因。

一旦您获得了由该客户端 ID 标识的项目的有效 OAuth 令牌，您可以通过调用`driveRequest.setOauthToken(String)`.

有关 Android 上 OAuth2 的更多详细信息，请查看[http://developer.android.com/training/id-auth/authenticate.html](http://developer.android.com/training/id-auth/authenticate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:45:20.583

问题似乎是在 API 控制台中，我没有在服务下同时打开**DRIVE SDK**和**DRIVE API**。它们是分开的，一个不会自动打开另一个。

# jquery - 仅当子 Div 有类时如何编写 jQuery

> ID：12304537
> 
> 赞同：2
> 
> 时间：2012-09-06T16:36:15.427
> 
> 标签：jquery, if-statement, jquery-selectors, selector

我有一个将在 php 中生成的菜单，其中可能包含两个不同的子 div。长话短说，php 将在“li”中添加一个类名为“showBubbles”的 div，和/或另一个类名为“hideLogo”的 div。如果存在“showBubbles” div，我需要执行一个函数，如果存在“hideLogo”，则需要执行另一个函数。如何在鼠标悬停时做到这一点？结构如下所示：

```
<ul>
<li>
    <a href="#"><img src="imagePlaceholder" /></a>
    <div class="showBubbles"></div>
    <div class="hideLogo"></div>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:39:47.487

未经测试，但这应该可以解决问题。

```
$('ul').on('mouseover', 'li', function(e)
{
    if($(this).children('div').hasClass('showBubbles'))
    {
        // Execute code for showBubbles div
    }
    else
    {
        // Execute code if 'showBubbles' is not present
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:41:29.150

在悬停回调函数中，可以使用以下代码：

```
var showBubbles = $("li div.showBubbles").length;
if(showBubbles > 0){
   // first function here
}

var hideLogo = $("li div.hideLogo").length;
if(hideLogo > 0){
   // second function here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:00:22.250

尝试这个

***JS代码***

```
$('li').hover(function(){
    if($(this).find('.showBubbles')){
       showBubbles();
    }
    if($(this).find('.hideLogo')){
       hideLogo();
    }
});

function showBubbles(){
  alert('showBubbles response');
}

function hideLogo(){
  alert('hideLogo response');
} 
```

**[JS 小提琴代码](http://jsfiddle.net/AExLu/16/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:49:54.287

```
$('ul').on('mouseover', 'li', function() {

   $(this).find('div.showBubbles').length && showBubbles(); //calls showBubbles()

   $(this).find('div.hideLogo').length && hideLogo(); //calls hideLogo()

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T16:40:44.750

您可以通过尝试使用 jQuery 选择它来检查是否具有某个类的 div，然后检查`length`返回的 jQuery 对象的。例如，对于`showBubbles`：

```
var showBubblesExists = $('li .showBubbles').length > 0; 
```

我相信这应该为您指出正确的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T16:41:01.870

尝试如下，

```
var sb = 0, hb = 0;
$('li').hover(function () {
   sb = $('.showBubbles', this).length;
   hb = $('.hideLogo', this).length;

   if (sb) {  /*function for sb*/ }
   if (hb) { /*function for hb*/ }

}, function () {

   if (sb) {
     //function for sb 
     sb = 0;
   }
   if (hb) { 
     //function for hb 
     hb = 0;
   }
}); 
```

# c# - Scrollviewer 包含用于触摸屏的按钮

> ID：12304549
> 
> 赞同：0
> 
> 时间：2012-09-06T16:37:12.070
> 
> 标签：c#, .net, wpf, touchscreen

我的目标是构建一个 ScrollViewer 类型的控件，其中包含一组按钮。使用此滚动查看器控件的应用程序将安装在触摸屏终端上。终端很可能会运行 Windows XP。

当按钮数量超过可视区域时，我希望用户能够使用手指水平滚动按钮。请注意，我不想显示任何滚动条。

我了解到“PanningMode”属性不能与 windows xp 一起使用，但只能用于触摸屏终端支持“Windows Touch”的 windows 7。

使用 WPF，我构建了一个屏幕，其中包含一个 scrollViewer 控件，该控件又具有一组按钮。我确实设法通过覆盖 windows previewMouseDown、previewMouseMove 事件来创建平移效果，但这会产生一个问题，即操作系统不知道用户是否按下滚动查看器以选择按钮或触摸滚动查看器以进行滚动。基本上，覆盖方法将始终获胜，并且按下左键将是正确的。

所以我需要一种能够滚动但仍然能够在滚动查看器中单击（触摸）按钮的方法。

我将在下面附上我的示例代码。

如果有可能的方法来做到这一点，我会很高兴听到它:) 或者！！即使有这样的控件可供购买，我也会对此感兴趣。

非常感谢！

XAML：

```
 <Grid x:Name="LayoutSelector" Grid.Column="0" Grid.Row="1"  DataContext="{Binding Main, Source={StaticResource MainVM}}" Height="100" >
                        <ScrollViewer x:Name="ScrollViewer" Width="Auto" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" PanningMode="HorizontalOnly" >
                            <!--<ItemsControl ItemsSource="{Binding SelectedLayout}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel HorizontalAlignment="Left" Height="100" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>-->
                            <StackPanel CanHorizontallyScroll="True" Orientation="Horizontal">
                                <Button x:Name="Test1" Content="Button1" Width="150"/>
                                <Button x:Name="Test2" Content="Button1" Width="150"/>
                                <Button x:Name="Test3" Content="Button1" Width="150"/>
                                <Button x:Name="Test4" Content="Button1" Width="150"/>
                                <Button x:Name="Test5" Content="Button1" Width="150"/>
                                <Button x:Name="Test6" Content="Button1" Width="150"/>
                                <Button x:Name="Test7" Content="Button1" Width="150"/>
                                <Button x:Name="Test8" Content="Button1" Width="150"/>
                                <Button x:Name="Test9" Content="Button1" Width="150"/>
                                <Button x:Name="Test10" Content="Button1" Width="150"/>
                                <Button x:Name="Test11" Content="Button1" Width="150"/>
                                <Button x:Name="Test12" Content="Button1" Width="150"/>
                            </StackPanel>

                        </ScrollViewer>
                    </Grid> 
```

C＃：

```
using System;
using System.Globalization;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media.Effects;
using ViewModels;

namespace Views
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private Point scrollStartPoint;
    private Point scrollStartOffset;

    public MainWindow()
    {
        InitializeComponent();
        Closing += (s, e) => ViewModelCreator.Cleanup();
    }

    protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
    {
        if (ScrollViewer.IsMouseOver)
        {
            // Save starting point, used later when determining 
            //how much to scroll.
            scrollStartPoint = e.GetPosition(this);
            scrollStartOffset.X = ScrollViewer.HorizontalOffset;
            scrollStartOffset.Y = ScrollViewer.VerticalOffset;

            // Update the cursor if can scroll or not.
            this.Cursor = (ScrollViewer.ExtentWidth >
               ScrollViewer.ViewportWidth) ||
                (ScrollViewer.ExtentHeight >
                ScrollViewer.ViewportHeight) ?
               Cursors.ScrollAll : Cursors.Arrow;

            this.CaptureMouse();
        }

        base.OnPreviewMouseDown(e);
    }

    protected override void OnPreviewMouseMove(MouseEventArgs e)
    {
            //if (this.IsMouseCaptured)
            //{
                // Get the new scroll position.
                Point point = e.GetPosition(this);

                // Determine the new amount to scroll.
                Point delta = new Point(
                    (point.X > this.scrollStartPoint.X) ?
                        -(point.X - this.scrollStartPoint.X) :
                        (this.scrollStartPoint.X - point.X),

                    (point.Y > this.scrollStartPoint.Y) ?
                        -(point.Y - this.scrollStartPoint.Y) :
                        (this.scrollStartPoint.Y - point.Y));

                // Scroll to the new position.
                ScrollViewer.ScrollToHorizontalOffset(
                    this.scrollStartOffset.X + delta.X);
                ScrollViewer.ScrollToVerticalOffset(
                    this.scrollStartOffset.Y + delta.Y);
            //}

        base.OnPreviewMouseMove(e);
    }

    protected override void OnPreviewMouseUp(MouseButtonEventArgs e)
    {
        if (this.IsMouseCaptured)
        {
            this.Cursor = System.Windows.Input.Cursors.Arrow;
            this.ReleaseMouseCapture();
        }

        base.OnPreviewMouseUp(e);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:01:18.693

好的，所以经过更多小时的摆弄和反复试验，我发现我想要保持功能性的点击事件是不可能的，因为执行了 mouseCapture 事件并按住鼠标防止任何进一步的动作发生，除了当我左键单击时释放鼠标的“PreviewMouseUp”事件。

所以我所做的是在进入或悬停在滚动查看器上时捕获鼠标位置，然后覆盖窗口的“OnPreviewMouseMove”方法以获取新位置。重要的是在“MouseEnter”事件中（未覆盖）我没有捕获鼠标，因此仍然允许鼠标单击滚动查看器中包含的按钮！

代码如下图！

C＃

```
using System;
using System.Globalization;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media.Effects;
using ViewModels;

namespace Views
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private Point scrollStartPoint;
    private Point scrollStartOffset;

    public MainWindow()
    {
        InitializeComponent();
        Closing += (s, e) => ViewModelCreator.Cleanup();
    }

    //protected void OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
    //{
    //    if (ScrollViewer.IsMouseOver)
    //    {
    //        // Save starting point, used later when determining 
    //        //how much to scroll.
    //        scrollStartPoint = e.GetPosition(this);
    //        scrollStartOffset.X = ScrollViewer.HorizontalOffset;
    //        scrollStartOffset.Y = ScrollViewer.VerticalOffset;

    //        // Update the cursor if can scroll or not.
    //        this.Cursor = (ScrollViewer.ExtentWidth >
    //           ScrollViewer.ViewportWidth) ||
    //            (ScrollViewer.ExtentHeight >
    //            ScrollViewer.ViewportHeight) ?
    //           Cursors.ScrollAll : Cursors.Arrow;

    //        this.CaptureMouse();
    //    }

    //    base.OnPreviewMouseDown(e);
    //}

    protected override void OnPreviewMouseMove(MouseEventArgs e)
    {
        if (ScrollViewer.IsMouseOver)
        {
            // Get the new scroll position.
            Point point = e.GetPosition(this);

            // Determine the new amount to scroll.
            Point delta = new Point(
                (point.X > this.scrollStartPoint.X) ?
                    -(point.X - this.scrollStartPoint.X) :
                    (this.scrollStartPoint.X - point.X),

                (point.Y > this.scrollStartPoint.Y) ?
                    -(point.Y - this.scrollStartPoint.Y) :
                    (this.scrollStartPoint.Y - point.Y));

            // Scroll to the new position.
            ScrollViewer.ScrollToHorizontalOffset(
                this.scrollStartOffset.X + delta.X);
            ScrollViewer.ScrollToVerticalOffset(
                this.scrollStartOffset.Y + delta.Y);
        }

        base.OnPreviewMouseMove(e);
    }

    private void ScrollViewer_MouseEnter(object sender, MouseEventArgs e)
    {
        if (ScrollViewer.IsMouseOver)
        {
            // Save starting point, used later when determining 
            //how much to scroll.
            scrollStartPoint = e.GetPosition(this);
            scrollStartOffset.X = ScrollViewer.HorizontalOffset;
            scrollStartOffset.Y = ScrollViewer.VerticalOffset;

            // Update the cursor if can scroll or not.
            this.Cursor = (ScrollViewer.ExtentWidth >
               ScrollViewer.ViewportWidth) ||
                (ScrollViewer.ExtentHeight >
                ScrollViewer.ViewportHeight) ?
               Cursors.Arrow : Cursors.Arrow;
        }
    }
}
} 
```

XAML：

```
 <Grid x:Name="LayoutSelector" Grid.Column="0" Grid.Row="1"  DataContext="{Binding Main, Source={StaticResource MainVM}}" Height="100" >
                        <ScrollViewer x:Name="ScrollViewer" Width="Auto" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" PanningMode="HorizontalOnly"
                                      MouseEnter="ScrollViewer_MouseEnter"  >
                            <ItemsControl ItemsSource="{Binding SelectedLayout}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel HorizontalAlignment="Left" Height="100" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>

                        </ScrollViewer>
                    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:35:22.277

只是在一些更多的摆弄之后的更新。我更喜欢这段代码，因为我之前的回答意味着如果你想再次滚动，你必须将手指拖过滚动查看器但离开控件本身......没什么大不了的，但有些人可能会觉得它有点烦人。

下面是当手指触摸控件时显示“ScrollAll”光标的替代方法，然后通过抬起并触摸其他地方，您可以从新位置恢复滚动，而无需将手指从控件上拖出。

也感谢 Sacha Barber，他的文章对帮助我完成这项工作非常有帮助：http: [//www.codeproject.com/Articles/48871/Friction-Scrolling-Now-An-WPF-Attached-Behaviour-T](http://www.codeproject.com/Articles/48871/Friction-Scrolling-Now-An-WPF-Attached-Behaviour-T)

```
using System;
using System.Globalization;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Markup;
using System.Windows.Media.Effects;
using ViewModels;

namespace Views
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private Point scrollStartPoint;
    private Point scrollStartOffset;

    public MainWindow()
    {
        InitializeComponent();
        Closing += (s, e) => ViewModelCreator.Cleanup();
    }

    protected override void OnPreviewMouseDown(MouseButtonEventArgs e)
    {
        if (ScrollViewer.IsMouseOver)
        {
            // Save starting point, used later when determining 
            //how much to scroll.
            scrollStartPoint = e.GetPosition(this);
            scrollStartOffset.X = ScrollViewer.HorizontalOffset;
            scrollStartOffset.Y = ScrollViewer.VerticalOffset;

            // Update the cursor if can scroll or not.
            this.Cursor = (ScrollViewer.ExtentWidth >
               ScrollViewer.ViewportWidth) ||
                (ScrollViewer.ExtentHeight >
                ScrollViewer.ViewportHeight) ?
               Cursors.ScrollAll : Cursors.Arrow;

            //this.CaptureMouse();
        }

        base.OnPreviewMouseDown(e);
    }

    protected override void OnPreviewMouseMove(MouseEventArgs e)
    {
        if (this.Cursor == System.Windows.Input.Cursors.ScrollAll)
            if (ScrollViewer.IsMouseOver)
            {
                // Get the new scroll position.
                Point point = e.GetPosition(this);

                // Determine the new amount to scroll.
                Point delta = new Point(
                    (point.X > this.scrollStartPoint.X) ?
                        -(point.X - this.scrollStartPoint.X) :
                        (this.scrollStartPoint.X - point.X),

                    (point.Y > this.scrollStartPoint.Y) ?
                        -(point.Y - this.scrollStartPoint.Y) :
                        (this.scrollStartPoint.Y - point.Y));

                // Scroll to the new position.
                ScrollViewer.ScrollToHorizontalOffset(
                    this.scrollStartOffset.X + delta.X);
                ScrollViewer.ScrollToVerticalOffset(
                    this.scrollStartOffset.Y + delta.Y);
            }

        base.OnPreviewMouseMove(e);
    }

    //private void ScrollViewer_MouseEnter(object sender, MouseEventArgs e)
    //{
    //    if (ScrollViewer.IsMouseOver)
    //    {
    //        // Save starting point, used later when determining 
    //        //how much to scroll.
    //        scrollStartPoint = e.GetPosition(this);
    //        scrollStartOffset.X = ScrollViewer.HorizontalOffset;
    //        scrollStartOffset.Y = ScrollViewer.VerticalOffset;

    //        // Update the cursor if can scroll or not.
    //        this.Cursor = (ScrollViewer.ExtentWidth >
    //           ScrollViewer.ViewportWidth) ||
    //            (ScrollViewer.ExtentHeight >
    //            ScrollViewer.ViewportHeight) ?
    //           Cursors.Arrow : Cursors.Arrow;
    //    }
    //}

    protected override void OnPreviewMouseUp(MouseButtonEventArgs e)
    {
        this.Cursor = System.Windows.Input.Cursors.Arrow;
        this.ReleaseMouseCapture();

        base.OnPreviewMouseUp(e);
    }
} 
```

}

# android - android在没有活动的情况下使用蓝牙

> ID：12304551
> 
> 赞同：4
> 
> 时间：2012-09-06T16:37:23.760
> 
> 标签：android, android-activity, bluetooth

我想在 android 中编写一个库项目来扫描蓝牙设备并返回设备列表。图书馆项目没有活动。在库项目中，我将编写 getListOfBlueTooth 函数。或者我将提供要在客户端应用程序中实现的接口以进行通信。它可能看起来像 Facebook 的 SDK 项目。

我将创建一个客户端应用程序，并从客户端应用程序调用我的库的 getListOfBlueTooth 设备 API。或者我可以通过实现库项目的接口与库进行通信。那是在客户端应用程序中，我不需要知道蓝牙设备列表中的逻辑是如何实现的。

我的问题是，是否可以在没有活动类的情况下调用 BlueToothAdapter 的 startDiscovery() 函数。因为，我读到我需要注册 ACTION_FOUND 以便在找到远程蓝牙设备时收到通知。为此，我需要使用广播接收器和 IntentFilter。希望我已经清楚地解释了我的问题。有可能吗？你能给我建议吗？

# php - TCPDF 将文件保存到文件夹？

> ID：12304553
> 
> 赞同：41
> 
> 时间：2012-09-06T16:37:31.727
> 
> 标签：php, tcpdf

我正在使用 TCPDF 打印收据，然后使用 phpMailer 将其发送给客户，但我有一个问题：

**我不知道如何将文件保存为pdf。**

我试过这个：

```
// reset pointer to the last page
$pdf->lastPage();

//Close and output PDF document
$pdf->Output('kuitti'.$ordernumber.'.pdf', 'I');
$this->Output("kuitit"); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-06T16:44:07.277

试试这个

```
$pdf->Output('kuitti'.$ordernumber.'.pdf', 'F'); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-10-24T12:05:08.000

这会将生成的 pdf 文件存储在项目的自定义文件夹中

```
$filename= "{$membership->id}.pdf"; 
$filelocation = "D:\\wamp\\www\\project\\custom";//windows
$filelocation = "/var/www/project/custom"; //Linux

$fileNL = $filelocation."\\".$filename;//Windows
$fileNL = $filelocation."/".$filename; //Linux

$this->pdf->Output($fileNL, 'F'); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-08-20T16:31:55.463

`$pdf->Output()`接受第二个参数`$dest`，它接受单个字符。默认情况下，`$dest='I'`在浏览器中打开 PDF。

用于`F`保存到文件

```
$pdf->Output('/path/to/file.pdf', 'F') 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-05-10T12:11:32.053

唯一对我有用的东西：

```
// save file
$pdf->Output(__DIR__ . '/example_001.pdf', 'F');
exit(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-02-19T20:09:18.733

对于存储文件有困难的人，路径必须一直通过根目录。例如，我的是：

```
$pdf->Output('/home/username/public_html/app/admin/pdfs/filename.pdf', 'F'); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-04-06T12:44:33.423

TCPDF 用于[`fopen()`](http://php.net/manual/en/function.fopen.php)保存文件。因此，传递给 TCPDF`Output()`函数的任何路径都应该是绝对路径。

如果您想保存到相对路径，请使用例如`__DIR__`全局常量（请参阅[此答案](/a/15450982/1062698)）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-03-07T08:26:11.917

如果你仍然得到

> TCPDF 错误：无法创建输出文件：myfile.pdf

您可以通过将 PDF 数据放入变量并将此字符串保存到文件中来避免 TCPDF 的文件保存逻辑：

```
$pdf_string = $pdf->Output('pseudo.pdf', 'S');
file_put_contents('./mydir/myfile.pdf', $pdf_string); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-10-11T11:16:47.723

nick 的示例将其保存到您的本地主机。
但您也可以将其保存到本地驱动器。
如果您使用双反斜杠：

```
 $filename= "Invoice.pdf"; 
 $filelocation = "C:\\invoices";  

 $fileNL = $filelocation."\\".$filename;
 $pdf->Output($fileNL,'F');

 $pdf->Output($filename,'D'); // you cannot add file location here 
```

PS在Firefox（可选）工具>选项>常规选项卡>下载>总是问我在哪里保存文件

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-09-17T10:58:00.273

```
$pdf->Output( "myfile.pdf", "F"); 
```

> TCPDF 错误：无法创建输出文件：myfile.pdf

在`include/tcpdf_static.php`静态函数中关于 2435 行的文件中，`fopenLocal`如果我删除完整的“if 语句”，它可以正常工作。

```
public static function fopenLocal($filename, $mode) {
    /*if (strpos($filename, '://') === false) {
        $filename = 'file://'.$filename;
    } elseif (strpos($filename, 'file://') !== 0) {
        return false;
    }*/
    return fopen($filename, $mode);
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-10-24T18:46:11.643

```
require __DIR__ . '/vendor/autoload.php';
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

$html = '<h2>Welcome toTcpdf</h2>'; 
$html.= '<p>Welcome toTcpdf</p>'; 

//$pdf->writeHTML($tbl, true, false, true, false, '');
$pdf->writeHTML($html, true, false, false, false, '');
$time = time();
$sFilePath = __DIR__ . '/upload/'.$time.'.pdf' ;
$pdf->Output( $sFilePath , 'F'); // Save to folder
//$pdf->Output( $sFilePath , 'I'); // view to browser
//$pdf->Output( $sFilePath , 'D'); // Download instant

this is working 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-06T16:42:46.323

你可以试试；

```
$this->Output(/path/to/file); 
```

所以对你来说，它会像；

```
$this->Output(/kuitit/);  //or try ("/kuitit/") 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-21T00:17:36.420

这对我有用，保存到`temp_pdf`根目录下的子目录（）：

```
$sFilePath = $_SERVER['DOCUMENT_ROOT'] . '//temp_pdf/file.pdf' ;
$pdf->Output( $sFilePath , 'F'); 
```

请记住使目录可写。

# .net - 截断 ToolStripStatusLabel 而不是隐藏它

> ID：12304559
> 
> 赞同：12
> 
> 时间：2012-09-06T16:37:55.023
> 
> 标签：.net, winforms, truncation, statusstrip, toolstripstatuslabel

我在表单上有一个 StatusStrip 控件。此控件仅包含一个子控件 - 它是 ToolStripStatusLabel。当文本太大时，则不显示任何内容。我宁愿至少显示一些东西而不是什么都不显示。即使整个文本不适合，我应该如何使用 ToolStripStatusLabel 来显示部分文本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-06T16:48:14.860

尝试将 Spring 属性设置为 true：

```
toolStripStatusLabel1.Spring = true; 
```

或者正如汉斯指出的那样，您可以设置[ToolStripLayoutStyle](https://msdn.microsoft.com/en-us/library/system.windows.forms.toolstriplayoutstyle(v=vs.110).aspx)

```
statusStrip1.LayoutStyle = ToolStripLayoutStyle.Flow; 
```

# iphone - iOS：如何在 iPad 和 iPhone 版本的应用程序之间共享文档？

> ID：12304566
> 
> 赞同：0
> 
> 时间：2012-09-06T16:38:32.347
> 
> 标签：iphone, ios, icloud, ios-universal-app

我的印象是，当 Apple 推出通用应用程序时，提供了一种共享机制来在安装在多个设备上的同一应用程序之间同步文件。但是，我没有看到太多这方面的证据。我错过了什么？

（注意我宁愿避免使用 iCloud，因为苹果将用户数据提供给政府的隐私问题，因为这是一个合法的灰色区域等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:43:41.460

您需要使用云服务（例如 iCloud）来存储您的共享数据。通用应用程序没有共享机制来在设备之间共享数据。Universal App 只是让同一个 App 在 iPad 和 iPhone 上运行。这对客户来说是一个很好的奖励，因为如果他们同时拥有这两种设备，他们只需为应用程序付费一次。

该应用程序将需要从用户存储中获取数据。如果您不想使用 iCloud，您可以通过使用来自 Amazon Web Services 或 Microsoft Windows Azure 的存储服务来开发自己的 iCloud，但是，您必须为这些服务的带宽和存储付费。您还需要自己投入更多的工作，因为您必须自己提供服务器端支持和 Web 服务。另外，在移动设备上，您需要处理丢失网络连接、缓存设备上的数据，然后在重新连接时发送数据。

# sql-server - 这是一个 SQL 解析器错误吗？还是我的误解？

> ID：12304569
> 
> 赞同：2
> 
> 时间：2012-09-06T16:38:42.070
> 
> 标签：sql-server, sql-server-2008-r2

使用 SQL Server 2008 R2（版本 10.50.4000.0）：

我有两张桌子。我想删除另一个表中存在 ID 的表中的数据。很简单。但是，由于键入错误，我发现似乎是解析器错误。

在下面的脚本中，[SomeID] 是 Table1 中的一列，但实际上在 Table2 中并不存在

```
Delete from Table1 where [SomeID] in (Select [SomeID] from Table2) 
```

如果您运行子查询`"Select [SomeID] from Table2`，您会收到一条相应的错误消息，指出该列不存在。

如果你运行整个删除查询，它运行没有错误，并删除 table1 中的所有内容

似乎解析器应该发现表 2 中不存在该列。我知道您可以使用子查询外部的列，并且我意识到解析器假设我打算使用 table1 中的列，但是因为我没有指定 table2 中的任何列，所以在我看来，解析器应该足够聪明，知道有什么问题。幸运的是，发生这种情况时，我们处于测试环境中。:)

谢谢，托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:22:32.583

这不是错误引擎将执行您在查询中输入的内容。

当您使用`In`子句时，它将比较每一行，字段 SomeId，与结果`In`

例如，你可以这样做

```
Delete from Table1 where [SomeID] in (Select [SomeID] from Table2 where IdTable2 = SomeId) 
```

因此，您可以返回选择中的任何内容，作为常量，作为 table2 中的 Id，两者的总和，或者像这种情况下，返回第一个表中的 ID。

在这种情况下，当执行子查询时，由于没有 where 子句，子查询将始终返回结果（除非没有行），因为它没有过滤器，但是会显示什么？您正在父查询中指定一个字段，并且您可以显示它，因此它将返回它。当然，当您与 In 进行比较时，删除 table1 中的所有内容也是如此，对吗？

# java - 同步数组中的元素

> ID：12304571
> 
> 赞同：2
> 
> 时间：2012-09-06T16:38:57.433
> 
> 标签：java, arrays, multithreading, wrapper, thread-synchronization

我是 Java 多线程的新手，不太了解发生了什么。

从在线教程和讲义中，我知道`synchronized`必须应用于非空对象的块确保只有一个线程可以执行该代码块。由于数组是 Java 中的对象，因此可以对其应用同步。此外，如果数组存储对象，我也应该能够同步数组的每个元素。

我的程序有几个线程更新了一个数字数组，因此我创建了一个`Long`对象数组：

```
synchronized (grid[arrayIndex]){
    grid[arrayIndex] += a.getNumber();
} 
```

这段代码位于`run()`我扩展的线程类的方法中。数组 grid 由我的所有线程共享。但是，这不会在一个线程上运行相同的程序时返回正确的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T16:40:35.100

这行不通。重要的是要意识到这`grid[arrayIndex] += ...`实际上是用`grid`新对象替换 中的元素。这意味着您正在对数组中的一个对象进行同步，然后立即用数组中的另一个对象替换该对象。这将导致其他线程锁定不同的对象，因此它们不会阻塞。您*必须*锁定一个*常量*对象。

*如果*它永远不会被另一个数组对象替换，您可以锁定整个数组对象：

```
synchronized (grid) {
    // this changes the object to another Long so can't be used to lock
    grid[arrayIndex] += a.getNumber();
} 
```

`final`这就是为什么锁定对象是一种很好的模式的原因之一。请参阅此答案以获取更多详细信息：

> [为什么在布尔值上同步不是一个好习惯？](https://stackoverflow.com/questions/10324272/why-is-it-not-good-practice-to-synchronize-on-boolean/10324280#10324280)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:43:43.890

另一种选择是使用对象数组`AtomicLong`，并使用它们的`addAndGet()`or`getAndAdd()`方法。您不需要同步来增加对象，并且可以同时增加多个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:48:53.567

java 类 Long 是不可变的，你不能改变它的值。所以当你执行一个动作时：

```
grid[arrayIndex] += a.getNumber(); 
```

它不会更改您锁定的 grid[arrayIndex] 的值，而是实际上创建一个新的 Long 对象并将其值设置为旧值加上 a.getNumber。所以你最终会在不同的对象上同步不同的线程，这会导致你看到的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:47:12.177

你这里的`synchronized`街区不好。当您对可能是数字的数组元素进行同步时，您仅在该对象上进行同步。当您将数组的元素重新分配给与开始时不同的对象时，同步不再在正确的对象上，其他线程将能够访问该索引。

这两个选项之一会更正确：

```
private final int[] grid = new int[10];

synchronized (grid) {
    grid[arrayIndex] += a.getNumber();
} 
```

如果`grid`不能`final`：

```
private final Object MUTEX = new Object();

synchronized (MUTEX) {
    grid[arrayIndex] += a.getNumber();
} 
```

如果您使用第二个选项而`grid`不是 is `final`，则任何分配 to`grid`也应该同步。

```
synchronized (MUTEX) {
    grid = new int[20];
} 
```

总是在最终的东西上同步，总是在访问和修改上同步，一旦你完成了，你就可以开始研究其他锁定机制，例如`Lock`,`ReadWriteLock`和`Semaphore`. 这些可以提供比同步更复杂的锁定机制，这对于仅 Java 的默认同步还不够的情况更好，例如在高吞吐量系统中锁定数据（[读/写锁定](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)）或在资源池中锁定（[计数信号量](https://stackoverflow.com/questions/9242539/what-is-counting-semaphore)）。

# android - 无法将 .apk 文件上传到市场

> ID：12304576
> 
> 赞同：0
> 
> 时间：2012-09-06T16:39:04.627
> 
> 标签：android, google-play, apk, manifest

我为 Android 开发了一个新应用程序，我的应用程序已完成。除了几 (2) 个无害的警告外，它没有任何错误。我使用 ECLIPSE 中提供的工具创建了一个 .apk 包。它创建了一个密钥和一个 .apk 文件。创建好了。**但是，当我上传 .apk 文件时，我收到一条错误消息，提示我不能在包名称前使用以下内容：[com.android,com.goolge,android,com.example]**

以下是我的清单详细信息

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="android.Scheduler"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7"/>
<uses-permission android:name="android.permission.CAMERA"/>
<uses-feature android:name="android.hardware.camera" />  
<uses-feature android:name="android.hardware.camera.autofocus" />  
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 

<application
    android:icon="@drawable/icon"
    android:label=".SchedulerActivity" >
    <activity
        android:label="@string/app_name"
        android:name=".SchedulerActivity" >

        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
          <activity android:name=".addSubject"/>
           <activity android:name=".Assignment"/>
           <activity android:name=".CameraTake" android:screenOrientation="landscape"/>

            <activity android:name=".view_details"/>
            <activity android:name=".about"/>
            <activity android:name=".help"/>
               <activity android:name=".MyAlarmService"/>
                <activity android:name=".Assignment_view"/>
               <receiver android:name=".MyAlarmService" />

</application> 
```

我尝试了一些在此处解释的方法，但没有奏效。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:42:54.270

这是因为

```
package="android.Scheduler" 
```

你遇到了这个问题。

请注意，在您的文件浏览器中，您可能有 src > android > scheduler

你不能在那里有android。

all I can think of for a quick fix, is start a new project FROM that one, and in the setup set the package name to com.something.yourappname, but where "something" is do not include "google" or "android"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:10:10.113

You have choosen incorrect package name "android.Scheduler", just change your package name.

For eg. if your name is "ravi" then choose package name something like this-

"com.ravi.scheduler".

Steps change package name (eclipse):-

Under your project folder just go to "src" then here you found "android.Scheduler" right click on it, choose "Refactor" -> "rename" & then write your desired package name like "com.ravi.scheduler" & click OK.

Now Rebuild/Run your project & then do application signing.

Now you are ready to upload your app to Google Play.

# c++ - 计算机如何计算平方根？

> ID：12304577
> 
> 赞同：36
> 
> 时间：2012-09-06T16:39:12.567
> 
> 标签：c++, math, process, low-level, square-root

计算机如何计算平方根？我的意思是那里发生了什么！它是如何处理的！！它是否使用了一些数学方法，如牛顿法？三角函数呢？几乎所有的数学函数。在每种语言都有自己的方式的情况下，那么让我们谈谈c ++。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-06T16:56:13.937

大多数现代非嵌入式 CPU（例如 x86 和更大的 ARM 内核）具有直接计算平方根的硬件指令。支持这些指令的硬件实现各不相同，但通常是教科书逐位算法的变体（尽管并不总是以 2 为底；也可以使用以 4 或 16 为底的算法）。这些通常是 CPU 上最慢的基本算术运算。像 16-64 个周期这样的时序并不少见，而且这些指令通常不是流水线的。

在缺乏直接硬件平方根指令（Itanium、PPC 等）的 CPU 上，典型的方法是生成初始估计（使用产生估计的指令或使用查找表），然后使用迭代优化该估计方法（通常是牛顿法或戈德施密特法）。如果你有兴趣，你可以找到一些 Peter Markstein 或 Roger Golliver 关于这个主题的著作。

更复杂的数学函数（如三角运算）通常通过将参数减少到一些基本域然后用多项式或有理函数逼近来计算。您可以查看在线提供的几个数学库中的任何一个的源以获取更多详细信息（fdlibm 是一个很好的起点）。

x86 指令集提供了许多支持数学函数的指令，如 exp、log 和 sin，但这些不再常用，因为好的软件库实现可以提供更好的性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T17:05:53.800

Another possibility that hasn't been mentioned, is the [CORDIC method](http://www.convict.lu/Jeunes/Math/square_root_CORDIC.htm). CORDIC isn't widely used/known in software, but is pretty common in hardware, and does pretty well at getting decent performance without using a lot of gates.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T16:53:42.600

我认为牛顿的迭代收敛方法用于计算平方根

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T16:57:07.827

正如其他人所指出的那样，这是一个非常广泛的问题 - 对软件有效的方法可能对硬件实现来说是一个糟糕的选择；然后是 IEEE-754、硬件查找表等的正确舍入问题。有很多开源 C 库，也有`libm`实现。可以在[这里](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots)找到经典和现代方法的一个很好的概述。

# .net - 函数返回每个字符之间有空格的字符串，尝试删除空格时出现问题

> ID：12304578
> 
> 赞同：0
> 
> 时间：2012-09-06T16:39:26.300
> 
> 标签：.net, sql, vb.net

## 好的，所以我发现了问题所在，它在 sql 转换函数中。当它应该是 nvarchar(30) 时，我正在转换为 varchar(30)。来看看区别。[varchar 和 nvarchar 有什么区别？](https://stackoverflow.com/questions/144283/what-is-the-difference-between-varchar-and-nvarchar)

我想这可能是一个愚蠢的问题，但我似乎无法从这个函数返回的字符串中删除某种空间。我想第一个真正的问题是为什么当我们像这样“1234789”保存到数据库时，这个函数会返回这样的字符串“1 2 3 4 5 6 7 8 9”。第二个问题是为什么会这样

```
Replace("1 2 3 4 5 6 7 8 9","\p{Zs}","") 
```

或者

```
Replace("1 2 3 4 5 6 7 8 9"," ","") 
```

不工作，我有一种感觉，因为中间的字符看起来像空格但不是。

![我的手表](../Images/c0fa35e5d317baee74348e095c18d1c2.png)

```
 Private Shared Function GetEncryptedPmtField(lhID As Integer, accountId As Integer, fieldName As String)
        Dim openKeyCmd = String.Format("OPEN SYMMETRIC KEY somekey DECRYPTION BY PASSWORD = '{0}'",     ConfigurationManager.AppSettings("Somethingsomething"))
        Const closeKeyCmd As String = "CLOSE SYMMETRIC KEY somekey"

        Dim command As New SqlCommand()
        command.Connection = New SqlConnection(ConfigurationManager.ConnectionStrings("Something").ConnectionString)
        command.CommandType = CommandType.Text
        command.CommandText = String.Format("{0} SELECT convert(varchar(30),decryptbykey({1})  FROM  paymentacct WHERE lh_id = @lhid AND id = @id ; {2}", openKeyCmd, fieldName, closeKeyCmd)
        command.Parameters.AddRange({New SqlParameter With {.ParameterName = "lhid", .Value = lhID}, New SqlParameter With {.ParameterName = "id", .Value = accountId}})
        command.Connection.Open()
        Dim baNum = command.ExecuteScalar().ToString()
        command.Connection.Close()
        Return baNum
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:35:05.677

谢谢大家的帮助，这里是修复。因此，问题在于我将加密字段转换为的类型。我使用的是 varchar 而不是 nvarchar。

```
 SELECT convert(varchar(30),decryptbykey(keyname) FROM  paymentacct 
```

到

```
 SELECT convert(nvarchar(30),decryptbykey(keyname))  FROM  paymentacct 
```

注意转换函数中的 varchar -> nvarchar 变化

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T17:00:04.607

给正则表达式 \sa 试试

```
System.Diagnostics.Debug.WriteLine(Regex.Replace("12 3  4   5   ",@"\s+","")); 
```

如果您使用的是 String.Replace，那么它不会将“\p{Zs}”识别为空格。
您需要使用正则表达式。该问题未标记正则表达式。

你是说在数据库中它是正确的值吗？

# caching - Luracast restler -- routes.php 缓存

> ID：12304579
> 
> 赞同：0
> 
> 时间：2012-09-06T16:39:29.780
> 
> 标签：caching, restler

我遇到了 Luracast restler 的路由缓存问题。例如，我有 2 个网址：

1.  `/api/service/resale/getmapinfo`
2.  `/api/service/precon/getmapinfo`

他们相应地使用 2 个类：

1.  转售服务
2.  PreconService

当我到达第一个 url 时，缓存中会出现第一类方法的信息。

然后我尝试访问第二个 url，然后restler 读取缓存并找到只有第一类的路由，所以我收到 404 错误（因为没有关于第二类的信息）。

此外，当我第一次访问不正确的 url（故意）时，`routes.php`缓存保存为空数组。然后我在我尝试访问的所有 url 上得到 404。

基本上我在代码中看到的是缓存系统不是基于类的，而是有一个只写一次的公共缓存，当你第一次到达一个 url 时。请建议，是我做错了什么还是这是restler的不正确行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:16:01.993

看起来您需要重新生成，`routes.php`因为您添加了新类和/或修改了 api 方法，您可以简单地删除`routes.php`以根据最新设置创建新的

理想情况下，当您在开发 api 的过程中不要打开`production_mode`

所以而不是

```
$r = new Restler(true); //in production mode 
```

做

```
$r = new Restler(); //in debug mode, will generate routes every time 
```

或者如果您想查看生成的路线，但`routes.php`每次都要覆盖

```
$r = new Restler(true,true); 
```

# sql - 插入选择

> ID：12304586
> 
> 赞同：1
> 
> 时间：2012-09-06T16:39:59.513
> 
> 标签：sql

我想将数据插入`admission`到`student`.

```
INSERT INTO student(name,age) SELECT name, age from admission 
```

但现在我需要向`student`:添加另外 2 个字段`username`，`pasword`同时我正在从`admission`

例子：

```
INSERT INTO student(name,age,username, password)
  SELECT name, age
    FROM admission..... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:54:15.423

你写的查询：

```
INSERT 
  INTO student(name,age) 
  SELECT name, age from admission 
```

是正确的。`SELECT`和的行`INSERT`必须匹配。

但是，我不知道`username`and`password`字段来自哪里。如果他们在同`admission`一张桌子上，那么，@john Woo 的回答是正确的。如果表不包含这些值，那么您可以使用，

```
update Student set username=
(select username from <table> and <condition>)
where <condition> 
```

`<table>`是包含`username`字段的表。

`<condition>`取决于您如何识别行

或者可能`join`是两个表，即`admissions`另一个表包含`username`和并在单个查询中`password`完成操作`insert`

```
INSERT 
  INTO student(name,age,username,password) 
    SELECT a.name, a.age, b.username, b.password
      FROM admission a
      JOIN <table> b ON a.username = b.username
      .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:44:34.270

我不知道 和 的值`username`来自`password`哪里，但您可以创建一个**虚拟列（*具有默认值*）**，以便与您的`INSERT INTO`. 例子，

```
INSERT INTO student(name,age,[username], [password]) 
SELECT name, age, 'userHere' as [username], 'passHere' as [password]
from admission..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:41:59.403

如果两个新字段都可以为空，您可以执行以下操作：

```
INSERT INTO student(name,age,username, password)
SELECT name, age, null, null 
FROM admission 
```

# python - 过滤元组列表以包含最大值和最小值

> ID：12304587
> 
> 赞同：3
> 
> 时间：2012-09-06T16:40:02.277
> 
> 标签：python

我已经生成了一长串元组（格式如下）。列表中的每个元组都将时间作为第一个元素，将一个事件作为第三个成员。第二个成员始终是相同的，并从我必须处理的其他类似列表中识别该列表。元组有许多不同的第三个元素，每个元组在不同的时间值有多个条目，这是第一个元素。

我正在尝试过滤列表以删除每个事件（元组的第三个成员）的时间的最小值和最大值（元组中的第一项）。我尝试使用列表理解，但很快就感到困惑。

```
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3567', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3600', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3800', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3800', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3800', 'VOLTAGE DEVIATION', 'HORIZ_G .575')
('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
'1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575') 
```

过滤后的结果是

```
('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP2G23.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3600', 'VOLTAGE DEVIATION', 'DIFICULT 230')
('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3800', 'VOLTAGE DEVIATION', '7MIHL G1.575')
('1.3800', 'VOLTAGE DEVIATION', 'HORIZ_G .575')
('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230')
('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5')
('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5')
'1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575')
('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')` 
```

我正在尝试下面的代码，但出现错误。我对此很陌生，所以如果我做错了什么，请告诉我。代码中的 m1 是我从 findall 生成的元组列表。我在代码顶部导入了 ast 。

```
 m1 = re.findall(pattern1,wholefile)
       m1=[ast.literal_eval(t) for t in m1] 
       m1=[(float(a),b,c) for a,b,c in m1] 
       keys=sorted({t[2] for t in m1}) 
       for key in keys: 
           group=filter(lambda t: t[2]==key,m1)
           print '{}:\n\tmax: {}\n\tmin: {}'.format(key,max(group),min(group)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:47:10.477

将元组重构为 dict 会使生活更轻松。

```
from collections import defaultdict

d = defaultdict(list)
for t,_,v in your_tuple_list:
     d[v].append(t) 
```

之后，`d`每个事件都有一个键，以及该时间段的关联时间列表。

它看起来像这样（有点）：

```
>>> d['DNLP2G23.575']
['1.3433'....] 
```

现在问题变成了找到每个列表的最小值和最大值；`min()`这很容易`max()`

完成后，您将按所需顺序获得数据集；您可以将其转换回元组/列表/等。

如果您热衷于，您可以将列表转换为一个`set`，这将消除重复时间并通过加快最小/最大速度为您节省一些时间；假设您必须计算大量元组。

您还应该将时间转换为`float`- 您可以在主循环中执行此操作：`d[v].append(float(t))`. 这是为了确保最大值和最小值正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:51:33.070

为此使用[itertools.groupby ：](http://docs.python.org/library/itertools.html#itertools.groupby)

```
>>> import itertools
>>> import operator
>>> results = []
>>> for key, group in itertools.groupby(tuplelist, operator.itemgetter(2)):
...    group = list(group)
...    results.append(min(group))
...    results.append(max(group))
...
>>> pprint.pprint(results)
[('1.3433', 'VOLTAGE DEVIATION', 'DNLP2G23.575'),
 ('1.3467', 'VOLTAGE DEVIATION', 'DNLP2G23.575'),
 ('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575'),
 ('1.3467', 'VOLTAGE DEVIATION', 'DNLP1_G1.575'),
 ('1.3533', 'VOLTAGE DEVIATION', 'DIFICULT 230'),
 ('1.3600', 'VOLTAGE DEVIATION', 'DIFICULT 230'),
 ('1.3600', 'VOLTAGE DEVIATION', '7MIHL G1.575'),
 ('1.3800', 'VOLTAGE DEVIATION', '7MIHL G1.575'),
 ('1.3800', 'VOLTAGE DEVIATION', 'HORIZ_G .575'),
 ('1.3800', 'VOLTAGE DEVIATION', 'HORIZ_G .575'),
 ('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115'),
 ('1.3800', 'VOLTAGE DEVIATION', 'MEDBOWCO 115'),
 ('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230'),
 ('1.3800', 'VOLTAGE DEVIATION', 'STNDPSVC 230'),
 ('1.3867', 'VOLTAGE DEVIATION', 'MINERS  34.5'),
 ('1.3900', 'VOLTAGE DEVIATION', 'MINERS  34.5'),
 ('1.4233', 'VOLTAGE DEVIATION', 'FT CRK2 34.5'),
 ('1.4267', 'VOLTAGE DEVIATION', 'FT CRK2 34.5'),
 ('1.4800', 'VOLTAGE DEVIATION', 'HIPLN_G .575'),
 ('1.4833', 'VOLTAGE DEVIATION', 'HIPLN_G .575')] 
```

笔记：

1.  最小/最大是按顺序在元组的元素上完成的。但是，第一个元素实际上是一个字符串而不是浮点数，因此您可能需要将`key`参数传递给 min 和 max 以使其使用不同的值
2.  仅当分组键的所有相同值都在列表中时，这才有效。在您的示例输出中就是这种情况，但如果不是，您可能必须先对列表进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:08:12.877

这有效（只要你真的有一个第一个值为浮点数的元组列表）：

```
keys=sorted({t[2] for t in tups})
for key in keys:
    group=filter(lambda t: t[2]==key,tups)
    print '{}:\n\tmax: {}\n\tmin: {}'.format(key,max(group),min(group)) 
```

印刷：

```
MIHL G1.575:
    max: (1.38, 'VOLTAGE DEVIATION', '7MIHL G1.575')
    min: (1.36, 'VOLTAGE DEVIATION', '7MIHL G1.575')
DIFICULT 230:
    max: (1.36, 'VOLTAGE DEVIATION', 'DIFICULT 230')
    min: (1.3533, 'VOLTAGE DEVIATION', 'DIFICULT 230')
DNLP1_G1.575:
    max: (1.3467, 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
    min: (1.3467, 'VOLTAGE DEVIATION', 'DNLP1_G1.575')
DNLP2G23.575:
    max: (1.3467, 'VOLTAGE DEVIATION', 'DNLP2G23.575')
    min: (1.3433, 'VOLTAGE DEVIATION', 'DNLP2G23.575')
FT CRK2 34.5:
    max: (1.4267, 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
    min: (1.4233, 'VOLTAGE DEVIATION', 'FT CRK2 34.5')
HIPLN_G .575:
    max: (1.4833, 'VOLTAGE DEVIATION', 'HIPLN_G .575')
    min: (1.48, 'VOLTAGE DEVIATION', 'HIPLN_G .575')
HORIZ_G .575:
    max: (1.38, 'VOLTAGE DEVIATION', 'HORIZ_G .575')
    min: (1.38, 'VOLTAGE DEVIATION', 'HORIZ_G .575')
MEDBOWCO 115:
    max: (1.38, 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
    min: (1.38, 'VOLTAGE DEVIATION', 'MEDBOWCO 115')
MINERS  34.5:
    max: (1.39, 'VOLTAGE DEVIATION', 'MINERS  34.5')
    min: (1.3867, 'VOLTAGE DEVIATION', 'MINERS  34.5')
STNDPSVC 230:
    max: (1.38, 'VOLTAGE DEVIATION', 'STNDPSVC 230')
    min: (1.38, 'VOLTAGE DEVIATION', 'STNDPSVC 230') 
```

* * *

根据您的评论，听起来您确实有看起来像元组的文本。因此，要将其转换为实际的元组：

```
import ast

tups=[ast.literal_eval(t) for t in tups]
tups=[(float(a),b,c) for a,b,c in tups] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:20:50.280

如果您只有少数元组，这可能有点过头了，但如果您有很长的列表并且能够使用外部库，那么看看[pandas](http://pandas.pydata.org)。假设您的变量包含元组，`tuplelist`那么以下给出了您想要的输出：

```
import pandas
df = pandas.DataFrame.from_records(tuplelist)
df = pandas.concat([df.groupby([1, 2]).min(), 
                df.groupby([1, 2]).max() ])
df = df.sort().reset_index().reindex(columns = [0,1,2])
print list(tuple(x) for x in df.values) 
```

# c - Ubuntu 10（程序集）中的实验缓冲区溢出

> ID：12304589
> 
> 赞同：2
> 
> 时间：2012-09-06T16:40:06.810
> 
> 标签：c, linux, stack-overflow

我正在尝试使用 C 程序溢出 Ubuntu 10.04 中的缓冲区并将返回地址转移到函数“垃圾”。但我无法用未使用的函数“垃圾”的地址覆盖返回地址。它只是在 12 个字节的堆栈上转储一些未知地址。请帮我解决它。这是C代码： -

```
 (gdb) list 
    1   #include<stdio.h>
    2   void display()
    3   {
    4       char buff[8];
    5       gets(buff);
    6       puts(buff);
    7   }
    8   main()
    9   {
    10      display();
    (gdb) 
    11      return(0);
    12  }
    13  junk()
    14  {
    15      printf("cracked");
    16  } 
```

main 的反汇编代码是：- 函数 main 的汇编代码转储：

```
 0x08048462 <+0>:    push   %ebp
    0x08048463 <+1>:    mov    %esp,%ebp
    0x08048465 <+3>:    call   0x8048444 <display>
    0x0804846a <+8>:    mov    $0x0,%eax
    0x0804846f <+13>:   pop    %ebp
    0x08048470 <+14>:   ret 
```

汇编程序转储结束。

函数显示的汇编代码转储：

```
 0x08048444 <+0>:    push   %ebp
    0x08048445 <+1>:    mov    %esp,%ebp
    0x08048447 <+3>:    sub    $0xc,%esp
    0x0804844a <+6>:    lea    -0x8(%ebp),%eax
    0x0804844d <+9>:    mov    %eax,(%esp)
    0x08048450 <+12>:   call   0x8048350 <gets@plt>
    0x08048455 <+17>:   lea    -0x8(%ebp),%eax
    0x08048458 <+20>:   mov    %eax,(%esp)
    0x0804845b <+23>:   call   0x8048380 <puts@plt>
    0x08048460 <+28>:   leave  
    0x08048461 <+29>:   ret 
```

汇编程序转储结束。

函数垃圾的汇编代码转储：

```
 0x08048471 <+0>:    push   %ebp
    0x08048472 <+1>:    mov    %esp,%ebp
    0x08048474 <+3>:    sub    $0x4,%esp
    0x08048477 <+6>:    mov    $0x8048550,%eax
    0x0804847c <+11>:   mov    %eax,(%esp)
    0x0804847f <+14>:   call   0x8048370 <printf@plt>
    0x08048484 <+19>:   leave  
    0x08048485 <+20>:   ret 
```

汇编程序转储结束。

现在我在没有堆栈保护的情况下组装它：-

```
 gcc -ggdb -fno-stack-protector -mpreferred-stack-boundary=2 -o buffer buffer.c 
```

如果我输入：- printf "wwwwwwwwwwww\x72\x84\x04\x08" | 。/缓冲

值：- "x72\x84\x04\x08" 作为未使用函数 "junk" 的第一条指令的转移地址。它在 12 个字节上存储了一些奇怪的内存值以及返回地址，但不是我的地址。并再次给出“分段错误”。在较新的 Linux 版本中是否有其他方法可以利用缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:31:36.370

leave 等价于以下内容：

```
movl %ebp, %esp
popl %ebp 
```

因此，在您的情况下，如果您为 %ebp 提供 'wwww'，程序将尝试执行以下操作：

```
movl $0x77777777, %esp    ; 0x77777777 = 'wwww'
popl %ebp                 ; read from address 0x77777777! 
```

您需要为 %esp! 提供一个合理的值！

# ios5 - 核心数据委托方法被多次调用

> ID：12304590
> 
> 赞同：0
> 
> 时间：2012-09-06T16:40:10.727
> 
> 标签：ios5, core-data, xmpp, nsfetchedresultscontroller, nsmanagedobjectcontext

我正在使用 XMPP 创建一个 FBChat。我为 coredata 和 fetchedResults 创建了单独的类。

核心数据类：

```
@implementation CoreDataClass

@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (NSManagedObjectContext *)managedObjectContext
{

    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil)
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init] ;
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil)
    {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Chat" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSURL *storeURL = [[delegate applicationDocumentsDirectory] URLByAppendingPathComponent:@"FacebookChat.sqlite"];
    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
    {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil)
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
        {
                       NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

FetchedControl类：

```
@implementation FetchedControllClass
@synthesize fetchedResultsController;

#pragma mark Fetched Results

- (NSFetchedResultsController *)fetchedResultsController
{
    CoreDataClass *coreDataObject=[[CoreDataClass alloc]init];

    if (fetchedResultsController != nil) {
        return fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Conversation" inManagedObjectContext:coreDataObject.managedObjectContext];
    [fetchRequest setEntity:entity];
    [fetchRequest setFetchBatchSize:20];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"facebookName" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];    
    [fetchRequest setSortDescriptors:sortDescriptors];
    [sortDescriptor release];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:coreDataObject.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"] ;
    [fetchRequest release];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;
    [aFetchedResultsController release];
    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    [coreDataObject release];
    return fetchedResultsController;
}    

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    AlertListVC *alertListObject=[[AlertListVC alloc]initWithNibName:@"AlertListVC" bundle:nil];

    [alertListObject.tableView beginUpdates];
    [alertListObject release];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    AlertListVC *alertListObject=[[AlertListVC alloc]initWithNibName:@"AlertListVC" bundle:nil];

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [alertListObject.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [alertListObject.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
    [alertListObject release];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    AlertListVC *alertListObject=[[AlertListVC alloc]initWithNibName:@"AlertListVC" bundle:nil];

    UITableView *tableView = alertListObject.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [alertListObject configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
    [alertListObject release];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    AlertListVC *alertListObject=[[AlertListVC alloc]initWithNibName:@"AlertListVC" bundle:nil];
    [alertListObject.tableView endUpdates]; 
    [alertListObject release];

} 
```

我为 MainChatClass 中的两个类创建了对象，并将对话从 coredata 添加到 ConversationClass

```
Conversation *conversation = (Conversation *)[NSEntityDescription
                                                          insertNewObjectForEntityForName:@"Conversation"
                                                          inManagedObjectContext:coreDataClassObject.managedObjectContext]; 
```

我能够获得 fetchedResults 但问题是：Coredata 方法被调用了两次（因此文件创建了两次）。如果我选​​择要聊天的朋友，那么应用程序将崩溃。我使用僵尸来跟踪问题。它作为负责任的调用者显示一些错误： 1.[MainChatClass tableView:didSelectRowAtIndexPath] 2.[NSFetchedResultsController(Private Methods) _managedObjectContextDidChange]

我已经尝试了很多次，但这些方法仍然出现错误。如果有人对此有想法，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:32.063

在每个 FRC 委托方法中，您创建一个新的`alertListObject`. 这是没有意义的。您必须将更新消息发送到现有的表视图。

发生崩溃是因为`alertListObject.tableView`是`nil`针对新创建的视图控制器。

# java - 关于 finally 块的少数例外和作用

> ID：12304596
> 
> 赞同：3
> 
> 时间：2012-09-06T16:40:33.317
> 
> 标签：java, exception

我正在阅读名为 javauzzlers 的 Java 书籍，其中我发现..永远不要使用 return、break、continue 或 thRow 退出 finally 块，并且永远不允许检查的异常传播到 finally 块之外。你能不能用一些简短的小例子来详细解释一下，这样我才能完全理解..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:50:47.573

//运行此代码，您将看到，当您运行此代码时，您将获得以下值

//由finally块返回，因此即使在try中有return，也会优先考虑它

//抓住。

```
class A
{
int one()
    {
        try
            {
             int n[]= new int[5];
             System.out.println("inside try");
             n[7]=89;
             return 10;
            }
        catch(Exception e)
            {
             System.out.println(e);
             return 399;
            }
        finally
            {
             System.out.println(" this is finally block");
             return 20; //priority is given to finally block
            }
        }
 }

class final7
{
    public static void main(String args[])
    {
    A ob= new A();
    System.out.println(ob.one());
    }
} 
```

# java - 如何在 Java 中向 MultiSplitPane 添加新的拆分（行）？

> ID：12304598
> 
> 赞同：0
> 
> 时间：2012-09-06T16:40:36.747
> 
> 标签：java, jxmultisplitpane, multisplitpane

我在 java 中有一个简单的 MultiSplitPane。它有 1 行（拆分）和 2 个节点（叶子）。如何在现有行下添加另一行。

这是创建 MultiSplitPane 和 2 叶的代码：

```
List children = 
Arrays.asList(new Leaf("left"),
new Divider(), 
new Leaf("right"));
Split modelRoot = new Split();
modelRoot.setChildren(children);

MultiSplitPane multiSplitPane = new MultiSplitPane();
multiSplitPane.getMultiSplitLayout().setModel(modelRoot);
multiSplitPane.add(new JButton("Left Component"), "left");
multiSplitPane.add(new JButton("Right Component"), "right"); 
```

这就是我可以添加另一个叶子的方式，但我需要添加新的拆分（行）：

```
Leaf newLeaf = new Leaf("newLeaf");
    Split newSplit = (Split) multiSplitPane.getMultiSplitLayout().getModel();
    java.util.List newList = new ArrayList();

    newList.add(newLeaf);
    newList.add(new Divider());
    newList.addAll(newSplit.getChildren());

    newSplit.setChildren(newList);

    multiSplitPane.setModel(newSplit);
    multiSplitPane.add(new JButton("new"), "newLeaf");
    revalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:40:50.053

如果要使用第二个拆分，可以执行以下操作：

*   创建几个组件以放入第二个拆分中。
*   制作您将链接上述组件的叶子。
*   制作一个代表拆分结构的新子列表。
*   创建拆分并将其子项设置为上述列表。

那是容易的部分。现在，这里是关键：

*   将您的第二个拆分添加到第**一个拆分的**子列表中。请注意，您可能必须在第二个拆分之前向第一个拆分的子列表添加一个分隔符！
*   为您的第一次拆分调用“setChildren”。据我所知，您必须在修改了斯普利特的孩子名单后才这样做。
*   不要忘记将您的组件实际添加到 MultiSplitPane 并为 MultiSplitPane 调用“重新验证”。

看看[这个示例代码。](https://stackoverflow.com/questions/12848566/swing-layout-manager-solution-to-replace-dynamically-created-and-nested-split-pa/12879025#12879025)

# c# - 安全访问 MemoryStream 中的数据

> ID：12304602
> 
> 赞同：2
> 
> 时间：2012-09-06T16:40:47.197
> 
> 标签：c#, bytearray, memorystream

假设我有一个`MemoryStream`对字节进行操作的 and 函数。

当前代码是这样的：

```
void caller()
{
    MemoryStream ms = // not important
    func(ms.GetBuffer(), 0, (int)ms.Length);
}

void func(byte[] buffer, int offset, int length)
{
    // not important
} 
```

我无法更改`func`，但我想尽量减少从`func`.

我如何/应该重写代码以确保不会更改流数据？

或者这不能做？

编辑：

对不起，我没有提到我不想复制数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:43:11.503

打电话`.ToArray`。

```
func(ms.GetBuffer().ToArray(), 0, (int)ms.Length); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)（重点是我的）：

> 请注意，缓冲区包含可能未使用的已分配字节。例如，如果将字符串“test”写入 MemoryStream 对象，则从 GetBuffer 返回的缓冲区长度为 256，而不是 4，其中 252 个字节未使用。**要仅获取缓冲区中的数据，请使用 ToArray 方法；但是，ToArray 会在内存中创建数据的副本。**

* * *

理想情况下，您会更改`func`为`IEnumerable<byte>`. 一旦方法拥有数组，您就相信如果您不希望它们修改数据，它们不会修改数据。如果合同*要*提供`IEnumerable<byte>`，实施者将不得不决定他们是否需要一份副本来编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T16:52:12.203

如果您无法复制（其他答案中建议的 ToArray）并且无法更改`func`函数的签名，那么剩下的唯一事情就是尝试验证该函数没有更改数据。

您可以在调用之前/之后计算某种哈希值并检查它是否相同。它不能保证 func 没有改变底层数据（由于哈希冲突），但至少会给你很好的机会知道它是否发生了。可能对非生产代码有用...

真正的解决方案是要么将数据副本提供给不受信任的代码，要么传递一些不允许数据更改的包装接口/对象（需要更改签名/重写`func`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T16:42:49.683

使用 将数据从流中复制出来`ms.ToArray()`。显然，性能会受到影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T16:47:22.067

您不能只将数组的“切片”传递给方法。要么将数组的副本传递给方法并将结果复制回来：

```
byte[] slice = new byte[length];
Buffer.BlockCopy(bytes, offset, slice, 0, length);
func(slice, 0, length);
Buffer.BlockCopy(slice, 0, bytes, offset, length); 
```

或者，如果您可以更改方法，则传递某种包装数组的代理对象并检查每个访问是否在允许的范围内：

```
class ArrayView<T>
{
    private T[] array;
    private int offset;
    private int length;

    public T this[int index]
    {
        get
        {
            if (index < offset || index >= offset + length)
                throw new ArgumentOutOfRange("index");
            return array[index];
        }
        set
        {
            if (index < offset || index >= offset + length)
                throw new ArgumentOutOfRange("index");
            array[index] = value;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:27:45.013

您是否试图确保它实际上永远无法更改内存流，或者如果您的代码在某些*内容*`func()`发生更改时可以引发异常就足够了？听起来你想做类似的事情：

 *```
void caller()
{
    MemoryStream ms = // not important
    var checksum = CalculateMyChecksum(ms);
    func(ms.GetBuffer(), 0, (int)ms.Length);
    if(checksum != CalculateMyChecksum(ms)){
        throw new Exception("Hey! Someone has been fiddling with my memory!");
    }
} 
```

不过，对于任何重要/关键的事情，我都不愿意推荐这个。你能提供更多信息吗？也许对您的问题有更好的解决方案，以及完全避免此问题的方法。*

# stored-procedures - 存储过程的 SQL Server 堆栈跟踪

> ID：12304607
> 
> 赞同：4
> 
> 时间：2012-09-06T16:41:00.107
> 
> 标签：stored-procedures, input, sql-server-2008-r2

我想查看传递给 SQL Server 的特定用户定义存储过程的所有输入值。我正在使用 SQL Server 2008 管理工作室。有时我无法访问调用此过程的客户端代码，并且错误可能在过程内部，因此，我想知道我的过程执行的时间和输入值是什么。如果有这些信息，我可以在不运行整个复杂过程的情况下调试程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:49:56.070

SQL Profiler 将为您提供这些信息。您需要对数据库具有 ALTER TRACE 权限才能运行 Profiler。

[http://msdn.microsoft.com/en-us/library/ms181091%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms181091%28v=sql.105%29.aspx)

除了开始菜单链接之外，您还可以从 SQL Server Management Studio 的“工具”菜单中运行它。

# maven - 通过 BND 将 Maven POM 放入 OSGi 包装器？

> ID：12304609
> 
> 赞同：0
> 
> 时间：2012-09-06T16:41:01.647
> 
> 标签：maven, osgi, bnd, bndtools

我有一个想在 OSGi 环境中使用的第三方 JAR，但它没有适合 OSGi 的 MANIFEST.MF。所以，我使用 BND（嗯，BNDTools）来包装它。这很好用，但是：

我还希望能够轻松地将它与 Maven 一起使用（它也没有设置），所以我想包含一个描述其依赖关系的 Maven POM。有没有办法通过 BND 做到这一点？这是我尝试过的：

我查看了各种 Mavenized JAR 的布局，发现它们似乎将 POM 包含在 META-INF/maven/groupId/artifactId 中。例如：

```
META-INF/maven/com.example/com.example.greatapilibrary/pom.xml. 
```

所以，我做了一个 POM 并把它放在这样的地方，然后修改 bnd.bnd 有：

```
-include: META-INF/maven/com.example/com.example.greatapilibrary/pom.xml 
```

但是，生成的 JAR 不包含该文件。

我认为（但不是 100% 肯定）我可能误读了 BND 关于“-include”的文档——看起来它可能是为了在生成的 MANIFEST.MF 中包含额外的清单指令，而不是在 JAR 中包含额外的文件。

但无论如何，有没有办法使用 BND 来完成我想做的事情？或者我是否必须使用另一个重新包装程序来使用 POM 创建一个 JAR，然后使用 BND 重新包装*它*而不是使用它来重新包装原始 JAR？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:36:47.710

只是尝试添加：

```
-includeresource: META-INF/maven/com.example/com.example.greatapilibrary/pom.xml=META-INF/maven/com.example/com.example.greatapilibrary/pom.xml 
```

到你的 bnd.bnd

`include`此链接解释了和`includeresource`（与`Include-Resource`）之间的区别：http: [//bndtools.org/faq.html#whats-the-difference-between--include-and-include-resource](http://bndtools.org/faq.html#whats-the-difference-between--include-and-include-resource)

# javascript - (extjs) 获取表单中单选按钮的选定值。不返回值

> ID：12304610
> 
> 赞同：6
> 
> 时间：2012-09-06T16:41:08.400
> 
> 标签：javascript, forms, extjs, extjs4

我遵循了获取单选按钮表单的选定值的基本过程。

```
 ....
        xtype: 'radiofield',
        name: 'timespan',
        id: 'timespan',
        value: 7,
        checked: true,
        fieldLabel: 'Time Span',
        boxLabel: '7 days'
    }, {
        xtype: 'radiofield',
        name: 'timespan',
        value: '30',
        fieldLabel: '',
        labelSeparator: '',
        hideEmptyLabel: false,
        boxLabel: '30 days'
    }, {
        xtype: 'radiofield',
        name: 'timespan',
        value: '60',
        fieldLabel: '',
        labelSeparator: '',
        hideEmptyLabel: false,
        boxLabel: '60 days'
    }, {
        xtype: 'radiofield',
        name: 'timespan',
        value: 'all',
        fieldLabel: '',
        labelSeparator: '',
        hideEmptyLabel: false,
        boxLabel: 'All' .... 
```

我使用过以下方法：

```
Ext.getCmp('filter_form').getForm().getValues()['timespan'] 
```

但是当我将它运行到控制台时，我得到的不是所选按钮的值，而是单词`on`. 是什么赋予了？！我尝试了几种不同的 getValues、getForm 等组合，但我总是以`on`or `true`or结尾`false`。这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:41:51.670

尝试设置`inputValue`收音机的属性。这是应该进入生成的输入元素的 value 属性的值，并且在作为表单的一部分提交时应该用作参数值。

```
{
        xtype          : 'radiofield',
        name           : 'timespan',
        inputValue     : '30',
        hideEmptyLabel : false,
        boxLabel       : '30 days'
} 
```

那么它可以被访问为

```
Ext.ComponentQuery.query('[name=timespan]')[0].getGroupValue(); 
```

参考[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Radio-cfg-inputValue) [getGroupValue](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Radio-method-getGroupValue)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T17:59:55.763

弄清楚了！原来我的 extjs 示例代码有错误！

我`value`改为`inputValue`. 取自 Sencha Docs，`inputValue`是：

> 应该进入生成的输入元素的 value 属性的值，并且在作为表单的一部分提交时应该用作参数值。默认为：“开”

啊哈！！因为我没有指定“真实”值，所以它默认为`on`.

使用 extjs 示例/示例代码时要小心！

# javascript - 更改 IP 地址的输入框

> ID：12304612
> 
> 赞同：2
> 
> 时间：2012-09-06T16:41:10.963
> 
> 标签：javascript, html, css

我正在尝试为 IP 地址、广播和子网创建一个输入字段。输入用于更改服务器的 ip。它是一个内部网站。

我想这样做，以便用户获得一个输入框，其中将句点硬编码到文本框中。这样，当他们开始输入时，他们只需要输入数字并能够跳到 ip 的下一部分。或者如果用户输入 3 个字符，它会自动将他发送到 ip 的下一部分。

我不知道这是否只能使用 html 和 css 完成，或者这是否更像是一个 javascript 应用程序。

[http://jsfiddle.net/3F2gM/1/](http://jsfiddle.net/3F2gM/1/)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:03:31.740

[jQuery IP 插件](http://mlntn.com/2009/12/30/jquery-ip-address-plugin/)在您的情况下也很有用

[工作演示](http://mlntn.com/demos/jquery-ipaddress/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:47:38.130

您可以使用[遮罩插件](http://digitalbush.com/projects/masked-input-plugin/)- [**DEMO**](http://jsfiddle.net/3F2gM/3/)

```
jQuery(function($){
   $("input").mask("9?99.9?99.9?99.9?99", {placeholder:" "});
}); 
```

# android - 如何解码样本大小不等于 2 次方的位图？

> ID：12304621
> 
> 赞同：4
> 
> 时间：2012-09-06T16:41:46.347
> 
> 标签：android

简单的例子：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = scale;
Bitmap bmp = BitmapFactory.decodeStream(is, null, opts); 
```

当我传递`scale`的值不等于 2 的幂时，位图仍按最接近的 2 值的幂进行缩放。例如，如果由于某种原因，`scale = 3`实际比例变为。`2`也许是因为我正在使用硬件加速？

无论如何，如何在不为完整位图分配内存的情况下通过非 2 次方值缩放位图？

PS我知道，使用二的幂要快得多，但在我的情况下，时间并不是那么重要，我需要按提供的比例**精确**缩放图像（否则它变得太大或太小） - 我正在使用图像处理，所以大图像本身不是这样的问题（`ImageView`将其缩放到所需的大小），但是例如应用一些过滤器需要额外的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:10:32.377

如果您阅读以下文档[`inSampleSize`](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)：

> 注意：解码器将尝试满足此请求，但生成的位图可能具有与所请求的尺寸不同的尺寸。此外，2 的幂通常更快/更容易让解码器兑现。

您不能保证确切的尺寸。由于内存听起来像是一个问题，我会使用您当前的方法使图像大于您需要的图像，但比源图像更适合您的内存要求。然后使用不同的方法，比如[`Bitmap.createScaledBitmap`](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)让它达到你的确切尺寸。

# xslt - 用 **** 替换 XML 中字符串的所有实例

> ID：12304622
> 
> 赞同：1
> 
> 时间：2012-09-06T16:41:50.537
> 
> 标签：xslt, xslt-2.0

我有一个需要过滤出 XML 中的特定数据的 XSL。

在我的 XML 中的某个地方会有一个节点，例如：

`<id root="2.16.840.1.113883.3.51.1.1.6.1" extension="9494949494949" />`

我在下面的 XSL 删除了**扩展**节点并向节点添加了**nullFlavor="MSK"**。

我现在需要做的是从扩展节点获取值，并在整个 XML 文档中搜索该值，并将其替换为*** *。

但我不知道如何获取**扩展**属性，并在 XML 中找到该值的所有实例（它们可能隐藏在文本和内部属性中）并将它们转换为*** * (4 *)。

下面的例子只是一个例子。我不能对 XSL 进行硬编码以查看特定节点，它需要查看 xml 中的所有文本/属性文本（原因是有 5+ 个不同版本的 XML 将应用于此）。

我需要在节点中找到扩展，然后从 XML 的其余部分替换（真正删除）该值。我正在寻找适合所有消息的 1 解决方案，因此全局搜索-> 擦除扩展值。

例子：

```
 <identifiedPerson classCode="IDENT">
                <id root="2.16.840.1.113883.3.51.1.1.6.1" extension="9494949494949" displayable="true" />
                <addr use="PHYS">
                    <city>KAMLOOPS</city>
                    <country>CA</country>
                    <postalCode>V1B3C1</postalCode>
                    <state>BC</state>
                    <streetAddressLine>1A</streetAddressLine>
                    <streetAddressLine>2A</streetAddressLine>
                    <streetAddressLine>9494949494949</streetAddressLine>
                    <streetAddressLine>4A</streetAddressLine>                        
                </addr>
                <note text="9494949494949 should be stars"/> 
```

应该是（下面的 XSLT 已经用匹配的 OID 屏蔽了节点中的扩展）。

```
 <identifiedPerson classCode="IDENT">
                <id root="2.16.840.1.113883.3.51.1.1.6.1" nullFlavor="MSK" displayable="true" />
                <addr use="PHYS">
                    <city>KAMLOOPS</city>
                    <country>CA</country>
                    <postalCode>V1B3C1</postalCode>
                    <state>BC</state>
                    <streetAddressLine>1A</streetAddressLine>
                    <streetAddressLine>2A</streetAddressLine>
                    <streetAddressLine>****</streetAddressLine>
                    <streetAddressLine>4A</streetAddressLine>                        
                </addr>
                <note text="**** should be stars"/> 
```

任何帮助，将不胜感激。

我能够使用 XSL 2.0

我有当前的 XSL.IT 工作正常。它匹配根为 '2.16.840.1.113883.3.51.1.1.6.1' 的任何标签，杀死所有属性并添加 nullFlavor="MSK"。但是，这不会在整个 XML 中搜索相同的 #。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:param name="attrToKeep" select="'root'" />

    <xsl:template match="* | node()">
      <xsl:copy>
        <xsl:apply-templates select="node()|@*" />
      </xsl:copy>
    </xsl:template>

    <xsl:template match="@*">
      <xsl:choose>
        <xsl:when test="../@root = '2.16.840.1.113883.3.51.1.1.6.1'">
          <xsl:copy-of select=".[contains($attrToKeep, name())]" />     
          <xsl:attribute name="nullFlavor">MSK</xsl:attribute>
          <!-- Need some way to use the value found in this node and hide the extension -->
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy-of select="." />
        </xsl:otherwise>
      </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:03:25.043

尝试使用变量来保存要替换的文本的值。像这样：

```
<xsl:variable
    name="rootVar"
    select="//*[@root = '2.16.840.1.113883.3.51.1.1.6.1']/@extension" /> 
```

然后你应该能够使用该`replace`功能来替换它们。

```
<xsl:template match="'//@*' | text()">
    <xsl:sequence select="replace(., $rootVar, '****')"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:40:15.323

XSLT 2.0 样式表

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:param name="replacement" select="'****'"/>

  <xsl:param name="new" select="'MKS'"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="identifiedPerson">
    <xsl:copy>
      <xsl:apply-templates select="@* , node()">
        <xsl:with-param name="to-be-replaced" select="id/@extension" tunnel="yes"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="identifiedPerson//text()">
    <xsl:param name="to-be-replaced" tunnel="yes"/>
    <xsl:sequence select="replace(., $to-be-replaced, $replacement)"/>
  </xsl:template>

  <xsl:template match="identifiedPerson//@*">
    <xsl:param name="to-be-replaced" tunnel="yes"/>
    <xsl:attribute name="{name()}" namespace="{namespace-uri()}" select="replace(., $to-be-replaced, $replacement)"/>
  </xsl:template>

  <xsl:template match="identifiedPerson/id">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:attribute name="nullFlavor" select="$new"/>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="identifiedPerson/id/@extension"/>

</xsl:stylesheet> 
```

变换

```
<identifiedPerson classCode="IDENT">
        <id root="2.16.840.1.113883.3.51.1.1.6.1" extension="9494949494949" displayable="true" />
        <addr use="PHYS">
            <city>KAMLOOPS</city>
            <country>CA</country>
            <postalCode>V1B3C1</postalCode>
            <state>BC</state>
            <streetAddressLine>1A</streetAddressLine>
            <streetAddressLine>2A</streetAddressLine>
            <streetAddressLine>9494949494949</streetAddressLine>
            <streetAddressLine>4A</streetAddressLine>                        
        </addr>
        <note text="9494949494949 should be stars"/>
</identifiedPerson> 
```

用 Saxon 9.4 进入

```
<?xml version="1.0" encoding="UTF-8"?><identifiedPerson classCode="IDENT">
                <id root="2.16.840.1.113883.3.51.1.1.6.1" displayable="true" nullFlavor="MKS"/>
                <addr use="PHYS">
                    <city>KAMLOOPS</city>
                    <country>CA</country>
                    <postalCode>V1B3C1</postalCode>
                    <state>BC</state>
                    <streetAddressLine>1A</streetAddressLine>
                    <streetAddressLine>2A</streetAddressLine>
                    <streetAddressLine>****</streetAddressLine>
                    <streetAddressLine>4A</streetAddressLine>
                </addr>
                <note text="**** should be stars"/>
        </identifiedPerson> 
```

因此，对于示例，它解决了我认为的那个问题。我不确定是否可以在该示例周围有更多上下文，以及您是否也想更改`identifiedPerson`元素之外的值或不想更改它们（上面的样式表确实如此）。如果还需要更改其他元素，请考虑发布更长的输入和想要的结果样本来说明并解释是什么决定了要替换的值所在的节点。

[编辑] 根据您的评论，我调整了样式表，它现在有一个参数来传递一个 id（例如），然后它查找具有传入 id 值`2.16.840.1.113883.3.51.1.1.6.1`的属性的任何名称的元素，并替换找到的属性值在文档中找到的所有属性和所有文本节点中。此外，一个属性被添加到具有 id 的元素中，并且它的属性被删除。`root``extension``nullFlavor``extension`

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:param name="root-id" select="'2.16.840.1.113883.3.51.1.1.6.1'"/>
  <xsl:variable name="to-be-replaced" select="//*[@root = $root-id]/@extension"/>

  <xsl:param name="replacement" select="'****'"/>

  <xsl:param name="new" select="'MKS'"/>

  <xsl:template match="comment() | processing-instruction()">
    <xsl:copy/>
  </xsl:template>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:apply-templates select="@* , node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:sequence select="replace(., $to-be-replaced, $replacement)"/>
  </xsl:template>

  <xsl:template match="@*">
    <xsl:attribute name="{name()}" namespace="{namespace-uri()}" select="replace(., $to-be-replaced, $replacement)"/>
  </xsl:template>

  <xsl:template match="*[@root = $root-id]">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:attribute name="nullFlavor" select="$new"/>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*[@root = $root-id]/@extension"/>

</xsl:stylesheet> 
```

# java - AtomicInteger 等原子包类如何工作

> ID：12304624
> 
> 赞同：10
> 
> 时间：2012-09-06T16:41:57.107
> 
> 标签：java, multithreading

我已经读过使用原子包类使我们能够进行线程安全，锁定更少的编码。但我不太确定 atomic 包的类中的方法如何在不使用锁或任何同步关键字的情况下提供线程安全。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T16:45:07.663

他们使用非常低级的指令，例如[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)，以及[sun.misc.Unsafe](http://www.docjar.com/html/api/sun/misc/Unsafe.java.html)类中的多种其他方法。

基本上，类似的方法调用`compareAndSwap()`将对应一个独特的处理器指令，从而消除了许多多线程问题。

# c++ - 防止调用类内数组的默认构造函数

> ID：12304629
> 
> 赞同：2
> 
> 时间：2012-09-06T16:42:09.637
> 
> 标签：c++, arrays, initialization

在编写偏移数组类时（您的 idx 从假设 100 到 1000，因此您创建的类考虑了这一点，而不会浪费数组中的前 100 个插槽）我遇到了一个问题。
如何初始化具有 C 元素数组的类（问题是 T 没有 def 构造函数）。基本上我希望阵列完全没有启动。例子：

```
class MyClass
{
    MyClass(int i)
    {

    }
};
template <typename T, size_t n, size_t offset>
struct offsetedIdxArray
{
    T data[n];// error line : error C2512: 'MyClass' : no appropriate default constructor available
    offsetedIdxArray()
    {

    }
    T& operator [](size_t pos)
    {
        return data[(pos-offset)];
    }

}; 
```

用法：

```
offsetedIdxArray<MyClass, 1024,offset> oia; 
```

制作 def 构造函数不是选项，因为我使用的类实际上是库类。

**编辑：** 与此处描述的问题无关，但事实证明我宝贵的库类没有复制 ctor，只是移动 ctor，所以我不得不使用 unique_ptr 的向量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T16:51:29.027

要获得静态大小的未初始化存储部分，您可以使用对齐存储的“无类型”缓冲区，例如`std::aligned_storage<sizeof(T[n]), alignof(T)>::type`在 C++11 中（在 C++03 中，您需要使用 a`char[sizeof(T[n])+something]`并手动更正对齐，或使用`char[sizeof(T[n])]`和编译器扩展来指定对齐方式）。

这意味着对构造函数使用placement new，而显式析构函数调用销毁。您可以跟踪该存储的哪些部分有对象（因此需要销毁）以及哪些部分没有对象（并且不能调用析构函数）。当客户端请求一个根本没有初始化的元素（在它应该在的地方没有对象）时，你也可以满足你的需求。

另一种方法是使用 s 数组`boost::optional`，然后您不必关心破坏，只需将新元素分配给它们各自的索引即可。

# flash - Internet Explorer 中 iframe 和框架集中的 Flash 影片行为不正确

> ID：12304635
> 
> 赞同：0
> 
> 时间：2012-09-06T16:42:33.583
> 
> 标签：flash, internet-explorer, iframe, hashchange, deep-linking

我正在调查 Internet Explorer 9 中放置在 HTML 框架集（或 iframe）中的 Flash 电影的奇怪行为问题。如果打开 index.html（[http://melnishyn.narod.ru/ppt2swf/index.html](http://melnishyn.narod.ru/ppt2swf/index.html)）电影短时间显示其第一帧，然后跳转到空白帧。

**索引.html：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01Frameset//EN"
    "http://www.w3.org/TR/html4/frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Presentation</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    </head>
    <body>
        <iframe src='frame.html' width="400" height="300">
    </body>
</html> 
```

直接打开 frame.html ( [http://melnishyn.narod.ru/ppt2swf/frame.html](http://melnishyn.narod.ru/ppt2swf/frame.html) ) 时，电影正确显示，但是我注意到当我更改电影的帧时（通过其内置的导航按钮或鼠标单击），它以某种方式将哈希添加到 url（仅在 IE 中），使其变为[http://melnishyn.narod.ru/ppt2swf/frame.html#Slide1](http://melnishyn.narod.ru/ppt2swf/frame.html#Slide1)

**框架.html：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01Frameset//EN"
    "http://www.w3.org/TR/html4/frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Frame</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <script src="swfobject.js" type="text/javascript"></script>
        <script type="text/javascript">
            swfobject.embedSWF("Holidays.swf", "FlashContainer", "400", "300", "10.2.0", "playerProductInstall.swf", {}, {width:'100%', height:'100%', allowScriptAccess: 'always'}, {});
            swfobject.createCSS("#FlashContainer", "display:block;text-align:left;");
        </script>
    </head>
    <body>
        <div id="FlashContainer"></div>
    </body>
</html> 
```

在其他浏览器（Opera 12 和 Firefox 14）中一切正常。

这部电影是由转换器从演示文稿（MS Power Point 的 ppt 文件）制作的，所以我无法访问它的源代码（除了反编译它）。

我正在考虑两种可能的解决方法——一种是使用包装器 swf，第二种是使用 javascript setTimeout 通过 GotoFrame 方法不断地将电影设置为所需的幻灯片。然而，这两种解决方法都是不受欢迎的。

有没有更好的解决方案？

# c - RASDIAL APIS 中的按位屏蔽问题

> ID：12304636
> 
> 赞同：0
> 
> 时间：2012-09-06T16:42:34.343
> 
> 标签：c, winapi, ras, dial-up

这个问题是关于 Rasdial 和 pbk 文件的。我正在使用“rassetentryproperties”更新 pbk 文件并通过“rasdialdlg”拨号。

下面的标志决定了 pbk 文件的参数，而这些参数又对拨号连接的属性负责。我将标志预设为：

```
RasEntry.dwfOptions = 0x00000000;
RasEntry.dwfOptions2 = 0x00000000; 
```

尝试如下设置 Flag1 和 Flag2。

```
RasEntry.dwfOptions |= (Set Flag1 | Set Flag2) 
```

但是，我的 pbk 文件条目实际上并没有像我上面设置的那样设置。

此外，对于相同的代码，Win7 pbk 和 win xp pbk 是不同的。我哪里错了？

代码示例供参考：

```
BOOL Create_Phone_Book ( LPTSTR DeviceName ) {

    DWORD regError;
    TCHAR DeviceName[100];

    if ( _tcscpy ( DeviceName, DeviceName ) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS );
    } else {
        Slog ( TEXT ("Strcpy Failed To copy deviceName to DeviceName"), NOLASTERROR);
        return FALSE;
    }

    RASENTRY RasEntry;
    DWORD cb;
    RASDIALPARAMS RasDialParams;

    memset((LPTSTR)&RasEntry, 0, sizeof(RASENTRY)); 

    RasEntry.dwSize = sizeof(RASENTRY);
    cb = sizeof(RASENTRY);
    regError = RasGetEntryProperties (NULL, TEXT (""), &RasEntry, &cb, NULL, NULL);

    if ( regError == ERROR_SUCCESS ) {
        Slog ( TEXT ("RasGetEntryProperties Success"), APISUCCESS );
    } else {
        RAS_ErrorHandler ( regError );
        return FALSE;
    }

    RasEntry.dwfOptions = 0x00000000;
    RasEntry.dwfOptions2 = 0x00000000;

    RasEntry.dwfOptions |= (  RASEO_IpHeaderCompression | RASEO_ModemLights |RASEO_SwCompression | 
    RASEO_ShowDialingProgress | RASEO_NetworkLogon | RASEO_DisableLcpExtensions );

    RasEntry.dwfOptions2 |= ( RASEO2_UseGlobalDeviceSettings | RASEO2_Internet );

    if ( _tcscpy ( RasEntry.szDeviceType,  RASDT_Modem ) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS );
    } else {
        Slog ( TEXT ("Strcpy Failed copy RASDT_MODEM to RasEntry.szDeviceType"), NOLASTERROR);
        return FALSE;
    }

    if ( _tcscpy ( RasEntry.szDeviceName, DeviceName ) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS );   
    } else {
        Slog ( TEXT ("Strcpy Failed copy DeviceName to RasEntry.szDeviceName"), NOLASTERROR);
        return FALSE;   
    }

    regError = RasSetEntryProperties( NULL , Dial_Up_Name, &RasEntry, sizeof(RasEntry),NULL, 0);

    if ( regError == ERROR_SUCCESS ) {
        Slog ( TEXT ("RasSetEntryProperties Succeeded"), APISUCCESS);
    } else {
        RAS_ErrorHandler ( regError );
        return FALSE;
    }

    memset((LPTSTR)&RasDialParams, 0, sizeof(RasDialParams));

    RasDialParams.dwSize = sizeof(RASDIALPARAMS);

    if ( _tcscpy (RasDialParams.szEntryName, Dial_Up_Name ) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS);
    } else {
        Slog ( TEXT ("Strcpy Failed Copy Dial_Up_Name to RasDialParams.szEntryName"), NOLASTERROR);
        return FALSE;
    }
    if ( _tcscpy (RasDialParams.szUserName, TEXT ("")) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS);    
    } else {
        Slog ( TEXT ("Strcpy Failed Copy "" to RasDialParams.szUserName"), NOLASTERROR);
        return FALSE;   
    }

    if ( _tcscpy (RasDialParams.szPassword, TEXT ("")) != NULL ) {
        Slog ( TEXT ("Strcpy Success"), APISUCCESS);    
    } else {
        Slog ( TEXT ("Strcpy Failed Copy "" to RasDialParams.szPassword"), NOLASTERROR);
        return FALSE;
    }

    regError = RasSetEntryDialParams ( NULL, &RasDialParams, FALSE);
    if ( regError == ERROR_SUCCESS ) {
        Slog ( TEXT ("RasSetEntryDialParams Success"), APISUCCESS );
    } else {
        RAS_ErrorHandler ( regError );
        return FALSE;
    }

return TRUE;

} 
```

更新 1：通常，我需要根据需要创建拨号连接。请查看随附的屏幕截图。

![在此处输入图像描述](../Images/44ce239f9f7c270424bad3cb1811dd5c.png)

如快照所示，我必须设置和重置许多参数（设置 - 连接时显示进度，重置 - 提示 UN 和 PW）。这两个标志用于通过“或”设置和重置我们想要的任何内容 RasEntry.dwfOptions
RasEntry.dwfOptions2

所以我在我的代码中做的是：

重置标志：

```
RasEntry.dwfOptions = 0x00000000;

RasEntry.dwfOptions2 = 0x00000000; 
```

并设置：

```
 RasEntry.dwfOptions |= (  RASEO_IpHeaderCompression | RASEO_ModemLights  
                           |RASEO_SwCompression | RASEO_ShowDialingProgress |  
                            RASEO_NetworkLogon | RASEO_DisableLcpExtensions ); 
```

因此，除上述之外的其余标志将保持未设置。

现在的问题是，无论我在上述步骤中设置什么，实际上都没有在拨号连接中设置。换句话说，即使我在代码中设置了一些参数。

我应该怎么做才能摆脱我的问题？

# playframework - 播放 application.conf - 测试配置

> ID：12304638
> 
> 赞同：3
> 
> 时间：2012-09-06T16:42:37.137
> 
> 标签：playframework, playframework-1.x

在 Play *application.conf*中，我有*默认*值`%test`、`%stage`和`%prod`值：

```
%stage.application.mode=prod
%prod.application.mode=prod
%test.application.mode=test

#default values
property=someValue

%test.property=testValue

%stage.property=stageValue

%prod.property=prodValue 
```

我无法更改这些，因为它们是在将应用程序部署到相应环境时使用的。

但是，我需要能够在测试模式下启动 Play，以便在本地机器上进行单元测试，其设置与 %test 中的设置不同。

有没有办法添加另一个测试配置，比如使用这些配置`%unittest`在测试模式下开始播放（*播放测试*）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:28:05.320

它实际上是相反的：

你定义

`%test-unit.application.mode=dev`

**重要提示：**前缀必须是`test-`

并设置像

`%test-unit.property=testValue`

最后，您需要在命令行中设置 Play 服务器的“id”：

`$ play id`

在这个例子中，它是`test-unit`.

参考：[http ://www.playframework.org/documentation/1.2.5/guide11](http://www.playframework.org/documentation/1.2.5/guide11)

# visual-studio-2010 - 链接文件的 MSBuild 错误

> ID：12304645
> 
> 赞同：1
> 
> 时间：2012-09-06T16:42:51.347
> 
> 标签：visual-studio-2010, msbuild

当我使用 msbuild 时，出现以下错误：

CS2001 找不到源文件。

我注意到我得到这个错误的唯一文件被用作文件的链接引用，所以这可能是问题所在。任何想法是如何让他们建立？

我应该补充一点，我能够毫无问题地在 Visual Studio 中构建解决方案。

大家好！只想让关心的人知道问题出在哪里。正如我在评论中所说，这是一个长度问题。我将路径更改为我的 c 驱动器，一切正常。感谢所有花时间为我看这个的人。我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:18:29.600

只想让关心的人知道问题出在哪里。正如我在评论中所说，这是一个长度问题。我将路径更改为我的 c 驱动器，一切正常。感谢所有花时间为我看这个的人。我很感激。

# java - System.getenv 没有得到 ~/.bash_profile 中定义的变量

> ID：12304647
> 
> 赞同：9
> 
> 时间：2012-09-06T16:42:55.920
> 
> 标签：java, linux, bash

这是文件中的一行 ~/.bash_profile

`export MESSAGE="Hello World"`

我想`MESSAGE`在java中访问系统变量。

`System.getenv("MESSAGE");`不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:50:37.097

.bash_profile 文件仅用于登录 shell。如果您的 java 进程是从不是登录 shell 的 shell 中生成的（例如`#!/bin/sh`顶部带有 a 的脚本），那么它将不会读取它（尽管它可能仍会从环境中继承 MESSAGE ，具体取决于您的运行方式）。

另请注意，对于不是“登录”shell 的交互式 shell，也不会运行 .bash_profile，因此即使有 shell 提示，也不能依赖它运行。为此，人们通常使用为所有交互式 shell 提供的 .bashrc。

如果您想在所有 Bourne shell 衍生工具中设置一个变量，无论它们是否是交互式的，请将其放在 .profile 和 .bashrc 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:23:11.283

对于拥有 .profile（对于旧的 Bourne shell）的用户来说，这实际上变得更加有趣，它会被 .bash_profile 自动读取（提供兼容性）。在任何一种情况下，环境变量都只会在*登录*shell 启动时读取一次，并且所有子 shell 都会免费继承这些变量。.bashrc 用于依赖于 tty 的事物和函数等不可继承的事物（我认为，如果设置了旧的 sh，则使用 $ENV 用于类似的事物）。

您对 ~/.bash_profile 的使用看起来不错（尽管单引号比双引号更可靠，双引号允许一些替换）。确保您在编辑该文件和尝试测试之间退出并重新登录，或使用“.~/.bash_profile”（没有引号并注意前导点和空格，因为点是此处的命令）。

[http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)上的文章涵盖了一些好东西，比如在 ~/.bash_profile 末尾使用“.~/.bashrc”（除了你应该使用 -r，而不是 -f)。关于在你的 .bashrc 中使用 export 的评论是错误的，你不应该*这样*做，原因有两个：（1）一个非常微不足道的性能损失，（2）你执行的某些命令很有可能不会获得环境变量 -特别是从您的窗口管理器菜单和其他任何地方都没有出现实际命令提示符的地方产生的东西。

最后，确保 $MESSAGE 确实存在于您的环境中 - 查看“env”命令的输出 - 如果它不存在，Java 进程将看不到它，除非它在内部创建它并将其存储在自己的环境变量的内部副本。

另请注意，如果您在 .profile 中设置环境变量，请使用以下语法：

变量=值；导出 VAR

...因为旧的 sh shell 不支持“export VAR=VALUE”。如果我没记错的话，在一堆这些之前使用 set -e 并在之后使用 set +e 可以完全消除使用“导出”的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:49:19.267

我建议您按照上面的建议使用 echo $MESSAGE 来测试您的环境变量是否确实是“定义的”。
此外，更改 bash_profile 文件不会影响您当前的 shell，
您必须使用“source”才能影响您当前的 shell。
我还建议阅读[这篇](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)关于 bashrc 和 bash_profile 之间差异的文章。
也许您应该在 bashrc 中定义 EXPORT？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-28T11:25:42.830

另一个要看的地方：*/etc/environment*（这可能会否决/替换通过 IDE 打开的 shell 中的 .bashrc 或 .bash_profile）

# c# - Style.TargetType、对话框和子类化 WPF 控件

> ID：12304649
> 
> 赞同：4
> 
> 时间：2012-09-06T16:42:59.387
> 
> 标签：c#, wpf, xaml, wpf-controls, themes

假设我想将应用程序中所有 StackPanel 的背景设置为某种颜色。我的 App.xaml 中有以下内容：

```
<Style TargetType="StackPanel">
    <Setter Property="Background" Value="#222222" />
</Style> 
```

这只有在 StackPanel 是纯 StackPanel 时才有效，并且 StackPanel 必须在 App 下。但是，弹出对话框中的 StackPanel 或 StackPanel 的子类的背景颜色不会因此而改变。例如：

```
public class MyStackPanel : StackPanel { ... } 
```

解决子类化问题的一种方法是扩展 UserControl，并将 StackPanel 嵌入到 UserControl 中。只要您不需要访问 StackPanel 的属性，就可以。

任何的想法？

进行 WPF 主题化的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:19:41.640

您可以为继承自基类样式的自定义类创建隐式样式

```
<Style TargetType="StackPanel">
    <Setter Property="Background" Value="#222222" />
</Style>

<Style TargetType="{x:Type local:MyStackPanel}" 
       BasedOn="{StaticResource {x:Type StackPanel}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:25:02.093

重写 WPF 控件不是一个好习惯。正如您所提到的，您需要为此设计一个 UserControl 后代。

您可以将 StackPanel（在您的 UserControl 内）的属性绑定到您的 UserControl 后代的属性，您可以将其添加到代码中或 UserControl 的内置属性中。

```
<UserControl DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel Background="{Binding Path=Background}">
    ...
    </StackPanel>
</UserControl> 
```

# perl - URI::URL 未获取参数

> ID：12304655
> 
> 赞同：1
> 
> 时间：2012-09-06T16:43:20.413
> 
> 标签：perl, url, module

```
# The url I'm on: https://development.cherrylanekeepsakes.com/cgi-bin/employees.cgi?action=edit_timeclock_dashboard&id=80&start_date=2012-09-01&end_date=2012-09-16&print_view=1
use URI::URL;
use Data::Dumper;
my $url = URI::URL->new( '' . $cgi->new->url(-path_info => 1, -query => 1) );
warn Dumper($url->params('print_view')); 
```

它什么也没给我。我究竟做错了什么？这似乎是一个非常简单的任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:19:06.843

您使用[URI::URL](http://search.cpan.org/perldoc?URI%3a%3aURL)而不是[URI](http://search.cpan.org/perldoc?URI)是否有原因？这是一个过时的模块，仅为向后兼容而存在。它甚至没有记录在案，所以我什至无法确认这`params`是假设做你认为它做的事情。

以下是使用替换 URI::URL 的模块的解决方案。它甚至是同一发行版的一部分。

```
use URI qw( );
my $url = URI->new('https://...');
my %query_form = $url->query_form();
say $query_form{print_view}; 
```

或者更好的是，

```
use URI             qw( );
use URI::QueryParam qw( );
my $url = URI->new('https://...');
say $url->query_param('print_view'); 
```

注意：要将 的值之一分配给`query_param`标量，您需要使用括号，如下所示：

```
my ($print_view) = $url->query_param('print_view'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:25:58.587

根据@ikegami 的建议，我现在使用 URI，而不是过时的 URL::URI。

```
# https://development.cherrylanekeepsakes.com/cgi-bin/employees.cgi?action=edit_timeclock_dashboard&id=80&start_date=2012-09-01&end_date=2012-09-16&print_view=1
use URI;
use URI::QueryParam;

my $url = URI->new('' . $cgi->new->url(-path_info => 1, -query => 1));

warn $url->query_param('print_view'); # prints 1 as expected 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:46:34.323

您的代码不显示任何内容的原因是您的 URL 没有`param`字段 - 只有一组`query`字段。

URL 大致如下

```
scheme://host:port/path1/path2;param1;param2?query1=A&query2=B#fragment 
```

并且您的网址中没有分号

# admob - 如何从 Adview 获取特定广告进行编码？

> ID：12304656
> 
> 赞同：0
> 
> 时间：2012-09-06T16:43:19.647
> 
> 标签：admob

我在我的应用程序中使用 AdMob。对我来说，使用 AdMob 的方式不仅是在我的应用程序中展示广告，而且还可以通过代码了解究竟展示了什么广告。如何获取代码中AdView的内容，以便实时知道展示的是什么广告？AdMob 是否提供此类 API？我一直在寻找它，但还没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:46:01.787

遗憾的是，除非您将 DFP 广告管理系统与 AdMob SDK 一起使用，否则目前无法使用 AdMob API 获取广告内容。

# css - 是否可以使用浏览器检查器检查 CSS3 动画关键帧？

> ID：12304662
> 
> 赞同：34
> 
> 时间：2012-09-06T16:43:46.433
> 
> 标签：css, browser, css-animations, web-inspector

现在，我遇到了一些利用 CSS3 关键帧样式动画的网站，并决定在我自己的网站上进行测试。然而，这给我带来了一个难题：通常在我向网站提交 CSS 文件之前，我会使用浏览器的检查器（`Ctrl+Shift+I`在 Chrome、Opera 和 FF 上；`F12`在 IE 中）在本地调整和更改 CSS 以查看我的内容最喜欢。但是，似乎无法使用浏览器检查器更改 CSS3 动画的关键帧！这对我来说是一个极大的障碍，因为它迫使我每次想要更改动画的任何细微差别时都提交一个 CSS 文件，这也会导致服务器延迟长达 15 分钟。**有什么方法可以使用浏览器检查器在本地更改 CSS3 动画关键帧？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-05-19T11:23:59.227

从 Chrome 50 开始，现在终于可以编辑 CSS 关键帧了。 [https://twitter.com/ChromeDevTools/status/694966453376675840](https://twitter.com/ChromeDevTools/status/694966453376675840) [![在此处输入图像描述](../Images/6c54a960b1082202542c15ca5eace2a7.png)](https://i.stack.imgur.com/zIx3l.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-14T02:18:56.117

Huzzah 万岁，万岁！今天完全有可能！Chrome Dev Tools 添加了一个动画工具！只需打开开发工具并单击“更多工具”按钮，然后单击“动画”，一整套很酷的工具可用于调试动画

![Chrome 开发工具“更多工具”图标 - 三个垂直堆叠的点，其中包含工具提示文本“更多工具”](../Images/1772bbe3723c0149d97f0625bd74cc3e.png)
![按“更多工具”按钮产生的菜单，显示选中的“动画”选项](../Images/f691af075829ba2f216a1fff87a10205.png)

![谷歌浏览器，打开 BenLeggiero.me 并显示动画检查器。](../Images/63e4c5b7ae695a1934d7f4d324fc933d.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-08T11:19:27.300

**在 Chrome 上：**
- Ctrl+Shift+I
- 选择一个元素
- 右栏：单击 css 链接（例如 style.css:24）
- 现在您可以编辑 css 文件

注意：
- 您不能同时在右列和 css 文件中编辑 css
- 要重新触发动画，请删除 -webkit-animation:... 并将其添加回来

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-25T19:12:21.817

如果您想要更多控制权，请下载 Chrome Canary（我相信需要 64 位）。有一个小的“播放”按钮和时间调整，因此您可以放慢动画速度并随时暂停。很酷！

![说明性屏幕截图](../Images/42f163f651ec7da3614660436cb4347c.png) [教学视频](http://tjohns.co/web-development/34-google-chrome)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-10T23:25:01.397

很快就会通过 Chrome 开发工具的动画时间线。

到目前为止只有这个预告视频：[https ://www.youtube.com/watch?v=U9xfYbKxosI](https://www.youtube.com/watch?v=U9xfYbKxosI)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-22T17:14:32.897

由于大多数选项已被移动或更改，因此在 Chrome 上获得此功能需要一段时间。

这是通过以下屏幕截图所示的 4 个步骤在 chrome 上获取它的方法：

[![在此处输入图像描述](../Images/6b2e6ba928d16be88d5486dee269c446.png)](https://i.stack.imgur.com/Cawg6.png)

在Firefox（开发者版）上，有一个显眼的Animation Tab，如下图：

[![在此处输入图像描述](../Images/8027ccae3a3ad3345d1585cc03194bdc.png)](https://i.stack.imgur.com/9quj6.png)

# mysql - MySQL：合并表、运行 SELECT 并更新重复项

> ID：12304664
> 
> 赞同：0
> 
> 时间：2012-09-06T16:43:53.753
> 
> 标签：mysql, sql, merge, duplicates

我有以下三个表：

表 A：

```
id VARCHAR(32) | value VARCHAR(32) | groupId INT
abcdef         | myValue1          | 1
ghijkl         | myValue2          | 2
mnopqr         | myValue3          | 1 
```

表 B：

```
id VARCHAR(32) | value VARCHAR(32) | userId INT
abcdef         | myValue4          | 1
uvwxyz         | anotherValue      | 1 
```

表 C：

```
id VARCHAR(32) | someOtherColumns...
abcdef
ghijkl
mnopqr
...
uvwxyz 
```

表 A 和 B 用于 am:n 关联，因此两个表中的“id”列引用相同的字段（表 c 中的“id”列）。我想要做的是（例如）......选择表A中的所有条目`where groupId = 1`

`SELECT * FROM TableA WHERE groupId = 1`

并选择表 B 中的所有条目`where userId = 1`

```
SELECT * FROM TableB WHERE userId = 1 
```

这一切都没有问题......但是以下使选择语句变得困难：如何合并两个选择结果并替换第一个结果的值？例如：

选择表 A 中的所有条目，`where groupId = 1`我将得到 abcdef 和 mnopqr。当我选择表 B 中 userId = 1 的所有条目时，我还将获得 abdef（以及另外的 uvwxyz）。

现在，表 B 中 abcdef 的值应该替换表 A 的选择结果中的值。并且应该将 uvwxyz-entry 添加到结果中。

最后，我正在寻找一个生成下表的查询：

```
id VARCHAR(32) | value VARCHAR(32)
abcdef         | myValue4           -- myValue1 from the select-statement in tableA should be overwritten
mnopqr         | myValue2           -- from table A
uvwxyz         | anotherValue       -- from table B 
```

我希望有人知道如何做到这一点......提前感谢您的任何建议！顺便说一句......如果有机会使用一个（长）选择语句来实现这一点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:57:01.117

试试这个：

```
SELECT * FROM TableB WHERE userId = 1
UNION
SELECT * FROM TableA WHERE groupId = 1 
       and id not in (select id from TableB where userid = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:52:03.380

@rs 指出使用 UNION，这是必需的，因为 MySQL 没有 FULL 连接。

偏爱表 B 中的数据是 CASE 的选择：

```
select id, case when max(value_b) is not null then max(value_b) else max(value_a) end as final_value
from (
    select id, value as 'value_a', null as 'value_b' from tableA
    union
    select id, null, value from tableB
) ugh
group by 1; 
```

# android - libcurl 与 android 源代码构建

> ID：12304666
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:02.117
> 
> 标签：android, libcurl

我需要构建 libcurl 以使用 android ndk-build ，如链接 [porting libcurl on android with ssl support中提供的步骤](https://stackoverflow.com/questions/11330180/porting-libcurl-on-android-with-ssl-support)

在这里他们建议按照第一步中给出的编译androidi的源代码。是需要编译android源代码还是只编译curl代码就足够了？如果是这样，请提供正确的链接..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:54:06.990

curl 发行版中的[Android.mk](https://github.com/bagder/curl/blob/master/Android.mk)文件中描述了“全部构建”方法。其他方法在同一位置的[docs/INSTALL文件中进行了描述。](https://github.com/bagder/curl/blob/master/docs/INSTALL#L847)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-14T13:52:48.373

我只编译了代码，我从这里得到的代码：[https](https://github.com/gcesarmza/curl-android-ios) ://github.com/gcesarmza/curl-android-ios 然后我将 NDK 安装到 Eclipse 并为项目添加了 NDK 支持。

# cron - 如何在 crontab 中的命令之间添加时间等待

> ID：12304667
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:01.690
> 
> 标签：cron, sleep, crontab

我有一个 crontab，我在其中发出两个命令，我想在两个命令之间添加一个时间睡眠，如下所示：(command1 ; sleep ; command2)。

这可能吗？它是如何格式化的？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:27:28.220

任何连续的有效`shell`命令都可以。保持在一条线上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:09:06.433

The ``sixth'' field (the rest of the line) specifies the command to be run. The entire command portion of the line, up to a newline or % character, will be executed by /bin/sh or by the shell specified in the SHELL variable of the crontab file. - the crontab(5) man page

Essentially you already have the right base form, like: cmd1 ; sleep 60 ; cmd2 Any command, even complicated commands with loops and other logic should work, although you should be careful about which environment variables you might be relying on.

It's useful to run job in the near future to email the output of "env" to yourself just to check ;-)

For more complex stuff, create a shell script and have the crontab refer to it, like:

42 0 * * * $HOME/bin/daemon/cron-tmp-preen

# c++ - 模板化方法的继承

> ID：12304670
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:06.250
> 
> 标签：c++, templates, inheritance

我有一个关于继承和模板方法的问题。假设我有这两个类

```
class Base
{
public:
   template<typename T>
   void print(const T& s) {std::cout << "Base (templated) prints " << s << "\n";}
   virtual void print(int i) {std::cout << "Base prints " << i << "\n";}
};

class Derived : public Base
{
public:
   void print(int i) {std::cout << "Derived prints " << i << "\n";}
}

int main()
{
   Derived d;
   d.print(3);     // works fine
   std::string s = "hi";
   d.print(s);  // does not compile
   return 0;
} 
```

编译器告诉我''没有匹配函数调用'Derived::print(std::string&)''。但是从 Base 继承的 Derived 也应该允许调用模板方法 print(..)，不是吗？

如果我没有在派生类中定义方法“print”，事情也很奇怪，那么一切正常，编译器调用基类模板方法。

如果我也在派生类中定义模板方法，它也可以正常工作，它调用基类之一，但这对我来说似乎不正确......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:47:01.693

在派生类中声明函数会隐藏基类中具有相同名称的所有函数。您可以使用 using 声明取消隐藏它们：

```
class Derived : public Base
{
public:
    // Add this
    using Base::print;

    void print(int i) {std::cout << "Derived prints " << i << "\n";}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:45:48.137

这是一个标准的基名称 hide，与基类函数是模板这一事实完全无关。它可能是耶稣的第二次降临，编译器仍然会隐藏它。这是正常行为，旨在尝试保护派生类免受基类中意外更改的影响。

# gwt - WebDriver GWT TabPanel 问题

> ID：12304674
> 
> 赞同：6
> 
> 时间：2012-09-06T16:44:17.133
> 
> 标签：gwt, selenium, junit, webdriver, selenium-webdriver

我正在尝试为使用 TabPanel 的 GWT 应用程序创建 WebDriver 测试。在 IDE 中单击选项卡可以正常工作（它使用 x-path 来查找选项卡）但是我无法在 JUnit 测试中使选项卡单击工作。

所有元素都有一个 debugID，包括选项卡（尽管选项卡 ID 似乎在 IDE 中也不起作用）并且我继承了`com.google.gwt.user.Debug`. 我试图通过 IDE 默认的 Xpath 进行定位。

```
genericElement.findElement(By.xpath("//div[@id='gwt-debug-mainTabPanel']/div[2]/div/div[6]/div/div") 
```

我已经尝试过[文档中概述的代码](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TabPanel.html#onEnsureDebugId%28java.lang.String%29)

```
genericElement.findElement(By.id("gwt-debug-mainTabPanel-bar-tab6") 
```

我也尝试过`moveToelement`（`clickAt`不再支持）并单击，但也失败了（除非我误解了它）。我也想避免这种情况，因为这似乎是不好的做法。

```
 Actions builder = new Actions(driver);
 genericElement = driver.findElement(By.id("gwt-debug-mainTabPanel"));
 Action action = builder.moveToElement(genericElement,400, 370).click().build();
 action.perform(); 
```

> java.lang.UnsupportedOperationException：不支持移动到任意 X、Y 坐标。

我知道 GWT 和 Webdriver 相处得不太好——但我觉得这会有一个解决方案。任何人都可以提供任何帮助 - 有没有人实现了一个有效的 Webdriver 测试，他们在 GWT TabPanel 中单击一个选项卡？

**编辑**

我已经设法使用 Firebug 和 xpath 定位器定位节点（您可以添加 /..to 移动到父 gwt-TabLayoutPanelTabInner 或添加 /../.. 移动到祖父 gwt-TabLayoutPanelTabInner 并且它应该仍然工作 - 它在 IDE 中执行）

```
genericElement = driver.findElement(By.xpath("//div[contains(@class,'gwt-HTML') and contains(text(),'Users')]")); 
```

但是，单击不会更改为所需的选项卡 - 似乎是一个已知问题（可能不需要 moveToElement 和 click(genericElement) - 试一试）

```
Actions builder = new Actions(driver);
builder.moveToElement(genericElement).click(genericElement).build().perform(); 
```

[见第 3 节](http://java.dzone.com/articles/testing-gwt-apps-selenium-or)....这很有趣 :)

# xml - 是否有 VS2010 宏来删除 XML 文件中的所有注释

> ID：12304675
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:20.940
> 
> 标签：xml, visual-studio-2010, vba, visual-studio-macros

我想要一个 Visual Studio 宏来删除给定 XML 文件中的所有注释。例如，鉴于此：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!-- 
     Comment 1
-->
<config>
  <!-- Comment 2    -->
  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>
</config> 
```

我想得到这个：

```
<?xml version="1.0" encoding="UTF-8" ?>

<config>

  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>
</config> 
```

我搜索了执行此操作的编辑器和 VS 宏，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:00:06.367

我自己写了：

```
Sub macro1()
    DTE.ActiveDocument.Selection.StartOfDocument()
    Do While True
        DTE.ExecuteCommand("Edit.Find")
        DTE.Find.FindWhat = "<!--"
        DTE.Find.Target = vsFindTarget.vsFindTargetCurrentDocument
        DTE.Find.MatchCase = False
        DTE.Find.MatchWholeWord = False
        DTE.Find.Backwards = False
        DTE.Find.MatchInHiddenText = False
        DTE.Find.PatternSyntax = vsFindPatternSyntax.vsFindPatternSyntaxLiteral
        DTE.Find.Action = vsFindAction.vsFindActionFind
        If (DTE.Find.Execute() = vsFindResult.vsFindResultNotFound) Then
            Exit Do
        End If
        DTE.Find.FindWhat = "-->"
        If (DTE.Find.Execute() = vsFindResult.vsFindResultNotFound) Then
            Throw New System.Exception("vsFindResultNotFound")
        End If
        DTE.ExecuteCommand("Edit.SelectToLastGoBack")
        DTE.ActiveDocument.Selection.Delete()
        DTE.ActiveDocument.Selection.DeleteLeft(4)
    Loop
    MsgBox("Done")
End Sub 
```

# python-3.x - 计算字符串中的子字符串

> ID：12304677
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:39.277
> 
> 标签：python-3.x

假设我有 2 个字符串

```
M = "sses"
N = "assesses" 
```

我必须计算字符串 M 出现在字符串 N 中的次数

如果需要，我不允许使用任何导入或方法，仅循环和 range()。

```
M = "sses"
N = "assesses"
counter = 0
if M in N:
  counter +=1
print(counter) 
```

这还不够好，我需要循环遍历 N 并计算所有存在的 M 在这种情况下它是 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:53:03.207

```
def count(M, N):
    i = 0
    count = 0
    while True:
        try:
            i = N.index(M, i)+1
            count += 1
        except ValueError:
            break
    return count 
```

或者没有`str.index`：

```
def count(M, N):
    return sum(N[i:i+len(M)]==M for i in range(len(N)-len(M)+1)) 
```

不使用`sum`函数也一样：

```
def count(M, N):
    count = 0
    for i in range(len(N)-len(M)+1):
        if N[i:i+len(M)] == M:
            count += 1
    return count 
```

# php - 创建订单时使用 webhook、php 更新 MS SQL 服务器字段

> ID：12304681
> 
> 赞同：-1
> 
> 时间：2012-09-06T16:44:50.440
> 
> 标签：php, xml, shopify

好的，所以我通过来自 shopify webhook 测试的 webhook 在我的网络服务器的订单文件夹中获得了 order09-05-12-1346847709.xml 文件，该文件看起来像

..................................................... ..

```
<processing-method nil="true"></processing-method>
  <line-items type="array">
    <line-item>
      <requires-shipping type="boolean">true</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">5000</grams>
      <price type="decimal">199.99</price>
      <quantity type="integer">1</quantity>
      <sku>SKU2006-001</sku>
      <title>Sledgehammer</title>
      <product-id type="integer" nil="true"></product-id>
      <variant-id type="integer" nil="true"></variant-id>
      <vendor nil="true"></vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status nil="true"></fulfillment-status>
      <name>Sledgehammer</name>
      <variant-inventory-management nil="true"></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
    <line-item>
      <requires-shipping type="boolean">true</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">500</grams>
      <price type="decimal">29.95</price>
      <quantity type="integer">1</quantity>
      <sku>SKU2006-020</sku>
      <title>Wire Cutter</title>
      <product-id type="integer" nil="true"></product-id>
      <variant-id type="integer" nil="true"></variant-id>
      <vendor nil="true"></vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status nil="true"></fulfillment-status>
      <name>Wire Cutter</name>
      <variant-inventory-management nil="true"></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
  </line-items> 
```

..................................................... ……………………………………………………………………………………………………………………

我只需要选择“sku 和 qty”值，这样我就可以自动更新到我的 ms sql server 的数据我如何使用 php 来做到这一点我的意思是我知道如何使用 sqlsrv 连接到 sql server，但不知道 php 代码选择特定字段的值并将值放入 sql server

PLZ伙计们，我现在很绝望....

非常感谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:39:16.100

下面是一些 PHP 代码，用于获取XML 文档中每个项目的值`sku`和`quantity`值（这不是在 XML 文档中搜索特定信息的最佳/最好/最强大的方法，但它有效）。由于您没有告诉我们您希望如何将它们插入到您的数据库中，所以我不能做更多的事情。

[这](http://www.php.net/manual/en/book.dom.php)是有关 PHP 文档对象模型接口的文档，该接口允许操作 XML 文档。请看一看。

```
$dom = new DomDocument();
$dom->load('order09-05-12-1346847709.xml');
$itemList = $dom->getElementsByTagName('line-item');
foreach($itemList as $item) {
  $sku='';
  $qty='';
  foreach($item->childNodes as $child) {
    if ($child->localName == 'sku') {
      $sku = $child->textContent;
    }
    if ($child->localName == 'quantity') {
      $qty = $child->textContent;
    }
  }
  echo 'Item SKU: ' . $sku . '<br />';
  echo 'Item quantity: ' . $qty . '<br />';
  // cast to integer: intval($qty)
  echo '<br />';
} 
```

# css - 仅当光标指向文本时 IE 滚动

> ID：12304682
> 
> 赞同：1
> 
> 时间：2012-09-06T16:44:52.630
> 
> 标签：css, internet-explorer, scroll

我遇到了一个奇怪的问题。我有一个绝对位置和固定高度的 div，溢出设置为自动。里面是另一个div，它的高度更大。所以在所有浏览器中都会出现滚动条，在 Chrome、Firefox 和 IE7 中一切正常。但在 IE 8-9 中，只有当光标指向某些文本时，我才能用鼠标滚动。当它指向空白区域时，它不会响应鼠标滚动。有谁知道为什么会这样？我试图用这个错误创建示例，所以我稍后会在这里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:54:45.357

感谢您的回复。我已经设法解决了这个问题。我在我的应用程序中使用 jQuery UI 对话框和注册我使用了与[http://jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)中类似的标记 正如你所看到的他们`<form />`在他们的代码中使用标签，这个标签导致了我所有的麻烦。所以`<form />`从我的代码中删除后，滚动工作得很好。

# .net - 如何读取文件的单个字节

> ID：12304683
> 
> 赞同：0
> 
> 时间：2012-09-06T16:44:53.013
> 
> 标签：.net, compression, bytearray

我正在尝试确定文件是否已使用 GZip 协议压缩。

共识似乎是我需要读取文件的前两个字节，并检查它们是否等于`0x1f8b`. 我刚刚了解到这被称为幻数。

我如何（最好使用 .Net/C#，因为这是我的习惯）读取文件的各个字节？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:55:32.350

你可以试试这个...

您可能需要为 v 使用不同的变量类型，或者您可以转换 int ...

```
using (BinaryReader b = new BinaryReader(File.Open("file.bin", FileMode.Open)))
{
    int v = b.ReadByte();
    Console.WriteLine(v);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:49:51.897

读取文件的两个（第一个）字节的最简单方法是打开 FileStream，然后只读取两个字节：

```
FileStream fs = new FileStream( "D:\\path_to_file\file.ext", FileMode.Open);
int value = fs.ReadByte();
... 
```

当然，您应该检查文件是否存在，如果应用程序没有以足够的权限运行以读取文件，则捕获异常，完成后关闭流（访问文件）...

使用 FileStream 的方法可能更方便`Read`（它允许您一次读取多个字节）。请注意，此方法也有异步等效方法可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:49:45.950

通常在常见的 x86 中，char 是一种字节长的数据类型，因此读取文件的前两个字符就可以了。

# mysql - 从 MySQL 拉取与从文件系统拉取

> ID：12304684
> 
> 赞同：0
> 
> 时间：2012-09-06T16:45:03.410
> 
> 标签：mysql, database, performance, file, hosting

如果有 100 万并发用户访问一个查看不同页面的网站，这会导致更高的服务器负载（即，降低服务器速度）？

**从 MySQL 拉取**

*   获取 index.php?=page_id=1
*   获取 index.php?=page_id=2
*   获取 index.php?=page_id=etc...

或者

**从文件系统中拉取静态页面**

*   获取 page_1.html
*   获取 page_2.html
*   获取 page_etc...html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:57:53.427

开销越少越好，因此精简的 Web 服务器会更快。

我在很多网站上工作过，我们从数据库（每天、每小时等）生成静态 HTML 文件，因为页面不是动态的。

# jquery - jquery中bg颜色之间的淡入淡出？

> ID：12304688
> 
> 赞同：1
> 
> 时间：2012-09-06T16:45:11.587
> 
> 标签：jquery

我有一个 div，我需要在其中重复更改 4 种不同的颜色。因此，每隔 5 秒，它就会褪色到“在线”的下一个颜色，当所有 4 种颜色都显示出来时，它会重新开始。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:35:31.690

您可以将颜色数组、模运算符和 setTimeout 方法与 JQuery UI 中可用的颜色动画结合使用：

```
var colors = ["red", "orange", "yellow", "green", "blue"]
var i = 0;

$("#myDiv").css("background-color","red");

function changeColor()
{
    i++;
    i=i%5;
    $("#myDiv").animate({backgroundColor: colors[i]},1000);
    setTimeout(changeColor,2500);
}

changeColor(); 
```

小提琴样本：http: [//jsfiddle.net/johnkoer/8GGFM/26/](http://jsfiddle.net/johnkoer/8GGFM/26/)

# asp.net - 与常规 CLR 线程相比，为什么 IIS 线程如此珍贵？

> ID：12304691
> 
> 赞同：48
> 
> 时间：2012-09-06T16:45:17.867
> 
> 标签：asp.net, .net, iis, asynchronous

我正在[阅读](http://www.aaronstannard.com/post/2011/01/06/asynchonrous-controllers-ASPNET-mvc.aspx)ASP.NET MVC 中的 AsyncControllers。

似乎它们存在的唯一原因是可以保存 IIS 线程，而将长时间运行的工作委托给常规 CLR 线程，这似乎更便宜。

我在这里有几个问题：

*   为什么这些 IIS 线程如此昂贵，以证明为支持异步控制器而构建的整个体系结构是合理的？
*   我如何知道/配置在我的 IIS 应用程序池中运行了多少个 IIS 线程？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-06T18:10:37.130

ASP.NET processes requests by using threads from the .NET thread pool. The thread pool maintains a pool of threads that have already incurred the thread initialization costs. Therefore, these threads are easy to reuse. The .NET thread pool is also self-tuning. It monitors CPU and other resource utilization, and it adds new threads or trims the thread pool size as needed. You should generally avoid creating threads manually to perform work. Instead, use threads from the thread pool. At the same time, it is important to ensure that your application does not perform lengthy blocking operations that could quickly lead to thread pool starvation and rejected HTTP requests.

Disk I/O, web service calls, are all blocking. There are best optimized by using async calls. When you make an async call, asp.net frees your thread and the request will be assigned to another thread when the callback function is invoked.

To configure the number of threads you can set:

```
<system.web>
    <applicationPool maxConcurrentRequestsPerCPU="50" maxConcurrentThreadsPerCPU="0" requestQueueLimit="5000"/>
</system.web> 
```

Refer: [ASP.NET Thread Usage on IIS 7.5, IIS 7.0, and IIS 6.0](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)

These are the setting that [Microsoft best practices recommend](http://msdn.microsoft.com/en-us/library/ms998549.aspx):

*   **Set maxconnection to 12 * # of CPUs**. This setting controls the maximum number of outgoing HTTP connections that you can initiate from a client. In this case, ASP.NET is the client. Set maxconnection to 12 * # of CPUs.
*   **Set maxIoThreads to 100**. This setting controls the maximum number of I/O threads in the .NET thread pool. This number is automatically multiplied by the number of available CPUs. Set maxloThreads to 100.
*   **Set maxWorkerThreads to 100**. This setting controls the maximum number of worker threads in the thread pool. This number is then automatically multiplied by the number of available CPUs. Set maxWorkerThreads to 100.
*   **Set minFreeThreads to 88 * # of CPUs**. This setting is used by the worker process to queue all the incoming requests if the number of available threads in the thread pool falls below the value for this setting. This setting effectively limits the number of requests that can run concurrently to maxWorkerThreads - minFreeThreads. Set minFreeThreads to 88 * # of CPUs. This limits the number of concurrent requests to 12 (assuming maxWorkerThreads is 100).
*   **Set minLocalRequestFreeThreads to 76 * # of CPUs**. This setting is used by the worker process to queue requests from localhost (where a Web application sends requests to a local Web service) if the number of available threads in the thread pool falls below this number. This setting is similar to minFreeThreads but it only applies to localhost requests from the local computer. Set minLocalRequestFreeThreads to 76 * # of CPUs.

**Note**: The recommendations that are provided in this section are not rules. They are a starting point.

You would have to benchmark your application to find what works best for your application.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T17:00:00.507

IIS 线程取自默认线程池，默认情况下受处理器内核数量限制。如果此线程池队列被备份，IIS 将停止响应请求。通过使用异步代码，可以在异步操作发生时将线程池线程返回到池中，从而使 IIS 能够为更多请求提供整体服务。

另一方面，自己生成一个新线程并不使用线程池线程。生成未经检查的独立线程数量也可能是一个问题，因此它不是解决 IIS 线程池问题的所有方法。无论哪种方式，通常都首选异步 IO。

至于更改线程池中的线程数，[请查看此处](http://geekswithblogs.net/StuartBrierley/archive/2009/09/30/tuning-iis---machine.config-settings.aspx)。但是，您可能**真的**应该避免这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-17T09:57:48.280

我们的 Web 服务需要不时地提供**100 个请求/秒**，而其余时间为 1 个请求/秒。分析 IIS 日志，我们发现在发生突发事件时为此类调用提供服务大约需要**28秒。**

在我们的案例中，应用@nunespascal引用的[Microsoft 最佳实践可](https://msdn.microsoft.com/en-us/library/ms998549.aspx)**将时间大幅缩短至 1 秒**。

下面是我们目前在部署生产服务器时使用的 Powershell 脚本。它更新 machine.config 以计算逻辑处理器编号。

```
<# Get and backup current machine.config #>
$path = "C:\Windows\Microsoft.Net\Framework\v4.0.30319\Config\machine.config";
$xml = [xml] (get-content($path));
$xml.Save($path + "-" + (Get-Date -Format "yyyyMMdd-HHmm" ) + ".bak");

<# Get number of physical CPU #>
$physicalCPUs = ([ARRAY](Get-WmiObject Win32_Processor)).Count;

<# Get number of logical processors #>
$logicalProcessors = (([ARRAY](Get-WmiObject Win32_Processor))[0] | Select-Object “numberOfLogicalProcessors").numberOfLogicalProcessors * $physicalCPUs;

<# Set Number of connection in system.net/connectionManagement #>
$systemNet =  $xml.configuration["system.net"];
if (-not $systemNet){
    $systemNet = $xml.configuration.AppendChild($xml.CreateElement("system.net"));
}

$connectionManagement = $systemNet.connectionManagement;
if (-not $connectionManagement){

    $connectionManagement = $systemNet.AppendChild($xml.CreateElement("connectionManagement"));
}

$add = $connectionManagement.add;
if(-not $add){
    $add = $connectionManagement.AppendChild($xml.CreateElement("add")) ;
}
$add.SetAttribute("address","*");
$add.SetAttribute("maxconnection", [string]($logicalProcessors * 12) );

<# Set several thread settings in system.web/processModel #>
$systemWeb =  $xml.configuration["system.web"];
if (-not $systemWeb){
    $systemWeb = $xml.configuration.AppendChild($xml.CreateElement("system.web"));
}

$processModel = $systemWeb.processModel;
if (-not $processModel){
    $processModel = $systemWeb.AppendChild($xml.CreateElement("processModel"));
}
$processModel.SetAttribute("autoConfig","true");
$processModel.SetAttribute("maxWorkerThreads","100");
$processModel.SetAttribute("maxIoThreads","100");
$processModel.SetAttribute("minWorkerThreads","50");
$processModel.SetAttribute("minIoThreads","50");

<# Set other thread settings in system.web/httRuntime #>
$httpRuntime = $systemWeb.httpRuntime;
if(-not $httpRuntime){
    $httpRuntime = $systemWeb.AppendChild($xml.CreateElement("httpRuntime"));
}
$httpRuntime.SetAttribute("minFreeThreads",[string]($logicalProcessors * 88));
$httpRuntime.SetAttribute("minLocalRequestFreeThreads",[string]($logicalProcessors * 76));

<#Save modified machine.config#>
$xml.Save($path); 
```

这个解决方案来自[Stuart Brierley](http://geekswithblogs.net/StuartBrierley/archive/2009/09/30/tuning-iis---machine.config-settings.aspx)在 2009 年撰写的一篇博客文章。我们从 2008 R2 到 2016 年成功地使用 Windows Server 对其进行了测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-06T18:57:56.020

实际上，[您链接的文章](http://www.aaronstannard.com/post/2011/01/06/asynchonrous-controllers-ASPNET-mvc.aspx)中所写的内容是不正确的。异步模式不能释放“超级昂贵的 IIS 工作线程”并在后台使用其他一些“廉价线程”。

异步模式只是为了释放线程。在不需要线程（最好甚至不需要本地机器）的情况下，您可以从中受益。

我可以举出两个示例场景（都是 I/O）：

第一的：

1.  开始请求
2.  开始异步文件读取
3.  在文件读取期间，您不需要您的线程 - 因此其他请求可以使用它。
4.  文件读取结束 - 您从应用程序池中获取线程。
5.  请求完成。

几乎相同的第二个：

1.  开始请求
2.  开始异步调用 WCF 服务。
3.  我们可以离开我们的机器并且不需要我们的线程——所以其他请求可以使用它。
4.  我们从远程服务获得响应——我们从应用程序池中获得一些线程以继续。
5.  请求完成。

阅读 msdn 通常是安全的。[您可以在此处](http://msdn.microsoft.com/en-us/library/ee728598%28v=VS.98%29.aspx)获取有关异步模式的信息。

# perl - 如何用自定义实现替换 Mojolicious 会话？

> ID：12304692
> 
> 赞同：1
> 
> 时间：2012-09-06T16:45:24.543
> 
> 标签：perl, mojolicious

默认情况下，Mojolicious 会话会为会话创建一个签名的 cookie。我想覆盖这种行为。我可以扩展 Mojolicious::Sessions 并覆盖加载和存储方法，但是如何使用我的类而不是默认的 Mojolicious::Sessions。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:55:18.260

如[文档](http://mojolicio.us/perldoc/Mojolicious#sessions)所述，Mojolicious::Sessions 对象保存在应用程序的[`sessions`属性](https://github.com/kraih/mojo/blob/master/lib/Mojolicious.pm#L36)中。因此，您可以在创建时覆盖它

```
my $app = MyApp->new( sessions => MySessions->new ); 
```

或之后

```
$app->sessions( MySessions->new ); 
```

# jquery - 使用悬停时显示的编辑图标编辑表格数据单元格

> ID：12304697
> 
> 赞同：2
> 
> 时间：2012-09-06T16:45:51.483
> 
> 标签：jquery, html-table, cell, edit, tablerow

我有一个包含多个列和行的网格。我想一次只编辑一个单元格。通过在用户悬停 td 时显示编辑图标，我希望用户能够单击编辑图标，然后 td 变为可编辑。onblur 将保留新值，并且当 td 不在焦点时，编辑图标也会隐藏。

我无法为此编写代码，我想应用 JQuery 技术。

```
<table>
<thead>
  <tr>
    <th>1</th>
    <th>2</th>
    <th>3</th>
  </tr>
</thead>
<tbody>
  <tr id="r1">
    <td>- |</td>
    <td>blah 1 |</td>
    <td>blah 2 <div class="editit" style="background:url(pencil.png) no-repeat"></div></td>
  </tr> 
```

如果 JQuery 专家帮我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:02:30.520

简单但有效：[jsFiddle](http://jsfiddle.net/Trads/)

在悬停时，它会显示一个带有文本的跨度。你可以把它做成一个按钮或任何你喜欢的东西。此跨度充当编辑和保存按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:59:41.850

```
$('td').click(function(){
    var theText = $(this).text();
    $(this).html('<input type="text" value="'+theText+'"/>');
    $(this).find('input').focus();
});
$('td').hover(function(){
    $(this).css({'background' : 'url(http://www.earthclaim.com/images/edit_icon.gif) no-repeat right'});
}, function(){
    $(this).css('background', 'none');
});
$(document).on('blur', 'input', function(){
    var theText = $(this).val();
    $(this).parent().html(theText);    
}); 
```

工作 [jsFiddle。](http://jsfiddle.net/2vUSP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:00:15.903

我不是专家，但解决该问题的最佳方法是使用插件将整个表格转换为具有许多选项（如单元格版本）的网格。这是一个包含 10 个最常用 Jquery 网格的列表

[http://www.jquery4u.com/plugins/10-jquery-grids/](http://www.jquery4u.com/plugins/10-jquery-grids/)

只需访问一个并查看文档或使用示例，例如： [http ://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

或这个

[http://flexigrid.info/](http://flexigrid.info/)

# json - CL-JSON 通过以 ASCII 格式输出 Unicode 转义字符串来对 Unicode 字符进行编码。我怎样才能覆盖这个？

> ID：12304702
> 
> 赞同：3
> 
> 时间：2012-09-06T16:46:02.733
> 
> 标签：json, unicode, common-lisp

我正在使用 CL-JSON 对对象进行编码。它以 ASCII 格式吐出编码字符串，非 ASCII 字符被写为“\uxxxx”形式的 ASCII 字符序列。结果是即使我使用外部格式打开输出文件流：utf-8，该文件也只包含 ASCII 字符。当我尝试使用例如 notepad++ 查看它时，我无法将其转换为 Unicode，因为现在所有数据都只是 ASCII（甚至是“\uXXXX”序列）。我想知道是否有一个编辑器可以自动将文件转换为 Unicode 并识别这些转义序列，或者是否有办法告诉 CL-JSON 将输出字符保留为 Unicode。有任何想法吗？

编辑：这里有更多信息：

```
CL-USER>(with-open-file (out "dump.json" 
                          :direction :output 
                          :if-does-not-exist :create 
                          :if-exists :overwrite 
                          :external-format :utf-8)
             (json:encode-json '("abcd" "αβγδ") out) 
             (format out "~%"))

CL-USER>(quit)

bash$ file dump.json
dump.json: ASCII text
bash$ cat dump.json
["abcd","\u03B1\u03B2\u03B3\u03B4"]
bash$ uname -a
Linux suse-server 3.0.38-0.5-default #1 SMP Fri Aug 3 09:02:17 UTC 2012 (358029e) x86_64 x86_64 x86_64 GNU/Linux
bash$ sbcl --version
SBCL 1.0.50
bash$ 
```

编辑2：

YASON 做了我需要的，输出字符而不以 \uXXXX 格式转义它们，但不幸的是它缺少我需要的功能，所以它不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:09:06.903

我知道这是一个临时解决方案，但我通过重新定义适当的函数而不是 ASCII 之外的 unicode-escape 范围来更改 CL-JSON 源。该函数被命名`write-json-chars`，它驻留在`encoder.lisp`源文件中。

# java - DocumentBuilder.parse () -- 权限被拒绝

> ID：12304706
> 
> 赞同：0
> 
> 时间：2012-09-06T16:46:17.803
> 
> 标签：java, android, rss, xml-parsing, android-2.2-froyo

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance ();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder ();
Document doc = dBuilder.parse ("http://feeds.feedburner.com/d0od?format=xml");
doc.getDocumentElement ().normalize (); 
```

出于某种原因，在第三行，Android 似乎总是抛出“Permission denied”异常。谁能告诉我为什么，我做错了什么？

* * *

使用 API 级别 8 (Froyo)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:49:42.380

您是否尝试从您的`onCreate()`或 UI 线程访问互联网（解析）？您应该在您的或只是将其移动到工作线程中实现[StrictMode 。](http://developer.android.com/reference/android/os/StrictMode.html)`onCreate()`

此外，首先确保您的 Manifest 具有正确的 Internet 访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:48:21.880

您是否尝试过在网络浏览器中访问该 URL？你能连接到它吗？

这个例外是不言自明的。您的连接没有访问该 URL 的适当权限。尝试手动访问以确认。

如果您的 Android 安全软件或网络过滤设置认为该 URL 不安全，您也可能会收到此错误。如果是这种情况，您将需要修改这些设置以成功建立连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:53:39.660

将 android.permission.INTERNET 添加到您的清单中。这将让您的应用程序访问互联网。

# creole - Roadkill wiki 引擎，克里奥尔语标记

> ID：12304708
> 
> 赞同：1
> 
> 时间：2012-09-06T16:46:27.607
> 
> 标签：creole, roadkill-wiki

我正在使用 Roadkill wiki 引擎并尝试将 xml 粘贴到这样的页面中：{{{这是一个测试}}}

但是“”文本没有显示，它只显示“这是一个测试”

是否有另一种方法来逃避它，以便页面显示“这是一个测试”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T12:28:01.113

从 1.7 版开始，您可以使用内置的语法高亮：

```
[[[code lang=XML| 
your XML here
]]] 
```

[这为您提供了来自SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)的客户端语法突出显示。Roadkill 文档通常落后几个月，但它最终确实包含您需要的信息！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:19:32.390

我找到了解决方案。Roadkill 有一个令牌文件 (App_Data\tokens.xml)，您可以在其中设置要查找的文本令牌和替换值。因此，为了修复 "" 和 "" 元素，我在令牌文件中添加了以下内容：

```
<TextToken>
    <Name>Begin Body Element</Name>
    <Description><![CDATA[
    fixes the body element problem
    ]]>
    </Description>
    <SearchRegex>&lt;Body&gt;</SearchRegex>
    <HtmlReplacement><![CDATA[&lt;body&gt;]]>
    </HtmlReplacement>
</TextToken>
<TextToken>
    <Name>End Body Element</Name>
    <Description><![CDATA[
    fixes the body element problem
    ]]>
    </Description>
    <SearchRegex>&lt;/Body&gt;</SearchRegex>
    <HtmlReplacement><![CDATA[&lt;/body&gt;]]>
    </HtmlReplacement>
</TextToken> 
```

# python - 使用 argparse 的 `add_subparsers` 方法实现两个位置参数

> ID：12304709
> 
> 赞同：4
> 
> 时间：2012-09-06T16:46:35.233
> 
> 标签：python, arguments, command-line-arguments, argparse

我想在使用库的`add_subparsers`方法`argparse`而不使用关键字参数的情况下获得以下功能`nargs`：

```
$ python my_program.py scream Hello
You just screamed Hello!!
$ python my_program.py count ten
You just counted to ten. 
```

我知道我可以这样做：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("cmd", help="Execute a command", action="store",
  nargs='*')
args = parser.parse_args()
args_list = args.cmd

if len(args.cmd) == 2:
    if args.cmd[0] == "scream":
        if args.cmd[1] == "Hello":
            print "You just screamed Hello!!"
        else:
            print "You just screamed some other command!!"

    elif args.cmd[0] == "count":
        if args.cmd[1]:
            print "You just counted to %s." % args.cmd[1]
        else:
            pass

    else:
        print "These two commands are undefined"

else:
    print "These commands are undefined" 
```

但是当我这样做时，`$ python my_program.py`我会丢失显示参数列表等的默认 arparse 文本。

我知道库中有一种`add_subparsers`方法`argparse`可以处理多个位置参数，但我还没有找到让它正常工作的方法。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:10:15.787

```
import argparse

def scream(args):
    print "you screamed "+' '.join(args.words)

def count(args):
    print "you counted to {0}".format(args.count)

parser = argparse.ArgumentParser()

#tell the parser that there will be subparsers
subparsers = parser.add_subparsers(help="subparsers")

#Add parsers to the object that was returned by `add_subparsers`
parser_scream = subparsers.add_parser('scream')

#use that as you would any other argument parser
parser_scream.add_argument('words',nargs='*')

#set_defaults is nice to call a function which is specific to each subparser
parser_scream.set_defaults(func=scream) 

#repeat for our next sub-command
parser_count = subparsers.add_parser('count')
parser_count.add_argument('count')
parser_count.set_defaults(func=count)

#parse the args
args = parser.parse_args()
args.func(args)  #args.func is the function that was set for the particular subparser 
```

现在运行它：

```
>python test.py scream Hello World!  #you screamed Hello World!
>python test.py count 10             #you counted to 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:24:48.723

使用时，`add_subparsers`您基本上是在创建嵌套解析器：

```
parser = argparse.ArgumentParser()
subparsers = parser.add_subparsers(help='sub-command help')

parser_scream = subparsers.add_parser('scream', help='scream help') 
```

现在你有了一个*新*的解析器对象，你可以添加开关。*或者*，您可以添加另一层嵌套：

```
scream_subparsers = parser_scream.add_subparsers(help='scream sub-command help')
parser_scream_hello = scream_subparsers.add_parser('hello', help='scream hello help') 
```

这可以深入到您需要控制精确格式的程度。每个级别都提供帮助：

```
>>> parser.print_help()
usage: [-h] {scream} ...

positional arguments:
  {scream}    sub-command help
    scream    scream help

optional arguments:
  -h, --help  show this help message and exit
>>> parser_scream.print_help()
usage:  scream [-h] {hello} ...

positional arguments:
  {hello}     scream sub-command help
    hello     scream hello help

optional arguments:
  -h, --help  show this help message and exit
>>> parser_scream_hello.print_help()
usage: scream hello [-h]

optional arguments:
  -h, --help  show this help message and exit 
```

您可以让每个端点调用一个函数，方法`set_defaults(func=yourfunction)`是在有问题的子解析器上使用，然后使用该默认`func`参数为当前参数调用所选函数：

```
>>> def scream_hello(args):
...     print "You screamed hello!"
...
>>> parser_scream_hello.set_defaults(func=scream_hello)
>>> parser.parse_args(['scream', 'hello'])
Namespace(func=<function scream_hello at 0x10bd73c80>)
>>> args = parser.parse_args(['scream', 'hello'])
>>> args.func(args)
You screamed hello! 
```

# php - 在 XAMPP 1.7.4 中启用 XSTLProcessor

> ID：12304712
> 
> 赞同：-1
> 
> 时间：2012-09-06T16:46:52.317
> 
> 标签：php, xslt, xampp

得到一个错误*类 'XSLTProcessor' not found in...*

如何安装此类，使用 XAMPP 1.7.4，升级不是一个选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:28:15.543

将 extension=php_xsl.dll 添加到 php.ini。

认为它没有这个选项，因为 XAMPP 1.7.4 中不存在该行

# javascript - JS中单词之间的空格

> ID：12304713
> 
> 赞同：0
> 
> 时间：2012-09-06T16:46:52.597
> 
> 标签：javascript, html, popup, space

我有这个JS代码：

```
function myPopUp()
{
    var y;
    var name=prompt("Please enter your name"," הכנס את שמך");
    if (name!=null)
    {
        y= '  How are you today?';
        document.getElementById("popup").innerHTML = y;
        var x="";
        var time=new Date().getHours();
        if (time<20)
        {
            x="Have a nice day" +  name + '!';
        }
        else
        {
            x='   Great evening  '+ name +'   !  ';
        }
        document.getElementById("demo").innerText = x ;
    }
} 
```

使用此 HTML 代码：

```
<body>
    <button onclick="myPopUp()" >לחץ כאן</button>
    <p id="demo"></p>
    <p id="popup"></p>
</body> 
```

我的问题：当有人写他们的名字时，单词之间没有空格？如何在JS中的单词之间放置空格？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:50:27.370

在 HTML 中，额外的空白被折叠为单个空格 (ASCII 32) 字符。

如果您必须强制使用空格，请使用 html 标识`&nbsp;`，这是一个不间断的空格。

更好的是，使用 CSS 在元素周围放置边距并使间距可视化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:52:24.657

看起来你只需要“一天”之后的空间，所以试试这个：

```
x="Have a nice day " +  name + '!'; 
```

# javascript - 在 jquery $({}) 中包装普通的 javascript 对象

> ID：12304716
> 
> 赞同：9
> 
> 时间：2012-09-06T16:47:05.420
> 
> 标签：javascript, jquery

我有我正在阅读的书中的这段代码片段。并想了解`$({})`它的确切含义和用途。

我尝试在几个搜索引擎甚至 SO 上搜索。`$({})`不是一个搜索友好的术语。

```
 var Events = {
       bind: function(){
          if ( !this.o ) this.o = $({});
          this.o.bind.apply(this.o, arguments);
       },

       trigger: function(){
          if ( !this.o ) this.o = $({});
          this.o.trigger.apply(this.o, arguments);
       }
    }; 
```

我确实发现了一个类似的[问题](https://stackoverflow.com/questions/3587372/what-does-mean-in-jquery)，`$([])`但我认为这并不完全相同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T16:48:22.863

您只是将一个基本的 javascript 对象包装为 jQuery 对象。

来自[jquery 文档](http://api.jquery.com/jQuery/)：

> ### 使用普通对象
> 
> 目前，jQuery 中封装的纯 JavaScript 对象支持的唯一操作是：.data()、.prop()、.bind()、.unbind()、.trigger() 和 .triggerHandler()。在普通对象上使用 .data()（或任何需要 .data() 的方法）将在对象上产生一个名为 jQuery{randomNumber} 的新属性（例如 jQuery123456789）。
> 
> ```
> // define a plain object
> var foo = {foo:'bar', hello:'world'};
> 
> // wrap this with jQuery
> var $foo = $(foo);
> 
> // test accessing property values
> var test1 = $foo.prop('foo'); // bar
> 
> // test setting property values
> $foo.prop('foo', 'foobar');
> var test2 = $foo.prop('foo'); // foobar
> 
> // test using .data() as summarized above
> $foo.data('keyName', 'someValue'); console.log($foo); // will now contain a
>                                                       // jQuery{randomNumber}
>                                                       // property
> 
> // test binding an event name and triggering
> $foo.bind('eventName', function (){
>     console.log('eventName was called');
> });
> 
> $foo.trigger('eventName'); // logs 'eventName was called' 
> ```
> 
> 如果使用 .trigger('eventName')，它将在对象上搜索 'eventName' 属性，并在执行任何附加的 jQuery 处理程序后尝试执行它。它不检查属性是否为函数。为避免这种行为，应使用 .triggerHandler('eventName') 代替。
> 
> ```
> $foo.triggerHandler('eventName'); // also logs 'eventName was called' 
> ```

这是一个（不是很有用）示例：

```
​var a =$({});
a.data('b', 3);
console.log(a.data('b')); // this prints 3 
```

如果您保留使用 创建的对象`$({})`，则可以将其用作 、 等的被调用`data`者`bind`。这可能是您可以制作的最小的非 DOM 可保留 jquery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:17:10.650

这确实与 javascript 语法有关，而不是 jQuery。

`{}`适用于这样的对象：

```
 //makes an empty object
 var myObject = {}; 

 //makes an object containing 'foo' and 'bar' as 'firstItem' and 'secondItem'
 var myObject = { firstItem : foo, secondItem : bar }; 
```

`[]`适用于这样的数组：

```
 //makes a blank array
 var myArray = [];

 //makes an array containing 'foo' and 'bar' at postions 0 and 1
 var myArray = [foo, bar]; 
```

`()`用于函数（通常是 jQuery）。这有点复杂，因为它可以有多种含义。

```
 //running an existing function
 myFunction();

 //running an anonymous function
 (function(){  
    //doSomething }
 )();

 //running a function with an argument
 myFunction(arg); 
```

jQuery 通常只是一个被调用的函数，`$`而不是`myFunction`这样......

```
 //runs jQuery as a function on 'arg'
 $(arg); 
```

你传递给 jQuery 的参数几乎可以是任何东西。如果你传递一个像`'#myDiv'`jQuery 这样的字符串，它将使用该参数作为选择器从 html 中获取一个元素。如果您将对象或数组之类的其他东西传递给它，它仍然可以用它做一些事情，例如：[http](http://api.jquery.com/jQuery/) ://api.jquery.com/jQuery/ 正如@dystroy 所说。

所以`$({})`是一样的`$(myBlankObject)`，例如：

```
var myBlankObject = {};
$(myBlankObject);
//is the same as
$({}); 
```

和

```
var myObjectWithStuff = { firstItem :  foo, secondItem : bar };
$(myObjectWithStuff);
//is the same as
$({ firstItem :  foo, secondItem : bar }); 
```

`$('selector')`作品。`$({'selector'})`或者`$(['selector'])`没有，因为您没有向 jQuery 传递一个字符串，而是另一种数据类型。

# sql - 为每一行拉取特定的 xml 节点

> ID：12304717
> 
> 赞同：1
> 
> 时间：2012-09-06T16:47:07.530
> 
> 标签：sql, sql-server, xml

我需要为`<node>`表中的每一行拉一个不同的，节点的位置存储在`SpecificNode`

```
DECLARE @table TABLE
    (
        XmlValue XML,
        SpecificNode INT
    )

INSERT INTO @table SELECT   '<root><node>Y</node><node>Y</node><node>10</node><node>YARD</node></root>', 3
INSERT INTO @table SELECT   '<root><node>N</node><node>20</node><node>PART</node><node></node><node>PASS</node></root>', 2
INSERT INTO @table SELECT   '<root><node>Y</node><node>30</node><node>FORK</node></root>', 2 
```

我可以拉出一个指定的节点，但是当我尝试使其成为动态时，它给了我错误“xml 数据类型方法“值”的参数 1 必须是字符串文字。”

```
SELECT  
    XmlValue.value('(/root/node)['+SpecificNode+']', 'VARCHAR(100)')
FROM @table AS tbl 
```

与此相同的错误

```
SELECT
    x.value,
    XmlValue.value(x.value, 'VARCHAR(100)')
FROM @table AS tbl
CROSS APPLY (SELECT '(/root/node)['+CONVERT(VARCHAR, SpecificNode)+']' as value) X 
```

我的预期输出是

```
10
20
30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:02:06.620

您可以使用[sql:column](http://msdn.microsoft.com/en-us/library/ms191214.aspx?ppud=4)

```
SELECT
  XmlValue.value('(/root/node[sql:column("SpecificNode")])[1]', 'VARCHAR(100)')
FROM @table AS tbl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:40:50.803

希望这有效。

创建表#table（ID INT IDENTITY、XmlValue XML、SpecificNode INT）

INSERT INTO #table SELECT '<root><node>Y</node><node>Y</node><node>10</node><node>YARD</node></root>', 3

INSERT INTO #table SELECT '<root><node>N</node><node>20</node><node>PART</node><node></node><node>PASS</node></根>', 2

INSERT INTO #table SELECT '<root><node>Y</node><node>30</node><node>FORK</node></root>', 2

声明@a varchar(1000)，@IDENT INT；将@values 声明为表（值 INT）

设置@IDENT = 1

DECLARE CUR CURSOR FOR select 'SELECT
XmlValue.value(''(/root/node)['+ CONVERT(VARCHAR(10), SpecificNode)+']'', ''VARCHAR(100)'') FROM #table AS tbl WHERE ID = '

来自#table

打开 CUR

从 CUR 获取下一个到 @A

而@@FETCH_STATUS = 0

开始

SET @A = @A + CONVERT(VARCHAR(10), @IDENT)

插入到 @values(value) 执行 (@A)

```
SET @IDENT = @IDENT + 1

FETCH NEXT FROM CUR INTO @A 
```

结尾

关闭当前

取消分配 CUR

DROP TABLE #table SELECT * fROM @values

需要一些额外的努力。首先将表变量更改为临时表，然后将 ID 列添加到具有标识的表中。结果将出现在不同的结果集中。要将它们全部放在一个结果集中，需要创建一个表变量来存储它们。

# ant - ANT jar 问题。反转录。在 Java/lib 中找不到 jar

> ID：12304719
> 
> 赞同：1
> 
> 时间：2012-09-06T16:47:09.923
> 
> 标签：ant, path, java

我有一个 JDK 安装，其中包含该`\lib`文件夹，我可以看到其中`rt.jar`存在。仍然当我打电话给蚂蚁时，它给了我一个错误`Can't find rt.jar ...`。

我认为我的基础知识正确`JAVA_HOME`并`ANT_HOME`指向正确的目录。

还`Path=JAVA_HOME/bin;ANT_HOME/bin;%Path%;`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:19:01.947

我通过重新安装 JDK 和 ANT 来修复它。不确定这是否真的是一个解决方案，但我有 ANT 1.8 和看起来像 JDK 1.2.x 的东西（不知道它是如何存在于我的系统上的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:52:54.257

您的路径声明可能会像这样更好地工作：

`PATH=%JAVA_HOME%/bin;%ANT_HOME%/bin;%PATH%;`

也许它在 JDK 之前的路径中找到了 JRE

# entity-framework - 将旧的 ado.net Web 应用程序迁移到 EF

> ID：12304723
> 
> 赞同：0
> 
> 时间：2012-09-06T16:47:18.567
> 
> 标签：entity-framework

考虑这个查询

```
Select (some properties from all 3 Tables)
    From PageWidgets pw LEFT JOIN PageWidgetDefinition pwd 
       On pwd.ID = pw.WidgetID
    LEFT JOIN PageWidgetSkin pws 
       ON pws.ID  = pw.SkinInstanceID 
    LEFT JOIN PageWidgetSkinRows pwsr 
       On pwsr.SkinID = pws.ID Where pw.PageID = *x*
    Order By (some properties) 
```

在旧的实现中，它读取页面上的小部件及其皮肤，我有一个函数循环返回的行，并通过其皮肤及其小部件实例创建一个页面小部件。每个小部件的皮肤都有三行，最后我们收到一个列表，其中包含操作所需的一切

我在 EF 有这些课程

```
public partial class Widget: BaseEntity {
    public int ID { get; set; }

    public int PageTemplateID { get; set; }
    public PageTemplate PageTemplate { get; set; }

    public int WidgetDefinitionID { get; set; }
    public WidgetDefinition WidgetDefinition { get; set; }

    public int WidgetSkinID { get; set; }
    public WidgetSkin WidgetSkin { get; set; }
            //other properties omitted

}

public partial class WidgetDefinition: BaseEntity {             
    public int ID { get; set; }
    public string Title { get; set; }
            //other properties omitted
    public virtual ICollection<Widget> Widgets { get; set; }
}

public partial class WidgetSkin: BaseEntity {
    public int ID { get; set; }
    public string Name { get; set; }
            //other properties omitted

    public virtual ICollection<Widget> Widgets { get; set; }
    public virtual ICollection<WidgetSkinRow> WidgetSkinRows { get; set; }
}

public partial class WidgetSkinRow: BaseEntity {

    public int ID { get; set; }

    public int WidgetSkinID { get; set; }
    public virtual WidgetSkin WidgetSkin { get; set; }
} 
```

我需要一个额外的业务层来做同样的事情吗？

使用 EF，我只想去 DB 一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:50:43.793

您可以使用“急切加载”方法来执行此操作。

您的查询将如下所示：

```
using (var entities = new WidgetEntities() )
{
  var query = from w in entities.Widgets.Include("WidgetDefinition").Include("WidgetDefinition.Widgets").Include("WidgetSkins").Include("WidgetSkins.WidgetSkinRows")
    where w.Page = *x*
    order by  w.someproperty
    select w;

    Widget myWidget = query.First();
} 
```

# delphi - 捕获 ListView BeginScroll 和 EndScroll 事件

> ID：12304727
> 
> 赞同：2
> 
> 时间：2012-09-06T16:47:28.900
> 
> 标签：delphi

当 ListView 开始垂直滚动并结束它时，有什么方法可以捕获事件？
首先，我试图捕捉 LVN_BEGINSCROLL 和 LVN_ENDSCROLL 通知，但结果并不符合我的预期。也许我试图处理这些通知是错误的（在父表单中我处理了 WM_NOTIFY 消息，在它的处理程序中我检查了 Msg.NMHdr.code）。
我还尝试处理 ListView 的 WM_VSCROLL 消息并检查了 ScrollCode = SB_ENDSCROLL。但是如何检测 BeginScroll 事件呢？
当我通过鼠标滚轮滚动 ListView 时，WM_VSCROLL 没有出现。WM_MOUSEWHEEL 消息来代替。如何使用 WM_MOUSEWHEEL 消息检测和处理我需要的事件？是否可以通过检查 delta，即 WM_MOUSEWHEEL 消息的 wParam 中的高位词？

或者我能做什么？
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:59:34.770

`LVN_BEGINSCROLL`并且`LVN_ENDSCROLL`当我尝试它们时对我来说工作正常，前提是该应用程序启用了 XP 主题，因为它们仅适用于 ComCtrl32 v6。但是他们的时间与您的预期不同，这可能会让您感到困惑。

`WM_VSCROLL`它本身会更好地满足您的需求，并且它不依赖于 ComCtl32 v6。它还将处理鼠标滚轮滚动，尽管滚轮开始/结束滚动通知的时间将更像`LVN_BEGINSCROLL`和`LVN_ENDSCROLL`通知，因为滚轮不知道下一次移动何时发生，因此滚轮的每个滴答声都是独立处理的。

使用时`WM_VSCROLL`，您可以使用布尔变量来跟踪滚动状态，以便您可以检测到 BeginScroll，然后消息会通知您 EndScroll。

尝试这个：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, Dialogs, ComCtrls;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
    IsScrolling: Boolean;
    PreviousWndProc: TWndMethod;
    procedure ListViewWndProc(var Message: TMessage);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
  Commctrl;

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  PreviousWndProc := ListView1.WindowProc;
  ListView1.WindowProc := ListViewWndProc;
end;

procedure TForm1.ListViewWndProc(var Message: TMessage);
{
type
  NMLVSCROLL = record
    hdr: NMHDR;
    dx: Integer;
    dy: Integer;
  end;
  LPNMLVSCROLL = ^NMLVSCROLL;
}
begin
  PreviousWndProc(Message);
  case Message.Msg of
    {
    CN_NOTIFY:
    begin
      case TWMNotify(Message).NMHdr^.code of
        LVN_BEGINSCROLL:
        begin
          if not IsScrolling then
          begin
            IsScrolling := True;
            // do something...
            // use LPNMLVSCROLL(Message.LParam) if needed...
          end;
        end;
        LVN_ENDSCROLL:
        begin
          if IsScrolling then
          begin
            IsScrolling := False;
            // do something...
            // use LPNMLVSCROLL(Message.LParam) if needed...
          end;
        end;
      end;
    end;
    }
    WM_VSCROLL:
    begin
      if TWMVScroll(Message).ScrollCode = SB_ENDSCROLL then
      begin
        if IsScrolling then
        begin
          IsScrolling := False;
          // do something...
        end;
      end
      else if not IsScrolling then
      begin
        IsScrolling := True;
        // do something...
      end;
    end;
  end;
end;

end. 
```

# javascript - 我怎样才能告诉AngularJS“刷新”

> ID：12304728
> 
> 赞同：185
> 
> 时间：2012-09-06T16:47:33.277
> 
> 标签：javascript, angularjs

我有一个在我的自定义指令范围之外发生的单击事件，因此我没有使用“ng-click”属性，而是使用 jQuery.click() 侦听器并在我的范围内调用一个函数，如下所示：

```
$('html').click(function(e) {
  scope.close();
); 
```

close() 是一个简单的函数，如下所示：

```
scope.close = function() {
  scope.isOpen = false;
} 
```

在我看来，我有一个绑定到 isOpen 的“ng-show”元素，如下所示：

```
<div ng-show="isOpen">My Div</div> 
```

调试时，我发现 close() 被调用，isOpen 被更新为 false，但 AngularJS 视图没有更新。有没有办法手动告诉 Angular 更新视图？或者是否有更“角度”的方法来解决我没有看到的这个问题？

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2012-09-06T17:09:55.387

解决办法是打电话...

```
$scope.$apply(); 
```

...在我的 jQuery 事件回调中。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-04-24T14:58:12.240

# 为什么`$apply`要调用？

**TL;DR**： 只要你想应用在Angular 世界**之外**`$apply`所做的更改，就应该调用它。

 *** * *

只是为了更新[*@Dustin 的答案*](https://stackoverflow.com/a/12305082/4927984)，这里解释**了** [$apply](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply)究竟做了什么以及它**为什么**起作用。

> `$apply()`用于从 AngularJS 框架之外执行 AngularJS 中的表达式。（例如来自浏览器 DOM 事件、setTimeout、XHR 或第三方库）。因为我们正在调用 AngularJS 框架，所以我们需要执行适当的 [异常处理](https://docs.angularjs.org/api/ng/service/$exceptionHandler)范围生命周期，[执行 watch](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest)。

Angular 允许将任何值用作绑定目标。然后在任何 JavaScript 代码循环结束时，它会检查值是否已更改。检查任何绑定值是否已更改的步骤实际上有一个方法`$scope.$digest()`^([1](http://jimhoskins.com/2012/12/17/angularjs-and-apply.html))。我们几乎从不直接调用它，而是使用`$scope.$apply()`它（它将调用`$scope.$digest`）。

Angular 仅监视表达式中使用的变量以及`$watch`范围内的任何内容。因此，如果您在 Angular 上下文之外更改模型，则需要调用`$scope.$apply()`传播这些更改，否则 Angular 将不知道它们已更改，因此绑定不会更新^([2](http://haroldrv.com/2015/02/using-scope-apply-in-angularjs/))。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-09-19T09:35:38.533

利用

```
$route.reload(); 
```

记得注入`$route`你的控制器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-04T18:23:20.550

虽然以下内容对我有用：

```
$scope.$apply(); 
```

它需要更多的设置和两者的使用`.$on`和`.$broadcast`工作或潜在地`$.watch`。

但是，以下需要的代码要少得多，而且工作起来很吸引人。

```
$timeout(function() {}); 
```

在更新范围变量后立即添加超时允许 AngularJS 意识到有更新并自行应用它。**

# mercurial - Mercurial回滚钩？

> ID：12304729
> 
> 赞同：2
> 
> 时间：2012-09-06T16:47:36.623
> 
> 标签：mercurial, mercurial-hook, mercurial-extension

我正在编写一个扩展，在回滚后能够执行一些逻辑将非常方便。

我浏览了所有关于钩子的文档，但我找不到`rollback`钩子。我也尝试了`post-*`钩子（即`post-rollback`），但这也没有触发。我的下一步是深入研究源，但我想我会问这个问题以防有人知道。

有回滚钩吗？如果是这样，是否可以使用`uisetup()`or将其连接到 Python 扩展中`reposetup()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T16:12:53.483

在查看[Mercurial 的源代码](http://selenic.com/hg/file/a58251c0568f/mercurial/localrepo.py)之后，确实，内部回滚函数 ( `_rollback`) 似乎没有调用任何钩子，因此似乎没有办法与此事件相关联。

我需要回滚钩子，因为我正在编写一个扩展，它在发生变更集时维护有关变更集的元数据。代替能够绑定到回滚事件，我最终编写了一个自定义命令作为扩展的一部分，以自行自动清除任何不一致的状态（例如，对由于回滚而不再存在的提交的引用'd）。

# python - 退出键关闭 WxPython GUI

> ID：12304732
> 
> 赞同：10
> 
> 时间：2012-09-06T16:47:40.833
> 
> 标签：python, wxpython

我正在开发一个相当简单的 wxpython GUI，并且希望能够让转义键关闭窗口。现在我只有一个执行 sys.exit(0) 的关闭按钮，但我希​​望使用转义键来执行此操作。

有谁知道这样做的方法？

```
import win32clipboard
import wx
from time import sleep
import sys

class MainFrame(wx.Frame):
    def __init__(self,title):

        wx.Frame.__init__(self, None, title="-RRESI Rounder-", pos=(0,0), size=(210,160))
        panel=Panel(self)

        icon = wx.Icon('ruler_ico.ico', wx.BITMAP_TYPE_ICO) 
        self.SetIcon(icon) 

class Panel(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        x1=10; x2=110
        y1=40; dy=25; ddy=-3
        boxlength=80

        self.button =wx.Button(self, label="GO", pos=(100,y1+dy*3))
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)
        self.button.SetDefault()

        self.button2 =wx.Button(self, label="Close", pos=(100,y1+dy*4))
        self.Bind(wx.EVT_BUTTON, self.OnClose, self.button2)
        self.button.SetDefault()

        self.Bind(wx.EVT_KEY_UP, self.OnKeyUP)

        self.label1 = wx.StaticText(self, label="Input Number:", pos=(x1,y1+dy*1))
        self.Input = wx.TextCtrl(self, value="1.001", pos=(x2,ddy+y1+dy*1), size=(boxlength,-1))

        self.label0 = wx.StaticText(self, label="Round to closest:  1/", pos=(x1,y1+dy*0))
        self.Denominator = wx.TextCtrl(self, value="64", pos=(x2,ddy+y1+dy*0), size=(boxlength,-1))

        self.label2 = wx.StaticText(self, label="Output Number:", pos=(x1,y1+dy*2))
        self.display = wx.TextCtrl(self, value="1.0", pos=(x2,ddy+y1+dy*2), size=(boxlength,-1))
        self.display.SetBackgroundColour(wx.Colour(232, 232, 232))

        self.label3 = wx.StaticText(self, label="          ", pos=(x2+7,y1+dy*2+20)) #Copied

        self.label4 = wx.StaticText(self, label="Type value and hit Enter", pos=(x1-5,y1-dy*1.5))
        self.label5 = wx.StaticText(self, label="Output is copied", pos=(x1-5,y1-dy*1))
        font = wx.Font(8, wx.DEFAULT, wx.NORMAL, wx.NORMAL)
        self.label4.SetFont(font)
        self.label5.SetFont(font)

    def OnKeyUP(self, event): 
        keyCode = event.GetKeyCode() 
        if keyCode == wx.WXK_ESCAPE: 
            sys.exit(0) 

    def OnClose(self, event):
        print "Closed"
        sys.exit(0)

    def OnClick(self,event):      
        print "You clicked the button!"

        def openClipboard():
            try:
                win32clipboard.OpenClipboard()
            except Exception, e:
                print e
                pass

        def closeClipboard():
            try:
                win32clipboard.CloseClipboard()
            except Exception, e:
                print e
                pass

        def clearClipboard():
            try:
                openClipboard()
                win32clipboard.EmptyClipboard()
                closeClipboard()
            except TypeError:
                pass

        def setText(txt): 
            openClipboard()
            win32clipboard.EmptyClipboard()
            win32clipboard.SetClipboardText(txt) 
            closeClipboard()

        Denominator = float(self.Denominator.GetValue())
        Input=float(self.Input.GetValue())
        Output=round(Input*Denominator,0)/Denominator
        self.display.SetValue(str(Output))
        setText(str(Output))
        self.label3.SetLabel("Copied")
        self.Update()#force redraw 
        sleep(.5)
        wx.Timer
        self.label3.SetLabel("                    ")

if __name__=="__main__":
    app = wx.App(redirect=False)   # Error messages don't go to popup window
    frame = MainFrame("RRESI Rounder")
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T17:16:35.893

这种方法很有效......虽然有一些问题

[编辑]好的 EVT_CHAR_HOOK 比 EVT_KEY_UP 效果好得多

```
import wx

class Test(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, -1, title='Event Test',
size=(200, 200))

        panel = wx.Panel(self)

        panel.SetFocus()

        self.Bind(wx.EVT_CHAR_HOOK, self.OnKeyUP)

    def OnKeyUP(self, event):
        print "KEY UP!"
        keyCode = event.GetKeyCode()
        if keyCode == wx.WXK_ESCAPE:
            self.Close()
        event.Skip() 

class App(wx.App):
    """Application class."""

    def OnInit(self):
        self.frame = Test()
        self.frame.Show()
        self.SetTopWindow(self.frame)
        self.frame.SetFocus()
        return True

if __name__ == '__main__':
    app = App()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T18:49:14.230

可能更简单的方法是将框架设置为带有取消按钮的对话框（您可以隐藏）：

```
class MainFrame(wx.Dialog):
    ...
    def __init__(self, ...):
        ...
        # the frame must have a cancel button
        cancel_button = wx.Button(..., id=wx.ID_CANCEL)
        # it still works if you hide it
        cancel_button.Hide() 
```

这似乎为转义键提供了默认处理。您甚至可以将其绑定到事件处理程序以在关闭之前执行一些操作 - 如果您这样做，处理程序必须使用 event.Skip(True) 来传播事件或 event.Skip(False) 来停止取消操作。

# rest - 如何使用 Backbone-relational 在新模型上设置关系属性

> ID：12304734
> 
> 赞同：0
> 
> 时间：2012-09-06T16:47:41.563
> 
> 标签：rest, backbone.js, backbone-relational

我正在构建一个 JavaScript 应用程序，并且一直在学习 JavaScript 和 Backbone，并在其中添加了 Backbone-relational。它保存到 Django-tastypie REST 服务器。

所以在我使用 Backbone-relational 之前，我会创建一个新对象，并在创建它时设置属性，将它们传递给构造函数，或者将属性字典传递给`save()`方法。

例如在 CoffeeScript 中：

```
myModel.save {attribute:value  , foreignKey_attribute : '/api/resourceUri/'}
    success -> 
        .... 
```

现在我已经切换到 Backbone-relational，它解决了很多获取数据的问题，但我似乎无法像以前那样设置外键属性。

将字典传递给构造函数或保存方法。当我查看控制台中的对象或 POST 的内容时，`foreign_key`属性总是`null`.

有没有办法解决这个问题，或者另一种设置方法`foreign_key_attribute`（假设我有外键ID）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:06:59.343

好的，解决了。

与其尝试将 flowcell 设置为 resource_uri 字符串，不如将其设置为 flowcell 对象。

然后在关系中我需要设置以下内容：

```
includeInJSON: 'resource_uri' 
```

这会按照美味派后端所期望的方式序列化对象。

# php - 一个大查询还是几个小查询？

> ID：12304737
> 
> 赞同：1
> 
> 时间：2012-09-06T16:48:01.753
> 
> 标签：php, mysql, sql

我目前正在将我的语言文件保存在 MySQL 数据库中。

一次获取所有特定于页面的语言字符串通常更好（我正在考虑性能）（查询少得多，但它们更大并且包含一些不必要的字符串）还是按请求获取（这会提供*更多*请求，但是相反，它们要小得多，并且不会获取不必要的字符串）。

编辑：我正在使用 APC，大约有 200-250 个页面特定的字符串，但如果我获取一个请求，它可能会变成 100-150。我在同一台机器上托管 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:51:57.217

这完全取决于您的情况和可用资源。例如，如果您向远程服务器发出单线程请求，一次获取所有内容可能会更好，但更多的小请求*可能*会更快，并且在本地 MySQL 服务器上运行的内存密集型更少（Tuncay 说它会导致糟糕的性能，坚韧）。如果页面被装配成异步发出请求，这样您就不会在发出另一个请求之前等待最后一个请求，它可能会更快。

但是，真正*了解*的唯一方法是在您的环境中运行一些基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:53:55.160

我的经验是mysql服务器可以轻松处理一个大请求。几个小的反而会导致性能很差。在可比较的情况下，我发现一个查询在性能方面总是更好。从数据库中获取全部数据，然后让 php 整理其余部分。

但是，仅在一个查询中从 db 中获取数据会更好。你确定你不能使用适当的“where”子句吗？

# objective-c - “初始化元素不是编译时常量”为什么？

> ID：12304740
> 
> 赞同：13
> 
> 时间：2012-09-06T16:48:21.040
> 
> 标签：objective-c, ios, xcode

我有这个代码：

```
- (NSString *) calculate: (uint) position {
    static NSArray * localArray = [NSArray arrayWithArray: self.container.objects ];
    // some un related code
    return obj;
} 
```

编译器抱怨说：“初始化元素不是编译时常量”。当我将“静态”添加到 localArray 时发生了这种情况。但为什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-06T16:52:33.483

因为`[NSArray arrayWithArray: self.container.objects ]`它不是编译时常量，所以它是一个必须在运行时计算的表达式。在 C 和 Objective-C 中，`static`函数内部的变量必须使用*编译*时常量进行初始化，而 C++ 和 Objective-C++ 更为宽松，允许使用非编译时常量。

将您的代码编译为 Objective-C++，或将其重构为如下内容：

```
static NSArray *localArray = nil;
if (localArray == nil)
    localArray = [NSArray arrayWithArray: self.container.objects ]; 
```

`static`这与编译器在后台为使用非编译时常量初始化的变量生成的代码非常相似（实际上，它将使用第二个全局标志来指示值是否已初始化，而不是使用像这里的哨兵值`nil`；在这种情况下，我们假设`localArray`永远不会是`nil`)。如果需要，您可以检查编译器的反汇编。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T16:53:05.483

您只是不能使用在运行时已知/修改的非静态值来初始化静态变量。

你可能应该做这样的事情：

```
static NSArray *localArray = nil;
localArray = ...; 
```

第一条指令将在您的应用生命周期中执行一次。每次调用 calculate: 方法时都会执行第二条指令。

尽管如此，请注意，如果使用不当，使用静态变量可能会导致错误行为，因此如果您对这些感到不安，您可能不应该使用它们。

# .net - 如何使用.net 数组？

> ID：12304745
> 
> 赞同：0
> 
> 时间：2012-09-06T16:48:45.483
> 
> 标签：.net, arrays, f#

我读到了在处理数组时我们应该使用 like `myArray.[i]`，但是，根据我的经验，它`myArray[i]`也可以编译。

但是，当我想写入 .Net 中的数组时（因此它是可变的），这会产生错误 `let myArray.[i] = 3`但`let myArray[i] =3`可以工作。

处理这种事情的最佳做法是什么？

另外，我应该使用`Array.get`还是使用`.[]`？

如何将值设置为锯齿状数组，例如`let myArray.[i].[j] = 5`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:56:52.750

1) 如果要为数组单元赋值，请使用赋值运算符`<-`：

```
myArray.[i] <- 3 
```

2)`let myArray[i] = 3`编译是因为编译器将其理解为`myArray`以列表为参数的函数并返回`3`. 如果您阅读警告和类型签名，您会发现自己做错了。

3)`Array.get`是[对`.[]`](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/array.fs#L655). `Array.get`在某些情况下便于函数组合和避免类型注释。例如你有

```
let mapFirst arrs = Array.map (fun arr -> Array.get arr 0) arrs 
```

对比

```
let mapFirst arrs = Array.map (fun (arr: _ []) -> arr.[0]) arrs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:56:27.997

您的两种方法都不正确。假设您有一些定义，例如

```
let myArray = [| 1; 7; 15 |]
let i = 2 
```

你真正想要的是这样的：

```
myArray.[i] <- 3 
```

当你写

```
let myArray[i] = 3 
```

您实际上是在定义一个**函数**myArray，它接受一个整数列表并返回一个整数。这根本不是你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:03:56.747

The problem here is that you're trying to embed an array assignment inside of a let expression. The expression `let myArray[3] = 2` is *not* an assignment into an array. Rather, it's a function definition. See what happens in fsi:

```
let myArray[i] = 3;;
val myArray : int list -> int 
```

(There's actually a warning in there as well). Formatting it differently also reveals this fact: `let myArray [3] = 2`.

As the others have pointed out, `.[]` is for array access, and to assign to an array, you use `myArray.[i] <- 3` (*not* inside a let expression).

# regex - 左边最小的匹配表达式？

> ID：12304764
> 
> 赞同：2
> 
> 时间：2012-09-06T16:49:55.077
> 
> 标签：regex, math, emacs, latex, libreoffice

这是我所拥有的：

```
{a} {b} over {c} {d}
{a} {{b} over {c}} {d} 
```

（我有一些文字，它有这样的表达方式）我想将两者都转换为：

```
{a} \frac{b}{c} {d} 
```

这是我最好的选择：

```
(goto-char (point-min))
(while (search-forward-regexp "{+?\\(.+?\\)} +over +{\\(.+?\\)}+?" nil t) 
  (replace-match (concat "\\\\" "frac{\\1}{\\2}") t nil)) 
```

但它不起作用。我得到：

```
\frac{a} {b}{c} {d}
\frac{a} {{b}{c}} {d} 
```

分别。

问题是——我的正则表达式在左边尽可能多地捕获。虽然我需要它尽可能少地捕获。

**编辑**：

接受的答案不适用于更复杂的情况（我也需要）：

```
{d^{2} q} over {d t^{2} }
{{d^{2} q} over {d t^{2} }} 
```

（因为嵌套）

这是解析器的工作版本（代码中有趣的部分从 开始`while`）：

```
(defun over2frac ()
  (interactive)
  (let (start end
        (case-fold-search nil)
        lStart lEnd lStr
        rStart rEnd rStr)
    (if (use-region-p)
        (progn (setq start (region-beginning)) ;; then
               (setq end (region-end)))
      (progn (setq start (line-beginning-position)) ;; else
             (setq end (line-end-position))))
    (save-restriction 
      (narrow-to-region start end)
      (goto-char (point-min))

      (while (search-forward-regexp "{\\(.+\\)}\s*over\s*{\\(.+?\\)}" nil t) 

        ;; r:
        (goto-char (match-beginning 2))
        (backward-char 1)
        (setq rStart (point))
        (forward-sexp)
        (setq rEnd (point))
        (setq rStr (buffer-substring-no-properties rStart rEnd))

        ;; l:
        (goto-char (match-end 1))
        (forward-char)
        (setq lEnd (point))
        (backward-sexp)
        (setq lStart (point))
        (setq lStr (buffer-substring-no-properties lStart lEnd))

        (delete-region lStart rEnd)
        (insert "\\" "frac" lStr rStr)
        )))) 
```

由于它使用`forward-sexp`and `backward-sexp`-- 并且没有定义`syntax-table`-- 它只能在适当的模式下工作（例如`rst-mode`and `text-mode`-- 但不是`emacs-lisp-mode`。对于上面的复杂示例，它给出：

```
\frac{d^{2} q}{d t^{2} }
{\frac{d^{2} q}{d t^{2} }} 
```

**编辑 2**：

```
(defun backslash-func--args-on-both-sides (Find Replace)
  (goto-char (point-min))
  (while (search-forward-regexp (concat "\\([^{]+\\)}\s*" Find "\s*{\\([^}]+\\)") nil t) 

    ;; r:
    (goto-char (match-beginning 2))
    (backward-char 1)
    (setq rStart (point))
    (forward-sexp)
    (setq rEnd (point))
    (setq rStr (buffer-substring-no-properties rStart rEnd))

    ;; l:
    (goto-char (match-end 1))
    (forward-char)
    (setq lEnd (point))
    (backward-sexp)
    (setq lStart (point))
    (setq lStr (buffer-substring-no-properties lStart lEnd))

    ;; s:
    (goto-char lStart)
    (if (looking-back "{") 
        (setq lStart (1- (point))))

    (goto-char rEnd)
    (if (looking-at "}")
        (setq rEnd (1+ (point))))

    (delete-region lStart rEnd)
    (insert "\\" Replace lStr rStr))

  (goto-char (point-min))
  (while (search-forward-regexp (concat "\\([0-9a-zA-Z_^]+\\)\s*" Find "\s*\\([0-9a-zA-Z_^]+\\)") nil t) (replace-match (concat "\\\\" Replace "{\\1}{\\2}") t nil))
  ) 
```

这会转换两件事：

```
{d^{2} q} over {d t^{2} }
{{d^{2} q} over {d t^{2} }} 
```

到

```
\frac{d^{2} q}{d t^{2} } 
```

我不在`let`这里使用，因为所有的变量都已经是本地的了——而 defun 本身在另一个 defun 中。[完整代码](https://github.com/bk322/bk-dotfiles/blob/master/.emacs.d/site-lisp/bk/bk_lomath-tex.el)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:08:30.653

使用这个表达式：[http ://regex101.com/r/kY8jY5](http://regex101.com/r/kY8jY5)

`/{+([^{}]+)}\s*over\s*{([^{}]+)}+/g`

该表达式应与 emacs 兼容。

用。。。来代替：

`\frac{\1}{\2}`

注意：我不确定您是否使用`\1`或`$1`在 emacs 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:13:09.563

通过在正则表达式的开头添加一个贪心`*`，并将其放在替换的首位：

```
(goto-char (point-min))
(while (search-forward-regexp "\\(.*\\){+?\\(.+?\\)} +over +{\\(.+?\\)}+?" nil t) 
  (replace-match (concat "\\1\\\\" "frac{\\2}{\\3}") t nil)) 
```

我得到它来产生这个：

```
{a} \frac{b}{c} {d}
{a} {\frac{b}{c}} {d} 
```

我不确定是否有任何方法可以摆脱额外的环境`{}`......

# c# - 将KML上传到融合表c#

> ID：12304765
> 
> 赞同：1
> 
> 时间：2012-09-06T16:50:02.380
> 
> 标签：c#, google-fusion-tables

我正在寻找通过 c# 将 KML 上传到 Google Fushion 表的简单示例。谁能指出我这种例子？
非常感谢！

# informatica-powercenter - 计算 PowerCenter 会话中的插入、删除和更新

> ID：12304767
> 
> 赞同：1
> 
> 时间：2012-09-06T16:50:14.710
> 
> 标签：informatica-powercenter, informatica

PowerCenter 9.1 中是否有办法在会话执行后获取插入、删除和更新的数量？我可以在日志中看到数据，但我想在表格中以更有序的方式查看它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:28:45.940

我知道的唯一方法需要适当地构建映射。您需要有 3 个单独的目标实例，并使用路由器将行重定向到`TARGET_insert`or`TARGET_update`或`TARGET_delete`。然后，Workflow Monitor 将为插入、更新和删除的行显示单独的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:24:07.403

您可以设计映射以填充审核表以跟踪插入/更新/删除的数量

您可以从标题为“PC 映射：自定义审计表”的 Informatica Marketplace 块下载示例实施

[https://community.informatica.com/solutions/mapping_custom_audit_table](https://community.informatica.com/solutions/mapping_custom_audit_table)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:53:58.160

有几种方法， 1\. 您可以使用 $tgtsuccessrows / $TgtFailedRows 并将其分配给工作流变量 2\. 表达式转换可以与变量端口一起使用以跟踪插入/更新/删除 3\. 您甚至可以在第二次查询 OPB_SESSLOG流以获取同一会话内的行数。

不确定 PowerCenter 9.1 是否提供了解决此问题的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T15:07:33.817

有多种方法可以创建分配任务，在会话完成后立即附加此分配任务一旦会话完成运行，分配任务会将会话统计信息从会话传递到工作流级别定义的工作流变量，会话统计信息如 $session .status,$session.rowcount 等，现在创建一个包含映射的工作集，将在工作流级别捕获的会话统计信息传递给新创建的工作集，并从工作集传递到映射，现在一旦统计信息在映射级别可用映射扫描这些统计信息（使用 SQL 或 EXP 转换），然后将这些统计信息写入 AUDIT 表...在每个会话之后附加分配任务和工作集的组合，它将在会话完成后开始捕获每个会话的统计信息它运行....

# android - 不要在旋转时重新加载 webview 视频

> ID：12304769
> 
> 赞同：7
> 
> 时间：2012-09-06T16:50:23.160
> 
> 标签：android, webview, android-webview

我有一个显示嵌入视频的 web 视图。当设备旋转时，我可以防止整个页面被重新加载：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    webView.saveState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);

    webView.restoreState(savedInstanceState);
} 
```

但是，由于我正在此 web 视图中播放视频，因此视频不会继续播放。相反，它会加载视频，就好像它还没有开始播放一样。如何旋转屏幕但像什么都没发生一样继续播放视频？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T16:57:54.113

在 manifest.xml 中添加

```
 upto API level 12

       <activity
            android:label="@string/app_name"
            android:name="Activity"
            android:configChanges="keyboardHidden|orientation">
 </activity>

after apl level 12,

       <activity
            android:label="@string/app_name"
            android:name="Activity"
            android:configChanges="keyboardHidden|orientation|screenSize">
      </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:53:46.810

添加

```
android:configChanges="keyboardHidden|orientation" 
```

到您的 AndroidManifest.xml 中的活动

例如

```
<activity
                android:label="@string/app_name"
                android:name="Activity"
                android:configChanges="keyboardHidden|orientation">
</activity> 
```

# android-listview - 创建自定义适配器类需要什么？

> ID：12304770
> 
> 赞同：2
> 
> 时间：2012-09-06T16:50:23.480
> 
> 标签：android-listview, android-adapter, custom-lists

我创建了一个包含 ImageView 和 TextView 的简单列表，而不使用自定义适配器类。我浏览了互联网，发现大多数自定义列表都是使用单独的适配器类创建的......这是我的列表行布局......

list_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
        android:layout_marginRight="15dp"/>

    <TextView android:id="@+id/list_item_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="15dp"
        android:textSize="15sp"/>

</LinearLayout> 
```

MainActivity.java

```
 //Taking reference of a ListView
    ListView listView = (ListView) findViewById(R.id.list_view);

    //Setting up ArrayList to feed ArrayAdapter
    ArrayList<String> fruits= new ArrayList<String>();
    fruits.add("Apple");
    fruits.add("Mango");
    fruits.add("Strawberries");
    fruits.add("Grapes");

    //Setting up ArrayAdapter   
    ArrayAdapter<String> adapter = new ArrayAdapter<String>
            (this, R.layout.list_row, R.id.list_item_id, fruits);
    listView.setAdapter(adapter); 
```

上面的代码工作正常......我只想知道什么时候创建单独的适配器类，它有什么用？换句话说，创建一个单独的适配器类有什么好处？任何帮助将不胜感激...在此先感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:58:23.187

你甚至为你的每一行设置`TextView`和吗？因为看起来你不是。您为列表中的每一行提供相同的图像，并且文本由适配器设置。`ImageView``ListView`

如果您想将多个发送`Lists`到您的`ArrayAdapter`，则必须编写自己的适配器。就像你为你的`ListView`. 您必须编写自己的`ArrayAdapter`来设置文本**和**图像，通过将它们膨胀到每个`rowView`具有相应的文本和图像。

这也适用于每一行的更复杂的 UI，比如这个：（ [来源：][[addictivetips.com](http://cloud.addictivetips.com/wp-content/uploads/2012/06/Reddit-Android-Reddit-Is-Fun1.jpg)][）][![](../Images/48868d9a972aab6853eda34640b90e11.png)](https://i.stack.imgur.com/UTxlh.jpg)

每行有多个`TextViews`和`Buttons`和一个`ImageView`从一个膨胀的`row.xml`

# numerical-methods - 数值求解两个耦合非线性二阶微分方程

> ID：12304772
> 
> 赞同：0
> 
> 时间：2012-09-06T16:50:33.640
> 
> 标签：numerical-methods, differential-equations

我在拉格朗日力学中遇到了以下微分方程组。您能否建议一种数值方法，以及有关如何解决它的相关链接和参考。另外，在 Matlab 或 Mathematica 上是否有更短的实现？

mx (y 点)^2 + mgcosy - Mg - (M=m)(x 双点) =0

gsiny + 2(x 点)(y 点 + x(y 双点)=0

其中 (x 点) 或 (y 点)= dx/dt 或 dy/dt，双点表示 wrt 时间的双导数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:48:01.960

您可以创建一个向量 Y = (xyuv)' 以便

```
dx/dt = u
dy/dt = v
du/dt = d²x/dt²
dv/dt = d²y/dt² 
```

可以从方程中分离出二阶导数，所以你得到

```
d²x/dt² = (m*g*cos(y) + m*x*v² - M*g)/(M-m)
d²y/dt² = -(g*sin(y) - 2*u*v)/x 
```

现在，您可以尝试使用标准 ODE 求解器来求解它，例如[Runge-Kutta](http://en.wikipedia.org/wiki/Runge-kutta)方法。Matlab 有一套求解器，例如 ode23。我没有测试他跟随，但它会是这样的：

```
function f = F(Y)
    x = Y(1); y = Y(2); u = Y(3); v = Y(4);
    f = [0,0,0,0];
    f(1) = u;
    f(2) = v;
    f(3) = (m*g*cos(y) + m*x*v*v - M*g)/(M-m);
    f(4) = -(g*sin(y) - 2*u*v)/x;

[T,Y] = ode23(F, time_period, Y0); 
```

# c# - 如何将代码示例放在 XML 注释中？

> ID：12304785
> 
> 赞同：10
> 
> 时间：2012-09-06T16:51:23.207
> 
> 标签：c#, xml-comments

我有一个这样的 XML 注释。

```
/// <summary>
/// Lorem ipsum
/// </summary>
/// <param name="entity"></param>
/// <returns></returns> 
```

我想在其中放置一段（多行）代码。我怎样才能做到这一点 ？

## 编辑

这是有关多行代码的信息 在[Intellisense 的注释中添加换行符](https://stackoverflow.com/questions/467202/adding-line-breaks-to-comments-for-intellisense)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T16:54:53.360

您可以使用[`<code>`](http://msdn.microsoft.com/en-us/library/f8hahtxf)和[`<c>`](http://msdn.microsoft.com/en-us/library/te6h7cxs)XML 标签

```
/// <summary>
/// ...
/// <c>Place your code here</c>
/// </summary>
/// <code>
/// More code here
/// </code> 
```

根据评论，`<summary>`您可以在其中使用[`<c>`](http://msdn.microsoft.com/en-us/library/te6h7cxs)标签，在外部`<summary>`您可以使用[`<code>`](http://msdn.microsoft.com/en-us/library/f8hahtxf)标签。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T16:53:03.180

要添加示例，请使用

```
<example> 
<code>
Put your example here.
</code>
</example> 
```

标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T17:12:48.803

见 MSDN：

*   [XML 文档注释（C# 编程指南）](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)
*   [文档注释的推荐标签（C# 编程指南）](http://msdn.microsoft.com/en-us/library/5ast78ax.aspx)

不过，应该注意的是，XML 文档注释就是 XML，编译器将处理**任何**有效的 XML 标记：它的语义取决于您的[文档处理器](http://www.doxygen.nl)。

ECMA 334的附录 E [：C# 语言规范](http://www.ecma-international.org/publications/standards/Ecma-334.htm)又名[ISO 23270：信息技术 — 编程语言 — C#](http://standards.iso.org/ittf/PubliclyAvailableStandards/c042926_ISO_IEC_23270_2006%28E%29.zip)指定了一组标准的 XML 文档标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:59:18.067

我不完全确定你在问什么，但这是我最好的选择：

我通常将代码示例放在`<example> </example>`标签内。

```
/// <summary>
/// Lorem ipsum
/// </summary>
/// <example>
///    Put you're example here.
/// </example>
/// <param name="entity"></param>
/// <returns></returns> 
```

# vba - VBA：从 URL 打开文本文件以读取

> ID：12304786
> 
> 赞同：3
> 
> 时间：2012-09-06T16:51:24.407
> 
> 标签：vba, excel

我的网站上有一个文本文件，其中仅包含字符串“1.15”（用于我正在编写的应用程序的版本）。在初始化用户表单时，我想从其 URL 读取该文件并返回字符串“1.15”，以便我可以根据应用程序的版本（存储为 const 字符串）检查它。

这是我想要的格式...

```
Const version As String = "1.14"
Const currentVersionURL As String = "http://mywebsite.com/currentversion.txt"

Sub UserForm_Initialize()

    If version <> GetCurrentVersionNumber() Then
        MsgBox "Please update the application."
    End If

End Sub

Function GetCurrentVersionNumber() As String

    ' What do I put here? :(

End Function 
```

我知道该`Workbooks.OpenText`方法，但我不想将字符串写入工作簿。我曾尝试使用`ADODB.LoadFromFile`and`WinHttp.WinHttpRequest.Open`方法，但两者都无法读取文件。

任何有关填写内容`GetCurrentVersionNumber()`的建议将不胜感激。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T17:20:40.880

虽然它不能直接回答您的问题，但更简单的方法是将其设为 XML 文件而不是文本文件。还有更多内置工具可以轻松地从 URL 打开 XML 文件。第二个优点是它还使其更加灵活，因此您可以在以后更轻松地将新数据元素添加到 XML 文件中。

例如，如果您创建了一个`http://mywebsite.com/currentversion.xml`如下所示的文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<AppData>
    <Version>1.14</Version>
</AppData> 
```

然后，在 VB.NET 中，您可以像这样轻松地阅读它：

```
Function GetCurrentVersionNumber() As String
    Dim doc As New XmlDocument()
    doc.Load("http://mywebsite.com/currentversion.xml")
    Return doc.SelectSingleNode("/AppData/Version").InnerText
End Function 
```

或者，在 VBA 中，您可以这样阅读：

```
Function GetCurrentVersionNumber() As String
    Dim doc As MSXML2.DOMDocument??  ' Where ?? is the version number, such as 30 or 60
    Set doc = New MSXML2.DOMDocument??
    doc.async = False
    doc.Load("http://mywebsite.com/currentversion.xml")
    GetCurrentVersionNumber = doc.SelectSingleNode("/AppData/Version").Text
End Function 
```

您将需要添加对**Microsoft XML 的引用，v?.?** 图书馆，虽然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:05:14.860

Try this (**UNTESTED**)

```
Option Explicit

Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" (ByVal pCaller As Long, _
ByVal szURL As String, ByVal szFileName As String, _
ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long

Private Declare Function GetTempPath Lib "kernel32" Alias "GetTempPathA" _
(ByVal nBufferLength As Long, ByVal lpBuffer As String) As Long

Private Const MAX_PATH As Long = 260

Const currentVersionURL As String = "http://mywebsite.com/currentversion.txt"
Const version As String = "1.14"

Dim Ret As Long

Sub UserForm_Initialize()
    If version <> GetCurrentVersionNumber() Then
        MsgBox "Please update the application."
    End If
End Sub

Function GetCurrentVersionNumber() As String
    Dim strPath As String

    '~~> Destination for the file
    strPath = TempPath & "currentversion.txt"

    '~~> Download the file
    Ret = URLDownloadToFile(0, currentVersionURL, strPath, 0, 0)

    '~~> If downloaded
    If Ret = 0 Then
        Dim MyData As String, strData() As String

        Open "C:\MyFile.Txt" For Binary As #1
        MyData = Space$(LOF(1))
        Get #1, , MyData
        Close #1

        GetCurrentVersionNumber = MyData
    Else
        MsgBox "Unable to download the file"
        GetCurrentVersionNumber = ""
    End If
End Function

'~~> Get Users Temp Path
Function TempPath() As String
    TempPath = String$(MAX_PATH, Chr$(0))
    GetTempPath MAX_PATH, TempPath
    TempPath = Replace(TempPath, Chr$(0), "")
End Function 
```

# ruby-on-rails - Rails 控制器操作不响应更改

> ID：12304789
> 
> 赞同：0
> 
> 时间：2012-09-06T16:51:34.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller

我有一个订阅控制器，它最后重定向到 :root 和我的路由文件中的一行，它指向该操作的 url。起初我正在测试这个动作，没有任何麻烦。但是昨天我试图改变一些东西并且服务器没有响应这些改变，无论我在操作中做什么，它总是忽略所有内容并重定向到：root。

这就是我的动作的样子：

```
def fail
  test = Subscription.new
  p test
  binding.pry
  redirect_to :account
end 
```

这是我的路线：

```
match 'subscriptions/failed' => 'subscriptions#fail' 
```

每当我尝试转到`subscriptions/failed`它时，它都会忽略打印指令、绑定指令并重定向到`:root`而不是`:account`. 如果我对动作发表所有评论，它仍然会做同样的事情，唯一不同的反应是当我删除动作时。可能很明显，但我看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:01:52.173

根据您的问题描述，我会检查是否有 before_filter 或 around_filter 用于`fail`重定向到`:root`. 如果调用该操作，他们将完全按照您的描述进行操作，并且如果未调用该操作，它们将不会做任何事情并且不会做任何事情。可以肯定的是，您可以为相关控制器发布更多代码。

# c# - 使用给定的属性作为字符串

> ID：12304792
> 
> 赞同：1
> 
> 时间：2012-09-06T16:51:39.920
> 
> 标签：c#, .net, sql, linq, sql-order-by

我想使用一种单一的通用方法来检索表示 lambda 表达式中的属性的给定字符串的有序列表。

我知道以前有人要求过这个，但它对我不起作用。我试过了，它抛出了错误：

```
db.Books.OrderByDescending(x => x.GetType().GetProperty("Discount").GetValue(x,null))
        .Take(3); 
```

我现在正在使用这个：

```
public IQueryable<Book> GetCheapestBooks()
{
    return db.Books.OrderBy(x => x.Discount)
                   .Take(3);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:58:17.153

也许这就是你正在寻找的：

[动态链接](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

有了这个，您可以编写如下查询：

```
var result = db.Books.OrderBy( "Discount" ).Take( 3 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:16:54.403

简单的控制台应用程序。

```
class A
        {
            public int prop1 { get; set; }
            public int prop2 { get; set; }
        }

    class Program
    {
        static IEnumerable<T> GenericOrderByDescending<T>(IEnumerable<T> arg, string property, int take)
        {
            return arg.OrderByDescending(x => x.GetType().GetProperty(property).GetValue(x, null)).Take(take);
        }

        static void Main(string[] args)
        {           
            IEnumerable<A> arr = new List<A>()
                                     {
                                         new A(){ prop1 = 1, prop2 = 2},
                                         new A(){prop1 = 2,prop2 =2},
                                         new A(){prop1 = 3,prop2 =2},
                                         new A(){prop1 = 441,prop2 =2},
                                         new A(){prop1 = 2,prop2 =2}
                                     };

            foreach(var a1 in GenericOrderByDescending<A>(arr, "prop1", 3))
            {
                Console.WriteLine(a1.prop1);
            }
        }
    } 
```

您可以将您的`db.Boks.AsEnumerable()`as 参数传递给`GenericOrderByDescending<T>()`方法。您应该键入`db.Boks`项目的类型，而不是 T。我的示例对类实例数组进行排序`A`，我没有错误，它工作正常。我理解正确吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:28:17.640

您可以尝试使用此代码

```
public IQueryable<Book> GetCheapestBooks()
{
    db.Books.OrderBy(x => x.Discount).Take(3).AsQueryable<Book>();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:53:17.907

您可以创建一个扩展方法来创建属性表达式：

```
private static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string propertyName)
{
    PropertyInfo prop = typeof(T).GetProperty(propertyName);
    ParameterExpression paramExpr = Expression.Parameter(typeof(T), "obj");
    MemberExpression propExpr = Expression.Property(paramExpr, prop);

    Type funcType = typeof(Func<,>).MakeGenericType(typeof(T), prop.PropertyType);
    Type keySelectorType = typeof(Expression<>).MakeGenericType(funcType);
    LambdaExpression keySelector = Expression.Lambda(funcType, propExpr, paramExpr);

    MethodInfo orderByMethod = typeof(Queryable).GetMethods().Single(m => m.Name == "OrderBy" && m.GetParameters().Length == 2).MakeGenericMethod(typeof(T), prop.PropertyType);
    return (IOrderedQueryable<T>) orderByMethod.Invoke(null, new object[] { source, keySelector });
} 
```

# javascript - 我应该如何声明我的自调用函数？

> ID：12304793
> 
> 赞同：8
> 
> 时间：2012-09-06T16:51:41.770
> 
> 标签：javascript, anonymous-function

我见过这样写的 Javascript 中的自调用函数：

```
(function () {
    // foo!
})(); 
```

但我也看到它们是这样写的：

```
(function () {
    // bar!
}()); 
```

从语法上讲，它们做的事情完全相同。实际上，我个人的习惯是第一种格式，但是我应该注意这两种格式有什么区别吗？像浏览器扭结或其他什么？

例如，一件非常微不足道的事情是，如果第二种格式应该可靠地工作，那么这意味着这样的事情也应该是可能的：

```
function () {
    // shut the front door! saved two characters right there!
}(); 
```

不过，这会极大地损害可读性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:58:13.813

第一的：

就像您假设的那样，您的自调用匿名函数的前两个版本之间绝对没有区别。没有浏览器链接，怪癖，只是归结为个人喜好（顺便说一句，Douglas Crockford 将后一种形式称为“狗球”）。

第二：

```
function() {
}() 
```

不会按设计工作，因为该语句创建了一个*函数 statement/declaration*。您需要一个*函数表达式*来立即调用自身。要创建函数表达式，您可以执行多项操作。将整个语句放在括号中是一种方法，但你也可以写

```
!function() {
}() 
```

或者

```
+function() {
} 
```

所有这些运算符都会生成一个表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:05:23.533

前两个是相同的，但如果我没记错的话，其中一个是 jsLint 的首选（我认为是第二个）。

第三个在大多数解释器中引发[语法错误](http://jsfiddle.net/MwrCL/)，但还有其他变体：

```
!function() {
    alert('I’m executing myself!');
}();

var noname = function() {
    alert(noname); // undefined!
}(); 
```

​您可以用 or 替换`!`（`+`它们`-`都不会让 Crockford 高兴）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:58:41.107

这主要是一个约定问题。

`(function () {}());`<- 执行前少一个堆栈帧（也许）

`(function () {})();`<- 在括号外执行，所以在执行前有一个很小的框架，虽然我不喜欢这种风格，但 IMO 它在视觉上是断开的。

`function () {}();` ~~<- 这只是 IMO 的坏习惯，这不是很明显这是一个主要是由于约定的[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，但这也有一个问题，如果你在表达式之前忘记了一个分号，它会在某些条件下默默地分配变量值未定义。~~

例子：

```
var x = 0,
    y = 1,
    z = 3,

function () {
    alert("Z is now undefined, instead of throwing a syntax error.");
}(); 
```

 ~~正如 Andre Meinhold 所说，这不在表达位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:02:58.467

务实地说，JSLint 会抱怨第一种格式而更喜欢第二种格式。除此之外，这真的是个人喜好和一致性是这里的关键。

第三种格式将导致 SyntaxError，因此您不能使用它。那是因为您创建的是函数声明，而不是函数表达式。它是您在使用立即函数模式时调用的函数表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:06:31.880

[Crockford](http://javascript.crockford.com/code.html)说要使用`(function () {...}())`.

这只是一种风格选择，但就社区的利益达成一致意见（冒着引发激烈战争的风险）为什么不使用 Crockford 的呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T17:06:59.460

另外，请记住，这`(function () { }());`会增加潜在的混乱。因为在一个长函数中，不注意的人可能会看到两个右括号，只有一个被打开。~~

# android - 如何在 flex 移动应用程序中嵌入 haxe 应用程序？

> ID：12304801
> 
> 赞同：0
> 
> 时间：2012-09-06T16:51:58.003
> 
> 标签：android, apache-flex, haxe

是否可以在 flex 移动应用程序中嵌入 haxe 应用程序？

事情是，我需要在本地录制视频，我想使用一个用 haxe 编写的轻量级媒体服务器。所以如果我可以将它嵌入到我的应用程序中会很糟糕？我真的看不到这样做的方法，但我正在考虑本地扩展，等等......

你认为有可能吗？

# java - 让 SWIG 理解 char** 以便在 Java 中使用它

> ID：12304806
> 
> 赞同：2
> 
> 时间：2012-09-06T16:52:12.853
> 
> 标签：java, c++, swig

我有以下三个文件：

sab1.hpp：

```
class CRectangle 

{
    int x, y;

public:
    void set_values (int,int);
    void print(char **db);
    int area ();
}; 
```

sab1.cpp：

```
#include <iostream>
#include "sab1.hpp"
using namespace std;

int CRectangle::area () 
{
    return (x*y);
}

void CRectangle::set_values (int a, int b) 
{
    x = a;
    y = b;
}

void CRectangle::print(char **db) 
{
    cout <<db[0];
}

int main () 
{
    CRectangle rect;
    char *a[] = {"Hi", "bye" }  ;

    rect.set_values (3,4);
    cout << "area: " << rect.area();
    rect.print(&a[0]);
    return 0;
} 
```

sab1.i：

```
%module Rec
%{
/* Includes the header in the wrapper code */
#include "sab1.hpp"
%}
class CRectangle {
    int x, y;
public:
    void set_values (int,int);
    void print(char **db);
    int area ();
}; 
```

我使用以下常用命令创建各种中间文件：

1) 痛饮 -c++ -java sab1.i

2) g++ -fpic -c sab1.cpp sab1_wrap.cxx -I /usr/lib/jvm/java-6-openjdk-i386/include/ -I /usr/lib/jvm/java-6-openjdk-i386/include /linux/

然后我使用这个创建一个共享库： g++ --shared sab1.o sab1_wrap.o -o libegs.so

然后我创建以下 Java 文件来访问 C++ 类的函数：

```
public class Test 
{
    public static void main(String args[]) 
    {
        System.loadLibrary("egs");
        CRectangle a = new CRectangle();
        a.set_values(4,5);
        System.out.println(a.area());
        a.print("Hi");
    }
} 
```

当我编译 Java 文件 (javac -classpath . Test.java ) 时，我收到以下错误：

```
Test.java:17: print(SWIGTYPE_p_p_char) in CRectangle cannot be applied to (java.lang.String)  a.print("Hi");
 ^ 
```

那么，如何让 Java 代码理解 char ** 变量呢？我尝试在 SWIG 接口文件 (sab1.i) 中创建类型映射，但我无法正确弄清楚。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:28:34.647

```
%module Rec
%include "various.i"

%apply char **STRING_ARRAY { char **db }

%include "sab1.hpp" 
```

您链接到的文件`various.i`应该以这种方式工作，只需将其放在 SWIG 可以找到它的位置，在您的项目包含目录或 SWIG 包含路径中。

使用`%include`而不是`#include "sab1.hpp"`意味着我们不应该复制我们想要包装的类的定义。该`%apply`指令将类型映射 from`various.i`应用于所有`char**`类型为 name 的参数`db`。如果您要包装其他参数名称，请像这样添加它们：

```
%apply char **STRING_ARRAY { char **db, char **foo, char **bar } 
```

如果您只想包装*所有*类型的参数`char**`（不安全！），只需省略名称：

```
%apply char **STRING_ARRAY { char ** } 
```

由于您的 C++ 代码期望该数组包含 2 个字符串，因此只要您`String`从 Java 传递一个包含 2 个或更多 s 的数组，就可以了。类型映射将为数组添加第三个空指针，但您的 C++ 代码不会注意到。如果您传递一个少于 2`String`秒的数组，您可能会导致 C++ 代码崩溃。

如果您包装的任何 C++ 函数也*返回*一个字符串数组，那么您就有麻烦了。SWIG 将尝试将它们转换回 Java 数组，但当它在数组中查找第三个元素时可能会崩溃（它将继续查找元素，直到找到空指针）。如果你不介意丢弃返回值，你可以这样做：

```
%module Rec
%include "various.i"

%typemap(jni)     char **db = char **STRING_ARRAY;
%typemap(jtype)   char **db = char **STRING_ARRAY;
%typemap(jstype)  char **db = char **STRING_ARRAY;
%typemap(in)      char **db = char **STRING_ARRAY;
%typemap(freearg) char **db = char **STRING_ARRAY;
%typemap(javain)  char **db = char **STRING_ARRAY;

%include "sab1.hpp" 
```

这只会应用类型映射中处理输入参数的部分。

# java - 创建一个可滚动的关卡选择器（AndEngine）

> ID：12304807
> 
> 赞同：0
> 
> 时间：2012-09-06T16:52:16.950
> 
> 标签：java, android, andengine

我的关卡选择器有问题。我正在使用我在这个论坛上的教程中找到的代码，但它工作不正确。

事实是我有两个场景，当用户混合播放时我正在使用我将引擎设置为第二个场景，然后用户可以滚动各个关卡。

然后当用户按下后退按钮时，我通过在我离开之前保存位置然后使用camer.setCenter（x，y）将其设置回来，将相机设置回其初始位置；

一旦用户返回到水平选择器场景，它就不会正确担心。当用户滚动时，它会滚动到屏幕外并且不能正常工作。

这是我的代码。如果有人有更好的方法，请随时与我分享。

```
 @Override
            public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

                    // TODO Auto-generated method stub
                    clickDetector.onTouchEvent(pSceneTouchEvent);
                    surfaceScrollDetector.onTouchEvent(pSceneTouchEvent);

           return true;
            }

                    @Override
                    public void onScrollStarted(ScrollDetector pScollDetector,
                                    int pPointerID, float pDistanceX, float pDistanceY) {
                             // TODO Auto-generated method stub
                distanceX = 0;

                    }

                    @Override
                    public void onScroll(ScrollDetector pScollDetector, int pPointerID,
                                    float pDistanceX, float pDistanceY) {
                            // TODO Auto-generated method stub

                            camera.offsetCenter(-pDistanceX, 0);

                distanceX += pDistanceX;
                    }

                    @Override
                    public void onScrollFinished(ScrollDetector pScollDetector,
                                    int pPointerID, float pDistanceX, float pDistanceY) {
                             if ((distanceX > TURN_PAGE_DISTANCE) && (page > 0))
                 {

                         page--;
                         camera.offsetCenter(distanceX - CAMERA_WIDTH, 0);
                 }
                 else if ((distanceX < -TURN_PAGE_DISTANCE) && (page < LEVEL_PAGES - 1))
                 {

                         page++;
                         camera.offsetCenter(distanceX + CAMERA_WIDTH, 0);
                 }
                 else
                 {

                         camera.offsetCenter(distanceX, 0);
                 }

                    }

                    @Override
                    public void onClick(ClickDetector pClickDetector, int pPointerID,
                                    float pSceneX, float pSceneY) {
                             //loadLeve(levelClicked);
                    }

                     private void createHUD()
                    {
                            // 不用考虑层
                            hud = new HUD();
                            Rectangle hudBox = new Rectangle(20, 700, 80, 80, getVertexBufferObjectManager())
                            {
                                    @Override
                                    public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX,
                                                    float pTouchAreaLocalY)
                                    {
                                            // TODO Auto-generated method stub
                                            if (pSceneTouchEvent.isActionUp())
                                            {
                                                    runOnUiThread(new Runnable()
                                                    {
                                                            @Override
                                                            public void run()
                                                            {
                                                                    // TODO Auto-generated method stub
                                                                    Toast.makeText(Menu.this, "BACK", Toast.LENGTH_SHORT).show();
                                                            }
                                                    });
                                            }

                                            return true;
                                    }
                            };
                            hudBox.setColor(Color.RED);
                            hud.attachChild(hudBox);
                            hud.registerTouchArea(hudBox);
                            camera.setHUD(hud);
                    }

    @Override
    public boolean onKeyDown(final int pKeyCode, final KeyEvent pEvent) {
                  if (pKeyCode == KeyEvent.KEYCODE_BACK
                            && pEvent.getAction() == KeyEvent.ACTION_DOWN
                            ) {

                                    if(level_scene){
                                      level_scene = false;
                                      camera.setCenter(camera_x, camera_y);
                                  mEngine.setScene(MainMenuScene);
                                    }else{
                                            finish();
                                    }
                                     return true;

                            }
                               return super.onKeyDown(pKeyCode, pEvent);

    }

    private void createLevelBoxes()
    {

            // 计算行间距
            int spaceBetweenRaws = (CAMERA_HEIGHT / LEVEL_ROWS_PER_SCREEN) - LEVEL_PADDING;
            // 计算列间距
            int spaceBetweenColumns = (CAMERA_WIDTH / LEVEL_COLUMNS_PER_SCREEN) - LEVEL_PADDING;

            int level = 0;

            int boxX = LEVEL_PADDING;
            int boxY = LEVEL_PADDING;

            for (int i=0; i<LEVEL_PAGES; i++)
            {
                    int startX = i * CAMERA_WIDTH;

                    for (int j=0; j<LEVEL_ROWS_PER_SCREEN; j++)
                    {
                            for (int k=0; k<LEVEL_COLUMNS_PER_SCREEN; k++)
                            {
                                    final int levelToLoad = level;
                               box = new Sprite(startX + boxX, boxY, 90,70,this.levelIcon,this.getVertexBufferObjectManager())
                                    {
                                            @Override
                                            public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX,
                                                            float pTouchAreaLocalY)
                                            {

                                                    // TODO Auto-generated method stub

                                                             levelClicked = levelToLoad;
                                                           if(levelClicked <= maxLevelReached){

                                                               Intent intent = new Intent(Menu.this, GameLevel.class);

                                                            intent.putExtra("level", levelClicked);
                                                            startActivity(intent);
                                                            woodClick.play();
                                                           }
                                                    return false;
                                            }
                                    };

                                    if (level <= maxLevelReached)
                                    {

                                    }
                                    else
                                    {
                                      box.setColor(0.4117647f, 0.4117647f,0.4117647f);      
                                    }

                                    levelScene.attachChild(box);
                                    levelScene.registerTouchArea(box);
                                    int textOffX = 0;
                                    if (level < 10)
                                    {
                                            textOffX = 28;
                                    }
                                    else
                                    {
                                            textOffX = 20;
                                    }
                                    box.attachChild(new Text(textOffX, 20, font, String.valueOf(level + 1),this.getVertexBufferObjectManager()));

                                    level++;
                                    boxX += spaceBetweenColumns + LEVEL_PADDING;
                                    if (level > LEVELS)
                                    {
                                            break;
                                    }
                            }
                            if (level > LEVELS)
                            {
                                    break;
                            }

                            boxY += spaceBetweenRaws + LEVEL_PADDING;
                            boxX = LEVEL_PADDING;
                    }

                    boxY = LEVEL_PADDING;

            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:25:08.603

我认为当用户按下返回键时，您必须再次将相机的视图边界调整为当前场景。

# php - wordpress 小部件不会保存

> ID：12304808
> 
> 赞同：5
> 
> 时间：2012-09-06T16:52:18.103
> 
> 标签：php, wordpress

我在这里按照本教程设置了“基本”主题：

[http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/](http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/)

一切都运行良好，但现在在最后一部分，我希望侧边栏显示“新闻提要”页面的样式。主题中的所有内容，我能理解的都设置正确。在functions.php中定义了“primary”和“secondary”两个widget区域，未修改的functions.php和sidebar.php可以在这里查看：

[http://code.google.com/p/your-wordpress-theme/source/browse/trunk/functions.php](http://code.google.com/p/your-wordpress-theme/source/browse/trunk/functions.php) 和 [http://code.google.com/p/your-wordpress-theme/source/browse/树干/sidebar.php](http://code.google.com/p/your-wordpress-theme/source/browse/trunk/sidebar.php)

所以这就是发生的事情，我进入了外观 - > 管理员中的小部件管理器。主要和次要小部件区域显示在右侧。

我将类别和最近的帖子小部件拖到主要的（或次要的，没关系）。我在每个小部件上单击保存以进行良好的测量，然后如果我浏览并返回，小部件就消失了。什么都没有保存。

我没有使用任何插件，我没有第 3 方或自定义小部件。这些只是默认的香草 wordpress 小部件。

我在配置文件中启用了调试，但保存小部件配置时没有任何错误输出。我什至在更新小部件后检查了页面源，并且底部没有隐藏错误，正如一些人所建议的那样。

如果有人不能告诉我如何解决这个问题，有没有人至少可以告诉我如何调试这个，或者从这个东西中得到某种错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T18:39:13.797

尝试这个

转到您的 wp-admin --> 和外观 --> 小部件

然后在右上角你会看到一个屏幕选项按钮（一个弹出菜单）`Enable accessibility mode`并尝试你的小部件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:42:53.577

一些建议：

*   -安装调试栏[http://wordpress.org/extend/plugins/debug-bar/](http://wordpress.org/extend/plugins/debug-bar/)
*   在 wp-config 中启用 WP_DEBUG
*   尝试清除缓存/使用不同的浏览器或计算机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-01T22:15:05.700

设置小部件的ID，如

```
'id' => 'high-light-header', 
```

代替

```
'id' => 'highLightHeader', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-10T13:40:17.627

In my case, my widget had `input` fields with `type="number"`, and the `min` attributes had **fractions** of numbers -- once I've rounded them up and showed them as ints, it worked.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T12:49:11.870

我遇到了这个问题，并认为我会添加我的发现并更新这篇文章。我目前正在运行 4.9.8 版。我了解到您不能使用 Camel case 作为 id。

这条线不起作用。

```
register_nav_menu( 'newThemeArea', __( 'New Widget Area', 'theme' ) 
```

这条线确实有效

```
register_nav_menu( 'newthemearea' , __( 'New Widget Area', 'theme' ) 
```

# php - PHP 对象试图访问外部数组

> ID：12304810
> 
> 赞同：1
> 
> 时间：2012-09-06T16:52:25.687
> 
> 标签：php, oop, variables

我有一个对象需要访问我的统计信息中先前声明的数组。我当然可以在对象内部创建整个数组，但是由于多个对象使用完全相同的数组，因此没有理由在每次创建新数组时调用数据库来创建相同的数组来阻塞内存或时间目的。

所以，我知道对象不能访问全局变量，但是有什么解决方法可以从对象内部访问外部数组吗？

示例代码：

```
global $stats = array();
       $stats[1]['value']= 10;
       $stats[1]['value1'] =2;
       $stats[2]['value']= 12;
       $stats[2]['value1'] =1;

class Obj() {

  private $valueA;
  private $valueB;

  function __construct($user) {
    //access Database lets call $SQL;
    $valueA = SQL->value;

  }

  function showA() {
    return ( $valueA * $stats[1]['value1']) + $stats[1]['value'];
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:02:24.033

我会告诉你三种方法来做到这一点：

1.  将数组传递给类的构造函数。例如：`$myObject = new Obj( $stats );`
2.  创建一个为`$stats`数组提供服务的类：`$stats = new Stats(); $statsArray = $stats->getStats();`
3.  在您的类本身（不是构造）中使用公共方法内部的术语`global`来获取该变量：3：

    ```
    function() somePublicMethod() {
        global $stats;
        $valueA = SQL->value * $stats[1]['value1'] + $stats[1]['value'];
        $valueB = SQL->value * $stats[2]['value1'] + $stats[2]['value'];
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:57:59.663

是的，如何将您的课程更改为如下所示：

```
class Obj() {

  private $valueA;
  private $valueB;
  private $stats;

  function __construct($user, $stats) {
    $this->stats = $stats;
    //access Database lets call $SQL;
    $valueA = SQL->value * $this->stats[1]['value1'] + $this->stats[1]['value'];
    $valueB = SQL->value * $this->stats[2]['value1'] + $this->stats[2]['value'];
  }

  function showA() {
    return $valueA;
  }

} 
```

您不仅仅是`$stats`在实例化时传递给对象。或者，如果您不想在构造函数中使用它，只需创建一个`setStats($stats)`执行相同操作的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:11:06.230

您可以从类中访问变量，即

```
$stats[1]['value']= 10;
$stats[1]['value1'] =2;
$stats[2]['value']= 12;
$stats[2]['value1'] =1;

class Obj {
    var $myStats;
    function __construct() {
        global $stats;
        $this->myStats= $stats;
        print_r($this->myStats);
    }
}

$obj=new Obj; // Array ( [1] => Array ( [value] => 10 [value1] => 2 ) [2] => Array ( [value] => 12 [value1] => 1 ) ) 
```

[**演示**](http://codepad.viper-7.com/7hx203)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T11:03:17.093

感谢迈克、谢赫和克里斯蒂安，

我不能完全相信你的答案，因为你的话并没有帮助我理解答案，把'global $stats;' 进入课堂会导致我在回复中指出的错误。但是当我得到网站的许可时，我会“提高”你的分数。

对于任何寻求答案的人，提醒一下，关键是不要将整个 Array 存储在类中，从而造成巨大的内存浪费。关键是要访问存在于类之外的变量。

虽然通过将全局 $stats 包含在类的函数中来添加对全局 $stats 的访问，但确实会产生所需的结果，但它仍然需要将数据存储在类中，这再次与这一点相反。抱歉，我从一开始就不清楚这一点。

反而：

示例代码：

```
 function showA(&$stats) {
   return ( $valueA * $stats[1]['value1']) + $stats[1]['value'];
 } 
```

}

如果我理解正确，这将使用指向 $stats 变量的指针，仅在使用 stats 数组修改后返回 $valueA 的范围内。不将整个数组复制到另一个内存位置，也不复制类。

# ruby-on-rails - Nginx 和 Unicorn 上的 resource_url 出现意外行为

> ID：12304811
> 
> 赞同：2
> 
> 时间：2012-09-06T16:52:28.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, unicorn

我在 cpanel 上有一个简单的 unicorn+nginx 设置，使用 capistrano 部署。nginx.conf 服务器块如下所示：

```
server {
  error_log /var/log/nginx/vhost-error_log warn;
  listen 123.456.789.0;
  server_name my.dev.site.com www.my.dev.site.com;
  access_log /usr/local/apache/domlogs/my.dev.site.com-bytes_log bytes_log;
  access_log /usr/local/apache/domlogs/my.dev.site.com combined;
  root /home/me/sites/dev/current/public;
  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_pass http://unicorn_dev_site;
  }
  error_page 500 502 503 504 /500.html;
} 
```

在这种设置下，任何对资源的引用都会`User`使用 url 助手产生奇怪的行为。

`<%= users_path %>`变得`my.dev.site.com/users`如预期。

`<%= users_url %>`变成`unicorn_dev_site/users`.

造成这种情况的原因是什么，提示这种行为的这两个帮助方法之间有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:29:46.457

是你的代理。`*_path`助手生成表单的字符串

```
/path 
```

而`*_url`助手生成字符串，如

```
http(s)://h.o.s.t/path 
```

因此，由于您的代理设置，当请求到达 Rails 时，它已经过调整，主机被列为`http://unicorn_dev_site`，Rails 忠实地复制了它生成的 URL。

也就是说，除非您有多个主机，否则通常不需要使用`*_url`助手而不是助手。`*_path`但是，如果您想使用它们，您有几个选择：您可以在控制器中[设置默认主机，也可以使用](https://stackoverflow.com/questions/2660172/how-do-i-set-default-host-for-url-helpers-in-rails)[url_for](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)`:host`选项在每个 URL 的基础上设置它（我希望您可以扩展这个漂亮帮手很容易，但我不确定）。`*_url`

无论如何-希望有帮助！

# c# - 将键盘输入数字转换为数字类型

> ID：12304814
> 
> 赞同：1
> 
> 时间：2012-09-06T16:52:32.810
> 
> 标签：c#, asp.net

我有点卡在这里。虽然我知道如何在 C# 中将键盘输入字符转换为可用字符。

```
char ch = (char)console.read(); 
```

我想读取数字并使它们在我的程序中表现为数字。

如果我从键盘输入 5，我想存储为 5（数学）而不是字符 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:00:47.880

最安全的方法是这样的；

```
int Num = 0;

if( int.TryParse( ch.ToString(), out Num ) )
{
   // Num is now set correctly
}
else
{
   // ch didn't contain a digit.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:55:23.050

我想你想要这样的东西：

```
int Number;
string strNumber;

strNumber = Console.ReadLine();
Number = int.Parse(strNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:57:06.853

`int i = ch - '0';`////…………

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T16:54:54.037

试试 Convert.ToInt32("5")，一个安全的选择是 Int32.TryParse() 这里是文档：

[http://msdn.microsoft.com/en-us/library/system.convert_methods](http://msdn.microsoft.com/en-us/library/system.convert_methods)

[http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T16:58:57.073

```
string a = Console.ReadLine();
int b = int.Parse(a);
Console.WriteLine(b*b); 
```

# dialog - 如何让 p:selectOneMenu 在对话框中正确计算其宽度？

> ID：12304816
> 
> 赞同：4
> 
> 时间：2012-09-06T16:52:35.780
> 
> 标签：dialog, primefaces, selectonemenu

`p:selectOneMenu`当我在 a 中嵌入 a时`p:dialog`，它的初始宽度在 Primefaces 3.4 中太小了。这些小部件的宽度在 Primefaces 3.2 中非常好。我需要做一个黑客来解决这个问题吗？

问题出现在 Chrome 中。以下示例代码演示了该问题：

```
<p:selectOneMenu value="A" onchange="testDialog.show()">
  <f:selectItem itemLabel="Default item" itemValue="A" />
  <f:selectItem itemLabel="Click here to show the dialog" itemValue="B" />
</p:selectOneMenu>
<p:dialog header="Test dialog" widgetVar="testDialog">
  <p:selectOneMenu value="A">
    <f:selectItem itemLabel="This one here in the dialog" itemValue="A" />
    <f:selectItem itemLabel="doesn't calculate" itemValue="B" />
    <f:selectItem itemLabel="its width" itemValue="C" />
    <f:selectItem itemLabel="correctly" itemValue="D" />
  </p:selectOneMenu>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T16:36:08.680

我能够重现您的问题；就像下拉按钮完全不知道它覆盖了文本框一样。在我的设置中，我能够通过这个 CSS 修复让 selectOneMenus 正确显示：

```
<style type="text/css">
    .ui-selectonemenu label.ui-selectonemenu-label {
        padding-right: 28px;
        text-align: left;
    }
</style> 
```

**编辑：**哦，哎呀，我看到这个解决方案与 akoskm 的评论非常相似。但我当时尝试过，但`text-align: right`对我不起作用；只是`text-align: left`让角色不被发现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T07:39:01.367

`p:selectOneMenu`用 div将你的对话框包裹起来

```
<p:dialog header="Test dialog" widgetVar="testDialog">
    <div style="width: 100%">
        <p:selectOneMenu value="A">
            ...
        </p:selectOneMenu>
    </div>
</p:dialog> 
```

您也可以用一些 primefaces 组件包装 selectOneMenu，但我认为您不应该使用组件来修复样式故障。

# objective-c - Objective C - 单元测试目标不识别类？

> ID：12304823
> 
> 赞同：0
> 
> 时间：2012-09-06T16:53:09.523
> 
> 标签：objective-c, ios, xcode, unit-testing

我创建了一个单元测试目标，它依赖于我的主要目标。如果我错了，请纠正我，但添加依赖项应该将所有类从我的主要目标添加到单元测试目标。在单元测试目标中导入类是可行的，但是一旦我尝试在我的测试目标中使用这些类，我就会收到以下编译错误：

**Apple Match-O 链接器 (ID) 错误 - _OBJC_CLASS_$_LoginViewcontroller”，引用自：**

我知道我可以手动将每个文件添加到我的单元测试目标中，但这似乎不是正确的方法。任何人都知道为什么添加依赖项不能按预期工作？或者有什么办法可以解决这个问题？

我**不想**设置“测试主机”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:04:23.190

I have to correct you there: Adding a dependency should *not* add all the classes from yoru main target to the unit test target. It just causes your main target to be built. You additionally have to actually link to your main target.

**Update:** you can link to your target in the "Link Binary With Libraries" build phase in the "Build Phases" tab.

# hadoop - FlumeNG 中的正则表达式配置

> ID：12304826
> 
> 赞同：1
> 
> 时间：2012-09-06T16:53:22.643
> 
> 标签：hadoop, analytics, hbase, flume

我正在尝试使用 Flume-ng(1.2) 将数据从平面文件（日志文件）加载到 Hbase 中。平面文件有多个列，每个列都是以冒号（:) 分隔的，它们都需要加载到 HBASE 中的单独列中。我在查看论坛时发现有一个来自 Apache 的 jar 来解决这个问题（org.apache.flume.sink.hbase.RegexHbaseEventSerializer），但我找不到任何配置文件或互联网上的用法。如果有人可以帮助我配置配置文件，那将很有帮助

平面文件中的内容 1:nn 2:pp 3:mm

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:25:59.970

`RegexHbaseEventSerializer`具有三个可以设置的配置参数（[如源代码中所述](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=blob_plain;f=flume-ng-sinks/flume-ng-hbase-sink/src/main/java/org/apache/flume/sink/hbase/RegexHbaseEventSerializer.java)）；这些是：

```
/** Regular expression used to parse groups from event data. */
public static final String REGEX_CONFIG = "regex";

/** Whether to ignore case when performing regex matches. */
public static final String IGNORE_CASE_CONFIG = "regexIgnoreCase";

/** Comma separated list of column names to place matching groups in. */
public static final String COL_NAME_CONFIG = "colNames"; 
```

使用示例配置`RegexHbaseEventSerializer`如下（部分引用[Cloudera 的 Flume 和 HBase 演示文稿](http://www.slideshare.net/mapredit/flume-and-hbase)）：

```
host1.sources = src1
host1.sinks = sink1
host1.channels = ch1

host1.sources.src1.type = seq
host1.sources.src1.port = 25001
host1.sources.src1.bind = localhost
host1.sources.src1.channels = ch1

host1.sinks.sink1.type = org.apache.flume.sink.hbase.HBaseSink
host1.sinks.sink1.channel = ch1
host1.sinks.sink1.table = test3
host1.sinks.sink1.columnFamily = testing

host1.sinks.sink1.serializer = org.apache.flume.sink.hbase.RegexHbaseEventSerializer
host1.sinks.sink1.serializer.regex = X
host1.sinks.sink1.serializer.regexIgnoreCase = true
host1.sinks.sink1.serializer.colNames = column_1,column_2,column_3

host1.channels.ch1.type=memory10 
```

# php - Aweber 授权码不起作用

> ID：12304829
> 
> 赞同：1
> 
> 时间：2012-09-06T16:53:30.643
> 
> 标签：php, api, aweber

这是一个奇怪的问题：当我授权我的 Aweber 应用程序时，授权码第一次起作用。

但是，当我刷新页面时，出现错误：AWeberAPIException：

```
Type: UnauthorizedError 
Msg : RequestToken key is invalid.     https://labs.aweber.com/docs/troubleshooting#unauthorized 
```

文档：[https ://labs.aweber.com/docs/troubleshooting#unauthorized](https://labs.aweber.com/docs/troubleshooting#unauthorized)

请帮助这真的很令人沮丧。这是我正在使用的代码：

```
require_once('aweber_api/aweber_api.php');

try {
# set $authorization_code to the code that is given to you from
# https://auth.aweber.com/1.0/oauth/authorize_app/YOUR_APP_ID
    $authorization_code="Azh...";

$auth = AWeberAPI::getDataFromAweberID($authorization_code);
list($consumerKey, $consumerSecret, $accessKey, $accessSecret) = $auth;

# Store the Consumer key/secret, as well as the AccessToken key/secret
# in your app, these are the credentials you need to access the API.
//$account = $aweber->getAccount($accessKey, $accessSecret);

}
catch(AWeberAPIException $exc) {
print "<h3>AWeberAPIException:</h3>";
print " <li> Type: $exc->type              <br>";
print " <li> Msg : $exc->message           <br>";
print " <li> Docs: $exc->documentation_url <br>";
print "<hr>";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:58:30.643

好的，我解决了！

授权令牌包含`$consumerKey`、`$consumetSecret`、`$accessKey`和`$accessSecret`

以下行返回一个`Array`

```
$auth = AWeberAPI::getDataFromAweberID($authorization_code); 
```

所以，

```
$consumerKey = $auth[0];
$consumerSecret = $auth[1];
$accessKey = $auth[2];
$accessSecret = $auth[3]; 
```

然后您只需使用这些值来授权应用程序！当然，如果它被多个用户使用，您需要为每个用户存储这些值。

# php - Gmail LDAP 身份验证？

> ID：12304841
> 
> 赞同：2
> 
> 时间：2012-09-06T16:54:32.950
> 
> 标签：php, ldap, gmail

我的公司有 Google Apps for Business，因此我们可以管理我们同事的 GMail 帐户。无论如何设置GMail以使用LDAP进行PHP用户身份验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:59:48.790

[这个谷歌链接](http://support.google.com/a/bin/answer.py?hl=en&answer=106368)真的帮助我在去年为客户做这件事时进行了设置。这很令人沮丧，但我想通了！

祝你好运。

# c++ - 使用 Directx11 在基于高度图的地形上的孔

> ID：12304842
> 
> 赞同：1
> 
> 时间：2012-09-06T16:54:33.393
> 
> 标签：c++, directx-11, terrain, heightmap

我目前正在研究由高度图产生的圆柱状地形。程序中发生的事情很简单，地形颜色的纹理具有区域的 alpha 值，我希望它不可见，另一个纹理 ARGB，A 是高度的灰度，RGB 是光线的正常值。纹理使得 A 值从 1 变为 255，我为有孔的区域保留 0，这意味着我不希望那时存在。所以理论上没问题，我根据第一个纹理使这些区域不可见，但在实践中发生的事情是程序将 0 视为最小高度，即使纹理在顶部，也会为此创建一些线条0的区域， ![注意去圆柱中心的线](../Images/d0d6ec77c010f8cf93e778d18753a3a4.png) ![当我停止使那些顶点不可见时，这就是它的方式](../Images/2df58c0408b3cd6a431fcc233f5d3713.png)

注意去圆柱体中心的线 当我停止使这些顶点不可见时，这就是它的方式

所以，只是说，我在像素着色器上使用了函数 Clip() 使其不可见。

基本上我需要帮助：是否有可能，就像我在像素着色器上使用 clip() 一样，我在顶点着色器上做类似的事情并摆脱不需要的顶点？基本上，是否可以只说忽略值 0？有什么想法可以解决这个问题吗？我想使所有为 0 的顶点成为他邻居的值，这样这些线就不会到中心，而是到与圆柱体本身相同的平面。另一件事是我们可以看到程序正在将值从一个顶点插入到下一个顶点，这就是为什么我在中途切到不可见顶点的原因

我正在使用带有 C++ 的 Directx11 API，并且该程序使用 Tessellation。

感谢您抽出宝贵的时间，如果您对此提出任何意见，我们将非常高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:04:50.847

好吧，我确实解决了这个问题。我使具有高度值的纹理通过一个修改器，该修改器创建了另一个纹理，其零值被侧面像素替换，其值不同于零或更改为 128.0f。这样一来，怪异的线条方向就更准确了，不是去圆柱体的中心，而是沿着线条。

# python - IPython 并行计算命名空间问题

> ID：12304847
> 
> 赞同：5
> 
> 时间：2012-09-06T16:54:56.387
> 
> 标签：python, parallel-processing, ipython, nameerror

我一直在阅读和重新阅读 IPython 文档/教程，但我无法弄清楚这段特定代码的问题。似乎该函数`dimensionless_run`对传递给每个引擎的命名空间不可见，但我很困惑，因为该函数是在中定义的`__main__`，并且作为全局命名空间的一部分清晰可见。

`wrapper.py:`

```
import math, os

def dimensionless_run(inputs):
    output_file = open(inputs['fn'],'w')
    ...
    return output_stats

def parallel_run(inputs):
    import math, os  ## Removing this line causes a NameError: global name 'math'
                     ## is not defined.
    folder = inputs['folder']
    zfill_amt = int(math.floor(math.log10(inputs['num_iters'])))
    for i in range(inputs['num_iters']):
        run_num_str = str(i).zfill(zfill_amt)
        if not os.path.exists(folder + '/'):
            os.mkdir(folder)
        dimensionless_run(inputs)
    return

if __name__ == "__main__":
    inputs = [input1,input2,...]
    client = Client()
    lbview = client.load_balanced_view()
    lbview.block = True
    for x in sorted(globals().items()):
        print x
    lbview.map(parallel_run,inputs) 
```

`ipcluster start --n=6`在生成排序后的全局字典之后执行此代码，包括`math`and`os`模块和`parallel_run`and`dimensionless_run`函数。紧随其后的是 IPython.parallel.error.CompositeError: an or more exceptions from call to method: parallel_run，由大量的 组成`[n:apply]: NameError: global name 'dimensionless_run' is not defined`，其中 n 从 0 到 5 运行。

有两件事我不明白，它们显然是相关的。

1.  为什么代码没有`dimensionless_run`在全局命名空间中识别？
2.  为什么`import math, os`需要在parallel_run的定义*里面？*

**编辑：**结果证明这根本不是命名空间错误——我`ipcluster start --n=6`在一个不包含代码的目录中执行。要修复它，我需要做的就是在我的代码目录中执行 start 命令。我还通过添加以下行来修复它：

```
 inputs = input_pairs
    os.system("ipcluster start -n 6") #NEW
    client = Client()
    ...
    lbview.map(parallel_run,inputs)
    os.system("ipcluster stop")       #NEW 
```

在正确的位置启动所需的集群。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T20:17:08.050

这主要是[与 IPython.parallel 的 Python 名称空间问题](https://stackoverflow.com/questions/10857250/python-name-space-issues-with-ipython-parallel/10859394#10859394)的重复，它有更详细的答案，但要点：

当客户端发送`parallel_run`到引擎时，它只发送该函数，而不是定义函数的整个命名空间（`__main__`模块）。因此，当运行 remote 时`parallel_run`，查找`math`or `os`or`dimensionless_run`将首先查找`locals()`（函数中已经定义的内容，即您的函数内导入），然后查找*引擎上*`globals()`的`__main__`模块。

 *有多种方法可以确保名称在引擎上可用，但也许最简单的方法是显式定义/发送它们到引擎（交互式命名空间*在* `__main__`引擎上，就像在 IPython 中本地一样）：

```
client[:].execute("import os, math")
client[:]['dimensionless_run'] = dimensionless_run 
```

在进行跑步之前，在这种情况下，一切都应该按照您的预期进行。

这是以交互方式/在脚本中定义的模块独有的问题 - 如果此文件是*模块*而不是脚本，则不会出现，例如

```
from mymod import parallel_run
lbview.map(parallel_run, inputs) 
```

在这种情况下`globals()`，模块全局变量通常在任何地方都是相同的。*

# java - 将 ARGB 颜色值反转为 ABGR 的快速算法？

> ID：12304848
> 
> 赞同：6
> 
> 时间：2012-09-06T16:55:01.333
> 
> 标签：java, android, algorithm, colors

我`IntBuffer`用来操作位图的像素，但缓冲区中的值应该是**AABBGGRR**，而颜色常量是**AARRGGBB**。我知道我可以使用`Color.argb`, `Color.a`, ... 来反转，但我认为它并不完美。

我需要操作大量的像素，所以我需要一种可以在短时间内执行此操作的算法。我想到了这个位表达式，但它不正确：

```
0xFFFFFFFF ^ pSourceColor 
```

如果没有更好的，也许我会使用位移运算符（执行`Color.a`, ...）而不是调用函数来减少时间。

**编辑：**

这是我当前要转换的函数，尽管我认为应该有更好的算法（更少的运算符）来执行它：

```
private int getBufferedColor(final int pSourceColor) {
    return
            ((pSourceColor >> 24) << 24) |          // Alpha
            ((pSourceColor >> 16) & 0xFF) |         // Red  -> Blue
            ((pSourceColor >> 8) & 0xFF) << 8 |     // Green
            ((pSourceColor) & 0xFF) << 16;          // Blue -> Red
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T17:19:22.097

由于 A 和 G 已经到位，您可以通过屏蔽 B 和 R 然后将它们添加回来来做得更好。没有测试过，但应该是 95% 正确的：

```
private static final int EXCEPT_R_MASK = 0xFF00FFFF;
private static final int ONLY_R_MASK = ~EXCEPT_R_MASK;
private static final int EXCEPT_B_MASK = 0xFFFFFF00;
private static final int ONLY_B_MASK = ~EXCEPT_B_MASK;

private int getBufferedColor(final int pSourceColor) {
    int r = (pSourceColor & ONLY_R_MASK) >> 16;
    int b = pSourceColor & ONLY_B_MASK;
    return
      (pSourceColor & EXCEPT_R_MASK & EXCEPT_B_MASK) | (b << 16) | r;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-09T09:55:36.790

在我看来，以下函数**足够快，**可以在传递**ARGB**颜色的同时返回**ABGR颜色，****反之亦然！**

 ****```
int argbToABGR(int argbColor) {
    int r = (argbColor >> 16) & 0xFF;
    int b = argbColor & 0xFF;
    return (argbColor & 0xFF00FF00) | (b << 16) | r;
} 
```****

# c# - SharpSVN：回购浏览器的接口

> ID：12304852
> 
> 赞同：1
> 
> 时间：2012-09-06T16:55:14.137
> 
> 标签：c#, sharpsvn

我需要在用户单击按钮时打开 Repo Browser，并且在用户使用 Repo Browser 进行选择后，它应该返回所选路径，类似于打开文件对话框等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:36:04.263

SharpSvn 将 Subversion API 作为库提供，但它不提供默认的存储库浏览器 GUI。您可以使用 SharpSvn 构建一个（很可能使用`SvnClient.List()`），但如果您只想使用一个，我建议您通过 TortoiseProc.exe 调用 TortoiseSVN UI。

在 TortoiseSVN 手册中，您可以找到如何在特定目标上调用它。

# javascript - jQuery中短距离和长持续时间的微妙字体大小动画

> ID：12304860
> 
> 赞同：4
> 
> 时间：2012-09-06T16:55:37.007
> 
> 标签：javascript, jquery, animation, jquery-animate, font-size

我想以缓慢而微妙的方式为一些文本设置动画。jQuery 动画使用整数值，所以如果你想在两秒内为超过 10px 的大小设置动画，你会看到一系列 5 FPS 的小步骤，看起来很生涩。

这是一个[jsFiddle，它显示了我在说什么](http://jsfiddle.net/gyA8D/1/)。

我发现了一个关于动画位置的[类似问题](https://stackoverflow.com/questions/4827321/animating-positions-for-short-distances-over-long-durations-in-jquery)，但是`top`/ `left`/etc 属性是不可或缺的，因此接受的答案说这是不可能的。但是，如果 jQuery 会吐出实数，则可以将其设置为实数`font-size` *。*

我还想将一系列这样的动画链接在一起。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:18:40.603

我又看了一下视觉上可识别的最小点值。`pt`我注意到变化的最小单位是`0.2pt`.

但是，我注意到，当在 while 循环中以每增量 1 毫秒的时间段内应用 0.2 点的步长变化时，它看起来仍然有点“滞后”。如果不在 jsfiddle 中运行，则可能不会。

关键是，如果您想将字体大小平滑地更改 10 个点，您必须一次应用`0.2pt`or`0.25pt`或`0.5pt`（您发现最平滑的）的步骤更改，然后您必须使用 1 的间隔来保持平滑但您不应该应用不同的间隔，否则增量步骤太小以至于无法注意到整个动画最终会再次不稳定。

`10pt`我认为无论你使用什么框架，试图在 2 秒内强制进行这种更改总是会显得不稳定，因为小数点后的字体大小缺乏视觉变化。

这对我很有效：（
*在这个例子中我没有考虑减小字体大小的动画，但可以添加）*

```
function smoothAnimation($selector, startPoints, points){
    var increments = 0.2;
    var currentPoints = startPoints;
    var endPoints = currentPoints + points;

    while(currentPoints < endPoints){
        currentPoints += increments;
        $selector.animate({"font-size": currentPoints.toString() + "pt"}, 1, "swing");
    }
}

$('#msg').click(function() {
    $msg = $('#msg');
    $msg.animate({"font-size": "80pt"}, 400, "swing");

    smoothAnimation($msg, 80, 10);

    $msg.animate({"font-size": "40pt"}, 400, "swing");
}); 
```

### [DEMO](http://jsfiddle.net/gyA8D/23/) - 平滑（ish）字体大小的动画

为了使它看起来更平滑，将`increments`值增加到`0.25`甚至`0.5`. 那些你有很好的平滑步骤的你可以将点设置为任何其他值，只要你不强制 2 秒动画间隔，动画就会保持平滑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:12:27.613

另一种选择是直接操作 css 转换 -[这是一个示例](http://jsfiddle.net/gyA8D/22/)（我只包含 webkit css 以使其可读，但所有现代浏览器中都存在类似的功能）。“缓出”属性包括您所瞄准的先快后慢功能。它肯定比你迄今为止所能获得的更平滑，但它非常模糊 - 不确定这是否是你想要做出的权衡。由于它是一个实验性属性，您可能仍然希望将现有的 jQuery 动画作为旧浏览器的后备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:33:34.377

jQuery 动画很糟糕。研究另一种利用 requestAnimationFrame 技术或更好的计时机制的补间解决方案。也许尝试像[tween.js](https://github.com/sole/tween.js/)这样的补间库看看罗马演示，漂亮的缓慢移动的云......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:31:18.997

目前，只有 firefox 支持字体的亚像素渲染，因此其他浏览器中的动画将始终对齐像素。

# java - 这种双重比较的安全漏洞在哪里

> ID：12304862
> 
> 赞同：2
> 
> 时间：2012-09-06T16:55:47.610
> 
> 标签：java, bug-tracking

我昨天接受了采访，出现了这个问题：

```
public class Main {

    public static void main(String[] args) {

        // Code fragment must prints true if the double variables x and y are both
        // strictly between 0 and 1 and false otherwise. 

        // Assuming args will be always correct (double) input, 
        // Where's the safety bug?

        double x,y;

        x = Double.parseDouble(args[0]);
        y = Double.parseDouble(args[1]);

        System.out.println( (0 < x && x < 1) && (0 < y && y < 1)? true : false );
    }
} 
```

我写道，任何地方都没有错误，我的意思是，代码有效。回到家里，试过了，确实有效。但是虽然我确实得到了这份工作，但这个问题是我唯一不好的问题，我无法摆脱它（它看起来很简单）。我相信我什至不明白什么是安全漏洞，那么我的问题是：

什么是安全漏洞，这段代码确实有漏洞吗？

**更新：**

回复后我放了一些相关资源：

[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)的[为什么 JScript 有舍入错误？](http://blogs.msdn.com/b/ericlippert/archive/2003/09/15/why-does-jscript-have-rounding-errors.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:48:21.873

从源中的评论来看：

> 假设 args 总是正确的（双）输入，那么安全漏洞在哪里？

存在程序将提供错误输出的情况，除了表达式本身之外似乎没有任何可疑之处：

> (0 < x && x < 1) && (0 < y && y < 1)

虽然我还没有测试过，但是当这个表达式遇到 x 或 y 的边缘情况之一时可能会出现问题：NaN、+/- 无穷大，甚至可能是 -0.0。

也存在明确有效的输入，这可能违反用户的逻辑期望，因为数字以双精度表示的精度有限（例如 x = 1E-400 大于 0，但解析为 0，因此表达式提供 false尽管用户期望是真的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:27:27.633

如果输入碰巧不是双重的，我会选择类型安全和未捕获的异常。然后代码只是抛出一个异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:36:18.650

您可以将 x 设置为 0，并且可以为 y 输入 0。但值必须*介于 之间*。

你最好使用strictfp。你最好使用 0d 而不是 0。

# java - 如果字段名称有一个大写字母后跟下划线，则从 JAXB 注释类生成模式失败

> ID：12304863
> 
> 赞同：1
> 
> 时间：2012-09-06T16:55:47.870
> 
> 标签：java, jaxb

这是我在现实世界中遇到的问题。

我有一个类，如下所示。字段名称的选择不是我的，而是由数据库中的实际字段名称决定的（名称已更改）。

```
import java.util.Date;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
@XmlRootElement(name = "JAXBAnnotatedClass1")
@XmlType(propOrder = { "A_DT", "B_DT" }) 

public class JAXBAnnotatedClass1
{
    private Date A_DT;
    private Date B_DT;

    @XmlJavaTypeAdapter(JaxbDateAdapter.class)  
    public Date getA_DT()
    {
        return A_DT;
    }

    public void setA_DT(Date a_DT)
    {
        A_DT = a_DT;
    }

    @XmlJavaTypeAdapter(JaxbDateAdapter.class)  
    public Date getB_DT()
    {
        return B_DT;
    }

    public void setB_DT(Date b_DT)
    {
        B_DT = b_DT;
    }
} 
```

我认为 Date Adapter 类与问题无关。

我正在使用 Eclipse Indigo Service Release Version 1。我尝试从此类生成架构，但出现以下错误 -

```
Property a_DT is present but not specified in @XmlType.propOrder
    this problem is related to the following location:
        ....JAXBAnnotatedClass1.getA_DT()
        at com.cigna.framework.testing.JAXBAnnotatedClass1
Property b_DT is present but not specified in @XmlType.propOrder
    this problem is related to the following location:
                                  ....JAXBAnnotatedClass1.getB_DT() 
```

这里奇怪的是，如果我进行以下更改，一切正常 -

```
@XmlType(propOrder = { "a_DT", "b_DT" }) // changed first uppercase letter 
//to lowercase without changing field name 
```

另一个有趣的观察是，如果我有这样的字段名称（如下），一切正常！以下情况的唯一区别是字段名称在下划线之前有两个大写字母而不是一个。

```
@XmlRootElement(name = "JAXBAnnotatedClass2")
@XmlType(propOrder = { "AX_DT", "BX_DT" }) 
public class JAXBAnnotatedClass2
{
    private Date AX_DT;
    private Date BX_DT;

        // similar code... 
```

是什么导致了这个问题？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:40:07.847

首先要注意的是，默认情况下，您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现正在处理公共属性而不是私有字段。这意味着您将字段称为什么并不重要，因为 JAXB 将查看属性名称（请参见下面的代码示例）。JAXB 会将属性名称中的第一个字母（`getA_DT`对应于属性`a_DT`）小写，除非连续有两个大写字母（`getAX_DT`对应于属性`AX_DT`）。

```
package forum12304863;

import javax.xml.bind.annotation.XmlType;

@XmlType(propOrder={"a_DT", "b_DT", "AX_DT", "BX_DT"})
public class Root {

    private String field1;
    private String field2;
    private String field3;
    private String field4;

    public String getA_DT() {
        return field1;
    }

    public void setA_DT(String a_DT) {
        field1 = a_DT;
    }

    public String getB_DT() {
        return field2;
    }

    public void setB_DT(String b_DT) {
        field2 = b_DT;
    }

    public String getAX_DT() {
        return field3;
    }

    public void setAX_DT(String aX_DT) {
        field3 = aX_DT;
    }

    public String getBX_DT() {
        return field4;
    }

    public void setBX_DT(String bX_DT) {
        field4 = bX_DT;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:26:21.033

当 getter 命名为“getFoo”时，jaxb 默认将元素命名为“foo”。我认为您应该能够通过明确定义元素名称来解决问题，例如：

```
@XmlJavaTypeAdapter(JaxbDateAdapter.class)  
@XmlElement(name = "A_DT")
public Date getA_DT()
{
    return A_DT;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:27:40.297

propOrder 必须将第一个字母小写。XMLElement 的名称可以使用@XmlElement 注释进行更改，一切正常。

变化 -

```
@XmlType(propOrder = { "a_DT", "b_DT" }) 

@XmlJavaTypeAdapter(JaxbDateAdapter.class)  
@XmlElement(name = "A_DT")
public Date getA_DT()
{
    return A_DT;
}

@XmlJavaTypeAdapter(JaxbDateAdapter.class)
@XmlElement(name = "B_DT")
public Date getB_DT()
{
    return B_DT;
} 
```

# xslt - xpath 表达式后代混淆

> ID：12304864
> 
> 赞同：0
> 
> 时间：2012-09-06T16:55:50.193
> 
> 标签：xslt, xpath

```
<xsl: when test="not(descendant::*[SomeAttribute])"> 
```

这是否意味着检查上下文节点是否没有带有子元素的后代`SomeAttribute`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:08:37.947

是的。由于设置为布尔值的节点如果集为空则为 false，否则为 true，因此如果上下文节点`SomeAttribute`在树下至少有两个级别的后代（孙子、曾孙等），则测试将失败.)。如果上下文节点有`SomeAttribute` *子*节点但没有更深的后代，或者根本没有`SomeAttribute`后代，那么测试将成功。

# mime-types - 注册我的应用程序的 mime-type / etc

> ID：12304866
> 
> 赞同：0
> 
> 时间：2012-09-06T16:55:58.060
> 
> 标签：mime-types, email-attachments, info.plist

在检查了几个问题后，遵循了许多在线教程，我仍然无法让我的应用程序注册我的 mime 类型。我觉得这里一定有一些我还没有意识到的魔法。除了修改我的 plist 文件之外还有其他步骤吗？还是我做错了？

我唯一觉得可能是一个额外的问题是我已经更改了我的项目名称，并且可能有一些不符合构建设置和/或配置文件的东西？它存档，我可以安装用于临时分发，我只是无法在电子邮件中获取文件来注册该应用程序。

该文件是我使用 NSJSONSerialization 准备的 JSON 数据。

这是我的清单：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
    <dict>
        <key>CFBundleDevelopmentRegion</key>
            <string>English</string>
        <key>CFBundleDisplayName</key>
        <string>ClickDesigner</string>
        <key>CFBundleDocumentTypes</key>
        <array>
            <dict>
                <key>CFBundleTypeName</key>
                <string>Clicker Data Document</string>
                <key>CFBundleTypeRole</key>
                <string>Editor</string>
                <key>LSHandlerRank</key>
                <string>Owner</string>
                <key>LSItemContentTypes</key>
                <array>
                    <string>com.digitaldownbeat.clicker.clk</string>
                </array>
            </dict>
        </array>
        <key>CFBundleExecutable</key>
        <string>${EXECUTABLE_NAME}</string>
        <key>CFBundleIconFile</key>
        <string>icon.png</string>
        <key>CFBundleIcons</key>
        <dict>
            <key>CFBundlePrimaryIcon</key>
            <dict>
                <key>CFBundleIconFiles</key>
                <array>
                    <string></string>
                    <string>icon.png</string>
                    <string>icon@2x.png</string>
                </array>
            </dict>
        </dict>
        <key>CFBundleIdentifier</key>
        <string>com.digitaldownbeat.${PRODUCT_NAME}</string>
        <key>CFBundleInfoDictionaryVersion</key>
        <string>6.0</string>
        <key>CFBundleName</key>
        <string>Clicker</string>
        <key>CFBundlePackageType</key>
        <string>APPL</string>
        <key>CFBundleShortVersionString</key>
        <string>1.0</string>
        <key>CFBundleSignature</key>
        <string>????</string>
        <key>CFBundleURLTypes</key>
        <array>
            <dict>
                <key>CFBundleURLSchemes</key>
                <array>
                    <string>db-k6rrg6wgwv4uij1</string>
                </array>
            </dict>
            <dict>
                <key>CFBundleURLName</key>
                <string>com.digitaldownbeat.clickdesigner</string>
                <key>CFBundleURLSchemes</key>
                <array>
                    <string>clickdesigner</string>
                </array>
            </dict>
        </array>
        <key>CFBundleVersion</key>
        <string>1.0</string>
        <key>LSRequiresIPhoneOS</key>
        <true/>
        <key>LSRequiresiPhoneOS</key>
        <true/>
        <key>NSMainNibFile</key>
        <string>MainWindow</string>
        <key>UIFileSharingEnabled</key>
        <true/>
        <key>UIStatusBarStyle</key>
        <string>UIStatusBarStyleBlackTranslucent</string>
        <key>UISupportedInterfaceOrientations</key>
        <array>
            <string>UIInterfaceOrientationPortrait</string>
            <string>UIInterfaceOrientationPortraitUpsideDown</string>
        </array>
        <key>UTExportedTypeDeclarations</key>
        <array>
            <dict>
                <key>UTTypeConformsTo</key>
                <array>
                    <string>public.text</string>
                </array>
                <key>UTTypeDescription</key>
                <string>ClickDesigner Data Document</string>
                <key>UTTypeIdentifier</key>
                <string>com.digitaldownbeat.clickdesigner.clk</string>
                <key>public.filename-extension</key>
                <string>clk</string>
                <key>public.mime-type</key>
                <string>application/clickdesigner</string>
            </dict>
        </array>
    </dict>
    </plist> 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:32:51.027

尝试将此代码添加到应用程序的 delegate.m 文件中。在下面

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

  NSURL *url = (NSURL *)[launchOptions valueForKey:UIApplicationLaunchOptionsURLKey];
    if (url != nil && [url isFileURL]) {}
} 
```

这对我来说适用于音频附件，但我的图像文件有问题。jpg、png、tif等

# objective-c - Objective-C 小班开销

> ID：12304869
> 
> 赞同：0
> 
> 时间：2012-09-06T16:56:20.857
> 
> 标签：objective-c, pointers, performance, abstract-data-type

我正在编写一个类文件，并将 a`CGPoint`作为 Ivar 包含在内。这让我想知道与较小的 Objective-C 数据结构相关的开销。内存占用是否`CGPoint`足以证明创建指向它的指针是合理的，或者我只是创建一个指向 2 个`CGfloat`值的指针？就此而言，如果我只需要 x/y 坐标，为什么不将 2 个整数作为 ivars 插入？

在相关说明中，是否有描述微小数据结构的命名法，例如“小数据结构”或“琐碎数据结构”；一个描述由几个原语组成的结构的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:13:18.460

小对象肯定存在问题，但据说系统中已经有几个小对象优化。

一般来说，如果你需要一个对象，就使用一个对象。如果没有，那就不要。

然而，更大的问题是编写代码，以便人类易于阅读，并且易于人类维护。使用性能工具（如 Instruments）隔离需要解决系统资源利用率的地方，**然后才**解决这些问题。

当然，有一些明显的*愚蠢*的事情要避免，但总的来说，专注于干净的设计，以及易于阅读/更改的实现。在您的测试套件上运行性能工具应该很容易发现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:46:34.613

首先，在遇到性能问题之前不要担心开销。

大多数（但不是全部）面向对象的语言在小的、非对象的类型和更大的、基于对象的类型之间做出了区分；但边界是模糊的。决定如何表示类型的一个有用区别是您是否将其视为一个简单的*值*，您可能认为它是对它进行*操作*或*计算的*；或更涉及的东西，可能是具有固有*行为*、*操作*等的东西。

内置的原始类型主要是值：整数、字符等。在这种情况下，复数、分数、坐标等都是简单的值——使用结构；树，堆栈，层次结构不是 - 使用对象。

在您的相关说明中考虑许多使用“价值”，您也可以考虑[“复合”](http://en.wikipedia.org/wiki/Composite_data_type)。“Petty”不是一个好的选择，错误的内涵 ;-) 其他人可能会说“basic”、“trivial”、“structure”或“record”——而后两者也可以用来指代他们经常使用的非常大的类型用于小的。

# vb.net - 在新线程中使用跟踪类会使 vb.net/asp.net Web 应用程序中的 IIS7 崩溃

> ID：12304874
> 
> 赞同：1
> 
> 时间：2012-09-06T16:56:29.730
> 
> 标签：vb.net, multithreading, trace

这是关于在多线程 Web 应用程序中使用 Trace

我正在尝试在一个开始的新线程中使用跟踪

ThreadPool.QueueUserWorkItem(AddressOf WorkMethod, autoEvent)

在我添加之前，我的代码不会崩溃

Trace.warn（消息，类别）

到新线程中调用的函数

错误如下，崩溃通常会停止应用程序池，因此页面无法加载，必须从 IIS 事件日志中提取错误消息

> 发生未处理的异常，进程终止。
> 
> 应用程序 ID：/LM/W3SVC/5/ROOT
> 
> 进程 ID：2576
> 
> 异常：System.NullReferenceException
> 
> 消息：对象引用未设置为对象的实例。
> 
> StackTrace：在 System.Web.UI.Page.get_Trace()

# java - xquery newbie-how to add support to the custom Xquery functions at xqueryfunctions.com, to my java app

> ID：12304875
> 
> 赞同：0
> 
> 时间：2012-09-06T16:56:31.553
> 
> 标签：java, xquery, saxon

如果我的问题听起来很愚蠢，请原谅——我是 XQuery 以及 saxon xquery 库的新手——

我正在开发一个还应该支持 xquery 的 java 应用程序——为此，正在使用 java saxon 库 (www.saxonica.com)。

现在我在 xqueryfunctions.com 上发现了出色的 xquery 函数——我想在我的应用程序中添加对这些函数的支持。在我的应用程序中，用户可以输入一系列命令（包括 XQuery 命令），然后应用程序按顺序执行这些命令......

我的想法是否正确，我必须先执行 xqueryfunctions.com 上的函数，然后执行用户的命令？每次我想要执行用户的命令时都必须这样做吗？

有什么方法可以为我的应用程序添加对这些功能的“隐式”支持，这样我就不必每次运行我的应用程序时都执行这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:52:18.777

我建议首先从 xqueryfunctions.com/xq/download.html 将 functx .xq 文件下载到工作区中的某个区域。然后使用以下方法将其包含在您的项目中：

```
import module namespace functx = "functx" at "functx-1.0-doc-2007-01.xq" 
```

# gwt - CAS 和 GWT - 将 GWT 保留在 CAS 重定向上

> ID：12304877
> 
> 赞同：3
> 
> 时间：2012-09-06T16:56:50.830
> 
> 标签：gwt, cas, gwtp

我正在尝试将 CAS 用作我的组织的 SSO 解决方案。使用此解决方案的应用程序之一是 GWT 应用程序，它使用 GWTP 作为其 MVP 平台。

当尝试导航到我的应用程序中的某个内部位置时，例如：

```
http://myapp.com/myapp.html#!somePlace 
```

CAS 过滤器识别出我没有通过身份验证，我被重定向到 CAS 登录页面。这是意料之中的。但是，正如我们所知，内部位置状态 (#!somePlace) 不会发送到服务器，因此它不会保留在 CAS 重定向请求中。因此，在 CAS 中登录后，我只是被重定向到：

```
http://myapp.com/myapp.html 
```

所以我无法重现所请求的内部位置。

有没有人在集成 CAS 和 GWT 以及解决或解决这个问题方面有一些经验？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:50:40.183

目前在 GitHub 上有针对您的问题的[拉取请求。](https://github.com/Jasig/cas/pull/100/files)

简而言之，就初始 URL 的锚部分附加到 CAS 服务器应用程序中登录页面的“服务”参数而言，最简单的解决方案是在登录页面的表单中添加“onsubmit”事件处理程序。在事件处理函数中，您应该在当前位置提取“#”之后的部分，然后将该部分添加到 form.action 的值中。

# java - Java将字符串拆分为两个单词：基于偶数和奇数字符索引

> ID：12304880
> 
> 赞同：2
> 
> 时间：2012-09-06T16:56:55.390
> 
> 标签：java, string

例如，如果输入的字符串是*INTERLEAVED*，那么第一个字符串是*ITREVD*，第二个字符串是*NELAE*。我是否需要将用户输入的字符串放入字符数组并从那里分配值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:00:08.623

*   将字符串放入数组中。
*   迭代所述数组。
*   请记住，`index % 2 == 0`如果你是一个偶数字母，`== 1` 如果你是一个奇数。（模是余数运算符。）
*   完毕！

PS：在发布关于 SO 的问题之前，您真的应该尝试写*一些东西。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:00:23.300

创建两个`StringBuilders`. 接受输入`String`并循环它的字符。对于索引 0 甚至索引，从输入中获取字符并将其附加到第一个`StringBuilder`. 对于奇数索引，从输入中获取字符并将其附加到第二个`StringBuilder`. 您可以使用模运算符确定奇数/偶数索引`%`。

您可能会发现有用的方法：[`StringBuilder.append(char)`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#append%28char%29), [`String.charAt(int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29).

# database - 如何在 Spring Security 中进行 LDAP 身份验证和数据库授权

> ID：12304881
> 
> 赞同：2
> 
> 时间：2012-09-06T16:56:55.760
> 
> 标签：database, spring, security, ldap, authorization

我可以有一个 Spring Security 项目，在该项目中我针对 LDAP 进行身份验证并针对数据库为经过身份验证的用户设置权限吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:13:55.523

我已经解决了这个问题，答案在上面：

```
<authentication-manager >
    <authentication-provider ref="ldapAuthProvider" />            
</authentication-manager>

<beans:bean id="contextSource"
    class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">        
<beans:constructor-arg value="ldap://IP:port/...."/>

</beans:bean>

<beans:bean id="ldapAuthProvider"
   class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <beans:constructor-arg>
    <beans:bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
    <beans:constructor-arg ref="contextSource"/>
    <beans:property name="userSearch" ref="ldapUserSearch" />
    </beans:bean>
    </beans:constructor-arg>
    <beans:constructor-arg>
    <beans:bean
    class="prpa.athos.security.listener.MyLDAPAuthorities">
    </beans:bean>
    </beans:constructor-arg>
    </beans:bean>
    <beans:bean id="authenticationSuccessListener"   
    class="prpa.athos.security.listener.AuthenticationSuccessListener">
    </beans:bean>        
    <beans:bean id="ldapUserSearch"   
    class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <beans:constructor-arg index="0" value=""/>
    <beans:constructor-arg index="1" value="(uid={0})"/>
    <beans:constructor-arg index="2" ref="contextSource" />
    </beans:bean> 
```

在 MyLDAPAuthorities 类上，我实现了 LdapAuthoritiesPopulator 类获取权限表单数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:36:26.317

是的，您将需要一个`LdapBindAuthenticator`基于 DAO 的`AuthoritiesPopulator`.

# c# - 防止 C# 中的列表更改

> ID：12304885
> 
> 赞同：4
> 
> 时间：2012-09-06T16:57:08.713
> 
> 标签：c#, .net, linked-list, readonly

我在程序集 A (DLL) 中有一个对象链接列表（可以更改为任何其他 Collection 类型，只要它保持条目顺序）。

当程序集 B 从包含所述 LinkedList 的类创建对象时，它会分配一个方法来报告一些信息。该方法采用的参数之一是 LinkedList。

现在我希望程序集 B 中的这个方法能够从该 LinkedList 中读取（遍历它并根据它的内容做一些事情），但是我需要防止该方法更改列表中的数据。

虽然我现在是使用程序集 A 的人，但当它公开时，我需要防止从程序集外部更改数据，这样使用库的第 3 方就不会对程序集内的结果感到不安。

基本上，我希望“密封”将 LinkedList 从程序集 A 带到程序集 B 的参数

我说得有道理吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:04:45.863

```
new List<T>(linkedList).AsReadOnly(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T17:05:09.660

如果您可以从 更改`LinkedList<T>`为`List<T>`，则可以使用该[`AsReadOnly()`](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)方法生成列表的只读包装器。包装器是轻量级的，不需要复制，并立即将更改反映到底层集合：

```
List<MyClass> originalList = ...
IList<MyClass> readOnly = originalList.AsReadOnly(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T16:59:46.470

不是将*真正的*链表传递给 B 的回调方法，而是传递一个副本。这样，B 可以对列表做任何想做的事情，而无需修改原始列表。

[使用LinkedList(IEnumerable) 构造函数](http://msdn.microsoft.com/en-us/library/6sb8tw8x.aspx)可以轻松创建链表的副本：

```
var copy = new LinkedList<MyType>(originalList); 
```

显然，列表的*元素*可以由 B 修改，如果它们是可变的，但我相信你知道这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T17:02:13.980

我认为返回`IEnumerable<T>`而不是`List<T>`应该解决您的问题。最简单的方法：

```
foreach( var t in list )
    yield t; 
```

这样，您将只返回枚举数。消费者将无法更改列表的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:01:01.350

你能发布一些代码。

听起来您想让他们使用数据的副本。这样，如果他们确实以某种方式对其进行了更改，原始副本将保持不变。

查看`ICloneable`复制对象的界面并创建一个全新的链表，其中包含所有原始内容的副本并将其传递回程序集 B。

# html - 在 html 中创建不可见的文本字段？

> ID：12304886
> 
> 赞同：1
> 
> 时间：2012-09-06T16:57:10.420
> 
> 标签：html, textbox

我正在尝试将 html 代码放入我老板提供的设计模型中，并且一些美学 - 例如搜索栏的形状有点奇怪和复杂。作为一个简单的解决方法，我想我只需在搜索栏的图像上放置一个文本字段，但我无法让它工作。

任何人都可以建议一种在图像上分层文本字段的方法，使其不可见但仍然有效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T17:01:18.920

就隐形而言，将这个 CSS 放在你的输入中：

```
input {
    background: transparent;
    border: none;
} 
```

**[查看这个 jsFiddle](http://jsfiddle.net/fDLnK/)**，它显示了这一点。就定位输入而言，您应该能够正常处理。

# primefaces - 全选 p:selectManyCheckbox

> ID：12304888
> 
> 赞同：1
> 
> 时间：2012-09-06T16:57:19.837
> 
> 标签：primefaces, selectmanycheckbox

我想创建一个按钮来选择所有复选框，但找不到适合我的示例。我正在使用素面。

```
 <p:selectManyCheckbox widgetVar="sex" id="sexta" value="#{solicitacaoAcompanhamentoMB.selectedHorariosSexta}" layout="pageDirection">  
        <f:selectItem itemLabel="12:00" itemValue="Sexta-12:00" />  
        <f:selectItem itemLabel="12:30" itemValue="Sexta-12:30" /> 
        <f:selectItem itemLabel="13:00" itemValue="Sexta-13:00" /> 
        <f:selectItem itemLabel="13:30" itemValue="Sexta-13:30" /> 
        <f:selectItem itemLabel="14:00" itemValue="Sexta-14:00" />  
        <f:selectItem itemLabel="14:30" itemValue="Sexta-14:30" /> 
        <f:selectItem itemLabel="15:00" itemValue="Sexta-15:00" />  
        <f:selectItem itemLabel="16:00" itemValue="Sexta-16:00" />  
        <f:selectItem itemLabel="16:30" itemValue="Sexta-16:30" />
        <f:selectItem itemLabel="17:00" itemValue="Sexta-17:00" />  
        <f:selectItem itemLabel="17:30" itemValue="Sexta-17:30" /> 
        <f:selectItem itemLabel="18:00" itemValue="Sexta-18:00" />  
        <f:selectItem itemLabel="18:30" itemValue="Sexta-18:30" /> 
        <f:selectItem itemLabel="19:00" itemValue="Sexta-19:00" />  
        <f:selectItem itemLabel="19:30" itemValue="Sexta-19:30" /> 
        <f:selectItem itemLabel="20:00" itemValue="Sexta-20:00" />  
        <f:selectItem itemLabel="20:30" itemValue="Sexta-20:30" /> 
        <f:selectItem itemLabel="21:00" itemValue="Sexta-21:00" />  
        <f:selectItem itemLabel="21:30" itemValue="Sexta-21:30" /> 
        <f:selectItem itemLabel="22:00" itemValue="Sexta-22:00" />  
        <f:selectItem itemLabel="22:30" itemValue="Sexta-22:30" /> 
     </p:selectManyCheckbox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:19:30.910

您可以添加 commandLink

```
<p:commandLink id="selectAll" update="sexta" actionListener="#{yourBean.selectAll}" process="@this,locations">
  <h:outputText value="Select all" />
</p:commandLink> 
```

Java 中的方法（在 yourBean 类中）：

```
public void selectAll(ActionEvent actionEvent) {
    selectedHorariosSexta.clear();
    int startHour = 12;
    for (int i = 0; i < 22; i++) {
        if (i % 2 == 0) {
            selectedHorariosSexta.add("Sexta-" + startHour + ":00");
        }else {
            selectedHorariosSexta.add("Sexta-" + startHour + ":30");
            startHour++;
        }
    }       
} 
```

# php - onclick -> mysql 查询 -> javascript；同一页

> ID：12304900
> 
> 赞同：0
> 
> 时间：2012-09-06T16:58:11.390
> 
> 标签：php, javascript

我需要按钮来开始 mysql 查询，然后将结果插入到 javacript 代码块中，该代码块将显示在按钮所在的同一页面上。mysql 查询来自下拉菜单的值。

Homepage.php 包含

```
two drop down menus

div id='one' to hold the results javscript code block

a button to stimulate the mysql query to be displayed in div id ='one' through Javascript

flow of the process is as such
1\. user chooses an option from each drop down
2\. when ready, the user clicks a button
3\. the onclick runs a mysql query with selections from the drop down menu.
4\. send the results as array from the mysql query into the javascript code block
5\. display the results in div id ='one' 
```

所有这些都需要发生在同一页面上！

我遇到的问题是，一旦加载页面，javascipt 就是静态的。我无法将 mysql 结果推送到我需要它出现的页面上的 javascript 中。将所有内容都放在同一页面上会造成麻烦。

我不是在寻找为我制定的确切代码，只是应该用于完成此任务的正确流程流程。先感谢您！

我试过了

使用两个下拉菜单调用使用 httprequest 的相同 javascript 函数。该函数被定向到执行 mysql 处理的 php 页面。然后通过 httprequest 将结果返回到主页。

我尝试将整个 Javascript 代码块保存为 php 变量，其中已经包含 mysql 结果，然后通过 HTTPRequest 将变量返回到主页，我认为我可以通过这种方式创建动态 javascript 代码。没有任何工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:02:47.767

您需要使用一种称为 AJAX 的技术。我推荐[jQuery的](http://jquery.com/) `.ajax()`方法。尝试做原始 XHR 充其量是痛苦的。

以下是您想要构建代码的方式：

1.  加载页面。
2.  用户选择一个选项。
3.  onChange 侦听器触发 AJAX 请求
4.  服务器接收并处理请求
5.  服务器为相关选择发回一个 JSON 数组选项
6.  客户端 AJAX 发送方得到响应
7.  客户端更新选择以获取 JSON 数组中的值。

基本上，HTTP 是无状态的，所以一旦页面被加载，它就完成了。您必须连续向服务器请求动态数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:07:24.613

这是我如何使用 onchange 方法来刺激 MYSQL 查询并让 Highchart 显示结果。主要问题是返回的 JSON 数组是一个需要转换为 INT 的字符串。然后在数据中使用 resultArray 变量：highChart 的部分。

```
$(function(){
  $("#awayTeam").change(function(){ 
    $.ajax({
    type: "POST",    
    data: "away=" + $("#awayRunner").val(),
    dataType: "json",
    url: "/getCharts.php",
    success: function(response){
          var arrayLength = response.length;
          var resultArray = [];
          var i = 0;
          while(i<arrayLength){
              resultArray[i] = parseInt(response[i]);
              i++;
          } 
```

在 PHP 代码中，数组必须像这样返回为 JSON

echo json_encode($awayRunner);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:05:27.217

Use AJAX,

example

```
$.ajax({
    type: "POST",
    url: "yourpage.php",
    data: "{}",
    success: function(result) {
        if(result == "true") {
            // do stuff you need like populate your div
            $("#one").html(result);               
        } else {
            alert("error");
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T17:26:51.410

为此你需要学习ajax。这是用来在不重新加载页面的情况下发出请求的。这样你就可以对mysql进行后台调用

你的代码将是这样的

```
$("#submitbutton").live("click",function(){

$.ajax({url:"yourfile"},data:{$(this).data}).done(function(data){
//this data will in json form so decode this and use this in div 2
var x =$.parseJSON(data);
$("#div2").html(x.val());
})
}) 
```

并且`"yourfile"`是连接到服务器并发出数据库请求的主文件

# c# - 为什么 VisualTreeHelper.GetChildrenCount() 为 Popup 返回 0？

> ID：12304904
> 
> 赞同：3
> 
> 时间：2012-09-06T16:58:23.727
> 
> 标签：c#, wpf, popup, visualtreehelper, visual-tree

我将焦点移到 Popup 的开幕式上：

```
wcl:FocusHelper.IsFocused="{Binding RelativeSource={RelativeSource Self}, Path=IsOpen}" 
```

FocusHelper 类代码：

```
public static class FocusHelper
{
     public static readonly DependencyProperty IsFocusedProperty =
            DependencyProperty.RegisterAttached("IsFocused", typeof(bool?), typeof(FocusHelper), new FrameworkPropertyMetadata(IsFocusedChanged));

        public static bool? GetIsFocused(DependencyObject element)
        {
            if (element == null)
            {
                throw new ArgumentNullException("element");
            }

            return (bool?)element.GetValue(IsFocusedProperty);
        }

        public static void SetIsFocused(DependencyObject element, bool? value)
        {
            if (element == null)
                throw new ArgumentNullException("element");

            element.SetValue(IsFocusedProperty, value);
        }

        private static void IsFocusedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var fe = (FrameworkElement)d;

            if (e.OldValue == null)
            {
                fe.GotFocus += ElementGotFocus;
                fe.LostFocus += ElementLostFocus;
                fe.IsVisibleChanged += ElementIsVisibleChanged;
            }

            if (e.NewValue == null)
            {
                fe.GotFocus -= ElementGotFocus;
                fe.LostFocus -= ElementLostFocus;
                fe.IsVisibleChanged -= ElementIsVisibleChanged;
                return;
            }

            if ((bool)e.NewValue)
            {
                fe.SetFocusWithin();
            }
        }

        private static void ElementIsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            var fe = (FrameworkElement)sender;

            if (fe.IsVisible 
                && (bool)(((FrameworkElement) sender).GetValue(IsFocusedProperty))) // Bring focus to just become visible element.
                fe.Focus();
        }

        private static void ElementGotFocus(object sender, RoutedEventArgs e)
        {
            ((FrameworkElement)sender).SetCurrentValue(IsFocusedProperty, true);
        }

        private static void ElementLostFocus(object sender, RoutedEventArgs e)
        {
            ((FrameworkElement)sender).SetCurrentValue(IsFocusedProperty, false);
        }

        /// <summary>
        /// Tries to set focus to the element or any other element inside this one.
        /// Tab index is respected
        /// </summary>
        /// <param name="element"></param>
        /// <returns></returns>
        public static bool SetFocusWithin(this DependencyObject element)
        {
            if (element == null)
                throw new ArgumentNullException("element");

            var inputElement = element as IInputElement;
            if (inputElement == null || !inputElement.Focus())
            {
                var children = element.GetVisualChildrenSortedByTabIndex().Where(child => !(child is Control) || (bool)child.GetValue(Control.IsTabStopProperty) );
                return children.Any(SetFocusWithin);
            }

            return true;
        }
    } 
```

ElementTreeHelper 类部分：

```
public static IEnumerable<DependencyObject> GetVisualChildren(this DependencyObject parent)
        {
            if (parent == null)
                throw new ArgumentNullException("parent");

            var count = VisualTreeHelper.GetChildrenCount(parent);
            for (var i = 0; i < count; i++)
                yield return VisualTreeHelper.GetChild(parent, i);
        }

        public static IEnumerable<DependencyObject> GetVisualChildrenSortedByTabIndex(this DependencyObject parent)
        {
            if (parent == null)
                throw new ArgumentNullException("parent");

            return parent.GetVisualChildren().OrderBy(KeyboardNavigation.GetTabIndex);
        } 
```

问题是 var count = VisualTreeHelper.GetChildrenCount(parent) == 0 当 parent 是 Popup 时。

**更新**

答案在[这里](http://msdn.microsoft.com/en-us/library/ms749018.aspx#PopupandtheVisualTree)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T17:45:14.653

Popup 本身并不承载 Child。相反，它会创建一个 PopupRoot（内部类），它是新 HWND 的根视觉对象，该 HWND 创建用于在单独的顶级窗口（或 xbap 中的子窗口）中托管弹出窗口的内容。Popup 的 Child 托管在该 PopupRoot 内的 AdornerDecorator 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-03T11:54:58.620

我参加聚会有点晚了，但 AndrewS 的回答帮助我放弃了在弹出窗口中使用 GetChildrenCount。我确实注意到 Popup 的 Child 属性已正确填充，因此我创建了一个单独的代码路径来查找 Popup 对象的特定子类型。这是我用来按类型（也可以按名称）查找特定子项的代码：

```
public static TChildItem FindVisualChild<TChildItem>(this DependencyObject dependencyObject, String name) where TChildItem : DependencyObject
{
  // Search immediate children first (breadth-first)
  var childrenCount = VisualTreeHelper.GetChildrenCount(dependencyObject);

  //http://stackoverflow.com/questions/12304904/why-visualtreehelper-getchildrencount-returns-0-for-popup
  if (childrenCount == 0 && dependencyObject is Popup)
  {
    var popup = dependencyObject as Popup;
    return popup.Child != null ? popup.Child.FindVisualChild<TChildItem>(name) : null;
  }

  for (var i = 0; i < childrenCount; i++)
  {
    var child = VisualTreeHelper.GetChild(dependencyObject, i);
    var nameOfChild = child.GetValue(FrameworkElement.NameProperty) as String;

    if (child is TChildItem && (name == String.Empty || name == nameOfChild))
      return (TChildItem)child;
    var childOfChild = child.FindVisualChild<TChildItem>(name);
    if (childOfChild != null)
      return childOfChild;
  }
  return null;
}

public static TChildItem FindVisualChild<TChildItem>(this DependencyObject dependencyObject) where TChildItem : DependencyObject
{
  return dependencyObject.FindVisualChild<TChildItem>(String.Empty);
} 
```

# proxy - VPN 或代理或为特定用户组提供服务的服务

> ID：12304910
> 
> 赞同：0
> 
> 时间：2012-09-06T16:59:03.677
> 
> 标签：proxy, ip-address, vpn, routes, router

我的情况是这样的：

我有一个由我们的用户访问的网络服务（托管在美国）。我有一个来自中国的新用户，我的网络服务可能会被中国防火墙阻止。我的问题是，我的网络服务是否有可能使用某种代理或其他东西（我不确切知道它是什么技术），这将使我的服务有一个中国 IP 地址（希望不会被阻止）而无需每个用户（Web 服务消费者）修改他们的某种浏览器设置？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:13:16.813

从技术上讲，您可以设置另一个端口转发到您的服务的服务器 (IP)。不过这有点尴尬，因为您可以通过该 IP 提供您的服务。实际上并没有一种方法可以自动代理用户（那会很可怕）。

服务到中国时还要考虑速度。如果您的潜在客户需要，您可以考虑获取中国 IP 地址和服务器。不过，有一些税务问题和法律文件需要签署。我实际上只是通过ChinaNetCloud完成了这个过程。

获得中文服务器主要是SIR表格。[这](http://chinanetcloud.com/sites/default/files/NetCloud_OutsourcingWP20080928_1.pdf)是来自 CNC 的推销……请记住，中国是巨大的，您甚至可能想同地办公。即使是香港的服务器在北京也很慢。香港在防火墙的另一边。

可能看这个：防火墙。[https://serverfault.com/questions/147232/port-forwarding-with-multiple-ips](https://serverfault.com/questions/147232/port-forwarding-with-multiple-ips)

# php - 在 php 中进行 24 个数据库查询或 1 个数据库查询和排序是否更快？

> ID：12304912
> 
> 赞同：1
> 
> 时间：2012-09-06T16:59:06.797
> 
> 标签：php, mysql, sql

我有一个网站接受用户的条目。我想创建一个图表来显示一段时间内的条目。对数据库进行 24 次调用让 sql 返回每小时的条目数是否更有效，或者我应该只调用一次并返回所有条目并在 php 中组织它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:02:03.057

取决于数据、数据库模式和查询。

通常，您可以进行的查询越少越好。

如果优化查询后仍然很慢，将结果缓存在PHP中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:04:31.583

I think it depends on your settings, such as database, whether database on the same machine as web server, traffic, ... each call uses some over header on database server, but you do not need sort on web server. I would suggest test it with a loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:15:06.850

好吧，让我们比较一下：

1) 查询数据库中的所有值。通过网络将大量数据返回到应用程序服务器。通过客户端的 DBD 接口解析所有这些数据。构建您自己的数据结构，以您想要的方式存储数据。编写、记录和维护客户端代码以遍历详细数据，为每一行添加/更新您的数据结构。

2）在数据库中以您想要的格式查询您想要的数据。让高度优化的数据库创建摘要存储桶。通过网络返回更少的数据。在应用服务器上解析更少的数据。完全按照返回的数据使用数据。

没有“取决于”。使用数据库。

# javascript - 我希望我的 div 中带有动画切换高度的链接可以点击

> ID：12304917
> 
> 赞同：0
> 
> 时间：2012-09-06T16:59:19.057
> 
> 标签：javascript, jquery, hyperlink, jquery-animate, height

我有一个 div，点击后会增加高度，反之亦然。div 内部是一个 RSS 提要捕获器。问题是，当 Div 展开并单击 RSS 提要上的链接时，Div 只是折叠而不是跟随链接。

这是代码：

```
$(document).ready(function(){
$("#divright").toggle(function(){
$("#divright").animate({
height:640,
borderBottomWidth: "0px"},500);
},function(){
$("#divright").animate({
height:45,
borderBottomWidth: "1px"},500);    
});
}); 
```

和链接（平面设计新闻位）

[http://flatpack.site90.com/About%20Flatpack.html](http://flatpack.site90.com/About%20Flatpack.html)

我如何对其进行排序，以便我可以单击 RSS 提要上的链接，但也可以保留以某种方式折叠面板的能力。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:49:42.857

如果可以的话，从扩展区域中取出切换器。我会这样做

```
<div class="wrapper">
    <h2 class="toggler">Toggler</h2>
    <ul>
        <li>News</li>
    </ul>
</div>​

$(".wrapper h2.toggler").click(function(){
    var $ul = $(this).next();
    $ul.toggle("slide");
});​ 
```

[http://jsfiddle.net/wz2Gt/15/](http://jsfiddle.net/wz2Gt/15/)

# asp.net - SignalR 用于更新客户端从另一个事件系统传递的事件

> ID：12304922
> 
> 赞同：1
> 
> 时间：2012-09-06T16:59:40.860
> 
> 标签：asp.net, web-services, signalr, publish-subscribe

我们有这个 Pub/Sub 系统，您可以通过 C# 中的回调机制订阅该系统，以接收来自数据库中发生的各种事件的事件。此订阅附加了一个回调签名，允许 Pub / Sub 系统回调它拥有的任何订阅者并通知他们该回调线程上的更改。

我们正在使用我们的 Windows 应用程序并将其迁移到 Web 应用程序中。为此，我需要一种方法来使用来自此 Pub / Sub 的信息更新此 Web 应用程序（客户端）。我想使用 SignalR，但不确定在哪里托管它。我假设如果我将它托管在与客户端相同的 Web 应用程序上，它将无法订阅 pubsub，因为它无法执行后台线程。目前，我将它放在一个控制台应用程序中，该应用程序在特定端口上托管 SignalR 服务器。显然，这是为了测试而不是更大规模的理想选择。

我的问题是.. 在 IIS 之外托管 SignalR 真的安全吗？我应该把它放在 Windows 服务中吗？Web服务以某种方式？它可以以某种方式进入 Web 应用程序吗？

# c++ - 有没有办法并行运行 C++ 单元测试测试？

> ID：12304927
> 
> 赞同：11
> 
> 时间：2012-09-06T16:59:54.750
> 
> 标签：c++, multithreading, unit-testing, concurrency, boost-test

我现在使用 Boost Test 已经很长时间了，但最终我的测试运行速度太慢了。由于每个测试都是高度并行的，我希望它们与我的所有内核同时运行。

有没有办法使用 Boost Test Library 做到这一点？我没有找到任何解决方案。我试图查看如何编写自定义测试运行程序，但我没有太多关于这一点的文档:(

如果没有办法，有人知道一个好的 C++ 测试框架来实现这个目标吗？我在想 Google Test 可以完成这项工作，但显然它也不能并行运行测试。即使该框架的功能比其他更知名的框架少，也不是问题，我只需要简单的断言和多线程执行即可。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T21:28:35.537

您可以为此使用[CTest 。](http://www.cmake.org/cmake/help/v2.8.9/ctest.html)

CTest 是 CMake（构建系统生成器）附带的测试驱动程序，因此您需要使用 CMake 使用现有文件和测试来创建构建系统，这样您就可以使用 CTest 运行测试可执行文件。

我没有亲自将 Boost.Test 与 CMake 一起使用（我们使用 GoogleTest），但[这个问题](https://stackoverflow.com/questions/4299326/how-can-i-use-boost-test-in-a-cmake-based-project)更详细地介绍了该过程。

在 CMakeLists 文件中添加测试后，您可以使用[CTest 的`-j`参数](http://www.cmake.org/cmake/help/v2.8.9/ctest.html#opt:-jjobs--paralleljobs)来指定并行运行的作业数量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T21:51:30.020

谷歌在 gtest 文档中暗示的是[测试分片](http://code.google.com/p/googletest/wiki/AdvancedGuide#Distributing_Test_Functions_to_Multiple_Machines)——让多台机器只使用命令行参数和环境变量来运行测试。您可以在单独的进程中在一台机器上运行它们，在其中适当地设置 GTEST_SHARD_INDEX 和 GTEST_TOTAL_SHARDS 环境变量。

原则上，没有什么可以阻止您使用不同的过滤参数（[Boost.test](http://www.boost.org/doc/libs/1_38_0/libs/test/doc/html/utf/user-guide/runtime-config/run-by-name.html)，[gtest](http://code.google.com/p/googletest/wiki/AdvancedGuide#Running_a_Subset_of_the_Tests)）启动测试可执行文件的多个进程

2014 年更新：[https ://github.com/google/gtest-parallel](https://github.com/google/gtest-parallel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T22:04:04.333

将套件拆分为由多个较小的集合组成，每个集合都使用单独的二进制文件启动，并根据所有这些将*.PHONY*目标*测试添加到您的构建系统中。*运行方式（假设您使用 make）*make -jN test*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T21:47:38.443

鉴于[未解决问题列表](http://www.boost.org/doc/libs/release/libs/test/doc/html/open-issues.html)中的第三个要点目前是线程安全，我认为没有办法告诉 Boost 测试在多个线程中运行测试。

相反，您需要找到一个支持并行运行测试的[外部测试](http://www.boost.org/doc/libs/release/test/doc/html/utf/user-guide/usage-variants/extern-test-runner-variant.html)运行程序（我希望这可以通过`fork`关闭新进程来工作）。

# iphone - 登录和注册错误 3840

> ID：12304935
> 
> 赞同：0
> 
> 时间：2012-09-06T17:00:27.947
> 
> 标签：iphone, ios, json, ios5

我正在关注本教程 [http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)并开始通过 Objective-c 实现登录和注册的部分。每次按注册或登录时，我都会收到一条错误消息，提示“操作无法完成。（可可错误 3840）。此外，我在 xcode 中也没有收到错误。请帮助

我刚刚检查了 mysql 数据库，它在用户名和密码字段中插入了一个用户 ID，但没有文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:48:12.883

当程序在响应中遇到无效的 JSON 时，可能会发生此错误。要确定 JSON 响应是否有效，请使用[HTTPSnoop](http://www.tuffcode.com "HTTPSnoop")等工具检查 PHP 脚本的输出。

# wordpress - 一个寻呼机的轻量级 CMS

> ID：12304941
> 
> 赞同：-1
> 
> 时间：2012-09-06T17:00:37.993
> 
> 标签：wordpress, content-management-system

创建一个单页网站需要一个非常轻量级的 CMS。我通常在我的所有项目中使用 wordpress，但对于这个项目来说似乎很重。

一页：

生物

新闻提要

接触

我希望客户能够编辑他们的简历，包括图片并添加填充提要的简短新闻条目。

有什么建议么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:09:13.323

使用 WordPress。

当然它*很重*，但是您对 WordPress 的现有知识以及满足您对 CMS 的要求胜过这一事实。

客户总是可以成长为网站，你未来的自己会感谢你没有涌现出一些[时髦的解决方案](http://jason.pureconcepts.net/2012/09/code-style-fashion/)。

# python - win32com PyIDispatch 属性在创建类时丢失

> ID：12304944
> 
> 赞同：0
> 
> 时间：2012-09-06T17:00:46.107
> 
> 标签：python, win32com

我试过这个：

```
class A(IntelliCAD.IIcadApplication):
    def __init__(self):
        self = (win32com.client.Dispatch('Icad.Application'))
        print dir(self)           

a = A()
print dir(a) 
```

并得到以下输出：

```
['CLSID', 'DefineFunction', 'GetInterfaceObject', 'Help',
'IsFunctionLoaded', 'ListSDS', 'LoadDVB', 'LoadLISP', 'LoadSDS',
'Quit', 'RunCommand', 'RunMacro', 'RunScript', 'UndefineFunction',
'UnloadDVB', 'UnloadSDS', '_ApplyTypes_', '__doc__', '__eq__',
'__getattr__', '__init__', '__module__', '__ne__', '__repr__',
'__setattr__', '_get_good_object_', '_get_good_single_object_',
'_oleobj_', '_prop_map_get_', '_prop_map_put_', 'coclass_clsid']

['CLSID', 'DefineFunction', 'GetInterfaceObject', 'Help',
'IsFunctionLoaded', 'ListSDS', 'LoadDVB', 'LoadLISP', 'LoadSDS',
'Quit', 'RunCommand', 'RunMacro', 'RunScript', 'UndefineFunction',
'UnloadDVB', 'UnloadSDS', '_ApplyTypes_', '__doc__', '__eq__',
'__getattr__', '__init__', '__module__', '__ne__', '__repr__',
'__setattr__', '_get_good_object_', '_get_good_single_object_',
'_prop_map_get_', '_prop_map_put_', 'coclass_clsid'] 
```

唯一的区别`_oleobj_`是不知何故丢失了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:44:58.667

这很简单）当您将 Dispatch 分配给“self”时，您将创建隐藏局部变量的新的其他对象。您不能替换对象，因为您无法访问 Python 中的指针。

使用您需要的对象：

```
a1 = A()
# or
a2 = win32com.client.Dispatch('Icad.Application') 
```

没有必要在任何地方使用类。

# ubuntu - /dev/random 和 /dev/urandom 何时创建？

> ID：12304948
> 
> 赞同：1
> 
> 时间：2012-09-06T17:01:04.103
> 
> 标签：ubuntu, random, random-sample

我试图在 Ubuntu 的启动过程中尽早采样一些随机性。我想知道是否有人建议如何做到这一点。我目前的想法是寻找 /dev/random 和 /dev/urandom 在引导序列中创建的位置，并在那里添加我的代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:12:58.657

文件 /dev/random 和 /dev/urandom 由设备管理器创建，作为硬件抽象层的一部分。这是作为 udev 和 systemd 的一部分进行管理的（根据维基百科，systemd 在 2012 年 4 月将 udev 合并到其中）。

可以通过命令查看该服务的启动顺序

```
 sudo chkconfig --list systemd 
```

启动后，这些文件应该可用。

如果您需要一个更早的随机数，您可以做的另一件事是让您的程序/脚本获取纪元时间并使用它，或者如果您需要一个范围，使用您的上随机数范围的模数来获取一个数字从 0 - 你的模数。这应该在任何时候都有效。如何做到这一点取决于您的语言。

# c++ - Linux下如何用C++创建进程？

> ID：12304949
> 
> 赞同：2
> 
> 时间：2012-09-06T17:01:03.477
> 
> 标签：c++, process, multiprocessing

我想通过调用可执行文件来创建一个进程，就像`popen`允许的那样。但我不想通过管道与它实际通信：我想控制它，比如在那里发送信号或找出进程是否正在运行，发送后等待它完成`SIGINT`等等，就像`multiprocessing`在 Python 中一样. 像这样：

```
pid_t A = create_process('foo');
pid_t B = create_process('bar');

join(B); // wait for B to return
send_signal(A, SIGINT); 
```

正确的方法是什么？

用例例如：

*   监控一堆进程（比如在它们崩溃时重新启动它们）

**更新**

我看到答案朝哪个方向发展：`fork()`。然后我想修改我的用例：我想创建一个类，它在构造函数中接受一个字符串，并指定如下：当一个对象被实例化时，一个（子）进程被启动（并由类的实例），当调用析构函数时，进程获得终止信号，并且析构函数在进程返回后立即返回。

现在用例：在升压状态图中，进入状态时启动进程，离开状态时发送终止。我想，[http](http://www.highscore.de/boost/process/process/tutorials.html#process.tutorials.start_child) ://www.highscore.de/boost/process/process/tutorials.html#process.tutorials.start_child 是最接近我正在寻找的东西，除了它似乎已经过时了。

以非侵入性的方式不可能吗？也许我有一个基本的误解，并且有更好的方法来做这种工作，如果是这样，我很乐意得到一些提示。

**更新 2**

感谢下面的答案，我想我有点明白了。我想，这个例子会打印三次“This is main”，一次打印给“父”，一次打印一次`fork()`——但这是错误的。所以：感谢您耐心的回答！

```
#include <iostream>
#include <string>

#include <unistd.h>

struct myclass
{
    pid_t the_pid;
    myclass(std::string the_call)
    {
        the_pid = fork();
        if(the_pid == 0)
        {
            execl(the_call.c_str(), NULL);
        }
    }
};

int main( int argc, char** argv )
{
    std::cout << "This is main" << std::endl;
    myclass("trivial_process");
    myclass("trivial_process");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:45:40.997

下面的代码根本不是一个现实的代码，但它给了你一些想法。

```
pid_t pid = fork()
if (pid == 0) {
  // this is child process
  execl("foo", "foo", NULL);
}
// continue your code in the main process. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:39:44.923

使用之前发布的代码，试试这个：

```
#include <signal.h>
#include <unistd.h>

class MyProc
{
public:
  MyProc( const std::string& cmd)
  {
    m_pid = fork()
    if (pid == 0) {
      execl(cmd.c_str(), cmd.c_str(), NULL);
    }
  }

  ~MyProc()
  {
    // Just for the case, we have 0, we do not want to kill ourself
    if( m_pid > 0 )
    {
      kill(m_pid, SIGKILL);
      wait(m_pid);
    }
  }
private:
  pid_t m_pid;
} 
```

我在此示例中看到的缺点是，如果发出信号，您无法确定进程是否已完成（可能他不会），因为操作系统将在终止后立即继续，而其他进程可能会延迟. 为确保这一点，您可以使用 ps ... 对 pid 使用 grep，这应该可以工作。

编辑：我已经添加了等待，它出现在上面的评论中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:03:03.373

看看`fork()`( `man 2 fork`)

# java - 尝试将 InputStream 放入 Amazon S3 时进程终止

> ID：12304950
> 
> 赞同：2
> 
> 时间：2012-09-06T17:01:13.050
> 
> 标签：java, amazon-s3

这就是我写 InputStream 的方法

```
public OutputStream getOutputStream(@Nonnull final String uniqueId) throws PersistenceException {
        final PipedOutputStream outputStream = new PipedOutputStream();
        final PipedInputStream inputStream;
        try {
            inputStream = new PipedInputStream(outputStream);
            new Thread(
                    new Runnable() {
                        @Override
                        public void run() {
                            PutObjectRequest putObjectRequest = new PutObjectRequest("haritdev.sunrun", "sample.file.key", inputStream, new ObjectMetadata());
                            PutObjectResult result = amazonS3Client.putObject(putObjectRequest);
                            LOGGER.info("result - " + result.toString());
                            try {
                                inputStream.close();
                            } catch (IOException e) {

                            }
                        }
                    }
            ).start();
        } catch (AmazonS3Exception e) {
            throw new PersistenceException("could not generate output stream for " + uniqueId, e);
        } catch (IOException e) {
            throw new PersistenceException("could not generate input stream for S3 for " + uniqueId, e);
        }
         try {
            return new GZIPOutputStream(outputStream);
        } catch (IOException e) {
            LOGGER.error(e.getMessage(), e);
            throw new PersistenceException("Failed to get output stream for " + uniqueId + ": " + e.getMessage(), e);
        }
    } 
```

在下面的方法中，我看到我的进程死了

> ```
> protected <X extends AmazonWebServiceRequest> Request<X> createRequest(String bucketName, String key, X originalRequest, HttpMethodName httpMethod) {
>     Request<X> request = new DefaultRequest<X>(originalRequest, Constants.S3_SERVICE_NAME);
>     request.setHttpMethod(httpMethod);
>     if (bucketNameUtils.isDNSBucketName(bucketName)) {
>         request.setEndpoint(convertToVirtualHostEndpoint(bucketName));
>         request.setResourcePath(ServiceUtils.urlEncode(key));
>     } else {
>         request.setEndpoint(endpoint);
> 
>         if (bucketName != null) {
>             /*
>              * We don't URL encode the bucket name, since it shouldn't
>              * contain any characters that need to be encoded based on
>              * Amazon S3's naming restrictions.
>              */
>             request.setResourcePath(bucketName + "/"
>                     + (key != null ? ServiceUtils.urlEncode(key) : ""));
>         }
>     }
> 
>     return request;
> } 
> ```

*该过程在request.setResourcePath(ServiceUtils.urlEncode(key))*上失败；因此我什至无法调试，即使密钥是有效名称并且不是*NULL*

有人可以帮忙吗？

这是`request`临死前的样子

```
request = {com.amazonaws.DefaultRequest@1931}"PUT https://my.bucket.s3.amazonaws.com / "
resourcePath = null
parameters = {java.util.HashMap@1959} size = 0
headers = {java.util.HashMap@1963} size = 0
endpoint = {java.net.URI@1965}"https://my.bucket.s3.amazonaws.com"
serviceName = {java.lang.String@1910}"Amazon S3"
originalRequest = {com.amazonaws.services.s3.model.PutObjectRequest@1285}
httpMethod = {com.amazonaws.http.HttpMethodName@1286}"PUT"
content = null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T05:46:14.030

我尝试了相同的方法，但对我来说也失败了。

我最终先将所有数据写入输出流，然后在将数据从输出流复制到输入流后开始上传到 S3：

```
...
// Data written to outputStream here
...
byte[] byteArray = outputStream.toByteArray();
amazonS3Client.uploadPart(new UploadPartRequest()
  .withBucketName(bucket)
  .withKey(key)
  .withInputStream(new ByteArrayInputStream(byteArray))
  .withPartSize(byteArray.length)
  .withUploadId(uploadId)
  .withPartNumber(partNumber)); 
```

如果必须在开始上传到 S3 之前将整个数据块写入并复制到内存中，这有点违背了写入流的目的，但这是我让它工作的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-04T23:54:57.830

这是我尝试和工作的 -

```
 try (PipedOutputStream pipedOutputStream = new PipedOutputStream();
     PipedInputStream pipedInputStream = new PipedInputStream()) {
            new Thread(new Runnable() {

            public void run() {
                try {
                      // write some data to pipedOutputStream
                } catch (IOException e) {
                   // handle exception
                }
            }
            }).start();
       PutObjectRequest putObjectRequest = new PutObjectRequest(BUCKET, FILE_NAME, pipedInputStream, new ObjectMetadata());
       s3Client.putObject(putObjectRequest);
} 
```

此代码与 S3 一起使用会引发警告，即未设置内容长度，并且 s3 将被缓冲并可能导致 OutOfMemoryException。我不相信任何廉价的方法来设置 ObjectMetadata 中的内容长度只是为了摆脱这个消息，希望 AWS SDK 不会为了找到内容长度而将整个流流式传输到内存中。

# c# - 如何在c#和wpf中实现scrollviewer弹跳的动画？

> ID：12304953
> 
> 赞同：2
> 
> 时间：2012-09-06T17:01:33.033
> 
> 标签：c#, ios, wpf, scroll, scrollviewer

我想在c#和wpf中实现scrollviewer弹跳的动画，比如IOS的UIScrollview。

当用户滚动到顶部或末尾时，它开始降低速度和弹跳。

我认为google可以搜索相关问题，但我找不到。

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:50:46.553

对于触摸操作来说，WPF 已经为此提供了一些内置支持。看一下[ReportBoundaryFeedback](http://msdn.microsoft.com/en-us/library/dd988680.aspx)方法和[ManipulationBoundaryFeedback](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationboundaryfeedback.aspx)事件。我相信 ScrollViewer 在触摸平移时会自动使用它（请参阅[PanningMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.panningmode.aspx)）。

# .htaccess - 如何使用 robots.txt 或 .htaccess 禁止爬虫 360Spider？

> ID：12304954
> 
> 赞同：7
> 
> 时间：2012-09-06T17:01:33.570
> 
> 标签：.htaccess, search-engine, web-crawler, bots, robots.txt

由于 360Spider，我遇到了一个问题：这个机器人每秒向我的 VPS 发出太多请求并减慢它的速度（CPU 使用率变为 10-70%，但通常我有 1-2%）。我查看了 httpd 日志并看到了这样的行：

```
182.118.25.209 - - [06/Sep/2012:19:39:08 +0300] "GET /slovar/znachenie-slova/42957-polovity.html HTTP/1.1" 200 96809 "http://www.hrinchenko.com/slovar/znachenie-slova/42957-polovity.html" "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.8.0.11) Gecko/20070312 Firefox/1.5.0.11; 360Spider
182.118.25.208 - - [06/Sep/2012:19:39:08 +0300] "GET /slovar/znachenie-slova/52614-rospryskaty.html HTTP/1.1" 200 100239 "http://www.hrinchenko.com/slovar/znachenie-slova/52614-rospryskaty.html" "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.8.0.11) Gecko/20070312 Firefox/1.5.0.11; 360Spider 
```

等等

如何通过 robots.txt 完全阻止这个蜘蛛？现在我的 robots.txt 看起来像这样：

```
User-agent: *
Disallow: /cgi-bin/
Disallow: /tmp/

User-agent: YoudaoBot
Disallow: /

User-agent: sogou spider
Disallow: / 
```

我添加了行：

```
User-agent: 360Spider
Disallow: / 
```

但这似乎不起作用。如何阻止这个愤怒的机器人？

如果您提议通过 .htaccess 阻止它，请注意它现在看起来像这样：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

SetEnvIfNoCase Referer ^360Spider$ block_them
Deny from env=block_them

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

而且，尽管存在

```
SetEnvIfNoCase Referer ^360Spider$ block_them
Deny from env=block_them 
```

这个机器人仍然试图杀死我的 VPS 并登录到访问日志中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T00:47:13.000

在您的 .htaccess 文件中，只需添加以下内容：

> ```
> RewriteCond %{REMOTE_ADDR} ^(182\.118\.2)
> 
> RewriteRule ^.*$ http://182.118.25.209/take_a_hike_moron [R=301,L] 
> ```

这将捕获从 182.118.2xx.xxx 范围内启动的所有机器人并将它们发送回给自己...

蹩脚的 360 bot 正在从中国的服务器上被解雇……所以只要您不介意与来自该 IP 范围的蹩脚的中国流量说再见，这将保证让那些小狗无法访问您网站上的任何文件.

您的 .htaccess 文件中的以下两行也将通过它愚蠢到自豪地将 360spider 放入其用户代理字符串中来选择它。当他们使用其他 IP 范围时，这可能很方便，然后是 182.118.2xx.xxx

> ```
> RewriteCond %{HTTP_USER_AGENT} .*(360Spider) [NC]
> 
> RewriteRule ^.*$ http://182.118.25.209/take_a_hike_moron [R=301,L] 
> ```

是的……我也讨厌他们！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T17:23:06.883

您的 robots.txt 似乎是正确的。一些机器人只是忽略它（恶意机器人从任何 IP 地址爬取来自全球数百到数百万受感染设备的任何 IP 地址），在这种情况下，您可以使用apache 2.X 的[mod_security](http://www.modsecurity.org/documentation/modsecurity-apache/1.9.3/modsecurity-manual.html)模块限制每秒的请求数

此处配置示例：http: [//blog.cherouvim.com/simple-dos-protection-with-mod_security/](http://blog.cherouvim.com/simple-dos-protection-with-mod_security/)

**[编辑]**在 linux 上，iptables 还允许限制每个 ip 每 (x) 秒的 tcp:port 连接，提供在内核上启用 conntrack 功能。请参阅：[https ://serverfault.com/questions/378357/iptables-dos-limit-for-all-ports](https://serverfault.com/questions/378357/iptables-dos-limit-for-all-ports)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T17:20:16.433

您可以将以下规则放入您的`.htaccess`文件中

```
RewriteEngine On  
RewriteBase /  
SetEnvIfNoCase Referer 360Spider$ block_them
Deny from env=block_them 
```

注意：`mod_setenvif`应在服务器配置中启用Apache 模块

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T17:16:31.973

运行爬虫的人可能会忽略 robots.txt。您可以通过 IP

命令拒绝阻止它们，允许
来自 216.86.192.196 的拒绝

在.htaccess

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T23:12:04.627

SetEnvIfNoCase 用户代理 360Spider 被阻止

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T04:52:27.673

我的`.htaccess`文件中有这样的行来阻止坏机器人：

```
RewriteEngine On
RewriteCond %{ENV:bad} 1
RewriteCond %{REQUEST_URI} !/forbidden.php
RewriteRule (.*) - [R=402,L]

SetEnvIf Remote_Addr "^38\.99\." bad=1
SetEnvIf Remote_Addr "^210\.195\.45\." bad=1
SetEnvIf Remote_Addr "^207\.189\." bad=1
SetEnvIf Remote_Addr "^69\.84\.207\." bad=1

# ...

SetEnvIf Remote_Addr "^221\.204\." bad=1
SetEnvIf User-agent "360Spider" bad=1 
```

它将状态码发送`402 Payment Required`到所有列入黑名单的 IP/用户代理。

您可以将要显示给机器人的任何内容放入`forbidden.php`.

这是相当有效的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T00:48:23.537

我只需要阻止 360Spider。使用 IIS (IIS7) 上的 StreamCatcher 解决，幸运的是，它已经安装，因此只需要进行小的配置更改。详情请见[http://needs-be.blogspot.com/2013/02/how-to-block-spider360.html](http://needs-be.blogspot.com/2013/02/how-to-block-spider360.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-24T21:19:07.960

我使用以下内容，它有很大帮助！检查 HTTP_USER_AGENT 是否有恶意机器人

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond %{REQUEST_URI} !^/robots\.txt$
    RewriteCond %{REQUEST_URI} !^/error\.html$

    RewriteCond %{HTTP_USER_AGENT} EasouSpider [NC,OR]
    RewriteCond %{HTTP_USER_AGENT} YisouSpider [NC,OR]
    RewriteCond %{HTTP_USER_AGENT} Sogou\ web\ spider [NC]
    RewriteCond %{HTTP_USER_AGENT} 360Spider [NC,OR]
    RewriteRule ^.*$ - [F,L]
</IfModule>

<Location />
    <IfModule mod_setenvif.c>
        SetEnvIfNoCase User-Agent "EasouSpider" bad_bot
        SetEnvIfNoCase User-Agent "YisouSpider" bad_bot
        SetEnvIfNoCase User-Agent "LinksCrawler" bad_bot

        Order Allow,Deny
        Allow from All
        Deny from env=bad_bot
    </IfModule>
</Location> 
```

# shopify - ShopifyAPI 方法列表

> ID：12304957
> 
> 赞同：1
> 
> 时间：2012-09-06T17:01:52.040
> 
> 标签：shopify

我浏览了 shopifyApi 文档，它解释了如何通过 post/put/get http 动词与 API 进行通信。我正在用 Ruby 编码，我想知道在哪里可以找到所有可用方法的列表（如 product.add_metafield(params)）。我检查了 gem 服务器，没有找到任何可用于 api 的 RDOC。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:28:02.283

这是一个巧妙的技巧。在您的命令行尝试**gem which shopify_api**。这将列出您用于当前 Ruby 的当前版本。当然，对于 RVM 或 RBEnv，这些变化很大。

将结果复制并粘贴到剪贴板。我的 CLI 中的一个示例是：

```
/Users/fuzzy/.rvm/gems/ruby-1.9.3-p194/gems/shopify_api-3.0.1/lib/shopify_api.rb 
```

你只需要这部分...

```
/Users/fuzzy/.rvm/gems/ruby-1.9.3-p194/gems/shopify_api-3.0.1/lib 
```

在剪贴板中输入**subl**或**mate**或**vim**或任何文本编辑器，然后粘贴到该路径中。然后，您就可以随意使用这颗宝石了。如果您导航到**shopify_api/resources**文件夹，您将看到 product.rb 文件，其中展示了您可以使用的一些方法。您可以看到大多数资源是如何以这种方式工作的。学习 Active Resource 还可以在很大程度上展示 API gem 如何提供功能。

一旦你通过了这个探索阶段，你就可以破解宝石。您可以重新打开模块和类并添加自己的方法。很整洁的东西。

基于 Thor 的命令行界面也在其中，值得一看。在我看来，这是宝石最酷的方面之一。见**shopify_api/cli.rb**

# uitextview - 如何在 UITextView 上禁用 UITextTapRecognizer

> ID：12304959
> 
> 赞同：3
> 
> 时间：2012-09-06T17:01:59.530
> 
> 标签：uitextview, uigesturerecognizer

我想尝试禁用 UITextTapRecognizer，我认为它是 UITextView 的内置属性，因为我怀疑它会干扰我想要实现的点击手势识别器。怎么可能做到这一点？

谢谢阅读！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:02:54.350

我不确定这是否会直接回答您的问题（即“禁用 UITextTapRecognizer”），但我认为它可能会有所帮助。您可以阻止该 tapRecognizer 识别手势，从而基本上“禁用”它（我认为）。

> “您可以阻止手势识别器查看特定的触摸，甚至识别手势。您可以使用委托方法或 UIGestureRecognizer 类声明的覆盖方法来指定这些“预防”关系。
> 
> UIGestureRecognizerDelegate 协议声明了两个可选方法，可防止特定手势识别器逐个识别手势。”

尝试`gestureRecognizerShouldBegin:`或`gestureRecognizer:shouldReceiveTouch:`委托协议方法。

> “此外，有两个 UIGestureRecognizer 方法（在 UIGestureRecognizerSubclass.h 中声明）影响与这些委托方法相同的行为。子类可以覆盖这些方法来定义类范围的预防规则。”

看着：

```
- (BOOL)canPreventGestureRecognizer:(UIGestureRecognizer *)preventedGestureRecognizer;
- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer *)preventingGestureRecognizer; 
```

来源：[Apple docs](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)（iOS 的事件处理指南）

我希望它有帮助！

# javascript - 实现客户端 WebHook 处理程序？

> ID：12304960
> 
> 赞同：23
> 
> 时间：2012-09-06T17:02:00.990
> 
> 标签：javascript, http, push-notification, webhooks

我是 Webhooks 的新手，如果这是一个简单的问题，请原谅。

我很清楚 Webhook 提供程序是如何工作的，即每当需要推送此信息时，它都会将有效负载发送到指定为回调的 URL。

现在我的问题是：如何编写客户端 Webhook 处理程序，它可以检测/处理回调并相应地更新我的客户端。例如，如果我的客户端是一个带有要点的简单网页，我想将新数据附加到列表中，只要它通过。

最好，我会追求一个完整的 JavaScript 解决方案......

是否有可能已经存在的 JS WebHook 客户端/处理程序？似乎这应该很普遍，应该存在，尽管我一直找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T21:12:48.047

看看 WebSockets。根据您的需要，这可能正是您避免轮询并保持同步所需要的 - 特别是如果您有很多客户端需要从您的服务器查看相同的更新。

我强烈推荐[Socket.IO](https://github.com/learnboost/socket.io)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:10:54.843

要使用 webhook API 端点，或者换句话说，“侦听更改”，您需要轮询更改、长轮询更改或任何您想做的聪明的事情。

或者，您可以使用任何 javascript Publisher Subscriber 模块轻松完成此操作。尝试用谷歌搜索 PubSub 的东西。这是一个这样的工具的例子：[http ://www.pubnub.com/tutorial/javascript-push-api](http://www.pubnub.com/tutorial/javascript-push-api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T12:31:15.510

网络挂钩不是为此而设计的。Web 挂钩中的事件通知是通过 POST 请求完成的，这意味着您的客户端应用程序无法收到有关新事件的通知，除非它侦听传入的 HTTP 请求（通常客户端位于防火墙后面，因此在大多数情况下这是不可行的）。

如果您想避免轮询服务器以获取状态更新，请按照[matthewhudson](https://stackoverflow.com/a/12308484/345520)指出的那样使用 WebSockets。

# r - 使用特征值来测试奇异性：识别共线列

> ID：12304963
> 
> 赞同：6
> 
> 时间：2012-09-06T17:02:07.547
> 
> 标签：r, eigen

我正在尝试使用特征值方法检查我的矩阵是否是奇异的（即，如果特征值之一为零，则矩阵是奇异的）。这是代码：

```
z <- matrix(c(-3,2,1,4,-9,6,3,12,5,5,9,4),nrow=4,ncol=3) 
eigen(t(z)%*%z)$values 
```

我知道特征值是按降序排列的。有人可以告诉我是否有办法找出与矩阵中的哪一列相关联的特征值？我需要删除共线列。

在上面的示例中可能很明显，但这只是一个示例，旨在节省您创建新矩阵的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T17:13:29.357

例子：

```
z <- matrix(c(-3,2,1,4,-9,6,3,12,5,5,9,4),nrow=4,ncol=3)
m <- crossprod(z) ## slightly more efficient than t(z) %*% z 
```

这告诉您第三个特征向量对应于共线组合：

```
ee <- eigen(m)
(evals <- zapsmall(ee$values))
## [1] 322.7585 124.2415   0.0000 
```

现在检查相应的特征向量，*它们被列为对应于它们各自特征值的列*：

```
 (evecs <- zapsmall(ee$vectors))
   ## [1,] -0.2975496 -0.1070713  0.9486833
   ## [2,] -0.8926487 -0.3212138 -0.3162278
   ## [3,] -0.3385891  0.9409343  0.0000000 
```

第三个特征值为零；第三个特征向量 ( `evecs[,3]`) 的前两个元素不为零，这表明第 1 列和第 2 列是共线的。

这是自动化此测试的一种方法：

```
 testcols <- function(ee) {
       ## split eigenvector matrix into a list, by columns
       evecs <- split(zapsmall(ee$vectors),col(ee$vectors))
       ## for non-zero eigenvalues, list non-zero evec components
       mapply(function(val,vec) {
           if (val!=0) NULL else which(vec!=0)
       },zapsmall(ee$values),evecs)
   }

testcols(ee)
##  [[1]]
## NULL
## [[2]]
## NULL
## [[3]]
## [1] 1 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:57:01.743

你可以`tmp <- svd(z)`用来做一个svd。然后将特征值保存`tmp$d`为特征值的对角矩阵。这也适用于非方阵。

```
> diag(tmp$d)
         [,1]     [,2]         [,3]
[1,] 17.96548  0.00000 0.000000e+00
[2,]  0.00000 11.14637 0.000000e+00
[3,]  0.00000  0.00000 8.787239e-16 
```

# svn - 通过 Beanstalk 部署 - 部署特定修订版

> ID：12304964
> 
> 赞同：3
> 
> 时间：2012-09-06T17:02:12.353
> 
> 标签：svn, deployment, revision, amazon-elastic-beanstalk, beanstalk-svn

我正在开发一个 API。我们有 3 个环境。开发（非本地设置）、暂存和生产。

像往常一样，我们在 Dev 上开发一切。完成后，将其推送到登台，在那里进行测试，然后再推送到生产环境。

通过这种方式在 Beantalk 上设置部署：

```
 Dev  (Auto Deploy to the server)
 Staging (Manual Deploy)
 Prod (Manual Deploy) 
```

当我们发布 API V1.0 的第一个版本时。一切都与 SVN 修订号同步。假设所有 3 个环境的修订号为 1000，部署到所有 3 个服务器上。

现在我一直在修复开发环境中的错误。所以现在部署到 Dev 上的修订号是 1200。公司不想将所有这些更改推送到登台和生产。

现在他们想出了紧急的错误。他们只希望将这些错误推送到暂存和生产，而不是我修复并已部署到开发的错误。

在发布 v1.0 之后，我创建了一个标签并复制了所有文件。所以现在我从那个标签中创建了一个分支，将文件签出到我的本地系统并开始修复这个分支上的错误（不确定这是否是正确的做法）。

但是，当我提交更改时，这些更改会自动部署在开发人员上。现在开发人员的修订号是 1201（它是 1200，我之前所做的所有修复，但没有部署到 Staging 和 Prod）。

现在，修订号部署如下所示：

```
 Dev (1201)
  Staging (1000)
  Prod (1000) 
```

我希望将最新的修复程序部署到 Staging 和 Prod。当我选择 1201 部署到 Staging 和 Prod 时，我猜它会部署从 1001 到 1201 的所有修订版。不仅仅是 1201。

你知道如何处理这个问题吗？有没有更好的做法？

# sql - Transact-SQL 字符串自连接

> ID：12304967
> 
> 赞同：3
> 
> 时间：2012-09-06T17:02:20.013
> 
> 标签：sql, sql-server

我是 SQL 新手，想为 MS SQL Server (MS SQL Server 2012) 创建一些 UDF 函数，但非常简单的表达式不起作用。我只是想连接 2 个字符串并将结果保存到第一个：

```
DECLARE @ret   CHAR (20)
SET @ret = '4'
SET @ret = @ret + '55' 
```

执行后，`@ret`保持在`4`! 为什么？如果我为“4”引入另一个变量，它会起作用。我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:10:31.737

那是因为您使用`char`数据类型。

当您将值存储`'4'`在 a`char(20)`中时，它变为`'4___________________'`（20 个字符长，`_`这里代表空格）。

当您连接`'4___________________'`并`'55'`获得`'4___________________55'`（22 个字符长）时。

当您将其存储回`char(20)`变量中时，它将被截断为 20 个字符，您将得到`'4___________________'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:09:04.187

When you have a `CHAR(20)` the first `SET` will actually store `'4' with 19 blank characters` at the end. This is because the `CHAR` datatype is fixed width, and will pad your data with blank characters until it gets to the size, 20 here.

When you concatenate the `'55'` onto the end, it will be the 21st and 22nd characters in the string, and fall off when you try to store it inside @ret, which can only hold the first 20 characters.

Using an `VARCHAR` will solve your problem, allowing @ret to be the exact size you require.

```
DECLARE @ret VARCHAR(20);
SET @ret = '4';
SET @ret = @ret + '55'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:11:14.890

更改变量的数据类型以匹配您要连接的内容：而不是 char 使用 varchar

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:09:03.667

As `CHAR` is a fixed length string data type, so any remaining space in the field is filled with blanks.

In your scenario, `SET @ret = @ret + '55'` will try to store 22 character but unfortunately, the variable is already declared as 20 character long so it truncated the result back to 20 character..Hence, you'll have 20 character with truncating last 2 character i.e. '55'.

Use `char` data type only when you are sure about the length of data which particular `char` data type column have to hold....

If you use nvarchar(20) instead of char(20), it will work fine...

```
DECLARE @ret   nvarchar (20)
SET @ret = '4'
SET @ret = @ret + '55' 
```

See the **[SQLFIDDLE](http://sqlfiddle.com/#!3/3da4e/2)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:09:51.933

尝试在你的函数中使用'cast'以确保@ret是一个字符串，将你的代码更改为这个工作；希望这可以帮助。

```
DECLARE @ret   CHAR (20)  
SET @ret = '4'   
SET @ret = cast(@ret as varchar(1)) + '55' 
```

或者只是将 CHAR(20) 更改为 NVARCHAR(20) ，如下所示：

```
DECLARE @ret   NVARCHAR (20)  
SET @ret = '4'   
SET @ret = @ret + '55' 
```

# php - CodeIgniter 图片上传（将空白插入数组）

> ID：12304970
> 
> 赞同：0
> 
> 时间：2012-09-06T17:02:26.493
> 
> 标签：php, image, codeigniter, file-upload

我正在使用的表单包含五个人的信息。可选地，用户可以为五个人中的每个人上传一张照片。我正在尝试将默认图像插入到未上传图像的结果数组 $files 中。帮助将不胜感激。

```
function multiple_upload($upload_dir = APPPATH, $config = array())
{
    $CI =& get_instance();
    $files = array();

    if(empty($config))
    {
        $config['upload_path']   = realpath($upload_dir . '/uploads');
        $config['allowed_types'] = 'gif|jpg|jpeg|jpe|png';
        $config['max_size']      = '2048';
    }

    $CI->load->library('upload', $config);

    $errors = FALSE;
    $this->load->library('image_lib');  // moved outside loop so it'll work
    foreach($_FILES as $key => $value)
    {
        if( ! empty($value['name']))
        {
            if( ! $CI->upload->do_upload($key))
            {
                $data['upload_message'] = $CI->upload->display_errors(ERR_OPEN, ERR_CLOSE); // ERR_OPEN and ERR_CLOSE are error delimiters defined in a config file
                $CI->load->vars($data);

                $errors = TRUE;
            }
            else
            {

                // resize the saved image
                $path = $CI->upload->data('full_path');
                //echo $path['full_path'] . "<Br/>";
                $config = array(
                    'source_image' => $path['full_path'],
                    'new_image' => $upload_dir . 'uploads/thumbs',
                    'maintain_ration' => true,
                    'width' => 150,
                    'height' => 150
                );

                $this->image_lib->initialize($config);
                $this->image_lib->resize();
                // Build a file array from all uploaded files
                $files[] = $CI->upload->data();

            }
        }
    }

    // There was errors, we have to delete the uploaded files
    if($errors)
    {
        foreach($files as $key => $file)
        {
            @unlink($file['full_path']);
        }
    }
    elseif(empty($files) AND empty($data['upload_message']))
    {
        $CI->lang->load('upload');
        $data['upload_message'] = ERR_OPEN.$CI->lang->line('upload_no_file_selected').ERR_CLOSE;
        $CI->load->vars($data);
    }
    else
    {

        return $files;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:20:50.580

验证上传的文件后，进行检查可能会更容易。

例如：用五个空元素初始化一个数组，每个图片一个，然后对于每个上传的文件，将其文件名设置为适当的数组元素。完成后，只需运行任何空元素，只需将文件（或文件路径）添加到默认图像即可。

这样，您就可以尽可能地保持文件上传和验证，并单独处理页面的业务逻辑。

# wcf - WCF 在 VS2012 中无法正常工作

> ID：12304974
> 
> 赞同：1
> 
> 时间：2012-09-06T17:02:42.083
> 
> 标签：wcf, iis, visual-studio-2012

我安装了 VS2012，现在我正在尝试向本地主机中的项目添加新的 WCF 服务，但是当我浏览 svc 文件时看到的只是默认的 GetData。我看不到自己的 OperationContract 或消息。当我想将它添加为服务参考时，即使在 Visual Studio 发现中它也不会更新。

有人知道修复吗？

刚刚意识到，如果我添加一个新的 WCF 应用程序并更改它们，它就可以工作。但是当我在 IIS 中托管它时，我可以更新它。所以问题出在IIS和VS2012上。

# ant - Ivy：获取 Javadocs 和源代码

> ID：12304976
> 
> 赞同：7
> 
> 时间：2012-09-06T17:02:54.933
> 
> 标签：ant, ivy

我对 Ivy 很陌生，但已经让它与 jar 依赖项一起工作。问题是试图设置它，所以我可以独立于 jar 获取 javadocs 和源。

我有一个简单的测试项目，但无论我在做什么，我都在获取包含类文件的 jar。

我有以下`ivy.xml`文件：

```
<ivy-module version="1.0">
    <info
        organisation="com.vegicorp"
        module="test"
        revision="1.0"
        status="release"/>

    <configurations>
        <conf name="default" visibility="public" extends="runtime,master"/>
        <conf name="master" visibility="public"/>
        <conf name="compile" visibility="public"/>
        <conf name="provided" visibility="public"/>
        <conf name="runtime" visibility="public" extends="compile"/>
        <conf name="test" visibility="private" extends="runtime"/>
        <conf name="system" visibility="public"/>
        <conf name="sources" visibility="public"/>
        <conf name="javadoc" visibility="public"/>
        <conf name="optional" visibility="public"/>
    </configurations>

    <dependencies>
        <dependency org="commons-logging" name="commons-logging" rev="1.1.1"
            conf="compile->default"/>
        <dependency org="commons-logging" name="commons-logging" rev="1.1.1"
            conf="sources->default">
            <artifact name="commons-logging" type="sources" ext="jar"/>
        </dependency>
        <dependency org="commons-logging" name="commons-logging" rev="1.1.1"
            conf="javadoc->default">
            <artifact name="commons-logging" type="javadoc" ext="jar"/>
        </dependency>
    </dependencies>
</ivy-module> 
```

以及以下内容`build.xml`：

```
<project name="ivy-test" default="default" basedir="."
    xmlns:ivy="http://ant.apache.org/ivy">

    <property name="ivy.dir" value="${basedir}/ivy.dir"/>
    <import file="${ivy.dir}/ivy.tasks.xml"/>

    <property name="target.dir" value="${basedir}/lib"/>
    <target name="-resolve">
        <ivy:resolve/>
    </target>

    <target name="clean">
        <delete dir="${target.dir}"/>
        <ivy:cleancache/>
    </target>

    <target name="default"
        depends="-resolve">

        <fail message="ivy.conf is not defined">
            <condition>
                <not>
                    <isset property="ivy.conf"/>
                </not>
            </condition>
        </fail>

        <delete dir="${target.dir}"/>
        <mkdir dir="${target.dir}"/>
        <ivy:retrieve conf="${ivy.conf}"
            pattern="${target.dir}/[artifact]-[revision].[ext]"/>
    </target>
</project> 
```

在命令行中，我将输入：

```
$ ant -Divy.conf=compile 
```

而且，这应该下载带有类的jarfile。

但是，如果我输入它：

```
$ ant -Divy.conf=sources 
```

我想要包含源而不是类的 jar 文件，当我输入以下内容时：

```
$ ant -Divy.conf=javadoc 
```

我想要包含 javadoc 而不是源的 jar 文件。

我很确定这是我`ivy.xml`的不完全正确。我最初尝试过这个：

```
<dependencies>
    <dependency org="commons-logging" name="commons-logging" rev="1.1.1">
        <artifact name="commons-logging" type="jar" ext="jar" conf="compile->default"/>
        <artifact name="commons-logging" type="sources" ext="jar" conf="sources->default"/>
        <artifact name="commons-logging" type="javadoc" ext="jar" conf="javadoc->default"/>
    </dependency> 
```

这下载了 jar、源代码和 javadoc，但无论我尝试哪种配置，都是一次下载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:33:46.017

好吧，我想我已经想通了。我在想这整个过程。我的`<dependencies>`部分应如下所示：

```
<dependencies>
    <dependency org="commons-logging" name="commons-logging" rev="1.1.1"
        conf="javadoc->javadoc;sources->sources;compile->default"/>
</dependencies> 
```

这将 my 映射`javadoc`到 Maven's`javadoc`和 my映射`sources`到 Maven's `sources`。当我映射`conf="sources->default"`时，它将我映射`sources`到 Maven `default`，这是编译依赖项。

我可以在一行中指定所有配置，并且不需要单独的`<artifact>`实体。

# performance - facing performance issues with knockout mapping plugin

> ID：12304977
> 
> 赞同：2
> 
> 时间：2012-09-06T17:02:58.310
> 
> 标签：performance, knockout.js, knockout-mapping-plugin

I have decent large data set of around 1100 records. This data set is mapped to an observable array which is then bound to a view. Since these records are updated frequently, the observable array is updated every time using the ko.mapping.fromJS helper.

This particular command takes around 40s to process all the rows. The user interface just locks for that period of time.

Here is the code -

```
var transactionList = ko.mapping.fromJS([]);

//Getting the latest transactions which are around 1100 in number;
var data = storage.transactions();

//Mapping the data to the observable array, which takes around 40s
ko.mapping.fromJS(data,transactionList) 
```

Is there a workaround for this? Or should I just opt of web workers to improve performances?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T22:28:18.997

[Knockout.viewmodel](http://coderenaissance.github.com/knockout.viewmodel/)是 knockout.mapping 的替代品，它在为像这样的大型对象数组创建视图模型时要快得多。您应该注意到性能显着提高。

[http://coderenaissance.github.com/knockout.viewmodel/](http://coderenaissance.github.com/knockout.viewmodel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T10:40:58.790

映射不是魔术。在大多数情况下，这个简单的递归函数就足够了：

```
function MyMapJS(a_what, a_path)
{
    a_path = a_path || [];

    if (a_what != null && a_what.constructor == Object)
    {
        var result = {};
        for (var key in a_what)
           result[key] = MyMapJS(a_what[key], a_path.concat(key));
        return result;
    }

    if (a_what != null && a_what.constructor == Array)
    {
        var result = ko.observableArray();
        for (var index in a_what)
           result.push(MyMapJS(a_what[index], a_path.concat(index)));
        return result;
    }

    // Write your condition here:
    switch (a_path[a_path.length-1])
    {
        case 'mapThisProperty':
        case 'andAlsoThisOne':
            result = ko.observable(a_what);
            break;
        default:
            result = a_what;
            break;
    }
    return result;
} 
```

上面的代码从对象层次结构的任何级别的**mapThisProperty**和**andAlsoThisOne属性中生成 observable；**其他属性保持不变。**您可以使用a_path.length**来表示值所在的级别（深度），或者使用**a_path**的更多元素来表达更复杂的条件。例如：

```
if (a_path.length >= 2 
  && a_path[a_path.length-1] == 'mapThisProperty' 
  && a_path[a_path.length-2] == 'insideThisProperty')
    result = ko.observable(a_what); 
```

您可以在条件中使用**typeOf a_what**，例如使所有字符串可观察。您可以忽略某些属性，并在某些级别插入新属性。或者，您甚至可以省略**a_path**。等等。

优点是：

*   可定制（比*knockout.mapping*更容易）。
*   足够短，可以复制粘贴它并在需要时为不同的对象编写单独的映射。
*   较小的代码，*knockout.mapping-latest.js*不包含在您的页面中。
*   应该更快，因为它只做绝对必要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T09:14:40.883

我对映射插件有同样的问题。Knockout 团队表示，映射插件不适用于大型阵列。如果您必须将如此大的数据加载到页面，那么您的系统设计可能不正确。

解决此问题的最佳方法是使用服务器分页，而不是在页面加载时加载所有数据。如果您不想更改应用程序的设计，有一些解决方法可能对您有所帮助：

1.  手动映射您的数组：

    ```
    var data = storage.transactions();
    var mappedData = ko.utils.arrayMap(data , function(item){
        return ko.mapping.fromJS(item);
    });

    var transactionList = ko.observableArray(mappedData); 
    ```

2.  异步映射数组。我编写了一个函数，在另一个线程中按部分处理数组并向用户报告进度：

    ```
    function processArrayAsync(array, itemFunc, afterStepFunc, finishFunc) {
        var itemsPerStep = 20;

        var processor = new function () {
            var self = this;
            self.array = array;
            self.processedCount = 0;
            self.itemFunc = itemFunc;
            self.afterStepFunc = afterStepFunc;
            self.finishFunc = finishFunc;
            self.step = function () {
                var tillCount = Math.min(self.processedCount + itemsPerStep, self.array.length);
                for (; self.processedCount < tillCount; self.processedCount++) {
                    self.itemFunc(self.array[self.processedCount], self.processedCount);
                }

                self.afterStepFunc(self.processedCount);
                if (self.processedCount < self.array.length - 1)
                    setTimeout(self.step, 1);
                else
                    self.finishFunc();
            };
        };

        processor.step();
    }; 
    ```

你的代码：

```
var data = storage.transactions();
var transactionList = ko.observableArray([]);

processArrayAsync(data,
    function (item) { // Step function
        var transaction = ko.mapping.fromJS(item);
        transactionList().push(transaction);
    },
    function (processedCount) { 
        var percent = Math.ceil(processedCount * 100 / data.length);
        // Show progress to the user.
        ShowMessage(percent);
    },
    function () { // Final function
        // This function will fire when all data are mapped. Do some work (i.e. Apply bindings).
    }); 
```

您也可以尝试替代映射库：[knockout.wrap](https://github.com/arj03/knockout.wrap)。它应该比映射插件更快。

我选择了第二个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T09:56:29.740

我还想到了一种解决方法，如下所示，这使用更少的代码-

```
var transactionList = ko.mapping.fromJS([]);

//Getting the latest transactions which are around 1100 in number;
var data = storage.transactions();

//Mapping the data to the observable array, which takes around 40s
// Instead of - ko.mapping.fromJS(data,transactionList)
var i = 0;

//clear the list completely first
transactionList.destroyAll();

//Set an interval of 0 and keep pushing the content to the list one by one.
var interval = setInterval(function () {if (i == data.length - 1 ) {
                                        clearInterval(interval);}

                                    transactionList.push(ko.mapping.fromJS(data[i++]));
                                }, 0); 
```

# wpf - WPF Performance Suite - strange app behaviour

> ID：12304981
> 
> 赞同：2
> 
> 时间：2012-09-06T17:03:07.797
> 
> 标签：wpf, kinect

I am working on a project including WPF and OpenNI library with sensor usage. My application is very simple, I am getting hand points from sensor device and drawing two rectangles using data binding. When I'm launching my app, rectangles are drawn with very big lag, but strange thing is, when I start WPF Performance Suit, lag suddenly stops and application is working perfectly.

My question is, what WPF Performance Suit is doing to running application and how I can recreate the same behavior in code without using this program?

Thanks for any help.

# c# - Using polymorphism for collision detection in an elegant way

> ID：12304984
> 
> 赞同：6
> 
> 时间：2012-09-06T17:03:24.463
> 
> 标签：c#, .net, polymorphism, collision-detection

I am trying to set up some simple 2D shapes which can be dragged about the window using the mouse. I want the shapes to register a collision when I drag one into another. I have an interface.

```
interface ICollidable
{
    bool CollidedWith(Shape other);
} 
```

I then have an abstract class Shape that implements the above interface.

```
abstract class Shape : ICollidable
{
    protected bool IsPicked { private set; get; }
    protected Form1 Form { private set; get; }

    protected int X { set; get; } // Usually top left X, Y corner point
    protected int Y { set; get; } // Used for drawing using the Graphics object

    protected int CenterX { set; get; } // The center X point of the shape
    protected int CenterY { set; get; } // The center X point of the shape

    public Shape(Form1 f, int x, int y)
    {
        Form = f;
        X = x; Y = y;
        Form.MouseDown += new MouseEventHandler(form_MouseDown);
        Form.MouseMove += new MouseEventHandler(Form_MouseMove);
        Form.MouseUp += new MouseEventHandler(Form_MouseUp);
    }

    void Form_MouseMove(object sender, MouseEventArgs e)
    {
        if(IsPicked)
            Update(e.Location);
    }

    void Form_MouseUp(object sender, MouseEventArgs e)
    {
        IsPicked = false;
    }

    void form_MouseDown(object sender, MouseEventArgs e)
    {
        if (MouseInside(e.Location))
            IsPicked = true;
    }

    protected abstract bool MouseInside(Point point);
    protected abstract void Update(Point point);
    public abstract void Draw(Graphics g);
    public abstract bool CollidedWith(Shape other);
} 
```

I then have ten concrete classes Circle, Square, Rectangle etc that extend the Shape class and implement the abstract methods. What I would like to do is come up with some oop clean and elegant way to do the collosion detection instead having a large block of if statements in the CollidedWith method such is

```
public bool CollidedWith(Shape other)
{
    if(other is Square)
    {
        // Code to detect shape against a square
    }
    else if(other is Triangle)
    {
        // Code to detect shape against a triangle
    }
    else if(other is Circle)
    {
        // Code to detect shape against a circle
    }
    ...   // Lots more if statements
} 
```

Has anyone any ideas. It's a problem I've thought about before but am only putting into practice now.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:09:37.137

碰撞检测是否如此“特定于形状”，以至于每个排列都有不同的实现

```
Circle vs. Other Circle
Circle vs. Other Square
Circle vs. Other Triangle
Square vs. Other Circle
... 
```

听起来你正在尝试创建一个包含所有可能性的矩阵，但如果你想出 10 个新形状，总共 20 个，你就有 400 个可能性。

相反，我会尝试`Shape.Overlaps(Shape other)`在您的抽象类中提出一个通用方法来满足所有这些要求。

如果这只是 2D 几何，那么判断任何形状的边缘路径是否相交应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:15:52.990

在这种情况下，通常使用[双重调度。](http://en.wikipedia.org/wiki/Double_dispatch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T17:06:43.713

而不是特定的形状，它们都是[Paths](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.graphicspath.aspx)或[Regions](http://msdn.microsoft.com/en-us/library/system.drawing.region.aspx)。

正方形只是一个有 4 个点的多边形，它们恰好成直角。然后只需编写一种`Path.CollidesWith(Path)`方法并继续前进。

查看一些[相关](https://stackoverflow.com/questions/503376/intersecting-graphicspath-objects) [问题](https://stackoverflow.com/questions/3615326/how-can-i-tell-if-two-polygons-intersect)。

# objective-c - 未调用 uitextview 方法的设置占位符

> ID：12304987
> 
> 赞同：0
> 
> 时间：2012-09-06T17:03:46.277
> 
> 标签：objective-c, cocoa-touch, uitextview, placeholder

我看到了如何为 UITextView 创建占位符的[答案。](https://stackoverflow.com/questions/7038876/iphonehow-to-insert-placeholder-in-uitextview)

我采取了以下步骤：

1.  将声明添加到 .h 类中：

    ```
    @interface AdjustPhotoViewController : UIViewController<UITextViewDelegate> 
    ```

2.  添加方法：

    ```
    - (BOOL) textViewShouldBeginEditing:(UITextView *)textView
    {
        NSLog(@"%d",[textView tag]);
        if ([textView tag]==1){
            campaignTitle.text = @"";
        }else{
            campaignDescription.text = @"";
        }

        return YES;
    } 
    ```

但我没有看到正在调用该方法！

我错过了什么？

textView 已经通过情节提要委托给视图

**解决了：**

问题是它没有被授权。虽然我使用的是故事板——它只是一个出口，而不是一个代表。请记住，如果您使用故事板，您还需要从文本视图委托给视图的橙色按钮！不仅相反

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:05:44.843

> 我错过了什么？

实际设置委托。

```
textView.delegate = self; 
```

仅仅遵守协议不会神奇地使您的对象成为任意对象的委托；这只是一件正式的事情，无论如何，UITextField 究竟如何知道它必须分配其委托的类的哪个特定实例？

# ckeditor - 在 ExpressionEngine 2 中使用 Wygwam 在 CKeditor3 上安装 Imagemap

> ID：12304995
> 
> 赞同：0
> 
> 时间：2012-09-06T17:04:28.560
> 
> 标签：ckeditor, expressionengine, imagemap

我正在尝试将 Image map 安装到 ExpressionEngine 2.5.2 中的 Wygwam 2.6.3 上。

按照以下说明（两次以确保）。但是，Imagemap 图标显示在完整配置中，但是当我单击图像然后单击 imagemap 图标时，它没有做任何事情。但是当没有选择任何内容并且我按下 Imagemap 图标时，它会显示“请选择图像”。

> 将 imagemap 插件文件夹放到 /themes/third_party/wygwam/lib/ckeditor/plugins/ 文件夹中。
> 
> 打开/themes/third_party/wygwam/lib/ckeditor/skins/wygwam2/editor.css
> 
> 在文件末尾添加：
> 
> .cke_skin_wygwam2 .cke_button_imagemap .cke_icon{background:url(../../plugins/imagemap/imagemap.gif);}
> 
> 在 /system/expressionengine/third_party/wygwam/helper.php 第 76 行：在数组中的“Image”之后添加“ImageMap”。第 149 行：将 'ImageMap' => 'Image Map' 添加到数组中。第 226 行：在数组中的“Image”之后添加“ImageMap”。
> 
> 清除浏览器的缓存。
> 
> 从 EE 内部，转到 Add-Ons->Modules->Wygwam->Editor Configuration->Full
> 
> 在工具栏中，图像地图图标应该是灰色的。单击它以启用它。
> 
> 在同一页面的高级设置下，选择“extraPlugins”并将“imagemap”设置为值（不带引号，区分大小写）。

单击图像映射图标时出现以下错误。

$.modal 不是函数

[Imagemap 插件](https://bitbucket.org/SimplyCast/imagemap-for-ckeditor/wiki/Home)是否兼容？任何指针？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:39:02.557

Ckeditor3 使用 jquery simplemodal。

SimpleModal 必须由 imagemap 插件加载。我添加了

CKEDITOR.scriptLoader.load(CKEDITOR.getUrl('../plugins/imagemap/jquery.simplemodal.1.4.2.min.js'));

到 plugin.js 以在加载 imagemap 插件时加载它。