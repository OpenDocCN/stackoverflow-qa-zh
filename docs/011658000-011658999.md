# StackOverflow 问答 11658000-11658999

# backbone.js - 如何抑制 # hrefs 的点击事件？

> ID：11658002
> 
> 赞同：0
> 
> 时间：2012-07-25T20:22:24.453
> 
> 标签：backbone.js, backbone-views, backbone-routing

当链接href是哈希（＃）时，我想自动抑制点击事件。我不想在每个视图中使用 e.preventDefault() 来停止事件。

如何停止# hrefs 的点击事件应用程序范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:36:53.723

有趣的问题。显然，骨干路由在默认行为之前被触发。您需要做的是插入一个在主干路由和默认行为之间触发的事件处理程序，然后`e.preventDefault()`.

我相信事件处理程序的执行顺序取决于它们的定义顺序。所以稍微玩一下。您可以使用以下内容检查事件处理程序数组：（`$(window).data('events');`我假设您使用的是 jQuery？）

# python - 在 OS X Lion 10.7.4 上安装 PIL 有困难

> ID：11658003
> 
> 赞同：0
> 
> 时间：2012-07-25T20:22:30.207
> 
> 标签：python, python-imaging-library, pip

> **可能重复：**
> [使用 virtualenv 安装 PIL 或构建](https://stackoverflow.com/questions/2485295/the-problem-with-installing-pil-using-virtualenv-or-buildout)
> [如何在 mac os x 10.7.2 Lion 上安装 PIL的问题](https://stackoverflow.com/questions/9070074/how-to-install-pil-on-mac-os-x-10-7-2-lion)

我正在尝试在 Mac OS X Lion (10.7.4) 上安装最新版本的 PIL (1.1.7)。我通常只使用 PIP 和以下命令：

```
sudo pip install package_name 
```

但是，我收到 PIL 的错误消息，因为它拒绝与我合作。

这是我收到的：

```
 mac-cordreys-macbook-pro:~ maccordrey$ sudo pip install PIL
Password:
Downloading/unpacking PIL
  Downloading PIL-1.1.7.tar.gz (506Kb): 506Kb downloaded
  Running setup.py egg_info for package PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

Installing collected packages: PIL
  Running setup.py install for PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
    --- using frameworks at /System/Library/Frameworks
    building '_imaging' extension
    llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -IlibImaging -I/System/Library/Frameworks/Python.framework/Versions/2.7/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.7-intel-2.7/_imaging.o
    unable to execute llvm-gcc-4.2: No such file or directory
    error: command 'llvm-gcc-4.2' failed with exit status 1
    Complete output from command /usr/bin/python -c "import setuptools;__file__='/Users/maccordrey/build/PIL/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-KmYgGQ-record/install-record.txt:
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

running install

running build

running build_py

creating build

creating build/lib.macosx-10.7-intel-2.7

copying PIL/__init__.py -> build/lib.macosx-10.7-intel-2.7 
```

（为了节省空间，我已经编辑了这个中间部分，但这只是对包脚本的更多复制。）

```
copying PIL/XVThumbImagePlugin.py -> build/lib.macosx-10.7-intel-2.7

running build_ext

--- using frameworks at /System/Library/Frameworks

building '_imaging' extension

creating build/temp.macosx-10.7-intel-2.7

creating build/temp.macosx-10.7-intel-2.7/libImaging

llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -IlibImaging -I/System/Library/Frameworks/Python.framework/Versions/2.7/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.7-intel-2.7/_imaging.o

unable to execute llvm-gcc-4.2: No such file or directory

error: command 'llvm-gcc-4.2' failed with exit status 1

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/Users/maccordrey/build/PIL/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-KmYgGQ-record/install-record.txt failed with error code 1 in /Users/maccordrey/build/PIL
Storing complete log in /Users/maccordrey/Library/Logs/pip.log 
```

任何意见，将不胜感激！谢谢！

我还应该注意，在尝试安装 Pillow 作为替代方案时，我收到了完全相同的错误消息。

# jquery - 无法修改 iframe 的内容，怎么回事？

> ID：11658011
> 
> 赞同：13
> 
> 时间：2012-07-25T20:23:00.883
> 
> 标签：jquery, html

我正在尝试修改 iframe 的内容，但它不起作用。

这是我的 main.html

```
<html>
<head><title>Main page</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>

<h3>Main page</h3>
<iframe src="ifr.htm" id="ifr" name="ifr"></iframe>
</body>

<script>
$(document).ready(function(){
    $('#ifr').load(function(){
        $('#ifr').contents().find('body').html('Hey, i`ve changed content of <body>!    Yay!!!');
    });
});

</script>
</html> 
```

这是我的 ifr.htm

```
<html>
<head><title>Iframe page</title></head>
<body>
 Content to be displayed in iframe ...
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T20:59:44.140

请不要忘记`cross-domain`政策，否则将无法正常工作。

**现场演示：http:** [//jsfiddle.net/oscarj24/wTWjF/](http://jsfiddle.net/oscarj24/wTWjF/)

*（只是要知道，我没有使用404页面，看看）*

试试这个：

```
$(document).ready(function(){
    $('#ifr').ready(function(){
        $(this).contents().find('body').html('Hey, I have changed the body content yay!');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:34:47.213

假设您遵守跨域政策，这听起来像是一个时间问题。`document.ready`当父页面触发 时，您的 iframe 可能已经完成加载。

如果在 ready 事件已经触发后绑定，您可以尝试更改您的`frame.load`to `frame.ready`as将立即触发。`.ready`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:14:13.830

你会做这样的事情：

您将您的`src`属性设置`iFrame`为空白页（blank.htm）或“”，然后在准备好的处理程序中将 src 更改为**ifr.htm**。

```
$(document).ready(
    $('#ifr').load(function(){
        $(this).contents().find('body').html('Hey, i`ve changed content of <body>!    Yay!!!');
    });
    $('#ifr').attr("src", "ifr.htm");
}); 
```

# c++ - 像静态方法一样调用实例方法

> ID：11658013
> 
> 赞同：0
> 
> 时间：2012-07-25T20:23:23.970
> 
> 标签：c++

为什么 B::Func 可以使用使其看起来像静态方法调用的语法来调用 A::Func？这不应该因为它是一个实例方法而失败吗？

```
class A {
public:
    void Func() { 
        printf( "test" );
    }
};

class B : private A {
public:
    void Func() {
        A::Func();  // why does it work? (look below in main())
    }
};

int main() {
    B obj;

    obj.Func();
    // but we cannot write here, because it's not static
    // A::Func();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T20:25:44.890

那不是“像静态一样”。这只是用于显式指定调用哪个成员函数的语法。即使`Func`是虚拟的，该语法也可用于调用基类版本。

```
class B : public A {
public:
    void Func() {
        this->A::Func(); /* this-> can be omitted */
    }
};

int main() {
    B obj;
    obj.A::Func();
    return 0;
} 
```

编辑：`obj.A::Func()`在你的情况下实际上是无效的，因为继承是私有的，所以`main`看不到它`A`是`B`. 我已将`B`' 继承更改为 public 以使答案正确，但在函数中时，它仍然可以在类之外工作`friend`。

# perl - 如何使用 Perl 将文件上传到 Office365 SharePoint？

> ID：11658024
> 
> 赞同：1
> 
> 时间：2012-07-25T20:24:30.387
> 
> 标签：perl, sharepoint, office365, webdav

有人可以建议将文件上传到 Office365 SharePoint 吗？

我相信这应该使用 DAV 协议来完成，所以[HTTP::DAV](http://search.cpan.org/perldoc/HTTP%3a%3aDAV)应该是正确的库，但是如何对其进行编码以使其与**Office365**一起使用？每个使用 Office365 托管的帐户都有一个 TeamSite 网站，希望可以通过 DAV 访问。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:47:16.473

[使用 WebClient 类将大型文档上传到 SharePoint 站点](http://msmvps.com/blogs/sundar_narasiman/archive/2011/11/30/upload-large-documents-to-sharepoint-site-using-webclient-class.aspx)给出了使用 DAV 上传文档的示例。

```
WebClient oWebClient = new WebClient();

oWebClient.UseDefaultCredentials = true;
byte[] bFile = System.IO.File.ReadAllBytes(@"C:\Sundar\WEB315.wmv");

string ulr = @"http://lt010593/Shared Documents/WEB315.wmv";
System.Uri oUri = new System.Uri(ulr);

oWebClient.UploadDataAsync(oUri, "PUT", bFile);
oWebClient.UploadDataCompleted += new UploadDataCompletedEventHandler(oWebClient_UploadDataCompleted); 
```

考虑到该示例，任务是查看[WebClient 文档](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)以找出[`oWebClient.UseDefaultCredentials = true;`](http://msdn.microsoft.com/en-us/library/system.net.webclient.usedefaultcredentials#Y29)真正的作用。

> 当此 WebClient 对象发出的请求（如果服务器请求）应使用当前登录用户的默认凭据进行身份验证时，将此属性设置为 true。对于客户端应用程序，这是大多数情况下所需的行为。对于中间层应用程序（例如 ASP.NET 应用程序），通常不使用此属性，而是将 Credentials 属性设置为代表其发出请求的客户端的凭据。

因此，任务似乎是弄清楚发送了哪些凭证信息。其余的似乎是一个简单的`PUT`请求。

# playframework - 错误 310：暂存失败：“暂存任务失败：- CloudFoundry

> ID：11658029
> 
> 赞同：0
> 
> 时间：2012-07-25T20:25:06.320
> 
> 标签：playframework, cloud-foundry

尝试暂存 Play Framework java 示例时出现错误 310。任何帮助将不胜感激：

此处的完整错误输出：

[https://t.co/F0Zh2bY4](https://t.co/F0Zh2bY4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T18:48:09.107

Cloud Foundry 要求将 Play 应用程序推送为使用以下`play dist`命令构建的 zip 文件：http: [//blog.cloudfoundry.com/2012/05/31/cloud-foundry-now-supports-play/](http://blog.cloudfoundry.com/2012/05/31/cloud-foundry-now-supports-play/)

我能够通过以下方式在 Mac OS X 上推送您的应用程序：

```
~/Downloads/SecureSocial $ sbt play clean dist
~/Downloads/SecureSocial $ vmc push --path modules/securesocial/dist/securesocial-AuthDemo.zip 
```

# glsl - 在 int gl_VertexID 中导致三个.js 错误

> ID：11658031
> 
> 赞同：2
> 
> 时间：2012-07-25T20:25:10.380
> 
> 标签：glsl, webgl, three.js

我一直在使用内置顶点索引的 gl_VertexID 遇到问题，使用 传递`in`给 Three.js

我不确定为什么，因为文档说它适用于所有版本的 OpenGL

[http://www.opengl.org/sdk/docs/manglsl/xhtml/gl_VertexID.xml](http://www.opengl.org/sdk/docs/manglsl/xhtml/gl_VertexID.xml)

我正在使用这个顶点着色器：

```
 uniform int freqData[64];
        uniform int fftSize;

        in int gl_VertexID;

        void main() {
            vec3 norm = normalize(position);

            int modFFT = mod(gl_VertexID, fftSize);

            vec3 newPosition = norm * float(freqData[modFFT]);

            gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
        } 
```

我收到的错误是：

`ERROR: 0:68: 'in' : syntax error`

声明似乎有问题`in`，并且没有抱怨其他任何事情（错误控制台能够检测到多个编译错误）。

非常感谢您的帮助，我正在使用昨天的 Three.js 构建。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T22:34:22.467

据我所知，在 WebGL 中您无法访问内置的顶点索引。

但是，您应该能够通过提供自己的自定义属性流来模拟这一点，并将其设置为与此类内置索引流等效的值。

在three.js 中还没有实现整数自定义属性，因此您需要使用float 属性。

在此示例中检查“位移”属性：

[http://mrdoob.github.com/three.js/examples/webgl_custom_attributes.html](http://mrdoob.github.com/three.js/examples/webgl_custom_attributes.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T20:33:52.477

首先，不需要声明`gl_VertexID`；它要么存在（多亏了扩展，因为基于 OpenGL ES 2.0 构建的 WebGL 不提供此作为核心功能），要么不存在。

其次，基于OpenGL ES 2.0构建的WebGL，不使用`in`and`out`语法；这适用于*桌面*OpenGL 3.0 及更高版本。GLSL ES 使用较旧的`attribute`语法。因此，即使您需要声明`gl_VertexID`（同样，您不需要），您也需要将其称为 an `attribute`，而不是`in`.

# android - Facebook 共享链接在 IOS 本机应用程序中给出“您请求的页面未找到”

> ID：11658033
> 
> 赞同：2
> 
> 时间：2012-07-25T20:25:16.803
> 
> 标签：android, ios, facebook, facebook-apps

我有一个 Facebook 画布应用程序，可以在社区 Facebook 页面上创建墙贴。同时，该应用程序在用户墙上“分享”了一个指向新帖子的链接。

在所有浏览器中，单击共享链接会将您带到包含原始帖子的 FB 页面。

在本机 iOS FB 应用程序中，单击共享链接会出现“找不到您请求的页面”错误。

共享链接的形式为：http://www.facebook.com/[ParentPageID] _ [PostID]

Facebook 将链接转换为以下形式：http://www.facebook.com/permalink.php?story_fbid=[PostID]&id=[ParentPageID]

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:52:27.323

仅当您`HASH KEY`从应用程序生成的与您在应用程序中输入的实际不匹配时才会发生这种情况`Facebook App Developer Page`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:18:04.570

完整答案：

为了解决这个问题，我在应用程序 (PostingRedirectHandler.aspx) 中创建了一个页面，作为发布到用户墙的所有“共享”链接的焦点。例子：

[https://fb.shoutoutforhope.org/PostingRedirectHandler.aspx?postID=370911822944882_152681898208096](https://fb.shoutoutforhope.org/PostingRedirectHandler.aspx?postID=370911822944882_152681898208096)

此重定向（到目前为止）适用于所有经过测试的平台/浏览器组合。

这是来自重定向的代码：

```
string qString = Request.QueryString["postid"];
string[] fbPostData = qString.Split('_');
redirectLocation = "http://www.facebook.com/permalink.php?story_fbid=" + fbPostData[1].ToString() + "&id=" + fbPostData[0].ToString(); 
```

# node.js - 无法使用 Express.js 更改网站图标

> ID：11658035
> 
> 赞同：57
> 
> 时间：2012-07-25T20:25:27.023
> 
> 标签：node.js, express, favicon

这是一个非常基本的问题，但我正在尝试更改我的 node.js/Express 应用程序的图标

```
app.use(express.favicon(__dirname + '/public/images/favicon.ico')); 
```

而且我仍然得到默认的图标。这是在我的`app.configure`函数中，是的，我已经验证了 a 中有一个**。** 控制台中也没有关于 a 的任何内容，这让我相信这行代码被忽略了。函数中的其他所有内容（设置端口、设置视图目录、设置模板引擎等）似乎都工作正常，那么为什么这行代码不会执行呢？`favicon.ico``/public/images/favicon.ico``favicon.ico`

**我试过的**

*   清空浏览器缓存
*   重新启动终端并`node app.js`再次运行
*   添加`{ maxAge: 2592000000 }`，如此[处所述](https://groups.google.com/forum/?fromgroups#!topic/express-js/W5mkAorVrW8)

提前致谢。

**更新：**我让它工作。有关更多信息，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-25T21:48:20.243

我第一次尝试在 Safari 中访问该站点（我通常使用 Chrome）并注意到它显示了正确的图标。我尝试再次（两次）清除 Chrome 中的缓存但无济于事，但经过更多搜索后，我发现[显然 favicon 没有存储在缓存中](http://code.google.com/p/chromium/issues/detail?id=85806)。[我使用此处](http://www.phpjunkyard.com/tutorials/force-favicon-refresh.php)描述的方法“刷新了我的网站图标”并且它有效！

这是方法（从上面的链接修改），以防链接失效：

1.  打开 Chrome/有问题的浏览器
2.  直接导航到 favicon.ico 文件，例如[http://localhost:3000/favicon.ico](http://localhost:3000/favicon.ico)
3.  按 F5 或相应的浏览器刷新（重新加载）按钮刷新 favicon.ico URL
4.  关闭浏览器并打开您的网站 - 瞧，您的网站图标已更新！

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-06T06:24:39.647

最后对我有用的是：

看那个

```
app.use(express.favicon(__dirname + '/public/images/favicon.ico')); 
```

**是在app配置功能的开头**。最后我之前有过。正如 Express 文档所说：“使用“定义”中间件的顺序`app.use()`非常重要，它们是按顺序调用的，因此这定义了中间件的优先级。

我不需要设置任何 maxAge。

要测试它：

*   重启服务器`node app.js`
*   清除浏览器缓存
*   通过使用“localhost:3000/your_path_to_the favicon/favicon.ico”直接访问它并重新加载来刷新 Favicon

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-10-20T12:51:00.463

**上面的答案不再有效**。

如果你使用

```
app.use(express.favicon(__dirname + '/public/images/favicon.ico')); 
```

你会得到这个错误：

```
Error: Most middleware (like favicon) is no longer bundled with Express and must be installed separately 
```

您需要做的是获取[serve-favicon](https://github.com/expressjs/serve-favicon)。

跑

```
npm install serve-favicon --save 
```

然后将其添加到您的应用中

```
var express = require('express');
var favicon = require('serve-favicon');
var app = express();

app.use(favicon(__dirname + '/public/images/favicon.ico')); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-18T00:59:29.783

对我有用的方法如下。设置 express 以像往常一样为您的静态资源提供服务，例如

```
app.use(express.static('public')); 
```

将网站图标放在您的公共文件夹中；然后将查询字符串添加到您的图标 url，例如

```
<link rel="icon" type="image/x-icon" href="favicon.ico?v="+ Math.trunc(Math.random()*999)> 
```

在这种情况下，Chrome 是行为不端的浏览器；IE。火狐。Safari（全部在 Windows 上）运行良好，没有上述技巧。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-13T20:39:50.493

Simplest way I could come up with (valid only for local dev, of course) was to host the server on a different port

`PORT=3001 npm run start`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T20:42:21.907

您是否尝试过清除浏览器的缓存？也许旧的 favicon 仍在缓存中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-05T22:12:27.767

笑脸图标以防止错误：

```
 var favicon = new Buffer('AAABAAEAEBAQAAAAAAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA/4QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREQAAAAAAEAAAEAAAAAEAAAABAAAAEAAAAAAQAAAQAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAA//8AAP//AAD8HwAA++8AAPf3AADv+wAA7/sAAP//AAD//wAA+98AAP//AAD//wAA//8AAP//AAD//wAA', 'base64'); 
 app.get("/favicon.ico", function(req, res) {
  res.statusCode = 200;
  res.setHeader('Content-Length', favicon.length);
  res.setHeader('Content-Type', 'image/x-icon');
  res.setHeader("Cache-Control", "public, max-age=2592000");                // expiers after a month
  res.setHeader("Expires", new Date(Date.now() + 2592000000).toUTCString());
  res.end(favicon);
 }); 
```

**更改上面代码中的图标**

可以在这里制作一个图标：http: [//www.favicon.cc/](http://www.favicon.cc/)或在这里： http: [//favicon-generator.org](http://favicon-generator.org)

将其转换为 base64 可能在这里：[http ://base64converter.com/](http://base64converter.com/)

然后替换图标 base 64 值

**一般信息 如何创建个性化的收藏图标**

图标是使用 Photoshop 或 inkscape 制作的，可能是 inkscape，然后是 photoshop 以进行鲜艳度和色彩校正（在图像->调整菜单中）。

快速图标转到[http://www.clker.com/](http://www.clker.com/)并选择一些矢量剪贴画，然后下载为 svg。然后将其带到inkscape并更改颜色或删除部分，也许从另一个矢量剪贴画图像中添加一些东西，然后导出选择要导出的部分并单击文件>导出，选择大小如16x16为favicon或32x32，进一步编辑128x128或256x256 . ico 包内部可以有多种图标大小。它可以与 16x16 像素的收藏图标一起为网站链接提供高质量的图标。

然后也许可以增强 Photoshop 中的图像。像 vibrance bivel 圆形面具，任何东西。

然后将此图像上传到生成网站图标的网站之一。还有用于编辑图标的 windows 程序（搜索“windows icon editor opensource”，了解我们如何在单个图标中创建两个不同大小的图像）。

将网站图标添加到网站。只需将 favicon.ico 作为文件放在您的根域文件文件夹中即可。例如，在包含静态文件的公用文件夹中的 nodejs 中。它不必像上面的代码那样特殊，只是一个简单的文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-16T15:36:00.337

如何在没有快递的情况下做到这一点：

```
if (req.method == "GET") {
     if (/favicon\.ico/.test(req.url)) {
        fs.readFile("home/usr/path/favicon.ico", function(err, data) {
            if (err) {
                console.log(err);
            } else {
                res.setHeader("Content-Type","image/x-icon");
                res.end(data);
            }
     });
} 
```

# c# - asp.Net中日期时间的默认时区

> ID：11658039
> 
> 赞同：1
> 
> 时间：2012-07-25T20:25:43.380
> 
> 标签：c#, asp.net

如果没有指定时区，什么决定了 DateTime 实例的默认时区。示例：居住在时区 A 的用户访问托管在时区 B 中的服务器上的网页：如果网站代码在 dateTime 实例上调用 ToUniversalTime()，将使用时区 A 或时区 B 作为计算的基础吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:27:37.527

所有`DateTime`操作都在服务器的本地时区或 UTC 中进行。

ASP.Net 完全不知道用户的时区。

# php - 如何使javascript总加载到隐藏的输入框中？

> ID：11658040
> 
> 赞同：0
> 
> 时间：2012-07-25T20:25:42.257
> 
> 标签：php, javascript, text, input

如何使 javascript 加载到隐藏的输入框中？

我有`<span id="number"></span>`从java中提取的给我总数...

我想使用类似的东西 -

`<input type="hidden" name="number" id="number" />`

我的 javascript 代码 - 使数字出现 -

```
 document.getElementById("number").innerHTML=xmlhttp.responseText; 
```

我对php有点了解，但是javascript我很弱，我忘记了很多...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:36:41.463

```
 document.getElementById("number").value = xmlhttp.responseText; 
```

# objective-c - 在标准 NSWindow 上创建自定义标题栏

> ID：11658044
> 
> 赞同：7
> 
> 时间：2012-07-25T20:25:55.823
> 
> 标签：objective-c, cocoa, nstableview, nswindow, nsscrollview

我一直在尝试为我的菜单栏应用程序构建一个特定的外观。

![在此处输入图像描述](../Images/5b194557cb8f7dd0d2629ede3c02674e.png)

我一直在使用`NSWindow`带有`NSBorderlessWindowMask`样式蒙版和设置的 a`[window setOpaque:NO]`和`[window setBackgroundColor:[NSColor clearColor]]`. 这给了我一个空白画布，非常适合标题栏。

现在我在`NSTableView`用于列表的基于视图的问题上遇到了问题。如何将`NSTableCellView`s 剪辑到窗口的圆角？

我开始只是有一个自定义视图包裹`NSTableView`，用圆角绘制背景。虽然使用`[view addClip:path]`不会剪辑子视图。

我也试过用`[view setWantsLayer:YES]`带面具的。这很好用，但表格视图单元格会偶尔出现故障。似乎拥有`NSScrollView`一个层的子层是一个已知问题：

![http://i.stack.imgur.com/JmhjD.png](../Images/3f39775f46475ed96ad6afa790aba4a5.png)

我当前的视图结构看起来像：

```
NSWindow
- MyTitleBarView
- MyBackgroundView
  - NSScrollView
    - NSTableView 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:16:01.513

我找到了一种方法：

诀窍是将窗口样式保持为默认值而不是设置`NSBorderlessWindowMask`。然后，您可以将自定义标题栏视图添加到窗口的主题框架，如下所示：

```
NSView *themeFrame = [[window contentView] superview];
NSView *firstSubview = [[themeFrame subviews] objectAtIndex:0];
[titleBarView setAutoresizingMask:(NSViewMinYMargin | NSViewWidthSizable)];
[themeFrame addSubview:titleBarView positioned:NSWindowBelow relativeTo:firstSubview]; 
```

这基本上只是将您的自定义标题栏视图放在标准标题栏的顶部。您可能需要对视图框架和窗口按钮进行一些重新调整。有关这方面的一些代码示例，请参阅[INAppStoreWindow](https://github.com/indragiek/INAppStoreWindow)。

INAppStoreWindow 项目表示此方法不使用任何私有 API，因此可以在 App Store 上使用。

如果您要求窗口是透明的，您可以在窗口上设置以下内容：

```
[window setOpaque:NO];
[window setBackgroundColor:[NSColor colorWithCalibratedWhite:1.0 alpha:0.5]]; 
```

# jsf - 部署后在 glassfish 上获取 HTTP 状态 503

> ID：11658045
> 
> 赞同：0
> 
> 时间：2012-07-25T20:25:58.287
> 
> 标签：jsf, deployment, glassfish

这是scanario ...我有一个glassfish服务器在EC2上运行我的应用程序，我在glassfish上为我的一个域（比如说mydomain.com）配置了一个虚拟服务器，并且这个虚拟服务器有一个默认的Web模块（比如说“我的应用程序”）。

它就像一个魅力，当我访问 www.mydomain.com 时，我得到了我的应用程序的登录屏幕，因为它应该是......不需要访问 www.mydomain.com/myapp （/myapp 是默认的上下文路径我的应用程序）。

但事情是这样的；在我对我的 WAR 文件进行新部署后，我无法访问我的应用程序。如果我在浏览器上键入 www.mydomain.com 并按 ENTER，服务器会给我一个“HTTP 状态 503”但是，​​如果访问 www.mydomain.com/myapp y 可以看到我的登录页面。

在我执行“sudo service glassfish restart”后，这个问题就消失了，但正如您可能认为的那样，每次部署后重新启动应用程序服务器是一件痛苦的事情，顺便说一句，这不是我在这里运行的唯一应用程序，所以......重新启动 glassfish 只会关闭所有应用程序并激怒所有用户。

我正在从 Netbeans 进行部署，但从命令行（asadmin）部署时得到了相同的结果。

我试过谷歌，但我发现的笔记没有帮助。

这是 glassfish 配置问题吗？部署后我错过了一步吗？

作为参考，我正在使用：jsf 2.1、primefaces 3.2、jasper 报告 4.6（具有必需的依赖项）、mysql 连接器、glassfish 服务器 ose 3.1.2.2

我会很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:46:04.323

看起来我在黑暗中拍摄，但它就在这里。

在大多数情况下，HTTP 错误 503: Service Unavailable 表示 App Server / Tomcat Server 无法与 Web 服务器（通常是 Apache）进行良好的通信。

有趣的是，当您 sudo restart 时，它会起作用，这很好地表明了文件系统的权限。如果您已作为普通用户部署，但您已将服务器设置为 root，这可能就是问题所在。

是的，这是一个配置问题等等。尝试检查文件权限并将用户分配给每个进程并让他们玩得很好。

让我知道您是否可以分享一些错误/日志，这会很有帮助。

# xmpp - 用于客户服务聊天的 Openfire 与 ejabberd 演变为完整的聊天解决方案

> ID：11658052
> 
> 赞同：7
> 
> 时间：2012-07-25T20:26:24.333
> 
> 标签：xmpp, openfire, ejabberd

我需要将聊天设置为网站上的客户服务解决方案。Openfire 和它的一些插件（fastpath 和 webchat）在本地设置非常简单，并提供了我需要的所有客户服务体验选项，并将正确集成到我们的 CRM 中。

我们有一个集群的 ejabberd 实例正在运行其他东西。在我研究 openfire 之前，这是显而易见的选择，因为它已经变得安全并适合我们的环境。当使用 openfire 开箱即用时，必须在 ejabberd 模块中复制所有客户服务功能似乎是一种糟糕的资源投资。

最终，我们还希望能够实现用户对用户的聊天，并可能将其变成一个完整的消息传递系统。

是否可以和/或推荐使用 s2s 或其他技术在两个不同的服务器之间共享相同的数据库实例？有没有其他人有运行这两个服务器的经验？我敢肯定，如果我们走这条路，会有很多陷阱，有什么明显的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T15:57:26.793

就我而言，出于兼容性原因，我不得不转向 openfire。我在 sql-server 数据库中有一个用户列表，外部身份验证非常困难，并且不支持 ejabberd 的更新版本。对我来说，openfire 对不同的数据库更加开放，并且易于集成到现有平台中

# asp.net - 如何将模板添加到用户控件？

> ID：11658053
> 
> 赞同：22
> 
> 时间：2012-07-25T20:26:27.017
> 
> 标签：asp.net, user-controls, templating, webusercontrol

这个问题之前有人问过

*   [Web 表单 :: VS 2008 中自定义模板化用户控件的设计时支持](http://asp.net.bigresource.com/Web-Forms-Design-Time-Support-For-Custom-Templated-User-Control-in-VS-2008-CV9nSsXpF.html)
*   [VS 2008 在 UserControl 中使用 ITemplate 并获得设计时渲染错误](http://www.vbforums.com/showthread.php?t=580213)
*   [如何在设计时显示 Web 用户控件的控件？](https://stackoverflow.com/questions/10309086/how-to-show-the-controls-for-web-user-control-in-design-time)
*   [UserControl ITemplate 属性设计时间错误 - 对大师来说很容易......](http://forums.asp.net/t/1291600.aspx/1)

但再问一次也无妨：

> 如何`UserControl`在 ASP.net 中添加模板？

## 到目前为止没有什么效果

1.  从一个新的`UserControl`⁵开始，我称之为`Contoso`：

    ```
    public partial class Contoso: System.Web.UI.UserControl
    {
    } 
    ```

    这将允许我们使用新控件：¹

    ```
    <Contoso>
        Stuff in here
    <Contoso> 
    ```

2.  创建`ContentTemplate`类型的公共属性`ITemplate`：

    ```
    public partial class Contoso: System.Web.UI.UserControl
    {
       public ITemplate ContentTemplate { get; set; }
    } 
    ```

    并向属性添加不确定数量的属性`ContentTemplate`：²

    ```
    //[ParseChildren(true)]
    [ParseChildren(true, "ContentTemplate")]
    //[ParseChildren(false)]
    public partial class Contoso: System.Web.UI.UserControl
    {
       [TemplateContainer(typeof(ContentContainer))]
       [TemplateInstance(TemplateInstance.Single)]
       [PersistenceMode(PersistenceMode.InnerProperty)]   
       //[PersistenceMode(PersistenceMode.InnerDefaultProperty)] 
       [Browsable(true)]
       //[Browsable(false)]
       [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
       //[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
       public ITemplate ContentTemplate { get; set; }
    } 
    ```

    这将允许我们添加`<ContentTemplate>`到我们的 aspx 文件中的控件：¹

    ```
    <Contoso>
       <ContentTemplate>
           Stuff in here
       </ContentTemplate>
    </Contoso> 
    ```

3.  接下来我们需要通过在某处添加它来实际*使用*这些`ContentTemplate`东西。我们通过将它添加到我们的 UserControl 的内部`div`元素之一来做到这一点。

    从我们`.aspx`最初为空的文件开始：

    ```
    <%@ Control Language="C#" AutoEventWireup="true" CodeFile="Contoso.aspx.cs" Inherits="Contoso" %> 
    ```

    `div`我们添加一个将保存我们的`ContentTemplate`东西的父母：

    ```
    <%@ Control Language="C#" AutoEventWireup="true" CodeFile="Contoso.aspx.cs" Inherits="Contoso" %>
    <div id="ContentDiv" runat="server"></div> 
    ```

    然后我们在控件的**Init**`ContentTemplate`期间将这些东西填充到该父级中：`div`

     **```
    public partial class Contoso: System.Web.UI.UserControl
    {
       protected override void OnInit(EventArgs e)
       {
          base.OnInit(e);

          //If there's content, then put it into our ContentDiv div
          if (this.ContentTemplate != null)
             this.ContentTemplate.InstantiateIn(ContentDiv);
       }

       [PersistenceModeAttribute(PersistenceMode.InnerProperty)]    
       [TemplateInstanceAttribute(TemplateInstance.Single)]
       [Browsable(true)]
       [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
       public ITemplate ContentTemplate { get; set; }
    } 
    ```** 
***   **编辑**：表明您的类实现[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx)：

    ```
    public partial class Contoso: System.Web.UI.UserControl: INamingContainer
    {
       protected override void OnInit(EventArgs e)
       {
          base.OnInit(e);

          //If there's content, then put it into our ContentDiv div
          if (this.ContentTemplate != null)
             this.ContentTemplate.InstantiateIn(ContentDiv);
       }

       [PersistenceModeAttribute(PersistenceMode.InnerProperty)]    
       [TemplateInstanceAttribute(TemplateInstance.Single)]
       [Browsable(true)]
       [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
       public ITemplate ContentTemplate { get; set; }
    } 
    ```

    该[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx)接口没有任何成员，仅用于将您的`UserControl`类标记为某物。

    *   我们完成了³。我们现在可以在我们的 aspx 页面中使用这个控件。但首先我们需要在我们的 aspx 页面顶部**“注册”它：**

    ```
    <%@ Register src="Contoso.ascx" TagName="Contoso" tagprefix="uc" %> 
    ```

    在哪里：

    *   `Contoso.ascx`是`ascx`文件名
    *   `Contoso`是我们将用来引用此用户控件的元素的名称
    *   `uc`是我们必须放在前面的一些文本`uc:Contoso`（我`uc`用作*user-control*的缩写）*   将控件添加到我们的页面：

    ```
    <uc:Contoso ID="Crackers" runat="server">
        <ContentTemplate>
            Stuff goes here
        </ContentTemplate>
    </qwerty:Contoso> 
    ```** 

 **我们完成了！⁴

**编辑**：忘记添加上述不起作用的原因。Visual Studio 显示错误：

> 创建控件时出错 - Crackers
> 
> 类型“System.Web.UI.UserControl”没有名为“ContentTemplate”的公共属性

![在此处输入图像描述](../Images/d0b232e4ba27df1c9f7d6815c4712372.png)

这是有道理的，因为`UserControl`没有一个名为的公共财产`ContentTemplate`——所以我很难责怪它。

## 系列

这个问题是正在进行的 Stackoverflow 系列**“模板化用户控件”**中的一个：

*   [如何将模板添加到用户控件？](https://stackoverflow.com/questions/11658053/how-to-add-a-templating-to-a-usercontrol/11700540)
*   [如何从 Control 继承，而不是 UserControl？](https://stackoverflow.com/questions/12323303/how-to-inherit-from-control-rather-than-usercontrol)
*   [UserControl 有 IsPostBack，但 Control 没有](https://stackoverflow.com/questions/12321621/usercontrol-has-ispostback-but-control-does-not/12321692)
*   [UserControl 没有名为 ContentTemplate 的公共属性](https://stackoverflow.com/questions/11656637/usercontrol-does-not-have-public-property-named-contenttemplate)
*   [如何从 web.config 指定 CodeFileBaseClass？](https://stackoverflow.com/questions/12325192/how-do-i-specify-codefilebaseclass-from-web-config)

## 奖金阅读

*   [如何：创建模板化 ASP.NET 用户控件](http://msdn.microsoft.com/en-us/library/36574bf6.aspx)
*   [使用 ASP.Net 2.0 创建模板化用户控件](http://leedale.wordpress.com/2007/08/11/creating-a-templated-user-control-with-aspnet-20/)
*   [ASP.NET 中的模板化用户控件以获得更好的可维护性](http://geekswithblogs.net/CodeSpeaker/archive/2009/07/04/templated-user-controls-in-asp.net-for-better-maintainability.aspx)

## 脚注

*   ¹你永远不能使用那种语法。这只是一种易于阅读和理解的形式。
*   ²没有人知道要添加什么属性，或者为什么。添加或多或少的属性来品尝。
*   ³未完成。完成了 UserControl，但不是我们的工作。
*   ⁴未完成；它不起作用。
*   ⁵在网站中（不是 Web 应用程序，不是在单独的程序集中）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T11:17:59.090

好吧，我相信你几乎明白了。

顺便提一句。UserControl 不是使用 Visual Studio 设计器呈现的，但是当您运行应用程序时，该控件可以工作。如果您改用服务器控件，情况会有所不同，在这种情况下，控件会在 Visual Studio 设计器中正确显示

以下代码非常适合构建**模板化用户控件和模板化服务器控件**，但是，如果您想添加绑定功能，过程会略有不同，[请查看](http://msdn.microsoft.com/en-us/library/aa479322.aspx)

[下载源代码](http://sdrv.ms/N3hTFA)

## 这是创建模板的代码`UserControl`。

### 简单输出

![在此处输入图像描述](../Images/335dc20e9e09470dc639935f622a907c.png)

### 模板容器

```
public class MyTemplateContainer : Control, INamingContainer { } 
```

### ASPX 代码背后

```
protected void Page_Load(object sender, EventArgs e)
{
    // just to demonstrate using the contorl
    this.WebUserControl1.Controls.Add(new LiteralControl("<br />new control"));
} 
```

### ASPX

```
<%@ Register src="WebUserControl.ascx" tagname="WebUserControl" tagprefix="uc1" %>

    <uc1:WebUserControl ID="WebUserControl1" runat="server">
        <ContentTemplate>
            My Template<br />
            <asp:Label Text='Hello People' runat="server" ID="lblMessage" />
        </ContentTemplate>
    </uc1:WebUserControl> 
```

### 背后的 ASCX 代码

```
public partial class WebUserControl : System.Web.UI.UserControl
{
    [TemplateContainer(typeof(MyTemplateContainer))]
    [TemplateInstance(TemplateInstance.Single)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [Browsable(true)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public ITemplate ContentTemplate { get; set; }

    protected void Page_Init(object sender, EventArgs e)
    {
        this.myPlaceHolderTag.Controls.Clear();

        if (this.ContentTemplate != null)
        {
            var container = new MyTemplateContainer();

            this.ContentTemplate.InstantiateIn(container);
            this.myPlaceHolderTag.Controls.Add(container);
        }
        else
        {
            this.myPlaceHolderTag.Controls.Add(new LiteralControl("No template defined"));
        }
    }
} 
```

### 澳交所

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="WebUserControl.ascx.cs" Inherits="WebUserControl" %>

<asp:PlaceHolder runat="server" ID="myPlaceHolderTag" /> 
```

## 添加模板化服务器控件的代码

### 输出

![在此处输入图像描述](../Images/ebe5c745502a687532bc837331c4db61.png)

### ASPX

```
<%@ Register Namespace="MyControls" TagPrefix="my" %>

<my:MyServerControl runat="server" ID="myServerControl">
    <ContentTemplate>
        My Server templated control<br />
        <asp:Label Text="My Label" runat="server" />
    </ContentTemplate>
</my:MyServerControl> 
```

### 模板容器

```
namespace MyControls
{
    [ToolboxItem(false)]
    public class MyTemplateContainer : Control, INamingContainer { } 
} 
```

### 模板化服务器控制

```
namespace MyControls
{
    [ToolboxData("<{0}:MyServerControl runat=server >")]
    [ToolboxItem(true)]
    [ParseChildren(true)]
    // you can inherit from another control if you like, for example from the CompositeControl
    public class MyServerControl : Control, INamingContainer
    {
        [TemplateInstance(TemplateInstance.Multiple)]
        [TemplateContainer(typeof(MyTemplateContainer))]
        [PersistenceMode(PersistenceMode.InnerProperty)]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
        [DefaultValue(null)]
        public ITemplate ContentTemplate { get; set; }

        protected override void CreateChildControls()
        {
            var p = new Panel { ID = "myPanel", BackColor = Color.Silver, Width = new Unit("100%") };

            if (this.ContentTemplate == null)
            {
                p.Controls.Add(new LiteralControl("No content has been specified"));
            }
            else
            {
                var c = new MyTemplateContainer();

                this.ContentTemplate.InstantiateIn(c);
                p.Controls.Add(c);
            }

            this.Controls.Clear();
            this.Controls.Add(p);
        }

        public override void DataBind()
        {
            this.CreateChildControls();
            this.ChildControlsCreated = true;
            base.DataBind();
        }

        public override ControlCollection Controls
        {
            get
            {
                this.EnsureChildControls();
                return base.Controls;
            }
        }
    }
} 
```

参考：

*   [如何：创建模板化 ASP.NET 用户控件](http://msdn.microsoft.com/en-us/library/36574bf6.aspx)

*   [构建模板化的自定义 ASP.NET 服务器控件](http://msdn.microsoft.com/en-us/library/aa478964.aspx)

*   [构建 DataBound 模板化自定义 ASP.NET 服务器控件](http://msdn.microsoft.com/en-us/library/aa479322.aspx)**

# c# - 从 DataGrid 中自动删除新行

> ID：11658055
> 
> 赞同：1
> 
> 时间：2012-07-25T20:26:45.417
> 
> 标签：c#, wpf, xaml, mvvm, datagrid

当在 DataGrid 中添加新行时，无论是空数据还是错误数据，它都会保持添加。
如何测试是否导致异常以将其删除？

*   我正在使用 MVVM 和 PRISM
*   DataGrid 绑定到`ObservableCollection<Humain>`

    **EDIT**：这里是图片
    pic1 ：双击默认空行。
    pic2 : 通过点击其他任何地方取消数据插入。

![当双击空行开始添加新数据时](../Images/139722008afa9fd7247ac37accbbacb7.png) ![当通过单击其他地方取消编辑时](../Images/c33215e3ac165fe6032064ae90e9a926.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:28:36.033

好吧，由于您没有任何代码来向我们展示您的行是什么样子，或者您是如何编辑它们的，所以这个一般性答案是我能做的最好的：

*   订阅[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375%28v=vs.95%29)事件。新行将在 args 中。
*   检查每个属性是否存在您认为“空虚”的内容（假设您有字符串以外的内容）。如果您找到非空属性，请返回。否则，删除该行。

# java - 为覆盖其在 Eclipse 工作区中的所有调用的方法创建 JUnit 测试

> ID：11658056
> 
> 赞同：0
> 
> 时间：2012-07-25T20:26:51.483
> 
> 标签：java, junit, regression-testing

让我们假设以下 Java 类：

```
class MyClass {
   public String methodA( String data, String expression ) {
      // expression is evaluated using data
      // ...
      // this leads to a result which is returned
      return result;
   }
} 
```

请注意，这`expression`是表达式语言 (DSL) 的一个实例。因此，`expression`使用的评价`data`取决于两者的结合。通常，`expression`是一个固定值，不会经常`data`更改，并且可以在所有调用中更改。

好吧，后来发现了一个错误`MyClass.methodA(String,String)`。该错误存在于某些基础类中，并且仅在 和 的某些特殊组合中`expression`发生`data`。JUnit 测试很容易针对这种特殊情况编写并且可以修复。

不幸的是，这种方法在整个项目中经常使用。Eclipse 调用层次结构标识了超过 97 个使用此方法的其他方法。如果我只是应用错误修复，我现在害怕回归。为了感觉更安全，我想做一些回归测试。

通常，单元测试应该考虑所有重要的调用类型，尤其是边界情况。但是，由于`expression`DSL 变化很大，因此要测试覆盖所有潜在用途并不容易。此外，这些测试不会识别依赖于错误的错误使用。

所以我的想法是按照以下方式进行：

1.  查找此方法的所有调用（例如在 Eclipse 中使用“调用层次结构”）并提取`expression`.

2.  `data`为（例如从数据库）采样足够的真实值，并使用原始版本的`MyClass.methodA(String,String)`. 将三元组保存`(data, expression, result)`到文件中。

3.  实施错误修复。

4.  使用上述文件的测试方法`MyClass.methodA(String,String)`来断言结果没有改变。

**以下问题**：

您如何看待这种方法？

在 Eclipse 中使用调用层次结构我只能复制和粘贴调用方法，但不能复制和粘贴精确的调用，包括剪贴板的参数（参见步骤 1）。对于找到的每个方法，我都必须手动复制调用。如何以方便的方式提取调用（在完整的 Eclipse 工作区中，因此在多个项目中）？

恕我直言，我只测试一种方法，因此测试仅涵盖一个单元。可以在步骤 4 中使用 JUnit 还是有更复杂的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:10:20.567

由于测试您的软件的预期附加价值是以最低的成本和最大的结果覆盖大多数情况，我同意您的方法。

从您的软件中收集现实生活中的样本值并将它们保存到一个有代表性的文件中应该不会那么复杂，并且在我看来是分析这件事的最佳方式。即使您必须手动复制它。

# jquery - Web 应用程序作为移动设备的本机

> ID：11658057
> 
> 赞同：0
> 
> 时间：2012-07-25T20:26:56.710
> 
> 标签：jquery, jquery-mobile, cordova

我正在使用 jQuery Mobile 创建一个 Web 应用程序，并且我想将其转换为类似本机的应用程序。

我知道有一些像 PhoneGap 这样的工具可以从 html 和 js 文件创建本机应用程序。但我的应用程序不能在用户的手机上。**它有一些服务器端进程，结果由服务器生成。**我的意思是，用户也可以使用他们的网络浏览器（在手机、平板电脑、PC 等）打开应用程序

有没有办法使用 PhoneGap 将我的应用程序转换为原生应用程序？还是使用其他工具？

另一个问题是，有很多 javascript 文件，应该从客户端加载以提高速度。**（每次用户打开应用程序时**下载大量 javascript 文件并不是一个好主意！）

你在这里有什么想法？当应用程序位于服务器端时，如何在本地加载 javascript？一些缓存参数？或者 ...？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:31:49.110

我不确定你在找什么。
为什么你的应用不能在用户的手机上？您可以创建一个托管在您的服务器上的 Web 服务，并且电话应用程序可以与之对话。
您可以使用[PhoneGap Build](https://build.phonegap.com/)轻松地将您的 html/js/css 文件转换为原生手机 apk/应用程序文件（不确定它们在 iOS 上的名称）。

**编辑：**
啊。所以他们目前可以在浏览器中查看它，但你想让他们也能够将它作为应用程序下载吗？我想您可以使用 PhoneGap 创建他们在手机上下载的应用程序，但它所做的只是包含一个指向您应用程序在线版本的 WebView。
或者，您可以创建一个书签图标来打开您的站点，而不必创建一个实际的应用程序。

# entity-framework - 是否应该为纯 POCO 应用程序公开“DbContext”和“DbSet”

> ID：11658060
> 
> 赞同：2
> 
> 时间：2012-07-25T20:27:02.663
> 
> 标签：entity-framework

有人可以告诉我“DbContext”和“DbSet”的预期（最佳实践）使用，其中数据消费者不应该依赖任何 EF（100% POCO）。虽然我找到的所有示例都解释了如何为底层数据源创建 POCO 类（通常对应于 RDBMS 表），但它们仍然向外界公开“DbContext”和“DbSet”（包括 MSFT 自己的关于如何进行数据绑定的示例与这些课程）。这似乎破坏或（严重地）淡化了使用 POCO 的好处。IOW，客户端仍然绑定到 EF，而不是创建一些在内部使用 EF 的数据存储项目的更清洁（恕我直言）方法，但仅向其用户公开 POCO。为什么 EF 上的所有文章似乎都忽略了这一点（我是否遗漏了什么）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:26:47.747

You would usually create a service layer (based on the Repository pattern for example) that makes use of DbContext. Its role is to mediate between the database and the application/client. It will accept POCOs from the client and return POCOs to the client. That way, the client knows about the repository, but it doesn't know anything about DbContext.

Some more reading for you:

[http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/20/using-repository-pattern-with-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/20/using-repository-pattern-with-entity-framework.aspx) [http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx](http://blogs.msdn.com/b/adonet/archive/2009/06/16/using-repository-and-unit-of-work-patterns-with-entity-framework-4-0.aspx)

# ruby-on-rails - 刷新后缓存实例变量

> ID：11658063
> 
> 赞同：0
> 
> 时间：2012-07-25T20:27:10.713
> 
> 标签：ruby-on-rails, caching, instance-variables

我有 3 个模型：游戏、玩家、卡片。

在游戏模型中，我的功能是：

```
def cards
    @cards ||= Card.all.shuffle
end 
```

当我向玩家发牌时，我会：

```
player.cards << cards.pop 
```

我正在尝试保存卡片变量，刷新后我可以从剩余的卡片中处理另一个玩家。

基本上我试图避免以这种方式计算剩余卡：

```
 def remain_cards
    all_cards = Card.all
    table_cards = players.map(&:cards).flatten

    all_cards - table_cards
  end 
```

有没有办法做到这一点？

这是一个二十一点游戏，游戏周期：

*   人类玩家进入游戏并点击开始游戏按钮和发送到服务器的ajax请求
*   游戏模型向每个玩家发两张牌，首先是机器人玩家，然后是人类玩家。
*   开始交易后，我将发回包括玩家和他们的牌在内的所有数据。
*   然后我想要那个ת 如果玩家点击“打我”按钮，那将添加他从剩余卡片中的随机卡片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:36:59.443

你能详细说明发生了什么吗？刷新是什么意思？

更新：在那种情况下，我相信简单的答案是否定的。“每个请求都被视为一个独立的事件，除了存储在用户会话和任何外部数据库、缓存或文件存储中的内容之外，不会传递任何状态信息。最好在设计应用程序时考虑到这一点，而不是期望事情会持续下去，因为你已经设定了它们。” （来源：[Ruby on Rails 中的 Web 请求中保留哪些数据（如果有）？](https://stackoverflow.com/questions/2791093/what-data-if-any-persists-across-web-requests-in-ruby-on-rails)）。我能想到的让“卡片”数据在请求中持续存在的唯一另一件事是使用 cookie。但是无论如何我相信你必须不断更新cookie信息。因此，根据您的情况，它可能会更好或不会更好。

更新：我一直在想......让“卡片组”持续存在的一种可能方法是尝试以下方法：

```
#config/initializers/card.rb - store an instance to an app-wide Card object using an initializer.
THE_CARD_DECK = Card.new

#Now we change the before filter which sets the @cards variable to use that constant:
class ApplicationController < ActionController::Base
  before_filter :init_cards
  def init_cards
    @cards = THE_CARD_DECK
  end
end 
```

现在@cards 应该是唯一的卡片组，您可以在整个游戏中更改它的值。

# tsql - 查询查询结果

> ID：11658064
> 
> 赞同：1
> 
> 时间：2012-07-25T20:27:13.553
> 
> 标签：tsql

[http://sqlfiddle.com/#!3/e4891/1](http://sqlfiddle.com/#!3/e4891/1)

对于上面生成的查询（数据透视），我想再运行一个选择条件。

例如

select (C1 & C2) from 'the above pivoted query results'</p>

有可能吗？CTE会在这里帮助吗？SQL Server 2008 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:30:07.707

试试这个：

```
WITH Data AS 
(
  select *
 from 
 (
    select MemId, Condition_id, condition_result
    from t
 ) x
 pivot
 (
    sum(condition_result)
    for condition_id in ([C1], [C2], [C3], [C4])
 ) p
)
SELECT C1, C2
  FROM Data 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/e4891/3](http://sqlfiddle.com/#!3/e4891/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:31:13.430

要么将您的选择更改为仅选择您想要的字段：

```
select [C1], [C2]
  from 
  (
      select MemId, Condition_id, condition_result
      from t
  ) x
  pivot
  (
      sum(condition_result)
      for condition_id in ([C1], [C2], [C3], [C4])
  ) p 
```

或者

```
;with cte
as
(
  select *
  from 
  (
      select MemId, Condition_id, condition_result
      from t
  ) x
  pivot
  (
      sum(condition_result)
      for condition_id in ([C1], [C2], [C3], [C4])
  ) p
)
select [C1], [C2]
from cte 
```

# c# - 通过ID webBrowser1 c#获取href链接

> ID：11658067
> 
> 赞同：1
> 
> 时间：2012-07-25T20:27:20.730
> 
> 标签：c#, html, winforms, browser, href

如果一个有 id 并且我得到文本我使用这个

```
var text = webBrowser1.Document.GetElementById("id").InnerText; 
```

知道 id 如何获得链接 href

html

```
<a id="link11" href="/torrent_details/386387353/ubuntu?tab=summary" data-dynamite-selected="true"><b>ubuntu</b>-12.04-desktop-i386.iso</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:45:31.893

```
string href = webBrowser1.Document.GetElementById("id").GetAttribute("href"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:48:18.100

试试这个

```
 webBrowser1.Document.GetElementById("link11").GetAttribute("href") 
```

# android - 如何使用 Handler 通过 JSONObject 属性解析动态 JSONArray？

> ID：11658068
> 
> 赞同：0
> 
> 时间：2012-07-25T20:27:22.507
> 
> 标签：android, json, parsing, dynamic, handler

我想从 JSON 数组中解析这个对象：

{...“平均”：8.492619161922457352960767294，“符号”：“mtgoxUSD”，“低”：8.391000000000}

JSONArray 是动态的，因此有时它是数组中的第 73、74 或第 75 个对象，并且数组中的所有对象都没有名称。我目前正在使用此代码来解析它。当我的特定对象位于第 75 位时，它工作正常，但不在时会崩溃。

```
try {
         JSONArray json = JSONfunctions2.getJSONfromURL("http://bitcoincharts.com/t/markets.json");
         JSONObject  forex = json.getJSONObject(75);
         String btc = forex.getString("avg");            
         currencyBTC = Double.parseDouble(btc);  
 }catch(JSONException e)        {
     Log.e("log_tag", "Error parsing data "+e.toString());
 } 
```

我是否可以通过对象的属性来识别对象，因为数组中的对象没有名称？我该如何解决这个问题？先感谢您。

* * *

编辑：

这有点工作，但只返回数组中最后一个对象的值。我该如何处理这个问题，以便我可以解析我的特定对象，而不仅仅是最后一个？...

```
 try {
JSONArray jArray = JSONfunctions2.getJSONfromURL("http://bitcoincharts.com/t/markets.json");
String symbol = "mtgoxUSD";
for (int i = 0; i < jArray.length(); i++) {
    JSONObject forex = jArray.getJSONObject(i);
    String mtgoxUSD = forex.getString("symbol");
    if (mtgoxUSD == symbol) {
        String btc = forex.getString("avg");            
        double currencyBTC = Double.parseDouble(btc);
    }
}
} catch (Exception e) {
Log.e("log_tag", "Error parsing data "+ e.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:49:38.180

这是我在 android 应用程序中解析 JSON 的方式：

```
String s = client.getBaseURI("http://bitcoincharts.com/t/markets.json"); // Json format
JSONArray array = new JSONArray(s);
JSONObject obj;     
for (int i = 0; i < array.length(); i++) {
     obj = (JSONObject) array.get(i);
     double average =Double.parsedouble(obj.get("avg").toString()));
     String symbol = obj.get("symbol").toString();
     double low = Double.parsedouble(obj.get("low").toString());
} 
```

我还想补充一点，我使用 HTTP 客户端库从服务器获取数据。要了解有关如何使用 HTTP 客户端的更多信息，请在此链接中查看我的答案：[HTTP 客户端](https://stackoverflow.com/questions/11526437/android-illegalstateexception-in-httpget/11526693#11526693)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:44:11.610

“75”也将是动态的吗？意思是，数字会根据用户输入而改变吗？如果是这样，你需要有一个句柄，但无论如何，只需使用一个`for`循环，如下所示：

```
try {
    JSONArray jArray = JSONfunctions2.getJSONfromURL("http://bitcoincharts.com/t/markets.json");
    String symbol = "mtgoxUSD";
    for (int i = 0; i < jArray.length(); i++) {
        JSONObject forex = jArray.getJSONObject(i);
        String mtgoxUSD = forex.getString("symbol");
        if (mtgoxUSD == symbol) {
            String btc = forex.getString("avg");            
            double currencyBTC = Double.parseDouble(btc);
        }
    }
} catch (Exception e) {
    Log.e("log_tag", "Error parsing data "+ e.toString());
} 
```

# java - 由于递归方法调用，Java 堆栈溢出

> ID：11658071
> 
> 赞同：0
> 
> 时间：2012-07-25T20:27:50.300
> 
> 标签：java, recursion, stack-overflow

我正在用 java 做一个学校作业，我遇到了一个我找不到答案的错误。不知何故，当我`gethit()`在返回的对象上调用该方法时，`iterator.next()`我得到一个堆栈溢出异常。我怀疑是因为该`gethit()`方法（在这种特定情况下）递归地调用自身。尽管如此，我认为堆栈溢出很奇怪，因为递归只有 2 或 3 级深，而且我的对象不会使用过多的内存。

第`shoot()`一次调用的方法`gethit()`

```
public void shoot() {
    assert canHaveAsEnergy(energy - 1000);

    //Search the target position.
    Position laserPos = new Position(getPos().getX(), getPos().getY(), getPos().getBoard());
    do {
        long nextX = laserPos.getX() + new Double(orientation.getDirection().getX()).longValue();
        long nextY = laserPos.getY() + new Double(orientation.getDirection().getY()).longValue();
        laserPos.setX(nextX);
        laserPos.setY(nextY);
    } while (getPos().getBoard().canHaveAsPosition(laserPos) && (! getPos().getBoard().hasAsPosition(laserPos)));
    //Hit every entity on the target position. 
    for (Entity entity : getPos().getBoard().getAllEntitiesOn(laserPos)) {
        entity.getHit();
    }
    setEnergy(energy - 1000);
} 
```

`getHit()`递归调用自身的方法。

```
public void getHit() {
    ArrayList<Position> neighbours = new ArrayList<Position>();
    Position northPos = new Position(getPos().getX(), getPos().getY() - 1, getPos().getBoard());
    Position eastPos = new Position(getPos().getX() + 1, getPos().getY(), getPos().getBoard());
    Position southPos = new Position(getPos().getX(), getPos().getY() + 1, getPos().getBoard());
    Position westPos = new Position(getPos().getX() - 1, getPos().getY(), getPos().getBoard());
    neighbours.add(northPos);
    neighbours.add(eastPos);
    neighbours.add(southPos);
    neighbours.add(westPos);

    for (Position pos : neighbours) {
        if (getPos().getBoard().hasAsPosition(pos)) {
            Iterator<Entity> iterator = getPos().getBoard().getAllEntitiesOn(pos).iterator();
            while (iterator.hasNext()) {
                //Somehow this gives a stack overflow error
                iterator.next().getHit();
            }
        }       
    }
    System.out.println(this.toString() + " takes a hit and explodes.");
    getPos().getBoard().removeAsEntity(this);
    terminate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:29:40.670

每次您调用迭代器时，都会调用另一个迭代器，该迭代器将调用另一个迭代器，依此类推。因此，由于每次迭代器调用，您的堆栈都会从无限递归中溢出

```
iterator.next().gethit(); 
```

每个迭代器只会创建一个需要通过的新迭代器，但您会一次又一次地调用 getHit()，因此您永远不会完成任何函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:29:57.847

*   iterator.next().getHit(); 调用 getHit() 方法并再次开始迭代并继续（递归循环）。有一个变量或终止点来退出递归循环。

*   每当方法被调用时，它将信息推送到堆栈帧，在方法完成时堆栈帧将被删除。在您的情况下，无法完成方法完成和删除堆栈帧，这会生成 StackOverFlowError

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:56:09.060

在实现递归时，您应该确保有一个终止调用，该方法不会调用自身。

现在您假设当您移动到邻居并检查它们是否被击中但当您看到呼叫时，这种递归应该停止......（这是初始位置 2,2 的空运行）

```
[Original]=>[P1],[P2],[P3],[P4]
**[2,2]**=>[2,1],[3,2],[2,3],[1,2]
[2,1]=>[2,0],[3,1],**[2,2]**,[1,1]
[3,2]=>[3,1],[4,2],[3,3],[2,2]
[2,3]=>[2,2],[3,3],[2,4],[1,3]
[1,2]=>[1,1],[2,2],[1,3],[0,2] 
```

因此，当您首先计算 4 个邻居并调用`getHit()`它时。**源单元格作为任何一个邻居的邻居出现，这足以进入无休止的递归。**

您可以通过输入以下语句来确定您的价值观...

```
public void getHit() {
    System.out.println("[" + getPos().getX() + "," + getPos().getY() + "]");
    ....
} 
```

**这里的解决方案是保留一个单元格列表，将其作为参数传递，这些单元格被访问过并且不再访问它们。希望这可以帮助。**

# powershell - Powershell 返回包含特定文件但不完全递归的目录

> ID：11658073
> 
> 赞同：4
> 
> 时间：2012-07-25T20:27:53.413
> 
> 标签：powershell

使用以下 Powershell 代码，我试图在根目录中找到不包含 robots.txt 的文件夹。通常，我可以递归地执行此操作，但递归这个庞大的文件夹结构需要永远。我真正需要的只是第一级，AKA 只搜索在 C:\Projects 中找到的文件夹。

基本上我需要从每组孩子中获取孩子，然后才返回没有 robots.txt 文件的父母。我在这里遇到的问题是嵌套 for 循环中的 $_ 给了我 CWD，而不是我正在搜索的目录的子目录。我知道我可能不得不在这里使用 -Where 但我有点过头了，而且对 powershell 还很陌生。任何帮助表示赞赏！

```
$drv = gci C:\Projects | %{
    $parent = $_; gci -exclude "robots.txt" | %{$_.parent}} | gu 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T20:56:30.840

这个单线（为了清楚起见，分布在几个上）应该可以为您解决问题：

```
# look directly in projects, not recursively
dir c:\projects | where {
    # returns true if $_ is a container (i.e. a folder)
    $_.psiscontainer
} | where {
    # test for existence of a file called "robots.txt"
    !(test-path (join-path $_.fullname "robots.txt"))
} | foreach {
    # do what you want to do here with $_
    "$($_.fullname) does not have robots.txt"
} 
```

# opencl - 同时在不同的 GPU 上执行不同的内核

> ID：11658074
> 
> 赞同：2
> 
> 时间：2012-07-25T20:27:58.150
> 
> 标签：opencl

基本上我有两个 GPU，我想在每个 GPU 上执行一些内核。我不希望 GPU 在同一个内核上工作，每个内核都做其中的一部分（我不知道这是否可能），以防万一我什至不想看到这种行为。

我只是想确保这两种设备都在使用。我已经为它们创建了上下文和命令队列。但是我看到只执行了一个内核，这意味着只使用了一个设备。我就是这样做的。. .

```
cl_device_id *device;
cl_kernel *kernels;
...
// creating context.  
context = clCreateContext(0, num_devices, device, NULL, NULL, &error);
...
// creating command queues for all kernels
for(int i = 0; i<num_kenrels; i++)
    cmdQ[i] = clCreateCommandQueue(context, *device, 0, &error);
...
// enqueue kernels 
error = clEnqueueNDRangeKernel(*cmdQ, *kernels, 2, 0, glbsize, 0, 0, NULL, NULL); 
```

我走的是正确的路吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:39:05.763

这取决于您实际填充`device`数组的方式。如果您正确初始化它，则创建`context`跨设备是正确的。

不幸的是，您对内核和命令队列有一个错误的想法。*内核*是从针对特定上下文的程序创建的。另一方面，队列用于与某个设备进行通信*。*您要做的是为每个设备*而不是*内核创建一个队列：

```
for (int i = 0; i < num_devices; i++)
    cmdQ[i] = clCreateCommandQueue(context, device[i], 0, &error); 
```

现在您可以通过相应的命令队列将不同（或相同）的内核排入不同设备上：

```
clEnqueueNDRangeKernel(cmdQ[0], kernels[0], /* ... */);
clEnqueueNDRangeKernel(cmdQ[1], kernels[1], /* ... */); 
```

总结一下条款：

*   A`cl_context`是为特定设备创建的`cl_platform_id`，就像是设备子集的容器，
*   a是为 a及其关联设备`cl_program`创建和构建的`cl_context`
*   a`cl_kernel`是从 a 中提取的，`cl_program`但只能在与程序上下文关联的设备上使用，
*   a`cl_command_queue`是为属于特定上下文的特定设备创建的，
*   内存操作和内核调用在命令队列中排队并在相应的设备上执行。

# .htaccess - 在 htaccess 中重写规则以保留参数

> ID：11658075
> 
> 赞同：1
> 
> 时间：2012-07-25T20:28:06.993
> 
> 标签：.htaccess, rewrite

我已经编写了以下重写规则，当没有参数（没有页码、每页没有产品、没有排序顺序等）时可以正常工作

```
RewriteRule ^(?!bench/).*cat_2.html(\.[a-z]{3,4})?(.*)  "http\:\/\/www\.mysite\.co\.uk\/bench\/cat_2\.html\?mode\=allBrands" [R=301,L] 
```

这可以确保 URL 在 Google 的搜索结果中得到优化。所以

*   [http://www.mysite.co.uk/bench-clothing/cat_2.html?mode=allBrands#](http://www.mysite.co.uk/bench-clothing/cat_2.html?mode=allBrands#)

更改为

*   [http://www.mysite.co.uk/bench/cat_2.html?mode=allBrands](http://www.mysite.co.uk/bench/cat_2.html?mode=allBrands)

`mode=allBrands`将始终设置。

所以如果我点击一个链接去

*   [http://www.mysite.co.uk/bench-clothing/cat_2.html?mode=allBrands&ppp=64&sort=desc&page=2](http://www.mysite.co.uk/bench-clothing/cat_2.html?mode=allBrands&ppp=64&sort=desc&page=2)

它被重定向到

*   [http://www.mysite.co.uk/bench/cat_2.html?mode=allBrands](http://www.mysite.co.uk/bench/cat_2.html?mode=allBrands)

这是第一页。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T08:36:04.793

更改`[R=301,L]`为`[R=301,L,QSA]`

更多信息：[https ://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsa](https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:11:11.190

您需要在`QSA`重写规则中添加一个标志，以便括号如下所示：

```
[R=301,L,QSA] 
```

这告诉 apache 将任何现有的查询字符串附加到目标 ( `mode=allBrands`) 中的新查询字符串。

# python - 搜索和替换在标题中不起作用？Python 文档

> ID：11658077
> 
> 赞同：-1
> 
> 时间：2012-07-25T20:28:12.033
> 
> 标签：python, search, header, replace, docx

我正在使用 python-docx 模块对大量文档进行一些编辑。它们都包含一个标题，我需要在其中替换一个数字，但每次我这样做时，文档都不会打开，错误是内容不可读。任何人对为什么会发生这种情况有任何想法，或者示例工作代码片段？谢谢。

```
from docx import *
#document = yourdocument.docx
filename = "NUR-ADM-2001"
relationships = relationshiplist()
document = opendocx("C:/Users/ai/My Documents/Nursing docs/" + filename + ".docx")
docbody = document.xpath('/w:document/w:body',namespaces=nsprefixes)[0]
advReplace(docbody, "NUR-NPM 101", "NUR-NPM 202")

# Create our properties, contenttypes, and other support files
coreprops = coreproperties(title='Nursing Doc',subject='Policies',creator='IA',keywords='Policy'])
appprops = appproperties()
contenttypes = contenttypes()
websettings = websettings()
wordrelationships = wordrelationships(relationships)

# Save our document
savedocx(document,coreprops,appprops,contenttypes,websettings, wordrelationships,"C:/Users/ai/My Documents/Nursing docs/" + filename + ".docx") 
```

编辑：所以它最终可以打开文档，但它说某些内容无法显示并且标题已经消失......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:07:23.383

我不知道这个模块，但一般来说你不应该就地编辑文件。打开文件“A”，写入文件“/tmp/A”。关闭这两个文件并确保没有错误，然后将“/tmp/A”移动到“A”。否则，如果在写入过程中出现问题，您可能会破坏您的文件。

# php - 获取当前mysql插入的id

> ID：11658080
> 
> 赞同：3
> 
> 时间：2012-07-25T20:28:19.340
> 
> 标签：php, mysql

无论如何都可以获取当前记录的 ID 我使用 php 和**Mysql**插入到数据库表中，而无需进行额外的选择来获取最后一个 ID？

例如，如果我的表有这些列，id，url，name，如果 url 包含域名和当前 id 作为查询变量 ex：domainname.com/page.php?id=current_id

```
$sql="INSERT INTO Persons (id, url, name )
VALUES
('domainname.com/page.php?id=".**whats_the_current_id**."','$_POST[age]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:47:17.417

据我所知，没有“干净”的方法可以找到您要插入的 ID（根据我从您的问题中了解到的，这就是您想知道的）。

我认为有两个选择，从丑陋的一个开始：`select max(id) from Persons`，增加一个，并希望没有插入会为你搞砸。就像我说的，它丑陋，而且不可靠。

更好的选择是首先使用 url 的虚拟值插入记录，然后使用`mysql_insert_id()`. 然后使用正确的 url 值更新该记录。

您要求在插入查询之后没有选择查询的情况下检索 id 的方法，但就像我说的那样，我认为这是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:36:00.110

我用`mysql_insert_id()`它。它工作正常。

```
// pseudo-ish code
$query = "INSERT something .... "
$updated = $db->run_query($query);
$id = mysql_insert_id(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:58:07.213

你的桌子应该是这样的

```
ID AUTO_INCREMENT
person_id VARCHAR
person_url ...
person_name ... 
```

你的帖子形式类似于

```
<form method="post">
  <input type="hidden" name="id" value="<?php echo uniqid() ?>" />
   ...
</form> 
```

查询应该是这样的：

```
$person_id   = intval($_POST['id']);
$person_url  = mysql_real_escape_string($_POST['url']);
$person_name = mysql_real_escape_string($_POST['name']);

mysql_query("INSERT INTO Persons (person_id, persno_url, person_name) VALUES ( {$person_id} , {$person_url}, {$person_name} )");

$ID = mysql_insert_id(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:41:33.240

当前 ID 在`$_GET['id']`. 您应该在将其插入查询之前对其进行清理：

```
$id = intval($_GET['id']); 
```

然后，`$id`在您的查询中使用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-25T20:41:55.763

如果您在第一个插入周围添加类，然后是第二个选择。然后选择将起作用。

```
<?php
class insert1{
     function inserthere(){
          ***insert***
     }
}
class select1{
     function selecthere(){
          ***select***
     }
}
$a = new insert1;
$a->inserthere();
$b = new select1;
$b->selecthere();
?> 
```

# c++ - 项目参考和 3rd 方库

> ID：11658081
> 
> 赞同：0
> 
> 时间：2012-07-25T20:28:30.673
> 
> 标签：c++, visual-studio-2010, static-libraries

我在 VS2010 上有两个项目的解决方案。

主要项目引用并依赖于第二个，它是作为静态库构建的。第二个使用不是在解决方案中构建的静态第三方库，但仅在第二个项目的链接器设置中引用。

如果我尝试生成解决方案，VS失败并指示他没有找到第三方库。我不明白为什么，因为第二个项目的编译静态库足够大并且似乎“包含”了第 3 方库。

到目前为止，我只看到两个解决我的问题的方法，我宁愿避免：

1.  将第 3 方库添加到主项目的链接器设置中
2.  在我的解决方案中包含整个 3rd-party 库并使用

有没有其他方法可以解决这个问题？

**编辑：**编译主项目时出现问题，编译器输出：链接：致命错误LNK1104：无法打开文件'wxbase29u.lib'（我在第二个项目中使用wxWidget）

**EDIT2：**我将 -verbose 选项用于链接，似乎对第 3 方库的引用实际上仍然存在于 Project2.lib 中：

```
 Searching ..\MyAppConfig\Bin\Win32\Release\MyAppConfig.lib :
           "public: static void __cdecl ConfigWindow::Open(void)" (?Open@ConfigWindow@@SAXXZ) found
             Referenced in main.obj
             Loaded MyAppConfig.lib(configWindow.obj)
     /DEFAULTLIB:wxbase29u processed
     /DEFAULTLIB:wxbase29u_net processed
     /DEFAULTLIB:wxbase29u_xml processed
     /DEFAULTLIB:wxregexu processed
     /DEFAULTLIB:wxexpat processed
     /DEFAULTLIB:wxjpeg processed
     /DEFAULTLIB:wxpng processed
     /DEFAULTLIB:wxtiff processed
     /DEFAULTLIB:wxzlib processed
     ...
     ...
     LINK : fatal error LNK1104: cannot open file 'wxbase29u.lib' 
```

有趣的是，我什至不使用 Project2 中的其他 wxWidgets 库，但 Visual Studio 似乎正在搜索所有这些库：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:38:20.183

以下是你应该如何设置你的项目：

项目一（主要）

```
Additional dependencies: Project2.lib 
```

项目 2

```
Additional dependencies: ThirdParty.lib 
```

构建顺序：项目 2 -> 项目 1

如果您的项目是这样设置的并且它没有链接，那么它只是意味着您的库的路径没有正确设置（在“其他包含目录”下）。因此，只需确保您的项目附加依赖项设置正确，并且包含目录指向您需要的库所在的位置。

# c++ - zlib 在缓冲区扩展时停止

> ID：11658082
> 
> 赞同：1
> 
> 时间：2012-07-25T20:28:31.850
> 
> 标签：c++, zlib

当我尝试解压缩大小大于 2048 的数据时，zlib 解压缩调用返回 Z_OK。因此，为了澄清如果我解压缩大小为 2980 的数据，它将解压缩到 2048（两个循环），然后返回 Z_OK。我错过了什么？

字节是一个向量< unsigned char >;

```
 Bytes uncompressIt( const Bytes& data )
   {
       size_t buffer_length = 1024;

       Byte* buffer = nullptr;

       int status = 0;

       do
       {
           buffer = ( Byte* ) calloc( buffer_length + 1, sizeof( Byte ) );

           int status = uncompress( buffer, &buffer_length, &data[ 0 ], data.size( ) );  

           if ( status == Z_OK )
           {
              break;
           }
           else if ( status == Z_MEM_ERROR )
           {
              throw runtime_error( "GZip decompress ran out of memory." );
           }
           else if ( status == Z_DATA_ERROR )
           {
              throw runtime_error( "GZip decompress input data was corrupted or incomplete." );
           }
           else //if ( status == Z_BUF_ERROR )
           {
              free( buffer );

              buffer_length *= 2;
           }
       } while ( status == Z_BUF_ERROR ); //then the output buffer wasn't large enough

       Bytes result;

       for( size_t index = 0; index != buffer_length; index++ )
       {
          result.push_back( buffer[ index ] );
       }

       return result;
    } 
```

编辑：

感谢@Michael 赶上 realloc。我一直在搞砸实施并错过了它；在发布之前仍然没有任何借口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:32:56.497

我得到了它。

```
int status 
```

在循环的内部和外部定义。这里的教训是永远不要喝酒和发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:44:28.710

来自 zlib 手册：“在没有足够空间的情况下， uncompress() 将使用未压缩的数据填充输出缓冲区直到该点。”

即，多达 1024 个字节已经被解压缩，然后您获得`Z_BUF_ERROR`并加倍缓冲区大小，为您提供 2048 个字节的空间，并且一旦您第二次解压缩，您总共获得了多达 3072 个字节的未压缩数据。

此外，看起来你`calloc`在`realloc`得到`Z_BUF_ERROR`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:58:23.880

我发现您的代码没有明显的问题。您可能错误地预测了未压缩数据的长度。 仅当它已解压完整的 zlib 流并且未压缩数据的校验值与流末尾的校验值匹配`uncompress()`时才会返回。`Z_OK`

# c# - 如何在阅读器关闭之前返回 MySqlDataReader

> ID：11658084
> 
> 赞同：3
> 
> 时间：2012-07-25T20:28:36.803
> 
> 标签：c#, mysqldatareader

好的，我的代码目前是：

```
 public MySqlDataReader CreateQuery(string queryString, string connectionString )
    {

        using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            using (MySqlCommand command = new MySqlCommand(queryString, connection))
            {
                command.Connection.Open();
                command.ExecuteNonQuery();

                MySqlDataReader reader = command.ExecuteReader();
                return reader;
            }
        }
    } 
```

在另一个函数中，我有：

```
using(MySqlDataReader readers = _connection.CreateQuery(query, connectString)) 
```

目前，在这种形式下，当我将阅读器返回为阅读器时，没有任何价值。我已经通过并验证了在返回时，读者的信息是正确的。然而，读者没有价值。我可能错过了一些完全愚蠢的东西。但是，我们将不胜感激任何和所有的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:04:22.717

使用 using 命令，您的代码实际上将处理连接，并将控制权之前的命令返回给调用者。本质上，您在 using 语句中创建的连接对象和命令对象在调用代码能够使用它之前就已被处置，因此它不再可用。

您可能想对查询结果而不是阅读器本身做一些事情。也许将其加载到表格中？就像是：

```
public DataTable CreateQuery(string queryString, string connectionString )
    {
        DataTable results =  new DataTable("Results");
        using (MySqlConnection connection = new MySqlConnection(connectionString))
        {
            using (MySqlCommand command = new MySqlCommand(queryString, connection))
            {
                command.Connection.Open();
                command.ExecuteNonQuery();

                using (MySqlDataReader reader = command.ExecuteReader())
                    results.Load(reader);
            }
        }
       return results;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:18:45.383

您可以返回作为记录实现的基本接口的an，而不是将所有记录返回`Datareader`或复制到您作为一个整体返回的内存中。`DataTable``IEnumerable<IDataRecord>``DataReader`

所以这应该有效，因为保持活力的`yield`原因：`Connection`

```
public IEnumerable<IDataRecord> CreateQuery(string queryString, string connectionString)
{
    using (MySqlConnection connection = new MySqlConnection(connectionString))
    {
        using (MySqlCommand command = new MySqlCommand(queryString, connection))
        {
            command.Connection.Open();
            using (var reader = command.ExecuteReader())
            {
                while (reader.Read())
                {
                    yield return (IDataRecord)reader;
                }
            }
         }
    }
} 
```

例如，如果您只想获取前 5 条记录：

```
var records = CreateQuery("SELECT * FROM ais.country;", Properties.Settings.Default.MySQL).Take(5);
foreach (IDataRecord rec in records)
{
    String country = rec.GetString(rec.GetOrdinal("Name"));
} 
```

# php - PHP 会话共享 - 子域作为入口点

> ID：11658086
> 
> 赞同：0
> 
> 时间：2012-07-25T20:28:58.033
> 
> 标签：php, session, session-variables, subdomain

我有一个登陆页面，例如：

subdomain.mydomain.com

在那里我分配了一些会话变量，但现在问题在于用户被重定向到 mydomian.com 并且所有会话变量都丢失了。

我试过 ini_set('session.cookie_domain', '.mydomain.com' ); 和 htaccess 和 php.ini 修复，但没有任何工作....并且没有生成错误，所以我有点困惑发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:42:22.787

在开始会话之前尝试在每个域中附加此代码

```
session_name("WebsiteID"); 
```

用您喜欢的值替换 WebsiteID。

# java - 如何使用 Maven 的 Java API 访问 Maven Artifact POM？

> ID：11658087
> 
> 赞同：11
> 
> 时间：2012-07-25T20:28:58.033
> 
> 标签：java, maven

我正在尝试从项目的根目录开始检索整个依赖关系树及其 pom。我从文件系统中已经存在的 POM 开始，但我不确定如何从存储库中检索依赖项 pom。

我正在使用以下代码来访问依赖项列表。从列表中，我获得了有关工件的所有信息。我只是不确定如何访问存储库。

```
FileReader reader = null;
Model model = null;
MavenXpp3Reader mavenreader = new MavenXpp3Reader();

File pomfile = new File("pom.xml");

model.setPomFile(pomfile);
MavenProject project = new MavenProject(model);

List<Dependency> deps = project.getDependencies();

// Get dependency details
for (Dependency d: deps) {          
    System.out.print(d.getArtifactId());
    System.out.print(":");
    System.out.println(d.getVersion()); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-26T17:16:42.513

实际上，您已经非常接近阅读依赖项了。所缺少的是：

```
Model model = mavenreader.read(new FileReader(pomFile)); 
```

完整示例：

```
MavenXpp3Reader mavenreader = new MavenXpp3Reader();

File pomfile = new File("pom.xml");
Model model = mavenreader.read(new FileReader(pomFile));

List<Dependency> deps = model.getDependencies();

for (Dependency d: deps) {          
    System.out.print(d.getArtifactId());
} 
```

这不会为您提供依赖关系树，但您可以为找到的依赖关系重复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:42:06.427

不幸的是，这并不是那么微不足道:-) 我可以给你一些建议（考虑到你只需要来自中央仓库的工件）。

这是我在 Github 上找到的一个很好的[示例代码。](https://github.com/rlegendi/maven-indexer-examples/blob/master/indexer-example-01/src/main/java/org/apache/maven/indexer/example/App.java)另一种方法是使用[中央仓库的 REST API](http://search.maven.org/#api)。这是一个如何以[编程](http://code.google.com/p/dependency-checker-for-java-applications/source/browse/trunk/src/net/ogi/maven/net/ArtifactsGetter.java)方式执行此操作的示例。

顺便说一句，如果您只需要依赖项，您也可以直接使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/source-repository.html)（这在例如上调用`mvn dependency:tree`- 请参阅[此线程](https://stackoverflow.com/questions/10861794/print-plain-text-tree-from-tree-data-structure-java/10862269#10862269)以获取示例）。

可能你的方法也可以，但我想它需要一些缺失的部分。

# javascript - 为什么我在使用 setInterval 时遇到问题？

> ID：11658088
> 
> 赞同：-1
> 
> 时间：2012-07-25T20:28:59.937
> 
> 标签：javascript, jquery

我是一个新手 javascript 程序员，我总是遇到`setInterval`. W3Schools 让它看起来很简单，但我永远无法在需要时让它工作。在这里，我有一个跨度，我想制作“闪光”。

```
var id = window.setInterval(function(){
             if($("#span1").css("color") == "red"){
                 $("#span1").css("color","blue");
             }
             else{
                 $("#span1").css("color","red");}
         }, 100); 
```

我不断得到一个`SYNTAX ERROR: Unexpected token ILLEGAL`. 我在这里做错了什么？

注意：我知道有一些 jQuery 方法可以轻松处理这个问题。我试图更好地理解这个 JS 函数。

**更新**我修复了语法错误。（缺少报价）。现在我得到一个错误`undefined`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:32:14.227

您可能复制并粘贴了代码，其中包含一些错误字符。尝试在新文件中手动重新键入代码。

旁注，您可以使整个事情变得更加高效和可靠：

```
(function() {
    var thespan = document.getElementById('span'),
        toggle = true;
    window.setInterval(function() {
        toggle = !toggle;
        thespan.style.color = toggle ? "red" : "blue";
    },100);
})(); 
```

# javascript - 将 2 个数组合并和交替为单个数组

> ID：11658089
> 
> 赞同：3
> 
> 时间：2012-07-25T20:29:01.820
> 
> 标签：javascript

我具有初学者脚本编写技能，并且正在使用一种 JavaScript，ECMA-262，它可以在一个名为 Opus Pro（英国数字工作室）的程序中找到。

我一直在网上搜索，但没有成功，以找到一种方法将 2 个数组中的数字元素合并和交替到第三个合并数组中。我在这个网站上找到了一些脚本，但是它们使用了像“push”这样的功能，而这些功能在这个脚本语言中是没有的，所以不能使用。

我当前的脚本为一组随机选择的数字（math.random），1-6 创建一个数组，需要修改以创建 2 个数组（1-3 和 4-6），然后交替合并一个值第一个数组具有来自第二个数组的值，直到新数组具有从这些（子）数组中获取的 6 个值：

当前未修改的脚本：

```
function separate()
{
  for(i=1;i<=listamount;i++)
     {
     //create 6 random numbers from 1-6
     temp = Math.round(Math.random()*(6))
     if (temp == 0){temp = 1}
     if (temp == 7){temp = 6}

        randomset[i] = temp
     }         
} 
```

这需要修改，以便最终的随机列表数组（称为 newrandomlist[i]）将是一个交替混合，如 2、6、1、4、3、5，但从 2 个随机排序/创建的子数组（1 -3 和 4-6)。来自每个随机排序/构造的子数组的交替值对于项目中其余脚本的功能至关重要。我尝试了很多想法，都没有成功。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:40:29.473

ECMA-262 具有具有`.push()`方法的 Array 对象。您可以在第 15.4.4.7 节的[ECMA 规范中自己查看。](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

要通过在每个数组的随机元素之间交替来合并两个数组，您可以这样做：

```
function mergeTwoRandom(arr1, arr2) {

    function extractRandom(arr) {
        var index = Math.floor(Math.random() * arr.length);
        var result = arr[index];
        // remove item from the array
        arr.splice(index, 1);
        return(result);
    }

    var result = [];
    while (arr1.length || arr2.length) {
        if (arr1.length) {
            result.push(extractRandom(arr1));
        }
        if (arr2.length){
            result.push(extractRandom(arr2));
        }
    }
    return(result);
} 
```

如果你想在没有 的情况下这样做`.push()`，你可以这样做：

```
function mergeTwoRandom(arr1, arr2) {

    function extractRandom(arr) {
        var index = Math.floor(Math.random() * arr.length);
        var result = arr[index];
        // remove item from the array
        arr.splice(index, 1);
        return(result);
    }

    var result = [];
    while (arr1.length || arr2.length) {
        if (arr1.length) {
            result[result.length] = extractRandom(arr1);
        }
        if (arr2.length){
            result[result.length] = extractRandom(arr2);
        }
    }
    return(result);
} 
```

如果你也没有`.splice()`，你可以这样做：

```
function mergeTwoRandom(arr1, arr2) {

    function removeItem(arr, index) {
        for (var i = index; i < arr.length - 1; i++) {
            arr[i] = arr[i + 1];
        }
        arr.length = arr.length - 1;
    }

    function extractRandom(arr) {
        var index = Math.floor(Math.random() * arr.length);
        var result = arr[index];
        // remove item from the array
        removeItem(arr, index);
        return(result);
    }

    var result = [];
    while (arr1.length || arr2.length) {
        if (arr1.length) {
            result[result.length] = extractRandom(arr1);
        }
        if (arr2.length){
            result[result.length] = extractRandom(arr2);
        }
    }
    return(result);
} 
```

# asp.net-mvc-3 - 从另一个控制器返回 PartialViewResult

> ID：11658092
> 
> 赞同：1
> 
> 时间：2012-07-25T20:29:30.390
> 
> 标签：asp.net-mvc-3

现在我正在重写一些代码，但我也想使用现有代码作为占位符。我有一个包含所有新代码的“参考”控制器和一个包含旧代码的“参考”控制器。

我想要做的只是从我的参考控制器的旧参考控制器返回一个 PartialViewResult。我试过这样做：

```
public PartialViewResult ResolveView(int type)
{
    //Other code
    if (type == (int)ReferenceType.Participant) return ParticipantView();

    //return default partial view
    ...
}

//Called from ResolveView
private PartialViewResult ParticipantView()
{
    return RedirectToAction("ParticipantsView", "References");
} 
```

这是我的旧控制器方法：

```
public PartialViewResult ParticipantsView()
{
    var viewmodel = new ParticipantCreateViewModel
                            {
                                Participant = new ParticipantViewModel(),
                                Person = new ParticipantPersonViewModel(),
                                Types = ReferenceService.GetData<ParticipantType>(),
                            };
    return PartialView("_ParticipantsView");
} 
```

我目前收到一个错误：`Cannot implicitly convert type 'System.Web.Mvc.RedirectToRouteResult' to 'System.Web.Mvc.PartialViewResult'`

我需要做什么才能让它从我的其他控制器返回我的 PartialViewResult？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:34:54.473

更改方法签名以返回 ActionResult

```
private ActionResult ParticipantsView()
{
 return RedirectToAction("ParticipantsView", "References");
} 
```

# c# - 在 .NET/C# 2.0 中合并两个字符串数组？

> ID：11658093
> 
> 赞同：2
> 
> 时间：2012-07-25T20:29:29.983
> 
> 标签：c#, .net, arrays, string, c#-2.0

> **可能重复：**
> [在 .NET 中合并两个数组](https://stackoverflow.com/questions/59217/merging-two-arrays-in-net)
> [如何在 C# 中连接两个数组？](https://stackoverflow.com/questions/1547252/how-do-i-concatenate-two-arrays-in-c)

如何合并两个`string[]`变量？

例子：

```
string[] x = new string[] { "apple", "soup", "wizard" };
string[] y = new string[] { Q.displayName, Q.ID.toString(), "no more cheese" }; 
```

我想添加这两个，所以内容`x`是：`{"apple", "soup", "wizard",Q.displayName, Q.ID.toString(), "no more cheese"};`按那个顺序。这可能吗？如果结果必须进入一个新的字符串数组，那很好；我只是想知道如何实现它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T20:31:08.463

从[这个答案](https://stackoverflow.com/a/1547276/120955)：

```
var z = new string[x.length + y.length];
x.CopyTo(z, 0);
y.CopyTo(z, x.length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:35:06.590

你可以试试：

```
string[] a = new string[] { "A"};
string[] b = new string[] { "B"};

string[] concat = new string[a.Length + b.Length];

a.CopyTo(concat, 0);
b.CopyTo(concat, a.Length); 
```

然后`concat`是您的串联数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:34:52.120

由于您提到 .NET 2.0 并且 LINQ 不可用，因此您真的被困在“手动”中：

```
string[] newArray = new string[x.Length + y.Length];
for(int i = 0; i<x.Length; i++)
{
   newArray[i] = x[i];
}

for(int i = 0; i<y.Length; i++)
{
   newArray[i + x.Length] = y[i];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:35:15.880

尝试这个。

```
 string[] front = { "foo", "test","hello" , "world" };
     string[] back = { "apple", "soup", "wizard", "etc" };

     string[] combined = new string[front.Length + back.Length];
     Array.Copy(front, combined, front.Length);
     Array.Copy(back, 0, combined, front.Length, back.Length); 
```

# c# - 设置数据源后如何从组合框中删除值？

> ID：11658098
> 
> 赞同：0
> 
> 时间：2012-07-25T20:29:45.130
> 
> 标签：c#, .net, winforms, combobox, datasource

使用此代码：

```
comboBoxCurrently.DataSource = PlatypusData.getCurrentlyVals();
comboBoxCurrently.Items.Remove("Surrounded by purplish-blue Penguins"); 
```

...我得到，“ *System.ArgumentException 未处理 Message=Items 集合在设置 DataSource 属性时无法修改。* ”

我不想限制我稍后从查询中删除的值（*...WHERE bla <> 'Surrounded...*），因为有时该值*是*允许的（显示历史数据），而我不' t 真的希望在**getCurrentlyVals()**中有一个条件语句，它使用一个查询语句或另一个（如果有更好的方法来做到这一点）。

有任何想法吗？

## 更新

好的，这有效：

```
List<string> intermediateList = PlatypusData.getCurrentlyVals();
intermediateList.Remove("Surrounded by purplish-blue Penguins");
comboBoxCurrently.DataSource = intermediateList; 
```

## 再次更新

我将其更改为 Lars 的方式：

```
comboBoxCurrently.Items.AddRange(PlatypusData.getCurrentlyVals().ToArray());
comboBoxCurrently.Items.Remove("Surrounded by purplish-blue Penguins"); 
```

...而且我认为这一页包含的字符串“被紫蓝色企鹅包围”的实例比人类历史上的任何一页都多，无论是过去还是未来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:38:39.980

将 comboBoxCurrently.DataSource 绑定到公共属性

例如

```
Public ObservableCollection<string> AnimalList { get; set; } 
```

在 Ctor AnimalList = PlatypusData.getCurrentlyVals();

然后 AnimalList.Remove("被紫蓝色企鹅包围");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:58:07.083

您必须从 DataSource 修改集合，但您似乎反对这样做，因此在这种情况下，不要使用 DataSource，而是尝试将项目直接添加到 ComboBox：

```
comboBoxCurrently.Items.AddRange(PlatypusData.getCurrentlyVals().ToArray());
comboBoxCurrently.Items.Remove("Surrounded by purplish-blue Penguins"); 
```

# windows - 将PowerPoint中的内部图像转换为一种格式

> ID：11658100
> 
> 赞同：3
> 
> 时间：2012-07-25T20:29:52.963
> 
> 标签：windows, image, png, powerpoint

我看到很多关于如何将整个幻灯片从 powerpoint 演示文稿导出为图像的提示和技巧，但这不是我的任务。相反，我正在尝试转换各个幻灯片中的所有“非开放格式”图像类型，并将它们（就地）替换为友好的等价物。这主要是由于 Google Docs 不了解 .emf 和 .wmf 格式（为什么？那么开源软件实际上确实支持它？）并且因为手动将图形导出为图像文件并将其重新插入到演示文稿中是一个非常复杂的过程，我想知道是否有人找到了这样做的好方法。

因此，总结：将 powerpoint 演示文稿中的 emf 和 wmf 文件升级为 png 或 jpg 格式。作为附注，我可以将这些文件作为 zip 文件打开，并查看有问题的文件只是在 \ppt\media 中，但只需替换文件会导致 Powerpoint 只是删除以前引用的图像文件并抱怨可能是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:20:34.310

对于每个“不友好”的图片，将其复制并粘贴为 PNG（或 JPG 或任何您想要的），然后删除原始图片。

简单的例子：

```
Sub ConvertShapeToPNG()
    Dim oSh As Shape
    Set oSh = ActiveWindow.Selection.ShapeRange(1)
    oSh.Copy
    ActiveWindow.Selection.SlideRange.Shapes.PasteSpecial ppPastePNG
    oSh.Delete
End Sub 
```

在实践中，假设您想要集体执行此操作而不是一次手动执行一个，您需要一种方法来确定图片是否“友好”（实际上它是否是图片）。

您可以首先检查 oSh.Type = msoPicture （或其他几种可能的类型之一）。如果是图片，它已经是光栅格式还是“不友好”的格式？尝试取消组合形状的副本。如果尝试抛出错误，则它已经是光栅；如果没有错误，删除生成的未分组形状/shaperange 和原始形状的副本。

复制/粘贴为 PNG/etc 后，您需要获取原始形状的 x/y 位置，将其应用于新的 PNG 形状，并可能将新形状移动到原始形状的 z 顺序。

# eclipse - Eclipse 动态 Web 项目中的 web.xml 在哪里

> ID：11658104
> 
> 赞同：73
> 
> 时间：2012-07-25T20:30:07.113
> 
> 标签：eclipse

在 Eclipse 中，我单击了 File->New->Dynamic Web Project，我正在关注 Jersey 的教程，现在希望我去更改 web.xml 文件中的某些内容……但我什至找不到这个文件。我做错了什么？

![在此处输入图像描述](../Images/71df979d6ebd5201e745ed70628711f4.png)

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-25T20:39:34.933

创建动态 Web 项目时，您可以选择自动创建 web.xml 文件。如果您不标记它，则日食不会创建它...

因此，您必须在 WEB-INF 文件夹中添加一个新的 web.xml 文件。

要添加 web.xml，请单击`Next`->`Next`而不是`Finish`. 您将在向导的最后一个屏幕上找到它。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-10-09T16:44:58.887

您可以通过**Dynamic Web Project –> RightClick –> Java EE Tools –> Generate Deployment Descriptor Stub 来完成。**

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-08-17T04:09:23.377

**如果在 WEB-INF 文件夹中没有看到 web.xml 文件，**

[![在此处输入图像描述](../Images/b40387bd1a95579c7a83c37e868c12ca.png)](https://i.stack.imgur.com/grfWa.png)

**- 选择部署描述符并右键单击它。
- 然后选择 Generate Deployment Descriptor Stub**

[![在此处输入图像描述](../Images/938a3dcc316a7dac136a2017a1f1dea7.png)](https://i.stack.imgur.com/pinrD.png)

**最后你得到 web.xml 文件。**

[![在此处输入图像描述](../Images/35c8316759b73cbc3ee6db4dafddec13.png)](https://i.stack.imgur.com/E1NLz.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-02T23:49:00.830

当您打开 Eclipse 时，您应该单击**File** → **New** → **Dynamic Web Project**，并确保您选中了**Generate`web.xml`**，如上所述。

如果您已经创建了项目，您应该转到该`WebContent/WEB-INF`文件夹​​，打开`web.xml`，然后放入以下行：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>Application Name </display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-05-17T15:05:54.647

可能是您的项目不是 JEE 本质，要执行此操作**Right Click -> Properties -> Project Facets 并单击 Convert to facet 并检查 dynamic web module 和 ok**。现在您将能够看到 Java EE 工具。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-07T01:49:13.263

按照以下步骤使用现有的动态 Web 项目在 Eclipse 中生成 web.xml

1.  右键单击创建的动态 Web 项目
2.  鼠标悬停在 Java EE 工具上
3.  单击生成部署描述符存根
4.  现在您可以在 WEB-INF 文件夹中看到 web.xml 文件

[![在此处输入图像描述](../Images/2e5bbad07366079b97957547ff687c40.png)](https://i.stack.imgur.com/ZAb6p.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-25T20:40:26.610

web.xml 文件应列在屏幕截图最后一行的正下方，并位于`WebContent/WEB-INF`. 如果缺少它，您可能错过了检查动态 Web 项目向导第三页上的“生成 web.xml 部署描述符”选项。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-30T19:09:33.233

如果您在创建新项目时错过了检查“生成 web.xml”选项，请不要担心如果它是您项目中的动态 Web 项目，请右键单击“部署描述符：....”并单击“生成部署描述符”存根”这将创建一个最小的 /webapp/WEB-INF/web.xml。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-10T13:06:45.317

对于 gradle / maven 项目，您可以默认使用 src/main/webapp/WEB-INF 文件夹：

```
- main
- - java
- - resources
- - webapp
- - - META-INF
- - - - context.xml
- - - WEB-INF
- - - - web.xml 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-14T06:32:35.543

如果您的部署描述符选项卡被禁用，则单击更新库它也将完成您的工作。它会创建。Web 内容中的 XML 文件

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-29T12:39:35.600

我认为您以错误的方式创建项目，我将在此处逐步发布

步骤 1：文件>>新建>>项目>>Web>>动态 Web 项目

第二步：输入项目名称>>下一步>>下一步>>

第 3 步：**选中 Generate web.xml 部署描述符复选框**

第 4 步：完成

请按照这种方式，您将在 WEB-INF 文件夹下获得 web.xml 文件

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-09T12:10:11.067

你可以试试这个：右键单击项目并选择`Java EE Tools`-> `Generate Deployment Descriptor Stub`。应该生成 web.xml。

# c# - System.Threading.Timer 和 CA1823:AvoidUnusedPrivateFields

> ID：11658105
> 
> 赞同：2
> 
> 时间：2012-07-25T20:30:08.957
> 
> 标签：c#, code-analysis

我收到此代码分析错误：CA1823:AvoidUnusedPrivateFields，对于这行代码：

```
private static Timer _timer; 
```

在我的类的构造函数中，我有这个：

```
_timer = new Timer(OnTimerElapsed, _autoResetEvent, 1000, 1000); 
```

我不需要在计时器上调用任何方法；简单地实例化它就足够了。这就是我收到 CA 警告的原因吗？这是我真的只需要抑制错误的情况，还是我错过了什么？

作为旁注，我没有收到应该在计时器上调用 Dispose() 的错误。我不应该得到那个错误吗？

**- 编辑 -**

如果我将 _timer 设为实例字段，则会收到关于未在其上调用 Dispose() 的错误。为什么静态与实例对此很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:10:26.370

您收到警告是因为您`_timer`在分配变量后没有访问该变量。

错误因变量是否为静态而不同的原因正是由于静态变量的性质。静态变量是*type*的一部分，而不是任何特定对象的一部分。它的生命周期与应用程序域的生命周期相关，而不是任何特定对象的生命周期。由于它的生命周期与应用程序域的生命周期相关联，因此应用程序域的所有者负责定时器的清理。应用程序域的所有者是 CLR 本身，因此 CLR 将清理您的静态计时器。静态分析不会抱怨您没有调用`Dispose`，因为在卸载应用程序域时将调用计时器的终结器。

如果计时器是一个实例字段，它的生命周期将与拥有它的对象的生命周期相关联。在这种情况下，计时器的清理将由拥有对象负责。在 C# 中，此类对象成员清理是使用 Disposal 模式执行的。如果您还没有实现该模式（通过实现`IDisposable`）VS 静态分析将发出警告。

话虽如此，计时器是`IDisposable`. 它们很特别，因为即使您“使用”计时器（通过在其回调中执行代码），您也不会访问计时器对象本身。因此，您可能会倾向于将`Timer`类视为一种*服务*。也就是说，你可能认为`Timer`构造函数更像是一个`RegisterForPeriodicCallbacks`方法。那是错的。 `Timer`是一个对象，在 C# 中你必须这样对待它。您必须将其`Timer`视为具有生命周期的对象，并且由其他对象确定。

如果您希望计时器的生命周期与应用程序的生命周期相关联，那么您应该创建一个类型为静态变量`System.Timers.Timer`而不是`System.Threading.Timer`. 当您希望计时器开始计时，只需调用其`Start`方法即可。

如果您希望计时器的生命周期与某个其他对象的生命周期相关联，那么您应该将它作为一个字段存储在该其他容器对象中，并确保在容器对象上正确实现 Disposal 模式。

如果您执行其中任何一项操作，所有静态分析警告都会消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T20:32:19.820

仅初始化字段不考虑使用它。你需要实际使用它:)

关于您的“编辑”，您永远不应该处理静态对象，否则将来尝试访问它时会出现问题。这就是为什么警告如你所说的那样有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:42:56.853

假设您使用的是 System.Windows.Forms.Timer，我认为此警告还会引发另一个问题。忽略此警告或删除您的`_timer`变量是安全的。但是，当您的应用程序退出时，计时器将继续运行。你可能不想要那个。我建议通过禁用计时器并可能在退出时将其处置来使用此变量。

# iis - 授予权限 IIS 7 Microsoft windows server 2008

> ID：11658106
> 
> 赞同：2
> 
> 时间：2012-07-25T20:30:10.990
> 
> 标签：iis, permissions, grant

我有一个已在 IIS 7 上部署的 Web 服务。不，每当客户端调用 Web 服务方法时，就会抛出内部服务器错误（500），我们得到“找不到源，但部分或全部事件日志无法被搜索。无法访问的日志：安全性。” 所以我花了一些时间找出这个错误的原因。似乎如果您没有对 EventLog 注册表项的权限，您将无法创建事件。您可以转到注册表项，右键单击它，然后单击权限。分配 ASPNET 用户所需的访问权限。但在 IIS 7 中，没有 ASPNET 用户帐户。我的网站的应用程序池位于 ApplicationPoolIdentity 下。所以我的问题是如何授予 ApplicationPoolIdentity 帐户的权限？？？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:23:28.787

对于 IIS 中的每个应用程序池，系统将自动创建一个用户。

例如，将存在。

```
Application Pool           User Name
-----------------------------------------------------------------
ASP.NET v4.0            => [IIS APPPOOL\ASP.NET v4.0]
ASP.NET v4.0 Integrated => [IIS APPPOOL\ASP.NET v4.0 Integrated]
DefaultAppPool          => [IIS APPPOOL\DefaultAppPool]
Classic .NET AppPool    => [IIS APPPOOL\Classic .NET AppPool] 
```

如果应用程序池在 ApplicationPoolIdentity 身份下运行，则授予该用户权限，一切都会好起来的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:45:25.600

ApplicationPoolIdentity 用户可以通过搜索 username 来分配权限 `IIS AppPool\websitename`。

例如，假设 IIS 网站是 hello.com，它会是`IIS AppPool\hello.com`.

高温高压

# actionscript-3 - Flex 静态变量不像我需要的那样工作

> ID：11658114
> 
> 赞同：1
> 
> 时间：2012-07-25T20:30:52.667
> 
> 标签：actionscript-3, apache-flex, static, global-variables

我已经搜索和搜索，但找不到答案。实际上，我一直在阅读的所有内容似乎都表明我做得正确，但它只是不起作用。

我正在开发一个网络地图应用程序。我想创建一个可供我的所有 mxml 文件（小部件）使用的 SelectionManager 类。关键是我有多个小部件，它们将从地图中选择东西，而不是在小部件之间来回发送事件，我宁愿有一个包含所有信息的类。

现在，我尝试过这样的事情：

```
package SomePackage.utils
{
    public class SelectionManager
    {
        public static var _selectionSets:ArrayCollection = new ArrayCollection();
        public static var _currentSelectionSet:Object;

       (Many static functions... ex: AddToCurrentSelectionSet, removeFromCurrentSelectionSet, CreateNewSelectionSet, etc.) 
    }
} 
```

_selectionSets 是对象的arrayCollection。_currentSelectionSet 保存 _selectionSets arrayCollection 中的对象之一。例如，我将有一个 BufferSelectionSet 和一个 QuerySelectionSet。当我打开 Buffer Widget 时，我希望 _currentSelectionSet 保存 _selectionSets 数组集合中的适当 selectionSet。这样，每当我在打开 Bufferwidget 时单击某物，它就会被添加到适当的选择集中。

现在，我的两个小部件都导入了 SelectionManager 类，但没有实例化它。发生的情况是，我的两个小部件似乎拥有不同的 SelectionManager，而我期望它们具有相同的 SelectionManager，具有相同的静态变量。

例如，如果我从缓冲区小部件中设置 currentSelectionSet，我会看到它设置为 ArrayCollection 中的对象。但是，如果我从查询小部件中查看 currentSelectionSet，它将为空。

我不确定我是否足够清楚，如有必要，我可以提供更多详细信息。就像我说的，我看了又看，没有成功。此外，我不是 Flex 和 AS 3.0 的初学者，并且在其他编程语言方面有相当多的经验。我完全被这件事难住了，也许这只是漫长的一天。

谢谢你的帮助。

补充资料：

我的小部件位于与 utils 包平行的包中，即： SomePackage.Widgets

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:49:45.537

我并没有真正找到任何令人满意的答案，所以我最终扩展了一堆类，所以我不必使用静态变量和方法。这是更多的工作，但最终提供了一个更好看的解决方案。

# c# - 如果 AutoFlush 减速系统，在密集使用时对 HDD 或类似情况不利？

> ID：11658117
> 
> 赞同：1
> 
> 时间：2012-07-25T20:30:53.727
> 
> 标签：c#

我每天写很多日志（每天数百万个字符串，最多 1 Gb 的日志）。如果我设置时`AutoFlush`我会显着降低计算机速度或“损坏”硬盘（如果这很重要，则为 SaS 15000），我很感兴趣？每次写入新行时，HDD 会做一些昂贵的额外操作（如打开文件、修改关闭等）

很可能我只是不应该使用`AutoFlush`，但有时我想用它来解决其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:51:16.637

我不确定谁对您的问题投了反对票或为什么（但我可以猜到）。

根据[http://msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush.aspx)，使用`AutoFlush`肯定会减慢你的代码。您需要进行一些测试以确定它会减慢多少，以及获取日志消息是否值得付出代价。

如果我是你，我会认真审查日志记录——你真的每天都需要那么多数据吗？我的猜测是，如果您可以消除大部分（如果不是全部），您的程序的性能将会显着提高。

如果由于某种原因您无法消除日志记录，请查看一些日志记录库，例如 log4net 或 Enterprise Logging。请参阅[如何登录 c#？](https://stackoverflow.com/questions/5057567/how-to-do-logging-in-c)了解更多信息。这些库是由那些花费太多时间的人编写并进行了彻底的性能测试的；与本地代码相比，该库不太可能包含错误或瓶颈。

# windows - 确定是否已取消 Windows 关机

> ID：11658121
> 
> 赞同：0
> 
> 时间：2012-07-25T20:31:06.407
> 
> 标签：windows, windows-services, shutdown

我有一个在 VM 中运行的服务。当用户请求关闭 VM 时，我使用该服务通过在当前登录的用户上下文中运行的用户空间程序调用 ExitWindowsEx() 来启动 Windows 关闭。

由 ExitWindowsEx() 启动的关闭可以被正在运行的其他程序取消，例如，如果它们打开了具有未保存更改的文档。

我需要从我的服务中确定关闭是否已取消。我找到了许多方法来取消或延迟服务和用户空间可执行文件的关闭，但是如果我刚刚启动的关闭已被其他人取消，我需要一种方法来通知（甚至查询）。

# sql - TSQL - 排除仅满足条件的用户

> ID：11658128
> 
> 赞同：2
> 
> 时间：2012-07-25T20:31:28.860
> 
> 标签：sql, sql-server, tsql

目标是排除或以其他方式标记只有 ItemNumber 记录的客户，**例如**“9%”。

```
 CustomerID  ItemNumber
    85610           99
    85611           11
    85611           99
    85612           13
    85612           11
    85612           98
    85613           98
    85613           99 
```

在此示例中，应排除或标记 CustomerID 86510 和 86513，因为与其记录关联的唯一 ItemNumber 类似于“9%”。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T20:34:10.747

```
SELECT CustomerID, ItemNumber
FROM dbo.table AS t
WHERE NOT EXISTS
(
    SELECT 1
    FROM dbo.table 
    WHERE CustomerID = t.CustomerID 
    AND ItemNumber NOT LIKE '9%'
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:35:07.203

```
SELECT 
    CustomerID
FROM Table T
WHERE NOT EXISTS (SELECT CustomerID FROM Table WHERE CustomerId = T.CustomerId AND ItemNumber NOT LIKE '9%') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:40:51.567

另外一个选项

```
SELECT CustomerID
FROM YourTable
GROUP BY CustomerID
HAVING MAX(CASE WHEN ItemNumber LIKE '9%' THEN 1 END) = 1
    AND MAX(CASE WHEN ItemNumber NOT LIKE '9%' THEN 1 END) IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:41:49.713

```
create table tc(CustomerID int,ItemNumber varchar(10))

INSERT INTO tc
VALUES(85610,99),
    (85611,11),
    (85611,99),
    (85612,13),
    (85612,11),
    (85612,98),
    (85613,98),
    (85613,99)

select CustomerID from tc 
where ItemNumber like '9%'
group by CustomerID 

except

select CustomerID from tc 
where ItemNumber not like '9%'
group by CustomerID 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T20:35:35.887

除非我遗漏了什么，否则为什么不只包含一个`WHERE`具有`ItemNumber NOT LIKE '9%'`

# android - 应用程序被杀死时取消Android警报

> ID：11658129
> 
> 赞同：9
> 
> 时间：2012-07-25T20:31:37.037
> 
> 标签：android, android-intent, android-alarms

我有一个 Android 应用程序，该应用程序具有在后台运行的服务，与远程服务器通信并在需要时向用户显示通知。该应用程序还具有供用户交互的活动。

要求之一是应用程序需要在早上自动启动。在一天结束时，用户可以自由地退出应用程序（退出功能会停止服务，释放唤醒锁，并让 Android 终止进程）。为了自动重新启动应用程序，我正在使用 AlarmManager 和 PendingIntent 安排警报：

```
 //create intent to alert OnStartReceiver when alarm goes off
    Intent i = new Intent(context, OnStartReceiver.class);
    i.setAction("com.pointtrace.intents.alarm");
    i.addFlags(Intent.FLAG_DEBUG_LOG_RESOLUTION|Intent.FLAG_FROM_BACKGROUND);

    //wrap inside PendingIntent so that it can be used from outside
    //our application
    PendingIntent pi = PendingIntent.getBroadcast(context, 1, i, PendingIntent.FLAG_ONE_SHOT);

    AlarmManager alarms = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

    Log.d("GXT", "Scheduling alarm action(i)=" + i.getAction());

    //set alarm to go off at wake time
    alarms.set(AlarmManager.RTC_WAKEUP, getWakeTime(), pi); 
```

OnStartReceiver 类注册为接收广播，并在发生警报时重新启动应用程序。

除非用户从任务管理器中终止应用程序，否则一切正常。如果应用程序被 Android 操作系统杀死或我调用 System.exit(0) 正常退出；它重新启动正常。但是当它从任务管理器中被杀死时，看起来几乎就像警报被取消了。

我在 Android 文档中找不到任何暗示任务管理器会取消警报的内容。我在如何正确设置警报方面做错了吗？

我试过删除标志并只使用 0 但它没有任何区别。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T20:57:42.790

> 退出功能停止服务，释放唤醒锁，并让 Android 终止进程

如果你暗示你有一个连续的`WakeLock`，除非它只在永久插入的设备上运行，否则你的用户会用鳟鱼打你。

此外，Android 可以随时终止进程。不要误`startForeground()`认为 Android 永远不会杀死您的进程的某种保证。

> 但是当它从任务管理器中被杀死时，看起来几乎就像警报被取消了。

我不知道“任务管理器”是什么，因为 Android 中没有。如果您指的是设置中正在运行的应用程序列表，然后单击强制停止，那么是的，这会取消任何未完成的警报并阻止您的应用程序再次运行，直到手动启动您的组件之一（例如，用户从启动器启动您的应用程序）。

> 我在如何正确设置警报方面做错了吗？

可能不是。强制停止绝对可以消除您的警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T20:18:16.267

我为同一个问题浪费了 1 个月的时间。最后我找到了解决方案。从 Android 版本 > 21 开始，引入了一个名为“自动启动”的选项，这意味着用户可以实际配置是否可以自动启动任何应用程序。因此，请检查您的应用是否具有自动启动权限。此设置位置可能因手机制造商而异。因此，您需要在手机设置中搜索此“自动启动”选项。即使它不起作用，也请尝试从“优化列表”中删除您的应用程序，您可以在设置中找到它。

# c++ - Qt 应用程序“内部”应用程序

> ID：11658134
> 
> 赞同：0
> 
> 时间：2012-07-25T20:32:06.920
> 
> 标签：c++, qt, coding-style

Qt 4.8.2，windows 7 x64（但我应该将其视为通用实现，而不是依赖于操作系统 - 如果可能的话 -）

这是一个概念问题，也是关于实施的问题。

我有一个（非常）简单的 QApplication。它读取带有“按钮”标签的 XML，为每个“按钮”添加一个新的 QPushButton 到布局中。这允许我根据配置文件（XML）动态生成 gui。我的问题是把它带到“下一个层次”。

我想开始将这些按钮与其他模块（例如：QDialog）相关联，然后它们会做他们必须做的任何事情。

我的最终目标是拥有一个“读取配置文件”（xml）的应用程序，并根据其信息生成与读取的模块一样多的按钮。之后，“连接”按钮“启动命令”（我现在没有更好的措辞），它将作为普通模块运行......直到您关闭它，然后您将返回菜单。

我基本上想要一个动态生成的菜单（通过读取 XML 文件），然后连接这些按钮以执行/启动我的模块。我还希望它灵活，所以如果明天我在我的 XML 中添加一个新模块并将该模块添加到 app 文件夹中，我希望它能够启动它。

我的问题是：

1.  我够清楚了吗？

2.  游戏通常如何执行流程？例如; 来自视频游戏（在大多数 AAA 中）的“菜单”通常是用动作脚本或类似的东西制作的，然后，当您选择“新游戏”或“加载游戏”等时，它会执行某些其他*模块*（因为缺少更好的词），特别是新游戏按钮和加载 DirectX 应用程序和内容之间的转换。

3.  如何开发这样的项目？我应该在一个通用解决方案中创建多个项目吗？

如您所见，我对软件设计知之甚少，因此，如果您认为我的问题太基础，并且您有一些书建议我愿意阅读有关该主题的书，我承认我更多比有点迷失，欢迎任何形式的建议。

与往常一样，如果我不够清楚或者我可以扩展某些内容，请告诉我。我感谢有关此主题的任何和各种帮助。

另外：如果有人认为我应该更改当前标签，请告诉我。我认为这些是最合适的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:38:10.880

您可能不需要将其可视化为“应用程序中的应用程序”。当你分解它时，它实际上是一个可以启动进程的应用程序，并通过 xml 文件进行配置。

> 之后，将按钮“连接”到 DLL？其他 .exe 文件？它将作为普通应用程序运行。

当您说连接到 DLL 时，我不确定您的具体意思是什么……但这真正需要做的就是从您的应用程序中启动一个子进程。如果我单击按钮 A，那么它可以在[QProcess](http://qt-project.org/doc/qt-4.8/qprocess.html)中启动 Application A。您的应用程序是父进程，并且知道它何时停止运行。

如果您提到 DLL 时的意思是您想开发其他单独编译的小部件，并且能够通过单击按钮动态加载它们，那么我认为它仍然不是另一个应用程序。您一次只能运行一个 QApplication。如果您导入包含小部件的新模块，它们可以显示在相同的现有事件循环下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:20:41.317

> 游戏通常如何执行流程？例如; 来自视频游戏（在大多数 AAA 中）的“菜单”通常是用动作脚本或类似的东西制作的，然后，当您选择“新游戏”或“加载游戏”等时，它会执行某些其他模块（因为缺少更好的词），特别是新游戏按钮和加载 DirectX 应用程序和内容之间的转换。

这是不正确的。

“大多数 AAA”是一个单一的应用程序。他们是否使用动作脚本或任何特定的脚本语言来构建他们的 GUI 是无关紧要的。游戏通常是单个应用程序；你*总是*在游戏中。无论您是在玩游戏还是坐在菜单屏幕上，它*总是运行 DirectX 或 OpenGL 或其他任何东西。*当您开始游戏时，所发生的只是游戏在应用程序中运行了一系列功能。

它们不一定排列在“模块”或外部世界可以访问甚至知道的其他结构中。它们通常不会“加载”其他代码；它只是调用应用程序中的其他函数。

它的核心与命令行应用程序没有什么不同，它等待用户输入一些输入，然后对该输入执行一些操作。

“大多数 AAA”游戏*无法满足*您的要求。您不能只是将某些内容添加到 XML 文件中，然后让他们*在*当前游戏中加载另一个游戏。他们不是那样建造的，这不是他们的目的。

如果你想要一个灵活的菜单应用程序来启动其他游戏，那么每个游戏都必须是一个单独的应用程序，并且菜单应用程序应该与所有游戏分开。在这一点上，启动游戏只是启动一个过程。这就是 Steam 和类似工具的工作方式。

# android - Android：测量每个应用程序的 GPRS 使用情况

> ID：11658137
> 
> 赞同：0
> 
> 时间：2012-07-25T20:32:15.880
> 
> 标签：android, wifi, gprs

有谁知道是否可以在应用程序的基础上测量 GPRS（和 WIFI）的使用情况？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:51:36.147

您可以使用[`TrafficStats`](http://developer.android.com/reference/android/net/TrafficStats.html)每个 UID 来衡量数据使用情况，这大致相当于每个应用程序的基础。但请注意，并非所有设备都可以使用 报告每个 UID 数据`TrafficStats`，我不完全确定原因。

# php - CakePHP 组件或其他控制器类？

> ID：11658139
> 
> 赞同：2
> 
> 时间：2012-07-25T20:32:21.793
> 
> 标签：php, cakephp, cakephp-2.0

要在控制器类之间使用相同的逻辑，我们可以创建[组件](http://book.cakephp.org/2.0/en/controllers/components.html)。但我想知道组件对自定义类有什么好处？

我们可以在另一个类中构造一个控制器类的实例。所以我们可以使用与`$MyOtherController->myAction`而不是相同的逻辑`$this->MyComponent->myAction`。
你能比较它们吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:08:40.847

CakePHP 组件和行为基本上是装饰器模式的应用。虽然您可能认为通过对类进行子类化可以获得相同的结果`AppController`，但如果您要考虑可能使用组件的所有不同组合，这将需要您创建大量子类来实现与少数几个相同的结果的组件。相反，您可以通过依赖注入随意混合和匹配组件/行为。

假设您目前有 3 个控制器子类：

1.  `MultiStepController`
2.  `SecurityController`
3.  `MultiStepSecurityController`

如果你想出一种你想要添加的新型控制器，那么你必须创建 4 个新的控制器子类：

1.  `FooMultiStepController`
2.  `FooSecurityController`
3.  `FooMultiStepSecurityController`
4.  `FooController`

`'Foo'`与仅添加到`$components`您想要在其中使用组件的任何控制器的变量相比，这是很多冗余代码和不必要的工作。

因此，从可维护性和代码重用的角度来看，在大多数情况下，组件是比子类化更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:09:29.403

关于组件类的文档：

> 单个组件的基类。组件提供可重用的控制器逻辑位，可以组合成一个控制器。组件还提供请求生命周期回调，用于在特定点注入逻辑。
> 
> 组件可以提供多个在请求周期的不同阶段触发的回调。可用的回调是：
> 
> *   initialize() - 在控制器的 beforeFilter 方法之前触发。
> *   startup() - 在控制器的 beforeFilter 方法之后触发。
> *   beforeRender() - 在视图 + 布局渲染之前触发。
> *   shutdown() - 在操作完成并且视图已经渲染但在 Controller::afterFilter() 之前触发。
> *   beforeRedirect() - 在 redirect() 完成之前触发。

您当然可以使用自定义类来实现所有这些（它仍然只是 PHP）。稍后在另一个应用程序中重用组件可能比重用自定义类容易得多。

有关更多信息，请参阅[文档](http://book.cakephp.org/2.0/en/controllers/components.html "文档")或（通常非常有用！）[API](http://api20.cakephp.org/class/component "API")。

# coldfusion - 如何将存储在 .zip 文件中的 ColdFusion 文件转换为 .war 文件编译 Coldfusion 代码？

> ID：11658140
> 
> 赞同：-2
> 
> 时间：2012-07-25T20:32:29.360
> 
> 标签：coldfusion, zip, war

我下载了 Coldfusion 10，打开了 ColdFusion 管理员，按照这些步骤操作，最后我得到的只是一个 250 MB 的 .war 文件，它与我要转换的 .zip 文件无关。我显然错过了pointcompile then package。有人可以帮忙吗？

1.  打开 ColdFusion 管理员。
2.  在存档名称字段中指定存档文件的唯一名称（无扩展名）。
3.  单击添加。出现添加新存档屏幕。
4.  在添加新存档屏幕上指定存档设置。
5.  单击创建。ColdFusion 在指定的应用程序分发目录中创建 EAR 或 WAR 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T21:24:32.280

.war 文件只是具有不同扩展名的 .zip 文件，其中包含在 servlet 容器或应用程序服务器中运行所需的文件。如果*您的*zip 文件已经包含所有这些文件（WEB-INF 等），那么您只需将文件从 .zip 重命名为 .war。

如果*您的*zip 文件只是来自站点的 CF 文件的 zip，并且您尝试将其重新部署为 .war，则在创建 .war 文件后，您需要将其解压缩，将文件复制到适当的位置，然后创建一个新的.war。

你真的提供的不多，所以我不能提供更多。

更新：我要补充一点，部署新 CF .war 的最简单方法是部署 CF 安装程序在 servlet 容器（例如 Tomcat）上创建的 .war。servlet 容器应该解压并部署它。确认 CF 正在运行后，您可以将 CF 文件（不是 .zip 文件）复制到为该应用程序创建的文件夹（默认情况下通常称为 /cfusion）。

# c# - 如何设置 SMO ScriptingOptions 以保证表的精确副本？

> ID：11658143
> 
> 赞同：16
> 
> 时间：2012-07-25T20:32:50.373
> 
> 标签：c#, sql, smo

**我正在尝试做的事情：**使用 C# 创建一个 SQL 脚本来创建现有表的*精确副本。*

**我的问题：**您将如何定义 scriptingOptions 中的选项以确保生成的脚本将创建 100% 精确的表副本？有 78 个选项，目前尚不清楚如何执行此操作。最初，我认为通过在不传递任何 ScriptingOptions 的情况下调用 table.Script() 可以获得我的表的精确副本，但这并不能解决问题（例如，除非在中指定索引，否则不会对索引进行编码脚本选项）。看来我实际上必须手动指定 ScriptingOptions 中的每个属性才能得到我想要的。我设置哪些以获得我想要的结果？准确地复制一个表并不难。

**可用的脚本选项：**以下是所有可用选项：http: [//msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scriptingoptions_properties.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.scriptingoptions_properties.aspx)

**我的代码：**

```
Server server = new Server("XXX");
Database database = new Database();
database = server.Databases["YYY"];
Table table = database.Tables["ZZZ", @"PPP"];

ScriptingOptions scriptingOptions = new ScriptingOptions();

//Define properties in scriptingOptions 

StringCollection result = table.Script(scriptingOptions);

var script = "";
foreach (var line in result) {
    script += line;
}

System.IO.StreamWriter fs = System.IO.File.CreateText(@"QQQ");
fs.Write(script);
fs.Close(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T15:27:22.337

您要设置以下内容。

1.  ClusteredIndexes = true
2.  默认 = 真
3.  全文索引 = 真
4.  索引 = 真
5.  NonClusteredIndexes = true
6.  SchemaQualify = true **（如果您想将其编写到当前架构中）**
7.  ScriptData = true **（如果要复制数据）**
8.  ScriptDrops = true **（这将在重新创建之前删除目标数据库中的表）**
9.  ScriptSchema = true **（如果您想将其编写到当前架构中）**
10.  统计 = 真
11.  触发器 = 真
12.  WithDependencies = true **（如果你想编写依赖对象的脚本）**
13.  DriAll = true **（脚本引用完整性操作，例如如果父表键不存在则不允许插入子表）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:12:50.333

我用过smo，错误是你必须考虑所有数据库对象之间的关系。在编写表格脚本时，您必须编写所有安全对象、外键、扩展属性等的脚本。- 由于关系确定脚本对象的正确顺序就我而言，确保您拥有相同的数据库对象的最佳方法是使用数据库备份。

# sql-server - 在所有数据库 SQL Server 2008 R2 上授予相同的数据库角色

> ID：11658149
> 
> 赞同：4
> 
> 时间：2012-07-25T20:33:17.560
> 
> 标签：sql-server, security, sql-server-2008-r2

有没有办法在所有数据库上授予用户相同的角色？服务器级角色仅向用户授予服务器特定选项。我想授予用户对服务器上所有数据库的只读访问权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:15:40.797

[`sp_MSforeachdb`](http://weblogs.sqlteam.com/joew/archive/2008/08/27/60700.aspx)可能会为您解决问题：

```
EXECUTE master.sys.sp_MSforeachdb '
    use [?];
    declare @user sysname = ''MyUserName''
    if db_name() not in (''master'', ''model'', ''msdb'', ''tempdb'')
    begin
        if not exists (
            select null
            from dbo.sysusers
            where name = @user
        )
        begin
            print ''Adding '' + @user + '' to '' + db_name();
            exec sp_grantdbaccess @user, @user;
        end;
    print ''Granting '' + @user + '' read access to '' + db_name();
    exec sp_addrolemember db_datareader, @user;
    end;
' 
```

# java - 依赖 jar 中的 spring appContext.xml 无法加载属性文件。

> ID：11658151
> 
> 赞同：1
> 
> 时间：2012-07-25T20:33:20.967
> 
> 标签：java, spring, properties, dependencies, classpath

我有 2 个基于 spring 的 jar 文件 - parent.jar 和 child.jar。

parent.jar 有一个 parent_applicationContext.xml 和一个属性文件，它加载如下

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="locations">
    <list>
      <value>classpath:app.properties</value>
    </list>
  </property>
  <property name="ignoreUnresolvablePlaceholders" value="true"/>
</bean>

<bean id="appBean" class="com.foo.App" >
    <property name="appName" value="${app.name}" />
</bean> 
```

child.jar 包含 parent.jar 作为依赖项，并有自己的 applicationContext.xml。但是，当我执行 child.jar 时，我看不到 parent_applicationContext.xml 能够加载 app.properties。

我看到错误消息

```
Invalid bean definition with name 'appBean' defined in class path resource [parent_applicationContext.xml]: Could not resolve placeholder 'app.name' 
```

任何线索。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:47:07.213

我设法通过在 child.jar!applicationContext.xml 中再次加载属性来解决它，就像这样，

```
<context:property-placeholder location="monitordb.properties" /> 
```

# javascript - Web 应用程序性能：SVG、Canvas 或 Dom 操作

> ID：11658163
> 
> 赞同：2
> 
> 时间：2012-07-25T20:34:23.850
> 
> 标签：javascript, performance, canvas, svg

我正在开发一个应用程序，该应用程序将显示类似于 Visio 的“框和箭头”图。有些元素是可拖放的。主要功能是不透明度、有角度的连接线和一些动画过渡。

目标平台是 webkit 浏览器、iOS 平板电脑和 android 平板电脑。

[（我看到了这个问题，但是我看到的链接没有给出两个Canvas 与 SVG 动画（效果 [过滤器] 和性能）](https://stackoverflow.com/questions/3834377/canvas-versus-svg-animations-effectsfilters-and-performance)的高级性能比较）

哪种网络技术可以为我提供这种渲染和操作的最佳性能？画布绘图、SVG 或 div/Dom 操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:41:38.637

**画布**：让您完全控制一切。您可以自己定义形状和文本以及其他小部件。你有像素级控制。

**SVG**：为您提供大量形状和效果供您使用。SVG 是 XML 格式的——请原谅我的个人偏见——我最喜欢它。

**DOM**：可能是最难使用的，因为您必须解决跨浏览器兼容性问题，但权衡的是它很容易使用 CSS 和动画或其他使用 JavaScript 的逻辑来表达效果。

表现？不太确定。您的目标平台范围很广。你只需要做一些经验或基准测试。

如果您使用常见的快捷方式（例如堆叠画布或在屏幕外绘图等），Canvas 可能会为您带来最快的性能。

当然，我的所有意见。

# jquery - 为什么在触发给定事件后 JQuery 不滚动到第一个 DOM 元素？

> ID：11658165
> 
> 赞同：0
> 
> 时间：2012-07-25T20:34:35.670
> 
> 标签：jquery, scroll

当用户提交表单“x”时，表单会通过 JavaScript 验证，并且错误消息会放置在任何有错误的元素下方。这是放置错误的代码的最后一部分：

```
errorElement: "span",
errorClass: "field-validation-error",
errorPlacement: function (error, element) {
error.insertAfter(element.closest('div'));} 
```

当用户单击`submit`并放置所有错误时，页面不会从用户所在的位置移动。我希望页面滚动到页面上的第一个错误，以便用户可以清楚地看到他做错了什么。

这可能是错误的，但我在上面的代码下面尝试了这样的事情：

```
var position = element.position;
$.scrollTop(position.top); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:39:44.237

根据您的“元素”是什么，您可以简单地做（假设元素已经是一个 JQuery 对象）：

[http://api.jquery.com/position/](http://api.jquery.com/position/)

和

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

```
$(window).scrollTop(element.position().top); 
```

请记住，如果 element 已经是您不需要做的 JQuery 对象`$(element)`。如果元素不是 jquery 对象，则它需要是 ID 或唯一选择器才能返回该元素。

**编辑：动画支持**

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
$(window).animate({"scrollTop": element.position().top}); 
```

**编辑：地址从评论中选择一个元素**

您的其他选择是为您的错误元素提供所有相同的类，这样您就可以始终（完成后）滚动到页面上的第一个错误。

```
var scrollPosition = Number($(".common-error-class:first").position.top); 
```

然后从那里你只需要调用窗口来滚动：

```
$(window).scrollTop(scrollPosition); 
```

**编辑：经过验证的工作示例**

```
//The line you are focusing on
$(window).scrollTop($("input:last").position().top); 
```

完整的 html 文件：

```
<!DOCTYPE html>

<html>

<head>

    <meta name="viewport" content="width=device-width" />

    <title>Index</title>

    <script type="text/javascript" src="/Scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#triggerScroll").on("click", function () {
                $(window).scrollTop($("input:last").position().top);
            });
        });
    </script>

</head>

<body>
    <button id="triggerScroll">Scroll</button>
    <div class="container">

<h2>Index</h2>

<form action="/Request/InvokeAction" method="post">    <input type="hidden" name="ActionID" value="10" />

<div class="editor-label"><label for="FirstName">FirstName</label></div>

<div class="editor-field"><input class="text-box single-line" id="FirstName" name="FirstName" type="text" value="" /> <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="LastName">LastName</label></div>

<div class="editor-field"><input class="text-box single-line" id="LastName" name="LastName" type="text" value="" /> <span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="Company">Company</label></div>

<div class="editor-field"><input class="text-box single-line" id="Company" name="Company" type="text" value="" /> <span class="field-validation-valid" data-valmsg-for="Company" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="BirthMonth">BirthMonth</label></div>

<div class="editor-field"><input class="text-box single-line" data-val="true" data-val-number="The field BirthMonth must be a number." data-val-required="The BirthMonth field is required." id="BirthMonth" name="BirthMonth" type="number" value="" /> <span class="field-validation-valid" data-valmsg-for="BirthMonth" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="BirthDay">BirthDay</label></div>

<div class="editor-field"><input class="text-box single-line" data-val="true" data-val-number="The field BirthDay must be a number." data-val-required="The BirthDay field is required." id="BirthDay" name="BirthDay" type="number" value="" /> <span class="field-validation-valid" data-valmsg-for="BirthDay" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="BirthYear">BirthYear</label></div>

<div class="editor-field"><input class="text-box single-line" data-val="true" data-val-number="The field BirthYear must be a number." data-val-required="The BirthYear field is required." id="BirthYear" name="BirthYear" type="number" value="" /> <span class="field-validation-valid" data-valmsg-for="BirthYear" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="BirthDate">BirthDate</label></div>

<div class="editor-field"><input class="text-box single-line" data-val="true" data-val-date="The field BirthDate must be a date." data-val-required="The BirthDate field is required." id="BirthDate" name="BirthDate" type="datetime" value="" /> <span class="field-validation-valid" data-valmsg-for="BirthDate" data-valmsg-replace="true"></span></div>

<div class="editor-label"><label for="Email">Email</label></div>

<div class="editor-field"><input class="text-box single-line" id="Email" name="Email" type="text" value="" /> <span class="field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span></div>

    <div style="clear: both;"></div>

    <button type="submit">Submit</button>

</form>

    </div>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:40:45.530

问题是您使用`element.position`的是`element.position()`. *Position*是一个 jQuery 函数，而不是一个属性。

# ruby-on-rails - 如何从 link_to 助手调用“创建”操作？

> ID：11658166
> 
> 赞同：0
> 
> 时间：2012-07-25T20:34:35.677
> 
> 标签：ruby-on-rails

我在这里看到了这个问题的答案，但不幸的是，答案不起作用。仅供参考，这是一个 Rails 2.3.11 应用程序。

我想用这个 link_to 助手针对 RESTful 资源调用 create：

```
link_to("Add", part_types_path(myid), :method => :post) 
```

现在非常非常奇怪的是，我传递给 URL 助手的 id 被 Rails 应用程序解释为“格式”！所以链接出来是：

```
/part_types.12345 
```

其中“12345”是 ID。疯狂的！

我肯定错过了一些非常基本的东西，但我从未见过 Rails 尝试将对象 id 称为格式。

这是路线条目：

```
map.resources :part_types, :collection => { :part_list => :get } 
```

这是“rake routes”的结果

```
POST   /part_types(.:format)    {:controller=>"part_types", :action=>"create"} 
```

注意没有任何类型的 id！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:30:20.170

如果方法是，则带有名称的路由`part_types`引用`index`操作，如果方法是`GET`，则引用`create`操作`POST`。这些动作都没有参数化路径（与之相反`show`，应该看起来像`/part_types/:id`）。`create`应该创建一个新记录并返回其 id - 您通常不会在请求中传递它们，因为在服务器上生成唯一 id 更容易。

您的第一个参数将被解释为格式，因为路由不带任何参数。将此与以下内容进行比较：

*   `part_type_path(1)`应该返回`/part_types/1`
*   `part_type_path(1, :json)`应该返回`/part/types/1.json`。

检查[actionpack/lib/action_dispatch/routing/mapper.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/mapper.rb#L1196)看看`resources`是如何定义的。

# c# - MonoTouch - LLVM 编译的应用程序在 System.Collections.Generic.Dictionary 的 5.3.x 中挂起？

> ID：11658167
> 
> 赞同：4
> 
> 时间：2012-07-25T20:34:37.247
> 
> 标签：c#, dictionary, xamarin.ios, deadlock

我们正在使用 MonoGame 开发一款游戏，该游戏在 MonoTouch 5.2.x 上运行良好，直到更新到 5.3.x 测试版，甚至是 5.3.5。

游戏会在加载我们的第一个关卡时锁定，并且只会在设备的发布模式下编译时发生。在模拟器或设备的调试模式下工作正常。

我们不知道问题出在哪里，直到我们使用了 Rolf Kvinge 在[此处](http://rolfkvinge.blogspot.com/2012/05/monotouch-debugging-tips.html)发布的技巧。

这是崩溃日志的有用片段：

```
0   libsystem_c.dylib               0x32bd68b0 memset$VARIANT$CortexA9 + 152
1   DrawAStickmaniPhone             0x00492e40 DrawAStickmanCore_System_Collections_Generic_Dictionary_2_int_DrawAStickman_Core_Json_Frame_TryGetValue_int_DrawAStickman_Core_Json_Frame_ (DrawAStickmanCore.dll.7.s:36462)
2   DrawAStickmaniPhone             0x004d4e3c DrawAStickman_Core_FrameCounter_OnFrameChanged (DrawAStickmanCore.dll.7.s:137904)
3   DrawAStickmaniPhone             0x00479dbc DrawAStickmanCore_DrawAStickman_Core_BaseCounter_Update_Microsoft_Xna_Framework_GameTime (DrawAStickmanCore.dll.7.s:974)
4   DrawAStickmaniPhone             0x0048694c DrawAStickmanCore_DrawAStickman_Core_ElementStateComponent_Update_Microsoft_Xna_Framework_GameTime (DrawAStickmanCore.dll.7.s:17895)
5   DrawAStickmaniPhone             0x0047ce70 DrawAStickmanCore_DrawAStickman_Core_ElementComponent_Update_Microsoft_Xna_Framework_GameTime (DrawAStickmanCore.dll.7.s:5028)
6   DrawAStickmaniPhone             0x004d72cc DrawAStickman_Core_LevelComponent_Update_Microsoft_Xna_Framework_GameTime_0 (DrawAStickmanCore.dll.7.s:138769)
7   DrawAStickmaniPhone             0x0003d170 MonoGame_Framework_Microsoft_Xna_Framework_Game__UpdateActionm__2C_Microsoft_Xna_Framework_IUpdateable_Microsoft_Xna_Framework_GameTime (MonoGame.Framework.dll.7.s:69150)
8   DrawAStickmaniPhone             0x0003d284 MonoGame_Framework_Microsoft_Xna_Framework_Game_SortingFilteringCollection_1_ForEachFilteredItem_TUserData_System_Action_2_T_TUserData_TUserData (MonoGame.Framework.dll.7.s:69246)
9   DrawAStickmaniPhone             0x0003c3bc MonoGame_Framework_Microsoft_Xna_Framework_Game_Update_Microsoft_Xna_Framework_GameTime (MonoGame.Framework.dll.7.s:67887)
10  DrawAStickmaniPhone             0x004c7664 DrawAStickman_Core_StickmanGame_Update_Microsoft_Xna_Framework_GameTime (DrawAStickmanCore.dll.7.s:133288)
11  DrawAStickmaniPhone             0x0003c674 MonoGame_Framework_Microsoft_Xna_Framework_Game_DoUpdate_Microsoft_Xna_Framework_GameTime (MonoGame.Framework.dll.7.s:68138)
12  DrawAStickmaniPhone             0x0003c284 MonoGame_Framework_Microsoft_Xna_Framework_Game_Tick (MonoGame.Framework.dll.7.s:67751)
13  DrawAStickmaniPhone             0x0003e43c MonoGame_Framework_Microsoft_Xna_Framework_iOSGamePlatform_RunTick (MonoGame.Framework.dll.7.s:70871)
14  DrawAStickmaniPhone             0x0003e39c MonoGame_Framework_Microsoft_Xna_Framework_iOSGamePlatform_Tick (MonoGame.Framework.dll.7.s:70820)
15  DrawAStickmaniPhone             0x002fe8c0 monotouch_MonoTouch_Foundation_NSActionDispatcher_Apply + 12
16  DrawAStickmaniPhone             0x006de878 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr_0 (mscorlib.dll.7.s:468944)
17  DrawAStickmaniPhone             0x00963780 mono_jit_runtime_invoke (mini.c:5792)
18  DrawAStickmaniPhone             0x009cdc04 mono_runtime_invoke (object.c:2788)
19  DrawAStickmaniPhone             0x0095aba4 native_to_managed_trampoline_MonoTouch_Foundation_NSActionDispatcher_Apply (registrar.m:19) 
```

看着这个，它似乎在这样的一行上陷入僵局：

```
Frame frame;
if (myFramesDictionary != null && myFramesDictionary.TryGetValue(index, out frame))
{
    //Some code here
} 
```

`Frame`是一个结构，`myFramesDictionary`是一个`Dictionary<int, Frame>`.

这是 MonoTouch 5.3.x 中可能存在的错误吗？如果不将我们的整个应用程序发送到 Xamarin，我不知道如何重新创建问题。

**更新**

我们禁用了 LLVM 编译器选项，它修复了挂起。

我无法创建一个小项目来重现该问题。不确定我是否要将整个应用程序发送到 Xamarin 进行调试。关于重新创建这个的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T22:38:20.640

除非你有一些*非常*奇怪的内存损坏，否则你不会在 memset 中死锁。

此外，要诊断死锁，您需要显示多个线程，因为您首先需要至少两个线程来死锁 :)

我相信你遇到了某种无限循环。您可以使用调试器中的断点或崩溃报告中第 1 帧开始处的 Console.WriteLine 轻松检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:23:20.427

我更新到 XCode 4.4 和命令行工具，这个问题就消失了。

我不确定 XCode 更新是否修复了它，或者我可能更新了 XCode 而*不是*命令行工具。

# svn - 变更列表管理工具，例如 Intellij Idea

> ID：11658170
> 
> 赞同：0
> 
> 时间：2012-07-25T20:34:48.453
> 
> 标签：svn, changelist

Intellij IDEA 在变更列表管理方面具有以下功能。我正在寻找适用于 windows 平台的类似功能。这样，我不必仅仅为了变更列表管理而打开 IDEA。

我想要 Intelij IDEA 中存在的这些功能：

1.  定义一组目录以监视更改

2.  定义一个默认的更改列表，更改的文件将放在哪里。

3.  更改默认更改列表。

4.  在可用的更改列表中移动文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:43:21.720

eclipse 对 IDEA 中的更改列表做同样的事情。查看这篇文章[滚动到关于更改的部分](http://arhipov.blogspot.com/2011/06/whats-cool-in-intellijidea-part-i.html) 。他为您提供了 eclipse 是如何做到的以及 jetbrains 如何在 IDEA 中实现它的并排视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:52:51.560

你试过[TortoiseSVN](http://tortoisesvn.net/)吗？*它可以通过检查修改*对话框轻松管理更改列表。

# html - 如何制作拉伸而不是平铺的 SVG 背景？

> ID：11658173
> 
> 赞同：46
> 
> 时间：2012-07-25T20:34:54.630
> 
> 标签：html, css, svg

我有一个想要使用的 SVG 背景，但我不知道如何让它覆盖整个页面，更不用说成为背景了。有人可以帮忙吗？

（无论是 SVG 还是背景上的 W3Schools 页面，都没有给我任何信息）。

`<object data="background.svg" type="image/svg+xml" width="100%" height="100%">`不完全有效。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2015-03-25T15:27:57.880

我想你是在问你是否可以让 SVG 像 PNG 那样扭曲和拉伸。不幸的是，这并非不可能，除非您的 SVG 代码本身是这样设置的（例如，如果您的 SVG 是由 illustrator 生成的，他们根本不会这样做）。

目前唯一的方法是手动编写 SVG 代码。例如，您可以告诉 SVG 将左上角连接到右下角，而不是绘制具有设定角度的对角线。如果你有 SVG，我可能会告诉你如何手动编码。（如果您的 SVG 像 Phrogz 的老虎一样复杂，那可能是不可能的......）

同样对于大多数现代浏览器，您可以简单地向标签添加`preserveAspectRatio="none"`属性。`svg`如果您有`.svg`文件，则需要使用 sublime 文本打开文件并将代码添加到 svg 标签（类似这样`<svg version="1.1"...(hundreds of lines of codes followed)`，您将制作`<svg version="1.1" preserveAspectRatio="none"...(hundreds of lines of codes followed)`.

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2019-06-05T11:35:07.427

我刚刚想通了。在您的`<svg>`标签上，您需要：

*   删除`width`和`height`属性例如：`width="375" height="137"`
*   添加此属性`preserveAspectRatio="none"`
*   添加 viewbox 属性（包含您刚刚删除的原始宽度和高度`viewBox="0 0 375 137"`

在包含 svg 背景的元素上的 css 文件中：

*   添加属性：`background-size: 100% 100%;`

> 对我来说关键问题是我的 svg 文件不包含 viewbox 属性。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-25T22:38:57.253

你想要 CSS3[`background-size`](https://developer.mozilla.org/en/CSS/background-size)属性：

```
div {
  height:200px;
  background:url(my.svg);
  background-size: 100% auto; /* Fill width, retain proportions */
} 
```

## 演示： http: [//jsfiddle.net/JknDr/1/](http://jsfiddle.net/JknDr/1/) ​​</h2>

如果您希望它不按比例缩放以填充容器（因此背景会拉伸和挤压），请使用`background-size: 100% 100%`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-03T15:48:52.787

我发现 Illustrator 正在添加`xml:space="preserve"`到我的 SVG 中，这会阻止背景图像拉伸以适应空间。我看到这已被弃用；但是，Illustrator 仍在添加它。一旦我将该属性更改为并按预期`xml:space="preserve"`添加`preserveAspectRatio="none"`图像比例。

# android - 带有事件触发器的后台服务 Android

> ID：11658174
> 
> 赞同：0
> 
> 时间：2012-07-25T20:35:05.180
> 
> 标签：android, event-handling, background-service

我想为Android设计一个服务，它可以随时在后台运行，并且可以触发事件，然后可以由手机上运行的应用程序处理（比如任何应用程序都可以监听 OnFling 事件）。这如何在 Android 上实现？

我已阅读[http://www.mikenimer.com/?p=671](http://www.mikenimer.com/?p=671) 和 [http://android.kgmoney.net/2010/05/08/creating-a-simple-android-service-for-background-processing /](http://android.kgmoney.net/2010/05/08/creating-a-simple-android-service-for-background-processing/)

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:53:48.500

您不可能拥有“可以始终在后台运行”的服务。用户可以并且将在用户想要时摆脱您的服务，而 Android 本身可以并且将在其算法决定时摆脱您的服务。虽然您可以使用诸如`startForeground()`减慢 Android 摆脱您的服务之类的东西，但它不会永远运行，并且用户可以自由地通过设置应用程序或任意数量的第三方任务管理器将您从轨道上删除。

此外，对于绝大多数应用程序来说，拥有一个试图永远运行的服务是一种低劣的设计。用户放弃此类服务是有原因的——它们占用的 RAM 可以专门用于用户目前更看重的应用程序。写得不好的服务也会消耗更多的 CPU、电池、带宽等。由于您拒绝实际解释您要完成的工作，我既不能告诉您用户是否会认为您的服务是合理的，也不能建议替代实现来避免“永久服务”。

`Intents`服务当然可以发送其他应用程序可以选择的广播。这是否符合您的一个需求（“我触发了一个 XYZ 事件，并且任何应用程序都可以侦听此事件并执行某些任务”），我不能说。

# java - 无法理解 JAXB 解组行为

> ID：11658181
> 
> 赞同：2
> 
> 时间：2012-07-25T20:35:25.467
> 
> 标签：java, xml, jaxb2

参考我[之前的帖子](https://stackoverflow.com/questions/11620825/xsd-for-having-2-root-elements-1-at-a-time)。我有以下代码从文件中读取 XML。

```
logger.log(Level.INFO, "testSchemaChange");
JAXBContext jaxbContext = JAXBContext.newInstance("com.store.web.ws.v1.model");
Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
JAXBElement<BookType> jeBookType = (JAXBElement<BookType>) unmarshaller.unmarshal(new File (BOOK_XML));

BookType bookType = jeBookType.getValue();
logger.log(Level.INFO, "Book recieved: " + bookType.getISBN()); 
```

我正在播种一个 XML`Book`作为我的根元素，而不是`BookList`. 只要我将包的完整路径保留在`JAXBContext.newInstance`.

不久，我有没有改变

`JAXBContext jaxbContext = JAXBContext.newInstance("com.store.web.ws.v1.model");`

到

`JAXBContext jaxbContext = JAXBContext.newInstance(BookType.class);`

我开始遇到异常`SEVERE: unexpected element (uri:"", local:"book"). Expected elements are (none)`

有人可以解释为什么会这样吗？

PS：为方便起见，我的测试类和 JAXB 生成的类在同一个包中，即`com.store.web.ws.v1.model`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:51:52.340

您看到的问题是因为`JAXBContext`不知道`ObjectFactory`包含元素`@XmlElementDecl`注释的类。`book`

当您`JAXBContext`在包名上创建一个时，它会自动拉入`ObjectFactory`该类。如果您创建一个`JAXContext`on 类，则需要显式地包含带有`@XmlRegistry`注释的类（`ObjectFactory`在这种情况下）。

# html - 使工具栏保持在 CSS 的顶部

> ID：11658189
> 
> 赞同：0
> 
> 时间：2012-07-25T20:36:04.553
> 
> 标签：html, css, web-applications, user-interface, toolbar

在我的真实网站中，我有实际内容，但这个例子就足够了。LOGO实际上是一个标志图像。工具栏也是一个图像。我使用以下代码通过简单地使用底部：0 而不是顶部：35px 将工具栏保持在底部。我基本上希望工具栏贴在页面顶部，并且只会被徽标向下推。当用户向下滚动时，工具栏应停留在页面顶部。所有内容都应该在工具栏下流动，因此 z-index 很高。我有它的方式工具栏一直骑在 35 像素。我知道原因，但我不知道如何完成我想要做的事情。

```
 <html>
                    <head>
                    <style type="text/css">
                    #logo {
                            width:100%;
                            height:34px;
                    }

                    #toolbar {
                            position: fixed;
                            top: 35px;
                            z-index:1000;
                    }
                    </style>
                    </head>
                    <body>
                            <div id="logo">LOGO</div>
                            <div id="toolbar">TOOLBAR</div>
                            <div id="content">
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                                    <p>lorem ipsum doler</p><br />
                            </div>
                    </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:39:40.640

如果没有一些 Javascript，就没有办法做到这一点。对于这种类型的功能，我会推荐[Bootstrap 的 Scrollspy 。](http://twitter.github.com/bootstrap/javascript.html#scrollspy)您实际上可以在他们的网站上看到它正在使用中。

# sql - 一次查询从三个表中获取数据

> ID：11658191
> 
> 赞同：3
> 
> 时间：2012-07-25T20:36:18.263
> 
> 标签：sql

我正在尝试一次从三个表中检索数据。表格如下所示：

*类别*

```
id
category
messageid 
```

*消息*

```
id
title
message 
```

*注释*

```
id
messageid
message 
```

我想要得到的是 1 条消息（因为我有一个`WHERE`基于 id 的子句`3`）、3 个类别（因为有 3 个类别链接到消息）和 2 条评论（因为有 2 条评论链接到消息）。

我正在尝试通过使用以下查询来检索数据：

```
SELECT categories.category, messages.id, messages.title, messages.message, comments.count, comments.id as commentid, comments.message as commentmessage
FROM categories
RIGHT JOIN 
  (SELECT id, title, message
  FROM messages WHERE messaged.id = 3) messages
ON messages.id = categories.messageid
LEFT JOIN
  (SELECT count(id), id, message
  FROM comments
  GROUP BY id, message) comments
ON messages.id = comments.messageid
ORDER BY article.id DESC 
```

但是，当运行此查询时，我得到 6 个结果：

```
category      id  title      message      count  commentid  commentmessage
test          3   the title  the message  1      6          comment 1
test          3   the title  the message  1      5          comment 2
installation  3   the title  the message  1      6          comment 1
installation  3   the title  the message  1      5          comment 2
question      3   the title  the message  1      6          comment 1
question      3   the title  the message  1      5          comment 2 
```

我期望的结果类似于：

```
category      id  title      message      count  commentid  commentmessage
test          3   the title  the message  1      6          comment 1
question      3   the title  the message  1      5          comment 2
installation  3   the title  the message  1      null       null 
```

只有三行，我应该能够获得所有需要的数据。这甚至可能吗？我做错了吗™？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T21:36:54.633

正如评论中提到的，这里有几个问题。

首先，由于您要加入三个表，因此您得到的答案是正确的。1 x 2 x 3 行 = 6。

其次，您的评论汇总并没有真正汇总任何内容。正如您在结果中看到的那样，计数始终为 1，而我希望您认为两条评论为 2。由于您在 id 上进行分组，因此对每个唯一 id 执行计数，该 id 始终为 1。我想你可能想在 messageid 上分组

```
SELECT count(*), messageid
FROM comments
GROUP BY messageid 
```

您需要执行另一个联接或单独的查询来获取评论本身。

同样正如评论中所讨论的，您通常不会以这种方式获得信息；您通常只需进行三个查询，因为其中两个关系是一对多的。如果您的类别很短（并且您使用的是 SQL Server），您可以将类别压缩到它们自己的列中（即“测试、安装、问题”）。这是您将如何做到的。

```
select id, title, message,
       (select CAST(category + ', ' as nvarchar(max))
        from @Categories c where messageid = m.id
        for xml path('')) as Categories
from @Messages m
where m.id = 3 
```

实际上，有几种方法可以做到这一点，但这又快又脏。然后，您只需要一个额外的评论查询。您可以像这样加入上一个查询并在两行中​​获取所有信息

```
select m.id, title, m.message,
       (select CAST(category + ', ' as nvarchar(max))
        from @Categories c where messageid = m.id
        for xml path('')) as Categories,
        cm.message
from @Messages m
left outer join @Comments cm on m.id = cm.messageid
where m.id = 3 
```

但同样，您可能只想进行额外查询以避免重复信息。

最后，我想展示您可能希望如何进行评论计数。

```
select m.id, title, m.message,
       (select CAST(category + ', ' as nvarchar(max))
        from @Categories c where messageid = m.id
        for xml path('')) as Categories,
        CommentCount,
        cm.message
from @Messages m
left outer join 
(   
    select messageid, COUNT(*) CommentCount
    from @Comments 
    group by messageid
) rsCommentCount on rsCommentCount.messageid = m.id 
```

[最后，这是一个显示该工作的链接。](https://data.stackexchange.com/stackoverflow/query/75988)

# iphone - 在 UINavigationController 之上呈现模态视图控制器

> ID：11658193
> 
> 赞同：4
> 
> 时间：2012-07-25T20:36:25.440
> 
> 标签：iphone, ios, uinavigationcontroller, uikit, modalviewcontroller

我的应用程序位于 UINavigationController 下方，因此位于 UINavigationBar 下方。我想在这个 UINavigationBar 的顶部呈现一个模态视图控制器，因为我写的控制器如果在它下面没有意义（也就是说，我想在显示这个视图控制器时隐藏导航栏）。

用这段代码展示它：

```
 ukc = [[UnlockKeyboardViewController alloc] init];
    [self presentModalViewController:ukc animated:NO]; 
```

使模态视图控制器位于 UINavigationBar 下方。当我显示此模式视图时，不应显示 UINavigationBar。我怎么能绕过呢？

PS：这是一个越狱应用，所以没有Interface Builder。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T20:42:45.373

```
[self.navigationController presentModalViewController:ukc animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:38:59.090

处理相关问题的额外信息：

note173 的答案`animated:YES`也适用。用户将看到`ukc`的视图在导航堆栈上向上滑动。

如果您随后需要关闭`ukc`并返回`self`的视图，请执行以下操作：

```
 [self.navigationController dismissModalViewControllerAnimated:NO];
        [self.navigationController dismissModalViewControllerAnimated:YES]; 
```

第一个电话取消`ukc`。第二个调用关闭导航控制器。用户看到的是`ukc`' 的视图向下滑动以显示`self`' 的视图，并瞥见其后面的导航堆栈。

因此，您在这里拥有的是一种直接从导航堆栈切换到其他常规视图控制器，然后返回到基本视图控制器的方法，所有这些都带有具有顺序意义的动画。

（如果您的目标是在导航堆栈和 之间来回切换，则只需一次调用即可`ukc`关闭-这会将' 的视图向下滑动以显示导航堆栈。）`ukc``self.navigationController dismissModalViewControllerAnimated:YES];``ukc`

请注意，这些方法在 iOS 5 中已被弃用。我假设`presentViewController`并且`dismissViewControllerAnimated`会做同样的事情，但我还没有测试过它们。

# php - 从用 PHP 完成的 API 获取/解析 XML 数据

> ID：11658194
> 
> 赞同：0
> 
> 时间：2012-07-25T20:36:30.863
> 
> 标签：php, xml, api, parsing, ups

我正在我的网上商店安装一个 UPS 运输计算器 API，它可以正确获取价格，这太棒了！不过，我找不到任何方法将这些价格转换为有用的格式。我想将它们用作 php 变量。

对于此示例，我们将调用我的购物车 cart.php。

该 api 由一个名为 ups.php 的文件执行。

当客户将商品放入购物车并填写邮政编码时，他们单击提交按钮，然后他们被定向到运行 ups.php 脚本并在页面上显示数据的新购物车页面（稍后我将删除该页面）所以它可以在后台运行）。如果这些文件中的任何一个是 .xml 文件，我可能会学习如何解析 xml 数据或在 php 中使用 simpleXML 命令......但他们似乎总是想要一个 xml 文件的位置，而我没有。有谁知道如何让我的一个 PHP 文件中包含的 XML 数据可用作 PHP 变量？

以下是 ups.php 中的一些代码：

```
 <?php
      $ch = curl_init("https://www.ups.com/ups.app/xml/Rate");
        curl_setopt($ch, CURLOPT_HEADER, 1);
        curl_setopt($ch,CURLOPT_POST,1);
        curl_setopt($ch,CURLOPT_TIMEOUT, 60);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
        $result=curl_exec ($ch);
    echo ''. $result. '';
        $data = strstr($result, '<?');
        $xml_parser = xml_parser_create();
        xml_parse_into_struct($xml_parser, $data, $vals, $index);
        xml_parser_free($xml_parser);
        $params = array();
        $level = array();
        foreach ($vals as $xml_elem) {
         if ($xml_elem['type'] == 'open') {
        if (array_key_exists('attributes',$xml_elem)) {
             list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']);
        } else {
             $level[$xml_elem['level']] = $xml_elem['tag'];
        }
         }
         if ($xml_elem['type'] == 'complete') {
        $start_level = 1;
        $php_stmt = '$params';  
        while($start_level < $xml_elem['level']) {
             $php_stmt .= '[$level['.$start_level.']]';
             $start_level++;
        }
        $php_stmt .= '[$xml_elem[\'tag\']] = $xml_elem[\'value\'];';
        eval($php_stmt);
         }
        }
        curl_close($ch);
        return $params['RATINGSERVICESELECTIONRESPONSE']['RATEDSHIPMENT']['TOTALCHARGES']['MONETARYVALUE'];
    }
?> 
```

当我运行这个 .php 文件时，我的页面上的文本输出如下所示：

```
HTTP/1.1 100 Continue HTTP/1.1 200 OK Date: Wed, 25 Jul 2012 20:27:46 GMT 
Server: Apache X-Frame-Options: SAMEORIGIN Pragma: no-cache 
Content-Length: 1589 
X-Powered-By: Servlet/2.5 JSP/2.1 
Vary: User-Agent Content-Type: application/xml Bare Bones Rate Request1.00011Success03Additional Handling has automatically been set on Package 1.Your invoice may vary from the displayed reference ratesLBS120.0USD65.56USD8.50USD74.06USD65.56USD8.50USD74.06120.0LBS120.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:17:32.103

嗯，我明白了。这是新代码...更短。方式更简单。

我使用了explode()的php命令；只是普通的数组语法， $newvariable = $existing_array [key#];

感谢您的评论！

```
 <?php
    $ch = curl_init("https://www.ups.com/ups.app/xml/Rate");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch,CURLOPT_POST,1);
    curl_setopt($ch,CURLOPT_TIMEOUT, 60);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
    $result=curl_exec ($ch);                    
    $upsout = (explode('USD', $result, 15));
    $handling = $upsout[3]; 
    echo "Shipping cost is $";
    echo $handling; 
    curl_close($ch);
} 
```

?>

# javascript - 记住动态添加的输入元素及其值

> ID：11658196
> 
> 赞同：0
> 
> 时间：2012-07-25T20:36:32.637
> 
> 标签：javascript, ruby-on-rails, dynamic, file-upload

我有一个正在构建的页面创建向导，我允许用户向页面添加最多 3 个图像。我目前使用的代码完成了工作，但它并没有像我想要的那样工作。在我的页面向导中，这是包含文件输入的 html：

```
<div class="pictures">
    <label>Add Pictures </label><span>(Maximum: 3)</span>
    <span id="input_container"></span>
    <a href="javascript:addPic()">add</a> |
    <a href="javascript:rmvPic()">remove</a>
</div> 
```

我的javascript看起来像这样：

```
var picNum = 0;

function addPic() {
    if (picNum < 3) { picNum++;
        var input = document.createElement('input');
        input.setAttribute('type', 'file');
        input.setAttribute('name', 'picture_' + picNum);
        input.setAttribute('id', 'picture_' + picNum);

        var container = document.getElementById('input_container');
        container.appendChild(input);
    }
}

function rmvPic() {
    if (picNum > 0) {
        var container = document.getElementById('input_container');
        container.removeChild(document.getElementById('picture_' + picNum));
        picNum--;
    }
} 
```

当前的设置允许用户动态地将他们想要的图像数量添加到他们的页面，但是在他们提交表单并返回编辑页面后，他们添加的所有元素现在都从页面中删除。我希望这样当用户回来并想要更改图像时，向导会记住他们添加的图片数量以及他们拥有的值。

我不知道我说的是否有道理，所以如果您需要更多信息，我愿意提供。如果你需要知道的话，我正在使用 ruby​​ on rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:22:41.640

当您说“返回编辑页面”时，我假设您的意思是页面加载发生了。如果是这种情况，那么您将丢失添加图像的提交页面的状态（javascript vars 将被重置）。如果您执行了提交，则服务器上应该存在您要查找的值。因此，在重新加载编辑页面时，您需要从服务器（ajax）请求值或在页面范围内呈现它们。

我不清楚您如何在页面之间导航或如何存储提交的值，所以我在这里提出了很多假设。

简而言之，HTML 是无状态的，因此您需要一种在页面之间存储值的方法。您可以存储在服务器上或本地存储（在 cookie 或本地缓存中）。

如果没有更清楚地了解您的应用程序的结构，我无法推荐一种方法。

# jquery - 有没有办法在不使用 jqGrid 的情况下使用 jqGrid 高级搜索？

> ID：11658203
> 
> 赞同：1
> 
> 时间：2012-07-25T20:36:43.797
> 
> 标签：jquery, search, jqgrid

有没有办法在不使用 jqGrid 的情况下使用 jqGrid 高级搜索？

我的意思是，我有一个`ul`列表，我想使用 jqGrid 这个惊人的高级搜索。

我想我可以有一个按钮，打开高级搜索窗口，然后执行 ajax 发布。所以我可以使用javascript来处理json结果来更新我的ul。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:10:56.283

这样的事情怎么样？这是更容易看到的小提琴：[DEMO](http://jsfiddle.net/xugEN/)

```
$(function(){
$('#search').dialog({width:'400px',buttons:{"Search":function(){$(this).find('input').keyup();}}});
$('#search').find('input').on('keyup',function(){
    console.log('selectValue:' + $('select').val());
    var lis = $('#searchMe').find('li');
    var inputVal = $(this).val();
    lis.each(function(){
        console.log(inputVal + '  :  ' + $(this).html()); 
    var match = false;
    switch ($('select').val()){
        case '0':
            if($(this).html()==inputVal)
                match=true;
            break;
        case '1':
            if($(this).html().indexOf(inputVal)>=0)
                match=true;
            break;
        case '2':
            if($(this).html().indexOf(inputVal)==0)
                match=true;
            break;
        case '3':
            if($(this).html().indexOf(inputVal)==$(this).html().length-inputVal.length)
                match=true;     
    }
    if (inputVal.length==0)
        match = true
    if (inputVal.length>$(this).html().length)
        match = false
    if (match)
        $(this).removeClass('hidden');
    else
        $(this).addClass('hidden');   
});

});
});​ 
```

# ruby-on-rails - 路由错误没有路由匹配

> ID：11658204
> 
> 赞同：0
> 
> 时间：2012-07-25T20:36:45.247
> 
> 标签：ruby-on-rails, routing, controller

很抱歉再次打扰，但这些路线让我发疯，稍后在我的应用程序上，用户创建新车时，它必须显示用户推送“新车”时创建的汽车。

```
<div class="container">
    <h2>new car registration</h2>

    <%= form_for ([@user,@car]) do |f| %>
      <div><%= f.label :brand %><br />
      <%= f.text_field :brand %></div>

      <div><%= f.label :color %><br />
      <%= f.text_field :color %></div>

      <div><%= f.label :model %><br />
      <%= f.text_field :model %></div>

      <div><%= f.label :year %><br />
      <%= f.text_field :year %></div>

      <div><%= f.submit "new car",:class => "btn btn-primary" %></div>
    <% end %>
    <br />
    <%= link_to "Back", current_user,:class => "btn btn-primary"  %>
  </div> 
```

好的，我的 Carscontroller 是这样的：

```
class CarsController < ApplicationController
def new
    @user = User.find(params[:user_id])
    @car = @user.car.build
end

def create
    @user = User.find(params[:user_id])
    @car = @user.car.build(params[:car])
      if @car.save
        #flash[:notice] = "new car created success"
        redirect_to user_car_path#current_user, :flash => { :notice => "car created!" }
      else
        redirect_to new_user_car_path ,:flash => { :notice => "sorry try again :(" }
      end
end

def show
  @car = current_user.car.find(params[:id])
  #@car = Car.find(params[:id])
  #redirect_to user_car_path
end

def index
    @car=Car.all
    respond_to do |format|
    format.html  #index.html.erb
    format.json  { render :json => @car }
  end
 end
end 
```

所以，当用户推新车时，它会显示

```
Routing Error

No route matches {:action=>"show", :controller=>"cars"}
Try running rake routes for more information on available routes. 
```

而不是展示新车

这是我的路线.rb

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :users do
resources :cars 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:08:33.723

你的表演动作应该是这样的：

```
 def show
    @user = User.find(params[:user_id])     
    @car = @user.cars.find(params[:id]) 
    redirect_to user_car_path(@user, @car)  
 end 
```

如果这不起作用，请告诉我。

**编辑：**您的 routes.rb 中有一个错误，它缺少附加关键字`end`。你这样做就解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:58:25.073

尝试：

```
redirect_to user_car_path(@user, @car) 
```

[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:41:17.463

你能发布你的 config/routes.rb 文件吗？我几乎认为您没有正确设置嵌套路由，但是查看该文件会有所帮助。

# sqlite - 向核心数据添加属性但无法获取 SQL 文件以匹配

> ID：11658210
> 
> 赞同：0
> 
> 时间：2012-07-25T20:37:06.080
> 
> 标签：sqlite, core-data, ios4, iphone-sdk-3.0, core-data-migration

好的，所以我更改了 xcdatamodel 以在所有 3 个新“表”上包含一个新属性，默认值为 1。我对 Core Data 相当陌生，但非常习惯于 SQL 和 SQLite 数据库。我清理了 iphone 模拟器，使用 addPersistentStoreWithType:NSSQLiteStoreType 的“特殊”选项进行构建，该选项进行了轻量级迁移并立即生效。我可以更改我的谓词以包含这个新属性，这很好。

我应该注意，我有一个现有的 .sqlite 文件，该文件是项目的资源，在编译/运行时会被复制到应用程序中。这个 sqlite 文件在 iphone 模拟器上永远不会改变。

我现在需要获取我现有的数据行并将其中一些值更改为 2 或 3 用于排序和显示目的。我希望轻量级迁移会给我一个新的 sqlite 文件，我可以将它复制回一个不错的位置，然后使用 Navicat 更改这些值并覆盖 xcode 资源中的 sqlite 文件并删除特殊选项位并保持良好状态. 但是我没有得到一个新的 sql 文件，而是做了一些其他的“魔法”。

因为它看起来像 Core Data 只是接受属性并向它们添加 Z 我尝试添加 ZATTRIBUTENAME 列并使用我的新 xcdatamodel 文件但我收到错误“用于打开商店的模型与用于创建商店的模型不兼容” .

我不在乎苹果说不要用 SQL 编辑器编辑这些文件，因为它可能会把事情搞砸。所以请不要告诉我你的“不应该那样做”。不难看出核心数据方案和 sql 中发生了什么。问题是我无法使用新属性来编辑新的 sqlite 文件。

简而言之，我想我只是想弄清楚如何获取由新 xcdatamodel 生成的新 sqlite 文件，然后我可以复制和编辑该文件。我已经研究了几天，运气不好。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:47:35.823

首先，你会原谅我指出“你不应该那样做”。;-)

其次，您似乎只需要生成一个新的“种子”文件即可包含在您的应用程序中。显然，该文件没有被更改。根据您的描述，它不是核心数据文件。

至于你迁移后的新核心数据文件，是的，它是一个具有新数据模型的新文件，旧的没有了。您当然可以打开该文件并摆弄它，或者您可以使用代码中的核心数据来完成。

我是这样做的：在您的项目中，编写一些代码只是为了生成新的种子文件（它可以是核心数据，或者只是使用 sqlite API），并在成功创建后禁用或删除代码新版本。您现在可以将此文件复制到您的包中并作为种子文件提供。

# google-app-engine - 按父实体过滤数据存储结果

> ID：11658214
> 
> 赞同：2
> 
> 时间：2012-07-25T20:37:26.100
> 
> 标签：google-app-engine, google-cloud-datastore, go

Python 已经回答了这个问题： [如何从具有特定父级的 GAE 数据存储中获取所有记录？](https://stackoverflow.com/questions/7868333/how-to-get-all-records-from-gae-datastore-with-particular-parent)

我如何在 Go 中做到这一点？我想做类似的事情：

```
t := new(TagRecord)
k, err := datastore.DecodeKey(r.URL.Path[1:])
...
_, err = datastore.NewQuery("TagRecord").
  Filter("Parent =", k). 
  Order("-CreatedAt").
  Limit(1).
  Run(c).Next(t) 
```

...但这会因以下错误而惨遭失败：

```
datastore: query has no more results 
```

当我尝试按其他属性进行过滤时，包括那些硬编码到过滤器中的属性和那些通过 URL 传递的属性，查询会正常运行并使用正确的属性填充 t。我的问题能以多么令人屈辱的简单来解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:41:36.503

在这里让你绊倒的是父查询不使用Filter()。相反，您使用[祖先约束](https://developers.google.com/appengine/docs/go/datastore/reference#Query.Ancestor)：

```
q := datastore.NewQuery("TagRecord").
    Ancestor(k).
    Order("-CreatedAt").
    Limit(1)

// etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:47:05.673

确保您还为此特定查询定义索引并上传索引配置文件

# python - Django urlpatterns 不匹配

> ID：11658215
> 
> 赞同：0
> 
> 时间：2012-07-25T20:37:40.947
> 
> 标签：python, django, url-pattern

我一直在尝试一切，但我无法让这些数字匹配。我在这里错过了什么吗？像非默认模块？

```
    找不到页面 (404)
    请求方法：GET
    请求网址：http://example.com/blog/1/1/1/
    使用 blog.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式：
    ^blog/(?P\d{4})/(?P\d{2})/(?P\d{2})/$
    ^博客/(\d+)/(\d+)/(\d+)/$
    当前 URL 与其中任何一个都不匹配。

```

另外，我的 urls.py 文件：

```
from django.conf.urls import patterns, include, url                                                  
import views                                                                                         
from views import hello_world, date_try, blog_test                                                   

urlpatterns = patterns('',                                                                           
    url(r'^blog/(?P<year>\d{4})/(?P<month>\d{2})/(?P<day>\d{2})/$', views.date_try),                 
    url(r'^blog/(\d+)/(\d+)/(\d+)/$', 'date_try'),                                                   
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:55:16.573

~~我认为`\d{4}`只会匹配 4 位数字。试试`\d{1,4}`。~~

看起来 Django 认为你的 URL 是空的。你是如何运行 Django 的？[这个答案](https://stackoverflow.com/questions/9298335/empty-current-url-for-django-deployed-with-nginx-and-fastcgi)有用吗？

# objective-c - Objective-C：无法实例化一个类来创建 UINavigationController 子视图

> ID：11658216
> 
> 赞同：0
> 
> 时间：2012-07-25T20:37:41.877
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我正在尝试（在 XCode 中）创建一个选项卡式应用程序，该应用程序在其中一个选项卡中包含一个 UINavigationController，用于显示“FourthViewController”，然后当在该“FourthViewController”中按下按钮时，一个新的“ SlideViewController" 被推到 UINavigationController 上（呸！）。我在理解如何使 UINavigationController 从 FourthViewController 或 SlideViewController 中推送新的 ViewController 时遇到问题。我包括了一个流程图和一些代码，试图让我更清楚我在做什么。（为了记录，这是一个餐厅的应用程序，这就是为什么会有像“shrimpquesadilla.jpg”这样的名字。）

以下是流程图的链接，我没有足够的声誉将其嵌入帖子中：http: [//i.imgur.com/lZVdn.jpg](http://i.imgur.com/lZVdn.jpg)

DemoTabbedAppDelegate.h

```
 @interface DemoTabbedAppDelegate : UIResponder <UIApplicationDelegate,
                                     UITabBarControllerDelegate>
    {
        UINavigationController *globalUINavigationController;
    }
    ... //other syntheses
    @synthesize globalUINavigationController; 
```

DemoTabbedAppDelegate.m

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:
                    (NSDictionary *)LaunchOptions
    {
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        ... /creating the first three tab ViewControllers
        globalUINavigationController = [[UINavigationController alloc] initWithNibName:
                    @"DemoTabbedFourthViewController" bundle:nil];
        ... //setting last tab title and image
        UIViewController *viewController4 = [[DemoTabbedFourthViewController alloc]
                    initWithNibName:@"DemoTabbedFourthViewController" bundle:nil];
        [globalUINavigationController pushViewController:viewController4 animated:YES];
        ... //Starting the TabBarController and making it the rootViewController
    } 
```

DemoTabbedFourthView.m

```
 //initialization and all that junk
    - (void)goToSlide:(UIImage *)image
    {
        DemoTabbedSlideViewController *d = [[DemoTabbedSlideViewController alloc]
                                            initWithImage:image];
        [globalUINavigationController pushViewController:d animated:YES];
        NSLog(@"test");
        //what goes here to call push on the UINavigationController?
    }

    - (void)clickQuesadilla:(id)sender
    {
        [self goToSlide:[UIImage imageNamed:@"shrimpquesadilla.jpg"]];
    } 
```

DemoTabbedSlideViewController

```
 - (id)initWithImage:(UIImage *)image
    {
        self = [super init];
        imageView = [[UIImageView alloc] initWithImage:image]; 
        NSLog(@"test 2");
        return self;
    } 
```

如果您需要更多信息，请告诉我，我已尽力说明这一点。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:43:29.643

我认为问题可能在于您如何初始化导航控制器。当您实例化导航控制器时，请尝试使用`initWithRootViewController:`而不是`initWithNibName:`.

此外，从您的 DemoTabbedFourthView 的 .m 中，您可以通过访问其`navigationController`属性然后`pushViewController:animated:`从中调用来获取指向它所在的导航控制器的指针：

```
[self.navigationController pushViewController:d animated:YES];
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:46:32.270

这种类型的应用程序实际上是 Storyboards 的典型代表。你有什么理由不喜欢使用它们吗？

您可以轻松地在所有这些视图之间布置带有 Segue 的 Storyboard，并让框架为您处理所有视图之间的导航。

# .net - 优化许多html文件的下载

> ID：11658219
> 
> 赞同：1
> 
> 时间：2012-07-25T20:37:57.543
> 
> 标签：.net, performance, optimization

我有大约一百万个指向公共 Web 服务器上的 HTML 页面的 URL，我想将它们保存到我的磁盘中。每一个的大小都差不多，大约 30 KB。我的 url 列表被平均分配在磁盘上的 20 个文件夹中，因此为简单起见，我为每个文件夹创建一个[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)，并且在每个任务中我依次下载一个 URL 一个接一个。所以这随时给我大约 20 个并行请求。我使用的是一个相对糟糕的 DSL，5mbps 连接。

这代表了几 GB 的数据，因此我预计该过程需要几个小时，但我想知道是否可以使该方法更有效。我是否有可能充分利用我的联系？我该如何衡量呢？20 次并行下载是一个好数字还是我应该向上或向下拨号？

语言是 F#，我对每个 url 使用 WebClient.DownloadFile，每个任务一个 WebClient。

====================================

编辑：产生巨大差异的一件事是在请求中添加了某个标头：

```
let webClient = new WebClient()
webClient.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate") 
```

这将下载大小从大约 32k 减少到 9k，从而极大地提高了速度并节省了磁盘空间。感谢 TerryE 提到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:45:40.317

如果您使用的是下载器 API，请确保它正在发出

> **接受编码**：gzip，放气

请求标头，以便您正在抓取的网站知道返回压缩的 HTML。（如果客户端使用此请求标头让服务器知道它将接受压缩数据流，则大多数 Web 服务器将被配置为压缩 HTML 数据流。）

这将使传输的数据减少大约 4 倍。（例如，此页面是 40K 原始 HTML，但只有 10K 传输到我的浏览器（HTML 已压缩）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:55:10.450

我只会并行化，直到达到连接速度的极限。如果每个请求都使您的 DSL 连接饱和，那么并行运行它们不会为您带来任何好处，并且可能会阻止您。

[首先使用http://wowrack.speedtest.net](http://wowrack.speedtest.net)之类的工具衡量您的容量。然后并行化，直到您的吞吐量达到此值。有多种方法可以监控您当前的网络使用情况，最简单的方法是转到 Windows 任务管理器并点击网络选项卡。

还要确保您保持与服务器的连接打开，而不是为每个请求重新打开它。这将导致不必要的开销。

# postgresql - 奇怪的连接错误 - JDBC 找不到数据库，但 psql 可以

> ID：11658224
> 
> 赞同：3
> 
> 时间：2012-07-25T20:38:20.277
> 
> 标签：postgresql, jdbc

使用 JDBC 连接到数据库时出现连接错误。但是，我可以使用 psql 连接到同一个数据库。这是我的连接字符串：

```
"jdbc:postgresql://127.0.0.1:5432/sample?user=postgres&password=postgres&loglevel=2" 
```

我在连接时看到以下日志，然后是 PSQLException。

```
16:33:49.425 (1) PostgreSQL 9.1 JDBC4 (build 901)
16:33:49.431 (1) Trying to establish a protocol version 3 connection to 127.0.0.1:5432
16:33:49.443 (1)  FE=> StartupPacket(user=postgres, database=sample, client_encoding=UTF8, DateStyle=ISO, extra_float_digits=2)
16:33:49.448 (1)  <=BE AuthenticationReqMD5(salt=da8b7230)
16:33:49.449 (1)  FE=> Password(md5digest=md5dc7d3827e761b7b18f553d6bdd15fa21)
16:33:49.451 (1)  <=BE AuthenticationOk
16:33:49.467 (1)  <=BE ErrorMessage(FATAL: database "sample" does not exist)
org.postgresql.util.PSQLException: FATAL: database "sample" does not exist 
```

但是，我可以使用 psql 命令正常连接

```
$ psql -U postgres sample
psql (9.1.4)
Type "help" for help.

sample=# 
```

我还能尝试隔离问题吗？

# css - CSS 段落元素的问题

> ID：11658228
> 
> 赞同：0
> 
> 时间：2012-07-25T20:39:04.263
> 
> 标签：css

我需要让内容出现在 contentheader div 下方并包装 imagebox div 并且不与 imagebox div 重叠。p 内容应围绕 contentheader 和 imagebox。

这是它应该是什么样子的小提琴：http: [//jsfiddle.net/NinjaSk8ter/nrJHP/](http://jsfiddle.net/NinjaSk8ter/nrJHP/)

我的页面中有完全相同的代码，但是 p“内容”没有围绕 contentheader 和 imagebox“图像”：

[http://www.northernvirginiapaintingcontractor.com/](http://www.northernvirginiapaintingcontractor.com/)

这是标记：

```
 <div id="mid-feature">
    <div id="mid-featureleft" class="rounded">
        <div class="contentheader">
            <h1>Georgio Versari Painters & Artisans</h1>
        </div>
        <div class="imagebox">IMAGE
        </div>
        <p>Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content Content</p>
    </div>
    <div id="mid-featureright" class="rounded">

    </div>
    <div style="clear: both;">
    </div>
</div> 
```

这是CSS：

```
#mid-feature {
width:925px;
margin:0 0 0 0;
position:relative;
/*overflow:hidden;*/  
/*background-color:Olive;*/
}
#mid-feature h1 {
color: #399DD6;
font-family: Arial;
font-size:17px;
}
/*#mid-feature p {
color: #0C2A55;
margin:29px 0 0 0;
position: absolute;
font-size:12px;
float: left;
z-index: 3;
line-height:14px; 
padding: 5px 5px 5px 5px;
}*/
#mid-featureleft {
height:250px;
width:609px;
margin: 12px 0 0 0;
float:left;
position:relative;
background-color:#E7EFF7;
}
#mid-featureleft p {
/*color: #0C2A55;*/
color:Red;
margin:0;
font-size:12px;
line-height:14px; 
margin-top: 27px;
padding: 5px 5px 5px 5px;
}
#mid-featureleft .contentheader {
height:29px;
width:286px;
text-align:left;
line-height:29px;
display: block;
float: left;
margin:0 0 0 0;
padding: 0 0 0 6px;
position:relative;
z-index: 1;
background-color:red;
}
#mid-featureleft .contentbox {
height:250px;
width:609px;
display: block;
float: left;
margin:0 0 0 0;
position:absolute;
background-color:blue;
}
#mid-featureleft .imagebox {
height:200px;
width:292px;
display: block;
float: right;
margin:0 0 0 317px;
position:absolute;
z-index: 2;
background-color:green;
} 
```

如果有人能告诉我为什么这在 Fiddle 中有效，但在我的页面中无效，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:56:45.013

您的小提琴和您的代码之间有两个区别，这就是导致意外行为的原因。在您的`#mid-featureleft .imagebox`定义中，您正在添加一个`position:absolute`属性，这会导致绿色框覆盖文本。然后你有一个`margin:0 0 0 327px`属性将文本推到图像下方。

如果从 CSS 中删除这两个属性，则包装的行为与小提琴中的行为相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:57:40.737

您应该从样式中获取`margin`和`position`属性。`#mid-featureleft` `.imagebox`

# solver - 模态认知逻辑的求解器

> ID：11658236
> 
> 赞同：4
> 
> 时间：2012-07-25T20:39:35.233
> 
> 标签：solver, smt, modal-logic

模态认知逻辑（又名知识逻辑）是否有任何（类似 SMT 的）求解器？

我需要一阶（不仅仅是命题）案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:53:25.050

您可以尝试模型检查器 DEMO（动态认知模型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:42:02.390

以下是一些相关链接：

模态逻辑求解器：

*   [http://www.cs.man.ac.uk/~schmidt/tools/](http://www.cs.man.ac.uk/~schmidt/tools/)
*   [http://www.irit.fr/Lotrec/](http://www.irit.fr/Lotrec/)
*   [http://twan.home.fmf.nl/moltap/index.html](http://twan.home.fmf.nl/moltap/index.html)
*   [http://www2.tcs.ifi.lmu.de/~mlange/papers/m4m-6.pdf](http://www2.tcs.ifi.lmu.de/~mlange/papers/m4m-6.pdf)

描述逻辑推理器：

*   [http://www.cs.man.ac.uk/~sattler/reasoners.html](http://www.cs.man.ac.uk/~sattler/reasoners.html)

动态认知建模，在 Pal 的回答中提到。

*   [http://homepages.cwi.nl/~jve/demo/DEMO.pdf](http://homepages.cwi.nl/~jve/demo/DEMO.pdf)

不幸的是，所有这些（AFAIK）都只能在命题（不是一阶）情况下工作。

# c# - 代码合约编译器怎么会认为这可能是空的？

> ID：11658237
> 
> 赞同：0
> 
> 时间：2012-07-25T20:39:36.933
> 
> 标签：c#, code-contracts

我遇到了多个似乎是一种模式的案例：

```
Contract.Ensures(Contract.Result<BlahType>() != null);
...
BlahType Blah = new BlahType();
...
...
return Blah; 
```

它抱怨。

在所有情况下，该字段都是私有的，并且该方法中的其他任何内容都不会与它混淆。（这些都是惰性初始化，因为数据必须来自磁盘。）

当然我可以在这里添加一个 Contract.Assume 但我不喜欢那种答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:58:56.350

让静态检查器相信字段永远不会`null`（或任何其他条件）的唯一方法是使其成为不变量。不变量方法中的不变量在您的类中每个方法的返回时被检查，因此检查器可能假设它们成立。因此，添加到类的底部：

```
#region Invariants
[ContractInvariantMethod]
[System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Performance",
    "CA1822:MarkMembersAsStatic",
    Justification = "Required for code contracts.")]
private void ObjectInvariant()
{
    Contract.Invariant(this.blah != null);
}
#endregion 
```

笔记：

*   不变方法是任何`private void`没有参数但[`ContractInvariantMethod`](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contractinvariantmethodattribute.aspx)应用了属性的方法。您可以在其中放置多个不变量。
*   要快速获取`ObjectInvariant`方法片段，请键入`cim``TAB``TAB`。
*   可以在[此处](http://angler.wordpress.com/2010/01/22/code-contracts-c-code-snippets-for-visual-studio/)找到其他代码合同片段。
*   在 C# 中，私有/受保护字段和局部变量用小写的标识符的第一个字母（驼峰式）编写。请参阅[此处了解更多信息](http://msdn.microsoft.com/en-us/library/x2dbyw72.aspx)。这使您的代码更具可读性和可理解性。

# android - API 级别 <11 的 Cursor.getType()

> ID：11658239
> 
> 赞同：24
> 
> 时间：2012-07-25T20:39:43.030
> 
> 标签：android, android-contentprovider, android-cursor

我正在查询 CallLog 内容提供程序并需要检测列类型。

在 Honeycomb 和更新版本（API 级别 11+）中，您可以通过调用`Cursor.getType(int columnIndex)`返回以下类型之一的方法来获取列首选数据类型：

*   FIELD_TYPE_NULL (0)
*   FIELD_TYPE_INTEGER (1)
*   FIELD_TYPE_FLOAT (2)
*   FIELD_TYPE_STRING (3)
*   FIELD_TYPE_BLOB (4)

如何在预 Honeycomb <11 设备上完成此操作？

我尝试了以下方法：

```
for ( int i = 0; i < cursor.getColumnCount(); i++ ) {    

    int columnType = -1;
    try {
        cursor.getInt( i );
        columnType = Cursor.FIELD_TYPE_INTEGER;

    } catch ( Exception ignore ) {

        try {
            cursor.getString( i );
            columnType = Cursor.FIELD_TYPE_STRING;

        } catch ( Exception ignore1 ) {

            try {
                cursor.getFloat( i );
                columnType = Cursor.FIELD_TYPE_FLOAT;

            } catch ( Exception ignore2 ) {

                try {                                             
                  cursor.getBlob( i );
                  columnType = Cursor.FIELD_TYPE_BLOB;

                } catch ( Exception ignore3 ) {

                     columnType = Cursor.FIELD_TYPE_NULL;
                }
           }
       }
   }

} 
```

但是，不会抛出异常。数据始终以您要检查的第一种类型进行转换，在本例中为 getInt()。这意味着，如果列类型为**Integer**但所有其他类型为**0 ，我会得到正确的值。**

为什么我不查看文档来检查存储的类型？这些列因设备制造商而异，并非所有列都记录在案，请参阅此问题：[如何处理 ContentProviders 中与制造商相关的差异？](https://stackoverflow.com/questions/11504654/how-to-handle-manufacturer-dependent-differences-in-contentproviders)

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-19T15:31:04.507

扩展 Juan 的答案，这里是我对 API 11 方法 Cursor.getType(int i) 的替换 - 用于由 SQL 查询重新调整的游标

```
public class DbCompat {

    protected static final int FIELD_TYPE_BLOB = 4;
    protected static final int FIELD_TYPE_FLOAT = 2;
    protected static final int FIELD_TYPE_INTEGER = 1;
    protected static final int FIELD_TYPE_NULL = 0;
    protected static final int FIELD_TYPE_STRING = 3;

    static int getType(Cursor cursor, int i) throws Exception {
        SQLiteCursor sqLiteCursor = (SQLiteCursor) cursor;
        CursorWindow cursorWindow = sqLiteCursor.getWindow();
        int pos = cursor.getPosition();
        int type = -1;
        if (cursorWindow.isNull(pos, i)) {
            type = FIELD_TYPE_NULL;
        } else if (cursorWindow.isLong(pos, i)) {
            type = FIELD_TYPE_INTEGER;
        } else if (cursorWindow.isFloat(pos, i)) {
            type = FIELD_TYPE_FLOAT;
        } else if (cursorWindow.isString(pos, i)) {
            type = FIELD_TYPE_STRING;
        } else if (cursorWindow.isBlob(pos, i)) {
            type = FIELD_TYPE_BLOB;
        }

        return type;
    }
} 
```

要点：[https ://gist.github.com/kassim/c340cbfc5243db3a4826](https://gist.github.com/kassim/c340cbfc5243db3a4826)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-24T00:45:15.483

当光标位于有效行中时，您可以使用此代码：

```
CursorWrapper cw = (CursorWrapper)cursor;

Class<?> cursorWrapper = CursorWrapper.class;
Field mCursor = cursorWrapper.getDeclaredField("mCursor");
mCursor.setAccessible(true);
AbstractWindowedCursor abstractWindowedCursor = (AbstractWindowedCursor)mCursor.get(cw);
CursorWindow cursorWindow = abstractWindowedCursor.getWindow();
int pos = abstractWindowedCursor.getPosition();
for ( int i = 0; i < cursor.getColumnCount(); i++ ) {
    String type = null;
    if (cursorWindow.isNull(pos, i)) {
        type = "Cursor.FIELD_TYPE_NULL";
    } else if (cursorWindow.isLong(pos, i)) {
        type = "Cursor.FIELD_TYPE_INTEGER";
    } else if (cursorWindow.isFloat(pos, i)) {
        type = "Cursor.FIELD_TYPE_FLOAT";
    } else if (cursorWindow.isString(pos, i)) {
        type = "Cursor.FIELD_TYPE_STRING";
    } else if (cursorWindow.isBlob(pos, i)) {
        type = "Cursor.FIELD_TYPE_BLOB";
    }
} 
```

请注意，Cursor.FIELD_TYPE_* 常量值是从 HONEYCOMB 开始定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:34:05.297

有些东西可能会起作用：http: [//developer.android.com/reference/android/database/DatabaseUtils.html](http://developer.android.com/reference/android/database/DatabaseUtils.html) cursorRowToContentValues

将复制 ContentValues 对象中的行。然后，您可以调用 ContentValues.get()，它会为您提供一个对象。然后您可以查看该对象的类。

## 编辑

根据 DatabaseUtils 的源代码，对象要么是 blob，要么是字符串。

## 编辑 2

但是，如果您的光标是 WindowedCursor，则它具有了解对象类型的方法。（isBlob、isString、isLong...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:02:38.960

我过去也遇到过同样的问题。我用一个非常好的解决方案解决了这个问题。将此与您的需求相匹配。就我而言，我有大量不同的对象，它们都同步到云中的服务器。它们都有共同的属性，因此它们都继承自一个共同的 BaseObject。这个对象有一个方法，它接受一个游标作为参数并返回一个相同类型的新对象，因此从它继承的每个对象都用它的扩展属性覆盖这个方法。

*请注意，这种方法不需要继承对象。这只是一种更聪明的方法。只要您在需要采用 DB 形式的所有对象中都有相同的方法，这将起作用，因为您最终将能够看到。

让我说明一下：

我们的基础对象。

```
public class BaseObject{

    protected int number;
    protected String text;

    public <T extends BaseObject> T setObject(Cursor c) {
        number = c.getInt(cur.getColumnIndexOrThrow(COLUMN_NAME_FOR_NUMBER));
        text = c.getString(cur.getColumnIndexOrThrow(COLUMN_NAME_FOR_TEXT));

        return (T) this;
    }
} 
```

从第一个继承的新对象。

```
public class Contact extends BaseObject{

    private String name;

    @Override
    public <T extends BaseObject> T setObject(Cursor c) {

        super.setObject(c);

        name = c.getString(cur.getColumnIndexOrThrow(COLUMN_NAME_FOR_NAME));

        return (T) this;
    }
} 
```

最后，在您的数据库中，通过调用通用方法“getAllObjects”并传递您想要查询的类类型以及查询的其他参数，就可以很容易地询问您想要的数据：

```
public synchronized <T extends BaseObject> ArrayList<T> getObjectsForClass(final Class<T> classType,
        String selection, String[] selectionArgs, String sort, String limit) {

    ArrayList<T> objects = null;

    if (db == null || !db.isOpen()) {
        db = getWritableDatabase();
    }

    objects = new ArrayList<T>();

    Cursor c = null;
    T object;
    try {
        object = classType.newInstance();

        String table = object.getTable();

        StringBuilder tableSb = new StringBuilder();
        tableSb.append(table).append(" INNER JOIN ").append(Constants.DB_BASE_OBJECT_TABLE)
                .append(" ON ").append(table).append(".").append(BaseObject.DB_OBJECT_ID_KEY).append(" = ")
                .append(Constants.DB_BASE_OBJECT_TABLE).append(".")
                .append(BaseObject.DB_ID_KEY);

        c = db.query(tableSb.toString(), null, selection, selectionArgs, null, null, sort, limit);

        if (c.getCount() > 0) {
            c.moveToFirst();
            while (!c.isAfterLast()) {

                object = classType.newInstance();
                object.setObject(c);
                objects.add(object);

                c.moveToNext();
            }
        }

    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    c.close();

    return objects;
} 
```

你去吧。一种从数据库中获取任何对象并在运行时成功地将其转换为对象或对象数组的通用方法。

笔记：

*   每个对象都应该有一个方法 getTable() 以便能够查询正确的表
*   如您所见，在这种方法中还有一个 OODB 连接。您可以使用相同的方法，只需查询所有项目 (SELECT * FROM...)

希望能帮助到你。回答问题或疑问。

# excel - EXCEL - 计算军事时间之间的差异以得出分钟

> ID：11658245
> 
> 赞同：2
> 
> 时间：2012-07-25T20:40:03.100
> 
> 标签：excel, time

这是针对我正在从事的研究生项目的，如果有任何帮助，我将不胜感激！我只想说我不熟悉 VBA，我知道这可以用一个简单的公式来完成。我试图计算一个人在床上度过的时间。这是我解释如何计算我需要的值的旧笔记，但由于某种原因它不起作用。

*卧床时间公式应为熄灯时间和离床时间之差。我有一个旧笔记，这个公式应该是：
**从两个军用时间格式的值计算在床上的时间（以分钟为单位）** A1=在床上的时间；B1=下床时间=(24*IF(B1>A1, B1-A1, 1-A1+B1)) *60*

任何人都可以帮我完善此功能以使其正常工作，或帮助我制定一个新功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:46:21.113

我想我有你正在寻找的解决方案。excel 中的所有时间（无论是军用时间还是标准时间）都表示为 0 到 1 之间的十进制数。一旦您知道只需制作一个公式将两者相减即可：

```
=IF(((C6/(1/24))-(B6/(1/24)))<0,24+((C6/(1/24))-(B6/(1/24))),((C6/(1/24))-(B6/(1/24)))) 
```

![Excel 时间表示例](../Images/3ef7f64cef37c95f17000a22acca0914.png)

如果你想这样做几分钟，你只需像这样改变那个公式：

```
=IF(((C6/(24*60))-(B6/(24*60)))<0,(24*60)+((C6/(24*60))-(B6/(24*60))),((C6/(24*60))-(B6/(24*60)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:27:14.563

不太清楚你在这种情况下所说的“军事时代”是什么意思——那个时代到底是什么样的？如果时间值是 Excel 中的有效时间值（无论格式如何），那么您可以在公式中使用此变体

`=1440*IF(B1>A1,B1-A1,1-A1+B1)`

例如，如果开始时间是晚上 11:00，结束时间是上午 8:15，那么该公式将给出结果 555（以分钟为单位的时差）

这个较短的公式也应该做同样的事情

`=1440*MOD(B1-A1,1)`

如果“军事时间”是指您的时间没有冒号，例如 2300 和 0815，那么您可以在第二个公式中使用这种变体

`=1440*MOD(TEXT(B1,"00\:00")-TEXT(A1,"00\:00"),1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T21:03:03.733

伙计们，

只要时间格式为`nn:nn`（带冒号的军事时间），请执行以下操作：

将所有单元格格式化为`TIME>13:30`（13:30 是军事时间格式，是 TIME 下格式下拉列表中的第二项）

单元格 A1 有第一次

单元格 B1 有第二次

单元格 C1 是一个公式：`=(2400-A1)+B1`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-16T20:19:34.113

```
=IF(A1>B1,    
((2300-ROUNDDOWN(A1,-2))/100*60)+(ROUNDDOWN(B1,-2)/100)*60,                                   
((ROUNDDOWN(B1,-2)/100)-(ROUNDDOWN(A1,-2)/100))*60)+                   
IF(A1>B1,60-RIGHT(A1,2)+RIGHT(B1,2),RIGHT(B1,2)-RIGHT(A1,2)) 
```

这将为您提供在 START-A1 和 END-B1 中输入的任意两个时间段之间的时间。对于午夜 1200，它是 0，对于 1205=5。

# notepad++ - 多删除不带字母的行和开头字母 N 的行：

> ID：11658249
> 
> 赞同：-1
> 
> 时间：2012-07-25T20:40:26.867
> 
> 标签：notepad++

我需要记事本++的帮助。我想删除所有没有字母的行，我想删除所有以字母 N 开头的行：

[这是我要删除的图片](https://lh6.googleusercontent.com/-hDpq8uMTSL4/UBBYJGC56NI/AAAAAAAAAbw/CZl_QiEiceI/w730-h509-k/Untitled+1.jpg)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:58:35.650

首先在正则表达式模式下，替换`^N.*$`为空。然后，在扩展模式下替换`\r\n\r\n`为`\r\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:59:16.090

您必须使用查找和替换对话框。然后你需要检查正则表达式单选按钮。

要删除要替换的空行，您必须编写

`^\n`或者`^\r\n`，如果您使用 Windows 样式的换行符，并且在要替换的内容中，您无需编写任何内容。

要删除以 N 开头的行，您必须编写

`^N.*\n`或者`^N.*\r\n`，如果您使用 Windows 样式的换行符，并且在要替换的内容中，您无需编写任何内容。

# sql - 存储过程返回一个数组；如何在 SQL 中使用？

> ID：11658251
> 
> 赞同：0
> 
> 时间：2012-07-25T20:40:30.477
> 
> 标签：sql, h2

我正在编写一个由 h2 数据库支持的会计系统。帐户树存储在 ACCOUNTS 表中，PARENT_ID 列存储树中的链接。

要获取树中给定节点的路径，我有以下存储过程：

`public static Object[] getAncestorPKs(Long id)`

它的工作是产生一个整数数组，作为给定节点和树根之间的 PARENT_ID 值。我在数据库中注册了名为 ANCESTOR_PKS 的过程，如下所示：

`CREATE ALIAS IF NOT EXISTS ANCESTOR_PKS FOR "xxx.yyy.zzz.getAncestorPKs"`

我的问题是我似乎找不到在不触发 SQLException 的情况下使用该东西的方法！我需要通过以下方式使用它：

`SELECT ID FROM ACCOUNTS WHERE [...] AND ID IN ANCESTOR_PKS(5) [for example]`

我收到以下错误：

`Syntax error in SQL statement "SELECT ID FROM ACCOUNTS WHERE ID IN ANCESTOR_PKS[*](5) "; expected "("`

但是ANCESTOR_PKS 后面有个括号*！！！*这到底是怎么回事？有没有办法将 IN 与存储过程的结果一起使用？我已经搜索和搜索，但是我看到的所有使用 IN 的示例都是文字数组，似乎没有人想到如何*使用*作为存储过程的返回值的数组。

帮助？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:36:22.123

我对 h2 不熟悉，但是[这个页面](http://www.h2database.com/html/grammar.html#condition_right_hand_side)说你必须在数组周围放置 ()。

```
SELECT ID FROM ACCOUNTS WHERE ID IN (ANCESTOR_PKS(5)) 
```

也许你甚至必须添加一个子选择

```
SELECT ID FROM ACCOUNTS WHERE ID IN (SELECT ANCESTOR_PKS(5)) 
```

# c# - MVC 应用程序中的应用程序根目录？

> ID：11658255
> 
> 赞同：4
> 
> 时间：2012-07-25T20:40:40.787
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

如果我的应用程序部署到域根以外的任何其他位置，我在使用基于数据驱动 URL 的逻辑（用于路由）的 MVC 应用程序时遇到一些问题。

我尝试使用各种 Request.Url 属性无济于事。

假设我将我的应用程序部署到`www.mydomain.com/myapp/`甚至`www.mydomain.com/myapp/subapp/`. 在这些情况下，我怎样才能分别获得`/myapp/`和`/myapp/subapp/`。即使用户在完全不同的页面上，例如`/myapp/Users/Recent/`？

我需要它，这样我就可以为所有数据驱动的 URL 添加前缀，这样我的应用程序在不在域根目录上时仍然可以工作。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T20:46:06.340

你正在寻找`HttpRuntime.AppDomainAppVirtualPath`.

请注意，所有`Url.*`助手都会为您执行此操作。

# html - 正确居中图像（边距自动？）

> ID：11658260
> 
> 赞同：0
> 
> 时间：2012-07-25T20:40:53.473
> 
> 标签：html, css, mobile, position

我需要将徽标居中放置在内容框上方，并居中对齐。

目前，我使用以下代码：

```
#logo img {
margin: -12em 0 4em 17em;
} 
```

虽然这适用于计算机，但它会在手机上中断。见截图。

如何在两个平台上获得我想要的功能？我试过`margin: 0px auto;`无济于事。

网址：[http ://ec2-174-129-169-80.compute-1.amazonaws.com/](http://ec2-174-129-169-80.compute-1.amazonaws.com/)

![iPhone 预览](../Images/d3b455e77cabe0f9e6cebb021cf123f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:48:54.777

你想让图像居中吗？那为什么`#logo`要`float: left;`在layout.css第89行设置呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:00:28.103

从#logo 中删除float: left，然后转到#logo img 并添加：

```
#logo img{
    margin-left: auto;
    margin-right: auto;
} 
```

# c - ANSI C 中的通用容器

> ID：11658264
> 
> 赞同：-2
> 
> 时间：2012-07-25T20:41:14.453
> 
> 标签：c

由于对这个问题并不重要的几个原因，是否可以为 ANSI 中的通用结构实现一个列表 - 一个容器？这个相同的列表可以包含不同类型的结构吗？

编辑：经过几个建议，我正在考虑一些选项。但我仍然不清楚为什么没有标准的方法来做到这一点。在 ANSI C 中不需要吗？唯一的方法是使用另一种语言？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:25:21.940

取决于你想做什么，这是*可能的*。这是一个很大的痛苦，但这是可能的。

您可以使用`void`指针来创建通用列表，例如

```
struct glist {
  void *data;
  stuct glist *next;
}; 
```

该`data`成员可以指向任何类型的对象。问题是，一旦分配了指针，就会丢失类型信息；您需要单独跟踪类型。您可以使用整数或枚举值来标记类型，例如

```
enum dtype {type_A, type_B, type_C, ...};

struct glist {
  void *data;
  enum dtype data_type;
  struct glist *next;
}; 
```

或者

```
#define TYPE_A 1
#define TYPE_B 2
...
struct glist {
  void *data;
  int data_type;
  struct glist *next;
}; 
```

当您从列表中检索元素时，您将检查`data_type`成员以确定要调用哪些函数或根据数据类型执行哪些过程：

```
switch (elem->data_type)
{
  case TYPE_A: // process for TYPE A
    break;

  case TYPE_B: // process for TYPE B
    break;

  ...
} 
```

或者，您可以存储一个指向一个或多个对特定数据类型进行操作的函数的指针，并完全跳过 switch 或 if-else 语句：

```
struct glist {
  void *data;
  void (*process)(const void *);
  void (*copy)(const void *);
  void (*delete)(const void *); // not shown
  struct glist *next;
}; 
```

对于每种数据类型，您创建一个流程函数的实例并将指向该函数的指针与节点联系起来。该函数必须将 a`void *`作为输入，但它会转换为适当的类型以进行处理：

```
void process_typeA (const void *data)
{
  typeA *obj = (typeA *) data; // cast away const
  // process obj as necessary
}

void *copy_typeA (const void *data)
{
  typeA *obj = (typeA *) data;
  typeA *newObj = malloc(sizeof *newObj);
  if (newObj)
    // copy from obj to newObj
  return newObj;
}

void addItem (struct glist *list, const void *obj, 
              void (*process)(const void *), 
              void *(*copy)(consg void *),
              void (*delete)(const void *))
{
  struct glist *newNode = malloc(sizeof *newNode);
  newNode->copy = copy;
  newNode->delete = delete;
  newNode->process = process;
  newNode->data = (*copy)(obj);
  newNode->next = NULL;

  // add newNode to list 
}

void foo(void)
{
  struct glist *myList = new_list(); // not shown here
  ...
  addItem(myList, myTypeAObj, process_typeA, copy_typeA, delete_typeA);
  addItem(myList, myTypeBObj, process_typeB, copy_typeB, delete_typeB);
  ...
} 
```

然后，当您浏览列表时，您可以调用`process`适用于该特定节点的函数：

```
void processList(struct glist *list)
{
  struct glist *node = list;
  while (node)
  {
    node->process(node->data);
    node = node->next;
  }
  ...
} 
```

这种方法的美妙之处在于您将该节点的行为与节点本身相关联；您不需要继续向 switch 或 if-else 链添加案例。缺点是您使用*大量*指针，您必须为要使用的每种数据类型实现一个单独的进程/复制/删除功能，您正在进行大量的内存管理（您*需要*复制和删除方法，原因一旦考虑就很明显了），并且您将任何类型安全的概念抛到了窗外并进入迎面而来的交通；您将失去任何编译器级别的保护，以防止将错误的进程/复制/删除函数与错误的数据类型相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:47:25.790

您可能想阅读 Linux 内核链接列表。（http://isis.poly.edu/kulesh/stuff/src/klist/ 有一些信息）

它可以存储任意结构，但我相信给定列表中只有一种类型。我已经有一段时间没有使用它了，所以我对细节有点生疏。正如理查德所暗示的，它使用了一些预处理器巫术，但不是太多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:49:42.900

你看过sglib吗？

[http://sglib.sourceforge.net/](http://sglib.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:50:16.893

Jacob Navia 为“ [C 容器库项目](http://www.cs.virginia.edu/~lcc-win32/ccl/ccl.html)”制定了这个计划。

# php - 用 mysql 创建表 用 php 填充

> ID：11658266
> 
> 赞同：-1
> 
> 时间：2012-07-25T20:41:22.360
> 
> 标签：php, mysql, html, wamp

我使用 mysql 创建了表。我试图用我的 php 代码填充它们。如果我的表是空的并且我尝试插入它会给出错误，但如果我最初使用我的 sql 添加之后我的插入工作完美。我花了几个小时但我无法解决它..我该如何解决这个问题再次感谢

> 注意：未定义的索引：

```
 if (isset($_POST['action']) && $_POST['action']=='submitted') {

$project_id = $_POST['project_id'];
$title= $_POST['title'];
$start_date = $_POST['start_date'];
$end_date = $_POST['end_date'];
$parent_project_id = $_POST['parent_project_id'];
$is_completed= $_POST['is_completed'];
$completion_date= $_POST['completion_date'];
$user_id= $_POST['user_id'];
$iproject_id = $_POST['iproject_id'];
$ititle= $_POST['ititle'];
$istart_date = $_POST['istart_date'];
$iend_date = $_POST['iend_date'];
$iparent_project_id = $_POST['iparent_project_id'];
$iis_completed= $_POST['iis_completed'];
$icompletion_date= $_POST['icompletion_date'];
$iuser_id= $_POST['iuser_id'];
if (isset($_POST['update'])) {
$selected = $_POST['selected'];
if (isset($_POST['insert'])) {
$query = "INSERT INTO project (project_id,title,start_date,end_date,parent_project_id,is_completed,completion_date,user_id) VALUES ($iproject_id,'$ititle','$istart_date','$iend_date',$iparent_project_id,$iis_completed,'$icompletion_date',$iuser_id)"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:51:34.337

注意：未定义索引：表示您传递的 $_POST[] 变量之一不存在或您拼写错误其中之一。将每个 $_POST[] 与表单的 name 属性进行比较，也许您只是错过了一个。尝试 print_r($_POST) 以便您可以看到正确的拼写错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:09:15.050

一个错误是在插入查询的值中，您使用了 PHP 变量，例如`$iproject_id`and `$ititle`，而这些变量不存在。您将 POST 数据的 project_id 和 title 放入调用的变量`$project_id`和`$title`代码中（注意 $ 符号后缺少 i）。

确保查询中的变量名与分配 POST 数据的变量名匹配是个好主意。

请在将输入插入数据库之前对其进行清理。永远不要相信用户数据，出于安全原因，请始终尝试对其进行清理。`mysql_real_escape_string()`如果您想保持快速和简单，可以成为您最好的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:52:26.347

使用时：

```
INSERT INTO `project` Values ($project_id,$title,$start_date,...etc); 
```

VALUES 数和 table1 中的列数必须***完全***匹配。如果您没有在 phpAdmin 中正确设置表，那可能是您的问题

# php - 如何将同一查询插入的所有记录集中在一起？

> ID：11658267
> 
> 赞同：1
> 
> 时间：2012-07-25T20:41:26.610
> 
> 标签：php, mysql

我有一个表，其中有一个标识一组值的数字。每次将一组值加载到数据库中时，此数字都会增加，因此对于在给定时间插入的每个值，此数字将重复。

如何获取这个数字并加 1，以便我可以使用表单通过 PHP 输入新值？

如果有更好的方法可以做到这一点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:44:39.040

按递增列对表进行降序排序，并将结果限制为仅第一行。这将是最高值。

```
SELECT incrementing_column 
FROM table 
ORDER BY incrementing_column DESC 
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:57:05.483

您需要考虑并发问题。例如，当您有两个用户各自向表中添加一个“新”数字数组时，您可能不希望他们使用相同的序列号。因此，您需要进行某种“原子”操作，以防止它们都返回相同的序列号。

（我将在这里假设整数值对于“序列”数字是可以接受的，在您的问题中没有任何迹象表明它不是。）

一种方法是定义一个表，其中只有一个列，其中包含此“序列”编号，定义为 AUTO_INCREMENT，如下所示：

```
CREATE TABLE seq (id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY); 
```

然后，要获得一个“新”的 id 号，您只需在表中执行 INSERT，并检索自动生成的 id 值。您的 SQL 语句可能如下所示：

```
INSERT INTO seq (id) VALUES (NULL);
SELECT LAST_INSERT_ID() AS id; 
```

还有其他（更简单的）方法可以检索 LAST_INSERT_ID 的值，但具体方法取决于您使用的是 mysqli (mysqli_insert_id) 还是 PDO (lastInsertId)。

这种方法大约是我（在 MySQL 中）获得的最接近 Oracle 风格的 SEQUENCE 对象的方法。

还有其他方法，但有些从根本上被破坏（因为它们可能会返回重复值），有些对并发性有负面影响（因为它们锁定表以防止并发检索和/或更新。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T20:44:33.033

您可能想研究 MySQL 的自动增量功能。

[http://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

这将允许您识别单个 ID 字段，该字段将在每次输入新记录时自动递增，而无需指定值。

# ruby-on-rails - 在 Rails 3 中进行必要的验证条件

> ID：11658269
> 
> 赞同：0
> 
> 时间：2012-07-25T20:41:36.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何根据另一个完全不同的字段的值对给定字段进行必要的验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:40:29.897

尝试

```
attr_accessible :supplier_id, :supplier_type

validates :supplier_type, :presence  => true,
    :if => lambda{ check_supplier_exists }

def check_supplier_exists
  @supplier = Supplier.find(self.supplier_id)
  if @supplier != nil
    return true
  else 
    return false
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T09:10:28.730

检查验证的除非[条件](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html)。

这里有一个[例子](http://lindsaar.net/2010/1/31/validates_rails_3_awesome_is_true)：

```
class Person < ActiveRecord::Base

  validates :post_code, :presence => true, :unless => :no_postcodes?

  def no_postcodes?
    ['TW'].include?(country_iso)
  end

end 
```

# thread-safety - Redis list 或 set pop 方法线程安全吗？

> ID：11658272
> 
> 赞同：6
> 
> 时间：2012-07-25T20:41:54.573
> 
> 标签：thread-safety, redis

我正在构建一个多线程的排队服务。我需要确保我们的数据后端 Redis 具有用于列表或集合类型的线程安全弹出功能。这个想法是任意数量的线程都可以调用 Redis`lpop`或者`spop`没有任何冲突。我不太确定如何测试它，如果 pop 函数是线程安全的，它也不会在 Redis 页面上的任何地方明确说明。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T20:57:30.460

从[基准页面](http://redis.io/topics/benchmarks)

> Redis 是一个单线程服务器。它并非旨在从多个 CPU 内核中受益。如果需要，人们应该启动多个 Redis 实例以在多个内核上横向扩展。将单个 Redis 实例与多线程数据存储进行比较是不公平的。

因此，当每个命令都在单个线程中排队时，您应该没问题，因为永远不会有两个命令并行执行

# c++ - C++ exp LUT（查找表）

> ID：11658275
> 
> 赞同：7
> 
> 时间：2012-07-25T20:42:09.443
> 
> 标签：c++, profiling, lookup-tables

在我正在编写的受 C++ CPU 限制的模拟中，我通过程序中的 valgrind 将瓶颈跟踪到`cmath::exp`. 它目前占用了我 40% 以上的模拟时间。我可以将输入绑定到一个相对较小的域，但我想控制准确性。我正在考虑转移到 LUT（查找表）来替换`exp`，但我不太确定如何以“正确的方式”（tm）做到这一点。我的担忧：

1.  大型查找表将不适合缓存，从而减慢访问速度
2.  将双精度输入转换为整数以访问查找表的最佳方法
3.  (2) 的答案是否取决于输入函数的斜率？
4.  我是在重新发明轮子吗？以前已经做过了吗？

实现/（从库中包含）LUT 的最佳方法是什么`exp`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:09:23.830

1.  最佳查找表大小取决于您在性能、准确性和实现复杂性之间做出的权衡。您将不得不进行分析，我们无法告诉您答案（我们不知道答案）。

2.  使用`lrint`from`<math.h>`转换`double`为`long int`. 我不确定它是否在`<cmath>`.

3.  我不确定斜率与将浮点数转换为整数有什么关系。你能详细说明你担心什么吗？

4.  是的，你正在重新发明轮子。任何曾经实现过数学库的人都一遍又一遍地完成了你所做的事情。有很多关于这个主题的文献。

直接查找表远非最佳。您将需要使用某种多项式近似，可能是从查找表中选择系数的分段近似。对于像 一样平滑和可预测的函数`exp`，多项式将在相同的计算量下为您提供更高的精度。所需的多项式将取决于复杂性和准确性之间的权衡，以及您是否希望最小化预期误差、最小化最大误差或使用其他一些损失函数。

限制的域`exp`实际上并没有太大帮助，因为它很容易扩展到整个域。

```
// only works for x in [0, 1]
double exp2_limited(double x);

// works for all x, but doesn't handle overflow properly
double exp2(double x)
{
    return scalbn(exp2_limited(fmod(x, 1.0)), (long) floor(x));
} 
```

**概括：**

*   在设计这样的功能之前，您必须知道所需的精度。

*   您还必须知道损失函数（即*选择*损失函数）。

*   在你知道它有多快之前，你必须先分析一下。

*   使用多项式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:01:47.710

我遇到了这个问题，我拿了一些堆栈样本来诊断它。它的作用是告诉调用来自哪里以及参数值是什么。我发现当`exp`从特定位置调用时，参数值是高度可重复的。

这提出了一种记忆方法，这产生了巨大的变化。

它需要一个简单的“包装器”功能：

```
double exp_cached(double arg, double* old_arg, double* old_result){
  if (arg== *old_arg) return *old_result;
  *old_arg = arg;
  *old_result = exp(arg);
  return *old_result;
} 
```

在`exp(foo)`过去被称为的地方，请执行以下操作：

```
static double old_arg = -999999999, old_result;
...
... exp_cached(foo, &old_arg, &old_result)... 
```

这样，`exp`如果它在调用它的地方的参数具有与以前相同的参数值，则不会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:14:00.993

之前有人问过一个非常相似的问题。这是我的答案：

*   [快速 Exp 计算：可以在不损失太多性能的情况下提高准确性吗？](https://stackoverflow.com/a/10792513/103167)

该方法是由该问题的作者提出的，我能够有效地实现它（查找表小，查找后的额外工作最少）。它在 C# 中，但转换为 C++ 应该很简单，如果您遇到麻烦，我可以提供帮助。

# node.js - 使用 NodeJS 在 CloudFoundry 上的 Redis 失败

> ID：11658276
> 
> 赞同：0
> 
> 时间：2012-07-25T20:42:14.560
> 
> 标签：node.js, redis, cloud-foundry

我正在制作一个使用 Redis 的应用程序。它在我运行 Ubuntu 12.04 的计算机上完美运行，但在 CloudFoundry 上它给了我一个错误。

这是应用程序的代码：

```
var
    http = require("http"),
    redis = require("redis"),
    cf = require("cloudfoundry");

cf.cloud;

if (cf.redis["myredisservice"]) {
    var rport = cf.redis["myredisservice"].credentials.port;
    var rhost = cf.redis["myredisservice"].credentials.hostname;
} else {
    var rport = 6379;
    var rhost = "127.0.0.1";
}

http.createServer(function(req, res) {
    var client = redis.createClient(rport, rhost);

    res.writeHead(200, {"Content-Type": "text/html"});

    client.on("error", function(error) {
        res.write("Error: " + error);
    });

    res.write("Setting key 1<br>");
    client.set("key1", "My 1st String!", redis.print);

    res.write("Getting key1<br>");
    client.get("key1", function(error, reply) {
        res.write("Results for key1<br>");
        res.write(reply);
        client.end();
        res.end();
    });
}).listen(cf.port || 3000); 
```

在 CloudFoundry 上，当我运行这个应用程序时，它会给出以下输出：

> 设置键 1
> 
> 获取key1
> 
> 错误：错误：就绪检查失败：不允许进行 ERR 操作

我可以确认它使用 CloudFoundry 指定的端口和主机名连接到 Redis 服务。

所以我认为它失败是因为其中一个命令。:(

谁能告诉我，为什么会发生这个错误？

谢谢。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:27:46.147

您还需要对 redis 进行身份验证。试试这个：

```
var
    http = require("http"),
    redis = require("redis"),
    cf = require("cloudfoundry");

cf.cloud;

if (cf.redis["myredisservice"]) {
    var rport = cf.redis["myredisservice"].credentials.port;
    var rhost = cf.redis["myredisservice"].credentials.hostname;
    var rpass = cf.redis["myredisservice"].credentials.password;
} else {
    var rport = 6379;
    var rhost = "127.0.0.1";
}

http.createServer(function(req, res) {
    var client = redis.createClient(rport, rhost);
    client.auth(rpass);

    res.writeHead(200, {"Content-Type": "text/html"});

    client.on("error", function(error) {
        res.write("Error: " + error);
    });

    res.write("Setting key 1<br>");
    client.set("key1", "My 1st String!", redis.print);

    res.write("Getting key1<br>");
    client.get("key1", function(error, reply) {
        res.write("Results for key1<br>");
        res.write(reply);
        client.end();
        res.end();
    });
}).listen(cf.port || 3000); 
```

# ssh - 如何设置从 Ubuntu 12.04 到 Amazon EC2 的 SSH 连接

> ID：11658280
> 
> 赞同：1
> 
> 时间：2012-07-25T20:42:20.733
> 
> 标签：ssh, amazon-web-services, amazon-ec2, ubuntu-12.04

我经历过无数的教程，所有这些似乎都已经过时了......

X.509 证书、密钥/对等等等等……

我需要一步一步认真地创建从我的本地机器到亚马逊 EC2 的连接，有人可以帮助我吗？

我宁愿一步一步地链接到我认为我已经阅读过的教程的链接，但今天没有足够的教程

是否有类似 github 的简单设置？

谢谢丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:29:45.957

我建议使用您的默认 ssh 密钥，而不是让 Amazon 为您生成一个完全不同的密钥（许多教程都建议这样做）。

1.  为您的本地用户创建一个 ssh 密钥。如果您已经有，请跳过此步骤

    测试 -f $HOME/.ssh/id_rsa || ssh-keygen

2.  将您的公共 ssh 密钥上传到 EC2，为其指定一个与您的用户名相同的密钥对名称：

    $(ec2-describe-regions | cut -f2) 中的区域；做 echo $region ec2-import-keypair --region $region \ --public-key-file $HOME/.ssh/id_rsa.pub $USER 完成

3.  运行一个实例，传入您上传的密钥对的名称。此处的示例使用最新版本的 Ubuntu 12.04 LTS Precise：

    ec2-run-instances --key $USER ami-82fa58eb

4.  等待实例进入“运行”状态并找到公共 IP 地址：

    ec2-描述-实例

5.  使用您的默认 ssh 密钥连接到实例。确切的用户名取决于您正在运行的 AMI，可能是以下之一：

    ssh ubuntu@ ssh ec2-user@ ssh root@

这是我写的一篇关于上传您的个人 ssh 密钥而不是让亚马逊生成它们的文章：http: [//alestic.com/2010/10/ec2-ssh-keys](http://alestic.com/2010/10/ec2-ssh-keys)

这是我写的一篇关于所有不同 AWS 凭证之间区别的文章：http: [//alestic.com/2009/11/ec2-credentials](http://alestic.com/2009/11/ec2-credentials)

# ruby-on-rails-3 - rails_admin 显示名称而不是 id

> ID：11658281
> 
> 赞同：23
> 
> 时间：2012-07-25T20:42:22.077
> 
> 标签：ruby-on-rails-3, rails-admin

我已将 rails_admin 安装到我的应用程序中，我想做一些非常基本的事情...我有两个模型，它们的关联按预期出现...我有一个属于_to :user 的研讨会注册模型。

在 rails_admin 中，它将我的研讨会注册用户列为用户 #1、用户 #1 等。

我希望将其改为用户名。我设法做的是：

```
config.model SeminarRegistration do
label "Seminar Signups"
# Found associations:
  configure :user, :belongs_to_association 
  configure :seminar_time, :belongs_to_association   #   # Found columns:
  configure :id, :integer 
  configure :user_id, :integer         # Hidden 
  configure :seminar_time_id, :integer         # Hidden 
  configure :created_at, :datetime 
  configure :updated_at, :datetime   #   # Sections:

list do
  field :user do
    pretty_value do
     user = User.find(bindings[:object].user_id.to_s)
     user.first_name + " " + user.last_name
    end
  end
  field :seminar_time
end
export do; end
show do; end
edit do; end
create do; end
update do; end
end 
```

“pretty_value”部分给了我用户的名字和姓氏的文本......但有两个问题：

1）它不再是一个链接。如果我保留默认值（用户 #1、用户 #2 等），它会提供指向该用户的链接。如何找回该链接？rails_admin 如何定义它的路径？

2）在我的表单中必须通过 id 查找似乎非常笨重......

对不起，如果这是一个基本问题。我已经阅读了手册并查找了其他问题，但对我来说还没有完全“点击”。我对rails也很陌生。

谢谢。

* * *

我必须这样做才能使其与链接一起使用：

我按照建议为全名添加了一个辅助方法，但将其保留在我的视图助手中：

```
module ApplicationHelper
 def full_name(user_id)
  user = User.find(user_id)
  user.first_name + " " + user.last_name
 end
end 
```

然后，我像这样更改了“pretty_value”部分：

```
pretty_value do
  user_id = bindings[:object].user_id
  full_name = bindings[:view].full_name(user_id)
  bindings[:view].link_to "#{full_name}", bindings[:view].rails_admin.show_path('user', user_id)
end 
```

基本上，要访问任何视图助手（制作的导轨或其他），您必须添加 indings[:view].my_tag_to_use

要获取用户的 rails_admin 路由，例如，您可以执行以下操作：

```
bindings[:view].rails_admin.show_path('user', user_id) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-02-03T11:44:30.197

我在谷歌上偶然发现了这个问题，并找到了一种更简单的方法来做到这一点。向您的模型添加`title`or`name`方法，rails_admin 将使用该方法而不是显示“用户 #1”。

```
class User
  ...
  def name
    first_name + " " + last_name
  end
  ...
end 
```

您可以使用`title`代替`name`，但在您的情况下，使用名称更有意义。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-14T17:15:28.593

```
RailsAdmin.config {|c| c.label_methods << :full_name} 
```

或者

```
config.model full_name do
  object_label_method do
    :full_name
  end
end 
```

然后在你的模型中添加一个 full_name 方法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-10T13:36:23.520

我为“角色”模型这样做

```
config.model 'Role' do
  object_label_method do
    :custom_label_method
  end
end

def custom_label_method
  "#{role_name}"
end 
```

有用

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-16T08:09:32.533

您可以使用 rails_admin object_label_method

[见链接](https://github.com/sferik/rails_admin/wiki/Models#the-object_label_method-method)

对于用户模型，在 rails_admin.rb

```
config.model 'User' do
  object_label_method do
   :custom_label_method
  end
end 
```

在模型创建方法中

```
def custom_label_method
  "User #{user_name}"
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-10T11:43:20.070

只需将其添加到您的用户模型中：

```
# Prety User name display for rails_amdin
def to_s
    return self.name
end
def title
    return self.to_s
end 
```

然后重启服务器。

您必须同时添加`to_s`和`title`方法，并且可以`self.name`根据用户模式中的任何内容进行更改。

它适用于 Rails 4。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T01:38:44.750

使用像名称这样通用的东西，我通常会在模型上添加一个方法。但替代解决方案是为 RA 中的字段配置标签

# c++ - Gdiplus::来自字节数组的图像

> ID：11658282
> 
> 赞同：2
> 
> 时间：2012-07-25T20:42:22.067
> 
> 标签：c++, windows, gdi+

我正在执行 dcraw 并使用匿名管道将其通过管道传输到 char 数组。

我的问题是如何`Gdiplus::Image`从包含 jpeg 图像的 char 数组创建对象？无需从磁盘写入和读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:45:32.547

`Gdiplus::Bitmap`您可以从`IStream`源创建一个。有内置的 Windows API 可以为您执行此操作 - 请参阅[CreateStreamOnHGlobal](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378980%28v=vs.85%29.aspx)。另一种方法是编写自己的类来实现`IStream`.

[这是一个](http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI)用于从内存中`CreateStreamOnHGlobal`加载 PNG 资源的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T16:26:49.223

```
 CByteArray byteArr;

    //fullfill byteArr
    COleStreamFile stream;
    if(!stream.CreateMemoryStream(NULL))
    {
        return;
    }
    stream.Write(byteArr.GetData(), byteArr.GetSize());
    stream.SeekToBegin();
    m_pSnapShot.reset(::new Gdiplus::Image(stream.GetStream( ))); 
```

# ruby-on-rails - 按 has_one 关联字段排序

> ID：11658285
> 
> 赞同：0
> 
> 时间：2012-07-25T20:42:35.197
> 
> 标签：ruby-on-rails, ruby

我有一个模型“事件”，它有关联

```
has_one :movie 
```

和时间栏。电影模型有很多字段：名称、评级、演员和其他我想创建事件表，在这个表中我希望列可以按电影模型的字段排序。你能建议这样做的方法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:00:22.487

尝试这样的事情：

```
Event.joins(:movie).order("movies.name") 
```

# delphi - 在 Delphi 中禁用溢出检查

> ID：11658287
> 
> 赞同：2
> 
> 时间：2012-07-25T20:42:48.727
> 
> 标签：delphi

这是一个后续问题，与我在 stackoverflow 上阅读的另一个问题上看到的答案有关。如果我希望禁用特定函数的溢出检查（根据[此问题](https://stackoverflow.com/questions/2418272/delphi-how-do-i-use-overflowchecks-off-to-disable-overflow-checks)），此代码是否会导致在运行该函数后突然启用溢出检查，即使之前未在编译器选项或代码中启用它？

```
{$OVERFLOWCHECKS OFF}
// function here
{$OVERFLOWCHECKS ON} 
```

我是否需要将其与 IFOPT 块（可能类似于[此](https://stackoverflow.com/questions/4997911/switch-off-delphi-range-checking-for-a-small-part-of-code-only)示例？）以将溢出检查返回到以前的状态（以免意外启用对非调试版本的溢出检查）？还是两者不同，这就足够了？奖励：如果我确实需要 IFOPT，有条件地禁用溢出检查的具体语法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T21:02:14.510

是的，您发布的代码段将自动启用溢出检查，无论它之前是什么。

这应该有效。如果您愿意，可以分别替换`{$Q+}`and`{$Q-}`和`{$OVERFLOWCHECKS ON}`and `{$OVERFLOWCHECKS OFF}`。

```
{$IFOPT Q+}
  {$DEFINE OVERFLOW_ON}
  {$Q-}
{$ELSE}
  {$UNDEF OVERFLOW_ON}
{$ENDIF}
//
// Your code here
// 
{$IFDEF OVERFLOW_ON}
  {$Q+}
  {$UNDEF OVERFLOW_ON}
{$ENDIF} 
```

# php - 处理 AJAX 回调

> ID：11658295
> 
> 赞同：0
> 
> 时间：2012-07-25T20:43:40.413
> 
> 标签：php, javascript, jquery, ajax

我正在编写一个脚本，它将通过 AJAX 将用户详细信息发送到 PHP 脚本。目前 PHP 脚本工作正常。那里没有问题。我想知道应该如何处理回调。

我应该将它指向现有的 PHP 脚本，还是应该创建一个专门用于处理 AJAX 请求的新文件（创建冗余代码）？

```
$.ajax({
type: 'POST',
url: 'existing-script.php',
// OR url: 'callback.php',
success: function(feedback){

    alert(feedback);

} 
```

编辑：

PHP 当前插入用户的个人详细信息（姓名等）以及上传图像。这是一个在用户注册后建立帐户的向导。此操作在 AJAX（向导）和标准“编辑您的个人资料”页面之间共享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:57:32.183

根据[REST](http://tomayko.com/writings/rest-to-my-wife)原则，URI 是[资源的名称](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_2_1_1)。客户端，您应该仅在访问相同资源时使用相同的 URI。问问自己网站提供了哪些资源。

服务器端，您可以在处理请求时将 URI 映射到任何脚本。通常，为了简单起见，映射是 1-1（每个 URI 有一个单独的脚本）或 all-1（其中单个脚本用作处理所有请求的入口点），但您可以使用其他映射，具体取决于对您的项目有意义。如果让一个脚本处理用户配置文件更新和图像上传是一个好的设计，那就去吧。至于什么才是“好的设计”，关键在于选择一种能够促进项目开发目标的架构模式（例如，开发时间短、团队高效工作、易于维护）并坚持该模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T22:13:10.120

我通常发现为 AJAX 请求提供单独的 URI 和为正常的 Web 请求提供单独的 URI 很容易

原因是...... AJAX 返回的响应比呈现 HTML 页面的响应要紧凑得多（它包括一堆样式和 html 标签......我不用于处理 AJAX 请求）

此外，如果您将业务逻辑和表示分开......您真的不需要复制代码。计算用户偏好的代码可以在两个动作之间共享

这两个操作只是使用此代码来获取用户首选项......并且取决于它是用于 AJAX 还是用于 HTML ......它可以适当地打包响应

# jquery - 从 jQuery 移动列表视图中动态删除列表项的刷新问题

> ID：11658300
> 
> 赞同：3
> 
> 时间：2012-07-25T20:44:06.883
> 
> 标签：jquery, listview, jquery-mobile

我正在使用 jQuery Mobile 创建一个应用程序。我有一个列表视图，我想从中删除现有项目。但是，我无法动态删除它。

请参阅 jsfiddle 了解我的代码：http: [//jsfiddle.net/zbNms/11/](http://jsfiddle.net/zbNms/11/)

我希望动态地从列表视图中编辑/删除列表项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:55:12.953

您正在使用的是`attribute selector`根据属性选择元素的方法。您应该改用`:contains()`选择器：

> 选择包含指定文本的所有元素。

```
$('#delete').click(function(){
    var item2 = $("#mylist").find("li:contains('item2')");
    item2.remove();
    $("mylist").listview("refresh");
}) 
```

[http://jsfiddle.net/zbNms/12/](http://jsfiddle.net/zbNms/12/)

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# jquery - jQuery Validation 仅附加到第一个表单

> ID：11658302
> 
> 赞同：0
> 
> 时间：2012-07-25T20:44:14.650
> 
> 标签：jquery, forms, validation, select

我在验证用户是否提交默认选择选项时遇到问题这是一个示例表单：

```
 <form action="/shopping-cart" method="post" class="eshop addtocart"   id="eshopprod7751562209795">
    <fieldset>
    <span class="eshop eselect"><label for="exopt1001562209795">Choose Size and Type…  </label><br>
    <select class="cartselectclass" id="exopt1001562209795" name="optset[0][id]"><option value="" selected="selected">Choose Option...</option>
    <option value="129">8" x 10" – Print + $9.95</option>
    <option value="130">11" x 14" – Print + $19.95</option>
    <option value="131">16" x 20" – Canvas + $299.00</option>
    </select>
   </span>
  <label for="qty7751562209795" class="qty"><abbr title="Quantity">Qty</abbr>:</label>
  <input type="text" value="1" id="qty7751562209795" maxlength="3" size="3" name="qty"   class="iqty">
   <input class="button mybutton" value="Add to Cart" title="Add selected item to your shopping basket" type="submit">
   </fieldset>
   </form> 
```

这是用于验证选择选项的 jquery：我正在尝试的是，如果用户不小心点击了添加到购物车，如果他们没有选择任何选项，默认情况下选择“选择选项”，他们会收到警报。

```
 jQuery(document).ready(function($){

    $('select.cartselectclass option:first-child').remove();

    $('.cartselectclass').prepend('<option value="" selected="selected">Choose Option...</option>').val('');
    $('.mybutton').click(function(){

        if ($('.cartselectclass').val()=='')
        {           
                        alert('Please choose at least one option.');
            return false;
        }

    })

    $('.addtocart').submit(function(){

        var Id =$(this).attr("id");
        var data = {action: 'eshop_special_action',post:$('#'+Id).serialize() };
        $.post(""+eshopCartParams.adminajax, data,
            function(response){

            $('#'+Id +" .eshopajax").insertAfter(this).fadeIn(100).html(response).fadeOut(3000);
            setTimeout (cleareshopCart,1000);
            setTimeout (doeshopRequest,750);
            setTimeout (cleareshopRequest,3000);
        });

        function doeshopRequest(){
            var tdata = {action: 'eshop_cart'};
            $.post(""+eshopCartParams.adminajax, tdata,
            function(response){
                $(".ajaxcart").insertAfter(this).fadeOut(50).html(response).fadeIn(700);
            });
        }
        function cleareshopRequest(){
            $(".eshopajax").empty();
        }
        function cleareshopCart(){
            $(".ajaxcart").insertAfter();
        }
        return false;

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T05:34:12.337

您需要修改选择器以获取正确的元素。

```
var Id =$(this).attr("id"); var formId = $('#'+Id).closest('form').attr("id"); 
var selval = $('#'+formId).find('.cartselectclass').attr("id"); if ($('#'+selval).val()=='') {     
alert('Please choose at least one option.'); return false; } 
```

# javascript - 来自字符串的JavaScript日期？

> ID：11658308
> 
> 赞同：1
> 
> 时间：2012-07-25T20:44:27.947
> 
> 标签：javascript

新手提问。我有以下格式的字符串：

```
var dateStr = '2012-4-14'; 
```

我想把它变成一个 JavaScript Date 对象。下面在 Chrome 中创建一个 Date 对象，但在 IE8 中是 NaN：

```
var myDate = new Date(dateStr); 
```

我应该做些什么不同 - 我应该拆分字符串吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:46:50.770

尝试将您的日期字符串拆分为年、月、日并以不同的方式实例化您的日期。

```
var rawDate = '2012-4-14'.split('-');

var myDate = new Date(rawDate[0], rawDate[1]-1, rawDate[2]); 
```

请注意，这只有在您可以保证您的日期字符串每次都具有相同格式的情况下才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:46:34.463

javascript中有一个[Date.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)，它可以识别各种日期格式，详见MDN页面。对于 ISO 8601 日期（你的似乎是这个），你可以使用[这个库](https://github.com/csnover/js-iso8601/tree/lax)。

这个答案也可以证明自己有用：[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:48:05.387

更改`var dateStr = '2012-4-14';`为`var dateStr = '2012/4/14';`

# .htaccess - .htaccess - 在不使用 iframe 的情况下使用掩码转发域

> ID：11658313
> 
> 赞同：1
> 
> 时间：2012-07-25T20:44:46.320
> 
> 标签：.htaccess, url-rewriting

我拥有两个域。[domain.com](http://www.domain.com)是我的主要网站，而[anotherdomain.com](http://www.anotherdomain.com)只是一个虚 URL。当用户输入[anotherdomain.com](http://www.anotherdomain.com)时，如何将用户转发到[domain.com](http://www.domain.com) ，同时将[anotherdomain.com](http://www.anotherdomain.com)保留在 URL 栏中？我控制了这两个域，我不想使用 iframe。这可能吗？

两个域都在同一台服务器上。继续这个例子，[domain.com](http://www.domain.com)的根是 /home/domain/，[anotherdomain.com](http://www.anotherdomain.com)的根是 /home/anothdom/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:24:32.967

如果您可以控制两个域并且它们位于同一台服务器上，并且您想要它，那么当您访问`anotherdomain.com`它时，它会从 获取提供的内容`domain.com`，为什么不将文档根目录更改为`/home/domain`？

如果您需要一个域而不是另一个域的特殊内容，您可以使用 htaccess 进行一些简单的路由（通过匹配反对`%{HTTP_HOST}`）。

# multithreading - 潜在线程密集型应用程序中多个套接字的异步与同步套接字

> ID：11658315
> 
> 赞同：2
> 
> 时间：2012-07-25T20:45:00.860
> 
> 标签：multithreading, sockets, thread-safety, threadpool, compact-framework2.0

我正在为我的公司在 Windows CE 设备的 Compact Framework 2.0 上编写一个相对较大的应用程序，并且我正在使用单个 CPU 内核。

在不深入细节的情况下，与套接字无关的工作在最坏的情况下可以同时运行 10 个左右的线程。

考虑到这一点，我第一次在一个小型测试应用程序中使用套接字。这个更大的应用程序可能会与同一 IP 地址上的 7 个不同端口通信（例如明显错误的 IP，1.2.3.4:4000、1.2.3.4:4001、1.2.3.4:4002 等），因此使用 7 个不同的套接字对象。

Compact Framework 2、1 个 CPU 内核、在最坏的情况下大约有 10 个非套接字线程，以及 7 个用于编程发送能力和*连续*接收（以尽快处理/响应）的套接字。

我一直在考虑异步套接字编程是否只会给我带来麻烦，对于 Compact Framework 2.0，默认的最大线程数是 25（每个内核），本质上我必须得到多么“聪明”。

你有什么建议？异步或同步套接字编程，以及您建议的任何特定附加细节，或者如果我什么都不担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:02:38.403

我总是推荐异步套接字而不是同步套接字。根据底层子系统，异步套接字可能不使用任何额外的线程。大多数时候，使用同步套接字需要手动创建线程以避免阻塞 UI（如果有的话）。

让其他东西管理异步比必须管理自己的线程要容易得多。

无论异步套接字做什么都不会影响 .NET 线程池

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:48:14.423

由于您的设备的内存肯定有限，而且 .NET 线程堆栈默认消耗 1MB 内存（已提交，而不仅仅是保留），我认为您应该使用异步 IO，因为它不会阻塞线程。只有您的回调/延续会发布在线程池上。线程池线程很少，因此堆栈导致的内存使用量较低。

请记住，异步 IO 主要是关于不阻塞线程，从而节省内存和操作系统句柄。这与降低 CPU 成本无关（根据我对网络 IO 的基准测试，情况正好相反）。

# django - 在服务器和客户端之间建立实时推送 API 通道的好方法

> ID：11658319
> 
> 赞同：4
> 
> 时间：2012-07-25T20:45:22.967
> 
> 标签：django, rest, heroku, server-push, pubnub

我正在尝试使用 PubNub 建立一个系统，用于将简单的实时消息从我的 Web 服务器推送到客户端。我在 Heroku 上运行 Django。

特别是，我对如何在服务器和客户端之间建立通道感兴趣，这需要在两者之间共享一个唯一的通道 id。

我们的网站是一种社交网站——很多用户会同时登录。我们只想在他们收到新消息或好友请求之类的信息时更新他们的界面，而无需刷新。

我知道该怎么做，但我认为可能有一些我不知道的最佳实践，所以我想获得一些反馈。

1.  登录时，客户端发布到 API 端点
2.  这个 POST 的处理函数检查数据库中是否已经有这个用户的频道 ID 记录。
3.  如果是这样，它会使用新的频道 ID（即 UUID）更新记录。如果没有，它会使用该用户的 ID 和频道 ID 创建一条新记录。
4.  将频道 ID 返回给用户。
5.  注销时，此记录将被删除。

从技术上讲，我担心这违反了 REST 原则。对 API 端点的单一调用既可以创建数据服务器端（如 POST），也可以将数据返回给客户端（如 GET）。

对于相关最佳实践的任何想法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:55:23.860

听起来您会从使用[Pusher](http://pusher.com/)中受益。它们或多或少是事实上托管的 websockets 提供者，它允许您让客户端（通过带有套接字的浏览器）订阅 Pusher，监听各种渠道。然后，您将简单的 API 调用发送到 Pusher，后者将其广播到所有连接的客户端。

这是处理同时登录的多个客户端的实时更新的*最佳*方式，无需通过 AJAX 进行轮询，或滚动您自己的 websockets 内容。

我强烈建议给 pusher 看看。（请注意，他们的免费套餐非常慷慨。）

# crystal-reports - Crystal Report：如何将参数项列表作为一个组使用？

> ID：11658321
> 
> 赞同：0
> 
> 时间：2012-07-25T20:45:29.957
> 
> 标签：crystal-reports, business-intelligence, crystal-reports-2008, business-objects

## 背景

我有一个水晶报表。

对于输入到参数中的多个项目（我相信它会成为一个字符串数组），我希望它按这些值分组，然后为每个组项目运行多个子报告。

## 目标

对于作为参数的一部分输入的项目（允许多个项目），将这些项目用作一个组，以便我可以看到这些项目的多个子报告（包括如果找不到给定项目的数据）。

为了澄清，所需的过程是：

*   用户运行报告
*   提示用户在 ItemNumbers 参数中输入一个或多个项目编号
*   ItemNumbers 参数用于创建分组
*   分组为每个组运行几个子报告（大概在组页脚中）
*   用户可以看到每个项目组下每个子报表的结果（或非结果）。

## 迄今为止的障碍/尝试

*   尝试使用参数作为分组。这是不可能的，因为它没有显示在我可以为分组选择的内容列表中。
*   试图使用公式来保存参数的值。这是不可能的，因为公式无法生成数组。
*   试图创建一个 StringArray 变量来保存参数条目，但由于它也必须在选择公式中引用并且公式不能是数组，所以失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:51:36.723

您不能对参数字段进行分组。您将需要使用它来过滤您的记录集，然后对其（记录集的）字段之一进行分组。

** 编辑 **

我会创建一些查询，将各个事务表与“主”表（LEFT OUTER JOIN）进行比较，然后将这些查询联合起来。使用此查询作为 Command 对象的源来创建报告。

# jquery - ruby on rails jquery 以js形式提交表单

> ID：11658326
> 
> 赞同：4
> 
> 时间：2012-07-25T20:45:40.627
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

在我看来，我有这段代码：

```
<%= form_for :folder_name, :remote => true, :method => "get", :url => {:action 
    => "show_workflow_list"} do |f| %>
  <%= f.select :foldernames, options_for_select(@folders, @folders.first), {}, {:onchange => ("this.form.submit()")}%><br /><br />
  <%= hidden_field_tag 'selected_domain', params[:domain_selected] %> 
```

当我更改下拉列表中的值时，表单被提交为：

```
Processing by DeploymentGroupController#show_workflow_list as HTML
Parameters: {"utf8"=>"Γ£ô", "folder_name"=>{"foldernames"=>"DETAIL_ADJUSTMENT" 
```

当我添加提交按钮而不是`:onchange=>`下面的按钮时：

```
<%= form_for :folder_name, :remote => true, :method => "get", :url => {:action => "show_workflow_list"} do |f| %>
  <%= f.select :foldernames, options_for_select(@folders, @folders.first)%><br /><br />
  <%= hidden_field_tag 'selected_domain', params[:domain_selected] %>
  <pre><%= f.submit "Submit"%></pre> 
```

请求是这样提交的：

```
Processing by DeploymentGroupController#show_workflow_list as JS
Parameters: {"utf8"=>"Γ£ô", "folder_name"=>{"foldernames"=>"DETAIL_ADJUSTMENT" 
```

我的`show_workflow_list`操作中有以下代码：

```
def show_workflow_list
  //some code
  respond_to do |format|
    format.js
  end
end 
```

我有一个`show_workflow_list.js.erb`包含以下内容的文件：

```
$('#workflow_selection').html("<%=j render "show_workflow_list" %>"); 
```

问题是当我将其更改为 时`onchange=> submit`，它会将操作作为 HTML 处理：

```
 Processing by DeploymentGroupController#show_workflow_list as HTML 
```

而不是 JS 当有一个提交按钮时：

```
 Processing by DeploymentGroupController#show_workflow_list as JS 
```

所以我得到了一个 406 状态错误并且`show_workflow_list`没有被渲染。

* * *

更新：

我明白为什么`onchange=>`以 HTML 格式发送。原因是select的格式是“ `select(object, method, choices, options = {}, html_options = {})`”。我提到的地方`":onchange=>this.for.submit" is under html_options={}"`就是为什么它被提交为 HTML。我需要在同一页面上渲染 a`_show_workflow_list.html.erb`之间的部分`<div>`，所以我更改了控制器中的代码，如下所示：

```
def show_workflow_list
  //code here
  respond_to do |format|
    format.html{?}
  end
end 
```

在上面的代码中，我需要在 中填写一些内容，`{}`以便`format.html`在我的.`_show_workflow_list``div``make_deployment_group.html.erb`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T23:55:42.133

在 JS 文件上，您应该这样做：

```
$('#foldernames').change(function() {
  $('#folder_name').submit()
}); 
```

在你的控制器中你应该有这个：

```
def show_workflow_list
  //code here
  render :format => :js
end 
```

当您更改该值时，它应该提交您的表单，以便它应该向您的控制器发送一个 ajax 请求。你的控制器应该呈现一个 js 格式并执行你的`show_workflow_list.js.erb`. 要检查它，您可以使用像 firebug 这样的 javascript 控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:24:38.853

这是因为您错误地使用了 jQuery 提交调用

检查这篇文章...它对我 [有用 Rails 远程表单通过 javascript 提交](https://stackoverflow.com/questions/10340229/rails-remote-form-submit-through-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:45:27.797

尝试这个

```
<%= f.select :foldernames, options_for_select(@folders, @folders.first), {}, {:onchange => remote_function(:method => :get, :url => {:action => 'show_workflow_list'}, :with => 'Form.Element.serialize(this)')}%><br /><br /> 
```

# bash - if 语句中的 ASH if 语句

> ID：11658327
> 
> 赞同：0
> 
> 时间：2012-07-25T20:45:43.503
> 
> 标签：bash, syntax, ash

我见过许多具有多个相互关联的条件的示例，但是有两种不同的不相关条件，其中第二个条件只有在第一个条件为真时才会发生。如何将以下内容组织得井井有条并排成一行？

```
funtion1
if [[ $valueX == 2 ]]; then
    funtion2
    if [[ $valueY -gt 16 ]]; then
        sleep $valueZ
    fi
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:00:32.783

你可以把它组织得井井有条，或者你可以把它排成一行。

我想说你现在拥有的东西已经很好地组织起来了。我认为没有任何方法可以在不使其不那么清晰的情况下以更少的行重新组织它。

（如果`funtion2`不存在，您可以将这两个条件结合起来。）

如果您坚持将整个代码块放在行中，您可以简单地通过加入行并添加分号来做到这一点，如下所示：

```
funtion1 ; if [[ $valueX == 2 ]]; then funtion2 ; if [[ $valueY -gt 16 ]]; then sleep $valueZ ; fi ; fi 
```

但正如我所说，我认为没有人会称其为“井井有条”；它比原始的多行缩进版本更难阅读和维护。

请注意，`[[`语法是特定于[bash](/questions/tagged/bash "显示标记为“bash”的问题")的；[ash](/questions/tagged/ash "显示标记为“灰”的问题")不支持。

（哦，你拼错了“function”。）

# hbase - HBase 什么时候真正删除一行？

> ID：11658328
> 
> 赞同：5
> 
> 时间：2012-07-25T20:45:44.170
> 
> 标签：hbase

当发布`Delete`到 hbase 时，我知道它不会立即删除数据。但是什么时候删除数据，我的意思是，物理上？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T20:47:52.513

当您向 HBase 写入内容时，它会存储在 memstore (RAM) 中，然后再写入磁盘。这些磁盘写入通常是不可变的，除非压缩。

在 hbase 的主要压缩期间会处理删除 - 这些大约每 24 小时运行一次，并且可以通过 API 或 shell 触发。主要压缩过程删除标记 - 次要压缩不会。

当您发出正常删除时，它会产生一个删除（墓碑）标记 - 这些删除标记和它们所代表的数据在压缩期间被删除（在压缩后的合并文件中不存在）。

此外，如果您删除数据并放入更多数据但时间戳早于墓碑时间戳（& 符合早期删除的标准），则删除/墓碑标记可能会掩盖进一步的获取（仅在主要压缩后修复已运行）&因此在这种情况下，直到主要压缩之后，您才会收到插入的值。

希望能帮助到你

# sql - SQL Server CASE 函数只返回字符串中的第一个值

> ID：11658329
> 
> 赞同：0
> 
> 时间：2012-07-25T20:45:50.410
> 
> 标签：sql, sql-server

我正在使用该`CASE`命令将子字符串查询结果从数字更改为名称。

事情似乎工作正常，但我很难弄清楚为什么结果只显示字符串的第一个值。

```
Declare @OverrideON INT, @OverrideOFF INT 
SET @OverrideON = 1  SET @OverrideOFF = 0

SELECT LonDeviceName,
CASE  WHEN SUBSTRING (PointValue,65,1) = @OverrideON  THEN 'Fan In Override' 
      WHEN SUBSTRING (PointValue,67,1) = @OverrideON  THEN 'HW In Override'    
      WHEN SUBSTRING (PointValue,69,1) = @OverrideON  THEN 'CHW In Override'
      WHEN SUBSTRING (PointValue,71,1) = @OverrideON  THEN 'OAD In Override'
      WHEN SUBSTRING (PointValue,73,1) = @OverrideON  THEN 'VFD In Override'
      WHEN SUBSTRING (PointValue,65,1) = @OverrideOFF THEN 'Fan Normal' 
      WHEN SUBSTRING (PointValue,67,1) = @OverrideOFF THEN 'HW Normal'    
      WHEN SUBSTRING (PointValue,69,1) = @OverrideOFF THEN 'CHW Normal'
      WHEN SUBSTRING (PointValue,71,1) = @OverrideOFF THEN 'OAD Normal'
      WHEN SUBSTRING (PointValue,73,1) = @OverrideOFF THEN 'VFD Normal'
      ELSE '**StringError**'
END as 'Manual Overrides'
FROM dbo.Points
WHERE LogicName like '%override%' 
```

当代码运行时，它会创建一个标题`Manual Overrides`为正确的列，在该列中显示字符串中的第一个值。但是，字符串中其他四个值的结果在哪里。任何帮助或想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:55:34.340

像这样的东西怎么样：

```
SELECT LonDeviceName,
    CASE  WHEN SUBSTRING (PointValue,65,1) = @OverrideON  THEN 'In Override'
          WHEN SUBSTRING (PointValue,65,1) = @OverrideOFF THEN 'Normal'
          ELSE '**StringError**'
    END as 'Fan',
    CASE  WHEN SUBSTRING (PointValue,67,1) = @OverrideON  THEN 'In Override' 
          WHEN SUBSTRING (PointValue,67,1) = @OverrideOFF THEN 'Normal'
          ELSE '**StringError**'
    END as 'HW',
    CASE  WHEN SUBSTRING (PointValue,69,1) = @OverrideON  THEN 'In Override'
          WHEN SUBSTRING (PointValue,69,1) = @OverrideOFF THEN 'Normal'
          ELSE '**StringError**'
    END as 'CHW',
    CASE  WHEN SUBSTRING (PointValue,71,1) = @OverrideON  THEN 'In Override'
          WHEN SUBSTRING (PointValue,71,1) = @OverrideOFF THEN 'Normal'
          ELSE '**StringError**'
    END as 'OAD',
    CASE  WHEN SUBSTRING (PointValue,73,1) = @OverrideON  THEN 'In Override'
          WHEN SUBSTRING (PointValue,73,1) = @OverrideOFF THEN 'Normal'
          ELSE '**StringError**'
    END as 'VFD'
FROM dbo.Points
WHERE LogicName like '%override%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:56:32.657

你真的需要这些庞大的变量来表示 1 和 0 吗？真的吗？无论如何，真的在猜测你想要在这里输出什么。也许是这样：

```
SELECT LonDeviceName, [Manual Overrides] = '' 
    + 'Fan '  + CASE SUBSTRING (PointValue,65,1) 
                WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + ',HW '  + CASE SUBSTRING (PointValue,67,1) 
                WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + ',CHW ' + CASE SUBSTRING (PointValue,69,1) 
                WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + ',OAD ' + CASE SUBSTRING (PointValue,71,1) 
                WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + ',VFD ' + CASE SUBSTRING (PointValue,73,1) 
                WHEN '1' THEN 'In Override' ELSE 'Normal' END
FROM dbo.Points
WHERE LogicName LIKE '%override%'; 
```

或者，也许您只想查看实际覆盖的值：

```
SELECT LonDeviceName, [Manual Overrides] = '' 
    + 'Fan '  + CASE SUBSTRING (PointValue,65,1) 
                WHEN '1' THEN 'In Override' ELSE '' END
    + ',HW '  + CASE SUBSTRING (PointValue,67,1) 
                WHEN '1' THEN 'In Override' ELSE '' END
    + ',CHW ' + CASE SUBSTRING (PointValue,69,1) 
                WHEN '1' THEN 'In Override' ELSE '' END
    + ',OAD ' + CASE SUBSTRING (PointValue,71,1) 
                WHEN '1' THEN 'In Override' ELSE '' END
    + ',VFD ' + CASE SUBSTRING (PointValue,73,1) 
                WHEN '1' THEN 'In Override' ELSE '' END
FROM dbo.Points
WHERE LogicName LIKE '%override%'; 
```

或者，也许您毕竟想要单独的列：

```
SELECT LonDeviceName, 
    + [Fan] = CASE SUBSTRING (PointValue,65,1) 
              WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + [HW]  = CASE SUBSTRING (PointValue,67,1) 
              WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + [CHW] = CASE SUBSTRING (PointValue,69,1) 
              WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + [OAD] = CASE SUBSTRING (PointValue,71,1) 
              WHEN '1' THEN 'In Override' ELSE 'Normal' END
    + [VFD] = CASE SUBSTRING (PointValue,73,1) 
              WHEN '1' THEN 'In Override' ELSE 'Normal' END
FROM dbo.Points
WHERE LogicName LIKE '%override%'; 
```

或者可能是完全不同的东西。如果我们看不到源数据或您想要的结果，就很难弥合您编写的查询与您想要的结果之间的差距。

# matlab - 创建显示答案的弹出式 GUI

> ID：11658334
> 
> 赞同：1
> 
> 时间：2012-07-25T20:46:25.430
> 
> 标签：matlab, user-interface, variables, popup

所以目前我有一个代码在 Matlab 工作区中生成一些变量，这很好而且很花哨，但我想知道是否有办法让这些结果显示在弹出式 GUI 中？我知道我可以创建一个显示输入选项的 GUI，但我只是想知道是否也有办法进行输出。谢谢

目前我正在以一种非直接的方式进行

```
tap_total = evalin( 'base', 'tap_total' );
streaking = evalin( 'base', 'streaking' );
menu('Max Banding and Streaking',max(tap_total),max(streaking)) 
```

这会在我的菜单中弹出结果，但标准文本框会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:27:42.993

你可以做

```
msgbox(str); 
```

显示消息。这就是你所追求的吗？

# javascript - 与 SylvesterJS 的线交叉点 - 我是否打破了我的数学？

> ID：11658338
> 
> 赞同：1
> 
> 时间：2012-07-25T20:46:34.950
> 
> 标签：javascript, math, geometry, lines

我正在使用[sylvester.js](http://sylvester.jcoglan.com/)作为数学框架，但似乎忘记了几何（可能），或者没有正确使用它。我正在努力：

```
var angle = 45;
var line1 = $L([1,1],[Math.tan(angle * Math.PI/180),Math.tan(angle * Math.PI/180)]); //Should be a 45-degree angle
angle = -45;
var line2 = $L([0,0],[Math.tan(angle * Math.PI/180),Math.tan(angle * Math.PI/180)]); //Should be a -45-degree angle
line1.intersects(line2);
//returns false, should be true, I would think? 
```

这应该在 -45 度处创建一条通过 0,0 的线，并在 45 度处创建一条通过 1,1 的线相交，对吧？有什么建议么？（注意：我通常使用 deg2rad var 而不是 Math.PI/180，这纯粹是为了举例）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:11:31.033

回想一下，角的切线等于另一条腿在相邻腿上的长度。换句话说，超越运行。因此，切线为您提供直线的斜率，而不是沿直线的矢量。

![在此处输入图像描述](../Images/6a9e965b43fc822c3ce5b652c7249dbf.png)

要将角度转换为矢量，请使用正弦和余弦：

```
m⃑ = [cos(θ), sin(θ)]

```

您可以在从极坐标转换为笛卡尔坐标的公式中看到这一点：

```
(x, y) = (r * cos(θ), r * sin(θ))
```

由于幅度无关紧要（即使您有幅度，也会`$L`对向量进行归一化），将“r”排除在等式之外，您就会得到上面**m⃑**的等式。

请注意，对于代码中的每个方向向量，两个分量相等，因此向量位于 y=x; 线上。因此它们是平行的。您还可以显示向量是平行的，因为向量是彼此的标量倍数。更具体地说，由于向量具有相反的方向（标量为负），因此它们是[反平行](http://www.iscid.org/encyclopedia/Antiparallel)的。参考点 (0,0) 和 (1,1) 位于两条线上，因此每个向量跨越的线重叠。Sylvester.js[`Line.intersects`](http://sylvester.jcoglan.com/api/line.html#intersects)仅在存在唯一交点时才返回 true。由于两条线处处相交，因此没有唯一点，函数返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:07:43.140

要从某个**角度**定义**矢量**，您需要进行以下计算。

 **```
x = sin(angle)
y = cos(angle) 
```

你已经这样做了：

```
x = tan(angle)
y = tan(angle) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:04:34.813

这只是一个猜测，因为我没有对 sylvester 做过很多，但由于 line 是 vector 的一个特殊实例，你的问题可能在于事物的定义方式。当您定义 line2 并将其锚定在 [0,0] 时，第二个点是 [-.013, -.013]，line2 可能会朝错误的方向发射，从而与另一条线相交；我不确定这条线是否会双向延伸。**

# java - Swing 中的鼠标和键盘监听器

> ID：11658340
> 
> 赞同：1
> 
> 时间：2012-07-25T20:46:45.327
> 
> 标签：java, swing, events, netbeans, actionlistener

这个监听器 95% 的时间都在工作：

```
 messagesJList.addListSelectionListener(new javax.swing.event.ListSelectionListener() {
        public void valueChanged(javax.swing.event.ListSelectionEvent evt) {
            messagesJListValueChanged(evt);
        }
    }); 
```

但是，它有时会在不方便的时候注册。毫无疑问，我的错误处理是根本问题。话虽如此，是否有一个替代的侦听器可以聚合各种鼠标和键盘侦听器，但只有那些事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:10:48.553

> 这个监听器 95% 的时间都在工作：

在所有情况下都对我有用，肯定需要测试是否`selectedItem, Index or Row`大于`-1 (no selection)`

```
 jList.addListSelectionListener(new ListSelectionListener() {

        @Override
        public void valueChanged(ListSelectionEvent e) {
            if (!e.getValueIsAdjusting()) {
                int selectedRow = jList.getSelectedIndex();
                if (selectedRow> -1) {
                    System.out.println("selection");
                }                    
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:15:47.873

我只是结合：

```
private void messagesJListKeyReleased(java.awt.event.KeyEvent evt) {
    userSelectedRow();
}

private void messagesJListMouseReleased(java.awt.event.MouseEvent evt) {
    userSelectedRow();
} 
```

这样只有当用户实际使用鼠标或键盘单击时，才会调用 userSelectedRow() 方法。

# cuda - 如何从 OpenCL 内核获取全局变量的值来托管 C++ 程序？

> ID：11658341
> 
> 赞同：0
> 
> 时间：2012-07-25T20:46:47.567
> 
> 标签：cuda, opencl

在 CUDA 驱动程序 API 中，有一个函数调用`cuModuleGetGlobal`，它允许您通过名称获取 CUDA 模块（已构建的 CUDA 程序的对象）中的全局变量的值。我想知道OpenCL是否具有相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:31:06.407

不，OpenCL 1.2 不提供回读全局变量值的方法。

然而，这并不是一个巨大的限制。在 OpenCL 中，程序范围变量（即全局变量）必须在`__constant`地址空间中定义，并且必须使用编译时常量进行初始化。因此，内核永远不能改变全局变量的值。因此可以很容易地跟踪宿主代码中全局变量的值。

# octave - Octave 3.6.2 上的 Uicontrol

> ID：11658345
> 
> 赞同：1
> 
> 时间：2012-07-25T20:47:00.423
> 
> 标签：octave

我正在尝试将脚本从 Matlab 移植到 Octave。我想念的一个函数是 uicontrol()，用于显示切换按钮和按钮。

关于 SO 有这个问题：[Matlab's uicontrol in Octave 的实现？](https://stackoverflow.com/q/3516747/1284631) 当时在 Octave 中没有实现 uicontrol()，但是从 3.6.N 开始，它被宣传为正在实现：[http ://www.octave.org/wiki/index.php?title=FAQ#Why_are_the_developers_planning_to_replace_Gnuplot_with_an_OpenGL_backend.3F](http://www.octave.org/wiki/index.php?title=FAQ#Why_are_the_developers_planning_to_replace_Gnuplot_with_an_OpenGL_backend.3F)

但是，在 Ubuntu Quantal 上安装 octave 3.6.2 后，出现此错误：

```
octave:1> uicontrol
ans=-1.8402
error: __go_draw_figure__: unknown object class, uicontrol
error: called from:
error:   /usr/share/octave/3.6.2/m/plot/private/__go_draw_figure__.m at line 181, column 15
error:   /usr/share/octave/3.6.2/m/plot/__gnuplot_drawnow__.m at line 86, column 5 
```

但是，/usr/share/octave/3.6.2/m/plot/uicontrol.m 是存在的。

有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:47:49.737

回答我自己（至少部分），对于那些我们可能会遇到同样问题的人：Octave 3.6 引入了一个新的图形工具包，即 FLTK，以及默认的 Gnuplot。安装的图形工具包通过以下方式可见：

```
octave> available_graphics_toolkits 
```

命令。当前使用的图形工具包由以下给出：

```
octave> graphics_toolkit 
```

默认值为：“gnuplot”。或者，uicontrol 与 gnuplot 不兼容，但与 FLTK 兼容。因此，在调用 uicontrol 函数之前，应该切换到 FLTK 图形工具包，使用以下命令：

```
octave> graphics_toolkit fltk; 
```

在调用 uicontrol 函数之前。

然而，这个答案只是部分的：虽然使用 FLTK 图形工具包，uicontrol 似乎可以正常工作，甚至返回一个有效的处理程序（允许设置和获取它的属性），实际的按钮在图中是不可见的......所以，另一个：有什么帮助吗？

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:31:29.807

我使用的是 MSVC/win32 版本的 Octave 3.6.2；这与 QtHandles 一起使用，它适用于 uicontrol（仅使用基本小部件进行测试 - 按钮、文本框）。

# flash - 从 as3 swf 调用 as2 函数

> ID：11658346
> 
> 赞同：0
> 
> 时间：2012-07-25T20:47:00.580
> 
> 标签：flash

我有一个旧的基于 AS2 的 SWF 文件，里面有几个全局定义的函数。当我将它加载到 AS3 SWF 中时，我收到以下错误：

`Scene 1, Layer 'Layer 1', Frame 1, Line 9 1061: Call to a possibly undefined method startDancing through a reference with static type flash.display:AVM1Movie.`

我通过以下方式加载基于 as2 的 swf：

```
var mLoader:Loader = new Loader();
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
mLoader.load(new URLRequest("s.swf"));

function onCompleteHandler(evt:Event)
{
    var embedSWF:AVM1Movie = AVM1Movie(evt.target.content);
    addChild(embedSWF);
    embedSWF.startDancing();
    trace('asd');
} 
```

startDancing 在 AS2 SWF 文件的第一帧中全局定义。如何调用它的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:30:29.193

一些选择

*   检查您的 startDancing 是否必须是公共方法
*   使用 AVM2Loader [http://www.libspark.org/svn/as3/AVM2Loader/src/net/fladdict/display/AVM2Loader.](http://www.libspark.org/svn/as3/AVM2Loader/src/net/fladdict/display/AVM2Loader.as)因为 这会在你的 avm1 电影的加载时间破解
*   或者最后你可以创建一个本地连接 AS2 和 AS3 可以通过这个频道交谈 ^^ [http://livedocs.adobe.com/flash/9.0_fr/ActionScriptLangRefV3/flash/net/LocalConnection.html](http://livedocs.adobe.com/flash/9.0_fr/ActionScriptLangRefV3/flash/net/LocalConnection.html)

# extjs - Extjs4，如何在编辑功能中恢复编辑的网格单元格值？

> ID：11658348
> 
> 赞同：3
> 
> 时间：2012-07-25T20:47:04.543
> 
> 标签：extjs, extjs4

我需要在编辑函数中恢复（将值设置为编辑前的值）编辑的网格单元格值，而不是在 validateedit 函数中。

```
"orderList": {
    validateedit: function (plugin, edit) {
      //validate...
    },
    edit: function (plugin, edit) {
        Ext.MessageBox.confirm('Confirm', 'Are you sure to change this order status?', function (btn) {
        if (btn == 'yes') {
            //update
        } else {
            // I want to rollback!
            edit.cancel = true;
            edit.record.data[edit.field] = edit.originalValue; //it does not work
        }
        });
    }
} 
```

如何更改网格单元格值（编辑器）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:19:09.497

[拒绝方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-reject)怎么样：

```
"orderList": {
    validateedit: function (plugin, edit) {
      //validate...
    },
    edit: function (plugin, edit) {
        Ext.MessageBox.confirm('Confirm', 'Are you sure to change this order status?', function (btn) {
            if (btn == 'yes') {
                //update
            } else {
                edit.record.reject(); // this should revert all changes
            }
        });
    }
} 
```

另请注意，事件的第二个参数（您命名为“edit”的那个）`edit`不包含`cancel`属性，即`beforeedit`事件的属性。所以这条线`edit.cancel = true`不会为你做任何事情。

我也很好奇你为什么不使用这个`beforeedit`事件，它似乎更适合这种事情——这就是为什么它确实有这个`cancel`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T20:41:53.283

如果您绑定到`afteredit`网格上的事件，则可以执行以下操作，具体取决于您要重置的粒度。

**注意**：我没有添加任何逻辑来保持快速和直截了当。

## 仅重置当前更改/单元格

```
grid.on('afteredit', function(e) {
  e.record.set(e.field, e.originalValue);
} 
```

## 重置整条记录/行

```
grid.on('afteredit', function(e) {
  e.record.reject();
} 
```

## 重置整个网格

```
grid.on('afteredit', function(e) {
  e.grid.store.rejectChanges();
} 
```

# java - 如果 URL 中有扩展名，Spring @RequestMapping 无法按预期工作

> ID：11658353
> 
> 赞同：2
> 
> 时间：2012-07-25T20:47:18.617
> 
> 标签：java, spring-mvc, mapping

我有两个请求网址

/domain/entity/list.vendorname /domain/entity/list

控制器中的映射是：-

```
@RequestMapping(value = "/entity/list.{vendorId}")

@RequestMapping(value = "/entity/list") 
```

问题：-

我的网址：- /domain/entity/list.vendorname

正在映射到 `@RequestMapping(value = "/entity/list")`

方法而不是另一种。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:28:05.987

原因是默认情况下，找到请求 URL 映射的组件 - [RequestMappingHandlerMapping](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerMapping.html)也匹配后缀（`/entity/list`并且`/entity/list.*`被认为是等效的。修复可能是关闭后缀匹配：

```
<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useSuffixPatternMatch" value="false"></property>
</bean> 
```

但是，这也意味着您还必须手动注册 handlerAdapter - 如果您使用`<mvc:annotation-driven/>`，您可以将其替换为以下内容：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>

            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T12:18:20.940

从 Spring 3.2 开始，您还可以设置 RequestMappingHandlerMapping bean 的 useRegisteredSuffixPatternMatch 属性，以保持激活 suffixPattern 识别但仅限于注册扩展。

在这里您只定义 json 和 xml 扩展：

```
<bean id="handlerMapping"
      class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="contentNegotiationManager" ref="contentNegotiationManager"/>
    <property name="useRegisteredSuffixPatternMatch" value="true"/>
</bean>

<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="favorPathExtension" value="false"/>
    <property name="favorParameter" value="true"/>
    <property name="mediaTypes">
        <value>
            json=application/json
            xml=application/xml
        </value>
    </property>
</bean> 
```

请注意，mvc:annotation-driven 现在接受 contentNegotiation 选项以提供自定义 bean，但 RequestMappingHandlerMapping 的属性必须更改为 true（默认为 false）（参见[https://jira.springsource.org/browse/SPR-7632](https://jira.springsource.org/browse/SPR-7632)）。

因此，您仍然必须覆盖所有 mvc:annotation-driven 配置。我向 Spring 开了一张票，要求定制 RequestMappingHandlerMapping：[https](https://jira.springsource.org/browse/SPR-11253) ://jira.springsource.org/browse/SPR-11253 。如果您有兴趣，请投票。

在覆盖时，请小心考虑自定义执行管理覆盖。否则，您的所有自定义异常映射都将失败。您将不得不重用带有列表 bean 的 messageCoverters：

```
<util:list id="messageConverters">
    <bean class="your.custom.message.converter.IfAny"></bean>
    <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
    <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
</util:list>

<bean name="exceptionHandlerExceptionResolver"
      class="org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver">
    <property name="order" value="0"/>
    <property name="messageConverters" ref="messageConverters"/>
</bean>

<bean name="handlerAdapter"
      class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
            </property>
        </bean>
    </property>
    <property name="messageConverters" ref="messageConverters"/>
</bean>

<bean id="handlerMapping"
      class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="contentNegotiationManager" ref="contentNegotiationManager"/>
    <property name="useRegisteredSuffixPatternMatch" value="true"/>
</bean>

<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="favorPathExtension" value="false"/>
    <property name="favorParameter" value="true"/>
    <property name="mediaTypes">
        <value>
            json=application/json
            xml=application/xml
        </value>
    </property>
</bean> 
```

我在我参与的开源项目[Resthub](http://resthub.github.io/)中对这些主题进行了一组测试：请参阅[https://github.com/resthub/resthub-spring-stack/pull/219/files](https://github.com/resthub/resthub-spring-stack/pull/219/files)和[https:// github.com/resthub/resthub-spring-stack/issues/217](https://github.com/resthub/resthub-spring-stack/issues/217)

# excel - Excel VBA - cell value returns "False" instead of the value

> ID：11658363
> 
> 赞同：1
> 
> 时间：2012-07-25T20:47:59.097
> 
> 标签：excel, function, vba

I'm trying to return the value of a cell in an Excel spreadsheet, but it just shows "False" instead of the value of the cell.

Here's the function:

```
Function GenSelectStatement() As String    

Dim retstring As String    
Dim i As Integer    

retstring = Cells(1, 2).Select
MsgBox "restring: " & Cells(2, 2).Select      
GenSelectStatement = retstring    

End Function 
```

The cell in question has an alpha value like "xxx".

Both the msgbox display and the cell where the function is coded show "FALSE".

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:59:54.537

.Select is to select the cell.

If you want the value of the cell, try :

```
Worksheets("Data").Range("$P$1").Value 
```

Take a look on that link: [http://www.ozgrid.com/forum/showthread.php?t=11530](http://www.ozgrid.com/forum/showthread.php?t=11530)

Regards, Jim.

# opencl - 内核函数内工作项的序列化 - OpenCL

> ID：11658364
> 
> 赞同：0
> 
> 时间：2012-07-25T20:48:00.937
> 
> 标签：opencl

我正在从 openCL 的内核生成硬件模块（Verilog 上的描述）。我正在阅读一篇关于此的文章，作者对内核进行了一些预处理，预处理的第一步是：**内核函数内部工作项的序列化**，他们是这样解释的：

> “工作组中的工作项可以按任何顺序执行，前提是内核函数中不存在同步操作。基于这一观察，我们通过将指令包含在一个主体中来序列化工作项的执行考虑到工作组内抽象索引空间中的最大维数为三，内核函数进入三重嵌套循环。每个循环嵌套枚举相应维度中的工作项，从而序列化它们的执行。

他们提供了一个这样的例子：

```
int __kernel_indices[3];

__kernel_indices[2] = 0;
while (__kernel_indices[2]< __local_size[2]){
   __kernel_indices[1] = 0;
   while (__kernel_indices[1]< __local_size[1]){
      __kernel_indices[0] = 0;
      while (__kernel_indices[0]< __local_size[0]){

               //Kernel Body

      }
      __kernel_indices[0]++;
   }
   __kernel_indices[]++;
}
__kernel_indices[2]++; 
```

没看懂序列化的意思，是不是一次执行了一个工作项？或者当时只有 1 个工作组的工作项正在执行？

感谢您阅读这篇文章，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:06:48.387

是的，上面的内核使不同的工作项按顺序执行，而不是一起运行。在我看来，随着 while 循环的运行，越来越多的工作项开始执行。要理解这一点，请将每个工作项视为具有一个三维索引。

# java - 在 Android 上检测文件下载完成状态

> ID：11658368
> 
> 赞同：0
> 
> 时间：2012-07-25T20:48:14.133
> 
> 标签：java, android, io

我正在使用以下代码从服务器下载文件

```
conn=url.openConnection();
bytesTotal=conn.getContentLength();    
in= new BufferedReader(new InputStreamReader(conn.getInputStream()));

while (true){
    byteFromStream=in.read(buffer);
    if (byteFromStream==-1) break;
    bytesLoaded=bytesLoaded+byteFromStream;
} 
```

所以我基本上是在计算下载的字节数并将其与 bytesTotal 匹配。

最后，如果 bytesTotoal 与 bytesLoaded 不同，我是说下载状态不完整。

问题是 12 KB 的文件大小我获得了很好的成功率，但文件大小较高的状态总是不完整的。

他们是否有任何其他方式可以确定我的下载状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:59:02.550

也许你被这个打击了（引自 HttpURLConnection 文档）：

> 默认情况下，HttpURLConnection 的这个实现请求服务器使用 gzip 压缩。由于 getContentLength() 返回传输的字节数，因此您无法使用该方法预测可以从 getInputStream() 读取多少字节。相反，读取该流直到它耗尽：当 read() 返回 -1 时。可以通过在请求标头中设置可接受的编码来禁用 Gzip 压缩：

`urlConnection.setRequestProperty("Accept-Encoding", "identity");`

# objective-c - UINavigationController 工具栏中的 UIBarButton，它是拆分 VC 的详细视图

> ID：11658371
> 
> 赞同：0
> 
> 时间：2012-07-25T20:48:24.093
> 
> 标签：objective-c, uinavigationcontroller, uisplitviewcontroller, uitoolbar

我有一个拆分 VC 作为我的应用程序的入口点。详细 VC 是一个 UINavigationController，我想始终隐藏主 VC，以便我只能在工具栏的弹出窗口中使用它。

我的问题是我没有办法将 barButtonItem 从主 VC 放入我的详细 VC。工具栏总是空的（我不得不用`self.toolbarHidden = NO;`它来强制它显示，因为顶部有一个导航栏）。

我在 UINavigationController （实际的细节 VC）中有以下代码：

```
-(void) setBarButtonItem:(UIBarButtonItem *)barButtonItem {
  NSLog(@"adding toolbar button: %@", barButtonItem.title);

  UIToolbar *toolbar = [self toolbar];

  NSMutableArray *toolbarItems = [toolbar.items mutableCopy];

  if (_barButtonItem) [toolbarItems removeObject:_barButtonItem];

  if (barButtonItem) [toolbarItems insertObject:barButtonItem atIndex:0];

  _barButtonItem = barButtonItem;
} 
```

我错过了什么吗？我也尝试将它插入导航栏而不是工具栏，但它也没有显示在那里。请询问我在评论中未提供的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:09:15.993

In case anyone else is trying to do the same thing, I am leaving an implementation to have a UINavigationController as the Detail VC in a splitViewController and have the button at the top of each view controller as you navigate through to show/hide the Master VC:

Your Detail VC has to implement the protocol below (so you need to `@synthesize` the barButtonItem):

```
@protocol SplitViewBarButtonItemPresenter <NSObject>
@property (nonatomic, strong) UIBarButtonItem *barButtonItem;
@end 
```

You will need to grab and keep the barButtonItem passed from willHideViewController: in your Detail VC, but you have to do it in the Master VC. Use the following in your Master VC:

```
- (BOOL) splitViewController:(UISplitViewController *)sender
    shouldHideViewController:(UIViewController *)vc
               inOrientation:(UIInterfaceOrientation)orientation {

    return YES;
}

- (void)splitViewController:(UISplitViewController *)svc
     willHideViewController:(UIViewController *)aViewController
          withBarButtonItem:(UIBarButtonItem *)barButtonItem
       forPopoverController:(UIPopoverController *)pc {

    barButtonItem.title = self.title;

    [self splitViewBarButtonItemPresenter].barButtonItem = barButtonItem;

}

- (void)splitViewController:(UISplitViewController *)svc
     willShowViewController:(UIViewController *)aViewController
          withBarButtonItem:(UIBarButtonItem *)barButtonItem
       forPopoverController:(UIPopoverController *)pc {

    [self splitViewBarButtonItemPresenter].barButtonItem = nil;

}

- (id <SplitViewBarButtonItemPresenter>) splitViewBarButtonItemPresenter {

    id detailVC = [self.splitViewController.viewControllers lastObject];

    if ((![detailVC isKindOfClass:[MainDetailVC class]]) || (![detailVC conformsToProtocol:@protocol(SplitViewBarButtonItemPresenter)])) {

        detailVC = nil;
    }

    return detailVC;
} 
```

In each of the view controllers that you want the button to show, use the following code (you can also put this in a class and inherit from it if they are all the same type):

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    UIBarButtonItem *newBtn = [[UIBarButtonItem alloc]
            initWithTitle:@"Show Master MC" // might want a better title
            style:UIBarButtonItemStylePlain
            target:self action:@selector(forceOpenMasterVC)];

    self.navigationItem.rightBarButtonItem = newBtn;

}

-(void)forceOpenMasterVC {
    [((MainDetailVC *) self.navigationController) forceOpenMasterVC];
} 
```

Then in your Detail VC, use the following:

```
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
// Above line is needed because of self.barButtonItem.action
// It doesn't leak as far as I can tell

-(void)forceOpenMasterVC {
    // Grab the Master VC
    UIViewController * vc = [[self.splitViewController viewControllers] objectAtIndex:0];

    if (self.barButtonItem) {
        [self.barButtonItem.target
            performSelector:self.barButtonItem.action
            withObject: self.barButtonItem];
    }
} 
```

If anyone has a better way, please include it.

# django - 允许 Django 模型 ForeignKey 字段的表单上的 TextInput

> ID：11658372
> 
> 赞同：2
> 
> 时间：2012-07-25T20:48:33.090
> 
> 标签：django, django-models, django-forms, foreign-keys, django-views

我有一个表单，其中字段来自 ModelForm，其中一个是 models.ForeignKey 字段，它链接到我的用户模型中的用户名。这会导致数据库中的每个用户都列在选择字段中。我希望这个字段是一个 TextInput，有人在其中输入用户名，我已经在 ModelForm 中做到了。但是当我的视图通过 form.is_valid() 时，表单给出了一个错误，说这个字段是无效的。如果我删除 is_valid() 检查，它当然会给我一个错误，即由于数据未验证而无法保存表单。

如何验证 TextInput 并将其保存到我的 ForeignKey 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:01:48.343

像这里一样覆盖您的表单清理方法[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-clean-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-clean-method)

确保您的 clean 方法清除了文本字段（去除空格）并查找用户名（或用户 ID）的值实际上是正确的。

# ios - CoreData 使用 NSUndoManager 抛出异常

> ID：11658373
> 
> 赞同：1
> 
> 时间：2012-07-25T20:48:47.223
> 
> 标签：ios, core-data, nsundomanager

我有一个 iPad 应用程序，我在其中使用 NSUndoManager 和 Core Data。事情通常运作良好，除了当我多次撤消/重做时有一个半可重现的错误。我只在主线程上工作（至少，我已禁用 MagicalRecords 在辅助线程上使用 NSManagedObject。如果我尝试撤消/重做 NSManagedObject 到上下文的插入，问题总是会发生。

所以我有这样的事情：

```
if (!self.undoManager.isUndoing && !self.undoManager.isRedoing) 
{
    [self.undoManager undo];   
}
else 
{
    NSLog(@"gotcha!");
} 
```

几次之后，我得到以下异常。它发生在辅助线程上，这让我觉得 Core Data 正在后台做一些事情。

```
CoreData: error: Serious application error.  Exception was caught during Core Data
change processing.  This is usually a bug within an observer of 
NSManagedObjectContextObjectsDidChangeNotification.  _registerUndoObject:: NSUndoManager 
0xcea2d60 is in invalid state, must begin a group before registering undo
with userInfo (null) 2012-07-25 15:42:26.850 TT[3972:3c07] *** Terminating app due to 
uncaught exception 'NSInternalInconsistencyException', reason: '_registerUndoObject::
NSUndoManager 0xcea2d60 is in invalid state, must begin a group before registering undo 
```

有时我也会得到 EXEC_BAD_ACCESS，其他时候只是上面的异常。

知道是什么原因造成的吗？

编辑：澄清了 Mundi 的情况（见评论）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:29:13.907

撤消托管对象插入的标准方法是

```
[self.managedObjectContext deleteObject:theManagedObject];
// If you have saved already, you would need to save again. 
```

无需使用撤消机制。像这样，你的代码变成

*   更具**可读性**（你明确地说你想做什么）和
*   更**不容易出错**（更复杂的 API 不会发生不可预见的事件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:29:58.670

这是阻止我所有崩溃的解决方案：显然 Magical Records 默认使用 privateQueue 并发，如果您的代码不是线程安全的，我想事情不会成功。我所做的是将其从 NSPrivateQueueConcurrencyType 更改为 NSMainQueueConcurrencyType 以获取以下方法：

```
+ (NSManagedObjectContext *) MR_contextWithoutParent;
{
    NSManagedObjectContext *context = [[self alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
return context;
} 
```

我还发现了另一个在这里起作用的细节： [Core Data deleteObject: sets attributes to nil](https://stackoverflow.com/questions/2968063/core-data-deleteobject-sets-attributes-to-nil)

我必须做的是在添加/删除托管对象之前保存托管对象上下文。有点奇怪和低效，但省去了很多麻烦。

# android - 动态创建的功能性可点击表格行

> ID：11658377
> 
> 赞同：1
> 
> 时间：2012-07-25T20:49:08.127
> 
> 标签：android, onclick, tablelayout, tablerow, clickable

我看到了这个链接（http://stackoverflow.com/questions/6603868/android-onclicklistener-and-table-layout），它似乎对提问的人有用。话虽如此，这就是我的情况。

我有一个 TableLayout，动态填充了四列数据。该行作为一个整体需要是可点击的，因为没有像上面链接的示例那样的按钮。

单击的行需要传递其第一列（第 0 列）的数据，这只是一个字符串。这是调用以创建新行的函数。

```
private void addLotTableRow(CharSequence [] row, int count) {
    final TableLayout table = (TableLayout) findViewById(R.id.lotsTableList);
    final TableRow tr = (TableRow) getLayoutInflater().inflate(R.layout.lotsrow, null);
    TextView tv;
    // Fill Cells
        tv = (TextView) tr.findViewById(R.id.lotCell1);//Cell 1: Lot Number
        tv.setText(row[0]);

        tv = (TextView) tr.findViewById(R.id.lotCell2);//Cell 2: Sample
        tv.setText(row[1]);

        tv = (TextView) tr.findViewById(R.id.lotCell3);//Cell 3: Inspected
        tv.setText(row[3]);

        tv = (TextView) tr.findViewById(R.id.lotCell4);//Cell 4: Total
        tv.setText(row[2]);

        table.addView(tr);
} 
```

所以我最初试图制作一个 tr.setOnClickListener(new View.OnclickListener() {blahblah}); 在这个函数中，就在 table.addView(tr) 行之前。“等等等等”当然是一个 onClick(View v) 函数。我本来只会得到最后一行的数据，不管我点击了哪一行。现在，我正在尝试像上面的链接一样，并在创建所有表行之后从更高的函数产生 onclicks。我可能可以提供更多信息，但我认为人们现在可以从中得到这个想法！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:33:49.973

底线：我想通了！

根据我在问题中发布的链接的解决方案，我意识到我需要创建一个 textview 对象才能查看单元格的数据！所以这是我的代码，与上面保持不变的代码有关！

```
 int rowNumCount = table.getChildCount();
    for(int count = 1; count < rowNumCount; count++) {
        View v = table.getChildAt(count);
        if(v instanceof TableRow) {
            final TableRow clickRow = (TableRow)v;
            int rowCount = clickRow.getChildCount();
            v.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Context context = getTabHost().getContext();
                    TableRow row = (TableRow)v;
                    TextView tv = (TextView)row.getChildAt(0);
                    CharSequence text = "Lot VALUE Selected: " + tv.getText();
                    int duration = Toast.LENGTH_SHORT;
                    Toast.makeText(context, text, duration).show();
                }
            });
        }
    } 
```

就像我说的，我只需要获取第一列数据，因此 row.getChildAt(0); 线！所以我知道可能还没有人有机会回答这个问题，但我希望我的回答能在未来帮助其他人！

问题的基本原理，“为什么不只使用列表视图？” 答：我认为对于我正在制作的内容，表格格式看起来要好得多。

虽然我可能不会对我的代码设置进行重大更改，但我总是乐于听取有助于改进我的代码的更改！我爱这个社区！

# c++ - 使用 twinview Ubuntu 12.04 c++ 在 2 个显示器上的全屏应用程序

> ID：11658380
> 
> 赞同：2
> 
> 时间：2012-07-25T20:49:29.943
> 
> 标签：c++, nvidia, xlib

我正在处理的应用程序遇到问题。基本上我希望它全屏显示，但只在我的两台显示器中的一台上。我正在使用 Nvidia 显卡并运行 Twinview 将我的桌面扩展到两台显示器上。不幸的是，我尝试的所有东西都只能看到一台大显示器。有没有办法真正了解每台显示器的分辨率？我宁愿不必使用一堆外部库，我已经在使用 Xlib 来管理窗口，但我还没有找到任何可以看到 Twinview 的调用。

不幸的是，我现在几乎被 Twinview 困住了，我真的需要绕过它，而不仅仅是切换到其他东西。

谢谢

编辑：我能够让它基本上与 Xinerama 一起工作，但经过更多的努力，这是我最终得到的代码，更简洁，据我所知，Xinerama 已被弃用，所以这可能更好。

```
 XEvent xev;
    xev.type = ClientMessage;
    xev.xclient.window = this->window;
    xev.xclient.message_type = XInternAtom(this->display, "_NET_WM_STATE", False);
    xev.xclient.format = 32;
    xev.xclient.data.l[0] = 2; //0 is remove, 1 is add, 2 is toggle
    xev.xclient.data.l[1] = XInternAtom(this->display, "_NET_WM_STATE_FULLSCREEN", False); 
```

希望这会帮助其他遇到类似问题的人，窗口管理器可以很好地处理所有事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:54:32.297

你的 xorg.conf 中的这个选项应该这样做：

> `Option "NoTwinViewXineramaInfo"`
> 
> 此选项关闭 Xinerama 信息。关闭 Xinerama 信息后，Window Manager 认为整个 MetaMode 就是屏幕，并将跨越两个显示器的所有内容。当您单击最大化时，您的应用程序将填满两个屏幕，对于某些应用程序来说这是可以的，但对于其他应用程序来说这很烦人。我已经以两种方式对其进行了测试，并且更愿意让窗口管理器知道有两个显示器。

# javascript - 如何在 Rapheal js 中在屏幕（浏览器）边缘画一条线？

> ID：11658383
> 
> 赞同：1
> 
> 时间：2012-07-25T20:49:48.787
> 
> 标签：javascript, raphael

我想在 Raphael 中绘制（动画一条线）到屏幕/浏览器的边缘，例如从 x=100，y=100 像素到屏幕的最右边缘。

我知道如何做动画部分，我只需要知道如何动态找出最正确的坐标。

如何在不在浏览器中创建水平滚动条的情况下做这样的事情？

这在 Raphael js 中是否可能？

到目前为止我的代码：

```
var paper = Raphael(100, 100, ???, 1);
var lineToEdge = paper.path("M0 0");
lineToEdge.attr(fillerLine);
var anim = Raphael.animation({path: "M0 0L??? 100"}, 500);
lineToEdge.animate(anim.delay(2500)); 
```

**？？？** ***- 会以某种方式给我最正确的 x 位置的变量。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:57:09.083

使用 Javascript 的 window.screen 对象来获取此信息。

请参阅： [http ://www.javascriptkit.com/howto/newtech3.shtml](http://www.javascriptkit.com/howto/newtech3.shtml)

所以你的代码看起来像（对不起，我自己没有测试过）：

```
var paper = Raphael(100, 100, screen.width, 1);
var lineToEdge = paper.path("M0 0");
lineToEdge.attr(fillerLine);
var anim = Raphael.animation({path: "M0 0L"+screen.width+" 100"}, 500);
lineToEdge.animate(anim.delay(2500)); 
```

# image - Delphi - 想要一种自动化的方式来维护我的项目中的“源”图像文件和图像之间的链接

> ID：11658385
> 
> 赞同：0
> 
> 时间：2012-07-25T20:50:05.840
> 
> 标签：image, delphi, delphi-2006, timage, timagelist

我发现 Delphi 管理不善的一件事是图像“源”文件和我项目中的图像组件之间的链接（这里是 D2006，但我假设它适用于所有版本）。

假设我的项目中有各种静态图像 - 背景、工具栏按钮字形、各种吸引眼球的东西等。我有相应的 PNG/BMP 等文件集合，这些文件是我获取、抓取或创建的，并且这些文件已经加载在设计时进入图像组件。

一个问题是似乎没有自动方法可以在三个月后找出用于加载图像组件的源图像文件。当您需要编辑一个或多个图像时，这将成为一个更大的问题。

所以我*真正*想要的是将图像源文件包含在项目构建中的某种方式。即，当我进行构建时，所有图像组件都将首先从源重新加载。目前，当我使用 PhotoShop 或类似工具修改我的一些图像时，我面临着一个冗长且容易出错的过程，将修改后的图像重新加载到它们各自的图像容器中。

创建一个绑定了所有图像的资源并添加代码以在启动时加载图像组件是一种可行的方法吗？其他人有这个问题吗，你是怎么解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:23:35.540

没有一个标准组件支持您的要求。但是，Thany 的 TPngImageList 组件确实支持将用户定义的字符串与列表中的每个图像相关联的能力。

否则，要知道哪个文件属于哪个图像，我建议在编译时使用 .rc 文件将外部图像文件编译到应用程序的资源中，然后您可以在运行时将图像资源动态加载到组件中而不是在设计时。这样，您可以随心所欲地管理图像文件。当您更改文件时，它将在下次编译时自动链接到应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:26:32.940

您可以在运行时加载相同的图像，并将这些图像添加到版本控制中以方便维护。Lazarus 也有命令行工具（我猜你可能会发现 Delphi 也有类似的工具），它可以将文件放入资源中，供你的应用程序以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T15:20:06.423

我从 ico 文件加载图像，填充图像列表，然后在我的虚拟字符串树中为各种节点使用它。易于更改 ico 文件。/迈克尔

# wix - 如何检查 SQL Server 是否安装在 wix 3.5 中

> ID：11658391
> 
> 赞同：1
> 
> 时间：2012-07-25T20:50:38.080
> 
> 标签：wix, wix3.5

我在这里做错了什么。我从[StackOverFlow 线程](https://stackoverflow.com/questions/684950/how-to-detect-sql-server-express-in-wix-installer)中得到了这段代码，但它们都不起作用。

```
 <Property Id="SQLSERVER_INSTANCE">
      <RegistrySearch Id="SQLServerRegSearch" Root="HKLM" Key="SOFTWARE\Microsoft\Microsoft SQL Server" Type="raw" Name="InstalledInstances"/>
    </Property>
    <Feature Id="DatabaseFeature" Title="Database" Level="1" Display="expand">
      <Condition Level="0">
        <![CDATA[SQLSERVER_INSTANCE = ""]]>
      </Condition>
      <ComponentRef Id='SqlComponent' />
      <ComponentRef Id='cmpMDF' />
      <ComponentRef Id='cmpLDF' />
    </Feature> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T19:27:32.073

32 位和 64 位版本的 Windows 之间的 SQL Server 注册表项存在差异。

这很可能是您的 WiX 代码无法正常工作的原因。

有关一些全面的代码片段，请参阅此博客：[http ://robs-got-a-blog.blogspot.com/2011/08/detecting-sql-server-from-wix-installer.html](http://robs-got-a-blog.blogspot.com/2011/08/detecting-sql-server-from-wix-installer.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T20:04:05.530

这有效：

```
<Property Id="ISSQLSERVERSERVICEINSTALLED" >
  <RegistrySearch Id="IsSqlServerServiceInstalled" Root="HKLM" Key="SYSTEM\CurrentControlSet\services\MSSQLSERVER" Name="Description" Type="raw"/>
</Property> 
```

# jquery - Jquery Firefox/Firebug 递归

> ID：11658395
> 
> 赞同：1
> 
> 时间：2012-07-25T20:50:57.943
> 
> 标签：jquery, firefox, recursion, firebug

我拿了这个片段，它工作得很好，但是如果萤火虫控制台说“递归过多”，火狐/萤火虫就会死去。这是一篇有类似问题的帖子，我觉得没有正确解决[Jquery Too Much Recursion Error](https://stackoverflow.com/questions/3043970/jquery-too-much-recursion-error)

有没有办法让这种颜色动画连续循环而不产生这个递归问题？如果没有，我怎样才能让它在没有递归的情况下工作？指定直到结束的时间量？

```
$(document).ready(function() {
    spectrum();

    function spectrum(){
        var  hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' +  (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() *  256)) + ')';
        $('#welcome').animate( { backgroundColor: hue }, 1000);
        spectrum(); 
    }       
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:53:29.863

您正在尽快运行该功能，而不是在动画完成时运行。这会导致函数每秒可能运行数百次，从而给您带来递归问题：

```
$(document).ready(function() {

    spectrum();

    function spectrum(){
        var  hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' +  (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() *  256)) + ')';
        $('#welcome').animate( { backgroundColor: hue }, 1000, spectrum);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:53:56.713

那是因为您的递归调用不断被触发，而不是在动画完成后被触发。而是将调用放在 animate 函数的回调中，例如：

```
spectrum();
function spectrum() {
    var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
    $('#welcome').animate({
        backgroundColor: hue
    }, 1000, function() {
        spectrum();
    });
}​ 
```

# backbone.js - 骨干下划线模板

> ID：11658396
> 
> 赞同：0
> 
> 时间：2012-07-25T20:51:02.580
> 
> 标签：backbone.js, underscore.js

所以我正在检查与最新主干/下划线版本相关的更改。之前我有一个使用 BB 0.5.2 并下划线 1.1.7 运行的项目。我注意到在新版本的视图中定义模板属性时有些奇怪，这让我对升级有所保留。

在我当前的版本中，我会这样定义一个视图：

```
var MyView = Backbone.View.extend({
  template: _.template($('#exampleTemplate').html()),
  initialize: function() {...},
  render: function() { $(this.el).html(this.template(someObjectParam)); },
}); 
```

但是，如果我尝试以相同的方式工作，以简化的 todo 克隆尝试为例，我会设置一个带有内联脚本模板的 html，如下所示：

```
<script>
  $(document).ready(function() {
    app.init();
  });
</script>

<script type="text/template" id="itemViewTemplate">
  <div class="item">
    <input type="checkbox" name="isComplete" value="<%= item.value %>"/>
    <span class="description"><%= item.description %></span>
  </div>
</script> 
```

在我包含的 JS 文件中，我有：

```
var ItemView = Backbone.View.extend({   
  el: 'body',

  // Below causes error in underscore template, as the jquery object .html() call
  // returns null.  Commenting will allow script to work as expected.
  templateProp: _.template($('#itemViewTemplate').html()),  

  initialize: function() {
    // Same call to retrieve template html, returns expected template content.
    console.log($('#itemViewTemplate').html());  

    // Defining view template property inside here and calling it, 
    // properly renders.
    this.template = _.template($('#itemViewTemplate').html());
    this.$el.html(this.template({item: {value: 1, description: 'Something'}}));
  },
});

var app = {
  init: function() {
    console.log('Fire up the app');
    var itemView = new ItemView();
  }
} 
```

所以我很困惑为什么定义模板属性会直接导致检索模板html的调用返回一个空值，从而破坏了定义下划线模板对象的尝试（满口）。但是，如果定义是在初始化函数中完成的，则检索模板 html 的调用会正确找到模板，因此可以将其内容传递给下划线模板。有人看到我可能缺少的东西吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:17:22.473

如果这：

```
var ItemView = Backbone.View.extend({   
  //...
  templateProp: _.template($('#itemViewTemplate').html()),
  //...
}); 
```

失败是因为`$('#itemViewTemplate').html()`is `null`，那么你有一个简单的时间问题：你试图`#itemViewTemplate`在它存在之前读取它的内容。您的旧版本应该遇到完全相同的问题。

要么确保所有内容都以正确的顺序加载（即你的视图*在*你的模板之后`<script>`），要么在你的视图中编译模板`initialize`。`templateProp`您可以在您的视图中检查，`prototype`如果需要，仅在首次使用时编译它：

```
initialize: function() {
    if(!this.constructor.prototype.template)
        this.constructor.prototype.template = _.template($('#itemViewTemplate').html());
    //...
} 
```

演示：http: [//jsfiddle.net/ambiguous/HmP8U/](http://jsfiddle.net/ambiguous/HmP8U/)

# matlab - 为什么这个 CAT 操作中有一个单引号？

> ID：11658400
> 
> 赞同：0
> 
> 时间：2012-07-25T20:51:13.047
> 
> 标签：matlab, syntax, matrix

在阅读某人的代码时，我遇到了这个：

```
data = [data.a, data.b, data.c, ...
        data.x, data.y']; 
```

为什么 y 后面有一个单引号？它与它的数据类型有关吗？删除后出现此错误：

```
??? Error using ==> horzcat
CAT arguments dimensions are not consistent. 
```

有人可以解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:53:47.883

单引号是 Matlab 的`transposition`运算符。如果`x`是行向量，那么`x'`是列向量，依此类推。

如果`data.x`和`data.y`都是行向量，那么您尝试水平连接`data.x`并且`data.y'`不成功也就不足为奇了，这不是一个定义明确的操作，因为前者（我猜）是行向量，而后者（如果我猜对了）是列向量。

# mysql - 如何在同一行获取不同值的计数？

> ID：11658403
> 
> 赞同：0
> 
> 时间：2012-07-25T20:51:27.707
> 
> 标签：mysql, count

我需要一份报告，其中包含按日期分组的列具有的不同值的计数，每个日期一个输出行。

表格列是日期、位置 ID (var) 和评级 (var)。评级只能有四个值之一，“A”、“B”、“C”或空/空白。使用此选择，我可以在每个日期每个值获取一行，但是如何获取每个日期在同一行上的所有四个值的计数？

```
SELECT date, rating, count(rating) AS ratings
FROM table
GROUP BY date, rating 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:55:25.123

与布尔值一起使用`SUM`，如下所示：

```
SELECT
    date,
    SUM(rating = 'A') AS count_A,
    SUM(rating = 'B') AS count_B,
    SUM(rating = 'C') AS count_C,
    SUM(rating = '' OR rating IS NULL) AS count_blank
FROM yourtable
GROUP BY date 
```

# php - 通过 php 从“选中”的 html 框发送查询到电子邮件

> ID：11658405
> 
> 赞同：0
> 
> 时间：2012-07-25T20:51:33.843
> 
> 标签：php, html, sendmail, checkbox

好的，我已经用谷歌搜索并搜索了更多信息，但我被卡住了。我对 php 的想法真的很陌生，但我终于让我的表单做我想做的事，除了当我将它发送到我的电子邮件时，它只显示我选中的框之一。我真的很讨厌寻求帮助，但就这样吧。

这是我的html：

```
<tr>
 <td valign="left"><p>Please check all items needed *</p>
   <p class="style2">(Default order will be one of each checked item unless otherwise indicated in the comments section.)</p>
 <td valign="top">
     <div align="left">

 <input type="checkbox" name="supplies[]" value="black_toner" /> Black Toner<br />
 <input type="checkbox" name="supplies[]" value="cyan_toner" /> Cyan Toner<br />
 <input type="checkbox" name="supplies[]" value="magenta_toner" /> Magenta Toner<br />
 <input type="checkbox" name="supplies[]" value="yellow_toner" /> Yellow Toner<br />
 <input type="checkbox" name="supplies[]" value="black_drum" /> Black Drum<br />
 <input type="checkbox" name="supplies[]" value="cyan_drum" /> Cyan Drum<br />
 <input type="checkbox" name="supplies[]" value="magenta_drum" /> Magenta Drum<br />
 <input type="checkbox" name="supplies[]" value="yellow_drum" /> Yellow Drum<br />
 <input type="checkbox" name="supplies[]" value="waste_toner" /> Waste Toner<br />
 <input type="checkbox" name="supplies[]" value="staples" /> Staples<br />
     </div>
   <td valign="top"> </td>
</tr> 
```

这是我的 php

```
 }
    $email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Company: ".clean_string($company)."\n";
$email_message .= "Location: ".clean_string($location)."\n";
$email_message .= "Machine Model: ".clean_string($machine_model)."\n";
$email_message .= "Supplies: ".clean_string($supplies)."\n";
$email_message .= "Email: ".clean_string($email)."\n";
$email_message .= "Telephone: ".clean_string($telephone)."\n";
$email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?> 
```

就像我说的，我已经尝试了我认为的一切，但显然有些地方是错误的。我需要添加什么到我的 php/html 或更改以从我的复选框中获取所有响应，而不仅仅是一个？如果有人有任何建议，我将不胜感激。（请尽可能具体，就像我说的，我是新手）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:55:23.740

$supplies 是一个数组，因为您将 [] 置于其形式中。您必须使用函数 implode 将它们分开：

```
$supplies = implode(",", $supplies); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:55:39.460

```
$string = implode(", " $_POST['supplies']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:55:49.287

您没有显示分配 $supplies 的位置，但它是一个数组。分配时试试这个。

```
$supplies = implode(',',$_POST['supplies']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:59:29.087

[http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html](http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html)

1）这个HTML：

```
<input type="checkbox" name="tags[]" value="1" />
<input type="checkbox" name="tags[]" value="2" />
<input type="checkbox" name="tags[]" value="3" />
<input type="checkbox" name="tags[]" value="4" /> 
```

2) ...变成这个PHP：

```
print_r($_POST['tags']);
// output
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
) 
```

3）在您的情况下，如果您在表格中只检查了“黑色碳粉”和“青色鼓”，那么您应该在数组中返回的唯一值是“black_toner”和“cyan_drum”。只需修改您的代码以处理您获得的值。

4）我剪切/粘贴了您的表格，并将“action =”设置为调用“phpinfo（）”的脚本。以下是 phpinfo 的结果，仅检查 black_toner 和 cyan_drum：

```
_POST["supplies"]

Array
(
    [0] => black_toner
    [1] => cyan_drum
) 
```

# django - Django：在其他视图中渲染视图

> ID：11658415
> 
> 赞同：1
> 
> 时间：2012-07-25T20:52:04.057
> 
> 标签：django, django-views

我想在我的所有其他视图中“包含”一个视图。

看看我的网站：www.urlc.be

右侧的“分类”显示在每个页面上，但我不知道如何将其包含在“django 样式”中。现在我正在使用 AJAX 调用在每个页面上显示“分类”。

你能帮我找到更好的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:04:07.617

如果您需要每个页面上的表格，我会使用一个[`inclusion tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags)并将其包含在所有相关页面继承的基本模板中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:04:52.167

您可以采取几种方法来解决这个问题。一种是编写一些中间件，以便在每个响应离开视图时为其添加更多数据。另一种是编写您自己的模板标签来呈现相关部分。[在此处](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs/)查找中间件，[在此处](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)查找模板标签。

# css - CSS：Divs 不会左右对齐

> ID：11658419
> 
> 赞同：0
> 
> 时间：2012-07-25T20:52:21.497
> 
> 标签：css, html, css-float

我有 2 个 div。我希望 1 个 div 在我的窗口的左侧，另一个在右侧。我用我的标志和旁边的小文字正确地做到了这一点。但是，在此之下，我还想再拥有 2 个 div。我把这 2 个 div 放在 1 个 div 中，`clear:both;`这个 div 很好地排列在另外两个下面。但是一旦我`float: right;`使用第二个 div，它就会超出主 div ......为什么？

代码：（这应该排在左边）

```
#menu {
    background-color:#485D9C;
    margin-left:10px;
    text-align:center;
    width: 200px;
    position:absolute;
    float:left;
} 
```

（这应该排在右边）

```
#content {
    text-align:right;
    width:600px;
    position:absolute;
    float:right;
} 
```

（这是“内容”和“菜单”都在的 div）

```
#middle {
    clear:both;
    border: thick solid;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:06:17.320

每当我使用浮点数时，我都会放置一个带有“clear: both;”的 div 应用于它，在容器内部，该容器包含应用了浮动的元素。可以在[此处](http://jsfiddle.net/sN7eA/)找到一个示例，我*认为*这就是您要寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:58:26.207

你有一个例子吗？通过这个小测试：http: [//jsfiddle.net/BouFe/uHJQB/1/](http://jsfiddle.net/BouFe/uHJQB/1/)它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:57:30.803

如果没有看到你的代码，不知道到底发生了什么，但我想知道你是否只是没有清除你的浮点数？

[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:54:58.997

尝试放置一个外部 div 并设置位置：相对；并且内部元素将它们的位置标记为绝对

# ios - 在应用程序终止之间保持 NSUserDefaults 信息

> ID：11658421
> 
> 赞同：0
> 
> 时间：2012-07-25T20:52:36.503
> 
> 标签：ios, nsuserdefaults

在 iOS4 中，当我保存 NSUserDefaults 时，信息会被保存。但是，如果应用程序变为非活动状态，并且我终止了应用程序（通过双击主页按钮然后终止应用程序），然后再次启动应用程序，则不会读取 NSUserDefaults。

现在，这是 NSUserDefaults 的默认行为，如果应用程序由于任何问题而终止，下一次启动将不会存储信息？

我用来保存信息的电话是：-

```
[[NSUserDefaults standardUserDefaults] registerDefaults:
     [NSDictionary dictionaryWithObjectsAndKeys:
      "Some date", @"Validity",
      nil]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:05:51.403

您提到的持久化用户默认值的调用`registerDefaults`实际上并没有将任何内容持久化到磁盘。如果`registerDefaults`在磁盘上找不到任何应用程序，它会初始化用于应用程序的默认值。您应该在每次应用程序启动时执行此操作，通常在`initialize`应用程序委托的方法中。

一旦您的应用程序运行，它通常会修改用户默认值。每当您想将这些修改后的默认值保存到磁盘时，您应该调用：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

保存默认值后，它们将在任何后续应用程序启动时自动加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:03:36.340

注册默认值后添加此

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

在您同步之前，只要应用程序处于活动状态，standardUserDefaults 就会提供当前/正确的值。

一旦应用程序终止，由于您没有同步标准用户默认值，应用程序将在下次启动时读取未同步的值。

示例：将其想象为您正在编辑的 google 文档。

google 文档的 AutoSave 功能相当于 nsuserdefaults synchornize。如果您在自动保存对文档所做的更改之前关闭浏览器，则下次加载它时，您将看到旧内容。

# java - 我坚持使用 java 中最简单的 SQL 查询

> ID：11658424
> 
> 赞同：1
> 
> 时间：2012-07-25T20:52:47.680
> 
> 标签：java, mysql, sql, select

我在java中找不到以下查询的正确语法，请帮助我。

```
String st = "SELECT COUNT('"+id+"') FROM '"+selected_table+"' ";

String st = "SELECT COUNT('"+id+"') FROM '"+selected_table+"'"; 
```

我认为错误是如何结束查询......

由于我收到错误检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“客户”附近使用正确的语法

当我选择客户表时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:56:31.297

您想在对象名称周围使用反引号而不是单引号。

```
String st = "SELECT COUNT(`"+id+"`) FROM `"+selected_table+"` "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:56:38.273

表名应该用刻度线 (`) 括起来，而不是单引号 ( `'`)

```
String st = "SELECT COUNT('"+id+"') FROM `"+selected_table+"`";
                                         ^ use tick marks   ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:57:28.653

`id`和的值是`selected_table`多少？发送到数据库的实际查询字符串是什么？

此外，使用字符串连接手动构建这样的查询也不是一个好主意。这使得一个错误很容易导致一个巨大的安全漏洞，而且尝试保护这种方法比只做正确的方法要困难得多（也有风险）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:59:14.337

从您的查询中可以看出，您将 id 和 selected_table 括在单引号中......例如，`SELECT COUNT('ID') FROM 'CUSTOMER'`这是错误的。应该在 backtics ``或者什么都没有......

# c# - 将各种输入文件转换为单一输出格式的工具

> ID：11658426
> 
> 赞同：0
> 
> 时间：2012-07-25T20:52:58.547
> 
> 标签：c#, visual-studio-2010, xslt

我正在寻找一个对我来说似乎很常见的问题的解决方案。但我找不到任何方向。

我遇到的问题是我收到了多个需要转换为一种格式的输入文件（xsl、xslx、csv、普通 ascii）。所以我实际上正在寻找一种可以配置为解析输入文件并以一种格式（最好是 csv）生成输出文件的工具。

如果不存在这样的工具，那么我可能会使用 Visual Studio/C# 自己创建一个。谁能给我任何关于现有工具和/或做类似事情的 C# 编码示例的指示？

提前致谢！

亲切的问候，

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:13:30.667

如果您决定使用 C# 编写一个将 xls 解析为 CSV 的解析器，可以在此处找到一个很好的示例

[http://www.c-sharpcorner.com/uploadfile/yuanwang200409/how-to-convert-xls-file-into-csv-file-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/yuanwang200409/how-to-convert-xls-file-into-csv-file-in-C-Sharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:25:17.323

这不是您问题的直接答案，但它可能会有所帮助。这是将任意 CSV 转换为 XML 的通用解决方案。

[CSV 到 XML](http://pascaliburnus.seanbdurkin.id.au/index.php?/archives/17-A-Generalised-and-Comprehensive-Solution-to-CSV-to-XML-and-XML-to-CSV-Transformations.html)

# java - 警报对话框首选项未保存

> ID：11658429
> 
> 赞同：0
> 
> 时间：2012-07-25T20:53:17.070
> 
> 标签：java, android, dialog, alert, android-preferences

因此，当用户首次打开应用程序时，我会`AlertDialog`弹出并说出正确的内容。

然后他们可以选择单击 a`CheckBox`并禁用下次启动应用程序时弹出的对话框。

启用`CheckBox`无法正常工作。当应用程序完全关闭然后重新启动时，它会再次弹出警报对话框。有人看到我所做的有什么问题吗？

```
 public static final String PREFS_NAME = "MyPrefsFile1";
 public CheckBox dontShowAgain;

 @Override
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AlertDialog.Builder adb = new AlertDialog.Builder(this);
    LayoutInflater adbInflater = LayoutInflater.from(this);
    View eulaLayout = adbInflater.inflate(R.layout.custom_dialog, null);
    dontShowAgain = (CheckBox)eulaLayout.findViewById(R.id.checkBox1);
    adb.setView(eulaLayout);
    adb.setTitle("Alert Dialog");
    adb.setMessage("My Customer Alert Dialog Message Body");

    adb.setPositiveButton("Ok", new DialogInterface.OnClickListener()
  {

       //CheckBox Confirm for Alert Dialog
       public void onClick(DialogInterface dialog, int which) {

         String checkBoxResult = "NOT checked";
       if (dontShowAgain.isChecked())  checkBoxResult = "checked";
       SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
       SharedPreferences.Editor editor = settings.edit();
       editor.putString("skipMessage", checkBoxResult); 

            // Commit the edits!
    editor.commit();
    return; 
      }
   });

      adb.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface dialog, int which)  {

                             // Action for 'Cancel' Button
                        String checkBoxResult = "NOT checked";
                            if (dontShowAgain.isChecked())  checkBoxResult = "checked";
                            SharedPreferences settings =    getSharedPreferences(PREFS_NAME, 0);
                        SharedPreferences.Editor editor = settings.edit();

                                    editor.putString("skipMessage", checkBoxResult);    
                        // Commit the edits!
                        editor.commit();
                          return;
                    }
    });

                    //Preferences For Alert Dialog
                    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                String skipMessage = settings.getString("skipMessage", "NOT checked");
           if (skipMessage !=("checked") )
           adb.setIcon(R.drawable.icon);
           adb.show();

   } 
```

下面是我的`AlertDialog`XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/layout_root"
          android:orientation="horizontal"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:padding="10dp"
          >
  <ImageView android:id="@+id/image"
           android:layout_width="wrap_content"
           android:layout_height="fill_parent"
           android:layout_marginRight="10dp"
           />

  <TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:textColor="#FFF"
    android:textSize="5px" />

  <CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Do Not Show Me This Again" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:03:55.777

我看到的问题是您不应该在字符串上使用 == 或 != 。相反，使用 .equals，这样就可以了

```
if( !skipMessage.equals("checked") ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:58:32.477

如果首选项被“选中”，唯一不会发生的事情`skipMessage`是将图标设置为 R.drawable.icon。也将其`adb.show()`放入 if 语句中（用大括号括起来）。

```
if (!skipMessage.equals("checked") ) {
    adb.show();
} 
```

# android - Android 在 ImageView 中覆盖项目的最佳方法

> ID：11658437
> 
> 赞同：0
> 
> 时间：2012-07-25T20:53:54.240
> 
> 标签：android, imageview, overlay

关于如何在 ImageView 上覆盖 View 的任何想法？更具体地说，我想在用户单击 ImageView 的某些区域时弹出视图。我正在解决这个问题，在 onDraw() 方法中的图像之后绘制弹出视图，但是当用户单击弹出框时处理事件很痛苦。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:00:11.300

`FrameLayout`解决了这个问题。您可以在 中放置两个孩子`FrameLayout`，其中第一个孩子将是背景，第二个孩子将是前景。让你`ImageView`在后台，然后你可以放置任何其他`View`的，它会覆盖`ImageView`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:00:29.547

对于覆盖视图，您可以将它们包装在 FrameLayout 中。首先将 ImaveView 添加到其中，然后添加覆盖视图。

# javascript - 你如何在 switch 语句中有一个 NaN 案例？

> ID：11658439
> 
> 赞同：11
> 
> 时间：2012-07-25T20:54:02.647
> 
> 标签：javascript

由于`NaN === NaN`评估为`false`，是否可以在语句中添加`NaN`案例？`switch`

例如，假设我要进行以下切换：

```
switch(x){
    case 1:
    case 2:
    case 4:
        doSomething();
        break;
    case NaN:
        doSomethingElse();
        break;
    case default:
        doADifferentThing();
        break;
} 
```

`NaN`按原样发送`x`将转到默认情况。`NaN`我知道在 switch 语句中有一些使用方法（例如，我可以用`if..else`语句包围并使用`isNaN`），但是有没有更直接的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T20:58:01.190

我最初写道，我只看到了一个解决方案，但是在我睡觉的时候，我想出了一个极好的解决方案。

请始终记住，switch 不会进行隐式类型转换来比较大小写，因此如果您向 switch 语句提供字符串，它将与大小写中的整数不匹配，反之亦然。如果要与字符串和整数进行比较，则必须先将整数转换为字符串，然后仅与字符串进行比较。

**绝妙的解决方案：**

正如 WouterH 所指出的，当使用包含数字的字符串时，我的初始解决方案将解析为默认值，这是 switch 语句的预期行为。但是为了克服这个问题，解析参数可能很有用。为此，您可以使用以下代码：

```
var x = "1";
switch (isNaN(x) || parseInt(x))
{
    case true:
      alert("IsNaN!") 
      break; 
    case 1: 
      alert("1"); 
      break; 
    case 2: 
      alert("2"); 
      break; 
    case 4: 
      alert("4"); 
      break; 
    default: 
      alert("default"); 
      break; 
} 
```

我最初*的精湛方法*：

```
var x = "clearly not a number";
switch(x){
    case !isNaN(x) || x:
      alert("IsNaN!")
      break;
    case 1:
      alert("1");
      break;
    case 2:
      alert("2");
      break;
    case 4:
      alert("4");
      break;
    default:
      alert("default");
      break;
    } 
```

如果 x where 是一个字符串，isNaN 将返回 true，但这并不重要，因为由于上述 switch 语句的行为，true 不会对字符串评估为 true。

**我原来的解决方案：**

我什至不知道我在想什么，这看起来很可怕，而且缩进很尴尬，但是感谢您的支持！

```
var x = "clearly not a number";
switch(x){
    case 1:
      alert("1");
      break;
    case 2:
      alert("2");
      break;
    case 4:
      alert("4");
      break;
    case default:
       if (isNaN(x)){
          alert("isNaN");
          break;
       }
       alert("default");
       break;
} 
```

**布拉德的解决方案：**

谢谢布拉德这个。我不太喜欢这个，因为它感觉有点像 hack，也就是说，这不是你期望使用 case 语句的方式，但它确实给了你最大的灵活性，所以我确定在那里是它的一个用例。

```
var x = "clearly not a number";
switch(true)
{
   case x==1:
      alert("1");
      break;
   case x==2:
      alert("2");
      break;
   case IsNaN(x):
      alert("IsNaN");
      break;
   case default:
      alert("default");
      break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T20:33:53.660

你可以这样做（[jsFiddle](http://jsfiddle.net/ckTva/)）：

```
var x = "test";
switch (isNaN(x) || x)
{
    case true:
      alert("IsNaN!") 
      break; 
    case 1: 
      alert("1"); 
      break; 
    case 2: 
      alert("2"); 
      break; 
    case 4: 
      alert("4"); 
      break; 
    default: 
      alert("default"); 
      break; 
} 
```

或者，如果您还想验证包含数字的字符串（[jsFiddle](http://jsfiddle.net/gYp8V/)）：

```
var x = "1";
switch (isNaN(x) || parseInt(x))
{
    case true:
      alert("IsNaN!") 
      break; 
    case 1: 
      alert("1"); 
      break; 
    case 2: 
      alert("2"); 
      break; 
    case 4: 
      alert("4"); 
      break; 
    default: 
      alert("default"); 
      break; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:01:06.273

@helmus 的回答是正确的，是一个很好的解决方案。

`NaN`但是，如果您使用字符串，则可以保持大小写：

```
switch(x+''){
    case "1":
    case "2":
    case "4":
        doSomething();
        break;
    case "NaN":
        doSomethingElse();
        break;
    default:
        doADifferentThing();
        break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T08:00:23.727

使用 toString()：

```
switch (x.toString()) {
    case '1':
    case '2':
    case '4':
        console.log('1/2/4');
        break;
    case 'NaN':
        console.log('NaN');
        break;
    default:
        console.log('default');
} 
```

# php - MSSQL 同时多次运行存储过程

> ID：11658441
> 
> 赞同：1
> 
> 时间：2012-07-25T20:54:10.353
> 
> 标签：php, sql-server, stored-procedures

**问题**

我有一个 CakePHP 应用程序，我在其中调用了一个存储过程：

```
$this->FileUpload->query('exec sproc_runjob_ProcessTests', false); 
```

此过程会拾取上传的文件并对其进行处理。有时人们会上传多个文件，它会为每个上传的文件调用一次。

问题是我收到了这个错误：

```
Database Error
Error: SQLSTATE[42000]:
    [Microsoft][SQL Server Native Client 11.0][SQL Server]
    SQLServerAgent Error: Request to run job ProcessTests
    (from User [redacted]) refused because the job already has
    a pending request from User [redacted].
SQL Query: exec sproc_runjob_ProcessTests 
```

据我所知，这意味着存储过程不能同时运行——我必须为每个进程串行运行存储过程，这对我们花哨的新多核服务器来说是一种耻辱。

**我们想到的解决方案**

1.  串行运行存储过程

    基本上这里的想法是调用存储过程一次，如果它已经在运行，则忽略它的失败。在 sproc 调用结束时，它会检查数据库以查看它是否需要再次运行（如果有任何“新”文件）并在需要时再次运行自己。

2.  不要使用现有的存储过程

    由于时间限制，这将是困难的，但如果有人对我们*应该*这样做的方式提出很好的建议，我会很高兴听到它。

提前致谢！

**搜索结果**

1.  看来[这家伙](http://www.sqlservercentral.com/Forums/Topic1033621-146-1.aspx)也有同样的问题，打电话前先检查一下工作状态就解决了。也许我可以在调用 sproc 之前从 PHP 中做到这一点？

2.  [这里提到](https://stackoverflow.com/questions/5861255/how-to-accurately-detect-if-a-sql-server-job-is-running-and-deal-with-the-job-al)了一个叫做 Service Broker 的东西。这实际上可能是我正在寻找的，但我仍然喜欢任何输入。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:19:23.840

从您收到的错误消息中，听起来您的存储过程正在尝试启动在 SQL 代理中注册的 SQL 作业。如果这是真的，那么我会推荐另一种策略。

理想情况下，您应该将文件作为二进制类型（例如图像或 blob）直接传递给存储过程。让数据库的多线程处理并发请求的扩展。否则，如果您尝试串行处理文件，应用程序将无法很好地扩展。

Service Broker 实际上是一个端点，它允许您的应用程序以不同的方式连接到数据库。是的，你可以使用它——它会起作用，但我反对它。

或者，您可以继续将文件存储在文件系统上，并且只将文件的路径存储在数据库中。

祝你好运！

# php - facebook 应用程序多次登录，逻辑错误

> ID：11658443
> 
> 赞同：0
> 
> 时间：2012-07-25T20:54:25.853
> 
> 标签：php, facebook, session, facebook-graph-api, oauth

我有这个 facebook 应用程序可以在我的网站上显示 fb 通知。然后我遇到了这个问题，假设有两个用户 Alice 和 Bob。Alice 是我网站的常客，她向 Bob 推荐了它。她让他从她自己的笔记本电脑上注册到我的网站。当 bob 尝试添加应用程序时，Alice 的 fb 通知出现了。实际上，当 Bob 单击登录链接时，由于 alice 已经登录到 facebook，它只是提取了她的详细信息（同一会话），如何解决这种情况，我们是否必须让 Alice 从 facebook 注销并让 Bob 登录，类似于“Alice 已经登录，以其他用户身份登录”，有人可以提出一些解决方案以及如何做到这一点。

以下是我用于登录的一段代码

```
 require_once('sdk/src/facebook.php');

        $facebook = new Facebook(array(
          'appId'  => 'xxxxxxxxxxxxxxxx',
          'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
          'cookie' => true
        ));

        // Get User ID
        $user = $facebook->getUser();

        // Login or logout url will be needed depending on current user state.
        if ($user) {
          $logoutUrl = $facebook->getLogoutUrl();
        } else {
          $loginUrl = $facebook->getLoginUrl();
        }

        //check permissions list

        if ($user) {
            $permissions_list = $facebook->api('/me/permissions','GET', array('access_token' => $access_token));

             //check if the permissions we need have been allowed by the user
            //if not then redirect them again to facebook's permissions page
            //
            $permissions_needed = array('manage_notifications','publish_stream', 'read_stream');
            $login_url_params = array(
                        'scope' => 'manage_notifications,publish_stream,read_stream',
                        'fbconnect' =>  1,
                        'display'   =>  "page",
                        'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
                    );
            foreach($permissions_needed as $perm) {
                if( !isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1 ) {
                    $login_url_params = array(
                        'scope' => 'manage_notifications,publish_stream,read_stream',
                        'fbconnect' =>  1,
                        'display'   =>  "page",
                        'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
                    );
                    $login_url = $facebook->getLoginUrl($login_url_params);
                    echo $login_url;
                    header("Location: {$login_url}");
                    exit();
                }
            }               

            //if the user has allowed all the permissions we need,
            //get the information about the pages that he or she managers
            $accounts = $facebook->api(
                '/me',
                'GET',
                array(
                    'access_token' => $access_token
                )
            );              
        } 

          else {
            //if not, let's redirect to the ALLOW page so we can get access
            //Create a login URL using the Facebook library's getLoginUrl() method
            $login_url_params = array(
                'scope' => 'manage_notifications,publish_stream,read_stream',
                'fbconnect' =>  1,
                'display'   =>  "page",
                'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
            );
            $login_url = $facebook->getLoginUrl($login_url_params);

            //redirect to the login URL on facebook
            $facebook_login = $login_url;
             echo "<a href='$login_url'>Login Facebook</a>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:20:14.350

最好的办法是：

1.  [当用户访问您的站点时，使用 Javascript SDK 和FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)方法检测他们是否已登录 Facebook 以及是否为您的应用程序进行了身份验证。
2.  如果他们未经过身份验证，请使用“权限”对话框提示他们并鼓励他们注册。
3.  如果他们经过身份验证并登录到 FB，则自动将它们登录到您的网站。为避免 Alice/Bob 混淆，请在您网站的某处显示他们已以“Alice”身份登录的指示符，并且可能在下方有一个链接显示“不是你？单击此处以其他人或类似身份登录
4.  如果他们单击此链接，或者单击您网站上的注销链接，请调用 Javascript SDK 中的[FB.logout](https://developers.facebook.com/docs/reference/javascript/FB.logout/)方法，这将使该用户的当前访问令牌无效，但也会将他们从 Facebook 中注销。

然后，您可以在此之后将他们推送回登录/注册页面，他们将被提示登录*他们的*Facebook 帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:21:05.300

据我所知，**新用户必须先让前一个用户退出 Facebook，然后再让他或她自己登录**。

我们无法控制登录/身份验证弹出窗口，也无法控制本地存储的 Facebook 会话数据，因此当 Bob 点击登录并看到*以 Alice 身份登录（不是你？）*时，他应该点击“*不是你吗？ ”* '，这将使 Alice 退出 Facebook 并提示 Bob 登录然后授权。这是有问题的，因为当 Bob 离开并且 Alice 访问 Facebook.com 时，她将登录到 Bob 的帐户。

*一种可能的解决方案是获取当前登录用户的姓名和个人资料图片，并将其显示在“使用 Facebook 登录”*按钮旁边。这可能有助于向用户澄清事情。您应该能够在未经身份验证的情况下显示此信息，甚至可以提供您自己的链接以退出 Facebook。

# php - 填充下拉菜单（选择）

> ID：11658444
> 
> 赞同：0
> 
> 时间：2012-07-25T20:54:31.113
> 
> 标签：php, jquery, html, populate

我一直在尝试根据这个答案解决我的问题： [Populate select box from database using jQuery](https://stackoverflow.com/questions/10870667/populate-select-box-from-database-using-jquery)

我试图实现那里的答案中所说的内容，但我在这里没有任何运气。到目前为止，下拉菜单中出现的所有内容都是从其中开始的默认“Stone”项目。

谁能抽出一些时间帮我解决我的问题。我的代码本质上应该从具有超过 150 个 ID 的 MySQL 数据库中读取，顺序从 1 开始，并使用相同 ID 行中的相应名称来填充加载时的下拉菜单。

下拉菜单内部的示例：

*   结石
*   草
*   钻石

对应的数据库是什么样的：

```
ID           item_name
1            Stone
2            Grass
3            Diamond 
```

我用来尝试执行此操作的代码是：

**PHP** (process_item_list.php):

```
$con = mysql_connect($DB_HOST,$DB_USER,$DB_PASSWORD);
$dbs = mysql_select_db($DB_NAME, $con);

$tableName = "itemlist";
$result = mysql_query("SELECT * FROM $tableName");

$data = array();
while ( $row = mysql_fetch_row($result) )
{
    $data[] = $row;
}
echo json_encode( $data );    
?> 
```

**jQuery/Javascript**

```
<script type="text/javascript">
$(function(){
      var items="";
      $.getJSON("process_item_lists.php",function(data){
        $.each(data,function(index,item) 
        {
          items+="<option value='"+item.id+"'>"+item.name+"</option>";
        });
        $("#tradeItems").html(items); 
      });
    });
</script> 
```

**HTML**

```
<select id="tradeItems"> 
<option value="">Stone</option>
</select> 
```

我也愿意接受不同的方法来做到这一点，只要它仍然在加载时填充下拉菜单！

**编辑：在wirey的帮助下，PHP问题得到了修复。以下是运行 PHP 文件的结果：[http://fogest.net16.net/mctrade/php/process_item_list.php](http://fogest.net16.net/mctrade/php/process_item_list.php) 当我使用应该给我 ID 和项目名称的警报框运行实际页面时它们都返回 undefined 而不是正确的值。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:05:18.403

[http://fogest.net16.net/mctrade/php/process_item_list.php](http://fogest.net16.net/mctrade/php/process_item_list.php)上的结果看起来不像您期望的那样，它看起来像这样：

```
[ ["1","Stone","images\/stone.png"],
  ["2","Grass Block","images\/grass_block.png"],
  /* snip a lot of rows */
] 
```

但你所期待的是这样的：

```
[ { "id":"1", "name":"Stone", "image?":"images\/stone.png"},
  { "id":"2", "name":"Grass Block","image?":"images\/grass_block.png"},
  /* and so on */
] 
```

我认为你会想要使用[`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)而不是[`mysql_fetch_row()`](http://php.net/manual/en/function.mysql-fetch-row.php)，这可能会给你正确的输出。

**奖励：**您可以通过在以下内容之前添加一行来为响应提供适当的内容类型`echo`：

```
header("Content-type: application/json");
echo json_encode($data); 
```

**备注：**当我检查[http://fogest.net16.net/mctrade/php/process_item_list.php](http://fogest.net16.net/mctrade/php/process_item_list.php)的来源时，我在最后发现了这个：

```
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

这不应该是响应的一部分，它可能会使 JSON 解析器崩溃。

# asp.net - 如何将用户控件拖到工具箱中？

> ID：11658446
> 
> 赞同：3
> 
> 时间：2012-07-25T20:54:32.190
> 
> 标签：asp.net, visual-studio-2010, visual-studio, user-controls, webusercontrols

`UserControl`我有一个我想*使用*的 ASP.net ：

![在此处输入图像描述](../Images/979b663567c6d0af7349ebbc689fbe3c.png)

按照 Visual Studio 中的说明进行操作：

> 该组中没有可用的控件。
> 将一个项目拖到此文本上以将其添加到工具箱中。

我尝试将项目拖到该文本上以将其添加到工具箱中：

![在此处输入图像描述](../Images/e220917dfcc7fbfaacf5f7eb8f6b8287.png)

不幸的是，将一个项目拖到该文本上不会将其添加到工具箱中：

![在此处输入图像描述](../Images/ed8d903501edb1b6f922feb7307ac0ed.png)

所以这就提出了一个问题：

> 如何将 UserControl 拖入工具箱？

**笔记**

*   构建或重建，不会自动将控件添加到工具箱
*   “**选择项目”**对话框不包括用户控件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:26:23.517

你没有。只需将 UserControl 从解决方案资源管理器拖到设计图面上。无需先将其添加到工具箱中。

[这是asp.net论坛中的相关文章。](http://forums.asp.net/t/1285684.aspx/1?How%20to%20add%20ascx%20user%20control%20to%20design%20page%20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T01:38:40.443

你**不能**用`UserControls`. **但是**使用**`ASP.NET ServerControls`**你可以实现它。
浏览这篇文章。
[http://devoptions.blogspot.com/2015/02/create-aspnet-server-controls-from.html](http://devoptions.blogspot.com/2015/02/create-aspnet-server-controls-from.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T23:16:25.373

以下链接是否有任何帮助

[http://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/](http://dhavalupadhyaya.wordpress.com/2008/07/20/how-to-add-custom-control-in-visual-studio-toolbox/)

# php - AJAX/PHP 获取文件的修改内容

> ID：11658447
> 
> 赞同：0
> 
> 时间：2012-07-25T20:54:41.180
> 
> 标签：php, ajax, file

我正在使用 PHP 和 AJAX 请求来获取始终运行的程序的输出，并以 5 秒的间隔将其打印在网页上。有时，此日志文件的大小可达 2mb。如果用户已经至少获得了一次完整的内容，那么 AJAX 请求每 5 秒获取一次该文件的全部内容对我来说似乎是不切实际的。该请求只需要获取用户在之前的请求中没有得到的任何内容。

问题是，我不知道从哪里开始查找用户没有收到的内容。有任何提示、提示或建议吗？

编辑：程序的输出以时间开始（HH:MM:SS AM/PM），之后的所有内容都没有模式。例如，日志文件可能跨越数天，因此文件中可能不只有一个“02:00:00 PM”。我没有编写正在记录的程序，所以我无法修改它打印输出的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:59:57.137

我认为使用 head 请求可能会让你走上正确的道路。

检查这个线程： [Javascript/Ajax 中的 HTTP HEAD 请求？](https://stackoverflow.com/questions/333634/http-head-request-in-javascript-ajax)

如果您使用的是 jquery，这是 ajax 调用中的简单类型更改：

$.ajax({url: "一些 url", type: "HEAD".....});

就个人而言，我会根据之前的响应检查文件大小和修改日期，如果已更新，则获取新数据。我不确定你是否可以通过 ajax 只获取文件的一部分，但我确信这可以通过 php 很容易地完成，可能这个线程可能会有所帮助：

[如何在 PHP 中只读取文本文件的最后 5 行？](https://stackoverflow.com/questions/2961618/how-to-read-only-5-last-line-of-the-txt-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:58:05.650

这取决于您的程序是如何制作的以及它如何打印您的数据，但您可以使用时间戳来减少数据量。如果您有某种 ID，您可能应该在时间戳中使用它们。

# php - 如何使用 PHP 提取“”中的数据？

> ID：11658451
> 
> 赞同：0
> 
> 时间：2012-07-25T20:55:07.760
> 
> 标签：php, extract

```
local szMsg = string.format("    歡迎來到非常劍俠有獎問答，您隻需交納%s就可以參加本次有獎答題，隻要您能回答正確<color=yellow>%s個&lt;color>關於劍俠世界的小問題，就會獲得%s，如果中途答錯或者自己選擇退出，不僅沒有獎勵，您交納的%s也不會退還。怎麼樣，要參加嗎？", szNeedMoney, self.tbGroup[nGroupId].nQuestionMax, szAwardMsg, szNeedMoney);
local tbOpt = 
```

我想`" "`使用 PHP 从我的文件中提取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:59:57.853

> $string ' local szg = string.(Ming)非常欢迎输入剑侠有奖问答，您只需交纳%s答就可以参加本次有奖题，只要您能回答%s个关于剑侠世界的小问题，如果%s，如果错误或者自己选择退出，如果没有获得奖励，您交纳的%s也不会退还。怎么样，要参加吗？", szNeedMoney, self.tbGroupGroupId].nQuestionMax, szAwardMsg, szNeedMoney); local tbOpt = '; preg_match('/"([^"]+)"/', $string, $out); $output = str_replace('"', "", $out[0]); echo $output;

这将输出：

```
歡迎來到非常劍俠有獎問答，您隻需交納%s就可以參加本次有獎答題，隻要您能回答正確<color=yellow>%s個&lt;color>關於劍俠世界的小問題，就會獲得%s，如果中途答錯或者自己選擇退出，不僅沒有獎勵，您交納的%s也不會退還。怎麼樣，要參加嗎？ 
```

因为它在 $string 的双引号内；

将您的数据作为 $string 就完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:02:44.090

试试这个

```
preg_match('/"(.+)"/',$string,$matches); // puts text into $matches[1] 
```

# c++ - 在 C++ 中添加整数输出？

> ID：11658455
> 
> 赞同：1
> 
> 时间：2012-07-25T20:55:19.410
> 
> 标签：c++

我正在处理 Project Euler，第一个问题，我已经让这个程序输出我需要的数字，但我不知道如何获取输出的数字并将它们加在一起。

这是代码：

```
#include <iostream>
#include <cmath>

int main(void) {

    int test = 0;

    while (test<1000) {
        test++;
            if (test%3 == 0 && test%5 == 0) {

                std::cout << test << std::endl;

            }
    }

    std::cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:07:16.303

执行此操作的典型方法是使用另一个变量来保存总和。您逐渐将每个数字添加到此变量中，直到您必须在循环结束时总计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:03:43.270

最简单的选项是`total`您在条件匹配时添加的变量。

第一步是创建它并将其初始化为 0，因此您稍后会得到正确的数字。

```
int total = 0; 
```

之后，将小计添加到其中，以便累积总和。

```
total += 5;
...
total += 2;
//the two subtotals result in total being 7; no intermediate printing needed 
```

添加小计后，您可以将其打印为总体总计。

```
std::cout << total; 
```

现在，这里是它如何适合手头的代码，以及其他一些指针：

```
#include <iostream>
#include <cmath> //<-- you're not using anything in here, so get rid of it

int main() {
    int test = 0;
    int total = 0; //step 1; don't forget to initialize it to 0

    while (test<1000) { //consider a for loop instead
        test++;

        if (test % 3 == 0 && test % 5 == 0) {
            //std::cout << test << std::endl;
            total += test; //step 2; replace above with this to add subtotals
        }
    }

    std::cout << total << std::endl; //step 3; now we just output the grand total

    std::cin.get();    
    return 0; //this is implicit in c++ if not provided
} 
```

# c# - 如何将多个复选框项目列表发送到班级

> ID：11658463
> 
> 赞同：2
> 
> 时间：2012-07-25T20:55:36.180
> 
> 标签：c#, asp.net

我想将所有选定的复选框项目发送到班级我如何发送它。如果我使用`check1.selectedvalue/item`它只发送一个。所以我该怎么做

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e)
{
   for (int z = 0; z < check1.Items.Count; z++)
   {
      if (check1.Items[z].Selected)
      {
         string checking = "\u2022" + check1.Items[z].Text ;
      }
   }

   Mail emailsystem = new Mail();
   emailsystem.GetEmail(comment.Text, StatusList.SelectedValue, check1.SelectedValue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:07:34.597

假设您使用的是[`CheckBoxList`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)，您可以执行以下操作：

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e)
{
    string result = string.Empty;

    foreach (ListItem listitem in check1.Items)
    {
        if (listitem.Selected)
        {
           result += ("\u2022" + listitem.Text);
        }
    }
    Mail emailsystem = new Mail();
    emailsystem.GetEmail(comment.Text, StatusList.SelectedValue, result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:11:54.347

您将需要连接选中复选框的文本并将其传递给您 emailSystem

```
protected void check1_SelectedIndexChanged(object sender, EventArgs e)
{
   string checking = "";
   for (int z = 0; z < check1.Items.Count; z++)
   {
      if (check1.Items[z].Selected)
      {
         checking += "\u2022" + check1.Items[z].Text;
      }
   }

   Mail emailsystem = new Mail();
   emailsystem.GetEmail(comment.Text, StatusList.SelectedValue, checking );
} 
```

# iphone - 在基于故事板的标签栏应用程序中为 iAd 横幅制作代理

> ID：11658477
> 
> 赞同：0
> 
> 时间：2012-07-25T20:56:18.757
> 
> 标签：iphone, xcode, delegates, uitabbarcontroller, iad

> **可能重复：**
> [使用带有情节提要的 XCode 4 在我的 TabBar 应用程序中为 iAd 创建一个共享委托](https://stackoverflow.com/questions/11655953/make-a-shared-delegate-for-iad-in-my-tabbar-application-using-xcode-4-with-story)

我正在制作一个情节提要应用程序，在情节提要中我放置了一个选项卡栏控制器并添加了 4 个选项卡：2 个导航控制器转到表格视图和两个常规视图。所有与标签栏控制器链接。这是故事板：[故事板](http://www.flickr.com/photos/80427098@N07/7646756626/in/photostream)

首先，我只是将 iAds 放置在情节提要中 4 个视图中的每一个的底部，并与

FistTableViewController、SecondTableViewController、FirstViewController 和 SecondViewController

。H：

```
#import <UIKit/UIKit.h>
#import <iAd/iAd.h>

@interface MasterViewController : UITableViewController{
NSMutableArray *menu;
ADBannerView *banner;
}

@property (nonatomic, assign) BOOL bannerIsVisible;
@property (nonatomic, retain) IBOutlet ADBannerView *banner; 
```

米：

```
@implementation MasterViewController

@synthesize banner, bannerIsVisible;

-(void)bannerViewDidLoadAd:(ADBannerView *)abanner {
    if (!self.bannerIsVisible) {
    [UIView beginAnimations:@"animatedAdBannerOn" context:NULL];
    banner.frame = CGRectOffset(banner.frame, 0.0, 50.0);
    [UIView commitAnimations];
    self.bannerIsVisible = YES;
    }
}

-(void)bannerView:(ADBannerView *)abanner didFailToReceiveAdWithError:(NSError *)error {
if (!self.bannerIsVisible) {
    [UIView beginAnimations:@"animatedAdBannerOff" context:NULL];
    banner.frame = CGRectOffset(banner.frame, 0.0, -320.0);
    [UIView commitAnimations];
    self.bannerIsVisible = NO;
}
} 
```

但我需要他们的共享代表，这样他们就不会同时出现。我已经阅读了文档并查看了 iAd 套件示例代码，但这与我的项目非常不同，因为我的选项卡栏位于情节提要中，并且我对所有选项卡都使用单独的视图。

那么，如何才能让一个横幅可见，并且始终放置在我的应用程序中的标签栏上呢？标签栏仅在情节提要中，而不是子类。

这是故事板：[故事板](http://www.flickr.com/photos/80427098@N07/7646756626/in/photostream)

# objective-c - 覆盖 UIViewController 的 loadView 方法

> ID：11658478
> 
> 赞同：4
> 
> 时间：2012-07-25T20:56:26.077
> 
> 标签：objective-c, ios5

我有一个 UIViewController 类，所以在我的“MyViewController.h”中我有：

```
@interface MyViewController : UIViewController 
```

但是，在“MyViewController.m”中，如果我尝试覆盖 loadView，`-(void)loadView`则不会自动完成，并且由于我的视图没有显示，我相信这暗示了问题。

我确定我在做一些愚蠢的事情，但我找不到任何关于此事的信息。

如果有帮助，这是我的 loadView：

```
-(void)loadView
{
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;

    myInputView = [[MyInputView alloc] initWithFrame:CGRectMake(0, 0, screenWidth,screenHeight)];
    myInputView.delegate = self; 
    myInputView.style = kGestureInputStyleFading; 
    myInputView.backgroundColor = [UIColor redColor]; 
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:00:45.347

不要担心自动完成。只需定义您的

```
- (void) loadView 
```

方法并编译您的应用程序...如果它不起作用，请添加一些代码，以便我们可以看到发生了什么。

在 loadView 中，您应该初始化`view`视图控制器的属性：

```
self.view = [[UIView alloc] init...]; 
```

在你的情况下：

```
-(void)loadView
{
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height;

myInputView = [[GestureInputView alloc] initWithFrame:CGRectMake(0, 0, screenWidth,screenHeight)];
myInputView.delegate = self; 
myInputView.style = kGestureInputStyleFading; 
myInputView.backgroundColor = [UIColor redColor]; 

self.view = myInputView;
} 
```

# asp.net - 无法加载DLL，位置错误？

> ID：11658480
> 
> 赞同：0
> 
> 时间：2012-07-25T20:56:29.130
> 
> 标签：asp.net, visual-studio-2010, web, fortran

我用 Visual Studio 2010 创建了一个网站。我有一个简单的 Fortran .dll，我想从我的项目中调用它。我已经在我的项目中添加了这个 DLL，但是当我运行它时，我得到了错误：

> 无法加载 DLL 'Dll1.dll'：找不到指定的模块。

这可能意味着找不到 DLL。我是否必须在某处专门添​​加 .dll 或将 DLL 的位置添加到代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:58:54.833

右键单击dll文件，单击属性，然后在解决方案资源管理器下方的属性窗格中，将“复制到输出目录”设置为“始终复制”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:59:02.470

假设 Dll1.dll 是被引用的 DLL，请确保在解决方案资源管理器中，此 DLL 属性设置为始终复制。

# javascript - 使 jQuery 顶部工具栏不那么跳跃

> ID：11658486
> 
> 赞同：0
> 
> 时间：2012-07-25T20:56:44.030
> 
> 标签：javascript, jquery, css, mobile, toolbar

我正在尝试将工具栏附加到页面顶部。唯一可以将其推开的是徽标。我的影响有效，但滚动非常跳跃。如果滚动速度非常快，尤其是在手机上，它需要几毫秒才能重新定位，效果很明显。这只是一个例子。在我的真实站点中，有一个徽标图像，工具栏包含图像。文本应该在工具栏下流动，因此 z-index 很高。如果用户滚动到顶部，则徽标应将其向下推。

```
 <html>
                <head>
                <style type="text/css">
                #logo {
                        width:100%;
                        height:34px;
                }

                #toolbar {
                        position: fixed;
                        top: 35px;
                        z-index:1000;
                }
                </style>
                </head>
                <body>
                        <div id="logo">LOGO</div>
                        <div id="toolbar">TOOLBAR</div>
                        <div id="content">
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                                <p>lorem ipsum doler</p><br />
                        </div>
                </body>
                <script>
                  $(document).scroll(function(e) {
                    if($(window).scrollTop() < 35)
                        $("#toolbar").css('top',(35 - $(window).scrollTop()) +  'px');
                      else
                   $("#toolbar").css('top','0px');
               });
               </script>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:24:38.750

我建议从`#toolbar`绝对定位的 div 开始，然后在 scrollTop() 超出 35 像素时切换到“固定”定位。这避免了必须为任何东西制作动画，这听起来像是你遇到麻烦的地方。

见这个例子：http: [//jsfiddle.net/2LLry/](http://jsfiddle.net/2LLry/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:26:14.260

这可能对您有用：

```
<html>
    <head>
        <style type="text/css">
            #header {
                position:fixed;
                top:0px;
                z-index: 1000;
            }
            #logo {
                    width:100%;
                    height:34px;
                    display: block;
            }

            #toolbar {
                    top: 35px;
            }
        </style>
        <script src="http://code.jquery.com/jquery-latest.js"></script>

        <script>
          $(document).scroll(function(e) {
            if($(window).scrollTop() == 0)
                 $("#logo").show();
            else
                     $("#logo").hide();
          });
       </script>
    </head>
    <body>
        <div id="header">
        <div id="logo">LOGO</div>
        <div id="toolbar">TOOLBAR</div>
        </div>
        <div id="content" style="padding-top:50px;">
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
            <p>lorem ipsum doler</p><br />
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:21:58.177

您是否正在寻找更顺畅的东西。我会推荐使用 Ben Alman 的油门和去抖动 jquery 插件。 **它将减少回调事件的数量以获得更好的性能，尤其是在移动设备上。**

如果您希望滑动效果更平滑和更慢，也可以包含一些动画。

这是一个您可以玩的演示，其中包括两者（您需要节流/去抖动和 jqueryui 插件：

**JSFIDDLE：http: [//jsfiddle.net/collabcoders/vHs4s/](http://jsfiddle.net/collabcoders/vHs4s/)**

```
 $(document).scroll( $.throttle( 250, scrolling ) ); 

    function scrolling() {
         if($(window).scrollTop() < 35)
               $("#toolbar").animate({
                    top: 35 - $(window).scrollTop()
               }, 250);  
         else                 
               $("#toolbar").animate({
                    top: "0"
               }, 250);
        }​
    } 
```

# php - PHP SQL Select 语句 VS Save to file 服务器加载

> ID：11658488
> 
> 赞同：1
> 
> 时间：2012-07-25T20:56:49.350
> 
> 标签：php, mysql, database, webserver

我有一个从我的 php web 服务加载一些 json 的应用程序。此信息可能每隔一小时左右更新一次。

目前，每次用户点击 url 时，我都会重新查询数据库并显示 json 结果。

我现在获得了更多用户，并希望最大程度地减少服务器上的负载。

以这种方式运行或运行 cron 作业并从文件读取和写入更好。

即 cron 执行查询并保存到本地文件。当用户点击网址时，我会阅读查询。

我已经测试了两者并且加载时间大致相同，但我想知道这对服务器整体有何影响？

由于返回的数据量，我认为 memchace 没有任何好处。

任何提示或想法都会很棒

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:02:35.010

最好创建一个纯文本文件，其中包含您的 json 数据。

如果网络服务器必须调用脚本（以及对数据库的可能查询），则服务器负载要高得多。这涉及到许多过程，即使好的网络服务器会尽可能地进行优化。

获取一个普通文件没有太多开销，所以去 cronjob 更新文件，让你的应用程序简单地请求该文件，就像你自己建议的那样。

# clojure - 改进循环递归

> ID：11658489
> 
> 赞同：5
> 
> 时间：2012-07-25T20:56:57.080
> 
> 标签：clojure

我编写了一个函数，试图以交互方式从用户那里获得 ay/n（是/否）答案。它测试答案是否有效，如果不是，则再次请求用户：

```
(defn get-valid-answer [question]
   (println  question)
   (loop []
     (let [ans (.trim (read-line))]
        (if (#{"y" "n"} ans)
            ans
            (do (println "Please answer \"y\"[yes] or \"n\"[no] only!")
                (recur) ))))) 
```

上面带有循环递归的版本可以完成这项工作，但我觉得必须有更好（更实用）的方法来做到这一点。我宁愿只进行一次 read-line 调用。任何人都可以建议在这种情况下不使用循环递归但可能使用某些（Clojure 内置）宏的替代版本吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:15:52.133

想象一个小孩没完没了地问同一个问题，直到得到满意的答复，然后用代码做同样的事情。也就是说，从层出不穷的问题中获取第一个有效的答案。

未经测试，但这应该可以解决问题。

```
(defn ask []
  (println "Please answer \"y\"[yes] or \"n\"[no]:")
  (.trim (read-line)))

(defn get-valid-answer [question]
  (println question)
  (->> (repeatedly ask)
       (filter #{"y" "n"})
       (first))) 
```

`let`如果有两个功能困扰您，您还可以在绑定中定义“询问” 。

# jquery - 通过 JSON 导出从 Google 获取 IP 地址

> ID：11658490
> 
> 赞同：2
> 
> 时间：2012-07-25T20:57:01.343
> 
> 标签：jquery, json, callback, ip-address

您可以使用某些以 JSON 格式导出用户 IP 地址的 Web 服务——作为 javascript 回调配对时很有价值——但我发现的服务似乎不可靠。

我尝试过的两个服务是 [http://jsonip.com/](http://jsonip.com/)和 [http://jsonip.appspot.com](http://jsonip.appspot.com)，但它们经常出现 503 错误（服务不可用）。

```
// Callback to grab JSON
//
function getip(json)
{
    usersIP = json.ip;
}

// External file that returns user IP address
//
document.write('<script type="text/javascript" src="http://jsonip.com/?callback=getip"></script>'); 
```

但是，我注意到，当您[查询 "what is my ip"](http://www.google.ca/search?q=what%20is%20my%20ip)时，Google 会返回您的 IP 地址。我还注意到，您可以[通过 JSON 返回 Google 结果](http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=what%20is%20my%20ip)，但它不包含 IP 地址信息。

关于提取 IP 地址信息的任何建议？

我使用了自己的 PHP 脚本，但我宁愿从更可靠的来源检索它们。

是的，我知道那里有付费服务，但工作限制就是工作限制。

# ruby-on-rails - Rails 3 应用程序中的 RESTful 路由 - 一些建议/指针

> ID：11658496
> 
> 赞同：0
> 
> 时间：2012-07-25T20:57:20.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个应用程序，在本地开发中没有子文件夹，在生产中我将它部署在 /myappname/

所以，在本地我有[http://myapp.dev](http://myapp.dev)和生产[http://mydomain.com/myappname](http://mydomain.com/myappname)

我的根路由是这样的：

```
root :to => 'products#list' 
```

即使在生产中也很有效。

现在，我有一个默认匹配操作：

```
match '/:controller(/:action(/:id))' 
```

这在生产中中断，所以我开始尝试建立一条宁静的路线，但我需要一些帮助......我无法绕开路线。我认为我有正确的开始（范围，如下）

```
#PRODUCTION ROUTES
scope '/myappname' do
    #WHAT WOULD GO HERE?
end 
```

格式为 /myappname/products/show/15

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:09:37.280

嗯。我希望所有路线都相对于“主页”起作用，所以你为什么不直接使用

```
 resources :users 
```

或 config/routes.rb 中示例中的任何其他路由定义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:06:36.057

```
 #PRODUCTION ROUTES
  scope "/mothers" do
    #ROOT
    root :to => 'rings#list'
    match '/rings/:id' => "rings#show", :as => :ring
  end

  #DEVELOPMENT ROUTES
  root :to => 'rings#list'
  match '/rings/:id' => "rings#show", :as => :ring 
```

# java - pom.xml 无法解析父级？

> ID：11658497
> 
> 赞同：1
> 
> 时间：2012-07-25T20:57:23.487
> 
> 标签：java, xml, file, jar, pom.xml

我是 maven 的“菜鸟”，我正在为我找到的一个开源项目运行 mvn clean install。我正在尝试让它构建一个 jar 文件。当我以“据说”的方式运行它时。我得到这个错误...

```
Non-resolvable parent POM: Could not find artifact
com.gorillalogic.monkeytalk:monkeytalk:pom:1.0.12-SNAPSHOT and 'parent.relativePath'
points at wrong local POM @ line 6, column 10 -> [Help 2] 
```

对于 pom.xml 文件@第 6-10 行，我有...

```
<parent>
    <groupId>com.gorillalogic.monkeytalk</groupId>
    <artifactId>monkeytalk</artifactId>
    <version>1.0.12-SNAPSHOT</version>
</parent> 
```

我缺少一个步骤吗？如果您需要，我可以提供更多代码吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:54:45.403

您缺少父项目 pom。

您的文件夹结构很可能如下所示：

```
.../moneytalk_Foo/pom.xml
.../moneytalk_Foo/someFolder

```

但它应该是这样的：

```
.../pom.xml
.../moneytalk_Foo/pom.xml
.../moneytalk_Foo/someFolder

```

或者那个父级本身就是一个项目，你必须下载它并`mvn install`自己调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T15:20:28.590

父项目可能尚未安装，尝试将父项目“monkeytalk”作为 Maven 安装运行。

![如何在eclipse中安装父项目](../Images/ade081a10106db6a810638b9f74b74af.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T00:10:05.620

不确定这是否能治愈所有看到此问题的人，但对我来说，这是因为找不到我的 maven settings.xml 文件。Maven 使用此文件来定位远程存储库以下载 SNAPSHOT 文件，因此如果找不到 settings.xml 文件，则 parent.relativePath 本质上是未定义的。这个 IMO 的错误消息非常糟糕，它应该转储 parent.relativePath 的值以给出未定义变量的一些指示。

# cryptography - Microsoft PlayReady DRM P160 椭圆曲线参数

> ID：11658499
> 
> 赞同：2
> 
> 时间：2012-07-25T20:57:29.567
> 
> 标签：cryptography, elliptic-curve, hsm, cng, playready

我正在尝试为自定义 Microsoft P160 PlayReady 曲线创建正确的 DER 编码 ECC 参数以输入 HSM。我找到了一些指定 P160 曲线定义的来源，因为它是非标准和自定义的。下面是一个来源的链接。特别是，PlayReady 曲线值在William Stein 所著的 Elementary Number Theory,A Computational Approach 一书[的第 6.4.2 节中进行了讨论。](http://www.scribd.com/doc/55582525/45/Elliptic-Curve-Cryptography)

下面是来自[另一个来源](http://cryptome.org/ms-drm.htm)的关于 P160 PlayReady 曲线参数的尝试。

> 对于 ECC，Microsoft 使用 Zp 上的椭圆曲线，其中 p 是 160 位素数（如下所示）。该曲线由位于曲线 y^2=x^3+ax+b 上的点组成，其中操作是在域 Zp 上完成的，a 和 b 是下面给出的系数。所有值都表示为打包二进制值：换句话说，Zp 上的单个值被简单地编码为 20 个字节，以小端顺序存储。因此，椭圆曲线上的一个点是一个 40 字节的块，它由两个 20 字节的小端值（x 坐标后跟 y 坐标）组成。以下是 MS-DRM 中使用的椭圆曲线的参数：
> 
> **p（模数）：** 89abcdef012345672718281831415926141424f7
> **系数 a：** 37a5abccd277bce87632ff3d4780c009ebe41497
> **coefficient b** : 0dd8dabf725e2f3228e85f1ad78fdedf9328239e
> **generator x** : 8723947fd6a3a1e53510c07dba38daf0109fa120
> ***generator y** : 445744911075522d8c3c5856d4ed7acda379936f
> **Order of curve** : 89abcdef012345672716b26eec14904428c2a675
> 
> These constants are fixed, and used by all parties in the MS-DRM system. 当您看到这个以十六进制表示的数字时，模数的“书呆子吸引力”很高：它包括以十六进制计数，以及基本常数 e、pi 和 sqrt(2) 的数字。

基于此信息，我使用 BouncyCastle 作为我的基本 ASN.1 库为 P160 曲线创建了以下 DER 编码曲线参数的十六进制编码。请注意，这些曲线参数中没有指定种子值。

> 308195020101302006072a8648ce3d010102150089abcdef012345672718281831415926141424f7302c041437a5abccd277bce87632ff3d4780c009ebe4149704140dd8dabf725e2f3228e85f1ad78fdedf9328239e0429048723947fd6a3a1e53510c07dba38daf0109fa120445744911075522d8c3c5856d4ed7acda379936f02150089abcdef012345672716b26eec14904428c2a675

尽管这些曲线参数在数学上被 HSM 和 OpenSSL 接受，但产生的 P160 曲线点对 PlayReady 来说是不可接受的。我能够使用相同的过程来生成 PlayReady 可接受的有效 P256 曲线点，所以我不相信我的方法有缺陷。有人对 PlayReady P160 曲线参数有任何经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:15:52.730

与微软一起研究后，找到了解决方案。显然，必须对公钥 x/y 点和私钥进行字节交换，才能使 PlayReady 工具包仅接受 P160 曲线的 EC 密钥对。P256 EC 密钥对不需要这种奇数字节交换。

# python - 酸洗动态生成的类？

> ID：11658511
> 
> 赞同：34
> 
> 时间：2012-07-25T20:57:51.090
> 
> 标签：python, class, dynamic, metaprogramming, pickle

我`type()`用来动态生成最终将被腌制的类。问题是取消腌制过程需要类的定义才能重新构造已腌制的对象。

这就是我卡住的地方。我不知道如何以某种方式*为*unpickler 提供一种从动态生成的类生成实例的方法。

任何提示表示赞赏。

谢谢！

这是问题的一个例子：

```
 >>> class Foo(object):
    ...     pass
    >>> g=type('Goo',(Foo,),{'run':lambda self,x: 2*x } )()
    >>> cPickle.dumps(g)

    PicklingError: Can't pickle <class '__main__.Goo'>: attribute lookup __main__.Goo failed 
```

这显然有效，但仅适用于从可腌制基类（具有可查找模块定义）创建的动态类：

```
import cPickle

class Foo(object): pass

def dynamic(): return type('Goo',(Foo,),{'run':lambda self,x: 2*x } )()

g=type('Goo',(Foo,),{'run':lambda self,x: 2*x , '__reduce__': lambda self: (dynamic,tuple()) } )()

gg=cPickle.loads ( cPickle.dumps(g) )
print gg.run(10) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T03:11:10.590

当 Pickler 遇到一个它不知道的类型的对象时，它会寻找[reduce 方法](http://docs.python.org/library/pickle.html#object.__reduce__)。在使用 type 构建自定义类时定义此方法应该可以解决酸洗问题。

如果您提供初始参数，那么您可能还需要定义一个[getnewargs 方法](http://docs.python.org/library/pickle.html#object.__getnewargs__)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-16T10:24:30.217

您可以为动态生成的类分配一个全局名称以使其可挑选。

```
>>> class Foo(object):
...     pass
>>> class_name = 'Goo'
>>> my_class = type(class_name, (Foo, ), {'run': lambda self, x: 2*x })
>>> globals()[class_name] = my_class
>>> g = my_class()
>>> pickle.dumps(g) 
```

当然，您需要确保类的名称是唯一的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:06:59.393

一个想法是用以下方法腌制一个元组：

1.  动态类的名称
2.  子类元组（可能是来自 repr() 的字符串形式）
3.  类词典
4.  实际实例

这将允许您腌制一个类，然后稍后使用 type() 和子类 Unpickler 重建它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T12:54:13.650

对于*非动态*类，python 的酸洗机制将模块和类名记录为字符串。在 unpickle 时，它​​会自动从该模块加载类对象。

正如原帖中提到的，这里的问题是，对于动态类，类定义本身并没有被默认的pickler腌制。由于模块的源文件中不存在动态类，因此取消动态类通常不起作用。

腌制类本身最棘手的部分是存储方法的字节码。隐藏在 PiCloud 中，引擎盖下有一个增强的pickler，可以[pickle](http://docs.picloud.com/moduledoc.html#module-cloud.mp)您可能使用或扩展它来处理您的对象的动态函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T21:04:50.280

我自己从未做过，但[http://docs.python.org/library/pickle.html#subclassing-unpicklers](http://docs.python.org/library/pickle.html#subclassing-unpicklers)似乎表明您可以通过子类化来覆盖行为`Unpickler`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T07:51:57.493

好吧，为了后代；与 cloudpickle 一起使用

```
import cloudpickle

class Foo(object):
    pass
g=type('Goo',(Foo,),{'run':lambda self,x: 2*x } )()
cloudpickle.dumps(g) 
```

# c++ - 带有矢量的 LNK2005 错误

> ID：11658514
> 
> 赞同：0
> 
> 时间：2012-07-25T20:58:03.360
> 
> 标签：c++, visual-studio-2008, lnk

这个博客[立方](http://cubicspot.blogspot.com/2007/06/solving-pesky-lnk2005-errors.html)建议尝试四件事，然后或多或少地寻求帮助

*   重建，检查
*   检查运行时库，只有一个项目
*   检查入口点，检查 SUBSYSTEM:CONSULE
*   检查强制包含的 .lib 文件，我没有看到 #pragma comment(lib, ...)
*   关于在链接器选项中打开 /VERBOSE 的东西，我没有看到该选项

我会发布一些代码，但这是一个 LNK 错误；它没有提供太多信息。

*   LNK2005：“类 std::vector，类 std::allocator >，类 std::allocator，类 std::allocator > > >，类 std::allocator，类 std::allocator >，类 std::allocator，类 std::allocator > > > > > list1" (?list1@@3V?$vector@V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2 @@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@V?$allocator@ V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@ std@@V?$allocator@D@2@@std@@@2@@std@@@2@@std@@A) 已在 msproject.obj 中定义
*   LNK2005：“类 std::vector，类 std::allocator >，类 std::allocator，类 std::allocator > > >，类 std::allocator，类 std::allocator >，类 std::allocator，类 std::allocator > > > > > list1" (?list1@@3V?$vector@V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2 @@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@V?$allocator@ V?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@ std@@V?$allocator@D@2@@std@@@2@@std@@@2@@std@@A) 已在 msproject.obj 中定义

我看到它与 msproject 中已经定义的向量有关 - 我确保向量具有不同的名称。这是与标题有关的东西吗`# include <vector>`？我尝试注释掉一些#includes 以检查，但相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:01:07.137

似乎您`list1`不止一次定义。（顺便说一句，顾名思义它应该是 a `std::list`，但这超出了问题的范围）

你有没有

```
std::vector<std::string> list1; 
```

在头文件中？该标题是否包含在多个翻译单元中？

如果你想要一个全局的，你需要`extern`在标题中使用：

```
extern std::vector<std::string> list1; 
```

并将定义移动到**单个**实现文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:13:08.543

您已经多次定义了 list1。可能通过将它放在一个头文件中，然后您将其包含在多个 cpp 文件中。你应该这样做

```
// in header file
extern std:vector<whatever> list1;

// in one cpp file
std:vector<whatever> list1; 
```

您的知识差距在于您不知道/不了解如何在具有多个源文件的程序中声明和定义全局变量。任何体面的 C++ 入门书籍都应该涵盖这一点。

# android - SearchWidget 什么都不做

> ID：11658518
> 
> 赞同：1
> 
> 时间：2012-07-25T20:58:08.847
> 
> 标签：android, searchview

即使在阅读了示例和一些关于 SO 的问题之后，我仍然不明白为什么我的 searchwidget 什么都不做......！

Manifest.xml 简化：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

     <activity android:name=".ResultActivity" >
        <intent-filter>
          <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
                   android:resource="@xml/searchable"/>
        </activity>

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >

    </activity> 
```

xml/searchable.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
android:label="@string/app_name"
android:hint="@string/search_hint" >
</searchable> 
```

menu/activity_main.xml（操作栏中的搜索小部件..）：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" />

<item android:id="@+id/menu_search"
      android:title="@string/menu_search"
      android:icon="@drawable/ic_menu_search"
      android:showAsAction="ifRoom"
      android:actionViewClass="android.widget.SearchView" /> 
```

应该进行搜索的 MainActivity：

```
public class MainActivity extends Activity implements OnClickListener {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the options menu from XML
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default
    searchView.setSubmitButtonEnabled(true);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_settings:
            // app icon in action bar clicked; go parameters
            Intent intent = new Intent(this, ParametersActivity.class);
            //intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            break;
        case R.id.menu_search:
            onSearchRequested();
            return true;
    }
    return true;
} 
```

}

和结果活动：

```
public class ResultActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search_result);
     // Get the intent, verify the action and get the query
    Intent intent = getIntent();
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
      String query = intent.getStringExtra(SearchManager.QUERY);
      doMySearch(query);
      Toast.makeText(this, "QUERY : " + query, Toast.LENGTH_SHORT).show();
    }

} 
```

我已遵循 API 指南，但我看不出我的错误在哪里，如果有人可以提供帮助，我将不胜感激！

谢谢。

尼科。

# delphi - 范围检查错误的原因（Delphi）

> ID：11658519
> 
> 赞同：11
> 
> 时间：2012-07-25T20:58:18.790
> 
> 标签：delphi, delphi-7

如果我打开那些编译器检查指令，这是一些导致范围检查错误和溢出错误的代码的精简版本。我理解为什么这会导致溢出，在 C1 的乘法中，它似乎可能超过数据类型的最大值。但是为什么这也会触发范围检查错误呢？Delphi 的文档和其他关于堆栈溢出的帖子听起来像是范围检查错误通常是针对超出范围的数组访问。但我没有访问它所说的导致范围检查错误的行上的数组。也许它分配给param1？但是，如果是这样，那为什么会是范围检查而不是溢出错误呢？

```
const
  C1 = 44001;
  C2 = 17999;

function fxnName(..other params...; param1: Word): String;
var
  someByte: byte;
begin
  // some code
  // by now we're in a loop. the following line is where it breaks to in the debugger: 
  param1 := (someByte + param1) * C1 + C2;
  // more code
end; 
```

如果它是相关的，当它在调试器中的该行中断时，所有值看起来都符合预期，除了 param1，当我要求 Delphi 评估它时，它显示“未声明的标识符：'param1'”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T21:22:59.797

有关范围检查的文档指出：

> $R 指令启用或禁用范围检查代码的生成。在 {$R+} 状态下，所有数组和字符串索引表达式都被验证是否在定义的范围内，并且所有对标量和子范围变量的赋值都被检查是否在范围内。如果范围检查失败，则会引发 ERangeError 异常（或者如果未启用异常处理，程序将终止）。

所以这里的原因是分配给一个标量值，它被传递一个已经超过上限的值。

另请参阅[docwiki Simple Types](http://docwiki.embarcadero.com/RADStudio/en/Simple_Types)关于简单类型和子范围类型的范围检查错误。

例子：

```
{$R+} // Range check on
var
  w1,w2 : word;
begin
  w1 := High(word);
  w1 := w1 + 10; // causes range-check error on assignment to w1 (upper range passed)
  w2 := 0;
  w2 := w2 - 10; // causes range-check error on assignment to w2 (lower range passed)
end; 
```

对所有平台无关整数类型的 $R 和 $Q 的所有组合的总结测试：

```
 R+Q+  R+Q-  R-Q+
 ShortInt    R     R     x
 SmallInt    R     R     x
 Integer     O     x     O
 LongInt     O     x     O
 Int64       O     x     O
 Byte        R     R     x
 Word        R     R     x
 LongWord    O     x     O
 Cardinal    O     x     O
 UInt64      O     x     O 
```

R=范围误差；O=溢出错误；x=无

并且测试是（伪代码）在 32 位模式下使用 XE2：

```
number := High(TNumber);
number := number + 1; 
```

# vb.net - 如何注释掉现有的数据库连接，然后使用 vb.net 在 web.config 中创建新的数据库连接？

> ID：11658522
> 
> 赞同：0
> 
> 时间：2012-07-25T20:58:25.653
> 
> 标签：vb.net, web-config

基本上我有一个 web.config 文件，它在“connectionStrings”和“appSettings”部分都有几个数据库连接。请参见下面的示例。

```
<connectionStrings>
    <!-- Connection String for SQL Server 2005 Express -->
    <add
      name="SiteSqlServer"
      connectionString="Data Source=.\SQLExpress;Integrated Security=True;User Instance=True;AttachDBFilename=|DataDirectory|Database.mdf;"
      providerName="System.Data.SqlClient" />
    <!-- Connection String for SQL Server 2000/2005
<add
  name="SiteSqlServer"
  connectionString="Server=(local);Database=DotNetNuke;uid=;pwd=;"
  providerName="System.Data.SqlClient" /> -->
</connectionStrings>
<appSettings>
    <!-- Connection String for SQL Server 2005 Express - kept for backwards compatability - legacy modules   -->
    <add key="SiteSqlServer" value="Data Source=.\SQLExpress;Integrated Security=True;User Instance=True;AttachDBFilename=|DataDirectory|Database.mdf;"/>
    <!-- Connection String for SQL Server 2000/2005 - kept for backwards compatability - legacy modules
<add key="SiteSqlServer" value="Server=(local);Database=DotNetNuke;uid=;pwd=;"/>
-->
    <add key="InstallTemplate" value="DotNetNuke.install.config" />
    <add key="AutoUpgrade" value="true" />
    <add key="UseInstallWizard" value="true"/>
    <add key="InstallMemberRole" value="true" />
    <add key="ShowMissingKeys" value="false" />
    <add key="EnableWebFarmSupport" value="false" />
    <add key="EnableCachePersistence" value="false"/>
    <add key="HostHeader" value="" />
    <!-- Host Header to remove from URL so "www.mydomain.com/johndoe/Default.aspx" is treated as "www.mydomain.com/Default.aspx" -->
    <add key="RemoveAngleBrackets" value="false" />
    <!--optionally strip angle brackets on public login and registration screens-->
    <add key="PersistentCookieTimeout" value="0" />
    <!--use as persistent cookie expiration. Value is in minutes, and only active if a non-zero figure-->
    <!-- set UsePortNumber to true to preserve the port number if you're using a port number other than 80 (the standard)
<add key="UsePortNumber" value="true" /> -->
</appSettings> 
```

我需要做的是遍历每个连接字符串，将它们注释掉，然后将我的新连接字符串添加到 web.config 文件的两个部分。

这就是我到目前为止所拥有的 - 创建新的连接字符串正在工作，但我不确定如何循环注释掉任何原始连接字符串。

```
 Dim Name As String = "SiteSqlServer"

    Dim isNew As Boolean = False
    Dim MyWebConfigPath As String = "C:\test\Web.Config"
    Dim MyWebConfigFile As New XmlDocument()

    MyWebConfigFile.Load(MyWebConfigPath)

    Dim list As XmlNodeList = MyWebConfigFile.DocumentElement.SelectNodes(String.Format("connectionStrings/add[@name='{0}']", Name))
    Dim node As XmlNode

    isNew = list.Count = 0

    If isNew = False Then

        'Comment out existing connection settings

    End If

    node = MyWebConfigFile.CreateNode(XmlNodeType.Element, "add", Nothing)
    Dim attribute As XmlAttribute = MyWebConfigFile.CreateAttribute("name")
    attribute.Value = Name
    node.Attributes.Append(attribute)

    attribute = MyWebConfigFile.CreateAttribute("connectionString")
    attribute.Value = "Data Source=CP5-1234\SQLEXPRESS;Initial Catalog=demo_db;User ID=demo_dbusr;Password=MyPass#1234"
    node.Attributes.Append(attribute)

    attribute = MyWebConfigFile.CreateAttribute("providerName")
    attribute.Value = "System.Data.SqlClient"
    node.Attributes.Append(attribute)

    MyWebConfigFile.DocumentElement.SelectNodes("connectionStrings")(0).AppendChild(node)

    MyWebConfigFile.Save(MyWebConfigPath) 
```

这就是我想要的结果：

```
<connectionStrings>
    <!-- Connection String for SQL Server 2005 Express -->
    <!-- REMOVED BY ME ON 6/6/2012
    <add
      name="SiteSqlServer"
      connectionString="Data Source=.\SQLExpress;Integrated Security=True;User Instance=True;AttachDBFilename=|DataDirectory|Database.mdf;"
      providerName="System.Data.SqlClient" /> -->
    <!-- Connection String for SQL Server 2000/2005
<add
  name="SiteSqlServer"
  connectionString="Server=(local);Database=DotNetNuke;uid=;pwd=;"
  providerName="System.Data.SqlClient" /> -->
<add name="SiteSqlServer" connectionString="Data Source=CP5-1234\SQLEXPRESS;Initial Catalog=demo_db;User ID=demo_dbusr;Password=MyPass#1234" providerName="System.Data.SqlClient" />
</connectionStrings>
<appSettings>
    <!-- Connection String for SQL Server 2005 Express - kept for backwards compatability - legacy modules   -->
    <!-- REMOVED BY ME ON 6/6/2012
    <add key="SiteSqlServer" value="Data Source=.\SQLExpress;Integrated Security=True;User Instance=True;AttachDBFilename=|DataDirectory|Database.mdf;"/> -->
    <!-- Connection String for SQL Server 2000/2005 - kept for backwards compatability - legacy modules
<add key="SiteSqlServer" value="Server=(local);Database=DotNetNuke;uid=;pwd=;"/> -->
<add name="SiteSqlServer" connectionString="Data Source=CP5-1234\SQLEXPRESS;Initial Catalog=demo_db;User ID=demo_dbusr;Password=MyPass#1234" providerName="System.Data.SqlClient" />
    <add key="InstallTemplate" value="DotNetNuke.install.config" />
    <add key="AutoUpgrade" value="true" />
    <add key="UseInstallWizard" value="true"/>
    <add key="InstallMemberRole" value="true" />
    <add key="ShowMissingKeys" value="false" />
    <add key="EnableWebFarmSupport" value="false" />
    <add key="EnableCachePersistence" value="false"/>
    <add key="HostHeader" value="" />
    <!-- Host Header to remove from URL so "www.mydomain.com/johndoe/Default.aspx" is treated as "www.mydomain.com/Default.aspx" -->
    <add key="RemoveAngleBrackets" value="false" />
    <!--optionally strip angle brackets on public login and registration screens-->
    <add key="PersistentCookieTimeout" value="0" />
    <!--use as persistent cookie expiration. Value is in minutes, and only active if a non-zero figure-->
    <!-- set UsePortNumber to true to preserve the port number if you're using a port number other than 80 (the standard)
<add key="UsePortNumber" value="true" /> -->
</appSettings> 
```

# php - 这个循环正确吗？有时它会显示额外的内容（wordpress）

> ID：11658523
> 
> 赞同：0
> 
> 时间：2012-07-25T20:58:27.403
> 
> 标签：php, wordpress

我把这个小循环放在一起来显示日历中即将发生的 4 个事件。

我把它放在侧边栏中。

在存档页面上，它的行为正常。

但是在单个帖子页面上它变得疯狂，并加载4个事件+重新加载页面上的所有内容，例如第二个侧边栏第二个帖子和第二个右侧边栏......

注释掉查询会阻止这种疯狂的行为。所以不，我没有犯愚蠢的复制粘贴错误:)

```
 <ul class="sidebarlists">
                        <li>
                        <h2>Upcoming Events</h2>
                        <span class="seeallside"><a href="http://localhost/wordpress/events/">See All</a></span>

                            <?php
                                $postslist = query_posts('order=DESC&orderby=modified&posts_per_page=4&post_type=tribe_events&eventDisplay=upcoming'); 

                                echo "<ul>";

                                foreach ($postslist as $loopID => $p) {
                                   echo "<li>";
                                   echo "<a title='". $p->post_title . "' href='" . get_permalink($p->ID) . "'>".get_the_post_thumbnail( $p->ID, array( 50,50, 'class' => ' sidebarthumb '))."</a>";
                                   echo "<h3><a title='". $p->post_title  . "' href='" . get_permalink($p->ID) . "'>".$p->post_title."</a></h3>";
                                   echo "<span>".tribe_get_start_date( $p->ID, true, 'D. M j, Y' )."</span>";
                                   echo " <div class=\"clearfloat\"></div>";
                                   echo "</li>";
                                }

                                echo "</ul>";      
                            ?>

                        </li>
                    <!-- End #sidebarlists --></ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:02:50.463

在这里阅读：http: [//codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

它说您应该使用 get_posts() 使用“辅助”循环，因为 query_posts 会废弃 $post 变量，请参阅“Alters Main Loop”和“Secondary Loops”

# import - SAS宏做循环——导入多个平面文件

> ID：11658526
> 
> 赞同：1
> 
> 时间：2012-07-25T20:58:33.583
> 
> 标签：import, macros, sas, sas-macro

我有一个包含 17 个平面文件的列表，我正在尝试将它们导入到不同的数据集中。所有文件都有相同的数据步骤，所以我正在尝试编写一个 do while 循环来导入所有文件。

我一直试图从这里改编一些代码但没有成功： http: [//www.sas.com/offices/europe/uk/support/sas-hints-tips/tips-enterprise-csv.html](http://www.sas.com/offices/europe/uk/support/sas-hints-tips/tips-enterprise-csv.html)

[http://support.sas.com/documentation/cdl/en/mcrolref/61885/HTML/default/viewer.htm#a000543785.htm](http://support.sas.com/documentation/cdl/en/mcrolref/61885/HTML/default/viewer.htm#a000543785.htm)

我收到一个错误，上面写着`%do statement is not valid in open code`. 这是我的代码：

```
% let path1 = 'c:\path1'
% let path2 = 'c:\path2'
...
% let pathN = 'c:\pathN' 

%let n=1; 

%do %while (&n <= 17);
%let pathin = &path&n;

  data retention&n;
    infile &pathin;
    <data step-->
  run;

%let n=%eval(&n+1); 
%end; 
```

`%let pathin = &path&n`我已经在 do-while 循环之外测试了数据步骤，并且使用代码一次可以正常处理 1 个文件。代码仍然为第一个数据集编写数据文件；但是，我需要能够遍历所有文件并且不知道如何。对不起，如果这是一个新手问题；我只是在学习SAS。

谢谢，-亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T23:09:33.947

欢迎来到 SAS 编程！您收到的错误消息是一个线索。“开放代码”是指由 SAS 系统直接执行的语句。`%do`语句是**SAS Macro Language**的一部分，而不是“普通” SAS。一条`%let`语句可以在开放代码中执行，并用于创建一个`macro variable`（与已编译的宏不同）。

编译的 SAS 宏是由出现在`%macro`and`%mend`语句之间的代码创建的。例如，使用您的代码：

```
%macro run_me;
%let n=1; 

%do %while (&n <= 17);
%let pathin = &path&n;

  data retention&n;
    infile &pathin;
    <data step-->
  run;

%let n=%eval(&n+1); 
%end;
%mend; 
```

但所做的只是定义/编译宏。要执行它，您必须发出语句`%run_me;`。请注意，这个名字`run_me`只是我编的一个名字。

有关详细信息，请参阅[SAS 宏参考](http://support.sas.com/documentation/cdl/en/mcrolref/62978/HTML/default/viewer.htm#titlepage.htm)，尤其是介绍部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:37:41.977

要将程序转换为宏，请将`LET`语句声明的宏变量转换为宏参数：

```
%macro readfile(n, pathin);

  data retention&n;
    infile &pathin;
    <data step-->
  run;

%mend; 
```

重复调用宏的数据步骤。这里的数据包含在`CARDS`语句中，也可以通过`SET`语句从某个表中读取。宏调用是通过`call execute`例程执行的。

```
data _null_;
length path $200 stmt $250;
input path;
stmt = catt('%readfile(', putn(_N_, 3\. -L), path, ')');
call execute(stmt);

cards;
c:\file1.txt
c:\file2.txt
c:\file3.txt
;
run; 
```

# ruby-on-rails - 是否可以使用 ruby 访问 AdSense API？

> ID：11658527
> 
> 赞同：1
> 
> 时间：2012-07-25T20:58:33.693
> 
> 标签：ruby-on-rails, ruby, adsense, adsense-api

我正在尝试使用 ruby​​ 访问 AdSense Management API。他们推荐使用他们的通用 Google-API 客户端库：

[http://code.google.com/p/google-api-ruby-client/#Google_AdSense_Management_API](http://code.google.com/p/google-api-ruby-client/#Google_AdSense_Management_API)

这不是很有帮助，我遇到了错误：

[google_drive 和 google-api-client 中的法拉第冲突](https://stackoverflow.com/questions/11090145/faraday-conflicts-in-google-drive-and-google-api-client)

我应该从哪里开始访问我的 AdSense 数据？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:52:14.800

很遗憾，我们还没有为 AdSense 管理 API 准备任何示例代码……还没有！但是，正如您所指出的，客户端库是通用的，并且应该与任何较新的 Google API 一起使用，因此其他一些示例可能会有所帮助。

如果您遇到任何具体问题，请针对这些问题创建一个问题并指出我，我会尽力提供帮助。

如果您想快速入门，我可以为您准备，但我们应该确保您遇到的问题与 AdSense 管理 API 本身有关，而不仅仅是客户端库你链接到。

[编辑] 这是一个基于 Sinatra 的快速示例：

```
#!/usr/bin/ruby
require 'rubygems'
require 'sinatra'
require 'google/api_client'

FILENAME = 'auth.obj'
OAUTH_CLIENT_ID = 'INSERT_OAUTH2_CLIENT_ID_HERE'
OAUTH_CLIENT_SECRET = 'INSERT_OAUTH2_CLIENT_SECRET_HERE'

before do
  @client = Google::APIClient.new
  @client.authorization.client_id = OAUTH_CLIENT_ID
  @client.authorization.client_secret = OAUTH_CLIENT_SECRET
  @client.authorization.scope = 'https://www.googleapis.com/auth/adsense'
  @client.authorization.redirect_uri = to('/oauth2callback')
  @client.authorization.code = params[:code] if params[:code]

  # Load the access token here if it's available
  if File.exist?(FILENAME)
    serialized_auth = IO.read(FILENAME)
    @client.authorization = Marshal::load(serialized_auth)
  end
  if @client.authorization.refresh_token && @client.authorization.expired?
    @client.authorization.fetch_access_token!
  end
  @adsense = @client.discovered_api('adsense', 'v1.1')
  unless @client.authorization.access_token || request.path_info =~ /^\/oauth2/
    redirect to('/oauth2authorize')
  end
end

get '/oauth2authorize' do
  redirect @client.authorization.authorization_uri.to_s, 303
end

get '/oauth2callback' do
  @client.authorization.fetch_access_token!
  # Persist the token here
  serialized_auth = Marshal::dump(@client.authorization)
  File.open(FILENAME, 'w') do |f|
    f.write(serialized_auth)
  end
  redirect to('/')
end

get '/' do

  call = {
    :api_method => @adsense.reports.generate,
    :parameters => {
      'startDate' => '2011-01-01',
      'endDate' => '2011-08-31',
      'dimension' => ['MONTH', 'CUSTOM_CHANNEL_NAME'],
      'metric' => ['EARNINGS', 'TOTAL_EARNINGS']
    }
  }

  response = @client.execute(call)
  output = ''

  if response && response.data && response.data['rows'] &&
      !response.data['rows'].empty?
    result = response.data

    output << '<table><tr>'
    result['headers'].each do |header|
      output << '<td>%s</td>' % header['name']
    end
    output << '</tr>'

    result['rows'].each do |row|
      output << '<tr>'
      row.each do |column|
        output << '<td>%s</td>' % column
      end
      output << '</tr>'
    end

    output << '</table>'
  else
    output << 'No rows returned'
  end

  output
end 
```

# wpf - 如何在 ListviewControl 中为 Windows 窗体应用程序添加图标和文本

> ID：11658529
> 
> 赞同：0
> 
> 时间：2012-07-25T20:58:35.217
> 
> 标签：wpf, listview, wpf-controls

我有一个 Windows 窗体应用程序，我需要在其中使用 WPF 中的 Listview 控件。我正在尝试在列表视图中添加图标和文本，它是带有一些文本的已完成或失败任务的视图。我不能使用 xaml，所以需要以编程方式使用它。我正在关注

this.listViewComponents.Items.Add(new MyObject(Properties.Resources.Failed,"Failed"));

在最终的列表视图中，我只看到程序集名称，没有看到图标后跟“失败”文本。我错过了什么吗？请帮忙 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:45:12.623

您的`MyObject`班级需要 WPF 项目中的 DataTemplate。

请参阅[http://msdn.microsoft.com/en-us/library/ms742521.aspx](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

# php - PHP __construct()

> ID：11658532
> 
> 赞同：0
> 
> 时间：2012-07-25T20:58:49.333
> 
> 标签：php, class, pdo

我有以下内容，但是我无法访问初始 db 类之外的数据库函数？

谢谢！

数据库.php

```
class db
{
  private $connection;

  public function __construct()
  {
    $this->connection = new PDO();
  }
} 
```

管理员.php

```
class admin
{
  private $connection

  public function __construct(db $connection)
  {
    $this->connection = $connection;
  }

  function myFunc()
  {
    // How do I access the connection here?
  }
} 
```

主文件

```
//include db.php
//include admin.php

$connection = new db();
$admin = new admin($connection);

// How do I access the DB here? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:05:27.433

好的，您确实需要阅读面向对象的设计和访问修饰符。我将在这里解释你需要做什么，但这是一个临时解决方案，你需要深入了解这里的工作方式。

在您的管理类中，您将连接定义为类的私有属性。因此，在 myFunc 函数中，您只需执行 $this->connection 即可访问您在构造函数中创建的连接。

在您的 main.php 文件中，您正在初始化 DB 对象的 rom 对象不是连接。它是一个整体的db对象，所以你不能将连接本身传递给admin类（它被定义为私有，所以类外没有人可以查看它）。但是，为什么需要将它传递给管理类？管理 DB 连接应该是 DB 类的责任。

换句话说，你想通过将数据库连接暴露给管理类来实现什么？

**更新：根据这里的回复是一个建议的答案：**

```
class Database {
    private $connection;
    public function __construct() {
        $this->connection = new PDO();
    }
}

class Admin {
    private $db;
    public function __construct() {
        $this->db = new Database();
    }

    public function myFunc() {
        $this->db->query('...');
    }
} 
```

在您的 main.php 文件中：

```
$admin = new Admin();
$admin->myFunc(); 
```

请记住，每个管理对象都会创建到数据库的新连接，因此如果您创建许多管理对象，您可能会遇到一些问题。您可以通过将数据库声明为单例来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:10:48.920

首先，你为什么只封装`PDO`包含那个对象的类？不能`PDO`直接用吗？

一种常见的做法是在 db 类中实现 getter，例如：

```
class db {
    ...

    public function getPDO(){
       return $this->connection;
    }
} 
```

另一种方法是重新实现每个函数（你为什么要这样做？！），或者使用`__call`魔法函数......

或者只是`$connection`公开;）

或者您可以扩展[`PDO`](http://php.net/manual/en/class.pdo.php)课程（我不确定它是否会起作用）：

```
class DB extends PDO {
    public function __construct ( $dsn, $username = null, $password = null, $driver_options = array()){
            parent::__construct( $dsn, $username, $password, $driver_options);
            ... more of your stuff
    }

    public function myFunc(){
        $this->...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:15:28.417

这个怎么样：已更新

```
 <pre>
 <?php 
class DB {

    private $host;
    private $user;
    private $pass;
    private $dbase;
    private $connection;

    public function __construct($host,$user,$pass,$dbase)
    {
        $this->host = $host;
        $this->user = $user;
        $this->pass = $pass;
        $this->dbase = $dbase;
        $this->connection = new PDO("mysql:host=$this->host;dbname=$this->dbase", $this->user, $this->pass);
    }
    public function connect()
    {
        return $this->connection;
    }
    public function close()
    {
        unset($this->connection);
        return true;
    }
}
$dbh = new DB('localhost','root','','inventory');
$result  = $dbh->connect()->query("SELECT * FROM products")->fetchAll(PDO::FETCH_ASSOC);
print_r($result);
?>
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:01:13.947

更新了文件分离

**数据库.php**

```
class db
{
    private $connection;

    public function __construct()
    {
        $this->connection = new PDO();
    }
} 
```

**管理员.php**

```
class admin
{
    private $connection

    public function __construct(db $connection)
    {
        $this->connection = $connection;
    }

    function myFunc()
    {
        return $this->connection->prepare('SQL');
    }

    function getConnection()
    {
        return $this->connection;
    }
} 
```

**主文件**

```
require_once 'database.php';
require_once 'admin.php';

$connection = new db();
$admin = new admin($connection);
$admin->myFunc()->execute(); 
```

# javascript - 将字符串映射到javascript中的函数

> ID：11658533
> 
> 赞同：6
> 
> 时间：2012-07-25T20:58:51.717
> 
> 标签：javascript, jquery, html, map

我想让它基于 HTML 元素列表中的 HTML 属性的值，我可以根据该属性的字符串值的值调用不同的 javascript 函数。

基本上我想要的是来自 javascript / jQuery 中字符串 => 函数的映射。（然后当然可以调用这个函数）。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T20:59:55.290

是的：

```
var fnMap = {
  "foo": function() { ... },
  "bar": function() { ... },
  // ...
}; 
```

如果您的函数已经存在，您可以通过名称引用它们：

```
var fnMap = {
  "foo": someFunction,
  "bar": otherFunction,
  // ...
}; 
```

你可以混合两种风格。

要根据值调用其中一个函数：

```
fnMap[ value ]( param, param, ... ); 
```

# c# - 合并两个表达式的结果

> ID：11658535
> 
> 赞同：2
> 
> 时间：2012-07-25T20:58:57.010
> 
> 标签：c#, linq, linq-to-entities

我想组合两个 Linq 表达式的结果。我想要组合的结果将是两个返回对象的组合。

```
Expression<Func<Person, User>> basicUser = t => new User() { Name = t.FirstName };
Expression<Func<Person, User>> detailedUser = t => Execute basicUser and add the following  assignments { DOB = t.DOB }; 
```

WHERE detailUser 继承了 basicUser 中的所有逻辑，并设置了 User 对象的 DOB 属性。

这将像这样使用：

```
context.CreateObjectSet<Persons>().Where(p => p.PersonType == User).Select<Person, User>(detailedUser); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:50:39.180

您必须重建表达式才能添加字段。

假设这些表达式并不复杂并且`basicUser`表达式将始终采用该形式，您可以更改表达式以添加新绑定。您可以在一个简单的访问者的帮助下做到这一点。

```
public class AddDobBindingVisitor : ExpressionVisitor
{
    private ParameterExpression parameter;

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        parameter = node.Parameters.Single();
        return base.VisitLambda(node);
    }

    protected override Expression VisitMemberInit(MemberInitExpression node)
    {
        var member = typeof(User).GetProperty("DOB");
        var newBindings = new[]
        {
            Expression.Bind(member, Expression.Property(parameter, "DOB")),
        };
        var updatedNode = node.Update(
            node.NewExpression,
            node.Bindings.Concat(newBindings));
        return base.VisitMemberInit(updatedNode);
    }
} 
```

然后应用更改：

```
Expression<Func<Person, User>> basicUser = person => new User()
{
    Name = person.FirstName
};
var detailedUser = (Expression<Func<Person, User>>)new AddDobBindingVisitor()
    .Visit(basicUser);
// detailedUser:
//     person => new User()
//     {
//         Name = person.FirstName,
//         DOB = person.DOB
//     } 
```

# windows - Matlab编译的.exe不能用任务调度器运行但是可以双击运行

> ID：11658543
> 
> 赞同：0
> 
> 时间：2012-07-25T20:59:28.867
> 
> 标签：windows, matlab, scheduled-tasks, matlab-deployment, matlab-compiler

我有一个matlab编译的.exe文件，双击可以正常运行，但是用任务调度器运行时，弹出如下错误：

![在此处输入图像描述](../Images/8042bc851c1b5ab85365c3c41600fa10.png)

而实际上我已经安装了MCR的7.17，否则它不会双击运行。任何人都可以帮助解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:40:19.403

您需要在 PATH 环境变量中包含 MCR 安装文件夹。有关如何操作的说明，请参见[此处](http://www.computerhope.com/issues/ch000549.htm)（您可能需要注销/登录才能生效）。

请注意，如果您在命令提示符中使用 SET 命令，所做的更改不是永久性的，它们将仅应用于当前的 CMD 提示符，并且仅保留到命令提示符关闭为止。

# html - z-index order issue

> ID：11658556
> 
> 赞同：1
> 
> 时间：2012-07-25T21:00:22.877
> 
> 标签：html, css, z-index

Why doesn't the below Z-INDEX order work?

What I want is the DIV tag to overlay the H1 and P tags. Instead, when the DIV's innerHTML is initialized, the other tags shift down the page. As you can see, all elements on the page are positioned and the DIV has a higher Z-INDEX. What else am I missing? (both the HTML and CSS validate)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<title>z-index test</title>
    <style type="text/css">
        @media screen {
            #myTitle {position: relative; margin-top:20px; margin-left:20px; z-index:1;}
            #overLay {position: relative; margin-top:20px; margin-left:20px; z-index:999;}
            .btn {position: relative; margin-left:20px;}
            p {position: relative; margin-left:20px; z-index:1;}
        }
    </style>
</head>
<body>
<div id="overLay"></div>
<h1 id="myTitle">An H1 Header</h1>
<p>A paragraph....</p>
<p>And another paragraph....</p>
<button class="btn" onclick="on_Clear();">clear div element</button>
<button class="btn" onclick="on_Init();">init div element</button>
<script type="text/javascript">
<!--
document.getElementById("overLay").innerHTML = "Stack Overflow is a programming Q & A site that’s free. Free to ask questions, free to answer questions, free to read, free to index, built with plain old HTML, no fake rot13 text on the home page, no scammy google-cloaking tactics, no salespeople, no JavaScript windows dropping down in front of the answer asking for $12.95 to go away. You can register if you want to collect karma and win valuable flair that will appear next to your name, but otherwise, it’s just free. And fast. Very, very fast.";
function on_Clear() {document.getElementById("overLay").innerHTML = "";}
function on_Init() {document.getElementById("overLay").innerHTML = "Stack Overflow is a programming Q & A site that’s free. Free to ask questions, free to answer questions, free to read, free to index, built with plain old HTML, no fake rot13 text on the home page, no scammy google-cloaking tactics, no salespeople, no JavaScript windows dropping down in front of the answer asking for $12.95 to go away. You can register if you want to collect karma and win valuable flair that will appear next to your name, but otherwise, it’s just free. And fast. Very, very fast.";}
//-->
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:03:28.757

if you want elements to overlay on top of other elements you're going to have to use z-index along with `position: absolute;` or use negative margins/padding.

You also shouldn't need to put `position:relative;` on everything in your css.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:06:13.480

Try absolute positioning inside a relative container (div). This takes the element outside the normal document flow and z-index should work.

Also,remove the z-idnex from the relative elements.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:19:51.467

The below works as expected. I made the changes based on one of @Catfish comments.

Note, I added one wrapper DIV around the overLay DIV. The wrapper does not need to contain any of the other elments on the page and it can be relatively positioned. Its z-index is set to one. It contains the overLay DIV which is absolutely positioned, but what is useful (I think) is #overLay does not need to have any position attributes set. So, affectively, it is still relatively positioned. Finally, the positioning and z-index styling was removed from all other elements.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<title>z-index test</title>
 <style type="text/css">
  @media screen {
    #wrapper {position: relative; margin-top:20px; margin-left:20px; z-index:1;}
    #overLay {position: absolute; z-index:999; background-color:#fff;}
    #myTitle {margin-top:20px; margin-left:20px;}
    .btn {margin-left:20px;}
    p {margin-left:20px;}
  }
 </style>
</head>
<body>
  <div id="wrapper"><div id="overLay"></div></div>
  <h1 id="myTitle">An H1 Header</h1>
  <p>A paragraph....</p>
  <p>And another paragraph....</p>
  <button class="btn" onclick="on_Clear();">clear div element</button>
  <button class="btn" onclick="on_Init();">init div element</button>

<script type="text/javascript">
<!--
document.getElementById("overLay").innerHTML = "Stack Overflow is a programming Q & A site that’s free. Free to ask questions, free to answer questions, free to read, free to index, built with plain old HTML, no fake rot13 text on the home page, no scammy google-cloaking tactics, no salespeople, no JavaScript windows dropping down in front of the answer asking for $12.95 to go away. You can register if you want to collect karma and win valuable flair that will appear next to your name, but otherwise, it’s just free. And fast. Very, very fast.";
function on_Clear() {document.getElementById("overLay").innerHTML = "";}
function on_Init() {document.getElementById("overLay").innerHTML = "Stack Overflow is a programming Q & A site that’s free. Free to ask questions, free to answer questions, free to read, free to index, built with plain old HTML, no fake rot13 text on the home page, no scammy google-cloaking tactics, no salespeople, no JavaScript windows dropping down in front of the answer asking for $12.95 to go away. You can register if you want to collect karma and win valuable flair that will appear next to your name, but otherwise, it’s just free. And fast. Very, very fast.";}
//-->
</script>
</body>
</html> 
```

Now, let's see if this works on a real page.

# c++ - OpenGL 3.2 纹理问题

> ID：11658560
> 
> 赞同：0
> 
> 时间：2012-07-25T21:00:31.893
> 
> 标签：c++, opengl, glsl, opengl-3, texturing

我目前正在使用 C++ 开发 2D 引擎。

我遇到了一个问题，我似乎相信我以前遇到过一次，但后来忘记了我是如何解决它的。

该引擎是跨平台的（Win、OSX、Linux），为此我使用 GLFW 作为基础。

当做正常的纹理处理时，我最终得到了这个：

![http://tinypic.com/r/263ec6o/6](../Images/c998bb77309058a7c95f634fbc41aa99.png)

如您所见，纹理不正确（因为图像应该是我的简单图像）。

使用 geDebugger，我可以确认缓冲到 GPU 的图像是正确的，但是正如您在图像中看到的那样，它是如何结束的。

我将在下面包含一些相关代码的削减，但如果您想了解更多信息，请随时询问。

-缓冲区生成代码

```
glGenVertexArrays( 1, &_vao );
// Generate Buffers and so on.
glBindVertexArray( _vao );

glGenBuffers( 1, &_vboVertices );
glBindBuffer( GL_ARRAY_BUFFER, _vboVertices );
glBufferData( GL_ARRAY_BUFFER, sizeof(GLfloat) * 3 * _numVertices, _vertices, GL_STATIC_DRAW );

glGenBuffers( 1, &_vboTexCoords );
glBindBuffer( GL_ARRAY_BUFFER, _vboTexCoords );
glBufferData( GL_ARRAY_BUFFER, sizeof(GLfloat) * 2 * _numVertices, _texCoords, GL_STATIC_DRAW );

glGenBuffers( 1, &_vboIndices );
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, _vboIndices );
glBufferData( GL_ELEMENT_ARRAY_BUFFER, sizeof(GLint) * _numIndices, _indices, GL_STATIC_DRAW ); 
```

- 渲染代码

```
glm::mat4 modelViewProjMatrix = projMatrix * viewMatrix * modelMatrix;

ShaderResource * shader = ShaderManager::GetInstance()->GetShader( _shaderName.c_str() );
TextureResource * texture = TextureManager::GetInstance()->GetTexture( _textureName.c_str() );

shader->BindShader();

// Bind VAO
glBindVertexArray( _vao );

// Bind all VBO's
glBindBuffer( GL_ARRAY_BUFFER, _vboVertices );
GLint posLocation = shader->GetAttribLocation("in_position");
glVertexAttribPointer( posLocation, 3, GL_FLOAT, GL_FALSE, 0, (void*)0 );
GLint texCoordLocation = shader->GetAttribLocation("in_texCoord");
glVertexAttribPointer( texCoordLocation, 2, GL_FLOAT, GL_FALSE, 0, (void*)0 );
glBindBuffer( GL_ELEMENT_ARRAY_BUFFER, _vboIndices );

// Enable VBO Pointers
glEnableVertexAttribArray( posLocation );
glEnableVertexAttribArray( texCoordLocation );

// Find and assign Uniforms
GLint MVPMatrixLocation = shader->GetUniformLocation("in_MVPMatrix");
GLint colourLocation = shader->GetUniformLocation("in_colour");
GLint textureLocation = shader->GetUniformLocation("texMap");

glUniformMatrix4fv( MVPMatrixLocation, 1, GL_FALSE, glm::value_ptr( modelViewProjMatrix ) );
glUniform4fv( colourLocation, 1, glm::value_ptr( _colour ) );

// Texture Uniform
if( texture != 0 )
{
    glActiveTexture( GL_TEXTURE0 );
    glUniform1i( textureLocation, 0 );
    glBindTexture( GL_TEXTURE_2D, texture->GetTextureId() );
}

glDrawElements( GL_TRIANGLES, _numIndices, GL_UNSIGNED_INT, (void*) 0 );

glDisableVertexAttribArray( posLocation );
glDisableVertexAttribArray( texCoordLocation );

shader->UnbindShader();

glBindVertexArray( 0 ); 
```

-垂直着色器

```
#version 150

in vec3 in_position;
in vec2 in_texCoord;

out vec4 out_colour;
smooth out vec2 out_texCoord;

uniform vec4 in_colour;
uniform mat4 in_MVPMatrix;

void main()
{
out_colour = in_colour;
out_texCoord = in_texCoord;

    gl_Position = in_MVPMatrix * vec4( in_position, 1.0 );
} 
```

-碎片着色器

```
#version 150

in vec4 out_colour;
smooth in vec2 out_texCoord;

out vec4 fragColor;

uniform sampler2D texMap;

void main()
{
    vec4 diffuseTexel = texture2D( texMap, out_texCoord );

    fragColor = out_colour * diffuseTexel;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:05:08.887

```
// Bind all VBO's
glBindBuffer( GL_ARRAY_BUFFER, _vboVertices );
GLint posLocation = shader->GetAttribLocation("in_position");
glVertexAttribPointer( posLocation, 3, GL_FLOAT, GL_FALSE, 0, (void*)0 );
GLint texCoordLocation = shader->GetAttribLocation("in_texCoord");
glVertexAttribPointer( texCoordLocation, 2, GL_FLOAT, GL_FALSE, 0, (void*)0 ); 
```

texcoords 的 VertexAttribPointer 应该在绑定 _vboTexCoord 之后设置，而不是 _vboVertices。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T21:05:27.630

```
glVertexAttribPointer( posLocation, 3, GL_FLOAT, GL_FALSE, 0, (void*)0 );
glVertexAttribPointer( texCoordLocation, 2, GL_FLOAT, GL_FALSE, 0, (void*)0 ); 
```

这意味着位置和纹理坐标都来自缓冲区中的*相同位置*。他们重叠。

您似乎希望它们来自不同的缓冲区对象。这意味着您必须`GL_ARRAY_BUFFER`在第一次和第二次`glVertexAttribPointer`调用之间绑定一个新缓冲区。

# git - 由于“本地修改”，GIT 不会在 PyCharm 中提交

> ID：11658570
> 
> 赞同：1
> 
> 时间：2012-07-25T21:01:46.463
> 
> 标签：git, pycharm

使用 PyCharm 提交到 git。通过对话框提交后，我不断收到此错误：

```
错误：“静态/静态/js/backbone_objects/router.js”有本地修改
（使用 --cached 保留文件，或 -f 强制删除）

```

问题是我正在使用 PyCharm 的界面来执行此操作，据我所知，我无法将这些命令添加到 git`commit`命令中。

处理这种情况的好方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T14:39:06.453

最有可能发生的情况如下：

1.  您已经对文件进行了一些修改并将它们暂存到索引中。
2.  你已经删除了文件。
3.  当你调用 commit 时，PyCharm 会自动对所有修改的文件调用“git add”，对所有删除的文件调用“git rm”。

后一个命令产生了错误。通过这条消息，Git 警告您即将删除一个文件，您不仅更改了该文件，而且还暂存了更改。

要解决问题，只需`git rm -f <file>`从命令行调用。

PyCharm 不能正确处理这种情况的原因是它不了解实现中的 Git 暂存区。请随意投票给[IDEA-63391](http://youtrack.jetbrains.com/issue/IDEA-63391)（一般问题）和[IDEA-85948](http://youtrack.jetbrains.com/issue/IDEA-85948)（可能与您遇到的问题相同）。

* * *

顺便说一句，我的 Git 版本报告了一个更清晰的信息，所以你必须使用一些旧的：

```
error: 'dir with spaces/newfile.txt' has changes staged in the index
(use --cached to keep the file, or -f to force removal) 
```

# biztalk - 如何从 XML 的根节点中删除 xmlns=""？

> ID：11658574
> 
> 赞同：0
> 
> 时间：2012-07-25T21:02:07.050
> 
> 标签：biztalk

我有一个带有 XML 汇编器的管道的发送端口。它创建的所有文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xmlns="http://LMS.OIv2.Sierra.SierraRouteUpdate">
 <Orders OrderCode="" SCAC="" CarrierName=" />
 <Orders OrderCode="" SCAC="" CarrierName="" />
</Root> 
```

如何从根节点中删除该 xmlns 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:02:41.403

此类消息处理的用例是与未实现完全兼容的 XML 解析器的遗留系统集成时。虽然“理论上”，所有系统都应该能够处理有效的 XML，但在现实世界中，我发现许多应用程序仍然像对待字符串或平面文件一样对待 XML。

我更新了我的[博客文章](http://biztalktalk.wordpress.com/2012/06/26/changing-removing-document-namespaces/)以包含一个示例 Visual Studio 项目，其中显示了 BizTalk 管道组件内的代码实现。我希望这有帮助。

# python - 使用 python boto 创建和下载 AWS ec2 密钥对

> ID：11658578
> 
> 赞同：7
> 
> 时间：2012-07-25T21:02:35.377
> 
> 标签：python, amazon-ec2, boto

我很难找到一种方法（如果可能的话）使用 Python Boto 库创建一个新的 AWS 密钥对，然后下载该密钥对。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T21:15:47.280

boto 中 create_keypair 方法返回的 Key 对象有一个“保存”方法。所以，基本上你可以做这样的事情：

```
>>> import boto
>>> ec2 = boto.connect_ec2()
>>> key = ec2.create_key_pair('mynewkey')
>>> key.save('/path/to/keypair/dir') 
```

如果您想要更详细的示例，请查看[https://github.com/garnaat/paws/blob/master/ec2_launch_instance.py](https://github.com/garnaat/paws/blob/master/ec2_launch_instance.py)。

这有帮助吗？如果没有，请提供有关您遇到的问题的一些细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-23T11:06:03.277

Boto **3**相同：

```
ec2 = boto3.resource('ec2')

keypair_name = 'my_key'

new_keypair = ec2.create_key_pair(KeyName=keypair_name)

with open('./my_key.pem', 'w') as file:
    file.write(new_keypair.key_material)

print(new_keypair.key_fingerprint) 
```

# html - 如何在 WooCommerce 页面上维护 Wordpress 中的侧边栏位置

> ID：11658579
> 
> 赞同：0
> 
> 时间：2012-07-25T21:02:36.530
> 
> 标签：html, wordpress, sidebar, woocommerce

如果您在 wordpress 中使用侧边栏，您可以在其中放置导航菜单等内容。

要将侧边栏放置在正确的容器元素中，您只需`<?php get_sidebar(); ?>`在该元素内调用，侧边栏应放置在其中。

例如，以下代码应在您的 wordpress 页脚中产生一个侧边栏：

```
<footer class="footer">
  <div id="inner-footer">
    <div id="main-content-footer" class="span_16">

      <?php get_sidebar(); ?>

    </div>
  </div>
</footer> 
```

此代码适用于未与 WooCommerce 集成的页面，例如首页。

在使用 WooCommerce 的页面上，生成的代码`<?php get_sidebar(); ?>`将出现在 div 元素 #inner-content 的页脚之外，该元素位于名为 #content 的父 div 内。

哪些文件负责在 woocommerce 中正确放置侧边栏代码？WooCommerce 是否有可能生成它自己的`<?php get_sidebar(); ?>`？如果是这样，我该怎么做才能确保我的导航侧栏不受 WooCommerce 影响？

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:53:22.597

似乎这个问题与 WooCommerce 钩子以及它们的内容如何包装与“正常”主题的布局方式有关。

简单的解决方法是使用 woocommerce_content() 为 WooCommerce 页面指定您自己的模板。请参阅此处的文档： [http ://wcdocs.woothemes.com/codex/third-party-custom-theme-compatibility/](http://wcdocs.woothemes.com/codex/third-party-custom-theme-compatibility/)

解决此问题的另一种方法是用您自己的覆盖他们的 sidebar.php 文件。此处的文档：[http ://wcdocs.woothemes.com/codex/template-structure/](http://wcdocs.woothemes.com/codex/template-structure/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T14:52:39.307

在您的主题目录（与functions.php 相同的级别）中复制simgle-product.php 文件。这是单个产品页面的模板。移除所有必要的挂钩，包括侧边栏挂钩。然后，请参阅此论坛： http: [//phponlinesupport.com/woocommerce-sidebar-t157932.html](http://phponlinesupport.com/woocommerce-sidebar-t157932.html)以完成为商店页面制作自己的自定义侧边栏的工作。

注意：创建 sidebar-shop.php 文件时，请务必包含

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T09:30:35.783

这对我有用。此代码片段将 WooCommerce 侧边栏从出现在 #primary 块之后删除，因此您可以在布局中使用 get_sidebar('shop') 。

```
<?php 
// in your themes functions.php

/* remove sidebar */
function woocommerce_remove_sidebar_shop() {
    if( is_woocommerce() )
       remove_action( 'woocommerce_sidebar', 'woocommerce_get_sidebar', 10);
    }

add_action( 'template_redirect', 'woocommerce_remove_sidebar_shop' );

?> 
```

# node.js - 解决 MongoDB 引用

> ID：11658583
> 
> 赞同：2
> 
> 时间：2012-07-25T21:02:47.773
> 
> 标签：node.js, mongodb

我目前正在用 nodejs 和 mongoDB 构建一个聊天应用程序。
基本上我在数据库中有两个要维护的集合。

```
user = {
   _id: ObjectId("1234"),
   account: "stan123" 
}

thread = {
  _user:  ObjectId("1234"),
  messages: [
     {
          body:"hi"
          _user:ObjectId("1234")
     },
     {
          body:"second msg"
          _user:ObjectId("1234")
     }
  ]
} 
```

我计划将带有所有已解析信息（用户）的线程模型传递给客户端，以便我可以用它构建我的小部件。我为此寻找解决方案。有人建议从客户端进行额外调用以获取数据。但是，我担心当消息量增加时，会有相当多的 http 调用可能会影响站点速度。

我知道一些驱动程序可以自动解析 DBRefs 并使代码干净。但是，根据 [http://docs.mongodb.org/manual/applications/database-references/](http://docs.mongodb.org/manual/applications/database-references/)

我决定只使用 id 来维护参考，使其尽可能简单。

我的计划是解决服务器端的所有引用。当前的方法是首先获取消息数组的长度。然后遍历消息数组并进行第二次查询以分别解析用户信息。在每个查询回调中，执行 messageToResolve++ 和 if(messageToResolve >= thread.messages.length)

如果条件满足，则将解析后的模型发送给客户端并结束响应。

这不是我会考虑嵌入的情况，因为当您需要更新用户数据时会很痛苦。（消息是嵌入的，因为它仅在线程存在时才存在）

我不确定这是否是一个好方法。有没有人有更好的解决方案？

抱歉，如果我没有足够清楚地解释我的问题和解决方案。并提前感谢。

# html - HTML/CSS：按钮在没有文本时对齐底部？

> ID：11658590
> 
> 赞同：0
> 
> 时间：2012-07-25T21:03:00.593
> 
> 标签：html, css

我对输入字段旁边的按钮有一个奇怪的问题，它似乎卡在底部，我找不到修改它的原因或方法。

我的意图是只放一张背景图片。为了识别这个问题的按钮，我在一个按钮上添加了字符串 Text 并看到这个问题消失了。

问题是我不想在那里进行任何描述，IE 8 显示它很好（令人惊讶）。我正在研究 Firefox 最新版本。

我很感激任何帮助。

[http://jsfiddle.net/bmGb5/](http://jsfiddle.net/bmGb5/)

截图：[http ://www.imgx.gxzone.com/images/a/9/a971c01a223.jpg](http://www.imgx.gxzone.com/images/a/9/a971c01a223.jpg)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:03:59.687

`vertical-align`尝试在按钮上指定样式。`bottom`可能效果最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:11:02.837

分别使用`margin-top{}`和`margin-bottom{}`。

# ios - 具有不同语言环境捆绑名称的 iOS 应用程序

> ID：11658595
> 
> 赞同：1
> 
> 时间：2012-07-25T21:03:52.433
> 
> 标签：ios, localization, localizable.strings

所以我按照苹果网站上的说明来本地化我的应用程序名称：http: [//developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html)

我已经为 en_GB.lproj 等语言环境创建了一个 InfoPlist.strings 文件，并适当地设置了 CFBundleDisplayName。每次我使用适当的语言环境在模拟器上构建时，我都看不到它们的自定义语言环境名称。这是否仅适用于 fr.lproj 之类的语言而不适用于语言环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-17T03:01:30.383

这就是您使用 Xcode 6 的方式。在您的项目（而不是目标）页面中添加您需要的语言。对于特定国家/地区的语言，如 en-GB，您选择“其他”并`English (United Kingdom)`从长列表中选择语言。

这将在 Supporting Files 目录中创建以下文件：

Info.plist - 一个包含键和默认值的 XML 文件

InfoPlist.strings - 包含您选择的每种语言的本地化文件的目录，例如

```
InfoPlist.strings (Base)
InfoPlist.strings (English)
InfoPlist.strings (English (United Kingdom))
InfoPlist.strings (French) 
```

右键单击`Info.plist`并选择“作为源打开”。添加以下行：

```
<key>CFBundleDisplayName</key>
<string>$(PRODUCT_NAME)</string> 
```

（实际的文件夹名称将是 en.lproj、en-GB.lproj、fr.lproj，但要手动创建它们，您可能需要在 Finder 中完成，然后拖到 Xcode，因为 Xcode 只创建“虚拟”文件夹，而不是真实的）

打开`InfoPlist.strings`默认语言以外的语言（例如法语）并添加以下行：

```
CFBundleDisplayName="Nom de l\'app en Française"; 
```

（注意最后的分号，否则构建将失败）。重建你的项目。

# php - 基于服务器端逻辑的有条件地回显 Javascript 代码是否被认为是有害的？

> ID：11658596
> 
> 赞同：2
> 
> 时间：2012-07-25T21:03:52.350
> 
> 标签：php, javascript, jquery, html

像这样：

```
<script>
    setSomeStuffUp();

    <?php if ($otherStuffNeedsToBeDone === true) { ?>

         doSomeOtherStuff();

    <?php } ?>

    breakSomeStuffDown();
</script> 
```

在工作中遇到过这样的事情——用模板（Smarty）完成，所以它看起来有点干净——但不是很多！还呼应了一些用于诸如 jQuery 选择器之类的模板变量，以及其他看起来不愉快的小东西。

这样做的正确方法是什么？通过AJAX将JS中需要用于逻辑的数据加载为JSON？HTML 数据属性？

关于它的东西只是闻起来很糟糕，很糟糕，很糟糕。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:12:19.420

使用语言 X 生成语言 Y 的代码是不好的做法。

尝试“解耦”这两种语言，例如，像这样：

```
<script type="text/javascript">
  var data = {
    id: "<?php echo $id ?>",
    ...
  };

  $(document).ready(function(){
     $("#" + data.id).on("click", function(){
       /*do something*/
     });
  });
</script> 
```

这样，PHP 只关心填充数据结构，而 JavaScript 只关心使用数据结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T21:12:21.157

从服务器回显配置变量和一些 javascript 初始化代码通常听起来并不算太糟糕，但如果这样*的 js-injection-from-server*片段到处都是，那么你是对的，它很难看，至少因为这样的代码是难以管理。

只需尝试集中任何类型的初始化，然后在静态定义的客户端 JavaScript 逻辑中完成其余的工作。

UPD。@Oscar Jara 正在谈论同样的事情并提供了一个很好的说明。但是，如果服务器端逻辑通过 HTML 为 JavaScript 处理提供数据（毕竟，这就是 HTML 的用途），通常甚至可以避免这种情况。

这是您经常遇到的一个简单示例。假设您要输出一个画廊，该画廊将通过 JavaScript 增强为轮播。

服务器生成的 HTML：

```
<ul id="myGallery">
  <li><img src="img1.jpg /></li>
  <li><img src="img2.jpg /></li>
  <li><img src="img3.jpg /></li>
  ...
</ul> 
```

然后，当 DOM 准备好时，您的静态 JavaScript 代码会初始化轮播：

```
// when DOM ready...
AwesomeCarousel.init($('#myGallery')); 
```

这里服务器准备的数据是这段带有图像列表的 HTML，不需要生成 JavaScript 显式加载每个图像。您可以通过[data-*](http://ejohn.org/blog/html-5-data-attributes/)属性传递任意数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:12:36.220

就个人而言，我在很多情况下都在 JS 中使用 PHP。有时是用 JSON 数据、页面 ID 或类似性质的东西填充变量。就我而言，PHP 旨在编写出现在页面上的代码，而 JS 旨在在内容出现后与用户进行交互。

我确实明白你在说什么，因为可能有更清洁的方法可以做到这一点。您提到了 AJAX，它可能会更简洁，并且肯定会帮助输出文档的流程。唯一的问题是您必须向服务器发出第二个请求，以获得一些非常简单和无意义的变量。几毫秒不是很大，但在生产网站中，您可能不希望发出额外的请求并陷入服务器资源的困境。

为了响应最干净的方法是什么，如果有那么大的交易......我将使用该代码创建一个单独的 JS 文件，然后在需要时使用服务器包含该单个文件。同样，我不这样做，但我认为它在模板中看起来最干净。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T21:31:39.840

如果你想真正走出去，你可以让 HTML 页面请求一个 .js 文件，加上他们的 session-id 或其他一些他们是谁的指标，将 .js 调用作为 PHP 调用来操作，动态构建JS 基于他们的会话要求，然后将其作为 .js 文件类型输出回浏览器。

但这是很多工作。

如果您想要味道更淡的东西，请让 PHP 在文件末尾转储 JSON 字符串：

```
var cfg_string = "{\"username\":\"Norguard\", \"new_messages\":[......]}";  // client

$cfg_obj = array(); // whole lot o'PHP
$json_encoded_cfg = json_encode($cfg_obj);
echo "var cfg_string = {$json_encoded_cfg};" //server-side 
```

然后在客户端解析它以增加安全性......

...或者直接在模板中创建一个地图：

```
$cfg_string = "var dataMap = {";
foreach ($cfg_obj as $key => $val) {
   // print key:val all pretty-like,
   // handle commas (ie: no trailing comma at the end), indent with tabs or spaces
   // if you want, count the number of items so that the object closes ({})
   // without any newline operator, if there are no config settings 
}
echo $cfg_string; 
```

Both of these are clean and unobtrusive and keep everything separate. The config data/text can go right above whatever your init/loading code is going to be, and be passed in as a parameter to that init-logic.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T21:09:57.797

如果您所做的只是将数据从服务器端语言传递到 JavaScript 代码，那很好。很多 CMS 软件包都可以做到这一点。

我真的不认为需要在服务器端有条件地生成 JavaScript 代码。也许它有一个用例，但 JavaScript 本身就是一种语言，那么为什么不把逻辑放在 JavaScript 代码中呢？

# php - Javascript .getHours() 返回奇怪的结果

> ID：11658598
> 
> 赞同：0
> 
> 时间：2012-07-25T21:03:57.777
> 
> 标签：php, javascript, timestamp

我正在将 PHP 时间戳转换为 javascript 中的人类可读形式：

```
<script type="text/javascript">

    var timeleft = new Date( <?php echo $lefttime; ?> * 1000 );

    var hours = timeleft.getHours();
    var minutes = timeleft.getMinutes();
    var seconds = timeleft.getSeconds();

    var countdown = function() {

    console.log( "You have " + hours + ":" + minutes + ":" + seconds + " seconds left" );

</script> 
```

分钟和秒的工作，但几个小时我得到奇怪的结果。例如：

时间戳：1976

函数返回：19:32:56

任何想法为什么我会得到“19” `.getHours()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:07:19.170

我会冒险猜测你是在东部时间。您看到的是`$lefttime`纪元之后的几秒钟，在美国东部标准时间的情况下是晚上 7 点。

![XKCD](../Images/99fedc1b1cb955b53a489b24da6a8a29.png)

要修复它，只需使用基本数学：

```
var timeleft = <?php echo $lefttime; ?>;
var hours = Math.floor(timeleft/3600);
var minutes = Math.floor(timeleft/60)%60;
var seconds = timeleft%60; 
```

# unreal-development-kit - UDK DLLBind如何

> ID：11658599
> 
> 赞同：0
> 
> 时间：2012-07-25T21:03:58.097
> 
> 标签：unreal-development-kit, unrealscript

我正在尝试在 UDK 版本 9953 中使用 UDK 的 DLLBind 功能。
首先，我从[http://udn.epicgames.com/Three/DLLBind.html下载了 DLLBind_Example 项目](http://udn.epicgames.com/Three/DLLBind.html)

我已经构建了 dll 并将其放在*UDK 根目录*\Binaries\Win32\UserCode 我已经将 UnrealScript 类复制到*UDK 根目录*\Developement\Src\MyMod\Classes

接下来，示例附带的自述文件说我需要编辑 UTGame\Config\UTEngine.ini 以从表示 ModEditPackages=MyMod 的行中删除分号。

但是，我的 UDK 中不存在该文件。

谁能告诉我最新的 UDK 版本中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:22:59.480

我找到了答案。

您必须编辑的文件是 UDK root\UDKGame\Config\UDKEngine.ini。文件中已经没有注释掉的`ModEditPackages=MyMod`行，所以你必须将它添加到 [UnrealEd.EditorEngine] 部分。

# html - UL 不显示内联

> ID：11658604
> 
> 赞同：1
> 
> 时间：2012-07-25T21:04:27.377
> 
> 标签：html, css, haml, sass

我正在尝试制作一个无序列表以进行内联显示。我有以下哈姆：

```
%ul.nav-dashboard
  %li.orders_nav{:class => is_active_menu?(user_orders_path(params[:user_id]))}
    = link_to side_nav_title('Order'), user_orders_path(params[:user_id])
  %li.bucks_nav
    = link_to side_nav_title('Points'), user_points_path(params[:user_id])
  %li.billing_records_nav
    = link_to side_nav_title().. 
```

这是萨斯：

```
.nav-dashboard
  +list-reset

  a
    display: inline-block
    padding: 10px 13px 10px 19px
    color: #808080
    line-height: 21px
    font-weight: bold
    border-bottom: 1px solid $border-default
    font-size: $font-base + 1
    &:hover
      color: $text-medium
  .active a
    background-color: #f2f2f2
    +box-shadow(inset 0 0 5px 1px #ebebeb)
    color: $text-medium 
```

出于某种原因，三个列表元素仍然显示一个在另一个之上，而不是彼此相邻。这可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T21:17:03.200

`ul`你是想内联吗？还是列出项目？

如果是后者 - 您需要设置`li`元素的样式，而不是`a`

```
.nav-dashboard li{
    display: inline-block;
} 
```

# jquery - 如何让 bxSlider 在页面加载之前隐藏幻灯片？

> ID：11658605
> 
> 赞同：39
> 
> 时间：2012-07-25T21:04:32.463
> 
> 标签：jquery, css, bxslider

我正在建立一个使用[bxSlider](http://bxslider.com/)的网站。

当页面加载时，所有的幻灯片都是可见的，彼此堆叠在一起。页面完全加载后，第一张幻灯片仍然可见，其余的则消失，以便滑块可以动画并一次显示一张。

我尝试使用各种 CSS 和 bxSlider 回调来隐藏幻灯片，直到页面完全加载，但没有运气。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-10-21T18:18:36.227

bxslider 在加载滑块时有一个回调 (onSliderLoad)。我在容器 div 上将可见性设置为隐藏，然后使用回调将可见性设置为“可见”。

```
<div id="siteslides" style="visibility: hidden;"></div>

$(".site_banner_slider").bxSlider({
    auto: true,
    slideWidth: $imageWidth,
    mode: 'fade',
    onSliderLoad: function(){
        $("#siteslides").css("visibility", "visible");
      }
  }); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-29T15:50:25.913

我遇到了同样的问题并以这种方式解决了它：

```
<div class="mySlider" style="display:none"> 
```

然后

```
$(document).ready(function(){
      $('.mySlider').show().bxSlider({
        slideWidth: 160,
        minSlides: 2,
        maxSlides: 5,
        preloadImages: 'all'
      });
    }); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-10T18:32:26.560

放一个`div`包装所有内容的`style="display:none"`东西，然后放一个。然后在你调用 bxslider 之后，显示它。

前任：

```
<script type="text/javascript">
$(document).ready(function(){

    $('.bxlider').bxSlider({
        displaySlideQty : 5,
        prevText : "",
        nextText : "",
        moveSlideQty : 5,
        infiniteLoop :  false
    });
    $(".bxsliderWrapper").show("fade");
});
</script> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-20T00:15:42.603

所有发布的解决方案都不适合我。

使用可见性：隐藏只会导致页面上有一个巨大的空白区域。

出于某种原因，使用 display:none 没有加载任何幻灯片，只有控件。

这是我可以获得某种合理解决方案的唯一方法：

在 CSS 中：

```
.ctaFtSlider
{
visibility: hidden;
height: 0;
} 
```

在函数中：

```
$(document).ready(function(){
$('.bxslider').bxSlider({
...
onSliderLoad: function(currentIndex){
$(".ctaFtSlider").css("visibility", "visible");
$(".ctaFtSlider").css("height", "auto");
}
});
}); 
```

最后，HTML：

```
<div class="ctaFtSlider">
...
</div> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-10-10T19:01:07.033

我最终做的是添加一些 CSS 来隐藏除第一张幻灯片之外的所有内容。

无需额外的标记或行为，适用于所有主要浏览器！

```
.bxslider {
  li {
    display: none;

    &:first-child {
      display: block;
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-22T13:06:52.160

假设你有：

HTML：

```
<ul class="slider">
<li>...</li>
<li>...</li>
</ul> 
```

和 jQuery：

```
jQuery('.slider').bxSlider({
        ...
}); 
```

然后下面的解决方案将通过隐藏除第一个之外的所有幻灯片来解决问题。

CSS：

```
ul.slider li:nth-child(n+2) {
    display: none;
} 
```

当滑块完全加载时，每个活动幻灯片都会自动获得样式`display: block`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-29T22:36:44.720

我遇到了同样的问题，这个技巧帮助了我：

```
 <ul id="bxSlider" style="padding:0px !important;overflow:hidden;height:385px;"> 
```

将高度和溢出值放在滑块的 ul 元素上。

此致

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-23T17:41:33.897

适用于现代浏览器 (IE10+) 的快速简单的纯 CSS 解决方案是：

```
.bxslider {
    transform: scale(0);
} 
```

这是可行的，因为最初滑块将被缩小到没有，但是当 bxSlider 加载时，它将使用内联样式覆盖转换。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-05T18:17:18.820

我不记得在哪里找到了这个，但我认为这是完成所有幻灯片在页面加载时可见的问题的最干净的方法。

首先在 bxslider 无序列表周围添加一个 div：

```
<div class="bxslider-wrap">
    <ul class="bxslider">
        <li>Image / Content </li>
        <li>Image / Content </li>
        <li>Image / Content </li>
    </ul>
</div> 
```

接下来，将此行添加到您的 css 文件中，该文件会在页面加载时隐藏整个滑块：

```
.bxslider-wrap { visibility: hidden; } 
```

最后，将滑块设置为可见性：当滑块加载时通过 jQuery 可见（在您的 js 文件中）以使滑块再次可见！

```
jQuery(document).ready(function($) {
    $('.bxslider').bxSlider({
        onSliderLoad: function(){ 
            $(".bxslider-wrap").css("visibility", "visible");
        }
    }); 
}); 
```

希望这可以帮助！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-04T05:46:16.987

有同样的问题。我使用了下面的标记，最初`<div class="bxsliderWrapper">`用 CSS隐藏了包含`display: none;`我注意到幻灯片的宽度`<div class="slide">`被渲染为 1px。

我怀疑这与响应式功能有关，它采用了隐藏的初始容器的尺寸，并为每张幻灯片定义了内联样式以匹配。

```
<div class="bxsliderWrapper">
  <div class="bxslider">
    <div class="slide">Your Content</div>
    <div class="slide">Your Content</div>
    <div class="slide">Your Content</div>
  </div>
</div> 
```

我的解决方案类似于上面提到的使用内置回调函数的**[bradrice 。](https://stackoverflow.com/questions/11658605/how-to-get-bxslider-to-hide-the-slides-until-the-page-loads#19501810)**我只是将`reloadSlider()`函数添加到函数中`show()`。

```
<script type="text/javascript">

var $j = jQuery.noConflict();
$j(document).ready(function(){
  var homeSlider = $j('.bxslider').bxSlider();
  $j(".bxsliderWrapper").show(0, "swing", function(){homeSlider.reloadSlider();});
});

</script> 
```

一旦 show() 完成，它就会触发重新加载。

.

***已编辑***

* * *

上面的原始解决方案最初有效，但在硬刷新期间清除缓存时我遇到了问题`shift + REFRESH`。我假设`.show()`函数所针对的元素没有及时可用或者资源还没有加载。（我猜）下面是对这种行为的修复。

* * *

`<div>`我没有隐藏包含with的 Bx Slider，而是使用CSS 属性`display: none;`隐藏了幻灯片图像。`visibility`

```
.bxslider .slide {
  visibility: hidden;
} 
```

这允许滑块以正确的大小呈现，而不会在屏幕上看到图像，直到它们准备好。然后我使用触发的jQuery`.css()`方法`$j(window).load()`来改变页面加载后的可见性。这确保了所有代码和元素在显示之前就已经存在。

```
<script type="text/javascript">

  var $j = jQuery.noConflict();

  $j(document).ready(function(){
    var homeSlider = $j('.bxslider').bxSlider();
  });

  $j(window).load(function(){
    $j(".bxslider .slide").css("visibility", "visible");
  });

</script> 
```

此方法也适用于同一页面上的**多个滑块。**我发现该`.show()`方法导致滑块的所有实例都中断。我只是在猜测为什么这是一个更好的解决方案，但也许有人可以添加一些信息来更好地理解这一点。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-09-05T15:18:35.353

我尝试了大多数解决方案，发现它们对我的目标不够完善。一旦滑块加载它刚刚出现，我仍然会得到一个生涩的演示文稿。使用 .fade() 很接近，但它的动画从左上角到右下角看起来很奇怪。挂钩 onSliderLoad 效果很好，但更改可见性仍然会使滑块仅出现在屏幕上。我一直在寻找一个更优雅的入口，所以在钩子上，我添加了一个类而不是更改 CSS。

jQuery：

```
$('.slider').bxSlider({
    auto: false,
    pager: false,
    mode: 'fade',
    onSliderLoad: function(){
        $(".slide-clip").addClass('-visible');
    }
}); 
```

萨斯：

```
.slide-clip {
    opacity:0;
    max-width: 1305px;  // Used as a clipping mask
    max-height: 360px; // Used as a clipping mask
    overflow:hidden;  // Used as a clipping mask
    margin:0 auto;
    transition(all 275ms);
    &.-visible {
        transition(all 275ms);
        opacity:1;
    } 
```

}

我正在使用包装器来掩盖我的滑块，因为在我的情况下我需要它，所以对于那些感兴趣的人：

```
<div class="slide-clip">
    <ul class="slider">
        <li style="background-image: url('URL_HERE');"></li>
    </ul>
</div> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-03-07T13:38:18.200

我在我的滑块中添加了一个标题和文本 div，所以当他们加载时，它们都堆叠在页面顶部，所以在这篇文章的帮助下，我设法隐藏了幻灯片元素，但显示了一个加载元素：

正如上面其他人所说的那样，可见性：隐藏类被添加到外部 div，但我还在其之外添加了一个可见性：可见类以显示 ajax_loader，然后使用下面的代码，将第一个设置为在幻灯片加载时隐藏被设置为可见。现在，在加载幻灯片时不再有丑陋的空白空间，而是看到了一个加载器，因此对用户来说更有意义：

```
jQuery(document).ready(function($) {
$('.bxslider').bxSlider({
    onSliderLoad: function(){ 
        $(".slideouter").css("visibility", "visible");
        $(".slideloader").css("visibility", "hidden");
    },
   autoControls: true,
  auto: true,
  mode: 'fade'
}); 
```

我希望这会有所帮助，因此 slideouter 是隐藏在您的 css 中的 div，而 slideloader 在您的 css 中是可见的，但是一旦滑块加载，两者都会被交换。希望能帮助到你。

干杯，李

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-27T07:19:10.730

我不知道确切的 style="display:none" 方法，但是当使用 jQuery bxSlider 的容器“hide()/fadeOut()”并在初始化 bxSlider 之后，它将在标记中呈现错误。（可能使用 display:none 会避免错误，但如果你想淡化你的滑块，我的方法将适用）

只需在初始化 bxSlider 之前将您的容器在 css 和 JS 中定位为“绝对”，将其移动到页面的不可见部分，初始化它，然后隐藏它，将其返回到前一点，最后淡入：

```
$("#bxslider-container").css({'left' : "4000px"});
$('.bxslider').bxSlider();
$("#content-wrapper").hide().css({'left' : "0px"}).fadeIn(2000); 
```

希望它会有所帮助

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-19T07:04:53.923

我已经使用了这个 css，它适用于 1200 宽度以上的屏幕，因为我的滑块是最大尺寸的宽度，平板电脑版本还没有固定，你也可以尝试用 % 代替像素。

.banner 是我的 bxslider 滑块的主要 div。

```
.banner{overflow: hidden !important; height: 426px;}
@media screen and (max-width: 1200px){.banner{height: auto;}}
```

```
<div class="banner">
  <div class="bx-wrapper">

  </div>		    		   
</div>
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2012-08-24T14:18:38.087

本身不是一个答案，但有没有人注意到这个错误，列表项的所有不透明度都设置为 1？我相信最初的 setChildrenFade 不会被调用幻灯片放映的初始化。

更新：

我设法通过添加来对其进行排序：

```
/**
    * Start the slideshow
    */
    this.startShow = function (changeText) {
      if (options.mode == 'fade') {
                    setChildrenFade();
                } 
```

到开始显示功能。

似乎在调用 GoToSlide 之前，setChildrenFade 不会被设计调用。这可能是一个错误，因为您只有在列表项的背景设置为透明时才真正注意到问题......否则 z:index 会在初始启动时处理隐藏。

希望这可以帮助。

# python - functools.wraps 是否有未修饰的参考？

> ID：11658611
> 
> 赞同：3
> 
> 时间：2012-07-25T21:04:53.627
> 
> 标签：python

```
#!/usr/bin/python

from functools import wraps
def logged(func):
    @wraps(func)
    def with_logging(*args, **kwargs):
        print func.__name__ + " was called"
        return func(*args, **kwargs)
    return with_logging

@logged
def f(x):
   """does some math"""
   return x + x * x 
```

我想知道`wraps`函数 f 是否有未修饰的引用？我试过的时候没看到`dir(f)`

* * *

修改版

```
#!/usr/bin/python

from functools import wraps
def logged(func):
    @wraps(func)
    def with_logging(*args, **kwargs):
        print func.__name__ + " was called"
        return func(*args, **kwargs)
    with_logging.undecorated = func
    return with_logging

@logged
def f(x):
   """does some math"""
   return x + x * x

f.undecorated 
```

没有属性？我只是在遵循我过去对装饰者所做的事情......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:11:07.583

那里有对原件的引用`f`，但很难找到。

```
>>> f
<function f at 0x023F6DF0>
>>> f.func_closure[0].cell_contents
<function f at 0x023F6E30> 
```

第一个是 Wrapped `f`，第二个是 original `f`，注意十六进制地址不同。

如果您需要访问原始文件`f`，我建议您以不同的方式包装它：

```
def f(x):
   """does some math"""
   return x + x * x
original_f = f
f = logged(f) 
```

现在你有了`f`和`original_f`，都可以使用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T20:24:20.097

您可以通过调用来访问原始函数：

`f.__wrapped__()`

其中 f 是您正在装饰的功能

# c++ - 声明构造函数时编译器错误

> ID：11658617
> 
> 赞同：0
> 
> 时间：2012-07-25T21:05:20.750
> 
> 标签：c++, constructor, visual-c++-2008

我正在研究我的严肃 C++ 程序。我已经有一段时间没有上课了，所以我有点生疏了。在开始游戏循环的基本实现时（在花费了永远让 SFML 工作之后），我不断遇到问题。一段时间后，我在尝试定义构造函数时将问题列表归结为错误。尝试编译时出现以下错误。

> 1>game.obj : error LNK2005: "public: __thiscall game::game(void)" (??0game@@QAE@XZ) 已经在 main.obj 中定义
> 
> 1>game.obj : error LNK2005: "public: void __thiscall game::gameLoop(void)" (?gameLoop@game@@QAEXXZ) 已经在 main.obj 中定义

我的主要代码是

```
#include <SFML/Graphics.hpp>

#include "game.cpp"

int main()
{
    return 0;
} 
```

在game.h中

```
#ifndef _game_h
#define _game_h

class game
{
public:
     game();
    void gameLoop();
};

#endif 
```

在game.cpp中是

```
#include <iostream>
#include "game.h"

game::game()
{
    std::cout << "Constructed thingie";
}

void game::gameLoop()
{
    std::cout << "RAN LOOP!" << std::endl;
} 
```

我不知道为什么我会遇到这个错误。任何帮助都会很好，因为我想开始我的项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:07:32.380

您应该包含`#include "game.h"`在 main 中，而不是`game.cpp`.

# sql - 将同一个表中的列中的不同值连接到一行中

> ID：11658620
> 
> 赞同：1
> 
> 时间：2012-07-25T21:05:37.450
> 
> 标签：sql

我目前有一个格式如下的表格和以下示例数据：

```
transaction  name  receipt
     1       jim   aisjdy
     2       john  uuyjskl
     2       john  ioxiqo
     3       will  eurique
     1       jim   xoqiel
     3       will  sijcjg 
```

每笔交易都与客户的姓名相关联，他们会收到两张单独的收据。

如何创建一个在一行中显示“交易”、“名称”和两个不同收据的查询？

例子：

```
transaction  name  receipt  receipt
     1       jim    aisjdy   xoqiel 
```

我知道这是不好的做法，并且在一个想法世界中，我会创建包含两个不同收据的两列和/或将表格规范化为两个表格，其中一个包含交易和名称，另一个包含收据 1 和 2。不幸的是，我没有制作这张表，也没有时间重组所有内容。

我将不胜感激任何帮助 - 在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:11:36.477

由于只有两个值，您可以使用 group by：

```
select transaction, name, min(receipt), max(receipt)
from t
group by transaction, name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:19:00.247

它不漂亮，但这样的事情会起作用：

```
SELECT
    tr1.transaction,
    tr1.name,
    tr1.receipt AS receipt1,
    tr2.receipt AS receipt2
FROM transaction tr1
    JOIN transaction tr2 ON tr1.transaction = tr2.transaction
        AND tr1.receipt < tr2.receipt 
```

这仅在每个事务恰好有两条记录时才有效，但如果您知道总是有任何特定数字（您只需加入并确保 tr2.receipt < tr3.receipt 等），它也可以工作。但是，只要只有两个，戈登的答案就更容易理解，而且几乎可以肯定更快。

# asp.net-mvc - MultiSelect jqgrid MVC3的OnClickButton函数参数

> ID：11658625
> 
> 赞同：1
> 
> 时间：2012-07-25T21:05:49.457
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在尝试在 jqgrid 中使用多选功能来选择多行并将其传递给控制器​​。我创建了一个按钮，如下所示，但是当我选择行并单击按钮时，未触发单击按钮事件。我猜我向函数传递了错误的参数。下面是javascript代码...

```
$("#request").jqGrid('navButtonAdd', '#requestpager',
    {     caption: "Add", buttonicon: "ui-icon-info", title: "Add", //position: "first",
           onClickButton: function (ids) {
           var grid = $("#request");
             var rowids = grid.jqGrid('getGridParam', 'selarrrow');
             var count = rowids.length;
            var rowData, colData;
              for (var i = 0; i < count; i++) {
               rowData = $("#request").getRowData(rowids[i]);
               colData = rowData.Name;
       }
              jQuery("#request").jqGrid({ url: "/Home/Create/" + colData }); 
```

有人对我做错了什么有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:31:16.810

好吧，在 jqgrid 中实现多选并不难，我会给你一个我在我的项目中实现的工作示例。

HTML

 `````
<table id="grid" cellpadding="0" cellspacing="0"></table>//your grid
<div id="pagerGrid" style="text-align:center;"></div><br />//pager
<div><span><button type="button" id="sendMe"  class="send" >Send Me To Controller</button>//button which will take the data of all multiselect rows to controller 
````  `在你的 JqGrid 中启用 multiselect: true

并编写这个 javascript 函数

 `````
$('#sendMe').click(function(){
       var selRowIds = $('#grid').jqGrid('getGridParam', 'selarrrow');
       if(selRowIds.length>0)
       {
       for( var i=0;i<selRowIds.length;i++){
        var Id=getCellValue(selRowIds[i],'Id');

        var Name=getCellValue(selRowIds[i],'Name');
        var Company=getCellValue(selRowIds[i],'Company');

        $.ajax({
        type: 'POST',
        url: '@Url.Action("AddMe")',
        contentType: 'application/json; charset=utf-8',
        data:JSON.stringify({Id: Id,Name:Name,Company:Company}),
        dataType: "json",

        success:function(){
        $('#grid').trigger("reloadGrid");
         }

         error: function () {

        }

        }); 

        }
         }
       }); 
````  `你的控制器方法会像这样

 `````
[HttpPost]

 public ActionResult AddMe(int? Id, string Name, string Company)
 {
} 
````  `我希望这会有所帮助，它是一个工作示例...

PS-如果对您有帮助，请将其标记为答案。``````

# spring - 带有覆盖的 Spring 混合 XML/注释配置

> ID：11658626
> 
> 赞同：3
> 
> 时间：2012-07-25T21:05:50.357
> 
> 标签：spring

我正在设置一个实用程序，该实用程序允许我们加载基于注释的配置，该配置覆盖 XML 配置（用于测试）。我尝试了许多不同的设置，但这是我唯一可以使用的设置：

```
GenericApplicationContext firstCtx = new GenericApplicationContext();

XmlBeanDefinitionReader xmlReader = new XmlBeanDefinitionReader(firstCtx );
xmlReader.loadBeanDefinitions("applicationContext.xml");

GenericApplicationContext ctx = new GenericApplicationContext();

AnnotatedBeanDefinitionReader annotatedReader = new AnnotatedBeanDefinitionReader(ctx);
annotatedReader.register(SomeConfigClass.class);

ctx.refresh();

for (String currBeanName : firstCtx.getBeanDefinitionNames())
{
    if (!ctx.containsBeanDefinition(currBeanName))
    {
        ctx.registerBeanDefinition(currBeanName, firstCtx.getBeanDefinition(currBeanName));
    }
} 
```

虽然这在技术上确实*有效*，但它似乎是一种非常麻烦的方法。有没有更好的方法来加载基于注释的配置而不是基于 XML 的配置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:40:03.803

我认为更简单的方法是`SomeConfigClass`在应用程序上下文中简单地声明为 bean，并且 SomeConfigClass 中配置的 bean 将被连接。

```
<bean class="..SomeConfigClass"/> 
```

或者 `<context:component-scan base-package="package of SomeConfigClass"/>`

或者反过来，在 SomeClassClass 中，做`@ImportResource("applicationContext.xml")`

# uiview - 将 viewcontroller 变量链接到 barplot 视图

> ID：11658628
> 
> 赞同：0
> 
> 时间：2012-07-25T21:05:59.477
> 
> 标签：uiview, xcode4.2, core-plot, viewcontroller

我是 xcode 的新手，我正在使用 XCode 4.2。我遵循本教程 [https://codejunkster.wordpress.com/2011/11/23/core-plot-2-bar-plot/](https://codejunkster.wordpress.com/2011/11/23/core-plot-2-bar-plot/) 并且当我运行该应用程序时，它仅显示教程中的图形而不是我的初始图形视图...有没有办法将此图形（教程）设置为 UIView 并调整它的大小，使其位于第一个视图的角落？（视图中的一个小视图）......更具体地说，我正在做一个单视图应用程序，在我的第一个视图中，我有标签、文本字段和按钮，当按下按钮时，“小图”将显示两者之间的区别两个变量

还有，我怎样才能将这个视图控制器中的变量链接到图表......就像如果用户输入 5，第一个栏将在 5

有没有在线教程显示如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:27:57.900

Core Plot 托管视图 ( `CPTGraphHostingView`) 是一个子类`UIView`——您可以像任何其他视图一样定位它。不要将任何子视图添加到托管视图。

负责图表的视图控制器可以更改它需要的图表的任何属性。例如，它可以在收到用户采取特定操作的消息时更改一个或两个绘图范围。

# sql - 用于 FLOAT 的 SQL 条件强制转换 VARCHAR

> ID：11658629
> 
> 赞同：0
> 
> 时间：2012-07-25T21:06:01.053
> 
> 标签：sql, casting, floating-point, average, varchar

当我运行以下查询时，我收到错误“无法将 VARCHAR 转换为 FLOAT”。问题是我团队中的其他人不久前设计了数据库并将毫秒作为 varchar 和 sSometime 值不存在，所以他改为使用“NA”。

现在，当我将毫秒值转换为 AVE() 时，无法转换“NA”。有没有办法为“NA”定义默认值，例如：

```
IF a.Milliseconds == "NA" 
     0
ELSE
     CAST(a.Milliseconds AS FLOAT)

SELECT 
  b.Date, 
  AVG(CAST(a.Milliseconds AS FLOAT)) AS Milliseconds,
FROM Fields a
INNER JOIN Cycles b
ON a.CyclesId = b.Id
GROUP BY b.Date

Sample Data

CyclesId | Milliseconds
1        | 24.1557
2        | 23.4886
3        | NA 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T21:08:48.270

`CASE`围绕您的价值使用声明

```
SELECT 
  b.Date, 
  AVG(CAST(CASE WHEN a.Milliseconds = 'NA' THEN '0' ELSE a.Milliseconds END AS FLOAT)) AS Milliseconds,
FROM Fields a
INNER JOIN Cycles b
    ON a.CyclesId = b.Id
GROUP BY b.Date 
```

如果您希望将这些`NA`值一起排除，那么您将执行以下操作：

```
SELECT 
  b.Date, 
  AVG(CAST(a.Milliseconds AS FLOAT)) AS Milliseconds,
FROM Fields a
INNER JOIN Cycles b
    ON a.CyclesId = b.Id
WHERE a.Milliseconds != 'NA'
GROUP BY b.Date 
```

见[SQL Fiddle](http://sqlfiddle.com/#!3/49a28/4) with Demo

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T21:09:46.453

使用案例...例如...

```
SELECT 
  b.Date, 
  AVG(CAST( (case when a.Milliseconds = 'NA' then 0 else a.Milliseconds end) AS FLOAT)) AS Milliseconds,
FROM Fields a
INNER JOIN Cycles b
ON a.CyclesId = b.Id
GROUP BY b.Date 
```

# amazon-s3 - HIVE 脚本 - 将文件名指定为 S3 位置

> ID：11658632
> 
> 赞同：3
> 
> 时间：2012-07-25T21:06:15.260
> 
> 标签：amazon-s3, hive

我正在使用以下脚本将数据从 DynamoDB 导出到 S3：

```
CREATE EXTERNAL TABLE TableDynamoDB(col1 String, col2 String)
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler' TBLPROPERTIES (
"dynamodb.table.name" = "TableDynamoDB",
"dynamodb.column.mapping" = "col1:col1,col2:col2"
);

CREATE EXTERNAL TABLE TableS3(col1 String, col2 String)
ROW FORMAT DELIMITED FIELDS TERMINATED BY ','
LOCATION 's3://myBucket/DataFiles/MyData.txt';

INSERT OVERWRITE TABLE TableS3
SELECT * FROM TableDynamoDB; 
```

在 S3 中，我想将输出写入给定的文件名（MyData.txt），但它目前的工作方式是上面的脚本创建了名为“MyData.txt”的文件夹，然后在此生成了一个随机名称的文件文件夹。

是否可以使用 HIVE 在 S3 中指定文件名？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:21:56.417

一些东西：

*   hadoop 可以通过两种不同的方式将数据写入 s3。这个[wiki](http://wiki.apache.org/hadoop/AmazonS3)更详细地描述了这些差异。由于您使用的是“s3”方案，因此您可能会看到一个块号。
*   通常，M/R 作业（和配置单元查询）将希望将其输出写入多个文件。这是并行处理的产物。实际上，hadoop 中的大多数命令/API 都非常无缝地处理目录，因此您不应该让它过多地打扰您。此外，您可以使用诸如`hadoop fs -getmerge`目录之类的东西来读取单个流中的所有文件。
*   AFAIK，由于上述原因，外部配置单元表的 DDL 中的 LOCATION 参数始终被视为目录。

# javascript - 用另一个 div 切换一个 div

> ID：11658640
> 
> 赞同：0
> 
> 时间：2012-07-25T21:06:59.290
> 
> 标签：javascript, jquery, html, css

我正在尝试让一个 div 切换另一个出现在它下面的 div。

我已经设法用一个按钮来做到这一点，但是我想知道你是否可以用另一个 div 来做到这一点，这样当你点击 div 内的任何地方时，它会使另一个 div 出现和消失等等......

这是我有的两个 div

```
//This div is the one you click on
      <div id="more_toggle"></div><!---end more_toggle--->

//This div is the one that appears and disappears through the toggle        
      <div id="more_info">hello</div><!---end more_info---> 
```

这是我用来通过按钮切换 div 的脚本，但它不适用于另一个 div

```
$(function(){    
    $("#server_status_button").click(function(event){
        event.preventDefault();
        $("#status1").slideToggle();
    });    
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:10:07.787

```
$("#more_toggle").click(function(event) {
    $("#more_info").slideToggle();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/uQP4f/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:08:36.823

你有没有尝试过：

```
$(function() {
    $('#more_toggle').click(function(e) {
          $('#more_info').slideToggle();
    });
}); 
```

如果你想隐藏使用显示切换，只需尝试 .toggle() 而不是 .slideToggle()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:09:49.133

```
$('#more_toggle').click(function(){
    $('#more_info').slideToggle(); 
}); 
```

# rally - 使用 javascript 查询 Rally 中属性的允许值

> ID：11658642
> 
> 赞同：0
> 
> 时间：2012-07-25T21:07:13.987
> 
> 标签：rally

有人可以告诉我如何使用 javascript 查询 Rally 中属性的允许值吗？特别是，我想查询缺陷的所有可能状态

我知道它可以用 REST api 来完成

```
DynamicJsonObject allowedValues = restApi.GetAllowedAttributeValues("defect", "state"); 
```

有javascript等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:10:36.167

您可以使用 App SDK 中的 RallyDataSource（请注意，这是原始版本，而不是当前预览中的基于 ExtJS 的新 SDK）。请参阅此页面上的属性值示例：

[http://developer.rallydev.com/help/data-examples](http://developer.rallydev.com/help/data-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:15:51.907

您可能希望尝试以下方式：

```
 queryConfig = {
        type: 'Defect', 
        key : 'defectStates', 
        attribute: 'State'
    }; 
```

# ruby-on-rails - 如何最好地汇总网站统计信息（尤其是搜索需求）

> ID：11658645
> 
> 赞同：2
> 
> 时间：2012-07-25T21:07:22.380
> 
> 标签：ruby-on-rails, database, analytics

我正在开发一个使用 sunspot solr 进行搜索的 Rails 应用程序。我被要求记录（或以某种方式捕获）网站上发生的每次搜索；查询、进行搜索的用户、他们的搜索产生的结果计数……等等，以便公司可以报告人们正在搜索的内容（需求）以及其他内容。

在我去制作一张表格之前，它将收到越来越多的搜索数据行，我想知道是否有人以更好的方式做到了这一点？我可以以某种方式使用分析（谷歌？）吗？是否有某种服务我也可以发送此信息，以便我们可以轻松提取报告或从中创建报告？

简而言之，有没有比创建自己的表并将其全部存储在我们自己的数据库中更好/更智能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:23:00.830

我从来没有这样做过，但这里有一些想法。

如果您只需要存储该数据，我认为您应该自己做。如果您还需要提供一种分析数据的方法，是的，看看是否已经完成了任何事情（我不确定，但似乎谷歌分析只支持使用他们的搜索栏进行内部搜索）。

如果您的客户已经拥有一些 BI 工具，他们只需要一种访问数据的方法，并且将它放在拥有的数据库中会更容易，您可以轻松地查询而不是使用提供程序 api。

# regex - 正则表达式中的匹配选项 - 但实际上并不返回匹配

> ID：11658646
> 
> 赞同：1
> 
> 时间：2012-07-25T21:07:31.310
> 
> 标签：regex

使用 rubular.com 作为指南，我试图让这个表达式正常工作。

```
^((move|travel|fly) (.+) pixels) 
```

基本上，这匹配

移动 5 个像素

飞 10 像素

行进 3 像素

我得到的比赛是：

1.  移动 5 个像素

2.  移动

3.  5

问题是我不想返回选项的匹配项。有什么方法可以匹配正则表达式，但不返回该选项中的匹配项？理想情况下应该是：

1.  移动 5 个像素

2.  5

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:09:49.730

使用非捕获组：

```
^((?:move|travel|fly) (.+) pixels) 
```

在线查看它：[rubular](http://rubular.com/r/6gfXIxfFdz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:11:33.250

使用`?:`组上的选项来阻止它被存储并用作反向引用。

```
^((?:move|travel|fly) (.+) pixels) 
```

# c# - 连接到不同线程上的数据库

> ID：11658656
> 
> 赞同：5
> 
> 时间：2012-07-25T21:07:57.143
> 
> 标签：c#, wpf, multithreading, sqlconnection

我有一个 WPF 应用程序，用户在某些文本框中输入数据库信息。一旦用户单击“连接”，就会根据用户输入的内容创建连接字符串并建立连接。我注意到如果用户输入任何错误的信息，应用程序将挂起，直到连接超时。通过挂起，我的意思是用户根本无法与应用程序的其余部分进行交互。

**我的目标是在测试连接字符串时保持应用程序响应。**

我认为将此工作流程放在不同的线程上是一个很好的解决方案。我的想法是在线程运行时禁用任何可能需要数据库连接的东西。一旦线程返回（并已确认连接字符串有效），我将重新启用所有内容。否则，请禁用所有内容。

但是，`Thread`当线程完成时，该类没有事件通知（或者至少我不知道）。

我也和`BackgroundWorker`班一起工作过。这效果更好。但是，当`RunWorkerCompletedEventHandler`事件被触发并且连接字符串无效时，我得到以下异常：

> 调用线程无法访问此对象，因为不同的线程拥有它。

这可能是因为触发完成的事件处理程序时连接仍未超时。

有没有人有任何想法，或者我不应该尝试多线程连接到数据库？

我正在做的代码大纲：

```
private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    dbTool = new DBTool();
    // Create the connection string
    e.Result = dbTool.connectToDB(); // connectToDB() returns a bool (true if connection established)
}

private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // connectToDB() returns a bool (true if connection established)
    if(e.Result == true)  // Trying to read e.Result here throws the exception
    {
        // e.Error and e.Cancel should be checked first
        // However, I would like the thread to finish before
        // this event is fired
    }
    if (e.Error != null)
    {
        Console.WriteLine(e.Error.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:10:07.310

不要将`DbConnection`对象保存在单个全局变量中并在线程之间共享。

.NET 环境将自动汇集您的连接并共享它们，因此调用`new DbConnection()`速度非常快。

您应该将连接字符串保存在全局变量中，然后根据需要在每个线程上创建连接。

编辑：原始发帖人实际上可能想要在测试连接字符串时如何保持 WinForms 应用程序响应的想法。在这种情况下，您希望生成一个不同的线程来测试连接。从“连接测试线程”，您可以按照以下模式更新 UI -[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

```
public void TestConnectionThread(String connstr_to_test)
{
    // Notify the user that we're doing our test
    string message = "Testing...";
    lblTestResultMessage.SetPropertyThreadSafe(() => lblTestResultMessage.Text, message);

    try {
        dbTool = new DBTool();
        message = dbTool.connectToDB();

    // If something failed, show a useful debugging message
    } catch (Exception ex) {
        message = ex.ToString();
    }

    // Use a lambda expression to communicate results to the user safely
    lblTestResultMessage.SetPropertyThreadSafe(() => lblTestResultMessage.Text, message);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:15:27.357

从[DBConnection 的文档中](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx)：

> 此类型的任何公共静态（在 Visual Basic 中为 Shared）成员都是线程安全的。**不保证任何实例成员都是线程安全的。**

换句话说，不同的线程不应该共享一个数据库连接，因为不能安全地共享实例。正如 Ted Spence 所建议的那样，您应该只在需要它们时创建连接（以及`.Dispose()`在完成它们时创建它们）。.NET 有一个内置的连接池机制，可以很好地确保在可能的情况下重用连接，但是保持连接的时间超过绝对必要的时间可能会干扰其执行此操作的能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:28:00.643

尝试

```
dbtool tool = e.result as dbtool; 
```

如果您在 dbTool 中有一个变量在查询完成时设置为 true 或 false，那么您应该可以调用

```
tool.variable = true/false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T19:13:54.100

谢谢大家的意见。

我能够想出一个解决方案。在遇到[Working With The WPF Dispatcher](http://www.switchonthecode.com/tutorials/working-with-the-wpf-dispatcher)之后。我确定你可以获得UI线程的`Dispatcher`对象：

```
//...

dbTool = new DBTool();
// Initialize the connection string
// Disable some UI
Thread thread = new Thread(new ThreadStart(
        delegate()
        {
            dbTool.connectToDB();
            UIControl.Dispatcher.BeginInvoke(
              new Action(
                  update
            ));
        }
));
thread.Start();

//.....

void update()
{
    if (dbTool.validString)     // If the connection string was valid
    {
        // Re-enable controls
    }
    else     // Invalid connection string
    {
        // Keep controls disabled if no connection could be created
    }
} 
```

这确实会在不同的线程上测试连接字符串，让应用程序的其余部分响应。

# heroku - Heroku 上的 Berkeley DB

> ID：11658657
> 
> 赞同：0
> 
> 时间：2012-07-25T21:08:20.427
> 
> 标签：heroku, gem, berkeley-db

有没有办法在 Heroku 上使用来自 Ruby 的[Berkeley DB ？](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)我知道[bdb](http://rubygems.org/gems/bdb) gem 和一些类似的。但是 Berkeley DB 必须预先安装为库才能构建。

我才刚刚开始了解 Heroku 部署，如果这个问题很幼稚，请道歉。我在想可能有一种方法可以将 bdb 配置为一个新的 gem，其中包括用于在云中构建的 BDB 源。或者可能只是一个预编译的 BDB 静态库？可能的？

如果方便的话，这个问题与这个问题有关[，](https://stackoverflow.com/questions/11623928/sql-query-for-index-primary-key-ordinal)我在其中描述了 Berkeley DB 能够解决的问题，但 PostgreSQL （显然）不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:19:41.713

事实证明， Heroku 上提供的[Redis](http://redis.io/)的功能与 BerkeleyDB 非常接近，可以满足我的要求。

# sql-server - Service Broker 故障排除：启动程序数据库卡住正在转换/通知

> ID：11658658
> 
> 赞同：2
> 
> 时间：2012-07-25T21:08:22.183
> 
> 标签：sql-server, sql-server-2005, service-broker

我们正在开发一个应用程序，它将使用服务代理将消息从一个数据库传输到另一个数据库。 **SourceDB**被一个现有的应用程序使用，我们从中抽取一些数据。 **TargetDB**仅由该应用程序使用并处理/分发我们需要的数据。我们只使用一种类型的合同，两个数据库都在同一台服务器上。

我们已经在两者以及各自的发起者和目标队列/服务上设置了相同的消息类型和合同。在两个数据库上：

*   `ENABLE_BROKER`已设置
*   `TRUSTWORTHY`已设置
*   拥有独一无二的`service_broker_guid`
*   `sa`作为数据库所有者，所有 SSB 授权语句都是or `dbo`，`OWNER`视情况而定。

但是，当我们从 SourceDB 发送消息时：

```
BEGIN DIALOG CONVERSATION @dialogHandle
    FROM SERVICE [//Service/Initiator]
    TO SERVICE N'//Service/Target'
    ON CONTRACT [//Contract/Notification]
    WITH ENCRYPTION = OFF;
SEND ON CONVERSATION @dialogHandle
    MESSAGE TYPE [//Message/Notification] (@RequestMsg); 
```

...消息在那里找不到。进一步调查显示以下内容：

*   发起者队列为空
*   目标队列为空（注意：不是需要的问题`RECEIVE`）
*   传输队列为空
*   无论是在 SQL Server 日志中，还是在创建消息的存储过程中的 CATCH 错误处理中，都没有记录错误
*   如果启用激活，SourceDB 中的启动器队列条目`sys.dm_broker_queue_monitors`将设置为 NOTIFIED
*   SourceDB 的状态`sys.conversation_endpoints`有一个新条目`CONVERSING`
*   `sys.dm_broker_queue_monitors`如果启用激活，TargetDB 中的目标队列条目将保持为 INACTIVE
*   TargetDB`sys.conversation_endpoints`有一个新条目处于`CONVERSING`状态，与 SourceDB 的条目具有相同的 conversation_id 和不同的 conversation_handle

虽然测试数据库是 SQL 2005（应用程序必须支持 2005），但我从我的开发机器的 2008 安装中运行了 ssbdiagnose 实用程序来诊断问题：

`ssbdiagnose -S testserver -d SourceDB CONFIGURATION FROM SERVICE //Service/Initiator TO SERVICE //Service/Target ON CONTRACT //Contract/Notification`

这产生了以下内容：

```
D  29912 dbtestsvr  SourceDB  Service //Service/Target was not found
D  29975 dbtestsvr  SourceDB  User dbo does not have SEND permission on service //Service/Target 
```

这是令人困惑的，因为`dbo`不应拒绝任何许可，并且`//Service/Target`确实存在，尽管在不同的数据库中。但是我的同事运行了 Profiler 跟踪，显示正在执行的命令正在`//Service/Target`SourceDB 上查找。服务经纪人似乎不知何故感到困惑。添加显式路由，除了理论上是不必要的外，并不会改变这种情况。

我在我们的测试服务器上运行了一组几乎相同的[教程命令](http://www.databasejournal.com/features/mssql/article.php/3918916/Writing-SQL-Server-Service-Broker--Applications--Across-Databases.htm)，一切正常，所以它可能是特定于 db 的。

我们的设置在两天前工作，所以我们可能正在寻找一些可能已经更改但没有运气的设置。

# mysql - SQL - 从 MySQL 数据中查找所有停机时间和停机时间长度（带有时间戳和状态消息的行集）

> ID：11658666
> 
> 赞同：2
> 
> 时间：2012-07-25T21:08:47.503
> 
> 标签：mysql, sql

我已经开始使用循环 PHP 脚本监视我的 ISP 的停机时间，该脚本每 5 秒自动检查一次连接并将结果存储在 MySQL 数据库中。这些脚本检查它是否能够访问几个远程网站并记录结果。检查的时间和状态始终存储在数据库中。

表结构如下：

```
id (auto increment)
time (time stamp)
status (varchar) 
```

现在到我的问题。

我有数据，但我不知道如何使用它来实现我想要的结果。基本上我想找到连接断开的所有时间段以及连接断开的时间。

例如，如果我们有 10 行包含以下数据

```
0 | 2012-07-24 22:23:00 | up
1 | 2012-07-24 22:23:05 | up
2 | 2012-07-24 22:23:10 | down
3 | 2012-07-24 22:23:16 | down
4 | 2012-07-24 22:23:21 | up
5 | 2012-07-24 22:23:26 | down
6 | 2012-07-24 22:23:32 | down
7 | 2012-07-24 22:23:37 | up
8 | 2012-07-24 22:23:42 | up
9 | 2012-07-24 22:23:47 | up 
```

查询应返回时间段（从 22:23:10 到 22:23:21，以及从 22:23:26 到 22:23:37）。所以查询应该总是找到第一次连接断开和第一次重新连接之间的时间。

我认为可行的一种方法是查找连接断开或断开的所有行，但我怎样才能找到这些行？还有比这更好的解决方案吗？

我真的不知道查询应该是什么样子，因此非常感谢您的帮助。

*谢谢，问候拉西*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:28:31.743

我不确定这是否有效（如果不只是评论）

它确实：仅当 id`1`小于当前 id 的行具有不同的状态（因此选择任何 perion 的第一个条目）时才选择行，并通过 >= 和相同的状态确定结束时间。

```
SELECT ou.id AS outerId, 
       ou.timeColumn AS currentRowTime,
       ou.status AS currentRowStatus,
      (  SELECT max(time)
         FROM statusTable
         WHERE time >= ou.timeColumn AND status = ou.status) AS endTime
FROM statusTable ou
WHERE ou.status != 
       (SELECT status
        FROM statusTable
        WHERE id = (ou.id -1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:37:19.913

我现在真的没有时间调整它以适应您的设置，但是我在网页上做几乎相同的事情来监控计算机何时关闭，何时重新打开，然后计算它的总时间......

我也不知道您是否可以访问 PHP，如果不能完全忽略这一点。如果你这样做，你也许可以适应这样的事情：

```
$lasttype="OFF";
$ontime=0;
$totalontime=0;

$query2 = " SELECT
  log_unixtime,
  status
FROM somefaketablename
ORDER BY
  log_unixtime asc
;";

$result2=mysql_query($query2);
while($row2=mysql_fetch_array($result2)){
  if($lasttype=="OFF" && $row2['status']=="ON"){
    $ontime = $row2['log_unixtime'];
  }elseif($lasttype=="ON" && $row2['status']=="OFF"){
    $thisblockontime=$row2['log_unixtime']-$ontime;
    $totalontime+=($thisblockontime);
  }
  $lasttype=$row2['status'];
} 
```

基本上，您从表示计算机已关闭的假行开始，然后遍历每个真实行。

如果计算机已关闭但现在已打开，请设置一个变量以查看它何时打开，然后继续循环...

继续循环直到计算机打开，但现在关闭。发生这种情况时，从当前行的时间中减去之前存储的打开时间。这显示了那组“ON”的持续时间。

就像我说的那样，你必须非常适应它才能让它做你想做的事情，但是如果你用“连接上/下”替换“计算机开/关”，它本质上是相同的想法......

使这项工作有效的一件事是我将日期存储为整数，作为 unix 时间戳。因此，您可能必须转换日期，以便减法起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:00:38.660

这是一种方法。

首先按时间戳顺序获取状态行（内联视图别名为`s`）。然后在处理每一行时使用 MySQL 用户变量来保留前一行的值。

我们真正要寻找的是紧跟一系列“下降”状态的“上升”状态。当我们找到状态为“up”的那一行时，我们真正需要的是前一系列“down”状态中最早的时间戳。

所以，这样的事情会起作用：

```
SELECT d.start_down
     , d.ended_down
  FROM (SELECT @i := @i + 1 AS i
             , @start := IF(s.status = 'down' AND (@status = 'up' OR @i = 1), s.time, @start) AS start_down
             , @ended := IF(s.status = 'up' AND @status = 'down', s.time, NULL) AS ended_down
             , @status := s.status
         FROM (SELECT t.time
                    , t.status
                 FROM mydata t
                WHERE t.status IN ('up','down')
                ORDER BY t.time ASC, t.status ASC
              ) s
         JOIN (SELECT @i := 0, @status := 'up', @ended := NULL, @start := NULL) i
      ) d
WHERE d.start_down IS NOT NULL
  AND d.ended_down IS NOT NULL 
```

这适用于您显示的特定数据集。

这不处理的（不返回的）是一个尚未结束的“下降”时期，即一系列“下降”状态，没有后续的“上升”状态。

为避免文件排序操作按顺序返回行，您需要在`(time,status)`. 此查询将生成一个临时 (MyISAM) 表来具体化别名为`d`.

**注意：**要了解此查询在做什么，请剥离最外层的查询，然后只运行别名为的内联视图的查询`d`（您可以添加`s.time`到选择列表中。）

此查询正在获取具有“向上”或“向下”状态的每一行。“技巧”是它仅在结束“下降”期间的行上分配“开始”和“结束”时间（标记下降时期）。（也就是说，第一行状态为“向上”，然后是状态为“向下”的行。）这是真正完成工作的地方，最外面的查询只是过滤掉这个结果集中的所有“额外”行（我们不需要。）

```
SELECT @i := @i + 1 AS i
     , @start := IF(s.status = 'down' AND (@status = 'up' OR @i = 1), s.time, @start) AS start_down
     , @ended := IF(s.status = 'up' AND @status = 'down', s.time, NULL) AS ended_down
     , @status := s.status
     , s.time
  FROM (SELECT t.time
             , t.status
          FROM mydata t
         WHERE t.status IN ('up','down')
         ORDER BY t.time ASC, t.status ASC
       ) s
  JOIN (SELECT @i := 0, @status := 'up', @ended := NULL, @start := NULL) i 
```

内联视图 aliased as 的目的`s`是获取按时间戳值排序的行，以便我们按顺序处理它们。内联视图别名 as`i`就在那里，因此我们可以在查询开始时初始化一些用户变量。

如果我们在 Oracle 或 SQL Server 上运行，我们可以使用“分析函数”或“排名函数”（分别命名为）。MySQL 不提供类似的东西，所以我们必须“自己动手” ”。

# javascript - 在 CompositeView 中对集合进行排序的最佳方法

> ID：11658668
> 
> 赞同：14
> 
> 时间：2012-07-25T21:08:49.413
> 
> 标签：javascript, backbone.js, marionette

我正在尝试对一个集合进行排序`Marionette.CompositeView`。
我有一个看起来像这样的集合：

```
[
   {id: 1, name: 'bar'},
   {id: 2, name: 'boo' },
   {id: 3, name: 'foo' }
] 
```

我需要以相反的顺序按 id 对集合进行排序。
实际上它仅在我重新加载页面时才有效。
当我添加一个新模型时，新项目显然是随机添加到列表中的。
如果我刷新页面，它们将得到很好的排序。

我的问题是：
1）添加新模型时如何解决问题？
2）有可能改进代码吗？

* * *

这是我的代码：

```
return Marionette.CompositeView.extend({

    initialize: function () {
        this.collection.fetch();
    },

    onRender: function () {
        var collection =  this.collection;

        collection.comparator = function (collection) {
            return - collection.get('id');
        }
    },

    onSuccess: function () {
        this.collection.add(this.messageModel);
        this.collection.sort(); // the messageModel seems to be added 
                                // apparently randomly to the list. 
                                // only if I refresh the page it will be ok
    }
}) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T06:37:12.893

对于 Marionette **>= 2.0**，`CollectionView`并且`CompositeView` [默认保持排序](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#marionettecollectionview)。

对于 Marionette **< 2.0 和 >= 1.3.0**：

```
var MySortedView = Backbone.Marionette.CollectionView.extend({

  // ...

  appendHtml: function(collectionView, itemView, index) {
    // Already sorted when buffering.
    if (collectionView.isBuffering) {
      Backbone.Marionette.CollectionView.prototype.appendHtml.apply(this, arguments);
    }
    else {
      var childrenContainer = $(collectionView.childrenContainer || collectionView.el);
      var children = childrenContainer.children();
      if (children.size() === index) {
        childrenContainer.append(itemView.el);
      } else {
        childrenContainer.children().eq(index).before(itemView.el);
      } 
    }
  }

}); 
```

对于 Marionette **< 2.0 或 < 1.3.0**（与之前相同，没有缓冲）：

```
var MySortedView = Backbone.Marionette.CollectionView.extend({

  // ...

  appendHtml: function(collectionView, itemView, index) {
    var childrenContainer = $(collectionView.childrenContainer || collectionView.el);
    var children = childrenContainer.children();
    if (children.size() === index) {
      childrenContainer.append(itemView.el);
    } else {
      childrenContainer.children().eq(index).before(itemView.el);
    } 
  }

}); 
```

CollectionView 和 CompositeView 也是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T18:17:32.590

我相信 Marionette 的人正在考虑将其构建到 Marionette 中，但在那之前，我已经构建了一个名为[**Sorted**](https://github.com/gitterHQ/sorted)的小混入，您可以将其混入您的`CollectionView`和`CompositeView`类中。[长期以来，它在Gitter](https://gitter.im)的生产环境中被大量使用，我们发现它运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T00:23:10.327

您可以在创建集合时声明 .comarator 吗？从您的代码中， .comarator 仅存在于`var collection`onRender 函数内的局部变量中。如果定义正确，集合必须自动排序，添加新模型后无需调用 .sort

```
var Chapters = new Backbone.Collection({
    comparator = function(chapter) {
        return chapter.get("id");
    };
}); 
```

# objective-c - 如何在 iOS 上启用新的 Objective-C 对象文字？

> ID：11658669
> 
> 赞同：23
> 
> 时间：2012-07-25T21:09:03.297
> 
> 标签：objective-c, ios, xcode

当我使用 Xcode 4.4 创建一个新项目并添加这些行时：

```
NSDictionary *test = @{ @"key" : @"test value" };
NSString *value = test[@"key"];
NSLog(@"value is: %@", value); 
```

它编译时没有警告并按预期执行。

将相同的行添加到现有项目会产生编译器错误：

```
NSString *value = test[@"key"]; <-- Expected method to read dictionary element not found on object of type 'NSDictionary *' 
```

我比较了这两个项目的目标构建设置，但没有任何结果。

**更新：** 成功编译的新项目是针对 OSX 的。我用上述几行尝试了另一个用于 iOS 的新版本，但它无法编译，与我先前存在的 (iOS) 项目相同。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-25T22:52:00.360

这与旧项目与新项目无关，而是您使用的 SDK 的一个因素。您遇到的问题是，虽然这是一个编译器功能，但它需要 SDK 支持。iOS 5 SDK 不提供这种支持，但 iOS 6 SDK 提供。

因此，现在您应该只使用 iOS 6 SDK。如果您想在 iOS 5 SDK 中使用对象下标，请继续阅读。

您需要做的就是添加一个头文件，以便编译器尝试调用。无需添加实现；它由 自动处理`arclite`。（如果您不使用 ARC，则必须强制链接器包含`arclite`. 但您仍然不必实际切换到它。）

创建一个新的接口文件**NSObject+subscripts.h**。

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED < 60000
@interface NSDictionary(subscripts)
- (id)objectForKeyedSubscript:(id)key;
@end

@interface NSMutableDictionary(subscripts)
- (void)setObject:(id)obj forKeyedSubscript:(id <NSCopying>)key;
@end

@interface NSArray(subscripts)
- (id)objectAtIndexedSubscript:(NSUInteger)idx;
@end

@interface NSMutableArray(subscripts)
- (void)setObject:(id)obj atIndexedSubscript:(NSUInteger)idx;
@end
#endif 
```

我已经把这个块放在了[github 上](https://github.com/tewha/iOS-Subscripting)。

`NSObject`注意：在解释如何将它们仅添加到相关对象之前，我曾经建议添加所需的方法。回想起来，我认为这是我的错误。它导致在运行时而不是编译时捕获错误，这与这里现在介绍的方法不同。这种方法仍然在我的[博客上](http://tewha.net/2012/08/modern-objective-c-with-ios-5/)，但我现在认为它更像是一种很酷的 hack，而不是一种有用的方法。

来源：

*   [Peter Steinberger，在 Xcode 4.4 和 iOS 4.3+ 中使用下标](http://petersteinberger.com/blog/2012/using-subscripting-with-Xcode-4_4-and-iOS-4_3/)

# c# - 发送电子邮件时出现“无法连接到远程服务器”异常

> ID：11658674
> 
> 赞同：0
> 
> 时间：2012-07-25T21:09:23.483
> 
> 标签：c#, asp.net

当我删除评论“//stmp.timeout”时，它会给出超时错误。我应该怎么做才能解决这个问题？

这是我的代码：

```
public ActionResult Index(EmailModel model)
{
    var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 180;
        smtp.EnableSsl = true;
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new NetworkCredential("sheikh.abm@gmail.com ","somepassword");
        //smtp.Timeout = 20000;
    }
    try
    {
        smtp.Send("sheikh.abm@gmail.com",model.To, model.Subject, model.Message);
        return View("Index");
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);   //Should print stacktrace + details of inner exception
         if (ex.InnerException != null)
         {
             Console.WriteLine("InnerException is: {0}", ex.InnerException);
         }
    }
    return View("Index"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:18:38.463

在这一行

```
smtp.Credentials = new NetworkCredential("sheikh.abm@gmail.com ","somepassword 
```

后面有一个空格`gmail.com`。这可能会阻止登录到 gmail。去掉它。
另外，我认为用于向 gmail 发送邮件的端口对于 SSL 是 465，对于 TLS/STARTTLS 是 587。

```
smtp.Port = 465; 
```

# python - 从如此生成的击键中阻止pyhook？

> ID：11658676
> 
> 赞同：4
> 
> 时间：2012-07-25T21:09:35.560
> 
> 标签：python, windows, keyboard, keyboard-shortcuts, pyhook

我正在使用`pyhook`and`pyhk`映射 Windows XP 机器上的击键，它工作正常，除非击键（例如，ctrl+z）已经存在于应用程序中。在这种情况下，ctrl+z 传递给应用程序**并**触发已映射到它的操作。

如果您熟悉`autohotkey`，请注意`autohotkey`通过定义可以选择传递给底层应用程序的热键来解决这个问题。这里有一些代码可以理解这个想法。请注意，我正在尝试跟踪 ctrl 键何时关闭。

```
 import pythoncom, pyHook
  control_down = False

  def OnKeyboardEvent_up(event):
      global control_down
      if event.Key=='Lcontrol' or event.Key=='Rcontrol':
         control_down=False
      return True

  def OnKeyboardEvent(event,action=None,key='Z',context=None):
      global control_down
      if event.Key=='Lcontrol' or event.Key=='Rcontrol':
         control_down=True
      if control_down and event.Key==key:
         print 'do something'
         return False
      if event.Key=='Pause':
         win32gui.PostQuitMessage(1)
         return False
      # return True to pass the event to other handlers
      return True

  if __name__ == '__main__':
     hm = pyHook.HookManager()
     hm.KeyDown = OnKeyboardEvent
     hm.KeyUp = OnKeyboardEvent_up
     hm.HookKeyboard() # set the hook
     pythoncom.PumpMessages() # wait forever 
```

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:57:54.623

如果您只对 Windows 感兴趣，您可以使用 win API，例如通过 ctypes：

```
>>> from ctypes import windll
>>> windll.user32.RegisterHotKey(0, -1, 0x0002, 0x5a) 
```

运行这些代码行后，**Ctrl** *(code = 0x0002)* **+ Z** *(code = 0x5a)*组合在 Python REPL 中不再起作用。

所以你最好看看那些热键注册的窗口是什么。您可以在 MSDN 中找到更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646309 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:40:25.003

我在这里可能完全错了，但是根据我对 pyHook 文档的理解，为了防止按键被发送到另一个应用程序，您需要更改`return True`in`def OnKeyboardEvent_up(event):`和`OnKeyboardEvent(event,action=None,key='Z',context=None):`to `return False`（或`True`.

# git - Git ghost commit 躲避日志

> ID：11658679
> 
> 赞同：1
> 
> 时间：2012-07-25T21:09:43.093
> 
> 标签：git

今天我在做我的一个项目，我意识到 git 有点奇怪。Git 将允许您将工作提交到幽灵分支。我使用术语***ghost branch***是因为更改存在于树中的某处但会回避`git log --graph --decorate --oneline --all`。谁能向我解释这是为什么？

### 重现此行为的步骤

进入*分离的头部*状态（你可以通过执行到达那里`git checkout <hash>`）。

```
# Not currently on any branch.
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   uml 1.pdf 
```

对您的代码库进行一些更改。并使用 . 检查工作目录的状态`git status`。这应该列出更改，但声明您不在任何分支上。

```
# Not currently on any branch.
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .gitignore
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   uml 1.pdf 
```

使用提交更改`git commit -am '<message>'`

```
[detached HEAD ded7725] updated .gitignore
 1 files changed, 8 insertions(+), 1 deletions(-) 
```

如果您随后签出一个已知的分支，例如“master”，那么在 detached head 状态下提交的所有更改都将消失。这是意料之中的。

Runnig`git log --graph --decorate --oneline --all`将显示所有提交，*除了*在*分离头上*提交的提交（`ded7725`在我的情况下）。

但是， a`git checkout <hash-for-ghost-branch>`返回提交到 ghost 分支的更改。问题是：人们无法永远记住这个哈希值。

预期的行为将是这个幽灵分支将在一个有点悬垂的叶子上记录图表。但它不存在。任何关于为什么会发生这种情况的解释都值得赞赏。或者也许我错过了一个显示隐藏分支的标志......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:16:28.317

正如你所说的，“幽灵”分支不是一个分支。它是 DAG 上的提交，没有任何东西指向。

虽然我没有看过代码，但我想 git log 会通过从分支指针开始并向后工作来绘制图表并列出提交。由于您在分离 HEAD 状态下的提交没有任何指向它们，因此 git log 无法“看到”它们。

要解决这个问题，只需使用`git branch branch_name <commit>`. 然后 git log 将具有指向在分离的 HEAD 状态下完成的最后一次提交的内容，并在显示日志/绘制图形时“找到”这些提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:36:21.943

这个“幽灵”分支没有出现在你的 git log --all 中的根本原因是这个日志只会代表所有的分支，而不是所有现有的提交。您必须考虑，当您重新提交提交时，您不会删除旧提交，您只需将它们复制到另一个父级，因此它们也是没有任何分支的提交，就像您的幽灵分支一样。

提交就像其他对象引用的对象，git 保存的唯一对象是分支引用的对象。它真的就像一个垃圾收集的内存，你的提交是你在内存中创建的一个对象，没有引用它。如果你运行`git gc`git 将删除所有这些没有被任何分支引用的提交，包括你的“幽灵分支”。

您的解决方案是保留对此提交的引用，方法是按照 wasworld 的说明创建一个分支，或者标记您的提交`git tag tagname sha1`。

编辑：`git gc`根据其手册页，不会删除最近的提交：

```
The optional configuration variable gc.reflogExpire can be set to indicate how long 
historical entries within each branch's reflog should remain available in this 
repository. The setting is expressed as a length of time, for example 90 days or 3
months. It defaults to 90 days. 
```

因此，默认情况下，您的 ghost 分支将在`git gc`90 天内安全（无需您请求即可启动）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:31:44.300

在 git 中，分支只是指向提交的指针。所以当你说“问题是：一个人不能永远记住这个哈希”时，为什么不直接在它上面创建一个分支呢？

```
git branch branch_name <commit> 
```

还要记住的是，如果您不创建任何指向此提交的分支，那么一旦到期时间过去，它将被 gc'ed。默认值为 90 天。

# jquery - Angular js 路由器和指令

> ID：11658685
> 
> 赞同：1
> 
> 时间：2012-07-25T21:10:00.787
> 
> 标签：jquery, jquery-ui, angularjs

我的 html 文件中有代码

```
<!doctype html>
<html ng-app="slider">
<head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
  <script type="text/javascript" ng:autobind src="http://code.angularjs.org/0.10.5/angular-0.10.5.min.js"></script>
  <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/themes/redmond/jquery-ui.css" rel="stylesheet" />
  <script src="app.js"></script>
</head>

<body>
  <div jq:slider></div>
  <input id="amount" />
    {{years}}
</body>​
</html> 
```

我的 app.js 就是这个

```
angular.module('slider',[])
.directive('jq:slider', function() {
return function(elm) {
  var currentScope = this;
  elm.slider({
        range: true,
        min: 0,
        max: 500,
        values: [ 75, 300 ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
            currentScope.years = ui.values[0];            
            currentScope.$apply();
        }
    });
};
}); 
```

由于某种原因，当我运行此代码时，出现以下错误：

> 未捕获的类型错误：对象 # 没有方法“模块”

我在没有模块和外部文件的情况下尝试了相同的代码，它工作得很好......任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:17:31.587

呃……我认为那`elm.slider`是未定义的……

# python - LD_LIBRARY_PATH 优先级和编译问题

> ID：11658687
> 
> 赞同：3
> 
> 时间：2012-07-25T21:10:05.830
> 
> 标签：python, linux, r, rpy2, installation

我正在尝试在 Linux 机器上安装一些软件（python 的 rpy2 包，特别是 rpy2.robjects，如果重要的话）。我需要该软件在我的本地空间中查找它的共享库，而不是在像 /usr/lib64 这样的全局空间中。我在这台机器上没有管理员权限。我的问题是，即使我将 LD_LIBRARY_PATH 设置为指向我的本地空间，该软件仍然会转到 /usr/lib64/whatever，它会在其中找到过期的库。这些库缺少一些它需要的对象，所以它失败了。什么可能优先于 LD_LIBRARY_PATH，有没有办法改变/摆脱它？谢谢。

顺便说一句，这个网站上的某个人在一年或更长时间前也有过类似的问题，但他的回答涉及环境变量 RPATH，并使用 chrpath 实用程序对其进行了更改。我完全不清楚 rpy2 正在使用 RPATH，而 chrpath 在我的系统上似乎不可用。

附录：我尝试使用 LD_DEBUG=libs 运行。得到了很多看起来系统正在寻找我的 LD_LIBRARY_PATH 中的库并找到它们的输出。这里是麻烦似乎开始的地方：

```
/usr/local/lib64/R/library/methods/libs/methods.so: error: symbol lookup error:
undefined symbol: Rf_allocS4Object (fatal)
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
unable to load shared object '/usr/local/lib64/R/library/methods/libs/methods.so':
/usr/local/lib64/R/library/methods/libs/methods.so: undefined symbol: Rf_allocS4Object 
```

所以我的猜测是问题在于 DLLpath 中的任何内容都覆盖了 LD_LIBRARY_PATH。我试图通过将我的目录添加到 os.environ['PATH'] 来改变这一点，但没有这样做。显然没有“DLLPATH”，就像我想的那样。

好吧，我猜这就是进步。有人还有什么吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:51:54.340

查看一个名为 $R_HOME/etc/ldpaths 的文件（在您的情况下，$R_HOME 似乎是 /usr/local/lib64/R）。`LD_LIBRARY_PATH`在 R 启动时设置的是这个文件中的命令。

我的看起来像这样：

```
flodel@netbook-samsung-N150:~$ cat /usr/lib/R/etc/ldpaths 
: ${JAVA_HOME=/usr/lib/jvm/java-6-openjdk/jre}
: ${R_JAVA_LD_LIBRARY_PATH=${JAVA_HOME}/lib/i386/client:${JAVA_HOME}/lib/i386:/usr/lib/jni}
if test -n ""; then
: ${R_LD_LIBRARY_PATH=${R_HOME}/lib:}
else
: ${R_LD_LIBRARY_PATH=${R_HOME}/lib}
fi
if test -n "${R_JAVA_LD_LIBRARY_PATH}"; then
  R_LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}:${R_JAVA_LD_LIBRARY_PATH}"
fi
if test -z "${LD_LIBRARY_PATH}"; then
  LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}"
else
  LD_LIBRARY_PATH="${R_LD_LIBRARY_PATH}:${LD_LIBRARY_PATH}"
fi
export LD_LIBRARY_PATH 
```

如果您没有对该文件的写入权限，您仍然可以在启动 R 之前执行此操作：

```
export R_LD_LIBRARY_PATH=/your/custom/path 
```

我在我的机器上测试它是否可以在 R 启动后运行以下命令：

```
Sys.getenv("LD_LIBRARY_PATH")
#[1] "/your/custom/path:/usr/lib/jvm/java-6-openjdk/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk/jre/lib/i386:/usr/lib/jni" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:46:29.917

If anyone is still reading this, I engaged in some "personnel engineering" to solve the problem, i.e. got the system admins to re-install R so that it had everything I needed. Was certainly nice of them. Thanks very much to everyone who gave suggestions. Would like to keep going on some of them, but I've got to get busy on this project. Much obliged!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:26:08.080

`RPATH`仅在编译时有用（嗯，链接）；它会影响烘焙到二进制文件中的库搜索路径。

尝试使用 运行`LD_DEBUG=libs`，这将显示正在从哪些路径加载库。它是试图从您的加载`LD_LIBRARY_PATH`但失败，还是首先不在那里搜索（也许`rpy2`有自己的库路径机制？），还是其他什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:36:28.217

尝试将您的目录添加到 LD_LIBRARY_PATH 的左侧，因为优先级从左到右。

```
export LD_LIBRARY_PATH=~/your/custom/path:$LD_LIBRARY_PATH 
```

# objective-c - 每行 UITableView 的按钮

> ID：11658694
> 
> 赞同：0
> 
> 时间：2012-07-25T21:10:21.230
> 
> 标签：objective-c, ios, uitableview

我在 UITableView 中有一个自定义单元格，由自定义类（.h 和 .m 文件）定义。我能够显示单元格，并更改列表中每个单元格的文本，但我的自定义单元格中也有按钮（实际上是两个）。当我单击按钮时，我需要知道单击了哪一行的按钮。有没有办法在自定义 ui 单元类中得到这个？

我希望我的要求很清楚。如果没有，请随时发表评论，我会尽力解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:13:58.450

您可以使用这种方法：

1.  为每个按钮设置一个关联的对象值。您可以通过向 UIButton 添加类别来支持这一点

    ```
    @interface UIButton (AssociatedObject)
    @property ( nonatomic, retain ) id associatedObject ;
    @end 
    ```

    执行：

    ```
    @implementation UIButton (AssociatedObject)

    -(void)setAssociatedObject:(id)object
    {
        objc_setAssociatedObject( self, @"_associatedObject", object, OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
    }

    -(id)associatedObject
    {
        return objc_getAssociatedObject( self, @"_associatedObject" ) ;
    }

    @end 
    ```

    像这样使用：

    ```
    myButton.associatedObject = <some object> 
    ```

2.  将操作/目标设置为您的视图控制器（或者可能是表视图委托）

    ```
    [ myButton addTarget:<view controller> action:@selector( buttonTapped: ) forControlEvents:UIControlEventTouchUpInside ] ; 
    ```

3.  在您的操作中，查看发件人的关联对象。发件人将是您的 UIButton

    ```
    -(void)buttonTapped:(UIButton*)sender
    {
        // retrieve object associated with the tapped button:
        id associatedObject = sender.associatedObject ;
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:14:38.133

您没有显示任何要评论的代码，但一般来说，您可以：

1.  为每个按钮定义一个`tag`代表按钮出现的表格行；

2.  当您的按钮操作方法被调用时，您可以访问`tag`按钮的属性以了解它是哪一行。

    ```
     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
       {
           UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
           if (cell == nil) {
             ...
           }
           ...
           [button setTag:indexPath.row];
           ...
       }

       - (void)buttonPressedAction:(id)sender
       {
           UIButton *button = (UIButton *)sender;
           int row = button.tag;
       } 
    ```

如需更详细的解决方案，请查看[此 SO thread](https://stackoverflow.com/questions/1802707/detecting-which-uibutton-was-pressed-in-a-uitableview)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:32:41.010

我通过`protocol`为自定义单元格类创建一个，然后为每个自定义单元格`UIViewController`处理`UITableView`这个来完成此操作`delegate`。

然后我将 附加`UIButton`到`IBAction`自定义单元格类中的一个调用它的委托，并提供有关它是哪个单元格或我需要采取哪些信息的信息。

所以我会设置一个类似的`protocol`东西：

```
@protocol CustomCellDelegate <NSObject>

- (void) cellButtonPressed:(NSDictionary *)stuffForDelegate;

@end 
```

然后，当我在 中实现`cellButtonPressed:`时，`ViewController`我会使用`stuffForDelegate`它来确定它是哪个单元格或我需要对哪些信息采取行动。

该`tag`方法还可以，但我发现处理所有飞来飞去的标签很乏味，我更喜欢使用对象、协议和委托。

# sql - 可以从成分集合中制作的食谱的 SQL 查询

> ID：11658700
> 
> 赞同：4
> 
> 时间：2012-07-25T21:10:49.320
> 
> 标签：sql, database, recipe

我有一个数据库，其中包含一个成分表 I 和一个食谱 R 表。这两个表具有多对多关系，因为一个食谱使用许多成分，而一种成分用于许多食谱。我有第三个交叉引用表，它使用[交叉引用验证模式](http://database-programmer.blogspot.com/2008/01/table-design-patterns-cross-reference.html)来强制执行我的多对多关系，并使用字符串外键（而不是整数）完成。

假设我在我的数据库之外有一个成分 C 的集合，我如何查询配方表 R 中的每个配方，这些配方只能使用 C 中提供的成分列表来制作？

**其他需要考虑的事项**

1）速度（当然）最终会成为一个问题，但正确性是我目前所坚持的。

2) 成分 C 的集合可能非常大（约 100 种成分）。

任何答案，甚至只是正确方向的指针都将不胜感激。

谢谢，

亚历克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:21:47.550

一种方法是编写：

```
select ...
  from R
 where ID not in
        ( select R_ID
            from RI
           where I_ID not in
                  ( select I_ID
                      from C
                  )
        )
; 
```

即：从 . 开始`C`。*选择成分不在*的所有配方-成分交叉引用`C`。这为您提供了*仅*使用`C`. 然后，选择不在该集合中的所有食谱。

# c# - C# Gridview 单元格返回空字符串

> ID：11658704
> 
> 赞同：1
> 
> 时间：2012-07-25T21:11:25.113
> 
> 标签：c#, asp.net, gridview

这是我正在使用的 gridview 的图片：http: [//i.imgur.com/kFUTQ.png](http://i.imgur.com/kFUTQ.png)

这是我的问题：我有一个 DropDownList（图中未显示），其项目数量与 Fraction DropDownList（如图所示）相同。每个索引都相互匹配（例如：另一个字段的索引 4 与 Fraction DropDownList 的索引 4 相同），因此在提交表单时，它们必须正确匹配这两个字段。

我想做的是检查它们是否确实匹配。我试过了：

```
this.gvRecords.Rows[0].Cells[2].Text 
```

&

```
(((DropDownList)this.gvReserveRecords.Controls[0].Controls[0]
.FindControl("gvcbnFraction")).SelectedIndex 
```

两者都没有工作。他们只是返回一个空字符串。

以下是一些可能有帮助的信息：

*   我正在使用 ASP.NET Web 窗体

*   GridView 最初是空的，但是一旦填写了信息，就会单击“插入”链接按钮并将数据添加到数据库中，然后 GridView 会调用 DataBind()。

*   我正在尝试将 Fraction 的值与 GridView 之外的字段进行比较，如果这很重要的话。

如果您需要任何其他信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:06:24.867

您应该能够通过其 ID 简单地引用您的 DropDown 控件，在本例中为 gvcbnFraction。所以，`gvcbnFraction.SelectedIndex`应该给出整数索引并且`gvcbnFraction.SelectedValue`应该给出字符串值。如果您无法在后面的代码中引用下拉控件，那么您就错过了应该存在的东西。可能是其中之一：

1.  您的 Designer.cs 文件不包括`protected global::System.Web.UI.WebControls.DropDownList gvcbnFraction;`
2.  您的 .aspx 文件不包含`CodeBehind="MySuperAwesomePage.aspx.cs" Inherits="MyWebApp._Default"`或类似的内容
3.  还有一些我不知道的事

如果您使用的是 Visual Studio，您可以尝试从工具箱中拖动一个控件，看看是否可以引用它。这样做会自动更新你的 Designer.cs 文件，消除 #1

# c# - 处理异常的方法

> ID：11658708
> 
> 赞同：1
> 
> 时间：2012-07-25T21:11:35.587
> 
> 标签：c#, exception, exception-handling

除了日志记录，什么构成处理异常？我问人们说只捕获你可以处理的异常。

例如，我编写了一个与 Active Directory 交互的工具。我在域控制器上运行它。由于我对 AD 有深入的了解，因此我可以处理其他例外情况（例如，我可以提出要求另一个域名的提示）并从那里开始。但是，如果生产服务器上的域存在*如此关键*的问题，这不是例外吗？

所以在这种情况下，环境问题应该是异常的（考虑到生产和广告等），但这是我可以处理的。我认为处理异常取决于节目观众（同意）？

无论如何，主要问题：要推断我是否可以“处理”异常，我需要知道处理需要什么 - 除了记录并向用户提供另一种选择（在这种情况下，我通过使用 if file exists 等来避免异常）。

对于上述情况（AD），我将我的代码构造为：

```
if (adIsAvailable)
  // do whatever here

else
  raise exception and ask for action 
```

然后在 gui 中被捕获

关于该设计的有效性的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:25:38.157

好问题。请记住，您只能处理特定类型的异常，并将真正关键的异常传播到堆栈中并被遗忘。

异常处理的一种用法是与用户交互，当然，正如您所说，最好的方法是检查一个前提条件，如果违反（文件不存在）将抛出异常，而不是执行实际任务并依赖关于通知的异常机制。

异常处理的另一种用法是重试。例如，您正在向数据库发送查询并收到 TimeOutException，或另一个指示连接暂时不可用的错误。在这种情况下，您可能需要稍等片刻，然后再试一次。并且仅当您在 3 次之后未能到达 Db 时 - 将异常传播到上层。

处理异常的另一种方法是将数据添加到异常或更改其类型。您可能希望捕获 TimeOutException 但抛出 MyApplicationException，其中包含例如您尝试执行的 SQL（原始异常是内部异常）。

此外，您可能想要做相反的事情 - 从异常中删除数据，例如堆栈跟踪，这是出于安全原因（将应用程序的内部工作暴露给恶意用户是不明智的）

顺便说一句，在您的情况下，您可能希望格式化用户友好的消息，清楚地说明问题的性质，而不是向用户呈现堆栈跟踪和晦涩的消息。这是可以在异常处理期间完成的转换的另一个示例。

不久前，我的应用程序抛出了一个异常，该异常是由于 DML 操作的表空间空间不足而引起的。用户遇到了一个带有错误代码的可怕异常。我所做的是添加一个处理程序来检查调用命令引发的异常，并为此错误代码添加特殊处理——它现在可以准确地告诉用户问题出在哪里！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:41:53.493

在这里，您有几个不同的问题。

1.  如何处理（并决定何时处理）底层代码抛出的异常
2.  何时自己抛出异常
3.  生产代码是否应该与开发代码不同地处理“异常”情况。代码。

**关于第（1）点：**

这可能有点混乱且难以决定——不同的 API 可能会以不同的方式使用异常，即使在同一种语言中也是如此。

例如，在 C# 中，如果我希望我的输入可能无法解析，我更喜欢使用`int.TryParse()`而不是`int.Parse()`捕获 a `FormatException`，并且我想编写代码来处理这种情况。

如果我不想处理错误的输入，我将使用`int.Parse()`, 并让异常传播。

这取决于情况，唉。

**关于第（2）点：**

例外基本上意味着“我放弃”。他们的意思是出了点问题，但你不会在那里自己处理。

**关于第（3）点：**

我认为这几乎总是一个坏主意。

**在旁边：**

我不同意[Vitality 的部分回答](https://stackoverflow.com/a/11658877/567650)，它说：

> 最好的方法是检查一个前提条件，如果违反（文件不存在）会抛出异常，而不是执行实际任务并依靠异常机制进行通知。

如果您编写如下代码：

```
if (file_exists(x))
{ /* do something */ }
else
{ /* whatever */ } 
```

然后你向比赛条件敞开心扉。也许文件在`file_exists()`检查之间被删除了，所以你的代码无论如何都会抛出异常。

或者，文件可能是在您进入该`else`部分后创建的。

在这种情况下，我认为最好做你想做的事情，如果出现问题，处理异常。

# http - URL中的'@'，用于node.js http.request

> ID：11658710
> 
> 赞同：0
> 
> 时间：2012-07-25T21:11:36.717
> 
> 标签：http, node.js, url

我看到了一个带有“@”符号的网址：

```
curl http://subdomain:token@localhost:9292/aaa/bbb 
```

完美运行

但我无法让它与 node.js http.request 一起使用，可能是因为我不明白“@”在做什么（并且不知何故无法在谷歌上找到明确的答案）。

有人愿意解释吗？

这是我当前的 node.js 代码

```
var http_options = {
  method : "GET"
, url : subdomain + ":" + token + "@" + Config.API.url
, path : "/aaa/bbb"
};

var req = http.request(http_options, function (response) {
  // ...
});

req.on('error', function (error) {
  console.log('error: ' + error);
}); 
```

产生：

```
error: ECONNREFUSED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:17:50.927

@ 将用户/密码部分与位置部分分开。

您编写的 curl 行随请求发送 HTTP Authenticate（BASIC 身份验证）。

```
curl http://subdomain:token@localhost:9292/aaa/bbb 
```

表示：获取`localhost:9292/aaa/bbb`并以用户身份进行操作：`subdomain`密码`token`

我不知道如何在 node.js 中做到这一点，但你会弄清楚的，现在你知道它做了什么。

# php - 不能从禁用的单选按钮 $_POST 值

> ID：11658711
> 
> 赞同：3
> 
> 时间：2012-07-25T21:11:51.867
> 
> 标签：php, javascript

我有两页，在第一页中我提交了包含单选按钮的表单。

从第二页开始，我尝试使用 $_POST 读取单选按钮的响应。

问题是当我点击提交时，第二页中的 $_POST 显示为 NULL。但是，当我没有禁用第一页中的单选按钮时，第二页的 $_POST 表单会正确读取单选按钮中的数据。

有什么解决方案可以让 $_POST 读取禁用单选按钮的值吗？

当用户单击它时，我正在使用此 Javascript 代码禁用单选按钮：

```
function disableRadio(groupName){
        var radio=document.getElementsByName(groupName);
        for(c=0;c<radio.length;c++)
            radio[c].disabled=true;
} 
```

这是两个页面中的每个页面的简单代码。

第 1 页：

```
echo '<form action="Page2.php" method="post">',
     "<input type='radio' name='Question1' value='1' onClick='disableRadio(Question1)' />",
     "<input type='radio' name='Question1' value='2' onClick='disableRadio(Question1)' />",
     "<input type='radio' name='Question1' value='3' onClick='disableRadio(Question1)' />",
     "<div><input type='submit' value='Submit'></div>",
     "</form>"; 
```

第2页：

```
$response=$_POST['Question1'];
echo $response; 
```

* * *

## 更新到这个问题

使用 ReadOnly 属性时，组中的单选按钮仍然可以单击。所以，我决定禁用其他单选按钮。有没有更好的解决方案，因为我不希望用户觉得他能够改变答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:13:52.180

禁用的输入不提交它们的值。

`readonly`如果这种行为适合您的情况，您可以将它们设置为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:16:07.233

问：在我按下“关闭”按钮后，有什么方法可以让我的手机发出声音？

A：不，尝试点击“静音” :)

“禁用”（此输入已关闭）和“只读”（有值，但用户无法篡改）之间存在差异：

*   [http://www.w3schools.com/tags/att_input_readonly.asp](http://www.w3schools.com/tags/att_input_readonly.asp)

'希望有帮助.. PSM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:14:52.670

您可以设置一个隐藏值以使用单选按钮的代理，并根据单选按钮的状态设置它，这样您仍然可以禁用单选按钮并始终拥有您想要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:14:13.170

您应该在输入元素上使用`readonly`而不是。`disabled`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T21:15:17.793

您可能最好使用`<input type="hidden">`，如果您确实需要用户查看他们之前提交的内容，那么您可以添加一组没有名称的禁用单选按钮来显示它。

# c# - 从会话到成员文件夹的身份验证

> ID：11658714
> 
> 赞同：3
> 
> 时间：2012-07-25T21:12:06.187
> 
> 标签：c#, asp.net

我之前在 c# asp.net webforms 中设置了成员文件夹，只允许某些用户并在用户未通过身份验证时重定向。我想知道这是否可能/如果 Session 为空，我将如何根据天气实现身份验证 Session 变量（填充了一个值）或不进行身份验证。

我希望这样的事情可能类似于您在 we.config 中为整个文件夹设置权限的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:47:35.850

它可以在标准 asp.net 功能的帮助下完成。我将尝试为它提供一种可能的解决方案。首先你需要设置“web form authentication” [ASP.NET Authentication](http://msdn.microsoft.com/en-us/library/aa291347%28v=vs.71%29.aspx)，你应该修改你的web.config。

```
<system.web>
   <authentication mode="Forms">
      <forms name="Custom" loginUrl="/login.aspx" />       
   </authentication>
</system.web> 
```

然后，您需要在 web.config 和[ASP.NET Authorization](http://msdn.microsoft.com/ru-ru/library/8d82143t.aspx)中指定成员位置。

```
<location path="folders/memberN">
   <system.web>
      <authorization>
         <allow roles="memberN"/>
         <deny users="*"/>
      </authorization>
   </system.web>
</location> 
```

这将允许组“memberN”中的所有用户在“folders/memberN”路径下工作。

接下来，我们需要将[成员资格](http://msdn.microsoft.com/ru-ru/library/1b9hw62f.aspx)和[角色提供者](http://msdn.microsoft.com/ru-ru/library/ms164660.aspx)添加到您的 web.config。基于 sql server 提供程序配置的成员资格和角色提供程序。

```
<configuration>
    <connectionStrings>
        <add name="SqlServices" 
             connectionString="Data Source=MySqlServer;Integrated Security=SSPI;Initial 
             Catalog=aspnetdb;" />
    </connectionStrings>
    <system.web>
        <roleManager defaultProvider="SqlProvider" 
          enabled="true"
          cacheRolesInCookie="true"
          cookieName=".ASPROLES"
          cookieTimeout="30"
          cookiePath="/">
          <providers>
            <add
              name="SqlProvider"
              type="System.Web.Security.SqlRoleProvider"
              connectionStringName="SqlServices" 
              applicationName="SampleApplication" />
          </providers>
        </roleManager>
        <membership 
             defaultProvider="SqlProvider"
             userIsOnlineTimeWindow="20">
             <providers>
                <remove name="AspNetSqlProvider" />
                <add name="SqlProvider"
                    type="System.Web.Security.SqlMembershipProvider"
                    connectionStringName="SqlServices"
                    applicationName="/" />
            </providers>
        </membership>
    </system.web>
</configuration> 
```

最后我们需要在数据库中创建特殊的表（[更多细节](http://www.4guysfromrolla.com/articles/040506-1.aspx)）。

```
%WINDOWS%\Microsoft.NET\Framework\v2.0.50727\aspnet_regsql.exe -S <server> -E -d <database> -A all 
```

# sharepoint - 如何获取 SharePoint 列表的标题？

> ID：11658718
> 
> 赞同：1
> 
> 时间：2012-07-25T21:12:24.810
> 
> 标签：sharepoint, sharepoint-2010, office365

我正在尝试使用 Web 服务从 SharePoint 检索列表。我遇到了[这篇博](http://mqsharepoint.blogspot.com/2008/10/working-with-sharepoint-web-services.html)文中描述的问题，即 GetList 方法显然希望传递列表的标题而不是列表的名称（即使参数称为“listName”）。我有列表的名称，但我不知道如何获取列表的标题。我在哪里可以找到那个？

我在 Office 365 中使用 SharePoint，我相信它是 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:31:42.850

有点过头了，但试试这个代码。它只是一个示例代码，您可能希望将其塑造成您的逻辑。

```
string listName = "MyList";

Lists.Lists listSvc = new Lists.Lists();
listSvc.UseDefaultCredentials = true;

XmlDocument xDoc = new XmlDocument();
xDoc.LoadXml(listSvc.GetListCollection().OuterXml);

XmlNamespaceManager nsmgr = new XmlNamespaceManager(xDoc.NameTable);
nsmgr.AddNamespace("A", "http://schemas.microsoft.com/sharepoint/soap/");

XmlNode requiredList = xDoc.SelectSingleNode("//A:List[contains(@DefaultViewUrl,'" + listName + "')]", nsmgr);
string listTitle = requiredList.Attributes["Title"].Value;

XmlNode list = listSvc.GetList(listTitle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:29:26.347

strListName：可以是列表名称，例如“文档”，也可以是列表的 GUID，带或不带花括号，格式如下：

{318B9E8F-1EF4-4D49-9773-1BD2976772B6}

[您可以在此处找到更多信息](http://msdn.microsoft.com/en-us/library/dd964182%28v=office.12%29)- 以上信息是本文档的摘录

# magento - 如何使用magento导出具有未加密密码的客户记录

> ID：11658719
> 
> 赞同：0
> 
> 时间：2012-07-25T21:12:35.267
> 
> 标签：magento, passwords

我已经环顾四周了，但还没有找到一个像样的答案。似乎这不太可能。我在一家公司工作，我们正在将我们的 cms 从 Magento 切换到另一个，我们希望将我们的客户数据从一个迁移到另一个。唯一的问题是，当您导出客户时，它不会导出客户密码。如果您确实选择导出密码，则所有密码都是加密的。有没有办法导出明文密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:19:25.307

不，这不可能开箱即用。

但是，您可以通过额外的模块在客户创建/编辑时存储明文，但是，我**不**建议这样做。

据我所知，Magento 将密码`md5`与哈希一起以 的形式存储`<hash>:<salt>`，任何体面的 CMS 都应该可以读取它，无论涉及什么技术。

有关 CMS 的更多信息？

# web-services - 联系 REST API 以与 Html 5 / Javascript 一起使用的安全方式

> ID：11658721
> 
> 赞同：1
> 
> 时间：2012-07-25T21:12:45.423
> 
> 标签：web-services, html, rest, authentication, cordova

这与此问题中提出的情况类似： [Javascript Calling a Rest API with App Name and App Password - How Can i Secure it](https://stackoverflow.com/questions/11288032/javascript-calling-a-rest-api-with-app-name-and-app-password-how-can-i-secure)

这是架构概述：

*   该网站是 Html5/jquerymobile
*   它联系我所谓的“包装器”服务......这是我用 C# 编写的 REST API，用于联系另一个第 3 方 REST API。我这样做是因为标头中有凭据，并且 API 使用基本身份验证。因此，凭据不会被公开，因为它们仅在服务器端是已知的。
*   我的“包装器”服务目前没有实现任何额外的安全性。它目前可以从任何地方访问。锁定它的最简单和最快的方法是通过 IP 进行限制，因此除了服务器之外的任何其他 IP 都无法真正联系我的包装服务。

问题：如果可以从任何地方访问，IP 锁定是否是确保 API 不会受到攻击的唯一方法？

如果我使用Phonegap（我已经......并在Android上成功部署）转换它，显然如果Web服务受到限制，本机应用程序将无法工作。
有没有办法解决这个问题，所以我只能允许来自移动应用程序的流量，而不是来自任何其他来源的流量？我正在考虑 MD5 哈希或可以发送到包装 API 的内容。但不幸的是，我认为信息很容易被“嗅探”。

我在这里唯一可行的选择是将应用程序作为 Web 应用程序发布，强制使用浏览器，从而消除对允许我的 Web 服务被锤击的任何担忧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:27:24.147

我相信这个问题的答案是用户令牌和通过 SSL 加密消息的组合。

服务器可以向有效用户颁发令牌，以便我们可以在以后的请求中识别他。

通过 SSL 对其进行加密将确保无法嗅探此令牌。

[https://security.stackexchange.com/questions/12531/ssl-with-get-and-post](https://security.stackexchange.com/questions/12531/ssl-with-get-and-post)

# networking - socket.recvfrom 总是会返回一个有效的地址吗？

> ID：11658724
> 
> 赞同：2
> 
> 时间：2012-07-17T06:58:43.880
> 
> 标签：networking, sockets

我正在研究一种通信协议，该协议应该通过在本地网络上广播/多播对等方的地址来支持自我配置。直观的方法是广播地址，但事实证明，很难可靠地找出当前机器的本地 IP 地址（取决于配置，您可能会得到“127.0.0.1”或另一个无用的地址） .

另一种方法是不在广播消息中包含主机地址，而是让接收者调用`recvfrom`其套接字，该套接字不仅返回接收到的数据，还返回发送者的地址。正如我所看到的，该调用在 Unix 和 Windows（我的要求之一）以及可能更多的平台上都可用。我现在的问题是，在某些情况下这可能会失败并`recvfrom`返回无法访问或无用的地址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:43:34.740

如果您将此技术限制为仅广播 UDP，则应该没问题。唯一容易与此混淆的是双 NAT 或发夹 NAT。无论如何，仅在本地进行的广播还没有做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:25:47.813

任何地址都可能随时变得无法访问（因此根据您的定义无用）。你的软件应该准备好处理这个问题。

您可以通过枚举接口可靠地确定系统的 IP 地址（请注意复数，稍后会详细介绍）。您如何做到这一点在平台之间会有所不同，因为标准（例如，POSIX）中没有指定应该如何完成的内容。许多 Unixy 系统都有`getifaddrs()`调用；Windows 做其他事情。无论哪种方式，隔离该代码应该很容易。

您的软件也不应该假设它遇到的 IP 是“该”地址。在具有多个接口的系统上（如果算上环回，大多数接口），路由可能会更改，或者有人可能希望在与默认路由不在同一接口上的网段上运行您的协议。

如果您要广播一条消息，您需要在每个启动的接口上执行一次，包括环回，除非您配置为不这样做。广播也应该*从*这些接口中的每一个发生，因此它具有正确的地址。您不能假设与任何接口位于同一网段的其他主机知道任何其他接口或有办法路由到它们的地址。

如果您的协议仅用于连接的网段，则丢弃非连接子网中的数据将是合理的做法。

# android - 使用 Android NFC 功能读取 RFID 标签

> ID：11658730
> 
> 赞同：2
> 
> 时间：2012-07-25T21:13:25.643
> 
> 标签：android, nfc, rfid

嗨，我在使用我的 android Galaxy Nexus 读取特定的 KOVIO RFID 标签时遇到了很多麻烦。此标签不是 NFC 标签，因此它不包含任何 Ndef 消息或任何额外数据。我想要的只是标签 ID，但我找不到任何 API 来做这件事。

在我的 Android 清单中，我将意图过滤器设置为：

```
 <intent-filter>
    <action android:name="android.nfc.action.TAG_DISCOVERED" />
    </intent-filter> 
```

当我将标签放到我的设备上时，它会发出读取它的声音，然后转到 onPause() 方法，然后是 OnResume() 方法。

我对它们都进行了跟踪，当我检查意图时，我发现 mClipData、mData、mExtras、mPackage、mSelector、mSourcebounds、mType 字段都是空的。因此，当我做类似的事情时

```
 byte[] tagId = intent.getByteArrayExtra(aa); 
```

tagId 出来为空。谁能帮我提取身份证？我知道这是可能的，因为 NXP 的 TagInfo 应用程序能够显示 ID。我只是不知道为什么我不能:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:00:59.590

尝试类似的东西

```
if (intent.hasExtra(NfcAdapter.EXTRA_TAG)) {
  Tag tag = (Tag) intent.getParcelableExtra(NfcAdapter.EXTRA_TAG));
  byte[] id = tag.getId(); // the tag's ID
} 
```

# delphi - 如何在字符串中搜索子字符串的许多变体

> ID：11658731
> 
> 赞同：2
> 
> 时间：2012-07-25T21:13:25.953
> 
> 标签：delphi, delphi-xe2

我正在尝试在字符串中搜索子字符串，但认为必须有比这更有效的方法..

```
 //search for volume
     if AnsiContainsStr(SearchString, 'v1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'V1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Volume1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Volume 1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Vol1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'vol1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Vol 1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'vol 1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Vol.1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'vol.1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'Vol. 1') then
         Volume := '1';
     if AnsiContainsStr(SearchString, 'vol. 1') then
         Volume := '1';

     if AnsiContainsStr(SearchString, 'v2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'V2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Volume2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Volume 2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Vol2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'vol2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Vol 2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'vol 2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Vol.2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'vol.2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'Vol. 2') then
         Volume := '2';
     if AnsiContainsStr(SearchString, 'vol. 2') then
         Volume := '2'; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T01:08:30.910

由于您使用 XE2 标记了它，因此您可以使用正则表达式轻松进行匹配

```
 var
     Regex: String;
  begin
     Regex := '^[v](ol\.?|olume)?\s*(1|\.\s*1)$';
     if TRegEx.IsMatch(SearchString, Regex, [roIgnoreCase]) then
        Volume := '1'
     Regex := '^[v](ol\.?|olume)?\s*(2|\.\s*2)$';
     if TRegEx.IsMatch(SearchString, Regex, [roIgnoreCase]) then
        Volume := '2'
  end; 
```

现在，我不是最擅长设计正则表达式，但我测试了上面的那个，它似乎匹配你所有的变体（也许其他人可以想出一个更简洁的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T21:18:27.150

对于大量字符串和频繁搜索，使用后缀树是最好的选择。否则，使用正则表达式的更简单方法也会有所帮助，您的字符串看起来足够规则。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T06:10:15.107

**基于@user582118 的回答：**

如果您使用`^v(ol\.?|olume)?\s*([0-9]+)$`RegEx 模式，则不必尝试每个可能的数值。它将在末尾匹配 1 个或多个数字字符。然后，您可以使用`TMatch`'s`Value`和`Groups`属性从字符串中提取数字。

```
var
  RegEx: TRegEx; // This is a record, not a class, and doesn't need to be freed!
  Match: TMatch;
  i: Integer;
begin
  RegEx := TRegEx.Create('^v(ol\.?|olume)?\s*([0-9]+)$');
  Match := RegEx.Match('vol.3456');
  WriteLn('Value: ' + Match.Value);
  for i := 0 to Match.Groups.Count - 1 do
    WriteLn('Group', i, ': ', Match.Groups[i].Value);
end; 
```

给出：

```
Value: vol.3456
Group0: vol.3456
Group1: ol.
Group2: 3456 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-25T23:58:57.897

尝试这样的事情：

```
const
  Prefixes: array[0..6] of String = (
    'VOLUME '
    'VOLUME'
    'VOL. '
    'VOL '
    'VOL.'
    'VOL'
    'V'
  );

var
  S: String;
  P: PChar;
  I, J, Len: Integer;
  Volume: Char;
begin
  Volume = #0;
  S := UpperCase(SearchString);
  P := PChar(S);
  Len := Length(S);
  I := 1;
  while (Len > 0) and (Volume = #0) do
  begin
    if (P^ <> 'V') then begin
      Inc(P);
      Dec(Len);
      Continue;
    end;
    for J := Low(Prefixes) to High(Prefixes) do
    begin
      if AnsiStrLComp(P, PChar(Prefixes[J]), Length(Prefixes[J])) = 0 then
      begin
        Inc(P, Length(Prefixes[J]));
        Dec(Len, Length(Prefixes[J]));
        if (Len > 0) then begin
          if (P^ >= '1') and (P^ <= '7') then
            Volume := P^;
        end;
        Break;
      end;
    end;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-25T23:06:00.013

我不得不做一次类似的事情来比较邮寄地址。我去掉了空格和标点符号。然后我使用了 CompareText，所以它不区分大小写。

您的许多 If 语句处理比较字符串，这些字符串在“Vol”或“Volume”与数字之间可能有也可能没有句点或空格。删除句点和空格，每个卷号会留下两条 If 语句：一条用于 VOL，一条用于 VOLUME。您甚至可以通过将“volume”替换为“vol”来将其缩减为每卷一个 If 语句。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-25T23:14:26.913

首先将搜索字符串设为大写（一次），然后仅针对搜索字符串的大写版本进行每次检查。这将检查次数减少了一半，而不需要不区分大小写的搜索（这可能每次都会改变两个字符串的大小写）。

您可以更进一步，使用 JCL 中的通配符匹配函数之一，例如 StrMatches。然而，虽然这会减少代码行数，但它的速度不如特定匹配。

如果您希望为 Volume 创建许多不同的值，请编写您自己的函数来搜索字符串的字母部分，然后单独检查它后面的数字。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-26T10:32:27.977

如果你想要它简单但缓慢 - 使用 RegExp 方式。

如果您想要快速，请阅读@LeleDumbo 的答案。

但！在真正搜索之前复制所有大写的字符串 - AnsiUpperCase 函数。不区分大小写的搜索会减慢每个字符的速度。制作字符串和搜索模式的大写副本会更好。（哦，@RobMcDonell 已经告诉过你 :-)）

您要将前缀转换为树。好的，在这个简单的示例中，它将适合列表（数组）：“V”、“OL”、“UME” *在更复杂的情况下，您可以搜索具有相同开头的 V-OL-UME 或 V-ER-SION和分裂的尾巴）*

然后阅读[http://en.wikipedia.org/wiki/Finite-state_machine](http://en.wikipedia.org/wiki/Finite-state_machine) - 这就是你必须做的。

一个简单的草稿（未涵盖所有可能的用例，例如 "Vol. 2.2" ）将是：

从 search-txt-1 状态开始，查看 #1 字符。在每个循环中，您都有当前状态和当前要考虑的字符数（考虑到左侧已经扫描）：

1.  如果 state 为 search-txt-1，则在当前字符和右侧任意位置搜索 txt-1（即“V”）（System.StrUtils.PosEx 函数）

    1.1。如果未找到 - 退出循环，未找到文本

    1.2\. 如果找到 - inc(current-number), state := search-txt-2, next loop

2.  如果状态为 search-txt-2，则仅在当前字符处搜索 txt-2 ("UM")！(lazy: System.Copy(txt, current-char, system.length(txt-2)) = txt-2; fast: 与 Jedi CodeLibrary 的长度和偏移量的特殊比较)

    2.1 如果找到, inc(current-number, length(txt-2), state := search-txt-3, next loop

    2.2 如果未找到，请勿更改当前编号、状态 := 跳过点、下一个循环

3.  如果 state 是 search-txt-3，然后像上面一样搜索 txt-3

    3.1 如果找到，inc(current-number, length(txt-3), state := skip-dot, next loop

    3.2 如果未找到，请勿更改当前编号、状态 := 跳过点、下一个循环

4.  如果 state 是 skip-dot，查看 current-char 是否是 dot

    4.1 如果是, inc (current-number), state := skip-few-blanks, next loop

    4.2 如果不是，请不要更改当前编号，状态：= 跳过少数空白，下一个循环

5.  如果跳过几个空白然后查看当前字符是否为“”

    5.1 如果是，inc (current-number), state := skip-few-blanks, next loop（可能有更多的空白）

    5.2 如果不是，请不要更改当前编号，状态：= 可能编号，下一个循环

6.  如果可能是数字，那么 System.Character.IsDigit(current-char) ???

    6.1 如果不是 - 没有号码，搜索失败，下一次尝试 - 不要更改当前号码，状态 := search-txt-1，下一个循环

    6.2 if is，记住number从哪里开始，state := reading-number, inc (current-number), next loop

7.  如果读取数字然后 System.Character.IsDigit(current-char) ???

    7.1 如果是 - 多一位 - 状态 := reading-number, inc (current-number), next loop

    7.2 如果不是 - number over - 获取从数字开始到前一个字符（最后一个数字）的字符串切片，转换它（IntToStr(Copy(string, number-start, number-length)) 并退出循环（你不在一个字符串中搜索多个数字，是吗？）

对于更复杂的语法，有 Yacc/Bison 之类的工具。但是对于这样一个简单的方法，您可以制作自己的自定义 FSM，这并不难，但却是最快的方法。只是要非常专心，不要在状态转换和当前字符数转换中出错。

我希望我没有做，但你必须测试它。

# c# - 如何根据用户在 JSON 中获得客户端的权限在视图中显示/隐藏元素？

> ID：11658733
> 
> 赞同：1
> 
> 时间：2012-07-25T21:13:45.393
> 
> 标签：c#, asp.net-mvc, json, security, user-permissions

我有一个 JSON，它为我带来了一组用户角色，它为我定义了用户可以执行或不执行的操作。

JSON 在客户端加载。我想使用服务器端代码而不是客户端隐藏此页面上的元素，因为这种方法更安全且不易于黑客攻击。

```
//.Net MVC Code
if (!userCanDelete){
    //don't print the selector to the page
} 
```

*.Net MVC 2*可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:24:29.410

我在我的应用程序中做同样的事情，使用**自定义 HTML 助手**。

就个人而言，我在登录期间获得特定人员和特定操作的特定权限。

我从 JSON获得此权限服务器端（*它更安全！ ）。*

我将此权限存储在会话中并在我的自定义助手中使用它：

```
public static class HtmlHelperCustom
{
    public static bool IsAccessibleToUser(this HtmlHelper helper, String element)
    {
        var user = (UserModel)HttpContext.Current.Session["currentUser"];

        return user.rights.Contains(element);
    }
} 
```

然后在我的视图中，我只是用元素调用助手：

```
@{ 
    if (Html.IsAccessibleToUser("urlUpdate"))
    {
        <a href="@Html.DisplayFor(modelItem => item.urlUpdate)" target="_blank">
            <i class="icon-wrench" title="update">&nbsp;</i>
        </a>
    }
} 
```

您应该获取 JSON 服务器端或稍微修改我的解决方案。

# java - 康威的生命游戏检测额外的活细胞

> ID：11658742
> 
> 赞同：0
> 
> 时间：2012-07-25T21:14:31.110
> 
> 标签：java, japplet, conways-game-of-life

我正在编写康威的生命游戏，但我对活细胞的检测揭示了当我尝试使用 [36 ][22] 到 [36][24]。我的迭代更新方法是这样的：

```
private void nextGeneration() {
    for (int i = 0; i < cell.length; i++) {
        for (int j = 0; j < cell[i].length; j++) {
            if(i>0 && i<79 && j>0 && j<99){
                if(cell[i][j].getAlive()){
                    cell[i][j].calcNeighbors(cell, i, j);
                    if(cell[i][j].getNeighbors() < 2){
                        cell[i][j].setAlive(false);
                    }
                    if(cell[i][j].getNeighbors() == 2 || cell[i][j].getNeighbors() == 3 && cell[i][j].getAlive()){
                        cell[i][j].setAlive(true);
                    }
                    if(cell[i][j].getNeighbors() > 3){
                        cell[i][j].setAlive(false);
                    }
                }
                else {
                    cell[i][j].calcNeighborsForNull(cell, i, j);
                    if (cell[i][j].getNeighborsForNull() == 3) {
                        cell[i][j].setAlive(true);
                    }
                }
            }
        }
    }
} 
```

其中 nextGeneration() 每 1 秒调用一次，而 cell[][] 是 Cell 类的数组

我使用以下代码检测细胞：

```
myNeighbors = 0;
        if(cell[i-1][j-1].myAlive){
            myNeighbors++;
            System.out.println("top left");
        }
        if(cell[i-1][j].myAlive){
            myNeighbors++;
            System.out.println("top center");
        }
        if(cell[i-1][j+1].myAlive){
            myNeighbors++;
            System.out.println("top right");
        }
        if(cell[i][j-1].myAlive){
            myNeighbors++;
            System.out.println("mid left");
        }
        if(cell[i][j+1].myAlive){
            myNeighbors++;
            System.out.println("mid right");
        }
        if(cell[i+1][j-1].myAlive){
            myNeighbors++;
            System.out.println("lower left");
        }
        if(cell[i+1][j].myAlive){
            myNeighbors++;
            System.out.println("lower center");
        }
        if(cell[i+1][j+1].myAlive){
            myNeighbors++;
            System.out.println("lower right");
        }
        System.out.println(myNeighbors +" at " + j + "," + -i); 
```

当我运行代码时，我得到以下控制台输出：

```
top right
mid right
2 at 22,-36
top center
top right
mid left
mid right
4 at 23,-36
top left 
top center
2 at 24,-36
mid right
lower left
lower right
3 at 23,-35
mid left
lower center
2 at 24,-35
top right
1 at 22,-36
top left
top center
mid left
3 at 24,-36
mid right
lower center
lower right
3 at 23,-35 
```

编译器认为活细胞上方的死细胞也是活细胞。有人可以看到我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:27:24.903

根据您的 SetAlive 方法的工作方式，您认为应该死的单元格实际上可能已设置为活动的。上学期我不得不为课堂编写一个游戏模拟人生，诀窍是使用两个“板”。由于整个“板”应该一次全部更新，因此使用您的方法可能会导致意外结果。遍历每个单元格，但将结果发送到第二个板，因此当前步骤的单元格状态与下一步的单元格状态之间没有重叠。通过文字很难解释，但是如果您需要更多帮助，请告诉我，因为我认为这就是您的问题所在。

# encoding - 奇怪编码的网址

> ID：11658747
> 
> 赞同：1
> 
> 时间：2012-07-25T21:14:50.847
> 
> 标签：encoding, urlencode, string-decoding

**背景：**

上周我一直被以下问题困扰。通常网页使用 base64 加密 url，因此***http://stackoverflow.com***变为***aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29t***并使用如下： [http://www.mysite.com/redir.php?url=](http://www.mysite.com/redir.php?url=) **aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29t**

**问题：**

有些页面使用了我无法破解的不同 url 加密。它们都以***o5o4m4p4b434s2q43626z3 开头***，我认为这是针对***http://www 的。***比较此类不同的链接。

网址是这样的：[http](http://www.site.com/z.php?url=o5o4m4p4b434s2q43626z3) ://www.site.com/z.php?url=o5o4m4p4b434s2q43626z3 ...它们都重定向到另一个站点。

**研究：**

我已经用谷歌搜索了不同的方法来加密/解密 url 和文本，以及数据，什么都没有。我还搜索了“o5o4m4p4b434s2q43626z3”，但没有得到任何结果。我是唯一一个问他们如何编码的人吗？=)

有任何想法吗？“http://www.”怎么写？变成“o5o4m4p4b434s2q43626z3”？

干杯和良好的狩猎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:11:31.300

这听起来像是为该 URL 生成的某种类型的 ID。很可能在某种类型的数据库中存在一种关系，其中存储了 URL 和代码。当加载redir.php 时，会在数据库中查找url 查询字符串中的字符串并重定向用户。

# c# - Foreach 循环检查空字符串并为其赋值 c#

> ID：11658750
> 
> 赞同：3
> 
> 时间：2012-07-25T21:14:59.043
> 
> 标签：c#, encryption, foreach

我对 Foreach 循环不太了解

我有 4 个字符串变量，我将 app.config 中的加密值存储在这些变量中。我的工作是检测这 4 个变量中是否有数据。即使没有值，我也想将默认加密值传递给它.我开始这样做......

```
string EncValue = oEncrypt.EncryptBase64String("NO Data Found");
UpdateOrCreateAppSetting("UserName", ref MPScmUserName);
UpdateOrCreateAppSetting("Password", ref MPScmPassword);
UpdateOrCreateAppSetting("DBUserName", ref MPDbUserName);
UpdateOrCreateAppSetting("DBPassword", ref MPDbPassword);
var list5 = from docs in doc1.Descendants("appender").Elements()
                                            where docs.Name == "file"
                                            select docs;
var element5 = list5.FirstOrDefault();
MPLoadAppConfig = appConfigFile1;
MPErrorLog = element5.Attribute("value").Value;

string[] namesArray = new string[] {
         MPScmUserName,MPScmPassword,MPDbUserName,MPDbPassword};

foreach (string i in namesArray)
{
    if (i is string)
    {
        if (i == "")
        {
            i = EncValue.ToString();
        }
    }
} 
```

我应该如何为该数组中的字符串分配默认加密值，该字符串是一个空字符串。请帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:18:29.970

你不需要说 `if (i is string)`，因为它已经是一个字符串。

在另一个`if`街区，你可能会说

```
if(string.IsNullOrEmpty(i))
{
} 
```

或者您可以使用：

```
string[] arr = new string[] { "","A"};

            for (int i = 0; i < arr.Length; i++)
            {
                if (string.IsNullOrEmpty(arr[i]))
                {
                    arr[i] = "Hello";
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:20:10.037

不需要`if (i is string)`零件，因为您已经知道它是`string`. 您可能还应该使用`string.IsNullOrWhiteSpace();`来测试空字符串。

**编辑**（[Mark's answer的](https://stackoverflow.com/a/11658832/275643)无耻副本）：

```
for (int i = 0; i < namesArray.Length; ++i) 
{
    if (string.IsNullOrWhiteSpace(namesArray[i]))
    {
        namesArray[i] = EncValue.ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:21:24.147

您不能在`foreach`循环中修改变量。您的代码应该给您以下编译错误：

> 无法分配给“i”，因为它是“foreach 迭代变量”

您可以使用 LINQ 执行此操作：

```
namesArray = namesArray.Select(s => s == "" ? EncValue.ToString() : s).ToArray(); 
```

或者，您可以使用一个简单的`for`循环：

```
for (int i = 0; i < namesArray.Length; ++i) 
{
    if (namesArray[i] == "")
    {
        namesArray[i] = EncValue.ToString();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T21:24:23.420

在字符串数组上循环并更改当前字符串的值并不意味着您正在更改数组内字符串的值。当 foreach 在您的数组上循环时，它会在 中返回一个新的字符串实例`i`，因此更改它`i`不会更改 namesArray 中的值。您需要一个带有索引器的传统 for 循环来直接访问 namesArray

```
for(int i = 0; i < namesArray.Length; i++) 
{ 
    if (namesArray[i] == string.Empty) 
    { 
         namesArray[i] = EncValue.ToString(); 
    } 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T21:24:11.793

```
string[] newNamesArray = 
       Enumerable.Select(namesArray, s => s == "" ? EncValue : s).ToArray(); 
```

# objective-c - 用数字动画 UILabel

> ID：11658752
> 
> 赞同：3
> 
> 时间：2012-07-25T21:15:04.597
> 
> 标签：objective-c, ios, xcode, animation

我仍在学习 UIAnimations，刚刚进入它，我偶然发现了一个我不知道如何解决的问题。我见过你获得新的高分的游戏，它将新的高分添加到旧的高分上，它们使数字上升或下降。它看起来非常酷，视觉上令人愉悦。

谁能向我解释这是如何完成的？如果这个问题很容易解决，我深表歉意，就像我说我仍在努力学习/完善动画一样。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T23:43:26.220

我从[sergio 建议你看的帖子](https://stackoverflow.com/questions/5301305/animate-uilabel-text-between-two-numbers)中获取了代码，但注意到 Anshu 提到你想要一个上下移动动画而不是淡入/淡出动画，所以我更改了代码以适应你想要的. 干得好：

```
// Add transition (must be called after myLabel has been displayed)
CATransition *animation = [CATransition animation];
animation.duration = 1.0;   //You can change this to any other duration
animation.type = kCATransitionMoveIn;     //I would assume this is what you want because you want to "animate up or down"
animation.subtype = kCATransitionFromTop; //You can change this to kCATransitionFromBottom, kCATransitionFromLeft, or kCATransitionFromRight
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[myLabel.layer addAnimation:animation forKey:@"changeTextTransition"];

// Change the text
myLabel.text = newText; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T22:12:45.263

如果我在这里错了，人们可以纠正我，但我很确定你必须手动编写这个动画。如果你足够努力的话，你也许可以在网上的某个地方找到一个开源版本。

可以拍摄 a 的图像`UILabel`并用于`sizeWithFont:`确定每个字符的宽度，然后根据每个数字将图像切割成多个部分。或者，您可以`UILabel`为每个数字设置多个 s。

一旦你有了一组数字图像，你就必须计算在转换过程中哪些数字会改变，以及它们是增加还是减少，然后通过从顶部/底部推入来转换到下一个数字（我认为有一个内置的过渡可以做到这一点，请查看 Core Animation 文档）。

您可能想要确定它们增加/减少了多少，并用它来计算动画需要多长时间。那样的话，如果你从 5 到 900，最后一个数字的动画必须非常快，倒数第二个数字的动画速度是 1/10，第三个数字是 1/100，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-07T08:27:02.680

[![在此处输入图像描述](../Images/c7f6e157abf384f92d8cf6159d541554.png)](https://i.stack.imgur.com/hRD4W.gif)

使用显示功能，这可以正常工作。有一些垂直运动会很好，但它要么是 kCATransitionFromBottom 要么是 kCATransitionFromTop - 实际上我们需要 kCATransitionFromBottom | kCATransitionToTop，但这不是一回事。这是代码：

```
-(void)countUpLabel:(UILabel *)label fromValue:(int)fromValue toValue:(int)toValue withDelay:(float)delay{

    int distance = (int)toValue - (int)fromValue;
    int absDistance = abs(distance);
    float baseDuration = 1.0f;
    float totalDuration = absDistance / 100.0f * baseDuration;
    float incrementDuration = totalDuration / (float)absDistance;
    int direction = (fromValue < toValue) ? 1 : -1;
    //NSString * subtype = (direction == 1) ? kCATransitionFromBottom : kCATransitionFromTop;

    for (int n = 0; n < absDistance; n++){

        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delay * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{

            CATransition * fade = [CATransition animation];
            fade.removedOnCompletion = true;
            fade.duration = incrementDuration;
            fade.type = kCATransitionReveal;
            fade.subtype = kCATransitionMoveIn;
            [label.layer addAnimation:fade forKey:@"changeTextTransition"];

            int value = fromValue + (n+1) * direction;
            label.text = [NSString stringWithFormat:@"%i", value];

        });

        delay += incrementDuration;
    }
} 
```

# android - 使用 XML 在 android LinearLayout 中滚动

> ID：11658753
> 
> 赞同：0
> 
> 时间：2012-07-25T21:15:09.120
> 
> 标签：android, android-layout, scroll

我在android中使用XML制作了一个非常简单的ImageButtons集合，父布局是LinearLayout，方向设置为垂直。我读到如果内容的高度超过屏幕，LinearLayout 会自动添加滚动。

链接是：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

LinearLayout 图下面的介绍是这么说的。

但问题是在窗口的高度和内容丢失后没有显示内容。我束手无策，搜索了其他人已回答的问题……我不想使用 ListView，但如果必须，我会这样做。谢谢

# android - Android 用 Handler 更新 TextView

> ID：11658754
> 
> 赞同：1
> 
> 时间：2012-07-25T21:15:16.743
> 
> 标签：android, textview, handler

我在更新时遇到问题`TextView`，我使用 Handler 方法将消息传递给 UI。我的应用程序接收数据（整数类型）真正的 io 流并显示在`TextView`.

我的 Activity 类如下所示：

```
public class DeviceView extends Activity {
    TextView dataX;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.device_view);

        dataX = (TextView) findViewById(R.id.datax);

        handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                dataX.setText(String.valueOf(msg.arg1));
            }
        };

    }
} 
```

我还有一个单独的类，它扩展了 Thread：

```
public class IOThread extends Thread {

    public void run() {
        byte[] buffer = new byte[1024];
        int data;
        while (true) {
            try {
                data = in.read(buffer);
                Message message= Message.obtain();
                message.arg1= data;
                DeviceView.handler.sendMessage(message);
            } catch (IOException ex) {
                break;
            }
        }
    }
} 
```

我是否必须创建一个单独的变量类型`String`并将其指向变量数据并最后调用计数？这足以更新`TextView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:42:42.763

你可以尝试使用接口。让Activity实现它，传递给IOThread类。获得结果后，将结果传递给 Activity。

> 名为 InterfaceData 的接口

## 公共无效getData（int数据）；

```
public class DeviceView extends Activity implements InterfaceData{

        TextView dataX;
        Handler handler;
        IOThread ioThread;
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.device_view);
            handler = new Handler();
            ioThread = new IOThread(this);
            dataX = (TextView) findViewById(R.id.datax);

        }

        @Override
        public void getData(int data){
           handler.postDelayed(new Runnable(){
           public void run(){
             dataX.setText(data);
            };
          },100);
        }

    }

> Thread class

    public class IOThread extends Thread {

       InterfaceData interfaceData;
       public IOThread(InterfaceData interfaceData){
         this.interfaceData = interfaceData;
       }

        public void run() {
            byte[] buffer = new byte[1024];
            int data;
            while (true) {
                try {
                    data = in.read(buffer);
                   interfaceData.getData(data);
                } catch (IOException ex) {
                    break;
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:32:30.623

我发现我的问题不是处理程序问题。我在开头发布的代码是正确的。问题在于我从 InputStream 读取接收到的 bytes[] 数组的方式。我已经通过发送一个整数进行了测试`int numbers = (int) 2`，当在 Android 应用程序的终端中打印这个接收数据时，它只接收到 1，即使我发送 int 3 或 4，我仍然接收到 1。

所以我很喜欢你的示例代码@dcanh121，但我的问题实际上是我如何正确读取服务器发送的整数？

```
public void run() {
byte[] buffer = new byte[1024];
int data;

while (true) {
    try {

        data = in.read(buffer);
                Log.d(TAG + data, "test");
        Message message = Message.obtain();
        message.arg1 = data;                
        Log.d(TAG + message.arg1, "test");
        DeviceView.handler.sendMessageDelayed(message, 100);

        } catch (IOException ex) {
        Log.e(TAG_IOThread, "disconnected", ex);
        break;
        }
    }
} 
```

# scroll - 在 Twitter Bootstrap 的 ScrollSpy 中，我究竟可以在哪里放置 data-spy="scroll"？

> ID：11658755
> 
> 赞同：6
> 
> 时间：2012-07-25T21:15:16.663
> 
> 标签：scroll, twitter-bootstrap

文档上写的很清楚

> 只需将 data-spy="scroll" 添加到您要监视的元素（通常是正文）

但似乎只有把它放在身上才能让它发挥作用。当我将它放在我希望监视的任何其他元素中时，导航的最后一个元素被选中。

[在这里](http://jsfiddle.net/q7kkT/)，它在身体上，它可以工作，[这](http://jsfiddle.net/6AHar/)是完全相同的事情，但`data-spy="scroll"`在我想要监视的元素上，它失败了（只有最后一个元素被激活）。

我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T13:23:16.337

您的第二个示例可以使用以下方法修复：

```
#TryToPutDataSpyHere{
  display:inline;
} 
```

但由于某种原因，它不适用于演示

我设法从文档中重现了您的问题：http: [//jsfiddle.net/baptme/KbphR/](http://jsfiddle.net/baptme/KbphR/)

但它只有在我有以下 css 代码（在文档中使用）时才有效：

```
.scrollspy-example {
  height: 200px;
  overflow: auto;
  position: relative;
} 
```

[http://jsfiddle.net/baptme/KbphR/1/](http://jsfiddle.net/baptme/KbphR/1/)

看起来`height: 200px;`而且`overflow: auto;`都是必要的

不是你的情况可能是因为你的`.box{height: 500px;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:20:29.727

我有一个类似的问题，滚动间谍只能在标签上工作，所以我实际上进入引导 js 找到了 Scroll spy (SCROLLSPY CLASS DEFINITION) 部分并更改了这一行：

> , $element = $(element).is('body') ? $（窗口）：$（元素）

对此：

> , $element = $(element).is('body') ? $(window) : $(window) //$(元素)

（注意 // 后面的元素是注释所以我不会忘记我改变了它）

这为我解决了问题。

# javascript - Ember.js createRecord 可能不会触发

> ID：11658757
> 
> 赞同：0
> 
> 时间：2012-07-25T21:15:18.230
> 
> 标签：javascript, ember.js, local-storage, ember-data

我有一个将用户的搜索条件保存在 localStorage 中的应用程序，其中每个保存的搜索都表示为 Ember.js 模型的一个实例：

```
Checklist.SavedSearch = DS.Model.extend({
  id: DS.attr('string'),
  filters: DS.attr('string')
}); 
```

当按下“保存”按钮时，控制器会创建一个模型实例并为其创建一个记录：

```
Checklist.savedSearchController = Ember.ArrayController.create({
  [..]

  save: function(view) {
    var saved_seach = Checklist.SavedSearch.createRecord({
      id: 'abcd',
      filters: '<json>'
    });
    Checklist.local_store.commit();
  }
}); 
```

`Checklist.local_store`是我创建的一个适配器（不出所料，这可能是问题开始的地方），它有一个基本接口，可以将 , 等映射`createRecord`到`updateRecord`一组与 localStorage 一起使用的 get/set 方法（松散地基于[ember-data 的 github 分支](https://github.com/thomasboyt/data)） . 对于一些基本测试，适配器似乎可以正常工作，特别是`findAll`没有问题并返回手动添加到 localStorage 的值。

以下是相关方法`Checklist.local_store`：

```
createRecord: function(store, type, model) {
  model.set('id', this.storage.generateId);

  var item = model.toJSON({associations: true});

  this.storage.setById(this.storage_method, type, id, item);
  store.didCreateRecord(model, item);
} 
```

问题是当`createRecord`被控制器调用时，绝对不会发生任何事情。通过调试器运行它并记录到控制台，似乎表明该方法根本没有被调用。我想这是我对 Ember.js 应该如何工作的误解。我很感激为什么会发生这种情况的帮助。

我来自 ruby​​ 和 php 背景，并且可能愚蠢地直接潜入了 JS 框架，因此欢迎对代码样式、结构和任何其他内容提出任何其他意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T22:20:30.610

Ember Data 不会`createRecord`在控制器上更改，因此它的行为不应有任何不同。过去可能有与此相关的事情，但现在肯定不是这样了。

# java - 更新 Arrayadapter 中的数据

> ID：11658758
> 
> 赞同：13
> 
> 时间：2012-07-25T21:15:19.877
> 
> 标签：java, android, android-widget, android-arrayadapter

我有这个问题，我有

```
private ArrayList<CustomItem> items; 
private ArrayAdapter<CustomItem> arrayAdapter; 
```

我显示项目中存在的数据，我在列表视图中看到的这些数据，现在我想更新数据并查看这些新数据

```
if (!items.isEmpty()) {
    items.clear(); // i clear all data
    arrayAdapter.notifyDataSetChanged(); // first change
    items = getNewData();// insert new data and work well
    arrayAdapter.notifyDataSetChanged();  // second change                                      
} 
```

在第一次更改中，我看到数据已被清理，但在第二次更改中，我没有在 listview 中看到新数据，我检查并且项目不为空

我不知道错误在哪里，你能帮我吗？最好的问候安东尼奥

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-11-24T09:37:11.760

这就是我用新数据更新适配器的方式：

```
 if (arrayAdapter == null) {
                arrayAdapter = new CustomArrayAdapter(getActivity(), data);
                listview.setAdapter(userAutoCompleteAdapter);
            } else {
                arrayAdapter.clear();
                arrayAdapter.addAll(newData);
                arrayAdapter.notifyDataSetChanged();
            } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T21:19:07.793

假设 getNewData() 函数返回`ArrayList<CustomItem>`，您可以更改该行：

```
items=getNewData(); 
```

到

```
items.addAll(getNewData()); 
```

看看这是否有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-13T20:30:02.877

`ArrayList`您在类中创建的是一个引用变量，它通过构造函数（当您初始化对象时）在您的类`Activity`中持有相同的引用。`ArrayList``Adapter``Adapter`

但是，通过执行`items = getNewData()`，您为类中的 分配了一个新引用，`items`您的`Activity`类中的引用`Adapter`保持不变，因此您在屏幕上看不到任何变化。

* * *

就像这样：

personA：**Activity**类中的 ArrayList 对象

personB：**Adapter**类中的 ArrayList 对象

PersonA 和 personB 他们都拿着一张美国地图（分别），屏幕显示了 personB 的地图。然后有人用另一个国家的地图替换了personA的地图。猜猜看，屏幕仍然显示美国地图。

* * *

`items`您应该使用`add()`,或修改的数据`remove()`，而不是更改 的引用，然后调用.`clear()``addAll()``items``notifyDataSetChanged()`

# vba - 使用 VBA 更改 Excel 应用程序的标题栏颜色

> ID：11658759
> 
> 赞同：0
> 
> 时间：2012-07-25T21:15:21.157
> 
> 标签：vba, excel

我正在尝试在 Windows 7 机器上更改 excel（通常称为 Microsoft Excel 的部分）的状态栏颜色。

AFAIK 该`application`对象没有标题栏作为对象，并且在命令栏集合中也不可用。所以我需要使用系统设置，但我不想更改所有窗口的状态栏，所以我不能使用控制面板。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:27:01.707

你的问题引起了我的兴趣，所以我深入研究了谷歌搜索和几个论坛。我发现是这样的：似乎在 Windows 7 上编辑 excel 中的标题栏并不容易。

我发现在测试时立即起作用的唯一代码是更改 excel 工作簿上的标题：

```
Sub NameOfSub() 

Application.Caption = "MyApplication"

End Sub 
```

除此之外，Aura（Aero？）过去确实曾被用来改变办公室的某些部分，但我不确定它在 Windows 7 中的用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:22:48.803

很久以前，有一个实用程序可以通过（1）图标的主颜色或（2）应用程序的标题（用户定义）来调整颜色。

试试谷歌“Aura”，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T08:08:45.383

几天前我遇到了同样的问题，发现如果你不使用它是可能的， `Application.DisplayStatusBar = True` 只写你需要的地方 `Application.StatusBar = "text here"` 并且条的颜色不会改变。

# linux-kernel - ELF 可执行二进制文件中的段映射不正确

> ID：11658763
> 
> 赞同：0
> 
> 时间：2012-07-25T21:15:36.913
> 
> 标签：linux-kernel, linux-device-driver, elf

我正在使用 readelf 命令分析 ELF 文件。我查看了程序头和节头，但发现并非所有节都映射到一个段。我提供了部分 readelf 输出：

```
Section Headers:
[Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
[ 0]                   NULL            00000000 000000 000000 00      0   0  0
[ 1] ddr_data_nc_wt    NOBITS          70001800 0000b4 000000 00   W  0   0  1
[ 2] ddr_data_c_wb     NOBITS          70001800 0000b4 000000 00   W  0   0  1
[ 3] ddr_text_c        NOBITS          70001800 0000b4 000000 00   X  0   0  1
[ 4] m2_textboot_c     LOPROC+0        b0000000 0000c0 0023cc 00  AX  0 2952790016  2
[ 5] m2_text_c         LOPROC+0        38000000 002490 004d22 00  AX  0 2952799232 16
[ 6] m2_data_c_wb      LOPROC+5        70000000 0071c0 0006a8 00  WA  0 2952819200  2
[ 7] data_boot_c       LOPROC+5        20000000 007870 000100 00  WA  0 2953019392  4

Key to Flags:
W (write), A (alloc), X (execute), M (merge), S (strings)
I (info), L (link order), G (group), x (unknown)
O (extra OS processing required) o (OS specific), p (processor specific)

There are no section groups in this file.

Program Headers:
Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
LOAD           0x0000c0 0xb0000000 0xb0000000 0x023cc 0x023cc R E 0x2
LOAD           0x002490 0xb0002400 0xb0002400 0x04d22 0x04d22 R E 0x10
LOAD           0x0071c0 0xb0007200 0xb0007200 0x006a8 0x017a8 RW  0x2
LOAD           0x007870 0xb0038000 0xb0038000 0x00100 0x08000 RW  0x4

Section to Segment mapping:
Segment Sections...
  00     m2_textboot_c
  01
  02
  03

There is no dynamic section in this file.

There are no relocations in this file.

There are no unwind sections in this file. 
```

我发现只有 m2_textboot_c 部分被映射到 Segment 00，但没有提及其他部分的映射位置。你能告诉我什么可能是错的，应该怎么做吗？

另外，我想知道是否有任何机制可以使用节头而不是程序头将 ELF 二进制文件加载到处理器上。我遇到的每个在线帮助都使用程序头文件加载二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:10:06.570

> 我发现只有 m2_textboot_c 部分被映射到 Segment 00，但没有提及其他部分的映射位置

您可能已经使用“自定义”链接描述文件链接了这个 ELF 图像。*该*脚本控制部分到段的映射，并且它（显然）没有执行您希望它对其他部分执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T20:48:38.800

我猜 readelf 通过查看虚拟地址来执行节地址到段的反向映射。您的段跨越虚拟地址空间 0xb0000000-0xb0040000，并且该地址空间中包含的唯一部分确实是 m2_textboot_c。

记住这一点，您可能应该将 m2_text_c 和 m2_data_c_wb 部分分别重新映射到 0xb0002400 和 0xb0007200，以便它们匹配第二个和第三个代码段。

# webserver - Web 服务器错误：消息：在 WAS 7 中缺少键“”的消息

> ID：11658765
> 
> 赞同：0
> 
> 时间：2012-07-25T21:15:45.703
> 
> 标签：webserver, websphere, websphere-7

我正在尝试在`Servers ---> Server Types ----> Web Servers`---->新建下创建网络服务器

![在此处输入图像描述](../Images/c01a0231c953f16840fd61ab634e1b45.png)

**错误 ：**

处理请求时发生错误：消息：缺少密钥“”的消息

```
javax.servlet.jsp.JspException: Missing message for key ""
    at org.apache.struts.taglib.bean.MessageTag.doStartTag(Unknown Source)
    at _ibmjsp.secure.layouts._stepsLayout._jspService(_stepsLayout.java:1040)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:98)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:121)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:239)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:341)
    at org.apache.struts.action.RequestProcessor.doForward(Unknown Source)
    at org.apache.struts.tiles.TilesRequestProcessor.doForward(Unknown Source)
    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(Unknown Source)
    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(Unknown Source)
    at com.ibm.isclite.container.controller.InformationController.processForwardConfig(InformationController.java:217)
    at org.apache.struts.action.RequestProcessor.process(Unknown Source)
    at org.apache.struts.action.ActionServlet.process(Unknown Source)
    at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:341)
    at org.apache.struts.action.RequestProcessor.doForward(Unknown Source)
    at org.apache.struts.tiles.TilesRequestProcessor.doForward(Unknown Source)
    at org.apache.struts.action.RequestProcessor.processForwardConfig(Unknown Source)
    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(Unknown Source)
    at com.ibm.isclite.container.controller.InformationController.processForwardConfig(InformationController.java:217)
    at org.apache.struts.action.RequestProcessor.process(Unknown Source)
    at org.apache.struts.action.ActionServlet.process(Unknown Source)
    at org.apache.struts.action.ActionServlet.doPost(Unknown Source)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistence(WSCUrlFilter.java:927)
    at com.ibm.ws.console.core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:494)
    at com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:315)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3826)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:288)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1016)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyReadCompletedCallback.complete(SSLConnectionLink.java:639)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1772)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550) 
```

如下所示，

![在此处输入图像描述](../Images/19ec321bb3ed2fc8b64e3c33198d66cc.png)

没有启动和运行日志服务。当我在删除旧服务器（不正确的服务器）后尝试创建新服务器时遇到了这个问题。

有趣的是，当我尝试注销时，它会显示已删除的服务器详细信息，如下所示

![在此处输入图像描述](../Images/911cb789e19b5e490ac73eb8937324fb.png)

***在 Precise WAS 中寻找删除后不存在的文件（浏览目录）***

```
:/u01/profiles.7.0.0.11/appsrv01/config/cells / taspmociias304Cell01 / nodes / webserver1-node / node.xml 
```

为什么我删除了？

```
Named wrong host-name, i.e instead of appsrv01 i named webserver1-node 
```

此路径中确实存在有效路径

```
:/u01/profiles.7.0.0.11/appsrv01/config/cells/taspmociias304Cell01/nodes/appsrv01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:13:37.187

是的！正如你们提到的。这是产品缺陷。

# security - 保护 p2p 网络，以便中间节点无法访问正在传输的数据包的内容

> ID：11658771
> 
> 赞同：2
> 
> 时间：2012-07-25T21:15:54.690
> 
> 标签：security, networking, p2p, distributed-computing

已经存在哪些机制来设计 P2P 架构，其中不同的节点单独工作，以便拆分任务（例如分布式渲染 3D 图像），但与种子不同的是，它们看不到或劫持正在传输的数据包的内容？只有原始任务请求者有权查看？完成任务的结果。

已经有任何关于该原则的工作实现了吗？

编辑：也许我错误地提出了这个问题。这个想法是，即使它们能够处理正在发送的单独数据包的内容，单独的节点也永远没有机会组装整个图片。只有请求任务的人应该这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:07:27.660

如果您有直接的 P2P 连接（没有“混杂”或“多播”类型的模式），则接收对等方应该只“看到”发送给他们的数据，没有别的。

如果您在途中有中继服务器并且您担心它们可以嗅探数据，我相信加密是要走的路。

我们所做的是对等点 A 在 S/MIME 信封中向对等点 B 传输数据：内容使用对等点 A 的私钥签名并使用对等点 B 的公钥加密。

只有对等方 B 可以解密数据，并保证对等方 A 实际发送了数据。

这整个过程是昂贵的 CPU 和字节明智的，可能不适合您的应用程序。它还需要某种形式的密钥管理基础设施：对等点需要订阅一个颁发证书的社区。

但基本思想就在那里：使用密钥或共享秘密加密的非对称加密。

# c# - 序列化属性的内容，而不是属性名称？

> ID：11658775
> 
> 赞同：2
> 
> 时间：2012-07-25T21:16:12.290
> 
> 标签：c#, asp.net, xml

下面列出的 C# 类生成此 XML：

```
<Standardize><TestString>Some Data</TestString></Standardize> 
```

但是，我想要的是这样的：

```
<Standardize>Some Data</Standardize> 
```

换句话说，我希望 TestString 属性的内容显示在 XML 中，但我不希望 TestString 属性被列为元素。我可以添加一些属性来实现这一点吗？

```
 /// <Serialized C# Class/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://test.com/Services/1")]
    public partial class Standardize {

        private string testField;

        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.None, IsNullable=true, ElementName=null)]
        public string TestString {
            get {
                return testField;
            }
            set {
                testField;= value;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:39:11.017

`TestString`用[`XmlText`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltextattribute.aspx)代替装饰`XmlElement`。

# jquery - jQuery UI 选项卡样式删除选项卡和内容之间的小空间/间隙并删除选项卡底部边框圆度

> ID：11658776
> 
> 赞同：0
> 
> 时间：2012-07-25T21:16:16.060
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

好的，在我正在处理的继承项目中，我一直在使用选项卡，并且样式似乎与我尝试添加的新选项卡集几乎可以流畅地工作，但是我的似乎有各种各样的差距标签本身和下面的内容。这很好，除了选项卡下方的边框在选择选项卡时不会隐藏，也可以说未选择的选项卡似乎停留在同一边框上，留下间隙的错觉。更糟糕的是，边框必须非常小的圆形边缘指向上方，这对我来说看起来有点俗气，我也想解决这个问题。

我不确定我必须更改哪些类才能使未选择的选项卡停留在边框上，而我假设选定的选项卡悬停在边框上刚​​好足以覆盖它，给人一种现在缺少那条边框的错觉。我也不知道我必须更改哪些类才能使边界停止向上舍入。

这是我正在谈论的内容的屏幕截图，以帮助我试图解释的内容。 ![在此处输入图像描述](../Images/16d13a6e5cfadddd96d268a79e1b8526.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T23:25:12.383

您可以收紧 HTML 以删除字符空间或更新 CSS 属性值，例如：display: table-cell;

# ruby-on-rails - 加入模型范围后的空数据集

> ID：11658780
> 
> 赞同：0
> 
> 时间：2012-07-25T21:16:35.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3

2个具有名称范围的模型：

A 类作用域：active, where("active = ?", true) end

B 类作用域：active, where("active = ?", true) end

在我的控制台中：

A.active 和 B.active 个人我得到了正确的记录。所以这很好用。

现在我想用 & 符号在一个查询中加入 2 个作用域，如下所示：

A.主动 & B.主动

结果没有错误但是数据集是空的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:50:21.770

当然是 - & 是数组交集，而由于 A.active 只包含 As 和 B.active 只包含 Bs，所以交集永远是空的。也许你只是想要串联？见 [http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26) 和 [http://www.ruby-doc.org/core-1.9.3/Array.html #method-i-2B](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2B)

# c# - 将 Ninject 替换为 Simple Injector

> ID：11658786
> 
> 赞同：5
> 
> 时间：2012-07-25T21:17:04.800
> 
> 标签：c#, dependency-injection, ninject, automapper, simple-injector

我在我的应用程序中使用了 Ninject。Ninject 非常简单易学，但速度很慢，我尝试使用另一个 IoC 来比较它是否比 Ninject 更快。

有很多用于 MVC3 的 IoC 容器，并且 Simple Injector 对我来说看起来非常好，但是我在用[Simple Injector](http://simpleinjector.codeplex.com/)替换 Ninject 时遇到了很多问题。

特别是与`AutoMapper`. 我尝试将这些行转换为 Simple Injector 代码。

```
Bind<ITypeMapFactory>().To<TypeMapFactory>();

foreach (var mapper in MapperRegistry.AllMappers())
{
    Bind<IObjectMapper>().ToConstant(mapper);
}

Bind<ConfigurationStore>().ToSelf().InSingletonScope()
    .WithConstructorArgument("mappers",
        ctx => ctx.Kernel.GetAll<IObjectMapper>());

Bind<IConfiguration>()
    .ToMethod(ctx => ctx.Kernel.Get<ConfigurationStore>());

Bind<IConfigurationProvider>().ToMethod(ctx =>
    ctx.Kernel.Get<ConfigurationStore>());

Bind<IMappingEngine>().To<MappingEngine>() 
```

你能帮帮我吗？我已经阅读了文档并用谷歌搜索，但到目前为止还没有解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T22:07:10.340

这个 Ninject 注册大致翻译为以下 Simple Injector 注册：

```
container.Register<ITypeMapFactory, TypeMapFactory>();
container.RegisterCollection<IObjectMapper>(MapperRegistry.AllMappers());
container.RegisterSingleton<IConfiguration, ConfigurationStore>();
container.RegisterSingleton<IConfigurationProvider, ConfigurationStore>();
container.Register<IMappingEngine, MappingEngine>(); 
```

# api - 我必须在 Zend GData 电子表格中进行哪些更改才能请求 Google 电子表格 API 的第 3 版？

> ID：11658787
> 
> 赞同：0
> 
> 时间：2012-07-25T21:17:10.090
> 
> 标签：api, zend-framework, google-maps-api-3, spreadsheet, gdata

“重要提示：Google 电子表格 API 的版本 1 和 2 已于 2012 年 4 月 20 日正式弃用，并将于 2012 年 10 月 20 日关闭。迁移到 v3 应该很简单，因为它包含 v1 和 v2 的所有功能，因此您只需要停止为您的请求指定 v1 或 v2。我们建议您更新您的应用程序以尽快将请求发送到 v3。 [https://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

我使用 Zend Gdata 1.11.12 访问 Google Speadsheets Api。

**我必须在 Zend GData 电子表格中进行哪些更改才能请求 Google 电子表格 API 的版本 3？**

亲切的问候，

扬诺德格林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:07:14.753

您不需要更改代码中的任何内容，PHP 客户端库已经使用了最新版本的电子表格 API。如果不是这种情况，您始终可以将查询参数附加`v=3`到您的请求中，以将请求发送到 API 版本 3。

# android - 构建android框架资源

> ID：11658794
> 
> 赞同：2
> 
> 时间：2012-07-25T21:17:59.040
> 
> 标签：android, android-resources, android-framework

我正在尝试从开源存储库构建自定义 Android 映像，并在 android 基本框架代码中进行更改（资源和 Java 代码更改），我有几个关于如何构建我的更改而不必清理并重建整个系统。

我对它的理解是，我可以`mmm frameworks/base`在进行更改后执行此操作，并且会自动`framework-res.apk`在`out/target/product/<my-config>/system/framework/`.

但它看起来`mmm frameworks/base`什么都不做。我必须手动执行`mmm frameworks/base/core/res`才能`framework-res.apk`编译，然后重做`mmm frameworks/base`以重新编译 JAR。

这正常吗？为什么`mmm`frameworks/base `recompile everything? Plus, the`/out/target/common/R/com/android/internal/R.java`file that is used by Eclipse to locate the resources is never re-generated unless I do a whole`不做clobber；制作`which takes forever. How can I simply re-generate the`R.java` 文件。

附加问题：我想将一些第三方 APK 添加到我的 ROM 中，我将它们与我的主 mk 脚本中包含`/vendor/<vendor-name>/`的文件一起放入。`Android.mk`apk 被复制到`/out/target/product/<my-config>/system/app`，但不包含在`system.img`映像中。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:47:34.347

希望这对您有所帮助：[构建、运行和调试 Android 源代码](http://devtcg.blogspot.in/2009/03/building-running-and-debugging-android.html)

# iphone - 创建一个可以嵌入到另一个视图中的 UIScrollView

> ID：11658795
> 
> 赞同：0
> 
> 时间：2012-07-25T21:18:11.723
> 
> 标签：iphone, ios, uiscrollview, scroll, uipickerview

我正在尝试构建一个可以添加到多个视图的自定义、可重复使用的 UIScrollView。滚动视图将成为一个权重选择器。在我的一生中，我找不到一个像样的例子来说明如何整齐或干净地实现这一点。

我希望有人能将我指向一个现有的库或教程，向我展示如何做到这一点。我已经破解了几个例子，但到目前为止，没有什么是非常好的或可重用的。请帮忙！！

对于它的价值，我有一个图像，每个人都为重量打勾。所以我可以选择数字的十分之一（例如160.4）。该图像的第一个刻度粗体并且大于其余 9 个。我希望重量/数字位于大刻度的中心。滚动停止后，我会将这些点更新到我的标签/数据源。

*更新* 我需要做这个。我有自定义字体、背景和股票代码图像。

![重量选择器](../Images/042382322fc00a115b5769ccd86a816f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:59:26.910

我不会通过`UIScrollView`. 我认为它会更复杂，当您尝试将自定义选择器添加到另一个滚动视图时，您肯定会遇到问题。

我会做的是：

1.  通过一系列 CALayers 构建选择器视图，每个 CALayer 代表选择器视图的“构建块”；见附图：

    ![在此处输入图像描述](../Images/4c6296591c758c4e8f45f333ef097bd6.png)

2.  每个构建块将通过混合 UILabel（文本）和图像来表示特定值；

3.  使用平移手势识别器，或者定义`touchesBegin/Moved/Ended`方法来处理平移；

4.  平移完成后，根据平移将视图内容向左或向右移动；

5.  平移时，您还可以在选择器的左端或右端添加新的构建块，以解决将在第 4 点完成的位移显示的空白区域。

我认为看看另一种自定义控件的源代码会对你有很大的帮助。您可能不会发现您的自定义选择器已经实现，但可以获得一些指导。然后看看[可可控件](http://www.cocoacontrols.com/)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T22:07:00.293

如果我要实现这个，我会创建一个非常宽的图像，它具有我所需要的所有重量——我可能会在应用程序启动时在代码中创建它。然后将此图像用作选择器的 contentView。您可以“免费”获得所有滚动功能，甚至可以在滚动（或拖动）期间更新视图其他部分中显示的值。

scrollView 只是带有刻度线和重量数字的区域，位于背景上方的子视图中，但位于显示实际重量的居中垂直线下方。

编辑：再三考虑，忘记图像。如果您有绘制图像的代码，则可以在自定义 UIView 中进行绘制。所以你得到了draw rect，你知道contentOffset，所以你可以画出你需要的东西。

# php - PHP 或 Linux Shell：将文本文件减少到只有最后 10 个字符的最快方法

> ID：11658796
> 
> 赞同：-1
> 
> 时间：2012-07-25T21:18:12.560
> 
> 标签：php, linux

我需要在 PHP 或 Linux Command Shell 中使用最快的方法来减少文本文件以仅保留最后 10 个字符。需要明确的是，我需要在同一个文件上进行缩减。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:22:20.160

外壳`tail`命令：

```
tail filename.txt --bytes 10 > filename.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:25:57.423

我想这更短:)

```
tail -c 10 filename.txt > filename.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:21:47.363

这是一个 PHP 解决方案 - 但是，如果您不想从 PHP 脚本执行此操作，最好使用 shell 解决方案。

查找文件末尾减去 10 个字节（假设一个字符为一个字节），然后用最后十个字符覆盖文件：

```
$fp = fopen('filename', 'a');
fseek($fp, -10, SEEK_END);
$data = fread($fp, 10);
fclose($fp);
file_put_contents('filename', $data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T23:11:18.097

带来一些多样性:)

```
dd if=./filename.txt of=./result.txt bs=1 skip=$((`wc -c < filename.txt`-11)) 
```

# javascript - 带有总和的 jQuery 选择器

> ID：11658797
> 
> 赞同：4
> 
> 时间：2012-07-25T21:18:20.710
> 
> 标签：javascript, jquery, html, sum

我不知道我的问题的好标题，这就是我没有搜索的原因。

我的问题如下：

我有一个 HTML 代码，例如：

```
<input type="text" id="product_qty_1" value="12" />
<input type="text" id="product_qty_2" value="21" />
<input type="text" id="product_qty_3" value="45" /> 
```

我想通过 jQuery 对值求和，但这需要是自动的，因为我们不知道`inputs`有多少。

我不知道如何处理选择器`input[id*="product_qty_"]`以使其正常工作，并对这些值求和！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:19:44.107

```
var total=0;

$("input[type='text']").each(function() {
    total += parseInt(this.value, 10);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T21:19:33.487

你可以使用 jQuery 的[`each`](http://api.jquery.com/each/)循环：

```
var sum = 0;
$('input[id*="package_qty_"]').each(function() {
    sum += parseInt(this.value, 10);
});
alert(sum); 
```

# c# - 在不更改文本颜色的情况下阻止来自 listBox 的用户输入

> ID：11658798
> 
> 赞同：0
> 
> 时间：2012-07-25T21:18:23.793
> 
> 标签：c#, winforms, user-interface, user-controls, listbox

如何在不更改文本颜色的情况下阻止列表框上的用户输入（即更改选定的索引），就像您只是在控件上将 enabled 属性设置为 false 一样？

这是针对 WinForms 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:36:33.260

最好的选择是不这样做——相反，在这种情况下，只填充您想要显示/选择的一项。

否则，您需要： - 记住当前选择 - 处理 OnSelectedIndexChanged - 重置选择（处理潜在递归）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:48:48.160

*我假设您想要用户无法*更改的 ListBox 中的默认选择？我最喜欢解决这个问题的方法是禁止用户访问 ListBox。您可以通过在 ListBox 上添加一个[`GotFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.gotfocus.aspx)事件并在 ListBox 获得焦点时将 Focus 设置为另一个控件来实现此目的。像这样的东西：

```
private void listBox1_GotFocus(Object sender, EventArgs e) {

   this.Select();//set the form as the active control or even this.Focus();

} 
```

# asp.net-mvc - 在移动 MVC 站点中执行 Jquery

> ID：11658805
> 
> 赞同：1
> 
> 时间：2012-07-25T21:18:48.053
> 
> 标签：asp.net-mvc, jquery-mobile

我正在使用 Visual Studio 中的 jquery 移动模板。在我的布局视图中，我有以下标记

```
 <div data-role="page"  @(Page.Id == null ? string.Empty : "id=" + Page.Id) data-fullscreen="false"> 
```

当我的浏览视图呈现时，我想将数据全屏属性更改为 true。这是我试图用来执行此操作的代码..

```
<script type="text/javascript">
  $("#indexPage").live('pageinit', function () {
            alert("Code Engaged");
            $("#div").attr("data-fullscreen", "true");
        });
</script> 
```

我无法使用此代码。我在哪里放置代码来参与它？布局有几个部分..

```
<head>
  <meta charset="utf-8" />

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame 
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>@Page.Title</title>
  <meta name="description" content="jQuery Mobile Site">
  <meta name="author" content="">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  @*<meta name="viewport" content="width=device-width, initial-scale=1.0">*@
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">

  <!-- jQuery Mobile Latest Styles -->
  <link rel="stylesheet" href="//code.jquery.com/mobile/latest/jquery.mobile.min.css" />

  @* // reference the minified version of our combined css based on whether we are in debug mode. *@
  @if (jQueryMobileTemplate.MvcApplication.IsDebug)
  { 
   @* <link rel="stylesheet" href="@Url.Content("~/css/style.css?v=2")" />*@
     <link rel="stylesheet" href="@Url.Content("~/css/custom%20themes/electric1.css?v=2")" /> 

  }
  else
  {
   @* <link rel="stylesheet" href="@Url.Content("~/css/style.min.css?v=2")" />*@
       <link rel="stylesheet" href="@Url.Content("~/css/custom%20themes/electric1.min.css?v=2")" />

  }

  <!-- Grab Google CDN's jQuery. fall back to local if necessary -->
  <!-- We put these at the top because jquery mobile applies styles before the page finishes loading -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js">

  </script>
  <script>      window.jQuery || document.write("<script src='@Url.Content("~/js/libs/jquery-1.6.1.min.js")'>\x3C/script>")</script>

  <!-- Pre jQuery Mobile init scripts for overriding defaults -->
  <script>

  </script>

  <!-- Load jQuery Mobile from jquery cdn, get latest builds -->
  <script src="//code.jquery.com/mobile/latest/jquery.mobile.min.js">

  </script>
  @* <!-- Optionally, load from local site -->
    <script src="@Url.Content("~/js/libs/jquery.mobile-1.0b1.js")"></script>
  *@

  @RenderSection("HeadContent", false)

  @*<script src="@Url.Content("~/js/libs/modernizr-2.0.min.js")"></script>
  <script src="@Url.Content("~/js/libs/respond.min.js")"></script>*@

</head> 
```

我也在“浏览”视图的底部尝试过，但没有。我只希望“浏览”视图执行此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:42:45.143

`pageinit`当我使用 asp.net-mvc 时，由于某种原因，该事件也从未对我正常工作。您可以尝试改用其中一个[页面更改事件](http://jquerymobile.com/test/docs/api/events.html)(`pagebeforechange`或`pagechange`)。

# objective-c - 如何在不同时间将多个对象写入 plist 以及删除条目？

> ID：11658806
> 
> 赞同：0
> 
> 时间：2012-07-25T21:18:55.383
> 
> 标签：objective-c, ios, xcode, plist, xcode4.3

我的程序有一个带有条目列表的 tableView，您可以将 table View 中的每个项目添加到“收藏夹”中。我一直将信息存储在 plist 中，但是我不确定是否可以在不同时间存储多个对象，或者它是否会继续用新条目覆盖 plist？也可以从plist中删除条目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:56:23.593

我在理解您的问题时遇到了一些麻烦。

你如何存储你的数据？

A. 如果您的数据在 NSArray\NSMutableArray 中，您可以调用`writeToFile:`数组来保存数组的当前状态，然后在修改数组后插入或删除项目，您可以调用`writeToFile:`以更新您的 plist。NSMutableArray 将允许您进行所有这些修改。

B. 如果您想要更多低级控制，您可以使用 XML plist。但这将是更多的工作......

# cakephp - CakePHP 重定向错误

> ID：11658811
> 
> 赞同：0
> 
> 时间：2012-07-25T21:19:13.420
> 
> 标签：cakephp, redirect

我在调用[query()](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-query)数据库时收到一个[奇怪的错误。](https://stackoverflow.com/questions/11658441/mssql-run-stored-procedure-multiple-times-concurrently)这通常不会成为问题，只是查询调用似乎将我重定向到 500 服务器错误页面并且没有执行我的其余代码。

无论错误如何，此 PHP 都会在 AJAX 调用期间执行，这意味着我无法返回包含错误的格式正确的 json 字符串，因为 CakePHP 正在重定向。

一种解决方法是在出现错误时仅解析来自服务器的大 HTML 响应，并使用 javascript 找出问题所在并正确显示它，但我更愿意从后端返回一个播放良好的小 json 字符串使用我已有的代码。

这是我的电话：

```
$this->FileUpload->query('exec sproc_runjob_ProcessTests', false); 
```

任何帮助将非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:52:12.520

正如[bfavaretto](https://stackoverflow.com/users/825789/bfavaretto)上面提到的，正确的答案是在 try catch 中包围查询行。

这是我使用的代码：

```
try{
    $this->dbParent->FileUpload->query('exec sproc_runjob_ProcessTests', false);
} catch(PDOException $e){
    if($e['errorInfo'][0] == 42000 && $e['errorInfo'][1] == 22022)
        return array('error' => 'sproc_blocked');
}
return array('success'=>true); 
```

# android - Android：使用预加载的数据库文件是否安全？

> ID：11658812
> 
> 赞同：0
> 
> 时间：2012-07-25T21:19:24.340
> 
> 标签：android, sqlite

在用户能够在我的应用程序中执行任何操作之前，我有大量数据要插入到 sqlite 数据库中。现在我将所有数据存储在 CSV 文件中，然后我解析这些文件并使用[DatabaseUtils.InsertHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)进行批量插入，但这需要很长时间才能完成。

前段时间我偶然发现了[本教程，我想知道：分发预生成的 sqlite 文件是否安全？](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)由于不同设备上的 SQLite 版本不同，我会遇到问题吗？

我计划支持 Android 2.1 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:31:22.803

我想这取决于您对安全的定义。只要数据库符合 Android 期望的元数据表规范，这当然是可能的，这就是您偶然发现的教程向您展示的内容。您不必担心与 SQLite 的版本冲突，因为这是一个内置于核心平台的包，不是 OEM 添加或在其上实现任何东西的东西。

但是，如果安全是指“受保护”，则需要采取特殊步骤来确保您的数据库在外部不可读（如果这是一个问题）。如果您只是将预先构建的 DB 放入`assets/`并复制过来，任何可以正确解构 APK 文件的人都可以查看您的数据库数据。这对您来说可能是也可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:19:10.043

最好的方法是将这些数据填充到数据库中，将数据库保存在资产中，然后将其复制到设备中……[您可以在此处遵循此完整示例代码](https://stackoverflow.com/questions/9109438/using-already-created-database-with-android/9109728#9109728)。

# java - 使用什么类加载器？

> ID：11658816
> 
> 赞同：7
> 
> 时间：2012-07-25T21:19:46.070
> 
> 标签：java, classloader, contextclassloader

我有几个关于类加载器的问题。

```
Class.forName("class.name"); 
```

和

```
....
NotYetLoadedClass cls = new NotYetLoadedClass();
..... 
```

在每种情况下将使用哪些类加载器？对于第一种情况，我假设类加载器用于加载执行方法代码的类。在第二种情况下，我假设线程上下文类加载器。

万一我错了，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:42:09.933

两者都使用当前的`ClassLoader`. 正如 DNA 正确指出的那样，[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29) ://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29声明`Class.forName()`使用当前的类加载器。一个小实验表明，使用该`new`语句为实例化加载的类也使用 current `ClassLoader`：

```
public class Test
{
    public static void main(String[] args) throws Exception
    {
        Thread.currentThread().setContextClassLoader(new MyClassLoader());
        SomeClass someClass = new SomeClass();
        someClass.printClassLoader();
    }

    public static class MyClassLoader extends ClassLoader
    {
        public MyClassLoader()
        {
            super();
        }

        public MyClassLoader(ClassLoader parent)
        {
            super(parent);
        }
    }
}

public class SomeClass
{
    public void printClassLoader()
    {
        System.out.println(this.getClass().getClassLoader());
        System.out.println(Thread.currentThread().getContextClassLoader());
    }
} 
```

在`Test`我们将当前的线程 ContextClassLoader 设置为一些自定义`ClassLoader`，然后实例化一个类的对象`SomeClass`。在`SomeClass`我们打印出当前线程的 ContextClassLoader 和`ClassLoader`加载这个对象的类。结果是

```
sun.misc.Launcher$AppClassLoader@3326b249
test.Test$MyClassLoader@3d4b7453 
```

表示当前`ClassLoader`( `sun.misc.Launcher.AppClassLoader`) 用于加载类。

# transactions - model.commit() 和 dataset.commit() 的区别

> ID：11658818
> 
> 赞同：1
> 
> 时间：2012-07-25T21:20:07.687
> 
> 标签：transactions, jena, triplestore

我一直在将我的代码从使用没有事务的 TDB 支持的模型转换为使用有事务的 TDB 支持的模型。没有交易，据我所知（也来自[这个邮件列表帖子](http://mail-archives.apache.org/mod_mbox/jena-users/201204.mbox/%3C4F8C43A4.404@apache.org%3E)），没有交易，在修改数据集后，有必要调用`model.close()`以确保数据集正确同步并且自动同步`dataset.sync()`。

我注意到有两组控制事务的方法：
`dataset.begin()`and `dataset.commit()`, etc
`model.begin()`and `model.commit()`, etc

这两组方法有什么区别？呼叫是否`model.commit()`以与自动处理`dataset.commit()`相同的方式执行？`model.close()``dataset.sync()`

我希望这很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:08:10.003

`model.commit()`是在 SPARQL 中发明 RDF 数据集之前，当模型存储单元时设计的旧接口。

`dataset.begin`采用读/写标志。`dataset.begin(ReadWrite.READ)`. 通过知道它是一个读取事务，系统可以更有效地进行（以后没有可能写入的管理员），并且锁定也没有问题（两个事务在对其他视图进行读取时都尝试启动写入操作）。

TDB 事务是完全可序列化的并且在数据集级别工作。

TDB 事务允许写入程序在旧的读取事务仍处于活动状态时启动，因为自从读取事务开始以来新写入程序已提交的任何深度。不同的事务看到数据库的不同状态，每个状态都是一致的。没有脏读。

# jquery - dojo 在鼠标点击时显示地图坐标

> ID：11658826
> 
> 赞同：0
> 
> 时间：2012-07-25T21:20:33.683
> 
> 标签：jquery, dojo, cross-browser, gis

我是新人，正在拼凑一些东西来为我们部门制作一张基于网络的地图。我检查了所有主要的浏览器。我找不到任何错误或显示积分。这个脚本有什么问题？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy for Windows (vers 14 February 2006), see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>
  Your Cool Page With an AGRC Base Map
</title>
<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/2.1/js/dojo/dijit/themes/claro/claro.css">
<script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=2.1">
</script>
<script type="text/javascript">
dojo.require("esri.map");
     var map = {}

     var Init = function () {              
     map = new esri.Map("map", { logo: false });              
     var layer = new esri.layers.ArcGISTiledMapServiceLayer(                    
     "http://mapserv.utah.gov/ArcGIS/rest/services/UtahBaseMap-Hybrid/MapServer", 
     { id: "Hybrid" });              map.addLayer(layer);          };
     dojo.ready(Init);    

dojo.connect("map", "onClick", function(evt){ 
//get mapPoint from event and display the mouse coordinates 
var mp = evt.mapPoint; 
dojo.byId("info").innerHTML = mp.x + ", " + mp.y; 
    alert(mp.x);
}); 

</script>
   </head>
<body class="claro">
<div id="map"></div>
<p id="info">
  a
</p>
</body>
</html> 
```

# ruby-on-rails - Ruby on Rails：函数中的变量

> ID：11658829
> 
> 赞同：0
> 
> 时间：2012-07-25T21:21:08.600
> 
> 标签：ruby-on-rails, ruby, variables, model

我想知道我是否可以在以下函数中以某种方式使“stat”成为变量：

```
 def stats(stat)
    self.items.sum(:stat) + self.stat
  end 
```

我想知道如何使 self.items.sum(:stat) 中的 :stat 成为变量。我不确定语法。

对不起，如果这是一个可怕的新问题。

物品迁移：

```
class CreateItems < ActiveRecord::Migration
  def change
    create_table :items do |t|
      t.string :title

      t.text :content

      t.integer :price

      t.integer :strength
      t.integer :agility
      t.integer :intellect
      t.integer :will
      t.integer :perception

      t.integer :hearm
      t.integer :laarm
      t.integer :raarm
      t.integer :charm
      t.integer :llarm
      t.integer :rlarm

      t.integer :damage

      t.integer :hardpoints

      t.timestamps
    end
  end
end 
```

字符迁移：

```
class CreateCharacters < ActiveRecord::Migration
  def change
    create_table :characters do |t|
      t.string :name

      t.text :bio

      t.integer :strength
      t.integer :agility
      t.integer :intellect
      t.integer :will
      t.integer :perception

      t.integer :hearm
      t.integer :laarm
      t.integer :raarm
      t.integer :charm
      t.integer :llarm
      t.integer :rlarm

      t.integer :currency

      t.integer :user_id      

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:47:51.167

我确定你想要什么

```
def stats(stat)
  stat = stat.to_sym
  items.sum(stat) + read_attribute(stat)
end 
```

`stat = stat.to_sym`只是为了确保它是一个符号，所以你可以传递一个字符串并且它仍然可以工作，但如果你只传递符号则不需要。

所以你应该把它称为

`character.stats(:strength)`或者`character.stats('strength')`

# ruby-on-rails-3 - 如何在 DataTables gem 中解决此 JSON 方法的问题？

> ID：11658830
> 
> 赞同：0
> 
> 时间：2012-07-25T21:21:20.733
> 
> 标签：ruby-on-rails-3

我正在尝试实现 Railscast 340，它演示了如何使用 DataTables，它看起来对我的项目来说是一个很棒的宝石。

当然，我的模型不同。但是贝茨先生构建的数据表类（非常快），为了进行服务器端处理，遵循起来相当复杂。我得到了源代码，并且基本上试图跟随。我的观点提出了零记录（但有> 10,000条记录），但没有中断。

但是，以下是 rails 服务器在停止之前输出的错误消息：

```
NameError (undefined local variable or method `genotypes' for #<GenotypesDatatable:0xa9e852c>):
  app/datatables/genotypes_datatable.rb:12:in `as_json'
  app/controllers/genotypes_controller.rb:8:in `block (2 levels) in index'
  app/controllers/genotypes_controller.rb:6:in `index' 
```

就在此之前，似乎有这个 JSON 错误，它开始：

```
Started GET "/genotypes.json?sEcho=1&iColumns=8&sColumns=&iDisplayStart=0&iDisplayLength=10&mDataProp_0=... 
```

基因型控制器的相关部分如下所示：

```
 def index
     respond_to do |format|
      format.html
      format.json { render json: GenotypesDatatable.new(view_context) }
    end
  end 
```

我的基因型模型看起来像：

```
class Genotype < ActiveRecord::Base
  attr_accessible :allele1, :allele2, :run_date
  belongs_to :gmarkers
  belongs_to :gsamples

end 
```

我的数据表类如下。这是来自贝茨先生的代码，修改（很可能是错误的）用我的基因型模型替换他的产品模型：

```
class GenotypesDatatable
  delegate :params, :h, :link_to, to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Genotype.count,
      iTotalDisplayRecords: genotypes.total_entries,
      aaData: data
    }
  end

private

  def data
    genotypes.map do |genotype|
      [
        link_to(genotype.name, genotype),
        h(genotype.category),
        h(genotype.released_on.strftime("%B %e, %Y")),
        genotype.run_date
      ]
    end
  end

  def Genotypes
    @Genotypes ||= fetch_Genotypes
  end

  def fetch_genotypes
    genotypes = Genotype.order("#{sort_column} #{sort_direction}")
    genotypes = genotypes.page(page).per_page(per_page)
    if params[:sSearch].present?
      genotypes = genotypes.where("name like :search or category like :search", search: "%#{params[:sSearch]}%")
    end
    genotypes
  end

  def page
    params[:iDisplayStart].to_i/per_page + 1
  end

  def per_page
    params[:iDisplayLength].to_i > 0 ? params[:iDisplayLength].to_i : 10
  end

  def sort_column
    columns = %w[gmarker gsample allele1 allele2 run_date]
    columns[params[:iSortCol_0].to_i]
  end

  def sort_direction
    params[:sSortDir_0] == "desc" ? "desc" : "asc"
  end
end 
```

非常感谢有关如何解决（或修复！）此错误的任何提示！（让这个为我的项目工作会很棒！）

TIA，瑞克斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:56:59.257

我不确定是不是这样，但你的类有一个大写 G 的基因型方法，它应该都是小写的。

# spring - 在 NamedParameterJDBCTemplate 中为 ORDER BY 绑定参数

> ID：11658834
> 
> 赞同：8
> 
> 时间：2012-07-25T21:21:44.177
> 
> 标签：spring, jdbctemplate

我正在尝试在 Spring MVC 应用程序中使用 NamedParameterJdbTemplate。问题是当我包含下面列出的 ORDER BY 子句之一时，绑定参数似乎不起作用（没有排序发生）。但是，在 sql 中按列名的硬编码顺序有效。

```
ORDER BY column1 
ORDER BY column1 
ORDER BY column1 asc
ORDER BY column1 desc 
```

例如，下面列出的查询不起作用。

```
 private static final String SEARCH_ALL_BY_SORT_ORDER=
        " select FIRST_NM, MIDDLE_NM, LAST_NM, CUSTOMER_IDENTIFIER,  EMAIL_ADDRESS,  ACCOUNT_ID" +
        " from VIEW " +
        " where CUSTOMER_IDENTIFIER= :customerIdentifier " +
        " and ( REGEXP_LIKE(FIRST_NM, :firstName, 'i') " +
        "       or REGEXP_LIKE(LAST_NM, :lastName, 'i')  " +
        "       or REGEXP_LIKE(EMAIL_ADDRESS, :emailAddress, 'i')  )" +
        " order by :sortColumns"; 
```

具有按列硬编码顺序的相同查询有效：

```
 private static final String SEARCH_ALL_BY_SORT_ORDER=
        " select FIRST_NM, MIDDLE_NM, LAST_NM, CUSTOMER_IDENTIFIER,  EMAIL_ADDRESS,  ACCOUNT_ID" +
        " from VIEW " +
        " where CUSTOMER_IDENTIFIER= :customerIdentifier " +
        " and ( REGEXP_LIKE(FIRST_NM, :firstName, 'i') " +
        "       or REGEXP_LIKE(LAST_NM, :lastName, 'i')  " +
        "       or REGEXP_LIKE(EMAIL_ADDRESS, :emailAddress, 'i')  )" +
        " order by LAST_NM"; 
```

这是相关的jdbctemplate代码

```
Map <String, Object> params = new HashMap <String, Object>();
        params.put("customerIdentifier", customerIdentifier);
        params.put("firstName",  searchCriteria );
        params.put("lastName", searchCriteria );
        params.put("emailAddress",searchCriteria);
           // sortBy is COLUMN name
           // sortOrder is either 'asc' or 'desc'
        params.put("sortColumns", sortBy + " " + sortOrder);
           // Using just the column name does not work either
           //params.put("sortColumns", sortBy);

        namedParameterJdbcTemplate.query(SEARCH_ALL_BY_SORT_ORDER, params, new MemberMapper()); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T21:41:17.350

只有值可以绑定为参数。不是查询本身的一部分。

最后生成一个prepared statement，并将参数绑定到prepared statement。Prepared statement的原理是准备查询的执行计划（order by子句是其中的一部分），然后执行一次或多次查询，参数不同。

如果查询不完整，则无法准备和重用执行计划。因此，对于查询的这一部分，您需要使用字符串连接而不是参数动态生成查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-11T16:31:53.667

正如 JB Nizet 已经解释的那样，部分查询不能用作绑定键（orderby :age）。因此，我们需要在这里使用串联。

```
" order by "+ sortBy + " " + sortOrder; 
```

# ruby - 在Ruby中提取嵌套在哈希数组中的值

> ID：11658838
> 
> 赞同：0
> 
> 时间：2012-07-25T21:22:04.697
> 
> 标签：ruby, xml, arrays, hash

我有一个来自 URL 的 XML 响应，该响应被转换为一个哈希数组，如下所示：

```
{
  “员工名单”=>{
    “员工档案”=>{
      "BuildLoc"=>{"$"=>"1 个快乐的地方"},
      "状态"=>{"$"=>"A"},
      "SecrTitle"=>[{}, {}],
      “ID”=>{}，
      “bct”=>{}，
      "NUM"=>{"$"=>"1234567"},
      "BuildCity"=>{"$"=>"代顿"},
      "BuildFloor"=>{"$"=>"6"},
      "费用"=>{"$"=>"1345"},
      "姓氏"=>{"$"=>"史密斯"},
      “中”=>{}，
      "SecrName"=>[{}, {}],
      "内部SMTP地址"=>{"$"=>"Joe.Smith@happy.com"},
      "IAddress"=>{"$"=>"Joe.Smith@happy.com"},
      "PreferredLastName"=>{},
      "DisplayName"=>{"$"=>"Joe Smith"},
      "CellPhoneNo"=>{},
      "职称"=>{"$"=>"博士"},
      "BuildStreetAddress"=>{"$"=>"123 欢乐小镇"},
      "BuildState"=>{"$"=>"IL"},
      "名字"=>{"$"=>"乔"},
      "AltContactTitle1"=>{},
      "部门成本CtrNo"=>{"$"=>"129923"},
      "PreferredFirstName"=>{"$"=>"乔"},
      "AltContactName2"=>{},
      "AltContactPhone2"=>{},
      "GDP"=>{},
      "BuildZip"=>{"$"=>"112345"},
      "RegionID"=>{"$"=>"NAMR"},
      "就业类型"=>{"$"=>"E"},
      "临时电话"=>{},
      "BuildID"=>{"$"=>"01114"},
      "CountryAbbr"=>{"$"=>"USA"},
      "FaxDisp1"=>{},
      "BuildCountry"=>{"$"=>"United States"}
    }
  },
  无=>无
}

```

提取“ `DisplayName`”和“ `InternalSMTPAddress`”值的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:36:57.253

如果将返回的哈希分配给名为“ `hash`”的变量，则可以访问这些键的两个所需值，例如：

```
hash['EmployeeList']['EmployeeProfile']['DisplayName']
=> {"$"=>"Joe Smith"} 
```

和

```
hash['EmployeeList']['EmployeeProfile']['InternalSMTPAddress']
=> {"$"=>"Joe.Smith@happy.com"} 
```

如果您想要其中的实际数据，请添加尾随`['$']`：

```
hash['EmployeeList']['EmployeeProfile']['DisplayName']['$']
=> "Joe Smith"

hash['EmployeeList']['EmployeeProfile']['InternalSMTPAddress']['$']
=> "Joe.Smith@happy.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:50:42.027

如果您需要在嵌套哈希中找到一些键，请使用此方法：

```
def find_key(hash,key)
  hash.each {|k, v|
    return v if k==key
    tmp=find_key(v,key) if v.is_a?(Hash)
    return tmp unless tmp.nil?
  }
  return nil
end 
```

用法：

```
hash = Hash.new
hash["key1"] = "value1"
hash["key2"] = "value2"
hash["key3"] = Hash.new
hash["key3"]["key4"] = "value4"
hash["key3"]["key5"] = "value5"
hash["key6"] = Hash.new
hash["key6"]["key7"] = "value7"
hash["key6"]["key8"] = Hash.new
hash["key6"]["key8"]["key9"] = "value9"

find_key(hash,"key9") => "value9"
find_key(hash,"key8") => {"key9"=>"value9"}
find_key(hash,"dsfsdfsd") => nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T14:00:54.357

我建议您使用 ruby​​ gem `nested_lookup`。

使用命令安装 gem`gem install nested_lookup`

在您的情况下，您需要“DisplayName”和“InternalSMTPAddress”的值。这是你需要做的。

```
Rameshs-MacBook-Pro:~ rameshrv$ irb
irb(main):001:0> require 'nested_lookup'
=> true
irb(main):051:0> include NestedLookup
=> Object
# Here the test_data is the data you gave in the question
irb(main):052:0> test_data.nested_get('DisplayName')
=> {"$"=>"Joe Smith"}
irb(main):053:0> test_data.nested_get('InternalSMTPAddress')
=> {"$"=>"Joe.Smith@happy.com"}
irb(main):054:0> 
```

有关更多信息，请阅读[https://github.com/rameshrvr/nested_lookup](https://github.com/rameshrvr/nested_lookup)

# asp.net-mvc - MVC 的 ActionExecutingContext HttpContext.User.Identity.IsAuthenticated 在多个浏览器选项卡上登录时返回 False

> ID：11658839
> 
> 赞同：0
> 
> 时间：2012-07-25T21:22:06.947
> 
> 标签：asp.net-mvc, forms-authentication, iprincipal, browser-tab

在自定义 ActionFilterAttribute 的 OnActionExecuting 方法期间，我们确保用户在执行某些操作之前仍处于登录状态。我们通过执行类似于此伪代码的操作来做到这一点：

```
public override void OnActionExecuting( ActionExecutingContext filterContext )
{
    if ( filterContext.HttpContext.User.Identity.IsAuthenticated )
    {
        // Do something...
    }
} 
```

我有多个站点，用于在同一域下运行的多个客户端，唯一的区别是虚拟目录名称。每个虚拟目录实际上都指向相同的文件夹/代码库，并且 URL/virdir 名称指示要使用嵌套 /Clients 目录中的“客户端配置文件”的代码。不确定是否需要站点/代码/IIS 配置中的那么多细节，但提供以防万一是问题的罪魁祸首。

如果我尝试使用浏览器的多个**实例**登录多个站点，一切正常。当我尝试在站点中导航时，IsAuthenticated 检查返回 true。

但是，如果我尝试使用具有**多个选项卡**的单个浏览器登录多个站点，我会不断地来回注销。如果我登录到站点 A，我可以四处导航，但是一旦我登录到站点 B，如果我尝试在站点 A 中的任何位置导航，IsAuthenticated 就会返回 false。

这是预期的行为吗？有解决方法吗？

更新：我现在只能在 IE 中重现这种行为。在 Firefox 和 Chrome 中，无论我在同一个浏览器/多个选项卡还是多个浏览器上，我都会被引导到登录屏幕。IE 处理 cookie 的方式有区别吗？还是饼干不是罪魁祸首？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:33:19.970

在不详细了解您的设置的情况下，这就是我所期望的。

**假设：**

1.  您声明您有多个虚拟目录指向一个代码库。
2.  这些虚拟目录中的每一个都最有可能设置为应用程序是 IIS。
3.  您没有在 web.config 中定义机器密钥，因此，每个虚拟目录都会自动生成自己的加密/解密密钥

**可能发生了什么：**

1.  当您从不同的浏览器登录时，每个浏览器都会获得一个身份验证 cookie。由于您使用不同的浏览器，因此没有问题。
2.  使用同一浏览器时，您登录到站点 A 并获得一个加密的 cookie，该 cookie 使用站点 A 自动生成的密钥加密。
3.  当您尝试转到另一个具有不同自动生成的机器密钥的虚拟目录时，站点无法读取身份验证票证（无法解密）并因此返回已登录 = false。
4.  登录到站点 B 后，身份验证 cookie 将替换为来自站点 B 的身份验证票。此时，siteA 无法再解密身份验证票据并返回已登录=false。

[尝试使用适当的选项（ machineKey element 上的 MSDN](http://msdn.microsoft.com/en-us/library/w8h3skw9.aspx) ）设置 web.config 的机器密钥配置部分。 [以下](http://msdn.microsoft.com/en-us/library/ff647070.aspx)是有关表单身份验证票证和流程的更多信息

# css - CSS Box-Shadow 不适用于 Webkit 中的 Textarea

> ID：11658840
> 
> 赞同：9
> 
> 时间：2012-07-25T21:22:14.060
> 
> 标签：css, webkit, textarea

这个简单的代码在 Chrome 或 Safari 中不起作用......

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head>
<style>
:required {box-shadow:0 0 5px red;}
</style>
<body>
<form>
<textarea required></textarea>
</form>
</body>
</html> 
```

它在 Firefox 和 Opera 中运行良好。此外，`border:1px solid red`在 webkit 浏览器中也可以正常工作。这是怎么回事？我什至试着`textarea {display:block;}`认为这可能是一个内联问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T22:03:16.457

您需要添加

```
-webkit-appearance: none; 
```

强制令人敬畏的 webkit 将 textarea 渲染为普通块并应用您编写的所有 CSS。

[见 jsfiddle](http://jsfiddle.net/xj5wa/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:39:11.613

如果您给 textarea 一个*无**背景*声明（或出于某种原因的*背景颜色*声明，除了白色之外的任何内容），阴影将起作用。

 **```
<style> 
:required { 
     background: none; 
     box-shadow:0 0 5px red;
} 
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:43:11.980

尝试这个

```
textarea:required {
   box-shadow: 0 0 5px red;
   -webkit-box-shadow: 0 0 5px red;
   -moz-box-shadow: 0 0 5px red;
   border: solid 0px transparent; // or border: none;
}​ 
```

[**演示。**](http://jsfiddle.net/heera/PaCkY/)并[**阅读此**](http://css-tricks.com/box-sizing/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:30:41.467

尝试`Textarea`通过类或 id 而不是`:required`选择器选择**

# tortoisesvn - SSH 登录不适用于 TortoisePlink 1.7.11.3 + putty .061

> ID：11658842
> 
> 赞同：0
> 
> 时间：2012-07-25T21:22:15.820
> 
> 标签：tortoisesvn, putty, tortoisegit, pageant

我已经安装了 TortoiseGit 1.7.11.3 并配置了最新的 putty 和 ssh 登录。

我可以 ssh 到远程机器，而无需远程机器提示输入用户名和密码。但是，当我从命令提示符执行“git clone xyz@abc:path destination”时，它会提示输入用户名和密码。

我已经为 Git 和 TortoiseGit 正确设置了环境变量。

你能告诉我 TortoisePlink 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:39:35.753

请尝试最新的 TortoiseGit 版本。ATM：1.7.14 最近可能已修复。

# wpf - 除了 OnCurrentChanged 之外还要使用什么，因为它没有触发 WPF MVVM

> ID：11658845
> 
> 赞同：0
> 
> 时间：2012-07-25T21:22:28.753
> 
> 标签：wpf, mvvm

我的主 xaml 文件上有一个带有 2 个日期选择器的组合框

```
<ComboBox Margin="5" Height="23" HorizontalAlignment="Left" VerticalAlignment="Top" Width="90"
                      x:Name="datOpt"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Path=dateOptObj.dates}"
                      Background="{x:Null}" />
        <DatePicker Padding="5,5,5,5"
                    Text="{Binding Path=dateOptObj.openDate, Mode=TwoWay}"/>
        <TextBlock  Padding="5,5,5,5" Text=" to "/>
        <DatePicker Padding="5,5,5,5" 
                    Text="{Binding Path=dateOptObj.closeDate, Mode=TwoWay}" /> 
```

在视图模型中，我创建了一个这样的实例

```
public mdDateOptions dateOptObj { get; set; }

        public vwMain()
        {
        try
        {
            // Initialize the panel switches
            dateOptObj = new mdDateOptions();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

mdDateOptions 的类如下

```
class mdDateOptions : vwBase
{

    private DateTime _openDate;
    public DateTime openDate
    {
        get
        {
            return _openDate;
        }
        set
        {
            if (_openDate != value)
            {
                _openDate = value;
                RaisePropertyChanged("openDate");
            }
        }
    }

    private DateTime _closeDate;
    public DateTime closeDate
    {
        get
        {
            return _closeDate;
        }
        set
        {
            if (_closeDate != value)
            {
                _closeDate = value;
                RaisePropertyChanged("closeDate");
            }
        }
    }

    private DateTime _openDatePrevious;
    public DateTime openDatePrevious
    {
        get
        {
            return _openDatePrevious;
        }
        set
        {
            if (_openDatePrevious != value)
            {
                _openDatePrevious = value;
                RaisePropertyChanged("openDatePrevious");
            }
        }
    }

    private DateTime _closeDatePrevious;
    public DateTime closeDatePrevious
    {
        get
        {
            return _closeDatePrevious;
        }
        set
        {
            if (_closeDatePrevious != value)
            {
                _closeDatePrevious = value;
                RaisePropertyChanged("closeDatePrevious");
            }
        }
    }

    private ICollectionView _datOpts;
    public ObservableCollection<string> dates { get; private set; }
    public ICollectionView datesView
    {
        get
        {
            return _datOpts;
        }
    }
    public mdDateOptions()
    { 

        dates = new ObservableCollection<string>();
        dates.Add("Rolling Year");
        dates.Add("Year to Date");
        dates.Add("Last Year");

        _datOpts = CollectionViewSource.GetDefaultView(dates);
        _datOpts.CurrentChanged += new EventHandler(OnCurrentChanged);
    }
    public mdDateOptions(Boolean value)
    {
        dates = new ObservableCollection<string>();
        dates.Add("Rolling Year");
        dates.Add("Year to Date");
        dates.Add("Last Year");

        _datOpts = CollectionViewSource.GetDefaultView(dates);
        _datOpts.CollectionChanged += this.OnCurrentChanged;

    }
    public void OnCurrentChanged(object sender, EventArgs e)
    {

        string currSel = (string)_datOpts.CurrentItem;
        DateTime p_date = new DateTime();
        p_date = DateTime.Today;

        switch (currSel)
        {
            case "Rolling Year":
                openDate = DateTime.Today.AddYears(-1);
                closeDate = DateTime.Today;

                openDatePrevious = DateTime.Today.AddYears(-2);
                closeDatePrevious = DateTime.Today.AddYears(-1);

                break;
            case "Year to Date":
                openDate = new DateTime(DateTime.Today.Year, 1, 1);
                closeDate = DateTime.Today;

                openDatePrevious = new DateTime(DateTime.Today.AddYears(-1).Year, 1, 1);
                closeDatePrevious = DateTime.Today.AddYears(-1);
                break;
            case "Last Year":
                openDate = new DateTime(DateTime.Today.AddYears(-1).Year, 1, 1);
                closeDate = new DateTime(DateTime.Today.AddYears(-1).Year, 12, 31);

                openDatePrevious = new DateTime(DateTime.Today.AddYears(-2).Year, 1, 1);
                closeDatePrevious = new DateTime(DateTime.Today.AddYears(-2).Year, 12, 31);
                break;
            default:
                MessageBox.Show("Unknown Date Option");
                break;
        }
    }

} 
```

当程序第一次加载时，它会进入 OncurrentChanged 并加载适当的日期。但是，当我在同一个主 xaml 文件上单击 userControl 中的按钮后，dateOptObj 为空，当我尝试创建 mdDateOptions 的新实例时，它不会触发 onCurrentChanged，因为没有任何改变！我的问题是如何在主 xaml 文件的 userControl 中单击我的按钮时让我的 dateOptObj 包含正确的日期。提前致谢！

这是主要的 Xaml 文件

```
<Window x:Class="ManagementDashboard.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:ManagementDashboard"
    Title="Dashboard Home" Height="768" Width="1024">

<Window.Resources>
    <vm:vwMain x:Key="viewModel" />
</Window.Resources>

<DockPanel x:Name="viewModel"
        DataContext="{Binding Source={StaticResource viewModel}}" >
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
        <TextBlock Padding="5,5,5,5" Text="Date Options: "/>
        <ComboBox Margin="5" Height="23" HorizontalAlignment="Left" VerticalAlignment="Top" Width="90"
                      x:Name="datOpt"
                      IsSynchronizedWithCurrentItem="True"
                      ItemsSource="{Binding Path=dateOptObj.dates}"
                      Background="{x:Null}" />
        <DatePicker Padding="5,5,5,5"
                    SelectedDate="{Binding Path=dateOptObj.openDate, Mode=TwoWay}"/>
        <TextBlock  Padding="5,5,5,5" Text=" to "/>
        <DatePicker Padding="5,5,5,5" 
                    SelectedDate="{Binding Path=dateOptObj.closeDate, Mode=TwoWay}" />

        <TextBlock Padding="5,5,5,5" Text="Rep Filter: "/>
        <ComboBox Margin="5" Height="23" HorizontalAlignment="Left" VerticalAlignment="Top" Width="200"
                      x:Name="repOption"
                      IsSynchronizedWithCurrentItem="True"
                        DataContext="{Binding Source={StaticResource viewModel}}"
                      ItemsSource="{Binding Path=reps}"
                      DisplayMemberPath="AEname" />
        <!--Background="{x:Null}" />-->

        <Button Margin="5" Width="100" Height="20" Content="Reset Dates" Command="{Binding Path=Refill}" />

    </StackPanel>

    <StackPanel Orientation="Horizontal" DockPanel.Dock="Bottom">
        <Button Margin="5" Width="100" Height="20" Content="Exit" Command="{Binding Path=ExitCommand}" />
    </StackPanel>

    <vm:StatPanel  DockPanel.Dock="Right" Loaded="StatPanel_Loaded" />

    <vm:MainBody DataContext="{Binding Source={StaticResource viewModel}}"/>

</DockPanel> 
```

这是后面的代码

```
public partial class MainWindow : Window
{
    vwMain _viewModel;

    public MainWindow()
    {
        InitializeComponent();

        // Initialize the view Model
        _viewModel = (vwMain)this.FindResource("viewModel");
    }

    private void StatPanel_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

这是 UserControl 的 XAML 的一部分

```
<Expander   Header="New Account Stats" IsExpanded="{Binding Path=newAcctPanel, Mode=TwoWay}" ExpandDirection="Down">
            <DataGrid 
                x:Name="m_DataGrid"
                ItemsSource="{Binding}"
                DataContext="{Binding Path=dashNewAcct.newAcctStats}"
                VerticalAlignment="Stretch" AutoGenerateColumns="False"
                ColumnWidth="Auto">
                            <DataGrid.Columns>
                                <!--<DataGridTextColumn Header="Sector"  
                                             Binding="{Binding Path=sector}" />
                                <DataGridTextColumn Header="Security"  
                                             Binding="{Binding Path=totalSecurities}" />
                                <DataGridTextColumn Header="CD"  
                                             Binding="{Binding Path=totalCD}" />
                                <DataGridTextColumn Header="LPC"  
                                             Binding="{Binding Path=totalLPC}" />
                                <DataGridTextColumn Header="BSMS" 
                                             Binding="{Binding Path=totalBSMS, StringFormat='{}{0}'}" />
                                <DataGridTextColumn Header="Totals"  
                                             Binding="{Binding Path=total, StringFormat='{}{0}'}" />-->
                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>Sector</DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="{Binding Path=sector}"></Button>
                                    </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="Security">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="Security" Content="{Binding Path=totalSecurities}" Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                                    <Button.CommandParameter>
                                        <MultiBinding Converter="{StaticResource PassThroughConverter}">
                                            <Binding Path="sector"/>
                                            <Binding ElementName="Security" Path="Name"/>
                                        </MultiBinding>
                                    </Button.CommandParameter>

                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>CD</DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="CD" Content="{Binding Path=totalCD}" Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                                    <Button.CommandParameter>
                                        <MultiBinding Converter="{StaticResource PassThroughConverter}">
                                            <Binding Path="sector"/>
                                            <Binding ElementName="CD" Path="Name"/>
                                        </MultiBinding>
                                    </Button.CommandParameter>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>LPC</DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="LPC" Content="{Binding Path=totalLPC}" Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                                    <Button.CommandParameter>
                                        <MultiBinding Converter="{StaticResource PassThroughConverter}">
                                            <Binding Path="sector"/>
                                            <Binding ElementName="LPC" Path="Name" />
                                        </MultiBinding>
                                    </Button.CommandParameter>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>BSMS</DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Name="BSMS" Content="{Binding Path=totalBSMS}" Command="{Binding Source={StaticResource viewModel}, Path=filterGridCommand}">
                                    <Button.CommandParameter>
                                        <MultiBinding Converter="{StaticResource PassThroughConverter}">
                                            <Binding Path="sector"/>
                                            <Binding ElementName="BSMS" Path="Name" />
                                        </MultiBinding>
                                    </Button.CommandParameter>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn>
                        <DataGridTemplateColumn.Header>Totals</DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="{Binding Path=total}"></Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                </DataGrid.Columns>
            </DataGrid>
        </Expander> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:48:43.713

`OnCurrentChanged`正确触发，您的绑定错误。`DateTime`将属性绑定到`SelectedDate`not `Text`。

```
<DatePicker Padding="5,5,5,5"
            SelectedDate="{Binding Path=dateOptObj.openDate, Mode=TwoWay}" />
<DatePicker Padding="5,5,5,5" 
            SelectedDate="{Binding Path=dateOptObj.closeDate, Mode=TwoWay}" /> 
```

# javascript - 以编程方式刷新网页 - javascript

> ID：11658847
> 
> 赞同：3
> 
> 时间：2012-07-25T21:22:51.637
> 
> 标签：javascript, jquery-mobile

> **可能重复：**
> [当前页面的 Javascript 硬刷新](https://stackoverflow.com/questions/2099201/javascript-hard-refresh-of-current-page)

有没有办法使用javascript刷新页面？我正在使用 jQuery Mobile 在列表视图（可能是列表视图）中显示一些统计信息，并且我需要每 10 秒从 MySQL 数据库重新填充数据，比如说。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T21:24:25.460

如果您使用 JQM，请在列表视图上使用 listview.('refresh') 方法。使用 ajax 并在处理程序中的列表上调用 .refresh() 。

```
$.ajax({ /* code goes here */ 
 success : function(e) { for (var i in e.data) 
 { listView.add(i); } 
   listview.listview('refresh'); }); 
```

来自 JQM 文档： http: [//jquerymobile.com/test/docs/lists/docs-lists.html](http://jquerymobile.com/test/docs/lists/docs-lists.html) 更新列表 如果将项目添加到列表视图，则需要对其调用 refresh() 方法来更新样式并创建任何添加的嵌套列表。例如：

$('#mylist').listview('refresh'); 请注意，refresh() 方法仅影响附加到列表的新节点。这样做是出于性能原因。刷新过程将忽略任何已增强的列表项。这意味着如果您更改已经增强的列表项的内容或属性，这些将不会被反映。如果要更新列表项，请在调用刷新之前将其替换为新标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:25:09.563

我建议为此使用ajax。但是要在 JS 中刷新页面，只需执行以下操作：

`window.location.reload();`

或者

`window.location.href = window.location.href;`

# ajax - 通过 HTML/Ajax 为大型数据集子类化 QAbstractTableModel？

> ID：11658851
> 
> 赞同：1
> 
> 时间：2012-07-25T21:23:29.237
> 
> 标签：ajax, qt, dataset, qtableview

我正在尝试通过带有 QAbstractTableModel 子类的 QTableView 显示一个大表（带有标题、作曲家等的播放列表......所以我不能使用 QListWidget）。您必须覆盖检索数据的调用如下所示：

```
QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const; 
```

每次对每个单元格调用此函数（由 index.row() 和 index.colum() 指定）。将 1:1 转换为 HTML/Ajax 甚至会降低本地网络的性能。

那么我在这里有什么选择呢？这一定是可能的，因为 QSqlQueryModel 存在并且它们必须有相同的问题。谷歌搜索 Ajax/QAbstractTableModel 的组合根本没有返回任何结果。

有任何想法吗？

PS：为了半回答自己，查看 QT-Sources`src/sql/models/qsqlquerymodel.cpp`揭示了答案。这是可能的，但我想知道是否有人知道开箱即用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:42:22.347

简而言之，是的，您将希望通过查看源代码`QSqlQueryModel`或某些派生词来利用所学的概念。可以认为，在示例中，`d`它实际上是包含数据的真正模型存储（在他们的情况下，它包含带有数据和索引的 SQL 查询，用于确定是否必须进行提取），并且`QSqlQueryModel`它只是充当代理类在它之上与 Qt 的模型/视图概念集成。

我们在办公室也有类似的情况，逐个单元格地查询数据会导致效率低下。因此，我们创建了一个类，可以有效地处理网络上的所有请求并将其抽象出来。然后我们使用一个非常简单的`QAbstractTableModel`派生类与真正的模型类交互，以提供 Qt 需要的数据。它工作得很好。

只需确保当您接收或删除数据时，您分别在`beginInsertRows`/`endInsertRows`和`beginRemoveRows`/之间正确操作模型数据`endRemoveRows`。

# r - 对 R 中的 ddply 函数的怀疑

> ID：11658852
> 
> 赞同：0
> 
> 时间：2012-07-25T21:23:31.073
> 
> 标签：r, plyr

我正在`group by`尝试`R`通过`plyr`名为`ddply`. 我有一个数据框，它有三列（比如和`id`）。然后，我想计算每个出现在数据框中的次数（with ）并获取每个对应于 column的最后一个元素。`period``event``id``count(*)... group by id``SQL``id``event`

这是我拥有的以及我想要获得的示例：

```
 id period event #original data frame
  1      1     1
  2      1     0
  2      2     1
  3      1     1
  4      1     1
  4      1     0

  id  t  x #what I want to obtain
  1   1  1
  2   2  1
  3   1  1
  4   2  0 
```

这是我一直在使用的简单代码：

```
 teachers.pp<-read.table("http://www.ats.ucla.edu/stat/examples/alda/teachers_pp.csv", sep=",", header=T) # whole data frame
 datos=ddply(teachers.pp,.(id),function(x) c(t=length(x$id), x=x[length(x$id),3])) #This is working fine. 
```

现在，我一直在阅读[The Split-Apply-Combine Strategy for Data Analysis](http://www.jstatsoft.org/v40/i01/paper)并给出了一个示例，其中他们使用了与我在下面放置的语法等效的语法：

```
 datos2=ddply(teachers.pp,.(id), summarise, t=length(id), x=teachers.pp[length(id),3]) #using summarise but the result is not what I want. 
```

这是我使用的数据框`datos2`

```
 id  t  x
  1   1  1
  2   2  0
  3   1  1
  4   1  1 
```

所以，我的问题是：为什么这个结果与我使用第一段代码得到的结果不同，我的意思是`datos1`？我究竟做错了什么？

我不清楚什么时候必须使用`summarise`or `transform`。你能告诉我这个`ddply`函数的正确语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:32:19.440

使用时`summarise`，停止引用原始数据框。相反，只需根据列名编写表达式。

你试过这个：

```
ddply(teachers.pp,.(id), summarise, t=length(id), x=teachers.pp[length(id),3]) 
```

当你可能想要的是更像这样的东西时：

```
ddply(teachers.pp,.(id), summarise, t=length(id), x=tail(event,1)) 
```

# wordpress - 如何将 CSRF 添加到 wordpress 中手动创建的表单中？

> ID：11658853
> 
> 赞同：5
> 
> 时间：2012-07-25T21:23:33.640
> 
> 标签：wordpress, csrf

这是我第一次尝试在 WordPress 中编写自定义插件，当然有一种方法可以将 CSRF 标签添加到 WordPress 中的表单并检查服务器内部的表单有效性。问题是我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T21:32:28.607

如果您使用的是 Wordpress 2.0.4 或更高版本，您可以使用`wp_nonce_field`和`wp_verify_nonce`字段进行验证。Wordpress 文档有一些[示例](http://codex.wordpress.org/Function_Reference/wp_nonce_field)（我在下面发布）。

在您的表格中：

```
<form method="post">
   <!-- some inputs here ... -->
   <?php wp_nonce_field('name_of_my_action','name_of_nonce_field'); ?>
</form> 
```

在您的处理操作中：

```
<?php
if ( empty($_POST) || !wp_verify_nonce($_POST['name_of_nonce_field'],'name_of_my_action') )
{
   print 'Sorry, your nonce did not verify.';
   exit;
}
else
{
   // process form data
} 
```

# css - CSS：悬停时阴影不会消失

> ID：11658855
> 
> 赞同：5
> 
> 时间：2012-07-25T21:23:42.873
> 
> 标签：css, shadows

我用几个按钮做了一个小菜单。我为菜单按钮添加了阴影。它完美地工作。我想在菜单中做一些“深度”，让它们真正成为“按钮”。如果您使用阴影，这很有效。没有任何动作，阴影应该在左上角。

```
#menu ul li {
    -moz-box-shadow: -3px -3px -3px #888;
    -webkit-box-shadow: -3px -3px -3px #888;
    box-shadow: -3px -3px -3px #888;
} 
```

但是一旦我将鼠标悬停在它上面，这个影子就不想走，即使我想走

```
#menu ul li:hover {
    border-radius: 5px;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
} 
```

为什么它不想离开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:48:42.570

正如@thirtydot 所指出的，问题在于您`box-shadow`的值无效-`blur`不能为负数。

没有任何问题`:hover`，您只需`-`从`blur`属性中删除 ，代码就可以工作了。

> `<blur-radius>`（可选）
> 这是第三个`<length>`值。这个值越大，模糊越大，所以阴影变得更大更亮。不允许使用负值。如果未指定，它将是`0`（阴影的边缘是锐利的）。

[https://developer.mozilla.org/en/CSS/box-shadow](https://developer.mozilla.org/en/CSS/box-shadow)

奇怪的是，它似乎打破了移除`hover`；而不是仅仅忽略无效值，因为阴影仍然以锐利的边缘输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:25:25.663

尝试这个：

```
box-shadow: 0 0 0; 
```

是否有任何其他 CSS 应用于您的`li`？那可能是干扰。

另见：[http ://css-tricks.com/forums/discussion/14829/trouble-with-box-shadow-on-rollover-hover/p1](http://css-tricks.com/forums/discussion/14829/trouble-with-box-shadow-on-rollover-hover/p1)

# php - 2个不同数据库的内部连接查询 - Mysql

> ID：11658857
> 
> 赞同：0
> 
> 时间：2012-07-25T21:23:49.443
> 
> 标签：php, mysql, database, phpmyadmin

我们有 2 个不同的数据库，我正在尝试使用内部连接相互查询。

当我从 phpmyadmin 运行查询时，查询运行良好。但是，当我尝试将查询放入 php 页面时，我无法使该行正常工作。我假设我在 mysql_select_db 行中遗漏了一些东西，我在其中引用了第一个数据库的 host/db/user/pass。

为了让这个查询在页面上起作用，我在这里缺少什么？同样，我相信实际查询可以正常工作，因为它确实在 phpmyadmin 中运行。

一如既往地提前感谢。

这是我正在使用的代码....

```
$hostname_db = "123.456.78.910";
$database_db = "votes_db";
$username_db = "votes_dbuser";
$password_db = "password123";
$db = mysql_connect($hostname_db, $username_db, $password_db, true) or trigger_error(mysql_error(),E_USER_ERROR); 

$hostname_db2 = "123.456.78.910";
$database_db2 = "survey_db";
$username_db2 = "survey_dbuser";
$password_db2 = "password456";
$db2 = mysql_connect($hostname_db2, $username_db2, $password_db2, true); 

// trying to make this work, query ok in phpmyadmin, but not on the php page
mysql_select_db($database_db, $db);
$query_testdb3 = sprintf("SELECT votes_db.vote_table.vote_survey_id
FROM votes_db.vote_table 
inner join survey_db.survey_table 
ON votes_db.vote_table.vote_survey_id = survey_db.survey_table.survey_id
WHERE votes_db.vote_table.vote_survey_id = 1457 ");
$testdb3 = mysql_query($query_testdb3, $db) or die(mysql_error());
$row_testdb3 = mysql_fetch_assoc($testdb3);
$totalRows_testdb3 = mysql_num_rows($testdb3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:31:05.173

前段时间我有同样的问题（[mysql-php 多数据库问题](https://stackoverflow.com/questions/1726139/php-multiple-databases-problem "mysql-php多数据库问题")）

因此，删除第二个（$db2）上的“true”选项，一切都会好起来的。

血糖仪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:32:50.910

```
$`totalRows_testdb3 = mysql_num_rows($testdb3);` 
```

将最后一行“$testdb3”中的列 # 更改为“$row_testdb3”。

```
$totalRows_testdb3 = mysql_num_rows($row_testdb3); 
```

此外，如果您将每个 $db 和 db2 放在单独的类和函数中：

```
mysql_close($db); 
```

每次查询后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T18:19:59.443

这是一个权限问题。连接到数据库的用户没有适当的权限。托管公司为我解决了这个问题，所以我不能确切地告诉你他们做了什么，但它现在可以工作了。

蒂姆是正确的，因为我以超级用户身份登录，所以它是从 phpmyadmin 工作的......

# python - 在 Python 中处理字符串 - 包还是硬代码？

> ID：11658862
> 
> 赞同：1
> 
> 时间：2012-07-25T21:24:19.063
> 
> 标签：python, optimization

在 Python 中，我在一个程序中执行了许多不同的字符串处理函数。用户在表单中输入一个术语，该术语通过不同的功能进行处理。这些包括词干提取、停用词删除、标点符号删除、拼写检查和获取同义词。

词干是使用[词干包](http://pypi.python.org/pypi/stemming/1.0)完成的，

`string.replace()`使用and删除停用词和标点符号`REGEX`，

使用[pyEnchant进行拼写检查](http://packages.python.org/pyenchant/)

使用[Big Huge Thesaurus API](http://words.bighugelabs.com/api.php)获取同义词。

该术语被发送到 API。结果被返回并通过硬编码的排序过程。毕竟结果输出给用户。整个过程需要10多秒，太长了。我想知道我是否使用了许多扩展，从而导入它们，从而导致长时间的延迟。

希望这不违反 stackoverflow 规则，但我是 python 新手，这是我需要知道的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:27:47.720

> 我想知道我是否使用了许多扩展，从而导入它们，从而导致长时间的延迟。

非常不可能。如果您只导入一次，然后在循环中调用，则循环应该花费大部分时间。（或者每个单词/句子都启动一个 Python 进程？）

根据经验，计算机程序倾向于将 90% 的时间用于执行 10% 的代码。那部分值得优化。诸如 import 语句之类的东西通常不是。要找出您的程序在哪里花费时间，请使用分析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:37:49.753

计算每项检查所需的时间。然后比较结果以查看实际花费最多的时间。

```
import time
start = time.time()
#after the individual piece has completed
end = time.time()

print (end - start, "seconds") 
```

真正知道字符串处理的每个组件需要多长时间会很有趣。

# javascript - 车库门jQuery 不起作用

> ID：11658865
> 
> 赞同：0
> 
> 时间：2012-07-25T21:24:26.397
> 
> 标签：javascript, jquery, drupal

我在我的 drupal 页面中使用garagedoorjQuery。有人可以告诉我，为什么这段代码在这里不起作用？[http://www.gayadesign.com/scripts/jquerygaragedoor/](http://www.gayadesign.com/scripts/jquerygaragedoor/)

```
 <link href='/css/garagedoor.css' rel='stylesheet' type='text/css' />
    <script src="/js/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script src="/js/garagedoorjQuery.js" type="text/javascript"></script>

            <div class='garagedoor' id='garagedoor'>        
                <div title='http://www.dasda.com' class='item'>
                    <div class='underlay'>
                        SOMETHING ABOUT ME
                    </div>
                    <img src='/ikony_zarz/strzalki_trojkat.png' alt='' class='overlay' />
                    <div class='mouse'><img src='/images/nothing.gif' alt='' /> &nbsp;</div>
                </div>
                                    <script type='text/javascript'>
                    GarageDoor.scrollY = -55;
                    GarageDoor.setBindings('garagedoor');
                </script>

            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:52:34.600

未来 - drupal CMS 默认情况下是阻止标记，也在“完整 HTML”编辑器中。通过使用“PHP 编辑模式”或编辑“完整 HTML”模式以使用标签解决了问题。

问候

# c++ - 保存更改时如何使 XCode 4 自动构建和运行代码？

> ID：11658869
> 
> 赞同：2
> 
> 时间：2012-07-25T21:24:45.227
> 
> 标签：c++, xcode, tdd

我正在使用 XCode 在 C++ 中进行测试驱动开发。

我突然想到，如果 XCode 可以在我每次保存时自动构建和运行我的测试，我会节省很多时间。

有没有办法做到这一点（通过脚本 XCode 或其他方式）？谷歌似乎没有任何线索。

我在使用解释语言时看到了这个工作流程，它确实提高了生产力。

假设我的机器足够快，可以在几秒钟内构建和运行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:43:25.383

如果您的目标是 C++，那么您可能不走运。

使用 Objective-C，有一个名为 «Injection» 的项目：http:
[//injectionforxcode.com/](http://injectionforxcode.com/)

它跟踪对项目文件的更改，当发生更改时，它将文件重新构建为类别，放置在包中。

然后捆绑包被动态加载到正在运行的应用程序中，并且类别中的内容会替换正在运行的代码。

但它是Objective-C。C++ 没有这样的运行时和能力。无论如何，你可能想看看它...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:13:18.220

不，我不认为这是可以做到的。

大多数项目不会在几分之一秒内构建和测试，这需要它在每次保存时（即，每当 Xcode 自动保存时）都切实可行。

为了获取 Xcode 的实时错误和警告，我们在基础架构上做了很多工作。只要您的项目不太奇怪，那些实时错误应该为实际构建它提供一个很好的代理。

对于测试，如果您还没有使用持续集成，您可能需要研究它。

* * *

在自动保存之前长大的灰胡子可能已经养成了偶尔使用键盘命令手动保存的习惯。此类用户可以通过将运行测试的键盘命令替换他们用于手动保存的键盘命令来改变这种习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:28:06.677

自动地？不。您可以编写自己的 fsevent 监控代理。当发生需要重建的更改时，请执行适当的操作。

解决此问题的简单方法：您可以配置 xcode 以在构建时保存。您不需要明确保存，只需在启用此首选项的情况下点击运行。从这个意义上说，点击运行就像点击保存一样简单，当你点击运行时，它会以正确的顺序执行保存、构建和运行。您可能需要一个中间目标或方案。

另一种选择是使用 vc 提交作为构建和运行测试的触发器（看到您的评论：使用分支）。

# cassandra - 为什么 Cassandra 忽略我的架构修改？

> ID：11658870
> 
> 赞同：3
> 
> 时间：2012-07-25T21:24:51.660
> 
> 标签：cassandra, cql

我对卡桑德拉很陌生。我有一个单节点集群运行了几天没有问题，但今天它开始忽略我的一些 CQL 命令。 `SELECT`s 工作正常，但如果我`DROP TABLE foo;`从 cqlsh 运行，则什么也不会发生。暂停半秒后，它让我回到提示符，但桌子没有被丢弃。使用创建索引也是如此`CREATE INDEX`。

我在虚拟机中运行，在 Ubuntu 12.04 上使用 OpenStax 的 Cassandra 发行版。

我检查了 Cassandra 日志，当我运行 CREATE INDEX 时肯定会得到输出，但没有明显的错误：

```
 CREATE INDEX number_uri_index ON numbers (number); 
```

产生：

```
 INFO [MigrationStage:1] 2012-07-25 14:25:59,120 ColumnFamilyStore.java (line 643) Enqueuing flush of Memtable-schema_columnfamilies@15955724(1212/1515 serialized/live bytes, 20 ops)
 INFO [FlushWriter:5] 2012-07-25 14:25:59,122 Memtable.java (line 266) Writing Memtable-schema_columnfamilies@15955724(1212/1515 serialized/live bytes, 20 ops)
 INFO [FlushWriter:5] 2012-07-25 14:25:59,139 Memtable.java (line 307) Completed flushing /var/lib/cassandra/data/system/schema_columnfamilies/system-schema_columnfamilies-hd-50-Data.db (1267 bytes) for commitlog position ReplayPosition(segmentId=140485087964, position=8551)
 INFO [MigrationStage:1] 2012-07-25 14:25:59,141 ColumnFamilyStore.java (line 643) Enqueuing flush of Memtable-schema_columns@7576227(320/400 serialized/live bytes, 5 ops)
 INFO [FlushWriter:5] 2012-07-25 14:25:59,141 Memtable.java (line 266) Writing Memtable-schema_columns@7576227(320/400 serialized/live bytes, 5 ops)
 INFO [FlushWriter:5] 2012-07-25 14:25:59,172 Memtable.java (line 307) Completed flushing /var/lib/cassandra/data/system/schema_columns/system-schema_columns-hd-46-Data.db (367 bytes) for commitlog position ReplayPosition(segmentId=140485087964, position=8551) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:04:16.707

在 3 节点设置中存在同样的问题。解决了在第二个节点上进行相同的修改。调查 CASSANDRA jira 我们发现它可能与模式相关命令管理时间戳的方式有关，它应该在 1.1.3 中修复：

[卡桑德拉-4461](https://issues.apache.org/jira/browse/CASSANDRA-4461) [卡桑德拉-4432](https://issues.apache.org/jira/browse/CASSANDRA-4432)

# jquery - 分离的动态 jquery 对象中的 OnChange 事件处理程序开始被 html() 丢失

> ID：11658871
> 
> 赞同：1
> 
> 时间：2012-07-25T21:24:56.800
> 
> 标签：jquery, event-handling, onchange

这不起作用：

[http://jsfiddle.net/u8ysa/](http://jsfiddle.net/u8ysa/)

这样做：

[http://jsfiddle.net/u8ysa/1/](http://jsfiddle.net/u8ysa/1/)

该方法是否会`html()`破坏事件处理程序信息？我需要将对象 HTML 返回到另一个函数，这就是我需要第一个版本的原因（即没有地方可以追加 - 只有连接 - 在构建时）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:27:13.507

是的，任何事件处理程序在将 html 转换为字符串时都会丢失，因为它们不是 DOM 或 HTML 代码的一部分。

解决方案不是将元素转换为字符串 - 通常有更好的方法来做到这一点，通常不涉及`document.write()`

# regex - 使用 htaccess 为 joomla 附加模板参数

> ID：11658872
> 
> 赞同：0
> 
> 时间：2012-07-25T21:25:05.397
> 
> 标签：regex, .htaccess, joomla, parameters

我有一个生成静态页面的 joomla (1.6) 站点，所以当我从移动设备进入时，模板无法识别用户代理。所以事情是重定向到选择移动模板的参数..

对于主页，我必须重定向到 index.php?template=mobile，对于文章必须重定向到 /cat/cat/article-SEF-direction/?template=mobile

在主页不会工作只是“/？template = mobile”必须有“index.php”

所以试图通过 .htaccess 添加我已经添加了这个并为主页重定向工作：

```
# MOBILE
RewriteCond %{HTTP_USER_AGENT} "Windows CE" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Blackberry" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "NetFront" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Palm OS" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Blazer" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Elaine" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "iPhone" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "iPod" [NC,OR]
# RewriteCond %{HTTP_USER_AGENT} "iPad" [NC,OR]
# RewriteCond %{HTTP_USER_AGENT} "Android" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Plucker" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "AvantGo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Symbian OS" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "Nokia" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(nokia|BlackBerry).*$ [NC]

RewriteRule ^/?$ /index.php?template=mobile [NC] 
```

现在的事情是将参数附加到文章 URL，而不必将所有类别和子类别声明为文件夹

这可能需要一个好的正则表达式 =) 感谢您的建议

# facebook - Facebook OAuth 2.0 PHP 注销链接不会在我的网站上注销，但它会在 facebook 上注销

> ID：11658874
> 
> 赞同：0
> 
> 时间：2012-07-25T21:25:09.763
> 
> 标签：facebook, authentication, oauth, logout

好的，正如标题所示，我一直在尝试让 Facebook 的 OAuth 在我的 localhost/ 上运行，我一直在努力解决各种问题，但我只是不知道我的最新问题是什么，即页面加载，并且如果用户已登录，它会显示注销 URL 和 UID . 长话短说，我似乎无法让在我的本地主机中运行的网站将我从 Facebook 和我的网站上注销！任何想法都会有很大的帮助。这是我的代码

```
<?php

session_start();
// store session data

include "src/facebook.php";

$facebook = new Facebook(Array(
    "appId" => "xxx",
    "secret" => "xxx"
));

$user = $facebook->getUser();

echo "UID: " . $user . "<br/>";

    // THIS WAS MY FIRST TRY WHICH DIDNT SUCCEED
// if ($user) {
//  $logoutUrl = $facebook->getLogoutUrl();
//  echo "<a href='" . $logoutUrl . "'>Logout</a>";
// } else {
//  $loginUrl = $facebook->getLoginUrl();
//  echo "<a href='" . $loginUrl . "'>Login</a>";
// }

// WITH THE ABOVE CODE I GET:

// An error occurred with PHP-SDK. Please try again later.
// API Error Code: 191
// API Error Description: The specified URL is not owned by the application
// Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration.

    // THIS WAS MY SECOND TRY AFTER SEARCHING FOR INFO, 
    // ALL I DID WAS MANUALLY ADD THE
    // REDIRECT URI AND ADDED ? , THE REASON IS IF I DIDN'T ADD IT,
    // IT WOULD GIVE ME AN CSRF ERROR
    // STATING THAT THE STATE VALUE IS NOT CORRECT, I SEARCHED FOR THE SOLUTION
    // FOR THAT PROBLEM WITH NO LUCK SO I TRIED THIS

if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
    echo "<a href='" . $logoutUrl . "'>Logout</a>";
} else {
    $loginUrl = $facebook->getLoginUrl(Array(
        "redirect_uri" => "http://localhost/php-sdk/index.php?"
    ));
    echo "<a href='" . $loginUrl . "'>Login</a>";
}

// WITH THE ABOVE CODE I NOW GET A UID AND THE LOGOUT URL DOES APPEAR, BUT ONCE I CLICK IT
// THE USER IS LOGGED OUT LIKE HE SHOULD BUT THEN ON REDIRECT OR RELOAD THE UID STILL 
// APPEARS AND SO DOES THE LOGOUT LINK, EVEN THOUGH THE USER IS NOT LOGGED IN!!

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:21:36.763

这是因为 facebook sdk 商店的[用户 ID](https://github.com/facebook/facebook-php-sdk/blob/master/src/facebook.php#L43)在您的 PHP 会话中，而发生在 facebook 服务器上的注销过程无法为您清除。您可以通过检查输出来查看会话中保存的内容`var_dump($_SESSION);`

要检测存储在会话中的 uid 是否仍然登录，您可以尝试使用 SDK 对象从图形 api 中获取某些内容，例如 ( `$facebook->api('/me')`) 并捕获异常，并在发生异常时清除会话。

另一种解决方案可能是`next`在`getLogoutUrl()`调用中添加一个（就像在 中一样`getLoginUrl()`），当 facebook 将用户发送回该 url 时，您清除会话变量。默认的 facebook 实现在类上有[destroySession](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L1187)`BaseFacebook`（由于某种原因未在官方 sdk 文档中列出）。

# php - PHP - 使用参数调用函数时出现问题

> ID：11658880
> 
> 赞同：2
> 
> 时间：2012-07-25T21:25:49.483
> 
> 标签：php

我需要在 PHP 中调用一个函数，它接受 3 个参数 RGB 值。此函数将 RGB 颜色值转换为 HSL 值，因此`(R,G,B)`需要在括号中。

这是我的功能：

```
function RGBtoHSL($red, $green, $blue) {
  // convert colors
} 
```

其中，如果我对以下内容进行测试调用，它就可以正常工作：

```
RGBtoHSL(255,0,0); 
```

也可以这样工作：

```
RGBtoHSL(255,000,000); 
```

现在，在我的页面下方，我有一个变量`$displayRGB`，它以这种格式保存当前像素 RGB 值`xxx,xxx,xxx`。我已经回显了这个变量来测试格式是否符合我的要求并且确实如此，但是当我尝试将此变量添加到我的函数调用者时，它失败并出现错误“缺少参数 2，缺少参数 3”并指向这一行：

```
RGBtoHSL($displayRGB); 
```

我还在使用 PHP（来自 ASP），有人可以帮我指出正确的方向并将我的假人传给我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:29:45.353

你`$displayRGB`是一个单一的变量（我想是字符串类型的）。您可以做的是将此字符串拆分为一个数组：

```
$rgbArray = explode(',', $displayRGB); 
```

然后将其传递给您的函数

```
RGBtoHSL($rgbArray[0], $rgbArray[1], $rgbArray[2]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T21:28:47.600

您不能将数组（我假设 $displayRGB 是一个数组）作为 PHP 中的“所有三个参数”传入。尝试

```
RGBtoHSL($displayRGB[0], $displayRGB[1], $displayRGB[2]); 
```

或修改您的函数以接受数组。

如果 $displayRGB 是 "xxx,yyy,zzz" 的字符串，您可以在其上运行爆炸

```
$colors = explode(",", $displayRGB); 
```

它会将 $colors 设置为一个数组，其索引包含 xxx、yyy 和 zzz。

然后像我上面提到的那样通过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:34:27.817

试试这个而不是 eval

```
call_user_func_array('RGBtoHSL', explode(',', $displayRGB)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T21:30:16.580

你的 $displayRGB 值是多少？

如果是 "255,0,0" 你应该先做 "explode"

例如

```
<?php

list($r,$g,$b)=explode(',',$displayRGB);
RGBtoHSL($r,$g,$b); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-25T21:29:37.003

您不能将字符串放入函数中并期望它为您分解字符串。

你需要这样：

```
$string = '255,0,0';
$array = explode(',', $string);
RGBtoHSL($array[0], $array[1], $array[2]); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-25T21:31:28.143

我可能会为此大发雷霆，但这肯定会奏效：

```
eval("RGBtoHSL($displayRGB);"); 
```

不要这样做。它会起作用......但不要这样做。

# java - 将大小设置为 TreeSet

> ID：11658882
> 
> 赞同：3
> 
> 时间：2012-07-25T21:25:56.957
> 
> 标签：java

有没有办法像我们对数组一样对 Java 集合中的 TreeSet 进行大小限制？例如在我们做的数组中，

```
anArray = new int[10]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T21:28:47.097

数组具有固定长度，必须在创建时指定。

当您向其中添加元素时， A`TreeSet`会自动增长。你不能设置它的大小。你只能阅读它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T21:29:20.843

这个威胁可以帮助你[在 Java 中修复大小列表](https://stackoverflow.com/questions/5207162/fixed-size-list-in-java)

此外，如果未达到限制，您可以实现自己的集合以添加元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T21:29:37.287

TreeSet 的构造函数都没有指定初始大小，它会在添加元素时增长。并且没有办法限制数据结构的最大大小。每次添加（）一个新元素时，您都需要手动检查它是否超过了允许的最大大小。您可以通过实现从 TreeSet 扩展的子类并覆盖 add()、addAll() 和两个接收 Collection 作为参数的构造函数来指定此行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T21:32:47.957

您可以随时进行自己的实施。这是一个让您入门的示例；您可能会发现您希望相应地对其进行调整：

```
public class BoundedTreeSet<E> extends TreeSet<E> {

    private final int limit;

    public BoundedTreeSet(final int limit) {
        super();
        this.limit = limit;
    }

    public BoundedTreeSet(final int limit, final Collection<? extends E> c) {
        super(c);
        this.limit = limit;
    }

    public BoundedTreeSet(final int limit, final Comparator<? super E> comparator) {
        super(comparator);
        this.limit = limit;
    }

    public BoundedTreeSet(final int limit, final SortedSet<E> s) {
        super(s);
        this.limit = limit;
    }

    @Override
    public boolean add(final E e) {
        if (size() >= limit) {
            return false;
        }

        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        if (size() + c.size() >= limit) {
            return false;
        }

        return super.addAll(c);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-28T17:38:34.300

这是`BoundedTreeSet`Apache Solr 中的一个实现，它在尝试插入“完整”集合时保持最大值：

[http://lucene.apache.org/solr/4_6_0/solr-core/org/apache/solr/util/BoundedTreeSet.html](http://lucene.apache.org/solr/4_6_0/solr-core/org/apache/solr/util/BoundedTreeSet.html)

Maven 工件可在此处获得：

```
<dependency>
   <groupId>org.apache.solr</groupId>
   <artifactId>solr-core</artifactId>
   <version>4.6.0</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T22:09:46.177

最接近具有容量限制的现有集合的是 BlockingQueue。向队列添加项目时，可以指定零秒（或非常小的）阻塞超时，以便在超出容量时抛出异常。有关更多详细信息，请参阅[BlockingQueue.offer()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#offer%28E,%20long,%20java.util.concurrent.TimeUnit%29)

# vb.net - 为什么我要在 VB.net 中使用哈希表作为下拉列表

> ID：11658887
> 
> 赞同：0
> 
> 时间：2012-07-25T21:26:15.460
> 
> 标签：vb.net, list, hashtable

直接来自 w3schools 网站，我为什么要将这些项目放入哈希表中？

这是否更适用于大量数据，而这只是一个简单的演示？否则我为什么要花时间把它放到一个哈希表中，为什么不把它放到一个数组中呢？

```
dim mycountries=New Hashtable
  mycountries.Add("N","Norway")
  mycountries.Add("S","Sweden")
  mycountries.Add("F","France")
  mycountries.Add("I","Italy")
  rb.DataSource=mycountries
  rb.DataValueField="Key"
  rb.DataTextField="Value"
  rb.DataBind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:28:20.043

一个数组包含一堆单值的东西。

```
dim mycountries = new Collection ' My VB.Net is very rusty... hope this is right
mycountries.Add("Norway")
mycountries.Add("Sweden")
mycountries.Add("France")
mycountries.Add("Italy") 
```

哈希表（或者实际上也是字典）包含一堆键值对。

```
mycountries.Add("N","Norway")
' etc. 
```

当后来枚举一个 Hashtable 时，会从 Collection 中得到一个`KeyValuePair<string,string>`而不是仅仅得到一个。`string`

此示例将键设置为值的简短版本，因此数组不起作用（它只能保存一个值）。

当然，您可以使用一个数组来保存一个类型，该类型又具有一个键和一个值，但使用 Hashtable 更简单。

# c# - 为什么我没有注意到文件已从 FileSystemWatcher 重命名

> ID：11658894
> 
> 赞同：1
> 
> 时间：2012-07-25T21:26:52.853
> 
> 标签：c#, .net, wpf

我有一些代码可以监视文件系统的更改并更新文件表示的容器。在您重命名目录之前，大多数情况下都可以正常工作。我希望为重命名目录的所有文件和子文件夹获得一个重命名事件，因为它们具有新路径，但我只收到一条消息，表明父目录已更改名称。有没有我忘记的事件，或者需要设置的标志？目前我正在处理目录重命名并遍历我的集合以将文件更新为新名称，但我觉得应该有一些东西可以接收每个文件的通知。

我的设置：

```
FileSystemWatcher watcher = new FileSystemWatcher(item.Path);
watcher.EnableRaisingEvents = true;
watcher.Created += new System.IO.FileSystemEventHandler(OnMediaCreated);
watcher.Deleted += new System.IO.FileSystemEventHandler(OnMediaDeleted);
watcher.Changed += new System.IO.FileSystemEventHandler(OnMediaChanged);
watcher.Renamed += new System.IO.RenamedEventHandler(OnMediaRenamed); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:42:22.237

我认为如果容器更改其名称，通常不会认为包含的文件正在更改。这就是为什么您没有收到包含文件的事件的原因。

我可以建议您创建目录结构的双链接树表示，以便每个文件和目录都知道它所在的容器。然后在文件表示中创建一个 ToString() 覆盖，将您的树遍历到根构建显示字符串。

当您收到目录重命名事件时，您可以在您的表示中找到该目录，并为从该分支中​​提取的每个文件触发更新。

这样你就不必循环遍历事物，而是使用递归，如果这对你来说更优雅的话。

另外，请注意 FileSystemWatcher 有一个缓冲区溢出问题，您可能想检查一下，以免丢失事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T22:23:14.777

好的，首先，请在帖子中使用一致的术语。您几乎可以互换地提到目录、文件夹和文件。为了便于讨论，我将把它放到文件夹和文件中。根据您的描述，您正在观看一个包含文件和可能的子文件夹的文件夹。您重命名文件夹，并且您期望所有文件（和子文件夹，如果适用）的媒体重命名事件也会被引发？不，我不相信你会得到它们。

FileSystemWatcher 挂钩以监视文件夹的内容，而不是文件夹本身。您可以通过连接到文件夹并重命名文件夹然后重命名文件夹中的项目来验证此行为。（并显示更改的完整路径）您会注意到重命名项目的路径保留了原始文件夹名称。重命名文件夹不会使观察者无效，但它也不会捕获事件。但是，如果您在监视文件夹下有一个子文件夹，其下有一个文件，并重命名子文件夹及其子文件，则子文件夹的完整路径将反映其父文件夹的名称更改。有点难以描述，但是：（IncludeSubdirectories = true）

```
Folder1 (watched)   
  File1   
  Folder2
    File2 
```

重命名文件夹 1，然后重命名文件 1。未检测到文件夹 1 的名称更改，不，文件 1 也不会触发更改。它的名字没有改变。在 Folder1 的名称更改后重命名 File1 仍将显示“Folder1”作为路径。将检测到重命名 Folder2 并报告新名称。在重命名 Folder2 后重命名 File2 将被检测到，并且 File2 的完整路径将显示更新后的 Folder2 文件夹名称。

如果您想检测对监视目录的重命名，那么您实际需要做的是监视其上方的目录级别，并将过滤器设置为您真正感兴趣的目录。要么使用一个 FSW 和 IncludeSubdirectories，要么使用两个文件系统监视器，一个看文件夹，另一个看它的内容。当检测到文件夹更改时，根据需要使用文件夹名称更改更新您的外部引用，然后重新初始化内容观察程序，以便正确返回路径名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:57:48.253

您需要启用 FileSystemWatcher 对象以包含子目录。

```
watcher.IncludeSubdirectories = true; 
```

# ruby-on-rails - Hartl 教程设置：gem 配置问题

> ID：11658899
> 
> 赞同：0
> 
> 时间：2012-07-25T21:27:37.220
> 
> 标签：ruby-on-rails

我一直试图弄清楚这一点已经太久了。我正在使用[Hartl RoR 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2#sec%3ainstall_git)并尝试设置所有程序。

我正在尝试设置允许我从终端直接在 Sublime Text 2 中打开文件的 gem。不幸的是，因为我是菜鸟，我不能在这里发布图片。但是，如果您搜索“listing 1.1”，这就是我感到困惑的领域。

我不断收到如下错误消息：

```
Jonathans-MacBook-Air:~ jbh5079$ subl ~/.gemrc
-bash: subl: command not found

Jonathans-MacBook-Air:~ jbh5079$ ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl
ln: /Users/jbh5079/bin/subl: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:42:19.520

这不是 rails 问题 - 这是命令行/bash 问题，找不到命令 subl。对于设置它的教程，谷歌“mac从命令行启动崇高”产生

[https://gist.github.com/1195304](https://gist.github.com/1195304)

其中。

# shell - 在 IBM i（又名 OS/400，iSeries）中批量编译 Cobol 代码

> ID：11658910
> 
> 赞同：1
> 
> 时间：2012-07-25T21:28:29.530
> 
> 标签：shell, ibm-midrange, cobol

我是 COBOL 和 AS/400 IBM iSeries 领域的新手，并且对这个社区中使用的最佳实践感兴趣。

人们如何对所有 COBOL 成员或一次多个成员执行批量编译？

我看到 AS/400 源文件是按库、文件对象和成员组织的。如何检测哪些文件成员是要编译的 COBOL src 代码？你能通过一些 qshell 命令获取成员文件类型（在这种情况下应该是 CBL）吗？

谢谢，阿库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T22:51:07.383

常见的PDM手动方法：

可能最简单和最广泛使用的方法是在“绿屏”（5250 仿真）会话中使用 PDM（程序开发管理器）。这使您可以手动选择要编译的每个程序。它可能不是您要寻找的答案，但它可能是使用最广泛的，因为它的方法简单，并且将决定权交给了开发人员。

人们通常使用 Start PDM 命令`STRPDM`，它提供了一个菜单，您可以在其中选择一个选项来处理库、对象（文件）或成员的列表。（就个人而言，我更喜欢直接使用相应的命令，`WRKLIBPDM`、`WRKOBJPDM`或`WRKMBRPDM`。）在每个级别中，您都可以通过按 F17（shift F5）来过滤列表。

F18 (shift F6) 允许您将选项设置为批量编译。这意味着每个单独的编译都将被提交到一个作业队列，以在其自己的作业中进行编译。您还可以指定要使用的作业描述，这将确定作业放置在哪个作业队列中。一些作业队列可能是单线程的，而另一些可能同时运行多个作业。您可以使用 F16 自定义定义自己的 PDM 选项。

如果您选择从库级别开始，您可以在您希望使用其对象（源文件）的每个库旁边输入选项 12。

在对象级别，您可能只想查看 *FILE 类型的对象，以及属性“PF-SRC”（或可能是“PF38-SRC”）。然后，您可以在您希望与其成员一起使用的任何源文件旁边输入选项 12。

在成员级别，您可能希望过滤以键入`*CBL*`，因为（取决于系统上的操作方式）COBOL 成员可能是 CBL、CBLLE、SQLCBL、SQLCBLE，甚至是 System/38 或 /36 变体。在您希望编译的每个成员旁边键入选项 14（或自定义选项）。您可以使用 F13（Shift F1）在列表中重复一个选项。

此方法使用手动选择，不会自动选择所有要编译的 COBOL 程序。但它确实允许您一次提交大量编译，并使用程序员自行决定选择哪些成员以及使用哪些选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T23:36:41.170

IBM i 上的许多（如果不是大多数）开发人员通常对 qshell 不是很熟悉。我们大多数人都在 CL 中编写自动化脚本。像我这样的少数叛徒也可能使用 REXX，但遗憾的是这种情况很少见。我们不经常想要重新编译系统中的所有程序。通常我们只编译我们正在使用的程序，或者只选择那些受某些文件更改影响的程序。

编译一切可能不是一个简单的问题。请记住，一些库或源文件可能只是旧源的存档副本，您可能真的不想编译，或者可能不再成功编译。您可能想要区分哪些成员是 COBOL 抄写本，而不是程序。使用 ILE，您可能希望区分哪些成员应编译为程序、模块或服务程序。在编译与它们绑定的程序之前，您可能需要编译模块。这些模块可能不一定是用 COBOL 编写的，或者 COBOL 模块可能绑定到其他语言的 ILE 程序中，可能是 CL 或 RPG。

那么如何在 CL 程序中自动重新编译完整的系统呢？您可以使用`DSPOBJD *ALL/*ALL *FILE OUTPUT(*FILE) OUTFILE( ___ )`. 输出文件包含一个文件属性列，用于区分哪些对象是源文件。您的 CL 程序可以读取它，并且对于每个源文件，它可以生成一个包含详细成员信息的文件，其中包含`DSPFD &lib/&file TYPE(*MBR) OUTPUT(*FILE) OUTFILE( ___ )`. 该文件包含成员类型信息，可以帮助您确定哪些成员是 COBOL。从那里您可以确定`RTVOBJD`它是否是程序、模块和/或服务程序。

您可能还需要了解如何编译单个程序、模块或服务程序的选项。我经常通过创建一个源文件来解决这个问题，我通常称之为 BUILD，每个需要特殊处理的对象都有一个成员。这个成员可能是 CL，但我经常使用 REXX。事实上，我可能很想在 REXX 中完成所有事情，因为它作为一种动态解释语言具有强大的功能。但这只是我。

# c++ - Mixing debug and release library/binary - bad practice?

> ID：11658915
> 
> 赞同：28
> 
> 时间：2012-07-25T21:28:49.893
> 
> 标签：c++, visual-studio-2010, visual-studio

Is it a bad practice to use a release version of 3rd party library in debug binary?

I am using a 3rd party library and compiled a release .lib library. My exe is in debug mode development. Then I got:

```
error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in test1.obj 
```

After some googling I found that is because I am trying to mix release with debug, and I should probably compile the library in debug mode or otherwise muddle with the _ITERATOR_DEBUG_LEVEL macro. But I am just curious if that is the recommanded way and why. It just seem cumbersome that I need to compile and keep a record of both release and debug binaries for every 3rd party library I intend to use, which will be many very soon, while having no intention to debug into these code.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-25T21:41:04.293

Mixing debug and release code is bad practice. The problem is that the different versions can depend on different fundamental parts of the C++ runtime library, such as how memory is allocated, structures for things like iterators might be different, extra code could be generated to perform operations (e.g. checked iterators).

It's the same as mixing library files built with any other different settings. Imagine a case where a header file contains a structure that is used by both application and library. The library is built with structure packing and alignment set to one value and the application built with another. There are no guarantees that passing the structure from the application into the library will work since they could vary in size and member positions.

Is it possible to build your 3rd party libraries as DLLs? Assuming the interface to any functions is cleaner and does not try to pass any STL objects you will be able to mix a debug application with release DLLs without problems.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-04-23T16:54:14.323

Mixing debug and release library/binary is good and very useful practice.

Debugging a large solution (100+ projects as an example) typically is not fast or even could not be possible at all (for an example when not all projects can be built in debug). Previous commentators wrote that debug/release binary could have different alignment or another staff. It's not true. All linking parameters are same in debug and release binaries because they depends on the same architecture.

You have to remove all optimizations (/Od) from the selected project. Then assign a release c++ runtime.

The issue came because you have defined _DEBUG in the project. Remove the macro from the definitions (Project->Properties->Preprocessor->Preprocessor Definitions).

If the macro isn't in the Preprocessor Definitions, then you have to add it in "UndefinePreprocessorDefinitions".

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T21:33:29.267

The fact that it doesn't compile should be sufficient to prove it's bad practice.

Regarding maintaining separate builds - you don't need to do that. Here's a workaround that previously worked for me:

```
#ifdef _DEBUG
#define DEBUG_WAS_DEFINED
#undef _DEBUG
#endif

#include <culprit>

#ifdef DEBUG_WAS_DEFINED
#define _DEBUG
#endif 
```

Let me know if this works for you.

# sql - 是否有用于 SQL 连接的 WiX 3.5 兼容扩展对话框？

> ID：11658919
> 
> 赞同：3
> 
> 时间：2012-07-25T21:28:59.140
> 
> 标签：sql, wix, wix3.5, wix3, wix-extension

我们希望向我们的 WiX 安装程序添加一个对话框，提示用户连接 SQL 服务器：服务器地址、身份验证类型和 SQL 登录名/密码。测试连接按钮也很好。

我的搜索出现了[msiext](https://github.com/dblock/msiext)项目，但我无法在我的 WiX 项目中引用它的 dll（例如，WixCommonUiExtension.dll），因为它们是为 WiX 3.0 构建的。做了一些谷歌搜索，我[不是唯一](http://msiext.codeplex.com/workitem/13649)遇到此问题的用户。人们甚至尝试自己针对 WiX 3.5 构建 msiext 项目，但基于该链接中的帖子，我不想走那条路。

谁能提供或指向我可以使用的对话框？我不想在这里重新发明轮子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T04:57:01.727

我知道这有点晚了，但你可以试试[http://msiext.codeplex.com/](http://msiext.codeplex.com/)项目。该网站声称他们有这样的对话

# objective-c - 如何在 Objective-C 中获得实例变量的名称？

> ID：11658920
> 
> 赞同：0
> 
> 时间：2012-07-25T21:28:58.717
> 
> 标签：objective-c, ios, variables, encoding, metadata

我正在尝试从 Objective-C 类中获取实例变量的名称。假设我有一个看起来像这样的类：

```
@interface MyClass : NSObject

@property (nonatomic, copy) NSSNumber *myVar;

@end 
```

给定 myVar，我想得到“myVar”。然后我可以在这样的日志中使用它：

```
MyClass *myObject = [[myClass alloc] init];
NSLog(@"The variable is named: %@", getVarName([myObject myVar])); 
```

然后日志会说：`The variable is named myVar`. 谢谢您的帮助！

PS我想这样做的原因是创建一种用于对归档变量进行编码的方法。所以当我写我的`encodeWithCoder`方法时，我可以做这样的事情：

```
- (void)encodeWithCoder:(NSCoder *)aCoder
{
    NSArray *varsForEncoding = [[NSArray alloc] initWithObjects:var1, var2, var3, nil];
    for (NSObject *var in varsForEncoding)
    {
        [aCoder encodeObject:var forKey:getVarName(var)];
    }
} 
```

然后在`initWithCoder`. 这将防止错别字搞砸了，例如`@"myVar"`在编码时使用 key 但`@"mVar"`在初始化程序中键入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:32:35.173

你可以试试这个方法：

```
//returns nil if property is not found
-(NSString *)propertyName:(id)property {  
  unsigned int numIvars = 0;
  NSString *key=nil;
  Ivar * ivars = class_copyIvarList([self class], &numIvars);
  for(int i = 0; i < numIvars; i++) {
    Ivar thisIvar = ivars[i];
    if ((object_getIvar(self, thisIvar) == property)) {
        key = [NSString stringWithUTF8String:ivar_getName(thisIvar)];
        break;
    }
  } 
  free(ivars);
  return key;
} 
```

（[来源](https://stackoverflow.com/questions/2484778/anyway-to-get-string-from-variable-name)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T11:25:07.373

**只需使用一行代码即可。**

```
#define NSLogVariable(x) NSLog( @"Variable : %s = %@",#x,x) 
```

**将它与标题一起定义为宏并在任何地方使用它。** 例如：

```
NSString *myObj=@"abcd";
NSLogVariable(myObj); 
```

它会显示

```
Variable : myObj = "abcd" 
```

**希望对某人有所帮助。**

# java - JQuery AutoComplete 与 Spring MVC 返回列表，但未过滤

> ID：11658924
> 
> 赞同：1
> 
> 时间：2012-07-25T21:29:01.073
> 
> 标签：java, jquery, spring, spring-mvc

我有一个 Spring 应用程序，我想在 JQuery 中实现自动完成功能。如果我有一个本地数组，它可以完美地工作并在我在输入框中输入值时过滤列表。如果我将其更改为使用数据源，它会返回列表，但不会根据输入框的条目过滤列表。

我已多次阅读 Jquery UI 教程并使用了位于[http://viralpatel.net/blogs/spring-3-mvc-autocomplete-json-tutorial/](http://viralpatel.net/blogs/spring-3-mvc-autocomplete-json-tutorial/) 和[http://blog.m1key.me/2011的示例/10/jquery-ui-autocomplete-spring-mvc.html](http://blog.m1key.me/2011/10/jquery-ui-autocomplete-spring-mvc.html)但我仍然找不到明确的答案为什么本地数组值会自动过滤但返回的列表没有？

我可以通过在我的查询中过滤自己来让它工作，但由于它使用本地数组过滤，我认为它会对从数据库返回的列表执行相同的操作。

难道我做错了什么？数据库中的列表是否应该像本地数组一样被过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:54:07.207

```
@RequestMapping(value = "/getProductAutoCompleteList.do", method = RequestMethod.GET, headers="Accept=*/*")
    public @ResponseBody List<String> getProductAutoComplete(@RequestParam("term") String prodName, HttpServletResponse response){
        logger.info("getProductAutoCompleteList called with parameter: " + prodName);
        response.setStatus(HttpServletResponse.SC_OK);
        final List<String> productList = ProductSearchHelper.getProductAutoCompleteList(prodName);

        response.setContentType("application/json");
        return productList;
    } 
```

确保你

1.  指定 response.setStatus(HttpServletResponse.SC_OK);
2.  可选，setContentType 为 application/json，具有 @ResponseBody 注解，Spring MVC 调用一个建立在 Jackson JSON 处理器上的 MappingJacksonHttpMessageConverter。当您使用 mvc:annotation-driven 配置元素和 Jackson 存在于您的类路径中时，此实现会自动启用。

# asp.net-mvc - .ajax 调用没有到达我的控制器...不知道为什么

> ID：11658925
> 
> 赞同：0
> 
> 时间：2012-07-25T21:29:03.880
> 
> 标签：asp.net-mvc, jquery

我正在尝试对我的控制器进行 Ajax 调用并传回一个字符串......由于某种原因，我无法进入我的控制器......不知道我错过了什么......

```
$.ajax({
                url: dummyURL,
                success: function (result) {
                    $('#resultDiv').append('<b>' + result + '</b>');
                    setTimeout(function () {
                        window.location = RedirectUrl;
                    }, 1000);
                }
            }); 
```

这就是我设置我的 url 字符串的方式：

```
var dummyURL = '@Url.Action("AddPatient", "AddFoundPatient", new { FirstName = "-1", LastName = "-2", DOB = "-3", MRN = "-4", EMPIID = "-5", popID = (int)TempData["POPULATIONID"] })';

var FName = rowData['First_Name'];
            var LName = rowData['Last_Name'];
            var DOB = rowData['DOB'];
            var MRN = rowData['medipacId'];
            var EMPIID = rowData['EMPIID'];
            //Add Patient call
            var path = dummyURL.replace("-1", FName);
            path = path.replace("-2", LName);
            path = path.replace("-3", DOB);
            path = path.replace("-4", MRN);
            path = path.replace("-5", EMPIID); 
```

这是我试图调用的 Action 方法......

```
public string AddFoundPatient(string FirstName, string LastName, string DOB, string MRN, string EMPIID, int popID) 
```

这是我生成的查询字符串...

```
/AddFoundPatient/AddPatient?FirstName=BETTY &amp;LastName=WHITE &amp;DOB=1925-10-25 &amp;MRN=840108105 &amp;EMPIID=11011833 &amp;popID=2 
```

我从来没有在我的操作中遇到调试语句......我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:31:37.860

控制器和动作混淆了

```
var dummyURL = '@Url.Action("AddFoundPatient", "AddPatient", new { FirstName = "-1", LastName = "-2", DOB = "-3", MRN = "-4", EMPIID = "-5", popID = (int)TempData["POPULATIONID"] })'; 
```

# matrix - Tigase xmpp 服务器 Matrix XMPP SDK 预绑定

> ID：11658926
> 
> 赞同：0
> 
> 时间：2012-07-25T21:29:05.973
> 
> 标签：matrix, xmpp

你好！请帮我弄清楚为什么我不能通过 C# 通过 BOSH 登录，但可以通过 Strophe 登录。我使用矩阵 XMPP SDK。这是我使用的代码：

...

```
XmppClient xmpp = new XmppClient();
xmpp.SetXmppDomain("xmpptest.com");    

xmpp.Transport = Matrix.Net.Transport.BOSH;
xmpp.Uri = new System.Uri("http://xmpptest.com:5280");

xmpp.Username = "ksu@xmpptest.com";
xmpp.Password = "123456";

xmpp.OnBind += new EventHandler<JidEventArgs>(xmpp_OnBind);
xmpp.OnAuthError += new EventHandler<Matrix.Xmpp.Sasl.SaslEventArgs>(xmpp_OnAuthError);
xmpp.OnLogin += new EventHandler<Matrix.EventArgs>(xmpp_OnLogin);
xmpp.OnMessage += new EventHandler<MessageEventArgs>(xmpp_OnMessage);
xmpp.OnPrebind += new EventHandler<Matrix.Net.PrebindEventArgs>(xmpp_OnPrebind);
xmpp.OnBindError += new EventHandler<IqEventArgs>(xmpp_OnBindError);
xmpp.OnBind += new EventHandler<JidEventArgs>(xmpp_OnBind);
xmpp.OnPresence += new EventHandler<PresenceEventArgs>(xmpp_OnPresence);
xmpp.OnBeforeSasl += new EventHandler<Matrix.Xmpp.Sasl.SaslEventArgs>(xmpp_OnBeforeSasl);

xmpp.Prebind(); 
```

...但是在 Prebind 方法之后什么都没有发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:11:07.300

用户名只能是 ksu，而不是 ksu@xmpptest.com。如果仍然失败，XML 日志会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:25:00.930

通过安装 ejabberd 服务器而不是 Tigase 来解决。上面的代码运行良好！

# python - 如何在字符串中多次出现的字符上拆分字符串

> ID：11658931
> 
> 赞同：0
> 
> 时间：2012-07-25T21:29:20.203
> 
> 标签：python, string, parsing, indexing, split

我在尝试将字符串解析为两个字段时遇到了一些逻辑问题。名称和版本。我一直在拆分“/”，它对于其中只有一个“/”的字符串非常有效。例如：

```
strString = someName/A
nameVer = strString .split('/')
name = nameVer[0]
ver = nameVer[1] 
```

这将返回 name=someName 和 ver=A。这就是我想要的。问题是当我在字符串中有多个“/”时。特别是这3种情况：

```
Part ="someName//" #Expected output: name=someName ver=\
Part1="some/Name/A" #Expected output:name=some/Name ver=A
Part2="some/Name//" #Expected output:name=some/Name ver=/ 
```

名称和版本都可以是或包含“/”。我已经尝试了很多事情，包括跟踪“/”的索引并抓住两者之间的内容。在某些情况下，我还在字符串中添加了括号（“[some/Name//]”），这样我就可以索引字符串的第一个和最后一个字符。对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:35:37.677

根据 BrenBarn 和 sr2222 的一些有用评论，我建议以下解决方案。

OP应该要么

*   确保版本字符串不包含任何 '/' 字符，然后`rsplit`按照 sr2222 的建议使用

**或者**

*   为名称版本划分选择不同的分隔符

忽略最后一个字符（以便可以将其分配给`ver`变量）的解决方案将是

```
ind = Part[:-1].rindex('/')
name = Part[:ind+1]
ver = Part[ind+1:] 
```

在 OPs 输入上，这会产生所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T23:36:47.523

如果分隔符的任何实例可能正在执行分隔，则选择太多。以你的最后一个例子，`some/name//`. 三个斜线中的哪一个是分隔符？字符串可以按顺序解析为 as `("some", "name//")`、 as`("some/name", "/")`或 as `("some/name/", "")`。

该怎么办？假设版本必须是非空的（排除选项 3），否则名称部分应该是最大的。如果你喜欢这些规则，这里有一个正则表达式可以完成这项工作：`r'^(.*)/(.+)$'`. 你可以像这样使用它：

```
name, ver = re.match(r'^(.*)/(.+)$', "some/name/").groups() 
```

这是它的作用：

```
>>> re.match(r'^(.*)/(.+)$', "name//").groups()
('name', '/')
>>> re.match(r'^(.*)/(.+)$', "some/name/a").groups()
('some/name', 'a')
>>> re.match(r'^(.*)/(.+)$', "some/name//").groups()
('some/name', '/')
>>> re.match(r'^(.*)/(.+)$', "some/name/").groups()
('some', 'name/') 
```

简而言之，它在后面有*东西*的最后一个斜杠上分裂（可能是最后一个斜杠）。如果您不喜欢这种方法，则需要提供有关您的想法的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:04:45.443

这是我编写的几乎可以处理所有情况的代码。它不处理的唯一情况是名称和版本不明确并且您无法判断“/”是名称还是版本的一部分。谢谢大家的意见。

```
Part ="[0717_PFM1//]"
Part1="[0717_PFM1/A]"  #generic case
Part2="[0717/_PFM1/A]" 
Part3="[07/17/_PFM1//]" #Test case below
#Part3="[0717/_PFM1//B]" #Not working, ambigous: cant tell if the ending slash is part     of name or ver

import re
lastCharIndex = Part3.index(']')
list1 =[]
counter = 0
numberOfSlashes = Part3.count("/")
if numberOfSlashes > 1:
   nameVer = Part3.split("/")
   name1, ver1 = re.match(r'^(.*)/(.+)$', Part3).groups()

   if nameVer[2].strip("]") or ver1.strip("]") == "":
      ver = "/"
   else:
      ver = nameVer[2].strip("]")

   name = nameVer[0].strip('[')
   if len(name1)>len(name):
      name = name1

   if len(ver1) > len(ver):
      ver = ver1

   name = name.rstrip("/")
else:

   nameVer = Part3.split("/")
   name, ver = nameVer[0], nameVer[1]

print "name",name.strip('['), "ver",ver.strip(']') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T22:21:06.333

对于您发布的案例，这将起作用：

```
if part.endswith('//'):
    name, ver = part[:-2], '/’
else:
    name, ver = part.rsplit(’/’, 2) 
```

# vb.net - 默认异常处理

> ID：11658937
> 
> 赞同：0
> 
> 时间：2012-07-25T21:29:43.087
> 
> 标签：vb.net, exception, exception-handling

我在我的项目中试图做的是每次我提出一个

```
try
      ...
catch ex as exception
      ...some logging code
end try 
```

拥有它，以便在某个地方预定义一个类，以便在触发捕获时执行一些代码。不确定是否可行，但它会让我的生活更轻松，代码中的重复也更少。

就像是

```
public sub NullReferenceException()
       runLogginfunction()
end sub 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:24:25.763

您不能同时捕获异常并自动记录它。你可以有一个或另一个。对于桌面应用程序，您可以使用 UnhandledExceptionEventHandler 来捕获和记录异常，在 ASP.NET 中您可以使用 global.aspx 来处理同样的事情。或者您可以捕获异常，并决定如何处理它——这可以包括日志记录，但必须手动处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:33:56.907

为什么这行不通？

```
 try
       ...
 catch ex as exception
       NullReferenceException(ex)
 end try

 module allstuff
    public sub NullReferenceException(ex as exception)
           runLogginfunction(ex)
    end sub
end module 
```

# sql-server - SQL Server：FOR XML PATH - 嵌套/分组

> ID：11658942
> 
> 赞同：26
> 
> 时间：2012-07-25T21:30:03.477
> 
> 标签：sql-server, for-xml-path

我的数据看起来像：

```
OrderID CustomerID  ItemID  ItemName
10000   1234        111111  Product A
10000   1234        222222  Product B
10000   1234        333333  Product C
20000   5678        111111  Product A
20000   5678        222222  Product B
20000   5678        333333  Product C 
```

我想在 SQL Server 中编写一个 T-SQL 查询来返回如下数据：

```
<Root>
  <Order>
    <OrderID>10000</OrderID>
    <CustomerID>1234</CustomerID>
    <LineItem>
      <ItemID>11111</ItemId>
      <ItemName>Product A</ItemName>
    </LineItem>
    <LineItem>
      <ItemID>22222</ItemId>
      <ItemName>Product B</ItemName>
    </LineItem>
    <LineItem>
      <ItemID>33333</ItemId>
      <ItemName>Product B</ItemName>
    </LineItem>
  </Order>
  <Order>
    <OrderID>20000</OrderID>
    <CustomerID>5678</CustomerID>
    <LineItem>
      <ItemID>11111</ItemId>
      <ItemName>Product A</ItemName>
    </LineItem>
    <LineItem>
      <ItemID>22222</ItemId>
      <ItemName>Product B</ItemName>
    </LineItem>
    <LineItem>
      <ItemID>33333</ItemId>
      <ItemName>Product B</ItemName>
    </LineItem>
  </Order>
</Root> 
```

我尝试使用以下方法以 XML 格式返回查询：

```
FOR XML PATH ('Order'), root ('Root') 
```

但这给了我`Order`每行的一个节点（总共 6 个），而每行只有一个节点`orderId`（总共 2 个）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-25T22:16:39.653

```
select  
    OrderID,
    CustomerID,
    (
        select 
        ItemID,
        ItemName
        from @Orders rsLineItem
        where rsLineItem.OrderID = rsOrders.OrderID
        for xml path('LineItem'), type
    )
from (select distinct OrderID, CustomerID from @Orders) rsOrders
FOR XML PATH ('Order'), root ('Root') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-09T09:35:45.143

为了完成：这是一个没有子选择的解决方案，对于大表应该执行得更快。相反，它将表分组的次数与 XML 中的级别一样多，并使用 GROUPING_ID 标识级别（请参阅[https://technet.microsoft.com/en-us/library/bb522495(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/bb522495(v=sql.105).aspx)和[https://docs.microsoft.com/en-us/sql/relational-databases/xml/use-explicit-mode-with-for-xml](https://docs.microsoft.com/en-us/sql/relational-databases/xml/use-explicit-mode-with-for-xml)）：

```
with rsOrders as (
  select '10000' OrderID, '1234' CustomerID, '111111' ItemID, 'Product A' ItemName union
  select '10000' orderId, '1234' customerID, '222222' itemID, 'Product B' ItemName union
  select '10000' orderId, '1234' customerID, '333333' itemID, 'Product C' ItemName union
  select '20000' orderId, '5678' customerID, '111111' itemID, 'Product A' ItemName union
  select '20000' orderId, '5678' customerID, '222222' itemID, 'Product B' ItemName union
  select '20000' orderId, '5678' customerID, '333333' itemID, 'Product C' ItemName 
)
select case 
         when GROUPING_ID(ItemID) = 0 then 3 
         when GROUPING_ID(OrderID) = 0 then 2 
         else 1 
         end as tag,
       case 
           when GROUPING_ID(ItemID) = 0 then 2 
         when GROUPING_ID(OrderID) = 0 then 1 
         else null
       end as parent,
       null       as 'Root!1',
       OrderID    as 'Order!2!OrderID!element', 
       CustomerID as 'Order!2!CustomerID!element', 
       ItemID     as 'LineItem!3!ItemID!element', 
       ItemName   as 'LineItem!3!ItemName!element'
  from rsOrders
 group by grouping sets ((), (OrderID, CustomerID), (OrderID, CustomerID, ItemID, ItemName))
 order by OrderID, CustomerID, ItemID, ItemName
   for xml explicit, type 
```

# windows - 将 Windows 7 UEFI 条目写入 NVRAM

> ID：11658944
> 
> 赞同：2
> 
> 时间：2012-07-25T21:30:19.043
> 
> 标签：windows, boot, efi, uefi

我目前正在编写一个脚本来对我负责的多台实验室机器使用 Windows 7 进行映像，不幸的是它们是 UEFI Dell 机器，它们以一种愚蠢的方式工作。在我使用戴尔设置实用程序创建映像的机器上，Windows 的启动菜单中有一个 UEFI 条目，它加载了 /boot/Microsoft/bootx64.efi 文件或类似的文件，当我对机器进行映像时，一切正常，除了当我启动它们时，我得到了很好的旧“找不到可启动设备错误”，当我进入戴尔设置实用程序时，没有 Windows 条目。我可以手动添加一个指向此 UEFI 分区和启动文件的条目，然后它会在启动时正常启动并奇怪地向 NVRAM 添加另一个条目，该条目以典型名称“Windows 启动管理器”或其他名称指向同一文件。我一直在尝试找到某种方法来添加此 NVRAM 条目，而无需手动进入戴尔设置，因为我正在对大量机器进行映像，这只会使过程复杂化。我最初尝试在映像完成后链式加载 grub 引导加载程序以检测 Windows 安装并启动它，理论上这会将条目添加到 NVRAM 本身并阻止我拥有两个条目或不得不自己与机器交互。我也找不到任何有关在 linux 端直接向 NVRAM 添加条目的信息，这与我通过戴尔设置实用程序完成的操作相同。有人对此有经验吗？我最初尝试在映像完成后链式加载 grub 引导加载程序以检测 Windows 安装并启动它，理论上这会将条目添加到 NVRAM 本身并阻止我拥有两个条目或不得不自己与机器交互。我也找不到任何有关在 linux 端直接向 NVRAM 添加条目的信息，这与我通过戴尔设置实用程序完成的操作相同。有人对此有经验吗？我最初尝试在映像完成后链式加载 grub 引导加载程序以检测 Windows 安装并启动它，理论上这会将条目添加到 NVRAM 本身并阻止我拥有两个条目或不得不自己与机器交互。我也找不到任何有关在 linux 端直接向 NVRAM 添加条目的信息，这与我通过戴尔设置实用程序完成的操作相同。有人对此有经验吗？无法找到有关在 linux 端直接向 NVRAM 添加条目的任何信息，这与我通过戴尔设置实用程序完成的操作相同。有人对此有经验吗？无法找到有关在 linux 端直接向 NVRAM 添加条目的任何信息，这与我通过戴尔设置实用程序完成的操作相同。有人对此有经验吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T21:05:01.833

Boot Manager 的操作在[UEFI 规范](http://www.uefi.org/specs/agreement)的第 3 章中定义。

如果您可以编写 UEFI 应用程序并引导至 UEFI shell 并运行您的应用程序，则可以使用运行时服务设置变量以创建 BootOption 并将该 BootOption 的编号添加到 BootOrder。这就是 MS 引导加载程序在检测到没有为 Windows 定义的 BootOption 时所做的事情，这就是在您引导到 Windows 后列表中有一个新条目的方式。

不确定您的平台的默认引导顺序是什么，但默认情况下可能可以使用 UEFI shell 引导到 USB 密钥，因为由于制造要求，这是默认的常见配置。

在 sourceforge 上查看[有关 tianocore 的项目，](http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=Projects)以更好地了解做您想做的事情所涉及的内容。

# javascript - 每 10 秒刷新一次 Jquery Mobile ListView

> ID：11658945
> 
> 赞同：0
> 
> 时间：2012-07-25T21:30:26.643
> 
> 标签：javascript, jquery-mobile

有人可以解释一下如何每 10 秒左右刷新一次 jQuery Mobile ListView 吗？我知道列表视图有 .refresh() 方法，所以我更想知道如何编写循环方法以每 10 秒调用 .refresh() 。

您可以提供的任何示例代码将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:32:22.840

```
window.setInterval(function () {
    listview.refresh();
}, 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:41:01.700

```
var refreshData = setInterval(function() { $("#somelistview").refresh(); }, 10000); 
```

在 jqmobile 中，您可以在 onDeviceReady() 中运行，如果您正在执行 ajax 调用，则可以在成功时运行

# javascript - iOS上网页的div数量或内存限制？

> ID：11658949
> 
> 赞同：1
> 
> 时间：2012-07-25T21:30:54.260
> 
> 标签：javascript, html, ios, ipad, safari

我创建了一个包含帖子列表的网页（想想 facebook 的帖子列表视图）。此网页导致 iPad 上的 Safari 浏览器崩溃。我不确定这是因为页面中的 div 太多，还是由于页面的 javascript 占用了太多内存。

关于 iOS safari 上是否有最大 div 数或每页最大内存的任何想法？网页在 Chrome/FireFox/Safari-on-MacIntel 上正常加载和执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:39:02.587

在页面上剪掉一些角落；减小图像大小/更改格式，去掉任何“绒毛”。请记住，移动网站的外观和功能不应该像桌面网站。一个高效、最小、干净的移动网页是要走的路。您也可以找到一些移动 jQuery 插件来提供帮助。正如@TheZ 提到的，尝试分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:36:25.310

我认为没有确切数量的 div。但是我敢打赌，这是有限制的。我会尝试限制图像或视频以减少内存量。
最好的办法是保持 iPAD 的 MB 较低，因为它没有计算机那么多的 RAM。
希望这会有所帮助。

没有 div 限制，只是过载；）

# jquery - jQuery在一段时间后向两个方向旋转图像

> ID：11658962
> 
> 赞同：1
> 
> 时间：2012-07-25T21:32:06.100
> 
> 标签：jquery, html

我目前正在尝试通过重新创建我在网上遇到的项目的酷演示来扩展我的 jQuery 知识。我现在正在研究的是[http://www.beautyoftheweb.com/#/private](http://www.beautyoftheweb.com/#/private)上的旋转眼球，但我很难找到一种方法让我的图像在两个方向上旋转。

我正在使用一组分层图像，就像他们在那个网站上所做的那样，我已经为单个图像在两个不同方向上获得了一个很好的平滑旋转。我当前的代码如下所示：

```
var angle = 0,
    angle2 = 0,
    angle3 = 0,
    angle4 = 0;
    setInterval(function(){
      angle += 0.5;
     $("#3").rotate(angle);
},30);
setInterval(function(){
      angle2 -= 0.025;
     $("#2").rotate(angle2);
},10);
setInterval(function(){
      angle3 += 0.25;
     $("#5").rotate(angle3);
},10);
setInterval(function(){
      angle4 -= 0.025;
     $("#4").rotate(angle4);
},10); 
```

我也在使用 jQueryRotate，一切正常。有没有办法实现一个功能，让它运行 X 秒，之后我可以调用另一个旋转，所以它会朝两个方向移动？就像是：

```
angle +=0.25;
    run for 3-4 seconds
angle -=0.25;
    run for 1 second
angle +=0.25; 
    run for 2 seconds
angle +=0.125;
    run for 1 second 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:46:40.797

您正在寻找的功能听起来像 javascript 中的 setTimeout() 方法。

这是一个很好的资源：[https ://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

您可以做的是使用 setInterval() 运行一个函数，该函数在各个角度上调用 setTimeout() 函数。这将使它在一定的时间间隔内循环，就像您的原始样本一样。只需将您的第一个旋转设置为一定长度，然后相应地链接其他动画。

代码示例如下：http: [//jsfiddle.net/avCx5/6/](http://jsfiddle.net/avCx5/6/)

**更新**我删除了旧代码，因为有一个错误。在大多数浏览器中，在 setTimeout 中使用函数参数会导致它立即执行。在上面的例子中，第一个动画运行了 3 秒，然后第二个动画运行了 3 秒，然后它们都停止了。（为了清楚起见，我将图像拆开）。

这是一个将无限期运行的粗略示例：http: [//jsfiddle.net/avCx5/7/](http://jsfiddle.net/avCx5/7/)

为了正确回答，这里是代码：

HTML

```
 <img src="http://i.imgur.com/w7dQh.png" class="overlay" id="1" />
    <img src="http://i.imgur.com/isx4q.png" class="overlay" id="2" />​ 
```

jQuery

```
 var angle = 0,
       angle2 = 0,
       angle3 = 0;

   var angle1rotation;
   var angle2rotation;

   function rotation1() {
      angle1rotation = setInterval(function() {
        angle3 += 0.25;
        $("#1").rotate(angle3);
      }, 10);

   }

 function rotation2() {
      angle2rotation = setInterval(function() {
         angle2 -= 0.5;
         $("#2").rotate(angle2);
      }, 10);
  }

  function animation_sequence() {
     rotation1();
     window.setTimeout(function(){
       clearInterval(angle1rotation);
       rotation2();
     }, 3000);
     window.setTimeout(function(){
       clearInterval(angle2rotation);        
     }, 6000);   
   }

   var main_loop = setInterval(function(){
      animation_sequence();
   }, 8000);

   animation_sequence(); 
```

# python - 多个配置文件的身份验证配置文件模块问题

> ID：11658964
> 
> 赞同：0
> 
> 时间：2012-07-25T21:32:17.193
> 
> 标签：python, django, django-models, django-templates

类似于这个问题：[Is it possible to have 2 profile models using django's AUTH_PROFILE_MODULE](https://stackoverflow.com/questions/4634256/is-it-possible-to-have-2-profile-models-using-djangos-auth-profile-module)

但我正在尝试使用 django 模板标签来获得我需要的东西。

有 2 个配置文件：

```
class Profile1(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    avatar = models.ImageField(upload_to='avatars/users/', null=True, blank=True)
    ... More fields ...
class Profile2(models.Model):
    user = models.ForeignKey(User, null=True, unique=True)
    avatar = models.ImageField(upload_to='avatars/users/', null=True, blank=True)
    ... More fields ...

AUTH_PROFILE_MODULE = 'profiles.UserProfile'

class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    profile1 = models.ForeignKey(Profile1, related_name="profile1")
    profile2 = models.ForeignKey(Profile2, related_name="profile2")
    # Each user can essentially have more than one profile. 
```

那么如何在模板标签中使用 get_profile() 获取用户配置文件？即：如果我试图检索用户的头像以获取个人资料......

```
{{ comment.user.get_profile.avatar }} 
```

这行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:51:08.240

如果在模型中定义了 avator`Profile1`那么你可以这样做`{{ comment.user.get_profile.profile1.avatar }}`

`get_profile`将返回`UserProfile`实例。

如果我是你，我会在个人资料中添加相关名称，如下所示：

```
class Profile1(models.Model):
    user = models.ForeignKey(User, null=True, unique=True, related_name='profile_1')
    ... More fields ...
class Profile2(models.Model):
    user = models.ForeignKey(User, null=True, unique=True, related_name='profile_2')
    ... More fields ... 
```

然后做`user.profile_1.avatar`而不是经历`get_profile()`。

# visual-studio-2010 - 使用脚本在 TFS 中创建文件夹

> ID：11658973
> 
> 赞同：0
> 
> 时间：2012-07-25T21:32:47.257
> 
> 标签：visual-studio-2010, version-control, tfs, tfsbuild

是否可以使用脚本在 Source Controller Explorer 中创建文件夹？

我需要将更新的文件移动到一个文件夹中。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:04:32.003

[是的，您可以使用TF.exe 命令行](http://msdn.microsoft.com/en-us/library/z51z7zy0%28v=vs.100%29)或使用 PowerShell创建脚本（有些 Cmdlet 可以与[TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f/)一起安装）。如果要创建文件夹，请查看*添加*命令。如果要移动文件，请查看*重命名*命令。

# variables - 不等于 Lua 中的 This OR That

> ID：11658975
> 
> 赞同：26
> 
> 时间：2012-07-25T21:33:11.110
> 
> 标签：variables, if-statement, lua, operators

我试图验证一个变量不等于这个或那个。我尝试使用以下代码，但都不起作用：

```
if x ~=(0 or 1) then
    print( "X must be equal to 1 or 0" )
    return
end

if x ~= 0 or 1 then
    print( "X must be equal to 1 or 0" )
    return
end 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-25T22:44:54.743

您的问题源于对`or`学习此类编程语言的人常见的运算符的误解。是的，您的直接问题可以通过写作来解决[`x ~= 0 and x ~= 1`](https://stackoverflow.com/a/11659129)，但我将更详细地说明您尝试的解决方案为何不起作用。

当您阅读`x ~=(0 or 1)`或`x ~= 0 or 1`很自然地解析它时，就像句子“x 不等于零或一”一样。在对该语句的通常理解中，“x”是主语，“不等于”是谓词或动词短语，“零或一”是宾语，是由连词连接的一组可能性。您将带有动词的主语应用于集合中的每个项目。

但是，Lua 并没有根据英语语法规则来解析它，它会根据操作顺序对两个元素进行二进制比较来解析它。每个运算符都有一个[优先级](http://www.lua.org/manual/5.2/manual.html#3.4.7)，该优先级决定了对其进行评估的顺序。 `or`的优先级低于`~=`，就像数学中加法的优先级低于乘法一样。一切的优先级都低于括号。

结果，在评估 时`x ~=(0 or 1)`，解释器将首先计算`0 or 1`（因为括号），然后`x ~=`是第一个计算的结果，在第二个示例中，它将计算`x ~= 0`然后将该计算的结果应用到`or 1`。

[逻辑运算符`or`](http://www.lua.org/manual/5.2/manual.html#3.4.4)“如果此值不同于 nil 和 false，则返回其第一个参数；否则，或返回其第二个参数”。[关系运算符`~=`](http://www.lua.org/manual/5.2/manual.html#3.4.3)是等式运算符的逆`==`；如果它的参数是不同的类型（x*是*一个数字，对吗？），它返回 true，否则正常比较它的参数。

使用这些规则，`x ~=(0 or 1)`将分解为`x ~= 0`（在应用`or`运算符之后），如果 x 不是 0，包括 1，这将返回“真”，这是不希望的。另一种形式， `x ~= 0 or 1`将首先评估`x ~= 0`（可能返回真或假，取决于 x 的值）。然后，它将分解为`false or 1`或 之一`true or 1`。在第一种情况下，语句将返回`1`，在第二种情况下，语句将返回`true`。因为 Lua 中的控制结构只考虑`nil`and`false`为假，而其他任何东西都为真，这总是会进入`if`语句，这也不是你想要的。

您无法使用编程语言中提供的二元运算符将单个变量与值列表进行比较。相反，您需要将变量与每个值一一进行比较。有几种方法可以做到这一点。最简单的方法是使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)将语句“非一或零”（不能用二元运算符评估）表示为“非一非零”，这可以用二元运算符轻松编写：

```
if x ~= 1 and x ~= 0 then
    print( "X must be equal to 1 or 0" )
    return
end 
```

或者，您可以使用循环来检查这些值：

```
local x_is_ok = false
for i = 0,1 do 
    if x == i then
        x_is_ok = true
    end
end
if not x_is_ok then
    print( "X must be equal to 1 or 0" )
    return
end 
```

最后，您可以使用关系运算符来检查范围，然后测试 x 是否是范围内的整数（您不想要 0.5，对吗？）

```
if not (x >= 0 and x <= 1 and math.floor(x) == x) then
    print( "X must be equal to 1 or 0" )
    return
end 
```

请注意，我写了`x >= 0 and x <= 1`. 如果你理解了上面的解释，你现在应该可以解释我为什么不写`0 <= x <= 1`了，以及这个错误的表达会返回什么！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T21:46:12.063

为了只测试两个值，我个人会这样做：

```
if x ~= 0 and x ~= 1 then
    print( "X must be equal to 1 or 0" )
    return
end 
```

如果您需要针对两个以上的值进行测试，我会将您的选择塞入一个像集合一样的表格中，如下所示：

```
choices = {[0]=true, [1]=true, [3]=true, [5]=true, [7]=true, [11]=true}

if not choices[x] then
    print("x must be in the first six prime numbers")
    return
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T21:47:43.693

`x ~= 0 or 1`是相同的`((x ~= 0) or 1)`

`x ~=(0 or 1)`是一样的`(x ~= 0)`。

尝试这样的事情。

```
function isNot0Or1(x)
    return (x ~= 0 and x ~= 1)
end

print( isNot0Or1(-1) == true )
print( isNot0Or1(0) == false )
print( isNot0Or1(1) == false ) 
```

# geocoding - 谷歌地理编码器从反向查找返回 null

> ID：11658977
> 
> 赞同：1
> 
> 时间：2012-07-25T21:33:20.313
> 
> 标签：geocoding, reverse-geocoding, google-geocoder

我正在尝试使用 Google 地理编码器进行反向地理编码器查找。我在 8 个值上运行完全相同的命令，但其中两个值只有一个错误，这让我感到困惑，因为其中一个失败的值与一个工作值相同。（“工作”值并没有真正起作用——它们仍然从“格式化地址”字段返回一个未定义的值，但它们没有抛出错误）。我正在运行的命令如下：

```
geocoder.geocode({latLng: new google.maps.LatLng(machineList[i].y, machineList[i].x)}, function(results, status) { address = results[0]; }); 
```

我收到来自 Javascript 的类型错误，声称结果为空。我不确定为什么会这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:19:25.157

好吧，事实证明这是一个时间问题。某些位置的 geocode() 命令完成时间比其他位置长，这导致该值显示为空。我最终通过将所有后续代码移到回调函数中来消除了这个问题（我之前没有这样做，因为整个事情都在一个循环中运行，而且我很难让它作为一个范围）。现在一切似乎都运行良好，并且位置正在按应有的方式显示。

# process - SSH 将信号转发到远程进程

> ID：11658978
> 
> 赞同：3
> 
> 时间：2012-07-25T21:33:21.687
> 
> 标签：process, ssh, signals, kill, sigterm

我正在运行 ssh 命令作为后台作业：

```
ssh -l user server 'sleep 1000' & 
```

假设上面返回进程 ID：[ssh_pid]。

如何使 ssh 转发信号到远程进程？

即假设我这样做：`kill -TERM [ssh_pid]`，那么它应该将 TERM 信号转发给远程进程，而不是自己处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:03:29.433

这里检查了一个类似的问题：[https](https://unix.stackexchange.com/questions/40023/get-ssh-to-forward-signals) ://unix.stackexchange.com/questions/40023/get-ssh-to-forward-signals 。没有很好的解决方案。使用该答案，这是一个对我有用的建议：

```
ssh -tt -oLogLevel=quiet server 'stty raw isig; sleep 1000' < /dev/null & 
```

# c - pthread_mutex_init vs sem_init（非共享）

> ID：11658979
> 
> 赞同：4
> 
> 时间：2012-07-25T21:33:27.147
> 
> 标签：c, macos, unix, pthreads, semaphore

我正在考虑更改一些我想在 linux、unix 和 OSX 上运行的代码。代码中有一些对 sem_init 的调用，但 pshared 值设置为零。我在 Rochkind 关于 unix 编程的书中做了一些阅读，他基本上说不共享的 sem_init 与 pthread_mutex_init 相同，因为它以内存中的二进制方式运行。

问题是 - 我是否可以安全地将这些 sem_init 更改为 pthread_mutex_init，或者使用 sem_open 来获得此代码的更便携版本？

OSX 不支持未命名的信号量，但我猜其他两个支持。我真的不想有一个单独的编译标志`#ifdef(__APPLE__)`或其他东西。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T22:36:48.893

互斥量和信号量具有不同的语义。互斥锁必须由获得锁的同一线程解锁。所以锁定/解锁**必须**总是成对出现在同一个线程中。

信号量要灵活得多，因为另一个线程可以发布另一个线程使用的令牌。例如，它们通常用于实现生产者/消费者模式。因此，您必须检查要移植的程序是否符合互斥锁的受限语义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:52:50.443

互斥锁和信号量的语义不同。确实，如果非共享信号量仅用作二进制信号量，即如果它的值永远不会大于 1，则它等同于互斥锁。但是，这是您需要从代码的逻辑中确定的东西，而不是它如何被初始化。如果您确定信号量仅用作二进制信号量，那么 pthread 互斥锁是完美的替代品。如果没有，您可以使用 sem_open() 来实现可移植性，或者编写一个包装器，使用 pthread 互斥锁和条件变量来模拟信号量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:45:00.817

在给定的实例中切换到互斥锁应该是安全的。如果一次只有一个线程可以进入给定的临界区，那么无论是否编写为信号量，您都有效地拥有了一个互斥锁。但是，根据操作系统实现功能的方式，您可能会获得不同的性能特征。这不是我会失眠的事情，但仍然是在测试时要记住的事情。

# java - 如果在 for 语句中使用 StatementExpressionList，则 ForInit 的值何时被丢弃？

> ID：11658981
> 
> 赞同：1
> 
> 时间：2012-07-25T21:33:30.230
> 
> 标签：java, for-loop, initialization, expression

一个简单的 for 语句是：

```
 for(ForInit/*Optional*/; EXPRESSION/*Optional*/; ForUpdate/*Optional*/) {
 }

 ForInit:
 StatmentExpressionList
 LocalVariableDecleration

 StatmentExpressionList
 e.g 
    int i = 0; a = 10, z = 2; 
```

序列中的每个表达式都是从左到右计算的，如果任何表达式突然完成，for 语句就会突然完成，并且序列的计算从它完成的地方结束。从左到右计算的任何表达式的值都被丢弃。

现在是什么导致表达式突然完成？在评估序列中每个表达式的哪个阶段，该表达式的值被丢弃，如果该表达式的值被丢弃，那么 for 循环的其余部分将如何执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:39:15.200

第一个参数的示例

```
String a = null;
for (int i = a.length(); i < 5; i++) 
```

对于第二个参数

```
String a = null;
for (int i = 1; i < a.length(); i++) 
```

第三个（你能猜到吗？）

```
String a = null;
for (int i = 1; i < 5; a.append(" ")); 
```

当然，循环的其余部分不会执行。

更新：我将对“废弃值”（现在无法检查）的引用解释为：

```
int i = 13;
try {
  String a = null;
  for (int i = 1; i < a.length(); i++)
  ...
} catch (Exception e) {
}

// Here i = 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:43:14.167

一个变体是：

```
int a = getA(); //returns 0
for (int i = 10 / a; i < 5; i++) { //Ooops
} 
```

# ruby-on-rails-3 - 从另一个控制器和批量分配创建模型时我需要知道什么

> ID：11658982
> 
> 赞同：0
> 
> 时间：2012-07-25T21:33:43.933
> 
> 标签：ruby-on-rails-3, mass-assignment, attr-accessible

我有一个名为 DefaultCompany 的模型，它没有控制器，而是通过 Companies_controller 创建它，如果他们选中表单上的“默认公司”复选框，它会调用 user.set_default_company（定义如下）。

默认公司是 user_id 和 company_id 的连接表。

```
class DefaultCompany < ActiveRecord::Base
  attr_accessible :company_id, :user_id
  belongs_to :company
  belongs_to :user
end 
```

我不断收到以下错误：

```
Can't mass-assign protected attributes: company, user 
app/models/user.rb:22:in `set_default_company'
app/controllers/companies_controller.rb:23:in `create' 
```

我已将我的用户模型设置为能够接受 DefaultCompany 的嵌套属性，如下所示

```
class User < ActiveRecord::Base
  has_one :default_company
  accepts_nested_attributes_for :default_company
  attr_accessible :default_company_attributes

  def set_default_company(company)
    exists = DefaultCompany.find(self.id)
    if exists
      exists.update_attributes(company: company)
    else 
      DefaultCompany.create(company: company, user: self)
    end
  end
end 
```

这是company_controller.rb的创建操作

```
def create
@company = Company.new(params[:company])

if @company.save
  if params[:default_company]
    current_user.set_default_company @company.id
  end
  flash[:notice] = "Company was successfully created."
  Role.assign_creator(@company.id, current_user.id)
  redirect_to @company
else
  redirect_to new_company_path
  end
end 
```

所以我不确定我需要添加什么才能通过大规模分配，有人可以帮我弄清楚/解释这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:44:09.703

您可以在方法调用中将`attr_accessible`属性更改`Company`为`:user`and`:company`或设置`:company_id`and 。`:user_id``set_default_company`

编辑：

```
exists = DefaultCompany.find(self.id) 
```

根据您的逻辑，这似乎是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:47:23.147

我相信 Rails 对批量分配中的命名非常严格，所以虽然你已经将 and 列入白名单`company_id`，但`user_id`你并没有将`company`and列入白名单`user`。

尝试将分配更改`set_default_company`为：

```
if exists
  exists.update_attributes(company_id: company.id)
else 
  DefaultCompany.create(company_id: company.id, user_id: self.id)
end 
```

# c++ - 如何让 GCC 打印有用的 RUNTIME 错误消息？

> ID：11658984
> 
> 赞同：6
> 
> 时间：2012-07-25T21:34:25.647
> 
> 标签：c++, gcc, g++

`#define`ing`_GLIBCXX_DEBUG`强制 GCC 捕获 C++ 中的一大类运行时错误，例如越界 STL 访问、无效迭代器等。

不幸的是，当错误发生时，打印的消息不是很有帮助。我知道如何用函数和自己的宏打印`__FILE__`回溯`__LINE__`。

有没有一种简单的方法可以说服 GCC 这样做，或者指定一个函数/宏在`_GLIBCXX_DEBUG`实际发生捕获的错误时调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T00:56:29.573

当调试模式检查失败时，它会调用`abort()`，因此它会转储一个核心文件，您可以使用调试器轻松检查该文件以查看失败的位置。如果您在调试器中运行程序，它将在中止时停止，您可以使用`backtrace`.

要使其自动化，您需要将调用更改为`abort()`(in `libstdc++-v3/src/c++11/debug.cc`)。我认为您可以将其更改为调用`std::terminate()`，然后安装您自己`terminate_handler`的`set_terminate`以使其打印回溯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T22:03:25.817

我假设您的意思是您想要在代码中打印使用上下文的消息，而不是 GCC 使用的某些内部头文件的文件名和行号。

似乎有一个宏`.../debug/macros.h`，所有检查代码都使用称为`_GLIBCXX_DEBUG_VERIFY`. 您可以修改它以满足您的需要。

**编辑：** Jonathan Wakely 指出所有检查都是致命的。

# ios - 从背景更新过滤表中的单元格？

> ID：11658988
> 
> 赞同：0
> 
> 时间：2012-07-25T21:34:37.443
> 
> 标签：ios, uitableview, uisearchdisplaycontroller

我有一个显示图像的表格。它可以实时搜索，从而调整显示的单元格。`NSOperation`当图像尚未立即可用时，使用网络上的并发子类在后台加载图像。

获取图像后，我想更新表格以显示它。

如何更新正确的单元格？

*   我不能依赖我内置`tableView:cellForRowAtIndexPath:`的单元格，因为该单元格可能已被重新用于另一行。
*   我不能依赖`indexPath`传入的`tableView:cellForRowAtIndexPath:`，因为它可能在更新开始后由于搜索词的变化而发生了变化。
*   我无法搜索表格中的可见单元格，因为单元格本身是元数据的实例`UITableViewCell`并且没有元数据。
*   我无法搜索过滤后的列表，因为我不知道要将更改应用到哪个表。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:55:43.120

我在应用商店的应用中执行此操作。我在我的视图控制器中创建了一个通知处理程序，当图像到达时会收到通知。该图像具有与之关联的标签-我可以将其映射到需要它的视图。

创建单元格后，我将 UIImageView 添加到 contentViews 数组，其中包含与图像关联的标记匹配的唯一标记（您可以将这些标记偏移 10,000 以避免冲突）。

然后我向 UITableView 询问可见单元格的数组。我遍历它们，向每个单元格的 contentView 询问 viewWithTag:tag （唯一标签）。如果找到，我有正确的 UIImageView，我设置了图像。

显然，在向 tableView 提供单元格时，您必须始终为 ImageView 提供正确的标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:58:45.120

最简单的解决方案可能只是继承 UITableViewCell 以添加跟踪属性。像这样的东西：

```
@interface TrackingTableViewCell : UITableViewCell
@property (strong) id trackingValue;
@end;

@implementation TrackingTableViewCell
// Default @synthesize as of Xcode 4.4!
@end 
```

设置单元格时，将 trackingValue 设置为`NSURL`您从中下载 URL 的值。完成加载图像后，检查可见单元格的 trackingValue。如果你找到一个匹配的，很好。如果没有，请不要将其设置在任何地方。

从理论上讲，您可以使用 API 做同样的事情`objc_setAssociatedObject()`，但我并没有真正看到这样做的价值，而不仅仅是创建一个简单的子类来为您跟踪价值。

# java - DataNucleus 可以持久化使用泛型参数化的抽象基类吗？

> ID：11658992
> 
> 赞同：1
> 
> 时间：2012-07-25T21:35:09.103
> 
> 标签：java, generics, jdo, datanucleus, type-erasure

使用 DataNucleus，我很高兴使用抽象基类为子类提供“长”ID（请注意原始类型）。

在改编[来自 JPA 的示例时，](http://aurelavramescu.blogspot.com/2011/04/jpa-with-google-guice.html)我想到了参数化基类的想法。目的是支持不同的 ID 类型，例如 String。

```
@PersistenceCapable
@Inheritance(strategy=InheritanceStrategy.SUBCLASS_TABLE)
@Version(strategy=VersionStrategy.VERSION_NUMBER, column="jdo_version")
public abstract class VersionedIdEntity<P>
    implements Serializable {

  static final long serialVersionUID = 1L;

  @PrimaryKey
  @Persistent(valueStrategy=IdGeneratorStrategy.INCREMENT)
  private P id;

  public P getId() {
    return id;
  }
} 
```

泛型让我使用包装的 Java 类型“Long”，因此子类声明如下：

```
public class Account extends VersionedIdEntity<Long> 
```

我切换到新的基类导致了一个错误，指出没有找到“java.lang.Object”的实现。

> org.datanucleus.exceptions.NucleusUserException：字段“VersionedIdEntity.id”被声明为引用类型（接口/对象），但没有找到“java.lang.Object”的实现类！

错误与类型擦除有关吗？

其他问题是（1）JPA 如何处理它以及（2）我是否可以将类型 P 限制为[DataNucleus](http://www.datanucleus.org/products/datanucleus/jdo/types.html)中可持久的类型，例如：

```
<? extends PersistableType> 
```

虽然我在其他地方找不到帮助，但这个问题之前可能已经问过。在这种情况下，将不胜感激简短的指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:28:30.653

你的意思是JDO是否定义了一个实现应该支持这个？答案：没有。JDO 定义了有效的 PK 类型，什么是“P”？就类而言，它是 Object（即 (java.lang.)Object，因为它没有真正的类型）。JPA 也没有为此定义它。

# database-design - Redis 是这个模型的正确选择吗

> ID：11658994
> 
> 赞同：0
> 
> 时间：2012-07-25T21:35:21.777
> 
> 标签：database-design, redis

我有以下模型：

```
| string (unique key) | about 10 other strings, that have all a fixed length and may be empty | 
```

通常查询是使用“唯一键并查看其他字符串”。使用 Redis 应该没问题。

但另一个查询是“向我显示第 n 列为空的键”。我不确定 Redis 是否可以处理这种性能！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:03:41.787

要在 redis 中解决这个问题，您需要维护一些元数据。一种解决方案是为每个“列”添加一个集合类型键，该键将保存该“列”为空白的所有元素的唯一键。显然，在您的应用程序逻辑中，当您在主哈希中添加和删除值时，您将需要从这些集合中添加和删除唯一键。这将非常快，因为集合操作`sadd`，`srem`并且`sismember`对于单个项目都是 O(1)（即与集合的大小不成比例）。要获取“列”为空的所有键，您可以使用`smembers`. 至少，这就是我解决类似问题的方式。

（我在列周围加上引号，因为在 redis 模型中，它们将是哈希字段，而不是您在 RDBMS 中认为的列）

# python - python的exec函数的奇怪行为

> ID：11658998
> 
> 赞同：0
> 
> 时间：2012-07-25T21:35:47.947
> 
> 标签：python

我认为下面的代码完全描述了这个问题。为什么在 Test2 函数中 x 没有被定义？为什么 Test3 函数不返回错误？

```
>>> def Test1():
exec('x=2')
print(str(x))

>>> Test1()
2
>>> def Test2():
global x
exec('x=2')
print(str(x))

>>> Test2()

Traceback (most recent call last):
File "<pyshell#39>", line 1, in <module>
Test2()
File "<pyshell#38>", line 4, in Test2
print(str(x))
NameError: global name 'x' is not defined

>>> def Test3():
global x
x=2
print(str(x))

>>> Test3()
2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:38:59.707

在 function`Test2`中，当你声明`global x`它`x`是一个全局变量时，Python 将在全局命名空间中搜索它。由于在全局命名空间中没有`x`定义变量，`NameError`因此引发了。

如果您阅读[官方文档](http://docs.python.org/release/2.7.3/reference/simple_stmts.html#the-global-statement)，您可以看到该`eval`函数不受该`global`语句的影响，因此在`Test2`创建`exec`一个名为`x`2 的新局部变量，但不是全局变量；the`print`受`global`语句影响并`x`在全局命名空间中搜索它不存在的地方。在 Test3 中，该`x=2`语句受该语句的影响，`global`因此创建了一个名为 x 的全局变量，其值为 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T21:51:38.933

@SanSS 给出的答案是正确的，@Colin Dunklau 的评论也是正确的，但我想添加更多信息。可能会绊倒您的一件事是`global x`Test2 中的 in*没有*传递到执行代码。所以 exec 创建一个*局部*变量`x`，而`print x`尝试读取一个全局变量。这两个例子可能会有所帮助。. .

在这里，通过传递一个 dict，您告诉 exec 将其用作全局变量*和*局部变量，因此 exec 分配给全局变量：

```
>>> def Test2():
...     global x
...     exec 'x=2' in globals()
...     print(str(x))
>>> Test2()
2 
```

在这里，通过在 exec 代码中包含全局声明，您可以将 exec 分配给全局，然后 print 语句读取：

```
>>> def Test2():
...     global x
...     exec('global x; x=2')
...     print(str(x))
>>> Test2()
2 
```

然而，重申一下，使用`exec`. 有时只是为了了解 Python 的工作原理而玩弄这样的东西会很好，但在少数情况下，这是用代码实际完成某些事情的好方法。

# r - 在 r 中绘制加权人口密度

> ID：11658999
> 
> 赞同：0
> 
> 时间：2012-07-25T21:35:49.447
> 
> 标签：r

我正在分析 R 中的一批数据，我在这些数据上绘制了人口密度。我还想生成一个值密度图。例如：

```
 dog.breed    weight.lbs
[1]   Labrador     63
[2]   Maltese      6
[3]   Dalmatian    55
[4]   Poodle       51
[5]   Maltese      4
[6]   Dalmatian    48
[7]   Poodle       56 
```

标准密度图将计算每个品种的出现次数，然后输出一条漂亮的曲线，如下所示：

```
 dog.breed    x
[1]   Labrador     1
[2]   Maltese      2
[3]   Dalmatian    2
[4]   Poodle       2 
```

然而，我试图获得的是一条类似的平滑曲线，用于跟踪每个品种的权重之和，如下所示：

```
 dog.breed    x
[1]   Labrador     63
[2]   Maltese      10
[3]   Dalmatian    103
[4]   Poodle       107 
```

我可以通过建立一系列点来做到这一点，例如在最后一个示例中，然后拟合曲线。但这很乱。我希望有人知道可以完成繁重工作的干净包装。

谢谢您的帮助。

**一些澄清：**

另一个例子怎么样。假设我有 50 家商店，对于我认识的每一位顾客，以及他们每次来商店花了多少钱。商店顾客人口的密度图将揭示有关每家商店有多少人光顾的信息。我正在寻找相同的情节，但要寻找所有人在每家商店的消费金额。嗯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:48:07.367

如果您使用的是基础 R，则需要查看`aggregate`：

```
data <- read.table(text="dog.breed    weight.lbs
Labrador     63
Maltese      6
Dalmatian    55
Poodle       51
Maltese      4
Dalmatian    48
Poodle       56", header=TRUE, )

aggregate(. ~ dog.breed, data=data, sum)

#  dog.breed weight.lbs
#1 Dalmatian        103
#2  Labrador         63
#3   Maltese         10
#4    Poodle        107 
```

如果您正在寻找一种无需执行任何操作即可直接从数据中绘图的方法，ggplot 是您的朋友：

```
require(ggplot2)
ggplot(data, aes(x=dog.breed, y=weight.lbs)) +
  geom_bar(stat="identity")

ggplot(data, aes(x=dog.breed)) +
  geom_bar(aes(weight=weight.lbs)) 
```

第一个图为每个 x 绘制多个 y 值，其中`geom_bar`默认`"stack"`为 arg 的值`position`，从而给出 x 的总和。第二个图之所以有效，是因为`geom_bar`默认情况下会`stat_bin`生成一个直方图，但使用的是 a 的规范`weight`。两者都产生等效的输出：

![阴谋](../Images/7e9c22262c53a548f5025dcd8c92e330.png)