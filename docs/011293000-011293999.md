# StackOverflow 问答 11293000-11293999

# javascript - 使用实时或在 jquery 上初始化 jquery ui 插件

> ID：11293001
> 
> 赞同：0
> 
> 时间：2012-07-02T11:45:49.433
> 
> 标签：javascript, jquery

我想`jquery ui button plugin`使用 `live`or进行初始化`on`。意味着类似：

```
 $('button').live("which event", function() { $(this).button(); }); 
```

但我不知道我可以在这个地方使用的事件。我试过`load`但`ready`没有用。然后我也尝试了`custom event`：

```
 $('button').live("event", function() { $(this).button(); });
          $('button').trigger('event'); 
```

这也不起作用。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:57:55.020

如果该按钮出现在 dom ready 上，则：

```
$(document).ready(function(){
    $('button').button();
}); 
```

如果是之后创建的：

```
$('<button />').appendTo('body').button(); 
```

# sqlite - SQLite：从命令行插入二进制数据

> ID：11293007
> 
> 赞同：11
> 
> 时间：2012-07-02T11:45:59.363
> 
> 标签：sqlite, blob, binaryfiles

我有这个 SQLite 表：

```
create table mytable (
aid INTEGER NOT NULL PRIMARY KEY, 
bid INTEGER NOT NULL, 
image BLOB
); 
```

`image`我想在这个表的字段中插入一个二进制文件。是否可以`sqlite3`从命令行界面执行此操作？如果是这样，怎么做？我正在使用 Ubuntu。

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-03-12T17:21:30.293

sqlite3[命令行界面](https://www.sqlite.org/cli.html)添加了以下两个“应用程序定义”的函数：

*   `readfile`
    通常用作：`INSERT INTO table(blob) VALUES (readfile('myimage.jpg'))`
*   `writefile`
    它使用数据库 blob 的内容写入文件并返回写入的字节数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T11:56:12.070

您可以使用如下语法：

```
echo "insert into mytable values(1,1, \"`cat image`\")" | sqlite3 yourDb 
```

我不确定 blob 周围的 " 值。注意 cat 命令周围的反引号，这意味着 cat 命令将在 echo 之前执行。

[编辑]

Blob 存储为带有“X”前缀的十六进制数字。您可以使用“hexdump”unix 命令来生成十六进制字符串，但最好编写一个命令行工具来读取图像并进行插入。这篇文章的更多细节：http: [//comments.gmane.org/gmane.comp.db.sqlite.general/64149](http://comments.gmane.org/gmane.comp.db.sqlite.general/64149)

# matlab - 等效命令 matlab<>opencv

> ID：11293008
> 
> 赞同：1
> 
> 时间：2012-07-02T11:46:00.197
> 
> 标签：matlab, opencv

有谁知道opencv的逻辑（matlab）的等效命令是什么？我看到逻辑图像（1 个通道）的位深度等于“1”。对于普通的 1 通道图像，我们可以将其设置为 8U 或 32F（即位深为 8、32）。我对吗？我之所以问，是因为当我尝试使用 matlab 进行细化时，image(logical) 和 image(uint8 @ im2double) 给出了不同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:30:20.137

在 MATLAB 中，`logical`类型的大小为 1**字节**。尝试以下操作：

```
>> x = true
x =
     1

>> whos x
  Name      Size            Bytes  Class      Attributes

  x         1x1                 1  logical 
```

因此，相当于 OpenCV 中的逻辑图像将是`8U`具有单通道的图像

# perl - 在soap lite中编码口音

> ID：11293013
> 
> 赞同：0
> 
> 时间：2012-07-02T11:46:19.383
> 
> 标签：perl, soap, character-encoding, soaplite

我有一个使用soap::lite 的perl 脚本，它调用用Net 编写的web 服务。调用有效，但问题是我需要传递一个参数

```
SOAP::Data->name('x' => 'àò??\a')->type('string') 
```

生成的 XML 类似于

```
<x>\xc3\x83\xc2\xa0\xc3\x83\xc2\xb2??\\a</x> 
```

重音字母被替换，\ 也变为 '\\'。我需要参数是准确的写法。编码为 utf-8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:04:42.820

当您的 Perl 源代码中有 Unicode 文字时，您必须`use utf8;`以 UTF-8 编码保存文件。

# asp.net - 如何保留子控件并仅删除周围的父控件？

> ID：11293020
> 
> 赞同：2
> 
> 时间：2012-07-02T11:46:43.410
> 
> 标签：asp.net, controls, htmlgenericcontrol

我有一段这样的代码：

```
<div id="container" runat="server">
<div id="parent" runat="server">
<div id="child" runat="server">
<p>Some Content</p>
</div>
</div>
</div> 
```

在某种情况下，我想删除父 DIV 并保持子 DIV 完好无损。

使用类似这样的东西会删除完整的 html（父 + 子）：

```
container.Controls.Remove(container.FindControl("parent")) 
```

或者

```
parent.visible = false 
```

是否可以将html保留在父DIV（子DIV）中并删除周围的父DIV？

任何帮助表示赞赏。

马切利诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:56:27.103

**试试这个**

```
 <div id="container" runat="server">
            im container
            <br />
            <div id="parent" runat="server">
                im parent
                <br />
                <div id="child" runat="server">
                    i am child
                    <br />
                </div>
            </div>
        </div>
        <asp:Button runat="server" Text="remove" OnClick="remove_clicked" />
<input type="button" value="client remove" onclick="remove();" /> 
```

**1.对于服务器端解决方案**

```
 protected void remove_clicked(object sender, EventArgs e)
    {
        HtmlGenericControl tempChild = child;
        container.Controls.Remove(parent);
        container.Controls.Add(tempChild);
    } 
```

**2.对于客户端解决方案**

```
<script type="text/javascript" language="javascript">
        function remove() {
            var container = document.getElementById('<%= container.ClientID %>');
            var parent = document.getElementById('<%= parent.ClientID %>');
            var child = document.getElementById('<%= child.ClientID %>');
            container.removeChild(parent);
            container.appendChild(child);
        }
    </script> 
```

# python - 对输出列表长度有限制的产量子组合

> ID：11293022
> 
> 赞同：2
> 
> 时间：2012-07-02T11:46:47.387
> 
> 标签：python, algorithm, list

这个问题可能是以下两个问题的组合，但角度略有不同。

[产生子组合](https://stackoverflow.com/questions/8646186/yielding-sub-combinations)

[有限制的收益子组合](https://stackoverflow.com/questions/8661959/yield-sub-combinations-with-limit)

我根据我的要求调整了第一个问题中的代码。

```
def sub_combinations(segment):
    for i in range(1, len(segment)):
            for j in sub_combinations(segment[i:]):
                    yield [segment[:i]] + j 
    yield [segment]

max = 4

for p in sub_combinations([1, 2, 3, 4, 5, 6, 7]):
    if len(p) == max:
        print map(list, p) 
```

这给出了输出：

```
[[1], [2], [3], [4, 5, 6, 7]]
[[1], [2], [3, 4], [5, 6, 7]]
[[1], [2], [3, 4, 5], [6, 7]]
[[1], [2], [3, 4, 5, 6], [7]]
[[1], [2, 3], [4], [5, 6, 7]]
[[1], [2, 3], [4, 5], [6, 7]]
[[1], [2, 3], [4, 5, 6], [7]]
[[1], [2, 3, 4], [5], [6, 7]]
[[1], [2, 3, 4], [5, 6], [7]]
[[1], [2, 3, 4, 5], [6], [7]]
[[1, 2], [3], [4], [5, 6, 7]]
[[1, 2], [3], [4, 5], [6, 7]]
[[1, 2], [3], [4, 5, 6], [7]]
[[1, 2], [3, 4], [5], [6, 7]]
[[1, 2], [3, 4], [5, 6], [7]]
[[1, 2], [3, 4, 5], [6], [7]]
[[1, 2, 3], [4], [5], [6, 7]]
[[1, 2, 3], [4], [5, 6], [7]]
[[1, 2, 3], [4, 5], [6], [7]]
[[1, 2, 3, 4], [5], [6], [7]] 
```

现在的问题是，对于较大的列表来说，这需要太多时间。有没有更有效/pythonic的方式来实现这个？我怎样才能在函数本身中加入参数“max”？我尝试了很多方法，但很难使用递归函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:01:29.873

似乎您想要的结果可以描述为将列表拆分为（例如）4 个非空子列表的所有方法。这可以通过生成所有可能的拆分位置组合来完成：

```
def split_sequence(seq, chunks):
    for splits in itertools.combinations(range(1, len(seq)), chunks - 1):
        left = (None,) + splits
        right = splits + (None,)
        yield [seq[l:r] for l, r in zip(left, right)] 
```

示例输出：

```
>>> list(split_sequence(range(7), 4))
[[[0], [1], [2], [3, 4, 5, 6]],
 [[0], [1], [2, 3], [4, 5, 6]],
 [[0], [1], [2, 3, 4], [5, 6]],
 [[0], [1], [2, 3, 4, 5], [6]],
 [[0], [1, 2], [3], [4, 5, 6]],
 [[0], [1, 2], [3, 4], [5, 6]],
 [[0], [1, 2], [3, 4, 5], [6]],
 [[0], [1, 2, 3], [4], [5, 6]],
 [[0], [1, 2, 3], [4, 5], [6]],
 [[0], [1, 2, 3, 4], [5], [6]],
 [[0, 1], [2], [3], [4, 5, 6]],
 [[0, 1], [2], [3, 4], [5, 6]],
 [[0, 1], [2], [3, 4, 5], [6]],
 [[0, 1], [2, 3], [4], [5, 6]],
 [[0, 1], [2, 3], [4, 5], [6]],
 [[0, 1], [2, 3, 4], [5], [6]],
 [[0, 1, 2], [3], [4], [5, 6]],
 [[0, 1, 2], [3], [4, 5], [6]],
 [[0, 1, 2], [3, 4], [5], [6]],
 [[0, 1, 2, 3], [4], [5], [6]]] 
```

# svg - SVG 根元素的默认背景颜色

> ID：11293026
> 
> 赞同：166
> 
> 时间：2012-07-02T11:47:03.473
> 
> 标签：svg

我想为整个 SVG 文档设置默认背景颜色，例如红色。

```
<svg viewBox="0 0 500 600" style="background: red">/* content */</svg> 
```

上面的解决方案有效，但不幸的是 style 属性的背景属性不是标准属性：[http](http://www.w3.org/TR/SVG/styling.html#SVGStylingProperties) ://www.w3.org/TR/SVG/styling.html#SVGStylingProperties ，因此在使用 SVG 的清理过程中将其删除清洁器。

还有另一种方法来声明这种背景颜色吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-02T12:35:50.997

SVG 1.2 Tiny 有[viewport-fill](http://www.w3.org/TR/SVGTiny12/painting.html#viewport-fill-property)我不确定这个属性的实现范围有多广，因为目前大多数浏览器都以 SVG 1.1 为目标。Opera 实现了 FWIW。

目前更跨浏览器的解决方案是粘贴一个`<rect>`宽度和高度为 100% 的元素，并将 fill="red" 作为该元素的第一个子`<svg>`元素，例如：

```
<rect width="100%" height="100%" fill="red"/> 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-12-03T17:11:50.750

发现这在 Safari 中有效。SVG 仅在元素的边界框覆盖的背景颜色中着色。因此，给它一个具有零像素边界的边界（笔划）。它用您的背景颜色为您填充整个内容。

`<svg style='stroke-width: 0px; background-color: blue;'> </svg>`

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2017-11-14T21:18:19.010

是@Robert Longson 的回答，现在有代码了（本来没有代码，后来加的）：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
 <rect width="100%" height="100%" fill="red"/>
</svg>
```

这个答案使用：

*   [https://stackoverflow.com/a/11293812/6747994](https://stackoverflow.com/a/11293812/6747994)
*   [https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2018-05-05T16:58:17.933

让我报告一个我发现的非常简单的解决方案，它没有写在以前的答案中。我还想在 SVG 中设置背景，但我也希望这可以在独立的 SVG 文件中使用。

嗯，这个解决方案真的很简单，事实上 SVG 支持样式标签，所以你可以做类似的事情

```
<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50">
  <style>svg { background-color: red; }</style>
  <text>hello</text>
</svg> 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-03-23T10:04:20.553

我目前正在处理这样的文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/css" href="style.css" ?>
<svg
  xmlns="http://www.w3.org/2000/svg"
  version="1.1"
  width="100%"
  height="100%"
  viewBox="0 0 600 600">
... 
```

我试图把它放入`style.css`：

```
svg {
  background: #bf1f1f;
} 
```

它适用于 Chromium 和 Firefox，但**我****认为这不是一个好习惯**。EyeOfGnome 图像查看器不会渲染它，Inkscape 使用一个特殊的命名空间来存储这样的背景：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
    xmlns="http://www.w3.org/2000/svg"
    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
    version="1.1"
    ...
  <sodipodi:namedview
     pagecolor="#480000" ... > 
```

好吧，似乎 SVG 根元素不是SVG 建议中[可绘制元素](http://www.w3.org/TR/SVG11/intro.html#TermShape)的一部分。

所以我建议使用[Robert Longson 提供的“rect”解决方案，](https://stackoverflow.com/a/11293812/1844857)因为我猜这不是一个简单的“hack”。这似乎是使用 SVG 设置背景的**标准方法。**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-26T03:31:33.160

另一种解决方法可能是使用`<div>`相同的大小来包装`<svg>`. 之后，您将能够申请`"background-color"`，`"background-image"`这将影响`svg`。

```
<div class="background">
  <svg></svg>
</div>

<style type="text/css">
.background{
  background-color: black; 
  /*background-image: */
}
</style> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-09T13:34:17.067

`background`并且`background-color`没有得到广泛支持

没有的最短代码是绘制一个半径为 10000 的圆，这也适用于与 viewBox 不同的宽度-高度-纵横比。

```
<circle r="1e5" fill="red"/> 
```

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
 <circle r="1e5" fill="red"/>
</svg>
```

# c# - Windows 窗体使用 XML 保存控件布局信息

> ID：11293027
> 
> 赞同：1
> 
> 时间：2012-07-02T11:47:03.277
> 
> 标签：c#, .net, xml, winforms

我设计了一个表单来动态创建文本框、面板按钮等控件。我可以选择编辑控件的大小和位置。我需要维护控件的布局和父子关系，以便我可以保存信息并在再次加载时重新创建它。除了 XML 之外，还有其他更好的选择来维护布局信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:53:06.790

尝试使用`app.config`文件，它会为您提供更好的操作，并且会节省大量代码，您现在需要执行这些代码来遍历已保存的 XML 文件。欲了解更多信息，请[转到此处](http://geekswithblogs.net/akraus1/archive/2006/01/04/64871.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:17:48.330

您是否可以选择将其保存在**数据库**中（如果需要，每个用户）？如果您必须实现它，基于文件的 XML 可能是最简单的选择，无论您是使用 app.config 路由还是编写自己的类来保存和检索 XML 中的自定义用户设置 - 保存它的好地方可能是用户的**AppData**文件夹。

当您使用**ClickOnce**进行版本升级时，保存到 app.config 的所有内容都可能丢失。

# jquery - 事件发生后如何重定向到jquery中的页面

> ID：11293031
> 
> 赞同：0
> 
> 时间：2012-07-02T11:47:08.183
> 
> 标签：jquery, redirect

```
$('.enter_web_button').click(function(){  
  $('.loading_logo').animate({
     left:'40%'  
  },1000);

 $('.nav_business').animate({
 left:'100%' 
 },1000,function(){ 
 $(this).hide(1000);

    // go to test.php           
 });

}); 
```

完成活动后，我想将页面重定向到 test.php.how to do it..？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:51:46.850

您可以使用`window.location.replace`如下所述：

```
window.location.replace('text.php') 
```

**或者**

您可以使用`window.location.href`如下所述：

```
window.location.href = 'text.php' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:48:00.930

您需要为此[`location.href`](https://developer.mozilla.org/en/DOM/window.location)使用

```
window.location.href = 'text.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:53:02.850

另一种方法是使用 location.assign 如下：

```
location.assign('your_page.php'); 
```

有关更多信息，请查看 Mozilla 文档：[Mozilla MDN Docs](https://developer.mozilla.org/en/DOM/window.location)

# c# - 测量等待 Socket 读取的 TCP 字节数

> ID：11293032
> 
> 赞同：0
> 
> 时间：2012-07-02T11:47:11.937
> 
> 标签：c#, networking, tcp

我有一个接收数据的套接字连接，并读取它进行处理。
当从套接字处理/拉取数据的速度不够快时，TCP级别就会出现瓶颈，并且接收到的数据会延迟（我可以通过解析后的tmestamps来判断）。

如何查看有多少 TCP 字节等待套接字读取？（通过一些外部工具，如 WireShark 或其他）

```
 private void InitiateRecv(IoContext rxContext)
    {
        rxContext._ipcSocket.BeginReceive(rxContext._ipcBuffer.Buffer, rxContext._ipcBuffer.WrIndex,
            rxContext._ipcBuffer.Remaining(), 0, CompleteRecv, rxContext);
    }

    private void CompleteRecv(IAsyncResult ar)
    {
        IoContext rxContext = ar.AsyncState as IoContext;
        if (rxContext != null)
        {
               int rxBytes = rxContext._ipcSocket.EndReceive(ar);

                if (rxBytes > 0)
                {
                    EventHandler<VfxIpcEventArgs> dispatch = EventDispatch;
                        dispatch (this, new VfxIpcEventArgs(rxContext._ipcBuffer));

                    InitiateRecv(rxContext);

                }
          }
     } 
```

事实是，我猜“调度”会以某种方式阻止接收，直到它完成，最终导致延迟（即，在调度被延迟时处理的数据，因此我的（错误？）结论是数据累积在插座级别或之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:50:07.850

> 如何查看有多少 TCP 字节等待套接字读取

通过指定一个协议来指示它将发送多少字节。使用套接字，您可以在字节级别之上操作几层，并且由于缓冲和延迟，您无法看到有多少`send()`呼叫最终成为`receive()`您的呼叫。

如果您预先指定字节数，并发送一个类似 的字符串`"13|Hello, World!"`，那么当消息分两部分到达时没有问题，比如`"13|Hello"`和`", World!"`，因为您知道您必须读取 13 个字节。

`receive()`您必须在不同的调用之间保持某种状态和缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:52:53.977

`socket.Available` 如果您使用的是普通`Socket`类，则可以使用。否则，您必须定义一个标头字节，它给出要从另一端发送的字节数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:03:51.990

当涉及到像 Wireshark 这样的外部工具时，他们无法知道套接字中还剩下多少字节。他们只知道网络接口通过了哪些数据包。使用 Wireshark 检查它的唯一方法是实际知道您从套接字读取的最后一个字节，在 Wireshark 中找到它们，然后从那里开始计数。

但是，获取此信息的最佳方法是检查 .NET 应用程序中套接字对象的 Available 属性。

# ios - 平滑手绘贝塞尔曲线

> ID：11293033
> 
> 赞同：1
> 
> 时间：2012-07-02T11:47:15.350
> 
> 标签：ios, cocoa-touch, core-graphics, bezier

我正在尝试平滑我的手绘贝塞尔曲线，但无法实现，我从 erica sudan 写的书中获得了平滑曲线的代码，我试图实现，但不知道为什么我不能产生一个平滑的曲线，下面是我的代码，我请求大家请通过它..

```
- (void)drawRect:(CGRect)rect
{    
     myPath.pathColor = [UIColor redColor];         

    for (BezeirPath *_path in m_pathArray) 
    {
        [_path.pathColor setStroke];
        [_path.bezeirPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];         

    }   
}   

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

     UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

    m_previousPoint1 = [mytouch previousLocationInView:self];
    m_previousPoint2 = [mytouch previousLocationInView:self];
    m_currentPoint   =  [mytouch locationInView:self];

    CGPoint controlPoint = CGPointMake(m_previousPoint1.x+(m_previousPoint1.x - m_previousPoint2.x), m_previousPoint1.y +(m_previousPoint1.y - m_previousPoint2.y));
    [myPath.bezeirPath addQuadCurveToPoint:m_currentPoint controlPoint:controlPoint];    
    self.previousPoint3 = controlPoint; 

    [myPath.bezeirPath smoothedPath:myPath.bezeirPath :40];//Called the smoothing function.

   [self setNeedsDisplay];
} 
```

//平滑函数

```
-(UIBezierPath*)smoothedPath:(UIBezierPath*)bpath: (NSInteger) granularity
{
    NSArray *points = pointsFromBezierPath(bpath);
    if (points.count < 4) return bpath;
    // This only copies lineWidth. You may want to copy more
    UIBezierPath *smoothedPath = [UIBezierPath bezierPath];
    smoothedPath.lineWidth = bpath.lineWidth;
    // Draw out the first 3 points (0..2)
    [smoothedPath moveToPoint:POINT(0)];
    for (int index = 1; index < 3; index++)
        [smoothedPath addLineToPoint:POINT(index)];
    // Points are interpolated between p1 and p2,
    // starting with 2..3, and moving from there
    for (int index = 4; index < points.count; index++)
    {
        CGPoint p0 = POINT(index - 3);
        CGPoint p1 = POINT(index - 2);
        CGPoint p2 = POINT(index - 1);
        CGPoint p3 = POINT(index);
        // now add n points starting at p1 + dx/dy up until p2
        // using Catmull-Rom splines
        for (int i = 1; i < granularity; i++)
        {
            float t = (float) i * (1.0f / (float) granularity);
            float tt = t * t;
            float ttt = tt * t;
            CGPoint pi; // intermediate point
            pi.x = 0.5 * (2*p1.x+(p2.x-p0.x)*t +
                          (2*p0.x-5*p1.x+4*p2.x-p3.x)*tt +
                          (3*p1.x-p0.x-3*p2.x+p3.x)*ttt);
            pi.y = 0.5 * (2*p1.y+(p2.y-p0.y)*t +
                          (2*p0.y-5*p1.y+4*p2.y-p3.y)*tt +
                          (3*p1.y-p0.y-3*p2.y+p3.y)*ttt);
            [smoothedPath addLineToPoint:pi];
        }

        [smoothedPath addLineToPoint:p2];
    }
    // finish by adding the last point
    [smoothedPath addLineToPoint:POINT(points.count - 1)];
    return smoothedPath;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:51:11.273

我建议观看 WWDC 2012 的“构建高级手势识别器”。您可以跳过开头 - 您最感兴趣的部分在 38:23。

# javascript - 使用 Jquery 依次运行两个 javascript 函数

> ID：11293037
> 
> 赞同：0
> 
> 时间：2012-07-02T11:47:19.197
> 
> 标签：javascript, jquery, raphael, setinterval

这是我的代码：-

```
function myFunction1()
{
current && aus[current].animate({fill: "#fff", stroke: "#999"}, 200) && (document.getElementById(current).style.display = "");
st.animate({fill: "#ccc", stroke: "#000"}, 200);
R.safari();
document.getElementById(state).style.display = "block";
current = state;
}

function myFunction2()
{
st.animate({fill: "#fff", stroke: "#999"}, 200);
R.safari();
document.getElementById(state).style.display = "";
}

setInterval(function() {
myFunction1();
alert("MOVE"); 
myFunction2();
}, 2000); 
```

我正在做的事情是关于时间一步一步地执行两个函数......所以，我使用了 setInterval 事件，它`myFunction1()`是一个显示**raphaeljs**代码路径的颜色和笔触外观的函数，并且`myFunction2()`是一个函数隐藏路径的颜色和笔触外观...

但是当像这样调用这些函数时确实可以工作......函数之间的警报可能会显示结果但不像我想要的那样，如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:55:31.513

在您的情况下，**动画**功能**并行**运行。

要让它们按顺序运行，您必须在 f1 的回调中运行 f2

尝试在以下结构示例中重写您的代码：

```
 st.animate({fill: "#ccc", stroke: "#000"}, 200,function(){
  myFunction2();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:55:41.140

请试试这个：

```
var intervalFunctions = [ myFunction1, myFunction2 ];
var intIndex = 0;

window.setInterval(function(){
  intervalFunctions[intIndex++ % intervalFunctions.length]();
}, 2000); 
```

**或者**

```
function1() {

      ....

  function2() //<<========== call here once function1() is executed 
}

function2() {

     ....
} 
```

**图片**维多利亚和塔斯马尼亚 *维多利亚*

![在此处输入图像描述](../Images/6d1e6a69cc1700be968f9e9fb0a95416.png)

**塔斯马尼亚**

![在此处输入图像描述](../Images/dcd60cc2e38bad4bda8862d2171c28b0.png)

# ruby - 为什么 ctags 对我不起作用？

> ID：11293040
> 
> 赞同：1
> 
> 时间：2012-07-02T11:47:31.410
> 
> 标签：ruby, vim, ctags, exuberant-ctags

我尝试使用 ctags，但它根本不起作用。

我关注这个截屏视频：[http](http://www.youtube.com/watch?v=4f3AENLrdYo) ://www.youtube.com/watch?v=4f3AENLrdYo 。当我按 Ctrl + ] 时，没关系。

这是我的 .vimrc ：

```
" vim:set ts=2 sts=2 sw=2 expandtab:

call pathogen#runtime_append_all_bundles()

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" BASIC EDITING CONFIGURATION
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
scriptencoding utf-8
set encoding=utf-8
set fileencoding=utf-8
set number
set nocompatible
" allow unsaved background buffers and remember marks/undo for them
set hidden
" remember more commands and search history
set history=10000
set expandtab
set tabstop=4
set shiftwidth=4
set softtabstop=4
set autoindent
set laststatus=2
set showmatch
set incsearch
set hlsearch
" make searches case-sensitive only if they contain upper-case characters
set ignorecase smartcase
" highlight current line
set cursorline
set cmdheight=2
set switchbuf=useopen
set numberwidth=5
set showtabline=2
set winwidth=85
set shell=bash
" Prevent Vim from clobbering the scrollback buffer. See
" http://www.shallowsky.com/linux/noaltscreen.html
set t_ti= t_te=
" keep more context when scrolling off the end of a buffer
set scrolloff=3
" Store temporary files in a central spot
set backup
set backupdir=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
set directory=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
" allow backspacing over everything in insert mode
set backspace=indent,eol,start
" display incomplete commands
set showcmd
" Enable highlighting for syntax
syntax on
" Enable file type detection.
" Use the default filetype settings, so that mail gets 'tw' set to 72,
" 'cindent' is on in C files, etc.
" Also load indent files, to automatically do language-dependent indenting.
filetype plugin indent on
" use emacs-style tab completion when selecting files, etc
set wildmode=longest,list
" make tab completion for files/buffers act like bash
set wildmenu
let mapleader=","
let g:ctrlp_max_height = 40

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" CUSTOM AUTOCMDS
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
augroup vimrcEx
  " Clear all autocmds in the group
  autocmd!
  autocmd FileType text setlocal textwidth=78
  " Jump to last cursor position unless it's invalid or in an event handler
  autocmd BufReadPost *
    \ if line("'\"") > 0 && line("'\"") <= line("$") |
    \   exe "normal g`\"" |
    \ endif

  "for ruby, autoindent with two spaces, always expand tabs
  autocmd FileType ruby,haml,eruby,yaml,html,javascript,sass,cucumber set ai sw=2 sts=2 et
  autocmd FileType python set sw=4 sts=4 et

  autocmd! BufRead,BufNewFile *.sass setfiletype sass 

  autocmd BufRead *.mkd  set ai formatoptions=tcroqn2 comments=n:&gt;
  autocmd BufRead *.markdown  set ai formatoptions=tcroqn2 comments=n:&gt;

  " Indent p tags
  autocmd FileType html,eruby if g:html_indent_tags !~ '\\|p\>' | let g:html_indent_tags .= '\|p\|li\|dt\|dd' | endif

  " Don't syntax highlight markdown because it's often wrong
  autocmd! FileType mkd setlocal syn=off
augroup END

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" COLOR
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:set t_Co=256 " 256 colors
:set background=dark

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" STATUS LINE
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
:set statusline=%<%f\ (%{&ft})\ %-4(%m%)%=%-19(%3l,%02c%03V%)

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" MISC KEY MAPS
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
map <leader>y "*y
" Move around splits with <c-hjkl>
nnoremap <c-j> <c-w>j
nnoremap <c-k> <c-w>k
nnoremap <c-h> <c-w>h
nnoremap <c-l> <c-w>l
" Insert a hash rocket with <c-l>
imap <c-l> <space>=><space>
" Can't be bothered to understand ESC vs <c-c> in insert mode
imap <c-c> <esc>
" Clear the search buffer when hitting return
:nnoremap <CR> :nohlsearch<cr>
nnoremap <leader><leader> <c-^>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" ARROW KEYS ARE UNACCEPTABLE
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
map <Left> :echo "no!"<cr>
map <Right> :echo "no!"<cr>
map <Up> :echo "no!"<cr>
map <Down> :echo "no!"<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" MULTIPURPOSE TAB KEY
" Indent if we're at the beginning of a line. Else, do completion.
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! InsertTabWrapper()
    let col = col('.') - 1
    if !col || getline('.')[col - 1] !~ '\k'
        return "\<tab>"
    else
        return "\<c-p>"
    endif
endfunction
inoremap <tab> <c-r>=InsertTabWrapper()<cr>
inoremap <s-tab> <c-n>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" OPEN FILES IN DIRECTORY OF CURRENT FILE
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
cnoremap %% <C-R>=expand('%:h').'/'<cr>
map <leader>e :edit %%
map <leader>v :view %%

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" RENAME CURRENT FILE
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! RenameFile()
    let old_name = expand('%')
    let new_name = input('New file name: ', expand('%'), 'file')
    if new_name != '' && new_name != old_name
        exec ':saveas ' . new_name
        exec ':silent !rm ' . old_name
        redraw!
    endif
endfunction
map <leader>n :call RenameFile()<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" PROMOTE VARIABLE TO RSPEC LET
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! PromoteToLet()
  :normal! dd
  " :exec '?^\s*it\>'
  :normal! P
  :.s/\(\w\+\) = \(.*\)$/let(:\1) { \2 }/
  :normal ==
endfunction
:command! PromoteToLet :call PromoteToLet()
:map <leader>p :PromoteToLet<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" EXTRACT VARIABLE (SKETCHY)
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! ExtractVariable()
    let name = input("Variable name: ")
    if name == ''
        return
    endif
    " Enter visual mode (not sure why this is needed since we're already in
    " visual mode anyway)
    normal! gv

    " Replace selected text with the variable name
    exec "normal c" . name
    " Define the variable on the line above
    exec "normal! O" . name . " = "
    " Paste the original selected text to be the variable value
    normal! $p
endfunction
vnoremap <leader>rv :call ExtractVariable()<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" INLINE VARIABLE (SKETCHY)
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! InlineVariable()
    " Copy the variable under the cursor into the 'a' register
    :let l:tmp_a = @a
    :normal "ayiw
    " Delete variable and equals sign
    :normal 2daW
    " Delete the expression into the 'b' register
    :let l:tmp_b = @b
    :normal "bd$
    " Delete the remnants of the line
    :normal dd
    " Go to the end of the previous line so we can start our search for the
    " usage of the variable to replace. Doing '0' instead of 'k$' doesn't
    " work; I'm not sure why.
    normal k$
    " Find the next occurence of the variable
    exec '/\<' . @a . '\>'
    " Replace that occurence with the text we yanked
    exec ':.s/\<' . @a . '\>/' . @b
    :let @a = l:tmp_a
    :let @b = l:tmp_b
endfunction
nnoremap <leader>ri :call InlineVariable()<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" MAPS TO JUMP TO SPECIFIC COMMAND-T TARGETS AND FILES
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
map <leader>gr :topleft :split config/routes.rb<cr>
function! ShowRoutes()
  " Requires 'scratch' plugin
  :topleft 100 :split __Routes__
  " Make sure Vim doesn't write __Routes__ as a file
  :set buftype=nofile
  " Delete everything
  :normal 1GdG
  " Put routes output in buffer
  :0r! rake -s routes
  " Size window to number of lines (1 plus rake output length)
  :exec ":normal " . line("$") . _ "
  " Move cursor to bottom
  :normal 1GG
  " Delete empty trailing line
  :normal dd
endfunction
map <leader>gR :call ShowRoutes()<cr>
map <leader>gv :CtrlPClearCache<cr>\|:CtrlP app/views<cr>
map <leader>gc :CtrlPClearCache<cr>\|:CtrlP app/controllers<cr>
map <leader>gm :CtrlPClearCache<cr>\|:CtrlP app/models<cr>
map <leader>gh :CtrlPClearCache<cr>\|:CtrlP app/helpers<cr>
map <leader>gl :CtrlPClearCache<cr>\|:CtrlP lib<cr>
map <leader>gp :CtrlPClearCache<cr>\|:CtrlP public<cr>
map <leader>gs :CtrlPClearCache<cr>\|:CtrlP spec<cr>
map <leader>gf :CtrlPClearCache<cr>\|:CtrlP features<cr>
map <leader>gg :topleft 100 :split Gemfile<cr>
map <leader>gt :CtrlPClearCache<cr>\|:CtrlPTag<cr>
map <leader>f :CtrlPClearCache<cr>\|:CtrlP<cr>
map <leader>F :CtrlPClearCache<cr>\|:CtrlP %%<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" SWITCH BETWEEN TEST AND PRODUCTION CODE
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! OpenTestAlternate()
  let new_file = AlternateForCurrentFile()
  exec ':e ' . new_file
endfunction
function! AlternateForCurrentFile()
  let current_file = expand("%")
  let new_file = current_file
  let in_spec = match(current_file, '^spec/') != -1
  let going_to_spec = !in_spec
  let in_app = match(current_file, '\<controllers\>') != -1 || match(current_file, '\<models\>') != -1 || match(current_file, '\<views\>') != -1
  if going_to_spec
    if in_app
      let new_file = substitute(new_file, '^app/', '', '')
    end
    let new_file = substitute(new_file, '\.rb$', '_spec.rb', '')
    let new_file = 'spec/' . new_file
  else
    let new_file = substitute(new_file, '_spec\.rb$', '.rb', '')
    let new_file = substitute(new_file, '^spec/', '', '')
    if in_app
      let new_file = 'app/' . new_file
    end
  endif
  return new_file
endfunction
nnoremap <leader>. :call OpenTestAlternate()<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" RUNNING TESTS
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! RunTests(filename)
    " Write the file and run tests for the given filename
    :w
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    :silent !echo;echo;echo;echo;echo;echo;echo;echo;echo;echo
    if match(a:filename, '\.feature$') != -1
        exec ":!script/features " . a:filename
    else
        if filereadable("script/test")
            exec ":!script/test " . a:filename
        elseif filereadable("Gemfile")
            exec ":!bundle exec rspec --color " . a:filename
        else
            exec ":!rspec --color " . a:filename
        end
    end
endfunction

function! SetTestFile()
    " Set the spec file that tests will be run for.
    let t:grb_test_file=@%
endfunction

function! SetLineNumber()
    " set the spec file that tests will be run for.
    let t:spec_line_number=line('.')
endfunction

function! RunTestFileWithBacktrace(...)
    if a:0
        let command_suffix = a:1
    else
        let command_suffix = ""
    endif

    " Run the tests for the previously-marked file.
    let in_test_file = match(expand("%"), '\(.feature\|_spec.rb\)$') != -1
    if in_test_file
        call SetTestFile()
    elseif !exists("t:grb_test_file")
        return
    end
    call RunTests(t:grb_test_file . command_suffix . " -b")
endfunction

function! RunTestFile(...)
    if a:0
        let command_suffix = a:1
    else
        let command_suffix = ""
    endif

    " Run the tests for the previously-marked file.
    let in_test_file = match(expand("%"), '\(.feature\|_spec.rb\)$') != -1
    if in_test_file
        call SetTestFile()
    elseif !exists("t:grb_test_file")
        return
    end
    call RunTests(t:grb_test_file . command_suffix)
endfunction

function! RunNearestTest()
    let in_test_file = match(expand("%"), '\(.feature\|_spec.rb\)$') != -1
    if in_test_file 
        call SetLineNumber()
    end
    call RunTestFile(":" . t:spec_line_number ) 
endfunction

function! RunNearestTestWithBacktrace()
    let spec_line_number = line('.')
    call RunTestFile(":" . spec_line_number ) 
endfunction

map <leader>T :call RunTestFile()<cr>
map <leader>t :call RunNearestTest()<cr>
map <leader>B :call RunTestFileWithBacktrace()<cr>
map <leader>b :call RunNearestTestWithBacktrace()<cr>
map <leader>a :call RunTests('')<cr>
map <leader>c :w\|:!script/features<cr>
map <leader>w :w\|:!script/features --profile wip<cr>

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Md5 COMMAND
" Show the MD5 of the current buffer
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
command! -range Md5 :echo system('echo '.shellescape(join(getline(<line1>, <line2>), '\n')) . '| md5')

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" OpenChangedFiles COMMAND
" Open a split for each dirty file in git
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
function! OpenChangedFiles()
  only " Close all windows, unless they're modified
  let status = system('git status -s | grep "^ \?\(M\|A\)" | cut -d " " -f 3')
  let filenames = split(status, "\n")
  exec "edit " . filenames[0]
  for filename in filenames[1:]
    exec "sp " . filename
  endfor
endfunction
command! OpenChangedFiles :call OpenChangedFiles()

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" InsertTime COMMAND
" Insert the current time
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
command! InsertTime :normal a<c-r>=strftime('%F %H:%M:%S.0 %z')<cr> 
```

这是我的 vim 版本：

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled May  5 2012 20:53:55)
Included patches: 1-154
Compiled by dougui@osacar
Huge version without GUI.  Features included (+) or not (-):
+arabic +autocmd -balloon_eval -browse ++builtin_terms +byte_offset +cindent 
-clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
+conceal +cryptv +cscope +cursorbind +cursorshape +dialog_con +diff +digraphs 
-dnd -ebcdic +emacs_tags +eval +ex_extra +extra_search +farsi +file_in_path 
+find_in_path +float +folding -footer +fork() -gettext -hangul_input +iconv 
+insert_expand +jumplist +keymap +langmap +libcall +linebreak +lispindent 
+listcmds +localmap -lua +menu +mksession +modify_fname +mouse -mouseshape 
+mouse_dec -mouse_gpm -mouse_jsbterm +mouse_netterm -mouse_sysmouse 
+mouse_xterm +multi_byte +multi_lang -mzscheme +netbeans_intg -osfiletype 
+path_extra -perl +persistent_undo +postscript +printer +profile -python 
-python3 +quickfix +reltime +rightleft +ruby +scrollbind +signs +smartindent 
-sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
+tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
 -toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
+vreplace +wildignore +wildmenu +windows +writebackup -X11 -xfontset -xim -xsmp
 -xterm_clipboard -xterm_save 
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/usr/local/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H   -I/usr/local/include  -g -O2 -D_FORTIFY_SOURCE=1      
Linking: gcc   -L. -Wl,-Bsymbolic-functions -Wl,-z,relro -rdynamic -Wl,-export-dynamic  -L/usr/local/lib -Wl,--as-needed -o vim       -lm -ltinfo -lnsl  -ldl        -lruby1.8 -lpthread -lrt -ldl -lcrypt -lm 
```

我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:50:44.657

我道歉。这只是我的键盘的问题。使用我的法语加拿大配置，我必须做`Ctrl`++ `Alt Car`。`]`我将映射这个键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:18:34.010

一些简单的测试：

*   要使用标签，您必须首先生成一个标签文件（其中索引所有符号）。这是通过`ctags -R .`从命令行或`:!ctags -R .`Vim 执行来完成的。
*   执行命令后，检查`tag`目录中是否已创建文件。这是一个测试文件，因此您可以检查符号列表是否合理。
*   `tag`最后，如果 Vim在路径中找到文件，你只能跳转到一个标签上。这是通过`tags`在 .vimrc 中设置选项来实现的

我使用以下选项：

```
" search first in current directory then file directory for tag file
set tags=tags,../tags 
```

# spring - struts2、spring、hibernate应用中如何实现ServletContextListener？

> ID：11293041
> 
> 赞同：3
> 
> 时间：2012-07-02T11:47:45.017
> 
> 标签：spring, hibernate, servlets, struts2

在我的应用程序中，我想将我的一些数据存储在 ServletContext 中，因为它将在整个应用程序中使用。数据保存在数据库中。所有的配置都是通过整合struts2、spring、hibernate来完成的。问题是，我发现很难从数据库中获取数据。Spring 无法将 dao impl 类注入到实现 ServleltContextListener 的类中。谁能告诉我该怎么做？或者有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T11:58:53.497

试试这个

```
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.context.support.WebApplicationContextUtils;

public class MyListener implements ServletContextListener
{
    /**
     * @see javax.servlet.ServletContextListener#contextInitialized
     * (javax.servlet.ServletContextEvent) 
     */
    @Override
    public void contextInitialized(ServletContextEvent sce)
    {
        WebApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(sce.getServletContext());
        Object yourDaoImplClass = applicationContext.getBean("your_bean_name_or_bean_id");
        //You can type cast yourDaoImplClass to your object
    }

    /**
     * @see javax.servlet.ServletContextListener#contextDestroyed
     * (javax.servlet.ServletContextEvent) 
     */    
    @Override
    public void contextDestroyed(ServletContextEvent sce)
    {

    }

} 
```

希望这有效。让我知道事情的后续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:18:25.960

最好的方法是实现 Spring 的 ServletContextAware 接口，然后使用 @PostConstruct 或 afterPropertiesSet 方法将项目添加到 servlet 上下文。

# sql - Alter 和 Update SQL 的区别

> ID：11293042
> 
> 赞同：38
> 
> 时间：2012-07-02T11:47:51.710
> 
> 标签：sql, sql-update, alter

我正忙于研究 MySQL，我知道 update 用于更新表中的记录或行。那么 alter do 有什么不同呢？好像他们是一样的。

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-02T11:50:32.033

`ALTER`是一个 DDL（数据定义语言）语句。而是DML `UPDATE`（数据操作语言）语句。`ALTER`用于更新表的结构（添加/删除字段/索引等）。而`UPDATE`用于更新数据。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-02T11:50:25.510

更改数据库中的`ALTER`表，您可以添加或删除列等。但它不会更改数据（当然删除或添加的列除外）。

而`UPDATE`更改表中的行，并使表保持不变。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-02T11:50:26.540

`ALTER`用于更改表结构或存储过程之类的东西，也称为 DDL 语句。

```
ALTER table MyTable 
ADD MyNewColumn VARCHAR(100) 
```

或者

```
ALTER PROC dbo.MyStoredProc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-23T14:46:48.197

Alter 命令是一种数据定义语言 Update 命令是一种数据操作语言 Alter example-table structure, table name, sp, functions Update example-change database in a row or column etc Alter 命令对表结构进行更改。更新命令对表内进行修改 Alter 命令用于添加、删除修改数据库中表的属性 Update 命令用于更新数据库中的现有记录

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-02T17:11:11.673

让我们用简单的话来看看......

Alter命令我们用于修改数据库、表的结构（添加、删除、修改），它属于DDL。

我们用于使用 where 条件修改表的行（记录）的更新命令及其属于 DML。

# asp.net-mvc - 如何在 asp.net mvc 3 中使用@html.actionlink 传递文本框值

> ID：11293048
> 
> 赞同：13
> 
> 时间：2012-07-02T11:48:08.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3

如何在 asp.net mvc3 中使用 @html.actionlink 从文本中传递值？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-02-22T00:25:03.223

这里没有一个答案真的有效。接受的答案不会像正常操作链接那样刷新页面；其余的根本不起作用，或者希望您按照说明放弃您的问题并退出使用`ActionLink`.

**MVC3/4**

您可以使用该`htmlAttributes`方法`ActionLink`做您想做的事：

```
Html.ActionLink("My Link Title", "MyAction", "MyController", null, new { onclick = "this.href += '&myRouteValueName=' + document.getElementById('myHtmlInputElementId').value;" }) 
```

**MVC5**

报了以下错误，但我没有验证：

> 检测到潜在危险的 Request.Path 值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T03:46:19.070

与其使用@Html.actionlink 传递您的值，不如尝试使用 jquery 将您的文本框值传递给控制器​​，如下所示：

```
$(function () {
    $('form').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            data: { search: $('#textboxid').val()},
            success: function (result) {
                $('#mydiv').html(result);
            }
        });
        return false;
    });
}); 
```

此代码会将您的文本框值发布到控制器并返回将加载到 div“mydiv”中的输出结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T12:10:34.153

要将数据从客户端传递到服务器，您可以使用 html 表单：

```
 @using (Html.BeginForm(actionName,controllerName)) {
    <input type="text" name="myText"/>
    <input type="submit" value="Check your value!">
} 
```

确保在控制器的方法中捕获您的 myText 变量

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-02T11:55:37.677

您可以使用此代码（YourValue = TextBox.Text）

```
Html.ActionLink("Test", new { controller = "YourController", action = "YourAction", new { id = YourValue }, null );

public class YourController : Controller
{
        public ActionResult YourAction(int id)
        {
            return View("here your value", id);
        }
} 
```

# android - 如果 listView 从下往上滚动，如何收听？

> ID：11293050
> 
> 赞同：1
> 
> 时间：2012-07-02T11:48:16.477
> 
> 标签：android, android-layout, android-listview, android-animation

我想听听列表视图是否从下到上滚动。

我已经尝试了很多解决方法，但无法得到这个逻辑。[这篇文章](https://stackoverflow.com/a/9630292/863678)的答案对我也没有帮助，而且[这篇文章](https://stackoverflow.com/a/6384609/863678)的答案也帮助我检测 listView 是否被滚动（不知道它是从上到下还是从下到上）。谁能帮我检测列表视图是否向上滚动（从下到上）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:50:57.563

我已经编辑了第二篇文章的片段：

```
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    if(currentFirstVisibleItem > firstVisibleItem){
        //scrolling to top of list
    }else if (currentFirstVisibleItem < firstVisibleItem){
        //scrolling to bottom of list
    }

    this.currentFirstVisibleItem = firstVisibleItem;
    this.currentVisibleItemCount = visibleItemCount;        
} 
```

# symfony-2.1 - Behat 2.4 不输出任何内容（使用 Symfony2Extension）

> ID：11293051
> 
> 赞同：0
> 
> 时间：2012-07-02T11:48:18.110
> 
> 标签：symfony-2.1, behat

我目前正在从 behat 2.3 和 BehatBundle 迁移到 behat 2.4 和 Symfony2Extension。

我的问题是：当我运行时，behat 什么也没输出`php bin/behat`。

喜欢 ：

```
$ php bin/behat
$ 
```

编译容器时似乎崩溃`Behat\Behat\Console\BehatApplication::createContainer`了，但没有错误。

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:05:10.367

将作为参数提供给`bin/behat`您要运行的套件的包名称。

# python - Echo python输入或禁用输入抑制？

> ID：11293054
> 
> 赞同：-1
> 
> 时间：2012-07-02T11:48:23.083
> 
> 标签：python, input, echo

有没有办法在 python 中回显输入，或者用另一种方式禁用输入的抑制？我使用 python 进行科学计算，仅供参考，在调试时具有此功能很有用。

我有一个包含创建变量的代码的脚本窗口，例如`x=1,`在另一行我想只输入变量`x`并在shell中获取输入ie`x`和输出ie `1`，而无需使用`print(x)`（实际上只会给我的值`x`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:42:12.437

诀窍是*从*Python Shell（即 IDLE）打开文件。您可以通过文件 > 打开来完成此操作。这将在新窗口中打开您的文件。从这里您可以编辑和运行您的脚本。通过导航到“运行”>“运行模块”或按 F5 来运行。这将重新启动 IDLE 并使您的变量在 IDLE 中可用。

例如，我输入`a = "weee"`了一个 .py 脚本（然后运行了该脚本）。现在，在我的主 IDLE 窗口中，我输入`a`并得到以下输出：

```
>>> a
output: 'weee' 
```

# msbuild - T4MVC 与 TeamCity 上的便携式区域

> ID：11293055
> 
> 赞同：0
> 
> 时间：2012-07-02T11:48:26.073
> 
> 标签：msbuild, teamcity, t4mvc, portable-areas

我有一种情况，我们有一个使用[便携式区域](http://portableareas.codeplex.com/)和[T4MVC](http://t4mvc.codeplex.com/)的解决方案，它有一个单独的 T4MVC 项目，其中为 7 个便携式区域和主 MVC3 应用程序生成了所有文件。我们已按照[此处](http://otac0n.com/blog/2010/12/23/Pain-Free-T4MVC.aspx)的说明进行操作，我们会在构建解决方案时自动生成类。

虽然在 VS2010 中，这在调试和发布版本中都可以正常工作，但我遇到问题的地方是我试图让它在 TeamCity 上运行。

[我已按照此处](http://msdn.microsoft.com/en-us/library/ee847423.aspx#buildserver)在构建服务器上设置 T4 的说明进行操作，如果在构建服务器上运行 msbuild，我可以看到它能够启动 TextTemplate.exe 并查看生成文件，问题是它永远找不到文件进行改造。

在执行与在 TeamCity 上运行的相同构建脚本时，我设法在本地计算机上重现了相同的行为。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build">

  <PropertyGroup>
    <Configuration>Release</Configuration>
    <TransformOnBuild>true</TransformOnBuild>
    <TransformFile>T4MVC\T4MVC.tt</TransformFile>
    <OverwriteReadOnlyOutputFiles>true</OverwriteReadOnlyOutputFiles>
  </PropertyGroup>

  <ItemGroup>
    <None Include="T4MVC\T4MVC.tt">
      <OutputFilePath>$(MSBuildProjectDirectory)\T4MVC</OutputFilePath>
    </None>
  </ItemGroup>

  <ItemGroup>
    <ProjectsToBuild Include="**\*proj" Exclude="ThemeGenerator\**" />
  </ItemGroup>

  <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets" />

  <Target Name="Clean">
    <ItemGroup>
      <BinFiles Include="*\bin\*.*" />
    </ItemGroup>
    <Delete Files="@(BinFiles)" />
  </Target>

  <Target Name="Build" DependsOnTargets="Clean;Transform">
    <MSBuild Projects="@(ProjectsToBuild)"
             ContinueOnError="false"
             Properties="Configuration=$(Configuration)" /> 
  </Target>
</Project> 
```

执行此操作时，我从 msbuild 中获得以下输出，并设置了 /v:diag：

```
Building with tools version "4.0".
Target "CreateCandidateT4ItemList: (TargetId:2)" in file "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets" from project "C:\TeamCity\buildAgent\work\daad348639a87062\Project_Build.xml" (target "Transform" depends on it):
Using "Message" task from assembly "Microsoft.Build.Tasks.v4.0, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "Message" (TaskId:2)
  Creating a list of candidate items that might need to be processed by T4 items (TaskId:2)
Done executing task "Message". (TaskId:2)
Using "CreateItem" task from assembly "Microsoft.Build.Tasks.v4.0, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "CreateItem" (TaskId:3)
Done executing task "CreateItem". (TaskId:3)
Done building target "CreateCandidateT4ItemList" in project "Project_Build.xml".: (TargetId:2)
Target "SelectItemsForTransform: (TargetId:3)" in file "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemp
lating.targets" from project "C:\TeamCity\buildAgent\work\daad348639a87062\Project_Build.xml" (target "Transform" depends on it):
Task "Error" skipped, due to false condition; ($(TransformFile)=='') was evaluated as (C:\TeamCity\buildAgent\work\daad348639a87062\T4MVC\T4MVC.tt=='').
Initializing task factory "CodeTaskFactory" from assembly "C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Microsoft.Build.Tasks.v4.0.dll".
Using "FilterCandidatesBasedOnItemSpec" task from the task factory "Code Task Factory".
Task "FilterCandidatesBasedOnItemSpec" (TaskId:4)
Done executing task "FilterCandidatesBasedOnItemSpec". (TaskId:4)
Done building target "SelectItemsForTransform" in project "Project_Build.xml".: (TargetId:3)
Target "CreateT4ItemLists: (TargetId:4)" in file "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets" from project "C:\TeamCity\buildAgent\work\daad348639a87062\Project_Build.xml" (target "ExecuteTransformations" depends on it):
Task "Message" (TaskId:5)
  Creating T4 items lists for project  ()... (TaskId:5)
Done executing task "Message". (TaskId:5)
Done building target "CreateT4ItemLists" in project "Project_Build.xml".: (TargetId:4)
Target "ExecuteTransformations: (TargetId:5)" in file "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets" from project "C:\TeamCity\buildAgent\work\daad348639a87062\Project_Build.xml" (target "Transform" depends on it):
Using "TransformTemplates" task from assembly "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.Build.Tasks.dll".
Task "TransformTemplates" (TaskId:6)
  Directive processors: (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Include folders: (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Assembly references: (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Reference paths: (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Parameter values: (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Full list of templates passed in : (TaskId:6)
    {none} (TaskId:6)
   (TaskId:6)
  Performing full T4 transformation (TaskId:6)
    MinimalRebuildFromTracking = True (TaskId:6)
    forcedRebuildRequired = False (TaskId:6)
  \tTrackerLogDirectory = <null> (TaskId:6)
  Tracking is disabled. TrackerLogDirectory has not been specified (TaskId:6)
Done executing task "TransformTemplates". (TaskId:6)
Using "PreprocessTemplates" task from assembly "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.Build.Tasks.dll".
Task "PreprocessTemplates" (TaskId:7)
  Directive processors: (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Include folders: (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Assembly references: (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Reference paths: (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Parameter values: (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Full list of templates passed in : (TaskId:7)
    {none} (TaskId:7)
   (TaskId:7)
  Performing full T4 preprocessing (TaskId:7)
    MinimalRebuildFromTracking = True (TaskId:7)
    forcedRebuildRequired = False (TaskId:7)
  \tTrackerLogDirectory = <null> (TaskId:7)
  Tracking is disabled. TrackerLogDirectory has not been specified (TaskId:7)
Done executing task "PreprocessTemplates". (TaskId:7) 
```

看起来，在构建服务器上，T4 似乎无法找到它需要引用以生成必要类的项目。我尝试了输入文件夹和程序集引用的各种组合，但发现无法让 T4 “看到”它需要的文件。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:30:56.517

坦率地说，我不确定你是否可以让它工作，因为 T4MVC 需要 VS 主机才能访问 DTE 对象模型。请参阅此相关线程：[Using T4MVC with build script](https://stackoverflow.com/questions/5372067/using-t4mvc-with-build-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:43:17.363

如果 David Ebbo 是正确的，请在构建服务器上从命令行运行 VS (devenv.exe)。

例如，您也不能使用 msbuild 构建 .vdproj 安装程序项目，因此我们在构建服务器上从命令行运行 VS 来构建安装程序...

# url - 在 Common Lisp 中对字符串进行 URL 解码

> ID：11293060
> 
> 赞同：5
> 
> 时间：2012-07-02T11:48:46.950
> 
> 标签：url, common-lisp, drakma

我有一个包含转义 URL 的字符串：

```
http%3A%2F%2Fexample.com%3Ffoo%3Dbar+baz 
```

我正在尝试将其解码为以下内容：

```
http://example.com?foo=bar+baz 
```

但是，我找不到 Drakma 导出的任何合适的函数。我可以*这样*编码：

```
* url-string

"http://example.com?foo=bar+baz"
* (drakma:url-encode url-string :utf-8)

"http%3A%2F%2Fexample.com%3Ffoo%3Dbar%2Bbaz" 
```

...所以我认为我在正确的轨道上。如果有人可以在正确的方向上提供帮助，我将不胜感激:-) 我使用的是 SBCL 1.0.54，它是从 64 位 Linux Mint 13 上的源代码构建的。

如果它有助于澄清我正在尝试做的事情，在 Ruby 中，我会执行以下操作：

```
> uri_string = "http%3A%2F%2Fexample.com%3Ffoo%3Dbar+baz"
 => "http%3A%2F%2Fexample.com%3Ffoo%3Dbar+baz" 
> URI.decode uri_string
 => "http://example.com?foo=bar+baz" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T15:27:50.863

一个快速的 SLIME 会话。

```
CL-USER> (ql-dist:system-apropos "url")

#<SYSTEM curly / curly-20120407-git / quicklisp 2012-05-20>
#<SYSTEM curly.test / curly-20120407-git / quicklisp 2012-05-20>
#<SYSTEM do-urlencode / do-urlencode-20120407-git / quicklisp 2012-05-20>
#<SYSTEM url-rewrite / url-rewrite-0.1.1 / quicklisp 2012-05-20>

CL-USER> (ql:quickload :do-urlencode) 
```

`C-c``C-d``p``do-urlencode``RET`

```
DO-URLENCODE:URLDECODE
  Function: (not documented)
DO-URLENCODE:URLENCODE
  Function: (not documented)
DO-URLENCODE:URLENCODE-MALFORMED-STRING
  Type: (not documented)
DO-URLENCODE:URLENCODE-MALFORMED-STRING-STRING
  Generic Function: (not documented)

CL-USER> (do-urlencode:urldecode "http%3A%2F%2Fexample.com%3Ffoo%3Dbar%2Bbaz")

"http://example.com?foo=bar+baz" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-31T01:04:02.737

[使用Quri](https://github.com/fukamachi/quri)找到了另一个解决方案，这是一个带有编码和解码实用程序（用于 uri 和参数）的 uri 处理库：

```
(url-decode "http%3A%2F%2Fexample.com%3Ffoo%3Dbar%2Bbaz")
;; "http://example.com?foo=bar+baz" 
```

安装，`(ql:quickload :quri)`然后可选`(use-package :quri)`。

（我的资料来源：[lisp-lang.org 的推荐库](http://lisp-lang.org/wiki/article/recommended-libraries)和[awesone-cl](https://github.com/CodyReichert/awesome-cl)）。

# android - 如何在 IntentService 类的 onHandleIntent() 方法中打开对话框

> ID：11293062
> 
> 赞同：1
> 
> 时间：2012-07-02T11:48:57.657
> 
> 标签：android

我想在类的 `onHandleIntent()`方法中打开一个自定义对话框`IntentService`，但是当我编写用于在此方法中显示 Dialog 的代码时，它会显示错误

`The method findViewById(int) is undefined for the type MyAlarmService`

谁能建议我如何解决这个问题？

我用过的代码：

```
public class MyAlarmService extends IntentService { 
public void onCreate() {
    super.onCreate();
}

public MyAlarmService() {
    super("MyAlarmService");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, startId, startId);
    Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

@SuppressWarnings("static-access")
@Override
protected void onHandleIntent(Intent intent) {
    final Dialog alarmDialog = new Dialog(MyAlarmService.this);
    alarmDialog .requestWindowFeature(alarmDialog.getWindow().FEATURE_NO_TITLE);
    alarmDialog .getWindow().setBackgroundDrawable(new ColorDrawable(0));

    Context mContext = getApplicationContext();
    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.clear_all_warning_dialog, (ViewGroup) findViewById(R.id.layout_warning_dialog));

    TextView dialogTitile = (TextView) layout.findViewById(R.id.dialog_title_text);

    TextView dialogDesc = (TextView) layout.findViewById(R.id.dialog_desc_text);

    Button buttonYes = (Button) layout.findViewById(R.id.button_yes);               

    Button buttonNo = (Button) layout.findViewById(R.id.button_no);             

    alarmDialog.setContentView(layout);
    alarmDialog.show();

    buttonYes.setOnClickListener(new OnClickListener() {                    
        @Override
        public void onClick(View v) {
            alarmDialog.dismiss();
        }
    }); 
    buttonNo.setOnClickListener(new OnClickListener() {                 
        @Override
        public void onClick(View v) {
            alarmDialog.dismiss();
        }
    }); 
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:26:53.260

只需启动一个**活动**即可完成，而不是考虑膨胀对话框：

```
@Override
protected void onHandleIntent(Intent intent) {
    synchronized (this) 
  {
    startActivity(new Intent(this,ActivityXYZ.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
  }
} 
```

制作**对话框布局**（这是您在上面开始的 ActivityXYZ 的布局），如：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000"
android:orientation="vertical" >

<TextView
    android:id="@+id/TextView01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_margin="10dp"
    android:gravity="center_horizontal"
    android:text="Alert Dialog Message"
    android:textColor="#fff"
    android:textSize="16dp" >
</TextView>
<LinearLayout  android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_marginBottom="5dp">

<Button
    android:id="@+id/ButtonOk"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:text="Ok"
    android:textColor="#000"
    android:textSize="18sp"
    android:textStyle="bold" >
</Button>

<Button
    android:id="@+id/ButtonCancel"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:text="Cancel"
    android:textColor="#000"
    android:textSize="18sp"
    android:textStyle="bold"
   >
</Button>
</LinearLayout>
</LinearLayout> 
```

并在清单文件中将其包含在该**活动的配置**中：

```
android:theme="@android:style/Theme.Dialog" 
```

在为该活动制作布局时，只需添加文本视图和两个按钮，就像在 Dialogs 中所做的那样，它会产生 Dialog 从 Service 膨胀的效果。

如有任何澄清，请告诉我。:))))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:57:27.303

我认为您不能在服务中膨胀视图，因为 IntentService 不在 UI 线程上运行，另一种解决方案是将您的服务绑定到您的活动并编写一个侦听器，该侦听器将显示对话框并将其注册到您的服务在 onBind() 方法中。

您可以通过以下方式扩展您的服务：

```
public class MyAlarmService extends IntentService {

    private MyListener mListener;

    // Your implementation here

    public void registerListener(MyListener listener){
        mListener = listener;
    }

    @Override
    protected void onHandleIntent(Intent intent) {
                listener.postToUIThread();

        // Other things you might want to do
    }

    @Override
    public IBinder onBind(Intent intent) {
        return new MyAlarmBinder(this);
    }

    @Override
    public boolean onUnbind(Intent intent) {
        return super.onUnbind(intent);
    }
} 
```

然后编写 binder 和 listener 如下：

```
public class MyListener {

    private Handler mHandler;
    private Runnable mRunnable;

    public MyListener(Handler handler, Runnable runnable){
        this.mHandler = handler;
        this.mRunnable = runnable;
    }

    public void postToUIThread(){
        mHandler.post(mRunnable);
    }
}

public class MyAlarmBinder extends Binder {
    private WeakReference<MyAlarmService> mService;

    public MyAlarmBinder(MyAlarmService service){
        mService = new WeakReference<MyAlarmService>(service);
    }

    public MyAlarmService getService(){
        return mService.get();
    }
} 
```

请注意，在侦听器中，我使用在 UI 线程上创建的 Handler 将对话框创建代码发布到 UI 线程。

在您的主要活动中，您可以将它们放在一起：

```
private MyAlarmService mService;

private Handler mHandler = new Handler;
private Runnable mRunnable = new Runnable(){

    @Override
    public void run(){
        // Show dialog here
    }
}

private ServiceConnection mConnection = new ServiceConnection() {

    public void onServiceConnected(ComponentName name, IBinder service) {
        mService = ((MyAlarmBinder)service).getService();
        mService.registerListener(new MyListener(mHandler, mRunnable));
    }

    public void onServiceDisconnected(ComponentName name) {
        mService = null;
    }
};

@Override
protected void onResume() {
    super.onResume();
    bindService(new Intent(this, MyAlarmService.class), mConnection,
        Context.BIND_AUTO_CREATE);
}

@Override
protected void onPause() {
    super.onPause();
    if(mConnection != null){
        unbindService(mConnection);
    }
} 
```

我没有尝试过，但是稍作修改，这应该可以解决您的问题。如果您有任何其他问题，请随时提出。

# .net - 来自 cxf 的 wse3 PasswordDigest 身份验证

> ID：11293065
> 
> 赞同：3
> 
> 时间：2012-07-02T11:49:11.933
> 
> 标签：.net, soap, cxf, ws-security, wse

我正在扩展一个旧的 .NET ASP 应用程序（它无法升级）。它将有一个从 CXF (java) 调用的 SOAP Web 服务。我已经在 .NET 端安装和配置了 WSE3 扩展，现在我可以使用soap ui 从 ASP 世界之外调用我的简单服务。一切似乎都正常 - 我可以阻止某些使用用户名和明文密码进行身份验证的用户的访问。但是，当我在soap-ui 中将WSS-Passoword-Type 设置为“PasswordDigest”时，我收到以下消息：

> 无法对安全令牌进行身份验证或授权 ---> WSE562：传入的用户名令牌包含密码哈希。内置的 UsernameTokenManager 不支持这种类型的 UsernameToken。有关 UsernameTokenManager.AuthenticateToken 方法的更多详细信息，请参阅文档

此服务将由 ESB 从外部调用 - 因此我没有太多选择来选择身份验证方案。我需要该服务来支持“PasswordDigest”。有没有办法实现它？

我知道我可以实现自定义 UsernameTokenManager - 但它必须返回用户密码，而它只获得散列值。这对我没有帮助。

以下是我提出的要求供参考：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:tem="http://tempuri.org/" xmlns:wsa="http://www.w3.org/2005/08/addressing">
   <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-22">
            <wsse:Username>user</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">xHxNY51954nB9l3ulEp8fRX8HdE=</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">TEU+Z/yfS0oDTOxMZG+AXA==</wsse:Nonce>
            <wsu:Created>2012-07-02T11:39:17.695Z</wsu:Created>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header>
   <soap:Body>
      <tem:HelloWorld/>
   </soap:Body>
</soap:Envelope> 
```

# regex - 简化时间文字的正则表达式（如“10h50m”）

> ID：11293068
> 
> 赞同：6
> 
> 时间：2012-07-02T11:49:41.567
> 
> 标签：regex, parsing, time, lexical-analysis

我正在使用[pyLR1](https://github.com/sebastianriese/pyLR1)为自定义描述语言编写词法分析器规则，其中应包括时间文字，例如：

```
10h30m     # meaning 10 hours + 30 minutes
5m30s      # meaning 5 minutes + 30 seconds
10h20m15s  # meaning 10 hours + 20 minutes + 15 seconds
15.6s      # meaning 15.6 seconds 
```

时、分、秒部分的规格顺序应固定为`h`、`m`、`s`。为了详细说明这一点，我想要以下有效的组合`hms`、`hm`、`h`、和（当然`ms`，不同段之间有数字）。作为奖励，正则表达式应该检查段中的十进制（即非自然）数字，并且只允许这些在最不重要的段中。`m``s`

因此，除了最后一组之外，我都有一个数字匹配，例如：

```
([0-9]+) 
```

最后一组甚至：

```
([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)  # to allow for .5 and 0.5 and 5.0 and 5 
```

浏览 h、m 和 sa 可爱的小 Python 脚本的所有组合给了我以下正则表达式：

```
(([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)h|([0-9]+)h([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)m|([0-9]+)h([0-9]+)m([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)s|([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)m|([0-9]+)m([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)s|([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)s) 
```

显然，这是有点恐怖的表情。有没有办法简化这个？答案必须与 pythons模块一起使用，如果由于正则表达式的受限子集，`re`我也将接受无法使用的答案。`pyLR1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:07:08.017

您可以分解您的正则表达式，使用符号`h`, `m`,`s`来表示每个子正则表达式，最基本的版本是：

```
h|hm|hms|ms|m|s 
```

这就是你目前所拥有的。您可以将其分解为：

```
(h|hm|hms)|(ms|m)|s 
```

然后`h`从第一个表达式和`m`第二个表达式中提取（使用`(x|)`== `x?`）：

```
h(m|ms)?|ms?|s 
```

继续我们得到

```
h(ms?)?|ms?|s 
```

这可能更简单（也可能是最简单的）。

* * *

添加正则表达式`d`以表示小数（如`\.[0-9]+`），这可以写为

```
h(d|m(d|sd?)?)?|m(d|sd?)?|sd? 
```

（即在每个阶段可选地有小数，或延续到下一个`h` `m`或`s`。）

这将导致类似（仅几小时和几分钟）：

```
[0-9]+((\.[0-9]+)?h|h[0-9]+(\.[0-9]+)?m)|[0-9]+(\.[0-9]+)?m 
```

* * *

看看这个，可能无法进入适合 pyLR1 的形式，因此在每个位置都使用小数进行解析，然后进行二次检查可能是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:14:29.563

下面的表示应该是可以理解的，我不知道你正在使用的确切的正则表达式语法，所以你必须自己“翻译”成有效的语法。

你的时间

```
 [0-9]{1,2}h 
```

你的分钟

```
[0-9]{1,2}m 
```

你的秒

```
[0-9]{1,2}(\.[0-9]{1,3})?s 
```

您希望所有这些都按顺序排列，并且能够省略其中任何一个（用 包装`?`）

```
([0-9]{1,2}h)?([0-9]{1,2}m)?([0-9]{1,2}(\.[0-9]{1,3})?s)? 
```

但是，这与以下内容相匹配：`10h30s`
有效的组合是`hms`, `hm`, **`hs`**, `h`, `ms`,`m`和`s`
or iow，可以省略分钟，但仍然有小时和秒。

另一个问题是，如果给出了空字符串，则它是匹配的，因为所有三个`?`都使其有效。所以你必须以某种方式解决这个问题。唔

* * *

查看@dbaupp `h(ms?)?|ms?|s`，您可以使用上述内容并进行匹配：

```
h: [0-9]{1,2}h
m: [0-9]{1,2}m
s: [0-9]{1,2}(\.[0-9]{1,3})?s 
```

所以你可以：

```
h(ms?)?: ([0-9]{1,2}h([0-9]{1,2}m([0-9]{1,2}(\.[0-9]{1,3})?s)?)?
  ms?  :              [0-9]{1,2}m([0-9]{1,2}(\.[0-9]{1,3})?s)?
   s   :                          [0-9]{1,2}(\.[0-9]{1,3})?s 
```

所有这些 OR'd 一起为您提供了一个大但易于分解的正则表达式：

```
([0-9]{1,2}h([0-9]{1,2}m([0-9]{1,2}(\.[0-9]{1,3})?s)?)?|[0-9]{1,2}m([0-9]{1,2}(\.[0-9]{1,3})?s)?|[0-9]{1,2}(\.[0-9]{1,3})?s 
```

这让你摆脱了空字符串问题*和***`hs`**.

* * *

看着@Donal Fellows 对@dbaupp 答案的评论，我也会这样做`(h?m)?S|h?M|H`

```
(h?m)?s: (([0-9]{1,2}h)?[0-9]{1,2}m)?[0-9]{1,2}(\.[0-9]{1,3})?s
 h?m   :  ([0-9]{1,2}h)?[0-9]{1,2}m
 h     :   [0-9]{1,2}h 
```

并合并在一起，你最终会得到比上面更小的东西：

```
(([0-9]{1,2}h)?[0-9]{1,2}m)?[0-9]{1,2}(\.[0-9]{1,3})?s|([0-9]{1,2}h)?[0-9]{1,2}m|[0-9]{1,2}h 
```

* * *

现在我们必须找到一种方法来匹配`.xx`demical 表示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:50:46.397

这是一个有效的简短 Python 表达式[：](http://regexr.com?31dn2)

```
(\d+h)?(\d+m)?(\d*\.\d+|\d+(\.\d*)?)(?(2)s|(?(1)m|[hms])) 
```

受基于条件句的 Cameron Martins[回答的启发。](https://stackoverflow.com/a/11293445/107152)

# 解释：

```
(\d+h)?                 # optional int "h" (capture 1)
(\d+m)?                 # optional int "m" (capture 2)
(\d*\.\d+|\d+(\.\d*)?)  # int or decimal 
(?(2)                   # if "m" (capture 2) was matched:
  s                       # "s"
| (?(1)                 # else if "h" (capture 1) was matched:
  m                       # "m"
|                       # else (nothing matched):
  [hms]))                 # any of the "h", "m" or "s" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:59:08.340

您可能有小时、分钟和秒。

```
 /(\d{1,2}h)*(\d{1,2}m)*(\d{1,2}(\.\d+)*s)*/ 
```

应该做的工作。根据正则表达式库，您将按顺序获取项目，或者您必须进一步解析它们以检查 h、m 或 s。

在后一种情况下，另请参阅返回的内容

```
 /(\d{1,2}(h))*(\d{1,2}(m))*(\d{1,2}(\.\d+)*(s))*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T12:10:37.057

最后一组应该是：

```
([0-9]*\.[0-9]+|[0-9]+(\.[0-9]+)?) 
```

除非你想匹配`5.`

* * *

您可以使用[正则表达式 ifs](http://www.regular-expressions.info/conditional.html)，如下所示：

```
(([0-9]+h)?([0-9]+m)?([0-9]+s)?)(?(?<=h)(([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)m)?|(?(?<=m)(([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)s)?|\b(([0-9]*\.[0-9]+|[0-9]+(\.[0-9]*)?)[hms])?)) 
```

这里 - [http://regexr.com?31dmj](http://regexr.com?31dmj)

我没有检查这是否有效，但它尝试仅匹配整数小时，分钟，然后首先匹配秒，然后如果最后匹配的是小时，它允许小数分钟，否则如果最后匹配的是分钟，它允许小数秒。

# objective-c - 如何让 NSTextField 使用 NSTextFieldCell 的自定义子类？

> ID：11293071
> 
> 赞同：7
> 
> 时间：2012-07-02T11:49:50.190
> 
> 标签：objective-c, nstextfield, nstextfieldcell

我一直在寻找一种解决方案，使我的 NSTextField 底部对齐，我找到[了这个](https://stackoverflow.com/a/1236659/1016508)并根据我的需要对其进行了调整。所以现在我有这个自定义的 NSTextFieldCell 但是我如何告诉我的 NSTextFields 使用这个类（以编程方式）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:30:14.920

由于您询问如何以编程方式进行操作，因此您也可以在子类`setCellClass:`上使用该方法`NSTextField`。在`load`or`initialize`类方法中调用它：

```
+(void)load
{
    [self setCellClass:[MyTextFieldCell class]];
} 
```

它不会对您在 Interface Builder 中定义的文本字段产生任何影响，因为在那里设置的文本字段单元格优先。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:08:34.187

你试过 setCell: NSControl 类的方法吗？

```
- (void)setCell:(NSCell *)aCell 
```

# networking - 不同机器的包路由到不同网关的解决方案

> ID：11293072
> 
> 赞同：0
> 
> 时间：2012-07-02T11:49:52.640
> 
> 标签：networking, proxy, network-programming

我有以下情况：

我有 N 个网关 N1,...,N5 和 M 台机器 M1,...,M5 ，其中 N > M。

我希望所有机器都通过不同的网关连接到互联网。例如： M1 应通过 N1 连接 M2 应通过 N3 连接 M3 应通过 N5 连接 M4 应通过 N6 连接 M5 应通过 N7 连接

其余网关应该可用。

在机器和网关之间应该有一个服务器，它将每台机器的流量“转发”到正确的网关。此外，该服务器应该能够将新网关（从未使用的网关）分配给请求它的机器。

您对如何实施这个想法有任何想法吗？我正在考虑使用防火墙规则，但也许已经有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T01:38:20.973

> 我希望所有机器都通过不同的网关连接到互联网。例如： M1 应通过 N1 连接 M2 应通过 N3 连接 M3 应通过 N5 连接 M4 应通过 N6 连接 M5 应通过 N7 连接

为每个网关分配不同的 Vlan 和子网，并在 Mx 上为适当的网关配置默认路由是否有问题？

# email - Windows azure 云虚拟机上的 sql server 2012 邮件设置

> ID：11293073
> 
> 赞同：0
> 
> 时间：2012-07-02T11:50:02.487
> 
> 标签：email, azure, cloud, sql-server-2012, virtual-machine

我正在 Windows azure 云虚拟机中的 sql server 2012 上设置电子邮件选项。电子邮件不起作用，我收到以下错误：

> Error,15,由于邮件服务器故障，无法将邮件发送给收件人。（使用帐户 2 (2012-07-02T11:13:17) 发送邮件。
> 异常消息：无法将邮件发送到邮件服务器。（远程证书根据验证程序无效。）。）,3152,5,,7 /2/2012 11:13:17 AM,sa 07/02/2012 11:12:05
> ,,错误,14,由于邮件服务器故障，无法将邮件发送给收件人。（使用帐户 2 (2012-07-02T11:12:05) 发送邮件。
> 异常消息：无法将邮件发送到邮件服务器。（根据验证程序，远程证书无效。）

我的 vm 上应该有一个端点 25 吗？还有什么可能导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:45:42.147

Looks like there is an issue with the outbound stmp server you are trying to use. Is this also hosted in Windows Azure or an external provider somewhere? In both cases, make sure they allow inbound, authenticated connections and on what port. There shouldn't be any blocks on outbound connections on your Windows Azure virtual machine, so odds are the problem is where the email server is hosted.

# r - 如何在R中使用deldir进行Delaunay三角剖分后提取点之间的距离？

> ID：11293077
> 
> 赞同：1
> 
> 时间：2012-07-02T11:50:18.847
> 
> 标签：r, distance, spatial, delaunay, deldir

我想使用 Delaunay Triangulations 计算城市之间的距离。我有二十个城市的经度和纬度，我想计算它们之间的距离，但是我在弄清楚如何从三角测量中提取距离信息时遇到了一些麻烦。到目前为止，我已经使用了 deldir()（来自 deldir 库）。请参阅下面的代码。

```
x   <- c(2.3,3.0,7.0,1.0,3.0,8.0)
y   <- c(2.3,3.0,2.0,5.0,8.0,9.0)
try <- deldir(x,y,list(ndx=2,ndy=2),c(0,10,0,10))

str(try)
List of 8
$ delsgs  :'data.frame':    23 obs. of  6 variables:
..$ x1  : num [1:23] 3 7 7 1 1 3 3 3 8 8 ...
..$ y1  : num [1:23] 3 2 2 5 5 8 8 8 9 9 ...
..$ x2  : num [1:23] 2.3 2.3 3 2.3 3 3 7 1 7 3 ...
..$ y2  : num [1:23] 2.3 2.3 3 2.3 3 3 2 5 2 8 ...
..$ ind1: num [1:23] 2 3 3 4 4 5 5 5 6 6 ...
..$ ind2: num [1:23] 1 1 2 1 2 2 3 4 3 5 ...
$ dirsgs  :'data.frame':    15 obs. of  8 variables:
..$ x1  : num [1:15] 1.65 4.56 5.75 0 1.65 ...
..$ y1  : num [1:15] 3.65 0.74 5.5 2.86 3.65 ...
..$ x2  : num [1:15] 4.56 4.51 4.56 1.65 3.5 ...
..$ y2  : num [1:15] 0.74 0 0.74 3.65 5.5 ...
..$ ind1: num [1:15] 2 3 3 4 4 5 5 5 6 6 ...
..$ ind2: num [1:15] 1 1 2 1 2 2 3 4 3 5 ...
..$ bp1 : logi [1:15] FALSE FALSE FALSE TRUE FALSE FALSE ...
..$ bp2 : logi [1:15] FALSE TRUE FALSE FALSE FALSE FALSE ...
$ summary :'data.frame':    10 obs. of  9 variables:
..$ x       : num [1:10] 2.3 3 7 1 3 8 0 10 0 10
..$ y       : num [1:10] 2.3 3 2 5 8 9 0 0 10 10
..$ n.tri   : num [1:10] 4 4 6 5 5 5 4 3 4 2
..$ del.area: num [1:10] 4.5 6.05 18.67 7.5 15 ...
..$ del.wts : num [1:10] 0.045 0.0605 0.1867 0.075 0.15 ...
..$ n.tside : num [1:10] 4 4 5 4 5 3 1 1 2 1
..$ nbpt    : num [1:10] 4 0 4 2 2 4 2 2 2 2
..$ dir.area: num [1:10] 9.09 10.74 23.32 9.39 18.06 ...
..$ dir.wts : num [1:10] 0.0909 0.1074 0.2332 0.0939 0.1806 ...
$ n.data  : int 6
$ n.dum   : int 4
$ del.area: num 100
$ dir.area: num 100
$ rw      : num [1:4] 0 10 0 10
- attr(*, "class")= chr "deldir" 
```

我很确定在“尝试”的某个地方存储了由 deldir 计算的点之间的距离，但我只是不知道在哪里。我尝试通过计算距离并在 $ 元素中查找值来解决这个问题，但我找不到它们。对我来说，使用这些信息的最佳方法是，如果我可以将绘图上每条线的长度绘制到每条单独的线上，那么我可以手动计算所有城市之间的距离。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T07:18:14.083

**解决方案：**

`all.distances`计算所有可能的距离并将它们存储到称为（距离以米为单位）的矩阵中。（*dat*是一个源 data.frame 包含纬度和经度）

```
library(BoSSA)
all.distances<-distGPS(dat$lat, dat$lon) 
```

现在你的距离比你需要的多得多，所以你必须生成代码，只提取你需要的值。创建列表，您可以在其中查看哪些树是邻居（通过 Delaunay 三角测量）

```
library(tripack)
tree.nb<-neighbours(tri.mesh(dat$lat,dat$lon)) 
```

创建两个向量，所以你有邻居的组合

```
my.FC<-rep(c(1:length(tree.nb)), sapply(tree.nb, length))
my.SC<-unlist(tree.nb) 
```

它看起来像这样：

```
my.FC
[1]
1  1  1  2  2  2  2  3  4  4

my.SC
[1]
6  7  8  4  7  5  8  5  2  9 
```

读取为列，因此位置“1”是位置“6”、“7”、“8”的邻居。位置“2”是位置“4”、“7”、“5”、“8”的邻居，依此类推......

现在是聪明的部分......您需要使用邻居的组合作为距离矩阵中所需值的坐标。并将这些值提取到向量中

为距离值创建空向量：

```
nb.dist<-numeric(sum(sapply(tree.nb, length))) 
```

提取值的代码：

```
for (i in 1:sum(sapply(tree.nb, length)))
    nb.dist[i] <- all.distances[my.FC[i],my.SC[i]] 
```

但是，在创建的向量中，“nb.dist”将是所有值两次（因为“1”是“8”的邻居，“8”也是“1”的邻居。

所以只需使用 unique()

```
unique(nb.dist) 
```

享受 ：）

# php - 在 cakePHP 中发送带有 SQL 结果的电子邮件

> ID：11293080
> 
> 赞同：0
> 
> 时间：2012-07-02T11:50:27.490
> 
> 标签：php, cakephp

我需要通过电子邮件向所有用户发送 cakePHP 2 中的每日产品列表。

我有以下代码来获取所有用户的电子邮件。

```
$users = $this->User->find('all', array('fields' => array('email')));
foreach ($users as $user) {
    $this->Email->reset();
    $this->Email->from     = '<no-reply@test.com.au>';
    $this->Email->to       =  $user['email'];
    $this->Email->subject  =  "Daily Products" ;
    $this->Email->sendAs   = 'html';
    $this->Email->send();
} 
```

现在我知道我可以为此使用一个 html 模板并解析它的值，但我确实需要在实际视图本身内部有一个 foreach 循环并发送产品表。

最好的做法是什么？cakePHP 代码在控制器或视图中获取产品？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:18:54.073

最好的做法是使用 shell 发送电子邮件。为避免内存不足，您应该分块读取用户及其产品，而不是同时读取所有内容。

在 foreach 循环中，您需要获取每个用户的数据并将其设置为任何其他变量，然后它将在 html 模板中可用，然后您可以在那里呈现所有产品。

以下是处理数据的 shell 中的一些（缩短的）代码：

```
public function main() {
    $this->loop();
}

public function loop() {
    try {
        while (true) {
            if (!$this->poll()) {
                $this->out(__('Nothing more to process, sleeping...'));
                sleep($this->sleep);
            }
        }
    } catch (Exception $e) {
        $this->out($e->getMessage());
        $this->log($e->getMessage(), 'processing');
    }
}

public function poll() {
    $this->out('Polling...');
    $result = $this->Model->getFirstUnprocessed();

    if ($result === false) {
        return false;
    }

    // do something with the result here

    return true;
} 
```

这应该足以给你一个想法。要分块读取用户，您需要增加 find() 选项中的偏移量。就我而言，我只是检查是否有未处理的记录，如果是，我会处理并等待片刻进行下一次尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:11:02.797

电子邮件的“视图”实际上是一个元素。它位于视图/元素/电子邮件下。那里有 2 个文件夹`html`和`text`，都用于保存各自的模板。

你可以在那里做你的 foreach ，然后确保在你的控制器中设置布局：

```
$this->Email->sendAs = 'html'; // Can also be 'text' or 'both' (for multipart).
$this->Email->layout = 'foo'; // Would include Views/Elements/email/html/foo.ctp 
```

尽管从 CakePHP 2.0 开始不推荐使用 Email 组件，但您应该改用 CakeEmail 组件。有关如何使用它的更多详细信息，请参阅[本书。](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-templated-emails)

# javascript - 计算列表中的重复日期和计数中重复日期的出现次数

> ID：11293084
> 
> 赞同：0
> 
> 时间：2012-07-02T11:50:37.807
> 
> 标签：javascript

我有日期列表，我需要在其中检查重复日期和重复日期的出现次数，我需要在 javascript 中实现...尝试帮助我提前感谢。 `EX: { 12/11/2011, 12/11/2011, 11/4/2012, 12/6/2012, 12/6/2012, 12/6/2012} Desire output: {12/11/2011, 11/4/2012, 12/6/2012} count: 12/11/2011 =2 count: 12/6/2012 =3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:13:29.267

# 使用[Underscore.js](http://underscorejs.org/#reduce)

> _.reduce(list, iterator, memo, [context]) 别名：inject, foldl 也称为 inject 和 foldl，reduce 将值列表归结为单个值。备忘录是归约的初始状态，它的每一步都应该由迭代器返回。

## [例子：](http://jsfiddle.net/pmy7C/2/)

```
var dates = [ '1/1/2006', '1/1/2006', '1/1/2007', '1/1/2007', '1/1/2007', '1/1/2006', '1/1/2012', '1/1/2006', '1/1/2009', '1/1/2012'];

var x = _.reduce(dates, 
            function(counts, date) {
                counts[date] = (counts[date] || 0) + 1;
                return counts;
            }, {});

alert(JSON.stringify(x)); 
```

## 生产

```
{"1/1/2006":4,"1/1/2007":3,"1/1/2012":2,"1/1/2009":1} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:16:56.997

如果您的日期是字符串（存储为字符串），您可以尝试以下操作：

```
var dates = ["12/11/2011", "12/11/2011", "11/4/2012", "12/6/2012", "12/6/2012", "12/6/2012"];
var dates_set = {}; // key will be date, and values will be count

for (var i = dates.length - 1; i >= 0; i--) { 
    var d = dates[i];
    if (dates_set.hasOwnProperty(d)) {  // already is in our set, just increase counter
        dates_set[d] = dates_set[d] + 1;;
    } else { // there is no such date, lets add it
        dates_set[d] = 1
    }

};
document.write(dates_set["12/11/2011"]);
document.write("<br />");
document.write(dates_set["12/6/2012"]); 
```

# c++ - 使用 openssl ECDSA_verify() 验证消息

> ID：11293085
> 
> 赞同：0
> 
> 时间：2012-07-02T11:50:39.070
> 
> 标签：c++, openssl

我想在 CPP 中使用 openSSL 来验证带有 ECDSA 的消息。我有来自服务器的数据，其中包含消息和签名对。与服务器一起提供了曲线参数：-

```
(p,a,b, Base Point (Gx, Gy), Order of Base Point (r)) 
```

和公钥。

使用这些值我想验证消息`ECDSA_verify().`

由于我是 openssl 的新手，我不知道如何使用这些值来验证签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:30:37.783

当做同样的事情时 - 我找到了文件

```
test/ecdsatest.c
crypto/ecdsa/ecdsatest.c 
```

在基础 openssl 发行版中是一个简单的起点。（OpenSSL 将基点称为子组生成器）。ec_key_st 和 ec_group_st 在

```
crypto/ec/ec_lcl.h 
```

是映射事物所需的最后一点（对于点和组，a 和 b 等）。

# php - YII - 当我从 SOA 客户端插件请求时，Web 服务返回 WSDL

> ID：11293086
> 
> 赞同：0
> 
> 时间：2012-07-02T11:50:43.000
> 
> 标签：php, web-services, soap, yii, soap-client

当我从 SOA 客户端 firefox 插件将 SOAP 主体发布到我的 Yii 网络服务时，它返回 WSDL 并且不调用相应的方法。

如何调用各自的方法？

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T07:39:49.357

查看生成的 WSDL 文件：服务公开的方法的基本 URL位于文件末尾的“**位置”属性中（例如****wsdl:service > wsdl:port > soap:address**）。

样本 ：

```
[...]
<wsdl:service name="ServiceProviderService">
<wsdl:port name="ServiceProviderPort" binding="tns:ServiceProviderBinding">
<soap:address location="http://localhost/website/service/soap/ws/1"/>
</wsdl:port>
</wsdl:service>
[...] 
```

提供的 URL 将“ **/ws/1** ”（或“ **?ws=1** ”，取决于您的应用程序设置）附加到公开 Web 服务的控制器路由。

请参阅[CWebServiceAction](http://www.yiiframework.com/doc/api/1.1/CWebServiceAction)类参考：

> CWebServiceAction 有两个目的。一方面，它显示指定 Web 服务 API 的 WSDL 内容。另一方面，它调用所请求的 Web 服务 API。一个名为**ws**的 GET 参数用于区分这两个方面：GET 参数的存在表示执行后一个动作。

使用的 GET 参数是[CWebServiceAction::serviceVar](http://www.yiiframework.com/doc/api/1.1/CWebServiceAction#serviceVar-detail)属性的值。

因此，您必须将所需的 GET 参数（例如“ws=1”）附加到被调用的 URL 才能使用您的 Web 方法……或者使用“真实”的 SOAP 客户端来获取正确的服务 URL 来调用 Web方法。

# magento - Magento：不要向贝宝发送税款/不要在贝宝电子邮件中显示税款

> ID：11293089
> 
> 赞同：0
> 
> 时间：2012-07-02T11:51:03.873
> 
> 标签：magento, paypal, checkout

我使用的是 magento 1.7，其中一种付款方式是 Paypal (UK) express checkout。

问题是我不希望贝宝发送包含任何税收细分的电子邮件，有没有更直接的方法来解决这个问题（在 Magento 或 Paypal 端），而不是破解核心模块以通过 sub+tax 作为 sub和0作为税？

我可以看到很多字段都映射在 Model/Api/Nvp.php 中，但无法立即看到我在哪里修改这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:05:09.107

据我调查，没有简单的可配置方法来防止向 Paypal 提交税款。

但是，如果您不介意只提交总金额（无订单项，无税），那么确实有一个核心技巧。

转到`System/Config/Paypal`并设置`Transfer Cart Line Items`为`No`。在您的代码中转到`_validate()`class中的函数`Mage_Paypal_Model_Cart`。在此函数的末尾添加以下行：

```
$this->_areItemsValid = false;
$this->_areTotalsValid = false; 
```

当然，在你的`app/code/local`文件夹中重写这个类会更好。

# c# - 使用 MEFedMVVM 获取 ViewModel 数据

> ID：11293094
> 
> 赞同：0
> 
> 时间：2012-07-02T11:51:25.900
> 
> 标签：c#, wpf, cinch, mefedmvvm

我目前正在使用 MEFedMVVM 框架来访问 ViewModel，并想知道如何从当前正在使用的另一个 ViewModel 获取数据。这与 Cinch 的使用相结合。

目前我的标签控件定义如下：

```
<Window.Resources>

    <DataTemplate DataType="{x:Type CinchV2:WorkspaceData}">
        <AdornerDecorator>
            <Border HorizontalAlignment="Stretch" 
                VerticalAlignment="Stretch" 
                CinchV2:NavProps.ViewCreator="{Binding}"/>
        </AdornerDecorator>
    </DataTemplate>

</Window.Resources> 
```

加载视图后，我的主窗口 ViewModel 将按以下方式设置：

```
private void ViewAwareStatusService_ViewLoaded()
    {

        if (Designer.IsInDesignMode)
            return;

        //String imagePath = ConfigurationManager.AppSettings["YourImagePath"].ToString();

        WorkspaceData loginWorkSpace = new WorkspaceData(null, "LoginUserControl", null, "Login", true);
        WorkspaceData aboutWorkspace = new WorkspaceData(null, "About", null, "About", true);
        WorkspaceData viewAlbumsWorkspace = new WorkspaceData(null, "ViewAlbums", null, "View Albums", true);
        WorkspaceData readReviewSelectWorkspace = new WorkspaceData(null, "ReadReviewsSelect", null, "Select Review", true);
        WorkspaceData adminWorkspace = new WorkspaceData(null, "Admin", null, "Admin", true);

        Views.Add(aboutWorkspace);
        Views.Add(loginWorkSpace);
        Views.Add(readReviewSelectWorkspace);
        Views.Add(viewAlbumsWorkspace);

        SetActiveWorkspace(aboutWorkspace);

        UserName = new DataWrapper<string>(this, UserNameChangeArgs);
        UserName.IsEditable = true;
        //UserName.DataValue = ConfigurationManager.AppSettings["UserName"];

        UserRole = new DataWrapper<string>(this, UserNameChangeArgs);
        UserRole.IsEditable = true;
        //UserRole.DataValue = ConfigurationManager.AppSettings["UserType"];
    } 
```

MainWindow ViewModel 继承 ViewModelBase 类，其配置如下（Cinch 类）：

```
namespace Cinch
{
public abstract class ViewModelBase : INotifyPropertyChanged, ICinchDisposable,  IParentablePropertyExposer
{
    public ViewModelBase();

    public SimpleCommand<object, object> CloseActivePopUpCommand { get; }
    public SimpleCommand<object, object> CloseWorkSpaceCommand { get; }
    public string DisplayName { get; set; }
    public bool IsCloseable { get; set; }
    protected virtual bool ThrowOnInvalidPropertyName { get; }
    public ObservableCollection<WorkspaceData> Views { get; set; }

    public event EventHandler<EventArgs> ActivateRequest;
    public event EventHandler<CloseRequestEventArgs> CloseRequest;
    public event EventHandler<EventArgs> CloseWorkSpace;
    public event Action<string> FocusRequested;
    public event PropertyChangedEventHandler PropertyChanged;

    public void Dispose();
    public Delegate[] GetINPCSubscribers();
    protected void NotifyPropertyChanged(PropertyChangedEventArgs args);
    protected void NotifyPropertyChanged(string propertyName);
    protected virtual void OnDispose();
    public virtual void RaiseActivateRequest();
    public virtual void RaiseCloseRequest(bool? dialogResult);
    public void RaiseFocusEvent(string focusProperty);
    public void SetActiveWorkspace(WorkspaceData viewnav);
    [DebuggerStepThrough]
    [Conditional("DEBUG")]
    public void VerifyPropertyName(string propertyName);
} 
```

现在我想要做的是，从 loginWorkspace 中的一个按钮单击，它是一个带有 ViewModel 的 UserControl，将 Admin 选项卡从 LoginViewModel 添加到 MainWindow 的 Views ObservableCollection。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:30:29.753

阅读有关使用调解器的信息。您可以从您的 loginviewmodel 发送消息。然后让 mainwindowview 模型可以监听相应的消息。

# javascript - 在计算表格中添加百分比

> ID：11293105
> 
> 赞同：-1
> 
> 时间：2012-07-02T11:51:59.740
> 
> 标签：javascript

希望这里有人可以提供帮助。我需要一个自动计算总数的表单 javascript。我一直在搞乱我下载的表单脚本（向 Paul McFedries 致敬）总计工作正常，但我还需要它来计算税（10%）并将其添加到小计中。我有基本的表格在这里工作： [http ://www.onsiite.com/html/onsiite_calc.html](http://www.onsiite.com/html/onsiite_calc.html)

我是一个完整的 javascript 初学者，不知道从哪里开始。任何人都可以帮助或指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:00:03.803

正如你所说，你从“Paul McFedries”复制了你的代码，所以我访问你的 url & jst 在你的代码中嵌入两行，所以只需用这段代码替换你的页面代码我发布你的页面的整个代码基本上是你的代码，但是“swapnilsarwe”告诉你关于放置两行 javascript 但 ypu 对 JS 来说是新的所以我只显示整个代码希望它会帮助 jst 查看我在`CalculateTotal(frm)`函数的最后一个位置以及我更改表单正文的最后一行

> 总金额：总金额[10% 销售税]

希望它也能帮助你

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title></title>

<script language="JavaScript" type="text/javascript">
<!--

/* This script is Copyright (c) Paul McFedries and 
Logophilia Limited (http://www.mcfedries.com/).
Permission is granted to use this script as long as 
this Copyright notice remains in place.*/

function CalculateTotal(frm) {
    var order_total = 0

    // Run through all the form fields
    for (var i=0; i < frm.elements.length; ++i) {

        // Get the current field
        form_field = frm.elements[i]

        // Get the field's name
        form_name = form_field.name

        // Is it a "product" field?
        if (form_name.substring(0,4) == "PROD") {

            // If so, extract the price from the name
            item_price = parseFloat(form_name.substring(form_name.lastIndexOf("_") + 1))

            // Get the quantity
            item_quantity = parseInt(form_field.value)

            // Update the order total
            if (item_quantity >= 0) {
                order_total += item_quantity * item_price
            }
        }
    }

    // Display the total rounded to two decimal places
    frm.TOTAL.value = round_decimals(order_total, 2)
    var total = round_decimals(order_total, 2);

    document.getElementById('tax_amount').value =round_decimals(parseFloat(((10/100)*total)),2);
    document.getElementById('total_amount').value =round_decimals((parseFloat(total) + parseFloat(((10/100)*total))),2);

}

function round_decimals(original_number, decimals) {
    var result1 = original_number * Math.pow(10, decimals)
    var result2 = Math.round(result1)
    var result3 = result2 / Math.pow(10, decimals)
    return pad_with_zeros(result3, decimals)
}

function pad_with_zeros(rounded_value, decimal_places) {

    // Convert the number to a string
    var value_string = rounded_value.toString()

    // Locate the decimal point
    var decimal_location = value_string.indexOf(".")

    // Is there a decimal point?
    if (decimal_location == -1) {

        // If no, then all decimal places will be padded with 0s
        decimal_part_length = 0

        // If decimal_places is greater than zero, tack on a decimal point
        value_string += decimal_places > 0 ? "." : ""
    }
    else {

        // If yes, then only the extra decimal places will be padded with 0s
        decimal_part_length = value_string.length - decimal_location - 1
    }

    // Calculate the number of decimal places that need to be padded with 0s
    var pad_total = decimal_places - decimal_part_length

    if (pad_total > 0) {

        // Pad the string with 0s
        for (var counter = 1; counter <= pad_total; counter++) 
            value_string += "0"
        }
    return value_string
}

//-->
</script>

<style type="text/css">
.calculator {
    width: 730px;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 10px;
    color: #000;
}
.calc_top {
    background-image: url(www/images/calc_top.gif);
    background-repeat: no-repeat;
    height: 35px;
    width: 730px;
    padding: 0px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #000;
}
.calc_footer {
    background-image: url(www/images/calc_bot.gif);
    background-repeat: no-repeat;
    height: 35px;
    width: 730px;
}
.calc_head {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #FFF;
    margin-left: 12px;
    padding-top: 12px;
}
.calc_footer_text {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 10px;
    font-weight: normal;
    color: #FFF;
    margin-left: 12px;
    padding-top: 3px;
}
.calc_body {
    width: 730px;
    height: 20px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    margin-top: 5px;
}
.calc_body2 {
    width: 730px;
    height: 26px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    background-color: #ddf1f1;
    margin-top: 5px;
}
.calc_body_header {
    width: 730px;
    height: 20px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #3fa8a9;
    background-color: #b2dede;
    padding-top: 4px;
}.calc_totals {
    width: 730px;
    padding-bottom: 10px;
    padding-top: 10px;
}
.calc_product {
    width: 400px;
    float: left;
    margin-left: 10px;
}
.calc_units {
    float: right;
    width: 100px;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 12px;
}
.calc_cost {
    float: right;
    width: 100px;
}
.calc_cost_per_unit {
    float: right;
    width: 100px;
    vertical-align: middle;
}

.clearfloat { 
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;

}

.calc_total_label {
    text-align: right;
    width: 624px;
    float: left;
}
.calc_rule {
    width: 730px;
    border-top-width: 1px;
    border-top-style: solid;
    border-top-color: #FF9933;
    margin-top: 10px;
    margin-bottom: 10px;
}
input    {
    width:30px;
    display:block;
    border: 1px solid #999;
    height: 12px;
    -webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
}
input.total    {
    width:60px;
    display:block;
    border: 1px solid #999;
    height: 12px;
    -webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
}
.calc_totals_panel_green {
    background-color: #b2dede;
    height: 64px;
}
.calc_body_background {
    background-color: #ddf1f1;
    width: 730px;
}
</style>
</head>

<body>
<div class="calculator">
  <div class="calc_top">
    <div class="calc_head">recruitment project - pricing calculator</div>

  </div>
  <div class="calc_body_header">
    <div class="calc_product"><strong><em>Process</em></strong></div>
    <div class="calc_cost_per_unit"><em><strong>Cost per unit</strong></em></div>
    <div class="calc_units"><strong><em>Units</em></strong></div>
  </div>
  <div class="calc_body_background">
  <br class="clearfloat" />
  <div class="calc_body">
    <div class="calc_product"><strong>Service Charges</strong></div>
    <div class="calc_units"></div>
    <div class="calc_cost_per_unit"></div>
  </div>
  <span class="clearfloat" /></span>

  <form>  
    <div class="calc_body">
      <div class="calc_product">Advertising - drafting and posting</div>
      <div class="calc_units">$100</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_ad_100.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>
    <div class="calc_body">
      <div class="calc_product">Resume review: Salary Package &lt; $60K</div>
      <div class="calc_units">$10</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_SPMG_10.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Resume review: Salary Package $60K - $100K</div>
      <div class="calc_units">$15</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_SPCR_15.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Resume review: Salary Package &gt; $100K Package</div>
      <div class="calc_units">$20</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_SPCR_20.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Phone Screening: Salary Package &lt; $60K</div>
      <div class="calc_units">$35</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_SWMG_35.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Phone Screening: Salary Package $60K - $100K</div>
      <div class="calc_units">$45</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_RY_45.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Phone Screening: &gt; $100K Package</div>
      <div class="calc_units">$55</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_KT_55.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Video Interviews</div>
      <div class="calc_units">$50</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_VID_50.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Coordinating Interviews</div>
      <div class="calc_units">$30</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_COORD_INT_30.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Coordinating Psychometric Testing</div>
      <div class="calc_units">$40</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_COORD_PSYCH_40.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Coordinating Pre-employment Medical</div>
      <div class="calc_units">$40</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_COORD_PREEMP_MED_40.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Coordinating Background Check</div>
      <div class="calc_units">$40</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_COORD_BACK_CHECK_40.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Reference Checks</div>
      <div class="calc_units">$50</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_REFS_CHECK_50.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Verbal Feedback (Unsuccessful)</div>
      <div class="calc_units">$10</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_VERBAL_FEEDBACK_10.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Administration</div>
      <div class="calc_units">$350</div>
      <div class="calc_cost_per_unit"><span class="calc_units"><INPUT TYPE=TEXT NAME="PROD_ADMIN_350.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product"><strong>External Oncharges</strong></div>
      <div class="calc_units"></div>
      <div class="calc_cost_per_unit"></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Advertising</div>
      <div class="calc_units">$100</div>
      <div class="calc_cost_per_unit"><span class="calc_adv"><INPUT TYPE=TEXT NAME="PROD_ADVERTSING_100.00" SIZE=3 MAXLENGTH=3 onChange="CalculateTotal(this.form)"></span></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Psychometric Testing</div>
      <div class="calc_units">0</div>
      <div class="calc_cost_per_unit"></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_body">
      <div class="calc_product">Background Checks</div>
      <div class="calc_units">0</div>
      <div class="calc_cost_per_unit"></div>
      </div>
    <span class="clearfloat" /></span>

    <div class="calc_totals_panel_green">
      <div class="calc_totals">
        <div class="calc_total_label">TOTAL (excluding GST) $</div>
        <div class="calc_cost_per_unit"><INPUT NAME=TOTAL TYPE=TEXT class="total" onFocus="this.form.elements[0].focus()" SIZE=10 /></div>
        </div>
         <span class="clearfloat" /></span>

      <div class="calc_totals">
        <div class="calc_total_label">10 % Tax</div>
        <div class="calc_cost_per_unit"><INPUT NAME="tax_amount" TYPE=TEXT class="total" id="tax_amount" SIZE=10 ></div>
        </div>
      <span class="clearfloat" /></span>

      <div class="calc_totals">
        <div class="calc_total_label">TOTAL $</div>
        <div class="calc_cost_per_unit"><INPUT NAME="total_amnt" TYPE=TEXT class="total" id="total_amount" SIZE=10 ></div>
        </div>

    <span class="clearfloat" /></span></div></form>
  </div>
<div class="calc_footer">
  <div class="calc_footer_text">Change the values in the Units column to calculate the charge rate based on expected volumes.</div></div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:54:47.627

当你填充最终值时使用这样的东西......它没有什么特别的......只需使用简单的javascript来进行值的最终更新

```
var total = round_decimals(order_total, 2);
frm.TOTAL.value = total + ((10/100)*total); 
```

# vba - 如何将outlook 2007收件箱中定义的子文件夹中收到的电子邮件中附加的excel文件保存到windows上的文件夹中？

> ID：11293108
> 
> 赞同：2
> 
> 时间：2012-07-02T11:52:05.590
> 
> 标签：vba, outlook

我需要将 Outlook 消息中收到的 excel 附件保存在收件箱中的特定子文件夹（每日最终版）中，并且知道该子文件夹中的所有电子邮件都将包含该 excel 附件。我在下面有一个带有 excel VBA 的示例，但它不起作用，所以请给我建议

```
 Sub SaveAttachmentsToFolder()
 ' This Outlook macro checks a named subfolder in the Outlook Inbox
 ' (here the "daily final" folder) for messages with attached
 ' files of a specific type (here file with an "xls" extension)
 ' and saves them to disk. Saved files are timestamped. The user
 ' can choose to view the saved files in Windows Explorer.
 ' NOTE: make sure the specified subfolder and save folder exist
 ' before running the macro.
 On Error GoTo SaveAttachmentsToFolder_err
 ' Declare variables
 Dim ns As Namespace
 Dim Inbox As MAPIFolder
 Dim SubFolder As MAPIFolder
 Dim Item As Object
 Dim Atmt As Attachment
 Dim FileName As String
 Dim i As Integer
 Dim varResponse As VbMsgBoxResult
 Set ns = GetNamespace("MAPI")
 Set Inbox = ns.GetDefaultFolder(olFolderInbox)
 Set SubFolder = Inbox.Folders("daily final") ' Enter correct subfolder
name.
 i = 0
 ' Check subfolder for messages and exit of none found
 If SubFolder.Items.Count = 0 Then
 MsgBox "There are no messages in the Sales Reports folder.",
vbInformation , _
 "Nothing Found"
 Exit Sub
 End If
 ' Check each message for attachments
 For Each Item In SubFolder.Items
 For Each Atmt In Item.Attachments
 ' Check filename of each attachment and save if it has "xls" extension
 If Right(Atmt.FileName, 3) = "xls" Then
 ' This path must exist! Change folder name as necessary.
 FileName = "C:\Email Attachments\" & _
 Format(Item.CreationTime, "yyyymmdd_hhnnss_") &
Atmt.FileName
 Atmt.SaveAsFile FileName
 i = i + 1
 End If
 Next Atmt
 Next Item
 ' Show summary message
 If i > 0 Then
 varResponse = MsgBox("I found " & i & " attached files." _
 & vbCrLf & "I have saved them into the C:\Email Attachments folder." _
 & vbCrLf & vbCrLf & "Would you like to view the files now?" _
 , vbQuestion + vbYesNo, "Finished!")
 ' Open Windows Explorer to display saved files if user chooses
 If varResponse = vbYes Then
 Shell "Explorer.exe /e,C:\Email Attachments", vbNormalFocus
 End If
 Else
 MsgBox "I didn't find any attached files in your mail.",
vbInformation , "Finished!"
 End If
 ' Clear memory
SaveAttachmentsToFolder_exit:
 Set Atmt = Nothing
 Set Item = Nothing
 Set ns = Nothing
 Exit Sub
 ' Handle Errors
SaveAttachmentsToFolder_err:
 MsgBox "An unexpected error has occurred." _
 & vbCrLf & "Please note and report the following information." _
 & vbCrLf & "Macro Name: GetAttachments" _
 & vbCrLf & "Error Number: " & Err.Number _
 & vbCrLf & "Error Description: " & Err.Description _
 , vbCritical, "Error!"
 Resume SaveAttachmentsToFolder_exit
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:23:56.307

看来您是从网站上剪切和粘贴的，但您不熟悉 VBA。当您将代码粘贴到 VBA 代码窗口时，它将突出显示有问题的行。然后你应用你的知识来解决这些问题。例如，上面的这一行应该是一个语句：

```
MsgBox "There are no messages in the Sales Reports folder.",
vbInformation , _
 "Nothing Found" 
```

像这样：

```
MsgBox "Message", buttons, "Title" 
```

您可以像拥有它一样将语句放在三行上，但必须使用行继续符（_），您只有一个，您需要两个。

```
MsgBox "There are no messages in the Sales Reports folder.", _
vbInformation , _
 "Nothing Found" 
```

这里

```
FileName = "C:\Email Attachments\" & _
 Format(Item.CreationTime, "yyyymmdd_hhnnss_") & 
```

你有一个额外的 &。语句不能以 & 结尾

F1 键在这些情况下非常有用。

# c# - 如何在 C# 中重新加载组合框的项目？

> ID：11293111
> 
> 赞同：-2
> 
> 时间：2012-07-02T11:52:08.913
> 
> 标签：c#, select, combobox, reload

我在组合框中有 10 个项目，当我删除其中一个项目时，组合框不会自动显示下一个项目，它会显示空白。我想显示范围内的下一个项目。

我正常删除它们

`cmbsomename.Items.Remove(cmbsomename.SelectedItem);`

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T11:53:33.527

因为您删除了选中的项目，所以需要将另一个项目设置为选中：

```
comboBox.SelectedIndex = 0; 
```

**编辑：**

上面的代码将所选项目设置为列表中的第一项。对于下一个项目，您需要先找到要删除的项目的索引：

```
int index = cmbsomename.SelectedIndex;
cmbsomename.Items.Remove(cmbsomename.SelectedItem);

if (index < cmbsomename.Items.Count) // Make sure there IS a next item
   cmbsomename.SelectedIndex = index; // Next item will have same index value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:54:15.900

删除 Item 后设置 selectedindex

```
int index = comboBox.SelectedIndex;
comboBox.Items.Remove(comboBox.SelectedItem);

if (index < comboBox.Items.Count) 
   comboBox.SelectedIndex = index; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:57:36.727

```
var selectedIndex = cmbsomename.SelectedIndex;
cmbsomename.Items.Remove(cmbsomename.SelectedItem);
comboBox.SelectedIndex = selectedIndex < cmbsomename.Items.Count() ? ++selectedIndex : 0; 
```

# cakephp - 更新 counterCache 字段，但不要更新 CakePHP 中的 'modified' 字段

> ID：11293113
> 
> 赞同：1
> 
> 时间：2012-07-02T11:52:10.237
> 
> 标签：cakephp, cakephp-2.0

我有一个内容模型和一个评论模型。在插入评论时，我正在使用 cakephp（belongsTo 关系）的 counterCache 功能更新内容表中的 comment_count，但那时它也在更新我不想要的内容表中的修改日期。我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:27:41.590

为该计数和更新创建一个自定义方法，并在您的评论模型的 afterSave() 中调用它，当您将新计数保存到关联表时，请确保

```
$data['Item']['modified'] = false; 
```

修改设置为假。

# c# - 一种适用于不同地磅的应用程序？

> ID：11293114
> 
> 赞同：1
> 
> 时间：2012-07-02T11:52:15.417
> 
> 标签：c#, wpf, serial-port

我有一个 WPF 应用程序，它连接到地磅以获取权重。

```
spWeigh = new SerialPort("COM1", 9600, Parity.Even, 7, StopBits.One);
            spWeigh.RtsEnable = false;
            spWeigh.DtrEnable = false;
            spWeigh.Handshake = Handshake.None;
            spWeigh.ReadTimeout = 10000;
            spWeigh.DataReceived += spWeigh_DataReceived;

spWeigh.Write(((char)5).ToString());

void spWeigh_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
 strResponseWeigh = spWeigh.ReadLine();
            if (strResponseWeigh.Length == 0)
            {
                MessageBoxWrapper.Show("Error in communication with weighbridge", "Error");
                return;
            }
string wt = strResponseWeigh.Substring(15, 6);
} 
```

我需要在不同的地磅上使用相同的应用程序。然后我需要更改地磅的代码，如下所示：

```
 spWeigh = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
        spWeigh.RtsEnable = false;
        spWeigh.DtrEnable = false;
        spWeigh.Handshake = Handshake.None;
        spWeigh.ReadTimeout = 10000;
        spWeigh.DataReceived += spWeigh_DataReceived;

  void spWeigh_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            strResponseWeigh = spWeigh.ReadLine();
            if (strResponseWeigh=="")
            {
                MessageBoxWrapper.Show("Error communicating with the weighbridge", "Error");
                return;
            }

//Some more checking are to be done here depending on the response(different from the first weighbridge type)

 string wt = strResponseWeigh.Substring(2, 7);
} 
```

是否可以使地磅部分通用？我们所做的就是向地磅发送一个（或多个）字符，获取响应，检查响应是否有效并读取权重。

是否可以做一个配置文件，以便我们根据地磅更改此文件中的某些值而不更改实际代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:04:17.373

最优雅的管理方法是将 SerialPort 对象封装在一个类中，该类具有配置该对象的属性。

要将值存储在配置文件中，您可以在 config.app 文件中设置值并使用[ConfigurationManager](http://msdn.microsoft.com/library/system.configuration.configurationmanager%28v=vs.80%29.aspx)类访问值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:30:51.140

如您所述，您可以将所有动态值（例如 Timeout、Com-Port-No ... ）放入配置文件中。您可以为此文件或您自己的 XML 格式文件使用 app.config 文件。

另一种方法可能是策略模式实现，请参阅[链接](http://www.dofactory.com/Patterns/PatternStrategy.aspx)

您的方法和事件（Connect、Disconnect、DataReceived）将在描述算法的策略基类中定义，实现本身包含在派生策略中。

为了获得最大的灵活性，您还可以将配置文件与策略模式结合使用，特别是当您希望将来支持超过 2 个权重和不同的权重算法时。例如，称量 A 型和 B 型应使用策略 1 称量，称量 C 型和 D 型应使用策略 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:32:28.270

![静态类图](../Images/4516f793caadeb3e136cccfe6065a4d9.png)

我认为您需要类似于此 uml 中的内容。在 WeighMachine 类（抽象）中，您定义类似 WeighingReceived 事件的内容，并持有对另一个抽象 WeighMachineConfig 的引用。您的应用程序代码仅处理抽象的 WeighMachine（使用工厂从配置中选择和实例化正确的实例）。每台称重机都可以有不同的配置参数以及发送给它的不同命令，因此配置应该封装在 WeighMachineConfigX 类和 WeighMachineX 类中的协议/命令中。当具体的称重机实例接收数据时，它们应该调用在抽象 WeighMachine 类上定义的公共事件。

# javascript - 以角度画线到 y 值

> ID：11293118
> 
> 赞同：0
> 
> 时间：2012-07-02T11:52:28.163
> 
> 标签：javascript, math

我计算了一个方向（如果需要，您可以将其称为向量，但它实际上是一个斜率......）并且我想从给定 y 值的函数中获取 x 值。

基本上，我试图从 x, y 值到 x, y 值画一条线，我有方向。

假设斜率/方向为 1/4（上升超过运行），起点为 200，结束 y 值为 250，我将如何找到 x？

我知道这真的是基本的高中代数，但由于某种原因我无法概念化它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:01:58.003

如果端点是 A(x1,y1) 和 B(x2,y2)，则[斜率](http://en.wikipedia.org/wiki/Slope)定义为：

```
m = ( y2 - y1 ) / ( x2 - x1 ) 
```

由于您确实有斜率，因此您至少需要三个坐标才能计算剩余的坐标。

根据您的问题，我假设您要计算 y2。因此，您需要有 x1、y1 和 x2。

例子：

```
m = 1/4
A(1,1)
B(9,y2)
---
y2 = ?

m = ( y2 - y1 ) / ( x2 - x1 ) 
y2 - y1 = m * ( x2 - x1 )
y2 = m * ( x2 - x1 ) + y1
y2 = 1/4 * ( 9 - 1 ) + 1
y2 = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T11:55:20.423

使用[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

这里有[多种语言的实现](http://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm)（*包括[javascript](http://rosettacode.org/wiki/Bitmap/Bresenham%27s_line_algorithm#JavaScript)*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:04:54.360

Bresenham 线算法：

```
void DrawLineLCD(int x1,int y1,int x2,int y2,int nState)
{
    unsigned int nTmp;
    unsigned int nAlt=0;
    int x,y;        // where is the current pixel.
    int dx;     // dx is the delta for x
    int dy;     // dy is the delta for y
    int StepVal=0;  // variable for figuring out when to increment the other 
axis.
    if (x1>x2 && y1>y2)
    {
        nTmp=x2;
        x2=x1;
        x1=nTmp;

        nTmp=y2;
        y2=y1;
        y1=nTmp;

        dx=x2-x1;   // dx is the delta for x
        dy=y2-y1;   // dy is the delta for y
    }else
    {
        dx=x2-x1;   // dx is the delta for x
        dy=y2-y1;   // dy is the delta for y

        if (dy<0)
        {   
            dy=-dy;

            nTmp=y2;
            y2=y1;
            y1=nTmp;

            nAlt=1;
        }else
            if (dx<0)
            {   
                dx=-dx;

                nTmp=x2;
                x2=x1;
                x1=nTmp;

                nAlt=1;
            }
    }

    if (nAlt)
    {

        if(dx>=dy)       // The slope is less than 45 degres
        {
            y=y2;
            for(x=x1; x<=x2; x++)
            {
                // Call your function to draw a pixel here.
                SetPixelLCD(x,y,nState);
                StepVal+=dy;
                if(StepVal>=dx) // Increment y if enough x steps
                                // have been taken.
                {
                    y--;
                    StepVal-=dx;    // Reset StepVal, but  
                    // not to 0\.  This gives even slopes.
                }
            }
        }
        else    // The slope is greater than 45 degrees, just like 
                // above, but with y instead of x.
        {
            x=x2;
            for(y=y1; y<=y2; y++)
            {
                // Call your function to draw a pixel here.
                SetPixelLCD(x,y,nState);
                StepVal+=dx;
                if(StepVal>=dy)
                {
                    x--;
                    StepVal-=dy;
                }
            }
        }
        return;
    }

    if(dx>=dy)       // The slope is less than 45 degres
    {
        y=y1;
        for(x=x1; x<=x2; x++)
        {
            // Call your function to draw a pixel here.
            SetPixelLCD(x,y,nState); 
            StepVal+=dy;
            if(StepVal>=dx) // Increment y if enough x steps
                            // have been taken.
            {
                y++;
                StepVal-=dx;    // Reset StepVal, but  
                // not to 0\.  This gives even slopes.
            }
        }
    }
    else    // The slope is greater than 45 degrees, just like 
            // above, but with y instead of x.
    {
        x=x1;
        for(y=y1; y<=y2; y++)
        {
            // Call your function to draw a pixel here.
            SetPixelLCD(x,y,nState);
            StepVal+=dx;
            if(StepVal>=dy)
            {
                x++;
                StepVal-=dy;
            }
        }
    }
    return;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T12:45:44.577

给定一个点`(x1,y1)`和一个斜率`m`，那么线上的任何其他点都由下式给出

```
y = y1 + m*(x-x1)  // point is (x,y) 
```

# iphone - iOS：如何旋转 CGLayer？

> ID：11293119
> 
> 赞同：0
> 
> 时间：2012-07-02T11:52:41.963
> 
> 标签：iphone, ios, vector, transformation, cglayer

我一直在寻找答案。我还在加快 iOS 开发的速度，所以我可以肯定地接受我在这里可能是无所事事的。然而，完全和完全缺乏答案让我想知道是否真的有答案。

这是交易：我正在使用 CGLayer 生成一个相当基本的矢量多边形：

```
- (CGLayerRef)getASegment
{
    CGSize  layerSize = s_viewRects[kASegment].size;

    CGLayerRef  theLayer = CGLayerCreateWithContext ( UIGraphicsGetCurrentContext(),
        layerSize, nil );

    CGContextRef context = CGLayerGetContext ( theLayer );

    CGContextAddLines ( context, s_shapePoints, 7 );

    return theLayer;
} 
```

s_viewRects 是一个静态数组，它保存容器矩形，就像放置在整个图像中一样，s_shapePoints 包含一个映射出扭曲六边形的 CGPoint 结构数组。

现在，我想重新使用这个形状。它需要翻转和旋转以适应所有用途（为了记录，这些是“LED”显示器中的“段”）。

我的形状很好。没问题。

问题在于旋转它以供重复使用。似乎没有任何方法可以实际旋转 CGLayer。旋转 CALayers 的方法很多，但不是 CGLayers。我很乐意使用 CALayer，除了 CALayers 似乎都专注于光栅图形，我需要矢量图形。

我确信必须有一个明显的方法来解决这个问题。到目前为止，我看到的唯一方法是旋转整个目标图形上下文，绘制形状，然后取消旋转上下文。相当于转动房子拧下灯泡。

我可以让它工作的唯一方法是在单独绘制每个段之前实际转换点，这意味着不重复使用。在创建形状期间执行 CGContextRotateCTM 实际上不会导致显示时旋转元素。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:37:40.583

> 到目前为止，我看到的唯一方法是旋转整个目标图形上下文，绘制形状，然后取消旋转上下文。相当于转动房子拧下灯泡。

我很确定这是你的解决方案。这就是绘图的`CGContextRef`工作原理。

> 我很乐意使用 CALayer，除了 CALayers 似乎都专注于光栅图形，我需要矢量图形。

您是否尝试过使用`CAShapeLayer`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:58:58.577

好的，正如所承诺的，这是代码。

首先，我使用 CAShapeLayer，并以类似于上面的方式创建它：

```
- (CALayer *)getSegment
{
    CGRect  layerFrame = CGRectMake ( 0, 0, s_viewRects[kASegment].size.width, s_viewRects[kASegment].size.height );

    CAShapeLayer    *ret = [CAShapeLayer layer];

    [ret setFrame:layerFrame];

    CGMutablePathRef    thePath = CGPathCreateMutable ();

    CGPathAddLines ( thePath, nil, s_shapePoints, 7 );

    [ret setPath:thePath];

    return ret;
} 
```

然后，我将它设置为一个主层，就像这样，沿途进行转换：

```
_top_left_element = [self getSegment];

frame = [self calculateRectForElement:_top_left_element];

CATransform3D transform = CATransform3DIdentity;
transform = CATransform3DRotate(transform, M_PI_2, 0.0, 0.0, -1.0 );

[_top_left_element setTransform:transform];
[_top_left_element setFrame:frame];
[_main_element addSublayer:_top_left_element]; 
```

CATransform3DRotate 是必要的，因为图层的变换属性是 3D 属性。我使用 M_PI_2，因为所有变换都以弧度表示（M_PI_2 是一个方便的宏，意思是“90°”），-1 将使旋转逆时针旋转。

calculateRectForElement 是一个计算出所有东西放置位置的函数。它只是返回一个定位元素的矩形。

_top_left_element 是一个类属性，它是一个 CALayer*。

我这样做了，比约恩·斯特朗金瑟拉姆是你的叔叔。

**更新：** *我想补充一点，您需要确保在卸载/销毁时 CGPathRelease 层的路径，否则您会泄漏。*

# vba - VBA powerpoint裁剪所选图像未选择gif

> ID：11293121
> 
> 赞同：1
> 
> 时间：2012-07-02T11:52:47.520
> 
> 标签：vba, add-in, powerpoint

我正在为 VBA 中的 powerpoint 编写插件。我让用户选择图片或占位符，然后裁剪和缩放它们。但不允许对动画 gif 进行裁剪。有没有办法确定所选图像是动画 gif 还是普通图片？

非常感谢帮助。

真挚地，

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:01:01.530

Havent 找到了一种方法来找出不同的类型。但是通过错误处理解决了问题。尝试裁剪 gif 时，会引发错误。捕获此错误并继续执行其余程序（跳过裁剪功能）

# emacs - EIEIO (bzr, cedet 1.1) 未在 emacs 中加载，版本 1.3 已加载

> ID：11293128
> 
> 赞同：3
> 
> 时间：2012-07-02T11:52:56.913
> 
> 标签：emacs, cedet

我下载并编译了CEDET的开发分支，并根据网页上的指南加载它，但是当我启动Emacs时，我得到了

> 错误：EIEIO 版本 1.3 已加载；在初始化文件的开头加载 CEDET 以避免这种情况。

这实际上是我的 .emacs 在 ~/.emacs 中的第一行：

```
(load-file "~/.emacs.d/cedet/common/cedet.el")
(semantic-load-enable-excessive-code-helpers)

(global-ede-mode t)

(require 'semantic-ia)
(require 'semantic-gcc)
(require 'semanticdb) 
```

我真的看不出有什么问题。我也是 Emacs 新手 :P 感谢您的帮助。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:03:20.823

IMO 错误是自我描述的。将您的代码段放在开头`.emacs`

实际加载开发版本略有不同。这是我的 .emacs 文件的相关部分。（相应地更改 cedet 的路径）

```
(unless (featurep 'cedet)
  (when (file-directory-p "~/.emacs.d/el-get/cedet")
    (progn
      (add-to-list 'load-path  "~/.emacs.d/el-get/cedet")
      (load-file "~/.emacs.d/el-get/cedet/cedet-devel-load.el"))))

;;; ede
(setq semantic-default-submodes
      '(;; cache(?)
        global-semanticdb-minor-mode

        global-semantic-highlight-edits-mode
        global-semantic-idle-local-symbol-highlight-mode
        ;; global-cedet-m3-minor-mode

        ;; code helpers
        global-semantic-idle-scheduler-mode
        global-semantic-idle-summary-mode
        global-semantic-idle-completions-mode

        ;; eye candy
        global-semantic-decoration-mode
        global-semantic-highlight-func-mode
        global-semantic-highlight-edits-mode
        global-semantic-stickyfunc-mode

        ;; debugging semantic itself
        ;;global-semantic-show-parser-state-mode 1   ;; show the parsing state in the mode line
        ;;global-semantic-show-unmatched-syntax-mode 1
        ))

(global-ede-mode 1) 
```

# java - 字符串到日期的转换（一切似乎都很好，但失败了）

> ID：11293134
> 
> 赞同：1
> 
> 时间：2012-07-02T11:53:21.573
> 
> 标签：java, date, date-conversion

如何解析这个字符串？

“2012 年 7 月 2 日星期一 13:49:16 CEST”

```
String Date = "Mon Jul 02 13:11:38 CEST 2012";
DateFormat formatter;
Date convertedDate= new Date();
formatter = new SimpleDateFormat("EEE MMM d HH:mm:ss z yyyy");
try {
     convertedDate = (Date) formatter.parse(Date);
} catch (ParseException ex) {
    Logger.getLogger(ItemRecTestCases.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

不工作……” `java.text.ParseException: Unparseable date:`“

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T11:59:26.783

您需要设置语言环境：

```
formatter = new SimpleDateFormat("EEE MMM d HH:mm:ss z yyyy", Locale.ENGLISH); 
```

否则“星期一”不能被解析为“星期一”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T11:59:24.883

需要指定语言环境：

```
formatter = new SimpleDateFormat("EEE MMM d HH:mm:ss z yyyy", Locale.US); 
```

# ruby - Ruby Array Union - 控制选择哪个对象

> ID：11293136
> 
> 赞同：1
> 
> 时间：2012-07-02T11:53:28.753
> 
> 标签：ruby, arrays

我正在尝试在 ruby​​ 中合并两个对象数组。对象有两个相关字段；**id**和**reach_cost**。

我希望我的结果数组包含唯一的 id，其中每个对象在发生碰撞时具有最小的reach_cost。

跑步;

```
result = a1 | a2; 
```

产生混合结果，似乎**a1**的元素优先于**a2**的元素。

我当然可以遍历两个数组并手动对**element.reach_cost**进行比较，但这是一个高性能环境，这种方法被称为非常多。出于这个原因，我试图利用 | 的原生组件。操作员。

是否可以指导 | 操作员更喜欢一个对象而不是另一个对象？也许通过覆盖 <=> 或类似的？

我已经阅读了 | 的源代码 [文档](http://www.ruby-doc.org/core-1.9.3/Array.html)中的运算符，但它似乎没有进行任何比较，只是更喜欢第一个数组参数而不是第二个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:03:34.397

解决方案很简单，但您需要自己检查性能：

```
result = a1.concat(a2).sort_by!(&:reach_cost).uniq!(&:id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:15:19.400

我建议将这些数组存储为哈希。这提供了 O(1) id 查找。下面是代码的样子：

```
h1 = {'1' => {:val => 2}, '2' => {:val => 3}}
h2 = {'1' => {:val => 5}, '2' => {:val => 1}}

def merge_hashes a, b
  a.reduce({}) do |memo, obj|
    k, v = obj

    # choose element with smallest :val
    memo[k] = if b[k][:val] < v[:val]
                b[k]
              else
                v
              end

    memo
  end
end

merge_hashes h1, h2 # => {"1"=>{:val=>2}, "2"=>{:val=>1}} 
```

这应该工作得很快。

如果你喜欢单线，这里有一个（@steenslag 在评论中友情提供）：

```
h1.merge(h2){|key,old,new| old[:val] < new[:val] ? old : new} 
```

# javascript - 需要来自 node.js 模块的“一切”

> ID：11293138
> 
> 赞同：0
> 
> 时间：2012-07-02T11:53:34.293
> 
> 标签：javascript, node.js, dsl, require

我正在编写一个 DSL，我想将所需模块中的所有内容放入当前命名空间中，以便能够编写类似这样的内容

```
// I know it's not working.
// In python, I'd do: from mydsl import *
{*} = require('./mydsl');

node('London');
node('Paris');
edge('London', 'Paris'); 
```

这是我尝试过的一些版本作为解决方法

```
// In python: import mydsl as dsl
dsl = require('./mydsl');
dsl.node('London');

// In python: from mydsl import node, edge
{node, edge} = require('./mydsl');
node('London');

// Extend `this` with imported functions
_ = require('underscore');
_.extend(this, require('./mydsl'));
this.node('London'); 
```

由于我的 DSL 有很多关键字，使用`{node,edge,...} = require`起来会很笨拙。我更喜欢可以通过 browserify 移植到网络的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:01:16.813

这是一个非常非常非常**糟糕**的做法。

```
_ = require('underscore');
_.extend(global, require('./mydsl'));
node('London'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:20:23.470

你考虑过使用`with`吗？

```
var mydsl = require('./mydsl');
with (mydsl) {
    node('London');
    node('Paris');
    edge('London', 'Paris');
} 
```

# drag-and-drop - 如何检查是否将一张相同的图像拖放到 Corona 中的另一张上？

> ID：11293140
> 
> 赞同：0
> 
> 时间：2012-07-02T11:53:41.623
> 
> 标签：drag-and-drop, coronasdk

我正在尝试匹配 Corona 上的图像。我创建了图像并匹配数组变量并将显示对象插入到这些数组中。但是，我无法弄清楚如何将相同的对象之一移动到另一个对象上并使其消失。你能帮我吗？谢谢。

到目前为止，这是我的代码：

```
 local images={}
    local matches={}

    local function onTouch( event )
       local t = event.target
       local phase = event.phase

if "began" == phase then
    -- Make target the top-most object
    local parent = t.parent
    parent:insert( t )
    display.getCurrentStage():setFocus( t )

    t.isFocus = true
elseif t.isFocus then
    if "moved" == phase then
        t.x = event.x
        t.y = event.y 
elseif "ended" == phase or "cancelled" == phase then
        display.getCurrentStage():setFocus( nil )
        t.isFocus = false
    end
end

  return true
   end

  local arguments =
   {
{img="img1.png" , x=30, y=30 },
{img="img2.png", x=100, y=30},
{img= "img3.png",x=170, y=30},
   }    

    local arguments2={

{img= "img1.png",x=30, y=150},
{img= "img2.png",x=100, y=150},
{img= "img3.png",x=170, y=150}

     }

   for _,item in ipairs( arguments ) do
local imgg = display.newImage( item.img,item.x,item.y )

table.insert(images,imgg)
-- Make the button instance respond to touch events
imgg:addEventListener( "touch", onTouch )
   end

   for _,item in ipairs( arguments2 ) do
local imgg = display.newImage( item.img,item.x,item.y )

table.insert(matches,imgg)
-- Make the button instance respond to touch events
imgg:addEventListener( "touch", onTouch )
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:41:15.580

为每个图像分配类型等是最简单的，例如；{img="img1.png" , x=30, y=30, type="red" }

然后，当它被释放时，使用 object.contentBounds 检查它是否在其他参数表中匹配图像的内容范围内（您可以在 Corona Labs API 页面上找到有关此的详细信息。）

# extjs - Ext.Ajax.request 不是函数

> ID：11293144
> 
> 赞同：1
> 
> 时间：2012-07-02T11:53:57.443
> 
> 标签：extjs, extjs4, extjs4.1

我的`Ext.Ajax.request`. 当我使用它时它工作得很好`prototype.js`，但我被建议不要使用它，因为它会导致 Ext 出现其他问题。

我的代码如下所示：

```
var me = this;
Ext.Ajax.Request({
    url : 'index.php/ajax/login/', 
    method: 'POST', 
    timeout : 30000,
    params : {
        // Params here
    },
    scope: me,
    success : me.onLoginRequestSuccess,
    failure : me.onLoginRequestFailure
}); 
```

但它会产生这个错误：

`Ext.Ajax.Request is not a function` 在 `failure : me.onLoginRequestFailure`

任何人都知道这个错误是什么意思以及我该如何解决它？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:03:15.357

当然不是 - 它是`request()` [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-method-request](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-method-request)

# r - 在 R 中处理时间序列数据

> ID：11293146
> 
> 赞同：0
> 
> 时间：2012-07-02T11:28:05.813
> 
> 标签：r, time-series

什么是在以下类型的时间序列数据中操作的好方法`R`：

```
username;variable;2012-01-01;2012-01-15;2012-02-01;2012-03-01;2012-04-01;2012-05-01;2012-07-02 
user1;var1;5;5;5;5;6;6;6
user1;var2;0;0;1;0;0;1;1
user1;var3;9;9;9;9;9;9;9
user2;var1;4;4;4;4;4;6;6
user2;var2;0;0;1;1;1;1;1
user2;var3;4;4;4;9;9;9;9 
```

数据包含每个受监控用户的一组时间序列。我的目标是让数据采用这样一种格式，以便我可以轻松地对该数据集进行“增量”查询。也就是说，从某个时间点开始，我可以回顾并计算某个变量多久之前发生了变化，并且还可以从该查询中获取原始值和新值。

一个简单地将日期和变量名称作为参数的函数将是完美的，例如，`fun(2012-07-02, var1)`或者`fun(2012-02-17, var1)`将`fun(2014-09-02, var1)`返回四列：`username,original_value;new_value;days_since_change`。

是否有`R`可以做类似事情的包或代码片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:13:36.497

以下是如何以易于使用的格式转换您的表格。使用`reshape2`包和`melt`数据的技巧。

```
my.table <-read.table(text="username;variable;2012-01-01;2012-01-15;2012-02-01;2012-03-01;2012-04-01;2012-05-01;2012-07-02
user1;var1;5;5;5;5;6;6;6
user1;var2;0;0;1;0;0;1;1
user1;var3;9;9;9;9;9;9;9
user2;var1;4;4;4;4;4;6;6
user2;var2;0;0;1;1;1;1;1
user2;var3;4;4;4;9;9;9;9",sep=";", header=TRUE)

library(reshape2)
res <-melt(my.table,id.vars=c("username","variable") )    #melt on the first two columns
colnames(res)[3] <-"Date"
res$Date <-as.Date(res$Date,format="X%Y.%m.%d")           #transform into date format

out <-res[res$username=="user1" & res$variable=="var1",]  #request user1 and var1
out

   username variable       Date value
1     user1     var1 2012-01-01     5
7     user1     var1 2012-01-15     5
13    user1     var1 2012-02-01     5
19    user1     var1 2012-03-01     5
25    user1     var1 2012-04-01     6
31    user1     var1 2012-05-01     6
37    user1     var1 2012-07-02     6 
```

当你说的时候我不明白你想要什么，`original_value;new_value;days_since_change`但是以这种方式提取的数据，我相信你可以弄清楚。

# php - mySQL 查询 - 简单的数学问题

> ID：11293148
> 
> 赞同：0
> 
> 时间：2012-07-02T11:54:08.347
> 
> 标签：php, mysql, pdo

我有每个人的 2 个电话号码。有些只填写了电话号码，有些只填写了电话号码2，有些则两者都有。

我正在尝试查找具有相同电话号码的其他人，电话 = 电话，电话 = 电话 2，电话 2 = 电话，电话 2 = 电话 2

问题是，如果电话 1 为空，那么我现有的代码会将其与具有电话号码的下一个人匹配，而不管电话或电话 2 是否为空。我需要在代码中添加什么。

```
 function getothers($tid,$criteria,$telephone,$telephone2,$elector){
                global $dbh;
                $tid = '-TID'.$tid;
                 $sql = "SELECT * FROM electors 
WHERE (telephone > 0 OR telephone2 > 0)
AND records NOT RLIKE '$tid'
AND (telephone IN ('$telephone','$telephone2') 
OR telephone2 IN ('$telephone','$telephone2')) 
AND ID != '$elector'  LIMIT 10";
                return $dbh->query($sql);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:04:54.240

```
SELECT T_el.*
FROM (electors AS T_el) LEFT JOIN (electors AS T_dup)
ON (T_el.ID!=T_dup.ID
  AND (
    (T_el.telephone IS NOT NULL AND (T_el.telephone=T_dup.telephone OR T_el.telephone=T_dup.telephone2))
    OR
    (T_el.telephone2 IS NOT NULL AND (T_el.telephone2=T_dup.telephone OR T_el.telephone2=T_dup.telephone2))
    )
)
WHERE T_dup.ID IS NOT NULL
GROUP BY T_el.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:05:39.837

```
function getothers($tid,$criteria,$telephone,$telephone2,$elector){
            global $dbh;
            $tid = '-TID'.$tid;
             $sql = "SELECT * FROM electors WHERE (telephone > 0 AND telephone IN ('$telephone','$telephone2'))  OR (telephone2 > 0 AND telephone2 IN ('$telephone','$telephone2')) $criteria AND records NOT RLIKE '$tid' AND ID != '$elector'  LIMIT 10";
            return $dbh->query($sql);
        } 
```

# python - 荷兰语 NLTK 命名实体识别

> ID：11293149
> 
> 赞同：8
> 
> 时间：2012-07-02T11:54:10.470
> 
> 标签：python, nlp, nltk, named-entity-recognition

我正在尝试从荷兰语文本中提取命名实体。我使用[nltk-trainer](https://github.com/japerk/nltk-trainer/)在 conll2002 荷兰语语料库上训练一个标注器和一个分块器。但是，来自分块器的 parse 方法没有检测到任何命名实体。这是我的代码：

```
str = 'Christiane heeft een lam.'

tagger = nltk.data.load('taggers/dutch.pickle')
chunker = nltk.data.load('chunkers/dutch.pickle')

str_tags = tagger.tag(nltk.word_tokenize(str))
print str_tags

str_chunks = chunker.parse(str_tags)
print str_chunks 
```

这个程序的输出：

```
[('Christiane', u'N'), ('heeft', u'V'), ('een', u'Art'), ('lam', u'Adj'), ('.', u'Punc')]
(S Christiane/N heeft/V een/Art lam/Adj ./Punc) 
```

我期待 Christiane 被检测为命名实体。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T01:43:18.493

语料库有西班牙语和荷兰语文本，因此`conll2002`您应该确保使用`fileids`参数，如`python train_chunker.py conll2002 --fileids ned.train`. 西班牙语和荷兰语的培训效果都不佳。

默认算法是基于 Tagger 的 Chunker，在 conll2002 上效果不佳。相反，使用像 NaiveBayes 这样的基于分类器的分块器，所以完整的命令可能看起来像这样（我已经确认生成的分块器确实将“Christiane”识别为“PER”）：

`python train_chunker.py conll2002 --fileids ned.train --classifier NaiveBayes --filename ~/nltk_data/chunkers/conll2002_ned_NaiveBayes.pickle`

# jquery - 移动文本并放置图像jquery

> ID：11293154
> 
> 赞同：0
> 
> 时间：2012-07-02T11:54:21.540
> 
> 标签：jquery, css

我想用图像替换一些标题，所以我会有很好的字体。例如

```
<div class="latest_news">
  Latest News
</div> 
```

对于搜索引擎优化，会有文字，但对于用户 - 漂亮的图像。jquery 脚本也可以重新编码链接，所以如果我想替换电子邮件地址，它仍然是可点击的。例如：

```
<div class="email_me">
  <a href="mailto:info@mydomain.com">info@mydomain.com</a>
</div> 
```

脚本应该替换/移动文本不可见并放置

```
<div class="email_me">
  <a href="mailto:info@mydomain.com"><img src="images/email.png" style="...;border:0;" alt="info@mydomain.com" /></a>
</div> 
```

我怎么能在 jquery/css 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:57:28.547

最好使用 webfonts（http://www.google.com/webfonts/ 或类似的东西）。这些不会导致使用图像时发生的任何问题，并且支持大多数浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:33:22.147

网络字体将是最佳解决方案。但这是一个 jQuery 的：

`$('.email_me a').html('<img src="..." style="..." alt="..." />');`

示例：http: [//jsfiddle.net/6b874/](http://jsfiddle.net/6b874/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T11:57:58.177

试试这种风格：

```
#email_me { 
   width : ...
   height: ...
}

#email_me a {
   display     : block;
   width       : 100%;
   height      : 100%;
   overflow    : hidden;
   text-indent : 100%;
   font        : 0/0 a;
   background  : url(images/email.png) top left no-repeat;
} 
```

我没有尝试过，但整个区域应该保持可点击状态。

# mysql - 执行 SQL 命令创建表时出错

> ID：11293160
> 
> 赞同：-1
> 
> 时间：2012-07-02T11:54:50.157
> 
> 标签：mysql, mysql-error-1064

我正在使用 Mysql-query-browser（来自 mysql.com 的 mysql gui）来创建一个表。

```
CREATE TABLE `mydb`.`mytable` (
`client` INT(11) UNSIGNED NOT NULL,
`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
`title` VARCHAR NOT NULL,
`description` VARCHAR NOT NULL,
`url` VARCHAR NOT NULL,
`keywords` TEXT NOT NULL,
PRIMARY KEY(`id`)
)
ENGINE = MYISAM; 
```

但我不断收到以下错误消息：

```
Error executing SQL commands to create table.

  MySQL Error Nr. 1064 You have an error in your SQL syntax; 
  check the manual that corresponds to your MySQL server version for the right syntax to use near
 'NOT NULL,`description` VARCHAR NOT NULL,`url` VARCHAR NOT NULL,`keywo' at line 4 
```

如果有人知道如何解决它？请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:57:25.523

如果您定义一个列，`varchar`则必须将条目的最大长度添加到该列（请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/char.html)）。因此，在您的示例中，可能会导致以下结果：

```
CREATE TABLE `mydb`.`mytable` (
`client` INT(11) UNSIGNED NOT NULL,
`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
`title` VARCHAR(50) NOT NULL,
`description` VARCHAR(100) NOT NULL,
`url` VARCHAR(100) NOT NULL,
`keywords` TEXT NOT NULL,
PRIMARY KEY(`id`)
)
ENGINE = MYISAM; 
```

请注意，您必须为`varchar`语句中的所有三个出现添加此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:58:10.570

您必须为 VARCHAR TYPE 指定长度

```
 CREATE TABLE `test_model`.`mytable` (
    `client` INT(11) UNSIGNED NOT NULL,
    `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(50) NOT NULL,
    `description` VARCHAR(50) NOT NULL,
    `url` VARCHAR(50) NOT NULL,
    `keywords` TEXT NOT NULL,
    PRIMARY KEY(`id`)
    )
    ENGINE = MYISAM; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T11:59:57.870

指定 varchar 的大小应该可以解决问题：

```
CREATE TABLE `mydb`.`mytable` (
`client` INT(11) UNSIGNED NOT NULL,
`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
`title` VARCHAR(20) NOT NULL,
`description` VARCHAR(20) NOT NULL,
`url` VARCHAR(20) NOT NULL,
`keywords` TEXT NOT NULL,
PRIMARY KEY(`id`)
)
ENGINE = MYISAM; 
```

# android - 如何在 logcat 上启用表面抛掷事件

> ID：11293161
> 
> 赞同：4
> 
> 时间：2012-07-02T11:54:53.403
> 
> 标签：android, logcat, android-logcat

我正在尝试在 LogCat 上获取表面抛掷事件。目标是确定每秒绘制的唯一帧数。Surface flinger 源代码记录所有感兴趣的事件（表面帧重绘等），但 LogCat 输出不会转储它们。有没有办法启用这些消息？

到目前为止，我已经尝试过
(i) 从主缓冲区读取 logcat 消息 (adb logcat)
(ii) 从事件缓冲区读取 logcat 消息 (adb logcat -b events)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:51:08.957

Surface flinger 事件可以通过在 android shell 上使用以下命令来动态启用。
`adb shell "service call SurfaceFlinger 1006 i32 1"`
`adb shell setprop debug.graphic_log 1`

来源：[https ://groups.google.com/forum/?fromgroups#!topic/android-platform/pQeeAH-JP94](https://groups.google.com/forum/?fromgroups#!topic/android-platform/pQeeAH-JP94)

# c# - TCP 服务器应用程序中异步访问的集合类

> ID：11293166
> 
> 赞同：0
> 
> 时间：2012-07-02T11:55:04.400
> 
> 标签：c#, sockets, collections, asynchronous, asyncsocket

我正在处理一个 TCP 服务器项目。它异步监听指定端口的连接，接受新连接并开始等待来自它们的数据。每个新客户端在连接时都会发送其 ID，这样我就知道哪个套接字属于哪个客户端。

最少 100000 个客户端将同时连接到服务器。

问题是我应该如何存储这些客户？

```
class Client
{
    public Socket Socket { get; set; }
    public int ID { get; set; }
} 
```

像`List<Client>`这样的东西肯定会中断，因为`List<T>`它不是线程安全的类型。我应该在客户端连接到服务器时将其添加到列表中，当连接丢失时将其从列表中删除。例如，我还需要能够向 ID 为 5 的客户端发送消息，并且`List<T>`在异步环境中迭代 a 是一个糟糕的主意。我认为每次我需要与集合交互时锁定同步根在性能方面没有任何好处。

那么，我应该使用什么来提高性能？

**编辑：**我使用 .NET 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:06:16.190

我会使用一个以 ID 为键的线程安全字典。如果您使用的是 .net 4，则可以使用 System.Collections.Concurrent.ConcurrentDictionary - 如果不是，您可以自己滚动或查看此 url 以获得使用读/写锁的好方法

[http://devplanet.com/blogs/brianr/archive/2008/09/26/thread-safe-dictionary-in-net.aspx](http://devplanet.com/blogs/brianr/archive/2008/09/26/thread-safe-dictionary-in-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:08:09.003

而不是`List<Client>`你应该使用`Dictionary<int, Client>`. 通过这种方式，您可以使用单行代码访问任何 id 的客户端，例如

```
 Dictionary<int, Client> connected = new Dictionary<int, Client>();
 Client cc = connected[5];
 byte[] data = new byte[100]; // any data here
 cc.SendData(data); 
```

# objective-c - UIDocumentInteractionController 将无法在 Ibook 中打开文档

> ID：11293168
> 
> 赞同：2
> 
> 时间：2012-07-02T11:55:09.113
> 
> 标签：objective-c, ios, ipad, ibooks, uidocumentinteraction

问题是“成功”总是让我返回错误？我不知道是什么问题？

我的代码如下：

```
UIDocumentInteractionController *docController = [[UIDocumentInteractionController interactionControllerWithURL:currentPDFPath] retain];

if (docController)
{
    docController.delegate = self;

    BOOL success = [docController presentOptionsMenuFromBarButtonItem:openInButton animated:YES]; 
    //BOOL success = [docController presentOpenInMenuFromBarButtonItem:openInButton animated:YES];
    NSLog(@"success: %d", success);
    if(!success)
    {
        UIAlertView * noApps = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Your iPad doesn't seem to have any other Apps installed that can open this document (such as iBooks)" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [noApps show];
        [noApps release];

    }
}
    [docController release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:59:29.963

类[参考文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/occ/instm/UIDocumentInteractionController/presentOptionsMenuFromBarButtonItem:animated:)说：

> **返回值**
> 
> `YES`选项菜单是否显示或未显示`NO`。如果菜单中没有合适的项目，则可能不会显示选项菜单。

我认为您的`%3F1340297029`后缀`currentPDFPath`可能会阻止[UTI](https://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1)匹配。

检查 的`UTI`属性，如果是 则`docController`设置为。[`kUTTypePDF`](https://developer.apple.com/library/ios/documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/kUTTypePDF)`nil`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:04:07.137

您的崩溃问题可能是因为您的 docController 已经发布。您需要保留它，然后稍后自动释放它。看看这里：

[https://stackoverflow.com/a/3474825/523350](https://stackoverflow.com/a/3474825/523350)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T07:41:40.037

我稍微修改了您的代码，但它不适合我，我使用的是 ARC，所以您必须更改它以适合您的非 ARC 代码。

```
BOOL success = [self.documentInteractionController presentOpenInMenuFromRect:rect inView:self.view animated:YES];

                if (success == NO) {
                    NSLog(@"No application was found");
                } else {

                    NSLog(@"Applications were found");
                } 
```

`BOOL`是返回`YES`或`NO`，`YES`它后面的行是`=`，`TRUE`如果`NO`行是`FALSE`。

- 大卫

# linux - 不同Linux版本生成的核心转储有什么区别？

> ID：11293169
> 
> 赞同：2
> 
> 时间：2012-07-02T11:55:09.683
> 
> 标签：linux, gcc, core, dump, suse

现在，我有两台电脑，第一台有 gcc 4.3.2 linux suse 11.0，它生成一个核心转储，但它没有我的程序的源代码。第二个，有 gcc 4.1 linux suse 10.1 并且有我的程序的源代码。

我可以使用第一台生成的核心转储在第二台电脑上进行调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:00:11.760

如果您可以获得符号的副本，那么可以，但是您需要获得符号才能执行此操作。

看看[这个问题](https://stackoverflow.com/questions/4329986/remote-post-mortem-coredump-analysis-without-having-exact-debug-symbols-for-shar)

# android - 在加载 url 内容之前使 WebView 宽度拉伸

> ID：11293171
> 
> 赞同：0
> 
> 时间：2012-07-02T11:55:17.207
> 
> 标签：android, android-layout, webview

这是我的视图 XML

```
<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
/> 
```

我正在加载一个具有媒体查询的 html，它查找屏幕大小，如果它在 xyz 下，它会隐藏一些元素。加载内容时，我的 webview 的宽度为 0。是否可以在加载内容之前使 webview 拉伸？

这就是我在活动中设置我的 webview 的方式

```
webView = (WebView) findViewById(R.id.comments_web_view);
webView.getSettings().setUserAgentString(Globals.kGlobalUserAgent); 

webView.setWebViewClient(new WebViewClient() 
{
    @Override 
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {
       return super.shouldOverrideUrlLoading(view, url);
    }
}); 
webView.loadUrl(url); 
```

# xml - 使用 XML 文件编辑 header.phtml

> ID：11293173
> 
> 赞同：0
> 
> 时间：2012-07-02T11:55:18.303
> 
> 标签：xml, magento, header, php

我正在开发一个 magento 网站，并且正在尝试对标题进行一些更改。

我想添加我制作的 2 个块（模块）。

有没有办法在不接触的情况下添加它们`header.phtml`：

```
 <?php echo $this->getChildHtml(' ') ?> 
```

有没有办法使用 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T22:30:05.487

header.phtml 文件中有一个占位符：

```
<?php echo $this->getChildHtml('topContainer'); ?> 
```

如果您想向其中添加一些块，只需使用以下代码：

```
<reference name="top.container">
   <block type="%MAGENTO_ALIAS_TO_YOUR_BLOCK%" name="block.some_name" template="path/to/your/template/file.phtml" />

   <block type="%MAGENTO_ALIAS_TO_YOUR_ANOTHER_BLOCK%" name="block.some_name2" template="path/to/your/template/file2.phtml" />
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:32:48.310

我认为这是不可能的。因为我们在使用代码的时候`getChildHtml('abc')`，需要给`.phtml`文件赋值为abc。

可以在热门链接中添加新链接。

# java - 如何使用ant显示构建失败

> ID：11293180
> 
> 赞同：1
> 
> 时间：2012-07-02T11:55:34.730
> 
> 标签：java, ant

我正在使用假蚂蚁（我们有自己的蚂蚁版本，在某些时候调用原始蚂蚁）来运行 java 应用程序。`Build Failed` 每当代码中抛出异常时，我都会运行我希望 ant 显示的应用程序。

现在发生的事情是，如果我在代码中抛出异常，蚂蚁会在终端上显示异常，但`Build Successful`最后会写入。如果出现任何异常，如何使构建失败？即使我通过编写程序退出程序， `System.exit(1)` 它也会写入`Java Result: 1`但仍然写入构建成功。我在 build.xml 文件中使用 try/catch，但它没有帮助。

构建文件中的 ant 目标如下所示。

```
<target name="localhostIsAlive">
    <trycatch>
        <try>
            <java classname="x.y.z.ClassName" fork="true" spawn="${spawnDB}">  
                <arg line="${version}"/>    
                    <classpath>
                        <pathelement location="${basedir}/classes"/>
                    </classpath>                            
            </java>             
        </try>
        <catch>
            <fail message="Some error occured, build should fail"/>
        </catch>
    </trycatch>
</target> 
```

现在，我想要的是，如果在程序执行过程中抛出任何异常，它应该显示构建失败而不是构建成功。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:08:31.817

使用`failonerror`属性：

```
<java classname="x.y.z.ClassName" fork="true" spawn="${spawnDB}" failonerror="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:10:18.627

您可以使用 ：

```
failonerror="true" 
```

# c# - 我应该如何处理从一组 WCF 回调接口对象中抛出的异常？

> ID：11293182
> 
> 赞同：2
> 
> 时间：2012-07-02T11:55:37.300
> 
> 标签：c#, wcf, exception-handling, callback

**更新：** 自从写了这个问题以来，我遇到了这个[错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/617491/during-security-negotiation-if-the-client-goes-away-wcf-service-is-terminated-timing-dependent#details)，它提供了一种复制我一直看到的错误症状的方法。

我还不能确认这是否是我遇到的错误的原因，但需要进行一些调查。我还没有遇到报告中描述的错误的解决方法。

总结报告：如果 WCF 客户端在 WCF 服务的身份验证期间关闭，则在服务中引发异步异常，（在我的情况下）直到它到达 program.cs 文件才被捕获，因此难以处理优雅地。

**原始问题：**

我在 Windows 服务中托管了一个 WCF 服务。

WCF 服务允许客户端订阅（提供回调），之后，服务将更新发布给所有订阅者。

该服务维护`Dictionary<int, ICallback>`所有当前订阅者的回调接口。

当发生需要发布信息的事件时，服务会遍历集合并调用 ICallback 中定义的适当方法。

这一切都很好，所有使用 ICallback 对象的场合都包含在 try catch 中，以防对象处理异常和可能发生的任何其他异常。

我遇到的问题是服务中出现了通信异常：

> System.ServiceModel.CommunicationException：
> 
> 套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。
> 
> 本地套接字超时为“10675199.02:48:05.4775807”。
> 
> System.IO.IOException：读取操作失败，请参阅内部异常。
> 
> System.ServiceModel.CommunicationException：套接字连接已中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。
> 
> 本地套接字超时为“10675199.02:48:05.4775807”。
> 
> System.Net.Sockets.SocketException：现有连接被远程主机强行关闭

此异常未被捕获并导致应用程序崩溃。

因为它没有被捕获，所以我假设在服务尝试发布数据时没有抛出异常，因为这总是发生在 try-catch 中。

此异常可能是由客户端应用程序错误地关闭通道/套接字引起的吗？

**更重要的是，当异常源自的对象当前没有在正在运行的线程中被访问时，如何捕获以这种方式引发的异常？**

即 ICallback 对象位于字典中，没有被使用，当抛出异常时 - 那么我该如何处理异常呢？我在哪里放try catch？

**WCF 服务订阅方法**

```
public static int Subscribe()
{
    int id = -1;

    OperationContext currentContext = OperationContext.Current;

    if (currentContext != null)
    {
        ICallback callback = currentContext.GetCallbackChannel<ICallback>();

        if (callback != null)
        {
            id = GetNextId();

            lock (SubscriberLock)
            {
                Subscribers.Add(id, callback);
            }
        }
    }
    return id;
} 
```

在此方法完成后的一段时间内抛出异常。

我对我已经非常清楚地解释了这个问题感到不高兴，所以如果有一个不是很清楚的具体点，请要求澄清。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:10:25.830

通信异常将在客户端抛出，而不是在 WCF 端。您可以通过将其包装在 try and catch 中来在客户端捕获通信异常。CommunicationException 是 wcf 生成的所有异常的基本类型。您还应该将日志记录添加到您的 wcf 服务和客户端。如何在[此处添加日志记录的详细信息。](https://stackoverflow.com/questions/2712205/catches-communication-exception-instead-of-custom-fault-exception-wcf)

# jar - NoclassDefFoundError:org.ksoap2.serialization.SoapObject

> ID：11293200
> 
> 赞同：0
> 
> 时间：2012-07-02T11:56:45.490
> 
> 标签：jar, android-ksoap2

我在 Eclipse 的 android 项目中提供了 ksoap2 jar 的参考。我仍然收到错误：NoclassDefFoundError:org.ksoap2.serialization.SoapObject 有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:19:59.413

变成外部罐子，例如

```
ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar 
```

放在 /libs 文件夹下，以便 Eclipse ADT 自动将您的 jars 添加到应用程序的构建路径中。毕竟这是一个缺少定义的类错误的构建路径。我希望这对你也有帮助！

# asp.net - 没有 ConnectionString 但我的网站可以运行

> ID：11293202
> 
> 赞同：0
> 
> 时间：2012-07-02T11:56:57.217
> 
> 标签：asp.net

我有网站项目，web.config 中没有 connectionString，换句话说我删除了它的 ConnectionString。现在我期待错误但没有错误，虽然我多次重建网站......这里有人是我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:02:07.890

如果您没有连接字符串并且程序仍然可以连接到数据库，则很可能 web.config 文件已被缓存并且尚未重新加载。

尽管 IIS 确实监视 web.config 文件，但在某些情况下，它不会通知文件更新，您必须手动回收应用程序池（例如托管 NFS 共享的网站）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:03:11.410

看起来您的网站不能使用任何数据库操作或调用，因此它可以工作例如，我可以转到 google 主页，因为当我登录到我的 google 帐户时它必须没有使用任何数据库内容，那是它发出数据库调用的时间我的详细信息等...

# eclipse - 如果我使用 Eclipse 的 EGit 检查了一个项目，我可以使用 Git 命令行吗？

> ID：11293203
> 
> 赞同：1
> 
> 时间：2012-07-02T11:57:09.713
> 
> 标签：eclipse, git, egit

...或者我会破坏 Eclipse 集成吗？这就是我使用 Subclipse 在 Subversion 中进行相应命令行更改时发生的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:46:06.667

是的你可以。为了让 EGit 注意到您在 Eclipse 之外做了一些事情，您必须刷新项目（或者，如果您在 General -> Workspace 首选项中启用了自动刷新，那么这无论如何都是个好主意）。

例如，我有时会在命令行上使用 git 启动复杂的合并，然后在 Eclipse 中解决冲突并提交。奇迹般有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:00:25.483

大多数时候，您可以在 Eclipse 中执行项目刷新 (F5)。然后它重新读取 git/subversion 元信息，一切正常。

# javascript - 正确使用 OnDOMReady 函数

> ID：11293205
> 
> 赞同：1
> 
> 时间：2012-07-02T11:57:13.747
> 
> 标签：javascript, jquery

如果我有 2 个使用此声明的函数，则有关 DOM 就绪函数的以下内容：

```
$(document).ready(function(){my Function here}); 
```

现在我应该使用两个标签，一个用于每个函数，还是应该在其中一个标签中声明这两个函数，都在：`$(document).ready(function(){my two Functions here});`？

```
<script>
    $(document).ready(function(){my Function here});
</script> 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:59:32.697

你可以用两个。它没有害处，这使您可以进行模块化编码。例如，它允许您将相关的代码片段放在一起。

例如，假设您有两个 JavaScript 小部件，它们彼此独立，都在各自独立的文件中，都出现在页面上的不同位置，它们中的任何一个都可能出现在页面上，也可能不出现在页面上。您可以像这样将它们分开，而不是创建一个大杂烩：

```
<script>
    var ads = {};
    $(document).ready(function(){
        // do something with ads
    });
</script>

<script>
    var tracker = {};
    $(document).ready(function(){
        // do something with tracker
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:04:30.027

您可以`$(document).ready()`使用不同的功能进行多次调用。它们都将绑定到该事件，除非您包含它们的那一刻是在事件发生之后（通过 AJAX 将它们包括在内`$.getScript()`）。

您不应该将代码直接包含在 HTML 中。

将其粘贴在一个或多个外部文件中，并使用`src`.

这样他们就可以很容易地被缓存，并且用户不会在每次页面加载时重新下载相同的内容。

您还可以构建不同的就绪文件以实现不同的目的。一是初始化外部插件。一个运行一些事件绑定。一种应用表单验证。

将它们放在不同的文件中意味着您还可以在需要时包含这些文件。商店中的所有页面可能都需要 onReady.ShoppingCart.js，但该商店的 CMS 页面和结账通道上不需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:06:28.480

`ready()`（相对于 inline ）的目的`onload=""`是允许为一个事件绑定多个处理程序。

所以，只使用对你来说最简单/最清楚的，当互联网为摆脱使用内联处理程序而进行了如此多的努力时，禁止自己多次绑定是很愚蠢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T11:59:05.567

使用一个。使代码更易于管理，因此您可以在一个地方查看所有被调用的函数。

# linux - xdotool 忽略目标窗口

> ID：11293206
> 
> 赞同：2
> 
> 时间：2012-07-02T11:57:19.550
> 
> 标签：linux, automation, x11

一个名为 Teeworlds 的窗口是我发送鼠标点击的目标窗口。

```
 xdotool search --class Teeworlds click --repeat 30000 --delay 20 1 
```

然而，这些鼠标点击不只是发送到窗口，它们会发送到鼠标目标的任何地方，无论是 urxvt、Firefox 还是 AwesomeWM 的 wibox。

结果，在我将鼠标聚焦在 Teeworlds 窗口上之前，它不会收到任何点击。

我尝试使用`xdotool selectwindow`捕获窗口 ID，然后使用：

```
xdotool click --window /16777230/ --repeat 30000 --delay 20 1 
```

但结果是一样的。

# php - 尝试在 PHP 中使用 $_GET

> ID：11293213
> 
> 赞同：1
> 
> 时间：2012-07-02T11:57:27.367
> 
> 标签：php, get

我在下面创建了这个简单的广播组，但在 PHP 中调用它时遇到了一些困难。

```
<form id="form1" name="form1" method="get" action="pre_process.php">
    <p>
      <input name="q" type="text" size="80"/>
    </p>
    <p>
      <input type="submit" id="search_button" />
    </p>
    <p>
      <label>
        <input type="radio" name="SearchFormat" value="0" id="SearchFormat_0" />
        Agreggated</label>
      <br />
      <label>
        <input type="radio" name="SearchFormat" value="1" id="SearchFormat_1" />
        Non-Aggregated</label> 
```

我正在使用以下代码，但出现未定义索引的错误：SearchFormat

```
if($_GET["SearchFormat"]==0)
{
    do stuff... 
```

有人可以告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:03:14.633

复选框和单选按钮仅在您的 $_GET 或 $_POST 中可用，如果它们已被选中，您需要使用类似 'isset()' 的东西：

```
if(isset($_GET["SearchFormat"]) ){
    // checkbox was checked
} 
```

检查值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:03:59.067

试试这个

```
if(isset($_GET['SearchFormat']) {
    //code......
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:08:51.940

该复选框仅在选中时才会存在。使用单选按钮执行此操作的最佳方法是默认至少选中一个。

```
<input type="radio" name="SearchFormat" value="0" id="SearchFormat_0" checked="checked"/> 
```

还要使用 isset() 函数在 php 脚本中检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:30:58.963

只需在您的浏览器上查看，您可能会直接从文件夹运行代码。但是您必须使用本地主机地址运行您的页面。看看下面的代码。这是第一个 PHP 文件：radio.php

```
 <html>
   <body>
   <form action="test1.php" method="get">
  <label>
 <input type="radio" name="SearchFormat" value="0"  />
Agreggated</label>  <br />

 <label>
<input type="radio" name="SearchFormat" value="1"  />
Non-Aggregated</label>
<input type="Submit" name="btn" value="SearchFormat" /> 
```

Now another PHP file is:test1.php

```
 <?php   
 if($_GET['SearchFormat']==0)
   {
   echo "I ma checked";
   }
else  
   {
   echo "I am not checked";
   }
 ?> 
```

You have to run this PHP file by writing localhost/radio.php at the browser. Second php file than automatically runs as you click on SearchFormat button.

And also one thing you have to save your all php page in WAMP/XAMP folder.

# vb.net - 如何从记录集中写入数据网格视图？

> ID：11293221
> 
> 赞同：0
> 
> 时间：2012-07-02T11:57:46.363
> 
> 标签：vb.net

使用 SQL 数据库检索到记录集。你有什么理由可以看到这不起作用？dataFN 是 datagridview 中的名称，这是正确的。消息框显示大约 51,000 条记录，因此 SQL 命令运行良好。

提前致谢

```
 Dim i As Integer = 0
    rs.Open("SELECT Elig.FirstName, Elig.LastName, Elig.GroupID, CallLog.EligID, " + _
         "CallLog.DateTime, CallLog.AssignTo, CallLog.Status, CallLog.ReasonCode, " + _
         "CallLog.ReasonDesc FROM Elig INNER JOIN CallLog ON Elig.EligID = CallLog.EligID " + _
         "ORDER BY Elig.FirstName", AdoCon, rs.CursorType, rs.LockType, 0)

    MessageBox.Show("you have " + rs.RecordCount.ToString + " rows")

    While Not rs.EOF
        DataGridView1.Rows(i).Cells("DataFN").Value = rs.Fields("FirstName").Value.ToString
        rs.MoveNext()
        i += 1
    End While 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T02:18:37.280

您可以使用 OleDbDataAdapter 从记录集中填充数据集：

```
Using da as OleDbDataAdapter = New OleDbDataAdapter()
  Dim ds as DataSet = New Dataset
  da.Fill(ds, rs, tableName)
End Using 
```

这将创建一个具有正确模式和数据的数据集——注意记录集是关闭的（据我所知是不可逆的），所以如果你要将数据写回数据库，你必须制作您自己的插入/更新/删除命令。

我只建议将此作为使用 ADO.NET 的中间步骤，但它确实可以在您进行升级时为您提供一个可行的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:37:22.177

你为什么不使用数据集？

将数据放入数据集中

然后使用：

```
mygrid.datasource = mydataset.tables(0).defaultview
mygrid.refresh 
```

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::Error: 无法批量分配受保护的属性：名称

> ID：11293230
> 
> 赞同：2
> 
> 时间：2012-07-02T11:58:00.763
> 
> 标签：ruby-on-rails

**当我尝试创建一个新用户时，它说**

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: name
    from c:/RubyOnRails/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/
 activemodel-3.2.3/lib/active_model/mass_assignment_security/
 sanitizer.rb:48:in  `process_removed_attri
 butes' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:05:08.030

几件事：

批量分配通常意味着将属性传递到创建对象的调用中，作为*属性散列*的一部分。也就是说，您将散列中的一堆属性传递给创建新对象的调用。例如：

```
@user = User.create({:name => "My name", :user_type => "nice_user"}) 
```

但是，Rails 包含一些基本的安全规则，这意味着*默认情况下并非所有属性都可以这样分配*。您必须事先指定哪些可以。你这样做：

```
class user < ActiveRecord::Base
  attr_accessible :name, :user_type
end 
```

如果您没有指定属性 is `attr_accessible`，并且您将其传入以创建对象，则会收到您发布的错误。

以下是更多详细信息：

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

另一种方法是在您第一次创建记录时设置一些属性，然后再设置其他属性 - 如下所示：

```
# In this example `user_type` is not attr_accessible so it needs to be set specifically
@user = User.create({:name => "My name"})
@user.user_type = "nice_user"
@user.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:03:43.313

如果您共享了模型代码，那将会有所帮助。

在您的模型文件中将用户添加到 attr_accessible

```
attr_accessible :name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:03:45.583

在您的`config/application.rb`中，您有以下行：

```
config.active_record.whitelist_attributes = true 
```

在您的模型中，您错过了这一行：

```
attr_accessible :name 
```

不要更改配置文件，而是添加`attr_accessible`. 您应该阅读[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)以更好地了解批量分配安全问题。

# javascript - 跨浏览器文本到语音 Javascript 库

> ID：11293234
> 
> 赞同：1
> 
> 时间：2012-07-02T11:58:12.807
> 
> 标签：javascript, jquery, audio, text-to-speech, html5-audio

我想在我的应用程序中添加文字转语音功能。我看到了 Jtalk、speak.js 和 Google TTS。Google TTS 确实听起来更好，但它在我的 chrome 中不起作用。

另一个人推荐了 SoundManger 所以我的问题：

*   SoundManager 或 SoundManager2 可以用于文本到语音，还是仅用于播放音频文件。
*   是跨浏览器还是客户端必须有任何插件。
*   如果没有，是否有跨浏览器文本到语音 Javascript 库

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:04:35.160

也许[speak.js](http://syntensity.com/static/espeak.html) (emscripted [eSpeak](http://espeak.sourceforge.net/) ) 可以让你起步？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T13:28:57.597

如果您使用的是 Internet Explorer，那么您就是这样做的。

```
var speakers = new ActiveXObject("sapi.spvoice");
speakers.speak("Type text here."); 
```

# c# - nullReferenceException 将对象添加到网格

> ID：11293235
> 
> 赞同：0
> 
> 时间：2012-07-02T11:58:13.853
> 
> 标签：c#, windows-phone-7, object, grid

每当我尝试将 tileSlider 添加到网格时，都会导致 NRE。我无法解释为什么，希望你们中的某个人可以帮助我。

EDIT2：tileSlider 是此处提供的自定义控件：[http](http://tileslider.codeplex.com/) ://tileslider.codeplex.com/ 我尝试在我的应用程序中使用它，但未能在后面的 c#-code 中实现它。

代码：

```
 private void addNormalTiles()
    {
        foreach (KeyValuePair<TileSlider, int[]> slider in (App.Current as App).normalTiles)
        {
            TileSlider x = slider.Key;
            x.Size = 228;
            Grid.SetColumnSpan(x, 2);
            Grid.SetRowSpan(x, 2);
            Grid.SetRow(x, slider.Value[0]);
            Grid.SetColumn(x, slider.Value[1]);
            ContentPanel.Children.Add(x);
        }
    } 
```

谢谢

编辑：

```
 System.NullReferenceException wurde nicht behandelt. 
   Message=NullReferenceException StackTrace: at     
   ScottIsAFool.Controls.TileSlider.TileSlider_Loaded(Object sender, RoutedEventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate       
   handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs,
   Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:15:39.727

我认为这两个小组问题之一可能是您的问题。从文档注释中；

*   不要将此集合与派生的 Panel 类一起使用；请改用 InternalChildren 集合。

*   如果 Panel 是数据绑定的，则此属性返回 null。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:01:07.133

好吧，鉴于您编写的代码，很难知道。堆栈跟踪会有所帮助。可能的选项：

*   `App.Current`可能不是（考虑到您无条件地使用它，`App`演员比在这里使用更好）`as`
*   `App.Current`可能为空
*   `App.Current.normalTiles`
*   `slider.Key`可能为空
*   `Grid`可能为空
*   `slider.Value`可能为空
*   `ContentPanel`可能为空
*   `ContentPanel.Children`可能为空

堆栈跟踪应该可以帮助您确定哪种情况*。*`foreach`明智地使用调试器（在语句上放置断点）也应该有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:01:40.147

在方法的顶部放置一个断点，逐行遍历它，并在运行该行之前查看每个对象的值（在您的监视窗口中，或将鼠标悬停在实例上）。您正在寻找该变量/实例的值何时为`null`.

我将从：

```
(App.Current as App).normalTiles 
```

这一行可能有 3 个问题：`App.Current`is null，`App.Current as App`产生 null 因为`.Current`是 null 或不是 an `App`，或者`normalTiles`是 null。

# android - 如何在 Adob e AIR 中检测 Android 操作系统版本？

> ID：11293236
> 
> 赞同：5
> 
> 时间：2012-07-02T11:58:15.087
> 
> 标签：android, actionscript-3, air

在 iOS 上，Adobe AIR 的 Capabilities.os 可能类似于`"iPhone OS 5.1.1 iPad3,1`“ - 非常清楚地标识操作系统版本以及设备型号。在 Android 上，它看起来更像“ `Linux 2.6.35.7-59465-g42bad32`”。[维基百科](http://en.wikipedia.org/wiki/Android_version_history)列出了以下适用于 android 版本的 Linux 内核：

*   2.6.29：1.6、2.0、2.1
*   2.6.32：2.2 倍
*   2.6.35：2.3 倍
*   2.6.36：3.x
*   3.0.1：4.0x

这些是一成不变的还是某些系统会报告不同的 Linux 版本？

有没有更好的方法来确定使用 AIR 和 ActionScript 的 Android 操作系统版本？

出于我的目的，我需要区分 4.0（冰淇淋三明治）和 4.1（果冻豆）。我认为 4.1 使用 Linux 内核 3.1.10 - 谁能确认？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:27:06.697

好吧，我有另一个解决方案。我发现这个 AS3 类通过抓取一个名为“/system/build.prop”的 Android 系统文件来确定 Android 的版本。

您还可以获得其他信息，例如型号、品牌、SDK 版本和 CPU

看看：[https ://github.com/funky-monkey/Android-Native-Device-Info](https://github.com/funky-monkey/Android-Native-Device-Info)

有关 iOS 的信息，另请参阅：

*   [http://forum.starling-framework.org/topic/detect-device-modelperformance](http://forum.starling-framework.org/topic/detect-device-modelperformance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T20:17:03.740

我可以确认通过内核检测Android版本并不那么可靠。我试图将 4.0 与以前的版本区分开来，虽然大多数 ICS 设备都有 3.x Linux 内核，但一些升级的平板电脑，如 Acer Iconia A500（最初附带 Android 3.0 Honeycomb）仍然有 2.x Linux 内核升级到 Android 4.0 ICS 后。所以我想升级到 Jelly Bean 的设备可能会发生同样的情况。

我想获取 Android 版本的一种可靠方法是创建一个 Native Extension，它调用原生 Android API 来获取该信息（请参阅：[如何检查 Android 的系统版本？](https://stackoverflow.com/questions/3093365/android-get-version-of-system)）。

# iphone - 如何关闭模态视图控制器

> ID：11293237
> 
> 赞同：2
> 
> 时间：2012-07-02T11:58:18.177
> 
> 标签：iphone, uiviewcontroller

我有一个小问题。
我正在服用 5 个 ViewCrollers A、B、C、D、E。A 是一个 RootViewcontroller。在 A 中添加一个按钮并给它一个动作。当我单击按钮时，`presentModalViewController`会显示被调用的 B ViewController。它的 addsubView 进程。因此，在所有观点中，相同的过程都是他们的。指链式过程。
但在最后一个视图中，我想关闭这个 presentmodalViewController。我已经尝试过这种类型的代码。

```
-(IBAction)Done:(id)sender
{
   [self dismissModalViewControllerAnimated:NO];
} 
```

但它不起作用。给我适当的指导..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:03:50.830

尝试使用这样的通知：

```
- (void)dismissSelf {
[self dismissModalViewControllerAnimated:YES];  
}

- (void)receiveDismissNotification:(NSNotification *) note{
[self performSelectorOnMainThread:@selector(dismissSelf) withObject:nil waitUntilDone:NO];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:06:11.417

在 E View 的按钮事件上，这样写

```
-(IBAction)Done:(id)sender
{
    id mainViewController = [self.view.superview.superview nextResponder];
    [mainViewController dismissModalViewControllerAnimated:YES];
} 
```

此代码未经测试，但尝试使用它，希望它有效:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:59:34.007

在同一个 .xib 文件中制作从 A 到 E 的所有视图....

然后在你的 .h 文件中声明：

```
UIView *containerView; 
```

和 IBOutlets 用于从 B 到 E 的所有视图。

在 .m 文件中：

在您的 A 视图的按钮操作中，您可以执行此操作...

```
containerView= [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
[containerView addSubview:BView]; 
[self.view addSubview:containerView]; 
```

此代码会将您的 BView 添加到您的 rootViewController 中，即 A...

现在在休息视图的 IBAction 中，您可以编写此代码来导航..

```
[UIView transitionFromView:BviewController toView:CViewController duration:1.0 options:UIViewAnimationOptionTransitionCurlDown completion:nil]; 
```

等等...

回到你的 rootViewController 即 A

```
[containerView removeFromSuperview]; 
```

在 E 视图的 IBAction 中；或者您也可以使用 transitionFromView 导航...

# linux - /dev/sdb4 的名称更改为 /dev/sdb5

> ID：11293240
> 
> 赞同：0
> 
> 时间：2012-07-02T11:58:23.943
> 
> 标签：linux, unix, ubuntu-10.04, sysadmin

我在 Ubuntu 10.4 上有一个分区布局

```
sfdisk -l /dev/sdb

Disk /dev/sdb: 121575 cylinders, 255 heads, 63 sectors/track
Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0

Device Boot Start     End   #cyls    #blocks   Id  System
/dev/sdb1          0+     60-     61-    487424   83  Linux
/dev/sdb2         60+   2492-   2432-  19530752   82  Linux swap / Solaris
/dev/sdb3       2492+   4923-   2432-  19530752   83  Linux
/dev/sdb4       4923+ 121574- 116652- 937000960   83  Linux 
```

/dev/sdb4 安装在 /home

```
df -h /home
Filesystem            Size  Used Avail Use% Mounted on
/dev/sdb4             880G  202M  835G   1% /home 
```

有没有办法将设备的名称从 /dev/sdb4 更改为 /dev/sdb5 并且 /dev/sdb5 应该安装在 /home 上而不会丢失任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:20:40.323

解决安装问题：由于设备名称通常不可靠（跨内核更新，我在删除/添加其他磁盘时也听说过），您应该更改 /etc/fstab 以通过文件系统 uuid 引用您的分区

例如 /etc/fstab 条目，如

```
/dev/sdb4 /home ext3 defaults 0 0 
```

变成

```
UUID=YOURUUID /home ext3 defaults 0 0 
```

其中 YOURUUID 是文件系统 UUID，您可以使用它作为 root 获取`blkid`（仅使用引号之间的字符串）。

至于更改设备文件的名称，这些事情是通过配置 udev 守护进程来完成的，尽管我相信更改分区号是一个**坏**主意（你为什么要这样做）所以也许这不是甚至可能。

# asp.net-mvc - Z如何在Asp.net MVC razor中使用Zclip？

> ID：11293252
> 
> 赞同：0
> 
> 时间：2012-07-02T11:59:22.667
> 
> 标签：asp.net-mvc

我们正在开发基于 ASP.net MVC razor 引擎的网站。我们使用 guid 动态创建序列密钥。我们希望允许我们的用户将序列号（这是一个标签）复制到剪贴板。我试过使用zclip，它说

```
$('a#copy-dynamic').zclip({
    path:'js/ZeroClipboard.swf',
    copy:function(){return $('input#dynamic').val();}
}); 
```

由于我是这个 MVC 的新手，所以我无法找出刚才提到的标签的 ID 是什么，它被称为 @item.serialkey。有人可以帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:50:43.223

您可以`@item.serialkey`在 JavaScript 内部再次使用。

我不确定这是否是您`#dynamic`对 .

```
$('a#copy-@item.serialkey').zclip({
    path:'js/ZeroClipboard.swf',
    copy:function(){return $('input#@item.serialkey').val();}
}); 
```

# javascript - 关于在 json 中指定链接

> ID：11293259
> 
> 赞同：0
> 
> 时间：2012-07-02T11:59:44.600
> 
> 标签：javascript, html, json

```
<chart caption='ABC Bank Branches' subCaption='(In 
  Asian Countries)' yaxislabel='Branches' xaxislabel='Country'>
 <set label='Hong Kong' value='235' link="JavaScript:myJS('Hong Kong,235');"/> 
 <set label='Japan' value='123' link="JavaScript:myJS('Japan, 123');"/>
 <set label='Singapore' value='129' link="JavaScript:myJS('Singapore, 129');"/> 
 <set label='Malaysia' value='121' link="JavaScript:myJS('Malaysia, 121');"/> 
 <set label='Taiwan' value='110' link="JavaScript:myJS('Taiwan, 110');"/> 
 <set label='China' value='90' link="JavaScript:myJS('China, 90');"/> 
 <set label='S. Korea' value='86' link="JavaScript:myJS('S.Korea, 86');"/> 
</chart> 
```

在 xml 中，我们在 javascript 中为 XML 文件指定链接，如下所示：link="JavaScript:myJS('Hong Kong,235');"

如何在 javascript 中为 json 数据文件指定链接？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:01:00.487

JSON 没有特定的本地方式来表示链接。

只需使用一个字符串。

```
{
    "caption": "ABC Bank Branches",
    "yaxislabel": "Branches",
    "set": [
        {
            "link": "JavaScript:myJS('Hong Kong,235');",
            "value": "235",
            "label": "Hong Kong"
        },
        {
            "link": "JavaScript:myJS('Japan, 123');",
            "value": "123",
            "label": "Japan"
        },
        {
            "link": "JavaScript:myJS('Singapore, 129');",
            "value": "129",
            "label": "Singapore"
        },
        {
            "link": "JavaScript:myJS('Malaysia, 121');",
            "value": "121",
            "label": "Malaysia"
        },
        {
            "link": "JavaScript:myJS('Taiwan, 110');",
            "value": "110",
            "label": "Taiwan"
        },
        {
            "link": "JavaScript:myJS('China, 90');",
            "value": "90",
            "label": "China"
        },
        {
            "link": "JavaScript:myJS('S.Korea, 86');",
            "value": "86",
            "label": "S. Korea"
        }
    ],
    "xaxislabel": "Country",
    "subCaption": "(In    Asian Countries)"
} 
```

# iphone - 文本字段自动更正问题

> ID：11293263
> 
> 赞同：2
> 
> 时间：2012-07-02T12:00:01.700
> 
> 标签：iphone

我面临一个与 UITextField 的自动更正相关的奇怪而奇怪的问题。我有一个派生自 UIScrollView 的类（UIScrollView 的子类），分别在底部包含一些文本字段、文本视图和按钮。

当我在文本字段中输入一些文本并弹出自动更正气泡时，我遇到了一个问题。如果我点击气泡使其退出并点击显示弹出框的按钮，它的尺寸正确。但是，如果我不禁用气泡并向上滚动视图以点击按钮，它会弹出错误的位置。

这就是我为呈现popover所做的：

```
- (void)presentImagePicker:(UIImagePickerControllerSourceType)type
             withAnimation:(BOOL)animated {
  if ([popoverViewController_ isPopoverVisible]) {
    [popoverViewController_ dismissPopoverAnimated:YES];
    return;
  }

  UIImagePickerController *picker =
      [[[UIImagePickerController alloc] init] autorelease];
  [picker setDelegate:self];
  [picker setSourceType:type];
  [[picker navigationBar] setTintColor:[UIColor bloggerBarColor]];
  UIPopoverController *popoverController =
      [self popoverWithViewController:picker];
  CGRect rect = CGRectZero;

  if (type == UIImagePickerControllerSourceTypePhotoLibrary) {
    rect = [[composeView_ addPhotoLibraryButton] frame];
  } else {
    rect = [[composeView_ addPhotoCameraButton] frame];
  }

  [popoverController presentPopoverFromRect:rect
                                     inView:[self view]
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES];
} 
```

提前致谢。塔伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:44:59.170

最后，我得到了修复，我观察到内容偏移包含 y 轴的 -ve 值。因此，只需进行检查以比较它是否小于零，仅此而已.. :)

# dynamics-crm-2011 - MS CRM 2011 中的 SSRS 报告

> ID：11293264
> 
> 赞同：-2
> 
> 时间：2012-07-02T12:00:07.050
> 
> 标签：dynamics-crm-2011, reporting-services

您好，能否请您提供 MS CRM 2011 中 SSRS 报告的链接。请提供链接，我在哪里可以逐步了解 CRM 2011 的 SSRS 报告。我已经搜索过，但我没有得到任何可以提供逐步信息的链接。 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:28:42.077

CRM 文档包含有关创建报告的所有信息：

[http://msdn.microsoft.com/en-us/library/gg328097](http://msdn.microsoft.com/en-us/library/gg328097)

请注意，对于 CRM Online，FetchXML 是您唯一的选择；在本地，您可以选择 SQL 查询或 FetchXML。我喜欢 SQL，因为它易于开发。

# symfony - 格式化实体表单类型中的选项列表选项

> ID：11293267
> 
> 赞同：0
> 
> 时间：2012-07-02T12:00:20.857
> 
> 标签：symfony, symfony-forms, symfony-sonata

我正在使用基于选择的实体表单类型，以便在 Sonata Admin 表单中提供选择列表。我想要的是使用子属性来显示选择列表中的元素集合。

有谁知道如何提供要在选择列表中显示的标签或如何为选择列表数组提供格式？

```
 $formMapper->add( 'frArea', 'entity', array(
        'class'             => 'myVendor\myBundleBundle\View\myEntity',
        //When using a child property here, choice list gets corrupted/bad formatted
        //'property'            => 'child.property',
        'property'          => 'property',
        'em'                => 'formacions',
        'query_builder'     =>  function( EntityRepository $er )
                                {
                                    return $er->createQueryBuilder( 'qb' )
                                              ->add( 'select', 'm' )
                                              ->add( 'from', 'myVendor\myBundleBundle\View\myEntity m' );
                                              //->leftJoin('a.idiomes', 'ai');
                                },
        'required'          => false, 
        'label'             => ucfirst( $this->trans( 'my_label', array(), $this->translationDomain, $this->langCode ) )
    ) ); 
```

当以以下方式使用属性选项时，`'property' => 'child.property'`我收到以下错误：

```
Neither property "nom" nor method "getProperty()" nor method "isProperty()" exists in class "Doctrine\ORM\PersistentCollection" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:49:54.757

这就是参数的作用`property`！无需向 Symfony 指明哪个字段是选项的值，它采用 ID 列，因此`property`用于显示；）

# elf - 从 ELF 文件十六进制转储中查找符号的值

> ID：11293268
> 
> 赞同：0
> 
> 时间：2012-07-02T12:00:21.383
> 
> 标签：elf

我有一个 ELF 文件的十六进制转储（[过去考试](http://www.cs.bgu.ac.il/~shimony/arch2009/Midterm2Examples.pdf)的最后一页）。我知道 strtab 的偏移量和 symtab 的偏移量，我被问到 2 个问题：

1.  'ooo' 符号的值是多少？
2.  字符串“The Netwide Assembler”在哪个部分？

我怎样才能找到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:08:34.390

如果你得到了精灵的完整十六进制编辑，你可以将它转换为精灵并使用 readelf & objdump 来查找这个符号。

如果您无法将十六进制转换为精灵，您可以尝试手动解析符号表和选项卡，只需查看此参考[http://www.skyfree.org/linux/references/ELF_Format.pdf](http://www.skyfree.org/linux/references/ELF_Format.pdf)

# c++ - 如何将 boost::python::iterator 与 return_internal_reference 一起使用？

> ID：11293270
> 
> 赞同：3
> 
> 时间：2012-07-02T12:00:24.070
> 
> 标签：c++, boost, reference, boost-python

我有一个`Type`无法复制的类，它也不包含默认构造函数。我有第二类`A`作为上述类的集合。第二个类通过迭代器提供访问权限，并且我的迭代器具有取消引用运算符：

```
class A {
    class iterator {
        [...]
      public:
        Type & operator*()
        { 
            return instance;
        }
      private:
        Type instance;
    }
    [...]
}; 
```

现在公开我写了一个`boost::python`看起来像这样的代码：

```
class_<A>("A", [...])
    .def("__iter__", iterator<A, return_internal_reference<> >())
    .def("__len__", container_length_no_diff<A, A::iterator>)
; 
```

在将打印消息添加到代码 Python 的所有迭代器操作（构造、赋值、取消引用、销毁）之后，如下所示：

```
for o in AInstance:
    print o.key 
```

我得到输出（修剪到重要部分）：

```
construct 0xffffffff7fffd3e8
dereference: 0xffffffff7fffd3e8
destroy 0xffffffff7fffd3e8
get key 0xffffffff7fffd3e8 
```

在上面的代码中，这些地址只是`instance`成员的地址（或`this`在方法调用中）。前三行由 生成`iterator`，第四行由 getter 方法打印`Type`。因此，以某种方式`boost::python`包装所有内容：

1.  创建迭代器
2.  取消引用迭代器并存储引用
3.  **销毁迭代器（及其包含的对象）**
4.  使用在第二步中获得的参考

很明显`return_internal_reference`，它的行为不像声明的那样（注意它实际上只是 typedef over `with_custodian_and_ward_postcall<>`），只要引用了方法调用的结果，它就应该保留对象。

所以我的问题是如何将这样的迭代器暴露给 Python `boost::python`？

**编辑：**

正如有人指出的那样，可能不清楚：原始容器不包含类型的对象`Type`。它包含一些`BaseType`对象，我可以从中构造/修改`Type`对象。所以`iterator`在上面的例子中就像`transform_iterator`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:07:49.317

我认为整个问题是我没有完全理解`iterator`类应该提供什么语义。似乎只要容器存在，迭代器返回的值就必须有效，而不是迭代器。

这意味着`boost::python`行为正确，有两种解决方案：

*   采用`boost::shared_ptr`
*   按值返回

比我尝试做的方法效率低一点，但看起来没有其他方法。

**编辑：** 我已经制定了一个解决方案（不仅可能，而且它似乎运行良好）：[Boost python container, iterator and item lifetimes](https://stackoverflow.com/questions/13585575/boost-python-container-iterator-and-item-lifetimes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:12:17.047

如果`A`是一个拥有 实例的容器`Type`，那么考虑`A::iterator`包含一个句柄`Type`而不是一个`Type`：

```
class iterator {
  [...]
private:
  Type* instance; // has a handle to a Type instance.
}; 
```

代替：

```
class iterator {
  [...]
private:
  Type instance; // has a Type instance.
}; 
```

在 python 中，迭代器将包含对其迭代的容器的引用。这将延长可迭代对象的生命周期，并防止可迭代对象在迭代期间被垃圾回收。

```
>>> from sys import getrefcount
>>> x = [1,2,3]
>>> getrefcount(x)
2 # One for 'x' and one for the argument within the getrefcount function.
>>> iter = x.__iter__()
>>> getrefcount(x)
3 # One more, as iter contains a reference to 'x'. 
```

`boost::python`支持这种行为。这是一个示例程序，它`Foo`是一个无法复制的简单类型；`FooContainer`作为一个可迭代的容器；`FooContainer::iterator`作为一个迭代器：

```
#include <boost/python.hpp>
#include <iterator>

// Simple example type.
class Foo
{
public:
  Foo()  { std::cout << "Foo constructed: " << this << std::endl; }
  ~Foo() { std::cout << "Foo destroyed:   " << this << std::endl; }
  void set_x( int x ) { x_ = x;    }
  int  get_x()        { return x_; }
private:
  Foo( const Foo& );            // Prevent copy.
  Foo& operator=( const Foo& ); // Prevent assignment.
private:
  int x_;  
};

// Container for Foo objects.
class FooContainer
{
private:
  enum { ARRAY_SIZE = 3 };
public:
  // Default constructor.
  FooContainer()
  {
    std::cout << "FooContainer constructed: " << this << std::endl;
    for ( int i = 0; i < ARRAY_SIZE; ++i )
    {
      foos_[ i ].set_x( ( i + 1 ) * 10 );
    }
  }

  ~FooContainer()
  {
    std::cout << "FooContainer destroyed:   " << this << std::endl;
  }

  // Iterator for Foo types.  
  class iterator
    : public std::iterator< std::forward_iterator_tag, Foo >
  {
    public:
      // Constructors.
      iterator()                      : foo_( 0 )        {} // Default (empty).
      iterator( const iterator& rhs ) : foo_( rhs.foo_ ) {} // Copy.
      explicit iterator(Foo* foo)     : foo_( foo )      {} // With position.

      // Dereference.
      Foo& operator*() { return *foo_; }

      // Pre-increment
      iterator& operator++() { ++foo_; return *this; }
      // Post-increment.     
      iterator  operator++( int )
      {
        iterator tmp( foo_ );
        operator++();
        return tmp;
      }

      // Comparison.
      bool operator==( const iterator& rhs ) { return foo_ == rhs.foo_; }
      bool operator!=( const iterator& rhs )
      {
        return !this->operator==( rhs );
      }

    private:
      Foo* foo_; // Contain a handle to foo; FooContainer owns Foo.
  };

  // begin() and end() are requirements for the boost::python's 
  // iterator< container > spec.
  iterator begin() { return iterator( foos_ );              }
  iterator end()   { return iterator( foos_ + ARRAY_SIZE ); }
private:
  FooContainer( const FooContainer& );            // Prevent copy.
  FooContainer& operator=( const FooContainer& ); // Prevent assignment.
private:
  Foo foos_[ ARRAY_SIZE ];
};

BOOST_PYTHON_MODULE(iterator_example)
{
  using namespace boost::python;
  class_< Foo, boost::noncopyable >( "Foo" )
    .def( "get_x", &Foo::get_x )
    ;
  class_< FooContainer, boost::noncopyable >( "FooContainer" )
    .def("__iter__", iterator< FooContainer, return_internal_reference<> >())
    ;
} 
```

这是示例输出：

```
>>> from iterator_example import FooContainer
>>> fc = FooContainer()
Foo constructed: 0x8a78f88
Foo constructed: 0x8a78f8c
Foo constructed: 0x8a78f90
FooContainer constructed: 0x8a78f88
>>> for foo in fc:
...   print foo.get_x()
... 
10
20
30
>>> fc = foo = None
FooContainer destroyed:   0x8a78f88
Foo destroyed:   0x8a78f90
Foo destroyed:   0x8a78f8c
Foo destroyed:   0x8a78f88
>>> 
>>> fc = FooContainer()
Foo constructed: 0x8a7ab48
Foo constructed: 0x8a7ab4c
Foo constructed: 0x8a7ab50
FooContainer constructed: 0x8a7ab48
>>> iter = fc.__iter__()
>>> fc = None
>>> iter.next().get_x()
10
>>> iter.next().get_x()
20
>>> iter = None
FooContainer destroyed:   0x8a7ab48
Foo destroyed:   0x8a7ab50
Foo destroyed:   0x8a7ab4c
Foo destroyed:   0x8a7ab48 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T06:10:20.623

这是相关示例： [https](https://wiki.python.org/moin/boost.python/iterator) ://wiki.python.org/moin/boost.python/iterator 。
您可以通过 const / non const**引用****返回迭代器值**：

 **```
...
.def("__iter__"
     , range<return_value_policy<copy_non_const_reference> >(
           &my_sequence<heavy>::begin
         , &my_sequence<heavy>::end)) 
```

正如您所提到的，这个想法是，您应该绑定到容器生命周期而不是返回值的迭代器生命周期。**

# ios - iOS 导航标题不显示在子页面上

> ID：11293281
> 
> 赞同：2
> 
> 时间：2012-07-02T12:01:09.287
> 
> 标签：ios, uinavigationbar, title

我有一个基于导航控制器的应用程序选项卡，

导航栏中的标题在选项卡的根页面中显示良好，

但是当我在顶部推送另一个视图控制器时，我无法设置此视图的标题

这是我用于根页面和推送页面的代码，

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
UILabel *lava = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 44)]autorelease];
    lava.backgroundColor = [UIColor clearColor];
lava.text = @"About us"; 

lava.textAlignment = UITextAlignmentCenter ;
lava.textColor = [UIColor whiteColor];
lava.font = [UIFont fontWithName:@"DroidSans-Bold" size:(46)];
lava.shadowColor = [UIColor blackColor];
lava.shadowOffset = CGSizeMake(2, 3);
self.navigationItem.titleView = lava;

 } 
```

那么，在导航栏上设置我的标题缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:15:10.257

您应该更改新控制器 viewDidLoad 中的标题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:20:28.873

你可以试试`self.navigationController.navigationItem.titleView`

或者，如果您使用 iOS5 或更高版本..

```
UIImage *img=[UIImage imageNamed:@"NavBarBackground.png"];    
[self.navigationController.navigationBar setBackgroundImage:img forBarMetrics:UIBarMetricsDefault];

NSDictionary *dict=[NSDictionary dictionaryWithObjectsAndKeys:
                    [UIFont boldSystemFontOfSize:18.0f],UITextAttributeFont
                    ,[UIColor whiteColor],UITextAttributeTextColor
                    ,[UIColor blackColor],UITextAttributeTextShadowColor
                    ,[NSValue valueWithUIOffset:UIOffsetMake(0, 0)],UITextAttributeTextShadowOffset
                    , nil];
[self.navigationController.navigationBar setTitleTextAttributes:dict]; 
```

在你的 rootViewController中调用一次，`viewDidLoad`然后你就可以在`self.title=@"foo"`任何地方使用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:23:07.887

```
CGRect applicationFrame = CGRectMake(0, 0, 300, 40);
UIView * newView = [[[UIView alloc] initWithFrame:applicationFrame] autorelease];
[newView addSubview: lava];
self.navigationItem.titleView = newView; 
```

像这样试试。我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T12:29:59.767

你用什么将视图控制器推到顶部？

两者之间有区别：

```
[self.navigationController pushViewController:viewController animated:YES]; 
```

和

```
[self.navigationController presentModalViewController:viewController animated:YES]; 
```

所以如果你使用 presentModalViewController 方法，它不会显示你的标题。

如果这不是问题并且您正在使用 pushViewController 方法，您可以尝试设置您正在推送的视图控制器的标题。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Controller title";
} 
```

# apache - 将图像请求重写到子域

> ID：11293285
> 
> 赞同：0
> 
> 时间：2012-07-02T12:01:18.997
> 
> 标签：apache, .htaccess, iis, web-config

我现在正在建立一个网站，并且知道提供从子域到主站点内容的图像的好处。

但是，我正在努力编写必要的 .htaccess 和 IIS Web.config 规则来转换请求，例如：

```
http://www.mysite.com/images/image01.jpg 
```

至

```
http://cdn.mysite.com/images/image01.jpg 
```

有人能帮我吗？

我进行了一些搜索，但无法找到我的问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:13:02.033

在您的情况下，使用 .htaccess 从一个域重定向到另一个域是一个坏主意。例如，您的页面上有 30 张图片，那么您将有 30 次重定向（每张图片有 2 个请求！）。如果您在您的网站中更改了图像的 url，并使用图像的根文件夹创建了另一个虚拟主机，那就更好了。

# java - jsp缓存和返回按钮

> ID：11293296
> 
> 赞同：0
> 
> 时间：2012-07-02T12:02:11.687
> 
> 标签：java, javascript, jsp, jakarta-ee

我对 history.go(-1) 和 jsp 页面有疑问。

我有 jsp 页面，它是进行 ajax 调用，在调用之后我想使用 history.go(-1) 返回上一页，它在 IE 中不起作用，但在 firefox 中可以正常工作。

在 IE 中它向我展示了这个：

网页已过期

最可能原因：该网页的本地副本已过期，网站要求您重新下载

这是缓存的问题，那么我如何启用缓存？所以后面会很好用吗？

请帮我 ：（

谢谢你 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:15:49.693

您可以随时使用 response.sendRedirect("previousPag.jsp") 转到上一页，无需使用 javascript 函数 history.go(-1)。这可能是服务器端代码的开销，但是由于您正在进行 AJAX 调用，因此缓存可能会加载该 AJAX 调用，这会删除您以前指向 IE 中的 JSP 页面的缓存。

# android - 确定 ViewPager 何时更改页面

> ID：11293300
> 
> 赞同：162
> 
> 时间：2012-07-02T12:02:42.867
> 
> 标签：android, android-widget, android-viewpager

我在 ViewPager 中有三个页面（片段），但是我只想显示其中两个页面的菜单项。

[以前的 SO 答案](https://stackoverflow.com/a/11075663/418084)中给出的代码似乎不起作用：

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);

    if (isVisibleToUser == true) { }
    else if (isVisibleToUser == false) {  }

} 
```

Eclipse 说不需要 @Override 并且无法设置 super 。系统从未调用过它，即使它是我如何确定当前显示的是哪个页面？我可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-07-02T13:16:41.150

使用`ViewPager.onPageChangeListener`：

```
viewPager.addOnPageChangeListener(new OnPageChangeListener() {
    public void onPageScrollStateChanged(int state) {}
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}

    public void onPageSelected(int position) {
        // Check if this is the page you want.
    }
}); 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2015-06-16T12:32:26.260

`ViewPager.setOnPageChangeListener`现在已弃用。您现在需要`ViewPager.addOnPageChangeListener`改用。

*例如，*

```
viewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {

        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-08-12T09:36:59.260

您也可以使用`ViewPager.SimpleOnPageChangeListener`代替`ViewPager.OnPageChangeListener`并仅覆盖您想要使用的那些方法。

```
viewPager.addOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {

    // optional 
    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) { }

    // optional 
    @Override
    public void onPageSelected(int position) { }

    // optional 
    @Override
    public void onPageScrollStateChanged(int state) { }
}); 
```

希望这有帮助:)

**编辑：** 根据 android API，`setOnPageChangeListener (ViewPager.OnPageChangeListener listener)`已弃用。请检查此网址：- [Android ViewPager API](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener(android.support.v4.view.ViewPager.OnPageChangeListener))

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2019-09-22T02:56:44.913

对于 ViewPager2，

```
viewPager.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback() {
  override fun onPageSelected(position: Int) {
    super.onPageSelected(position)
  }
}) 
```

where`OnPageChangeCallback`是一个具有三个方法的静态类：

```
onPageScrolled(int position, float positionOffset, @Px int positionOffsetPixels),
onPageSelected(int position), 
onPageScrollStateChanged(@ScrollState int state) 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2018-04-18T09:25:07.017

**Kotlin 用户**，

```
viewPager.addOnPageChangeListener(object : ViewPager.OnPageChangeListener {

            override fun onPageScrollStateChanged(state: Int) {
            }

            override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {

            }

            override fun onPageSelected(position: Int) {
            }
        }) 
```

**ViewPager2 的 2020 年更新**

```
 viewPager.registerOnPageChangeCallback(object : ViewPager2.OnPageChangeCallback() {
        override fun onPageScrollStateChanged(state: Int) {
            println(state)
        }

        override fun onPageScrolled(
            position: Int,
            positionOffset: Float,
            positionOffsetPixels: Int
        ) {
            super.onPageScrolled(position, positionOffset, positionOffsetPixels)
            println(position)
        }

        override fun onPageSelected(position: Int) {
            super.onPageSelected(position)
            println(position)
        }
    }) 
```

# c++ - In which cases should I keep multiple targets instead of one in a Makefile?

> ID：11293301
> 
> 赞同：0
> 
> 时间：2012-07-02T12:02:46.217
> 
> 标签：c++, linux, makefile, terminology

```
targetOne : header/headerAB.h source/sourceA.cpp source/sourceB.cpp source/main.cpp
         g++ -Wall header/headerAB.h source/sourceA.cpp source/sourceB.cpp source/main.cpp 
```

Is there a reason why I should break this in multiple targets rather then keeping it as one?
In what cases do we need to have separate targets rather than one in a Makefile?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:14:16.180

Citing [http://mrbook.org/tutorials/make/](http://mrbook.org/tutorials/make/)

> Using dependencies. Sometimes is useful to use different targets. This is because if you modify a single file in your project, you don't have to recompile everything, only what you modified.

So you will get faster recompilation after partial source update. And this is "must to implement" for huge projects, where any change is very small (comparing to entire > 1M LOC project).

Also, multiple targets allows you to set different rules for different parts of project.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:24:16.257

Generally, for flexibility and scalability you should ask 'what is the advantage of building multiple files in the same rule'. It is probable that the first time you do a build, it's going to be quicker if everything gets compiled with the same rule.

However on subsequent steps, if you just alter one source code file do you really want all the other source code files built to object files? I'd imagine not. But if you have it all done in the one rule, that's what'll happen. And that will be expensive if you have a lot of source code files.

This also means if you're building libraries, you'll want to build the library as a separate step, rather than saying having one rule that compiles all the sources and then archives the library. Of course, in that circumstance, it means that the library archive step doesn't need to know how the source code was compiled, or even what language it was in, which makes for easier maintenance.

# c# - 使用 DataTriggers 在运行时更改 DataTemplates

> ID：11293304
> 
> 赞同：5
> 
> 时间：2012-07-02T12:02:58.733
> 
> 标签：c#, wpf, datatemplate, datatrigger, templating

我正在尝试根据特定的布尔值更改 WPF 应用程序中对象的 DataTemplate。当值为“True”时，我希望 DataTemplate 成为某种东西，而当该值为“False”时，我希望 DataTemplate 成为其他东西。

我试过写这段代码，但到目前为止，我得到了一个烦人的“内存不足异常”。

```
<DataTemplate DataType="{x:Type vm:MyObjectViewModel}">
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Visible}" Value="False">
            <Setter TargetName="MainTemplateGrid" Property="Content">
                <Setter.Value>
                    <Ellipse Width="50" Height="50" Fill="Red" />
                </Setter.Value>
            </Setter>
        </DataTrigger>
        <DataTrigger Binding="{Binding Visible}" Value="True">
            <Setter TargetName="MainTemplateGrid" Property="Content">
                <Setter.Value>
                    <Image Source="{Binding Icon}" Opacity="{Binding Visible, Converter={StaticResource VisibilityConverter}}" />
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </DataTemplate.Triggers>
    <ContentControl x:Name="MainTemplateGrid" />
</DataTemplate> 
```

如果有人知道如何解决这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:10:30.420

我想到了。

我使用 a并通过使用s`ContentControl`设置它来做到这一点，这是代码：`Style``DataTrigger`

```
 <DataTemplate DataType="{x:Type vm:MyControlViewModel}">
    <ContentControl>
        <ContentControl.ToolTip>
           <!-- TOOLTIP CODE GOES HERE -->
        </ContentControl.ToolTip>
        <ContentControl.InputBindings>
            <!-- INPUT BINDINGS CODE GOES HERE -->
        </ContentControl.InputBindings>
        <ContentControl.ContextMenu>
            <!-- CONTEXT MENU CODE GOES HERE -->
        </ContentControl.ContextMenu>
        <ContentControl.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="Visibility" Value="0">
                        <Setter Property="ContentControl.Content">
                            <Setter.Value>
                                <Ellipse Width="50" Height="50" Opacity="0.5">
                                    <Ellipse.Fill>
                                        <LinearGradientBrush>
                                            <GradientStopCollection>
                                                <GradientStop Color="Red" Offset="0" />
                                                <GradientStop Color="DarkRed" Offset="0.8" />
                                            </GradientStopCollection>
                                        </LinearGradientBrush>
                                    </Ellipse.Fill>
                                </Ellipse>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                    <DataTrigger Binding="Visibility" Value="100">
                        <Setter Property="ContentControl.Content">
                            <Setter.Value>
                                <Image Source="{Binding Icon}" Opacity="{Binding Visible, Converter={StaticResource VisibilityConverter}}" />
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:20:26.617

您应该能够使用数据模板选择器（请参阅[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)和[数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)）并将其应用于适当的模板选择器属性（例如 Button 具有 ContentTemplateSelector 属性）。

# c - 在 strdup C 之前附加字符串

> ID：11293308
> 
> 赞同：2
> 
> 时间：2012-07-02T12:03:18.143
> 
> 标签：c, string

我有这个代码：

```
if(S_ISDIR(fileStat.st_mode)){
  (*ls)[count++] = strdup(ep->d_name);
  ep = readdir(dp);
} else{
  (*ls)[count++] = strdup(ep->d_name);
  ep = readdir(dp);
} 
```

我怎样才能附加字符串“DIR”来获得类似的东西：

```
 if(S_ISDIR(fileStat.st_mode)){
      (*ls)[count++] = "DIR "strdup(ep->d_name);
      ep = readdir(dp); 
```

所以当我打印它时，我有这个：
file1
file2
DIR: file3
ecc

在哪里`ls`提前`char ***ls`
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:09:02.877

有几种方法可以实现这一点：您可以使用[`strcat`](http://www.cplusplus.com/reference/clibrary/cstring/strcat/)，或者如果您需要进行多次修改，您可以使用[`snprintf`](http://linux.die.net/man/3/snprintf)。

```
size_t len = strlen(ep->d_name);
// You need five characters for "DIR: ", and one more for the terminating zero:
(*ls)[count] = malloc(len+6);
strcpy((*ls)[count], "DIR: ");      // Copy the prefix
strcat((*ls)[count++], ep->d_name); // Append the name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:11:20.850

最简单的方法是使用（非标准）函数`asprintf`

```
if(asprintf(&(*ls)[count++], "DIR %s", ep->d_name) == -1) /* error */; 
```

它以与（和您的）`(*ls)[count++]`相同的方式分配指针。`malloc``strdup`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:08:25.527

使用`asprintf`which 分配一个字符串和`printf`s 给它。就像是：

```
#include <stdio.h>

asprintf(&((*ls)[count++]) "DIR%s", ed->d_name); 
```

我猜这`ls`是一个指向数组的指针`char *`。记得稍后释放字符串！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:17:49.333

一些将任意数量的字符串连接到动态分配的缓冲区中的实用函数：

```
#include <stdlib.h>
#include <string.h>
#include <stdarg.h>

/*
  vstrconcat() - return a newly allocated string that is the concatenation of
                all the string passed in the variable length argument list.

        The argument list *must* be terminated with a NULL pointer.

        All other arguments must be char* to ASCIIZ strings.

        Thre return value is a pointer to a dynamically allocated
        buffer that contains a null terminated string with 
        all the argument strings concatenated.

        The returned pointer must be freed with the standard free()
        function.

 */

char* vstrconcat( char const* s1, ...)
{
    size_t len = 0;
    char const* src = NULL;
    char* result = NULL;
    char* curpos = NULL;

    va_list argp;

    if (!s1) {
        return NULL;            // maybe should return strdup("")?
    }

    // determine the buffer size needed

    src = s1;
    va_start(argp, s1);

    while (src) {
        len += strlen(src);     //TODO: protect against overflow

        src = va_arg(argp, char const*);
    }

    va_end(argp);

    result = malloc(len + 1);
    if (!result) {
        return NULL;
    }

    // copy the data

    src = s1;
    va_start(argp, s1);
    curpos = result;

    while (src) {
        size_t tmp = strlen(src);

        memcpy(curpos, src, tmp);
        curpos += tmp;

        src = va_arg(argp, char const*);
    }
    va_end(argp);

    result[len] = '\0';

    return result;
}

/*
    strconcat() - simple wrapper for the common case of concatenating exactly 
                  two strings into a dynamically allocated buffer

 */
char* strconcat( char const* s1, char const* s2)
{
    return vstrconcat( s1, s2, NULL);
} 
```

你可以在你的例子中这样称呼它：

```
(*ls)[count++] = strconcat( "DIR ", ep->d_name); 
```

# php - 从 wordpress 主题选项中获取默认值

> ID：11293310
> 
> 赞同：1
> 
> 时间：2012-07-02T12:03:24.460
> 
> 标签：php, forms, wordpress, themes, wordpress-theming

我想在我的 wordpress 主题选项中设置一些默认值，以便在激活主题时，我可以获得字段的默认值。以下是我的代码，它在主题选项页面中显示默认值，但在保存选项之前我无法获取变量中的默认值。无论如何在保存之前从主题选项中获取默认值？谢谢。

```
//set default options
$sa_options = array(
    'footer_copyright' => '&copy; ' . date('Y') . ' ' . get_bloginfo('name'),
    'intro_text' => 'some text',
    'featured_cat' => ''    
);

//register settings
function sa_register_settings() {
    register_setting( 'sa_theme_options', 'sa_options', 'sa_validate_options' );
}
add_action( 'admin_init', 'sa_register_settings' );

//add theme options page
function sa_theme_options() {
    add_theme_page( 'Theme Options', 'Theme Options', 'edit_theme_options', 'theme_options', 'sa_theme_options_page' );
}
add_action( 'admin_menu', 'sa_theme_options' );

// Function to generate options page
function sa_theme_options_page() {

    global $sa_options;

    <?php if ( false !== $_REQUEST['updated'] ) : ?>
    <div class="updated fade"><p><?php _e( 'Options saved' ); ?></p></div>
    <?php endif; ?>

    <form method="post" action="options.php">

    <?php $settings = get_option( 'sa_options', $sa_options ); ?>

    <?php settings_fields( 'sa_theme_options' ); ?>

    <input id="footer_copyright" name="sa_options[footer_copyright]" type="text" value="<?php  esc_attr_e($settings['footer_copyright']); ?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:41:42.660

这是我的做法：定义一个获取默认值函数

```
function sa_theme_get_defaults(){
    return = array(
        'footer_copyright' => '&copy; ' . date('Y') . ' ' . get_bloginfo('name'),
        'intro_text' => 'some text',
        'featured_cat' => ''
    );
} 
```

然后在你的`sa_theme_options_page()`替换：

```
<?php $settings = get_option( 'sa_options', $sa_options ); ?> 
```

和 ：

```
<?php $settings = get_option( 'sa_options', sa_theme_get_defaults() ); ?> 
```

并在您的`sa_validate_options()`函数中获取默认值并遍历数组，例如：

```
function sa_validate_options($input){
    //do regular validation stuff
    //...
    //...

    //get all options
    $options = get_option( 'sa_options', sa_theme_get_defaults() );
    //update only the needed options
    foreach ($input as $key => $value){
        $options[$key] = $value;
    }
    //return all options
    return $options;
} 
```

# cloud - 实现类似于 Dropbox 的存储库的技术

> ID：11293311
> 
> 赞同：3
> 
> 时间：2012-07-02T12:03:24.610
> 
> 标签：cloud, dropbox, simplerepository

我确实研究了一些方法和技术来实现类似于 Dropbox（一个简单的存储库）的服务器或客户端服务器......

可能我没有进行最佳搜索，但我找不到最佳技术来实现或一些示例或实现文件传输部分的开源项目......

如果你实现像 Dropbox 这样的东西，你会使用什么技术？

另一个问题是，存储所有文件的最佳位置在哪里？

谢谢你的帮助，对不起我的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:17:23.133

关于传输 - 最好的选择是 WebDAV/S 或 SFTP 作为选项之一（SSH 支持用户名/密码和自定义登录方案）。没有必要发明任何定制的东西。

文件应该存储在磁盘上（这里有很多关于在哪里以及如何在此类服务器上存储文件的讨论），或者，如果您计划使用云服务（例如 Azure 或 Google App Engine）作为后端，在BLOB 存储。

一般来说，您的问题过于宽泛 - 更精确和更狭窄的问题会带来更具体和详细的​​答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:07:31.267

要获得可以放置和共享文件并且也可以作为网络共享挂载的远程“位置”的简单方法，请检查[WebDAV](http://en.wikipedia.org/wiki/WebDAV)协议。

# php - CSS 悬停问题

> ID：11293313
> 
> 赞同：0
> 
> 时间：2012-07-02T12:03:28.727
> 
> 标签：php, css, hover

我正在尝试创建悬停效果（下面带有 html 和 CSS）。悬停效果有效，但我无法将其置于 .portfolio_thumb 之上。

我真的不是那么精通 CSS，所以要温柔 :-) 我有一个测试站点在这里运行：http: //kazam.dk/36-2/#! [prettyPhoto](http://kazam.dk/36-2/#!prettyPhoto)

您可以在图片下方看到它加载的位置！

**css**

```
.portfolio_thumb{
    position: relative;
    z-index: 0;

}

.portfolio_thumb a span{
    display: none;
    position: relative;
    float:left;
    width:163px;
    z-index: 2;
}

.portfolio_thumb a:hover span{
    display: block;
    position: absolute;
    z-index: 9;
    width:163px;
    height: 229px;
} 
```

**HTML**

```
<div class="portfolio_thumb">

<!-- .portfolio_short_content -->
    <div class="portfolie_short_content_containe">

        <a class="lightbox" rel="lightbox" href="<?php echo $image[0]; ?>" title="<?php echo $image_desc; ?>">

            <p class="textarea"><?php echo $full_descr; ?></p>
            <img src="<?php echo $image[0]; ?>" width="<?php echo $image[1]; ?>" alt="<?php echo $image_alt; ?>"></img>                                     
                <span>
                    <p><span class="lable"><?php echo $short_descr;?></span> </p>
                    <p><span class="lable"><?php echo $link; ?></span> </p>                                                      
                </span>                                                                     
        </a>                                                                            

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:22:31.317

它的工作检查在这里：http: [//jsfiddle.net/surendraVsingh/fLZKe/2/](http://jsfiddle.net/surendraVsingh/fLZKe/2/) *（**更新**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:51:26.587

尝试使用以下 CSS 和 HTML 代码：

**CSS**

```
.portfolio_thumb{
    position: relative;
    border:1px solid;

}
.portfolio_thumb a div{
    display: none;
}
 .portfolio_thumb a:hover{
    position: inherit;
}
.portfolio_thumb a:hover div{
    display: block;
    position: absolute;
    top:50px;
    left:10px;
} 
```

**HTML**

```
<div class="portfolio_thumb">

    <!-- .portfolio_short_content -->
    <div class="portfolie_short_content_containe">
        <a class="lightbox" rel="lightbox" href="<?php echo $image[0]; ?>" title="<?php echo $image_desc; ?>">
            <p class="textarea"><?php echo $full_descr; ?></p>
            <img src="<?php echo $image[0]; ?>" width="<?php echo $image[1]; ?>" alt="<?php echo $image_alt; ?>"></img>                                     
                <div>
                    <p><span class="lable"><?php echo $short_descr;?></span> </p>
                    <p><span class="lable"><?php echo $link; ?></span> </p>                                                      
                </div>
        </a>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:04:18.173

1.  将`<span>`标签移到标签上方`<img>`并为其添加一个类（我在下面的示例中使用了类“悬停”）。

2.  将该类添加到 CSS 选择器。CSS 的其余部分不一定需要更改，但您可以根据需要定位悬停`<span>`。

3.  工作示例：http: [//jsfiddle.net/x6Z2L/](http://jsfiddle.net/x6Z2L/)

# java - HTTP 状态 404 - Servlet [ServletName] 不可用

> ID：11293325
> 
> 赞同：5
> 
> 时间：2012-07-02T12:04:10.043
> 
> 标签：java, jsp, tomcat, servlets

**问题**：我的带有 web.xml 的 index.jsp 不断进入 HTTP 404 和 500

我正在使用 Tomcat6 。

这是来自 index.jsp ：

```
 <legend>Registration</legend>
  <form action="./register"> <%-- Address from web.xml  --%>
    First name: <input type="text" name="firstName"><br>
    Last name: <input type="text" name="lastName"><br>
    <input type="submit" value="Register">
  </form> 
```

当我在注册时：

![在此处输入图像描述](../Images/45036f97ad4bb15e3abb06fd89aa3e2c.png)

然后我点击姓名和姓氏，我进入 404 ，消息：

> ## HTTP 状态 404 - Servlet RegistrationServlet 不可用
> 
> **类型**状态报告
> 
> **消息**Servlet RegistrationServlet 不可用
> 
> **描述**请求的资源（Servlet RegistrationServlet 不可用）不可用。
> 
> Apache Tomcat/6.0.35

您认为导致该错误的原因是什么？

该类`RegistrationServlet`在文件`RegistrationServlet.java`夹中的文件下`src/coreservlets/`

我检查了 web.xml，但它似乎没问题，但在这里（如果有帮助的话）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4">
  <servlet>
    <servlet-name>ShowBalance</servlet-name>
    <servlet-class>coreservlets.ShowBalance</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ShowBalance</servlet-name>
    <url-pattern>/show-balance</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>RandomNumberServlet</servlet-name>
    <servlet-class>coreservlets.RandomNumberServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>RandomNumberServlet</servlet-name>
    <url-pattern>/random-number</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>RegistrationServlet</servlet-name>
    <servlet-class>coreservlets.RegistrationServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>RegistrationServlet</servlet-name>
    <url-pattern>/register</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>PrimeServlet</servlet-name>
    <servlet-class>coreservlets.PrimeServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>PrimeServlet</servlet-name>
    <url-pattern>/prime</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
</web-app> 
```

在过去的两天里，我一直在努力解决这个小罪魁祸首，但没有任何帮助，我们将不胜感激。

**编辑：**

根据要求，这里是`RegistrationServlet`

```
package coreservlets;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class RegistrationServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        HttpSession session = request.getSession();
        synchronized (session) {
            NameBean nameBean = (NameBean) session.getAttribute("name");
            if (nameBean == null) {
                nameBean = new NameBean();
                session.setAttribute("name", nameBean);
            }
            nameBean.setFirstName(request.getParameter("firstName"));
            nameBean.setLastName(request.getParameter("lastName"));
            String address = "/WEB-INF/mvc-sharing/ShowName.jsp";
            RequestDispatcher dispatcher = request
                    .getRequestDispatcher(address);
            dispatcher.forward(request, response);
        }
    }
} 
```

这里也是项目树：

![在此处输入图像描述](../Images/7cb328a04d206327a72f7037dbf379b5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T13:04:08.593

你的网址完全没问题。如果 URL 错误，您将收到如下 404 消息：

> 请求的资源`register`不可用

但你反而得到了

> Servlet`RegistrationServlet`不可用

这意味着找到了 servlet，但无法执行它，因为它的构造和初始化失败并出现异常。在 Tomcat 的保护下，*基本上*以下步骤之一失败了：

```
Servlet servlet = new RegistrationServlet();
servlet.init(servletConfig);
servlet.init(); 
```

您需要阅读此异常的服务器日志，然后相应地修复代码。

* * *

虽然您的 URL 完全没问题，但在上下文更改时容易出错。您宁愿指定域相对 URL：

```
<form action="${pageContext.request.contextPath}/register"> 
```

另请参阅此相关答案：[Browser can't access/find relative resources like CSS, images and links when calling a Servlet which forwards to a JSP](https://stackoverflow.com/questions/3655316/browser-cant-access-css-and-images-when-calling-a-servlet-which-forwards-to-a-j/3658735#3658735)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:08:13.673

呃……这很明显，但是 RegistrationServlet.class 在 /WEB-INF/classes/coreservlets/ 中吗？你编译了吗？（使用 Tomcat，您是否需要显式编译？如果您不这样做会很奇怪。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:32:15.710

可能是注册路径没有考虑上下文路径。解决此问题的一个好方法是使用 jstl 核心 url 标签 -

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
...
<c:url value="/register" var="url">
<form action="${url}"> 
```

这将确保您的上下文路径是否添加到 url。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T14:54:17.710

如果在实例化 servlet 时发生任何错误，即使`WEB-INF\lib`文件夹中缺少库，我们也会收到此类错误。确保所有库都放在`WEB-INF\lib`.

# ruby-on-rails - rails 3中的数组数组

> ID：11293327
> 
> 赞同：1
> 
> 时间：2012-07-02T12:04:15.330
> 
> 标签：ruby-on-rails, haml

我有配置文件表，它扩展了父类型并嵌入了许多电话号码..这里是代码---

```
-@profile.parent_type.each_with_index do |parent,index|
  = f.fields_for "parent_attributes[]", parent do |parent_fields|

    %tr
      %td{:class => 'table_hr'}

        = parent_fields.label :lname, "Last name"
        = parent_fields.text_field :lname

        = parent_fields.label :fname, "First name"
        = parent_fields.text_field :fname 
```

有人能解释一下这段代码到底是什么意思吗......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:27:04.557

最好的办法是让您熟悉这里的 HAML 语言参考：

[http://haml.info/docs/yardoc/file.HAML_REFERENCE.html](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html)

该页面将为您解释每个单独的元素，以便您理解它们。显然，我推荐的另一件事是运行代码本身并学习理解它是如何工作的。

但在高层次上，这就是正在发生的事情。

该行：

```
@profile.parent_type.each_with_index do |parent,index| 
```

本质上是抓取配置文件并拉`parent_type`取用户配置文件指向的所有记录，然后循环它们——将`parent_type`记录以及该记录的记录传递`index`到循环中。

该行：

```
 = f.fields_for "parent_attributes[]", parent do |parent_fields| 
```

正在为每个 parent_type 记录创建*表单字段。*`parent_attributes`这些将在表单发布时发布。

其他行：

```
 %tr
  %td{:class => 'table_hr'}

    = parent_fields.label :lname, "Last name"
    = parent_fields.text_field :lname

    = parent_fields.label :fname, "First name"
    = parent_fields.text_field :fname 
```

为每个 parent_type 记录呈现一次，并且是记录的属性。基本上应该有一个表格列出这些，每条记录一行。

明白了吗？

# android - 为什么在android中的json解析中返回空值？

> ID：11293331
> 
> 赞同：0
> 
> 时间：2012-07-02T12:04:21.253
> 
> 标签：android, json, gson

这是我的 Json：

```
{

    "feed": [
        {
            "id": "124124124124",
            "source": "aaaaaa",
            "comment_count": 0,
            "link": "bbbbb",
            "created_time": "2012-05-30T15:57:05+0000",
            "message": "ccccc",
            "type": "dddd",
            "thumbnail": "eeeee"
        },
        {
            "id": "35464423423412414",
            "source": "qweqddq",
            "comment_count": 0,
            "link": "adadasdwe",
            "created_time": "2012-05-30T15:52:21+0000",
            "message": "dadsadad",
            "type": "sfdcsdv",
            "thumbnail": "csdgfsd"
        },
        {

    "name": "asdadqwff",
    "id": "73182372381",
    "source": "lajhdkbad",
    "comment_count": 0,
    "link": "adjkbxczckbj",
    "created_time": "2012-05-30T15:40:28+0000",
    "message": "awjasdjands",
    "type": "lalkdm",
    "thumbnail": "akmldsncj"

     }

    ]

  } 
```

这些是我在解析中使用的 java 类：

```
public class Feed {

    @SerializedName("feed")
    ArrayList<FeedResult> feed;

    public ArrayList<FeedResult> getFeed() {
        return feed;
    }

    public void setFeed(ArrayList<FeedResult> feed) {
        this.feed = feed;
    }   

}

public class FeedResult {

    @SerializedName("id")
    String id;

    @SerializedName("created_time")
    String created_time;

    @SerializedName("message")
    String message;

    @SerializedName("thumbnail")
    String thumbnail;

    @SerializedName("comment_count")
    String comment_count;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getCreated_time() {
        return created_time;
    }

    public void setCreated_time(String created_time) {
        this.created_time = created_time;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public String getThumbnail() {
        return thumbnail;
    }

    public void setThumbnail(String thumbnail) {
        this.thumbnail = thumbnail;
    }

    public String getComment_count() {
        return comment_count;
    }

    public void setComment_count(String comment_count) {
        this.comment_count = comment_count;
    }

} 
```

这是主类的内部：

```
InputStream source = retrieveStream(url);

            Gson gson=new Gson();

            Reader reader = new InputStreamReader(source);

            Feed feeds=gson.fromJson(reader,Feed.class);

            ArrayList<FeedResult>feed=new ArrayList<FeedResult>();

            feed=feeds.getFeed();

            Toast.makeText(this,"feed --> ?? "+ feed, Toast.LENGTH_LONG).show(); 
```

`feeds.getFeed()`返回空值。这是为什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:41:01.977

与其直接将输入流提供给 GSON 构造函数，不如先从 URL 下载 JSON 字符串，然后将其传递给构造函数进行解析，如下所示：

```
String source = read(url);
Feed feeds=new Gson().fromJson(source ,Feed.class);
ArrayList<FeedResult>feed=new ArrayList<FeedResult>();
feed=feeds.getFeed();
for(FeedResult feedResult:feedResults)
    System.out.println(feedResult); 
```

读取功能：

```
public static String read(String url){

    System.out.println("Connecting to service URL : "+url);
    InputStream is = null;
    String result = "";
    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        e.printStackTrace();
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return result;
} 
```

在 FeedResult 类中添加 toString() 函数，以便它以可读的方式打印到控制台：

```
/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return "FeedResult [id=" + id + ", created_time=" + created_time
            + ", message=" + message + ", thumbnail=" + thumbnail
            + ", comment_count=" + comment_count + "]";
} 
```

# qt - QT - 退出代码 -1073741511

> ID：11293337
> 
> 赞同：1
> 
> 时间：2012-07-02T12:04:43.597
> 
> 标签：qt

好吧，就在最近，我尝试尝试使用 QT。但是对于我的生活，我似乎无法编译它并继续**使用代码 -1073741511**错误消息退出。现在我只是试图编译“2dpainting 示例”。

所以只是为了确认，我试图编译 2dpainting 示例，它没有编译成功。

就我得到的调试输出而言，特别是它们似乎是突出显示的行；

```
sException at 0x77671d32, code: 0xc0000139: DLL entry point not found, flags=0x1 (execution cannot be continued) in ntdll32!LdrpSnapThunk
sProcess exited (3221225785)
eProcess crashed
eCDB crashed 
```

以及应用程序输出；

```
Starting C:\QtSDK\Examples\4.7\opengl\2dpainting-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug\debug\2dpainting.exe...
The program has unexpectedly finished.
C:\QtSDK\Examples\4.7\opengl\2dpainting-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Debug\debug\2dpainting.exe exited with code -1073741511 
```

不知道该怎么做，应用程序似乎根据编译输出启动但从未弹出并自动然后崩溃？

帮助或对此错误的解释或可能导致此错误的原因会很棒。

*有关更多信息，我正在运行 Windows 7、64 位、Service Pack 1，我已经安装了 QT 一段时间，就像一年前一样，但从来没有使用它并卸载它，我相信当我拥有它的时候我确实可以使这些示例起作用。

编辑：所以在编辑了我的 PATH 环境变量之后；

```
C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin; 
```

& 重新启动 Windows（只是为了确定），我仍然对 Qt 没有运气，并且仍然收到相同的错误消息。

编辑：所以我只是尝试在 QT 中编译 hello world 示例应用程序。再次它没有工作，但这次我收到了这 3 个警告，也许这些与这里的更大问题有关？

下图； ![在此处输入图像描述](../Images/fcbf150c1bab516f69c455c278a8884b.png)

放大错误： ![飞涨](../Images/66290be936d84f1af89b0a7f4205f720.png)

# ruby - 如何使用本地安装的 gem 执行 Ruby 程序？

> ID：11293339
> 
> 赞同：5
> 
> 时间：2012-07-02T12:04:50.693
> 
> 标签：ruby, gem, bundler

我已经使用安装了我的依赖项

```
bundle package 
```

然后将它们转移到离线服务器并运行：

```
> bundle install --local
Using mime-types (1.19)
Using rest-client (1.6.7)
Using trollop (1.16.2)
Using bundler (1.1.4)
Your bundle is complete! It was installed into ./vendor/bundle 
```

但是，无法运行该应用程序：

```
ruby someprogram.rb
/usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- trollop (LoadError)
        from /usr/local/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from someprogram.rb:2:in `<main>' 
```

我需要为 Ruby 指定什么才能运行本地安装的 gem？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:57:35.477

你在你的命令[`bundle exec`](http://bundler.io/v1.3/man/bundle-exec.1.html)面前失踪了。`ruby someprogram.rb`

# ruby-on-rails - 干燥开始救援结束

> ID：11293347
> 
> 赞同：1
> 
> 时间：2012-07-02T12:05:13.977
> 
> 标签：ruby-on-rails, ruby, design-patterns

我有这个创建方法：

```
def create
    ...
    grid = Tag.find_by_id(story[:tag_id]) or raise GridNotFoundError
    ...
    event = Event.find_by_id(story[:event_id]) or raise EventNotFoundError
    ...
  rescue GridNotFoundError
    flash.now[:error] = "Please select a category"
    @item = item
    @years = story[:years]
    @event_name = race[:name]
    @country = race[:country]
    @classification = race[:class]
    @events = Event.all
    @countries = Tag.countries
    @classifications = Classification.all
    @grids = Tag.grids.find(:all, :conditions => ["value != ?", "Channel Creation Grid"])
    render "home/race_updates"
  rescue EventNotFoundError
    flash.now[:error] = "Please select an event or create a new one if you don't find your event"
    @item = item
    @event = story[:event_id]
    @years = story[:years]
    @events = Event.all
    @countries = Tag.countries
    @classifications = Classification.all
    @grids = Tag.grids.find(:all, :conditions => ["value != ?", "Channel Creation Grid"])
    render "home/race_updates"
  rescue CreateEventError
    flash.now[:error] = "There has been a problem creating your event."
    params[:expand] = true
    @item = item
    @years = story[:years]
    @event_name = race[:name]
    @country = race[:country]
    @classification = race[:class]
    @events = Event.all
    @countries = Tag.countries
    @classifications = Classification.all
    @grids = Tag.grids.find(:all, :conditions => ["value != ?", "Channel Creation Grid"])
    render "home/race_updates"
  rescue ActiveRecord::RecordNotSaved, ActiveRecord::RecordInvalid, ActiveRecord::RecordNotFound
    flash.now[:error] = item.errors.full_messages.join(" ,")
    @item = item
    @event = story[:event_id]
    @years = story[:years]
    @events = Event.all
    @countries = Tag.countries
    @classifications = Classification.all
    @grids = Tag.grids.find(:all, :conditions => ["value != ?", "Channel Creation Grid"])
    render "home/race_updates"
  end 
```

正如你所看到的，救援几乎是一样的。救援也是 home#race_updates 方法的文字复制粘贴。

我有两个问题：

1.  有什么办法让我把它擦干吗？
2.  这对于一般的控制器来说是一个好的模式吗？

我曾考虑将它作为一个函数分离出来，但我需要传入 Flash 消息、项目、故事和种族变量。我觉得这不是一个优雅的解决方案，但它肯定会更干净。

我发现以这种方式编码（即引发错误并拯救它们）使我更容易分离实际的业务逻辑，并处理业务逻辑中出现的不同错误/案例。到目前为止，它有效，但我想就这是否是最佳实践或我没有按预期使用开始/救援？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:39:17.297

如果可以的话，将其干燥是一个好主意，也是 Rails 设计（和测试驱动开发/TDD）的一个很好的教训。

理想情况下，你会做这样的事情：

```
def create
    ...
    grid = Tag.find_by_id(story[:tag_id]) or raise GridNotFoundError
    ...
    event = Event.find_by_id(story[:event_id]) or raise EventNotFoundError
    ...
  rescue GridNotFoundError
    flash.now[:error] = "Please select a category"
    process_grid_not_found(item, story, race, etc...)
  rescue EventNotFoundError
    flash.now[:error] = "Please select an event or create a new one if you don't find your event"
    process_event_not_found(item, story, race, etc...)
  rescue CreateEventError
    flash.now[:error] = "There has been a problem creating your event."
    process_event_create_error(item, story, race, etc...)
  rescue ActiveRecord::RecordNotSaved, ActiveRecord::RecordInvalid, ActiveRecord::RecordNotFound
    flash.now[:error] = item.errors.full_messages.join(" ,")
    process_other_error(item, story, race, etc...)
  end
  render 'home/race_updates' 
```

然后你应该在模型中创建相关的新方法（`process_event_not_found`等）作为单独的（可能`private`）方法。

这既使代码更具可读性，又具有很大的优势，即*更容易编写测试代码。*

因此，您应该编写测试代码（使用`Test::Unit`或`rspec`其他）来测试每个单独的异常方法所需的隔离功能。您会发现，这既能产生更好的代码，也可能会将异常方法分解为更小、更模块化的方法本身。

当您听到 Ruby 和 Rails 开发人员谈论测试驱动开发的好处时，这种方法的主要好处之一是它不太可能导致像您在这里得到的那样长而复杂的方法。您更有可能拥有更干燥的代码，以及更小、更简单的方法。

我还建议，一旦你完成了这个，你再看看并尝试进一步简化它。会有更多的简化空间，但我建议迭代地重构它，并按照我所描述的那样将其分解并开始进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:45:51.660

[`and`我将 Kevin Bedell 的回答与 Victor Moroz 的洞察力结合起来，以及`or`Ruby 中的 和 是流控制结构](http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/)这一事实。我想出了这个：

```
def create
    ...
    grid = Tag.find_by_id(story[:tag_id]) or (render_race_updates(item, "Please select a category") and return)
    ...
    event = Event.find_by_id(story[:event_id]) or (render_race_updates(item, "Please select an event or create a new one if you don't find your event") and return)
    ...
    if item.save
      ...
    else
      render_race_updates item, item.errors.full_messages.join(", ")
    end
  rescue CreateEventError
    params[:expand] = true
    render_race_updates item, "There has been a problem creating your event."
  end
private
  def render_race_updates(item, message)
    flash.now[:error] = message
    # etc.
    render "home/race_updates"
  end 
```

这样，我就可以在不引发异常的情况下处理发生的异常情况，同时捕获由其他方法冒泡的异常。

但是，我还没有编写测试。目前，我只编写单元测试。仍然掌握 RSpec 的窍门并慢慢将我的“wing it”开发改为 TDD，但这是完全不同的对话。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-02T12:36:26.223

如果它仍然 100% 正确，您必须自己验证这一点，因为我可能遗漏了一些东西，但也许这就是您要找的东西？

```
def create
    ...
    grid = Tag.find_by_id(story[:tag_id]) or raise GridNotFoundError
    ...
    event = Event.find_by_id(story[:event_id]) or raise EventNotFoundError
    ...
rescue Exception => e
    flash.now[:error] = e.is_a?(GridNotFoundError) ? "Please select a category" :
                        e.is_a?(EventNotFoundError) ? "Please select an event or create a new one if you don't find your event" : 
                        e.is_a?(CreateEventError) ? "There has been a problem creating your event." :
                        e.is_a?(ActiveRecord::RecordNotSaved) or e.is_a?(ActiveRecord::RecordInvalid) or e.is_a?(ActiveRecord::RecordNotFound) ? item.errors.full_mesages.join(", ") : e.to_s
    @item = item
    @years = story[:years]
    @event_name = race[:name] unless e.is_a?(EventNotFoundError) or e.is_a?(ActiveRecord::RecordNotSaved) or e.is_a?(ActiveRecord::RecordInvalid) or e.is_a?(ActiveRecord::RecordNotFound)
    @events = Event.all
    @countries = Tag.countries
    @classifications = Classification.all
    @grids = Tag.grids.find(:all, :conditions => ["value != ?", "Channel Creation Grid"])
    @event = story[:event_id] if e.is_a?(EventNotFoundError) or e.is_a?(ActiveRecord::RecordNotSaved) or e.is_a?(ActiveRecord::RecordInvalid) e.is_a?(ActiveRecord::RecordNotFound)

    if e.is_a?(GridNotFoundError) or e.is_a?(CreateEventError) 
        @country = race[:country]
        @classification = race[:class]

    end

    params[:expand] = true if e.is_a?(CreateEventError)

    render "home/race_updates"
end 
```

# c# - 仅当双击 DataGridView 中的单元格而不是标题时如何运行代码？

> ID：11293348
> 
> 赞同：10
> 
> 时间：2012-07-02T12:05:14.517
> 
> 标签：c#, winforms, datagridview

```
private void dgv_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
foreach (DataGridViewRow r in dgv.Rows) r.Visible = false;
} 
```

此代码有效，但如果 ColumnHeaders（不仅是单元格）是 doubleClicked 也有效？
我只想在双击单元格时运行它。
CellDoubleClick 应该是指 CellDoubleClick 而不是 HeaderDoubleClick。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-02T12:13:23.843

```
private void dgv_CellDoubleClick(object sender, DataGridViewCellEventArgs e) {
            if (e.RowIndex != -1) {
                //do work
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:12:18.177

您可以检查是否`e.RowIndex`为 -1，这意味着事件发生在标题行上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T12:10:31.243

您可以使用`DataGridViewCellEventArgs.RowIndex`检查是否单击了标题或单击了行中的任何单元格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T12:16:43.993

不是最干净的方法，但你可以像这样实现它

```
private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    if (((System.Windows.Forms.DataGridView)(sender)).CurrentCell != null)
    {
       //Do what you want here................
    }
} 
```

# php - php将标头位置重定向到电话号码

> ID：11293349
> 
> 赞同：2
> 
> 时间：2012-07-02T12:05:22.080
> 
> 标签：php, redirect, mobile, mobile-browser, nokiabrowser

我正在尝试通过 php 将用户点击链接重定向到电话号码，如下所示：

```
//HTML
<a href="tele.php"> 
```

和PHP：

```
<?php
header("Location: tel:+123456789");
exit;
?> 
```

这适用于较新的移动浏览器，但不适用于较旧的移动浏览器，尤其是诺基亚 WAP2.0 浏览器。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-11T10:55:32.417

经过几次尝试，我找到了解决方案。

我设置了我的主域的三级域：`call.mydomain.it`. 在其 docroot 中，我放置了一个`index.php`包含以下行的文件：

```
<?php
if(isset($_GET['tel']) && $_GET['tel'] != "")
{
    $tel = $_GET['tel'];
    header("Location: tel://$tel");
}
die();
?> 
```

因此，当我加载`call.mydomain.it/?tel=00393331234567`浏览器时，开始调用作为参数传递的数字。

此外，如果您必须设置网络营销活动，您可以使用[此免费工具缩小此网址](https://ga-dev-tools.appspot.com/campaign-url-builder/)

希望对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:12:56.750

尝试`wtai://wp/mc;xxxxxxxxx`代替`tel:`.

# c# - datagrid 视图从列表中选择并从文本框中搜索

> ID：11293351
> 
> 赞同：0
> 
> 时间：2012-07-02T12:05:28.760
> 
> 标签：c#, winforms, datagrid

在我的 datagridview 中，我有 4 列和一个要搜索的文本框。当用户选择列名并在文本框中输入内容时，我在组合框列表中加载了 4 个列名，我想指出数据网格中的行并将其显示到显示模型。

我有函数 DisplaySelectedProjection，当用户在 datagirdview 中选择任何行时，所选行的值显示在相应行的文本框中。

```
private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
        {

        }   

 private void DataGridDepthProjection_SelectionChanged(object sender, EventArgs e)
    {
        DisplaySelectedProjection();
    }

    private void DisplaySelectedProjection()
    {
        if (DataGridDepthProjection.CurrentRow == null)
            return;

        var index = DataGridDepthProjection.CurrentRow.Index;
        if (index < 0 || index >= bindingList.Count)
            return;

        var item = bindingList[index];
        var depthProjection = depthProjections[item];

        Display(depthProjection);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:10:35.097

您需要遍历 DataGridView 行和单元格以匹配条件。为此，您需要使用：

```
foreach (DataGridViewRow row in this.dataGridView1.Rows)
{                            
    foreach (DataGridViewCell cell in row.Cells)
    {
         /* Your code here */
    }
} 
```

在 DataGridView 的 RowChanging 事件中，需要更改单元格的颜色。

# ios - 以编程方式设置 RGB

> ID：11293353
> 
> 赞同：3
> 
> 时间：2012-07-02T12:05:39.150
> 
> 标签：ios, objective-c, uilabel, uicolor

我们如何以编程方式设置标签文本的颜色，我的颜色是 R 77 G 104 B 159 我尝试了以下代码但没有用。

```
Label.textColor = [UIColor colorWithRed:77.0 green:104.0 blue:159.0 alpha:1.0]; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T12:07:15.047

请尝试代码

```
Label.textColor=[UIColor colorWithRed:77.0/255.0f green:104.0/255.0f blue:159.0/255.0f alpha:1.0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:07:24.310

```
Label.textColor=[UIColor colorWithRed:77/255.f green:104/255.f blue:159/255.f alpha:1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T12:06:49.770

```
Label.textColor=[UIColor colorWithRed:77.0/255.0 green:104.0/255.0 blue:159.0/255.0 alpha:1.0]; 
```

# android - 执行器服务 + view.post(Runnable)

> ID：11293355
> 
> 赞同：0
> 
> 时间：2012-07-02T12:05:46.890
> 
> 标签：android, multithreading, listview, android-fragments, threadpool

我想启动几个线程，从网络中检索数据，使用它执行一些操作，然后更改有关此数据的 UI。

我正在使用执行器服务

```
executorService = Executors.newFixedThreadPool(3); 
```

所有数据都得到了，但是当我尝试调用 imageView.post 它返回 true 但有关 Runnable 的主体未执行：

```
Log.v("imageloader", "before post + " + imageView);
imageView.post(new Runnable()
{
    @Override
    public void run()
    {
         Log.v("imageloader", "in post - " + bmpToShow.toString() + "/" + imageView);
         if (imageView.getTag().equals(url))
         {
             imageView.setImageBitmap(bmpToShow);
         }
    }
}); 
```

如果在日志中的这个执行器服务中执行 10 个 Runnables，您可以找到 10 条“发布前”消息，但只有 nTasks（取决于您在“Executors.newFixedThreadPool(nTasks)”中允许多少任务）“发布后”消息

我无法弄清楚 nTasks 如何与 view.post 运行次数相关联。

PS。它仅在应用程序的第一次启动时发生（我使用 android 片段并在 onCreateView 中填充数据）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:11:37.267

哇，问题是在某些情况下（我不知道它取决于什么）ImageView.post 中的代码没有执行（可能这个视图还没有创建），我在 runOnUiThread() 上更改了 Imageview.post()，现在一切正常.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:17:04.010

`post`返回 true 仅意味着 Runnable 已成功放入队列，而不是运行正常。

你怎么知道“Runnable 的主体没有被执行”？

一种可能性是`bmpToShow`空值，在这种情况下，您的日志语句可能会抛出一个`NullPointerException`（不确定日志在 Android 上如何工作），如果您不抓住它，它将丢失。

您可以在输入 runnable 时添加另一个日志以首先检查`Log.v("in runnable with " + bmpToShow);`。

如果`bmpToShow`为空，可能有多种原因，但如果不查看其余代码则很难判断。

# php - 百分比列表

> ID：11293357
> 
> 赞同：0
> 
> 时间：2012-07-02T12:05:50.600
> 
> 标签：php, mysql, join, percentage

我正在尝试制作测试答案的百分比。

我有 3 个表的 mysql 数据库

桌子`tests`

```
id | name
---+--------
1  | test 1
2  | test 2 
```

`questions`带有测试问题的表格

```
id | name       | test_id
---+------------+--------
1  | question 1 | 1
2  | question 2 | 1
3  | question 3 | 1
4  | question 4 | 1
5  | question 1 | 2
6  | question 2 | 2
7  | question 3 | 2
8  | question 4 | 2 
```

`answers`我在其中放置了所有测试答案的表格

```
id | question_id
---+-------------
1  | 1
2  | 2
3  | 5
4  | 6
5  | 7
6  | 8 
```

如何在测试中获得包含已完成问题百分比的列表。在这种情况下：

```
name   | percentage
-------+-----------
test 1 | 50
test 2 | 100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:09:04.267

尝试

```
select t.name, 
       cast((count(a.id) / count(q.id)) * 100 as unsigned) as percentage
from tests t
left outer  join questions q on q.test_id = t.id
left outer  join answers a on a.question_id = q.id
group by t.name 
```

请参阅此[SQLFiddle](http://sqlfiddle.com/#!2/73f04/25)示例

# jquery - Jquery 插件在 3D 中旋转 DIV

> ID：11293359
> 
> 赞同：0
> 
> 时间：2012-07-02T12:06:08.530
> 
> 标签：jquery, jquery-plugins, 3d, rotation, z-axis

你知道任何可以在 3D 中旋转 DIV 的 jquery 插件吗？我有类似大小的 DIV 一个在另一个之上。你可以看到它们，因为它们是一个在另一个之上。我想在 z 轴上旋转它们，以便人们可以看到所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:46:23.400

我认为[jQuery Transit](https://github.com/rstacruz/jquery.transit)可能是您正在寻找的。

它可以进行 3D 旋转，也可以使用 rototeX、rotateY 和透视，非常棒。我没有看到 rotateZ 支持，但这几乎是正常的旋转，不是吗？

无论如何，我认为值得一试。

# delphi - 如何实现多个撤消/重做？

> ID：11293360
> 
> 赞同：2
> 
> 时间：2012-07-02T12:06:08.873
> 
> 标签：delphi, undo, redo

我有一个带有 4 个编辑框和一个备忘录的表单，并且正在尝试弄清楚如何实现多个撤消的重做，例如-

因此，如果用户在编辑 3、1、2、备忘录然后编辑 4 中输入文本，我想按反向顺序撤消并按原始顺序重做。

但是我不太确定如何跟踪订单。对此的任何帮助将不胜感激

我正在使用德尔福 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:13:03.933

最简单的方法是捕获对任何包含控件的任何更改，并一起写下所有 4 个控件的状态（内容、选择、插入符号位置）。对每次更改都执行此操作，您将拥有一个撤消堆栈。现在，当您需要撤消操作时，您可以将所有控件恢复到其保存状态。

此方案可能非常耗费资源，一旦实施，您可能希望通过仅保存差异或在特定控件上完成的最后操作来优化它。问题是

(a) 标准编辑/备忘录不会为您提供确切更改的信息，因此您需要以某种方式计算更改（例如，通过将其与先前记录的状态进行比较，但这意味着您需要“重建" 从初始状态到所有变化的内容，然后将 current-1 状态与当前状态进行比较以找出变化，

(b) 标准控件自己处理撤消操作，用户可以恢复一个控件，从而破坏撤消堆栈的顺序。

也许您可以使用一些第三方编辑/备忘录控件，这些控件更能满足您的需求，并且可以让您控制撤消/重做操作。例如，我曾经为 ElPack（现在 LMD ElPack 由 LMD Innovative 拥有）创建了 TElEdit 控件，并且该控件在其他功能中具有撤消/重做堆栈，我知道 TElEdit 如何帮助您对其源代码进行轻微修改。您可能想检查 TElEdit 或其他类似组件，看看他们可以为您提供什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:23:24.810

为此使用[命令模式](http://www.oodesign.com/command-pattern.html "命令模式")。我不会解释整个概念，因为那里已经有很多了，但是可以在[这里](http://mattberther.com/2004/09/16/using-the-command-pattern-for-undo-functionality)找到一个很好的例子，如果你搜索“命令模式撤消重做”，还有很多其他的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T22:26:39.670

使用一个 TClientDataSet 控件作为 mem 存储和 4 个 tdbedit 控件。请参阅 TClientDataSet revert、undolastchange 方法。

# iphone - 编译 Source Xcode 发送 Xcode Project

> ID：11293364
> 
> 赞同：0
> 
> 时间：2012-07-02T12:06:16.167
> 
> 标签：iphone, objective-c, xcode, cocoa

我需要将 iPhone 应用 Xcode 项目发送给代理机构，但我不希望他们能够看到项目的源代码，我如何编译项目并将其发送给代理机构以便他们能够提交项目到 Apple 但看不到源代码？

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:09:41.913

您将需要构建项目以在 Xcode 中进行归档导航到`Product -> build for -> archiving`

这将产生一个应用程序文件，您将发送给该​​机构

但是请注意，您需要获取配置和密钥才能构建分发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:09:09.310

您可以创建存档文件并发送它，而不是发送 Xcode 代码。

您可以查看此线程并了解如何创建存档文件（ipa 文件）- [Xcode 4：创建 IPA 文件而不是 .xcarchive](https://stackoverflow.com/questions/5265292/xcode-4-create-ipa-file-instead-of-xcarchive/5372142#5372142)

# windows - 是否可以为 Windows 7 编写自己的登录和身份验证应用程序？

> ID：11293365
> 
> 赞同：0
> 
> 时间：2012-07-02T12:06:20.160
> 
> 标签：windows, authentication

我知道一些适用于 Windows 的生物识别登录身份验证应用程序。他们是怎么做到的？我可以编写自己的登录验证应用程序吗？我想使用基于 IR 的遥控器进行身份验证？我需要学习很多东西。它适用于我的基于 ir 的遥控器，但我只能使用数字作为密码？我不知道如何使用基于 ir 的遥控器输入字母和大写字母

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:09:32.593

是的，请查看 technet 上的[登录和身份验证技术页面](http://technet.microsoft.com/en-us/library/cc780455%28v=ws.10%29)。你基本上想写一个[`SSPI`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380493%28v=vs.85%29.aspx)/`SSPS`处理程序

# jquery - jQuery仅对值“高度”的顶部进行动画处理

> ID：11293369
> 
> 赞同：1
> 
> 时间：2012-07-02T12:06:30.527
> 
> 标签：jquery, colors, jquery-animate, block

我最近有一个类似的线程，但现在我需要为块的顶部设置动画。就像现在一样，它从底部和顶部都动画。

例如，我希望它缩小，所以为了得到我写的：

```
$('#yellow').animate({height:'50%'},500); 
```

但它从顶部和底部位置都收缩到中心。

有没有办法让它只从顶部缩小50%？

如果这里有任何帮助的话

CSS：

```
#yellow{
height:250px;
width:500px;
background-color:yellow;
} 
```

HTML：

```
<div id='yellow'></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:24:46.973

您可以通过一些绝对定位将块粘在底部：

```
#yellow{
  position:absolute;
  bottom: 0;
  height:250px;
  width:500px;
  background-color:yellow;
} 
```

注意：它也需要定位它的容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:04:49.907

这是在顶部位置收缩块的完整解决方案：

HTML：

```
<div id="yellow">sdsds</div> 
```

CSS：

```
#yellow{  position:absolute;  bottom: 0;  height:200px;  width:250px;  background-color:yellow; } 
```

查询：

```
$("#yellow").toggle(function() {
$(this).animate({
    'height': '100px'
}, 500); 
```

}, function() { $(this).animate({ 'height': '200px' }, 500); });

我还用解决方案创建了一个 bin，所以在 [http://codebins.com/codes/home/4ldqpc8上试试这个](http://codebins.com/codes/home/4ldqpc8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:45:30.117

你可以试试[http://docs.jquery.com/UI/Effects](http://docs.jquery.com/UI/Effects)

**已编辑：链接已更新**

看一个小演示：http: [//jsfiddle.net/rathoreahsan/ZMUz9/](http://jsfiddle.net/rathoreahsan/ZMUz9/)

# spring-mvc - 使用 spring-mvc 实现的 REST api 的安全性

> ID：11293370
> 
> 赞同：1
> 
> 时间：2012-07-02T12:06:36.743
> 
> 标签：spring-mvc, restful-authentication

我正在阅读关于 REST api 安全性的不同观点，无论是在 SO 还是在其他地方，并且鉴于我使用的是 spring-mvc，这让我想知道基于 url 模式/用户会话的安全性在哪些方面会出错休息。每个请求都携带一个 cookie 的场景与携带一些访问令牌/url 哈希的场景没有太大区别。将有一个会话的概念，由访问令牌的生命周期标记，我认为如果我从基于浏览器的客户端使用它应该超时

# xml - 使用 XSLT 显示序列号

> ID：11293371
> 
> 赞同：2
> 
> 时间：2012-07-02T12:06:40.590
> 
> 标签：xml, xslt

我的输入 XML 包含以下内容，

```
<root>
    <entry>
        <type>U</type>
        <value>111</value>
    </entry>
    <entry>
        <type>X</type>
        <value>222</value>
    </entry>
    <entry>
        <type>E</type>
        <value>333</value>
    </entry>
    <entry>
        <type>Q</type>
        <value>444</value>
    </entry>
    <entry>
        <value>555</value>
    </entry>
    <entry>
        <value>666</value>
    </entry>
</root> 
```

输出我需要，

```
<ROOT>
    <ENTRY>
        <SLNO>1</SLNO>
        <VALUE>111</VALUE>
    </ENTRY>
    <ENTRY>
        <SLNO>1</SLNO>
        <VALUE>222</VALUE>
    </ENTRY>
    <ENTRY>
         <SLNO>1</SLNO>
         <VALUE>333</VALUE>
    </ENTRY>
    <ENTRY>
        <SLNO>2</SLNO>
        <VALUE>444</VALUE>
    </ENTRY>
    <ENTRY>
        <SLNO>3</SLNO>
        <VALUE>555<VALUE>
    </ENTRY>
    <ENTRY>
        <SLNO>4</SLNO>
        <VALUE>666</VALUE>
    </ENTRY>
</ROOT> 
```

要求是为 X、E、Y 和 K 以外的类型以及类型标签本身缺失的情况生成新的 SLNO。对于所有其他类型，我们需要显示新的序列号。

我已经写了一个 for-each to for 相同的，因为我必须对另一个值进行更多处理，所以 for-each 是必须的。

我怎样才能做到这一点？

我的示例 XSL 代码如下，

```
<xsl:for-each select="/ROOT/ENTRY">
    <xsl:if test="(TYPE != 'X') and (TYPE != 'E')">             
        <xsl:text><![CDATA[<SLNO>]]></xsl:text>

        <xsl:if test="((type != 'X') and (type != 'E') and (type != 'Y') and (type != 'K'))">
            <xsl:value-of select="count(preceding::type[((. != 'X' and . != 'E' and . != 'Y' and . !='K') or . ='')]) + 1" /> 
        </xsl:if>                                                               

        <xsl:if test="(type = 'X') or (type = 'E') or (type = 'Y') or (type = 'K')">
            <xsl:value-of select="count(preceding::type[(. != 'X' and . != 'E' and . != 'Y' and . !='K')])" />                                                        
        </xsl:if>

        <xsl:text><![CDATA[</SLNO>]]></xsl:text>
    </xsl:if>
    <!-- Printing remaining values -->
</xsl:for-each> 
```

这段代码的问题是，我没有得到没有类型标签的条目的 SLNO。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:45:06.833

**Warning**:

The code provided in this question isn't syntactically legal XSLT -- there is no XSLT instruction `<xsl:type-of>` in the language.

Also, this code generates *text* that looks like opening and closing element tags.

Never do such thing, when you want to generate an element -- test is not markup -- it is just ... text.; and the generated output is not what you wanted it to be.

* * *

**Solution**:

**This transformation**:

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="entry">
  <entry>
   <slno>
    <xsl:value-of select=
     "count((.
            |
              preceding-sibling::entry)
               [not(type)
               or
                not(contains('+X+E+Y+K+', concat('+', type, '+')))
                ]
            )"/>
    </slno>
    <xsl:apply-templates select="node()[not(self::type)]"/>
  </entry>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the provided XML document**:

```
<root>
    <entry>
        <type>U</type>
        <value>111</value>
    </entry>
    <entry>
        <type>X</type>
        <value>222</value>
    </entry>
    <entry>
        <type>E</type>
        <value>333</value>
    </entry>
    <entry>
        <type>Q</type>
        <value>444</value>
    </entry>
    <entry>
        <value>555</value>
    </entry>
    <entry>
        <value>666</value>
    </entry>
</root> 
```

**produces the wanted, correct result:**

```
<root>
   <entry>
      <slno>1</slno>
      <value>111</value>
   </entry>
   <entry>
      <slno>1</slno>
      <value>222</value>
   </entry>
   <entry>
      <slno>1</slno>
      <value>333</value>
   </entry>
   <entry>
      <slno>2</slno>
      <value>444</value>
   </entry>
   <entry>
      <slno>3</slno>
      <value>555</value>
   </entry>
   <entry>
      <slno>4</slno>
      <value>666</value>
   </entry>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:45:49.970

*   Don't **EVER** use `<xsl:text><![CDATA[<SLNO>]]></xsl:text>` to output XML elements. Ever. This is just bad and wrong (and ugly at that, but ugly isn't even an argument here).
*   Do not use `<xsl:for-each>`. Use `<xsl:template>`/`<xsl:apply-templates>`
*   You can use `translate()` to your advantage, see below. **WARNING** This shortcut will only work if you have single letter types.
*   Think if you *really* need to upper-case those element names. This does not look like a necessary change to me. Keeping the original case is much easier because you can use the [identity template](http://en.wikipedia.org/wiki/Identity_transform). Also see [Dimitre's answer](https://stackoverflow.com/a/11293961/18771).

This stylesheet:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
  <xsl:output indent="yes" />

  <xsl:template match="root">
    <ROOT>
      <xsl:apply-templates select="entry" />
    </ROOT>
  </xsl:template>

  <xsl:template match="entry">
    <ENTRY>
      <SLNO>
        <xsl:value-of select="
          count(
            (. | preceding-sibling::entry)[not(type and translate(type, 'EKXY', '') = '')]
          )
        " />
      </SLNO>
      <xsl:apply-templates select="value" />
    </ENTRY>
  </xsl:template>

  <xsl:template match="value">
    <VALUE>
      <xsl:value-of select="." />
    </VALUE>
  </xsl:template>
</xsl:stylesheet> 
```

produces:

```
<ROOT>
  <ENTRY>
    <SLNO>1</SLNO>
    <VALUE>111</VALUE>
  </ENTRY>
  <ENTRY>
    <SLNO>1</SLNO>
    <VALUE>222</VALUE>
  </ENTRY>
  <ENTRY>
    <SLNO>1</SLNO>
    <VALUE>333</VALUE>
  </ENTRY>
  <ENTRY>
    <SLNO>2</SLNO>
    <VALUE>444</VALUE>
  </ENTRY>
  <ENTRY>
    <SLNO>3</SLNO>
    <VALUE>555</VALUE>
  </ENTRY>
  <ENTRY>
    <SLNO>4</SLNO>
    <VALUE>666</VALUE>
  </ENTRY>
</ROOT> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:16:01.473

在你的支票上

```
(TYPE != 'X') and (TYPE != 'E') 
```

您需要为没有 TYPE 节点的 ENTRY 节点包含一个“OR”语句

就像是

```
((TYPE != 'X') and (TYPE != 'E')) or count(TYPE) = 0 
```

# objective-c - b2Body-线性脉冲

> ID：11293376
> 
> 赞同：0
> 
> 时间：2012-07-02T12:07:04.190
> 
> 标签：objective-c, cocos2d-iphone, box2d

在我的“Bricks Breaker”游戏中，我将冲动 b2Vec2(2,15) 传递给 b2Body（球）。这时候body就到了屏幕上边界的尽头，但是速度太快，用户无法正常播放。如果我将脉冲作为 b2Vec2(8,8)，球的速度会降低，但球不会到达顶部的尽头。

我只是想我应该如何减慢球的速度，并且它也应该到达顶部边界？

下面是代码：

```
 b2Vec2 force = b2Vec2(3,15);
 b2Vec2 pos = ballBody->GetPosition();
 ballBody->ApplyLinearImpulse(force, b2Vec2(pos)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:29:32.993

```
x(t) = x0 + v.x * t; (1)
y(t) = y0 + v.y * t - g * t * t; (2) 
```

如果您需要 y(t) 大于 h - 求解`(2) >= h`以找到初始垂直速度 vy

更简单的方法：

`max_h = (v.y * v.y) / (2 * g)`

你现在可以找到最小的`v.y`了。

# python - Django：捕获完整性错误并使用模板显示自定义消息

> ID：11293380
> 
> 赞同：87
> 
> 时间：2012-07-02T12:07:15.713
> 
> 标签：python, django

在我的 django 驱动的应用程序中，只有一种明显的情况会出现“IntegrityError”。
那么，我如何才能捕获该错误并使用模板显示消息？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-07-02T12:12:12.983

只需使用try and catch。

```
from django.db import IntegrityError
from django.shortcuts import render_to_response

try:
    # code that produces error
except IntegrityError as e:
    return render_to_response("template.html", {"message": e.message}) 
```

如果您愿意，可以使用模板中的消息。

编辑

感谢[Jill-Jênn Vie](https://stackoverflow.com/users/827989/jill-j%C3%AAnn-vie)，您应该使用`e.__cause__`，[如此处所述](https://docs.djangoproject.com/en/dev/ref/exceptions/#database-exceptions)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-12T01:50:01.140

如果您在`CreateView`mixin 中使用基于类的视图，则需要`try`调用超类的`form_valid`，例如：

```
from django.db import IntegrityError
...
class KumquatCreateView(CreateView):
    model = Kumquat
    form_class = forms.KumquatForm
    ...
    def form_valid(self, form):
        ...
        try:
            return super(KumquatCreateView, self).form_valid(form)
        except IntegrityError:
            return HttpResponse("ERROR: Kumquat already exists!") 
```

当然，您可以使用模板`render_to_response`等来使输出更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T12:15:48.443

最简单的解决方案：编写一个`process_exception`仅捕获 IntegrityError 并使用呈现的模板返回 HttpResponse 的中间件实现，并确保此中间件位于默认错误处理中间件之后，以便在之前调用它（参见[https://docs.djangoproject.com/en /dev/topics/http/middleware/#process-exception](https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-exception)了解更多）。

现在，如果我是你，我不会假设“只有一个明显的情况会出现“IntegrityError””，所以我强烈建议你在中间件中记录异常（并发送电子邮件警报）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-24T17:27:51.457

我会用 ModelForm 验证它。例如：

你有模型：

```
class Manufacturer(models.Model):
    name = models.CharField(default='', max_length=40, unique=True) 
```

和模型形式：

```
class ManufacturerForm(forms.ModelForm):

    def clean(self):
        cleaned_data = super(ManufacturerForm, self).clean()
        name = cleaned_data.get('name')
        if Manufacturer.objects.filter(name=name).exists():
            raise forms.ValidationError('Category already exists')

    class Meta:
        model = Manufacturer 
```

在这种情况下，当您提交唯一的名称时。您将在 IntegrityError 之前收到验证错误。“类别已存在”消息将显示在模板中的表单中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-24T08:31:34.710

我是这样做的

```
from django.db import IntegrityError
from django.shortcuts import render

from .models import Person
from .forms import PersonForm

class PersonView(View):

def get(self, request):
    pd = PersonForm()
    return render(request, "app1/my_form.html", context={ 'form': pd })

def post(self, request):
    pd = PersonForm(request.POST)

    if pd.is_valid():
        name = pd.cleaned_data['name']
        age = pd.cleaned_data['age']
        height = pd.cleaned_data['height']

        p = Person()
        p.name = name
        p.age = age
        p.height = height
        try:
            p.save()
        except IntegrityError as e:
            e = 'this data already exists in the database'
            return render(request, "app1/my_form.html", context={ 'form': pd, 'e': e})

        context = {
        'person': {
            'name': name,
            'age': age,
            'height': height,
        },
        'form': pd
        }

    else:
        print("Form is invalid")
        context = { 'form': pd }

    return render(request, "app1/my_form.html", context=context) 
```

在模板中，我可以访问错误为 {{ e }}

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-12-17T22:28:03.110

只需导入 IntegrityError

```
from django.db import IntegrityError 
```

并在 try/Except 中使用它

```
try:
    //Do what is needed to be done
 except IntegrityError as e:
    //return what is supposed to be returned 
```

谢谢@Soren 我刚刚编辑了我的答案

# java - G1 GC 和 trove 库导致 JVM 崩溃

> ID：11293384
> 
> 赞同：9
> 
> 时间：2012-07-02T12:07:26.173
> 
> 标签：java, jvm-crash, trove4j

我们有以下问题：在我们的*一些*Linux 机器上，使用 trove 库和 G1 GC 的 Java 应用程序将很快崩溃，并显示以下类型的消息：

```
A fatal error has been detected by the Java Runtime Environment:

 SIGSEGV (0xb) at pc=0x00002aaaaaef81d1, pid=31063, tid=1141000512

JRE version: 6.0_29-b11
Java VM: Java HotSpot(TM) 64-Bit Server VM (20.4-b02 mixed mode linux-amd64 )
Problematic frame:
J  gnu.trove.impl.hash.TObjectHash.insertKey(Ljava/lang/Object;)I 
```

这里让我印象深刻的是有问题的框架，它总是一样的。我已经习惯了这里出现的一些库，但从来没有真正的 Java 代码。奇怪的是，一些应该具有相同设置的机器不受影响。在 Windows 上，我也从未见过这种情况。该问题在最近的 Java 7 版本中仍然存在。从 G1 GC 切换到任何其他 GC 可以立即解决问题。我们使用 Maven 解决的 trove 库，在那里尝试了几个版本，包括 3.0.3 - 总是同样的问题。

有谁知道这可能是什么原因？任何已知的 G1 GC 错误？trove 是否以可能产生此问题的特殊方式编译？

更新：不同的应用程序，不同的服务器，最新的 Java (7u5)，类似的问题：

```
A fatal error has been detected by the Java Runtime Environment:

SIGSEGV (0xb) at pc=0x00002aadb7a38093, pid=14100, tid=46925573367184

JRE version: 7.0_05-b05
Java VM: Java HotSpot(TM) 64-Bit Server VM (23.1-b03 mixed mode linux-amd64 compressed oops)
Problematic frame:
J  gnu.trove.map.hash.THashMap.put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; 
```

同样，切换到 G1 以外的 GC 会有所帮助。保留G1但去掉Trove库，问题也会消失。不幸的是，我无法创建最小的测试套件，因此很难提交合理的错误报告。关于原因的任何想法，或者任何可以帮助我构建测试套件的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:13:50.453

G1GC 在 Java 6 中还没有“准备好使用”；只有在 Java 7u4 中，它才最终成为生产就绪的。有关它的说明，请参见[http://phosphor-escence.blogspot.com/2012/05/java7u4-enables-g1gc-without.html](http://phosphor-escence.blogspot.com/2012/05/java7u4-enables-g1gc-without.html)，当然还有更多关于 Google 的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T18:59:00.463

看来这确实是一个 JDK 错误，[https://bugs.openjdk.java.net/browse/JDK-8023472](https://bugs.openjdk.java.net/browse/JDK-8023472)，由 Java 7 update 65+ 修复。

# ruby - site_prism 是否允许使用 CSS 以外的其他选择器？

> ID：11293386
> 
> 赞同：1
> 
> 时间：2012-07-02T12:07:31.680
> 
> 标签：ruby, capybara, site-prism

我正在研究允许我沿 Capybara 使用页面对象模式的宝石。我发现了 site_prism 并且看起来很有希望。

我的问题是，有没有办法用 CSS 以外的选择器定义元素？像 Xpath、Dom，也许只是元素的 id 等等。

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:43:00.757

**更新：**从 SitePrism 2.1 开始，可以使用 XPath 表达式来查找元素和部分，以及 CSS 选择器。

=====

目前只有 CSS。不过，我将来可能会改变这一点。

# vb.net - [control].ValueChanged 事件在表单创建期间调用 vb.net

> ID：11293389
> 
> 赞同：0
> 
> 时间：2012-07-02T12:07:44.840
> 
> 标签：vb.net, winforms, events, tcp

我遇到了一个非常令人沮丧的问题，我真的希望有人可以帮助我。我制作了一个通过 TCP/IP 命令控制另一个应用程序的应用程序。（我对应用程序的功能没有任何问题。）我的程序需要做的一件事是在其他应用程序中更改不同字段的值后立即更新它们。为此，我使用

```
Sub ControlName_ValueChanged(sender As Object, e As System.EventArgs) Handles _
    ControlName.ValueChanged 

sendData(dataToSend,destination)

End Sub 
```

格式。该子例程涉及 TCP/IP 事务，直到用户在我的应用程序上手动启动它之后才会启动。我遇到的问题是，当我的启动表单加载时，它会立即调用所有`*.ValueChanged`子例程，从而有效地锁定我的应用程序。有人可以解释为什么会发生这种情况以及如何阻止它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:12:18.177

如果你想停止 UI 阻塞，你可以让`sendData`实现使用异步调用（通常实现为`BeginSend`/`EndSend`类型上的方法对。

我不确定为什么事件处理程序会立即执行此操作（可能是因为在创建对象后，在注册事件处理程序后该值设置为某个默认值）。

阻止它的一种方法是在加载表单*后*`ValueChanged`手动连接事件处理程序，而不是通过 Designer.cs 文件在设计器中执行此操作。

 *或者，有一个`suppressEvents`bool 标志，您可以打开和关闭它，并修改您的方法以收听标志：

[我不知道这是否是有效的 VB，我使用 C#，但你明白了。]

```
Sub ControlName_ValueChanged(sender As Object, e As System.EventArgs) Handles _
    ControlName.ValueChanged 

If suppressEvents Is True Then Return

sendData(dataToSend,destination)

End Sub 
```*

# iphone - 添加外部库时找不到 .h 文件

> ID：11293391
> 
> 赞同：1
> 
> 时间：2012-07-02T12:07:45.993
> 
> 标签：iphone, header-files, libraries

在将 Electro Server 库添加到我现有的项目（启用 ARC）时，它给了我编译错误，`.h file not found`对于库中的几个文件。

因此，项目本身不会被编译。

以下是我到目前为止尝试过的事情，

*   清理项目及其所有目标。

*   从目标中删除了相关的 .m 文件并再次将它们添加到目标中。

*   `ARC`对我添加到项目中的所有外部文件禁用。

*   检查所有文件是否位于它们需要的位置。

我还会错过什么？任何想法，任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:09:20.657

您是否填写了标题搜索路径？

![在此处输入图像描述](../Images/3e8a63b5bef15e7b463c1a0a65d54213.png)

# javascript - 如何将字符串转换为 JavaScript 中的函数？

> ID：11293393
> 
> 赞同：0
> 
> 时间：2012-07-02T12:07:48.323
> 
> 标签：javascript, jquery, jquery-plugins

我有以下代码用于制作简单的模板引擎。html页面如下：-

```
<ns tmp="red"></ns>
<ns tmp="blue"></ns> 
```

另一方面，我在 JQuery 插件中有一个 JavaScript，它读取标签，然后获取`tmp` 现在的属性，我想接收字符串的值，然后将其转换为函数，以便调用预定义的值在对象内部，但字符串到函数的转换不起作用。我在堆栈溢出中提到了一些问题，但没有用。然后是我在下面提到的 JQuery 代码。

```
(function($){

    /*Collection of the template data*/
    var k=template();
    /*This retrieves all the custom tags and gets the template
    property to point to.*/
    var templateArray=$('ns');
    templateArray.each(function(){
    var template=$(this).attr('tmp');
    var funcName=window[template]();//This does not work
    alert(l());
    });
})(jQuery);

    function template(){
        var t={
            blue:function(){
            return "Hello";
            },
             red:function(){
            return "ff";
            }
        };
        return t;
    } 
```

请建议如何相处。我在小提琴上也有这个。随意编辑，以便我能够以某种方式调用对象内部的函数。谢谢 Fiddle Link [FIDDLE LINK](http://jsfiddle.net/shivkumarganesh/YS9Gs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:22:33.927

正如评论中还指出的那样，您要执行的函数不是对象的`window`一部分，而是对象的一部分`template`，因此您需要从适当的位置获取它们。

此外，对局部变量使用与现有函数相同的名称可能会起作用，但根本不是一个好主意，您最好使用专有名称。

工作代码：

```
templateArray.each(function(){
    var tmp = $(this).attr('tmp');
    var funcName=k[tmp];
    var result = funcName();
    alert(result);
}); 
```

[更新了小提琴](http://jsfiddle.net/YS9Gs/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:33:14.260

在 javascript 中，对象和数组是一回事。所以`template.red`和`template['red']`都是一回事。

我建议将函数放入数组中。这样，您甚至可以在运行时扩展它。

[http://jsfiddle.net/tricki/YS9Gs/10/](http://jsfiddle.net/tricki/YS9Gs/10/)

# android - @SuppressLit(({"ParseError","ParseError"})

> ID：11293395
> 
> 赞同：2
> 
> 时间：2012-07-02T12:08:00.713
> 
> 标签：android

我是android开发的新手。我想知道，当我尝试删除错误时，我的代码中会出现一行，即：

```
@SuppressLint({ "ParserError", "ParserError", "ParserError", "ParserError", "ParserError", "ParserError", "ParserError", "ParserError", "ParserError" }) @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Thread timer = new Thread(){
        @SuppressLint("ParserError") public void run(){
            try{
                sleep(5000);
            }
            catch(InterruptedException e){
                e.printStackTrace();
            }
            finally{
                Intent intent = new Intent("com.example.basiccounter.COUNTER");
                startActivity(intent);
            }
        }
    };
    timer.start();
} 
```

}

我想知道 @SuppressLint({}) 代码行的含义以及为什么会这样？以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T13:10:58.637

我有同样的问题。这是用于 android 的新更新的 Lint 解析器有一些问题。我必须说，当您复制粘贴很多行或更新而不经常保存时，它有一些错误。

为了克服这个问题，我没有添加这些警告，我只是根据 Lint 剪切“有问题”的行，保存以免出现构建错误，然后重新粘贴，警告就消失了。我找不到解决这个问题的模式，也没有标准的解决方案。我想它应该对你有用。试试看

更新：我找到了一个不涉及复制粘贴代码的新解决方案。如果您几乎可以确定您的代码是正确的并且不应该有 Lint 标记，只需单击警告按钮并选择“清除所有 lint 标记”。然后建成，你很高兴。

如果问题仍然存在，那么 lint 标记确实在某种程度上很有用，而且它不是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:20:45.047

注释是您可以将元数据添加到代码中的一种方式。例如，不应再使用方法（`@Deprecated`）。您可以将注释视为一种带有信息的标志。另一个程序可以发现这些标志并基于它执行逻辑。例如，注释大量用于`ORM`with`JPA`来创建数据库模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:19:26.837

在 ADT 的错误跟踪器上有一个关于该问题的问题：[这里](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=lint%20parse&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=34307)

给它加星标或在评论中添加有趣的信息（如果有的话）。

# android - 响应选择器的自定义可检查视图

> ID：11293399
> 
> 赞同：23
> 
> 时间：2012-07-02T12:08:11.510
> 
> 标签：android, view, custom-view

我有一组`FrameLayout`我想要检查/可选择的，

也就是说，单击后，我希望`FrameLayout`显示为`checked`- 再次按下时，我希望它变为 un `checked`。更重要的是，我希望通过使用`<selector>`.

我似乎无法让这个工作 - 我不确定我错过了什么：

```
public class CheckableFrameLayout extends FrameLayout implements Checkable {
    private boolean mChecked = false;
    public CheckableFrameLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setChecked(boolean checked) {
        mChecked = checked;
        refreshDrawableState();
    }

    public boolean isChecked() {
        return mChecked;
    }

    public void toggle() {
        setChecked(!mChecked);
    }
} 
```

的布局`CheckableFrameLayout`：

```
<com.test.view.CheckableFrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/selector_horizontal"
    android:clickable="true" > 
```

支持它的选择器（selector_horizo​​ntal.xml）：

```
<item android:drawable="@drawable/selector_vertical_selected" android:state_pressed="false" android:state_checked="true"/>  
<item android:drawable="@drawable/selector_vertical_pressed" android:state_pressed="true" android:state_checked="false"/>
<item android:drawable="@drawable/selector_vertical_normal" android:state_pressed="false" android:state_checked="false"/> 
```

使用上面的代码，“state_pressed”工作正常，但视图本身没有被检查（不是`Checkable`通过调试发现的代码被调用）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-02T13:36:10.953

将以下代码添加到`Checkable`类允许选择器工作：

```
private static final int[] CheckedStateSet = {
    android.R.attr.state_checked,
};

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked()) {
        mergeDrawableStates(drawableState, CheckedStateSet);
    }
    return drawableState;
}

@Override
public boolean performClick() {
    toggle();
    return super.performClick();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T15:09:56.957

这是 CheckableButton 的完整工作示例。它也适用于 Android 4.2。

```
public class CheckableButton extends Button implements Checkable {

    private static final int[] CheckedStateSet = { android.R.attr.state_checked };

    private boolean mChecked = false;

    public CheckableButton(Context context) {
        super(context);
    }

    public CheckableButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CheckableButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean isChecked() {
        return mChecked;
    }

    @Override
    public void setChecked(boolean checked) {
        mChecked = checked;
        refreshDrawableState();
    }

    @Override
    public void toggle() {
        mChecked = !mChecked;
        refreshDrawableState();
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CheckedStateSet);
        }
        return drawableState;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:19:24.677

尝试使用`android:state_activated`.

```
<item android:drawable="@color/HighlightColor"      android:state_activated="true"/> 
```

从[文档](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html#attr_android%3astate_activated)：

> StateListDrawable 的状态值，在视图或其父视图已“激活”时设置，这意味着用户当前已将其标记为感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:38:45.020

尝试重新排序标签中的`selector_horizontal.xml`这些是从上到下评估的。在您的情况下，似乎`android:state_pressed="false" or android:state_pressed="true"`应用了任何一个并且评估永远不会到达第三行，`android:state_checked="true"`尝试将第一行移到最后：

```
<item android:drawable="@color/HighlightColor" android:state_pressed="true"/>
<item android:drawable="@color/selected_color" android:state_checked="true"/>
<item android:drawable="@android:color/transparent" android:state_pressed="false"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T07:14:29.230

除了上面 Graeme 的回答之外，还对 toggle() 进行以下修改

```
@Override
public void toggle() {
    mChecked = !mChecked;
    refreshDrawableState();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T06:28:17.127

Graeme 的解决方案在 Android 4.0.3 下对我不起作用（我想它在 4.0 下也不起作用）。相反，您可以更改`state_checked`为`state_activated`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/activated_image" android:state_pressed="false" android:state_activated="true" />
    <item android:drawable="@drawable/not_activated_image" android:state_pressed="false" android:state_activated="false"/>

</selector> 
```

并`setActivated`在您的内部使用`setChecked`：

```
@Override
public void setChecked(boolean checked) {
    mChecked = checked;
    setActivated(checked);
} 
```

仅此而已。`onCreateDrawableState`这里不需要实现。

# ios - 为 iPad 应用程序添加外部键盘快捷键？

> ID：11293404
> 
> 赞同：4
> 
> 时间：2012-07-02T12:08:20.003
> 
> 标签：ios, ipad, keyboard, keyboard-shortcuts, external

我很想知道是否有办法在 iPad 应用程序上支持外部键盘事件？我的应用程序支持 Command-（数字键）在选项卡之间切换会很有意义。

我一直在网上找教程，但目前还没有找到。。

# asp.net - 定期刷新asp控件

> ID：11293408
> 
> 赞同：0
> 
> 时间：2012-07-02T12:08:31.877
> 
> 标签：asp.net, refresh, global-asax

我在 WCF 服务项目中有一个 aspx Web 表单，该表单提供有关该服务的状态报告。目前我有一个刷新按钮，但我想自动定期刷新。

我尝试了两种方法：

1.  `<head>`内部使用的 javascript`setInterval()`并`Page_Load`以`RegisterStartupScript`.
2.  一个`Systems.Timers.Timer`inside `Page_Load`，做按钮点击会做的事情。

由于明显的范围问题，我没有得到（1）正确，而且我显然误解了它应该如何工作。目前该脚本只是发出警报，我无法进一步了解。

我没有得到（2）正确，虽然它似乎应该工作，因为在计时器函数中放置一个断点会显示正确的值，但页面上的表单标签不会更新。

webform.aspx 如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Manage.aspx.cs" Inherits="MyServiceWS.ManageForm" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Manage</title>
    <script type="text/javascript">
        // method (1)
        RefreshScript = function ()
        {
            setInterval(function () { alert("How to call the Refresh code?"); }, 5000);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <p>
                Synchronisation status: 
                <asp:Label ID="SyncStatusLabel" runat="server" />
                <p>
                <asp:Button ID="RefreshButton" runat="server" Text="Refresh" 
                    onclick="RefreshButton_Click" />
                <p>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

webform.aspx.cs 中的 c# 代码如下所示。这是所需的刷新代码所在的位置。当然，我一次只尝试一种方法，为了清楚我一直在尝试什么，它们都没有在下面注释。

```
namespace MyServiceWS
{
    public partial class ManageForm : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            // method (1)
            ClientScript.RegisterStartupScript(this.GetType(), "addScript", "RefreshScript()", true);

            if (Page.IsPostBack)
                Refresh();
            else
            { // method (2)
                var myTimer = new System.Timers.Timer();
                myTimer.Elapsed += new ElapsedEventHandler(TimedRefreshEvent);
                myTimer.Interval = 5000;
                myTimer.Start();
            }
        }
        protected void RefreshButton_Click(object sender, EventArgs e)
        {
            Refresh();
        }

        private void TimedRefreshEvent(object source, ElapsedEventArgs e)
        {
            Refresh();
        }

        private void Refresh()
        {
            SyncStatusLabel.Text = Global.StatusDescription;
        }
    }
} 
```

文件`Global.asax`包含静态字符串变量`StatusDescription`，该变量正确包含服务在其他地方填充的状态。

我很困惑，这两种方法是否正确，我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:51:26.310

改变这个：

```
RefreshScript = function () 
        { 
            setInterval(function () { alert("How to call the Refresh code?"); }, 5000); 
        } 
```

到：

```
function RefreshScript()
{ 
     setInterval(function () { alert("How to call the Refresh code?"); }, 5000); 
} 
```

看看是否效果更好。

您也可以使用计时器方法，但不能通过 System.Timers.Timer；使用[ASP.NET AJAX 计时器控件](http://www.asp.net/ajax/documentation/live/tutorials/IntroToTimerControl.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:50:38.103

我设法通过将工具箱中的 AJAX 计时器添加到`UpdatePanel`并使用它的`OnTick`属性来调用来解决此问题`RefreshButton_Click`

按照此处的说明进行操作[。](http://msdn.microsoft.com/en-us/library/cc295400.aspx)

# entity-framework-4.1 - TPH 继承外键的实体框架代码优先在数据库表中添加了附加列

> ID：11293409
> 
> 赞同：1
> 
> 时间：2012-07-02T12:08:32.770
> 
> 标签：entity-framework-4.1, entity

我在使用 TPH 时遇到了 EF Code First 的问题。我在表中得到了两个不在模型中的列。

我有一个类结构如下：

```
 public class TestBase
    {
        public int Id { get; set; }

        public string Name { get; set; }
        [ForeignKey("TestMaster")]
        public string TestMaster_Id { get; set; }

        public TestMaster TestMaster { get; set; }

    }

    public class TestInherit1 : TestBase
    {
        public string Val1 { get; set; }
    }

    public class TestInherit2 : TestBase
    {
        public string  val2 { get; set; }
    }

    public class TestMaster
    {
        [Key]
        public string Id { get; set; }

        public virtual ICollection<TestInherit1> Inherit1List { get; set; }
        public virtual ICollection<TestInherit2> Inherit2List { get; set; }
    } 
```

在 DBContext 我有以下内容：

```
 public DbSet<TestMaster> TestMaster
    {
        get;
        set;
    }

    public DbSet<TestBase> TestBase
    {
        get;
        set;
    }

    [NotMapped]
    public DbSet<TestInherit1> TestInherit1
    {
        get;
        set;
    }

    [NotMapped]
    public DbSet<TestInherit2> TestInherit2
    {
        get;
        set;
    } 
```

以下是 EF 生成的表结构：

```
[TestBases]

    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](max) NULL,
    [TestMaster_Id] [nvarchar](128) NULL,
    [Val1] [nvarchar](max) NULL,
    [val2] [nvarchar](max) NULL,
    [Discriminator] [nvarchar](128) NOT NULL,
    [TestMaster_Id1] [nvarchar](128) NULL,
    [TestMaster_Id2] [nvarchar](128) NULL

[TestMasters](
    [Id] [nvarchar](128) NOT NULL 
```

如果您查看 TestBases 表，则会生成两个额外的列 TestMaster_id1 和 TestMaster_Id2 ，它们没有在类中定义。EF 正在插入这两列。我已经在 TestMaster_Id 列上定义了外键。我究竟做错了什么？。我不想要这两列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:56:43.320

您的表包含更多未定义的列：`Val1`，如果您不想映射派生类型，也不应该映射`Val2`。`Discriminator`但是，如果您不映射这些类型，您将永远无法从 EF 获取这些实例，并且您将永远无法将这些实例存储到 EF。

您的`NotMapped`属性使用不正确。它必须在实体类型或实体类型内的属性上声明。此外，如果您不想映射派生类型，则不应`DbSet`为它们创建属性。

该属性的正确用法是：

```
[NotMapped]
public class TestInherit1 : TestBase
{
    public string Val1 { get; set; }
} 
```

或者：

```
[NotMapped]
public virtual ICollection<TestInherit1> Inherit1List { get; set; } 
```

目前您的实体已被映射，这也是您获得两个新外键的原因 - 您将导航属性定义为派生类型。它们中的每一个都需要自己的外键，因为 EF 无法重新定义派生类中父属性的映射。

如果您只想在父实体中声明单个外键，则必须只为父实体定义单个导航属性：

```
public virtual ICollection<TestBase> TestList { get; set; } 
```

# c - mktime 显示不一致的输出

> ID：11293422
> 
> 赞同：1
> 
> 时间：2012-07-02T12:09:35.243
> 
> 标签：c, time, mktime

在尝试编写返回比给定时间少 24 小时的代码时，`mktime()`显示不一致的输出。我计算它类似于这样：`current_time(GMT) - 86400`它应该返回正确的值。我们需要做的就是根据输入的时间进行计算；我们过去常常`mktime()`更改时间并获取 GMT 时间，然后进行常规计算。我在下面包含了我的代码。

```
#include <stdio.h>
#include <time.h>

int main()
{
    time_t currentTime, tempTime;
    struct tm *localTime;

    time(&currentTime);
    //localTime = localtime(&currentTime);
    localTime = gmtime(&currentTime); //get the time in GMT as we are in PDT

    printf("Time %2d:%02d\n", (localTime->tm_hour)%24, localTime->tm_min);
    localTime->tm_hour = 19; // Set the time to 19:00 GMT
    localTime->tm_min = 0;
    localTime->tm_sec = 0;
    tempTime = mktime(localTime);
    //tempTime = mktime(localTime) - timezone;

    printf("Current time is %ld and day before time is %ld\n", currentTime, (currentTime - 86400));
    printf("Current timezone is %ld \n", timezone);

    printf("New time is %ld and day before time is %ld\n",tempTime, (tempTime - 86400));
} 
```

但是当我们检查输出时，它在调用 call 后返回不正确`mktime()`。以下是上述程序的输出。

```
$ ./a.out
Time 11:51
Current time is 1341229916 and day before time is 1341143516
New time is 1341284400 and day before time is 1341198000
$ ./print_gmt 1341229916
Mon Jul  2 11:51:56 2012
$ ./print_gmt 1341143516
Sun Jul  1 11:51:56 2012
$ ./print_gmt 1341284400
Tue Jul  3 03:00:00 2012
$ ./print_gmt 1341198000
Mon Jul  2 03:00:00 2012
$ date
Mon Jul  2 04:52:46 PDT 2012 
```

现在，如果我们取消注释减去时区的行（存在于 time.h 中），那么输出与预期的一样。以下是上述程序中时区的值

```
$ ./a.out
. . .
Current timezone is 28800
. . . 
```

那么为什么会有这种不一致`mktime()`的行为，尽管手册页没有提到时区的这种调整。在进行此类转换时，我们是否缺少某些东西？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:35:01.710

我认为问题出在这里：

[`The mktime() function shall convert the broken-down time, expressed as local time, in the structure pointed to by timeptr, into a time since the Epoch value...`](http://pubs.opengroup.org/onlinepubs/009604599/functions/mktime.html)

注意的话`local time`。C标准在描述中也有它们`mktime()`：

`The mktime function converts the broken-down time, expressed as local time, in the structure pointed to by timeptr into a calendar time value with the same encoding as that of the values returned by the time function.`

`gmtime()`，另一方面，以 GMT/UTC 而非您的时区生成时间：

[`The gmtime() function shall convert the time in seconds since the Epoch pointed to by timer into a broken-down time, expressed as Coordinated Universal Time (UTC).`](http://pubs.opengroup.org/onlinepubs/009604599/functions/gmtime.html)

**编辑**：如果您只想要 GMT/UTC 前一天的 19:00，您可以这样做：

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    time_t currentTime;
    struct tm *brokenDownTime;

    time(&currentTime);

    // get the time in GMT as we are in PDT
    brokenDownTime = gmtime(&currentTime);
    printf("Current Time (GMT): %2d:%02d\n"
           "  seconds since Epoch: %ld\n", 
           brokenDownTime->tm_hour,
           brokenDownTime->tm_min,
           (long)currentTime);

    // "Unwind" time to 0:00:00 (assuming time_t is an integer):
    currentTime /= 24 * (time_t)3600;
    currentTime *= 24 * (time_t)3600;

    brokenDownTime = gmtime(&currentTime);
    printf("Time at the beginning of the current GMT day: %2d:%02d\n"
           "  seconds since Epoch: %ld\n", 
           brokenDownTime->tm_hour,
           brokenDownTime->tm_min,
           (long)currentTime);

    // Add 19 hours:
    currentTime += 19 * (time_t)3600;

    brokenDownTime = gmtime(&currentTime);
    printf("Time at 19:00:00 of the current GMT day: %2d:%02d\n"
           "  seconds since Epoch: %ld\n", 
           brokenDownTime->tm_hour,
           brokenDownTime->tm_min,
           (long)currentTime);

    // Subtract 1 day:
    currentTime -= 24 * (time_t)3600;

    brokenDownTime = gmtime(&currentTime);
    printf("Time at 19:00:00 of the previous GMT day: %2d:%02d\n"
           "  seconds since Epoch: %ld\n", 
           brokenDownTime->tm_hour,
           brokenDownTime->tm_min,
           (long)currentTime);

    return 0;
} 
```

输出：

```
Current Time (GMT): 13:23
  seconds since Epoch: 1341235429
Time at the beginning of the current GMT day:  0:00
  seconds since Epoch: 1341187200
Time at 19:00:00 of the current GMT day: 19:00
  seconds since Epoch: 1341255600
Time at 19:00:00 of the previous GMT day: 19:00
  seconds since Epoch: 1341169200 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:58:55.503

您没有说明您是在使用 POSIX(-like) 目标还是一些古怪的系统，但在前一种情况下，您可以使用 POSIX 公式将分解时间转换为`time_t`：

```
tm_sec + tm_min*60 + tm_hour*3600 + tm_yday*86400 +
    (tm_year-70)*31536000 + ((tm_year-69)/4)*86400 -
    ((tm_year-1)/100)*86400 + ((tm_year+299)/400)*86400 
```

来源： http: [//pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:39:13.753

`mktime(3)`使用*当前*时区执行转换。这有点神秘地写在[标准](http://pubs.opengroup.org/onlinepubs/007904875/functions/mktime.html)中：

> 本地时区信息应设置`mktime()`为`tzset()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T12:44:13.860

[mktime 规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/mktime.html)声明其参数表示“分解时间，**表示为本地时间**”。因此，您传递给 mktime 的任何内容都必须是当地时间，而不是 GMT。您的变量名称中`localTime`有`local`，但实际上是从 获得的`gmtime`，因此其结果描述了**GMT**中的当前时间。将其传递给`mktime`是不一致的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T11:12:39.197

在某些系统上，还有一个[timegm](http://man7.org/linux/man-pages/man3/timegm.3.html)函数应该做正确的事情。
我刚刚在 Linux 上进行了检查，它产生了正确的值（例如 timegm (gmtime (time)) == time）。

[以下是](https://stackoverflow.com/a/22557778/257568)如何在 Windows 中使用它。
这是一个[类似的答案](https://stackoverflow.com/a/4682556/257568)。

# android - Android SDK 管理器 GCM 库

> ID：11293424
> 
> 赞同：8
> 
> 时间：2012-07-02T12:09:39.337
> 
> 标签：android, google-cloud-messaging

我刚刚看到谷歌弃用了 C2DM 并用 GCM 替换它。在他们的[网站上](http://developer.android.com/guide/google/gcm/gs.html#libs)，他们一步一步地向我们描述了安装 GCM 库所需的方法，以开始实施新的 android 推送通知（或云消息传递，正如他们的名字）。

在“Install the Helper Libraries”上写着：

> 要执行以下部分中描述的步骤，您必须首先安装帮助程序库（参考：客户端和服务器）。从 SDK 管理器中，**安装 Extras > Google Cloud Messaging for Android Library**。这会在 YOUR_SDK_ROOT/extras/google/ 下创建一个 gcm 目录，其中包含以下子目录：gcm-client、gcm-demo-appengine、gcm-demo-client、gcm-demo-server 和 gcm-server。

我从 Eclipse 中打开了 SDK 管理器，但在 Extras 下除了“英特尔硬件加速执行管理器”之外什么都没有。我没有看到别的东西。

如何在 SDK 管理器中查找/添加/安装 GCM？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-16T21:11:39.153

尝试了很多时间后我得到的最好和最简单的方法

转到此链接

**[https://dl-ssl.google.com/android/repository/addon.xml](https://dl-ssl.google.com/android/repository/addon.xml)**

在本页的末尾，您将找到 `Google cloud messaging for android`带有以下行的部分

```
<sdk:url>gcm_r03.zip</sdk:url> 
```

只需替换上面提到的 url 中的 addon.xml `by gcm_r03.zip`，最终的 url 将如下所示

**[https://dl-ssl.google.com/android/repository/gcm_r03.zip](https://dl-ssl.google.com/android/repository/gcm_r03.zip)**

下载完成后解压缩 zip 文件，您将获得三个目录，分别命名为客户端、服务器端和示例。

现在打开您的 SDK 文件夹并创建一个名为“extras/android”的文件夹并将所有三个文件夹粘贴到此处完成！

现在每当使用添加外部 jar 添加 gcm.jar 在项目类路径中创建一个新项目时。

我已经解释了整个过程，因为同样可以用来下载其他 SDK 的东西，比如平台工具和平台作为 zip，这样你就可以在任何地方没有互联网连接的情况下配置 eclipse。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-21T09:08:47.307

只需打开您的 SDK 并点击`Obsolate`下方即可找到`Google Cloud Messaging for Android Library`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-02T10:16:03.147

以上对我不起作用。我尝试过这种方式...转到sdk管理器，检查过时... gcm库会来。这个对我有用..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T15:05:41.470

您必须将 SDK 工具升级到 rev 20 并将 Platform-tools 升级到 rev 12，然后“Google Cloud Messaging for Android Library”才会出现在“Extras”文件夹中。

此外，如果您已经有一个工作 C2DM 项目，您只需要更改 SENDER_ID，而不包括[GCM 库](http://developer.android.com/guide/google/gcm/c2dm.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T10:59:51.713

以前的建议都不适合我。但...

我发现了一些奇怪的东西：如果我从 Eclipse（Windown -> Android SDK manager）启动 SDK 管理器，我看不到所有更新。如果我转到文件系统，在 Windows 资源管理器中，然后从那里启动 SDK 管理器，我有一个更大的可用包列表。

奇怪但对我有用！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T11:48:01.837

是的，Zelter Ady 是对的。我也遇到了同样的问题，但是当我从 Windows 资源管理器（在我的 Windows 机器上）C:\Program Files\Android\android-sdk 访问 SDK 管理器时，我可以获得更大的更新列表，其中 SDK 4.1（API 16 ) 除了 Extras->Google cloud Messaging for Android 之外也有。我无法从 SDK Manager 的 Eclipse 插件中使用 API 16 更新 SDK。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-28T05:39:12.870

对于 Android Studio 1.5 版：

转到工具 -> Android -> SDK -> 在 sdk 管理器中单击下面的 Launch Standalone，它将打开新窗口 -> 检查下面的已过时 -> 安装 Google Cloud Messaging for Android Library

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T09:06:29.237

在 Eclipse 中更新您的 SDK 管理器：帮助 -> 检查更新。安装更新。

# android - Android 设备上的应用程序存储位置

> ID：11293429
> 
> 赞同：0
> 
> 时间：2012-07-02T12:09:51.220
> 
> 标签：android

我`Sample`在 Android 设备上安装了一个应用程序。我安装的应用程序存储在我的 Adroid 设备上的位置（我的应用程序未在 google-play 中获得授权），但我可以看到其他应用程序存储位置路径（这些应用程序已获得 google-play 的授权）。

谢谢。

例如，我安装了一个`Calculator`应用程序。它将存储`/data/calculaot-package-name`在设备中。出于测试目的，我将自己的应用程序安装到 Android 设备上。我在应用程序的存储路径中没有看到它的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T04:04:39.007

从 API 级别 8 开始，您可以允许将应用程序安装在外部存储（例如，设备的 SD 卡）上。这是一个可选功能，您可以使用[android:installLocation](http://developer.android.com/guide/topics/manifest/manifest-element.html#install)清单属性为您的应用程序声明。如果您不声明此属性，您的应用程序将仅安装在内部存储上，而不能移动到外部存储上。

要允许系统在外部存储上安装您的应用程序，请修改清单文件以将[android:installLocation](http://developer.android.com/guide/topics/manifest/manifest-element.html#install)属性包含在元素，其值为“preferExternal”或“auto”。例如：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="preferExternal"
    ... > 
```

如果您声明“preferExternal”，您要求将您的应用程序安装在外部存储上，但系统不保证您的应用程序将安装在外部存储上。如果外部存储已满，系统会将其安装到内部存储上。用户还可以在两个位置之间移动您的应用程序。

如果您声明“auto”，则表明您的应用程序可能安装在外部存储上，但您没有安装位置的偏好。系统将根据几个因素决定在哪里安装您的应用程序。用户还可以在两个位置之间移动您的应用程序。

当您的应用程序安装在外部存储上时：

*   只要在设备上安装了外部存储，就不会影响应用程序的性能。
*   .apk 文件保存在外部存储中，但所有私有用户数据、数据库、优化的 .dex 文件和提取的本机代码都保存在内部设备内存中。
*   存储应用程序的唯一容器使用随机生成的密钥进行加密，该密钥只​​能由最初安装它的设备解密。因此，安装在 SD 卡上的应用程序仅适用于一个设备。
*   用户可以通过系统设置将您的应用程序移动到内部存储。

**警告：**当用户通过系统设置启用 USB 大容量存储与计算机共享文件或卸载 SD 卡时，外部存储将从设备中卸载，并且在外部存储上运行的所有应用程序都会立即终止。

详细信息：[所有安装位置](http://developer.android.com/guide/topics/data/install-location.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:23:25.583

这取决于应用程序是安装到内部存储器还是外部存储器。如果您使用（在您的清单中）`android:installLocation`of`preferExternal`或者`auto`它可能/可能存储在`.android_secure`sdcard 的部分中。否则，它应该位于`/data/app/com.yourpackage`。

如果它存储在安全区域中，您将无法访问它（假设您没有做骇人听闻的事情 - 即使那样我也不确定您是否可以访问它）。

编辑：我应该补充一点，在大多数情况下，您可以将应用程序从应用程序管理器移动到内部存储。如果这是您的应用程序，但您可以指定仅在内部存储上使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:03:33.093

要手动查找，请 adb pull /data/system/packages.xml 并检查它以找到代码路径条目。

要从程序中执行此操作，有一个 api 调用来确定您可以在文档中找到的代码路径。

您可以如何利用这些知识可能因案例和版本而异。

# spotify - 在Spotify中禁用下一个上一个按钮

> ID：11293430
> 
> 赞同：0
> 
> 时间：2012-07-02T12:09:56.230
> 
> 标签：spotify

我希望能够禁用 Spotify 中的“下一个”和“上一个”按钮。我知道这是可能的，因为 soundrop 应用程序已经做到了。

我已经搜索了一下，据我了解，我应该播放上下文为空的曲目或仅包含 1 首曲目的上下文。我一直在测试我能想到的所有可能的解决方案，但它们似乎都不起作用。它们中的大多数实际上会导致在上下文为 null 的情况下播放曲目，但始终启用 Next/Previous 按钮。

如果我按下下一个按钮，播放器最终不会播放任何曲目，并且两个按钮都被禁用......

下面是我的测试应用程序的代码。

```
var sp = getSpotifyApi(1);
var models = sp.require('sp://import/scripts/api/models');
var views = sp.require('sp://import/scripts/api/views');

models.player.observe(models.EVENT.CHANGE, function (o) {
    console.log(['Player Change', o, models.player.context]);
})

$('#play1').click(function () {
    models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
        console.log(["play1", track.name]);
        models.player.play(track, null);
    });
});

$('#play2').click(function () {
    models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
        console.log(["play2", track.name]);
        var p = new views.Player();
        p.play(track, null);
    });
});

$('#play3').click(function () {
    models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
        console.log(["play3", track.name]);
        var pl = new models.Playlist();
        pl.add(track);
        models.player.play(track, pl);
    });
});

$('#play4').click(function () {
    console.log(["play4"]);
    models.player.play("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", null);
});

$('#play5').click(function () {
    models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
        models.player.playTrack(track);
    });
});

$('#play6').click(function () {
    models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
        console.log(["play6", track.name]);
        var pl = new models.Playlist();
        pl.add(track);
        models.player.playTrackWithContext(track, pl, 0);
    });
});

$('#play7').click(function () {
    var l = new models.Link("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef");
    sp.trackPlayer.setContextCanSkipNext(l, false);
    console.log(["play7", models.player, sp.trackPlayer],l);
    models.player.play(l, null);
}); 
```

#play1 的结果：

```
["play1", "Jag är här nu"]
["Player Change", Object, null] 
```

#play2 的结果：

```
["play2", "Jag är här nu"]
["Player Change", Object, null] 
```

#play3 的结果：

```
["play3", "Jag är här nu"]
["Player Change", Object, "spotify:internal:temp_playlist:spotify:app:myapplication@687556942764"] 
```

#play4 的结果：

```
["play4"]
["Player Change", Object, null] 
```

#play5 的结果：

```
["play5", "Jag är här nu"]
["Player Change", Object, null] 
```

#play6 的结果：

```
["play6", "Jag är här nu"]
["Player Change", Object, "spotify:internal:temp_playlist:spotify:app:myapplication@217702072872"] 
```

#play7 的结果：

```
sp.trackPlayer.setContextCanSkipNext(l, false); 
```

上面的行生成异常消息“无法将参数 0 转换为链接”

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:36:12.690

我现在做了一些工作，发现了如何做到这一点。

```
models.Track.fromURI("spotify:track:5A1fNC7Fdb0yyh3UA6T1ef", function (track) {
    var pl = new models.Playlist();
    sp.trackPlayer.setContextCanSkipPrev(pl.uri, false);
    sp.trackPlayer.setContextCanSkipNext(pl.uri, false);
    pl.add(track);
    models.player.play(track, pl);
}); 
```

希望这可以帮助其他试图解决此问题并陷入谈论在空上下文中播放曲目的讨论...

# php - 取消大写所有文本并用下划线替换php数组中的空格

> ID：11293434
> 
> 赞同：0
> 
> 时间：2012-07-02T12:10:04.857
> 
> 标签：php, arrays, replace

我有这个数组`$all_regions = system_region_list($theme);`

一些值是 'Sidebar first' 'Sidebar second'，它们应该变成 'sidebar_first' 'sidebar_second'

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T12:13:29.033

```
foreach ($all_regions as $key => $value){
   $all_regions[$key] = strtolower(str_replace(' ', '_', $value));
} 
```

[php.net - str_replace()](http://php.net/manual/en/function.str-replace.php)

**编辑**

更好的是以下（我认为），因为由于内部值指针，它会更快。（我将对此进行基准测试）

```
foreach ($all_regions as &$value){
   $value = strtolower(str_replace(' ', '_', $value));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:12:55.623

```
foreach($all_regions as $key => $val) {
  $all_regions[$key] = strtolower(str_replace(' ', '_', $val));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:15:31.297

在数组上使用 foreach 循环，然后通过 strtolower() 函数运行每个项目，并使用 strreplace() 函数将空格替换为下划线。

# php - 如何通过 AJAX 发回大量不同的数据

> ID：11293436
> 
> 赞同：1
> 
> 时间：2012-07-02T12:10:09.877
> 
> 标签：php, jquery, ajax

我有一个 JavaScript 函数，可以通过`$.ajax`. 我的 PHP 脚本返回了一些我用来创建 Jquery UI 对话框的内容，例如框的标题及其内容 (html)。

我在一个长字符串中返回数据位（例如对话框标题和正文），每个段由 分隔`::`，然后使用：

```
myStuff = data.split('::') ; 
```

最后，我`myStuff[n]`用于我想使用的第一部分。

我想知道你们是否知道更好的方法？更好的是更快/更少的代码，更安全等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:15:26.187

你最好的选择是[Json](http://www.w3schools.com/json/default.asp)。

PHP 有 2 个很棒的函数来处理 Json，[json_decode](http://php.net/manual/en/function.json-decode.php)和[json_encode](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:14:57.240

我相信使用[JSON](http://www.json.org/)对象会更合适。它将使代码更具可读性并避免解析，因为 Javascript 可以原生解析 JSON 对象：

```
var title = myObj.title; 
```

在 PHP 中创建 JSON 对象有很多选择。

# image - 用impoly定义的区域进行imcrop？

> ID：11293437
> 
> 赞同：1
> 
> 时间：2012-07-02T12:10:14.013
> 
> 标签：image, matlab, crop

我使用以下代码根据生成的矩形选择裁剪图像`imrect()`：

```
figure();
imshow(img);
h = imrect();
crop_area = wait(h);
cropped = imcrop(img, crop_area); 
```

但自然地，感兴趣的区域可能不是矩形的，或者可能是倾斜的，等等。

因此我的问题是：有没有办法使用`impoly()`with `imcrop()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:01:55.260

似乎`roipoly()`是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:49:21.923

使用`impoly()`with`imcrop()`没有意义，因为数字图像总是必须是矩形的。

如果您希望选择和操作非矩形 ROI，可以`impoly()`与 一起使用。`createMask()`

# bash - awk 在十六进制字符串上拆分

> ID：11293438
> 
> 赞同：0
> 
> 时间：2012-07-02T12:10:18.400
> 
> 标签：bash, awk, hex, jpeg

我有一个里面有多个 jpeg 的文件。所以我想将它们拆分为单个 jpeg。

最简单的部分是找到开头：`0xFF0xD8 0xFF0xE1`标记 JPG 和 EXIF 数据字段的开头，在我的情况下，它总是在开头。

所以我找到了这个 awk 命令：

`awk '/string/{n++}{print >"out" n ".txt" }' final.txt`

拆分文件。当我将它与十六进制一起使用时，它不能按预期工作：

`awk '/0xFF0xD8 0xFF0xE1/{n++}{print >"out" n ".txt" }' final.txt`

awk 的文档说前面有 0x 的所有字符串都用作十六进制，但我似乎工作得不好..

编辑：好吧，我发现了这个：[https](https://superuser.com/questions/174362/how-to-split-binary-file-based-on-pattern) ://superuser.com/questions/174362/how-to-split-binary-file-based-on-pattern但它对我不起作用......它应该创建2个文件，但只创建了一个，它只有 11 个字节大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:40:15.173

您确定 awk 可以很好地处理二进制文件吗？我以为它会期待换行符。

Perl 可以在正则表达式中使用十六进制转义（来自[此答案](https://stackoverflow.com/a/8061558/381281)的基本思想）：

```
#!/usr/bin/perl
undef $/;
$_ = <>;
$n = 0;
for $content (split(/(?=\xFF\xD8\xFF\xE0)/)) {
        open(OUT, ">out" . ++$n . ".txt");
        print OUT $content;
        close(OUT);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:20:35.417

perl 如果可能是首选工具，但 awk 可以很好地处理它：

```
awk '{print > "out" NR ".jpg"}' RS=$( printf '\xff\xd8\xff\xe0' ) 
```

# c# - 发布后申请

> ID：11293439
> 
> 赞同：0
> 
> 时间：2012-07-02T12:10:19.473
> 
> 标签：c#, asp.net, publish, custom-error-pages

我有一个 asp.net 应用程序，它什么都没有，直到我将它发布到 IIS。它一直说我必须添加我*所做*的自定义错误标签。

```
 <customErrors mode="On" defaultRedirect="~/Errorpage/Booboo.aspx"/> 
```

但它继续在 url aspxpatherror 中返回运行时错误页面。我整天都在谷歌上搜索这个错误的原因，但我似乎找不到它。

```
 void Page_Load(object sender, System.EventArgs e)
    {

    }

    public void Page_Error(object sender, EventArgs e)
    {
        Exception objErr = Server.GetLastError().GetBaseException();
        string err = "<b>Error Caught in Page_Error event</b><hr><br>" +
                "<br><b>Error in: </b>" + Request.Url.ToString() +
                "<br><b>Error Message: </b>" + objErr.Message.ToString() +
                "<br><b>Stack Trace:</b><br>" +
                          objErr.StackTrace.ToString();
        Response.Write(err.ToString());
        Server.ClearError();
    }
    protected void Application_Error(object sender, EventArgs e)
    {
        Exception objErr = Server.GetLastError().GetBaseException();
        string err = "Error Caught in Application_Error event\n" +
                "Error in: " + Request.Url.ToString() +
                "\nError Message:" + objErr.Message.ToString() +
                "\nStack Trace:" + objErr.StackTrace.ToString();
        EventLog.WriteEntry("Sample_WebApp", err, EventLogEntryType.Error);
        Server.ClearError();
        //additional actions...
    } 
```

这是我的错误页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:14:35.047

这不是错误，而是您自己的代码中的错误。您需要设置断点并逐行调试。

# android - Android：LoaderCallbacks.OnLoadFinished 调用了两次

> ID：11293441
> 
> 赞同：56
> 
> 时间：2012-07-02T12:10:27.070
> 
> 标签：android, loader

我注意到使用 Android 加载器和片段的奇怪情况。当我在方向更改后调用 LoaderManager.initLoader() 时，不会调用 onLoadFinished （尽管文档建议我应该为此做好准备），但在此之后调用了两次。这是在描述相同情况的谷歌群组中发布的链接[https://groups.google.com/forum/?fromgroups#!topic/android-developers/aA2vHYxSskU](https://groups.google.com/forum/?fromgroups#!topic/android-developers/aA2vHYxSskU)。我编写了示例应用程序，其中我只在 Fragment.onActivityCreated() 中初始化了简单的加载程序，以检查这种情况是否发生并且确实发生了。有人注意到这个吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-25T14:40:34.720

您可以将 initLoader() 方法放在 Fragment 的 onResume() 回调中；那么 Loader 的 onLoadFinished() 将不再被调用两次。

```
 @Override
public void onResume()
{
    super.onResume();
    getLoaderManager().initLoader(0, null, this);
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-03-04T21:17:42.307

这个问题对我来说很明显，因为 CursorLoader 返回了一个已经关闭的 Cursor：

```
android.database.StaleDataException: Attempted to access a cursor after it has been closed. 
```

我猜这是一个错误或疏忽。虽然将 initLoader() 移动到 onResume 可能有效，但我能够做的是在完成后删除加载器：

启动加载器（在我的 onCreate 中）：

```
 getLoaderManager().initLoader(MUSIC_LOADER_ID, null, this); 
```

然后在我完成之后（基本上在 onLoadFinished 结束时）

```
 getLoaderManager().destroyLoader(MUSIC_LOADER_ID); 
```

这似乎表现如预期，没有额外的调用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-17T21:41:13.953

[initLoader 文档](http://developer.android.com/reference/android/app/LoaderManager.html#initLoader(int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E))说，

> 如果在调用点调用者处于启动状态，并且请求的加载器已经存在并生成了它的数据，则回调 onLoadFinished(Loader, D)

[我建议你在这个示例](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)中实现类似 onStartLoading 函数

为了快速测试，您可以尝试：

```
@Override protected void onStartLoading() {
    forceLoad();
} 
```

此启动 loadInBackground 函数，然后在 Fragment 中启动 onLoadFinished。

无论如何，如果您附上一些代码，我会尽力为您提供更多帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-06T07:10:22.127

我解决了 onLoadFinished 像这样被调用两次的问题。在你的 Fragment.onActivityCreated() 像这样初始化你的加载器

```
if (getLoaderManager().getLoader(LOADER_ID) == null) {
    getLoaderManager().initLoader(LOADER_ID, bundle, loaderCallbacks);
} else {
    getLoaderManager().restartLoader(LOADER_ID, bundle, loaderCallbacks);

} 
```

这里 loaderCallbacks 实现了你常用的 Loader 回调

```
private LoaderManager.LoaderCallbacks<T> loaderCallbacks
        = new LoaderManager.LoaderCallbacks<T>() {
    @Override
    public Loader<T> onCreateLoader(int id, Bundle args) {
        ...
        ...
    }

    @Override
    public void onLoadFinished(Loader<T> loader, T data) {
        ...
        ...
    }

    @Override
    public void onLoaderReset(Loader<T> loader) {
        ...
        ...
    }
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-05T22:18:36.093

问题是它调用了两次：
1.来自 Fragment.onStart
2.来自 FragmentActivity.onStart

唯一的区别是在 Fragment.onStart 中它检查 mLoaderManager 是否为 null ！这意味着如果您在 onStart 之前调用 getLoadManager，就像在 onActivityCreated 中一样，它将获取/创建负载管理器并被调用。为避免这种情况，您需要稍后调用它，例如在 onResume 中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-04T10:39:25.340

当你打电话`initLoader`时，`onActivityCreated`你可以检测到旋转：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    if (savedInstanceState == null) {
        // fresh new fragment, not orientation/config change
        getLoaderManager().initLoader(YOUR_LOADER_ID, null, mCallbacks);
    }
    ...
} 
```

这样，加载程序的行为与预期的一样，导致单次`onLoadFinished`调用。
它不再被调用旋转，所以如果你想要加载器的数据，你可以将它保存在你的片段中，例如通过覆盖`onSaveInstanceState`.

编辑：
我刚刚意识到`onLoadFinished`如果在 loader 的`loadInBackground`. `initLoader`要解决此问题，如果来自加载程序的数据尚不可用，您仍需要在轮换后调用。

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-16T01:58:42.623

还可以比较 onLoadFinished(Loader loader, Object data) 中的数据对象。如果数据对象与您已有的数据对象匹配，则在调用 onLoadFinished 时您不能做任何事情。例如：

```
public void onLoadFinished(Loader loader, Object data) {
        if(data != null && mData != data){
            //Do something
        }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-14T05:52:04.450

我遇到了这个问题。但是我习惯于调用`destroyloader(YOUR_ID)`in loaderfinished 方法。然后加载程序不会再次调用 backgrdound 任务两次。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-30T00:56:40.210

如果实现 AppCompatActivity，请仔细检查您是否在**所有**情况下都使用 getSupportLoaderManager()（destroyLoader/initLoader 等）。我错误地将 getSupportLoaderManager() 与 getLoaderManager() 一起使用并遇到了同样的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-16T21:38:19.877

由于所有对这个主题的搜索都不可避免地会在这里结束，我只是想补充一下我的经验。正如@jperera 所说，罪魁祸首是如果加载器已经存在，LoaderManager 将调用 onLoadFinished() 。就我而言，我在 FragmentPager 中有片段，并且滚动 2 个选项卡然后再次滚动到它旁边会导致我的旧片段开始自行创建。

由于将 initLoader() 放在 onCreate() 中也会导致双重回调，因此我将 initLoader() 放在 onResume() 中。但是事件序列最终是 onCreate()，由于加载器存在，LoaderManager 调用回调，然后调用 onResume()，触发另一个 initLoader() 和 onLoadFinished() 序列。IE，另一个双重回调。

## 解决方案

[我通过"Matt"](https://groups.google.com/forum/#!topic/android-developers/aA2vHYxSskU)找到了一个快速解决方案。加载所有数据后（如果您有多个加载器），销毁所有加载器，这样它们的回调就不会被调用额外的时间。

# java - 如何在java中加密敏感的SQL信息

> ID：11293447
> 
> 赞同：0
> 
> 时间：2012-07-02T12:10:48.577
> 
> 标签：java, sql, oracle

假设我想在我的 Java 应用程序中连接到 oracle 数据库，我将不得不写下 jdbc url 并输入该数据库的用户名和密码，如果没有程序的源，我不知道如何破解这个密码，但我必须加密吗？有没有办法加密？那么sql注入呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:22:31.360

你并没有真正提供足够的信息来了解你的全部情况，但我会尝试分解一些你可能想知道的一般事情。首先，需要为 db 驱动程序提供未加密的用户名/密码，因此如果您担心内存中的信息未加密，那并不会真正产生影响。通常有比尝试扫描内存以查找用户名/密码字符串更简单的方法来访问您的数据库。

如果您正在创建一个将分发字节码（.class 文件或 .jar 文件）的应用程序，那么人们可以在技术上通过该字节码并找到硬编码的字符串，例如用户名/密码（但即使你有字符串，也可能很难确定它们到底是什么）。

如果您正在制作一个将在 Web 服务器上运行的应用程序，那么无论如何都没有人可以访问您的字节码或内存，因此这应该是不可能的（除非他们已经入侵了您的服务器事先某种方式）让他们获得任何这些信息。但是，您可能希望将数据库连接信息外部化到属性文件中，以便管理软件的人可以轻松配置它，尽管根据您的要求可能并非如此。

SQL 注入是一个完全不同的问题，对于我来说有点过于宽泛，无法在此处讨论。我建议您阅读处理它的方法，但很大程度上归结为使用准备好的语句，而不仅仅是执行 SQL（这通常也会提高您的性能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-22T05:26:34.400

我正在使用 Java 编写注册表单，我遇到了同样的问题。对我来说唯一有意义的是使用 php 表单进行注册，这样他们就不会访问您的数据库，而只能通过服务器进行通信。我没有授予用户对数据库的权限，而是以某种方式设想了一种单向加密方法，该方法仅在用户输入密码时对其进行散列后才将密码与散列匹配。对黑客行为有所了解后，我觉得用户可以访问的任何信息都是安全漏洞。版主多次说过不要在源代码中以纯文本形式存储密码。SQL 有一些方法可以提供有限的数据库权限，您可以根据需要删除信息。

下面是一个我有点信任的链接，但它基本上给自己留下了一个纸质痕迹，其中必须从隐藏在某处的 zip 文件中提取哈希，在身份验证期间检索它，然后可以将其添加到网站

[https://www.pkware.com/software/developer-tools/sdk/toolkit-for-java](https://www.pkware.com/software/developer-tools/sdk/toolkit-for-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:21:55.960

您可以`encrypt`使用密码将其存储在数据库或安全区域中`AES algorithm`。当您构建`JDBC URL`时，检索此信息和`decrypt`它。可以从此链接获得更多信息： [Java 256-bit AES Password-Based Encryption](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)

SQL 注入是代码中的另一种`vulnerabilities`存在，因为没有对用于构造 SQL 语句的数据进行验证。

# android - Matrix.postScale(int,int) 方法的结果

> ID：11293449
> 
> 赞同：3
> 
> 时间：2012-07-02T12:11:10.757
> 
> 标签：android, matrix

我对 postScale 方法究竟如何计算矩阵的值有点困惑。这是代码：

```
Matrix m1 = new Matrix();
float[] values = { 1f, 2f, 3f, 4f, 5f, 6f, 7f, 8f, 9f };
m1.setValues(values);
Matrix m2 = new Matrix(m1);

m1.preScale(2f, 3f); //result: 2, 6, 3, 8, 15, 6, 14, 24, 9
m2.postScale(2f, 3f); //result: 1, 2, 3, 6, 7.5, 9, 3.5, 4, 4.5 
```

文档说 preScale 的结果是 (Matrix * scale) 而 postScale 的结果是 (scale * Matrix)。但是如果我手动计算矩阵，结果会有所不同。

从右乘：

```
1 2 3 | 2 0 0   2   6 3
4 5 6 | 0 3 0 = 8  15 6
7 8 9 | 0 0 1   14 24 9 
```

从左乘：

```
2 0 0 | 1 2 3    2  4  6
0 3 0 | 4 5 6 = 12 15 18
0 0 1 | 7 8 9    7  8  9 
```

...**左乘 (postScale) 返回的结果与我预期的不同**。

我什至研究了本机实现（Matrix_Delegate.java）。但我不知道问题出在哪里。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:50:09.337

在 setConcat（在 android/external/skia/src/core/SkMatrix.cpp 中）将至少一个是透视矩阵的两个矩阵相乘之后，它会调用一个名为“normalize_perspective”的方法。如果矩阵的最后一个单元格（右下角，如果是零索引，则为 mat[2][2]，在此表示中为 mat[8]）大于 1，它将矩阵中的每个数字除以 2。这当然描述了我们在这里看到的内容。

但是我们的友好矩阵是如何被认为是透视矩阵的呢？好。当我们执行 setValues() 时，类型被设置为未知。当 setConcat 调用 getType 时，它​​看到“未知”并决定对此做些什么。它调用computeTypeMask。computeTypeMask 查看第三列，发现它不是 [ 0 0 1 ]，然后在矩阵类型上贴上 Perspective 标签。这发生在您的 m2 上。

但为什么这一切只是 postScale 的问题？preScale（除非 Skia 库是在定点模式下编译的）自己进行缩放，所以它永远不会进入 setConcat 来攻击这些岩石浅滩。

为什么 normalize_perspective 是个好主意？如果我知道，该死的。这可能与这些特定例程的预期 2d 图形应用程序有关。

对于这一切，你能做些什么？如果您的目标是 API 级别 11 或更高，那么 renderscript 的 Matrix3f 可能是您的朋友。如果不是，对不起，D-Fox，你的矩阵实现在另一个城堡里。

# android - 在android中有多个活动时重新启动单个选项卡

> ID：11293452
> 
> 赞同：2
> 
> 时间：2012-07-02T12:11:26.810
> 
> 标签：android

在我的应用程序中，我在底部有四个选项卡。每个选项卡都有多个活动。为了在单个选项卡中维护多个活动，我使用了 TabGroupActivity 的概念。我的问题是，当我单击特定选项卡时，它的起始活动有在该选项卡的某些子活动处于 onResume() 状态时重新启动。为了清楚地理解，

```
 Tab1-A-->B-->C-->D-->E.
  Tab2-M-->N-->B-->C-->D-->E.
  Tab3-P.
  Tab4-X-->Y-->B-->C-->D-->E. 
```

当我按下 Tab1 时，必须重新启动 A 活动，而 B 或 C 或 D 或 E 活动之一处于 onresume() 状态。同样，Tab2、Tab4 也必须完成。请有人提供我有示例代码，因为我是一个新人。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:28:58.047

我找到了我的问题的解决方案，我只是覆盖了 TabGorupActivity 中的 onResume() 方法。我的 TabGroupActivity 是

```
 package com.rmn.hrt;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.app.ActivityGroup;
    import android.app.AlertDialog;
    import android.app.LocalActivityManager;
    import android.content.DialogInterface;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.Window;

    /**
     * The purpose of this Activity is to manage the activities in a tab.
     * Note: Child Activities can handle Key Presses before they are seen here.
     * @author Eric Harlow
     */
    public class TabGroupActivity extends ActivityGroup {

        private ArrayList<String> mIdList;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);    

            if (mIdList == null) mIdList = new ArrayList<String>();
        }

        /**
         * This is called when a child activity of this one calls its finish method. 
         * This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
         * and starts the previous activity.
         * If the last child activity just called finish(),this activity (the parent),
         * calls finish to finish the entire group.
         */
      @Override
      public void finishFromChild(Activity child) {
          LocalActivityManager manager = getLocalActivityManager();
          int index = mIdList.size()-1;

          if (index < 1) {
              finish();
              return;
          }

          manager.destroyActivity(mIdList.get(index), true);
          mIdList.remove(index); index--;
          String lastId = mIdList.get(index);
          Intent lastIntent = manager.getActivity(lastId).getIntent();
          Window newWindow = manager.startActivity(lastId, lastIntent);
          setContentView(newWindow.getDecorView());
      }

      /**
       * Starts an Activity as a child Activity to this.
       * @param Id Unique identifier of the activity to be started.
       * @param intent The Intent describing the activity to be started.
       * @throws android.content.ActivityNotFoundException.
       */
      public void startChildActivity(String Id, Intent intent) {     
          Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
          if (window != null) {
              mIdList.add(Id);
              setContentView(window.getDecorView()); 
          }    
      }

      /**
       * The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
       * from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
       */
      @Override
      public boolean onKeyDown(int keyCode, KeyEvent event) {
          if (keyCode == KeyEvent.KEYCODE_BACK) {
              //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
              return true;
          }
          return super.onKeyDown(keyCode, event);
      }

      /**
       * Overrides the default implementation for KeyEvent.KEYCODE_BACK 
       * so that all systems call onBackPressed().
       */
      @Override
      public boolean onKeyUp(int keyCode, KeyEvent event) {
          if (keyCode == KeyEvent.KEYCODE_BACK) {
              onBackPressed();
              return true;
          }
          return super.onKeyUp(keyCode, event);
      }

      /**
       * If a Child Activity handles KeyEvent.KEYCODE_BACK.
       * Simply override and add this method.
       */
      @Override
      public void  onBackPressed  () {
          int length = mIdList.size();
          if ( length > 1) {
              Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
              current.finish();
          }
    }
 //Removing all string identifiers for the child activities
// except the first activity from mIdList and showing it's view
    @Override
    protected void onResume() {
         LocalActivityManager startManager=getLocalActivityManager();
            int index = mIdList.size() - 1;
            while(index>=1){
            startManager.destroyActivity(mIdList.get(index), true);
            mIdList.remove(index);
            index--;
            }
            String lastId = mIdList.get(index);
            Intent lastIntent = startManager.getActivity(lastId).getIntent();
            Window newWindow =startManager.startActivity(lastId, lastIntent);
            setContentView(newWindow.getDecorView());
        super.onResume();
    }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:06:53.587

试试这个

```
TabWidget twidget = mTabHost.getTabWidget();

   twidget.getChildAt(0).setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
    //Start you base activity
     mTabHost.setCurrentTab(0);
     }
   }); 
```

# iphone - 如何在 UIBezierpath 上实现浮雕和模糊效果

> ID：11293453
> 
> 赞同：4
> 
> 时间：2012-07-02T12:11:36.993
> 
> 标签：iphone, ios, objective-c

我现在正在创建一个具有自由手绘功能的应用程序。我想添加浮雕和/或模糊效果。目前我正在使用`UIBezierPath`'s`strokeWithBlendMode`来画线。

请建议我添加这些效果的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:31:07.330

最简单的方法是创建一个浮雕图像并将其`UIColorWithPatternedImage`用于您的 UIBezierPath 的存储颜色。

这同样适用于模糊效果。

然而，找到一个图像以创建像浮雕一样的外观是一个 UI 挑战。

# php - 获取字段不起作用

> ID：11293457
> 
> 赞同：1
> 
> 时间：2012-07-02T12:11:57.507
> 
> 标签：php, mysql, arrays, object

这个脚本似乎有问题。每当我将 $i 的值更改为喜欢 2 或其他内容时，它都会输出 A 字段而不是所有字段。我不确定出了什么问题。

另外有可能做这样的事情吗？基本上结果查询中有更多字段，但我只想输出我希望用户能够编辑的结果查询中列出的字段的值（显示在resultInput中）

```
<?php
require('dbc.php');
mysql_select_db($db);
$result = mysql_query("SELECT * FROM about WHERE id=1");
$resultInput = array('page_header', 'sub_header', 'content', 'content_short');

if (mysql_num_rows($result) > 0) {
//loop creates inputs
//make $resultInput object to array.
$i=0;
while ($row = mysql_fetch_assoc($result)) {
    $meta = mysql_fetch_field($result, $i);
    if(in_array($meta->name, $resultInput )){
    echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ',$meta->name)) . 
    '<br><input name="' . $meta->name . 
    '" type="text" class="input" value="'.$row[$meta->name].'"><br></label></div>';
    }
    $i++;
 }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:41:44.373

虽然这不是我会这样做的方式..我已经获取了您的代码并制作了它，所以它应该可以工作..

```
if (mysql_num_rows($result) > 0) { 
//loop creates inputs 
//make $resultInput object to array. 

    while ($row = mysql_fetch_assoc($result)) 
    { 
        $i=0; 
        while ( $i<   mysql_num_fields($result)) 
        {
            $meta = mysql_fetch_field($result, $i); 
            if(in_array($meta->name, $resultInput ))
            { 
              echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ',$meta->name)) .  
             '<br><input name="' . $meta->name .  
             '" type="text" class="input" value="'.$row[$meta->name].'"><br></label></div>'; 
            } 
            $i++; 
        } 
    } 
    ?> 
```

供参考

这是我会怎么做的，虽然看着它，我对回声不满意..但是..

```
 while ($row = mysql_fetch_assoc($result)) 
    { 
        foreach ($row as $fieldname => $value)
        {
            if (in_array($fieldname, $resultInput )) Display_data($fieldname,$value);
        } 
    } 

function Display_data($fieldname,$value)
{
              echo '<div class="wrapper"><label>' . ucfirst(str_replace('_', ' ',$fieldname)) .  
             '<br><input name="' . $fieldname .  
             '" type="text" class="input" value="'.$value.'"><br></label></div>'; 
} 
```

# android - 什么样的推送通知方法适合用于 Android 2.3.3？

> ID：11293458
> 
> 赞同：2
> 
> 时间：2012-07-02T12:12:10.287
> 
> 标签：android, push-notification, google-cloud-messaging

我想在我的应用程序中实现一个推送消息系统，并且一直在寻找 Android 中的推送服务。

我找到了几种不同的方法，其中一个引起我注意的是谷歌的 GCM，但它似乎不适用于 2.3.3，我需要升级到 API 级别 20。这意味着仅仅因为谷歌就失去了大量用户不想支持历史版本的 Android。

谁能告诉我在 2.3.3 或更高版本中实现推送通知的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:23:19.047

1.  您可以并且可能应该使用 GCM。它适用于 Android 2.2+（API 级别 8+）。

2.  还没有 API 级别 20 之类的东西——要求它肯定会减少很多 Android 用户！

3.  该文档非常详尽，可在此处获得：http: [//developer.android.com/guide/google/gcm/gcm.html](http://developer.android.com/guide/google/gcm/gcm.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:20:39.410

Google Cloud Messaging 可从 API 级别 8 (Android 2.2) 获得

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:17:39.937

我在云到设备消息传递 (C2DM) 中实现

[http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

# magento - 如何在 Magento 中为产品图片使用外部 url

> ID：11293465
> 
> 赞同：1
> 
> 时间：2012-07-02T12:12:25.373
> 
> 标签：magento

您似乎无法将产品图像加载为外部 url，例如[http://somewhere.com/products/product1.png](http://somewhere.com/products/product1.png)从而绕过本地媒体存储。我很惊讶 Magento 不支持这一点（如果它是正确的）。

除了支付 Magento 插件之外，确保我的 image/smallimage/thumbnailimage 字段对应于我在 products.csv 中加载的完整 url 的最简单方法是什么？

我正在使用 Magento 1.6.2.0

[编辑以避免听起来刺耳]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:29:29.787

添加用于存储产品外部图像 url 的新属性。然后使用属性获取图像。

假设属性名称是 ext_url 用户下面的代码来获取图像。

```
<img src="<?php echo $product->getExtUrl();  ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:11:15.007

这不是一个明确的答案，只是说明我在此期间所做的事情：

编辑 app/design/frontend/base/default/template/catalog/product/list.phtml 在文件中，您会找到两个“img src”实例，对于这两个 src 属性中的每一个，我将值更改为：

```
src="<?php echo $_product->getSmallImage() ?>" 
```

编辑 app/design/frontend/base/default/template/catalog/product/view/media.phtml 搜索 id="image" 将 src 属性更改为：

```
src="'.$_product->getImage().'" 
```

在我的产品 csv 中，我相应地加载了 image 和 small_image 值（作为包括协议和主机等的整个 url）。

毫无疑问，应该在其他地方进行类似的更改（例如愿望清单页面等），但目前在网格数据和产品详细信息视图中显示的正确图像对我来说已经足够了。

仍然寻求完整的答案。

# php - php数组过滤器尝试匹配单词值名称的开头

> ID：11293466
> 
> 赞同：0
> 
> 时间：2012-07-02T12:12:34.933
> 
> 标签：php, array-filter

我如何过滤此数组值`[Name] =>`尝试匹配值名称开头的单词“Good”

```
Array
(

[0] => Array
    (
        [Name] => Good Seat
        [image] => spot
        [category] => 0
    )

[1] => Array
    (
        [Name] => Nice Good Service
        [image] => spotless
        [category] => 0
    )

[2] => Array
    (
        [Name] => Good Work
        [image] => spotly
        [category] => 1
    )
) 
```

我需要这样的过滤器

```
Array
(

[0] => Array
    (
        [Name] => Good Seat
        [image] => spot
        [category] => 0
    )

[1] => Array
    (
        [Name] => Good Work
        [image] => spotly
        [category] => 1
    )
) 
```

我的代码

```
function name($var)
{
    return (is_array($var) && $var['Name'] == preg_match("/^Good/", $var['Name']));
}

print_r(array_filter($var, "name")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:20:19.550

我会说只是做一个substr：

```
if ( substr( $var[ 'Name' ], 4 ) == 'Good' ) {
  // do what you want
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:15:31.647

删除 $var['Name']=

```
function name($var)
{
    return (is_array($var) && preg_match("/^Good/", $var['Name']));
} 
```

# magento - 更新报价项目的重量

> ID：11293480
> 
> 赞同：2
> 
> 时间：2012-07-02T12:13:29.417
> 
> 标签：magento, cart, quote

当我在 magento 上的购物车中添加产品时，我想更新报价项目的重量。

我试过这段代码：

```
public function checkoutCartProductAddAfter(Varien_Event_Observer $observer)
{
   $event = $observer->getEvent();
   $quote_item = $event->getQuoteItem();
   $myWeight = ($quote_item->getWeight()/100)*$number;
   $quote_item->setWeight($myWeight);
   $quote_item->save();
} 
```

但它不起作用。我在同一个函数中更新了报价项目的价格并且它有效。

为什么我的新体重不适用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T12:11:04.183

使用**sales_quote_item_set_product**事件。在 Quote Item 设置其产品之后，在每个请求上都会调用此事件。这就是您可以将价格和重量更改为自定义值的方式。

```
/*
 * Called on every request, updates item after loaded from session
 */
public function updateItem(Varien_Event_Observer $observer) 
{
    $item = $observer->getQuoteItem();
    if ($item->getParentItem()) {
        $item = $item->getParentItem();
    }

    // set price
    $item->setCustomPrice($customPrice);
    $item->setOriginalCustomPrice($customPrice);
    $item->getProduct()->setIsSuperMode(true);

    // set weight
    $item->setWeight($customWeight);
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:50:29.320

您需要保存报价或购物车而不是报价项目。尝试：

```
$quote_item->getQuote()->save(); 
```

或者

```
Mage::getSingleton('checkout/cart')->save(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T13:07:57.470

您正在观察正确的事件

```
checkout_cart_product_add_after 
```

无需这样做，您可以将其从您的功能中删除

```
$quote_item->save(); 
```

但添加这个

```
$quote_item->getProduct()->setIsSuperMode(true); 
```

现在你的函数应该读作

```
public function checkoutCartProductAddAfter(Varien_Event_Observer $observer)
{  
   $event = $observer->getEvent();
   $quote_item = $event->getQuoteItem();
   $myWeight = ($quote_item->getWeight()/100)*$number;

   $quote_item->getProduct()->setIsSuperMode(true);

   $quote_item->setWeight($myWeight);
} 
```

为了不将原始产品重量写入表中需要做的主要事情是将文件从`sales_flat_quote_item`复制到并删除以下行（v1.9 CE）行＃390`item.php``app/code/core/Mage/Sales/Model/Quote``app/code/local/Mage/Sales/Model/Quote`

```
->setWeight($this->getProduct()->getWeight()) 
```

现在它应该像魅力一样工作。久经考验

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T12:53:05.540

你可以在这里试试我的代码。在 sidebar.phtml 中

```
<?php
$items = Mage::getSingleton('checkout/cart')->getQuote()
    ->getItemsCollection()->getItems();
$product = Mage::getModel('catalog/product');
$total_weight = 0;
foreach ($items as $item) {
    $product = $item->getProduct();
    $qty = $item->getQty();
    $weight = $item->getWeight();
    if ($product->isConfigurable()) {
        $total_weight += ($weight * ($qty - 1));
    } else {
        $total_weight += ($weight * $qty);
    };
}
?>

<div><strong>Total Weight</strong></div>
</div><strong><?php echo $total_weight;?> KG</strong></div> 
```

# excel - 如何从插件函数调用和粘贴数据？

> ID：11293485
> 
> 赞同：0
> 
> 时间：2012-07-02T12:14:09.383
> 
> 标签：excel, vba

如果我有一个名为 X(A,B) 的插件 gin 函数，它似乎将数据粘贴到活动表中，在单元格上使用 =X() 。

如何从 VBA 调用它？我是否必须做任何特别的事情，因为此功能是插件的一部分？

我只想能够设置活动工作表，然后调用 X()，它是否像

```
Sheets("Sheet2").Activate

SomeModule.X(Arg1,Arg2) 
```

谢谢

编辑：我已经转到工具-> 参考并选择了插件，但我在项目资源管理器窗格中没有得到与参考相关的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:07:13.087

要从 VBA 返回函数的值，`X(Arg1,Arg2)`您可以尝试以下操作：

```
Application.Run("X",Arg1,Arg2) 
```

对于第一个参数，最好的做法是尽可能明确：`"gin.xla!SomeModule.X"`

# html - 如何告诉锚标签在rails的控制器中执行此操作

> ID：11293486
> 
> 赞同：1
> 
> 时间：2012-07-02T12:14:09.970
> 
> 标签：html, ruby-on-rails, ruby

我是 ruby​​ on rails 的新手。我在路线上有问题。我有一个导航菜单。我家有一个控制器。在家庭控制器内部，我有几个动作/方法。因此，当用户单击主页时，它应该通过主页索引操作中的主页控制器将用户带到主页。当用户点击联系时，它应该让他联系家庭控制器内部的操作。其他链接也是如此。

我正在做的是在这里

```
%a{:href => 'home'} Home
%a{:href => 'home/contact'} Contact 
```

所以当我点击联系它给我路由错误

```
No route matches [GET] "/home/contact" 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:19:54.497

我了解您是 Rails 新手。看起来您还没有阅读有关路由如何与 rails 一起使用的详细信息。

我建议您先熟悉 Rails 指南：[从外到内路由。](http://guides.rubyonrails.org/routing.html)该指南描述了一些简单的快捷方式，您可以使用这些快捷方式来更轻松地设置路线。

例如，完成您想要做的事情的一种方法是使用以下内容：

在您的`/config/routes.rb`文件中，为您想要的链接输入如下条目：

```
 root :to => "home#home"
  get "home/index", :to => "home#index", :as => 'home_index'
  get "home/about", :to => "home#about", :as => 'about'
  get "home/contact", :to => "home#contact", :as => 'contact' 
```

这些将创建您可以在视图中使用的快捷方式，例如`root_path`, `home_index_path`, `about_path`,等。`contact_path`

然后在您看来，您将使用：

```
 %a{:href => home_index_path } Home
 %a{:href => contact_path } Contact 
```

这只是您如何使用路径的开始。您还想学习如何使用 rails 'restful routing' 以及如何放入`resources`您的路由文件，但这可能超出了您现在所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:20:44.693

您需要在 config/routes.rb 中为此 URL 添加一个路由。像这样的东西应该工作：

```
match 'home/contact' => 'home#contact` 
```

我完全不推荐这种方法，因为它不是 RESTful 并且会导致很多混乱的路由和控制器。查看[Rails 路由指南，](http://guides.rubyonrails.org/routing.html)了解有关如何在 Rails 中更好地设计路由的更多信息。

# javascript - Facebook：FB登录时出现黑屏

> ID：11293494
> 
> 赞同：6
> 
> 时间：2012-07-02T12:14:43.620
> 
> 标签：javascript, facebook, sdk, facebook-login

突然，当我尝试通过 facebook 登录时，我的应用程序中发生了一件奇怪的事情。询问登录详细信息后，facebook 连接弹出对话框将显示一个空白屏幕。通常我希望看到窗口关闭，然后网站本身会继续运行，但它似乎已经挂起。

我在用`Javascript SDK on Localhost`

这是我正在使用的代码（直接从 facebook 文档复制）：

```
window.fbAsyncInit = function () {
    FB.init({ appId: fbAppId,
        status: false,
        cookie: true,
        xfbml: true
    });

};

(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document));

$(document).ready(function () {

    $("#fb_button_login").click(function () {

        FB.login(function (response) {
            if (response.authResponse) {
                console.log('Welcome!  Fetching your information.... ');
                FB.api('/me', function (response) {
                    console.log('Good to see you, ' + response.name + '.');
                });
            } else {
                console.log('User cancelled login or did not fully authorize.');
            }
        });

    });

}); 
```

其他一些注意事项：

*   这似乎发生在所有浏览器上。
*   我研究了所有其他帖子，但似乎找不到适合我的解决方案
*   控制台中没有显示错误消息
*   开发时，我使用了一个单独的 FB 应用程序 ID，我专门为 localhost 设置了我正在使用的指定端口（已经运行了超过 12 个月）
    *   我没有启用沙盒模式

它似乎挂起的 URL 在[这里](https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=149954195086116&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df83b52c04%26origin%3Dhttp%253A%252F%252Flocalhost%253A49568%252Ff13fd2038%26domain%3Dlocalhost%26relation%3Dopener%26frame%3Df1c7b95c88&sdk=joey&display=popup&response_type=token%2Csigned_request&domain=localhost&fbconnect=1&from_login=1&client_id=149954195086116)

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:56:17.423

似乎是一个错误： [https ://developers.facebook.com/bugs/241915819261223?browse=search_4ff2ead131a032989098325](https://developers.facebook.com/bugs/241915819261223?browse=search_4ff2ead131a032989098325)

从上面链接中的评论中，您可以尝试在端口 80 上运行您的应用程序并避免 url 中的端口部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:26:12.590

试试下面的代码

```
<html>
<body>
<div id="fb-root"></div>
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" ></script>
<script>

FB.init({appId: fbAppId, status: true, cookie: true, xfbml: true});
$(document).ready(function () {
    $("#fb_button_login").click(function () {
        FB.login(function (response) {
            if (response.authResponse) {
                console.log('Welcome!  Fetching your information.... ');
                FB.api('/me', function (response) {
                    console.log('Good to see you, ' + response.name + '.');
                });
            } else {
                console.log('User cancelled login or did not fully authorize.');
            }
        });

    });
});

</script>
<a href="javascript://" id="fb_button_login">Login</a>
</body>
</html> 
```

# mysql - mysql left join and query with where in 子句只显示 1 行

> ID：11293495
> 
> 赞同：0
> 
> 时间：2012-07-02T12:14:44.813
> 
> 标签：mysql, left-join

因为我正在制作一个简单的论坛，比如关注者和关注者，所以我有以下表格。

```
users

 1\. id
 2\. name

questions

 1\. id
 2\. description
 3\. user_id//foreign key of users.id

answers

 1\. id
 2\. question_id//foreign key of questions.id
 3\. description
 4\. user_id//foreign key of users.id

follow

 1\. from_user(which user)//foreign key of users.id
 2\. to_user(following to which user)//foreign key of users.id 
```

我的查询如下

```
SELECT users.id, users.name, count(DISTINCT questions.id), count(answers questions.id), count(follow1.from_user), count(follow2.to_user) from users LEFT JOIN questions ON users.id = questions.user_id LEFT JOIN answers ON users.id = answers.user_id LEFT JOIN follow as follow1 ON users.id = follow1.from_user LEFT JOIN follow as follow2 ON users.id = follow2.to_user WHERE users.id = 1 
```

这可以正常工作并给出正确的结果。

但是当使用相同的查询时，我将 WHERE IN 的子句如下

```
SELECT users.id, users.name, count(DISTINCT questions.id), count(answers questions.id), count(follow1.from_user), count(follow2.to_user) from users LEFT JOIN questions ON users.id = questions.user_id LEFT JOIN answers ON users.id = answers.user_id LEFT JOIN follow as follow1 ON users.id = follow1.from_user LEFT JOIN follow as follow2 ON users.id = follow2.to_user WHERE users.id IN (1, 3) 
```

它只显示用户 id 1 的记录。不是 3。但是谈论上一个查询对两者都很好，`id's`并显示正确的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:27:28.650

这是一个奇怪的问题，我只能建议使用`GROUP BY users.id`，以便 mysql 不会在所有记录中组合 count()s。希望在某种程度上有所帮助。

# php - 将表单数据发布到 URL 并将用户带到 URL（PHP 和 HTML）

> ID：11293496
> 
> 赞同：0
> 
> 时间：2012-07-02T12:14:46.403
> 
> 标签：php, html

我有一个简单的表格，例如：

```
<form action="" method="post">
    <input type="text" name="user" id="user" class="txt" value="Account" />
    <input type="password" name="pw" id="pw" class="txt" value="Password" />
  <div class="alignleft">
    <a href="#">Forgot?</a>
  </div>
  <div class="alignright">
    <input type="submit" name="login" class="login" value="Login" />
  </div> 
```

此表单会将人们登录到他们的控制面板（我们不保存敏感数据，并且我们知道有更好的登录方式）但无论如何他们不在数据库中，他们只需按照如下 URL 登录：

www.example.com/user?user=USERNAME?pwrd=PASSWORD

用户是否遵循该 URL 用他们自己的用户和密码替换用户和密码，它将登录。

如何让我的 HTML 表单将数据发布到 URL 并在他们单击提交时将它们带到 URL？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:16:27.643

`<form action="yoururl.com/url" method="get">` 这使用查询字符串进行表单提交。

# r - 加载 XML 包后 source() 命令出现问题

> ID：11293502
> 
> 赞同：1
> 
> 时间：2012-07-02T12:15:14.237
> 
> 标签：r

加载`XML`包后，`source()`命令退出并出现以下错误：

```
> require(XML)
Lade nötiges Paket: XML
> source ("test.R")
error in source("test.R") : 
  7 arguments passed to .Internal(identical) which requires 6 
```

如果我`source()`在加载包之前执行它工作正常。知道如何解决这个问题吗？

更多信息：

```
> traceback()
2: source("test.html")
1: source("test.html")

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252    LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Austria.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] XML_3.9-4.1

loaded via a namespace (and not attached):
[1] tools_2.15.0 
```

谢谢，费边

**编辑：**似乎适用于 R 2.15.1

# ruby-on-rails - Rails计算模型结构

> ID：11293503
> 
> 赞同：1
> 
> 时间：2012-07-02T12:15:15.647
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, object, ruby-on-rails-3.1

我目前正在尝试组合一个模型结构来执行各种计算，其公式将存储在模型中。

目前，我有一个操作数模型，它通过多对多与操作模型连接。只要我总是可以做一个简单的计算（即没有中间步骤），这就很好。

我有一个问题是如果我需要（例如）从另一个操作的结果中减去一个操作的结果。我知道我可以使用第二个模型来执行操作计算，但我会在链的更深处遇到同样的问题（即，如果我需要对计算结果执行操作）。

因此，我需要的本质上是一种嵌套操作的方法——即操作可以将操作数模型中的普通操作数或另一个操作的结果作为其操作数。有没有办法让运营模型像这样基本上自我引用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:37:52.410

这实际上更像是一个对象建模问题，而不是一个 Rails 问题——如果没有更详细地了解域模型，我不确定我能提供多少帮助。

但是当我想到计算器以及我如何看到简单的操作集/操作数编程工作时，我看到了一些可能有用的模式：

1.  您是否有一个“当前结果”模型来存储每次操作执行后的结果？我认为每个操作都可以在“当前结果”模型上执行，它可以存储当前结果。

2.  我还看到了将“寄存器”的概念用作中间结果的临时存储的情况。例如，“store to register 1”本身就是一个操作。如果您开发了“注册”对象，您可以将结果存储到其中并从中获取它们（或者甚至您可以执行操作并将结果留在寄存器中），这可能会有所帮助。

这在您的领域有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:37:50.863

我不知道我是否很好地理解了您的问题，但在我看来，您希望在保存属性之前对其执行操作。你可以用它`super()`来做到这一点。

```
def attribute=(val)
  new_val = #any types of operations on val
  super(val)
end 
```

# c# - 如何根据活动标签索引强制执行 menuItemClick 事件？

> ID：11293512
> 
> 赞同：0
> 
> 时间：2012-07-02T12:15:26.963
> 
> 标签：c#, asp.net, tabs

我正在努力解决以下问题：我有一个带有两个选项卡（索引 0 和 1）的 Asp PageControl。第一个选项卡实际上代表一个带有几个文本框的信息面板（从数据库填充值）。第二个是网格视图，其数据取自数据库（与第一个选项卡中的数据相同）。在页面控件的顶部，我有一个包含插入、编辑、删除、第一个、下一个、上一个和最后一个的菜单。对于第一个选项卡，我已经实现了它的功能。在第二个中，我想要执行以下操作：如果用户按下插入，我希望程序切换到第一个选项卡并表现得就像用户按下了第一个选项卡上的插入按钮一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:35:38.860

您可以使用[多视图控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.aspx) （使用 ASP.net 时存在于 ToolBox 中）。此控件为您提供多个视图，您一次只能看到其中一个，您可以在它们之间切换。您将 view1 设置为 tab1 并将 view2 设置为 tab2。

# facebook - 关于显示喜欢我的页面的用户和评论 - facebook

> ID：11293514
> 
> 赞同：-1
> 
> 时间：2012-07-02T12:15:30.150
> 
> 标签：facebook

我为我的商业网站创建了一个 Facebook 个人资料页面。我还在我的商业网站上提供了“喜欢按钮”。

我了解，每当用户通过我的业务站点喜欢我的页面时，数据将显示在喜欢的用户个人资料中。

我想显示所有喜欢我的页面的用户，并在我的 Facebook 业务资料页面中发布评论。目前它只显示喜欢的总数。

有没有办法显示带有评论的列表。

为此，我们是否需要使用 FQL 或任何 Facebook 应用程序？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:00:25.730

使用Facebook 的[Likebox](http://developers.facebook.com/docs/reference/plugins/like-box/)，您可以显示他们喜欢您的业务页面的所有用户。此外，您还可以显示 Facebook 业务页面的最近活动提要。您无法显示来自此的评论。您只能使用此[链接在您的网站上添加 Facebook 评论框](http://developers.facebook.com/docs/reference/plugins/comments/)

我希望它会帮助你。如果您有任何问题，请毫不犹豫地问我。

谢谢和问候。

# php - 使用 curl 在受验证码保护的 jsp 页面上进行 Http 发布

> ID：11293516
> 
> 赞同：0
> 
> 时间：2012-07-02T12:15:30.770
> 
> 标签：php, curl, http-post, captcha

您好我正在尝试使用 curl 在 jsp 页面上发布 Http 帖子。但它不起作用。这是我正在尝试的 php 代码。

```
<?php

if(isset($_POST['submit'])){
$captcha = $_POST['answer'];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"http://example.com/post_comments.jsp");
curl_setopt($ch, CURLOPT_REFERER, 'http://www.example.com');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 
"post_id=123&body=blabla&title=blabla&name=blablabla8&captcha=$captcha");

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$result= curl_exec ($ch);
curl_close ($ch);

echo $result;

}else {

?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">

<img src="http://example.com/captcha.jsp" /> <input name="answer" />
<p><input type="submit" name="submit" value="submit"></p>

</form>

<?php
}

?> 
```

请任何人指导纠正它。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:24:49.670

网页是由人类导航的，这就是为什么你可能会错过很多东西……比如 cookie 或会话数据。您最好的选择是向该页面发出有效请求并复制所有发出的请求。例如，您可以在 firefox/firebug 或 wireshark 中执行此操作。

简而言之：您可能缺少 cookie，模仿它们

# file-upload - Symfony2文件上传：如何在学说中保存文件路径？

> ID：11293519
> 
> 赞同：0
> 
> 时间：2012-07-02T12:15:33.900
> 
> 标签：file-upload, symfony, doctrine-orm

我在从文件上传中保存学说中的路径时遇到问题。我使用了这里的例子：[How to handle File Uploads with Doctrine](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

上传工作，但我没有得到保存到数据库的文件路径，我认为回调不起作用。至少我的上传没有文件扩展名。

我的控制器来了：

```
 public function uploadAction()
{
$document = new Document();
//$form   = $this->createForm(new DocumentType(), $entity);

$form = $this->createFormBuilder($document)
    ->add('name')
    ->add('file')
    ->getForm()
;
if ($this->getRequest()->getMethod() === 'POST') {
    $form->bindRequest($this->getRequest());
    if ($form->isValid()) {

        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($document);
        $em->flush();

        $this->redirect($this->generateUrl('document'));
    }
}

return  $this->render("ISClearanceBundle:Document:upload.html.twig",array('form' =>   $form->createView()));
} 
```

这是实体：

```
 <?php

   namespace IS\ClearanceBundle\Entity;

   use Doctrine\ORM\Mapping as ORM;
   use Symfony\Component\HttpFoundation\File\UploadedFile;
   use Symfony\Component\Validator\Constraints as Assert;

  /**
   * IS\ClearanceBundle\Entity\Document
   * @ORM\Entity
   * @ORM\HasLifecycleCallbacks
   */
  class Document
 {
 /**
  * @var string $name
  */
private $name;

/**
 *  @ORM\Column(type="string", length=255, nullable=true)
 */
public $path;

/**
 * @var integer $projectId
 */
private $projectId;

/**
 * @var integer $id
 */
private $id;

 /**
 * @Assert\File(maxSize="6000000")
 */
public $file;

/**
 * Set name
 *
 * @param string $name
 */
public function setName($name)
{
    $this->name = $name;
}

/**
 * Get name
 *
 * @return string
 */
public function getName()
{
    return $this->name;
}

/**
 * Set path
 *
 * @param integer $path
 */
public function setPath($path)
{
    $this->path = $path;
}

/**
 * Get path
 *
 * @return integer
 */
public function getPath()
{
    return $this->path;
}

/**
 * Set projectId
 *
 * @param integer $projectId
 */
public function setProjectId($projectId)
{
    $this->projectId = $projectId;
}

/**
 * Get projectId
 *
 * @return integer
 */
public function getProjectId()
{
    return $this->projectId;
}

/**
 * Get id
 *
 * @return integer
 */
public function getId()
{
    return $this->id;
}

 public function getAbsolutePath()
{
    return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
}

public function getWebPath()
{
    return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
}

protected function getUploadRootDir()
{
    // the absolute directory path where uploaded documents should be saved
    return __DIR__.'/../../../../web/'.$this->getUploadDir();
}

protected function getUploadDir()
{
    // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
    return 'uploads/documents';
}

/**
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function preUpload()
{
    if (null !== $this->file) {
        // do whatever you want to generate a unique name
        $this->path = uniqid().'.'.$this->file->guessExtension();
    }
        $this->path = uniqid().'.'.$this->file->guessExtension();
}

/**
 * @ORM\PostPersist()
 * @ORM\PostUpdate()
 */
public function upload()
{
    if (null === $this->file) {
        return;
    }

    // if there is an error when moving the file, an exception will
    // be automatically thrown by move(). This will properly prevent
    // the entity from being persisted to the database on error
    $this->file->move($this->getUploadRootDir(), $this->path);
    $this->setPath($this->path);
    unset($this->file);
}

/**
 * @ORM\PostRemove()
 */
public function removeUpload()
{
    if ($file = $this->getAbsolutePath()) {
        unlink($file);
    }
 }
} 
```

我真的不知道如何保存到数据库的路径以及如何调试。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:26:53.003

查看 upload() 方法。它具有 postPersist() ，这意味着实体更改不会保存到 DB，因此更改的属性不会存储在当前保存中。

您必须使用 prePersist 注释更新方法中的路径并使用 postPersist 在方法中移动文件。也不要取消设置 %this->file，只需分配空值。

基于你的班级

```
/**
 * @ORM\PrePersist()
 */
public function preUpload()
{
    if (null !== $this->file) {
        // do whatever you want to generate a unique name
        $this->path = uniqid().'.'.$this->file->guessExtension();
    }
}

/**
 * @ORM\PostPersist()
 */
public function upload()
{
     if (null === $this->file) {
         return;
     }

     $this->file->move($this->getUploadRootDir(), $this->path);
     $this->file = null;
} 
```

请记住，使用 move 应该在您的服务器上使用绝对路径，例如 /var/www/my_app/web/storage/uploads/file.jpg 或 C:\www\my_app\web\storage\uploads\file.jpg （不要不要太担心斜线方向，如果你只使用“/”它应该可以正常工作）

```
public static function getUploadRootDir(){
    return $_SERVER['DOCUMENT_ROOT'].'/'.$this->getUploadDir(); 
} 
```

# java - 日期到 SQLDate

> ID：11293523
> 
> 赞同：0
> 
> 时间：2012-07-02T12:15:43.920
> 
> 标签：java

我有一个简单的函数转换`date`为`java.sql.date`.

```
public static java.sql.Date getSqlDate(String dateStr, String format) {
    java.sql.Date dt = null;
    Date date;
    SimpleDateFormat df = new SimpleDateFormat(format);
    ParsePosition pos = new ParsePosition(0);
    date = df.parse(dateStr, pos);
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    dt = java.sql.Date.valueOf(cal.get(cal.YEAR) + "-" + (cal.get(cal.MONTH)+1)
            + "-" + cal.get(cal.DATE));
    return dt;
} 
```

问题是当我使用以下命令调用此函数时，我得到一个`IllegalArgumentException`.

"2008-02-04", "yyyy-dd-MM"

可能是我无法在代码中发现错误，因此希望有另一双眼睛来调查这个问题并请纠正我......

-- 米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:26:48.290

尝试，

```
java.util.Date dt = null;
SimpleDateFormat df = new SimpleDateFormat(format);
ParsePosition pos = new ParsePosition(0);
date = df.parse(dateStr, pos);
java.sql.Date sqlDate = new java.sql.Date(date.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:17:53.313

不应该是：

```
dt = java.sql.Date.valueOf(cal.get(cal.YEAR) + "-" + cal.get(cal.DATE)  + "-" +(cal.get(cal.MONTH)+1)); 
```

同意 yyyy-dd-mm 格式，因为您的代码示例显示 yyyy-mm-dd 格式：

```
cal.get(cal.YEAR) + "-" + (cal.get(cal.MONTH)+1) + "-" + cal.get(cal.DATE) 
```

# javascript - 将 onclick 添加到页面上的所有锚点，具有特定类的锚点除外

> ID：11293525
> 
> 赞同：0
> 
> 时间：2012-07-02T12:15:52.980
> 
> 标签：javascript, jquery

我确信这应该用 Jquery 相对容易地做到，但我的尝试到目前为止还没有奏效（我对 Jquery 有点陌生）。

任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:17:18.737

尝试使用[`not()`](http://api.jquery.com/not/)方法

```
$('a').not('.someClass').click(function() { 
    //your code here...
}); 
```

**注意**：您也可以使用[not 选择](http://api.jquery.com/not-selector/)器直接进行过滤，这对性能更好。

```
$('a:not(.someClass)').click(function() { 
    //your code here...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:20:13.433

您可以使用 jQuery[`:not`](http://api.jquery.com/not-selector/)选择器：

```
$("a:not(.some-class)").on("click", function(){
}); 
```

或[`.not()`](http://api.jquery.com/not/)功能

```
$("a").not(".some-class").on("click", function(){
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:18:19.517

```
$(function(){

  $('a').not('.yourClassToIgnore').click(function() { 
    //do somethng    
  });

}); 
```

Jsfiddle 示例：http: [//jsfiddle.net/S5XLv/2/](http://jsfiddle.net/S5XLv/2/)

# php - 邮件脚本错误 - 从哪里开始？

> ID：11293532
> 
> 赞同：0
> 
> 时间：2012-07-02T12:16:20.313
> 
> 标签：php, email

我收到了一个不发送任何电子邮件的邮件脚本（作为更大 CMS 的一部分）。而且我一生都无法弄清楚为什么它不发送任何电子邮件。我添加了更多错误处理（我在其他问题上发现的）并检查了我的错误日志但无济于事。

这是代码，出于隐私考虑，我删除了代码的`body`和`title`。但是，问题不存在，因为我尝试仅使用纯文本发送它。

```
<?php include '../includes/header.php' ; ?>
<link rel="stylesheet" type="text/css" href="/vidvdcms/css/formstyle.css" />
<?php

// For testing only
error_reporting(E_ALL);

$result =  mysql_query("SELECT * FROM klant, bestellingen WHERE klant.klant_id LIKE '".$_GET['mail']."' ORDER BY bestellingen.order_id DESC LIMIT 1") or die(mysql_error());
while($row = mysql_fetch_array($result)){

// multiple recipients

$to = ''.$row['email'].'';
$name = '' . $row['voornaam'] . ' ' . $row['achternaam'] . ''; 

// subject
$subject = 'REDACTED - SUBJECT OF EMAIL';

// message
$message = 'REDACTED - BODY OF MAIL WITH HTML/GETS';

}

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: XXXX <XXX@emaple.com>' . "\r\n";
$headers .= 'Bcc: XXX@gmail.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);

print "REDACTED - Email sent succesful message"; 

mysql_close($link)
?> 
```

**编辑**：我已经三次检查了代码，它似乎工作正常。我尝试了一个在网上找到的简单邮件脚本，**但也没有发送**. 我在另一台服务器上尝试过，它发送了。所以我认为是服务器？我该如何检查？我接下来要尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:28:11.327

假设您的问题是关于如何正确调试：

从哪里开始启用所有 PHP 日志记录：

```
ini_set('display_errors', 1);
ini_set('error_reporting', E_ALL); 
```

然后看看你在屏幕上得到了什么。

您还需要在邮件服务器上找到日志并查看其中是否有任何消息。

如果这没有帮助，请让[Xdebug](http://xdebug.org/)工作并在您的 IDE 中逐行执行代码（Google for Xdebug setup instructions for your specific IDE），看看所有变量是否符合您的预期。

如果您需要解决此问题的具体帮助，则需要粘贴上述步骤的一些错误输出。

# html - 使用“空白：pre”在 HTML 选择元素选项中保留空白不起作用

> ID：11293536
> 
> 赞同：14
> 
> 时间：2012-07-02T12:16:36.997
> 
> 标签：html, whitespace, html-select

我的问题来自 HTML 下拉选择无法在其选项中保留多个连续的空格。这是一个示例测试用例和结果。

“white-space:pre”类 CSS 似乎只适用于除选择元素选项之外的任何 HTML 元素。是否有任何文献或案例表明此类问题？

```
print "<style>.keepwhitespace { white-space: pre }</style>
<p class='keepwhitespace'>abc   def</p>
abc   def
<br/>
<br/>select and options with keepwhitespace
<select onchange=\"alert('\''+this.value+'\' '+this.value.length)\" class='keepwhitespace'>
<option class='keepwhitespace'>Any </option>
<option class='keepwhitespace'>abc   def </option>
<option class='keepwhitespace'> Any  </option>
<option class='keepwhitespace'>abc def </option>
</select>
<br/>select with keepwhitespace
<select onchange=\"alert('\''+this.value+'\' '+this.value.length)\" class='keepwhitespace'>
<option >Any </option>
<option >abc   def </option>
<option> Any  </option>
<option>abc def </option>
</select>
<br/>options with keepwhitespace
<select onchange=\"alert('\''+this.value+'\' '+this.value.length)\">
<option class='keepwhitespace'>Any </option>
<option class='keepwhitespace'>abc   def </option>
<option class='keepwhitespace'> Any  </option>
<option class='keepwhitespace'>abc def </option>
</select>"; 
```

结果如下所示：

从“p”元素标签中可以看出（以及我尝试使用的任何其他标签，都可以很好地使用“空白” CSS 样式格式化文本。但是选择没有。

![从图中可以看出](../Images/edc15f84169beb69a9b9ee7aba1d7250.png)

在选择查看项目值字符串和字符串长度（长度应该是 10 而不是 7，'abc def' 的长度是 8 个字符）

![在选择查看项目值字符串和字符串长度（长度应该是 10 而不是 7，'abc def' 的长度是 8 个字符）](../Images/c9a5e03106cfa99a872de029f0ed9219.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T12:28:11.997

表单输入通常映射到其相关的本机操作系统控件，因此它们很难设置样式。防止空格在`<option>`s 中折叠成 1 个空格的常用解决方法是使用`&nbsp;`而不是通常的空格。

例如。您的选择之一是：

```
<option>&nbsp;Any&nbsp;&nbsp;</option> 
```

对于更多自定义外观，您将完全隐藏真正的选择元素并用自定义标记和 javascript 替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-02T19:18:49.980

从服务器端语言动态创建 SELECT 列表时，接受的答案是正确的。但是，如果您想使用 document.createElement 函数在 Javascript 中创建选项列表（使用输入时可能是最安全的方法，但您不能始终完全控制），那么您可以使用以下方法：

```
var someSelectElement = document.getElementById("id_of_select_element");
var optionSt = "Some spaces     go here.";
var tObj = document.createElement("OPTION");

tObj.value = 1; // whatever value you need.
tObj.title = "Whatever title you want to appear when hovering over the option";

tObj.text = decodeURI(optionSt.replace(/ /g, "%C2%A0")); // decodeURI is the key here.

// Then add it to an already existing HTML select element...
someSelectElement.appendChild(tObj); 
```

# objective-c - 为 OpenCV 设计 isImgVisible 函数？

> ID：11293537
> 
> 赞同：0
> 
> 时间：2012-07-02T12:16:39.660
> 
> 标签：objective-c, macos, image-processing, opencv, objective-c++

我正在使用 OpenCV 分析在需要之前制作的屏幕截图，并允许我的应用程序与程序交互。

为了让我的应用程序知道目标程序处于哪个阶段，我希望通过 OpenCV 设计一个 isImgVisible 函数，它将图像作为参数，并返回所提供图像的布尔值和屏幕坐标（如果在屏幕上找到）。

这是可行的吗？如果是这样，你会怎么做？

# svn - 与 Subversion 等效的“.gitignore”文件

> ID：11293539
> 
> 赞同：63
> 
> 时间：2012-07-02T12:16:50.710
> 
> 标签：svn

我被迫在当前项目上使用 Subversion。

有人不友好地将`bin`和`obj`文件夹添加到存储库中。

除了删除它们并提交删除之外，是否有一个等效的 .gitignore 文件我可以添加到存储库中，以使开发团队中的有罪方不再添加它们？

我知道我可以改变自己的全局忽略模式，但理想情况下，我希望整个开发团队能够在项目级别上分享这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-02T12:20:46.697

这是通过 SVN 中的 svn:ignore 属性完成的。可以将此属性添加到文件夹中。让我们想象一下：

```
 +-- root
       +-- bin
       +-- ... 
```

要忽略 bin 文件夹，您必须将 svn:ignore 属性设置到根文件夹。首先更改到根文件夹并在命令行上执行以下操作：

```
svn propset svn:ignore "bin" . 
```

或者你可以通过 Windows 上的 TortoiseSVN（文件->属性->Subversion 选项卡）来执行此操作。在[Subversion book](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html)中进一步阅读。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-31T03:52:51.497

我刚开始使用 Android Studio，最后在 GUI 中编辑了 svn:ignore 属性。我使用了 Subversion 菜单中的 Edit Properties 并添加了一大堆在其他帖子中提到的忽略。

![在此处输入图像描述](../Images/f77063d68422bbd9e3c3047ca849e99a.png)

以下是我忽略的内容，Android Studio 在我编辑属性后用不同的颜色直观地标记了这些内容。

```
# built application files
*.apk
*.ap_

# files for the dex VM
*.dex

# Java class files
*.class

# generated files
bin
gen
gradle

# Local configuration file (sdk path, etc)
local.properties

# Eclipse project files
.classpath
.project

# Android Studio
.idea
.gradle
local.properties
out
build
production
*.iml
*.iws
*.ipr
*~
*.swp 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-02T12:19:58.517

采用：

```
svn propset svn:ignore 'file you want to ignore' 
```

请参阅*[属性](http://svnbook.red-bean.com/en/1.1/ch07s02.html)*。

另请查看[global-ignores 配置选项](http://svnbook.red-bean.com/en/1.1/ch07.html#svn-ch-7-sect-1.3.2)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-07T19:04:54.880

如果您正在使用 TortoiseSVN，这可以通过以下方式完成：

*   右键 bin 目录 -> TortoiseSVN -> 添加到忽略列表 -> bin

当您提交时，您的根目录或主干目录将突出显示。您也可以通过选择它们来同时忽略多个文件

*   右键单击 -> TortoiseSVN -> 添加到忽略列表 -> 按名称忽略*X*项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T16:25:28.233

我更喜欢隐藏状态项而不是使用`svn:ignore`。为此，我创建了一个`.svnignore`文件，其中包含我想忽略的模式和此别名：

```
alias svn-status='svn st * 2>&1 | grep -v "$(cat .svnignore)"' 
```

# javascript - 关于backbone.js视图的渲染功能的困惑

> ID：11293545
> 
> 赞同：1
> 
> 时间：2012-07-02T12:17:10.300
> 
> 标签：javascript, backbone.js

刚开始使用backbone.js 和javascript。在我的收藏中，我可以监听“reset”事件并让它调用我的视图（this）的“render”函数。但是我将视图添加到路由器中的 DOM 中，如下所示：

```
$('#container').html(view.render().el) 
```

我调用 render().el （我假设它返回一些 HTML 文本）并将其添加到我的容器 div 中。仅在我的视图上调用渲染是没有用的。那么为什么我的视图会在仅调用渲染函数的“重置”事件上完美更新（这是无用的，因为它只是返回 self（视图对象），实际更新发生在我的路由器中，其中视图的渲染 el 被附加到我的容器中分）？

我正在关注一个教程，为什么我知道答案，只是不知道背后的原因。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:35:00.217

在`$('#container').html(view.render().el)`您将`view`' 的顶部元素插入您的`#container`-element 时，如下所示：

```
<div id="container">
  <div class/id="whatever-your-view-has-defined">
    <!-- THIS IS WHERE YOUR VIEW PUTS ANYTHING GOING TO $(this.el) or this.$el -->
  </div>"
</div> 
```

因此，当您在视图的相应集合或模型完成获取之前调用渲染时，您可能只是将视图自己的元素插入容器中。现在，当您的集合/模型完成获取并触发 a`reset`时，视图会再次呈现。我想你的渲染看起来像这样：

```
render: function() {

  // do something with $(this.el) or this.$el

  // loop through collection and insert something from each model to the view
  // OR
  // take the view's model and insert it to the view
  // I reckon the inserting is done with templates or jQuery manipulation

  //finally 
  return this; // return this to allow chaining render to other things like calling el
} 
```

这基本上意味着您的第一次渲染将您的视图暂存到 DOM 中，然后调用的渲染将`reset`用内容填充它。你可以放弃

```
$('#container').html(view.render().el) 
```

部分，例如，如果您将视图的`id`-property 设置为`content`，则视图将自动寻找具有标识符`content`的元素作为它的元素。但是随后您的所有视图内容将直接插入到内容元素中。

希望这会有所帮助，如果仍有不清楚的地方，请发表评论！

# java - 无法在 Apache CXF + JAX-RS 中同时将字符串和文件作为参数发送到 Web 服务

> ID：11293553
> 
> 赞同：0
> 
> 时间：2012-07-02T12:17:52.323
> 
> 标签：java, web-services, file-upload, cxf, jax-rs

我正在尝试创建一个文件上传网络服务，它还需要一些字符串作为参数作为我项目的一小部分传递......

到目前为止，我已经设法创建了一个文件上传网络服务。但它仅在我仅传递要上传的文件作为输入时才有效。现在我修改了网络服务以接受一些参数。但它给了我错误：

> java.lang.IllegalArgumentException: URLDecoder: 转义 (%) 模式中的非法十六进制字符 - 对于输入字符串：“&'”

我在这里复制了整个堆栈跟踪，我觉得这对我毫无意义。这是我的网络服务：

```
 @POST 
@Path("/postdata") 
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void postData3(List<Attachment> atts, @FormParam("username") final String username, @Context HttpServletRequest request)
{
    System.out.println(username);
    String home = "/home/yashdosi/s";
    for(Attachment att : atts)
    {
        DataHandler dataHandler = att.getDataHandler();
        try 
        {
            InputStream stream = dataHandler.getInputStream();
            MultivaluedMap map = att.getHeaders();
            OutputStream out = new FileOutputStream(new File(home + "//" + getFileName(map)));

            int read = 0;
            byte[] bytes = new byte[1024];
            while ((read = stream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            stream.close();
            out.flush();
            out.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

这是我的 Java 客户端：

```
 HttpClient httpclient = new DefaultHttpClient();
    try {
        HttpPost httppost = new HttpPost("http://localhost:8080/fileupload-ws/services/postdata");

        FileBody img = new FileBody(new File("/home/yashdosi/1.jpg"));
        FileBody html = new FileBody(new File("/home/yashdosi/hotmail.html"));
        StringBody contentBody = new StringBody("some.email@gmail.com");

        MultipartEntity reqEntity = new MultipartEntity();
        reqEntity.addPart("image", img);
        reqEntity.addPart("html", html);
        reqEntity.addPart("username", contentBody);

        httppost.setEntity(reqEntity);
        //httppost.setHeader("Content-Type", "multipart/form-data");

        System.out.println("executing request " + httppost.getRequestLine());
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (resEntity != null) {
            System.out.println("Response content length: " + resEntity.getContentLength());
        }
        EntityUtils.consume(resEntity);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    finally {
        try { httpclient.getConnectionManager().shutdown(); } catch (Exception ignore) {}
    } 
```

任何想法是什么导致了这个错误？或者我应该如何解决这个问题！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:23:10.097

尝试使用`@MultiPart(value="image")`图像、 `@MultiPart(value="html")`html 和`@MultiPart(value="username")`内容正文。为我工作。

# php - PHP：上传大文件

> ID：11293556
> 
> 赞同：-2
> 
> 时间：2012-07-02T12:17:58.740
> 
> 标签：php, upload, nginx

谁能帮我**编写**在 PHP 网站上上传**非常**大的文件（如**1Gb ）的代码？**

nginx可以用吗？

有些人告诉 nginx 很好，有些人告诉那不好必须使用基于事件的服务器。请给我一个解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:47:34.680

你需要类似的东西：

**nginx.conf**

```
client_max_body_size           1024m; 
```

**php.ini**

```
post_max_size = 1024M
upload_max_filesize = 1024M 
```

那应该工作得很好。

请注意，对于这种类型的文件传输，HTTP 并不是真正的最佳协议，即使您让一切都在您身边工作，您也依赖于浏览器。

# c# - 为什么要创建外键约束？

> ID：11293557
> 
> 赞同：3
> 
> 时间：2012-07-02T12:18:01.480
> 
> 标签：c#, asp.net, sql, database, oracle

我正在为 Timesheet 应用程序设计一个 oracle 数据库。我想知道是否真的有必要对表（Master 和 Child）进行外键约束。

正如我们所知，理论上在表上具有适当的参照完整性是件好事，但我们真的需要它们吗？

我听说外键使数据库在每个 DML 操作上额外工作，因为它必须检查 FK 一致性。这会降低性能。但另一方面，在在子表中插入新行之前已删除主键的情况下，它可能会有所帮助。

性能是时间表应用程序中的一个主要问题，在月底（可能同时）将有大约 250 人填写他们的时间表。

如果我在表上没有外键约束，那么每次在子表中插入新记录之前，如果主表中存在主键，我是否必须先检查它（在存储过程中）？

**补充：**过去，我曾与许多经验丰富的 oracle 数据库开发人员一起工作，我们从未在表上使用过外键约束。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-02T12:26:38.760

我会说开发*具有*适当外键约束的应用程序，然后*测量*性能，如果性能是一个问题，*测量*带有 FK 约束和没有 FK 约束的 DB 之间的差异，*如果*它们被证明是一个性能问题，请*考虑*消除他们。

您不太可能发现它们是任何性能问题的根源，我不建议从一开始就完全忽略它们，因为猜测它会带来更好的性能。

您*不需要*它们，就像您*不需要*验证输入、佩戴安全带等一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:40:40.777

使用参照完整性，插入或更新键列时性能会受到轻微影响。然而，这几乎总是超过补偿

1) 可靠一致的数据

2)[显着提高查询时间](http://www.scarydba.com/2010/11/22/do-foreign-key-constraints-help-performance/)

但是，实际上，如果您不强制执行参照完整性，那么到底为什么要使用参照数据库呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-02T12:57:17.050

任何确保强制执行外键的方法（例如在 sp 或 trigger 中）都将至少与引用约束一样慢（预计它会慢得多）。唯一更快的可能性是确保您的应用程序没有任何错误并且不会创建丢失的引用。由于某些原因，这太难了：

考虑以下场景：表 A 有一个引用表 B 的列，一个用户在 B 中插入一行，在任何人在 A 中使用它之前，决定删除它......同时，另一个用户已经打开了插入表单A 有一个由 B 行填充的组合框。当他保存此 A 时，它可以引用错误的 B，我认为没有自然架构可以防止这种情况发生，这可能比关系本身更快。

我可以继续提供尽可能多的示例，但简而言之，我在应用程序架构方面的经验表明，尽可能多地保留模式级别的约束，并有更多时间与家人共度！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T13:45:35.107

除了其他人关于数据一致性和查询性能的说法......

在数据库中拥有外键也是文档——您无需翻阅代码库即可了解表应该如何关联。随着数据库中表数量的增加或访问该数据的应用程序数量的增加（或者您无权访问代码并且您仍然需要理解数据），这一点变得更加重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T12:32:12.233

我的 2 美分……250 个人没什么好担心的。数据库可以处理大量数据和引用。这就是他们的目的。显然，在创建键和结构时要动动脑筋。但是您将获得准确的数据和适当的密钥，而不是可能的噩梦来构建报告等等......最后......这就是你描述的应用程序的重点，简化和协助数据输入并加强数据准确性。

# itunes - 如何在 iTunes 上获取我的应用统计信息？

> ID：11293560
> 
> 赞同：7
> 
> 时间：2012-07-02T12:18:18.877
> 
> 标签：itunes

我最近发布了一款 iPhone 应用程序，但我没有看到任何方法可以像在 Google Play 中那样检查应用程序的统计信息。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:33:39.047

您可以通过[iTunes Connect](https://itunesconnect.apple.com/)进行操作。

登录您的帐户，然后查看下载量，请转到**销售和趋势**。

下载统计信息每天更新一次。

要查看用户评论、定价等，请转到**管理您的应用程序**，选择您想要的应用程序，然后您可以从那里看到：

*   **顾客评论**
*   **为您的应用设置价格**
*   **管理 Game Center 或设置 iAD 网络**（如果您的应用程序使用 iAd）。
*   **设置应用内购买** *（如果您的应用使用 iAP）*

通过再次点击您应用的图标，您将能够查看有关您的应用的详细信息，例如

*   **版本摘要** *一个小摘要，可让您检查应用在商店中的显示方式*
*   **崩溃报告** *可让您检查崩溃报告*
*   **Binary Details** *关于二进制的小总结*
*   **Status History** *关于应用程序状态的一些历史记录*
*   **客户评论** *（再次）*

并编辑应用程序的元数据，例如描述、屏幕截图、本地化等。

然后，您还可以检查您的付款（如果您要发布付费应用程序）等等。

但是，您无法检查的是用户正在使用的 iOS 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T14:25:50.673

我认为 Pheel 提供的所有信息都是正确的，扩展仍然是正确的，但 Apple 刚刚更新了[https://itunesconnect.apple.com](https://itunesconnect.apple.com)网站，您可以调整屏幕中间的日期范围（使用滑块）或调整日期导航到销售和趋势屏幕后的左上角，查看您的下载量。
我个人更喜欢这个统计屏幕，而不是苹果以前提供的统计屏幕，因为你可以在一个屏幕上调整日期，看看你有多少下载。![在此处输入图像描述](../Images/51579070fbeb3c61dcebc7183bf346ba.png)

# ubuntu-10.04 - pythonbrew 不再存在

> ID：11293562
> 
> 赞同：1
> 
> 时间：2012-07-02T12:18:24.490
> 
> 标签：ubuntu-10.04, pythonbrew

所以我前几天在我的 ubuntuo 11.04 上安装了 pythonbrew - 实际上是昨天 - 现在我无法“找到”它。在我切换到 2.7.2 之前，现在我对 pythonbrew 的所有请求都以错误结尾-

```
 pythonbrew: command not found 
```

我做错了什么，我的 pythonbrew 在哪里？

```
which pythonbrew 
```

不返回任何东西...我是打算让 pythonbrew 成为某种启动的东西吗？

ps如果你还没有猜到，我对unixy的东西*不是*很熟悉，如果这是一个obvi问题，对不起。

更新我按照这个 SO 项目安装了 pythonbrew：[Python 2.7 on Ubuntu](https://stackoverflow.com/questions/5233536/python-2-7-on-ubuntu)

UPDATE2好的，所以我按照那个链接重新安装了pythonbrew（即我从我的/目录运行 curl -kL [http://github.com/utahta/pythonbrew/raw/master/pythonbrew-install](http://github.com/utahta/pythonbrew/raw/master/pythonbrew-install) | bash）

那告诉我它已将 pythonbrew 安装到 /home/{loginname}/.pythonbrew 目录

所以我去了*那里*，然后我在那个链接中运行了另一条线（我知道这条线的作用，但是运行它！）。$HOME/.pythonbrew/etc/bashrc

好的，现在 pythonbrew 又回来了并运行了。更好的是，我在安装 pythonbrew 后通过 pip 安装的 virtualenv*也*回来了。我不知道发生了什么，但显然每次我登录时我都需要

1.  转到 /home/{loginname}/.pythonbrew 目录

2.  跑 。$HOME/.pythonbrew/etc/bashrc

如果ubuntu可以在启动/登录时执行上述两个步骤，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T00:26:58.790

如果你添加

```
[[ -s $HOME/.pythonbrew/etc/bashrc ]] && source $HOME/.pythonbrew/etc/bashrc 
```

到 /home/{loginname} 目录中的 .bashrc 文件的末尾，Linux 将自动获取 pythonbrew 的 bashrc（假设您的权限都正确）。

将新行添加到您的 .bashrc 后，要么运行

```
source /home/{loginname}/.bashrc 
```

或启动一个新终端

# actionscript-3 - 为多个项目公开课程

> ID：11293570
> 
> 赞同：0
> 
> 时间：2012-07-02T12:19:08.623
> 
> 标签：actionscript-3, actionscript

我们正忙着为几个插件制作插件。这些都是单独的项目。我们编写了一个自定义类来处理插件的所有日志记录。这在所有项目中都是一样的。

我们是否可以将日志记录类放在一个单独的文件夹中，该文件夹对所有项目都了解，并且在编译时会自动添加到项目中？

这样我们就不必每次都复制每个项目中的文件并更改路径等。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:42:35.797

您无法在构建项目时将文件夹自动添加到项目中，必须提前引用它，否则代码完成（例如，代码完成）将无法工作。

您可以创建一个包含全局文件的库项目 (.swc)，并将该项目添加到每个模块的**构建路径**中。您可以通过右键单击模块、选择属性并在构建路径下添加对您的库的项目引用来执行此操作。

祝你有美好的一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:16:18.817

如果您想避免编译单独的 swc 库并希望将源 (.as) 文件用作库，那么您需要做的是引用包含您的库（您的 .as 文件）的文件夹在您的 IDE 中。这个过程在 IDE 之间会有所不同，但是，例如

*   在 Flash Professional CS5 中，打开您要处理的项目，然后转到文件 > 发布设置 > Flash 选项卡 > ActionScript 3.0 设置 > 源路径选项卡。然后在标有“包含 actionScript 类文件的文件夹”的列表中添加您的库路径。或者，您可以通过在“编辑”>“首选项”>“动作脚本”>“动作脚本 3.0 设置”中包含路径来使所有项目都可以访问该库。这样您就不必调整每个项目的发布设置。

*   在 Flash Builder 4 中，打开您要处理的项目，然后转到项目 > 属性 > ActionScript 构建路径 > 源路径选项卡。然后在标有“主源文件夹之外的其他源文件夹”的列表中添加您的库路径。

And you're done. You can then reference the logging class from anywhere inside your projects, provided that you insert the appropriate 'import' statement at the top of the .as file you're working on.

# build - cmake 创建一个共享对象

> ID：11293572
> 
> 赞同：14
> 
> 时间：2012-07-02T12:19:23.463
> 
> 标签：build, cmake, shared-libraries

我有三个文件：

lib.c lib.h => 它们应该构建为 .so 文件
client.c => 这应该构建为可执行文件。
在 client.c 中，我包含 lib.h 文件，以便获取在 lib.c 下定义的函数的声明

有人可以告诉我我应该使用的确切 CMakeLists 文件，以便源区域不会被 Cmake 的临时文件和二进制文件和库（我相信是 Windows 的情况下）在单独的构建和二进制目录中生成的杂乱无章吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-23T19:18:15.687

此解决方案不会创建`.so`文件，而是创建一个等效的 cmake，以便进一步包含在 cmake 中。
我正在寻找一个解决方案，将提供与此等效的解决方案：

```
g++ -shared -Wl,-soname,plugin_lib.so.1 -o plugin_lib.so plugin_lib.o 
```

这将生成一个`plugin_lib.so`可以在运行时使用 dlopen 动态加载的。

解决方案缺少“共享”选项，如下所示：

```
ADD_LIBRARY(mylib SHARED ${mylibSRCS}) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T12:45:19.160

默认情况下，Cmake 在单独的构建目录上构建（我没有测试这个例子）：

```
PROJECT(myproject)
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(mylibSRCS lib.c)
SET(myprogSRCS client.c)

ADD_LIBRARY(mylib ${mylibSRCS})
ADD_EXECUTABLE(myprog ${myprogSRCS})

TARGET_LINK_LIBRARIES(myprog mylib) 
```

你做：

```
mkdir build
cd build
cmake ..
make 
```

一切都在建设中。

更新：正如下面@chryss 所提到的，如果你想生成 .so 文件，命令应该是：

```
ADD_LIBRARY(mylib SHARED ${mylibSRCS}) 
```

# c - openCv中的连通分量提取

> ID：11293576
> 
> 赞同：0
> 
> 时间：2012-07-02T12:19:45.027
> 
> 标签：c, image-processing, opencv

任何人都可以建议一种在 8 位单通道帧中提取连接组件的 openCV 方法吗？cvBlobs 适合这个吗？除此之外，我想在 C 代码中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:24:56.743

似乎[cvFindContours](http://opencv.willowgarage.com/documentation/c/imgproc_structural_analysis_and_shape_descriptors.html#findcontours)函数可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:03:59.443

我会做出答案，因为我无法评论其他答案。

我不这么认为 cvFindContours() 可以很好地提取连接的组件。例如，从连续的 Canny 输出中，来自 cvFindContours 的输出是分段的，我认为函数运行连接的组件，当存在可以连接更多组件的点时，它会选择一些路径。从该点开始的组件（未分配给上一个）存储在不同的轮廓中。

因此函数 cvFindContour 不适用于连通分量分析。当我想要非分段轮廓时，我编写了自己的函数，从精明的输出中提取它们。

基于 OpenCV 的 Blob 提取库具有连接组件功能。你也可以自己写。伪代码中有很多易于实现的算法。

# scala - 在 Scala 编译器插件中加载本机库

> ID：11293577
> 
> 赞同：2
> 
> 时间：2012-07-02T12:19:51.360
> 
> 标签：scala, dll, eclipse-plugin, scala-ide, scalac

我正在开发一个 scala 编译器插件。编译器插件在“refcheck”阶段之后运行。它分析 AST（抽象语法树）并生成一些输出。在这个插件中，我正在加载一个本机库“scalaz3.dll”，使用`System.loadLibrary`

我计划将编译器插件与 Eclipse Scala IDE 一起使用。我`-XPlugin`在 ScalaIde 首选项中设置了参数。当我在 Eclipse 中编译 scala 源文件时，该插件在该`refchecks`阶段之后被调用并且工作正常（生成所需的输出）

但是，当我对源文件进行更改并编译时，出现以下错误。

```
The SBT builder crashed while compiling your project. 
Native Library scalaz3.dll already loaded in another classloader. 
```

看起来 ScalaIDE 生成了另一个类加载器并尝试在同一进程中加载​​插件类。

我在编译器插件测试用例中遇到了同样的问题。但是，我`fork in Test := true`在`build.sbt`. 但我对如何在 eclipse scala IDE 中修复它一无所知。

以下是一些相关的帖子（尽管与 eclipse scala ide 无关）：

*   [.dll 已经加载到另一个类加载器中了吗？](https://stackoverflow.com/questions/1030792/dll-already-loaded-in-another-classloader)
*   [http://www.coderanch.com/t/79145/Websphere/Native-lib-already-loaded-another](http://www.coderanch.com/t/79145/Websphere/Native-lib-already-loaded-another)
*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4750956](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4750956)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:13:53.753

IDE 在进程内使用 sbt，因此不存在分叉的等价物。难道你不能只加载 dll 一次，例如通过在 的构造函数中加载它`object`吗？

[这里](https://cwiki.apache.org/confluence/display/tomcat/HowTo#HowTo-I%27mencounteringclassloaderproblemswhenusingJNIunderTomcat)建议使用该技术：

> 调用的类`System.loadLibrary(String)`必须由不受重新加载 Web 应用程序本身影响的类加载器加载。
> 
> 因此，如果您的 JNI 代码遵循包含静态初始化程序的约定，如下所示：
> 
> ```
> class FooWrapper {
>     static {
>         System.loadLibrary("foo");
>     }
> 
>     native void doFoo(); 
> } 
> ```
> 
> [...]

# android - 如何在动态日期和时间上设置闹钟？

> ID：11293580
> 
> 赞同：0
> 
> 时间：2012-07-02T12:20:09.140
> 
> 标签：android, alarmmanager, android-alarms

安卓2.1

代码：

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.YEAR, year);
cal.set(Calendar.MONTH, month);
cal.set(Calendar.DAY_OF_MONTH, day);
cal.set(Calendar.HOUR, hour);
cal.set(Calendar.MINUTE, minute);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);

Intent intent = new Intent(this, AlarmReceiver.class);
intent.putExtra("message", header);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

当我**不**设置日期时间而只*添加几秒钟时，它可以完美运行*。

但是，当我确实设置了日期和时间（我从不同的活动中获取数据作为答案）时，它不起作用，我三次检查我得到的数据是否正确。

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:43:08.860

正如您所说，我认为这可能是您的代码中唯一的问题，

> 当我不设置日期和时间而只添加几秒钟时，它可以完美运行。

您在变量 like 中获得不同的值`month,date,year`并将它们设置为`Calendar`对象。

仅供参考：**日历对象需要几个月，因为 January = 0 和 December = 11 ，**

而且我怀疑您是否将它们设置为*Jan=1 和 Dec=12*，因此您未知*地在警报中设置了下个月的日期*以触发。

检查你得到的月份的价值并申请`cal.set(Calendar.MONTH, month-1);`，然后它就会起作用。

* * *

如果您已经在循环中编写了警报代码，那么请注意每次都传递唯一的 id`PendingIntent`而不是一个静态值。

# php - phpseclib/jsbn：在 PHP 中使用公钥加密，在 jsbn 中使用私钥解密

> ID：11293589
> 
> 赞同：3
> 
> 时间：2012-07-02T12:20:35.280
> 
> 标签：php, rsa, phpseclib, jsbn

我可以在客户端使用[jsbn](http://www-cs-students.stanford.edu/~tjw/jsbn/)成功生成公钥/私钥对。使用这些密钥加密和解密客户端就可以了。我还可以将该公钥传输到服务器并通过 PHP 将其存储在 MySQL 中。

我无法使用 jsbn 公钥在 PHP 中加密某些内容，然后使用 jsbn 私钥在客户端对其进行解密。

```
// attempting to encrypt in PHP using the jsbn public key.
// (this public key came from jsbn client side)
$jsbn_public_key = '763989d1f75a779dae752ac236b011e85f9496bb414d72f5e89bf44274a942277fab2d4f5c58a57634d4000eecc8009d2efaeff17aa4a0efae2c4d41f3423be88be043628c6bac86f97deaadf23231793e6fa02550fb2ca65b2600e074205d23338e28ab3c5e92265e6bd7995c173085e3dc042e59ef464c5ed058c3ad863911';
$rsa = new Crypt_RSA();
$rsa->setPublicKeyFormat(CRYPT_RSA_PUBLIC_FORMAT_PKCS1); // tried various options here.
$public_key = array(
    'n' => new Math_BigInteger($jsbn_public_key, 16),
    'e' => new Math_BigInteger('65537', 10), // same value as jsbn
);
$rsa->loadKey($public_key,CRYPT_RSA_PUBLIC_FORMAT_RAW);  // tried various options here.
$ciphertext = $rsa->encrypt($value);
$ciphertext_web_safe = bin2hex($ciphertext); // I think this is where the problem is!
// $ciphertext_web_safe looks something like this:
// 1b02bee0422028accba74f37e6e6974125fd16bdf83a72b8d6462e140ee6e85adae869fddc5e83635aaf90bc6074a3128890eeadf9537c33ebdfd665e16a3f1b617fa2fa5454f469e84f86d77ffcbc234dfc8a32291fbc84df61a0098c97fd90bb10204f68e783d9996678cd7853f3cbd932a4a067cb7f4f9eb62ca0542964f6
// which is exactly the same length as an encrypted string generated by jsbn 
```

这是客户端加密：

```
var my_rsa = {
    ....
    e: "65537",
    public_key: '763989d1f75a779dae752ac236b011e85f9496bb414d72f5e89bf44274a942277fab2d4f5c58a57634d4000eecc8009d2efaeff17aa4a0efae2c4d41f3423be88be043628c6bac86f97deaadf23231793e6fa02550fb2ca65b2600e074205d23338e28ab3c5e92265e6bd7995c173085e3dc042e59ef464c5ed058c3ad863911',
    encrypt: function(value){
        var rsakey = new RSAKey();
        rsakey.setPublic(this.public_key, this.e);
        return rsakey.encrypt(value);
    },
    decrypt: function(ciphertext){
        var rsakey = new RSAKey();
        rsakey.setPrivateEx(this.public_key, this.e, this.private_key.d, this.private_key.p, this.private_key.q, this.private_key.dmp1, this.private_key.dmq1, this.private_key.coeff);
        return rsakey.decrypt(ciphertext);
    },
    ....
}; 
```

当我尝试在 JavaScript 中解密 '$ciphertext_web_safe' 值时，我只得到一个空字符串。控制台日志等中没有错误。

PHP中使用的“bin2hex”有问题吗？在将加密的二进制数据转换为十六进制之前是否应该应用某种填充等？

干杯，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:27:01.330

我的问题是javascript中的“e”。

我将“65537”更改为“010001”，现在我可以使用公钥和 PHP 加密服务器端。呸！

# windows-phone-7 - 如何识别当前在 Windows Phone 7 中使用的 GPS 模式

> ID：11293597
> 
> 赞同：1
> 
> 时间：2012-07-02T12:21:01.667
> 
> 标签：windows-phone-7, geolocation, gps, navigation

我正在开发一个 WP7 应用程序，其中我需要检查使用的 GPS 模式是全 GPS 还是 A-GPS。

我找不到任何可以为我提供此输入的 API。几天前，我从市场上下载了一个名为 GPSInfo 的应用程序，并得知该应用程序正在显示当前使用的 GPS 模式。是否有任何 API 可以为我提供 GPS 模式的信息？

请指导。

问候，

图沙尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:45:07.177

If location detected by `GPS`, `VerticalAccuracy` will be not a `NAN`, so you can check by this property

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:51:21.597

据我了解，它`GeoPositionAccuracy.High`转化为使用 GPS，同时`GeoPositionAccuracy.Default`转化为使用任何可用的手段（因此它可能是缓存的 GPS 位置，或者它可能与附近的 WiFi 点有关，甚至与您的手机当前正在使用的桅杆有关）。

值得注意的是，只能通过使用四颗（或更多）卫星来对海平面以上的位置进行三角测量，因此虽然 VerticalAccuracy 的存在表明使用了 GPS，但缺少并不表示您没有使用（它仍然是可能的）获得 3 颗卫星的 2D 修复）

# html - 比屏幕宽三个 div 不滚动

> ID：11293598
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:05.293
> 
> 标签：html, css

我有页面要维护，这是由其他人开发的非常糟糕。现在对我来说，每一次改变都是一次真正的考验。现在页面看起来基本上是这样的：

```
 ____________________
|                    |
|        body        |
|                    |
|                    |
|    width: 1000px   |
|                    |
|                    |
|____________________| 
```

我想添加一些带有链接的 div，所以页面应该如下所示：

```
 _______ ____________________ _______
| left  |                    | right |
| 400px |        body        | 400px |
| width |                    | width |
|_______|                    |_______|
        |    width: 1000px   |
        |                    |
        |                    |
        |____________________| 
```

主体应该居中，并且取决于窗口大小，左右 div 应该完全显示或仅显示其中的一部分。我在网上搜索了类似的问题并尝试了不同的解决方案，但它们导致页面崩溃并且页面元素一团糟。

如何轻松添加这些 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:41:05.543

检查这个小提琴：http: [//jsfiddle.net/GSygt/](http://jsfiddle.net/GSygt/)

在上面的小提琴中，在 CSS 中将中心内容的宽度更改为 1000px。我使用了 200px 以便结果在 jsfiddle 输出窗格中可见。

**HTML**

```
<html>
    <body>  
        <div class="center">

            This is my content!

            <div class="side left">LEFT</div>       
            <div class="side right">RIGHT</div>
        </div>
    </body>    
</html> 
```

**CSS**

```
body {
    overflow-x: hidden;    
}
.center {
    position: relative;
    width: 200px;   /* change this to 1000px */
    background-color: #dfd;    
    margin: auto;
    text-align: center;
    min-height: 600px;
}
.side {
    position: absolute;
    width: 400px;   
    top: 0;
    background-color: #ddd;
    text-align: center;
    min-height: 200px;
}
.left {
    left: -400px;
}
.right {
    right: -400px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:45:17.263

So I'm assuming you can't change anything in your design, the only thing you can do is add the divs to the body. If that's the case here's how I'd do it: [http://jsfiddle.net/joplomacedo/4p6nw/](http://jsfiddle.net/joplomacedo/4p6nw/)

1) First set the widths on your new divs.
2) Then float each other to their own side.
3) Add a negative margin to the side they're floated to equal to their width.
4) On the body, add a padding-left equal to the floated left div's width, then add a padding-right equal to to right floated div's width.

For this HTML...

```
<body>
   <div class="left-div"></div>
   <div class="right-div"></div>
</body> 
```

...the CSS

```
body {
  width: 1000px;
  margin: 0 auto;
  padding: 0 400px;
}

.left-div {
  float: left;
  width: 400px;
  margin-left: -400px;
}

.right-div {
  float: right;
  width: 400px;
  margin-right: -400px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:51:51.370

可能使用绝对定位。（虽然我也建议不要使用 1800px 作为静态宽度，但我猜这两个侧边栏是用于广告的，而且我之前与营销猴子有过关于页面宽度的相同论点，所以我理解）

.center {位置：绝对；顶部：0；左：50%；左边距：-500px；显示：块；}

然后在中间有左右，但也用绝对定位将它们拉出。

所以例如

.right {位置：绝对；顶部：0；右：-400px；宽度：400 像素；}

和左相反。

希望这会有所帮助，会有一个水平滚动条，但同样适用于浮动元素。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-02T12:27:24.570

我不建议将您的网站设置为 1800 像素的宽度。

但你可以遵循以下结构： 3 td like

```
<table>
<tr>
<td id="first" valign=top> content </td>
<td id="middle" valign=top> content </td>
<td id="last" valign=top> content </td>
</tr>
</table> 
```

并禁用滚动将其添加到您的样式表：

```
body{overflow-x:hidden;} 
```

# javascript - 在 a 处拆分一个字符串， 后跟一个数字

> ID：11293599
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:06.353
> 
> 标签：javascript, regex, split

`<br />`当有一个新行（ ）后跟一个数字时，我想拆分我的字符串。

例如：

```
"aaaaaa<br />1 asdsad"      // should be split
"bbbbbb<br />dfffgdft"      // should not be split
"cccccc<br />2 asdasd"      // should be split 
```

ETC...

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:22:53.730

```
string = string.split(/<br\s*\/?>(?=\d)/); 
```

我使用`\s*`而不是空格，并将其`/`设为可选，因此它还允许`<br>`, `<br/>`etc.`(?=\d)`是前瞻，*仅*当匹配以下字符时才会产生有效匹配。

# android - 具有多个参数的原始查询

> ID：11293600
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:07.110
> 
> 标签：android, sqlite

PREF_NAME、PREF_STATUS - 文本

它给了我这个错误：

```
07-02 14:08:07.457: E/AndroidRuntime(17295): android.database.sqlite.SQLiteException: near "?": syntax error: , while compiling: SELECT ? FROM ? WHERE ? = ? 
```

我正在使用的代码是：

```
Cursor c = db.rawQuery("SELECT ? FROM ? WHERE ? = ?", new String[]{ PREF_STATUS,
   PREF_TABLE, PREF_NAME, assigned_pref_name }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:24:47.630

根据[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)，您只能输入“？” 关于 where 子句：

```
public Cursor rawQuery (String sql, String[] selectionArgs)

Parameters
sql the SQL query. The SQL string must not be ; terminated
selectionArgs   You may include ?s in where clause in the query, which will be replaced by the values from selectionArgs. The values will be bound as Strings. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:24:53.493

在`SELECT`关键字之后你有一个`?`而不是类似的东西`*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:26:51.533

我猜您想将assigned_pref_name 作为字符串而不是变量名传递，所以：

```
 Cursor c = db.rawQuery(
              "SELECT ? FROM ? WHERE ? = ?",
                new String[]{
                PREF_STATUS,
                PREF_TABLE,
                PREF_NAME, 
                "assigned_pref_name" //as a string 
          }); 
```

# windows-phone-7 - 以不受操作系统支持的语言提交的 Windows Phone 应用程序

> ID：11293601
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:11.140
> 
> 标签：windows-phone-7

我制作了一个应用程序，其内容为亚美尼亚语，并且在 Windows Phone 操作系统中不原生支持。该应用程序是一个博客阅读器，可读取帖子的 RSS 提要并在移动应用程序中显示该帖子。博客中的帖子只有亚美尼亚语，没有英语或任何其他语言的翻译版本。汇编的中性语言设置为英语。市场的应用程序详细描述是英文的，我也清楚地提到了应用程序的内容是亚美尼亚语。但是应用程序认证失败。以下是来自认证测试结果 .pdf 文件的评论。

> 应用程序的详细描述和/或 UI 内容以亚美尼亚语呈现，操作系统本身不支持。对于要以操作系统本身不支持的语言呈现的应用程序，其描述必须满足以下要求：
> 
> 1.  表明应用程序的声明不是目标语言。
>     
>     
> 2.  目标语言的完整描述文本。
>     
>     
> 3.  应用程序支持的语言的完整描述文本。

正如我从评论中了解到的，我提供了前两点，认证失败的唯一原因是第三点 - 描述中不存在的亚美尼亚语描述。

那我必须做什么？还提供亚美尼亚语的详细描述，仅此而已？或者以任何方式它将无法通过认证。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:30:28.147

我相信你必须提供两个长描述：

一个目标语言

一种在应用程序属性中设置的语言

# qt - 无法在 Qt 媒体播放器演示中播放 RTSP 视频

> ID：11293602
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:12.167
> 
> 标签：qt, directshow, gstreamer, rtsp, phonon

我正在尝试开发一个我正在评估 Qt Phonon 的视频管理软件。该软件将构建在 Windows 平台上，我知道 Phonon 使用 Directshow 作为 Windows 后端，如果它在 Linux 上运行，它使用 GStreamer。在 Linux 上使用 Qt 4.7.4，它有一个使用 phonon 的视频播放器的演示示例，我成功地能够看到来自松下 IP 摄像机（RTSP 流）的视频流，但是当我在 Windows 平台上尝试相同的示例时它不起作用（返回错误 0x800c0000d)。可能是什么问题呢？

问候，

索拉布·甘地

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:05:51.077

`0x800c000d`是`INET_E_UNKNOWN_PROTOCOL`，这又是“指定的协议是未知的”。DirectShow 和 Windows 不提供任何标准来支持 RTSP 源，因此两者一起表明不支持 IP 摄像机源（至少在没有第三方组件的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:05:08.567

根据我的经验，我可能会说 Phonon 很糟糕。如果您不想附加到 Phonon，请使用带有 Qt 绑定的 GStreamer。您将获得更多“跨平台”体验，因为您一直使用相同的后端，因此大多数媒体文件的工作方式相同。由于 GStreamer 和它的[Qt 绑定](http://gstreamer.freedesktop.org/modules/qt-gstreamer.html)是 LGPL，你仍然可以在闭源应用程序中使用它。

# php - 来自两个表的mysql报告

> ID：11293604
> 
> 赞同：0
> 
> 时间：2012-07-02T12:21:24.400
> 
> 标签：php, mysql, report

这个问题是我从 PHP mysql 面试测试中得到的。我想知道创建以下报告的最佳解决方案是什么。它看起来很简单，但有些东西。

这是我想要的两份报告的图片，请访问： [两份报告的图片](http://test.lankaven.com/test/Qimage.png)

抱歉链接，因为我是 Stack Overflow 的新手，所以我无法上传图片。

如果需要，这里是 mysql 转储文件， [exam.sql 文件](http://test.lankaven.com/test/exam.sql)

是的，有一个家庭作业，我创建了这两个报告，但我不太确定这是最好的方法。我没有发布我的努力，因为我希望有新的想法。这是他们的观点（在我的采访中）

条件：

*   您必须动态创建这两个报告。
*   您只能为这两个报告创建一个 PHP 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:28:42.833

You'll want to use the MySQL [JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html) query to get the tables joined up in this way. Furthermore, for the second table, you need to use a [GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html) modifier on top of that JOIN. The manual in the links should explain it all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:29:37.540

Learn about MySQL Joins. [MySQL Joins](http://www.w3schools.com/sql/sql_join.asp)

SELECT t1.user_fname AS FName, t1.user_lname AS LName, t2.subject AS Subject, t2.marks AS Marks FROM t_users AS t1 JOIN t_marks AS t2 ON t1.user_id = t2.user_id;

For Report A.

SELECT t1.user_fname AS FName, t1.user_lname AS LName, t2.subject AS Subject, SUM(t2.subject) AS Total FROM t_users AS t1 JOIN t_marks AS t2 ON t1.user_id = t2.user_id GROUP BY (t2.subject);

For Report B, I suppose it should work.

# c# - 为什么我不能在我的类库中使用来自 .dll 的对象？

> ID：11293606
> 
> 赞同：1
> 
> 时间：2012-07-02T12:21:29.100
> 
> 标签：c#, class-library

刚刚创建了一个包含一些方法的 .dll 文件。我有另一个项目，其中有一个类库和客户端应用程序，它们相互引用并且工作正常。

问题是我引用了我刚刚在类库中创建的 .dll，但无法使用 .dll 中可用的方法。（我可以在对象浏览器中看到它们，一切看起来都很好）。

就像我尝试时一样：

```
Cache cache = new Cache("blabla"); 
```

我得到：

> 我所做的引用。Cache' 是一个名称空间，但它的使用类似于“类型”。

但是当我在客户端应用程序（这是一个控制台应用程序）中添加引用时。然后我没有问题，可以轻松使用这些方法。为什么会在类库中给出我的问题？

有什么建议么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:27:01.107

`Cache`除非被解释为类库中的命名空间，否则没有理由这样做。在实例化时完全限定类：

```
var cache = new SomeNamespace.Cache(); 
```

或者使用类的别名：

```
using MyCache = SomeNamespace.Cache;
...
var cache = new MyCache(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:27:24.783

这只是与在范围内的命名空间的命名冲突，并在其中包含单词`Cache`，可能在末尾（类似于`namespace MyCompany.MyNamespace.Cache { }`）。

您需要完全限定内联类型或解开名称空间并`using`在顶部使用语句：

```
MyNamespace.Cache cache = new MyNamespace.Cache(""); 
```

尝试遵循[命名空间命名准则](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)来避免这种情况：

> 不要为命名空间和类使用相同的名称。例如，不要同时提供 Debug 命名空间和 Debug 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:27:56.893

尝试完全限定您的类型： `MyDllAssembly.Cache cache = new MyDllAssembly.Cache();`

# c# - 添加/删除行时，WPF DataGrid 是否会触发事件？

> ID：11293607
> 
> 赞同：9
> 
> 时间：2012-07-02T12:21:30.120
> 
> 标签：c#, .net, wpf

我希望每次 DataGrid 获得更多行或删除一些行时重新计算。我尝试使用该`Loaded`事件，但只触发了一次。

我找到[`AddingNewItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.addingnewitem%28VS.110%29.aspx)了，但是在添加之前就被解雇了。之后我需要做我的*事情*。

还有`LayoutUpdated`，它可以工作，但我担心使用它是不明智的，因为它太频繁地触发我的目的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T14:04:04.150

如果你`DataGrid`被绑定到某事，我想到了两种方法来做到这一点。

您可以尝试获取该`DataGrid.ItemsSource`集合并订阅其`CollectionChanged`事件。这只有在您首先知道它是什么类型的集合时才有效。

```
// Be warned that the `Loaded` event runs anytime the window loads into view,
// so you will probably want to include an Unloaded event that detaches the
// collection
private void DataGrid_Loaded(object sender, RoutedEventArgs e)
{
    var dg = (DataGrid)sender;
    if (dg == null || dg.ItemsSource == null) return;

    var sourceCollection = dg.ItemsSource as ObservableCollection<ViewModelBase>;
    if (sourceCollection == null) return;

    sourceCollection .CollectionChanged += 
        new NotifyCollectionChangedEventHandler(DataGrid_CollectionChanged);
}

void DataGrid_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    // Execute your logic here
} 
```

另一种解决方案是使用事件系统，例如 Microsoft Prism`EventAggregator`或 MVVM Light 的`Messenger`. 这意味着您将在绑定集合更改时`ViewModel`广播事件消息，并且您将订阅以接收这些消息并在它们发生时执行您的代码。`DataCollectionChanged``View`

使用`EventAggregator`

```
// Subscribe
eventAggregator.GetEvent<CollectionChangedMessage>().Subscribe(DoWork);

// Broadcast
eventAggregator.GetEvent<CollectionChangedMessage>().Publish(); 
```

使用`Messenger`

```
//Subscribe
Messenger.Default.Register<CollectionChangedMessage>(DoWork);

// Broadcast
Messenger.Default.Send<CollectionChangedMessage>() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:24:41.187

怎么样`DataGrid.LoadingRow(object sender, DataGridRowEventArgs e)`？

卸载也一样。

`DataGrid.UnLoadingRow(object sender, DataGridRowEventArgs e)`?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:07:36.580

您是否尝试过 MVVM 方法并绑定到 Observable 集合？

```
public ObservableCollection<Thing> Items{
get { return _items; }
set{ _items = value; RaisePropertyChanged("Items");  // Do additional processing here 
}
} 
```

所以你可以在不受 UI 约束的情况下观看项目的添加/删除？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-30T04:14:41.663

如果您愿意，您可以`RowUnloading`按照其他人在此处描述的路线走，但是请注意，每次一行失去焦点时也会触发此事件。

但是，通过玩耍，我发现当删除一行时`SelectedItem`，网格的属性为空，而该`CurrentItem`属性不为空，到目前为止，我只看到这个组合用于删除的行，（虽然我不能保证我有没有错过一个异国情调的情况......但是对于远离行的基本情况，我到目前为止还没有看到它）。

因此，何时可以使用以下代码仅过滤已删除的行：

```
private void CategoriesGrid_UnloadingRow(object sender, DataGridRowEventArgs e)
{     
        if (((DataGrid)sender).SelectedItem != null || ((DataGrid)sender).CurrentItem == null)
        {
            return;
        }

        // The rest of your code goes here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T15:13:08.087

如果您想使用 ObservableCollection 并获得有关添加或其他操作的通知，最好的方法是使用 INotifyCollectionChanged

```
var source = datagrid.ItemsSource as INotifyCollectionChanged; 
```

因为，当你解包到 时`ObservableCollection<MyClass>()`，你必须严格地写 MyClass (not `ObservableCollection<ParentOfMyClass>`())

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-09T19:00:51.020

根据您要重新计算的“事物”，您可能会考虑使用 ScrollViewer.ScrollChanged 附加事件。这可以在 XAML 中设置如下：

```
<DataGrid
...
ScrollViewer.ScrollChanged="control_ScrollChanged"> 
```

[ScrollChangedEventArgs](https://msdn.microsoft.com/en-us/library/system.windows.controls.scrollchangedeventargs(v=vs.110).aspx "ScrollChangedEventArgs")对象具有有助于计算布局和滚动位置（Extent、Offset、Viewport）的各种属性。请注意，在使用默认虚拟化设置时，这些通常以行数/列数来衡量。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-15T23:07:25.527

我一直在寻找解决方案，我找到了处理这个问题的完美事件，该事件称为**UnloadingRow**

```
<DataGrid ....
    UnloadingRow="DataGrid_UnloadingRow">
 ...
</DataGrid> 
```

在你的 C# 代码中你得到这个

```
private void ProductsDataGrid_UnloadingRow(object sender, DataGridRowEventArgs e)
{
   MyObject obj = (MyObject)e.Row.Item; // get the deleted item to handle it
   // Rest of your code ...
   // For example : deleting the object from DB using entityframework

} 
```

# zend-framework - 当有多个子域部分时，如何正确路由 Zend？

> ID：11293610
> 
> 赞同：1
> 
> 时间：2012-07-02T12:21:46.367
> 
> 标签：zend-framework, routes, subdomain, wildcard

我为我的网站设置了一个通配符域，它适用于所有类型的单词和字符，但是当子域中有一个额外的点时会失败。该路径应该指向我的数据页面，我可以在其中将子域作为`param`. 在子域中。

例如，一个有效的 url 可以是`http://peter.pan.example.com`(works; go to data page)，但也可以是`http://peter.von.pan.example.com`(fails; go to index page)。

需要在当前路由中进行哪些更改才能根据需要制作第二个 url 路由？

相关代码：

```
resources.router.routes.subdomain.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.subdomain.route = ":module.example.com"
resources.router.routes.subdomain.defaults.reqs.module = "(.+)"
resources.router.routes.subdomain.chains.index.type = "Zend_Controller_Router_Route"
resources.router.routes.subdomain.chains.index.route = ":controller/:action/*"
resources.router.routes.subdomain.chains.index.defaults.controller = "data"
resources.router.routes.subdomain.chains.index.defaults.action = "index" 
```

# javascript - 使用 Javascript 的命名空间中的严格模式

> ID：11293613
> 
> 赞同：5
> 
> 时间：2012-07-02T12:22:07.123
> 
> 标签：javascript, namespaces

最近，一边看一本很好的书；['Maintainable Javascript'](https://rads.stackoverflow.com/amzn/click/com/1449327680)，我发现了“use strict”编译指示的使用。

如果在全局范围内声明“use strict”，它似乎是一种不好的做法。推荐的方法是在每个函数中直接使用严格模式，如下所示：

```
// Non-strict code...

(function(){
  "use strict";

  // Define your library strictly...
})();

// Non-strict code... 
```

是否可以为整个命名空间定义严格模式，而不是在每个函数中定义它？如果是，我可以提供一两个代码示例吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:23:57.193

严格模式适用于声明它的执行上下文和上下文包含的所有上下文（在通过创建的上下文周围有一些squidginess `eval`，但避免使用`eval`并且避免squidginess），所以通常你会使用模块模式来应用它对你所有的代码：

```
(function() {
    "use strict";

    function foo() {
    }

    function bar() {
    }

    // ...presumably code hooking up `foo` and `bar` to events
    // or otherwise using them -- or of course, you could export
    // them from the scope...
})(); 
```

在上面，严格模式不仅适用于匿名函数，而且也适用于`foo`和`bar`。因此，例如，此代码将“工作”的地方（通过[*隐式全局的恐怖*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)创建一个全局变量）：

```
(function() {
    function foo() {
        someNameThatIsntDefined = 42; // Blech, creates implicit global
    }

    foo();
})(); 
```

...***这个***代码失败了`ReferenceError`（唯一的变化是`"use strict"`）：

```
(function() {
    "use strict";

    function foo() {
        someNameThatIsntDefined = 42; // Throws ReferenceError
    }

    foo();
})(); 
```

...因为严格模式所做的许多有用的事情之一就是摆脱隐式全局变量的恐惧。

这是另一个示例，我们导出了一个在严格模式下运行的函数，即使从非严格代码调用时也是如此：

```
var MyModule;
MyModule = MyModule || {};
(function(mod) {
    "use strict";

    mod.doSomethingUseful = doSomethingUseful;
    function doSomethingUseful() {
        // ...
    }

})(MyModule); 
```

“松散”代码可以调用`MyModule.doSomethingUseful`，它始终以严格模式运行。结果是您可以将严格模式应用于**您的**代码，而无需每个*使用*您的代码的人也使用它。很方便，那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:40:12.553

第一种方法是将`"use strict";`编译指示放在 .js 文件的第一行。因此，该文件中的所有内容都将被严格评估。
这本身并没有错。迟早所有浏览器都会弃用“旧 js 代码”。如果你使用它，唯一真正的缺点可能是可能会破坏旧代码。

第二种方式可能是这样的对象：

```
var contName = new function () {
"use strict";

this.tmp;   // public temp var
var tmp;    // private tmp, propagate thru all!

var f = this;   // to call contName.functions when this = html or other object 
var o = this;   // to create objects.

f.rnd = function rnd (range) {
    return Math.floor(Math.random() * range);
};

    function private1 () {     // can be called only inside of contName

     var x = tmp;   // can see all outer private vars
     this.tmp;    // !== outer this.tmp

    var y = this.rnd(x);    // will not work
    var y = f.rnd(x);    // work
    }

o.Pixel = function (x, y, z, col) {
    this.x = x || 0;
    this.y = y || 0;
    this.z = z || 0;
    this.color = col || 0;
}; 
```

tmp = new o.Pixel(300, 300);

```
} // end 
```

该代码允许您拥有“私有”变量。请注意， f 也是一个“私有”变量。

用法很简单：

```
var rvar = contName.rnd(5);
var obj = new contName.Pixel(300, 300) 
```

* * *

第三种方式可能是 TJCrowder 的，第四种是 Doug Crockford 的……这些只是模仿语言中尚未正式出现的东西的不同方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T07:35:59.297

```
var Module = (function() {
    "use strict";

    var f = function() {
        // do stuff
    }

    return {  // return your namespace
        "myModuleFunction": f
    }
})(); 
```

我认为这也应该有效。

# excel - 在 VBA 中将字符串转换为 XlChartType

> ID：11293614
> 
> 赞同：1
> 
> 时间：2012-07-02T12:22:14.447
> 
> 标签：excel, vba

在工作表中，我存储了我希望使用 VBA 创建的图表列表。例如，它将包含在一个列中：

*   xl3DA 区域
*   xl线

在我的 VBA 例程中，我定义了一个`XlChartType`变量，如下所示：

```
Dim chartType               As XlChartType 
```

稍后在同一例程中，我尝试从工作表中读取图表类型，并使用以下代码将其分配给 chartType 变量（删除块中的其他代码行）：

```
With Worksheets(chartDetailsWorksheet)

    'Variable initialisations
    chartType = Cells(2, 2).value

End With 
```

但是代码失败，因为从工作表中读取的值被视为字符串（不足为奇）。我试过在网上寻找答案，但是......
我在想，就像在其他语言中一样，你可以进行类型转换来快速解决这个问题。但到目前为止，我发现的只是一个谈论编写自定义函数以将字符串值转换为`XlChartType`值的网站。

这是处理这个问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:42:45.850

您可以使用它来将字符串常量名称转换为其值。你是否应该是一个不同的问题。

```
Function WhatIsTheValue(s As String) As Variant

        Dim VBProj As VBIDE.VBProject
        Dim VBComp As VBIDE.VBComponent
        Dim CodeMod As VBIDE.CodeModule
        Set VBProj = ActiveWorkbook.VBProject
        Set VBComp = VBProj.VBComponents("modTemp")
        Set CodeMod = VBComp.CodeModule

        With CodeMod
            .DeleteLines 1, .CountOfLines
            .InsertLines 1, "Public Function GetTheValue()"
            .InsertLines 2, "GetTheValue = (" & s & ")"
            .InsertLines 3, "End Function"
        End With
        WhatIsTheValue = Application.Run("GetTheValue")

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:28:52.387

Don't do that.

On the sheet, store values in two columns, one visible, one hidden.
In the hidden column put numerical values for enum members. In the visible column put descriptive names (`xlLine` is not a descriptive name for a user). Then read the hidden column.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T16:07:39.070

我了解您对自定义函数表示保留，但老实说，这是我将采取的路线，而不是可能通过用户干预或代码执行意外操作/删除/等的隐藏列。

该子例程从 Cells(2,2) 获取字符串值，并通过下面的函数将其转换为 xlChartType。

```
Sub ChartTypes()
Dim cht As Chart
Dim ws As Worksheet
Dim stringType As String
Dim chartType As XlChartType

Set ws = Sheets(1)

stringType = CStr(Cells(2, 2).Value)

'Use the function to return the correct xlChartType in the AddChart:
Set cht = ws.Shapes.AddChart( _
        GetChartTypeConstant(stringType), _
        50, 50, 300, 200).Chart
End Sub 
```

这是在`Set cObj...`. 请注意，通过使用带有 case select 的函数，您可以使用更易于使用的名称，而不是“xlBarClustered”，您可以将其称为“Horizo​​ntal Bars”等。

```
Private Function GetChartTypeConstant(myString As String) As XlChartType
'This function returns an xlCharType constant value from a descriptive string
' which you will need to define or modify for your needs;
' using select case also means you can use more descriptive/user-friendly
' names on your worksheet.

    Select Case myString
    Case "xlBarClustered", "Clustered Bars", "Horizontal Bars"
        GetChartTypeConstant = xlBarClustered
    Case "xlColumnClustered", "Clustered Columns", "Vertical Columns"
        GetChartTypeConstant = xlColumnClustered
    Case "xlLine", "Lines Only"
        GetChartTypeConstant = xlLine

    'Additional cases can be added for
    ' additional chart types.
End Select

End Function 
```

请注意，子或函数中没有错误处理。

# php - Zend > Mail > setFrom() 没有做任何事情

> ID：11293616
> 
> 赞同：1
> 
> 时间：2012-07-02T12:22:24.400
> 
> 标签：php, zend-framework

我正在使用 Zend Mail，如下所示：

```
$transport = new Zend_Mail_Transport_Smtp($smtpSettings['smtpServer'], $smtpSettings);

$mail = new Zend_Mail();

.
.
.
$mail->setFrom("support@somedomain.com", "Support");
.
.
.

$mail->send($transport); 
```

我已成功收到电子邮件。但是代替发件人的电子邮件，而不是“support@somedomain.com”，我得到了 G-Mail 地址（我用于 SMTP 配置）。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:25:25.437

我认为问题在于 GMail SMTP 服务器不允许从@somedomain.com 发送电子邮件。您应该使用安装在 somedomain.com 上的 SMTP 服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T14:18:50.890

**设置**
$mailInstance->clearDefaultFrom();
**之前**
$mailInstance->setFrom($params['from'], $params['fromName']);

# mercurial - Mercurial 在新存储库上提交

> ID：11293626
> 
> 赞同：1
> 
> 时间：2012-07-02T12:23:09.213
> 
> 标签：mercurial, bamboo

我有一个运行脚本来构建项目的 Bamboo 计划。该脚本将解决方案中的 AssemblyInfo.cs 文件更新为下一个内部版本号，然后提交更改并执行 fetch 以合并任何更改并避免获得多个 head。

```
hg commit -m "$(Major).$(Minor).$(Build).$(Revision)"
hg fetch 
```

Bamboo 的输出最终为：

```
02-Jul-2012 07:50:11 CommitChanges:  
02-Jul-2012 07:50:11 Commiting version number changes for d:\Builds\TDFGE-DRD-JOB1  
02-Jul-2012 07:50:11 hg commit -m "1.0.0.6"  
02-Jul-2012 07:50:12 created new head  
02-Jul-2012 07:50:12 hg fetch  
02-Jul-2012 07:50:12 abort: multiple heads in this branch (use "hg heads ." and "hg merge" to merge) 
02-Jul-2012 07:50:12 d:\Builds\TDFGE-DRD-JOB1\Build.proj(96,3): error MSB3073: The command "hg fetch" exited with code 255\. 
02-Jul-2012 07:50:12 Done Building Project "d:\Builds\TDFGE-DRD-JOB1\Build.proj" (UpdateVersionAndBuild target(s)) -- FAILED. 
02-Jul-2012 07:50:12
02-Jul-2012 07:50:12 Build FAILED. 
```

Mercurial 的文档说 Fetch 应该获取最新的代码并合并任何更改。

这似乎是一个非常简单的任务，更改一些文件，签入，继续。那么我在这里错过了什么？我需要做一个合并还是什么？PS。我确实尝试在原始提交之后添加另一个合并/提交（似乎不正确，但它已完成），但随后推送回主存储库的文件仍然具有旧版本号，即它们没有改变。似乎合并命令将主存储库作为主要父级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:27:50.157

似乎最终的答案不是我想要的。仍然不确定 HG 为何会出现问题，但可能无法更新和提交版本号更改。我的猜测是，没有返回 Bamboo 部署主存储库的路径的原因是因为这会导致另一个竹子部署由于提交而启动，并导致构建的无限循环。

最后，我将代码更改为仅更新文件、构建、创建 NuGet 包并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T19:05:47.640

万一有人遇到同样的问题。我相信没有提交的原因是竹子在 ci 服务器上有一个存储库缓存。作业存储库是从缓存存储库克隆的，因此任何推送都将转到缓存存储库，而不是发送到 bitbucket。

为了解决这个问题，我明确推送到托管仓库。

hg push [https://user:password@bitbucket.org/myrepo](https://user:password@bitbucket.org/myrepo)

# android - 三星 Galaxy SIII (GLES) 中的噪声算法失败

> ID：11293628
> 
> 赞同：9
> 
> 时间：2012-07-02T12:23:13.573
> 
> 标签：android, opengl-es, glsl, shader

我正在努力让下一个简单的算法在三星 Galaxy SIII 中运行

```
float rand(vec2 co)
{
    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

....
vec3 color = texture2D(u_texture, v_texcoord);
gl_FragColor.rgb = color + vec3(rand(gl_FragCoord.xy + time / 1000.0));
.... 
```

该代码在三星 Galaxy S1 和谷歌 Nexus S 中完美地产生了预期的噪音。但在使用 ARM 的 Mali-400/MP4 的新智能手机中完全失败了。

任何人都可以发现这个算法有什么问题吗？或者也许明白为什么它会失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T19:20:37.747

你的问题可能来自于`sin`一个很大的数字。其结果取决于 的确切实现`sin`，这是不可用的。显然，`sin`Mali 芯片使用的函数在大数字上比其他函数具有更可预测的结果。

在我看来，您应该使用[实际的*噪声*功能](https://github.com/ashima/webgl-noise/wiki)，而不是这个东西。至少它将在硬件上产生可预测的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T02:47:17.553

在 ARM 论坛上对此问题进行了一些讨论：[http](http://forums.arm.com/index.php?/topic/16364-random-number-with-mali-400-mp/) ://forums.arm.com/index.php?/topic/16364-random-number-with-mali-400-mp/ 。

问题在于 Mali GPU 上片段着色器的 FP16 精度。基本上，调用时没有留下小数位`fract`（因为乘数太大），所以你根本不会得到任何“噪音”。如果你让常数变小，你会开始得到非零值，但它们不会有噪音。（我不完全确定这些值是如何被挑选出来的，也[不清楚这个算法是从哪里来的](https://stackoverflow.com/questions/12964279/whats-the-origin-of-this-glsl-rand-one-liner)）。

从技术上讲，这种噪声算法依赖于更高（中？高？）精度的浮点运算，这在片段着色器中是可选的。根据[this other post](http://forums.arm.com/index.php?/topic/15028-bug-in-driver-android-sgs-2-i9100/)，您可以通过检查`glGetString(GL_EXTENSIONS)`.

Nicol 的答案中的[webgl-noise](https://github.com/ashima/webgl-noise/wiki)项目似乎不太容易受到浮点截断问题的影响（它似乎使事情保持更紧密的界限）。但是，它的周期约为 300，并且它产生的“结构化”噪声比您当前获得的“白色”（或“粉红色”）噪声更多。不过，它是一个出色的库，因此即使它不是直接替代品，它也值得在您的代码中工作。

# android - 如何调试 Map View 的密钥库

> ID：11293631
> 
> 赞同：0
> 
> 时间：2012-07-02T12:23:23.263
> 
> 标签：android, google-maps

我创建了一张地图。然后我生成了一个 md5 并从 Google 获得了一个 API 密钥。在我的项目中，我遵循了所有必要的步骤。但是地图视图仍然不会显示。

在项目中遵循的步骤

1.  我选择了 Google API 项目
2.  在 xml 中使用 MapAPI 的 MapControl
3.  在清单中，我添加了互联网许可和`<uses-library android:name="com.google.android.maps" />`

有谁知道可能导致此问题的原因或如何调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:35:08.517

地图视图未显示的原因可能有多种

a) 如果您使用 eclipse 进行开发，请检查 eclipse 是否指向调试密钥库文件。在 Eclipse 中导航到 Windows > Preferences > Android > Build

您的默认调试密钥库的路径应该是

```
 <Documents and Settings>\<user-name>\.android\debug.keystore 
```

如果是 linux，请寻找适当的路径。

SO上的一些人还建议将自定义调试密钥库的路径指向默认密钥库的路径

此外，如果您的密钥是问题，则必须在 logcat 中显示相同的问题

b）如果您坐在公司防火墙后面，则必须将代理选项传递给您的模拟器

在 Debug configuration > Target 向下滚动到 Additional Emulator Command Line Options 并输入您的代理设置为

```
-http-proxy http://<username>:<password>@<proxy>:<port> 
```

# erlang - 有关 Erlang 中生成函数的更多信息

> ID：11293633
> 
> 赞同：2
> 
> 时间：2012-07-02T12:23:43.387
> 
> 标签：erlang

我经常看到人们使用 arity 0（无参数）生成新函数：

```
 spawn_link(fun function_name/0). 
```

其中 function_name/0 可以是例如：

```
function_name() -> 
                   io:format("hello~n", []) 
end. 
```

我可以以类似的方式生成一个带参数的函数吗？例如：

```
function_name(Arg) ->
                   io:format("hello ~p ~n", [Arg])
end. 
```

我应该使用

```
spawn_link(Module, Function, Arg) 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:27:44.300

您可以将其与参数一起使用，使用指定参数或仅使用固定`spawn_link`参数构建 lambda 函数 ( )。`fun`因此，例如，正如您所说，您可以使用：

```
spawn_link(Module, Function, Args). 
```

或在您的模块中导出您自己的`spawn_link`（或）：`start`

```
spawn_link(Args) ->
    spawn_link(?MODULE, fun myfun/X, Args). 
```

或使用`fun`：

```
spawn_link(Args) ->
    spawn_link(fun () -> apply(fun myfun/X, Args) end). 
```

或者如果您在内部调用一些具有固定参数的函数：

```
spawn_link() ->
    spawn_link(fun () -> myfun(1,2,3) end). 
```

其中`X`在这种情况下是`myfun`每种情况下函数的数量。

# objective-c - 从 nsarray 中取出对象

> ID：11293635
> 
> 赞同：0
> 
> 时间：2012-07-02T12:24:02.703
> 
> 标签：objective-c, ios, xcode, nsarray, xcode4.3

我是目标 c 的新手。我想从这个数组结果中取出几个来自 JSON 的对象，我需要帮助。我如何从这个数组中取出对象？我怎样才能获得功能，然后是属性和路线名称等。

```
NSArray *directions=[jsonResult objectForKey:@"directions"];

    int i;
    NSArray *dict;
    int count = [directions count];
    for (i = 0; i < count; i++)
    {            
        NSLog (@"directions = %@", [directions objectAtIndex: i]);          
    } 
```

> 我想从中得到的对象

```
directions = {
features =     (
            {
        attributes =             {
            ETA = 1341190800000;
            length = 0;
            maneuverType = esriDMTDepart;
            text = "Start at 18304.680000,36152.730000";
            time = 0;
        };
        compressedGeometry = "+1+hrt+139j+0+0";
    },
            {
        attributes =             {
            ETA = 1341190800000;
            length = "1.43124650292492";
            maneuverType = esriDMTStraight;
            text = "Go southeast on PAN ISLAND EXPRESSWAY";
            time = "1.22675858855561";
        };
        compressedGeometry = "+1+hrt+139j+i9-a6+kp-bl";
    }
routeId = 1;
routeName = "18304.680000,36152.730000 - 29663.160389,40202.513760";
summary =     {
    envelope =         {
        spatialReference =             {
            wkid = 3414;
        };
        xmax = "29663.160018156";
        xmin = "18301.4360762186";
        ymax = "40229.9300290999";
        ymin = "35091.9900291003";
    };
    totalDriveTime = "24.8214824061658";
    totalLength = "17.2089251018779";
    totalTime = "24.8";
}; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:28:12.077

`[directions objectAtIndex: i]`返回`NSDictionary`，如果要从中获取对象，请执行以下操作

```
NSDictionary *dic = [directions objectAtIndex: i];
[dic valueForKey:@"routeName"] //route name
[dic valueForKey:@"routeId"] //routeId
[dic valueForKey:@"features"] //returns an nsdictionery too
[[dic valueForKey:@"features"] valueForKey:@"text"] //returns an nsdictionery too 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:29:15.010

each object inside directions is an `NSDictionary`, and each object inside them is also a dictionary. So you will need something like this:

```
NSDictionary *directions=[jsonResult objectForKey:@"directions"];
NSDictionary *features = [directions objectForKey:@"features"]; 
```

...and so on, until you get all the values.

# permissions - Windows 2008 r2 调试视图（OutputDebugString）问题

> ID：11293639
> 
> 赞同：0
> 
> 时间：2012-07-02T12:24:15.260
> 
> 标签：permissions, windows-8, debugview, outputdebugstring

嗨，我们正在将 x86 应用程序作为服务安装在 Windows 2008 R2 上，它使用 OutputDebugString 来调试消息。

问题是 DebugView 实用程序仅在应用程序以提升模式从控制台运行而不是作为服务运行时才捕获应用程序的调试输出。

我还没有找到任何直接讨论 Windows 2008 R2 中 OutputDebugString 限制的知识库。

有人遇到过这样的问题吗？真的存在这样的限制吗？

UPD：如果对性能问题很重要，我们正在使用 TerminalServices。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:25:58.680

要从服务中捕获这些消息（在不同的会话中运行），请转到 DbgView 中的“捕获”菜单并选择“捕获全局 Win32”。

# android - 如何在不使用 GPS 的情况下获取我的 Android 设备国家代码？

> ID：11293642
> 
> 赞同：81
> 
> 时间：2012-07-02T12:24:21.570
> 
> 标签：android, locale

Android 手机实际上确实很清楚它在哪里 - 但有没有办法通过国家代码或国家名称等方式检索国家？

无需知道确切的 GPS 位置 - 国家代码或名称就足够了，我正在使用此代码：

```
 String locale = context.getResources().getConfiguration().locale.getCountry(Locale.getDefault());
 System.out.println("country = "+locale); 
```

它给了我代码“美国”，但我的设备保存在印度。有没有办法在不使用 GPS 或网络提供商的情况下找到设备当前的国家代码？

因为我用的是平板电脑。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-02T12:28:31.997

你不应该将任何东西传递给`getCountry()`. 删除`Locale.getDefault()`：

```
String locale = context.getResources().getConfiguration().locale.getCountry(); 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2014-10-14T08:31:39.583

您可以简单地使用此代码，

```
TelephonyManager tm = (TelephonyManager)this.getSystemService(Context.TELEPHONY_SERVICE);
String countryCodeValue = tm.getNetworkCountryIso(); 
```

如果您当前连接的网络在美国，这将返回“US”。即使没有 SIM 卡也可以使用。

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-11-05T09:30:17.887

使用链接[http://ip-api.com/json](http://ip-api.com/json)。这将以 JSON 格式提供所有信息。从此 JSON 内容中，您可以轻松获取国家/地区。该站点使用您当前的 IP 地址运行。它会自动检测 IP 地址和发回详细信息。

[文档](http://ip-api.com/docs/api:json)

这就是我得到的：

```
{
"as": "AS55410 C48 Okhla Industrial Estate, New Delhi-110020",
"city": "Kochi",
"country": "India",
"countryCode": "IN",
"isp": "Vodafone India",
"lat": 9.9667,
"lon": 76.2333,
"org": "Vodafone India",
"query": "123.63.81.162",
"region": "KL",
"regionName": "Kerala",
"status": "success",
"timezone": "Asia/Kolkata",
"zip": ""
} 
```

注意 - 由于这是第三方 API，请勿将其用作主要解决方案。而且我不确定它是否免费。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-06-06T14:19:30.927

检查的答案已弃用代码。你需要实现这个：

```
String locale;
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
    locale = context.getResources().getConfiguration().getLocales().get(0).getCountry();
} else {
    locale = context.getResources().getConfiguration().locale.getCountry();
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-07-03T07:08:08.933

我创建了一个实用程序函数（在我根据语言环境获得不正确国家代码的设备上测试过一次）。

**参考**：[CountryCodePicker.java](https://github.com/hbb20/CountryCodePickerProject/blob/master/ccp/src/main/java/com/hbb20/CountryCodePicker.java#L1965)

```
fun getDetectedCountry(context: Context, defaultCountryIsoCode: String): String {

    detectSIMCountry(context)?.let {
        return it
    }

    detectNetworkCountry(context)?.let {
        return it
    }

    detectLocaleCountry(context)?.let {
        return it
    }

    return defaultCountryIsoCode
}

private fun detectSIMCountry(context: Context): String? {
    try {
        val telephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager
        Log.d(TAG, "detectSIMCountry: ${telephonyManager.simCountryIso}")
        return telephonyManager.simCountryIso
    }
    catch (e: Exception) {
        e.printStackTrace()
    }
    return null
}

private fun detectNetworkCountry(context: Context): String? {
    try {
        val telephonyManager = context.getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager
        Log.d(TAG, "detectNetworkCountry: ${telephonyManager.networkCountryIso}")
        return telephonyManager.networkCountryIso
    }
    catch (e: Exception) {
        e.printStackTrace()
    }
    return null
}

private fun detectLocaleCountry(context: Context): String? {
    try {
        val localeCountryISO = context.getResources().getConfiguration().locale.getCountry()
        Log.d(TAG, "detectLocaleCountry: $localeCountryISO")
        return localeCountryISO
    }
    catch (e: Exception) {
        e.printStackTrace()
    }
    return null
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-09-14T08:09:40.393

这是一个完整的例子。它尝试从 TelephonyManager（从 SIM 或 CDMA 设备）获取国家代码，如果不可用，则尝试从本地配置中获取它。

```
private static String getDeviceCountryCode(Context context) {
    String countryCode;

    // Try to get country code from TelephonyManager service
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    if(tm != null) {
        // Query first getSimCountryIso()
        countryCode = tm.getSimCountryIso();
        if (countryCode != null && countryCode.length() == 2)
            return countryCode.toLowerCase();

        if (tm.getPhoneType() == TelephonyManager.PHONE_TYPE_CDMA) {
            // Special case for CDMA Devices
            countryCode = getCDMACountryIso();
        }
        else {
            // For 3G devices (with SIM) query getNetworkCountryIso()
            countryCode = tm.getNetworkCountryIso();
        }

        if (countryCode != null && countryCode.length() == 2)
            return countryCode.toLowerCase();
    }

    // If network country not available (tablets maybe), get country code from Locale class
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
        countryCode = context.getResources().getConfiguration().getLocales().get(0).getCountry();
    }
    else {
        countryCode = context.getResources().getConfiguration().locale.getCountry();
    }

    if (countryCode != null && countryCode.length() == 2)
        return  countryCode.toLowerCase();

    // General fallback to "us"
    return "us";
}

@SuppressLint("PrivateApi")
private static String getCDMACountryIso() {
    try {
        // Try to get country code from SystemProperties private class
        Class<?> systemProperties = Class.forName("android.os.SystemProperties");
        Method get = systemProperties.getMethod("get", String.class);

        // Get homeOperator that contain MCC + MNC
        String homeOperator = ((String) get.invoke(systemProperties,
                "ro.cdma.home.operator.numeric"));

        // First three characters (MCC) from homeOperator represents the country code
        int mcc = Integer.parseInt(homeOperator.substring(0, 3));

        // Mapping just countries that actually use CDMA networks
        switch (mcc) {
            case 330: return "PR";
            case 310: return "US";
            case 311: return "US";
            case 312: return "US";
            case 316: return "US";
            case 283: return "AM";
            case 460: return "CN";
            case 455: return "MO";
            case 414: return "MM";
            case 619: return "SL";
            case 450: return "KR";
            case 634: return "SD";
            case 434: return "UZ";
            case 232: return "AT";
            case 204: return "NL";
            case 262: return "DE";
            case 247: return "LV";
            case 255: return "UA";
        }
    }
    catch (ClassNotFoundException ignored) {
    }
    catch (NoSuchMethodException ignored) {
    }
    catch (IllegalAccessException ignored) {
    }
    catch (InvocationTargetException ignored) {
    }
    catch (NullPointerException ignored) {
    }

    return null;
} 
```

另一个想法是尝试像[this answer](https://stackoverflow.com/a/26753601/3680373)这样的API请求。

参考资料在[这里](https://stackoverflow.com/a/52136339/3680373)和[这里](https://stackoverflow.com/a/19415296/3680373)。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-10-26T11:44:15.467

对于某些设备，如果默认语言设置不同（印度人可以设置英语（美国）），那么

```
context.getResources().getConfiguration().locale.getDisplayCountry(); 
```

会给出错误的值。所以这种方法是不可靠的。

此外，TelephonyManager 的 getNetworkCountryIso() 方法不适用于没有 SIM 卡的设备（Wi-Fi 平板电脑）。

如果设备没有 SIM 卡，那么我们可以使用时区来获取国家/地区。对于像印度这样的国家，这种方法会奏效。

### 用于检查国家/地区的示例代码是否为印度。

在常量文件中使用以下值

（Constants.INDIA_TIME_ZONE_ID：“亚洲/加尔各答”，Constants.NETWORK_INDIA_CODE：“in”）

在您的活动中，添加以下代码：

```
private void checkCountry() {

    TelephonyManager telMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    if (telMgr == null)
        return;

    int simState = telMgr.getSimState();

    switch (simState) {

        // If a SIM card is not available then the
        // country is found using the timezone ID
        case TelephonyManager.SIM_STATE_ABSENT:
            TimeZone tz = TimeZone.getDefault();
            String timeZoneId = tz.getID();
            if (timeZoneId.equalsIgnoreCase(Constants.INDIA_TIME_ZONE_ID)) {
               // Do something
            }
            else {
               // Do something
            }
            break;

        // If a SIM card is available then the telephony
        // manager network country information is used
        case TelephonyManager.SIM_STATE_READY:

            if (telMgr != null) {
                String countryCodeValue = tm.getNetworkCountryIso();

                // Check if the network country code is "in"
                if (countryCodeValue.equalsIgnoreCase(Constants.NETWORK_INDIA_CODE)) {
                   // Do something
                }
                else {
                   // Do something
                }
            }
            break;
    }
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-29T06:40:00.557

如果您想在不征得任何许可的情况下获得国家代码，您可以选择一种棘手的方式。

该方法简单地使用 API 来获取国家代码，并且没有任何第三方库可以依赖。我们可以为我们创造一个。

在这里，我使用[Google Cloud Functions](https://cloud.google.com/functions)编写了一个 API，而且非常轻松。

第 1 步：创建一个 Google Cloud 帐户，并设置结算（免费套餐就足够了）

第 2 步：创建云函数以获取地理位置

将此基本功能复制到*index.js*的代码编辑器中：

```
const cors = require('cors')

function _geolocation(req, res) {
  const data = {
    country_code: req.headers["x-appengine-country"],
    region: req.headers["x-appengine-region"],
    city: req.headers["x-appengine-city"],
    cityLatLong: req.headers["x-appengine-citylatlong"],
    userIP: req.headers["x-appengine-user-ip"]
  }

  res.json(data)
};

exports.geolocation = (req, res) => {
  const corsHandler = cors({ origin: true })

  return corsHandler(req, res, function() {
    return _geolocation(req, res);
  });
}; 
```

我们还需要复制*package.json*定义：

```
{
  "name": "gfc-geolocation",
  "version": "0.0.1",
  "dependencies": {
    "cors": "^2.8.4"
  }
} 
```

第 3 步：完成，并获取类似于以下内容的 URL：`"https://us-central1-geolocation-mods-sdde.cloudfunctions.net/geolocation"`

第 4 步：解析 JSON 响应并获取国家代码

响应将如下所示：

```
{
   "country": "IN",
   "region": "kl",
   "city": "kochi",
   "cityLatLong": "9.9312,76.2673",
   "userIP": "xx.xx.xx.xx"
} 
```

感谢和感谢转至[Medium](https://en.wikipedia.org/wiki/Medium_(website))文章：[使用 Google Cloud Functions 的基于 IP 的免费地理定位](https://medium.com/mop-developers/free-ip-based-geolocation-with-google-cloud-functions-f92e20d47651)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-23T10:41:22.090

无需调用任何 API。您可以从设备所在的设备获取国家代码。只需使用此功能：

```
 fun getUserCountry(context: Context): String? {
    try {
        val tm = context.getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager
        val simCountry = tm.simCountryIso
        if (simCountry != null && simCountry.length == 2) { // SIM country code is available
            return simCountry.toLowerCase(Locale.US)
        } 
        else if (tm.phoneType != TelephonyManager.PHONE_TYPE_CDMA) { // Device is not 3G (would be unreliable)
            val networkCountry = tm.networkCountryIso
            if (networkCountry != null && networkCountry.length == 2) { // network country code is available
                return networkCountry.toLowerCase(Locale.US)
            }
        }
    }
    catch (e: Exception) {
    }
    return null
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-02-19T07:23:52.860

> 要获取国家代码，我们还可以执行 HTTP 调用（这里我使用第三方链接，您也可以购买服务以获取 JSON 格式的额外信息[https://ipinfo.io/](https://ipinfo.io/)）。在这里，当我们调用 API 服务时，它们会跟踪我们的 IP 并相应地提供信息。

```
<uses-permission android:name="android.permission.INTERNET" />

public String makeServiceCall() {
    String response = null;
    String reqUrl = "https://ipinfo.io/country";
    try {
        URL url = new URL(reqUrl);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        // read the response
        InputStream in = new BufferedInputStream(conn.getInputStream());
        response = convertStreamToString(in);
    } catch (MalformedURLException e) {
        Log.e(TAG, "MalformedURLException: " + e.getMessage());
    } catch (ProtocolException e) {
        Log.e(TAG, "ProtocolException: " + e.getMessage());
    } catch (IOException e) {
        Log.e(TAG, "IOException: " + e.getMessage());
    } catch (Exception e) {
        Log.e(TAG, "Exception: " + e.getMessage());
    }
    return response;
} 
```

# javascript - 如何将两个或多个对象的内容合并到第一个对象中

> ID：11293644
> 
> 赞同：2
> 
> 时间：2012-07-02T12:24:35.103
> 
> 标签：javascript, jquery, object

您好，我正在尝试修改另一个`object`表单的值`object`

这是我需要修改的：

```
 y = {name:'m' , age:'28' , g:{m:'n' , f:'y' , k:'n' ,
       other :{x:'f' , y:'m'}} , h:'6' , zip :'12345' } ; 
```

以下对象将循环进入`object` `y`，如果找到任何匹配的元素，它将更改其值以匹配对象`x`

```
 ​x = {name :'y' , age:'17' , g :{m:'y' ,f:'n'}} ; 
```

**代码**

```
 for(var i in x){
     for(var o in y){
        if(i == o) y[o] = x[i] ; 
            }
      } 
```

当此代码运行时，它会更改它的值，`y.(name and age )`它会保持`h and zip`原样，这很棒

**问题**是在`g`对象它只改变`g.n`和`g.f` 删除其余的`g object element`

**jsFiddle** [示例](http://jsfiddle.net/9qkQ8/)

我希望得到的是

```
 y = {name:'y' , age:'17' , g:{m:'y' , f:'n' , k:'n' ,
   other :{x:'f' , y:'m'}} , h:'6' , zip :'12345' } 
```

*我正在使用 jquery，所以如果有任何 jquery 函数可以提供帮助，那很好*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:29:11.277

您可以使用[`jQuery.extend`](http://api.jquery.com/jQuery.extend/)with`deep`参数：

> 将两个或多个对象的内容合并到第一个对象中。
> 
> [...]
> 
> $.extend() 执行的合并默认不是递归的；如果第一个对象的属性本身是一个对象或数组，它将被第二个对象中具有相同键的属性完全覆盖。值不会合并。[...] 但是，通过为第一个函数参数传递 true，对象将被递归合并。（不支持为第一个参数传递 false。）

```
var y = {
    name: 'm',
    age: '28',
    g: {
        m: 'n',
        f: 'y',
        k: 'n',
        other: {
            x: 'f',
            y: 'm'
        }
    },
    h: '6',
    zip: '12345'
};
var x = {
    name: 'y',
    age: '17',
    g: {
        m: 'y',
        f: 'n'
    }
};
$.extend(true, y, x);
console.log(y);
// {
//     "name": "y",
//     "age": "17",
//     "g": {
//         "m": "y",
//         "f": "n",
//         "k": "n",
//         "other": {
//             "x": "f",
//             "y": "m"
//         }
//     },
//     "h": "6",
//     "zip": "12345"
// } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:36:34.237

结果与预期一致，因为您正在循环和比较 and 的属性`x`，`y`如果值不相等，您将用 in 中的属性值替换 in 中`y`的属性值`x`

在这种情况下`y.g == x.g`是错误的，因为有不同的对象，所以 yg 将被替换为 xg

试试这个 ：

```
function compare(x, y) {

    for (var i in x) {
        for (var o in y) {
            if(typeof i == "object")
            {
                compare(i,o);
            }else{
                if (i == o) y[o] = x[i];
            }
        }
    }
}

compare(x,y); 
```

[http://jsfiddle.net/9qkQ8/3/](http://jsfiddle.net/9qkQ8/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:31:56.617

| 我正在使用 jquery，所以如果有任何 jquery 函数可以提供帮助，那很好

看看[jQuery.extend](http://api.jquery.com/jQuery.extend/)。

```
$.extend(true, y, x); 
```

# c# - 执行 Url 并获取结果

> ID：11293654
> 
> 赞同：1
> 
> 时间：2012-07-02T12:25:04.077
> 
> 标签：c#, .net, .net-4.0, httpwebrequest

当我在 Internet Explorer 中执行闲置 URL

[http://sms.horisen.info:12000/bulk/send?type=text&user=xxx&password=xxx&sender=Bulk+Test&receiver=%2b123456789&dcs=UCS&text=Dies+ist+ein+Test!&dlr-mask=19](http://sms.horisen.info:12000/bulk/send?type=text&user=xxx&password=xxx&sender=Bulk+Test&receiver=%2b123456789&dcs=UCS&text=Dies+ist+ein+Test!&dlr-mask=19)

我得到了消息

```
ERR 103 
No account with given username/password 
```

我怎样才能用 C# 做到这一点？我试过了：

```
var url = "http://sms.horisen.info:12000/bulk/send?type=text&user=xxx&password=xxx&sender=Bulk+Test&receiver=%2b123456789&dcs=UCS&text=Dies+ist+ein+Test!&dlr-mask=19";
var req = (HttpWebRequest)WebRequest.Create(url);
var res = req.GetResponse(); 
```

但是在最后一行，出现了一个`System.Net.WebException` 我必须如何执行这个我可以得到文本结果的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:42:56.310

我在 C# 程序中尝试了你的 URL，它也给了我一个错误。这是由于状态码为 420，这使得 .net 框架将响应视为错误响应并引发异常。有关使用带有错误状态代码的响应的更多信息，请查看此处：[.Net HttpWebRequest.GetResponse() 在返回 http 状态代码 400（错误请求）时引发异常](https://stackoverflow.com/questions/692342/net-httpwebrequest-getresponse-raises-exception-when-http-status-code-400-ba)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:26:59.843

这：

```
var res = req.GetResponse(); 
```

应该是这样的：

```
var res = (HttpWebResponse)req.GetResponse(); 
```

您使用 var 的任何特殊原因？

# java - Android http 请求 POST

> ID：11293656
> 
> 赞同：1
> 
> 时间：2012-07-02T12:25:18.947
> 
> 标签：java, android, http, post, request

我正在构建一个简单的 android 应用程序，它向这个站点[http://www.ap-ljubljana.si/vozni_red2/VR2.php](http://www.ap-ljubljana.si/vozni_red2/VR2.php)发送一个 http post 请求，然后根据 post 请求获得适当的响应。问题是我的应用程序没有得到与浏览器相同的响应。任何想法为什么？

文件

```
`HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.ap-ljubljana.si/vozni_red2/VR3.php");

    try{

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("VSTOP_ID", "1"));
        nameValuePairs.add(new BasicNameValuePair("IZSTOP_ID","1"));
        nameValuePairs.add(new BasicNameValuePair("btnNext", "Naprej"));

        httppost.setHeader("Cache-Control", "max-age=0");
        httppost.setHeader("Origin", "http://www.ap-ljubljana.si");
        httppost.setHeader("Referer", "http://www.ap-ljubljana.si/vozni_red2/VR2.php?DATUM="+datum+"&VSTOP_IME=Vstop...&IZSTOP_IME=Izstop...");
        httppost.setHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        httppost.setHeader("DNT", "1");
        httppost.setHeader("Accept-Encoding", "gzip,deflate,sdch");
        httppost.setHeader("Accept-Language", "sl-SI,sl;q=0.8,en-GB;q=0.6,en;q=0.4");
        httppost.setHeader("Accept-Charset", "ISO-8859-2,utf-8;q=0.7,*;q=0.3");
        //httppost.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));

        return httpclient.execute(httppost);

    }
    catch (ClientProtocolException e){

        return null;
    }
    catch (IOException e){

        return null;
    }` 
```

浏览器的http post请求

[http://i45.tinypic.com/zvqww7.jpg](http://i45.tinypic.com/zvqww7.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:49:22.717

我认为您没有点击确切的 URL，因为您点击的 URL 不是 API，AFAIT，因为这是指向它的网页 URL。

在浏览器中，当您这样做时，还有其他 API 链接正在执行任务，并且您会得到正确的响应，因为网页是这样构建的，以帮助您了解响应结果，但是当您在此链接上执行此操作时，它实际上返回了上述 php 链接的内容，而主要工作由其他 API 链接完成。

如果我错了，请告诉我，以便我可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:32:26.553

您的APP请求中缺少cookie信息。可能是造成问题。我认为一些服务器端调试可以解决这个问题。

# android - 如何在 Eclipse 中将此控件集成到我的应用程序中。？

> ID：11293659
> 
> 赞同：0
> 
> 时间：2012-07-02T12:25:38.380
> 
> 标签：android, eclipse, android-layout, android-widget

我正在为我的应用程序寻找可滚动选项卡，但我被困在这里。

我找到了一个可以控制的[网站](http://viewpagerindicator.com)。但我不知道如何将它集成到eclipse中。？

如果有人在 Eclipse 中使用过这个，请与我分享。我需要在我的应用程序中实现。

我下载的文件的目录结构：

```
library
   -> libs
   ->    -> android-support-v4.jar
   -> res
   -> src
   -> AndroidManifest.xml
   -> pom.xml
Sample
   -> libs
   ->    -> android-support-v4.jar
   -> psd
   -> res
   -> src
   -> AndroidManifest.xml
   -> logo.png
   -> pom.xml
.gitignore
checkstyle.xml
pom.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:44:14.717

Try this: Right click your project, select 'Android tools' -> 'Add support library'

# javascript - 带有嵌套待办事项的 Backbone.js 待办事项示例

> ID：11293662
> 
> 赞同：2
> 
> 时间：2012-07-02T12:25:44.630
> 
> 标签：javascript, backbone.js

我想在每个待办事项上使用嵌套待办事项来扩展[主干待办事项示例](http://addyosmani.github.com/todomvc/architecture-examples/backbone/index.html)（[代码）。](https://github.com/addyosmani/todomvc/tree/master/architecture-examples/backbone)

我必须使用 Backbone 关系还是有更好或更简单的解决方案？

Edit1：我尝试使用 Backbone 关系来使其工作，但在应用程序视图中的“createOnEnter”函数上出现错误：“未捕获的 TypeError：对象函数（obj）{返回新包装器（obj）；}没有方法”是对象'"。这是代码：

```
$(function(){

// ------------------- Todo Model ------------------

var Todo = Backbone.RelationalModel.extend({

  relations: [{
     type: Backbone.HasMany,
     key: "children",
     relatedModel: "Todo",
     collectionType: "TodoList",
     reverseRelation: {
         key: "parent",
         includeInJSON: "id"
     } 
  }],

initialize: function() {
  console.log("MODEL: initialize()");
  if (!this.get("order") && this.get ("parent")) {
    this.set( {order: this.get("parent").nextChildIndex() });
  }
},

defaults: function() {
    console.log("MODEL: defaults()");
  return { 
      done: false,
      content: "default content" };
},

nextChildIndex: function() {
    var children = this.get( 'children' );
    return children && children.length || 0;
},

clear: function() {
  this.destroy();
}
}); 
```

// -------------------- 待办事项集合 ------------------

```
var TodoList = Backbone.Collection.extend({
model: Todo,
// Save all of the todo items under the `"todos"` namespace.
localStorage: new Store("todos-backbone"),

done: function() {
  return this.filter(function(todo){ return todo.get('done'); });
},

});
var Todos = new TodoList; 
```

// ------------------- 待办事项视图 ------------------

```
var TodoView = Backbone.View.extend({
tagName:  "li",

template: _.template($('#item-template').html()),

events: {
  "keypress input.add-child": "addChild",
  "click .check"              : "toggleDone",
  "dblclick label.todo-content" : "edit",
  "click span.todo-destroy"   : "clear",
  "keypress .todo-input"      : "updateOnEnter",
  "blur .todo-input"          : "close"
},

initialize: function() {
    console.log("TODOVIEW: initialize()");
  this.model.bind('change', this.render);
  this.model.bind('destroy', this.remove);

  this.model.bind("update:children", this.renderChild);
  this.model.bind("add:children", this.renderChild);

  this.el = $( this.el );
  this.childViews = {};
},

render: function() {
  console.log("TODOVIEW: render()");
  $(this.el).html(this.template(this.model.toJSON()));
  this.setText();
  this.input = this.$('.todo-input');

  this.el.append("<ul>", {"class": "children"}).append("<input>", { type: "text", "class": "add-child" });

  _.each(this.get("children"), function(child) {
      this.renderChild(child);
  }, this);      
    return this;
},

  addChild: function(text) {
      console.log("TODOVIEW: addChild()");
      if (e.keyCode == 13){
          var text = this.el.find("input.add-child").text();
          var child = new Todo( { parent: this.model, text: text});
      }
  },

  renderChild: function(model){
      console.log("TODOVIEW: renderChild()");
    var childView = new TodoView({ model: model});
    this.childViews[model.cid] = childView;
    this.el.find("ul.children").append(childView.render());
  },

// Remove the item, destroy the model.
clear: function() {
    console.log("TODOVIEW: clear()");
  this.model.set({parent: null});
  this.model.destroy();
  //this.model.clear();
}
}); 
```

// - - - - - - - - - 应用程序 - - - - - - - - - - - -

```
var AppView = Backbone.View.extend({
el: $("#todoapp"),

statsTemplate: _.template($('#stats-template').html()),

events: {
  "keypress #new-todo":  "createOnEnter",
  "keyup #new-todo":     "showTooltip",
  "click .todo-clear a": "clearCompleted",
  "click .mark-all-done": "toggleAllComplete"
},

initialize: function() {
    console.log("APPVIEW: initialize()");
  _.bindAll(this, 'addOne', 'addAll', 'render', 'toggleAllComplete');

  this.input = this.$("#new-todo");

  Todos.bind('add',     this.addOne);
  Todos.bind('reset',   this.addAll);
  Todos.bind('all',     this.render);

  Todos.fetch();
},

render: function() {

},

addOne: function(todo) {
  var view = new TodoView({model: todo});
  this.$("#todo-list").append(view.render().el);
},

addAll: function() {
  Todos.each(this.addOne);
},

// Generate the attributes for a new Todo item.
newAttributes: function() {
  return {
    content: this.input.val(),
    order:   Todos.nextOrder(),
    done:    false
  };
},

createOnEnter: function(e) {
    console.log("APPVIEW: createOnEnter()");
  if (e.keyCode != 13) return;
  Todos.create( this.newAttributes());
  this.input.val('');
},
});
var App = new AppView;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:07:34.300

在这种情况下，我被分配了一个**待办事项集合**到新的***类别模型属性***

像 ：

```
var todo = Backbone.Model.extend({

    defaults:function(){
        return {description:"No item description",done:false };
    },
    ...............
    ............... 
});

var todo_collection = Backbone.Collection.extend({
    model: todo,
    ..............
    ..............
});

var Category = Backbone.Model.extend({
    initialize: function(){
        this.toDoCollection = new todo_collection();
    }
}); 
```

如果您需要更多参考，请参阅我在 github 上的示例：[todo list with nested items](https://github.com/balachandar2k12/todo_category_with_backbonejs/blob/master/todocat_final.js) using BACKBONE JS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:51:27.857

我只是将一个模型设置为另一个模型的属性。在你的情况下：

```
window.app.Todo = Backbone.Model.extend({

        // Default attributes for the todo.
        defaults: {
            title: "empty todo...",
            completed: false
        },

        // Ensure that each todo created has `title`.
        initialize: function() {
            if (!this.get("title")) {
                this.set({"title": this.defaults.title});
            }
        if(this.has("childrecords")){
            var self = this;
            self.set("children",new Array());
            $.each(this.get("childrecords"), function(id, child){
                self.get("children").push(new Todo(child));
            });
        }
    },
// ... 
```

对此的几点说明：

*   我认为任何孩子都是通过 JSON 加载到一个名为“childrecords”的数组中
*   我使用 jQuery 来迭代这个数组，使用任何你喜欢的东西
*   您可能希望使用集合而不是数组

# php - 使用 jQuery 设置 cookie 时遇到问题

> ID：11293667
> 
> 赞同：1
> 
> 时间：2012-07-02T12:26:10.327
> 
> 标签：php, jquery, html, cookies, setcookie

我正在尝试使用选择框选项的值设置 cookie。我正在使用位于以下位置的 jquery.cookie.js 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
<head>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#set_state").change(function() {
        var theState = $(this).val();
        $.cookie('set_state', theState, { expires: 5, path: '/' });
    });
});
</script>
</head>
<body>
<select id="set_state" name="state">
    <option value="" selected="selected"></option>
    <option value="">None</option>
    <option value="AL">AL</option>
    <option value="AK">AK</option>
    <option value="AZ">AZ</option>
    <option value="AR">AR</option>
    <option value="CA">CA</option>
    <option value="CO">CO</option>
    <option value="CT">CT</option>
    <!-- no need to post them all here -->
</select>
</body> 
```

如果我使用警告框来显示变量`theState`，它可以工作，但我无法让`$.cookie`函数工作......我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:31:13.203

这是使用 jQuery cookie 插件设置 cookie 的完整示例。

HTML：

```
<head>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script type='text/javascript' src='http://codebins.com/userUploads/3/jquery.cookie.js'></script>
</head>
<body>
     <select id="set_state" name="state">
        <option value="" selected="selected"></option>
        <option value="">None</option>
        <option value="AL">AL</option>
        <option value="AK">AK</option>
        <option value="AZ">AZ</option>
        <option value="AR">AR</option>
        <option value="CA">CA</option>
        <option value="CO">CO</option>
        <option value="CT">CT</option>
        <!-- no need to post them all here -->
    </select>
    <input type="button" id="btncookie" value="get cookie" />
    <input type="button" id="btndelcookie" value="delete cookie" />
</body> 
```

查询：

```
$(document).ready(function() {
   $("#set_state").change(function() {
       var theState = $(this).val();
       $.cookie('set_state', theState, {
           expires: 5,
           path: '/'
       });
  });
  $("#btncookie").click(function() {
      alert("Your Selected Value from Cookie is : " + $.cookie('set_state'));
  });
  $("#btndelcookie").click(function() {
       $.cookie('set_state', '', {
        expires: -1
       });
       $("#set_state").val("");
       alert('Cookie is deleted now, try to get cookie..!');
   });
}); 
```

[在代码箱上尝试上面的示例： http](http://codebins.com/codes/home/4ldqpc6) ://codebins.com/codes/home/4ldqpc6

# php - Mac PHP 开发栈

> ID：11293668
> 
> 赞同：0
> 
> 时间：2012-07-02T12:26:11.277
> 
> 标签：php, macos, apache

有没有一种安装 PHP 开发堆栈的好方法，包括 PHP 5.4，它不是 XAMPP 或 MAMP，并且不需要***编译 PHP***？

我正在为在我的 Mac 上安装独立的 Apache 服务器所需的大量安装而苦苦挣扎，而没有任何安装程序可以正确执行此操作对我来说毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:24:08.860

我们遇到了同样的问题（尤其是缺少 PECL 扩展），并提出了两种不同的解决方案，顺序如下：

1.  首先，我们使用了[Zend Server Community Edition](http://www.zend.com/en/products/server-ce/)，它具有附带许多扩展的巨大优势，并且是免费的。您可以单独下载[MySQL 社区服务器](http://dev.mysql.com/downloads/mysql/)，并且您已经安装了有效的 MAMP。
2.  因为这仍然不是完美的（例如，很难让 PEAR 工作），我们现在使用被证明对我们来说是最好的解决方案，在[CentOS](http://www.centos.org/)虚拟机上运行完整的 LAMP 堆栈，使用免费的[VirtualBox](https://www.virtualbox.org/)，并共享网络主机和来宾之间的文件夹。

如果您想在几分钟内做好准备，请选择第一个解决方案。

如果您想花一些时间来设置虚拟机，您将享受两全其美：您的机器中始终可用的真正的 LAMP 服务器，以及您最喜欢的操作系统上的常用工具，用于您的日常工作。我们现在在 Windows 和 MacOS 上都使用这个解决方案，并且非常喜欢它。

# php - 创建用户帐户——php 使 HTML 表单消失

> ID：11293670
> 
> 赞同：-6
> 
> 时间：2012-07-02T12:26:19.127
> 
> 标签：php, html, forms

我正在构建一个基于 PHP 的登录/创建帐户脚本。只要文件顶部的 PHP 被注释掉/不存在，表单就会正确显示。一旦我将 php 放入文件中，表单就会消失。谁能看看他们是否找到了为什么会发生这种情况的原因？

谢谢，马特

//edit 所以我发现错误在于用于检查密码匹配的 if/else 语句。如果我注释掉 else 语句，页面会正确显示，一旦注释掉，我就会得到一个空白页面。我什至注释掉了 mysql_query() 并且只是输入了一个简单的回声，没有运气。

```
$db_found2 = conServer();

if($db_found2) {
    if (!empty($_POST['username']) || !empty($_POST['password']) || !empty($_POST['email']) || !empty($_POST['conpassword'])) {
        $username = $_POST['username'];
        $password = $_POST['username'];
        $conpassword = $_POST['conpassword'];
        $email = $_POST['email'];

        if ($password != $conpassword) {
            $errormsg = "";
            $passerr = "Passwords do not match!";

        }
    }
}

function conServer() {
    $user_name = ""; //not displayed for privacy purposes
    $password = ""; //not displayed for privacy purposes
    $database = ""; //not displayed for privacy purposes
    $server = "localhost";
    $table = "users";

    $db_handle = mysql_connect($server, $user_name, $password);
    $db_found = mysql_select_db($database, $db_handle);

    return $db_found;
}

?>

<html>
<head>
    <link rel=stylesheet href="login.css" />
</head>

<body class="login">
    <div id="login">

    <form id="loginform" action="create.php" method="post">
    <p>
        <label for="username">
        Username *
        <br>
        <input type="text" name="username" id="username"/><span class="error"><?php echo $errormsg; ?></span>
        </label>
    </p>

    <p>
        <label for="password">
        Password *
        <br>
        <input type="password" name="password" id="password"/><span class="error"><?php echo $errormsg; ?></span>
        </label>
    </p>

    <p>
        <label for="password">
        Confirm Password *
        <br>
        <input type="password" name="conpassword" id="password"/><span class="error"><?php echo $errormsg; ?></span><span class="error"><?php echo $passerr; ?></span>
        </label>
    </p>

    <p>
        <label for="email">
        Email *
        <br>
        <input type="text" name="email" id="email" /><span class="error"><?php echo $errormsg; ?></span>
        </label>
    </p>

    <input type="submit" id="submit" value="Go ->"/>
    </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:28:13.140

顶部的脚本中可能存在错误，导致脚本终止。如果错误报告关闭，您得到的只是一个白页。

如何启用[错误报告](http://www.php.net/manual/en/function.error-reporting.php)：

```
error_reporting(E_ALL | E_STRICT); 
```

还要检查[display_errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)设置：

```
ini_get('display_errors'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:31:45.383

乍一看，我看到的唯一东西是微不足道的，缺少';' 在 '$passerr = "Passwords do not match!"' 行的末尾。请做一些调试，并在这里分享结果。我正在考虑在调用函数和东西之后回显 $db_found2 变量之类的东西，只是想知道你在哪里卡住了。

# ruby - 在 capistrano 任务中使用子字符串

> ID：11293671
> 
> 赞同：-1
> 
> 时间：2012-07-02T12:26:23.310
> 
> 标签：ruby, capistrano

我对 capistrano 比较陌生。我想知道如何在 capistrano 任务中对变量进行子串化。

虽然这给了我对**irb的期望**

```
ruby-1.9.2-p136 :012 > release_path = "12345678910"
 => "12345678910"
ruby-1.9.2-p136 :019 > release_path[-6..-1]
 => "678910" 
```

它在 capistrano 任务**中什么也不做**

```
namespace :namespacename do
  task :taskname do

    release_path = "1234678910"
    release_path[-6..-1]

    # output is still "12345678910"
    puts release_path

  end
end 
```

有人如何在 capistrano 任务中的变量上使用 ruby​​ 类/方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:31:08.427

capistrano 中的所有内容都是红宝石，所以一切都很顺利：

```
namespace :namespacename do
  task :taskname do

    release_path = "1234678910"
    release_path[-6..-1]     #<----    NO!!!

    # output is "678910"
    puts release_path[-6..-1]      #<----    YEAH BOY!!!

    release_path = release_path[-6..-1]
    puts release_path       # output is "678910"

    release_path[-3..-1]   # does nothing because "910" is returned into thin air
    puts release_path[-3..-1]       # output is "910"
    puts release_path[-3..-1][-2..-1]    # output is substring of substring "10"
  end
end 
```

使用子字符串范围语法 [x...y] 它将返回它，而不是截断它并存储在同一个变量中。

高温高压

# python - 在 python 中进行单个插入查询

> ID：11293678
> 
> 赞同：1
> 
> 时间：2012-07-02T12:26:53.453
> 
> 标签：python

`template_list`我试图为数组中的值创建一个插入查询。这些值适用于 field `template_name`。

```
dir_template_list = ['template1', 'template2', 'template3']
sql = "INSERT INTO tbltemplate (template_name) VALUES(%s)" % (dir_template_list) 
```

是否有使用字符串占位符创建此查询的简单/更容易的方法？

```
INSERT INTO tbltemplate (template_name) VALUES ('template1'),('template2'),('template3') 
```

**编辑：**这是我的实际表结构

```
FIELD   
-------
id             int(6)         
template_name  VARCHAR(128) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:29:15.413

首先，**永远不要使用字符串格式来创建查询**- 否则您将面临 SQL 注入漏洞的风险，必须处理转义等。

正确的方法是对每一行使用单个查询并将数据作为参数传递：

```
sql = "INSERT INTO tbltemplate (template_name) VALUES (%s)"
for template in dir_template_list:
    conn.query(sql, (template,)) 
```

为了提高性能，您可能希望在事务中或使用准备好的语句来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:48:53.213

正如 ThiefMaster 所指出的，您永远不应该使用来自用户的输入来构建带有字符串格式的 SQL 查询。这是一个 SQL 注入漏洞，是当今软件系统中的第一大安全问题。

您的数据库提供了一种方法来分别提供查询字符串和数据，这是安全的，您应该使用它：

```
dir_template_list = ['template1', 'template2', 'template3']
sql = "INSERT INTO tbltemplate (template_name) VALUES(?, ?, ?)"
conn.execute(sql, *dir_template_list) 
```

注意：我不知道你的数据库连接叫什么，但`conn`很常见。此外，不同的数据库对占位符使用不同的语法： `?`并且`%s`都是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:51:38.283

如果它是一行 3 列的代码应该是这样的（假设表存在）：

```
import sqlite3
dir_template_list = ['template1', 'template2', 'template3']
con = sqlite3.connect(":memory:")
sql = "INSERT INTO tbltemplate (template_name) VALUES(?, ?, ?)"
con.execute(sql, dir_template_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:56:36.900

好吧，我的回答是：

```
from itertools import repeat
valqs = ','.join(repeat('%s', len(dir_template_list)))
sql = "INSERT INTO tbltemplate (template_name) VALUES(%s)" % valqs 
```

然后在您的光标/连接对象上执行（sql，dir_template_list）。

# matlab - matlab用向量填充数组

> ID：11293682
> 
> 赞同：1
> 
> 时间：2012-07-02T12:27:23.887
> 
> 标签：matlab, matrix

我希望用向量填充一个 nxn 矩阵。我有以下内容：

```
[x y] = meshgrid(a);
for i:size(a,1)
    for j:size(a,2)
        b = [x(i,j),y(i,j) 0];
    end
end 
```

我认为这里可能有点天真，因为我期望 b 的向量元素中有一系列不同的数字。相反，我得到 b 的元素都是相等的。还

```
size(b) = 1 3
size(b(1,1)) = 1 1 
```

我期望 size(b(1,1)) = 1 3 因为 b 中的每个元素都应该是长度为 3 的向量。有人能告诉我哪里出错了吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:29:58.840

You are overriding the value of `b` in the loop. Try:

```
[x y] = meshgrid(a);
b = zeros( size(a,1) size(a,2) 3);
for i:size(a,1)
    for j:size(a,2)
        b(i,j,:) = [x(i,j),y(i,j) 0];
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:06:14.660

有几种方法可以`b`用向量填充 n×n 数组：

(1) 您可以创建一个 n×n×3 数组，以便`squeeze(b(i,j,:))`将向量`i,j`作为 3×1 数组返回：

```
a=1:3,
[x y] = meshgrid(a);
b = cat(3,x,y,zeros(size(x)); 
```

(2) 您可以创建一个 n×n 元胞数组，以便`b{i,j}`返回向量`i,j`

```
a=1:3,
[x y] = meshgrid(a);
b = arrayfun(@(x,y)[x,y],x,y,'uni',false); 
```

# matlab - 'char' 类型的输入参数的未定义函数或方法 'readimage'

> ID：11293686
> 
> 赞同：2
> 
> 时间：2012-07-02T12:27:26.720
> 
> 标签：matlab

我正在尝试加载图像，但它显示错误消息`Undefined function or method 'readimage' for input arguments of type 'char'.`

我的调用函数在这里

```
 h=uicontrol(FigWin,...
 'Style','pushbutton',...
 'Position',[0,320,80,20],...
 'String','Load',...
 'Callback',...
 ['image1=loadimage;'...
 'subplot(AxesHandle1);'...
 'imagesc(image1);'...
 'title(textLoad);'...
 'colormap(gray);']); 
```

我的调用函数如下

```
function image1=loadimage
    [imagefile1 , pathname]= uigetfile('*.bmp;*.BMP;*.tif;*.TIF;*.jpg','Open An Fingerprint image'); 
    if imagefile1 ~= 0 
        cd(pathname);
        image1=readimage(char(imagefile1));
        image1=255-double(image1);
    end
end 
```

另一个问题，如果程序中有警告，是不是有问题？对不起，我是 Matlab 的新手。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:02:21.160

我只能将其重现为路径问题。

问题几乎可以肯定`readimage.m`不在路径上，而是位于您测试它的当前目录中。现在最简单的解决方案是`imread`直接使用而不是直接使用 wrapper `readimage`，但假设您想`readimage`稍后添加功能：

简单的解决方案是将目录添加`readimage.m`到您的路径（文件->设置路径->添加文件夹->使用 readimage.m 浏览到目录）。但是，如果您想测试这确实是问题，请确保您可以手动运行`readimage('existing_image.jpg')`（意味着您应该浏览到该目录），然后运行以下修改后的代码

```
function image1=loadimage
    [imagefile1 , pathname]= uigetfile('*.bmp;*.BMP;*.tif;*.TIF;*.jpg','Open An Fingerprint image'); 
    if imagefile1 ~= 0 
        image1=readimage([pathname imagefile1]);
        image1=255-double(image1);
end; 
```

与原始代码的唯一区别是我们没有使用 cd(pathname) 来更改目录，而是将其合并到 readimage 命令本身中。

我打赌 cd() 命令的组合和它不在路径上的组合让你认为 readimage(w) 在路径上并且正在工作，而它实际上只是在当前目录中......直到cd() 命令已运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:21:03.373

稍微重写你的函数：

```
function img = loadimage()
    [fname,pname] = uigetfile('*.bmp;*.tif;*.jpg', 'Open Fingerprint image');
    if pname==0, error('no file selected'); end

    img = imread( fullfile(pname,fname) );
    img = 255 - double(img);
end 
```

# iphone - 如何显示 NSDocument 目录中的所有图像

> ID：11293690
> 
> 赞同：5
> 
> 时间：2012-07-02T12:27:37.857
> 
> 标签：iphone, objective-c, ios5, alassetslibrary, nsdocumentdirectory

首先，我从照片库中选择图像到 ALAsset 库，然后我将图像从 ALAsset 库路径存储在文档目录中。

我正在使用此代码将图像存储在 ALAsset 库中的文档目录中......它的工作完美......现在我想在表格视图中显示存储在文档目录中的所有图像......我该怎么做？有谁能够帮助我？？

**将图像从 ALAsset 库导入到 NSdocument 目录的代码**

```
for (int j=0; j<[assetArray count]; j++) {

ALAssetRepresentation *representation = [[assetArray objectAtIndex:j] defaultRepresentation];
NSString* filename = [documentPath stringByAppendingPathComponent:[representation filename]];

[[NSFileManager defaultManager] createFileAtPath:filename contents:nil attributes:nil];
NSOutputStream *outPutStream = [NSOutputStream outputStreamToFileAtPath:filename append:YES];
[outPutStream open];

long long offset = 0;
long long bytesRead = 0;

NSError *error;
uint8_t * buffer = malloc(131072);
while (offset<[representation size] && [outPutStream hasSpaceAvailable]) {
    bytesRead = [representation getBytes:buffer fromOffset:offset length:131072 error:&error];
    [outPutStream write:buffer maxLength:bytesRead];
    offset = offset+bytesRead;
}
[outPutStream close];
free(buffer); 
```

}

之后，我使用以下代码获得了目录的内容：

```
 NSFileManager *manager = [NSFileManager defaultManager];
fileList = [manager directoryContentsAtPath:newDir]; 
```

它也可以工作......但是现在当我想显示文档目录中的图像时。它什么都没有显示......

```
 setImage.image=[UIImage imageNamed:[filePathsArray objectAtIndex:0]]; 
```

谁能帮忙，问题出在哪里？？？？？？- 我有一个疑问：*将图像从 ALAsset 库导入到文档目录是否正确？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T12:55:19.110

**这个答案是关于如何从文档目录中检索图像并将它们显示到 UITableView...** ..

首先，您必须将所有图像从您的文档目录中获取到一个数组中......

```
-(void)viewWillAppear:(BOOL)animated
{

    arrayOfImages = [[NSMutableArray alloc]init];
NSError *error = nil;

    NSString *stringPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];

    NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath: stringPath  error:&error];

  for(int i=0;i<[filePathsArray count];i++)
  {
      NSString *strFilePath = [filePathsArray objectAtIndex:i];
      if ([[strFilePath pathExtension] isEqualToString:@"jpg"] || [[strFilePath pathExtension] isEqualToString:@"png"] || [[strFilePath pathExtension] isEqualToString:@"PNG"]) 
      {
         NSString *imagePath = [[stringPath stringByAppendingString:@"/"] stringByAppendingString:strFilePath];
         NSData *data = [NSData dataWithContentsOfFile:imagePath];
        if(data)
        {
          UIImage *image = [UIImage imageWithData:data];
          [arrayOfImages addObject:image];
        }
      }

  }

} 
```

之后 - 使用这个数组，你可以在 uitableview 单元格中显示图像记住不要在你的视图上添加表格视图，直到你的数组被填满.....

```
#pragma mark - UItableViewDelegate methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrayOfImages count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tablView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    //adjust your imageview frame according to you
    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0.0, 0.0, 470.0, 80.0)];

    [imageView setImage:[arrayOfImages objectAtIndex:indexPath.row]];
    [cell.contentView addSubview:imageView];
    return cell; 
```

}

现在运行它会工作..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T12:36:52.507

您可以通过以下方式直接获取内容：

```
NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] error:NULL]; 
```

设置图像：

```
[imgView setImage:[UIImage imageWithContentsOfFile:"Your complete path"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:34:11.723

您可以通过以下方式从文档目录中获取所有图像文件：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
    NSMutableArray *imgFiles = [[NSMutableArray alloc] init];
    for (int i=0; i<filePathsArray.count; i++) {
        NSString *strFilePath = [filePathsArray objectAtIndex:0];
        if ([[strFilePath pathExtension] isEqualToString:@"jpg"]) {
            [imgFiles addObject:[filePathsArray objectAtIndex:i]];
        }
    }

    NSLog(@"array with paths of image files in the Document Directory %@", filePathsArray); 
```

然后你可以`UITableView`像这样显示图像：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    UIImageView *img = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 50, 50)];
    img.image = [UIImage imageWithContentsOfFile:[imgFiles objectAtIndex:indexPath.row]];
    [cell addSubview:img];

    return cell;
} 
```

干杯！！！

# c# - 为什么 C# 中的对象比较工作起来很奇怪？

> ID：11293693
> 
> 赞同：0
> 
> 时间：2012-07-02T12:27:47.290
> 
> 标签：c#, comparison, string-comparison

当我比较两个类型为 as`object`且都包含相同值的变量时，使用`==`运算符的比较结果会产生`false`.

```
object Var1 = "X";
object Var2 = "X";

// This produces false result
bool Match = Var1 == Var2; 
```

为什么会这样？

**编辑：**上面是实际工作的代码！

我基于我的真实代码，看起来像这样但不起作用：

```
ChoiceValue = Choice.GetValue(FieldTemplate.ValueDataType);
if (ChoiceValue == Field.Value) RadioButton.IsChecked = true; 
```

`ChoiceValue`is`object`和`Field.Value`is 属性类型为`object`.

显然在不同的情况下工作方式不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T12:37:02.450

这种特定情况返回 false 的原因是因为**您的字符串没有被 interned**。（[字符串实习](http://en.wikipedia.org/wiki/String_interning)）

当我测试它时，我得到了正确的结果，因为我的琴弦被扣留了。

在您的情况下，这会导致 object == 运算符返回 false，因为**它通过引用进行比较**。

您的字符串没有被实习的原因是因为您正在比较动态构建的字符串（这意味着它们在编译时是未知的，但在运行时是未知的）。

如果您绝对必须使用对象变量，您可以使用`Equals`而不是`==`，或者您可以手动实习字符串[`String.Intern`](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

这种情况是引用类型字符串试图表现得像值类型的异常。这意味着它们在使用字符串 == 运算符时按值进行比较。但是，当您有对象时，它使用 object == 运算符，该运算符按引用进行比较。

这在[string](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.100%29.aspx)的文档中进行了解释。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T12:29:12.123

在您编辑的问题中，您会得到这种行为，因为`==`比较的是参考而不是它们的值。

在字符串值的情况下，由于字符串实习，它似乎按预期工作。在这里，您的`Var1`and`Var2`指向字符串“X”的单个副本，并且由于`==`比较引用它给出了真实的结果。

> 字符串实习。这是一种存储任何字符串的副本的方法。

您可能会看到：[了解字符串实习](http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html)

![在此处输入图像描述](../Images/30fa9e7576bec5522939bc418f36af25.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:30:11.777

```
Why is this happening? 
```

因为它匹配参考而不是它的值为假的。

在字符串`==`中比较它们的值。

尝试`Var1.Equals(Var2);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:31:28.907

运算符 == 比较参考和它们的值。

**（参考比较）**

这意味着**var1**指向内存中的位置 xxxx，而**var2**指向内存中的 yyyy。所以它们是不同的对象。

如果您的代码是：

```
object Var1 = "X";
object Var2 = Var1;

bool Match = Var1 == Var2; 
```

匹配为真，因为**Var1**和**Var2**都指向内存中的 xxxx，因此是同一个对象。

**（深度对象比较）**

您可以使用 Equals 比较对象内部的值。因此，当您比较 Var1（在 xxxx 位置）和 Var2（yyyy 位置）时，如果碰巧两者都包含相同的值（在本例中为字母 X），那么它将返回 true，否则返回 false。这样做的代码是：

```
object Var1 = "X";
object Var2 = "X";

// This produces false result
bool Match = Var1.Equals(Var2); 
```

注意：此答案仅适用于未保留字符串的情况。如果他们被实习，两个对象将指向内存中的相同位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T12:31:47.327

阅读更多相关信息：

[C#中字符串比较方法的区别](https://stackoverflow.com/questions/44288/differences-in-string-compare-methods-in-c-sharp)

[C# 对象比较](https://stackoverflow.com/questions/5212039/c-sharp-object-comparison)

[http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

希望这有助于理解 .Net 中的比较

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T12:32:46.033

因为它比较对象的引用。最好的方法是`override` `Equals`重载`==`运算符。

# asp.net - 在使用 ViewModel 的搜索表单下显示结果列表

> ID：11293695
> 
> 赞同：1
> 
> 时间：2012-07-02T12:28:00.717
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

上一篇文章的后续：[使用 DateTime 模板添加搜索表单](https://stackoverflow.com/questions/11285375/adding-a-search-form-using-a-datetime-template/11288466?iemail=1#11288466)

我还尝试按照此处的搜索示例：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework -in-an-asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

...但这并没有像我上一篇文章的答案中所建议的那样使用 ViewModel。

我正在尝试帮助搜索，这将需要两个日期（从/到），基于以下 ViewModel：

```
public class SearchViewModel
{
    [Required]
    public DateTime From { get; set; }
    [Required]
    public DateTime To { get; set; }
} 
```

我的 Views/Search/Index.cshtml 是：

```
@model ttp.Models.SearchViewModel
@{
    ViewBag.Title = "Search Availability";
}
<h2>Search Availability</h2>
@using (Html.BeginForm()) 
{ 
    <div class="row">
        <div class="span2">@Html.LabelFor(x => x.From)</div>
        <div class="span2">@Html.EditorFor(x => x.From)</div>
        <div class="span2">@Html.ValidationMessageFor(x => x.From)</div>
        </div>

    <div class="row">
        <div class="span2">@Html.LabelFor(x => x.To)</div>
        <div class="span2">@Html.EditorFor(x => x.To)</div>
        <div class="span2">@Html.ValidationMessageFor(x => x.To)</div>
    </div>

     <div class="row">
        <div class="span2 offset2"><button type="submit">Search</button></div>
     </div>
} 
```

Get: /Search/Index 控制器是：

```
 //
    // GET: /Search/

    public ActionResult Index()
    {
        SearchViewModel svm = new SearchViewModel();
        svm.From = DateTime.Today;
        svm.To = DateTime.Today;
        return View(svm);
    } 
```

到目前为止一切顺利 - 我的视图显示日期默认为今天的文本框（使用 DateTime Helper）。当我单击 Search 时，代码转到 SearchController // Post: / Search，如下所示：

```
 //
    // Post: /Search/
    [HttpPost]
    public ActionResult Index(SearchViewModel searchViewModel)
    {
        if (!ModelState.IsValid)
        {
            // Not valid, so just return the search boxes again
            return View(searchViewModel);
        }

        // Get the From/To of the searchViewModel

        DateTime dteFrom = searchViewModel.From;
        DateTime dteto = searchViewModel.To;

        // Query the database using the posted from/to dates

        IQueryable<Room> rooms = db.Rooms.Where(r => r.Clients.Any(c => c.Departure >= dteFrom && c.Departure < dteTo));

        // This is where I'm unsure

        ViewBag.Rooms = rooms.ToList();
        return View(rooms.ToList());

        } 
```

我现在不确定的是 Post 控制器的最后几行 - 我如何返回 IQueryable 房间中的房间列表 - 并在屏幕上显示房间列表？我是否重定向到另一个视图（如果是，我如何将房间列表传递给该视图）？如果我只是尝试运行上面的代码，我会收到错误消息：

```
The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[ttp.Models.Room]', but this dictionary requires a model item of type 'ttp.Models.SearchViewModel'. 
```

我是否试图混合苹果和梨 - 是否有在 From 和 To 搜索框（ViewModel）下显示房间列表？

谢谢，

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:33:26.437

您可以返回包含搜索结果的不同视图：

```
IQueryable<Room> rooms = db.Rooms.Where(r => r.Clients.Any(c => c.Departure >= dteFrom && c.Departure < dteTo));
return View("Result", rooms.ToList()); 
```

在里面`Result.cshtml`：

```
@model IEnumerable<Room>
... show the rooms here 
```

如果您不想保留相同的视图，请修改您的视图模型，使其包含第三个属性，该属性将表示您将在 POST 控制器操作中填充的搜索结果（房间集合）并重新显示相同的视图：

```
IQueryable<Room> rooms = db.Rooms.Where(r => r.Clients.Any(c => c.Departure >= dteFrom && c.Departure < dteTo));
searchViewModel.Rooms = rooms;
return View(searchViewModel); 
```

然后在视图中你可以有一个部分来显示结果：

```
@if (Model.Rooms != null)
{
    ... display the search results here
} 
```

但在这两种情况下，我都猜想`Room`对象是域模型。良好的实践要求您应该定义一个视图模型，其中仅包含视图所需的信息：

```
public class RoomViewModel
{
    ... only properties that you need to work with on the view
} 
```

然后有一个`IEnumerable<RoomViewModel> Rooms { get; set; }`属性可以使用。您仍然可以`IQueryable<Room>`从 DAL 层的控制器操作中获取域模型，但在将其传递给视图之前，请确保执行到视图模型的转换。这是[AutoMapper](http://automapper.codeplex.com/)可以派上用场的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:41:04.087

您将不同的模型返回到同一个视图，因此首先只需更改您的控制器以返回传入的`searchViewModel`.

```
ViewBag.Rooms = rooms.ToList();
return View(searchViewModel); 
```

您还可以将房间列表返回到相同的视图，就像您对 ViewBag 所做的那样，您只是在视图中没有任何地方为列表呈现任何标记：

```
@model ttp.Models.SearchViewModel 
@{     
    ViewBag.Title = "Search Availability"; 
} 
<h2>Search Availability</h2> 
@using (Html.BeginForm())  
{      
    <div class="row">
        <div class="span2">@Html.LabelFor(x => x.From)</div>
        <div class="span2">@Html.EditorFor(x => x.From)</div>
        <div class="span2">@Html.ValidationMessageFor(x => x.From)</div>
    </div>
    <div class="row">
        <div class="span2">@Html.LabelFor(x => x.To)</div>
        <div class="span2">@Html.EditorFor(x => x.To)</div>
        <div class="span2">@Html.ValidationMessageFor(x => x.To)</div>
    </div>
    <div class="row">
        <div class="span2 offset2"><button type="submit">Search</button></div>
    </div> 
}
@if (ViewBag.Rooms != null)
{
    foreach (var room in ViewBag.Rooms as List<Room>)
    {
        // Build your room list markup here
    }
} 
```

# validation - Silex 表单验证以及翻译提供程序

> ID：11293700
> 
> 赞同：0
> 
> 时间：2012-07-02T12:28:15.393
> 
> 标签：validation, translation, provider, silex

我使用最新版本的 Silex（不是 Phar 版本）。我在实现表单服务提供者和翻译提供者时遇到问题，我收到以下错误：

“致命错误：第 47 行的 D:\xampp\htdocs\mytest\vendor\symfony\translation\Symfony\Component\Translation\Loader\XliffFileLoader.php 中找不到类 'Symfony\Component\Config\Resource\FileResource'”

如果我禁用此行，表单会显示并且一切正常（翻译除外）。我什至收到消息，可以从德语表格的一个选项中进行选择。

```
$app->register(new Silex\Provider\ValidatorServiceProvider()); 
```

请给我一个提示如何解决这个问题。请在下面查看我的代码和我的 composer.json 文件：

应用程序.php：

```
<?php
$app = new Silex\Application();
$app['debug'] = true;

use Silex\Provider\FormServiceProvider;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

$app->register(new Silex\Provider\FormServiceProvider());
$app->register(new Silex\Provider\TranslationServiceProvider(), array(
    'locale' => 'de',
    'fallback_locale' => 'en',
));
$app->register(new Silex\Provider\ValidatorServiceProvider());
$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__.'/../views',
));

// Sample from silex-homepage
$app->match('/form', function (Request $request) use ($app) {
    // some default data for when the form is displayed the first time
    $data = array(
        'name' => 'Your name',
        'email' => 'Your email',
    );

    $form = $app['form.factory']->createBuilder('form', $data)
        ->add('name')
        ->add('email')
        ->add('gender', 'choice', array(
            'choices' => array(1 => 'male', 2 => 'female'),
            'expanded' => true,
        ))
        ->getForm();

    if ('POST' == $request->getMethod()) {
        $form->bindRequest($request);

        if ($form->isValid()) {
            $data = $form->getData();

            // do something with the data

            // redirect somewhere
            return $app->redirect('...');
        }
    }

    // display the form
    return $app['twig']->render('test.html', array('form' => $form->createView()));
});

return $app;
?> 
```

作曲家.json：

```
{
    "require": {
        "silex/silex": "1.0.*",
        "symfony/browser-kit": "2.1.*",
        "symfony/console": "2.1.*",
        "symfony/config": "2.1.*",
        "symfony/css-selector": "2.1.*",
        "symfony/dom-crawler": "2.1.*",
        "symfony/filesystem": "2.1.*",
        "symfony/finder": "2.1.*",
        "symfony/form": "2.1.*",
        "symfony/locale": "2.1.*",
        "symfony/process": "2.1.*",
        "symfony/security": "2.1.*",
        "symfony/serializer": "2.1.*",
        "symfony/translation": "2.1.*",
        "symfony/validator": "2.1.*",
        "symfony/monolog-bridge": "2.1.*",
        "symfony/twig-bridge": "2.1.*",
        "monolog/monolog": ">=1.0.0,<1.2-dev",
        "twig/twig": ">=1.2.0,<2.0-dev",
        "doctrine/dbal": "2.1.*",
        "swiftmailer/swiftmailer": "4.1.*"
    },
    "autoload": {
        "psr-0": {"Acme": "src/"}
    }
} 
```

# android - Testing Android apps in emulator

> ID：11293704
> 
> 赞同：2
> 
> 时间：2012-07-02T12:28:20.483
> 
> 标签：android, android-emulator, google-play

Is there any ways to test free Android applications (available from Google Play) using Android emulator?

This is useful if I want to test apps that uses latest APIs that my Android device do not support.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:07:47.297

您实际上可以在模拟器中直接从 Google Play 下载免费应用程序。有关详细信息，请参阅[https://apkudo.com/?p=510 。](https://apkudo.com/?p=510)希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:59:04.793

> 有什么方法可以使用 Android 模拟器测试免费的 Android 应用程序（可从 Google Play 获得）？

仅当这些应用程序的作者通过从其网站直接下载或通过其他获得许可以便您可以安装在模拟器上的市场来分发它们时。

> 好的，但这会让 Android 开发人员的生活变得艰难？

不是特别恕我直言，但欢迎您发表意见。

> 来自 Google 的不道德活动。

再次，欢迎您发表意见。恕我直言，Google 仅将 Play 商店许可给设备制造商并不是不道德的——单独复制、分发和下载它*是不道德的。*同样，恕我直言，应用程序开发人员选择仅通过 Play 商店分发他们的应用程序并不是不道德的——单独复制、分发和下载这些应用程序*是不道德的。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:32:32.363

经过一番研究，我自己找到了一个可靠的道德和法律解决方案，这确实是谷歌自己提供的。

您可以在您的计算机中安装 Android 操作系统并测试任何免费或购买的应用程序。

更多细节：

[http://code.google.com/p/live-android/](http://code.google.com/p/live-android/)

[http://www.youtube.com/watch?feature=player_embedded&v=MgcJrvc2OYU](http://www.youtube.com/watch?feature=player_embedded&v=MgcJrvc2OYU)

# ruby-on-rails - Two Apache Passengers listeners using the same Rails app in the same host/computer

> ID：11293709
> 
> 赞同：0
> 
> 时间：2012-07-02T12:28:45.097
> 
> 标签：ruby-on-rails, passenger, camping

I have a Rails app that is served by Apache and Passenger, using only SSL.

Now, I have an external connection that must be made using only HTTP.

As I'm only listening for port 443 for this Rails App, I don't check in the code if the connection is secure or not.

Every connection for port 80 for this App are redirected to the https 443.

The question is, can I have two Apache Passengers listeners using the same Rails app in the same host/computer ?

One for 80 and antoher one for 443, of course each one will listen for different url.

I think this is not possible, at least my initial tests weren't successful.

What are the best options to accomplish this ?

*   Add a new Rails App instance, with a different name (wasting resources but easier one!!!!)
*   Add one instance of Camping with Passenger for just this purpose, listening to special address and just for one route
*   ...

thanks,

regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:45:13.260

好吧，终于解决了为此目的使用最低限度的“去咖啡因的 Rails 应用程序”......可能会浪费资源，但此时它所在的服务器是有能力的，也许我们将来可以改进，但至少这是不那么痛苦的解决方法...

# java - Generate Alphabetic Pyramid based on user input

> ID：11293710
> 
> 赞同：2
> 
> 时间：2012-07-02T12:28:49.970
> 
> 标签：java, nested-loops

I'm having trouble with this homework assignment and would like some assistance. I do not want just solutions, as I want to learn from them.

We are doing a letter pyramid using loops. I can't seem to figure out how to put these FOR loops together to make this work as instructed.

The user should enter a letter (or other character which gives an error) then the program converts the letter to upper case if not already. After the conversion to upper case, loops are used in order to go from the character 'A' to whatever the user enters then back to 'A' again. An example is below.

I have attached my code that I have come up with but the output of the program should be as below but the lines are supposed to be spaces. I just added them for spacing:

Enter a single letter (Enter alphabet to display Pyramid): E

```
____A
___ABA
__ABCBA
_ABCDCBA
ABCDEDCBA 
```

My output is simply this:

```
Please enter a single letter:
f
                    ABCDEFEDCBA 
```

Here is the code:

```
import java.util.*; // For using Scanner class for input

public class LetterPyramid {
    public static void main(String[] args) {
        Scanner key = new Scanner(System.in);
        System.out.println("Please enter a single letter:");
        char input = key.next().charAt(0);
        input = Character.toUpperCase(input);
        if (!(Character.isLetter(input))) {
            System.out.println("Error: Invalid letter: " + input);
        } else {
            for (int i = input; i < 'Z'; i++) {
                System.out.print(" ");
            }
        }
        for (char y = 'A'; y < input; y++) {
            System.out.print(y);
            if (y == input) {
                System.out.println(y);
            }
        }
        for (char x = input; x >= 'A'; x--) {
            System.out.print(x);
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:43:29.727

因为你说你想学……这里只是一个例子

对于我们必须添加的每个字母：我们打印单词，然后在单词中间添加新字母。是的，我们必须复制中间的字母。在我的示例中，您通过保存半个字而不是保存整个字来避免这种情况。

```
string word = "A";

for (int i = 'B'; i < input; i++) {
  print word
  print i
  print inverse word
  print newline

  word = word + i
} 
```

可能这就是你想要的......

编辑：我想添加它是金字塔的空间：只需`(input - i)`在这些打印之前添加打印空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:13:10.940

我将您的程序剥离为正在工作的核心算法：打印树。

所以，这就是我想出的，以及一个[演示](http://ideone.com/0i1iS)，这样你就可以看到它的工作原理。

但首先，解释一下：

这使用一个`char`名为的变量`middle`来跟踪我们将要打印的当前中间字符。这很有用，因为我们可以创建`while`循环，它表明我们应该在当前`middle`字符小于或等于该`input`字符时继续打印树。

我还计算了我们在第一行左侧需要的空格数`spaces`。这有点小技巧，所以让我们看看这一行：

```
int spaces = input - (int) 'A'; // Might be a better way to do w/o cast 
```

我们将空格数归一化，使其范围从 0 到 X，而不是 65 到 (​​X + 65)。因此，对于 , 的输入`A`，`spaces`将是`0`，这是有道理的，因为如果输入只是 ，我们不想打印任何空格`A`。If `input`was `B`, `spaces`would be `1`，因为我们会在第一行打印一个空格。

然后只需设置循环即可：

1.  打印左侧空格，范围从 0 到`spaces`
2.  打印树的左侧，包括中间，范围从`A`到`middle`
3.  打印树的右侧，范围从`middle - 1`到`A`
4.  首先打印具有相同循环的右侧空格（这是不必要的，因为它在控制台中不可见）

最后，我们打印一个换行符，然后需要调整我们的标志。所以我们递减`spaces`，因为我们刚刚打印了一行输出，并且递增`middle`，因为我们希望下一行的`middle`字符是打印的字符之后的下一个字符。

这是注释代码，我从中学到了更好的东西，所以希望我已经解释得足够好。如果您有任何问题，请随时提问。

```
 char middle = 'A'; int spaces = input - (int) 'A';
    while( middle <= input) {

        // Print the left side spaces
        for( int i = 0; i < spaces; i++)
            System.out.print(" ");

        // Print the left side of the tree (including the middle)
        for( char y = 'A'; y <= middle; y++)
            System.out.print( y);

        // Print the right side of the tree
        for( char y = Character.toChars( middle - 1)[0]; y >= 'A'; y--)
            System.out.print( y);

        // Print the right side spaces
        for (int i = 0; i < spaces; i++)
            System.out.print(" ");

        // Print a new line
        System.out.println();

        // Subtract 1 from the number of spaces we need
        spaces--; 

        // Increment the middle character
        middle++;
    } 
```

输入`F`，这将生成：

```
 A     
    ABA    
   ABCBA   
  ABCDCBA  
 ABCDEDCBA 
ABCDEFEDCBA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:46:36.230

You're really close to what you want. You need to use a loop to adjust your starting point and output from A, then B, C, D, E, F etc.

```
 if ( ! ( Character.isAlphabetic( input ) ) ) {
      System.out.println( "Error: Invalid letter: " + input );
    } else {
      for ( char n = 'A'; n <= input; n++ ) {
        pyramid( n );
      }
    } 
```

I tried this and it worked for me. I didn't change any code in your loops, just extracted it to a method.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:57:45.180

好吧，你已经设法建立了金字塔的底部，所以这是一个好的开始。接下来你需要做的是把你的 3 个`for`循环放在一个更大的`for`循环中，从那里你`'A'`到你的输入字符，并在你的小循环中使用它作为结束条件：

```
 for(...) {
    for (int i = input; i < 'Z'; i++) {
      System.out.print(" ");
    }
    for (char y = 'A'; y < input; y++) {
      System.out.print(y);
      if (y == input) {
        System.out.println(y);
      }
    }
    for (char x = input; x >= 'A'; x--) {
      System.out.print(x);
    }
  } 
```

此外，`for`负责空间的循环可能需要一些额外的工作，目前它不能很好地工作。

# php - PHP, MySQL validation malfunction and search doesn't work?

> ID：11293712
> 
> 赞同：0
> 
> 时间：2012-07-02T12:28:52.990
> 
> 标签：php, mysql, html, phpmyadmin

I have created a small registration sticky form. Everything is working fine, but if I input any wrong value,like numbers in name, letters in age or even wrong email format, then still the data is saved in the database, I cannot figure out the validation problem. And another 1 is search option. Whenever I input any FirstName or lastname in the search box, it should display the name that is in the database or it will show an error message. Any 1 can suggest me what should I do.. Please see my coding below.

sticky_form codes...

```
<html>
<head>

<?php
global $fname,$lname,$gender,$age,$course,$email;

if(isset($_POST['register']))
{

    $fname=$_POST['fname'];
    $lname=$_POST['lname'];
    $gender=$_POST['gender'];
    $age=$_POST['age'];
    $course=$_POST['course'];
    $email=$_POST['email']; 

        if (preg_match("/[a-zA-Z ]+$/", $_POST['fname']))  {
            $fname = trim($_POST['fname']);
        }
         else 
        {
        echo '<p>The First name is empty or has illegal characters! To edit please go the link Display Data Information</p>';
        //$error = true;
        }

        if (preg_match("/[a-zA-Z ]+$/", $_POST['lname']))  {
            $lname = trim($_POST['lname']);
        }
         else 
        {
        echo '<p>The last name is empty or has illegal characters! To edit please go the link Display Data Information</p>';
        $error = true;
        }

        if(isset($_POST['gender']))
        {   
            $gender = $_POST['gender']; 
        }
        else
        {
            echo "<p>No gender found!</p>";
        }

        if (preg_match("/[a-zA-Z ]+$/", $_POST['age']))  {
            $age = trim($_POST['age']);
        }
         else 
        {
        echo '<p>Please enter age. Or your age contains illegal characters</p>';
        //$error = true;
        }

        if(isset($_POST['course']))
        {
             $course = $_POST['course'];
        }
        else
        {
            echo "<p>Please Select Course!</p>";

        }

        // Validate the email:
        if (preg_match("/^[\w.-]+@[\w.-]+\.[A-Za-z]{2,6}$/", $_POST['email'] )){
        $email = trim($_POST['email']);
        }
        else 
        {
        echo '<p>The email is empty or has illegal characters! To edit please go the link Display Data Information</p>';
        //$error = false;
        }
        echo "<br/>";
        echo "<br/>";
        echo "<br/>";

}

    if($fname&&$lname&&$gender&&$age&&$email&&$course)
    {
    require_once('connection.php');
    $query = mysql_query("INSERT INTO members SET FirstName='$fname', LastName='$lname', Gender='$gender', Age='$age',          Email='$email', Course='$course'") or die(mysql_error());

        if($query){
            echo"Your Data Successfully Saved"; 
        }
        else
        {
            echo "Please recheck your Data!";
        }

}

?>
</head>

<body id="body">
<h2><strong>Register Student Account</strong></h2>
<form action="student_form.php" method="post" >
<table border="1" id="container">

  <tr>
    <td>First Name</td>
    <td>:</td>
    <td><input type="text" name="fname"  size="30" maxlength="50"/></td>
  </tr>

 <tr>
    <td>Last Name</td>
    <td>:</td>
    <td><input type="text" name="lname" size="30" maxlength="50"/></td>
  </tr>

  <tr>
    <td>Age</td>
    <td>:</td>
    <td><input type="text" name="age"  size="3" /></td>
  </tr>

    <tr>
    <td >Gender </td>
    <td> : </td>
    <td> Male
    <input type="radio" name="gender" value="Male"/>

    Female
    <input type="radio" name="gender" value="Female"/></td>

  </tr>

  <tr>
    <td valign="top">Course</td>
    <td valign="top"> : </td>
    <td> <input type="radio" name="course" value="Bachelor Of Computing"/>Bachelor Of Computing<br/>
   <input type="radio" name="course" value="Bachelor Of Science"/>Bachelor Of Science<br/> 
   <input type="radio" name="course" value="Bachelor Of Software Engineering"/>Bachelor Of Software Engineering<br/>
    <input type="radio" name="course" value="Bachelor Of Networking"/>Bachelor Of Networking<br/>
    <input type="radio" name="course" value="Bacelor Of IT"/>Bacelor Of IT <br/>
    <input type="radio" name="course" value="Bachelor Of Computer Science"/>Bachelor Of Computer Science<br/></td>

  </tr>

 <tr>
    <td>Email Address</td>
    <td>:</td>
    <td><input type="text" name="email"  size="30" maxlength="50"/></td>
</tr>

</table>
    <input type="submit" name="register" value="REGISTER"/>

</form><br>
<p><a href="student_form.php" >Home</a></p>
<p><a href="display_data.php">Display Data Information</a>
<p><a href="search.php">To search for Members</a>
</body>
</html> 
```

and this is the search_form codes......

```
<html>
<head>
<?php
//require_once('student_form.php');
if(isset($_POST['s1'])){ 
$id=$_REQUEST['id']; 
$fname=$_POST['fname'];
    //connect  to the database 
include('connection.php');
//-query  the database table 
$sql=mysql_query("SELECT  * FROM members WHERE (FirstName LIKE '". $fname ."%' OR LastName LIKE '". $lname ."%'");
    //-run  the query against the mysql query function 
    $result=mysql_query($sql); 

    if($row=mysql_fetch_array($result)){ 
                $fname=$row['FirstName']; 
                $lname=$row['LastName']; 
                /*$email=$row['Email'];
                $age =$row['Age'];
                $gender=$row['Gender'];
                $course = $row['Course'];*/
    }
    //-display  the result of the array 
    else
    {
    <?php echo $rows['FirstName']; ?>
    <?php echo $rows['LastName']; ?>
    } 
} 
?>
</head>
<body>
<form action="search.php" method="post">
<table>
    <tr>
    <td><strong>search box</strong></td>
    <td><strong>:</strong></td>
    <td><input type="text" name="search" value=""size="30"/><input type="submit" name="s1" value="Search"/></td>

</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:38:10.807

你的变量就像`$fname $lname $gender $age $email $course`在 if 条件之后放在 if 条件 for 中`isset($_POST['register'])`。现在，即使您的验证有效，数据仍将输入数据库。因为你有条件

`if($fname&&$lname&&$gender&&$age&&$email&&$course)`

现在，当您在所有这些变量中只有一个值时，控制将进入该块。必须发生的是，您输入了错误的值，这些值正在得到验证，将显示消息，但是当第一个 if 块完成时，因为 $_POST 变量仍然有一些值，无论它们是否无效，第二个 if 块将被输入并且查询将被触发。

您可以做的是，无论您在哪里回显错误消息，都将相应的变量清空。像这样的东西：

```
if (preg_match("/[a-zA-Z ]+$/", $_POST['fname']))  {
    $fname = trim($_POST['fname']);
}
else 
{
    echo '<p>The First name is empty or has illegal characters! To edit please go the link Display Data Information</p>';
    $fname = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:37:29.227

至于你的第一个问题，不要检查`$var`，检查`!empty($var)`。

第二个问题：我不确定我是否理解您要做什么。但是你不是说`$row`当`$rows`你展示一些东西的时候吗？另外，如果您有多个搜索结果怎么办？你想要的是：

```
while($row=mysql_fetch_assoc($result)){
   echo $row['Firstname'], ' ', $row['LastName'];
} 
```

而不是你的 if-else 结构。

# iphone - TDD workflow in Xcode - how to "quick fix" when doing red-green-refactor?

> ID：11293715
> 
> 赞同：5
> 
> 时间：2012-07-02T12:29:08.730
> 
> 标签：iphone, objective-c, xcode, tdd, redgreen

One of the things which makes TDD nice is the ability to generate code after you have written a test. This is done with the *Quick Fix* option in Eclipse (Cmd-F1) - or with similar option using Alt-Enter in Jetbrains tools. Most of the usage just involves four options:

*   Create new class
*   Create new method
*   Create new property
*   Create new instance variable

Is there any way to add this ability to Xcode using a plugin, Automator or anything else? I feel that with just four of these in place I could return to using Xcode instead of being stuck in Appcode.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:38:08.467

不幸的是，我认为这是不可能的。Xcode 的重构工具不如其他一些 IDE 强大（尽管它最近得到了改进）。自从更新到 4.0 后，使用插件或脚本扩展 Xcode 变得更加困难（在此之前至少可以编写脚本）。现在甚至连 Apple Script 支持都没有达到应有的完整程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:39:02.213

我遇到了同样的需求，但不幸的是，**当前**的Xcode 版本对代码重构没有太多支持。我偶然发现的一个工具是[Accessorizer](http://www.kevincallahan.org/software/accessorizer.html)

我没有尝试过，但功能和建议看起来很有希望。

希望有帮助:)

# android - 带有 MathJax 的 ListView 内的 WebView

> ID：11293716
> 
> 赞同：1
> 
> 时间：2012-07-02T12:29:11.047
> 
> 标签：android, android-listview, android-webview, mathjax

我有一个必须渲染**MathJax 方程**的应用程序，因此我必须使用**WebView**布局，因为MathJax 端有很多**JavaScript 代码，并且许多****图像**是从 MathJax **CDN 服务**动态显示的（全部由 MathJax JS 库处理）。

它在单个 WebView 布局上运行良好，并且一切都呈现得很好 - 但是当我需要显示来自我的 Web API 的**搜索结果**并且每个搜索结果都包含一些 MathJax 代码时出现问题 - 你可以将其想象为 Google 搜索结果，但使用 MathJax里面的代码/方程式。

我想到的第一件事是每行内都有一个 WebView 的 ListView - 但它**非常不够**，我将可滚动的 webView 放在可滚动的 listView 中，这不是一个好主意。每次滚动一点时，webView都会呈现，也许我可以使用一些缓存来缓存呈现的WebView，但我不确定......

有没有建议的替代方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:41:38.900

您可以将 webview 渲染为位图，并将这些位图缓存起来。您可以在可见时执行此操作，例如此处： [将 Android webview 渲染为位图、html5 javascript、回调问题](https://stackoverflow.com/questions/10009265/rendering-android-webview-to-bitmap-html5-javascript-callback-issue) 或在后台执行，例如此处：[将屏幕外 WebView 绘制为位图](https://stackoverflow.com/questions/6467214/drawing-offscreen-webview-to-bitmap)

# html - 元名称和关键字仅在一个文件中

> ID：11293724
> 
> 赞同：0
> 
> 时间：2012-07-02T12:29:33.160
> 
> 标签：html, metadata

我有一个关于元名称和关键字的问题：如果我有更多的 oages，每个页面都包含一个名为“_head.php”的文件，我可以只将元名称和关键字放在这个文件中还是更好地放在每个页面的元名称和关键字中？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:50:47.470

如果您不担心使用不同的元内容分别更新页面，那么将元标记包含在包含文件中将是有益的。如果页面很多，它会为您节省大量更新或调整的时间。

希望这可以帮助！

# android - Android - How can clickable button when parsing process

> ID：11293725
> 
> 赞同：0
> 
> 时间：2012-07-02T12:29:34.877
> 
> 标签：android, multithreading

i have i button and one flipperview in my layout. When start the activity, activity is parsing a xml. But sometimes this process is take so long time. And i cant click the button while parsing continue.

```
new Thread() {
        @Override
        public void run() {

            getJSONFromUrl("getVitrinSliderJSON.php?");

            mHandler.sendEmptyMessage(0);
        }
    }.start();

    /*****
     * Start Set Main Page Buttons
     */
    Button btnkesfet = (Button) findViewById(R.id.ana_btn_kesfet);
    btnkesfet.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            Intent i = new Intent(MyAntalyaActivity.this,
                    KesfetAnasayfa.class);
            startActivity(i);
        }
    });

Handler mHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        jParse(jObj);

        SetFlipper();

    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:33:59.890

您将需要一个布尔变量以防止用户在 xml 解析期间单击按钮，并在解析后使用 [button.setEnabled](http://developer.android.com/reference/android/widget/Button.html)禁用或启用按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:12:44.537

我假设你想把`jParse(jObj);`你必须避免锁定 UI 线程的线程放在里面。

# drupal - CCK fields values are not coming to the body

> ID：11293727
> 
> 赞同：0
> 
> 时间：2012-07-02T12:29:43.967
> 
> 标签：drupal, drupal-6, cck

Drupal 6:

I have a content type and it has multiple CCK fields: one user reference field, one node reference field, one taxonomy field, 4 text fields & 2 date fields.

It was working just fine until yesterday, but when I create content now, not even one entry is coming to the page except default boy area input & title.

It's really weird for me as this has never happened.

Does any body have any idea why this is happening?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:58:31.477

可能性：

1.  查看字段的权限。
2.  转到内容类型的管理选项卡，看看您是否可以看到这些字段。
3.  `print_r($node->field_machine_readable_name);`在身体或预告片中使用。
4.  使用[开发](http://drupal.org/project/devel)模块。

# java - oracle 11g与hibernate spring与jsf的集成

> ID：11293730
> 
> 赞同：0
> 
> 时间：2012-07-02T12:29:45.633
> 
> 标签：java, oracle, hibernate, jakarta-ee, oracle11g

我正在使用 jsf 2、hibernate 4.1.4、spring 3.1、oracle 11g 和 maven 3。但它无法连接到 oracle 并且出现错误。我下载了最新版本的ojdbc6。应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

 <!-- Beans Declaration -->
 <bean id="customer" class="model.Customer"/>

<!-- CustomerBo Declaration -->
 <bean id="CustomerBoImpl" class="bo.CustomerBoImpl">
      <property name="customerDaoImpl" ref="CustomerDaoImpl" />
     </bean>

 <!-- Customer DAO Declaration -->
 <bean id="CustomerDaoImpl" class="dao.CustomerDaoImpl">
  <property name="sessionFactory" ref="SessionFactory" />
 </bean>

 <!-- Data Source Declaration -->
 <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="oracle.jdbc.driver.OracleDriver" />
  <property name="jdbcUrl" value="jdbc:oracle:thin:@Mohsen-PC:1521:mydb" />
  <property name="user" value="system" />
  <property name="password" value="123" />
  <property name="maxPoolSize" value="10" />
  <property name="maxStatements" value="0" />
  <property name="minPoolSize" value="5" />
 </bean>

 <!-- Session Factory Declaration -->
 <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
  <property name="dataSource" ref="DataSource" />
  <property name="annotatedClasses">
   <list>
    <value>model.Customer</value>
   </list>
  </property>
  <property name="hibernateProperties">
   <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
    <prop key="hibernate.show_sql">true</prop>
   </props>
  </property>
 </bean>

 <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

 <!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

</beans> 
```

面孔配置

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
<application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

</faces-config> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>jsfspringhiber</display-name>
  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
          /WEB-INF/applicationContext.xml
          </param-value>
  </context-param>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>default.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
</web-app> 
```

CustomerDaoImpl.java

```
 public class CustomerDaoImpl implements ICustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().save(customer);

    }

    public void updateCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().update(customer);
    }

    public void deleteCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().delete(customer);
    }

    public List<Customer> findAllCustomer(){
        sessionFactory.openSession();

        List list = getSessionFactory().getCurrentSession

().createQuery("from CUSTOMER").list();
        return list;

    }
} 
```

CustomerBoImpl.java

```
public class CustomerBoImpl implements ICustomerBo{

    ICustomerDao customerDaoImpl;

    public ICustomerDao getCustomerDaoImpl() {
        return customerDaoImpl;
    }

    public void setCustomerDaoImpl(ICustomerDao customerDaoImpl) {
        this.customerDaoImpl = customerDaoImpl;
    }

    public void addCustomer(Customer customer){

        getCustomerDaoImpl().addCustomer(customer);

    }

    public void updateCustomer(Customer customer){
        getCustomerDaoImpl().updateCustomer(customer);
    }

    public void deleteCustomer(Customer customer){
        getCustomerDaoImpl().deleteCustomer(customer);
    }
    public List<Customer> findAllCustomer(){

        return getCustomerDaoImpl().findAllCustomer();
    }
} 
```

Customermanagedbean.java

```
@ManagedBean(name="CustomerMB")
@RequestScoped
public class Customermanagedbean implements Serializable{
@ManagedProperty(value="#{CustomerBoImpl}")
ICustomerBo customerBoImpl;
List<Customer> CustomerList;
public int customerId;
public String name;
public String address;
public String createdDate;

public ICustomerBo getCustomerBoImpl() {
    return customerBoImpl;
}
public void setCustomerBoImpl(ICustomerBo customerBoImpl) {
    this.customerBoImpl = customerBoImpl;
}

public List<Customer> getCustomerList() {
    return CustomerList;
}
public void setCustomerList(List<Customer> customerList) {
    CustomerList = customerList;
}
public int getCustomerId() {
    return customerId;
}
public void setCustomerId(int customerId) {
    this.customerId = customerId;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCreatedDate() {
    return createdDate;
}
public void setCreatedDate(String createdDate) {
    this.createdDate = createdDate;
}
//add a new customer data into database
public String addCustomer(){

    Customer cust = new Customer();
    cust.setCustomerId(getCustomerId());
    cust.setName(getName());
    cust.setAddress(getAddress());
cust.setCreatedDate(getCreatedDate());
    customerBoImpl.addCustomer(cust);

    clearForm();

    return "";
}

//clear form values
private void clearForm(){
    setName("");
    setAddress("");
}

} 
```

客户.java

```
@Entity
@Table(name="CUSTOMER")

public class Customer{

    public int customerId;
    public String name;
    public String address;
    public String createdDate;

    @Id
    @Column(name="CUSTOMER_ID", unique = true, nullable = false)
    public int getCustomerId() {
        return customerId;
    }
    public void setCustomerId(int customerId) {
        this.customerId = customerId;
    }
    @Column(name="NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Column(name="ADDRESS")
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    @Column(name="CREATED_DATE")
    public String getCreatedDate() {
        return createdDate;
    }
    public void setCreatedDate(String createdDate) {
        this.createdDate = createdDate;
    }
} 
```

默认.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <h:outputStylesheet library="css" name="table-style.css"  />
    </h:head>

    <h:body>

        <h1>JSF 2.0 + Spring + Hibernate Example</h1>

        <h:dataTable value="#{CustomerMB.getCustomerList()}" var="c"
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

            <h:column>
                <f:facet name="header">
                    Customer ID
                </f:facet>
                    #{c.customerId}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                    #{c.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Address
                </f:facet>
                    #{c.address}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Created Date
                </f:facet>
                    #{c.createdDate}
            </h:column>

        </h:dataTable>

        <h2>Add New Customer</h2>
        <h:form>

            <h:panelGrid columns="3">
                Customer ID : 
                <h:inputText id="customerId" value="#{CustomerMB.customerId}" 
                    size="20" required="true"
                    label="customerId" >
                </h:inputText>

                <h:message for="customerId" style="color:red" />
                Name : 
                <h:inputText id="name" value="#{CustomerMB.name}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                <h:message for="name" style="color:red" />

                Address : 
                <h:inputTextarea id="address" value="#{CustomerMB.address}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

                <h:message for="address" style="color:red" />

created Date : 
                <h:inputTextarea id="createdDate" value="#{CustomerMB.createdDate}" 
                    size="20" required="true"
                    label="createdDate" >
                </h:inputTextarea>

            </h:panelGrid>

            <h:commandButton value="Submit" action="#{CustomerMB.addCustomer()}" />

        </h:form>

    </h:body>

</html> 
```

当我运行 default.xhtml 时：我看不到表中的记录。 ![在此处输入图像描述](../Images/08b5fe7a005ba0e0915e1e5ec2cdb7bc.png)

当我单击提交按钮时，出现以下错误：

```
SEVERE: org.hibernate.HibernateException: No Session found for current thread
javax.faces.el.EvaluationException: org.hibernate.HibernateException: No Session found for current thread
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041)
    at dao.CustomerDaoImpl.addCustomer(CustomerDaoImpl.java:18)
    at bo.CustomerBoImpl.addCustomer(CustomerBoImpl.java:23)
    at managedbean.Customermanagedbean.addCustomer(Customermanagedbean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 24 more

Jul 02, 2012 4:40:48 PM com.sun.faces.lifecycle.InvokeApplicationPhase execute
WARNING: #{CustomerMB.addCustomer()}: org.hibernate.HibernateException: No Session found for current thread
javax.faces.FacesException: #{CustomerMB.addCustomer()}: org.hibernate.HibernateException: No Session found for current thread
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:114)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.faces.el.EvaluationException: org.hibernate.HibernateException: No Session found for current thread
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    ... 23 more
Caused by: org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041)
    at dao.CustomerDaoImpl.addCustomer(CustomerDaoImpl.java:18)
    at bo.CustomerBoImpl.addCustomer(CustomerBoImpl.java:23)
    at managedbean.Customermanagedbean.addCustomer(Customermanagedbean.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 24 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:19:51.273

我在我的 CustomerBoImpl.java 中导入 org.springframework.transaction.annotation.Transactional

```
import java.util.List;
import bo.ICustomerBo;
import dao.ICustomerDao;
import model.Customer;
import org.springframework.transaction.annotation.Transactional;

@Transactional(readOnly = true)
public class CustomerBoImpl implements ICustomerBo{

    ICustomerDao customerDaoImpl;

    public ICustomerDao getCustomerDaoImpl() {
        return customerDaoImpl;
    }

    public void setCustomerDaoImpl(ICustomerDao customerDaoImpl) {
        this.customerDaoImpl = customerDaoImpl;
    }

@Transactional(readOnly = false)
@Override
    public void addCustomer(Customer customer){

        getCustomerDaoImpl().addCustomer(customer);

    }

@Transactional(readOnly = false)
@Override
    public void updateCustomer(Customer customer){
        getCustomerDaoImpl().updateCustomer(customer);
    }

@Transactional(readOnly = false)
@Override
    public void deleteCustomer(Customer customer){
        getCustomerDaoImpl().deleteCustomer(customer);
    }

@Override
    public List<Customer> findAllCustomer(){

        return getCustomerDaoImpl().findAllCustomer();
    }
} 
```

# c# - 在 LINQ 中使用“OfType”

> ID：11293732
> 
> 赞同：1
> 
> 时间：2012-07-02T12:29:49.737
> 
> 标签：c#, .net, linq, linq-to-sql, generics

我有两个派生自 BankAccount 类的类——FixedBankAccount 和 SavingsBankAccount。这是基于使用 LINQ to SQL 的“TPH（按层次结构表）”工作的。

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public abstract partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

我需要实现一个 GetAllAccountsOfType 方法，它将返回所有 SavingsBankAccount（如果传递的类型是 SavingsBankAccount）或 FixedBankAccounts（如果传递的类型是 FixedBankAccount）。我收到错误：

> 找不到类型或命名空间名称“param””

使用以下代码（在 LINQ 查询中使用“OfType”）

我们怎样才能让它发挥作用？

存储库：

```
namespace RepositoryLayer
{    
    public class LijosSimpleBankRepository : ILijosBankRepository
    {
        public System.Data.Linq.DataContext Context { get; set; }

        public virtual List<DBML_Project.BankAccount> GetAllAccountsOfType(DBML_Project.BankAccount param)
        {
            var query = from p in Context.GetTable<DBML_Project.BankAccount>().OfType<param>()
                        select p;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:33:39.250

宣言：

```
public IEnumerable<T> GetAllAccounts<T>()
    where T : BankAccount // T must inherit class BankAccount, like your two sub-classes do
{
    return Context.GetTable<DBML_Project.BankAccount>().OfType<T>();
} 
```

用法：

```
var allSaving = GetAllAccounts<SavingsBankAccount>();
var allFixed = GetAllAccounts<FixedBankAccount>(); 
```

# iphone - SDWebImage Issue while Archieve

> ID：11293740
> 
> 赞同：0
> 
> 时间：2012-07-02T12:30:05.927
> 
> 标签：iphone, sdwebimage

When i am trying to “Build Profile” everything is working fine. When i Archieve for submission, the SDWebImage is throwing error while importing UIImageView+WebCache.I m importing files as:
`#import <SDWebImage/UIImageView+WebCache.h>` I have been working on this since morning but couldn’t figure out why this is not working. Also, I have checked other SO questions in this regards but nothing helped. Also, In SDWebImage project, `libSDWebImage.a` is coming red. I am not able to reveal that in folder. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:39:34.813

我通过添加（带引号）很容易地解决了这个问题：

```
"$(SRCROOT)/SDWebImage" 
```

到我项目的构建设置下的各种标题搜索路径。感谢 Lizard 在[SDWebImage/UIImageView+WebCache.h 文件中找不到](https://stackoverflow.com/questions/11033793/sdwebimage-uiimageviewwebcache-h-file-not-found)他的解决方案。

# dynamics-crm - Office 365 和 Dynamics 2011 + 2007 端点（discoveryservice.asmx / crmservice.asmx / ...）。没门？

> ID：11293746
> 
> 赞同：0
> 
> 时间：2012-07-02T12:30:36.443
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-4, microsoft-dynamics, dynamics-crm-online

我使用 SDK 4.0 for Microsoft Dynamics 开发了一个应用程序。应用程序又大又复杂，使用 SDK 2011 重新开发整个应用程序需要花费大量时间。但自上个月以来，新用户只能在线注册 Dynamics crm ，**仅**与 Office 365 集成（可在 crm online 的德语版注册站点上获得）。不幸的是，微软说：

> “Microsoft Office 365 组织不支持 2007 服务端点。2007 发现服务 (CrmDiscoveryService.asmx) 不会返回 Office 365 组织，并且您不能将 CrmService.asmx 和 MetadataService.asmx 服务用于 Office 365 组织。” ( [MSDN](http://msdn.microsoft.com/en-us/library/gg334316.aspx) )

如何避免重新开发我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:15:32.157

对于您关于支持 Office 365 的解决方法的问题，我没有答案，但根据我的经验，升级到 2011 版本可以正常工作，并且不需要从头开始重新开发。您的应用程序应该在 CRM 2011 中以与 CRM 4.0 中相同的方式运行，但可能需要进行少量更新，例如创建与 CRM 的连接的更新逻辑。更新一些生成的属性的大小写，因为 crmsvcutil 在 CRM 4.0 版本中更改了大小写。

# java - JDO PersistentManager 的 makePersistent 是否不足以创建子元素？

> ID：11293749
> 
> 赞同：0
> 
> 时间：2012-07-02T12:30:53.527
> 
> 标签：java, jdo

我有一些这样的代码

```
class root extends DomainObject{
Collection childElements;
Collection childElements2;
.....
//define other child element collections

Collection getChildElements(){
 return childElements;
}
// define other childElements getter/setter 
```

我的 package.jdo 定义了如下所示的映射

```
 <class name="root" identity-type="datastore" detachable="true" persistence-capable-superclass="com.xxx.DomainObject">
        <inheritance strategy="new-table"/>
        <field name="childElements" persistence-modifier="persistent" default-fetch-group="true">
            <collection element-type="com.my.CustomClass" />
            <join/>
            <order column="idx"/>
            <extension vendor-name="jpox" key="cache-lazy-loading" value="false"/>
        </field> 
```

自定义类结构可能看起来像这样

```
class CustomClass extends DomainObject{
String name;
Collection otherElements;
.....

String getName(){
return name;
}    
Collection getOtherElements(){
 return otherElements;
} 
```

现在为了创建 com.my.CustomClass 的对象，代码如下所示

```
persistenceManager().currentTransaction().begin();
CustomClass customObj = new CustomClass();
customobj.setName("someName");
//set other values    
persistenceManager.makePeristent(customObj);//persist
SomeUtil.getRoot().getChildElements().add(customObj);//add to its owner
persistenceManager.currentTransaction().commit(); 
```

SomeUtil 中 getRoot() 的代码看起来像这样

```
 Query q = persistenceManager.newQuery( root.class );
 Collection c = (Collection)q.execute();
  persistenceManager.retrieveAll( c );
   return (root)c.iterator().next(); 
```

我不明白的是为什么我们需要将这个新的自定义对象添加到所有者？`SomeUtil.getRoot().getChildElements().add(customObj);` 删除代码看起来也很相似，即首先从其所有者的集合中删除对象，然后`deletePersistent`调用persistenceManger。

MyQuestion 是我们真的需要将此对象显式添加到父对象吗？单独一个还不够吗`makePeristent()`？我问的原因是我看到这个'getRoot（）'对性能有一些影响（即使底层对象被延迟加载，当这些集合的数量很高时也会对性能产生一些影响）。

在运行时，我们使用此“根”对象的缓存/可分离副本（例如深度克隆），并且仅从该“根”检索任何必需的元素。如果对数据库进行了任何修改，则我们使该缓存无效并重新加载root 并再次缓存它。

删除子元素被显式添加到父元素或从父元素中删除的代码是否安全？还是根据我们定义的映射真的需要它（并且考虑到我们依赖缓存（克隆）根来在运行时检索所有子元素）？请注意，我们在运行时（一个深层用户克隆）和创建对象期间没有使用相同的“root”。只是我们在运行时依赖“root”来获取其他元素。请让我知道是否有任何机构处理过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:57:04.173

我已经对此进行了测试并观察到，如果您在不知道父元素的情况下添加子元素，则无法**使用 parent**检索该子元素。

```
persistenceManager().currentTransaction().begin();
CustomClass customObj = new CustomClass();
customobj.setName("someName");
//set other values    
persistenceManager.makePeristent(customObj);//persist
//comment this
//SomeUtil.getRoot().getChildElements().add(customObj);//add to its owner
persistenceManager.currentTransaction().commit(); 
```

后来当我加载那个父元素时，我发现子元素没有被检索到。

```
 Collection c = SomeUtil.getRoot().getChildElements()
 // Iterate over this collection and found that element is not present 
```

正如我之前所说，我们在运行时依赖这个根对象来检索任何子元素。即使直接查询孩子是可行的，但这对我们来说不是一个选择。

看起来我们只能通过将该孩子添加到父母来实现这一点。但是我们想避免这种情况，因为检索 parent(root) 对性能有一些影响（即使它们是延迟加载的），因为这个 root 有许多其他子集合元素。在运行时，我们通常会加载这个根并缓存干净的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:27:04.250

JDO 的可达性持久性在 JDO 规范中得到了很好的定义。DataNucleus 日志会告诉您持久化的内容和时间。我强烈建议阅读这两个资源

# windows-phone-7 - 在 CheckBox 中隐藏复选标记

> ID：11293750
> 
> 赞同：0
> 
> 时间：2012-07-02T12:30:54.463
> 
> 标签：windows-phone-7, windows-phone-7.1.1

在我的 Windows Phone 应用程序中，我使用了一些复选框。当我选中一个复选框时，我需要隐藏该复选框的复选标记。为了识别选中的项目，我正在更改复选框的背景图像。不应更改复选框的“IsChecked”属性。我可以隐藏复选框中的复选标记吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:40:42.980

是的。点`Edit Template - Edit a copy`进去`Expression Blend`改成`Checked` `Visual State`你想要的

# filemaker - 向数字添加逗号分隔符

> ID：11293753
> 
> 赞同：1
> 
> 时间：2012-07-02T12:31:02.980
> 
> 标签：filemaker

我正在使用 Filemaker Pro 12。我想显示字段的数字内容 ( `price`)，而不是简单的数字，以逗号分隔。理想情况下，我想在保持字段内容为数字的同时执行此操作，但用逗号显示。

例如，数字`100000000`应（在此布局中）显示为`100,000,000`.

我怎样才能做到这一点？

*互联网上较旧的解决方案似乎需要 Filemaker Advanced 和自定义脚本......**当然**没有这些是可能的吗？！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:24:54.580

在布局模式下选择字段。在 Inspector 面板中，转到 Data 选项卡，在底部将格式更改为“Decimal”。选中“使用千位分隔符”框。

# c# - 如何使用 System.Linq.Dynamic 运行 SQL 等效 IN 语句？

> ID：11293756
> 
> 赞同：3
> 
> 时间：2012-07-02T12:31:08.037
> 
> 标签：c#, .net, linq

我正在尝试使用 Contains 方法通过动态 LINQ 运行 IN 语句。使用以下代码时，它运行得很好：

```
var statuses = new List<string> { "Active" };
result = result.Where("@0.Contains(Status)", statuses.ToArray()); 
```

但是当我把它切换到一个整数数组时，我得到一个错误：

```
var years = new List<int> { 2012 };
result = result.Where("@0.Contains(Year)", years.ToArray()); 
```

这是我使用后者收到的错误：

> “Int32”类型中不存在适用的方法“包含”

有没有办法做到这一点而不必使用多个 OR 语句来绕过使用 IN 语句？

这些正在查找的数据库中的字段是可为空的字段。这是造成问题的原因吗？我把它从int切换到int？它仍然显示相同的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:00:13.240

好吧，经过一些研究，Contains 似乎不能“开箱即用”。当您说您的第一个查询有效时，我真的很惊讶。我试过了，和“Int32”有同样的错误。

您可能会在这里找到解决方法：

[http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html](http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html)

您需要自己修改 System.Linq.Dynamic 库，或者在这里下载示例项目： [http ://walteralmeida.typepad.com/files/dynamiclinqextension.zip](http://walteralmeida.typepad.com/files/dynamiclinqextension.zip)

但是这篇文章现在可能已经过时了（不知道 System.Linq.Dynamic 自 20109 年以来的演变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:43:58.540

由于您使用 .Contains 的方式，代码失败了。试试这个：

```
var years = new List<int> { 1, 2, 3, 4 };
var result = result.Where(element => years.Contains(element)); 
```

很抱歉没有认识到您需要在 Dynamic Linq 中工作。据我了解，Dynamic Linq 默认不支持包含，但可以扩展库以支持它。请查看 Walter Almedia 的此链接，该链接解释了如何扩展库：Extended [DynamicLINQ to Support Contains](http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:03:22.200

```
var statuses = new string[] { "Active" };
result = result.Where(r => statuses.Contains(r.Status)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:35:43.567

你必须使用如下，

```
var resultset = from x in years
                where x == yearTobeSelected
                select x; 
```

或者您可以`IEnumerable.Contains()`通过代码中的列表来使用。

# html - 使用 HTML 标签将单独的图像组合成单个图像

> ID：11293760
> 
> 赞同：2
> 
> 时间：2012-07-02T12:31:27.387
> 
> 标签：html

我有 3 个图像部分，我必须将其显示为单个图像，并且还希望使用 HTML 标签包含指向这 3 个图像部分的链接。

我创建了具有 1 列和 2 行的表，并将图像插入到表的 3 部分中。但它在上下图像（第 1 行和第 2 行）之间有一些空间。如何解决此问题并创建没有任何空格的单个图形，并且还需要在第三张图像中包含链接。

急需帮助

```
<table style="width: 660px; border-collapse: collapse; height: 237px;" border="0" cellspacing="0" cellpadding="0" sizset="0" sizcache="15">
<tbody sizset="0" sizcache="15">
<tr>
<td><img style="margin: 0px; border: 0px currentColor;" src="uploaded/Online_Newsletters/Nav/masthead-ball_top.jpg" width="665" height="197"></td>
</tr>
<tr>
<td><img style="margin: 0px; border: 0px currentColor;" src="uploaded/Online_Newsletters/Nav/ball_bottom_left.jpg" width="579" height="37"><img style="margin: 0px; border: 0px currentColor;" src="uploaded/Online_Newsletters/Nav/ball_bottom_right.jpg" width="86" height="37"></td>
</tr>
</tbody>
</table> 
```

我使用了上面的代码，但图像之间仍然有空间。在我的公司网站是使用 finalsite 管理的，所以我使用的是 finalsite 编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:37:14.330

在表格标签中使用 cellpadding 和 cellspacing：

```
<table cellpadding="0" cellspacing="0" border="0" style="border-collapse:collapse;"> 
```

并使用第三张图片作为链接，只需使用

```
<a href="http://www.example.com"><img src="yourimage.jpg" border="0" style="float:left;" /></a> 
```

编辑：

添加`style="float:left;"`到您的 img 标签。

[http://jsfiddle.net/H628X/1/](http://jsfiddle.net/H628X/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T16:07:13.703

连同@Wolv3r 答案，如果您没有

```
img {
   display:block;
} 
```

内联或使用样式标签，这会导致 gmail / yahoo 出现问题。

用于电子邮件方法的良好 html 的来源：

[http://24ways.org/2009/rock-solid-html-emails/](http://24ways.org/2009/rock-solid-html-emails/)

# three.js - 为什么 JSONLoader 不会立即将孩子添加到场景中？

> ID：11293767
> 
> 赞同：0
> 
> 时间：2012-07-02T12:31:49.587
> 
> 标签：three.js

网页链接： http: [//door-in-wall.asg-3d.ru](http://door-in-wall.asg-3d.ru)

来源：[http ://door-in-wall.asg-3d.ru/source.zip](http://door-in-wall.asg-3d.ru/source.zip)

调用*init()*后初始化场景：添加相机、灯光、生成几何体（文本和球体），并使用*JSonLoader*加载3D 模型。相机、灯光和生成的几何图形已立即添加到场景中，但是当*JSonLoader*加载模型时 - 我无法理解......

```
 // Create 3D Text Mesh
  var textMesh3 = new THREE.Mesh( text3d3, textMaterial );
  textMesh3.position.x = textMesh1.position.x;
  textMesh3.position.y = textMesh2.position.y - text3d1.boundingBox.max.y * 2.6;

  scene.add( textMesh3 );

  console.log('textMesh3 within init() = ', textMesh3); //textMesh3 = THREE.Mesh
  console.log('scene.children.length after load textMesh3 = ', scene.children.length); //scene.children.length = 6

  // Add back plane
  var loader = new THREE.JSONLoader().load( "js/backplane.js", function ( geometry ) {

    geometry.computeBoundingBox();

    backPlaneMesh = new THREE.Mesh( geometry, backPlaneMeshMaterial );
    backPlaneMesh.position.set(SCREEN_WIDTH, 0, 0);
    backPlaneMesh.scale.set(4, 4, 4);

    scene.add(backPlaneMesh);

  });

  console.log('JSONLoader within init() = ', loader); //loader = undefined 
  console.log('scene.children.length after load JSONLoader = ', scene.children.length); //scene.children.length = 6 
```

我将控制台输出留给了场景*console.log (scene.children.length)*的后代：第 103、148、167 行。

如果在调用*animate()*和*render()***之后检查***scene.children.length* ，那么它将显示 7 个孩子的存在。

 ****如何以及何时使用 JSONLoader 加载模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:05:26.300

`loader.load()`是异步的。换句话说，它不会停止代码执行，直到完成。它将并行加载，并在完成后执行回调。根据模型的大小，下载和解析可能需要几秒钟。即使您在本地加载它也需要几毫秒。****

# windows - 在 Windows 上使用自定义交叉编译器为 arm 编译 v8

> ID：11293770
> 
> 赞同：0
> 
> 时间：2012-07-02T12:32:14.900
> 
> 标签：windows, embedded, arm, cross-compiling, v8

我想编译一个静态 v8 版本以在嵌入式设备上使用。

制造该设备的公司给了我们一个基于 cygwin 的交叉编译器（该设备使用基于 Linux 的操作系统），这样我们就可以在 windows 平台上编写和编译代码，然后再将其传输到设备上。

我见过的所有在 arm 系统（如暂存盒）上编译 V8 的教程，除非它们针对的是 arm 模拟器。仅使用我们自己用于编译的自定义 cygwin 编译器，就好像我正在为 Windows 编译它一样编译 V8 在技术上是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:08:20.583

显然，提供的 cygwin 编译器确实是为我们的设备定制的。他们甚至删除了 math.h 库，并添加了自定义 malloc/free 以及 io 函数。经过大量的努力，我设法让 Lua 的修改版本在我们的平台上运行，我想这已经是最好的了。路亚赢了！

# jquery - jQuery Validator Plugin and Dialog - 值仅在对话框未关闭时反映

> ID：11293772
> 
> 赞同：-1
> 
> 时间：2012-07-02T12:32:16.890
> 
> 标签：jquery, dialog, jquery-validate

**我正在使用 jQuery 验证插件进行验证**

我有一个用于向数据库添加新用户的用户创建表单。当用户尝试添加新用户时，我会检查数据库中是否存在用户名并返回 true 或 false，因为验证器插件只需要 true 或 false。

下面是代码

```
remote : " {0} already exist "; 
```

这段代码第一次工作得很好。如果我给一个现有的 ID 说“user1”、“user2”、“user3”。我会得到

```
user 1 already exist
user 2 already exist
user 3 already exist 
```

随后。

当我关闭对话框并再次重新打开它时，它将始终显示单一方式。假设我重复上面给出的相同条件。输出将是

```
user 1 already exist
user 1 already exist
user 1 already exist 
```

远程开关中给出的**{0}**将替换文本框中给出的文本。是对话问题吗？

代码 ：

```
$("#login").rules("add",{
    remote : {
    type : "GET",
    url : <ServletURL>,
    cache : false,
    async : false
    }
}); 
```

这是我在自定义消息中使用的

```
login:  {
        remote   : jQuery.format("{0} already exist")
  }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:35:43.803

最后，在 StackOverflow 本身中找到了答案。

这个问题在这里间接回答，它似乎是 jQuery Validation Plugin 中的一个 BUG

[为什么使用jQuery（远程）验证时错误消息中显示错误的字段值？](https://stackoverflow.com/questions/1626998/why-is-the-wrong-field-value-shown-in-the-error-message-when-using-jquery-remot/9334819#9334819)

# javascript - 页面完全写入后，从 cgi 重定向到 html

> ID：11293773
> 
> 赞同：1
> 
> 时间：2012-07-02T12:32:22.233
> 
> 标签：javascript, html, perl, dwr

我搜索了一个与我类似的案例，发现很少有相关的帖子，但没有一个可以回答我的问题。

我正在执行的 cgi 脚本正在处理一些数字，最后吐出一个 html 文件。我正在控制此 html 文件的位置，并在成功提交 html 表单后显示的临时网站上为其提供 url。

输出 html 是在瞬间创建的，或者说它不是立即创建的。

有没有办法在我的临时 cgi 页面中检查 html 是否已完全编写，然后自动重定向到它？如果页面尚未准备好，我希望用户留在当前页面上。

目前在我的临时 cgi 页面上，我显示“检查”和“终止”按钮，您可以在其中检查状态/终止它。当单击“检查”并且网站准备就绪时，我会重定向到它。我还显示了一个指向 html 文件的 url，您可以访问该文件，但如果立即执行，则只会显示页面的一个片段。

我希望刷新/重定向是自动的，所以用户不必点击任何东西。

我在其他地方看到了“尝试加载已知的小图像并检测加载是否完成”的想法：

```
<img src="http://www.example.com/image.jpg"
  onload="window.location='http://www.example.com';"
  onerror="window.location='#';"> 
```

我喜欢这样，但它并不完美。我的临时 cgi 页面不会在不提交表单的情况下将 URL 进一步传递给结果 html（这里没有 GET，没有 POST，因为没有使用表单）。再一次，我希望重定向尽可能自动。

总结一下：如何从使用 CGI.pm 生成的页面中检查外部 html 页面是否已准备好被重定向到？DWR ( [http://directwebremoting.org](http://directwebremoting.org) ) 是唯一的解决方案吗？

我很乐意接受一些 JavaScript 解决方案。

**编辑：**

我在提交初始表单后立即开始写入结果页面，并不断添加。正如已经建议的那样，检查非 404 响应（然后重定向）相当不容易/不可能，因为该页面从一开始就存在（但不完整）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:38:49.010

由于您控制结果 HTML 的编写，我假设从 CGI 生成的页面和静态结果都在同一个域上。在“等待”页面上设置一个定期调用的函数，该函数`.setInterval`将尝试使用 AJAX 请求结果页面，并在收到非 404 响应后立即设置`window.location`为结果页面。还为用户提供一些视觉指示/分散注意力，这样他们就不会认为自己卡住了。

当您生成结果页面时，您应该先用一些临时文件名保存它，然后在完成后将其重命名为最终名称，这样它就不会在完成之前出现在预期的地址。

# php - 以表格形式读取 PHP 中的 .CSV 文件

> ID：11293775
> 
> 赞同：1
> 
> 时间：2012-07-02T12:32:32.687
> 
> 标签：php, file, csv

我目前正在一个项目中，我需要将一些信息发布到 csv 文件然后读回，以便用户可以看到以前的信息然后对其进行编辑。有点像一个数据库表，其中信息将在单元格中，它应该在另一行中旁边有一些文本。

目前我的代码有两个表，一个显示来自 csv 的信息，另一个显示将数据发送到 csv，但我希望将其合并，以便他们可以看到以前创建的信息是什么，然后他们可以编辑这个信息点击提交，这就是将出现在表格中的信息。

这是我现在的代码...

```
$myfile = "outputfile.csv"; 
if (!isset($_POST['submit'])) {
$f = fopen($myfile, 'r');
echo "<table>";
while (($line = fgetcsv($f)) !== false) {
    echo "<tr>";
    foreach ($line as $cell) {
        echo "<td>" . htmlspecialchars($cell) . "</td>";
    }
    echo "</tr>\n";
}
fclose($f);
echo "\n</table>";
echo "
<form action='' method='POST'>
<table border='1'>
    <tr>
        <td><input name='var1' type='text'></td>
        <td>MMR</td>
    </tr>
    <tr>
        <td><input name='var2' type='text'></td>
        <td>FIVE_IN_ONE</td>
    </tr>
    <tr>
        <td><input name='var3' type='text'></td>
        <td>BOOSTER</td>
    </tr>
    <tr>
        <td><input name='var4' type='text'></td>
        <td>MENC</td>
    </tr>
</table>
<input name='submit' type='submit' value='Submit'>
</form>";
} else {
    $text1 = $_POST['var1'];
    $text2 = $_POST['var2'];
    $text3 = $_POST['var3'];
    $text4 = $_POST['var4'];

    $fh = fopen($myfile, 'w+');
    fwrite($fh, $text1 . "\r\n" . $text2 . "\r\n" . $text3 . "\r\n" . $text4);
    fclose($fh);

    echo $text1 . "<br>" . $text2 . "<br>" . $text3 . "<br>" . $text4; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:23:55.397

PHP 内置了 csv 功能：

```
$arrayOfValues = str_getcsv(file_get_contents('myfile.csv'));
foreach($arrayOfValues as $row)
{
  foreach($row as $col)
  {
    echo $col . '&nbsp;';
  }
  echo '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:34:07.030

正如大卫所说，使用 str_getcsv。要将所有内容放在适当的位置以便人们可以进行实时编辑，您需要像这样显示表单：

```
$arrayOfValues = str_getcsv(file_get_contents('myfile.csv'));
foreach($arrayOfValues as $row)
{
  $index=0;
  echo "<tr>";
  foreach($row as $col)
  {
     echo "<td><input name='var".$index."' type='text' value='".$col."'></td>";
     $index++;
  }
  echo "</tr>";
} 
```

# java - DataOutputStream.write(byte b[], int off, int len) 不抛出异常

> ID：11293778
> 
> 赞同：0
> 
> 时间：2012-07-02T12:32:58.423
> 
> 标签：java, io, client-server, java-io

我`DataOutputStream`用于向服务器发送/接收字节流。首先我讨论我的重要代码部分然后问我的问题。

我有一个发送方法如下：

```
protected static void sendMessage (Socket socket, byte[] b)  throws IOException
{
   BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream(), 2048);
   DataOutputStream serverOut = new DataOutputStream(bos);

   serverOut.write(b, 0, b.length);
   serverOut.flush();
} 
```

我使用上述方法通过`DataOutputStream`实例向服务器发送消息。注意：`Socket`实例在之前初始化并作为参数发送到该方法；

另外我有一个`receive`方法如下：

```
protected static void receive (Socket socket, byte[] b) throws IOException
{ 
   BufferedInputStream bis = new BufferedInputStream (socket.getInputStream ());
   DataInputStream serverIn = new DataInputStream (bis);

   serverIn.readFully(b, 0, b.length);
} 
```

在最后一步中，我展示了`main`方法：

```
public static void main(String[] args)
{
    ServerSocketFactory socket_factory = ServerSocketFactory.getDefault();
    InetAddress host =  InetAddress.getByName("192.168.20.33");
    ServerSocket server_socket = socket_factory.createServerSocket(1111,3,host);
    Socket socket = server_socket.accept();
    System.out.println(socket.isConnected());

    byte[] request = new byte[]{48,48,48};
    send(socket, request);

    byte[] response = new byte[10];
    receive(socket,response);
} 
```

在正常情况下，一切都很好，但我的问题是：当服务器在通过`socket.isConnected()`语句`send`方法测试连接后关闭时工作正常并且任何异常都不会抛出，但是在调用`receive`方法时，它会为未连接的主机抛出异常。我很困惑，什么`send`方法在服务器失败时不会抛出异常，但`receive`在连接丢失时方法会抛出异常？还有没有办法在`write`方法类似的`readFully`方法中检查连接，对于示例它会引发异常？

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:39:42.897

该`isConnected()`方法没有告诉你连接的活跃度，只是套接字在某个时间点*被连接。*

有关处理断开连接的更多详细信息，请查看[此答案](https://stackoverflow.com/questions/1390024/how-do-i-check-if-a-socket-is-currently-connected-in-java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T01:13:58.090

除了 jtahlborn 和 Recursed 的正确答案之外，您的消息可能还没有离开 JVM。你正在写一个`DataOutputStream`包裹在`BufferedOutputStream.`你打电话之前什么都不会发生的东西`DataOutputStream.flush().`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:40:29.313

当您发送消息时，您的软件不知道目的地是否收到了您的消息。您可以将消息发送到任何位置，并且永远不会收到错误或异常。但是，当您收到一条消息时，您的软件完全知道它正在等待一条消息，并且当它没有按预期收到一条消息时会提醒您。

如果您想在发送消息之前确保另一端有东西，您可以通过向目的地发送 ping 来修改您的软件，并确保在发送之前在另一端连接了某些东西。

# c++ - 如何在 Qt 中检查我的应用程序的内存使用情况

> ID：11293787
> 
> 赞同：2
> 
> 时间：2012-07-02T12:33:39.657
> 
> 标签：c++, qt, memory-management

有没有一种简单的方法可以检查我的应用程序当前使用了多少内存？

我需要这个来检查我的所有对象是否都被正确销毁。我的应用程序是用 Qt 用 C++ 编写的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:22:12.207

可能，特别是如果您有一个复杂的应用程序，您可能想要使用[valgrind](http://doc.qt.io/qtcreator/creator-valgrind-overview.html)。这是一个为跟踪内存分配问题而设计的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:38:56.373

使用`ps`或`top`在您的终端上有什么问题吗？使用调试器怎么样，例如`gdb`？或者您是否希望在您的应用程序中使用代码做一些事情？

[http://unixhelp.ed.ac.uk/CGI/man-cgi?ps](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)

[http://www.delorie.com/gnu/docs/gdb/gdb_56.html](http://www.delorie.com/gnu/docs/gdb/gdb_56.html)

# java - 将php页面带入java代码

> ID：11293790
> 
> 赞同：0
> 
> 时间：2012-07-02T12:33:54.503
> 
> 标签：java, php

我有一个网页，即 php 页面及其表单。我想把这个页面带入java，即在java页面中我想使用.php页面的URL显示这个表单。有可能吗？如果可以，怎么办？

有问题的澄清：

我有一个java网页。在这个网页中，我想要一个 iframe 或任何类似的东西，它将使用 php url 在其中显示一个 php 表单并执行保存操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:38:08.800

我不太确定我是否理解你的问题。我假设你想要一个 jsp 页面（你称之为 Java 页面），它只显示你的 php 页面的内容。如果是这种情况，那么您需要重定向：

```
<%
    String redirectURL = "http://www.exmple.com/your_page.php";
    response.sendRedirect(redirectURL);
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:41:14.923

如果您想在 Swing 应用程序中使用它，您可以使用 DJ 项目嵌入浏览器：http: [//djproject.sourceforge.net/ns/](http://djproject.sourceforge.net/ns/)，您可以对其进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:36:48.903

如果我理解正确，您希望 Java 从网页中获取信息？即屏幕抓取....

看到这个：[网页抓取，屏幕抓取，数据挖掘技巧？](https://stackoverflow.com/questions/4079784/web-scraping-screen-scraping-data-mining-tips)

# c# - 静态类是引用类型还是值类型？

> ID：11293791
> 
> 赞同：5
> 
> 时间：2012-07-02T12:33:55.177
> 
> 标签：c#

静态类是引用类型还是值类型？如果有人给出一个很好的解释，那将非常有帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T12:34:28.403

类始终是引用类型，无论它是静态的还是非静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:05:35.037

值和引用类型是关于类型的实例。无法实例化静态类，因此这个问题与静态类无关。

静态类只能包含静态成员，并且静态成员（如属性）为整个应用程序创建一次，因此如果您更改其值，它会在您的应用程序中随处更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T12:42:36.717

我认为您所指的是静态类的成员。`reference`如果它们实际上是对象，它们就是类型，否则它们只是值类型。据我所知，一个静态类本身不能被传递。尝试运行此代码

```
class Program
    {
        static void Main(string[] args)
        {
            StaticClass.x = 89;
            Console.WriteLine(StaticClass.x);
            changeValue(StaticClass.x);
            Console.WriteLine(StaticClass.x);
            Console.ReadKey();
        }
        static void changeValue(int x)
        {
            x = x + 1;
        }
    }
{
    public static class StaticClass
    {
        public static int x { get; set; }
    }
} 
```

编辑：-
这两种情况下的输出都是 89
编辑：-
如果你再深入一点，静态类基本上是一个具有私有构造函数并且没有与之关联的状态（变量）的类（与我提供的示例不同） . **所以理论上是的，它是一种`reference`类型**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-04T06:58:52.620

我只想补充一点，静态类既是类又是类型。静态构造函数被调用一次，因此当第一次在程序中“引用”时，它由 CLR 作为类型“创建”，因此是真正的类引用类型。

但我喜欢将静态类的实现或“使用”仅视为空类型或“类名”，因为这实际上是访问其成员的方式和执行方式。因此，将创建的静态类视为仅指向其方法和属性的空指针，而不是像真正的非静态类那样指向包含这些内容的真实实例化类对象的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T12:43:23.337

是的，静态类被视为引用类型，因为当您在方法中更改 StaticClass.Property 值时，此更改将在您引用此类的任何地方填充。它只有一个内存地址，不能被复制，所以当另一个方法或属性调用发生时，这个新值将优先于旧值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-25T23:30:49.827

不是它们，因为您不能将其复制为值类型，也不能将其实例化为引用类型。这个问题没有意义，但它确实像structs、int、double一样驻留在堆栈上，但它不允许你被复制！

# java - 阻止某些程序仅访问 util 包

> ID：11293796
> 
> 赞同：0
> 
> 时间：2012-07-02T12:34:20.073
> 
> 标签：java, jakarta-ee

我试图阻止一些程序访问`util`包。我正在努力`Ubuntu`，即使在以 root 身份提供文件夹的 770 权限后`util`，我的程序作为普通用户也能够编译和运行本身

```
Scanner sc = new Scanner(System.in);
int a = sc.nextInt(); 
```

它运行成功。我尝试搜索并浏览了以下链接 [Java .policy file - how to prevent java.util.Date() from be accessible](https://stackoverflow.com/q/5083619/1397699)

正如那里解释的那样，它可以通过security.access来完成，任何人都可以向我展示阻止使用`util`包的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:57:40.707

在目录上设置 a`chmod`不是您所需要的。您可以尝试使用`SecurityManager`.

# .htaccess - 未使用 php 运行 .htaccess 文件

> ID：11293797
> 
> 赞同：0
> 
> 时间：2012-07-02T12:34:23.743
> 
> 标签：.htaccess

我是新手，我想为我的项目编写 .htaccess 文件。我在本地主机上运行时编写了这段代码：-

```
RewriteEngine on
RewriteRule ^http://192.168.1.185/location/new/project/rss\.php$   http://192.168.1.185/location/new/project/folder/rss.php 
```

我想重定向`http://192.168.1.185/location/new/project/rss.php`到`http://192.168.1.185/location/new/project/folder/rss.php`

这不起作用。我做错了什么吗？请提前帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:39:32.630

我自己不是 htaccess 专家，但这应该可行：

```
# Redirect old file path to new file path
Redirect rss.php http://192.168.1.185/vroomrelocation/new/vroomvroom/yash/rss.php 
```

并将其放在 rss.php 目录中，而不是基本目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:43:31.423

重写规则只考虑`path`URL (URI) 的一部分（[一篇关于 mod_rewrite 的优秀文章](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)）。其余的被忽略。

但是，如果您的重定向需要是永久性的，最好避免`mod_rewrite`并简单地使用[Redirect](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)。

```
Redirect /vroomrelocation/new/vroomvroom/rss.php /vroomrelocation/new/vroomvroom/yash/rss.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:47:24.743

如果要将`.htaccess`文件放在网站的根目录中，则应编写：

```
Redirect /vroomrelocation/new/vroomvroom/rss.php /vroomrelocation/new/vroomvroom/yash/rss.php 
```

我建议将文件放在里面`/vroomrelocation/new/vroomvroom/`并写：

```
Redirect rss.php yash/rss.php 
```

# google-chrome - Chrome 扩展：webRequest.onCompleted.addListener + XHR

> ID：11293799
> 
> 赞同：2
> 
> 时间：2012-07-02T12:34:28.843
> 
> 标签：google-chrome, google-chrome-extension, xmlhttprequest, webrequest

我正在尝试使用 Chrome 扩展程序在浏览其他网站时获取网站内容。我在 chrome.webRequest.onCompleted 发生时调用“XMLHttpRequest”但是每当我调用 XHR.Open 方法时，都会出现以下错误：来自 XHR 对象的 Status 和 StatusText 字段中的 [Exception: DOMException]。

任何想法 ？

谢谢。

我正在使用下面的代码：

```
chrome.webRequest.onCompleted.addListener(
function(details) {
    if (details.url.substring(0, 23) == "https://www.google.com/") // I know I do not need this
    {
        console.info("URL :" + details.url);
        FindData("www.altavista.com");
    }
}, 
// filters
{
    urls: [
        "http://*.google.com/*", 
        "https://*.google.com/*", 
    ],
    types: ["image"]
},
["responseHeaders"]);

function FindData(strURL) {
    var req = new XMLHttpRequest();
    req.open("GET", strURL, true);
    req.onreadystatechange=function() {
        if (req.readyState==4) {
            if (req.status==200)
            {
                console.info("Sucess!");
                console.info("Data: " + req.responseText);
            }
        else if (req.status==404) console.info("URL doesn't exist!")
        else console.info("Error: Status is " + req.status)
        }
    }
    req.send();
} 
```

我的清单.json

```
{
  "name": "Test",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_popup": "popup.html"
  },
    "permissions": ["webRequest", "webRequestBlocking",
                  "http://www.altavista.com/*",
                  "http://*.google.com/*",
                  "https://*.google.com/*"]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:38:19.090

您必须添加一个协议。`www.altavista.com`解决为`chrome-extension://..../www.altavista.com`。使用`http://www.altavista.com`应该可以解决您的问题。

# javascript - 在 html 中创建平铺地图交互性

> ID：11293804
> 
> 赞同：0
> 
> 时间：2012-07-02T12:34:57.543
> 
> 标签：javascript, jquery, html

我想创建一个地图交互性，它将消耗巨大的图像（大约 7000 x 7000 像素），该图像将处于缩小状态。用户可以放大地图并点击他的兴趣点。我需要使用 HTML5 和 Javasctipt、jQuery 等来创建它。我不想使用任何谷歌地图 API 来创建它。该地图将是手绘的，并且可以是图像格式。

我不确定可以应用什么技术来获得像谷歌地图这样的结果。

一些指导会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:11:24.967

经过研究，我发现**Open Layers**是一种可用于解决上述问题但具有自定义图像的技术。

有趣的是，我得到了一个工具，它可以将巨大的图像切割成几个图块并在 Open Layers 中输出内容。

**MapTiler**： http: [//www.maptiler.org/](http://www.maptiler.org/)

这是一款很棒的软件，而且完全免费。

谢谢，希望这对其他人有帮助:)

# sql - 为什么缺少 GridViewDeleteEventArgs.Values 之一？

> ID：11293807
> 
> 赞同：1
> 
> 时间：2012-07-02T12:35:04.443
> 
> 标签：sql, gridview

我有`gridview`一个`sqldatasource`包含 7 个值的值。`gridview datakeynames`是`equipment_ID`；_ 其余的是常规字段。

我正在尝试使用`e.values("BME_No")`within `gridview_rowdeleted`，但它是空的。同时，`e.values("equipment_name")`已满，`e.values.count`节目`values`是 5\. `values`应该是 6，不包括`datakeyname equipment_ID`.

从这里的文章{没有提供网址}，我看到`datakeynames`被排除在`values`. 另一方面，`BME_No`不是`datakeyname`。

我应该如何进行？

**sql数据源：**

```
<asp:SqlDataSource ID="SqlDataSource_GV" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalEquipmentLibrary_DBConnectionString %>"
        SelectCommand="Select_Equipments" SelectCommandType="StoredProcedure" UpdateCommand="Update_Equipment"
        UpdateCommandType="StoredProcedure" CancelSelectOnNullParameter="False" DeleteCommand="Delete_Equipment"
        DeleteCommandType="StoredProcedure">
        <SelectParameters>
            <asp:ControlParameter ControlID="txtSearch" Name="BME_No" PropertyName="Text" Type="Int32" />
        </SelectParameters>
        <DeleteParameters>
            <asp:Parameter Name="Equipment_ID" Type="Int32" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:Parameter Name="Equipment_ID" Type="Int32" />
            <asp:Parameter Name="BME_No" Type="Int32" />
            <asp:Parameter Name="Equipment_Name" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="Model_Name" Type="String" />
            <asp:Parameter Name="Vendor_Name" Type="String" />
            <asp:Parameter Name="Manufacture_Name" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

**Gridview_rowdeleted 事件：**

```
 Protected Sub GV_Main_RowDeleted(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewDeletedEventArgs) Handles GV_Main.RowDeleted
        lblMessage.ForeColor = Drawing.Color.Red
        lblMessage.Visible = True
        lblMessage.Text = "Equipment " + e.Values("BME_No") + " is deleted."
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T13:11:30.947

*   如果该字段是绑定字段，请检查该列是否可见。
*   如果是模板字段，请检查该字段是否为双向绑定。从[文档](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewdeletedeventargs.values(v=vs.110).aspx)：

“只有在项目模板中使用双向绑定表达式时才会填充 Values 属性”

# android - 使用 android-facebook api 时如何忽略设备上安装的 Facebook android 应用程序？

> ID：11293815
> 
> 赞同：0
> 
> 时间：2012-07-02T12:36:03.540
> 
> 标签：android, facebook

我的 android 应用程序中有一个 facebook 登录选项。

当我的设备上没有安装 Facebook 应用程序时，此登录工作正常。但是在安装 facebook 应用程序时，它会在少数情况下产生问题。

那么，如果安装了 Facebook 应用程序并以以前的方式继续（假设未安装 facebook 应用程序），我如何告诉我的应用程序的 facebook 登录忽略？

这是我单击 fbLoginButton 时调用的活动：

```
public class Example extends Activity {

    public static final String APP_ID = myAppIdHere;

    private LoginButton mLoginButton;
    private TextView mText;
    private Button mRequestButton;
    private Button mPostButton;
    private Button mDeleteButton;
    private Button mUploadButton;
    public static Activity ExampleActivity;

    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ExampleActivity = this;
        if (APP_ID == null) {
            Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " +
                    "specified before running this example: see Example.java");
        }

       setContentView(R.layout.facebook);
        mLoginButton = (LoginButton) findViewById(R.id.login);
        mFacebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);

        SessionStore.restore(mFacebook, this);
        SessionEvents.addAuthListener(new SampleAuthListener());
        SessionEvents.addLogoutListener(new SampleLogoutListener());
        mLoginButton.init(this, mFacebook);

    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode,
                                    Intent data) {

        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    public class SampleAuthListener implements AuthListener {

        public void onAuthSucceed() {

        }

        public void onAuthFail(String error) {

        }
    }

    public class SampleLogoutListener implements LogoutListener {
        public void onLogoutBegin() {

        }

        public void onLogoutFinish() {

    }
} 
```

这是登录按钮类：

```
public class LoginButton extends ImageButton {

    public static Facebook mFb;
    public static String facebookID;
    public static String firstName;
    public static String lastName;
    public static String email = "";
    public static String sex;
    private Handler mHandler;
    private SessionListener mSessionListener = new SessionListener();
    private String[] mPermissions = new String[] { "read_stream", "email" };
    private Activity mActivity;

    public LoginButton(Context context) {
        super(context);
    }

    public LoginButton(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public LoginButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public void init(final Activity activity, final Facebook fb) {
        init(activity, fb, new String[] {});
    }

    public void init(final Activity activity, final Facebook fb,
            final String[] permissions) {
        mActivity = activity;
        mFb = fb;
        mPermissions = new String[] { "read_stream", "email" };
        ;
        mHandler = new Handler();

        setBackgroundColor(Color.TRANSPARENT);
        setAdjustViewBounds(true);

        if(mFb.isSessionValid()){
            getUser();
            SessionEvents.onLogoutBegin();
            AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFb);
            asyncRunner.logout(getContext(), new LogoutRequestListener());
        }else{

            setImageResource(R.drawable.login_button);
            drawableStateChanged();
        }

        SessionEvents.addAuthListener(mSessionListener);
        SessionEvents.addLogoutListener(mSessionListener);
        setOnClickListener(new ButtonOnClickListener());
    }

    private final class ButtonOnClickListener implements OnClickListener {

        public void onClick(View arg0) {
            if (mFb.isSessionValid()) {
                getUser();
                SessionEvents.onLogoutBegin();
                AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFb);
                asyncRunner.logout(getContext(), new LogoutRequestListener());
            } else {
                mFb.authorize(mActivity, mPermissions,
                        new LoginDialogListener());
            }
        }
    }

    private final class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {

            SessionEvents.onLoginSuccess();
        }

        public void onFacebookError(FacebookError error) {

            SessionEvents.onLoginError(error.getMessage());
        }

        public void onError(DialogError error) {

            SessionEvents.onLoginError(error.getMessage());
        }

        public void onCancel() {

            SessionEvents.onLoginError("Action Canceled");
        }

    }

    private class LogoutRequestListener extends BaseRequestListener {
        public void onComplete(String response, final Object state) {

            mHandler.post(new Runnable() {
                public void run() {

                SessionEvents.onLogoutFinish();
                }
            });
        }
    }

    private class SessionListener implements AuthListener, LogoutListener {

        public void onAuthSucceed() {

            setImageResource(R.drawable.logout_button);
            SessionStore.save(mFb, getContext());
        }

        public void onAuthFail(String error) {
        }

        public void onLogoutBegin() {
        }

        public void onLogoutFinish() {

            SessionStore.clear(getContext());
            setImageResource(R.drawable.login_button);
        }
    }

    public static void getUser() {

        try {
            JSONObject json = Util.parseJson(mFb.request("me"));
            facebookID = json.getString("id");
            firstName = json.getString("first_name");
            lastName = json.getString("last_name");
            email = json.getString("email");
            sex = json.getString("gender");
            String mFirstName = firstName;
            String mLastName = lastName;
            String mEmail = email;
            String mSex = sex;
            Log.d("User Details", "You are logged in : " + facebookID
                    + mFirstName + "." + mLastName + "  Email is: " + mEmail
                    + "-" + mSex);

            SharedPreferences.Editor editor = SignUpActivity.settings.edit();

            // Set "hasLoggedIn" to true
            editor.putBoolean("hasLoggedIn", true);
            editor.putString("fbEmail", email);
            editor.putString("fbId", facebookID);
            editor.putString("fbSex", sex);
            editor.putString("fbFirstname", firstName);
            editor.putString("fbLastname", lastName);

            // Commit the edits!
            editor.commit();
        } catch (Exception e) {
            // TODO: handle exception
            Log.d("Exception in getUser", "+++++" + e.toString());
        }
    }
} 
```

这是 SessionEvents 类：

```
public class SessionEvents {

    private static LinkedList<AuthListener> mAuthListeners = new LinkedList<AuthListener>();
    private static LinkedList<LogoutListener> mLogoutListeners = new LinkedList<LogoutListener>();

    public static void addAuthListener(AuthListener listener) {

        mAuthListeners.add(listener);
    }

    public static void removeAuthListener(AuthListener listener) {

        mAuthListeners.remove(listener);
    }

    public static void addLogoutListener(LogoutListener listener) {

        mLogoutListeners.add(listener);
    }

    public static void removeLogoutListener(LogoutListener listener) {

        mLogoutListeners.remove(listener);
    }

    public static void onLoginSuccess() {

        LoginButton.getUser();
        for (AuthListener listener : mAuthListeners) {
            listener.onAuthSucceed();
        }
    }

    public static void onLoginError(String error) {

        for (AuthListener listener : mAuthListeners) {
            listener.onAuthFail(error);
        }
    }

    public static void onLogoutBegin() {

        for (LogoutListener l : mLogoutListeners) {
            l.onLogoutBegin();
        }
    }

    public static void onLogoutFinish() {

        for (LogoutListener l : mLogoutListeners) {
            l.onLogoutFinish();
        }
    }

    public static interface AuthListener {

        public void onAuthSucceed();

        public void onAuthFail(String error);
    }

    public static interface LogoutListener {

        public void onLogoutBegin();

        public void onLogoutFinish();
    }

} 
```

这是 SessionStore 类：

```
public class SessionStore extends Activity{

    private static final String TOKEN = "access_token";
    private static final String EXPIRES = "expires_in";
    private static final String KEY = "facebook-session";

    public static boolean save(Facebook session, Context context) {

        Context contextObj = Example.ExampleActivity;
        Intent i=new Intent(contextObj , SignUpActivity.class);
        contextObj.startActivity(i);

        Editor editor =
            context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, session.getAccessToken());
        editor.putLong(EXPIRES, session.getAccessExpires());
        return editor.commit();
    }

    public static boolean restore(Facebook session, Context context) {

        SharedPreferences savedSession =
            context.getSharedPreferences(KEY, Context.MODE_PRIVATE);
        session.setAccessToken(savedSession.getString(TOKEN, null));
        session.setAccessExpires(savedSession.getLong(EXPIRES, 0));
        return session.isSessionValid();
    }

    public static void clear(Context context) {

        Editor editor = 
            context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.clear();
        editor.commit();
    }

} 
```

这是 BaseRequestListener 类：

```
public abstract class BaseRequestListener implements RequestListener {

    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onFileNotFoundException(FileNotFoundException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    public void onMalformedURLException(MalformedURLException e,
            final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:05:28.640

请更新您的登录按钮单击侦听器的以下代码。

```
mFb.authorize(mActivity, mPermissions, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener()); 
```

代替

```
mFb.authorize(mActivity, mPermissions, new LoginDialogListener()); 
```

并查看下面的链接了解更多信息

[Facebook 登录问题](https://stackoverflow.com/questions/10815813/android-facebook-authorization-can-not-login-when-official-facebook-app-instal/10816381#10816381)

# ios - PayPal 移动支付库 - 库不与应用程序通信

> ID：11293818
> 
> 赞同：0
> 
> 时间：2012-07-02T12:36:13.777
> 
> 标签：ios, xcode, paypal

我正在使用 PayPal API 开发应用程序。这是一个简单的应用程序，只需一个按钮即可执行简单的付款。我有一个沙盒帐户，我可以在那里看到付款已正确执行。

但问题是在应用程序中，我无法收到任何响应。像`paymentSuccessWithKey:`, `paymentFailedWithCorrelationID:`, `paymentCanceled:`or这样的方法`paymentLibraryExit:`不会在代码中执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T07:14:02.777

这就是解决方案：

问题是我没有使用 PayPal 按钮。当您插入此应用程序时，该应用程序可以正常工作：

```
[self addLabelWithText:@"Simple Payment" andButtonWithType:BUTTON_294x43 withAction:@selector(pay:)]; 
```

# c# - 从哈希表中查找值

> ID：11293827
> 
> 赞同：5
> 
> 时间：2012-07-02T12:36:49.203
> 
> 标签：c#, .net, collections, hashtable

如果我有一个通用列表，我会做这样的事情

```
myListOfObject.FindAll(x=>(x.IsRequired==false)); 
```

如果我需要在 中做类似的事情怎么办`Hashtable`？复制到临时`hashtable`并循环和比较将是我尝试的最后一件事:-(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T12:41:40.580

首先，`System.Collections.Generic.Dictionary<TKey, TValue>`用于更好的强类型支持，而不是`Hashtable`.

如果您只需要找到一个键或一个值，请使用方法`ContainsKey(object key)`or `ContainsValue(object value)`，这两种方法都可以在`Hashtable`类型上找到。

或者您可以更进一步并在`Hashtable`部件上使用 linq 扩展：

```
Hashtable t = new Hashtable();
t.Add("Key", "Adam");

// Get the key/value entries.
var itemEntry = t.OfType<DictionaryEntry>().Where(de => (de.Value as string) == "Adam");

// Get just the values.
var items = t.Values.OfType<string>().Where(s => s == "Adam");

// Get just the keys.
var itemKey = t.Keys.OfType<string>().Where(k => k == "Key"); 
```

# php - Excel 单元格内容转 HTML

> ID：11293828
> 
> 赞同：0
> 
> 时间：2012-07-02T12:36:52.587
> 
> 标签：php, mysql, excel, import

我有一个（我认为）不容易解决的问题。

我有一个包含多列和多行的 Excel 表 (.xls)。Excel 文件是从数据库中导出的。在该导出中，所有 HTML 标记都从内容中删除，因此当您打开 Excel 文件时，您看到的只是文本，而不是任何 HTML 标记或任何可能让不了解 HTML 的人感到困惑的东西。

在对 Excel 文件进行一些更改后，必须将 Excel 文件再次导入数据库。现在问题来了：是否可以放回剥离的 HTML？

我们在 MySQL 数据库上使用 PHP 5.3。要从 Excel 文件中读取数据，我们使用[php-excel-reader](http://code.google.com/p/php-excel-reader/)

请问有人知道是否有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:03:28.860

如果您打开 MySQL 导出的文件，您将看到结构，例如

```
 1,,'john','Quesada'
    2,'t@t.com',,'Fonseca'
    3,,'Gabriel','Smith'
.... 
```

所以这个想法是在文本编辑器中打开它并进行查找和替换，IE你可以找到-替换并用`（空白）更改所有字段，`Insert into t1 values (`这样文件看起来像`

 ````
Insert into t1 values (1,,'john','Quesada'
Insert into t1 values (2,'t@t.com',,'Fonseca'
Insert into t1 values (3,,'Gabriel','Smith' 
```

你这样做，最后你有你想要的文件，

尝试对您的文件执行此操作，尝试使用文本编辑器打开它并根据需要自定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:14:57.023

如果您在导出内容时剥离了 HTML 标记，如果您不将其保存在某个地方，之后似乎很难恢复它。您是否正在修改包含 HTML 内容的列，如果没有，那么您应该从导出中删除这些列，否则您将不得不在没有条带标签的情况下导出，可能会更改分隔符。`

# android - EGL 在 Linux 上工作，但在 Android 上不工作

> ID：11293832
> 
> 赞同：4
> 
> 时间：2012-07-02T12:37:13.320
> 
> 标签：android, android-emulator, android-ndk, opengl-es-2.0, egl

我有 EGL/GLES 2.0 代码，我尝试在 Linux（通过 Mesa）和 Android（即将推出 iOS）上运行。在 Linux 上，它工作正常并且呈现出预期的效果。在 Android（手机、平板电脑和模拟器 - 所有 4.01）上运行它可以正常运行，但不显示任何内容（屏幕保持黑色）。所有 3 的代码 99% 相同 - 对 Android 进行了一些特殊处理。遵循我的 EGL 属性：

```
EGLint attribList[] =
{
    EGL_SURFACE_TYPE,   EGL_WINDOW_BIT,
    EGL_RED_SIZE,       8,
    EGL_GREEN_SIZE,     8,
    EGL_BLUE_SIZE,      8,
    //EGL_ALPHA_SIZE,     (flags & ES_WINDOW_ALPHA) ? 8 : EGL_DONT_CARE,
    //EGL_DEPTH_SIZE,     (flags & ES_WINDOW_DEPTH) ? 8 : EGL_DONT_CARE,
    //EGL_STENCIL_SIZE,   (flags & ES_WINDOW_STENCIL) ? 8 : EGL_DONT_CARE,
    EGL_SAMPLE_BUFFERS, (flags & ES_WINDOW_MULTISAMPLE) ? 1 : 0,
    // For Android this is extremely important - eglCreateContext will fail without it
    EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
    EGL_NONE, EGL_NONE
}; 
```

遵循 EGL 创建代码：

```
EGLint numConfigs;
EGLint majorVersion;
EGLint minorVersion;
EGLDisplay display;
EGLContext context;
EGLSurface surface;
EGLConfig config;
EGLint contextAttribs[] = { EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE, EGL_NONE };

// Get Display
display = eglGetDisplay((EGLNativeDisplayType)x_display);
if ( display == EGL_NO_DISPLAY )
{
  esLogMessage("eglGetDisplay failed %d\n", eglGetError());
   return EGL_FALSE;
}

// Initialize EGL
if ( !eglInitialize(display, &majorVersion, &minorVersion) )
{
  esLogMessage("eglInitialize failed %d\n", eglGetError());
   return EGL_FALSE;
}

static const size_t CONFIG_COUNT = 128;
EGLConfig configs[CONFIG_COUNT];

// Get configs
if ( !eglGetConfigs(display, configs, CONFIG_COUNT, &numConfigs) )
{
  esLogMessage("eglGetConfigs failed %d\n", eglGetError());
   return EGL_FALSE;
}
else if( numConfigs == 0 )
{
   esLogMessage("eglGetConfigs found no configs for the display\n");
   return EGL_FALSE;
}

EGLint chosenConfigCount = 0;
// Choose config
if ( !eglChooseConfig(display, attribList, &config, 1, &chosenConfigCount) )
{
  esLogMessage("eglChooseConfig failed %d\n", eglGetError());
   return EGL_FALSE;
}
else if( chosenConfigCount == 0 )
{
   esLogMessage("eglChooseConfig found no matching configs (%d available)\n", numConfigs);
   return EGL_FALSE;
}

EGLint format;
/* EGL_NATIVE_VISUAL_ID is an attribute of the EGLConfig that is
 * guaranteed to be accepted by ANativeWindow_setBuffersGeometry().
 * As soon as we picked a EGLConfig, we can safely reconfigure the
 * ANativeWindow buffers to match, using EGL_NATIVE_VISUAL_ID. */
if( !eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &format) )
{
   esLogMessage("eglGetConfigAttrib failed %d\n", eglGetError());
   return EGL_FALSE;
}

#ifdef ANDROID

if( ANativeWindow_setBuffersGeometry(hWnd, 0, 0, format) )
{
   esLogMessage("ANativeWindow_setBuffersGeometry failed\n");
   return EGL_FALSE;
}

#endif

// Create a surface
surface = eglCreateWindowSurface(display, config, (EGLNativeWindowType)hWnd, NULL);
if ( surface == EGL_NO_SURFACE )
{
   esLogMessage("eglCreateWindowSurface failed %d\n", eglGetError());
   return EGL_FALSE;
}

// Create a GL context
context = eglCreateContext(display, config, EGL_NO_CONTEXT, contextAttribs );
if ( context == EGL_NO_CONTEXT )
{
   esLogMessage("eglCreateContext failed %d\n", eglGetError());
   return EGL_FALSE;
}   

// Make the context current
if ( !eglMakeCurrent(display, surface, surface, context) )
{
  esLogMessage("eglMakeCurrent failed %d\n", eglGetError());
   return EGL_FALSE;
} 
```

有人可以阐明，要测试什么或如何找到问题吗？

编辑：

我修复了一些其他错误，现在它在 Android 模拟器和*HP 触摸板（Cyanogenmod 9 alpha）中运行良好，但仍然导致我的**三星 Galaxy S1*与*Cyanogenmod 9* *sigh*出现黑屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T13:09:00.613

首先，请注意：您不需要两个`EGL_NONE`来结束属性定义。

其次，您的问题来自`eglGetConfigs()`返回可用配置的事实，但`eglChooseConfig(...,1,..)`不一定会返回与您请求的配置完全匹配的配置。因此，您必须扫描配置以找到最接近您需求的配置。

例如，您必须调用`eglGetConfigAttrib()`比较，`EGL_RED_SIZE`, `EGL_GREEN_SIZE`, `EGL_BLUE_SIZE`, `EGL_ALPHA_SIZE`, `EGL_RENDERABLE_TYPE`, `EGL_DEPTH_SIZE`, `EGL_STENCIL_SIZE`。

有关详细信息，请参阅[eglChooseConfig()](http://www.khronos.org/registry/egl/sdk/docs/man/xhtml/)。

# objective-c - UIView 框架从 viewWillAppear: 变为 viewDidAppear:

> ID：11293834
> 
> 赞同：8
> 
> 时间：2012-07-02T12:37:18.003
> 
> 标签：objective-c, ios, ipad

我正在`UIView`用框架初始化 a: `CGRectMake(0, 0, 1024, 768)`。一切似乎都是正确的，直到它的超级视图进入`viewDidAppear:`方法。框架变为`768, 1024`。仅当`Status bar is initially hidden`属性设置为时才会出现此问题`YES`。如果显示状态栏，则框架不会更改。

我已经签入`UIInterfaceOrientation`并且`viewWillAppear:`它`viewDidAppear:`在两种方法之间没有变化。

为什么隐藏状态栏时框架的高度和宽度会交换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:09:55.677

在`app delegate`设置`wantsFullScreenLayout`属性`viewController`为 YES。

# c# - 如何在 Web 应用程序中显示互联网连接速度？

> ID：11293840
> 
> 赞同：2
> 
> 时间：2012-07-02T12:37:53.743
> 
> 标签：c#, asp.net, bandwidth

我有一个使用 C# 的 asp.net Web 应用程序。它登录远程机器并从服务器下载文件。我希望显示连接期间可用的带宽或连接速度。

如果不允许我使用任何外部库或 API，那么最好的方法是什么？如何使用 Javascript 实现它？

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:44:41.467

Have a look at the following page:

[Determining available bandwidth](https://stackoverflow.com/questions/149211/determining-available-bandwidth)

It suggests there isnt really an easy way of doing it.

This one has some ideas of how to do it though:

[Detecting network connection speed and bandwidth usage in C#](https://stackoverflow.com/questions/566139/detecting-network-connection-speed-and-bandwidth-usage-in-c-sharp)

Hope they help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:53:59.117

这篇文章很好地解释了[Google Analytics 如何计算速度](http://www.seifi.org/javascript/how-google-analytics-determines-connection-speeds.html)。

正如文章所建议的，最容易实施但最不准确的方法之一可能是实施/构建一个解决方案，将用户 IP 地址与 IP 地址所属的 ISP 相匹配，然后“假设”连接速度。我个人觉得这太不准确了，但它可能足以满足您的需求，特别是如果您正在开发一个在封闭 WAN 上运行的应用程序。

# jquery-ui - 具有可调整大小的小部件的小部件样式网站，其宽度可以超过一列

> ID：11293841
> 
> 赞同：2
> 
> 时间：2012-07-02T12:37:56.113
> 
> 标签：jquery-ui, widget

我需要创建一个使用小部件的网站。我找到了一种方法来创建像[Google IG](http://www.google.com/ig)这样的布局，但我也希望能够调整小部件的大小。一个小部件应该有可能跨越两列，其上方或下方还有其他较小的小部件。我想要的一个例子可以在[Protopage](http://www.protopage.com/)网站上找到。

简而言之，我想：

```
1\. Use widgets
2\. Be able to resize widgets in both height and width
3\. Add and remove widgets
4\. Move widgets 
```

如果我有关于如何创建像[Protopage](http://www.protopage.com/)这样的网站的文档，我想我会有足够的信息。

我想使用 JQuery 创建一个带有 MVC3 的 Azure Web 角色。JQuery 将是创建小部件的最重要部分，那么是否有最适合此的框架/插件？我见过[Isotope](http://isotope.metafizzy.co/)和[Masonry](http://masonry.desandro.com/)，但它们都没有展示如何通过拖放来调整大小或移动小部件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T18:12:00.193

这个小插件允许它们被拖动和重新调整大小，并且它们可以“捕捉”到彼此。它们不会捕捉到页面上的“网格”，而是彼此捕捉。 [https://github.com/polomoshnov/jQuery-UI-Resizable-Snap-extension](https://github.com/polomoshnov/jQuery-UI-Resizable-Snap-extension) 演示： http: [//fiddle.jshell.net/5xB7S/show/light/](http://fiddle.jshell.net/5xB7S/show/light/)

**更新：**如果您不想要插件，这里是一个从头开始。从头开始完全按照您的需要创建它应该不会太难。

**[http://jsfiddle.net/xv57M/8/](http://jsfiddle.net/xv57M/8/)**

这是一些代码，请参阅小提琴...

```
//CSS
#grid table{ position:absolute; width:600px; top:0px; }
#grid table td{ height:150px; width:300px; }

.item { position:absolute; width: 300px; height: 150px; background: rgba(54, 25, 25, .5); }
#item1 { top:10px; }
#item2 { top:160px; }
#item3 { top:310px; }

//JS
$(function() {
    $( "#item1" ).resizable({ grid: 300 });
    $( "#item2" ).resizable({ grid: 300 });
    $( "#item3" ).resizable({ grid: 300 });

    $( "#item1" ).draggable({ grid: [ 300, 150 ] });
    $( "#item2" ).draggable({ grid: [ 300, 150 ] });
    $( "#item3" ).draggable({ grid: [ 300, 150 ] });
}); 
```

# haskell - Cabal 源码包和黑线鳕文档

> ID：11293842
> 
> 赞同：4
> 
> 时间：2012-07-02T12:38:01.150
> 
> 标签：haskell, cabal

我尝试测试将 cabal 包上传到 HackageDB。当我在 hackage 网站上对其进行测试时，一切正常，*但*它呈现给我的输出仅包含内容页面，并且没有进一步链接到实际模块文档。

现在，我不知道这是否意味着无法构建文档（cabal haddock 运行良好并在我的测试系统上构建正确的 html）或者我需要以某种方式手动将 html 包含到包中，或者......也许构建在 cabal 中有更多选项的可分发包？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T12:43:40.010

[为hackage](http://hackage.haskell.org)上的新软件包构建文档的工作每隔几个小时运行一次，而不是连续运行。因此，从上传一个包到出现关于 hackage 的文档通常需要几个小时。

除了等，别无他法。

有时，作业会死掉，需要手动重新启动，如果 24 小时内没有生成文档，您可以戳 hackage 管理员，然后给他们（或 haskell-cafe）发送电子邮件。

# c# - 使用 lambda 表达式指定相等性

> ID：11293848
> 
> 赞同：0
> 
> 时间：2012-07-02T12:38:20.400
> 
> 标签：c#, lambda, iequalitycomparer

我想比较 2 个集合。其中一个是 a `List<string>`，另一个是 a `List<Book>`。Book 有一个 Isbn 类型的属性`string`，我想写这样的东西：

```
List<string> isbnBooks= new List<string> {"978-1933988276", "978-0321146533", "3"};
List<Book> books = new List<Book>();

books.Add(new Book { Isbn="978-1933988276", Name="The Art of Unit Testing"});
books.Add(new Book { Isbn="978-0321146533", Name="TDD By Example"});
books.Add(new Book { Isbn="978-0321503626", Name="Growing Object-Oriented Software"});

// What I want to write
var intersectedBooks = books.Intersect(books, isbnBooks, (book, isbn) => book.Isbn == isbn)); 
```

我想在方法中指定相等性。是否可以 ？或者我应该强制创建一个实现 IEqualityComparer 接口的 BookComparer 吗？

问候，

弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:41:07.300

`Intersect`根本不适用于不同的集合类型。在这种情况下，看起来写起来会更简单：

```
HashSet<string> isbns = new HashSet<string> isbnBooks();   
var intersectedBooks = books.Where(book => isbns.Contains(book.Isbn)); 
```

当然，或者你也可以加入：

```
var knownBooks = from book in books
                 join isbn in isbnBooks on book.Isbn equals isbn
                 select book; 
```

（这两种方法大体上是等价的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:44:28.293

或者，你总是可以这样做：

```
var intersectedBooks = books.Select(book=>book.Isbn).Intersect(isbnBooks); 
```

# r - all.equal.POSIXct 的意外输出

> ID：11293856
> 
> 赞同：9
> 
> 时间：2012-07-02T12:38:56.000
> 
> 标签：r, posixct

我从 R 中的 all.equal 方法得到了意外的输出，特别是 POSIXct 的实现，all.equal.POSIXct。

```
t <- Sys.time()
isTRUE(all.equal(t, t+1)) 
```

返回 TRUE，并且

```
isTRUE(all.equal(t, t+1, scale = 1)) 
```

返回 FALSE。

但是，如果查看 all.equal.POSIXct 的定义，可以看到 scale 参数的默认值为 1：

```
> all.equal.POSIXct
function (target, current, ..., scale = 1) 
{
    check_tzones(target, current)
    NextMethod("all.equal")
}
<bytecode: 0x22eac90>
<environment: namespace:base> 
```

如果显式调用 all.equal.POSIXct 而不是 all.equal，则会得到相同的结果。

为什么在第一次调用 all.equal.POSIXct 时没有选择默认参数 scale = 1？我做错了什么，还是我从根本上误解了某些东西，或者这是一个错误？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T12:56:49.857

我在这里有点小题大做，但我认为你发现了一个错误。

这是我建议的修复：

```
all.equal.POSIXct <- function (target, current, ..., scale = 1) {
  check_tzones(target, current)
  NextMethod("all.equal", scale=scale, ...)
} 
```

然后该函数给出正确的结果：

```
all.equal(t, t+1)
[1] "Mean scaled difference: 1"

all.equal(t, t+1, scale=10)
[1] "Mean scaled difference: 0.1" 
```

* * *

这就是现有代码不起作用的原因：

的定义`all.equal`是：

```
all.equal <- function (target, current, ...) UseMethod("all.equal") 
```

*   请注意，有三个参数`target`：`current`和`...`。

*   因此，每当您使用`NextMethod`这三个参数时，都会将其传递给下一个方法。

*   但是，在`all.equal.POSIXct`存在附加参数的情况下，`scale=`它不会被隐式或显式传递。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T12:55:53.197

看起来像一个错误。我不是方法调度方面的专家，但需要将`?NextMethod`建议的快速阅读添加到调用中：`scale=scale``NextMethod``all.equal.POSIXct`

```
all.equal.POSIXct <-
function (target, current, ..., scale = 1) 
{
    check_tzones(target, current)
    NextMethod("all.equal", scale=scale)
} 
```

# javascript - 在 Node.js 中复制文件的最快方法

> ID：11293857
> 
> 赞同：567
> 
> 时间：2012-07-02T12:38:56.267
> 
> 标签：javascript, node.js

我正在处理的项目（Node.js）意味着对文件系统的大量操作（复制、读取、写入等）。

哪些方法最快？

* * *

## 回答 #1

> 赞同：853
> 
> 时间：2012-07-02T13:52:46.980

使用标准的内置方式[`fs.copyFile`](https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback)：

```
const fs = require('fs');

// File destination.txt will be created or overwritten by default.
fs.copyFile('source.txt', 'destination.txt', (err) => {
  if (err) throw err;
  console.log('source.txt was copied to destination.txt');
}); 
```

如果您必须支持 Node.js 的旧版本 - 以下是您在不支持的版本中执行此操作的方法`fs.copyFile`：

```
const fs = require('fs');
fs.createReadStream('test.log').pipe(fs.createWriteStream('newLog.log')); 
```

* * *

## 回答 #2

> 赞同：297
> 
> 时间：2013-01-17T20:45:13.053

相同的机制，但这增加了错误处理：

```
function copyFile(source, target, cb) {
  var cbCalled = false;

  var rd = fs.createReadStream(source);
  rd.on("error", function(err) {
    done(err);
  });
  var wr = fs.createWriteStream(target);
  wr.on("error", function(err) {
    done(err);
  });
  wr.on("close", function(ex) {
    done();
  });
  rd.pipe(wr);

  function done(err) {
    if (!cbCalled) {
      cb(err);
      cbCalled = true;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：148
> 
> 时间：2014-08-20T15:17:25.357

`createReadStream/createWriteStream`由于某种原因，我无法使该方法正常工作，但使用[fs-extra](https://www.npmjs.org/package/fs-extra) npm 模块它立即工作。我不确定性能差异。

`npm install --save fs-extra`

```
var fs = require('fs-extra');

fs.copySync(path.resolve(__dirname, './init/xxx.json'), 'xxx.json'); 
```

* * *

## 回答 #4

> 赞同：146
> 
> 时间：2017-09-16T12:06:05.527

从 Node.js 8.5.0 开始，我们有了新的[**fs.copyFile**](https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback)和[**fs.copyFileSync**](https://nodejs.org/api/fs.html#fs_fs_copyfilesync_src_dest_flags)方法。

使用示例：

```
var fs = require('fs');

// File "destination.txt" will be created or overwritten by default.
fs.copyFile('source.txt', 'destination.txt', (err) => {
    if (err) 
        throw err;
    console.log('source.txt was copied to destination.txt');
}); 
```

* * *

## 回答 #5

> 赞同：76
> 
> 时间：2015-05-22T20:07:23.597

快速编写和方便使用，具有承诺和错误管理：

```
function copyFile(source, target) {
  var rd = fs.createReadStream(source);
  var wr = fs.createWriteStream(target);
  return new Promise(function(resolve, reject) {
    rd.on('error', reject);
    wr.on('error', reject);
    wr.on('finish', resolve);
    rd.pipe(wr);
  }).catch(function(error) {
    rd.destroy();
    wr.end();
    throw error;
  });
} 
```

与 async/await 语法相同：

```
async function copyFile(source, target) {
  var rd = fs.createReadStream(source);
  var wr = fs.createWriteStream(target);
  try {
    return await new Promise(function(resolve, reject) {
      rd.on('error', reject);
      wr.on('error', reject);
      wr.on('finish', resolve);
      rd.pipe(wr);
    });
  } catch (error) {
    rd.destroy();
    wr.end();
    throw error;
  }
} 
```

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2014-02-22T21:15:26.077

好吧，通常最好避免异步文件操作。这是简短的（即没有错误处理）同步示例：

```
var fs = require('fs');
fs.writeFileSync(targetFile, fs.readFileSync(sourceFile)); 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2017-01-07T02:58:25.773

如果您不关心它是异步的，并且不复制千兆字节大小的文件，并且宁愿不为单个函数添加另一个依赖项：

```
function copySync(src, dest) {
  var data = fs.readFileSync(src);
  fs.writeFileSync(dest, data);
} 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2014-02-24T18:23:40.193

Mike Schilling 的错误处理解决方案，带有错误事件处理程序的快捷方式。

```
function copyFile(source, target, cb) {
  var cbCalled = false;

  var rd = fs.createReadStream(source);
  rd.on("error", done);

  var wr = fs.createWriteStream(target);
  wr.on("error", done);
  wr.on("close", function(ex) {
    done();
  });
  rd.pipe(wr);

  function done(err) {
    if (!cbCalled) {
      cb(err);
      cbCalled = true;
    }
  }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-08-10T13:20:03.720

```
 const fs = require("fs");
   fs.copyFileSync("filepath1", "filepath2"); //fs.copyFileSync("file1.txt", "file2.txt"); 
```

这是我个人用来复制文件并使用 Node.js 替换另一个文件的方法 :)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-12-17T15:20:37.817

您可能想要使用 async/await，因为`node v10.0.0`它可以使用内置的`fs Promises API`.

例子：

```
const fs = require('fs')

const copyFile = async (src, dest) => {
  await fs.promises.copyFile(src, dest)
} 
```

笔记：

> 截至`node v11.14.0, v10.17.0`API 不再是实验性的。

更多信息：

[承诺 API](https://nodejs.org/api/fs.html#fs_fs_promises_api)

[承诺复制文件](https://nodejs.org/api/fs.html#fs_fspromises_copyfile_src_dest_mode)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-17T11:20:33.307

**使用 Node.js 内置的复制功能**

它提供异步和同步版本：

```
const fs = require('fs');

// File "destination.txt" will be created or overwritten by default.
fs.copyFile('source.txt', 'destination.txt', (err) => {
  if (err) 
      throw err;
  console.log('source.txt was copied to destination.txt');
}); 
```

*[fs.copyFileSync(src, dest[, mode])](https://nodejs.org/api/fs.html#fs_fs_copyfilesync_src_dest_mode)*

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-02-25T11:07:24.947

对于快速副本，您应该使用`fs.constants.COPYFILE_FICLONE`标志。它允许（对于支持此功能的文件系统）实际上不复制文件的内容。只创建了一个新文件条目，但它指向源文件的“[写入时](https://en.wikipedia.org/wiki/Copy_on_write#In_computer_storage)复制”“克隆”。

什么都不做/少做是做某事的最快方式；）

[https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback](https://nodejs.org/api/fs.html#fs_fs_copyfile_src_dest_flags_callback)

```
let fs = require("fs");

fs.copyFile(
  "source.txt",
  "destination.txt",
  fs.constants.COPYFILE_FICLONE,
  (err) => {
    if (err) {
      // TODO: handle error
      console.log("error");
    }
    console.log("success");
  }
); 
```

改为使用承诺：

```
let fs = require("fs");
let util = require("util");
let copyFile = util.promisify(fs.copyFile);

copyFile(
  "source.txt",
  "destination.txt",
  fs.constants.COPYFILE_FICLONE
)
  .catch(() => console.log("error"))
  .then(() => console.log("success")); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-23T10:02:51.983

你可以`fs-extra`很容易地使用该模块来做到这一点：

```
const fse = require('fs-extra');

let srcDir = 'path/to/file';
let destDir = 'pat/to/destination/directory';

fse.moveSync(srcDir, destDir, function (err) {

    // To move a file permanently from a directory
    if (err) {
        console.error(err);
    } else {
        console.log("success!");
    }
}); 
```

***或者***

```
fse.copySync(srcDir, destDir, function (err) {

     // To copy a file from a directory
     if (err) {
         console.error(err);
     } else {
         console.log("success!");
     }
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-11T10:29:25.830

我写了一个小工具来测试不同的方法：

[https://www.npmjs.com/package/copy-speed-test](https://www.npmjs.com/package/copy-speed-test)

运行它

```
npx copy-speed-test --source someFile.zip --destination someNonExistentFolder 
```

它使用 child_process.exec() 进行本机复制，使用 fs.copyFile 进行复制文件，并使用具有各种不同缓冲区大小的 createReadStream（您可以通过在命令行上传递它们来更改缓冲区大小。运行 npx copy-speed-测试 -h 了解更多信息）。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-05-30T06:17:50.467

[迈克的解决方案](https://stackoverflow.com/a/14387791/65387)，但承诺：

```
const FileSystem = require('fs');

exports.copyFile = function copyFile(source, target) {
    return new Promise((resolve,reject) => {
        const rd = FileSystem.createReadStream(source);
        rd.on('error', err => reject(err));
        const wr = FileSystem.createWriteStream(target);
        wr.on('error', err => reject(err));
        wr.on('close', () => resolve());
        rd.pipe(wr);
    });
}; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-07-15T03:12:39.173

改进另一个答案。

特征：

*   如果 dst 文件夹不存在，它会自动创建它。另一个答案只会抛出错误。
*   它返回 a `promise`，这使得它更容易在更大的项目中使用。
*   它允许您复制*多个*文件，并且当所有文件都被复制时，承诺将完成。

用法：

```
var onePromise = copyFilePromise("src.txt", "dst.txt");
var anotherPromise = copyMultiFilePromise(new Array(new Array("src1.txt", "dst1.txt"), new Array("src2.txt", "dst2.txt"))); 
```

代码：

```
function copyFile(source, target, cb) {
    console.log("CopyFile", source, target);

    var ensureDirectoryExistence = function (filePath) {
        var dirname = path.dirname(filePath);
        if (fs.existsSync(dirname)) {
            return true;
        }
        ensureDirectoryExistence(dirname);
        fs.mkdirSync(dirname);
    }
    ensureDirectoryExistence(target);

    var cbCalled = false;
    var rd = fs.createReadStream(source);
    rd.on("error", function (err) {
        done(err);
    });
    var wr = fs.createWriteStream(target);
    wr.on("error", function (err) {
        done(err);
    });
    wr.on("close", function (ex) {
        done();
    });
    rd.pipe(wr);
    function done(err) {
        if (!cbCalled) {
            cb(err);
            cbCalled = true;
        }
    }
}

function copyFilePromise(source, target) {
    return new Promise(function (accept, reject) {
        copyFile(source, target, function (data) {
            if (data === undefined) {
                accept();
            } else {
                reject(data);
            }
        });
    });
}

function copyMultiFilePromise(srcTgtPairArr) {
    var copyFilePromiseArr = new Array();
    srcTgtPairArr.forEach(function (srcTgtPair) {
        copyFilePromiseArr.push(copyFilePromise(srcTgtPair[0], srcTgtPair[1]));
    });
    return Promise.all(copyFilePromiseArr);
} 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2017-08-10T16:06:29.147

以前所有不检查源文件是否存在的解决方案都是危险的......例如，

```
fs.stat(source, function(err,stat) { if (err) { reject(err) } 
```

否则，如果源和目标被错误地替换，您的数据将永久丢失，而不会注意到任何错误。

# c# - 我可以将一个方法分配给多个基于表单的事件吗？

> ID：11293859
> 
> 赞同：3
> 
> 时间：2012-07-02T12:39:01.883
> 
> 标签：c#, winforms, delegates, controls

我正在构建一个表单，它有几个 numericUpDown 控件、几个复选框控件和一些文本框等。每个控件都有一个触发的事件方法（CheckedChanged、ValueChanged 等），但我的主要问题是：

我想要做的是运行一个方法来更新我表单上的文本字段，但目前我只重复了 24 次。这可行，但我觉得必须有更好的方法......下面是我到目前为止的一个例子。

```
 private void button3_Click(object sender, EventArgs e)
    {
    // Code Specific to the Buton3_Click
    UpdateTextLabel();
    }
    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
    // Code Specific to the checkBox1_CheckChanged
    UpdateTextLabel();
    }
    private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
    // numericUpDown1 specific code ....
    UpdateTextLabel();
    }
    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
    // comboBox1 specific stuff ...
    UpdateTextLabel();
    }
   // .... and so on for every method .... 
```

有没有更好的方法来实现这一目标？我想说“如果单击或更改了任何控件……请执行此“UpdateTextLabel()”操作”，但不知道该怎么做。很高兴被引导到答案，因为我在搜索中输入的问题似乎不是“正确的问题”......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:41:23.243

当然！您可以使用 lambdas 轻松处理未使用的参数：

```
button3.Click += (sender, args) => UpdateTextLabel();
checkBox1.CheckedChanged += (sender, args) => UpdateTextLabel();
numericUpDown1.ValueChanged += (sender, args) => UpdateTextLabel();
comboBox1.SelectedIndexChanged += (sender, args) => UpdateTextLabel(); 
```

或者正如一些开发人员的趋势，如果您不关心 args，您可以使用下划线“忽略”它们以提高可读性：

```
button3.Click += (_, __) => UpdateTextLabel();
checkBox1.CheckedChanged += (_, __) => UpdateTextLabel();
numericUpDown1.ValueChanged += (_, __) => UpdateTextLabel();
comboBox1.SelectedIndexChanged += (_, __) => UpdateTextLabel(); 
```

正如强大的 Jon Skeet 曾经教过我的那样，这远远优于 CONTROLNAME_EVENTNAME 的默认 Visual Studio 命名方案，因为您可以轻松阅读“当单击按钮 3 时，更新文本标签”或“当组合框更改时，更新文字标签”。它还释放了您的代码文件以消除一堆无用的方法包装器。:)

编辑：如果你让它重复 24 次，从设计的角度来看，这似乎有点奇怪。...*再次阅读*哦，该死的。我错过了评论，您想运行特定代码*以及*更新文本框。好吧，您*可以*注册多个事件：

```
button3.Click += (_, __) => SubmitForm();
button3.Click += (_, __) => UpdateTextLabel(); 
```

问题在于，从*技术上讲*，事件侦听器不能保证按顺序触发。但是，对于这个简单的案例（特别是如果您不使用`-=`和组合事件处理程序），您应该可以很好地维护执行顺序。（我假设你需要在*之后*`UpdateTextLabel`开火） *`SubmitForm`*

 *或者您可以将`UpdateTextLabel`调用移动到您的按钮处理程序中：

```
button3.Click += (_, __) => SubmitForm();

private void SubmitForm(object sender, EventArgs e)
{
    //do submission stuff
    UpdateTextLabel();
} 
```

这有点让你陷入同一条船上（尽管有更好的方法命名）。也许相反，您应该将`UpdateTextLabel`表单移入一般的“重新绑定”：

```
button3.Click += (_, __) => SubmitForm();

private void SubmitForm(object sender, EventArgs e)
{
    //do submission stuff
    Rebind();
}

private void Rebind()
{
    GatherInfo();
    UpdateTextLabel();
    UpdateTitles();
} 
```

这样，如果您除了更新文本标签之外还需要做额外的工作，那么您的所有代码都会调用一般`Rebind`（或任何您想调用的名称）并且更容易更新。

EDITx2：我意识到，另一种选择是使用面向方面的编程。[使用PostSharp 之](http://www.sharpcrafters.com/)类的东西，您可以修饰方法来执行编译后的特殊代码。我 99% 确定 PostSharp 允许您附加到事件（尽管我从未专门这样做过）：

```
button3.Click += (_, __) => SubmitForm();

[RebindForm]
private void SubmitForm(object sender, EventArgs e)
{
    //do submission stuff
}

[Serializable]
public class RebindFormAttribute : OnMethodBoundaryAspect
{
    public override void OnSuccess( MethodExecutionArgs args )
    {
        MyForm form = args.InstanceTarget as MyForm; //I actually forgot the "InstanceTarget" syntax off the top of my head, but something like that is there
        if (form != null)
        {
            form.Rebind();
        }
    }
} 
```

因此，即使我们没有在任何地方显式调用，只要方法成功调用`Rebind()`，属性和面向方面编程最终都会在那里运行额外的代码。`OnSuccess`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:57:45.987

是的，任何控件的任何事件都可以共享相同的事件处理程序方法，只要它们的事件处理程序委托相同，在这种情况下，这些控件的事件处理程序委托都是“EventHandler”类型（无返回值和 2 个参数） : 对象发送者和 EventArgs e)。

```
private void UpdateTextLabel(object sender, EventArgs e)
{
    //your original UpdateTextLabel code here
}

button3.Click += UpdateTextLabel;
checkBox1.CheckedChanged += UpdateTextLabel;
numericUpDown1.ValueChanged += UpdateTextLabel;
comboBox1.SelectedIndexChanged += UpdateTextLabel; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:54:40.317

是的，您不想编写这样的代码。您不必这样做，Application.Idle 事件是更新 UI 状态的理想选择。它每次在 Winforms 从消息队列中检索到所有待处理消息后运行。所以保证在您当前订阅的任何事件之后运行。让它看起来像这样：

```
 public Form1() {
        InitializeComponent();
        Application.Idle += UpdateTextLabel;
        this.FormClosed += delegate { Application.Idle -= UpdateTextLabel; };
    }

    void UpdateTextLabel(object sender, EventArgs e) {
        // etc..
    } 
```*

# android - ExpandableListItem 展开时的状态

> ID：11293861
> 
> 赞同：0
> 
> 时间：2012-07-02T12:39:04.443
> 
> 标签：android, expandablelistview

我需要知道如何在实际展开时更改展开列表项的背景。我们有 ListItem 展开并打开另一个项目，但我们仍然看到这个父项目。我需要改变它的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T10:59:47.107

我有点晚了，但我们可以使用`BaseExpandableListAdapter`方法更改组视图的 ce 布局

```
@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) 
```

实际上，当组状态更改（展开/折叠）时会调用此方法。使用布尔值`isExpanded`，您可以调用组视图的刷新 UI 方法。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T14:01:40.410

使用监听器来改变它们。

```
listView.setOnGroupExpandListener(new OnGroupExpandListener() { 
    @Override 
    public void onGroupExpand(int groupPosition) { 
        // code to set your background to your expanded color
    } 
}); 

listView.setOnGroupCollapseListener(new OnGroupCollapseListener() { 
    @Override 
    public void onGroupCollapse(int groupPosition) { 
        // code to set your background back to your collapsed color
    } 
}); 
```

# android - 如何有一个圆形的TextView

> ID：11293866
> 
> 赞同：16
> 
> 时间：2012-07-02T12:39:14.427
> 
> 标签：android, android-layout, textview

我一直在尝试制作一个循环`TextView`。它是一个圆圈，我想在其中容纳圆形气泡上方的整个空间，如下图所示。

请看附图。

![侧面有文字的圆形气泡](../Images/e40983ab6a7f4475f0a067d769d32f1a.png)

在这张图片中，我们有一个带有圆形文字的圆形气泡。我已经尝试将椭圆形设置`.xml`为背景，`TextView`但仍然没有运气。

编辑：

随着文本长度的增加。它必须缩小尺寸以适合圆圈内。这是最难思考的部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T13:10:31.257

您需要创建一个**自定义视图**，从`TextView`可能扩展，将圆圈设置为背景图像，并根据文本的宽度手动计算文本宽度/换行。

要计算字符串的宽度，请参阅[如何以像素为单位计算字符串字体宽度？](https://stackoverflow.com/questions/6360089/how-to-calculate-string-font-width-in-pixels)

当然需要一些数学和计算来测量每行的可用空间；但我认为这是唯一的方法，因为没有标准组件可以做到这一点。

要将文本放置到视图上，`drawText`请使用[`Canvas`class](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.String,%20float,%20float,%20android.graphics.Paint%29)。

# android - 为什么这些自定义字体会使我的 Android 应用程序崩溃？

> ID：11293869
> 
> 赞同：1
> 
> 时间：2012-07-02T12:39:22.973
> 
> 标签：android

我的 Android 应用程序在 2.1、2.2 和最高 3 版本中正常运行。由于自定义字体，该应用程序在 4.0 和 4.1 中崩溃。如何解决？

```
 Typeface font2 = Typeface.createFromAsset(getAssets(), "fonts/Helvitica.ttf");       
   TextView customText1 = (TextView)findViewById(R.id.splashtext1);
   customText1.setTypeface(font2); 
```

# python - 如何在 django 中按应用程序订购片段？

> ID：11293872
> 
> 赞同：1
> 
> 时间：2012-07-02T12:39:33.127
> 
> 标签：python, django, templates

我有一个包含许多应用程序的站点，每个应用程序都在侧边栏上提供一个部分。假设一个应用程序是“公司”，提供公司管理（列表、添加、删除），一个是“员工”，允许员工管理。

“公司”提供了一个部分：

```
<div id="companies-sidebar">
  <ul>
    <li><a href="{% url 'company_add' %}">Add</a></li>
    <li><a href="{% url 'company_remove' %}">Remove</a></li>
    <li><a href="{% url 'company_list' %}">List</a></li>
  </ul>
</div> 
```

“员工”也一样，`employees_`分别带有 URL。

我想根据应用程序在侧边栏部分订购两个片段。如果我在例如`company_list`（或`..._remove`或`add`）的视图中，那么`companies_sidebar`片段应该是第一个。如果我在对应的视图中`employees_...`，那么`employees_sidebar`应该是第一个。

问题是：如何在不使用可包含片段淹没模板的情况下做到这一点？

一些注意事项：

*   我知道这不是一个正常的 UX 模式，其中项目会更改顺序。
*   一种解决方案是为每个应用程序使用自定义（base.html？）模板，并相应地更改项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:43:10.357

编写一个自定义模板标签，`{% sidebar_snippets appname %}`将当前应用名称作为参数。然后在实现 sidebar_snippets 的 Python 中，您可以按照自己喜欢的方式排序。

# c++ - 在 C++ 中避免“已经在 ... 中定义”错误/警告无类变量

> ID：11293874
> 
> 赞同：3
> 
> 时间：2012-07-02T12:39:35.507
> 
> 标签：c++, warnings

我有在 Utility 命名空间中定义的全局变量。该实用程序包含在多个文件中，如下所示：

```
#ifndef _UT_
#define _UT_
namespace UT {
  std::string PLATFORM_LINUX_NAME = "linux";
  std::string  PLATFORM_MACOSX_NAME = "macosx";
  std::string  PLATFORM_WINDOWS_NAME = "windows";
  #if defined(OS_WIN)
    int PLATFORM = OSTYPE::PLATFORM_WINDOWS;
  #elif defined(OS_LINUX)
    int PLATFORM = PLATFORM_LINUX;
  #elif defined(OS_APPLE)
    int PLATFORM = PLATFORM_MACOSX;
  #endif
}; 
```

当我将此文件包含在例如文件 Ah 和 Bh 和 Ch 中时，我收到一个编译器警告，上面写着：

```
warning LNK4006: "int UT::PLATFORM" (?PLATFORM@UT@@3HA) already defined in A.obj; second definition ignored
warning LNK4006: "class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > UT::PLATFORM_LINUX_NAME" (?PLATFORM_LINUX_NAME@UT@@3V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A) already defined in A.obj; second definition ignored 
```

不涉及创建一个类来解决这个问题的最佳方法是什么？还是创建一个 UT 类是唯一的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T12:43:16.717

在单个`.cpp`文件中定义变量并在文件中声明它们`.h`。在`UT.h`：

```
namespace UT
{
    extern const std::string PLATFORM_LINUX_NAME;
    extern const std::string PLATFORM_MACOS_NAME;
    extern const std::string PLATFORM_WINDOWS_NAME;
    extern const int PLATFORM;
} 
```

在`UT.cpp`：

```
namespace UT
{
    const std::string PLATFORM_LINUX_NAME   = "linux";
    const std::string PLATFORM_MACOS_NAME   = "macosx";
    const std::string PLATFORM_WINDOWS_NAME = "windows";

    #if defined(OS_WIN)
    const int PLATFORM = OSTYPE::PLATFORM_WINDOWS;
    #elif defined(OS_LINUX)
    const int PLATFORM = PLATFORM_LINUX;
    #elif defined(OS_APPLE)
    const int PLATFORM = PLATFORM_MACOSX;
    #endif

} 
```

我添加了`const`限定符，因为这些似乎是常量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:43:29.473

一种解决方案是将它们全部设为静态，在这种情况下，每个目标文件都有自己的副本。另一种可能性是仅将声明放在标题中并将定义放在单独的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:47:20.243

尝试

```
#ifndef _INCL_GUARD
#define _INCL_GUARD

std::string PLATFORM_LINUX_NAME     = "linux";
std::string  PLATFORM_MACOSX_NAME   = "macosx";
std::string  PLATFORM_WINDOWS_NAME  = "windows";

#if defined(OS_WIN)
    int PLATFORM = OSTYPE::PLATFORM_WINDOWS;
#elif defined(OS_LINUX)
    int PLATFORM = PLATFORM_LINUX;
#elif defined(OS_APPLE)
    int PLATFORM = PLATFORM_MACOSX;
#endif

#endif 
```

# android - 在 ListView 中选择项目崩溃程序

> ID：11293875
> 
> 赞同：1
> 
> 时间：2012-07-02T12:39:36.827
> 
> 标签：android, mysql, listview

我有一个 ListView，它允许我选择我喜欢的图片，它工作得很好，但问题是当我选择其他图片时它会崩溃，我收到这个我不明白的错误消息，这些图片来自 MySql数据库。

> 适配器的内容发生了变化，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在 ListView(16908298, class android.widget.ListView) with Adapter(class car.store.carstore.MobileArrayAdapter)]

提前谢谢。

MyAdapter 看起来像这样

```
public class MobileArrayAdapter extends ArrayAdapter<String> {

    private final Context context;
    private final String[] MyCarList = null;
    private ArrayList<String> MyCar = new ArrayList<String>();
    private ArrayList<String> CarImageUrl = new ArrayList<String>();
     //ArrayList<HashMap<String, String>> MyCarList = new ArrayList<HashMap<String, String>>();
     //ArrayList<HashMap<String, String>> CarImageUrl = new ArrayList<HashMap<String, String>>();

    public MobileArrayAdapter(Context context,ArrayList<String> Bname,ArrayList<String> BUrl) {
        super(context, R.layout.list_mobile, Bname);
        this.context = context;
        this.MyCar = Bname;
        this.CarImageUrl = BUrl;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(MyCar.get(position));
        Bitmap bitmap = null;
        // Change icon based on name
        JSONObject json = JSONfunctions.getJSONfromURL("http://10.0.2.2/php/car.php");
           // http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo  
            try{                
                JSONArray  earthquakes = json.getJSONArray("cars");

                //for(position=0;position<earthquakes.length();position++){
                    JSONObject e = earthquakes.getJSONObject(position);
                    String BB = e.getString("carname");
                    MyCar.add(BB);

                    String UU = e.getString("carimage");
                    CarImageUrl.add(UU);

                //}

            }catch(JSONException e){
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }

            String s = MyCar.get(position);
            String i = CarImageUrl.get(position);

            System.out.println(s);
            System.out.println(i);

            try {
                bitmap = BitmapFactory.decodeStream((InputStream)new URL(i).getContent());
            } catch (MalformedURLException err) {
                // TODO Auto-generated catch block
                err.printStackTrace();
            } catch (IOException err) {
                // TODO Auto-generated catch block
                err.printStackTrace();
            }

            //if (!s.equals("")) {
                imageView.setImageBitmap(bitmap);
            //} else {
            System.out.println("Bitmap image: "+position+"="+bitmap);
                //imageView.setImageResource(R.drawable.android_logo);
            //}

        return rowView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:43:47.627

尝试在将项目添加到列表时调用 notifyDataSetChanged()，requestLayout() 也可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:09:00.997

你做错了首先从webservices获取所有值然后把它给适配器ok

# objective-c - 在 iPad 应用程序中维护 wikitext 和 Richtext 编辑模式

> ID：11293876
> 
> 赞同：1
> 
> 时间：2012-07-02T12:39:38.067
> 
> 标签：objective-c, ipad, ios5

我正在设计一个 iPad 应用程序，其中我有一个 textView 和其他东西。在那个 textView 中，我目前正在渲染 wikitext。我已经使用附件视图在编辑器中实现了粗体、斜体等基本功能。

* * *

现在，我想为用户提供另一种编辑富文本的模式。富文本编辑将在 Web 视图中完成（尚未实现）。我面临的问题是我不知道如何让两种模式下的文本保持同步，以便当用户从一个模式跳转到另一个模式时，他能够立即看到在另一种模式下所做的更改。有人可以就此提出一些线索吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:18:48.550

只要用户在 TextView 中键入内容，就可以从使用同步到`UITextView`触发`UIWebView`事件。`UITextViewDelegate`更大的问题是`UIWebView`您需要检查其源代码以检查更改，然后将它们同步到`UITextView`.

下一个最好的可能性是等待提供样式文本的 iOS 6，但 iOS 6 仍处于 NDA 之下，因此没有人会为您提供帮助。

# c++ - C++ 编译器如何支持 C++11 原子，但不支持 C++11 内存模型

> ID：11293885
> 
> 赞同：32
> 
> 时间：2012-07-02T12:40:16.057
> 
> 标签：c++, compiler-construction, c++11, memory-model

在查看 Clang 和 g++ C++11 实现状态时，我注意到一些奇怪的事情：
它们支持 C++11 原子，但它们不支持 C++11 内存模型。
我的印象是你必须有 C++11 内存模型才能使用原子。那么对原子和内存模型的支持到底有什么区别呢？
缺乏内存模型支持是否意味着使用`std::atomic<T>`arent seq 的合法 C++11 程序一致？

参考资料：
[http ://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)
[http://gcc.gnu.org/gcc-4.7/cxx0x_status.html](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T09:43:55.620

问题之一是“内存位置”的定义，它允许（并强制编译器支持）通过不同的锁锁定不同的结构成员。有一个[关于由此引起的 RL 问题](http://gcc.gnu.org/ml/gcc/2012-02/msg00005.html)的讨论。

基本上问题在于有这样的`struct`定义：

```
struct x {
    long a;
    unsigned int b1;
    unsigned int b2:1;
}; 
```

`b2`编译器也可以通过覆盖自由地实现写入`b1`（显然，从报告来看，确实如此）。因此，必须将这两个字段锁定为一个。然而，作为 C++11 内存模型的结果，这是被禁止的（好吧，并不是真的被禁止，但编译器必须确保同时更新`b1`并且`b2`不干扰；它可以通过锁定或对每个此类更新进行 CAS 处理来做到这一点，好吧，在某些架构上生活很困难）。引用报告：

> 我向我们的 GCC 人员提出了这个问题，他们对我说：“C 不提供这样的保证，如果它们共享自然对齐的字长内存区域，你也不能用不同的锁可靠地锁定不同的结构字段。C+ +11 内存模型可以保证这一点，但这没有实现，也没有使用 C++11 编译器构建内核。”

很好的信息也可以在[wiki](http://gcc.gnu.org/wiki/Atomic/GCCMM)中找到。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T17:12:00.093

我猜这些情况下的“缺少内存模型”只是意味着优化器是在 C++11 内存模型发布之前编写的，并且现在可能执行无效的优化。验证针对内存模型的优化非常困难且耗时，因此 clang/gcc 团队尚未完成这一点也就不足为奇了。

> 缺乏内存模型支持是否意味着使用 std::atomic 的合法 C++11 程序与 seq 不一致？

是的，这是一种可能。更糟糕的是：编译器可能会将数据竞争引入（根据 C++11 标准）无竞争程序，例如通过引入推测写入。

例如，用于执行此优化的几个 C++ 编译器：

```
for (p = q; p = p -> next; ++p) {
    if (p -> data > 0) ++count;
} 
```

可以优化为：

```
register int r1 = count;
for (p = q; p = p -> next; ++p) {
    if (p -> data > 0) ++r1;
}
count = r1; 
```

如果`p->data`都是非负数，则原始源代码没有写入`count`，但优化后的代码会写入。这可能会在其他无竞争的程序中引入数据竞争，因此 C++11 规范不允许此类优化。现有编译器现在必须验证（并在必要时调整）所有优化。

有关详细信息，请参阅[并发内存模型编译器后果](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2338.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:55:15.560

与其说他们不支持内存模型，不如说他们（还）不支持标准中用于与内存模型交互的 API。该 API 包含许多互斥锁。

然而，一段时间以来，Clang 和 GCC 在没有正式标准的情况下尽可能地了解线程。您不必担心优化会将事情转移到原子操作的错误方面。

# jasper-reports - 使用文本字段设置粗体，并使用字符串“&”设置粗体 pdf

> ID：11293887
> 
> 赞同：1
> 
> 时间：2012-07-02T12:40:24.077
> 
> 标签：jasper-reports, ireport

我试图在与参数（noCurso）连接的文本字段的某些部分设置粗体，但是当这个参数带有字符“&”时，我的 pdf 打印会被刮掉。

除了以粗体显示文本外，这还会打印粗体样式标签。当参数不带“&”时有效

请参阅下面我的文本字段

"Eu, "+$P{noAluno}.toUpperCase()+", portador(a) da Cédula de Identidade número "+$P{nuRg}+", declaro, sob as penas da lei, que entregarei todos os documentos necessários para a efetivação da matrícula no curso "+$P{noCurso}.toUpperCase()+"。"

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:13:14.873

您可以使用 apache commons library 方法来转义参数中的特殊字符：

```
org.apache.commons.lang.StringEscapeUtils.escapeHtml($P{noCurso}).toUpperCase() 
```

更多关于这个问题的信息可以在[JasperForge iReport 论坛](http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=64104&topid=64380)中找到。

可以在[此处](http://commons.apache.org/lang/api-2.4/index.html)找到 Apache Commons Lang API 。特别是，您需要在[此处](http://commons.apache.org/lang/download_lang.cgi/download_lang.cgi)下载 commons-lang 库。

# regex - 基于 IFS 格式化文件

> ID：11293889
> 
> 赞同：1
> 
> 时间：2012-07-02T12:40:30.603
> 
> 标签：regex, bash, sed, awk

我`sed`用来将文件的内容连接为：

```
 cat source.c |  sed -e :a -e '$!N; s/\n/ /; ta' 
```

该文件包含由管道分隔的相关信息[一系列字符串] `|`。我想将其更改`IFS`为管道`|`并获取输出可能是通过管道传输到新的，`IFS`从而将新的格式化文件显示到标准输出。

连接后的 source.c 实例：

```
 void f0 (***) | void f1 (***) | void f2 (***)| void f3 (***) 
```

我希望通过设置来实现`IFS`：

```
 void f0 (***)
    void f1 (***)
    void f2 (***)
    void f3 (***) 
```

提前感谢您的回复。我不确定文件是否可能，我不想在这里涉及变量或数组。

编辑：源文件在开始时出现了一些类似这样的内容：

```
 void 
          f0 
         (***) |
    void 
               f1
                              (***) |
                   void                   f2                    (***) |
    void             f3                                                (***) 
```

所以首先我连接然后我将每个单词组加倍空格，然后使用管道作为分隔符进行拆分。

```
sed -e :a -e '$!N; s/\n/ /; ta' source.c | sed -e 's/  */  /g' -e 's/ *//' 
```

`sed`和 `awk`替代品完美地完成了这项工作。

根据第一次编辑时的赞成票选择的答案:)。正如其中一个答案所建议的那样，我将保持问题不变，以便其他人找到这些简单的替代方案，而不是弄乱`IFS`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:52:01.013

如果这正是您想要的，只需替换 '|' 用换行符。

```
echo 'void f0 (***) | void f1 (***) | void f2 (***)| void f3 (***) ' | sed 's, *| *,\n,g' 
```

或使用您的命令：

```
sed -e :a -e '$!N; s/\n/ /; ta' source.c | sed 's, *| *,\n,g' 
```

弄乱 shell 的 IFS 会给你带来非常模糊的问题。不过，弄乱 awk 不是问题：

```
echo 'void f0 (***) | void f1 (***) | void f2 (***)| void f3 (***) ' | awk 'BEGIN {RS="|";} { print $0}'
sed -e :a -e '$!N; s/\n/ /; ta' source.c | awk 'BEGIN {RS="|";} { print $0}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T12:55:52.637

```
$ cat source.c | awk 'BEGIN{ RS="|" } {$1=$1; print $0}' 
```

如果您将连接的输出通过管道传输到此`awk`脚本，它将将管道分隔符更改为换行符。

* * *

```
$ cat test
void f0 (***) | void f1 (***) | void f2 (***)| void f3 (***)

$ cat test | awk 'BEGIN{ RS="|" } {$1=$1; print $0}'
void f0 (***)
void f1 (***)
void f2 (***)
void f3 (***) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:41:00.523

```
your_pipeline | awk 'BEGIN{RS="\\| |\n";ORS="\n"}1' 
```

输入记录分隔符是一个文字管道，后跟一个空格或换行符。输出记录分隔符是换行符。是“`1`真”，导致`$0`被打印。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T13:33:46.503

你为什么还要为此烦恼 sed/awk？如果我正确阅读了这个问题，您只想删除所有换行符并将所有换行符替换`|`为换行符。

```
tr -d \\n | tr \| \\n 
```

如果您的输入文件不以 结尾`|`，则不会打印终止换行符；在这种情况下，总体命令应​​该是：

```
 < source.c tr -d \\n | tr \| \\n; echo 
```

# algorithm - 在最大流量算法中计算过量流量和溢出

> ID：11293890
> 
> 赞同：0
> 
> 时间：2012-07-02T12:40:36.453
> 
> 标签：algorithm, graph-algorithm, max-flow

我正在以下链接阅读推流算法。

[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxflowPushRelabel](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxflowPushRelabel)

提到了多余流量 - 我们将多余流量 e 定义为 e(u) = f(V,u)，即流入 u 的净流量。如果 e(u) > 0，则顶点 u ∊ V-{s,t} 溢出/激活。

我正在寻找简单流网络的示例，我们如何计算 e(u) ？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:38:31.633

在下图中，有一个源节点 (S)、一个汇节点 (T) 和一个内部节点 (A)。

这些数字给出了流量（比如每秒升数）。每秒有 3 升水进入 A，但每秒只有 1 升离开 A，所以 A 的多余流量为 2。

笔记

1.  在 push-relabel 算法中，内部节点的多余流量不能是负数。换句话说，您不允许离开的流量多于进入的流量。

2.  允许源节点*产生*流（不计入内部节点，所以注1不适用）

3.  在算法过程中，多余的流量被减少，直到最后所有的顶点都有 0 多余的流量

4.  您可以通过将所有流入流量相加并减去所有流出流量来计算过剩流量。

5.  但是，在实践中，该算法会维护一组多余的流量，并随着算法的进行更新值。

![简单的流程](../Images/b92cc665f0b7c32111d5afb82b4bd1be.png)

# c# - C# Excel 结果比较

> ID：11293907
> 
> 赞同：0
> 
> 时间：2012-07-02T12:42:08.010
> 
> 标签：c#

我从来没有学习过编程的这方面，但是有没有办法获得excel查询的每个单独的结果（使用OleDB）或类似的东西。

我能想到的唯一方法是在 SQL 语句中使用 INTO 关键字，但这对我不起作用（SELECT 属性 INTO 变量 FROM 表）。

一个例子是使用 select 语句检索客户的 ID，然后将这些 ID 与客户 ListArray 中的客户 ID 进行比较，如果它们匹配，则应比较 clientTotal 订单。

有人可以证明这个问题的一些阅读材料和/或一些示例代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:16:01.230

此代码从 sql 过程中获取行。经过一些修改，可能也会对您有用。

```
 using (var Conn = new SqlConnection(ConnectString))
        {
            Conn.Open();
            try
            {
                using (var cmd = new SqlCommand("THEPROCEDUREQUERY", Conn))
                {
                    cmd.CommandType = CommandType.StoredProcedure;

                    SqlDataReader reader = cmd.ExecuteReader();
                    // Find Id of column in query only once at start
                    var Col1IdOrd = reader.GetOrdinal("ColumnName");
                    var Col2IdOrd = reader.GetOrdinal("ColumnName");
                    // loop through all the rows
                    while (reader.Read())
                    {
                        // get data for each row
                        var Col1 = reader.GetInt32(ColIdOrd);
                        var Col2 = reader.GetDouble(Col2IdOrd);
                        // Do something with data from one row for both columns here
                    }
                }
            }
            finally
            {
                Conn.Close();
            } 
```

# javascript - JQuery：参数：硬编码字符串与 ajax 检索字符串

> ID：11293908
> 
> 赞同：1
> 
> 时间：2012-07-02T12:42:08.300
> 
> 标签：javascript, jquery

我正在尝试预先填充[JQuery 令牌输入](http://loopj.com/jquery-tokeninput/)。

```
var assignUserJson=$('#assignUserJson').val();
console.log(assignUserJson); //[{"id":"1","name":"Andrew"},{"id":"3","name":"John"}] 
```

这是我认为它应该工作的两种方式之间的区别：

```
$('#assignTask').tokenInput('/users/suggest', {prePopulate: assignUserJson}); // doesn't work 
```

这有效：

```
$('#assignTask').tokenInput('/users/suggest', {prePopulate: [{"id":"1","name":"Andrew"},{"id":"3","name":"John"}]}); // works 
```

这是为什么？我不应该能够从隐藏的输入字段中获取值并将其传递给`tokenInput`函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:46:46.163

在您的第一种方法中，`assignUserJson`是一个字符串，而在第二种方法中，它是一个数组对象。客观化第一个应该有效：

```
$('#assignTask').tokenInput('/users/suggest', {prePopulate: JSON.parse(assignUserJson)}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T12:47:37.277

第一种方法传递的是 JSON 字符串，而不是第二种方法中的有形 JS 对象。

您首先需要解析 JSON。这可以在 ECMA5 中本地完成，或者对于较旧的浏览器，可以通过第三方支持完成。

```
$('#assignTask').tokenInput('/users/suggest', {prePopulate: JSON.parse(assignUserJson)}); // doesn't work 
```

# c# - 在 linq 中选择并访问元素

> ID：11293909
> 
> 赞同：0
> 
> 时间：2012-07-02T12:42:08.823
> 
> 标签：c#, linq

我有一个选择`linq`：

如果我必须比较用户名和密码是否允许，但无法访问用户元素。

```
 var user = from u in db.tbl_User select new {u.UserName,u.Password};
 if(txtname == user && txtpass == pass)
            {
            Form2 frm = new Form2();
            Visible = false;
            frm.Show();

            }
            else
            {

               MessageBox.Show("Error","UserName or Password is wrong",MessageBoxButtons.OK);

            } 
```

我怎样才能给元素`user`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:44:10.920

您的`user`变量是一个查询，它返回*一系列*匹配的用户 - 而不是*单个*用户。

听起来您可能想要：

```
var user = db.tbl_User
             .FirstOrDefault(u => u.UserName == txtname.Text
                                  && u.Password == txtPass.Text);
if (user != null)
{
    ...
} 
```

（顺便说一句，我希望你没有*真正*的纯文本密码......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:48:41.827

```
var user = from u in db.tbl_User select new {u.UserName,u.Password};
if(user.Count() != 1)
    return;
if(txtname == user.UserName && txtpass == pass.Password)
{
        Form2 frm = new Form2();
        Visible = false;
        frm.Show();

        }
        else
        {

           MessageBox.Show("Error","UserName or Password is wrong" ,MessageBoxButtons.OK);

} 
```

# asp.net - 无法更新文本框控件值

> ID：11293911
> 
> 赞同：0
> 
> 时间：2012-07-02T12:42:19.527
> 
> 标签：asp.net, gridview, textbox, updates

我真的很沮丧为我的场景找到解决方案。我有两个网格，第一个网格用于显示商店信息，第二个网格用于编辑与商店信息相关的优惠。当用户编辑第二个网格时，我只会更新与网格选择行相关的文本框值。在我的文件后面的代码中，我可以看到从网格中获取数据并分配到文本框中，但是当函数调用（imgEdit_click）完成时，页面不显示值。编辑功能可以通过多种方式完成，但我的场景是我之前解释的。我有检查页面，在我找不到解决方案的方法之后没有调用回发操作，任何人都可以帮我弄清楚。

以下是我的源代码和代码背后的代码。

我的设计来源：

```
<div class="field">

 <asp:TextBox ID="txtareaOfferDesc" runat="server" TextMode="MultiLine" ></asp:TextBox>
                    </div>

<div class="field">
 <asp:TextBox ID="txtTimeStarts" runat="server" CssClass="textfield"></asp:TextBox>
                                          <cc1:CalendarExtender   
            ID="CalendarExtender2"  
            runat="server"  
            TargetControlID="txtTimeStarts"    
            CssClass="CalendarCSS">
            </cc1:CalendarExtender> 

<div class="datefld">
<label class="name">Offer end date/time (optional)</label>
 <div class="field">
<asp:TextBox ID="txtTimeEnd" runat="server" CssClass="textfield"></asp:TextBox>

   <cc1:CalendarExtender ID="CalendarExtender4" runat="server" TargetControlID="txtTimeEnd"    
            CssClass="CalendarCSS">
            </cc1:CalendarExtender> ` 

    <asp:GridView ID="gvShopDeal" runat="server" AutoGenerateColumns="false" 
                      CssClass="tblexistoffer" DataKeyNames="ShopID" AllowPaging="True" 
                      AllowSorting="True">
                     <Columns>
                    <asp:TemplateField>
         <HeaderTemplate  >
            <asp:CheckBox ID="chkHeader" runat="server" />
            <asp:Label ID="lblSelectAll" Text="Select All" runat="server"></asp:Label>
         </HeaderTemplate>
         <ItemTemplate >
            <asp:CheckBox ID="chkRow" runat="server" />
         </ItemTemplate>
      </asp:TemplateField>
       <asp:BoundField DataField="ShopID" HeaderStyle-Width="10%" HeaderText="Shop ID" />
      <asp:BoundField DataField="ShopName" HeaderStyle-Width="40%" HeaderText="Shop Name" />
      <asp:BoundField DataField="Street" HeaderStyle-Width="40%" HeaderText="Street" />
      <asp:BoundField DataField="City" HeaderText ="City" />
                </Columns>
              </asp:GridView>
<asp:Button ID="btnCreateDeal" runat="server" Text="Create Offer" 
                      CssClass="grnbtn" OnClientClick="return CheckDealValidation(this)" onclick="btnCreateDeal_Click"></asp:Button>
                                        <asp:Button ID="btnDefCancel" runat="server" Text="Cancel" CssClass="greybtn"></asp:Button>

    <asp:UpdatePanel ID="UpdateExistingOffer" runat="server">
            <ContentTemplate>
              <asp:GridView ID="gvExistingOffers" runat="server" CssClass="tblexistoffer" 
                  AutoGenerateColumns="false" DataKeyNames="OfferID" AllowPaging="True" 
                  AllowSorting="True">

              <Columns>
   <asp:BoundField DataField="OfferID" HeaderText="OfferID" />
<asp:BoundField DataField="Description" HeaderText="OfferName" />
<asp:BoundField DataField="Status" HeaderText="Status" />
<asp:BoundField DataField="OfferType" HeaderText="OfferType" />

<asp:BoundField DataField="StartDate" HeaderText="StartDate">
<ItemStyle CssClass="Hide" />
<HeaderStyle CssClass="Hide" />
</asp:BoundField>
<asp:BoundField DataField="EndDate" HeaderText="EndDate" >
<ItemStyle CssClass="Hide" />
<HeaderStyle CssClass="Hide" />
</asp:BoundField>
 <asp:TemplateField HeaderText="Edit" HeaderStyle-Width="5%">
<ItemTemplate>

<asp:ImageButton ID="imgbtnEdit" ImageUrl="~/Merchant/images/edit.jpg"  runat="server"  Width="25" Height="25" onclick="imgbtnEdit_Click" />

</ItemTemplate>
</asp:TemplateField>
  </Columns>

              </asp:GridView>
              </ContentTemplate>
              </asp:UpdatePanel> 
```

文件后面的代码：

```
 protected void imgbtnEdit_Click(object sender, ImageClickEventArgs e)
    {

            ImageButton btndetails = sender as ImageButton;
            GridViewRow gvrow = (GridViewRow)btndetails.NamingContainer;
            fferIDForShop = Convert.ToInt32(gvExistingOffers.DataKeys[gvrow.RowIndex].Value);
            ShopList objShopID = ShopService.GetShopID(OfferIDForShop);
            (txtareaOfferDesc.Text) = gvrow.Cells[1].Text.Trim();
            txtTimeStarts.Text = gvrow.Cells[4].Text;
            txtTimeEnd.Text = gvrow.Cells[5].Text;
    } 
```

谢谢

维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:24:03.453

问题是因为文本框不在更新面板中，所以只需将所有内容放在更新面板中它就会开始运行，或者只是注释掉更新面板，然后尝试同样的事情。

# c# - C/C++ 到 C# 转换器或模拟器

> ID：11293913
> 
> 赞同：4
> 
> 时间：2012-07-02T12:42:27.233
> 
> 标签：c#, c++, c, emulation, converter

假设我有一些用于可移植的非可视库的 C 代码。该代码主要依赖于 CRT（没有 QT/DirectX/WinAPI 等依赖项）。

有没有办法可以在 C# 应用程序中使用此代码？我知道托管 C++，这对我来说**不是**可接受的方式。

我想到了一个可以用于自动翻译的 C/C++ 到 C# 转换器（我不需要*可读*的输出，一个工作的输出就足够了）或者我可以用来执行编译的 C/C++ 代码的模拟器。

你知道任何可以帮助我从 C# 代码中使用现有 C/C++ 代码的东西吗？

编辑：

P/Invoke 也不是一种可接受的方式。以及调用外部 EXE 或使用 COM/ActiveX。我需要一些允许我将 C 和 C# 代码合并到一个托管 DLL 或 EXE 中的东西。

现有的 C 代码是库 (.lib)，而不是 EXE。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T13:11:42.837

为什么不临时将 C++ 编译为托管 C++，以获得 .net 程序集，然后使用 Reflector 将其反编译成纯 C#？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:53:09.960

我认为直接从 DLL 中使用方法而不将代码转换为 C# 是最简单的。这很好用，一个缺点是您必须为不同的平台提供多个二进制文件。从 Dll 导入函数就像

```
[DllImport("kernel32.dll")]
public static extern IntPtr GetProcAddress (IntPtr hModule, string procedureName); 
```

我认为如果不转换前者，将 C 和 C# 代码合并到一个 DLL 中是不可行的。

# python - Python 和 MySQL STR_TO_DATE

> ID：11293914
> 
> 赞同：2
> 
> 时间：2012-07-02T12:42:32.487
> 
> 标签：python, mysql

当我执行代码时（见下文）我得到了下一个错误

```
Traceback (most recent call last):
File "/home/test/python/main.py", line 18, in <module>
  calls = tel.getCallRecordings(member['id'], member['start_date'])
File "/home/test/python/teldb.py", line 49, in getCallRecordings
  'start_date': str(start_date),
File "/usr/local/lib/python2.5/site-packages/MySQL_python-1.2.3-py2.5-freebsd-8.1-RELEASE-amd64.egg/MySQLdb/cursors.py", line 159, in execute
TypeError: int argument required 
```

我使用的代码是下一个：

```
def getCallRecordings(self, member_id, start_date):       
    self.cursor.execute("""
    SELECT var10 as filename,
           var9 as duration
    FROM csv_data c
    LEFT JOIN transcriptions t ON
        c.id=t.call_id
    WHERE member_id=%(member_id)s AND
          var10 IS NOT NULL AND
          var9>%(min_duration)d AND
          dialed_date>STR_TO_DATE(%(start_date)s, '%%Y-%%m-%%d %%H:%%i:%%s') AND
          t.call_id IS NULL
    ORDER BY dialed_date DESC
    """, {
        'member_id': member_id,
        'min_duration': MIN_DURATION,
        'start_date': str(start_date),
        })
    logging.debug("Executed query: %s" % self.cursor._executed)
    return self.cursor.fetchone() 
```

为什么我得到这个错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:54:33.413

你不显示什么`MIN_DURATION`是，但你使用`%(min_duration)d`，所以它必须是一个 int。您是否将其定义为字符串或浮点数？

您不需要在这样的 SQL 查询中使用 %d ，数据库适配器了解您传递的类型，并将它们正确地插入到查询中。制作`MIN_DURATION`一个整数（可能`int(MIN_DURATION)`在您拥有的代码中），它会起作用。

顺便说一句：堆栈跟踪将您集中在`str(start_date)`，但只是因为这是可执行语句中出现错误的最后一个源代码行，所以它具有误导性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T19:56:46.597

在构建涉及 str_to_date 函数的 sql 查询字符串时，我遇到了类似的问题。我在 python 字符串上使用了 .format() 运算符来参数化 SQL 查询。这是一个可以正常工作的示例查询：

```
# Takes an input date and returns the manager's name during that period
input_string='"' + "{input_data}".format(input_data=input_data) + '"' 

sql_query='''select CONCAT(e.last_name, ",", e.first_name),STR_TO_DATE(from_date,'%Y-%m-%d'),STR_TO_DATE(to_date,'%Y-%m-%d') from dept_manager dm inner join employees e on e.emp_no=dm.emp_no where STR_TO_DATE({input_string},'%Y-%m-%d')>STR_TO_DATE(from_date,'%Y-%m-%d') and STR_TO_DATE({input_string},'%Y-%m-%d')<STR_TO_DATE(to_date,'%Y-%m-%d');'''.format(input_string=input_string) 
```

# algorithm - Google Pregel 论文中的半聚类公式有什么意义？

> ID：11293919
> 
> 赞同：8
> 
> 时间：2012-07-02T12:42:49.620
> 
> 标签：algorithm, cluster-analysis, graph-theory, clique

[Google Pregel 论文](http://people.apache.org/~edwardyoon/documents/pregel.pdf)中提到了半聚类算法。使用以下公式计算半集群的分数

![在此处输入图像描述](../Images/cab0c5f305c652cf44425325b5d940af.png)

在哪里

Ic 是所有内部边
的权重之和 Bc 是所有边界边的权重之和
Vc 是半簇中的顶点数
fb 是边界边得分因子（用户定义在 0 和 1 之间）

该算法非常简单，但我无法理解上述公式是如何得出的。请注意，分母是 Vc 个顶点之间可能的边数。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T08:31:02.837

如果您考虑要捕获的数量，则该分数是有意义的。

这里要解决的问题是找出将图的顶点放入**半簇**（只是一组顶点，其中每个顶点可以位于多个半簇中）的最佳方法，并且总数量有一些上限半集群。因此，找到“最佳”方法的一种方法是将分数分配给任何潜在的半集群（换句话说，分配给任意一组顶点）。那么问题就变成了最大化总分的问题。

因此，半集群旨在捕获图中的集团。例如，在社交图谱中，半集群可能是高中篮球队的成员。

因此，更多的内部边缘等同于“更好”的半集群。这解释了`I_c`分子中的 。同样，您希望边界边缘很少，因为如果有很多边界边缘，那么这意味着可能会有一个更好的半组包含您正在检查的那个。这给出了`-f_b * B_c`分子中的 in。`f_b`只是一个比例因子，以便您可以调整要分配边界边缘的惩罚量。

分母也是一种比例因子。它用于标准化半集群分数，以便小集群不会完全被大集群控制。一个极端的例子是，如果你考虑世界上每个人的半群体。显然没有边界边缘和大量的内部边缘，但毫无疑问，它是一个没有高中篮球队有用的半组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T23:30:23.290

它与**派系**有关。

V_c * (V_c - 1) 是大小为 V_c 的团中的边数。

因此，如果您对组 I_c 中的所有边求和，则这是获得算术平均值的*适当归一化。*

即 I_c / (V_c * (V_c - 1)) 是**clique 内的平均重量**。

现在 - f_B * B_c 项是对出边的惩罚。恕我直言，它应该只除以 V_c，但这是个人喜好，因为我假设预期的传出边与集团成员的数量成比例，而不是与这个的平方成比例。

# android - Android Gridview 不工作

> ID：11293927
> 
> 赞同：0
> 
> 时间：2012-07-02T12:43:17.510
> 
> 标签：android, android-layout, gridview

我为 android 网格视图编写了代码，但不幸的是，当我运行代码时，应用程序返回如下错误“Appication Nues Hound RSS（进程 com.nues.rss）已意外停止，请稍后再试”

如果有人知道如何解决这个问题，请帮助我。我找不到任何编码错误。因此，欢迎专家给予适当的指导。

这是我的活动课

```
public void onCreate(Bundle savedInstanceState) {

    if (!isNetworkAvailbale()) {
        Toast.makeText(getApplicationContext(), "Internet Connection not available", Toast.LENGTH_SHORT).show();
        finish();
    }

    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);

    GridView gridView;

    ImageAdapter mAdapter;

    mAdapter = new ImageAdapter(this);

    gridView = (GridView) findViewById(R.id.gridview);

    gridView.setAdapter(mAdapter);

    gridView.setOnItemClickListener(new OnItemClickListener() {@
        Override
        public void onItemClick(AdapterView <? > arg0, View arg1, int position, long

            arg3) {
            Toast.makeText(NuesHoundRSSActivity.this, "Item co" + osition, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

这是适配器类

```
package com.nues.rss;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
    private Activity activity;  

public ImageAdapter(Context c) {

}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

   // create a new ImageView for each item referenced by the Adapter
public static class ViewHolder  
{  
    public ImageView imgView;    
}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  
    ViewHolder view;  
    LayoutInflater inflator = activity.getLayoutInflater();  

    if(convertView==null)  
    {  
        view = new ViewHolder();  
        convertView = inflator.inflate(R.layout.gridview_row, null);  

        view.imgView = (ImageView) convertView.findViewById(R.id.imageView1);  

        convertView.setTag(view);  

    }  
    else  
    {  
        view = (ViewHolder) convertView.getTag();  
    }  

    view.imgView.setImageResource(mThumbIds[position]);  

    return convertView;  
}  

// references to our images
private Integer[] mThumbIds = {
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7,
        R.drawable.sample_0, R.drawable.sample_1,
        R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5,
        R.drawable.sample_6, R.drawable.sample_7
};

} 
```

这是我的 Gridview XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
android:id="@+id/relativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="5dp">

<ImageView
    android:layout_height="64dp"
    android:id="@+id/imageView1"
    android:layout_width="64dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true">
</ImageView>

<TextView
    android:text="TextView"
    android:layout_height="wrap_content"
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_below="@+id/imageView1"
    android:layout_marginTop="2dp"
    android:layout_centerHorizontal="true"
    android:textSize="18sp"
    android:ellipsize="marquee"></TextView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:28:11.293

```
private Activity activity;  

public ImageAdapter(Context c) {

} 
```

将其替换为以下内容

```
private Context c;

        public ImageAdapter(Context c) {
            this.c = c;

        } 
```

和

```
LayoutInflater inflator = activity.getLayoutInflater(); 
```

和

```
LayoutInflater inflator = ((Activity) c).getLayoutInflater(); 
```

这将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:09:00.420

看这里：

```
public class ImageAdapter extends BaseAdapter {
        private Activity activity;  

    public ImageAdapter(Context c) {

    } 
```

你没有初始化你的活动对象。

试试这个：

```
 public ImageAdapter(Activity ac) {
    this.activity=ac;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:09:42.433

在您的代码`private Activity activity;`中永远不会设置为任何内容并且为空，因此会`activity.getLayoutInflater();`崩溃。

你想做这样的事情：

```
private Context context; 

public ImageAdapter(Context c) { 
    this.context = c;
} 
```

然后`context.getLayoutInflater();`。

# android - 以编程方式更改android中Button的宽度

> ID：11293932
> 
> 赞同：43
> 
> 时间：2012-07-02T12:43:30.007
> 
> 标签：android

如何以`width`编程`Button`方式更改。我可以改变`height`但宽度不会改变。以下是我的代码片段

```
private void createButton(final String label)
{

    Button button = new Button(this);
    button.setText(label);

    button.setWidth(10);
    button.setHeight(100);

    button.setOnClickListener(new OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {

        }
    });
    mMenuContainer.addView(button, mMenuItemLayoutParamters);

} 
```

但是 的`width`占据`Button`了`width`屏幕的 。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-02T12:52:37.597

`button.setLayoutParams(new LinearLayout.LayoutParams(10, 100));`

应该为你工作。

网上有一个很棒的例子：[检查这个](http://android-coding.blogspot.in/2011/05/resize-button-programmatically-using.html)

* * *

你应该申请包含你`LayoutParams`的. 也就是说，如果你的按钮在里面，你应该使用`ViewGroup``View``RelativeLayout``RelativeLayout.LayoutParams`

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-07-02T12:48:56.163

你可以这样做。

```
LinearLayout.LayoutParams params = button.getLayoutParams();
params.width = 100;
button.setLayoutParams(params); 
```

但请确保在将按钮添加到父级后执行此操作。and`LinearLayout.LayoutParams`在 parent 为 a`LinearLayout`且 parent 为`RelativeLayout`use时使用`RelativeLayout.LayoutParams`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-10T06:47:16.517

```
ConstraintLayout.LayoutParams layoutParams = (ConstraintLayout.LayoutParams) yourButton.getLayoutParams();
layoutParams.width = 150;
yourButton.setLayoutParams(layoutParams); 
```

“ConstraintLayout”可以更改为您的布局并通过“layoutParams.width”设置大小。这个案子对我有用！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-25T18:52:35.907

可以这样做

```
 int width= (int)getResources().getDimension(R.dimen.button_width);
    int heigth= (int)getResources().getDimension(R.dimen.button_heigth);
    ViewGroup.LayoutParams layoutParams = new ViewGroup.LayoutParams(width, heigth);
    button.setLayoutParams(layoutParams); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-22T09:56:44.453

我用这个解决了：

```
//ImageButton creation
final ImageButton server_icon_button=new ImageButton(getApplicationContext());
//setting background image in drawable
server_icon_button.setBackgroundResource(R.drawable.bonsai);
//After adding ImageButton to the parent i done this
server_icon_button.getLayoutParams().height=180;
server_icon_button.getLayoutParams().width=100; 
```

我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-03T22:01:40.113

就我而言，我使用的是 AppCompatImageButton（和 AppCompat）。事实证明，如果我将密度调整后的图像保存在各种可绘制文件夹中：drawable-ldpi、drawable-mdpi、drawable-hdpi 等。那么按钮将不会缩放。相反，我必须*在 drawable-nodpi 中为每个按钮放置一个可绘制对象*。确保 drawable-nodpi 按钮图像是您需要的*最大*尺寸。Android 不会放大按钮大小；但是，它可以缩小尺寸。我在 XML 中创建了一个按钮，如下所示：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:meter="http://schemas.android.com/apk/res-auto"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <android.support.v7.widget.AppCompatImageButton
        android:id="@+id/button"
        style="@style/ButtonStyle"
        android:baselineAlignBottom="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minHeight="0dp"
        android:minWidth="0dp"
        app:srcCompat="@drawable/button_selector"
        android:background="?attr/selectableItemBackgroundBorderless"
        android:contentDescription="@string/button"
        android:focusable="true">
</RelativeLayout>

<!-- styles.xml -->
<style name="ButtonStyle" parent="MyAppTheme">
    <item name="android:scaleType">centerInside</item>
    <item name="android:adjustViewBounds">true</item>
    <item name="colorControlHighlight">@color/buttonColorPressed</item>
    <item name="colorButtonNormal">@color/buttonColor</item>
</style>

<!-- v21/styles.xml -->
<style name="TargetButton" parent="MyAppTheme">
    <item name="android:scaleType">centerInside</item>
    <item name="android:adjustViewBounds">true</item>
    <item name="colorControlHighlight">@color/buttonColorPressed</item>
    <item name="colorButtonNormal">@color/buttonColor</item>
    <item name="android:elevation">@dimen/button_elevation</item>
</style>

<!-- drawable/button_selector.xml -->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/button"/>
</selector>

<!-- drawable/button.xml -->
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
      android:src="@drawable/ic_button"
      android:gravity="center" />

<!-- drawable/button_pressed.xml -->
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
      android:src="@drawable/ic_button_pressed"
      android:gravity="center" /> 
```

接下来，在 onCreate 中，当您检索按钮时，调用**adjustButtonSize**（我把它放在我的基类中）：

```
 mButton = (AppCompatImageButton) findViewById(R.id.button);
    adjustButtonSize(mButton);

public void adjustButtonSize(AppCompatImageButton button) {
    DisplayMetrics displayMetrics = getResources().getDisplayMetrics();
    int width = displayMetrics.widthPixels;
    int height = displayMetrics.heightPixels;
    ViewGroup.LayoutParams params = button.getLayoutParams();
    params.height = height / 10;         // 10%
    params.width = ((width * 20) / 100); // 20%
    button.setLayoutParams(params);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T12:49:58.423

尝试仅使用`mMenuContainer.addView(button);`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-27T06:40:43.060

你可以试试这个 kotlin 代码。

当您想将另一个视图的大小赋予其他视图时，这非常有用。

```
class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        equalToButton.post(Runnable { zeroButton.height = equalToButton.height })
    }
} 
```

# javascript - Jquery Grid 替代行颜色和滚动条

> ID：11293935
> 
> 赞同：1
> 
> 时间：2012-07-02T12:43:31.917
> 
> 标签：javascript, jquery, jquery-plugins

我正在研究 Jquery 网格。在以下情况下我需要一些帮助：

1) 我需要设置 JQuery Grid Rows 的交替行颜色。

2）当没有滚动条时，我需要删除额外的空间，即Jquery Grid为滚动条保留额外的空间，如果记录很少，它会隐藏滚动条，但额外的空间仍然存在。在这种情况下，我想删除多余的空间。

请给我一些建议以完成我的任务。

# wpf - 如何更改数据在 WPF GridControl 中的显示方式？

> ID：11293939
> 
> 赞同：3
> 
> 时间：2012-07-02T12:43:42.267
> 
> 标签：wpf, data-binding, mvvm, devexpress, gridcontrol

我正在尝试`GridControl`从 DevExpress 使用，但我不能做我通常`ListView`用`GridView` `View`.

我做了两个方法。使用`DisplayMemberBinding`和`CellTemplate`。两者都没有显示。下面的代码（我删除了一些列）：

```
<dxg:GridControl ItemsSource="{Binding}" Name="gridControl1">
    <dxg:GridControl.Columns>
        <dxg:GridColumn Header="Teste" DisplayMemberBinding="{Binding DataNascimento}"/>
        <dxg:GridColumn Header="Nome">
            <dxg:GridColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Nome}"/>
                </DataTemplate>
            </dxg:GridColumn.CellTemplate>
        </dxg:GridColumn>
    </dxg:GridControl.Columns>
    <dxg:GridControl.View>
        <dxg:TableView Name="tableView1" AutoWidth="True" />
    </dxg:GridControl.View>
</dxg:GridControl> 
```

如下图所示：

![带有绑定数据但未显示任何内容的网格](../Images/75162670dd922463b13b47b3028a9d22.png)

你可以看到我的专栏，但没有数据。我绑定了 3 个项目，它显示了 3 行。数据本身已绑定，但看起来模板未显示。

我尝试了[这个](https://stackoverflow.com/questions/4004462/devexpress-wpf-grid-bound-to-liststring-using-mvvm)问题的相同方法，但对我不起作用。我的班级有`INotifyPropertyChanged`并且我使用了一个`ObservableCollection<T>`before bindind 到`GridControl`. 唯一可行的方法是，如果我删除几乎所有代码并将`AutoPopulateColumns`. `True`但在某些情况下，我想要一个自定义格式并且无法使用此选项实现。

**Edit1：** 我在设计模式下做了这个并且工作：

```
 <dxg:GridColumn FieldName="DataNascimento" Name="gridColumn3">
                <dxg:GridColumn.EditSettings>
                    <dxe:TextEditSettings DisplayFormat="{}{0:dd/MM/yyyy HH:mm:ss}" />
                </dxg:GridColumn.EditSettings>
            </dxg:GridColumn> 
```

**Edit2：** 尝试了`@blindmeis`与网格相同的方法，它的工作方式与我预期的一样：

```
<DataGrid AutoGenerateColumns="False" Grid.Row="2" ItemsSource="{Binding}">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding DataNascimento}" Header="Nascimento" />
        <DataGridTextColumn Binding="{Binding Nome}" Header="Header" />
        <DataGridTemplateColumn Header="Teste">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Nome}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

看起来这种方法适用于`ListView`和`DataGrid`。不幸的是`GridControl`表现不同。

使用`<dxg:GridColumn.EditSettings>`方法是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-03T12:58:56.480

它最终导致了一个更复杂的问题。

正如我在上面的编辑中提到的`TextEditSettings`那样，在这种特殊情况下做了我想要的。但是一旦我改进了代码，一些错误就开始出现。

[之后我遇到的问题](https://www.devexpress.com/Support/Center/Question/Details/Q516823)在官方**DevExpress**论坛中提到，我总结如下：

## 真正的问题

我为一些报告使用了基类，在这些网格中我使用了他们的派生类。

我在问题中提到的解决方案适用于常规的 nom 派生类，但是当我开始使用基类和派生类的属性时，一些奇怪的行为开始发生。

通过使用`TextEditSettings`with`FieldName`我可以格式化数据并显示派生类中属性的摘要，但对于基类中的属性它不起作用。

所以我改为`DisplayMemberBinding`它适用于所有属性，但摘要停止工作。

## 解决方案

要使格式选项可用于您的类中的属性**和**继承的属性**并使**摘要正常工作，您必须像这样使用：

> **旁注**：不知道其中的所有这些属性`TableView`是否真的有必要，但由于此控件对它们的更改非常敏感，因此我将它们全部保留只是为了弄清楚什么对我有用。

```
<dxg:GridControl ItemsSource="{Binding MyObservableCollection}">
    <dxg:GridControl.Columns>
        <dxg:GridColumn DisplayMemberBinding="{Binding Percent}"
                        FieldName="Percent"
                        Header="%">
            <dxg:GridColumn.EditSettings>
                <dxe:TextEditSettings DisplayFormat="F2" />
            </dxg:GridColumn.EditSettings>
        </dxg:GridColumn>
    </dxg:GridControl.Columns>
    <dxg:GridControl.View>
        <dxg:TableView AllowSorting="False"
                       ShowTotalSummary="True"
                       FilterEditorShowOperandTypeIcon="True"
                       NavigationStyle="Row"
                       MultiSelectMode="None"
                       AllowColumnFiltering="False"
                       AllowDateTimeGroupIntervalMenu="False"
                       AllowEditing="False"
                       AllowFilterEditor="False"
                       AllowGrouping="False"
                       ClipboardCopyAllowed="False"
                       ShowGroupPanel="False" />
    </dxg:GridControl.View>
    <dxg:GridControl.TotalSummary>
        <dxg:GridSummaryItem FieldName="Percent"
                             DisplayFormat="F2"
                             SummaryType="Sum" />
    </dxg:GridControl.TotalSummary>
</dxg:GridControl> 
```

在这种情况下，它将在`Percent`继承的属性中工作。将`DisplayMemberBinding`使其适用于 ，`TextEditSettings`而`FieldName`in`GridColumn`用于使摘要获取该属性`GridSummaryItem`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T21:10:43.687

我只是需要格式化文本，但显然 DevExpress GridControl 不支持 StringFormat。经过各种意图，我能够管理格式。

我使用 ObservableCollection 填充我的网格。这些列是：

价格，数据类型 double，即：15

符号，数据类型字符串，即：US$

和我期待的格式：15.00 美元

这是我通常使用常规 DataGrid 的方式

```
<DataGridTextColumn  Header="Price" IsReadOnly="True">
    <DataGridTextColumn.Binding>
        <MultiBinding StringFormat="{}{0} {1:#.00}">
            <Binding Path="Symbol" />
            <Binding Path="Price" />
        </MultiBinding>
    </DataGridTextColumn.Binding>
</DataGridTextColumn> 
```

这是我的做法。请注意，在“绑定路径”中，该字段需要以数据开头。并且必须有RelativeSource="{RelativeSource Self}"，否则它将不起作用。

```
<dxg:GridColumn Header="Price" FieldName="Price">
    <dxg:GridColumn.DisplayMemberBinding>
        <MultiBinding Converter="{StaticResource stringConcatenator}">
            <Binding Source="{}{0} {1:#.00}"/>                                                    
            <Binding Path="Data.Symbol" RelativeSource="{RelativeSource Self}" />
            <Binding Path="Data.Price" RelativeSource="{RelativeSource Self}"/>
        </MultiBinding>
    </dxg:GridColumn.DisplayMemberBinding>                                      
</dxg:GridColumn> 
```

这里是转换器：

```
public class StringConcatenator : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //the first parameter is the format, and the consequent parameters are the values
        return string.Format(values[0].ToString(), values.Skip(1).Take(values.Length - 1).ToArray());
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        return new string[] { };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:16:30.860

如果您将数据网格与视图模型中的可观察集合绑定，并且如果您的可观察集合将 DataNascimento 和 Nome 作为两个字段，那么您不必像以前那样再次绑定它们。您可以直接给出 fieldname，它将使用您可观察集合中的值填充列。

你可以这样做：

```
<DataGrid AutoGenerateColumns="False" Grid.Row="2" ItemsSource="{Binding YOUR_OBSERVABLE_COLLECTION}">
<DataGrid.Columns>
    <DataGridTextColumn FieldName="DataNascimento" Header="Nascimento" />
    <DataGridTextColumn FieldName="Nome" Header="Header" />
    <DataGridTemplateColumn Header="Teste">
        <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <TextBox Text="{Binding Nome}"/>
            </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
</DataGrid.Columns> 
```

# session - 如何从会话侦听器或 Servlet 在 JSF 中的 Backing Bean 中设置值？

> ID：11293940
> 
> 赞同：1
> 
> 时间：2012-07-02T12:43:44.590
> 
> 标签：session, jsf, servlets, listener, managed-bean

在`SessionListener`我想设置一些我想在 JSF`@ManagedBean`中`Session scope`显示的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T13:53:45.177

您需要自己创建托管 bean 实例。

```
Bean bean = new Bean();
bean.setSomething(something);
event.getSession().setAttribute("bean", bean); // "bean" is managed bean name. 
```

如果它已经存在于会话范围中，JSF 只会重用它（您会看到，JSF“会话范围”在 的属性所代表的范围内`HttpSession`）。请注意，这种方式 any`@PostConstruct`不会被调用，并且任何需要由`@ManagedProperty`,`@EJB`等注入的依赖项都不会被注入。你也需要自己做。

从设计技术上讲，更好的做法是仅在`@PostConstruct`支持 bean 类本身的构造函数或方法中执行这项工作。

```
@ManagedBean
@SessionScoped
public class Bean {

    @PostConstruct
    public void init() {
        // Here.
    }

} 
```

# php - Codeigniter 表单验证过程

> ID：11293943
> 
> 赞同：0
> 
> 时间：2012-07-02T12:44:05.857
> 
> 标签：php, codeigniter

我需要进行表单验证，我什至在其中一个验证案例中做了这样的事情：

```
if($this->input->post('submitted') =='yes') { // this is hidden field in the form 

if($this->form_validation->run() === TRUE) { 
  $gos['success'] = TRUE; 
  $this->admin_model->update_duela($duel_id);
 } else { 
  $gos['success'] = FALSE;
 }

} 
```

并考虑到：

```
if($success) {
        echo "Your post has been submitted!";
} else { 
        echo validatoin_errors(); 
} 
```

验证错误很棒，我在验证失败时使用它。但是当验证通过并且表单提交成功时，我通常会做类似上面的事情。

另外，我可以直接在视图中做这样的事情：

```
if($this->form_validation->run() === TRUE) { 
   echo "Your post has been submitted!";
 } else { 
   echo validation_errors(); 
} 
```

但是在视图中这样做并不好。是吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:46:51.160

在控制器中添加一个变量：

```
if($this->form_validation->run() === TRUE) { 
     $data['message'] = 'Your post has been submitted!';
} else { 
     $data['message'] = validation_errors(); 
} 

$this->load->view('form', $data); 
```

在视图中调用它：

```
echo $message; 
```

# jquery - 当下一个 div 的显示不显示或在 jQuery 中隐藏时隐藏上一个 div

> ID：11293945
> 
> 赞同：0
> 
> 时间：2012-07-02T12:44:13.107
> 
> 标签：jquery, html, jquery-selectors, next

当我的下一个 div 不显示或隐藏时，是否可以隐藏前一个 div。

```
<div id="first"> Hello </div>
<div id="second">
  <div id="secondchild1" style="display:none"> How are you.? </div>
  <div id="secondchild2" style="display:none"> Nice to meet you </div>
</div> 
```

现在，当第二个中的所有子 div 都被隐藏或它们的显示不显示时，我需要先隐藏。

即使显示了其中一个子 div，也应该显示第一个子 div。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T13:09:43.073

遍历 #second div 内的所有 div 以检查当前子 div 是否可见。如果它可见退出函数并将布尔值设置为 true。最后，根据布尔值显示或隐藏#first div。

```
var showFirst = false;
$('#second div').each(function() {
    if ($(this).is(':visible')) {
        showFirst = true;
        return false;
    }
});
showFirst ? $('#first').show() : $('#first').hide();​ 
```

**JSFiddle**
[http://jsfiddle.net/Az3aW/](http://jsfiddle.net/Az3aW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:50:00.610

```
if($("#second").children().css("display") != "none")
{
    $("#first").css("display", "none");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:56:55.193

```
$('#second').children().each(function(){
    if($(this).css('display') == 'none') $('#first').hide();
}); 
```

当你得到一个显示没有隐藏

# java - spelling matching using Jaro-Winkler Distance to calculate the similarity of two strings

> ID：11293949
> 
> 赞同：0
> 
> 时间：2012-07-02T12:44:23.980
> 
> 标签：java, android

I'm tring to do auto-correct for spelling and using Jaro-Winkler strategy . I have list of suggestions and the types word is ranked with the suggestion words. The problem I'm facing, when word "ans"/"anf"/"anr" is types ,"an" is given the heights rank when compared. "and" is way back in the score list . Therefore "ans"/"anf"/"anr" are replaced with "an" instead of "and" .

Any suggestion how should I solve this, or are there any other algorithm to replace "ans"/"anf"/"anr" perfectly with "and" not "an" ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:30:08.047

对于一般的拼写错误，加权换位高于删除/添加似乎是个好主意。

假设您的条目是使用标准键盘布局（qwerty？）输入的，您可以根据键之间的物理距离来增加权重。不确定在逻辑上做到这一点的最佳方法。在我的脑海中，您可以创建一个包含键盘映射的二维数组，并比较实际（毕达哥拉斯）距离。

给定一个具有“Q”=[0][0]、“W”=[0][1]、“A”=[1][0] 的映射，A->Q 之间的距离将为 1，Q- >W = 1，Q->S = sqrt(2)。这应该给你一些重量距离。

距离计算可能有一个更清晰的实现，但只是在这里吐口水。

# nosql - What is the best approach for showing large results from Amazon DynamoDB?

> ID：11293950
> 
> 赞同：2
> 
> 时间：2012-07-02T12:44:26.697
> 
> 标签：nosql, amazon-dynamodb

I have around 150.000 rows of subscribers answers in a table, and I need to provide a way to let a user select a winner.

I have all this implemented in MS SQL, but because we're having a bit more traffic that expected, I thought it was a good idea to move to a Amazon DynamoDB environment for this particular part (handling subscribers)

in MS SQL I have a SP that is something like:

```
SELECT s.name, s.guid
FROM calendars c
INNER JOIN challenges cl on cl.calendar_id = c.calendar_id
INNER JOIN challenge_answers ca on ca.calendar_id = c.calendar_id
INNER JOIN subscribers s on s.calendar_id = c.calendar_id
WHERE 
      c.calendar_id = 9 and 
      cl.day = 15 and
      ca.correct = 1 and 
      s.email not like '%@mydomain.com'
ORDER BY s.name DESC; 
```

and using LINQ I end up with `.Take(25).Skip(page);`

I understand that `INNER JOIN`'s in Amazon DynamoDB are not a viable option, so I added more fields to the `subscribers` table, witch include all other fields so I can simply have only one table and each item contains everything for the query.

What should be the best approach using Amazon DynamoDB to retrieve only a partial group and safely skip "pages"?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T20:32:16.230

DynamoDB 并不是真正设计为跳过页面，而是根据它们的键获取项目。类似查询的功能相当有限，仅适用于具有基本操作的键（散列或范围）。同样，您可以使用已定义索引的键，但同样的限制也适用。[这是有关Query](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html)的一些附加信息。

关于分页，DynamoDB 不提供游标，因此如果您开始迭代一组键，则需要读取所有项目，直到每个响应中返回的 LastEvaluatedKey 值为 null。目前，没有内置支持跳到特定页面。您可以通过为页面构建索引表来模拟这一点，这样您就可以直接从该索引中获取页面的项目。Chris Moyer[在这里](http://blog.coredumped.org/2012/01/amazon-dynamodb.html)提出了一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T14:29:25.207

您可以尝试使用[LINQ2DynamoDB](http://linq2dynamodb.codeplex.com/) DataContext。它将 DynamoDB 查询结果缓存在内存缓存 (MemcacheD) 中，这极大地提高了 ASP.Net 中排序/分页场景的性能。那里还有一个自定义的[ASP.Net DataSource](http://linq2dynamodb.codeplex.com/SourceControl/latest#Sources/Linq2DynamoDb.AspNet.DataSource/DynamoDbDataSource.cs)实现，因此您无需一行代码就可以打开分页。

# c++ - Include Directx 9 and 10 in the same code file

> ID：11293955
> 
> 赞同：1
> 
> 时间：2012-07-02T12:44:44.343
> 
> 标签：c++, header, directx

the guy that asks weird things, here, again

I see that they use different executables, for a game that was created for both directx 9 and 10\. It is possible to include "d3d9.h" and "d3d10.h" in a code file, then select direct3d 9 functions or direct3d 10 functions, depending on, for example, an argument that acts like a flag? I am not talking about drawing something using a direct3d 10 function using a direct3d 9 context and object.

What I want to do is create a function called `init3D(UINT version);` Depending on `version`, it will create a directx 9 or directx 10 object and device. I don't know if that is possible or I must create two different executables (or 3 if I decide to use d3d8, too)

Thanks for your help and forgive my lack of understanding with some of the C++ techniques.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:00:14.683

另一条评论。你想在什么平台上运行它？

Windows vista 和更新版本将运行directx11，directx11*将*在directx9 级别的硬件上运行（显然没有像镶嵌着色器这样的新功能）。

如果您不需要支持 XP（而且它现在真的变得很老了......）然后忘记 dx9 和 dx10，只使用 directx11

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T13:05:39.823

是的，这完全有可能。

唯一的问题是两者的库都必须存在于目标机器上。因为您已与 d3d10 链接，所以即使您想在 d3d9 模式下运行，它也必须安装在机器上才能加载 .exe，而在 xp 机器上不会出现这种情况。

为避免这种情况，您需要使用动态链接来调用任何函数，以便仅在运行时加载库。查找 LoadLibrary 和 GetProcAddress。幸运的是，使用 direct3d，您可能会调用的唯一全局函数是“创建”函数。D3DX 会导致同样的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T13:11:59.977

你明白 DirectX 8 不被支持吧？DirectX 10 包括 DirectX 9，因此没有理由同时要求两者。

您应该能够根据安装的 DirectX 版本有条件地包含头文件。

这是一个如何做到这一点的示例，尽管它是用 C# 编写的：

[如何在 C# 中编写代码以在我的机器上获取直接 X 版本？](https://stackoverflow.com/questions/6159850/how-to-code-to-get-direct-x-version-on-my-machine-in-c)

传统方式是安装应用程序安装时使用的 DirectX 版本。从长远来看，任何其他方式都应该被认为是一种黑客行为并且无法支持。

# ruby-on-rails - 关系为空时不显示表单

> ID：11293958
> 
> 赞同：0
> 
> 时间：2012-07-02T12:44:56.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

我有这样的关系

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps

  embeds_one :setting
end 
```

和设置类

```
class Setting
  include Mongoid::Document
  include Mongoid::Timestamps

  embedded_in :user

  field :notify, type: Boolean
end 
```

我有这样的表格：

```
<% form_for current_user.setting || current_user.build_setting, :html => {:class => 'well'} do |f| %>
  Notificar: <%= f.check_box :notify, :class => 'check' %>

  <div class="form-actions">
    <%= f.submit "Salvar" %>
  </div>
<% end %> 
```

但是当我访问表单页面时，没有显示表单。我怀疑这是因为`setting`是 nil，或者类似的东西......
我错过了什么？
谢谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:47:35.450

您在 . 前面缺少一个等号`form_for`。

```
<%= form_for # ... %> 
```

助手渲染其块中的`form_for`所有内容，添加表单标签并返回 html。为了显示它，你必须告诉 erB 你想显示返回的字符串。因此，当缺少等号时，它不会显示输出。

# c - Does glDisplayFunc(RenderScene) callback causes a race condition in the following code?

> ID：11293959
> 
> 赞同：1
> 
> 时间：2012-07-02T12:44:57.093
> 
> 标签：c, opengl, race-condition

I'm reading [OpenGL Superbible](https://rads.stackoverflow.com/amzn/click/com/0321498828) 4th ed. In Chapter 2, the example code sets up the callback followed by the clear color as follows:

```
main()
{
//...
glDisplayFunc(RenderScene);
SetupRC();
//..
}    

void RenderScene(void)
{
  glClear(GL_COLOR_BUFFER_BIT);
  glFlush();
}

void SetupRC(void)
{
  glClearColor(0.0f, 0.0f, 1.0f, 1.0f);
} 
```

Is it posisble that we have a race condition here, where `glClear` might be executed before `glClearColor`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T13:06:21.040

这不是竞争条件，因为`glutMainLoop()`在同一个线程中运行并调用`glDisplayFunc()`不会调用任何 GL 函数（它只会保存指向回调的指针）。

从文档：

> `glutMainLoop`进入 GLUT 事件处理循环。该例程在 GLUT 程序中最多应调用一次。一旦被调用，这个例程将永远不会返回。它将根据需要调用任何已注册的回调

OpenGL 只能渲染到在同一线程中创建的 GL 上下文。因此，对`glClearColor()`和的调用`RenderScene()`将在同一个线程中调用。由于调用 to`glutMainLoop()`稍后在 your 中调用`main()`，因此`glClearColor()`将严格在`glClear()`in之前调用`RenderScene()`。

# .net - T4 Template containing XML results in parse errors

> ID：11293963
> 
> 赞同：4
> 
> 时间：2012-07-02T12:45:10.190
> 
> 标签：.net, xml, config, t4, transformation

I have created T4 Templates for the config files of my web and windows projects. I can successfully generate master web.config, and all configs for other environments, i.e. web.ci.config, etc..However, I could not get rid of the errors on my master tt files, such as :

> *   Character '#', hexadecimal value 0x23 is illegal in an XML name.
> *   Character '<', hexadecimal value 0x3c is illegal in XML attribute values.
> *   Unexpected XML declaration. The XML declaration must be the first node in the document and no white space characters are allowed to appear before it.

I should be missing a xml schema or a reference, but what?

* * *

My file looks like:

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension= ".config" #>  
<?xml version="1.0" encoding="utf-8"?>
<configuration>
...  
    <add key="FileUploadFolder" value="<#= this.FileUpload #>" /> 
...
</configuration>
<#+ 
   string FileUpload="\\\\server\\folder";
#> 
```

And here is [screenshot](http://continuousdevelopment.files.wordpress.com/2012/07/web-tt.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:52:16.487

这里同样的问题。我通过在`.tt`文件中替换该行来解决它

```
<?xml version="1.0" encoding="utf-8"?> 
```

和

```
<# WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\"?>"); #> 
```

一旦 VS 对模板文件的 XML 格式感到困惑，它似乎会持续存在这种困惑——即使在像上面那样编辑并重新启动之后也是如此。解决这个问题的唯一方法似乎是`.tt`从您的项目中删除现有文件并从头开始重新创建它。

通过此更改，该`.tt`文件不再具有`<?xml?>`标记，因此 VS 不再将其视为 XML 文件。它忽略文字字符串中的所有内容。您的整个模板现在看起来像这样：

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension= ".config" #>  
<# WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\"?>"); #>
<configuration>
...  
    <add key="FileUploadFolder" value="<#= this.FileUpload #>" /> 
...
</configuration>
<#+ 
    string FileUpload="\\\\server\\folder";
#> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:29:26.513

What's happening here is that the Xml language service in VS is mistakenly identifying your T4 file as an Xml file, so spewing lots of false positive error messages.

I'm looking into whether there's a workaround to force it to ignore T4 files. If you could log a bug on [Microsoft Connect](http://connect.microsoft.com/VisualStudio), that would be helpful.

# c++ - 运算符 +(Vector) 用于 Point - 但 Vector 使用 Point 并且在 Point 声明中未声明

> ID：11293969
> 
> 赞同：2
> 
> 时间：2012-07-02T12:45:41.500
> 
> 标签：c++, declaration, operator-keyword

我有代码：

```
class Point3D{
    protected:
        float x;
        float y;
        float z;
    public:
        Point3D(){x=0; y=0; z=0;}
        Point3D(const Point3D & point){x = point.x; y = point.y; z = point.z;} 
        Point3D(float _x,float _y,float _z){x = _x; y = _y; z = _z;}
}

class Vector3D{
    protected:
        Point3D start;
        Point3D end;

    public:
       ...

        Point3D getSizes(){
            return Point3D(end-start);
        }
} 
```

我想为将采用向量的 Point3D 创建和 operator+：

```
Point3D & operator+(const Vector3D &vector){
    Point3D temp;
    temp.x = x + vector.getSizes().x;
    temp.y = y + vector.getSizes().y;
    temp.z = z + vector.getSizes().z;
    return temp;
} 
```

但是当我将该操作放在 Point3D 类声明的旁边时，我得到了错误，因为我没有在这里声明 Vector3D。而且我不能在 Point3D 之前移动 Vector3D 声明，因为它使用 Point3D。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T12:47:19.847

把它放在课外：

```
Point3D operator+(const Point3D &p, const Vector3D &v)
{

} 
```

而且**永远不会**回来`a reference to local variable`！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T13:07:02.680

您可以通过在定义之后移动函数定义来解决这个问题`Vector3D`，只需在类定义中声明函数即可。这需要声明`Vector3D`，但不是完整定义。

此外，永远不要返回对本地自动变量的引用。

```
// class declaration
class Vector3D;

// class declaration and definition
class Point3D { 
    // ...

    // function declaration (only needs class declarations)
    Point3D operator+(const Vector3D &) const;
};

// class definition
class Vector3D {
    // ...
};

// function definition (needs class definitions)
inline Point3D Point3D::operator+(const Vector3D &vector) const {
    // ...
} 
```

# actionscript-3 - Flash video in movieclip problems

> ID：11293972
> 
> 赞同：0
> 
> 时间：2012-07-02T12:45:45.640
> 
> 标签：actionscript-3, flash, movieclip

I have several video files playing on the stage. I've converted them into movieclips so that I can scale and drag them by clicking. The problem is that I cannot loop them.

Then I tried to make them as SWF playback object's but after that my code wasn't working with them.

Next step was to make them Embedded video objects so that they loop automatically and the code is working. After that there appeared a problem that the objects are duplicating at some point.

Here's the original code as the videos are movieclips.

```
 var allDraggables:Array = new Array();
var mouseHold = false;
stage.addEventListener(MouseEvent.MOUSE_UP, mUp);

function mUp(MouseEvent)
{
 mouseHold = false;
}

function draggableObject(mc)
{
 var mouseOnThisObject = false;
 allDraggables.push(mc);
 mc.addEventListener(Event.ENTER_FRAME, drag);
 mc.addEventListener(MouseEvent.MOUSE_DOWN, mDown);
 function mDown(MouseEvent)
 {
  mouseHold = true;
  mouseOnThisObject = true;
 }

 function drag(MouseEvent)
 {

  if (mouseHold == true && mouseOnThisObject == true)
  {
   mc.addEventListener(Event.ENTER_FRAME, dragger);
  }

  if (mouseHold == false)
  {
   mc.removeEventListener(Event.ENTER_FRAME, dragger);
   mouseOnThisObject = false;
  }

 }

 mc.doubleClickEnabled = true;
mc.addEventListener(MouseEvent.DOUBLE_CLICK, scaleMe);

function scaleMe(e:MouseEvent)
{

if (e.target.scaleX < 2)
{
e.target.scaleX= e.target.scaleY = 2;
}
else (e.target.scaleX= e.target.scaleY = 1);
}

 function dragger(Event)
 {
  mc.x+=(mouseX-mc.x)/3;
  mc.y+=(mouseY-mc.y)/3;

  for (var i:int=0; i<allDraggables.length; i++){
  if(mc.hitTestObject(allDraggables[i]) && getChildIndex(allDraggables[i]) > getChildIndex(mc)){
   swapChildren(allDraggables[i], mc)
   }
  }
 }
}

draggableObject(green);
draggableObject(red);
draggableObject(video1);
draggableObject(video2);
draggableObject(video3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:52:18.177

我发现了一些我曾经在项目中使用过的旧代码，也许你可以试试这个。在我的 Flash 应用程序中它可以工作，尽管我没有将视频放入影片剪辑中。

```
import flash.media.Video;
import flash.net.NetConnection;
import flash.net.NetStream;
import flash.events.NetStatusEvent;

var nc:NetConnection = new NetConnection();

nc.connect(null);
ns = new NetStream(nc); 
ns.bufferTime = 10;

var vid:Video = new Video(1024,640);
vid.attachNetStream(ns);
addChild(vid);
ns.addEventListener(NetStatusEvent.NET_STATUS, ns_onPlayStatus)

function ns_onPlayStatus(event:NetStatusEvent):void {//loop video
    if(event.info.code == "NetStream.Play.Stop") {
        ns.seek(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T13:29:55.227

好吧，很难说出你到底尝试了什么，因为你还没有提供任何代码（还）..

但是，从我的脑海中，我认为这会奏效：

```
if(videoMC1.currentFrame == 250) { //put the number of the last frame of the movieclip in place of 250
   loopMC();
}
function loopMC() {
   videoMC1.stop();
   videoMC1.gotoAndPlay(1);
} 
```

你在这里做的很简单；您检查传递/播放的当前帧，当它达到所需的数字（在您的情况下很可能是最后一帧）时，它会调用一个重置和播放视频的函数。

# build - 使用 IntelliJ 进行远程构建

> ID：11293976
> 
> 赞同：16
> 
> 时间：2012-07-02T12:46:05.350
> 
> 标签：build, ssh, intellij-idea

我遇到以下问题：

a) 我在远程服务器上设置了 UNIX 构建环境，我可以通过 ssh 进入 b) 我在 Windows 上有 IntelliJ

我想做的是通过远程连接编辑文件（类似于 Emacs 存在的功能）并发出 shell 命令，例如“make”并运行服务器上存在的简单“测试脚本”。

执行此操作的功能是否已集成到 IntelliJ 中，还是我需要插件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T12:51:34.837

Intellij IDEA 有一个 SSH 插件。它位于[https://plugins.jetbrains.com/idea/plugin/1203-ssh](https://plugins.jetbrains.com/idea/plugin/1203-ssh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-09T13:20:44.917

对于仍在寻找在本地运行 Intellij 时远程编辑文件的方法的任何人，版本**2016.3 Ultimate Edition**具有*远程服务器配置*选项。它允许使用[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)、[SFTP](http://en.wikipedia.org/wiki/SFTP)或[FTPS](http://en.wikipedia.org/wiki/FTPS)远程访问文件。

有关如何配置远程服务器的更多详细信息，请[参阅 Intellij 的帮助页面](https://www.jetbrains.com/help/idea/2016.3/creating-a-remote-server-configuration.html)。

# c++ - 如何执行注入进程的应用程序

> ID：11293978
> 
> 赞同：0
> 
> 时间：2012-07-02T12:46:10.863
> 
> 标签：c++, process, execute, inject

我想执行一个注入到 WINDOWS 进程中的应用程序（以 .exe 扩展名结尾的可执行文件）。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:50:08.083

使用`CreateRemoteThread`. 此 Win32 API 在另一个进程中启动一个线程。

# java - onBackPressed not Called Immediately - No Keyboard for id 0 - Android

> ID：11293979
> 
> 赞同：0
> 
> 时间：2012-07-02T12:46:12.923
> 
> 标签：java, android, eclipse, android-activity, activity-finish

I am overriding the `onBackPressed` method in my app :

```
public void onBackPressed() {

        System.out.println("BACK PRESSED");
        mp.stop();
        finish();
    } 
```

The problem is that the back button needs to be pressed at least three times before this method is called. The first couple of times I get :

```
No Keyboard for id 0
Using Default Keymap : /system/user/keychars/qwerty.kcm.bin 
```

Can anyone spot what is wrong ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:55:03.670

称呼`super.onBackPressed();`

有关更多详细信息，请参阅此[链接](https://stackoverflow.com/a/6322974/985143)

# iphone - How to draw Custom lines on touch move in Cocos2D in iOS?

> ID：11293980
> 
> 赞同：2
> 
> 时间：2012-07-02T12:46:26.260
> 
> 标签：iphone, ios5, ios4, cocos2d-iphone

I am developing a puzzle game.

In this game I have to draw custom lines on touch began to touch end points. For this I searched a lot, but all tutorials or links only tell us that how can we use drawLine method for line drawing.

[Drawing line on touches moved in COCOS2D](http://iphoneobjectivec.blogspot.in/2011/01/drawing-line-on-touches-moved-in.html) is one of them, but I want to draw custom lines over my background sprite. So any one can tell me that is there any method in cocos2d so that i could use my texture image for line drawing.

If this is possible then please refer me link.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:27:39.617

尝试使用[CCribbon](http://www.cocos2d-iphone.org/api-ref/0.99.4/interface_c_c_ribbon.html)绘制纹理线

**编辑以展开**

我*以为*我以前研究过这个:-)这段代码应该可以适应你的需要，也不是[CCRibbon 方法](https://stackoverflow.com/questions/8749853/draw-a-line-sprite-between-two-points-made-by-sprites-in-cocos2d/8760462#8760462)（虽然它不会像多个 CCRibbon 那样平滑）

# javascript - Nested function: am I creating 10 functions here?

> ID：11293982
> 
> 赞同：1
> 
> 时间：2012-07-02T12:46:30.490
> 
> 标签：javascript

I'm working on a function that is too complicated (processor) so I embedded part of the functionality in a nested "utility function" inside it (print). A simplified version of it looks like this:

```
var out = document.getElementById( "output" );

function processor ( n ) {
    function print( msg ) {
        out.innerHTML  += msg;
    }
    while ( n > 0 ) {
        print( n-- );
        print( ", " );
    }
    print( "<br/>" );
}

for ( var i = 0; i < 10; i++ ) {
    processor( i );
} 
```

You can see it in action in [this JSfiddle](http://jsfiddle.net/kVb99/3/).

The question is: am I really creating 10 instances of the utility function `print()`? If yes, what is a more efficient way to write this code without putting the utility function outside the `processor()` function? I want the `print()` function to only be accessible in `processor()` and nowhere else. One solution is namespace.

I've read this question and even though it's related but it's not directly my answer: [Efficiency of creating an event handler in a nested loop: am I creating 1440 functions here?](https://stackoverflow.com/questions/10709439/efficiency-of-creating-an-event-handler-in-a-nested-loop-am-i-creating-1440-fun)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T12:50:17.517

用 JavaScript 术语来说，*是*的。然而，实际上，JavaScript 引擎本身很可能会重用定义函数的代码，并适当调整范围以供重用。我已经阅读了[Chromium 中使用的](https://stackoverflow.com/questions/10160275/v8-internals-handling-of-anonymous-functions)这种方法。

要仅使 print 功能可在 中访问`processor()`，您必须创建一个 IIFE：

```
var out = document.getElementById( "output" );

var processor = (function () { 
    function print( msg ) {
        out.innerHTML  += msg;
    }

    return function ( n ) {
        while ( n > 0 ) {
            print( n-- );
            print( ", " );
        }
        print( "<br/>" );
    };

}());

for ( var i = 0; i < 10; i++ ) {
    processor( i );
} 
```

您在这里而不是在循环中重新创建函数的原因是因为 a `function`(eg `processor`) 定义了一个新范围，而块（循环等）没有；函数声明被提升到*作用域*的顶部，而不是*块*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:52:01.387

简而言之，是的，你是。但是由于它们都是函数本地的，所以它们会在函数返回时从堆栈中弹出并销毁。由于您`processor()`在 for 循环中串行调用该函数，因此该函数的实例只有一次`print()`有效并可在任何时间点访问。

# asp.net - Recommended way to download remote SQL server database

> ID：11293984
> 
> 赞同：3
> 
> 时间：2012-07-02T12:46:34.970
> 
> 标签：asp.net, sql-server, sql-server-2008, teamcity

I'm corrently setting up our company DTAP environment for our ASP.NET web application. Current setup is like this:

1.  Dev - on local machine with local developer db
2.  Test - on our local company server with local company server DB
3.  Acceptance - Production machine in separate IIS application, running a copy of production db
4.  Production - Production machine on production DB

I want to add another environment in order to be able to reproduce bugs related to the data in the production db. I'm deploying everything using TeamCity and I'm looking for the easiest solution to download the production database (or a backup of it) to our company server and use if for a 'test on live data' environment.

What would be the recommended way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:39:03.203

右键单击目标服务器上的数据库-“任务”-“导入数据”。

将您的生产服务器/表指定为源。

# yii - 如何在 yii 的更新视图中加载多选列表框中的选定列表项？

> ID：11293990
> 
> 赞同：8
> 
> 时间：2012-07-02T12:46:58.907
> 
> 标签：yii, multiple-select, multi-select, yii-inheritance

我有一个`multiple select-list-box`for `Staff`in `Create-Service-Form`，用于在创建新服务时选择多个人员。为此，我可以在一项服务中分配多名员工。

我将`staff_id`字段保存为：
`$model->staff_id = serialize($model->staff_id);`

这里是多选列表框的**更新视图代码：**

```
<div class="row">
    <?php echo $form->labelEx($model,'staff_id'); ?>
    <?php
          $data = array('1' => 'Sam', '2' => 'john', '3' => 'addy');
          $htmlOptions = array('size' => '5', 'prompt'=>'Use CTRL to Select Multiple Staff', 'multiple' => 'multiple');
          echo $form->ListBox($model,'staff_id', $data, $htmlOptions); 
    ?>
    <?php echo $form->error($model,'staff_id'); ?>
</div> 
```

问题是，当我加载表单以更新服务时。我如何选择那些以前保存在数据库中的员工？

我尝试[了这个](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)dropDownList-attributes，但它不起作用。
$选择 | 字符串 | 选定的值

如果有人有解决方案，那么建议我。谢谢各位小伙伴...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T06:33:30.850

这是我为您编写的快速代码，它是一个示例，可以帮助您了解它的工作原理。

```
<div class="row">
  <?php echo $form->labelEx($model,'staff_id'); ?>
  <?php 
    $data = array('101' => 'Faraz Khan', '102' => 'Depesh Saini', '103' => 'Nalin Gehlot', '104' => 'Hari Maliya');
    $selected   = array(
      '102' => array('selected' => 'selected'),
      '103' => array('selected' => 'selected'),
    );
    $htmlOptions = array('size' => '5', 'prompt'=>'Use CTRL to Select Multiple Staff', 'multiple' => 'true', 'options' => $selected);
    echo $form->listBox($model,'staff_id', $data, $htmlOptions);
  ?>
  <?php echo $form->error($model,'staff_id'); ?>
 </div> 
```

玩得开心呀！

# c# - 在不同的行中拆分由逗号分隔的值

> ID：11293991
> 
> 赞同：0
> 
> 时间：2012-07-02T12:47:03.260
> 
> 标签：c#, sql-server

您好我正在尝试从数据库中检索值。我有一排有多个用“，”分隔的图像名称。我想将它们显示在不同的行中。我正在使用以下代码，它适用于两个值。但即使我有三个或更多的值，它也只返回两个。这是我的查询：

```
;with tmp(ImageURL,HeritageId) as
 (

select  LEFT(ImageURL, CHARINDEX(',',ImageURL+',')-1),
    STUFF(ImageURL, 1, CHARINDEX(',',ImageURL+','), '')
from shop.dbo.Images where HeritageId=@HeritageId
union all
select  right(ImageURL, CHARINDEX(',',ImageURL+',')-1),
    STUFF(ImageURL, 1, CHARINDEX(',',ImageURL+','), '')
from Images
where ImageURL > '' and HeritageId=@HeritageId
)
select  ImageURL
from tmp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T13:03:51.163

您的查询看起来像是尝试使用递归 CTE 来拆分字符串。就是这种情况，它应该看起来像这样。

```
;with tmp(ImageURL,Rest) as
 (

select  LEFT(ImageURL, CHARINDEX(',',ImageURL+',')-1),
    STUFF(ImageURL, 1, CHARINDEX(',',ImageURL+','), '')
from Images where HeritageId=@HeritageId
union all
select  LEFT(Rest, CHARINDEX(',',Rest+',')-1),
    STUFF(Rest, 1, CHARINDEX(',',Rest+','), '')
from tmp
where Rest > ''
)
select  ImageURL
from tmp 
```

在递归部分使用 CTE 而不是表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:57:09.203

您是否可以/可以接受将它们作为一个字符串检索，然后使用 Split(',') 返回一个字符串数组？

如果您希望使用 LINQ-TO-SQL 方式，请参阅[此问题。](https://stackoverflow.com/questions/4299979/string-split-in-a-linq-to-sql-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T13:06:10.700

我建议使用（并标记）@Mikael 建议的答案，但是如果您的序列只有 4 个值，那么您可以使用该`PARSENAME`函数来分割一个句点。

```
DECLARE @test TABLE 
(
    [CSVColumn] NVARCHAR(MAX) NOT NULL
)

INSERT INTO @test VALUES ('The PARSENAME function splits on a period.But can only hold.Four.Values - any more and it will return null')
SELECT  PARSENAME([CSVColumn], 4) AS 'Col1', 
        PARSENAME([CSVColumn], 3) AS 'Col2', 
        PARSENAME([CSVColumn], 2) AS 'Col3', 
        PARSENAME([CSVColumn], 1) AS 'Col4'
FROM @test 
```

# ruby-on-rails - 如何使用邀请列表模型构建第一个用户

> ID：11293992
> 
> 赞同：0
> 
> 时间：2012-07-02T12:47:10.540
> 
> 标签：ruby-on-rails, model

我正在尝试为我的网站使用邀请。我想知道；我的第一个用户不需要邀请？我怎样才能破例？我可以猜到，我必须使用救援异常，但我不知道必须在哪里完成？我的 users.rb 模型：

```
class User < ActiveRecord::Base
  attr_accessible :nickname, :email, :password, :password_confirmation, :invitation_token
  has_secure_password
  has_many :friendships
    has_many :friends, :through => :friendships
    has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
    has_many :inverse_friends, :through => :inverse_friendships, :source => :user

  has_many :topics, dependent: :destroy
  has_many :posts, dependent: :destroy

  before_save { |user| user.email = email.downcase }
  before_save { |user| user.nickname = nickname.downcase }
  before_save :create_remember_token

  validates :nickname, presence: true, length: { maximum: 150 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true,
                                        format: { with: VALID_EMAIL_REGEX },
                                        uniqueness: {case_sensitive: false }

    validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

    validates_presence_of :invitation_id, :message => 'gerekli'
    validates_uniqueness_of :invitation_id
    has_many :sent_invitations, :class_name => 'Invitation', :foreign_key => 'sender_id'
    belongs_to :invitation

    before_create :set_invitation_limit

    def invitation_token
        invitation.token if invitation
    end

    def invitation_token=(token)
        self.invitation = Invitation.find_by_token(token)
    end

    private

    def create_remember_token
        self.remember_token = SecureRandom.urlsafe_base64
    end

    def set_invitation_limit
        self.invitation_limit = 5
    end
end 
```

这是 users_controller.rb：

```
def new
  @user = User.new(:invitation_token => params[:invitation_token])
  @user.email = @user.invitation.recipient_email if @user.invitation
end

   def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Giripedia'ya hoşgeldiniz'!"
      redirect_to @user
    else
      render 'new'
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:52:54.853

进行条件验证。让我给你一个简短的例子：

```
class User
  # ...
  validates_presence_of :invitation_id, :if => :invitation_needed?

  # An invitation is needed if there is at least one user. If there
  # are no users, there can't be an invitation.
  def invitation_needed?
    User.all.count >= 1
  end
end 
```

详细信息：参见[条件验证手册](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:31:26.280

我不确定为了保存您的第一个用户而编写条件验证是否是个好主意。

您不想在每次验证用户时都进行计数查询。

您可以使用跳过验证选项从控制台保存您的第一个用户。

```
@user.save(:validate => false) 
```

# c# - 如何将 UTF-8 字符串转换为 Unicode？

> ID：11293994
> 
> 赞同：7
> 
> 时间：2012-07-02T12:47:16.260
> 
> 标签：c#, string, unicode, utf-8

我有显示 UTF-8 编码字符的字符串，我想将其转换回 Unicode。

目前，我的实现如下：

```
public static string DecodeFromUtf8(this string utf8String)
{
    // read the string as UTF-8 bytes.
    byte[] encodedBytes = Encoding.UTF8.GetBytes(utf8String);

    // convert them into unicode bytes.
    byte[] unicodeBytes = Encoding.Convert(Encoding.UTF8, Encoding.Unicode, encodedBytes);

    // builds the converted string.
    return Encoding.Unicode.GetString(encodedBytes);
} 
```

我在玩这个词`"déjà"`。[我已经通过这个在线工具](http://www.cafewebmaster.com/online_tools/utf8_encode)将它转换为 UTF-8 ，所以我开始用字符串测试我的方法`"dÃ©jÃ"`。

不幸的是，通过这种实现，字符串保持不变。

我哪里错了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-02T20:18:03.843

所以问题是 UTF-8 代码单元值已作为 16 位代码单元序列存储在 C#`string`中。您只需验证每个代码单元是否在一个字节范围内，将这些值复制到字节中，然后将新的 UTF-8 字节序列转换为 UTF-16。

```
public static string DecodeFromUtf8(this string utf8String)
{
    // copy the string as UTF-8 bytes.
    byte[] utf8Bytes = new byte[utf8String.Length];
    for (int i=0;i<utf8String.Length;++i) {
        //Debug.Assert( 0 <= utf8String[i] && utf8String[i] <= 255, "the char must be in byte's range");
        utf8Bytes[i] = (byte)utf8String[i];
    }

    return Encoding.UTF8.GetString(utf8Bytes,0,utf8Bytes.Length);
}

DecodeFromUtf8("d\u00C3\u00A9j\u00C3\u00A0"); // déjà 
```

这很容易，但是最好找到根本原因；有人将 UTF-8 代码单元复制到 16 位代码单元的位置。`string`可能的罪魁祸首是有人使用错误的编码将字节转换为 C# 。例如`Encoding.Default.GetString(utf8Bytes, 0, utf8Bytes.Length)`。

* * *

或者，如果您确定您知道用于生成字符串的不正确编码，并且不正确的编码转换是无损的（通常情况下，如果不正确的编码是单字节编码），那么您可以简单地进行反向编码步骤获取原始 UTF-8 数据，然后您可以从 UTF-8 字节进行正确转换：

```
public static string UndoEncodingMistake(string mangledString, Encoding mistake, Encoding correction)
{
    // the inverse of `mistake.GetString(originalBytes);`
    byte[] originalBytes = mistake.GetBytes(mangledString);
    return correction.GetString(originalBytes);
}

UndoEncodingMistake("d\u00C3\u00A9j\u00C3\u00A0", Encoding(1252), Encoding.UTF8); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-08T14:50:10.137

如果您有一个 UTF-8 字符串，其中每个字节都是正确的（'Ö' -> [195, 0] , [150, 0]），您可以使用以下内容：

```
public static string Utf8ToUtf16(string utf8String)
{
    /***************************************************************
     * Every .NET string will store text with the UTF-16 encoding, *
     * known as Encoding.Unicode. Other encodings may exist as     *
     * Byte-Array or incorrectly stored with the UTF-16 encoding.  *
     *                                                             *
     * UTF-8 = 1 bytes per char                                    *
     *    ["100" for the ansi 'd']                                 *
     *    ["206" and "186" for the russian '?']                    *
     *                                                             *
     * UTF-16 = 2 bytes per char                                   *
     *    ["100, 0" for the ansi 'd']                              *
     *    ["186, 3" for the russian '?']                           *
     *                                                             *
     * UTF-8 inside UTF-16                                         *
     *    ["100, 0" for the ansi 'd']                              *
     *    ["206, 0" and "186, 0" for the russian '?']              *
     *                                                             *
     * First we need to get the UTF-8 Byte-Array and remove all    *
     * 0 byte (binary 0) while doing so.                           *
     *                                                             *
     * Binary 0 means end of string on UTF-8 encoding while on     *
     * UTF-16 one binary 0 does not end the string. Only if there  *
     * are 2 binary 0, than the UTF-16 encoding will end the       *
     * string. Because of .NET we don't have to handle this.       *
     *                                                             *
     * After removing binary 0 and receiving the Byte-Array, we    *
     * can use the UTF-8 encoding to string method now to get a    *
     * UTF-16 string.                                              *
     *                                                             *
     ***************************************************************/

    // Get UTF-8 bytes and remove binary 0 bytes (filler)
    List<byte> utf8Bytes = new List<byte>(utf8String.Length);
    foreach (byte utf8Byte in utf8String)
    {
        // Remove binary 0 bytes (filler)
        if (utf8Byte > 0) {
            utf8Bytes.Add(utf8Byte);
        }
    }

    // Convert UTF-8 bytes to UTF-16 string
    return Encoding.UTF8.GetString(utf8Bytes.ToArray());
} 
```

在我的情况下，DLL 结果也是一个 UTF-8 字符串，但不幸的是，UTF-8 字符串是用 UTF-16 编码（'Ö' -> [195, 0], [19, 32]）解释的。因此，150 的 ANSI '-' 被转换为 8211 的 UTF-16 '-'。如果您也遇到这种情况，您可以使用以下代码：

```
public static string Utf8ToUtf16(string utf8String)
{
    // Get UTF-8 bytes by reading each byte with ANSI encoding
    byte[] utf8Bytes = Encoding.Default.GetBytes(utf8String);

    // Convert UTF-8 bytes to UTF-16 bytes
    byte[] utf16Bytes = Encoding.Convert(Encoding.UTF8, Encoding.Unicode, utf8Bytes);

    // Return UTF-16 bytes as UTF-16 string
    return Encoding.Unicode.GetString(utf16Bytes);
} 
```

或本机方法：

```
[DllImport("kernel32.dll")]
private static extern Int32 MultiByteToWideChar(UInt32 CodePage, UInt32 dwFlags, [MarshalAs(UnmanagedType.LPStr)] String lpMultiByteStr, Int32 cbMultiByte, [Out, MarshalAs(UnmanagedType.LPWStr)] StringBuilder lpWideCharStr, Int32 cchWideChar);

public static string Utf8ToUtf16(string utf8String)
{
    Int32 iNewDataLen = MultiByteToWideChar(Convert.ToUInt32(Encoding.UTF8.CodePage), 0, utf8String, -1, null, 0);
    if (iNewDataLen > 1)
    {
        StringBuilder utf16String = new StringBuilder(iNewDataLen);
        MultiByteToWideChar(Convert.ToUInt32(Encoding.UTF8.CodePage), 0, utf8String, -1, utf16String, utf16String.Capacity);

        return utf16String.ToString();
    }
    else
    {
        return String.Empty;
    }
} 
```

如果您需要它，请参阅[Utf16ToUtf8](https://stackoverflow.com/a/14761024/2052388)。希望我能有所帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-02T13:12:46.767

> 我有显示 UTF-8 编码字符的字符串

.NET 中没有这样的东西。string 类只能以 UTF-16 编码存储字符串。UTF-8 编码的字符串只能作为 byte[] 存在。尝试将字节存储到字符串中不会有好的结果；UTF-8 使用没有有效 Unicode 代码点的字节值。当字符串被规范化时，内容将被销毁。因此，在您的 DecodeFromUtf8() 开始运行时恢复字符串已经为时已晚。

仅使用 byte[] 处理 UTF-8 编码的文本。并使用 UTF8Encoding.GetString() 对其进行转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-02T21:07:47.227

您所拥有的似乎是`string`从另一种编码中错误解码的，可能是[代码页 1252](http://en.wikipedia.org/wiki/Windows-1252)，这是美国 Windows 的默认设置。假设没有其他损失，这是如何逆转的。一个不立即明显的损失`non-breaking space`是未显示的字符串末尾的 (U+00A0)。当然最好一开始就正确读取数据源，但也许数据源一开始就存储不正确。

```
using System;
using System.Text;

class Program
{
    static void Main(string[] args)
    {
        string junk = "dÃ©jÃ\xa0";  // Bad Unicode string

        // Turn string back to bytes using the original, incorrect encoding.
        byte[] bytes = Encoding.GetEncoding(1252).GetBytes(junk);

        // Use the correct encoding this time to convert back to a string.
        string good = Encoding.UTF8.GetString(bytes);
        Console.WriteLine(good);
    }
} 
```

结果：

```
déjà 
```