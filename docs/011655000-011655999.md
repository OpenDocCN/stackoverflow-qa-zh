# StackOverflow 问答 11655000-11655999

# android - Android 单一应用特定操作系统

> ID：11655001
> 
> 赞同：1
> 
> 时间：2012-07-25T17:08:12.647
> 
> 标签：android

> **可能重复：**
> [是否可以将 Android 安装配置为运行单个应用程序？](https://stackoverflow.com/questions/4081264/is-it-possible-to-configure-an-android-install-to-run-a-single-app)

所以，基本上，我目前正在开发一个 android 应用程序，该应用程序旨在用于教室内的专用平板电脑。在使用这个应用程序时，我们不希望学生退缩并四处乱窜，忽略他们应该做的事情。有没有办法：

a) 在启动时启动应用程序，因此无法初始访问主屏幕 b) 锁定应用程序，使其无法退出，并且将是唯一运行的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:16:57.217

实现您正在寻找的唯一方法是：

1.  在固件级别修改 Android
2.  让您的应用成为主屏幕替代品。

选项2要容易得多。基本上，您告诉 Android 您的应用是替换主屏幕，然后将其设置为每台设备上的默认设置。这样，每当设备解锁时，都会显示您的应用程序，按下主页按钮只会启动您的应用程序。这基本上会阻止设备打开任何其他应用程序，除非它是通过通知完成的，您可以通过使应用程序全屏来取消通知。现在离开您的应用程序的唯一可能性是通过最近的应用程序，或者在设备抖动或其他东西上启动应用程序的服务。您可以通过确保在您之前没有启动其他应用程序或手动清除最近的应用程序来解决此问题。该服务可以通过简单地不安装任何应用程序来解决。

您可以查看默认的主屏幕应用程序，该应用程序是开源的，可在以下位置获得：

```
https://android.googlesource.com/platform/packages/apps/Launcher2.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:21:08.533

我已经对此进行了大量研究，但选项并不漂亮：

1）编写自己的Android主屏幕

这一项涉及但似乎可行。从理论上讲，您可以选择编写一个只包含指向您的应用程序的链接并且不允许任何其他图标的主屏幕。

试试这个[**链接**](https://stackoverflow.com/questions/3666771/how-can-i-create-a-custom-home-screen-replacement-application-for-android)

2）创建你自己的锁屏

这可能使您可以更好地控制设备，但历史上唯一的选择是使用未发布的 API，现在已更改为不允许这样做。

# c++ - localtime 为在 cygwin shell 上运行的 Windows 程序返回 GMT

> ID：11655003
> 
> 赞同：7
> 
> 时间：2012-07-25T17:08:27.760
> 
> 标签：c++, c, time, cygwin

考虑以下代码：

```
time_t t;
t = time( NULL );
elog << "timezone: " << getenv( "TZ" ) 
     << ", current local time: " << asctime( localtime( &t )); 
```

如果我使用 MSVC 构建此代码，并在 Windows DOS shell 下运行它，我会得到正确的本地时间：

```
timezone: , current local time: Wed Jul 25 13:05:08 2012 
```

但是，如果我在 bash 之类的 cygwin shell 下运行相同的程序，此代码将返回 GMT！

```
timezone: America/New_York, current local time: Wed Jul 25 18:05:08 2012 
```

如果我在 Linux 或 OsX 中运行这个程序，它也会返回正确的本地时间。

为什么？

@Update：现在已经一年了，我发现我在下面给出的答案并不总是有效。

似乎对于某些程序，取消 TZ 并不总是有效。我不知道为什么。但是有一个麻烦的解决方法。基本上，在您取消设置 TZ 之后，您必须检查本地时间是否确实不再返回 GMT，但前​​提是您实际上不在 GMT 时区，并在您调用 localtime() 时计算对 time_t 的手动调整或找时间（）

```
u64 localTimeOffset = 0;

static void unsetTz()
{
   static bool unsetTZ = false;
   if ( !unsetTZ )
   {
      putenv( "TZ=" );
      unsetTZ = true;

      // unsetting TZ does not always work. So we have to check if it worked
      // and make a manual adjustment if it does not. For long running programs
      // that may span DST changes, this may cause the DST change to not take 
      // effect.
      s32 tzOffset = getTzOffset();

      if ( tzOffset )
      {
         static char timeBuf[48];
         char* s = &(timeBuf[0]);
         struct tm* timeInfoGMT;
         struct tm* timeInfoLocal;

         time_t zero = 86400;
         timeInfoGMT = gmtime( &zero );
         u32 GMTHour = timeInfoGMT->tm_hour;

         timeInfoLocal = localtime( &zero );
         u32 localHour = timeInfoLocal->tm_hour;

         if ( localHour == GMTHour )
         {
            // unsetting tz failed. So we have to make a manual adjustment
            localTimeOffset = tzOffset * 60 * 60;
         }
      }
   }
}

s32 getTzOffset()
{
   TIME_ZONE_INFORMATION tzInfo;
   GetTimeZoneInformation( &tzInfo );
   s32 tz = ( tzInfo.Bias / 60 );
   return tz;
} 
```

调用当地时间：

```
 time_t t = getAtTimeFromSomewhere();
  t -= localTimeOffset;
  timeInfo = localtime( &t ); 
```

打电话给 maketime：

```
 struct tm timestr;
 makeATMFromAStringForExample( time, timestr );
 time_t timet = mktime( &timestr );
 timet += localTimeOffset; 
```

美好时光。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T17:15:42.233

这花了我一些时间来弄清楚，我希望它对其他人有用。

POSIX 函数`localtime`将使用环境变量`TZ`来确定要使用的时区。如果`TZ`未设置，它将使用系统的默认时区。

如果我在 Linux 或 OS X 下运行，`TZ`设置正确并且一切正常。如果我在 Windows 上的 shell 中运行此程序，`TZ`则未设置，因此该函数返回操作系统的默认时区，这又会产生正确的结果。

如果我在 Cygwin shell 中运行，`TZ`则设置 - 但由于我使用 MSVC 构建程序，使用 MSVC 自己的 stdc 库 - 它无法解释 Cygwin 的`TZ`变量。所以它默认为格林威治标准时间。

如果该程序是在 Cygwin 下使用 GCC 构建的，我敢打赌它会在 Cygwin shell 中正常工作。

所以答案是确保在调用 POSIX 时间函数的程序中`localtime()`，如果您希望时间函数在 Cygwin 外壳下正常工作，则必须取消设置`TZ`。

我是这样做的：

```
void getLocalTime()
{
   #ifdef WIN32
   static bool unsetTZ = false;
   if ( !unsetTZ )
   {
      putenv( "TZ=" );
      unsetTZ = true;
   }
   #endif // !WIN32

   time_t t;
   t = time( NULL );
   elog << "timezone: " << getenv( "TZ" ) 
        << ", current local time: " << asctime( localtime( &t ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-03T04:04:43.167

在 Cygwin shell 中使用`export TZ=""`可能是最好的方法。

@更新嗨，图纳基。感谢您的编辑！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:26:10.890

尝试在 struct tm 中设置**tm_isdst标志。**

如果夏令时有效，夏令时标志 (tm_isdst) 大于零，如果夏令时无效，则为零，如果信息不可用，则小于零。

如果我没记错的话，在 Windows 中它必须是 -1 才能正常工作。

# django - Django 文档第 2 部分：为什么我不能在一行中导入 Poll、PollAdmin 和 Choices？

> ID：11655007
> 
> 赞同：1
> 
> 时间：2012-07-25T17:08:43.610
> 
> 标签：django

处理 Django 教程“编写你自己的 Django 应用程序”，我在[第 2 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)。

在中途，它指示我向管理员添加一行，以便管理员不仅可以识别 Poll（和 PollAdmin，本教程一直在为一些自定义投票呈现选项配置），还可以识别 Choice。这是（简短的）更新的 admin.py：

```
from polls.models import Poll
from polls.models import Choice
from django.contrib import admin

class PollAdmin(admin.ModelAdmin):
    fieldsets = [
        (None,                  {'fields': ['question']}),
        ('Date information',    {'fields': ['pub_date'], 'classes': ['collapse']}),
        ]

admin.site.register(Poll, PollAdmin)
admin.site.register(Choice) 
```

看到这里，我想不通为什么我不能简单地写

```
admin.site.register(Poll, PollAdmin, Choice) 
```

除了这给了我一个 TypeError，因为

```
register() takes at most 3 arguments (4 given) 
```

这似乎真的......对我来说是任意的。我不明白为什么 register 最多只接受 3 个参数。我对 Django 的理解仍然处于非常巫术、货物崇拜的水平，所以我明白了。没有。工作。但我想知道是否可以阐明为什么我不能同时从 admin.site 中提取所有三个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:46:07.813

因为您在这里进行了两种不同类型的注册，以及两种不同类型的对象。我认为您认为这是在说“向管理员注册这三件事”，但事实并非如此。

第一行是“使用我定义的 PollAdmin 类向管理员注册 Poll 模型”。

第二行是“使用默认设置向管理员注册 Choice 模型”。

因此，将它们全部放在同一行中是没有意义的。您一次只注册一个模型，但一个使用一些显式选项，另一个使用默认选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:48:26.830

`register`只接受一个或两个参数（第三个是`self`由类自动传递的）。如果您指定一个参数，它必须是一个模型类，Django 管理员将简单地使用`ModelAdmin`它的默认值。如果指定两个参数，第一个必须是模型类，第二个必须是`ModelAdmin`子类。

你不能随意地将参数传递给方法，每个参数都*意味着一些东西*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:13:42.017

试试这个：

```
from django.contrib import admin.site

register(Poll, PollAdmin, Choice) 
```

假设您在“myclass”类中有一个方法，例如：

```
def example_method(param1,param2):
//do stuff 
```

当您使用 时`myclass.example_method(param2)`，您已`param1`被隐式传递给`myclass`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T17:35:31.887

查看源代码。不是 Django 的东西，而是基本的 Python。

注册方法：

```
def register(self, model_or_iterable, admin_class=None, **options):
    """
    stuff to read
    """
    #...code...
    validate(admin_class, model)
    self._registry[model] = admin_class(model, self) 
```

启动一个 ModelAdmin 对象...

```
class ModelAdmin(BaseModelAdmin):
    def __init__(self, model, admin_site):
        self.model = model
        self.opts = model._meta
        self.admin_site = admin_site
        super(ModelAdmin, self).__init__() 
```

...如果您阅读了“选项”的使用，是否可以解决错误以及是否有人想要扩展 ModelAdmin！像这样：

```
class MyModelAdmin(ModelAdmin):
    def __init__(self, model, admin_site, my_param = None):
        self.my_property = my_param
        super(MyModelAdmin, self).__init__(model, admin_site) 
```

如果你刚开始学习 Django 和 Python，这类问题完全没有用，而且毫无意义！

# extjs4 - 尝试显示商店中的内容时出错

> ID：11655009
> 
> 赞同：0
> 
> 时间：2012-07-25T17:08:44.673
> 
> 标签：extjs4, extjs4.1, extjs-mvc

我正在尝试显示`console.log(r.get('info'))`，但是我得到的输出为`(an empty string)`. 什么可能导致此错误？

```
var myst = Ext.getStore('MyStore');    
var r = myst.getAt(0);
myst.on('load', function() {
    r = myst.getAt(0);
    console.log(r);
    console.log(r.get('info'));
});

UPDATE 1 
```

**模型**

```
Ext.define('MyApp.model.MyModel', {
    extend: 'Ext.data.Model',

    fields: [

        {
            name: 'info'
        }
    ]
}); 
```

**更新 2**

我实际上是`Object { phantom=true, internalId="ext-record-18", raw={...}, more...}`在打印`console.log(r)'`和原始内容时得到的，我明白了`info:"myname"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:32:22.893

要显示数组或对象，请尝试 console.dir(object)。

# javascript - Ruby On Rails：引用同一对象的表单字段

> ID：11655016
> 
> 赞同：0
> 
> 时间：2012-07-25T17:09:27.557
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个表单，其中包含与同一 object_name 关联的多个字段`:result`。我有一些 jquery/javascript，根据表单中较早选择的字段，隐藏除了其中一个字段之外的所有字段。如何确保当我点击提交按钮时，`:result`对象被赋予正确的值，具体取决于实际显示的字段？似乎由于所有其他字段都被隐藏了，rails 对`:result`应该使用哪个字段感到困惑。

```
<div class="Collection1 desc">

    <div id="pf" class="result" style="display: none;">
    <%= f.label :result %>
    <%= f.radio_button :result, 'pass' %> Pass
    <%= f.radio_button :result, 'fail' %> Fail
    <br><br>
    </div>

    <div id="int" class ="result" style="display: none;">
    <%= f.label :result %>
    <%= f.number_field :result %>
    </div>

    <div id="text" class ="result" style="display: none;">  
    <%= f.label :result %>
    <%= f.text_field :result %>
    </div>

    <div id="area" class ="result" style="display: none;">
    <%= f.label :result %>
    <%= f.text_area :result %>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:21:36.990

您还应该禁用隐藏的字段。这样他们就不会与表单一起提交。

# jquery - 为单选按钮添加唯一名称

> ID：11655017
> 
> 赞同：0
> 
> 时间：2012-07-25T17:09:29.803
> 
> 标签：jquery, html

我有一个 jQuery 脚本，它将抓取一些 html 并在每次单击“添加产品”时重复它。我让它看起来工作得很好，但我意识到可以添加多个产品（同一个产品）。因此，单选按钮会干扰。他们需要唯一的无线电名称属性。我什至不知道从哪里开始这样做，我想我可以有一个计数器并将其添加到当前名称中......在此先感谢您的帮助。

这是一个html示例：

```
<div id="product-container" class="product-container" style="display:none">
<div class="product-wrapper white-rounded">
    <div id="product-name" style="display:none"></div>
        <h4>Example Product 1</h4>
        <span class="align-right">
            <input name="select2" type="radio"><strong style="margin-right:20px">Option 1</strong>
            <input name="select2" type="radio"><strong>Option 2</strong>
        </span>
        <div class="remove float-right">
           <a href="#"><div class="img-remove"></div>Remove</a>
        </div>
        <div class="clear"></div>

   </div>
</div> 
```

而且，这里是 jQuery 抓取代码并在锚点处将其吐出：

```
$('.add-product').click(function() {
        if (Products < 4 || (Products == 4 && Products2 == 1)) {
        //Store html contents in Variable
            var thisProduct = $('#product-container').html()
        //Add account html to account center anchor point
            $('.add-product').before(thisProduct)
            $('#product-name').text(productName)
        //Add one more Product Count
            Products++
        //Add Product Count value to hidden Input Field, then manually trigger the change event.
            $('.product-count').val(Products).change()
        //Scroll to top of page after account is added
            $('html, body').animate({scrollTop:0}, 'slow');
        }

        else {
            alert('HALP!');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:14:03.240

您是否尝试过增加名称？

这样它就永远不会重复相同的名称！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:17:33.730

最快的解决方法是运行一个计数并将其附加到您的 id 或类，这样它就永远是唯一的

```
 var un1 = 0;

for(yourloop){
    $("#whatever").append("idname"+un1);
    un1++;
} 
```

# java - 为什么 Try/Catch 块会创建新的变量范围？

> ID：11655020
> 
> 赞同：58
> 
> 时间：2012-07-25T17:09:38.773
> 
> 标签：java, scope, try-catch

例如：

```
try
{
    SomeObject someObject = new SomeObject();
    someObject.dangerousMethod();
}
catch(Exception e)
{
}
someObject.anotherMethod(); //can't access someObject! 
```

但是您可以在`try/catch`块之前声明它，然后它可以正常工作：

```
SomeObject someObject;
try
{
    someObject = new SomeObject();
    someObject.dangerousMethod();
}
catch(Exception e)
{
}
someObject.anotherMethod(); //works fine 
```

我只是想知道这样做的设计原因。为什么在`try/catch`块内创建的对象不在方法其余部分的范围内？也许我并没有深入了解 a 是如何`try/catch`工作的，只是看着`Exceptions`被抛出。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-25T17:11:01.150

> 为什么在 try/catch 块中创建的对象不在方法其余部分的范围内？

他们是。在块中***声明****的变量***`try/catch`不在包含块的范围内，原因与所有其他变量声明在它们发生的范围内都是本地的：这就是规范定义它的方式。:-)（更多下文，包括对您评论的回复。）**

 **这是在 a中*创建*的对象`try/catch`，可在其外部访问：

```
SomeObject someObject = null;
try
{
    someObject = new SomeObject();
    someObject.dangerousMethod();
}
catch(Exception e)
{
}
someObject.anotherMethod(); // This is fine -- unless the SomeObject
                            // constructor threw the exception, in which
                            // case someObject will be null 
```

注意区别。声明*变量*的位置*定义*了它存在的范围，而不是*创建**对象*的位置。

 *但是根据上面的方法名称等，更有用的结构是：

```
SomeObject someObject = new SomeObject();
try
{
    someObject.dangerousMethod();
}
catch(Exception e)
{
}
someObject.anotherMethod(); 
```

* * *

回复您的评论：

> 我想我对为什么甚至为 try/catch 块创建另一个范围感到困惑。

在 Java 中，所有块都创建范围。an 的主体、an的主体、a`if`的主体等——它们都创建了一个新的嵌套变量范围：`else``while`

```
if (foo) {
    SomeObject bar = new SomeObject();
}
bar.doSomething(); // <== Compilation error, `bar` is not defined 
```

（事实上​​，即使是没有任何控制结构的块也会创建一个。）

如果你仔细想想，它是有道理的：有些块是有条件的，比如定义`if`or主体的块`while`。在上面`if`，`bar`可能已经或可能没有被声明（取决于 的值`foo`），这是没有意义的，因为编译器当然没有运行时值的概念`foo`。所以可能是为了一致性，Java 的设计者让**所有**块创建一个新的嵌套范围。（*JavaScript*的设计者走了另一条路——根本没有块作用域，尽管它正在被添加——这种方法*也*让人们感到困惑。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T17:14:43.513

在 Java 中，只要有一`{ }`对，就可以创建一个新范围。

考虑以下

```
class ScopeTest {
    public static void main(String[] args) {
        int i = 0;
        { int j = 0; System.out.println(j); }
        { int j = 2; System.out.println(j); }
    }
} 
```

try/catch 只是遵循这个习惯用法，并强制`{ }`创建一对。

要回应您对非括号 if 语句的跟进，请考虑：

```
class MultiRTree {
    public static void main(String...args) {
        boolean b = args.length == 0;
        if(b) String s = new String("hello");
    }
} 
```

结果是

```
c:\files\j>javac ScopeTest.java
ScopeTest.java:4: not a statement
        if(b) String s = new String("hello");
              ^
ScopeTest.java:4: ';' expected
        if(b) String s = new String("hello");
                    ^
2 errors 
```

但是，这将编译得很好。

```
class ScopeTest {
    public static void main(String...args) {
        boolean b = args.length == 0;
        if(b) new String("hello");
    }
} 
```

为什么会这样，根据 JLS 第 14 章第 9 节，如果定义为：

```
IfThenStatement:
    if ( Expression ) Statement 
```

而语句定义为（14.5）

```
Statement:
    StatementWithoutTrailingSubstatement
    LabeledStatement
    IfThenStatement
    IfThenElseStatement
    WhileStatement
    ForStatement

StatementWithoutTrailingSubstatement:
    Block
    EmptyStatement
    ExpressionStatement
    AssertStatement
    SwitchStatement
    DoStatement
    BreakStatement
    ContinueStatement
    ReturnStatement
    SynchronizedStatement
    ThrowStatement
    TryStatement 
```

因此，块、表达式语句或空语句都可以。但是声明（在第 6 章中定义）不在语句的语法中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T17:12:46.410

变量或对象的范围在定义它的范围内（由大括号 {} 定义）。

由于 try catch 启动了一个新的范围，其中可能会引发一些错误，因此在 try catch 中定义的对象在其范围之外不可用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-25T17:18:39.400

每次使用方括号“{”时，您都在用 C++ 和 Java 表达一个新的范围。您尝试尝试某个操作需要一些内部设置，并且限定名称允许快速跳出 try 块而无需进行大量清理。

只要不存在名称冲突（如在 Python 中），某些语言将允许您访问范围之外的那些范围变量，但这需要稍微不同的内部堆栈结构，并且无论如何仍然可能增加 try catch 的成本。

这也是Java中定义范围定义的方式——正如许多其他答案所指出的那样。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-25T17:14:53.590

`try/catch`创建一个新范围的原因很简单，因为它是一个块级元素。事实上，简单地`{}`随机放置在一个方法中将创建一个具有自己本地范围的新代码块。***

# javascript - Javascript Clusterfck 指标

> ID：11655021
> 
> 赞同：1
> 
> 时间：2012-07-25T17:09:39.900
> 
> 标签：javascript, similarity, trigonometry, euclidean-distance

所以我正在将旧的数据可视化转换为新平台，我有点卡在他们的社区排序功能上。在原始代码中，作者似乎使用了带有余弦相似度计算器的凝聚聚类。我认为在 Javascript 中解决此问题的最佳方法是使用我的自定义余弦相似度函数作为指标，使用 clusterfck 制作一棵树。对于我传递的每组数据，树几乎正确地排序。（但由于项目规范，“几乎”还不够好）。我检查了我的算法，一切看起来都正确，但是当我使用余弦相似度和欧几里得距离比较我的结果时，我得到了相同的排序结果。

这可能是什么原因造成的？我想我可能错误地传递了一些东西，而 clusterfck 将欧几里得作为默认值传递。下面是我的一段代码。有人可以验证吗？（另外，有没有更简单的方法来计算余弦相似度？我认为 JS 没有内置的点积）。

```
clusters = clusterfck.hcluster(relationArray, clusterfck.cosSim2, clusterfck.SINGLE_LINKAGE);
postOrder(clusters);
function postOrder(t) {
i++;
if (t == null) {
    return;
} else {
    postOrder(t.left);
    postOrder(t.right);
    if (t.left == null && t.right == null) {
        communityArr.push(t.canonical[0]);
    } else {
        return;
    }
}
}

function cosSim2(arr1, arr2) {
var d1 = 0,
    d2 = 0,
    cos = 0;
for(var i = 0; i < arr1.length; i++) {
    d1 += Math.pow(arr1[i], 2);
}

for(var j = 0; j < arr2.length; j++) {
    d2 += Math.pow(arr2[j], 2);
}

d1 = Math.sqrt(d1);
d2 = Math.sqrt(d2);

for(var j = 0; j < arr2.length; j++) {
    if (arr1[j] == null) {
        cos += 0;
    } else {
        cos += arr1[j] * arr2[j];
    }
}
var cosSimilarity = cos / (d1 * d2);
return cosSimilarity;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T09:11:15.570

我想这个回复对你来说太晚了。但万一其他人偶然发现：

问题是您`clusterfck.hcluster`使用参数`clusterfck.cosSim2`作为距离度量进行调用。但是由于您的真实距离函数很简单`cosSim2`，因此您可以`clusterfck.hcluster`使用未定义的距离函数有效地调用，并且 clusterfck 使用默认的距离函数，即“欧几里得”......

另请注意，您的函数确实测量了向量之间的相似性，而不是它们的距离。即：余弦相似度越大，向量越相似（即它们之间的夹角越小）。

但`clusterfck.hcluster`需要一个真正的距离测量。也就是说，相反的情况应该是正确的：距离度量的值越大，向量越远（即，向量越*不相似*）。

使用您的函数调用`clusterfck.hcluster`将产生效果，即最*不相似*的项目聚集在一起。

您可以轻松地从余弦相似度函数导出距离函数，如下所示：

```
function cosDist(arr1, arr2) {
    return 1 - cosSim2(arr1, arr2);
} 
```

这个新函数`cosDist`的值范围为 0 到 2，相同向量的距离为 0（如预期），最远（即不相似）的向量的距离为 2。

另一个注意事项：维基百科文章[http://en.wikipedia.org/wiki/Cosine_similarity](http://en.wikipedia.org/wiki/Cosine_similarity "余弦相似度")指出这个 cosDist 在数学意义上不是一个适当的距离度量（三角不等式通常在这里不成立）但根据我的经验在使用此函数进行层次聚类时，在实践中不是问题。它经常以这种方式使用。尽管如此，还是有一种方法可以从余弦导出真正的距离度量，在同一篇维基百科文章中也提到过：[https ://en.wikipedia.org/wiki/Cosine_similarity#Angular_distance_and_similarity](https://en.wikipedia.org/wiki/Cosine_similarity#Angular_distance_and_similarity "角距离和相似度")

# jsp - 为什么我收到错误：需要“发件人”电话号码

> ID：11655035
> 
> 赞同：0
> 
> 时间：2012-07-25T17:10:46.073
> 
> 标签：jsp, twilio

我正在使用 Twilio API 从我的 Twilio 号码向我的手机发送短信。

我有两个文件： 1\. 带有表单和方法调用的 JSP 文件 2\. 带有 Twilio API 的 java 类，它接收来自项目 1 的方法调用并执行发送短信部分（请参阅下面的文件）

**为什么我会收到异常“发件人”电话号码是必需的？**

该程序有效，交付正确，尝试了很多次。我没有收到错误。有用。只是这个例外让我感到困惑。我已经购买了 twilio 号码，所以我没有使用试用号码。

有一个与之关联的堆栈跟踪，但可以稍后发布。

在 smsParams.put("From", from) 我尝试直接用这样的单元格编号替换 from （使用有效的否）： smsParams.put("From", "1231231234"); 然后我得到一个异常，它转到下一行 (smsParams.put("To", from);) 并说需要一个 "To" 号码。当我用数字替换变量时，它会跳到下一行并为消息正文提供异常。

谢谢

```
//***********************************
//java class MyMessage
//***********************************

package package_sms;
import java.util.HashMap;
import java.util.Map;
import com.twilio.sdk.TwilioRestClient;
import com.twilio.sdk.TwilioRestException;
import com.twilio.sdk.resource.factory.SmsFactory;
import com.twilio.sdk.resource.instance.Account;

public class MyMessage {

/** The Constant ACCOUNT_SID. */
public static final String ACCOUNT_SID = "AC11d68faa7db85a48557aa33ae0b88261";

/** The Constant AUTH_TOKEN. */
public static final String AUTH_TOKEN = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

public String to, from, text;

    public void provideNumbers(String to, String from, String text)
    {
        // Create a rest client
        TwilioRestClient client = new TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN);

        // Get the main account (The one we used to authenticate the client
        Account mainAccount = client.getAccount();

        // Send an sms
        SmsFactory smsFactory = mainAccount.getSmsFactory();
            Map<String, String> smsParams = new HashMap<String, String>();
        smsParams.put("From", from);    // Twillio No
        smsParams.put("To", to);        // target phone No
        smsParams.put("Body", text);    // message text
        try 
        {
            smsFactory.create(smsParams);
        } 
        catch (TwilioRestException e) 
        {
            e.printStackTrace();
        }   
    }

<% *****************************
// jsp file SendSms
***************************** %>

<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="package_sms.MyMessage"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>form</title>
</head>
    <body style="background-color:Azure;">
        <h3>Welcome to your text messenger</h3>
        <form action="SendSms.jsp" name="form1" method="POST" >
        From: <input type="text" name="phoneFrom" style="background-color: Beige;border:1px solid Black;"/><br><br> 
        To: <input type="text" name="phoneTo" style="background-color: Beige;border:1px solid Black;"/><br><br>
        Message text: <input type="text" name="messageText" style="background-color: Beige;border:1px solid Black;"/><br><br>
        <input type="submit" name="submit" value="Send Message" />
        </form><br>

        <%  /* Declared string variables that provide parameters to the 
               call to provideNumber method. provideNumbers method is located in MyMessage class.
               provideNumbers method is called on a 'message' object.  */

        String number_from = request.getParameter("phoneFrom");
        String number_to = request.getParameter("phoneTo");
        String messageBody = request.getParameter("messageText");

        MyMessage message = new MyMessage();
            message.provideNumbers(number_to, number_from, messageBody);
            %>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:01:05.497

错误在您的 JSP 页面中。加载 JSP 时，它会执行所有代码。该代码的一部分是您获取输入并调用您的方法。

但是，当文件首次加载时，表单中没有值。因此 getParameter 调用得到空值。因此，“message.provideNumbers”方法正在传递您的 Java 代码空值。这反过来意味着当您的 Java 代码尝试调用 Twilio 时，它正在传递空值并触发异常。

要更正此问题，您可以在 IF 语句中将 JSP Java 代码括起来，检查变量是否具有条目。例如：

```
<% if (request.getParameter("phoneFrom") != null 
       && request.getParameter("phoneTo") != null 
       && request.getParameter("messageText") != null) {  

    String number_from = request.getParameter("phoneFrom");
    String number_to = request.getParameter("phoneTo");
    String messageBody = request.getParameter("messageText");

    MyMessage message = new MyMessage();
    message.provideNumbers(number_to, number_from, messageBody);
}%> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:34:06.667

~~尽管您在 JSP 中包含了 MyMessage，但您并没有为 from、to 和 message 变量设置值。从请求中获取它们并初始化这些变量。~~

我刚刚看到我确实监督了一些事情......在您的 JSP 末尾，有来自请求的分配和 JSP 上的一些逻辑。我建议将包含的类中的请求作为 bean 处理，因此您确定该过程在“绘制”页面之前完成，因此您将能够显示一些处理结果。

在您的 JSP 中，**一开始**

```
<jsp:useBean id="myBean" scope="request" class="package_sms.MyMessage">
   <% myBean.provideNumbers( request ); %>
</jsp:useBean> 
```

...在你的课堂上，像这样

```
public void provideNumbers(HTTPServletRequest request)
{
    String number_from = request.getParameter("phoneFrom");
    String number_to = request.getParameter("phoneTo");
    String messageBody = request.getParameter("messageText");
    ...
    smsParams.put("From", number_from);    // Twillio No
    smsParams.put("To", number_to);        // target phone No
    smsParams.put("Body", messageBody);    // message text 
```

在类中，您可以设置 a`Public String resultString`并根据发送过程的结果显示一条消息，并且在 JSP 中，您可以使用类似的内容将其打印出来`<%= myBean.resultString %>`

# asp.net - aspx 页面如何知道在哪里“查找”它导入的 DLL？

> ID：11655036
> 
> 赞同：2
> 
> 时间：2012-07-25T17:10:50.040
> 
> 标签：asp.net, import

我想更改我的 MS Visual Web Developer 2010 解决方案中的 DLL*导入*的输出路径，但我想知道是否需要（以及如何）告诉它该 DLL 已移动到*何处。*

或者它是否知道在 \bin\ 子目录中查找？（这就是它现在的组织方式）。

我查看了 .vb 页面，只看到了“Imports *MyLibrary* ”，但没有提到它的位置。

*（对不起这个基本问题，我刚刚从一个 ASPX 程序员那里接手了这个，我对 MS VWD 不是很熟悉）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:06:58.127

这可以通过修改 web 应用程序根目录中的 web.config 文件来设置。请参阅有关[元素的](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)[MSDN 文章`<probing>`](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)。

此外，GAC 当然可以用作 DLL 的通用来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:07:38.640

以下是我的理解：

1.  文件后面的代码需要引用它们所依赖的类的 dll。这些 dll 可以在 GAC 中，也可以在 bin 目录中，甚至在另一个目录中。在编译期间，文件将被复制到 bin 目录（除非引用指定，否则不会复制 GAC dll）

2.  按需编译的代码（例如 .aspx 页面或在 MVC .vbhtml 页面的情况下）可以使用项目没有引用的类，只要在编译该代码时可以找到 dll。如果 dll 在 bin 目录或 bin 目录的子目录中，则应该可以找到它。

在您的情况下，可能未指定库的位置，因为该项目具有对该 dll 的引用，并且它位于 bin 目录的子目录中。

# perl - perl 'require' 在开始块中

> ID：11655042
> 
> 赞同：5
> 
> 时间：2012-07-25T17:11:09.580
> 
> 标签：perl, module, runtime, require

我有以下代码：

```
#!/usr/bin/env perl
use strict;
use warnings;
use feature 'say';

BEGIN {
       my $supported = undef;
       *compute_factorial = sub { if (eval { require bignum; bignum->import(); 1;}) {
                                    my $num       = shift;
                                    my $factorial = 1;
                                    foreach my $num (1..$num) {
                                        $factorial *= $num; 
                                    }
                                    return $factorial;
                                  }  else {
                                       undef;
                                     } };
       };

my $f = compute_factorial(25);
say $f; 
```

我只是在测试一些东西，而不是真正的生产代码......我`bignum`的机器上确实有编译指示（完全可以使用 加载`use`），我想知道为什么`require`不能正常工作（我得到的是指数数字而不是“大数字”）在这种情况下？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:29:40.803

bignum 的 import 需要在编译它打算生效的代码之前调用，否则它不起作用。在这里，BEGIN 在您实际的 compute_factorial 调用之前调用它，但*不是*在关键`my $factorial = 1;`编译之前调用。

对于这种情况，更好的方法是直接使用 Math::Big*：

```
if (eval { require Math::BigInt }) {
    my $num = shift;
    my $factorial = Math::BigInt->new(1);
    foreach my $num (1..$num) {
        $factorial *= $num;                            
    }
    return $factorial;
} else {
    undef;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:21:55.613

```
BEGIN {
   require bignum;
   import bignum;
   my $x = 1;
} 
```

和

```
require bignum;
import bignum;
my $x = 1; 
```

是相同的，因为`require`和在已经编译`import`之后执行`my $x = 1;`，所以 bignum 永远没有机会`my $x = 1;`编译成`my $x = Math::BigInt->new(1);`. 请记住，

```
use bignum;
my $x = 1; 
```

实际上是

```
BEGIN {
   require bignum;
   import bignum;
}
my $x = 1; 
```

并不是

```
BEGIN {
   require bignum;
   import bignum;
   my $x = 1;
} 
```

解决方案是

```
BEGIN {
   my $sub;
   if (eval { require bignum; }) {
      $sub = eval(<<'__EOI__') or die $@;
         use bignum;
         sub {
            my ($num) = @_;
            my $factorial = 1;
            $factorial *= $_ for 2..$num;
            return $factorial;
         }
__EOI__
   } else {
      $sub = sub { croak "Unsupported" };
   }

   *factorial = $sub;
} 
```

当然，既然您可以简单地消除杂注，那将是最好的。

```
BEGIN {
   my $sub;
   if (eval { require Math::BigInt; }) {
      require Math::BigInt;
      $sub = sub {
         my ($num) = @_;
         my $factorial = Math::BigInt->new(1);
         $factorial *= $_ for 2..$num;
         return $factorial;
      };
   } else {
      $sub = sub { croak "Unsupported" };
   }

   *factorial = $sub;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:24:59.513

与许多其他 pragma 一样，在新版本的 Perl`bignum`中，仅在您导入它的范围内有效。但是，与许多不同的是，它还会在升级范围内的数字时造成一些时髦的混乱，而这些数字并不完全适用于`require`. 您将不得不中断检查它的存在并在两个不同的文件中使用以隔离范围并仍然让它发挥它的魔力。

大.pl

```
if (eval { require bignum; 1 }) {
    require big_loader;
}

print big_loader::big_num_returner();

print "still ok\n"; 
```

big_loader.pm

```
package big_loader;
use bignum;

sub big_num_returner {
    return 2**512
}

1; 
```

# android - 惰性列表项不按每项仅按每行单击

> ID：11655044
> 
> 赞同：0
> 
> 时间：2012-07-25T17:11:16.553
> 
> 标签：android, android-listview, android-imageview

我一直在努力让这个工作，但我无法挽救我的生命，我希望你们中的一个人知道如何去做。基本上，我有一个在惰性 ListView 中加载的自然图片列表，但我的问题是我只能使该行可点击。我需要使单个图像可点击。其他一切都像魅力一样，我非常感谢您的帮助。

活动：

```
public class AmainActivityNature extends Activity {

    ListView list;
    LazyAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        list=(ListView)findViewById(R.id.list);
        adapter=new LazyAdapter(this, mStrings, mphotos);
        list.setAdapter(adapter);

        Button bLeft = (Button) findViewById(R.id.buttonLeft);
        bLeft.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent mainIntentOne = new Intent(AmainActivityNature.this, AmainActivityNature.class);
                AmainActivityNature.this.startActivity(mainIntentOne);

                /* Finish splash activity so user cant go back to it. */
                AmainActivityNature.this.finish();

                /* Apply our splash exit (fade out) and main
                   entry (fade in) animation transitions. */
                overridePendingTransition(R.anim.animation_enterl, R.anim.animation_leaver);

            }   
            });
        Button bRight = (Button) findViewById(R.id.buttonRight);
        bRight.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent("com.testing.image.AMAINACTIVITYNATURE"));
                finish();
            }
            });

list.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                 switch (arg2)
                 {
                    case 0:
                     Intent newActivity0 = new Intent(AmainActivityNature.this,NatureTwoOne.class);     
                     startActivity(newActivity0);
                    break;
                    case 1:
                     Intent newActivity1 = new Intent(AmainActivityNature.this,NatureTwoTwo.class);     
                     startActivity(newActivity1);
                    break;
                    case 2:
                     Intent newActivity2 = new Intent(AmainActivityNature.this,NatureTwoThree.class);     
                     startActivity(newActivity2);
                    break;
                    case 3:
                     Intent newActivity3 = new Intent(AmainActivityNature.this,NatureTwoFour.class);     
                     startActivity(newActivity3);
                    break;
                    case 4:
                         Intent newActivity4 = new Intent(AmainActivityNature.this,NatureTwoFive.class);     
                         startActivity(newActivity4);
                        break;
                        case 5:
                         Intent newActivity5 = new Intent(AmainActivityNature.this,NatureTwoSix.class);     
                         startActivity(newActivity5);
                        break;
                        case 6:
                         Intent newActivity6 = new Intent(AmainActivityNature.this,NatureTwoSeven.class);     
                         startActivity(newActivity6);
                        break;
                        case 7:
                         Intent newActivity7 = new Intent(AmainActivityNature.this,NatureTwoEight.class);     
                         startActivity(newActivity7);
                        break;
                        case 8:
                             Intent newActivity8 = new Intent(AmainActivityNature.this,NatureTwoNine.class);     
                             startActivity(newActivity8);
                            break;
                            case 9:
                             Intent newActivity9 = new Intent(AmainActivityNature.this,NatureTwoTen.class);     
                             startActivity(newActivity9);
                            break;
                            case 10:
                             Intent newActivity10 = new Intent(AmainActivityNature.this,NatureTwoEleven.class);     
                             startActivity(newActivity10);
                            break;
                            case 11:
                             Intent newActivity11 = new Intent(AmainActivityNature.this,NatureTwoTwoelve.class);     
                             startActivity(newActivity11);
                            break;
                            case 12:
                                 Intent newActivity12 = new Intent(AmainActivityNature.this,NatureTwoThirteen.class);     
                                 startActivity(newActivity12);
                                break;
                                case 13:
                                 Intent newActivity13 = new Intent(AmainActivityNature.this,NatureTwoFourteen.class);     
                                 startActivity(newActivity13);
                                break;
                                case 14:
                                 Intent newActivity14 = new Intent(AmainActivityNature.this,NatureTwoFifteen.class);     
                                 startActivity(newActivity14);
                                break;
                                case 15:
                                 Intent newActivity15 = new Intent(AmainActivityNature.this,NatureTwoSixteen.class);     
                                 startActivity(newActivity15);
                                break;
                                case 16:
                                     Intent newActivity16 = new Intent(AmainActivityNature.this,NatureTwoSeventeen.class);     
                                     startActivity(newActivity16);
                                    break;
                                    case 17:
                                     Intent newActivity17 = new Intent(AmainActivityNature.this,NatureTwoEighteen.class);     
                                     startActivity(newActivity17);
                                    break;
                                    case 18:
                                     Intent newActivity18 = new Intent(AmainActivityNature.this,NatureTwoNineteen.class);     
                                     startActivity(newActivity18);
                                    break;
                                    case 19:
                                         Intent newActivity19 = new Intent(AmainActivityNature.this,NatureTwoTwoenty.class);     
                                         startActivity(newActivity19);
                                        break;
                                        case 20:
                                         Intent newActivity20 = new Intent(AmainActivityNature.this,NatureTwoTwoentyone.class);     
                                         startActivity(newActivity20);
                                        break;
                                        case 21:
                                         Intent newActivity21 = new Intent(AmainActivityNature.this,NatureTwoTwoentytwo.class);     
                                         startActivity(newActivity21);
                                        break;
                                        case 22:
                                         Intent newActivity22 = new Intent(AmainActivityNature.this,NatureTwoTwoentythree.class);     
                                         startActivity(newActivity22);
                                        break;
                                        case 23:
                                             Intent newActivity23 = new Intent(AmainActivityNature.this,NatureTwoTwoentyfour.class);     
                                             startActivity(newActivity23);
                                            break;
                                            case 24:
                                             Intent newActivity24 = new Intent(AmainActivityNature.this,NatureTwoTwoentyfive.class);     
                                             startActivity(newActivity24);
                                            break;
                    default:
                      // Nothing do!
                  }
            }
        });

        Button b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(listener);
    }

    @Override
    public void onDestroy()
    {
        list.setAdapter(null);
        super.onDestroy();
    }

    public OnClickListener listener=new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            adapter.imageLoader.clearCache();
            adapter.notifyDataSetChanged();
        }
    };

    private String[] mphotos={
            "http:testingsite.com/naturemain/2.jpg",
            "http:testingsite.com/naturemain/4.jpg",
            "http:testingsite.com/naturemain/6.jpg",
            "http:testingsite.com/naturemain/8.jpg",
            "http:testingsite.com/naturemain/10.jpg",
            "http:testingsite.com/naturemain/12.jpg",
            "http:testingsite.com/naturemain/14.jpg",
            "http:testingsite.com/naturemain/16.jpg",
            "http:testingsite.com/naturemain/18.jpg",
            "http:testingsite.com/naturemain/20.jpg",
            "http:testingsite.com/naturemain/22.jpg",
            "http:testingsite.com/naturemain/24.jpg",
            "http:testingsite.com/naturemain/26.jpg",
            "http:testingsite.com/naturemain/28.jpg",
            "http:testingsite.com/naturemain/30.jpg",
            "http:testingsite.com/naturemain/32.jpg",
            "http:testingsite.com/naturemain/34.jpg",
            "http:testingsite.com/naturemain/36.jpg",
            "http:testingsite.com/naturemain/38.jpg",
            "http:testingsite.com/naturemain/40.jpg",
            "http:testingsite.com/naturemain/42.jpg",
            "http:testingsite.com/naturemain/44.jpg",
            "http:testingsite.com/naturemain/46.jpg",
            "http:testingsite.com/naturemain/48.jpg",
            "http:testingsite.com/naturemain/50.jpg"
    };

    private String[] mStrings={
            "http:testingsite.com/naturemain/1.jpg",
            "http:testingsite.com/naturemain/3.jpg",
            "http:testingsite.com/naturemain/5.jpg",
            "http:testingsite.com/naturemain/7.jpg",
            "http:testingsite.com/naturemain/9.jpg",
            "http:testingsite.com/naturemain/11.jpg",
            "http:testingsite.com/naturemain/13.jpg",
            "http:testingsite.com/naturemain/15.jpg",
            "http:testingsite.com/naturemain/17.jpg",
            "http:testingsite.com/naturemain/19.jpg",
            "http:testingsite.com/naturemain/21.jpg",
            "http:testingsite.com/naturemain/23.jpg",
            "http:testingsite.com/naturemain/25.jpg",
            "http:testingsite.com/naturemain/27.jpg",
            "http:testingsite.com/naturemain/29.jpg",
            "http:testingsite.com/naturemain/31.jpg",
            "http:testingsite.com/naturemain/33.jpg",
            "http:testingsite.com/naturemain/35.jpg",
            "http:testingsite.com/naturemain/37.jpg",
            "http:testingsite.com/naturemain/39.jpg",
            "http:testingsite.com/naturemain/41.jpg",
            "http:testingsite.com/naturemain/43.jpg",
            "http:testingsite.com/naturemain/45.jpg",
            "http:testingsite.com/naturemain/47.jpg",
            "http:testingsite.com/naturemain/49.jpg"
    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        super.onCreateOptionsMenu(menu);
        MenuInflater menuinflater = getMenuInflater();
        menuinflater.inflate(R.menu.main_menu, menu);

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
                switch(item.getItemId()){
                case R.id.inflate:

                    startActivity(new Intent("com.testing.image.ABOUTUS"));
                    return true;
                }

                return false;
            }
} 
```

行 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="150dip"
        android:layout_height="120dip"
        android:scaleType="centerCrop"
        android:src="@drawable/backgroundimage" />

    <TextView
        android:layout_width="20dip"
        android:layout_height="1dip" />

    <TextView
        android:layout_width="1dip"
        android:layout_height="150dip" />

    <ImageView
        android:id="@+id/photo"
        android:layout_width="150dip"
        android:layout_height="120dip"
        android:scaleType="centerCrop"
        android:src="@drawable/stub" />

    <TextView
        android:id="@+id/text"
        android:layout_width="1dip"
        android:layout_height="1dip" />

</LinearLayout> 
```

主要 XML：

```
<ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:layout_weight="1"
        /> 
```

子活动：

```
public class NatureTwoOne extends Activity {

    ImageView image;
    private class BackgroundTask extends AsyncTask<String, Void, Bitmap> {
        protected Bitmap doInBackground(String...url) {
            //--- download an image ---
            Bitmap bitmap = DownloadImage(url[0]);
            return bitmap;
        }
        protected void onPostExecute(Bitmap bitmap) {
            ImageView image = (ImageView) findViewById(R.id.imageView1);
            bitmaptwo=bitmap;
            image.setImageBitmap(bitmap);
        }
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response= -1;
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        if (!(conn instanceof HttpURLConnection ))
            throw new IOException("Not an HTTP connection");
        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK){
                in = httpConn.getInputStream();
            }
        }
        catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL)
    {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        }
        catch (IOException e1){
            Toast.makeText(this,e1.getLocalizedMessage(),
                    Toast.LENGTH_LONG).show();

            e1.printStackTrace();
        }
        return bitmap;
    }
    public static Bitmap bitmaptwo;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.wallpaper);
        new BackgroundTask().execute("http:testingsite.com/natureone/1.jpg");
        Button setWallpaper = (Button) findViewById(R.id.button3);
        setWallpaper.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                WallpaperManager wManager;
                Toast noSong = Toast.makeText(NatureTwoOne.this, "Background Set", Toast.LENGTH_SHORT);
                noSong.show();
                try {
                    // bitmap = BitmapFactory.decodeFile(null);
                    wManager = WallpaperManager.getInstance(getApplicationContext());
                    wManager.setBitmap(bitmaptwo);

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });

        Button bLeft = (Button) findViewById(R.id.buttonLeft);
        bLeft.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent mainIntentOne = new Intent(NatureTwoOne.this, NatureTwoFifty.class);
                NatureOneOne.this.startActivity(mainIntentOne);
                if(bitmaptwo != null){
                    bitmaptwo.recycle();
                }                              
                /* Finish splash activity so user cant go back to it. */
                NatureOneOne.this.finish();

                /* Apply our splash exit (fade out) and main
                   entry (fade in) animation transitions. */
                overridePendingTransition(R.anim.animation_enterl, R.anim.animation_leaver);
            }   
        });
        Button bRight = (Button) findViewById(R.id.buttonRight);
        bRight.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                startActivity(new Intent("com.testing.image.NATURETWOTWO"));
                if(bitmaptwo != null){
                    bitmaptwo.recycle();
                }

                finish();
            }
        });
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if(bitmaptwo != null){
                bitmaptwo.recycle();
            }
            finish();
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu){
        super.onCreateOptionsMenu(menu);
        MenuInflater menuinflater = getMenuInflater();
        menuinflater.inflate(R.menu.main_menu, menu);

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId()){
        case R.id.inflate:
            startActivity(new Intent("com.testing.image.ABOUTUS"));
            return true;
        }
        return false;
    }
} 
```

适配器：

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private String[] dataone;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader;

    public LazyAdapter(Activity a, String[] d, String[] mphotos) {
        activity = a;
        data=d;
        dataone = mphotos;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public int getCountOne() {
        return dataone.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        ImageView photos=(ImageView)vi.findViewById(R.id.photo);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        imageLoader.DisplayImage(dataone[position], photos);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:28:14.517

`Adapter`您可以为您的`ListView`适配器创建一个自定义并添加`OnCLickListeners`每个`ImageView`包含您希望可点击的图像的图像。有关创建自定义适配器的帮助，请参见[此处](http://www.vogella.com/articles/AndroidListView/article.html)。

像这样的东西（在您的自定义适配器内）：

```
@Override
public View getView(int position, View inView, ViewGroup parent) {

View v = inView;
ViewHolder viewHolder; //Use a viewholder for sufficent use of the listview

if (v == null) {
    LayoutInflater inflater = (LayoutInflater) adaptersContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v = inflater.inflate(R.layout.list_item, null);
    viewHolder = new ViewHolder();
    viewHolder.image = (ImageView) v.findViewById(R.id.ImageView);
    v.setTag(viewHolder);
} else {
    viewHolder = (ViewHolder) v.getTag();
}

    .....

viewHolder.image.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        //Click on imageView
    }i
});

v.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        //Click on listView row, or use an OnItemClickListener as you do already, it will have the same effect
    }
});

    .....

return (v);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:57:00.060

对于一个通用的工作，您有 50 个不同的特定子活动......让我们解决这个问题*，*我们将为每行中的两个图像提供一个点击侦听器。

**首先**，您可以这样定义这些 JPG 字符串数组：

```
public String[] mPhotos = new String[25];
public String[] mStrings = new String[25];

public void onCreate(Bundle savedInstances) {
    ...

    String prefix = "http:testingsite.com/natureone/";
    String suffix = ".jpg";
    for(int index = 1; index <= 25; index++) {
        mPhotos[index - 1] = prefix + (index * 2) + suffix; // evens: 2 - 50
        mStrings[index - 1] = prefix + (index * 2 - 1) + suffix; // odds: 1 - 49
    }
} 
```

如果您曾经添加更多图像或更改内容，那么您现在的维护工作就会减少。

**接下来**创建适当的 Intent，让我们在 LazyAdapter 中创建一个通用的 OnClickListener 作为类变量：

```
OnClickListener mListener = new OnClickListener() {
    public void onClick(View view) {
        Intent intent = new Intent(activity, ViewActivity.class);
        intent.putExtra("Image Index", (Integer) view.getTag());
        activity.startActivity(intent);
    }
}; 
```

并在您的 LazyAdapter 中更改 getView()：

```
...
text.setText("item "+position);

imageLoader.DisplayImage(data[position], image);
image.setTag(position + 1);
image.setOnClickListener(mListener);

imageLoader.DisplayImage(dataone[position], photos);
photos.setTag(position + 2);
photos.setOnClickListener(mListener);

return vi; 
```

**现在**在您的子活动之一中更改这些并调用 ViewActivity（不要忘记更新您的清单！）：

```
new BackgroundTask().execute("http:testingsite.com/natureone/1.jpg"); 
```

变成：

```
mIndex = getIntent().getIntExtra("Image Index", 1);
new BackgroundTask().execute("http:testingsite.com/natureone/" + mIndex + ".jpg"); 
```

`bLeft`可以变成：

```
bLeft.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        mIndex--;
        if(mIndex < 1)
            mIndex = 50;
        new BackgroundTask().execute("http:testingsite.com/natureone/" + mIndex + ".jpg");
    }
}); 
```

反之亦然`bRight`。这不会是完美的，但它应该让你朝着正确的方向前进。希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:38:44.733

您应该覆盖 OnItemClickListener 方法而不是 OnClickListener

```
listView1.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        Toast.makeText(cxt, "You selected Item " + (position + 1), Toast.LENGTH_SHORT).show();
    }
}); 
```

# iphone - iphone cocos2d v2.0.0-rc0 - 无法禁用触摸

> ID：11655049
> 
> 赞同：0
> 
> 时间：2012-07-25T17:11:32.313
> 
> 标签：iphone, cocos2d-iphone, touch

我一直在尝试解决一个问题很长时间，不幸的是我找不到解决方案。我希望你能帮帮我...

我正在尝试开发一个回合制游戏。玩家 1 是用户，玩家 2 是 iphone。我想在轮到玩家 1 时收到触摸。

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
if (self.playerNo==1) {   //control player1
CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
[self selectSpriteForTouch:touchLocation];
return YES;
}
//if it's not player1's turn, return NO
return NO;
} 
```

当它的 iphone 转动时，我想在 5 秒内禁用触摸。我尝试了以下所有方法，但没有成功。

```
-(void)iphonesTurn
{

[NSThread sleepForTimeInterval:5];

//
//game logic...
//

} 
```

在 5 秒内，我多次触摸屏幕。我意识到所有的触摸看起来都像是存储的，当轮到 player1 时，应用程序会对我的所有触摸做出反应。

如何完全禁用触摸？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:01:30.653

我不知道您的代码片段在哪里，但如果它运行到主线程中，您绝不能阻止（暂停）它！

尝试做类似的事情（它适用于 cocos2d 2.0 的最终版本）：

```
- (void)iphonesTurn
{
   [[[CCDirector sharedDirector] touchDispatcher] setDispatchEvents:NO];
   [self scheduleOnce:@selector(enableTouch) delay:5.0f];
}

- (void)enableTouch
{
   [[[CCDirector sharedDirector] touchDispatcher] setDispatchEvents:YES];
} 
```

# c++ - 我的 min 方法（二叉搜索树）有什么问题？

> ID：11655050
> 
> 赞同：0
> 
> 时间：2012-07-25T17:11:47.207
> 
> 标签：c++, data-structures, binary-search-tree

这是一个二叉搜索树的实现，我不知道为什么我的 min 方法（用于查找树中的最小元素）没有返回正确的答案，而是一个任意的内存地址。我正在通过这个构造函数 BST(3); 创建一棵树，现在我运行 min()，它正确返回 3，但是在插入 1(insert(1) 方法)后，min() 返回一些十六进制地址。

```
class node{
    public:
    int key;
    node *left;
    node *right;
    node *parent;
};
class BST{
    node *root;
    public:
    BST(){}
    BST(int a){
        root=new node();
        root->left=NULL;
        root->right=NULL;
        root->parent=NULL;
        root->key=a;
    }
    void insert(int n)
    {
       if(search(n))return;
       node *p=root;
       node *m=new node;
       m->key=n;
       m->left=NULL;
       m->right=NULL;

    while(1)
    {
        if(p->key > n)
        {
            //look left
            if(p->left==NULL)
            {
                p->left=m;
                m->parent=p;
                return;
            }
            else
                p=p->left;

        }
        else
        {
            //look right
            if(p->right==NULL)
            {
                p->right=m;
                m->parent=p;
                return;
            }
            else
                p=p->right;

        }
    }
}
bool search(int n)
{
    node *p=root;
    while(1)
    {
        if(p->key > n)
        {
            //look left
            if(p->left==NULL)
                return false;

            else
                p=p->left;

        }
        else if(p->key==n)return true;
        else
        {
            //look right
            if(p->right==NULL)
                return false;

            else
                p=p->right;

        }
    }

}
int min()
{
    node *p=root;
    if(p->left == NULL)
    return (p->key);
    p=p->left;
}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:13:37.023

因为您通过不返回所有控制路径而遇到未定义的行为：

```
int min()
{
    node *p=root;
    if(p->left == NULL)
        return (p->key);
    p=p->left;
    //no return here
} 
```

这意味着如果`p->left`不是`NULL`，任何事情都可能发生。任何事物！

看起来你想要一个循环：

```
int min()
{
    node *p=root;
    while (p->left != NULL)
        p=p->left;
    return (p->key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:13:51.773

如果`p->left != NULL`，则不返回任何内容。

# sockets - 套接字-> 连接被拒绝问题

> ID：11655058
> 
> 赞同：1
> 
> 时间：2012-07-25T17:12:12.670
> 
> 标签：sockets, socketexception

我遇到了 Sockets 的问题，我无法解决问题。

我在同一个网络上有 2 台不同的机器。我尝试将对象从第一台机器发送到第二台机器。

第二台机器是服务器，一个在 1456 端口上打开 ServerSocket 的线程正在其上运行。我调用了 accept() 方法，它似乎工作正常。

当我尝试从第一台机器连接到服务器时，我收到一个 ConnectException，连接被拒绝。

我做了很多研究，发现我尝试连接的端口可能已关闭（防火墙问题）。我发现杀毒软件“avast”阻塞了端口，所以我禁用了杀毒软件，它运行良好！5分钟...

我卸载了防病毒软件，然后再次无法连接到服务器。我在两台机器上都禁用了 Windows 防火墙。每次操作后我都重新启动了机器。

有人对此有想法吗？

谢谢。

# c++ - 如何分配具有不同模板参数的两个容器

> ID：11655061
> 
> 赞同：1
> 
> 时间：2012-07-25T17:12:24.717
> 
> 标签：c++, templates

假设我有一个类容器：

```
template<class T, int size>
class container
{
private:
    T* data;
    int length;
public:
    container()
    {
        data=new T[size];
        length=size;
    }
    ~container()
    {
        if(length>0)
            delete[] data;
    }
    container& operator= (container<T,size> c)
    {
        if(length>0)
           delete[] data;
        data=new T[c.length];
        length=c.length;
        for(int i=0; i<length; i++)
            data[i]=c.data[i];
        return *this;
    }
}; 
```

问题是，如果我有两个不同大小的容器，我不能使用 = 运算符将一个分配给另一个。例如：

```
container<int,4> c1;
container<int,5> c2;
c1=c2;  // syntax error: 4!=5 
```

像 c++11 数组这样的类允许这样做。
怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:02:00.053

模板就是这样——编译器用来创建类的模板，而不是类本身。

因此，`container<int,4>`和`container<int,5>`是完全独立的类，具有所暗示的所有访问限制。

特别是，这意味着`container<int, 4>`的赋值运算符不能访问 的`private`成员`container<int,5>`。

有几种方法可以解决这个问题：

*   消除 size 模板参数，因为正如其他人所指出的那样，您似乎在动态分配内存，因此在编译时确定大小不会增加任何价值，实际上可能会产生误导，因为您的赋值运算符可能会导致不同的尺寸大于声明的尺寸。
*   `container`根据的公共接口实现您的赋值运算符。
*   通过将以下行添加到您的类来声明所有`container`具有相同类型的类：`friends`

代码：

```
template<class U, int otherSize> friend class Foo; 
```

并声明您的赋值运算符如下：

```
template <int otherSize>
container<T,size>& operator=(container<T,otherSize> c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:27:47.990

您需要使用要从中分配的容器大小对分配运算符进行参数化（*忽略已发布代码的任何其他问题*）：

```
 template <int otherSize>
    container& operator= (container<T,otherSize> c)
    {
        if(length>0)
           delete[] data;
        data=new T[otherSize];
        length=otherSize;
        for(int i=0; i<otherSize; i++)
            data[i]=c.data[i];
        return *this;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:51:17.127

正如评论者所指出的，将初始大小作为模板参数看起来是错误的，并且是问题的根源。

但是考虑到从两个不兼容的容器分配的一般问题，您可以将模板`operator=`化为 tumdum 的答案显示，但是当您想从另一个稍微不同的类型填充容器时，这无济于事。

标准容器通过允许从由一对迭代器定义的范围进行构造和分配来解决问题：

```
template<typename FwdIter>
  container(FwdIter begin, FwdIter end)
  {
    data=new T[length = std::distance(begin, end)];
    std::copy(begin, end, data);
  }

template<typename FwdIter>
  void
  assign(FwdIter begin, FwdIter end)
  {
    container(begin, end).swap(*this);
  }

void swap(container& c)
{
  std::swap(data, c.data);
  std::swap(length, c.length);
}

iterator begin() { return data; }
const_iterator begin() const { return data; }
const_iterator cbegin() const { return data; }
iterator end() { return data+size; }
const_iterator end() const { return data+size; }
const_iterator cend() const { return data+size; } 
```

现在你可以这样做：

```
container<int,4> c1;
container<int,5> c2;
c1.assign(c2.begin(), c2.end()); 
```

# javascript - javascript执行超时

> ID：11655062
> 
> 赞同：0
> 
> 时间：2012-07-25T17:12:27.773
> 
> 标签：javascript, jquery

```
jQuery(document).click(function () {        

jQuery('.close-news').css('display', function(){return jQuery('#colorbox').css('display');});
}); 
```

我有这个脚本，它使我的链接出现\消失取决于#colorbox 块的状态。但是为什么链接出现\消失不是立即，而是在点击 2 次后。基本上我必须在随机区域再单击一次才能使我的脚本工作我猜是因为我的 html 代码更新速度不够快。那么如何为这个脚本添加一些超时呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:31:57.460

看来您正在 Drupal 中使用 Colorbox。
一旦出现 Colorbox，就会有一个回调函数被执行。
调试您的网站后，似乎有一个`cbox_complete`自定义事件启动。
如果是这种情况，您可以将函数附加到此事件。
在该功能中，您可以切换`.close-news` `li`元素的显示，类似于您在问题中单击文档时所做的操作

# c# - 初学者 WCF 客户端/服务器松耦合设计

> ID：11655069
> 
> 赞同：0
> 
> 时间：2012-07-25T17:13:17.850
> 
> 标签：c#, wcf, client-server

我有一个与单个客户端通信的 WCF 服务。我的目标是让客户端更新尽可能少，并且在我向我的服务添加新属性/方法时不需要更新。

下面我的第一种方法打破了我的目标，因为在向我的服务添加属性/方法时，我需要更新客户端的服务参考。

WCF 服务 DLL 的结构如下所示：

```
- IMyService.cs
- MyService.cs
    - Hardware Interface 1.cs
    - Hardware Interface 2.cs
    - Definitions.cs 
```

在每个硬件接口中，我都有多个希望客户端访问的属性和方法。

目前，我向客户端公开这些属性/方法的方式是通过以下 IMyService 方法：

```
[ServiceContract]
interface IMyService 
{
    [OperationContract]
    void MethodA(Object msg);
    [OperationContract]
    void MethodB(Object msg);
    [OperationContract]
    void MethodC(Object msg);

    [OperationContract]
    Object Hardware1GetProperty(Hardware1Property propID);  //large switch case for all properties
    [OperationContract]
    void Hardware1SetProperty(Hardware1Property propID, Object val);    //large switch case for all properties

    [OperationContract]
    Object Hardware2GetProperty(Hardware2Property propID);  //large switch case for all properties
    [OperationContract]
    void Hardware2SetProperty(Hardware2Property propID, Object val);    //large switch case for all properties
} 
```

其中 Hardware1Property 和 Hardware2Property 是存储在 Definitions.cs 中的枚举，具有以下结构：

```
public enum Hardware1Property : uint
{
    PropertyA,
    PropertyB,
    PropertyC,
} 
```

由于客户端可以访问枚举 Hardware1Property 和 Hardware2Property，我认为这是一个好方法，因为客户端不必在服务上存储所有属性的列表。因此客户端可以通过执行以下操作来获取属性的值，例如：

```
MyVar = MyClient.Proxy.Hardware1GetProperty(Hardware1GetProperty.PropertyA); 
```

我该如何改进这个设计？

*   DataContracts 是要走的路吗，如果是，我该如何实现它们？（我以前从未使用过它们）
*   我应该使用名称值对模型来访问属性吗？这样一切都是通过字符串而不是枚举完成的吗？
*   我可以使用类似的方法来调用方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:20:11.617

AFAIK 不是一个好方法。你没有使用弱类型的对象，这段代码很容易出现很多异常。您还必须使用反射，如果处理不当会损害性能。您应该在这里使用 DataContract。

在 MSDN 上阅读有关 DataContract 的信息。可能值得阅读 WCF 书籍的初始章节或一些初学者教程。

# android - 需要识别不同元素上方的手势（如tablerow上的行、按钮等）

> ID：11655073
> 
> 赞同：0
> 
> 时间：2012-07-25T17:13:22.313
> 
> 标签：android, gesture, gesture-recognition

我需要像这样识别xml上的手势：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:id="@+id/main_1"
             android:gravity="center"> 
</TableLayout> 
```

在我的活动中，将一些行添加到表中：

```
private void buildField() {
    Square[][] field = game.getField();
    for (int i = 0, lenI = field.length; i < lenI; i++ ) {
        TableRow row = new TableRow(this); 
        for (int j = 0, lenJ = field[i].length; j < lenJ; j++) {
            Button button = new Button(this);
            buttons[i][j] = button;
            button.setOnClickListener(new Listener(i, j)); 
            row.addView(button, new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT));
            button.setWidth(107);
            button.setHeight(107);
        }
        layout.addView(row, new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT,
                TableLayout.LayoutParams.WRAP_CONTENT)); 
    }
} 
```

当用户在该行上绘制手势时如何在按钮上触发 setOnClickListener？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:20:20.540

[GestureOverlayView 会](http://developer.android.com/reference/android/gesture/GestureOverlayView.html)自动处理这个。请参阅[此处](http://www.vogella.com/articles/AndroidGestures/article.html)以获取帮助您入门的教程。

# jquery - 防止过去的日期选择

> ID：11655074
> 
> 赞同：1
> 
> 时间：2012-07-25T17:13:30.237
> 
> 标签：jquery, twitter-bootstrap, datepicker

我想知道是否可以阻止用户在引导日期选择器上选择过去的日期？

我尝试使用`.datepicker({ preventPast: true })`，但它似乎不起作用。

```
.done(function (response) {
                        view.data = response;
                        $pageHeader.after(view.options.template(response));
                        view.$('.datepicker:not([readonly])')
                            .datepicker({ preventPast: true })
                            .on('changeDate', function () {
                                $(this).datepicker('hide');
                            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:00:48.993

Jquery UI datepicker 为我工作，没有引号。`preventPast`不是[jquery ui](http://jqueryui.com/demos/datepicker/#min-max) datepicker 的选项，所以 mehtinks 你使用的是不同的插件？

```
​$("#datePickerId")​​​​​​​​​​​​.datepicker({ minDate: 0 }); 
```

JS 小提琴为您服务：http: [//jsfiddle.net/7Uaew/](http://jsfiddle.net/7Uaew/)

此外，+1 到舍布罗；不要忘记服务器验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:18:02.187

设置您`minDate`以防止选择过去的日期。

例如：

```
$('#datePickerId').datepicker({minDate: '0'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T23:01:15.860

尝试使用[startDate](https://github.com/eternicode/bootstrap-datepicker/#startdate)：`.datepicker({ startDate: '+0d' });`

# javascript - Rally App SDK 2.0： rallymultiobjectpicker 无法加载选项文本

> ID：11655079
> 
> 赞同：0
> 
> 时间：2012-07-25T17:13:54.317
> 
> 标签：javascript, extjs, extjs4, rally

我在使用 rallymultiobjectpicker 时遇到问题，其中缺少加载的选项文本，因此列表项及其复选框存在这种条带效应。控制台中没有错误，所以我不知道出了什么问题。我试图最小化为基本模型类型指定的配置选项的数量，但问题仍然存在。我用它来显示标签，如果这有什么不同的话。它似乎在独立应用程序中工作，但我不明白为什么较大应用程序中的任何其他组件会导致加载冲突，并且不会引发任何错误。

这是描述该问题的图像：http: [//i.imgur.com/kqXR0.png](http://i.imgur.com/kqXR0.png)

注意：我想我应该注意到这是在预览 1 中。它们似乎在预览 2 中加载良好。我不确定是否有针对预览 1 的推荐修复。请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:56:16.617

感谢您指出这一点并澄清行为仅限于 2.0p1。我不相信预览版 1 会出现修复 - 开发人员目前正在努力开发 2.0p3，它将有许多增强功能和错误修复。我建议在预览期间密切关注[http://developer.rallydev.com以获取最新和最好的版本，并更新您的代码以匹配。](http://developer.rallydev.com)

# types - 在 Clojure 中，为什么有字符串、关键字和符号？

> ID：11655080
> 
> 赞同：24
> 
> 时间：2012-07-25T17:13:57.430
> 
> 标签：types, clojure, symbols

我正在学习 Clojure，我无法理解一些语言设计决策：为什么像 Clojure 这样具有不可变字符串的语言也需要关键字和符号数据类型？字符串不能只有可选的名称空间和元数据以及所有这些东西吗？对于不可变字符串比较也可以是身份基础，不是吗？

或者，由于与 Java 的互操作是 Clojure 必须具备的，因此至少具有 Java String 类型和 KeywordSymbol 数据类型。

我发现这个字符串/关键字/符号“三分法”特别奇怪，因为 Clojure 似乎非常关注“纯度”并在其他方面保持简单。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T17:48:44.873

他们在语言中扮演着非常不同的角色：

*   **Vars 用于给事物命名**。它们实现`runnable`并且可以直接用于调用函数。您不能运行字符串。
*   **关键字**本身就是名称，并在地图中查找自己。它们确实帮助 Clojure 保持其“数据驱动”的风格。字符串没有实现在地图中查找自身所需的接口。
*   **字符串只是字符串。**他们只做他们需要做的，仅此而已。

Clojure 设计的核心原则之一是**拥抱您的主机平台**，因此在 Clojure 中字符串是 Java 字符串，您永远不需要将 Java 字符串包装在一些`convert-to-clojure-string`功能以使其进入 Clojure 生态系统。这需要使用未修改的 Java 字符串以及数字类型。关键字和符号是 Clojure 添加的新结构，因此只需让它们以一种有用的方式从 Java 生态系统的其余部分访问即可。符号和关键字只需作为实现接口的类即可访问。一开始人们认为，为了让一种新语言在 JVM 生态系统中取得成功，它需要完全拥抱 Java 并最大限度地减少“阻抗不匹配”（对于流行语感到抱歉），即使这需要在语言中添加更多内容。没有这个目标就需要。

编辑：

* * *

您可以通过将符号转换为`def`自身来将其转换为关键字

```
user> a
; Evaluation aborted.
user> :a
:a
user> (def a 'a)
#'user/a
user> a
a
user> 
```

关键字评估自己

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T19:56:51.213

我认为 Clojure 更看重“实用性”（如果这是正确的词），而不是“纯度”。这可以从事实上看出，Clojure 除了列表之外还有映射、向量和集合的语法，并且正在使用它来定义语言。在更关注纯度 (IMO) 的 Scheme 中，您只有列表的语法。

正如 Arthur Ulfeldt 指出的那样，字符串、关键字和符号都有其预期的用例。并且按预期使用它们可以更轻松地阅读 Clojure 代码。它类似于 HTML 5 中发生的事情，它添加了语义标记。像`<article>`and之类的东西`<section>`，你可以用HTML 4 中的`<div class="article">`and来表示。`<div class="section">`

哦，您只通过身份比较字符串是错误的。这保证仅适用于实习字符串。而且你不想实习太多的字符串，因为它们存储在所谓的 permgen 中，它的大小非常有限，而且从不被垃圾收集。

# c# - 无法确定函数的接口签名

> ID：11655085
> 
> 赞同：2
> 
> 时间：2012-07-25T17:14:04.557
> 
> 标签：c#, function, generics, interface, signature

我有一个简单的接口来缓存这样的东西

```
public interface ICacheService
{

        T Get<T>(string cacheId, Func<T> getItemCallback) where T : class;
} 
```

这适用于简单的回调函数，但在我的情况下，我需要添加一些更复杂的东西。我认为这是一种匿名类型...

在控制器中，我正在注入一个运行查询的服务，如下所示：

```
this.queryContainer.Get<ObjectQuery>().Execute(new ObjectParameters(id)); 
```

但当然这不是 Func 类型，所以如果我尝试使用我的缓存服务，编译器会抱怨。

我需要什么样的接口才能让我的缓存工作？理想情况下，我想这样做：

```
this.cachingService.Get<ObjectResult>(id, this.queryContainer.Get<ObjectQuery>().Execute(new ObjectParameters(id))); 
```

甚至可能吗？

任何帮助是极大的赞赏！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:18:54.453

您只需要将其表示为`Func<T>`? 试试这个：

```
this.cachingService.Get<ObjectResult>(id, ()=> this.queryContainer.Get<ObjectQuery>().Execute(new ObjectParameters(id))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:20:56.623

您可以使用 lambda 函数。

```
() => this.queryContainer... 
```

它将您的代码包装在一个没有参数的函数中，返回一个值。因此它履行了 Func 的合同

# jquery - jQuery ajax 调用 - 获取有意义的错误消息

> ID：11655086
> 
> 赞同：2
> 
> 时间：2012-07-25T17:14:07.320
> 
> 标签：jquery, asp.net, ajax

我有一个在 IE 中运行良好的 jQuery ajax 调用，但在 Chrome 和 Firefox 中不断出错。我在我的应用程序的其他地方有类似的 ajax 调用，它们在所有浏览器中都可以正常工作，但由于某种原因，这个没有。

首先，我在这里做的事情是否明显会破坏 IE 以外的浏览器，其次，同样重要的是，有没有办法从`error: function (e) {}`块中获得有意义的东西？

```
 $.ajax({
                type: "POST",
                url: "http://localhost:52350/FabRouting/Webservice/FinalizeFileStream.asmx/FinalizeFileStreamDoc",
                data: JSON.stringify({ DocID: docID, FileSize: file.size }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d.length == 0) {
                        //error
                        $("[id$=txtResult]").val("error 0");
                    }
                    else {
                        $("[id$=txtResult]").val(data.d[0].Result);
                    }
                },
                error: function (e) {
                    //error
                    $("[id$=txtResult]").val("error");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:17:30.983

误差函数有三个参数

```
error: function(jqXHR, textStatus, errorThrown) { //code here } 
```

而你只使用一个。errorThrown 应该有一些更有用的信息。

EDIT2 - 因为键不是字符串，所以我的答案是因为键不是字符串而中断 - 这应该没问题。但是，如果您使用帖子，为什么要对数据进行字符串化？您应该能够直接传递 json 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:05:43.950

毕竟，它最终不是我的代码或浏览器（好吧），只是我的错误。

我一直在研究和阅读有人在跨域 ajax 调用出现错误时遇到的问题。我不想这样做，但是出于某种原因，我确实启动了两个 Visual Studio Web 服务器。我看了看，我正在使用硬编码的 url (http://localhost:52350/FabRouting/Webservice.......) 调用 web 服务，我正在使用新的 url (http://localhost :59986/FabRouting/Tes.....) 访问该页面。

出于某种原因，这在 IE 中运行良好，但是当我在 Chrome 或 Firefox 中尝试时，它无法正常工作。我更改了访问页面的位置，并且从 ajax 调用中获得了良好的返回值。

我仍然想知道如何得到一个更有意义的错误，@dtryan 让我在其中的一部分。如果有人可以帮助我弄清楚这一点，我会将他们的答案标记为答案，而不是这个答案。

编辑：我后来发现我实际上能够以我之前尝试的方式以及@dtryan 建议的方式获取错误消息。问题是由于某种原因，因为它试图跨域而引发错误，但我无法捕获该错误。

从那以后，我就遇到了内存不足错误等问题，而那些我能够捕捉并看到的都很好。我认为这只是一场完美的风暴，导致错误不可见。如果有人有任何方法来捕获这些错误，那么很高兴知道。

# memory-management - 将逻辑（虚拟）地址转换为物理地址

> ID：11655087
> 
> 赞同：0
> 
> 时间：2012-07-25T17:14:09.447
> 
> 标签：memory-management, process, virtual-memory

我有以下**页**`process1`表：

![在此处输入图像描述](../Images/b7db3011ca5377c02189519b9eaaa797.png)

假设分页系统使用`16bit`地址和页面大小为`4k`

我想将逻辑地址转换`16000`为物理地址。

我对这个话题有点陌生，所以请放轻松：

**部分解决方案**：地址`16000`适合`3`页表中的单元格编号，所以我想我需要使用该单元格及其存储的帧 - `2`。

我现在如何找到偏移量和物理地址？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:49:42.573

在您的情况下，进程 1 当前最多可以访问 4 * 4k 字节的虚拟内存。
通常一个进程最多可以访问 4gb 的虚拟内存（取决于实现）。
现在，您给出的表将虚拟内存映射到实际的物理地址（在 RAM 上）。页表的每个条目将 4k 的内存从虚拟空间映射到物理空间。
所以地址 16000 对应的物理地址对应于页表的第三个条目，该条目映射到从 开始的物理地址`8192(3*4096) till 12288 (8192+4096)`。

```
16000 mod 4096 =  3712(offset). 
```

在虚拟页面 2 中的 3172 字节偏移处，即在物理页面 3（地址 8192）中的偏移量 3172 处，您会找到与地址 16000 对应的数据。
所有这些映射都是由 MMU（内存管理单元）为每个进程进行的地址访问。
了解这个概念的好链接是[here](http://wiki.osdev.org/Memory_management)。

干杯:)

# java - 等待未知数量的异步任务

> ID：11655088
> 
> 赞同：4
> 
> 时间：2012-07-25T17:14:18.863
> 
> 标签：java, multithreading

我有一个任务队列，以及一个在几秒钟内查看队列一次的线程，如果有任务它会执行它。

我有另一个代码部分（当然在另一个线程中），它在循环中创建任务（我无法从循环外部提前知道任务的数量）并将它们插入队列。任务包含一些“结果”对象，外部线程（创建这些任务）需要等待所有任务完成并最终从每个任务中获取结果。问题是我无法将 java Semaphore\CountDownLatch 等传递给结果对象，因为我事先不知道监视器的数量。我也不能使用使用 invokeAll 的 Executor 或等待 Future 对象，因为任务是不同步的（外部线程只是将任务推送到队列中，另一个线程将在他有时间时执行任务）。

我想到的唯一解决方案是创建一些“反转信号量”类，该类包含一组结果和一个监视器计数器。getResult 函数将检查计数器是否 == 0，如果答案是肯定的，将通知某个锁对象，getResult 函数将等待此锁：

```
public class InvertedSemaphore<T> {
    Set<T> resultSet;
    int usages;
    final Object c;

    public InvertedSemaphore() {
        resultSet = Collections.synchronizedSet(new HashSet<T>());
        usages = 0;
        c = new Object();
    }

    public void addResult(T result) {
        resultSet.add(result);
    }

    public void addResults(Set<T> result) {
        resultSet.addAll(result);
    }

    public void acquire() {
        usages++;
    }

    public void release() {
        synchronized (c) {
            if (--usages == 0) {
                c.notify();
            }
        }
    }

    public Set<T> getResults() {
        synchronized (c) {
            try {
                while (usages > 0) {
                    c.wait();
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        return resultSet;
    }

} 
```

每个 addTask 方法都会调用 semaphore.acquire，每个（未同步的）任务都会在任务结束时调用 semaphore.release。

这听起来很复杂，我很确定在 java 并发库或其他东西中有更好的解决方案。

任何想法都会被应用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:19:08.270

如果不需要按顺序处理任务，请使用[ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)

更一般地，没有必要使用`invokeAll`on`ExecutorService`来获得`Future`结果。`ExecutorService#submit`可以用于此目的，或者可选地，正在创建的任务可以`Future`自行实现，从而允许任务的创建者在稍后的时间点请求结果。

一些代码：

```
class MyTask {
    AtomicReference<?> result = new AtomicReference<?>();

    void run() {
       //do stuff here
       result.set(/* the result of the calculation */);
    }

    boolean resultReady() {
        return result.get()!=null;
    }

    ? get() {
        return result.get();
    }
} 
```

...代码中的其他地方

```
void createTasks() {
    Collection<MyTask> c = new ...;

    while(indeterminable condition) {
        MyTask task = new MyTask();
        c.add(task);
        mysteryQueue.add(task);
    }

    while(haven't received all results) {
        MyTask task = c.get(...); //or iterate or whatever
        ? result = task.get();
        if (result!=null) {
            //do stuff, probably remove the task from the collection c would be smart
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:35:01.083

One idea would be to use a separate queue for the results.
So you will have one blocking queue that thread `A` places tasks for thread `B` thereby having a producer-consumer approach, and when each task is completed, the result could be placed in the *second* result queue inverting the consumer-producer roles since now thread `A` that originally created the tasks will consume the result from the second queue.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:17:40.183

您可以执行以下操作：每个生产者都将拥有自己的队列。生产者将向任务本身传递一种向该队列报告的方法。当任务完成运行时，它会将其结果排队到此队列中。这是一些代码描述的野兽：

```
class Result{}

interface IResultCallback{
    void resultReady(Result r); // this is an abstraction of the queue
}

class Producer implements IResultCallback{ 
    // the producer needs to pass itself to the constructor of the task,
    // the task will only see its "resultReady" facade and will be able to report to it. 
    // the producer can aggragte the results at it will and execute its own computation as 
        // as soon it is ready

    Queue<Result> results; // = init queue

    @Override
    public void resultReady(Result r) {
        results.add(r);

        if(results.size() == 9){
            operate();
        }
        results.clear();
    }

    public void operate(){
        // bla bla
    }
}

public class Task {
    IResultCallback callback;

    public Task(IResultCallback callback){
        this.callback = callback;
    }
    public void execute(){
        // bla bla

        Result r = null; // init result;
        callback.resultReady(r);
    }
} 
```

# java - 使用 ArrayList 条目进行不安全强制转换

> ID：11655089
> 
> 赞同：0
> 
> 时间：2012-07-25T17:14:24.720
> 
> 标签：java, generics, arraylist

`ArrayList`当我选择选项“a”时，我可以在我的全部中存储一些值。但是当我转到选项“b”并尝试检索我输入的内容并存储在变量中`rq`（以检查预订的房间数量）并在选项“b”中使用它进行循环时循环它。但是 all 数组是空的。

我在编译时也有一个“错误”。

在选项 'b' for 循环中，我这样做了

```
for(int i=0;i<all.get(4);i++) 
```

但我收到一个错误：`error: bad operand types for binary operator '<'`

所以我决定投它。

```
for(int i=0;i<(Integer)all.get(4);i++) 
```

现在没有错误，但编译似乎有问题。

> 注意：C:\Users\MegaStore\Desktop\java testing\RoomSelection.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

所以我想知道我输入的那些值是在堆中，还是在我选择选项“b”时被垃圾收集器删除。

我的代码尚未完全输入，但我想解决手头的问题。

我的程序还需要记录用户想要的附加组件（最多 4 个）并存储它。所以我不太确定在哪里添加和存储它。

```
import java.util.*;
import java.io.*;

public class test123{

public test123()throws InputMismatchException {

    String choiceStr;//initialize choiceStr which is use for reading lines from scanner input
    char choiceChar;//initialize choiceStr which is use for reading character from scanner input
    int choice,rt,rq,ao1,night,ao2,quan;//initialize choiceStr which is use for reading integer from scanner input
    String datee;
    String[] roomType = {"Single Room", "Double Room", "Deluxe Room", "Junior Room", "Suite"}; //Initialize a array for room type
    Integer[] priceRoom = {160,200,280,380,500}; //Initialize a array for room prices
    Integer[] priceAdd = {25,60,70,100}; //Initialize a array for add-on prices
    ArrayList<String> roomAndDate = new ArrayList<String>();
    ArrayList<Integer> all = new ArrayList<Integer>();
    Scanner input= new Scanner(System.in); //Initialize a scanner input

    System.out.println("Room Selection");
    System.out.println("==============\n");
    System.out.println("[a] Room Type");
    System.out.println("[b] Add-Ons");
    System.out.println("[c] Main Menu");
    System.out.println("Type 'a' to select Room Type and state the desire quantity for each type.");
    System.out.println("Type 'b' to select the Add-Ons.");
    System.out.println("Type 'c' to exit from  the Booking Menu.");
    System.out.println("Please enter your option (a, b or c): ");

    ;
    choiceStr = input.nextLine();
    choiceChar = choiceStr.charAt(0); 

    switch(choiceChar){
        case 'a':   System.out.println("Room Type");
                    System.out.println("=====================================================");
                    System.out.println("(1) Single Room (1 person) - Price: S$160");
                    System.out.println("(2) Double Room (2 persons) - Price: S$200");
                    System.out.println("(3) Deluxe Room (2 persons) - Price: S$280");
                    System.out.println("(4) Junior Suite (2 persons) - Price: S$380");
                    System.out.println("(5) Suite (2 persons) - Price: S$500\n");
                    System.out.println("Enter Room types (Enter '1' to '5')");
                    choice=input.nextInt();
                    while(choice>5){
                        if(choice>5){
                        System.out.println("Please enter number between '1' to '5'!");
                        choice=input.nextInt();
                        }                   
                    }

                    String roomTypess= roomType[choice-1];
                    roomAndDate.add(roomTypess);
                    int storePricee = priceRoom[choice-1];
                    all.add(storePricee);

                    System.out.println("Number of rooms required (maximum 10): ");
                    choice=input.nextInt();
                    while(choice>10){       
                        if(choice>10){
                        System.out.println("Please enter again!");
                        choice=input.nextInt();
                        }
                    }
                    all.add(choice);

                    for(int i=0;i<choice;i++){
                        System.out.println("Enter the date of checked-in (dd/mm/yy) for "+roomAndDate.get(0) +" " + (i+1));
                        choiceStr = input.nextLine();
                        choiceStr = input.nextLine();
                        roomAndDate.add(choiceStr);
                        System.out.println(roomAndDate);
                        System.out.println("Enter number of Add-on for "+roomAndDate.get(0) + " " +(i+1)+": ");
                        choice=input.nextInt();
                        while(choice>4){
                        if(choice>4){   
                            System.out.println("Please enter again! Choose only option 1 to 4");
                            choice=input.nextInt();
                            }                           
                        }
                        all.add(choice);            
                        System.out.println("Number of night(s) required (maximum 30) for "+roomAndDate.get(0) + " " +(i+1)+ ": ");
                        choice=input.nextInt();
                        while(choice>30){   
                            if(choice>30){
                            System.out.println("Please enter again! Maximum is 30 days!");
                            choice=input.nextInt();
                            }
                        }           
                        all.add(choice);

                    }
                    new RoomSelection();

                    break;          
        case 'b':       System.out.println("Room req is empty? : "+all.isEmpty());
                        System.out.println("Add-Ons");
                        System.out.println("=====================================================");
                        System.out.println("(1) Breakfast voucher (1 person) per day - Price: S$25");
                        System.out.println("(2) Spa voucher (1 person) - Price: S$60");
                        System.out.println("(3) Half Day Tour voucher (1 person) - Price: S$70");
                        System.out.println("(4) Full Day Tour voucher (1 person) - Price: $100\n");

                        for(int i=0;i<(Integer)all.get(3);i++){

                        System.out.println("Enter Add-On option");
                        choice=input.nextInt();
                        while(choice>4){
                            if(choice>4){   
                                System.out.println("Please enter again! Choose only option 1 to 4");
                                choice=input.nextInt();
                            }                           
                        }
                        all.add(choice);
                        System.out.println("Enter quantity required for Add-On option " + (i+1)+": ");
                        choice=input.nextInt();
                        all.add(choice);
                        }

                    break;
        case 'c':   new MainPage1();break;
        default:continue;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:18:53.037

这就是为什么你应该使用泛型。目前，查看 的声明`all`，编译器和读者都无法看到其中的含义。查看代码，它似乎是字符串和整数的混合体。这是灾难的秘诀。它首先真正代表的是什么？*为什么*它包含字符串和整数的混合？

听起来你很可能想要一个`Room`包含所有这些信息的类型，并且`all`应该像这样声明：

```
List<Room> allRooms = new ArrayList<Room>(); 
```

此外，这种方法目前太长了*。*当一条线超过大约 20 条线时，我会感到紧张……但是超过 130 条线？哎呀！找出可以提取哪些位 - 那些不影响其余代码的位。

哦，学习数组初始化器，把它变成：

```
Integer[] priceAdd = new Integer[4]; //Initialize a array for add-on prices
priceAdd[0]=25; //To be added to array add-on price
priceAdd[1]=60; //To be added to array add-on price
priceAdd[2]=70; //To be added to array add-on price
priceAdd[3]=100; //To be added to array add-on price 
```

进入这个：

```
int[] addOnPrices = { 25, 60, 70, 100 }; 
```

（我看不出有什么理由需要它们`Integer`而不是`int`，尽管您目前假设您永远不需要小数值......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:52:01.657

`List<Integer> all = new ArrayList<Integer>();`

以上将始终接受并返回整数值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:19:02.990

您需要像这样定义 ArrayList 的类型：

```
ArrayList<String> all = new ArrayList<String>(); 
```

或使用您使用的任何非原始数据类型。

# mongodb - 使用 MongoDB 和 SpringData 限制集合

> ID：11655091
> 
> 赞同：0
> 
> 时间：2012-07-25T17:14:29.090
> 
> 标签：mongodb, logging, spring-data

我正在尝试使用 mongoTemplate 创建一个用于记录的上限集合。但是，我的集合大小正在增长超出我作为参数传递的大小。谁能帮忙解决这个问题。

```
public synchronized MongoTemplate getTemplate() {

    if (template == null) {
        Mongo mongo = null;
        mongo = new Mongo(addrs);
        template = new MongoTemplate(mongo, this.dbName);

        if(!template.collectionExists(HttpRequestEntity.class)){
            CollectionOptions options = new CollectionOptions(4,4,true);
            template.createCollection(HttpRequestEntity.class, options);
        }   
    }

    return template;
} 
```

为了保存，我在这个模板实例上调用 save

```
getTemplate().save(entity); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:37:15.910

在我从 mongo 控制台删除集合后，它开始工作了。我猜它是使用旧的元数据，因为`template.collectionExists(HttpRequestEntity.class)`它返回 true。

# ruby-on-rails - 使用 accept_nested_attributes_for 和多态时无法批量分配受保护的属性

> ID：11655098
> 
> 赞同：3
> 
> 时间：2012-07-25T17:14:54.180
> 
> 标签：ruby-on-rails, nested-attributes, polymorphism

我在这里阅读了很多帖子，但仍然无法弄清楚这一点。

我有一个 forum_post 模型和一个 links 模型。我想将链接表单与 forum_post 表单嵌套，但不断获得 Can't mass-assign protected attributes: links。

**论坛帖子模型**

```
class ForumPost < ActiveRecord::Base
  attr_accessible :content, :links_attributes

  has_many :links, :as => :linkable, :dependent => :destroy

  accepts_nested_attributes_for :links, :allow_destroy => true
end 
```

**链接模型**

```
class Link < ActiveRecord::Base
  attr_accessible :description, :image_url, :link_url, :linkable_id, :linkable_type, :title

  belongs_to  :linkable, :polymorphic => true
end 
```

**Forum_post 查看**

```
<%= form_for(@forum_post) do |f| %>
  <% if @forum_post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@forum_post.errors.count, "error") %> prohibited this forum_post from being saved:</h2>

      <ul>
      <% @forum_post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content, :rows => 5 %>
  </div>

  <%= f.fields_for :link do |link| %>
   <%= render :partial => 'links/link', :locals => { :f => link} %>
  <% end%>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**链接查看部分**

```
<div class="field">
  <%= f.label :link_url %><br />
  <%= f.text_field :link_url, :id => "url_field" %>
</div>

<div id="link_preview">
</div> 
```

**论坛帖子控制器**

```
class ForumPostsController < ApplicationController

    def new
    @forum_post = ForumPost.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @forum_post }
    end

   def create
     @forum_post = ForumPost.new(params[:forum_post])

     respond_to do |format|
     if @forum_post.save
       format.html { redirect_to @forum_post, notice: 'Forum post was successfully created.' }
       format.json { render json: @forum_post, status: :created, location: @forum_post }
    else
      format.html { render action: "new" }
      format.json { render json: @forum_post.errors, status: :unprocessable_entity }
    end
  end
end 
```

**链接控制器**

```
class LinksController < ApplicationController

    def find_linkable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end

  def index
    @linkable = find_linkable
    @links = @linkable.links
  end

  def create
    @linkable = find_linkable
    @link = @linkable.links.build(params[:link])
    if @link.save
      flash[:notice] = "Successfully saved link."
      redirect_to :id => nil
    else
      render :action => 'new'
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:00:50.990

好吧，根据您的问题，您无法批量分配的受保护属性是：链接。不知道这是怎么发生的，但你试过 attr_accessible :links 吗？

至于安全隐患，这就是 github 被黑客入侵一次[https://gist.github.com/1978249](https://gist.github.com/1978249)的原因，我强烈反对将 whitelist_attributes 设置为 false。

# apache - 如何访问远程服务器

> ID：11655101
> 
> 赞同：0
> 
> 时间：2012-07-25T17:15:09.377
> 
> 标签：apache, mercurial, ssh, webserver

我想在远程服务器上创建一个存储库。

我拥有的访问约束：

(a) （服务器的）IP 地址 (b) 用户名​​/密码

我正在关注[本教程](http://dev.lshift.net/paul/mercurial-server/docbook.html)并停留在第一步：“初始访问 mercurial-server”

我无法理解那些“ssh 连接”语法（特别是 my-key）

我如何连接到远程服务器（使用 ssh-agent ）我为了创建新的 repo 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:06:45.120

这是我们一次又一次看到的同一个问题。`mercurial-server`不是 Mercurial 的一部分。它是一个独立的、第三方的、通常不是必需的软件，它试图在没有真正成功的情况下使灵活的管理变得更容易。

从这里开始：[https ://www.mercurial-scm.org/wiki/PublishingRepositories/](https://www.mercurial-scm.org/wiki/PublishingRepositories/)

并选择您想要的访问类型，http 或 ssh，然后使用 hgweb.cgi + apache（用于 http），或者如果您只想使用 ssh，则什么也不用**。**

具体来说，对于任何具有 mercurial 客户端的服务器（`apt-get install mercurial`在 debian 或 ubuntu 上以及`yum install mercurial`在 redhat、fedora 或 centos 上），您根本不需要任何额外的软件来通过 ssh 托管 mercurial 存储库。你可以这样做：

```
hg clone myLocalrepo ssh://you@thatserver/myRemoteRepo 
```

和**噗**你在那里主持。

# networking - 构建一个小型 4 节点集群 - 关于网络的几个快速问题

> ID：11655102
> 
> 赞同：1
> 
> 时间：2012-07-25T17:15:10.580
> 
> 标签：networking, cluster-computing, apache-storm

我正在组建一个小型 4 节点集群，我将在该集群上运行风暴。我有一些关于网络方面的问题。首先，所有计算机都配备了千兆以太网，但是我目前拥有的集线器只能达到 100 兆位。我应该升级我的集线器吗？或者性能增益可以忽略不计？其次，我在一些网站上读到集线器不是最好的硬件，而交换机更适合我的目的。我正在尝试使用 Storm 让一台机器从互联网上提取数据，然后将其传递给其他机器进行处理。交换机或集线器会更有用吗？感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:26:14.813

路由器可以提供强大的网络功能，但它也常常是矫枉过正。如果只有 4 台机器，您可能更需要千兆交换机：在商店里经常以千兆路由器的名义出售——这在技术上是一个谎言，因为它通常是一个桥接器（集线器或交换机，网络有很多过载名称）。如果仅从营销名称中难以识别两者，路由器的价格要比交换机贵许多倍。另一方面，集线器通常是功能较少的哑交换机（有时在高数据流情况下会降低速度）。

关于是否需要升级的问题取决于瓶颈在哪里。您发送的数据量大吗？您的集群计算机是否花费大量时间计算而不是接收数据？首先确定您的网络速度是否会成为您的瓶颈，然后再决定是否应该升级该瓶颈。如果您担心网络速度但不能 100% 确定它会成为瓶颈，那么便宜的 1 Gigabit Switch 不会花费您太多，而且几乎肯定会满足您的需求。

另请注意，如果您的数据需要首先通过互联网（不是在您的网络侧生成），那么您的瓶颈几乎肯定是您的本地网络之前的互联网连接。

所以本质上，在做出选择之前先分析你的问题。

# c# - 基于包含电子邮件地址的 gridview 列发送电子邮件

> ID：11655104
> 
> 赞同：0
> 
> 时间：2012-07-25T17:15:16.890
> 
> 标签：c#, asp.net, visual-studio-2010

我可以知道如何根据包含电子邮件地址的 gridview 列发送电子邮件吗？我目前正在使用 asp.net 和 c#。我目前也在使用 smtp gmail 发送电子邮件。

目前，我有一个 gridview1，其中包含退回支票的客户（电子邮件、姓名、帐户号），但是我希望在单击按钮时向所有这些客户发送标准电子邮件。我可以知道我该怎么做吗？他们的电子邮件存储在数据库中，并将显示在 gridview 上。

```
 private void SendEMail(MailMessage mail)
{
    SmtpClient client = new SmtpClient();
    client.Host = "smtp.gmail.com";
    client.Port = 587;
    client.EnableSsl = true;
    client.Credentials = new System.Net.NetworkCredential("@gmail.com", "password");

    try
    {
        client.Send(mail);
    }
    catch (Exception ex)
    {
        Console.WriteLine("{0} Exception caught.", ex);
    } 
```

![在此处输入图像描述](../Images/053ca5c0fe08d7a371bb44f6837f8ae8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:20:26.843

尝试将电子邮件地址保存在数组中。

然后做一个 foreach 并发送数组中的电子邮件！

例子：

班级：

```
 public SmtpClient client = new SmtpClient();
    public MailMessage msg = new MailMessage();
    public System.Net.NetworkCredential smtpCreds = new System.Net.NetworkCredential("mail", "password");

public void Send(string sendTo, string sendFrom, string subject, string body)
{
    try
    {
        //setup SMTP Host Here
        client.Host = "smtp.gmail.com";
        client.Port = 587;
        client.UseDefaultCredentials = false;
        client.Credentials = smtpCreds;
        client.EnableSsl = true;

        //convert string to MailAdress

        MailAddress to = new MailAddress(sendTo);
        MailAddress from = new MailAddress(sendFrom);

        //set up message settings

        msg.Subject = subject;
        msg.Body = body;
        msg.From = from;
        msg.To.Add(to);

        // Send E-mail

        client.Send(msg);

    }
    catch (Exception error)
    {
    }
} 
```

发送电子邮件：（button_click）

```
//read the emails from the database and save them in an array.
//count how many are the emails, ex: int countEmails = SqlClass.Function("select emails from table").Rows.Count;

string[] emails = new string[countEmails];
foreach (string item in emails)
{
   //send e-mail
   callClass.Send(item, emailFrom, subject, body); //you can adapt the class
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:21:36.427

最简单的方法是遍历绑定到网格视图的数据集。但是，既然您已经询问了 gridview，那么您可以通过以下方式循环遍历 gridview 行

在 button_click 上写这个

```
string email = "";
foreach (GridViewRow item in GridView1.Rows)
{
      //considering 1st column contains email address
      //if not, replace it with correct index
      email =  item.Cells[0].Text;
      //code to send email

} 
```

**更新 2**

更新我的代码以使用您的 sendEmail 功能

```
public void button_click(object sender, EventArgs e)
{
    string email = "";
    foreach (GridViewRow item in GridView1.Rows)
    {

          //if not, replace it with correct index
          email =  item.Cells[4].Text;
          //code to send email
         //reciever email add
         MailAddress to = new MailAddress(email);
         //sender email address
         MailAddress from = new MailAddress("your@email");

        MailMessage msg = new MailMessage();
        //use reason shown in grid
        msg.Subject = item.Cells[3].Text;

        //you can similar extract FName, LName, Account number from grid
        // and use it in your message body
        //Keep your message body like 
        str email_msg = "Dear {0} {1}, Your cheque for account number {2} bounced because of    the reason {3}";
        msg = String.Format(email_msg , item.Cells[0].Text,item.Cells[1].Text,item.Cells[2].Text,item.Cells[3].Text);
        msg.Body = email_msg ;
        msg.From = from;
        msg.To.Add(to);

        SendEMail(msg);

    }
} 
```

# heap-memory - 在 Weka 中使用 libsvm 分类器和堆大小

> ID：11655110
> 
> 赞同：0
> 
> 时间：2012-07-25T17:15:48.863
> 
> 标签：heap-memory, classpath, weka, libsvm

使用 WEKA 3.6 的问题

我想使用 libsvm.jar，但是当我使用以下命令提示符运行 weka 时，会出现“不在类路径中”的错误：

java -Xmx900m -jar Weka.jar

请注意，当我在正常模式下运行 weka（使用初始堆大小且不使用命令提示符）时，我们使用 libsvm 库。此外，我使用 Windows 7-32 位。

请帮助我，我的时间不多了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T02:40:33.063

另一个答案对我不起作用。根据[Weka 文档](http://weka.wikispaces.com/LibSVM)，在类路径中包含 LibSVM 需要不使用“-jar weka.jar”选项。指定 -jar 会覆盖您尝试设置的类路径。

相反，使用

```
java -Xmx900m -classpath $CLASSPATH:weka.jar:libsvm.jar weka.gui.GUIChooser 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:08:16.317

找出在哪里`libsvm.jar`并将其包含在类路径中，例如

```
java -Xmx900m -classpath '.:/usr/share/java/libsvm.jar' -jar Weka.jar 
```

的实际位置`libsvm.jar`将取决于您的系统。

# c# - .net 的免费内存分析器

> ID：11655111
> 
> 赞同：3
> 
> 时间：2012-07-25T17:15:56.500
> 
> 标签：c#, .net, profiler

有人知道 .net 的良好且免费的内存分析器吗？我可以找到很多描述分析器（例如 Eqatec，它不是内存分析器）的帖子，但没有提到内存分析器。我发现了一些包括 CLR 分析器，但它们对我不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:22:55.777

[RedGate 的 .NET Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)是我用过的最好的。它不是无限期免费的，但可以免费使用 14 天。

# javascript - 多个 Fancybox 实例的自定义样式

> ID：11655112
> 
> 赞同：4
> 
> 时间：2012-07-25T17:15:56.860
> 
> 标签：javascript, styles, fancybox

我正在使用 Fancybox 2.0.6 来显示图像和视频。当滚动图像/视频时（当画廊中有多个图像时），Fancybox 会显示上一个和下一个图标和链接。根据jquery.fancybox.css，可点击区域占据了图像/视频左右两侧的40%。这对图像非常有用，但是对于视频，它会阻止播放按钮，以便用户转到下一个/上一个视频，而不是能够播放或暂停视频。我想更改可点击区域的宽度，但仅限于视频 - 我希望它对图像保持不变。我研究了 Fancybox，发现我可以使用 wrapCSS 为 Fancybox 的多个实例创建自定义样式，但我无法让它工作。

这是我的 js 调用

```
<script type="text/javascript">
    $(document).ready(function() {
    $(".vimeo").fancybox({
    width: 781,
    height: 440,
    type: 'iframe',
    fitToView : false,
    wrapCSS    : 'fancybox-nav-video'
    });
    });
</script>
<script>
$(document).ready(function() 
{
$('.fancybox').fancybox(
    {
        padding : 0,
        openEffect  : 'elastic'
    }
    );
    $(".fancybox").fancybox(
    {
        wrapCSS    : 'fancybox-nav',
        closeClick : true,
        helpers : {
            overlay : {
                css : {
                    'background-color' : '#000'
                }
            },
            thumbs  : {
                width   : 50,
                height  : 50
            }
        }
    }
    );
}
);
$("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox();      
</script> 
```

以下是我在 HTML 中显示图像和视频的方式：

```
<a class="fancybox" rel="gallery1" href="image1.jpg">
<a class="fancybox" rel="gallery1" href="image2.jpg">
<a class="vimeo" rel="gallery2" href="videoplayerlink1">
<a class="vimeo" rel="gallery2" href="videoplayerlink2"> 
```

我是否需要在 .js 文件中添加或更改任何内容？我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T23:28:57.920

**首先**你需要明白，当你使用选项时，会在fancybox wrap()中添加`wrapCSS`一个新的选择器，所以添加选项意味着当你打开fancybox时你会得到`class``.fancybox-wrap``wrapCSS:'fancybox-nav-video'`

```
<div class="fancybox-wrap fancybox-nav-video ....etc." .... 
```

**其次**，您需要为此类新选择器声明特定的花式框按钮 CSS 属性（加载花式框 css 文件后的内联 CSS 声明）：

```
.fancybox-nav-video .fancybox-nav {
    width: 60px;       
}
.fancybox-nav-video .fancybox-nav span {
    visibility: visible; /* arrows will be permanently visible */
}
.fancybox-nav-video .fancybox-next {
    right: -60px; /* move right outside fancybox area */
}
.fancybox-nav-video .fancybox-prev {
    left: -60px; /* move left outside fancybox area */
} 
```

请注意，这些新的 css 属性将仅应用于带有类的 fancybox 包装`fancybox-nav-video`（我们使用了该`wrapCSS`选项）。这些 css 会将按钮以及可点击区域放置在 fancybox 之外，从而清除 vimeos 的播放按钮。因为那样，我们使导航箭头永久可见，否则访问者将不知道悬停在哪里。

**第三**，您只需将所有花式框自定义脚本包装在一个`.ready()`方法中，例如：

```
<script type="text/javascript">
 $(document).ready(function() {

// fancybox for vimeo
  $(".vimeo").fancybox({
    width: 781,
    height: 440,
    type: 'iframe',
    fitToView : false,
    wrapCSS : 'fancybox-nav-video' // add a class selector to the fancybox wrap
  });

// fancybox for images
  $(".fancybox").fancybox({
   // options for images here
  });

 }); // ready
</script> 
```

# mirth - 有什么方法可以使用 .indexOf 来搜索一个 javascript 数组吗？

> ID：11655113
> 
> 赞同：3
> 
> 时间：2012-07-25T17:16:00.073
> 
> 标签：mirth

我正在尝试在 mirth 通道的转换器中的 javascript 数组中找到一个字符串。当我尝试使用 indexOf 函数时，Mirth 会引发错误。我的理解是 indexOf 是浏览器添加的东西，而不是 javascript 语言本身的原生部分。（[如何检查数组是否包含 JavaScript 中的对象？](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)）

那么 Mirth 不支持 array.indexOf 吗？有什么方法可以在 Mirth 中使用 .indexOf 吗？也许是另一种语法？还是我只需要遍历数组进行搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:57:22.327

这就是我在 Mirth js 转换器中搜索数组的方式：

```
var Yak = [];
Yak.push('test');

if(Yak.indexOf('test') != -1)
{
    // do something
} 
```

这会给你带来错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:03:09.197

Mirth 为 Javascript 使用 Rhino 引擎，在一些早期版本的 JVM 上，数组似乎不支持 indexOf。自从将我们的 JVM 升级到 1.6.23（或更高版本）后，indexOf 就开始工作了。但是，我们仍然有遗留代码，在搜索字符串数组时，我每次只使用一个循环：

```
var compareString = "blah";
var index = -1;
for (var i = 0; i < myArray.length; ++i)
{
    if (myArray[i] == compareString)
    {
        index = i;
        break;
    }
} 
```

如果您需要经常这样做，您应该可以使用代码模板手动将 indexOf 函数添加到 Array。

将代码模板设置为全局访问，并尝试这样的事情（未经测试的代码）：

```
Array.prototype.indexOf = function(var compareObject)
{
    for (var i = 0; i < myArray.length; ++i)
    {
        // I don't think this is actually the right way to compare
        if (myArray[i] == compareObject)
        {
            return i;
        }
    }

    return -1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-17T14:19:32.570

```
var arr = ['john',1,'Peter'];

if(arr.indexOf('john') > -1)
{
    //match. what to do?
    console.log("found");
}
else
{
    console.log("not found");//not found .. do something 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-18T21:54:15.037

```
var i = ['a', 'b', 'c']

if(i.indexOf('a') > -1)
{
       ///do this, if it finds something in the array that matches what inside the indexOf()
}
else
{
    //do something else if it theres no match in array
} 
```

# oracle - Oracle 数据库查询在第二次运行时抛出错误

> ID：11655114
> 
> 赞同：3
> 
> 时间：2012-07-25T17:16:03.590
> 
> 标签：oracle, vba, excel, odbc

我有一个 VBA 代码，我在其中调用 oracle 以使用 ODBC 检索数据两次。第一次数据检索很好。但第二次说，

```
**RunTime Error '-2147467259 (80004005)'; Unspecified error** 
```

我的代码如下，

> 注意：相同的代码适用于连接 Teradata，但在我使用 Oracle 时失败

```
'First Data retrieval
Query1 = "Select TableName from all_tables"
CmdSQLData.CommandText = Query1
CmdSQLData.CommandType = adcmdText 
CmdSQLData.Timeout=0
set rs = CmdSQLData.Execute()
'Then code to store data ...
'This part gives proper result ...
rs.close()

'Second Data retrieval
Query2 = "Select * from db.Event"
CmdSQLData.CommandText = Query2
CmdSQLData.CommandType = adcmdText 
CmdSQLData.Timeout=0
set rs = CmdSQLData.Execute() 'This line Gives Error - RunTime Error '-2147467259 (80004005)'; Unspecified error 
```

> 我也尝试将新的命令对象创建为 cmdSQLData1 但仍然是同样的错误

我可以知道为什么第二个查询会出现错误吗？查询没有问题，因为我在 oracle 目录中测试过。请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:51:54.300

您不会在任何地方看到很多文档，但是使用`Command`不同的 comamndText 重用对象实际上是一种不好的做法。你没有说你正在使用什么样的连接，但例如如果它是 ODBC，这将在内部向 Oracle 发送一个虚假的无效 SQL 以强制进行某种清理。因此，请在使用后丢弃您的`Command`对象并创建一个新对象。

当您使用不同的参数值重新执行相同的查询时，重用`Command`对象是一种*很好的做法，但这里不是这种情况。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:50:51.337

对于这些类型的查询，您根本不需要使用命令文本，您可以做的是：-

` Dim con As New ADODB.Connection Dim rs As New ADODB.Recordset

```
con.Open "DSN=Oracle", "User", "Password"
rs.Open "select * from table_a", con

' Read all results

rs.Close

rs.Open "select * from table_b", con
' Read all results

rs.Close

con.Close 
```

如果您计划使用存储过程或带有绑定参数的查询，则只需要使用“命令”。

# xml - Kernow：SXXP0003：XML 解析器报告的错误：prolog 中不允许内容

> ID：11655115
> 
> 赞同：0
> 
> 时间：2012-07-25T17:16:19.237
> 
> 标签：xml

当我尝试将以下 xml 文档上传到 Kernow 时，我收到以下错误：

```
Error on line 1 column 1 of file:/Users/rdp/Desktop/Kernow/:
  SXXP0003: Error reported by XML parser: Content is not allowed in prolog.
javax.xml.transform.TransformerConfigurationException: Failed to compile stylesheet. 1 error detected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:21:43.950

错误消息是在抱怨样式表，而不是源文档，所以我不知道您为什么选择向我们展示源文档。

来自 Xerces 的错误消息“Prolog 中不允许内容”可以涵盖阻止解析进行的大量不同情况：它可以是空文件、不正确的编码、XML 声明之前的空格或换行符、输入文件根本不是 XML 等。有时这意味着正在读取的源文档不是您想要的源文档。错误消息中给出的文件名向我表明它可能正在尝试解析目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:57:33.530

“单个文件”上传需要一个样式表，我没有给它。我只是想在 XML 文件上尝试一些 XQuery 查询，我可以通过将 xml 文件复制到 Kernow 目录并在 XQuery 沙箱中运行查询来轻松地做到这一点。

# xcode - 如何使用新的 Apple ID 更新 Xcode？

> ID：11655116
> 
> 赞同：71
> 
> 时间：2012-07-25T17:16:30.750
> 
> 标签：xcode, apple-id

我最近更改了苹果 ID，并在 Mac 上用另一个苹果 ID 下载了 xCode。

不是 mac 商店通知我 xCode 有新版本，但我需要插入旧 Apple ID 的密码，我不能只使用新的。该应用程序似乎与旧的 Apple ID 相关联。

我什至无法使用新的 Apple ID 下载新的 xCode，因为它只能让我选择使用旧的 Apple ID 更新它。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-11-28T19:55:17.390

要使 AppStore 忘记下载应用程序时使用的旧凭据，您必须删除`_MASReceipt`应用程序本身中的目录。

去做这个：

1.  打开 Finder 并导航到应用程序，
2.  Ctrl+单击 XCode 并选择“显示包内容”，
3.  展开 Contents 目录并单击 _MASReceipt 将其选中，
4.  键入 Command+Delete 以永久删除该目录——系统将提示您输入您的凭据，因为这是一个受保护的文件。

退出并重新启动 AppStore，然后找到 XCode。该按钮现在应该显示“免费”或“安装”而不是“更新”。单击它会将您的 XCode 更新为当前登录的 Apple 用户的最新版本。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-25T17:49:26.783

假设您遇到错误的问题

> 要更新此应用程序，请登录您购买它时使用的帐户。

在 App Store 应用程序上，转到 Store --> 退出

然后做这里建议的东西

[在https://discussions.apple.com/thread/2794280?start=15&tstart=0](https://discussions.apple.com/thread/2794280?start=15&tstart=0)从 Beartech 检查此修复

> App Store 以某种方式使用了 Spotlight。我的解决方法是将整个 HD 添加到 Spotlight System 首选项窗格中的“隐私”选项卡，关闭首选项并等待 30 秒，重新打开并从“隐私”选项卡中删除您的 HD。Spolight 开始重新索引。重新打开App Store，问题已解决！在此处发布此内容以供以后可能搜索的其他人使用。还向 Apple 提交了错误报告。

希望这可以为您解决问题！

编辑：与我所拥有的相比，我认为这是一个不同的问题。您唯一的选择可能是删除 xcode，并使用您的新 Apple ID 下载

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-06T21:10:54.670

**添加 Apple ID 帐户**

1.  选择 Xcode > 首选项。
2.  在窗口顶部，单击帐户。
3.  在左下角，单击添加按钮 (+) 。
4.  从弹出菜单中选取“添加 Apple ID”。
    [![在此处输入图像描述](../Images/2e271c308da9fef15e8ea3fe5a28351c.png)](https://i.stack.imgur.com/FZFMA.png)

5.  在出现的对话框中，输入您的 Apple ID 和密码，然后点按“登录”。
    [![在此处输入图像描述](../Images/a76fb1d94980efd93beb77cb42877015.png)](https://i.stack.imgur.com/Qxkit.png)

**删除 Apple ID 帐户**

1.  选择 Xcode > 首选项。
2.  单击窗口顶部的帐户。
3.  在左栏中选择要删除的 Apple ID 帐户。
4.  单击左下角的删除按钮 (–)。

按照链接获取来源和详细信息。
[https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/ManagingAccounts/ManagingAccounts.html](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/ManagingAccounts/ManagingAccounts.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-17T18:48:21.550

打开一个文件夹 Finder-> Go -> Applications 然后在该文件夹中找到 Xcode。右键单击 Xcode。-> 在底部获取信息，有共享和权限，打开它，点击右上角的锁定图标。为列表中的每个人进行读写。

然后等待 5-10 秒。只需再次尝试更新 Xcode。它将开始更新...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T12:13:57.773

正如 NSPostWhenIdle 所说：“删除 Xcode，然后使用新的 Apple ID 重新安装它。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-04T20:23:43.330

对于 XCode 5

1.  Xcode 菜单 > 首选项 > 帐户
2.  点击左下角的+
3.  单击添加 Apple ID。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-17T19:49:53.220

我有一个类似的问题。我的 AppleId 已更改 - 用户名 - 从“ab***”更改为“ab***@gmail.com”。新格式需要一个电子邮件地址，而我的 AppleId 可以追溯到很多年前。我突然无法从 Xcode 导出任何内容。我如何修复它：

1.  偏好/帐户
2.  删除旧的 AppleId
3.  添加新的 AppleId。

Apple 似乎在后端对自己进行了整理，唯一的问题是 Xcode 挂在对失效和/或错误用户名的旧引用（指向同一个密钥帐户。去看看。）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-02-03T09:33:38.807

如果您将设备恢复到 13.3.0 将解决您的问题，它对我有用

# php - 在 php 服务器端使用meteor.js

> ID：11655123
> 
> 赞同：7
> 
> 时间：2012-07-25T17:17:13.580
> 
> 标签：php, mysql, meteor

我开发了一个应用程序，我想使用meteor.js 进行实时更新（我想增强但不改变我的程序，例如当用户添加评论时使其实时更新）。问题是meteor.js 使用node.js（所以javascript 作为服务器端代码）。我使用 LAMP 堆栈，是否有可能让 PHP 将数据从 mysql 馈送到meteor.js。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T18:08:10.097

Meteor 不仅仅是一个“交互式网络应用程序”构建器或 JavaScript 框架。这个想法是只有一种编程语言（除了用于标记的 HTML/CSS）来完成所有工作。基本上，它创建了一个“远程服务器”（在客户端浏览器中），它可以将数据推送到用户系统，同时将各种 API 发布到用户系统。通过这些 API/连接传递的数据具有必须始终遵守的特定结构。

Meteor 是围绕 NodeJS 构建的，这使得在没有这个后端的情况下很难（如果不是不可能的话）运行它。当然，您可以尝试使用 PHP 模拟后端，但这会浪费时间。阅读您的问题，您会更好地使用 jQuery 或 Prototype 等 javascript 框架。与 Meteor 不同，您需要自己进行 AJAX 调用（POST 和 CallBack），但实际上您可以自己决定要使用哪个后端（包括 PHP / MySQL）。

*如果你无论如何都想这样做，你需要检查 Meteor 和 NodeJS 源代码，看看让 Meteor 在 PHP 下运行的最低要求是什么。PHP 堆栈必须解释 Meteor 发送和接收的命令，但这不是一件容易的事。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:57:52.637

您可以使用[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)（或反向 ajax）进行实时更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T21:27:03.907

尝试将 node.js 与 PHP 结合起来听起来并不值得走下去。如果有人坚持使用像 Meteor.js 这样的系统，但使用 PHP 后端，那么看看主要是客户端的 AngularJS 会更有意义。

当然，那是不同的技术栈。如果有人真的坚持混合，可以考虑使用服务器端套接字与 PHP Web 服务进行交互；和/或使用 mongodb 和/或 mysql-node 与相同的数据库进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-11T07:19:23.293

我发布了一个陨石[包](https://atmospherejs.com/package/wordpress-json-api)，它与一个拥有[Wordpress JSON API](https://wordpress.org/plugins/json-api/)的 Wordpress 网站交互。快速修复。目前。

附带一个将返回原始数据的后端调用，或一个使用其 id 而不是随机生成的 mongoid 存储帖子的发布。还有一些基本模板可以帮助您入门，包括一个 Session 变量，用于跟踪当前选定的帖子。

我正在做更多的工作，最终会有一个直接从节点调用 mysql 的版本，这样你就不需要 php 或 Wordpress；只是能够访问 mysql 数据库（可以是远程的，具有适当的配置，或者在同一台机器上）。

# jquery - 寻找条件子视图 didInsertElement 事件...什么的

> ID：11655127
> 
> 赞同：2
> 
> 时间：2012-07-25T17:17:21.930
> 
> 标签：jquery, jquery-ui, ember.js

我假设我遗漏了一些东西，因为到目前为止我需要的任何功能都在 ember.js 中，即使只是没有记录。（耶 github）

那么我应该如何将 jquery.ui 与具有条件子视图的视图一起使用呢？

所以说这是我的模板

```
<ul>
    <li>Item 1</li>
    {{#if someBinding}}
    <li>Item 2</li>
    {{/if}}
    <li>Item 3</li>
</ul> 
```

在我相应的观点中......

```
someView = Ember.View.extend({
    ...
    didInsertElement: function() {
        this.$('ul>li').button();
    }
    ...
}); 
```

所以这样做的问题是视图将使用 Item 1 & 3 渲染到 DOM 中，然后调用 didInsertElement。因此第 2 项将无法正确构建。

在条件视图也被添加到 DOM 之前，手动观察“someBinding”也会触发，所以这无济于事。

那么一旦所有视图都进入并同步绑定，是否有一个事件或某种方式可以调用我的 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:36:21.357

此解决方案适用于“静态”渲染*（`stuff`在渲染之前设置的值，而不是更改......）*：

**车把**

```
<script type="text/x-handlebars" data-template-name='app-view'>
    <ul>
        <li>Item 1</li>
        {{#if view.stuff}}
        <li>Item 2</li>
        {{/if}}
        <li>Item 3</li>
    </ul>
</script>​ 
```

**JS**

```
App.ApplicationView = Ember.View.extend({
    templateName: 'app-view',

    stuffBinding: 'App.stuff',

    didInsertElement: function () {
        this.$('ul>li').button();
    }
}) 
```

您缺少`view.`视图中的范围。

在这里工作 JSFiddle：http: [//jsfiddle.net/MikeAski/H6MNj/](http://jsfiddle.net/MikeAski/H6MNj/)

* * *

对于`stuff`随时间变化的值，尝试解耦`Item 2`渲染，并将其嵌套在包含条件显示逻辑的子视图中。

**车把**

```
<script type="text/x-handlebars" data-template-name='app-view'>
    <ul>
        <li>Item 1</li>
        {{#view view.stuffView}}Item 2{{/view}}
        <li>Item 3</li>
    </ul>
</script>​ 
```

**JS**

```
App.ApplicationView = Ember.View.extend({
    templateName: 'app-view',

    didInsertElement: function () {
        this.$('ul>li').button();
    },

    stuffBinding: 'App.foo.bar',

    stuffView: Ember.View.extend({
        tagName: 'li',

        stuffBinding: 'App.foo.bar',

        isVisible: function() {
            var stuff = this.get('stuff');
            return stuff;
        }.property('stuff'),

        didInsertElement: function () {
            this.$().button();
        }
    })
}) 
```

JSFiddle 更新 @ [http://jsfiddle.net/MikeAski/H6MNj/3/](http://jsfiddle.net/MikeAski/H6MNj/3/)

* * *

`CollectionView`另一种可能的方法是使用（或`each`助手）呈现可能会有所不同的项目列表。

如果您想要样品，请告诉我。

# apache - Apache Lucene 索引编写器

> ID：11655128
> 
> 赞同：0
> 
> 时间：2012-07-25T17:17:22.770
> 
> 标签：apache, lucene

我是 apache lucene 的新手。我开始使用 lucene。我遇到了一个问题。我开始索引目录中的所有文件。我没有关闭索引器，而是尝试在卢克中打开。它提示错误“索引未关闭”。这里的问题是代码执行已经完成。如何解锁索引？如果我用相同的目录实例化一个新的 IndexWriter，它会覆盖现有的索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:21:19.980

我也不是专家。。

如果我是你，我会做以下事情..

1) 将以下代码段添加到最后的代码中，这是必须不惜一切代价的。

```
myIndexWriter.close(); 
```

2）手动删除现有目录，然后重新运行整个代码。

如果您在不删除目录的情况下实例化新的 IndexWriter，它会将文档添加到现有索引中。是的，它会导致重复的索引条目。

但是，从 Lucene 的角度来看，所有这些条目仍然是唯一的，即每个 addDocument() 在索引中创建一个具有新的唯一 lucene-internal-doc-id 的新条目。

# java - 无法识别在 JSP 函数中写入的变量

> ID：11655131
> 
> 赞同：1
> 
> 时间：2012-07-25T17:17:36.760
> 
> 标签：java, javascript, html, jsp, servlets

这个函数写在 jsp 文件的 HEAD 标记内，我从 jsp 的 BODY 标记内调用它：

```
<%!
public void func1(String var1, String var2)
{
    String Name = var1 + "," + var2;
%>
    <input type='image' name=<%=Name%>
     src='somePath' onclick="submit()"/></br>
<%!
}
%> 
```

我收到一条错误消息：“找不到符号符号：变量名称位置：类 SimplifiedJSPServlet”

任何建议为什么名称无法识别？我是否写得正确并将其放置在正确的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:26:53.280

看起来您的变量`Name`仅在第一个 scriplet 段中定义。要声明为类成员变量，请使用：

```
<%!
      String name;
%> 
```

在任何方法范围之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:08:38.267

```
<%!
public void func1(String var1, String var2)
{
    String Name = var1 + "," + var2;
    out.println("<input type='image' name='" + Name + "' src='somePath' onclick='submit()'/><br>");
}
%> 
```

然后您可以在 JSP 中的任意位置调用上述方法。

```
Ex: <%= func1("Text1", "Text2") %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:49:03.133

您的变量仅在函数调用期间的范围内。要访问该值，您需要执行以下操作

```
request.setAttribute("name", name); 
```

在你的函数内部（你可以使用 pageContext 或 request - 我不知道你想要什么范围。

然后在你的功能之外你可以简单地做

```
<input type='image' name="${name}" /> 
```

# wpf - 为 InArgument 提供默认值

> ID：11655142
> 
> 赞同：1
> 
> 时间：2012-07-25T17:18:07.733
> 
> 标签：wpf, workflow-foundation-4

Old`System.ComponentModel`提供了一个`DefaultValueAttribute`，当应用于属性时，将其标记为在诸如 Windows 窗体设计器之类的工具中具有默认值。

WPF/Workflow Foundation 世界中是否有等效的属性？以下没有按预期工作：

```
[DefaultValue('|')] // From System.ComponentModel
public InArgument<char> ColumnSeparator { get; set; } 
```

WPF 设计器忽略此属性声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:01:44.697

等效于实现[IActivityTemplateFactory](http://msdn.microsoft.com/en-us/library/system.activities.presentation.iactivitytemplatefactory.aspx)，并在`Create`方法中设置所有默认值。

您可以让您的 Activity 实现此功能，以减少麻烦和混乱。

```
public sealed class MyActivity : NativeActvity, IActivityTemplateFactory
{
    public Activity Create(DependencyObject target) { /*...*/ }
    // snip 
```

在这种方法中进行配置/初始化将帮助您避免在尝试初始化活动时可能遇到的所有奇怪的极端情况。您还可以对其进行强制转换，`target`并从设计图面中的工作流状态中获取您需要的一切（例如，自动绑定到属性）。

IActivityTemplateFactory 非常强大。它不仅限于添加单个 Activity。地狱，您可以放入一个完全构建的子组件，可以说是工作流程。它的好东西。

# regex - 正则表达式：省略搜索字符串

> ID：11655144
> 
> 赞同：0
> 
> 时间：2012-07-25T17:18:11.693
> 
> 标签：regex, search, filesystems, locate

假设我想在文件系统上查找特定的内容，但在搜索中省略某些目录。

而不是 type `locate string`，我想输入`locate string[omit anything which resides in specified directory]`。

因此，例如，假设我想`/usr/share`从列表中省略。

这是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:19:22.210

```
locate string | grep -v ^/usr/share 
```

或者，如果您使用 搜索，请`find`使用`-prune`：

```
find / -name \*string\* \( -path '/usr/share' -prune -o -print \) 
```

# apache - 管理多个 apache httpd 实例的最有效工具是什么？

> ID：11655145
> 
> 赞同：0
> 
> 时间：2012-07-25T17:18:13.523
> 
> 标签：apache

我们的内部网上有许多 Apache 实例。一些实例在同一台机器上运行。一些实例在不同的机器上运行。

我需要一种可以从一个中心位置管理这些实例的工具。

*   获取 CPU 统计信息
*   获取连接统计信息
*   停止/启动 Apache 实例
*   访问错误日志

我查看了 webmin，但文档不太清楚它是如何工作的。如果不安装它，我将无法使用它。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:21:35.123

我自己从未使用过它，但我看到有监控需求的人对[Cacti](http://www.cacti.net/)非常满意。除了像 CPU 统计这样的一般健康监控之外，它还有一个非常简单的[Apache 统计插件](http://www.cacti.net/additional_scripts.php)，可以满足您的需求：

> 获取每秒请求数和当前正在从 Apache 网络服务器处理的请求的脚本。

也许你可以把它放在一起。

# iis - Umbraco 在资源上抛出 404 错误 - IIS Express

> ID：11655146
> 
> 赞同：1
> 
> 时间：2012-07-25T17:18:16.180
> 
> 标签：iis, iis-7, http-status-code-404, umbraco5

我可以运行 Umbraco 站点，进入 umbraco.aspx 页面，但是在您登录时尝试加载的所有 css、js、图像都会返回 404（未找到）错误。

该站点使用其自己的 AppPool 运行，其身份设置为：**ApplicationPoolIdentity** 我已验证文件夹具有正确的权限。Umbraco 网站提供了一些脚本来设置权限。我手动设置了一些资源文件夹/文件以测试失败。

我可以执行以下操作：

1.  我可以通过浏览器中的文件夹路径打开文件，即 c:\DirectoryName\umbraco\css\filename.css
2.  我可以打开相关目录中的任何 aspx 页面。

我不能：

1.  将 URL 加载到文件中`http://localhost/umbraco/css/somefilename.css`

**示例错误 CSS 文件（但同样适用于 js 文件和图像）**

```
Request URL:http://localhost/umbraco_client/panel/style.css?cdv=1
Request Method:GET
Status Code:404 Not Found
Request Headersview source
Accept:text/css,*/*;q=0.1
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:UMB_UCONTEXT=0db94de2-069c-40ce-b166-bab7b0adce34;         ASP.NET_SessionId=paothhfjrxiozxkysmnrqke3; UMB_UPDCHK=1;  .JbfAUTH=D9053593029C68111E4718F956C1D9B3685E8265AA95C27E72CB18897F802A3887A30CAFA0A0E50AD6C6935D65429E23BAE29BC12A6619A53658A88C4E3A34AD771C65C139322DC4B433AFF3EA0DBD49261220B00935FF413128EE9567B1B4E2C4F31AD1A770EAC96399A2862D60CB906A00B328567136C2124666DB6D4E8F2A6A13E3F446F999E824390E02CCCF20381021EB129AE9AA10D8D3662B6571FD08FCC99CBBEBBFC17DDFE7131A057D0B0EDC021875B74849F858B900606A1BE62AE7C11EEA0FCB4C577AF926C16E1A056B2ACEC975D707209BB848F2B7D43ABC29A74ADF425025F0C39FA01403A77D91AE60DED766
Host:localhost
Referer:http://localhost/umbraco/dashboard.aspx
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko)      Chrome/20.0.1132.57 Safari/536.11
Query String Parametersview URL encoded
cdv:1

Response Headersview source
Content-Length:0
Date:Wed, 25 Jul 2012 17:09:47 GMT
Server:Microsoft-IIS/7.5
X-Powered-By:ASP.NET 
```

**更新** 我已经验证，如果我让网站通过 Visaul Studio 2010 开发服务器加载，它运行没有问题。

我还创建了一个新的 IIS 站点并抛出了几个 js 文件并尝试访问它们，还发现我在浏览它们时遇到了相同的 404 错误。所以这可能更像是一个 IIS 问题（IIS Express）Windows 7。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T13:08:46.693

原来是IIS的问题，需要重新安装。

# mysql - 恢复已删除的 MySQL 行？

> ID：11655156
> 
> 赞同：1
> 
> 时间：2012-07-25T17:19:07.793
> 
> 标签：mysql, recover

我错误地删除了一些行。我有 MYD、FRM 和 MYI 文件。当我检查 MYD 文件时，我可以看到已删除的记录。我在删除后立即获得了这 3 个文件的副本。

如何恢复 MYD 文件中已删除的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:57:13.630

从备份中恢复，在最坏的情况下[寻求专业帮助](http://www.percona.com/mysql-consulting/data-recovery/)。也看看[这里](http://planet.mysql.com/entry/?id=24119)。

不要对存储数据的磁盘进行任何修改。如果你想玩它 - 先想象它。

# facebook - Facebook 标头不起作用

> ID：11655162
> 
> 赞同：1
> 
> 时间：2012-07-25T17:19:26.307
> 
> 标签：facebook, image, header

为什么这个 Facebook 标题不起作用？

```
<meta property="fb:admins" content="100001241265117">
<meta property="fb:app_id" content="346433102099273">
<meta property="og:url" content="http://www.fontedelucro.com.br">
<meta property="og:title" content="Fonte de Lucro - Seu negócio na internet">
<meta property="og:site_name" content="Fonte de Lucro - Seu negócio na internet">
<meta property="og:description" content="Blog relacionado a negócios na internet em geral. E-commerce,Programa de afiliados,Novidades entre outros">
<meta property="og:type" content="website">
<meta property="og:image" content="http://www.fontedelucro.com.br/wp-content/uploads/2012/07/dolar50.gif">
<meta property="og:locale" content="pt_br"> 
```

当我将网址放在帖子中时，标题图片不显示。

该页面是[http://www.fontedelucro.com.br](http://www.fontedelucro.com.br)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:23:22.507

使用此工具检查出了什么问题： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fwww.fontedelucro.com.br](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.fontedelucro.com.br)

显然只有图像是错误的。

编辑：

还有一件事。如果您在设置标头之前尝试共享您的 url，facebook 将缓存标头或非标头。因此，您需要使用 Facebook 对象调试器来强制清除此缓存。

# jquery - 为什么这个飞行的文字渲染不连贯？

> ID：11655165
> 
> 赞同：0
> 
> 时间：2012-07-25T17:19:36.037
> 
> 标签：jquery, html, css, animation, jquery-animate

我有这个飞行的文本侯爵，它在飞行时呈现出非常不稳定的状态（尤其是在 FireFox 中）它似乎以一定的间隔跳跃，我想知道我是否可以通过使用 easeIn 或类似的东西让它运行得更顺畅。对此有什么想法吗？

为了方便起见，我设置了一个[jsfiddle](http://jsfiddle.net/c6EHj/3/)。

HTML：

```
<div id="taglines">
    <h4>Your expert. Your partner.</h4>
</div>
<div class="container">
    <h3 id="fly1" class="flying-text active-text">Creative Solutions</h3>
    <h3 id="fly2" class="flying-text">Graphics</h3>
    <h3 id="fly3" class="flying-text">Sourcing</h3>
    <h3 id="fly4" class="flying-text">Distribution</h3>
    <h3 id="fly5" class="flying-text">Online Tools</h3>
    <h3 id="fly6" class="flying-text">Custom Branding</h3>
    <h3 id="fly7" class="flying-text">Personalized Support</h3>
</div>​ 
```

CSS：

```
.container{
    width:1000px;
    margin:0 0 0 -10px;
    color:#c3cd25;
}

#taglines{
    color:#000;
}

#taglines h4{
    font-size:20px;
}

.flying-text{
    margin-left:-100px;
    font-size:40px;
} 
```

JavaScript：

```
$(document).ready(function(){
    $('.container .flying-text').css({opacity:0});
    $('.container .active-text').animate({opacity:1, marginLeft: "350px"}, 4000);

    var int = setInterval(changeText, 5000);    

    function changeText(){
        var $activeText = $(".container .active-text"); 
    var $nextText = $activeText.next(); 

        if($activeText.next().length == 0) $nextText = $('.container .flying-text:first');

    $activeText.animate({opacity:0}, 1000);
        $activeText.animate({marginLeft: "-100px"});    
        $nextText.css({opacity: 0}).addClass('active-text').animate({opacity:1, marginLeft: "350px"}, 4000, function(){ 
        $activeText.removeClass('active-text');                                           
        });
     }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:25:00.693

AFAIK 您几乎受到浏览器执行 Javascript 以在每个动画周期更新 DOM 元素的 CSS 属性的速度的限制。您可以使用 Modernizr 检查 CSS 过渡支持并使用那些如果可用，如果不支持则回退到 jQuery 动画。我在许多项目中使用了这种技术，并且效果很好——原生 CSS 转换比 Javascript 动画性能更高（即使不是硬件加速）。

```
if (Modernizr.csstransitions) {
    // update CSS
}
else {
    // animate CSS
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:26:02.463

这很不稳定，因为您使用的是 DOM 重绘样式的动画。这基本上是“每 16 毫秒让我们重绘尽可能少的页面（这通常会开始很多）”

另一种方法是原生的、内置的 CSS3 方法！这将无限平滑，并且代码比 jQuery 的 .animate() 方法好得多。缺点是我们不得不担心旧的浏览器。这就是 Ben Barnett 的 jQuery 插件派上用场的地方。

[http://playground.benbarnett.net/jquery-animate-enhanced/](http://playground.benbarnett.net/jquery-animate-enhanced/)

这是放在其他 JS 内容之上的代码段：

`<script src="https://raw.github.com/benbarnett/jQuery-Animate-Enhanced/master/jquery.animate-enhanced.min.js" type="text/javascript"></script>`

这个奇妙的工具将获取您现有的代码，分析浏览器，并在可能的情况下自动将其转换为更流畅的 CSS3 动画。这正是您所需要的。只需将其包含在动画代码上方的页面中。

*其他要考虑的事情...*

如果您愿意玩真正可怕的实验性东西（这并不像看起来那么糟糕），我会尝试将此代码添加到动画元素的 CSS 中：

`-webkit-transform-style: preserve-3d;`

这告诉浏览器，“去拿 GPU，我在这里做一些繁重的工作！” 然后你有用户的 GPU 来动画它而不是 CPU。如果您的页面需要一点提升，总是有帮助的。请记住，它有时会导致页面的图形撕裂，因为它仍然是真正的实验性 webkit 东西。它应该适用于 Safari 5+ 和 Chrome 10+。

# jquery - 使用 skrollr.js 和调整窗口大小

> ID：11655169
> 
> 赞同：1
> 
> 时间：2012-07-25T17:19:47.170
> 
> 标签：jquery, jquery-plugins, resize

我有一个网站，其主页由主区域和辅助区域组成，顶部有一个菜单，主区域会根据显示器的宽度和高度自动调整大小：

```
W = $(window).width();
H = $(window).height(); 
```

进而

```
$("#toparea").css('width', W);
$("#toparea").css("height", H); 
```

事情是我正在使用[skrollr.js](http://prinzhorn.github.com/skrollr/)插件来固定一些元素，我想知道如何使用我已经创建的那些 W 和 H 将这些元素固定在可变位置。

例如，如果浏览器的高度是 860，我应该如何使用 skrollr 插件来检测高度为 860 像素。

```
<div id="menubar" data-1="top:100%" data-H="top:0%;" > 
```

因此，一旦您滚动了 H 像素，菜单将固定在屏幕顶部。

我该如何编码，以便 skrollr 插件理解 H 的含义？

也许在api中有一些方法可以做到这一点，但到目前为止还没有运气：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:27:19.253

我不确定我是否明白你想要什么：

听起来像是使用相对锚的一个很好的用例（如果你还没有这样做，你应该使用 skrollr > 0.4）：

```
<div id="menubar" data-1="top:100%" data-top-top="top:0%;" > 
```

`data-top-top`表示“当元素的顶部位于视口的顶部时”。由于这些值是预先计算的，因此即使您的元素实际上是绝对定位并且不会移动，它也应该可以工作。

这是使用 skrollr 0.4.2 的官方示例（必需）[http://prinzhorn.github.com/skrollr/examples/fixed_nav.html](http://prinzhorn.github.com/skrollr/examples/fixed_nav.html)

# http - 要求 CURL 在收到标头后立即断开连接

> ID：11655170
> 
> 赞同：2
> 
> 时间：2012-07-25T17:19:54.940
> 
> 标签：http, curl

我正在从服务器中提取数据，但在提取数据之前需要知道数据的类型。我知道我可以查看响应标头中的内容类型，并且我已经研究过使用

curl --head [http://x.com/y/z](http://x.com/y/z)

但是有些服务器不支持“HEAD”命令（我得到一个 501 未实现的响应）。

是否有可能以某种方式使用 curl 进行 GET，并在收到所有标头后立即断开连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:44:20.353

查看以下答案：

[https://stackoverflow.com/a/5787827](https://stackoverflow.com/a/5787827)

> 流媒体。UNIX 哲学和管道：它们是数据流。由于 curl 和 GET 是 unix 过滤器，结束接收管道 (dd) 将提前终止 curl 或 GET (SIGPIPE)。不知道服务器是否足够聪明以停止传输。但是在 TCP 级别上，我想一旦没有更多响应它就会停止重试数据包。@sehe

使用此方法，您应该能够下载任意数量的字节，然后取消请求。您还可以在收到空白行后使用一些魔法来终止，这意味着标题的结尾。

# java - HTML中的句子边界检测

> ID：11655175
> 
> 赞同：3
> 
> 时间：2012-07-25T17:20:15.200
> 
> 标签：java, html, nlp, text-segmentation

我需要检测 HTML 中的句子边界。那里有很多句子边界检测软件（java.text.BreakIterator 是我正在使用的软件），但所有这些软件都假设纯文本。HTML 比这更丰富，并且包含一些关于句子中断位置的线索。

例如，`<p>, <ul>/<li>, <td>`其他标签标记句子边界，或者至少表明句子可能不会跨越它们。`<b>, <i>, <em>, <span>, <a>`句子中可能会出现其他一些标签。

除了正常的 NLP 内容之外，是否有人知道任何利用 HTML 标记来确定句子边界的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:24:21.457

我实现的解决方案是 1\. 将文档拆分为所有 html 标记上的单独块，除了内联标记（`<i>`、`<b>`、`<span>`等），2\. 从每个块中去除内联标记， 3\. 使用传统方法在每个块中查找句子.

# c# - 如何将图像导出到动作文件

> ID：11655194
> 
> 赞同：1
> 
> 时间：2012-07-25T17:21:38.320
> 
> 标签：c#, colors, palette, act

我正在尝试为我的工作创建一个迷你工具。我正在使用 C# 和 Visual Studio 2010 来做到这一点。现在我需要将图像导出到行为文件。

跟随这里， http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalette.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalette.aspx)

我写

```
class Palette : List<Color>
{
    public static Palette GetFromImage(String PathToImage)
    {
        //Load imgae
        BitmapImage image = new BitmapImage();
        image.BeginInit();
        image.UriSource = new Uri(PathToImage, UriKind.RelativeOrAbsolute);
        image.EndInit();

        //Load palette
        BitmapPalette BitmapPalette = new BitmapPalette(image, 256);

        //Convert it to list of Color
        Palette pal = new Palette();
        for (int i = 0; i < BitmapPalette.Colors.Count; i++)
        {
            pal.Add(Color.FromArgb(BitmapPalette.Colors[i].R, BitmapPalette.Colors[i].G, BitmapPalette.Colors[i].B));
        }
        //Return the palette has been creatted
        return pal;
    } 
```

此代码已生效，但结果中所有颜色的顺序与我通过 photoshop 导出时所有颜色的顺序不同。因此，当我将所有颜色写入行为文件时，行为文件不正确。

任何人都可以帮助我。

多谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-05-02T11:39:11.297

动作文件是编译后的二进制文件。

您不能对行为文件进行编码。

也许 Photoshop 可以导入一个 css 文件（就像调色板一样）

# emacs - 组织模式。在列视图中排序

> ID：11655196
> 
> 赞同：6
> 
> 时间：2012-07-25T17:21:44.210
> 
> 标签：emacs, org-mode

我们如何在列视图中排序。具体来说，我有一个估计任务列表以及它们的优先级，我希望能够根据任何字段动态地或至少通过将字段指定为属性来对它们进行排序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T17:30:33.320

AFAIK，您在列视图中时无法排序。但是您退出列视图（通过键入“q”）。他们可以使用 Mx org-sort (Cc ^) 按属性对条目进行排序。为属性键入 r，然后输入要排序的属性。

例如，假设我们从这个开始：

```
* Test
** First task
   :PROPERTIES:
   :Effort:   1:30
   :END:
** Second task
   :PROPERTIES:
   :Effort:   0:30
   :END: 
```

导航到“* Test”并输入 Cc ^（或 Mx org-sort）。在这种情况下，键入“r”，然后输入“Effort”以获得结果顺序：

```
* Test
** Second task
   :PROPERTIES:
   :Effort:   0:30
   :END:
** First task
   :PROPERTIES:
   :Effort:   1:30
   :END: 
```

然后再次进入列视图。（注意，您也可以按优先级排序 --- 当您调用 org-sort 时，您会看到该选项。）

Additionally, you can export your column view to a table and then sort the table by column:

[http://orgmode.org/manual/Capturing-column-view.html](http://orgmode.org/manual/Capturing-column-view.html)

# facebook - 无法访问 OpenGraph 的编辑操作

> ID：11655206
> 
> 赞同：0
> 
> 时间：2012-07-25T17:22:26.813
> 
> 标签：facebook, facebook-opengraph

我向 Facebook OpenGraph 提交了一个操作，并收到一条消息，指出必须更改某些内容。当我单击 Facebook 开发人员站点上的操作以查看需要更改的内容时，我收到一条 HTTP 500 错误消息。即使当我访问另一个已获批准的操作时，我也会收到相同的错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:31:06.730

这个问题可能是因为网络浏览器！

读到这个听到：[http ://socialmediaseo.net/2010/03/25/facebook-errors-http-500/](http://socialmediaseo.net/2010/03/25/facebook-errors-http-500/)

你想做什么？！

# sql - SQL 连接和乘法

> ID：11655207
> 
> 赞同：0
> 
> 时间：2012-07-25T17:22:27.813
> 
> 标签：sql, inner-join

我对 SQL 很陌生，我所有的背景都是过程语言。我遇到了很多困难，直到现在我才能够研究我所有问题的答案。

我有两个表，结构如下：

dbo.SERVICE - 所有服务订单/维护调用的列表

```
SERVICE_ORDER_NO | PART_NO | QUANTITY | PART_DESC | CREATED_DT | CHANGED_DT 
```

dbo.PART - 正在维修的机器中所有部件的列表

```
PART_NO | COST 
```

我想获取给定时间范围内使用的零件清单，包括总数量和总成本，并按数量排序。到目前为止，我已经能够使用以下查询适当地获取使用的部件和数量（为简单起见，日期已被硬编码）：

```
SELECT SERV.PART_NO, SUM(SERV.QUANTITY) AS QUANTITY
FROM dbo.SERVICE SERV
WHERE SERV.CREATED_DT >= '01/01/2012'  AND SERV.CREATED_DT < '02/01/2012'
GROUP BY SERV.PART_NO
ORDER BY QUANTITY DESC 
```

不过，我很难获得总成本。我试过这个：

```
SELECT SERV.PART_NO, SUM(SERV.QUANTITY) AS QUANTITY, SUM(SERV.QUANTITY * PART.COST) AS COST
FROM dbo.SERVICE SERV
INNER JOIN dbo.PART PART
ON PART.PART_NO = SERV.PART_NO
WHERE SERV.CREATED_DT >= '01/01/2012'  AND SERV.CREATED_DT < '02/01/2012'
GROUP BY SERV.PART_NO
ORDER BY QUANTITY DESC 
```

但是，数字是错误的（数量太高了），当我之前的查询给我 1900 时，我得到了大约 1600 行。我假设我的 JOIN 语句有问题，但我不知道它是什么。谁能给我一个有效的查询，或者为我的问题指出一个很好的参考？

任何指向良好的通用 SQL 帮助存储库的方向都会很棒......我还没有真正找到任何一个既全面又易于理解的地方。

PS - 我在该查询中调用 SUM() 两次会减慢我的代码速度吗？我不知道 SQL 是如何工作的……从 QUANTITY 列中获取结果并将它们相乘是否足够聪明？如果没有，更有效地运行它的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:30:03.813

正如我在评论中所说，您的 table 上有多个`COST`for each值。为了让您加入工作，您需要选择一项费用：`PART_NO``PART`

```
SELECT SERV.PART_NO, SUM(SERV.QUANTITY) AS QUANTITY, SUM(SERV.QUANTITY * PART.COST) AS COST
FROM dbo.SERVICE SERV
INNER JOIN (SELECT PART_NO, MIN(COST) AS COST 
            FROM dbo.PART 
            GROUP BY PART_NO) AS PART
ON PART.PART_NO = SERV.PART_NO
WHERE SERV.CREATED_DT >= '01/01/2012'  AND SERV.CREATED_DT < '02/01/2012'
GROUP BY SERV.PART_NO
ORDER BY QUANTITY DESC 
```

我为每个部分选择了最低成本，但您可以将其更改为最大值或平均值。

# drop-down-menu - 508 合规性是否必须使用键盘快捷键

> ID：11655214
> 
> 赞同：11
> 
> 时间：2012-07-25T17:22:57.270
> 
> 标签：drop-down-menu, standards-compliance, section508, jaws-screen-reader

我对此进行了很多研究，似乎在 SO 和所有网络上都得到了相互矛盾的答案。我明白，对于第 508 节，合规性不等于可访问性。

最重要的是，UI/UX 设计师被告知下拉菜单的键盘快捷键需要具有符合 508 的键盘快捷键。我看到 Windows 窗体应用程序具有此功能，但对于 Web 开发，我认为“合规”不是强制性的

我回答的另一个问题在这里：[MVC 4 site 508 compliant](https://stackoverflow.com/questions/11424355/mvc-4-site-508-compliant/11439747#comment15415519_11439747)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T05:13:50.323

一些标准（以及许多法律）的问题在于它们对解释持开放态度......

我在 508 标准中唯一提到键盘使用[的是这个](http://www.section508.gov/index.cfm?fuseAction=stdsdoc#Web)（逐字）：

> B分部——技术标准
> 
> § 1194.21 软件应用程序和操作系统。
> 
> (a) 当软件设计为在具有键盘的系统上运行时，产品功能应可从键盘执行，其中功能本身或执行功能的结果可通过文本识别。

我对此的看法是：

*   考虑到给定部分可能包含的操作/功能的数量，导航选项的键盘*快捷键*可能不切实际。重要的是它们可以通过键盘以某种方式访问​​。
*   从用户体验的角度来看，关键特性应该有快捷方式，“仅仅因为”它是良好的用户体验实践。但是为了走捷径，*一切*都会从一个沟渠进入另一个沟渠。
*   508 != 可访问性，但如果您为 gov/edu 工作，那么您的 PD 很可能符合要求。

频谱的另一端是 WCAG，它与 508 合规性几乎相结合，在我的书中得到了更好的定义：[键盘的东西在 WCAG 中是“可操作的”。](http://www.w3.org/TR/WCAG/#operable)

简而言之：对于用户体验来说，为重要功能提供自定义键盘快捷键是一种很好的做法。但本身与 508 合规性无关。（除了功能应该可以通过键盘访问 - 不知何故 - ）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T21:04:06.603

我部分同意thinice，但同意评论的前两句话。

我指的句子是：

> 对于 508，它们应该可以通过键盘访问。我一直强调快捷方式和可访问之间的区别

Crixus 说：

> 最重要的是，UI/UX 设计师被告知下拉菜单的键盘快捷键需要具有符合 508 的键盘快捷键。

你需要澄清这一点。您是指`<select>`导航菜单的简单菜单还是下拉菜单？正如 Thinice 在评论中所说，第 508 条只是说需要可达。问题变成：

> **你是如何**为你的应用程序添加快捷键的？您是通过 accesskeys 属性添加它们还是 Gmail/Yahoo Mail 如何添加快捷键？

我以为我回答了有关 AccessKeys 的问题，但找不到。从本质上讲，accesskeys 听起来很棒，但是如果您查看允许使用的密钥，它们不会干扰浏览器或辅助技术密钥，那么您的能力就非常有限。Gez Lemon[对 AccessKeys 及其问题进行了概述](http://juicystudio.com/article/access-key-companion.php#consistency)。如果你想使用 Yahoo!Mail 方法，你必须做更多的工作。Todd Kloots 做了一个[关于 ARIA 的演讲](http://www.slideshare.net/toddkloots/aria-widgets)，这可能会有所帮助。这使我进入第二部分。如果您在网站上大量使用 JavaScript 来做事，人们会同时使用**1194.21**（软件应用程序/操作系统）*和*1194.22（网络）标准来评估网站。如果网站使用JS制作navmenu（[YUI菜单示例](http://yuilibrary.com/yui/docs/node-menunav/node-menunav-2-example.html))，下拉行为需要可以通过键盘访问。我会说这属于：

> § 1194.21 软件应用程序和操作系统。
> (a) 当软件设计为在具有键盘的系统上运行时，产品功能应可从键盘执行，其中功能本身或执行功能的结果可通过文本识别。

和

> (c) 应提供明确定义的当前焦点屏幕指示，随着输入焦点的变化在交互界面元素之间移动。焦点应以编程方式公开，以便辅助技术可以跟踪焦点和焦点变化。

我说这两个标准都被使用了，因为 (a) 说你必须能够通过键盘进入导航区域。(c) 之所以起作用，是因为您可以使用某些菜单`tab`访问所有父项，但如果没有鼠标则无法进入下拉部分。我见过的菜单，你可以`tab`到子菜单项，但菜单不弹出打开。因此，如果您只使用键盘（移动设备），而不是使用 JAWS，您将不知道自己在哪里。

> 我看到 Windows 窗体应用程序具有此功能，但对于 Web 开发，我认为“合规”不是强制性的

我会说实际的应用程序，如 Word、Outlook 等，提供常用命令的快捷方式。如果您是为 Web 应用程序执行此操作，我会考虑您做了多少。这不是必须遵守的。如果您正在制作导航栏，我建议您使用[ARIA 角色](http://www.w3.org/TR/wai-aria/roles)，特别`role="navigation"`是在父元素上作为最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:50:36.247

如果您谈论的是政府项目，则存在 508 合规级别。一些部门为他们的开发人员分配了 508 分，它会影响你未来合同的分数。508 合规性只要求所有内容都可以通过键盘访问，这在某种程度上通常是正确的。屏幕阅读器将阅读所有未隐藏的内容，并且 Tab 键将引导人们浏览链接。但如果你想要一个好分数，你必须解决意图，而不仅仅是法律条文。

**编辑**：屏幕阅读器将阅读一些隐藏的元素。一种方法是将项目绝对定位在屏幕上方，顶部位置为负。另一种是使用剪辑属性。 [http://adaptivethemes.com/using-css-clip-as-an-accessible-method-of-hiding-content/](http://adaptivethemes.com/using-css-clip-as-an-accessible-method-of-hiding-content/) 但是如果你使用 display:none、零高度和 javascript 切换，许多屏幕阅读器会不讲这些项目。

在下拉的情况下，您正在积极地向屏幕阅读器等隐藏元素，因此您必须修复它，因为大多数阅读器不会听到 display:none 的内容。

您将找不到有关键盘导航的权威文档。没有人确切说明要做什么的原因是，有很多潜在的冲突——与浏览器、操作系统等。也没有标准，尽管 Aria 正在取得进展： [http ://www.w3.org /TR/wai-aria-practices/#keyboard](http://www.w3.org/TR/wai-aria-practices/#keyboard)

如果这就是您的意思，我不会将 accessKeys 放在菜单上。
而是参见：[http ://www.w3.org/TR/wai-aria-practices/#aria_ex_widget](http://www.w3.org/TR/wai-aria-practices/#aria_ex_widget)

我会为“搜索”和“主页”等主要内容保存实际的访问密钥。如果您拥有所有内容的访问密钥，则向您的站点添加学习曲线将无济于事。例如，如果您输入“About Us”accessKey=A，并且您有 20 个 accessKeys 分配给字母，那就不好了。

我做 508 网站已经很久了，就我个人而言，我只是不使用下拉菜单。添加子页面菜单要简单得多。我个人讨厌点击下拉菜单。下拉菜单需要精确的点击，这只会让我感到恼火，并且对可访问性没有帮助，因为记住可访问性还包括点击不佳的人。另外，下拉菜单在您可以拥有的级别数量上是有限的，这不是技术上的，而是从用户体验角度来看的。

我用什么：

*   标签索引。
*   精心布置的菜单，以便用户在听到网站或页面的基本概念之前不会获得大量链接列表。
*   在某些项目中，具有匹配箭头键页面导航的树形菜单按顺序排列。
*   如果需要，访问键 H 用于主页，S 用于搜索。

问题尤其是在排序信息方面。想想你扫描一长串链接的速度有多快，然后想象坐在那里等待它被读给你听。也许，将您的内容组织成易于理解的部分并让搜索框进行扫描。取决于内容。

运气。:)

# c++ - 在其他实现文件中包含实现文件有什么用？

> ID：11655217
> 
> 赞同：2
> 
> 时间：2012-07-25T17:23:06.793
> 
> 标签：c++, c, visual-c++

> **可能重复：**
> [#include 所有 .cpp 文件到单个编译单元中？](https://stackoverflow.com/questions/543697/include-all-cpp-files-into-a-single-compilation-unit)

我正在处理 MSVS 中的一个项目，其中大多数实现文件 ( `.cpp`) 从构建中排除并包含在编译的单个源文件中。

```
//a.cpp
#include "b.cpp"
#include "c.cpp"
//and so on... 
```

而且因为`b.cpp`and`c.cpp`不是自己编译的，所以没关系。

*我知道这不是标准做法，我知道其中的陷阱，我可能不会这样做（当然，除非有人提出充分的理由）。*

所以问题是——这种技术有什么用？它是否使编译更快（也考虑分布式编译环境）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:25:49.150

这称为*统一构建*。

它应该加速源代码的编译。

请参阅此处提供更多详细信息的相关问题：[统一构建的好处/缺点？](https://stackoverflow.com/questions/847974/c-the-benefits-disadvantages-of-unity-builds)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T17:30:35.480

另一点可能是一些实现文件可以自动生成。自动生成整个文件比处理对现有代码的更改注入要容易得多。就像 C# 中的部分类。

# android - ListView：应该打开一个新活动

> ID：11655224
> 
> 赞同：0
> 
> 时间：2012-07-25T17:23:35.677
> 
> 标签：android, arrays, string, listview

大家好。我是新手。我的目标是当我想单击 ListView 中的特定项目时，它应该打开一个我已编程的新活动。例如：当我点击“John”时，我希望它打开一个叫X的班级，Mary，应该打开一个班级Y，Charlie，Z班，等等。我尝试在代码末尾使用“onListItemClick”代码，但它不起作用。当我从 ListView 应用程序中单击 John 的名字时，什么也没有发生。请在我的代码错误的地方帮助我，我应该把代码放在哪里以及正确的代码是什么。

PS：我在 Manifest 文件中声明了所有活动

这是我正在使用的代码：

```
public class Searchsort extends Activity {

    private ListView lv1;
    private EditText ed;
    private String lv_arr[]={"John","Mary","Carl","Rose","Charlie","Allan", "João"};
    private ArrayList<String> arr_sort= new ArrayList<String>();
    int textlength=0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        lv1 = (ListView)findViewById(R.id.ListView01);
        ed = (EditText)findViewById(R.id.EditText01);

        // By using setAdpater method in listview we an add string array in list.

        lv1.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1 ,   lv_arr));
        ed.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

            }

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                textlength=ed.getText().length();
                arr_sort.clear();
                for(int i=0;i<lv_arr.length;i++) {
                    if(textlength<=lv_arr[i].length()) {
                        if(ed.getText().toString().equalsIgnoreCase((String) lv_arr[i].subSequence(0,  textlength))) {
                            arr_sort.add(lv_arr[i]);
                        }
                    }
                }

                lv1.setAdapter(new ArrayAdapter<String>  (Searchsort.this,android.R.layout.simple_list_item_1 , arr_sort));

            }
        });
    }

    public void onListItemClick(ListView parent, View v, int position, long id) {
        if ("John".equals(lv_arr[position])) { 
            Intent myIntent = new Intent(Searchsort.this, X.class);
            startActivity(myIntent);

        if ("Mary".equals(lv_arr[position])) { 
            Intent myIntent = new Intent(Searchsort.this, Y.class);
            startActivity(myIntent);

        if ("Charlie".equals(lv_arr[position])) { 
            Intent myIntent = new Intent(Searchsort.this, W.class);
            startActivity(myIntent);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:31:19.820

覆盖 onListItemClick 方法的唯一方法是您的 Activity 扩展 ListActivity。由于没有，您必须将 onListItemClick 方法中的代码移动到项目单击侦听器设置中的适当方法中

```
lv1.setOnItemClickListener(new onItemClickListener(){

    @Override
    protected void onListItemClick(AdapterView<?> arg0, View view, int position, long id){
        // Your code
    }
}); 
```

仅供参考，这是在 Stack 上多次提出的类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T06:59:11.500

试试这个代码..

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> paramAdapterView, View paramView, int paramInt,
            long paramLong) {
        switch( position )
{
   case 0:  Intent newActivity0 = new Intent(YourActivity.this, second.class);     
            startActivity(newActivity0);
            break;
   case 1:  Intent newActivity1 = new Intent(YourActivity.this, third.class);     
            startActivity(newActivity1);
            break;
   case 2:  Intent newActivity2 = new Intent(YourActivity.this, fourth.class);     
            startActivity(newActivity2);
            break;
   case 3:  Intent newActivity3 = new Intent(YourActivity.this, fifth.class);     
            startActivity(newActivity3);
            break;
   case 4:  Intent newActivity4 = new Intent(YourActivity.this, sixth.class);     
            startActivity(newActivity4);
            break;
}              
    }
}); 
```

试着让我知道......希望这对你有帮助:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:32:15.017

```
listView1.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,long arg3) {
        Toast.makeText(cxt, "You select Item " + (position + 1), Toast.LENGTH_SHORT).show();    
    }
}); 
```

# perl - Perl 在关键字之间搜索

> ID：11655226
> 
> 赞同：1
> 
> 时间：2012-07-25T17:23:57.620
> 
> 标签：perl, search

好的，假设我正在阅读的文件中有以下内容：

```
File:foobarbar.xml
abc
def
ghi
File:barbar.xml
jkl
mno 
```

我希望输出为：

```
foobarbar
barbar 
```

但由于某种原因，我只得到

```
foobarbar 
```

我正在使用以下代码：

```
if (/File([\s\S]+?)xml/) {
    $key= $1; 
    print OUTPUT "$key\n"
} 
```

注意：在上面的代码中，`$key`设置为`$number one`，而不是`$lower case letter L`。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:27:44.767

该正则表达式仅匹配第一个文件，使用 /g 修饰符获取所有匹配项

```
while (/File:(.*)\.xml/g) {
    $key = $1;
    print OUTPUT "$key\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:31:47.747

当您逐行读取输入时，以下代码按预期工作：

```
while(<>) {
  if (/File:([\s\S]+?)\.xml/){
    $key= $1; 
    print "$key\n";
  }
} 
```

# sql-server - 删除只有一列的重复数据？

> ID：11655229
> 
> 赞同：1
> 
> 时间：2012-07-25T17:24:09.020
> 
> 标签：sql-server, duplicate-removal

我有一个表`create`，只有一个名为`name`type 的列`varchar(16)`。

现在我想删除所有重复的名字，只留下一个。

例子：

```
 name1
 name2
 name3
 name3
 name3
 name4 
```

之后将是

```
 name1
 name2
 name3
 name4 
```

请指教。

我四处寻找查询，但大多数可用查询都与索引有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:27:52.903

使用 row_number

```
 WITH    cte
 AS 
 ( SELECT name, row_number() OVER ( PARTITION BY name ORDER BY name ) AS row_num
    FROM     yourTable
 )
DELETE  FROM cte
WHERE   row_num > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:30:08.243

MySQL 中的索引是数据库引擎有效分区和排序数据的一种方式，以便您的查询更高效。索引允许您做的一件事是指定特定的数据列或字段仅包含唯一条目。创建这样的索引将禁止添加已存储的数据。

如果您已经有一个没有索引的列，我建议您清除重复项的一种方法是使用临时表。通过从原始表中选择所有唯一（不同）名称来创建临时表。然后删除原始表中的所有内容，并将记录复制回来。此时，请考虑添加索引。

# css - 在 IE7 中，表格左侧的填充不起作用

> ID：11655237
> 
> 赞同：-4
> 
> 时间：2012-07-25T17:24:47.513
> 
> 标签：css, internet-explorer-7, padding

我有一个嵌入在 div 中的表格，图像浮动在它的左侧。我使用 padding-left 在图像和表格之间添加一些空间。它在大多数浏览器中都可以正常工作，但在 IE7 中，表格正在触摸图像。当我检查元素时，填充与表格重叠，而不是在表格的左侧。

我尝试在最小的小提琴中复制它，但我的尝试在所有浏览器中都遇到了这种不当行为，所以我不确定真实页面上有什么不同。

真实页面是：

[http://dev.bridgebase.com/barmar_test/lessons/index-so.php?cat_id=3](http://dev.bridgebase.com/barmar_test/lessons/index-so.php?cat_id=3)

我关心的间距在“标题：”的左侧。

尝试的小提琴是：

[http://jsfiddle.net/barmar/HaCgF/4/](http://jsfiddle.net/barmar/HaCgF/4/)

 `如何在所有浏览器中一致地获得此间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:42:42.970

你为什么不尝试删除表格上的填充，并将margin-left放在图像上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:43:11.810

这是[我试图](http://jsfiddle.net/HaCgF/6/)回答的问题。我移动了一点（如果它太多了就对我大喊：-p）......对`.movie`元素应用了一个clearfix，等等。这就是我会做的事情。我将填充移动到图像而不是`TABLE`. 我注意到表格上的填充并不总是您所期望的那样，而且我认为大多数浏览器只真正希望在`TH`和`TD`元素的内部进行填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:47:44.597

`padding-left`尝试在图像上添加 a而不是在桌子`margin-right`上。[请参阅我对您的 JSFiddle](http://jsfiddle.net/ufAZW/1/)所做的微小更改。`

# ajax - 通过AJAX获取远程xml文件并用jquery解析

> ID：11655239
> 
> 赞同：1
> 
> 时间：2012-07-25T17:24:53.150
> 
> 标签：ajax, jquery, xml-parsing

我正在为 Blackberry OS 5+ 开发 HTML5 应用程序。

我正在使用 jQuery 下载 XML 文件并使用此函数显示它：

```
$(document).ready(function()
{
    $.ajax({
        type: "GET",
        url: "http://xxx.com/yyy/mTop",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('item').each(function(){
                var tipo = $(this).find('tipo').text();
                var porcentaje = $(this).find('porcentaje').text();
                $('<div class="items"></div>').html('<p>' + tipo + ' - ' + porcentaje + '</p>').appendTo('#page-wrap');
            });
        }
    });
}); 
```

但我收到了这个错误：

```
XMLHttpRequest cannot load http://xxx.com/yyy/mTop. Origin file:// is not allowed by Access-Control-Allow-Origin. 
```

如何解析远程 XML 文件？

也许我需要将检索到的 XML 转换为 DOM 对象以与 jQuery 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:25:59.840

那是因为**同源政策**：

> 该策略允许在来自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性

你应该[**`JSONP`**](http://en.wikipedia.org/wiki/JSONP)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:46:53.657

您的部分问题是您的文件路径是文件夹而不是 XML 文件。从那里开始，看看你的问题是否仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T16:43:10.190

并且您的链接中没有文件位置（url：“http://xxx.com/yyy/mTop”）的原因是因为网站在您访问文件夹的那一刻“生成”了一个 xml，从而减慢了网站的速度每次你到达它..

你必须做的是：

在浏览器上访问http://xxx.com/yyy/mTop 右键-查看源代码-复制到记事本-另存为.xml

将文件上传到另一个文件夹

然后将您的代码网址更改为以下网址：“http://xxx.com/yyy/mTop/yourdailyXMLcopy.xml

并保持每天更新文件..否则，每次任何用户使用您的东西进行大量工作时，您都会终止服务器查询...

# cocos2d-iphone - 如何使某些精灵在触摸后消失 - Cocos2d

> ID：11655242
> 
> 赞同：0
> 
> 时间：2012-07-25T17:25:11.147
> 
> 标签：cocos2d-iphone

我想知道一旦 MainPlayer 接触到星星，如何消失某些精灵（星星）。

谢谢。顺便说一句，我是 Cocos2d 的新手，我这样做只是为了娱乐和教育目的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:44:03.430

如果您希望能够在 cocos2d 中检测到触摸，则需要在您的 init 方法中设置该`isTouchEnabled`属性。`YES`您现在可以利用触摸事件。

接下来，创建新方法：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    //This method gets triggered every time a tap is detected
    NSSet *allTouches = [event allTouches]; //Get all the current touches in the event
    UITouch *aTouch = [allTouches anyObject]; //Get one of the touches, multitouch is disabled, so there is only always going to be one.
    CGPoint pos = [aTouch locationInView:touch.view]; //Get the location of the touch
    CGPoint ccPos = [[CCDirector sharedDirector] convertToGL:pos]; //Convert that location to something cocos2d can use
    if (CGRectContainsPoint(yourSprite.boundingBox, ccPos)) //Method to check if a rectangle contains a point
    {
        yourSprite.visible = NO; //Make your sprite invisible
    }

} 
```

您最终可能想要利用的其他方法如下：

```
- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event; 
```

希望这有帮助。

# c# - 您可以将 JSON 字符串反序列化为 C# 数组吗？

> ID：11655244
> 
> 赞同：3
> 
> 时间：2012-07-25T17:25:32.993
> 
> 标签：c#, arrays, json, deserialization

我正在尝试反序列化 JSON 字符串

```
[{ "key" : "1", "value" : "open"}, {"key" : "2", "value" : "closed"}, {"key" : "3", "value" : "pending"}] 
```

到 C# 数组中。我收到错误“没有为 'System.Array' 类型定义的无参数构造函数。” 我从数据库中提取 JSON，然后我想反序列化它，以便我可以访问值并使用用户传入的任何内容更新数据库中的另一个字段。这只是我正在尝试的一个示例，我需要它是动态的，而不是静态的，因为数据库中包含的 JSON 字符串可以是可变的。

我之前尝试过使用字典，但没有运气。所以我现在尝试一种不同的方法，将它反序列化为一个数组，然后我打算从数组中填充字典。

这是我目前正在尝试实施的方法……尽管我尝试了其他几种方法……

```
 IList<Array> ValueArray = new JavaScriptSerializer().Deserialize<IList<Array>>(this.Parameter.ValueList); 
 //this.Parameter.ValueList just contains my JSON string 
```

我在想如果不创建自己的课程就不能做到这一点？

当我尝试使用字典时，我尝试了这个

```
Dictionary<string, string> ValueList =
                JsonConvert.DeserializeObject<Dictionary<string, string>>(this.Parameter.ValueList); 
```

但收到此错误

> “无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型 'System.Collections.Generic.Dictionary`2[System.String,System.String]'，因为该类型需要 JSON 对象（例如 {” name":"value"}) 以正确反序列化。要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化的类型更改为数组或实现集合接口（例如 ICollection、IList），例如可以从 JSON 数组反序列化的 List。也可以将 JsonArrayAttribute 添加到类型以强制它从 JSON 数组反序列化。路径''，第 1 行，位置 1。

所以我开始尝试使用数组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:51:55.270

```
var list = new JavaScriptSerializer().Deserialize<List<KeyValue>>(json);

public class KeyValue
{
    public string key;
    public string value;
} 
```

或者只是`KeyValue`暂时使用

```
var dict = new JavaScriptSerializer().Deserialize<List<KeyValue>>(json)
                                     .ToDictionary(x => x.key, x => x.value); 
```

如果您愿意使用[Json.Net](http://json.codeplex.com/)，您可以直接将其转换为 Dictionary

```
var dict = JsonConvert.DeserializeObject<JArray>(json)
                     .ToDictionary(x => (string)x["key"], x => (string)x["value"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:42:46.543

尝试

```
List<Dictionary<string, string>> ValueList = JsonConvert.DeserializeObject<List<Dictionary<string, string>>>(this.Parameter.ValueList); 
```

但我不确定该库是否支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:24:02.020

我刚刚想通了。您需要为字典使用特定的语法。当我第一次尝试解决这个问题时，我检查的第一件事是我的 JSON 字符串（我使用 JSONLint.com），它确实是有效的，这让我摆脱了这个错误的气味......

但是我只是通过获取字典并对其进行序列化来对其进行了更多测试，以查看 JSON 的样子......所以我的 JSON 的语法应该是什么来转换为字典是这样的

**{“1”：“待定”，“2”：“打开”，“3”：“关闭”}**

# mysql - mysql中的复杂排序

> ID：11655245
> 
> 赞同：1
> 
> 时间：2012-07-25T17:25:35.820
> 
> 标签：mysql

我有一张桌子

```
user problem problem_weight running_time 
```

我想对**用户进行排序**

首先根据问题权重的**总和**，**然后**

**如果根据具有最大权重**的问题的**最小运行时间**发生冲突，

 **如果它仍然没有解决然后acc。到后续问题**权重的****running_times**

 **我可以通过

```
SELECT user, SUM(problem_weight) AS weight
FROM myTable
GROUP BY user
ORDER BY weight 
```

但之后如何进行？

例子：

```
User1 problem1 100 10
User1 problem2  80  5
User2 problem1 100  8
User2 problem2  80  7 
```

两个用户的总分相同（180），但用户 2 在更短的时间内以 100 的重量解决了问题 1。所以，我希望他赢。

如果他（user2）花费了相同的时间（10 秒），那么 user1 应该获胜，因为他（user1）在下一个加权问题中花费的时间更少（5 秒）

注释数据尚未按顺序排序。问题权重，但问题与问题权重直接相关，即问题1 的权重始终为100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:38:54.280

```
SELECT user, 
SUM(problem_weight) AS weight 
FROM myTable GROUP BY user 
ORDER BY weight ASC/DESC
                ^include which one u want 
```****

# sockets - 如何测量我发送 UDP 数据报的速度？

> ID：11655248
> 
> 赞同：1
> 
> 时间：2012-07-25T17:25:44.480
> 
> 标签：sockets, udp

我有两个关于使用 sendto() 和 C 套接字编程的实际发送速度的问题。

1.  我做了一些套接字编程，我正在背靠背发送 UDP 数据报，在 for 循环中的每个 sendto 操作之间没有间隔（暂停）。使用clock_gettime()获取经过的时间并计算实际发送速率是否合理？实际影响发送速度的因素是 CPU 的频率，还是我正在使用的网络接口？我的理解是它应该是两者中较慢的一个？并使用clock_gettime()，我可以对这个发送速度有一个相当好的估计吗？假设我们得到这个发送速度并用 S 表示。

2.  假设我通过 100Mbps 以太网网络接口将 UDP 数据报从 PC 发送到路由器。路由器的实际到达率是多少？一种情况，如果 S 大于 100Mbps，那么到达率在 100Mbps 左右，对吧？如果 S 大于 100Mpbs，那么到达率应该是 S，对吧？还是应该仍然是 100Mbps？我有点困惑。

我这样做的原因是我想获得可以连续发送到路由器的UDP数据报的最大突发大小（给定传出链路的一定带宽限制）而不丢弃任何数据报。知道如何做一些测试来得到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:05:11.903

一百万件事情会影响速度和丢包。我建议您编写一个 C 程序来改变发送速度、行长等，测量速度和丢弃的数据包，并将结果输出到您可以绘制的图形，例如 csv 文件。

# android - Android 将音频流式传输到其他设备

> ID：11655254
> 
> 赞同：5
> 
> 时间：2012-07-25T17:26:12.930
> 
> 标签：android, audio-streaming

您好，我处于应用程序的早期阶段，其中一部分我需要将音频从一个设备流式传输到多个设备。到目前为止，我一直在谷歌上寻找最好的解决方案，我发现这两个项目都有问题。

**Spydroid** [http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/) **问题**这个问题是它创建了一个仅限于一个连接设备的 rtsp 流。如果我浏览到我的两台计算机上的链接，我会看到两个客户端都在应用程序中连接，但是第二个连接的客户端会立即断开连接，并且应用程序说我的手机不支持此功能。我深入研究了源代码，发现在 Session.java 文件中有 if 语句，上面有注释，说阻止建立两个连接我注释掉了 if 语句，并且 catch 子句在运行它后抓住了我。如果我可以让它与多个连接一起工作，因为它在 3g 上工作，那么这个项目将是完美的。

**PttDroid** [http://code.google.com/p/pttdroid/](http://code.google.com/p/pttdroid/) **问题**这个问题是它允许我需要多个连接，但我只能通过 wifi 让它工作。它在那里的主页上说它可以在 3g 上工作，但只有单播我需要多播超过 3g 和 wifi，我无法让单播在 3g 上工作。

所以我的问题归结为我应该走哪条路，并更多地研究将音频从我的 android 设备流式传输到多台计算机和其他 android 设备。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-16T22:43:48.897

蜂窝网络通常不支持多播数据包。蜂窝路由器根本不路由它们，所以这是一条死胡同。

因此，您需要向多个目的地进行单播，这可能对手机有限的蜂窝带宽造成挑战。即使您可以让它们在同一个设备上运行，您也很可能会因一两个流而在蜂窝带宽上发生争用。（例如，同一文件的多个 Spydroid 流。）

如果我正在构建一个系统来执行此操作，我会考虑设置一个服务器来进行反射。因此，我希望使用 Spydroid 之类的东西将 RTSP 流运行到服务器，然后将其从服务器反射给许多订阅者。这不是一个小项目，但允许您使用更高带宽的服务器向多个用户流式传输。

显然有一个项目在此反射器策略之后进行： [https ://code.google.com/p/js4ms/wiki/RTSPMulticastReflector](https://code.google.com/p/js4ms/wiki/RTSPMulticastReflector)

我根本没有测试过它是否有效，但这至少应该让你开始走上正确的道路。

# c++ - 克隆指针 C++

> ID：11655257
> 
> 赞同：1
> 
> 时间：2012-07-25T17:26:31.520
> 
> 标签：c++, pointers, polymorphism, clone

这个问题是关于复制和指针多态性的。考虑下面的代码。我们有两个类：**Base**和**Derived**，它们只是常规对象。然后我们有类**Foo**，它有一个指向**Base**作为其唯一成员的指针。

函数中描述了**Foo**的典型用法。`main`输入`Foo::SetMemberX`可能是也可能不是临时对象。

问题是我想`Foo::SetMember`创建传递对象的正确副本，并将其地址分配为 a `Base*`to `Foo::mMember`。

我设法提出了 4 种可能的解决方案，但对我来说，这些解决方案都不是很优雅。前三个在下面的代码中显示在`Foo::SetMember1`、`Foo::SetMember2`和`Foo::SetMember3`中。第四个选项是将内存分配留给用户（例如`foo.SetMember(new Derived())`），这对于明显的内存安全问题来说不是很理想。**Foo**应该负责内存管理，而不是用户。

```
#include <iostream>

template <typename tBase, typename tPointer>
void ClonePointer(tBase*& destination, const tPointer* pointer)
{
    destination = static_cast<tBase*>(new tPointer(*pointer));
}

// Base can be a virtual class
class Base
{
public:

    virtual void Function()
    {
        std::cout << "Base::Function()" << std::endl;
    }

    virtual Base* Clone() const = 0;
};

class Derived : public Base
{
public:

    virtual void Function()
    {
        std::cout << "Derived::Function()" << std::endl;
    }

    virtual Base* Clone() const
    {
        return new Derived(*this);
    }
};

class Foo
{
public:

    Foo() : mMember(NULL) { }

    ~Foo()
    {
        if (mMember != NULL)
        {
            delete mMember;
            mMember = NULL;
        }
    }

    template <typename T>
    void SetMember1(const T& t)
    {
        if (mMember != NULL)
        {
            delete mMember;
            mMember = NULL;
        }

        ClonePointer(mMember, &t);
    }

    void SetMember2(const Base& b)
    {
        mMember = b.Clone();
    }

    template <typename T>
    void SetMember3(const T& t)
    {
        if (mMember != NULL)
        {
            delete mMember;
            mMember = NULL;
        }

        mMember = new T(t);
    }

    Base& GetMember()
    {
        return *mMember;
    }

private:

    Base* mMember;
};

int main(int argc, char** argv)
{
    {
        Foo f1;
        Foo f2;
        Foo f3;

        // The input may or may not be a tempoary/RValue reference

        f1.SetMember1(Derived());
        f2.SetMember2(Derived());
        f3.SetMember3(Derived());

        f1.GetMember().Function();
        f2.GetMember().Function();
        f3.GetMember().Function();
    }

    // Output:
    // Derived::Function();
    // Derived::Function();
    // Derived::Function();

    system("pause"); // for quick testing
} 
```

第一种方法`Foo::SetMember1`（

第二种方法 ( `Foo::SetMember2`) 的问题是每个派生类都必须实现自己的`Clone`功能。这对于类用户来说是太多的样板代码，因为会有很多类派生自**Base**。如果我可以以某种方式自动执行此操作，或者使用已实现的模板函数创建一个基本**Cloneable**类（每个**Base**派生类都不必显式调用它）`Clone`，这将是理想的解决方案。

第三种方法 ( `Foo::SetMember3`) 的问题是我需要**Foo**的模板访问器。这可能并不总是可行的，特别是因为在非模板类中不允许使用虚拟模板方法（**Foo**本身不能是模板），这是可能需要的功能。

我的问题是：

1.  这些是我唯一的选择吗？

2.  对于我缺少的这个问题，是否有更好、更优雅的解决方案？

3.  有没有办法创建一个基本的**Cloneable**类并从中派生**Base**，并自动进行克隆`DerivedType::Clone()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:49:06.650

这是一个或多或少健壮的`Clonable`类，可以被继承到任何深度。它使用 CRTP 和 Alecsandrescu 风格的交错继承模式。

```
#include <iostream>

// set up a little named template parameters rig
template <class X> struct Parent{};
template <class X> struct Self{};
template<class A, class B> struct ParentChild;

// can use ...< Parent<X>, Self<Y> >...
template<class A, class B> struct ParentChild< Parent<A>, Self<B> >
{
    typedef A parent_type;
    typedef B child_type;
};

// or ...< Self<Y>, Parent<X> >
template<class A, class B> struct ParentChild< Self<B>, Parent<A> >
{
    typedef A parent_type;
    typedef B child_type;
};

// nothing, really
struct Nada
{
    // except the virtual dtor! Everything clonable will inherit from here.
    virtual ~Nada() {}
};

// The Clonable template. Accepts two parameters: 
// the child class (as in CRTP), and the parent class (one to inherit from)
// In any order.
template <class A, class B = Parent<Nada> > class Clonable : 
    public ParentChild<A,B>::parent_type
{
  public:
    // a nice name to refer to in the child class, instead of Clonable<A,B>
    typedef Clonable Parent;

    // this is our child class
    typedef typename ParentChild<A,B>::child_type child_type;

    // This is the clone() function returning the cloned object
    // Non-virtual, because the compiler has trouble with covariant return
    // type here. We have to implemens something similar, by having non-virtual
    // that returns the covariant type calling virtual that returns the 
    // base type, and some cast.
    child_type* clone()
    {
        return static_cast<child_type*>(private_clone());
    }

    // forward some constructor, C++11 style
    template<typename... Args> Clonable(Args&&... args): 
        ParentChild<A,B>::parent_type(args...) {}

  private:

    // this is the main virtual clone function
    // allocates the new child_type object and copies itself
    // with the copy constructor
    virtual Nada* private_clone() 
    {
        // we *know* we're the child_type object
        child_type* me = static_cast<child_type*>(this);
        return new child_type(*me);
    };
};

// Test drive and usage example

class Foo : public Clonable < Self<Foo> >
{
  public: 
    Foo (int) { std::cout << "Foo::Foo(int)\n"; }
    Foo (double, char) { std::cout << "Foo::Foo(double, char)\n"; }
    Foo (const Foo&) { std::cout << "Foo::Foo(Foo&)\n"; }
};

class Bar : public Clonable < Self<Bar>, Parent<Foo> >
{
  public:
    // cannot say Bar (int i) : Foo(i), unfortunately, because Foo is not
    // our immediate parent
    // have to use the Parent alias 
    Bar (int i) : Parent(i) 
        { std::cout << "Bar::Bar(int)\n"; }
    Bar (double a, char b) : Parent(a, b) 
        { std::cout << "Bar::Bar(double, char)\n"; }
    Bar (const Bar& b) : Parent(b) 
        { std::cout << "Bar::Bar(Bar&)\n"; }

    ~Bar() { std::cout << "Bar::~Bar()\n"; }
};

int main ()
{
    Foo* foo1 = new Bar (123);
    Foo* foo2 = foo1->clone(); // this is really a Bar
    delete foo1;
    delete foo2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:24:53.130

对于第二种方法，您可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，并且不需要在每个派生类中编写克隆方法：

```
struct Base {
  virtual ~Base() {}
  virtual Base *clone() const = 0;
};

template <typename Derived>
struct CloneableBase : public Base {
  virtual Base *clone() const {
    return new Derived(static_cast<Derived const&>(*this));
  }
};

struct Derived: CloneableBase<Derived> {}; 
```

# c# - 如何构建此交易？

> ID：11655258
> 
> 赞同：1
> 
> 时间：2012-07-25T17:26:31.770
> 
> 标签：c#, asp.net, sql-server, transactions, isolation-level

我们有一个基于 ASP.NET/MSSQL 的 Web 应用程序，它生成具有顺序订单号的订单。

当用户保存表单时，会创建一个新订单，如下所示：

1.  SELECT MAX(order_number) FROM order_table，调用这个max_order_number
2.  设置 new_order_number = max_order_number + 1
3.  使用这个 new_order_number 插入一个新的订单记录（它只是订单记录中的一个字段，而不是数据库键）

如果我在单笔交易中附上以上3个步骤，如果两个客户同时保存一个新订单，是否会避免创建重复的订单号？（假设系统最终位于具有多个 IIS 服务器和一个 MSSQL 服务器的网络场上）。

我想避免两个客户由于系统某处的并发而选择相同的 MAX(order_number)。

应该使用什么隔离级别？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:29:42.043

为什么不直接使用[身份](http://msdn.microsoft.com/en-us/library/ms186775.aspx)作为订单号？

**编辑：**
据我所知，您可以将当前 order_number 列设为身份（您可能需要重置种子，我已经有一段时间没有这样做了）。你可能想做一些测试。
[这是](http://blog.sqlauthority.com/2009/05/03/sql-server-add-or-remove-identity-property-on-column/)一个很好的阅读，了解当您将列更改为 SSMS 中的身份时实际发生的情况。作者提到如果表已经有数百万行，这可能需要一段时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:43:02.253

风险是两个进程在其中一个插入新订单之前选择了 MAX(order_number)。一种更安全的方法是一步完成：

```
INSERT INTO order_table
(order_number, /* other fields */)
VALUES
( (SELECT MAX(order_number)+1 FROM order_table ) order_number,
  /* other values */
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:47:20.317

我同意 G_M；使用身份字段。添加记录时，只需

```
INSERT INTO order_table (/* other fields */)
VALUES (/* other fields */) ; SELECT SCOPE_IDENTITY() 
```

[Scope Identity](http://msdn.microsoft.com/en-us/library/ms190315.aspx)的返回值将是您的订单号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T17:47:45.847

使用身份是迄今为止最好的主意。我像这样创建所有表：

```
CREATE TABLE mytable (
    mytable_id int identity(1, 1) not null primary key,
    name varchar(50)
) 
```

“身份”标志的意思是“让 SQL Server 为我分配这个号码”。(1, 1) 表示身份编号应从 1 开始，每次有人将记录插入表中时递增 1。Not Null 意味着不允许任何人在该列中插入空值，而“主键”意味着我们应该在该列上创建[聚集索引。](http://msdn.microsoft.com/en-us/library/aa933131%28v=sql.80%29.aspx)使用这种表格，您可以像这样插入记录：

```
-- We don't need to insert into mytable_id column; SQL Server does it for us!
INSERT INTO mytable (name) VALUES ('Bob Roberts') 
```

但是要回答您的字面问题，我可以上一堂有关交易如何运作的课程。这样做当然是可能的，尽管不是最佳的：

```
-- Begin a transaction - this means everything within this region will be 
-- executed atomically, meaning that nothing else can interfere.
BEGIN TRANSACTION
    DECLARE @id bigint

    -- Retrieves the maximum order number from the table
    SELECT @id = MAX(order_number) FROM order_table

    -- While you are in this transaction, no other queries can change the order table,
    -- so this insert statement is guaranteed to succeed
    INSERT INTO order_table (order_number) VALUES (@id + 1)

-- Committing the transaction releases your lock and allows other programs 
-- to work on the order table
COMMIT TRANSACTION 
```

请记住，使用标识主键列声明您的表会自动为您完成这一切。

# javascript - Javascript 代码仅基于几个警报语句的存在而表现不同

> ID：11655259
> 
> 赞同：3
> 
> 时间：2012-07-25T17:26:49.270
> 
> 标签：javascript, jquery, jquery-autocomplete

我正在使用[jQuery Autocomplete](http://docs.jquery.com/UI/Autocomplete)进行产品查找。我正在使用以下代码强制从列表中进行选择：

```
$(".force-selection").blur(function(e) {
  var value = $(this).val();
  //check if the input's value matches the selected item
  alert($(this).val());
  alert($(this).data('selected-item'));
  if(value != $(this).data('selected-item')) {
    //they don't, the user must have typed something else
    $(this)
      .val('') //clear the input's text
      .data('selected-item', ''); //clear the selected item
  }
}); 
```

上面的代码仅在删除两个警报语句时才有效。为什么行为会仅基于几个警报语句的存在而改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:34:38.327

尝试切换到使用[自动完成更改事件](http://docs.jquery.com/UI/Autocomplete#event-change)而不是模糊事件。

*   作为`init`创建自动完成时的一个选项：

    ```
    $(".selector").autocomplete({
       change: function(event, ui) { ... }
    }); 
    ```

*   或按类型绑定到更改事件：autocompletechange。

    ```
    $(".selector").bind("autocompletechange", function(event, ui) {
       ...
    }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:34:48.260

这可能是由几个问题引起的。

如果您使用的是 Internet Explorer，`alert`则会在您正在处理的任何字段上触发“模糊”事件。在您的示例代码中，很明显为什么会导致问题。否则，您可能正在查看竞争条件问题。

在 IE 中查看这个小提琴：http: [//jsfiddle.net/NsfKT/](http://jsfiddle.net/NsfKT/)

# ios - 苹果游戏中心的扑克桌

> ID：11655260
> 
> 赞同：0
> 
> 时间：2012-07-25T17:26:50.203
> 
> 标签：ios, game-center, gamekit, multiplayer

我正在尝试为游戏中心制作纸牌游戏。而且我在多人游戏中遇到了麻烦：目标是创建 2 种类型 - 首先，公共扑克桌，当用户选择它时，他可以看到所有不完整的扑克桌，即 3 个插槽中的 1 个免费桌 #10 3 个插槽中的 2 个免费等，他可以选择加入其中的一些。第二种类型 - 私人扑克桌，在创建它时，作者设置了密码，该密码必须由其他想要加入它的用户设置。但我无法通过 GameKit 找到任何方法 - 它仅提供“随机”机制来加入纸牌游戏，因此用户无法选择要玩的牌桌（此外，用户看不到可用扑克牌桌的列表），并且没有人可以预先设置密码来保护他的游戏。是否存在某种方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:25:56.850

不幸的是，以游戏为中心的多人游戏无法以这种方式进行。没有大厅的概念。游戏中心比赛由一个会话组成。您最好的选择是使用第 3 方服务，或推出您自己的服务器。

# d3.js - d3.js交互式分组条形图交替旋转

> ID：11655267
> 
> 赞同：2
> 
> 时间：2012-07-25T17:26:58.467
> 
> 标签：d3.js, label, bar-chart

使用来自[http://blog.nextgenetics.net/demo/entry0032/](http://blog.nextgenetics.net/demo/entry0032/)的示例，我想尝试在[http://bl.ocks.org/3177376](http://bl.ocks.org/3177376)中标记鼠标悬停时选择的分组条。

![在此处输入图像描述](../Images/52f40135bc5ba7099fce771857bbc73c.png)

一切似乎都奏效了。但是，旋转仅适用于第一组条，而不适用于第二组。当我调试时，该行

```
.attr("transform",
      "rotate(-90 " + x(d.date) + x1(p.key) + "," + y(d.perf) + ")"); 
```

似乎被跳过了。我已经达到了我的极限。请帮忙。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:22:44.447

非常简单的javascript错误

```
x(d.date) + x1(p.key) 
```

应该

```
(x(d.date) + x1(p.key)) 
```

现在可以在[http://bl.ocks.org/3182035](http://bl.ocks.org/3182035)找到完整的工作版本：

![在此处输入图像描述](../Images/772613edc3954c7aaa48b5486ab84d49.png)

# java - 无法打开使用另一个批处理打开的批处理打开的 JVM

> ID：11655268
> 
> 赞同：1
> 
> 时间：2012-07-25T17:27:00.703
> 
> 标签：java, batch-file, jvm, dos

我正在尝试打开一个批处理文件，该批处理文件由另一个应该启动 JVM 的批处理文件打开，但是当我尝试打开它时，我得到的只是一个 cmd 提示符，其中包含我的桌面路径。

这是我用来打开 JVM 的批处理文件的内容。（run.bat 与 myJar.jar 位于同一文件夹中）

```
"C:\Program Files\Java\jre7\bin\java.exe" -Xmx2048M -Xms2048M -jar myJar.jar 
```

这是我用来打开 previos 批处理文件的行。（在我的桌面上）

```
start /HIGH /MIN "My Folder\run.bat" 
```

有人可以解释一下为什么它不起作用以及如何解决它吗？

提前致谢。

编辑：我试图打开另一个刚刚有 echo Hi! 的蝙蝠。在其中，但即使这样也没有用。甚至可以使用 .bat 打开 .bat 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:06:21.653

如果我输入你的命令，我也会得到一个新窗口。但我注意到窗口的标题是`My Folder\run.bat`. 这是因为如果`start`命令看到带引号的参数，它假定它是新窗口的标题。

尝试`start /HIGH /MIN "This is my title" "My Folder\run.bat"`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T17:34:10.867

听起来带有“start ... My folder\run.bat”的 .bat 文件在桌面上...而“myJar.jar”不是；）

建议：

1.  [右键单击]你的“开始”.bat文件，“属性”，“开始”=“我的文件夹”

2.  验证“myJar.bar”是否在“我的文件夹”中

3.  再试一次

# mongodb - 猫鼬和部分选择/更新

> ID：11655270
> 
> 赞同：6
> 
> 时间：2012-07-25T17:27:21.707
> 
> 标签：mongodb, mongoose

在 node.js 中，当我使用 Mongoose 时：

是否可以只获取大对象的一些值？

是否可以只更新一些值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T17:47:29.807

要仅获取某些字段，请将字段名称字符串作为您的第二个参数传递`find`：

```
// Include the first and last properties, and exclude _id
Model.find({}, 'first last -_id', callback) 
```

[或使用此处](http://mongoosejs.com/docs/api.html#query_Query-select)描述的对象表示法：

```
Model.find({}, {first: 1, last: 1, _id: 0}, callback) 
```

要仅更新某些属性，请使用`update`带有[`$set`](http://www.mongodb.org/display/DOCS/Updating#Updating-$set)修饰符的 an：

```
// Only update the name property
Model.update({_id: 12345}, {$set: {name: 'New name'}}, callback); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:44:04.200

我认为版本 3.0.0 已更新为

```
Model.find({}, 'first last', callback); 
```

其中`first`和`last`是模型上的属性名称。

# iphone - Facebook 帖子不会从应用程序发布，除非对话框写入

> ID：11655273
> 
> 赞同：0
> 
> 时间：2012-07-25T17:27:31.957
> 
> 标签：iphone, ios, xcode, facebook, sharekit

我使用 ShareKit 将我的应用中的故事分享到 Facebook 和 Twitter。我单击应用程序中的所有内容进行共享，它会弹出对话框，让我选择共享或取消。如果我单击共享，它永远不会发布。不在我的时间线或新闻提要中，也不在其他任何人可以看到的地方。如果我先在对话框中输入内容，它将共享。这是 ShareKit 还是 Facebook 的错误，我该如何解决这个问题？

```
SHKItem *item = [SHKItem URL:[NSURL URLWithString:_entry.articleUrl] title:_entry.articleTitle];
        [item setCustomValue:@"http://www.316apps.com/icon.png" forKey:@"picture"];
        [SHKFacebook shareItem:item]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:43:35.967

问题可能是，您使用过时的[原始 shareKit](http://www.getsharekit.com)。Facebook 已弃用 FBDialog 中的“消息”参数，该参数在您共享文本时使用。一种解决方法是使用 Facebook 的 Graph api。这在[ShareKit 2](https://github.com/ShareKit/ShareKit/)中得到解决。如果您决定尝试它，请确保按照字面意思[安装 wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)，因为很多事情都发生了变化。

# windows - 是否可以在应用程序调用 Word OLE 对象的地方使用 Open Office？

> ID：11655275
> 
> 赞同：1
> 
> 时间：2012-07-25T17:27:33.530
> 
> 标签：windows, ms-word, openoffice-writer

好的，所以我们购买了一个软件，可以打开、更新和关闭存储在文件服务器上的 Word 文档。我已与软件开发人员交谈，询问使用其他 Office 系统而不是 Microsoft Office。他们告诉我他们正在调用代码 Word OLE 对象来打开、更新和关闭文档。然后它固有地调用 WINWORD.exe。

是否可以将 Windows 7 配置为在调用 winword.exe 时打开 oowriter 而不是 winword？

我们面临的问题是新客户没有运行 Open Office 的 Microsoft Office。

# java - 如何在 Java 表单中为面板设置标题？

> ID：11655276
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:27:41.770
> 
> 标签：java, jpanel, title

我创建了一个 JFrame，我想添加一个面板，当我在选择列表中选择一个项目或在文本框中写它的名称时出现....如何设置它的标题？我应该添加一个标签还是它有一个属性作为它的标题？！！！

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:31:46.223

您必须将 JLabel 添加到新面板并分别在 JList 或 JTextField 组件的 ListSelectionListener 或 DocumentListener 事件处理程序中设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:18:44.267

我在面板的 TitleBorder 中找到了答案....

```
BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(BevelBorder.LOWERED),"Title"); 
```

感谢您的所有帮助。

# java - Java 泛型扩展类参数

> ID：11655280
> 
> 赞同：3
> 
> 时间：2012-07-25T17:27:52.070
> 
> 标签：java, generics, extends

我收到一个错误，我的程序中有这个结构

```
public interface Shapes<T>{
//methods here
}

public class ShapeAction<T> implements Shapes<T>{
//Methods and implementations here
}

public class Circle extends ShapeAction<T>{
//Some methods here
} 
```

错误指向类 Circle extends Shapes< **T** >，它说“T 无法解析为类型”。如果我将 T 设置为字符串，错误就会消失，但这也意味着我只能使用一种数据类型。我应该在 <> 中放什么以便我可以使用任何数据类型（String、int、double 等），还是我做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T17:38:27.200

有两个不同的概念。当你写

```
public class ShapeAction<T> 
```

这意味着您正在创建一个类，该类在实例化时将使用某个类进行参数化。您当时不知道它会是什么，因此您将其称为`T`.

但是当你写

```
public class Circle extends ShapeAction<T> 
```

这意味着您想`Circle`成为`ShapeAction`type 参数化的子类`T`。但什么是`T`？编译器无法判断：您声明`Circle`时没有任何类型变量。

你有两个选择。您也可以使 Circle 通用：

```
public class Circle<T> extends ShapeAction<T> 
```

这样，当您创建一个新实例时，`Circle`您可以指定它使用的类型，这会扩展到超类。

如果您想指定 ShapeAction 可以是任何类型，但又不使子类泛型怎么办？使用`Object`：

```
public class Circle extends ShapeAction<Object> 
```

这种方式`Circle`保持非泛型，但您可以将任何数据类型与超类一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T17:32:06.733

你试过这个吗？

```
public class Circle<T> extends ShapeAction<T>{
//Some methods here
} 
```

除非您先定义它，否则编译器无法判断`T`参数的含义。`extends ShapeAction<T>`

最终，当您使用对 a 的引用时`Circle`，您将不得不为 提供一个类型参数`T`，该参数将级联到该类型的所有其他外观。

```
Circle<Integer> myInt; 
```

将导致编译器将代码解释为：

```
public class Circle<Integer> extends ShapeAction<Integer>{
    //Some methods here
} 
```

依此类推，对于类层次结构的其余部分。

因此，如果您没有`T`在 class 中定义类型`Circle`。编译器没有办法告诉参数化类型，`ShapeAction`这很可能是这里问题的根源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T17:32:56.187

您还没有真正向我们展示足够的代码来说明您要实现的目标，但总的来说：

如果你想创建一个可以接受多种类型参数的方法，你需要参数化*方法*，而不是整个类。

```
public <T> Shape takeAction(T argument); 
```

显然，这并不能真正提供太多的编译时类型安全性，您可能仍然需要在运行时手动将参数解析为某些受限类型的子集。

# filesystems - 需要 UFS 参考来编码一些东西来从原始数据解释文件系统

> ID：11655285
> 
> 赞同：1
> 
> 时间：2012-07-25T17:28:12.577
> 
> 标签：filesystems, ext2

我希望编写一些工具来帮助处理磁盘上的文件系统 UFS，以访问原始数据。我已经了解了很多关于 UFS 的知识，并且知道大多数 Unix/Linux 文件系统都有一些共性。我将读入 FS 结构，然后希望能够像文件系统驱动程序那样遍历事物。现在的困难在于有关 UFS 如何做事的文档。我已经阅读了很多更高级别的内容，但我希望看到类似这样的内容，它适用于 ext2 - [http://homepage.smc.edu/morgan_david/cs40/analyze-ext2.htm](http://homepage.smc.edu/morgan_david/cs40/analyze-ext2.htm)。

该页面很棒，因为它显示了超级块、inode、目录条目等的完整定义。我还了解了 inode 在其他研究中的工作原理。我已经安装了 FreeBSD 并正在对其进行分析以进行比较，它是相似的。但是我知道有区别。此外，我不确定某些事情是如何完成的，例如查找文件的 inode。ext2 的链接说要这样做-

1.  访问根目录的inode（inode 2）以获取根目录的数据位置
2.  访问根目录的数据以找到 alpha1 的目录条目
3.  访问 alpha1 的条目以获取 alpha1 的 inode 的位置
4.  访问 alpha1 的 inode 以获取 alpha1 的数据位置
5.  访问 alpha1（字母表）的数据

我不知道第 3 步。好的，我在文件的目录条目中看到了 inode 编号。这如何为您提供 inode 位置？如何找到inode？

更好的参考会很棒。我还没有找到任何可能有帮助的书，但我绝对愿意买一本书。

谢谢你的帮助！

# gwt - 如何根据 RequestFactorys 的 with() 方法自定义 JPA 查找查询

> ID：11655290
> 
> 赞同：1
> 
> 时间：2012-07-25T17:28:29.930
> 
> 标签：gwt, jpa, requestfactory

在我的 GWT 2.4.0 应用程序中，我使用 RequestFactory 和 Hibernate/JPA。我有一个实体，它通过关系`Agent`有很多。此关联已加载。因此，当调用查找服务时，不会加载代理的管理员，这在大多数情况下是所需的行为。`Administrators``@OneToMany``LAZY`

但是，我希望能够在使用 with 方法在客户端代码上触发 requestFactory 请求时表明我希望代理的管理员回来。所以我的客户端代码看起来像：

```
RequestContext.findAgent(agentId).with("administrstors").fire() 
```

我的服务器端服务看起来像这样：

```
public Agent findAgent(Long id) {
    return getEntityManager().createQuery("SELECT a" +
            " FROM Agent" +
            " WHERE a.id=:id", Agent.class)
            .setParameter("id", id)
            .getSingleResult();
} 
```

我希望能够弄清楚是否使用 with 方法发送请求。我需要自定义 JPA 查询以加载代理的管理员，以防客户端使用。有没有办法访问通过服务器端的 RequestFactory 发出的请求的详细信息？

如果我知道客户端代码需要代理管理员，我的 JPA 查询将如下所示：

```
public Agent findAgent(Long id) {
    return getEntityManager().createQuery("SELECT a" +
            " FROM Agent a LEFT JOIN a.administrators admin" +
            " WHERE a.id=:id", Agent.class)
            .setParameter("id", id)
            .getSingleResult();
} 
```

任何见解将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:11:31.453

不幸的是，这是不可能的；除了`with()`.

仅供参考，这是 2 年前在 Google Wave 中讨论的（我有一个本地备份副本，但在网络上找不到其他地方），有几个建议（`Set<String>`作为最后一个参数传递给服务方法的可选参数 - 你的`findAgent`方法–，或线程本地属性列表）。
虽然没有实现这样的功能，回想起来我不确定它是否应该：将信息作为参数显式传递给您的方法更加明确/其中的*魔力*更少。

# vba - 用于合并周末日期数据并删除以前数据的宏

> ID：11655293
> 
> 赞同：1
> 
> 时间：2012-07-25T17:28:43.703
> 
> 标签：vba, excel

我有超过 4 列的数据，第一列“A”作为日期列，然后以下列“B、C、D”作为数据。我正在尝试创建一个宏，它将搜索周末日期并将它们添加到星期一的数据中，然后从整体数据中删除周末日期和数据。到目前为止，这是我的代码：

```
Sub NamedRange()

Dim Rng1 As Range
Dim newDate As Integer
Dim NumberOfRows As Range
Dim MyRange As Range
Dim lastRow2 As Variant
Set Rng1 = Sheets("Sheet1").Range("A1:A20")

Dim date1 As String
Dim dat As Date
Dim newPrice As Double

Set RgSales = Range("MyRange")
For i = 1 To RgSales.Rows.Count
For j = 1 To RgSales.Columns.Count

dat = RgSales.Cells(i, j)

date1 = WeekdayName(Weekday(dat))
    If (date1 = "Saturday" Or date1 = "Sunday") Then
        newDate = (RgSales.Cells(i + 1, j + 1).Value) + (RgSales.Cells(i, j + 1).Value)
        RgSales.Cells(i + 1, j + 1).Value = newDate
        newPrice = (RgSales.Cells(i + 1, j + 2).Value) + (RgSales.Cells(i, j + 2).Value)
        RgSales.Cells(i + 1, j + 2).Value = newPrice
        RgSales.Cells(i, j).Select
        Selection.Delete
        RgSales.Cells(i, j + 1).Select
        Selection.Delete
        RgSales.Cells(i, j + 2).Select
        Selection.Delete
End If
    Next j
    Next i
End Sub 
```

我的范围有问题，我只想让它在最后一行数据上结束，在宏运行后删除所有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:31:04.893

通常，当您从范围中删除行时，您希望向后循环。删除一行后，它下面的所有行都会相对于范围发生变化（第 18 行变为第 17 行），这可能会弄乱您的计数器。这是我认为可以满足您要求的示例。

```
Sub ConsolidateWeekends()

    Dim i As Long
    Dim j As Long
    Dim rRng As Range
    Dim rCell As Range
    Dim rFound As Range
    Dim lDayOffset As Long

    'Define the range to consolidate
    Set rRng = Sheet3.Range("A1:A20")

    'Always loop backward when deleting rows or
    'the counter will get messed up
    For i = rRng.Rows.Count - 1 To 1 Step -1
        Set rCell = rRng.Cells(i, 1)

        'Define the offset that will return the Monday following the date
        If Weekday(rCell.Value) = vbSaturday Then
            lDayOffset = 2
        ElseIf Weekday(rCell.Value) = vbSunday Then
            lDayOffset = 1
        Else
            lDayOffset = 0
        End If

        If lDayOffset > 0 Then
            'Find the cell with the Monday in question
            Set rFound = rRng.Find(CDate(rCell.Value + lDayOffset), , xlValues, xlWhole)

            'if there is a cell with that Monday
            If Not rFound Is Nothing Then
                'Add the current dates B and C values to the Monday B and C values
                For j = 1 To 2
                    rFound.Offset(0, j).Value = rFound.Offset(0, j).Value + rCell.Offset(0, j).Value
                Next j
                'Delete the Sat or Sun row
                rCell.EntireRow.Delete
            End If
        End If
    Next i

End Sub 
```

# data-binding - JSF2 h:dataTable 动态生成的行未绑定到支持 bean

> ID：11655294
> 
> 赞同：0
> 
> 时间：2012-07-25T17:29:00.963
> 
> 标签：data-binding, jsf-2, richfaces

我在保存/更新表中的行时遇到问题。

我有一个方法*myBean.addRule*可以动态地将新行添加到表中。
这似乎工作正常....我单击它并在 UI 中出现一个新行以输入新数据。

*但是当我保存myBean.saveRules*时似乎出现了问题。

看起来只有最近添加的行绑定到我的支持 bean 并更新。

例如，如果我有 3 行数据：
- 从第 1 行删除一些文本并点击保存按钮，此更新不会保存。
- 如果我更改第 3 行上的文本，则会保存此更改（最近添加的行）。

我是否缺少任何可以解决此问题的组件上的绑定属性？

```
<a4j:repeat value="#{myBean.ruleSet}" var="rule" id="ruleIterator">

    <h:dataTable value="#{rule}" var="currentRuleItem">

        <h:column>

                <h:panelGrid columns="2" cellspacing="5">
                    <h:outputLabel value="#{msg.FrequencyOfSpending}" />

                    <h:selectOneMenu id="ruleFrequencyOptions" value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected}" styleClass="commonSelect">
                    <f:selectItems value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.validValues}" itemLabelEscaped="true" />
                    <f:ajax event="valueChange" listener="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelectedChange}" onerror="handleAjaxError" render="rulesGroup" />
                    </h:selectOneMenu>
                </h:panelGrid>

                <h:panelGroup id="rulesGroup">
                    <a4j:repeat value="#{currentRuleItem.ruleParams.Action.properties}" var="RuleParamProperty" id="budgetRuleIterator">

                    <h:panelGrid columns="4" cellspacing="5" columnClasses="ruleParamCheckbox, ruleParamAction, ruleParamActionFrequency, ruleParamActionInput">

                    <h:selectBooleanCheckbox value="#{RuleParamProperty.selected}" immediate="true">
                        <a4j:ajax event="click" listener="#{RuleParamProperty.selectedChange}"  onerror="handleAjaxError" />
                    </h:selectBooleanCheckbox>

                    <h:outputText value="#{msg[RuleParamProperty.name]}" />

                    <h:panelGrid columns="3">
                        <h:outputText value="#{msg.Action_1}" />
                        <h:outputText value="#{msg[currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected]}" class="italic-text" />   
                        <h:outputText value="#{msg.Action_3}" />
                    </h:panelGrid>

                    <h:inputText value="#{RuleParamProperty.inputValue}" />

                    </h:panelGrid>

                    </a4j:repeat>
                </h:panelGroup>

            </h:column>

    </h:dataTable>

    <!--******* Link here to generate row with exact same format as all code above ***-->
    <h:panelGrid columns="2">
        <img id="AddIcon" src="#{facesContext.externalContext.requestContextPath}/images/icons/add.png" alt="#{msg.addControl}" />
        <h:commandLink value="#{msg.addControl}" action="#{myBean.addRule}" />
    </h:panelGrid>

</a4j:repeat>

<h:panelGrid columns="2" cellspacing="5">
    <h:commandButton value="#{msg.sc_cancel}" immediate="true" action="#{myBean.cancel}" />
    <h:commandButton value="#{msg.ua_save}" action="#{myBean.saveRules}" />
</h:panelGrid>

// my bean method
public void addRule()
{   
    iRuleSet.get("RuleControl1").add(createRule());     
} 
```

我没有包含我的支持 bean 代码，因为它非常复杂，如果需要，我可以编辑和显示片段。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:04:41.577

好吧，在阅读了关于不同标签处理程序（c:forEach、ui:include 等）和组件（ui:repeat、h:datatable 等）的各种文章之后，经过许多令人沮丧的时间，它们之间的差异，问题可能来自混合和捣碎它们等......

***它是固定的（我认为！）***

我删除了所有我的***ui:repeat***并用 Richfaces ***a4j:repeat***替换它们，它提供了附加属性***keepSaved***。我还删除了我的***h:dataTable***并将其替换为***aj4:repeat***。

现在对于我的生活，我找不到任何地方可以解释***keepSaved***的作用！！[Richfaces 4 API 文档](http://docs.jboss.org/richfaces/4.1.X/4.1.0.Final/vdldoc/)
和往常一样，很可怕！ 它旁边的描述就像大多数属性一样......没有描述！

任何人都可以对这个组件属性的作用有所了解吗？

谢谢

解决方案：

```
<a4j:repeat value="#{myBean.ruleSet}" var="rule" id="ruleIterator">

    <a4j:repeat value="#{rule}" var="currentRuleItem">

        <h:column>

                <h:panelGrid columns="2" cellspacing="5">
                    <h:outputLabel value="#{msg.FrequencyOfSpending}" />

                    <h:selectOneMenu id="ruleFrequencyOptions" value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected}" styleClass="commonSelect">
                    <f:selectItems value="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.validValues}" itemLabelEscaped="true" />
                    <f:ajax event="valueChange" listener="#{currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelectedChange}" onerror="handleAjaxError" render="rulesGroup" />
                    </h:selectOneMenu>
                </h:panelGrid>

                <h:panelGroup id="rulesGroup">

                <a4j:repeat value="#{currentRuleItem.ruleParams.Action.properties}" var="RuleParamProperty" id="budgetRuleIterator" keepSaved="true">

                    <h:panelGrid columns="4" cellspacing="5" columnClasses="ruleParamCheckbox, ruleParamAction, ruleParamActionFrequency, ruleParamActionInput">

                    <h:selectBooleanCheckbox value="#{RuleParamProperty.selected}" immediate="true">
                        <a4j:ajax event="click" listener="#{RuleParamProperty.selectedChange}"  onerror="handleAjaxError" />
                    </h:selectBooleanCheckbox>

                    <h:outputText value="#{msg[RuleParamProperty.name]}" />

                    <h:panelGrid columns="3">
                        <h:outputText value="#{msg.Action_1}" />
                        <h:outputText value="#{msg[currentRuleItem.ruleControls.ControlOne.controlParams.Period.valueSelected]}" class="italic-text" />   
                        <h:outputText value="#{msg.Action_3}" />
                    </h:panelGrid>

                    <h:inputText value="#{RuleParamProperty.inputValue}" />

                    </h:panelGrid>

                    </a4j:repeat>
                </h:panelGroup>

            </h:column>

    </a4j:repeat>

    <!--******* Link here to generate row with exact same format as all code above ***-->
    <h:panelGrid columns="2">
      <img id="AddIcon" src="#{facesContext.externalContext.requestContextPath}/images/icons/add.png" alt="#{msg.addControl}" />
      <a4j:commandLink value="#{msg.addControl}" action="#{myBean.addRule}">
        <f:param name="ruleType" value="BudgetRule" />
      </a4j:commandLink>
    </h:panelGrid>

</a4j:repeat>

<h:panelGrid columns="2" cellspacing="5">
    <h:commandButton value="#{msg.sc_cancel}" immediate="true" action="#{myBean.cancel}" />
    <h:commandButton value="#{msg.ua_save}" action="#{myBean.saveRules}" />
</h:panelGrid>

// my bean method
public void addRule()
{   
    iRuleSet.get("RuleControl1").add(createRule());     
} 
```

# osgi - 使用 OSGi API，我如何确定给定的捆绑包是否是片段？

> ID：11655295
> 
> 赞同：5
> 
> 时间：2012-07-25T17:29:04.807
> 
> 标签：osgi, bundle, osgi-fragment

在 OSGi API 中，对[BundleContext.getBundles()](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html#getBundles%28%29)的调用会返回所有包，无论它们是否是片段。对于给定的[Bundle](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html)对象，判断这是否是片段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T21:47:17.423

最好的办法：

`(bundle.adapt(BundleRevision.class).getTypes() & BundleRevision.TYPE_FRAGMENT) != 0`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T17:30:31.263

一种可能的方法：使用[Bundle.getHeaders()](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getHeaders%28%29)查找[Fragment-Host](http://wiki.osgi.org/wiki/Fragment-Host)标头。如果它存在，它就是一个片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:43:06.327

根据 OSGi 核心规范第 4 版，版本 4.2，还有`PackageAdmin`服务，它提供对有关捆绑包的结构信息的访问，例如确定给定捆绑包是​​否是片段。

```
import org.osgi.framework.Bundle;
import org.osgi.service.packageadmin.PackageAdmin;

PackageAdmin packageAdmin = ...; // I assume you know this

Bundle hostBundle = ...;         // I assume you know this
Bundle fragmentBundle = ...;     // I assume you know this

assertFalse(PackageAdmin.BUNDLE_TYPE_FRAGMENT, packageAdmin.getBundleType(hostBundle);
assertEquals(PackageAdmin.BUNDLE_TYPE_FRAGMENT, packageAdmin.getBundleType(fragmentBundle); 
```

显然，在 OSGi 4.3 中，该`PackageAdmin`服务似乎已被[弃用](http://www.osgi.org/javadoc/r4v43/core/org/osgi/service/packageadmin/PackageAdmin.html)，应该由`org.osgi.framework.wiring`包替换。

# xslt - 用于打开弹出窗口的 xsl 链接

> ID：11655299
> 
> 赞同：0
> 
> 时间：2012-07-25T17:29:40.507
> 
> 标签：xslt, hyperlink, popup

我有以下 XsL，它在同一窗口中打开链接。我想添加将在选项卡中打开一个新窗口但不是新窗口的目标 _blank。同时调整它的大小。我在下面试过但没有用。

```
<a href="{$modifiedUrl}" target="_blank"> view more </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:31:48.330

在 _blank 周围加上引号：

```
<a href="{$modifiedUrl}" target="_blank"> 
```

您当前的标记不是有效的 xml。

# c# - 多线程中 SaveOrUpdate 上的 NHibernate TransientObjectException

> ID：11655302
> 
> 赞同：2
> 
> 时间：2012-07-25T17:29:43.957
> 
> 标签：c#, .net, multithreading, nhibernate

我的应用程序通过套接字连接接收频繁的远程事件，每次启动一个新线程，随后的操作通常会触发每次保存相同的对象图，并具有单个锁定的静态会话。但是当保存执行时，有时会收到新的更新，这会将新元素添加到同一个对象图中。我认为这是例外的原因：

```
TransientObjectException
object references an unsaved transient instance - 
save the transient instance before flushing. 
```

如果是这个原因，那是可以理解的。但是我如何防止这个异常呢？如果我让事务回滚，则会发生后续异常，例如 StaleStateObject，然后是 NonUniqueObjectException。

那么如何处理或防止这种情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:38:06.167

有两种方法可以防止错误：

*   `Save()`手动新建的引用对象
*   为关系设置适当`cascade`的设置，所以上面会自动发生（我个人更喜欢这个）

当然，当您打算引用现有对象时，您完全有可能创建一个新对象，或者即使使用锁也存在线程问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T09:49:40.283

如果此异常是在 SaveOrUpdate 期间（在不同的线程中）迭代集合时正在修改实体集合，则可能的原因。所以我认为必须放置锁以避免这些并发操作。

# .net - Gimp gdk_pixbuf_save 因 AccessViolationException 而失败，但我不知道为什么？

> ID：11655307
> 
> 赞同：1
> 
> 时间：2012-07-25T17:29:46.520
> 
> 标签：.net, 64-bit, pdf-generation, access-violation, gimp

我正在使用我发现的代码将 SVG 文件光栅化为图像文件。该链接是[http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24547525.html](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24547525.html)。我的代码看起来相同，但我遇到了访问冲突：

“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”`

为了消除显而易见的问题：我使用 Gimp 目录中的 svg 文件，所以我有一个已知的好文件。我使用 e: 作为保存到文件的位置，这样库就不会遇到任何安全/权限问题。我正在以管理员权限运行 Visual Studio，以防出现问题。我的盒子是 64 位的，我将 Local.testsettings 设置为“在 64 位机器上的 64 坑进程中运行测试”。

有任何想法吗？

我的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.ComponentModel;

namespace TA.Rasterizer
{
    /// <summary>
    /// Takes SVG image file type and converts to PNG image file type. 
    /// Gimp must be installed. Gimp dll location must be in the web.config
    /// file key "ThreatAnalyzer-DllDirectoryForGimp".
    /// <summary>
    /// http://msdn.microsoft.com/en-us/magazine/cc164123.aspx
    /// http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24547525.html
    /// </summary>    /// </summary>
    public static class Rasterizer
    {
        // C:\Windows\System32
        [DllImport("kernel32.dll", SetLastError = true)]
        static extern bool SetDllDirectory(string pathname);

        [DllImport("libgobject-2.0-0.dll", SetLastError = true)]
        static extern void g_type_init();

        [DllImport("librsvg-2-2.dll", SetLastError = true)]
        static extern IntPtr rsvg_pixbuf_from_file_at_size(string file_name, int width, int height, out IntPtr error);

        [DllImport("libgdk_pixbuf-2.0-0.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
        static extern bool gdk_pixbuf_save(IntPtr pixbuf, string filename, string type, out IntPtr error, __arglist);
        //static extern bool gdk_pixbuf_save_to_buffer(

        /// <summary>
        /// Get location of Gimp installed Dlls from web.config appsettings key/value.
        /// Key name is found in this.webConfigFileAppSettingsGimp
        /// </summary>
        /// <returns></returns>
        private static string GetGimpDllLocationFromConfigurationFile(bool webapp, string nonDefaultConfigFileName)
        {
            // connect to config file
            Configuration rasterizerConfiguration = new TA.Rasterizer.Configuration(webapp, nonDefaultConfigFileName);

            // grab config setting
            return rasterizerConfiguration.Get("ThreatAnalyzer-DllDirectoryForGimp");
        }

        /// <summary>
        /// http://msdn.microsoft.com/en-us/magazine/cc164123.aspx
        /// You must check that file exists after call in order to check success. 
        /// </summary>
        /// <param name="inputFileName">SVG file to be converted</param>
        /// <param name="outputFileName">PNG file as final product</param>
        /// <returns></returns>
        public static void SvgToPng(string inputFileName, string outputFileName, bool webapp, string nonDefaultConfigFileName)
        {
            string gimpDllLocation = GetGimpDllLocationFromConfigurationFile(webapp, nonDefaultConfigFileName);

            bool rasterizeSuccess = ExternRaster.RasterizeSvg(inputFileName, outputFileName, gimpDllLocation);

            if (!rasterizeSuccess)
            {
                Int32 err = System.Runtime.InteropServices.Marshal.GetLastWin32Error();
                throw new Win32Exception(err);
            }
        }

    /// <summary>
    /// http://msdn.microsoft.com/en-us/magazine/cc164123.aspx
    /// http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_24547525.html
    /// </summary>
    internal sealed class ExternRaster
    {

        public static bool RasterizeSvg(string inputFileName, string outputFileName, string gimpDllLocation)
        {
            bool callSuccessful = SetDllDirectory(gimpDllLocation);
            if (!callSuccessful)
            {
                throw new Exception("Could not set DLL directory");
            }
            g_type_init();
            IntPtr error1;
            IntPtr result = rsvg_pixbuf_from_file_at_size(@"E:\green.svg", -1, -1, out error1);
            if (error1 != IntPtr.Zero)
            {
                throw new Exception(Marshal.ReadInt32(error1).ToString());
            }

            IntPtr error2;
            callSuccessful = gdk_pixbuf_save(result, @"E:\green.jpg", "jpg", out error2, __arglist(null));
            if (!callSuccessful)
            {
                throw new Exception(error2.ToInt32().ToString());
            }

            return true;
        }

    }

    }
} 
```

我从 MSTest 单元测试中访问代码：

```
 /// <summary>
    ///A test for RasterizeSvg
    ///</summary>
    [TestMethod()]
    public void RasterizeSvgTest()
    {
        // arrange
        string svgFileNameInAppDirectory = "1kijvsrewxxr3mdvlwitjvyu-pie.svg";

        string currentClassLibDirectory = Environment.CurrentDirectory.Replace(@"\bin\debug\","");
        string pathToAppData = Setup.GetDataPath(); 
        string inputFileName = Path.Combine(pathToAppData, svgFileNameInAppDirectory);
        string outputFileName = Path.Combine(pathToAppData, svgFileNameInAppDirectory.Replace("svg","png"));
        bool webapp = false; 
        string nonDefaultConfigFileName = string.Empty; 

        // act
        Rasterizer.SvgToPng(inputFileName, outputFileName, webapp, nonDefaultConfigFileName);

        // assert
        bool fileExists = File.Exists(outputFileName);
        Assert.IsTrue(fileExists);

        // cleanup
        if (fileExists)
        {
            File.Delete(outputFileName);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T13:24:35.933

的[文档`rsvg_pixbuf_from_file_at_size`](https://developer.gnome.org/rsvg/2.36/rsvg-Using-RSVG-with-GdkPixbuf.html#rsvg-pixbuf-from-file-at-size)说

> 如果发生错误，则设置错误并返回 NULL。

对我来说，这可能意味着，当成功时，您的`error1`变量不会设置为有效指针。您应该改为测试返回值`result`。

我认为@GojiraDemonstah 所说的“jpg”与“jpeg”也很重要。

此外，`rsvg_pixbuf_from_file_at_size`分配一个新的`GdkPixbuf`并且您没有任何代码可以释放它。为此，您还应该拥有

```
[DllImport("libgobject-2.0-0.dll", SetLastError = true)]
static extern void g_object_unref(IntPtr obj); 
```

在你的进口和

```
g_object_unref(result); 
```

调用`gdk_pixbuf_save`后避免泄漏内存。

# c# - Amazon EC2 API 访问控制

> ID：11655308
> 
> 赞同：4
> 
> 时间：2012-07-25T17:29:57.167
> 
> 标签：c#, amazon-ec2, security

我们正在尝试在我们的 EC2 云中进行一些需要使用某些 API 调用（创建/删除卷、启动/停止实例等）的开发。阅读 Amazon 的文档后，我发现虽然我可以与不同的 AWS 账户共享实例级访问权限，但我对在 IAM 中创建的用户没有精细的访问控制；如果我给他们一个 Destroy 权限，它将适用于全球。

我的问题是，其他人是如何处理这个问题的？我反对在我们的生产环境中将全局销毁权授予任何正在开发的软件，而且加倍如此，因为这些是合同开发人员。同时，我什至对在全球范围内拥有这些权利的生产程序也持谨慎态度，因为这似乎是不好的做法，而且代码本身就不安全。

人们是否找到了任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:04:38.443

只是为了澄清。您正在尝试控制用户可以开始停止哪些实例以及用户可以使用 IAM 配置文件创建和删除哪些卷？

如果这实际上是您要问的，那么答案很简单。您不能为实例或卷制定任何规则，所有 EC2 命令都是全局的。根据您想要的帐户数量，您可以为每个客户创建一个新帐户，并使用合并计费将它们全部链接起来。

如果您想控制哪些用户可以访问哪些实例/卷，您需要开发某种他们将使用的代理服务，而不是亚马逊服务。虽然这并不一定保证它会更安全。

# debugging - 如何在客户端调试.net exe？

> ID：11655310
> 
> 赞同：2
> 
> 时间：2012-07-25T17:30:01.833
> 
> 标签：debugging

我在客户端机器上安装了一个.net exe，它抛出了一个异常..那么如何调试并找到确切的错误..

请注意，1-这不是远程调试.. 2-我没有要检查的日志文件，机器是 Windows 7..

请让我知道这是否可能？

根据评论：正如我已经告诉过的，我没有要验证的日志文件，也没有任何堆栈竞赛。

所以其他人知道如何找到确切的错误..????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:28:54.850

假设 exe 崩溃（即异常未处理），那么如果您无法在远程计算机上安装任何东西，您将需要从[Windows Error Reporting](http://msdn.microsoft.com/en-us/library/windows/desktop/bb513616%28v=vs.85%29.aspx)获取转储文件。

对于托管可执行文件，您应该将 WER 配置为[生成完整转储](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)，因为小型转储可能没有足够的信息。

在您的机器上拥有此转储文件后，您可以使用 WinDbg 和[SOS 扩展](http://msdn.microsoft.com/en-us/library/bb190764.aspx)对其进行分析（假设您有一个与生成转储文件的 exe 匹配的 pdb 文件）

# actionscript-3 - 如何在页面加载时检测 Flash 电影是否在浏览器中可见？

> ID：11655316
> 
> 赞同：1
> 
> 时间：2012-07-25T17:30:29.880
> 
> 标签：actionscript-3, flash

有没有办法使用 ActionScript 来检测 Flash 电影在页面加载时是否实际可见。我需要确定 SWF 是在第一个可见页面上加载还是在首屏下方，因此用户需要向下滚动才能看到它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:55:04.913

我不相信在 Flash 中有任何内置的方法来处理这个问题。我不相信舞台对布局的 HTML 有任何了解。我的猜测是您必须在 Javascript [http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)中使用类似这样的东西，并与 Flex/Flash 中的 ExternalInterface 配对，以与一些 JavaScript 进行通信，然后寻找位置SPAN DIV 或任何容器用于您的 EMBED/OBJECT 标签。

# c# - C#数组传入函数，如C++？

> ID：11655319
> 
> 赞同：3
> 
> 时间：2012-07-25T17:30:33.457
> 
> 标签：c#

C# 有什么办法可以在 C++ 之类的函数中传递数组？

在 C++ 中，我们可以非常简洁地传递数组加上偏移量和长度，如下所示

```
void myFunction(int A[], int m) // m is length of A
{
    myFunction2(A+1, m - 1); 
} 
```

C#也可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T17:32:12.333

当然。但是您不能修改指针，因此您需要单独传递偏移量。此外，您不需要传递长度，因为所有 C# 数组都有一个`.Length`属性来获取数组大小。

```
void MyFunction(int[] A, int offset)
{
    MyFunction2(A, offset + 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:36:43.953

在 C# 中，您不是在传递指向数组的指针，而是在传递数组引用。

```
void myFunction(int[] array, int offset)
{
    myFunction(array, offset + 1);
} 
```

这将有效地做同样的事情。重要的是要知道长度是不必要的，因为数组本身是一个对象引用，它携带数组的长度。所以你相对于你的例子的真实长度可以通过`array.Length - offset`

# c++ - 将多维数组传递给函数（c++）？

> ID：11655326
> 
> 赞同：4
> 
> 时间：2012-07-25T17:30:53.317
> 
> 标签：c++, arrays, function

我一直在尝试将一个未知大小的多维数组传递给一个函数，但到目前为止还没有运气，当声明数组时，它的维度是变量：

```
double a[b][b]; 
```

据我所知，我需要在声明函数时给出 b 的值，a 可以是未知的。我尝试将 b 声明为全局变量，但随后它说它必须是一个常量。

IE：

```
int b;

double myfunction(array[][b])
{
}

int main()
{
int a;
double c;
double myarray[a][b];

c=myfunction(myarray);

return 0;
} 
```

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:44:29.613

按值传递：

```
double myfunction(double (*array)[b]) // you still need to tell b 
```

通过 ref ：

```
double myfunction(int (&myarray)[a][b]); // you still need to tell a and b 
```

模板方式：

```
template<int a, int b> double myfunction(int (&myarray)[a][b]); // auto deduction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T17:22:28.447

如果你想传递一个未知大小的数组，你可以像这样在堆中声明一个数组

```
//Create your pointer
int **p;
//Assign first dimension
p = new int*[N];
//Assign second dimension
for(int i = 0; i < N; i++)
p[i] = new int[M];

 than you can declare a function like that: 
double myFunc (**array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:37:49.810

也许阅读一些关于 C++ 和数组的参考资料会有所帮助，

[http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T17:36:21.897

```
void procedure (int myarray[][3][4]) 
```

More on this [here](http://www.cplusplus.com/doc/tutorial/arrays/)

# events - Worksheet_Change 永远不会触发

> ID：11655327
> 
> 赞同：5
> 
> 时间：2012-07-25T17:31:05.687
> 
> 标签：events, vba, excel

我正在使用 VBA 来更改 Excel，并在 Sheet1 中有以下简单的事件处理程序：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    MsgBox "HI"
End Sub 
```

不过，这永远不会触发。我在即时窗口中测试过：

> ?Application.EnableEvents

最终返回 True，所以它应该触发。有谁知道为什么这根本不想开火？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T18:08:58.423

你有不止一张纸吗？请注意，工作表的 CodeName 属性和 Name 属性（Excel 中选项卡上的名称）并不总是相同的。例如，如果 Project Explorer 列出

```
Sheet2 (Sheet1) 
```

然后 Sheet1 是名称，Sheet2 是代码名称。

查看是否将代码放入错误模块的最简单方法是右键单击工作表的选项卡并选择查看代码。这将显示该工作表的 CodePane，这就是您的代码所在的位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-03T16:32:13.973

这个问题是很久以前发布的，但我最近遇到了同样的问题。如果还有其他 vba 新手正在为此苦苦挣扎，请尝试保存您的工作簿并重新打开它。在我这样做之后，我的工作表中的 Worksheet_Change Sub 按我的预期触发了。

也许有一个控件来编译我缺少的工作表子程序？？？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T17:54:34.537

通常与`Target`. 这是一个示例，如果您突出显示 M4 并更改值，看看会发生什么：

```
Private Sub Worksheet_Change(ByVal Target As Range)
 If Target.Address = "$M$4" Then
    MsgBox ("HI")
 End If
End Sub 
```

[这里](http://www.ozgrid.com/forum/showthread.php?t=148634)是关于这个事件的一个很好的帖子

从那篇文章中调整代码，然后你可以做这样的事情

```
Private Sub Worksheet_Change(ByVal Target As Range) 
    If Intersect(Target, Me.Range("$A$1:$V$100")) Is Nothing Then Exit Sub 
    If Target.Address = "$A$1" Then 
        MsgBox ("A1")
    ElseIf Target.Address = "$A$2" Then 
        MsgBox ("A2")
    End If 
End Sub 
```

好的 - 请参阅下面的评论 + 我刚刚测试过，您的代码应该可以正常工作。试试这个？这也行不通吗？

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Intersect(Target, Me.Cells) Then
        MsgBox ("A1")
    End If
End Sub 
```

# java - 以编程方式设置工作日

> ID：11655332
> 
> 赞同：0
> 
> 时间：2012-07-25T17:31:36.717
> 
> 标签：java, android, calendar

我正在使用[w2davids 日历](http://w2davids.wordpress.com/android-simple-calendar/)，在该日历中，代码的作者使用了图像（ImageView）来显示工作日：

```
<LinearLayout
    android:layout_gravity="center"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <ImageView
        android:id="@+id/calendarheader"
        android:src="@drawable/blue_bg_with_text"
        android:layout_gravity="center"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </ImageView> 
</LinearLayout> 
```

![在此处输入图像描述](../Images/39598ad295733ec57077562415a713ce.png)

我不想在工作日使用图像。如何以编程方式设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:36:51.850

`LinearLayout`用七个`TextView`s创建一个水平线。您可以使用[`DateUtils.getDayOfWeekString()`](http://developer.android.com/reference/android/text/format/DateUtils.html#getDayOfWeekString(int,%20int)). （我不确定该`DateUtils`方法是否符合语言环境；如果不是，请尝试[此方法](https://stackoverflow.com/questions/7651221/android-how-to-get-the-current-day-of-the-week-monday-etc-in-user-languag)。）

在格式方面，在每个上使用一个中心`gravity`并在每个上使用`TextView`一个大的上填充`LinearLayout`应该可以正常工作，并且您可以使用 drawable 将背景设置为您需要的任何内容。

# objective-c - 如何通过 [sender tag] 引用不同的对象？

> ID：11655338
> 
> 赞同：0
> 
> 时间：2012-07-25T17:31:55.927
> 
> 标签：objective-c, sender

我想显示不同计算的不同字符串集取决于发送者的响应..2 组字符串是并行的，这意味着命名就像.. user1、user2、object1、object2、name1、name2、age1、age2 等..到目前为止我所知道的是使用...

```
-(IBAction)showLotOfStuff:(id)sender{
switch ([sender tag]) {
case 1: //show user1, object1, name1, age1...
case 2: //show user2, object2, name2 age2...} 
```

但是，到那时我将有双倍大小和重复代码，因为我有很多事情要做和展示..它真的很愚蠢，它涉及数组、计算，我真的不想看两次，虽然我可以通过简单的复制来完成并粘贴..

我想知道有没有什么办法可以把它们减半。。

```
-(IBAction)showLotOfStuff:(id)sender{
show user[sender tag], object[sender tag], 
name[sender tag], age[sender tag]...} 
```

我认为这个问题很基本，但我就是不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:17:26.277

你有一组用户吗？你的数据是什么样的？您可能可以重构它而不是重复代码。

假设您有一个`NSArray`被调用的`users`.

不确定您使用的是哪种控件，但为简单起见，我们可以假设您有一些按钮，每个按钮都应显示其中一位用户的信息。您可以给按钮标签对应于数组用户的位置，理想情况下有一些偏移量，以减少使用这些标签做其他事情时出错的机会。（即假设您有 3 个标签为 100、101 和 102 的按钮，以及数组中有 3 个用户）。

然后，您可以执行以下操作：

```
- (IBAction)showLotOfStuff:(id)sender
{
  int userIndex = sender.tag - 100; // you could define 100 as a constant called userOffset or something to make this a little cleaner
  if(users.count <= userIndex)
    return; // out of bounds, probably want to check for this and handle it somehow

   MyObjectType *currentUser = [users objectAtIndex:userIndex];
   // do whatever with your user
} 
```

这是一个普遍的例子。具体实现取决于您未提供的更多细节。

# asp.net - Asp.net - 通过 Response.OutputStream 提供文件后做什么

> ID：11655345
> 
> 赞同：0
> 
> 时间：2012-07-25T17:32:19.430
> 
> 标签：asp.net, .net, vb.net

我正在通过我的网络应用程序提供一个 docx 文件。这是为了响应 DropDownList 索引的更改而完成的，我将 AutoPostBack 设置为 true。我有许多可以通过复选框选择的选项，当下拉列表更改时，创建的文件基于选中的选项。

所以我正在做的是当事件触发时我会做一些魔术来创建一个文档然后提供它：

```
Protected Sub myDropDown_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles myDropDown.SelectedIndexChanged

' a bunch of things happen here but the end result is the contents of a docx file in a MemoryStream with the
' name mainStream

'here is where I set up the response and serve the file:

Response.ClearContent()
Response.ClearHeaders()
Response.AddHeader("content-disposition", "attachment; filename=document.docx")
Response.ContentEncoding = System.Text.Encoding.UTF8
Response.ContentType = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
mainStream.WriteTo(Response.OutputStream)
mainStream.Close()
mainStream.Dispose()
Response.End() 
```

现在我的问题是，此时我该怎么办？看来我必须调用 Response.End() 发送缓冲的内容，但这让我坐在一个页面上，选中了复选框，我的下拉列表显示了已更改的选项。如果我点击页面上导致回发的任何其他按钮，似乎我的下拉列表的选定索引更改事件再次触发。

我想做的是在发送文件后重定向。Response.redirect 将不起作用，因为 Response.End() 停止页面执行。谁能告诉我这种情况通常是如何处理的？谁能告诉我，如果页面上的另一个控件在提供文件后进行回发，为什么我的下拉菜单的选定索引事件会再次触发？任何建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:42:26.417

有几种不同的方法可以解决这个问题，具体取决于应用程序的复杂性和选择后页面中所需的行为。

我们处理这种情况的方法是收集所有用于在 javascript 中生成文件的详细信息，并将它们以查询字符串的形式传递给我们在新窗口中从 javascript 打开的 ashx 页面。然后 ashx 页面将生成文件并将响应流回给用户。

我们采用这种方法是因为对文件的请求不会改变用户与页面交互的任何内容。

另一种方法是在回发期间生成文件并将其保存在临时位置。然后，您可以将用户移动到不同的页面或更新当前页面，然后执行一些将为用户获取文件的 javascript。如果文件是在暴露的文件夹中生成的，你可以直接打开文件，如果不是，你可以使用上面的 ashx 技巧。在任何一种情况下，您的代码都必须在隐藏字段或 javascript 中包含对生成文件的引用，以便客户端知道如何找到它。

# android - 实现扩展/自定义视图为构造函数抛出 NoSuchMethod

> ID：11655347
> 
> 赞同：8
> 
> 时间：2012-07-25T17:32:27.017
> 
> 标签：android

我有一个自定义的 TextView ，它实现了三个 View 构造函数（nb，这是我第一次尝试安卓应用程序）：

```
public class DynamicGeometryTextView extends TextView {

    public DynamicGeometryTextView (Context con) { super(con); }

    public DynamicGeometryTextView (Context con, AttributeSet attrs) {
        super(con, attrs);
    }

    public DynamicGeometryTextView (Context con, AttributeSet attrs, int style) {
        super(con, attrs, style); 
    } 
```

这是一个非静态内部类，因为它需要从外部类访问实例数据。它出现在 .xml 布局中：

```
<view class="cogdis.chalkboard.DisplayText$DynamicGeometryTextView"
    android:id="@+id/chalkboard"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

一切都可以正常编译和安装，但在运行时：

```
Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class cogdis.chalkboard.DisplayText$DynamicGeometryTextView
    at android.view.LayoutInflater.createView(LayoutInflater.java:596)                                                                         
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)                                                                  
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)                                                                           
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)                                                                            
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)                                                                            
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)                                                                            
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)                                                       
    at android.app.Activity.setContentView(Activity.java:1867)                                                                                 
    at cogdis.chalkboard.DisplayText.onCreate(DisplayText.java:26)                                                                             
    at android.app.Activity.performCreate(Activity.java:5008)                                                                                  
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)                                                             
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)                                                              
    ... 11 more                                                                                                                                
Caused by: java.lang.NoSuchMethodException: <init> [class android.content.Context, interface android.util.AttributeSet]                       
    at java.lang.Class.getConstructorOrMethod(Class.java:460)                                                                                  
    at java.lang.Class.getConstructor(Class.java:431)                                                                                          
    at android.view.LayoutInflater.createView(LayoutInflater.java:561)                                                                         
    ... 22 more 
```

在我看来，这意味着它找不到构造函数的 (Context, AttributeSet) 版本……但它存在。我查看了其他一些 SO 帖子，例如[Android Custom View Constructor](https://stackoverflow.com/questions/2884501/android-custom-view-constructor)，这些都指向相同的结论（在我看来）并反复阅读自定义组件的 API 指南，但我已经被这个问题难住了不止一小时。

有人有想法么？有没有办法进一步调试？

**对于 POSTERITY**，即像我这样的新手，如果您的自定义 View 在 XML 布局中被引用，非静态内部类是不行的，但是如果您以编程方式创建它，它可以工作，例如：

```
 LayoutInflater lif = getLayoutInflater();
    ViewGroup layout = (ViewGroup)lif.inflate(R.layout.board, null);

    tv = new DynamicGeometryTextView(this);

    layout.addView((View)tv); 
```

在这种情况下，您只需要匹配您实际使用的构造函数。布局参数（WRAP_CONTENT 等）可以在`setLayoutParams()`继承自 View 的构造函数中设置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T17:39:35.950

[如果不引用外部类的实例，](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)就无法实例化非静态内部类。

```
OuterClass.InnerClass innerObject = outerObject.new InnerClass(); 
```

所以这可能是布局充气器未能充气您的课程的原因。删除对外部类成员的引用后，使您的类成为静态的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T17:40:33.443

改变：

```
public class DynamicGeometryTextView extends TextView { 
```

至：

```
public static class DynamicGeometryTextView extends TextView { 
```

为了正确引用它，它必须是一个`static`内部类

# c# - 在没有 MonoTouch 托管类的情况下获取 Objective-C 类名

> ID：11655354
> 
> 赞同：6
> 
> 时间：2012-07-25T17:32:52.200
> 
> 标签：c#, objective-c, ios, xamarin.ios, translate

我一辈子都想不通如何将它翻译成 MonoTouch。有接盘侠吗？

```
for(UIView* view in cell.subviews)
{
    if([[[view class] description] isEqualToString:@"UITableViewCellReorderControl"])
    {
    }
} 
```

大多数情况下，让我难倒的是视图类描述......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:03:53.900

一般来说，[@Monoman 的`is`解决方案](https://stackoverflow.com/a/11655492/63225)是查找特定类的实例的正确方法，即使您正在从 MonoTouch 程序中查找 CocoaTouch 类。

然而，有时您会发现有一个内部 CocoaTouch 类没有在 MonoTouch 中公开（甚至在 iOS 平台标头中）。在这种情况下，您将不得不求助于[@poupou 正在做](https://stackoverflow.com/a/11657997/63225)的技巧。

*不幸的是，他的答案在这里也*行不通。`view.GetType()`正在返回每个实现的最派生的 MonoTouch 类型，`Subview`然后`ToString()`, `Class.Name`，甚至`@selector("description")`每个都对错误的类型进行操作并给出过于通用的答案（`UIView`在这种情况下为“”）。

为了完成这项工作，您必须比@poupou 建议的*更深入一层。*

```
// ** using MonoTouch.ObjCRuntime; **

private string GetClassName (IntPtr obj) {
    Selector description = new Selector ("description");
    Selector cls = new Selector ("class");
    IntPtr viewcls = Messaging.IntPtr_objc_msgSend (obj, cls.Handle);
    var name = NSString.FromHandle (Messaging.IntPtr_objc_msgSend (viewcls, description.Handle));
    return name;
} 
```

这是一个替代方案，它不是更复杂（可能甚至更少？），但适用于任何 Objective-C 类，而不仅仅是那些响应`NSObject`'s`description`消息的类：

```
// ** using System.Runtime.InteropServices; **

[DllImport ("/usr/lib/libobjc.dylib")]
private static extern IntPtr object_getClassName (IntPtr obj);

private string GetClassName (IntPtr obj) {
    return Marshal.PtrToStringAuto(object_getClassName(obj));
} 
```

MonoTouch 还没有提供导入实际上是令人惊讶和有点悲伤的`object_getClassName()`。

您可以使用其中任何一种：

```
foreach (UIView view in cell.Subviews) {
    if (GetClassName(view.Handle) == "UITableViewCellReorderControl") {
    }
} 
```

**大胖免责声明**：几乎任何时候您使用这些技巧时，您都依赖于 Apple 保留更改权利的 CocoaTouch 实现细节。经验法则：如果您可以使用@Monoman 的解决方案做您想做的事，那么您*可能是*安全的。否则，你将把事情掌握在自己手中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T17:41:33.333

我目前没有使用 Monotouch，但您不应该只检查子视图的托管类型吗？

```
 foreach (UIView view in cell.subviews)
   {
     if (view is UITableViewCellReorderControl) {}
   } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T20:22:00.917

Objective-C 的处理`Class`大部分隐藏在 MonoTouch 提供的 API 中。它主要是`System.Type`并且`description`主要是`ToString`- 但这不会显示一些内部结构。

您可以尝试以下几件事（从简单到复杂）：

调用实例*可能*包括原始类名（作为描述的一部分） - 但它与调用`ToString`自身不同。`view`*`description``class`*

 *```
 foreach (UIView view in cell.Subviews) {
    if (view.ToString ().Contains ("UITableViewCellReorderControl")) {
    }
 } 
```

接下来尝试查看`Name`on`Class`是否与`description`.

```
foreach (UIView view in cell.Subviews) {
   MonoTouch.ObjCRuntime.Class c = new MonoTouch.ObjCRuntime.Class (view.GetType ());
   if (c.Name == "UITableViewCellReorderControl") {
   }
} 
```

最后真正调用实例`description`上的选择器。`Class`类似（未尝试）：

```
MonoTouch.ObjCRuntime.Selector description = new MonoTouch.ObjCRuntime.Selector ("description");
foreach (UIView view in cell.Subviews) {
   MonoTouch.ObjCRuntime.Class c = new MonoTouch.ObjCRuntime.Class (view.GetType ());
   var name = NSString.FromHandle (MonoTouch.ObjCRuntime.Messaging.IntPtr_objc_msgSend (c.Handle, description.Handle));
   if (name == "UITableViewCellReorderControl") {
   }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-14T15:30:06.017

这对我有用：

```
foreach(var subview in this.ContentView.Superview.Subviews)
{
    if(subview.Class.Name.EndsWith("UITableViewCellReorderControl"))
    {
    }
} 
```*

# c# - 如何在 gridview 中禁用编辑模式？

> ID：11655355
> 
> 赞同：0
> 
> 时间：2012-07-25T17:32:51.700
> 
> 标签：c#, asp.net

我有一个可以正常工作的gridview。但是只要单击命令按钮，它就会进入编辑模式。有没有办法阻止这一切？

```
<asp:GridView id="grv_purchaseOrder" runat="server" AutoGenerateColumns="False" 
    onrowdatabound="grv_purchaseOrder_RowDataBound"  ShowFooter="True"
    EmptyDataText="No Purchase Order were found." DataKeyNames="purchaseOrderID" 
onrowcommand="grv_purchaseOrder_RowCommand" 
    onrowediting="grv_purchaseOrder_RowEditing">
    <Columns>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:Button ID="but_purchaseOrderDetails" runat="server" CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>'
                    CausesValidation="false" CommandName="edit" Text="Detail" />
            </ItemTemplate>
            <FooterTemplate>
                <asp:Button ID="but_newOrderDetails" runat="server" CausesValidation="false"  commandargument="0"
                    CommandName="new" Text="New" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="name" HeaderText="Name" />
        <asp:TemplateField HeaderText="Date">
            <ItemTemplate>
                <asp:Label ID="lbl_dateCreated" runat="server" Text='<%# Bind("dateCreated") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="purchaseOrderStatus" HeaderText="Status" />
    </Columns>
</asp:GridView> 
```

具体来说，but_newOrderDetails 将 gridview 置于编辑模式。

这是 Row Command 事件处理程序内部的内容：

```
 string currentCommand = e.CommandName;
        ClientScriptManager cs = Page.ClientScript;
        int rowIndex = int.Parse(e.CommandArgument.ToString());
        string purchaseOrderID = grv_purchaseOrder.DataKeys[rowIndex]["purchaseOrderID"].ToString();
        if (currentCommand == "edit" || currentCommand == "new") {
            cs.RegisterStartupScript(this.GetType(), "popupScript", "window.open('PurchaseOrderDetail.aspx?purchaseOrderID=" + purchaseOrderID + "','_blank');", true);
        } 
```

我也试着把 grv_purchaseOrder.EditIndex = -1; 在 rowEditing 事件中，但它没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:47:54.567

```
<asp:gridview id="GridView1" runat="server"> 
        <columns> 
                <asp:templatefield> 
                        <itemtemplate> 
                                <asp:linkbutton id="btnEdit" runat="server" commandname="Edit" enabled='<%# !(Eval("Status").ToString().Equals("Closed") || Eval("Status").ToString().Equals("Cancelled")) %>' 
text="Edit" /> 
                        </itemtemplate> 
                </asp:templatefield> 
        </columns> 
</asp:gridview> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-30T08:34:50.420

您只需在 gridview_RowEditing eventHandler 中编写此代码：

```
protected void grvMain_RowEditing(object sender, GridViewEditEventArgs e)
{
    grvMain.EditIndex = -1;
    FillGrid();
} 
```

# php - 在文件尚不存在时防止类似 LFI 的漏洞

> ID：11655360
> 
> 赞同：3
> 
> 时间：2012-07-25T17:32:56.830
> 
> 标签：php, security, web, realpath

[如果用户正在请求服务上的文件，我通常可以通过使用 PHP 的realpath()](http://php.net/manual/en/function.realpath.php)并确保它位于根目录下来保护他们不访问我想要的范围之外的文档。比如像这样：

```
$path = realpath($_GET['path']);
// Protect against LFI vulnerabilities
if (substr($path, 0, strlen($root)) == $root)
{
    // safe
} 
```

但是，realpath() 仅适用于*已经存在*的文件。如果我想确保用户将要写入我的脚本的位置在根目录下怎么办？

我不能使用 realpath()，我应该检查并去掉“..”引用吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T06:03:14.127

如何检查 realpath(dirname($file)) 是否在根目录下？

```
$dir = $path;
$found = false;

while ($dir) {
    $dir = dirname($dir);
    if (!is_dir($dir)) {
        continue;
    }

    if (strpos(realpath($dir), $root) === 0) {
        $found = true;
    }

    break;
}

var_dump($found); 
```

# ruby-on-rails - Rails - 如何为整个测试套件存根方法？

> ID：11655362
> 
> 赞同：2
> 
> 时间：2012-07-25T17:33:35.843
> 
> 标签：ruby-on-rails, testing, mocha.js, stubs

现在我正在进行重构，我正在努力解决以下问题。

我有这样的课：

```
class Example
  def self.some_method
    if Rails.env.test?
      true
    else
      hit_external_service
    end
  end
 end 
```

现在，我认为将生产代码与测试代码混合到类中并不是很好。我们正在使用 mocha，所以我想删除条件逻辑并为整个测试套件设置一个存根，因为这个方法被到处调用，如下所示：

```
class ActiveSupport::TestCase
  setup do
    Example.stub(:some_method).returns(true)
  end
end 
```

但是当我想测试原始方法时，我必须“取消存根”它，这看起来也很脏，所以我有点坚持如何做到这一点。

我还想过将外部服务的逻辑提取到另一个类，然后将该类作为可注入依赖项，因此对于整个测试套件，我可以这样做：

```
Example.external_service = DummyImplementation 
```

然后对于我可以做的真正测试：

```
Example.external_service = RealImplementation 
```

但这似乎有点矫枉过正，因为逻辑实际上只有 3 行。

那么有什么建议吗？有什么简单的东西可能我没有看到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:22:19.063

对于存根类方法，我通常在需要它的特定测试用例中创建存根，然后在拆卸时取消存根方法。像这样：

需要'test_helper'

```
class MyTest < ActiveSupport::TestCase

  def teardown
    Example.unstub(:some_method)
  end

  test "not hitting the service" do
    Example.stub(:some_method).returns(true)
    assert Example.some_method
  end

  test "hitting the service" do
    assert Example.some_method
  end

end 
```

# c# - 您如何找出网络上的工作站和服务器之间的区别？

> ID：11655364
> 
> 赞同：5
> 
> 时间：2012-07-25T17:33:41.167
> 
> 标签：c#, .net, networking, active-directory

我知道如何使用 System.DirectoryServices 网络在服务器上获取机器。问题是我想忽略网络上的工作站/计算机，只检索服务器。

如果有人说要检查操作系统版本，那么获取 Win NT 系列操作系统版本号的问题是每个数字可能对应于服务器和非服务器操作系统（例如 NT 版本 6.1 指的是 Win 7 和 Win Server 2008 R2)。

这是我的基本测试类：

```
namespace Project1
{
    class Class1
    {
        public static void Main(string[] args)
        {
             List<string> list = Class1.GetComputersOnNetwork();           
        }

        public static List<string> GetComputersOnNetwork()
        {
            string fileName = "networkcomputers.txt";  

            // Delete the file if it exists.
            if (System.IO.File.Exists(fileName))
            {
                System.IO.File.Delete(fileName);
            }

            // Create the file.
            System.IO.FileStream fs = System.IO.File.Create(fileName, 1024);

            StreamWriter strwr = new StreamWriter(fs);

            int i = 0;
            List<string> list = new List<string>();
            DirectoryEntry root = new DirectoryEntry("WinNT:");           
            foreach (DirectoryEntry computers in root.Children)
            {                   
                if ((computers.Name != "Schema"))
                {
                    i++;
                    Console.WriteLine("Machine Number " + i + ": " + computers.Name);
                    strwr.WriteLine("Machine Number " + i + ": " + computers.Name);
                    list.Add(computers.Name);
                }           
            }
            return list;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:11:24.477

与其去`operatingSystemVersion`房产，不如看`operatingSystem`房产。这将为您提供 SKU 的名称。您需要知道哪些是服务器操作系统版本，哪些不是 - 没有`IsServer`布尔值。根据它们的命名方式，您可以进行通配符搜索`operatingSystemVersion`以查找具有`operatingSystemVersion`包含字符串“server”的计算机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T15:51:24.333

您可以读取注册表项`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\InstallationType`。

关键是：

*   如果此 PC 正在运行 Windows Server（例如 Windows Server 2012），则为“服务器”。
*   如果此 PC 正在运行 Windows 桌面（例如 Windows 8.1），则为“客户端”。

使用任何语言（例如 C#）都可以轻松读取此注册表项。

有关详细信息，请参阅标题为“[区分服务器操作系统和工作站](http://blogs.msdn.com/b/ejarvi/archive/2004/06/08/151162.aspx)”的文章。

***更新***

链接失效，使用 [archive.org：https://web.archive.org/web/20140502101009/http://blogs.msdn.com/b/ejarvi/archive/2004/06/08/151162.aspx](https://web.archive.org/web/20140502101009/http://blogs.msdn.com/b/ejarvi/archive/2004/06/08/151162.aspx)

从此页面复制：

> ejarvi 2004 年 6 月 8 日 3:47 PM 9 我在我们的测试工具中维护了一个脚本，该脚本自动检测并报告被测机器的操作系统版本。我不知道我运行的是 XP SP1 还是 XP SP2 - 所以我有一个使用 reskit 中的 spcheck 的 kludge。但真正的问题是我从 cmd shell 中使用 ver 获取了大部分信息，但在 Windows 2000 上无法区分 Professional 和 Server。我能够在注册表中找到所有这些信息，所以我撕掉了黑客，现在我只是从那里阅读。如果还有其他人试图做同样的事情，我可以从这里获得信息（都在 HKLM）：
> 
> SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProductName（Microsoft Windows Server 2003、Microsoft Windows XP、Microsoft Windows 2000）
> 
> SOFTWARE\Microsoft\Windows NT\CurrentVersion\CDSVersion（Service Pack 1、Service Pack 2，...）
> 
> 并在 Windows 2000 上区分 Pro 和 Server：SYSTEM\CurrentControlSet\Control\ProductOptions\ProductType (WinNT, ServerNT)
> 
> 在我的案例中，我实际上并没有使用它，但如果您正在寻找更多的预打包工具来执行此类操作，http://www.codeproject.com/system/dtwinver.asp 上的 DtWinVer [看起来](http://www.codeproject.com/system/dtwinver.asp)也很有希望。

# rest - CXF拦截器的生命周期是什么？

> ID：11655367
> 
> 赞同：0
> 
> 时间：2012-07-25T17:33:47.827
> 
> 标签：rest, cxf, interceptor

CXF拦截器的生命周期是什么？是每个拦截器只创建一个实例，还是为每个服务调用创建新实例？

我需要为需要一些初始化的 RESTful 服务编写一个拦截器，并且我不希望每次调用拦截器时都执行它。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:22:06.153

我找不到任何相关文档，但是如果您在外部创建拦截器并将实例传递给 CXF，它将使用它并且不会创建另一个实例。

对于初始化部分，最好在初始化方法上添加@PostConstruct 注解（JEE5）。该方法将在 bean 创建后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:42:24.590

我假设您的意思是 CXF 拦截器。官方文档可以在这里找到： [http ://cxf.apache.org/docs/interceptors.html](http://cxf.apache.org/docs/interceptors.html)

这是将 CXF 与 Restful 服务集成的教程： [http ://www.celinio.net/techblog/?p=637](http://www.celinio.net/techblog/?p=637)

# ruby-on-rails - 销毁记录的所有 belongs_to 关联后销毁记录

> ID：11655368
> 
> 赞同：2
> 
> 时间：2012-07-25T17:34:06.830
> 
> 标签：ruby-on-rails, activerecord

`Book`一旦它的所有者（即它所属的记录）被销毁，我想销毁它。

如果只有一种`belongs_to`关系，则`dependent`选项 simple 有效。

```
class Book < ActiveRecord::Base
  belongs_to :shop
end

class Shop < ActiveRecord::Base
  has_many :books, :dependent => :destroy
end

class Cart < ActiveRecord::Base
  has_many :books, :dependent => :destroy
end 
```

但如果有更多的`belongs_to`关系呢？例如：

```
class Book < ActiveRecord::Base
  belongs_to :shop
  belongs_to :cart
end 
```

`Book`一旦它的**所有**所有者都被摧毁，我想摧毁它。如果 a`Cart`和 a`Shop`拥有相同的`Book`，并且 the`Shop`被销毁但`Cart`不是，则`Book`不会被销毁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:05:23.380

我相信你想要一个多态的 belongs_to 关联。

我还在检查`:dependent => :destroy`它...

研究发现“当 belongs_to 与另一个类的 has_many 关系一起使用时，不应指定此选项，因为可能会留下孤立的记录。” 这并不完全相同，但似乎暗示这将是一个手动过程，即删除两个`dependent => :destroy`语句并以编程方式（手动）删除子/父记录。

# css - I have put up display none but while loading the page It is loading

> ID：11655373
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:34:32.303
> 
> 标签：css

![enter image description here](../Images/b30fbcdfc4497a5f3d195311a5b95b7b.png)

You can see the image here I have been loaded the page with the display none and the css style script is included from before the head tag?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:37:41.910

你需要删除`display: block;`

它覆盖了你的`display: none;`

除非我误解了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T12:16:18.297

请更正您的代码

> 显示：块；

以上是覆盖您的代码

> 显示：无；

# c# - Using Properties.Settings.Default and Setting Alternate Profiles?

> ID：11655378
> 
> 赞同：2
> 
> 时间：2012-07-25T17:34:39.670
> 
> 标签：c#, visual-studio-2010, settings, settings.settings

Greetings StackOverflow,

In past projects I've gotten used to using the Settings Designer in Visual Studio to make settings files. This has worked well in the past. In my latest project I have a desire to have multiple version, a.k.a. profiles, of the same Settings class, one with production/default values for all the properties and one with test values.

While in search to see if this is possible I noticed that in the XML for the Settings.settings file there are multiple hints that having multiple setting profiles might be possible. For instance in the Settings.settings file the `<SettingsFile>` tag has a `CurrentProfile` attribute which is always set to `CurrentProfile="(Default)"`. Inside of that tag there is an empty tag called `<Profile />`. Lastly the `<Value>` tag for each setting has a `Profile` attribute that usually shows `Profile="(Default)"`.

Now, I've tried looking to what the `<Profile />` tag is all about and whether I can use it for something but none of my searches have come up with anything.

Ultimately I want to know whether there is a way to have different profiles of the same Settings class, each with it's own default values, so that I can use it might show up like this in my code:

```
Properties.Settings defaultSettings = Properties.Settings.Default;
Properties.Settings testSettings = Properties.Settings.Test; 
```

If anyone knows where to find the XML Schema for the settings file or if what I am asking for is possible please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:43:00.570

我使用[Enterprise 库](http://msdn.microsoft.com/en-us/library/ff632023.aspx)为不同的开发环境设置不同的配置。这需要一点时间来适应，但是有一个很好的配置工具可以读取配置文件并显示您的所有应用程序设置。您可以为计划使用的每个环境创建增量文件。我将**Merge Configuration**可执行文件添加到项目中的**lib**文件夹中，并在其顶部添加了一些构建事件以在构建时进行合并，以便文件自动准备好部署：

```
"$(ProjectDir)lib\MergeConfiguration.exe" "$(ProjectDir)web.config" "$(ProjectDir)lib\Delta_Dev.dconfig" "$(ProjectDir)Configurations\web.config-dev.config" 
```

# css - Positioning Text to appear Identically on Firefox and Chrome

> ID：11655379
> 
> 赞同：0
> 
> 时间：2012-07-25T17:34:42.660
> 
> 标签：css, firefox, google-chrome, positioning

I have a site that has a box with some text in it. When I view it in Chrome, its right at the top, so I have put a `padding-top` css rule in to element which lines it up correctly on Chrome, but on Firefox, the text is initially centred correctly, and the css rule ruins that. How can I code it (preferably without a browser detector on the server) so that it pads down the text in chrome, but not in firefox?

EDIT:

```
.footer input[type="submit"]
{
    border: none;
    color: #FFFFFF;
    font-size: 16px;
    height: 35px;
    padding: 9px 10px;
    margin: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:50:41.520

我的建议是您使用[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)来消除浏览器之间的差异。如果没有看到具体的代码，很难说这是否会 100% 解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:51:02.560

如果只是你关心的那两个浏览器，你可以为 Chrome 添加 webkit-specific CSS。所以，在你的例子中，你需要一个额外`padding-top`的 Chrome: `-webkit-padding-before`。这将仅将填充应用于 webkit 浏览器（Chrome、Safari 等），而不应用于 Firefox、IE 或 Opera。

但是，您最好的选择是应用 CSS 重置，然后为所有浏览器设置相同的样式。如果这不是一个选项，那么您可以像我上面提到的那样针对特定引擎（webkit 等）。然而，这不是推荐或考虑的“最佳实践”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T18:01:35.840

使用此代码修复它（至少目前）

```
padding: 8px 10px 6px;
-webkit-padding-after: 8px; 
```

谢谢你`Roddy of the Frozen Pea`的`webkit`参考

# xml - Vim formatting using gg=G with xml

> ID：11655383
> 
> 赞同：11
> 
> 时间：2012-07-25T17:35:04.610
> 
> 标签：xml, vim, indentation, shortcuts

I have a correctly formatted xml file, and following the command given as an answer here:

[How can I autoformat/indent C code in vim?](https://stackoverflow.com/questions/2355834/auto-format-c-file-in-vim)

I am trying to auto indent my file to display correct nesting.

Before I tried to use this command I set the file type to xml using `:set ft=xml` as the file I started with has an extension of `.mm`, and also `:set nowrap`.

Here is my ~/.vimrc file:

```
syntax on
set history=1000
set smartindent
set tabstop=2
set shiftwidth=2
set expandtab 
```

How come when I issue `gg=G`, I get a message saying `54 lines indented`, yet my file remains un-nested?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T01:14:00.900

如果你想尝试 Vim 自己的 XML 缩进器，你可以...

```
:filetype indent on         (load indent files for specific file types etc.)
:e                          (to reload the current buffer) 
```

这将在 $VIMRUNTIME/indent/xml.vim 加载 vimscript

那么当你这样做时

```
:set indentexpr? 
```

...它会说 indentexpr=XmlIndentGet(v:lnum, 1)

~~

不过，xmllint 更好，请参阅... [http://vim.wikia.com/wiki/VimTip349](http://vim.wikia.com/wiki/VimTip349)

我在我的 .vimrc 中有这样方便的键绑定！

```
" one or more lines:
vmap ,px !xmllint --format -<CR>

" pretty-print current line
nmap ,px !!xmllint --format -<CR> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T18:02:23.810

尝试输入：`:set equalprg?`。如果它说`equalprg=`这意味着您没有为 xml 缩进设置程序，那么它可能正在执行一些愚蠢的默认操作。这是将 xmllint 设置为格式化程序的指南：http: [//ku1ik.com/2011/09/08/formatting-xml-in-vim-with-indent-command.html](http://ku1ik.com/2011/09/08/formatting-xml-in-vim-with-indent-command.html)

# mysql - How should I cast a DataTable for assignment to DataGrid.ItemsSource?

> ID：11655384
> 
> 赞同：0
> 
> 时间：2012-07-25T17:35:07.423
> 
> 标签：mysql, wpf, data-binding, dataset, wpfdatagrid

I am trying to learn WPF, and trying to populate a WPF DataGrid with data from a MySQL database. The relevant code is:

```
 dataGrid.DataContext = myMySQL.DBDataSet;
        dataGrid.ItemsSource = myMySQL.DBDataSet.Tables[tblName]; 
```

dataGrid is a WPF DataGrid control. myMySQL.DBDataSet is a System.Data.DataSet. I get the following error on the second line of code above.

> "Cannot implicitly convert type 'System.Data.DataTable' to 'System.Collections.IEnumerable'. An explicit conversion exists (are you missing a cast?)"

Yes, I probably need a cast. I am glad to hear that an explicit conversion exists. But how do I determine what cast I need? '(System.Collections.IEnumerable)' obviously doesn't work. The type of 'ItemsSource' seems to be 'System.Windows.Controls.ItemsControl'. But cast (System.Windows.Controls.ItemsControl) doesn't work either. I have no idea where else to look for an explanation of how to cast this DataTable to correct this error. Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:59:27.730

```
private DataTable GetNewStaffCode()
       {
           Mod_Staff stafmodules = new Mod_Staff();
           staffcode = txtStaffCode.Text.ToString();
           DataTable dtstaffcode=stafmodules.GetNewStaffCode(staffcode);
           for (int j = 0; j < dtstaffcode.Rows.Count; j++)
           {
               staffcode ="ST"+ Convert.ToString(j);
           } 
```

错误消息是：

`Cannot implicitly convert type 'System.Data.DataTable' to 'string'`

和

`Real_Estate_Management_System.StaffEntry.GetNewStaffCode()': not all code paths return a value D:\Shwe Ain Real Estate Management\Real Estate Management By May Mee Tun\Real_Estate_App\Real_Estate_Management_System\Real_Estate_Management_System\UI\StaffEntry.cs 329 30 Real_Estate_Management_System`

```
 txtStaffCode.Refresh();
       }

public DataTable GetNewStaffCode(string staffcode)
    {
        String query = "Select staff_code from tblStaffType";
        if (CN.State == ConnectionState.Closed) CN.Open();
        SqlCommand cmd = new SqlCommand(query, CN);
        DataTable dt = new DataTable();
        SqlDataAdapter adp = new SqlDataAdapter(cmd);
        adp.Fill(dt);
        return dt;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:09:18.000

尝试将 DataTable 的 DefaultView 分配给 ItemsSource。

```
dataGrid.ItemsSource = myMySQL.DBDataSet.Tables[tblName].DefaultView; 
```

# php - Sharing between models of database table variables

> ID：11655385
> 
> 赞同：0
> 
> 时间：2012-07-25T17:35:11.477
> 
> 标签：php, mysql, codeigniter

I'm wanting to figure out how the best way to do this is.

I have about 6 different models for my different separated modules and they all share the same variables that I created that hold the values of my database tables. Should I create a special config file that holds these values or is there something better I can do for this situation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:40:51.263

您可以创建一个配置并从中提取，或者您可以创建一个“主”模型并从中扩展您的其他模型......就像这样：

```
class Mastermodel extends CI_Model
{
    var $table_name = 'table';          // user accounts
    var $another_table_name = 'another_table';  // user profiles

    function __construct()
    {
        parent::__construct();
    }

    ...
} 
```

然后在您的其他模型中，更改行

```
class Childmodel extends CI_Model 
```

至

```
class Childmodel extends Mastermodel 
```

然后你可以在子模型中使用`$this->table_name`and`$this->another_table_name`

通过扩展实例化变量的 Mastermodel，您可以继承这些变量。

****重要的是要注意，您还必须加载“主”模型，否则 PHP 将不会在内存中拥有它并且无法扩展它****

# php - MySQL select where variable is not in row

> ID：11655387
> 
> 赞同：1
> 
> 时间：2012-07-25T17:35:17.137
> 
> 标签：php, mysql, arrays

I'm trying to do MySQL query to extract specific rows without the help of PHP if conditions,

okay,
i want to select a row where the variable is not in a specific row but here's the thing

```
$blocked_user = "aaron"; 
```

and in MySQL

```
+----------+-----------------------+
| id       | blocked               |
+----------+-----------------------+
| 1        | aaron,john            | 
```

i want it to skip "aaron" while selecting and process to john
a false example :

```
SELECT * FROM table WHERE $blocked_user NOT IN blocked 
```

What i was doing is get blocked content and seperate them using php explode function then using in_array and if to confirm its not there :

```
if(in_array($blocked_user, explode($row['blocked'])){
  exit;
} 
```

but now i want to get rid of this and do it using a single query, how is it done ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:43:36.123

您确实应该将每个 CSV 值放在不同的行中（可能在`blocked`表中），但是您可以这样做：

```
SELECT * 
FROM tbl
WHERE FIND_IN_SET('$blocked_user', blocked) = 0 
```

如果`$blocked_user`包含在`blocked`列中的 CSV 列表中，则不会选择该行。

* * *

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/70a5e/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:46:10.600

我认为您正在寻找的是 LEFT OUTER JOIN，但这要求您将被阻止的名称存储在单独的行中。

例子：

```
+----------+-----------------------+
| id       | blocked               |
+----------+-----------------------+
| 1        | aaron                 |
| 2        | john                  | 
```

然后您可以像这样在您的用户表上执行 LEFT OUTER JOIN：

```
SELECT * FROM users AS u
LEFT JOIN blocked as b
ON b.blocked = u.username
WHERE b.blocked IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:39:23.033

您可能可以使用某种高级正则表达式 MySQL，但问题更深层次。你的表应该看起来更像这样：

```
| id | blocked |
----------------
| 1  |  aaron  |
| 1  |   john  | 
```

其中当然`id`不是主键类型。

然后你可以这样做：

```
SELECT * FROM table WHERE id = 1 AND blocked NOT IN ('aaron') 
```

*根据您的编辑，如果您有第二张桌子，我们称之为`data`*

```
SELECT * FROM data WHERE id = 1 AND id NOT IN (SELECT id FROM blocked_table WHERE blocked IN ('aaron')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:42:58.107

你可以试试

```
$sql = "SELECT * FROM table WHERE blocked NOT LIKE '%{$blocked_user}%'"; 
```

# c# - In the VS.NET 2010 IDE am I using tabs or spaces based on default configuration?

> ID：11655388
> 
> 赞同：0
> 
> 时间：2012-07-25T17:35:23.923
> 
> 标签：c#, visual-studio-2010, visual-studio

This is **not** a question about which is better 'tabs vs spaces'. However I am confused on which method I am actually using. In the default C# VS.NET 2010 IDE 'Tabs' settings it shows a tab size of **4** and the option of **Insert spaces** selected.

OK so *in* the almighty debate and to clear up what VS.NET is using, I press *Tab* on the keyboard but spaces are inserted. Does this mean I am using Tabs or Spaces? It's like I am using 'Tabs' masqueraded as spaces. Which is VS.NET and I using by default and which side of that would I be considered on when using the default options: tabs or spaces?

Please let me know so I can know definitively which method I am using. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:51:51.230

至于 VS 使用什么，这取决于您是否选择了**插入空格**或**保留选项卡**，如屏幕截图所示。**选择插入空格**后，您将被认为是争论的空格，因为空格会保存到实际文件中。

![在此处输入图像描述](../Images/79a52db3567856ea7f899b7143988cc1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:54:20.463

你会使用空格。当您点击制表符按钮时，Visual Studio 将输入 4 个空格字符而不是制表符字符。如果您在选项的选项卡部分选择了“保留选项卡”，则每次按下选项卡按钮都会输入一个选项卡字符。

# powershell - Start service on another machine without credentials

> ID：11655390
> 
> 赞同：1
> 
> 时间：2012-07-25T17:35:29.760
> 
> 标签：powershell

I've spent the better part of yesterday and this morning looking into this. I've come across Powershell, psexec, and WMI in my research. Nothing seems to work without having credentials of the second computer.

All I want to do is simply stop a service, and then start a service on another machine in the domain where I work. Without credentials, I keep getting "Access Denied" errors.

Does anyone know if this is possible without credentials? I'd prefer a Powershell suggestion, but I'll gladly listen to all suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:33:50.243

[`Get-Service`](http://technet.microsoft.com/library/hh849804.aspx)可以使用、[`Stop-Service`](http://technet.microsoft.com/library/hh849790.aspx)和[`Start-Service`](http://technet.microsoft.com/library/hh849825.aspx)cmdlet轻松访问域内远程计算机上的 Windows 服务并对其执行操作...

```
$remoteService = Get-Service -ComputerName $remoteHost -Name $serviceName;
Stop-Service -InputObject $remoteService;
# Perform additional processing...
Start-Service -InputObject $remoteService; 
```

...但是您需要成为`$remoteHost`. `*-Service`cmdlet 不提供用于指定备用凭据的参数，因此它在用户运行时连接`powershell.exe`。即使您可以作为非管理员用户连接，您仍然需要成为管理员才能停止和启动服务。

# java - Shutdown executor without executorService in Java

> ID：11655396
> 
> 赞同：0
> 
> 时间：2012-07-25T17:35:43.847
> 
> 标签：java, shutdown, executor

Is there a way to shutdown an `Executor` in Java without first casting it to `ExecutorService`? Basically i have a class called `Exx` that `implements Executor`. I want to shutdown Exx. How would I do that? Essentially, I need to know how to shutdown an `Executor`.

EDIT: Example:

```
class Exx implements Executor{
    @Override
    public void execute(Runnable r) {
        new Thread(r).start();
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:42:48.720

特定接口的`Executor`本质是不需要关闭的东西。例如，这里是最基本的实现`Executor`。

```
class NearlyPointlessExecutor implements Executor {
    public void execute(Runnable r) {
        r.run();
    }
} 
```

很明显，在上面的代码中，没有什么复杂到需要关闭任何东西，但提供的类完全符合`Executor`接口。

如果您的实现确实需要关闭，那么您的选择是创建自己的接口或实现`ExecutorService`。

**问题编辑更新：**

在提供的代码的情况下，不可能关闭正在创建的线程，因为对它们的引用没有保存在集合中。

但是，有一个解决方案，提供的实现与使用提供的实现基本相同：[Executors.newCachedThreadPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29)。放弃您自己的实现并改用这个。

# jquery-plugins - struts2 jquery remote tab and sj:div

> ID：11655397
> 
> 赞同：2
> 
> 时间：2012-07-25T17:35:48.847
> 
> 标签：jquery-plugins, struts2

```
<sj:tabbedpanel id="remotetabs" selectedTab="2" animate="true" 
  collapsible="true" sortable="true">
    <sj:tab id="tab1" href="myAction.action" label="Search"/>
</sj:tabbedpanel> 
```

myAction.action.... returns jsp... with a form

```
<s:form id="searchForm"   >

  fields..........

 <sj:div  formIds="searchForm" href="test.jsp"  />

</s:form > 
```

If I use IE 8, the div calls test.jsp with ajax and test.jsp gets the form parameters and returns fine.

Using FIREFOX, the div calls test.jsp with ajax BUT test.jsp *DOES NOT* get any of the form parameters, and returns.

WHY does test.jsp *NOT get the form parameters* using FIREFOX?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T20:07:18.010

已修复，有一些格式错误的 html。我猜firefox更严格

# matlab - The expression to the left of the equals sign is not a valid target for an assignment - MATLAB

> ID：11655399
> 
> 赞同：0
> 
> 时间：2012-07-25T17:35:57.860
> 
> 标签：matlab

My code is given below i get this error :

```
The expression to the left of the equals sign is not a valid target for an assignment. 
```

It points to `Temp1(i) = ( ( X(i,1)*theta(i,1) + X(i,2)*theta(i,2) ) - y(i));`

I dont understand what is wrong here. Please help

```
Temp1 = zeros(m);
sum1 = 0;
for i = 1:1:m
{
    Temp1(i) = ( ( X(i,1)*theta(i,1) + X(i,2)*theta(i,2) ) - y(i));

    sum1 = sum1 + (Temp1(i)^2);
}

J = sum1 / (2*m);
fprintf(' The value of J = ');
fprintf('%f', J);
return J; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:18:37.550

您可以将整个代码矢量化为：

```
J = sum( (sum(X.*theta,2) - y).^2 ) ./ (2*m); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:39:37.420

您的代码应阅读

```
Temp1 = zeros(m);
sum1 = 0;
for i = 1:1:m

    Temp1(i) = ( ( X(i,1)*theta(i,1) + X(i,2)*theta(i,2) ) - y(i));

    sum1 = sum1 + (Temp1(i)^2);
end

J = sum1 / (2*m);

fprintf(' The value of J = ');
fprintf('%f', J); 
```

即您不使用大括号，而是 for 循环具有以下语法：

```
for i=1:10
    .
    .
    .
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:41:02.100

尽管这可能无法直接回答您的问题，但我相信您可能对调用`zeros(m)`. 这实际上会产生一个`m x m`零矩阵。根据上面的代码，您似乎只是将 temp 变量视为向量。尝试`zeros(m,1)`制作一个矢量。

# opencv - 在 OpenCV 中访问 3D 矩阵的 2D 平面

> ID：11655404
> 
> 赞同：4
> 
> 时间：2012-07-25T17:36:22.023
> 
> 标签：opencv

我有一个尺寸为 25（行）x 320（列）x 235（通道）的 3D 矩阵

对于 25 行中的每一行，我想提取 2D 切片 (320 x 235)，以便我有 25 个 2D 矩阵。

我不确定如何在 OpenCV 中执行此操作。

我想转置 3D 矩阵，使我有 320（行）x 235（列）x 25（通道），然后使用 split 来获得 25 个矩阵，但转置似乎不起作用（MATLAB 甚至不允许在多维数组上转置）

然后我尝试重塑无济于事。

是否可以使用 NAryMatIterator？或者是否有任何其他方式来执行此过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:46:57.120

您可以使用 row() 函数来获取给定行的新标题，只需在每一行上调用 if 并存储它们。这是一个 O(1) 操作，因为没有数据被复制，请注意您所做的任何更改都将反映在原始矩阵中。可能有更优雅的解决方案，但我不知道。其余的取决于你想如何存储你的 25 个矩阵（在数组、向量、任何你想要的东西中）。可以在[此处](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)找到 Mat 文档，尽管它的结构不是非常好。

# android - Ant build failing with "UNEXPECTED TOP-LEVEL EXCEPTION (already added)"

> ID：11655405
> 
> 赞同：3
> 
> 时间：2012-07-25T17:36:27.077
> 
> 标签：android, ant

I've seen a lot of threads about this error, but none that cover my strange scenario. First the basics:

I've got 6 projects, all of which are scaled down test projects that mimic my application's structure and which I'm using just to try to get the build working. Their dependencies are as follows:

*   *exampleLib* is a library that requires no other jars
    *   contains Widget.java
*   *exampleLib2* is a library that requires no other jars
    *   contains Widget2.java
*   *exampleLibNester* is a library that requires *exampleLib* and *exampleLib2*
    *   contains WidgetPartDeux.java
*   *exampleLibNester2* is a library that requires *exampleLib*, *exampleLib2*, and *exampleLibNester*
    *   contains WidgetPartDeux2.java
*   *exampleUser* is an application that requires *exampleLib*, *exampleLib2*, *exampleLibNester*, and *exampleLibNester2*
    *   contains TheActivity.java
*   *exampleTest* is a test application that instruments *exampleUser* and requires *exampleLib*, *exampleLib2*, and *exampleLibNester*
    *   contains WidgetTest.java

When I build these applications using ant locally on windows they run fine and I can use `install test` to run the tests. When I try to build them on my CI server, which is running linux, I get the dreaded "already added" error message.

```
-dex:
  [dex] Converting compiled files and external libraries into /apps/pos360/jenkins/.hudson/jobs/James-Test/exampleLibUser/bin/classes.dex...
   [dx]
   [dx] UNEXPECTED TOP-LEVEL EXCEPTION:
   [dx] java.lang.IllegalArgumentException: already added: Lcom/example/nester/WidgetPartDeux;
   [dx]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
   [dx]     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
   [dx]     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
   [dx]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
   [dx]     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
   [dx]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
   [dx]     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
   [dx]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
   [dx]     at com.android.dx.command.dexer.Main.run(Main.java:206)
   [dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
   [dx]     at com.android.dx.command.Main.main(Main.java:91)
   [dx]
   [dx] UNEXPECTED TOP-LEVEL EXCEPTION:
   [dx] java.lang.IllegalArgumentException: already added: Lcom/example/lib/Widget;
   [dx]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
   [dx]     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
   [dx]     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
   [dx]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
   [dx]     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
   [dx]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
   [dx]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
   [dx]     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
   [dx]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
   [dx]     at com.android.dx.command.dexer.Main.run(Main.java:206)
   [dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
   [dx]     at com.android.dx.command.Main.main(Main.java:91)
   [dx] 2 errors; aborting 
```

I can look in the classes.jar files and see that exampleLibNester2 is pulling those classes into its jars, but I don't know how to prevent it from doing that nor why it does it on the linux box but not the windows one. Both SDKs have been updated to the latest version.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:35:05.570

据我了解，Android 构建的项目结构从 R14 开始发生了变化。

我建议查看您的项目构建路径并删除以 _src 结尾的所有文件夹，根据这篇文章： [@foxykeep：如何修复“转换为 Dalvik 格式失败”](http://android.foxykeep.com/dev/fix-the-conversion-to-dalvik-format-failed-with-error-1-with-adt-14)。尽管有错误名称，但堆栈跟踪是相同的错误，并且看起来是相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T01:32:19.423

在库项目中构建 .jar 文件时。不要在文件 AndroidManifest.xml 上添加任何权限（纯 AndroidManifest 就足够了）。只需将您需要的所有权限添加到您的主项目清单文件中。

或者你可以简单地将你的库项目导入你的主项目而不使用 .jar。

# c# - 有什么方法可以衡量工作在核心之间的分布情况吗？

> ID：11655406
> 
> 赞同：1
> 
> 时间：2012-07-25T17:36:28.270
> 
> 标签：c#, .net, performance, parallel-processing, task-parallel-library

我想知道，是否有任何可靠的方法可以查看（或测量）我的应用程序的工作分配到服务器内核的情况？想到的唯一（非常不科学的）选项是：

1.  “目测”任务管理器中的 CPU 图
2.  让应用程序`Thread.CurrentThread.ManagedThreadId`在每项工作完成后不断向控制台输出

肯定有更好的选择吗？

**背景：** 我的应用程序监听传入的数据包，做一些内存工作，并将内容写入数据库。我的目标平台是具有四个内核的 Windows Server 机器。我的应用程序的第一个版本显然大量使用了一个内核，而其他三个大部分都处于空闲状态。我部署了第二个版本`Task.Factory.StartNew()`，试图在每次收到数据包时在其他内核之间分配工作。现在看起来所有内核都比我的第一个应用程序中的单内核更忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:24:14.053

> Concurrency Visualizer 使您能够查看多线程应用程序如何与其自身、硬件、操作系统和计算机上的其他进程进行交互。这些视图提供图形、表格和文本数据，显示程序中的线程与整个系统之间的时间关系。

[http://msdn.microsoft.com/en-us/library/dd537632.aspx](http://msdn.microsoft.com/en-us/library/dd537632.aspx)

# windows - 带有 url 的 Wp7 启动 MarketPlace 详细信息

> ID：11655407
> 
> 赞同：0
> 
> 时间：2012-07-25T17:36:36.120
> 
> 标签：windows, windows-phone-7

是否可以在我的应用程序的市场详细信息页面上使用 url（包含应用程序的 id）而不是使用 MarketplaceDetailTask​​ 启动 Internet Explorer？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:22:33.873

是的，如果您有应用的市场网址，您可以。然后，它只是在您的应用程序中嵌入一个将启动浏览器的链接。

```
<HyperlinkButton TargetName="_blank" NavigateUri="http://www.windowsphone.com/en-US/marketplace/" Content="Option 1"/> 
```

[导航到网址](http://www.windowsphonegeek.com/tips/How-to-Navigate-to-an-external-URL-in-WP7)

但问题是，为什么要引导用户这样做，当使用 MarketplaceDetailTask​​ 时会将他直接引导到市场，在那里他可以看到相同的信息并能够直接购买应用程序？

# linux - Xen 和 Linux 在 root 时无法创建目录

> ID：11655412
> 
> 赞同：0
> 
> 时间：2012-07-25T17:37:04.827
> 
> 标签：linux, xen

这个问题很简单。我用谷歌搜索并没有看到任何帮助。

```
root@sdna-23 :) #pwd
/sys/hypervisor
root@sdna-23 :) #whoami
root
root@sdna-23 :) #mkdir test
mkdir: cannot create directory `test': No such file or directory  
root@sdna-23 :( # 
```

.....为什么？我想将文件复制到此目录中……那也行不通……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:40:38.747

sysfs 和 procfs 等伪文件系统由内核管理，因此不能由用户空间修改（除了少数例外）。

为什么要修改`/sys/hypervisor`目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:39:39.337

确保您现在所在的目录（/sys/hypervisor）没有被某人或某事删除。

# php - 单击事件以从 Google Maps API V3 上的 SQL 数据库中获取信息

> ID：11655418
> 
> 赞同：0
> 
> 时间：2012-07-25T17:37:20.583
> 
> 标签：php, javascript, sql, google-maps-api-3

我正在尝试设置我的谷歌地图，以便人们可以单击地图上的某个位置，然后根据该区域的纬度和经度获取该区域的信息。所有这些数据都存储在 SQL 数据库中。有人可以让我朝着正确的方向开始吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:44:49.920

[阅读有关 SQL 地理类型的信息](http://msdn.microsoft.com/en-us/library/bb895266%28v=sql.105%29.aspx)

# ruby-on-rails - 根据 rails 中的表单更改表格的显示

> ID：11655422
> 
> 赞同：1
> 
> 时间：2012-07-25T17:37:47.450
> 
> 标签：ruby-on-rails, json, ruby, html-table

我有一些 JSON，我将其拉入并读入一个 object `@items`。第二个对象，比如“items_old”，保存昨天的项目。：

```
[
 {
  {
    "id": "A",
    "description": "a_description_one"
    "value": some_alphanumeric_string
  }, 
  {
    "id": "B",
    "description": "b_description_one"
    "value": some_alphanumeric_string
  }, 
  {
    "id": "C",
    "description": "c_description_one"
    "value": some_alphanumeric_string
  }
 }, 
 {
  {
    "id": "A",
    "description": "a_description_3"
    "value": some_alphanumeric_string
  }, 
  {
    "id": "B",
    "description": "b_description_3"
    "value": some_alphanumeric_string
  }, 
  {
    "id": "C",
    "description": "c_description_3"
    "value": some_alphanumeric_string
  }
 }, 
 ...
] 
```

我的目标是在 HTML 中输出一个表格，如下所示：

```
 ----------------------------------------------------
|  C value  | C description  |  Count       | Change |
|----------------------------------------------------|
|some string|it's description|times appeared| change |
 ---------------------------------------------------- 
```

该表的工作方式如下：在索引文件的某处，有一个下拉框，其中包含上面代码中的所有 id（即 A、B、C）。选择一个选项后，将加载一个类似于上面的表格。它获取所选 id 的每个值并将其放入表中。当一个值出现两次时，它被连接成一个项目，并且计数增加。将计数与前一天的计数进行比较，并显示差异。

# php - 包括功能部分不工作而没有修改

> ID：11655426
> 
> 赞同：0
> 
> 时间：2012-07-25T17:38:01.083
> 
> 标签：php

**背景** 最近，我们升级了我们的 Web 服务器 (PHP 5.3.3)，将其替换为新服务器 (PHP 5.3.3)，并且至少有一个包含函数停止工作。

在此站点上的响应之后，我将包含函数从“include('requested_pa​​ge');”更改为 到 "getcwd()."/".$_SESSION['requested_pa​​ge'];" 这解决了这个问题。

getcwd() 返回“var/lib/vhost/httpdocs/

**问题**

php.ini（或其他地方）中是否有需要更改以允许包含函数在不添加 getcwd() 的情况下工作的设置？

**信息：** 旧服务器：Centos 5，新服务器 Centos 6，两台服务器都运行 PHP 5.3.3 和 Plesk 11

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:40:58.553

您应该能够使用该[`include_path`](http://www.php.net/manual/en/ini.core.php#ini.include-path)指令来设置目录以查找包含的文件。

> 指定 require、include、fopen()、file()、readfile() 和 file_get_contents() 函数查找文件的目录列表。格式类似于系统的 PATH 环境变量：在 Unix 中用冒号分隔的目录列表，在 Windows 中用分号分隔。
> 
> 在查找要包含的文件时，PHP 会分别考虑包含路径中的每个条目。它将检查第一个路径，如果找不到，则检查下一个路径，直到找到包含的文件或返回警告或错误。您可以在运行时使用 set_include_path() 修改或设置包含路径。

# facebook - 如何从 Facebook 提要创建 WordPress 帖子？

> ID：11655428
> 
> 赞同：0
> 
> 时间：2012-07-25T17:38:07.983
> 
> 标签：facebook, wordpress

我有一个客户想从他们的 Facebook 粉丝页面拍摄照片，并将每张照片作为单独的帖子导入 WordPress。我对 WordPress 和 PHP 比较陌生，所以我不知道该怎么做。是否有一个插件已经这样做了，还是我必须自己编写代码？

我创建了一个 Facebook 应用程序，可以通过 Graph API 获取图片。但是，我不确定如何将它们变成帖子。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:55:34.050

尝试迭代数据和 wp 函数 wp_insert_post();

例如

```
$postarr = array('post_status' => 'draft', 'post_type' => 'post', 'post_author' => $user_ID,
 'ping_status' => get_option('default_ping_status'), 'post_parent' => 0,
 'menu_order' => 0, 'to_ping' =>  '', 'pinged' => '', 'post_password' => '',
 'guid' => '', 'post_content_filtered' => '', 'post_excerpt' => '', 'import_id' => 0,
'post_content' => '', 'post_title' => '');

wp_insert_post($postarr); 
```

# macos - network-outbound 被网络授权拒绝

> ID：11655430
> 
> 赞同：2
> 
> 时间：2012-07-25T17:38:28.280
> 
> 标签：macos, cocoa, openssh, appstore-sandbox

我正在尝试将我的 OS X 应用程序沙箱化。

我的应用程序使用 NSTask 创建一个 SSH 隧道。

我已允许 com.apple.security.network.client 和 com.apple.security.network.server 权利，但在创建隧道时仍然出现网络出站错误。

错误如下：

```
25/07/12 18:26:02,488 sandboxd[10677]: ([10676]) ssh(10676) deny network-outbound /private/tmp/launch-1nsmBH/Listeners 
```

该报告未显示任何相关信息：

```
ssh(10676) deny network-outbound /private/tmp/launch-1nsmBH/Listeners

Process:         ssh [10676]
Path:            /usr/bin/ssh
Load Address:    0x100000000
Identifier:      ssh
Version:         ??? (???)
Code Type:       x86_64 (Native)
Parent Process:  SSH Tunnlr [10604]

Date/Time:       2012-07-25 18:26:02.482 +0100
OS Version:      Mac OS X 10.8 (12A269)
Report Version:  8

Thread 0:
0   libsystem_kernel.dylib          0x00007fff9064fa86 __connect + 10
1   ssh                             0x0000000100017251
2   ssh                             0x00000001000140ec
3   ssh                             0x0000000100011722
4   ssh                             0x000000010000e3ff
5   libdyld.dylib                   0x00007fff90d837e1 start + 0

Binary Images:
   0x100000000 -        0x10004eff7  ssh (175) <97628AED-06A6-3407-9787-148A2FF59925> /usr/bin/ssh
0x7fff9063e000 -     0x7fff90659ff7  libsystem_kernel.dylib (2050.7.9) <E0447BF5-E104-35B0-B28B-4156887D58F1> /usr/lib/system/libsystem_kernel.dylib
0x7fff90d81000 -     0x7fff90d84ff7  libdyld.dylib (210.2.3) <F59367C9-C110-382B-A695-9035A6DD387E> /usr/lib/system/libdyld.dylib 
```

作为记录，这是我的权利清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>com.apple.security.app-sandbox</key>
<true/>
<key>com.apple.security.network.client</key>
<true/>
<key>com.apple.security.network.server</key>
<true/>
<key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
<array>
    <string>com.apple.ssh</string>
    <string>com.apple.sshd</string>
</array> 
```

这里的一只手会非常非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T20:30:43.663

没关系。那个控制台错误误导了我。即使它出错了，它也可以工作。

# c# - 如何访问用于从代码隐藏中填充 XAML 类的 DataContext 的属性/方法？

> ID：11655440
> 
> 赞同：2
> 
> 时间：2012-07-25T17:39:01.790
> 
> 标签：c#, wpf, xaml, mvvm, savefiledialog

我想在后面的代码中使用 SaveFileDialog 来使用 ViewModel 中包含的数据编写文件。我正在使用的 XAML 类由父类的列表框中的选择填充：

```
 <Views:ChildView DataContext="{Binding Path=SelectedItem, ElementName=childrenListbox}"></Views:ChildView > 
```

然后，在 ChildView XAML 文件中，我可以按预期自由访问 ChildViewModel 的属性/方法。但是，我不知道如何从后面的代码中访问它们。我有一个“保存文件”按钮

```
 <Button Content="Save File" Click="Button_Click"></Button> 
```

其事件在后面的代码中处理：

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.SaveFileDialog dlg = new Microsoft.Win32.SaveFileDialog();
        dlg.FileName = "Document";
        dlg.DefaultExt = ".txt";
        dlg.Filter = "Text documents (.txt)|*.txt";

        Nullable<bool> result = dlg.ShowDialog();

        if (result == true)
        {
            string filename = dlg.FileName;
            //Here I would like to call the SaveFile function in ChildViewModel
        }
    } 
```

我尝试查看所有可用属性，但找不到访问正在使用的 ChildViewModel 实例的方法。这个问题可能有一个简单的解决方案，但我不熟悉使用代码隐藏，因为我正在创建我的第一个公会并且我一直在使用 MVVM 方法。我将非常感谢任何帮助我找到有效解决方案的答案。另外，如果有办法避免它并仅使用 XAML 获得 SaveFileDialog，请随时批评我使用 MVVM 背后的代码（然后我可以轻松地在 ModelView 中保存文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:43:36.737

不确定您在哪里设置 ViewModel，因为您没有显示它的代码，但通常它位于`DataContext`根元素的属性上。所以你可以像那样施放它。

```
var viewModel = (ChildViewModel)this.DataContext; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T17:48:47.267

您可以尝试不同的方法：

获取按钮的命令

```
public abstract class MyCommandBase : ICommand
{
    public abstract bool CanExecute(object o);
    public abstract void Execute(object o);

    public MyViewModel ViewModel { get; set; }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
}

public class ButtonClickCommand : MyCommandBase
{
    public ButtonClickCommand(MyViewModel vm)
    {
        base.ViewModel = vm;
    }

    public override bool CanExecute(object o)
    {
        return true;
    }

    public override void Execute(object o)
    {
        var context = this.ViewModel as MyViewModel;
        MessageBox.Show("Button was clicked for" + context.Id);
    }
} 
```

在您的 ViewModel 中构建该命令的实例并为此创建一个公共属性。

在您的 XAML 中，它只是

```
<Button Focusable="False" Command="{Binding CmdClickMyButton}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0"> 
```

这样，当单击按钮时，您将直接返回 ViewModel，获得所需的所有信息。将数据保存到文件不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:42:35.603

也许这会有所帮助：

`((YourViewModelClass)YourControl.DataContext).SaveFile();`

问候

**编辑：**

根据您的示例：

`((ChildViewModel)ChildView.DataContext).SaveFile();`

如果您想在 ChildView 的代码隐藏中使用此代码，它将是：

`((ChildViewModel)this.DataContext).SaveFile();`

# r - expand.grid() 中的奇怪错误

> ID：11655441
> 
> 赞同：8
> 
> 时间：2012-07-25T17:39:03.563
> 
> 标签：r

我已经`expand.grid`使用 `eval(parse(...))`.

简而言之：

```
len <- 36
Text <- paste("pos <- expand.grid(",
  paste(rep("c(TRUE,FALSE)", len), collapse=","), ")", sep="")
eval(parse(text = Text)) 
```

给我

```
Error in rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) : 
invalid 'times' value
In addition: Warning message:
In rep.int(rep.int(seq_len(nx), rep.int(rep.fac, nx)), orep) :
NAs introduced by coercion 
```

与变量中/`len`的组合数相反。`TRUE``FALSE``pos`

我忽略了一些简单的东西，或者可能不是......？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T17:57:17.603

`eval`正如我在评论中所说，这与or无关`parse`。错误在`expand.grid`. 问题是 R 的最大向量长度是 2^31-1 并且`rep.int`试图创建一个 2^36 长度的向量。

# delphi - Tan函数在哪里？

> ID：11655442
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:39:03.597
> 
> 标签：delphi, trigonometry

我想制作一个弹丸运动计算器，但我注意到`tan`没有声明，即使`sin`并且`cos`是。

[Delphi Basics](http://www.delphibasics.co.uk/RTL.asp?Name=Tan)告诉我应该声明它，但我没有看到它。

它在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T17:40:31.130

它[在*数学*单元](http://docwiki.embarcadero.com/Libraries/en/System.Math.Tan)中，就像你引用的页面说的那样。（查看页面右上角。）

`Sin`并`Cos`在*系统*单元中定义，因为它们是汇编程序系统调用，而`Tan`经典地实现为简单的*sin* θ / *cos* θ。如今，`Tan`它也在汇编器中实现，但由于它最初是在*数学*单元中定义的，所以它继续存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:42:13.787

尝试 Math.Tan 或将 Math 添加到您的 uses 子句中。

# python - cgi.FieldStorage 保持为空

> ID：11655457
> 
> 赞同：0
> 
> 时间：2012-07-25T17:39:42.143
> 
> 标签：python, cgi, wsgi

我正在尝试设置使用 mod_wsgi 上传 xml 文件的可能性。为此，我构建了一个像这样的公式：

```
 <form action="upload.py" method="post" enctype="multipart/form-data">
      <input name="file" type="file" accept="text/xml"><br/>
      <input type="submit" value="upload">
 </form> 
```

和一个文件`upload.py`：

```
 ..
 form = cgi.FieldStorage(fp=environ['wsgi.input'], 
                         environ=environ, 
                         keep_blank_values=True)
 fileitem = form['file']
 .. 
```

但是，这在访问表单中的“文件”时给了我一个键错误。印刷`environ['wsgi.input'].read(request_body_size)`显示：

```
------WebKitFormBoundaryeplWkFZe2clFMtgf
Content-Disposition: form-data; name="file"; filename="file.xml"
Content-Type: application/octet-stream

<?xml version="1.0" ?>
.... 
```

因此， wsgi.input 似乎是有效的。调试暴露了这一点`cgi.FieldStorage() = FieldStorage(None, None, [])`。你知道问题出在哪里吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-05T12:15:59.870

我注意到了同样的情况并放置了线条：

```
request_body_size = int( environ.get('CONTENT_LENGTH') )
print environ['wsgi.input'].read(request_body_size) 
```

*在*调用`cgi.FieldStorage()`with`wsgi.input`作为参数之前，它会显示正文。显然，`wsgi.input`fileIO-object 在 FS 内部被消耗，之后就无法读取它。在将它与 FS 一起使用之前，我尝试阅读它两次，并且发生了同样的情况，只有第一次有效。

编辑：是的，而且更糟的是， wsgi.input 没有实现 .seek() 方法来将其重新开始。唯一合理的方法是将其复制到 io.BytesIO 类实例中并将*其*提供给FS。以后可以用 .seek() 来回退，无论如何。请注意，可以使用 StringIO 但如果您正在上传二进制文件，则会中断。

# php - 如何检测字体中定义的字符？

> ID：11655462
> 
> 赞同：6
> 
> 时间：2012-07-25T17:40:04.900
> 
> 标签：php, html, css, character, font-face

我正在制作一个简单的工具来帮助使用 css 图标字体。

目前，它采用指定的wingdings风格字体，并在我从unicode数字33开始时，将它与每个unicode数字并排显示，与标准系统字体（例如arial）并排表示-255。

正如那些熟悉字体和字符编码的人已经猜到的那样，这些地方很多都是空的。这是一个例子： ![在此处输入图像描述](../Images/73486c8d6f11d8d424efd9b5bb321096.png)

正如你所看到的，这个字体真正值得显示的字符是少数，而且这个 unicode 范围内的许多字符甚至不会出现在默认的无衬线字体中。这不是关键的东西，无论如何都会显示所有可用的字符，但纯粹出于好奇，我很想知道是否有办法判断字体中表示哪些字符。有人知道解决方案吗？

理想情况下，首选服务器端解决方案，任何您喜欢的语言。然而，任何解决方案都是有价值的。

出于好奇，我现有的代码在 github 上：[Font Looper](https://github.com/daveycakes/font-looper)

我希望平面文件的演示不会太冒犯任何人，我正在努力保持这个简洁和刻薄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:41:16.117

我相信您要查找的信息在`CMAP`字体表中。我不是字体专家，但我的理解是该`CMAP`表将 unicode 点映射到字形索引。因此，如果没有映射到 unicode 点的字形，则可以假定字体不支持该字符。

这是我使用 WPF 媒体库找到的一些示例 C# 代码：

```
var fontFamilies = System.Windows.Media.Fonts.GetFontFamilies(@"C:\Windows\Fonts\Arial.ttf");

foreach (var family in fontFamilies)
{
    foreach (var typeface in family.GetTypefaces())
    {
        var glyph = null as System.Windows.Media.GlyphTypeface;

        if (typeface.TryGetGlyphTypeface(out glyph))
        {
            foreach (var kvp in glyph.CharacterToGlyphMap)
            {
                Console.WriteLine(kvp.Key.ToString() + " : " + kvp.Value.ToString());
            }
        }
    }
} 
```

不知道这对您有多大帮助，但您确实说过任何语言/解决方案都是有价值的。

所有这些类都可以在作为**PresentationCore.dll**程序集一部分的[System.Windows.Media 命名空间](http://msdn.microsoft.com/en-us/library/system.windows.media.aspx)中找到。

# scons - Scons - 如何在 Install() 之后运行命令

> ID：11655464
> 
> 赞同：0
> 
> 时间：2012-07-25T17:40:12.477
> 
> 标签：scons

### 背景

我们的构建脚本使用`Install()`并将`InstallAs()`许多 .dylib 和 .so 文件安装到“dist”目录。

```
Install(dist_dir, 'libfoo')
Install(dist_dir, 'libbar')
... 
```

### 问题

将库文件复制到 dist_dir 后，我们希望对每个文件运行自定义函数。该自定义命令如下：

```
def add_magic(lib_filename, arg1, arg2, arg3) 
```

我们感谢任何帮助实现我们的目标。

### 到目前为止，我们尝试了什么？

*   我们刚刚开始研究通过 Builder() 创建自定义构建器
*   我们还查看了 Command() 构建器
*   我们还查看了创建伪构建器的 AddMethod() 函数

现在我们的赌注是前两种方法，我们正在阅读用户指南并研究简单的例子。我们还没有走到尽头，感谢任何提示/提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:18:58.850

你可以尝试这样的事情：

```
AddPostAction(target, action)
env.AddPostAction(target, action) 
```

> 安排在指定目标构建后执行指定的操作。指定的动作可以是一个动作对象，或者任何可以转换成动作对象的东西（见下文）。
> 
> 当提供多个目标时，可能会多次调用该操作，每次在列表中生成一个或多个目标的操作之后调用一次。

例子：

```
installBarCmd = Install(dist_dir, 'libbar')
AddPostAction(installBarCmd, Action(...)) 
```

# npapi - 我需要自己实现 NPN 功能吗？

> ID：11655465
> 
> 赞同：0
> 
> 时间：2012-07-25T17:40:15.050
> 
> 标签：npapi, browser-plugin, npruntime

我的头文件来自：[http ://code.google.com/p/npapi-sdk/source/browse/?r=7#svn%2Fwiki](http://code.google.com/p/npapi-sdk/source/browse/?r=7#svn%2Fwiki)

所以在 Initialize 方法中，我存储了一个指向所有浏览器 NPN 方法的指针，就像这样

```
static NPNetscapeFuncs* browser;

NPError NP_Initialize(NPNetscapeFuncs* browserFuncs)
{  
  /* Save the browser function table. */
  browser = browserFuncs;

  return NPERR_NO_ERROR;
} 
```

当我创建我的 NPClass 结构时，我是否应该为它分配已经存在的浏览器功能，如下所示：

```
struct NPClass class;
class.hasMethod = browser-> hasmethod;
etc. 
```

或者我是否需要使用浏览器函数实现 npruntimeheader 中的函数并以这种方式将它们分配给类。示例：class.hasMethod = NPN_HasMethod;

然后实现下面的函数：

```
bool NPN_HasMethod(NPP npp, NPObject *npobj, NPIdentifier methodName)
{
   return browser->hasmethod(npp, npobj, methodName);
} 
```

或者运行时标头中的 NPN 函数是否已经以某种方式实现？

我需要用 c 写这个，而且我认为使用 firebreath 对这个特定项目来说不是一个好主意。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:47:14.867

您需要`NPClass`自己为您的 es 实现这些功能，它们定义了可编写脚本的对象的行为。出租车司机 NPAPI 教程的[第三部分涵盖了这一点。](http://colonelpanic.net/2009/08/building-a-firefox-plugin-part-three/)

您通过`browser`函数表接收到的函数用于调用浏览器（并且已经在浏览器中实现），例如获取有关`NPObject`s 的信息`hasmethod`等。

但是，`NPN_HasMethod()`如果您想使用这些函数声明，您需要自己实现它们，最简单的方法是调用相应的函数，`browser`如`HasMethod()`.

# java - RPM 规格 如何避免重复

> ID：11655466
> 
> 赞同：2
> 
> 时间：2012-07-25T17:40:15.857
> 
> 标签：java, rpm

嗨，我在构建 rpm 包时遇到代码重复问题。

我有这样的规格：

```
Summary     : ${product.id} ${rpmType}
Name        : ${product.id}_${rpmType}
.....

%build
%install

%files
%defattr(-,root,java,750)
%{home}

%clean
rm -rf %{buildroot}

%pre
CHECK_PAUSE=2;
echo -n "Stopping tomcat";
sh %{binary}/shutdown.sh
rc=0
while [ "$rc" == 0 ]; do
    sleep $CHECK_PAUSE;
    wget -q -O /dev/null -S http://localhost:8080/some-server/test;
    rc=$?;
done;
echo "Tomcat:  STOPPED"
mv %{home}/%{warname} %{home}/%{warname}.`date +%Y%d%m`
rm -rf %{home}/some-server
echo done.

%post
CHECK_PAUSE=2;
echo -n "Starting tomcat";
sh %{binary}/startup.sh
rc=1
while [ "$rc" -ne 0 ]; do
   sleep $CHECK_PAUSE
   wget -q -O /dev/null -S http://localhost:8080/some-server/test
   rc=$?
done
echo "Tomcat:  STARTED"

%preun
    if [ "$1" == "0" ]; then
    #STOP TOMCAT HERE SAME WAY AS IN PRE
fi

%postun
if [ "$1" == "0" ]; then
    #START TOMCAT HERE SAME WAY AS IN POST
fi 
```

将在 preun 和 postun 部分执行的脚本与 pre 和 post 部分相同。但我不想只是复制/粘贴它们。是否有一些复杂的解决方案来避免代码重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:29:34.073

这是一个可能的解决方案：

1.  为每段可重用的 shell 脚本代码创建单独的文件。

2.  创建一种预处理器（可能是另一个 shell 脚本），将上面步骤 1 中创建的文件插入到适当的 scriplet 标签下的规范文件中（即 %pre、%post、%preun、%postun）。

如果您使用的是源代码控制管理系统，您可能还想跟踪这些附加文件。

# vba - 如何强制设置范围的打印页数（本例中为 2 页）

> ID：11655474
> 
> 赞同：0
> 
> 时间：2012-07-25T17:40:37.917
> 
> 标签：vba, excel

如何强制 Excel VBA 中的一个范围说（“a1：z60”）仅打印来自（“a1：z40”）的两页页面（1）和来自（“a41：z60”）的页面（2）。

另外，我如何强制相同的范围说（“a1：z60”）仅打印来自（“a1：p60”）的两页页面（1）和来自（“q1：z60”）的页面（2）。

此外，我希望我的两页中的每一页都尽可能地放大（在给定条件下）。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:07:39.083

要在页面上打印选择：

```
Range("A1:E44").Select
With ActiveSheet.PageSetup
    .FitToPagesWide = 1
    .FitToPagesTall = 1
End With
Selection.PrintOut Copies:=1 
```

将范围更改为您需要的任何范围，并将页面宽度和高度更改为您希望页面的显示方式

# perl - Perl 根据用户输入结束循环/代码块 (!die/exit)

> ID：11655478
> 
> 赞同：2
> 
> 时间：2012-07-25T17:40:52.487
> 
> 标签：perl, exit, terminate, die

当我在玩一些我编码的东西时，我提出了一个一般性问题。我想知道除了 die() 之外，是否有任何方法可以根据用户反馈终止程序的特定部分（如果我在这里误用了术语，我深表歉意）；因为这结束了整个程序。

这是代码：

```
if ($choice eq 'y'){
print "\nHit diagnostics: \n";
{
my $hitList=@hitList;
for (my $i=0; $i<$hitList; $i++){
    print $hitList[$i]."\n";
    #segmented listout of misses with interrupt 
    if(($i%4) eq 0){
        print "CONTINUE or Q to end\n";
        my $next=<>;
        chomp($next);
        if(lc($next) eq 'q'){
            **die "Killing request...\n";**
            }
        }
    }
} 
```

所以基本上我只是希望用户能够结束模数 if 循环，如果他们在某个时候决定他们实际上不想看到整个列表但仍然能够继续（之后还有一个错过提示） ) 与程序。

最好的方法是使用变量作为“开关”来确定命中列表是否应该继续？只是想知道是否有更可接受/更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:42:46.237

```
for my $i (0..$hitList-1) {
   ...
   if (...) {
       last;
   }
   ...
} 
```

[`last`](http://perldoc.perl.org/functions/last.html)

# perl - perl 一个衬垫来搜索模式

> ID：11655483
> 
> 赞同：3
> 
> 时间：2012-07-25T17:41:02.767
> 
> 标签：perl, design-patterns

我有一个文本文件

```
Hi
how are you
<blank>
<blank>
abcd
<blank>
defgh
opqr
<blank> 
```

我想打印所有具有“some text”blankblank“some text”之类的模式的行

```
how are you
<blank>
<blank>
abcd 
```

我正在考虑使用 join 然后搜索模式。但我不知道该怎么做。（空白是指空行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:48:27.507

*   空行：`/^(?:(?!\n)\s)*\n/m`
*   非空行：`/^.*\S.*\n/m`

因此，您要打印以下所有实例：

```
 /
    ^
    (?:
       .*\S.*\n
       (?: (?:(?!\n)\s)*\n ){2}
    )+
    .*\S.*\n
 /mx 
```

作为一个孤独的班轮：

```
 perl -0777ne'print /^(?:.*\S.*\n(?:(?:(?!\n)\s)*\n){2})+.*\S.*\n/mg' file 
```

* * *

如果所有空行都不包含空格，则可以简化一些：

*   空行：`/^\n/m`
*   非空行：`/^.+\n/m`

```
 perl -0777ne'print /^(?:.+\n\n\n)+.+\n/mg' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:48:08.970

也许我不明白这个问题。我认为您要问的是如何匹配具有相同文本（“某些文本”）的 2 个连续行并打印它们。

要做到这一点，你可以做这样的事情

假设文件存储为 $file 中的字符串

```
print "$1\n$1" while ($file =~ /(.*)(?=\n\1(?:\n|$))/mg); 
```

.* = 匹配任何东西，尽可能多地抓住

() = 捕获组，在这种情况下将 .* 存储到 $1

(?= ... ) = 向前看，这样字符串的那部分就可以在下一个匹配中使用

\1 = 在第一个捕获组中捕获的任何内容（即 $1）

(?: ... ) = 非捕获组

# javascript - 主干：视图与元素失去联系

> ID：11655484
> 
> 赞同：0
> 
> 时间：2012-07-25T17:41:08.290
> 
> 标签：javascript, backbone.js

我有某种 ViewCollection 可以呈现所有子视图。

```
define(
    ['jquery', 'underscore', 'backbone', 'text!templates/main/layout.html', 'text!templates/main/index.html', 'views/security/login', 'views/security/registration'], 
    function($, _, Backbone, LayoutTemplate, ContentTemplate, LoginView, RegistrationView) {

    var IndexView = Backbone.View.extend({

        tagName: "div",

        className: "container",

        template: LayoutTemplate,

        render: function() {
            this.$el.html(LayoutTemplate);

            this.$('div.content').html(ContentTemplate);
            this.$('div.sidebar').append(new LoginView().render().el);
            this.$('div.sidebar').append(new RegistrationView().render().el);

            return this;
        }

    });

    return IndexView;

}); 
```

这很好用！不幸的是，我注意到例如 LoginView 不能再处理事件了。

```
define(
    ['jquery', 'underscore', 'backbone', 'text!templates/security/login.html'], 
    function($, _, Backbone, LoginTemplate){

    var LoginView = Backbone.View.extend({

        tagName: "form",

        className: "login well",

        template: LoginTemplate,

        events: {
            "submit form.login": "submit" 
        },

        render: function(){
            this.$el.html(this.template);

            return this;
        },

        submit: function(e){
            e.preventDefault();

            var credentials = {
                'username': $(e.target[1]).val()
                , 'password': $(e.target[2]).val()
            };

            console.log(JSON.stringify(credentials));

            $.ajax({
                url: '/session'
                , type: 'POST'
                , contentType: 'application/json'
                , data: JSON.stringify(credentials)
                , success: function() {
                    window.Router.navigate('node', { trigger: true });
                }
                , error: function(xhr, status, error) {
                    console.log([xhr, status, error]);
                    $(e.target[1]).closest('div.control-group').addClass('error');
                    $(e.target[2]).closest('div.control-group').addClass('error');
                }
            });
        }
    });

    return LoginView;

}); 
```

浏览器没有发送 ajax 调用，而是尝试提交表单数据 url 编码为 GET 请求，这表明视图不再监听任何视图......

**是否可以选择如何将视图事件重新绑定到元素？**

登录.html

```
<fieldset>
    <legend>login</legend>
    <div class="control-group">
        <label class="control-label" for="_session_username">username:</label>
        <div class="controls">
            <input type="text" id="_session_username" name="session[username]" placeholder="george78" />
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="_session_password">password:</label>
        <div class="controls">
            <input type="password" id="_session_password" name="session[password]" placeholder="••••••" />
        </div>
    </div>
    <button type="submit" class="btn btn-primary">login</button>
</fieldset> 
```

表单标签也在视图中定义 .login 类属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:28:24.240

我找到了解决方案。

我们有一个范围界定问题。因为我直接在视图中定义了表单（tagName：“form”），所以最上面的对象是“form.login”。但是我们不能再通过选择器来解决这个问题了。我们只能选择子对象。（参见骨干内部）。

前：

```
 events: {
        'keyup form.login input': 'checkInput'
        , 'submit form.login': 'submit'
    }, 
```

后：

```
 events: {
        'keyup input': 'checkInput'
        , 'submit': 'submit'
    }, 
```

# java - 使用套接字传输/接收压缩数据：如何正确接收客户端发送的数据

> ID：11655486
> 
> 赞同：2
> 
> 时间：2012-07-25T17:41:13.740
> 
> 标签：java, sockets, client-server, chat, datainputstream

我使用 Sockets 开发了一个客户端-服务器聊天，效果很好，但是当我尝试使用 Deflate 压缩传输数据时它不起作用：输出为“空”（实际上它不是空的，但我将在下面解释）。

压缩/解压部分是 100% 工作的（我已经测试过了），所以问题肯定出在传输/接收部分的其他地方。

我使用以下方法将消息从客户端发送到服务器：

```
// streamOut is an instance of DataOutputStream
// message is a String

if (zip) { // zip is a boolean variable: true means that compression is active
    streamOut.write(Zip.compress(message)); // Zip.compress(String) returns a byte[] array of the compressed "message"
} else {
    // if compression isn't active, the client sends the not compressed message to the server (and this works great)
    streamOut.writeUTF(message);
}
streamOut.flush(); 
```

我使用这些其他方法从客户端接收到服务器的消息：

```
// streamIn is an instace of DataInputStream

if (server.zip) { // same as before: true = compression is active
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    byte[] buf = new byte[512];
    int n;

    while ((n = streamIn.read(buf)) > 0) {
        bos.write(buf, 0, n);
    }

    byte[] output = bos.toByteArray();
    System.out.println("output: " + Zip.decompress(output)); // Zip.decompress(byte[]) returns a String of decompressed byte[] array received
} else {
    System.out.println("output: " + streamIn.readUTF()); // this works great
} 
```

稍微调试一下我的程序，我发现 while 循环永远不会结束，所以：

```
byte[] output = bos.toByteArray();
System.out.println("output: " + Zip.decompress(output)); 
```

永远不会被调用。

如果我将这两行代码放在 while 循环中（在*bos.write()*之后），那么一切正常（它打印从客户端发送的消息）！但我认为这不是解决方案，因为收到的 byte[] 数组的大小可能会有所不同。因此，我认为问题出在接收部分（客户端实际上能够发送数据）。

所以我的问题变成了接收部分的while循环。我试过：

```
while ((n = streamIn.read(buf)) != -1) { 
```

即使有条件！= 0，但它和以前一样：循环永远不会结束，所以输出部分永远不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:51:34.317

-1 仅在套接字关闭或损坏时返回。您可以在发送压缩内容后关闭套接字，您的代码将开始工作。但我怀疑你想让套接字保持打开状态以获取更多（未来）聊天消息。因此，您需要一些其他方式让客户端知道离散消息何时已完全传输。就像帕特里克建议的那样，您可以在每个压缩有效负载之前传输消息长度。

不过，您也许可以利用 deflate 格式本身的某些东西。我认为它有一个流中的最后一个块标记。如果您使用的是 java.util.zip.Inflater ，请查看[Inflater.finished()](http://docs.oracle.com/javase/6/docs/api/java/util/zip/Inflater.html#finished%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:28:03.597

在流关闭之前，读取函数不会返回 -1。您可以做的是计算应该从服务器发送到客户端的字节数，然后在客户端读取该字节数。

计算字节数就像在实际消息之前发送从 Zip.compress 函数返回的字节数组的长度一样简单，然后使用 readInt 函数获取该数字。

使用此算法可确保您在解压缩之前读取正确的字节数，因此即使客户端实际读取 0 个字节，它也会继续读取，直到收到所需的所有字节。你可以做一个`streamIn.read(buf, 0, Math.min(bytesLeft, buf.length))`只读取你想要的字节数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:54:09.823

您的问题是您使用流的方式。您必须发送一些元数据，以便您的客户知道期望的数据是什么。理想情况下，您正在创建一个协议/状态机来读取流。对于您的示例，作为一个快速而肮脏的解决方案，发送诸如数据大小或终止序列之类的东西。

解决方案示例：
服务器：在压缩数据之前发送“数据大小”
客户端：等待“数据大小”字节。现在循环直到读取等于或大于“数据大小”值。就像是：

```
while( streamIn.ready() && dataRead < dataExpected)
{
    dataRead += streamIn.read(buf);
} 
```

当然你需要读取之前的dataExpected，使用类似的代码。

提示：如果您不介意丢失数据的可能性，您也可以使用 UDP。用数据报编程更容易......

# javascript - 如何查看用户是否点击了两个元素？

> ID：11655487
> 
> 赞同：0
> 
> 时间：2012-07-25T17:41:16.263
> 
> 标签：javascript, jquery

我正在制作一个选择菜单。我希望用户能够选择两个不同的选项，并根据他们选择的内容显示一些内容。现在，我只是使用图像来表示选择。我想知道是否有办法查看用户是否连续选择/单击了两个图像。用户单击两张图片后，我希望它们被重定向到另一个页面并显示一些内容。

```
/*clicked on certain two images*/(function(){
    document.location.href="#page";
    $('option').css('display', 'inline');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:49:45.330

使用一个类来标记选择，每次单击后，检查是否选择了两个：

```
$('img').click( function() {
   $(this).toggleClass('selected');

    if($('img.selected').length == 2) {
        alert("Two images selected!");
        // Or redirect to new page, etc.
    }
}); 
```

演示：

[http://jsfiddle.net/G9NXA/](http://jsfiddle.net/G9NXA/)

当然，这是一个通用的解决方案。您可能不想`img`用作选择器，而是使用其他定义可选择图像的类。

如果您想确保点击/选择是连续点击，只需在用户点击其他任何地方时清除选择：

演示：http: [//jsfiddle.net/G9NXA/1/](http://jsfiddle.net/G9NXA/1/)

如果你的意思是空间连续，而不是时间连续，这里是另一个例子：

演示：http: [//jsfiddle.net/G9NXA/2/](http://jsfiddle.net/G9NXA/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:46:28.457

如果您不想存储 javascript 状态，您可以尝试在单击时将标记类添加到所选图像并计算找到的数量然后重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:49:42.633

这是我想出的最简单的方法：

```
var tracker = [];

$('*').click(
    function(e){
        e.stopPropagation();
        var lastEl = tracker.length ? tracker.pop() : '',
            tag = this.tagName.toLowerCase();
        tracker.push(tag);
        if (tag == lastEl) {
            doSomething();
        }
        else {
            return false;
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XfHFn/)。

但是，这会将单击处理程序应用于*所有*元素（并防止事件的传播/冒泡，因此您应该在选择器中比我在这里更具体）；它还将每个单击元素的标记名称存储在一个数组中，然后将当前单击元素的标记名称与先前单击的项目的标记名称进行匹配。

如果两者相同，则`if`返回求值`true`并`doSomething()`执行；否则点击处理程序返回`false`，并且没有任何反应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:50:11.963

这取决于。如果图像是兄弟节点，您可以检查 .prev() 和 .next()。您可以使用“imageClicked”之类的类单击图像。然后检查 .prev() 或 .next() 是否也有该类。

```
$('img').click( function() {
    var clickedImg = $(this);

    clickedImg.toggleClass('imageClicked');

    if(clickedImg.hasClass('imageClicked')) {
        if(clickedImg.prev().hasClass('imageClicked') ||
        clickedImg.next().hasClass('imageClicked'))
            alert('Siblings Selected!');
    }
}); 
```

# php - PHP、AJAX：大数据被截断

> ID：11655489
> 
> 赞同：9
> 
> 时间：2012-07-25T17:41:20.537
> 
> 标签：php, ajax, apache, centos

## 问题

我正在使用 jQuery 将（相对）大量数据发布到我从 Ubuntu 迁移到 CentOS 的 Web 系统（一个痛苦的过程）。问题是正在接收的数据被截断。从服务器向客户端发送相同的数据不会导致截断。

“发送”的数据量（即我在调试 Javascript 时看到的）为 116,902 字节（正确的数据量），而接收的数据**量约**为115,668 字节：这个数字似乎有所不同，让我相信这个问题可能与时间有关。事务在大约 3.1 秒内完成（接收、响应），而不是很长的时间。我应该检查任何设置吗？

除了这个想法，我的 PHP 安装配置为接受 8M 的发布数据并使用 128M 的物理内存，这似乎足够了。

jQuery 代码如下。我很确定这不是问题，但我已按要求将其包括在内。

接收：

```
function synchronise_down()
{
    $.ajax({url: "scripts/get_data.php",
        context: document.body,
        dataType: "json",
        type: "POST",
        success: function(result)
            {
                // Fix the state up.
                update_data(result);

                // Execute on syncronise.
                execute_on_synchronise();
            },
        error: function(what, huh)
            {
                IS_WAITING = false;
            }
        });
} 
```

发送：

```
function synchronise_up()
{
    var serialised = MIRM_MODEL.serialise();
    LAST_SERIALISED = new Date().getTime();
    $.ajax({url: "scripts/save_model.php",
        context: document.body,
        dataType: "json",
        data: {"model":serialised},
        type: "POST",
        success: function(result)
            {
                // Fix the state up.
                update_data(result, true);

                // Execute on syncronise.
                execute_on_synchronise();
            },
        error: function(what, huh)
            {
                IS_WAITING = false;
            }
        });
} 
```

## 解决方法（不会将此称为解决方案）

编辑：我已经“修复”了这个，但不一定发现问题是什么以及如何解决它。这是一个有趣的问题，所以我将描述我的解决方法并将问题留待解决。

我正在做的不是让 jquery 处理我的大数据的序列化，而是我自己先做，本质上是序列化两次。代码如下：

```
function synchronise_up()
{
    var serialised = JSON.stringify(MIRM_MODEL.serialise());
    LAST_SERIALISED = new Date().getTime();
    $.ajax({url: "scripts/save_model.php",
        context: document.body,
        dataType: "json",
        data: {"model":serialised},
        type: "POST",
        success: function(result)
            {
                // Fix the state up.
                update_data(result, true);

                // Execute on syncronise.
                execute_on_synchronise();
            },
        error: function(what, huh)
            {
                IS_WAITING = false;
            }
        });
} 
```

重要的一行当然是：

```
var serialised = JSON.stringify(MIRM_MODEL.serialise()); 
```

现在，当它到达服务器时，我需要解码这些数据，因为它已经被序列化了两次。这种“解决方案”会增加成本：发送更多数据，做更多工作。问题仍然存在：问题是什么，真正的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T02:00:14.463

检查以下 php.ini 变量：

post_max_size

max_input_vars - 这实际上可能是罪魁祸首，因为它会截断数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T23:23:29.007

尝试将 jQuery 的 ajax`timeout`参数设置为较大的数字（注意，它以毫秒为单位，因此您可能需要 10000，即 10 秒）。其他一些可以尝试的选项： 1\. 检查您的 PHP 最大执行时间是否合适。我怀疑这是否相关，但这是*可能*的。2\. 在 jQuery 的错误函数上，`console.log(xhr)`在`XHR`结果上运行（你必须在 Chrome 中执行此操作，或者找到另一种查看结果的方法）。XHR 是一个 XHR 对象，其中包含有关连接发生情况的调试信息，例如状态代码、超时信息等。

编辑：另外，您是否检查过数据库中字段的最大大小？数据库很可能会自动截断信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T10:36:13.663

我的直觉是它与 php 超时有关，我从未听说过 javascript 超时 - 我让 jquery 运行了 3 或 4 个小时，但随后他们继续发布小更新（如 PHP 中的 _SESSION 进度条 .. .但我离题了..无论如何，您必须为此使用firefox，当您知道自己在做什么并在大约40分钟后超时时，IE不会“相信”您）〜当时我没有使用chrome。

实际上，想想看，你说你正在迁移到 CentOS 对我来说听起来就像是必须与服务器相关。你只是在寻找错误的地方。

BTW 恭喜 CentOS 太棒了！我会用简单的方法来做这件事，并为这个应用程序拥有一个完整的 LAMP CentOS VM（尽量不要因为它的 vv 混乱而与 vhosts 相处）并且只需将整个 apache/php 安装设置为非常高。

正确的 php.ini 设置是

```
max_input_time //(not max_execution_time!)
upload_max_filesize
post_max_size
// .. and try    
memory_limit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T09:01:46.117

PHP POST/GET/COOKIE 默认限制为 1000 个条目。上面的所有内容都将被忽略。计数的是条目数，而不是实际的数据量。我建议您编辑 php.ini 并将 max_input_vars 设置设置为更大的值。

问候。

# python - python 模块位于名称包含短划线字符的存储库中

> ID：11655490
> 
> 赞同：2
> 
> 时间：2012-07-25T17:41:24.520
> 
> 标签：python, package

我知道模块的名称不应该有破折号。

这是我的存储库结构

```
my-repo-name/
     src/ 
     tests/
        __init__.py
        tests.py
     fab/
        __init__.py
        fabfile.py

     README.rst
     __init__.py 
```

在我的测试中，我需要导入 fabfile.py 来运行测试。但是因为这个名字有一个破折号，我不能做`from my-module-name.fab.fabfile import X,Y,Z`或相对导入，因为它是一个非包。

有什么建议如何在不破解`__import__(...)`或将其添加到系统路径的情况下做到这一点？我应该添加另一个目录吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T17:46:20.310

使用[`importlib.import module`](http://docs.python.org/library/importlib.html#importlib.import_module)：

```
import importlib
fabfile = importlib.import_module('my-repo-name.fab.fabfile', None)
X = fabfile.X 
```

但你真的应该只更改存储库的名称。要转换，您可以创建一个临时[符号链接](http://en.wikipedia.org/wiki/Symlink)

```
$ mv my-repo-name my_repo_name
$ ln -s my_repo_name my-repo-name 
```

# html - 跨域/异域获取src的html内容

> ID：11655493
> 
> 赞同：1
> 
> 时间：2012-07-25T17:41:37.277
> 
> 标签：html, iframe, cross-domain

可以说我有example.html，在里面我有一个类似的代码

```
<iframe src="x.com" id="x"></iframe> 
```

来自x.com，我想把所有东西都放进去

```
<div class="content">...</div> 
```

进入example.html里面

```
<div class="xCodes">ONTO HERE</div> 
```

所以我试图让 x.com 中的元素显示出来`example.html`，我听说跨域问题无法访问它们。

`x.html`我想知道是否有另一种方法可以从`example.html`

也许不使用`<iframe />`??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:52:01.003

来源：http: [//james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

```
$('.xCodes').load('http://x.com/x.html'); 
```

**或者**

```
$.ajax({
    url: 'http://x.com/x.html',
    type: 'GET',
    success: function(res) {
        var data = $(res.responseText).find('.content').text();
        $('.xCodes').html(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:52:30.573

如果我理解正确，您想从一个站点上的 DIV 中提取内容并将其显示在另一个站点上。这有几个问题，但我将专注于技术方面，并假设您在提取内容方面是真诚的。

您在这里遇到的真正问题是您无权访问尚未加载的页面的 DOM 元素。因此，您需要告诉浏览器加载该页面的数据，以便您可以访问应该在页面上加载的元素，然后将信息拉出。JQuery 有一个很好的小方法来帮助调用 .load() ( [http://api.jquery.com/load/](http://api.jquery.com/load/) )。

但是，作为重要的旁注，您不能这样做，因为所有现代浏览器都以这种方式禁止跨站点访问：

从 JQuery .load() 页面：

> 附加说明：由于浏览器安全限制，大部分“Ajax”请求均受同源策略约束；请求无法从不同的域、子域或协议成功检索数据。

并查看：

> [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

还有一点警告。如果您不控制其他站点上的代码，您可能会将自己暴露在严重的安全问题中，因此请仅在您可以控制其他站点或出于某种原因对该站点有绝对信任的情况下执行此操作。或者，如果可用，您应该尝试为您尝试从中获取数据的站点/服务使用 API。

# visual-studio-2010 - 有没有快捷键可以选择 在 VS2010 属性表中？

> ID：11655498
> 
> 赞同：1
> 
> 时间：2012-07-25T17:42:07.087
> 
> 标签：visual-studio-2010, vsprops

我正在移动一个多项目解决方案以使用 .props 文件，而不是在项目中重复定义属性。目前，我正在浏览所有旧项目并为大多数设置选择“从父​​级或项目默认值继承”。

为了帮助防止 RSI，是否有任何快捷键可以在特定属性上设置它？对于奖励积分，有没有办法列出特定配置的更改（粗体）属性，以便我可以在一个地方查看它们？

Xcode 很好地完成了这两件事（用于重置属性的退格键和仅显示在当前级别定义的设置的选项）。如果我能在 VS2010 中找到一个等价物，那就太好了！

# c# - 使用 IEnumerable 接口会减少并发问题吗

> ID：11655503
> 
> 赞同：2
> 
> 时间：2012-07-25T17:42:27.120
> 
> 标签：c#, .net, collections, concurrency, ienumerable

根据[Albahari 兄弟 [Page No.273]](http://books.google.co.in/books?id=t1de8nSVYnkC&lpg=PP1&ots=24qgSrPk8A&dq=inauthor%3A%22Ben%20Albahari%22&pg=PA273#v=onepage&q&f=false)的说法，之所以使用，`IEnumerable`是因为：

**通过定义返回枚举**器的单个方法，`IEnumerable`提供了灵活性，即

->迭代逻辑可以`framed off to another class`（**理解**）

-> `Moreover it means that several consumers can enumerate the collection at once without interfering with each other`（**不明白**）

我无法理解第二点！

如何`IEnumerable`不使用`IEnumerator`启用**多个消费者一次枚举集合**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:09:58.710

`IEnumerable`实现一个方法，`GetEnumerator()`，它返回一个`IEnumerator`. 因为每次调用该方法时，`IEnumerator`都会返回一个新的，它有自己的状态。这样，多个线程可以迭代同一个集合，而不会有一个线程更改另一个线程的当前指针的危险。

如果一个集合实现了`IEnumerator`，那么它一次只能被一个线程有效地迭代。考虑以下代码：

```
public class EnumeratorList : IEnumerator
{
    private object[] _list = new object[10];
    private int _currentIndex = -1;

    public object Current { get { return _list[_currentIndex] } };

    public bool MoveNext()
    {
        return ++_currentIndex < 10;
    }

    public void Reset()
    {
        _currentIndex = -1;
    }
} 
```

鉴于该实现，如果两个线程尝试同时遍历 EnumeratorList，它们将得到交错的结果，并且不会看到整个列表。

如果我们将其重构为`IEnumerable`，则多个线程可以访问同一个列表而不会出现此类问题。

```
public class EnumerableList : IEnumerable
{
    private object[] _list = new object[10];

    public IEnumerator GetEnumerator()
    {
        return new ListEnumerator(this);
    }

    private object this[int i]
    {
        return _list[i];
    }

    private class ListEnumerator : IEnumerator
    {
        private EnumeratorList _list;
        private int _currentIndex = -1;

        public ListEnumerator(EnumeratorList list)
        {
            _list = list;
        }

        public object Current { get { return _list[_currentIndex] } };

        public bool MoveNext()
        {
            return ++_currentIndex < 10;
        }

        public void Reset()
        {
            _currentIndex = -1;
        }
    }
} 
```

现在这是一个简单的、人为的例子，当然，但我希望这有助于使它更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:18:19.500

实现的类型`IEnumerator`必须具有方法和属性，以便您可以对其进行迭代，即`MoveNext()`、`Reset()`和`Current`。如果你有多个线程同时尝试迭代这个对象会发生什么？`MoveNext()`当它们都调用相同的函数时，它们会互相踩踏，这会修改相同的`Current`属性。

实现的类型`IEnumerable`必须能够提供`IEnumerator`. 现在当多个线程迭代对象时会发生什么？每个线程都有一个单独的 IEnumerator 对象实例。返回的 IEnumerator 与您的集合的对象类型不同。它们是完全不同的东西。但是，它们确实知道如何获取下一个项目并显示集合的当前项目，并且每个对象都将拥有自己的有关当前枚举状态的内部数据。因此，它们不会互相踩踏并安全地从单独的线程迭代您的集合。

有时，集合类型会为自己实现 IEnumerator（它是它自己的枚举器），然后通过返回自身来实现 IEnumerable。在这种情况下，对于多个线程，您将一无所获，因为它们仍然使用同一个对象进行枚举。这是倒退。相反，正确的过程是首先为您的集合实现一个单独的（可以嵌套的）枚举器类型。然后，您通过返回该类型的新实例来实现 IEnumerable，并通过保留私有实例来实现 IEnumerator。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:07:05.980

考虑代码：

```
 class Program
{
    static void Main(string[] args)
    {
        var test = new EnumTest();
        test.ConsumeEnumerable2Times();
        Console.ReadKey();
    }
}

public class EnumTest
{
    public IEnumerable<int>  CountTo10()
    {
        for (var i = 0; i <= 10; i++)
            yield return i;
    }

    public void ConsumeEnumerable2Times()
    {
        var enumerable = CountTo10();

        foreach (var n in enumerable)
        {
            foreach (int i in enumerable)
            {
                Console.WriteLine("Outer: {0}, Inner: {1}", n, i);
            }
        }
    }
} 
```

此代码将产生输出：

```
Outer: 0, Inner: 1
Outer: 0, Inner: 2
...
Outer: 1, Inner: 0
Outer: 1, Inner: 1
...
Outer: 10, Inner: 10 
```

使用 IEnumerable 您可以一遍又一遍地枚举同一个集合。IEnumerable 实际上将为每个枚举请求返回一个新的 IEnumerator 实例。

在上面的示例中，方法 EnumTest() 被调用一次，但返回的 IEnumerable 被使用了 2 次。每次独立数到 10。

这就是为什么“几个消费者可以一次枚举集合而不会相互干扰”。您可以将相同的 IEnumerable 对象传递给 2 个方法，它们将独立枚举集合。使用 IEnumerator 你无法做到这一点。

对不起我的英语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T18:05:12.747

[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)为正确使用提供了一个很好的`IEnumerable`示例。

为了直接回答您的问题，正确实施后，`IEnumerator`用于遍历集合的对象对于每个调用者都是唯一的。这意味着您可以让多个消费者调用`foreach`您的集合，每个消费者都有自己的枚举器，并在集合中拥有自己的索引。

请注意，这仅提供对集合进行修改的基本保护。为此，您必须使用适当的`lock()`块（参见[此处](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)）。

# linux - 如何让 apt-get install 更喜欢来自本地 iso 的源代码？

> ID：11655509
> 
> 赞同：0
> 
> 时间：2012-07-25T17:42:39.483
> 
> 标签：linux, ubuntu, debian, apt, apt-get

如果 sourcelist 中有很多源，但我希望 apt-get 更喜欢来自本地 iso 的源，而不是远程镜像，即使远程包比本地 iso 更新，我希望 apt-get 选择本地 iso，我应该为了让它按我的意愿工作？

这是我的配置`/etc/apt/source.list`

> deb file:///home/jack/dsk/ lucid main 受限 deb http://us.archive.ubuntu.com/ubuntu/ lucid main 受限 deb-src http://us.archive.ubuntu.com/ubuntu/清醒主受限

我运行 apt-get install ubuntu-desktop，似乎 apt-get 尝试从远程镜像下载包:( 这不是我想要的:( 我确定 ubuntu-desktop 包在我的本地 iso 镜像中:( 那么如何让 apt-get 选择从`dsk/pool/main/u/ubuntu-meta/ubuntu-desktop_1.197_amd64.deb`http://us.archive.ubuntu.com/ubuntu/lucid-updates/main libc6 2.11.1-0ubuntu7.10 安装软件包？

> 查找 dsk/ | grep ubuntu-desktop dsk/pool/main/u/ubuntu-meta/ubuntu-desktop_1.197_amd64.deb

此操作后，将使用 2,191MB 的额外磁盘空间。获取：1 http://us.archive.ubuntu.com/ubuntu/lucid-updates/main libc6 2.11.1-0ubuntu7.10 [4,389kB]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:16:32.537

您正在寻找“apt pinning”，即在不同存储库或分支（稳定、测试......）中的不同版本包之间设置首选项。

请参阅[apt 首选项 pin: origin local?](https://stackoverflow.com/q/9165770/592540)

因此，基于该帖子，您必须编辑（或可能创建，因为默认情况下它不存在）文件`/etc/apt/preferences`并放置：

```
 Package: *
       Pin: origin ""
       Pin-Priority: 999 
```

# r - 删除具有特定 % 0 的列

> ID：11655511
> 
> 赞同：0
> 
> 时间：2012-07-25T17:42:43.143
> 
> 标签：r, dataframe, heatmap

我是 R 的新手，我有一个名为 pedM 的数据框，它有 203 行和 19 列，我想编写一行代码来删除然后在数据框中返回值主要为 0 的列（例如，98% 的列是0)。

我正在使用数据框输出一个基于基因表达返回图像的热图，并且我想摆脱那些对数据没有真正贡献的异常值的行。

我想我正在寻找的代码行相当简单，但我无法理解正确的方法。重申一下，寻找一条基本上可以从具有 98% 0 或 2% 非零的数据框中删除列的行，无论哪种方式更容易。

提前致谢。

维韦克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:50:58.637

为了清楚起见，我喜欢分几步来做这件事。首先定义一个函数来检查向量的 98% 是否为零并返回 True 或 False：

```
myfun <- function(x, threshhold=0.98) {
  if(length(x[x==0])/length(x) > threshhold) {
    TRUE
  } else {
    FALSE
  }
} 
```

然后使用以下方法为每列创建一个布尔向量`apply`：

```
to.drop <- apply(pedM, 2, myfun) 
```

最后删除您不想要的列：

```
pedM <- pedM[, !to.drop] 
```

# javascript - 测试 ember 对象中的属性

> ID：11655519
> 
> 赞同：0
> 
> 时间：2012-07-25T17:43:07.280
> 
> 标签：javascript, ember.js

比方说：

```
Foo.user = Ember.Object.extend({
    username:null,
    name:null,
    loadData:function(data){
        _.each(data, function(value, key){
            console.log(this.hasOwnProperty(String(key)), key, String(key));
            console.log((String(key) in this));
            console.log(key in this.__proto__);
            console.log(_.has(this, key));
            ...
        });
    },
}) 
```

其中数据是一个对象 ex。JSON

是否有任何 Ember 测试方式或只是 JS OO 方式？

是的，它是下划线... ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:11:17.967

好的，上下文错误，我很抱歉……可怜的我。

```
Foo.user = Ember.Object.extend({
  username:null,
  name:null,
  loadData:function(data){
      _.each(data, function(value, key){
          console.log(this.hasOwnProperty(String(key)), key, String(key));
          console.log((String(key) in this));
          console.log(key in this.__proto__);
          console.log(_.has(this, key));
          ...
      }, this);
   },
}) 
```

# mysql - SQL 加载数据并发 infile

> ID：11655521
> 
> 赞同：1
> 
> 时间：2012-07-25T17:43:14.083
> 
> 标签：mysql, heidisql

我正在尝试运行此查询

```
LOAD DATA CONCURRENT INFILE 'C:\\Data-API.csv' INTO TABLE pbp_person
FIELDS TERMINATED BY '\t' ENCLOSED BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES
(email, first_name, last_name, title, company_name, address, city, state, zip, country, phone, vertical); 
```

但我得到一个错误说......

`SQL Error(29) File 'C:\Data-API.csv' not found (Errcode:2)`

该文件在正确的位置；发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:46:11.647

文件在服务器中吗？因为你没有指定`LOCAL`，所以必须在服务器主机上指定文件。

如果它在客户端，那么使用这个：

```
LOAD DATA CONCURRENT *LOCAL* INFILE 'C:\\Data-API.csv' INTO TABLE pbp_person
FIELDS TERMINATED BY '\t' ENCLOSED BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES
(email, first_name, last_name, title, company_name, address, city, state, zip, country, phone, vertical); 
```

参考[这个](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)。

> 如果未指定 LOCAL，则该文件必须位于服务器主机上并由服务器直接读取。服务器使用以下规则来定位文件：
> 
> *   如果文件名是绝对路径名，则服务器按给定的方式使用它。
>     
>     
> *   如果文件名是具有一个或多个前导组件的相对路径名，则服务器搜索相对于
>     服务器数据目录的文件。
>     
>     
> *   如果给出的文件名没有前导组件，则服务器在默认
>     数据库的数据库目录中查找该文件。

# objective-c - 我应该如何弹出到特定的视图控制器？

> ID：11655527
> 
> 赞同：0
> 
> 时间：2012-07-25T17:43:39.963
> 
> 标签：objective-c, ios, cocoa

我正在创建一个通用的 iOS 应用程序，它本质上是一个长订单页面。用户从购物车屏幕开始，然后通过一系列 4 个不同的屏幕（不同的 VC）线性前进（使用 UINavigationController）。一旦他们到达最后一个屏幕，新闻提交，我希望应用程序将用户带回购物车屏幕。但是，购物车屏幕不是根视图控制器，因此我无法使用`[self.navigationController popToRootViewControllerAnimated:YES];`. 我应该如何做到这一点？人们通常如何做到这一点？

我的一些想法是：

1) 维护一个全局变量，即我要弹出的 VC？例如，每当用户进入购物车页面时，我都会将购物车 VC 设置为这个全局变量的值。

2）一旦我在最后一页，循环遍历导航控制器堆栈上的 VC 堆栈，然后当我找到我想要的类型之一（同一类）时，我会弹出它。

有一个更好的方法吗？我缺少一些神奇的 API 吗？人们在这种情况下会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:46:20.293

采用：

```
- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

也就是说，找到您的购物车对象并将其用作 viewController 参数。

# spring - 创建所有bean后的Spring setter依赖注入

> ID：11655530
> 
> 赞同：2
> 
> 时间：2012-07-25T17:43:56.323
> 
> 标签：spring, post-processing

我有一组使用构造函数注入创建的 Spring bean。由于（按设计）存在对其他 bean 的循环引用，因此我想在创建完所有 bean 后对它们进行后处理，以注入对其他 bean 的引用。

使用 BeanPostProcessor 的初始尝试表明 BeanPostProcessor 在每个 bean 被实例化后运行，而不是等到所有 bean 都被实例化。

Spring 是否在创建完一组 bean 之后提供了一种后处理机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:58:06.357

如果您在 ApplicationContext 中创建 bean，ApplicationContext 会触发 ApplicationEvents 到任何已注册的 ApplicationListener 回调。其中之一应该告诉您上下文中的所有 bean 何时通过 Spring 连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:50:03.837

以下是[文档中](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-dependency-resolution)有关循环依赖项的说明：

> 如果您主要使用构造函数注入，则可能会创建无法解决的循环依赖场景。
> 
> 例如：A类通过构造函数注入需要B类的实例，B类通过构造函数注入需要A类的实例。如果为类 A 和 B 配置 bean 以相互注入，Spring IoC 容器会在运行时检测到此循环引用，并抛出 BeanCurrentlyInCreationException。
> 
> 一种可能的解决方案是编辑某些类的源代码以由设置器而不是构造器配置。或者，避免构造函数注入并仅使用 setter 注入。也就是说，虽然不推荐，但是可以通过setter注入来配置循环依赖。
> 
> 与典型情况（没有循环依赖）不同，bean A 和 bean B 之间的循环依赖会强制其中一个 bean 在完全初始化之前注入另一个 bean（典型的鸡/蛋场景）。

在这种情况下，我只会使用 setter 注入，或者首先尝试避免循环依赖。另一种解决方案是使其中一个 bean 成为 BeanFactoryAware，并在需要引用时从 bean 工厂中查找另一个 bean。

# c# - System.NullReferenceException（单选按钮）

> ID：11655531
> 
> 赞同：0
> 
> 时间：2012-07-25T17:44:02.433
> 
> 标签：c#, exception, radio-button

我有两个单选按钮，如果我将属性`IsChecked`放在 XAML 中，程序会因 System.NullReferenceException 而崩溃。附加信息：对象引用未设置为对象的实例。

我的单选按钮：

```
<RadioButton IsChecked="True" Name="Mint" Checked="Mint_Checked_1"
  Foreground="Red"  FlowDirection="RightToLeft"  VerticalAlignment="Top"
  HorizontalAlignment="Right"  Margin="10,30,10,0" GroupName="Update_When"
  Content="A">
</RadioButton>

<RadioButton IsChecked="False" Name="Changet" Checked="Changet_Checked_1"
  FlowDirection="RightToLeft" VerticalAlignment="Top" HorizontalAlignment="Right"
  Margin="10,53,10,0" GroupName="Update_When" Content="B">
</RadioButton> 
```

我的事件代码：

```
private void Mint_Checked_1(object sender, RoutedEventArgs e)
    {
        Mint.Foreground = Brushes.Red;
        Changet.Foreground = Brushes.Black;
    }

    private void Changet_Checked_1(object sender, RoutedEventArgs e)
    {
        Mint.Foreground = Brushes.Black;
        Changet.Foreground = Brushes.Red;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:19:07.363

您收到该异常是因为您在元素初始化之前调用了已检查的事件，解决此问题的一种方法是将 移动`IsChecked=True`到 Loaded 事件：

```
private void MyWindow_Loaded (object sender, RoutedEventArgs e)
{
  Mint.IsChecked = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T23:05:03.833

这对我有用，我将要检查的 RadioButton 的 xaml 行移到序列中的最后一行，如下所示：

XAML 文件中的原始顺序，（此顺序导致抛出异常）

```
RadioButton x:Name="RadioButton1"
RadioButton x:Name="RadioButton2" // Radio button that is initialized as selected (Is_Checked)
RadioButton x:Name="RadioButton3"
RadioButton x:Name="RadioButton4" 
```

没有例外：

```
RadioButton x:Name="RadioButton1"
RadioButton x:Name="RadioButton3"
RadioButton x:Name="RadioButton4"
RadioButton x:Name="RadioButton2" // Radio button that is initialized as selected (checked) 
```

我相信这是因为当单选按钮更改为“Is_checked”时（即使在初始化时），它也会调用它所绑定的 RadioButton_IsChecked 方法。

因此，在初始化期间，RadioButton1 被初始化为 false，然后 RadioButton2 被初始化为 true，这调用了绑定方法，并且 RadioButton3 和 RadioButton4 仍未初始化并且为 null 导致异常。

请注意，上述内容不会更改单选按钮在表单上的位置。

此外，我已将所有 4 个单选按钮绑定到相同的方法，并使用 if/else if/else if/else 来设置我在检查按钮时想要的表单属性。

# geolocation - 使用 Matlab 在 Worldmap 上绘制地理位置

> ID：11655532
> 
> 赞同：6
> 
> 时间：2012-07-25T17:44:04.567
> 
> 标签：geolocation, plot, matlab, matlab-figure

我正在尝试使用 matlab 在世界地图上标记数千个地理位置。我有这些位置的纬度和经度。有什么好的方法可以做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T21:26:18.017

这是一个不需要任何工具箱的示例。

首先，我们创建一个使用[墨卡托投影](https://en.wikipedia.org/wiki/Mercator_projection)转换经度/纬度位置的函数。

```
function [x,y] = mercatorProjection(lon, lat, width, height)
    x = mod((lon+180)*width/360, width) ;
    y = height/2 - log(tan((lat+90)*pi/360))*width/(2*pi);
end 
```

我们创建一些位置：

```
% GPS positions (latitude,longitude) of some markers
data = [
    -22.976730, - 43.195080 ;
     55.756950,   37.614975 ;
     33.605381, -  7.631940 ;
     35.670479,  139.740921 ;
     51.506325, -  0.127144 ;
     40.714550, - 74.007124 ;
    -33.869629,  151.206955 ;
    -26.204944,   28.040035 ;
     37.777125, -122.419644 ;
     30.083740,   31.255360 ;
      6.439180,    3.423480
];
labels = {
    'Rio de Janeiro'
    'Moscow'
    'Casablanca'
    'Tokyo'
    'London'
    'New York'
    'Sydney'
    'Johannesburg'
    'San Francisco'
    'Cairo'
    'Lagos'
}; 
```

[接下来我们从Wikipedia](https://en.wikipedia.org/wiki/File:Mercator-projection.jpg)加载地图，应用投影并覆盖标记：

```
% world map in Mercator projection
fname = 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Mercator-projection.jpg/773px-Mercator-projection.jpg';
img = imread(fname);
[imgH,imgW,~] = size(img);

% Mercator projection
[x,y] = mercatorProjection(data(:,2), data(:,1), imgW, imgH);

% plot markers on map
imshow(img, 'InitialMag',100, 'Border','tight'), hold on
plot(x,y, 'bo', 'MarkerSize',10, 'LineWidth',3)
text(x, y, labels, 'Color','w', 'VerticalAlign','bottom', 'HorizontalAlign','right')
hold off 
```

![输出](../Images/0b642061fd2fabe6291e7a4c5a788606.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T22:33:33.223

绘制世界的好方法！

您只需要更改以下内容：

```
imshow(I, 'InitialMag',100, 'Border','tight'), hold on 
```

进入

```
imshow(img, 'InitialMag',100, 'Border','tight'), hold on 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T20:31:23.170

Amro 的回答对我有用，但我必须做一些改变。

我使用的是 Matlab 7.9，而**imshow**是图像处理工具箱的一部分。为了在不使用**imshow**函数的情况下显示地图，我替换了这一行：

```
imshow(img, 'InitialMag',100, 'Border','tight') 
```

有了这个：

```
image(img) 
```

它奏效了。

# fortran - 如何有效地转置数组并分配给具有不同类型的数组

> ID：11655533
> 
> 赞同：1
> 
> 时间：2012-07-25T17:44:05.587
> 
> 标签：fortran, fortran90

考虑以下：

```
program main
integer, parameter :: n=10, m=20
integer ints(n,m)
real floats(m,n)

!... initialize ints
! ...

floats=transpose(ints)
!... do stuff with floats

end 
```

查看 gfortran 的文档，似乎`transpose(ints)`会返回一个整数数组，然后将其转换为实数。在此操作中，编译器 (gfortran) 为转置后的数组创建一个临时数组，这看起来像是一种浪费（使用 编译`gfortran -O3 -Warray-temporaries -o test test.f90`）。另请注意，如果您将`real`数组“浮点数”更改为`integer`数组，警告就会消失。

有没有办法在不生成临时数组的情况下做到这一点（对于任意类型）？（我也尝试过`floats(:,:)=transpose(ints)`，因为我在某处读到它很重要......）。它与其他编译器的行为方式是否相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:22:37.313

你可以试试

```
floats = transpose(real(ints)) 
```

但如果 gfortran（或任何其他编译器）生成一个临时数组来实现它，我不会感到非常惊讶。如果没有，我会更惊讶。

你也可以试试

```
forall (J=1:N, K=1:M) floats(K, J) = real(ints(J, K)) 
```

同样，如果编译器创建了一个临时数组来实现它，我也不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:40:07.870

```
do i = 1, n
do j = 1, m
    floats(j,i) = real(ints(i,j))
enddo
enddo 
```

您可以创建自己的`transpose`接口来处理不同的数据类型，尽管它必须是子例程而不是函数。

```
interface transpose_
    module procedure transpose_ints_to_reals
end interface

subroutine transpose_ints_to_reals(ints_in, reals_out)
...
end subroutine

call transpose_(ints,floats) 
```

# javascript - 在 JavaScript 中生成一个带有字节数组的标签？

> ID：11655535
> 
> 赞同：0
> 
> 时间：2012-07-25T17:44:12.897
> 
> 标签：javascript, image

我有一个包含两列的 SQL Server 表 - 一个整数 ID 和一个 varbinary(max) ImageData，它是一个 JPEG 图像。在 Javascript 中，我有一个 Ajax 调用来获取特定 ID 的 ImageData 并将其作为字节数组返回。如何生成将显示图像的 XHTML IMG 标记？

我的想法是在返回的数组上使用 createObjectURL，但是 (a) 这需要能够在 IE 8 上运行，这似乎不支持该方法，并且 (b) Firefox 似乎期待一个实际的 Blob 类型而不是比字节数组（并且 Blob() 构造函数似乎不存在）。

我确实有另一种选择——将数据作为 Base64 字符串返回，然后使用标签，但这在 IE8 中不起作用，并且在其他浏览器上可能存在大小限制（某些图像为 600K，这意味着标签可能有超过 100 万个字符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:16:07.523

您正在过度设计一个已经存在更简单解决方案的问题。

使用 AJAX 插入以下 HTML 并让浏览器通过 HTTP 获取图像本身。通过 AJAX 发送图像数据需要毫无意义的 base64 编码/解码，最终会占用更多带宽并破坏浏览器缓存。

```
<img src="imageServer.php?imageID=3224" /> 
```

然后`imageServer.php`（您构建它或在某处抓取它）将抓取适当的图像记录，输出图像 MIME 类型，然后流式传输二进制数据。

# c# - 实体框架 - 使用存储过程和映射属性

> ID：11655537
> 
> 赞同：0
> 
> 时间：2012-07-25T17:44:20.590
> 
> 标签：c#, entity-framework

我的框架设置首先使用 BaseEntity 类型的代码，该类型仅包含 Id 和 Name 属性（我的所有数据库表至少有这两个字段）。问题是 db 是在我们实现 EF 之前编写的，因此 db 中的许多列名与这个好的 Id/Name 约定不匹配（例如，可能有 CustomerId 和 CustomerName 等）。现在就基本的 CRUD 操作而言，这可以正常工作，因为我只是在映射中执行此操作：

```
this.HasKey(t => t.Id).Property(t => t.Id).HasColumnName("CustomerId"); 
```

它正确地从一个映射到另一个，一切都很好

但是，我们也有一些只能封装在存储过程中的复杂数据库逻辑，因此在我的 ObjectContext 中，我有一个通用方法来调用返回 IList 的 sprocs，并允许您传入要调用的 proc 名称和它需要的任何参数，然后转到 ObjectContext 上的底层数据库对象进行调用。这对于 poco 中的属性名称与 db 中的属性名称匹配的类非常有用，但如果它们不匹配，它会忽略我为该对象设置的任何映射（见上文），并且出现如下错误：

```
The data reader is incompatible with the specified 'SomeNamespace.Customer'. 
A member of the type, 'Id', does not have a corresponding column in the data 
reader with the same name. 
```

有没有什么干净的方法可以解决这个问题或正确地指示它在底层数据读取器上正确映射？

谢谢

# php - 打开 2 个 Web 应用程序实例

> ID：11655540
> 
> 赞同：0
> 
> 时间：2012-07-25T17:44:23.407
> 
> 标签：php, mysql

当用户单击忘记密码时，将创建一个令牌作为要在电子邮件中发送的链接。用户单击链接，令牌在数据库中检查存在和到期。一切都很好，因此显示了一个新密码表单，并且用户输入了一个新密码。它被散列、加盐并存储在用户表中。到目前为止，我已经对此进行了整理，但我无法弄清楚为什么我现在打开了这个 Web 应用程序的 2 个实例。有没有办法让电子邮件链接回到原始注册页面而不必在新窗口中打开？我的脚本是 php 和 mysql。我的链接如下所示： [http](http://www.mysite.com/resetpassword.php?token=) ://www.mysite.com/resetpassword.php?token= $token

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:46:34.350

您无法控制用户如何打开其应用程序的选项卡。

如果他在一个选项卡中单击忘记密码，在另一个选项卡中打开他的电子邮件帐户，并在第三个选项卡中打开您的令牌链接，您将无法控制它。

# objective-c - 如何在 iOS 上分析视频流？

> ID：11655545
> 
> 赞同：2
> 
> 时间：2012-07-25T17:44:37.120
> 
> 标签：objective-c, ios, video, opencv, video-processing

例如，有 QR 扫描仪可以实时扫描视频流并获取 QR 码信息。我想检查视频中的光源，如果它是打开或关闭的，它非常强大，所以没问题。

我可能会将视频流作为输入，可能会制作它的图像并实时分析图像或流中是否存在光源（可能是图像上某种颜色的像素数？）

我该如何解决这个问题？也许有一些图书馆的来源？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T20:48:52.997

听起来您正在询问有关几个谨慎步骤的信息。有很多方法可以做到每一个，如果你在任何一个单独的步骤上遇到困难，最好单独发布一个关于它的问题。

**1：获取视频帧**

就像 chaitanya.varanasi 所说，AVFoundation Framework 是在 IOS 上访问视频帧的最佳方式。如果您想要一些不太灵活和更快的东西，请尝试查看 open CV 的[视频捕获](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html)。此步骤的目标是从相机访问像素缓冲区。如果您对此有疑问，请具体询问。

**2：将像素缓冲区放入OpenCV**

这部分真的很简单。如果你从 openCV 的视频捕获中得到它，你就已经完成了。如果您从 AVFoundation 获得它，则需要像这样将其放入 openCV

```
//Buffer is of type CVImageBufferRef, which is what AVFoundation should be giving you
//I assume it is BGRA or RGBA formatted, if it isn't, change CV_8UC4 to the appropriate format

CVPixelBufferLockBaseAddress( Buffer, 0 );

int bufferWidth = CVPixelBufferGetWidth(Buffer);
int bufferHeight = CVPixelBufferGetHeight(Buffer);

unsigned char *pixel = (unsigned char *)CVPixelBufferGetBaseAddress(Buffer);
cv::Mat image = cv::Mat(bufferHeight,bufferWidth,CV_8UC4,pixel); //put buffer in open cv, no memory copied

//Process image Here

//End processing
CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 ); 
```

请注意，我假设您计划在 OpenCV 中执行此操作，因为您使用了它的标签。我还假设您可以让 OpenCV 框架链接到您的项目。如果这是一个问题，请询问有关它的具体问题。

**3：过程图像**

这部分是迄今为止最开放的部分。您对您的问题所说的只是您正在尝试检测强光源。一种非常快速和简单的方法是检测灰度图像中的平均像素值。如果您获得彩色图像，则可以使用[cvtColor](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html)进行转换。然后只需调用[Avg](http://opencv.willowgarage.com/documentation/python/operations_on_arrays.html)即可获得平均值。希望您可以通过该值的波动来判断灯是否亮起。

chaitanya.varanasi 建议了另一种选择，您也应该检查一下。

openCV 是一个非常大的库，可以做各种各样的事情。在不了解您的问题的情况下，我不知道还能告诉您什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T18:32:54.237

查看 Apple 的[AVFoundation 框架](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)。

希望能帮助到你！

您可以尝试这种方法：首先将所有图像保存到`AVCaptureVideoDataOutput`. 从方法：`captureOutput:didOutputSampleBuffer:fromConnection`，您可以对每个像素进行采样/计算。来源：[答案](https://stackoverflow.com/questions/8696584/determine-brightness-from-iphone-camera)

此外，您可以查看这个[SO question](https://stackoverflow.com/questions/8955110/detect-black-pixel-in-image-ios)，他们在其中检查像素是否为黑色。如果它的光源如此强大，您可以取像素的倒数，然后确定使用设置的黑色阈值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-18T03:18:05.240

上面的示例代码只提供了对存储在缓冲区中的像素值的访问；除了逐像素更改这些值的命令外，您不能运行任何其他命令：

```
for ( uint32_t y = 0; y < height; y++ )
{
    for ( uint32_t x = 0; x < width; x++ )
    {
        bgraImage.at<cv::Vec<uint8_t,4> >(y,x)[1] = 0;
    }
} 
```

这 - 使用您的示例 - 不适用于您提供的代码：

```
 cv::Mat bgraImage = cv::Mat( (int)height, (int)extendedWidth, CV_8UC4, base );
cv::Mat grey = bgraImage.clone();
cv::cvtColor(grey, grey, 44); 
```

# c# - 使用 LINQ 将两个类合并到字典中

> ID：11655548
> 
> 赞同：4
> 
> 时间：2012-07-25T17:44:51.207
> 
> 标签：c#, linq, list, dictionary

我有两个类，它们共享两个共同属性，Id 和 Information。

```
public class Foo
{
     public Guid Id { get; set; }

     public string Information { get; set; }

     ...
}
public class Bar
{
     public Guid Id { get; set; }

     public string Information { get; set; }

     ...
} 
```

使用 LINQ，我如何获取 Foo 对象的填充列表和 Bar 对象的填充列表：

```
var list1 = new List<Foo>();
var list2 = new List<Bar>(); 
```

并将每个的 Id 和 Information*合并*到一个字典中：

```
var finalList = new Dictionary<Guid, string>(); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T17:49:11.520

听起来你可以这样做：

```
// Project both lists (lazily) to a common anonymous type
var anon1 = list1.Select(foo => new { foo.Id, foo.Information });
var anon2 = list2.Select(bar => new { bar.Id, bar.Information });

var map = anon1.Concat(anon2).ToDictionary(x => x.Id, x => x.Information); 
```

（你可以在一个语句中完成所有这些，但我认为这样更清楚。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:48:26.463

```
 var finalList = list1.ToDictionary(x => x.Id, y => y.Information)
            .Union(list2.ToDictionary(x => x.Id, y => y.Information))
                        .ToDictionary(x => x.Key, y => y.Value); 
```

确保 ID 是唯一的。如果不是，它们将被第一个字典覆盖。

编辑：添加 .ToDictionary(x => x.Key, y => y.Value);

# java - 数组列表 对象分配

> ID：11655550
> 
> 赞同：1
> 
> 时间：2012-07-25T17:45:05.453
> 
> 标签：java, android

我`ArrayList<String>`在两个单独的包 Top 和 top10 中有两个单独的对象。我在我的活动中将 top10 的值分配给 Top。现在，如果我从 Top 中删除一个元素，它也会从 top10 中删除。我不知道为什么会这样？我觉得完全傻眼了。java有什么我不知道的吗？还是安卓？

这是我的活动代码：

```
ArrayList<String> Top = new ArrayList<String>();          

// ServiceCall is the name of the class where top10 is initialized.

Top = ServiceCall.top10;

System.out.println("top WR: "+ServiceCall.top10);

if(Top.get(0).equals("Please Select")) Top.remove(0);   

System.out.println("top WR: "+ServiceCall.top10); 
```

第二个打印出来的语句比前一个少一个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:46:59.757

您指向的是同一个对象。

```
Top = ServiceCall.top10; 
```

不是创建一个新对象，而是引用另一个对象，因此两个指针的所有更改都将反映在同一个对象中。

您必须创建一个新的，将另一个作为参数传递：

```
List<String> Top = new ArrayList<String>(ServiceCall.top10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:47:37.407

您将 Top 指向 top10，而不是创建新列表（您的初始化程序现在实际上未使用，因为您只是将其重新指向另一个列表。）

你应该做：

```
ArrayList<String> Top = new ArrayList<String>(ServiceCall.top10); 
```

这将创建一个浅拷贝。

# wordpress - 在 Wordpress 中按日期范围标记云

> ID：11655554
> 
> 赞同：1
> 
> 时间：2012-07-25T17:45:32.747
> 
> 标签：wordpress

我广泛寻找一个插件或一些功能来显示一个标签云只为一系列的帖子，由日期定义。例如，我需要从 2012 年 2 月至 4 月之间添加的帖子创建标签云，但此设置必须是可配置的。

有谁知道是否有插件或简单的数据库查询可以做到这一点？

谢谢

# javascript - 使边界半径剪辑绝对位置层

> ID：11655558
> 
> 赞同：1
> 
> 时间：2012-07-25T17:45:41.403
> 
> 标签：javascript, jquery, html, css

如何制作边框半径剪辑绝对位置图层？

[http://jsfiddle.net/63qr9/1/](http://jsfiddle.net/63qr9/1/)

我知道在这个例子中这些 div 不需要是绝对的，但是在我的应用程序中它们是绝对的，当它滚动时我需要外部 div 来掩盖所有内部 div，即使它们是绝对定位的。

我怎么能做到这一点？

谢谢！

# php - PHP 类实例导入 MySQL 数据库

> ID：11655559
> 
> 赞同：2
> 
> 时间：2012-07-25T17:45:55.623
> 
> 标签：php, mysql

我正在一个网站上工作，我想在其中使用 PHP 和 MySQL。大多数情况下，我将数百个变量插入到我的 MySQL 数据库中，但我对此感到厌倦。我已经在互联网上搜索了解决方案，但没有任何成功。

我的网站使用面向对象的 PHP，我想将整个实例插入数据库。例子：

```
class User
{
     private $userID;
     private $username;
     // etc

     public function __construct($userID, $username)
     {
           $this->userID = $userID;
           $this->username = $username
     }

     // Other functions go here
} 
```

我想知道是否可以将整个实例 ($user = new User($x, $y)) 保存到我的 MySQL 数据库中。如果可能，我需要什么字段类型？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:49:14.663

您正在寻找的可能是 ORM（对象关系映射器），它允许您将对象直接映射到数据库中的表。

有几个 PHP ORM 可用，例如：

*   [学说](http://www.doctrine-project.org/)，也许是使用最广泛的一种，
*   [推进](http://www.propelorm.org/)
*   [Redbean](http://redbeanphp.com/)有一点不同的方法，但我非常喜欢那个方法。

您还应该意识到使用这样的库可能会对性能产生相当大的影响，但是使用缓存和其他解决方案可以减轻这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:53:32.703

您应该以某种方式序列化对象并将其存储在文本字段中。您可以使用 PHP 的本机[serialize()](http://php.net/manual/en/function.serialize.php) / [unserialize()](http://us2.php.net/manual/en/function.unserialize.php)，或者，如果它们是简单的值对象，则可以使用[json_encode()](http://us2.php.net/manual/en/function.json-encode.php) / [json_decode()](http://us2.php.net/manual/en/function.json-decode.php)。有关两者的更多信息/比较，请参阅[此线程](https://stackoverflow.com/questions/804045/preferred-method-to-store-php-arrays-json-encode-vs-serialize)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T17:56:14.143

您无法将实例保存到数据库中。因为实例是占用内存，使用编译器它保存类的状态。但是 Manu Letroll 提供了一个很好的解决方案，您应该使用 orm 来简化工作。

# php - 使用 PHP/JQuery 和推送技术进行网络聊天（仅适用于一小部分用户，共享主机）

> ID：11655560
> 
> 赞同：0
> 
> 时间：2012-07-25T17:45:56.590
> 
> 标签：php, mysql, chat, shared-hosting, ajax-push

我正在为一组 10 人开发一个小型私人网站。它本质上是一个只为我们服务的小型社交网络。我们目前还使用 Windows Live Messenger 进行实时聊天，但我们正在寻找一种替代方案，因为用于 Mac、Linux 和智能手机的 MSN 客户端不支持我们使用的 MSN 中最近添加的群组功能。

我一直在阅读有关推送技术的一些内容，以了解如何创建一个适合我们非常有限的需求的基于网络的聊天室。我认为 Apache 根本不适合长轮询，使用 APE 之类的东西会是一个更好的主意。然而，我们在一个相当便宜但非常好的共享主机上运行，​​所以我们根本没有能力安装任何服务器端软件。

对于我的问题。

既然我们毕竟只是少数用户，而且大多数时候只有一半的人会在线，那么简单的 PHP 长轮询可能会起作用吗？从下午早些时候到深夜，聊天几乎每天都会开放，但并非所有用户都会一直处于活跃状态。尽管如此，平均而言，每天可能有五六个用户整天不离开就在线。当我们最活跃的时候，会有很多时候在短时间内发送*很多消息，但很难估计有多少。*

是否值得研究使用 Websockets 的 PHP 服务器实现和 Flash 后备（对于桌面使用我们很好，因为我们基本上都使用 Chrome，但我们很高兴能够使用 Android设备）。

我还偶然发现了 www.pusher.com，他们的免费替代品看起来非常合适，每天有 20 个连接和 100 000 条消息（即使在一周内我们也不会达到那么多）。你会建议我们直接走那条路吗？

我知道这里有很多关于 PHP 和 Apache 推送技术的问题，但我还没有找到任何解决应用程序使用受限的情况。任何提示和建议将不胜感激。我几乎知道如何编写聊天本身，我只需要知道使用的最佳方法，以及上述任何一种方法是否有效。

# c# - 使用匹配案例搜索具有多个属性的 XML 文件

> ID：11655567
> 
> 赞同：0
> 
> 时间：2012-07-25T17:46:24.570
> 
> 标签：c#, xml, visual-studio-2008, xpath

如何使用 XML 文件中的 XPath 使用大小写匹配来搜索多个子节点值。我有以下 XML 文件。

```
<catalog>
  <book id="BK-1001">
    <title>C# 2005 Programmer's Reference</title>
    <author>Adrian Kignsley</author>
    <genre>.NET</genre>
    <price>0</price>
    <publish_date>2006-11-1</publish_date>
    <description>This is reference book.</description>
  </book>
  </catalog> 
```

我想使用 Match Case 根据标题、作者和流派进行搜索。我正在使用这个表达式：

```
"book[title='" + strInputString_1 + "'] | book[author='" + strInputString_2 + "'] | book[genre='" + strInputString_3 + "']" 
```

但是，它没有用。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:37:10.367

您缺少`//`XPath 开头的 。

```
"//book[title='" + strInputString_1 + "'] | //book[author='" + strInputString_2 + "'] | //book[genre='" + strInputString_3 + "']" 
```

你可以试试这个，虽然：

```
"//book/title[.='" + strInputString_1 + "'] | //book/author[.='" + strInputString_2 + "'] | //book/genre[.='" + strInputString_3 + "']" 
```

# jquery - jQuery CSS - 不要在标签内选择标签

> ID：11655569
> 
> 赞同：0
> 
> 时间：2012-07-25T17:46:32.137
> 
> 标签：jquery, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:48:08.343

```
$("#bodyCopy a[href^='http']").each(function() {
    if ( $(this).find("img").length < 1 ) {  // Count <img> children
        // Continue only if fewer than one <img> within <a>
        $(this).css({
            background: "url(http://g.etfv.co/" + this.href + ") left center no-repeat",
            "padding-left": "20px"
        });
    }
}); 
```

# json - D3捆绑布局的json数据格式

> ID：11655572
> 
> 赞同：1
> 
> 时间：2012-07-25T17:46:36.340
> 
> 标签：json, d3.js, bundle-layout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:14:23.467

[http://bl.ocks.org/mbostock/raw/1044242/readme-flare-imports.json](http://bl.ocks.org/mbostock/raw/1044242/readme-flare-imports.json)

```
 [
      {
        "name":"flare.analytics.cluster.AgglomerativeCluster",
        "size":3938,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.data.DataList",
          "flare.util.math.IMatrix",
          "flare.analytics.cluster.MergeEdge",
          "flare.analytics.cluster.HierarchicalCluster",
          "flare.vis.data.Data"
        ]
      },
      {
        "name":"flare.analytics.cluster.CommunityStructure",
        "size":3812,
        "imports":[
          "flare.analytics.cluster.HierarchicalCluster",
          "flare.animate.Transitioner",
          "flare.vis.data.DataList",
          "flare.analytics.cluster.MergeEdge",
          "flare.util.math.IMatrix"
        ]
      },
      {
        "name":"flare.analytics.cluster.HierarchicalCluster",
        "size":6714,
        "imports":[
          "flare.vis.data.EdgeSprite",
          "flare.vis.data.NodeSprite",
          "flare.vis.data.DataList",
          "flare.vis.data.Tree",
          "flare.util.Arrays",
          "flare.analytics.cluster.MergeEdge",
          "flare.util.Sort",
          "flare.vis.operator.Operator",
          "flare.util.Property",
          "flare.vis.data.Data"
        ]
      },
      {
        "name":"flare.analytics.cluster.MergeEdge",
        "size":743,
        "imports":[

        ]
      },
      {
        "name":"flare.analytics.graph.BetweennessCentrality",
        "size":3534,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.data.NodeSprite",
          "flare.vis.data.DataList",
          "flare.util.Arrays",
          "flare.vis.data.Data",
          "flare.util.Property",
          "flare.vis.operator.Operator"
        ]
      },
      {
        "name":"flare.analytics.graph.LinkDistance",
        "size":5731,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.data.NodeSprite",
          "flare.vis.data.EdgeSprite",
          "flare.analytics.graph.ShortestPaths",
          "flare.vis.data.Data",
          "flare.util.Property",
          "flare.vis.operator.Operator"
        ]
      },
      {
        "name":"flare.analytics.graph.MaxFlowMinCut",
        "size":7840,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.data.NodeSprite",
          "flare.vis.data.EdgeSprite",
          "flare.vis.data.Data",
          "flare.util.Property",
          "flare.vis.operator.Operator"
        ]
      },
      {
        "name":"flare.analytics.graph.ShortestPaths",
        "size":5914,
        "imports":[
          "flare.vis.data.EdgeSprite",
          "flare.vis.data.NodeSprite",
          "flare.animate.Transitioner",
          "flare.vis.operator.Operator",
          "flare.util.heap.HeapNode",
          "flare.util.heap.FibonacciHeap",
          "flare.util.Property",
          "flare.vis.data.Data"
        ]
      },
      {
        "name":"flare.analytics.graph.SpanningTree",
        "size":3416,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.data.NodeSprite",
          "flare.vis.operator.IOperator",
          "flare.vis.Visualization",
          "flare.vis.data.TreeBuilder",
          "flare.vis.operator.Operator"
        ]
      },
      {
        "name":"flare.analytics.optimization.AspectRatioBanker",
        "size":7074,
        "imports":[
          "flare.animate.Transitioner",
          "flare.util.Arrays",
          "flare.vis.data.DataSprite",
          "flare.scale.Scale",
          "flare.vis.axis.CartesianAxes",
          "flare.vis.Visualization",
          "flare.util.Property",
          "flare.vis.operator.Operator"
        ]
      },
      {
        "name":"flare.animate.Easing",
        "size":17010,
        "imports":[
          "flare.animate.Transition"
        ]
      },
      {
        "name":"flare.animate.FunctionSequence",
        "size":5842,
        "imports":[
          "flare.util.Maths",
          "flare.animate.Transition",
          "flare.util.Arrays",
          "flare.animate.Sequence",
          "flare.animate.Transitioner"
        ]
      },
      {
        "name":"flare.animate.interpolate.ArrayInterpolator",
        "size":1983,
        "imports":[
          "flare.util.Arrays",
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.ColorInterpolator",
        "size":2047,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.DateInterpolator",
        "size":1375,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.Interpolator",
        "size":8746,
        "imports":[
          "flare.animate.interpolate.NumberInterpolator",
          "flare.animate.interpolate.ColorInterpolator",
          "flare.animate.interpolate.PointInterpolator",
          "flare.animate.interpolate.ObjectInterpolator",
          "flare.animate.interpolate.MatrixInterpolator",
          "flare.animate.interpolate.RectangleInterpolator",
          "flare.animate.interpolate.DateInterpolator",
          "flare.util.Property",
          "flare.animate.interpolate.ArrayInterpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.MatrixInterpolator",
        "size":2202,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.NumberInterpolator",
        "size":1382,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.ObjectInterpolator",
        "size":1629,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.PointInterpolator",
        "size":1675,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.interpolate.RectangleInterpolator",
        "size":2042,
        "imports":[
          "flare.animate.interpolate.Interpolator"
        ]
      },
      {
        "name":"flare.animate.ISchedulable",
        "size":1041,
        "imports":[
          "flare.animate.Scheduler"
        ]
      },
      {
        "name":"flare.animate.Parallel",
        "size":5176,
        "imports":[
          "flare.animate.Easing",
          "flare.animate.Transition",
          "flare.util.Arrays"
        ]
      },
      {
        "name":"flare.animate.Pause",
        "size":449,
        "imports":[
          "flare.animate.Transition"
        ]
      },
      {
        "name":"flare.animate.Scheduler",
        "size":5593,
        "imports":[
          "flare.animate.ISchedulable",
          "flare.animate.Pause",
          "flare.animate.Transition"
        ]
      },
      {
        "name":"flare.animate.Sequence",
        "size":5534,
        "imports":[
          "flare.animate.Easing",
          "flare.util.Maths",
          "flare.animate.Transition",
          "flare.util.Arrays"
        ]
      },
      {
        "name":"flare.animate.Transition",
        "size":9201,
        "imports":[
          "flare.animate.Transitioner",
          "flare.animate.TransitionEvent",
          "flare.animate.Scheduler",
          "flare.animate.Pause",
          "flare.animate.Parallel",
          "flare.animate.Easing",
          "flare.animate.Sequence",
          "flare.animate.ISchedulable",
          "flare.util.Maths",
          "flare.animate.Tween"
        ]
      },
      {
        "name":"flare.animate.Transitioner",
        "size":19975,
        "imports":[
          "flare.util.IValueProxy",
          "flare.animate.Parallel",
          "flare.animate.Easing",
          "flare.animate.Sequence",
          "flare.animate.Transition",
          "flare.animate.Tween",
          "flare.util.Property"
        ]
      },
      {
        "name":"flare.animate.TransitionEvent",
        "size":1116,
        "imports":[
          "flare.animate.Transition"
        ]
      },
      {
        "name":"flare.animate.Tween",
        "size":6006,
        "imports":[
          "flare.animate.Transitioner",
          "flare.animate.Transition",
          "flare.animate.interpolate.Interpolator",
          "flare.util.Property"
        ]
      },
      {
        "name":"flare.data.converters.Converters",
        "size":721,
        "imports":[
          "flare.data.converters.IDataConverter",
          "flare.data.converters.GraphMLConverter",
          "flare.data.converters.JSONConverter",
          "flare.data.converters.DelimitedTextConverter"
        ]
      },
      {
        "name":"flare.data.converters.DelimitedTextConverter",
        "size":4294,
        "imports":[
          "flare.data.DataSet",
          "flare.data.DataUtil",
          "flare.data.DataTable",
          "flare.data.converters.IDataConverter",
          "flare.data.DataSchema",
          "flare.data.DataField"
        ]
      },
      {
        "name":"flare.data.converters.GraphMLConverter",
        "size":9800,
        "imports":[
          "flare.data.DataSet",
          "flare.data.DataUtil",
          "flare.data.DataTable",
          "flare.data.converters.IDataConverter",
          "flare.data.DataSchema",
          "flare.data.DataField"
        ]
      },
      {
        "name":"flare.data.converters.IDataConverter",
        "size":1314,
        "imports":[
          "flare.data.DataSet",
          "flare.data.DataSchema"
        ]
      },
      {
        "name":"flare.data.converters.JSONConverter",
        "size":2220,
        "imports":[
          "flare.data.DataSet",
          "flare.data.DataUtil",
          "flare.data.DataTable",
          "flare.data.converters.IDataConverter",
          "flare.data.DataSchema",
          "flare.data.DataField",
          "flare.util.Property"
        ]
      },
      {
        "name":"flare.data.DataField",
        "size":1759,
        "imports":[
          "flare.data.DataUtil"
        ]
      },
      {
        "name":"flare.data.DataSchema",
        "size":2165,
        "imports":[
          "flare.data.DataField",
          "flare.util.Arrays"
        ]
      },
.
.
.
      {
        "name":"flare.vis.Visualization",
        "size":16540,
        "imports":[
          "flare.animate.Transitioner",
          "flare.vis.operator.IOperator",
          "flare.animate.Scheduler",
          "flare.vis.events.VisualizationEvent",
          "flare.vis.data.Tree",
          "flare.vis.events.DataEvent",
          "flare.vis.axis.Axes",
          "flare.vis.axis.CartesianAxes",
          "flare.util.Displays",
          "flare.vis.operator.OperatorList",
          "flare.vis.controls.ControlList",
          "flare.animate.ISchedulable",
          "flare.vis.data.Data"
        ]
      }
    ] 
```

# c++ - libcURL 和 Google 文档

> ID：11655573
> 
> 赞同：0
> 
> 时间：2012-07-25T17:46:43.403
> 
> 标签：c++, https, libcurl

我正在尝试从 Internet 下载我的应用程序所需的文件（作为安装的一部分），以便在应用程序第一次启动时下载所需的文件。现在我将它们放在 Google Drive 上并公开，然后我将使用 libcURL 下载它们。问题是，我就是无法获取数据。

我使用以下链接：`https://docs.google.com/uc?id=documentID&export=download`并替换`documentID`为 id。但是，当我尝试连接到该站点时，它不断给我一小段 HTML 代码，基本上说“暂时移动”，并给了我一个指向新 URL 的链接。当我在我的程序中使用新链接时，我没有得到任何输出。但是，*即使*我没有登录，这两个链接在我的网络浏览器中都可以正常工作。那么为什么它们不能在我的程序中工作呢？我没有正确设置 SSL 选项，还是 Google Drive 根本不适合这种事情？

这是我的代码：

```
#include <curl/curl.h>

int main()
{
    curl_global_init(CURL_GLOBAL_ALL);

    CURL *curl;
    CURLcode res;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, "https://docs.google.com/uc?id=documentID&export=download");
        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0L);
        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 0L);
        curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);
        curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);
        res = curl_easy_perform(curl);
    }
    curl_easy_cleanup(curl);
    return 0;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:51:59.327

您需要设置[`CURLOPT_FOLLOWLOCATION`](http://linux.die.net/man/3/curl_easy_setopt)选项来告诉 cURL 遵循重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:57:18.303

我不知道这是否直接有帮助，但我总是打电话

```
curl_global_init(CURL_GLOBAL_ALL); 
```

我看你不使用。[我在线程 SSL 代码示例http://curl.haxx.se/libcurl/c/threaded-ssl.html](http://curl.haxx.se/libcurl/c/threaded-ssl.html)中看到了这个调用。此 `curl_global_init() 调用将执行 SSL 初始化等。在此链接[http://curl.haxx.se/libcurl](http://curl.haxx.se/libcurl)以及此处的 libcurl 教程[http://curl.haxx.se/libcurl/c/libcurl-tutorial.html中对此进行了讨论](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html)

# c# - 从 Metro 应用程序链接授权的回调 url 是什么？

> ID：11655574
> 
> 赞同：0
> 
> 时间：2012-07-25T17:46:47.733
> 
> 标签：c#, microsoft-metro, linkedin

我正在构建一个地铁应用程序，我将尝试从某人的 LinkedIn 个人资料中获取信息，例如工作经历和教育。我已经对如何构建请求进行了研究，并一直在尝试将 Twitter oauth 示例转换为 msdn [here](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)提供的 Metro 应用程序，它使用 webauthenticationbroker。

我一直在尝试按照[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/b8dec7ba-1c4c-4238-879f-268ee53b13a2/)的建议实施与 callbackurl 错误有关的更改。如果在授权过程结束后，我希望他们返回到我的应用程序，我对我的应用程序的回调 URL 实际是什么感到困惑。

有没有人在 Metro 应用程序中使用 Linkedin 进行授权？如果是这样，您介意告诉我我的应用程序的回调 URL 是什么，以及是否有任何我没有列出的 Web 资源可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:46:59.470

[无法查看论坛链接，因为在撰写本文时它似乎已关闭]

回调 URL 是您定义的 URL，当在 WebAuthentication 弹出 UI 内导航*到*该 URL 时，它会检测到并完成它返回的承诺。这就是您现在拥有保存令牌等所需信息的地方。

Facebook 方法可能是一个更好的示例，因为 twitter 更侧重于签署查询而不是 oAuth 的流程。

因此，简而言之，URL 是您定义的任何 URL。当事情完成时，远程服务器将重定向到该 URL，并允许您提取传递给已完成承诺处理程序的值中的信息。

# vba - IE 9 不接受 SendKeys

> ID：11655591
> 
> 赞同：2
> 
> 时间：2012-07-25T17:47:30.660
> 
> 标签：vba, excel, automation, office-automation, browser-automation

我在[IE 9 上发布了不接受 SendKeys 来下载文件](https://stackoverflow.com/questions/11638933/excel-vba-sendkeys-not-causing-ie-9-to-save-download)，但这个问题与我收到的答案足以证明另一个问题的合理性。我的问题是我无法让 IE 9 接受任何`SendKeys`. 我尝试了`Page Down`, `Tab`, 所有的`F#`键，但它们都不起作用。

这是我正在使用的代码：

```
Dim ie As Object

'This creates the IE object
Sub initializeIE()
   'call this subprocedure to start internet explorer up
   Set ie = CreateObject("internetexplorer.application")
   pos = 1
End Sub

'Initialize the class object
Private Sub Class_Initialize()
   initializeIE
End Sub

Function followLinkByText(thetext As String) As Boolean
  'clicks the first link that has the specified text
  Dim alink As Variant

  'Loops through every anchor in html document until specified text is found
  ' then clicks the link
  For Each alink In ie.document.Links
     If alink.innerHTML = thetext Then
          alink.Click
          'waitForLoad
          Application.Wait Now + TimeValue("00:00:01")
          Application.SendKeys "{PGDN}", True
          Application.SendKeys "{PGUP}", True
          'I've also tried calling it without Application before it
          SendKeys "{F1}", True
          SendKeys "{F2}", True
          'Etc... Each of these not being received by IE 9

          followLinkByText = True
          Exit Function
      End If
  Next

End Function 
```

我完全不知所措，因为似乎大多数论坛或教程对 IE 9 没有任何不同。IE 对象是在类模块中创建并在`Class_Initialize`子模块中初始化的。我不确定这是否有帮助，但我真的不知道为什么这不起作用，以及如何将密钥发送到 IE 的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:21:32.920

这实际上是我对[这个问题的](https://stackoverflow.com/q/11652890/698590)[回答](https://stackoverflow.com/a/11653563/698590)的副本，但它可能仍然适用。

当您尝试使用 IE 时，IE 窗口是否处于活动状态`SendKeys`？如果没有，这将解释它不起作用。

要激活您的窗口：

在你的模块的开头，放这行代码：

```
Public Declare Function SetForegroundWindow Lib "user32" (ByVal HWND As Long) As Long 
```

这将允许您访问`SetForegroundWindow`Windows 内置的功能。

在您的代码中，与您的 IE 对象交互时，记录该窗口的 HWND，如下所示：

```
Dim HWNDSrc As Long
HWNDSrc = ie.HWND 
```

然后在您加载页面后，使用它继续，然后发送您的关键操作：

```
SetForegroundWindow HWNDSrc 
```

但是，这可能不是必需的，具体取决于您与 IE 交互的方式。换句话说，如果您不需要查看/触摸窗口（您需要这样做`SendKeys`），您仍然可以使用代码中的对象进行交互。

* * *

现在，我看到您在单击后使用 Application.Wait，但这并不能保证 IE 页面已加载。此功能应该对此有所帮助。

```
 Public Sub WaitForIE(myIEwindow As InternetExplorer, HWND As Long, WaitTime As Integer)

    ' Add pauses/waits so that window action can actually
    ' begin AND finish before trying to read from myIEWindow.

    ' myIEWindow is the IE object currently in use
    ' HWND is the HWND for myIEWindow
    ' The above two variables are both used for redundancy/failsafe purposes.
    ' WaitTime is the amount of time (in seconds) to wait at each step below. 
    ' This is variablized because some pages are known to take longer than 
    ' others to load, and some pages with frames may be partially loaded,
    ' which can incorrectly return an READYSTATE_COMPLETE status, etc.

    Dim OpenIETitle As SHDocVw.InternetExplorer

    Application.Wait DateAdd("s", WaitTime, Now())

    Do Until myIEwindow.ReadyState = READYSTATE_COMPLETE
        ' Wait until IE is done loading page and/or user actions are done.
    Loop

    Application.Wait DateAdd("s", WaitTime, Now())

    While myIEwindow.Busy
        DoEvents  ' Wait until IE is done loading page and/or user actions are done.
    Wend

    On Error Resume Next
    ' Make sure our window still exists and was not closed for some reason...
    For Each OpenIETitle In objShellWindows
        If OpenIETitle.HWND = HWND Then
            If Err.Number = 0 Then
                Set myIEwindow = OpenIETitle
                Exit For
            Else
                Err.Clear
            End If
        End If
    Next OpenIETitle
    On Error GoTo 0

End Sub 
```

* * *

冒着冗长的风险，我已经用这些建议更新了你的代码......

```
' Added by Gaffi
Public Declare Function SetForegroundWindow Lib "user32" (ByVal HWND As Long) As Long
Dim HWNDSrc As Long

Dim ie As Object

'This creates the IE object
Sub initializeIE()
   'call this subprocedure to start internet explorer up
   Set ie = CreateObject("internetexplorer.application")

' Added by Gaffi
   HWNDSrc = ie.HWND

   pos = 1
End Sub

'Initialize the class object
Private Sub Class_Initialize()
   initializeIE
End Sub

Function followLinkByText(thetext As String) As Boolean
  'clicks the first link that has the specified text
  Dim alink As Variant

  'Loops through every anchor in html document until specified text is found
  ' then clicks the link
  For Each alink In ie.document.Links
     If alink.innerHTML = thetext Then
          alink.Click
          'waitForLoad

' Added by Gaffi
          WaitForIE ie, HWNDSrc, 1
          SetForegroundWindow HWNDSrc

          'Application.Wait Now + TimeValue("00:00:01")
          Application.SendKeys "{PGDN}", True
          Application.SendKeys "{PGUP}", True
          'I've also tried calling it without Application before it
          SendKeys "{F1}", True
          SendKeys "{F2}", True
          'Etc... Each of these not being received by IE 9

          followLinkByText = True
          Exit Function
      End If
  Next

End Function 
```

# rally - Rally：如何让应用与时间盒过滤器兼容？

> ID：11655592
> 
> 赞同：1
> 
> 时间：2012-07-25T17:47:32.253
> 
> 标签：rally

在页面上显示多个应用程序时，我知道我可以使用全局过滤器，例如发布或迭代过滤器，而不是为每个应用程序设置发布或迭代过滤器。但是，全局过滤器似乎不适用于迭代摘要应用程序，但它适用于单个过滤器。我查看了迭代摘要应用程序的源代码，以使其与全局过滤器（又名时间盒过滤器）兼容。请参阅[http://developer.rallydev.com/help/Apps-Timebox-Filtered-Dashboards](http://developer.rallydev.com/help/Apps-Timebox-Filtered-Dashboards)了解更多信息。

此外，自定义网格应用程序的另一个问题是如何制作它，这样我就不必像 Iteration.Name = "IR 1" 那样对查询进行硬编码，而是使用全局过滤器数据来进行查询。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:24:42.203

自定义网格应自动尊重仪表板上的全局时间框过滤器。它将在时间框过滤器上对输入的任何查询进行 AND（因此无需手动添加）。

迭代摘要应用程序应该与全局过滤器一起使用。您能否提供有关问题所在的更多信息？

# ruby-on-rails - 我应该使用类方法还是实例方法，为什么？

> ID：11655593
> 
> 赞同：9
> 
> 时间：2012-07-25T17:47:33.290
> 
> 标签：ruby-on-rails, ruby, oop, model-view-controller

在我的 Rails 应用程序中，创建业务时，我有一个包含以下字段的表单：

```
 <%= check_box_tag(:default_company) %> 
   <%= label_tag(:default_company, "Set Company as Default") %> 
```

本质上，当我创建业务时，如果他们选中此框，我需要它运行类似于以下代码的内容：

```
def set_default_company(company, user)
  exists = DefaultCompany.find(user.id)
  if exists
    exists.update_attributes(company: company)
  else  
    DefaultCompany.create(company: company, user: user)
  end
end 
```

在学习时，我通常会在我的控制器中做这些事情，但我正在尝试遵循最佳实践并使用胖模型、瘦控制器，所以我想使用这样的逻辑：

```
def create
  @company = Company.new(params[:company])

  if @company.save
    if params[:default_company]
      Company.set_default_company(@company.id, current_user.id,)
    end
    flash[:notice] = "Company was successfully created."
    redirect_to @company
  else
    redirect_to new_company_path
  end
end 
```

这是我对使用类方法还是实例方法来调用`set_default_company`. 他们似乎都可以工作，我看不出对其中一个有什么好处。

除了向我提供有关使用哪种方法的任何信息之外，如果有人可以向我展示将其作为类方法与实例方法编写的简要实现，它可能会让我更好地理解原因。

以下是我将如何编写它们：

```
def self.set_default_company(company, user)
  # Logic here
end

def set_default_company(company, user)
  # Logic here
end 
```

以这种方式写它们我也没有看到任何好处。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T18:05:31.577

顾名思义，模型上的实例方法应该用于与用户的特定实例（调用该方法的实例）相关的逻辑/操作。因此，您可以考虑将用户的默认公司设置为上的实例方法`User`。类方法适用于不对模型的单个实例进行操作的事物，或者适用于您没有可用实例的情况。例如，您可能有一个类方法来整理您的数据库，例如`User.purge_expired_users`它不适用于单个用户对象。

例如

```
class User
  def set_default_company(company)
    exists = DefaultCompany.find(self.id)
    if exists
      exists.update_attributes(company: company)
    else  
      DefaultCompany.create(company: company, user: self)
    end
  end
end 
```

那么您的控制器方法将如下所示：

```
def create
  @company = Company.new(params[:company])

  if @company.save
    if params[:default_company]
      current_user.set_default_company @company
    end
    flash[:notice] = "Company was successfully created."
    redirect_to @company
  else
    redirect_to new_company_path
  end
end 
```

`Company`或者，您可以从另一个角度考虑关系，并在eg上放置一个实例方法`company.set_as_default_for(user)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T18:03:46.067

我实际上会`set_default_company`在`User`. A`User`有一个默认值`Company`；为什么`Company`需要它默认的用户？

```
class User
    def set_default_company(company)
        exists = DefaultCompany.find(id)
        if exists
            exists.update_attributes(company: company)
        else  
            DefaultCompany.create(company: company, user: self)
         end
     end
 end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T18:10:11.423

在我看来，`class method`如果所讨论的方法表示在所有实例化对象中相当通用的信息/行为，我总是创建一个`instance methods`，与我在我认为它更像是所讨论的实例化对象的特定操作时使用的不同。

但这是我的观点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T18:09:09.177

一些事情：你有一个 DefaultCompany 的单独表吗？这似乎应该是公司表上的布尔标志。

其次，公司和用户之间是否存在关联？如果是这样，似乎最好的方法是

在用户模型中

```
def set_default_company(company)
  self.companies.each do |c|
    c.update_attributes(:default => false)
  end
  company.update_attributes(:default => true)
end 
```

或者在公司模型中

```
def set_as_default
  update_attributes(:default_company => true)
end 
```

# android - 列出 Android 控件的事件处理程序

> ID：11655595
> 
> 赞同：1
> 
> 时间：2012-07-25T17:47:38.493
> 
> 标签：android, android-controls

我是 Android 开发和 Eclipse 的新手。多年来，我一直在 ASP.Net 和 MS Visual Web Developer 上进行编码。在 VWD 中，当您将控件添加到设计视图时，双击它会自动将您带到刚刚创建的控件的 OnClick 功能的代码视图。您还可以从设计视图中查看控件的可能事件处理程序列表。

但我似乎无法在 Eclipse 中找到此功能。有这样的事吗？我在 Google 上进行了搜索，发现最好的就是这个（同样的问题，但没有答案）。

[http://www.techrepublic.com/forum/questions/101-341077/event-handlers-in-eclipse](http://www.techrepublic.com/forum/questions/101-341077/event-handlers-in-eclipse)

请问有人给点建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:54:08.560

不，这不是 Eclipse 的工作方式。您在 xml 文件中添加控件，然后在要加载该布局的活动中，在要响应点击的元素上添加 onClickListener，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:00:38.393

你所说的在 Eclipse 中并不完全存在。您必须手动打开您的 java 类并将该方法添加到那里的相应 java 活动中。

例如，如果您`android:onClick XML`在布局 XML 文件中将属性设置为“myAwesomeMethod”，那么在使用该布局的相应 Activity 中，您需要确保定义了“myAwesomeMethod”方法。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- layout elements -->
<Button android:id="@+id/mybutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Click me!"
    android:onClick="myAwesomeMethod" />
<!-- even more layout elements --> 
```

在您的 java Activity 类中：

```
public void myAwesomeMethod(View v) {
    // does something very awesome
} 
```

注意：您也可以以编程方式执行此操作，这是我通常所做的。但是，定义 android:onClick 方法将为您节省几行代码。

有关更多信息，请查看[此帖子](https://stackoverflow.com/questions/4153517/how-exactly-does-the-androidonclick-xml-attribute-differ-from-setonclicklistene)。它提供了更多关于如何将 onClick 处理程序分配给按钮以及您可以这样做的两种方式的详细信息。

# c# - Windows Phone 页面在应用程序生命周期中的持久实例

> ID：11655596
> 
> 赞同：1
> 
> 时间：2012-07-25T17:47:39.950
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我正在开发一个简单的 Windows Phone 应用程序，它基本上具有以下功能：

*   第1页，有一个按钮可以获取用户的位置，并导航到第2页
*   页面2，使用用户位置和地图控件显示地图，查看中心是用户的位置。有一个应用栏按钮可以导航到第 3 页。
*   第 3 页，在此页面中显示一些附近的地点列表，一旦用户选择其中一个地点，它将返回第 2 页，将地点固定在地图控件上。

所以这里有一个问题：
在这种情况下，我想保持第 2 页数据处于活动状态，这样我就不必每次从第 3 页返回时都重新初始化第 2 页。如果我可以在某处保留第 2 页的实例，那就太好了，并且每次我想从第 3 页回来时都使用它。到目前为止，我知道有两种方法，一种是在 Page2 xaml 中，我可以有类似的东西：

```
<Page
  x:class "Page2.keepPageAlive"
  ... 
```

另一种是使用[AddBackEntry](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.addbackentry.aspx)。但我不确定哪一个适合我的情况，或者有没有其他好的方法。

请分享你的想法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:36:43.700

只要您从 page2 导航到 page3，然后使用 NavigationService.GoBack() 返回 page2，page2 实例就会保持活动状态。所以你基本上没有什么可以改变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:35:59.580

在 WP7 导航堆栈中，第 2 页仍然存在。因此，如果您从第 1 页导航到第 2 页再到第 3 页，则所有 3 页都存在。

如果您从第 3 页调用 NavigationService.GoBack()，它将弹出第 3 页并恢复第 2 页的先前实例，而不是创建第 2 页的新实例。这也是您单击“后退”按钮时发生的情况。

只有当您调用 NavigationService.Navigate() 时才会创建一个新实例。

# android - 将视图转换为可绘制作为地图叠加项

> ID：11655605
> 
> 赞同：0
> 
> 时间：2012-07-25T17:48:22.340
> 
> 标签：android, bitmap, android-mapview, drawable

我有一个可以正常工作并已设置的 MapView，正在绘制的覆盖项目（当简单地引用为可绘制对象时）工作得很好。但是，每个可绘制项都需要在其上包含一个数值（例如，叠加项 1，需要在其上显示 #1）。我创建了布局样式 R.layout.map_bubble_standard。我正在尝试将该视图转换为位图，并将该位图转换为要在地图上显示的可绘制对象。但是，当地图加载时，什么都没有显示。这就是我正在做的...

```
 LayoutInflater inflater = (LayoutInflater) _context.getSystemService(     Context.LAYOUT_INFLATER_SERVICE );
        LinearLayout bubbleView = (LinearLayout)inflater.inflate(R.layout.map_bubble_standard, null);

        bubbleView.setDrawingCacheEnabled(true);
        bubbleView.buildDrawingCache();

        //drawable = _context.getResources().getDrawable(R.drawable.map_pin_48);
        drawable = new BitmapDrawable(_context.getResources(), bubbleView.getDrawingCache());
        bubbleView.setDrawingCacheEnabled(false);

    OverlayItem oi = _overlays.get(whichOne); 
    oi.setMarker(boundCenterBottom(drawable)); 
```

我的代码很好地完成了该方法，但没有在地图上绘制任何内容。谁能帮助确定我做错了什么？

**[编辑] - 已解决**

我使用了我找到的另一个链接，它提供了解决此问题的建议： [这里](https://stackoverflow.com/questions/2339429/android-view-getdrawingcache-returns-null-only-null?rq=1)

希望这也可以在将来帮助其他人。作为参考，我还将视图的充气机和充气机对象本身移到了逐项叠加类的默认构造函数中。

```
_bubbleLayout.setDrawingCacheEnabled(true);

        _bubbleLayout.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        _bubbleLayout.layout(0, 0, _bubbleLayout.getMeasuredWidth(), _bubbleLayout.getMeasuredHeight()); 

        _bubbleLayout.buildDrawingCache(true);
        Bitmap b = Bitmap.createBitmap(_bubbleLayout.getDrawingCache());
        _bubbleLayout.setDrawingCacheEnabled(false); // clear drawing cache 

        //drawable = _context.getResources().getDrawable(R.drawable.map_pin_48);
        drawable = (Drawable) new BitmapDrawable(_context.getResources(),b);

    OverlayItem oi = _overlays.get(whichOne); 
    oi.setMarker(boundCenterBottom(drawable)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:02:41.593

不确定这是否正确，但根据[文档](http://developer.android.com/reference/android/view/View.html#setDrawingCacheEnabled%28boolean%29)：

> 要从缓存中受益，您必须通过调用 getDrawingCache() 请求绘图缓存，如果返回的位图不为空，则将其绘制在屏幕上。

对我来说，这意味着你必须`View`在屏幕上画一次，然后才能得到任何东西。如果它从未被实际绘制过，那么它就没有缓存可供提取。您是否首先在屏幕上显示此内容？

# xml - XPath - 当没有具有属性的子级时查找父级

> ID：11655614
> 
> 赞同：0
> 
> 时间：2012-07-25T17:48:39.500
> 
> 标签：xml, xpath

我试图找到对没有具有特定属性值的子节点（属性）的节点（报告）的每个引用。

我的xml是：

```
<report xmlns="http://www.eclipse.org/birt/2005/design">
<property name="comments">comment</property>
<property name="test">sdcs</property>
<property name="eventHandlerClass">sdcs</property>
</report> 
```

我的 XPath 是：

```
/*[local-name()='report'][not(/*[local-name()='property'][@name='eventHandlerClass'])] 
```

问题是，当我正在寻找它不返回任何东西时，它正在返回报告。

有什么想法是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:03:14.510

问题是您的报告包含一个不是 evenHandlerClass 的属性。你想说没有这样的孩子，可以通过计算这样的孩子并得到零来完成：

```
/*[local-name()='report'][count(*[(local-name()='property' and @name="eventHandlerClass")])=0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:02:48.963

请在执行 XPath 之前注册一个命名空间。

使用`local-name()`可以，但它会产生非常不优雅（且效率低下）的 XPath。

假设您已注册`"http://www.eclipse.org/birt/2005/design"`为`birt`：

```
//birt:report[not(birt:property[@name='eventHandlerClass'])] 
```

如果由于某种原因您无法注册名称空间，请使用（为易读而包装）

```
//*[
  local-name() = 'report' 
  and not(
    *[@local-name() = 'property' and @name='eventHandlerClass']
  )
] 
```

# windows-services - ADPlus '一些选定的进程没有运行'，除了它们。我究竟做错了什么？

> ID：11655616
> 
> 赞同：0
> 
> 时间：2012-07-25T17:48:44.787
> 
> 标签：windows-services, windows-server-2003, adplus

尝试在当前在生产 Windows 2003 服务器上运行的 WindowsServiceHost.exe 上运行 ADPlus，但是，当我尝试运行 AD 时，它告诉我进程没有运行。为什么？

我的命令：%filepath%\ADPlus -hang -pn %filepath%\WindowsServiceHost.exe -o %Output Directory%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:28:32.507

看起来问题是.exe的文件路径。它不需要，一旦文件路径被省略，它就会运行。

# android - 写入预先存在的 SQLite 数据库 Android

> ID：11655619
> 
> 赞同：0
> 
> 时间：2012-07-25T17:48:47.750
> 
> 标签：android, database, sqlite, insert

好的，所以我的 android 应用程序使用了一个预先存在的数据库，我使用它来访问它

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

现在我从数据库中读取数据没有问题，但我似乎无法添加到它。问题是数据库文件永远不会更新，只有我当时运行的数据库实例。我需要对数据库所做的更改是永久性的，所以我尝试序列化数据库的实例，但发现无法完成。我认为在我添加到我的数据库实例之后，我需要将它导出到一个文件中，并用它覆盖数据库文件。我不确定我会怎么做，并阅读了上面网站上的每一条评论，并且在这里也浏览了无数的帖子。

我可能是错的，但这是我能想象的唯一方法。

```
public void addTenantWithoutProperty(String name, String email, String phone){

    //This method reads from my database
ArrayList<Tenants> tenants = (ArrayList<Tenants>) getAllTenants();

//Checks data in the database before I try add to it
for(int i = 0;i < tenants.size();i++){
 String name;
 name = tenants.get(i).getName();

 System.out.println(i + " before " + names);
}

//I have also tried adding to it using ContentValues, but it makes no difference
String tenantsql = "INSERT INTO tenants (name, phone, email) VALUES ('" + name + "','"        
+ phone + "','" +  email + "')";

myDataBase.execSQL(tenantsql);

tenants = (ArrayList<Tenants>) getAllTenants();

 //checks data in database after insertion 
 for(int i = 0;i < tenants.size();i++){
     String names;
     names = tenants.get(i).getName();

     System.out.println(i + " after " + names);
 }

 } 
```

这在单击按钮时调用，输出显示正在添加数据，但不会导致数据库中的永久更改。我怎样才能解决这个问题？任何帮助将不胜感激

编辑：解决！createDataBase() 中的 if 语句读取 if(!dbExist)，更改为 if(dbExist) 并且工作正常。问题是即使数据库存在，它也被我的资产文件夹中的数据库文件覆盖。感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:03:30.157

正如[mhradek](https://stackoverflow.com/users/226805/mhradek)所说，您的 SQLite DataBaseHelper 类似乎在此处以**READONLY**权限打开数据库：

```
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY); 
```

您可能想尝试使用 READ 和 WRITE 权限打开数据库，将**OPEN_READONLY**标志更改为**OPEN_READWRITE**。这将导致以下代码：

```
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE); 
```

Google 的 Android 文档在这里解释了这两个标志[Android OPEN_READONLY Flag](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#OPEN_READONLY)

这可以解释为什么单击按钮似乎正在添加数据，但数据库并没有永久更改，因为如果以这种方式打开它就无法写入。

让我知道更改标志是否适合您。

干杯!

# java - 如何实现对两个相同类的引用？

> ID：11655620
> 
> 赞同：1
> 
> 时间：2012-07-25T17:48:47.470
> 
> 标签：java, design-patterns

我有两个具有相同实现但名称不同的类。它们是生成的，我无法修改它们：

```
public class Foo {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

public class Bar {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

我需要用数据填充这些类，并且由于它们是相同的，因此更愿意使用单个类或引用来完成，然后根据需要强制转换为（或希望解决方案更优雅）Foo 或 Bar。从概念上讲：

```
FooOrBar fob = ????;   
fob.setName("XYZ");

Foo f = fob.(???);
Bar b = fob.(???); 
```

我已经研究过泛型，但它似乎是为了当你真的不知道你将在哪个类上运行时。我是否有可能拥有某种类型的类或参考来实现这一目标？

7月26日编辑：

抱歉，如果这样的跟进形式不好，我可以在需要时发布新的。我正在实施 Tomasz 的适配器模式，但我的最后一步与他的不同。我需要接口对象的条件分配。以下是我所拥有的，到目前为止我没有收到任何错误或警告，但我想知道这是否出于某种原因不是好的做法？也许我应该使用反射或泛型来确定接口的类？这将是一个只有我的代码会调用并且我会知道条件的方法。我搜索了条件接口分配，但没有找到太多。

```
FooOrBar fob;  //interface

if (condition true) {

    fob = new FooAdapter();  //FooAdapter implements FooOrBar
} else {
    fob = new BarAdapter();  //BarAdapter implements FooOrBar
}

fob.setName("XYZ"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:52:53.540

您要查找的内容称为[鸭子类型](/questions/tagged/duck-typing "显示标记为“鸭子打字”的问题")，Java 不支持。尝试像[groovy](/questions/tagged/groovy "显示标记为“groovy”的问题")和[jruby](/questions/tagged/jruby "显示标记为“jruby”的问题")这样的动态语言。

在 Java 中，假设您不能修改`Foo`and `Bar`，您将需要一个*适配器*模式。`Foo`首先在and上创建一个抽象`Bar`：

```
public interface FooOrBar {
    String getName();
    void setName(String name);
} 
```

并有两个这样的适配器（`BarAdapter`几乎相同）：

```
public class FooAdapter implements FooOrBar {

    private final Foo foo;

    public FooAdapter(Foo foo) {
        this.foo = foo;
    }

    public String getName() {
        return foo.getName();
    }

    public void setName(String name) {
        foo.setName(name);
    }

} 
```

现在你可以说：

```
FooOrBar fob = new FooAdapter(foo);
FooOrBar fob2 = new BarAdapter(bar);

fob.setName("XYZ"); 
```

我将把实际价值留给你（你真的需要它吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:57:26.433

您可以创建一个标记类。

这被认为是一种反模式，因为它们不如使用类层次结构，但是由于您无法控制层次结构，因此您别无选择。

这使您无需借助`instanceof`.

```
class FooBar {
    public static enum Mode { FOO, BAR }
    Foo foo;
    Bar bar;
    Mode mode;
    FooBar(Foo foo) {
        mode = Mode.FOO;
        this.foo = foo;
    }
    FooBar(Bar bar) {
        mode = Mode.BAR;
        this.bar = bar;
    }

    public String getName() {
        switch(mode) {
            case FOO: foo.getName();
            case BAR: bar.getName();
            default: throw new IllegalStateException();
        }
    }

    public void setName(String name) {
        switch(mode) {
            case FOO: foo.setName(name); return;
            case BAR: bar.setName(name); return;
            default: throw new IllegalStateException();
        }
    }
    public Mode getMode() { return mode; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:58:55.217

大概您无法控制生成的类（否则，这将是微不足道的！）。

另一种方法是创建一个辅助类并使用反射来设置您需要设置的每个属性（请参阅[How do I invoke a Java method when given the method name as a string?](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:55:53.670

我不确定您的要求是什么，但您是否考虑过创建包含 foo 和 bar 实例的包装类的最简单解决方案？

```
class FooOrBar {
    private Foo foo;
    private Bar bar;

    public setName(name) {
        if (foo != null) foo.name = name;
        if (bar != null) bar.name = name;
    }
} 
```

您可以根据需要添加验证，以确保单个包装器仅引用一个项目。

# javascript - 淘汰 js 应用程序的正确文件结构是什么？

> ID：11655635
> 
> 赞同：3
> 
> 时间：2012-07-25T17:49:54.257
> 
> 标签：javascript, model-view-controller, mvvm, knockout.js

我开始学习淘汰赛 js，我计划构建一个中等规模的应用程序，比如满足 1000 个用户和 1000 个条目。我想知道你们如何为淘汰 js 应用程序构建 js 文件？它就像一个常规的 MVC 文件结构

库/

应用程序/

应用程序/模型/

应用/查看/

应用程序/控制器/

或者你的结构不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:09:02.320

这似乎是一个非常开放的问题，因为没有“正确”的方式来构建应用程序。此外，不同大小的应用程序将从不同的结构中获得不同的好处。您可能只有几个模型，根本不需要任何文件夹。你需要几个。无论如何，继续我的回答。

由于您专门询问淘汰赛，这假设您只了解客户端 javascript，而不是您的服务器的代码。如果您谈论的是整个应用程序结构，请在您的问题中澄清这一点。

首先，Knockout 没有控制器。它有 ViewModel。这看起来像是语义上的区别，但实际上并非如此。控制器相对笨拙；他们将视图中的操作路由到模型中的业务逻辑。另一方面，ViewModel 很聪明。它们包含业务逻辑以及视图将使用的公共属性和方法。

模型通常不是 Knockout 方面的一部分。它们将在您的服务器上，并代表您的数据库表（这是一个概括，显然存在例外）。有了这两个，我们消除了`controller`and`model`目录，并留下了一个`viewmodels`目录。

视图更棘手。视图是您的 HTML，但如果您想重用它们，它们也可以是您的淘汰模板。为了在您的“视图”和“模板”之间保持分离，我将调用此目录`templates`。

最后，我不会将其中的任何内容放在`lib`目录中。您的应用程序本身并不是一个库。它是应用程序。所有这些都应该在您的公共 javascript 文件夹下（因为网络需要访问它），但我看不出有任何理由将它推到树的下方。当然，您需要一个`lib`目录来存放其他插件，但它会被您的 Knockout 应用程序使用，因此`lib`应该与您的应用程序处于同一级别。

# python - 提高多段落扫描的 OCR 性能

> ID：11655645
> 
> 赞同：23
> 
> 时间：2012-07-25T17:50:51.947
> 
> 标签：python, ocr, tesseract

我正在开展一个项目，该项目涉及提取以 PDF 格式存储的文本科学论文。对于大多数论文，使用 PDFMiner 很容易完成，但一些较旧的论文将其文本存储为大图像。本质上，扫描一张纸，该图像文件（通常是 PNG 或 JPEG）包含整个页面。

我尝试通过它的[python-tesseract](http://code.google.com/p/python-tesseract/)绑定使用 Tesseract 引擎，但结果非常令人失望。

在深入探讨我对这个库的问题之前，我想提一下，我愿意接受有关 OCR 库的建议。似乎很少有原生的 python 解决方案。

[这](http://dl.dropbox.com/u/6160029/1_Im0.jpeg)是我试图提取文本的一张这样的图像（JPEG）。我在上面链接到的 python-tesseract google 代码页上的示例片段中提供的确切代码。我应该提到文档有点稀疏，所以很可能我的代码中的许多选项之一配置错误。任何建议（或深入教程的链接）将不胜感激。

[这](http://dl.dropbox.com/u/6160029/1_Im0.txt)是我尝试 OCR 的输出。

**我的问题如下：**

1.  我正在使用的代码中是否有任何不理想的地方？有没有更好的方法来做到这一点？也许是一个不同的图书馆？
2.  我可以执行什么样的预处理来改进检测？这些图像都是黑白的，但我是否应该设置一个阈值并将其上方的任何内容设置为单值黑色，并将其下方的所有内容设置为空值白色？还要别的吗？
3.  一个更具体的问题：可以通过对单个单词执行 OCR 来提高性能吗？如果是这样，任何人都可以建议一种方法来分隔图像文件中的单个单词（例如：上面链接的那个）并将它们提取到可以独立处理的单独图像中吗？
4.  PDF 页面图像中嵌入的图形和其他图像的存在是否会干扰 OCR？我应该删除这些吗？如果是这样，任何人都可以建议一种自动删除它们的方法吗？

**编辑：** 为简单起见，这是我使用的代码。

```
import tesseract
api = tesseract.TessBaseAPI()
api.Init(".","eng",tesseract.OEM_DEFAULT)
api.SetPageSegMode(tesseract.PSM_AUTO)

mImgFile = "eurotext.jpg"
mBuffer=open(mImgFile,"rb").read()
result = tesseract.ProcessPagesBuffer(mBuffer,len(mBuffer),api)
print "result(ProcessPagesBuffer)=",result 
```

这是替代代码（尽管性能似乎非常相似，但此问题中未显示其结果）。

```
import cv2.cv as cv
import tesseract

api = tesseract.TessBaseAPI()
api.Init(".","eng",tesseract.OEM_DEFAULT)
api.SetPageSegMode(tesseract.PSM_AUTO)

image=cv.LoadImage("eurotext.jpg", cv.CV_LOAD_IMAGE_GRAYSCALE)
tesseract.SetCvImage(image,api)
text=api.GetUTF8Text()
conf=api.MeanTextConf() 
```

谁能解释这两个片段之间的区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T22:20:28.333

如果您稍微修改一下，Tesseract 在干净的输入文本（如您的示例）上非常好。一些建议：

*   在自动化之前，在命令行开始使用 tesseract
*   如果可能，限制您的字符集（例如，查看 /usr/local/share/tessdata/configs 的 ./digits - 将其配置为英文字符大/小写等）并将其作为命令行参数提供
*   仅使用 PNG 或 TIFF 图像（旧版本为 TIFF），因为 JPG 会引入伪影
*   对图像进行上采样，使您的文本大于当前的小字体。Tesseract 行 > 10 像素高的字符（如果有记忆的话），对于小字符，它的性能肯定会更差
*   如果您已经是双层，则无需进行阈值处理，但这样做不会有任何伤害，并且您可以看到与 tesseract 将看到的完全相同的图像

我会回来看看我是否可以提供更多帮助，但请加入 tesseract 邮件列表，它们真的很有帮助。

旁注 - 我有一些 pytesseract 补丁，我应该发布这些补丁，以便通过 API 获取字符、置信度和单词（这在几个月前是不可能的）。喊他们是否有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T17:55:11.590

第一个示例将文件作为缓冲区读取，然后将其中继到 tesseract-ocr 而不进行任何修改，而第二个示例将文件读取为 opencv 格式，这将允许您进行一些图像修饰，例如更改纵横比、灰度和等使用 cv 库。如果您想在将图像传递给 tesseract 之前进行图像处理，则第二种方法非常有用。

顺便说一句，我是 python-tesseract 的所有者。如果您想提问，您可以随时将您的问题转发到[http://code.google.com/p/python-tesseract](http://code.google.com/p/python-tesseract)

乔

# javascript - ASP.net 控件中的其他客户端验证

> ID：11655649
> 
> 赞同：0
> 
> 时间：2012-07-25T17:51:12.857
> 
> 标签：javascript, asp.net, validation

我正在尝试将一些额外的 javascript 破解到旧的 ASP.net 表单中，以进行验证。该表单使用 ASP.net 验证器，如`asp:RangeValidator`和`asp:RequiredFieldValidator`。

这是为“保存”按钮生成的 javascript。

```
<input type="submit" name="ctl00$cphContent$btnSave" value="Save"
 onclick="javascript:if(!validateFirstDate('ctl00_cphContent_txtDate', 
 'ctl00_cphContent_txtDateRepayment', 'ctl00_cphContent_lblRepaymentMode'))
  return false;
WebForm_DoPostBackWithOptions(new 
 WebForm_PostBackOptions(&quot;ctl00$cphContent$btnSave&quot;, &quot;&quot;,
true, &quot;&quot;, &quot;&quot;, false, false))" id="ctl00_cphContent_btnSave" class="ButtonStyle"> 
```

如图所示，使用的第一部分`'validateFirstDate'`是我使用`btnSave.Attributes.Add("onclick", "javascript:if(!validateFirstRepaymentDate...` while添加的新函数，`WebForm_PostBackOptions...`由 ASP.net 生成以进行验证。

问题：我希望我的附加脚本在 ASP.net 脚本之后运行，并且仅在默认验证失败时运行（而不是像现在那样执行第一个函数）。我不知道该怎么做。

我真的很感激任何帮助。

（我通常在 Java 中工作，但我被要求修复这个在 ASP.net 中的旧项目）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:02:56.717

您可以重写`ValidatorHookupControl`以在 ASP 验证函数之后调用您的函数。 [更多信息](http://msdn.microsoft.com/en-us/library/aa338815%28v=vs.71%29.aspx)

# css - 如何删除谷歌浏览器文本下的蓝色下划线？

> ID：11655652
> 
> 赞同：0
> 
> 时间：2012-07-25T17:51:40.933
> 
> 标签：css, google-chrome

这只发生在 Google chrome 中，我使用的是 chrome 17.0.928 版本。这在 Firefox 中运行良好，但在 google chrome 中出现蓝色下划线。

```
.thumbnail:hover{z-index: 50;text-decoration: none;position:relative;}
.thumbnail span{  position: absolute;background:#000;padding: 5px;left: -1000px;
 border: 0px solid #ddd;visibility: hidden;color: #fff;width:388px;height:190px;text-decoration: none;}
.thumbnail:hover span{ text-align:left;visibility: visible;top: 0;left: 110px;text- decoration:none; 
 top:-120px;-webkit-box-shadow: 0 8px 6px -6px #aaa; -moz-box-shadow: 0 8px 6px -6px   #aaa;box-shadow: 0 8px 6px -6px #aaa;}
.hoverbold {
text-decoration: none;
font-family: verdana;
font-size: 11px;
color: #B09F6E;
} ​ 
```

[http://jsfiddle.net/NW8Nw/3/](http://jsfiddle.net/NW8Nw/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:58:11.647

其实很简单。您必须将链接样式分开，我用它摆脱了它

```
.thumbnail a:link {
    text-decoration: none;       
} 
```

你应该对`a:hover`,`a:visited`和做同样的事情`a:active`。

编辑：
很久以后，我意识到你可以只用一个选择器来做到这一点：

```
.thumbnail a { text-decoration: none; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:58:41.810

删除链接每个状态的装饰

```
a:link, a:visited, a:hover, a:active
{text-decoration:none;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T18:01:12.160

简单地：

```
.thumbnail a {
    text-decoration: none;
} 
```

附带说明一下，您的标签中有多个`<div>`s 。标签应该只包含内联元素。`<a>``<a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-07T03:41:33.403

好吧，我遇到了同样的问题，由于找不到可能的解决方案，所以我这样做了。

```
div {
      text-decoration:underline;
      text-decoration-color:white;
    } 
```

在这里，您的 text-decoration-color 和 background-color 应该相同，从而隐藏了蓝色下划线。希望这可以帮助

# opencv - opencv rvec 到球坐标

> ID：11655661
> 
> 赞同：1
> 
> 时间：2012-07-25T17:52:09.623
> 
> 标签：opencv, rotation, coordinates, perspective

我正在使用 opencv solvePnP 来获取图像的旋转和平移向量。我不确定如何使用旋转矢量。我想将旋转矢量转换为两个角度，倾角和方位角（如球坐标），因为这样我会更容易使用。

我创建了一些测试用例： 3d 点位置：(0,0,0) (0,0,1) (1,0,1) (1,0,0) 相机位置：(.5, -1, .5 ) 旋转向量：(1.57, 0, 0) （面向正y方向）

当我翻转对应的像素位置对应点时，相机位于 (.5, 1, .5) （面向负 y 方向），旋转矢量为 (1.2, 1.2, -1.2)。我不确定最后一个向量如何使它面向负 y 方向...

任何有关其工作原理或如何将其转换为倾角和方位角的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:20:19.390

我用opencv rodrigues把它变成了一个旋转矩阵，然后我乘以点0,0,1并用点的新位置来告诉我在看哪里

# php - codeIgniter 导航基础

> ID：11655662
> 
> 赞同：1
> 
> 时间：2012-07-25T17:52:17.493
> 
> 标签：php, codeigniter

如何在 Code Igniter 中进行简单的导航？我一直在所有这些伪文件夹上绊倒。最初我正在寻找通过一个文件夹挖掘并获取所有文件名的东西，然后将它们放在一个数组中以将它们排序到一个导航栏。

问题是，CI 似乎对每个页面中的伪文件夹使用公共函数。例如“public function aboutme()”将适用于 xxx.xxx.xxx.xxx/index.php/[classname]/aboutme。这对我来说是个问题，因为当制作像[test](/contactme)这样的链接时，会出现在 xxx.xxx.xxx.xxx/[classname]/contactme 上。

有没有更好的、动态的方法来制作导航栏而不使用数据库？我可以使用数据库，但我正在尝试学习 CI，因为我已经精通 MySQL，所以我想找到一种其他方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:00:15.207

也许自定义路线会对您有所帮助？

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

我不确定您的应用程序的结构，但是如果您使用多个控制器，它不会真正有帮助，并且没有一种简单的方法可以“自动”完成它。最好的办法是想出一些方法来管理导航项，例如数据库（如您所说）。

如果您只使用一个类，则可以`get_class_methods()`在该类上使用 PHP。

```
$pages = get_class_methods('classname');

foreach($pages as $page)
{
    echo anchor($page, ucfirst($page));
} 
```

这是一种非常简单的方法，您还必须过滤掉私有方法和`__construct`方法。

# spring - 使用 Spring 3 Hibernate 进行 saveOrUpdate 时出现数据库错误

> ID：11655666
> 
> 赞同：0
> 
> 时间：2012-07-25T17:52:41.293
> 
> 标签：spring, hibernate, spring-mvc

我正在使用 Spring 3、休眠等。我正在尝试更新表中的计数器 col。我选择行，将数据从行复制到新对象，然后尝试使用新对象执行 saveOrUpdate对象，我收到以下错误：

我的源代码：

```
public void updateSerialNumber(SerialNumber sn) {
        SerialNumber MySN = new SerialNumber();
        log.debug("sn:" + sn.toString());
        MySN.setName(sn.getName());
        MySN.setValue(sn.getValue());
        MySN.setSerialNumberId(sn.getSerialNumberId());
        log.debug("MySN:" + MySN.toString());
        sessionFactory.getCurrentSession().saveOrUpdate(MySN);              
} 
```

我的错误：

```
2012-07-25 13:46:30,725 [http-8080-3] DEBUG org.springframework.web.servlet.DispatcherServlet - Could not complete request
org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [org.uftwf.model.SerialNumber#CERT]
    at org.hibernate.engine.StatefulPersistenceContext.checkUniqueness(StatefulPersistenceContext.java:590) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:05:44.823

如果您只想更新计数器，为什么要复制对象？您不能将两个具有相同 ID（实体中的 @Id）的不同对象与休眠会话关联。我猜您正在使用您设置的属性之一`MySN`作为 ID。我建议使用代理 ID（afaik 这也是 hibernate 文档中推荐的），它可以由 db-sequence 分配（如果您使用的是 oracle DB），如果您必须复制对象，请离开这个代理ID `null`，你就可以保存它。

# php - 在 PHP 中将静态方法作为参数传递

> ID：11655667
> 
> 赞同：37
> 
> 时间：2012-07-25T17:52:43.647
> 
> 标签：php, class, static

在 PHP 中是否可以执行以下操作：

```
myFunction( MyClass::staticMethod ); 
```

这样“myFunction”将引用静态方法并能够调用它。当我尝试它时，我收到“未定义的类常量”（PHP 5.3）的错误，所以我想这不是直接可能的，但有没有办法做类似的事情？到目前为止，我管理的最接近的方法是将“函数”作为字符串传递并使用 call_user_func()。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-25T18:07:24.007

执行此操作的“php 方式”是使用与[is_callable](http://www.php.net/manual/en/function.is-callable.php)和[call_user_func](http://www.php.net/manual/en/function.call-user-func.php)完全相同的语法。

这意味着您的方法对存在是“中立的”

*   标准函数名
*   静态类方法
*   实例方法
*   关闭

对于静态方法，这意味着您应该将其传递为：

```
myFunction( [ 'MyClass', 'staticMethod'] ); 
```

或者如果您还没有运行 PHP 5.4：

```
myFunction( array( 'MyClass', 'staticMethod') ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-25T18:06:56.167

由于您已经提到它`call_user_func()`已被使用，并且您对具有该或将静态函数作为字符串传递的解决方案不感兴趣，因此这里有一个替代方案：使用匿名函数作为静态函数的包装器。

```
function myFunction( $method ) {
    $method();
}

myFunction( function() { return MyClass::staticMethod(); } ); 
```

我不建议这样做，因为我认为该`call_user_func()`方法更简洁。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-25T20:16:44.453

如果要避免使用字符串，可以使用以下语法：

```
myFunction( function(){ return MyClass::staticMethod(); } ); 
```

它有点冗长，但它的优点是可以进行静态分析。换句话说，IDE 可以轻松指出静态函数名称中的错误。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-19T21:18:46.470

**让我试着举一个详尽的例子......**

你会这样打电话：

```
myFunction('Namespace\\MyClass', 'staticMethod'); 
```

或像这样（如果您有要传递的参数）：

```
myFunction('Namespace\\MyClass', 'staticMethod', array($arg1, $arg2, $arg3)); 
```

以及您接收此呼叫的功能：

```
public static function myFunction($class, $method, $args = array())
{
    if (is_callable($class, $method)) {
        return call_user_func_array(array($class, $method), $args);
    }
    else {
        throw new Exception('Undefined method - ' . $class . '::' . $method);
    }
} 
```

类似的技术常用于 php中的[装饰器模式。](https://stackoverflow.com/questions/948443/how-to-implement-a-decorator-in-php)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-02T09:43:11.650

问题：

> 在 PHP 中是否可以执行以下操作：
> 
> myFunction(MyClass::staticMethod);

答案是肯定的。您可以让 staticMethod() 返回匿名函数。IE

```
private static function staticMethod()
{
    return function($anyParameters)
    {
        //do something here what staticMethod() was supposed to do
        // ...
        // ...
        //return something what staticMethod() was supposed to return;
    };
} 
```

然后你可以写

```
myFunction(MyClass::staticMethod()); 
```

但请注意，调用 staticMethod() 需要 ()。这是因为它现在返回匿名函数，该函数包装了您最初希望您的 staticMethod() 执行的工作。

当 staticMethod() 仅作为参数传入另一个函数时，这非常有效。如果您希望调用直接进行处理的 staticMethod()，则必须编写

```
MyClass::staticMethod()($doPassInParameters); 
```

请注意，与不将其包装在匿名函数中的情况相比，这可能需要一个额外的冗余步骤来检索函数指针。我只用它作为参数传递，所以不确定额外步骤的性能损失。或许可以忽略不计...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2022-01-01T10:48:28.970

这是因为传递常量和函数之间的区别。传递不带括号的参数名称表示常量（`MyClass::staticMethod`），带括号表示静态函数（`MyClass::staticMethod()`）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T19:43:58.143

这将在输出中显示第一次调用的 6 和第二次调用的 9。

```
$staticmethod1 = function ($max)
{
    return $max*2;
};

$staticmethod2 = function ($max)
{
    return $max*$max;
};

function myfunction($x){
    echo $x(3);
}

myfunction($staticmethod1);
myfunction($staticmethod2); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-02T11:57:34.613

从 PHP 7.4 开始，这是方便且 IDE 友好的：

```
myFunction(fn() => MyClass::staticMethod()); 
```

# php - 如何在 iOS (+PHP/mySql) 上处理持久状态多人游戏

> ID：11655670
> 
> 赞同：0
> 
> 时间：2012-07-25T17:52:50.010
> 
> 标签：php, mysql, ios, persistence

**提议的情况：**
想象一个 iPhone 游戏：一个农场，由 100 个可种植的农作物方块组成。每个作物方块有两种可能的状态（EMPTY 或 PLANTED）。农场对象（*100 个裁剪方块*）作为 json 字符串对象存储在 mySql 表中。我们公开了一个用于从游戏中检索/更新农场的 php web 服务。

**问题：**
你以前有过这条路吗？管理“农场对象”的一些好方法是什么，以便多个用户可以同时从他们各自的 iPhone 更新/检索同一个农场，而不会发生任何冲突？我是否需要从头开始并重新发明轮子（颠覆？）还是已经有一些合适的代码？

# android - 应用内结算接收者权限

> ID：11655673
> 
> 赞同：4
> 
> 时间：2012-07-25T17:52:56.183
> 
> 标签：android, permissions, android-manifest, billing, receiver

# 背景

我知道**Dungeons 清单**中的**接收器**（应用内计费示例，对于那些不知道的人）不**包含权限**元素，但 Lint 警告我：*“导出的接收器不需要权限 (...) 没有这个，任何应用程序都可以使用这个接收器”*。

 *****如果我理解正确，应用程序可能会用虚假数据欺骗我（可能在精心设计的系统中，不确定），可能会冒充 Play 应用程序并提供伪造的账单记录。

# 问题

1.  **是对的吗？对普通的消费类 Android 设备有什么影响？**

2.  **我应该写什么来期待正常的行为？**我认为这是允许我的接收器仅接收来自合法 Play 应用程序的广播。是`com.android.vending.BILLING`吗？在这种情况下，我认为欺骗系统可能会声明这一点。这导致3：

3.  我是否也应该与众所周知的谷歌公共签名进行比较，以避免欺骗系统？

# 评论

我知道其中一些对某些人来说可能看起来太多了，但我正在考虑这里的理论。:-)

另外，我没有使用清单定义的接收器，所以我从来没有过多关注它们。就是说，如果我说得不对，请纠正我。是的，我之前和现在确实阅读了文档。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:28:04.477

交易数据使用与您的开发者帐户绑定的唯一密钥进行签名。如果您正确验证了这些，则没有人可以欺骗交易。

至于为什么没有定义权限，Android中签名权限系统的工作方式是这样的：你说“这个广播只能被与发送者使用相同密钥签名的应用程序接收”。显然，您的应用使用与 Google Play 应用不同的密钥进行签名，因此无法使用基于签名的权限，并且必须公开。

从技术上讲，您可以检查谁发送了广播，获取该 UID 的包名称并与已知的 Google Play 包进行比较。随着新版本的发布，这些往往会发生变化，并且在某些设备（尤其是 Honeycomb 设备）上会有所不同，因此这可能无法很好地扩展并给您带来误报。*****

# android - 何时使用 FragmentStatePagerAdapter 获取片段中的视图大小

> ID：11655676
> 
> 赞同：2
> 
> 时间：2012-07-25T17:53:26.500
> 
> 标签：android, android-fragments

我希望使用 Android 支持库中的 FragmentStatePageAdapter 来实现一个画廊。创建适配器时我知道图片的数量。

我的片段基本上由一个简单的 imageView 和几个 TextView 组成。要检索图像，我想知道 imageView 的大小（`MATCH_PARENT`在布局中使用），以便我可以从服务器请求适当大小的图像。

我的问题是，在哪里请求 imageView 的大小？在该`onCreateView`方法中，高度和宽度的 getter 返回 null 并且我不知道将什么作为参数传入以`measure(int,int)`正确计算大小。（父级上 measure(0,0) 的结果返回一个测量过的子级的高度/宽度，但太小了。）

在`onStart`我的片段的方法中，为创建的前 2 个片段正确设置了高度和宽度，但其余部分返回 0。

**获取框架保证**调用的片段的布局高度/宽度的正确位置在哪里？

TIA，帕特里克

代码片段：

```
public void onStart() {
    super.onStart();

    // Must measure view first
    ImageView imgView = (ImageView) getView().findViewById(R.id.picturefragment_image);

    int height = imgView.getMeasuredHeight(); // FIXME Returns 0 sometimes
    int width = imgView.getMeasuredWidth(); // FIXME Returns 0 sometimes

    if (m_picture.getMaxHeight() != 0) {
        height = Math.min(height, m_picture.getMaxHeight());
    }

    if (m_picture.getMaxWidth() != 0) {
        width = Math.min(width, m_picture.getMaxWidth());
    }
... Retrieval of image here ...
} 
```

# loops - CMD/Batch 从变量中提取每个文本文件行并循环

> ID：11655681
> 
> 赞同：1
> 
> 时间：2012-07-25T17:54:00.027
> 
> 标签：loops, batch-file, cmd, text-files

我有这个代码

```
@Echo Off 
SetLocal EnableDelayedExpansion 
SET mydir=D:\ 
SET DirCount=2 
SET T=
For /F %%i In (qqq.txt) Do (  
  set fg=%%i 
  FOR /L %%G IN (2, 1, %DirCount%) DO (call :subroutine "%%i") 
)

:subroutine 
Set T=!T!../ 
start /wait %mydir%program.exe %T%%fg% 
echo %t%%fg%  >>%cd%see.log 
```

qqq.txt有行

```
1
2
3 
```

结果我得到：

```
../1
../../2
../../../3
../../../../3 
```

但我需要这样：

```
../1
../../1
../2
../../2
../3
../../3 
```

请帮助我做错了什么？

* * *

只需要一点额外的

我需要第一次发生的事情

```
set "T=!T!../"
will be without dots
set "T=!T!/"
result must be
/1
../1
../../1
/2
../2
../../2 
```

如何以及在何处添加计数器并使每个循环可见

```
echo Now looping: %%i row of %countrow(in qqq.txt), left %countrow-%%I
echo Now looping: Dir Nr%%G !T!%%i 
```

对不起，愚蠢的问题，但批量编码对我来说很难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:03:56.947

你有3个问题：

1）你不会在主循环之后退出你的程序，所以它会进入子程序

2）你的 FOR /L IN() 子句是错误的，第一个数字应该是 1，而不是 2

3）您需要在外循环中将 T 重置为 undefined 。

***编辑***
我相信你可能还有一个问题。重定向输出时，您在文件名前加上`%cd%`. 我认为这不会给出你想要的结果。如果您的当前目录是`C:\test`，`>>%cd%see.log`则将导致输出发送到`testsee.log`根`C:\`目录中命名的文件。如果您想要当前目录中的输出，那么它应该是`>>%cd%\see.log`，但实际上并不需要路径信息，因为默认是使用当前目录。所以你真正需要的是`>>see.log`. 由于我不知道您的意图，因此我已按原样保留重定向。***结束编辑***

```
@echo Off
SetLocal EnableDelayedExpansion
SET mydir=D:\
SET DirCount=2
For /F %%i In (qqq.txt) Do (
  SET T=
  set fg=%%i
  FOR /L %%G IN (1, 1, %DirCount%) DO (call :subroutine "%%i")
)
exit /b

:subroutine
Set T=!T!../
start /wait %mydir%program.exe %T%%fg%
echo %t%%fg%  >>%cd%see.log 
```

在您的情况下无需调用子例程，特别是因为您已经启用了延迟扩展。下面用更少的代码给出了相同的结果，而且速度更快，因为它避免了相对较慢的 CALL 语句。*（在这个小例子中，性能可能不是问题，但如果使用具有多次迭代的循环，它会产生巨大的差异）*

```
@echo Off
SetLocal EnableDelayedExpansion
SET mydir=D:\
SET DirCount=2
For /F %%i In (qqq.txt) Do (
  SET "T="
  FOR /L %%G IN (1, 1, %DirCount%) DO (
    set "T=!T!../"
    start /wait %mydir%program.exe !T!%%i
    echo !T!%%i  >>%cd%see.log
  )
) 
```

***对附加问题的部分回答***

您可以使用 FOR /F 捕获 FIND /C 的结果以获取“qqq.txt”中的行数。这应该在你进入主循环之前完成：

```
for /f %%N in ('find /c /v "" ^<qqq.txt') do set "rowCount=%%N" 
```

您可以使用 SET /A 进行基本数学运算，从而使您能够跟踪剩余行数

进入主循环前先初始化剩余计数：

```
set "remainingLines=%rowCount%" 
```

然后在主循环中使用 SET /A 来减少值。

```
set /a remainingLines-=1 
```

# build - 无法在构建阶段/编译源中的 xcode 4.3.3 中设置编译标志

> ID：11655682
> 
> 赞同：0
> 
> 时间：2012-07-25T17:54:04.910
> 
> 标签：build, compilation, xcode4.3

在 Xcode 4.3.3 中，出于某种原因，我无法为一些我想跳过为 ARC 编译的文件设置编译标志。

我基本上做了 Target->Build Phases->Compile Sources，然后选择文件并按 Enter。

当按 Enter 键或什至只是双击单个文件时，我没有看到弹出对话框让我输入编译标志。

有人有问题吗？我正在使用在 Mac OSX Lion 上运行的视网膜 Mac Book Pro。它以某种方式不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:09:27.923

我遇到了同样的问题，事实证明弹出窗口出现在 XCode 窗口的右侧，距离很远。您需要将 XCode 窗口滑动到屏幕左侧，将其隐藏在屏幕左下角，然后双击文件编译标志设置。

我也有 Retina MBP，我想这就是原因。我的 XCode 版本是 4.4.1。

# php - PHP登录认证

> ID：11655688
> 
> 赞同：1
> 
> 时间：2012-07-25T17:54:17.337
> 
> 标签：php, session, if-statement

所以我有一个检查登录详细信息的脚本。我有这个工作，但我想用更具体的信息进一步开发它。

会有2个错误；密码/用户名不正确或帐户未激活

我有这段代码，但我收到以下错误：“解析错误：语法错误，意外的 T_ELSE”

```
} else if  ($active=="no"); {
header("Location: ../index.php?NotActived");
exit();
}

 else {
     header("location: ../index.php?Badpass");
     exit();

} 
```

`if`如果用户详细信息正确，我的脚本顶部确实有一个创建会话的语句。我知道我可以在 ajax/jquery 中做到这一点，但我对此有点陌生，对于这个小项目，我想坚持使用 php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:55:17.333

```
} else if  ($active=="no"); { 
```

您需要删除分号：

```
} else if  ($active=="no") { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:55:18.610

```
} else if  ($active=="no"); { 
```

应该

```
} else if ($active=="no") { 
```

# javascript - 在 Jquery Mobile 中点击浏览器后退按钮时，如何防止用户离开页面？

> ID：11655695
> 
> 赞同：0
> 
> 时间：2012-07-25T17:54:39.367
> 
> 标签：javascript, jquery, jquery-mobile, browser, browser-history

就是想。

我在 Jquery Mobile 中有一个页面，它使用一个弹出窗口作为智能手机显示屏上的全屏页面打开：

台式机/平板电脑：

![在此处输入图像描述](../Images/d32e1f6d43ab859846ac4c6328837930.png)

手机：

![在此处输入图像描述](../Images/0e1f76401ee64bf653557a235c12665e.png)

问题是，如果用户在智能手机上查看该页面，这看起来就像一个真实页面。当用户点击我提供的“后退”按钮时，我只是关闭了弹出框。但是，如果用户点击浏览器的后退按钮，他将离开该页面，因为他从未在历史记录中向下浏览过一页。

**问题：**
由于我无法禁用浏览器后退按钮，是否有另一种方法可以在弹出窗口打开时创建浏览器历史记录条目，所以当用户按下后退按钮时，我只是关闭弹出窗口并且浏览器历史记录返回在初始页面上与“-1”。如果有其他解决方法可以实现这一点，我也很感激任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:07:07.570

如果网页是从智能手机打开的，也许您可​​以将弹出框添加为对话框页面（您可以使用用户代理进行检查）。您可能需要检查[`http://jquerymobile.com/test/docs/pages/page-dialogs.html`](http://jquerymobile.com/test/docs/pages/page-dialogs.html)这样它将被添加到浏览器历史记录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:07:32.090

尝试添加实时 Vclick。

或者

你可以尝试禁用类ui，

例子：

类=“用户界面禁用”

# php - SQLite3、PDO、Active Record 和 CodeIgniter

> ID：11655698
> 
> 赞同：0
> 
> 时间：2012-07-25T17:54:58.153
> 
> 标签：php, sqlite, pdo, codeigniter-2

我在让 CodeIgniter 与 SQLite3 一起工作时遇到问题。

这是我的 database.php 配置：

```
$active_group = 'sqlite';
$query_builder = TRUE;

/* SQLite3 config for PDO */

$db['sqlite'] = array (
    'dsn' => 'sqlite:' .FCPATH.'virtTour_original.sqlite',
    'hostname' => '',
    'username' => '',
    'password' => '',
    'dbdriver' => 'pdo',
    'dbprefix' => '',
    'pconnect' => FALSE,
    'db_debug' => TRUE,
    'cache_on' => FALSE,
    'cachedir' => '',
    'char_set' => 'utf8',
    'dbcollat' => 'utf8_general_ci',
    'swap_pre' => '',
    'autoinit' => TRUE,
    'stricton' => FALSE,
    'failover' => array()
); 
```

这是我正在测试的控制器：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Main extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->database(); 
    }

    public function index()
    { 
        $query = $this->db->get('tblBuildings');
        foreach ($query->result_array() as $row)
        {
            echo $row;
        }
    }
}

/* End of file main.php */
/* Location: ./application/controllers/main.php */ 
```

这就是我查看 main 时发生的情况：

> ArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArrayArray

表中有 19 行，所以我知道它从中得到了一些东西（因为它回显了`Array`19 次）。但其他电话似乎不起作用。（IE）`echo $row['id'];`

A `var_dump`on`$query`产生：

> object(CI_DB_pdo_result)#16 (8) { ["conn_id"]=> object(PDO)#14 (0) { } ["result_id"]=> object(PDOStatement)#15 (1) { ["queryString"] => string(28) "SELECT * FROM "tblBuildings"" } ["result_array"]=> array(0) { } ["result_object"]=> array(0) { } ["custom_result_object"]=> array( 0) { } ["current_row"]=> int(0) ["num_rows"]=> NULL ["row_data"]=> NULL }

表中有数据，但这里没有显示...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:05:12.827

当你获取行时，你会得到一个数组，所以回显它会产生你看到的输出。

echo 用于原语，用于您应该使用的数组`print_r`或`var_dump`：

```
foreach ($query->result_array() as $row)
    {
        print_r($row);
    } 
```

# objective-c - iOS 中的 UIControlEvents 可以 OR'd 在一起吗？

> ID：11655699
> 
> 赞同：0
> 
> 时间：2012-07-25T17:55:02.313
> 
> 标签：objective-c, ios, bitwise-or, uicontrolevents

假设我有以下代码：

```
[somevalue_field 
  addTarget:self 
  action:@selector(somevalue_fieldDidChange:)
  forControlEvents:UIControlEventEditingDidEnd | UIControlEventTouchDragExit |
                   UIControlEVentTouchDragOutside ]; 
```

这些 UIControlEvents 的按位 ORing 是否会在组合它们的效果方面真正协同工作，以便如果这些事件中的任何一个发生，选择器中的方法就会触发？

或者这会导致太多位串在一起以适应一个整数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:04:14.077

是的，您可以将控制事件标志或在一起。

我想你可能对按位或的工作原理有点困惑。ORing 不会增加位数，它只是增加设置位数。

当您看到这样定义的标志时：

```
UIControlEventTouchDragOutside    = 1 <<  3,
UIControlEventTouchDragExit       = 1 <<  5,
UIControlEventEditingDidEnd       = 1 << 18, 
```

这通常是一个线索，表明它们可以被 ORed 在一起。

在二进制中，这些标志和 OR 的结果将是：

```
UIControlEventTouchDragOutside 000000000000000000000000000001000
UIControlEventTouchDragExit 00000000000000000000000000100000
UIControlEventEditingDidEnd 00000000000001000000000000000000

OR 00000000000001000000000000101000 的结果

```

如您所见，结果中的位数仍然相同（32），只是设置的位数发生了变化。

谷歌“二进制算术”和“按位布尔运算符”了解更多信息。

最后一点，Apple[文档`addTarget:action:forControlEvents`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget%3aaction%3aforControlEvents%3a)说：

> **controlEvents** 一个位掩码，指定为其发送操作消息的控制事件。有关位掩码常量，请参见“控制事件”。

术语**位掩码**意味着您可以或一起使用此调用的控制事件常量。

# c++ - 使用for函数时结构上的二进制“[”错误

> ID：11655704
> 
> 赞同：0
> 
> 时间：2012-07-25T17:55:13.173
> 
> 标签：c++

我正在尝试制作一个 Q3BSP 地图信息调试器。

我被困在纹理调试器部分，这是该部分中使用的代码：

```
for( i = 0; i < nTextures; i++ ) {
    printf( "Texture id %d\n", i );
    printf( "\tTexture name %s\n", Texture[i].name );
    printf( "\tTexture flags %d\n", Texture[i].flags );
    printf( "\tTexture contents %d\n", Texture[i].contents );
} 
```

但似乎出现了这种错误：

> 错误 C2676：二进制“[”：“Q3BSPTexture”未定义此运算符或转换为预定义运算符可接受的类型

这是 Q3BSPTexture 结构：

```
typedef struct {
    char        name[64];      // Texture name. 
    int         flags;         // Surface flags.
    int         contents;      // Surface contents
} Q3BSPTexture; 
```

我怀疑该结构没有像 char **[32]那样设置限制**

但我喜欢听专业人士的解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:12:19.350

您还没有向我们展示`Texture`.

您将`Texture`其视为 s 的数组`Q2BSPTezture`。显然它是一个单一的`Q2BSPTezture`对象，所以索引它没有意义。您可能只需要将它声明为一个数组，或者可能是一个指向您需要分配的数组的第一个元素的指针。

此外，错误消息暗示您正在编译 C++，而不是 C（在 C 中，该类型不可能定义任何运算符）。

# android - Android音乐播放器应用程序打不开

> ID：11655705
> 
> 赞同：0
> 
> 时间：2012-07-25T17:55:16.797
> 
> 标签：android

我正在尝试制作一个简单的音乐播放器应用程序，其中包含`ImageButton`用于播放和暂停的简单 s。

我试过这样做，但在运行时从模拟器中出现错误“不幸的是无法打开应用程序”。

我只尝试了播放按钮的代码并且它工作但是当添加暂停按钮的代码时会发生运行时错误。谁能告诉我哪里出错了？

谢谢你。

```
public class Audio1Activity extends Activity {

    private static final String TAG = "AudioDemo";
    private static final String isPlaying = "Media is Playing"; 
    private static final String notPlaying = "Media has stopped Playing"; 
    private MediaPlayer player;
    ImageButton playbtn,pausebtn;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        player= MediaPlayer.create(this , R.raw.a1);
        playbtn=(ImageButton) this.findViewById(R.id.image_button1);

        player.setLooping(false); 

        playbtn.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v) {
            demoPlay();

        }
    });

    pausebtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            demoPause();
        }
    });  

    @Override
    public void onPause() {
        super.onPause();
        player.pause();
    }

    private void demoPause(){
        player.pause();
        Toast.makeText(this, notPlaying, Toast.LENGTH_LONG).show();
        Log.d(TAG, notPlaying);
    }

    private void demoPlay(){
        player.start();
        Toast.makeText(this, isPlaying, Toast.LENGTH_LONG).show();
        Log.d(TAG, isPlaying);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:07:24.617

```
player.prepare(); 
```

尝试将此行放在 player.start() 之前；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:11:40.090

错误是您没有将小部件设置`pausebtn`为`ImageButton`。

这样的事情应该这样做：

```
pausebtn = (ImageButton)findViewById(R.id.name_of_image_button_in_your_layout_xml);

if (pausebtn != null){
    pausebtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            demoPause();
        }
    });
} 
```

# c# - 使用 Frame View 使分层框架可见

> ID：11655709
> 
> 赞同：1
> 
> 时间：2012-07-25T17:55:19.620
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio 2010 中有一个表单，它由一个列表框和多个框架组成。

框架都放在彼此的顶部，列表框位于框架之上。我试图完成的过程是，根据您在 lisbox 中选择的报告，将出现某个框架，并且仅出现该框架。

我有以下代码来完成此操作：

```
switch (Convert.ToInt32(item.Value))
{

    case 11: 
        fraSelect_2.Hide();
        fraSelect_3.Hide();
        fraSelect_4.Hide();

        fraSelect_1.Visible = true;

        iCounter = 1;
        break;

    case 12: 
        fraSelect_1.Hide();
        fraSelect_3.Hide();
        fraSelect_4.Hide();

        fraSelect_2.Visible = true;           

        iCounter = 2;
        break;

} 
```

依此类推。我遇到的问题是，如果我正在调用的框架位于不同的框架下方（不可见），它将不会显示。虽然当我选择与顶部表单相对应的报告时，它会起作用。因此，如果当我选择报告 1 时报告 1 = 框架 1，我可以看到框架 1。但是如果我选择report2 我什么也得不到，因为frame2 在一个不可见的frame1 后面。

一旦选择了相应的报告，关于如何让 frame1 后面的帧显示的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:58:25.157

您是否尝试过使用 z -order 将所需的表格放在前面？

S0 选择 frame2 时，它看起来像这样 - 案例 11：

```
 case 11:
                fraSelect_2.Hide();
                fraSelect_3.Hide();
                fraSelect_4.Hide();
                fraSelect_2.SendToBack();
                fraSelect_3.SendToBack();
                fraSelect_4.SendToBack();
                fraSelect_1.BringToFront();
                fraSelect_1.Visible = true;                    
                iCounter = 1;
                break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:58:58.950

在设计模式下，将每个组框放在一个单独的位置，并检查它们是否不包含在另一个组框中。将一个分组框保留在所需大小的所需位置。

然后在表单的 Load 事件中，将每个组框重新定位在用作占位符的位置的相同位置。

```
 fraSelect_2.Location = fraSelect_1.Location;
   fraSelect_2.Size = fraSelect_1.Size;
   ... // move every other groupbox to the same spot.... 
```

然后只需设置 Visible=true/false（没有 Hide() 或 BringToFront()）就足以显示正确的。

问题是由于当您将 groupbox 放在另一个 groupbox 的顶部时，最后一个 groupbox 成为第一个 groupbox 的孩子，如果顶级 group box 被隐藏，那么它的所有孩子都会被 Windows 自动隐藏，并且你不能以任何方式使它们可见。

# jquery - 随机化一些链接的顺序

> ID：11655715
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:55:53.363
> 
> 标签：jquery, html, random

我有这样的代码（静态）：

```
<a href="#">link 1</a>
<a href="#">link 2</a>
<a href="#">link 3</a> 
```

我想知道是否可以读取这些`<a>`标签并使用 JQuery 随机化它们的顺序，以便它（例如）显示：

```
<a href="#">link 1</a>
<a href="#">link 3</a>
<a href="#">link 2</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:04:14.153

这将以随机顺序返回链接。

```
$("a").sort(function() {return 0.5 - Math.random()}) 
```

所以我想如果你把链接放在一个容器中，你就可以用重新排序的数组重新填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:06:42.573

您可以首先使用 ORDER BY RAND() 或使用 JQUERY 在 mysql 查询中执行此操作，您可以为每个 a 标签分配 id 并使用此插件将其随机附加到其父元素：[Random - jQuery plugin](http://www.rockechris.com/jquery/jquery.random.js.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:24:36.860

所有这些听起来都不错，但是您可以像这样制作一个简单的插件：

```
(function($) {
    $.fn.extend({
        randomize: function() {
            return $.randomize($(this).get());
        }
    });
    $.randomize = function(arr) {
        for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);
        return $(arr);
    };
})(jQuery); 
```

然后像这样使用它：

```
$("#someEleID").prepend($("a").randomize()); 
```

或者：

```
$("#someEleID").prepend($.randomize($("a"))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:05:04.437

```
var elems = $('a');
elems.sort(function() { return (Math.round(Math.random())-0.5); });  
for(var i=0; i < elems.length; i++) elems.parent().append(elems[i]); 
```

[小提琴](http://jsfiddle.net/MQqM3/2/)

# java - 将数据传递到/从 java HttpServer 类的 java HttpHandler 类的正确方法

> ID：11655720
> 
> 赞同：0
> 
> 时间：2012-07-25T17:56:19.650
> 
> 标签：java, multithreading, messaging, httphandler, httpserver

我有一个用于测试应用程序的 java HttpHandler。在 HttpHandler 中，每个 http 请求都在一个单独的线程中处理并通过 HttpExchange。但我需要从主线程和类（设置 HttpServer 和 HttpHandler 的那个）访问数据，以便 HttpHandler 可以为当前正在运行的测试发回正确的响应。让 HttpHandler 类传入或访问这些数据的最佳方法是什么？我无法向 HttpHandler#handle 添加另一个参数，因为它是由 HttpServer 使用的 HttpHandler 定义的，并且我无法访问主类中的任何静态方法。我还需要将消息从 HttpHandler 推送回主类以进行记录。

谢谢

我的代码示例：

```
class RequestHandler implements HttpHandler {

    @Override
    public void handle(HttpExchange exchange)
     {
        // do a bunch of stuff with the request that come in.
    }
}

public class MainClass
{
    public static void main(String[] args)
    {
        HttpServer server;
        ExecutorService excutor;
        InetSocketAddress addr = new InetSocketAddress(ipAdd, ipPort);
        server = HttpServer.create(addr, 0);
        server.createContext("/", new RequestHandler());
        excutor = Executors.newCachedThreadPool();
        server.setExecutor(excutor);
        server.start();
       // do a bunch of stuff that uses the server
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:30:32.617

从您说您正在自己构建处理程序的评论中。将对象注入处理程序的典型方法是将它们作为参数传递给构造函数。

例如：

```
public class RequestHandler implements HttpHandler {

    private final Object someObject;

    public RequestHandler(Object someObject) {
        // there is an implied super() here
        this.someObject = someObject;
    }

    public void handle(HttpExchange exchange) throws IOException {
       ...
       // you can then use someObject here
       ...
    }
} 
```

然后您可以将对象传递到您的处理程序中，例如：

```
server.createContext("/", new RequestHandler(someObject)); 
```

*在处理程序之间*传递信息方面，您应该能够使用该`HttpExchange.setAttribute(...)`方法来执行此操作。这是一种典型的方式。我建议使用以 开头的属性名称来`"_"`将它们与 HTTP 属性区分开来。

# objective-c - UIPopover 内部不显示视图

> ID：11655722
> 
> 赞同：1
> 
> 时间：2012-07-25T17:56:23.457
> 
> 标签：objective-c, ios, ipad, uiview, uipopovercontroller

我正在使用一个应该只是在里面显示一个 UIView 的弹出窗口。但是尽管弹出窗口出现了，但它只包含一个空视图（以某种深蓝色着色）。UIViewController 使用的是那里的“PreferencesController”。

我打开弹出窗口的代码如下：

```
- (IBAction)showPopup:(id)sender {

if (_preferencesController == nil) {
    self.preferencesController = [[PreferencesController alloc]init];
    self.preferencesControllerPopover = [[UIPopoverController alloc] 
                                initWithContentViewController:_preferencesController];
}
[self.preferencesControllerPopover presentPopoverFromBarButtonItem:sender 
                                permittedArrowDirections:0 animated:YES];
} 
```

除此之外，我只有“ **preferencesController**`viewDidLoad` ”，除了“ `self.contentSizeForViewInPopover = CGSizeMake(800.0, 800.0);`”之外不包含任何特殊方法

这就是我得到的： ![弹出](../Images/5da29185962decba206a365b0b07b7aa.png)

任何想法为什么它不能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:11:29.707

# 可能的问题

800.0 宽度太大，Popover 无法处理。

* * *

在[UIViewController 的文档中](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

（讨论`contentSizeForViewInPopover`）

> 此属性包含视图控制器在弹出窗口中显示时所需的大小。默认情况下，宽度设置为 320 点，高度设置为 1100 点。您可以根据需要更改这些值。
> 
> 弹出框的推荐宽度为 320 磅。如果需要，您可以返回一个**最大为 600 磅的宽度值**，但不建议这样做。

* * *

## 可能的解决方案

尝试通过`presentModalViewController:animated:`从 UIViewController 调用您希望模态视图控制器在其上设置动画来以模态方式呈现您的 UIViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:33:01.193

我认为这段代码会导致问题：

```
[self.preferencesControllerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:0 animated:YES]; 
```

因为 sender 是 id 类型，所以你需要转换它，比如：

```
UIBarButtonItem *but = (UIBarButtonItem *)sender;
 [self.preferencesControllerPopover presentPopoverFromBarButtonItem:but permittedArrowDirections:0 animated:YES]; 
```

希望它能解决问题。

# sql-server - sp_executesql 不返回值

> ID：11655723
> 
> 赞同：1
> 
> 时间：2012-07-25T17:56:28.477
> 
> 标签：sql-server, tsql

我需要能够为给定表提供列列表。当我运行以下命令时：

```
DECLARE @ColList Varchar(Max)
DECLARE @TabName varchar(100) = 'CT_CONF'

SELECT  @ColList =  CASE WHEN @ColList IS NULL THEN '''' ELSE @ColList + ',' END + column_name
                    from INFORMATION_SCHEMA.COLUMNS
                    where TABLE_NAME = @TabName
                      and DATA_TYPE not in ('xml','Text','Image','Geometry','Geography')
                      and COLUMN_NAME not in ('LAST_MODIFIED')
                    order by ordinal_position                   

select @ColList 
```

我得到了我需要的输出，但是，当我尝试如下运行 sp_executesql 时，我什么也没得到。

```
DECLARE @TabName varchar(100) = 'CT_CONF'

DECLARE @SQL NVarchar(Max)
DECLARE @ColList Varchar(Max)
Declare @Params nvarchar(Max)

SET @SQL = N'   
            select @ColList = CASE WHEN @ColList IS NULL THEN '''' ELSE @ColList + '','' END + column_name
                    from INFORMATION_SCHEMA.COLUMNS
                    where TABLE_NAME = ''@TabName ''
                      and DATA_TYPE not in (''xml'',''Text'',''Image'',''Geometry'',''Geography'')
                      and COLUMN_NAME not in (''LAST_MODIFIED'')
                    order by ordinal_position
            '

set @Params = N'@ColList varchar(Max) OUTPUT'

EXEC sp_executesql @SQL, @Params, @ColList OUTPUT

select @ColList 
```

我究竟做错了什么？？？

谢谢，尤金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:51:11.080

尝试：

```
'...
    where TABLE_NAME = ''' + @TabName + '''
...' 
```

或者（可能更好）：

```
'...
        where TABLE_NAME =  @TabName
...'
set @Params = N'@TabName varchar(100), @ColList varchar(Max) OUTPUT' 

EXEC sp_executesql @SQL, @Params, @TabName, @ColList OUTPUT 
```

这些实际上只是评论中@Mikael Eriksson 建议的实现。

# html - 具有右边框的等高列

> ID：11655725
> 
> 赞同：0
> 
> 时间：2012-07-25T17:56:41.600
> 
> 标签：html, css

我正在尝试创建一个列布局，其中所有列的高度相同，因此边框向下延伸到相同的长度。我尝试了几种解决方案，包括[http://css-tricks.com/fluid-width-equal-height-columns/](http://css-tricks.com/fluid-width-equal-height-columns/)提出的 One True Layout Solution ，但这导致边框完全消失。我也尝试使用 display: table 作为包装器，但 IE7 不支持。

这是我的代码，因此您可以看到我所指的内容：

[http://jsfiddle.net/kh9nS/1/](http://jsfiddle.net/kh9nS/1/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:51:34.063

我在你的 css-tricks 链接中尝试了 CSS 表和实际表，它可以工作。

# ipad - 简单的基于图片的应用程序

> ID：11655729
> 
> 赞同：0
> 
> 时间：2012-07-25T17:57:05.437
> 
> 标签：ipad

我正在开发一个只有一系列图片的 iPad 应用程序，但我被卡住了。我已经设法将一个标签栏控制器链接到 6 个视图控制器，并且一切似乎都运行良好。但是，一旦用户选择了按钮，我希望能够滑动到下一个视图控制器。我该怎么做呢？滑动手势对我不起作用。这是一个快照：

![在此处输入图像描述](../Images/9391e0051e2d430acdf64f14df96c0e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:53:00.760

我想你正在寻找`UIPageController`. 这是 iPhone 天气应用程序中使用的控件，可让您从一个城市滑到另一个城市。转到[此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)查看有关控件的完整文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:55:07.613

这通常不是 iOS 中标签栏的工作方式，但是……</p>

听起来您所追求的是启用分页的[UIScrollView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html)（请记住，您必须设置滚动视图`ContentSize`）或[UIPageViewController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)（如果您不想明确处理大小并且可以一个新的 UIViewController 来容纳每个图像）。我推荐第一个选项。该过程将类似于：

1.  添加`UIScrollView`作为主视图的子视图（记住，确保设置`pagingEnabled`为`YES`
2.  将每个图像添加到滚动视图
3.  将滚动视图的内容大小设置为所有图像的总宽度

感谢您的澄清！

# security - 流星xss代码篡改

> ID：11655730
> 
> 赞同：9
> 
> 时间：2012-07-25T17:57:08.670
> 
> 标签：security, xss, meteor

我主要关心的是：

*   由于流星基于JavaScript，它可以在@客户端更改/篡改，所以如果我更改或创建新集合并开始向数据库发送垃圾邮件会发生什么情况，它将仅@客户端（仅限内存）或双方，即：服务器端也是。

*   在服务器端保存之前是否从 xss 中清除了用户输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:50:16.057

如果您在客户端创建一个新集合，服务器将不知道这一点，也不会创建必要的东西来编辑数据库服务器端。垃圾邮件数据只会在客户端内存中。

```
Trees  = new Meteor.Collection("boom");
    Meteor.Collection
Trees.insert({hi:"hi"});
    "4b0d5ff2-058c-4041-849b-ce2e0d548160"
logging.js:30: insert failed: 404 -- Method not found 
```

# rest - JAX-RS：验证 JSON 和 XML (RESTEasy)

> ID：11655731
> 
> 赞同：2
> 
> 时间：2012-07-25T17:57:09.330
> 
> 标签：rest, jaxb, jax-rs, resteasy

**技术栈**：Java 1.6、JPA (Hibernate 3)、Spring 3、Oracle 11g、JAX-RS (RESTEasy)

你好，

我正在编写一些 RESTful Web 服务。我正在使用 RESTEasy..

我不确定如何验证 JSON \ XML 请求？使用 SOAP，它变得简单直接。

搜索后，我找不到任何清楚说明需要做什么的内容。我找到了一篇文章（[this](https://stackoverflow.com/questions/3428273/validate-jaxbelement-in-jpa-jax-rs-web-service/3440388#3440388)），其中提到了使用 MessageBodyReader，但我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:37:07.790

得到这个工作。

问题中引用的帖子确实回答了这个问题。我不确定的是不要让读者关注代码，但这是使用**@Provider**注释自动完成的。

# c++ - 如何避免在插入过程中调整 unordered_map 的滞后大小

> ID：11655734
> 
> 赞同：3
> 
> 时间：2012-07-25T17:57:18.303
> 
> 标签：c++, performance, visual-c++, hashmap, unordered-map

我在 MSVC 2010 中使用**unordered_map**。如果我在其中插入许多元素，它就会开始调整大小。在此过程中，它会复制所有对并重新散列它们。当有太多对象时，会花费太多时间。有什么技巧可以避免这种影响吗？类似于储备的东西，但在 VS 2010 中没有实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:06:32.807

改用[rehash](http://msdn.microsoft.com/en-us/library/bb982053.aspx)吗？它的功能似乎`reserve`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:02:41.830

如果您事先知道要添加多少元素，则可以使用创建 unordered_map`explicit unordered_map( size_type nbuckets = N0, const Hash& hfn = Hash(), const Pred& comp = Pred(), const Alloc& al = Alloc())`并将*某些*内容作为`nbuckets`( [msdn](http://msdn.microsoft.com/en-us/library/bb981993.aspx) ) 传递。

# c# - 多线程：新表单关闭太快

> ID：11655742
> 
> 赞同：0
> 
> 时间：2012-07-25T17:58:07.947
> 
> 标签：c#, multithreading, forms, progress-bar, marquee

我想显示一个带有进度条选框的新表单。这个表单应该在另一个线程上，因为调用的动作太大，如果它在同一个线程上，UI 不会更新进度条。

我调用了一个新线程，创建了我的表单，但是一旦它出现，表单就会关闭......

这是我的主要代码：

```
 frmProgress f = new frmProgress();
    Thread t = new Thread(new ThreadStart(delegate() { f.Show(); }));
    t.Start();
    documentManager.Compile(); //This is my big action
    t.Abort(); 
```

这是表单的代码：

```
 public frmProgress()
    {
        InitializeComponent();
    } 
```

我想知道我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:03:24.360

你有几个问题：

1.  您正在非 UI 线程中显示表单。这只会引起问题；它需要在 UI 线程中。
2.  您正在 UI 线程中执行长时间运行的任务；这是阻止 UI 更新。

您需要在 UI 线程中显示论坛，并在后台线程中运行长时间运行的任务。

在这里工作的一个很好的工具是使用`BackgroundWorker`. 它将为您完成大部分工作，以确保正确的代码在 UI/非 UI 线程中正常运行。创建一个新`BackgroundWorker`的并将长时间运行的任务放入`DoWork`事件中。在启动 BGW 之前进行任何您需要的简单 UI 更新（显示表单），并在`Completed`事件中进行任何清理（将在 UI 中运行）。BackgroundWorker 上的[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)有一些[很好的示例](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)。

使用 a 的另一个优点`BackgroundWorker`是您可以轻松地报告进度（如果您有一个了解完成百分比的好方法），而不仅仅是一个选取栏。只需在`ProgressReported`事件处理程序中添加一个处理程序即可更新进度条，并`ReportProgress`在工作时定期调用该方法。有关确切的代码片段，请参阅链接示例。

# magento - Magento，我的购物车，小计

> ID：11655745
> 
> 赞同：0
> 
> 时间：2012-07-25T17:58:20.977
> 
> 标签：magento, cart, subtotal

我的购物车显示错误的小计，我认为这也影响了购物车和结帐中的税 (20%) 计算（这里的价格是正确的，但小计和总计没有 20% 增值税）
知道可能是什么问题？

新用户..我不能发布图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T10:10:52.490

```
 <?php 

$subTotal = Mage::getModel('checkout/cart')->getQuote()->getSubtotal();

$totals = Mage::getSingleton('checkout/session')->getQuote()->getTotals();?>
 Total Items in Cart: <?php $totalItems = Mage::getModel('checkout/cart')->getQuote()->getItemsCount();  
                if($totalItems == 0){echo "0";}else{echo $totalItems;}?>
  Subtotal: $ <strong><?php $subTotal = Mage::getModel('checkout/cart')->getQuote()->getSubtotal(); echo number_format($subTotal,2); ?>
 <?php  if(isset($totals['tax']) && $totals['tax']->getValue()) {
  echo 'Tax: '.strip_tags(Mage::helper('core')->currency(number_format($totals['tax']->getValue(),2))); //Tax value if present
} ?>
<?php if(isset($totals['discount']) && $totals['discount']->getValue()) {
    echo 'Discount: '.strip_tags(Mage::helper('core')->currency(number_format($totals['discount']->getValue(),2))); //Discount value if applied
} ?>
<?php if(isset($order->getShippingAmount)){
echo 'Shipping Charges:'.strip_tags(Mage::helper('core')->currency(number_format($order->getShippingAmount,2)));
}?>
 Grand Total: $<?php $grandTotal = Mage::getModel('checkout/cart')->getQuote()->getGrandTotal(); echo number_format($grandTotal,2); ?> 
```

请使用此代码，它将显示所有购物车信息。

# css - 子 Div 出现在新行上

> ID：11655748
> 
> 赞同：0
> 
> 时间：2012-07-25T17:58:25.733
> 
> 标签：css, html, css-float

我在 div 中遇到了一些子元素的问题。父 div 是标题，理论上应该包含三列标题。左边是幻灯片，中间是 20px 的分隔线，右边是信息文本。

我遇到的问题是，我似乎可以让正确的列保持内联的唯一方法是告诉文本正确对齐，但这在美学上不起作用，因为我需要文本居中。

我只想告诉 DIV 向右浮动，但是当我这样做时，div 总是进入下一行，而不是在标题 div 内浮动。这是问题的示例（http://cbchaverhill.onedirectionconnection.com/），请忽略除标题之外的所有内容（尚未开始处理这些元素）。

这是我的CSS：

```
div#header {
clear: both;
height: 300px;  
width: 900px;
margin-top: 0px;
padding: 0px;
border: 0px;
}

div#slide {
float: left;
clear: both;
height: 300px;
width: 590px;
margin-top: 0px;
padding: 0px;
border: 0px;
background: #FFFFFF;
}

div#divide {

 padding: 0px 0px 0px 0px;
 margin: 0px 0px 0px 0px;
 overflow: hidden;
 width: 20px;
 height: 300px;
 float: left;
 background: url(/wp-content/themes/cbc/divide.png) no-repeat;

}

div#cbcstuff{
display:  inline-block;
float: right;
clear: both;
height: 300px;
width: 290px;
margin-top: 0px;
padding: 0px;
border: 0px;
background: #FFFFFF;
} 
```

这是标头的编码：

```
<div id="header">

<div id="slide"></div>
<div id="divide"></div>

<div id="cbcstuff">
Calvary Baptist Church<br>
Haverhill, MA 01832
</div>

</div> 
```

谁能给我一些建议，告诉我如何让正确的列正确对齐，而不必正确对齐文本？

感谢您的时间！

~诺艾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:02:37.880

尝试删除`clear: both;`和。使用该命令，您可以清除浮动样式。`div#slide``div#cbcstuff`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:03:25.477

从 div#cbcstuff 中删除“clear: both”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:09:16.870

明确的：两者；是这里问题的原因。

> clear 属性指定元素的哪些边不允许其他浮动元素。

通过说明两者，您是在告诉它每一边都不允许其他浮动元素，因此将其发送到“容器”div 的下方和外部

[CSS 清除属性](http://www.w3schools.com/cssref/pr_class_clear.asp)

# javascript - Jquery在同一页面中的多个表单

> ID：11655751
> 
> 赞同：0
> 
> 时间：2012-07-25T17:58:41.497
> 
> 标签：javascript, jquery

我有以下动态生成的 HTML

```
<div id="1">
<form name = "inpForm">
<input name="FirstName" type="text"/>
<input type="submit" value="Submit"/>
</form>
</div>

<div id="2">
<form name = "inpForm">
<input name="FirstName" type="text"/>
<input type="submit" value="Submit"/>
</form>
</div> 
```

外部 div 具有不同的 ID，但表单名称相同。我在提交表单时使用 Jquery 执行一些验证。但是，当提交第二个表单时，我总是得到第一个表单的值。

```
$(document).ready(function () {
    $('form[name="inpForm"]').live('submit', function () {
        alert($('input[name="FirstName"]').val());
        return false;
    });
}); 
```

如何修改 myJquery 以找到与触发提交的当前表单匹配的“FirstName”元素？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:59:48.507

添加一些上下文：

```
alert($(this).find('input[name="FirstName"]').val()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:00:42.923

使用`this`（表单元素）作为上下文参数：

```
alert($('input[name="FirstName"]',this).val()); 
```

# python - 退出打印对话框-pyqt

> ID：11655753
> 
> 赞同：0
> 
> 时间：2012-07-25T17:58:49.787
> 
> 标签：python, printing, pyqt

我使用 QPrinter 和 QDialog 定义了一个打印函数。但是，当我启动打印机对话框然后按取消时，整个主窗口进入无响应模式。我试过做`QtGui.QPrintDialog.close()`但没有用。

代码：

```
import sys

from PyQt4 import QtCore
from PyQt4 import QtGui

class QButton(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.button = QtGui.QPushButton('Button', self)
        self.name='me'
        self.button.clicked.connect(self.calluser)
    def calluser(self):
        Appli=QtGui.QApplication(sys.argv)
        printer= QtGui.QPrinter()
        doc=QtGui.QTextDocument("Set local variables in this printing slot." )
        dialog = QtGui.QPrintDialog(printer)
        dialog.setModal(True)
        dialog.setWindowTitle("Print Document" )
        if dialog.exec_() == True:
            doc.print_(printer)

# dialog.addEnabledOption(QAbstractPrintDialog.PrintSelection)

def demo_QButton():
    app = QtGui.QApplication(sys.argv)
    tb = QButton()
    tb.show()
    app.exec_()

if __name__=='__main__':
    demo_QButton() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:09:47.987

`calluser`您在该方法中创建了一个新应用程序。删除或注释该行：

```
Appli=QtGui.QApplication(sys.argv) 
```

然后再试一次。我认为这次您的主窗口将保持响应。

# antlr - ANTLR 语法令牌问题（ANTLR 有效）

> ID：11655759
> 
> 赞同：1
> 
> 时间：2012-07-25T17:58:59.677
> 
> 标签：antlr

我是 ANTLR 的业余爱好者，我正在为一个简单的处理器创建一个解释器，我遇到了一个 VALUE 令牌抛出错误的小问题。我是一名学生，所以我不是要你为我做作业......我已经完成了它（包括口译员的所有课程文件）但是这个问题正在打败我，即使它可能很简单并盯着我的脸。

ANTLR works 不断给我这个控制台错误信息；

*“错误（208）：newExpr.g:193:1：以下标记定义永远无法匹配，因为先前的标记匹配相同的输入：VALUE”*

显然，VALUE 的正则表达式有问题，但我看不到它是什么，无论是那里还是语法中的其他任何地方。如果您能指出我遗漏的内容，将不胜感激……因为谷歌搜索并没有真正帮助我找到自己语法中的错误。

```
grammar newExpr;

options 
{
    language=Java;
}

@header 
{
    import java.util.*;
}

@members 
{
    ArrayList myInitialise = new ArrayList();
    ArrayList InstructionList = new ArrayList();
}

/*--------------------------------------------------------------------------------------------------------------------------------*
 * PARSER RULES                                                                                                                   *
 *--------------------------------------------------------------------------------------------------------------------------------*//

/*
* prog is where the interpretation beings and consists of one or more (+) 'stat' rules
*/
prog        :       stat+;

/*
* stat rules are the general parse rules of entire operations on the processor.
* They consist of smaller data operations rules (dataop) or memory operations (memop).
*/                
stat        :       BASIC r1=REG c1=COMMA r2=REG c2=COMMA dataop NEWLINE
            {
                int reg1 = Integer.parseInt($r1.text.substring(1));  // these lines convert the token input stream and converts to an actual integer
                int reg2 = Integer.parseInt($r2.text.substring(1)); 
                int IMDT = $dataop.value;    // take the immediate integer

                // LOAD operation
                if($BASIC.text.equals("LD"))
                InstructionList.add(new ld(reg1, reg2, IMDT));

                // STORE operation  
                else if($BASIC.text.equals("ST"))
                InstructionList.add(new st(reg1, reg2, IMDT));

                // SUBTRACTION operation    
                else if($BASIC.text.equals("SUB"))
                InstructionList.add(new sub(reg1, reg2, IMDT));

                // ADDITION operation   
                else if($BASIC.text.equals("ADD"))
                InstructionList.add(new add(reg1, reg2, IMDT));

                // MULTIPLICATION operation 
                else if($BASIC.text.equals("MUL"))
                InstructionList.add(new mul(reg1, reg2, IMDT));

                // DIVISION operation   
                else if($BASIC.text.equals("DIV"))
                InstructionList.add(new div(reg1, reg2, IMDT));
            }

            | 

            i1 = INDEX '=' memop NEWLINE
            {
                myInitialise.add(new memInit(Integer.parseInt($i1.text), $dataop.value));
            }

            |

            JUMP REG COMMA dataop NEWLINE
            {
                int R = Integer.parseInt($REG.text.substring(1));
                int val = $dataop.value;

                // BRANCH EQUAL operation
                if($JUMP.text.equals("BEZ"))
                InstructionList.add(new branchEqualZero(R,value));

                // BRANCH NOT EQUAL operation
                else if($JUMP.text.equals("BNEZ"))
                InstructionList.add(new branchNotEqualZero(R,value));
            }

            | 

            JUMP REG NEWLINE
            {
                int R = Integer.parseInt($REG.text.substring(1));
                InstructionList.add(new jump(R));
            }

            | 

            HALT 
            {
                InstructionList.add(new halt());
            }
            ;

dataop returns [int value] 

        :   INDEX
            {
                $value = Integer.parseInt($INDEX.text);
            }

            |   

            VALUE
            {
                $value = Integer.parseInt($VALUE.text.substring(1))*-1;
            };

memop returns [int value]

        :   INDEX
            {
                $value = Integer.parseInt($INDEX.text);
            }

            |

            VALUE
            {
                $value = Integer.parseInt($VALUE.text.substring(1))*-1;
            }

            |

            MEMVAL
            {
                if($MEMVAL.text.startsWith("-"))
                {
                    $value = Integer.parseInt($MEMVAL.text.substring(1))*-1;
                }
                else
                    $value = Integer.parseInt($MEMVAL.text);
            };

/*--------------------------------------------------------------------------------------------------------------------------------*
 * LEXER RULES                                                                                                                    *
 *--------------------------------------------------------------------------------------------------------------------------------*/

/*
* RegExps for BASIC instructions (load, store, add, subtract, multiply, divide
*/
BASIC       :   ('L' 'D') | ('S' 'T') | ('A' 'D' 'D') | ('S' 'U' 'B') | ('M' 'U' 'L') | ('D' 'I' 'V');

/*
* The comma is simply for syntactic purposes, to separate data and register references
*/
COMMA       :   ',';

/*
* Regular Expressions for the processor registers R0-R31
*/
REG         :   ('R') (('0'..'9') | ('0'..'2') ('0'..'9') | ('3') ('0'..'1') );

/*
* 'Index' is the set of regular expressions matching memory locations
*/
INDEX       :       ('0'..'9')                    
            |
            ('0'..'9') ('0'..'9')
            |
            ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('0'..'9') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('0'..'5') ('0'..'9') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('6') ('0'..'4') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('6') ('5') ('0'..'4') ('0'..'9') ('0'..'9')
            |
            ('6') ('5') ('5') ('0'..'2') ('0'..'9')
            |
            ('6') ('5') ('5') ('3') ('0'..'5');

/*
* Reg Exps for memory initialisation instructions
*/
MEMVAL      :   ('0'..'9')+ | '-' ('0'..'9')+;            

/*
* Simple integers for data values
*/          
VALUE       :   '-' (('0'..'9')         **PROBLEM IS HERE**
            |
            ('0'..'9') ('0'..'9')
            |
            ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('0'..'9') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('0'..'5') ('0'..'9') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('6') ('0'..'4') ('0'..'9') ('0'..'9') ('0'..'9')
            |
            ('6') ('5') ('0'..'4') ('0'..'9') ('0'..'9')
            |
            ('6') ('5') ('5') ('0'..'2') ('0'..'9')
            |
            ('6') ('5') ('5') ('3') ('0'..'6'));

/*
* Regular Expressions for return/newline characters
*/ 
NEWLINE     :   '\r'? '\n' ;

/*
* This simply makes the interpreter tolerant to whitespace
*/
WHITESPACE      :   (' ' | '\t' | '\u000C')+ {skip();};

/*
* RegExp for Branch on Equal to Zero/Branch on Not Equal to Zero instructions
*/
BRANCH      :   ('B' 'E' 'Z') | ('B' 'N' 'E' 'Z');

/*
* RegExp for jump instruction
*/
JUMP        :   ('J' 'R');

/*
* The HALT instruction ends the program and executes all instructions
* in the Instruction List on the data/values that have been entered
*/
HALT        :   ('H' 'A' 'L' 'T'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:12:44.653

ANTLR 生成的词法分析器是这样工作的：它尝试尽可能多地匹配，当两个（或更多）规则匹配相同数量的字符时，首先定义的规则将“获胜”。因此，您的`VALUE`规则永远不会从`MEMVAL`规则中“获胜”，因为匹配的所有`VALUE`内容也匹配`MEMVAL`'s: `'-' ('0'..'9')+`。

因此，您会看到错误消息。

无论您的某个解析器规则`VALUE`在某个时刻是否需要一个标记，词法分析器都会根据我提到的规则简单地生成一个标记：词法分析器不会考虑来自解析器的任何信息。

只需删除`VALUE`规则并将其替换为`MEMVAL`（也许重命名`MEMVAL`为`INT`）。然后在您的解析器规则中简单地匹配`MEMVAL`（或`INT`）并检查该值是否在特定的数值范围内。

# excel - 有没有办法响应excel中条件格式的变化？

> ID：11655763
> 
> 赞同：3
> 
> 时间：2012-07-25T17:59:22.983
> 
> 标签：excel, vba, excel-2003, dynamic-data-exchange

我有一个 Excel 表，其中包含指向实时市场数据的 dde ​​链接。我使用计时器每秒查看 dde ​​价格。然后在满足某些条件时提交订单。我尝试了一个中间带有 DoEvent 的无限循环，它工作了 5 秒，然后冻结了工作簿。

有没有办法响应 dde ​​更新的变化？更改事件不会检测到它们。它只是检测用户何时进行手动更改。

有人告诉我，如果我有条件格式，就有办法获取该事件。因此，我可以创建一个单元格公式以在满足我的条件时变为真，然后在条件为真时将该单元格格式化为某种格式，然后选择格式更改事件。那可能吗？如果有怎么办。任何建议，将不胜感激。

澄清：我想在 VBA 中选择一个事件，该事件将提交交易股票的订单。我现在这样做的方式是使用一个计时器，该计时器循环遍历所有行，以在触发器列中寻找真正的单元格。一旦找到它就会关闭该行的标志（将 true 条件设置为 false）并提交订单。

问题在于，对于快速移动的股票来说，一秒钟是永恒的。因此，当触发器列中的单元格变为真时，我需要在 VBA 中引发一个事件，这样我就可以立即响应，而不是等待计时器类的第二个间隔。

据我所知，您不能调用值小于一秒的计时器。如果我可以使用毫秒，我的问题就会得到解决。我只是每 10 毫秒循环一次列表。

据我所知，我无法在 VBA 中创建另一个线程。如果可以的话，我会做一个无限循环，并在每次迭代后让它休眠 10 毫秒左右。

据我所知，我无法将 dde ​​直接拉入 VBA 甚至 .net，因为 MSDN 表示不再支持它。

我希望这可以澄清。所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:05:00.370

如果您创建一个将 DDE 输出单元格作为参数的虚拟函数，那么您应该能够响应该`Worksheet_Calculate`事件吗？

我猜这可能有效，但我没有使用 DDE 的经验：DDE 更新甚至可能直接触发 Calculate 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:32:20.183

你为什么不把你在那个单元格中的任何条件格式逻辑重新创建到一个单独的单元格中呢？

例如，您的条件格式逻辑可能会在某个单元格高于某个数字时突出显示它 - 您可以将该逻辑放在另一个单元格中 - 例如。=if(A1>100,真,假)

所以我想我的问题是 - 当您可以选择事件本身时，为什么还要选择格式更改事件？

编辑您的澄清：

如果您想在 VBA 中连续运行宏，则不需要计时器 - 您可以像这样执行连续循环：

```
Sub macro1()

    Dim i As Double

    With Sheet1

        Do

            '.Cells(5, 4).Value = i

            i = i + 1

            .Cells(1, 1).Value = i

            ' you are going to want to comment this out if you want to don't need to do other things
            DoEvents

            If Sheets("Sheet1").Range("A2").Value = True Then
                ' put your code here.
            End If
        Loop

    End With
End Sub 
```

所以我一定仍然无法理解你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:09:34.483

如果您询问是否可以使用条件格式来触发事件，是的，这是可能的。然而，我自己并不熟悉 DDE 模型，正如 Stepan1010 所指出的，混合条件格式以触发数据条件中的事件似乎确实是一个额外的步骤。

您可能需要考虑此链接中 Excel 先生中的讨论，因为问题集中在更改基于单元格值的 DDE 连接中对单元格所做的更改：[http ://www.mrexcel.com/forum/showthread.php?176508 -评论-VBA-amp-Min-Max](http://www.mrexcel.com/forum/showthread.php?176508-Comments-VBA-amp-Min-Max)

如果适用于您的应用程序，您还可以考虑使用 DoEvent 并根据您实际实现宏的时间段设置循环。这篇 SO 文章专注于状态栏，但我认为同样的逻辑适用于事件执行，比如基于循环内的条件：[Force a screen update in Excel VBA](https://stackoverflow.com/questions/3735378/how-do-i-force-a-screen-update-in-excel-vba)

希望这对你有帮助 =)

~乔尔

# ruby-on-rails - 在 Rails 中翻译路线

> ID：11655764
> 
> 赞同：2
> 
> 时间：2012-07-25T17:59:25.873
> 
> 标签：ruby-on-rails, routes

我正在尝试为我的路线做一个简单的语言翻译，但我真的不明白为什么我的方法不起作用。我想`www.example.com/it/camere`打电话`rooms_path(locale: :it)`和`www.example.com/en/rooms`打电话`rooms_path(locale: :en)`。
例如，查看以下路线：

```
get ":locale/rooms" => "home#rooms", constraints: { locale: "en" }, as: "rooms"
get ":locale/camere" => "home#rooms", as: "rooms" 
```

我得到以下结果：

```
app.rooms_path               # => error         OK
app.rooms_path(locale: "it") # => 'it/camere'   OK
app.rooms_path(locale: "en") # => 'en/camere'   Why?!? 
```

并使用以下路线（注意第二个约束）：

```
get ":locale/rooms" => "home#rooms", constraints: { locale: "en" }, as: "rooms"
get ":locale/camere" => "home#rooms", constraints: { locale: "it" }, as: "rooms" 
```

我得到以下结果：

```
app.rooms_path               # => error         OK
app.rooms_path(locale: "it") # => 'it/camere'   OK
app.rooms_path(locale: "en") # => error         Lol?!? This is weird! 
```

有人可以向我解释为什么会这样吗？
我已经阅读了大约 3 次关于路由的 Rails 文章，但它没有帮助。

PS我宁愿**不使用插件**来学习:)

**编辑：**

这是我通过调用 rake 路由得到的：

```
rooms GET    /:locale/rooms(.:format)    home#rooms {:locale=>"en"}
rooms GET    /:locale/camere(.:format)   home#rooms {:locale=>"it"}
root         /(:locale)(.:format)        home#index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:44:56.690

关于第一种情况

您不能使用`:as`相同的名称使用两次。第二次使用它会替换之前的`xxx_path`定义，你最终会得到没有约束的`rooms_path`which 指向。`:locale/camere`看起来你高估了 Rails 的魔力。

关于第二种情况

```
get ":locale/camere" => "home#rooms", constraints: { locale: "it" }, as: "rooms" 
```

调用失败，`app.rooms_path(locale: "en")`因为只有一个`rooms_path`可用并且它期望`:locale`是`"it"`. 调用它`"en"`自然会导致未解决的路由抱怨。

**如果您想查看其来源，请查看define_url_helper [。](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/routing/route_set.rb#L193)**

# php - Symfony2 Elastica bundle (elasticsearch) - 可以只限制“活动”项目吗？

> ID：11655765
> 
> 赞同：1
> 
> 时间：2012-07-25T17:59:26.273
> 
> 标签：php, symfony, elasticsearch

我目前正在使用[FOQElasticaBundle](https://github.com/Exercise/FOQElasticaBundle/)与我的弹性搜索服务器进行交互，但我似乎无法找到一种方法来根据每个实体上的“活动”标志来限制搜索结果。是否可以以某种方式在配置中设置它？这是我当前的配置：

```
foq_elastica:
    clients:
        default: { host: localhost, port: 9200 }

    indexes:
        website:
            client: default
            types:
                story:
                    mappings:
                        title: { boost: 8 }
                        summary: { boost: 5 }
                        text: { boost: 3 }
                        author:
                    persistence:
                        driver: orm # orm, mongodb, propel are available
                        model: Joe\Bundle\StoryBundle\Entity\Story
                        provider:
                        listener:
                        finder: 
```

我不能只在控制器/视图级别排除不活动的故事，因为这会打乱分页 - 我需要每页有一致数量的项目，因此搜索需要过滤掉任何`active`错误的故事（或0)。我敢肯定这一定是可能的，但有人知道怎么做。

谢谢。

**编辑**

在没有`query_builder_method`为提供者指定自定义的运气之后，我尝试指定自定义存储库并构建我的查询。但我还不能让它工作。这是我的搜索方法：

```
public function findByQueryString($queryString)
{

    $builder = new \Elastica_Query_Builder();
    $builder
        ->queryString()
            ->field('query', $queryString)
        ->queryStringClose()
        ->filter()
            ->term()
                ->field('active', 1)
            ->termClose()
        ->filterClose()
    ;
    // TODO check published date...

    return $this->findPaginated($builder);
} 
```

这会产生以下 JSON：

```
{
    "query": {
        "query_string": {
            "query": "story"
        },
        "filter": {
            "term": {
                "active": "1"
            }
        }
    },
    "from": 0,
    "size": 10
} 
```

但出于某种原因，它似乎不喜欢过滤器的“术语”部分。我只是试图模仿[elasticsearch 文档](http://www.elasticsearch.org/guide/reference/api/search/filter.html)中的内容，但我承认我真的不知道我应该做什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:29:27.953

是的，可以通过使用`Doctrine query builder`. [在这里阅读](https://github.com/Exercise/FOQElasticaBundle/#use-a-custom-doctrine-query-builder)。

```
 persistence:
            driver: orm
            model: Application\UserBundle\Entity\User
            provider:
                query_builder_method: createIsActiveQueryBuilder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T14:22:09.303

好的，这是 3 年前的事了，但新读者可能喜欢阅读这个答案。

==> 它实际上非常简单，不需要任何工作。

例如，我有一个带有“已发布”布尔字段的 Post 实体。确保在您的实体类中有此字段的 getter。在此示例中，getter 是 getPublished。然后你可以简单地在你的配置文件中配置监听器。

```
 persistence:
     listener:
         is_indexable_callback: "getPublished" 
```

[这是文档](https://github.com/Exercise/FOQElasticaBundle#checking-an-entity-method-for-listener)

# glassfish - Glassfish AS 上的 Java 邮件

> ID：11655766
> 
> 赞同：0
> 
> 时间：2012-07-25T17:59:26.710
> 
> 标签：glassfish, jakarta-mail

我在 Glashfish 3.1.1 上使用 Java Mail 发送电子邮件时遇到问题。

服务器不会抛出任何异常，只是向收件人发送一条只有标头的空消息。在没有 Glashfish 的情况下运行 Java Mail，一切正常。

```
 public void sendHtmlMessage(String subject, String html){
    // Creates a email Session and
    // and Authenticator attached to it
    Session session = getMailSession();

    try{
        MimeMessage message = createMessage(session, subject, MailSender.MIME_Type.TEXT_HTML, html); // creates message
        transportSMTPMessage(session, message); // transport message

    } catch(AddressException e){ log("Internet address is invalid!"); e.printStackTrace(); }
    catch(NoSuchProviderException e){ log("Host is invalid!"); e.printStackTrace(); }
    catch(MessagingException e){ log("Message is invalid!"); e.printStackTrace(); }
    catch(Exception e){ log("Gereric Exception!"); e.printStackTrace(); }
}

// Helper to obtain Mail Session
private Session getMailSession(){

    Properties props = new Properties();
    return Session.getInstance(props,
        new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(userName, password);
            }
        });
}
    // Helper to create MimeMessage
private MimeMessage createMessage(Session session, String subject, MailSender.MIME_Type mime, String content)
        throws AddressException, MessagingException{

    // Some code to create the message...

    message.saveChanges();
    return message;
}

// Helper to transpot the message thru the SMTP protocol
private void transportSMTPMessage(Session session, Message message)
    throws NoSuchProviderException, MessagingException{

    // Creates the transport connection and
    // Send the message
    Transport transport = session.getTransport("smtp");
    transport.connect(host, userName, password);
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();
} 
```

我认为代码一切都很好，我只是不明白，为什么它在 Glassfish 上不起作用？

如果有人帮助我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:32:24.787

创建 Session 后，在您的应用程序中调用 session.setDebug(true)。然后查看服务器日志文件，看看 JavaMail 调试输出是否有任何关于出现问题的线索。我假设你没有得到任何例外。

# html - 在可变高度 td 中对齐 div 顶部/底部

> ID：11655767
> 
> 赞同：1
> 
> 时间：2012-07-25T17:59:28.960
> 
> 标签：html, css

我正在使用下面的 HTML：我有一个高度可变的表格。高度由第一个 TD 内容设置。在接下来的 TD 中，我想要 2 个 div。一个对齐顶部，另一个对齐底部。

它似乎不起作用，因为第二和第三个 TD 没有明确的高度。

我正在寻找一个纯 HTML/CSS 解决方案（不使用 JS 设置高度）

谢谢你的帮助。

```
<html>
<head>
    <title></title>
    <style>
        div { 
        border: 1px solid red; 
    }
    td.container {
        position: relative;
    }
    td.container div.a {
        position: absolute;
        top: 0;
    }
    td.container div.b {
        position: absolute;
        bottom: 0;
    }

    </style>
</head>
<body>
    <table border="1">
        <tr>
            <td><div>aasd asdas dasd<br />asd asdasdb<br />asd asdc<br /></div></td>
            <td class="container"><div class="a">a</div><div class="b">b</div></td>
            <td class="container"><div class="a">a</div><div class="b">b</div></td>
        </tr>
        <tr>
            <td><div>aasd asdas dasd<br />aasd asdas dasd<br />aasd asdas dasd<br />aasd asdas dasd<br />asd asdasdb<br />asd asdc<br /></div></td>
            <td class="container"><div class="a">a</div><div class="b">b</div></td>
            <td class="container"><div class="a">a</div><div class="b">b</div></td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:06:02.963

你的意思是这样的吗？ [http://jsfiddle.net/ERPSA/](http://jsfiddle.net/ERPSA/) 使用 position:relative 在父母的 td 和 position:absolute 在孩子的 tds ...这使孩子们使用 td 作为他们位置的参考。

# asp.net-mvc-3 - MVC3 模型验证（在另一个类中比较属性）

> ID：11655769
> 
> 赞同：1
> 
> 时间：2012-07-25T17:59:36.883
> 
> 标签：asp.net-mvc-3, validation, model

```
public class User
{
string username;
string password;
}

public class registration
{
User user;
**[compare(user.password)]**
string newPass;
} 
```

它产生错误（找不到属性）有没有办法为另一个类中的属性创建验证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:37:33.200

```
public class CompareOther:ValidationAttribute, IClientValidatable
{
private readonly string testedPropertyName;
private readonly string className;

public CompareOther(string testedPropertyName)
{
    string[] word = testedPropertyName.Split('.');
    this.testedPropertyName = word[1];
    this.className = word[0];
}

protected override ValidationResult IsValid(object value, ValidationContext     validationContext)
{
    var propertyTestedInfo = validationContext.ObjectType.GetProperty(this.className);

    if (propertyTestedInfo == null)
    {
        //return new ValidationResult("unknown property");
        return new ValidationResult(string.Format("unknown property {0}.{1}",this.className ,this.testedPropertyName));
    }

    var propertyObject = propertyTestedInfo.GetValue(validationContext.ObjectInstance,null);
    var propertyTestedValue = getValue(testedPropertyName,propertyObject);

    if (value == null)
    {
        return ValidationResult.Success;
    }

    if (propertyTestedValue == null)
    {
        return ValidationResult.Success;
    }

    if (propertyTestedValue.ToString() == value.ToString())
    {
        return ValidationResult.Success;
    }

   return new ValidationResult(FormatErrorMessage(validationContext.DisplayName)); 
}

public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
{
    var rule = new ModelClientValidationRule
    {
        ErrorMessage = this.ErrorMessageString,
        ValidationType = "lessthan"
    };
    rule.ValidationParameters["propertytested"] = this.testedPropertyName;

    yield return rule;
}

private Object getValue(string name,Object obj)
{
    if (obj == null)
        return null;
    Type type = obj.GetType();
    PropertyInfo info = type.GetProperty(name);
    if (info == null)
    { return null; }
    obj = info.GetValue(obj, null);
    return obj;
} 
```

}

# linux - 循环遍历 Bash 中路径变量的元素

> ID：11655770
> 
> 赞同：36
> 
> 时间：2012-07-25T17:59:39.790
> 
> 标签：linux, bash

我想遍历从`echo $VARIABLE`命令中获得的路径列表。

例如：

`echo $MANPATH`将返回

`/usr/lib:/usr/sfw/lib:/usr/info`

所以这是三个不同的路径，每个路径用冒号分隔。我想遍历这些路径中的每一个。有没有办法做到这一点？谢谢。

感谢到目前为止的所有回复，看来我实际上根本不需要循环。我只需要一种取出冒号的方法，这样我就可以`ls`在这三个路径上运行一个命令。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-25T18:05:46.053

您可以设置内部字段分隔符：

```
( IFS=:
  for p in $MANPATH; do
      echo "$p"
  done
) 
```

我使用了一个子外壳，因此 IFS 的更改不会反映在我当前的外壳中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-29T16:43:39.873

在 Bash 中，执行此操作的规范方法是`read`适当地使用内置函数：

```
IFS=: read -r -d '' -a path_array < <(printf '%s:\0' "$MANPATH") 
```

这是唯一强大的解决方案：将完全按照您的意愿进行操作：在分隔符上拆分字符串，`:`并且对于空格、换行符和全局字符（如`*`、`[ ]`等）是安全的（与其他答案不同：它们都已损坏）。

在此命令之后，您将拥有一个数组`path_array`，您可以在其上循环：

```
for p in "${path_array[@]}"; do
    printf '%s\n' "$p"
done 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-25T18:04:37.863

您可以使用 Bash 的模式替换[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)来填充循环变量。例如：

```
MANPATH=/usr/lib:/usr/sfw/lib:/usr/info

# Replace colons with spaces to create list.
for path in ${MANPATH//:/ }; do
    echo "$path"
done 
```

注意：不要将替换扩展括在引号中。您希望 MANPATH 中的扩展值被 for 循环解释为单独的单词，而不是单个字符串。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-24T04:00:37.563

通过这种方式，您可以安全地通过`$PATH`单个循环，而循环`$IFS`内部或外部将保持不变。

```
while IFS=: read -d: -r path; do # `$IFS` is only set for the `read` command
    echo $path
done <<< "${PATH:+"${PATH}:"}"   # append an extra ':' if `$PATH` is set 
```

您可以检查 的值`$IFS`，

```
IFS='xxxxxxxx'
while IFS=: read -d: -r path; do
    echo "${IFS}${path}"
done <<< "${PATH:+"${PATH}:"}" 
```

输出将是这样的。

```
xxxxxxxx/usr/local/bin
xxxxxxxx/usr/bin
xxxxxxxx/bin 
```

参考[StackExchange 上的另一个问题](https://unix.stackexchange.com/q/18886)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T18:09:34.677

```
for p in $(echo $MANPATH | tr ":" " ") ;do
    echo $p
done 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-08T10:43:02.093

这也可以在命令行上用 Python 解决：

```
python -c "import os,sys;[os.system(' '.join(sys.argv[1:]).format(p)) for p in os.getenv('PATH').split(':')]" echo {} 
```

或作为别名：

```
alias foreachpath="python -c \"import os,sys;[os.system(' '.join(sys.argv[1:]).format(p)) for p in os.getenv('PATH').split(':')]\"" 
```

使用示例：

```
foreachpath echo {} 
```

这种方法的优点是`{}`会被每条路径连续替换。这可用于构造各种命令，例如列出`$PATH`. 包括名称中带有空格的目录：

```
foreachpath 'for e in "{}"/*; do du -h "$e"; done' 
```

这是一个通过为in`$PATH`中的每个文件和目录创建符号链接来缩短变量长度的示例。这对日常使用没有用，但如果您在容器中收到错误消息，*可能*会很有用，因为使用完整作为命令行的一部分......`$PATH``$HOME/.allbin`*`too many arguments``docker``bitbake``$PATH`*

 *```
mkdir -p "$HOME/.allbin"
python -c "import os,sys;[os.system(' '.join(sys.argv[1:]).format(p)) for p in os.getenv('PATH').split(':')]" 'for e in "{}"/*; do ln -sf "$e" "$HOME/.allbin/$(basename $e)"; done'
export PATH="$HOME/.allbin" 
```

理论上，这也应该加快常规 shell 的使用和 shell 脚本，因为搜索每个执行的命令的路径更少。不过，这**很**hacky，所以我不建议**任何人**缩短`$PATH`这种方式。

不过，`foreachpath`别名可能会派上用场。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-11T02:19:57.607

```
IFS=:
arr=(${MANPATH})
for path in "${arr[@]}" ; do # <- quotes required
   echo $path
done 
```

...它确实会处理空格 :o) 但如果您有以下内容，还会添加空元素：

```
:/usr/bin::/usr/lib: 
```

...然后索引 0,2 将为空（''），不能说为什么索引 4 根本没有设置

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T18:04:57.693

您可以使用 ${} 表示法中的 Bash for X 来完成此操作：

```
for p in ${PATH//:/$'\n'} ; do
    echo $p;
done 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-04T03:53:44.910

结合以下想法：

*   [https://stackoverflow.com/a/29949759-gniourf_gniourf](https://stackoverflow.com/a/29949759) _ [_](https://stackoverflow.com/users/1815797/gniourf-gniourf)
*   [https://stackoverflow.com/a/31017384](https://stackoverflow.com/a/31017384) - [Yi H.](https://stackoverflow.com/users/881930/yi-h)

代码：

```
PATHVAR='foo:bar baz:spam:eggs:'  # demo path with space and empty
printf '%s:\0' "$PATHVAR" | while IFS=: read -d: -r p; do
    echo $p
done | cat -n 
```

输出：

```
1   foo
2   bar baz
3   spam
4   eggs
5 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-08T20:08:37.813

OP 的更新想要`ls`生成的文件夹，并指出`ls`只需要一个空格分隔的列表。

`ls $(echo $PATH | tr ':' ' ')`很好很简单，应该很好地满足要求。*

# ios - iOS - MagicalRecord / AFNetworking / NSFetchedResultsController - 后台重新同步进程导致永久挂起

> ID：11655771
> 
> 赞同：6
> 
> 时间：2012-07-25T17:59:39.817
> 
> 标签：ios, core-data, nsfetchedresultscontroller, afnetworking, magicalrecord

# 所以我想要达到的目标

是一个同步过程，应该使用 AFNetworking 和 Magical Record 在后台完成，但是当连接到 NSFetchedResultsController 的视图控制器当前打开或已打开（但弹出）时会导致永久挂起。

该应用程序会在用户第一次打开手机时进行同步，然后通过 Magical Record 框架始终使用 Core Data 持久性存储中的数据。然后当用户想要确保那里的数据是最新版本时，他们进入设置并单击“重新同步”，这会导致执行以下代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0),^{
    [[CoreDataOperator sharedOperator] commenceSync:self];
}); 
```

这将使用单例 CoreDataOperator（NSObject 的子类——也许它应该是 NSOperation？）启动同步过程，它会触发以下代码：

```
[[ApiClient sharedClient] getDataRequest]; 
```

然后在单例 AFHTTPClient 子类中触发这个坏男孩：

```
[[ApiClient sharedClient] postPath:url parameters:dict
 success:^(AFHTTPRequestOperation *operation, id responseObject) {
 [request.sender performSelector:request.succeeded withObject:response];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
 [request.sender performSelector:request.failed withObject:response];
}
 ]; 
```

这实际上是说：AFHTTPClient 发布此信息，当它成功时，将信息传递回提供的选择器（我知道这是通用的，但请求不是问题）

现在，AFNetworking 被编码为在主线程上调用所有完成选择器（在本例中为成功和失败）；所以为了防止阻塞主线程，处理响应并准备保存的代码被发送回后台线程：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    id responseData;
    [self clearAndSaveGetData:responseData];
}); 
```

然后使用 Magical Record 框架调用导致保存的函数（仍在后台线程中）：

```
NSManagedObjectContext *localContext = [NSManagedObjectContext contextForCurrentThread];

[DATAENTITY truncateAllInContext:localContext];
<!--- PROCESS DATA INTO DATAENTITY -->
[localContext saveNestedContexts]; 
```

我之所以选择`saveNestedContexts`是因为因为我在后台工作，所以我希望它一直推到默认上下文，我假设它是父上下文？（但到目前为止这还不是问题）。

现在，这些数据可以变成成千上万行，所以我使用 NSFetchedResultsController 来安全有效地访问这些数据，并且它们在与设置或主页不同的视图控制器中使用。

## 以下是三种情况：

1.  *包含 FRC 的 ViewController 尚未被访问（不可见且以前不可见）* - 后台同步工作完美，由于节省堆栈而减去了一点延迟。
2.  *包含 FRC 的 ViewController 已被访问并且当前可见*-由于 FRC 接收上下文更新，后台同步进程**挂起。**
3.  *包含 FRC 的 ViewController 先前已被访问，但当前不可见（使用以下代码弹出 VC ：）并且 FRC 在`[self.navigationController popViewControllerAnimated:YES];`***ViewDidUnload***中设置为 nil* -由于似乎是 FRC，后台同步进程挂起接收上下文更新（就像案例 2 一样）。

[PS：挂了几分钟后，我杀死了调试器，它在下面的代码上给了我一个 SIGKILL，这就是为什么我假设 FRC 正在接收导致它挂起的上下文更新：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 
{
    UITableView *tableView = controller == self.fetchedResultsController ? self.tableView : self.searchDisplayController.searchResultsTableView;
    [tableView endUpdates]; <---- SIGKILL
} 
```

# 其他需要注意的重要信息：

*   我正在使用 2 个单独的 FRC，一个用于普通 ALL 数据，一个用于搜索
*   我正在为 FRC 和单独的搜索 FRC 使用缓存，该缓存在适当的时间被清除（在此上下文更新内容之前）
*   FRC 正在主线程中获取（当有数千行数据时，这确实会导致轻微的挂起），我一直在研究在后台获取，但是目前还没有实现。

# 问题：

1.  为什么会发生这种挂起，VC 可见或已弹出？
2.  如何使 FRC 不监听保存，而是使用它所拥有的内容，直到保存完成，然后刷新数据（除非这是已经发生并导致挂起的情况）？
3.  实现后台获取（因为使用 FRC 打开 VC 以访问数千行数据时的延迟会产生明显的延迟，即使使用缓存和减少的谓词/节标题 - 在 1 到 4 秒之间）是否可行？太复杂了？怎么做到呢？

谢谢，希望我的问题足够详细。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T18:20:42.073

我知道这个问题很老，但由于这是 MagicalRecord 的常见问题，也许以下内容会对某人有所帮助。

该问题是由`fetchRequest`FRC 和保存操作相互死锁引起的。以下为我解决了它：

更新到最新的 MagicalRecord 版本（撰写本文时为 2.1）。

然后使用以下命令进行所有背景保存：

```
MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
  // create new objects, update existing objects. make sure you're only 
  // accessing objects inside localContext 
  [myObjectFromOutsideTheBlock MR_inContext:localContext]; //is your friend
}
completion:^(BOOL success, NSError *error) {
  // this gets called in the main queue. safe to update UI.
}]; 
```

# facebook - 用于将 OScommerce 网站转换为 facebook 商店的插件

> ID：11655772
> 
> 赞同：-2
> 
> 时间：2012-07-25T17:59:40.300
> 
> 标签：facebook, oscommerce

如何将我的 OScommerce 网站转换为 facebook 商店？请为此建议我一个好的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:31:34.933

这个插件是一个简单的插件，可以帮助您将您的网站带入面子书。单击此[链接](http://addons.oscommerce.com/info/7814)以获取有关此插件的更多信息。

# html - 无法使用 POST 提交表单

> ID：11655775
> 
> 赞同：0
> 
> 时间：2012-07-25T17:59:50.493
> 
> 标签：html, forms, iis

这是我网站的代码：

[http://pastebin.com/jVk0aPW4](http://pastebin.com/jVk0aPW4)

当我尝试提交页面时，它什么也不做。这是我第一次尝试在此网络服务器上提交。网络管理员确保明确启用 POST 和 GET。

我的 HTML 格式不正确吗？还是我需要在服务器端更深入地挖掘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:03:01.047

您有一个嵌套表单，这将导致您的表单爆炸（正确的技术术语）。

# c# - StringBuilder ToString 与 String Substring 的 C# 性能

> ID：11655776
> 
> 赞同：1
> 
> 时间：2012-07-25T17:59:56.510
> 
> 标签：c#, .net, regex, string, performance

拥有一个字符串然后为此字符串调用子字符串更快，其中第一个子字符串将是初始字符串，并且每个新子字符串从初始子字符串中直到其结尾的一小部分？或者使用 StringBuilder 并从一开始就越来越多地切断，然后总是从收缩的字符串中使用 ToString？

此[链接](http://www.dotnetperls.com/stringbuilder-tostring)描述了 StringBuilder ToString 方法仅在新线程访问 StringBuilder 或返回的 String 远小于当前分配的空间时才分配新空间。这听起来比使用 Substring 更快。我可以在.Net Framework 3.5的[实现](http://blogs.msdn.com/b/miah/archive/2007/10/20/stringbuilder-tostring-vs-reflection.aspx)中看到这个逻辑。在 4.0 版中，可以立即调用 FastAllocateString（或多或少类似于 String Substring）。是不是和以前的框架版本一样的逻辑，只是现在隐藏了？

为什么我需要它：

**编辑**：更新解释：我有一个字符串和一组用户给定的正则表达式和上下文。上下文告诉我当前哪些正则表达式会很有趣，可以尝试与字符串的开头匹配。成功匹配后，字符串的开始现在位于最后一次匹配结束的位置之后。现在可能有不同的背景。另外我想知道上次哪个正则表达式与开始匹配。由于这是多次完成，因此性能应该尽可能好。

为了避免搜索整个（剩余的）字符串，我会使用起始锚（^），因此可以尽快中止搜索（在知道开始不匹配之后）。如果我这样做，我会遇到问题，即我不能将 Match 方法的起始索引参数与 0 以外的任何值一起使用。否则，由于锚点，将永远不会有匹配。

所以我想我现在有两种可能：

1）始终在输入字符串上使用 Substring 方法并为当前位置保留和索引。

2）使用 StringBuilder 并在匹配成功时始终删除输入的开头。然后调用 ToString 方法来查看新的开始是否与下一个 Regex 匹配。

上述一种或两种方法的性能是否可以接受，还是有另一种更快的方法？

**Edit2：**关于 StringBuilder 和 String：如此处所述[，](https://stackoverflow.com/questions/4166155/does-stringbuilder-become-immutable-after-a-call-to-tostring) StringBuilder 的实现现在立即分配空间，而以前这被延迟到 StringBuilder 字符串被更改（这一直是我的要求的情况）。所以我猜 Substring 和 ToString 与 Kendall Frey 的纯正则表达式解决方案相比都非常慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:12:21.190

你不需要这样做。[`\G`.NET 正则表达式引擎包含一项功能，可让您使用锚点](http://www.regular-expressions.info/continue.html)匹配上一个匹配项之后的字符串。

正则表达式示例：

```
\Gcat 
```

示例字符串：

```
catcatcatdogcat 
```

火柴：

```
(cat)(cat)(cat)dogcat 
```

编辑：我认为正则表达式不会让您记住`\G`多个正则表达式之间的锚点位置。相反，您可以使用[`Regex.Match(string, int)`](http://msdn.microsoft.com/en-us/library/3583dcyh)重载在某个点开始您的字符串，并使用`\G`锚点来匹配起始位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:06:41.293

许多字符串操作方法都有带有开始/结束或开始/长度对的版本。

即[Regex.Match](http://msdn.microsoft.com/en-us/library/h09aybcd)可用于匹配子字符串，这可能比在部分中切割字符串或插入标记字符更快。

```
public Match Match(string input, int beginning, int length) 
```

注意：与任何性能问题一样，您需要尝试变体并衡量自己**的**数据。

# ruby-on-rails - 如何查询序列化数据rails 3

> ID：11655777
> 
> 赞同：0
> 
> 时间：2012-07-25T18:00:05.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个由数据库表支持的邮件模型。Recipients 是一个序列化数组，其中包含联系人 ID # 和原始电子邮件。我希望能够查询以获取发送给联系人的所有电子邮件。我该如何做 find_by_recipients（包括 contact.id）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:26:49.150

您无法真正查询序列化数据的内部结构。您应该找出一种不同的存储数据的方式，或者获取所有记录并使用 Ruby 以某种方式遍历它们（具体如何执行取决于您，取决于您的风格）。警告：如果有很多记录，后者会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:13:15.003

你有3个选项

1.  重塑数据，将序列化数据提取到新表/列
2.  使用某些搜索引擎索引您的数据（可能是 SOLR，使用 sunspot_solr gem）
3.  改用 nosql 解决方案，最好使用带有 mongo_mapper/mongoid 的 MongoDB

# java - 如何使用 NonFacesRequest 编写 Seam 测试？

> ID：11655782
> 
> 赞同：1
> 
> 时间：2012-07-25T18:00:17.790
> 
> 标签：java, testing, jsf-1.2, acceptance-testing, seam2

我想写一个小测试：

我有一个外部服务器调用我的 url：
`domain.com/pages/test/postback.html?user_id=5`
当调用 url 时，应该调用 Controller 方法 test()（在 page.xml 中定义）

我的问题是：我如何测试 id 是否填充了正确的值？
我已经写了一个测试，`NonFacesRequest` 但最后，该值始终为空

我的控制器：

```
@Name(PostbackController.COMPONENT_NAME)
@AutoCreate
public class PostbackController {
    public static final String COMPONENT_NAME = "postbackController";

    @RequestParameter("user_id")
    private String userId;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public void test(){
        // do something
    }

} 
```

我的测试

```
public class PostbackTest extends SeamTest {

    @Test
    public void test() throws Exception{

        new NonFacesRequest("/pages/test/postback.html?user_id=5"){

                @Override
                protected void renderResponse() throws Exception {

                PostbackController postbackController = (PostbackController) getInstance(PostbackController.class);
                    Assert.assertEquals(postbackController.getUserId(),"5");
                }
            }.run();

} 
```

postback.page.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<page xmlns="http://jboss.com/products/seam/pages" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jboss.com/products/seam/pages http://jboss.com/products/seam/pages-2.2.xsd"
    view-id="/pages/test/postback.xhtml" login-required="false">

    <action execute="#{postbackController.test}" />

<param name="user_id" />

</page> 
```

xhtml 是一个空白页。

希望有人知道如何解决这个问题......

# java - FXML 文件生成 GridPane 默认属性 LoadException

> ID：11655783
> 
> 赞同：0
> 
> 时间：2012-07-25T18:00:29.817
> 
> 标签：java, javafx, javafx-2, fxml

我在使用 FXML 文件（手动编写，不在 SceneBuilder 中生成）构建 JavaFX 项目时遇到问题。下面是 FXML 文件。这是按照[http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)中的 FXML 说明编写的。它产生的实际错误是`Caused by: javafx.fxml.LoadException: javafx.scene.layout.GridPane does not have a default property.`任何帮助将不胜感激。提前致谢。

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<Scene width = "550" 
    fx:controller = "fxmltableview.FXMLTableViewController"
    xmlns:fx = "http://javafx.com/fxml">

    <GridPane alignment = "center" hgap = "10" vgap = "10">
        <padding> <Insets top = "10" right = "10" bottom = "10" left = "10"/> </padding>
        <Label text = "Address Book" GridPane.columnIndex = "0" GridPane.rowIndex = "0" style = "-fx-font: NORMAL 20 Tahoma;"/>
        <TableView fx:id = "tableView" GridPane.columnIndex = "0" GridPane.rowIndex = "1">
            <columns> <TableColumn text = "First Name"> </TableColumn>
                      <TableColumn text = "Last Name">  </TableColumn>
                      <TableColumn text = "email">  </TableColumn>
            </columns>
        </TableView>
    </GridPane>
</Scene> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:30:09.980

您忘记`<children>`了 GridPane 的标签：

```
<GridPane alignment = "center" hgap = "10" vgap = "10">
    <padding> <Insets top = "10" right = "10" bottom = "10" left = "10"/> </padding>
    <children>
      <Label text = "Address Book" GridPane.columnIndex = "0" GridPane.rowIndex = "0" style = "-fx-font: NORMAL 20 Tahoma;"/>
      <TableView fx:id = "tableView" GridPane.columnIndex = "0" GridPane.rowIndex = "1">
        <columns> <TableColumn text = "First Name"> </TableColumn>
                  <TableColumn text = "Last Name">  </TableColumn>
                  <TableColumn text = "email">  </TableColumn>
        </columns>
      </TableView>
    </children>
</GridPane> 
```

因此 FXML 试图将 Label 和 Table 放到`default`GridPane 不可用的属性中。

# vim - vim 按下鼠标中键后粘贴“9”

> ID：11655784
> 
> 赞同：1
> 
> 时间：2012-07-25T18:00:36.353
> 
> 标签：vim

用鼠标从网页中选择一段文本后，我试图将其粘贴到用 vim 打开的文件中，但是当我按下鼠标的中央按钮时，它只会粘贴“9”（有或没有插入模式活性）。

这是 :reg 的输出：

```
--- Registers ---
""   9
"0   9
"1   ^J
"-   9
"/   \s\+$
Press ENTER or type command to continue 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-11T12:12:38.340

在您的主目录中创建一个名为`.vimrc`以下内​​容的文件：

```
set mouse=r 
```

# ruby - 修复 OSX Mountain Lion 的 osascript 剪贴板

> ID：11655786
> 
> 赞同：1
> 
> 时间：2012-07-25T18:00:42.107
> 
> 标签：ruby, applescript, osx-mountain-lion, osascript

在我的 Ruby 应用程序中，我长期使用以下函数写入剪贴板：

```
def pbcopy(text)
  IO.popen("osascript -e 'set the clipboard to do shell script \"cat\"'","w+") {|pipe| pipe << text}
end 
```

我从[这里](http://www.coderaptors.com/?action=browse&diff=1&id=Random_tips_for_Mac_OS_X)得到了这段代码，它通过反引号取代了我之前对 pbpaste 的使用，因为它在 UTF8 和其他东西上看起来更可靠。它一直运行良好，但是在新的 OSX Mountain Lion 上，它停止了工作。osascript -e '将剪贴板设置为“hi”' 效果很好，因此可能是管道不起作用。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:57:12.270

I just tried this and it worked fine with UTF-8 characters:

```
def pbcopy(text)
  IO.popen("pbcopy", "w+") {|pipe| pipe << text}
end

pbcopy "smörgåsbord"
puts `pbpaste` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:28:17.467

`do shell script "cat"`似乎不再返回标准输入。

不过，您可以使用处理程序获取参数`on run`。该`{input, parameters}`表格似乎仅在 Automator 中有效。

```
system("osascript", "-e", "on run {input}
set the clipboard to input
end", "あä") 
```

您还可以设置[__CF_USER_TEXT_ENCODING 变量](http://hints.macworld.com/article.php?story=20081231012753422)：

```
IO.popen("__CF_USER_TEXT_ENCODING=$UID:0x8000100:0x8000100 pbcopy", "w") { |i|
  i << "あä"
} 
```

# php - I want to single ajax uploader script into multiple uploader with the help of Iframe Javascript PHP

> ID：11655794
> 
> 赞同：1
> 
> 时间：2012-07-25T18:01:14.157
> 
> 标签：php, javascript, ajax, iframe, file-upload

I am using this reference [http://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php](http://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php) for ajax uploader ,its working absolutely fine for single upload but i want to convert this script into multiple upload with the help of your guidance also helps are definitely appreciated..

I just want to know how do i target a multiple iframe with the using of single form. Current script is target on a spacefic formId like this and this form contain only one input file...

**Code**

```
<script type="text/javascript">
function init() {
    document.getElementById("file_upload_form").onsubmit=function() {
     document.getElementById("file_upload_form").target = "upload_target";
     document.getElementById("upload_target").onload = uploadDone; 
    }
}
window.onload=init;
<script>

<form id="file_upload_form" method="post" enctype="multipart/form-data" action="http://www.appifylabs.com/web/php-upload-progress-bar/uploaderSecond/upload.php/">
<input name="file" id="file" size="27" type="file" multiple="multiple"/><br />
<input type="submit" name="action" value="Upload Image" /><br />
<iframe id="upload_target" onload="uploadDone()" name="upload_target"  src="" style="width:600px;height:600px;border:1px solid #ccc;"></iframe>
</form> 
```

**Attempt** *didn't work*

```
<script type="text/javascript">
    function init() {
        document.getElementById("file_upload_form").onsubmit=function() {
             document.getElementById("file_1").target = "upload_target_1";
             document.getElementById("file_2").target = "upload_target_2";
        }
    }
window.onload=init;
<script> 
```

**Notice**

I don't want to use any third party uploader like **uploadify,JqueryUploader,Valum** etc only the reason for learn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:12:12.667

Each form can have only one target. And target is a property of the `FORM` element, not the `INPUT` ones (you tried above).

One possible solution is to clone the form using Jquery, set the corresponding target to the required `IFRAME` and submit each clone.

# javascript - Javascript弹出会消失

> ID：11655795
> 
> 赞同：2
> 
> 时间：2012-07-25T18:01:19.053
> 
> 标签：javascript

我需要一个消息框之类的东西（但没有按钮），它会显示在屏幕上`All data was saved`，然后在 2-3 秒内消失。

这就像一个警报，我们在其中提醒用户记录已保存。但我需要它显示在屏幕顶部的一个小框中，它应该淡出。

有人可以帮我做一个 javascript 代码吗？

对不起，我有任何代码，希望我能把我的问题说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:04:23.070

****编辑****

此后，OP 澄清说他们目前没有使用 jQuery ......但由于手工制作 JS 动画并非易事，我建议 OP 应该开始使用 jQUery 来解决这个问题（更不用说所有其他伟大的图书馆的用途）。详情见评论。

****结束编辑****

不会为您编写代码，但如果您使用 jQuery，您可能希望查看淡出：http: [//api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

有了它，您可以执行以下操作：

```
$('body').append('<div id="alert">ALL data was saved</div>');
$('#alert').fadeOut('slow') 
```

# ruby - Ruby 模式匹配最后一个

> ID：11655798
> 
> 赞同：0
> 
> 时间：2012-07-25T18:01:20.380
> 
> 标签：ruby, replace

我想创建一个 Ruby 模式来替换除最后一个字母之外的所有字母。

例如，全部替换：

```
"}" 
```

用字符串：

```
"} something " 
```

转动这个字符串：

```
"{ anything }   { anything } { anything }" 
```

到：

```
"{ anything } something    { anything } something  { anything }" 
```

编辑：

到目前为止我用过的：

```
replaceString = "} something"
string.gsub("}", replaceString).reverse.sub(replaceString.reverse, "}").reverse 
```

但我认为它不是很有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:20:32.210

您可以使用积极的前瞻：

```
str = "{ anything }   { anything } { anything }"
pattern = /\}(?=.*\})/
str.gsub(pattern, "} Something")

=> "{ anything } Something   { anything } Something { anything }" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:05:16.543

在我的另一个答案中，我没有告诉你正则表达式对于这样一个简单的问题来说是一种过度杀伤力，更不用说它可能是最慢的解决方案。

我更喜欢这样一个简单的定制解决方案：

```
def replace_all_but_last str, substr1, substr2
  str.dup.tap { |result|
    index = str.rindex substr1
    result[0...index] = result[0...index].gsub(substr1, substr2)
  }
end

str = "{ anything }   { anything } { anything }"
replace_all_but_last str, "}", "} something" 
```

# cuda - 计算能力 3.0 设备的最大并发内核数

> ID：11655800
> 
> 赞同：1
> 
> 时间：2012-07-25T18:01:24.967
> 
> 标签：cuda, gpu

计算能力 3.0 的 NVIDIA 设备可能的最大并发内核数是多少？我希望它与 Compute Capability 2.0 不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:12:18.710

从 CUDA C 编程指南 4.2 版：

3.2.5.3 并发内核执行 一个设备可以并发执行的最大内核启动次数为 16 次。

# api - 编写 API：利用 HTTP

> ID：11655809
> 
> 赞同：1
> 
> 时间：2012-07-25T18:02:00.003
> 
> 标签：api, http

我正在通过 http 编写一个 json api（原始的，是吗？），我大多忽略了 http 层。除了在适用时使用 POST 和 GET（很少使用另一种方法），我不使用协议可能提供的任何优化。

我错过了什么？我可以使用什么标头，通过更多地利用 http 层的功能可以简化什么？

# c# - 如何在 MVC 3 中编辑 Html.DisplayFor 方法的 CSS？

> ID：11655810
> 
> 赞同：12
> 
> 时间：2012-07-25T18:01:59.483
> 
> 标签：c#, .net, css, asp.net-mvc-3

我正在使用以下代码在我的视图中显示来自我的视图模型的文本：

```
@Html.DisplayFor(m => m.Name) 
```

当我查看 IE9 中的 HTML 详细信息（我必须在工作中使用）时，没有与名称关联的类，它只是使用 Body CSS 样式而不是 display-field 类样式。有谁知道可能导致此问题的原因或我如何编辑所创建文本的 CSS？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T18:09:52.577

如果它是标签，请按照 Nataka526 的建议使用适当的助手

否则将其与一个类放在一个跨度中并更新该类的css：

**你的html：**

```
<span class="name">
    @Html.DisplayFor(m => m.Name)
</span> 
```

**你的CSS：**

```
.name {
    //custom css
} 
```

**更新**

另一种选择：更新您的显示模板以处理特定的 ViewData 键：

在 Views > Shared > DisplayTemplate 中（如果您还没有此文件夹，请创建此文件夹）：

添加文件 String.cshtml：

```
@model string

@{
    string myClass = ViewData["class"]
}

@if(string.IsNullOrEmpty(myClass))
{
    @:@Model
}
else
{
    <span class="@myClass">@Model</span>
} 
```

除了字符串之外，您可能还需要为其他提示添加 DisplayTemplates。

在视图中，您将编写如下内容：

```
@Html.DisplayFor(m => m.Name, new { @class= "name" }) 
```

这将自动在其周围添加跨度。

**更新**

解释：

有一个重载，`Html.DisplayFor`它接受两个参数：表达式和`object additionalViewData`。所以我传递的第二个参数是匿名对象additionalViewData。我用名为的属性创建了这个对象`class`

然后，在 html 帮助器内部，我检查是否有带有键的 ViewData，`class`如果有，我将输出放在具有该类值的范围内。

** 将变量名称从 更新为`class`，`myClass`因为“类”不是合适的变量名称。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T18:58:57.943

DisplayFor 用于模板的原因。如果您不使用模板，那么您应该像这样使用该项目：`@Model.Name` 如果您想给它一个类或 id，那么您需要将它包装在一个跨度或 div 中。

您的问题是您使用错误的方法来输出数据，并期望它做其他事情。没有内置方法可以输出带有类名的原始数据。

所以你的选择是，将原始项目包装在一个可以应用 css 的容器中，或者创建一个模板用于这些，然后在 DisplayFor 中指定模板名称，如下所示：

```
 @Html.DisplayFor(m => m.Name, "NameTemplate") 
```

# javascript - 使用 openstreetmap api 转换城市中的坐标

> ID：11655811
> 
> 赞同：0
> 
> 时间：2012-07-25T18:02:01.293
> 
> 标签：javascript, api, openstreetmap

我可以使用 OpenStreetMap API 转换城市地址中的纬度和经度吗？您还可以检索省和地区吗？或者我应该为此使用外部数据库吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:07:10.363

你想把它转换成什么？你想在获取城市或地址的纬度和经度的地方进行地理编码吗？如果是这种情况，您可以使用 OSM 提供的 Nominatim 服务：[http ://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)

# git - 用于备份 Web 服务器和 MySQL 数据库的 Mac/UNIX Shell 脚本的错误处理

> ID：11655815
> 
> 赞同：0
> 
> 时间：2012-07-25T18:02:12.030
> 
> 标签：git, bash, shell, unix

我为自己编写了一个 shell 脚本来备份我们的 Web 服务器并让它工作。它导航到备份目录，执行 rsync、mysqldump，将所有内容提交到 git 存储库以进行版本控制，并将其推送到我们的远程 git 服务器。我了解到编写预定的 UNIX 脚本有很多陷阱，所以我想知道我是否遗漏了任何东西或让自己陷入灾难。如果整个过程中出现任何错误，我将如何通过电子邮件发送给我？

```
#!/bin/bash

#Exit on any error
set -e

LOGFILE=~/backups/web_backup-$(date +"%m.%d.%Y_%H.%M.%S").log
touch $LOGFILE
echo "Backup started for "$(date +"%m.%d.%Y_%H.%M.%S") | tee -a $LOGFILE

############################################################
###### BACKUP WEBSITE
############################################################

echo "Backing up Website..." 2>&1 | tee -a $LOGFILE
cd ~/backups/example.org
if [ "$?" != "0" ]; then
    echo "Cannot change directory!" 1>&2
    exit 1
fi

rsync -Pav --size-only --delete --filter='P .git' --filter='P example.com.sql' backups@example.com:/path/to/example.org/ ~/backups/example.org/ 2>&1 | tee -a $LOGFILE

echo "Backing up Example.com DB..." 2>&1 | tee -a $LOGFILE

ssh backups@example.com "mysqldump -u user -hlocalhost -ppassword dbname > example.com.sql 

echo "Adding files to Git Repository..." 2>&1 | tee -a $LOGFILE 
git add . 2>&1 | tee -a $LOGFILE| tee -a $LOGFILE

echo "Commiting files to Git Repository..." 2>&1 | tee -a $LOGFILE 
git commit -m "Backup as of "$(date +"%m.%d.%Y_%H.%M.%S") 2>&1 | tee -a $LOGFILE

echo "Pusing Git Repo to Remote Location..." 2>&1 | tee -a $LOGFILE 
git push origin master 2>&1 | tee -a $LOGFILE

echo "Finished backing up Website..." 2>&1 | tee -a $LOGFILE

echo "Backup Finished for "$(date +"%m.%d.%Y_%H.%M.%S")
exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:12:36.463

在脚本中声明一个报告文件并将所有输出定向到它。检查复制和 rsynch 命令的退出状态（$？），如果退出状态不等于零，则使用 mail 命令将邮件发送到带有报告文件的地址

```
mail -s "subject " -c "cc address" "to-address" < reportfile name 
```

# c# - 使用 Rx，每 60 秒获取最后一次触发的事件

> ID：11655822
> 
> 赞同：6
> 
> 时间：2012-07-25T18:02:42.840
> 
> 标签：c#, events, system.reactive

我有一个事件（可能）每秒触发一次（计时器滴答声）。我想做的是`EventArgs`每 60 秒取最后一个刻度的值（如果在这 60 秒内有新的刻度）。我尝试做类似的事情：

```
Observable.FromEventPattern(
    h => myThing.SomeEvent += h,
    h => myThing.SomeEvent -= h)
        .Throttle(TimeSpan.FromSeconds(60))
        .TakeLast(1)
        .Do(p => // do something with p); 
```

不幸的是，我从未接触过该`Do`方法，而且我不确定自己做错了什么？

抱歉，如果这是完全错误的，我第一次使用 Rx :)

**编辑：**根据下面的建议，我改为`Do`，`Subscribe`但如果我使用 ，我仍然没有得到任何结果`Throttle`。我应该使用它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T10:44:54.863

我认为这是过度设计的，您只需要使用`Sample`，它就可以满足您的要求：

```
source.Sample(TimeSpan.FromSeconds(60)).Subscribe(x => /* .. */); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T09:58:24.873

做这个：

```
Observable.FromEventPattern(h => myThing.SomeEvent += h, h => myThing.SomeEvent -= h)
    .Window(TimeSpan.FromSeconds(60))
    .SelectMany(x => x.TakeLast())
    .Subscribe(x => /* ... */); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T20:31:23.743

鉴于该片段，在您订阅 Observable 之前什么都不会发生。IIRC，该事件仅在有人调用订阅时才连接（呃，当您处理订阅时未连接）。

我尽量避免使用 Do。可观察对象是一个值流，您应该通过订阅期间传入的方法真正处理这些值（以及流结束或错误）。然后，Do 变成了一个副作用——当值在传递到 OnNext 方法的过程中，你会做一些事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T09:25:36.860

油门不会解决问题，因为..

油门的工作方式是在给定的时间内等待暂停，假设您每秒收到一个事件，而您的油门是 1 分钟，您将永远看不到任何东西。除非您的直播出现问题并且突然间停顿超过 1 分钟。

Throttle 最常用的示例之一是将其用于 AutoComplete 框，您不想在每次击键时触发过滤列表的请求，因此您将限制设置为 300 毫秒，因此当用户停止时输入至少 300 毫秒，您将触发搜索。

我想知道您的解决方案是否会从缓冲区或窗口中受益……我敢打赌，保罗现在能想出比我的大脑更棒的东西。几个月来没有太多使用 Rx :(

# mysql - 如何阻止 Pentaho 的 PAC 搜索不存在的 hsqldb 实例？

> ID：11655829
> 
> 赞同：0
> 
> 时间：2012-07-25T18:03:10.610
> 
> 标签：mysql, hsqldb, administration, pentaho

我正在尝试让 Pentaho 的 BI Server 3.10 在 CentOS 和 MySQL 上运行。我已经按照 Prashant Raju 在他的网站上提供的步骤进行了操作（并且以前曾使用过一次）。BI 服务器正在运行，但我无法让 Pentaho 的管理控制台 (PAC) 开始使用 MySQL 数据库。它总是回退到搜索不存在的 HSQLDB 实例。显然，一切都按照应有的方式进行了配置——但显然不是……

希望这里有人可以帮助我，我在这里很迷茫！

在此先感谢，古斯塔沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:38:30.143

在你的`webapps/pentaho/WEB-INF/web.xml`，寻找线

```
<!-- [BEGIN HSQLDB DATABASES]
<context-param> 
     <param-name>hsqldb-databases</param-name> 
     <param-value>sampledata@../../data/hsqldb/sampledata,hibernate@../../data/hsqldb/hibernate,quartz@../../data/hsqldb/quartz</param-value>
</context-param>
[END HSQLDB DATABASES] --> 
```

和

```
<!-- [BEGIN HSQLDB STARTER]
<listener> 
     <listener-class>org.pentaho.platform.web.http.context.HsqldbStartupListener</listener-class> 
</listener>
[END HSQLDB STARTER] --> 
```

注释掉或删除这两行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:02:20.363

实际上，一旦我将管理控制台从原来的位置移动到现有的 tomcat 实例，我应该编辑文件 [pentaho-home-folder]/administration-console/resource/config/console.xml

正如[pablotips 的 blogspot](http://pablotips.blogspot.com.br/p/installing-tomcat-and-pentaho.html)所解释的那样。多谢，伙计！

# c++ - 从 iPhone 应用程序上的 C++ 调用时 fbDidLogin 未触发

> ID：11655830
> 
> 赞同：0
> 
> 时间：2012-07-25T18:03:11.800
> 
> 标签：c++, objective-c, objective-c++, cocos2d-x, facebook-ios-sdk

我有一个适用于 C++（Cocos2DX 游戏）的 iOS 应用程序。我想在上面集成 Facebook。

我按照 Facebook 开发者网站的指示在 Objective C 类上初始化 Facebook iOS SDK。然后我从我的 C++ 代码中调用这个 Objective-C 类，它似乎可以工作——Facebook 应用程序已打开并要求身份验证和权限——。

问题是像 fbDidLogin 这样的“事件”或“回调”没有被回调，或者至少我无法从 C++ 控制它们

你知道这是否可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:59:37.150

好的，解决方案：

所有与 Facebook 相关的代码都必须在 AppDelegate.m 中，然后您可以使用以下指令从代码中的任何位置访问它：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    [appDelegate FacebookLogin]; 
```

# xml - 使用 xml web 服务并解析它

> ID：11655836
> 
> 赞同：0
> 
> 时间：2012-07-25T18:03:32.720
> 
> 标签：xml, html, jquery, xml-parsing

我正在为 Blackberry OS 5+ 开发 HTML5 应用程序。

我必须从[http://domain.com/xxx/mTop](http://domain.com/xxx/mTop)获取远程 xml 文件并对其进行解析以将其显示为列表。

我正在尝试使用 jQuery 和 AJAX 来实现，但我遇到了**Same Origin Policy**的问题。

我的问题是，如何获取远程 XML 文件并将其显示为列表？

它不是一个真正的文件，它是一个返回 XML 的 Web 服务。如果该 Web 服务返回 JSON，我可以解析它吗？

顺便说一句，我问过这个与这个相关的[问题](https://stackoverflow.com/questions/11655239/get-remote-xml-file-by-ajax-and-parse-it-with-jquery)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:35:25.703

默认情况下，跨域请求不允许使用 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:11:38.153

您可以在您自己的域上以服务器语言（例如 PHP）构建一个与其他域（`file_get_contents`,`curl`等）交互的中介，然后回显响应......然后您的应用程序只与该代理而不是单独的域交互.

# c - 当 linux 内核将页面写回内存映射文件时捕获？

> ID：11655837
> 
> 赞同：2
> 
> 时间：2012-07-25T18:03:44.653
> 
> 标签：c, linux, mmap

我正在考虑一个系统，它可以让我存储映射文件并透明地对它们包含的数据进行类型转换。似乎可以通过映射第二个内存区域并使其受到保护来捕获内存访问，然后在访问新页面时捕获段错误。这将让我处理我需要的读取类型转换。

但是，为了兼容读/写，我需要一些方法来捕捉操作系统何时将部分内存分页回磁盘，这样我就可以在写入之前以另一种方式进行类型转换。

有没有以这种方式挂钩分页系统的能力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:08:28.033

你想要的东西是不可能的，这反映了对`mmap`. 文件支持的映射被写回磁盘的事件是不相关的，因为在这种情况发生之前，任何读取文件的尝试都将（并且**必须**，以符合 POSIX）从页面的已修改内存副本中读取，不是磁盘上过时的内容。换句话说，将修改后的页面写回磁盘对应用程序来说是完全透明的，并且假设您永远不会断电或重新启动，那么修改后的页面完全有可能*永远不会*写回磁盘。

你的设计是行不通的。如果你想要这种行为，你将不得不做一些不同的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:41:16.273

使用内存映射和 SIGSEGV 处理程序有点问题。首先，[mprotect()](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)不是[异步信号安全](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)的，这意味着`mprotect()`在信号处理程序中不能保证工作。其次，信号处理程序和多个线程之间必要结构的同步非常复杂（尽管可以使用 GCC [__sync](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fsync-Builtins.html#g_t_005f_005fsync-Builtins)和/或[__atomic](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html#g_t_005f_005fatomic-Builtins)内置函数），因为您不能在信号处理程序中使用标准锁定原语——幸运的是，您可以简单地从信号处理程序返回；内核不会跳过有问题的指令，因此之后会立即发出相同的信号。

我确实编写了一个小程序来测试匿名私有非保留内存映射，使用`read()`并`write()`更新映射。问题是其他线程可能会在信号处理程序更新映射时访问映射。

我认为如果您为当前活动区域使用临时文件，当记录跨越页面边界时，在前后有一个额外的页面来保存部分记录，它可能会起作用。

实际数据文件将由私有匿名未保留不可访问映射 ( `PROT_NONE`, `MAP_ANONYMOUS | MAP_PRIVATE | MAP_NORESERVE`) 表示。SIGSEGV 信号处理程序捕获对该映射的访问。该映射的页面对齐区域未映射并从临时文件 ( `MAP_SHARED | MAP_FIXED | MAP_NORESERVE`) 映射。诀窍是临时文件可以额外映射（`MAP_SHARED | MAP_NORESERVE`）到另一个内存区域，信号处理程序可以简单地在映射中取消映射临时文件，以阻止其他线程在转换期间访问该区域；数据仍然可用于另一个内存区域中的库函数（要从实际数据文件中读取和写入`read()`） 。意味着使用完全相同的页面（来自页面缓存），并且意味着内核不会为它们保留交换或 RAM。`write()``MAP_SHARED``MAP_NORESERVE`

这种方法在线程和锁定方面应该可以很好地工作，但它仍然存在`mmap()`, `munmap()`, 并且`mremap()`不是异步信号安全的问题。但是，如果您确实有一个仅以原子方式访问的全局变量导致信号处理程序在应用程序/库代码正在修改结构和/或映射时立即返回，那么这*应该*是可靠的。

# javascript - 在 EmberJS 路由器中使用绑定？

> ID：11655839
> 
> 赞同：2
> 
> 时间：2012-07-25T18:03:47.290
> 
> 标签：javascript, ember.js, ember-old-router

我正在使用 Ember.Router，但我无法弄清楚的一件事是如何将对象绑定到路由器正在实例化的控制器。

例如，这是一个控制器类（扩展），路由器将为特定路由（“页面”）实例化，以及一个控制器对象（创建），例如处理应用程序外部部分的用户管理任务路由器：

```
// controller used by Router to render the "page" route
App.PageController = Em.ObjectController.extend({
    content: Em.Object.extend({
        foo: 'bar'
    })
});

// global controller for users
App.usersController = Em.ObjectController.extend({
    content: Em.Object.extend({
        fooBinding: App.PageController.foo
        // the above will not work since Em.Router
        // instantiates the page controller dynamically
    })
}); 
```

因此，当路由器加载时，它会将 App.PageController 实例化为 App.router.pageController，但那是在 App.usersController 已经创建之后。那么 App.usersController 如何访问路由器管理的控制器中的数据呢？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:24:30.087

您的样本中有一些错误。

首先，您永远不应该在声明时直接使用 Object 值设置属性：该值将在类的所有实例之间共享。在这里，这并不*重要*，但这是一种不好的做法。在这种情况下，设置 PageController 内容的好方法是在`connectOutlet`调用时将其绑定到路由器中，如下所示：

```
connectOutlets: function (router) {
  var theContainerController = router.get('theContainerController'),
      objectWithFooBar = Ember.Object.create({
    foo: 'bar'
  });
  theContainerController.connectOutlet('page', objectWithFooBar);
} 
```

`usersController`第二个错误是: 它应该是 的命名`UsersController`，因为它是一个类，它将在调用`usersController`期间注入到路由器中`initialize`。让用户多元化 & ObjectController 似乎也很奇怪。当然应该单数...

最后，当然也是关于这个问题最有趣的是，一旦你应用了前面的注释，你将能够使用以下方法设置绑定：

```
App.UserController = Em.ObjectController.extend({
  fooBinding: 'App.router.pageController.foo'
}); 
```

`App.router`可以在您致电之前进行设置`App.initialize`。`UserController`使用全局符号直接访问绝对是一个糟糕的耦合`PageController`，但它在您的情况下可以完成这项工作。

一个绝对更好的解决方案也是在调用中绑定`UserController`的内容。`connectOutlet`

# php - 使用变量作为参数调用 $this->lang->line (CodeIgniter)

> ID：11655840
> 
> 赞同：1
> 
> 时间：2012-07-25T18:04:01.110
> 
> 标签：php, codeigniter

我的问题很简单，但我无法找到解决方案。

我想调用`$this->lang->line()`但使用变量作为参数。

例如：

```
$country = 'Italy';
$this->lang->line($country); 
```

应该返回什么`$this->lang->line('Italy')`会返回。

有任何想法吗？

# android - 编辑文本字段所需的建议

> ID：11655842
> 
> 赞同：0
> 
> 时间：2012-07-25T18:04:02.390
> 
> 标签：android

嘿伙计们，我有`Activity`一些`EditText`领域。

用户需要在按下 save 之前填写所有文本字段`Button`。

这是我认为可行的方法。我检查了在`EditText`字段中输入的文本，如果文本不为空，则将相应的数据保存在数据库中，但如果文本为空，`Toast`则显示 a 并显示一条消息以重新输入文本。这是代码：

```
 account_Number.setText(null);
          customer_Number.setText(null);
          account_Holder.setText(null);
          bank_Name.setText(null);
          branch_Name.setText(null);
          branch_Address.setText(null);
          Ifsc.setText(null);
          Micr.setText(null);
          current_Balance.setText(null);

    AddAccount = (Button) findViewById(R.id.addAccount);
    AddAccount.setOnClickListener(this);

}

// only after all the fields have been filled, should the message data added
// successfully be displayed.
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.addAccount:// try making the user enter in all the fields
        boolean work = true;
        if (account_Number.getText() != null
                && customer_Number.getText() != null
                && account_Holder.getText() != null
                && bank_Name.getText() != null
                && branch_Name.getText() != null
                && branch_Address.getText() != null
                && Ifsc.getText() != null && Micr.getText() != null
                && current_Balance.getText() != null) {
            try {
                String accountNumber = account_Number.getText().toString();

                String customerNumber = customer_Number.getText()
                        .toString();

                String accountHolder = account_Holder.getText().toString();

                String bankName = bank_Name.getText().toString();
                String branchName = branch_Name.getText().toString();
                String branchAddress = branch_Address.getText().toString();

                String ifsc = Ifsc.getText().toString();
                String micr = Micr.getText().toString();
                String currentBalance = current_Balance.getText()
                        .toString();

                DatabaseClass entry = new DatabaseClass(AddnewAccount.this);
                entry.open();
                entry.createEntry(accountNumber, customerNumber,
                        accountHolder, bankName, branchName, branchAddress,
                        ifsc, micr, currentBalance);
            } catch (Exception e) {

                work = false;
                Dialog message = new Dialog(this);
                message.setTitle("Error");
                String error = e.toString();
                TextView tv = new TextView(this);
                tv.setText(error);
                message.setContentView(tv);

                message.show();

            } finally {
                Toast message = Toast.makeText(AddnewAccount.this,
                        "Data Added Successfully", Toast.LENGTH_SHORT);
                message.show();
                Intent goBackHome = new Intent(AddnewAccount.this,
                        AccountManagerActivity.class);
                startActivity(goBackHome);
                finish();

            }
        } else {
            Toast message = Toast.makeText(AddnewAccount.this, // not getting executed
                    "Please Fill All The Fields", Toast.LENGTH_LONG);
            message.show();
            Intent refill = new Intent(AddnewAccount.this,
                    AddnewAccount.class);
            startActivity(refill);
            finish();

        }
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:05:26.340

检查喜欢,,,

```
String a_number = account_Number.getText().tostring().trim();
String c_number = customer_Number.getText().tostring().trim();

if(TextUtils.isEmpty(a_number) || TextUtils.isEmpty(c_number)){
      Toast.makeText(AddnewAccount.this, 
                "Please Fill All The Fields", Toast.LENGTH_LONG).show();
}else{
      //Nothing is empty...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:10:09.763

空白`EditText`字段不返回`null`for `getText()`，而是返回`""`。

只需检查`.getText().toString().trim().equals("")`每个字段是否。

# facebook - Facebook FQL 无法正常用于照片/相册

> ID：11655843
> 
> 赞同：0
> 
> 时间：2012-07-25T18:04:06.600
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

以下 FQL 正常工作，然后由于某种原因它没有：

```
@userPhotos = @rest.fql_query("select src_big, src_big_width,src_big_height FROM photo     WHERE album_object_id IN 
                   (SELECT object_id FROM album WHERE owner = me())") 
```

它产生一个“一个”专辑列表 - 最后一张专辑，而不是产生用户拥有的所有专辑的列表。我正在使用 FB explorer 来检查 FQL。它以前可以正常工作，但现在不行。你遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:12:34.017

我认为这是由以下错误引起的，现已解决：[https ://developers.facebook.com/bugs/421883904529161](https://developers.facebook.com/bugs/421883904529161)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:16:58.983

什么是专辑对象 ID？？...我不认为这存在。不是吗

你可以在这里查看对象 [http://developers.facebook.com/docs/reference/fql/album/](http://developers.facebook.com/docs/reference/fql/album/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:55:46.463

可以使用 AID 对照片和相册进行相同的查询。这对我来说可以。

您的查询现在有效吗？（如果 user1388066 是正确的，那是一个错误）

# c# - 减少实例化对象数量的策略

> ID：11655844
> 
> 赞同：1
> 
> 时间：2012-07-25T18:04:09.253
> 
> 标签：c#, .net, optimization, memory-management

在我们项目的早期，我们创建了一个 Locale 类，其中包含一个字符串，例如“en-US”，我们可以从中派生国家和语言以及其他一些信息。

我们现在面临的问题是我们创建了太多的 Locale 对象。这些对象几乎在任何地方都用作参数或 Dictionary/HashSet 键。在进行了一些分析之后，我们意识到我们花费了太多时间来创建这些 Locale 对象。

知道我们有一组有限的语言环境并且这些对象是不可变的，您建议使用什么模式来保持创建的对象数量最少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:10:15.897

您可以使用[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)通过某些索引创建对象并返回缓存的实例（假设您的对象是不可变的，否则返回共享副本会很危险）。

即遵循[CultureInfo.GetCultureInfo](http://msdn.microsoft.com/en-us/library/yck8b540)实现，该实现具有通过键之一返回实例的工厂方法。

```
public static CultureInfo GetCultureInfo(string name) 
```

> 使用指定的区域性名称检索缓存的只读区域性实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:11:25.603

你想要做的是缓存。有几种方法可以实现它，但一般的想法是有一些结构来存储所有以前创建的局部变量，而不是创建一个新的，你首先搜索那个集合。

您的一个选择是创建一个`Dictionary<string, Locale>`. 该字符串将是类似“en-US”的字符串。每次你想创建一个新的`Locale`第一次检查它是否在`Dictionary`. 如果是，请退回它。如果没有，实际上制作一个新的并将其放入`Dictionary`.

```
public static class LocaleFactory
{
    private static Dictionary<string, Locale> cache = new Dictionary<string, Locale>();

    public static Locale GetLocal(string localeString)
    {
        Locale output;
        if (cache.TryGetValue(localeString, out output))
        {
            return output;
        }
        else
        {
            output = new Locale(localeString);
            //do other creation stuff for the Locale
            cache.Add(localeString, output);
            return output;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:22:42.727

你可以有这样的东西：

```
class Locale {
    static Locale en;
    static Locale de;
    ...
    static Locale getLocale(string local){
      //checking if the wanted local already exists and return it or instance it
    }
}; 
```

像单身但有点不同

# silverlight - 模块化 Silverlight 应用程序的重组问题

> ID：11655845
> 
> 赞同：0
> 
> 时间：2012-07-25T18:04:10.110
> 
> 标签：silverlight, mef

我正在使用 Silverlight 4 应用程序，我们使用 Prism/MEF 来构建模块。

每个模块都是作为 Silverlight 应用程序创建的。然后，我们使用 ModulesCatalog.xaml 文件来控制模块的加载方式。

我们有 6 个模块，一切都很完美。

本周我们将添加第 7 个模块，我们刚刚创建了新的 Silverlight 应用程序。我们如下设置模块类。

```
[ModuleExport(typeof(InsightModule))]
public class InsightModule : IModule
{

} 
```

然后我们在 ModulesCatalog 文件中添加了一个条目。

现在，当我们运行应用程序时，我们开始收到所有类型的重组错误。堆栈显示了这一点。

```
at System.ComponentModel.Composition.CompositionResult.ThrowOnErrors(AtomicComposition atomicComposition)
at System.ComponentModel.Composition.Hosting.ExportProvider.OnExportsChanging(ExportsChangeEventArgs e)
at System.ComponentModel.Composition.Hosting.CatalogExportProvider.OnCatalogChanging(Object sender, ComposablePartCatalogChangeEventArgs e)
at System.ComponentModel.Composition.Hosting.ComposablePartCatalogCollection.OnChanging(Object sender, ComposablePartCatalogChangeEventArgs e)
at System.ComponentModel.Composition.Hosting.AggregateCatalog.OnChanging(ComposablePartCatalogChangeEventArgs e)
at System.ComponentModel.Composition.Hosting.ComposablePartCatalogCollection.RaiseChangingEvent(Lazy`1 addedDefinitions, Lazy`1 removedDefinitions, AtomicComposition atomicComposition)
at System.ComponentModel.Composition.Hosting.ComposablePartCatalogCollection.Add(ComposablePartCatalog item)
at Microsoft.Practices.Prism.MefExtensions.Modularity.MefModuleInitializer.CreateModule(ModuleInfo moduleInfo)
at Microsoft.Practices.Prism.Modularity.ModuleInitializer.Initialize(ModuleInfo moduleInfo) 
```

然后你得到标准输出。

> 异常消息是：组成保持不变。由于以下错误，更改被拒绝： 合成产生了多个合成错误，有 57 个根本原因。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 部分 'EyeCue.Common.AboutEyeCueView' 上的不可重组导入 'EyeCue.Common.AboutEyeCueView.ViewModel (ContractName="EyeCue.Common.AboutEyeCueVM")' 阻止了出口的变化。

令人费解的是为什么其他 6 个模块都没有引起这个问题，但现在突然之间，这个没有任何内容的新模块导致目录的重组。这没有道理。

另外，在某些情况下，我有导入的 ctor，这就是我必须做的才能让事情正常工作，所以这不像设置 Allow Recomposition 属性那么简单。

我已经下载了 VisualMFX，但是这行代码会引发 Object Not initialized 异常。

```
this.compositionInfo = new CompositionInfo(_aggregateCatalog,  _container); 
```

发生这种情况时，两者`_aggregateCatalog`&`_container`都不为空。

总之，为什么第 7 个模块会突然开始导致重组？特别是当模块此时甚至没有定义任何导出或导入时？这导致我们如何阻止它来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:08:26.510

这个问题原来是对一个将 Copy Local 设置为 true 的程序集的引用。

确保在主应用程序程序集中设置的所有引用都设置为 Copy Local = false 似乎解决了问题。

# linq - 使用 Linq 检查列表中间是否包含空值

> ID：11655846
> 
> 赞同：2
> 
> 时间：2012-07-25T18:04:11.623
> 
> 标签：linq, group-by, sql-order-by

我有一个要求，我需要从列表中过滤掉空值，只有当空值出现在第一个非空值之后和最后一个非空值之前。

```
Product one = new Product { Name="A" Priority="1" Value=null };
Product two = new Product { Name="A" Priority="2" Value=null };
Product three = new Product { Name="A" Priority="3" Value="10" };
Product four = new Product { Name="A" Priority="4" Value=null };
Product five = new Product { Name="A" Priority="5" Value="20" };
Product six = new Product { Name="A" Priority="6" Value=null }; 
```

在示例中，我需要首先根据产品的优先级对产品列表进行排序，然后检查第一个非空值（即优先级 3）和最后一个非空值（即优先级 5），然后获取列表在优先级 3 和 5 内具有空值的所有产品中。因此，在我们的示例中，只有具有优先级 4 的产品 4 是我要查找的记录。我开始按产品对它们进行实际分组并按优先级对它们进行排序，但在那之后一直坚持如何进行

```
from p in Products
group p by p.Product into grp
select new
{
   Product = grp.Key
   Values = grp.OrderBy(x => x.Priority)
} 
```

有人可以指点我如何进行吗？我在想我可以使用索引来识别所有非空值并迭代以获取最小和最大优先级值，然后查询在最小/最大优先级内具有空白空值的所有记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:06:08.383

如果您确定哪些值是组中的起点和终点并从那里过滤，那将会更容易和更有效。

```
var query =
    from product in Products
    group product by product.Name into g
    let ordered = g.OrderBy(p => p.Priority).ToList()
    let firstIndex = ordered.FindIndex(p => p.Value != null)
    let lastIndex = ordered.FindLastIndex(p => p.Value != null)
    select new
    {
        Product = g.Key,
        Values = ordered
            .Skip(firstIndex + 1)
            .Take(lastIndex - firstIndex - 1)
            .Where(p => p.Value == null),
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:10:36.603

怎么样（您可以使用`.Select`而不是`.SelectMany`为每个产品获取单独的组。 `.SelectMany`将所有有效结果记录组合到一个列表中）：

```
Products
    .GroupBy(p => p.Name)
    .SelectMany (grp =>
        grp.OrderBy(p => p.Priority)           // sort by priority
            .SkipWhile(p => p.Value == null)   // skip null entries at beginning
            .Reverse()                         // reverse
            .SkipWhile(p => p.Value == null)   // skip null entries at end
            .Reverse()                         // reverse back to normal
            .Where(p => p.Value == null)       // then find null entries
    ); 
```

演示：http: [//ideone.com/2dU9L](http://ideone.com/2dU9L)

# internet-explorer - 子域上的 ssl 自签名通配符证书 - Internet Explorer 和 chrome 无法显示页面

> ID：11655851
> 
> 赞同：1
> 
> 时间：2012-07-25T18:04:24.743
> 
> 标签：internet-explorer, google-chrome, centos, ssl-certificate, wildcard-subdomain

我正在开发一个仅运行一个网站 example.com 的开发服务器，并运行所有子域用户帐户someone.example.com。服务器正在运行 CentOS，我为 *.example.com 创建了一个自签名通配符证书。我已经在 Firefox 和 Safari 中测试了这个证书，它在两种浏览器中都运行良好，一旦我接受了证书，我就可以毫无问题地访问 example.com 和 someone.example.com（弹出说这个网站可能不安全）。

该证书适用于所有浏览器中的 example.com，当我去那里（即使使用 IE 和 Chrome）时，我能够接受并将证书安装到“受信任的根证书颁发机构”中。当我在 Internet Explorer（第 9 版）和 Google Chrome（第 20 版）中测试 someone.example.com 时，我得到一个页面，上面写着“Internet Explorer 无法显示网页”（IE）和“此网页不可用”（Chrome） . 我什至没有弹出要求我接受证书的弹出窗口。

在someone.example.com 的代码中，我有一个强制使用https 的声明，但是当我删除它时，页面加载正常为[http://someone.example.com](http://someone.example.com)（但显然不安全）。但是，相同的代码正在实时服务器上运行，并且我在使用已购买的通配符 ssl 证书访问实时站点上的 example.com 和 someone.example.com 时没有任何问题。

我一直在四处寻找，发现通过删除证书并创建一个新证书解决了类似的问题，所以我这样做了，但无济于事。我也尝试过几次从 IE 的缓存中删除证书并手动重新安装它，但这也没有改变任何东西。我已经在 1 台 Windows 7 PC、1 台 Windows Vista PC 和 1 台 Mac 上测试了这个问题；所有人都给出了相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:10:02.097

我以前遇到过同样的问题，我能够解决我的问题的方法是：

1.  从我的浏览器中删除了所有 cookie 和缓存
2.  从我的服务器中删除了自签名证书
3.  与apache一起重新启动服务器本身
4.  安装了新的自签名证书
5.  安装后再次重新启动apache
6.  浏览网站并接受证书

卸载我的第一次证书尝试后似乎没有重新启动，证书中似乎存在错误。不知道为什么或如何，但它对我有用。

# c++ - const 重载而不必编写两次函数

> ID：11655852
> 
> 赞同：7
> 
> 时间：2012-07-25T18:04:26.617
> 
> 标签：c++, constants, overloading

> **可能的重复：**
> [复制、const 和 non-const、getter 的优雅解决方案？](https://stackoverflow.com/questions/856542/elegant-solution-to-duplicate-const-and-non-const-getters)

假设我有一个 c++ 类，其成员函数为 const 重载，如下所示：

```
 Type*  DoSomething();
const   Type*  DoSomething() const; 
```

如果这是一个更大、更复杂的成员，如何防止必须编写两次相同的代码？不能从 const 调用任何非常量函数。并且从非常量调用 const 版本会导致 const 指针必须强制转换为非常量（这有点 imo 的味道）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T18:08:39.873

您可以委托给模板静态成员函数，如下所示：

```
class Widget
{
    Type member;

    template<typename Result, typename T>
    static Result DoSomethingImpl(T This)
    {
        // all the complexity sits here, calculating offsets into an array, etc
        return &This->member;
    }

public:
            Type*  DoSomething() { return DoSomethingImpl<Type*>(this); }
    const   Type*  DoSomething() const { return DoSomethingImpl<const Type*>(this); }
}; 
```

在 C++11 中，您甚至可以摆脱非推断模板参数，使用：

```
static auto DoSomethingImpl(T This) -> decltype(This->member) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:13:08.250

你做了一次，第二次用类上的 const 属性做，你可以使用`const_cast`：

```
class Foo
{
          Type*  DoSomething()
  {
    // Lots of stuff
  }
  const   Type*  DoSomething() const
  {
    return const_cast<Foo*>(this)->DoSomething();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:14:29.147

使用[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)模式从中提取公共代码。例如。

```
inline const T* prev(size_t i) const
{
    return &FBuffer[ AdjustIndex(i) ];
}

inline T* prev(size_t i)
{
    return &FBuffer[ AdjustIndex(i) ];
}

inline size_t AdjustIndex( size_t i ) const
{
    return Math::ModInt( static_cast<int>( FHead ) - 1 - i, static_cast<int>( FBuffer.size() ) );
} 
```

这种技术可以应用于许多情况（但不是所有情况，即如果行为显着不同）。

# ruby-on-rails - 从 Rails 中删除 twitter 引导程序（通过 twitter-bootstrap-rails 添加）

> ID：11655858
> 
> 赞同：1
> 
> 时间：2012-07-25T18:05:02.097
> 
> 标签：ruby-on-rails, gem, twitter-bootstrap

如何从我的 rails 应用程序中删除 twitter-bootstrap-rails gem 以及所有资产和配置？

我安装了它

```
bundle install
#and
rails g bootstrap:install 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:13:24.067

你能不能这样做：

```
rails destroy bootstrap:install 
```

并将其从您的 Gemfile 中删除？

# visual-c++ - 如何在 MFC C++ 中实例化相同的对话框？

> ID：11655863
> 
> 赞同：0
> 
> 时间：2012-07-25T18:05:25.400
> 
> 标签：visual-c++, mfc, dialog, tabcontrol

我想构建一个 MFC 对话框，在其中添加一个简单的`TabControl`. 我希望我的标签页是相同的实例`CDialog`，但具有一些不同的参数（例如显示哪些按钮）。

我正在使用 Visual Studio 2008。

我对 C++ 比较陌生，但我已经看到每个组件（CButton、CDialog）都有自己的 ID（这是静态的，所以我理论上不能两次实例化同一个组件）。

我想知道如何做这样的事情：

```
for (index = 0 to tabNumber) {
  name = "TAB"+index;
  tabCtrl.add(new CustomDialog(name, i));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:28:11.850

您必须在创建项目时提供不同的 TabID。

```
OnInitDialog() 
```

{
m_cTab.Init();

```
m_cTab.InsertItem(0,"Register new user");//tabID=0
m_cTab.InsertItem(1,"Identify");// TabID=1 
```

//注册新用户 m_cTab.CreateButton("加载图片",23,TabID=0, 0, m_cTab.RightOf(22)+15, m_cTab.TopOf(19),60); //识别 m_cTab.CreateButton("注册用户",24,TabID=1,P_LEFT,0, m_cTab.TopOf(20) ,60);

```
} 
```

# javascript - 为什么使用“javascript：" bad?

> ID：11655866
> 
> 赞同：9
> 
> 时间：2012-07-25T18:05:28.097
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T18:20:29.390

[Oh the wonderful confusing world of JavaScript. The code you posted probably doesn't do what most programmers think it's doing.]

There is a difference between each of the following lines:

```
<a onclick="alert('Hello World!')"...>example</a> //V1
<a href="javascript: alert('Hello World!')"...>example</a> //V2
<a onclick="javascript: alert('Hello World')"...>example</a> //V3 
```

although they all will alert `Hello World!`.

The first (V1) has an inline `click` event bound via the `[onclick]` attribute. It may also contain an `[href]` attribute that navigates to another location after the `[onclick]` attribute has executed, or any number of other `click` events bound in the code, assuming the default behavior hasn't been prevented.

The second (V2) has an executable `javascript:` url set as the `[href]` attribute. It might also contain an `[onclick]` attribute or other `click` events bound in external scripts.

The first and second examples (V1 & V2) have identical code executed, which is:

```
alert('Hello World!') 
```

The third example (V3) has an inline `click` event bound via the `[onclick]` attribute, just like V1, *however* the code being executed is different. The executed code is:

```
javascript: alert('Hello World') 
```

Although it looks like a `javascript:` url, it's actually just using a label in javascript.

Labels in JavaScript are useful for skipping out of nested loops, as in the following example code:

```
label: for (i = 0; i < 5; i++) { //labeled line
    for (j = 0; j < 5; j++) {
        console.log(i, j);
        if (i === 2 && j === 3) {
            break label; //this jumps out of both for loops
        }
    }
} 
```

In most inline JavaScript, it's misused because the author doesn't understand the difference between the three formats.

* * *

> Why is using `javascript: <code>` bad?

That's a leading question. It assumes that using `javascript: <code>` *is* bad.

`javascript: <code>` ***isn't bad***. It's a tool. Tools aren't inherently good or bad, only the people using the tools are. You wouldn't call a hammer "bad", even if someone used it as a weapon.

`javascript: <code>` has some nice uses. You shouldn't use it for most cases because it's the [wrong tool for the job](http://en.wikipedia.org/wiki/Law_of_the_instrument), however if you're writing a bookmarklet, you'd be *required* to use the `javascript: <code>` format.

Additionally, there are a few niche contexts where it could make sense to leave javascript inline. An example of this would be to add a simple `print` button to the page:

```
<a href="#" onclick="window.print(); return false">Print</a> 
```

Although even this example could be easily replaced by a class and externalizing the javascript:

```
<a href="#" class="print">Print</a>
<script>
     //jQuery used for brevity
     $(document).on('click', '.print', function () {
         window.print();
         return false;
     });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:15:12.723

There's no real problem with using the `javascript:` labels. It's just considered bad style most of the time.

*   an `onclick`-handler already is JavaScript, so repeating that is just senseless, redundant information (in fact, it's chaging the code thats executed by adding a label named `javascript` - but in most cases this shouldn't have any effect).
*   JavaScript code in a `href` attribute would be placed more appropriately in an `onclick` handler, so you can use the `href` to provide a link for users that have JavaScript disabled. This is called [Progressive Enhancement](https://stackoverflow.com/q/2486/288773).

For more detailed information, you may want to take a look at this great blog-post about "The useless javascript: pseudo-protocol"

# javascript - 在 Alfresco 脚本中重命名文件

> ID：11655867
> 
> 赞同：2
> 
> 时间：2012-07-25T18:05:29.693
> 
> 标签：javascript, alfresco

我正在努力在 Alfresco 中编写一个脚本来重命名文件扩展名。

该文件另存为`filename.bin`. 我正在使用内容规则来说明文件名何时等于`*bin`重命名为`*pdf`.

我在脚本上有点挣扎，希望能提供任何帮助。

我的脚本如下：

```
// change the name of this document
document.properties.name = document.properties.name+".pdf";
// add a new property string
document.properties["cm:locale"] = mylocalenode;
// save the property modifications
document.save(); 
```

但似乎没有让我到任何地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T22:52:33.363

编写的脚本将采用名为“filename.bin”的文档并将其重命名为“filename.bin.pdf”。然后它将设置一个名为“cm:locale”的属性等于 mylocalenode 的值，该值在此代码段中似​​乎未定义。我不知道您要使用 cm:locale 做什么，所以我将忽略它并为您提供一个脚本，该脚本将搜索名为 filename.bin 的文档并更改其名称。

如果您更愿意遍历文件夹中的子项，您应该能够查看 Alfresco JavaScript API 以了解如何修改下面的代码片段来做到这一点。

```
var results = search.luceneSearch("@cm\\:name:filename.bin");
var doc = results[0]; // assumes there is only one result, which may not be what you want
var oldName = doc.properties.name;
var newName = oldName.replace('.bin', '.pdf');
doc.properties.name = newName;
doc.save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T18:56:56.260

在此添加更多，当您使用时`content-rule`。无需使用 lucene/solr 服务搜索文档。我们可以直接访问文档对象，它是指正在执行您的规则的文档。

所以代码将如下所示。

```
var oldName = document.properties.name;
var newName = oldName.replace('.bin', '.pdf');
document.properties.name = newName;
document.save(); 
```

# java - JPA 2 CriteriaQuery，使用限制

> ID：11655870
> 
> 赞同：75
> 
> 时间：2012-07-25T18:05:40.110
> 
> 标签：java, sql, jpa, persistence, limit

我正在使用 JPA 2。出于安全原因，我使用 CriteriaQuery 的类型安全（因此，我没有在寻找任何类型化查询的解决方案等等）。

我最近遇到了一个需要设置 SQL-LIMIT 的问题。

经过大量搜索，我仍然没有成功找到解决方案。

```
CriteriaQuery<Product> query = getEntityManager().getCriteriaBuilder().createQuery(Product.class);
Root<Product> product = query.from(Product.class);
query.select(product);

return em.createQuery(query).getResultList(); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-07-25T18:10:12.327

在[Query](https://docs.oracle.com/javaee/7/api/javax/persistence/Query.html)上定义[限制](https://docs.oracle.com/javaee/7/api/javax/persistence/Query.html#setMaxResults-int-)和[偏移量](https://docs.oracle.com/javaee/7/api/javax/persistence/Query.html#setFirstResult-int-)：

```
return em.createQuery(query)
         .setFirstResult(offset) // offset
         .setMaxResults(limit) // limit
         .getResultList(); 
```

从文档中：

> TypedQuery setFirstResult(int startPosition)
> 
> 设置要检索的第一个结果的位置。参数： **startPosition** - 第一个结果的位置，从 0 开始编号
> 
> *TypedQuery setMaxResults(int maxResult)*
> 
> 设置要检索的最大结果数。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-06-06T08:52:45.653

为了完整起见，我想回答关于 JPA Criteria API 的最初问题。

**首先**，您可能会根据用例事先说明何时使用 JPQL 以及何时使用 Criteria API。在[ObjectDB 文档](https://www.objectdb.com/java/jpa/query/criteria "JPA 标准 API")网站上有一篇很好的文章，其中指出：

> 使用标准 API 的一个主要优点是可以在编译期间而不是在运行时更早地检测到错误。另一方面，对于许多开发人员而言，基于字符串的 JPQL 查询与 SQL 查询非常相似，更易于使用和理解。

我一般推荐这篇文章，因为它简洁地描述了如何使用 JPA Criteria API。有一篇关于[Query API](https://www.objectdb.com/java/jpa/query/api "JPA 查询 API")的类似文章。

**回到问题**：

A`CriteriaQuery`提供了一组可访问的限制 - 例如 - 通过使用该`where()`方法。正如您可能直观地猜到的那样：您不能通过这种限制将查询限制为特定数量的结果 - 除非您有一个微不足道的情况，例如限制唯一标识符（这将使 Criteria API 的使用过时）。简单解释：限制不是标准，因此该 api 不涵盖。另请参阅旧的但黄金的[Java EE 文档](https://docs.oracle.com/javaee/6/tutorial/doc/gjivm.html#gjivi "限制查询")以获取更多详细信息。

**解决方案**

但是，您当然可以使用 CriteriaQuery 对象作为 JPQL 查询的基础。因此，首先，您按原样创建您的 CriteriaQuery：

```
CriteriaQuery<Product> criteriaQuery = 
    getEntityManager().getCriteriaBuilder().createQuery(Product.class);
Root<Product> product = criteriaQuery.from(Product.class);
criteriaQuery.select(product); 
```

然后对对象使用 JPA`Query`构造函数`CriteriaQuery`：

```
Query limitedCriteriaQuery = getEntityManager().createQuery(criteriaQuery)
     .setMaxResults(resultLimit); // this is the important part     
return limitedCriteriaQuery.getResultList(); 
```

这基本上就是根据文档和提供的文章使用这两种 API 的方式。

# winapi - 如何将 Windows 事件日志事件级别映射到字符串

> ID：11655871
> 
> 赞同：2
> 
> 时间：2012-07-25T18:05:42.843
> 
> 标签：winapi, event-log

Windows 事件日志在 Vista 以下（XP 及以下）和 Vista 及以上不同，请参阅此处[Windows 事件日志](http://msdn.microsoft.com/en-us/library/aa363652.aspx)。在 Vista 及更高版本中，在事件查看器上，我们可以看到一个名为 Level 的列。如果我们过滤事件，它将向我们显示所有可能的级别：

```
Critical
Warning
Verbose
Error
Information 
```

根据我的测试，信息的价值为 4。但是，如果我们查看[Level 的模式](http://msdn.microsoft.com/en-us/library/aa384796%28v=vs.85%29)，实际上它的值范围是不受限制的。所以这是我的两个问题：

*   我怎么知道上面每个字符串的值是多少？MSDN 上是否有此页面？我找不到
*   等级有没有限制？还是取决于事件提供者本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:20:18.697

我希望这个[链接](http://msdn.microsoft.com/en-us/library/dd996917%28v=vs.85%29)对你有帮助。

从上面的链接可以看出，自定义级别值必须在 16 到 255 的范围内，这意味着窗口级别位于 0 到 15 的范围内。

# jquery - 通过 Ajax 加载 Facebook Like 按钮

> ID：11655878
> 
> 赞同：1
> 
> 时间：2012-07-25T18:06:01.873
> 
> 标签：jquery, html, ajax, facebook-like

我必须通过 Ajax 加载一些类似的按钮。我正在使用 Jquery，我得到了正确的 html 文本作为响应。当我做 ：

```
$.ajax({
url: "/app/ajax/load.php",
    type: "POST",
    data: "accessToken="+accessToken,
    dataType: "html",
    beforeSend: function () {            
    },
    success: function (data, textStatus, xhr) {
        $('div#result').html(data);

    }        
}); 
```

类似按钮不会出现。有办法解决吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:14:13.893

试试这个

```
success: function (data, textStatus, xhr) {
    $('div#result').html(data);
    try{
        FB.XFBML.parse(); 
    }catch(ex){}
} 
```

ajax 调用后，您必须再次初始化 facebook like 按钮。

# tsql - 如何评估条件？

> ID：11655883
> 
> 赞同：0
> 
> 时间：2012-07-25T18:06:19.363
> 
> 标签：tsql, sql-server-2008-r2

其中一行的数据为 30 > 50 或 170 > 40 等

如何评估此 varchar 列数据以找出它代表的是真还是假。SQL Server 2008 R2 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:11:35.183

如果您**必须**以这种（痛苦的）形式保存数据，那么您最好的选择可能是将字符串解析为单独的部分。类似于以下步骤：

1.  将字符串解析为operand1、operator、operand2
2.  将操作数 1 和操作数 2 转换为 int
3.  可能会进入一些痛苦的案例陈述以根据您解析的内容应用正确的运算符

我个人建议在插入数据库之前找到一种计算方法。你现在存储的东西和你需要的东西相距甚远。

# javascript - 尝试重新启用提交按钮时出现异常的 javascript 行为

> ID：11655894
> 
> 赞同：0
> 
> 时间：2012-07-25T18:07:17.447
> 
> 标签：javascript, jquery, form-submit

我正在编写一个小脚本来执行正则表达式验证。如果正则表达式不匹配，我禁用提交/“下一步”按钮。它工作正常，但如果在给定的文本字段中没有输入任何内容，我想启用提交/“下一步”按钮。我有一个看起来像这样的函数：

```
function functionname( code, tograb ){
    $.ajax({
            url : "{% url survey.views.ajax %}",
            data: {
            'r_code': code,
            'qid': '{{ question.id }}',
            'other_text': tograb.value,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
      }, success: function(html){          
        if (html != "OK") {
          $('#Next').attr('disabled', true);
          $(#'span' + String(code)).html(html);
        } else {
          $('#Next').removeAttr('disabled');
           $(#'span' + String(code)).html("");
        }
      }
     });

    if (tograb.value.length == 0) {
          console.log("removing attribute");
          console.log(tograb.value.length);
          $('#Next').removeAttr('disabled');
    }
}; 
```

对应的 HTML 如下所示：

```
 <input type="text" name="1" value = ""
  id = "other_text1"
  onkeyup="functionname('1', this)"
  /> 
```

这似乎适用于字符串长度超过 1 的所有内容，但如果我删除文本字段中的所有内容，它就不起作用。实际上，它似乎工作了半秒钟，因为它重新启用了提交按钮，但随后又禁用了该按钮。

查看 Firefox 的调试控制台，我看到以下内容：

```
[14:02:26.757] GET http://myurl/survey/ajax?r_code=1&qid=9&other_text=d&   
csrfmiddlewaretoken=m9s5BxbOeqDEheQyQmTIGzCrMbX56e8y [HTTP/1.1 200 OK 16ms]
[14:02:28.826] removing attribute @ http://myurl/survey/6:27
[14:02:28.829] 0 @ http://myurl/survey/6:28
[14:02:28.833] GET http://myurl/survey/ajax?r_code=1&qid=9&other_text=& 
csrfmiddlewaretoken=m9s5BxbOeqDEheQyQmTIGzCrMbX56e8y [HTTP/1.1 200 OK 13ms] 
```

因此，似乎正在进行两个 AJAX 调用，尽管我不确定为什么。有人可以向我解释这种行为或显示我哪里出错了吗？任何反馈将不胜感激！

# jquery - ruby on rails 下拉 onchange 提交

> ID：11655895
> 
> 赞同：0
> 
> 时间：2012-07-25T18:07:19.077
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

我的视图中有以下代码，位于名为 make_deployment_group.html.erb 的“\app\views\deployment_group”中

```
<%= form_for :folder_name, :remote => true, :method => "get", :url => {:action => "show_workflow_list"} do |f| %>
            <%= f.select :foldernames, options_for_select(@folders, @folders.first)%><br /><br />

            <%= hidden_field_tag 'selected_domain', params[:domain_selected] %>
            <%= hidden_field_tag 'user_name', params[:username] %>
            <pre><%= f.submit "Submit"%></pre>
            <% end%>and my `js.erb` file for the action 
```

show_workflow_list.js.erb：位于“\app\views\deployment_group”，为 show_workflow_list.js.erb

```
$('#workflow_selection').html("<%=j render "show_workflow_list" %>"); 
```

我的 application.html.erb 文件：

```
<!DOCTYPE html>
<html>
<head>
  <title>Authorize</title>
  <%= stylesheet_link_tag    "application" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

现在我想删除提交按钮，并在下拉列表中有更改时在我的视图上呈现标签中的`show_workflow_list`部分内容。`<div>`的文件夹。

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:11:58.217

您必须在 JQuery 中执行此操作。在 js 文件中，当文档准备好时，您的 app/assets/application.js 中必须有类似的内容：

```
$('#foldernames').change(function() {
  $('#folder_name').submit()
}); 
```

或者这个，如果你使用 coffeescript ：

```
$('#foldernames').change = () ->
  $('#folder_name').submit() 
```

它会起作用。这是无阻碍的javascript！当您更改选择时，它将提交表单，在 ajax 函数中调用控制器中的操作并执行 js.erb 文件中的内容。

# c# - MVC C# - 当我使用复选框时，值'checked'无效

> ID：11655899
> 
> 赞同：1
> 
> 时间：2012-07-25T18:07:21.700
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个名为 W2_Sent 的字段，它被定义为 (bit,null)

在我看来，我有以下将其显示为复选框：

```
 <div class="editor-label"  style="width: 10em">                        
       @Html.Label("W2 Sent")
     </div>
     <div class="editor-field">
       @Html.EditorFor(model => model.W2_Sent)
       @Html.ValidationMessageFor(model => model.W2_Sent)
     </div> 
```

如果我检查它，我会收到错误

值 'checked' 对 W2_Sent 无效

```
 [HttpPost]
      public ActionResult Create(Employee emp)
      {

        foreach (ModelState modelState in ViewData.ModelState.Values)
        {
            foreach (ModelError error in modelState.Errors)
            {

                string s = "error";

            }

        } 
```

我能够在上面看到的 foreach 循环中捕获错误..

为什么我得到“检查”的价值是无效的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T03:15:13.393

要在表单中显示复选框，您应该始终使用`@Html.CheckBox/CheckBoxFor`而不是`<input type="checkbox" name="gender" />`. 当您使用`@Html.CheckBox/CheckBoxFor`ASP.NET MVC 生成一个隐藏字段，该字段具有一个布尔值，这就是将绑定到您的模型属性的内容。

当您直接使用 html 部分时，浏览器会将字段的值发布为字符串“已检查”（如果是），并且在引发错误的模型绑定中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T13:04:04.320

我已经这样做了。为 CheckBoxFor 编写您自己的 ExtensionMethod。诀窍是复选框中“value”=“true”的静态值和隐藏字段中的“value”“false”。如前所述，不会发回值为 false 的复选框。在这种情况下，将采用隐藏字段的值。当用户选中该复选框时，新的“true”值将覆盖隐藏字段中的“false”。

```
 public static MvcHtmlString CheckboxForMetro<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, int offset = 3)
    {
        TagBuilder tblabel = new TagBuilder("label");
        tblabel.AddCssClass("checkbox offset" + offset.ToString());

        TagBuilder tbinput = new TagBuilder("input");
        tbinput.Attributes.Add("type", "checkbox");
        tbinput.Attributes.Add("id", GetPropertyNameFromLambdaExpression(html, expression));
        tbinput.Attributes.Add("name", GetPropertyNameFromLambdaExpression(html, expression));
        tbinput.Attributes.Add("value", "true");
        tbinput.MergeAttributes(GetPropertyValidationAttributes(html, expression, null));
        if (GetPropertyValueFromLambdaExpression(html, expression) == "True") tbinput.Attributes.Add("checked", "checked");

        TagBuilder tbhidden = new TagBuilder("input");
        tbhidden.Attributes.Add("type", "hidden");
        tbhidden.Attributes.Add("value", "false");
        tbhidden.Attributes.Add("name", GetPropertyNameFromLambdaExpression(html, expression));

        TagBuilder tbspan = new TagBuilder("span");
        //tbspan.AddCssClass("span" + spanLabel.ToString());
        tbspan.InnerHtml = GetPropertyDisplayNameFromLambdaExpression(html, expression);
        tblabel.InnerHtml = tbinput.ToString() + tbspan.ToString() + tbhidden.ToString();

        return new MvcHtmlString(tblabel.ToString());
    } 
```

它是 Metro UI CSS 的 ExtensionMethod，位于[http://metroui.org.ua](http://metroui.org.ua)

这是获取值、显示名称、属性名称和验证属性的代码

```
 private static string GetPropertyDisplayNameFromLambdaExpression<TModel, TValue>(HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        string htmlFieldName = ExpressionHelper.GetExpressionText(expression);

        return metadata.DisplayName ?? metadata.PropertyName ?? htmlFieldName.Split('.').Last() ?? "Geen tekst";
    }

    private static string GetPropertyValueFromLambdaExpression<TModel, TValue>(HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        string value = string.Empty;
        TModel model = html.ViewData.Model;
        if (model != null)
        {
            var expr = expression.Compile().Invoke(model);
            if (expr != null)
            {
                value = expr.ToString();
            }
        }
        return value;
    }

    private static string GetPropertyNameFromLambdaExpression<TModel, TValue>(HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        return metadata.PropertyName;
    }

    private static IDictionary<string, object> GetPropertyValidationAttributes<TModel, TValue>(HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, IDictionary<string, object> htmlAttributes)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        IDictionary<string, object> validationAttributes = html.GetUnobtrusiveValidationAttributes(ExpressionHelper.GetExpressionText(expression), metadata);
        if (htmlAttributes == null)
        {
            htmlAttributes = validationAttributes;
        }
        else
        {
            htmlAttributes = htmlAttributes.Concat(validationAttributes).ToDictionary(k => k.Key, v => v.Value);
        }
        return htmlAttributes;
    } 
```

我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-18T16:01:05.597

就我而言，我使用了一些不允许我使用 HTMLhelper 的样式库。因此，如果它对任何人有用，一个简单的解决方案是在提交表单时使用 jQuery，只需将检查值分配给输入，如下所示。

```
$("#myForm").submit(function (e) {
    $("#myCheckBoxInput").val($("#myCheckBoxInput").prop("checked"))
})
```

# javascript - 扩展对象导致 jQuery 错误

> ID：11655907
> 
> 赞同：0
> 
> 时间：2012-07-25T18:07:38.830
> 
> 标签：javascript, jquery, function, prototype

所以我写了一个函数来扩展对象来计算其中有多少条目，所以它可以这样使用：

```
test = {"foo": "bar", "baz": 7, "darth": "maul"}

test.count()
=> 3 
```

我这样写代码：

```
Object.prototype.count = function() {
  var count = 0, key;
  for (key in this) {
    if (this.hasOwnProperty(key)) {
      count++;
    }
  }
  return count;
} 
```

这是我第一次尝试使用原型进行扩展，我从 jQuery.js 中得到了这个错误：

```
Uncaught TypeError: Object function () {
  var count = 0, key;
  for (key in this) {
    if (this.hasOwnProperty(key)) {
      count++;
    }
  }
  return count; 
} has no method 'replace' 
```

stacktrace 指向我`css`在 jQuery 对象 onLoad 上调用的位置：

```
$img.css({left: 20, top: 50}); 
```

并不是说我认为那条线有什么特别之处，但我认为提供它可能会很好。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:09:58.553

关于为什么扩展本机类型的原型可能是个坏主意的一课。:)

在某处`jQuery`，它正在测试一个通用对象是否存在名为 的属性`count`，然后将其视为字符串。由于您现在已经使该属性始终存在，因此它找到了它，但它不是字符串（如预期的那样）并破坏了代码。

# automation - Sikuli 怎么能被用来长时间等待一个按钮，中间可能还有一些维护任务？

> ID：11655910
> 
> 赞同：3
> 
> 时间：2012-07-25T18:07:48.567
> 
> 标签：automation, wait, sikuli

我有一个网页，我正在等待一个按钮出现，当它出现时我想点击它。该按钮位于计时器上，可能需要一个小时才能出现。另外，如果按钮出现的时间超过一定长度，我想移动鼠标（否则网站会自动注销我）。

所以，为了等待按钮出现，我设计了这个 Sikuli 脚本：

```
button = "button.png"

while(1):
    if exists(button):
        print("found it")
        click(button)
        break
    else:
        print("wait longer")
        wait(button,30*60)
        # do a regular task

print "all done!" 
```

以上似乎没有功能。如果按钮在屏幕上，脚本会找到它......但是，如果它必须等待它会很快超时并出现 FindFailed 异常（`click()`即使屏幕上不存在按钮）。我考虑过编写一个处理程序，但似乎有点矫枉过正。

我做错了什么，等待这样的视觉事件很长一段时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T18:33:36.640

给你一些其他的想法...

```
 while(1):
 wait(Button, 30*60) # This will spinlock for 30 minutes for the button to appear
 if exists(Button):
     hover(Button) # Debug statement allowing user to see what Sikuli has matched to
     click (Button)
 else:
     mouseMove(Location(50,100))
     mouseMove(Location(50,200)) 
```

链接：

*   [等待](http://doc.sikuli.org/region.html#Region.wait)
*   [鼠标移动链接](http://doc.sikuli.org/region.html#Region.mouseMove)
*   [地点](http://doc.sikuli.org/location.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T11:19:59.077

也许Sikuli 认出了一个看起来很像你的按钮的东西，并试图点击它。如果您在 IDE 中右键单击您的按钮模式，您可以微调识别的容差级别。尝试在按钮周围精确剪切图像并增加值以更精确。

我建议您阅读本教程
[http://doc.sikuli.org/tutorials/surveillance/surveillance.html](http://doc.sikuli.org/tutorials/surveillance/surveillance.html)
并设置一个事件处理程序以在您的按钮出现时管理您的按钮
[http://doc.sikuli.org/region。 html#Region.onAppear](http://doc.sikuli.org/region.html#Region.onAppear)
[http://doc.sikuli.org/region.html#observingvisualeventsinaregion](http://doc.sikuli.org/region.html#observingvisualeventsinaregion)
写的代码不多。

[您可以在此处http://sikuli.org/blog/2011/08/15/sikuli-plays-angry-birds-on-google-games/](http://sikuli.org/blog/2011/08/15/sikuli-plays-angry-birds-on-google-games/)在 Sikuli 的博客中获得一个带有完整源代码的好示例

我认为你可以设置你的处理程序并使用

> 观察（永远）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-04T19:19:08.573

如果您希望 sikuli 在等待图像时做一些事情，我会使用 onAppear(pic, function) 和 observe(FOREVER, true) 方法，这就是它的工作原理

```
event = Sikuli.event

def function(event):
    click(yourButton.png)

onAppear(picYourWaitingFor.png, function)
observe(FOREVER, true) 
```

基本上它的作用是 onAppear 会持续扫描屏幕上的 picYourWaitingFor.png。sikuli 在单词之后继续执行，因此它在工作时正在扫描。在所述图片的外观上，它将跳转到您作为 onAppear 的第二个参数设置的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-01T18:21:42.857

我有与描述相同的问题。这不是永远等待。并且观察也不起作用，因为它确实会永远观看。考虑只想在特定时间段内检查事件，例如 60 秒。如果没有发生，请继续。这可能发生在一系列特定的事件中。如果图像在 60 秒内没有出现，请继续进行另一个系列。

```
wait(image,60) 
```

...如果找不到图像，它将在 60 秒后崩溃，这根本不是我想要的。

所以我做了这样的事情：

```
attempt = 1
count=0
while attempt:
     if exists(image):
         attempt=0
     else:
        count=count+1
        if count>60:
          attempt=0
        else:
           wait(1) 
```

可能是更好的方法并且没有给出确切的时间，但方法不会使脚本崩溃。

您也可以尝试：`except it..`应该更短。

# android - 为 Android 交叉编译 libevent

> ID：11655911
> 
> 赞同：5
> 
> 时间：2012-07-25T18:07:52.743
> 
> 标签：android, cross-compiling, libevent

我一直在尝试将 libevent 交叉编译到 Android，我想知道我做错了什么并获得一些帮助。

我正在尝试构建的版本是 libevent-2.0.19-stable

我开始按照[http://warpedtimes.wordpress.com/2010/02/03/building-open-source-libraries-with-android-ndk/](http://warpedtimes.wordpress.com/2010/02/03/building-open-source-libraries-with-android-ndk/)中描述的步骤以及[如何将 Makefile 重写为 android.mk？](https://stackoverflow.com/questions/10040693/how-to-rewrite-the-makefile-into-android-mk)

目标设备是运行 cyanogenMod 7 的三星 Galaxy S2

经过几次尝试，我做的最好的就是运行以下步骤：

```
1) Install android NDK and download libevent source code

2) Android NDK downloaded and running in ~/android-ndk/android-ndk-r8b 
```

3) 执行：

```
export ANDROID_ROOT=~/android-ndk/android-ndk-r8b

export    PATH=$PATH:$ANDROID_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/ 
```

您需要为您的设备导出 ABI。armeabi-v7a 适用于 ARMv7 或更高版本的设备，任何其他设备都使用 armeabi。

4）使用适当的参数执行./configure：

```
./configure \
--host=arm-linux-androideabi \
CC=arm-linux-androideabi-gcc \
LD=arm-linux-androideabi-ld \
CPPFLAGS="-I$ANDROID_ROOT/platforms/android-8/arch-arm/usr/include/" \
CFLAGS="-nostdlib" \
LDFLAGS="-Wl,-rpath-link=$ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/ -L$ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/" \
LIBS="-lc" 
```

期间有一个警告：

```
configure: WARNING: if you wanted to set the --build type, don't use --host.
If a cross compiler is detected then cross compile mode will be used 
```

（我认为没问题）

由于它没有将 arm-linux-androideabi 识别为主机，我从[http://git.savannah.gnu.org/gitweb/?p=config.git;a=获得了一个新的 config.guess 和 config.sub树](http://git.savannah.gnu.org/gitweb/?p=config.git;a=tree)（在堆栈溢出中的上一个线程中表示）

此时，在构建运行“make”的源代码时，仍然崩溃：

```
/home/narseo/android-ndk/android-ndk-r8b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: crtbegin_so.o: No such file: No such file or directory
collect2: ld returned 1 exit status
make[2]: *** [libevent.la] Error 1
make[2]: se sale del directorio «/home/narseo/libevent-source/libevent-2.0.19-stable»
make[1]: *** [all-recursive] Error 1
make[1]: se sale del directorio «/home/narseo/libevent-source/libevent-2.0.19-stable»
make: *** [all] Error 2 
```

但是，该文件似乎在那里：

```
~/android-ndk$ ls $ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib
crtbegin_dynamic.o  libc.a           libjnigraphics.so  libstdc++.so
crtbegin_so.o       libc.so          liblog.so          libthread_db.so
crtbegin_static.o   libdl.so         libm.a             libz.so
crtend_android.o    libGLESv1_CM.so  libm.so
crtend_so.o         libGLESv2.so     libstdc++.a 
```

运行 ./configure 时我做错了什么吗？即使查看 Android 的 NDK 文档，我也不明白的其他内容是是否必须创建 Android.mk 或者 Makefile 是否足够

任何帮助都将非常受欢迎！

干杯

ñ

# *笔记*

这就是我最终设法解决的方法：

初始路径：

```
export ANDROID_ROOT=~/android-ndk/android-ndk-r8b
export PATH=$PATH:$ANDROID_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/
export PATH=$PATH:$ANDROID_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/include/ 
```

错误似乎发生在链接阶段，因此找不到 crtend_so.o 和 crtbegin_so.o。在[android toolchain (custom build) 缺少 crtbegin_so.o](https://stackoverflow.com/questions/6881164/crtbegin-so-o-missing-for-android-toolchain-custom-build)之后，我们在源文件夹中添加一个符号链接到它们

```
cd source && ln -s $ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/crtbegin_so.o 
ln -s $ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/crtend_so.o 
```

./configure 命令：

```
./configure \
--host=arm-linux-androideabi \
CC=arm-linux-androideabi-gcc \
LD=arm-linux-androideabi-ld \
CPPFLAGS="-I$ANDROID_ROOT/platforms/android-8/arch-arm/usr/include/" \
CFLAGS="-nostdlib" \
LDFLAGS="-Wl,-rpath-link=$ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/ -L$ANDROID_ROOT/platforms/android-8/arch-arm/usr/lib/" \
LIBS="-lc" 
```

如果由于无法识别系统 androideabi 而失败，请尝试获取更新版本的 config.sub 和 config.guess

它曾经在链接阶段崩溃。在 CFLAGS 上包含 -lgcc 解决了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T17:04:01.873

该项目在此处将 libevent 构建为 Android 上的静态库：[https ://github.com/ventureresearch/libevent](https://github.com/ventureresearch/libevent)

它包括 Android.mk 和生成的配置文件以干净地构建它。

请注意，我们正在构建它以包含在 Android 设备映像中，而不是通过 NDK 构建。它可能仍然是一个很好的起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T11:54:08.397

尝试以下配置：

```
ANDROID_SYSROOT=$ANDROID_ROOT/platforms/android-8/arch-arm/

./configure --host=arm-linux-androideabi CFLAGS=--sysroot=$ANDROID_SYSROOT LDFLAGS=--sysroot=$ANDROID_SYSROOT 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T19:37:50.347

试试这个

```
./configure --host=arm-linux-androideabi CC="$NDK/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --sysroot=$SYSROOT" CFLAGS='-march=armv7-a -mfloat-abi=softfp -mfpu=vfpv3-d16' 
```

这个对我有用。

# c# - 实体框架不读取 FK 关系，LINQ To SQL 可以

> ID：11655912
> 
> 赞同：1
> 
> 时间：2012-07-25T18:07:52.870
> 
> 标签：c#, .net, visual-studio-2010, entity-framework

我正在尝试从数据库创建实体模型。当我添加表时，EF 不会读取我现有的 FK 约束。如果我在同一个项目中创建一个 Linq to SQL 文件并添加相同的表，它会毫无问题地读取约束。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:23:56.713

最近我遇到了同样的问题 - 我不知道为什么，但不知何故实体框架与一些非聚集索引发生冲突。

*类似情况：*

> [http://blog.degree.no/2012/09/missing-relations-in-entityframework-model-when-generating-from-database/](http://blog.degree.no/2012/09/missing-relations-in-entityframework-model-when-generating-from-database/)

您可以尝试删除索引，重新生成模型，再次添加索引并更新重新生成的模型 - 它对我有用。

# iphone - 归档时未找到 SDWebImage/UIImageView+WebCache.h 文件

> ID：11655914
> 
> 赞同：1
> 
> 时间：2012-07-25T18:07:55.193
> 
> 标签：iphone, ios, ios5, build, archive

> **可能重复：**
> [sdwebimage：UIImageView+WebCache.h：没有这样的文件或目录](https://stackoverflow.com/questions/9042569/sdwebimage-uiimageviewwebcache-h-no-such-file-or-directory)

刚开始。这是一个重复的问题：[归档时出现词汇或预处理器问题文件？](https://stackoverflow.com/questions/10925539/lexical-or-preprocessor-issue-file-not-found-occurs-while-archiving)

问题是他的解决方案对我不起作用。我已经阅读了两次安装文档，如果我将它设置为模拟器 5.1，它就可以工作。

现在我想将其存档以发送以供审核。

如果我选择（应用程序名称-> iPhone 5.1 模拟器）它可以工作。我可以构建它，我可以测试它。

如果我选择（应用程序名称 - > iOS 设备）它会停止工作，并且我会收到与另一篇文章中相同的错误。

我已经尝试了我能想到的一切，但没有任何结果。

它被称为iOS设备是否正常？必须为我选择它才能按存档。

我已按照 Apples 指南发布我的应用程序。所以我添加了额外的发布设置（应用商店发布设置），设置我的开发人员 ID，创建了一个名为应用程序名称-AppStore 的额外方案，将存档设置为使用应用商店发布设置。但没有任何效果，除非我切换到 iPhone 5.1 模拟器。然后它构建得很好并启动了模拟器。

有任何想法吗？我出去了。已经通过了我在网上可以找到的所有内容，但它仍然无法正常工作。

也不知道我想用这些信息做什么（来自上面的帖子）：“并确保您的用户标头路径指向框架。”

如何？

# windows - HID 软件设备（模拟）

> ID：11655916
> 
> 赞同：1
> 
> 时间：2012-07-25T18:08:08.880
> 
> 标签：windows, linux, hid

你知道有什么方法可以为 Windows 和/或 Linux 制作软件（虚拟）HID 设备吗？

我想使用一些传感器作为 HID，但它们没有任何 HID，所以我想我可以在 PC 上安装我自己的 HID（模拟的 onde），将一些消息转换为 HID，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:13:43.047

Windows 没有办法。您将不得不[模拟鼠标和键盘事件](http://msdn.microsoft.com/en-us/library/ms171548.aspx)。Linux 有[uinput](http://thiemonge.org/getting-started-with-uinput)，它允许您将输入事件直接注入内核。

# java - Java - gui：添加一扇门

> ID：11655922
> 
> 赞同：1
> 
> 时间：2012-07-25T18:08:36.150
> 
> 标签：java, swing, user-interface

我正在运行一个球碰撞模拟，我想在框架边缘的某处添加一个门，这样当一个球接触它时，它就会消失。可以为我提供这扇门功能的最简单的 Swing 组件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:23:29.013

> 我想知道什么……可以用来以图形方式表示那扇门的图像。

您可能想要一个俯视图，但您可能会从这个[示例](https://sites.google.com/site/drjohnbmatthews/subway)中获得一些想法，即动画门打开和关闭*正面*。

附录：由于您对动画感兴趣，请参阅弹跳球的这些[变化](https://stackoverflow.com/q/9849950/230513)和这个[`KineticModel`](https://sites.google.com/site/drjohnbmatthews/kineticmodel)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:58:58.877

没有提供此功能的 Swing 组件。你必须自己写。如果您直接需要一些额外的内容，请发布有关您现有的球碰撞程序所做的更多信息，包括一些代码片段来说明您到目前为止所做的事情。

# c++ - 使用 C 在 JNI 中获取“冲突类型错误”

> ID：11655928
> 
> 赞同：0
> 
> 时间：2012-07-25T18:09:05.900
> 
> 标签：c++, c, types, java-native-interface

我尝试编译这个：

```
#include <stdio.h>
#include <jni.h>
#include "callJNITest.h"

JNIEXPORT jint JNICALL Java_callJNITest_displayHelloWorld
  (JNIEnv env, jclass jcls) {
    printf("Hello World!");
    return 1;
} 
```

但我总是收到这些错误：../HelloWorldJNI.c:5:24：错误：'Java_callJNITest_displayHelloWorld'的类型冲突../callJNITest.h:15:24：注意：'Java_callJNITest_displayHelloWorld'的先前声明在这里 make：*** [HelloWorldJNI.o] 错误 1

在这种情况下也发生了错误：

```
JNIEXPORT void JNICALL Java_callJNITest_displayHelloWorld
  (JNIEnv env, jclass jcls) {
    printf("Hello World!");
    return;
} 
```

但

```
JNIEXPORT JNICALL Java_callJNITest_displayHelloWorld
  (JNIEnv env, jclass jcls) {
    printf("Hello World!");
    return;
} 
```

工作正常。我的问题是如何在 JNI 中声明返回类型？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:54:43.157

从我的评论中创建答案，因为它解决了 OP 的问题。

头文件包含一个声明，其中第一个参数的类型`Java_callJNITest_displayHelloWorld`是 a `JNIEnv*`，而在 cpp 文件中它的类型是`JNIEnv`。解决方法是将`env`cpp 文件中的类型更改为`JNIEnv*`使其与头文件中的声明相匹配。

# asp.net-mvc - 为什么我的 MVC 下拉列表选择了一个值，尽管属性值为 NULL？

> ID：11655930
> 
> 赞同：0
> 
> 时间：2012-07-25T18:09:11.423
> 
> 标签：asp.net-mvc

我有一个下拉列表，用户可以在其中选择护理提供者。在数据库中，此值`null`在应用程序中，但选择了一个值。我需要做什么才能使该`null`值显示为空白？我认为这是默认行为。我改为在我的视图模型中使用强类型列表而不是 viewbag，这可能在当时已经损坏。

这是视图标记：

```
<div class="editor-label">
    @Html.LabelFor(model => model.PsychologistId, "Psychologist")
</div>
<div class="editor-field">
    @Html.DropDownListFor(x => x.PsychologistId, Model.ListPsychologists)
    @Html.ValidationMessageFor(model => model.PsychologistId)
</div> 
```

这是视图模型的属性：

```
 [DisplayName("Psychologist")]
 public Nullable<int> PsychologistId { get; set; } 
```

这是我的控制器的相关部分：

```
 model.ListPsychologists = new SelectList(XXX, "Id", "DisplayName");

    return this.View(model); 
```

其中 XXX 只是带有过滤和排序标准的 LINQ 表达式。为了清晰和空间，它被省略了。

从控制器传递到视图的模型`PsychologistId`是`null`. 上的`SelectedValue`属性`model.ListPsychologists`是`null`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:12:10.953

如果 PsychologistId 是一个 int，它将为其分配 0 值，因为 int 不是可为空的类型。

如果我上面的假设不正确，请显示您的模型和控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:35:01.337

您的 SelectList 是否包含带有 的条目`Id==null`？我不信。这意味着您将没有与您的值匹配的选择列表条目，因此浏览器将选择第一个可用的条目。

解决方案：将条目显式添加`Id = null`到您的 SelectList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:35:18.680

我以前遇到过这些问题，我解决它的方法是发送我想要在视图模型中填充下拉列表的基本集合，而不是 SelectList。所以：

```
model.ListPsychologists = XXX; 
```

然后在视图中：

```
@Html.DropDownListFor(x => x.PsychologistId, new SelectList(Model.ListPsychologists, "Id", "DisplayName", Model.PsychologistId)) 
```

请验证我在 MSDN 中使用的 SelectList 构造函数重载，我是从内存中输入的。基本上，你给它一个要在 SelectList 中使用的项目集合，然后是文本和值属性的名称（就像你在操作方法代码中所做的那样），第四个参数是要设置下拉列表的值。

编辑：此外，DropDownListFor 有一个重载，可以在菜单中添加默认项。比如，“选择一个”。

# objective-c - XCode 4.3：静态库生成

> ID：11655931
> 
> 赞同：5
> 
> 时间：2012-07-25T18:09:14.913
> 
> 标签：objective-c, ios, c, xcode, static-libraries

我做了一些环顾四周，但我发现的大多数答案已经或感觉不完整，让我有点困惑。我得到了一个 C 库，我需要使用 XCode 4.3 将其编译成静态库，然后在单独的 iOS 应用程序项目中使用，但我不确定如何继续。我不确定目录结构是否重要，但无论如何都在这里：

```
Library -> Section1 -> src -> .c files
                    -> sec1 -> .h files
                    -> sec1.h 
        -> Section2 -> src -> .c files
                    -> sec2 -> .h files
                    -> sec2.h 
```

我一直在尝试从这里开始工作：http: [//blog.stormyprods.com/2008/11/using-static-libraries-with-iphone-sdk.html](http://blog.stormyprods.com/2008/11/using-static-libraries-with-iphone-sdk.html)链接在一个与此类似的问题中，尽管来自2008年它已经过时了，我也无法让它工作。还有这个问题：[Include external C library with Xcode](https://stackoverflow.com/questions/7605805/including-external-c-library-with-xcode)但它没有详细介绍实际生成库的细节，然后才包含在单独的项目中。

如果有人可以提供清晰和最新的答案，我和其他许多人会非常感激，我敢肯定。让我知道是否需要更多信息！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T18:42:23.887

构建静态库：

1.  在 Xcode 中创建一个静态库项目
2.  将所有 .c 和 .h 文件添加到项目中
3.  编译

使用此库的最简单方法是将此静态库项目添加到您的应用程序项目中。这样就不必担心创建胖库（即包含模拟器和设备代码的库）。

要将静态库项目添加到您的应用程序项目中：

1.  选择文件 > 将文件添加到“”...
2.  为您的静态库添加 .xcodeproj
3.  在 Project Navigator 中单击您应用的 .xcodeproj 以显示构建选项
4.  单击应用程序的目标并选择“构建阶段”选项卡。
5.  展开“与二进制文件的链接部分”
6.  点击“+”按钮
7.  展开“工作区”部分（您应该在那里看到您的库、一个 .a 文件）
8.  单击您的图书馆，您应该一切顺利。

为上述令人难以忍受的详细程度道歉，但不知何故，人们似乎总是忘记执行第 4-8 步，然后他们想知道为什么会出现链接错误！

Xcode 将无法找到您的库的标头。您可以像添加任何其他头文件一样将公共头文件添加到项目中，也可以在构建设置中设置“头文件搜索路径”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:46:54.630

尝试通用框架项目，如 github 上所示：[https](https://github.com/kstenerud/iOS-Universal-Framework/) ://github.com/kstenerud/iOS-Universal-Framework/ 。我已经广泛使用了它，并且效果很好。您只需为该库创建一个新的 XCode 项目，放入所有源文件和头文件，它将构建一个静态框架。您可以在其他项目中使用，您也不必担心标题搜索路径。

# ios - 将值从 iOS 本机代码传递给 cordova

> ID：11655936
> 
> 赞同：7
> 
> 时间：2012-07-25T18:09:30.637
> 
> 标签：ios, plugins, cordova

我有一些从我的本机代码生成的值，我想传递给 phonegap。这些数据是实时生成的，不会直接受到用户通过 phonegap gui 操作的影响。我的本机代码是我制作的插件的一部分。

解决这个问题的最佳方法是什么？我想要一个随时发送数据的功能，并在科尔多瓦一侧有一个监听器。我正在使用带有 Xcode 4.3 的 Cordova 1.5。

这是我到目前为止所拥有的：

滑动.js：

```
var swipe={
     callNativeFunction: function (success, fail, resultType) {
    return Cordova.exec( success, fail, 
                        "ca.swipe", 
                        "nativeFunction", 
                        [resultType]); }

}; 
```

索引.html：

```
...

function callNativePlugin( returnSuccess ) {
            swipe.callNativeFunction( nativePluginResultHandler, nativePluginErrorHandler, returnSuccess );
        }

        function nativePluginResultHandler (result) {
            alert("SUCCESS: \r\n"+result );
        }

        function nativePluginErrorHandler (error) {
            alert("ERROR: \r\n"+error );
        } ...  <body onload="onBodyLoad()">     <h1>Hey, it's Cordova!</h1>

      <button onclick="callNativePlugin('success');">Success</button>
      <button onclick="callNativePlugin('error');">Fail</button>

  </body> ... 
```

刷卡.h：

```
...
@interface swipe : CDVPlugin
- (void) nativeFunction:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;
@end 
```

滑动.m：

```
...
- (void) nativeFunction:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {

    NSLog(@"Hello, this is a native function called from PhoneGap/Cordova!");

    //get the callback id
    NSString *callbackId = [arguments pop];
    NSString *resultType = [arguments objectAtIndex:0];     
    NSMutableArray *GlobalArg=arguments;

    CDVPluginResult *result;
    if ( [resultType isEqualToString:@"success"] ) {
       result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString: @"Success :)"];
       //writes back the smiley face to phone gap. 
       [self writeJavascript:[result toSuccessCallbackString:callbackId]];
    }

... 
```

我现在拥有的代码没有做我想做的事。我不太确定如何在科尔多瓦和本机中设置代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:06:35.080

听起来您需要能够从目标 C 与 PhoneGap 对话，在这种情况下，您应该能够使用以下内容：

```
 NSString *jsResult = [theWebView stringByEvaluatingJavaScriptFromString:@"hello()"];
 NSLog(@"jsResult=%@",jsResult); 
```

如果你的 index.html 中有一个像“hello”这样的 JS 函数，如下所示：

```
function hello(){return "hello";} 
```

它是一种与您的 PhoneGap Web 层对话的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-13T12:54:09.347

创建一个**CDVPlugin类型的类**

**在该类中**导入#import****

 **初始化处理程序方法 .h 类

```
- (void)Device:(CDVInvokedUrlCommand *)command; 
```

并在 .m 类中实现该方法

```
- (void)openDevice:(CDVInvokedUrlCommand *)command{
    CDVPluginResult *pluginResult = nil;
    BOOL checkOpenDevice=NO;
     pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsBool:checkOpenDevice];
       [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];
    }
} 
```

通过 self.commandDelegate 以这种方式，如果 .js 文件命中（调用）在 .h 类中初始化的特定方法，您的数据将能够到达 cordova 类。**

# wcf - Azure wcf 服务 Trace.WriteLine 请求在哪里？

> ID：11655938
> 
> 赞同：0
> 
> 时间：2012-07-25T18:09:34.590
> 
> 标签：wcf, azure

我查看了很多不同的 Azure 和 Wcf 服务示例。我已经配置了一个跟踪监听器，并且很多跟踪信息出现在相关的日志文件中；但是，我没有看到 Trace.WriteLine 请求的结果。我确实在 Azure 调试器输出面板中看到了我的 Trace.WriteLine 请求。这些请求的输出保存在哪里？

从我的 Web.config

```
<system.diagnostics>
<sources>
  <source propagateActivity="false" name="System.ServiceModel"
    switchValue="Verbose,ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="AzureLocalStorage">
        <filter type="" />
      </add>
    </listeners>
  </source>
  <source name="System.ServiceModel.MessageLogging" switchValue="Information">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="AzureLocalStorage">
        <filter type="" />
      </add>
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add type="WCFServiceWebRole1.AzureLocalStorageTraceListener, WCFServiceWebRole1"
    name="AzureLocalStorage">
    <filter type="" />
  </add>
</sharedListeners>
<trace autoflush="true" /> 
```

从我的 AzureLocalStorageTraceListener.cs

```
 public class AzureLocalStorageTraceListener : XmlWriterTraceListener
{
    public AzureLocalStorageTraceListener()
        : base(Path.Combine(AzureLocalStorageTraceListener.GetLogDirectory().Path, "WCFServiceWebRole1.svclog"))
    {
    }

    public static DirectoryConfiguration GetLogDirectory()
    {
        DirectoryConfiguration directory = new DirectoryConfiguration();
        directory.Container = "wad-tracefiles";
        directory.DirectoryQuotaInMB = 10;
        directory.Path = RoleEnvironment.GetLocalResource("WCFServiceWebRole1.svclog").RootPath;
        return directory;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:31:51.617

您创建的**AzureLocalStorageTraceListener**仅记录到 *.svclog 文件。如果要将日志输出到模拟器，则应注意以下几点：

1.  将 DevelopmentFabricTraceListener 添加到您的共享侦听器（这也适用于 1.7 SDK）

    ```
    <add type="Microsoft.ServiceHosting.Tools.DevelopmentFabric.Runtime.DevelopmentFabricTraceListener, Microsoft.ServiceHosting.Tools.DevelopmentFabric.Runtime, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="Emulator">
      <filter type="" />
    </add> 
    ```

2.  确保开关值正确（您可以尝试使用值**All**开始）

3.  更改模拟器中的日志记录级别（通过右键单击屏幕右上角的图标）。

![更改日志记录级别](../Images/14d1dbbacd626b80050f5cabac517550.png)

# javascript - 循环遍历具有递增属性名称的对象

> ID：11655940
> 
> 赞同：0
> 
> 时间：2012-07-25T18:09:35.807
> 
> 标签：javascript

我正在尝试像遍历数组一样遍历对象。我正在努力将循环计数器附加到变量名。

我有一个像这样的对象（[输出`dump()`，我在这里找到](https://stackoverflow.com/questions/603987/what-is-the-javascript-equivalent-of-var-dump-or-print-r-in-php?lq=1)）：

```
object(2): {
  elem0:  array(4): {
    [0]:  string(27): "http://placehold.it/300x300"
    [1]:  string(3): "0.8"
    [2]:  string(4): "-150"
    [3]:  string(3): "200"
  }
  elem1:  array(4): {
    [0]:  string(27): "http://placehold.it/300x300"
    [1]:  string(3): "0.6"
    [2]:  string(3): "-70"
    [3]:  string(3): "458"
  }
} 
```

这是我尝试循环的方式：

```
jQuery(document).ready(function($) {

    // Provides object-measuring functionality
    Object.size = function(obj) {
        var size = 0, key;
        for (key in obj) {
            if (obj.hasOwnProperty(key)) size++;
        }
        return size;
    };

    // Returns the number of objects in my object
    var size = Object.size(window.depthElems);

    /*
    This is where I'm having difficulty.
    I would like to use window.depthElems.elem0,
    then window.depthElems.elem1, etc.
    */

    for (var i = 0; i < size; i++) {
        $('.wrapper').append('<img src="' + window.depthElems.elem+i+[0] + '" />'); 
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:14:51.097

为了争论，我也会提供我的问题作为答案。您可以使用：

```
for(element in window.depthElems) {
    if(window.depthElems.hasOwnProperty(element)) {
        $('.wrapper').append('<img src="' + window.depthElems[element] + '" />');
    }
} 
```

这不仅更优雅，而且需要的代码也少得多。当然，如果有理由使用其他代码，请说出来。

*注意：*此代码经过编辑，还包括读取“数组”的功能，但问题是使其与“对象”一起使用。如果您使用“对象”，则“hasOwnProperty”检查是多余的。

*注意#2：*您也可以`var hasOwn = Object.prototype.hasOwnProperty;`像**Azder**所说的那样使用，这是一个很好的保障措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T18:39:28.447

如果我的回答太过分了，我深表歉意，我只是想防止误用 JS（我经历过很多）进一步伤害。

```
jQuery(document).ready(function($) {

    var i; // there is no block scope in JS, so better to be clear and define i here
    var $wrapper; // also

    // Changing the JS built-in objects is problematic most of the time
    // You should learn from jQuery and do wrapping instead
    // Or at least just a good namespasing like:
    // MyFramework.objectSize = function (obj) {}

    Object.size = function(obj) {
        var size = 0, key;
        var hasOwn = Object.prototype.hasOwnProperty; // will explain further down
        for (key in obj) {
            // if obj has redifined hasOwnProperty = function(){ return false; }?
            // it's better to use hasOwn like this if(hasOwn.call(obj,key)) {}
            // and please do use braces even if only 1 statement
            if(hasOwn.call(obj,key)) size++;
        }
        return size;
    };

    // Returns the number of objects in my JSON object
    var size = Object.size(window.depthElems);

    $wrapper = $('.wrapper'); // cached so jQuery doesn't search for it each iteration    

    // i is scoped to the whole function anyways
    for (i = 0; i < size; i++) {

        // $.each even guards you of the changing DOM which can cause
        // infinite loops (you don't have that problem here, but... good to know
        $.each(window['depthElems'+i],function(index,element){
            $wrapper.append('<img src="' + element + '" />');
        }); 
    }

}); 
```

此外，由于您已经创建了名为 elem1、elem2、elem3... 的对象，您不妨使用二维数组，例如`window.depthElems = [[],[],[]]`

# dynamics-crm-2011 - 错误请求 415

> ID：11655943
> 
> 赞同：1
> 
> 时间：2012-07-25T18:09:42.120
> 
> 标签：dynamics-crm-2011

尝试执行 CRM Web 服务时出现以下错误。\

**代码**

```
 CrmAuthenticationToken token = new CrmAuthenticationToken();
            token.AuthenticationType = 0; //Use AD authentication
            token.OrganizationName = "Organization";
            CrmService service= new CrmService();
            service.CrmAuthenticationTokenValue = token;
            service.Credentials = System.Net.CredentialCache.DefaultCredentials;
            service.PreAuthenticate=true;
            WhoAmIRequest whoami = new WhoAmIRequest();
            WhoAmIResponse whoResp = ((WhoAmIResponse)(service.Execute(whoami))); 
```

**配置设置：**

```
 <add key="CrmSdk.CrmServiceWsdl" value="http://server/organization/XRMServices/2011/Organization.svc/web"/> 
```

**错误：**

System.Net.WebException：请求失败，HTTP 状态 415：无法处理消息，因为内容类型为 'text/xml; charset=utf-8' 不是预期的类型 'application/soap+xml; 字符集=utf-8'..

如果我像下面这样更改我的配置设置，我会收到“错误请求”。

**配置设置：**

```
 <add key="CrmSdk.CrmServiceWsdl" value="http://server/organization/XRMServices/2011/Organization.svc/web"/> 
```

**错误：**

> 由于 EndpointDispatcher 中的 ContractFilter 不匹配，接收方无法处理带有 Action 'http://schemas.microsoft.com/crm/2007/WebServices/Execute' 的消息。这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:14:14.167

您已经为 2007 端点设置了此设置，因此您需要将值更改为：

```
value="http://server/organization/XRMServices/2011/Organization.svc/web" 
```

至

```
value="http://server/org/MSCRMServices/2007/CrmService.asmx" 
```

如果您尝试使用 2011，则需要使用 IOrganizationService。[SDK http://www.microsoft.com/en-us/download/details.aspx?id=24004](http://www.microsoft.com/en-us/download/details.aspx?id=24004)中有一些非常好的示例

这是另一个例子[http://nishantrana.wordpress.com/2010/11/03/sample-code-for-using-iorganizationservice-in-crm-2011/](http://nishantrana.wordpress.com/2010/11/03/sample-code-for-using-iorganizationservice-in-crm-2011/)

# websphere - 我在哪里可以试用 websphere 进程服务器

> ID：11655949
> 
> 赞同：0
> 
> 时间：2012-07-25T18:09:57.503
> 
> 标签：websphere

我无法找到 websphere 进程服务器的试用版。我想掌握这个软件。或者换句话说，了解该软件的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:40:15.587

关于教程：

[http://www.ibm.com/developerworks/websphere/library/techarticles/0305_issw/recommendedreading.html](http://www.ibm.com/developerworks/websphere/library/techarticles/0305_issw/recommendedreading.html)

[http://www.myeclipseide.com/documentation/quickstarts/blueedition/blue_connectors/](http://www.myeclipseide.com/documentation/quickstarts/blueedition/blue_connectors/)

和信息中心：

publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.was_v8/plugin_coverpage.html

问候，吉姆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:33:50.083

您可以在该页面上下载 tial：

[http://www.ibm.com/developerworks/downloads/ws/was/](http://www.ibm.com/developerworks/downloads/ws/was/)

您还可以在该页面上查看更多试用版：

[http://www.ibm.com/developerworks/websphere/downloads/](http://www.ibm.com/developerworks/websphere/downloads/)

问候，吉姆

# xcode - 使用带有情节提要的 XCode 4 为基于 UITabBarController 的应用程序共享 iAd 横幅

> ID：11655953
> 
> 赞同：6
> 
> 时间：2012-07-25T18:10:04.263
> 
> 标签：xcode, uiviewcontroller, uinavigationcontroller, uitabbarcontroller, iad

[Storyboard iAd Tab Bar Controller 示例项目](http://dl.dropbox.com/u/43437305/TabTest.zip)

1：下载 Xcode 4.2 的示例项目

2：使横幅从每个视图的标签栏上方可见

3：发布答案

4：获得赏金

5：让别人开心，我会辅导的。这个重要的步骤 atm 没有地方现有的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:28:38.317

其实很简单。只需为每个选项卡创建一个新的横幅视图控制器，它将成为情节提要中每个选项卡的父视图控制器。然后将*Container View*对象拖入每个横幅视图控制器，并将您的子视图控制器嵌入每个横幅视图控制器中。

最后在 BannerViewController.m 中替换自定义 init 方法一个方法来覆盖`initWithCoder:`您将在哪里添加横幅视图控制器到横幅管理器。还要实现`prepareForSegue:`可以将 设置`_contentController`为 segue 的目标视图控制器的位置。

我的[博文](http://stevemoser.org/blog/2013/04/24/how-to-create-a-shared-iad-banner-in-a-tabbed-application-with-storyboards/)更详细地介绍了一个示例项目并提供了链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:24:48.507

在我们尝试任何激烈的事情之前，请尝试将这段代码放在你的底部`appDidFinishLaunchingWithOptions`，就在你`return YES;`打电话之前：

```
self.window.rootViewController = tabBarController;
[self.window makeKeyAndVisible]; 
```

# php - 使用 URL 字符串插入 MySQL

> ID：11655958
> 
> 赞同：0
> 
> 时间：2012-07-25T18:10:32.320
> 
> 标签：php, mysql, http

似乎无法让它发挥作用。有人可以通过一个例子指出我正确的方向如何解决这个问题。谢谢你。我需要这个网址 domain.com/script.php?from=1123&message=1234454

将 velues 插入我的表中

```
<?php

mysql_connect('localhost', 'user', 'pass');

mysql_select_db('dbname');

$sql = "insert into table (from, message) values ('".$_GET['from']."','".$_GET['message']."')"; 
if(!$sql){ 
echo "Error " . mysql_error(); }
else{ echo "Success"; }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:14:14.723

尝试添加

```
 mysql_query($sql); 
```

所以它实际上会在您创建一个字符串时添加到数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:13:51.423

您永远不会调用[mysql_query()](http://php.net/mysql_query)来实际执行查询。

```
<?php

mysql_connect('localhost', 'user', 'pass');

mysql_select_db('dbname');

$from    = mysql_real_escape_string($_GET['from']);
$message = mysql_real_escape_string($_GET['message']);

// TODO: check that $from and $message are not empty and are valid

$sql    = "insert into table (from, message) values ('$from','$message')"; 
$result = mysql_query($sql);  // This actually executes the query on the server

if(!$result) { 
    echo "Error " . mysql_error();
} else {
    echo "Success";
} 
```

[对mysql_real_escape_string](http://php.net/mysql_real_escape_string)的调用也非常重要。没有它，你很容易受到 SQL 注入的攻击。

此外，这些`mysql_*`功能已被弃用。您应该切换到[Mysqli](http://php.net/mysqli)或[PDO_Mysql](http://php.net/pdo)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:17:43.157

首先，您必须检查是否设置了变量。

```
 if(isset($_GET['from'],$_GET['message'])){
       $con = mysql_connect('localhost', 'user', 'pass');

       mysql_select_db('dbname',$con);

       $from    = mysql_real_escape_string($_GET['from']);
       $message = mysql_real_escape_string($_GET['message']);

// TODO: check that $from and $message are not empty and are valid

$sql    = "insert into table (from, message) values ('$from','$message')"; 
$result = mysql_query($sql);

if(!$result) {  echo "Error " . mysql_error(); } 
else {  
  echo "Success"; 
  mysql_close($con);
}

}else{die();} 
```

# c++ - 将 BYTE 缓冲区的特定部分复制到结构中+

> ID：11655962
> 
> 赞同：1
> 
> 时间：2012-07-25T18:10:38.013
> 
> 标签：c++, arrays, buffer, byte, memcpy

我在我的文件加载器中工作，我认为下一次更新更好，而不是继续使用 fread 和 fseek 将洞文件读取到 BYTE 缓冲区，我也是，现在我想知道是否没有简单的分配方法此 BYTE 缓冲区的一部分到结构中。

我已经尝试制作一个与结构相同大小的临时缓冲区，将我需要的所有字节从原始缓冲区复制到它，并使用 memcpy，但它不能正常工作，我刚刚收到很多随机数（其中我想我正在接受他们的指点，但我不知道对不对）。

感谢您的时间！

**编辑：真实代码**

```
void memread(BYTE from[],int pos, void * to,size_t size) 
{   
    BYTE * temp = new BYTE[sizeof(BYTE)*size];

    for (unsigned int i = 0; i< 1+size; i++)
        temp[i] = from[i+pos];

    memcpy(to,temp,size);

}

... inside the file loader ...

fseek(fl,0,SEEK_END);
const int memory_size = (int)ftell(fl);

BYTE * memory = new BYTE[sizeof(BYTE)*memory_size];
fseek(fl,0,SEEK_SET);

for (int i=1;i<=memory_size;i++)
fread(&memory[i],sizeof(BYTE),1,fl);

fclose(fl);

int memory_pos = 0;

XM::Memory xm;
memset(&xm,0,sizeof(XM::Memory));

memread(memory,1,&xm.Header,sizeof(XM::Header)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:21:38.800

首先，您正在逐字节读取文件，这会给您带来不好的性能。接下来，你的`memread`（你不释放临时缓冲区！）可以用一个简单的替换`memcpy`

```
fseek(fl, 0, SEEK_END); 
const int memory_size = (int)ftell(fl); 

BYTE* memory = new BYTE[sizeof(BYTE) * memory_size];
fseek(fl, 0, SEEK_SET); 

fread(memory, sizeof(BYTE), memory_size, fl); 

fclose(fl); 

int memory_pos = 0; 

XM::Memory xm;
memset(&xm, 0, sizeof(XM::Memory)); 

memcpy(&xm.Header, memory + memory_pos, sizeof(XM::Header); 
```

永远不要忘记`delete[]`分配的数组，例如`temp`和`memory`

# java - 使用 hashmap 存储在两个不同的地图中

> ID：11655964
> 
> 赞同：0
> 
> 时间：2012-07-25T18:10:45.880
> 
> 标签：java

我有一个包含两个不同条目的文件，一个来自男性，另一个来自女性。尝试使用以名称为键、对应的 ID 为值的 hashmap 读取文件并存储。有人可以帮我弄清楚如何将它们存储在两个不同的地图中。换句话说，如果男性将其指向（map.males），而女性将其指向（map.females）。非常感谢。这是示例输入和我的没有方向的代码！！！！！！！

```
**Males**
 Rob 1
 John 3
 Josh 7
 Anand 9
 Paul 5
 Norm 8
 Alex 4

 **Females** 
  Kally 43
  Kate 54
  Mary 23
  Amanda 13
  Mariam 15
  Alyssa 18
 Christina 24

 import java.io.*;
 import java.util.*;

 class ReadFileAndStoreHashmap {
 public static void main(String[] args)  {
 try{
   Scanner scanner = new Scanner(new FileReader("C:\"));
   HashMap<String, String> map = new LinkedHashMap<String, String>();
   while (scanner.hasNextLine()) {
   String[] columns = scanner.nextLine().split(" ");
   if(columns.length == 2)
   map.put(columns[0], columns[1]);
  System.out.println(map);
    }
    }catch (Exception e){
   System.out.println(e.toString());
   }}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:39:16.923

有点不清楚你在问什么。如果两者都在一个文件中并由**Females**分隔，那么当您看到时只需切换地图：

```
import java.io.*;
import java.util.*;

class ReadFileAndStoreHashmap {
public static void main(String[] args)  {
 try{
   Scanner scanner = new Scanner(new FileReader("C:\"));
   HashMap<String, String> maleMap = new LinkedHashMap<String, String>();
   HashMap<String, String> femaleMap = new LinkedHashMap<String, String>();
   Map<String,String> currentMap = maleMap;
   while (scanner.hasNextLine()) {
     String nextLine = scanner.nextLine();
     if (nextLine.equals("**Females**") {
        currentMap = femaleMap;
     } else {
        String[] columns = nextLine.split(" ");
        if(columns.length == 2) {
        currentMap.put(columns[0], columns[1]);
     }
   }
   System.out.println(currentMap);
   }
   }catch (Exception e){
   System.out.println(e.toString());
   }}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:20:22.203

如果我是正确的，您想为男性和女性使用两张地图。那么解决方案可能如下。

```
Scanner scanner = new Scanner(new FileReader("C:\"));
   HashMap<String, String> males= new HashMap<String, String>();
   HashMap<String, String> females= new HashMap<String, String>();
   while (scanner.hasNextLine()) {
   String[] columns = scanner.nextLine().split(" ");
   if(columns.length == 2){
       If(its a male)                        //define your logic to decide gender
       males.put(columns[0], columns[1]);
       else if(its a female)
       females.put(columns[0], columns[1]);
       else
       //do nothing
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:27:20.277

假设您有 2 个文件......最好用一种方法来拥有它：

```
private static Map<String, String> getMap(String mapFile) throws FileNotFoundException {

    Scanner scanner = new Scanner(new FileReader(mapFile));
    Map<String, String> map = new LinkedHashMap<String, String>();
    while (scanner.hasNextLine()) {

        String[] columns = scanner.nextLine().trim().split(" ");

        if (columns.length == 2) {
            map.put(columns[0], columns[1]);
        }
    }

    return map;
} 
```

并根据需要分配：

```
Map<String, String> malesMap = getMap("map.males");
Map<String, String> femalesMap = getMap("map.females"); 
```

注意 trim() 处理前导空格。

# php - 将选择下拉列表发送到另一个选择下拉列表

> ID：11655966
> 
> 赞同：0
> 
> 时间：2012-07-25T18:10:53.070
> 
> 标签：php, javascript, jquery, mysql

我正在制作一个网站来学习编码，并且正在制作 2 个选择下拉列表，其中 1 个将从数据库表中填充 -> cat。另一个选择下拉菜单将从 table -> subcat 填充。cat 和 subcat 的数据库如下所示：

餐桌猫

id (int 15) || 猫（varchar 75）|| 数字（整数 3）

表子猫

id (int 15) || 子猫（varchar 75）|| 目录号（int 3）

每个 subcat 行都有一个与 cat -> number 中的行相对应的 catnumber。因此，例如，如果我们有餐厅，它是 Cat 中的一行，其编号为 2，那么如果我们还有 American Food 和 Chinese Food，其 catnumber 为 2，那么它们是对应的。

这是我为所有 3 个 cat 下拉菜单从数据库中提取的代码。

```
<p><b>Cat1:</b><br />
<?php
  $query="SELECT id,cat FROM cat";
  $result = mysql_query ($query);
  echo"<select name='cselect1' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['cat'])."\">".$catinfo['cat']."</option>";

  }

  echo"</select>";
?>

<!-- Next CAT -->

<p><b>Cat2:</b><br />
<?php
  $query="SELECT id,cat FROM cat";
  $result = mysql_query ($query);
  echo"<select name='cselect2' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['cat'])."\">".$catinfo['cat']."</option>";

  }

  echo"</select>";
?>

<!-- Next CAT -->

<p><b>Cat3:</b><br />
<?php
  $query="SELECT id,cat FROM cat";
  $result = mysql_query ($query);
  echo"<select name='cselect3' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['cat'])."\">".$catinfo['cat']."</option>";

  }

  echo"</select>";
?> 
```

这是我的所有 3 个**子目录**下拉列表的数据库中提取的代码

```
<p><b>Subcat1:</b><br />
<?php
  $query="SELECT * FROM subcat WHERE catnumber='1' ";
  $result = mysql_query ($query);
  echo"<select name='sselect1' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['subcat'])."\">".$catinfo['subcat']."</option>";

  }

  echo"</select>";
?>
<p><b>Subcat2:</b><br />
<?php
  $query="SELECT id,subcat FROM subcat WHERE catnumber='1' ";
  $result = mysql_query ($query);
  echo"<select name='sselect2' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['subcat'])."\">".$catinfo['subcat']."</option>";

  }

  echo"</select>";
?> 
<p><b>Subcat3:</b><br />
<?php
  $query="SELECT id,subcat FROM subcat WHERE catnumber='1' ";
  $result = mysql_query ($query);
  echo"<select name='sselect3' class='e1'><option value='0'>Please Select A Category</option>";
  // printing the list box select command
  while($catinfo=mysql_fetch_array($result)){//Array or records stored in $nt
  echo "<option value=\"".htmlspecialchars($catinfo['subcat'])."\">".$catinfo['subcat']."</option>";

  }

  echo"</select>";
?> 
```

所以现在所有的 subcat 选择都试图获取编号为 1 的猫的所有子类别（即餐厅）。如何获取在 cat select 上选择的任何内容（不刷新页面）相应的 subcat select 显示相应的 subcat 列表中的猫的数量？

^ 非常抱歉做了糟糕的解释工作。最后我基本上想要它就像 Yelps ->[这里](http://www.yelp.com/biz_attribute?biz_id=Jsuy0DN6NhILXSkHr6UpCA)

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:17:24.527

您需要进行 ajax 调用以在后台查询数据库，然后返回结果（作为 HTML）并填充您的子类别选择。

```
<select name="cat" id="cat">...</select>
<select name="subCat" id="subCat">...</select>

<script language="javascript">
    $('#cat').change(function() {
        $.post('getSubcat.php', {
           cat: $(this).val()
        }, function(data) {
            $("#subCat").html(data);
        }
    });
</script> 
```

确保您的 getSubcat.php 脚本将结果回显为

```
<option value='whatever'>Label</option>
<option value='whatever2'>Label2</option> ... 
```

getSubcat.php 将是一个简单的查询/输出脚本：

```
<?php
$category = $_POST['cat'];

$query = "SELECT * FROM subcategories WHERE parent_category = " . $category;
$result = mysql_query($query);

echo "<option value='0'>Select a subcategory</option>";
while($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['id'] . "'>" . $row['subcategory_name'] . "</option>";
} 
```

注意：这使用 jQuery - 确保您的页面包含 jQuery 库

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

# xcode - 不离开 Xcode 的单元测试

> ID：11655968
> 
> 赞同：4
> 
> 时间：2012-07-25T18:11:23.223
> 
> 标签：xcode, ios-simulator, sentestingkit

是否可以在没有自动应用程序切换到模拟器的情况下运行单元测试？它变得非常烦人，尤其是如果您处于全屏状态并且最终将“整个桌面”扔离控制台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T21:24:02.270

这是我设置为在*测试*行为配置中*生成输出运行的一个小 AppleScript：*

 *```
#!/usr/bin/osascript
activate application "Xcode" 
```

*按下command* + *U*后，它会立即恢复 Xcode 。我还打开了一个错误，Apple 将其标记为重复。所以，他们很清楚。*

# c# - 更新列族时，在字符“]”处没有可行的替代方案

> ID：11655971
> 
> 赞同：2
> 
> 时间：2012-07-25T18:11:25.973
> 
> 标签：c#, cassandra, fluentcassandra

我是 Cassandra 的新手，但我正在尝试更新列族以在某些列上具有二级索引。创建列族后，我运行以下代码行：

```
db.ExecuteNonQuery("UPDATE COLUMN FAMILY Targets with comparator = UTF8Type and column_metadata=[{column_name: Age, validation_class: UTF8Type, index_type: KEYS}];"); 
```

问题是我收到以下错误：
**第 1:141 行在字符 ']' 处没有可行的替代方案**

我可以使用 CLI 运行该确切的语句而不会出现任何问题。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:41:19.270

看起来我在运行 ExecuteNonQuery 时需要使用 CQL：[http ://www.datastax.com/docs/0.8/dml/using_cql](http://www.datastax.com/docs/0.8/dml/using_cql)

# php - 从默认模块中的自定义操作帮助程序访问 Zend url 操作帮助程序

> ID：11655978
> 
> 赞同：2
> 
> 时间：2012-07-25T18:11:38.147
> 
> 标签：php, zend-framework, zend-framework-routing

因此，在访问模块时，我通常使用自定义操作帮助程序中的“url”操作帮助程序没有问题，使用以下命令：

```
$urlHelper = Zend_Controller_Action_HelperBroker::getExistingHelper('url'); 
```

但是如果访问默认模块（根url，/）会出现以下错误：

致命错误：在 /home/erahhal/Code/ZendFramework-1.11.12/library/Zend/Controller/Plugin/Broker.php 中，未捕获的异常 'Zend_Controller_Action_Exception' 带有消息 'Action helper "Url" has not been registered with the helper broker'在第 336 行

这个问题的根源是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:34:40.530

通常，如果我想在控制器或动作助手的上下文之外使用 URL 助手，我只需自己创建一个新的助手实例。

您应该能够使用以下代码获取 URL 帮助程序并使用它：

```
$urlHelper = new Zend_Controller_Action_Helper_Url();
$url       = $urlHelper->url(array('controller' => 'foo',
                                   'action'     => 'bar',
                                   'module'     => 'mod')); 
```

我不确定您为什么会遇到该错误，但如果帮助程序尚未在前端控制器中注册（也许您在应用程序调度中过早调用它？），请尝试使用`getStaticHelper()`而不是`getExistingHelper()`：

```
$urlHelper = Zend_Controller_Action_HelperBroker::getStaticHelper('url'); 
```

如果 URL 帮助程序尚未在插件加载器中注册，它将为您注册并加载它。

来自[Helper Broker 文档](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.broker)：

> 还有两种静态方法可以从助手代理中检索助手：**`getExistingHelper()`**和**`getStaticHelper()`**. **`getExistingHelper()`**仅当先前已由助手代理调用或显式注册时才会检索助手；如果没有，它会抛出异常。**`getStaticHelper()`**与 相同 **`getExistingHelper()`**，但如果尚未在帮助程序堆栈中注册，将尝试实例化帮助程序。**`getStaticHelper()`**是检索您希望配置的助手的好选择。

# c# - 没有现有记录时填充数据时出错。ASP.NET C#

> ID：11655980
> 
> 赞同：2
> 
> 时间：2012-07-25T18:11:43.553
> 
> 标签：c#, asp.net

我有两个 DropDownLists 和一个 ListBox，即：ddlYearLevel、ddlSubjects 和 lstStudents。

ddlSubjects 和 lstStudents 依赖于 ddlYearLevel 因为我设置了这样的代码

```
protected void ddlYearLevel_SelectedIndexChanged(object sender, EventArgs e)
{
    PopulateSubjects(int.Parse(ddlYearLevel.SelectedItem.Value));
    PopulateStudent(int.Parse(ddlSubjects.SelectedValue),
        int.Parse(ddlYearLevel.SelectedValue));
} 
```

如果我有所选 YearLevel 的现有科目记录，那么就没有问题。

但是，当我没有现有的主题记录时，就会出现错误，指出“输入字符串的格式不正确”。

我的问题是，如果没有记录，如何将值设置为 null？

财政年度：

```
private void PopulateSubjects(int yearLevel)
{           
    con1.Open();
    SqlCommand com = new SqlCommand();
    com.Connection = con1;
    com.CommandType = CommandType.Text;
    com.CommandText =
        "SELECT Subjects.SubjectID, Subjects.SubjectCode, Subjects.YearID " +
        "FROM Subjects WHERE Subjects.YearID = " + yearLevel;
    SqlDataReader data = com.ExecuteReader();

    if (data != null)
    {
        ddlSubjects.DataSource = data;
        ddlSubjects.DataValueField = "SubjectID";
        ddlSubjects.DataTextField = "SubjectCode";
        ddlSubjects.DataBind();
    }
    else
        lblAdd.Text = "No records found!";

    data.Close();
    con1.Close();
    con1.Dispose();      
}
private void PopulateYearLevel()
{
    con5.Open();
    SqlCommand com = new SqlCommand();
    com.Connection = con5;
    com.CommandType = CommandType.Text;
    com.CommandText =
        "SELECT * FROM YearLevels";
        SqlDataReader data = com.ExecuteReader();
        ddlYearLevel.DataSource = data;
        ddlYearLevel.DataValueField = "YearID";
        ddlYearLevel.DataTextField = "YearLevel";
        ddlYearLevel.DataBind();

    data.Close();
    con5.Close();
    con5.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:16:03.983

您正在尝试对非 int 值使用 Int.Parse。如果没有可用的可解析值，我建议使用[TryParse并修改应用程序的流程。](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)例子：

```
int subjectVal;
if(TryParse(ddlSubjects.SelectedValue, out subjectVal)
{
    PopulateStudent(subjectVal, yearVal);
}
else
{
    //Invalid value.  Log something, throw error, whatever.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:15:22.440

`PopulateSubjects()`返回一个 bool: if `true`，`data != null`反之亦然。然后你`PopulateStudent()`只能在`true`返回时调用。

**编辑：**

```
protected void ddlYearLevel_SelectedIndexChanged(object sender, EventArgs e)
{
    if(PopulateSubjects(int.Parse(ddlYearLevel.SelectedItem.Value)))
        PopulateStudent(int.Parse(ddlSubjects.SelectedValue), int.Parse(ddlYearLevel.SelectedValue));
} 
```

然后，更改`private void PopulateSubjects(int yearLevel)`为

```
private bool PopulateSubjects(int yearLevel) 
```

并修改 if/else 语句以添加 bool

```
bool subjectsFound;
if (data != null)
{
    ddlSubjects.DataSource = data;
    ddlSubjects.DataValueField = "SubjectID";
    ddlSubjects.DataTextField = "SubjectCode";
    ddlSubjects.DataBind();
    subjectsFound = true;
}
else
{
    lblAdd.Text = "No records found!";
    subjectsFound = false;
} 
```

然后`return subjectsFound;`在最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T16:25:13.740

我还可以建议您可能想查看`ddlYearLevel.SelectedIndex`而不是`ddlYearLevel.SelectedItem`. 这可能不是您想要的，但 SelectedIndex 返回当前选定项目的编号。然后，您可以使用它来确定有关所选项目的信息，而不是检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:25:04.287

那将是 int.TryParse 或`!string.IsNullOrEmpty(ddlYearLevel.SelectedValue)`在尝试填充之前简单地检查

# wpf - ViewModel 更改时淡出/淡入

> ID：11655994
> 
> 赞同：0
> 
> 时间：2012-07-25T18:12:21.563
> 
> 标签：wpf, mvvm, contentpresenter

我的 WPF 应用程序的主窗口有一个标题栏/导航区域，该区域在应用程序的整个生命周期内都存在，然后是大多数用户交互发生的工作区。（它都是按照 MVVM 模式的精神编写的，我可能对代码隐藏有过分的反感：/）这个工作区只是 a `ContentPresenter`，它的内容绑定到 a`MainWindowViewModel`的 type 属性`ISomeArbitraryVMInterface`。在我的代码中，这个属性是通过`DomainEvent`从任何地方提出来更新的。

说了这么多，当`DomainEvent`被触发并且内容`ContentPresenter`被改变时，我想`ContentPresenter`通过动画改变它的不透明度——从用户的角度来看，我希望它看起来好像当前视图淡出，使用 new进行`ContentPresenter`更新`ISomeArbitraryVMInterface`，然后对应于 new 的新 View`ISomeArbitraryVMInterface`淡入。

我的第一个想法是每当 Content 属性发生变化时让 ViewModel 触发一个事件，然后我意识到我已经完成了我的`DomainEvent`实现，但是我想不出一种方法让 View “监听”事件然后同步淡出/更新/淡入。任何解决此类问题的见解将不胜感激。如果有一个优雅的解决方案，我会为后代发布一些代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:36:47.020

AnimatedTransition 可能是您所追求的：

*   [http://joshsmithonwpf.wordpress.com/2009/04/25/orchestrating-animated-transitions-between-view-and-viewmodel/](http://joshsmithonwpf.wordpress.com/2009/04/25/orchestrating-animated-transitions-between-view-and-viewmodel/)

或者，您可以使用 Visual State Manager 和一些行为来触发您自己的 DomainEvent，进入不同的淡入淡出状态。

其他一些答案：

*   [MVVM 中驱动视觉状态的正确方法](https://stackoverflow.com/questions/3063808/proper-way-in-mvvm-to-drive-visual-states)

*   [将 [VisualStateManager] 视图状态绑定到 MVVM 视图模型？](https://stackoverflow.com/questions/6002046/binding-visualstatemanager-view-state-to-a-mvvm-viewmodel)

# php - 如何存储多语言数据？

> ID：11655995
> 
> 赞同：6
> 
> 时间：2012-07-25T18:12:24.987
> 
> 标签：php, mysql, multilingual

> **可能重复：**
> [多语言数据库的架构](https://stackoverflow.com/questions/316780/schema-for-a-multilanguage-database)

我正在构建一个非常繁忙的具有多语言数据的 Web 应用程序。所有这些数据都存储在 MySQL 数据库中。存储这些数据的最佳方式是什么？不过我有几个猜测：

1.  表中每种语言的单独列（如 title_en、title_fr）
2.  每种语言的单独表格（如 pages_en、pages_fr）
3.  翻译的交叉表（在 pages 表中有一个 id，并且在一个翻译表中有这个链接的 id，其中有多个列，如 trans_en、trans_fr）
4.  在一个表中包含非多语言数据，例如每种语言在一个表中的页面和翻译（pages_en，pages_fr）
5.  其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:30:26.890

如果我必须制作一个多语言网站，那么我将设计数据库如下：

![在此处输入图像描述](../Images/292841abecab57d7d487e0526add3363.png)

应用程序中的每个页面都可以有多种语言。您只需过滤语言 id 即可获得页面所需的语言。

# javascript - JsonRest 返回空响应

> ID：11655999
> 
> 赞同：0
> 
> 时间：2012-07-25T18:12:49.957
> 
> 标签：javascript, rest, browser, dojo

```
var contentJsonRestStore = new JsonRest({target: myurl}); 
```

试图实现我的休息，但我不断从我的网址收到空响应。

1.  我可以从任何浏览器访问我的 url 的 json 内容。
2.  我在 wamp 服务器上设置了我的 dojo 项目（因此，我为我的开发环境设置了我的代理：localhost 和我的 url）

这是分别来自 Firefox 和 chrome 的错误代码。

**火狐（空响应）：**

![火狐](../Images/a688833399c05a1e81fb7e738fb464ab.png)

**谷歌浏览器 (f12)：**

![谷歌浏览器](../Images/f4dfcbc212eb05fcab7a100284f01129.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:14:08.277

看起来您遇到了 Origin 错误。请记住，您只能将 AJAX 请求发送到当前域（脚本正在运行的地方），除非其他域明确允许它（通过设置`Access-Control-Allow`标头）。

您是否打算进行跨域请求？