# StackOverflow 问答 12199000-12199999

# java - 什么是应用控制器模式？

> ID：12199000
> 
> 赞同：2
> 
> 时间：2012-08-30T14:18:55.487
> 
> 标签：java, design-patterns, gwt

我正在学习 gwt，我看到在实现 MVP 的大型项目中使用了一个 appcontroller 模式。我已经阅读了官方文档。但它们似乎非常具体和抽象。我想了解整个模式及其背后的动机。任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:42:54.527

应用程序控制器正是其名称所描述的。

它控制着应用程序范围的事件。

例如，这是历史事件发生的地方。当有人浏览应用程序并且新的主视图出现时，或者当您按下应用程序的后退或前进按钮时，您可以控制如何完成。您将在这里创建大多数主要的演示者和视图，并在应用程序中添加或删除它们。

另一个例子是全局数据。如果在视图之间共享数据，这可能是您放置它们并根据用户输入更新它们的地方，这样当另一个演示者需要它们时，他们就会知道它们在哪里。事件总线和 rpcService 一样是全局的，它为演示者提供异步回发调用功能。

它本质上是集中管理发生的整个 GWT 应用程序的演示者。（至少这是我在我的应用程序中使用它的方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:56:40.220

希望[AppController 和事件处理](http://howtogwt.blogspot.com/2010/02/event-handling-and-event-propagation.html)让你清楚`AppController`

> 为了解决依赖问题，我们将引入一个`AppController` 来协调 UI 组件之间的消息，并且我们将在每个组件中构建一个事件总线，`presenter`以便`AppController`可以注册对演示者事件的兴趣并做出相应的反应。

![应用控制器](../Images/54d57b4e8bf03a47654a27b7915646fb.png)

# android - 全局捕获某些活动中引发的异常

> ID：12199001
> 
> 赞同：3
> 
> 时间：2012-08-30T14:18:55.617
> 
> 标签：android, android-activity

我有一个应用程序，其中包含`LoginActivity`使 WebService 请求授权用户。如果凭据正确，我将`Auth`其会话 ID 存储在单例中。

但是，在应用程序使用期间，用户可以退出（服务器重启等）。在这种情况下，我可以扔一些`AuthException`. 它可以扔到每个应用程序的`Activity`.

如何赶上`AuthException`每一个`Activity`完成当前的一个并重新开始`LoginActivity`？

这个异常是可以到达的`Application`还是`AuthLayerActivity`其他人会扩展的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:26:18.357

我不会使用异常来做到这一点。特别是如果您尝试将异常从一个活动传播到另一个活动。

但是活动通常需要不时更新它们的状态，如果您检查身份验证状态，那么您可以在需要时返回登录。或者，发送广播也可以作为通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T06:17:10.480

你可以使用我喜欢的 FitActivity ，它能够处理所有异常并根据提供的策略做一些事情。看这里：[https ://github.com/rysiekblah/android-commons/blob/master/src/main/java/com/rysiekblah/android/commons/activity/FitActivity.java](https://github.com/rysiekblah/android-commons/blob/master/src/main/java/com/rysiekblah/android/commons/activity/FitActivity.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:24:47.563

您可以使用将处理异常部分的所有活动继承的父活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:24:30.520

您可能想要声明一个默认的未捕获异常处理程序`Thread.setDefaultUncaughtExceptionHandler()`

请参阅[在 Android 中设置全局未捕获异常处理程序的理想方法](https://stackoverflow.com/questions/2764394/ideal-way-to-set-global-uncaught-exception-handler-in-android)：

# php - session_set_cookie_params 防止设置 cookie

> ID：12199002
> 
> 赞同：0
> 
> 时间：2012-08-30T14:18:55.960
> 
> 标签：php, session

我正在设置一天的会话 cookie，并且还想设置 cookie 超时。

```
// 1 day
define( 'COOKIE_TIMEOUT', 86400 );
ini_set( 'session.gc_maxlifetime', COOKIE_TIMEOUT );
session_set_cookie_params( COOKIE_TIMEOUT, '/'); 
```

但是如果我离开`session_set_cookie_params`那里，cookie 就没有设置。

我错过了什么？以前从未发生过。

这是之后的会话代码的其余部分

```
// set session dir
$sessdir = BASEDIR.'/data/sessions';
// create the session dir if it does not exist
if ( !is_dir( $sessdir ) ) {
    @mkdir( $sessdir, 0777 );
}
// if directory exists, then set session.savepath otherwise let it go as is
if( is_dir( $sessdir ) ) {
    ini_set( 'session.save_path', $sessdir );
}
session_start(); 
```

# css - 左边距：自动在 IE 中不起作用

> ID：12199003
> 
> 赞同：3
> 
> 时间：2012-08-30T14:18:58.163
> 
> 标签：css, cross-browser, margin

嗨，我正在尝试将我的主要内容部分居中，即灰色部分。它以 Mozilla 为中心，但不以 IE 为中心（我希望 IE 将从所有计算机中删除）。这是 margin-left:auto 不起作用。有人可以帮我解决这个问题吗？

```
<html>
<head>

</head>

<body style="background-color:black;">
<div style="background-color:gray; margin-left:auto; margin-right:auto; width:1000px; height:1000px; padding-top:0px; margin-top:-10px;">
<p style="margin-left:auto; margin-right:auto; width:500px; background-color:red; text-align:center">This is a test.</p>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:22:16.020

您应该在页面的第一行添加 doctype！

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

# hudson - phpdoc2 的 phing 不运行

> ID：12199004
> 
> 赞同：0
> 
> 时间：2012-08-30T14:18:58.663
> 
> 标签：hudson, jenkins, phing, zend-server, phpdoc

所以我有一个 jenkins 工作来更新我的代码副本并为我的库生成 phpdoc，这一切都是用 phing 完成的

当我在 de build.xml 中使用这些行时，它会生成 jsut 很好（但使用 phpdocumentor 1.4.4）

```
<target name="phpdoc">
        <echo msg="PHP Documentor..." />
        <phpdoc title="API Documentation"
                destdir="/var/www/corelib"
                sourcecode="yes"
                output="HTML:Smarty:PHP">
            <fileset dir="./library/Core">
                <include name="**/*.php" />
            </fileset>
        </phpdoc>
    </target> 
```

我想使用新版本的phpdocumentor所以我用pear安装了它

```
pear install phpdoc/phpDocumentor-alpha 
```

但是当我运行这个命令时（我在 phing 文档中找到了这个），jenkins 打印“PHP documentor”然后直接将构建标记为失败

```
<target name="phpdoc">
        <echo msg="PHP Documentor..." />
        <phpdoc2 title="API Documentation"  destdir="/var/www/corelib" template="responsive">
            <fileset dir="./library/Core">
                <include name="**/*.php" />
            </fileset>
        </phpdoc2>
    </target> 
```

我在这台服务器上安装了 zendserver 但这不是问题，因为 phpdoc 1.4.4 运行良好

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:44:11.337

好的，我找到了解决方案，所以我将其发布以供将来参考

在 phpdocumentor 的 irc 频道上的一些人的帮助下

所以这是最新版本的 phing 与最新版本的 phpdocumentor 相结合的错误。要解决此问题，只需将 phpdocumentor2 的安装恢复到此版本

`phpDocumentor 2.0.0a3`

这将解决 phing 的问题，并且文档生成没有问题

# php - 使用 php mktime()

> ID：12199005
> 
> 赞同：0
> 
> 时间：2012-08-30T14:19:00.600
> 
> 标签：php, javascript, mysql, sql, webserver

我有问题`mktime()`。这是我记录用户登录时间和日期的代码，如果他是第一次登录，则为`$FirstTimeLogin`真，否则`$FirstTimeLogin`为假。

现在的问题是，如果我第一次登录，我会收到一条消息：

> 今天开始1346716800 失败1

但我实际上正在寻找一条消息：

> 今天开始1346716800成功

如果我第二次登录，我会收到此消息。我认为出了点问题，`mktime()`也`gmmktime()`再次尝试了同样的问题。

```
$chklogin = mysql_fetch_array(mysql_query("SELECT Attempt_Time FROM admin_loginattempts WHERE User_Email='{$User_Email}' AND Successful='Y' ORDER BY Attempt_Time DESC LIMIT 1"));

if (!$chklogin) {

    $FirstTimeLogin = true;
} else {
    $lastAttempt = strtotime($chklogin["Attempt_Time"]);
    $todaystart  = gmmktime(0, 0, 0, $Cur_Month, $Cur_Day, $Cur_Year);

    echo 'Last Attempt' . $lastAttempt . '<br>';
    echo 'Today start' . $todaystart . '<br>';

    if ($lastAttempt > $todaystart) {
        $FirstTimeLogin = false;
        echo 'success';
    } else {
        $FirstTimeLogin = true;
        echo 'fail';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:33:24.237

```
$lastAttempt = strtotime($chklogin["Attempt_Time"]);
$todaystart  = strtotime('today'); 
```

其实你的回声是错误的

```
if ($lastAttempt > $todaystart) {
    $FirstTimeLogin = false;
    echo 'fail';
} else {
    $FirstTimeLogin = true;
    echo 'success';
} 
```

# c# - 每当我打开 VS 2010 解决方案时，如何禁用 .vspscc 文件被签出？

> ID：12199007
> 
> 赞同：4
> 
> 时间：2012-08-30T14:19:01.920
> 
> 标签：c#, visual-studio-2010, configuration

每当我打开我的 VS 2010 项目时，我发现 .vspscc 文件与我的 .sln 文件从 TFS 签出的级别相同。每当我打开 VS 2010 解决方案时，如何禁用 .vspscc 文件被签出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:22:38.780

答案是将其从源代码控制中排除。[这是](http://social.msdn.microsoft.com/Forums/en-CA/tfsgeneral/thread/9920911d-1a7e-4ada-90cd-b1b910586cf4)一个更详细的解释这个文件需要什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:25:26.680

1 您可以使用`TF Distroy`命令实用程序从源代码管理中删除

2 您也可以使用右键单击文件并`"Delete"`选择`Source Control.`

# javascript - 根据部分属性查找 HTML

> ID：12199008
> 
> 赞同：22
> 
> 时间：2012-08-30T14:19:04.363
> 
> 标签：javascript, jquery, jquery-selectors

javascript（尤其是 jQuery）有没有办法根据部分属性*名称*查找元素？

我不是在寻找任何找到这些链接中引用的部分属性值的选择器：

*   [以](http://api.jquery.com/attribute-starts-with-selector/)[name^="value"]开头
*   [包含前缀](http://api.jquery.com/attribute-contains-prefix-selector/)[name|="value"]
*   [包含](http://api.jquery.com/attribute-contains-selector/)[name*="value"]
*   [包含单词](http://api.jquery.com/attribute-contains-word-selector/)[name~="value"]
*   [以](http://api.jquery.com/attribute-ends-with-selector/)[name$="value"]结尾
*   [等于](http://api.jquery.com/attribute-equals-selector/)[name="value"]
*   [不等于](http://api.jquery.com/attribute-not-equal-selector/)[name!="value"]
*   [以](http://api.jquery.com/attribute-starts-with-selector/)[name^="value"]开头

但更多类似的东西

```
<div data-api-src="some value"></div>
<div data-api-myattr="foobar"></div> 
```

和

```
$("[^data-api]").doSomething() 
```

查找具有以“data-api”开头的属性的任何元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T15:09:53.370

这用于`.filter()`将候选人限制为具有`data-api-*`属性的候选人。可能不是最有效的方法，但如果您可以先使用相关选择器缩小搜索范围，则可以使用。

```
$("div").filter(function() {
    var attrs = this.attributes;
    for (var i = 0; i < attrs.length; i++) {
        if (attrs[i].nodeName.indexOf('data-api-') === 0) return true;       
    };
    return false;
}).css('color', 'red'); 
```

演示：http: [//jsfiddle.net/r3yPZ/2/](http://jsfiddle.net/r3yPZ/2/)

* * *

这也可以写成选择器。这是我的新手尝试：

```
$.expr[':'].hasAttrWithPrefix = function(obj, idx, meta, stack) {
    for (var i = 0; i < obj.attributes.length; i++) {
        if (obj.attributes[i].nodeName.indexOf(meta[3]) === 0) return true;
    };
    return false;
}; 
```

用法：

```
$('div:hasAttrWithPrefix(data-api-)').css('color', 'red'); 
```

演示：http: [//jsfiddle.net/SuSpe/3/](http://jsfiddle.net/SuSpe/3/)

这个选择器应该适用于 1.8 之前的 jQuery 版本。对于 1.8 及更高版本，[可能需要进行一些更改](https://stackoverflow.com/questions/11624345/getting-the-match-object-in-a-custom-filter-selector-in-jquery-1-8/11635193#11635193)。这是对 1.8 兼容版本的尝试：

```
$.expr[':'].hasAttrWithPrefix = $.expr.createPseudo(function(prefix) {
    return function(obj) {
        for (var i = 0; i < obj.attributes.length; i++) {
            if (obj.attributes[i].nodeName.indexOf(prefix) === 0) return true;
        };
        return false;
    };
}); 
```

演示：http: [//jsfiddle.net/SuSpe/2/](http://jsfiddle.net/SuSpe/2/)

* * *

对于更通用的解决方案，这里有一个选择器，它采用正则表达式模式并选择具有与该模式匹配的属性的元素：

```
$.expr[':'].hasAttr = $.expr.createPseudo(function(regex) {
    var re = new RegExp(regex);
    return function(obj) {
        var attrs = obj.attributes
        for (var i = 0; i < attrs.length; i++) {
            if (re.test(attrs[i].nodeName)) return true;
        };
        return false;
    };
}); 
```

对于您的示例，这样的事情应该有效：

```
$('div:hasAttr(^data-api-.+$)').css('color', 'red'); 
```

演示：http: [//jsfiddle.net/Jg5qH/1/](http://jsfiddle.net/Jg5qH/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T14:59:08.377

不知道你在找什么，但只花了几分钟写这个：

```
$.fn.filterData = function(set) {
    var elems=$([]);
    this.each(function(i,e) {
        $.each( $(e).data(), function(j,f) {
            if (j.substring(0, set.length) == set) {
                elems = elems.add($(e));
            }
        });
    });
    return elems;
} 
```

像这样使用：

```
$('div').filterData('api').css('color', 'red'); 
```

并且将匹配任何具有数据属性的元素，`data-api-*`如?

[**小提琴**](http://jsfiddle.net/M5hfH/2/)

# bash - Linux bash 脚本

> ID：12199009
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:19:09.083
> 
> 标签：bash, awk

> **可能重复：**
> [如何测试变量是否为 bash 中的数字？](https://stackoverflow.com/questions/806906/how-do-i-test-if-a-variable-is-a-number-in-bash)

我是 bash 脚本的新手。需要一个代码来检查一个变量是否是一个数字，如果是，我必须保留它，如果不是，我必须将它重新分配给其他值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:24:11.633

您的基本`if () then ... fi`. 这是格式：

```
#!/bin/bash

var=2

if [[ $var != 1 ]]
then
    var=5;
fi

echo $var 
```

请注意，`[[...]]`格式实际上可以是许多事情之一。

与所有事情一样，如果您想精通它，就必须**为之努力**。类型

*   `man bash`
*   `man test`

获取有关您正在使用的工具的手册。从上到下阅读它们，一遍又一遍，再一遍。然后明天同样的事情。

# java - 如何在 Java 中永远运行一个程序？System.in.read() 是唯一的方法吗？

> ID：12199011
> 
> 赞同：8
> 
> 时间：2012-08-30T14:19:12.190
> 
> 标签：java

我拿了[这段代码](http://jersey.java.net/nonav/documentation/latest/getting-started.html#d4e54)：

```
 28     public static void main(String[] args) throws IOException {
 29         HttpServer httpServer = startServer();
 30         System.out.println(String.format("Jersey app started with WADL available at "
 31                 + "%sapplication.wadl\nTry out %shelloworld\nHit enter to stop it...",
 32                 BASE_URI, BASE_URI));
 33         System.in.read();
 34         httpServer.stop();
 35     } 
```

第 33 行“System.in.read()”是否意味着它将阻塞直到有输入？当使用 UNIX rc 脚本启动 Java 应用程序时，这是否也可以工作 - 而不是从命令行手动启动？

我想编写一个 Java 应用程序来监听 HTTP 连接。该应用程序将在系统启动时自动启动（使用 UNIX rc 脚本）。这意味着应用程序将连续运行 - 理论上永远运行，直到故意停止。在 Java main() 方法中实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-11-03T15:10:22.063

它看起来像一个奇怪的黑魔法，但遵循非常优雅的方式

```
Thread.currentThread().join(); 
```

因此，`main`例如，当前线程等待`join()`线程`main`（即其本身）​​结束。陷入僵局。

被阻塞的线程当然不能是守护线程。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-30T14:22:07.893

将方法留`main`在 Java 中*不会*自动结束程序。

如果没有更多的非守护线程正在运行，则 JVM 存在。默认情况下，唯一的非守护线程是主线程，它在您离开`main`方法时结束，因此停止 JVM。

因此*，要么*不结束主线程（不让`main`方法返回）*，要么*创建一个永远不会返回的新非守护线程（至少在您*希望*JVM 结束之前）。

由于该规则实际上是非常明智的，因此*通常*有一个完美的候选者可以使用这样的线程。例如，对于 HTTP 服务器，它可能是实际接受连接并将它们交给其他线程进行进一步处理的线程。只要该代码正在运行，JVM 就会继续运行，即使该`main`方法早已完成运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T14:43:52.733

@Joachim 的回答是正确的。

但是如果（出于某种原因）你仍然想无限期地阻塞 main 方法（没有轮询），那么你可以这样做：

```
public static void main(String[] args) {
    // Set up ...
    try {
        Object lock = new Object();
        synchronized (lock) {
            while (true) {
                lock.wait();
            }
        }
    } catch (InterruptedException ex) {
    }
    // Do something after we were interrupted ...
} 
```

由于锁对象只对这个方法可见，所以什么都看不到`notify`，所以`wait()`调用不会返回。但是，其他一些线程仍然可以解除阻塞`main`线程......通过中断它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:22:23.437

`while (true) { ... }`应该会持续很长时间。当然，你最终必须想办法阻止它。

一个常见的技巧是有一些`volatile boolean running = true`，然后有主循环`while (running) { ... }`，并定义线程设置的一些标准`running = false`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-27T08:42:36.297

回到线程，这正是我想要的。顺便说一句，这个很棒的[教程](http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-client-server.html)对我帮助很大。

主.java

```
public class Main {
    public static void main(String args[]) {
        ChatServer server = null;
        /*if (args.length != 1)
            System.out.println("Usage: java ChatServer port");
        else*/
            server = new ChatServer(Integer.parseInt("8084"));
    }
} 
```

ChatServer.java 类扩展了一个 Runnable

```
public class ChatServer implements Runnable
{  private ChatServerThread clients[] = new ChatServerThread[50];
    private ServerSocket server = null;
    private Thread       thread = null;
    private int clientCount = 0;

    public ChatServer(int port)
    {  try
    {  System.out.println("Binding to port " + port + ", please wait  ...");
        server = new ServerSocket(port);
        System.out.println("Server started: " + server);
        start(); }
    catch(IOException ioe)
    {
        System.out.println("Can not bind to port " + port + ": " + ioe.getMessage()); }
    }

    public void start() {  
        if (thread == null) {  
            thread = new Thread(this);
            thread.start();
        }
    }
.... pleas continue with the tutorial 
```

因此，在 main 方法中，正在实例化一个 Runnable，并使用该可运行对象实例化一个新的线程，如图所示
`public void start() {` 。这种情况下 JVM 会继续执行该过程，直到您退出项目或调试器。

顺便说一句，这与 Joachim Sauer 在他的回答中发布的相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-25T10:51:16.390

Java 程序在没有非守护线程运行时终止。您所需要的只是拥有一个这样的运行线程。您可以使用无限循环来做到这一点，但这会消耗 CPU 周期。以下似乎是一种合理的方法。

```
ExecutorService executor = Executors.newSingleThreadExecutor();
executor.submit(() -> {}); //submit a task that does what you want (in this case, nothing) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-08-30T12:31:53.000

我们也可以使用 ReentrantLock 实现相同的效果并在其上调用 wait() ：

```
public class Test{
private static Lock mainThreadLock = new ReentrantLock();

public static void main(String[] args) throws InterruptedException {

System.out.println("Stop me if you can");
synchronized (mainThreadLock) {
    mainThreadLock.wait();
 }
} 
```

# macos - Mac OS X npm 上的 node.js “错误：没有这样的模块”

> ID：12199014
> 
> 赞同：5
> 
> 时间：2012-08-30T14:19:25.657
> 
> 标签：macos, node.js, npm

我已经从 pkg 安装程序安装了 node.js v0.8.8 并从源代码编译。但是在尝试运行 npm 时出现以下错误。任何帮助，将不胜感激。

```
>  $ npm --help
> 
> /usr/lib/node_modules/npm/lib/utils/config-defs.js:5   , stdio =
> process.binding("stdio")
>                     ^ Error: No such module
>     at Object.<anonymous> (/usr/lib/node_modules/npm/lib/utils/config-defs.js:5:21)
>     at Module._compile (module.js:449:26)
>     at Object.Module._extensions..js (module.js:467:10)
>     at Module.load (module.js:356:32)
>     at Function.Module._load (module.js:312:12)
>     at Module.require (module.js:362:17)
>     at require (module.js:378:17)
>     at Object.<anonymous> (/usr/lib/node_modules/npm/lib/utils/ini.js:43:18)
>     at Module._compile (module.js:449:26)
>     at Object.Module._extensions..js (module.js:467:10) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T20:23:51.980

我从 Node.JS 0.4 升级到 0.8 时遇到了完全相同的问题。对我有用的是以下内容：

OSX Node.JS 软件包安装程序错误地没有删除 /usr/bin 中的旧 0.4 npm 安装，然后与 /usr/local/bin 中的新 0.8 安装冲突。它只是覆盖已经存在的任何内容。我删除了旧的，但为了确保，我决定全新安装会更好：

`curl https://npmjs.org/install.sh | sudo clean=yes sh`

最后一个问题：安装后，即使 a`which npm`正确返回`/usr/local/bin/npm`，bash 仍然试图从 /usr/bin 执行。这是因为在 OSX 上，bash 已经对可执行文件名进行了哈希处理。每次执行常用程序时，散列都会保存对 PATH 中所有目录的重复搜索。命令行中的A`hash -r`解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:22:59.550

您很可能以某种方式使用旧的 NPM 版本。请参阅：[npm 问题](https://github.com/isaacs/npm/issues/2652)

# jquery - jquery Date Picker 一年中的一周列

> ID：12199017
> 
> 赞同：0
> 
> 时间：2012-08-30T14:19:58.973
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

jquery 日期选择器提供了很多属性来使用它，但有些我无法使用`showWeek`属性。根据文档...

![节目周描述](../Images/7dc35c555af99c0acdeca655c0d084ba.png)

我想有一个单独的列，可以显示**一年中的一周**

请帮助我如何实现这一目标。TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:25:01.020

尝试这个

```
$(function() {
    $( "#selector" ).datepicker({
             showWeek: true,
        firstDay: 1
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:33:09.500

使用基本脚本，我在第一列中看到了星期：

```
$("#date1").datepicker({ showWeek: true }); 
```

[日期选择器图像](http://cl.ly/image/2j3M053R2c1h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T06:22:25.100

@Sam / @believe 你们是对的。甚至我也在尝试。但是我使用的 jQuery UI 版本 ( `jquery-ui-1.7.3.custom.min.js`) 有点旧。

下载了最新和稳定的版本`jquery-ui-1.8.23.custom.min.js`现在它就像魅力一样工作。感谢您的回复。

# asp.net - RAD Editor Telerik 控制图像管理器，和 asp.net 按钮问题（不能一起工作）

> ID：12199021
> 
> 赞同：0
> 
> 时间：2012-08-30T14:20:13.237
> 
> 标签：asp.net, image, button, controls

在写作和讲述它的奇怪事情正在发生在我身上。让我从一开始就告诉你场景，我正在使用带有以下代码的 RAD 编辑器

```
<telerik:radeditor ID="RadEditor1" runat="server" Width="550px" ToolsFile="Tool.xml" skin="WebBlue" height="400" BackColor="LightGray" tabindex="6">
<ImageManager ViewPaths="~/Images/" UploadPaths="~/Images/" DeletePaths="~/Images/" />
<MediaManager ViewPaths="~/Images/" UploadPaths="~/Images/" DeletePaths="~/Images/" />
<FlashManager ViewPaths="~/Images/" UploadPaths="~/Images/" DeletePaths="~/Images/" />
<DocumentManager ViewPaths="~/Images/" UploadPaths="~/Images/" DeletePaths="~/Images/" />
</telerik:radeditor> 
```

现在有了这个我无法用这个图像管理器上传图像，所以我从stackoverflow得到了在web.confing中添加一些脚本的解决方案，如下所示，我得到了用图像管理器上传图像的解决方案。但是我的网站按钮如何停止工作。

```
<system.webServer>
<validation validateIntegratedModeConfiguration="false"/>
<modules>
<add name="RadCompression" type="Telerik.Web.UI.RadCompression"/>
<add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule, Telerik.Web.UI" preCondition="managedHandler"/> 
</modules>
<handlers>
<add name="Telerik.Web.UI.SpellCheckHandler.axd_*" path="Telerik.Web.UI.SpellCheckHandler.axd" verb="*" type="Telerik.Web.UI.SpellCheckHandler, Telerik.Web.UI, Culture=neutral, PublicKeyToken=121fae78165ba3d4" preCondition="integratedMode"/>
<add name="Telerik.Web.UI.DialogHandler.aspx_*" path="Telerik.Web.UI.DialogHandler.aspx" verb="*" type="Telerik.Web.UI.DialogHandler, Telerik.Web.UI, Culture=neutral, PublicKeyToken=121fae78165ba3d4" preCondition="integratedMode"/>         <add name="Telerik.RadUploadProgressHandler.ashx_*" path="Telerik.RadUploadProgressHandler.ashx" verb="*" type="Telerik.Web.UI.Upload.RadUploadProgressHandler, Telerik.Web.UI"preCondition="integratedMode"/>
<add name="Telerik.Web.UI.WebResource.axd_*" path="Telerik.Web.UI.WebResource.axd" verb="*" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" preCondition="integratedMode"/></handlers>
</system.webServer> 
```

所以请让我知道这是怎么发生的，我必须为此做什么或任何替代解决方案才能工作图像管理器（仅供参考：使用上面的代码我可以上传图像，但 asp.net 按钮控件停止工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:38:29.190

你的一些处理程序在我看来有点不对劲。这是我的 web.config 中一些 Telerik 控件的处理程序（我不使用他们的文件管理器，我为自定义功能编写了自己的程序）。

```
<validation validateIntegratedModeConfiguration="false"/>
<modules runAllManagedModulesForAllRequests="true"/>
<handlers>
    <add name="Telerik_Web_UI_DialogHandler_aspx" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" />
    <add name="Telerik_Web_UI_WebResource_axd" verb="*" preCondition="integratedMode" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource"/>
</handlers> 
```

你的一些以 _* 结尾的事实看起来不正确。

# java - Java 继承：在编译时验证子类类型

> ID：12199022
> 
> 赞同：1
> 
> 时间：2012-08-30T14:20:13.890
> 
> 标签：java, oop, inheritance

说，我有一个简单的类`Fruit`定义如下：

```
public class Fruit {
    int price;

    public boolean isEqualPrice(Fruit object) {
        return (object.price == price);         
    }
} 
```

现在，有几个子类，`Fruit`例如`Apple`，`Orange`等`Mango`。我希望该方法`isEqualPrice`仅在这些子类相同时才有效。例如，`Apple.isEqualPrice(Apple)`将是有效的，但`Apple.isEqualPrice(Orange)`不会是。我应该如何定义参数 `isEqualPrice`来实现这一点？我不想`isEqualPrice`在`Fruit`.

一种可能的解决方案可能是：

```
public boolean isEqualPrice(Fruit object) {
        if(this.getClass() != object.getClass())
            throw new IllegalArgumentException();
        return (object.price == price);         
    } 
```

但是它只会在运行时报告类相同或不同，并且用户无法通过查看方法签名来实现正确的参数类型。有没有办法在编译时检测到这一点？

`NOTE:`我认为`compareTo`method of`enum`就是这样一种方法，因为每个`enum`人都有这种方法，并且一种类型`enum`不能与其他类型相比。但我无法理解它是如何实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:27:23.617

使 Fruit 泛型，或添加 Fruit 的泛型子类并从中派生 Apple、Orange 等。

```
class Fruit {
   ...
}

class FruitGeneric<T extends Fruit> extends Fruit {
    public boolean isEqualPrice (T otherFruit) {
        ...
    }
}

class Apple extends FruitGeneric<Apple> {
   ...
}

class Orange extends FruitGeneric<Orange> {
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:50:30.777

你当然可以：

```
class Fruit <T extends Fruit>{
    int price;
    public boolean isEqualPrice(T object1) {
        return (object1.price == price);
    }
}

class Mango extends Fruit<Mango>{

} 
```

# version-control - 无论如何只克隆一个 mercurial 存储库的最新状态？

> ID：12199029
> 
> 赞同：2
> 
> 时间：2012-08-30T14:20:39.563
> 
> 标签：version-control, mercurial

本质上，我只是在`default`提交时获取存储库的内容。`--depth=1`我认为在概念上与 git相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:33:11.463

我不知道如何克隆存储库并且只获得默认值，但我认为'hg archive'可能接近你想要的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:26:43.940

您最多可以指定要获取内容的提交（从开始到提交#5）。问题是 - Mercurial 将所有提交存储为 DIFF。

这意味着 - 如果您想获得 file1.txt 的最新状态，那么 mercurial 本质上所做的就是获取文件，因为它被添加，并将所有差异（增量）应用到该文件上。

基本上 - 因此，您无法获得存储库的一半。

# javascript - 在javascript中的对象上创建不存在的方法

> ID：12199030
> 
> 赞同：0
> 
> 时间：2012-08-30T14:20:40.253
> 
> 标签：javascript

getter 或 setter 如何作用于 javascript 中的对象？

IE

在python中，如果我在一个对象上调用一个不存在的方法，我可以通过getter和setter拦截调用，然后从getter和setter返回。

我如何在 JavaScript 中执行类似的功能？

[https://github.com/Flotype/now/blob/master/lib/client/now.js](https://github.com/Flotype/now/blob/master/lib/client/now.js)以某种方式实现了这个功能。我不明白这个把戏。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:46:30.057

在 Javascript 中创建相同的功能几乎是不可能的。我最好的猜测是这样的：

```
var getter = function (propName) { 
    if (propName in this) { 
        return this[propName]; 
    } else { 
        return "no prop"; 
    } 
}; 
```

您可以使用以下语法在您喜欢的任何对象上调用此函数：

```
a = { "test": "yes" };
b = {}
console.log(getter.call(a, "test"));
console.log(getter.call(b, "test")); 
```

这不是最好的解决方案，但我认为没有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:39:39.447

1）您可以使用非标准 mozilla [__noSuchMethod__](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/noSuchMethod)属性。

2) EcmaScript 6 Harmony 提出了 Proxy 对象。请参阅[模拟 __noSuchMethod__](http://wiki.ecmascript.org/doku.php?id=harmony%3aproxies&s=proxies%20cormac#simulating_nosuchmethod_doesnotunderstand)

# java - Java - 在 if 语句中更新字符串

> ID：12199032
> 
> 赞同：0
> 
> 时间：2012-08-30T14:20:41.797
> 
> 标签：java

最后的字符串邮政编码稍后在我的代码中用作输入，如您所见，它是硬编码的。我想做的是让它更有活力。所以 boolean pc4 设置为接受 4 位数邮政编码的国家。pc5 是 5 位，pc6 是 6 位。

我想做的是：

```
if(pc4==true){String postcode="1234"} 
```

正如你们已经知道的那样，这在 if 语句之外不起作用。

所以我的问题是：我可以更新 if 语句之外的字符串，还是有更有效的方法可以到达我需要的地方？

```
String state1 = "state";

 boolean pc4 = (bString.equals("Bahrain") || bString.equals("Afghanistan") 
             || bString.equals("Albania") || bString.equals("Armenia") 
             || bString.contains("Australia")
             ... 
             || bString.equals("Tunisia") ||bString.equals("Venezuela") );
 boolean pc5 = (bString.equals("Alan Islands") || bString.equals("Algeria")
             || bString.equals("American Samoa") || bString.equals("Wallis and Futuna") 
             ...
             || bString.equals("Zambia"));
 boolean pc6 = (bString.equals("Belarus") || bString.equals("China")
             || bString.equals("Colombia") || bString.equals("India")
             ...
             || bString.equals("Turkmenistan") || bString.equals("Viet Nam"));

 String postcode = "123456"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:21:46.383

在块外定义`postcode`并根据条件为其赋值。

如下所示：

```
 String postcode="";

 if(pc4){postcode="1234"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:26:13.420

虽然与您的原始问题相切，而不是使用巨大的单行 if 语句，但使用 a`Map`来定义邮政编码的长度可能更容易。

```
HashMap<String, Integer> countries = new HashMap<>();
countries.add("Bahrain", 4);

switch(countries.get(myCountry)) {
  case 4:
    // Stuff!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:24:55.050

使用三元条件运算符。

```
String postcode = pc4 ? "1234" : ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:23:29.827

```
String postcode = null; // or ""
if (pc4)
  postcode = "1234";
else if (pc5)
  postcode = "12345";
else if (pc6)
  postcode = "123456";
else
  postcode = "default value"; 
```

# mysql - 获取有多少用户回复了调查

> ID：12199035
> 
> 赞同：2
> 
> 时间：2012-08-30T14:20:49.370
> 
> 标签：mysql, sql, count, group-by

我需要知道有多少用户回复了调查。但是他们可以响应一次或多次（在我的情况下，最多两次）。

所以我有两张桌子：`fs_users`和`fs_surveys`。

```
fs_users:
  ID  | Name
  1     David
  2     John

fs_surveys:
  ID  | ID_User | Selected_Answer
  1     1         A
  2     1         C
  3     2         A 
```

如果我*直观地*计算有多少用户回复了调查，我可以计算`2`（大卫和约翰）。通过查询，我可以知道这些响应的民族是谁。喜欢：

```
SELECT 
  fs_users.ID, 
  fs_users.Name
FROM fs_users

INNER JOIN fs_surveys
  ON fs_surveys.ID_User = fs_users.ID

GROUP BY 
  fs_users.ID 
```

它基本上将返回与`fs_users`上面表示的数据相同的数据。所以，直到这里我都很好。问题是我需要`COUNT()` *多少用户*，而不是*谁用户*。

如果我只是将其更改为`SELECT`：

```
SELECT
  COUNT(*)
... 
```

我会收到这个：

```
result:
  COUNT(*) | INSTEAD_OF
  3          2 
```

那么，我该如何解决这个问题呢？再见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:22:16.420

```
SELECT COUNT(DISTINCT ID_User) FROM fs_surveys 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/25762/1/0)上查看。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T14:23:32.000

使用`COUNT(distinct columnName)`而不是`COUNT(*)`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T14:23:05.873

只需使用`DISTINCT`：

```
SELECT COUNT(DISTINCT ID) FROM fs_users; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T14:25:41.390

只需使用[COUNT(DISTINCT fs_users.ID)](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count-distinct)来计算唯一值。

# animation - 如何在不损失质量的情况下导出为 swf？

> ID：12199040
> 
> 赞同：0
> 
> 时间：2012-08-30T14:21:00.427
> 
> 标签：animation, flash

我在 Flash CS5 中创建了一个动画，当我将它导出到 swf 时，我的质量损失很严重。你知道如何解决吗？如何优化质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:39:54.710

更多细节会有所帮助，但这是我最好的猜测。动画是在 Flash 中原生构建的，您将其发布为 .swf 文件，对吗？这本身不应该导致任何质量损失，但是 SWF 播放器有一个您可能设置得很低的“质量”设置。如何检查和更改此设置取决于您使用的播放器。

# performance - 替换现有 VAO 中的 VBO

> ID：12199042
> 
> 赞同：8
> 
> 时间：2012-08-30T14:21:05.030
> 
> 标签：performance, opengl, vbo, opengl-3

我有一个带有 VBO 的 VAO，用于各种顶点属性：顶点位置、顶点法线和元素数组 VBO（所有 STATIC_DRAW），这样渲染一个实例只需要：

```
glBindVertexArray(vao);
glDrawElements(GL_TRIANGLES, <count>, <type>, 0); 
```

但是，我想为每个实例绘制具有不同顶点纹理（s，t）坐标的对象的多个实例（我仅限于 OS X GL 3.2 核心配置文件 BTW）。texcoord VBO 使用 STREAM_DRAW 提示（尽管我可能会使用 DYNAMIC_DRAW）。

绑定VAO，绑定当前的texcoord VBO，通过设置属性指针`glVertexAttribPointer`，用不同的纹理坐标完成VAO`glBindVertexArray(0)`并绘制新实例是否更有效？或者更新 VAO 的成本是否使这成为一种糟糕的方法？`glBufferSubData`在绑定的 VAO 中更新 texcoord VBO 怎么样？

在对单独的方法进行基准测试之前，我真的很感激一些反馈，因为*错误*的选择会导致重大的重构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:47:33.803

只需创建多个 VAO。顶点数组对象是轻量级的，它们用于一次设置顶点数组...

一个VBO可以绑定多个VAO，让你的生活更轻松快捷。

如果您在某个时候想要另一个属性配置，请丢弃旧的 VAO 并创建一个新的。

# sql - 在 SQL/codeigniter 中删除多行

> ID：12199047
> 
> 赞同：0
> 
> 时间：2012-08-30T14:21:25.123
> 
> 标签：sql, codeigniter

这似乎不起作用：

```
 /// delete emails first
         $this->db->where('DateSent', 'DateSent!=NULL');
        $this->db->delete('Emails'); 
```

我想我需要使用循环。不知道该怎么做。任何人都可以帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:30:31.207

如果您要查看非常有用的[CodeIgniter](http://codeigniter.com/user_guide/database/active_record.html#select)用户指南，您会看到运算符应该作为第一个参数的一部分而不是第二个参数包含在内。这应该解决它：

```
$this->db->where('DateSent !=', 'NULL');
$this->db->delete('Emails'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:30:23.647

尝试这个：

```
$this->db->query('
    DELETE FROM `Emails`
    WHERE id NOT IN (
        SELECT id
        FROM (
            SELECT id
            FROM `Emails`
            WHERE `Emails`.`DateSent` = NULL
        ) foo
    );
); 
```

从[SQL 查询中获取的查询：从表中删除除最新 N 之外的所有记录？](https://stackoverflow.com/questions/578867/sql-query-delete-all-records-from-the-table-except-latest-n)然后修改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:37:14.160

首先，您需要将选定的值存储到一个数组中，比如“$checked”

```
$checked = implode(',',$checked);     //then it looks array('id1','id2','id3',..); 
```

然后你可以删除为

```
$this->db->where("iUserId in",$checked);

$this->db->delete('my_table'); 
```

就是这样。它对我有用。我希望它对你有用。如果有用就接受

# facebook - Facebook Graph api墙贴不是链接

> ID：12199048
> 
> 赞同：3
> 
> 时间：2012-08-30T14:21:30.013
> 
> 标签：facebook, facebook-graph-api, feed, facebook-wall

使用图形 api，我可以发布到用户墙：

```
 [[NSMutableDictionary alloc] initWithObjectsAndKeys:
  @"https://developers.facebook.com/ios", @"link",
  @"http://www.xmaselves.co.uk/wp-content/uploads/2012/05/gym.png", @"picture",
 [self getTitleText], @"name",
 [self getCaptionText], @"caption",
 [self getFbFormattedDescription], @"description",
 _comment.text, @"message",
 nil];

[FBRequestConnection
 startWithGraphPath:@"me/feed"
 parameters:postParams
 HTTPMethod:@"POST" .... etc 
```

问题是这似乎只是作为链接发布在墙上： ![在此处输入图像描述](../Images/54b0d8e50f2bf95a26238881bcb819e2.png) 我希望帖子正常显示，而不是“共享链接”帖子。如何使用图形 api 实现这一点。

**编辑**

1.  删除链接参数并确保指定了@message 确实会发布到墙上。
2.  如果您删除链接参数并且未指定消息，则不会发布任何内容并且不会返回错误！
3.  在屏幕截图中，“asdadasd”将是用户输入的消息，但这是可选的！因此，如果他们不输入消息，则不会显示该帖子！事实上，“饲料对话”api 也表现出同样的行为。

所以所有帖子都需要留言吗？或作为链接发布？这似乎不对。

# javascript - 使用下划线将两个键和值数组合并到一个对象

> ID：12199051
> 
> 赞同：30
> 
> 时间：2012-08-30T14:21:42.533
> 
> 标签：javascript, underscore.js

给定两个数组，一个带键，一个带值：

```
keys = ['foo', 'bar', 'qux']
values = ['1', '2', '3'] 
```

您将如何***仅使用 underscore.js 方法***将其转换为对象？

```
{
   foo: '1', 
   bar: '2',
   qux: '3'
} 
```

我不是在寻找一个简单的 javascript 答案（[像这样](https://stackoverflow.com/questions/6921962/merge-two-arrays-keys-and-values-into-an-object)）。

我问这是个人练习。我认为 underscore 有一种方法可以做到这一点，只是发现它没有，这让我想知道它是否可以做到。我有一个答案，但它涉及相当多的操作。你会怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-12-03T06:50:34.780

我知道您要求 Underscore.js 解决方案，但您不需要它。这是一个使用 ES7 对象扩展运算符和动态键的 oneliner。

```
keys.reduce((obj, k, i) => ({...obj, [k]: values[i] }), {}) 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-08-12T10:52:30.003

使用 ES6：

```
let numbers = [1, 2, 3],
    names = ["John", "Mike", "Colin"];

let a = Object.assign({}, ...numbers.map((n, index) => ({[n]: names[index]})))

console.log(a); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-18T13:30:27.647

需要用到的是下划线js的[_.object](http://underscorejs.org/#object)方法。如果您的 underscore.js 版本中不存在对象方法，那么您必须手动添加此方法。

```
keys = ['foo', 'bar', 'qux']
values = ['1', '2', '3']
_.object = function(list, values) {
  if (list == null) return {};
  var result = {};
  for (var i = 0, l = list.length; i < l; i++) {
    if (values) {
      result[list[i]] = values[i];
    } else {
      result[list[i][0]] = list[i][1];
    }
  }
  return result;
};

console.log(_.object(keys, values))
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-08-30T14:59:12.513

怎么样：

```
keys = ['foo', 'bar', 'qux'];
values = ['1', '2', '3'];
some = {};
_.each(keys,function(k,i){some[k] = values[i];}); 
```

要完整：另一种方法可能是：

```
 _.zip(['foo', 'bar', 'qux'],['1', '2', '3'])
  .map(function(v){this[v[0]]=v[1];}, some = {}); 
```

作为记录，没有下划线你可以扩展 Array.prototype：

```
Array.prototype.toObj = function(values){
   values = values || this.map(function(v){return true;}); 
   var some;
   this .map(function(v){return [v,this.shift()]},values)
        .map(function(v){this[v[0]]=v[1];},some = {});
   return some; 
};
// usage
var some = ['foo', 'bar', 'qux'].toObj(['1', '2', '3']); 
```

见[jsfiddle](http://jsfiddle.net/KooiInc/DhzqM/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-02-06T20:21:19.837

鉴于这是 4 年的历史，并且 Lodash 或多或少地取代了 Underscore，我想我会使用 Lodash 分享这个解决方案：

```
var keys = ['foo', 'bar', 'qux'];
var values = ['1', '2', '3'];
var obj = _.zipObject( keys, values ); 
```

简单干净。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-01T00:40:31.663

```
var toObj = (ks, vs) => ks.reduce((o,k,i)=> {o[k] = vs[i]; return o;}, {});

var keys=['one', 'two', 'three'],
    values = [1, 2, 3];
var obj = toObj(keys, values);
console.log(obj);
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-07-22T03:20:53.237

最干净的是

```
keys = ['foo', 'bar', 'qux']
values = ['1', '2', '3']

function Arr2object(keys, vals) {
  return keys.reduce(
    function(prev, val, i) {
      prev[val] = vals[i];
      return prev;
    }, {}
  );
}

console.log(Arr2object(keys, values));
```

或者，使用`_.reduce`，但如果你使用下划线，你已经有了`_.object`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-30T14:29:01.317

您正在寻找的是 zip 功能。

[拉链功能](http://underscorejs.org/#zip)

编辑：它不会创建对象，但会通过创建子数组来组合数组

没有功能可以完全满足您的需求。但是您可以使用 zip 的结果来创建您的对象。

```
var arr = _.zip(['foo', 'bar', 'qux'], ['1', '2', '3']);
var i, len = arr.length;
var new_obj = [];

for(i=0; i<len; ++i)
   new_obj[arr[i][0]] = arr[i][1]; 
```

# icloud - 如何在 iCloud 未启用时保存文件，然后启用

> ID：12199055
> 
> 赞同：1
> 
> 时间：2012-08-30T14:21:46.467
> 
> 标签：icloud

根据苹果的 iCloud 文档：

> 每个拥有 Apple ID 的用户都会收到一个免费的 iCloud 帐户，但有些用户可能会选择不为给定设备启用 iCloud。在尝试使用任何其他 iCloud 接口之前，您必须调用 URLForUbiquityContainerIdentifier: 方法来确定是否启用了 iCloud。此方法在启用 iCloud（并且指定的容器目录可用）时返回有效 URL，或者在禁用 iCloud 时返回 nil。

如果 URLForUbiquityContainerIdentifier: 返回 nil，那么我认为您必须保存到用户的文档目录。如果用户在以后启用了 iCloud，你应该怎么做？文档只告诉您在一切按计划进行时该怎么做，但没有提及处理其他任何事情的最佳实践……如果 iCloud 被禁用，icloud 文档的本地副本会被删除，还是被删除权限？从沙箱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:51:04.033

您应该保存启用 iCloud 的状态（即您是否能够从 获得非零结果`URLForUbiquityContainerIdentifier:`），注册情况更改通知等。如果您检测到状态已从关闭变为开启，则解决方案很简单；调用`setUbiquitous:itemAtURL:destinationURL:error:`将文件从您的世界复制到无处不在的世界（毕竟它只是一个文件夹）。

文档中很好地涵盖了这种情况：

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html)

不幸的是，如果您检测到相反的情况（用户已关闭 iCloud），文件将丢失并且您无法检索它，因为假设`URLForUbiquityContainerIdentifier:`现在返回 nil。但它仍然在云端。我认为您可以提供界面来要求用户重新打开 iCloud，并提供更多界面来让用户请求将文件移回非普遍存在的世界。

# shell - 如何检查一个 URL 是否与 shell 一起存在并且可能卷曲？

> ID：12199059
> 
> 赞同：90
> 
> 时间：2012-08-30T14:22:00.533
> 
> 标签：shell, curl

我正在寻找一个简单的 shell (+curl) 检查，如果 URL 存在（返回 200）或不存在，它将评估为真或假。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-08-30T14:24:33.077

使用`--fail`将使失败请求的退出状态非零。使用`--head`将避免下载文件内容，因为我们不需要它来进行此检查。使用`--silent`将避免检查本身发出状态或错误。

```
if curl --output /dev/null --silent --head --fail "$url"; then
  echo "URL exists: $url"
else
  echo "URL does not exist: $url"
fi 
```

* * *

如果您的服务器拒绝 HEAD 请求，另一种方法是仅请求文件的第一个字节：

```
if curl --output /dev/null --silent --fail -r 0-0 "$url"; then 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-04-24T22:52:21.193

我发现 wget 是比 CURL 更好的工具；要记住的选项更少，您实际上可以在 bash 中检查它的真值，看看它是否默认成功。

```
if wget --spider http://google.com 2>/dev/null; then
  echo "File exists"
else
  echo "File does not exist"
fi 
```

该`--spider`选项使 wget 只检查文件而不是下载它，并使`2> /dev/null`wget 的 stderr 输出静音。

# c# - 数据层的 ExecuteNonQuery 连接错误

> ID：12199060
> 
> 赞同：0
> 
> 时间：2012-08-30T14:22:02.177
> 
> 标签：c#, enterprise-library, data-layer

目前此测试窗口表单应用程序存在问题。构造函数用于将数据添加到 datagridview。但是，当我单击该按钮时，它无法添加任何内容来运行 sql 命令，并出现错误 ExecuteNonQuery: Connection property has not been initialized。下面是我的代码。我发现了类似问题的问题，但他们没有通过在代码中的多个点调用数据库来解决这个问题。

```
namespace TestApplication
{
public partial class Form1 : Form
{
    public SqlDatabase db;
    string myConnectionString = ConfigurationManager.ConnectionStrings["DF06Data_Tools"].ToString();
    public Form1()
    {
        InitializeComponent();
        db = new SqlDatabase(myConnectionString);
        UpdateGrid();

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    public void UpdateGrid()
    {
        string sql = "SELECT *  FROM [Data_Tools].[dbo].[TestTable]";
        DbCommand cmd = db.GetSqlStringCommand(sql);
        DataSet TableDataSet = db.ExecuteDataSet(cmd);
        dataGridView1.DataSource = TableDataSet.Tables[0];
        cmd.Dispose();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string sql = "INSERT INTO [Data_Tools].[dbo].[TESTTABLE] (name, id) VALUES('bob', '8')";
        DbCommand cmd = db.GetSqlStringCommand(sql);
        cmd.ExecuteNonQuery();
        UpdateGrid();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:30:15.780

您需要在调用 ExecuteNonQuery 之前打开您的连接。构造函数中的调用打开连接，发出命令，然后为您关闭连接。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ff648933.aspx)：

> 对 ExecuteDataSet 的调用打开一个连接，填充一个 DataSet，并在返回结果之前关闭连接。

同样来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)：

```
private static void CreateCommand(string queryString,
    string connectionString)
{
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(queryString, connection);
        command.Connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

# asp.net-mvc-4 - 将依赖注入到 AuthorizationAttribute MVC4 Web API RC

> ID：12199066
> 
> 赞同：2
> 
> 时间：2012-08-30T14:22:10.740
> 
> 标签：asp.net-mvc-4, ninject, asp.net-web-api

我有一个自定义授权属性，仅在某些操作中需要，它检查请求标头中是否有自定义令牌。在数据库中检查令牌。检查数据库需要访问我想通过构造函数注入的服务。

我读到这篇文章的方法可以做到（[here](https://stackoverflow.com/questions/5572257/custom-authorization-mvc-3-and-ninject-ioc/5572752#5572752)、[here](https://stackoverflow.com/questions/6193414/dependency-injection-with-ninject-and-filter-attribute-for-asp-net-mvc/6194159#6194159)和[here](https://stackoverflow.com/questions/4839293/asp-net-mvc3-actionfilterattribute-injection/8317248#8317248)）是通过一个没有构造函数的过滤器并像这样注入依赖的过滤器：

```
kernel.BindFilter<MyAuthorizeFilter>(FilterScope.Controller, 0).WhenControllerHas<MyAuthorizeAttribute>(); 
```

但是，我无法使用 BindFilter 方法，因为我已经按照[此处](http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api)所述设置了 Ninject 。这是使用**Ninject.Web.Common**而不是**Ninject MVC3**，因为我读到 Ninject MVC3 不适用于 MVC4 RC。我还能怎么做呢？

我还读到我可以添加到 GlobalFilters.Filters - 但是我不希望它出现在每个操作中。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:23:49.317

我不完全确定我看到你是如何设置你的应用程序的，但我的经验是，如果你想要一个*WebApi*控制器的过滤器，你需要将它添加`HttpFilterCollection`到`GlobalConfiguration.Filters`. 这是一组**不同于**MVC 使用的过滤器（通过`GlobalFilterCollection`）。

# ruby-on-rails - 回形针：与邮箱 gem 集成

> ID：12199071
> 
> 赞同：4
> 
> 时间：2012-08-30T14:22:21.703
> 
> 标签：ruby-on-rails, ruby, paperclip, attachment

我正在使用[mailboxer](https://github.com/ging/mailboxer) gem，但我不知道如何将它与Paperclip（消息类）一起使用。

将 Paperclip 与 User 类一起使用是：

```
class User < ActiveRecord::Base
  has_attached_file :picture
end 
```

如何将 has_attached_file 添加到 Message 类（模型中没有 message.rb）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:36:16.243

两种解决方案：

*   使用由载波制作的内置附件（[来源](http://github.com/ging/mailboxer/blob/master/app/models/message.rb#L13)）

*   猴子补丁`Message`模型：

在初始化程序中执行：

```
Message.class_eval do

  #your paperclip code goes here

end 
```

不要忘记[迁移](http://github.com/ging/mailboxer/blob/master/db/migrate/%E2%80%A6)！

# ios - iOS 字典导致内存泄漏

> ID：12199075
> 
> 赞同：1
> 
> 时间：2012-08-30T14:22:28.797
> 
> 标签：ios, memory-leaks

为什么 Dictionary 的以下实现会导致内存泄漏？请参阅下面的屏幕截图。几乎所有的泄漏都来自这种方法。

```
- (void) setLocation:(NSString *) location:(NSString *) turnPage {
    NSLog(@"Start setLocation");
    //---get the path to the property list file---
    NSString *localPlistFileNameConf = [[self documentsPath] stringByAppendingPathComponent:@"Config.plist"];
    NSMutableDictionary *copyOfDict;
    //---if the property list file can be found---
    if ([[NSFileManager defaultManager] fileExistsAtPath:localPlistFileNameConf]) {
        //---load the content of the property list file into a NSDictionary object---
        NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:localPlistFileNameConf];
        //---make a mutable copy of the dictionary object---
        copyOfDict = [dict mutableCopy];
        [dict release];
    }
    else {
        //---load the property list from the Resources folder---
        NSString *pListPath = [[NSBundle mainBundle] pathForResource:@"Config" ofType:@"plist"];
        NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:pListPath];
        //---make a mutable copy of the dictionary object---
        copyOfDict = [dict mutableCopy];
        [dict release];
    }
    location = [self checkLocationValidity:location:turnPage];
    [copyOfDict setValue:location forKey:@"Location"];
    [self writeConfigToFile:copyOfDict];
    NSLog(@"End setLocation");
} 
```

![在此处输入图像描述](../Images/e8f135f3e700aa98ee36c5fe54a10285.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:26:53.167

你不会`copyOfDict`在任何地方释放。您拥有使用以 开头的方法创建的任何对象`copy`，因此您需要释放这些对象。`NSDictionary`出于效率原因，由于类集群中的一些技巧，它可能将源误报为原始字典。尝试对您的代码运行分析，它应该向您指出这些事情。

# excel - 当第一行为空白时，使用 GetOleDbSchemaTable 获取 Excel 列名

> ID：12199076
> 
> 赞同：0
> 
> 时间：2012-08-30T14:22:36.300
> 
> 标签：excel

我编写了一个读取 Excel 文件并将数据导入 SQL Server 的 C# 应用程序。文件的第一行包含列名。我一直在使用 GetOleDbSchemaTable 来获取列名。这工作得很好。

我现在遇到了一些 Excel 文件，其中第一行是空白的，第二行包含列名。我不想在使用它们之前手动编辑文件以删除空白行。

GetOleDbSchemaTable 有没有办法跳过第一行并查看第二行的列名？还有其他方法可以处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:51:44.487

巧合的是，我将以下评论放在不同的问题中

> 据我记得表格的标题必须在第一行，[..]

我相信它仍然有效 - 我记得我曾经遇到过这个问题，最后我通过代码删除了有问题的行。

# java - 通过查询查找已删除的行数

> ID：12199078
> 
> 赞同：2
> 
> 时间：2012-08-30T14:22:38.503
> 
> 标签：java, mysql, sql-delete

早些时候，我有 2000 条记录。

在我触发以下查询后，我将拥有 1500 条记录。

```
DELETE FROM logInfo WHERE datediff(now(), whatTime) >= 2 
```

是否有任何查询可以告诉我上述记录删除了多少条记录？

我知道我可以在删除命令之前使用下面的查询，但是我只是好奇删除后是否有其他方法可以找到。

```
SELECT COUNT(*) FROM logInfo WHERE datediff(now(), whatTime) >= 2 
```

**我在 JAVA 或 MYSQL 中需要这个。**

我知道在 php 中它会是`mysql_affected_rows()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:24:08.687

PreparedStatement.executeUpdate [()](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)返回受影响的行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:24:16.710

当您执行查询时，此查询的返回值将是影响的行数（布尔值）。这只不过是删除了多少行。

`DELETE FROM logInfo WHERE datediff(now(), whatTime) >= 2`

# android - 获取用户当前位置时，应用程序以“应用程序已意外停止”关闭

> ID：12199087
> 
> 赞同：-1
> 
> 时间：2012-08-30T14:23:05.667
> 
> 标签：android, android-mapview

我正在使用此代码查找当前位置。

我的叠加层工作正常，但我无法获得当前的经度和纬度。获取用户当前位置时，应用程序关闭并显示“应用程序已意外停止”消息。

我已经研究了一些关于查找位置的教程，但我无法解决它。

```
package google.com;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

import java.util.*;
import com.google.android.maps.Overlay;
import android.location.*;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.view.Menu;
import android.view.MenuItem;

public class nandyog extends MapActivity implements LocationListener{

      LocationManager locManager;   
      Location location;
      double lat;
      double lng;

     Boolean network_enabled;
     Boolean gps_enabled;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        MapView mapview = (MapView) findViewById(R.id.mapview);
        mapview.setBuiltInZoomControls(true);
        List<Overlay> mapOverlays = mapview.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.iconr);
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);
        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        Location loc = locManager.getLastKnownLocation(locManager.NETWORK_PROVIDER);

        lat = loc.getLatitude();
        lng = loc.getLongitude();
                GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
        OverlayItem overlayitem = new OverlayItem(point, "Current Location","LAL-DARWAJA");

        itemizedoverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedoverlay);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_map, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

        lat = location.getLatitude();
        lng = location.getLongitude();

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
}
/*
final class GPoint extends GeoPoint {
    public GPoint(double latitude, double longitude) {
        super((int) (latitude * 1E6), (int) (longitude * 1E6));
    }
}
*/ 
```

我的清单文件在下面

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="google.com"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
      >
        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name=".nandyog"
            android:label="@string/title_activity_map"
              android:theme="@android:style/Theme.NoTitleBar"  
            >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

Logcat 错误是...

暂停 4ms+32ms 08-31 18:56:09.355: I/Process(368): 发送信号。PID：368 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:13:55.893

您是否尝试从中获取布尔值：

```
network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER); 
```

你应该`NETWORK_PROVIDER`像这样以静态方式访问

```
Location loc = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

不是

```
Location loc = locManager.getLastKnownLocation(locManager.NETWORK_PROVIDER); 
```

# java - Adding all classes

> ID：12199095
> 
> 赞同：0
> 
> 时间：2012-08-30T14:23:27.380
> 
> 标签：java, jboss-arquillian

I would like to migrate a legacy component test to Arquillian. The test has its classpath contructed via Ivy. After having read the documentation it is not clear to me what to do if I do not want to use Arquillian's

```
@Deployment
public static JavaArchive createDeployment()
{
    return ShrinkWrap.create(JavaArchive.class).addClass(..);
} 
```

solution but only rely on the actual runtime classpath as a whole.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:44:04.527

If you have it available as an arbitrary JAR you can simply use such construct

```
ShrinkWrap.createFromZipFile(archiveType, file); 
```

Or you can also resolve it using ShrinkWrap Maven Resolver:

```
MavenDependencyResolver resolver = DependencyResolvers.use(MavenDependencyResolver.class)                                                                    
   .loadMetadataFromPom("pom.xml")
   .goOffline();

Archive<?> archive = ShrinkWrap.createFromZipFile(JavaArchive.class, resolver.artifacts("groupId:artifactId:version").resolveAsFiles()[0]); 
```

# java - Quaqua Theme 占用大量内存

> ID：12199098
> 
> 赞同：0
> 
> 时间：2012-08-30T14:23:30.033
> 
> 标签：java, swing, desktop-application, quaqua

与 Swing 的其他主题（Sysnthetica & Substance 等）相比，QuaQua 主题占用更多内存。有时，当 JFrame 在屏幕上移动时，它的某些部分也会保留。这个问题只影响到内存条。我想知道是否有任何方法可以减少此内存问题并使应用程序快速运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:54:00.430

[Quaqua](http://www.randelshofer.ch/quaqua/)提供两个版本。如果较小的版本不能直接满足您的要求，它可能会建议如何构建自定义版本。

# html - 位置：绝对右下对齐

> ID：12199104
> 
> 赞同：0
> 
> 时间：2012-08-30T14:23:38.023
> 
> 标签：html, css

我正在尝试将我的 40px40px 图像与右下角对齐。我已经尝试过了，效果很好，但是如果我使用另一个背面图像，它不适合右下角。我怎样才能避免这个问题？

```
<div style="width:179px;margin-right:9px;padding-bottom:10px;background-color:white;border:1px solid #c9d2d6;padding:4px;padding-bottom:7px;border-radius:4px;position:relative">
    <img src="http://media-cache-ec4.pinterest.com/upload/212443307392484250_XX0wNZSy_b.jpg" style="width:179px;" \>
    <div style="position:absolute;z-index:5;top:73%;left:75%;width:40px;height:40px;border:1px solid #333333;">
        <img width=40 src="http://media-cache-ec4.pinterest.com/avatars/baduizm1974-1346279934.jpg" \>
    </div>
    <div style="border-radius:6px;width:179px;border-top:0px;position:relative;background-color:white;">
        <div style="text-align:left;padding-left:6px;padding-right:5px;padding-top:3px;">Fragments by textile artist Lorenzo Nanni (2001) </div>
    </div>
</div> 
```

![](../Images/62f91d1c2081fe23667948797d88804e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:31:04.053

***更新***：

也就是说，您应该混合使用 CSS 和 HTML：

HTML：

```
<div class="container">
    <div class="picture-container">
        <img src="http://media-cache-ec4.pinterest.com/upload/212443307392484250_XX0wNZSy_b.jpg" class="background-picture" \>
        <div class="avatar">
            <img src="http://media-cache-ec4.pinterest.com/avatars/baduizm1974-1346279934.jpg" \>
        </div>
    </div>
    <div class="container-text">
        <div>Fragments by textile artist Lorenzo Nanni (2001)<br />More text</br />Goes here</div>
    </div>
</div>​ 
```

CSS：

```
.container {
    width: 179px;
    margin-right: 9px;
    padding-bottom: 10px;
    background-color: white;
    border: 1px solid #c9d2d6;
    padding: 4px;
    padding-bottom: 7px;
    border-radius: 4px;
    position: relative;
}
.container .picture-container {
    position: relative;
    min-height: 60px;
}
.container .background-picture {
    width: 179px;
}
.container .avatar {
    position: absolute;
    z-index: 5;
    bottom: 10px;
    right: 5px;
    width: 40px;
    height: 40px;
    border: 1px solid #333333;
}
.container .avatar img {
    width: 40px;
}
.container .container-text {
    border-radius: 6px;
    width: 179px;
    border-top: 0px;
    position: relative;
    background-color: white;
}
.container .container-text div {
    text-align: left;
    padding-left: 6px;
    padding-right: 5px;
    padding-top: 3px;
}​ 
```

这也解决了下面评论中的问题。

[**演示**](http://jsfiddle.net/Ka4r4/2/)

* * *

***旧帖子**，这解释了为什么您首先遇到问题并且不考虑更高的文本：*

在

```
<div style="position:absolute;z-index:5;top:73%;left:75%;width:40px;height:40px;border:1px solid #333333;">
    <img width=40 src="http://media-cache-ec4.pinterest.com/avatars/baduizm1974-1346279934.jpg" \>
</div> 
```

代替

`top:73%;left:75%;`然后像这样`bottom`使用：`right``bottom: 60px;right: 10px;`

* * *

完整示例：

```
<div style="width:179px;margin-right:9px;padding-bottom:10px;background-color:white;border:1px solid #c9d2d6;padding:4px;padding-bottom:7px;border-radius:4px;position:relative">
    <img src="http://media-cache-ec4.pinterest.com/upload/212443307392484250_XX0wNZSy_b.jpg" style="width:179px;" \>
    <div style="position:absolute;z-index:5;bottom: 60px;right: 10px;width:40px;height:40px;border:1px solid #333333;">
        <img width=40 src="http://media-cache-ec4.pinterest.com/avatars/baduizm1974-1346279934.jpg" \>
    </div>
    <div style="border-radius:6px;width:179px;border-top:0px;position:relative;background-color:white;">
        <div style="text-align:left;padding-left:6px;padding-right:5px;padding-top:3px;">Fragments by textile artist Lorenzo Nanni (2001) </div>
    </div>
</div>​ 
```

[**演示**](http://jsfiddle.net/d9KbZ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:35:07.167

你必须把它放在一个容器里，然后把图像做成一个块以避免它下面的空间。请注意，使用属性 right & bottom 是比 left 和 top 更好的解决方案。

[http://jsfiddle.net/Ka4r4/](http://jsfiddle.net/Ka4r4/)

# php - Google Finance API - 获取货币汇率时遇到问题

> ID：12199105
> 
> 赞同：1
> 
> 时间：2012-08-30T14:23:40.737
> 
> 标签：php, mysql, google-api, currency

我正在使用 Google 的货币 API 来获取汇率并将它们存储在我的数据库中，但我遇到了一些问题。这是我正在使用的：

```
http://www.google.com/ig/calculator?hl=en&q=100USD=?GBP 
```

我总是将 1USD 作为第一个参数传递，并将其交换为我数据库中的所有货币，将结果变量转换为浮点数并存储它。一切正常，直到 API 的结果大于 1000。例如：

`http://www.google.com/ig/calculator?hl=en&q=100USD=?PYG` 这将返回“440 528.634”作为值，问题出在空格分隔符上。当我将它转换为浮点数时，它只存储“440”。在将它转换为浮点数之前，我尝试在其上运行 str_replace() ，但由于某种原因，它不起作用 - 我猜它不是常规空格，而是某种特殊字符。我还尝试用空格分解变量并返回合并的数组字段，但没有骰子。我的想法已经用完了，所以我真的希望有人可以帮助我：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:06:17.713

它是一个不间断的空格字符。如果您将其称为`\xA0`：

```
$result = str_replace("\xA0", "", $result); 
```

注意双引号。使用这些而不是单引号，否则它将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:12:54.123

它没有休息空间。你应该把它称为`\xA0`

```
$x = str_replace("\xA0", "", $x); 
```

应该管用。

# testng - 在 TestNG 运行时获取套件名称

> ID：12199106
> 
> 赞同：5
> 
> 时间：2012-08-30T14:23:42.773
> 
> 标签：testng

如何在测试用例的运行时获取当前正在运行的套件名称？我正在使用下面显示的代码来获取当前套件名称。

监听类：

```
public class SuiteListener implements ISuiteListener{

private static ThreadLocal<ISuite> ACCESS = new ThreadLocal<ISuite>();

public static ISuite getAccess() {
         return ACCESS.get();
    }

@Override
public void onFinish(ISuite suite) {
    ACCESS.set(null);
}

@Override
public void onStart(ISuite arg0) {
    ACCESS.set(arg0);
}

 } 
```

测试类：

```
 @Listeners({ SuiteListener.class })
public class Practise {

    @DataProvider(name = "getXlsPath")
    public Object[][] createData() throws Exception {
        String [][] testCasesPaths=null;
        ISuite suiteListner = SuiteListener.getAccess();
        String runningSuite=suiteListner.getName();
        System.out.println(runningSuite);
        testCasesPaths[0][0]="1.xls";
        testCasesPaths[1][0]="2.xls";
        return testCasesPaths;
    }

    @Test(dataProvider="getXlsPath")
    public void test2(String xlsPath){
        System.out.println(xlsPath);
    }
} 
```

测试xml：

```
<suite name="tables" >
<test name="vendor" >
    <classes>
        <class name="Practise" ></class>
    </classes>
</test> 
```

代码完美运行，直到我`parallel="tests"`在套件中指定属性：

```
<suite name="tables" parallel="tests" > 
```

在这种情况下，我无法获得套件名称——它没有执行。有人可以帮助我获得套件名称吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T16:11:41.960

您可以从 中访问 Xml 文件和当前 Xml 测试`ITestContext`，它们可以注入测试方法中：

```
@Test
public void f(ITestContext ctx) {
  String suiteName = ctx.getCurrentXmlTest().getXmlSuite().getName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-17T06:19:17.513

您可以从 ITestContext 读取它

```
public static String getSuiteName(ITestContext context){
    return context.getCurrentXmlTest().getSuite().getName();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T07:38:24.733

在 onStart() 中，您可以获取当前运行套件的套件名称，您可以使用 loggers 或 sysouts 进行打印。

```
public void onStart(ISuite suite) {
    suite.getName();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-24T02:36:01.710

这也可以用于获取带有测试方法名称的测试类名称。

```
public static String generateFileName (ITestResult result, ITestContext ctx)
{
    String[] suiteName = result.getMethod().toString().split("\\[");

    String filename = "Script_" + suiteName[0] + "_" + dateFormat.format(new Date());
    return filename;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-24T02:21:23.683

```
public static String generateFileName (ITestResult result, ITestContext ctx)
{
    String suiteName = result.getTestClass().getName();
    //String suiteName = ctx.getCurrentXmlTest().getClasses().get(0).getName(); this is removed since the index after class was not getting updated to hold current test name
    String filename = "Script_" + suiteName + "_" + dateFormat.format(new Date());
    return filename;
} 
```

当有多个测试 ng 执行时，这将为您提供当前的类名。`ctx.getCurrentXmlTest().getClasses().get(0).getName()`不会给你当前的类名，因为索引必须更新。

# android - 使用带有 android 客户端的 Tastypie Django 上传文件

> ID：12199110
> 
> 赞同：2
> 
> 时间：2012-08-30T14:23:54.603
> 
> 标签：android, http, tastypie, multipart

我正在 Tastypie 中编写一个 API，我想用多部分 http 请求上传文件。

我在我的 android 文件的异步任务中创建了这个函数：

```
public JSONObject getJSONObejctPOSTFILE(String url,
        List<NameValuePair> params, String key) {

    HttpClient client = HttpClientFactory.getThreadSafeClient();
    HttpPost requestPOST = new HttpPost("http://192.168.0.194/api/v1/newresource/?format=json");
    //the request is definied
    requestPOST.setHeader("Content-type", "multipart/form-data");
    requestPOST.setHeader("Accept", "application/json");

    try {

            MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  
            multipartEntity.addPart("name", new StringBody("new.jpg"));
            multipartEntity.addPart("type", new StringBody("image"));
            File image = new File(DataObjectToNet.getList_objects().get(0).getData());
            FileBody fil = new FileBody(image);
            multipartEntity.addPart("file", new FileBody(image));
            requestPOST.setEntity(multipartEntity);

            client.execute(requestPOST, new PhotoUploadResponseHandler());

        } catch (Exception e) {
           System.out.println(e.toString());
       }
    return null;
} 
```

Tastypie 中的 api 是访问[https://github.com/toastdriven/django-tastypie/issues/42](https://github.com/toastdriven/django-tastypie/issues/42)时产生的代码。问题是当我使用 android 客户端发送文件时，服务器会给我下一个响应：

```
 {"error_message": "Invalid boundary in multipart: None", "traceback": "Traceback (most         recent call last):\n\n  File \"/usr/lib/python2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)\n\n  File \"/usr/lib/python2.7/site-packages/tastypie/resources.py\", line 1161, in post_list\n    deserialized = self.deserialize(request, request.raw_post_data, format=request.META.get('CONTENT_TYPE', 'application/json'))\n\n  File \"/var/www/html/patit_server_app/api/api.py\", line 346, in deserialize\n    data = request.POST.copy()\n\n  File \"/usr/lib/python2.7/site-packages/django/core/handlers/modpython.py\", line 69, in _get_post\n    self._load_post_and_files()\n\n  File \"/usr/lib/python2.7/site-packages/django/http/__init__.py\", line 360, in _load_post_and_files\n    self._post, self._files = self.parse_file_upload(self.META, data)\n\n  File \"/usr/lib/python2.7/site-packages/django/http/__init__.py\", line 319, in parse_file_upload\n    parser = MultiPartParser(META, post_data, self.upload_handlers, self.encoding)\n\n  File \"/usr/lib/python2.7/site-packages/django/http/multipartparser.py\", line 65, in __init__\n    raise MultiPartParserError('Invalid boundary in multipart: %s' % boundary)\n\nMultiPartParserError: Invalid boundary in multipart: None\n"} 
```

这是什么问题？android http请求它是床格式吗？我知道tastepie 将文件上传到我的服务器是一种不好的方式，但我想以这种形式执行此操作。

Tastypie API 是：

```
class MultipartResource(object):
   def deserialize(self, request, data, format=None):
       if not format:
            format = request.META.get('CONTENT_TYPE', 'application/json')

       if format == 'application/x-www-form-urlencoded':
           return request.POST

       if format.startswith('multipart'):
        data = request.POST.copy()
        data.update(request.FILES)

        return data

       return super(MultipartResource, self).deserialize(request, data, format)

class ResourceNewResource(MultipartResource,ModelResource):
    fil = Base64FileField('data')

    class Meta:
        queryset = res.objects.all()
        resource_name = 'newresource'
        serializer = Serializer(formats=['json'])
        allowed_methods = ['get','post']
        always_return_data=True
        authorization = Authorization() 
```

有人可以帮我将android文件上传到tastepie django服务器吗？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:06:22.380

我终于可以上传文件了，但我没有使用tastepie API。我利用 Django 文件上传。我使用的上传文件的代码是：

```
def upload_file(request):

  if request.method == 'POST':

        print "file"
        new_file = Resource(name=request.FILES['file'].name,data=request.FILES['file'],type = "ARCHIVE",create_date=timezone.now(), route=settings.MEDIA_ROOT)

        new_file.save()

        response_data={result":"OK"}
        return HttpResponse(simplejson.dumps(response_data), mimetype='application/json')

  else:
    response_data={"success": "No a post request"}
    return HttpResponse(simplejson.dumps(response_data), mimetype='application/json') 
```

# unix - Cron Job - 删除旧文件，但保留当月第一天的文件

> ID：12199111
> 
> 赞同：2
> 
> 时间：2012-08-30T14:23:55.473
> 
> 标签：unix, cron

我目前正在运行成功的 mysql 备份，并且在某些站点上，我正在使用此命令删除超过 7 天的文件

```
find  /path/to/file -mtime +7 -exec rm -f {} \; 
```

我想做的，因为我是偏执狂并且仍然想要一些存档信息，是删除超过 31 天的文件，但至少保留上个月的一个文件，也许保留 1 日创建的任何文件本月的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T04:23:14.827

您可以使用以下命令创建文件：

```
SRC_DIR=/home/USB-Drive
DATE=$(/bin/date "+%4Y%2m%2d%2H%2M")
TIME_STAMP=$(/bin/date --date 'now' +%s)
TIME_CAL=$[$TIME_STAMP-2592000+25200] #last day, 25200 is my GMT+7hour 
TIME_LAST=$(/bin/date --date "1970-01-01 $TIME_CAL sec" "+%4Y%2m%2d%2H%2M")
/bin/touch -t ${TIME_LAST} /tmp/lastmonth
/usr/bin/find -P -H ${SRC_DIR}  ! -newer /tmp/lastmonth -type d -exec rm -r {} \; 
```

您可以根据要删除的内容修改最后一个命令，在这种情况下，我想删除 SRC_DIR 中的子文件夹。超过 1 个月前的“时间属性”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:34:51.300

您还可以使用 xargs 编写一个脚本来包含这样的内容：

查找 /path/to/files -mtime +7| xargs -i rm {};

然后将脚本添加到您的 cron 作业中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:34:28.397

grep 几乎是对的，它只有一个空格太多。这有效（至少对我来说，我使用 Debian）：

```
rm `find /path/to/file -type f -mtime +7 -exec ls -l {} + | grep -v ' [A-S][a-z][a-z]  1 ' | sed -e 's:.* /path/to/file:/path/to/file:g'` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T22:25:53.677

有点难看，但你可以尝试解析输出`ls -l`

```
rm `find /path/to/file -type f -mtime +7 -exec ls -l {} + | grep -v ' [A-S][a-z][a-z]  1  ' | sed -e 's:.* /path/to/file:/path/to/file:g'` 
```

或者编写一个脚本来获取列表，然后一次运行`rm`一个。

# facebook - FQL vs Graph API - 哪个更适合基本过滤？

> ID：12199113
> 
> 赞同：0
> 
> 时间：2012-08-30T14:24:02.987
> 
> 标签：facebook, performance, facebook-graph-api, facebook-fql

这是后续行动：[如何在 Facebook 图形 api 中过滤男性和女性 id](https://stackoverflow.com/questions/12019850/how-to-filter-male-and-female-id-in-facebook-graph-api/)

假设手头的任务是找到用户的 10 个女性朋友。您可以使用 FQL 或 Graph API 执行此操作（请参阅原始问题）。

直觉上，我预计 FQL 会更快，因为 Facebook 会为您处理计算。然而，这一定是真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:49:27.187

我刚刚使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)运行了一个快速测试 (n>=3) ，在 API 调用和下面的 FQL 之间交替进行。

此 API 调用：

```
/me/friends?fields=name,gender 
```

返回数据从 300ms 到 6223ms，avg = 1780ms。

此 FQL 调用：

```
SELECT name, sex FROM user WHERE uid IN 
  (SELECT uid2 FROM friend WHERE uid1 = me()) AND sex = "male" LIMIT 10 
```

平均 457 毫秒到 8075 毫秒内返回数据。3690 毫秒。

因此，API 调用比 FQL 调用快 20-30%，尽管数据不匹配，所以在任何给定时间 API 调用是否会比 FQL 调用执行得更快，这真是一个废话。

通过 API 调用，您仍然必须处理最终过滤结果以找到 10 个您正在寻找的性别朋友。使用 FQL，您可以立即遍历结果集并显示它们。

对于它的价值，如果您将 FQL 调用与从一`AND`开始就删除的所有内容进行比较，那么您将获得与 API 相似的数据，这很容易击败 API。数据在 320 到 571 毫秒内返回，平均。= 390 毫秒。

# wpf - 可编辑的组合框覆盖我的上下文菜单

> ID：12199114
> 
> 赞同：1
> 
> 时间：2012-08-30T14:24:05.550
> 
> 标签：wpf, combobox, contextmenu

`ComboBox`我用 XAML实现了一个可编辑的，它应该显示我自己的上下文菜单：

```
<ComboBox IsEditable="True"
          ContextMenu="{StaticResource contextMenu}"
          ContextMenuClosing="contextClosing">
    <ComboBoxItem Content="Item1" />
    <ComboBoxItem Content="Item2" />
</ComboBox> 
```

但不是显示我的上下文菜单，而是显示编辑上下文菜单（带有剪切、复制和粘贴）。

有没有办法覆盖可编辑的上下文菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:43:30.023

必须加载可编辑部分的文本框以覆盖标准上下文菜单：

```
<ComboBox IsEditable="True" ContextMenuService.ShowOnDisabled="True" 
     Name="combobox" Loaded="combobox_Loaded">
     <ComboBox.ContextMenu>
         <ContextMenu>
            <MenuItem Header="test"></MenuItem>
         </ContextMenu>
     </ComboBox.ContextMenu>
     <ComboBoxItem Content="Item1"></ComboBoxItem>
     <ComboBoxItem Content="Item2"></ComboBoxItem>
</ComboBox>  

 private void combobox_Loaded(object sender, RoutedEventArgs e)
 {
   (VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(combobox, 0), 2) as TextBox).ContextMenu = combobox.ContextMenu;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-16T19:27:49.857

2021年，这仍然是一个问题！dontcare 的出色观察，确实必须加载组合框才能修改其中的一部分。但是，您可以访问文本框部分，而不是导航可视化树；

```
private TextBox cmbTextBox 
{ 
   get { return GetTemplateChild("PART_EditableTextBox") as TextBox; }
} 
```

# python - Python：列出目录及其子目录中的所有文件名，然后将结果打印到 txt 文件中

> ID：12199120
> 
> 赞同：21
> 
> 时间：2012-08-30T14:24:23.287
> 
> 标签：python, python-2.7

我的问题如下。我想列出我的目录及其子目录中的所有文件名，并将该输出打印在 txt 文件中。现在这是我到目前为止的代码：

```
import os

for path, subdirs, files in os.walk('\Users\user\Desktop\Test_Py'):
   for filename in files:
     f = os.path.join(path, filename)
     a = open("output.txt", "w")
     a.write(str(f)) 
```

这列出了文件夹中文件的名称（有 6 个），但每个新文件都会覆盖旧文件，因此在任何给定时间 output.txt 文件中只有一个文件名。如何更改此代码以便将所有文件名写入 output.txt 文件中？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-30T14:25:41.633

不要在`for`循环中打开文件。`for`在循环之前打开它

像这样

```
import os

a = open("output.txt", "w")
for path, subdirs, files in os.walk(r'C:\Users\user\Desktop\Test_Py'):
   for filename in files:
     f = os.path.join(path, filename)
     a.write(str(f) + os.linesep) 
```

或使用上下文管理器（这是更好的做法）：

```
import os

with open("output.txt", "w") as a:
    for path, subdirs, files in os.walk(r'C:\Users\user\Desktop\Test_Py'):
       for filename in files:
         f = os.path.join(path, filename)
         a.write(str(f) + os.linesep) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T14:25:32.820

您正在以写入模式打开文件。您需要附加模式。有关详细信息，请参阅[手册](http://docs.python.org/library/functions.html#open)。

改变

```
a = open("output.txt", "w") 
```

到

```
a = open("output.txt", "a") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T08:41:46.030

您可以使用以下代码仅写入文件夹中的文件名。

```
import os

a = open("output.txt", "w")
for path, subdirs, files in os.walk(r'C:\temp'):
   for filename in files:
      a.write(filename + os.linesep) 
```

# html - 带有 3 个标题的表格，如何有不同数量的行单元格？

> ID：12199126
> 
> 赞同：0
> 
> 时间：2012-08-30T14:24:32.607
> 
> 标签：html, html-table

我想实现这个表结构

```
a | b | c
1 | 1 | 1
2 | 2 | 2
3 | 3 | 3
  |   | 4 
```

我有这个代码，但它把 4 放在另一列而不是 3 下面

```
<table border="0">   
    <tr>
       <th>A</th>
       <th>B</th>
       <th>C</th>   
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>    
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>   
    </tr>
    <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>
         <td>4</td>   
    </tr> 
 </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:26:56.220

您将不得不制作一些空单元格，其中包含“4”的行是一个新行：

```
<table border="0">   
    <tr>
       <th>A</th>
       <th>B</th>
       <th>C</th>   
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>    
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>   
    </tr>
    <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>
    </tr> 
    <tr>
         <td></td>
         <td></td>
         <td>4</td>
    </tr> 
 </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:30:38.087

作为添加新行的其他答案的替代方法，如果您希望 4 与 3 位于同一表格单元格中，只需在表格单元格内添加换行符

```
...
    <tr>
         <td>1</td>
         <td>2</td>
         <td>3<br/>4</td>
    </tr> 
 </table> 
```

或`div`像这样在单元格中使用标签

```
...
    <tr>
         <td>1</td>
         <td>2</td>
         <td>
            <div>3</div>
            <div>4</div>
         </td>
    </tr> 
 </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:28:10.867

```
<table border="0">   
    <tr>
       <th>A</th>
       <th>B</th>
       <th>C</th>   
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>    
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>  
    </tr>
    <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>   
    </tr> 
    <tr>
         <td> </td>
         <td> </td>
         <td>4</td>   
    </tr> 
 </table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:28:13.777

这是正常的：在表格标题中，您定义了三个不同的标题，因此定义了三个不同的列。由于`<td></td>`在表中定义了一个列，因此您的“4”获得了自己的列，该列未由表的列标题定义。

为了让 4 低于 3，您应该创建一个新的表格行，最后一个包含 4，如下所示：

```
<table border="0">   
    <tr>
       <th>A</th>
       <th>B</th>
       <th>C</th>   
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>    
    </tr>   
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>   
    </tr>
    <tr>
         <td>1</td>
         <td>2</td>
         <td>3</td>   
    </tr>
    <tr>
         <td></td>
         <td></td>
         <td>4</td>   
    </tr>
 </table> 
```

# java - 在 SWT 中设置/获取 RadioGroupFieldEditor 的值

> ID：12199127
> 
> 赞同：2
> 
> 时间：2012-08-30T14:24:34.187
> 
> 标签：java, radio-button, swt, eclipse-rcp, radio-group

我正在尝试在我正在开发的 Eclipse RCP 应用程序中添加 RadioGroupFieldEditor，但似乎无法做两件关键的事情：

1.  设置单选按钮的值（即当对话框/窗口打开时，我想例如将默认设置为“button1”）
2.  获取所选单选按钮的当前值（即用户选择了什么，或者如果没有设置，则使用上面设置的默认值）。

我正在使用的代码如下：

```
String[][] radioButtonOptions = new String[][] { { "Button1" "button1" }, 
                                                 { "Button2" "button2" } };

RadioGroupFieldEditor radioButtonGroup 
    = new RadioGroupFieldEditor("PrefValue", "Choose Button1 or Button2", 2,
                                radioButtonOptions, parent, true) 
```

我有一个 fireValueChanged() 方法，我可以用它来设置另一个 String 变量的值（当用户做出选择时），但这看起来很混乱。它也不允许我设置默认值...

我怀疑我错过了一些重要的东西！上面应该有get/set方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:20:11.747

由于此控件在首选项上运行，因此您可以在首选项初始化程序中设置默认值。

要获取控件的值，您可以通过 getRadioBoxControl(Composite) 方法 gt 实际的无线电控件并查询该对象。不是最干净的方法，但它确实可以正常工作。

# mysql - 使用mysql查找一个月的最新条目

> ID：12199136
> 
> 赞同：1
> 
> 时间：2012-08-30T14:25:08.613
> 
> 标签：mysql

我遇到了一个 mysql 问题，我正在尝试查找最新的付款值，以及特定月份（在此查询中我使用 April）。sqlfillde 的链接在[这里](http://sqlfiddle.com/#!2/eea9d/1)

```
(case when max(py.pay_date)and month(py.pay_date)= 4 then amount else 0 end) max_pay_april, 
```

这就是我所拥有的，但它似乎不起作用。最新的付款价值是：`(5, '2012-04-20', 90,)`因此，`90` 我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:37:22.913

这个怎么样：

```
select p.name,
  v.v_name,
  sum(case when Month(py.pay_date) = 4 then amount end) april_amount,

  max(case 
    when month(py.pay_date)= 4 
    and py.pay_date = (select max(pay_date) 
                       from payment 
                       where month(pay_date) =4 )

   then amount else 0 end) max_pay_april,

   sum(case 
        when Month(py.pay_date) = Month(curdate())
        then amount end) current_month_amount,
  sum(case 
        when Month(py.pay_date) = Month(curdate())-1
        then amount end) previous_month_amount

from persons p
left join vehicle v
  on p.id = v.person_veh
left join payment py
  on p.id = py.person_id
group by p.name,
  v.v_name 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/eea9d/11)

# c# - 用于搜索的 JQuery AJAX 查找

> ID：12199140
> 
> 赞同：0
> 
> 时间：2012-08-30T14:25:21.643
> 
> 标签：c#, jquery, ajax, database

我在网页上有一个文本框，我想编写一些 JQuery、AJAX 代码，以便当用户在该字段中键入一些文本时，它会从数据库中的列中查找值并返回以字母开头的值(s) 他们输入的。随着用户在文本框中键入更多字符，来自数据库的选择会变小。然后，用户可以使用其中一个选项来自动完成他们的输入。我如何实现这一点，这里会有性能考虑吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:26:28.617

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:27:04.290

[jQuery UI 的自动完成功能。][1]

**这是一个例子：**

```
<script type="text/javascript">
$('#search').autocomplete({
  url: 'suggestions.php', width: 300,
  max: 10,
  delay: 100,
  cacheLength: 1,
  scroll: false,
  highlight: false
});
</script> 
```

这是 C# [http://jquery-with-asp.net/2011/07/jquery-ui-autocomplete-with-asp-net/的具体示例](http://jquery-with-asp.net/2011/07/jquery-ui-autocomplete-with-asp-net/)

如果您不想使用 jquery 。您可以使用 ASP.NET AJAX 工具包

[http://www.asp.net/ajaxlibrary/act_AutoComplete_Simple.ashx](http://www.asp.net/ajaxlibrary/act_AutoComplete_Simple.ashx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-09T02:56:16.127

还有一个非常棒的工具可以提供查找并提供对其他数据元素的访问。

[https://github.com/nfosci/input-fetcher-dropdown](https://github.com/nfosci/input-fetcher-dropdown)

# android - 如何从其他活动访问主要活动中的实例变量和方法？

> ID：12199141
> 
> 赞同：2
> 
> 时间：2012-08-30T14:25:20.547
> 
> 标签：android

> **可能重复：**
> [Android：如何声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

我想从其他活动访问主要活动中的公共实例变量。我想在主要活动中调用公共方法。我怎样才能做到这一点？

```
class MainActivity extends Activity {
    public int i;
    public void myMethod() {}
}

class MyActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // How can I access variable i in MainActivity?
        // And How can I call myMethod() in MainActivity?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:30:02.597

不建议这样做，因为您的活动类可能随时被系统回收。

使用首选项来存储变量，或者更简单：创建您自己的应用程序类。这将在整个应用程序生命周期中可用，您将能够在其中存储静态变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:36:18.573

您可以在`Intent`开始新的`Activity`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:32:35.310

这可能会对您有所帮助： [如何在 Android 中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

您可以使用 Application、SharedPreferences 或静态变量的子类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:42:38.700

试试这个

```
class MainActivity extends Activity {
    public int i;
void startNewA()
{
 Intent i = new Intent(getApplicationContext(), MyActivity.class);
 i.putExtra("var_name", i);
 startNewActivity(i);
}
}

class MyActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        int i = getIntent().getIntExtra("var_name", -1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:30:33.593

当您想在多个活动中获取和设置相同的变量时，您也可以使用首选项。

# java - 关闭 BufferedReader 和 InputStreamReader

> ID：12199142
> 
> 赞同：11
> 
> 时间：2012-08-30T14:25:21.903
> 
> 标签：java, bufferedreader, inputstreamreader

这段代码正在造成[BufferedReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)和[InputStreamReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)的内存泄漏问题，我认为这可能是一些异常的原因。我应该如何改变它？

```
try{
    URL url = new URL(sMyUrl);
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    while ((str = in.readLine()) != null) {
        jsonString += str;
    }
    in.close();
}catch(Exception e){

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T14:31:54.253

使用`try..finally`块关闭流会更安全。您也可以使用 a`StringBuilder`因为它是为连接字符串而设计的。您还应该避免抓住`Exception`它并且什么都不做。此外，您的代码正在连接没有任何换行符的行。这很可能不是您想要的，在这种情况下`append("\n")`，当您阅读每一行时。

这是具有这些修改的版本：

```
StringBuilder json = new StringBuilder();
try {
    URL url = new URL(sMyUrl);
    BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
    try {
        String str;
        while ((str = in.readLine()) != null) {
            json.append(str).append("\n");
        }
    } finally {
        in.close();
    }
} catch (Exception e) {
    throw new RuntimeException("Failed to read JSON from stream", e);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T14:27:58.410

代码不是很漂亮，但不会造成内存泄漏。我建议您使用内存分析器来确定您的内存在哪里使用。否则，即使您有 10 年以上的 Java 性能调优经验，您也只是在猜测；）

更好的选择是使用 Java 7

```
URL url = new URL(sMyUrl);
try(BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()))) {
  while ((str = in.readLine()) != null) {
     jsonString.append(str).append("\n");
  }
} 
```

如果您有 Java 6 或更早版本，则可以使用。

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()))) {
try {
  while ((str = in.readLine()) != null) {
     jsonString.append(str).append("\n");
  }
} finally {
  in.close();
} 
```

# iphone - libsystem_c.dylib strdup 中的 ios 5.1 内存泄漏

> ID：12199143
> 
> 赞同：1
> 
> 时间：2012-08-30T14:25:24.150
> 
> 标签：iphone, ios, cocoa-touch, ipad

我正在创建一个类似于电子书的应用程序。我正在使用 UIScrollView 来显示页面。当我将一个页面移动到另一个页面或放大页面时，我在 lib system_c.dylib strdup 中出现内存泄漏。我经常收到此错误。当我看到超过 100 页时，我的应用程序崩溃了。任何解决方法，以解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:43:07.710

这正是 iOS 5.1 中的一个错误。[阅读更多。](https://devforums.apple.com/message/630695#630695)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:32:44.990

libsystem_c.dylib strdup 不太可能发生泄漏。可能发生的情况是内存是在 ibsystem_c.dylib strdup 中分配的，但是您的代码直接或间接地负责释放该内存，但它没有这样做。

使用 Leaks 工具在分配内存时检查堆栈。堆栈中可能有一些您的代码可以进行分配该内存的调用。

# node.js - Jenkins CI 上的 NodeJS/Testacular

> ID：12199144
> 
> 赞同：2
> 
> 时间：2012-08-30T14:25:26.497
> 
> 标签：node.js, continuous-integration, jenkins

我正在使用 Testacular，它是 Angular/Jasmine 的 Node.js 测试运行器。我可以从命令行很好地运行它，但每次我尝试从 Jenkins 构建步骤运行它时，它都会因环境变量的各种错误而崩溃。我尝试了 Jenkins 的 Nodejs 插件，但这只是为了运行节点代码片段。任何人都知道在 Jenkins 下让节点应用程序（例如 Testacular）运行测试的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:12:17.620

您将需要：

1.  将“testacular”作为`package.json`文件中的依赖项。
2.  安装您的依赖项`npm install`（作为构建步骤执行此操作）
3.  称它为`./node_modules/.bin/testacular start --single-run`

假设您已将 testacular 配置为使用 PhantomJs `browsers = ['PhantomJS'];`，您只需`phantomjs`在路径中包含二进制文件或通过在 shell 中设置的环境变量告诉 testacular 它位于何处：

```
export PHANTOMJS_BIN=$HOME/local/bin/phantomjs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T14:09:22.083

好消息！

“我尝试了 Jenkins 的 Nodejs 插件，但这只是为了运行节点代码片段。”

不！

安装 nodejs 插件请参阅此处的说明-> [NodeJS jenkins 插件损坏？](https://stackoverflow.com/questions/18213074/nodejs-jenkins-plugin-broken/22014948#22014948)

然后勾选“Provide Node/npm bin folder to PATH”，当运行“execute shell”构建任务时，你可以使用nodejs，这里是一个使用gui的例子

npm update grunt grunt --force 报告

# c++ - c++ 公共对象更改应该调用函数

> ID：12199146
> 
> 赞同：2
> 
> 时间：2012-08-30T14:25:28.087
> 
> 标签：c++, function, object, invoke

我创建了一个这样的类

```
class myClass {

public:  
 int addMeOne; 
 void Invoked()  { .... }
}; 
```

我创建了它的一个对象，并通过引用将它发送到我程序的所有其他模块。每个人都习惯将 addMeOne 变量增加 1 。有些人甚至习惯添加两次，但这不是重点。

有了这个，现在我希望每当有人更改 addMeOne 时，我的函数 Invoked() 应该被调用。

请注意，正确的策略是我应该允许 addMeOne 被某个函数暴露在外部，而在该函数内部我可以调用 Invoked 。但是，现在无法更改接口，因为它现在已向所有其他人公开并且不应修改。我该如何纠正这个。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:32:07.200

你需要阅读封装。如果不提供锁定的 getter / setter 接口，`addMeOn`就无法保证对其使用的控制。

不要害怕改变界面。对于任何使用它来改变的人来说，这不是一项艰巨的任务，他们应该清楚你在改变它时所做的事情是为他们的利益提供价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:38:09.017

使用可以变成`addMeOne`代理。

```
class myClass 
{
    class addMeOneProxy
    {
        public:
            addMeOneProxy(myClass &s) : parent(s) {}

            // This gets called whenever something tries to use the addMeOne 
            // member variable as an integer.
            operator int() const 
            {
                return parent.addMeOne;
            }

            // This gets called whenever something assigns a value to addMeOne.
            int operator=(int val) 
            {
                parent.Invoked(); 
                return val;
            }

            // You could also implement an operator++ or whatever else you need.

        private:
            myClass &parent;
    };

  public:
    void Invoked();
    addMeOneProxy addMeOne;
}; 
```

当然，如果您决定在某个时候将 Invoked() 设为私有，则需要将 myClass 设为 addMeOneProxy 的朋友类，以便 addMeOneProxy 可以调用 Invoked 成员函数。

我当然同意其他评论者的观点，即你真的应该为此拥有 getter 和 setter 函数，但我也理解开发人员通常控制和改变他们所生活的世界的权力有限。所以，代理就是你如何做到这一点，如果你不能也不能改变世界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:30:07.107

您必须创建一个将值分配给`addMeOne`变量的方法，这称为 setter 方法，并将变量本身设为私有。

我相信，在更改整数变量时无法触发函数。

一种*会*改变接口但*不需要*改变外部代码的替代方法是定义一个模拟整数行为的类，即实现`operator++`等，并更改`addMeOne`为这种类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:32:36.340

真的，可能值得告诉所有客户使用方法而不是公共变量。您要么需要更改类、客户端或两者。

没有办法解决它。再做一次，做对。接受打击。

有一些技巧：一旦你公开了一个成员变量，你可以做的一件事就是`int addMeOne`用其他一些具有相同名称但不同类型的变量替换。`countedint addMeOne`. 您必须编写的`countedint`类使其行为类似于 int，但赋值、递增等也计算它们被使用的次数。例如

```
countedint & operator ++(){
   m_value++;
   m_number_of_uses++;
   return *this;
}
countedint & operator --(){
   m_value--;
   m_number_of_uses++;
   return *this;
} 
```

您可能还需要对 int 使用强制转换运算符，并且您也可以计算那里的使用次数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:33:38.103

您应该保留此类的 ABI，还是只保留其客户使用的语法？如果您可以更改 的类型`addMeOne`，保留编写能力`addMeOne++`等，您可以定义一个类和相关的运算符 - 然后使其`addMeOne`成为此类的一个实例。当然，现在`addMeOne`操作员可以做任何事情——包括调用一些`MyClass`成员函数。

伪代码：

```
class Proxy
{
public:
  Proxy(YourClass *parent) : parent_(parent), value_(0)
  {}
  void operator++() 
  {
    ++value_;
    // doAnything with parent_
  }
  // accessors, cast operators etc...
private:
  YourClass *parent_;
  int value_;
};

class YourClass
{
public:
  YourClass() : addMeOne(this)
  {}
  Proxy addMeOne;
}; 
```

# git - 有效的 .gitignore 和干净的策略？

> ID：12199150
> 
> 赞同：1
> 
> 时间：2012-08-30T14:25:37.240
> 
> 标签：git

我一直遇到一些我想避免的小麻烦。如果我查看我希望 git 忽略的所有文件集，我可以将它们分成两个基本组：

1.  我需要保留在我的文件系统上以处理项目的文件（IDE 项目元数据文件、特定于我的工作站的配置文件等）

2.  生成的文件是我不需要的，当我将它们添加到 .gitignore 时，它​​们通常会弄乱我的文件系统。（编译输出、核心转储等）

理想情况下，我希望 git 忽略所有这些文件，这样当我查看未暂存的更改时，我可以清楚地了解我更改的内容，而不会产生一堆噪音。如果我将所有这些文件添加到 .gitignore 中，我可以清楚地了解我在执行 .gitignore 时所做的更改`git status`。（这是我现在的状态）

但是，我还希望能够使用 git clean 清除类别 2 中的所有文件，而无需删除类别 1 中的所有文件。如果我只添加类别 1 中的文件，我可以使用它`git clean -x`来删除所有未跟踪的文件事物。不幸的是，这弄乱了`git status`。

或者，我可以添加类别 2 中的所有文件，但最终我不得不手动记住不要添加/提交我的工作站特定文件。 `git status`几乎连续混乱，但没有那么糟糕。

有没有办法让这三件事和谐相处：

1.  清楚地了解我关心的文件`git status`
2.  删除所有我不关心的文件`git clean`
3.  保留我运行时不想共享的所有未跟踪文件`git clean`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:33:04.557

查看`gitignore`手册页的详细信息。它包括有关此案例的详细信息。

选择您想要的案例。

* * *

> 放置模式的文件取决于模式的使用方式。应该受版本控制并通过克隆分发到其他存储库的模式（即，所有开发人员都希望忽略的文件）应该进入一个`.gitignore`文件。
> 
> 特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存在于存储库内但特定于一个用户工作流的辅助文件）应该进入`$GIT_DIR/info/exclude`文件。
> 
> 用户希望 git 在所有情况下都忽略的模式（例如，由用户选择的编辑器生成的备份或临时文件）通常进入`core.excludesfile`用户的 `~/.gitconfig`.

# .net - 样式化 XAML 滑块控件 - 如何停止在 PointerOver 上更改拇指背景？

> ID：12199155
> 
> 赞同：5
> 
> 时间：2012-08-30T14:25:49.167
> 
> 标签：.net, xaml, microsoft-metro, windows-runtime, winrt-xaml

我正在尝试使用 XAML 为 Metro 风格应用程序重新设置 Slider 控件的样式 - 它应该看起来像用户沿着灰色条拖动的红色总线，即：

![在此处输入图像描述](../Images/b224f40b90a815e2ccb50f2834130bc9.png)

我已经使用 Visual Studio 提取了样式并重新设置了 Slider 控件的样式，如下所示。不幸的是，每当我将鼠标悬停在滑块上时，拇指就会被一个灰色矩形替换，即使我已经从 VisualState“PointerOver”组中专门删除了所有 Storyboard 项目。

![在此处输入图像描述](../Images/c882e95fa072c00a53f64f5c4d3d7fd1.png)

我错过了什么？XAML 如下。如果我需要修改另一个模板（例如 Thumb？），那么请提供有关如何提取此模板的步骤，因为 Visual Studio 似乎除了下面的之外没有向我公开任何更多的控制模板。

```
 <Style x:Key="BusRouteSliderStyle" TargetType="Slider">
        <Setter Property="Background" Value="{StaticResource SliderTrackBackgroundThemeBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource SliderBorderThemeBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource SliderBorderThemeThickness}"/>
        <Setter Property="Foreground" Value="{StaticResource SliderTrackDecreaseBackgroundThemeBrush}"/>
        <Setter Property="ManipulationMode" Value="None"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid Margin="{TemplateBinding Padding}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhiteHorizontal"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlackHorizontal"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhiteVertical"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlackVertical"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid x:Name="HorizontalTemplate" Background="Transparent">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="17"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="32"/>
                            </Grid.RowDefinitions>
                            <Rectangle x:Name="HorizontalTrackRect" Grid.ColumnSpan="3" Fill="LightGray" Grid.Row="1"
                                       Height="10" VerticalAlignment="Bottom"/>
                            <Rectangle x:Name="HorizontalDecreaseRect" Height="0" />
                            <TickBar x:Name="TopTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" Height="{StaticResource SliderOutsideTickBarThemeHeight}" Margin="0,0,0,2" Visibility="Collapsed" VerticalAlignment="Bottom"/>
                            <TickBar x:Name="HorizontalInlineTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickMarkInlineBackgroundThemeBrush}" Height="{StaticResource SliderTrackThemeHeight}" Grid.Row="1" Visibility="Collapsed"/>
                            <TickBar x:Name="BottomTickBar" Grid.ColumnSpan="3" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" Height="{StaticResource SliderOutsideTickBarThemeHeight}" Margin="0,2,0,0" Grid.Row="2" Visibility="Collapsed" VerticalAlignment="Top"/>
                            <Rectangle x:Name="HorizontalBorder" Grid.ColumnSpan="3" Grid.Row="1" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}"/>
                            <Thumb x:Name="HorizontalThumb"  
                                   Grid.Column="1" 
                                   DataContext="{TemplateBinding Value}"
                                   Width="40"
                                   Height="30" 
                                   Grid.Row="1" >
                                <Thumb.Background>
                                    <ImageBrush ImageSource="/Assets/bus_thumb.png" />
                                </Thumb.Background>
                            </Thumb>
                            <Rectangle x:Name="FocusVisualWhiteHorizontal" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                            <Rectangle x:Name="FocusVisualBlackHorizontal" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                        </Grid>
                        <Grid x:Name="VerticalTemplate" Background="Transparent" Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="17"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="17"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Rectangle x:Name="VerticalTrackRect" Grid.Column="1" Fill="{TemplateBinding Background}" Grid.RowSpan="3"/>
                            <Rectangle x:Name="VerticalDecreaseRect" Grid.Column="1" Fill="{TemplateBinding Foreground}" Grid.Row="2"/>
                            <TickBar x:Name="LeftTickBar" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" HorizontalAlignment="Right" Margin="0,0,2,0" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderOutsideTickBarThemeHeight}"/>
                            <TickBar x:Name="VerticalInlineTickBar" Grid.Column="1" Fill="{StaticResource SliderTickMarkInlineBackgroundThemeBrush}" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderTrackThemeHeight}"/>
                            <TickBar x:Name="RightTickBar" Grid.Column="2" Fill="{StaticResource SliderTickmarkOutsideBackgroundThemeBrush}" HorizontalAlignment="Left" Margin="2,0,0,0" Grid.RowSpan="3" Visibility="Collapsed" Width="{StaticResource SliderOutsideTickBarThemeHeight}"/>
                            <Rectangle x:Name="VerticalBorder" Grid.Column="1" Grid.RowSpan="3" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}"/>
                            <Thumb x:Name="VerticalThumb" 
                                Background="{StaticResource SliderThumbBackgroundThemeBrush}" 
                                Grid.Column="1" DataContext="{TemplateBinding Value}" Height="{StaticResource SliderTrackThemeHeight}" Grid.Row="1" 
                                Width="{StaticResource SliderTrackThemeHeight}"/>
                            <Rectangle x:Name="FocusVisualWhiteVertical" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                            <Rectangle x:Name="FocusVisualBlackVertical" Grid.ColumnSpan="3" IsHitTestVisible="False" Opacity="0" Grid.RowSpan="3" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Slider x:Name="busSlider" Width="220" Height="50" Minimum="0" Maximum="100" Value="0" Orientation="Horizontal" IsEnabled="True"  Style="{StaticResource BusRouteSliderStyle}" />

    <TextBlock x:Name="lblSliderStopInfo" Grid.Row="1" Foreground="White" FontSize="12" Text ="{Binding ElementName=slider,  Path=Value}" />

</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:03:37.920

您可能还需要更改 Thumb 控件的样式/模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T16:13:05.097

正如我所怀疑的，我需要更改 Thumb 控件的样式，但在 VIsual Studio 中提取它并不容易，因为它已经包含在 ControlTemplate 中。

解决方案如下：

*   在空白 XAML 页面上创建一个全新的 Thumb 控件，为其指定高度/宽度，使其在设计器画布上可见。
*   右键单击它，选择“编辑模板”->“编辑副本”
*   这会在 XAML 中创建模板，然后可以根据需要将其复制/粘贴到其他地方。

默认的 Thumb 样式粘贴在下面，供任何需要的人使用。只需删除 PointerOver 和 Pressed 状态即可实现我想要的行为。

```
 <Style x:Key="ThumbStyle1" TargetType="Thumb">
        <Setter Property="Background" Value="{StaticResource ThumbBackgroundThemeBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="BorderBrush" Value="{StaticResource ThumbBorderThemeBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundPointerOver"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Background"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundPressed"/>
                                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Background"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="Focused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="Background" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"/>
                        <Border x:Name="BackgroundPointerOver" BorderBrush="{StaticResource ThumbPointerOverBorderThemeBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{StaticResource ThumbPointerOverBackgroundThemeBrush}" Opacity="0"/>
                        <Border x:Name="BackgroundPressed" BorderBrush="{StaticResource ThumbPressedBorderThemeBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{StaticResource ThumbPressedBackgroundThemeBrush}" Opacity="0"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# objective-c - iPad 将图像显示为大 - 但不应该

> ID：12199157
> 
> 赞同：2
> 
> 时间：2012-08-30T14:25:54.087
> 
> 标签：objective-c, ios, uiimageview

我为 iPad 3 开发应用程序 - 带有 Retina 显示屏。我根据规范计算出该图像应为 1536 x 2008 以填充（带有状态栏）整个屏幕。我将图像大小调整为这样的尺寸，并以编程方式加载它并将其设置为在 UIImageView 上显示（从情节提要加载）。更重要的是，为了获得最佳性能，我将 UIImageView 模式设置为 Center（以避免缩放）。当我运行应用程序时，我只看到图像的中心 - 好像我的图像是屏幕的 4 倍 - 这是不正确的。

她是我的 viewWillAppear 方法代码

```
UIImage *image = [UIImage imageWithContentsOfFile: self.pageData.pageFilename];

NSLog(@"Image size: %f %f", [image size].width, [image size].height);

NSLog(@"Image view size: %f %f", self.imageView.frame.size.width, self.imageView.frame.size.height);

[ self.imageView setImage: image]; 
```

我得到输出：

```
Image size: 1536.000000 1990.000000
Image view size: 768.000000 1004.000000 
```

如何纠正这个？我的图像是 JPG，您可以看到大小和 72 DPI - 但我确信 DPI 无关紧要

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:32:47.357

您正在混淆像素和点。

在 iOS 中，尺寸以点为单位，而不是以像素为单位。如果设备使用视网膜显示，则 1 点 = 2 像素。使用旧显示器，您有 1 点 = 1 像素。

* * *

**正常显示**
1 点 = 1 像素
1024 * 768 点
1024 * 768 像素

**Retina 显示屏**
1 点 = 2 像素
1024 * 768 点
2048 * 1536 像素

* * *

所以在这两种情况下，显示器的大小都相同：
**1024 * 768 点**

# android - 连接到我的 SQLite 数据库时出错

> ID：12199172
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:26:44.773
> 
> 标签：android, database, sqlite

用户正在查看一个列表`LibraryFragment`并单击其中一个选项（`Item1`或`Item2`），从那里我想显示另一个列表（`GFragment`），它是根据从数据库接收到的项目动态创建的。在 logCat 我得到这个错误：

```
08-30 13:56:54.087: E/SqliteDatabaseCpp(22622): sqlite3_open_v2("/data/data/j.j.l.library.v11/databases/library_dev.db", &handle, 1, NULL) failed

Failed to open the database. Closing it. 
```

有谁知道代码有什么问题或为什么这样做？

* * *

我用于数据库的代码是：

```
public class DatabaseHelper {

private static String DB_PATH = "/data/data/j.j.l.library.v11/databases/";    
private static String DB_NAME = "library_dev.db";
private SQLiteDatabase myDataBase;

public DatabaseHelper(){
}

//Open the database.
public void openDatabase() throws SQLException{

    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}   

//Return the columns we want.
public List<String> getQueryColumn(String tableName, String[] columns){

    Cursor cursor;
    List<String> info = new ArrayList<String>();
    cursor = myDataBase.query(tableName, columns, null, null, null, null, null);

    cursor.moveToFirst();
    while(!cursor.isAfterLast()){
        info.add(cursor.getString(0));
        cursor.moveToNext();
    }
    cursor.close();
    return info;
}    

//Close the Database.
public void closeDatabase() throws SQLException{

    myDataBase.close();
}

} 
```

我试图从数据库动态创建的另一个列表：

```
public class GFragment extends ListFragment {

private DatabaseHelper gList;
public static final String GROLE = "role";
public static final String[] ROLENAME = {"name"};

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    gList = new DatabaseHelper();
    gList.openDatabase();

    List<String> values = gList.getQueryColumn(GROLE, ROLENAME);

    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, values));
    gList.closeDatabase();

}
} 
```

这是用户在调用从数据库中检索动态列表之前正在查看的列表：

```
public class LibraryFragment extends ListFragment{

String[] libraryList = {"Item1", "Item2"};  

@Override
public void onActivityCreated(Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, libraryList));
}

@Override
public void onListItemClick(ListView l, View v, int position, long id){
    //Get the position the user clicked.
    Fragment newFragment = null;
    String listPosition = libraryList[position];

    getListView().setItemChecked(position, true);

    if(listPosition.equals("Item1")){
        newFragment = new GFragment();                      
    }else if (listPosition.equals("Item2")){
        newFragment = new ITFragment();
    }

    FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(R.id.myFragments, newFragment);
    transaction.addToBackStack(null);
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    transaction.commit();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:45:38.153

是因为你没有创建这个数据库`library_dev.db`，所以它是空的，导致`NULL`引用；之后进行关闭操作。

您需要`creation/upgrade/remove`在一个应该从`SQLiteOpenHelper`第一个扩展的类中处理数据库。然后使用这个类来获取你的数据库：

```
public class MyDatabaseHelper extends SQLiteOpenHelper { // blah...database create/upgrade handling }

MyDatabaseHelper myHelper = new MyDatabaseHelper(yourContext);
SQLiteDatabase myDatabase = myHelper.getReadableDatabase(); // now you can use `myDatabase` freely 
```

您可以在以下位置参考适当的指南：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# xpath - Apache Camel / xpath 操作结果检测

> ID：12199174
> 
> 赞同：2
> 
> 时间：2012-08-30T14:26:47.607
> 
> 标签：xpath, apache-camel

给定一个应该提取 XML 消息的某些内部部分的 Camel 路由，从中创建一个新消息，然后将其传递。

```
 from(SUB_EXTRACT_XML)
   .setExchangePattern(ExchangePattern.InOut)
   .setBody().xpath("//mmsg:MyMessage/mmsg:AnyPayload/*", namespaces) 
   .setBody().simple("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n${in.body}")
   .to(...) 
```

对于像这样的正确输入消息（“嵌入”xml 消息由 xs:any 在模式中定义），它正在工作，因为消息是我期望的：

```
<mmsg:MyMessage>
  <mmsg:RandomTags/>
   ...
   <mmsg:AnyPayload> <!-- xs:any in xsd -->
     <some><xml/><here/></some>
   </mmsg:AnyPayload>
</mmsg:MyMessage> 
```

鉴于 XML 消息存在一些问题，例如缺少 mmsg:AnyPayload 标记，因此 XPATH 无法完成其工作：

```
<mmsg:MyMessage>
  <mmsg:RandomTags/>
   ...
   <some><xml/><here/></some>
</mmsg:MyMessage> 
```

XPATH 将无法提取数据并传递整个 XML 消息（包括 mmsg:MyMessage），这不是预期的。我宁愿在这个阶段抛出一些异常。

**问题：**

有没有办法检查 xpath 表达式是否真的找到了路由后面引用的元素，或者它是否未能提取给定的元素？

我知道我之前可以对消息进行一些模式验证并拒绝垃圾消息，但是有什么方法可以查看 XPath 表达式是否失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T19:43:52.640

一个解决方案是`choice()`在这样的路由中使用 DSL：

```
 from(SUB_EXTRACT_XML)
   .setExchangePattern(ExchangePattern.InOut)
   .choice()
        .when(xpath("//mmsg:MyMessage/mmsg:AnyPayload", namespaces))
            .setHeader("Status", "OK") // just for another example how to transmit some variable between two routes 
            .setBody().simple("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n${in.body}")
            .endChoice()
        .otherwise()
            .log(LoggingLevel.ERROR, "LoggerName", "Error message; Stop the processing")
            .stop()
        .endChoice()
    .end()
   // Just to show the headers are following the route... 
   .to("DIRECT_GO_FORWARD"); 

 from("DIRECT_GO_FORWARD")
   .setExchangePattern(ExchangePattern.InOut)
   .choice()
        .when(header("Status").isEqualTo("OK"))
            .bean(new SampleProcessor())

        ...
    .end()
    ...
    .to("..."); 
```

第二条路线只是为了表明您可以使用第一条路线中设置的标头（以及正文）。

# system - MarkLogic Server 中的坐标系

> ID：12199180
> 
> 赞同：3
> 
> 时间：2012-08-30T14:27:01.817
> 
> 标签：system, marklogic, coordinate

Marklogic 服务器支持哪些坐标系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:51:54.823

MarkLogic 可以在 2 种地理空间坐标模式下运行：WGS84 和 Raw。

# iphone - 将图像放入 UIImageView 时的 UIProgressView

> ID：12199183
> 
> 赞同：0
> 
> 时间：2012-08-30T14:27:10.507
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uiimage

我想知道，在这种情况下如何显示 UIProgressView：我使用 UIImagePickerController 拍摄照片，然后在方法`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info` 中将图片保存到 UIImage 对象（outputImage）并隐藏控制器，当带有相机的 modalView/controller 消失时，我有这样的代码：

```
 NSLog(@"Image is width: %f height: %f", outputImage.size.width, outputImage.size.height);

        //FLIP PICTURE FROM FACETIME CAMERA
        if((outputImage.size.width == 480 && outputImage.size.height == 640) || (outputImage.size.width == 640 && outputImage.size.height == 480)) {
            outputImage = [UIImage imageWithCGImage:outputImage.CGImage
                                        scale:1.0 orientation: UIImageOrientationLeftMirrored];}

        //RESIZE TO 1000x1000
        outputImage = [self scaleAndCropToSize:outputImage toSize:CGSizeMake(1000, 1000)];

        NSLog(@"Now image is width: %f height: %f", outputImage.size.width, outputImage.size.height);

        //CUTING OUT TO MASK
        outputImage = [self maskImage:outputImage withMask:[UIImage imageNamed:@"mask.png"]];

        //ADDING SHADOW
        CGSize size = CGSizeMake(1000, 1000);
        UIGraphicsBeginImageContext(size);

        CGPoint thumbPoint = CGPointMake(0, 0);
        [outputImage drawAtPoint:thumbPoint];

        UIImage* shadow = [UIImage imageNamed:@"shadow.png"];

        CGPoint starredPoint = CGPointMake(0, 0);
        [shadow drawAtPoint:starredPoint];

        UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        outputImage = result;

        //ADDING TO UIIMAGEVIEW (PREVIEW)
        preview.image = outputImage; 
```

将照片放入 UIImageView 时，需要一些时间。这次我想显示进度视图。我怎样才能做到这一点？

编辑：我想将上面的代码放在某个方法中，然后以某种方式实现progressview，这将基于方法完成时间。但不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:45:03.853

您不能使用`UIProgressView`它，因为它很难知道执行图像操作需要多少时间。

你可以试试这个[MBProgressHUD](https://github.com/jdg/MBProgressHUD)

把这段代码放进去`didFinishPickingMediaWithInfo`

```
MBProgressHUD *HUD = [[MBProgressHUD alloc] initWithView:self.view];

HUD.labelText = @"Saving Image...";

[self.view  addSubview:HUD];

HUD.delegate = self;

[HUD showWhileExecuting:@selector(savingPicture:) onTarget:self withObject:selectedImage animated:YES]; 
```

并将您的调整大小/裁剪图像操作代码放在 savePicture 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:36:38.677

当您正在运行一个循环并且您知道正在完成的工作的百分比时，进度视图更适合在进度条中显示进度。在这种情况下，您可以改为显示 UIActivityIndi​​cator，直到您的图像准备好放在图像视图上。

# javascript - 当一个元素的 id 都以相同的两位或三位数字结尾时，如何获取一个元素的内容并添加到另一个元素？

> ID：12199184
> 
> 赞同：0
> 
> 时间：2012-08-30T14:27:13.733
> 
> 标签：javascript, jquery

我有这个代码：

```
$('.update-title')
    .change(function () {
        $(this).prop('title', $('option:selected', this).prop('title'));
    }); 
```

这个HTML：

```
<select id="modal_TempRowKey_14" class="update-grid update-title">
...
...
</select>

<input id="modal_Title_14" class="update-grid" type="text" value="xx"> 
```

我是否可以这样做，以便当 .update-title 更改时，将标题的值放入具有匹配编号的输入 id 中。所以在这种情况下，`#modal_TempRowKey_14`标题会变得`#modal_Title_14`有价值

**重要的**

我希望只有在被更改的元素以 . 开头时才会发生这种情况`modal_TempRowKey`。这可以放入更改块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:32:35.630

尝试

```
$('.update-title').on("change", function() {
    var id = this.id.replace('modal_TempRowKey_', '');  
    $("#modal_Title_" + id).val( $(this).val() );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:32:48.687

`id`我的建议是使用 jQuery 的`data`函数，而不是尝试解析属性。

编辑您的 HTML，使`select`菜单具有一个`data-target`属性：

```
<select id="modal_TempRowKey_14" data-target="#modal_Title_14" class="update-grid update-title">
...
...
</select> 
```

然后，像这样创建您的事件处理程序：

```
$('.update-title').on('change',function() {
    var $this = $(this);
    $($this.data('target')).val($this.val());
}) 
```

您使用该`data-target`属性来查找要应用`select`菜单值的元素。

这是一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/vWS2G/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:33:57.283

```
$('.update-title').change(function () {
    var m = this.id.match(/^modal_TempRowKey_(\d+)$/);
    if (m) {
        $("#modal_Title_" + m[1]).val(this.id);
    }
});​ 
```

**[演示](http://jsfiddle.net/kqQJv/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:40:49.717

其他人有更优雅的方法，这是我的尝试：

[http://jsfiddle.net/8sLCL/1/](http://jsfiddle.net/8sLCL/1/)

```
$('.update-title')
    .change(function () {
        var my_text = $(this).find(":selected").text();
        var my_id = $(this).attr("id");
        var my_num_pos = my_id.lastIndexOf("_");
        var my_num = my_id.substr(my_num_pos + 1 ,my_id.length - my_num_pos  );
        $( "#modal_Title_" + my_num ).val(my_text );
});​ 
```

# date - 如何使用 Powershell 根据最新日期从日志文件中提取最新行

> ID：12199185
> 
> 赞同：2
> 
> 时间：2012-08-30T14:27:14.183
> 
> 标签：date, powershell, logfiles, logfile

我是一个相对较新的 Powershell 用户，并且有一个我认为很简单的问题。我花了一些时间寻找类似的场景，但令人惊讶的是没有找到任何类似的场景。我会发布我失败的尝试，但我什至无法接近！

我有一个包含重复数据的日志文件，我想为每个“唯一”条目提取最新事件。问题在于每个条目都是唯一的，因为它们具有单独的日期戳。“唯一”标准在第 1 列中。示例：

```
AE0440,1,2,3,30/08/2012,12:00:01,XXX
AE0441,1,2,4,30/08/2012,12:02:01,XXX
AE0442,1,2,4,30/08/2012,12:03:01,XXX
AE0440,1,2,4,30/08/2012,12:04:01,YYY
AE0441,1,2,4,30/08/2012,12:06:01,XXX
AE0442,1,2,4,30/08/2012,12:08:01,XXX
AE0441,1,2,5,30/08/2012,12:10:01,ZZZ 
```

因此我想要的输出是（顺序不相关）：

```
AE0440,1,2,4,30/08/2012,12:04:01,YYY
AE0442,1,2,4,30/08/2012,12:08:01,XXX
AE0441,1,2,5,30/08/2012,12:10:01,ZZZ 
```

如何获取此数据/丢弃旧数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:06:32.060

试试这个，对于第一次使用的用户来说，它可能看起来有点神秘。它读取文件的内容，按唯一值对行进行分组（现在我们有 3 个组），每个组通过解析日期时间值（再次通过拆分）进行排序，并返回第一个值。

```
Get-Content .\log.txt | Group-Object { $_.Split(',')[0] } | ForEach-Object {    
    $_.Group | Sort-Object -Descending { [DateTime]::ParseExact(($_.Split(',')[-3,-2] -join ' '),'dd/MM/yyyy HH:mm:ss',$null) } | Select-Object -First 1    
}

AE0440,1,2,4,30/08/2012,12:04:01,YYY
AE0441,1,2,5,30/08/2012,12:10:01,ZZZ
AE0442,1,2,4,30/08/2012,12:08:01,XXX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:07:07.520

假设您的数据看起来与您的示例完全相同：

```
# you can give more meaningful names to the columns if you want. just make sure the number of columns matches
$data = import-csv .\data.txt -Header Col1,Col2,Col3,Col4,Col5,Col6,Col7

# sort all data by the timestamp, then group by the label in column 1
$grouped = $data | sort {[DateTime]::ParseExact("$($_.Col6) $($_.Col5)", 'HH:mm:ss dd/MM/yyyy', $Null)} -Desc | group Col1

# read off the first element of each group (element with latest timestamp)
$grouped |%{ $_.Group[0] } 
```

这也假设您的时间戳是 24 小时制的。即您的所有样本数据都接近中午 12 点，而不是午夜 12 点。午夜后一秒需要指定为“00:00:01”

# ios - 将 Xcode“部署目标”或“基础 SDK”设置为“point oh one”（0.0.1）版本

> ID：12199186
> 
> 赞同：1
> 
> 时间：2012-08-30T14:27:15.423
> 
> 标签：ios, ios, xcode4.4, base-sdk

例如，在 Xcode 4.4.1 中，可以将部署目标设置为[ios](/questions/tagged/ios "显示标记为“ios”的问题")的“第一点”版本；4.3 或 5.1。

![部署目标 - Xcode](../Images/1e000d84254048d8fbe7c52a45678e40.png)

但是，例如，似乎不可能将其设置为“point oh one”版本；4.2.1 转 5.1.1。

这可能吗？如果是这样怎么办？

### 更新

然而，将 Base SDK 设置为“point oh one”版本似乎是可能的：

![基础 SDK - Xcode](../Images/21f88275d59a143b838184bd897b47b9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:41:05.707

该值与目标的摘要屏幕上的值相同。那里称为“部署目标”。
您还可以在项目设置的“信息”选项卡中将其设置为项目范围。
![在此处输入图像描述](../Images/3aaf4993c832ca28e991828e25797fb2.png)

您可以简单地输入框中的值

这将导致这样的构建设置：

![在此处输入图像描述](../Images/643be72afe91f2236df6c8407deeb7d0.png)

# java - 如何在会话中存储数据，以便它也适用于同时登录

> ID：12199198
> 
> 赞同：0
> 
> 时间：2012-08-30T14:27:45.477
> 
> 标签：java, jakarta-ee, servlets

在应用程序启动期间，使用用户的登录 ID，我正在进行数据库调用并加载他的所有帐户并在会话中设置它们，如图所示 `session.setAttribute("userinfo",userinfo);`

在调用数据库之前，我正在使用服务层中的此帐户信息进行检查

现在的问题是，如果一个用户（拥有多个帐户）同时登录到同一个浏览器，它会创建相同的 sessionid，结果会话只有最后登录用户的信息。

无论如何我可以解决这个问题，可能是我存储数据的方式

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:39:56.577

您可以使用[URL 重写](https://stackoverflow.com/questions/6243201/session-shared-in-between-tabs/6244094#6244094)而不是 cookie。缺点是会话 ID 暴露在 URL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:32:15.220

可能不是最好的解决方案，但这将有助于解决问题。

您可以做的是将用户 ID 与 sessionid 相关联，并且在每次页面加载/点击时，您将检查 sessionid 是否与登录用户的用户 ID 匹配。如果匹配，请忽略并照常运行页面，否则您可以从数据库中获取用户信息并再次重新分配变量。

# c++ - 删除windows帐户时如何删除c:\users下的用户帐户文件夹？

> ID：12199201
> 
> 赞同：0
> 
> 时间：2012-08-30T14:27:49.277
> 
> 标签：c++, windows

我正在尝试以编程方式删除 Windows 帐户及其`c:\Users`在`windows 2008R2`.
我在程序中调用`net user [user name] /delete`命令，但它不会删除 . 下的文件夹“用户名” `c:\users`。该`DelectFile`功能不起作用：错误代码为`5`.

有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:37:26.930

错误代码 5 表示“拒绝访问”。要修复它，请检查本地系统帐户是否有权删除该文件夹。您可以使用“cacls”从命令行执行此操作。默认情况下，LocalSystem 应该具有访问权限，作为 Administrators 组的成员，但可能已被删除。如果丢失，请先取得该文件夹的所有权。

另一个问题可能是该文件夹“正在使用”，即打开了句柄并设置了拒绝删除以进行共享。这更难解决。您可能需要先注销用户或等待然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:45:52.980

你不能只 DeleteFile 一个目录。您必须显式地遍历目录的内容，删除每个文件并删除每个子目录。

此外，请注意，用户配置文件文件夹的名称并不总是与用户名相同。映射存储在某个地方的注册表中。

# git - 在 git 中重新创建我的主分支

> ID：12199213
> 
> 赞同：0
> 
> 时间：2012-08-30T14:28:52.073
> 
> 标签：git

我的主分支现在不是最新的，当我从发布分支中提取时，我遇到了太多冲突如何跟踪发布分支并用新代码替换旧代码，我尝试了以下方法：

```
git branch --track master ... 
```

这不起作用，因为主分支已经创建。

```
git breanch --set-upstream master ... 
```

也没有用，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:32:54.397

我只是通过将***-f***添加到 track 命令来解决我的问题

```
git br --track master CC/dev -f 
```

# sql - tsql 中的动态声明

> ID：12199215
> 
> 赞同：1
> 
> 时间：2012-08-30T14:28:58.057
> 
> 标签：sql, sql-server, sql-server-2008, tsql

是否可以进行动态声明？我将解释：我有一张桌子`COLUMNAMES`：

```
ID|Name
 1|Country
 2|City
 3|District
 4|Neighbourhood 
```

对于该表中的每条记录，我想做类似的事情：

```
declare @i int = 1
declare @number int
set @number = (SELECT count(*) FROM COLUMNNAMES)

While @i <= @number
BEGIN
Execute ('Declare column' + @i +'varchar(25)')
Execute ('set column' + @i +' = (Select NAME from COLUMNAMES where id = ' + @i)
set @i = @i + 1
END 
```

这个想法是我得到一个变量列表（字符串），我可以用它来创建带有动态表别名的 SELECT 语句：

```
 Execute ('Select SOMECOLUMN as ' + @columname +  @i +', ANOTHERCOLUMN as ' + @columname +  @i +', ATHIRDCOLUMN as ' + @columname +  @i + ' FROM SOMETABLE') 
```

这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:35:19.257

每个`Execute`功能都作为不同的会话。

因此，为了声明变量，所有代码都必须在一个`Execute`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:32:48.230

不，您不能像这样声明变量，但您可以使用填充数据的临时表。

这里有一些帮助，但它不是一个完整的解决方案，只是一个想法你可以做什么而不是无效的声明：

```
 Create Table #ColumnNames(
        NAME varchar(64) 
    )
    While @i <= @number
    BEGIN
       INSERT INTO #ColumNames
       Select NAME from COLUMNAMES where id = @i
       set @i = @i + 1
    END
DECLARE @Columns varchar(max)
SET @Columns = ''
SElECT @Columns = @Columns + NAME + ', ' 
FROM #ColumNames 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:30:25.930

这不是完整的解决方案，而是一个方向。您需要以某种方式动态获取值**“SomeColumn”**，这可能是您在以下解决方案中获取别名的方式。

```
declare @i int = 1
declare @number INT
DECLARE @ColName VARCHAR(25)
DECLARE @SQL VARCHAR(4000)=''
DECLARE @ColumnsWithAlias VARCHAR(4000) = ''
set @number = (SELECT count(*) FROM COLUMNNAMES)

   While @i <= @number
  BEGIN

Select @ColName= NAME from COLUMNAMES where id =  @i)

SET @ColumnsWithAlias =@ColumnsWithAlias + 'SomeColumn'+ ' AS '+ @ColName + ' , '

   set @i = @i + 1
   END

   SET @SQL= 'SELECT '@ColumnsWithAlias+' FROM  TableName'

  EXECUTE(@SQL) 
```

# ffmpeg - 如何判断ffmpeg是否出错？

> ID：12199216
> 
> 赞同：12
> 
> 时间：2012-08-30T14:28:58.960
> 
> 标签：ffmpeg

**情况：** 我正在使用 ffmpeg（通过 .net）保存视频文件。我可以从 ffmpeg 获取输出，但我不知道如何自定义输出以获得更好的结果。

**我的问题：** 我的问题是，成功和失败的操作没有一定的区别。

> **最后一行成功：**
> 
> 视频：1006kB 音频：134kB 字幕：0 全局标题：0kB 复用开销 0.943510%
> 
> **失败的最后几行**
> 
> c:\x\test-9-8/30/2012-9:29:56-AM.mp4：参数无效
> 
> rtmp://cdn.tv/cdn-live39/definst/stream01 *：*发生未知错误

**我的问题：** 是否有一个选项（或命令行参数）来添加某种返回码（200：成功，500：错误等）

谢谢！

PS：我看到了这个话题[How to tell if ffmpeg error？](https://stackoverflow.com/questions/7390720/how-to-tell-if-ffmpeg-errored?rq=1)但在最后一行之前/之后没有数字。我认为最后一个版本没有编号了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T07:05:34.860

您可以只检查 ffmpeg 返回的退出代码。它应该在成功时返回 0，否则意味着它失败了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-12T11:06:42.550

我知道这已经很老了，但是当我遇到并没有找到其他可靠的答案并且经过更多测试后：

检查返回 0 的建议通常是一个很好的建议 - 但并非在所有情况下都有帮助。检查文件是否存在的另一个想法也很好 - 但同样 - 在所有情况下都没有帮助。

例如，当输入文件是具有嵌入式封面的 mp3 文件时，ffmpeg 确实（在我的测试中）使用此图像并将其提取为（不可用的）视频文件。

我现在要做的是获得调试级别的输出并将其解析为多路数据包的数量。

`ffmpeg -i "wildlife.mp4" -c:v copy -an -sn "out.mp4" -y -loglevel debug 2> wildlife.txt`

使用正则表达式，我搜索此文本：
`Output stream .+ (video): [0-9][0-9]+ packets muxed \([0-9][0-9]+ bytes\)`

（这假设每个视频都有超过 9 个数据包 - 当然可以针对真正的短视频进行优化）。

当然，对于 RTMP 或其他设置，输出可能会有所不同，但我认为解析完整的输出流是唯一的选择。

# c# - NHibernate 确定关键属性

> ID：12199219
> 
> 赞同：1
> 
> 时间：2012-08-30T14:29:08.387
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

我正在尝试在 Firebird 和 MSSQL DB 之间进行通用 DataTransfer。两个业务库都包含“相同”的类，其中包含具有相同名称的属性。

我的问题是，当我有一个带有复合键的映射时，我不知道有多少或哪些属性构建了 id。

因此，使用单个 ID 很容易，它始终是我的映射文件中的第一个属性。

但是，如果我有一个复合 ID 怎么办？我必须确定构建密钥的属性。

我认为这可以通过 de hbm.xml 文件完成，但我不确定这是否可行。

我如何确定哪些属性在运行时构建密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:24:32.587

使用配置，您可以向每个类询问其标识属性

```
foreach(var clazz in config.ClassMappings)
{
    var idProperties = clazz.IdentifierMapper.PropertyIterator
} 
```

或者，如果您只想查询对象是否已经存在（并且实体类型只能在运行时知道）

```
var classMetadata = sessionfactory.GetClassMetadata(obj.GetType());
object id;
if (classMetadata.IdentifierType.IsComponentType)
    id = obj;
else
    id = classMetadata.GetIdentifier(obj, NHibernate.EntityMode.Poco);

fromDatabase = session.Get(classMetadata.EntityName, obj);
if (fromDatabase != null)
    // already exists 
```

# sftp - 通过 SFTP 下载所有源代码文件

> ID：12199225
> 
> 赞同：0
> 
> 时间：2012-08-30T14:29:20.583
> 
> 标签：sftp, mask, batch-processing

我需要将所有代码从服务器备份到本地机器上。我所说的代码是指任何基于文本的文件（.php、.js、.html 等）。服务器包含超过 300GB 的各种媒体（.ogg、.mov、.mp4、.pdf 等），我不想下载它们。

我正在尝试使用 WinSCP 仅下载所需的文件，但它不起作用。我设置了一个“输入掩码”，但无论如何都在下载所有文件。

![在此处输入图像描述](../Images/9422a9d33bb352a5417ce0a90df79b9f.png)

我真的很感激一些建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:36:09.557

您需要在其中添加目录。在这种情况下，由于您似乎希望从每个目录中获取它们，您可以将掩码更改为`*/*.*html; */*.htm`等。

# php - 工具提示：根据请求预加载数据或 ajax

> ID：12199227
> 
> 赞同：3
> 
> 时间：2012-08-30T14:29:22.567
> 
> 标签：php, mysql, ajax

我有一个家庭列表，其中每个家庭 - 在翻转时 - 显示一个工具提示，其中包含有关单个家庭的附加信息（居住地信息和那个地方的 3 张图像）。

那么最佳实践（性能）是什么？在开始时预加载所有数据还是仅在需要时（翻转时）才 ajax 请求数据？

请注意，页面已经包含 3 个 select mysql_queries，并且工具提示的数据提取需要另外 2 个。

***查询（出于搜索复杂性的考虑）：***

**原始3个查询：**

```
SELECT * FROM news ORDER BY bDate DESC LIMIT 5;
SELECT * FROM family ORDER BY created DESC LIMIT 5;
SELECT bplace.placeID, bplace.sName, bplace.countryID, bcountry.regionID FROM bplace, bcountry WHERE bplace.countryID = bcountry.countryID ORDER BY created DESC LIMIT 5; 
```

**Tooltip 2 查询（预加载方式）：**

```
while(...){

$allFamilies[] = $row["familyID"];

}

$allFamilies = implode(',',$allFamilies);

SELECT sName FROM bplace WHERE placeID IN ($allfamilies);
SELECT url FROM images WHERE placeID IN ($allfamilies); 
```

**工具提示 2 查询（ajax 方式）：**

```
SELECT sName FROM bplace WHERE placeID='1';
SELECT url FROM images WHERE placeID='1'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:42:58.390

您只需要考虑您的应用程序将增长到多大。如果你有几千行，你的 IN 查询真的会变慢。ajax 查询将始终快速加载，因为它们是直接查找。

此外，如果可以缓存数据，直接向 CDN 提供 ajax 调用将使其几乎立即加载。如果您不断提取数据并需要扩展 ajax 方法，也可以在密钥库上使用，因为它是主键查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:43:07.057

我不确定您的问题是否有一个普遍的、明确的答案。

要衡量某种性能，您必须考虑更多变量，例如

*   每页将加载多少个工具提示，
*   他们返回的数据有多大，
*   客户端和服务器以及服务器和数据库之间的连接如何，
*   查询需要多长时间，
*   有多少用户同时浏览这些页面，
*   是否涉及缓存

还有很多。

前段时间我在一个项目中遇到了一个非常相似的问题（它也与工具提示有关），我采用了 ajax 方式，主要是因为我想尽可能加快初始页面加载速度（更少的脚本持续时间，更小的 html 大小） . 如果许多用户同时浏览所有的工具提示，那么 ajax 方式实际上会消耗更多的“性能”，但在这个项目中显然不是这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:38:20.860

我认为这都是带有一点常识的偏好。预加载的一千行将需要一些时间来抓取、循环然后显示（使页面大小变大几 kb）。如果只是抓取了几行，那么只抓取这些行而不是等待 AJAX 加载它们可能是有意义的。

另一件要考虑的事情是，数据会改变吗？它会经常改变吗？如果工具提示数据不断变化，那么 AJAX 可能是无论如何都要走的路。如果它主要是静态的，那么将它们全部放在一起可能是有意义的。

Ajax 可能需要一些时间，但除非您的服务器容量很大并且您没有相应地增长，否则这些请求只需要几分之一秒。

最终，这是个人喜好。什么对你来说更容易？对每个工具提示进行硬编码会更容易，还是使用 javascript 调用工具提示数据更容易？选择更容易并且似乎更适合您的网站的内容。

# objective-c - 如何在 iOS 中使用 Reskit 上传文件

> ID：12199228
> 
> 赞同：2
> 
> 时间：2012-08-30T14:29:24.713
> 
> 标签：objective-c, ios, restkit

我将如何使用 Restkit 上传音频文件？我查看了文档，似乎找不到有关上传文件的任何信息。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:37:52.127

本文解释了如何：http: [//mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)

摘抄：

```
NSString* myFilePath = @"/some/path/to/picture.gif";
RKParams* params = [RKParams params];

// Set some simple values -- just like we would with NSDictionary
[params setValue:@"Blake" forParam:@"name"];
[params setValue:@"blake@restkit.org" forParam:@"email"];

// Create an Attachment
RKParamsAttachment* attachment = [params setFile:myFilePath forParam:@"image1"];
attachment.MIMEType = @"image/gif";
attachment.fileName = @"picture.gif";

// Attach an Image from the App Bundle
UIImage* image = [UIImage imageNamed:@"another_image.png"];
NSData* imageData = UIImagePNGRepresentation(image);
[params setData:imageData MIMEType:@"image/png" forParam:@"image2"];

// Let's examine the RKRequestSerializable info...
NSLog(@"RKParams HTTPHeaderValueForContentType = %@", [params HTTPHeaderValueForContentType]);
NSLog(@"RKParams HTTPHeaderValueForContentLength = %d", [params HTTPHeaderValueForContentLength]);

// Send a Request!
[[RKClient sharedClient] post:@"/uploadImages" params:params delegate:self]; 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T14:41:15.463

对于 Restkit 0.20，创建附件时会自动检测 MIME 类型。所以你不需要打电话

```
attachment.MIMEType 
```

在构建参数时：

```
[params setData:imageData MIMEType:attachment.MIMEType forParam:@"image2"]; 
```

看到这个[链接](https://github.com/RestKit/RestKit/tree/development#post-an-object-with-a-file-attachment)

# java - 使用 JDOM 获取 xml 文件中元素的值

> ID：12199231
> 
> 赞同：2
> 
> 时间：2012-08-30T14:29:41.440
> 
> 标签：java, xml, xml-parsing, jdom, jdom-2

我有 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<products xmlns="http://www.myapp.com/shop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.myapp.com/shop shop.xsd">
    <category name="yyy">
        <subcategory name="yyy1">
            <goods name="yyy11">                
                <model>ferrari</model>              
            </goods>
        </subcategory>
    </category>
</products> 
```

我尝试将元素的值`<model>`作为

```
SAXBuilder builder = new SAXBuilder();
File xmlProductFile = new File("shop.xml");
Document document = builder.build(xmlProductFile);
Element rootNode = document.getRootElement();       

String category = rootNode.getChild("model").getText(); 
```

但我得到空值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T14:47:27.377

您*必须*使用`getDescendants(Filter<F>)`方法来选择特定的`Element`

```
Element root = document.getRootElement();
ElementFilter filter = new org.jdom2.filter.ElementFilter("model");
for(Element c : root.getDescendants(filter)) {
    System.out.println(c.getTextNormalize());
} 
```

# c# - Windows 8 - sqlite 问题 - 更新数据库表值 - 属性问题

> ID：12199233
> 
> 赞同：1
> 
> 时间：2012-08-30T14:29:48.040
> 
> 标签：c#, sqlite, windows-8

我正在使用 c#、XAML 和 SQLite 为 Windows 8 开发 Metro 风格应用程序。目前我面临一个问题。我正在使用更新或存储一些细节，但是当我尝试使用以下代码将数据写入 SQLite 时

```
StorageFolder DataFolder = await Package.Current.InstalledLocation.GetFolderAsync("data");
StorageFile DataFile = await DataFolder.GetFileAsync("Test.sqlite");

if ( DataFile != null)
{
    var db = new SQLite.SQLiteConnection(DataFile .Path, SQLiteOpenFlags.ReadWrite);
    SQLiteCommand cmd = new SQLiteCommand(db);
    cmd.CommandText = "UPDATE Test SET Value=1000 WHERE Id = 5";
    cmd.ExecuteNonQuery();
} 
```

但是当程序调试时，当光标出现在“cmd.ExecuteNonQuery()”上时</p>

> SQLite_Sample.exe 中出现“SQLite.SQLiteException”类型的异常，但未在用户代码中处理
> 
> 附加信息：ReadOnly 如果有此异常的处理程序，则程序可以安全地继续。

我想以编程方式为此 SQLite 文件设置权限以实现读写功能。

任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:41:44.707

我认为问题在于您没有打开连接。

```
if ( DataFile != null) 
{ 
    using (var db = new SQLite.SQLiteConnection(DataFile.Path, SQLiteOpenFlags.ReadWrite))
    {
        SQLiteCommand cmd = new SQLiteCommand(db); 
        cmd.CommandText = "UPDATE Test SET Value=1000 WHERE Id = 5"; 
        db.Open();
        cmd.ExecuteNonQuery(); 
    }
} 
```

并记住使用参数化命令。

# c# - 在其父级边界之外的用户控件内显示控件

> ID：12199235
> 
> 赞同：8
> 
> 时间：2012-08-30T14:29:52.463
> 
> 标签：c#, winforms, user-controls, floating

我有一个包含文本框和列表框的用户控件，它使用它们为用户提供自动完成功能。

但是，我希望将列表框绘制在用户控件的边界之外，以便在必须在用户控件的边缘附近绘制列表框时它不会被截断。关于如何做到这一点的任何提示？本质上，我想要一个列表框浮动在其容器控件的边界之外。

我能想到的唯一方法是在实例化时将对外部列表框的引用传递给用户控件，然后操纵该列表框而不是将其放在用户控件中，但我不喜欢这种方法。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:46:44.433

问题是，您无法逃脱容器表单的界限，但您可以将控件托管在其他地方。

这是我通过滥用 ToolstripDropDown 类得到的工作（我用它在大型企业应用程序中显示日期选择器）：

```
/// <summary>
/// PopupHelper
/// </summary>
public sealed class PopupHelper : IDisposable
{
    private readonly Control m_control;
    private readonly ToolStripDropDown m_tsdd;
    private readonly Panel m_hostPanel; // workarround - some controls don't display correctly if they are hosted directly in ToolStripControlHost

    public PopupHelper(Control pControl)
    {
        m_hostPanel = new Panel();
        m_hostPanel.Padding = Padding.Empty;
        m_hostPanel.Margin = Padding.Empty;
        m_hostPanel.TabStop = false;
        m_hostPanel.BorderStyle = BorderStyle.None;
        m_hostPanel.BackColor = Color.Transparent;

        m_tsdd = new ToolStripDropDown();
        m_tsdd.CausesValidation = false;

        m_tsdd.Padding = Padding.Empty;
        m_tsdd.Margin = Padding.Empty;
        m_tsdd.Opacity = 0.9;

        m_control = pControl;
        m_control.CausesValidation = false;
        m_control.Resize += MControlResize;

        m_hostPanel.Controls.Add(m_control);

        m_tsdd.Padding = Padding.Empty;
        m_tsdd.Margin = Padding.Empty;

        m_tsdd.MinimumSize = m_tsdd.MaximumSize = m_tsdd.Size = pControl.Size;

        m_tsdd.Items.Add(new ToolStripControlHost(m_hostPanel));
    }

    private void ResizeWindow()
    {
        m_tsdd.MinimumSize = m_tsdd.MaximumSize = m_tsdd.Size = m_control.Size;
        m_hostPanel.MinimumSize = m_hostPanel.MaximumSize = m_hostPanel.Size = m_control.Size;
    }

    private void MControlResize(object sender, EventArgs e)
    {
        ResizeWindow();
    }

    /// <summary>
    /// Display the popup and keep the focus
    /// </summary>
    /// <param name="pParentControl"></param>
    public void Show(Control pParentControl)
    {
        if (pParentControl == null) return;

        // position the popup window
        var loc = pParentControl.PointToScreen(new Point(0, pParentControl.Height));
        m_tsdd.Show(loc);
        m_control.Focus();
    }

    public void Close()
    {
        m_tsdd.Close();
    }

    public void Dispose()
    {
        m_control.Resize -= MControlResize;

        m_tsdd.Dispose();
        m_hostPanel.Dispose();
    }
} 
```

用法：

```
 private PopupHelper m_popup;
    private void ShowPopup()
    {
        if (m_popup == null)
            m_popup = new PopupHelper(yourListControl);

        m_popup.Show(this);
    } 
```

# makefile - 在创建顶部目标时告诉“make”忽略依赖项

> ID：12199237
> 
> 赞同：24
> 
> 时间：2012-08-30T14:29:59.767
> 
> 标签：makefile, gnu-make

我正在运行以下类型的管道：

```
digestA: hugefileB hugefileC
    cat $^ > $@
    rm $^

hugefileB:
    touch $@

hugefileC:
    touch $@ 
```

目标**hugefileB**和**hugefileC**非常大，需要很长时间来计算（并且需要 Make 的力量）。但是一旦创建了**digestA**，就不需要保留它的依赖关系：它会删除这些依赖关系以释放磁盘空间。

现在，如果我再次调用'make'，**hugefileB**和**hugefileC**将被重建，而**digestA**已经可以了。

有没有办法告诉'make'避免重新编译依赖项？

注意：我不想在“digestA”的规则中构建两个依赖项。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T15:03:58.370

使用GNU Make 的[“中间文件”功能：](http://www.gnu.org/software/make/manual/make.html#Chained-Rules)

> 就像所有其他文件一样，使用它们的规则重新制作中间文件。但是中间文件有两种不同的处理方式。
> 
> 第一个区别是如果中间文件不存在会发生什么。如果一个普通文件 b 不存在，并且 make 考虑一个依赖于 b 的目标，它总是创建 b 然后从 b 更新目标。**但是如果 b 是一个中间文件，那么 make 就可以不用管它了。它不会打扰更新 b 或最终目标，除非 b 的某些先决条件比该目标更新或有其他原因更新该目标。**
> 
> 第二个区别是，如果 make 确实创建 b 以更新其他内容，它会在不再需要 b 后删除它。**因此，在 make 之前不存在的中间文件在 make 之后也不存在。**make 通过打印`rm -f`显示正在删除的文件的命令向您报告删除情况。
> 
> 通常，如果在 makefile 中将文件作为目标或先决条件提及，则该文件不能是中间文件。**但是，您可以通过将文件列为特殊目标的先决条件来将文件显式标记为中间文件`.INTERMEDIATE`。**即使以其他方式明确提及文件，这也会生效。
> 
> **您可以通过将中间文件标记为辅助文件来防止自动删除它。**为此，请将其列为特殊目标的先决条件`.SECONDARY`。当一个文件是次要文件时，make 不会仅仅因为它不存在而创建该文件，但 make 不会自动删除该文件。将文件标记为次要文件也将其标记为中间文件。

因此，将以下行添加到 Makefile 就足够了：

```
.INTERMEDIATE : hugefileB hugefileC 
```

第一次调用make：

```
$ make
touch hugefileB
touch hugefileC
cat hugefileB hugefileC > digestA
rm hugefileB hugefileC 
```

下一次：

```
$ make
make: `digestA' is up to date. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:04:36.407

如果将`hugefileB`和标记`hugefileC`为[中间文件](http://www.gnu.org/software/make/manual/make.html#Chained-Rules)，您将获得所需的行为：

```
digestA: hugefileB hugefileC
        cat $^ > $@

hugefileB:
        touch $@

hugefileC:
        touch $@

.INTERMEDIATE: hugefileB hugefileC 
```

例如：

```
$ gmake
touch hugefileB
touch hugefileC
cat hugefileB hugefileC > digestA
rm hugefileB hugefileC
$ gmake
gmake: `digestA' is up to date.
$ rm -f digestA
$ gmake
touch hugefileB
touch hugefileC
cat hugefileB hugefileC > digestA
rm hugefileB hugefileC 
```

请注意，您不再需要显式`rm $^`命令 - gmake 会在构建结束时自动删除中间文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:40:13.587

我建议您创建由`hugefileB`和`hugeFileC`目标创建的伪缓存文件。

然后`digestA`依赖这些缓存文件，因为您知道它们不会再次更改，直到您手动调用昂贵的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-06T18:40:03.997

另请参阅[.PRECIOUS](https://www.gnu.org/software/make/manual/html_node/Special-Targets.html#index-_002ePRECIOUS)：

```
.PRECIOUS : hugefileA hugefileB 
```

> 。宝贵的
> 
> .PRECIOUS 所依赖的目标被给予以下特殊处理：如果 make 在其配方执行期间被杀死或中断，则不会删除目标。请参阅中断或终止 make。此外，如果目标是中间文件，则在不再需要后不会像通常那样将其删除。请参阅隐式规则链。在后一方面，它与 .SECONDARY 特殊目标重叠。
> 
> 您还可以将隐式规则的目标模式（例如“%.o”）列为特殊目标 .PRECIOUS 的先决条件文件，以保留由目标模式与该文件名匹配的规则创建的中间文件。

编辑：在重新阅读问题时，我发现您不想保留大文件；也许这样做：

```
digestA : hugefileA hugefileB
    grep '^Subject:' %^ > $@
    for n in $^; do echo > $$n; done
    sleep 1; touch $@ 
```

它在使用之后截断大文件，然后在一秒钟后触摸输出文件，只是为了确保输出比输入更新，并且在删除空的大文件之前，该规则不会再次运行。

不幸的是，如果只删除摘要，则运行此规则将创建一个空摘要。您可能想要添加代码来阻止它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-30T14:46:50.637

正确的方法是不删除文件，因为这会删除`make`用于确定是否重建文件的信息。

将它们重新创建为空并没有帮助，因为`make`它将假设空文件已完全构建。

如果有一种方法可以合并摘要，那么您可以从每个大文件中创建一个，然后将其保留，并且大文件会自动删除，因为它是一个中间文件。

# c# - 在实体框架中有条件地包含（）

> ID：12199242
> 
> 赞同：4
> 
> 时间：2012-08-30T14:30:13.540
> 
> 标签：c#, .net, entity-framework

我将 EF4.3 与 DbContext 一起使用。

我有一个存储在缓存中的实体，因此在转换为列表并将其弹出缓存之前，我需要预先加载必要的数据。

我的数据库已标准化，因此数据分布在多个表中。基本实体是“用户”，用户可能是也可能不是“订阅者”，订阅者可以是“贡献者”、“成员”或“管理员”三种类型之一

由于我缺乏 EF、Linq 等方面的知识，目前整个 fetch 不是很优雅。

```
 public static User Get(Guid userId)
    {
        Guard.ThrowIfDefault(userId, "userId");

        var r = new CrudRepo<User>(Local.Items.Uow.Context);

        var u = r.FindBy(x => x.UserId == userId)
            .Include("BookmarkedDeals")
            .Include("BookmarkedStores")
            .SingleOrDefault();

        if (u.IsNotNull() && u.IsActive)
        {
            if (u.IsAdmin)
            {
                u.GetAdministrator();
            }
            else if (u.IsContributor)
            {
                u.GetContributor();
            }
            else if (u.IsMember)
            {
                u.GetMember();
            }
            else
            {
                string.Format("Case {0} not implemented", u.UserRoleId)
                    .Throw<NotImplementedException>();
            }
        }

        return u;
    } 
```

每个“Get”方法都获取一个订阅者实体以及角色类型的相关 Include() 实体。

我很确定它可以做得比这更优雅，但在最初的思考过程中挣扎。

有人帮忙吗？

更新了 Get 方法之一的示例

```
 public static void GetMember(this User user)
    {
        Guard.ThrowIfNull(user, "user");

        var r = new ReadRepo<Subscriber>(Local.Items.Uow.Context);

        user.Subscriber = r.FindBy(x => x.UserId == user.UserId)
            .Include("Kudos")
            .Include("Member.DrawEntries")
            .Include("Member.FavouriteCategories")
            .Include("Member.FavouriteStores")
            .Single();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:08:19.763

```
var u = r.FindBy(x => x.UserId == userId)
        .Include("BookmarkedDeals")
        .Include("BookmarkedStores")
        .SingleOrDefault();

if(someCondition)
{
    u = u.Include("something");
} 
```

没有地方可以测试这个，但你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:51:38.830

如果您的“用户”实体连接到您的其他实体，您可以使用连接实体集合的 Load 方法来获取相关实体。例如，如果您的“用户”实体具有属性“订阅者”，您可以调用 u.Subscriber.Load() 来获取相关实体。这是相关的[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb896376.aspx)

# c++ - Windows 上的愚蠢

> ID：12199245
> 
> 赞同：15
> 
> 时间：2012-08-30T14:30:16.230
> 
> 标签：c++, visual-c++, folly

有没有人真正成功地在 MSVC 上使用 Folly（例如 fbvector 等）类？

我找不到任何有意义的信息，例如，它因为找不到 folly-config.h 而无法编译，而我在网上找到的唯一东西是一个 github 修订版，它“被删除，因为它是由 Configure 自动创建的”和信息关于这个配置是什么以及如何启动它无处可寻。

# git - 从 FTP 切换到 GIT 进行部署

> ID：12199250
> 
> 赞同：2
> 
> 时间：2012-08-30T14:30:31.490
> 
> 标签：git, web-deployment

我已经开发 Web 应用程序超过 4 年了，并且习惯了常规的工作流程

*   在本地机器上构建
*   FTP到实时服务器
*   进行更改并再次 FTP 到实时服务器

这种模式变得有点痛苦，因为我有时会忘记我处理的文件。我已经看到很多关于使用 GIT 进行部署的信息。我在 GitHub 上使用了基本的 GIT；提交和克隆。对于如何使用 GIT 进行部署，我有点迷茫。我目前可以访问用于我当前项目的 centos VPS 服务器。我如何将 GIT 整合到我的工作流程中以使部署变得轻松一些。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:51:11.703

如果您使用 maven 来维护您的项目，那么这很容易做到。您可以使用 Maven 部署插件，您需要包含要部署到的服务器，通过在 Setting.xml 中包含服务器。这将验证用户到服务器

```
 <settings>
  ...
  <servers>
    <server>
      <id>ftp-repository</id>
      <username>user</username>
      <password>pass</password>
    </server>
  </servers>
  ...
</settings> 
```

然后最后需要在 Setting.xml 和 Transport 插件中创建链接到服务器的分发，以将工件发送到远程服务器。例如

```
<project>
  ...
  <distributionManagement>
    <repository>
      <id>ftp-repository</id>
      <url>ftp://repository.mycompany.com/repository</url>
    </repository>
  </distributionManagement>

  <build>
    <extensions>
      <!-- Enabling the use of FTP -->
      <extension>
        <groupId>org.apache.maven.wagon</groupId>
         <artifactId>wagon-ftp</artifactId>
         <version>1.0-beta-6</version>
      </extension>
    </extensions>
  </build>
  ...
</project> 
```

然后很好地按命令去`mvn deploy`

更多你可以看看[maven deploy](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ftp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:57:02.310

Git 是一个版本控制工具，而不是部署工具。Git 中有一些约定支持良好的部署实践，例如使用主分支来维护实时代码，但其目的是为您的代码提供源代码控制。将代码推送到生产环境（或任何环境）需要不同的工具。

如果您希望自动化部署，您可以查看 WebDeploy 或 Rake 等工具。这些与 git 完全分开。

如果您希望减少已切换到 git 的部署中的步骤数，您可以查看 AppHarbor。部署代码所需要做的就是“推送”到 AH 存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T22:21:26.173

查看这篇文章：http: [//joemaller.com/990/a-web-focused-git-workflow/](http://joemaller.com/990/a-web-focused-git-workflow/)

我作为 Web 开发人员 24/7 全天候使用这个工作流程（现在已经使用了大约 2 个月），没有任何问题。

权限得到维护。

# html - 没有 javascript 的 IE6 上的响应式网页布局

> ID：12199253
> 
> 赞同：-1
> 
> 时间：2012-08-30T14:30:33.453
> 
> 标签：html, css, responsive-design

是否可以在不使用 javascript 的情况下为 IE6 创建响应式网站设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:36:19.240

查看[优雅降级媒体查询的技术](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/)。

他们列出了以下方式：

1.  技巧1：什么都不做
2.  技巧 2：条件 IE 样式表
3.  技巧三：规避媒体查询条件
4.  技巧 4：Respond.js
5.  技巧 5：CSS3-MediaQueries-js

所以基本上你会摆弄polyfills，我知道的javascript，或者去寻找一些有条件的IE样式表。

所以基本上：IE6 仍然很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:15:39.090

没有JS没办法，没有IE6。这个库（[点击这里](https://github.com/scottjehl/Respond)）是 IE6 的一个 polyfill，用于添加对媒体查询等的支持，并且可以满足您的需求。

# php - 带有多个模板的 WordPress 小部件

> ID：12199254
> 
> 赞同：0
> 
> 时间：2012-08-30T14:30:35.060
> 
> 标签：php, wordpress

我的小部件主题中有两个区域。但是如果我想为同一个小部件定义两个不同的模板该怎么办？小部件在 X 区域中时的模板和在 Y 区域中时**相同**小部件的其他模板。

小部件的格式是正常的：

```
class some_widget extends WP_Widget {

    function some_widget() { .. }

    function widget() { .. }

    function update() { .. }

    function form() { .. }

} 
```

`widget()`包括小部件的模板。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:19:10.020

在小部件功能的第一个参数中，您会找到侧边栏的 id 和名称，例如：

```
public function widget( $args, $instance ) {
  if ($args['id']=='sidebar-1') {
    // do something
  } else {
    // do something else
  }
} 
```

要获取侧边栏的名称而不是 id，只需使用`$args['name']`

但是在尝试之前，您是否尝试过不同的 CSS 规则？

# java - JUnit + Apache Camel

> ID：12199260
> 
> 赞同：1
> 
> 时间：2012-08-30T14:31:03.127
> 
> 标签：java, spring, junit, apache-camel

假设我有这两条路线

```
<camelContext> 
    <route>
        <from ref="incoming" />
        <!-- some processors -->
        <inOnly ref="outgoing" />
    </route>

    <route>
        <from ref="outgoing" />
        <!-- some processors -->
        <inOnly ref="finish" />
    </route>
</camelContext> 
```

在实际上下文中，它们是 JMS 队列，这很好。但我想测试路由是否正确，所以我将 testContext.xml 中的 JMS 组件更改为：

```
incoming -> direct
outgoing -> mock
finish -> mock 
```

我希望那些 inOnly 队列是模拟的，所以我可以测试它们的消息数量。问题是模拟队列不能用作第二条路由中的输入队列。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:57:02.107

在使用 Camel 和 JMS 进行自动化集成 JUnit 测试时，我通常会[嵌入一个 ActiveMQ 代理。](http://activemq.apache.org/how-to-unit-test-jms-code.html)

我还会考虑一个更简单的场景，您将“传出”作为[seda](http://camel.apache.org/seda.html)端点。然后你只需要检查“完成”模拟端点的消息，你就知道整个路由是有效的。对于更复杂的路由场景，在 JUnit 测试中覆盖它需要一些思考，如果你应该这样做的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:17:11.273

您可以使用存根组件而不是 JMS 等。它是引擎盖下的 seda/vm 队列，因此您可以从中发送和使用消息 [http://camel.apache.org/stub](http://camel.apache.org/stub)

# jquery - 如何在使用位置时将元素定位在窗口中间：绝对？

> ID：12199262
> 
> 赞同：1
> 
> 时间：2012-08-30T14:31:14.453
> 
> 标签：jquery, dom, css-position

这是我想要做的：我有一个弹出小部件，当用户单击链接时会出现。

无论用户向上或向下滚动多少，我需要将此小部件放置在屏幕中间，但不要阻止他在弹出窗口可见后滚动页面。

由于我不知道小部件将被附加到哪里（它是动态创建的），我不认为 CSS 解决方案对我有好处

小部件是用 jQuery 编写的

这是当前在用户点击链接时进行定位的代码：

```
$(this).css({
        position: 'absolute',
        top: $(document).scrollTop() + $(this).height() / 2,
        left: '50%',
        'margin-left': -($(this).width()/2),
        'z-index': 50
    }); 
```

这工作得很好，但是当小部件位于相对定位的元素内时我遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:42:16.917

`<div id="widgetContainer"></div>`您应该在主体顶部创建一个，并在用户单击链接时将活动小部件移动到其中。这将解决相对定位的问题。您可以使用 jQuery 的 clone() 方法。

```
function showWidget(id)
{
    /* Perform other actions to setup your widget */
    $('#widgetContainer').html("");
    $('#' + id).clone().appendTo('#widgetContainer');
} 
```

记得让 widgetContainer 相对（CSS）

```
#widgetContainer {
    position: relative;
} 
```

如果您同时使用@Simon-Arnolds CSS 修复程序，应该可以解决您的问题

```
left: $('body').width() / 2, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:48:17.593

参考**车身**宽度/2 而不是 50%

```
$(this).css({
  position: 'absolute',
  top: $(window).height() / 4,
  left: ($(this).parent().offset().left * -1) + ($('body').width() / 2),
  'margin-left': -($(this).width()/2),
  'z-index': 50
}); 
```

# ipad - Jquery 文档与 div 类或 id 绑定以用于翻书下一页

> ID：12199263
> 
> 赞同：0
> 
> 时间：2012-08-30T14:31:17.410
> 
> 标签：ipad, jquery-mobile

我正在为 IPAD 制作一本翻书。我的刷卡代码完美运行：

```
 $(document).bind("zoom.swipeleft", function (e) {
        $("#mybook").turn('next');
    });
    $(document).bind("zoom.swiperight", function (e) {
        $("#mybook").turn('previous');
    }); 
```

正如预期的那样，这将按顺序 1、2、3、4 翻页。

我的第二个代码无法正常工作：

```
 $("#nextPg").click(function (e) {
        e.turn($("#mybook").turn('next'));
        });

        $("#prvPg").click(function (e) {
            $("#mybook").turn('previous');
        }); 
```

这会在`next`> 1,2,4,6,8（数字未正确递增）上打开这样的页面，但是在`previous`< 6,5,4,3,2,1 上可以完美运行。

我可以绑定 document.bind（从 div 到我的“#nextPg”以获得与刷卡代码相同的效果。）

# eclipse - 如何启用或禁用 eclipse 新向导？

> ID：12199264
> 
> 赞同：0
> 
> 时间：2012-08-30T14:31:16.357
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我的 RCP 应用程序（基于 Eclipse 基础结构）有几个模块。这些模块可以根据应用程序的状态启用或禁用，并且此信息可通过[变量](http://wiki.eclipse.org/Command_Core_Expressions "变量")获得（您可以考虑活动透视图）。

此外，每个模块都有助于新向导（扩展点“org.eclipse.ui.newWizards”）为用户提供创建某些元素的能力。但只有在启用模块时才允许这样做......

有没有办法根据 RCP 应用程序的状态启用或禁用“新向导”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:30:05.913

我认为您正在寻找 Eclipse 中的活动和上下文。

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fworkbench_advext_activities.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fworkbench_advext_activities.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T16:05:11.983

根据我的经验，这是自动完成的。也就是说，如果您的向导所属的插件没有加载，您的向导将自动被排除在RCP活动扩展之外。

# javascript - Watir 和 Javascript 按钮

> ID：12199265
> 
> 赞同：1
> 
> 时间：2012-08-30T14:31:24.517
> 
> 标签：javascript, button, watir

如何单击 Watir 中定义如下的按钮：

```
<div id="divAddCompany" onclick="AddComp()">
<span>Add company</span>
</div> 
```

JavaScript 代码如下所示：

```
 function AddComp() {
    HideComp();
    $(hide).css({ visibility: "visible", height: "auto" });
    var a = document.getElementById("divSave");
    a.onclick = InsertCompany;
} 
```

我在 Watir 试过：

```
browser.text_field(:id, "Add company").click
browser.button(:name, "Add company").fire_event
browser.div(:name, /divAddCompany/).button(:value, "Add company").click 
```

还有其他建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:54:21.153

它适用于：

```
browser.div(:id, "divAddCompany").click 
```

# coq - 在 Coq 中泛化存在变量

> ID：12199271
> 
> 赞同：1
> 
> 时间：2012-08-30T14:31:39.373
> 
> 标签：coq

我试图证明`P ?x`, where`P : A -> Prop`和`?x : A`是一个存在变量。我可以证明`forall a:A, P a`，所以我需要推广`P ?x`到`forall a:A, P a`。

如果 ?x 是一个实例化变量 x，我可以简单地使用`generalize x`来生成`forall x:A, P x`. 然而，当我尝试`generalize ?x`时，Coq 返回一个语法错误。

这可能吗？我已经检查过了，Coq 似乎没有提供一种直观的方式来概括关于存在变量的陈述。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:03:23.420

`P ?x`不等价于`forall x, P x`，甚至不被它暗示。为了证明`P ?x`，你需要找到一些`a`这样`P a`成立的。有了你的假设，找到一些就足够了`a : A`。换句话说，你需要证明域不为空（或者更准确地说，你需要证明域中存在一个元素）。

在这里，如果你有一些`a : A`，你可以使用`instantiate (1 := A)`. 愚蠢的例子：

```
Parameter A : Set.
Parameter P : A -> Prop.
Goal (forall a, P a) -> A -> exists x, P x.
Proof.
  intros H a. eexists. instantiate (1 := a). apply H.
Qed. 
```

# jquery - 单击时更改颜色文本和字体粗细

> ID：12199275
> 
> 赞同：0
> 
> 时间：2012-08-30T14:32:02.037
> 
> 标签：jquery, onclick

这是我的代码段：

[http://jsfiddle.net/STqCF/115/](http://jsfiddle.net/STqCF/115/)

当我点击链接时，我需要文本变为红色，字体粗体为粗体

如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:13:03.303

在这里修复了您的问题，添加了一行修复和 css：

[http://jsfiddle.net/STqCF/120/](http://jsfiddle.net/STqCF/120/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:39:41.057

您可以像这样添加一个 css 类：

```
.test a
{
    font-weight:bold;
    color:Red;
}​ 
```

然后将其添加到“显示隐藏”绑定中：

```
 $('.accordion').on('show hide', function(e){
    $(e.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-arrow-down icon-arrow-up', 200);

    $(this).toggleClass('test');
}); 
```

# magento - 如何在产品页面的标 签中显示评论表单以及评论

> ID：12199276
> 
> 赞同：0
> 
> 时间：2012-08-30T14:32:05.020
> 
> 标签：magento, product, catalog, review

> **可能重复：**
> [如何在产品视图页面上添加评论选项卡](https://stackoverflow.com/questions/12193634/how-to-add-review-tab-on-product-view-page)

如何在产品页面的标​​签中显示评论表单以及评论。我在 catalog.xml 中执行以下操作

```
<!--action method="addTab" translate="title" module="catalog"><alias>review</alias><title>Review</title><block>review/product_view_list</block><template>review/product/view/list.phtml</template></action--> <!--For getting the review datails-->

<action method="addTab" translate="title" module="catalog"><alias>review</alias><title>Review</title><block>review/form</block><template>review/form.phtml</template></action>  <!--For displaying review form--> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:57:53.540

这就是我在我的一个项目中处理这种情况的方式：

添加带有评论的标签

```
<block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >
    <action method="addTab" translate="title" module="catalog"><alias>tab_review_list</alias><title>Product Reviews</title><block>review/product_view_list</block><template>catalog/product/view/tabs/reviews.phtml</template></action>
</block> 
```

现在，评论表单由不同类型的块处理，通常是评论页面的子块。没有办法用`addTab`动作制作嵌套块，但您可以`<reference>`在标签中创建审查块后使用处理程序，如下所示：

```
<reference name="tab_review_list">
  <block type="review/form" name="tab_review_form" as="review_form" template="catalog/product/view/tabs/review_form.phtml" />
</reference> 
```

`name`in `<reference>`handler 必须等于 in`<alias>`在`addTab`action

而在`catalog/product/view/tabs/reviews.phtml`你只是使用

```
 echo $this->getChildHtml('review_form'); 
```

您可以使用`<reference>`处理程序将更多块添加到审阅列表和审阅表单。

当然，您必须在`template`参数中输入的路径中创建评论列表和评论表单的文件，因此在这种情况下您需要创建`catalog/product/view/tabs/reviews.phtml`和`catalog/product/view/tabs/review_form.phtml`. `review/form.phtml`如果您不需要更改那里的代码，或者您将仅在该选项卡中使用它，您可以将审阅表单模板更改为默认模板，但审阅列表可能需要对 html 结构进行更多更改，因此最好为其创建单独的文件并根据需要使用部分默认代码。

# c++ - 如何实现 BOOST_TYPEOF？

> ID：12199280
> 
> 赞同：11
> 
> 时间：2012-08-30T14:32:06.887
> 
> 标签：c++, boost, types

这里想了解一下实现BOOST_TYPEOF的大致思路。我的意思是代码可能没问题，但我想代码不会简单，因为它是真正的 Boost 实现。所以想了解一下BOOST_TYPEOF实现的思路。它是否使用编译器函数（某些 API）来理解编译时表达式的类型？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T14:49:59.203

Boost::Typeof 的核心是使用`sizeof`非求值上下文将表达式的类型转换为整数，然后再将其转换回类型。

考虑：

```
template<int N> struct sizer { char value[N]; };

sizer<1> encode(char);
sizer<2> encode(unsigned char);
sizer<3> encode(signed char);
sizer<4> encode(bool);
...

template<int N> struct decode {};
template<> struct decode<1> { typedef char type; };
template<> struct decode<2> { typedef unsigned char type; };
template<> struct decode<3> { typedef signed char type; };
template<> struct decode<4> { typedef bool type; };

#define TYPEOF(expr) decode<sizeof(encode(expr))>::type 
```

现在，给定一个计算结果为任何`char`类型或的表达式`bool`，我们可以写：

```
TYPEOF(expr) var = expr; 
```

Boost::Typeof 本质上是这个想法的扩展，最初是由 Brian Parker 在 1997 年发明的；有关该想法的讨论和历史，请参阅[便携式“typeof”运算符。](http://www.drdobbs.com/a-portable-typeof-operator/184401310)

* * *

模板对于这个方案来说有点问题。即使在递归之前，也可以简单地`std::pair`给出类型空间的平方。Boost::Typeof 通过将模板类型及其参数类型编码到编译时链表的连续槽中来解决这个问题：

```
template<typename List> struct sizer {
    char item0[List::at<0>];
    char item1[List::at<1>];
    char item2[List::at<2>];
    ...
};

template<typename List> struct encode_type<List, char>: append<List, 1> {};
template<typename List> struct encode_type<List, unsigned char>: append<List, 2> {};
template<typename List, typename S, typename T>
struct encode_type<List, std::pair<S, T> >:
    encode_type<encode_type<append<List, 99>, S>, T> {};

template<typename Iter> struct decode_type<1, Iter> {
    typedef char type;
    typedef Iter iter;
};
template<typename Iter> struct decode_type<2, Iter> {
    typedef unsigned char type;
    typedef Iter iter;
};
template<typename Iter> struct decode_type<99, Iter> {
    typedef typename decode_type<Iter::next::value, Iter::next>::type S;
    typedef typename decode_type<Iter::next::value, Iter::next>::iter S_iter;
    typedef typename decode_type<S_Iter::next::value, S_Iter::next>::type T;
    typedef typename decode_type<S_Iter::next::value, S_Iter::next>::iter T_iter;
    typedef std::pair<S, T> type;
    typedef T_iter iter;
};

template<typename List, typename T>
sizer<typename encode_type<List, T>::type> encode(const T&);

template<typename List> struct decode {
    typedef typename decode_type<List::begin::value, List::begin>::type type; };

#define TYPEOF(expr) decode<list<
    sizeof(encode(expr).item0),
    sizeof(encode(expr).item1),
    sizeof(encode(expr).item2),
    ...
    > >::type 
```

这假定现有的编译时链表实现。您会注意到解码器`std::pair`从列表迭代器中消耗与其参数类型所需的一样多的项目；这本质上是对具有非可变类型的语言的等效功能代码的直接翻译。

在标记为省略号的两行中，`...`我们被限制在一个固定的类型复杂度水平（即构成我们想要推断的类型的模板和类型的数量）。Boost::Typeof 对此限制的默认值为 50，但可以让您降低它以提高效率或增加它以用于疯狂复杂的程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T14:56:41.240

它基于`sizeof`编译时运算符的思想，可以用作模板参数。通过这种方式，我们可以为每种类型分配一个整数，并且该整数可用于返回该类型。缺点是每种类型都必须手动注册。

例如：

```
#include <boost/preprocessor/stringize.hpp>
#include <cstddef>
#include <iostream>

template<size_t> struct TypeId;

#define REGISTER_TYPE(T, id)                                    \
template<> struct TypeId<id> {                                  \
    char value[id];                                             \
    typedef T type;                                             \
    static char const* const name;                              \
};                                                              \
char const* const TypeId<id>::name = BOOST_PP_STRINGIZE(T);     \
TypeId<id> type_to_id(T);

#define TYPEID_(value) TypeId<sizeof(type_to_id(value))>
#define TYPEOF(value) typename TYPEID_(value)::type
#define TYPENAME(value) TYPEID_(value)::name

REGISTER_TYPE(int, 1)
REGISTER_TYPE(unsigned int, 2)
// and so on for all built-in types

int main() {
    int x;
    TYPEOF(x) y;
    std::cout << TYPENAME(y) << '\n';
} 
```

输出：

```
./test
int 
```

# perl - 将字符串“20-May-07”转换为日期并进行操作

> ID：12199284
> 
> 赞同：0
> 
> 时间：2012-08-30T14:32:20.210
> 
> 标签：perl, datetime

在我的 perl 程序中，我从保修结束日期计算保修开始日期，相差 3 年。以下是我到目前为止编写的代码块：

```
use Time::ParseDate;
use DateTime;
use POSIX;
use DateTime::Duration;

my $warranty_expiration_string = "20-May-07";
my $epoch = parsedate($warranty_expiration_string);
my $warranty_expiration = strftime "%D", localtime($epoch);   # returns: 05/20/07 
```

我如何从`$warranty_expiration`获得`$warranty_start`日期减去 3 年？
我试过，

```
$warranty_start->subtract(DateTime::Duration->new('years' => 3)); 
```

..但它没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:48:06.103

我不明白所有不同的日期/时间模块混合在一起。你只需要其中的一部分，而不是全部。如果你想用[DateTime](https://metacpan.org/module/DateTime)做日期数学，你想要这样的东西：

```
use DateTime;
use DateTime::Format::Strptime;

my $dateparser = DateTime::Format::Strptime->new( pattern => '%d-%b-%y' );

my $warranty_expiration = $dateparser->parse_datetime($warranty_expiration_string);
my $warranty_start      = $warranty_expiration->clone->subtract( years => 3); 
```

大多数 DateTime::Format::* 模块都旨在与 DateTime 一起使用，如果可以的话，我更喜欢使用它们。

您可能还想阅读更多关于正在进行的 DateTime 项目和推荐模块列表的信息：

*   [http://datetime.perl.org](http://datetime.perl.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:38:30.743

`$warranty_expiration`不是日期时间，它是一个字符串。你想做这样的事情：

```
my $warranty_expiration = DateTime->from_epoch(
    epoch => $epoch,
    time_zone => 'local',
);
my $warranty_start = $warranty_expiration->clone->subtract(years => 3); 
```

然后你可以使用`$warranty_expiration->strftime("%D")`和`$warranty_start->strftime("%D")`作为格式化字符串。此外，如果您使用其中一个`DateTime::Format`模块而不是`Time::ParseDate`，您将`DateTime`直接从解析器返回 a 而不必使用`from_epoch`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T14:37:17.500

无需为此实例化`DateTime::Duration`，因为计算方法直接期望这些参数：

```
use DateTime;
my $dt = DateTime->now->subtract(years => 3);
print "$dt\n"; 
```

结果：

```
2009-08-30T14:36:27 
```

# c# - 使用通用回调是不好的形式吗？

> ID：12199290
> 
> 赞同：4
> 
> 时间：2012-08-30T14:32:40.490
> 
> 标签：c#, multithreading, generics, callback

我有这个代码（嗯，类似的东西）。

```
private delegate void GenericCallback<T>(T Info);

private void DoWork()
{
    System.Threading.Thread Worker = new System.Threading.Thread(
            delegate() 
            {
                TestMethod(TestMethodCallback<string>);
            }
    );
    Worker.Start();
}

private void TestMethod(GenericCallback<string> Callback)
{
    System.Threading.Thread.Sleep(1000);
    if(Callback != null)
    {
        Callback("Complete");
    }
}

private void TestMethod(GenericCallback<int> Callback)
{
    System.Threading.Thread.Sleep(1000);
    if(Callback != null)
    {
        Callback(25);
    }
}

private void TestMethodCallback<T>(T Info)
{
    MessageBox.Show(Info.ToString());
} 
```

这允许我根据参数的类型调用不同的版本`TestMethod`，同时还允许我有一个回调方法。

这是不好的形式，还是公认的做法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T14:35:53.420

看起来您可能正在寻找[Action 委托类型](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)。它基本上就是你在这里所拥有的：一个通用的返回 void 的委托类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T14:39:40.077

这样的既定做法，已经为您完成了一些工作。`Action`在这种情况下，`Func`如果你返回一个值，就是泛型委托，就像这样。一个优点是，如果我看到您的签名：

```
private void TestMethod(GenericCallback<string> Callback) 
```

我必须查一下`GenericCallback<string>`是什么。如果我看到：

```
private void TestMethod(Action<string> callback) 
```

我已经知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:48:49.723

完全没问题。在这个非常简单的情况下，最好指定一个字符串（因为没有约束的泛型类型只能作为对象处理，因此 ToString() 是您无论如何都可以调用的极少数有用的东西之一你通过了），但显然这是示例代码，所以有很多公认的方法可以做到这一点。`Action<>`并且`Func<>`确实是很好的内置插件，但它们有一些缺点，例如减少了自文档（除了明显的“取一个整数并返回一个整数”之外，很难说出 Func 的预期用途”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:39:29.860

假设这将用于异步返回数据（否则，为什么不等待返回值？），听起来您还没有发现[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。特别是，[`Task<T>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)它是一种更通用的实现类似回调的行为的方式。

例如：

```
private Task<int> TestMethod()
{
    TaskCompletionSource<int> tcs=new TaskCompletionSource<int>();
    //do something asynchronous
    //when asynchronous job is complete
    //tcs.SetResult(25);
    return tcs.Task;

} 
```

# php - 将多维数组数据传递到 PHP 页面，从动态创建的 textboex 获取值

> ID：12199309
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:33:16.450
> 
> 标签：php, arrays, parameter-passing

我需要有关如何从动态创建的文本框中收集数据的帮助。我正在提供我的 html 代码。我为文本框添加和删除代码工作正常。我想知道在定义文本框数组时我在哪里做错了。我是否没有正确收集文本框值。另一个问题是在提交页面以插入数据库后，我应该如何将此数组值传递到另一个页面。

此代码用于为旅行社的旅行取值。

这是我的html表单`输入行程详细信息名称（类别）Days City Itinerary Night Stay -->

```
 <div id="TextBoxesGroup">

              <div id="TextBoxDiv1">

                <label></label>

                <input type='text'  id='dayNo'  name="itinerary[]" >
                <input type="text"  id='cityName'  name="itinerary[]">
                <input type='text'  id='schedule'  name="itinerary[]">
                <input type='text'  id='nightStay'  name="itinerary[]">

              </div>

            </div>

            <input type='button' value='Add Button' id='addButton'>
            <input type='button' value='Remove Button' id='removeButton'>
            <input type='button' value='Get TextBox Value' id='getButtonValue'>     
            <input type="submit" name="submit" id="submit" value="Submit" />

            </td>
        </tr>
      </table>
    </form>` 
```

我想知道我是否定义了正确的数组名称“itinerary []”。如果有 10 天的游览，那么将有 10 行包含 4 个字段。我应该如何收集这些行并发送到另一个页面进行插入。请让我在收集到数组后应该如何编写 VALUES () 部分。我可以使用会话发送 10 行的数据吗？我可以将此数据作为参数发送吗？我很抱歉在一篇文章中有这么多问题。我已经尝试了所有这些方式，但没有成功，或者很可能我在某个地方错了请帮助我这是现场网站。卡在这部分提前感谢数百万。

* * *

很抱歉延迟回复您的回答。实际上我真的不知道我应该如何清除数组。老实说，这让我非常沮丧。并浪费我的时间。如果可以，请指导我。我提供了用于动态添加文本框的 JS 代码，在我之前的帖子中，我提供了 HTML 代码。你能检查一下我是否在做正确的清除数组的命名约定。请对我的代码进行必要的更改并粘贴到这里。

这是我动态添加文本框的 JS 代码

```
$(document).ready(function(){

var counter = 2;

$("#addButton").click(function () {

if(counter>30){
        alert("Only 30 textboxes allow");
        return false;
}   

var newTextBoxDiv = $(document.createElement('div')).attr("id", 'TextBoxDiv' + counter + ' ' + 'style="width:750px;"');

newTextBoxDiv.html(
      '<input type="text" name="itinerary[dayNo]'+ counter + '" id="dayNo'+ counter + '" value="'+ counter + '" >' +
      '<input type="text" name="itinerary[cityName]'+ counter + '" id="cityName'+ counter + '" value="" >'+
      '<input type="text" name="itinerary[schedule]'+ counter + '" id="schedule'+ counter + '" value="" >'+
      '<input type="text" name="itinerary[nightStay]'+ counter + '" id="nightStay'+ counter + '" value="" >' );

newTextBoxDiv.appendTo("#TextBoxesGroup");
counter++;
 }); 
```

不，我再次给出我的 HTML 代码。你能检查我是否正确地给出了名称。这对我来说是最大的帮助。

这是我的 HTML 代码

```
 <div id='TextBoxesGroup'>

              <div id="TextBoxDiv1">

                <label></label>

                <input type='text'  id='dayNo'  name="itinerary[dayNo][]" >
                <input type="text"  id='cityName'  name="itinerary[cityName][]">
                <input type='text'  id='schedule'  name="itinerary[schedule][]">
                <input type='text'  id='nightStay'  name="itinerary[nightStay][]">
              </div>
            </div>

            <input type='button' value='Add Button' id='addButton'>
            <input type='button' value='Remove Button' id='removeButton'>
            <input type='button' value='Get TextBox Value' id='getButtonValue'>     
            <input type="submit" name="submit" id="submit" value="Submit" /> 
```

现在告诉我应该如何将数组中收集的值传递给会话或通过 URL，如 ---action="savedata.php?arr=...."

请在我的代码中进行更正。我是新手，最近几天感觉很迷茫。

我这样写了关于将值传递给数组

```
<?php

   $totalArray = itinerary;

   $_session['tArray'][]=$totalArray; 
```

?>

这是通过会话发送的正确方法吗？预先感谢数百万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:02:17.977

我不确定是否能很好地理解您的问题，我将尝试解释步骤。

*   不要将通用 ID 用于动态输入。
*   PHP 与 id 无关
*   如果你想匹配一个“块”的日程安排，并将其与 jQuery 匹配，请为每个甚至一个类设置一个适当的 data-*。

这是一个例子：

```
<div class="TextBox" data-formNum="0">
   <input type='text' name="itinerary[dayNo][]">
   <input type='text' name="itinerary[cityName][]">
   <input type='text' name="itinerary[schedule][]">
   <input type='text' name="itinerary[nightStay][]">
</div> 
```

当你想用 jQuery 添加一个表单块时，使用：

```
var idToAdd = $(".TextBox:last").attr("data-formNum")+1; 
```

当您将此表单发送到 PHP 时，所有内容都将被格式化为：

```
Array
(
    [intinerary] => Array
        (
            [dayNo] => Array
                (
                    [0] => 15
                    [1] => 14
                )

            [cityName] => Array
                (
                    [0] => London
                    [1] => Prague
                )
               ... 
```

`INSERT INTO`然后你可以在这个数组上编写一个循环函数，例如：

```
for ($i=0; $i < count($_POST['itinerary']['dayNo']);$i++)
{
     $day = $_POST['itinerary']['dayNo'][$i];
     $cit = $_POST['itinerary']['cityName'][$i];
} 
```

希望这有帮助。
如果我误解了，请告诉我。

# javascript - DOJO跨域调用返回数据但因Script标签语法错误而失败

> ID：12199312
> 
> 赞同：0
> 
> 时间：2012-08-30T14:33:24.077
> 
> 标签：javascript, dojo, cross-domain

我正在尝试使用 DOJO 库从 Javascript 进行跨域调用。我正在调用的 Web 服务返回 JSON。
为此，我正在使用“dojo.io.script.get”。Web 服务没有为 callbackParamName 建立任何特定的查询字符串参数，因此我使用的是任意名称，例如“callback”。DOJO 将注入 SCRIPT 标记，其结果如下所示（从 Firebug 中提取）：

```
<script id="dojo_request_script0" type="text/javascript" src="http://localhost:8281/services/TestGeocodeWorldLocator.TestGeocodeWorldLocatorHttpSoap12Endpoint?format=json&callback=dojo.io.script.jsonp_dojoIoScript1._jsonpCallback" async="" charset="utf-8">

{"GeocodeAddressResponse":{"Result":{"PropertyArray":{"PropertySetProperty":[{"Key":"Shape","Value":{"X":"-8841758.9684124179","Y":"5474103.2948672064","SpatialReference":{"WKT":"PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",0.0],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0],AUTHORITY[\"EPSG\",3857]]","XOrigin":"-20037700","YOrigin":"-30241100","XYScale":"10000","ZOrigin":"-100000","ZScale":"10000","MOrigin":"-100000","MScale":"10000","XYTolerance":"0.001","ZTolerance":"0.001","MTolerance":"0.001","HighPrecision":"true","WKID":"3857"}}},{"Key":"Status","Value":"M"},{"Key":"Score","Value":"100"},{"Key":"Match_addr","Value":"1145 Nicholson Rd, Newmarket, ON, L3y"},{"Key":"PreType","Value":""},{"Key":"City","Value":"NEWMARKET"},{"Key":"Addr_type","Value":"StreetAddress"},{"Key":"X","Value":"-79.426873000000001"},{"Key":"Y","Value":"44.055940999999997"},{"Key":"Side","Value":"R"},{"Key":"House","Value":"1145"},{"Key":"PreDir","Value":""},{"Key":"StreetName","Value":"NICHOLSON"},{"Key":"SufType","Value":"RD"},{"Key":"SufDir","Value":""},{"Key":"Province","Value":"ON"},{"Key":"Postal","Value":"L3Y"},{"Key":"Disp_Lon","Value":""},{"Key":"Disp_Lat","Value":""},{"Key":"Loc_name","Value":"CAN_Streets"}]}}}}

</script> 
```

问题是浏览器（IE 或 Firefox）抱怨“语法错误 - 预期为“;””。基本上它不喜欢在 SCRIPT 标签中注入的 JSON 响应中的冒号“:”。Codewise，Javascript 在这一行崩溃： load: function(response, ioArgs)

我认为这可能与 callbackParamName 有关系...但服务器不需要任何特定名称。有人可以建议我如何解决这个问题吗？

这是我正在使用的代码：

```
<head>
<script type="text/javascript" src='dojo-release-1.8.0-src/dojo/dojo.js' data-dojo-config='parseOnLoad: true, isDebug:true'></script>

<script type="text/javascript">

dojo.require("dojo.io.script");

   function DOJOtoWS() {

       var targetNode = dojo.byId("results");

       var jsonpArgs = {

         url: "http://localhost:8281/services/TestGeocodeWorldLocator.TestGeocodeWorldLocatorHttpEndpoint",             
         callbackParamName: "callback",             
         content: {format : "json"},                         
         load: function(response, ioArgs){

           console.log(response);
           return response;

           // Set the data from the search into the viewbox in nicely formatted JSON
           targetNode.innerHTML = "<pre>" + dojo.fromJson(response) + "</pre>";

         },
         error: function(response, ioArgs){
           targetNode.innerHTML = "An unexpected error occurred: " + response;

           console.log("error");
           console.log(response);
           return response;
         }
       };
       dojo.io.script.get(jsonpArgs); 
  }

  dojo.ready(DOJOtoWS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:17:11.220

**你所描述的听起来像[JSONP](http://en.wikipedia.org/wiki/JSONP)。因此服务器需要以 JSONP 格式发送数据，而不是 JSON。**

Dojo 注入的脚本中存在语法错误，因为`dojo.script.io`期望服务器以这种格式返回结果：

```
callback({"GeocodeAddressResponse": "blah blah blah"}); 
```

*说明：* Dojo 在内部构造了一个名为“回调”的函数，因此它可以执行从服务器发送的 JSONP。此函数处理数据并将其发送到您的`load`函数。通过尝试以 JSONP 格式发回数据的服务器进行验证，如[本示例](http://dojotoolkit.org/reference-guide/1.8/dojo/io/script.html)(http://ajax.googleapis.com/ajax/services/search/web)。

**解决方法：**

如果您无法控制跨域服务器返回的格式，则必须在同源服务器上设置跨域代理或将浏览器配置为允许跨域 AJAX 调用。

您可能还想研究[跨域资源共享 (CORS)](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，它是一种新的、更安全的标准，旨在取代 JSONP。

# python - 您如何将本机 Python 模板用于网页（无框架）？

> ID：12199316
> 
> 赞同：-1
> 
> 时间：2012-08-30T14:33:38.070
> 
> 标签：python, user-interface, view, webpage

在 PHP 中，PHP 可以是模板语言。它似乎可以很好地工作，不需要模板系统/语言。

但是，我找不到任何与 Python 类似的语言。你如何做这样的事情：

我从另一个不相关的 SO 问题中得到了这个：

```
<?php foreach( $dates as $year => $year_content  ): ?>
<h2><?php echo $year ?></h2>

<?php foreach( $year_content['months'] as $months ): ?>
<h3><?php echo $months->month ?> - <?php echo $months->sales ?></h3>
<?php endforeach; ?>

<?php endforeach; ?> 
```

如果没有某人的框架，我只是无法在 web 视图中为“本机”Python 找到类似的东西。谢谢。

编辑：没有冒犯。不想要模板语言。

编辑：尽管投了反对票，但 Python 3 就是一个很好的例子。 [虽然 2.x 用户需要 5 年才能使用 3.x](https://softwareengineering.stackexchange.com/questions/63859/why-do-people-hesitate-using-python-3)，但并非所有模板语言都支持 3.x。例如，Jinja 具有“实验性”3.x 支持。我为什么要用那个？我不会。这让我依赖于他们，我希望能够使用本地的东西，但唉，看来我不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:39:26.257

在 Python 世界中没有适当的解决方案来解决这个问题，因为混合业务逻辑和表示绝对不是 Python 的方式。有一个名为[PSP](http://www.modpython.org/live/current/doc-html/pyapi-psp.html)的旧项目可用于`mod_python`模块，但由于我所描述的原因，它现在肯定已经死了。

因此，框架或裸[WSGI](http://www.python.org/dev/peps/pep-0333/)应用程序是使用 Python 进行 Web 开发的两种方式。Internet上有很多模板库可用：

*   神社2
*   真子
*   变色龙
*   ...

您可以选择更适合您需求的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:39:53.597

Python 没有PHP 所具有的*原生模板。*您*可以*将 Python 用作 ISAPI 扩展，它会为您提供类似`<% print "foo" %>`. 或者，您可以在纯 CGI 中编写 python 脚本。这些道路可能相当痛苦，使用框架会更好地为您服务——框架为您提供了其他开发人员经验的优势，并消除了直接处理 CGI 和 HTTP 的粗糙边缘。

请参阅[我对之前提出的类似问题的回答](https://stackoverflow.com/a/7916343/418413)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:36:45.897

查看 Jinja2 [http://jinja.pocoo.org/docs/](http://jinja.pocoo.org/docs/)

它是一种相当简单的模板语言，允许您创建可以在有限版本的 Python 中内部编程的文本文件模板。

您发布的示例在 Jinja2 中可能如下所示：

```
{% for date in dates: %}
    <h2>{{ date.year }}</h2>

    {% for month in date.year_content['months'] %}
        <h3>{{ month.month }} - {{ month.sales }}</h3>
    {% endfor %}
{% endfor %} 
```

# vba - VBA：按变量选择范围

> ID：12199318
> 
> 赞同：15
> 
> 时间：2012-08-30T14:33:40.363
> 
> 标签：vba, variables, range, selection

我想选择 Excel 工作表的格式化范围。要定义最后一行和第一行，我使用以下函数：

```
lastColumn = ActiveSheet.UsedRange.Column - 1 + ActiveSheet.UsedRange.Columns.Count
lastRow = ActiveSheet.UsedRange.Rows(ActiveSheet.UsedRange.Rows.Count).Row 
```

在下一步中，我想选择这个区域： 公式应该是这样的：

```
Range(cells(1, 1), cells(lastRow, lastColumn).Select 
```

但是，这是行不通的。也许有人知道它有什么问题。非常感谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-30T06:59:10.510

我用“相对引用”录制了一个宏，这就是我得到的：

```
Range("F10").Select
ActiveCell.Offset(0, 3).Range("A1:D11").Select 
```

这是我的想法：如果范围选择用引号引起来，VBA 真的想要一个字符串并解释其中的单元格，所以尝试了以下操作：

```
Dim MyRange as String
MyRange = "A1:D11"
Range(MyRange).Select 
```

它起作用了:) ie.. 只需使用您的变量创建一个字符串，确保将其标注为 STRING 变量，Excel 将立即读取它；)

以下测试并发现工作：

```
Sub Macro04()

Dim Copyrange As String

Startrow = 1
Lastrow = 11
Let Copyrange = "A" & Startrow & ":" & "D" & Lastrow
Range(Copyrange).Select
End Sub 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-25T19:29:08.813

我遇到了类似的事情——我想根据一些变量创建一个范围。使用 Worksheet.Cells 不能直接工作，因为我认为单元格的值已传递给 Range。

这确实有效：

```
Range(Cells(1, 1).Address(), Cells(lastRow, lastColumn).Address()).Select 
```

这负责将单元格的数字位置转换为 Range 所期望的，即 A1 格式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-30T14:58:56.367

如果您只想选择使用的范围，请使用

```
ActiveSheet.UsedRange.Select 
```

如果要从 A1 选择到使用范围的末尾，可以像这样使用 SpecialCells 方法

```
With ActiveSheet
    .Range(.Cells(1, 1), .Cells.SpecialCells(xlCellTypeLastCell)).Select
End With 
```

有时 Excel 会对最后一个单元格感到困惑。它永远不会比实际使用的范围更小，但如果某些单元格被删除，它可能会更大。为避免这种情况，您可以使用 Find 和星号通配符来查找真正的最后一个单元格。

```
Dim rLastCell As Range

With Sheet1
    Set rLastCell = .Cells.Find("*", .Cells(1, 1), xlValues, xlPart, , xlPrevious)

    .Range(.Cells(1, 1), rLastCell).Select
End With 
```

最后，请确保仅在确实需要时进行选择。您需要在 Excel VBA 中执行的大部分操作都可以直接对 Range 执行，而不是先选择它。代替

```
.Range(.Cells(1, 1), rLastCell).Select
Selection.Font.Bold = True 
```

你可以

```
.Range(.Cells(1,1), rLastCells).Font.Bold = True 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-30T15:29:56.217

您缺少一个右括号，即您没有关闭`Range()`.

尝试这个`Range(cells(1, 1), cells(lastRow, lastColumn)).Select`

但是你真的应该看看迪克库斯莱卡的另一个答案，寻找可能更好地为你服务的替代方案。具体来说，`ActiveSheet.UsedRange.Select`它与您的代码具有相同的最终结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-28T11:31:18.253

您正在将它们转换为地址，但 Cells(#,#) 使用整数输入而不是地址输入，因此只需使用`lastRow = ActiveSheet.UsedRange.Rows.count`和`lastColumn = ActiveSheet.UsedRange.Columns.Count`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-23T18:23:38.847

我尝试使用：

```
Range(cells(1, 1), cells(lastRow, lastColumn)).Select 
```

其中`lastRow`和`lastColumn`是整数，但收到运行时错误 1004。我使用的是较旧的 VB (6.5)。

起作用的是使用以下内容：

```
Range(Chr(64 + firstColumn) & firstRow & ":" & Chr(64 + lastColumn) & firstColumn).Select. 
```

# php - 这些特定符号/部分在 preg_match 中是什么意思？

> ID：12199319
> 
> 赞同：0
> 
> 时间：2012-08-30T14:33:42.020
> 
> 标签：php, preg-match

我对 了解一点`preg_match`，但是有些看起来相当复杂，有些包含我不完全理解的符号。例如：

**关于第一个**- 我只能假设这与电子邮件地址和 url 有关，但它是什么`[^/]`意思`?`？

```
preg_match('@^(?:http://)?([^/]+)@i', $variable); 
```

......

**在第二个中**-和之类`^`的东西是什么意思？`{5}``$`

```
preg_match("/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/", $variable); 
```

这只是我不完全确定的这些小事情，我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:37:40.930

以下是直接答案。我把它们写得很短，因为如果不了解正则表达式，它们就没有意义。最好在[http://www.regular-expressions.info/tools.html](http://www.regular-expressions.info/tools.html)获得这种理解。我建议您也尝试那里列出的正则表达式帮助工具，它们允许您进行实验 - 在您编辑模式时查看实时捕获/匹配，非常有帮助。

围绕某事物的简单括号 ( ) 使其成为一个组。在这里，您有 (?=) 这是一个断言，特别是一个积极的前瞻性断言。它所做的只是检查里面的内容是否从大海捞针中的当前光标位置向前移动。还在我这儿？示例： foo(?=bar) 仅当 foo 后跟 bar 时才匹配。bar 永远不会匹配，只返回 foo。

考虑到这一点，让我们剖析您的正则表达式：

```
 /^.*(?=.{4,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/

Reads as:
    ^.* From Start, capture 0-many of any character
(?=.{4,}) if there are at least 4 of anything following this
(?=.*[0-9]) if there is: 0-many of any, ending with an integer following
(?=.*[a-z]) if there is: 0-many of any, ending with a lowercase letter following
(?=.*[A-Z]) if there is: 0-many of any, ending with an uppercase letter following
    .*$ 0-many of anything preceding the End 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:36:06.277

虽然我不喜欢只发布链接，但我认为正则表达式教程太多了。所以看看这个[正则表达式备忘单](http://www.addedbytes.com/download/regular-expressions-cheat-sheet-v1/png/)，如果你已经对它的作用有了一点了解，它可能会让你上路。

还可以查看这个以获得一些解释和更多有用的链接；[http://coding.smashingmagazine.com/2009/06/01/essential-guide-to-regular-expressions-tools-tutorials-and-resources/](http://coding.smashingmagazine.com/2009/06/01/essential-guide-to-regular-expressions-tools-tutorials-and-resources/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:39:24.280

第一：

实际上与匹配的`@`内容没有任何关系。通常，您`/`在正则表达式中用作分隔符。缺点是，每次你想使用它时都需要逃避它。所以在这里，`@`被用作分隔符。

`[^/]`是一个字符组。`[/]`将仅匹配`/`字符，将其`^`反转。`[^/]`匹配*除*`/`.之外的所有字符

第二个：

`^`匹配字符串的开头，字符串`$`的结尾。您可以使用它来强制正则表达式必须应用于您匹配的整个字符串。

`{5}`是一个量词。它等同于`{5,5}`which is `minimum 5, maximum 5`，因此它正好匹配 5 个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:40:21.470

第一个： `[^/]`=一切，但没有斜线

第二个： `^`从 $variable 的开头开始查找 `{5}`[AZ] 的 5 次出现，`$`直到 $variable 结束

组合`^ and $`意味着两者之间的所有内容都必须适用于 $variable

# jquery - 循环 json 结果以创建列表

> ID：12199321
> 
> 赞同：1
> 
> 时间：2012-08-30T14:33:58.007
> 
> 标签：jquery, json, parsing

我使用 $.post() 检索 json 结果，我希望能够打印到每个结果的列表中。

使用以下仅显示最后一个 json 项

**查询**

```
$.post('/assets/inc/account-info.php', qString, function (data) {
    console.log(data);
    var datas = jQuery.parseJSON(data);
    console.log(datas);
    $("#note").append("<li>id=recordsarray_"+datas.id+"><a href='#"+datas.id+"'>"+datas.name+"</a></li>");  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:37:17.727

按索引遍历数据并设置，然后获取每个数据的 ID 和名称。我还假设（因为您说过列表）您的数据有多个级别。

```
$.each(datas, function() {
    $.each(this, function(key, value) {
        $("#note").append("<li id=recordsarray_" + 
             datas[key].id + "><a href='#" + 
             datas[key].id + "'>" + 
             datas[key].name + "</a></li>"
        );
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:02:31.100

我假设您在前端获取对象数组，并且该对象中有 id 和 name：

```
// To put data directly in html you can do this :
    $.each(datas,function(i,data){
       $("#note").append("<li>id=recordsarray_"+data.id+"><a href='#"+data.id+"'>"+data.name+"</a></li>");
    });

 OR

// To Put your data in array you can do this :
    var arr = [];
    // This will help you putting the json object in to array
    $.each(datas,function(i,data){
       arr.push({id:data.id, name:data.name});   
    });

    // once you get the array you can loop through it and add it to your html:
    for (i=0;i<arr.length;i++){ 
        $("#note").append("<li>id=recordsarray_"+arr[i].id+"><a href='#"+arr[i].id+"'>"+arr[i].name+"</a></li>");
    });   
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:37:29.720

```
$(datas).each(function(){ $("#note").append("<li>id=recordsarray_"+this.id+"><a href='#"+this.id+"'>"+this.name+"</a></li>"); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:40:49.303

试试这个

```
$.each(datas, function(i,item){
    $("#note").append("<li>id=recordsarray_"+datas[i].id+"><a href='#"+datas[i].id+"'>"+datas[i].name+"</a></li>");
}); 
```

# php - 比较 wordpress 中的两个元值

> ID：12199322
> 
> 赞同：0
> 
> 时间：2012-08-30T14:33:57.837
> 
> 标签：php, wordpress

我觉得我非常接近这个，但查询一直显示为空。基本上，我试图查询两个日期之间的自定义值。如果开始日期小于当前日期并且结束日期大于或等于当前日期

```
 $args = array(
        'taxonomy' => 'exhibition_type', 
        'term' => 'faculty',
        'numberposts' => 10,
        'post_type' => 'exhibitions',
        'meta_key' => 'start_date_of_event',
        'meta_query' => array(
            'relation' => 'AND',
                array(
                    'key' => 'start_date_of_event',
                    'value' => $current,
                    'compare' => '<'
                ),
                array(
                    'key' => 'end_event_date',
                    'value' => $current,
                    'compare' => '>='
                )
            ),
        'order_by' => 'meta_value_num',
        'order' => 'ASC',
        'paged' =>  $paged
    ); 
```

继续出现 0 个结果 :'( 我现在陷入困境。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:34:17.793

这是可能的。我输入了错误的数据：D

这是工作代码：

```
 $args = array(
    'taxonomy' => 'exhibition_type', 
    'term' => 'faculty',
    'numberposts' => 10,
    'post_type' => 'exhibitions',
    'meta_key' => 'start_date_of_event',
    'meta_query' => array(
        'relation' => 'AND',
            array(
                'key' => 'start_date_of_event',
                'value' => $current,
                'compare' => '<'
            ),
            array(
                'key' => 'end_date_of_event',
                'value' => $current,
                'compare' => '>='
            )
        ),
    'order_by' => 'meta_value_num',
    'order' => 'ASC',
    'paged' =>  $paged
); 
```

此代码使用两个元值（start_date_of_event 和 end_date_of_event）并将其与当前日期（ $current = date('Ymd'); ）进行比较。希望这对其他人有帮助。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:42:33.303

如果我理解你，我想这就是你的答案，

```
if(strtotime($args['meta_query'][0]['key']) > strtotime($args['meta_query'][1]['key'])){
     //do stuff here
} 
```

# haskell - 相互引用的默认类型实例

> ID：12199324
> 
> 赞同：10
> 
> 时间：2012-08-30T14:34:09.740
> 
> 标签：haskell, typeclass, type-families

有没有办法根据彼此定义默认类型实例？我试图让这样的工作：

```
{-# LANGUAGE DataKinds, KindSignatures #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE UndecidableInstances #-}
data Tag = A | B | C

class Foo (a :: *) where
    type Bar a (b :: Tag)

    type Bar a A = ()
    type Bar a B = Bar a A
    type Bar a C = Bar a A

instance Foo Int where
    type Bar Int A = Bool

test :: Bar Int B
test = True 
```

但这不起作用：

```
Couldn't match type `Bar Int 'B' with `Bool'
In the expression: True
In an equation for `test': test = True 
```

请注意，这也不起作用：

```
test :: Bar Int B
test = () 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:38:45.523

是的，默认类型实例可以相互定义（从您自己的示例中可以看出）：

```
instance Foo Int where
--    So the default recursive definition will be used instead
--    type Bar Int A = Bool

test :: Bar Int B
test = () 
```

但是，当您在实例定义中重新定义关联类型同义词时，将（而不仅仅是）的**整个**默认 3 行定义`Int`替换为一行，这意味着并且不再定义。**`Bar``type Bar a A = ()``type Bar Int A = Bool``Bar Int B``Bar Int C`**

 **所以我猜想按照您的意图使用递归默认值的一种方法是重新定义特定的同义词（尽管它相当冗长）：

```
class Foo (a :: *) where
    type Bar a (b :: Tag)
    type Bar a A = BarA a
    type Bar a B = BarB a

    type BarA a
    type BarA a = ()

    type BarB a
    type BarB a = Bar a A

-- This now works
instance Foo Int where
    type BarA Int = Bool

test :: Bar Int B
test = True 
```

可以回退到默认值：

```
-- As well as this one
instance Foo Int where
--    type BarA Int = Bool

test :: Bar Int B
test = () 
```**

# ios5 - instanceViewControllerWithIdentifier 使应用程序崩溃

> ID：12199325
> 
> 赞同：2
> 
> 时间：2012-08-30T14:34:14.810
> 
> 标签：ios5, uiviewcontroller, uistoryboard

我正在尝试使用下图中显示的代码片段来实例化 MainStoryBoard.storyboard 中定义的 ViewController。我还为控制器分配了一个标识符，但应用程序崩溃了，图片中显示的错误是“Storyboard 不包含具有标识符 masterViewController 的控制器”，尽管您可以在图片中清楚地看到它在那里。任何帮助将不胜感激。

![错误屏幕](../Images/766ba77c2e131564f1f8897ca93210ea.png) 请注意，以下解决方案对我不起作用：[Crash with instantiateViewControllerWithIdentifier](https://stackoverflow.com/questions/9367715/crash-with-instantiateviewcontrollerwithidentifier)

下面是确认故事板对象与从 viewcontroller 检索并用于实例化 ViewControllerWithIdentifer: 的快照相同。![故事板obj相同](../Images/dce16a5169d55dd0fa12820440486c3c.png) **情况描述**：我正在尝试开发一个自定义的 SplitViewController（从 UIViewController 子类化）。这个 UIViewController 是纯程序化的，即不基于 IBInterface 布局。然而，对于它的孩子，即 MasterViewController 和 DetailViewController，我在 IBInterface 中进行了布局。现在，我在 SplitViewController 中检索一个 UIStoryboard 对象（纯编程对象），并将其传递给第一张图片中显示的实用程序类，该类使用它基于 Storyboard 中的布局实例化 MasterViewController。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:53:58.287

嗯，看起来应该可以。

尝试这个：

*   清理项目并重建
*   检查是否`storyboard`包含正确故事板的实例

* * *

由 shaffooo 修复（来自下面的评论）

> 我重建了我的故事板，它解决了我遇到的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:11:51.827

尝试将您的 ViewController 类的相同名称写入 IB 中的“StoryBoard ID”。然后使用相同的字符串编辑您的 instantiateViewControllerWithIdentifier 方法的参数：

yourVCName *startingViewController = (yourVCName *)[self.storyboard instantiateViewControllerWithIdentifier:@"yourVCName"];

# php - php中的URL重定向导致会话错误

> ID：12199327
> 
> 赞同：0
> 
> 时间：2012-08-30T14:34:19.123
> 
> 标签：php, url

有一个 url `https://www.example.com/rtu_s1/login/signupcomplete.php`，当我在另一个选项卡中复制并过去并按 enter 时，url 变为`https://example.com/rtu_s1/login/signupcomplete.php`并且会话未设置....如何为两者设置会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:37:34.270

我想您的服务器配置将 demo.com 和 www.demo.com 分隔在不同的 VHOSTS 中。确保您仅使用 demo.com（在重定向和链接中）或 www.demo.com，或者......或重新配置您的服务器，以便 www.demo.com 位于同一个 VHOST（别名）上。

而不是使用一个带别名的两个 VHOSTS。对于 apache2 站点应该是这样的：

```
<VirtualHost *:80>
    ServerName demo.com
    ServerAlias www.demo.com
    # ... other stuff below...
</VirtualHost> 
```

# jquery - 用于选择下拉列表的 jQuery“选择”插件 - 获取 ID

> ID：12199330
> 
> 赞同：3
> 
> 时间：2012-08-30T14:34:30.323
> 
> 标签：jquery, jquery-chosen

我正在使用为 jQuery[选择的插件](http://harvesthq.github.com/chosen/)并且喜欢它，但我正在尝试创建一个通用脚本以用于`SELECT`我的应用程序中具有特定类的所有查询。问题是我正在尝试获取活动选择的 ID。下面是我的 jQuery 代码。

```
$("SELECT.editable").chosen({
    create_option: function (term) {
        var chosen = this;
        chosen.append_option({
            value: term,
            text: term
        });
        var tableField = $(this).attr('id'); // <<<< HERE IS THE ISSUE. I am trying to get the ID of the select to pass to the jQuery post as a paramter. It comes back as undefined.
        alert(tableField);
        var params = { optionValue: term, tableField: tableField };
        var paramsStr = $.param(params);
        var actionUrl = '/Setup/_addDropDownOption';
        $.post(actionUrl, paramsStr);
    },
    persistent_create_option: false,
    create_option_text: 'Add Option'
}); 
```

任何帮助，将不胜感激。

这是我查看源代码的 HTML 代码。

```
<div>
<select class="editable" id="tblContacts.Prefix" name="Prefix">
<option selected="selected" value="Mr.">Mr.</option>
<option value="Ms.">Ms.</option>
<option value="Mrs.">Mrs.</option>
<option value="Mr. and Mrs.">Mr. and Mrs.</option>
<option value="Miss.">Miss.</option>
<option value="Mr. and Dr.">Mr. and Dr.</option>
<option value="Dr. and Mrs.">Dr. and Mrs.</option>
<option value="Dr.">Dr.</option>
</select>
<span class="field-validation-valid" data-valmsg-for="Prefix" data-valmsg-replace="true"></span>
</div> 
```

我创建了一个[jsfiddle](http://jsfiddle.net/wxWDH)，但我不确定我是否做对了。如果我需要做一些不同的事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-14T12:51:55.923

首先，您选择的类应该是`chosen-select`. 像这样：

```
<select class="chosen-select editable" id="tblContacts.Prefix" name="Prefix">
    <option selected value="Mr.">Mr.</option>
    <option value="Ms.">Ms.</option>
    <option value="Mrs.">Mrs.</option>
    <option value="Mr. and Mrs.">Mr. and Mrs.</option>
    <option value="Miss.">Miss.</option>
    <option value="Mr. and Dr.">Mr. and Dr.</option>
    <option value="Dr. and Mrs.">Dr. and Mrs.</option>
    <option value="Dr.">Dr.</option>
</select> 
```

此外，如果您希望迭代一组元素，`jQuery::each`它会派上用场。所以脚本将是：

```
// create all the chosen-selects
$(".chosen-select").chosen();

// iterate over all the .editable selects
$('select.editable').each(function() {    
    var chosen = $(this);
    var selected_option = chosen.find(':selected').val();        
    var select_id = chosen.attr('id');

    alert('The ID you are looking for is "' + select_id + '"');
    alert('The selected option is "' + selected_option + '"');

    // append element
    var option = "<option value='whatever_value'>Whatever</option>";
    chosen.append(option);
    // refresh the chosen-select
    chosen.trigger('chosen:updated');        
}); 
```

这是[**JSFiddle**](https://jsfiddle.net/espusntj/)。
确保除了所选插件之外还包含 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T15:44:13.880

这应该是修改一行代码以使其工作的简单案例。您正在使用的 Chosen jQuery 插件的作者似乎对以下修改很满意，我在遇到[此处记录](https://github.com/koenpunt/chosen/issues/56)的类似问题时使用了该修改。

```
$("SELECT.editable").chosen({
    create_option: function (term) {
        var chosen = this;
        chosen.append_option({
            value: term,
            text: term
        });
        // *** I modified the following line ***
        var tableField = chosen.form_field.id
        // *** End of modification ***
        alert(tableField);
        var params = { optionValue: term, tableField: tableField };
        var paramsStr = $.param(params);
        var actionUrl = '/Setup/_addDropDownOption';
        $.post(actionUrl, paramsStr);
    },
    persistent_create_option: false,
    create_option_text: 'Add Option'
}); 
```

# asp.net - 在 MVC3 应用程序中创建单独的 DAL 项目

> ID：12199331
> 
> 赞同：3
> 
> 时间：2012-08-30T14:34:39.597
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-5

我正在开始一个新的 ASP.NET 项目，并且我正在尝试遵循[我在 Stackoverflow 的多个问题中提到的多项目方法](https://stackoverflow.com/a/7474357/1080891)。

通过将连接字符串放在我的表示层的 Web.config 文件中，我成功地设置了连接字符串（我认为）。

```
<add name="MyDbContext" connectionString="Data Source=|DataDirectory|MyDb.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

但是，当我从 BLL 运行以下代码时，不会创建任何数据库。

```
using (var db = new MyDbContext())
{
    db.MyEntities.Add(new MyEntity()
    {
        EntityName = "Entity 1"
    });
    db.SaveChanges();
} 
```

那么首先，实际的 sdf 文件将在哪里创建？我假设在我的 DAL 项目中。其次，是否需要执行任何进一步的配置才能使其正常工作？一个教程的链接会很棒。

我已经尝试按照[本](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer)教程进行操作，但我的 DAL 项目没有可以使用的 Global.asax 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:47:50.317

> 实际的 sdf 文件将在哪里创建？

它将在表示层中创建。确保那里有一个**App_Data**子文件夹。这就是我第一次尝试时咬我的地方。还要确保`Show all files`在解决方案资源管理器中打开或打开 Windows 资源管理器到 App_Data 子文件夹以查看它出现在那里。

> 但是我的 DAL 项目没有可以使用的 Global.asax 文件。

Global.asax 存在于表示层，而不是 DAL。您提到的教程的*问题*是它只使用了一个项目。在现实世界中，您可能会将其分散到多个项目中，典型的一个 ASP.NET (MVC) 项目和几个基于类库模板的项目。这会导致事情被放在正确的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:46:24.103

1.  `|DataDirectory|``~/App_Data/`是在您的 Web 项目中计算结果为的宏。因此，在 .sdf 中查找您的 .sdf 文件`path/to/your/project/App_Data/MyDb.sdf`。
2.  您需要将在 App.config 中添加的任何其他设置复制到 Web.config。

# php - 如何将 csv 文件转换为 php 数组？

> ID：12199333
> 
> 赞同：-6
> 
> 时间：2012-08-30T14:34:55.940
> 
> 标签：php, csv

我有一个包含三列的 csv 文件；`name` `age` `description`

我想创建一个函数，当调用它时它将转换 csv 文件并返回一个 php 数组。

该文件称为profiles.csv

```
function convert_csv_to_php{

} 
```

我如何在 php 中实现这一点，我尝试查看 php 文档，但它看起来真的很混乱，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:37:17.037

利用[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php)

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:38:28.727

您可以使用[`fgetcsv`](http://php.net/manual/en/function.fgetcsv.php).

### 示例代码：

```
<?php
header("Content-type: text/plain");
if (($handle = fopen("smaple.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "$num fields in line $row:\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "\n";
        }
    }
    fclose($handle);
}
?> 
```

# xml - 反序列化字符串 C# 时的问题

> ID：12199334
> 
> 赞同：0
> 
> 时间：2012-08-30T14:34:59.923
> 
> 标签：xml, string, serialization

我从 php 脚本的输出中提取 xml 数据。它的工作方式是 php 脚本将 xml 数据输出到 html 页面，而我使用的 API 将显示在该页面上的所有文本数据拉到一个字符串中。

所以 html/php 的输出应该是非常标准的 xml 格式，我研究了它并更改了 php 以确保即使是最小的细节也能正确输出。

然后我使用以下代码将字符串反序列化到我的类中。

```
public static object XmlDeserializeFromFile(Type type, string strPath)
{
    object data;

    try
    {
        using (StreamReader reader = new StreamReader(strPath))
        {
            XmlSerializer serializer = new XmlSerializer(type);
            data = serializer.Deserialize(reader);
            reader.Close();
        }
    }
    catch(Exception exception)
    {
        Debug.LogError (exception);
        data = type.GetConstructor(Type.EmptyTypes).Invoke(null);
    }

    return data;
} 
```

所以问题是从我的代码中解析字符串时没有遇到异常，这让我认为它在某些方面起作用。但是，该类仍然返回空值。我还验证了字符串是否被正确收集，因为它在我的调试器中显示了完整的 xml 内容。

使用以下代码测试类 Im。

```
 MyClass member = (MyClass)XmlDeserializeFromFile(typeof(MyClass), MyString);
    if(member != null)
    {
        Debug.Log(member.a);
    }
    else
    {
        Debug.Log("Not Loaded");
    } 
```

我的调试器中的结果一直显示 member.a = null。

我的类属性都是公开的 {get; set;} 并完全匹配 xml，如果我从文件而不是字符串加载，则类值会正确填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:24:46.597

看看 xmlSerializer 中可用的事件：UnknownAttribute、UnknownElement、UnknownNode、UnreferencedObject。设置事件处理程序以处理这些事件（如果/何时发生）。从这些事件中产生的数据应该会引导您正确了解数据未显示在对象中的原因。

# javascript - 在日期选择器中选择日期之前触发功能

> ID：12199335
> 
> 赞同：0
> 
> 时间：2012-08-30T14:35:01.743
> 
> 标签：javascript, jquery, jquery-ui, javascript-framework

我需要这里的专家的帮助。

当我调用函数 v9_insert_comments('1') 时，警报（sdate）在我什至在日期选择器中选择日期之前触发。

我的目标是让 v9_insert_comments() 检查 sdate 是否为空。如果它为空，则只需{返回}，如果不是{做其他事情}。

当前情况，如果该 sdate 始终为 null，因为 datepicker 永远没有机会设置它。

```
var sdate

//========================================================================
  function v9_insert_comments(x) {
//========================================================================

    if (x == 1) {
            select_date()
            alert(sdate)
    }

}//end of function

//========================================================================
  function select_date() {
//========================================================================
    $('#dd').dialog({
        autoOpen: true,
        modal: true,
        overlay: {
            opacity: 0.5,
            background: 'black'
        },
        title: "title",
        height: 265,
        width: 235,
        draggable: false,
        resizable: false

    }); //end of dialog

    $('#d1').datepicker({
        onSelect: function() {
            sdate = $(this).val();
            $("#dd").dialog("close");

        }
    });

} //end of function 
```

身体：

```
<!-- START OF DATE SELECTOR DIALOG -->
<div style="display:none" id="dd">
<div id="d1"></div>
</div>
<!-- END OF DATE SELECTOR DIALOG --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:50:56.540

在你的`select_date`方法中，你只是在设置东西。调用`$('#dd').dialog()`通过更新 DOM 和连接所有东西来执行所有 jQuery UI 魔术来创建对话框。然后你调用`$('#d1').datepicker()`，它以类似的方式设置一个日期选择器。它只是说“这个 div 现在是一个对话框，这个 div 现在是一个日期选择器”。它不等待任何用户交互。您的`v9_insert_comments`函数假设事情是同步发生的，而它们实际上是异步发生的。

设置好这些东西后，您立即询问尚未设置的变量的值。它尚未设置，因为您为 datepicker`onSelect`事件提供的匿名函数尚未触发。只有在日期选择器中选择了某些内容时才会调用此函数。因此，如果您想对选定的日期执行某些操作，请在事件处理程序中执行。

您可以将警报移动到事件处理程序，或者您可以`v9_insert_comments`从事件处理程序调用 - 但在这种情况下，您应该将调用移动到`select_date`其他地方。对话框和日期选择器只需要设置一次。

# ruby-on-rails - SimpleForm、I18n 和 Rails：将命名空间从 de.simple_form.* 更改为 de.activerecord.*？

> ID：12199341
> 
> 赞同：0
> 
> 时间：2012-08-30T14:35:18.157
> 
> 标签：ruby-on-rails, internationalization, simple-form

我们只是用 SimpleForm 替换了 FormTastic，虽然 FormTastic 在 namespace 中使用了我们的翻译，但`de.activerecord.*`SimpleForm 似乎坚持使用`de.simple_form.*`. 我四处搜索并阅读了文档，有趣的是，其中包含以下代码片段：

```
en:
  activerecord:
    models:
        admin/user: User
    attributes:
        admin/user:
            name: Name 
```

但是我在其他任何地方都找不到更多关于是否可以将 SimpleForm`en.activerecord.*`用作其命名空间的信息。

那么我可以强制 SimpleForm 更改其命名空间吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:23:54.500

也有可能只对 YAML 树的部分进行别名/合并：

```
de:
  active_record: &myAliasName
    models:
      contact:
          name: "Name"
          age: "Alter"
  simple_form:
    <<: *myAliasName
    another_key: "another_value" 
```

结果是：

```
{
  "de": {
    "simple_form": {
      "models": {
        "contact": {
          "age": "Alter", 
          "name": "Name"
        }
      }, 
      "another_key": "another_value"
    }, 
    "active_record": {
      "models": {
        "contact": {
          "age": "Alter", 
          "name": "Name"
        }
      }
    }
  }
} 
```

这可能是解决此问题的方法，尽管我认为它的性能可能会慢一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:41:23.143

检查此文件[https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/inputs/base.rb#L161](https://github.com/plataformatec/simple_form/blob/master/lib/simple_form/inputs/base.rb#L161)我猜你可以猴子修补它以将命名空间更改为你的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T06:07:59.023

我意识到这是一个非常古老的问题，但是当我想在 SimpleForm 3.1 中做同样的事情时，我只是遇到了它。

SimpleForm 现在有一个配置选项来指定 i18n 前缀，它可以在`config/initializers/simple_form.rb`. 您可以简单地将其配置为使用您希望的任何范围，例如。`activerecord`而不是`simple_form`：

```
# Defines which i18n scope will be used in Simple Form.
config.i18n_scope = 'activerecord' 
```

# pydev - PyDev 标记事件不适用于 vrapper

> ID：12199348
> 
> 赞同：1
> 
> 时间：2012-08-30T14:35:42.203
> 
> 标签：pydev

这是一个很长的镜头，但我想我会试一试。

PyDev 具有标记出现次数（就像 CDT 和其他人一样），当我使用标准箭头键或鼠标将光标放在单词上时，该功能可以正常工作。但是，我使用的是 vrapper（Eclipse 的 vi 插件），它使用标准的 vi 主行键来移动光标（hjkl）。标记出现不是由 vi 移动键触发的。

在职的：

1.  带有常规箭头键的 PyDev
2.  带有常规箭头键和 vi 键的 CDT 和 PDE（其他环境我没有测试过）

不工作：

1.  带有 vi 键的 PyDev。

所以问题是——有没有办法触发 PyDev 来标记事件，即使是非箭头键？

编辑：澄清标题

# oracle - 使用 Oracle 的备用模式中的外键？

> ID：12199349
> 
> 赞同：14
> 
> 时间：2012-08-30T14:35:46.600
> 
> 标签：oracle, foreign-keys

我有两个模式，我们称它们为 BOB 和 FRED。我需要从架构 BOB 调用架构 FRED 中的一个表，以将该表中的主键用作外键。我已经为模式 FRED 设置了适当的授权以允许 BOB 访问它，但是每当我运行脚本时，它都会抱怨我没有正确的权限。我需要在某处更改其他设置吗？这甚至可以做到吗？

我的FK创作如下：

```
ALTER TABLE "BOB"."ITEMGROUP" WITH CHECK ADD CONSTRAINT FK_ITEMS_ITEM FOREIGN KEY (ItemID)
REFERENCES "FRED"."ITEMS"(ItemID) 
```

我正在通过以下方式进行赠款：

```
GRANT ALTER ON "FRED"."ITEMS" TO "BOB" 
```

我收到此错误消息：

```
SQL Error: ORA-01031: insufficient privileges 
01031\. 00000 -  "insufficient privileges"

*Cause:    An attempt was made to change the current username or password
           without the appropriate privilege. This error also occurs if
           attempting to install a database without the necessary operating
           system privileges.
           When Trusted Oracle is configure in DBMS MAC, this error may occur
           if the user was granted the necessary privilege at a higher label
           than the current login.

*Action:   Ask the database administrator to perform the operation or grant
           the required privileges.
           For Trusted Oracle users getting this error although granted the
           the appropriate privilege at a higher label, ask the database
           administrator to regrant the privilege at the appropriate label. 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-30T14:57:55.990

你需要：

```
grant references on "FRED"."ITEMS" TO "BOB" 
```

看到[这个](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:60443882718790)“AskTom”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T14:57:51.340

要创建引用另一个模式中的表的外键，您需要“REFERENCES”权限：

```
GRANT REFERENCES ON FRED.ITEMS TO BOB; 
```

# php - 如何调试 exec() 问题？

> ID：12199353
> 
> 赞同：15
> 
> 时间：2012-08-30T14:35:54.807
> 
> 标签：php

exec 命令在我的服务器上不起作用，它什么也没做，我已经关闭了 safe_mode，并验证了所有控制台命令都在工作，我尝试过使用绝对路径。我已经检查了应用程序的权限，并且我需要的所有应用程序都具有执行权限。我不知道还能做什么，这是我尝试过的代码的概要。

```
echo exec('/usr/bin/whoami');

echo exec('whoami');

exec('whoami 2>&1',$output,$return_val);
if($return_val !== 0) {
    echo 'Error<br>';
    print_r($output);   
}

exec('/usr/bin/whoami 2>&1',$output,$return_val);
if($return_val !== 0) {
    echo 'Error<br>';
    print_r($output);   
} 
```

最后两个代码显示：

```
Error
Array ( ) 
```

我已经联系了服务器服务，他们无法帮助我，他们不知道为什么 exec 命令不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T14:47:13.430

看看`/etc/php.ini`，在下面：

```
; This directive allows you to disable certain functions for security reasons.
; It receives a comma-delimited list of function names. This directive is
; *NOT* affected by whether Safe Mode is turned On or Off.
; http://www.php.net/manual/en/ini.sect.safe-mode.php#ini.disable-functions
disable_functions = 
```

确保 exec 没有像这样列出：

```
disable_functions=exec 
```

如果是这样，请将其删除并重新启动 apache。

为了便于调试，我通常喜欢手动执行 php 文件（无需在主 ini 中设置即可请求更多错误）。为此添加标题：

```
#!/usr/bin/php
ini_set("display_errors", 1);
ini_set("track_errors", 1);
ini_set("html_errors", 1);
error_reporting(E_ALL); 
```

到文件的开头，给它使用权限`chmod +x myscript.php`并执行它`./myscript.php`。尤其是在向日志文件写入大量内容的繁忙服务器上，这一点非常小心。

**编辑**

听起来像是**权限**问题。创建一个简单的 bash 脚本`echo "helo world"`并尝试运行它。确保您对该文件**和包含该文件的文件夹**具有权限。你应该只做`chmod 755`测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-20T16:56:25.913

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T15:02:09.527

由于您要从 PHP 上下文中退出到本机 shell，因此您将遇到很多调试问题。

我过去使用过的最好和最简单的方法是将脚本的输出写入日志文件并在 PHP 执行期间对其进行跟踪。

```
<?php
shell_exec("filename > ~/debug.log 2>&1"); 
```

然后在一个单独的外壳中：

```
tail -200f ~/debug.log 
```

当您执行 PHP 脚本时，您的错误和 shell 调用的输出将显示在您的`debug.log`文件中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-30T14:42:33.430

您可以检索[exec](http://php.net/manual/en/function.exec.php)命令的输出和返回代码，这些可能包含可以解释问题的信息......

```
exec('my command', $output, $return); 
```

# soap - restlet 与 SOAP 的集成

> ID：12199354
> 
> 赞同：0
> 
> 时间：2012-08-30T14:35:59.520
> 
> 标签：soap, restlet

我正在为我的下一个项目探索 Restlet。其中一项要求是与传统的基于 SOAP 的服务进行通信。向客户端提供 RESTful 样式但通过 SOAP 与此后端服务器通信的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:33:41.940

Restlet 提供了完整的 HTTP 客户端 API，因此即使您的后端是 SOAP 服务器，您仍然可以与其通信。

尽管 Restlet 不包含通常的 SOAP 堆栈，但您可以轻松地使用 FreeMarker/Velocity 模板发送 SOAP 消息和 XPath 处理以从答案中提取有价值的内容。

# telerik - Kendo UI Grid - 在 MVC3 中隐藏/取消隐藏列

> ID：12199356
> 
> 赞同：5
> 
> 时间：2012-08-30T14:36:05.823
> 
> 标签：telerik, kendo-ui

我的案例是一个包含大约 20 个属性的搜索窗口，用户可以在其中选择指定搜索条件。每个属性都有一个相应的复选框，用于切换该道具是否包含在搜索结果中。然后搜索结果显示在剑道网格中。

应该说明问题的简化代码（kendo ui complete ver. 2012.2.710）：

```
<input type="checkbox" onclick="fnShowHide(1);" name="showSearchColumn" id="checkShowField1"  />                                

<div id="example" class="k-content">
    <div id="kendoGridTest"></div>
</div>

<script>
function fnShowHide( iCol )
{
   $('#kendoGridTest').data("kendoGrid").options.columns[iCol].hidden = false;
   $('#kendoGridTest').data("kendoGrid").refresh();
}
</script> 
```

MVC3-controller 方法从搜索返回的数据是 JsonResult 类型（如下`jsonResultSearchResult`所示）：

```
$('#kendoGridTest').kendoGrid({
    dataSource: jsonResultSearchResult,
    schema: {
        model: {
            fields: {
                FirstName: { type: "string" },
                LastName: { type: "string" },
                Address: { type: "string" }
            }
        }
    },
    sortable: true,
    resizable: true,
    columns: [{
        field: "FirstName",
        width: 90,
        title: "First name"
    },
        {
            field: "LastName",
            width: 120,
            hidden: true,
            title: "Last name"
        },
        {
            field: "Address",
            width: 140,
            title: "Adr"
        }
    ]
}); 
```

执行搜索后，网格填充了正确的数据并且`LastName`确实是隐藏的。但是，如果用户现在检查`checkShowField1`控件，我希望网格在所有三个列都可见的情况下刷新。它不是。`fnShowHide()`不做这项工作。

我必须承认，在 VS 中进行调试时，我在 QuickWatch 窗口中寻找任何类型的 Columns 集合。中的集合`fnShowHide`包含网格初始化时的正确数据，我可以操作该`.hidden`属性，但网格仍然不显示该列。

我仍然有点困惑是否支持动态隐藏/显示 cols *，*但[Telerik 员工接受的这个答案](https://stackoverflow.com/questions/11210989/kendo-ui-for-mvc-grid-how-do-i-hide-the-id-column)看起来很有希望。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T19:56:41.870

要使用 JavaScript 在客户端隐藏列，您应该使用**hideColumn()并使用 showColumn(** **)**显示它。这两种方法都有几个重载——你要么传递列的索引，要么传递列绑定到的字段的名称。例如：

```
var grid = $('#GridID').data('kendoGrid');
grid.hideColumn(2);
//or show it
grid.showColumn("OrderDate") // lets say thats the field name of the same column 
```

您链接的帖子显示了如何使用 MVC Wrappers 隐藏/显示列，但略有不同。

# php - 谷歌地图 API 和 PHP

> ID：12199358
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:06.207
> 
> 标签：php, google-maps, google-maps-api-3

我有这个代码

[http://jsfiddle.net/DanielMontenegro/7pdU4/3/](http://jsfiddle.net/DanielMontenegro/7pdU4/3/)

现在，假设我想将该地图放在一个站点中，以允许人们通过地理编码服务报告某些特定事件。我想问我如何设法在表格中获取该事件的地址/坐标，并将所有用户报告收集到一个数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:42:20.317

[在文档的“文章”部分中](https://developers.google.com/maps/articles/)有很多关于将 Google Maps API v3 与 PHP/MySQL 接口的好信息

这个看起来像是回答了你的问题；[从信息窗口到数据库：保存用户添加的表单数据](https://developers.google.com/maps/articles/phpsqlinfo_v3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:19:47.340

请参阅下面的代码并尝试一下。

我正在使用 php 静态数组，您可以连接数据库并根据您的要求创建数组。请参阅下面的数组。

```
<?php  $item = array('jaipur, rajasthan,india', 'udaipur, rajasthan,india'); ?> 
```

在我的代码下面看看。

```
<html>
    <head>
        <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyDwFjOazEAe1MI7nHV6vUwkWytOp8LH2Zk" type="text/javascript"></script>
    </head>
    <body onload="initialize();">
    <?php  $item = array('jaipur, rajasthan,india', 'udaipur, rajasthan,india'); ?>
    <script>
    var map = null;
    var geocoder = null;

    function initialize() {
            if (GBrowserIsCompatible()) {

                    map = new GMap2(document.getElementById("map_canvas"));
                    var addresses = ["<?php echo implode ('","', $item); ?>"]

                    var geocoder = new GClientGeocoder();
                    //var addresses = ["A II Z, Ibn Battuta Mall, Sheikh Zayed Road, 5th Interchange, Jebel Ali Village, Dubai","A. Testoni,Dubai Festival City Mall, Ground Floor, Dubai", "Abdulla Hussain Khunji, The Dubai Mall,Downtown, Abu Dhabi"];
                    var curIndex = 0;

                    function showAddress() {
                      var _cur = addresses[curIndex];
                      geocoder.getLatLng(
                        _cur,
                        function(point) {
                          if (!point) {
                            //alert(_cur + " not found");
                            //map.setCenter(new GLatLng(0, 0), 6);
                            //map.setUIToDefault();
                          } else {
                            //console.log(_cur+":"+point);
                            //alert(_cur);
                                    var cafeIcon = new GIcon(G_DEFAULT_ICON);

                                    // Set up our GMarkerOptions object
                                    markerOptions = { icon:cafeIcon };

                                    map.setCenter(point, 6);
                                    var marker = new GMarker(point, markerOptions);
                                    map.addOverlay(marker);

                                    var sales = new Array();
                                    sales = _cur.split("|");

                                    //Add click event on push pin to open info window on click of the icon
                                    GEvent.addListener(marker, "click", function() {
                                            marker.openInfoWindowHtml("<p class='para1bold' style=\"font-weight: bold;\">Address <br /><span class='para1' style='font-weight:normal;'>" + sales[1] + "</span></p>");
                                    });
                                    //Provides map,satellite,hybrid and terrain views in the map along with zoom control

                                    map.setUIToDefault();
                          }
                          //do next after done

                          curIndex++;

                          if(curIndex<addresses.length)
                            showAddress();
                        }
                      );
                    }
                    showAddress();
       }  
    }
    </script>
    <div id="map_canvas" style="width:100%; height:750px;"></div>
  </body> 
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T14:41:54.797

您需要设置某种动作监听器（最好是监听用户点击地图的监听器）。然后，只需对生成的 lat/lng 进行地理编码，并将收到的内容存储在表中。

1.  用户单击地图上的一个点。
2.  点击事件获取用户点击的纬度/经度。
3.  Lat/lng 使用 Ajax 为文本地址进行地理编码。
4.  Lat/lng 和文本地址都并排存储在您的数据库表中。

# android - 如何在不启用指南针的情况下计算 getOrientation()？

> ID：12199362
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:12.820
> 
> 标签：android, location, android-mapview, compass-geolocation, bearing

我有一个带有指向特定位置的箭头的 ImageView 的 MapView。我通过旋转 ImageView 进行指向，通过 getOrientation() 计算指南针的方位（方向） - 使用 geoField.getDeclination() 的航向和使用 myLocation.bearingTo(finalDestiny) 的方位。

该算法完美运行，我让箭头准确指向我想要的位置。唯一的问题是，为了能够 getOrientation()，需要启用 Compass()，否则返回 NaN。同时，enableCompass() 在 MapView 上绘制默认的 google 指南针，我不想显示。

我该怎么做？可以使用传感器“手动”计算这个方位，所以我不需要使用 enableCompass()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:04:14.460

您应该实现一个扩展 MyLocationOverlay 的类并在没有任何代码的情况下覆盖 drawCompass()，我只是尝试它并完美地工作。在您的活动中， enableCompass() 不会绘制指南针。

```
public class CustomMyLocation extends MyLocationOverlay {
//...

    @Override
    protected void drawCompass(Canvas canvas, float bearing) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:47:56.310

我们可以手动计算轴承，两个位置之间的轴承可以通过

```
float bearing = mLoc.bearingTo(mLocTarget);
if(bearing<0){
bearing+=360;
} 
```

可以使用传感器计算正常的罗盘方位：

```
float newDirection=0;
if(mSensors!=null)
newDirection=-mSensors[0];
if((newDirection-mCurDirection)> 180)
newDirection-=360;
else if((mCurDirection-newDirection)> 180)
newDirection+=360; 
```

# javascript - 滚动到动画

> ID：12199363
> 
> 赞同：15
> 
> 时间：2012-08-30T14:36:14.957
> 
> 标签：javascript, scrollto

如何向此功能添加缓动/动画/缓慢移动？此刻它只是跳跃。现在它应该移动到带有动画的“锚点”。

```
<script type='text/javascript'>
        setTimeout("window.scrollBy(0,270);",3000);
</script> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-11-07T09:44:50.157

也可以使用请求动画帧的纯javascript..

```
// first add raf shim
// http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

// main function
function scrollToY(scrollTargetY, speed, easing) {
    // scrollTargetY: the target scrollY property of the window
    // speed: time in pixels per second
    // easing: easing equation to use

    var scrollY = window.scrollY,
        scrollTargetY = scrollTargetY || 0,
        speed = speed || 2000,
        easing = easing || 'easeOutSine',
        currentTime = 0;

    // min time .1, max time .8 seconds
    var time = Math.max(.1, Math.min(Math.abs(scrollY - scrollTargetY) / speed, .8));

    // easing equations from https://github.com/danro/easing-js/blob/master/easing.js
    var PI_D2 = Math.PI / 2,
        easingEquations = {
            easeOutSine: function (pos) {
                return Math.sin(pos * (Math.PI / 2));
            },
            easeInOutSine: function (pos) {
                return (-0.5 * (Math.cos(Math.PI * pos) - 1));
            },
            easeInOutQuint: function (pos) {
                if ((pos /= 0.5) < 1) {
                    return 0.5 * Math.pow(pos, 5);
                }
                return 0.5 * (Math.pow((pos - 2), 5) + 2);
            }
        };

    // add animation loop
    function tick() {
        currentTime += 1 / 60;

        var p = currentTime / time;
        var t = easingEquations[easing](p);

        if (p < 1) {
            requestAnimFrame(tick);

            window.scrollTo(0, scrollY + ((scrollTargetY - scrollY) * t));
        } else {
            console.log('scroll done');
            window.scrollTo(0, scrollTargetY);
        }
    }

    // call it once to get started
    tick();
}

// scroll it!
scrollToY(0, 1500, 'easeInOutQuint'); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-08-23T18:00:05.207

对于在 2019 年查看此问题的任何人：现在可以通过使用本机完成

```
window.scrollBy({
    top: 0,
    left: 270,
    behavior: 'smooth'
}); 
```

这适用于除 edge 和 safari 之外的所有主要浏览器。请参阅[https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollBy#Examples](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollBy#Examples)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-06-11T13:06:05.100

改编自[这个答案](https://stackoverflow.com/a/24559613/1942069 "这个答案")：

```
function scrollBy(distance, duration) {

    var initialY = document.body.scrollTop;
    var y = initialY + distance;
    var baseY = (initialY + y) * 0.5;
    var difference = initialY - baseY;
    var startTime = performance.now();

    function step() {
        var normalizedTime = (performance.now() - startTime) / duration;
        if (normalizedTime > 1) normalizedTime = 1;

        window.scrollTo(0, baseY + difference * Math.cos(normalizedTime * Math.PI));
        if (normalizedTime < 1) window.requestAnimationFrame(step);
    }
    window.requestAnimationFrame(step);
} 
```

这应该允许您平滑滚动指定的距离。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T14:41:54.720

我自己得到了。由于 wordpress 和 jquery.noConflict 模式，我不得不修改代码：

```
<script type="text/javascript">
        (function($){
        $(document).ready(function(){
            setTimeout(function() {
            $('body').scrollTo( '300px', 2500 );
        }, 3000);
        });
        }(jQuery));
</script> 
```

谢谢大家！！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T15:19:39.537

另一个 jQuery 示例，使用 easing 插件来获得一些不错的效果：

[http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-14T12:37:27.797

**这将起作用，假设您需要平滑滚动到页面顶部。**

```
const scrollToTop = () => {
  const c = document.documentElement.scrollTop || document.body.scrollTop;
  if (c > 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, c - c / 8);
  }
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T14:44:11.773

使用[jQuery](http://jquery.com/)时，您可以轻松使用[.animate](http://api.jquery.com/animate/)函数。

[这是一个关于它应该如何工作的例子。](http://www.learningjquery.com/2007/10/improved-animated-scrolling-script-for-same-page-links)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-30T14:42:03.953

使用 jQuery 可以使这变得更容易，也许使用 scrollto 插件。[http://flesler.blogspot.se/2007/10/jqueryscrollto.html](http://flesler.blogspot.se/2007/10/jqueryscrollto.html)

考虑这样的解决方案：

```
<script type='text/javascript' src='js/jquery.1.7.2.min.js'></script>
<script type='text/javascript' src='js/jquery.scrollTo-min.js'></script>
<script type='text/javascript' src='js/jquery.easing.1.3.js'></script><!-- only for other easings than swing or linear -->
<script type='text/javascript'>
$(document).ready(function(){
    setTimeout(function() {
    $('html,body').scrollTo( {top:'30%', left:'0px'}, 800, {easing:'easeInBounce'} );
}, 3000);
});
</script> 
```

当然，您需要 dl 脚本。

有关工作示例，请参见[http://jsfiddle.net/7bFAF/2/](http://jsfiddle.net/7bFAF/2/)

# android - 自定义样式干扰平台对话框

> ID：12199367
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:18.427
> 
> 标签：android, android-theme

我为我的应用创建了一个自定义主题，它看起来很棒！但是，我注意到一些默认平台对话框，例如长按时的上下文菜单`EditText`不能正确显示。

在左侧，通过我的应用程序的上下文菜单。右侧是通过平台应用程序的标准上下文菜单。

![我的应用主题](../Images/2bf3fcc134a8e825d8291976caea20ba.png) ![系统默认主题](../Images/14185adfb01c7ce86a761c9e7c5ca53d.png)

这是我的`style.xml`：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Theme.Styled" parent="Theme.Sherlock">
        <!-- ... various app styles ... -->
        <item name="android:alertDialogStyle">@style/DialogHolo</item>
        <item name="android:dialogTheme">@style/DialogHolo</item>
    </style>

    <style name="DialogHolo" parent="android:style/Theme.Dialog">
        <item name="android:fullDark">@drawable/bg_dialog_full</item>
        <item name="android:topDark">@drawable/bg_dialog_top</item>
        <item name="android:centerDark">@drawable/bg_dialog_middle</item>
        <item name="android:bottomDark">@drawable/bg_dialog_bottom</item>
        <item name="android:fullBright">@drawable/bg_dialog_full</item>
        <item name="android:centerBright">@drawable/bg_dialog_middle</item>
        <item name="android:bottomBright">@drawable/bg_dialog_bottom</item>
        <item name="android:bottomMedium">@drawable/bg_dialog_bottom</item>
        <item name="android:centerMedium">@drawable/bg_dialog_middle</item>
        <item name="android:textColor">#ffe6e7e8</item>
    </style>

</resources> 
```

是否可以让这些对话框使用默认样式或让文本以所需的文本颜色显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:58:11.310

我从来没有为此找到一个优雅的解决方案，而是`style.xml`在显示自定义对话框时简单地提供了一个单独定义的主题。

# google-maps-api-3 - Google 地球插件性能

> ID：12199368
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:18.380
> 
> 标签：google-maps-api-3

Google 地球插件的性能存在一些问题，特别是当我们更改模式时 - 从我们控制移动物体（飞机）的模式到全景模式（我们只是观察、缩放等）。我们认为这是由于插件被迫重新加载我们和他们自己的 3D 图像。问题是，是否有办法改进它？

1.  有没有办法在 GE 插件中预加载所有 3D 内容？
2.  是否有与 Google Earth Pro 等效的 Google Earth 插件 - 这样我们可以在加载 3D 内容方面获得更好的性能？

想法将不胜感激。

# powershell - get-itemproperty 不返回所有属性

> ID：12199372
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:38.940
> 
> 标签：powershell

希望你能帮助...

执行下面的 powershell（我是新手 btw）来获取注册表项的值，当我执行第一个 powershell 语句时，我得到了我期望的所有属性，但是当我针对 VisualStudio\10.0 执行第二个语句时它返回没有属性，即使在注册表编辑器中有一堆属性（包括我正在追逐的 InstallDir！）盯着我的脸。你能帮我吗？？

谢谢

```
PS C:\DEV\GeoMet> Get-ItemProperty -path HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion

    PSPath                   : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion
    PSParentPath             : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows
    PSChildName              : CurrentVersion
    PSDrive                  : HKLM
    PSProvider               : Microsoft.PowerShell.Core\Registry
    SM_GamesName             : Games
    SM_ConfigureProgramsName : Set Program Access and Defaults
    CommonFilesDir           : C:\Program Files\Common Files
    CommonFilesDir (x86)     : C:\Program Files (x86)\Common Files
    CommonW6432Dir           : C:\Program Files\Common Files
    DevicePath               : C:\Windows\inf
    MediaPathUnexpanded      : C:\Windows\Media
    ProgramFilesDir          : C:\Program Files
    ProgramFilesDir (x86)    : C:\Program Files (x86)
    ProgramFilesPath         : C:\Program Files
    ProgramW6432Dir          : C:\Program Files

PS C:\DEV\GeoMet> Get-ItemProperty -path HKLM:\SOFTWARE\Microsoft\VisualStudio\10.0
PS C:\DEV\GeoMet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:12:36.563

您几乎肯定会在64 位机器上查看**32 位reg hive。**仔细检查您的 regedit 路径 - 真的`HKLM\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0`吗？

我在 32 位密钥中看到属性（例如 InstallDir），但在 64 位密钥中没有看到。

如果是这样，这将是正确的查询：

```
Get-ItemProperty -path HKLM:\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:49:14.840

这是我在 regedit 上看到的：

![在此处输入图像描述](../Images/60fb9ab2417b2a3f52c344d032fa3ca9.png)

所以，你得到的输出`Get-ItemProperty`是正确的。对于您提到的另一条路径，您会看到有很多值。

您在 10.0 下看到的 Debugger 等可以通过使用`Get-ChildItem`cmdlet 获得。

# wcf - 无法使 IDispatchMessageInspector 工作

> ID：12199373
> 
> 赞同：3
> 
> 时间：2012-08-30T14:36:43.367
> 
> 标签：wcf, idispatchmessageinspector

我需要在 REST、Json、WCF Web 服务中使用请求标头。我创建了我的 IDispatchMessageInspector

```
public class HeaderInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
    {
        int ind = request.Headers.FindHeader("xxxxx", "");
        return null;
    }

    public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
    {
    }
} 
```

然后一个端点行为将检查器附加到端点：

```
public class HeaderInspectorBehavior : IEndpointBehavior
{
    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {
        HeaderInspector headerinsp = new HeaderInspector();
        endpointDispatcher.DispatchRuntime.MessageInspectors.Add(new HeaderInspector());
    }

    public void Validate(ServiceEndpoint endpoint)
    {
    }
} 
```

最后是 BehaviorExtensionElement ：

```
public class MyExtension : BehaviorExtensionElement
{
    public override Type BehaviorType
    {
        get { return typeof(HeaderInspectorBehavior); }
    }
    protected override object CreateBehavior()
    {
        return new HeaderInspectorBehavior();
    }
} 
```

这些类在同一个文件/命名空间 PDM.WebService 我的配置是：

```
<behaviors>
  <endpointBehaviors>
    <behavior name="RestBehavior">
      <HeaderInspectorBehavior/>
      <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json" faultExceptionEnabled="true" automaticFormatSelectionEnabled="false" />
    </behavior>
  </endpointBehaviors>
</behaviors>
<extensions>
  <behaviorExtensions>
    <add name="HeaderInspectorBehavior" type="PDM.WebService.MyExtension, PDM.WebService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
  </behaviorExtensions>
</extensions> 
```

一切都编译得很好，在执行时我可以捕捉到方法“public override Type BehaviorType”的执行，但之后没有其他代码方法被触发（我发送了请求并得到了响应，服务响应良好）。我在每个方法中都设置了调试点，没有其他方法执行！（尤其是 ApplyDispatchBehavior）。有人可以指出我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:54:19.570

请参阅[未](https://stackoverflow.com/questions/15610186/createbehavior-is-not-invoked/15616633#15616633)针对类似问题调用 CreateBehavior()。

确保您的服务元素的名称对应于`mynamespace.myservicename`

即使您没有正确的服务名称，该服务也会提供正确的响应；但是`CreateBehavior()`只有当您拥有正确的服务元素名称时才会调用。

例子

```
<service
      name="WcfServiceApp001.Service1"
      behaviorConfiguration="InternalPayrollBehavior">
<endpoint address="" binding="basicHttpBinding"
          behaviorConfiguration="EndpointBehavior"
          contract="WcfServiceApp001.IService1"
          />
</service> 
```

# c++ - 引用而不是指向抽象类的指针

> ID：12199374
> 
> 赞同：1
> 
> 时间：2012-08-30T14:36:44.187
> 
> 标签：c++, oop, class, object, abstract-class

我很好奇是否可以`Base* base`在课堂上的以下程序中`Container`替换为`Base& base`？
用`Base base`它是无法替代的，因为`Base`它是抽象的。
对象应该分配在`Base& base`某个地方，所以我仍然无法摆脱指向已分配对象的指针。

```
#include <iostream>
class Base
{   public:
    virtual void str()=0;
};

class A : public Base
{   int i;
    public:
    A(int i):i(i){}
    void str(){std::cout<<i<<std::endl;}
};

class B : public Base
{   double f;
    public:
    B(double f):f(f){}
    void str(){std::cout<<f<<std::endl;}
};

class Container
{   Base *base;
    public:
    Container(int i)   { base=new A(i);}
    Container(double f) { base=new B(f);}
    void str(){ base->str();}
};
int main ()
{   
    Container c1(8),c2(13.0);  
    c1.str();   
    c2.str();  
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:39:44.940

使用您的代码，我不推荐它，因为`Container`它的所有者`base`和引用在*语义*上意味着其他东西（别名）。

从技术上讲，没有什么能阻止你：

```
class Container
{   Base &base;
    public:
    Container(int i) : base(*new A(i))   {}
    Container(double f) : base(*new B(f)) {}
    void str(){ base->str();}
}; 
```

请注意，必须在初始化列表中初始化引用。

您仍然需要清理内存，并且通过参考看起来很难看：

```
~Container() { delete &base; } 
```

代替

```
~Container() { delete base; } 
```

如果您使用指针。当然，使用 a`std::unique_ptr`而不是这两个中的任何一个都会让生活**变得更轻松**。

此外，请务必实现（或声明为`private`or `deleted`）复制构造函数或赋值运算符。

*稍后发现*- 您**需要**提供`Base`一个`virtual`析构函数，否则当您尝试清理内存时会遇到未定义的行为领域。

# asp.net - 是什么阻止了有人通过嗅探网络窃取和使用 asp.net 身份验证 cookie？

> ID：12199376
> 
> 赞同：1
> 
> 时间：2012-08-30T14:36:49.927
> 
> 标签：asp.net, forms-authentication

我已经尝试搜索并找到了与此接近的问题，但我找不到一个真正详细说明这个确切问题的答案。

什么（如果有的话）阻止用户嗅探网络，获取站点发送给我的所有 asp.net 表单身份验证 cookie（或嗅探我发送到服务器的 cookie），在他们自己的浏览器中设置这些 cookie 和以经过身份验证的用户身份查看网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:33:54.367

SSL 是唯一可以阻止它的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:16:21.660

从本质上讲，我认为没有任何本机机制可以防止您描述的情况。我认为这是 MS 建议 Forms Authentication cookie 具有非常有限的生命周期（设置较短的到期时间）并通过 SSL 进行通信的原因之一。

# c# - 使用 Skip() 和 Take() 使用 @Ajax.ActionLink 动态加载数据

> ID：12199377
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:49.440
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我是新手`ASP.NET MVC`，所以请帮我解决这个乍一看很简单的问题。

我有一张学生表，下面有`View`一个`Load More`链接。通过单击此链接，我需要使用 AJAX 加载更多学生记录。

所以这是我的`View`（省略不必要的数据）

```
<table id="studentTable">
    <thead>
        ...
    </thead>
    <tbody>
        @Html.Partial("_StudentDetailsList", Model)
    </tbody>
</table>
@Ajax.ActionLink("Load More", "LoadMoreStudents", new AjaxOptions
{
    HttpMethod = "POST",
    InsertionMode = InsertionMode.InsertAfter,
    UpdateTargetId = "studentTable"
}) 
```

`_StudentDetailsList`显示学生的局部视图

```
@model IEnumerable<MvcApplication1.Models.Student>
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
    </tr>
} 
```

行动

```
public ActionResult LoadMoreStudents(int skip = 0)
{
    return PartialView("_StudentDetailsList", studentRepository.Get(orderBy: s => s.OrderBy(st => st.FirstName).OrderBy(st => st.LastName)).Skip(skip).Take(10));
} 
```

如您所见，我想每次加载接下来的 10 个学生，但我必须知道已经加载了多少。所以问题是：我应该从哪里得到这个`skip`我想传递给的`Action`参数`View`。我如何计算`View`已经加载了多少局部视图以及每个局部视图有多少学生？或者将此参数传递给操作是一种不好的做法，也许我应该在其他地方处理它（例如某些服务）？请建议正确的方法来做到这一点。谢谢。

PS请随意编辑标题，因为我想不出合适的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:35:58.080

最简单的方法是为您创建一个包含这些变量的 ViewModel。

**视图模型**

```
public class YourViewModel(){

    public int skip {get;set;}

    public IEnumerable<StudentDetails> StudentDetailList {get;set;}

} 
```

**控制器/动作方法**

```
public ActionResult LoadMoreStudents(int skip = 0)
{
    return PartialView("_StudentDetailsList", new YourViewModel{
      StudentDetailList = studentRepository.Get(orderBy: s => s.OrderBy(st => st.FirstName).OrderBy(st => st.LastName)).Skip(skip).Take(10),
      skip = skip + 10});
} 
```

**视图** @Html.Partial("_StudentDetailsList", Model.StudentDetailList)

**局部视图**

```
@model MvcApplication1.Models.YourViewModel
<table id="studentTable">
    <thead>
        ...
    </thead>
    <tbody>    
  @foreach (var item in Model.StudentDetailList)
   {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
    </tr>
}
    </tbody>
    </table>
    @Ajax.ActionLink("Load More", "LoadMoreStudents", new {skip = Model.skip}, new AjaxOptions
    {
        HttpMethod = "POST",
        InsertionMode = InsertionMode.InsertAfter,
        UpdateTargetId = "studentTable"
    }) 
```

基本上，您必须能够使用从控制器返回的值动态更新 Ajax.ActionLink。在这里，我将它移到了 PartialView 中（可以说您可以将整个表（包括获取更多链接）移到 PartialView 中，让它更干净）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T18:22:55.493

你在路上。您应该将链接的 Ajax.ActionLink 替换为 $.get，并通过计算您已经拥有的 tbody 处的行数来检索跳过：

首先将 ActionLink 替换为：

```
<a href="#" id="mylink">Load More Students here!</a> 
```

其次，创建这个函数来做 get：

```
$('mylink').click(function (e) {
    e.preventDefault();
    //Gets the number of rows that you alredy have loaded
    var rowCount = $('studentTable').find('tbody > tr').length;
    //The URL for the get, with the number of rows
    var url = "http://www.myurl.com/controller/action?skip=" + rowCount;

    $.get(url, function (data) {
       //Append the content from the partial view to the tbody
       $('studentTable').find('tbody').append(data);
    });
}); 
```

我认为这也是一个好方法！

希望这对你有帮助！

# ruby-on-rails-3 - 设计会话限制

> ID：12199379
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:56.210
> 
> 标签：ruby-on-rails-3, devise

我有一个运行 Rails 3.2.6 和 Devise 2.1.2 的 Rails 应用程序，我希望能够将并发登录限制为 1。我尝试使用 Devise 安全扩展，但不断获得用于 unique_session_id 的未定义方法。

相反，我想看看我是否可以像这篇 SO 文章中那样覆盖 Devise 的行为：[设计一次限制每个用户一个会话](https://stackoverflow.com/questions/7068919/devise-limit-one-session-per-user-at-a-time)

我了解它是如何工作的，并且我已经生成了一个会话控制器，但我不确定如何强制应用程序将其用作设计的替代。同样在控制器中，我应该从应用程序控制器还是设计控制器继承？

现在一切就绪，但是应用程序没有编写 login_token，它告诉我我没有正确使用控制器，或者其他可能有问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:58:10.060

我强烈建议您查看[Devise Wiki](https://github.com/plataformatec/devise/wiki/_pages)。很有可能在做这样的事情时，可以在那里找到答案。您的新控制器将需要从 Devise Sessions Controller 继承，如下所示：

```
class MySessionsController < Devise::SessionsController 
```

这样，您没有专门覆盖的任何方法仍将被调用，因此不会破坏其他功能。

为了确保 Devise 使用您的控制器而不是它自己的控制器，请按如下所示进行`devise_for`调用：`routes.rb`

```
devise_for :users, :controllers => { :sessions => "my_sessions" } 
```

从那里设计将拿起你的控制器。重新启动服务器以确保安全可能是个好主意。

# bash - 将差异输出发送到 3 个文件

> ID：12199380
> 
> 赞同：2
> 
> 时间：2012-08-30T14:36:56.897
> 
> 标签：bash, diff, file-descriptor

我想要做的是，区分 2 个文件并将 diff 输出写入 3 个不同的文件。我可以告诉 diff 格式化它的输出，如：

```
diff a.txt b.txt --new-line-format=... --old-line-format=... --unchanged-line-format=... 
```

并使用这个：

```
diff a.txt b.txt --new-bla-bla="echo %l>new.txt" --old--="echo %l>old" ... 
```

我可以输出到 3 个不同的文件，除了不出现双引号。
我想尽可能少地这样做，所以运行 3 个差异等不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:34:43.457

这是一个可能更长一点的解决方案，但更强大，因为它避免了对`eval`:

```
diff a.txt b.txt --new-line-format "3 %L" \
                 --old-line-format "4 %L"\
                 --unchanged-line-format "5 %L" |\
   while read -r fd line; do
     echo "$line" >&$fd
   done 3> new.txt 4> old.txt 5> unchanged.txt 
```

这通过在每个新的、旧的和未更改的行（分别）前面加上我们将添加它们的文件的文件描述符来工作。然后我们使用 解析输出`read`，并将该行回显到正确的文件描述符，每个描述符都被重定向到正确的输出文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:17:55.200

在阅读@chepner 的出色答案之前，我写了以下内容：

```
diff diff_old diff_new --new-line-format='>%L' --old-line-format='<%L' --unchanged-line-format='=%L' |  
awk '
    function printto(file) {print substr($0,2) > file} 
    /^>/ {printto("new.txt")} 
    /^</ {printto("old.txt")} 
    /^=/ {printto("unchanged.txt")}
' 
```

这与他的回答类似，但需要另一个进程而不是在当前 [*] shell 中工作。

[*] 忽略为管道中的 while 命令创建的子 shell。

# java - Wicket：如何将 DropDownChoice 与 PropertyModel 一起使用？

> ID：12199383
> 
> 赞同：0
> 
> 时间：2012-08-30T14:36:57.047
> 
> 标签：java, html, wicket

我在使用带有 DropDownChoice 的 PropertyModel 时遇到问题。我需要一些东西，每次 DropdownChoice 发生变化时，它都会比较值并做一些事情。这就是我正在尝试的：

**实例化选项的东西**

```
private String typeSelected = DEFAULT_TYPE_VALUE;

List<String> typeSelectChoices = new ArrayList<String>();

typeSelectChoices.add(DEFAULT_TYPE_VALUE);
typeSelectChoices.add(TextFactory.TYPE_VALUE_1;
typeSelectChoices.add(TextFactory.TYPE_VALUE_2); 
```

**实例化 DropDownChoice**

```
typeSelect = new DropDownChoice<String>(TYPE_SELECT_ID, 
                    new PropertyModel(this, "typeSelected"), typeSelectChoices); 
```

**DropDownChoice onChange 事件**

```
typeSelect.add(new AjaxEventBehavior("onchange") {

        @Override
        protected void onEvent(AjaxRequestTarget target) {

            System.out.println(typeSelected);
        }
    }); 
```

无论选择什么选项，它总是打印“选择”。我也试过：

`System.out.println(typeSelect.getModel.getObject());`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:54:59.730

您可以在 DropDownChoice 的方法 wantOnSelectionChangedNotifications 的 javadoc 中找到一些其他有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:42:22.657

我不是这里的专家，但看起来您需要引用 typeSelected 的属性而不是 typeSelected 本身。所以应该是这样的：

```
System.out.println(typeSelected.value); 
```

正如我所说，我不是专家，所以我不确定这`.value`是正确的属性，但你应该能够从这里弄清楚。

祝你好运！

* * *

更新

这适用于Javascript：

```
System.out.println(typeSelected.options[typeSelected.selectedIndex].value); 
```

# google-apps-script - 复制到我的帐户

> ID：12199385
> 
> 赞同：0
> 
> 时间：2012-08-30T14:37:16.547
> 
> 标签：google-apps-script, google-sheets

我有一些带有一组脚本的共享工作表。当用户完成他/她的工作时，我希望他们单击​​一个按钮来执行脚本。第一步是制作 w/s 的备份副本。这是问题所在，它复制到他/她的帐户。那是错误的。我想要它到我的帐户。

`ss.copy(this+"bkp")`

我该怎么做才能使这个副本被转储到**我的**帐户中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:37:40.463

使脚本以您的身份运行，而不是以用户身份运行。当发布应用程序时，选择作为我执行功能。

# macos - Sublime Text 2 - 聚焦一列（如在 iTerm 中？）

> ID：12199392
> 
> 赞同：1
> 
> 时间：2012-08-30T14:37:29.853
> 
> 标签：macos, sublimetext2

我正在使用 Sublime Text 2。我喜欢使用 2 列布局，因此我可以一次看到 2 个源文件。但是有时我想将一列扩展到整个窗口（类似于 iTerm 中的`shift`++命令`command`）`return`。

我可以使用`option`++和`command`++在2列和1列布局之间切换，但问题是，当从 2 到 1 再回到 2 列时，之前在第二列中的所有文件都放入了第一列列，现在第二列是空的。`1``option``command``2`

是否有一个插件（或我不知道的命令）可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:42:15.257

[https://github.com/SublimeText/Origami](https://github.com/SublimeText/Origami)

这个做到了，但我确信默认键盘映射中有一些东西

# java - Tomcat 6 中 org.apache.jsp.page_jsp._jspInit 的 java.lang.NullPointerException，但在 Tomcat 7 中有效

> ID：12199396
> 
> 赞同：1
> 
> 时间：2012-08-30T14:37:37.187
> 
> 标签：java, jsp, tomcat, servlets

在我的 servlet 中，我这样做：

```
request.getRequestDispatcher("/page.jsp").forward(request,response); 
```

我在 Tomcat 6 上得到以下`NullPointerException`信息，但它在 Tomcat 7 中有效。

```
SEVERE: Servlet.service() for servlet jsp threw exception java.lang.NullPointerException
    at org.apache.jsp.page_jsp._jspInit(page_jsp.java:23)
    at org.apache.jasper.runtime.HttpJspBase.init(HttpJspBase.java:52)
    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:159)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at com.dotvocal.poa.vocal.main.servlet.LoadCompany.execute(MyServlet.java:100)
    at com.dotvocal.poa.vocal.main.servlet.LoadCompany.doGet(MyServlet.java:60)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

我还尝试了以下方法：

```
request.getRequestDispatcher("http://localhost:8080/myapp/page.jsp").forward(request,response); 
```

但这并没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:07:06.727

> java.lang.NullPointerException 在 org.apache.jsp.page_jsp._jspInit(page_jsp.java:23)

您有特定于 servletcontainer 的 JSP 库，例如`jsp-api.jar`在您的 webapp 中，`/WEB-INF/lib`或者可能`JDK/lib`是`JDK/lib/ext`.

**删除**它们。他们根本不属于那里。servlet 容器本身已经随这些库一起提供。根据问题症状，您在 webapp 中使用的那个源自 Tomcat 7，因此当您将其部署到不同的 servletcontainer make/version（例如 Tomcat 6）时，您的 webapp 将无法工作，因为它会与 servletcontainer 自己的冲突图书馆。

错误地将特定于 servletcontainer 的库放置在 webapp 中`/WEB-INF/lib`是一个经典的初学者错误尝试修复 IDE 项目中的 Servlet API 编译错误。您应该在 IDE 项目中将 servletcontainer 引用为“目标运行时”。

### 也可以看看：

*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T11:29:09.997

我在使用 JBoss 4.3 时遇到了同样的错误，我的解决方案是从我的 JBoss 环境中删除日志、工作和 tmp 文件夹。

# jquery - jQGrid 搜索按钮什么都不做

> ID：12199400
> 
> 赞同：1
> 
> 时间：2012-08-30T14:37:48.013
> 
> 标签：jquery, jqgrid

使用 jQGrid v4.2 和 jQuery 1.8 我无法让搜索工作。当我单击搜索按钮时，没有任何反应...

我使用 v4.2 的原因是因为它是 jqgrid nuget 包的最新版本（令人讨厌的是作者没有更新它）。

有人有解决方法吗？我会用最新版本测试它，看看它是否是一个错误。在此示例中，它不适用于 datatype: local 但它也不适用于具有 json 数据的网格。难道我做错了什么？

```
<link href="../../Content/themes/base/minified/jquery-ui.min.css" rel="stylesheet" type="text/css" />
<link href="../../Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" type="text/css" />

<script src="../../Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.23.js" type="text/javascript"></script>

<script type="text/javascript" src="../../Scripts/i18n/grid.locale-en.js"></script>
<script src="../../Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
    var mydata = [{ id: "1", name: "foo" }, { id: "2", name: "bar"}];

    jQuery(document).ready(function () {
        jQuery("#lgrid").jqGrid({ data: mydata,
            datatype: "local",
            height: 150,
            width: 600,
            rowNum: 10,
            rowList: [10, 20, 30],
            colNames: ['id', 'name'],
            colModel: [{ name: 'id', index: 'id', width: 60, sorttype: "int" },
                                    { name: 'name', index: 'name', width: 60}],
            pager: "#pgrid",
            viewrecords: true,
            caption: "Contacts"
        });

        jQuery("#lgrid").jqGrid('navGrid', '#pgrid', { del: false, add: false, edit: false });
    });     
    </script> 

<table id="lgrid"></table> 
<div id="pgrid"></div> 
```

**编辑：**适用于 jqGrid v4.4.1 ...所以我猜它是一个错误。可惜我不能再使用nuget包了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:08:46.600

我在同样的问题上苦苦挣扎，在我发现 jQgrid 搜索不适用于 jQuery 1.8.0 的原因之后：

在我的 jquery.jqGrid.js（v 4.3.2）中，我发现了这个：

```
if ($("#" + $.jgrid.jqID(IDs.themodal)).html() !== null) {
      showFilter($("#fbox_" + $.jgrid.jqID(+$t.p.id)));
} 
```

在我的文件中，它位于第 6863 行，但您可能需要搜索它，因为与原始文件相比，我的文件可能有所修改。

问题是*$([id]).html()*在旧的 jQuery 版本中计算为 null，而在 jQuery 1.8.0 中它的计算结果为 undefined！由于 (undefined !== null) 为真且 (null !== null) 为假，因此代码对不同版本的 jQuery 执行不同的操作。

我修复它并使它与 jQuery 1.8.0 一起工作的方法是将比较器从 !== 更改为 !=。这是有效的，因为 (null != null) 和 (null != undefined) 的计算结果都为真！

希望这会有所帮助！

# android - 在 Android 中找不到 Jar 错误

> ID：12199402
> 
> 赞同：-1
> 
> 时间：2012-08-30T14:37:51.337
> 
> 标签：android, android-layout, android-intent

在下面的代码中，我通过单击项目属性导入了 jsch jar，并通过添加“添加外部 jar 按钮”也已从以下链接[添加外部 jar](http://czetsuya-tech.blogspot.in/2011/04/javalangnoclassdeffounderror.html)添加到 ant 全局路径中， 但是当我运行程序时，我仍然得到“java.lang.NoClassDefFoundError：com.jcraft.jsch.JSch”

```
 package android_jsch.com;

  import java.io.PrintStream;
  import java.util.ArrayList;
  import java.util.List;

  import android.app.Activity;
  import com.jcraft.jsch.*;
  import android.os.Bundle;
  import android.widget.EditText;

  public class Android_jschActivity extends Activity {
     EditText ip,username,password;
     @Override
      public void onCreate(Bundle savedInstanceState) {
        List<String> commands = new ArrayList<String>();
          commands.add("touch /tmp/test1.txt");
          commands.add("touch /tmp/test2.txt");
          commands.add("touch /tmp/test3.txt");
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
        rd);

          try {
              JSch jsch = new JSch();

              session.connect();

              Channel channel=session.openChannel("shell");//only shell
              channel.setOutputStream(System.out);
              PrintStream shellStream = new PrintStream(channel.getOutputStream());  // printStream for convenience
              channel.connect();
              for(String command: commands) {
                  shellStream.println(command);
                  shellStream.flush();
              }

              Thread.sleep(5000);

              channel.disconnect();
              session.disconnect();
          } catch (Exception e) {
              System.err.println("ERROR: Connecting via shell to "+ip.getText().toString());
              e.printStackTrace();
          }
      }

      private static void setUpHostKey(Session session) {
          java.util.Properties config = new java.util.Properties();
          config.put("StrictHostKeyChecking", "no");
          session.setConfig(config);
      }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:39:14.660

您应该指定构建 apk 时必须导出 jar：在“Java Build Path”>“Order and Export”选项卡中，填写与您的 jar 对应的复选框。

# c# - 在 Visual Studio 2012 的所有源代码文件中插入版权声明/横幅

> ID：12199409
> 
> 赞同：46
> 
> 时间：2012-08-30T14:38:12.610
> 
> 标签：c#, visual-studio-2012, banner, copyright-display

经过一番谷歌搜索后，我发现了这一点：[使用 Visual Studio 宏将版权标题插入源文件](http://www.andyparkhill.co.uk/2010/07/use-visual-studio-macro-to-insert.html)。它看起来很有希望：

```
// <copyright file="Sample.cs" company="My Company Name">
// Copyright (c) 2012 All Rights Reserved
// </copyright>
// <author>Leniel Macaferi</author>
// <date>08/30/2012 11:39:58 AM </date>
// <summary>Class representing a Sample entity</summary> 
```

当我尝试`Tools -> Macros`菜单选项时，它在 VS 2012 中不再存在。这是证明：[Macros in Visual Studio 11 Developer Preview](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/d8410838-085b-4647-8c42-e31b669c9f11)。他们只是放弃了这个功能。:(

所以，我只是想知道我可以使用哪个选项将版权信息添加到使用 Visual Studio 2012 的解决方案中的所有现有源代码文件中。是否有任何标准方法可以使用模板文件（与 `T4 templates`) 还是`PowerShell`脚本？我可以编写一些代码来遍历带有`.cs`扩展名的文件并添加版权信息，但这不是我想要的。我想知道一些工具来自动化这个过程。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-30T15:23:08.783

您可以创建一个新的片段，只需键入 cp + double tab 即可在您想要的位置插入通知（不用说您可以将关键字更改为您想要的任何内容）。

唯一的问题是，据我所知，片段不支持时间函数，因此使用这种技术似乎不可能获得日期线的当前时间。一个不太好的解决方法是使时间字段可编辑（类似于 mbox 片段的工作方式）并手动插入时间。

这是一个关于片段外观的示例。下面的代码片段将自动获取类名，并在您键入“版权”和双标签的地方插入版权声明。

**方法一**

```
 <?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>Copyright</Title>
      <Shortcut>Copyright</Shortcut>
      <Description>Code snippet for Copyright notice</Description>
      <Author>author name</Author>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
    </Header>
    <Snippet>
      <Declarations>
        <Literal Editable="false">
          <ID>classname</ID>
          <Function>ClassName()</Function>
        </Literal>
      </Declarations>
      <Code Language="csharp">
        <![CDATA[// <copyright file="$classname$" company="My Company Name">
      // Copyright (c) 2012 All Rights Reserved
      // <author>Leniel Macaferi</author>
      // </copyright>
      ]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

**方法二**

此外，这里有一个程序示例，您可以为您执行此操作。

```
List<string> files = new List<string>()
{
    "c:\\Form1.cs",
    "c:\\Form2.cs",
};

foreach (string file in files)
{
    string tempFile = Path.GetFullPath(file) + ".tmp";

    using (StreamReader reader = new StreamReader(file))
    {
        using (StreamWriter writer = new StreamWriter(tempFile))
        {
            writer.WriteLine(@"// <copyright file=" + Path.GetFileNameWithoutExtension(file) + @" company=My Company Name>
// Copyright (c) 2012 All Rights Reserved
// </copyright>
// <author>Leniel Macaferi</author>
// <date> " + DateTime.Now + @"</date>
// <summary>Class representing a Sample entity</summary>
");

            string line = string.Empty;
            while ((line = reader.ReadLine()) != null)
            {
                writer.WriteLine(line);
            }
        }
    }
    File.Delete(file);
    File.Move(tempFile, file);
} 
```

当然需要一些错误捕获。但这应该让您大致了解如何围绕它构建 UI 并添加您想要处理的文件。

**方法三**

也可以更改您的类的模板，这些模板通常可以在以下位置找到：

```
C:\Program Files (x86)\Microsoft Visual Studio <version>\Common7\IDE\ItemTemplates\CSharp\1033\ 
```

有时也需要编辑**ItemTemplatesCache**来显示结果。

这是基于您的问题的示例模板：

```
using System;
using System.Collections.Generic;
$if$ ($targetframeworkversion$ >= 3.5)using System.Linq;
$endif$using System.Text;

/* <copyright file=$safeitemrootname$ company="My Company Name">
   Copyright (c) 2012 All Rights Reserved
   </copyright>
   <author>Leniel Macaferi</author>
   <date>$time$</date>
   <summary>Class representing a Sample entity</summary>*/

namespace $rootnamespace$
{
    class $safeitemrootname$
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-30T19:56:50.997

我将在此处添加我在这篇文章中找到的 PowerShell 脚本：[Powershell – 版权标头生成器脚本](http://kishordaher.wordpress.com/2010/03/11/powershell-copyright-header-generator-script/)。它捕捉了我在发布问题之前的想法......

```
param($target = "C:\MyProject", $companyname = "My Company")

$header = "//-----------------------------------------------------------------------

// <copyright file=""{0}"" company=""{1}"">

// Copyright (c) {1}. All rights reserved.

// </copyright>

//-----------------------------------------------------------------------`r`n"

function Write-Header ($file)
{
    $content = Get-Content $file

    $filename = Split-Path -Leaf $file

    $fileheader = $header -f $filename,$companyname

    Set-Content $file $fileheader

    Add-Content $file $content
}

Get-ChildItem $target -Recurse | ? { $_.Extension -like ".cs" } | % `
{
    Write-Header $_.PSPath.Split(":", 3)[2]
} 
```

我写了一些关于它的小修改以适应我的需要：

[使用 PowerShell 在所有源代码文件中插入版权声明/横幅/标题](http://www.leniel.net/2012/08/inserting-copyright-notice-banner-in-all-source-code-files-with-powershell.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-17T16:44:26.810

万一这可能仍然很有趣，有[许可证头插件](https://visualstudiogallery.msdn.microsoft.com/5647a099-77c9-4a49-91c3-94001828e99e)可以在创建时向任何文件添加完全可定制的头。目前，这确实适用于 VS2013，但不适用于（还？）VS 2015。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-26T14:49:31.210

根据~~[发行说明](https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes#net-productivity)~~ [和发行说明](https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-v16.6#--visual-studio-2019-version-1660)（向下滚动一点），Visual Studio 16.6 允许定义可用于创建文件横幅的`file_header_template`规则。`.editorconfig`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-28T15:29:13.743

使用以下行将 .editorconfig 文件添加到您的 Visual Studio 项目中：

```
file_header_template = // <copyright file="{fileName}.cs" company="xyz Corporation">\n// Copyright (c) Xyz Corporation. All rights reserved.\n// </copyright> 
```

接下来，将光标放在任何 C# 或 Visual Basic 文件的第一行并键入 (Ctrl+.) 以触发 Quick Actions and Refactorings 菜单。选择添加文件横幅。如果您想将文件头应用于现有项目或解决方案的所有文件，请在“修复所有出现在：”选项下选择项目或解决方案。

这种方法适用于新文件甚至现有文件。这是内置在 Visual Studio 代码中的，因此您不需要自定义脚本。

此处的详细信息：[https ://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-v16.6#net-productivity:~:text=Add%20file%20headers%20to%20existing%20files](https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes-v16.6#net-productivity:%7E:text=Add%20file%20headers%20to%20existing%20files)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-30T16:37:37.733

在失去了一些不起眼的 PowerShell 脚本（不是作为答案添加的脚本）之后，我决定创建[copyright.py](https://gist.github.com/pakdev/f5a21d108329ebeb8e72)。示例用法：

```
C:\>python copyright.py "C:\users\me\documents\path\to\vsproject" 
```

它递归地查找指定目录中的所有 *.cs 文件，并在它们前面加上版权文本。文件开头是否已经存在其他文本无关紧要；它将被删除。

**注意：** *作为预防措施，您应该始终在执行此脚本之前备份您的代码*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-21T23:35:12.993

@leniel-macaferi 的代码的更简单版本（没有文件名和公司，只有标题）：

```
param($target = "C:\MyProject")

$header = "//-----------------------------------------------------------------------------
// Copyright (c) The Corporation.  All rights reserved.
//-----------------------------------------------------------------------------
"

function Write-Header ($file)
{
    $content = Get-Content $file
    $filename = Split-Path -Leaf $file
    $fileheader = $header
    Set-Content $file $fileheader
    Add-Content $file $content
}

Get-ChildItem $target -Recurse | ? { $_.Extension -like ".cs" } | % `
{
    Write-Header $_.PSPath.Split(":", 3)[2]
} 
```

要运行，请将代码保存在要递归迭代并`.\AddHeader.ps1 .`从 PowerShell 窗口执行的目录中的新文件（例如 AddHeader.ps1）中。

# python - 使用 Twisted Python 的 SMTP 模块清理资源

> ID：12199412
> 
> 赞同：2
> 
> 时间：2012-08-30T14:38:23.973
> 
> 标签：python, twisted, smtpd

这与此处先前回答的问题有关：[使用 Twisted 记录 SMTP 连接](https://stackoverflow.com/questions/12164557/logging-smtp-connections-with-twisted)。我有一个在每个 ConsoleMessageDelivery 实例中创建的数据库资源，我需要确保在关闭套接字时清理它。我有一个名为 DenyFactory 的 WrappingFactory ，并且在关闭套接字时调用了 DenyFactory.unregisterProtocol 方法，但是我无法（我可以弄清楚）如何访问在被销毁的 ConsoleMessageDelivery 实例中创建的资源。我在 ConsoleMessageDelivery 中尝试了**del** () 方法，但从未调用过。在这种情况下清理资源的最佳方法是什么？

```
class ConsoleMessageDelivery:
    implements(smtp.IMessageDelivery)

    def receivedHeader(self, helo, origin, recipients):
        myHostname, clientIP = helo
        headerValue = "by %s from %s with ESMTP ; %s" % (myHostname, clientIP, smtp.rfc822date())
        # email.Header.Header used for automatic wrapping of long lines
        return "Received: %s" % Header(headerValue)

    def validateFrom(self, helo, origin):
        # All addresses are accepted
        return origin

    def validateTo(self, user):
        if user.dest.local == "console":
            return lambda: ConsoleMessage()
        raise smtp.SMTPBadRcpt(user)

class ConsoleMessage:
    implements(smtp.IMessage)

    def __init__(self):
        self.lines = []

    def lineReceived(self, line):
        self.lines.append(line)

    def eomReceived(self):
        return defer.succeed(None)

    def connectionLost(self):
        # There was an error, throw away the stored lines
        self.lines = None

class ConsoleSMTPFactory(smtp.SMTPFactory):
    protocol = smtp.ESMTP

    def __init__(self, *a, **kw):
        smtp.SMTPFactory.__init__(self, *a, **kw)
        self.delivery = ConsoleMessageDelivery()

    def buildProtocol(self, addr):
        p = smtp.SMTPFactory.buildProtocol(self, addr)
        p.delivery = self.delivery
        return p

class DenyFactory(WrappingFactory):

    def buildProtocol(self, clientAddress):
        if clientAddress.host == '1.3.3.7':
            # Reject it
            return None
        # Accept everything else
        return WrappingFactory.buildProtocol(self, clientAddress)

    def unregisterProtocol(self, p):
        print "Unregister called" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:46:14.897

首先，永远不要使用`__del__`，特别是如果您有一些要清理的资源。 `__del__`防止在引用周期中对对象进行垃圾收集。（或者，切换到 PyPy，它可以通过对循环中的对象集合施加任意顺序来收集此类对象。）

接下来，考虑在消息传递工厂中打开您的数据库连接（或启动一个连接池）并在所有消息传递对象之间共享它。这样你就不需要清理它们的连接，因为你会在以后的消息中重复使用它们，而且你不会为每条消息分配一个新的，所以没有泄漏。

`eomReceived`最后，如果您真的需要任何每个事务的对象，您可以在您的或对象的`connectionLost`实现中清理它们`IMessage`。一旦 SMTP 事务的 DATA 部分完成（因为接收到所有数据或因为连接丢失），将调用其中一种方法。请注意，因为 SMTP 支持在单个事务中将消息传递给多个收件人，所以可能有多个`IMessage`对象参与，即使只有一个`IMessageDelivery`对象。因此，您可能希望保留一个计数器 -`validateTo`将消息传递对象上成功调用的调用次数与消息对象上的`eomReceived`/`connectionLost`调用次数相匹配。当每个调用发生相同数量的调用时，事务就完成了。

# redhat - 防止 RPM SPEC 文件中的硬编码路径

> ID：12199413
> 
> 赞同：1
> 
> 时间：2012-08-30T14:38:24.213
> 
> 标签：redhat, rpmbuild

我正在为[apc](http://pecl.php.net/package/apc)创建 rpm 。在编写规范文件时，我意识到某些命令可能具有可以在编译期间不断更改的路径。例如。这些命令需要在构建期间执行。

```
$ /usr/local/php/bin/phpize
$ ./configure --with-php-config=/usr/local/php/bin/php-config 
```

`phpize`但是文件的完整路径`php-config`可能会改变。那么如何防止这种依赖关系，以便我不应该在我的规范文件中硬编码这些路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:00:11.997

因为这些命令是在构建时使用的，所以这个问题的理想解决方案在这里：

1.  查找提供这些命令或路径的分发包，例如 php-config 由 Fedora 操作系统上的 php-devel 包提供。在 Fedora 中，您可以找到它使用`yum whatprovides "*/php-config"`，或者如果它们已经安装在系统上，则使用`rpm -qf /path/to/command`.

2.  一旦你知道包将它们添加为规范文件中的 BuildRequire 标记。第 2 步将确保无论何时从规范文件构建包时路径始终存在，即使您使用硬编码路径（这当然不是最好的方法）。

3.  您可以使用 %{_prefix} 代替 /usr/，它完全取决于您构建此 rpm 的发行版上可用的宏。检查宏文件中的路径宏。[这里](http://www.rpm.org/wiki/PackagerDocs/Macros)有一个具有通用宏定义的链接。

# php - MYSQL 输出 - HTML 表

> ID：12199414
> 
> 赞同：0
> 
> 时间：2012-08-30T14:38:25.493
> 
> 标签：php, mysql, html

我有一个查询要在我的 MYSQL 数据库中输出数据，并希望它显示在表格中。以“名称”和“用户 ID”作为标题......目前我开发的代码确实输出了结果，而是创建了表的多个实例并且不创建新行。

请问有人可以帮我实现我的目标吗？

```
echo"
<table width='400' border='1'>               
<tr>
    <td>Name</td>
    <td>SystemID</td>
  </tr>
  <tr>
    <td> ".$row['FullName']." </td>
    <td> ".$row['UserID']." </td>
  </tr>
</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:41:30.677

如果您显示的代码在某种循环数据库结果的 while 循环中，那么您应该清楚为什么会得到一堆单行表。每次循环执行都会发生整个表输出。你应该做的是在开始数据检索循环之前输出你的表格开始标签和标题行。每次循环执行时只输出行，然后在退出循环后输出表结束标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:41:49.270

```
echo"
<table width='400' border='1'>               
<tr>
    <td>Name</td>
    <td>SystemID</td>
  </tr>";

while ($row = $result->fetch_assoc()) { // or whatever your retrieval code is
  echo "<tr>
    <td> ".$row['FullName']." </td>
    <td> ".$row['UserID']." </td>
  </tr>";
}

echo "</table>"; 
```

您需要回显表打开标记和标题，然后遍历数据库结果，然后回显表关闭标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:41:56.623

表应该在数据循环之外定义，您只需遍历数据并在每个循环上添加一行：

```
echo "<table width='400' border='1'> ";
echo "<tr>
    <td>Name</td>
    <td>SystemID</td>
  </tr>";

// Example of while loop :
   while ($row = mysql_fetch_array($results)) {
     echo"      <tr>
        <td> ".$row['FullName']." </td>
        <td> ".$row['UserID']." </td>
      </tr>";
   }

echo "</table>"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T14:44:11.337

你应该放在 循环之前（ 并且 你应该放在循环之后......`<table width='400' border='1'>
<tr> <td>Name</td> <td>SystemID</td> </tr>` `<HERE> while() { ... }``</table>`

它应该是这样的：

```
echo "
<table width='400' border='1'>
<tr>
    <td>Name</td>
    <td>SystemID</td>
  </tr>";

while(....) {
echo "               
 <tr>
    <td> ".$row['FullName']." </td>
    <td> ".$row['UserID']." </td>
  </tr>
";
}

echo "</table>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T14:42:26.937

[http://www.siteground.com/tutorials/php-mysql/display_table_data.htm](http://www.siteground.com/tutorials/php-mysql/display_table_data.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T14:41:12.303

在循环中使用它

```
echo"
  <tr>
    <td> ".$row['FullName']." </td>
    <td> ".$row['UserID']." </td>
  </tr>"; 
```

并将桌子的其余部分缠绕在环上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-30T13:15:10.460

不要使任务复杂化；你不需要循环；mysql 提供选项 whichi is `--html`，只需使用它：

```
mysql --html -uroot -e "USE mydb;select * from mytable" 
```

如果您只想显示： FullName 和 UserID ：

```
mysql --html -uroot -e "USE mydb;select FullName,UserID from mytable" 
```

# javascript - 禁用移动样式表以加载整个站点

> ID：12199420
> 
> 赞同：0
> 
> 时间：2012-08-30T14:38:38.420
> 
> 标签：javascript, jquery, stylesheet, media-queries

我正在使用媒体查询来加载移动样式表。我希望用户能够单击将禁用此样式表的链接，以便他们能够查看完整的站点，如果他们愿意的话。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:56:34.843

您可以通过向其添加“禁用”属性来关闭样式表并添加不带媒体查询的样式表。

关于更改样式表的 ALA 上有一篇很好的（但旧的）文章：

[http://www.alistapart.com/articles/alternate/](http://www.alistapart.com/articles/alternate/)

# api - Magento Soap 错误 - 标签定义第 2 行中的数据过早结束

> ID：12199429
> 
> 赞同：4
> 
> 时间：2012-08-30T14:39:02.567
> 
> 标签：api, magento, soap, wsdl

我的客户正在使用 Unleashedsoftware.com 连接到 Magento 商店。但它给出了这个错误。

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <SOAP-ENV:Fault>
            <faultcode>WSDL</faultcode>
            <faultstring>
                SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://www.domain.com/index.php/api/v2_soap/index/wsdl/1/' : Premature end of data in tag definitions line 2
            </faultstring>
        </SOAP-ENV:Fault>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

浏览 [http://www.domain.com/index.php/api/v2_soap/index/](http://www.domain.com/index.php/api/v2_soap/index/)时，Firebug 给我“500 内部服务错误”。

当我浏览[http://www.domain.com/index.php/api/v2_soap/index/wsdl/1/](http://www.domain.com/index.php/api/v2_soap/index/wsdl/1/)时，我得到了有效的 XML 数据。

我检查了服务器日志文件，它看起来像：

```
[Thu Aug 30 22:22:25 2012] [warn] [client 92.92.92.92] mod_fcgid: stderr:  in /home/doaminuser/public_html/lib/Zend/Soap/Server.php on line 762 
```

我现在已经搜索了几天，今天我试图将整个站点复制到另一个测试服务器，它似乎正在工作！所以这似乎是一个服务器问题。

拜托，有人知道可能是什么问题吗？

有没有更好的方法来调试这个问题，任何示例代码或调试技巧。

Magento 版本是 1.6.2

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:17:15.793

由于 Magento 服务器与自身通信的问题，Magento 的 SOAP API 经常失败。

也就是说，PHP 的 SOAP 实现要求 SOAP 服务器本身通过 获取 WSDL 文件`http`，并且本地网络配置问题阻碍了 Magento 获取它自己的 WSDL。

您可以通过 SSH 连接到 Magento 服务器并运行以下命令来调试它

```
curl -l 'http://www.example.com/index.php/api/v2_soap/index/wsdl/1/' > /tmp/wsdl.xml 
```

然后检查`wsdl.xml`文件。因为您是从 Web 服务器执行此操作，所以您可能会得到与从本地浏览器执行它时不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:40:59.820

我在调用 URL 时遇到了类似的问题 `http://www.store.com/index.php/api/v2_soap/?wsdl`
一段时间后，我收到了该消息`500 - Internal Server Error`，并`Premature end of script headers`在 apache 错误日志中显示了一条消息。
经过一整天的研究，我发现`Timeout`Apache 模块的 -Directive（在 Linux 环境的 httpd.conf 中配置）设置为“20”，这导致服务器在 20 秒后发送 500 错误。问题是，在我的情况下，Magento 系统需要更长的时间来“抓取”所有 wsdl.xml 文件以构建 WSDL 输出（如果您使用的是 Magento SOAPv2）。也许你应该检查你的超时指令..希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:04:29.867

> “我对此有记忆。对我有用的是将主机名放在服务器上的 /etc/hosts 中，再加上 127.0.0.1 上的 www 别名但是，在这种情况下，服务器位于建筑物中而不是某些 ISP 位置，并且局域网上有 Windows 计算机。Windows 用户下载了大量的木马病毒色情内容，这些内容一直在向网络发送垃圾邮件，因此真正的问题出在网络上的 Windows 计算机上，而不是服务器或 Magento 上。在对 PC 进行磁盘处理后，问题就解决了。”

谢谢我在 magento 1.6 和 Windows Server 2008 上为此苦苦挣扎了 2 天，将此行添加到主机文件 ( `C:\Windows\System32\drivers\etc`) 为我解决了这个问题：

```
127.0.0.1   www.Domain.com 
```

还要记住修复您的 magento soap（角色），因为除非您修复此文件，否则角色资源不会保存在 1.6 中：

> MagentoRoot\app\code\core\Mage\Adminhtml\Block\Api\Tab\Rolesedit.php

替换这个：

```
if (array_key_exists(strtolower($item->getResource_id()), $resources) && $item->getPermission() == 'allow') { 
```

有了这个：

```
if (array_key_exists(strtolower($item->getResource_id()), $resources) && $item->getApiPermission() == 'allow') { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T06:28:16.800

就我而言，问题是启用了 Mod_Security 规则“PHP Easter Egg Access”。规则 ID：380800

禁用后，api 访问就起作用了。

Apache 日志文件中有一个指标：

```
Jun 19 09:15:52 httpd[1024961]: [error] [client xyz.xyz.xyz.xyz] ModSecurity: [file "/usr/local/apache/conf/modsec/99_asl_jitp.conf"] [line "116"] [id "380800"] [rev "1"] [msg "Atomicorp.com WAF Rules - Virtual Just In Time Patch: PHP Easter Egg Access"] [data "phpe9568f35-d428-11d2-a769-00aa001acf42"] [severity "CRITICAL"] Access denied with code 403 (phase 2). Pattern match "php(?:e9568f3[56]-d428-11d2-a769-00aa001acf42|b8b5f2a0-3c92-11d3-a3a9-4c7b08c10000)" at REQUEST_URI. [hostname "www.yoursever.com"]... 
```

Magento 版本：1.7.0.2
PHP 版本：5.3.26

有关 PHP 复活节彩蛋访问规则的更多信息：http: [//www.atomicorp.com/forums/viewtopic.php ?f=3&t=5057](http://www.atomicorp.com/forums/viewtopic.php?f=3&t=5057)
[http://www.0php.com/php_easter_egg.php](http://www.0php.com/php_easter_egg.php)

对于那些想要一个快速测试脚本来复制问题的人（在试图让您的托管服务提供商相信这是他们的问题时很有用），请使用：

```
<?php
   $server = new SoapServer("http://<url to your magento shop>/index.php/api/v2_soap/index/wsdl/1/");
?> 
```

这是 /lib/Zend/Soap/Server.php 中触发错误的行。

在我的情况下，如果您浏览到：
http://< 到您的 magento 商店
的网址 >/index.php/api/v2_soap/index/wsdl/1/ xml 很好，但是如果您在服务器上运行上述 php 脚本，给出了错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-23T22:51:14.983

这个错误最常出现在我身上，而忽略了 Magento SOAP url 中给出的域的 www。Url 必须与 Magento 配置中指定的基本 url 匹配。

# iphone - Mac 上的 Xcode 4 Organizer，如何在没有 Xcode 的情况下运行？

> ID：12199430
> 
> 赞同：2
> 
> 时间：2012-08-30T14:39:03.400
> 
> 标签：iphone, organizer

有没有办法在没有 XCODE 的情况下运行 Organizer 以将设备添加到 Porthole？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T14:42:39.583

可能不是，因为它内置在 XCode 中并且没有列在开发者工具菜单中。

但是您可以在不打开整个 XCode 项目的情况下打开管理器。只需打开 XCode 并单击 SHIFT + CMD + 2 或 Window > Organizer。

*或者*您可以前往 developer.apple.com > Provisioning Portal > Devices 并手动添加设备

# java - 具有多个参数的 JPA 标准 API

> ID：12199433
> 
> 赞同：39
> 
> 时间：2012-08-30T14:39:18.017
> 
> 标签：java, jpa, criteria-api

我需要创建一个使用具有多个参数的 JPA Criteria API 的搜索方法。现在的问题是并非每个参数都是必需的。所以有些可能是空的，它们不应该包含在查询中。我已经用 CriteriaBuilder 试过这个，但我看不出如何让它工作。

使用 Hibernate Criteria API，这相当容易。只需创建条件，然后添加限制。

```
Criteria criteria = session.createCriteria(someClass.class);
if(someClass.getName() != null) {
   criteria.add(Restrictions.like("name", someClass.getName());
} 
```

我如何使用 JPA 的 Criteria API 实现相同的目标？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-08-30T15:04:46.103

概念是构造[javax.persistence.Predicate](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Predicate.html)数组，其中仅包含我们要使用的谓词：

要查询的示例实体：

```
@Entity
public class A {
    @Id private Long id;    
    String someAttribute;
    String someOtherAttribute;
    ...
} 
```

查询本身：

```
 //some parameters to your method
    String param1 = "1";
    String paramNull = null;

    CriteriaBuilder qb = em.getCriteriaBuilder();
    CriteriaQuery cq = qb.createQuery();
    Root<A> customer = cq.from(A.class);

    //Constructing list of parameters
    List<Predicate> predicates = new ArrayList<Predicate>();

    //Adding predicates in case of parameter not being null
    if (param1 != null) {
        predicates.add(
                qb.equal(customer.get("someAttribute"), param1));
    }
    if (paramNull != null) {
        predicates.add(
                qb.equal(customer.get("someOtherAttribute"), paramNull));
    }
    //query itself
    cq.select(customer)
            .where(predicates.toArray(new Predicate[]{}));
    //execute query and do something with result
    em.createQuery(cq).getResultList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T14:50:20.800

看看这个站点[JPA Criteria API](http://www.objectdb.com/java/jpa/query/criteria)。有很多例子。

**更新：提供一个具体的例子**

让我们搜索余额低于特定值的 Accounts：

```
SELECT a FROM Account a WHERE a.balance < :value 
```

首先创建一个 Criteria Builder

```
CriteriaBuilder builder = entityManager.getCriteriaBuilder();

CriteriaQuery<Account> accountQuery = builder.createQuery(Account.class);
Root<Account> accountRoot = accountQuery.from(Account.class);
ParameterExpression<Double> value = builder.parameter(Double.class);
accountQuery.select(accountRoot).where(builder.lt(accountRoot.get("balance"), value)); 
```

要获取结果集参数并运行查询：

```
TypedQuery<Account> query = entityManager.createQuery(accountQuery);
query.setParameter(value, 1234.5);
List<Account> results = query.getResultList(); 
```

顺便说一句：entityManager 被注入到 EJB/Service/DAO 的某个地方。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-20T20:38:23.423

一个简单的 Spring 解决方案，使用 lambda 表达式：

```
Specification<User> specification = (root, query, builder) -> {
    List<Predicate> predicates = new ArrayList<>();

    // like
    predicates.add(builder.like(root.get("name"), "%test%"));

    // equal
    predicates.add(builder.equal(root.get("parent_id"), 99L);

    // AND all predicates
    return builder.and(predicates.toArray(new Predicate[0]));
};

repository.findAll(specification); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-10T05:16:46.747

Mikko 的回答效果很好。我需要做的唯一改变就是更换：

`cq.select(customer).where(predicates.toArray(new Predicate[]{}));`

和：

```
Predicate [] predicatesarr = predicates.toArray(new Predicate[predicates.size()]); 
cq.select(customer).where(predicatesarr); 
```

原版中从列表到数组的转换在某处不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T14:48:38.630

首先，Mikko 的回答让我得到了答案。为此点赞。

我的场景是我想要父母/孩子的关系，我想在 ~any~ 孩子身上找到一个匹配。

员工有多个 JobTitle(s)。

我想找一个员工（那里有很多职位），但是在我发送的任何职位上都可以找到它。

SQL 看起来像：

Select * from dbo.Employee e join dbo.JobTitle jt on e.EmployeeKey = jt.EmployeeKey WHERE (jt.JobTitleName = 'programmer' OR jt.JobTitleName = 'badcop')

我输入了性别和出生日期以完成示例（并提供更多“可选”）标准）

我的 JPA 代码

```
import org.apache.commons.lang3.StringUtils;
import org.springframework.data.jpa.domain.Specification;

import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Join;
import javax.persistence.criteria.Predicate;
import javax.persistence.criteria.Root;
import java.util.ArrayList;
import java.util.List;

public class MyEmployeeSpecification implements Specification<MyEmployee> {

    private MyEmployee filter;

    public MyEmployeeSpecification(MyEmployee filter) {
        super();
        this.filter = filter;
    }

    public Predicate toPredicate(Root<MyEmployee> root, CriteriaQuery<?> cq,
                                 CriteriaBuilder cb) {

        Predicate returnPred = cb.disjunction();

        List<Predicate> patientLevelPredicates = new ArrayList<Predicate>();

        if (filter.getBirthDate() != null) {
            patientLevelPredicates.add(
                    cb.equal(root.get("birthDate"), filter.getBirthDate()));
        }

        if (filter.getBirthDate() != null) {
            patientLevelPredicates.add(
                    cb.equal(root.get("gender"), filter.getGender()));
        }

        if (null != filter.getJobTitles() && filter.getJobTitles().size() > 0) {

            List<Predicate> jobTitleLevelPredicates = new ArrayList<Predicate>();

            Join<JobTitle, JobTitle> hnJoin = root.join("jobtitles");

            for (JobTitle hnw : filter.getJobTitles()) {
                if (null != hnw) {
                    if (StringUtils.isNotBlank(hnw.getJobTitleName())) {
                        jobTitleLevelPredicates.add(cb.equal(hnJoin.get("getJobTitleName"), hnw.getFamily()));
                    }
                }
            }

            patientLevelPredicates.add(cb.or(jobTitleLevelPredicates.toArray(new Predicate[]{})));
        }

        returnPred = cb.and(patientLevelPredicates.toArray(new Predicate[]{}));

        return returnPred;
    }
} 
```

但我发现我的原因是 predicates.toArray(new Predicate[]{}) ，也就是 varargs 技巧。（感谢米高）

我也在做“实现规范”方法。

其他有用的链接：

[JPA 规范示例](https://stackoverflow.com/questions/48647847/jpa-specifications-by-example)

[JPA CriteriaBuilder 将合取条件变成析取条件](https://stackoverflow.com/questions/38400272/jpa-criteriabuilder-conjunction-criteria-into-a-disjunction-criteria/38439442)

# css - CSS - 带有输入和标签 DOM 元素的自动换行

> ID：12199443
> 
> 赞同：0
> 
> 时间：2012-08-30T14:39:44.410
> 
> 标签：css, word-wrap

链接到 jsfiddle：http: [//jsfiddle.net/WBZng/1/](http://jsfiddle.net/WBZng/1/)

我有一个看起来像这样的 HTML 结构：

```
<div>
    <input/>
    <span>Label comes here...</span>
</div> 
```

两者都`input`应该`span`有`display:inline`。此外，`span`已经`word-wrap:break-word`使没有空格的长文本仍然被换行。但是，如果文本很长，则 将`<span>`显示在新行中，而不是保留`display:inline-block`。如果 中有空格，这不是问题`<span>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:42:05.463

你可以考虑给`ellipsis`元素`span`：

```
.panel span {
    width: 20px;
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
​ 
```

### 小提琴：http: [//jsfiddle.net/WBZng/3/](http://jsfiddle.net/WBZng/3/)

# c# - C# 和 MongoDB 使用 ObjectId 的列表删除记录

> ID：12199444
> 
> 赞同：4
> 
> 时间：2012-08-30T14:39:51.480
> 
> 标签：c#, mongodb

我需要使用官方 C# 驱动程序从 mongo db 的集合中删除一些记录。我的代码如下。

```
public static void Remove(List<ObjectId> objectIds)
{
        ObjectMongoCollection.Remove(Query.In("NotificationId", new BsonArray(objectIds)), SafeMode.True);
}

public class Notification
{
    public static MongoCollection<Notification> ObjectMongoCollection = MongoHelper.GetMongoServer("MongoKelimeYarisi").GetDatabase("KelimeYarisi").GetCollection<Notification>("Notification");

    [BsonId]
    public ObjectId NotificationId { get; set; }
    public int PlayerId { get; set; }
    public string OpponentName { get; set; }
    public string gameId { get; set; }
    public DateTime CreateDate { get; set; }
    public NotificationStatus Status = NotificationStatus.New;
    public NotificationType Type = NotificationType.RoundSubmit;
    public bool IsPushed { get; set; } 
```

它运行没有错误，但似乎不起作用。如何使用 ObjectIds 列表删除记录。

也试过：

```
ObjectMongoCollection.Remove(Query.In("_id", new BsonArray(objectIds)), SafeMode.True); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T10:32:45.067

我使用了一种不同的方法来获取 mongo 查询并且有效。我构建了一个 linq 查询并将其转换为一个 mongo 查询。

```
 public static void Remove(List<ObjectId> objectIds)
    {
        var linqQuery = from n in ObjectMongoCollection.AsQueryable<Notification>() where n.NotificationId.In(objectIds) select n;
        var mongoQuery = ((MongoQueryable<Notification>)linqQuery).GetMongoQuery();       
        ObjectMongoCollection.Remove(mongoQuery);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T18:46:33.763

我无法重现这一点。我编写了一个与您的代码尽可能相似的测试程序，实际上它确实删除了多条记录。这是我的测试程序：

[http://pastie.org/4618039](http://pastie.org/4618039)

如果您还有其他问题，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T15:21:04.363

你可以写一个方法叫做：

```
public void destroy() {
        ...
    } 
```

在此方法中，您将使用您的 ObjectId 列表并遍历它们。

```
foreach(Enitity enitity in entities) {
    ...
} 
```

您可以使用**MongoDB.Driver.Linq**执行列表中的特定查询：

```
var query = Query<Entity>.EQ(e => e.Attribute, entity.Value);
db.GetCollection<Entity>("Entity").Remove(query); 
```

其中 Value 将是您想要的对象的值。这将从数据库中删除包含特定值的元素。

希望这个对你有帮助。

# sockets - fread 挂起 - PHP

> ID：12199452
> 
> 赞同：2
> 
> 时间：2012-08-30T14:40:14.093
> 
> 标签：sockets

我使用 fsockopen($host,$port) 创建了一个套接字，使用 fwrite 发送数据，并尝试使用 fread 读取数据。看起来 fsockopen 成功创建了套接字， fwrite 成功地将数据发送到套接字（返回正数 - 4），但 fread 挂起。看起来它正在等待读取数据，但我不明白为什么.. fwrite 成功。我尝试使用 socket_create、socket_connect、socket_send 和 socket_recv 代替 fwrite 和 fread，但同样的事情发生了。

以下是我的代码摘要：

```
$socket = fsockopen($host,$port,$errno,$errstr);
if(!$socket){
     echo "$errstr ($errno)<br>";
}

...
$example; //string to send
fwrite($socket,pack("N",strlen($example)),4);
$result = fread($socket,4); <-- Hangs and eventually shuts down the server.
... 
```

在那个 fread 之前我几乎没有成功的发送/读取代码..

```
$status = stream_get_meta_data($socket);
var_dump($status); 
```

这将输出以下数组：

```
array(7) { 
["stream_type"]=> string(14) "tcp_socket/ssl" 
["mode"]=> string(2) "r+" 
["unread_bytes"]=> int(0) 
["seekable"]=> bool(false) 
["timed_out"]=> bool(false) 
["blocked"]=> bool(true) 
["eof"]=> bool(false) } 
```

困扰我很久了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:39:20.613

如果您使用流函数进行套接字通信，您可能希望使用它[`fflush()`](http://php.net/manual/en/function.fflush.php)来确保您实际在线发送数据，否则这个缺少的项目可能只是位于流输出缓冲区中。

不过，这应该不是问题[`socket_send()`](http://php.net/manual/en/function.socket-send.php)。由于您说结果是相同的，我建议重新检查您正在使用哪种*应用程序协议*- 另一方可能期望超过 4 个字节来生成响应。

最后的手段总是像[`tcpdump(1)`](http://www.tcpdump.org/tcpdump_man.html)或[wireshark](http://www.wireshark.org/)这样的数据包嗅探器。

# jquery - 如何启用一些时间延迟来触发 JQuery Slider 功能？

> ID：12199453
> 
> 赞同：1
> 
> 时间：2012-08-30T14:40:15.613
> 
> 标签：jquery, jquery-ui-slider

我在我的jsp页面中实现了一个滑块，代码是这样的，

```
$('#slider1').slider({
    range: "min",
    value: myvalue,
    min: 0,
    max: 57,
    slide: function(event, ui) {
    /*
        my backend function go here
    */
    }
}); 
```

我想添加一个“鼠标向上时间”，以便在用户单击滑块然后暂停几秒钟后，将触发滑动功能。我不希望在用户释放按钮后立即触发该功能。这可以确保用户暂停以查看功能发生。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:56:06.550

您可以使用 a[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)来引入延迟。[见 jsfiddle](http://jsfiddle.net/J77yT/33/)。

```
// ...
slide: function(event, ui) {
  setTimeout(function() { sliderMethod(event, ui); }, 2000); // delay trigger for 2s
}
//..
function sliderMethod(event, ui) {
  /*
    my backend function go here
  */
} 
```

# ruby - 如何使 Ruby 的 Array 差异（减）方法 `Array#-` 与我的类一起使用？

> ID：12199455
> 
> 赞同：4
> 
> 时间：2012-08-30T14:40:20.317
> 
> 标签：ruby

我认为解释这一点的最好方法是举个例子：

```
class A
    attr_accessor :test
    def initialize(x = nil)
        @test = x
    end

    def ==(other)
        return @test == other.test
    end
end

a1 = A.new(1) # => #<A:0x11b7118 @test=1>
a1.test # => 1

a2 = A.new(1) # => #<A:0x11fb0f8 @test=1>
a2.test # => 1

a1 == a2 # => true
[a1].include?(a2) # => true
[a1] - [a2] # => [#<A:0x11b7118 @test=1>] 
```

在这个例子中，我如何让 [a1] - [a2] 返回一个空数组，就像人们期望它为任何其他 Ruby 类一样？是否有一些我必须为我缺少的 A 定义的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T14:45:46.540

您需要覆盖`eql?`和`hash`。这些是用于那些*集合操作*的那些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T14:47:53.750

将这些方法添加到 A

```
def eql?(other)
  @test == other.test
end

def hash
  @test.hash
end 
```

# java - 为什么我在 Eclipse 和 Maven 中清理后可以运行我的程序？

> ID：12199457
> 
> 赞同：2
> 
> 时间：2012-08-30T14:40:27.720
> 
> 标签：java, eclipse, maven

我不明白为什么在`Eclipse`这两个步骤之后

1.  `Run as`->`Maven clean`
2.  `Project`->`clean...`

我仍然可以使用带有白色箭头的绿色图标运行我的程序吗？

`.class`我以为清理后没有文件。我期待像这样的异常`ClassNotFound`，但没有发生这样的事情。

你知道如何正确清理项目`Eclipse`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:45:53.160

eclipse 中的 clean 与 maven 中的 clean 不同。Maven 的 clean 确实删除了所有已编译的资源（类等）。eclipse中的clean project是一种`mvn clean compile`，即删除`*class`文件并重新编译所有`*.java`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:37:22.953

在您的应用程序的启动代码中，您可以添加：

```
System.out.println("Classpath=" + System.getProperty("java.class.path")); 
```

您可以对其进行分析（通常我使用notepaddpp通过类路径分隔符和排序对其进行拆分）-也许它指的是maven repo中也包含类的jar？有时类文件夹首先位于类路径中，因此即使在 jar 中存在相同的类，它们也位于 jar 之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:09:53.850

`Maven`我刚刚用我的一个项目检查了这个现象，`Eclipse`这就是我观察到的。顺便说一句，不要相信您在 中看到的内容`Package View`，请使用您的文件系统资源管理器。

Run as -> Maven clean：删除目标文件夹 Project -> clean...：创建`target`带有空子文件夹“ `classes`”和“ `test-classes`”的文件夹。在`Eclipse's` `Package Explorer`视图中，我看到一个空的目标文件夹。

在这一点上，我想说清理`Maven`项目的正确方法`Eclipse`是简单地运行为 ->`Maven`清理。

现在来解决您的程序在清理后运行的原因。一旦我在项目中运行了一个程序，就用 *.class 文件和资源`Eclipse`编译并填充了“ `target/classes`”和“ ”文件夹。`target/test-classes`在`Eclipse's` `Package Explorer`视图中，我仍然看到一个空的目标文件夹。

解决这个问题的诀窍是使用系统文件资源管理器查看项目目录和子目录，而不仅仅是使用`Eclipse's` `Package View`or `Project View`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:45:44.840

这可能是因为eclipse会在你运行它时自动构建你的项目

# sql - 在单独的列中查询两个最近的订单日期

> ID：12199458
> 
> 赞同：1
> 
> 时间：2012-08-30T14:40:29.700
> 
> 标签：sql, sql-server

我有一个类似于下面显示的示例的表。

```
AccountNo  DateOfOrder    OrderID   
-----------------------------------------   
 123       March 1 2010   1   
 222       March 3 2010   2   
 123       April 1 2010   3   
 345       March 15 2010  77   
 123       june 1 2010    55   
 123       march 5 2010   33   
 345       march 1 2010   99   
 222       june 1 2010    7   
 222       june 2 2010    22 
```

我需要一个输出三列的查询：

`AccountNo`, `MostRecentDateOfOrder`,`SecondMostRecentDateOfOrder`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:48:28.847

您没有指定 SQL Server 的哪个版本，但您可以`PIVOT`在 SQL Server 2005+ 中使用 CTE 和 a ：

```
;with cte as
(
  select accountno, dateoforder, orderid,
    row_number() over(partition by accountno 
                      order by dateoforder desc) rn
  from yourtable
)
select accountno,
  [1] MostRecentOrder,
  [2] SecondMostRecent
from 
(
  select accountno, dateoforder, rn
  from cte
) x
pivot 
(
  max(dateoforder)
  for rn in ([1], [2])
) p 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ec095/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:08:28.893

这就是我在 Oracle 中的做法：-

```
SELECT MAX(ACCOUNTNO), 
       MAX(DateOfOrder) AS SecondMostRecentDateOfOder,
       MIN(DateOfOrder) AS MostRecentDateOfOrder 
FROM (
SELECT ACCOUNTNO, DateOfOrder, RANK() OVER (order by ACCOUNTNO, DateOfOrderdesc) RANK
FROM TABLE
)
WHERE RANK < 3; 
```

# mysql - MySQL触发器将记录从表A插入表B

> ID：12199465
> 
> 赞同：0
> 
> 时间：2012-08-30T14:41:00.493
> 
> 标签：mysql, triggers

我无法让以下代码工作，使用此[页面](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)作为参考以及此站点上的其他帖子。我需要创建一个触发器，该触发器将在表 A 更新时在表 B 中插入一条记录。下面的代码显示了我正在尝试的内容；但是这会产生语法错误（#1064）。我也不清楚是否需要包含 'DELIMITER $$' 语法。我感谢您的帮助

```
DELIMITER $$
CREATE TRIGGER MyTrigger
AFTER INSERT
ON TableA
FOR EACH ROW 
BEGIN
    INSERT INTO TableB SET 
    TableA_id = NEW.TableB_id, 
    TableA_date = NEW.TableB_date,
    TableA_comment = NEW.TableB_comment;
  END;
END $$
DELIMITER ; 
```

**编辑**：在上面的伪代码中，我使用 $TableName_$FieldName 约定来指示 A 列属于表 A，B 列属于表 B。我应该在原始问题中更清楚地说明这一点。有人在下面评论说我在错误的一侧有 NEW 指示器（应该在表 A 上），但该评论似乎已被删除。有人可以确认吗？感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:45:20.473

试试这个：

```
DELIMITER $$
CREATE TRIGGER MyTrigger
AFTER INSERT
ON TableA
FOR EACH ROW 
BEGIN
    INSERT INTO TableB SET 
    TableB_id = NEW.TableA_id, 
    TableB_date = NEW.TableA_date,
    TableB_comment = NEW.TableA_comment;
END $$
DELIMITER ; 
```

这里`DELIMITER`用于告诉 mysql 将以下所有内容`;`视为定义的一部分，而不是实际的命令终止。

`END;`请注意，我在关闭之前删除了一个不匹配的`END $$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:47:33.433

`END;`您的触发器中有一个错误（每个都`END`应该与 a 配对`BEGIN`）。

就此而言，您甚至不需要该`BEGIN ... END`块，因为触发器仅包含一个语句（如果省略该块，您甚至不需要更改语句分隔符，因为语句中没有分号出现*）*`CREATE TRIGGER`：

```
CREATE TRIGGER MyTrigger AFTER INSERT ON TableA FOR EACH ROW 
  INSERT INTO TableB SET 
    TableA_id = NEW.TableB_id, 
    TableA_date = NEW.TableB_date,
    TableA_comment = NEW.TableB_comment 
```

# http - Tomcat应用程序Web.xml自定义过滤器给出资源错误已移动；过滤器将 https 重定向到 http

> ID：12199468
> 
> 赞同：0
> 
> 时间：2012-08-30T14:41:09.467
> 
> 标签：http, tomcat, https, servlet-filters, web.xml

仅供参考：我正在运行带有 IIS 7.5 和 Apache Tomcat 5.5 的 Windows Server 2008 R2。IIS 通过 AJP 连接器 1.3 版与 Tomcat 对话。Tomcat 启用了 SSL；因此，该网站同时启用了 HTTP 和 HTTPS 流量。我在 web.xml 文件中也有一个安全约束，可以通过 url 模式重定向以强制执行特定文件的 HTTPS 流量。

说了这么多，我创建了一个 servlet 过滤器，它应该将 https 重定向到 http。不幸的是，当我重新启动 tomcat 服务器并输入登录页面时，我收到以下错误：

> 您要查找的资源已被删除、名称已更改或暂时不可用。

我在 Eclipse 中创建了该类并将其导出为名为 RedirectToHTTP.jar 的 JAR 文件，并将该文件放在应用程序的 WEB-INF/lib 目录中，而不是放在 Tomcat 安装目录中。

我不知道问题出在哪里，如果有任何反馈，我将不胜感激。谢谢你。

**更新**

根据评论中的建议，我检查了日志文件，发现与我的过滤器相关的错误

> -- 异常启动过滤器redirectFilter
> 
> java.lang.UnsupportedClassVersionError：myfilterpkg/RedirectToHTTPFilter：不支持的major.minor 51.0版。

我用 JRE 1.7 编译了过滤器。我认为 Tomcat 可能使用的是较低版本的 JRE。这可能是问题吗？

以下是 web.xml 文件中的相关数据：

```
<filter>
    <filter-name>UTF8Encoder</filter-name>
     <filter-class>com.remedy.arsys.support.UTF8EncodingFilter</filter-class>
     <init-param>
         <param-name>Param1</param-name>
         <param-value>0</param-value>
     </init-param>
</filter>

<filter>
    <filter-name>redirectFilter</filter-name>
    <filter-class>myfilterpkg.RedirectToHTTPFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>UTF8Encoder</filter-name>
    <servlet-name>*.jsp</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>redirectFilter</filter-name>
    <url-pattern>/index.jsp</url-pattern>
</filter-mapping> 
```

这是Java类：

```
package myfilterpkg;

import java.io.IOException;  

import javax.servlet.Filter;  
import javax.servlet.FilterChain;  
import javax.servlet.FilterConfig;  
import javax.servlet.ServletException;  
import javax.servlet.ServletRequest;  
import javax.servlet.ServletResponse;  
import javax.servlet.http.HttpServletRequest;  
import javax.servlet.http.HttpServletResponse;  
import javax.servlet.http.HttpSession; 

@SuppressWarnings("unused")
public class RedirectToHTTPFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        if ((request instanceof HttpServletRequest) && (response instanceof HttpServletResponse)) {
            String redirectTarget = ((HttpServletRequest)request).getRequestURL().toString().replaceFirst("https", "http");

            if(request.isSecure()) {
                ((HttpServletResponse)response).sendRedirect(redirectTarget);
            }
            else {
                chain.doFilter(request, response);
            }
        }
    }

    @Override
    public void destroy() {
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:07:36.740

过滤器必须使用tomcat服务器实际运行的运行时的源代码级别编译。否则在类加载时会出现上述错误。

# css - 密码在 IE 中显示为白色（或根本不显示）

> ID：12199471
> 
> 赞同：8
> 
> 时间：2012-08-30T14:41:13.240
> 
> 标签：css, internet-explorer-8, twitter-bootstrap

出于某种原因，对于我正在处理的网站，密码字段在 IE8 中显示为空白（或白色）字符。

这两个屏幕截图都输入了长密码。第二个我突出显示了它，因此您可以看到它识别字符，它们只是显示为空。我还包括了 IE 调试跟踪。

全尺寸 - [http://i.stack.imgur.com/hUd4I.png](https://i.stack.imgur.com/hUd4I.png)

![未突出显示](../Images/7bf8947610fcbd8e71b93f41b5a1a0a1.png)

全尺寸 - [http://i.stack.imgur.com/tOkn9.png](https://i.stack.imgur.com/tOkn9.png)

![密码突出显示](../Images/9a04544e4027d6c14aca8d81234a9501.png)

在其他浏览器中，它们显示得很好。我以前从未见过这样的事情，有什么想法吗？

HTML 标头：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

仅用于输入的自定义 CSS：

```
body, input, button, select, textarea {
    font-family: 'Open Sans' , sans-serif;
    font-size: 13px;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T13:16:14.927

我遇到过同样的问题。我通过在我的 CSS 中添加一个 hack 以覆盖从 Open Sans 到 Arial 的输入字体来修复它：

```
.form-horizontal input {
    *background-color: #ffffff !important;
    *color: #464646 !important;
    *font-family: Arial !important;
} 
```

它必须是谷歌字体和 IE 的字符问题，字体中缺少密码点或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:59:07.777

这就是我解决它的方法

```
<?php echo Form::password('password', NULL, array('title'=>'', 'class' => 'input-block-level', 'tabindex' => '2', 'placeholder'=>'Password', 'title' => 'Password', 'style' => 'font-family:arial, serif;')) ?><!-- the font family arial serif is a fix for IE8 password placeholder text --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:12:57.220

我有一个类似的问题 - 我所有`input[type='text']`元素上的文字都是白色的。将鼠标光标移出模式`div`会导致文本出现。我怀疑来自 Twitter Bootstrap`filter`的`transition`CSS 规则会导致问题 - 就是这样。我从我的模态窗口中删除了`hide`和类：现在它工作正常。如果您的模态是动画的，请尝试一下。`fade``<div class="modal hide fade" />`

# machine-learning - 逻辑回归大边缘分类器是什么？

> ID：12199472
> 
> 赞同：8
> 
> 时间：2012-08-30T14:41:19.583
> 
> 标签：machine-learning, svm, mathematical-optimization, linear-regression

据我了解 SVM 中的大余量效应：

例如，让我们看一下这张图片：

![支持向量机](../Images/ffc55d997db2c7ae66bef7cd9aadebd5.png)

在通过正则化项的 SVM 优化目标中，我们试图找到一组参数，其中（参数向量）theta 的范数很小。因此，我们必须找到较小的向量 theta，并且正样本 (p) 在该向量上的投影较大（以补偿较小的 Theta 向量的内积）。同时大 p 给了我们**很大的利润**。在这张图片中，我们找到了理想的 theta，以及带有它的大 p（和大边距）：

![支持向量机2](../Images/e1f475810b8b2668c619885cf47b3ad4.png)

# 我的问题：

为什么逻辑回归不是大边缘分类器？在 LR 中，我们以相同的方式最小化正则化项中的 Theta 向量。也许我不明白一些事情，如果是这样的话 - 纠正我。

我使用了 Coursera ml 课程中的图像和理论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:26:40.547

逻辑回归是一个很大的边际损失。Lecun 在他的一篇或多篇关于基于能量的学习的论文中提到了这一点。

要看到 LR 确实产生了边距，更容易查看 softmax 损失（相当于 LR）。

softmax损失中有两个术语：`L(z)=z_{true} - log(\sum_i \exp(z_i))`

这意味着示例与其真实决策边界的距离需要超过与所有决策边界距离的对数和。

因为softmax函数是一个概率分布，log softmax最大可以为0，所以log softmax在softmax函数下真实类的概率接近1时返回一个接近0的负值（即惩罚）。

# javascript - 在 JavaScript 中定义自定义对象和函数（第 2 部分）

> ID：12199473
> 
> 赞同：1
> 
> 时间：2012-08-30T14:41:20.493
> 
> 标签：javascript, ecmascript-5, jscript

根据我在此之前提出的问题，我将如何限定这个字符串......

```
"MyCustomObject.prototype.foo.bar" 
```

对此：

```
window['MyCustomObject']['prototype']['foo']['bar'] 
```

以对象形式？（它必须没有资格...

```
"window['MyCustomObject']['prototype']['foo']['bar']" 
```

...作为字符串！）。

作为参考，请考虑以下...（代码错误...需要修复（没有 eval 关键字））

```
var fn = "MyCustomObject.prototype.foo.bar";
var ptr = fn.split('.');
var ptrPath = 'window'
for(var index = 0; index < ptr.length; index++) {
    ptrPath += '[\'' + ptr[index] + '\']';
}
ptrPath = function() {
    alert("Hello");
} 
```

应该解决这个问题；

```
var inst = new MyObject();
inst.foo.bar();  //alerts...."Hello" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:03:08.223

经过一番努力，我终于找到了解决方案。

Object.implement 函数背后的想法是允许开发人员：

1.  按名称定义对象/函数（例如“Custom”或“Custom.prototype.foo.bar”），无论该对象是否存在。

2.  定义对象/函数上下文（EG 窗口）

3.  定义对象/函数实现

4.  如果实现已经存在，定义是否覆盖对象/函数。

考虑 Object.implement 代码示例：

```
Object.implement = function(fn, context, implementation, override) {
    var properties = fn.split('.');
    var fnName = properties.pop();
    for(var index = 0; index < properties.length; index++) {
        if(!context[properties[index]]) {
            context[properties[index]] = { };
        }
        context = context[properties[index]];
    }
    if(!context[fnName] || override) {
        context[fnName] = implementation;
    }
}; 
```

我现在可以使用它来安全地创建/实现对象和函数。考虑一下这有点像“垫片”功能，如果一个功能不存在，则可以提供一个实现，但是通过添加的功能，现有功能也可以被覆盖：

```
Object.implement("HashTable", window, function() { }, true);
Object.implement("HashTable.prototype.bar", window, function() { alert("Hello World") }, true);

var ht = new HashTable();
ht.bar(); 
```

它可以在 FireFox 中运行...我还没有在其他浏览器中进行测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:51:23.570

我修改了[这个问题](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)的答案以满足您的需求。

```
var getPropertyByName = function (fullString, context) {
        var namespaces = fullString.split(".");
        var functionName = namespaces.pop();

        for (var i = 0; i < namespaces.length; i++) {
            context = context[namespaces[i]];
        }

        return context[functionName];
};

getPropertyByName('MyCustomObject.foo.bar', window); 
```

[http://jsfiddle.net/jbabey/4GVUK/](http://jsfiddle.net/jbabey/4GVUK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:57:55.390

你可以这样尝试：

```
var fn = "foo.prototype.bar";
var ptr = fn.split('.');
var func = ptr.reduce(function(a, b){
    return a[b] ? a[b] : a;
}, window); 
```

***[工作演示。](http://jsfiddle.net/vDYMM/)***

# android - 模拟器中的 Android 平板电脑没有选择正确的布局

> ID：12199479
> 
> 赞同：5
> 
> 时间：2012-08-30T14:41:40.760
> 
> 标签：android, android-layout, android-emulator

我是 Android 新手，正在尝试学习如何使用多个布局文件夹为不同尺寸的设备指定不同的布局。

我尝试了一些不同的方法，但似乎没有什么能让我的模拟平板电脑使用更大的布局。

我的布局目录结构是：

*   布局
*   布局-大
*   布局-sw600dp
*   布局-xlarge

“布局”中的 main.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
        >
    <SearchView android:id="@+id/searchView"
                android:iconifiedByDefault="false"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

    <FrameLayout
            android:id="@+id/EarthquakeFragmentContainer"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            />
</LinearLayout> 
```

其他三个文件夹中的main.xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="horizontal">

    <SearchView android:id="@+id/searchView"
                android:iconifiedByDefault="false"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#FFF"/>

    <fragment android:name="com.paad.earthquake.EarthquakeListFragment"
              android:id="@+id/EarthquakeListFragment"
              android:layout_width="360dp"
              android:layout_height="fill_parent"
            />

    <fragment android:name="com.paad.earthquake.EarthquakeMapFragment"
              android:id="@+id/EarthquakeMapFragment"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
            />

</LinearLayout> 
```

模拟器设置正在尝试模拟 Google Nexus 7：

*   目标：Google API（API 级别 16）
*   皮肤：WXGA800-7in
*   SD卡：16M
*   我正在使用皮肤附带的所有其他选项，以及 hw.keyboard=yes 和 hw.ramSize=512

有谁知道为什么这不起作用？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T10:55:14.120

如果您使用的是 10" 平板电脑和 android 3.2 或更高版本，您应该有 layout-sw720dp 文件夹来保存您的布局文件

# grails - Grails Select中的OptionValue与域对象列表

> ID：12199486
> 
> 赞同：1
> 
> 时间：2012-08-30T14:41:58.750
> 
> 标签：grails

我已经对如何显示带有可选值的下拉列表进行了一些研究。目前，我在下拉列表中有一个域对象（人）列表。它们显示为“名字姓氏”。

我想更改名称在选择中的显示方式。查看 g:select API，我发现我可以使用 optionValue 和 optionKey。我试过了，但无处可去。所以这是我当前的代码：

```
<g:select id="allPeople" name="allPeople" from="${dropdown}" /> 
```

我希望输出为“Last, First”。我试过这个：

```
<g:select id="allPeople" optionValue="${it?.last},${it?.first}" from="${dropdown}" name="allPeople" value="" > 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:57:50.727

一个不错的方法是在您的域上添加一个临时 getter，然后将其用于 optionValue。

```
class Person {
    String first
    String last

    static transients = ['lastFirst']

    String getLastFirst() {
        "$last, $first"
    }
} 
```

然后

```
<g:select name="allPeople" optionValue="${it.lastFirst}" from="${dropdown}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:52:19.970

试试这样：

```
optionValue="${{it?.last+', '+it.first}}" 
```

这意味着你传递了一个构建你需要的东西的闭包。

# java - 从字节数组转换为 short 会产生错误的负值

> ID：12199487
> 
> 赞同：0
> 
> 时间：2012-08-30T14:42:01.050
> 
> 标签：java, endianness

自从我在位/字节级别进行操作以来已经有一段时间了，所以如果这很简单，请原谅我。

我正在通过 Java 应用程序中的 TCP 套接字从嵌入式设备接收数据。数据是小端（最低有效字节优先），我目前正在尝试`short`从数据数组中获取值。为此，我使用以下代码：

```
byte[] valBytes = {data[0], data[1]};
short val = EndianArrayUtils.getShortFromLittleEndianRange(valBytes); 
```

这适用于正数，但是当`short`应该为 -1 时，我得到的是 -2。产生 -2 的数据是：

```
byte[] valBytes = {(byte)0xff, (byte)0xff};
short val = EndianArrayUtils.getShortFromLittleEndianRange(valBytes); 
```

我错过了什么吗？二进制补码中的 -1 应该是`11111111 11111111`正确的吗？

**编辑**

我完全忘记了我是真正写的人`EndianArrayUtils`。该`getShortFromLittleEndianRange`方法的代码是

```
public static short getShortFromLittleEndianRange(byte[] range){
        return (short)((short)(range[1] >> 8) + (short)(range[0]));
    } 
```

显然，它在负数上的运作方式有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:08:27.033

我会使用 ByteBuffer

```
byte[] valBytes = {(byte)0xff, (byte)0xff};
short s = ByteBuffer.wrap(valBytes).order(ByteOrder.LITTLE_ENDIAN).getShort();
System.out.println(s); 
```

印刷

```
-1 
```

如果您读入 ByteBuffer，则根本不需要`byte[]`。

修复你的例子

```
public static short getShortFromLittleEndianRange(byte[] range){
    return (short)((range[1] << 8) + (range[0] & 0xff));
} 
```

# css - 如何编辑 VIM Omni Completion 以使所有 CSS 属性不以冒号结尾？

> ID：12199492
> 
> 赞同：2
> 
> 时间：2012-08-30T14:42:11.993
> 
> 标签：css, plugins, vim, omnicomplete

我一直在探索在 VIM 中自动将结束字符附加到一行代码的方法。就我而言，它是 CSS。我遇到了这个提示[http://vim.wikia.com/wiki/Automatically_append_closing_characters](http://vim.wikia.com/wiki/Automatically_append_closing_characters)并调整了它告诉我添加到我的`.vimrc`喜欢的代码

```
inoremap {      {}<Left>
inoremap {<CR>  {<CR>}<Esc>O
inoremap {{     {
inoremap {}     {} 
```

所以当我写

```
body 
```

然后快速按 { 和 ENTER 结果是什么

```
body {

} 
```

请注意，光标将缩进并位于第 2 行，因此我将准备在该块中编写代码。

另外我应该提到我还在我的`.vimrc`

```
inoremap ::     :;<Left> 
```

这样当我快速连续键入 : 和 : 时，我会得到`:;`位于和之间的`:`光标`;`。这正是我想成为的地方，因此我可以立即开始编写代码。

我做得很好，但我很快意识到我安装的自动完成插件（AutoComplPop VIM 插件[http://www.vim.org/scripts/script.php?script_id=1879](http://www.vim.org/scripts/script.php?script_id=1879)）与上述`.vimrc`调整冲突。

例如，如果我开始写作，`color`我会得到所有选项的下拉自动完成下拉菜单。问题是选项`color`实际上是`color:`.

![在此处输入图像描述](../Images/a446896b17d51c699720bd1c02f65a45.png)

您会看到它已经添加了一个冒号，所以当我选择它时，冒号已经存在，然后我必须手动添加结束`;`字符。这基本上破坏了将自动附加结束字符代码添加到 my 的整个目的，`.vimrc`因为在这种情况下，它不会自动附加结束分号。

**那么如何对 VIM 的 Omni Completion 进行自定义编辑，以便所有 CSS 属性不以冒号结尾？**

VIM 的 CSS 自动完成选项，在这里遇到了 AutoComplPop [http://www.vim.org/scripts/script.php?script_id=1879](http://www.vim.org/scripts/script.php?script_id=1879)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:43:44.647

假设你在一个类 UNIX 系统上……</p>

1.  复制

    ```
    /usr/share/vim/vim7x/autoload/csscomplete.vim 
    ```

    到

    ```
    ~/.vim/autoload/csscomplete.vim 
    ```

2.  找到生成属性列表的循环，对我来说它位于第 92 行。

3.  从两个的第二个参数中删除冒号`add()`。

    这些行：

    ```
    call add(res, m . ':')
    call add(res2, m . ':') 
    ```

    变得：

    ```
    call add(res, m)
    call add(res2, m) 
    ```

4.  保存文件。

* * *

还有许多用于“自动关闭”字符对的[插件。](http://www.vim.org/scripts/script_search_results.php?keywords=auto%20closing&script_type=&order_by=rating&direction=descending&search=search)我使用[DelimitMate](http://www.vim.org/scripts/script.php?script_id=2754)。

这个问题根本与 ACP 无关。

# php - 制作 html 文件的克隆

> ID：12199493
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:42:12.367
> 
> 标签：php, batch-file

如果我有一个名为 file.html 的文件，我如何通过 PHP 对该文件进行 10 个克隆，以便将它们重命名为 file1....file10？

此代码生成文件，但是当它们应该是 mypage.html 的副本（小于 1kb）时它们都是空白的

```
<?php

$text = file_get_contents('mypage.html');
for($i = 0; $i < 100; $i++) {
    file_put_contents('file'.$i.'.html', $data);
}

?> 
```

如果我有一个名为 file.html 的文件，我如何通过 PHP 对该文件进行 10 个克隆，以便将它们重命名为 file1....file10？

此代码生成文件，但是当它们应该是 mypage.html 的副本（小于 1kb）时它们都是空白的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:43:40.577

你的意思是`$text`，对`10`不对`100`？还要确保您有权将这些文件写入您想要的位置。

```
$text = file_get_contents('mypage.html');
for($i = 1; $i <= 10; $i++) {
    file_put_contents('file'.$i.'.html', $text);
} 
```

最好指定一个`dump`文件夹

```
$text = file_get_contents('mypage.html');
for($i = 1; $i <= 10; $i++) {
    file_put_contents('cloned/file'.$i.'.html', $text);
} 
```

在`cloned`文件夹中，您的`PHP`脚本必须具有写入权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T14:44:10.603

看看你的变量名：

> ***$text*** = file_get_contents('mypage.html');
> 
> for($i = 0; $i < 100; $i++) {
> 
> file_put_contents('file'.$i.'.html', ***$data*** );
> 
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:46:30.493

为什么不使用php复制功能？ [php复制手册](http://php.net/manual/en/function.copy.php)

```
 <?php
$file = 'example.txt';
$newfile = 'example.txt.bak';

if (!copy($file, $newfile)) {
    echo "failed to copy $file...\n";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:47:35.200

如何只`copy()`在循环中使用该函数而不用担心文件的内容？

```
$filename = 'mypage.html';
for ($i=1; $i < 11; $i++) {
    copy($filename, 'file'.$i.'html');
} 
```

注意在循环中使用`$i=1`and`$i<11`会给出 1-10 而不是 0-9 的值。

# ruby - Jquery In rails 不会加载砌体

> ID：12199501
> 
> 赞同：0
> 
> 时间：2012-08-30T14:42:23.157
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

我怎样才能用rails加载jquery。我尝试过以下方法

```
<script src="jquery-1.7.1.min.js"></script>
<script src="jquery.masonry.min.js"></script>
<script>
    $(function () {
        var $container = $('#container');
        $container.imagesLoaded(function () {
            $container.masonry({
                itemSelector: '.item'
            });
        });
    });
</script> 
```

但我收到一个错误。这包含在我的 html 代码中。不在标题中。现在我意识到点击它时我得到了错误路线没有设置。我怎样才能以正确的方式加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:51:28.477

请参阅 application.js。

默认情况下，jquery 是从 rails 3 开始的 rails 的一部分。您不需要单独包含它。

# android - 如何从android中的构建路径中排除lib文件而不从项目中删除

> ID：12199504
> 
> 赞同：1
> 
> 时间：2012-08-30T14:42:27.810
> 
> 标签：android, eclipse, build, compilation, apk

在我的 android_Project/libs/armeabi 文件夹中，我有一些 *.so 文件，这些文件在每次构建时都包含在 apk 中。由于大小限制，我不想在我的 apk 中包含这些文件（我已经注释掉了它们的功能），但我不能从项目中删除这些文件，因为它在 SVN 上。无论如何我可以在不创建差异 svn 分支或差异本地副本的情况下从我的 apk 中排除这些文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:36:02.033

libs 文件夹中的库会自动包含在 apk 中。尝试将它们从 libs 文件夹移到项目目录中的单独文件夹中。

如果您想将它们添加回来，您可以将它们移回 libs 文件夹或在构建路径中指定它们的位置。

# ios - 在移动 safari 中查看本地 html/js 内容

> ID：12199518
> 
> 赞同：0
> 
> 时间：2012-08-30T14:43:24.793
> 
> 标签：ios, mobile-safari

我需要使用移动 Safari 查看一些本地（保存在 iPad 中的某处）html / js 内容。通过阅读一些线程，似乎 file:// 协议被禁用。对？

如果是这样，我看到的解决方案是安装一个应用程序，将 iPad 变成一个 http 服务器（不需要支持 php 或其他任何东西），在那里加载我的内容并通过移动 safari`http://localhost/...`或`http://127.0.0.1/...`使用移动 safari 在同一设备内以某种方式访问​​它们。这真的可能吗？有人可以向我推荐一个可能不需要越狱或其他黑客攻击的好网络服务器应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:02:46.500

您可能无法做您想做的事情，因为为了让您的应用程序向 Mobile Safari 提供 HTTP 请求，它必须在后台运行，并且没有允许的后台模式涵盖这一点。

如果您只需要在运行应用程序后立即进行一次性响应，那么您可以使用[`beginBackgroundTaskWithExpirationHandler:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler%3a)，尽管这可能没有得到 Apple 的批准 - 很难预测他们对此的响应。

如果您确定不需要它来进入 App Store，那么您可以通过滥用其他一种后台模式（例如伪装成 VOIP 应用程序或媒体播放器）让您的应用程序永久在后台运行。

在后台运行后，您可以使用[CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer)来实际提供文件。

如果您描述了您要实现的目标，那么有人可能会建议使用本地文件/Mobile Safari 的替代方法。

# powershell - System.Net.WebRequest 不提供我的证书

> ID：12199531
> 
> 赞同：2
> 
> 时间：2012-08-30T14:44:12.460
> 
> 标签：powershell, ssl, service, web, certificate

下面是我为向我们拥有的内部 Web 服务发出 SOAP 请求而编写的代码片段。如果我使用 Fiddler 运行此程序，运行 Fiddler 会提醒该站点正在请求证书。如果我向 Fiddler 提供证书，它会完美运行。如果我关闭 Fiddler，则会收到连接已关闭的错误消息。我正在撞墙，因为我将证书添加到 ClientCertificates 集合中，当我调试它时，我可以看到它有它。任何想法为什么它不在运行时呈现它？（你会看到我在哪里测试过从本地机器存储中获取它并从文件中创建它，并且这两个选项都不起作用）

```
 $cert = [System.Security.Cryptography.X509Certificates.X509Certificate2]::CreateFromCertFile($certPath)
            #$cert = get-item cert:\LocalMachine\* | get-ChildItem | Where-Object -FilterScript {($_.FriendlyName -eq "HRSYS")}
            $soapWebRequest = [System.Net.WebRequest]::Create($url)
            $soapWebRequest.ClientCertificates.Add($cert)
            $soapWebRequest.Headers.Add("SOAPAction", "http://service.wellsfargo.com/provider/hr/entity/teamMemberData/getTeamMemberProfileById/2010/12/") 
            $soapWebRequest.ContentType = "text/xml;charset=`"utf-8`"" 
            $soapWebRequest.Accept = "text/xml" 
            $soapWebRequest.Method = "POST" 
            $soapWebRequest.Timeout = 60000
            $soapWebRequest.UseDefaultCredentials = $true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:24:49.627

我找到了我的答案。我必须授予私钥权限。为了测试，我作弊了，只是为大家添加了它。

C:\Program Files (x86)\Windows Resource Kits\Tools>winhttpcertcfg.exe -g -c "LOCAL_MACHINE\my" -s HRSYS -a 大家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:00:30.860

看起来`X509Certificate2.CreateFromCertFile`设计为仅加载*证书*，而不是带有*私钥*的证书，这是您使用客户端证书所需要的。

`X509Certificate2`是一个模拟 X.509 证书的类，但也能够将私钥与其关联（私钥不是证书的一部分，尽管使用证书进行身份验证是必要的）。

使用[`X509Certificate2(String, SecureString)`](http://msdn.microsoft.com/en-us/library/ms148419)构造函数将是从带有密码的 PKCS#12 文件加载证书的更好方法。

请注意，使用 Fiddler 作为 MITM SSL/TLS 代理无论如何都会使客户端证书身份验证失败，即使您的客户端成功发送客户端证书也是如此。这是因为 Fiddler 将提供一个不是服务器发送的真正证书的服务器证书，从而产生不同的握手。由于客户端证书身份验证依赖于客户端签署整个握手的摘要，以便服务器可以将其与自己的握手帐户进行比较，并且由于客户端和服务器看到的握手在 MITM 代理时会有所不同使用，客户端证书身份验证将失败。

# generics - GDI 通用 OpenGL 驱动程序 - glBindTexture() - GL_INVALID_ENUM 错误

> ID：12199532
> 
> 赞同：0
> 
> 时间：2012-08-30T14:44:16.093
> 
> 标签：generics, opengl, textures, gdi

我的代码完全在显卡 OpenGL 下工作。

但是，当我使用 GDI 通用 OpenGL 驱动程序切换到 OpenGL 仿真时，我得到了非常奇怪的错误：

GL ERROR - 函数 glBindTexture(GL_TEXTURE_2D,1) 生成错误 GL_INVALID_ENUM

glBindTexture() 的文档说只有在目标枚举错误的情况下才能返回 GL_INVALID_ENUM。然而 GL_TEXTURE_2D 是正确的枚举 - 适用于显卡 OpenGL 驱动程序。

我确信：1）glBindTexture 正在生成该错误 - 使用带有错误日志记录的 GLIntercept 跟踪器 2）分配了纹理，大小为 512 x 4 3）为纹理分配了数据：glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, m_textureImage .width(), m_textureImage.height(), 0, GL_BGRA, GL_UNSIGNED_BYTE, m_textureImage.bits()); 4) 为纹理分配数据和实际使用纹理之间的 OpenGL 上下文不会改变 - 你的纹理在两者之间是未绑定的

是否还有其他未记录的原因可以返回此类错误？任何想法如何找到问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:51:33.070

`glBindTexture(GL_TEXTURE_2D, 1)`: 分配一个固定的纹理 ID: 是不寻常的`(1)`，而不是从`glGenTextures`. 也就是说，不应返回无效值`GL_INVALID_ENUM`。

`GL_TEXTURE_2D`在通过 分配纹理数据之前，您是否将纹理“名称”（ID）绑定为 a `glTexImage2D`？您的 GL 驱动程序是否支持非 2 次幂 ( **NPOT** ) 纹理？

最后，您是否在 GL 状态下启用纹理：`glEnable(GL_TEXTURE_2D)`？尽管我不相信这会产生您提到的错误代码。

我真的不知道。你可能已经完成了我提到的所有事情！我只是想考虑可能的疏忽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:16:55.613

这已被确定为 GlIntercept 图像记录器的问题。记录器正在使用一些在 OpenGL 1.1 中不可用的 OpenGL 1.2 枚举。

该问题正在为 GLIntercept 修复。对于 GDI 通用 OpenGL 渲染器，使用不带图像记录的 GLIntercept 应该是安全的。

# ios - 核心图中的限制泛

> ID：12199533
> 
> 赞同：3
> 
> 时间：2012-08-30T14:44:25.433
> 
> 标签：ios, core-plot

我使用 CorePlot 1.0 来显示散点图。我正确配置它以显示整个图形，并且我用 锁定了轴`CPTConstraints`，因此它们固定在屏幕上。我现在想做的是“锁定”图表上的平移手势，这样用户就不能垂直平移超过我的轴的最大值。

例如，我的轴从 0 到 100。当图表加载时，您无法垂直平移，因为您已经看到了整个图表。例如，如果您放大，直到您看到 20 到 70 之间的垂直轴。我现在希望用户能够向上平移直到他看到 100 刻度，然后他不能再进一步（向下相同，直到他看到 0 勾号）。

有没有类似的可能？非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:58:46.023

最简单的方法是在绘图空间上使用“全局”范围。如果您需要更多控制，可以使用绘图空间委托。

```
CPTPlotRange *globalYRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f)
                                                          length:CPTDecimalFromFloat(100.0f)];
plotSpace.globalYRange = globalYRange; 
```

# windows - 尝试在 MinGW/MSYS 上编译 HDF5

> ID：12199539
> 
> 赞同：0
> 
> 时间：2012-08-30T14:45:01.637
> 
> 标签：windows, build, mingw, patch, hdf5

我正在尝试修补 HDF5 1.8.9，以便使用我从[http://www.digipedia.pl/usenet/thread/15809/3624/找到的补丁在 MinGW 上编译它](http://www.digipedia.pl/usenet/thread/15809/3624/)

我尝试使用 msys-patch

```
patch <patchfile.patch 
```

下面一个给了我

```
(Stripping trailing CRs from patch.)
patching file configure.in
patch: **** malformed patch at line 4: dnl rebuild rules. 
```

* * *

```
**** Patch for configure.in
*******************************************
--- /tmp/hdf5-1.8.9/configure.in.old    2012-05-09 10:07:27.000000000 -0500
+++ /tmp/hdf5-1.8.9/configure.in    2012-07-18 16:51:35.000000000 -0500
@@ -49,6 +49,16 @@
dnl rebuild rules.
AM_MAINTAINER_MODE

+AC_ARG_WITH(mingw, [--with-mingw    enable compilation with gnu gcc under
mingw])
+AM_CONDITIONAL([WITH_MINGW], [test "$with_mingw" = "yes"])
+if test "$with_mingw" = "yes"; then
+  AC_DEFINE([HAVE_WINDOWS],[1],[Define if the Windows virtual file driver
should be compiled])
+  AC_DEFINE([HAVE_MINGW],[1],[Define if on mingw])
+  AC_DEFINE([HAVE_WIN32_API],[1],[Define if on the Windows platform])
+dnl We also need to add a -lwsock32 to avert _WSAStartup@8 errors
+  LIBS="$LIBS -lwsock32"
+fi
+
dnl Run post processing on files created by configure.
dnl src/H5pubconf.h:
dnl Generate src/H5pubconf.h from src/H5config.h by prepending H5_ to all 
```

而另一个

```
(Stripping trailing CRs from patch.)
patching file Makefile.am
patch: **** malformed patch at line 7: H5Zdeflate.c H5Zfletcher32.c H5Znbit.c H5
Zshuffle.c H5Zszip.c  \ 
```

* * *

```
**** Patch for src/Makefile.am
*******************************************
--- /tmp/hdf5-1.8.9/src/Makefile.am.old    2012-05-09 10:05:58.000000000
-0500
+++ /tmp/hdf5-1.8.9/src/Makefile.am    2012-07-18 16:54:27.000000000 -0500
@@ -103,6 +103,9 @@
H5Zdeflate.c H5Zfletcher32.c H5Znbit.c H5Zshuffle.c H5Zszip.c  \
H5Zscaleoffset.c H5Ztrans.c

+if WITH_MINGW
+ libhdf5_la_SOURCES+=H5FDwindows.c
+endif

# Public headers
include_HEADERS = hdf5.h H5api_adpt.h H5overflow.h H5pubconf.h H5public.h
H5version.h \
@@ -115,6 +118,10 @@
H5MMpublic.h H5Opublic.h H5Ppublic.h H5Rpublic.h H5Spublic.h \
H5Tpublic.h H5Zpublic.h

+if WITH_MINGW
+ libhdf5_la_SOURCES+=H5FDwindows.h
+endif
+
# install libhdf5.settings in lib directory
settingsdir=$(libdir)
settings_DATA=libhdf5.settings 
```

如果有人能告诉我如何正确或以其他方式修补此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:51:51.787

我不是补丁专家，所以我不能告诉你补丁中的错误在哪里，但我可以给你另一个解决方案：既然补丁这么小，你为什么不直接更新上述文件呢？

Just locate where the additions should go using the line numbers (between `@@`) and the few lines of context (lines without leading `+` or `-`) and add at the right locations the additional lines (those starting with a `+`, and of course don't forget to remove the leading `+` signs when you do).

# android - 如何获得警报以触发通知

> ID：12199543
> 
> 赞同：2
> 
> 时间：2012-08-30T14:45:17.400
> 
> 标签：android, android-notifications, android-alarms

我需要设置一个重复警报，一旦触发，就会发出通知。

脚步：

1.  我有一个包含一些日期细节的界面（只是想了一下，也许我应该启动一个显示“设置警报”功能的意图）。详细信息的产品是需要输入警报方法的日期时间字符串。
2.  设置警报时，我需要创建对它的引用，以便用户可以将其删除。（或者可能不是，最佳实践是什么？也许用户只能从“警报”部分删除警报）
3.  当警报响起时，将创建通知。

我不确定警报系统是如何工作的。警报可能应该是静音的，可能带有振动。这是直接设置吗？

我需要服务还是广播接收器可以完成这项工作？

基本上我只需要一些指示。我是否正确地考虑了这一点？那里有教程（我还没有找到任何东西）。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T16:17:25.687

这是我如何在我的应用程序中使用 AlarmService 的演练。

1.  设置一个 AlarmManager 在 x 分钟内触发。

2.  响应警报，启动服务。

3.  创建您的通知并让您的服务使用新的警报自行设置，以便在另外 x 分钟内再次触发。

4.  该服务自行关闭。

1.

```
 Intent alarmIntent = new Intent(this, MyAlarm.class);
    long scTime = 60* 10000;// 10 minutes
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, alarmIntent, 0);
    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + scTime, pendingIntent); 
```

2.

```
 public class MyAlarm extends BroadcastReceiver
    {

       @Override
       public void onReceive(Context context, Intent intent) {
          Log.d("Alarm Recieved!", "YAAAY");
          Intent i = new Intent(context, InviteService.class);
          context.startService(i);
       }
    } 
```

3.

```
 public class InviteService extends IntentService
 {

  /** 
   * A constructor is required, and must call the super IntentService(String)
   * constructor with a name for the worker thread.
   */

  public InviteService() {
      super("InviteService");
  }

  /**
   * The IntentService calls this method from the default worker thread with
   * the intent that started the service. When this method returns, IntentService
   * stops the service, as appropriate.
   */

  @Override
  protected void onHandleIntent(Intent intent) {

                  String ns = Context.NOTIFICATION_SERVICE;
                  NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

                  int icon = R.drawable.logo;
                  CharSequence tickerText = "New Invite!";
                  long when = System.currentTimeMillis();

                  Notification notification = new Notification(icon, tickerText, when);
                  notification.flags |= Notification.FLAG_AUTO_CANCEL;
                  notification.defaults |= Notification.DEFAULT_VIBRATE;

                  Context context = getApplicationContext();
                  CharSequence contentTitle = "Title";
                  CharSequence contentText = "Text";
                  Intent notificationIntent = new Intent(this, Destination.class);
                  Bundle partyBundle = new Bundle();                    

                  PendingIntent contentIntent = PendingIntent.getActivity(this, SOME_ID, notificationIntent, 0);

                  notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

                  int NOTIFICATION_ID = SOME_ID;

                  Log.d("NOTIFICATION_ID", "" + NOTIFICATION_ID);
                  mNotificationManager.notify(NOTIFICATION_ID, notification); 
```

4.（同班）

```
 Intent alarmIntent = new Intent(this, MyAlarm.class);
      long scTime = 60*1000;//mins
      PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, alarmIntent, 0);
      AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
      alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + scTime, pendingIntent);

      stopService(intent);
      }
    } 
```

希望这可以帮助！

**编辑**

为什么要使用服务？

在 BroadcastReceiver 中做太多处理是不明智的。虽然您可以在 BroadcastReciever 中进行一些处理，但在 Service 中执行此操作更安全，您可以在 StackOverflow 这个问题[BroadcastReceiver vs Service中找到一些信息](https://stackoverflow.com/questions/7460284/broadcastreceiver-vs-service)

# hashmap - 在 SML/NJ 中使用 ORD_MAP 作为哈希表

> ID：12199545
> 
> 赞同：1
> 
> 时间：2012-08-30T14:45:22.197
> 
> 标签：hashmap, structure, signature, smlnj

我正在尝试在 ML 中实现类似于哈希表的东西，但我想使用列表作为键。我想我可以使用 ORD_MAP 结构，但我想为 ORD_KEY 签名提供我自己的结构，这样我就可以使用列表作为 ord_keys，但我找不到办法。怎么可能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T22:29:46.973

ORD_MAP 和 ORD_KEY 是签名。如果您希望能够使用地图，则需要特定的实现。例如：

```
structure Key =
  struct
    type ord_key = int
    val compare = Int.compare
  end
structure Map = RedBlackMapFn (Key) 
```

然后，你可以这样做：

```
 - Map.singleton (1, "foo");
   val it = - : string map
   - Map.find (it, 1);
   val it = SOME "foo" : string option
   - 
```

希望有帮助！这些接口的文档是： [http ://www.smlnj.org/doc/smlnj-lib/Manual/toc.html](http://www.smlnj.org/doc/smlnj-lib/Manual/toc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T20:12:48.207

我认为回答你问题的一个例子是康奈尔大学的讲座： [康奈尔大学的讲座](http://www.cs.cornell.edu/courses/cs312/2008sp/handouts/sml-nj-library.html)

# multithreading - 对象池 - 同步 - Delphi

> ID：12199547
> 
> 赞同：1
> 
> 时间：2012-08-30T14:45:26.313
> 
> 标签：multithreading, delphi, pooling

我正在 Delphi 中实现一个对象池。我需要同步线程以从池中获取对象。

线程代码：

```
uClientQueryPool.CLIENT_POOL_GUARD.Acquire();
QueryClient := QUERY_POOL.GetClient();
uClientQueryPool.CLIENT_POOL_GUARD.Release; 
```

池代码：

```
var
   CLIENT_POOL_GUARD: TCriticalSection;

type
   TClientQueryPool = class
public
   function GetClient(): TQueryClient;
end; 
```

CLIENT_POOL_GUARD 是一个单元变量。池运行良好，但我可以使用“uClientQueryPool.CLIENT_POOL_GUARD.Acquire();”吗 和“uClientQueryPool.CLIENT_POOL_GUARD.Release；” 在 GetClient 方法中？

像这样：

```
function TClientQueryPool.GetClient: TQueryClient;
begin
    CLIENT_POOL_GUARD.Acquire();
    ...
    CLIENT_POOL_GUARD.Release;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T16:45:07.170

在 get/pop/whatever 方法中移动锁就可以了，就像让 CriticalSection 实例成为池类的私有成员一样。在将对象推回池中的 release() 调用中使用相同的 CS。

几十年来一直在这样做，通常使用 TObjectQueue 作为池队列，一个 CS 来保护它，一个信号量来计算池内容以及请求线程在池暂时清空时阻塞的东西。

不知道那个“双重获取”线程来自哪里。锁要么在池类内部，要么在外部。我真的无法想象为什么有人会同时编写代码！

示例类：

首先，线程安全的 PC 队列，用于保存池化对象：

```
unit tinySemaphoreQueue;

interface

uses
  Windows, Messages, SysUtils, Classes,syncObjs,contnrs;

type

pObject=^Tobject;

TsemaphoreMailbox=class(TobjectQueue)
private
  countSema:Thandle;
protected
  access:TcriticalSection;
public
  property semaHandle:Thandle read countSema;
  constructor create; virtual;
  procedure push(aObject:Tobject); virtual;
  function pop(pResObject:pObject;timeout:DWORD):boolean;  virtual;
end;

implementation

{ TsemaphoreMailbox }

constructor TsemaphoreMailbox.create;
begin
  inherited Create;
  access:=TcriticalSection.create;
  countSema:=createSemaphore(nil,0,maxInt,nil);
end;

function TsemaphoreMailbox.pop(pResObject: pObject;
  timeout: DWORD): boolean;
begin // wait for a unit from the semaphore
  result:=(WAIT_OBJECT_0=waitForSingleObject(countSema,timeout));
  if result then // if a unit was supplied before the timeout,
  begin
    access.acquire;
    try
      pResObject^:=inherited pop; // get an object from the queue
    finally
      access.release;
    end;
  end;
end;

procedure TsemaphoreMailbox.push(aObject: Tobject);
begin
  access.acquire;
  try
    inherited push(aObject); // shove the object onto the queue
  finally
    access.release;
  end;
  releaseSemaphore(countSema,1,nil); // release one unit to semaphore
end;

end. 
```

然后对象池：

```
unit tinyObjectPool;

interface

uses
  Windows, Messages, SysUtils, Classes,syncObjs,contnrs,
  tinySemaphoreQueue;

type
  TobjectPool=class;

  TpooledObject=class(TObject)
  private
    FmyPool:TObjectPool;
  protected
    Fparameter:TObject;
  public
    procedure release;
    constructor create(parameter:TObject); virtual;
  end;

  TpooledObjectClass=class of TpooledObject;

  TobjectPool=class(TsemaphoreMailbox)
  private
    Fparameter:TObject;
    function getPoolLevel: integer;
  public
    property poolLevel:integer read getPoolLevel;
    constructor create(poolDepth:integer;
      pooledObjectClass:TpooledObjectClass;parameter:TObject); reintroduce; virtual;
  end;

implementation

{ TobjectPool }

constructor TobjectPool.create(poolDepth: integer;
  pooledObjectClass: TpooledObjectClass;parameter:TObject);
var objectCount:integer;
    thisObject:TpooledObject;
begin
  inherited create;
  Fparameter:=parameter; // a user parameter passed to all objects
  for objectCount:=0 to poolDepth-1 do // fill up the pool with objects
  begin
    thisObject:=pooledObjectClass.create(parameter);
    thisObject.FmyPool:=self;
    inherited push(thisObject);
  end;
end;

function TobjectPool.getPoolLevel: integer;
begin
  access.acquire;
  result:=inherited count;
  access.release;
end;

{ TpooledObject }

constructor TpooledObject.create(parameter: TObject);
begin
  inherited create;
  Fparameter:=parameter;
end;

procedure TpooledObject.release;
begin
  FmyPool.push(self);
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:38:04.153

是的你可以。请注意，尽管您可以以线程安全的方式从池中提取对象，但如果对象本身不是线程安全的，则使用它可能不是线程安全的。例如，在下面的示例中，池是线程安全的，如果池中的所有对象都在使用中，甚至让线程等待，但是一旦对象在使用中，使用它仍然不是线程安全的，因为它使用全局数据。

```
uses
  SyncObjs;

var
  GlobalData: Integer = 0;

type
  TDataObject = class
    Used: Boolean;
    procedure UpdateData;
  end;

type
  TPool = class
    FLock: TCriticalSection;
    FSemaphore: TSemaphore;
    FDataObjects: array[0..9] of TDataObject;
    constructor Create;
    destructor Destroy; override;
    function GetDataObject: TDataObject;
    procedure ReleaseDataObject(AObject: TDataObject);
  end;

var
  Pool: TPool;

type
  TDataThread = class(TThread)
    constructor Create;
    procedure Execute; override;
  end;

{ TPool }

constructor TPool.Create;
var
  i: Integer;
begin
  inherited Create;
  FLock := TCriticalSection.Create;
  FSemaphore := TSemaphore.Create(nil, Length(FDataObjects), Length(FDataObjects), '', False);

  for i := Low(FDataObjects) to High(FDataObjects) do
    FDataObjects[i] := TDataObject.Create;
end;

destructor TPool.Destroy;
var
  i: Integer;
begin
  for i := Low(FDataObjects) to High(FDataObjects) do
    FDataObjects[i].Free;

  FSemaphore.Free;
  FLock.Free;
end;

function TPool.GetDataObject: TDataObject;
var
  i: Integer;
begin
  Result := nil;

  FLock.Acquire;
  try
    FSemaphore.Acquire;
    for i := Low(FDataObjects) to High(FDataObjects) do
      if not FDataObjects[i].Used then
      begin
        Result := FDataObjects[i];
        Result.Used := True;
        Exit;
      end;

    Assert(Result <> nil, 'Pool did not return an object');
  finally
    FLock.Release;
  end;
end;

procedure TPool.ReleaseDataObject(AObject: TDataObject);
begin
  if not AObject.Used then
    raise Exception.Create('Data object cannot be released, because it is not in use.');

  AObject.Used := False;
  FSemaphore.Release;
end;

{ TDataObject }

procedure TDataObject.UpdateData;
begin
  Inc(GlobalData);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  TDataThread.Create;
end;

{ TDataThread }

constructor TDataThread.Create;
begin
  inherited Create(True);
  FreeOnTerminate := True;
  Resume;
end;

procedure TDataThread.Execute;
var
  DataObject: TDataObject;
begin
  DataObject := Pool.GetDataObject;

  DataObject.UpdateData; // <-- Not thread-safe!

  Pool.ReleaseDataObject(DataObject);
end;

initialization
  Pool := TPool.Create;
finalization
  Pool.Free;
end. 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-30T15:08:16.813

1）我会从线程代码中删除获取/发布代码 - 它很脆弱。在一个线程中，您忘记调用它 - 和 ba-bang！根据经验，安全措施应该由服务器集中和执行，而不是在客户端中以模糊的方式分布。

2) Acquire/Release 调用应该防止错误，否则任何杂散异常将永远锁定所有线程。

```
 function TClientQueryPool.GetClient: TQueryClient;
 begin
   CS.Acquire;
   try
     // actually getting object, preferably just calling
     // internal non-public thread-unsafe method for it
   finally
     CS.Release;
   end;
  end; 
```

3）Critical section 本身最好是 Pool 的内部非公共成员。这样，当您忘记实现细节时，您将被允许进行简单的重构，例如：

3.1) 实现多个池

3.2) 将池代码移动到另一个单元

3.3) 确保池外的任何杂散错误代码不会导致应用程序崩溃，随机获取或释放 CS

4) 对 TCriticalSection 对象的获取/释放的双重调用将您所有的赌注置于 TCriticalSection 文档中的单个注释的影响上，由 The_Fox 指出。“每次对 Release 的调用都应通过较早的 Acquire 调用来平衡” [http://docwiki.embarcadero.com/Libraries/en/System.SyncObjs.TCriticalSection.Release](http://docwiki.embarcadero.com/Libraries/en/System.SyncObjs.TCriticalSection.Release)

并且希望今天和明天的所有其他 Pascal 实现都不会错过它。

那是脆弱的做法。多线程代码以创建 Heisenbugs 而闻名，当客户站点出现问题时，您无法在内部重现并找到它。如果将来您的公司将扩展到不同的平台或不同的语言实现，那将是一个潜在的地雷。而我的那种，通过内部测试很难找到。多线程代码是您最好过度定义并且不允许任何不确定性发生的地方。

# django - 我在 django 中有一个登录视图。成功登录后我需要重定向到我的 url 页面

> ID：12199548
> 
> 赞同：-2
> 
> 时间：2012-08-30T14:45:29.533
> 
> 标签：django, django-views

```
#views.py
def login(request):  
    ctx=dict()  
    ctx['login_form'] = LoginForm()  
    if request.method == 'POST':  
        for e in Login.objects.all():  
            if e.password==request.POST['password']:  
               redirect_to('my url')
        return HttpResponse('failed authentication ')  
    return render_to_response('registration/login.html', ctx, context_instance = RequestContext(request))  

#urls.py
urlpatterns = patterns('',

   (r'^signup/', signup),
    (r'^$', index),
    (r'^ajaxsite/', signup),
    (r'^login/', login),

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:49:17.760

使用重定向[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

```
return redirect(new_url) 
```

或者如果是 ajax 提交，

```
return HttpResponseRedirect(new_url) 
```

# php - 如何使用 PHP 将儒略日（不是日期）和公历年转换为公历日期？

> ID：12199556
> 
> 赞同：0
> 
> 时间：2012-08-30T14:45:51.440
> 
> 标签：php, date, gregorian-calendar, julian-date

这是一个从儒略日期到公历日期的 PHP 示例：

```
$jd = gregoriantojd(10,3,1975);
echo($jd . "<br />");

$gregorian = jdtogregorian($jd);
echo($gregorian);

Output:
2442689
10/3/1975 
```

如果你有完整的儒略日，这很有效，但如果你只有一个儒略日，比如“254”和“2012”年怎么办？您如何使用 PHP 仅使用儒略日和公历年份来获得公历日期？

这是儒略日的图表：

[http://landweb.nascom.nasa.gov/browse/calendar.html](http://landweb.nascom.nasa.gov/browse/calendar.html)

这可以用PHP吗？

编辑：根据答案，这就是我想出的，尽管可能有更简单的方法：

```
$JulianDay = 77;
$Year = 1977;
$DateYear = date("Y/m/d", mktime(0, 0, 0, 1, 1, $Year));
$GregDate = new DateTime($DateYear);
$GregDate->modify("+$JulianDay day");
$Date = $GregDate->format('Y/m/d');
echo $Date; // '1977/03/19' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:59:40.563

```
echo jdtogregorian(gregoriantojd(01, 01, 2012)+253); 
```

如果 2012 年的 254 是 9 月 10 日（从您的链接看来是这样），它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:00:31.407

```
$date = strtotime('+'.YourDay.' days', mktime(0, 0, 0, 0, 0, YourYear)); 
```

strtotime 是一个令人难以置信的功能

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-01T10:32:44.097

您可以在 php 中使用以下函数来执行相同的操作。

```
function d2julian($indate) {
    $year = ltrim(date('y', $indate),'0');     /* Year part with leading zeroes stripped    */
    if ($year == 0) $outdate = '00';
    else if ($year < 10) $outdate = '0' . $year;
    else $outdate = $year;

    $day = ltrim(date('z',$indate)+1,'0');    /* Day with leading zeroes stripped            */
    if ($day < 10) $outdate .= '00' . $day;
    else if ($day < 100) $outdate .= '0' . $day;
    else $outdate .= $day;

    return $outdate;
} 
```

希望这可以帮助。如果您有任何问题，请告诉我。

# c# - 反序列化 CDATA 时集合是只读异常

> ID：12199561
> 
> 赞同：0
> 
> 时间：2012-08-30T14:46:10.477
> 
> 标签：c#, cdata, xml-deserialization

我想反序列化包含 CDATA 集合的序列化 XML。

XML 看起来像这样：

```
<User Index="1">
   <Address><![CDATA[My street 1, 1234, My city]]></Address>
   <Address><![CDATA[My next street 1, 5678, My another city]]></Address>
</User> 
```

因为我想直接将新地址添加为这样的字符串：

```
var user = new User();
user.Addresses.Add("My street 1, 1234, My city");
user.Addresses.Add("My next street 1, 5678, My another city"); 
```

我的用户类如下所示：

```
[XmlRoot("User", IsNullable = true)]
public class User
{
    [XmlIgnore]
    private XmlDocument xmlDoc;

    [XmlIgnore]
    private Collection<string> addresses;

    [XmlIgnore]
    private Collection<XmlNode> addressesNode;

    public User()
    {
        xmlDoc = new XmlDocument();
        addresses = new Collection<string>();
    }

    [XmlAttribute("Index")]
    public int Index { get; set; }

    [XmlElement("Address", IsNullable = true)]
    public Collection<XmlNode> AddressesNode
    {
        get
        {
            // This will create CDATA in address node. String values for
            // CDATA are in addresses collection.
            // This is causing problem.
            return new Collection<XmlNode>(addresses.Select(a => xmlDoc.CreateCDataSection(a)).ToArray());
        }
        set
        {
            // Set also address collection of string to the same values.
            addresses = new Collection<string>(value.Select(a => a.Value).ToArray());

            addressesNode = value;
        }
    }

    [XmlIgnore]
    public Collection<string> Addresses
    {
        get
        {
            return addresses;
        }
    }
} 
```

序列化这个工作正常。但是在反序列化时，会抛出异常

```
 "Collection is read-only." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:47:55.493

我想你可能想打电话`ToList`而不是`ToArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:54:58.290

当您创建一个将 IList 作为参数传递的新集合时，它会将集合创建为原始列表的包装器。它不会将其复制到新列表中（请参见[此处](http://msdn.microsoft.com/en-us/library/ms132401.aspx)）。在您的 addressNode 设置器中，您创建一个新集合作为集合的包装器。您可以改为将其更改为新列表，因为 List 构造函数确实创建了一个新列表，而不是包装原始列表（请参见[此处](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)）。

# iphone - NSFetchRequest 不适用于谓词

> ID：12199567
> 
> 赞同：3
> 
> 时间：2012-08-30T14:46:27.667
> 
> 标签：iphone, objective-c, ios, nspredicate, nsfetchrequest

我有这个代码：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Entry"];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"version == %@", @"1.0"];

[request setPredicate:predicate];

NSArray *results = [managedObjectContext executeFetchRequest:request error:nil]; 
```

实体“Entry”有一个名为“version”的属性，它是一个字符串。上面的谓词似乎不仅仅返回字符串为“1.0”的条目，而是返回一些设置为“1.1”的条目。

我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:01:41.040

看看[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)的

并`like`在以下情况下尝试`==` ：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:  
                                       @"(version == %@)", @"1.0"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:54:02.477

尝试在谓词表达式周围放置圆括号 ()

IE

```
"(version == %@)" 
```

# api - 以 Magento 为主，并创建单点登录以与其他第三方软件集成

> ID：12199573
> 
> 赞同：22
> 
> 时间：2012-08-30T14:46:47.513
> 
> 标签：api, magento, session, integration

这是我长期以来一直在努力的事情。它首先从 Prestashop 开始，作为与我需要为整个网站制作的其他脚本或拼图的集成。我目前仍在使用 Prestashop 作为我的网上商店，但后来改用 Magento。

我切换到 Magento 是因为它具有复杂的灵活性，而且总体而言我认为它是最好的解决方案、最好的支持和最好的整体电子商务脚本。

话虽如此，我在 Prestashop 遇到的同样问题似乎是相同的，我将继续尝试将事物完美和谐地整合在一起的任何方面。

我有 Magento 设置，作为网站的主要部分，在 Magento 的子文件夹中，我将 Wordpress 安装在一个名为“articles”的文件夹中，我也将 FluxBB 作为我的消息论坛，因为它很简单，没有废话我不太关心的臃肿额外功能的负载，它们位于一个名为“论坛”的子文件夹中。

至此，我们知道 Magento、Wordpress 和 FluxBB 都有自己的用户管理方式；创建、管理和跟踪它们。

我想做的是找到将这三个和更多组合在一起的最佳方法，以使我的网站尽可能流畅和实用。在给才华横溢、乐于助人的 Alan Storm 发了电子邮件后，他告诉我，他所知道的最佳解决方案是进行他们都指向的第三方用户管理，并管理客户身份验证。我确实相信他的想法可能是最好的，但我想把它放在 StackOverFlow 上，我也可能把它发布到 Magento 上，以获得喜欢挑战的 magento 开发人员和聪明人的广泛了解。

我有几个想法，没有一个可能奏效，有些可能半途而废，或者一个可能只是可行的。但首先让我告诉你我到目前为止所取得的成就。我已经完成了必要的步骤来整合我的页眉和页脚的整体设计，所以基本上 Wordpress 和 FluxBB 被包装并包含在 Magento 的外部设计层中。因此，话虽如此，我也已经做到了 Magento 将通过说“Hello Guest”或“Hello User”来检查会话以查看用户是否登录到 Magento。这就是我停下来的地方，因为我超出了我的深度并需要帮助，无论是我们出于纯粹的挑战而共同创造的东西，还是有人说如果我付钱他们会帮助我，无论哪种方式我都喜欢完成。

* * *

**脑屁#1：**

调整 Wordpress 和 FluxBB 的用户表，使其更符合 Magento 的结构，如密码和用户名/电子邮件登录部分。其余字段可以分别保持原样用于帖子计数等。

从那里，我想弄清楚当客户从注册中创建时，Magento 中的哪个类将实际输入到数据库中。当我找到该代码时，我想扩展将用户凭据复制到 Wordpress 和 FluxBB 数据库中其他两个表中的能力。如有必要，它可以只是向 Wordpress 和 FluxBB 添加几个字段，如果这似乎是一个更好的主意，是的，我的意思是 Magento 创建的实际加密密码，我也希望它是安全的。

从那里开始，当我们知道客户在 Magento 注册时，数据被复制到其他两个表中，那么我们至少取得了进展，这个进展是否真的有效，还有待确定。

然后，我们以任何我们可以从 Wordpress 和 FluxBB 的方式禁用登录/注销和注册链接，因为它们将不再需要，因为我们希望用户通过 Magento 一个位置注册、登录和注销。

然后是我眼中有趣的部分，在他们订购产品、评论 wordpress 文章并可能发表评论、发送给朋友等时，让该死的会话在整个网站上持续进行……以及发布主题、回复等FluxBB 容量。

对我来说，这是创建字段或从 Magento 的客户注册中添加数据的地方，我可以检查他们是否已经登录到 Magento，从那里我们可以让它自我验证。这可能是过度杀戮，或者这可能只是它需要完成的方式。但对我来说，如果凭据位于所有三个数据库中，那么它们应该能够通过更改 Wordpress 和 FluxBB 中的代码或添加代码来进行验证。是的，我知道如果客户希望更改他们的信息，我们还必须对个人资料编辑和密码编辑做一些事情。

但这是我对此的第一个想法，无论这是否是正确的决定，我想听听这里的人的广泛知识，他们比我在 Magento、PHP 和其他一切方面拥有更多的经验和知识。

* * *

**脑屁#2**

由于 Magento 的复杂性以及它的整体设置方式，这个不合逻辑的想法对我来说似乎完全是一个外部延伸。

但是我们的想法是删除/编辑 Wordpress 和 FluxBB（以及任何其他第三方软件），以几乎忽略它自己的注册、登录、注销、编辑和查看 Magento 的凭据和建立新客户的方法。本质上使它们成为 Magento 的超大模块。

我只知道 Magento 的设置方式是模块化的，它的复杂性似乎需要更多的编码和故障排除才能做到这一点。

* * *

**脑屁#3**

转储 Wordpress 和 FluxBB 并查看 Magento Connection Store 中的模块，这些模块几乎具有我需要的所有功能，并且可以向它们添加缺少的内容，而不是尝试集成第三方软件。

我喜欢 Wordpress，我认为用一个模块来复制它，至少在我花了几个小时查看与 CMS/新闻相关的所有可用模块之后，这是一个艰难的决定。FluxBB 我可以接受或离开它，如果有人有一个已经可行的解决方案来使用 phpBB 或 vBulletin 或 SimpleMachines，我会选择他们。我宁愿它是免费的开源软件，不是因为我是一个便宜的滑板，而是因为我尽可能地支持开源。

* * *

**脑屁#4**

这可以是一个cookie吗，但只有在它们允许cookie时才有效，或者可以以某种方式添加到会话中以允许事物通过但Magento设置不同的会话或也允许你这样它们相互碰撞所以这个可能根本不是一个想法，也可能是一个想法。

* * *

我知道我没有给出我尝试过的事情的例子，我看过的文件或与之相关的任何东西，我很抱歉，我提供了一些相关的链接，但到目前为止没有发现任何与我想要完成的事情相匹配的链接。我试图将一些有趣的灾难性结果合并在一起。

**链接示例？： http:** [//www.magentocommerce.com/wiki/doc/webservices-api/api/customer#customer.create](http://www.magentocommerce.com/wiki/doc/webservices-api/api/customer#customer.create) [http://www.magentogarden.com/blog/how-are-passwords-encrypted-in -magento.html](http://www.magentogarden.com/blog/how-are-passwords-encrypted-in-magento.html) [http://www.nicksays.co.uk/magento_events_cheat_sheet/](http://www.nicksays.co.uk/magento_events_cheat_sheet/) [http://www.magentocommerce.com/wiki/5_-_modules_and_development/customers_and_accounts/registration_fields](http://www.magentocommerce.com/wiki/5_-_modules_and_development/customers_and_accounts/registration_fields) [如何从 Magento 外部访问 Magento 客户的会话？](https://stackoverflow.com/questions/9982210/how-to-access-magento-customers-session-from-outside-magento)

对此的任何帮助都会很好，我正在尝试同时处理网站的多个部分，而这很麻烦，我会说每个人都会发现它很难或发现它很难。有人喜欢挑战吗？:)

- - - - - 编辑：

我已经让 Magento 和 Wordpress 与在 CodeCanyon 的网站上找到的 James Kemp 的模块（Magento 和 Wordpress 的单点登录）完美地协同工作，我将对其进行调整以适用于 FluxBB 或我所做的任何其他事情。

只是传递信息......我看到这是被编辑的，不知道被编辑了什么并且不在乎。只是传递自发布此消息以来我发现的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:06:50.370

我正在管理/自定义 magento+vanilla 论坛+在 Yii 框架中制作的自定义应用程序的组合。用户在应用程序之间“共享”。这两个链接都不好。正如 Alan 已经回复您的那样，正确的 SSO 将使用外部用户数据库/管理器。但是，并不是每个人都愿意为使用 magento 每周发布 1 篇论坛和每月 1 篇博客而重新编写三个应用程序。所以我们的选择就更少了。首先，如果您不想（很可能不想）重写正在更新和维护的已编写的开源项目的很大一部分，然后根据定期更新（您想要它们）维护您的更改，那么您必须将用户数据复制到三个数据库。除非您适应的项目有某种方法可以将用户数据作为插件或外部模块进行管理。

那么，如何实现呢？假设您选择 Magento 作为万事万物之母，您需要它导出一个 API 进行身份验证，这可能在使用 cookie 和 javascript 的浏览器上工作，但这相当棘手，或者您可以使用它的前端 cookie 来验证执行服务器的会话-来自子应用的服务器 API 请求。就“经典”SSO 而言，这是首选选项。从技术上讲，当您的用户打开论坛或博客时会发生什么，相应的应用程序会检测 magento 的 cookie 并检查会话是否有效以及用户是谁。如果找到用户，他的数据将被复制到博客或论坛表中。然后，您需要使用新创建的用户记录在博客或论坛应用程序上启动经过身份验证的会话。

到目前为止一切都很好，但还有一些工作。您需要在子应用程序中禁用用户配置文件管理或对其进行修改，以便 Magento 中保存的数据始终是正确的，并且您需要发明一些东西来将 Magento 的用户配置文件表示同步到孩子。最好连接到 Magento 的事件，因此每次用户更改他的个人资料时，数据都会在儿童应用程序中更新。但还有另一个。您可能希望保持某些数据应用程序的特定性，论坛上的显示名称不是 Magento 的 FirstName+LastName 所必需的，有些人希望将其保密。

以上就是我能回忆起的关于保持它运行的有趣事实。当然，我还遗漏了许多其他内容，或多或少是具体的。但希望我的评论可以帮助你放屁。

我们已经尝试评估其他选项，但没有重复数据的任何东西似乎都太昂贵而无法实施或维护。也许以后。有预算和时间。

# php - 如何将 mysqli_connect 更改为 mysql_connect 和 mysqli_fetch_assoc

> ID：12199576
> 
> 赞同：-4
> 
> 时间：2012-08-30T14:46:50.557
> 
> 标签：php, mysql, arrays, function, mysqli

**我有这个联系**

```
 <?php
    $db_host = 'localhost';
    $db_user = 'root';
    $db_pass = '';
    $db_name = 'databasename';
    $conn = mysql_connect($db_host,$db_user,$db_pass) or die(mysql_error());
    mysql_select_db($db_name,$conn);
    mysql_query("SET NAMES 'utf8'");
    mysql_query('SET CHARACTER SET utf8');
    ?> 
```

**但我的旧连接不适用于此代码**

```
 //connect to database
$link = mysqli_connect('localhost','root','');
mysqli_select_db($link,'databasename');
//get all rows
$query = mysqli_query($link,'SELECT * FROM categories');
while ( $row = mysqli_fetch_assoc($query) )
{
    $menu_array[$row['catid']] = array('catname' => $row['catname'],'parentid' => $row['parentid']);
    $menu_array[$row['catid']] = array('catname' => $row['catname'],'parentid' => $row['parentid'],'catid'=>$row['catid']);
}
//recursive function that prints categories as a nested html unorderd list
function generate_menu($parent)
{
$has_childs = false;
//this prevents printing 'ul' if we don't have subcategories for this category
global $menu_array;
    //use global array variable instead of a local variable to lower stack memory requierment
    foreach($menu_array as $key => $value)
    {
        if ($value['parentid'] == $parent)
        {
            //if this is the first child print '<ul>'
            if ($has_childs === false)
            {
                //don't print '<ul>' multiple times
                $has_childs = true;
                echo '<ul>';
            }
            echo '<li><a href="category.php?catid='. $value['catid'] . '">' . $value['catname'] . '</a>'; 
```

**我认为我的错误位于这段代码之间.. 最后我只需将 mysqli_connect 替换为 mysql_connect 没有我**

```
while ( $row = mysqli_fetch_assoc($query) )
{
    $menu_array[$row['catid']] = array('catname' => $row['catname'],'parentid' => $row['parentid']);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:45:16.300

您应该考虑使用 mysqli_connect 和 mysqli_select_db。

也改为`$query = mysqli_query($link,'SELECT * FROM categories');`：

```
$query = mysqli_query($link,'SELECT * FROM `categories`'); 
```

我认为问题可能出在连接上，其他一切看起来都很好，我认为您无法使用正常的 mysql_conn 访问 mysqli 对象。

试一试

**另外，不要改成mysql，现在太旧了！看看[mysqli](http://php.net/manual/en/book.mysqli.php)和[php 数据对象](http://php.net/manual/en/book.pdo.php)都有很好的文档记录**

# android - 如何缩放不应小于指定尺寸的图像

> ID：12199577
> 
> 赞同：0
> 
> 时间：2012-08-30T14:46:51.760
> 
> 标签：android, imageview, scale

我正在使用 ImageView 来显示图像。有一个“Image--”按钮，当我点击它时，ImageView 将使用一个矩阵来缩放图像。问题是，图像最终会太小而无法看到。

你可以看看我的例子。

原图：

![在此处输入图像描述](../Images/5f517ff1e00fa4ebaceb581212442f87.png)

单击“图像--”按钮 12 次后：

![在此处输入图像描述](../Images/8f23b548cac2548beb02eb4fccfa8ef7.png)

你可以看到沙发图像很小，现在很难看到。

我的“main.xml”内容是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/root" xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >

    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
                  android:orientation="horizontal">
        <!-- buttons -->
    </LinearLayout>

    <ImageView android:id="@+id/imageView" android:layout_width="wrap_content" android:layout_height="wrap_content"
               android:adjustViewBounds="true" android:background="#336699"
               android:scaleType="matrix"/>

</LinearLayout> 
```

我的java代码是：

```
 this.btnImageZoomOut.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Matrix matrix = new Matrix(imageView.getImageMatrix());
            matrix.postScale(0.8f, 0.8f);
            imageView.setImageMatrix(matrix);
            imageInfo();
        }
    }); 
```

我的问题是：如何让沙发图像变小一个指定的尺寸？例如原始尺寸的 1/5？

* * *

**更新**

如果我能得到缩放沙发图像的大小，就很容易检查图像是否太小。但是我尝试了很多，仍然没有得到它，这就是我问这个问题的原因。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:52:38.880

你不能检查一下80%的照片有多大，如果它比你想要的小，不要做比例吗？如果尺寸太小，也许禁用收缩按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:03:01.170

我认为使用 Layoutparams （它将为您提供图像的大小）而不是 Matrix 可能更容易，因为无论如何您都需要大小。这可能是您缩小的 onClick 方法：

```
 imageView.setScaleType(ScaleType.FIT_XY);
  LayoutParams layoutParams=imageView.getLayoutParams();
  layoutParams.height*=0.8f;
  layoutParams.width*=0.8f;
  if(layoutParams.height>scaled_specified_size_in_px && layoutParams.width>scaled_specified_size_in_px){
    imageView.setLayoutParams(layoutParams);
  } 
```

请注意，您需要在那里有一个缩放值，或者您可以简单地将其限制为原始大小的 %（您需要保存原始大小）。

# java - 如何在 tableLayout 中显示文本视图数组

> ID：12199580
> 
> 赞同：0
> 
> 时间：2012-08-30T14:47:01.383
> 
> 标签：java, android, xml, arrays, textview

我有一个问题要解决，我有三个文本视图数组。

```
- Textview a[];
- TexTview b[];
- TexTview c[]: 
```

我需要在表格中显示它们，如下所示：[因为我需要显示它](http://vvcap.net/db/8o24G_xnsT8QRvf5UnI7.htp)。但是当用以下代码显示时，屏幕是这样的：[所以不需要像这样sho](http://vvcap.net/db/qWwmyl5SrXLJNFiMnpCy.htp)

```
 ((ViewGroup) layout).addView(a[i]);
   ((ViewGroup)layout).addView(a[i]);
   ((ViewGroup)layout).addView(a[i]); 
```

这是完整的代码，提前，非常感谢。

```
public class MainActivity extends Activity {

    SitesList sitesList = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** Create a new layout to display the view */
        View layout = findViewById(R.id.layout);

        /** Create a new textview array to display the results */

       TextView variacion[];
       TextView nemotecnico[];
       TextView precio[];

        try {

            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            /** Send URL to parse XML Tags */
            URL sourceUrl = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=75");

            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
            MyXMLHandler myXMLHandler = new MyXMLHandler();
            xr.setContentHandler(myXMLHandler);
            xr.parse(new InputSource(sourceUrl.openStream()));

            } catch (Exception e) {
                System.out.println("XML Pasing Excpetion = " + e);
            }

        /** Get result from MyXMLHandler SitlesList Object */
        sitesList = MyXMLHandler.sitesList;

        /** Assign textview array lenght by arraylist size */
     //   registro = new TextView[sitesList.getRegistro().size()];
        nemotecnico = new TextView[sitesList.getNemotecnico().size()];
        variacion = new TextView[sitesList.getVariacion().size()];
        precio = new TextView[sitesList.getPrecio().size()];

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getRegistro().size(); i++) {

            variacion[i] = new TextView(this);
            variacion[i].setText(sitesList.getVariacion().get(i));

            nemotecnico[i] = new TextView(this);
            nemotecnico[i].setText(sitesList.getNemotecnico().get(i));

            precio[i]  = new TextView(this);
            precio[i].setText(sitesList.getPrecio().get(i)); 

           ((ViewGroup)layout).addView(nemotecnico[i]);
           ((ViewGroup)layout).addView(variacion[i]);
           ((ViewGroup)layout).addView(precio[i]);

        }   
        /** Set the layout view to display */
       setContentView(layout);

    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:11:04.630

我会用一个自定义行来制作一个 ListView，该行在每个自定义行的 GridLayout 中都有标题和 4 个其他 TextView。然后，您可以编写一个自定义适配器来在您覆盖 getView() 方法时填充它们。

这是一个很好的演示：[http ://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)

您的自定义行看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="TextView1" />

<GridLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:columnCount="2"
    android:rowCount="2" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView2" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView3" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView4" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView5" />

</GridLayout> 
```

# wcf - WCF >> DUPLEX >> SILVERLIGHT >> pollingDuplexHttpBinding = 非常慢！大延迟

> ID：12199583
> 
> 赞同：0
> 
> 时间：2012-08-30T14:47:15.650
> 
> 标签：wcf, silverlight, pollingduplexhttpbinding

我有

WCF 与 wsDualHttpBinding 绑定用于 WPF 应用程序-> 效果很好！立即获取 WCF 发布方法。

silvelight 4 的 pollingDuplexHttpBinding 的另一个绑定 --> 非常慢 --> wpf 应用程序得到它后延迟 30++- 秒（WPF 立即得到它）

这是为什么 ？最好的谷歌结果是

[http://blogs.msdn.com/b/silverlightws/archive/2009/09/30/having-a-pollingduplex-service-and-any-other-wcf-service-in-the-same-website-causes- silverlight-calls-to-be-slow.aspx](http://blogs.msdn.com/b/silverlightws/archive/2009/09/30/having-a-pollingduplex-service-and-any-other-wcf-service-in-the-same-website-causes-silverlight-calls-to-be-slow.aspx)

我真的不知道如何继续......

```
<system.serviceModel>

    <!-- Register the binding extension from the SDK. -->
    <extensions>
      <bindingExtensions>
        <add name="pollingDuplexHttpBinding"
             type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,
                   System.ServiceModel.PollingDuplex, 
                   Version=4.0.0.0, 
                   Culture=neutral, 
                   PublicKeyToken=31bf3856ad364e35" />
      </bindingExtensions>
    </extensions>

    <bindings>
      <wsDualHttpBinding>
        <binding name="wsDualHttpBinding"
                 maxBufferPoolSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647"
                        maxStringContentLength="2147483646"
                        maxArrayLength="2147483646"
                        maxBytesPerRead="2147483647"
                        maxNameTableCharCount="2147483647" />
        </binding>
      </wsDualHttpBinding>
      <pollingDuplexHttpBinding>
        <binding name="multipleMessagesPerPollPollingDuplexHttpBinding"
                 duplexMode="MultipleMessagesPerPoll"
                 maxOutputDelay="00:00:30"
                 maxBufferPoolSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647"
                        maxStringContentLength="2147483646"
                        maxArrayLength="2147483646"
                        maxBytesPerRead="2147483647"
                        maxNameTableCharCount="2147483647" />
        </binding>
      </pollingDuplexHttpBinding>
    </bindings>

    <services>
      <service behaviorConfiguration="" name="TheWCFService.Service1">

        <endpoint address="wsDualHttpBinding"
                  binding="wsDualHttpBinding"
                  bindingConfiguration="wsDualHttpBinding"
                  contract="TheWCFService.IService1">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <endpoint
          address="mex"
          binding="mexHttpBinding"
          bindingConfiguration=""
          contract="IMetadataExchange" />

        <endpoint
           address="pollingDuplexHttpBinding"
           binding="pollingDuplexHttpBinding"
           bindingConfiguration="multipleMessagesPerPollPollingDuplexHttpBinding"
           contract="TheWCFService.IService1">
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Service1/" />
          </baseAddresses>
        </host>

      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="6553600"/>
          <serviceThrottling maxConcurrentSessions="500" maxConcurrentCalls="500" maxConcurrentInstances="500" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:13:31.087

**第 I 步：从服务中删除 AspNetCompatibilityRequirements**

```
 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service1 : IService1 
```

到

```
public class Service1 : IService1 
```

如果您从 Web.config 设置它，请将其删除。

**第二步：在 Silverlight 中使用客户端堆栈**

```
 private void Application_Startup(object sender, StartupEventArgs e)
        {
                WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);
                WebRequest.RegisterPrefix("https://", WebRequestCreator.ClientHttp);
        } 
```

# actionscript-3 - Flex 垂直对齐文本 Mac 与 Windows

> ID：12199585
> 
> 赞同：0
> 
> 时间：2012-08-30T14:47:23.387
> 
> 标签：actionscript-3, apache-flex, flex3, vertical-alignment

我正在研究 Flex 应用程序中的一个问题，在该应用程序中，OS X 上的文本与 Windows 相比向上移动了几个像素。每个文本字段都不是垂直对齐到中间，而是更靠近顶部。

在这里找到了一个线程，但没有真正的解决方案[http://forums.adobe.com/message/2189821](http://forums.adobe.com/message/2189821)

任何人都知道如何以适用于两个系统的方式解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:08:57.980

我的方法是在检测到 OS X 时有条件地调整组件定位。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               preinitialize="onPreinitialize()"
               >
    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;

            private function onPreinitialize():void 
            {   
                Alert.show((-1 != Capabilities.os.search(new RegExp('mac', 'i'))) ? 'Replace this Alert with code which adjusts text positioning in order for it to appear the same as when it runs on Windows.' : 'No need to adjust text', Capabilities.os);
            }   
        ]]>
    </fx:Script>
</s:Application> 
```

# c# - 在 Windows 窗体 Web 浏览器中禁用提示

> ID：12199591
> 
> 赞同：2
> 
> 时间：2012-08-30T14:47:47.100
> 
> 标签：c#, winforms, internet-explorer, events, browser

我有一个使用 System.Windows.Forms.WebBrowser 的 C# 应用程序。

问题是：我希望用户在我的应用程序中顺利导航，没有提示，没有弹出 javascript 窗口，没有安全提示。即使这要求某些内容不可用。我只想拥有一个窗口（总是一个窗口，如果接收到新窗口事件，我会将其重定向到单个窗口）。我怎样才能做到这一点？

我尝试使用 this.browser.ScriptErrorsSuppressed = true 但我似乎没有工作。例如，如果我在执行文本验证的浏览器页面上对其进行测试，我仍然会收到一个弹出窗口，提示我的文本无效。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:08:24.287

我在其他地方找到了解决方案，因为它在这里不可用。

这是： http: [//www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs](http://www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs)

基本上，您必须挂钩 WM_INITDIALOG 消息。

它在这里创造了奇迹。

# c++ - C++：#pragma comment(lib, "XXX") 实际上对“XXX”做了什么？

> ID：12199595
> 
> 赞同：40
> 
> 时间：2012-08-30T14:47:51.107
> 
> 标签：c++, pragma

我的背景是 C#，但我必须维护一些遗留 (MS) C++。在那个代码库中，我偶然发现：

```
#pragma comment(lib, "OtherLib700.lib") 
```

其中 700 是一些版本控制。此外，lib 是一个同名的 DLL。

我首先认为该程序将依赖于 DLL，但在将其从系统中删除后，该程序仍然可以工作。不过，还有一个更新版本的 DLL，名为 OtherLib900...

似乎程序“包含”了 lib 的代码，因此它不再依赖于外部 DLL。（或者程序“自动”使用较新的 DLL ......）

哪一个是正确的？有没有办法进一步证实“假设”？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-30T14:51:36.567

`pragma`用于链接指定`.lib`文件。这是在项目设置的外部依赖项字段中指定库的替代方法。

大多数情况下，它用于支持不同的版本：

```
#ifdef USE_FIRST_VERSION
#pragma comment(lib, "vers1.lib")
#else
#pragma comment(lib, "vers2.lib")
#endif 
```

当您的应用程序使用动态链接库时，一个`lib`文件会告诉您有关在`dll`. 所以基本上你只需要`lib`编译和链接，但你需要`dll`运行程序，因为它包含所有的二进制代码。

你说有一个 associated `dll`，这通常表示`lib`文件只包含链接信息，没有代码。`dll`如果未找到关联，您应该会收到运行时错误。您可以使用 MSVS 检查是否`dll`加载了不同版本的文件，或者是否从不同位置加载。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-30T14:57:16.800

如果一个程序有这个 pragma，它将寻找 library `OtherLib700.lib`。如果这是程序加载时的导入库，windows 将`OtherLib700.dll`在路径中搜索。它不会`OtherLib900.dll`在执行期间尝试查找，因此它必须`dll`在不同的文件夹中找到您的。这假定这`OtherLib700.lib`是一个导入库而不是静态库。如果 OtherLib700.lib 是一个静态库，那么这就是它所需要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T14:51:49.770

如果 .lib 是带有实际代码的“真实”库（除了系统提供的 DLL，我从未使用过 DLL，但我相信您为自己的 DLL 制作了“导入库”），那么 DLL 不是必需的。

至于主题，#pragma comment(lib,xxx) 允许程序为链接器添加某些选项。可能非常有用，尽管我错过了一些我想像这样添加的选项。给出的示例是其使用的主要示例：当目标文件包含在程序中时，指定的库也将被添加。

# c# - 如何获取此文件路径的最后一部分？

> ID：12199600
> 
> 赞同：2
> 
> 时间：2012-08-30T14:47:55.387
> 
> 标签：c#, io, substring, filepath

我有一个遵循以下模式的文件路径：

Some\File\Path\Base\yyyy\MM\dd\HH\mm\Random8.3

我想提取 2012 年及以后的所有内容，但问题是虽然右侧是标准的，但每条记录的基本目录可能不同。

这里有两个例子：

1.  C:\Temp\X\2012\08\27\18\35\wy32dm1q.qyt
    返回：`2012\08\27\18\35\wy32dm1q.qyt`

2.  D:\Temp\X\Y\2012\08\27\18\36\tx84uwvr.puq
    返回：`2012\08\27\18\36\tx84uwvr.puq`

现在我正在抓取`LastIndexOf(Path.DirectorySeparatorChar)`N 次以在 2012 年之前获取字符串的索引，然后从该索引获取子字符串。但是，我有一种感觉，也许有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:18:18.307

```
 static void Main(string[] args)
    {
        Console.WriteLine(GetLastParts(@"D:\Temp\X\Y\2012\08\27\18\36\tx84uwvr.puq", @"\", 6));
        Console.ReadLine();
    }

    static string GetLastParts(string text, string separator, int count)
    {
        string[] parts = text.Split(new string[] { separator }, StringSplitOptions.None);
        return string.Join(separator, parts.Skip(parts.Count() - count).Take(count).ToArray());
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:29:08.803

这是一个使用正则表达式的解决方案，假设您要查找的格式始终包含 \yyyy\MM\dd\HH\mm。

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(ExtractPath(@"C:\Temp\X\2012\08\27\18\35\wy32dm1q.qyt"));
        Console.WriteLine(ExtractPath(@"D:\Temp\X\Y\2012\08\27\18\36\tx84uwvr.puq"));
    }

    static string ExtractPath(string fullPath)
    {
        string regexconvention = String.Format(@"\d{{4}}\u{0:X4}(\d{{2}}\u{0:X4}){{4}}\w{{8}}.\w{{3}}", Convert.ToInt32(Path.DirectorySeparatorChar, CultureInfo.InvariantCulture));

        return Regex.Match(fullPath, regexconvention).Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:14:52.893

一个 c# 解决方案是

```
string str = @"C:\Temp\X\2012\08\27\18\35\wy32dm1q.qyt";
string[] arr=str.Substring(str.IndexOf("2012")).Split(new char[]{'\\'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:29:42.127

我认为您当前的方法没有任何问题。这可能是最适合这份工作的。

```
public string GetFilepath(int nth, string needle, string haystack) {
    int lastindex = haystack.Length;

    for (int i=nth; i>=0; i--)
        lastindex = haystack.LastIndexOf(needle, lastindex-1);

    return haystack.Substring(lastindex);
} 
```

我会保持简单（KISS）。更容易调试/维护，可能是正则表达式变体的两倍。

# ruby-on-rails - 考拉之类的不行

> ID：12199608
> 
> 赞同：1
> 
> 时间：2012-08-30T14:48:23.290
> 
> 标签：ruby-on-rails, facebook, koala

我目前正在开发一个 facebook 应用程序。我使用 opengraph 创建动作和对象，并且可以使用 koala 方法在我的应用程序中发布新对象。这工作肯定的。

现在我想给一个指定的对象点赞

在我的 Rails 控制台中，我尝试使用这样的东西：

`user = User.find("id")`

`user.facebook.get_connection("me", "my_namespace:like", object: "myobjecturl")`

facebook方法定义了koala api对象 `Koala::Facebook::API.new(oauth_token)`

但我有一个例外

`Koala::Facebook::APIError: OAuthException: Unknown path components: /my_namespace:like`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T20:11:41.927

更明确地说，这里是考拉的精确代码：

```
user.facebook.put_connections("me", "og.likes", object: "myobjecturl") 
```

Facebook 不会让您为您的应用定义自定义的点赞操作，因此您必须使用没有命名空间的“og.likes”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:09:54.060

我猜您在这里谈论的是[内置的 Open Graph 之类的操作](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)- 必须针对`/userid/og.likes`（而*不是* `/userid/my_namespace:like`您想要做的）发布。

# asp.net-mvc - ASP.NET MVC3 提交将字典传递给控制器 的帖子

> ID：12199614
> 
> 赞同：0
> 
> 时间：2012-08-30T14:48:39.523
> 
> 标签：asp.net-mvc, razor

我有一本正在使用的字典。当“提交”被击中时，我如何将包含其中值的字典传递给 [HttpPost] 控制器方法？
目前在 [HttpPost] 方法中，DummyDictionary 是空的，我该如何解决这个问题？

谢谢！

## 模型

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using DummyMVC.Objects;

    namespace DummyMVC.Models
    {
        public class TheModel
        {
            public TheObject Obj { get; set; }
            public Dictionary<string, TheObject> DummyDictionary { get; set; }
        }
    } 
```

## 控制器

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using DummyMVC.Models;
    using DummyMVC.Objects;

    namespace DummyMVC.Controllers
    {
        public class DummyController : Controller
        {
            //
            // GET: /Dummy/
            [HttpGet]
            public ActionResult Index()
            {
                TheModel m = new TheModel();
                m.Obj = new Objects.TheObject();
                TheObject a_obj = new TheObject();
                a_obj.Name = "Joe";
                m.DummyDictionary = new Dictionary<string, Objects.TheObject>();
                m.DummyDictionary.Add("VT", a_obj);
                return View(m);
            }

            [HttpPost]
            public ActionResult Index(TheModel model)
            {
                // HERE THE DICTIONARY is EMPTY, where all the form values should exist.
                string test = "";
                return View(model);
            }

        }
    } 
```

## 看法

```
 @model DummyMVC.Models.TheModel

    @{
        ViewBag.Title = "Index";
    }

    <h2>Index</h2>

    @using (Html.BeginForm())
    {
        @Html.HiddenFor(m => m.DummyDictionary);
        @Html.LabelFor(m => m.DummyDictionary["VT"].Name)
        @Html.TextBoxFor(m => m.DummyDictionary["VT"].Value)<br />
        @Html.TextBoxFor(m => m.DummyDictionary["VT"].Token, new { @Value = Model.DummyDictionary["VT"].Token, style = "display:none;" })
        <input type="submit" class="submit_button" /><br />
    } 
```

在视图中，我使用 @Html.HiddenFor(m => m.DummyDictionary) 尝试将字典传递给 post 方法，但字典只是空的。没有这个@Html.HiddenFor，post 方法中的字典为空。

非常感谢您的帮助，我很感激！

**更新**

## 物体

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    namespace DummyMVC.Objects
    {
        public class TheObject
        {
            public string Name { get; set; }
            public string Value { get; set; }
            public string Token { get; set; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:41:16.813

它不漂亮，但它有效。请记住包含 TheObject 的所有属性，如果不可见则隐藏，以便发布它们。为此做一个帮手可能是个好主意。

```
@model MvcApplication1.Models.TheModel

@using (Html.BeginForm())
{
    @Html.LabelFor(m => m.DummyDictionary["VT"].Name)
    @Html.Hidden("DummyDictionary[VT].Name",Model.DummyDictionary["VT"].Name)
    @Html.Hidden("DummyDictionary[VT].Token", Model.DummyDictionary["VT"].Token)
    @Html.TextBox("DummyDictionary[VT].Value", Model.DummyDictionary["VT"].Value)

    <input type="submit" class="submit_button" /><br />
} 
```

控制器

```
 [HttpGet]
    public ActionResult Index()
    {
        TheModel m = new TheModel();
        m.Obj = new TheObject();
        TheObject a_obj = new TheObject();
        a_obj.Name = "Joe";
        m.DummyDictionary = new Dictionary<string, TheObject>();
        m.DummyDictionary.Add("VT", a_obj);
        return View(m);
    }

    [HttpPost]
    public ActionResult Index(TheModel model)
    {
        // HERE THE DICTIONARY is EMPTY, where all the form values should exist.
        string test = "";

        return View(model);
    } 
```

# java - 爪哇。无需缩放即可打印高分辨率图像

> ID：12199615
> 
> 赞同：2
> 
> 时间：2012-08-30T14:48:40.740
> 
> 标签：java, image, printing, resolution

我有一个列表，`java.awt.Image`每个列表的分辨率为 300 DPI。我想打印它们，当我开始打印这些图像（使用[javax.PrintService](http://docs.oracle.com/javase/7/docs/api/javax/print/PrintService.html) API）时，只打印一些图像，因为 Java 的 Print/3D 类默认使用 72DPI（我的图像为 300 DPI）。但是，当我使用 72 DPI 的图像（与 Java 默认分辨率相同）时，所有图像都可以很好地打印（打印整个图像时，不仅仅是其中的一部分）。

问题：我可以在哪里设置图像的打印分辨率以适合打印区域？

我试图设置`PrintRequestAttributeSet.add( new PrinterResolution(300, 300, ResolutionSyntax.DPI))`，但这没有效果。

现在，我缩放图像以适合打印区域，但缩放图像后质量下降，因此打印的文档不可读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T05:23:51.850

您可以使用drawImage（Image img，int dx1，int dy1，int dx2，int dy2，int sx1，int sy1，int sx2，int sy2，ImageObserver观察者）

参数 dx1、dy1、dx2 和 dy2 定义图像必须适合的边界。你需要做一些计算。这应该在该坐标上打印高质量的图像（不按比例缩小）。

```
class MyPrintable implements Printable {
  public int print(Graphics g, PageFormat pf, int pageIndex) {
    if (pageIndex != 0) return NO_SUCH_PAGE;

    Graphics2D g2 = (Graphics2D) g;
    g2.printImage(....);
    return PAGE_EXISTS;
  }
} 
```

然后

```
PrinterJob pj = PrinterJob.getPrinterJob();
...
PageFormat pf = ...;
...
pj.setPrintable(new MyPrintable(), pf); 
```

您仍然需要像以前一样设置分辨率。

# objective-c - 从每个 NSArray 项的描述方法构造 NSString？

> ID：12199619
> 
> 赞同：0
> 
> 时间：2012-08-30T14:48:49.337
> 
> 标签：objective-c, nsstring, nsarray

我有一个`NSArray`，其中每个对象都包含一个名为 Card 的特定类。卡片有一个描述方法。我想使用描述方法的输出连接数组中的所有对象，用空格分隔。是否有一个简单的方法，无需手动迭代`NSArray`和操作`NSString`？

类似于以下虚构代码的东西？

```
NSArray *myArray = getCards(); // fetches 10 items or more
NSString *myString = [myArray joinUsingDescriptionMethodSeparatedBy:@" "]; 
```

或者

```
NSString *myString = [NSString stringFromArrayDescriptionMethods:myArray separatedBy:@" "]; 
```

当然，我可以自己实现这个，但我怀疑可能已经存在一些东西可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:57:09.463

我不认为有这样的方法。您还可以在 NSString 的类别中实现它。

对不起，我发现了这个：

```
NSString * result = [[array valueForKey:@"description"] componentsJoinedByString:@""]; 
```

从文档中：

> 构造并返回一个 NSString 对象，该对象是在数组元素之间插入给定分隔符的结果。

```
- (NSString *)componentsJoinedByString:(NSString *)separator 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:59:04.900

对每个 NSArray 项的描述方法执行此操作：

```
NSMutableString * result = [[NSMutableString alloc] init];
for (NSObject * obj in array)
{
  [result appendString:[NSString stringWithFormat:@" %@"[obj description]]];
}
NSLog(@"The concatenated string is %@", result); 
```

# python - Django - 在单独的页面上加载完整图像

> ID：12199620
> 
> 赞同：1
> 
> 时间：2012-08-30T14:48:52.413
> 
> 标签：python, django

我一直在尝试在我的图像缩略图上放置一个超链接，这会将用户带到一个完整尺寸的图像。但我不断收到错误。

这里如图所示， scribblemedia 是一个 ForeignKey 用于涂鸦

# 模型.py

```
class ScribbleMedia(models.Model):
     media = models.FileField(upload_to=get_file_path)
     def __unicode__(self):
      return self.media
     def find_typecheck(self):
        filename = self.media.name
        try:
           ext = filename.split('.')[-1]
           imgcheck=['jpg','jpeg','png','gif','tiff','bmp']
           if ext in imgcheck :
              chk='image'
           else:
              chk='other'
        except Exception:
           chk='not supported'
        return chk

class Scribble(models.Model):
     title = models.CharField(max_length=120)
     body = models.TextField()
     user = models.ForeignKey(User)
     media = models.ForeignKey(ScribbleMedia)
     def __unicode__(self):
      return u'%s, %s' % (self.user.username, self.media) 
```

# 视图.py

```
@login_required
def image_page(request,pk):
    img=get_object_or_404(ScribbleMedia,pk=pk)
    image=img.media
    variables= RequestContext(request,{
    'image': image
    })
    return render_to_response('image_page.html',variables) 
```

# 网址.py

```
(r"^image/(\d+)/$", image_page), 
```

# image_page.html

```
{% if  image %}
    <img src= {{ image.url }} /> 
```

这是图像缩略图可用的页面

# scribble_page.html

```
{% if scribble.media.media %}
                {% if scribble.media.find_typecheck == 'image' %}
                    {% thumbnail scribble.media.media.url "700x500" crop="center" as im %}
                            <a href="/image/{{ scribble.media.pk }}/" target="_blank"><img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}"></a>
                    {% endthumbnail %}
                {% else %}
                    do something else
                {% endif %}
            {% endif %} 
```

它不断给我以下错误：

/image/2/ 处的 TemplateSyntaxError 未闭合标签“如果”。寻找其中之一：elif、else、endif

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:50:27.033

scribble_page.html 中的 if 语句很好。您需要在 image_page.html 模板中关闭 if 块...

```
{% if  image %}
  <img src="{{ image.url }}" /> <!-- Also note the added quotations... -->
{% endif %}  <!-- This is the line you need to add --> 
```

# objective-c - 无 NSString 方法

> ID：12199624
> 
> 赞同：0
> 
> 时间：2012-08-30T14:49:11.737
> 
> 标签：objective-c, nsstring

我有一个`NSString`存储在核心数据中的。它是可选的，我相信 sqlite db 意味着它可以为空。我有一个方便的方法，我称之为“isEmptyOrWhitespace”，如下所示：

```
- (BOOL)isEmptyOrWhiteSpace {
    return self == nil ||
    self.length == 0 ||
    [self stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]].length == 0;
} 
```

当我的核心数据字符串为零时，它似乎没有调用这个方法，也就是说断点永远不会被命中。这特别烦人，因为像这样的代码块：

```
if(![string isEmptyOrWhitespace]) {
    [string doSomething];
} 
```

`doSomething`如果字符串为零，则正在运行，显然不是我的意图。有没有办法在调用方法之前不检查我的字符串是否为 nil 来解决这个问题？或者这是不是在 nil 对象上运行方法的 Objective-C 的“特性”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:51:27.137

如果`string`是`nil`，则`[string isEmptyOrWhitespace]`什么也不做，因为向其发送消息`nil`是无操作的。

**编辑：**正如@Jim 指出的，这个答案是不正确的。`[nil isEmptyOrWhitespace]`返回`0`，这就是`if ()`if 不执行该块的真正原因`string = nil`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T14:54:12.280

马丁的回答是准确的。您需要的是核心数据实体类上的一种便捷方法来验证该字符串的长度。如果字符串为 nil，则长度为零，您可以知道它是空的还是 nil。

# asp.net - asp:hiddenfield 正在打破我的视图状态

> ID：12199626
> 
> 赞同：1
> 
> 时间：2012-08-30T14:49:14.870
> 
> 标签：asp.net, viewstate

在一个非常大的应用程序中，具有深度嵌套的用户控件（准确地说是共享点应用程序），我有一个 ascx 控件：

```
<asp:HiddenField ID="hdnSelectedLCID" runat="server" /> 
```

在后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    uint uLcid = (uint)Thread.CurrentThread.CurrentUICulture.LCID;
    hdnSelectedLCID.Value = uLcid.ToString();
} 
```

然而，当我渲染我的页面时，我得到了一个模糊的错误：

> 视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

如果我删除隐藏字段，问题就会消失。

有人可以解释我为什么吗？

PS：错误消息总是导致一些众所周知的问题：配置文件中缺少或不一致的加密密钥。在这里，我有一个正确的设置。所以这不是问题的根源。

我发现使问题消失的另一种方法是禁用事件验证（通过在我的 web.config`eventValidation="false"`的`<pages>`节点上添加。但我认为这不是一个好习惯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:58:04.780

我不知道您的问题的确切解决方案，但我想您需要停止使用 asp.net 控件“asp:HiddenField”并尝试使用隐藏类型为 runat 服务器的普通 html 输入。

```
<input type="hidden" id="hdnSelectedLCID" runat="server"/> 
```

然后您可以从后面的代码中访问此控件属性，就像“asp:HiddenField”控件一样。

```
protected void Page_Load(object sender, EventArgs e)
{
    uint uLcid = (uint)Thread.CurrentThread.CurrentUICulture.LCID;
    hdnSelectedLCID.Value = uLcid.ToString();
} 
```

# asp.net - Infragistics - Ultrawebgrid - 添加从另一个表中获取值的下拉列表

> ID：12199627
> 
> 赞同：0
> 
> 时间：2012-08-30T14:49:15.760
> 
> 标签：asp.net, infragistics

我有一个 Ultrawebgrid，我在其中显示两列。单击第二列（其中的任何行）时，我希望出现一个下拉列表，其中包含另一个表中的值。

我们使用的版本是 Infragistics2.WebUI.Misc.v7.3，Version=7.3.20073.38。

我很挣扎，尝试了一切，但它不起作用：

代码是：

```
 Me.ultrawebgrid1.Columns(1).Type = ColumnType.DropDownList
    Me.ultrawebgrid1.Columns(1).ValueList.ValueListItems.Clear()
    Me.ultrawebgrid1.Columns(1).ValueList.DataSource = dsGetEmployees
    Me.ultrawebgrid1.Columns(1).ValueList.DataMember = "EmployeeId"
    Me.ultrawebgrid1.Columns(1).ValueList.DisplayMember = "EmployeeName"
    Me.ultrawebgrid1.Columns(1).ValueList.DataBind()

                 <igtbl:UltraWebGrid ID="ultrawebgrid1" runat="server"
                        DataSourceID="dsGetEmployeeHistory" Height="473px" Width="100%">
                        <Bands>
                            <igtbl:UltraGridBand>
                                <Columns>
                                    <igtbl:UltraGridColumn BaseColumnName="EmployeeId" IsBound="True"
                                        Key="EmployeeId" Width="125px">
                                        <Header Caption="Employee ID">
                                        </Header>
                                    </igtbl:UltraGridColumn>

                                      <igtbl:UltraGridColumn BaseColumnName="EmployeeName"  IsBound="True" Key="EmployeeName" Type="DropDownList" width="250px" >
                                          <Header Caption="Employee Name">
                                                <RowLayoutColumnInfo OriginX="1" />
                                           </Header>
                                           <Footer>
                                                <RowLayoutColumnInfo OriginX="1" />
                                            </Footer>
                                        </igtbl:UltraGridColumn>
                                </Columns>
                                <AddNewRow View="Top" Visible="Yes">
                                </AddNewRow>
                            </igtbl:UltraGridBand> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:07:50.710

我相信您可以在这里关注 Infragistics 论坛主题关于同样的问题：

[http://www.infragistics.com/community/forums/p/73188/370274.aspx#370274](http://www.infragistics.com/community/forums/p/73188/370274.aspx#370274)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:06:24.710

我遇到了同样的问题......

用户不知道单元格数据是可编辑的，并且在您按下一个键之前不会出现下拉列表（这会导致更改值）

经过多次搜索，以及使用模板列的许多主题......我发现了这个小技巧：

我的下拉列表的原始列代码：

```
Me.gs.Columns.Add("ORIGIN", "Origin")
Me.gs.Columns(Me.gs.Columns.Count - 1).BaseColumnName = "Origin.Id"
Me.gs.Columns(Me.gs.Columns.Count - 1).Type = ColumnType.DropDownList
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.Style.TextOverflow = TextOverflow.Ellipsis
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.Style.Font.Name = "Verdana"
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.Style.Font.Size = FontUnit.XXSmall
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.DisplayMember = "FriendlyAddress"
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.ValueMember = "Id"
Me.gs.Columns(Me.gs.Columns.Count - 1).ValueList.DataBind(ShippingRetrieval.GetAllPlants(MP.CacheGet("SESSION")), Nothing, "FriendlyAddress", "Id") 
```

而现在……诀窍……

在添加第一列之前，当我添加一个乐队时：

```
'add columns to grid
Me.gs.Bands(0).Key = "SHIPMENT"
Me.gs.Bands(0).CellClickAction = CellClickAction.Edit '<<<< added this 
```

而不是当我进入单元格或单击它时，下拉菜单对用户可见，他们仍然必须打开下拉菜单，但至少他们知道它在那里

# java - 为什么在集合中添加类型为 a 的子类是非法的？

> ID：12199629
> 
> 赞同：5
> 
> 时间：2012-08-30T14:49:33.343
> 
> 标签：java, generics, wildcard, pecs

鉴于此代码段

```
 //Creates a list of List numbers
    List<List<Number>> num = new ArrayList<List<Number>>();
    //Creates a list of List doubles
    List<List<Double>> doub = new ArrayList<List<Double>>();
    //List of doubles
    List<Double> d = new ArrayList<Double>();
    d.add(2.5);
    d.add(2.6);
    doub.add(d);

    num.add(d);//This code will not compile 
```

为什么不允许 num.add(doub) ？不是`List<List<Number>>`超级类型 `List<List<Double>>`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:51:06.193

[泛型继承](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)与我们对继承的理解差别不大。如果您想使用子类类型，您需要在泛型中使用 extends（或）super来定义边界（[通配符）。](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)

![在此处输入图像描述](../Images/8720aceb873180fa0b41570240ea1ad9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:53:04.820

您正在尝试将列表列表添加到带有列表的列表中。（不是在我看到的编辑之后）

或者可能不那么令人困惑：

```
Your num list can only add List<Number>, you are trying to add a List<List<Double>>. 
```

此外，使用泛型进行继承也不起作用，即使您确实添加了双精度列表，它也不起作用。

如果你这样定义 num ：

```
 List<List<? extends Number>> num = new ArrayList<List<? extends Number>>(); 
```

然后你将能够做到这一点：

```
 num.add(d); 
```

但不是：

```
 num.add(doub); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:53:13.747

`List<Double>``List<Number>`就编译器关心的部分而言，这与它没有任何关系`List<>`。

因此，Java Generics 系统`List<List<Double>>`不继承自`List<List<Number>>`它们是两个完全不同的类型。这不是`extends`构建类时的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:01:21.587

给定声明的类型，`doub.add(d)`并`num.add(doub)`暗示`add()`. 如果`doub.add(d)`有效，我也不希望`num.add(doub)`这样做。

你是不是想测试一下

```
num.add(d) 
```

代替

```
num.add(doub) 
```

?

# bash - 将秒转换为小时、分钟、秒

> ID：12199631
> 
> 赞同：64
> 
> 时间：2012-08-30T14:49:39.100
> 
> 标签：bash

如何将秒转换为小时、分钟和秒？

```
show_time() {
  ?????
}

show_time 36 # 00:00:36
show_time 1036 # 00:17:26
show_time 91925 # 25:32:05 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2015-03-26T01:55:36.020

使用日期，转换为 UTC：

```
$ date -d@36 -u +%H:%M:%S
00:00:36
$ date -d@1036 -u +%H:%M:%S
00:17:16
$ date -d@12345 -u +%H:%M:%S
03:25:45 
```

限制是小时将在 23 处循环，但这对于您想要单线的大多数用例来说并不重要。

在 macOS 上，运行`brew install coreutils`并替换`date`为`gdate`

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-08-30T14:58:24.087

```
#!/bin/sh

convertsecs() {
 ((h=${1}/3600))
 ((m=(${1}%3600)/60))
 ((s=${1}%60))
 printf "%02d:%02d:%02d\n" $h $m $s
}
TIME1="36"
TIME2="1036"
TIME3="91925"

echo $(convertsecs $TIME1)
echo $(convertsecs $TIME2)
echo $(convertsecs $TIME3) 
```

对于浮点秒：

```
convertsecs() {
 h=$(bc <<< "${1}/3600")
 m=$(bc <<< "(${1}%3600)/60")
 s=$(bc <<< "${1}%60")
 printf "%02d:%02d:%05.2f\n" $h $m $s
} 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2015-02-11T09:59:57.547

我知道的最简单的方法：

```
secs=100000
printf '%dh:%dm:%ds\n' $((secs/3600)) $((secs%3600/60)) $((secs%60)) 
```

注意 - 如果您想要天数，只需添加其他单位并除以 86400。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2016-09-12T14:24:02.493

### 简单的单线

```
$ secs=236521
$ printf '%dh:%dm:%ds\n' $((secs/3600)) $((secs%3600/60)) $((secs%60))
65h:42m:1s 
```

### 带前导零

```
$ secs=236521
$ printf '%02dh:%02dm:%02ds\n' $((secs/3600)) $((secs%3600/60)) $((secs%60))
65h:42m:01s 
```

### 随着天

```
$ secs=236521
$ printf '%dd:%dh:%dm:%ds\n' $((secs/86400)) $((secs%86400/3600)) $((secs%3600/60)) \
  $((secs%60))
2d:17h:42m:1s 
```

### 以纳秒

```
$ secs=21218.6474912
$ printf '%02dh:%02dm:%02fs\n' $(echo -e "$secs/3600\n$secs%3600/60\n$secs%60"| bc)
05h:53m:38.647491s 
```

基于[https://stackoverflow.com/a/28451379/188159](https://stackoverflow.com/a/28451379/188159)但编辑被拒绝。

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2012-08-30T14:59:23.843

我自己使用以下功能：

```
function show_time () {
    num=$1
    min=0
    hour=0
    day=0
    if((num>59));then
        ((sec=num%60))
        ((num=num/60))
        if((num>59));then
            ((min=num%60))
            ((num=num/60))
            if((num>23));then
                ((hour=num%24))
                ((day=num/24))
            else
                ((hour=num))
            fi
        else
            ((min=num))
        fi
    else
        ((sec=num))
    fi
    echo "$day"d "$hour"h "$min"m "$sec"s
} 
```

请注意，它也计算天数。此外，它会为您的最后一个号码显示不同的结果。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-08-23T08:31:34.143

对于我们懒惰的人：现成的脚本可在[https://github.com/k0smik0/FaCRI/blob/master/fbcmd/bin/displaytime](https://github.com/k0smik0/FaCRI/blob/master/fbcmd/bin/displaytime)获得：

```
#!/bin/bash

function displaytime {
  local T=$1
  local D=$((T/60/60/24))
  local H=$((T/60/60%24))
  local M=$((T/60%60))
  local S=$((T%60))
  [[ $D > 0 ]] && printf '%d days ' $D
  [[ $H > 0 ]] && printf '%d hours ' $H
  [[ $M > 0 ]] && printf '%d minutes ' $M
  [[ $D > 0 || $H > 0 || $M > 0 ]] && printf 'and '
  printf '%d seconds\n' $S
}

displaytime $1 
```

基本上只是其他解决方案的另一种旋转，但具有抑制空时间单位（fe`10 seconds`而不是`0 hours 0 minutes 10 seconds`）的额外好处。无法完全追踪函数的原始来源，发生在多个 git repos 中。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-02-05T19:02:18.853

使用`dc`：

```
$ echo '12345.678' | dc -e '?1~r60~r60~r[[0]P]szn[:]ndZ2>zn[:]ndZ2>zn[[.]n]sad0=ap'
3:25:45.678 
```

该表达式`?1~r60~r60~rn[:]nn[:]nn[[.]n]sad0=ap`执行以下操作：

```
?   read a line from stdin
1   push one
~   pop two values, divide, push the quotient followed by the remainder
r   reverse the top two values on the stack
60  push sixty
~   pop two values, divide, push the quotient followed by the remainder
r   reverse the top two values on the stack
60  push sixty
~   pop two values, divide, push the quotient followed by the remainder
r   reverse the top two values on the stack
[   interpret everything until the closing ] as a string
  [0]   push the literal string '0' to the stack
  n     pop the top value from the stack and print it with no newline
]   end of string, push the whole thing to the stack
sz  pop the top value (the string above) and store it in register z
n   pop the top value from the stack and print it with no newline
[:] push the literal string ':' to the stack
n   pop the top value from the stack and print it with no newline
d   duplicate the top value on the stack
Z   pop the top value from the stack and push the number of digits it has
2   push two
>z  pop the top two values and executes register z if the original top-of-stack is greater
n   pop the top value from the stack and print it with no newline
[:] push the literal string ':' to the stack
n   pop the top value from the stack and print it with no newline
d   duplicate the top value on the stack
Z   pop the top value from the stack and push the number of digits it has
2   push two
>z  pop the top two values and executes register z if the original top-of-stack is greater
n   pop the top value from the stack and print it with no newline
[   interpret everything until the closing ] as a string
  [.]   push the literal string '.' to the stack
  n     pop the top value from the stack and print it with no newline
]   end of string, push the whole thing to the stack
sa  pop the top value (the string above) and store it in register a
d   duplicate the top value on the stack
0   push zero
=a  pop two values and execute register a if they are equal
p   pop the top value and print it with a newline 
```

每次操作后使用堆栈状态执行的示例：

```
 : <empty stack>
?   : 12345.678
1   : 1, 12345.678
~   : .678, 12345
r   : 12345, .678  # stack is now seconds, fractional seconds
60  : 60, 12345, .678
~   : 45, 205, .678
r   : 205, 45, .678  # stack is now minutes, seconds, fractional seconds
60  : 60, 205, 45, .678
~   : 25, 3, 45, .678
r   : 3, 25, 45, .678  # stack is now hours, minutes, seconds, fractional seconds

[[0]n]  : [0]n, 3, 25, 45, .678
sz  : 3, 25, 45, .678  # '[0]n' stored in register z

n   : 25, 45, .678  # accumulated stdout: '3'
[:] : :, 25, 45, .678
n   : 25, 45, .678  # accumulated stdout: '3:'
d   : 25, 25, 45, .678
Z   : 2, 25, 45, .678
2   : 2, 2, 25, 45, .678
>z  : 25, 45, .678  # not greater, so register z is not executed
n   : 45, .678  # accumulated stdout: '3:25'
[:] : :, 45, .678
n   : 45, .678  # accumulated stdout: '3:25:'
d   : 45, 45, .678
Z   : 2, 45, 45, .678
2   : 2, 2, 45, .678
>z  : 45, .678  # not greater, so register z is not executed
n   : .678  # accumulated stdout: '3:25:45'

[[.]n]  : [.]n, .678
sa  : .678  # '[.]n' stored to register a
d   : .678, .678
0   : 0, .678, .678
=a  : .678  # not equal, so register a not executed
p   : <empty stack>  # accumulated stdout: '3:25:45.678\n' 
```

在 0 小数秒的情况下：

```
 : 3, 25, 45, 0  # starting just before we begin to print

n   : 25, 45, .678  # accumulated stdout: '3'
[:] : :, 25, 45, .678
n   : 25, 45, .678  # accumulated stdout: '3:'
d   : 25, 25, 45, .678
Z   : 2, 25, 45, .678
2   : 2, 2, 25, 45, .678
>z  : 25, 45, .678  # not greater, so register z is not executed
n   : 45, .678  # accumulated stdout: '3:25'
[:] : :, 45, .678
n   : 45, .678  # accumulated stdout: '3:25:'
d   : 45, 45, .678
Z   : 2, 45, 45, .678
2   : 2, 2, 45, .678
>z  : 45, .678  # not greater, so register z is not executed
n   : .678  # accumulated stdout: '3:25:45'

[[.]n]  : [.]n, 0
sa  : 0  # '[.]n' stored to register a
d   : 0, 0
0   : 0, 0, 0
=a  : 0  # equal, so register a executed
  [.] : ., 0
  n   : 0  # accumulated stdout: '3:35:45.'
p   : <empty stack>  # accumulated stdout: '3:25:45.0\n' 
```

如果分钟值小于 10：

```
 : 3, 9, 45, 0  # starting just before we begin to print

n   : 9, 45, .678  # accumulated stdout: '3'
[:] : :, 9, 45, .678
n   : 9, 45, .678  # accumulated stdout: '3:'
d   : 9, 9, 45, .678
Z   : 1, 9, 45, .678
2   : 2, 1, 9, 45, .678
>z  : 9, 45, .678  # greater, so register z is executed
  [0]   : 0, 9, 45, .678
  n     : 9, 45, .678  # accumulated stdout: '3:0' 
n   : 9, .678  # accumulated stdout: '3:09'
# ...and continues as above 
```

**编辑：**这有一个错误，可以打印像 7:7:34.123 这样的字符串。如有必要，我已对其进行了修改以打印前导零。

**编辑 2：**我意识到小数秒的处理是多余的，这个简化`dc`的表达式执行几乎相同的工作：

```
$ echo '12345.678' | dc -e '?60~r60~r[[0]P]szn[:]ndZ2>zn[:]ndZ2>zp'
3:25:45.678
$ echo '12345.0' | dc -e '?60~r60~r[[0]P]szn[:]ndZ2>zn[:]ndZ2>zp'
3:25:45.0
$ echo '12345' | dc -e '?60~r60~r[[0]P]szn[:]ndZ2>zn[:]ndZ2>zp'
3:25:45 
```

这样做的缺点是不同但相同的输入会产生不同的输出；由于 的定点性质，小数点后的任意数量的零都将在输出中逐字回显`dc`。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-09-08T12:46:14.633

以上所有内容都是针对 bash 的，忽略没有任何 bashism 的 "#!/bin/sh" 将是：

```
convertsecs() {
    h=`expr $1 / 3600`
    m=`expr $1  % 3600 / 60`
    s=`expr $1 % 60`
    printf "%02d:%02d:%02d\n" $h $m $s
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-03-26T14:08:46.110

```
t=12345;printf %02d:%02d:%02d\\n $((t/3600)) $((t%3600/60)) $((t%60)) # POSIX
echo 12345|awk '{printf "%02d:%02d:%02d",$0/3600,$0%3600/60,$0%60}' # POSIX awk
date -d @12345 +%T # GNU date
date -r 12345 +%T # OS X's date 
```

如果其他人正在寻找如何做相反的事情：

```
IFS=: read h m s<<<03:25:45;echo $((h*3600+m*60+s)) # POSIX
echo 03:25:45|awk -F: '{print 3600*$1+60*$2+$3}' # POSIX awk 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-04-03T08:09:34.500

使用 OOTB`/bin/date`且*不需要*GNU 版本的MacOS 特定答案`date`：

```
# convert 195 seconds to MM:SS format, i.e. 03:15
/bin/date -ju -f "%s" 195 "+%M:%S"

## OUTPUT: 03:15 
```

如果你也想有几个小时：

```
/bin/date -ju -f "%s" 3600 "+%H:%M:%S"
# OUTPUT: 01:00:00 
```

> ^(注意：如果您想处理小时数，则`-u`需要它，因为它会强制 UTC 时间，如果没有它，除非您居住在 UTC 时区，否则您将得到错误的输出：)

```
-u      Display or set the date in UTC (Coordinated Universal) time. 
```

有关为什么`-u`需要的解释，请参见[this](https://stackoverflow.com/questions/67076919)。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-06-09T14:23:08.697

在一行中：

```
show_time () {

    if [ $1 -lt 86400 ]; then 
        date -d@${1} -u '+%Hh:%Mmn:%Ss';
    else 
        echo "$(($1/86400)) days $(date -d@$(($1%86400)) -u '+%Hh:%Mmn:%Ss')" ;
    fi
} 
```

如果存在，请添加天数。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-09-29T16:56:12.310

我无法让 Vaulter/chepner 的代码正常工作。我认为正确的代码是：

```
convertsecs() {
    h=$(($1/3600))
    m=$((($1/60)%60))
    s=$(($1%60))
    printf "02d:%02d:%02d\n $h $m $s
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-10-27T10:33:00.237

这是旧帖子 ovbioius - 但是，对于那些可能正在寻找实际经过的时间但以军事格式（00:05:15:22 - 而不是 0:5:15:22 ）的人

```
!#/bin/bash
    num=$1
    min=0
    hour=0
    day=0
    if((num>59));then
        ((sec=num%60))
        ((num=num/60))
            if((num>59));then
            ((min=num%60))
            ((num=num/60))
                if((num>23));then
                    ((hour=num%24))
                    ((day=num/24))
                else
                    ((hour=num))
                fi
            else
                ((min=num))
            fi
        else
        ((sec=num))
    fi
    day=`seq -w 00 $day | tail -n 1`
    hour=`seq -w 00 $hour | tail -n 1`
    min=`seq -w 00 $min | tail -n 1`
    sec=`seq -w 00 $sec | tail -n 1`
    printf "$day:$hour:$min:$sec"
 exit 0 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-02-13T08:43:25.560

在**MacOSX 10.13**上对 @eMPee584 的代码进行轻微编辑，以便一次完成所有操作（将函数放在类似 .bashrc 的文件中并将其作为 myuptime 使用。对于非 Mac OS，将 T 公式替换为给出自上次启动以来的秒数。

```
myuptime () 
{ 
    local T=$(($(date +%s)-$(sysctl -n kern.boottime | awk '{print $4}' | sed 's/,//g')));
    local D=$((T/60/60/24));
    local H=$((T/60/60%24));
    local M=$((T/60%60));
    local S=$((T%60));
    printf '%s' "UpTime: ";
    [[ $D > 0 ]] && printf '%d days ' $D;
    [[ $H > 0 ]] && printf '%d hours ' $H;
    [[ $M > 0 ]] && printf '%d minutes ' $M;
    [[ $D > 0 || $H > 0 || $M > 0 ]] && printf '%d seconds\n' $S
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-03-04T14:08:10.927

又一个版本。仅处理完整整数，不填充`0`：

```
format_seconds() {
    local sec tot r

    sec="$1"

    r="$((sec%60))s"
    tot=$((sec%60))

    if [[ "$sec" -gt "$tot" ]]; then
        r="$((sec%3600/60))m:$r"
        let tot+=$((sec%3600))
    fi

    if [[ "$sec" -gt "$tot" ]]; then
        r="$((sec%86400/3600))h:$r"
        let tot+=$((sec%86400))
    fi

    if [[ "$sec" -gt "$tot" ]]; then
        r="$((sec/86400))d:$r"
    fi

    echo "$r"
}

$ format_seconds 59
59s
$ format_seconds 60
1m:0s
$ format_seconds 61
1m:1s
$ format_seconds 3600
1h:0m:0s
$ format_seconds 236521
2d:17h:42m:1s 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-11-16T05:17:57.397

直接通过`awk`：

`echo $(seconds) | awk '{printf "%d:%02d:%02d", $1/3600, ($1/60)%60, $1%60}'`

# git - 下载或还原本地修改的文件

> ID：12199632
> 
> 赞同：1
> 
> 时间：2012-08-30T14:49:41.887
> 
> 标签：git, github

`git pull`我已经修改了一个文件，并希望从我编辑它的服务器获取该文件而不进行修改。如何从服务器下载文件，或恢复文件的初始状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:25:56.047

如果文件只是暂存，您可以这样做来取消暂存文件：

```
git reset HEAD filename 
```

然后丢弃您对其所做的修改：

```
git checkout -- filename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:54:00.433

您可能正在寻找 git stash 命令

# wpf - 无法绑定到 templatedparent 的属性以在 wpf 中的样式设置器内设置值

> ID：12199634
> 
> 赞同：1
> 
> 时间：2012-08-30T14:49:57.993
> 
> 标签：wpf, xaml, binding, styles, relativesource

**我的问题：**

我无法弄清楚我如何在针对特定控件的样式中的*属性 A*的设置器的“ Setter.Value ”字段中可以绑定到该特定控件的*属性 B。*更具体地说，我想在按钮的 Content 属性的可视树内的图形元素上使用 Foreground 画笔值。这将确保图形元素始终具有为此按钮控件设置的前景色。

**我试图达到的目标：**

我正在开发一个 WPF 应用程序，其中有三个按钮控件：

1.  默认按钮
2.  特殊按钮
3.  扩展特殊按钮

*DefaultButton*是我通过带有 ControlTemplate 的样式定义应用程序中按钮样式的地方。

*SpecialButton*引入了一个不应该用于一般按钮的新属性。此属性将由我通过样式设置器定义的一种视觉状态表示。除此之外，它在外观上应与 DefaultButton 相同。

我根据 DefaultButton 的样式定义了这个 SpecialButton 的样式。在这种风格中，没有 ControlTemplate，只有一个 MultiTrigger 响应，基于几个属性条件设置 av 几个视觉属性：

```
<Style x:Key="SpecialButtonStyle" TargetType="{x:Type MyControls:SpecialButton}" BasedOn="{StaticResource DefaultButtonStyle}">
    <Style.Triggers>
        <MultiTrigger>
            <MultiTrigger.Conditions>
                <Condition Property="IsActive" Value="false"/>
                <Condition Property="IsMouseOver" Value="false"/>
            </MultiTrigger.Conditions>
            <Setter Property="BorderBrush" Value="{DynamicResource ButtonDisabledBorder}" />
            <Setter Property="Background" Value="{DynamicResource ButtonDisabledBg}" />
        </MultiTrigger>
    </Style.Triggers>
</Style> 
```

这一切都很好。

下一步也没有问题：我想将*ExtendedSpecialButton*建立在*SpecialButton*的基础上，并在按钮内部设置一个默认的形状内容。

```
<Style x:Key="ExtendedSpecialButtonStyle" TargetType="{x:Type MyControls:ExtendedSpecialButton}" BasedOn="{StaticResource SpecialButtonStyle}">
    <Setter Property="Content">
        <Setter.Value>
            <Rectangle Fill="Black" Height="5" Width="15"></Rectangle>
        </Setter.Value>
    </Setter>
</Style> 
```

DefaultButton 的原始样式仍然存在 - 响应 SpecialButton 的 IsActiveProperty 添加的视觉状态仍然存在 - ExtendedSpecialButton 也继承了 SpecialButton 的*MultiTrigger*创建的视觉行为。

我还成功显示了此 ExtendedSpecialButton 应具有的图形元素。

但是我希望这个图形元素的填充使用前景色。这种前景色最初是在 DefaultButton 中设置的，并且适用于前两个按钮。

下面的代码是我目前认为应该如何进行这样的绑定。但这不起作用：

```
 <Style x:Key="ExtendedSpecialButtonStyle" TargetType="{x:Type MyControls:ExtendedSpecialButton}" BasedOn="{StaticResource SpecialButtonStyle}">
    <Setter Property="Content">
        <Setter.Value>
            <Rectangle Fill="{Binding RelativeSource={RelativeSource TemplatedParent}}" Height="6" Width="20"></Rectangle>
        </Setter.Value>
    </Setter>
</Style> 
```

有谁知道我可以做些什么来设置绑定，以便它完成我想要做的事情？

# c# - 更改 mvc3 中的 c# 删除功能以确保安全

> ID：12199640
> 
> 赞同：0
> 
> 时间：2012-08-30T14:50:19.357
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012, crud, entity-framework-mapping

我在 CMS 中有一个基本的 CRUD，使用 EF 并且首先使用数据库完成，删除功能只是从数据库中删除记录。

以下是删除的控制器代码：

```
 public ActionResult Delete(int id)
    {
        Database_Table database_table = db.Database_Table.Find(id);
        return View(database_table);
    }

    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {            
        Database_Table database_table = db.Database_Table.Find(id);
        db.Database_Table.Remove(database_table);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

现在从客户的角度来看，出于安全原因，我不想实际从数据库表中删除条目，我只想更改数据库中的一个值，即“已删除，从“N”到“Y”，然后我将隐藏它，则不会通过自定义查询显示值为“Y”的条目。如果这是有道理的。我的问题是如何更改此代码以不删除，而只是更改该值。

我觉得它看起来像：

```
[HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        if (ModelState.IsValid)
        {

        Database_Name database_name = db.Database_Name.Find(id);
        db.Entry(database_name).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
        }
            return View(database_table);
    } 
```

但我不确定在哪里定义它只有一个将被修改的值，在这种情况下是“已删除”值。也许还说它应该只返回视图一个值为“N”的条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:55:00.853

这应该是[条件映射](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/06/15/using-conditional-mapping-in-entity-framework.aspx)的一个用例。条件映射将自动从所有查询中过滤您已删除的项目：

*   您的 Linq 查询
*   渴望加载
*   延迟加载

没有其他可靠的方法可以从预先加载和延迟加载的数据中过滤软删除记录。

但是条件映射也有它的缺点：

*   `Deleted`属性不能是实体的一部分，因为它已用于条件映射（您将永远无法使用此模型查询已删除的记录）
*   删除操作必须[映射到存储过程](http://msdn.microsoft.com/en-us/data/gg699321.aspx)（或自定义 SQL，但需要在 EDMX 中手动更改），这将为您执行软删除，因为您无权访问`Deleted`代码中的属性
*   要使其功能齐全，您需要使用 EDMX，因为 code first 尚不支持存储过程映射

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:11:01.277

试试这个代码。我建议您将此类代码移动到不同层中的方法（您可以创建一个新类以在其中拥有此方法并从您的控制器操作/任何您想要的地方调用它。

```
Database_Name database_name = db.Database_Name.Find(id);

database_name.Deleted="Y";
db.Database_Name.Attach(database_name);
db.Entry(database_name).State = EntityState.Modified;
try
{        
   db.SaveChanges();
}
catch (DbUpdateConcurrencyException ex)
{
    ex.Entries.Single().Reload();
    context.SaveChanges();        
}
catch (Exception ex2)
{
    //some error. Log it 
} 
```

# python - excel列中数字更改的次数

> ID：12199643
> 
> 赞同：2
> 
> 时间：2012-08-30T14:50:25.510
> 
> 标签：python, excel, list

我刚开始学习 Python，需要帮助分析 Excel 电子表格中的数据。excel表在一列中有即111122221112211，我试图弄清楚这里发生了多少从1到2或2到1的变化。在这种情况下，4 次。

我被告知要使用 set.difference 但我不明白如何使用。所以我尝试了自己的方法，并在 elif 部分得到错误“列表索引超出范围”。这是我的脚本（我仍在研究基础知识，所以这看起来很业余）：

```
a = xlws.Columns(5).value
a = [list(x)[0] for x in a[1:400]]

beam = 0

for x in range(len(a)):
    if a[x] ==1 and a[x+1]==2:
        beam += 1
    elif  a[x]==2 and a[x+1]==1:
        beam += 1
    else: 
        beam = beam 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:57:31.637

该行`for x in range(len(a)):`应该是

```
for x in range(len(a)-1): 
```

因为您在循环内获得了一个带有索引的列表元素，`x+1`因此您阅读了一个元素太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:57:41.130

另一种计算方法是使用[`izip`](http://docs.python.org/library/itertools.html#itertools.izip)：

```
>>> from itertools import izip
>>> s = [1,1,1,1,2,2,2,2,1,1,1,2,2,2,1,1]
>>> answer = len(filter(lambda x: x[0] != x[1], izip(s, s[1:])))
>>> answer
4 
```

上面的方法是：使用`s`和 除了第一个元素 ( `s[1:]`) 之外的所有元素，并使用`izip`. 这将创建一个列表，例如`[(1, 1), (1, 1), ..., (1, 2)]`. 然后，我们只使用具有两个不同值（例如`(1, 2)`）的元素[`filter()`](http://docs.python.org/library/functions.html#filter)。

具有不同值的元素的数量是您问题的答案，我们通过计算列表的长度（使用`len()`）来计算。

# c# - 如何获得日期的差异

> ID：12199644
> 
> 赞同：4
> 
> 时间：2012-08-30T14:50:24.247
> 
> 标签：c#, datetime

我想知道如何在**完整**的小时内获得两个日期之间的差异

例如

```
DateTime date1 = DateTime.Now;
DateTime date2 = new DateTime(2011, 8, 5, 33,00); 
long hours = date1 - date2; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T14:51:41.877

对 long/int 的强制转换将为您提供完整的时间。

```
TimeSpan span = date1.Subtract(date2);
long hours = (long)span.TotalHours; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T14:51:48.687

```
var hours = (date1 - date2).TotalHours; 
```

或者，如果您不想要一个小时的一小部分：

```
var hours = Math.Floor((date1 - date2).TotalHours); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T14:51:43.170

您可以[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)通过减去两个日期来使用：

```
DateTime date1 = DateTime.Now;
DateTime date2 = new DateTime(2011, 8, 5); 
TimeSpan ts = date1 - date2;
long hours = (long)ts.TotalHours; 
```

如果你想尽可能准确地四舍五入，你可以使用[`Math.Round`](http://msdn.microsoft.com/en-us/library/ef48waz8%28v=vs.100%29)：

```
long hours = (long)Math.Round(ts.TotalHours, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:52:26.617

你可以试试

```
 var result = date1 - date2;
    var hours = result .TotalHours; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T14:53:42.077

我发现了一个非常好的**[DateTimeSpan](https://stackoverflow.com/a/9216404/444149)**实现，我用它来计算[这篇文章中的各种差异、小时、天、月](https://stackoverflow.com/questions/4638993/difference-in-months-between-two-dates)

# php - .htaccess 重定向不起作用

> ID：12199646
> 
> 赞同：1
> 
> 时间：2012-08-30T14:50:26.943
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我的 .htaccess 文件中有以下规则

```
RewriteEngine On
#1\. home page redirection
RewriteRule ^$ php/home.php [QSA,L]                                        

#2\. Detect Non valid files (for menus)
RewriteCond %{REQUEST_FILENAME} !-f

#3\. append php/query.php                                                   
RewriteRule ^(.*)$ php/$1.php [QSA,L] 
```

**更新：问题是我在 wp 目录中没有 .htaccess 。**

这工作正常，但我最近在我的网站的一个名为 wp 的子文件夹中安装了 wordpress。在我的 blog.php 中列出 wordpress 帖子效果很好。

用户通过这个 url 访问博客网页`http://mysite/blog` 然后`rule #2`被执行。

问题是在访问 wordpress 文章和管理门户时也会触发规则 #2 和 #3。在这种情况下如何防止这种情况发生，我需要访问以下 URL。

> 内部服务器错误

`http://mysite/wp/wp-admin`

> 内部服务器错误

`http://mysite/wp/some-article`

**文件夹结构**

```
|-mysite
  |- css
  |- .htaccess
  |- wordpress
    |- wp
    |- wp-admin
  |- php
    |- index.php
    |- blog.php
  |- js 
```

非常感谢任何帮助/建议。

谢谢

**更新：现在一切正常 - 这是我的 .htaccess 文件**

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^$ php/home.php [QSA,L]                                                                                                                 
#WP articles
RewriteRule ^blog/([A-Za-z0-9-]+)/?$ wp/$1 [QSA,L]

#WP archives                     
RewriteRule ^blog/([0-9]{4}/[0-9]{2})/?$ wp/$1 [QSA,L]

#WP search                                       
RewriteCond %{QUERY_STRING} ^s=(.*)$
RewriteRule . wp/$/%1? [QSA,L]

#WP categories                
RewriteRule ^blog/category/([A-Za-z0-9-]+)/?$ wp/$1 [QSA,L]

#WP tags
RewriteRule ^blog/tag/([A-Za-z0-9-]+)/?$ wp/$1 [QSA,L]

#WP authors
#Insert authors redirect

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ php/$1.php [QSA,L]
</IfModule> 
```

**我在访问我的博客页面时也遇到了 404 错误 - 这是由包含 wp-blog-header.php 文件引起的，解决方案是在我的 blog.php 中插入以下代码并删除** `include('wp/wp-blog-header.php)`

```
<?php
   require('./wp-config.php');
   $wp->init();
   $wp->parse_request();
   $wp->query_posts();
   $wp->register_globals();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:10:13.950

首先，#2 不是规则，它是执行以下规则（#3）的条件。

要解决您的问题，有多种解决方案，例如，您可以添加一个条件以不重定向任何以 wp/ 开头的内容：

```
RewriteEngine On

RewriteRule ^$ php/home.php [QSA,L]                                        

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/?wp/
RewriteRule ^(.*)$ php/$1.php [QSA,L] 
```

# java - 在 Swing 中操作 JPanel

> ID：12199649
> 
> 赞同：1
> 
> 时间：2012-08-30T14:50:32.230
> 
> 标签：java, swing, graph, jpanel

我正在开发一个将 XML 文件转换为动态图的应用程序，因此我创建了一个扩展 JPanel 以排列节点的类（circarnode.java），并创建了一个扩展 JPanel 以添加箭头的类（arrow.java），但在显示时箭头，它们总是在节点后面。circlenode.java 的背景隐藏了它们。

如何在另一个 JPanel 上显示 JPanel，或控制出现的顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:54:30.463

考虑从 JPanel 中提取用于直接绘制箭头和节点的代码。也许您可以创建一个知道如何绘制自己的 Arrow 和 Node 类，例如具有`public void paint(Graphics g)`方法的类。

然后，您可以为您的 JPanel 类创建一个`ArrayList<Arrow>`和字段，并通过遍历 List 并调用从 JVM 获得的 Graphics 上下文中传递的每个项目的方法，`ArrayList<Node>`在 JPanel 的方法中绘制两者。`paintComponent(...)``paint(...)`

否则，如果您绝对需要在单独的 JPanel 中绘制这些，一个在另一个之上，请确保顶部的 JPanel 不是不透明的 via `setOpaque(false)`，这样它的背景就不会被绘制，并且您可以看穿它。

如需更具体的帮助，请考虑告诉我们更多关于您的问题、您当前的代码，甚至发布您的一些代码，最好以[SSCCE](http://sscce.org)的形式（请参阅描述这个*非常*有用的结构的链接）。

顺便说一句，欢迎来到 stackoverflow.com！

# android - removeFooterView 没有删除页脚视图

> ID：12199654
> 
> 赞同：1
> 
> 时间：2012-08-30T14:51:03.057
> 
> 标签：android, android-listview

这是我的代码块

```
if (!allFilesAreFolders || itemsInCurrentFolder.length == 0 ) 
            lv.addFooterView(v);
        else lv.removeFooterView(v);

        fileList = new MySimpleArrayAdapter(getActivity(), item, path);
        setListAdapter(fileList); 
```

我的页脚在需要时成功添加，但在`lv.removeFooterView(v);`- 页脚仍然存在之后没有任何反应。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:46:24.243

所以基本上它是两部分的总和：

1.  使用 View.setVisibility() - 由[forvegod推荐](https://stackoverflow.com/users/794088/forgivegod)

2.  不删除页脚，而是检查是否有一个使用`ListView.getFooterViewsCount()`

# c++ - 函数内部的“外部”？

> ID：12199656
> 
> 赞同：23
> 
> 时间：2012-08-30T14:51:03.883
> 
> 标签：c++, c, global-variables, extern, kernighan-and-ritchie

好吧，阅读“有点老”的书（Dennis Ritchie 的“The C programming language”，第二版），我遇到了以下问题：

> 外部变量必须在任何函数之外只定义一次；这为其预留了存储空间。该变量还必须在每个想要访问它的函数中声明

我当时想 -*什么？！*

“还必须在要访问它的每个函数中声明该变量”。然后，我又震惊了一次：

```
int max; 
/* ... */
int main()
{
    extern int max;
    /* ... */
} 
```

还有一个——*什么？！*

* * *

据我所知（显然，这还远远不够），`extern`只有当您在某处定义一个全局变量并且您想通过另一个文件访问它（而不是再次定义它）时才有意义。

所以：

*   this或任何其他函数`extern int max` *内部*的意义何在？`main`
*   标准是否*真的*说，这是*必须*的（对于这个例子，我需要在每个函数中声明这个*最大值*，它将使用它？）
*   这对于 C++ 是否相同（这就是我放置 C++ 标签的原因）？这是我第一次看到这样的事情。

注意：这与[在函数内部将静态变量声明为 extern 有什么用处不同？](https://stackoverflow.com/questions/9686198/what-is-the-use-of-declaring-a-static-variable-as-extern-inside-a-function)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T15:43:37.877

你的帖子让我吃惊。我不记得了，我很久以前就读过 K&R。我这里只有第一版，它也在那里。然而，这并不是它所说的全部。从第一版开始：

> 该变量还必须在每个想要访问它的函数中声明；这可以通过显式的外部声明或通过上下文隐式完成。

注意“隐含的上下文”。正文后面：

> ...如果变量的外部定义在源文件中出现在特定函数中之前，则不需要在函数中进行 extern 声明。main, ... 中的 extern 声明因此是多余的。实际上，通常的做法是将所有外部变量的定义放在源文件的开头，然后省略所有的 extern 声明。

所以这就是说，使 extern 变量可见可以在该函数内部完成，或者可以在任何函数之外为源文件中跟随它的所有函数完成。我相信这是本书中唯一在函数内部完成的地方，后来它使用了熟悉的一次文件方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T15:18:32.880

`extern int max`inside `main`or function 对编译器说*“我不是 main 或函数内部的局部变量，我是在别处定义的全局变量”*。

如果全局在同一个文件中声明，则没有用。在不同的文件中，是的，但不是在每个函数中，只需在使用此全局变量的源头文件中声明一次。这在`c++`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T15:06:42.437

`extern`是*联动*。_ 这意味着此名称 ,`max`链接到该名称的其他出现，可能在其他文件中。（也就是说，当对象模块链接在一起以生成可执行文件时，所有对该名称的链接引用都将指向同一个对象。）

此声明的*范围*是它所在的函数体的其余部分。这意味着此文件中的其他函数看不到此声明所声明的名称（除非它们自己声明）。

范围和链接是不同的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T11:36:49.627

函数内部的另一个可能原因`extern`是确保没有局部变量[隐藏](https://en.wikipedia.org/wiki/Variable_shadowing)全局变量

没有`extern`：

```
int max = 33;
int main()
{
    int max; 
    printf("%d", max); // prints indeterminate value (garbage)
} 
```

和`extern`

```
int main()
{
    extern int max; 
    int max;
    printf("%d", max);
} 
```

输出：

> 错误：重新声明没有链接的“max”

# java - 日志分析：按时差查找行

> ID：12199663
> 
> 赞同：6
> 
> 时间：2012-08-30T14:51:18.710
> 
> 标签：java, multithreading, logging, log-analysis, otroslogviewer

我有一个很长的日志文件，用`log4j`, 10`threads`写入日志。我正在寻找可以找到用户等待很长时间的行的日志分析器工具（即同一线程的日志条目之间的差异超过一分钟）。

PS我正在尝试使用`OtrosLogViewer`，但它通过某些值（例如，通过线程ID）进行过滤，并且不会在行之间进行比较。

PPS 新版本的 OtrosLogViewer 有一个“Delta”列，用于计算 adj 日志行之间的差异（以 ms 为单位）

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T21:18:03.753

这个简单的 Python 脚本可能就足够了。为了测试，我分析了我的本地 Apache 日志，顺便说一句，它使用[通用日志格式](http://en.wikipedia.org/wiki/Common_Log_Format)，因此您甚至可以按原样重用它。我只是计算两个后续请求之间的差异，并打印超过某个阈值（在我的测试中为 1 秒）的增量的请求行。您可能希望将代码封装在一个函数中，该函数也接受带有线程 ID 的参数，因此您可以进一步过滤

```
#!/usr/bin/env python
import re
from datetime import datetime

THRESHOLD = 1

last = None
for line in open("/var/log/apache2/access.log"):
    # You may insert here something like
    # if not re.match(THREAD_ID, line):
    #   continue
    # Python does not support %z, hence the [:-6]
    current = datetime.strptime(
        re.search(r"\[([^]]+)]", line).group(1)[:-6],
        "%d/%b/%Y:%H:%M:%S")
    if last != None and (current - last).seconds > THRESHOLD:
        print re.search('"([^"]+)"', line).group(1)
    last = current 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-01T11:07:14.893

根据@Raffaele 的回答，我对任何日志文件进行了一些修复（跳过不以请求日期开头的行，例如 Jenkins 控制台日志）。此外，添加了 Max / Min Threshold 以根据持续时间限制过滤掉行。

```
#!/usr/bin/env python
import re
from datetime import datetime

MIN_THRESHOLD = 80
MAX_THRESHOLD = 100

regCompile = r"\w+\s+(\d\d\d\d-\d\d-\d\d \d\d:\d\d:\d\d).*"
filePath = "C:/Users/user/Desktop/temp/jenkins.log"

lastTime = None
lastLine = ""

with open(filePath, 'r') as f:
    for line in f:   
        regexp = re.search(regCompile, line)
        if regexp:
            currentTime = datetime.strptime(re.search(regCompile, line).group(1), "%Y-%m-%d %H:%M:%S")

            if lastTime != None:
                duration = (currentTime - lastTime).seconds
                if duration >= MIN_THRESHOLD and duration <= MAX_THRESHOLD:
                    print ("#######################################################################################################################################")
                    print (lastLine)
                    print (line)
            lastTime = currentTime
            lastLine = line
f.closed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T16:08:51.713

[Apache Chainsaw](https://logging.apache.org/chainsaw/2.x/)有一个时间增量列。

[![在此处输入图像描述](../Images/0dfe0dd3f60ff9bdde14f4c629e7a0fd.png)](https://i.stack.imgur.com/qkmjn.png)

# xcode - UITableView 不显示白色单元格

> ID：12199665
> 
> 赞同：1
> 
> 时间：2012-08-30T14:51:21.620
> 
> 标签：xcode, uitableview

图片 1 白色单元格的显示方式与图片 2 中的显示方式不同。

![在此处输入图像描述](../Images/73ef6ccd839252425da6ecb29e03582c.png)

![在此处输入图像描述](../Images/13c49b870af184cb61d9d65f5cd63bf6.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:59:34.837

在第一张图片中，您的`UITableView`样式是`UITableViewStylePlain`，您应该将其初始化`UITableViewStyleGrouped`为看起来像第二张图片中的表格视图

如果你有一个`xib`，你应该在`xib`. 如果您通过代码创建它，只需在初始化行中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:15:30.183

你如何设置你的 tableView 的背景图像？看来您正在将单元格的背景设置为 tableView 背景。

在`cellForRowAtIndexPath`你必须设置`cell`与你的 tableView 使用相同的背景。

```
cell.backgroundView = [[UIImageView alloc] initWithImage:image]; 
```

或者

```
cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"image.png"]]; 
```

所以删除设置单元格背景的行，它应该完成任务。希望能帮助到你。快乐编码:)

# c# - 在 C# 中，按字符串属性对对象列表进行排序并获得正确顺序的最佳方法是什么？

> ID：12199668
> 
> 赞同：1
> 
> 时间：2012-08-30T14:51:23.653
> 
> 标签：c#, linq, collections

我有一个“问题”对象列表，我想按“优先级”字段对它们进行排序。

问题是“优先级”是一个字符串名称，如“HIGH”、“MEDIUM”，所以我没有可以排序的 ID。如何排序并告诉分拣机“HIGH”高于“MEDIUM”，而“MEDIUM”又高于“LOW”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T14:56:29.063

显而易见的方法是：

```
string[] priorities = {  "LOW", "MEDIUM", "HIGH" };

var orderedIssues = issues.OrderByDescending
              (issue => Array.IndexOf(priorities, issue.Priority)); 
```

但考虑使用枚举：

```
public enum Priority
{
    Low,
    Medium,
    High
}

var orderedIssues = issues.OrderByDescending
              (issue => (Priority)Enum.Parse(typeof(Priority), issue.Priority, true)); 
```

更好的是使用枚举类型作为属性/字段本身的类型，在这种情况下它很简单（并且不太容易出错）：

```
var orderedIssues = issues.OrderByDescending(issue => issue.Priority); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:02:31.640

在这种特定情况下，您也可以使用 Linq 的`OrderBy`方法：

```
var sortedList = issueList.OrderBy(i=>
                    i.Priority == "HIGH" 
                       ? 1 
                       : i.Priority == "MEDIUM" 
                          ? 2 
                          : 3).ToList(); 
```

作为一个单线，这不会太糟糕。您还可以按照您希望它们排序的顺序将字符串放入数组、列表或字典中（或者在字典的情况下包含排序顺序作为值）。

使用 OrderBy 的一个缺点是它不会影响源列表，除非您通过将列表重新分配给结果来告诉它。在所有情况下，它将创建两个额外的集合；OrderBy 内部使用的数组或列表（排序必须了解它们正在排序的整个集合）和由 ToList() 生成的列表。因此，这将需要 O(2N) 额外的内存，而 List.Sort() 可能是就地的（不确定它是否真的是，但它确实使用了通常就地的 QuickSort）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:56:50.937

最简单的方法可能是：

```
private static int MapPriority(string priority)
{
  switch(priority.ToUpperInvariant())//skip the case bit if safe
  {
    case "HIGH":
      return 1;
    case "MEDIUM":
      return 2;
    case "LOW":
      return 3;
    default:
      return 4;
  }
}

var sorted = someCollection.OrderBy(i => MapPriority(i.PriorityProperty)); 
```

使用 db 支持的表单，您需要在 DB 中调用一个函数。这仅在内存中。

有很多可能的值，我会根据字典而不是手动编码。不过，在这种情况下，我会为三个手动编码（除非使用的值可能会改变，否则会进一步复杂化，使基于字典的方法成为唯一的方法）。

如果对大量此类项目进行排序，或者经常调用它，我会选择`IComparer<T>`实现，或者让项目本身实现`IComparable<T>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T14:58:29.670

```
public enum Priority
{
    LOW = 1,
    MEDIUM = 2,
    HIGH = 3
}

issues.OrderByDescending(issue=>issue.Priority); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:57:11.897

像这样的东西：

```
List<Issue> issues = ...;

var result = issues.OrderBy(x=> x.Priority=="HIGH"?1:x.Priority=="MEDIUM"?2:3); 
```

# colors - 选择 JavaFX TableCell 颜色时如何更改它？

> ID：12199673
> 
> 赞同：3
> 
> 时间：2012-08-30T14:51:35.687
> 
> 标签：colors, javafx, selected, tablecell

好吧，我为我的 TableView 创建了一个自定义 TableCell。此自定义 TableCell 包含一个链接并在单击时打开浏览器。一切正常，我想要做的是在选择此 TableCell 时更改它的文本颜色......这就是我想要做的：

```
 callback = new Callback<TableColumn, TableCell>(){
        @Override
        public TableCell call(TableColumn param) {
            return new TableCell<Test, String>(){
                EventHandler handler = new EventHandler<MouseEvent>() {
                    final AM_RSS_FX RSS = AM_RSS_FX.this;
                    @Override
                    public void handle(MouseEvent param) {
                        try {
                            java.awt.Desktop.getDesktop().browse(new URI(RSS.link));
                        } catch (IOException | URISyntaxException ex) {
                            Logger.getLogger(AM_RSS_FX.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                };
                @Override
                public void updateItem(String item, boolean empty){
                    super.updateItem(item, empty);
                    if(!isEmpty()){
                        final AM_RSS_FX RSS = AM_RSS_FX.this;
                        this.setTextFill(Color.BLUE);
                        setText(item);
                        RSS.link = this.getText();
                        this.addEventHandler(MouseEvent.MOUSE_CLICKED, handler);
                    }
                }

                @Override
                public void updateSelected(boolean arg0){
                    super.updateSelected(arg0);
                    if(isSelected()){
                        this.setTextFill(Color.AQUA);
                    }
                }

            };
        }
    }; 
```

我不知道我需要覆盖哪种方法 =/ 我试图覆盖 updateSelected，但没有奏效 =/

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:23:22.690

1-您在`TableCell`实例上添加鼠标事件处理程序，当您单击它时该事件正在触发。但是，表格单元格仍未被选中。相反，正在触发表格**行单元格选择。**要启用单元格选择，请执行以下操作：

```
table.getSelectionModel().setCellSelectionEnabled(true); 
```

2-无需重写`updateSelected()`来管理样式，而是使用 caspian.css 中的 CSS 选择器：

```
.table-cell:selected {
    -fx-background-color: lightgreen;
    -fx-text-fill: green;
} 
```

# .net - 在 Host 进程中调用 WCF 服务

> ID：12199677
> 
> 赞同：1
> 
> 时间：2012-08-30T14:51:47.367
> 
> 标签：.net, wcf, web-services

我有一个关于调用使用 WCF 服务的架构问题。

目前，我的 WCF 服务包含 2 个函数 SubmitJob 和 ProcessQueueJobs

1.  SubmitJob 将作业放入单个队列中，这可以由许多客户端调用
2.  ProcessQueueJobs 将处理队列中的所有作业，我不想在这个方法上有一个服务合同，我不希望 SubmitJob 调用 ProcessQueueJobs

因此，对我来说，调用 ProcessQueueJobs 的最简单方法是拥有一个服务合同，并通过一个简单的控制台应用程序进行扭曲，并安排每隔几分钟运行一次。我不太喜欢这个解决方案，因为我不想将 ProcessQueueJob 暴露给客户端。那么在托管 WCF 服务的进程中运行 ProcessQueueJobs 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:04:00.040

我有一个 WCF 接口使用的控制器类（我有 SOAP 和 REST 接口）。

因此，当有人打电话时，`SubmitJob`我会将其传递给控制器​​。

在控制器功能中，它将把它保存到队列中。

现在，在我的项目中，我有一个在此类中定义的队列：

```
public static class WebServiceControllerStatic
{
   static ConcurrentQueue<WebServiceModels.Job> jobqueue = new ConcurrentQueue<WebServiceModels.Job>(); 
```

然后我有这两种方法，一种将信息放入队列，然后另一种启动线程来处理队列。

```
 public static WebServiceModels.Job[] JobQueue
    {
        set
        {
            value.AsParallel().ForAll(i => jobqueue.Enqueue(i));
        }
    }
    public static void ProcessUpdateJobQueue()
    {
        Action UpdateJob = () =>
        {
            if (jobqueue.IsEmpty)
                return;
            int cnt = 0;
            Parallel.For(0, jobqueue.Count, new ParallelOptions() { MaxDegreeOfParallelism = 20 },
                (j) =>
                {
                    cnt++;
                });
        };
        if (processUpdateJobThread == null)
        {
            processUpdateJobThread = new System.Threading.Thread(() =>
            {
                while (true)
                {
                    UpdateJob();
                    UpdateJob();
                    System.Threading.Thread.Sleep(10000);
                }
            });
            processUpdateJobThread.Start();
        }
    } 
```

在我的控制器方法中，每当在您的情况下进行 SubmitJob 调用时，我都会调用它：

```
WebServiceControllerStatic.JobQueue = jobs;
WebServiceControllerStatic.ProcessUpdateJobQueue(); 
```

所以，我有一个队列来保存需要处理的内容，还有一个线程每隔一段时间就会启动以处理队列中的任何内容。

这很适合我的需要。

我使用 ConcurrentQueue 主要是因为我将同时更新和从队列中删除。

# c++ - C++ 共享所以库在运行时更改

> ID：12199678
> 
> 赞同：3
> 
> 时间：2012-08-30T14:51:48.047
> 
> 标签：c++, shared-libraries

我有一个要与共享库一起使用的程序。

我有一个**库（1）**，它是用充满代码的方法编译的，即

```
class A
{
public:
    int* funcA(int a, int b)
    {
        int* pInt = new int;
        *pInt = a + (b * 20);
        return pInt;
    }
}; 
```

然后我有另一个**库（2） ，****名称和接口**完全相同，方法中没有任何内容，即虚拟类

```
class A
{
public:
    int* funcA(int a, int b)
    {
        return 0;
    }
}; 
```

（注意：代码只是用来说明我的问题）

**如果我针对库 1**进行编译，然后在运行时使用**库 1** ，那么一切都会按预期工作。

如果我针对**库 2**进行编译，然后在运行时使用**库 1**，则第一次调用 funcA 会死掉。

如果我使用 nm -D libMy.so 并在运行时查看 funcA 的偏移量，情况会有所不同。这是否包含在二进制文件中？

我已经阅读了各种手册和教程，但对于编译和运行时方面如何导致此故障一无所知。我会认为接口是相同的，所以方法会成功。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:22:42.457

失败的原因是您已链接到不同的库，因此（如您所见）函数偏移量不同。链接器已将偏移量放入已编译的二进制文件中，因此它只会针对该库运行。为了完成您在此处尝试的操作，您将需要使用动态库加载，请参阅[此](https://stackoverflow.com/q/496664/416574) SO 问题以获取更多信息。

编辑：
通过进一步阅读，我发现了这个[PDF](http://www.akkadia.org/drepper/dsohowto.pdf)，您可能会发现它很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:03:38.963

（我没有足够的代表在您的问题下方发表评论）

这可能是因为程序是预链接的 (Linux) 或预绑定的 (MacOS)，尽管我不确定 100%。下面的维基百科上有一些关于它的基本信息。您在通过手册进行搜索时遇到过这种情况吗？

[http://en.wikipedia.org/wiki/Prelink](http://en.wikipedia.org/wiki/Prelink)

[http://en.wikipedia.org/wiki/Prebinding](http://en.wikipedia.org/wiki/Prebinding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T05:57:00.543

您在编译库时是否忘记了 -fPIC 选项？请添加编译命令。

# python - TypeError：“NoneType”对象不可迭代

> ID：12199684
> 
> 赞同：0
> 
> 时间：2012-08-30T14:52:14.323
> 
> 标签：python, recursion, typeerror, nonetype

我有一个函数“checkAllInOneDirection”，它是一个递归循环。当我跳出循环时，函数返回 1 个数组和 3 个布尔值。最奇怪的是，在递归函数中，当它返回时，它显示所有这些都有值，但我仍然收到“无类型”错误：

这是打印：

```
Before return : [[0, 0]] False False False False 
```

但是当它返回并且在它异常出来之前，返回的值变成了

```
 After returned : [[0, 0]] True True True True 
```

虽然递归的返回值发生了变化和错误，但仍有一些价值，但我是“无类型”错误的例外？这是错误：

```
 File "C:\xampp\htdocs\ZoneFinding\zoneFinder2D_V2.py", line 127, in handleCheck
    finalCatch, forBoo, bakBoo, upBoo, dwnBoo = checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo)
TypeError: 'NoneType' object is not iterable 
```

这是调用递归“checkAllInOneDirection”的函数。

```
def handleCheck(newCatch, locale, subset, width, height, rowCount, columnCount, posToCheck):
    forBoo = True; bakBoo =True; upBoo=True; dwnBoo= True; lastOneInSet =0;
    while forBoo and bakBoo and upBoo and dwnBoo :
        if locale[posToCheck[0]][posToCheck[1]] == 0:
            recursiveCount = 0; tempCatch = []; finalCatch =[]
            tempCatch.append(posToCheck)
            finalCatch, forBoo, bakBoo, upBoo, dwnBoo = checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, columnCount, rowCount, width, height, posToCheck, forBoo, bakBoo, upBoo, dwnBoo)
            replaceVal(locale, finalCatch)

    return False, finalCatch 
```

这是递归函数 checkAllInOneDirection 代码。

```
def checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, width, height, forBoo, bakBoo, upBoo, dwnBoo):

    isItLast = checkLast(forBoo, bakBoo, upBoo, dwnBoo)
    if isItLast:
        for each in tempCatch:
            if not each in finalCatch:
                finalCatch.append(each)
        tempCatch=[]
        for each in newCatch:
            if not each in finalCatch:
                finalCatch.append(each)
        newCatch=[]
        print "Before return :", finalCatch, forBoo, bakBoo, upBoo, dwnBoo
        return finalCatch, forBoo, bakBoo, upBoo, dwnBoo

    for each in range (0, len(tempCatch)):
        posToCheck = posToCheckBak = posToCheckUp = posToCheckDwn = [tempCatch[each][0], tempCatch[each][1]]
        ### Some code to check position forward
        newPosForward = checkForward(posToCheck, width)
        if newPosForward != False:
            tempLocale = locale[newPosForward[0]][newPosForward[1]]
        elif newPosForward == False:
            tempLocale = 1
        if newPosForward != False and tempLocale ==0 and not newPosForward in finalCatch and not newPosForward in newCatch:
            forVal = locale[newPosForward[0]][newPosForward[1]]
            newCatch.append(newPosForward)
            posToCheck = newPosForward
            forBoo = True
        elif newPosForward == False and tempLocale == 1 and not newPosForward in newCatch:
            forBoo = False

        ### Some code to check position backward
        newPosBackward = checkBackward(posToCheckBak)
        if newPosBackward != False:
            tempLocale = locale[newPosBackward[0]][newPosBackward[1]]
        elif newPosBackward == False:
            tempLocale = 1    
        if newPosBackward != False and tempLocale ==0 and not newPosBackward in finalCatch and not newPosBackward in newCatch:
            forVal = locale[newPosBackward[0]][newPosBackward[1]]
            newCatch.append(newPosBackward)
            posToCheckBak = newPosBackward
            bakBoo = True
        elif newPosBackward == False and tempLocale == 1 and not newPosBackward in newCatch:
            bakBoo = False

        ### Some code to check position upward
        newPosUp = checkUpRow(posToCheckUp)
        if newPosUp != False:
            tempLocale = locale[newPosUp[0]][newPosUp[1]]
        elif newPosUp == False:
            tempLocale = 1
        if newPosUp != False and tempLocale ==0 and not newPosUp in finalCatch and not newPosUp in newCatch:
            forVal = locale[newPosUp[0]][newPosUp[1]]
            newCatch.append(newPosUp)
            posToCheckUp = newPosUp
            upBoo = True
        elif newPosUp == False and tempLocale == 1 and not newPosUp in newCatch:
            upBoo = False

        ### Some code to check position downward
        newPosDwn = checkDwnRow(posToCheckDwn, height)
        if newPosDwn != False:
            tempLocale = locale[newPosDwn[0]][newPosDwn[1]]
        elif newPosDwn == False:
            tempLocale = 1
        if newPosDwn != False and tempLocale ==0 and not newPosDwn in finalCatch and not newPosDwn in newCatch:
            forVal = locale[newPosDwn[0]][newPosDwn[1]]
            newCatch.append(newPosDwn)
            posToCheckDwn = newPosDwn
            dwnBoo = True
        elif newPosDwn == False and tempLocale == 1 and not newPosDwn in newCatch:
            dwnBoo = False

    for each in tempCatch:
        if not each in finalCatch:
            finalCatch.append(each)
    tempCatch =[]
    for each in newCatch:    
        if not each in finalCatch:
            finalCatch.append(each)
            tempCatch.append(each)
    newCatch = []

    checkAllInOneDirection(finalCatch,tempCatch,recursiveCount,newCatch, width, height, forBoo, bakBoo, upBoo, dwnBoo) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T15:05:26.850

我想你希望最后一行是：

```
return checkAllInOneDirection(...) 
```

而不仅仅是：

```
checkAllInOneDirection(...) 
```

在您退出该语句的末尾后，该函数返回。因为它没有明确的 return 语句，所以它返回`None`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:11:24.677

> finalCatch, forBoo, bakBoo, upBoo, dwnBoo = checkAllInOneDirection(...)

`a,b,c,d,e`期望等号右侧的某种形式。这是 a `list`、 a`tuple`或 a的语法快捷方式`range`。如果一个函数没有返回，或者返回的东西不能被迭代，那就是你所期望的那种错误。

迭代意味着以下内容：假设您有一个充当值*容器*的类。遍历类或值是逐一检查每个值。如果你正在检查一个不支持这种行为的类（例如整数），它会抛出一个错误，因为没有办法处理请求。

# for-loop - 批处理：尝试输出变量内容时，ECHO 始终打开

> ID：12199686
> 
> 赞同：1
> 
> 时间：2012-08-30T14:52:20.550
> 
> 标签：for-loop, batch-file, echo

尝试运行脚本时，我总是收到消息“Echo is on”。

```
setlocal ENABLEEXTENSIONS
C:
cd ..
cd ..
reg query "HKLM\SYSTEM\CurrentControlSet\Services" | findstr /b "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DummyService" > "C:\servicePaths.txt"
FOR /f "delims=" %%g IN (servicePaths.txt) do (
  set KEY_NAME="%%g"
  set VALUE_NAME=ImagePath
    FOR /F "tokens=1-3" %%A IN ('REG QUERY %KEY_NAME% /v %VALUE_NAME% 2^>nul') DO (
    set ValueValue=%%C
    )
  echo %ValueValue%
  pause
) 
```

任何批处理大师可以帮助我吗？我知道它与级联的 for 循环有关，但我找不到解决方案 - 经过 3 小时的 try&error 后不再有任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:12:07.880

这是扩展 的问题`%ValueValue%`，因为在解析完整的括号块时会发生这种情况。
不是在执行时，而是在解析时`ValueValue`变量为空，所以你只得到`echo`哪个会 print `echo is on`。

只需将其更改为延迟扩展

```
@echo off
setlocal EnableDelayedExpansion
C:
cd ..
cd ..
set VALUE_NAME=ImagePath

reg query "HKLM\SYSTEM\CurrentControlSet\Services" | findstr /b "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DummyService" > "C:\servicePaths.txt"
FOR /f "delims=" %%g IN (servicePaths.txt) do (
  set "KEY_NAME=%%g"
    FOR /F "tokens=1-3" %%A IN ('REG QUERY !KEY_NAME! /v !VALUE_NAME! 2^>nul') DO (
    set ValueValue=%%C
    )
  echo !ValueValue!
  pause
) 
```

# powershell - PowerShell 中的 Word.Application ComObject 错误

> ID：12199692
> 
> 赞同：5
> 
> 时间：2012-08-30T14:52:47.553
> 
> 标签：powershell, comobject, powershell-3.0

我无法使用 Powershell将 Word 2010 (14.0.x) 文档[另存](http://msdn.microsoft.com/en-us/LIBRary/microsoft.office.interop.word.documentclass.saveas%28v=office.11%29)为或[关闭。](http://msdn.microsoft.com/en-us/LIBRary/microsoft.office.interop.word.documentclass.close%28v=office.11%29)从网上的所有 tuts 来看，它似乎应该与 2.0 一起使用，但我不再拥有它了。

简单案例：

```
$Path = "C:\MyDoc.docx"
$Word = New-Object -comobject Word.Application
$Word.Visible = $True #Do this to close it out without task manager
$Doc = $Word.Documents.Open($Path)
$Doc.SaveAs($Path)
$Doc.Close() 
```

此时一切正常，直到保存和关闭：

```
Argument: '1' should be a System.Management.Automation.PSReference. Use [ref].
At line:5 char:1
+ $Doc.SaveAs($Path)
+ ~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : NonRefArgumentToRefParameterMsg

Argument types do not match
At line:6 char:1
+ $Doc.Close()
+ ~~~~~~~~~~~~
    + CategoryInfo          : OperationStopped: (:) [], ArgumentException
    + FullyQualifiedErrorId : Argument types do not match 
```

似乎 Get-Member 显示为具有参数的任何方法都失败了。例如，调用一个简单的 $Doc.Save() 似乎可以正常工作。查看有关这些方法的 MSDN 信息，它看起来需要像[SaveChanges](http://msdn.microsoft.com/en-us/library/bb336792)方法这样的东西，但老实说，目前这超出了我的技能。

我曾尝试传递 $Null 或 $True 或 $False 以希望获得好运，但它一直在阻止我。

我所能找到的只是它显然[与 PS 3.0 Beta 相关联](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/52d447fa-6c45-429e-a216-bf9a9e690670/)（似乎在 2.0 中对人们来说可以正常工作）并且评论[Ed Wilson 还没有回复到](http://blogs.technet.com/b/heyscriptingguy/archive/2012/06/14/use-powershell-to-add-autocorrect-entries-to-word.aspx).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-12T10:47:39.653

我也为这个错误苦苦挣扎，但最终通过调用 PSReference 的“值”属性解决了这个问题（我在这里得到了我的信息：[https://msdn.microsoft.com/en-us/library/system. management.automation.psreference(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/system.management.automation.psreference(v=vs.85).aspx) )

这最终导致了代码行：

```
$filename = [ref]"C:\Temp\pv_report.docx"    
[ref]$option = [Microsoft.Office.Interop.Word.WdSaveFormat] -as [type]
$document.SaveAs(([ref]$filename).Value, ([ref]$option::wdFormatDocumentDefault).Value)
$document.Close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:23:04.527

您只需要`[ref]`在调用时使用`SaveAs`。这对我有用：

```
$Path = "C:\MyDoc.docx"
$NewPath = "C:\MyDocRenamed.docx"
$Word = New-Object -comobject Word.Application
$Word.Visible = $True #Do this to close it out without task manager
$Doc = $Word.Documents.Open($Path)
$Doc.SaveAs([ref] $NewPath)
$Doc.Close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:09:00.850

这可能会帮助您：

[http://msdn.microsoft.com/en-us/library/office/cc626294(v=office.12).aspx#VSTO3PowerTools_OfficeInteropAPIExtensions](http://msdn.microsoft.com/en-us/library/office/cc626294(v=office.12).aspx#VSTO3PowerTools_OfficeInteropAPIExtensions)

> **Office 互操作 API 扩展**
> 
> Office 互操作 API 扩展工具使用 Microsoft .NET Framework 3.5 和 Microsoft Visual C# 3.0 中的新功能来封装 Office 对象模型并为 C# 开发人员提供更高效的环境。具体来说，它使用扩展方法、对象初始值设定项和可为空的类型来创建简化的强类型 API，在某些情况下，还可以创建类似于 Microsoft Visual Basic 的 API。它不是 Office 的完整托管 API，但旨在以有用的方式增强原始对象模型。
> 
> Office 对象模型最初针对动态语言，例如 Microsoft Visual Basic for Applications (VBA) 和 Visual Basic。因此，它广泛使用了它们的一些功能，例如后期绑定和可选参数。作为一种早期绑定和强类型语言，在这种情况下使用 C# 可能会很笨拙、乏味且容易出错。Office 互操作 API 扩展及其简化的强类型 API 使 C# 开发人员在此上下文中的工作效率与 Visual Basic 开发人员一样。

我知道 PowerShell 3.0 基于 CLR4，但是这个程序集应该仍然可以加载。它消除了对所有 [ref] 参数的需要。由于许多此 API 都基于扩展方法（powershell 中不存在的东西），因此您必须将`$word`or`$doc`实例作为许多方法的第一个参数传递。

# ruby-on-rails - RVM 导轨 3.2 和导轨 2.3

> ID：12199695
> 
> 赞同：1
> 
> 时间：2012-08-30T14:53:07.167
> 
> 标签：ruby-on-rails, rvm

我在设置开发环境时遇到了麻烦。我需要一些关于如何并排安装带有 rails 3.2 和 rails 2.3.14 的 rvm 的教程。我尝试安装 rvm 1.8.7 然后是 rails 2.3.14 和 rvm 1.9.3 然后是 rails 3.2。完成后，我似乎无法创建 gemset，当我生成（ruby 脚本/生成）时，我尝试切换 rvm 1.8.7 购买，它显示它无法识别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T15:05:59.493

理想情况下，您可能希望在安装 rails gem 之前创建您的 gemset。这样两个版本就被隔离了。我会做类似以下的事情：

```
rvm --create use 1.8.7@some-gemset-name
gem install rails -v 2.3.14 
```

那应该一起安装和使用这些特定版本。然后对于较新的版本

```
rvm --create use 1.9.3@some-other-gemset-name
gem install rails 
```

然后，您只需要在需要时更换 rubies 和 gemsets `rvm use version@gemset-name`。`.rvmrc`另一种方法是通过在您的 rails 项目的根目录中创建一个文件来更改每个 rails 项目的 ruby​​ 和 gemset 。该文件的内容类似于以下内容：

```
rvm version@gemset-name 
```

我还建议查看[RVM 文档](https://rvm.io/gemsets/)，因为这只是使用 RVM 时的冰山一角。

# objective-c - 如何在 NSOperationQueues 上自动安装 NSExceptionHandlers？

> ID：12199696
> 
> 赞同：1
> 
> 时间：2012-08-30T14:53:10.277
> 
> 标签：objective-c, multithreading, macos, cocoa, exception

长期潜伏者，第一次海报。

我正在编写一个可可应用程序，它大量使用 NSOperationQueues 来管理后台任务。这个应用程序是对一个使用手动管理的 NSThreads 来完成类似事情的旧应用程序的重写。

其中一项要求是我们捕获/记录所有未捕获的异常以避免应用程序终止。在旧版本的应用程序中，我们将使用 NSExceptionHandler API 安装所有线程的异常陷阱。现在我们从线程中移除了一个抽象级别，我无法访问线程对象（事实上，我的印象是队列使用的线程可能会在每次操作调用时发生变化）。

当后台操作失败时，防止我的应用程序崩溃的推荐/最佳方法是什么？

如果重要，部署在 Mac OS X 10.6 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:18:36.850

我使用以下方法为自己解决了这个问题：

```
NSInteger mask = (NSLogUncaughtExceptionMask| NSHandleUncaughtExceptionMask | NSLogUncaughtSystemExceptionMask | NSHandleUncaughtSystemExceptionMask | NSLogUncaughtRuntimeErrorMask | NSHandleUncaughtRuntimeErrorMask | NSLogTopLevelExceptionMask | NSHandleTopLevelExceptionMask);
[[NSExceptionHandler defaultExceptionHandler] setDelegate:[[MyExceptionHandler new] autorelease]];      
[[NSExceptionHandler defaultExceptionHandler] setExceptionHandlingMask:mask]; 
```

详细信息可在指南异常编程主题的“控制程序对异常的响应”部分中找到

# vb.net - 什么时候创建静态变量？

> ID：12199698
> 
> 赞同：5
> 
> 时间：2012-08-30T14:53:12.983
> 
> 标签：vb.net

假设我在函数中有一个静态变量：

```
Private Sub SomeFunction()
    Static staticVar As String = _myField.Value
End Sub 
```

确切地说，值是什么时候`_myField`分配给的`staticVar`？在第一次调用该函数时？封闭类的实例化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T17:30:58.913

CLR 不支持此构造，因此 VB.NET 编译器模拟它。

先创作。该变量被提升到类的私有字段，其名称不可描述，以确保不会发生名称冲突。如果变量在类的实例方法中，它将是一个实例字段。So 将在使用*new*运算符创建类的对象时创建。如果方法是共享的或者是模块的一部分，它将是一个共享字段。所以会在加载器堆中由抖动创建。

作业接下来，涉及的操作要多得多。*语言规则是当代码执行第一次*到达 Dim 语句时发生赋值。*第一次*这个词是一个加载的。编译器在方法内部生成了大量代码，以确保这一点得到保证。需要解决的问题是线程、递归和异常。

编译器在与隐藏变量字段相同的范围内创建另一个[StaticLocalInitFlag](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.compilerservices.staticlocalinitflag.aspx)类型的隐藏助手字段，以跟踪变量的初始化状态。注入代码的第一部分是调用 Monitor.Enter() 来处理线程。与 SyncLock 相同。StaticLocalInitFlag 用作锁定对象，注意它是一个类而不仅仅是一个布尔值。

接下来，Try 和 finally 语句防止异常。在 Try 语句中，检查 StaticLocalInitFlag.State 的值是否为 0。这可以防止同一线程上的递归。然后将 State 设置为 2 以指示初始化代码正在运行。紧随其后的是任务。接下来，再次检查 State 以查看它是否仍为 2。如果不是，则出现严重错误并引发 IncompleteInitialization 异常。

finally 块然后将 State 设置为 1 以指示变量已初始化。随后调用 Monitor.Leave()。

大量代码，96 字节的 IL 只是一个简单的变量。仅当您不担心成本时才使用静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:05:26.537

很`Static`明显，变量在分配时会被实例化。

当那条线运行时，不是之前，不是之后。

在上面放一个断点，你会看到。

`Static`只是意味着该值将在调用之间保持不变。

`Shared`类/模块成员在第一次访问类时被实例化，在任何`Shared`构造函数之前和调用之前，无论是类构造函数还是某些`Shared`方法/属性。我想这可能是你困惑的根源。`Static`局部变量，如`static`c# 中的 local s 不会以这种方式实例化。

* * *

[来自 Tim Schmelter](https://stackoverflow.com/a/12199980/659190)的有趣信息，该值似乎是使用隐藏的类级别变量在内部维护的，该`Shared`变量像其他`Shared`类级别变量一样被实例化，但始终使用默认值。

除了访问类时的一些实例化延迟之外，开发人员观察到的效果没有变化。这种延迟在实践中应该是检测不到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:06:37.710

VB.NET 编译器创建一个静态（在 VB.NET 中共享）**类级**变量来维护“staticVar”的值。因此，它像任何其他静态/共享变量一样在第一次使用该类的静态字段时（或当您调用此方法时）进行初始化。

[http://weblogs.asp.net/psteele/pages/7717.aspx](http://weblogs.asp.net/psteele/pages/7717.aspx)

# php - jQuery UI 选项卡和选项卡中的 PHP 表单

> ID：12199701
> 
> 赞同：1
> 
> 时间：2012-08-30T14:53:18.240
> 
> 标签：php, jquery, ajax, jquery-ui

我从位于选项卡中的表单提交 $_POST 数据并使用预期的 $_POST 数据更新选项卡时遇到问题。

我正在使用 jQuery-UI 选项卡通过 Ajax 加载脚本的不同部分。

这是我的导航标签：

```
 <div id="tabs" style="width:970px;">
    <ul>
        <li><a href="/ajaxFunctions?mgmtDbrdPge=1" title="visibleTab-1">Cl Total</a></li>
        <li><a href="/ajaxFunctions?mgmtDbrdPge=2" title="visibleTab-2">Rental Leads Export</a></li>
        <li><a href="/ajaxFunctions?mgmtDbrdPge=3" title="visibleTab-3">Sphere Count Statistics</a></li>
        <li><a href="/ajaxFunctions?mgmtDbrdPge=4" title="visibleTab-4">E-Campaign Statistics</a></li>
    </ul>

</div> 
```

这是我的 jQuery 代码：

```
 jQuery(document).ready(function() {

        jQuery("#tabs").tabs({ 
            spinner:'<b>Retrieving Data...</b>',

            ajaxOptions: {

                data: { $_POST: getVariable

                },
                error: function( xhr, status, index, anchor ) {
                    $( anchor.hash ).html(
                    "error occured while ajax loading.");
                },
                success: function( xhr, status ) {
                    //alert("ajax success. ");    //your code

                }

            }

        });
        jQuery('#tabs ul li a').click(function () {location.hash = jQuery(this).attr('href');});

        primeDateInputElements();

    }); 
```

在 AjaxFunctions 文件中，我有一个 switch 语句来加载正确的包含，具体取决于所选的选项卡。

```
 $p = $_GET['mgmtDbrdPge'];  

switch($p) {

    case "1": default:
    $page = 1;
    break;           

    case "2":
    $page = 2;
    break;

    case "3":
    $page = 3;
    break;

    case "4":
    $page = 4;
    break;
}
    include("path/to/file/fileToInclude.include.php"); 
```

在这个文件中，我有一个看起来与此类似的表单。当表单提交时，它应该重新加载加载了 POST 数据的选项卡，以便执行下一个函数。但是根本没有加载任何 POST 数据。

```
echo '<form name="CityExport" action="/managementDashboard#visibleTab-2" enctype="multipart/form-data" method="post">' . chr(10);
    echo '<input type="hidden" name="mode" value="submitNorthShoreExport" />' . chr(10);
    echo '<input type="submit" value="North Shore Export" id="submitButton">' . chr(10);
    echo '</form>'; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:17:03.540

我已经想通了。最好的方法是为每个表单设置一个 id 并让它重新加载具有当前结果的 div。

```
 jQuery("form#ajaxForm").submit(function(event) {

        /* stop form from submitting normally */
        event.preventDefault(); 

        /* Send the data using post and put the results in a div */
        jQuery.post( '/postpage', jQuery("#ajaxForm").serialize(),
        function( data ) {
            var content = jQuery( data ).find( '#content' );
            jQuery( "#visibleTab-2" ).empty().append( data );
        }
    );
    }) 
```

# blackberry - Class.forName 返回一个内部类？

> ID：12199703
> 
> 赞同：1
> 
> 时间：2012-08-30T14:53:23.590
> 
> 标签：blackberry, reflection, classcastexception

我正在编写一个 BlackBerry 应用程序，它从 Web 服务器加载 XML 并根据 XML 标签生成对象。这些生成的对象都实现了相同的接口，并在使用前被强制转换为该接口。

我最近在消息应用程序中实现了菜单项，该菜单项在选择后启动我的应用程序并按下屏幕。该屏幕预计会从服务器获取 XML 并像正常一样创建对象 - 并且它可以工作，前提是它不是从菜单项中调用的。

从菜单项调用时，我`ClassCastException`在页面上仅收到一种类型的对象。类似的对象被很好地转换，并且当它不是从菜单项类中实例化时，这个对象被很好地转换。

有趣的地方在于：在调试器中，当`Class.forName`在 XML 标记上正常运行时，我可以突出显示生成的`Class`对象以查看

```
 Class my.package.location.ClassName$MyAppName 
```

当我从菜单项调用它并获得类转换异常时，该`Class`对象显示为

```
 Class my.package.location.ClassName$XMLReflectionTest 
```

我想这就是演员失败的原因，即使两者似乎都指的是我的对象。

`XMLReflectionTest`不是我项目中的类或子类，但谷歌只返回两个搜索结果，甚至都没有相关性。

它在其他任何地方都可以正常工作，甚至对于使用相同方法的不同类也是如此！**为什么`Class.forName`使用相同的类字符串调用会根据调用*位置*返回两个“不同”的类？**

我已经研究了 ClassLoaders，我可能是问题所在，但是为什么这个问题只发生在一个类上，而不是所有类？

# html - 表格边框底部在行

> ID：12199705
> 
> 赞同：1
> 
> 时间：2012-08-30T14:53:42.187
> 
> 标签：html, css, html-table, border

我尝试在表格行上放置一个边框底部，但它们没有出现。这是为什么？

[http://www.mysecretathens.gr/Sera/dates.html](http://www.mysecretathens.gr/Sera/dates.html)

我认为我的代码很简单，将一个类放到 tr 元素中。

```
<tr class="line">

table tr.line {border-bottom: 1px solid #B4B5B0;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T14:57:38.373

你可以试试这个：

```
tr.line td{ 
border-bottom: 1px solid #B4B5B0; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T14:58:39.703

您不能在 tr 元素上设置边框。你必须把它们放在 td

将您的样式更改为：

tr.line td{border-bottom: 1px solid #B4B5B0;}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:01:20.953

将“border-collapse：collapse”样式添加到您的表格元素中，这应该会显示行边框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:11:37.850

如果页面上只有一个表格，您可以尝试；

```
td{
  border-bottom: solid 1px #B4B5B0;
} 
```

或者，如果您有多个表，请使用类，例如；

```
.your_table_class td{
  border-bottom: solid 1px #B4B5B0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T14:55:34.450

在表格单元格上执行此操作，它适用于所有浏览器。

`table tr.line td {border-bottom: 1px solid #B4B5B0;}`

# c++ - C++11 中 COW std::string 实现的合法性

> ID：12199710
> 
> 赞同：126
> 
> 时间：2012-08-30T14:54:05.910
> 
> 标签：c++, string, c++11, stdstring, copy-on-write

我的理解是写时复制不是`std::string`在 C++11 中实现一致性的可行方法，但是当它最近在讨论中出现时，我发现自己无法直接支持该声明。

我是否正确 C++11 不承认基于 COW 的实现`std::string`？

如果是这样，这个限制是否在新标准的某处明确说明（在哪里）？

还是暗示了这种限制，因为新要求的综合影响`std::string`排除了基于 COW 的`std::string`. `std::string`在这种情况下，我会对“C++11 有效禁止基于 COW 的实现”的章节风格派生感兴趣。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-30T15:06:12.427

这是不允许的，因为根据标准 21.4.1 p6，迭代器/引用的无效只允许

> — 作为任何标准库函数的参数，将非常量 basic_string 的引用作为参数。
> 
> — 调用非常量成员函数，除了 operator[]、at、front、back、begin、rbegin、end 和 rend。

对于 COW 字符串，调用 non-const`operator[]`将需要制作副本（并使引用无效），这在上面的段落中是不允许的。因此，在 C++11 中使用 COW 字符串不再合法。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-03-22T20:55:21.843

[Dave S](https://stackoverflow.com/a/12199969/981959)和 [gbjbaanb](https://stackoverflow.com/a/12199871/981959)的答案是**正确**的。（而且 Luc Danton 的说法也是正确的，尽管它更像是禁止 COW 字符串的副作用，而不是禁止它的原始规则。）

但是为了消除一些混乱，我将添加一些进一步的说明。各种评论链接到[我在 GCC bugzilla 上的评论，](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=21334#c47)其中给出了以下示例：

```
std::string s("str");
const char* p = s.data();
{
    std::string s2(s);
    (void) s[0];
}
std::cout << *p << '\n';  // p is dangling 
```

该示例的重点是说明为什么 GCC 的引用计数 (COW) 字符串在 C++11 中无效。C++11 标准要求此代码正常工作。代码中的任何内容`p`都不允许在 C++11 中无效。

使用 GCC 的旧引用计数`std::string`实现，该代码具有未定义的行为，因为`p` *已*失效，成为一个悬空指针。（发生的情况是，在`s2`构造时它与 共享数据`s`，但通过获取非常量引用`s[0]`需要取消共享数据，“写入时复制”也是如此，因为`s`引用`s[0]`可能用于写入超出范围，破坏 ) 指向的数组。`s``s2``p`

C++03 标准在 21.3 [lib.basic.string] p5 中**明确允许这种行为**，它说在调用`data()`第一次调用之后`operator[]()`可能会使指针、引用和迭代器无效。所以 GCC 的 COW 字符串是一个有效的 C++03 实现。

C++11 标准**不再允许**这种行为，因为没有调用`operator[]()`可能会使指针、引用或迭代器无效，无论它们是否遵循对`data()`.

所以上面的例子**必须**在 C++11 中工作，但**不适**用于 libstdc++ 的那种 COW 字符串，因此这种 COW 字符串在 C++11 中是不允许的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-30T15:01:54.997

确实，CoW 是一种可接受的机制来制作更快的字符串……但是……

它使多线程代码变慢（在使用大量字符串时，所有用于检查您是否是唯一一个编写代码的锁定都会降低性能）。这是几年前 CoW 被杀的主要原因。

其他原因是`[]`操作员将返回字符串数据，而不会保护您覆盖其他人期望不变的字符串。这同样适用于`c_str()`和`data()`。

快速谷歌说，多线程基本上是[它被有效禁止的原因](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2668.htm)（未明确）。

该提案说：

> 提议
> 
> 我们建议使所有迭代器和元素访问操作可以安全地并发执行。
> 
> 即使在顺序代码中，我们也在提高操作的稳定性。
> 
> 此更改有效地禁止了写时复制实现。

其次是

> 由于从写时复制实现切换而导致的最大潜在性能损失是具有非常大的以读取为主的字符串的应用程序的内存消耗增加。但是，我们认为对于这些应用，绳索是更好的技术解决方案，并建议考虑将绳索提案纳入图书馆 TR2。

[绳索](http://www.sgi.com/tech/stl/Rope.html)是 STLPort 和 SGIs STL 的一部分。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-30T15:02:40.470

从 21.4.2 basic_string 构造函数和赋值运算符 [string.cons]

> `basic_string(const basic_string<charT,traits,Allocator>& str);`
> 
> [...]
> 
> 2*效果*：构造一个类的对象，`basic_string`如表 64 所示。 [...]

表 64 有用地记录了在通过此（复制）构造函数构造对象后，`this->data()`具有作为值：

> 指向数组的已分配副本的第一个元素，其第一个元素由 str.data() 指向

其他类似的构造函数也有类似的要求。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-07-29T05:53:27.857

## *`basic_string`C++11 及更高版本是否禁止使用COW ？*

关于

> **”** C++11 不承认基于 COW 的实现我是否正确`std::string`？

***是的。***

关于

> **”**如果是这样，这个限制是否在新标准的某处（哪里）明确说明？

***几乎****直接地，由于需要在 COW 实现中对字符串数据进行 O( n* ) 物理复制的许多操作的恒定复杂性要求

例如，对于成员函数

```
auto operator[](size_type pos) const -> const_reference;
auto operator[](size_type pos) -> reference; 
```

…在 COW 实现中会 ¹触发字符串数据复制以取消共享字符串值，C++11 标准要求

*C++11 §21.4.5/4*：

> **”** *复杂性：*恒定的时间。

......这排除了这种数据复制，因此，COW。

C++03 支持 COW 实现，*没有*这些恒定的复杂性要求，并且在某些限制条件下，允许调用`operator[]()`, `at()`, `begin()`, `rbegin()`, `end()`, 或`rend()`使引用字符串项的引用、指针和迭代器无效，即可能导致牛数据复制。在 C++11 中删除了此支持。

* * *

## *C++11 失效规则是否也禁止 COW？*

在另一个答案中，在撰写本文时被选为解决方案，并且受到高度支持，因此显然相信，它断言

> **”**对于 COW 字符串，调用 non-`const` `operator[]`需要制作副本（并使引用无效），这是 [C++11 §21.4.1/6] 上面的 [quoted] 段落所不允许的。因此，在 C++11 中使用 COW 字符串不再合法。

该断言在两个主要方面是不正确和误导的：

*   *它错误地表明只有非`const`项目访问者需要触发 COW 数据复制。*
    但`const`项目访问器也需要触发数据复制，因为它们允许客户端代码形成引用或指针（在 C++11 中），以后不允许通过可触发 COW 数据复制的操作使其无效。
*   *它错误地假设 COW 数据复制会导致引用失效。*
    但在正确的实现中，COW 数据复制、取消共享字符串值是在任何引用可能无效之前完成的。

要了解正确的 C++11 COW 实现如何`basic_string`工作，当忽略使此无效的 O(1) 要求时，请考虑一个字符串可以在所有权策略之间切换的实现。字符串实例以策略共享开始。启用此策略后，将没有外部项目引用。实例可以转换为唯一策略，并且它必须在可能创建项目引用时这样做，例如通过调用`.c_str()`（至少如果这会产生指向内部缓冲区的指针）。在多个实例共享值所有权的一般情况下，这需要复制字符串数据。在转换为唯一策略之后，实例只能通过使所有引用无效的操作（例如分配）转换回共享。

因此，虽然该答案的结论（即排除了 COW 字符串）是正确的，但所提供的推理是不正确的并且具有很强的误导性。

我怀疑造成这种误解的原因是 C++11 的附件 C 中的非规范注释：

*C++11 §C.2.11 [diff.cpp03.strings]，关于 §21.3：*

> **更改**：`basic_string`要求不再允许引用计数字符串
> **理由：**失效与引用计数字符串略有不同。此更改规范了本国际标准的行为（原文如此）。
> **对原始功能的影响：**有效的 C++ 2003 代码在本国际标准中的执行方式可能不同

这里的*基本原理*解释了决定删除 C++03 特殊 COW 支持的*主要原因。*这个理由，*为什么*，不是标准*如何*有效地禁止 COW 实施。该标准通过 O(1) 要求禁止 COW。

简而言之，C++11 失效规则不排除`std::basic_string`. 但他们确实排除了一种相当有效的不受限制的 C++03 风格的 COW 实现，例如至少一个 g++ 的标准库实现中的一种。特殊的 C++03 COW 支持允许实际效率，特别是使用`const`项访问器，但代价是微妙、复杂的无效规则：

*C++03 §21.3/5*包括“首次调用”COW 支持：

> **”**引用序列元素的引用、指针和迭代器`basic_string`可能会因该`basic_string`对象的以下用途而失效：
> — 作为非成员函数`swap()`(21.3.7.8)、 (21\. `operator>>()`​​3.7.9) 和`getline()`(21.3) 的参数。 7.9)。
> — 作为 的论据`basic_string::swap()`。
> — 调用`data()`和`c_str()`成员函数。
> — 调用非`const`成员函数，除了`operator[]()`, `at()`, `begin()`, `rbegin()`, `end()`, 和`rend()`.
> — 在上述任何使用之后，除了返回迭代器的形式`insert()`和`erase()`返回迭代器，第一次调用非`const`成员函数`operator[]()`, `at()`, `begin()`, `rbegin()`,`end()`, 或`rend()`.

这些规则是如此复杂和微妙，以至于我怀疑许多程序员（如果有的话）能否给出准确的总结。我不能。

* * *

## *如果忽略 O(1) 要求怎么办？*

`operator[]`如果忽略对 eg 的 C++11 恒定时间要求，那么 COW for`basic_string`在技术上可能是可行的，但难以实现。

无需复制 COW 数据即可访问字符串内容的操作包括：

*   通过连接`+`。
*   通过输出`<<`。
*   使用`basic_string`标准库函数的 as 参数。

后者是因为允许标准库依赖于实现特定的知识和结构。

此外，实现可以提供各种非标准函数来访问字符串内容，而不会触发 COW 数据复制。

一个主要的复杂因素是，在 C++11 中，`basic_string`项目访问必须触发数据复制（取消共享字符串数据）但要求**不抛出**，例如 C++11 §21.4.5/3 “ *Throws:* Nothing.”。所以它不能使用普通的动态分配来创建一个新的缓冲区来复制COW数据。解决此问题的一种方法是使用一个特殊的堆，其中可以*保留*内存而无需实际分配，然后为每个对字符串值的逻辑引用保留必要的数量。在这样的堆中保留和取消保留可以是常数时间，O(1)，分配一个已经保留的数量，可以是`noexcept`. 为了符合标准的要求，使用这种方法，似乎每个不同的分配器都需要一个这样的特殊的基于预留的堆。

* * *

^(*注意：*
¹`const`项目访问器触发 COW 数据复制，因为它允许客户端代码获取数据的引用或指针，不允许由例如非`const`项目访问器触发的后续数据复制使其无效。)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-30T15:00:07.417

由于现在可以保证字符串是连续存储的，并且您现在可以获取指向字符串内部存储的指针（即 &str[0] 就像数组一样工作），所以不可能制作有用的 COW执行。您将不得不为太多事情制作副本。即使只是在非常量字符串上使用`operator[]`or`begin()`也需要一个副本。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-10-16T01:06:52.597

我一直在想不可变的奶牛：一旦奶牛被创建，我只能通过另一头奶牛的分配来改变，因此它将符合标准。

今天我有时间尝试了一个简单的比较测试：一个大小为 N 的映射，由字符串/牛键入，每个节点在映射中保存一组所有字符串（我们有 NxN 个对象）。

字符串大小约为 300 字节且 N=2000 头牛稍微快一些，并且使用的内存几乎减少了一个数量级。见下文，大小以 kbs 为单位，运行 b 是奶牛。

```
~/icow$ ./tst 2000
preparation a
run
done a: time-delta=6 mem-delta=1563276
preparation b
run
done a: time-delta=3 mem-delta=186384 
```

# java - Java 1.6 中清理资源的首选方式

> ID：12199711
> 
> 赞同：1
> 
> 时间：2012-08-30T14:54:09.077
> 
> 标签：java, idioms

我经常看到这种资源清理方式：

```
InputStream in = null;
try {
    in = new FileInputStream(file);
    // ...
} finally {
    if (in != null) {
        in.close();
    }
} 
```

我一直使用以下风格：

```
final InputStream in = new FileInputStream(file);
try {
    // ...
} finally {
    in.close();
} 
```

但我错过了什么吗？前者有我没有看到的优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:58:39.330

我怀疑它是为了避免使用两个嵌套的 try/catch 块而不是一个。

```
InputStream in = null;
try {
    in = new FileInputStream(file);
    // ...
} catch(IOException ioe) {
    // handle exception.
} finally {
    IOUtils.closeQuietly(in);
} 
```

第二种情况不完整。

```
try {
    final InputStream in = new FileInputStream(file);
    try {
        // ...
    } finally {
        in.close();
    }
} catch(IOException e) {
    // handle exception
} 
```

如果您有多个文件，这可能会变得非常混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:56:53.277

假设在第一个示例中，您在定义之前有一些其他代码*可以*让您退出 try 块。如果您在未定义的情况下到达 finally，您将在尝试关闭它时收到 NullPointerException。因此，您必须进行检查以避免此类错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:57:36.800

此处的`null`检查`InputStream`是必要的，因为可能未分配变量。在这种情况下，在调用时尝试关闭它时会抛出 NullPointerException：

```
in.close(); 
```

在try/catch 块*之外*的第二个块中：

```
final InputStream in = new FileInputStream(file);
try {
    // ...
} finally {
    in.close();
} 
```

在进入块之前很容易遇到其他异常并且`InputStream`永远不会关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:01:27.663

第二个不会编译，因为的构造函数[`FileInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#FileInputStream%28java.io.File%29)可以抛出 a `FileNotFoundException`，因此你需要一个额外的`try-catch`块，当然，除非方法本身抛出它。

另一个常见的习惯用法是编写一个`closeQuietly()`方法来避免必须`if (is != null)`在你的`finally`块上写检查。这就是 Apache Common[`IOUtils`](http://commons.apache.org/io/api-1.2/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.InputStream%29)所做的：

```
public static void closeQuietly(InputStream input) {
  try {
    if (input != null) {
      input.close();
    }
  } catch (IOException ioe) {
    // ignore
  }
} 
```

[另请注意，*从*Java 7 开始，您可以使用以下内容：]

```
try (InputStream is = new FileInputStream(file)) {
} catch (final FileNotFoundException | IOException ex) { 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T15:05:48.773

`InputStream`这是一个非常简单的示例，并且可能不会像您在同一个人中创建那样造成问题。但是如果`InputStream`由于`Exception or`其他故障而关闭，在这种情况下您的代码将失败，因此最好检查是否`InputStream`可用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T15:17:46.860

假设您需要打开的不是一个文件，而是两个文件。你会做

```
final InputStream in = new FileInputStream(file1);
final OutputStream out = new FileOutputStream(file2);
try {
    // ...
} finally {
    out.close();
    in.close();
} 
```

如果`out`打开失败，你会得到一个异常，因为它在`try`块外`in`不会被关闭在`finally`块中。

在另一种方法中：

```
InputStream in = null;
OutputStream out = null;
try {
    in = new FileInputStream(file1);
    out = new FileOutputStream(file2);
    // ...
} finally {
    if (out != null) out.close();
    if (in != null) in.close();
} 
```

如果`out`无法打开，您将转到`finally`块并关闭两个流。如果`in`打开失败，你将进入 finally 块，并且只释放`in`- 因为`out==null`.

**编辑**

正如 aetheria 所提到的，该代码无法正常工作，因为`close()`在 Java 中会引发异常。它可以通过将每个资源释放放在它自己的块中来轻松`try`修复`catch`：

```
InputStream  in  = null;
OutputStream out = null;
try {
    in = new FileInputStream(file1);
    out = new FileOutputStream(file2);
    // ...
} finally {
    try{ out.close(); }catch(Exception e){}
    try{ in.close();  }catch(Exception e){}
} 
```

我放弃了空检查 - 如果`in`or`out`为空，它会抛出一个`NullPointerException`将被忽略的。我忽略`close`异常的原因是处理方法首先不应该抛出异常。如果需要处理关闭异常，您始终可以在块**之后再次关闭流。**`finally`这样，任何*可以*关闭的流都将已经关闭（因此您不必担心），并且您可以`close`更优雅地处理任何异常。

现在，aetheria 还建议为每个资源放置一个单独的`try`-`finally`块，如下所示：

```
final InputStream in = new FileInputStream(file1);
try {
    final OutputStream out = new FileOutputStream(file2);
    try {
        // ...
    } finally {
        out.close();
    }
} finally {
    in.close();
} 
```

这行得通，但即使只有两个资源，它也不那么优雅，因为它拆分了分配和释放代码，使得跟踪它变得更加困难（至少在我看来）。

# c# - Dynamics 2011 SDK 通用“添加新记录”功能

> ID：12199714
> 
> 赞同：0
> 
> 时间：2012-08-30T14:54:18.940
> 
> 标签：c#, sdk, dynamics-crm-2011

我正在尝试编写一个通用 C# 函数来向给定实体添加新记录。问题是，在加载现有记录之前，我无法分辨每个属性的类型，所以我遇到了错误。我确信有办法做到这一点。

以下代码片段显示了我所拥有的：

```
foreach (DataRow row in data.Rows) // <== gets data for new records from DataTable
{
    entity = new Entity(this.Entity); // <== an existing entity type
    Type columnType;
    foreach (SourceColumn column in this.Columns)
    {
        columnType = entity[column.Name].GetType(); // <== fails because not loaded
        entity[column.Name] = Convert.ChangeType(row[column.Name], columnType);
    }
    xrm.Create(entity);
} 
```

我应该怎么做？

有没有办法在不加载实体记录的情况下加载实体定义？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:15:48.420

我认为在这种情况下，您最好使用元数据 Web 服务。

如果您使用[此处](http://msdn.microsoft.com/en-us/library/gg509035.aspx#BKMK_RetrieveAttribute)`RetrieveAttributeRequest`描述的 a 。

然后这将返回一个`RetrieveAttributeResponse`with `AttributeMetadata`( [MSDN)](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.attributemetadata_members "MSDN")，它具有`AttributeType`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:01:22.320

你可以使用反射。

所以你的代码看起来像这样

```
var columnType = entity.GetType().GetProperties().First(p => p.Name == column.Name).GetType(); 
```

# asp.net - 当我更改 assemblyversion="1.0.0.0" 而不是 assemblyversion="1.0.*" 时会出现什么错误

> ID：12199717
> 
> 赞同：-3
> 
> 时间：2012-08-30T14:54:26.057
> 
> 标签：asp.net

当我更改 assemblyversion="1.0.0.0" 而不是 assemblyversion="1.0.*" 时会出现什么错误

1）将.net framework 4.0转换为更高版本是否会出现任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:41:33.593

我不确定我是否完全理解您的要求，但总的来说，程序集版本号差异的影响取决于程序集的引用方式。

如果您添加对程序集的引用，并为该引用配置设置`Specific version`，`True`则在编译项目时应该会给您一个错误或警告。如果设置`Specific version`为`False`，这应该不是问题（也就是说，假设程序集的引用版本确实包含从使用程序集的代码中调用的类和方法等）。

# sql - SQL：控制返回多少记录

> ID：12199719
> 
> 赞同：1
> 
> 时间：2012-08-30T14:54:39.537
> 
> 标签：sql, database, postgresql

我有一个电影数据库，其中包含电影、演员和导演的表格。每部电影在电影表中占据一行。几乎我所有的查询都需要连接到其他表，这样一个 LIMIT 50、偏移量 0 的查询会返回大约 4 部电影的完整数据。下面是一个示例查询。我该如何修改它以确保获取正好 10 部电影的数据？

```
SELECT movie.id, movie.title, star.name, star.name_url, dir.name, 
       dir.name_url, genre.name, genre.name_url 
FROM movie 
        LEFT JOIN actor 
             ON (movie.id = actor.movie_id) 
        LEFT JOIN person AS star 
             ON (actor.person_id = star.id) 
        LEFT JOIN director 
             ON (movie.id = director.movie_id) 
        LEFT JOIN person AS dir 
             ON (director.person_id = dir.id) 
        LEFT JOIN genre_classification 
             ON (movie.id = genre_classification.movie_id) 
        LEFT JOIN genre 
             ON (genre_classification.genre_id = genre.id)
WHERE (movie.id > 0) 
ORDER BY movie.id 
LIMIT 50 OFFSET 0; 
```

我正在使用可能无关紧要的 PostgresSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:01:54.950

你去（未经测试）：

```
SELECT movie.id, movie.title, star.name, star.name_url, dir.name, 
       dir.name_url, genre.name, genre.name_url 
FROM 
        (SELECT * FROM movie WHERE movie.id > 0 ORDER BY movie.id LIMIT 10) movie
        LEFT JOIN actor 
             ON (movie.id = actor.movie_id) 
        LEFT JOIN person AS star 
             ON (actor.person_id = star.id) 
        LEFT JOIN director 
             ON (movie.id = director.movie_id) 
        LEFT JOIN person AS dir 
             ON (director.person_id = dir.id) 
        LEFT JOIN genre_classification 
             ON (movie.id = genre_classification.movie_id) 
        LEFT JOIN genre 
             ON (genre_classification.genre_id = genre.id) 
```

编辑：通过将所有条件放入子选择中，您无法控制源表中的哪些数据`movie`将用于 JOIN。性能方面，这也应该更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:46:52.133

仅供参考，下面的这个更聪明：它不使用`SELECT *`并且优化了性能（即使你没有问题）：

```
SELECT movie.id, movie.title, star.name, star.name_url, dir.name, 
       dir.name_url, genre.name, genre.name_url 
FROM movie 
        LEFT JOIN actor          ON (movie.id = actor.movie_id) 
        LEFT JOIN person AS star ON (actor.person_id = star.id) 
        LEFT JOIN director       ON (movie.id = director.movie_id) 
        LEFT JOIN person AS dir  ON (director.person_id = dir.id) 
        LEFT JOIN genre_classification ON (movie.id = genre_classification.movie_id) 
        LEFT JOIN genre          ON (genre_classification.genre_id = genre.id)
        JOIN (
            SELECT id
            FROM movie
            WHERE (id > 0) 
            ORDER BY id
            LIMIT 10
        ) AS sel ON (sel.id=movie.id)
ORDER BY movie.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:54:03.220

仍然未经测试。性能不如 tdk 给出的答案，但更具可读性，可以使用 WITH 语句编写子选择：

```
WITH 
  sub_movie AS (
    SELECT * FROM movie WHERE movie.id > 0 ORDER BY movie.id LIMIT 10
   )
SELECT
  sm.id,
  sm.title,
  star.name,
  star.name_url,
  dir.name,
  dir.name_url,
  genre.name,
  genre.name_url
FROM
  sub_movie sm
    LEFT JOIN actor 
         ON (movie.id = actor.movie_id) 
    LEFT JOIN person AS star 
         ON (actor.person_id = star.id) 
    LEFT JOIN director 
         ON (movie.id = director.movie_id) 
    LEFT JOIN person AS dir 
         ON (director.person_id = dir.id) 
    LEFT JOIN genre_classification 
         ON (movie.id = genre_classification.movie_id) 
    LEFT JOIN genre 
         ON (genre_classification.genre_id = genre.id) 
```

我建议不要调用 PK 列`id`，而是`my_table_id`使用智能连接语法，例如

```
 LEFT JOIN director USING (director_id) 
```

祝你好运。

# git - Github rebase upstream/master 与 origin/master

> ID：12199723
> 
> 赞同：11
> 
> 时间：2012-08-30T14:54:46.290
> 
> 标签：git, github, git-rebase, github-for-windows

我对 github 社交编码比较陌生，并且在遵循 github 指南时遇到了麻烦。我将尝试描述发生的事情以及我想要实现的目标——希望更有经验的 git 向导可以帮助我弄清楚到达那里所需的街机命令。

*   **原始项目**：[https ://github.com/phatboyg/MassTransit](https://github.com/phatboyg/MassTransit)
*   **我的叉子**：[https ://github.com/davidcie/MassTransit](https://github.com/davidcie/MassTransit)
*   **平台**：Windows，带有 Github for Windows + 它的 PowerShell

### 发生了什么

1.  **我在 2012 年7 月**分叉了 MassTransit 。当时它的*主分支是 v2.1.1 版本，最后一次提交是在 2012 年***3 月 29 日**。
2.  按照 github 的建议，我开始在主题分支上编写一些更改。
3.  几次提交之后，当功能完成时，我将我的主题分支合并到我克隆的本地*master*中，然后将其推送到 github。
4.  自2012 年**3 月 29 日**以来，MassTransit 一直在其*开发*分支上进行开发。构成 v2.6.0 的所有这些更改最近都与其*主版本合并。*

### 我想做的事

我想获得合并到*upstream/master*的所有更改。最好作为他们各自的提交，而不是数百个文件的大规模提交。因为我*在前* *上游/主*服务器上进行开发（日期为 2012 年 3 月 29 日），我想实际上需要在 3 月 29 日的最后一次*上游/主*服务器更改和我 8 月 8 日的第一次提交之间“插入”一些提交，并且然后在此之上添加后来发生的那些。**我怎么做？**

（我也不想在这个过程中破坏我的提交/分叉；-）

### 我试过的

```
git checkout master
git remote add upstream git://github.com/phatboyg/MassTransit.git
git rebase upstream/master
git push 
```

但是，它不会让我这样做`git push`，抱怨我的本地提示是 10 次提交落后于原点（可能是我在我的主题分支上所做的提交，后来合并到*origin/master*？）。

### 建议？

看来我可能被建议咬了。例如。也许创建一个单独的分支会更好，例如。*local-master*，并将其视为......好吧，我自己的主人。那么*master*只会在那里与*upstream/master*保持联系，我偶尔会将*origin/master*重新设置为*upstream/master并与**origin/local-master*合并...

你们是如何管理你的叉子的？

### 其他问题

我一直无法找到一种方法来可视化分支历史、哪个分支与另一个分支以及何时合并等等。Github for Windows 仅显示当前所选分支的平面历史记录（这里是悲伤的脸）。该网站确实有*一些*网络可视化（[这里是 MassTransit 的一个](https://github.com/phatboyg/MassTransit/network)），但这感觉比[TortoiseHg 中的图表提供的](http://tortoisehg.bitbucket.io/screenshots.html#history)信息要少得多。我错过了一些明显的东西吗？其他人是否只记得什么与什么以及何时合并？

### *编辑（8 月 31 日）*

我正在分享一个[穷人的可视化](http://imageshack.us/photo/my-images/717/gitproblem.png/)来帮助解释发生了什么。

1.  **当C1**在*upstream/master*上最新时，我分叉了。
2.  然后我在我的*origin/feature-1*上开发。
3.  其中一项功能已完成，我将其与我的*origin/master*合并。
4.  当*upstream/mega-feature*完成后，它与*upstream/master合并，有效地将***C2**和**C3**复制到*upstream/master*。（或者也许*upstream/master*是用**upstream** */mega-feature*重新定位的？）
5.  我现在想将**C2**、**C3**和**C4**复制到我的*origin/master*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T22:43:03.213

我假设您将或已经`origin`为您的 fork 设置了一个遥控器，并且`upstream`（如前所述）同样如此。

然后我会做一个提取，`upstream`这样你就可以将他们的所有分支机构都放在本地。然后，您可以在 repos 之间进行比较，看看在分歧日期或附近是否有共同的提交。

可视化在`gitk --all`这里很有用。不要忘记，即使你做了一个 rebase，旧的提交系列仍然存在，所以你可以给它一个名字

* * *

[编辑] 冗长的描述。

显然，合并提交正在“妨碍”，因此需要进行按摩*，*以便可以再次使存储库同步。

1.  在您当前的头部创建一个`temp`分支，因此不会丢失任何内容。
2.  `reset`你的主分支回到你和上游之间的最后一个共同提交。
3.  `reset`您的功能分支到合并之前。
4.  `checkout`合并提交以获得您期望的工作树，然后
5.  切换到您的功能分支（无需检查任何内容！）
6.  `commit`您`feature`分支上的固定工作树（即没有合并）。

您现在有一条干净的线路`master`，一条干净但旧的线路`feature`，以及任何合并后的开发`temp`。如果 Happy，您应该可以将其强制推送到您的`origin`.

1.  `pull`从上游 - 它（即`master`等）应该都快进。
2.  `rebase`那些后合并开发从`temp`到`feature`（如果需要）。
3.  `rebase` `feature`到您在 master 上熟悉的最后一次提交（应该相对容易）。
4.  `rebase` `feature`（再次）到 master 上的最新提交，随时修复（如果很容易，请结合最后一步；-）。

这应该最终为您提供了一个清晰的功能开发路线，并且适合在没有任何冲突的情况下向上游拉动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:29:46.410

这里有一些想法。

樱桃采摘方法：

```
git checkout master
git cherry-pick C2..C4 
```

新的分支变基方法：

```
git checkout upstream/master
git branch new-master
git rebase master
# new-master should now look like what you want, once you confirm this
git branch -m master old-master
git branch -m new-master master 
```

Rebase --onto 方法（让你选择你想要的提交范围）：

```
git checkout master
git rebase --onto master C2 C4 # puts you into a detached HEAD
git branch new-master
# rename branch as above if it is correct 
```

# visual-studio-2010 - 报表查看器 11 (2012) Visual Studio 2010

> ID：12199724
> 
> 赞同：7
> 
> 时间：2012-08-30T14:54:48.010
> 
> 标签：visual-studio-2010, reporting-services, sql-server-2012

我正在使用 Visual Studio 2010 并安装了“Microsoft Report Viewer 2012 Runtime”，希望在 SQL 2012 中测试新的报告系统。之后，我从我的 Web.config 中清除了对“Microsoft.ReportViewer.WebForms”的引用并删除了 ReportViewer从我的工具箱中控制并添加新版本 11 ReportViewer。

我将新控件添加到测试页面，其中一个它将此寄存器添加到测试页面：

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %> 
```

并将这些条目添加到 Web.config：

```
<buildProviders>
<add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</buildProviders>

<httpHandlers>
<add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" />
</httpHandlers>

<handlers>
<add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

工具箱中的控件是版本 11 的添加，但系统一直在尝试引用 verion 10 版本。此外，当我尝试编译它时，我得到了错误：

```
The type 'Microsoft.Reporting.WebForms.ReportViewer' exists in both 'c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\10.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll' and 'c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\11.0.0.0__89845dcd8080cc91\Microsoft.ReportViewer.WebForms.DLL' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T16:43:52.440

我想我有完全相同的问题。如果是这样，我的解决方案是删除 web.config 中引用 ReportViewer 的所有条目，然后在 References 中执行相同操作，构建项目，然后在页面中重新添加一个 reportviewer。

web.config 将使用新版本的新处理程序和程序集进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:57:24.210

我遇到了同样的错误，并通过执行以下操作解决了它：

*   在 aspx 页面（HTML 代码）中，更新了 @Register Version 值以对应于我正在使用的程序集版本，并使用程序集的正确值更新了 PublicKeyToken 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T15:58:24.040

在您的网络配置中，这意味着您已经指定了 v 10 和 11 dll。删除一个或另一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T10:04:50.060

我已经从 package.config 中删除了以下条目并且它有效

```
 <package id="MicrosoftReportViewerWebForms_v10" version="1.0.0" targetFramework="net45" /> 
```

# javascript - 在 DOM 加载时触发函数

> ID：12199726
> 
> 赞同：0
> 
> 时间：2012-08-30T14:54:51.393
> 
> 标签：javascript, jquery

我有这个小功能：

```
$('.chrnumberpickerDiv select').change(function(){
    var sel = $(this),
    value = sel.closest('.chrnumberpickerDiv').find('.chrnumberpickerDivText');
    value.text(sel.find(':selected').text());
}).one('change'); 
```

我的问题是我还需要在 DOM 加载时触发它。我已经尝试过`.trigger('change')`，`.one('change')`但似乎它进入了一个循环并且永远不会停止刷新我的页面。那么我可以做些什么来触发 DOM 上的事件，但又不会对其他事件造成任何损害或使函数进入循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:00:27.223

如果我理解您的问题，您需要在选择更改时触发一个函数，并在页面加载时以编程方式触发它以填充初始值：

```
// define the handler
var changeHandler = function() {
    var sel = $(this),
    value = sel.closest('.chrnumberpickerDiv').find('.chrnumberpickerDivText');
    value.text(sel.find(':selected').text());
};

// bind the handler
$('.chrnumberpickerDiv select').change(changeHandler);

$(document).ready(function () {
    // execute the handler on page load
    // use proxy to change what "this" means in the handler
    // (jQuery does this for you when you bind a handler through jQuery)
    $.proxy(changeHandler, $('.chrnumberpickerDiv select')[0]));
}); 
```

[代理文档](http://api.jquery.com/jQuery.proxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T14:56:51.460

试试这个，而不是你的代码

```
$(document).ready(function() {
    $('.chrnumberpickerDiv select').change(function(){
        var sel = $(this),
        value = sel.closest('.chrnumberpickerDiv').find('.chrnumberpickerDivText');
        value.text(sel.find(':selected').text());
    }).one('change');
}); 
```

您必须注意不要分配多个更改功能。否则，当更改事件发生时，它们都会被调用。

# android - 什么可能是android中此错误的原因

> ID：12199727
> 
> 赞同：0
> 
> 时间：2012-08-30T14:54:52.093
> 
> 标签：android, sqlite

我收到此错误：

```
USER_COMMENT=
APP_VERSION_CODE=44
APP_VERSION_NAME=2.0
ANDROID_VERSION=4.0.3
PHONE_MODEL=Transformer Prime TF201
CUSTOM_DATA=
STACK_TRACE=java.lang.NullPointerException
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157) 
at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:231)
at com.mypackage.BLL_FriendRequest.findRowByID(BLL_FriendRequest.java:75)
at com.mypackage.Global$6.onComplete(Global.java:400)
at com.mypackage.AsyncRequestListener.onComplete(AsyncRequestListener.java:58)
at com.mypackage.AsyncRunner$3.run(AsyncRunner.java:360) 
```

我检查了 SQLiteOpenHelper.java 并且在第 157 行它正在做某事`mContext.CreateTable(bla bla bla);`......所以我认为上下文是空的......可以使用什么来代替......尝试使用`getApplicationContext()`但没有用。

这种异常也不会经常发生，但有些用户正在经历这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:30:04.463

显然 (!) BLL_FriendRequest::75 正在调用 getReadableDatabase。

然后它调用 getWritableDatabase，因为这就是 getReadableDatabase 所做的。

它不是调用 createTable(blablabla)（因为表的创建取决于您），而是调用 openOrCreateDatabase。

我看不出上下文如何为空，因为您可能在那之前使用过它（它通常是来自活动内部的“this”）。在上下文的本机实现中可能会引发异常。

无论如何，您可能需要在您的上下文中测试 null 并尝试/捕获数据库创建。这可能是暂时的，您可以稍后再试。

# playframework - 接口在类加载器中不可见

> ID：12199732
> 
> 赞同：2
> 
> 时间：2012-08-30T14:55:13.653
> 
> 标签：playframework, classloader, wsdl2java

我是新来玩的！框架和使用 wsdl2java 工具。我正在开发一个游戏！需要与 SOAP Web 服务交互的应用程序。我有 WSDL 并使用 jaxws 从它创建对象。它正在创建一堆 java 类和 1 个接口。一旦我尝试进行 web 服务调用，我就会收到一个错误，即类加载器找不到接口。这是我的代码：

```
MyWebserviceBeanService service = new MyWebserviceBeanService();
MyWebserviceRemote mwr = service.getMyWebserviceBeanPort();
LoginResponse response = mwr.loginUser("xxx", "xxx"); 
```

请注意，“MyWebserviceRemote”是接口。的代码`getMyWebserviceBeanPort`很常见，因为它是自动生成的，但这里是：

```
@WebEndpoint(name = "MyWebserviceBeanPort")
public MyWebserviceRemote getMyWebserviceBeanPort() {
    return super.getPort(new QName("http://xxxxxxxxxx/", "MyWebserviceBeanPort"), MyWebserviceRemote.class);
} 
```

当我尝试调用一个方法时，例如`loginUser`上面的方法，我得到以下堆栈跟踪：

```
play.exceptions.JavaExecutionException: interface xxxx.xxxx.xxxx.MyWebserviceRemote is not visible from class loader
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:237)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.IllegalArgumentException: interface xxxx.xxxxx.xxxx.MyWebserviceRemote is not visible from class loader
    at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:736)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:408)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:384)
    at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:366)
    at javax.xml.ws.Service.getPort(Service.java:119)
    at xxxx.xxxx.xxxx.MyWebserviceBeanService.getMyWebserviceBeanPort(MyWebserviceBeanService.java:72)
    at controllers.MyController.index(MyController.java:26)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:557)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:508)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:484)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:479)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    ... 1 more 
```

我真的不知道如何解决这个问题，甚至不知道如何调试它。我在哪里看？我从哪里开始？我使用 SoapUI 测试了 web 服务，它工作正常。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T12:58:35.320

这是由 play framework 中的 jar 文件冲突引起的（总共 3 个 jar，名称中带有“jax”）。我删除了它们，现在一切都很好。为描述性错误消息欢呼:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-22T09:34:01.510

我有同样的问题，所以我不得不从依赖项之一中排除这个依赖项：

```
<exclusions>
    <exclusion>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>rt</artifactId>
    </exclusion>
</exclusions> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-04T18:34:30.877

看看你是否启用了 spring-dev-tools。如果可以接受，请将其从依赖项中删除：

```
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-devtools</artifactId>
  <scope>runtime</scope>
</dependency> 
```

# html - 检测 HTML5 媒体捕获 API 支持

> ID：12199736
> 
> 赞同：11
> 
> 时间：2012-08-30T14:55:38.250
> 
> 标签：html, api, media, capture

有没有办法检测浏览器是否支持我正在构建的移动网站的 HTML5 Media Capture API？我似乎只能找到检测`getUserMedia()`支持的解决方案。

我希望能够向移动用户展示以下两种情况之一：

*   用户的浏览器支持API，所以会显示两个上传按钮，一个是激活相机，一个是激活图库。
*   用户的浏览器不支持 API，所以只显示一个上传按钮，如果他们的浏览器支持接受参数，希望能激活图库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-10T14:22:32.387

> 用户的浏览器支持API，所以会显示两个上传按钮，一个是激活相机，一个是激活图库。

（目前）无法创建 2 个单独的 HTML 按钮：一个用于（仅）库，一个用于（仅）相机（我在[本文](https://addpipe.com/blog/correct-syntax-html-media-capture/)中介绍了所有可能的 HTML 媒体捕获选项）

使用 `<input type="file" accept="image/*;">`，系统会提示您在拍摄照片或选择现有照片之间进行选择：

[![在此处输入图像描述](../Images/0649f81fb822118b2d000555595c2347.png)](https://i.stack.imgur.com/xRO3g.png)

> 用户的浏览器不支持API，所以只显示一个上传按钮，如果他们的浏览器支持accept参数，希望能激活图库

**支持如下：**

*   Android 2.2+ 和 iOS6.0+ 支持以上代码
*   Android 3.0+ 支持`capture`并将用户直接带到相机前
*   iOS6 到 10 不支持`capture`（始终显示提示）
*   桌面浏览器不支持 HTML 媒体捕获

检测支持恢复到检测上述浏览器。

支持参考：[this 2013 O'Reilly book](https://books.google.com.au/books?id=gswdarRZVUoC&pg=PA263&dq=%22file+upload+compatibility+table%22) and [my testing](https://addpipe.com/blog/correct-syntax-html-media-capture/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-20T12:55:18.767

您可以使用[modernizr](https://modernizr.com/)，[在文档页面上，](https://modernizr.com/docs)您可以在[支持和检测到的功能表中](https://modernizr.com/docs#features)看到它们检测到[HTML Media Capture](https://github.com/Modernizr/Modernizr/blob/74655c45ad2cd05c002e4802cdd74cba70310f08/feature-detects/forms/capture.js)和[getUserMedia](https://github.com/Modernizr/Modernizr/blob/74655c45ad2cd05c002e4802cdd74cba70310f08/feature-detects/webrtc/getusermedia.js)

# jakarta-ee - Java EE 应用程序架构中的单例与无状态 bean

> ID：12199738
> 
> 赞同：3
> 
> 时间：2012-08-30T14:55:39.000
> 
> 标签：jakarta-ee, architecture, singleton, ejb, stateless-session-bean

我项目核心的部分业务逻辑必须对链接数据执行搜索。目前，我已经使用像这样的单例会话 bean 实现了这部分（SPARQL 是 RDF 模型上的一种查询语言，它是使用链接数据构建的）。

```
@Singleton
@Startup
public class SparqlEngine {

    @PostConstruct
    private void init() {
        // Initialiaze the model by connecting to the database
    }

    public ResultSet searchBySparql(String sparqlQuery) {
        // Perform the search on the model which is stored in the database
    }

    @PreDestroy
    private void cleanup() {
        // Close database connection
    }

} 
```

这个 EJB 由另一个名为 EJB 的 EJB 暴露给我的应用程序的其他部分，该 EJB`SparqlEndpoint`负责将 EJB 转换`ResultSet`为更舒适的`SearchResult`对象，该对象包含字符串形式的模型，其语法由客户端指定，结果总数和其他元数据。`SparqlEndpoint`EJB 很简单，`@Stateless`并且具有客户端使用的本地接口。这些客户端包括 JSF 托管 bean 和几个将其公开为 SOAP 和 RESTful Web 服务的 EJB。

这是我想到的最合理的架构，但我需要知道我是否做得对。我应该像现在这样使用`Singleton`bean 来实现核心，还是`Stateless`会话 bean 更合适？数据库连接初始化通常至少需要几秒钟，注意它可能比它是 NoSQL 并且不支持事务更有用。我不打算向这个 bean 添加诸如 write 方法之类的任何东西。其他 EJB 是无状态的是否正确？如果我想将我的索引引擎（在数据库上执行写入）公开为另一个 EJB，我应该如何实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:05:13.733

这很容易，使用单例，您可以更轻松地处理并发访问资源的问题。您可以使用容器管理的并发或 bean 管理的并发。

通过使用无状态会话 bean，您将获得性能，EJB 容器创建一个包含这些无状态 bean 的许多实例的池，并在请求到来时将它们借给客户端。即更好的多用户访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:55:32.447

> ..我认为在部署时执行一次并让单例处理已初始化模型上的所有数据库访问任务可能是个好主意（对于应用程序快速响应查询至关重要）...

不应在 SLSB 内手动管理与 DB 的连接。您应该考虑利用 Datasource api。管理网络资源（例如数据库连接等）最好留给应用服务器 - 特别是在像您拥有的容器管理环境中。App Server 初始化并维护一个连接池。

> ... Endpoint EJB 将来可能还有其他与实际引擎关系不大的任务。最后，Web 服务 EJB 也将在未来添加...

您在此评论中两次使用了**未来**一词。这是推测并引入了[意外复杂性](http://en.wikipedia.org/wiki/Accidental_complexity)。当需要时，您总是可以重新考虑因素。旨在保持简单。为未来设计和编码总是很昂贵的。

> ..dump 文件，用于我们的 NoSQL 集群不可用的测试环境......

为什么不使用一个好的[模拟](https://stackoverflow.com/questions/22697/whats-the-best-mock-framework-for-java)框架而不是使用转储文件？单元测试不应该依赖于环境

# asp.net - 为什么我收到“对象引用未设置为对象的实例”。错误？

> ID：12199739
> 
> 赞同：0
> 
> 时间：2012-08-30T14:55:45.087
> 
> 标签：asp.net, vb.net

GridView1我正在尝试从这里切换我在gridview上的代码：

```
 <asp:SqlDataSource ID="dsPar" runat="server" ConnectionString="<%$ ConnectionStrings:connstring %>"
        SelectCommand="SELECT ID,  FileNumber, address, phone from myTable ORDER BY ID"  FilterExpression="ID like '%{0}%'">
        <FilterParameters>
        <asp:ControlParameter Name="StreetSrch" ControlID="searchBox" PropertyName="Text" />
        </FilterParameters>
        </asp:SqlDataSource> 
```

对此：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim strQuery As String = "SELECT ID,  FileNumber, address, Phone from MyTable WHERE Id LIKE '%@strSearch%'  ORDER BY Id"

        Dim cmd As New SqlCommand(strQuery)
        Dim dt As DataTable = GetData(cmd)
        Dim CheckBoxArray As ArrayList
        If ViewState("CheckBoxArray") IsNot Nothing Then
            CheckBoxArray = DirectCast(ViewState("CheckBoxArray"), ArrayList)
        Else
            CheckBoxArray = New ArrayList()
        End If

        If Not IsPostBack Then
            Gridview1.DataBind()
            Dim CheckBoxIndex As Integer
            Dim CheckAllWasChecked As Boolean = False
            Dim chkAll As CheckBox = DirectCast(GridView1.HeaderRow.Cells(0).FindControl("chkAll"), CheckBox)
rest of code....
End If
End Sub 
```

最后，下面是标记的快照：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" AllowPaging="True"
                OnPageIndexChanging = "OnPaging" HeaderStyle-CssClass = "header" Font-Size = "10pt" 
                 AlternatingRowStyle-BackColor = "#C2D69B" OnRowDataBound = "RowDataBound" AllowSorting="true" 
                 PageSize="20" CssClass="Gridview" 
                 GridLines="None"> 
```

我正在`"Object reference not set to an instance of an object."`以下行：

第 44 行：Dim chkAll As CheckBox = DirectCast(GridView1.HeaderRow.Cells(0).FindControl("chkAll"), CheckBox)

知道如何解决这个问题吗？

代码很长，我不想在这里全部发布。如果需要，我可以发布更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:59:37.443

尝试调暗作为对象的新实例，这可能会导致您的问题？当我得到这个特殊的异常时，通常是因为我在没有“新”的情况下暗淡了一些东西

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:04:52.223

您可以使用断点和监视窗口来找出您的代码到底哪里出错了。每当您尝试对`NullReferenceException`变量调用方法时都会抛出`Nothing`.

Option Infer On 的代码示例：

```
Dim firstHeaderCell = GridView1.HeaderRow.Cells(0)
Debug.Assert(firstHeaderCell IsNot Nothing, "Couldn't find the first header cell")
Dim chkAllControl = firstHeaderCell.FindControl("chkAll")
Debug.Assert(chkAllControl IsNot Nothing, "Couldn't find a control named chkAll")
Dim chkAll As CheckBox = TryCast(chkAllControl, CheckBox)
Debug.Assert(chkAll IsNot Nothing, "chkAll exists but it isn't a CheckBox") 
```

这些断言完全是矫枉过正，但不能给出带有“断点”和“观察窗口”变量的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:05:58.430

IT 抛出空引用异常，因为

```
GridView1.HeaderRow.Cells(0).FindControl("chkAll") 
```

没有找到一个复选框，所以它返回 null (Nothing) 所以你实际上正在做的就是试图将 Nothing 转换为一个复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:01:45.620

中断该行的调试器。然后，您可以使用“快速查看”功能查看该行的某些部分以查看哪些内容为空。首先查看 GridView1。如果不为空，请查看 GridView1.HeaderRow。继续，直到找到空对象。

# c# - 文件损坏，无法打开，C#，XmlWriter

> ID：12199740
> 
> 赞同：0
> 
> 时间：2012-08-30T14:55:54.463
> 
> 标签：c#, xmlwriter

尝试使用 XmlWriter 创建 XML 报告。奇怪的是，对于大量记录，我在尝试使用 MS Excel 打开报告文件时收到以下错误：“文件已损坏，无法打开”。但是，我认为报告文件没有损坏，与其他编辑器（例如记事本）一样，我能够打开文件并确保内容正常。

在下面的代码中，对于 1995 年的上限，循环可以正常工作，但是当上限为 1996 年时，它会失败。

提前致谢，

==================================================== =======================

```
 private static void WriteReport(XmlWriter writer, ReportingFilters filters, DataContext context)
    {

        writer.WriteStartElement("Table"); // Begin Table

        writer.WriteAttributeString("ss", "ExpandedColumnCount", null, "7");
        writer.WriteAttributeString("ss", "ExpandedRowCount", null, "2000");
        writer.WriteAttributeString("x", "FullColumns", null, "1");
        writer.WriteAttributeString("x", "FullRows", null, "1");

        writer.WriteStartElement("Column");
        writer.WriteAttributeString("ss", "Width", null, "200");
        writer.WriteEndElement();

        writer.WriteStartElement("Column");
        writer.WriteAttributeString("ss", "Width", null, "125");
        writer.WriteEndElement();

        writer.WriteStartElement("Column");
        writer.WriteAttributeString("ss", "Width", null, "100");
        writer.WriteEndElement();

        writer.WriteStartElement("Column");
        writer.WriteAttributeString("ss", "Width", null, "75");
        writer.WriteEndElement();

        writer.WriteStartElement("Column");
        writer.WriteAttributeString("ss", "Width", null, "75");
        writer.WriteEndElement();

        // Write the title.
        writer.WriteStartElement("Row");
        writer.WriteStartElement("Cell");
        writer.WriteAttributeString("ss", "StyleID", null, "BorderedTitle");
        writer.WriteStartElement("Data");
        writer.WriteAttributeString("ss", "Type", null, "String");
        writer.WriteString("Selected Dates: " + filters.StartDate.ToShortDateString() + " -" + filters.EndDate.ToShortDateString());
        writer.WriteEndElement();
        writer.WriteEndElement();
        writer.WriteEndElement();

        // Write the title.
        writer.WriteStartElement("Row");
        writer.WriteStartElement("Cell");
        writer.WriteAttributeString("ss", "StyleID", null, "BorderedTitle");
        writer.WriteStartElement("Data");
        writer.WriteAttributeString("ss", "Type", null, "String");
        writer.WriteString("Date Report was Run: " + DateTime.Now.ToShortDateString());
        writer.WriteEndElement();
        writer.WriteEndElement();
        writer.WriteEndElement();

        //.. etc

        var reportResults = ReportingManager.GetHospitalHitRate(context, filters);
        var totalDemos = 0;
        var totalMatched = 0;

            // Loop works OK for 1995, 1996 fails with "The file is corrupt and cannot be opened"
            for (int m = 0; m < 1995; m++ )
            {
                writer.WriteStartElement("Row"); // Begin Content Row

                writer.WriteStartElement("Cell");
                writer.WriteStartElement("Data");
                writer.WriteAttributeString("ss", "Type", null, "String");
                writer.WriteString("aaaaaaaaaaaaaaaaaaaaaaa");
                writer.WriteEndElement();
                writer.WriteEndElement();

                writer.WriteStartElement("Cell");
                writer.WriteStartElement("Data");
                writer.WriteAttributeString("ss", "Type", null, "String");
                writer.WriteString("bbbbbbbbbbbbbbb");
                writer.WriteEndElement();
                writer.WriteEndElement();

                writer.WriteStartElement("Cell");
                writer.WriteStartElement("Data");
                writer.WriteAttributeString("ss", "Type", null, "String");
                writer.WriteString("cccccccccccc");
                writer.WriteEndElement();
                writer.WriteEndElement();

                writer.WriteStartElement("Cell");
                writer.WriteStartElement("Data");
                writer.WriteAttributeString("ss", "Type", null, "String");
                writer.WriteString("dddddddddd");
                writer.WriteEndElement();
                writer.WriteEndElement();

                writer.WriteStartElement("Cell");
                writer.WriteStartElement("Data");
                writer.WriteAttributeString("ss", "Type", null, "String");

                //.. etc
                writer.WriteString("%");
                writer.WriteEndElement();
                writer.WriteEndElement();

                writer.WriteEndElement();

            }

        //.. etc

        writer.WriteEndElement(); // End Table.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:16:53.733

经过一番谷歌搜索后，我在 [http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx找到了“XML 电子表格参考”](http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx)

原来我一直在使用属性 ss:ExpandedRowCount，并将其设置为 2000。在记录数超过此数字的情况下，XML 电子表格文档被视为无效。一旦我删除了这个可选属性，生成的报告就可以正常工作。

属性：ss:ExpandedRowCount 描述：指定此表中的总行数，不考虑稀疏性。如果指定的行和列扩展为完整大小，则此属性定义表的整体大小。如果指定，此属性必须与表同步。表中的行索引应从 1 开始并转到 ExpandedRowCount。如果此值与表不同步，则指定的 XML 电子表格文档无效。

# javascript - 正则表达式未按给定条件过滤

> ID：12199743
> 
> 赞同：0
> 
> 时间：2012-08-30T14:56:05.553
> 
> 标签：javascript, jquery, regex

我想找出给定的单词是否不包含 < > : | “。所以我使用下面的javascript代码块来找到它。但它接受所有没有这些字符的值。

```
$(document).ready(function() {
    $('#chkResult').click(function() {
        $('#resultDiv').text(/[^:<>\|"]+/.test($('#dataText').val()));
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:01:11.383

你必须设置正则表达式来测试你的字符串从开始到结束用`^`and `$`：

```
/^[^:<>\|"]+$/.test($('#dataText').val()) 
```

否则，如果测试字符串包含至少一个与您的组不匹配的字符，则测试通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:01:02.310

只需锚定正则表达式：

```
$(document).ready(function() {
    $('#chkResult').click(function() {
        $('#resultDiv').text(/^[^:<>\|"]+$/.test($('#dataText').val()));
//                      here__^    here__^
    });
});​ 
```

# c# - WPF FlowDocument 布局

> ID：12199745
> 
> 赞同：0
> 
> 时间：2012-08-30T14:56:06.880
> 
> 标签：c#, .net, wpf, flowdocument

我有一个 FlowDocument，我需要在其中的任意位置插入许多动态文本片段。

例如，我需要将文本“Hello”放置在`x = 10`，将`y = 15`文本“World”放置在`x = 10`, `y = 20`。

我目前正在使用`Figure`. `Run`我用文本创建 a ，将其放入 a `Paragraph`，然后将所有内容放入 a `Figure`。从那里我可以设置它的`VerticalOffset`和`HorizontalOffset`。然后我将所有数字放在`Paragraph`我添加到`FlowDocument`.

一切都很顺利（这是我能想到的最简单的方法），直到我不得不将两三个文本片段**放在同一行**（相同`y`但不同`x`）。

出于某种原因，它将每个都`Figure`放在一个新行上，而不是把它们都放在同一行上，让我来说明一下：

**预期的：**

文本1 文本2 文本3

**实际的：**

文本1
              文本
                                                  2 文本3

有人知道如何删除数字之间的换行符吗？如果您对这个问题有更好的方法，我也愿意接受建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:20:15.507

我放弃了 FlowDocument 并使用 XAML 并使用了 Canvas... 让我的生活更轻松，能够以可视方式放置所有文本字段... 从长远来看也更容易维护。

# javascript - 谷歌组合图过渡动画

> ID：12199748
> 
> 赞同：0
> 
> 时间：2012-08-30T14:56:28.657
> 
> 标签：javascript, asp.net, html, google-visualization

今天我发现了谷歌的这些图表服务，我玩了一下似乎卡住了图表转换动画，我尝试在同一张表上查看两组不同的数据，这些数据在按钮单击时会发生变化，以下是代码，

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <button type="button" id="b1">Click Me!</button> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title>
  Google Visualization API Sample
  </title>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
  google.load('visualization', '1', {packages: ['corechart']});
  </script>
  <script type="text/javascript">
  // Some raw data (not necessarily accurate)
var rowData1 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                 'Rwanda', 'Average'],
                ['2004/05', 165, 938, 522, 998, 450, 114.6],
                ['2005/06', 135, 1120, 599, 1268, 288, 382],
                ['2006/07', 157, 1167, 587, 807, 397, 623],
                ['2007/08', 139, 1110, 615, 968, 215, 409.4],
                ['2008/09', 136, 691, 629, 1026, 366, 569.6]];
var rowData2 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                 'Rwanda', 'Average'],
                ['2004/05', 122, 638, 722, 998, 450, 614.6],
                ['2005/06', 100, 1120, 899, 1268, 288, 682],
                ['2006/07', 183, 167, 487, 207, 397, 623],
                ['2007/08', 200, 510, 315, 1068, 215, 609.4],
                ['2008/09', 123, 491, 829, 826, 366, 569.6]];

// Create and populate the data tables.
var data = [];
data[0] = google.visualization.arrayToDataTable(rowData1);
data[1] = google.visualization.arrayToDataTable(rowData2);

var options = {
  width: 400,
  height: 240,
  vAxis: {title: "Cups"},
  hAxis: {title: "Month"},
  seriesType: "bars",
  series: {5: {type: "line"}},
  animation:{
    duration: 1000,
    easing: 'out'
  },
};
var current = 0;
// Create and draw the visualization.
var chart = new google.visualization.ComboChart(document.getElementById('visualization'));
var button = document.getElementById('b1');
function drawChart() {
  // Disabling the button while the chart is drawing.
  button.disabled = true;
  google.visualization.events.addListener(chart, 'ready',
      function() {
        button.disabled = false;
        button.value = 'Switch to ' + (current ? 'Tea' : 'Coffee');
      });
  options['title'] = 'Monthly ' + (current ? 'Coffee' : 'Tea') + ' Production by Country';

  chart.draw(data[current], options);
}
drawChart();

button.onclick = function() {
  current = 1 - current;
  drawChart();
}
</script>
</head>
<body>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
</html> 
```

在这里[https://developers.google.com/chart/interactive/docs/animation?hl=nl-NL](https://developers.google.com/chart/interactive/docs/animation?hl=nl-NL)，拜托，我知道这是一个愚蠢的问题，但这似乎对我不起作用......我添加了引用和所有内容，但仍然没有给我任何东西，请任何人都可以使用 html 修复此代码以使其正常工作或提供一些信息，我将不胜感激 :) 非常感谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:47:56.437

不用担心，我找到了答案，我知道这一定是一个非常明显的答案，但这是给可能需要帮助的人的 :)

```
 <html>
      <head>
     <button type="button" id="b1" onclick="init();" >Click me!</button>  
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(init);
        function init(){
              var rowData1 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                         'Rwanda', 'Average'],
                        ['2004/05', 165, 938, 522, 998, 450, 114.6],
                        ['2005/06', 135, 1120, 599, 1268, 288, 382],
                        ['2006/07', 157, 1167, 587, 807, 397, 623],
                        ['2007/08', 139, 1110, 615, 968, 215, 409.4],
                        ['2008/09', 136, 691, 629, 1026, 366, 569.6]];
            var rowData2 = [['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua  Guinea',
                             'Rwanda', 'Average'],
                            ['2004/05', 122, 638, 722, 998, 450, 614.6],
                            ['2005/06', 100, 1120, 899, 1268, 288, 682],
                            ['2006/07', 183, 167, 487, 207, 397, 623],
                            ['2007/08', 200, 510, 315, 1068, 215, 609.4],
                            ['2008/09', 123, 491, 829, 826, 366, 569.6]];

            // Create and populate the data tables.
            var data = [];
            data[0] = google.visualization.arrayToDataTable(rowData1);
            data[1] = google.visualization.arrayToDataTable(rowData2);

            var options = {
              width: 400,
              height: 240,
              vAxis: {title: "Cups"},
              hAxis: {title: "Month"},
              seriesType: "bars",
              series: {5: {type: "line"}},
              animation:{
                duration: 1000,
                easing: 'out'
              },
            };
            var current = 0;
            // Create and draw the visualization.
            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            var button = document.getElementById('b1');
            function drawChart() {
              // Disabling the button while the chart is drawing.
              button.disabled = true;
              google.visualization.events.addListener(chart, 'ready',
                  function() {
                    button.disabled = false;
                    button.value = 'Switch to ' + (current ? 'Tea' : 'Coffee');
                  });
              options['title'] = 'Monthly ' + (current ? 'Coffee' : 'Tea') + ' Production by Country';

              chart.draw(data[current], options);
            }
            drawChart();

            button.onclick = function() {
              current = 1 - current;
              drawChart();
            }
        }
        </script>
      </head>
      <body>
        <div id="chart_div" style="width: 900px; height: 500px;"></div>
      </body>
    </html> 
```

# sql - sql查询找出每个部门的插槽总和

> ID：12199754
> 
> 赞同：0
> 
> 时间：2012-08-30T14:56:39.973
> 
> 标签：sql, sql-server-2008

我有一个 Table **tempslotsassignedfordept**如下

```
DEPT        ScheduledStartDate          ScheduledEndDate            TotalSlots

DevEng      2012-07-17 00:00:00.000     2012-08-28 00:00:00.000     39
DevEng      2012-07-17 00:00:00.000     2012-08-31 00:00:00.000     18
DevEng      2012-07-18 00:00:00.000     2012-08-29 00:00:00.000     9
DevEng      2012-07-19 00:00:00.000     2012-08-30 00:00:00.000     40
Prod        2012-07-19 00:00:00.000     2012-08-30 00:00:00.000     8
Rel         2012-07-19 00:00:00.000     2012-08-30 00:00:00.000     19
Rel         2012-07-19 00:00:00.000     2013-08-15 00:00:00.000     1 
```

我必须捕获每个部门的总时隙的上述总和。如果一个部门存在连续 3 天。
如果您看到上表，**则有部门 deveng 有连续三个预定开始日期为 2012-07-17、2012-07-18、2012-07-19。**

我正在尝试通过使用以下查询来查看结果，请您帮忙查看更多实现以查看确切结果吗？

```
SELECT  Tmain.DepartmentCode, 
                CONVERT(VARCHAR(20), Tmain.ScheduledStartDate, 101) 'ScheduledStartDate',
                SUM(Tmain.TotalSlots) 'Tmain.TotalSlots',T1Sub.TotalSlots 'T1SubTotalSlots', T2Sub.TotalSlots 'T2SubTotalSlots'

                FROM    tempSlotsAssignedForDept Tmain

                        INNER   JOIN (Select    DATEADD(DAY,1,T1.ScheduledStartDate) 'ScheduledStartDate',SUM(T1.TotalSlots) 'TotalSlots'
                                        FROM    tempSlotsAssignedForDept  T1 
                                                INNER JOIN tempSlotsAssignedForDept Tmain                    
                                                ON (T1.ScheduledStartDate = dateadd(day, -1, tmain.ScheduledStartDate ) and  
                                                    T1.DepartmentCode = tmain.DepartmentCode)
                                                GROUP BY T1.ScheduledStartDate ) T1Sub                        
                        ON Tmain.ScheduledStartDate = T1Sub.ScheduledStartDate

                        INNER   JOIN (Select    DATEADD(DAY,2,T2.ScheduledStartDate) 'ScheduledStartDate',SUM(T2.TotalSlots) 'TotalSlots'
                                        FROM    tempSlotsAssignedForDept  T2 
                                                INNER JOIN tempSlotsAssignedForDept Tmain                    
                                                ON (T2.ScheduledStartDate = dateadd(day, -2, tmain.ScheduledStartDate ) and  
                                                    T2.DepartmentCode = tmain.DepartmentCode)
                                                GROUP BY T2.ScheduledStartDate ) T2Sub                
                        ON Tmain.ScheduledStartDate = T2Sub.ScheduledStartDate

                GROUP BY    Tmain.DepartmentCode,Tmain.ScheduledStartDate,T1Sub.TotalSlots , T2Sub.TotalSlots 
                ORDER BY Tmain.ScheduledStartDate 
```

上面的查询是

```
DepartmentCode  ScheduledStartDate  Tmain.TotalSlots    T1SubTotalSlots T2SubTotalSlots
DevEng          07/19/2012          40                  9               57
Prod            07/19/2012          8                   9               57
Rel             07/19/2012          20                  9               57 
```

最终结果应如下所示。
因为部门 prod 和 rel 没有 3 天的 schedulestartdate 系列

```
DepartmentCode  ScheduledStartDate  Tmain.TotalSlots    T1SubTotalSlots T2SubTotalSlots
DevEng          07/19/2012          40                  9               57 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:42:59.513

这是您正在寻找的答案：

```
Select * from 
(
Select DepartmentCode,ScheduledStartDate,[Tmain.TotalSlots]
,(Select SUM(T1.TotalSlots) from tempSlotsAssignedForDept  T1 where t1.departmentCode=a.DepartmentCode
and T1.ScheduledStartDate = dateadd(day, -1, a.ScheduledStartDate )) T1SubTotalSlots 
,(Select SUM(T1.TotalSlots) from tempSlotsAssignedForDept  T1 where t1.departmentCode=a.DepartmentCode
and T1.ScheduledStartDate = dateadd(day, -2, a.ScheduledStartDate )) T2SubTotalSlots 
from 
(
SELECT  Tmain.DepartmentCode, 
CONVERT(VARCHAR(20), Tmain.ScheduledStartDate, 101) ScheduledStartDate,
SUM(Tmain.TotalSlots) 'Tmain.TotalSlots'
--,(Select SUM(T1.TotalSlots) from tempSlotsAssignedForDept t1 where t1.DepartmentCode=tmain.departmentcode 
--and T1.ScheduledStartDate = dateadd(day, -1, tmain.ScheduledStartDate ))
FROM    tempSlotsAssignedForDept Tmain
GROUP BY    Tmain.DepartmentCode,Tmain.ScheduledStartDate
) a) b where [Tmain.TotalSlots] is not null and T1SubTotalSlots is not null and T2SubTotalSlots is not null 
```

# python - Python 三元运算符

> ID：12199757
> 
> 赞同：94
> 
> 时间：2012-08-30T14:56:43.427
> 
> 标签：python, ternary

是否可以在 Python 中的一行上做到这一点？

```
if <condition>:
    myList.append('myString') 
```

我试过三元运算符：

```
myList.append('myString' if <condition>) 
```

但我的 IDE ( [MyEclipse](https://www.genuitec.com/products/myeclipse/) ) 不喜欢它，没有`else`.

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-08-30T15:05:19.817

是的，你可以这样做：

```
<condition> and myList.append('myString') 
```

如果`<condition>`为假，则将启动短路并且不会评估右侧。如果`<condition>`为真，则将评估右侧并附加元素。

我只想指出，执行上述操作是非常非 Python 的，最好写这个，不管：

```
if <condition>: myList.append('myString') 
```

示范：

```
>>> myList = []
>>> False and myList.append('myString')
False
>>> myList
[]
>>> True and myList.append('myString')
>>> myList
['myString'] 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-08-30T14:59:11.573

语言不允许您使用语法的原因

```
variable = "something" if a_condition 
```

没有`else`就是，在 的情况下`a_condition == False`，`variable`突然不知道了。也许它可以默认为`None`，但 Python 要求所有变量赋值实际上都会导致显式赋值。这也适用于函数调用等情况，因为传递给函数的值会像赋值语句的[RHS一样被评估。](https://en.wikipedia.org/wiki/Sides_of_an_equation)

类似地，所有`return`s 都必须实际返回，即使它们是有条件`return`的 s。例如：

```
return variable if a_condition 
```

不允许，但是

```
return variable if a_condition else None 
```

是允许的，因为第二个示例保证显式返回某些内容。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-30T14:57:47.317

```
if <condition>: myList.append('myString') 
```

否则，没有。为什么需要把它放在一条线上？

请注意，“三元运算符”是*operator*。像任何运算符一样，它*必须返回 something*`else` ，那么没有子句怎么能有一个三元运算符呢？如果条件不是真实的，它应该返回什么？

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-10T09:30:18.443

您基本上是在要求`do_thing() if <condition> else pass`构造（如果运行，它将抛出`SyntaxError`）。正如我在研究（有点）[类似问题](https://stackoverflow.com/questions/51245239/function-calls-in-conditional-expression-and-a-way-to-implement-some-function) `do_thing() if condition else None`的过程中发现的那样，你可以得到尽可能接近的结果（这只是另一种方法`<condition> and do_thing()`）。所以，总结这个想法和其他答案，这里是你的选择：

*   `if <condition>: myList.append('myString')`- 似乎是最不“hacky”（因此是首选）的方式
*   `<condition> and myList.append('myString')`
*   `myList.append('myString') if <condition> else None`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-30T15:21:42.473

`myList.extend(['myString'] if condition else [])`也可以，尽管它比其他解决方案更有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-17T04:54:10.460

您可以执行以下操作。请注意，`None`在任何时候都不会附加到`myList`.

```
myList.append('myString') if <condition> else None 
```

此外，Python 应该接受下面的单行。

```
if <condition>: myList.append('myString') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-03T21:50:34.530

如果我想根据条件将可选元素添加到列表中，我会这样做。

```
nums = [
        1,
        2,
        3 if <condition> else None,
        4,
       ]

# nums now contains values of `None`, so we delete all occurrences of `None`
nums.remove(None) 
```

如果不满足条件，这只是用 None 替换值，然后，它只是重新定义没有 None 值的列表。这样，如果满足条件，它们就会保留索引

# javascript - 数据表自定义过滤

> ID：12199759
> 
> 赞同：3
> 
> 时间：2012-08-30T14:56:46.023
> 
> 标签：javascript, datatables

我对自定义过滤在数据表中的工作方式感到非常惊讶。看来我需要像这样定义一个**全局**过滤器函数：

```
$.fn.dataTableExt.afnFiltering.push(function (oSettings, aData, iDataIndex) { .. }); 
```

然后我页面上的**所有数据表都将使用该函数进行过滤。**这是不可接受的。

我需要的是一种使用自定义过滤器功能以编程方式过滤数据表的方法。我希望这个函数能够取一行并根据某些标准返回真/假，以在结果中显示/隐藏该行。

是否存在这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:58:36.713

此链接是否有帮助：

[http://datatables.net/forums/discussion/8435/remove-custom-filtering/p1](http://datatables.net/forums/discussion/8435/remove-custom-filtering/p1)

```
/* Custom filtering function which will filter data in column four between two values */
$.fn.dataTableExt.afnFiltering.push(
        function (oSettings, aData, iDataIndex) {
            if ( oSettings.nTable.id === "my_filtering_table" ) {
                var selectCode = document.getElementById('statusSelect').value;
                return filterRow(selectCode, aData);
            }
            else {
                return true;
            }
        }
); 
```

# cakephp - CakePHP 2.1 使用 $this->flash 和自定义布局

> ID：12199762
> 
> 赞同：1
> 
> 时间：2012-08-30T14:56:51.793
> 
> 标签：cakephp, redirect, cakephp-2.1

我正在使用 $this->flash('message', '/', 3, 'myLayout'); 在我的一个控制器操作中，在成功操作后重定向用户。现在，myLayout.ctp 被渲染，但没有显示消息。如何从布局中访问消息？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:59:55.917

如[文档](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#creating-notification-messages)中所述：

> $element 参数允许您控制应该使用哪个元素（位于 /app/View/Elements 中）来呈现消息。在元素中，消息可用作 $message。首先我们在控制器中设置闪光灯：

因此，在您的布局中：

```
echo $message; 
```

# java - 如何使用 java 代码和 AT 命令从 sim dongle 读取短信？

> ID：12199769
> 
> 赞同：1
> 
> 时间：2012-08-30T14:57:08.380
> 
> 标签：java, windows-7, sms, command, at-command

我想使用java代码从通过加密狗（USB连接器）连接到我的笔记本电脑的sim读取短信，我知道我必须使用AT命令，但我不知道哪些命令以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:04:17.163

如果您使用的是 Windows 7 和相当新的调制解调器，则不必使用 AT 命令。您可以使用 Windows Mobile Broadband API（从 Win 7 开始提供）。

它包括 SMS 的接口功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:15:49.563

您需要通过 USB 连接器启用与您的 GSM 设备/电话的串行数据连接。

您还需要某种类型的终端仿真软件来连接手机并与之通信。

你没有说你试图从什么操作系统/硬件，或者什么型号的手机，这可能会影响你需要用来访问 SMS 信息的 AT 命令集，所以我不能更具体。

几年前，我使用蓝牙连接到 Mac 笔记本电脑上的摩托罗拉剃须刀，使用小型 Realbasic 程序发送和接收 SMS 消息，作为通过 sms 向 IT 员工发送服务器监控消息的概念证明。您可以谷歌 GSM 命令集的 AT。

# matlab - 检查已打开的 MATLAB 子图上是否存在图

> ID：12199775
> 
> 赞同：1
> 
> 时间：2012-08-30T14:57:21.757
> 
> 标签：matlab, plot, histogram, subplot

我在 MATLAB 中有一个已经创建的子图，它的轴颜色设置等，并且一切就绪。然后我在上面绘制一个直方图。

现在我回到它，（在一个循环内），我想检查该子图、直方图或正常图上是否已经“绘制”了一些东西。如果那里有东西，do_something，否则，do_something_else。

如何检查子图或一般地块的“占用”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:15:49.260

您可以检查是否`subplot`有`children`：

```
isempty(get(yourSubplotHandle, 'children')) 
```

此语句适用`true`于空子图。

# python - 在这种特殊情况下如何避免“ValueError: invalid \x escape”错误？

> ID：12199778
> 
> 赞同：2
> 
> 时间：2012-08-30T14:57:36.927
> 
> 标签：python, syntax-error, wildcard

显然，通配符 %x 未被识别为字节十六进制值，因此我收到错误“ValueError：无效 \x 转义”。

如何避免这种情况？我对python不熟悉。

```
for i in xrange(0,length):

  if i % 2 == 0:

    tempArray.append(unpack("B",payload_raw[x])[0]^key)
    x += 1

  else:

    randomByte = random.randint(65,90)
    tempArray.append(randomByte)

    for i in range(0,len(tempArray)):

      tempArray[i]="\x%x"%tempArray[i]

    for i in range(0,len(tempArray),15):

      outArray.append("\n'"+"".join(tempArray[i:i+15])+"'")
      outArray = "".join(outArray)
      devide = "i % 2;"
      open_structure = open(structure).read()
      code = open_structure % (junkA,outArray,junkB,key,length,devide)
      b.write(code)
      b.flush() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:04:23.670

`chr()`将为您提供 0 到 255 之间的值的字节串。

```
>>> chr(0xd3)
'\xd3' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:40:12.047

伊格纳西奥的答案是正确的，但也有原力的黑暗面：

```
>>> your_string = r'\x48\x65\x6c\x6c\x6f\x2c\x20\x57\x6f\x72\x6c\x64\x21'
>>> your_string.decode('string-escape')
'Hello, World!' 
```

因此，您*可以*使用原始文字（r'\x' 而不是 '\x'）解决您的问题，并使用该`str.decode`方法将转义符转换为字符。

# java - 错误的 JDBC SQL 查询，尽管它在控制台/MysqlWorkBench 中工作

> ID：12199783
> 
> 赞同：0
> 
> 时间：2012-08-30T14:57:46.333
> 
> 标签：java, mysql, jdbc

我遇到了一些唠叨。为了从我的一个 drupal SQL 数据库中获取一些数据，我需要一个相当精细的查询。问题是在控制台/MysqlWorkBench 中查询工作正常，而在我使用 JDBC 的 JAVA 程序中它根本不起作用。

原始查询是：

```
 # Tag use from the perspective of all tag entries belonging to nodes in table 'field_data_field_topic'

    SELECT fdf.entity_type, node.nid, td.name, td.tid, ti.created, users.uid
    FROM field_data_field_topic fdf LEFT OUTER JOIN taxonomy_term_data td
    ON(fdf.field_topic_tid = td.tid)
    LEFT OUTER JOIN taxonomy_index ti
    ON(fdf.field_topic_tid = ti.tid AND fdf.entity_id = ti.nid)
    LEFT OUTER JOIN node
    ON(fdf.entity_id = node.nid)
    LEFT OUTER JOIN field_data_body fd
    ON(fd.entity_id = node.nid)
    LEFT OUTER JOIN users
    ON(users.uid = node.uid)

    #Restricting to content from 01-02-2012 up to 11-06-2012
    WHERE node.created > 1328054400
    #Restricting to either Nodes or Comments
    AND fdf.entity_type = "node"
    #Restricting to node status=1
    AND node.status=1
    #Remove defective node with nid=1594
    AND node.nid not like "1594"

    UNION

    # Tag use from the perspective of all tag entries belonging to comments in table 'field_data_field_topic'

    SELECT fdf.entity_type, comment.cid, td.name, td.tid, ti.created, users.uid
    FROM field_data_field_topic fdf LEFT OUTER JOIN taxonomy_term_data td
    ON(fdf.field_topic_tid = td.tid)
    LEFT OUTER JOIN taxonomy_index ti
    ON(fdf.field_topic_tid = ti.tid AND fdf.entity_id = ti.nid)
    LEFT OUTER JOIN comment
    ON(fdf.entity_id = comment.cid)
    LEFT OUTER JOIN field_data_comment_body fc
    ON(comment.cid=fc.entity_id)
    LEFT OUTER JOIN users
    ON(users.uid = comment.uid)

    #Restricting to content from 01-02-2012 up to 11-06-2012
    WHERE comment.created > 1328054400
    #Restricting to Comments
    AND fdf.entity_type = "comment"
    #Restricting to node status=1
    AND comment.status=1 
```

在Java中，我放了：

```
String sql = "SELECT fdf.entity_type, node.nid, td.name, td.tid, ti.created, users.uid "
        + "FROM field_data_field_topic fdf LEFT OUTER JOIN taxonomy_term_data td " +
        "ON(fdf.field_topic_tid = td.tid) " +
        "LEFT OUTER JOIN taxonomy_index ti " +
        "ON(fdf.field_topic_tid = ti.tid AND fdf.entity_id = ti.nid) " +
        "LEFT OUTER JOIN node " +
        "ON(fdf.entity_id = node.nid) " +
        "LEFT OUTER JOIN field_data_body fd " +
        "ON(fd.entity_id = node.nid) " +
        "LEFT OUTER JOIN users " +
        "ON(users.uid = node.uid " +
        "WHERE node.created > 1328054400 " +
        "AND fdf.entity_type = 'node' " +
        "AND node.status = 1 " +
        "AND node.nid not like '1594' " +
            "UNION " +
                "SELECT fdf.entity_type, comment.cid, td.name, td.tid, ti.created, users.uid " +
                "FROM field_data_field_topic fdf LEFT OUTER JOIN taxonomy_term_data td " +
                "ON(fdf.field_topic_tid = td.tid) " +
                "LEFT OUTER JOIN taxonomy_index ti " +
                "ON(fdf.field_topic_tid = ti.tid AND fdf.entity_id = ti.nid) " +
                "LEFT OUTER JOIN comment " +
                "ON(fdf.entity_id = comment.cid) " +
                "LEFT OUTER JOIN field_data_comment_body fc " +
                "ON(comment.cid=fc.entity_id) " +
                "LEFT OUTER JOIN users " +
                "ON(users.uid = comment.uid) " +
                "WHERE comment.created > 1328054400 " +
                "AND fdf.entity_type = 'comment' " +
                "AND comment.status=1"
                ; 
```

我得到的错误是：

```
MySQL Database connection established
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right **syntax to use near 'WHERE node.created > 1328054400 AND fdf.entity_type = "node" AND node.status = 1' at line 1**
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2683)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2144)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2310)
    at pp.orientTest.Orient4GraphUsersCreatedTagsTaggedNodes.main(Orient4GraphUsersCreatedTagsTaggedNodes.java:51)
MySQL Database connection terminated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:59:15.383

```
fdf.entity_type = "node", 
```

这应该是单引号

像：

```
fdf.entity_type = 'node' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:03:39.730

看起来这一行缺少一个右括号：

```
 "ON(users.uid = node.uid " + 
```

# wcf - 反序列化对象时出错

> ID：12199790
> 
> 赞同：0
> 
> 时间：2012-08-30T14:58:02.403
> 
> 标签：wcf

我有 WCF 服务。它具有以下属性。

```
[DataMember]
public List<uttAppointmentPhoneList> AppointmentPhoneList { get; set; }

public class uttAppointmentPhoneList
{
    string _PhoneType;
    Int32 _PhoneNumber;
    bool _IsDelete;

    [DataMember]
    public string PhoneType
    {
        get { return _PhoneType; }
        set { _PhoneType = value; }
    }

    [DataMember]
    public Int32 PhoneNumber
    {
        get { return _PhoneNumber; }
        set { _PhoneNumber = value; }
    }

    [DataMember]
    public bool IsDelete
    {
        get { return _IsDelete; }
        set { _IsDelete = value; }
    }

} 
```

但是当我发送请求时出现以下错误。

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数时出错。InnerException 消息是“反序列化 MarshfieldClinic.Denbigh.AppointmentService.Sync.DataContracts.mydayapp 类型的对象时出错。值“3456787463”无法解析为类型“Int32”。有关更多详细信息，请参阅 InnerException。

任何想法为什么会发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:00:14.747

> `Int32 PhoneNumber`

这是完全错误的。
电话号码是一个字符串，而不是一个数字。

发生此特定错误是因为大多数电话号码不适合 32 位。
但是，您需要使用字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:00:50.280

该 int 大于最大 int 值。使用字符串作为电话号码。

最大 int 值：2,147,483,647（来源： http: [//www.dotnetperls.com/int-maxvalue](http://www.dotnetperls.com/int-maxvalue)）

3,456,787,463 > 2,147,483,647

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:02:33.297

看起来 Int32 对于您正在处理的值（3456787463）来说太小了。尝试long，看看它是否有效。

或者，如果它是一个电话号码，您可以随时使用字符串并在以后根据自己的喜好对其进行格式化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:07:07.053

使用 a`PhoneNumber`作为信息输入，因此`String`您不需要在程序中进行任何密集计算

# excel - 按颜色组织

> ID：12199792
> 
> 赞同：1
> 
> 时间：2012-08-30T14:58:04.720
> 
> 标签：excel, vba

我遇到了一个问题，我有一个脚本感谢这里的几个成员允许我直接从文件导入到工作簿中。使用相同的脚本，我已经结合了按顶部红色和底部绿色进行组织的能力。我想我可以编写代码来让黄色出现在我自己的中间，但它并没有考虑到黄色和红色之间的区别，尽管我认为我确实通过脚本使这种区别很明显。

如果有人可以看看这个并告诉我哪里出错了，那将不胜感激。

这就是我现在得到的最终结果，在导入后，黄色位于表单的底部。

![在此处输入图像描述](../Images/4166955736d7c36d182eb5acd938299d.png)

出于某种原因，代码读取不正确，因此还附上了指向工作表的链接，其中包含要导入的添加文件。

[压缩文件](http://www.kaboomlabs.com/excel/OO.zip)

或者文件在这里分开......

[床单](http://www.kaboomlabs.com/excel/OO/OOR.xlms)

[CSV](http://www.kaboomlabs.com/excel/OO/SO2PO.csv)

这是我的代码：

```
Option Explicit

Sub Update_POT()

Dim wsPOD As Worksheet
Dim wsPOT As Worksheet
Dim wsPOA As Worksheet
Dim cel As Range
Dim lastrow As Long, fstcell As Long, i As Long, Er As Long, lstCol As Long, lstRow As Long, strFile As String

Set wsPOD = Sheets("PO Data")
Set wsPOT = Sheets("PO Tracking")
Set wsPOA = Sheets("PO Archive")

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
        .Calculation = xlCalculationManual
    End With

    With wsPOD
        .Columns("A:AB").ClearContents
        .Range("Y1").Formula = "=COUNTIFS('PO Tracking'!$D:$D,$C1,'PO Tracking'!$C:$C,$D1,'PO Tracking'!$F:$F,$G1)"
        .Range("Z1").Formula = "=IF($M1,"""",""Different"")"
        .Range("AA1").Formula = "=IF(ISBLANK($C1),0,1)"
        .Range("AB1").Formula = "=IF($O1,""Full"","""")"
    End With

    strFile = Application.GetOpenFilename("Text Files (*.csv),*.csv", , "Please selec text file...")

    With wsPOD.QueryTables.Add(Connection:="TEXT;" & strFile, Destination:=wsPOD.Range("A1"))
     .TextFileParseType = xlDelimited
     .TextFileCommaDelimiter = True
     .Refresh
    End With

    With wsPOD
    'first bring columns F:G up to match their line
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(6))

        If cel = vbNullString And cel.Offset(, -2) <> vbNullString Then
            .Range(cel.Offset(1), cel.Offset(1, 1)).Copy cel
            cel.Offset(1).EntireRow.Delete
        End If
    Next

    'now fil columns A:D to match PO Date and PO#
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(5), .Columns(1))

        If cel = vbNullString And cel.Offset(, 5) <> vbNullString Then
            .Range(cel.Offset(-1), cel.Offset(-1, 3)).Copy cel
        End If
    Next
        lastrow = wsPOD.Cells(Rows.Count, "J").End(xlUp).Row
        fstcell = wsPOD.Cells(Rows.Count, "N").End(xlUp).Row
        wsPOD.Range("Y1:AB1").Copy wsPOD.Range("M" & fstcell & ":P" & lastrow)
        wsPOD.Range("M:P").Calculate
    End With

        With Intersect(wsPOD.UsedRange, wsPOD.Columns("P"))
        .AutoFilter 1, "<>Full"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("A:P"))
            .EntireRow.Delete
        End With
        .AutoFilter
    End With

    With Intersect(wsPOD.UsedRange, wsPOD.Columns("N"))
        .AutoFilter 1, "<>Different"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("A:P"))
            .EntireRow.Delete
        End With
        .AutoFilter
    End With

    'Final Adjustments before transfering over to PO Tracking.
    With wsPOD
        .AutoFilterMode = False
        lastrow = wsPOD.Cells(Rows.Count, "A").End(xlUp).Row
        Intersect(.UsedRange, .Range("A4:A" & lastrow)).Cut .Range("Q3")
        Intersect(.UsedRange, .Columns("D")).Cut .Range("R1")
        Intersect(.UsedRange, .Columns("C")).Cut .Range("S1")
        Intersect(.UsedRange, .Columns("B")).Cut .Range("T1")
        Intersect(.UsedRange, .Columns("G")).Cut .Range("U1")
        Intersect(.UsedRange, .Columns("F")).Cut .Range("V1")
     End With

    With wsPOD
        wsPOD.Columns("A:P").ClearContents
        lastrow = wsPOD.Cells(Rows.Count, "Q").End(xlUp).Row
        wsPOD.Range("Q3:V" & lastrow).Copy wsPOT.Cells(Rows.Count, "B").End(xlUp).Offset(1)
    End With
    'Format PO Tracking

    With wsPOT
        .Range("Q1:U1").Copy
        lastrow = .Cells(.Rows.Count, "B").End(xlUp).Row
        .Range("V1:X1").Copy .Range("H3:J" & lastrow)
        .Range("N2:O2").Copy .Range("N3:O" & lastrow)
        .Range("P1:V1").Copy
        .Range("B3:H" & lastrow).PasteSpecial xlPasteFormats
        .Range("K3:K" & lastrow).Borders.Weight = xlThin
        lastrow = .Cells(.Rows.Count, "H").End(xlUp).Row
        .Range("H:J").Calculate

        .Sort.SortFields.Clear

    'Sort PO Tracking

    'Sort Reds
        .Sort.SortFields.Add(.Range("J3:J" & lastrow), _
        xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
        IconSets(4).Item(1)

        .Sort.SortFields.Add Key:=Range( _
        "J3:J30" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
        xlSortNormal

    'Sort Yellows
        .Sort.SortFields.Add(.Range("I3:I" & lastrow), _
        xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
        IconSets(4).Item(2)

        .Sort.SortFields.Add Key:=Range( _
        "I3:I" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
        xlSortNormal

    'Sort Greens
        .Sort.SortFields.Add(.Range("I3:I" & lastrow), _
        xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
        IconSets(4).Item(3)

        .Sort.SortFields.Add Key:=Range( _
        "I3:I" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
        xlSortNormal

        With .Sort
            .SetRange wsPOT.Range("B2:K" & lastrow)
            .Header = xlYes
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With
    End With

    With wsPOD
        wsPOD.Columns("Q:X").ClearContents
        wsPOD.Cells(1, 25).Value = "=COUNTIFS('PO Tracking'!$D:$D,$C1,'PO Tracking'!$C:$C,$D1,'PO Tracking'!$F:$F,$G1)"
        wsPOD.Cells(1, 27).Value = "=IF(ISBLANK($C1),0,1)"
        wsPOD.Range("Y1:AB1").Copy wsPOD.Range("M5:P5")
    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
         .Calculation = xlCalculationAutomatic
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:32:54.493

您必须删除该行

```
 .Sort.SortFields.Add Key:=Range( _
    "I3:I" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
    xlSortNormal 
```

在

```
 'Sort Yellows
    .Sort.SortFields.Add(.Range("I3:I" & lastrow), _
    xlSortOnIcon, xlAscending, , xlSortNormal).SetIcon Icon:=ActiveWorkbook. _
    IconSets(4).Item(2)

    .Sort.SortFields.Add Key:=Range( _
    "I3:I" & lastrow), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:= _
    xlSortNormal 
```

同一列中的黄色和绿色不能具有相同的重复排序条件。删除该行并重试。

# char - 将 Unicodestring 转换为 Char[]

> ID：12199796
> 
> 赞同：8
> 
> 时间：2012-08-30T14:58:17.403
> 
> 标签：char, c++builder

我有一个带有列表框的表单，其中包含四个单词的行。当我点击一行时，这些词应该会出现在四个不同的文本框中。到目前为止，我已经完成了所有工作，但是我在字符转换方面遇到了问题。

列表框中的字符串是 UnicodeString，但 strtok 使用 char[]。编译器告诉我“无法将 UnicodeString 转换为 Char[]”。这是我为此使用的代码：

```
{
 int a;
 UnicodeString b;

 char * pch;
 int c;

 a=DatabaseList->ItemIndex;   //databaselist is the listbox
 b=DatabaseList->Items->Strings[a]; 

 char str[] = b; //This is the part that fails, telling its unicode and not char[].
 pch = strtok (str," ");      
 c=1;                          
 while (pch!=NULL)
    {
       if (c==1)
       {
          ServerAddress->Text=pch;
       } else if (c==2)
       {
          DatabaseName->Text=pch;
       } else if (c==3)
       {
          Username->Text=pch;
       } else if (c==4)
       {
          Password->Text=pch;
       }
       pch = strtok (NULL, " ");
       c=c+1;
    }
} 
```

我知道我的代码看起来不太好，实际上很糟糕。我只是在学习一些 C++ 编程。

我怎样才能转换这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T15:06:30.710

strtok 实际上会修改您的 char 数组，因此您需要构造一个允许修改的字符数组。直接引用 UnicodeString 字符串将不起作用。

```
// first convert to AnsiString instead of Unicode.
AnsiString ansiB(b);  

// allocate enough memory for your char array (and the null terminator)
char* str = new char[ansiB.Length()+1];  

// copy the contents of the AnsiString into your char array 
strcpy(str, ansiB.c_str());  

// the rest of your code goes here

// remember to delete your char array when done
delete[] str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T19:55:23.587

这对我有用，并且可以节省我转换为 AnsiString 的时间

```
// Using a static buffer
#define MAX_SIZE 256
UnicodeString ustring = "Convert me";
char mbstring[MAX_SIZE];

    wcstombs(mbstring,ustring.c_str(),MAX_SIZE);

// Using dynamic buffer
char *dmbstring;

    dmbstring = new char[ustring.Length() + 1];
    wcstombs(dmbstring,ustring.c_str(),ustring.Length() + 1);
    // use dmbstring
    delete dmbstring; 
```

# javascript - 为什么 iframe.contentWindow == null？

> ID：12199797
> 
> 赞同：53
> 
> 时间：2012-08-30T14:58:20.503
> 
> 标签：javascript, html, dom, iframe

我使用以下代码动态创建 iframe。

```
var iframe_jquery = $("<iframe>")
    .addClass("foo")
    .appendTo(container); // container is a jQuery object containing a <div> which already exists 
```

然后，我想访问它的 contentWindow，但它是空的：

```
var iframe = iframe_jquery.get(0);
if (iframe){ // iFrame exists
    console.log(iframe.contentWindow); // Prints "null"
    var doc = iframe.contentWindow.document; // NullpointerException
} 
```

所以我想：“也许 iframe 还没有准备好？” 所以我尝试了：

```
iframe_jquery.ready(function(){
    var iframe = iframe_jquery.get(0);
    console.log(iframe.contentWindow); // Prints "null"
    var doc = iframe.contentWindow.document; // NullpointerException
}); 
```

结果相同。

**怎么了？**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-30T15:03:34.637

上周我在玩 iframe（构建 rtf 编辑器）时遇到了这个问题，是的，它还没有准备好。

我想如果我把它放在 a 中`.ready()`，它会起作用，但是`.ready()`当 DOM 准备好时，而不是当 iframe 加载其内容时，所以我最终用 jQuery 包装了我的代码`.load()`。

所以试试这个：

```
$(function () {  
    $("#myiframe").load(function () {                        
        frames["myframe"].document.body.innerHTML = htmlValue;
    });
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-30T15:10:20.840

问题是你`<iframe>`不会是“真实的”，直到它真正添加到页面的实际 DOM 中。 [这是一个要演示的小提琴。](http://jsfiddle.net/5vY9N/2/).

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-30T15:03:06.100

根据浏览器的不同，访问`document`或`<iframe>`可能会有所不同。

以下是如何处理它的示例：

```
if (iframe.contentDocument) // FF Chrome
  doc = iframe.contentDocument;
else if ( iframe.contentWindow ) // IE
  doc = iframe.contentWindow.document; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-24T12:37:43.983

您还可以通过设置 iframe 的 onload 属性来创建将在 iframe 完成加载时执行的函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T15:53:04.173

## 书签版

只是出于好奇，我想我会把它放在一起。记住 iframe 和加载事件在不同的浏览器*（主要是旧的、分崩离析的、应该死的浏览器）*上不能很好地协同工作......加上不完全确定 jQuery 如何解决这个问题......我的大脑决定这将得到更好的支持*（无论是否存在）*：

```
$(function(){
  /// bind a listener for the bespoke iframeload event
  $(window).bind('iframeload', function(){
    /// access the contents of the iframe using jQuery notation
    iframe.show().contents().find('body').html('hello');
  });
  /// create your iframe
  var iframe = $('<iframe />')
        /// by forcing our iframe to evaluate javascript in the path, we know when it's ready
        .attr('src', 'javascript:(function(){try{p=window.parent;p.jQuery(p).trigger(\'iframeload\');}catch(ee){};})();')
        /// insert the iframe into the live DOM
        .appendTo('body');
}); 
```

采用这种方法的原因是，从 iframe 本身内部触发加载事件通常要好得多。但这意味着将适当的文档加载到 iframe 中，因此对于动态 iframe，这有点乏味。这是加载文档和不加载文档之间的一种混合。

以上适用于我迄今为止测试过的所有内容 - 是的，你是对的 - 这有点荒谬，不是面向未来的，可能还有其他带有负面含义的东西；）

关于这篇文章，我要说的一件积极的事情是，它介绍了`.contents()`访问 iframe 文档的使用，这至少有点用...

# tomcat - Tomcat 5.5 上的 struts2 应用程序：基本用户/通行证安全性？

> ID：12199805
> 
> 赞同：0
> 
> 时间：2012-08-30T14:58:43.493
> 
> 标签：tomcat, struts2, security

我正在开发一个简单的 CRUD 应用程序，它将托管在我们的 Intranet 上，可供少数用户使用。我正在使用 struts2 和 Tomcat 5.5。

我已经阅读了很多关于如何使用 Tomcat 实现安全性的指南；使用代码；使用 LDAP 集成；或它们的组合。由于该应用程序很简单，我希望身份验证具有同等的简单性。

我目前的想法涉及在会话中存储“登录”属性，如果不存在，则将用户重定向到错误消息和登录页面。不过，我认为，我必须在每个操作方法中都这样做，以防止有人将表单直接提交给操作。

在这样的应用程序上实现安全性的最简单/最基本的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:15:41.293

一个简单而好的解决方案是使用拦截器，创建一个登录拦截器并将其配置为您认为用户需要登录的所有操作

您需要检查用户属性是否在会话中，如果没有，则可以返回 INPUT 字符串作为结果并可以显示登录页面。

有关更多详细信息，请参阅本教程

*   [created_a_login_interceptor](http://www.vitarara.org/cms/struts_2_cookbook/creating_a_login_interceptor)

# android - MP3 音频文件无法在使用 Html5 和 phoneGap 的 Android 应用程序中播放

> ID：12199806
> 
> 赞同：0
> 
> 时间：2012-08-30T14:58:52.730
> 
> 标签：android, html, cordova

我创建了一个示例 phonegap 应用程序，该应用程序的目标是播放静态 mp3 文件。我已将文件放在以下位置`/android_asset/www`文件夹下。

HTML5 内容如下：

* * *

```
 <html>
          <head>
            <title>PhoneGap Back Button Example</title>
            <script type="text/javascript" src="phonegap-1.2.0.js"></script>
            <script type="text/javascript">

            var myMedia = null;
         var playing = false;
         //Method for playing the audio Track1 file
           function playAudio() {
      if (!playing) {
                            myMedia.play(); 
       document.getElementById('play').src = "images/pause.png";
       playing = true; 
      } else {
       myMedia.pause();`enter code here`
                            document.getElementById('play').src = "images/play.png";    
                            playing = false; 
      }
        }     </script>

         <body onload="onLoad()">
           <h1>Audio Player</h1>
           <p id="audio_position">0.000 sec</p>
           <p>
//The Html page contains a dropdown of option from which  we can select the source from where the media file can be played

            <select id="playlist" onchange="updateMedia()">
                                     <optionvalue="/android_asset/www/audio/track1.mp3">Asset</option>
            </select>
           </p>
           <a href="#" onclick="playAudio()"><img id="play" src="images/play.png"></a>
           <a href="#" onclick="stopAudio()"><img id="stop" src="images/stop.png"></a>
         </body>
        </html> 
```

活动类如下：

```
 package com.plugin.myapp;

import com.phonegap.DroidGap;

import android.os.Bundle;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class MainActivity extends DroidGap
 {

 @Override

 public void onCreate(Bundle savedInstanceState)
 {

  super.onCreate(savedInstanceState);

    // super.loadUrl("file:///android_asset/www/index.html");

  WebView webview = new WebView(this);

       setContentView(webview);

       //Media.getContentUriForPath("/android_asset/www/audio/track1.mp3");
   //this helps to load the html page
        webview.loadUrl("file:///android_asset/www/audio/example.html");

        WebSettings webSettings = webview.getSettings();

     webSettings.setJavaScriptEnabled(true);

   }
} 
```

问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:10:41.000

在尝试播放之前创建一个**MEDIA**对象......像这样...... *myMedia = new Media(src, onSuccess, onError);* 这里 src 是您要播放的音频文件 [http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:48:21.960

HTML5 音频在移动 Web 视图中不可靠。在 80% 的 Android 设备上的 android 2.x 上，它根本不受支持。您可以在此处查看支持 HTML5 音频的平台：http: [//caniuse.com/#feat=audio](http://caniuse.com/#feat=audio)在支持它的平台上，存在编解码器不一致，因此有些设备可以播放 MP3，有些不能，但可以播放其他音频编码格式。前面的答案是正确的，可以使用PhoneGap 的[Media](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media)类来可靠地播放MP3 音频。如果您正在使用多个音频文件，并且希望能够预加载它们或将它们分层（例如在游戏场景中），您还可以使用[LowLatencyAudio](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LowLatencyAudio)原生插件。

# java - 指数精度 [打印双精度，小数]

> ID：12199815
> 
> 赞同：0
> 
> 时间：2012-08-30T14:59:21.690
> 
> 标签：java, precision, exponential

有没有一种使用 EXPONENTIAL PRECISION 打印的方法？我需要用小数字填充一些数据并在之后进行比较......

我有这样的：

```
(0) - Mesured estimatedTime for multithread in block: 1.4917951E16 s
(1) - Mesured estimatedTime for multithread in block: 7.531891E15 s
(2) - Mesured estimatedTime for multithread in block: 2.9287E13 s
(3) - Mesured estimatedTime for multithread in block: 3.28478435E17 s
(4) - Mesured estimatedTime for multithread in block: 6.038E12 s 
```

我想这样打印：

```
(0) - Mesured estimatedTime for original in block: 0000.15595175E15 s           
(1) - Mesured estimatedTime for original in block: 0007.335638E15 s             
(2) - Mesured estimatedTime for original in block: 0416.66E15 s                 
(3) - Mesured estimatedTime for original in block: 0000.0390156852E15 s         
(4) - Mesured estimatedTime for original in block: 6642.0E15 s 
```

我知道你可以这样强制它：

```
// Force minimum number of digits to left and right of decimal point
formatter = new DecimalFormat("0.0E0");
s = formatter.format(-1234.567);         // -1.2E3 
```

但不知道我怎么能把它强制到Expo-Precision :((((帮助!! :/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:03:49.417

您似乎想暗示 1e15 的精度。

```
for (double d : new double[]{1.4917951E16, 7.531891E15, 2.9287E13, 3.28478435E17, 6.038E12})
    System.out.printf("%11fE15%n", d/1e15); 
```

印刷

```
 14.917951E15
   7.531891E15
   0.029287E15
 328.478435E15
   0.006038E15 
```

如果范围更宽，您可以使用 DecimalFormat

```
DecimalFormat df = new DecimalFormat();
df.setMaximumFractionDigits(300);
df.setGroupingUsed(false);
for(double d = 1 ; d <= 1e30; d *= 1e5) {
    System.out.println(df.format(d/1e15)+"E15");
} 
```

印刷

```
0.000000000000001E15
0.0000000001E15
0.00001E15
1E15
100000E15
10000000000E15 
```

# javascript - 我用于页面的 jQuery UI 可排序项目不起作用？

> ID：12199818
> 
> 赞同：1
> 
> 时间：2012-08-30T14:59:28.120
> 
> 标签：javascript, jquery, css

我试图将 s 可排序项目作为网格放在我的页面中，但它显示为纯数字，请告诉我原因。

```
<div class="demo">

<ul id="sortable">
<li class="ui-state-default">1</li>
<li class="ui-state-default">2</li>
<li class="ui-state-default">3</li>
<li class="ui-state-default">4</li>
<li class="ui-state-default">5</li>
<li class="ui-state-default">6</li>
<li class="ui-state-default">7</li>
<li class="ui-state-default">8</li>
<li class="ui-state-default">9</li>
<li class="ui-state-default">10</li>
<li class="ui-state-default">11</li>
<li class="ui-state-default">12</li>
</ul>

</div> 
```

我将 jQuery 中的脚本和样式标签粘贴在了头部：

```
<style>
#sortable { list-style-type: none; margin: 0; padding: 0; }
#sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 100px;     height: 90px; font-size: 4em; text-align: center; }
</style>
<script>
$(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:10:12.140

您似乎缺少 CSS 文件。确保您已包含该`jquery-ui-x.x.x.css`文件。排序功能工作正常，所以它看起来像一个演示问题

我从 Google CDN 添加了 CSS，现在看起来不错

```
<link rel="Stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/base/jquery-ui.css" /> 
```

您可能还想`float: left`从您的 css 中删除它们，以便它们显示为列表

# python - Python Markdown nl2br 扩展

> ID：12199819
> 
> 赞同：2
> 
> 时间：2012-08-30T14:59:29.390
> 
> 标签：python, markdown, nl2br

我是一名初学者程序员，我一直在尝试在我的网络应用程序中使用 python markdown 库。一切正常，除了 nl2br 扩展。

当我尝试使用 md.convert(text) 将文本文件转换为 html 时，它看不到将换行符转换为`<br>`.

例如，在我转换之前，文本是：

```
Puerto Rico

===========

------------------------------

### Game Rules

hello world! 
```

转换后，我得到：

```
 <h1>Puerto Rico</h1>
<hr />
<h3>Game Rules</h3>
<p>hello world!</p> 
```

我的理解是空格由 '\n' 表示，应该转换为`<br>`，但我没有得到那个结果。这是我的代码：

```
import markdown
md = markdown.Markdown(safe_mode='escape',extensions=['nl2br']) 
html = md.convert(text) 
```

如果您有任何想法或可以指出正确的方向，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:02:38.240

尝试在行尾添加两个或多个空格以插入`<br/>`标签

例子：

```
hello  
world 
```

结果是

```
<p>hello <br>
world</p> 
```

请注意，单词 hello 后面有两个空格。仅当您在行尾的两个空格之前有一些文本时，这才有效。但这与您的 nl2br 扩展无关，这是降价标准。

我的建议是，如果您不需要明确地进行这种转换，那就不要这样做。使用段落别名`<p>`-tags 是分隔文本区域的更简洁的方法。

如果您只是想在`<h3>`标题之后有更多空间，请为它定义一些 CSS：

```
h3 { margin-bottom: 4em; } 
```

如果您在所有 500 个 wiki 页面中的标题之后使用 -tags 进行间距，`<br>`然后您决定它的间距为 20px 太多。然后您必须手动编辑所有页面并删除`<br>`每个页面上的两个标签。否则，您只需编辑 css 文件中的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-12T16:58:02.243

[自己发现了这个问题以寻求澄清。因此，尽管晚了 7 年，但仍添加了更新。]

* * *

Python Markdown 项目的参考线程：[https ://github.com/Python-Markdown/markdown/issues/707](https://github.com/Python-Markdown/markdown/issues/707)

事实证明这确实是预期的行为，因此，`nl2br`扩展只转换块*内出现的**单个*换行符，**而不是**它周围。意思是，

 ***```
This is
a block

This is a different
block 
```

转换为

```
<p>This is<br/>block</p>\n<p>This is a different<br/>block</p> 
```

但是当你有**不同的、单独的块**时，

```
Puerto Rico

===========

------------------------------

### Game Rules

hello world! 
```

所有周围的换行符都被折叠，并且没有`<br/>`注入任何标签。

```
<h1>Puerto Rico</h1>
<hr />
<h3>Game Rules</h3>
<p>hello world!</p> 
```***

# asp.net-mvc-3 - 使用多个数据构建字符串时如何在末尾替换字符串？

> ID：12199820
> 
> 赞同：0
> 
> 时间：2012-08-30T14:59:32.980
> 
> 标签：asp.net-mvc-3, str-replace

大家好，我正在构建一个看起来像这样的字符串

```
 [Anil Kumar K,Niharika,Raghu,/4,0,0,/3,0,0,/1,1,1,/1,0,0,] 
```

我正在用这些数据构建这个字符串

```
public JsonResult ResourceBugReports()
    {
        int projectid;
        int Releasphaseid;
        projectid = 16;
        Releasphaseid = 1;
        var ResourceReports = db.ExecuteStoreQuery<ResourceModel>("ResourceBugReports @ProjectId,@ReleasePhaseId", new SqlParameter("@ProjectId", projectid), new SqlParameter("@ReleasePhaseId", Releasphaseid)).ToList();
        DataSet ds = new DataSet();        

        var model1 = new WeeklyBugCount
        {
            Resources = ResourceReports
        };
        foreach (var row in model1.Resources)
        {
            ResourceName1 = ResourceName1 + row.EmployeeName + ",";
        }
        foreach (var row in model1.Resources)
        {
            BugsCount = BugsCount + row.Assignedbugs + ",";
        }
        foreach (var row in model1.Resources)
        {
            BugsCount1 = BugsCount1+ row.Closedbugs + ",";
        }
        foreach (var row in model1.Resources)
        {
            Bugscount2 = Bugscount2 + row.Fixedbugs + "," ;
        }
        foreach (var row in model1.Resources)
        {
            BugsCount3 = BugsCount3 + row.Reopenedbugs + ",";
        }

        ComboinedString = ResourceName1 + "/" + BugsCount + "/" + BugsCount1 + "/" + Bugscount2 + "/" + BugsCount3;

        return Json(ComboinedString, JsonRequestBehavior.AllowGet);
    } 
```

我的

```
ComboinedString =[Anil Kumar K,Niharika,Raghu,/4,0,0,/3,0,0,/1,1,1,/1,0,0,] 
```

但我想要这个字符串

```
 ComboinedString =[Anil Kumar K,Niharika,Raghu/4,0,0/3,0,0,/1,1,1/1,0,0] 
```

我想在这个字符串中的“/”之前删除这个“，”或者替换它..任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:03:25.790

一个简单的解决方案是搜索并替换字符串，将“,/”替换为“/”。

更好的解决方案是使用 String.Join()，而不是使用 for() 循环并在每个值的末尾附加逗号。例如，替换：

```
 foreach (var row in model1.Resources)
    {
        ResourceName1 = ResourceName1 + row.EmployeeName + ",";
    } 
```

和

```
 ResourceName1 = string.Join(",", model1.Resources.ToArray()) 
```

这将删除结尾的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:08:14.727

添加此语句

我希望它会帮助你

```
String CombinedString1 = CombinedString.Replace(",/", "/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:08:45.380

一个简单的解决方案是使用 String.EndsWith() 函数，即

```
string str = "ksjf,sjsfj,sfs,";
        if (str.EndsWith(","))
        {
            str = str.Remove(str.Length - 1);

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:40:55.763

在我的脑海中，您可以尝试用一个简单的正则表达式替换：

```
string input = "dsgd,sdgsdg,dsgsdg,sdg,";
string output = Regex.Replace(input, ",$", "");
//output: "dsgd,sdgsdg,dsgsdg,sdg" 
```

@user1542652 的解决方案很简单，效果也很好。

# php - Joomla 附加用户数据

> ID：12199822
> 
> 赞同：0
> 
> 时间：2012-08-30T14:59:36.257
> 
> 标签：php, html, joomla, content-management-system

我试图在 joomla 中创建一些新的扩展。

我想为每个用户添加附加信息。我知道我可以通过创建自己的自定义用户配置文件插件并添加其他字段来实现这一点，但这会将这些字段添加到用户配置文件页面。

我想单独显示新字段。例如，我可能在用户页面上有一个链接，将他们带到那里的基本信息，例如姓名、电子邮件等。另一个链接向他们显示“附加”字段。

附加字段不会是个人信息，这就是我想单独显示它们的原因。

我的问题是，我如何实现这一目标？我可以简单地为每个用户添加额外的字段还是必须编写一个全新的组件？

更新：我不能使用现有的扩展，因为我想完全控制代码。此外，附加信息不会由用户添加，只会由管理员添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:08:37.513

您不必使用标准用户配置文件在用户配置文件页面上显示配置文件字段 您可以将其配置为仅向管理员显示。您只需为不同的表格进行不同的设置（整个 cms 有 4 个）。遵循核心插件中的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:26:14.660

最后我决定创建自己的组件更好。主要是因为当更新出来并且 JED 没有提供我想要的特定扩展时，破解 joomla 将是一个害虫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:09:37.363

可能有两种主要方法可以做到这一点。

1.  您可以创建一个扩展，用户填写信息并将数据存储在连接到该`#__users`表的单独数据库表中。
2.  您可以从 JED 下载扩展配置文件的扩展。有非商业和商业扩展，所以看看这里，看看是否有任何东西可能适合您的需求。

就我个人而言，我会安装一个预制的扩展程序，它将节省大量的工作/试验和错误。

看看这个：[http ://extensions.joomla.org/extensions/clients-a-communities/user-management](http://extensions.joomla.org/extensions/clients-a-communities/user-management)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:35:57.830

如果您添加或更改了任何编码，例如向用户表添加字段或在 joomla 中自定义注册页面，一旦您升级 Joomla 版本，它将恢复为默认值。这样做的方法是：

*   您必须创建另一个包含其他额外信息的表，并且应该使用来自`#__users`.
*   提交表单时，您可以使用此 Joomla 代码获得另一个表。

**$module_table = JTable::getInstance('modules', 'profileTable');**

*   Modules -> 表示您创建的表名。

*   ProfileTable -> 表示“组件名称”是模型名称，“表”是常见的。

然后你必须像这样将帖子值传递给这个表..

```
if (!$module_table->bind($post))
    {
        return 0;
    }
    if (!$module_table->check())
    {
        return 0;
    }
    if (!$module_table->store())
    {
        return 0;
    } 
```

这样，您可以为用户存储额外的数据。出于显示目的，您需要使用 userid 连接两个表并显示它...

祝一切顺利..

# python - 使用 apache2 部署soaplib webservice

> ID：12199826
> 
> 赞同：0
> 
> 时间：2012-08-30T14:59:46.337
> 
> 标签：python, web-services, apache, mod-wsgi, soaplib

我已经设置了 apache2 和 mod_wsgi。我有一个 wsgi 目录，其中有一些 python 代码保存在 *.wsgi 文件中。代码粘贴在下面。在 Web 浏览器中，当我输入 url (localhost/wsgi/ape.wsgi) 时，它将从数据库返回的记录显示为连接字符串。

我想要做的是将其部署为 web 服务并能够看到它的 wsdl (localhost/wsgi/ape.wsgi/?wsdl)。这可能吗？Ps 我是 Python 的新手。谢谢

```
import sys
sys.stdout = sys.stderr

import atexit
import threading
import cherrypy

from soaplib.wsgi_soap import SimpleWSGISoapApp
from soaplib.service import soapmethod
from soaplib.serializers.primitive import*

cherrypy.config.update({'environment': 'embedded'})

if cherrypy.__version__.startswith('3.0') and cherrypy.engine.state == 0:
    cherrypy.engine.start(blocking=False)
    atexit.register(cherrypy.engine.stop)

class Root(SimpleWSGISoapApp):
    @soapmethod(_returns=String)
    def index(self):
        """Get the data from the database and return list of rows"""
        cursor = self._get_db_handle()

        sql = """select name, source_comment from public.carpark where public_toilet = %s """ % 'TRUE'
        results = []
        cursor.execute(sql)
        rows=cursor.fetchall()

        for row in rows:
            results.append(str(row))

        joinedlist = ', '.join(results)
        return joinedlist
        cursor.close()

    def _get_db_handle(self, host='xxxx.xxxx.com',
               dbname='xxxx',user='xxxx',
               password='xxxx',mapped=False):
        """Get the database handle"""
        import psycopg2
        from psycopg2 import extras
        conn = psycopg2.connect("dbname='%s' user='%s' host='%s' password='%s'" % (dbname,user,host,password))
        if not mapped:
            db_handle = conn.cursor()
        else:
            db_handle = conn.cursor(cursor_factory=extras.DictCursor)
        return db_handle

    index.exposed = True

application = cherrypy.Application(Root(), script_name=None, config=None) 
```

# c++ - 在函数中初始化，而不是在 main 中初始化

> ID：12199831
> 
> 赞同：2
> 
> 时间：2012-08-30T14:59:52.997
> 
> 标签：c++, arrays, malloc, main, scoping

我正在尝试在函数中分配内存，但我不确定我做错了什么。我要这个：

```
int main()
{
    int* test= 0;
    initialize(test, 10);
    int test2 = test[2];
    delete[] test;
}

void initialize(int* test, int count)
{
    test = new int[count];
    for (int i = 0; i < count; i++)
    {
        test[i] = i;
    }
} 
```

但我收到此错误：Robust Simulation.exe 中 0x770d15de 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000008。它在线中断： int test2 = test[2];

但这有效：

```
int main()
{
    int* test=0;
    test = new int[10];
    for (int i = 0; i < 10; i++)
    {
        test[i] = i;
    }

    int test2 = test[2];
    delete[] test;
} 
```

是否存在范围界定问题？我想既然我给它传递了一个指针，它将被分配，我将能够在初始化函数之外访问它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:00:44.417

指针也是按值传递的。你需要：

```
void initialize(int*& test, int count) 
```

您的版本不会更改原始指针：

```
void initialize(int* test, int count)
{
    //test is a copy of the pointer because it was passed by value
    //...
} 
```

在此之后，失败的原因很明显`delete[]`- 因为原始指针`main`从未被初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:05:24.067

进行以下更改：-

```
initialize(&test, 10);
....

void initialize(int** test, int count) 
{
     *test = new int[count];
     for (int i = 0; i < count; i++)
     {         (*test)[i] = i;     }
 } 
```

如果您愿意，C++ 还有另一个称为引用的功能：-

```
void initialize(int*& test, int count)
{
         test = new int[count];
         for (int i = 0; i < count; i++)
         {         test[i] = i;     }
} 
```

你正在做的是通过测试[来自 main]（地址将通过）并存储在另一个名为 test 的局部指针变量中。这个新变量具有函数范围的生命周期，并且在函数完成后很快就会被删除，留下垃圾。

另一种选择是

```
int* test= initialize(test, 10); 
```

并将初始化更改为

```
int* initialize(int* test, int count)
    {
             test = new int[count];
             for (int i = 0; i < count; i++)
             {         test[i] = i;     }
           return test;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:01:37.007

您需要将对指针的引用传递给您的`initialise`函数。将原型更改为

```
void initialize(int* &test, int count) 
```

的返回值`new`分配给按值传递时创建的指针的**副本。**因此，当函数退出时，该地址会随着副本超出范围而丢失，因此您会发生内存泄漏。因此，您的`test`指针实际上从未指向任何已分配的内存，因此删除它会给您带来访问冲突。

引用传递允许`test`函数修改指针

# javascript - 秒数转换波斯数字

> ID：12199833
> 
> 赞同：2
> 
> 时间：2012-08-30T15:00:04.700
> 
> 标签：javascript, jquery

我想要转换波斯数字的秒数（倒计时 20 到 0），我尝试了，但我没有成功，下面是我的完整代码。我该怎么办？

**演示：http:** [//jsfiddle.net/JBzv7/](http://jsfiddle.net/JBzv7/)

HTML：

```
<div id="#Seconds" style="font-size: 40px;">
20
</div>​ 
```

查询：

```
var rep = {
        '0': '&#1776;',
        '1': '&#1777;',
        '2': '&#1778;',
        '3': '&#1779;',
        '4': '&#1780;',
        '5': '&#1781;',
        '6': '&#1782;',
        '7': '&#1783;',
        '8': '&#1784;',
        '9': '&#1785;',
        ':': ':',
    }

var str = '';
var sec = 20

var timer = setInterval(function() {

    var sss = sec--;
    var arr = sss.split("");                        

    for (i = 0; i < arr.length; i++) {
    str += rep[arr[i]];
    }
    alert(str)
    $('#Seconds').text(str);

   if (sss == -1) {
      alert('ok');
      clearInterval(timer);
    }
},1000);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:09:34.167

在您的 HTML 文件中， `<div id="#Seconds" style="font-size: 40px;">`不正确。id 应该只是`Seconds`，没有`#`. `#`前缀是你告诉 Jquery 那`Seconds`是 id 的方式，而不是类（你用 前缀）`.`或标签的类型（没有前缀）。但它不是 id 本身的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:12:23.203

```
function render(n) {
  var digits = [], r;
  do {
    r = n % 10;
    n = (n - r) / 10;
    digits.unshift(['&#', r + 1776, ';'].join(''));
  } while (n > 0);

  $('#Seconds').html(digits.join(''));
}

(function timer(current) {
  render(current);

  if (current > 0) {
    setTimeout(function () {
      timer(current - 1);
    }, 1000);
  }
}(20)); // the 20 is your countdown length 
```

演示：http: [//jsfiddle.net/EHAsW/](http://jsfiddle.net/EHAsW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:16:25.637

您设置`rep`对象的方式有利于选择数字，您可以读取变量`split`的值`sec`并读取对象的相关属性。请注意，您应该使用`html`而不是`text`.

也改变：

```
<div id="#Seconds" style="font-size: 40px;">
20
</div>​ 
```

到：

```
<div id="Seconds" style="font-size: 40px;">
&#1778;&#1776;
</div>​ 
```

```
var rep = {
        '0': '&#1776;',
        '1': '&#1777;',
        '2': '&#1778;',
        '3': '&#1779;',
        '4': '&#1780;',
        '5': '&#1781;',
        '6': '&#1782;',
        '7': '&#1783;',
        '8': '&#1784;',
        '9': '&#1785;',
        ':': ':',
    }

var str = '';
var sec = 20;

var timer = setInterval(function() {   
    var sss = sec--;
    if (sss == -1) {
      clear();
    }
    if (sss < 10) {sss = "0" + sss.toString()}
    var v = sss.toString().split("");
    str = rep[v[0]].toString() + rep[v[1]].toString();        
    $('#Seconds').html(str);     
},1000);

function clear() {
   clearInterval(timer)
   alert('okay')    
} 
```

[小提琴](http://jsfiddle.net/JBzv7/7/)

# ios - 与 CCSequence 一起使用的 CCCallFuncN 中的操作

> ID：12199842
> 
> 赞同：1
> 
> 时间：2012-08-30T15:00:39.923
> 
> 标签：ios, cocos2d-iphone

我需要创建可重复的动作序列（CCMoveBy、CCMoveTo），但它们需要使用随机参数（位置、持续时间）。我写了2个方法：

```
-(void) randomizeVec 
```

和

```
-(void) calcTiltDuration 
```

实际上，这些参数取决于外部变量（因子）。我不能这样做：

```
id randomize = [CCCallFuncN actionWithTarget:self selector:@selector(randomizeVec)];
id calcTilt = [CCCallFuncN actionWithTarget:self selector:@selector(calcTiltDuration)];
CCMoveBy* tilt = [CCMoveBy actionWithDuration:mTIltDuration position:randomVec];
CCMoveTo* restore = [CCMoveTo actionWithDuration:mTIltDuration position:initialTowerNodePos];
CCDelayTime* wait = [CCDelayTime actionWithDuration:0.1];
CCSequence* seq = [CCSequence actions:wait,calcTilt,randomize, tilt, restore, nil];
[aNode runAction:[CCRepeatForever actionWithAction:seq]]; 
```

因为值被复制一次并且 randomizeVec 和 calcTiltDuration 不影响动作，所以我写了一个方法：

```
-(void) moveRandomVector:(CCNode*) node
{
    int dx = rand_between(-1, 2) * mShakeFactor *2 ;
    int dy = rand_between(-1, 2) * mShakeFactor *2;
    CCMoveBy* action = [CCMoveBy actionWithDuration:0.1/mShakeFactor position:CGPointMake(dx, dy)];
    CCMoveTo* action2 = [CCMoveTo actionWithDuration:0.1/mShakeFactor position:initialTowerNodePos];
    CCEaseInOut* easyTilt = [CCEaseInOut actionWithAction:action rate:0.1];
    CCEaseInOut* easyRestore = [CCEaseInOut actionWithAction:action2 rate:0.1];
    CCSequence* seq = [CCSequence actions:easyTilt,easyRestore , nil];
    [node runAction:seq];
} 
```

通过 CCCallFuncN 调用：

```
id action = [CCCallFuncN actionWithTarget:self selector:@selector(moveRandomVector:)];
CCSequence* sq = [CCSequence actionOne:action two:[CCDelayTime actionWithDuration:0.1]];
[towerNode runAction:[CCRepeatForever actionWithAction:sq]]; 
```

外部方法中的因子变化 (mShakeFactor)。

这是正确的方法吗？我不是 Cocos2d 专家，我担心运行带有 CCCallFuncN 的序列的动作停止但 CCMove* 动作和 moveRandomVector 中的其他动作不会停止的情况。也许您知道我可以实施的不同方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:58:43.190

最后，我将负责启动操作的代码移至更新方法。每次调用更新时，我都会检查是否可以运行一系列操作（布尔变量）。如果可以，我可以运行它，然后将变量设置为 NO，但是在序列中的最后一个操作之后，我调用方法，它检查我是否可以再次运行序列。它很舒服，因为它允许我更改影响动作的变量（CCMoveBy、CCMoveTo）并且它类似于 CCRepeatForever。

# php - 获取时 PDO 自动混叠？

> ID：12199846
> 
> 赞同：5
> 
> 时间：2012-08-30T15:00:44.417
> 
> 标签：php, sql, pdo

我有以下两个表：

**富：**

```
ID     NUMBER(38)
DATA   VARCHAR2(10) 
```

**酒吧：**

```
ID     NUMBER(38)
FOO_ID NUMBER(38)
DATA   VARCHAR2(10) 
```

用于`PDO`发出以下查询时：

```
SELECT * FROM foo f INNER JOIN bar b ON (f.id = b.foo_id) 
```

有没有办法以某种自动别名格式（例如“FOO.ID”、“FOO.DATA”、“BAR.ID”等）从连接中取回*所有*列，这样我就不会不需要为查询中的每一列指定别名吗？

我已经阅读了有关各种[获取模式](http://www.php.net/manual/en/pdostatement.fetch.php)的所有文档，并尝试了大多数[标志/选项](http://www.php.net/manual/en/pdo.constants.php)，但似乎仍然找不到我正在寻找的东西。

**更新：**

*使用`PDO::FETCH_ASSOC`，来自 的列`foo`似乎被来自 的列覆盖`bar`：*

```
array(3) {
  ["ID"]=>
  string(1) "1"
  ["DATA"]=>
  string(5) "bar 1"
  ["FOO_ID"]=>
  string(1) "1"
} 
```

*使用`PDO::FETCH_NUM`, 和 的列`foo`按`bar`顺序出现，但无法识别哪些列来自哪些表，除非知道每个表中的列数和这些列的确切顺序（容易出错）：*

```
array(5) {
  [0]=>
  string(1) "1"
  [1]=>
  string(5) "foo 1"
  [2]=>
  string(1) "1"
  [3]=>
  string(1) "1"
  [4]=>
  string(5) "bar 1"
} 
```

*使用`PDO::FETCH_BOTH`，我们似乎遇到了相同的问题`PDO::FETCH_ASSOC`并`PDO::FETCH_NUM`结合起来，并创建了一个非常难以理解的结果集：*

```
array(8) {
  ["ID"]=>
  string(1) "1"
  [0]=>
  string(1) "1"
  ["DATA"]=>
  string(5) "bar 1"
  [1]=>
  string(5) "foo 1"
  [2]=>
  string(1) "1"
  ["FOO_ID"]=>
  string(1) "1"
  [3]=>
  string(1) "1"
  [4]=>
  string(5) "bar 1"
} 
```

*理想情况下，结果集应如下所示：*

```
array(5) {
  ["FOO.ID"]=>
  string(1) "1"
  ["FOO.DATA"]=>
  string(5) "foo 1"
  ["BAR.ID"]=>
  string(1) "1"
  ["BAR.FOO_ID"]=>
  string(1) "1"
  ["BAR.DATA"]=>
  string(5) "bar 1"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:02:59.287

不，你不能，至少你需要这样做：

```
SELECT f.*, b.* FROM foo f INNER JOIN bar b ON (f.id = b.foo_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:09:47.520

在窗帘后面似乎没有办法做到这一点。显式别名是唯一的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T18:09:34.593

试试这个：

```
SELECT f.ID as fID, f.DATA as fDATA, b.*, FROM foo f INNER JOIN bar b ON (f.id = b.foo_id) 
```

这个想法是只更改冲突的属性，以便不再有冲突。

# redis - 在redis中按字母顺序对一组整数ID进行排序

> ID：12199849
> 
> 赞同：1
> 
> 时间：2012-08-30T15:00:53.437
> 
> 标签：redis

我正在使用 redis 作为 Web 应用程序的数据存储。基本设计基于对象的散列和索引的 zset，例如

```
user:<USER_ID> => hash(username: STRING, user_id: INTEGER, last_visit_date: FLOAT, create_date: FLOAT)
users:by_last_visit => zset( (last_visit_date, user_id) ...)
users:by_create_date => zset( (create_date, user_id) ... ) 
```

我的日期存储为自纪元以来的秒数。到目前为止，这已经很好地工作了——我可以使用强大的 zset 操作来快速获取相关范围、进行分页等，并且我的排序要求自然地映射到浮点空间。

但是，现在我需要按字母顺序排序。我知道 zset 将按值按字母顺序排序以打破得分平局。到目前为止，我最好的解决方案是将我的字符串作为分数为零的值，并依赖此功能。我不喜欢这样，因为我最终得到了一些以 ID 作为值的集合和一些以字符串作为值的集合 - 我需要应用程序逻辑来确定它在给定时间使用的集合类型并将字符串映射回 ID。此外，我失去了随意合并/相交我的集合的能力。

我的下一个最佳解决方案是将字符串映射到浮点分数，但这看起来非常混乱且容易出错，因为字符串可以任意长。

有没有更好的选择，而不是将所有字符串都以相同的分数放入 zset 并保持反向映射回 ids？假设这是最好的解决方案，它是否可靠（即我是依赖副作用还是真实功能）？

# c# - C# #define 关键字在项目范围内可用

> ID：12199852
> 
> 赞同：0
> 
> 时间：2012-08-30T15:01:00.347
> 
> 标签：c#, .net, visual-studio-2010, c-preprocessor, conditional-compilation

> **可能重复：**
> [C#：为整个项目全局声明预处理器符号（如调试）](https://stackoverflow.com/questions/692595/c-declare-preprocesor-symbol-like-debug-globaly-for-whole-project)

我可以在项目中设置`#NOTEMBEDDED`定义，以便在调试时遇到

```
#if NOTEMBEDDED

#endif 
```

在各种源文件中它会承认它并落入 if 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:03:13.153

将其添加到项目设置中，右键单击项目，选择属性，在构建选项卡下有一个“条件编译符号”。

你在那里输入你的条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:02:27.373

转到项目属性中的构建选项卡并将其添加到`Conditional compilation symbols`框中。

# ruby - 如何将数字数组转换为整数？

> ID：12199854
> 
> 赞同：0
> 
> 时间：2012-08-30T15:01:06.960
> 
> 标签：ruby

我正在研究一个从可以在选择列表中找到的某些元素中检索数字的过程。例如，从“测试元素（100）”我试图得到数字“100”。我使用此代码来执行此操作，它捕获两个括号之间的数字：

```
 before = Regexp.escape '('
            after = Regexp.escape ')'
            x = "test element (100)"[-5, 5].scan(/#{before}(.*?)#{after}/).flatten 
```

这段代码有效，X 的值为 100。但这个“100”实际上是一个数组。

有人知道如何将数组“100”转换为整数“100”吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:15:34.477

为什么不是这个？

```
x = "test element (100)"[/(?<=\()\d+(?=\))/].to_i # 100 
```

例子：

```
1.9.3-p194 :001 > "test element (100)"[/(?<=\()\d+(?=\))/].to_i
 => 100
1.9.3-p194 :002 > "test (250) other stuff"[/(?<=\()\d+(?=\))/].to_i
 => 250 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:49:18.603

你为什么不使用：

```
"test element (100)"[/\d+/] 
```

返回：

```
"100" 
```

如果您想要整数值，请使用：

```
"test element (100)"[/\d+/].to_i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:05:03.613

```
x.first 
```

应该给你。

# python - 我如何获得两个相同的python列表的元素？

> ID：12199856
> 
> 赞同：2
> 
> 时间：2012-08-30T15:01:16.133
> 
> 标签：python, list

> **可能重复：**
> [两个列表之间的常见元素比较](https://stackoverflow.com/questions/2864842/common-elements-comparison-between-2-lists)

我有两个列表：

```
[Apples, Bananas, Pears]
[Kiwis, Bananas, Apples] 
```

我只想获取两个列表共享的元素。为此，python中必须有一些内置函数。

结果：

```
[Apples, Bananas] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T15:03:09.417

```
>>> set(["Apples", "Bananas", "Pears"]).intersection(["Kiwis", "Bananas", "Apples"])
set(['Bananas', 'Apples'])
>>> list(_)
['Bananas', 'Apples'] 
```

这相当于：

```
>>>set(["Apples", "Bananas", "Pears"]) & set(["Kiwis", "Bananas", "Apples"])
set(['Bananas', 'Apples']) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T15:01:54.713

**原答案：**

```
[x for x in list1 if x in list2] 
```

**针对有关保留顺序的评论问题：**

该列表理解只是

```
intersection = []
for x in list1:
    if x in list2: #Note that using 'in' involves looping over list2
        intersection.append(x) 
```

使用此扩展版本，可以更轻松地查看正在发生的事情。输出列表与删除`list1`的元素完全相同。`list2`所以它将保留 的顺序`list1`。例如，如果`list1 = [1,2,3]`和`list2 = [3,2,5]`，列表推导的输出将是`[2,3]`。如果列表的位置像这样颠倒

```
[x for x in list2 if x in list1] 
```

然后 的顺序`list2`将保留在输出中，给我们`[3,2]`.

此外，在可能不受欢迎的副作用中，这意味着此方法将包含 的重复元素`list1`。例如：

```
>>> [x for x in [1,2,3,3,3] if x in [2,3]]
[2, 3, 3, 3] 
```

因此，对于您的示例，会发生这种情况：

```
>>> [fruit for fruit in ["Apples", "Bananas", "Pears"] if fruit in ["Kiwis", "Bananas", "Apples"]]
['Apples', 'Bananas'] 
```

但是如果列表被翻转，那么输出就会反转：

```
>>> [fruit for fruit in ["Kiwis", "Bananas", "Apples"] if fruit in ["Apples", "Bananas", "Pears"]]
['Bananas', 'Apples'] 
```

因此，一般来说，集合解决方案更好，因为它更有效，而且您通常不想要重复的元素。但是，如果你想保持秩序，这是要走的路。（如果您想保留顺序并且没有重复项，您可以使用此方法，然后删除重复项，具体取决于您希望保留较早的重复项还是后面的重复项。）

# winapi - 使用 timeSetEvent 和 SetWaitableTimer 解析 WaitForSingleObject

> ID：12199872
> 
> 赞同：1
> 
> 时间：2012-08-30T15:01:56.750
> 
> 标签：winapi, waitforsingleobject

我正在使用 Win32 多媒体计时器在发送大量 UDP 数据包之间设置延迟，但我发现由此产生的延迟比它应该的要长得多。大约 40 毫秒的延迟有时接近 1000 毫秒，即使在使用 Windows Miltimedia 计时器并提高计时器分辨率时也是如此。下面是我使用的代码的简化版本：

```
if( timeGetDevCaps(&tc,sizeof(TIMECAPS)) == TIMERR_NOERROR) 
    {
    timeRes = min( max(tc.wPeriodMin,1), tc.wPeriodMax);
    timeBeginPeriod(timeRes);
    printf("Timer Res: %u\n", timeRes);
    }
/* ... */
while( ptrHead )
    {
    NALU_t *ptrLink = ptrHead;
    unsigned long tsNALU = ptrLink->timestamp - tsFirst;
    printf("Timestamp: %umsec\n", ptrLink->timestamp / 90 );
    int idxPort;
    for(idxPort=0;idxPort<12;idxPort++)
        {
        ip4Addr.sin_port = htons( 60000 + idxPort );
        struct sockaddr *saAddr = (struct sockaddr*)&ip4Addr;
        sendto(fdSocket,(char*)ptrLink->ptrData,ptrLink->lenData,
           0,saAddr,lenAddr);
        }
    if( 1 )
        {
        unsigned long millis = (tsNALU - tsPrev) / 90;
        valTime.QuadPart  = 10000;
        valTime.QuadPart *= millis;
        valTime.QuadPart *= -1;
        if(SetWaitableTimer(hdlTimer,&valTime,0,NULL,NULL,TIME_ONESHOT))
            WaitForSingleObject(hdlTimer,INFINITE);
        }
    tsPrev = tsNALU;
    ptrHead = ptrLink->next;
    free( ptrLink );
    } 
```

我*怀疑*问题是 Windows7 不再保证在由事件而不是回调发出信号时解决计时器，但我不愿意使用后者。任何人都知道为什么即使是单线程测试用例中所谓的高分辨率计时器也如此不准确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:45:09.173

从随后的实验来看，我最好的猜测是 Windows 在 CPU 内核之间移动线程（可能是出于负载平衡的原因——这是在四核 i7 上）会破坏计时功能。我曾经`SetThreadAffinityMask()`将我的计时关键线程锁定到一个 CPU（以及我的非计时线程锁定到所有其他内核），这已经解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T05:49:29.180

如果时间很关键，最好在繁忙的循环中运行（如果需要，您可以使用 Sleep(0) 放弃每次迭代的时间片），使用 QueryPerformanceCounter() API 来测量经过的时间。

# c# - Fluent nHibernate 映射 HasMany 具有固定值的复合键

> ID：12199873
> 
> 赞同：0
> 
> 时间：2012-08-30T15:02:03.530
> 
> 标签：c#, .net, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试为现有的大型系统实现 nHibernate 映射。试图映射两个对象之间的关系。一个对象是“附件”，它与系统中的许多不同对象有关。因此，在数据库中，它有两列用于关联自身

物品种类

项目 ID

如果我有一个带有附件的产品，那么 ProductId = ItemId 和 ItemType 将是一个预定义的值，例如“0001”，其中用户对象可能是“0002”，订单可能是“0003”，以此类推。

现在我需要在 nhibernate 中映射它。所以我想在产品对象上有一个附件集合，但这意味着将它映射到 ItemId 和 ItemType

如果它只是需要的 ItemId 映射，它可以做

```
HasMany(x => x.Attachments).KeyColumn("ProductId"); 
```

但相反，我需要将其映射到附件表中 KeyColumn“ProductId”和 ItemType 等于“0001”的位置

我怎么能这样……？

结构产品表

> *[产品]*
> 
> 产品编号
> 
> 姓名
> 
> 描述

附表

> *[附件]*
> 
> 附件网址
> 
> 项目 ID
> 
> 物品种类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:09:58.310

我要做的是创建一个基本的抽象附件类型，如下所示：

```
public abstract class Attachment
{
    public TYPE AttachmentURL { get; set; }
} 
```

然后为每个附件“类型”创建一个子类：

```
public class ProductAttachment : Attachment
{
    protected ProductAttachment() { }

    public ProductAttachment(Product parent)
    {
        Parent = parent;
    }

    public Product Parent { get; protected set; }
} 
```

然后，在您的附件映射中，您将包含以下行：

```
DiscriminateSubClassesOnColumn("ItemType"); 
```

然后为每个子类映射添加一个“DiscriminatorValue”调用。例如：

```
// Inside ProductAttachment mapping
...
DiscriminatorValue("0001");
... 
```

然后，像往常一样映射所有内容。这带来了额外的好处，即您的产品将有一个“ProductAttachment”列表，这将要求“父级”是一个产品。

从数据库中仅获取基本类型“附件”（而不是“产品附件”）时可能会有些奇怪，但是当/如果它出现时，您可以越过那座桥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:31:40.337

在这里找到了答案

[Fluent Nibernate 在映射中放置 where 子句](https://stackoverflow.com/questions/2319244/fluent-nibernate-putting-a-where-clause-in-the-mapping)

我可以像这样对映射进行硬编码

```
HasMany(x => x.Children).Where("ItemType='0001'"); 
```

# java - 关于@ForceDiscriminator/@DiscriminatorOptions(force=true)的使用

> ID：12199874
> 
> 赞同：15
> 
> 时间：2012-08-30T15:02:04.747
> 
> 标签：java, hibernate, inheritance, orm

为什么在某些继承和多态关联的情况下是必要的`@ForceDiscriminator`或等效的？`@DiscriminatorOptions(force=true)`这似乎是完成工作的唯一方法。有什么理由不使用它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-31T05:11:46.287

当我一次又一次地讨论这个问题时，我认为这可能有助于澄清：首先，Hibernate 在使用`JOINED_TABLE`映射时确实不需要歧视。但是，它在使用时确实需要它`SINGLE_TABLE`。更重要的是，其他 JPA 提供者大多确实需要它。

当执行多态`JOINED_TABLE`查询时，Hibernate 实际所做的是创建一个动态命名的鉴别`clazz`器，使用一个 case-switch 在外连接继承树中涉及的所有表后检查具体子类的唯一字段的存在。将`"hibernate.show_sql"`属性包含在您的`persistence.xml`. 在我看来，这可能是`JOINED_TABLE`查询的完美解决方案，所以 Hibernate 的人吹嘘它是对的。

执行更新和删除时，情况有所不同；这里 hibernate 首先查询您的根表以查找与语句的 where 子句匹配的任何键，并`pkTable`从结果中创建一个虚拟。然后它`"DELETE FROM / UPDATE table WHERE pk IN pkTable"`为您的继承树执行任何具体类；IN 运算符会导致`O(log(N))`每个扫描的表条目的子查询，但它可能在内存中，因此从性能角度来看并不算太糟糕。

为了回答您的具体问题，Hibernate 在这里根本没有看到问题，从某个角度来看，它们是正确的。他们很容易`@DiscriminatorValue`通过在 期间注入鉴别器值来简单地尊重注释`entityManager.persist()`，即使他们实际上并没有使用它们。然而，不尊重鉴别器列`JOINED_TABLE`有优势（对于 Hibernate），可以创建一个温和的供应商锁定案例，甚至可以通过指向卓越的技术来辩护。

`@ForceDiscriminator`或者`@DiscriminatorOptions(force=true)`肯定有助于减轻一点痛苦，但是您必须在创建第一个实体之前使用它们，或者被迫使用 SQL 语句手动添加缺失的鉴别器值。如果你敢于离开 Hibernate，它至少会花费你一些代码更改来删除这些 Hibernate 特定的注释，从而产生对迁移的阻力。在这种情况下，这显然是 Hibernate 关心的全部内容。

以我的经验，厂商锁定是每个市场领导者最疯狂的梦想的天堂，因为它是不费吹灰之力保护市场份额的权贵魔杖；因此，只要客户不反击并向供应商施加高于所获得收益的价格，就会这样做。谁说开源世界会有所不同？

ps，只是为了避免任何混淆：我绝不隶属于任何 JPA 实现者。

pps：我通常会在迁移之前忽略这个问题；`SQL UPDATE ... FROM`然后，您可以使用 Hibernate 用来填充缺失的鉴别器值的相同 case-switch-with-outer-joins 技巧来制定语句。一旦你了解了基本原理，这实际上很容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-09T14:13:09.960

伙计们让我试着解释一下`@DiscriminatorOptions(Force=true)`。好吧，它用于单表继承，我最近在其中一个场景中使用了它。我有两个实体映射到单个表。当我试图获取一个实体的记录时，我得到了包含来自这两个实体的记录的结果列表，这是我的问题。为了解决这个问题，我使用 `@DiscriminatorOptions(Force=true)`了它将使用 Discriminator 列创建谓词，并将指定的值映射到相应的实体。所以我使用后查询将如下所示`@DiscriminatorOptions(Force=true)`

```
select * 
from TABLE 
where  YOUR PREDICATE AND DiscriminatorColumn = DiscriminatorValue 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T05:34:01.920

我认为这更多是我的观点，但我认为有些人会同意我的看法。我更喜欢 Hibernate 使您不使用鉴别​​器这一事实。在某些情况下，鉴别器是不必要的。

例如，我有一个`Person`实体，其中包含姓名、出生日期等内容。该实体可以被其他几个实体使用，例如`Employee`or `Customer`。当我不`Person`从其他实体引用，而是引用`Employee`or`Customer`时，不使用鉴别​​器，因为 Hibernate 被指示获取任何一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-07T11:13:52.653

@yannisf ForceDiscriminator 不是解决此问题的唯一解决方案。

您可以为每个子类进行 instanceof 测试。虽然这就像在代码中对类进行硬编码，但如果没有填充鉴别器列，这是解决问题的一种更简洁的方法。

这也有助于您的代码避免混合 jpa 和 hibernate 注释。

正如yannisf 所指出的，instanceOf 是OO 世界中的一种反模式。

另一种解决方案可能是更改您的实体映射。假设一个实体 A 有一个对超类 B 的引用，而 B 有 C1 和 C2 类型的子类，那么您可以让 C1 和 C2 有一个指向 A 的外键，而不是 A 指向 B。这一切都归结为改变实体设计，以免混淆注释。

谢谢瓦巴夫

# events - 事件处理程序被多次触发

> ID：12199881
> 
> 赞同：0
> 
> 时间：2012-08-30T15:02:23.967
> 
> 标签：events, event-handling, browser

我的两个 EventHandler 有问题，它们的工作方式相同，所以这里有一个：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        webBrowserWebsite.Url = new System.Uri(textBoxURL.Text, System.UriKind.Absolute);
        webBrowserWebsite.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowserWebsite_DocumentCompleted);
    }

    void webBrowserWebsite_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
            StreamWriter(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\CurrentData.wfd");
            sw.Write(webBrowserWebsite.Document.Body.InnerText);
            sw.Close();
    } 
```

问题是，EventHandler 多次触发，它不会停止！为什么要这样做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:37:35.227

您编写的代码不会编译（您`StreamWriter`在 EventHandler 中的代码没有分配给任何东西）并且没有更多关于您如何调用它的上下文，很难确定。

但最可能的原因是您`Form1_Load`多次调用，但使用的是同一个`webBrowserWebsite`对象。每次加载表单时，您都在添加一个新的事件处理程序。而且由于您没有显示任何代码来显示您删除事件处理程序的位置，我猜它会在您每次调用 Form_Load 时触发一次。

根据您的设计，您最好在构造函数中添加事件处理程序，这样无论您加载表单的次数如何，它都只会添加一次。

```
public Form1()
{
    webBrowserWebsite.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowserWebsite_DocumentCompleted);
}

private void Form1_Load(object sender, EventArgs e)
{
    webBrowserWebsite.Url = new System.Uri(textBoxURL.Text, System.UriKind.Absolute);
} 
```

或者删除事件处理程序中的事件处理程序：

```
void webBrowserWebsite_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    StreamWriter(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\CurrentData.wfd");
    sw.Write(webBrowserWebsite.Document.Body.InnerText);
    sw.Close();
    webBrowserWebsite.DocumentCompleted -= webBrowserWebsite_DocumentCompleted;
} 
```

此外，由于`StreamWriter`implements `IDisposible`，您应该将其放在`using`块内或至少`sw.Dispose()`在方法末尾调用

# jquery - 将额外的窗格动态添加到 jquery 手风琴中

> ID：12199889
> 
> 赞同：0
> 
> 时间：2012-08-30T15:02:34.870
> 
> 标签：jquery, jquery-ui

嗨，我有一个 jquery 手风琴硬编码并且工作完美，但我想动态地将另一个窗格添加到同一个手风琴的末尾，但我似乎无法得到它。

这是我用来尝试附加到手风琴 div 末尾的代码：

```
$('#accordion').append($('<h3><a href="#"></a>Test</h3><div><table><tr>Hello</tr></table></div>')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:08:30.173

不幸的是，看起来没有内置的方法可以做到这一点。但这有效：

```
$( "#accordion" ).accordion();
$('#add').click(function(){
    $('#accordion').append('<h3><a href="#">Section 5</a></h3><div><p>5</p></div>');
    $( "#accordion" ).accordion('destroy').accordion();
}); 
```

[http://jsfiddle.net/Vr55M/](http://jsfiddle.net/Vr55M/)

# c# - Roslyn - 找不到 SyntaxNode.ReplaceNode()

> ID：12199892
> 
> 赞同：5
> 
> 时间：2012-08-30T15:02:40.133
> 
> 标签：c#, .net, roslyn

按照本教程[http://msdn.microsoft.com/en-us/vstudio/hh543922.aspx](http://msdn.microsoft.com/en-us/vstudio/hh543922.aspx)，我正在尝试使用应该在 SyntaxNode 类中的 ReplaceNode 方法。

问题是，我有这个错误：“Roslyn.Compiler.CSharp.SyntaxNode 不包含‘ReplaceNode’的定义

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T16:39:41.220

`ReplaceNode`实际上是一个扩展方法（这样就可以返回传入的类型）。确保你有`using Roslyn.Compilers;`并且`using Roslyn.Compilers.CSharp;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:11:43.607

看起来该版本的 CTP 存在问题。其他人也有同样的问题，例如[http://youtrack.jetbrains.com/issue/DOTP-4774](http://youtrack.jetbrains.com/issue/DOTP-4774)或[http://youtrack.jetbrains.com/issue/DOTP-4836](http://youtrack.jetbrains.com/issue/DOTP-4836)。

# forms - 导航栏中的 twitter 引导模式在掩码后面打开

> ID：12199899
> 
> 赞同：4
> 
> 时间：2012-08-30T15:03:07.290
> 
> 标签：forms, twitter-bootstrap, modal-dialog

我正在使用表单导航栏搜索。我想要一个从导航栏中的链接打开的“高级搜索”模式。

如果我将模态 div 放在导航栏中的标记内，则当模态打开时，它位于通常位于模态窗口之外的变暗区域的*后面。*单击任意位置会关闭模式和变暗的蒙版。

我可以通过将模式 div 移到导航栏之外（因此，移到我的表单之外）来解决这个问题，但它会破坏我的表单功能。高级搜索模式应该直接在导航栏中用作表单字段的扩展，但如果我使用两种不同的表单来解决模式问题，这些表单将不再协同工作。那有意义吗？

如果我将整个导航栏加上我的模式（在导航栏之外）包含在一个标签中，它可以工作，但会破坏一些导航栏格式，所以我认为这不是一个非常干净的解决方案。

因此，我要么需要一种方法来解决模态显示问题，要么需要一种使我的表单情况正常工作的方法（例如，将两个表单链接在一起，而无需为隐藏字段等提供大量重复标记）。

感谢您的任何想法！马特

这就是我现在所拥有的（我已经开始了，之后只是调整了 css 以使事情排成一行）。根据应该如何使用引导程序的导航栏，我认为它在语义上不正确，但我的表单工作正常，这对我来说很重要。:)

```
<form>
  <navbar></navbar>
  <modal></modal>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:39:45.553

我有点不确定你在问什么，但这是我认为你在问的问题。模态实际上并不需要将模态的代码放在表单本身中。您在导航栏中唯一需要的是链接和触发器激活模式。

```
<form>
    <div class="navbar">
        <div class="navbar-inner">
            <ul class="nav">
                <li><a href="#myModal" role="button" data-toggle="modal">Advanced Search</a></li>
            </ul>
        </div>
    </div>
</form>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Advanced Search</h3>
    </div>
    <div class="modal-body">
        <p>Put your search fields here. </p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Search</button>
    </div>
</div> 
```

请参阅工作链接。

[http://jsbin.com/ifaqaj/1/edit](http://jsbin.com/ifaqaj/1/edit)

# actionscript-3 - 如何使用 JSFL 将大量位图从不同文件夹导入到库中，并将文件夹结构保存在 fla 文件中

> ID：12199900
> 
> 赞同：1
> 
> 时间：2012-08-30T15:03:06.670
> 
> 标签：actionscript-3, flash, jsfl

我需要将大量位图文件从不同的文件夹导入到 fla 文件库中，并将文件夹结构保存在 fla 文件中。

所以例如我有这样的文件结构：

mainFolder -> folder1 -> png1.png
mainFolder -> folder1 -> folder11 -> png2.png
mainFolder -> folder2 -> png3.png
mainFolder -> folder2 -> png4.png

我需要在库中的 fla 文件中具有相同的结构：

文件夹1 -> png1.png文件夹1 -> 文件夹11 -> png2.png 文件
夹2 -> png3.png 文件
夹2 -> png4.png

现在我已经创建了这个代码：

```
var dom = fl.getDocumentDOM(); 
var URI = fl.browseForFileURL("select", "Import File");
var success = dom.importFile(URI);
if(success)
{
    fl.trace(flash.documents[0].name);
    var indexOfFileName = URI.lastIndexOf("/");
    var folderStructure = URI.slice(URI.indexOf(flash.documents[0].name),indexOfFileName);
    dom.library.newFolder(folderStructure); 

    var fileName = URI.slice(indexOfFileName + 1,URI.length);       
    dom.library.moveToFolder(folderStructure, fileName, true);
} 
```

// mainFolder 在我的例子中是 fla 文件的名称（带有 .fla 扩展名）

此代码根据需要创建文件夹结构，但我还不知道如何一次加载多个文件，只需指向主文件夹，例如通过
`fl.browseForFolderURL("Select a folder.")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:48:53.950

最后我成功了。如果有人需要这样的东西，这是我的解决方案：

```
fl.outputPanel.clear()
var folderURI = fl.browseForFolderURL("Select a folder.");
fileList = new Array()

function listFile(paths){
    var files=[]
    var folds=[]
    var files=FLfile.listFolder(paths,"files"); 

    for(i=0;i<files.length;i++)
    {   
        if(paths.lastIndexOf("/") != paths.length -1 )
        {
            paths+="/";         
        }
        fileList.push(paths + files[i]);
    }
    var folds = FLfile.listFolder(paths , "directories");

    for(var j=0;j<folds.length;j++)
    {           
        var subPath = paths + folds[j] + "/"        
        listFile(subPath);  

        //make sure that this stops at a reasonable point.
        if (fileList.length > 1000)
        return;
    }
}

function importFile(URI)
{
    var success = dom.importFile(URI);
    if(success)
    {       
    var indexOfFileName = URI.lastIndexOf("/");
    var documentName = flash.documents[0].name;             
    var folderStructure = URI.slice(URI.indexOf(documentName) + documentName.length + 1,indexOfFileName);
        if(folderStructure)
            dom.library.newFolder(folderStructure); 
        var fileName = URI.slice(indexOfFileName + 1,URI.length);       
        dom.library.moveToFolder(folderStructure, fileName, true);
    }
    return;
}

listFile(folderURI);

for(i=0;i<fileList.length;i++)
{
    fl.trace("fileList["+i+"]="+ fileList[i]);
    importFile(fileList[i])
} 
```

带有照片的主文件夹的名称必须与 fla 的名称相同，例如文件夹的名称必须为 test.fla

# java - 如何通过 RESTful Web 服务调用从另一个线程（在 Java 中）杀死主线程？

> ID：12199902
> 
> 赞同：1
> 
> 时间：2012-08-30T15:03:10.323
> 
> 标签：java

假设我有一个 Java 应用程序正在运行，并且我提供了 RESTful Web 服务调用（通过 Java Jersey）。首先，我对 HTTP RESTful 请求（或 servlet 请求）的每次调用都运行在与主线程不同的线程上是对的吗？如果是这样，如果我提供一个 RESTful 调用来终止应用程序，它如何到达主线程（由 main() 方法启动的线程）来终止它并随后停止程序？

注意：我问这个的原因是我需要优雅地关闭主线程（和程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:07:33.157

你的 restful 服务应该像对待任何其他请求一样对待关闭请求。

例如，如果您的应用是在线商店，您可能会调用类似`processOrder`或`getInventory`。这些调用可以访问您应用程序中的许多内容，对吗？好吧，只需拨打一个名为 的新电话`shutdown`。此调用将关闭未来调用的大门，等待现有调用完成，将内存中的信息保存到 DB，以及其他安全关闭过程。

这真的只是另一个电话。我不会太担心从调用中“停止主要方法” - 考虑逻辑行为，而不是技术行为。

它会出现在泽西岛，你正在寻找`client.destroy();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:06:56.493

您可以使用以下命令终止 Java VM。由于VM已停止，因此所有线程也应被它终止...

```
System.exit(0); 
```

您可以查看[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#exit%28int%29)以获取有关使用它的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:45:57.563

Jersey 服务是

```
com.sun.net.httpserver.HttpServer` 
```

...您通过调用创建的

```
com.sun.jersey.api.container.httpserver.HttpServerFactory.create(...) 
```

假设您可以获得 HttpServer 实例，您可以通过调用其上的`stop(int)`方法来关闭服务。您没有理由不能从您的请求处理程序之一执行此操作。

# xamarin.ios - 如何在 MonoTouch 中以编程方式实例化一个子类 ViewController？

> ID：12199904
> 
> 赞同：3
> 
> 时间：2012-08-30T15:03:13.527
> 
> 标签：xamarin.ios

我对通过 XCode Interface Builder 创建的 ViewController 进行了子类化。我的子类是这样定义的

```
public MyViewControllerGeneric<T> : MyViewController{
    public MyViewControllerGeneric(IntPtr handle) : base(handle){}
} 
```

我可以使用 Storyboard.InstantiateViewController("MyViewController") 来获取 MyViewController 的实例。但是，如何创建 MyViewControllerGeneric 的实例并将句柄传递给它？

试过了

```
var vc = new MyViewControllerGeneric<MyType>(this.Handle)
var vc = new MyViewControllerGeneric<MyType>(new IntPtr(DateTime.Now.Ticks) 
```

都抛出一个 SigAbort

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T17:23:50.547

`IntPtr`手柄不是您应该传递的东西。

请改用此构造函数：

```
public MyViewControllerGeneric<T> : MyViewController{
    public MyViewControllerGeneric() : base(){ }
} 
```

或者，如果您需要加载 NIB，则取决于您的基类：

```
public MyViewControllerGeneric<T> : MyViewController{
    public MyViewControllerGeneric() : base("MyViewControllerGeneric", null){ }
} 
```

# c# - 如何在 Asp.net 2.0 C# 中显示另存为对话框？

> ID：12199905
> 
> 赞同：2
> 
> 时间：2012-08-30T15:03:17.787
> 
> 标签：c#, asp.net, excellibrary

我正在使用 ExcelLibrary 生成动态 Excel 表。效果很好。

**代码**

```
 //create new xls file
    string file = Server.MapPath("Discussion_Board_Report.xls");
    Workbook workbook = new Workbook();
    Worksheet worksheet = new Worksheet("Report");
    worksheet.Cells[0, 0] = new Cell("COMM 226 Case Discussions Report");

    worksheet.Cells[4, 0] = new Cell("Student ID");
    worksheet.Cells[4, 1] = new Cell("User Name");
    worksheet.Cells[4, 2] = new Cell("Case 1");
    worksheet.Cells[4, 3] = new Cell("Case 2");
    worksheet.Cells[4, 4] = new Cell("Case 3");
    worksheet.Cells[4, 5] = new Cell("Topics");
    worksheet.Cells[4, 6] = new Cell("Replies");

    workbook.Worksheets.Add(worksheet);
    workbook.Save(file); 
```

**问题**

这段代码的问题是，它将文件保存在服务器中。我无法在 C:// 中保存文件，因为 Windows 想要允许我在未经用户许可的情况下保存！我希望用户选择自己的文件路径。如何提示另存为对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:16:25.933

看起来您正在使用 EPPlus，它在 ExcelPackage 对象上有一个 Stream 属性，我相信您可以使用它来写入响应流。我已经包含了一些类似于我过去用来下载文件的代码。

然后，我将此逻辑放入我链接到的页面的页面加载中。

```
ExcelPackage package = new ExcelPackage();
ExcelWorksheet worksheet = package.Workbook.Worksheets.Add("Name Here");
///worksheet logic

var msArray = package.Stream;
var response = HttpContext.Current.Response;
response.Clear();
response.ClearHeaders();
response.ContentType = "application/vnd.ms-excel";
response.AddHeader("Content-Disposition", "attachment; filename={0}.xls".FormatWith(reportName));
response.AddHeader("Content-Length", msArray.Length.ToString());
response.OutputStream.Write(msArray, 0, msArray.Length);
response.Flush();
response.End(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:13:09.993

您需要做的是将文件流式传输给用户。我相信`workbook`班级提供保存到 a `Stream`，在这种情况下`Response Stream`

*像*这样的东西：

```
Response.ContentType = "application/vnd.ms-excel";
//Force the browser to offer to download the file
Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
workbook.SaveToStream(Response.OutputStream); 
```

**更新**

显然，Excel 库的作者直到 .NET 4 才对此提供支持，现在[声称通过这样做来支持它](http://code.google.com/p/excellibrary/issues/detail?id=92)：

```
 MemoryStream m = new MemoryStream(); // Temp Stream
    workbook.Save(m);
    m.CopyTo(Response.OutputStream); 
```

**更新 2**

实际上，作者并不是声称在 a 上调​​用 Workbook 的 Save 方法`MemoryStream`会起作用的人，而是其他人。作者实际上推荐了这段愚蠢的代码。

```
DataSet ds = GetData();
MemoryStream m = new MemoryStream();
ExcelLibrary.DataSetHelper.CreateWorkbook(m , ds);
m.WriteTo(Response.OutputStream); 
```

如果这不起作用，那么如果您完全停止使用该库并改用 EPPlus，恐怕您会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:27:02.200

您可以尝试**FileUpload**服务器控件。

在 yourfile.aspx 中使用：

```
<asp:FileUpload ID="FileUpload1" runat="server" /> 
```

在 yourfile.aspx.cs 中使用它来保存用户选择的路径：

```
Server.MapPath(FileUpload1.FileName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T15:10:43.320

您不能在纯应用程序中执行此操作。您的代码在服务器上运行 - 而不是在用户的机器上。

您可以在服务器上生成 Excel 文件，然后为您的用户提供下载它们的链接，但无法将服务器上的代码直接保存到您用户的机器上。

您可以尝试使用 Silverlight 之类的客户端插件执行类似操作，并且您对 Silverlight 公开的文件系统的访问权限有限。

也许您可以让我们更多地了解您正在尝试做的事情，我们可以提供更好的指导。

# gwt - 从模板中的数据源渲染图像

> ID：12199906
> 
> 赞同：3
> 
> 时间：2012-08-30T15:03:17.607
> 
> 标签：gwt, clientbundle

我想在模板中呈现源自 ClientBundle 的图像。但我得到的是：

```
<img="#"> 
```

我检查了数据源的内容，如果我将图像 (data:image/png;base64...) 复制到 {0} 中，它就可以工作。

如果我将它作为参数传递，为什么它不起作用？

```
DataResource inputCheckImage = MGWTStyle.getTheme().getMGWTClientBundle().inputCheckImage();
private static Template TEMLPATE = GWT.create(Template.class); 

public interface Template extends SafeHtmlTemplates
{
    @SafeHtmlTemplates.Template("<div><img src=\"{0}\"></div>")
    SafeHtml content(String image);
}

//@Override
public void render(SafeHtmlBuilder safeHtmlBuilder, Action model) {

    SafeUri url = inputCheckImage.getSafeUri();
    SafeHtml safeHtml = TEMLPATE.content(url.asString());
    safeHtmlBuilder.append(safeHtml);       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T16:56:03.753

使用 SafeUri 作为模板上的参数类型，否则该值将被清理并且 data: URI 被认为是不安全的。

# r - ggplot2中的重叠密度图

> ID：12199919
> 
> 赞同：7
> 
> 时间：2012-08-30T15:03:58.863
> 
> 标签：r, ggplot2

想象一下，我有两个不同长度的向量。我想生成一个覆盖两个向量密度的图。我认为我应该做的是：

```
vec1 <- data.frame(x=rnorm(2000, 0, 1))
vec2 <- data.frame(x=rnorm(3000, 1, 1.5))
ggplot() + geom_density(aes(x=x, colour="red"), data=vec1) + 
  geom_density(aes(x=x, colour="blue"), data=vec2) 
```

然后我想我应该这样做：

```
vec1 <- data.frame(x=rnorm(2000, 0, 1))
vec2 <- data.frame(y=rnorm(3000, 1, 1.5))
ggplot() + geom_density(aes(x=x, colour="red"), data=vec1) + 
  geom_density(aes(x=y, colour="blue"), data=vec2) 
```

这些都不太管用，因为颜色混合了。

基于我在 StackOverflow [1](https://stackoverflow.com/questions/9768556/plot-vectors-of-different-length-with-ggplot2) [2](https://stackoverflow.com/questions/6939136/how-to-overlay-density-plots-in-r)中找到的另一个解决方案，我意识到我应该试试这个：

```
vec1 <- data.frame(x=rnorm(2000, 0, 1), grp="vec1")
vec2 <- data.frame(x=rnorm(3000, 1, 1.5), grp="vec2")
allDat <- rbind(vec1, vec2)

ggplot(allDat, aes(x, colour=grp)) + geom_density()

ggplot(allDat, aes(x, colour=grp)) + geom_density() + 
  scale_colour_manual(values=c("green", "blue"))

ggplot(allDat, aes(x, colour=grp)) + geom_density() + 
  scale_colour_manual(values=c(vec2="green", vec1="blue")) 
```

好的，我解决了我原来的问题。但是有没有办法做类似于我上面尝试的第一个方法？从文档中的措辞方式来看`ggplot`，我会这么认为。感谢任何建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T17:35:28.570

如果您将`colour`参数的分配移出`aes()`.

```
vec1 <- data.frame(x=rnorm(2000, 0, 1))
vec2 <- data.frame(x=rnorm(3000, 1, 1.5))

library(ggplot2)

ggplot() + geom_density(aes(x=x), colour="red", data=vec1) + 
  geom_density(aes(x=x), colour="blue", data=vec2) 
```

![在此处输入图像描述](../Images/4ad87c8247317da0b0cabb05312c1f2c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-12T12:01:36.007

如果你也想要传说，试试这个：

```
df <- rbind(data.frame(x=rnorm(2000, 0, 1), vec='1'),
            data.frame(x=rnorm(3000, 1, 1.5), vec='2'))
ggplot(df, aes(x, group=vec, col=vec)) + geom_density(position='dodge') 
```

[![在此处输入图像描述](../Images/bcfb6f0f92adecc943495cbff0ea8f88.png)](https://i.stack.imgur.com/T4cGp.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T11:02:41.820

我在使用上述解决方案时遇到了一些问题，因为我的数据包含在单个数据框中。在美学中使用`...` `data=df$A`不起作用，因为这将为 ggplot 提供一个不支持的“数字”类向量。

因此，要覆盖所有包含在同一数据框中的不同列，我建议：

```
vec1 <- rnorm(3000, 0, 1)
vec2 <- rnorm(3000, 1, 1.5)

df <- data.frame(vec1, vec2)
colnames(df) <- c("A", "B")

library(ggplot2)

ggplot() + geom_density(aes(x=df$A), colour="red") + 
  geom_density(aes(x=df$B), colour="blue") 
```

[![在此处输入图像描述](../Images/cdce710b0872b464ff16c9538157fe1d.png)](https://i.stack.imgur.com/T5XcV.png)

对于大多数人来说，这似乎很明显，但对于我作为初学者来说，它不是。希望这可以帮助。

# asp.net-mvc-3 - 为什么 DataType.EmailAddress 会自动转换链接？

> ID：12199921
> 
> 赞同：0
> 
> 时间：2012-08-30T15:04:00.383
> 
> 标签：asp.net-mvc-3, razor

我正在使用带有 DataType.EmailAddress 的模型。我想在运行时修改地址链接，但是它已经有自动阻止我修改的电子邮件链接。

```
@{
    var subject = "";
    if (Model.Name.Length > 30)
    {
        subject = Model.Name.Substring(0, 30) + "...";
    }
    else
    {
        subject = Model.Name;
    }
}
<a href="mailto:@Html.DisplayFor(model => model.email)?subject=Re: @subject">model => model.email</a> 
```

但我得到了

```
<a href="mailto:&lt;a href=&quot;mailto:emailaddress&quot;&gt;emailaddress&lt;/a&gt;?subject=Re: subject"><a href="mailto:emailaddress">emailaddress</a></a> 
```

代替

```
<a href="mailto:&lt;a href=&quot;mailto:emailaddress&quot;&gt;emailaddress&lt;/a&gt;?subject=Re: subject">emailaddress</a> 
```

为什么电子邮件地址会自动转换为链接形式？以及如何阻止它？我想保留数据类型以使用验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:05:38.030

您正在尝试打印属性的值：`@model.Email`。
`DisplayFor`不是你想要的。

此外，您需要对`subject`参数进行 URL 编码，包括`Re:`.

# jquery - 为什么更改 jQuery UI 按钮的图标会破坏我在 Internet Explorer 中的链接？

> ID：12199922
> 
> 赞同：0
> 
> 时间：2012-08-30T15:04:05.510
> 
> 标签：jquery, jquery-ui, internet-explorer

我试图在使用按钮后立即更改它的图标。代码非常简单：

```
<a id='just-a-link' target="_blank" href="http://google.com">Google</a>

jQuery('#just-a-link').button().bind('click', function() {

    var icons = jQuery(this).button("option", "icons");
    icons.primary = 'ui-icon-plus';

    jQuery(this).button("option", "icons", icons);

}); 
```

但是 Internet Explorer 不会触发该链接。因此，**单击**链接**确实会更改图标，但不会打开页面**。

你有什么建议来解决这个问题？

[http://jsfiddle.net/YnwnU/](http://jsfiddle.net/YnwnU/)

在小提琴中，您可以看到`jQuery(this).button("option", "icons", icons);`导致错误的原因是第二个按钮确实打开了链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:13:49.207

好吧，再看一遍之后，看起来因为你`.button()`在一个已经建立的调用内部`.button()`调用，它恰好正在杀死 -href- 或任何已经设置的事件处理程序。（在这种情况下打开一个新窗口和链接。

```
jQuery('#just-a-link').button().bind('click', function() {
    var icons = jQuery(this).button("option", "icons");
    icons.primary = 'ui-icon-plus';

    // Adding this makes it work in IE for at least the code you currently have
    window.open($(this).attr('href'));
}); 
```

在我看来，您更像是试图简单地向所有外部链接添加一个图标，然后在新窗口中打开它们。为什么不这样做*呢*？

```
var icons = jQuery(this).button("option", "icons");
    icons.primary = 'ui-icon-plus';

jQuery('a[target="_blank"]').button().button("option", "icons", icons); 
```

无需绑定单击...只需将所有锚点设置`target="_blank"`为按钮并为它们提供图标。这也使它在 IE 和其他浏览器中自动运行。搏一搏。

[更新了 jsFiddle 演示](http://jsfiddle.net/YnwnU/7/)

# netbeans - 项目/选择中的“全部替换”不起作用？

> ID：12199924
> 
> 赞同：3
> 
> 时间：2012-08-30T15:04:21.133
> 
> 标签：netbeans, replace

在 Netbeans 7.2 中，选择包或项目并打开对话框`Edit->Replace`后`Edit->Replace in projects`，我找不到替换所有出现的按钮或选项。我发现的唯一方法是打开一个文件，选择`Edit->Replace`然后“全部替换”，但这显然只适用于当前文件。

如何在文件、包、项目...的自定义选择中查找和替换？

### 编辑

“搜索结果”窗口如下所示`Edit->Replace in projects...->Find`：![搜索结果窗口](../Images/33ef434ca839582fb2bcce28c941905b.png)

没有按钮或菜单可以进行替换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:05:10.633

如果您使用，则会出现`Edit -> Replace (in Projects)`一个`Search Results`窗口，列出可供您选择的所有匹配项。

但是现在你必须点击**`Replace xy matches`**完成。

请注意，`Search Results`窗口必须足够大，以便显示所有按钮！

# z3 - 用于求解器超时的 Z3 C-API

> ID：12199929
> 
> 赞同：2
> 
> 时间：2012-08-30T15:04:28.090
> 
> 标签：z3

我在 Linux 上使用 Z3 4.1 C-API。我想为求解器指定超时。

我正在使用以下命令，但是在命令 Z3_solver_set_params() 中出现分段错误。

```
Z3_context ctx = mk_context();     
    Z3_solver s = Z3_mk_solver(ctx);     

    Z3_params params = Z3_mk_params(ctx);     
    Z3_symbol r = Z3_mk_string_symbol(ctx, ":timeout");     

    Z3_params_set_uint(ctx, params, r, static_cast<unsigned>(10));     
    Z3_solver_set_params(ctx, s, params); 
```

看来我没有正确使用 API。
我在包含示例的 test_capi.c 文件中找不到任何 C-API 示例来设置求解器超时。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:23:42.820

在执行任何其他操作之前，您需要增加求解器和参数的引用计数。这是一个将要经历的片段。

```
Z3_config cfg = Z3_mk_config();
Z3_context ctx = Z3_mk_context(cfg);     
Z3_solver s = Z3_mk_solver(ctx);   
Z3_solver_inc_ref(ctx, s); 
{

Z3_params params = Z3_mk_params(ctx);  
Z3_params_inc_ref(ctx, params);
{
Z3_symbol r = Z3_mk_string_symbol(ctx, ":timeout");    

Z3_params_set_uint(ctx, params, r, 10);
Z3_solver_set_params(ctx, s, params);  
Z3_params_dec_ref(ctx, params);
}
}
Z3_solver_dec_ref(ctx, s);
Z3_del_config(cfg);
Z3_del_context(ctx); 
```

# python - Python dict 不理解

> ID：12199930
> 
> 赞同：6
> 
> 时间：2012-08-30T15:04:28.823
> 
> 标签：python, dictionary

（对不起，无法抗拒双关语！）

我想知道为什么似乎无法翻译：

```
dict([(str(x),x) if x % 2 else (str(x),x*10) for x in range(10)]) 
```

使用dict理解进入这个更易读的表达式：

```
{str(x):x if x % 2 else str(x):x*10 for x in range(10)} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T15:05:31.000

```
{ str(x):(x if x % 2 else x*10) for x in range(10) } 
```

似乎运作良好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:10:46.800

设置了优先级，因此`if .. else`不适用于整个`key:value`对：它只是值的一部分。这意味着你想要：

```
{str(x): (x if x % 2 else x*10 for x in range(10))} 
```

万一您想要不同的密钥计算以及不同的值，在某些情况下，您必须这样做：

```
{(str(x) if x % 2 else repr(x)) : x if x % 2 else x * 10 } 
```

这相当于：

```
dict([(str(x),x) if x % 2 else (repr(x),x*10) for x in range(10)]) 
```

或者决定对于如此复杂的事情，显式循环比单行代码更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:15:48.487

看起来这只是一个问题或正确分组表达式：

```
# original
{str(x): (x if x % 2 else x*10) for x in range(10)}

# slightly more complex, allowing both key and value to have the ternary
{(str(x) if x % 3 else str(x+1)) : (x if x % 2 else x*10) for x in range(10)} 
```

# objective-c - 在 Objective-C 中字符串与数组元素的连接

> ID：12199956
> 
> 赞同：2
> 
> 时间：2012-08-30T15:05:37.787
> 
> 标签：objective-c, ios, arrays, string

有人可以向我解释为什么这段代码不起作用吗？我将数组的元素发送到 NSLog 没有问题，但它们似乎没有附加到字符串中。我必须将数组元素转换为字符串吗？

```
 success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSArray *dataarray=[JSON valueForKey:@"Data"];
        NSLog(@"Response: %@", [JSON valueForKeyPath:@"Status"]);
        NSString* output = [NSString stringWithFormat:@"response: %@",[JSON valueForKeyPath:@"Status"]];
        int x;
        for (x=0; x<[dataarray count]; x++) {
            NSLog(@"%d : %@",x, [dataarray objectAtIndex:x]);
            [output stringByAppendingFormat:@" %@ ",[dataarray objectAtIndex:x]];
        }

        //NSLog(@"%@", JSON);
        NSLog(@"%@", output);
        self.outPut2.text=output;    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T15:09:04.537

功能

```
 [output stringByAppendingFormat:@" %@ ",[dataarray objectAtIndex:x]]; 
```

返回一个新字符串，而不修改原始字符串，并且您不会将其存储在任何地方。你应该这样：

```
output = [output stringByAppendingFormat:@" %@ ",[dataarray objectAtIndex:x]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T15:10:04.567

您的`output`变量是*不可变* `NSString`的。`-stringByAppendingFormat:`不会将新字符串附加到位，它会返回一个*新*字符串值，该值是两个原始字符串的连接。您需要将该值分配回`output`.

或者，制作`output`一个`NSMutableString`，然后您可以使用`-appendFormat:`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T15:09:50.020

您`output`的变量设置为不可**变**字符串。所以你不能直接向它添加任何内容。您可以使用其内容创建一个新字符串并将其重新分配给自身，但您不能附加新内容。

您应该尝试使用[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html)和[appendFormat](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableString/appendFormat%3a)或[appendString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableString/appendString%3a)

```
 NSMutableString* output = [NSMutableString stringWithFormat:@"response: %@",[JSON valueForKeyPath:@"Status"]];
        int x;
        for (x=0; x<[dataarray count]; x++) {
            NSLog(@"%d : %@",x, [dataarray objectAtIndex:x]);
            [output appendFormat:@" %@ ",[dataarray objectAtIndex:x]];
        } 
```

# wpf - 绑定到 xaml 中的枚举

> ID：12199961
> 
> 赞同：1
> 
> 时间：2012-08-30T15:05:46.867
> 
> 标签：wpf, xaml, enumeration

我有一个我构建的 UserControl，它具有在 xaml 中定义的属性，如下所示：

```
<Repeater:JointScoringGrid x:Name="PIPLeftErosionsRepeater" 
            TabName="PIP" 
            Header="Erosion"
            ControlNamePrefix="Left"
            ScoringType="Erosions"> 
```

然后，在我后面的代码中，我的逻辑以`ScoringType`. 目前，我正在`ScoringType`通过评估有效的字符串（即`ScoringType.ToUpper().Equals("EROSIONS")`）来检查哪个 Grid ，但它并不像我希望的那样干净。我宁愿使用枚举，但使用 xaml 中的名称而不是数值（例如，我想使用类似的东西`ScoringType="Enum.Erosions"`而不是`ScoringType="0"`使 xaml 更具可读性）。这可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:10:02.203

只需将属性的类型更改为枚举类型，它应该会自动将字符串解析为枚举值。（例如作品，只是一个枚举属性）[`HorizontalAlignment`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.horizontalalignment.aspx)`="Stretch"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:15:56.043

将评分类型定义为 Enum 类型的依赖属性。然后你可以在 xaml 中绑定它

ScoringType={x:静态 YourEnumType.Erosions}

# objective-c - mfmailcomposer 切断 html 电子邮件的结尾

> ID：12199963
> 
> 赞同：0
> 
> 时间：2012-08-30T15:05:49.070
> 
> 标签：objective-c, ios, xcode, mfmailcomposer

我创建了一个应用程序内电子邮件功能来询问一个打开 mfmailcomposer 并用 html 内容填充它的问题。不幸的是，它似乎切断了电子邮件的最后一行，因此如下图所示。

![这是一个例子](../Images/56f472acbd17faa15fda5a8e5578f9b5.png)

我已将 mfmailcomposer 设置为 self，按照我能找到的每个教程进行操作，修复它的唯一参考说明如下：

1.  确保您的 mfmailcomposer 设置为 self 即。[自我presentModalViewController：电子邮件动画：是]；
2.  确保它嵌入在导航控制器中

两种解决方案都不起作用。

我发现如果电子邮件内容足够短以至于整个电子邮件都适合屏幕，则问题不会出现，但如果您继续键入以将内容推离边缘，它会重新出现。

关于解决方案的任何想法？还是这是 Apple xcode 的“设计功能”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:09:48.647

我设法解决了这个问题，这似乎是一个错误，这是我能找到的唯一解释。

如果您的内容的开头是标头 ( `<h1>, <h2>, <h3>, etc`) 标记（即使它在 HTML 和 BODY 标记内），则会产生此问题。

如果您想以标题标签开始您的电子邮件正文，那么修复它的最简单方法是在标题标签之前添加一个不间断的分隔符，这似乎完全解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:54:37.267

可能是框架错误。它是否发生在不同版本的iOS上？在旧版和新版操作系统以及其他设备上试用。

您是否 100% 确定视图实际上并不大于其容器视图？探索视图层次结构。也许在纯文本中苹果添加了一些间距，所以看起来内容并没有超出父视图的范围，尽管它是。

滚动指示器的行为如何？它们也被剪掉了吗？

您是否在全屏视图中显示消息编写器？如果您尝试在由选项卡视图控制器的子控制器控制的视图中呈现它，则可能会导致作曲家视图控制器混淆。

对于它的价值，我刚刚测试了生成 HTML 内容的代码，并且没有剪辑。这是在 iPhone 3G 上的 iOS 4.2.1 上，但我也不记得在 iOS 5.1 上看到过这个问题。

* * *

一些技巧。

在调试时，不要忘记：视图控制器实际上只是管理仍然有自己的层次结构的视图。澄清一下，视图控制器可能有一个层次结构，但它们的层次结构不一定对应于视图层次结构。（尽管在几乎所有情况下都应该这样做。）视图本身也是如此：它们有自己的层次结构，但它们仍然只是控制底层的核心动画层，它们有自己的层次结构。

您始终可以访问视图层次结构本身，并通过您自己提出的调试工具更详细地探索它。你不应该做的是过多地干预应该由视图控制器管理的视图层次结构的部分，就像你不应该过多地搞乱应该由视图控制器管理的层层次结构的部分一样意见。

# reporting-services - 请验证此表达式是否正确编写

> ID：12199981
> 
> 赞同：0
> 
> 时间：2012-08-30T15:06:37.873
> 
> 标签：reporting-services

我有以下表达式应该将月份转换为季度。但是，当我运行报告时，只显示第一季度和第四季度。有人可以看看我的表达，看看它是否正确？我以前从未创建过 SSRS 报告或表达式。

```
=IIf(Fields!Month.Value/3 <= 1, 1, IIf(Fields!Month.Value/3 > 1 AND Fields!Month.Value <=2, 2, IIf(Fields!Month.Value > 2 and Fields!Month.Value <= 3, 3, 4))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:44:13.040

假设`Fields!Month.Value`是 4。这给出：

```
=IIf(4/3 <= 1, 1, IIf(4/3 > 1 AND 4 <=2, 2, IIf(4 > 2 and 4 <= 3, 3, 4))) 
```

显然，`4/3 <= 1`是假的，`4/3 > 1 AND 4 <=2`是假的，`4 > 2 and 4 <= 3`是假的，意思是四分之一是4。不正确。

试试这个：

```
int((Fields!Month.Value - 1) / 3) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:32:18.240

你考虑过使用`=DatePart(DateInterval.Quarter, Fields!Month.Value)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:53:55.203

这有效：

```
=IIF((Fields!Month.Value/3)<=1,1,
  (IIF((Fields!Month.Value/3)<=2,2,
      (IIF((Fields!Month.Value/3)<=3,3,4))))) 
```

# ruby - 带有索引/偏移量的Ruby gsub？

> ID：12199983
> 
> 赞同：17
> 
> 时间：2012-08-30T15:06:45.903
> 
> 标签：ruby, regex, string, gsub

Ruby 的[String#gsub](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)方法是否提供了包含替换索引的方法？例如，给定以下字符串：

> 我喜欢你，你，你，还有你。

我想结束这个输出：

> 我喜欢你1、你2、你3和你4。

我知道我可以使用`\1`,`\2`等来匹配括号中的字符，但是有没有类似的东西`\i`可以`\n`提供当前匹配的数量？

值得一提的是，我的实际术语并不像“你”那么简单，因此假设搜索词是静态的替代方法是不够的。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-30T17:58:51.087

我们可以链接`with_index`到`gsub()`：

```
foo = 'I like you, you, you, and you.'.gsub(/\byou\b/).with_index { |m, i| "#{m}#{1+i}" }
puts foo 
```

输出：

```
I like you1, you2, you3, and you4. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:19:17.500

这可行，但很丑：

```
n = 0; 
"I like you, you, you, and you.".gsub("you") { val = "you" + n.to_s; n+=1; val }
=> "I like you0, you1, you2, and you3." 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T15:19:35.990

这有点 hacky，但是您可以使用在传递给 gsub 的块内递增的变量

```
source = 'I like you, you, you, and you.'
counter = 1
result = source.gsub(/you/) do |match|
  res = "#{match}#{counter}"
  counter += 1
  res
end

puts result
#=> I like you1, you2, you3, and you4. 
```

# c - C中的*(a[1])和*(*a+1)有什么区别？

> ID：12199984
> 
> 赞同：3
> 
> 时间：2012-08-30T15:06:48.927
> 
> 标签：c, pointers

当我在 gdb 中调试它们时，它们似乎有所不同。

```
 (gdb) p order[1]
 $16 = (struct order_s *) 0x746440
 (gdb) p *order+1
 $17 = (struct order_s *) 0x746430
 (gdb) p *order
 $18 = (struct order_s *) 0x746420 
```

C中的*a[1]和*(*a+1)有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T15:08:01.483

操作顺序。`a[1]`是一样的`*(a+1)`。所以，`*a[1]`是一样的`*(*(a+1))`。如果你有，`*(*a+1)`那么你实际上是在做`*(a[0]+1)`.

# c# - 以编程方式从 SQL 2012 Reporting Services 导出报表

> ID：12199995
> 
> 赞同：4
> 
> 时间：2012-08-30T15:07:09.773
> 
> 标签：c#, web-services, reporting-services, sql-server-2012

我有一个控制台应用程序，它需要连接到 SQL Server Express 2012 上的 SQL Reporting Services。所有导出逻辑都应该在一个单独的 dll 中实现，并且路径应该是动态的（我循环了各种服务器/报告的各种设置和将它们一一导出到 Excel）。

我尝试遵循这些教程：

[http://www.aspose.com/docs/display/wordsreportingservices/Rendering+Reports+以编程方式](http://www.aspose.com/docs/display/wordsreportingservices/Rendering+Reports+Programmatically)

[http://blogs.msdn.com/b/selvar/archive/2010/12/13/accessing-the-reportexecutionservice-render-method-when-reporting-service-2008-r2-is-in-forms-based-身份验证.aspx](http://blogs.msdn.com/b/selvar/archive/2010/12/13/accessing-the-reportexecutionservice-render-method-when-reporting-service-2008-r2-is-in-forms-based-authentication.aspx)

基本上，我添加了网络参考：

```
http://localhost:80/ReportServer_SQLEXPRESS12/ReportExecution2005.asmx 
```

和

```
http://localhost:80/ReportServer_SQLEXPRESS12/ReportService2010.asmx 
```

到我的 dll。到目前为止看起来不错，除了那些讨厌的 app.config 设置（稍后我将不得不动态调整它们）。

然后我尝试按照示例中的方式进行操作：

```
// Create Web service proxies.
ReportingService2010.ReportingService2010 rs = new ReportingService2010.ReportingService2010();
ReportExecutionService.ReportExecutionService rsExec = new ReportExecutionService.ReportExecutionService(); 
```

并遇到了一些麻烦：

```
Error   76  The type or namespace name 'ReportExecutionService' does not exist in the namespace 'MyDllNamespace.ReportExecutionService' (are you missing an assembly reference?)    

Error   74  The type or namespace name 'ReportingService2010' does not exist in the namespace 'MyDllNamespace.ReportingService2010' (are you missing an assembly reference?) 
```

**现在我下一步该去哪里，如果我什至无法创建代理对象，我该如何使用 Reporting Services API？或者我应该更好地使用 Winforms ReportViewer 中的 ServerReport 类而不是这些 Web 引用？**

甚至微软的一个例子是在控制台应用程序中使用 ReportViewer，但在控制台应用程序中导入 Winforms 似乎有点尴尬。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T15:22:48.603

我希望以下内容会有所帮助（提取代码的相关部分）

```
 using (ZUtilities.SSRS.Report report = new ZUtilities.SSRS.Report {
                ReportServerPath = VParameter.GetValue("SSRS_WebServiceUrl", _repo.Parameters).ToString(),
                Format = rformat,
                ReportPath = "some_path_on_ssrs_server"
            }) {
                report.Params.Add("Id", id.ToString());
                report.Credentials = nwc;
                MemoryStream ms = new MemoryStream();
                report.Render().CopyTo(ms);
                FileContentResult fsr = new FileContentResult(ms.ToArray(), rctype);
                fsr.FileDownloadName = String.Format("EPV-{0}-{1:yyyyMMdd}.{2}", epv.ExternalReference, DateTime.Now, fext);
                ms.Close();
                return fsr;
            } 
```

与以下（小心流管理）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;

namespace ZUtilities.SSRS {
    public enum ReportFormats {
        Html = 1,
        MHtml,
        Pdf,
        Xlsx,
        Docx
    }

    public class ReportFormat {
        static ReportFormat() {
            Html = new ReportFormat { Code = ReportFormats.Html, Instruction = "HTML4.0" };
            MHtml = new ReportFormat { Code = ReportFormats.MHtml, Instruction = "MHTML" };
            Pdf = new ReportFormat { Code = ReportFormats.Pdf, Instruction = "PDF" };
            Xlsx = new ReportFormat { Code = ReportFormats.Xlsx, Instruction = "EXCELOPENXML" };
            Docx = new ReportFormat { Code = ReportFormats.Docx, Instruction = "WORDOPENXML" };
        }

        private ReportFormat() {
        }

        public ReportFormats Code { get; set; }
        public String Instruction { get; set; }

        public static ReportFormat Html { get; private set; }
        public static ReportFormat MHtml { get; private set; }
        public static ReportFormat Pdf { get; private set; }
        public static ReportFormat Xlsx { get; private set; }
        public static ReportFormat Docx { get; private set; }

        public static ReportFormat ByCode(ReportFormats code) {
            switch (code) {
                case ReportFormats.Html: return Html;
                case ReportFormats.MHtml: return Html; //<<======================
                case ReportFormats.Pdf: return Pdf;
                case ReportFormats.Xlsx: return Xlsx;
                case ReportFormats.Docx: return Docx;
                default : return null;
            }
        }
    }

    public class Report : IDisposable {
        private HttpWebRequest _httpWReq;
        private WebResponse _httpWResp;

        public Report() {
            _httpWReq = null;
            _httpWResp = null;
            Format = ReportFormats.Html;
            Params = new Dictionary<String, String>();
        }

        public Dictionary<String, String> Params { get; set; }

        public String ReportServerPath { get; set; }
        public String ReportPath { get; set; }
        public ReportFormats Format { get; set; }
        public NetworkCredential Credentials { get; set; }

        //public String PostData { get { return String.Format("rs:Command=Render&rs:Format={0}", ReportFormat.ByCode(Format).Instruction); } }
        public String PostData { get {
            StringBuilder sb = new StringBuilder(1024);
            sb.AppendFormat("rs:Command=Render&rs:Format={0}", ReportFormat.ByCode(Format).Instruction);
            if (Format == ReportFormats.Html) {
                sb.Append("&rc:Toolbar=false");
            }
            foreach (var kv in Params) {
                sb.AppendFormat("&{0}={1}", kv.Key, kv.Value);
            }

            return sb.ToString();
        } }

        public String ReportFullPath { get { return ReportServerPath + "?/" +  ReportPath; } }

        public Stream Render() {
            _httpWReq = (HttpWebRequest)HttpWebRequest.Create(ReportFullPath);
            _httpWReq.Method = "POST";
            if (Credentials != null)
                _httpWReq.Credentials = Credentials;

            byte[] byteArray = Encoding.UTF8.GetBytes(PostData);
            _httpWReq.ContentType = "application/x-www-form-urlencoded";
            _httpWReq.ContentLength = byteArray.Length;
            Stream dataStream = _httpWReq.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            if (_httpWResp != null )
                _httpWResp.Close();
                            _httpWResp = _httpWReq.GetResponse();               

            return _httpWResp.GetResponseStream();
        }

        public void RenderTo(String fileName) {            
            Stream receiveStream = Render();
            Stream ds = File.Open(fileName, FileMode.Create);
            receiveStream.CopyTo(ds);
            ds.Close();
            receiveStream.Close();            
        }

        public void Dispose() {
            if (_httpWResp != null) {
                _httpWResp.Close();
                _httpWResp = null;
            }

            if (_httpWReq != null) {
                _httpWReq = null;
            }
        }
    }
} 
```

# java - 使用 Java 的 MQ 类运行简单 jar 时出错

> ID：12199996
> 
> 赞同：3
> 
> 时间：2012-08-30T15:07:10.677
> 
> 标签：java, windows, eclipse, jar, ibm-mq

我是`Websphere MQ classes for Java`编程的初学者。
我决定按照这种方式编写一个小型应用程序，该应用程序能够通过 TCP/IP 连接和读取队列中的消息。

遵循本指南： http: [//publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp ?topic=%2Fcom.ibm.mq.csqzaw.doc%2Fja10410_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=%2Fcom.ibm.mq.csqzaw.doc%2Fja10410_.htm)

在第 4 点，建议`Websphere Client`在 windows 命令提示符下测试安装（版本：7.0.1.8），使用：
`java -Djava.library.path=library_path MQIVP`
where 'library_path' for me is "C:\Program Files\IBM\WebSphere MQ\java\lib"

应用程序运行，我开始编写一个简单的程序，`Eclipse IDE`代码如下：

```
import com.ibm.mq.MQEnvironment;

public class MQtestMain {

    public static void main(String[] args) {

        System.out.println("main");

        new MQtestMain();
    }

    public MQtestMain(){

        System.out.println("MQtestMain");

        MQEnvironment.hostname = "my.host.name";
        MQEnvironment.channel = "my.channel";
        MQEnvironment.port = 1414;

    }

} 
```

它没有任何关系，但它只是一个测试，以确保一切都正确设置。

我已经从“C:\Program Files\IBM\WebSphere MQ\java\lib”中设置了一个包含“com.ibm.mq.jar”和“com.ibm.mq.jmqi.jar”的自定义库，并且没有错误在编译时报告。

从中正确运行应用程序`Eclipse`会在控制台上打印出“main”和“MQtestMain”。

因此，我已着手将其导出：文件 > 导出 > 可运行 Jar
将“库处理”设置为“将所需库打包到生成的 JAR 中”

不幸的是，如果我从 Windows 命令提示符运行程序：`java -jar MQtest.jar` 结果如下：

```
main
MQtestMain
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoa
der.java:58)
Caused by: java.lang.NoClassDefFoundError: javax/resource/ResourceException
        at com.ibm.mq.MQEnvironment.<clinit>(MQEnvironment.java:576)
        at MQtestMain.<init>(MQtestMain.java:21)
        at MQtestMain.main(MQtestMain.java:14)
        ... 5 more
Caused by: java.lang.ClassNotFoundException: javax.resource.ResourceException
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 8 more 
```

第一行和第二行是正确的，但我真的不明白以下错误

* * *

**更新：**

我尝试为您提供更多信息：
正如我所说，从其主`class`文件运行应用程序没有问题，而从`jar`文件执行它似乎无法找到 IBM 库。
我创建了一个`eclipse`名为“MQ classes for Java”的个人库，包含此应用程序使用的两个 jar 包。
这里是项目`.classpath`文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7"/>
    <classpathentry kind="con" path="org.eclipse.jdt.USER_LIBRARY/MQ classes for Java"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

有没有办法将正确的库链接到可运行的 jar，以便从安装了 WMQ 客户端的每台机器上启动它？

* * *

**解决方案：**

由于未找到某些依赖项，错误已得到解决，包括将**所有**`IBM classes for Java` `jar`文件放入`WMQ Client`文件夹安装（“C:\Program Files\IBM\WebSphere MQ\java\lib”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-11T22:26:19.437

我通过添加 javax 依赖项解决了这个问题：

```
<dependency>
    <groupId>javax.resource</groupId>
    <artifactId>connector-api</artifactId>
    <version>1.5</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T18:07:40.917

您需要像 MQIVP 测试那样使用 java.library.path 或设置 CLASSPATH 以包含 MQ JAR 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T06:09:29.320

**解决方案：**

这些错误是由于未找到某些依赖项造成的；
它们可以解决，包括将**所有**`IBM classes for Java` `jar`文件放入`WMQ Client`文件夹安装（“C:\Program Files\IBM\WebSphere MQ\java\lib”）

# javascript - 如何打印 AJAX 数据？

> ID：12199997
> 
> 赞同：-1
> 
> 时间：2012-08-30T15:07:23.377
> 
> 标签：javascript

感谢 stackoverflow 的人，他们帮助我实现了使用 Ajax 的功能，但现在我遇到了另一个问题。下面是代码：

```
if(isset($_POST['site'])){
if($_POST['site'] == NULL)
{
echo "Field cannot be empty";
return;
}

//here we check site validation on server side 
if (!preg_match("~^(?:(?:https?|ftp|telnet)://(?:[a-z0-9_-]{1,32}".
"(?::[a-z0-9_-]{1,32})?@)?)?(?:(?:[a-z0-9-]{1,128}\.)+(?:com|net|".
"org|mil|edu|arpa|gov|biz|info|aero|inc|name|[a-z]{2})|(?!0)(?:(?".
"!0[^.]|255)[0-9]{1,3}\.){3}(?!0|255)[0-9]{1,3})(?:/[a-z0-9.,_@%&".
"?+=\~/-]*)?(?:#[^ '\"&<>]*)?$~i", $_POST['site']))
{
echo "<br/>";
echo "<div id='err'>Oooops!!! Wrong site name</div>";
return;
} 

$homepage = file_get_contents("http://".$_POST['site']);
preg_match('%<meta.*name="keywords".*content="(.*)"\s+/>%U', $homepage, $regs);

if(count($regs))
 {
$myString = implode( '', $regs );  
 echo "<br/>";
 echo "<div id='test'>Keywords:</div>";
 print_r( "<div id='test2'>$myString</div>");
}
else
{
echo "<br/>";
echo "<div id='test'>There is no keywords</div>";
}
}

?>
<html>

<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>    
<script type="text/javascript">
$(document).ready(function(){
     $('#payment').submit(function(e){
        e.preventDefault();
        var x = $('input[name=site]').val();

       $.ajax({
             type: "POST",
            url: 'test.php',
            //data: $(this).serialize(),
            data: x,
            datatype: 'json',
            success: function(data)
            {
                 $('#metaTags').text(data)
            },
             error:   function(xhr, ajaxOptions, thrownError) { alert(xhr.status);} 

        });
    });
});
</script>

</head>     

<div>
<form id="payment"    method="post" name="forma1">
    <label for=name>ENTER www.bbc.com:</label>
    <input id="name" type=text placeholder="Write here..."         name="site">
    <input type="submit" value="START" name="searchbutton" id="sb">
</form>

<div id="metaTags"></div>

</div>  

</html> 
```

一切正常，但您可以在此处看到输出： [http](http://tsite.500mb.net/test.php) ://tsite.500mb.net/test.php 用于测试类型，例如：www.bbc.com，您将看到输出结果我需要 otput 将只有元标记，没有源代码。怎么做？我尝试了下一个想法：

```
var x = $('input[name=site]').val();
 $.ajax({
             type: "POST",
            url: 'test.php',
    data: x, 
```

其中 data = x 和 x - 来自输入文本框的值，但它没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:50:10.293

您可以使用[get_meta_tags()](http://php.net/manual/en/function.get-meta-tags.php)函数，这是一个快速而肮脏的示例，您可以进一步了解。

### php

```
<?

if (isset($_POST['site'])) {

    if (empty($_POST['site'])) {

        echo "<div>Field cannot be empty</div>";

    } else {

        //here we check site validation on server side
        if (!preg_match("~^(?:(?:https?|ftp|telnet)://(?:[a-z0-9_-]{1,32}" .
                "(?::[a-z0-9_-]{1,32})?@)?)?(?:(?:[a-z0-9-]{1,128}\.)+(?:com|net|" .
                "org|mil|edu|arpa|gov|biz|info|aero|inc|name|[a-z]{2})|(?!0)(?:(?" .
                "!0[^.]|255)[0-9]{1,3}\.){3}(?!0|255)[0-9]{1,3})(?:/[a-z0-9.,_@%&" .
                "?+=\~/-]*)?(?:#[^ '\"&<>]*)?$~i", $_POST['site'])) {

            echo "<div id='err'>Oooops!!! Wrong site name</div>";
        }

        $metatags = get_meta_tags("http://" . $_POST['site']);

        /* List all meta tags
        echo "<pre>".print_r($metatags, true)."</pre>";
        */

        if (count($metatags)) {
            foreach ($metatags as $tag => $value) {
                echo "<div class=\"result\"><strong>$tag:</strong> $value</div>";
            }
        } else {
            echo "<div id='test'>There is no keywords</div>";
        }
    }

    return;
}

?> 
```

### html

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#payment').submit(function(e) {
                e.preventDefault();
                var x = $('input[name=site]').val();

                $.ajax({
                    type: "POST",
                    url: 'test.php',
                    data: {site: x},
                    success: function(response) {
                        $('#metaTags').html(response)
                    },
                    error:   function(xhr, ajaxOptions, thrownError) {
                        alert(xhr.status);
                    }
                });
            });
        });
    </script>

    <style>
        .result {
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
    <div>
        <form id="payment" method="post" name="forma1">
            <label for="name">ENTER www.bbc.com:</label>
            <input id="name" type=text placeholder="Write here..." name="site">
            <input type="submit" value="START" name="searchbutton" id="sb">
        </form>

        <div id="metaTags"></div>
    </div>
</body>
</html> 
```

希望能帮助到你。

# python - Windows上的python + gtk3？

> ID：12199998
> 
> 赞同：4
> 
> 时间：2012-08-30T15:07:31.410
> 
> 标签：python, windows, terminal, wxwidgets, gtk3

我正在尝试将一个小应用程序移植到 Windows（我最初是为 ubuntu 制作的），它是用 python + gtk3 编写的......我知道 gtk3 很难让它在 Windows 上运行（即使在 C++ 上），但它是有可能使用 Python 在 Windows 上工作吗？

我不想在另一个工具包上重新编写它，如果是这样，它可能是`wxWidgets`，因为我在上面使用嵌入式终端（`Vte.Terminal()`），IIRC 也是 gtk3 的一部分。

如果不可能，有没有办法`wxPython`在 Windows 中制作终端小部件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T01:48:24.300

Id 看起来您还不能在 Windows 上使用 gtk3，尽管在这一点上看起来这种开发非常活跃[link](http://blogs.gnome.org/alexl/2011/11/25/gtk-work-on-windows/)。您可能还想查看[这篇文章](https://stackoverflow.com/questions/6006689/where-can-i-download-precompiled-gtk-3-binaries-or-windows-installer)，因为它可能对您的 gtk3 问题有所帮助。在回答您是否可以在 wxPython 中创建终端的问题时，您需要查找[此项目](http://www.sivachandran.in/2008/04/termemulator-10-released.html)并查看[此堆栈溢出问题](https://stackoverflow.com/questions/989129/wxpython-how-to-create-a-bash-shell-window)。[此外，这里](http://www.python-forum.org/pythonforum/viewtopic.php?f=4&t=24036)提出了一个与您的声音非常相似的问题。如果这没有帮助，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T21:21:40.527

Gtk3 在 Windows 上运行良好，有一个来自法国网站的非官方 .exe：[http ://www.tarnyko.net](http://www.tarnyko.net)

我现在正在 windows 上使用 gtk3 进行开发，我使用的是 gtk 3.6.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-22T20:11:13.517

我认为，最好的方法是使用 msys2 安装 python 和 gtk3。首先安装 msys2 并使用 msys2 安装 python 和 gtk3。在 Google 上搜索“如何将 python gobject 安装到 msys2”