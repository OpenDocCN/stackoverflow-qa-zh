# StackOverflow 问答 11459000-11459999

# java - 在我的 linux 机器中找不到 javadoc

> ID：11459007
> 
> 赞同：3
> 
> 时间：2012-07-12T19:15:03.693
> 
> 标签：java, linux, jvm, javadoc

我在 ubuntu 12.04 上运行，当我输入终端时，`java -version`我收到了这条消息：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

但尽管如此，如果我输入终端，`javadoc`我会收到一条消息，因为它没有安装在我的机器中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T19:16:56.877

Java 运行时环境 (JRE) 不包括 `javadoc`. 它仅包括*运行*Java 程序所需的东西，而不是开发它们所需的东西。

`javadoc`除了 JRE 中的所有内容外，您还需要 JDK（Java 开发工具包），其中包括开发人员工具，如.

请参阅 Ubuntu Java[文档](https://help.ubuntu.com/community/Java)。

# c# - 查询的 Linq-To-Sql 优化

> ID：11459015
> 
> 赞同：2
> 
> 时间：2012-07-12T19:15:46.617
> 
> 标签：c#, performance, linq-to-sql

我正在构建一个 Web 应用程序，该应用程序在其`SQL`数据库中搜索用户输入的查询。一个简单的搜索引擎。
让我们提议我有很多行 - 超过几千行。我想让通话更有效率。
我知道我的电话只需一个*`SQL`查询即可。我想知道是否`Linq-To-Sql`有这种优化。
我知道它`Lazy`用于查询。我现在无法对其进行基准测试，因为我的数据库中没有足够的数据。

```
 foreach(var word in words)
    {
        var niqquh = number == 666 ? "" : Languages[number];
        var S = db.Uploads.Where(w => number == 666 ? true : (w.Language == niqquh));
        if(S.Count() > 20)
            S = S.Take(20);
        S = S.OrderBy(u => (u.Tags.Contains(word) ? 15 : 0) + (u.Name.Contains(word) ? 10 : 0) + (u.Description.Contains(word) ? 5 : 0));
        listOfList.Add(S.ToList());
    } 
```

正如你在这里看到的，我有一个“幻数” `666`，用来表示“任何语言都可以”。
然后，我只想取前 20 个元素，所以我调用`Count()`then `Take`。
然后，我根据我的需要对结果进行排序。关键是
，我*认为*`lazy`表达式被评估`Count`- 因此它不能被优化为*只*包含该级别的前 20 行`SQL Query`- 但在客户端的 (ASP.NET) 级别。因此，我基本上将整个数据库下载到客户端，这很糟糕。

**它是否得到优化，如果没有，我怎样才能以有效的方式做到这一点，即使我必须回到纯`SQL`字符串语句？**

*每个查询`word`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:19:05.113

你是对的，它需要执行语句来获取计数。但是，您不需要检查计数。所以，改变

```
if(S.Count() > 20)             
    S = S.Take(20); 
```

至

```
S = S.Take(20); 
```

可以这样重写：

```
foreach(var word in words)
{
    var niqquh = number == 666 ? "" : Languages[number];
    var S = db.Uploads.Where(w => number == 666 || w.Language == niqquh)
        .Take(20)
        .OrderBy(u => (u.Tags.Contains(word) ? 15 : 0) + (u.Name.Contains(word) ? 10 : 0) + (u.Description.Contains(word) ? 5 : 0));
    listOfList.Add(S.ToList());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:26:51.040

```
if(S.Count() > 20) 
```

这会运行一个查询，是的...

```
SELECT COUNT(*) FROM 
```

所以你没有下载整个表。

* * *

```
S = S.Take(20); 
```

这不会执行查询。它确实将（无序的）查询限制为 20 个项目。通常，您希望在限制结果之前应用订单。

如果您采取的措施不止于此，也不例外。你只会得到更少的物品。因此，不需要 Count。

* * *

```
S.ToList(); 
```

这会运行一个查询。

* * *

```
IQueryable<Upload> query = db.Uploads;
if (number != 666)
{
   var niqquh = Languages[number];
   query = query.Where(w => w.Language == niqquh);
}
query = query
  .OrderBy(u => (u.Tags.Contains(word) ? 15 : 0) + (u.Name.Contains(word) ? 10 : 0) + (u.Description.Contains(word) ? 5 : 0))
  .Take(20);
listOfList.Add(query.ToList()); 
```

# mysql - php删除脚本

> ID：11459021
> 
> 赞同：1
> 
> 时间：2012-07-12T19:16:15.393
> 
> 标签：mysql, sql, database

我在 sql 数据库中有一个字段，称为`time_stamp`将记录添加到数据库时的时间戳。我有另一个名为“TTL”的字段，其中将存储 1、2 或 3（该字段中的每个数字代表一天）。我可以有一个 php 脚本，其中记录的删除由“TTL”字段确定吗？

例如，今天中午添加了一条记录，“TTL”为 2，我可以有一个脚本在两天后的中午删除同一条记录吗？

执行此操作的最佳方法是什么，我真的需要这两个字段来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:21:54.190

运行此脚本的最佳方法是将其附加到`cron`并使其在给定的时间间隔内运行。

然后，为了对记录删除进行编程，您需要运行以下查询：

`DELETE FROM records WHERE UNIX_TIMESTAMP(time_stamp) + TTL * 86400 <= CURRENT_TIMESTAMP()`

`time_stamp`是您的创纪录价值 - 假设它等于 1000000。86400 是一天中的秒数。是您希望删除文件`TTL`之后的天数。`time_stamp`所以如果`TTL`是 2 并且 1000000 是 7 月 10 日的时间戳，我们基本上是在比较：

1000000 + 86400 * 2 <= CURRENT_TIMESTAMP

现在，假设今天是 7 月 12 日。这意味着它是 7 月 10 日之后的 2 天（86400 * 2 秒）。因此，

```
CURRENT_TIMESTAMP = July 10th timestamp + 2 days worth of seconds
                  = 1000000 + 86400 * 2 
```

这意味着`CURRENT_TIMESTAMP >= 1000000 + 86400 * 2`在 7 月 12 日期间和之后的所有时间点，因此删除了记录。

这将在您的服务器运行时每天为您删除记录。享受和好运！

# php - MySQL字符编码的最后一口气，奇怪的字符

> ID：11459023
> 
> 赞同：1
> 
> 时间：2012-07-12T19:16:26.740
> 
> 标签：php, mysql, character-encoding

当我在 phpMyAdmin 中查看一个带有“ø”的单词时，我正确地看到了“ø”，但是当我被传递到我的 html 页面时，我看到了“Ã¸”。

我已经尝试了我可以在 stackoverflow 和其他任何地方找到的所有建议（并阅读文章“每个开发人员必须知道的最低限度......”，但我似乎无法弄清楚（下面列出）。什么是我失踪了？

mysql：

```
mysql_query("SET character_set_results = 'utf8'");
mysql_query("SET character_set_client = 'utf8'");
mysql_query("SET character_set_connection = 'utf8'");
mysql_query("SET character_set_database = 'utf8'");
mysql_query("SET character_set_server = 'utf8'");
mysql_query("SET NAMES UTF8"); 
```

.htaccess

```
AddDefaultCharset UTF-8 
```

PHP：

```
declare(encoding='UTF-8');
ini_set('default_charset', 'utf-8');
header('Content-Type: text/html; charset=utf-8');
header('Accept-Charset: utf-8');
header('Accept: text/html');

mb_language('uni');
mb_internal_encoding('UTF-8');

iconv_set_encoding("input_encoding", "utf-8");
iconv_set_encoding("internal_encoding", "utf-8");
iconv_set_encoding("output_encoding", "utf-8"); 
```

HTML

```
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"> 
```

当我在 Firefox 中显示页面信息时，它说编码是 utf-8。我所有的脚本都是用 utf-8 编码的页面编写的。

是什么赋予了？我想不出还有什么可做的。我可以运行一些测试吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:22:22.317

当我遇到类似问题时，只有将 MySQL 数据库设置为 UTF-16 才有帮助。也许它对你的情况也有帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:32:19.383

发现了我的问题。在显示之前，我在字符串上调用了 html_entities。我是个白痴。谢谢你的帮助。现在显示很好。

# c++ - 问题将项目移动到 Visual Studio 2012

> ID：11459029
> 
> 赞同：4
> 
> 时间：2012-07-12T19:16:47.270
> 
> 标签：c++, directx, linker-errors, visual-studio-2012

我刚刚转移到 Visual Studio 2012 RC 进行测试。但我无法让我的 DirectX 11 游戏项目使用它。当我构建时，我收到 1152 条警告，它们看起来像这样：

```
1>e:\program files (x86)\microsoft directx sdk (june 2010)\include\dwrite.h(4972): warning C4005: 'DWRITE_E_NOFONT' : macro redefinition
1>          c:\program files (x86)\windows kits\8.0\include\shared\winerror.h(50217) : see previous definition of 'DWRITE_E_NOFONT' 
```

它们来自所有 DirectX 标头，每个标头用于不同的宏。我还得到了一些以前没有得到的未解析的外部符号：

```
1>base.obj : error LNK2019: unresolved external symbol "void __cdecl operator delete(void *,int,char const *,int)" (??3@YAXPAXHPBDH@Z) referenced in function __unwindfunclet$??__EgGame@@YAXXZ$0
1>game.obj : error LNK2001: unresolved external symbol "void __cdecl operator delete(void *,int,char const *,int)" (??3@YAXPAXHPBDH@Z)
1>world.obj : error LNK2001: unresolved external symbol "void __cdecl operator delete(void *,int,char const *,int)" (??3@YAXPAXHPBDH@Z) 
```

我认为唯一`delete`会超载的地方是`#include <crtdbg.h>`我在我的项目中使用的。但问题是，这一切都在 Visual Studio 2010 中运行。

不确定是什么问题。转换项目时我是否遗漏了任何步骤？

我还应该提到我的计算机以前崩溃了（我只丢失了 Windows 和注册表），所以我不得不重新安装我的大部分程序。我不知道这是否会发挥作用，但自崩溃以来我还没有在 VS2010 上编译该项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:41:46.127

您需要使用 VS2012 重新编译所有库才能解决此问题。这是 VS2012 中包含的新 C 运行时库的问题。

# c# - 需要帮助进行代码分析 Lucene.Net 搜索结果 asp.net

> ID：11459031
> 
> 赞同：1
> 
> 时间：2012-07-12T19:16:53.697
> 
> 标签：c#, lucene.net

我正在寻找使用 lucene.net 搜索索引的好代码。我看起来很有希望，但我有些困惑。如果可能的话，任何熟悉 lucene.net 的人请查看代码并告诉我为什么该人以这种方式构建该代码。

从我得到代码的地方......网址如下 [http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms](http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms)

## 这是代码

```
private static IEnumerable<SampleData> _search
(string searchQuery, string searchField = "") {
// validation
if (string.IsNullOrEmpty(searchQuery.Replace("*", "").Replace("?", ""))) return new List<SampleData>();

// set up lucene searcher
using (var searcher = new IndexSearcher(_directory, false)) {
    var hits_limit = 1000;
    var analyzer = new StandardAnalyzer(Version.LUCENE_29);

    // search by single field
    if (!string.IsNullOrEmpty(searchField)) {
        var parser = new QueryParser(Version.LUCENE_29, searchField, analyzer);
        var query = parseQuery(searchQuery, parser);
        var hits = searcher.Search(query, hits_limit).ScoreDocs;
        var results = _mapLuceneSearchResultsToDataList(hits, searcher);
        analyzer.Close();
        searcher.Close();
        searcher.Dispose();
        return results;
    }
    // search by multiple fields (ordered by RELEVANCE)
    else {
        var parser = new MultiFieldQueryParser
            (Version.LUCENE_29, new[] { "Id", "Name", "Description" }, analyzer);
        var query = parseQuery(searchQuery, parser);
        var hits = searcher.Search
        (query, null, hits_limit, Sort.RELEVANCE).ScoreDocs;
        var results = _mapLuceneSearchResultsToDataList(hits, searcher);
        analyzer.Close();
        searcher.Close(); 
        searcher.Dispose();
        return results;
    }
}
} 
```

## 对于上述例程，我有几个问题

```
1) why the developer of this code replace all * & ? to empty string in search term
2) why search once with QueryParser and again by MultiFieldQueryParser
3) how developer detect that search term has one word or many words separated by space.
4) how wild card search can be done using this code....where to change in code for handling wild card.

5) how to handle search for similar word like if anyone search with helo then hello related result should come.

var hits = searcher.Search(query, 1000).ScoreDocs;

6) when my search result will return 5000 record and then if i limit like 1000 then how could i      show next 4000 in pagination fashion.what is the object for giving the limit...i think for    fastness but if i specify limit the how can i show other results....what would be the logic 
```

如果有人讨论我的所有观点，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:52:05.990

> 1）为什么此代码的开发人员替换所有 * & ？在搜索词中清空字符串

因为这些是通配符搜索的特殊字符。作者所做的 - 他检查搜索查询是否有其他内容以及通配符。例如，您通常不想搜索“*”。

> 2) 为什么用 QueryParser 搜索一次，然后用 MultiFieldQueryParser 再搜索一次

他本身不使用 QueryParsers 进行搜索，但他正在解析搜索查询（字符串）并从中生成一堆对象。然后这些对象被`Searcher`执行实际搜索的对象消耗。

> 3) 开发者如何检测搜索词有一个或多个以空格分隔的词。

这是 Parser 对象应该关心的事情，而不是开发人员。

> 4）如何使用此代码完成通配符搜索......在哪里更改处理通配符的代码。

通配符在`searchQuery`参数中指定。例如，指定“test*”将被视为通配符。详情在[这里](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html)。

> 5）如何处理类似词的搜索，比如如果有人用 helo 搜索，那么应该会出现 hello 相关的结果。

我想你想要一个[模糊](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Fuzzy%20Searches)搜索。

> 6）当我的搜索结果将返回 5000 条记录，然后如果我限制为 1000，那么我如何以分页方式显示下一个 4000。给出限制的对象是什么...我认为是为了
> 快速但如果我指定限制如何我可以显示其他结果吗....逻辑是什么

这是[一篇](http://hrycan.com/2010/02/10/paginating-lucene-search-results/)关于此的文章。

UPD：关于多个字段。逻辑如下：

*   如果`searchField`指定，则使用简单的解析器，这将产生类似`searchField: value1 seachField: value2... etc`.
*   但是，如果该参数不存在，则它假定传递的`searchQuery`将指定字段和值，例如`"field1: value1 field2: value2"`. 正如我之前提到的，示例位于相同的语法[页面上。](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Fields)

UPD2：不要犹豫，寻找 Lucene 的 Java 文档和示例，因为这最初是一个 Java 项目（因此，有很多 Java 示例和教程）。Lucene.NET 是一个移植项目，两个项目共享许多功能和类。

UPD3：关于模糊搜索，您可能还想实现自己[的同义词](http://www.codeproject.com/Articles/32201/Lucene-Net-Custom-Synonym-Analyzer)搜索分析器（我们在我从事的一个商业项目中使用了该技术，以处理常见的拼写错误和同义词）。

# git - 有没有办法检查两个不同的 git 提交的内容是否相等？

> ID：11459040
> 
> 赞同：11
> 
> 时间：2012-07-12T19:17:38.047
> 
> 标签：git

我知道 git 会跟踪内容并部分基于内容生成 sha。但是，sha 也基于父提交。当我 rebase 一个分支时，因为我的提交现在有不同的祖先，我所有的提交都有不同的 shas。

但我想知道的是，有没有办法比较两个提交（或提交范围）以查看内容是否相同？这也应该能够判断二进制更改是否也相同。

我在想是否有某种方法可以在不包含祖先信息的情况下获取内容的 sha，那可能会做到。

感谢您的任何帮助，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T20:41:43.770

您希望 git log 的 --cherry-mark 选项在补丁内容相同时用等号标记提交。

```
git log --decorate --graph --oneline --cherry-mark --boundary A...B 
```

是将重新定位的分支 B 与原始分支 A 进行比较的好方法。我用它来检查我使用 git-tfs 所做的提交是否在 TFS 出现后仍然正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-29T21:12:14.517

[https://stackoverflow.com/a/23527631/2630028](https://stackoverflow.com/a/23527631/2630028)

`diff <(git show 123456) <(git show abcdef)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:20:02.647

提交标头包含树对象的 sha，即文件系统内容（内容 + 结构）。写一个脚本来比较它们不会太难。

Blob 也有 ID，因此如果您只查看一两个文件，则可以比较它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T17:24:20.320

@solstice333 的回答解决了问题背后的问题，但输出仍然需要大量解析。如果您想在 rebase 后快速确认相似性，那么该解决方案的扩展应该有助于减少*大部分*混乱。

## 解决方案

```
hash1=123456 \
hash2=098765 \
sed_command='/^\(diff\|index\|@@\).*$/ d' \
diff <(git show --oneline -U0 $hash1 | sed "$sed_command") <(git show --oneline -U0 $hash2 | sed "$sed_command") 
```

（如果你不使用 bash，你可以只使用底线并替换变量）

## 打破它

此命令查找每次提交的更改，清理输出，并查找输出中的差异。输出通过以下方式修剪：

*   `--one-line`- 简化提交消息输出
*   `-U0`- 仅显示更改的行/删除所有周围的行；的简写`--unified=0`；
*   `sed`- 使用此命令，我们通过删除任何以基于正则表达式 ( `/^\(diff\|index\|@@\).*$/`) 的特定字符开头的行来减少输出中的混乱。这里的一些条件可以删除以获得更好的特异性，但由于 rebase 差异的性质，通常无关紧要。

我想您也可以扩展它以`git diff`代替内部`git show`命令，以封装提交范围内的所有更改。

# xml - XSLT：基于子节点的属性排序

> ID：11459042
> 
> 赞同：1
> 
> 时间：2012-07-12T19:17:38.470
> 
> 标签：xml, xslt

我想根据孩子的 name 属性对父节点进行排序。

XML 未排序：

```
<grand-parent>
  <parent>
    <child name="c"/>
    <child_next name="a"/>
  </parent>
  <parent>
    <child name="a"/>
    <child_next name="a"/>
  </parent>
  <parent>
    <child name="b"/>
    <child_next name="a"/>
  </parent>
</grand-parent> 
```

预期输出：

```
<grand-parent>
  <parent>
    <child name="a"/>
    <child_next name="a"/>
  </parent>
  <parent>
    <child name="b"/>
    <child_next name="a"/>
  </parent>
  <parent>
    <child name="c"/>
    <child_next name="a"/>
  </parent>
</grand-parent> 
```

XSLT 使用中（不工作 - 返回与输入相同的 XML）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output omit-xml-declaration="yes" indent="yes" method="xml" encoding="UTF-8"/>
  <xsl:strip-space  elements="*"/>
  <xsl:template match="node()|@*" name="identity">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*">
        <xsl:sort select="/grand-parent/parent/child/@name" order="descending" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>  
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:22:42.703

我会从身份转换中排除：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="grand-parent">
        <xsl:copy>
            <xsl:apply-templates select="parent|@*">
                <xsl:sort select="child/@name" data-type="text"/>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<grand-parent>
   <parent>
      <child name="a"/>
      <child_next name="a"/>
   </parent>
   <parent>
      <child name="b"/>
      <child_next name="a"/>
   </parent>
   <parent>
      <child name="c"/>
      <child_next name="a"/>
   </parent>
</grand-parent> 
```

# arrays - 在 Powershell 中，如何将对象数组的一个属性连接成一个字符串？

> ID：11459044
> 
> 赞同：17
> 
> 时间：2012-07-12T19:17:43.787
> 
> 标签：arrays, string, powershell, join

例如，我在 c:\z 中有 3 个文件

```
PS C:\z> dir | select name

Name
----
a.png
b.png
c.png 
```

我想要的是一个字符串。

> a.png,b.png,c.png

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-12T19:22:55.050

如果你想要一个字符串数组，你所要做的就是：

```
dir | select -expand name 
```

如果您希望将其作为单个字符串，并以逗号分隔值：

```
(dir | select -expand name) -join "," 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T08:59:52.850

只是一个小改进，您只能使用名称开关来获取名称：

```
(dir -name) -join ',' 
```

# ruby-on-rails - Ruby 循环遍历对象的某些属性

> ID：11459047
> 
> 赞同：0
> 
> 时间：2012-07-12T19:18:02.553
> 
> 标签：ruby-on-rails, ruby, attributes, metaprogramming

在 Rails 中，我有一个类名`User`，我只想看看`:name, :address, :age`

我想写一段类似的代码：

```
user = User.new
[name, address, age].zip(["Name", "Address", 10]).each do |attribute, val|
  user.attribute = val
end 
```

问题是我不知道如何正确地做到这一点，因为`user.attribute`显然不是一条有效的线路。换句话说，无论如何，它`user.attribute`被评估为`user.name`, `user.address`,`user.age`取决于循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:20:16.580

你应该使用`send`方法

```
user.send "#{attribute}=", val 
```

如果属性是，比如说，，`:name`那么上面的行等价于

```
user.name = val 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:20:14.847

其实我可以这样做：

```
[name, address, age].zip(["Name", "Address", 10]).each do |attribute, val|
    user[attribute] = val
end 
```

这种方式也行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:21:43.147

`user.send(:name)`将与 call 相同`user.name`，因此您可能想尝试一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T20:12:07.367

```
user = User.new
[name, address, age].zip(["Name", "Address", 10]).each do |attribute, val|
  user.write_attribute(attribute, val)
end 
```

但这就是我要写的：

```
user = User.new
user.attributes = {name => "Name", address => "Address", age => 10} 
```

# git - 查看 git 日志

> ID：11459050
> 
> 赞同：0
> 
> 时间：2012-07-12T19:18:08.997
> 
> 标签：git

我可以`git log --pretty='format:%ci::%an <%ae>::%s::%H!!!' --since=1/1/1900`在克隆的存储库上运行。是否可以在不必先克隆存储库的情况下获得相同的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:27:59.073

我认为这是不可能的。您可以执行 git ls-remote 来列出文件。但是没有等效的查看日志。

如果 git 项目有 Web 界面，您可能可以通过 Web 界面浏览它。

一个类似的线程是[here](http://git.661346.n2.nabble.com/View-remote-logs-td1331881.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:23:04.130

您应该能够在任何 git repo 上执行该操作。不，您不必先克隆存储库，但必须拥有一个。通过初始化或分叉。

我想你问你是否可以远程查看日志。但是，目前不支持此功能。 [Git 远程日志和更改请求](https://stackoverflow.com/questions/4288598/git-remote-log-and-changes-request)

# css - Firefox -moz-placeholder，不工作

> ID：11459051
> 
> 赞同：1
> 
> 时间：2012-07-12T19:18:11.777
> 
> 标签：css, html, firefox

我无法让这个占位符在 Firefox 13.0.1 中正确设置样式

我有一个带占位符的输入字段：

```
<input class="textFieldLarge" placeholder="Username" id="username" name="username" type="text" /> 
```

我有这个 CSS：

```
.textFieldLarge{
    width:400px;
    height:50px;
    line-height:50px;
    padding-left:5px;
    padding-right:5px;

    background:none;
    background-color:#FFF;
    border:solid 1px #BBB;

    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    color:#333;
}

.textFieldLarge::-webkit-input-placeholder, .textFieldLarge:-moz-placeholder{
    font-style:italic;
    color:#BBB;
} 
```

这应该设置文本字段#333 和占位符#BBB 斜体的样式。我可以使用 chrome 和 IE，但无法弄清楚 FF。

**编辑，发现我同时应用的问题 ::-webkit-input-placeholder**

仍然希望修复，但我怀疑可能，因为当两者单独应用时它工作正常。不再是真正的问题，但有点烦人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T19:33:24.477

如果选择器的一部分无效，则整个选择器将无效。

因此，每个`-moz-`和都需要有两个不同的规则`-webkit-`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T06:54:43.783

发布这个问题已经有一段时间了，但是除了 Gerve 的回答之外，应该使用`::-moz-placeholder`Firefox 19+：[http](http://mzl.la/15FPlx6) ://mzl.la/15FPlx6并且可以添加对 IE10 的支持`:-ms-input-placeholder`。所以最终的代码将如下所示：

```
.textFieldLarge::-webkit-input-placeholder {
  font-style:italic;
  color:#BBB;
} 

.textFieldLarge:-moz-placeholder {
  font-style:italic;
  color:#BBB;
}

.textFieldLarge::-moz-placeholder { /* Firefox 19+ */
  font-style:italic;
  color:#BBB;
}

.textFieldLarge:-ms-input-placeholder { /* IE10 */
  font-style:italic;
  color:#BBB;
} 
```

# ruby-on-rails - Rails 使模型需要另一个模型

> ID：11459059
> 
> 赞同：0
> 
> 时间：2012-07-12T19:19:02.730
> 
> 标签：ruby-on-rails, database-design, activerecord, model, database-relations

如果我在两个模型之间有`has_and_belongs_to_many`关系，比如说`Users`and `Accounts`，我是否可以要求 a`User`至少有一个`Account`，以及如何？

此外，使用`has_and_belongs_to_many`关系，是否有可能`Account`没有 a `User`？

我需要的是一种`Accounts`可以独立生活并属于的关系，但如果与某人签约`Billers`，他们也可以属于。这可能吗，怎么做？`Users``User`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:35:24.173

我个人会放弃HABTM。相反，我会使用`has_many :though=>`

您需要创建两个新模型 account_users 和 account_billers。您可能已经有 HABTM 的连接表，但这会将它们公开为模型，因此它们将需要 ID 字段。

因此，您最终会得到以下内容：

```
class Account < ActiveRecord::Base
  has_many :account_billers
  has_many :account_users

  has_many :billers, :through=> :account_billers
  has_many :users, :through=> :account_users
end

class User < ActiveRecord::Base
  has_many :account_users
  has_many :accounts, :through=>:account_users

  validates :accounts, :length => { :minimum => 1}
end

class Biller < ActiveRecord::Base
  has_many :account_billers
  has_many :accounts, :through=>:account_billers

  validates :accounts, :length => { :minimum => 1}
end

class AccountUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :account
end

class AccountBiller < ActiveRecord::Base
  belongs_to :biller
  belongs_to :account
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:35:56.103

要验证至少一个关联的存在，您可能需要使用[自定义验证方法](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-methods)，例如

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :accounts
  validate :require_at_least_one_account

  private
    def require_at_least_one_account
      errors.add(:accounts, "must amount to at least one") if accounts.size < 1
    end
end 
```

（尽管这带来了用户之间如何共享帐户的问题）

对于您的第二个问题，看起来您正在寻找[多态关联](http://railscasts.com/episodes/154-polymorphic-association)，但是您不能直接使用 HABTM 关系来做到这一点，您必须将其更改为 a`has_many :through`并引入连接模型。

# asp.net-mvc - 剃刀空隙功能

> ID：11459060
> 
> 赞同：4
> 
> 时间：2012-07-12T19:19:03.460
> 
> 标签：asp.net-mvc, razor

我有 Razor 函数，它输出一些数据，结果不返回任何东西（这是一个很长的故事，为什么它会这样做）：

```
@functions
{
  public static void SampleHelperMethod()
  {
    //...
  }
} 
```

我现在怎么称呼它？我试过`@MyFunctions.SampleHelperMethod()`了，但它不适用于 void 函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T19:27:38.427

**宣言**

```
@functions
{
    public static void TestFunction()
    {

    }
} 
```

**在视图中使用**

```
@{ TestFunction(); } 
```

因为这是一个不返回任何内容的函数，所以您需要像使用 if/for 语句一样将其包裹在大括号中。但是，就像 Erik 说的那样，目前还不清楚为什么会在视图中声明此逻辑......您可以考虑创建一个您的视图可以包含的助手类。这将允许重用和更好地分离关注点。

# c - 引用指向字符数组的指针，一个 strtok 工作示例

> ID：11459061
> 
> 赞同：1
> 
> 时间：2012-07-12T19:19:03.907
> 
> 标签：c, pointers, tokenize

我正在使用 C 尝试标记一个数组，然后将标记存储到一个全局字符串数组中。问题是我正在尝试使用指针来执行此操作，因此我不必重新引用字符串数组的索引。我知道数组应该有多大，这就是为什么使用索引很容易做到这一点，但是；我试图用指针来做到这一点。我不知道这是否可能，所以在这里纠正我。这是我尝试实现但未成功的代码..

```
 #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

            char *cPayload2[PARAMS];

    void ReadIn2(char *input)
    {
        //Initialize the pointer to the 
        char *PayloadPtr;
        //start the parse
        char *token = strtok(input, "#");
        //pointer to an array of strings(pointers to character arrays)
        PayloadPtr = &cPayload2[0];

        while(token != NULL)
        { 
```

这是有问题的部分，我可以用这样的子句更改全局数组的索引吗？看来我无法用这个打印出有效载荷数组。

```
 *PayloadPtr = token;
            //increment the index that the ptr refrences
            PayloadPtr++;
            //tokenize again
            token = strtok(NULL, "#");
        }

    }

    int main(void)
    {

        char input[] = "jsiUjd3762BNK==#KOIDKKkdkdwos==";

        ReadIn2(input); 
```

出于某种原因，此打印输出被伪造了

```
 printf("%s\n",cPayload2[0]);
        printf("%s\n",cPayload2[1]);

        return 0;
    } 
```

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:26:24.840

```
char *PayloadPtr; 
```

应该

```
char **PayloadPtr; 
```

除此之外，您的代码还可以。

# c# - 动态数据录入表格

> ID：11459064
> 
> 赞同：3
> 
> 时间：2012-07-12T19:19:05.650
> 
> 标签：c#, asp.net, dynamic

我一直在四处寻找，我迷失了如何去做我想做的事情。

我正在尝试创建一个表单，其中第一列是名称列表，下一列是所有下拉列表。这个想法是，对于每个名称，用户都会选择一个值。每个名称可能需要两个、三个或更多值。我想创建一个动态表单，用户可以在其中单击行中的添加并出现另一个下拉列表。

前任。“姓名” | 添加按钮 | 落下

然后当我点击添加...

“姓名” | 添加按钮 | 下拉 | 落下

并让它继续下去。

我能够创建表单，并且可以创建下拉列表。问题是我在转发器的 ItemCommand 上添加控件，因此每次都必须重新创建它们。因此，当我必须重新创建它们时，我无法找到一种方法来保持在每个下拉列表中选择的值。

通常不需要超过两个下拉菜单，但在少数情况下需要三个，并且可能会出现更多。我想尽可能保持这种动态。

我知道，如果我在 Init 页面中添加下拉列表，它们将保留在回发中，但至少在我的设计中，用户必须单击添加才能获得另一个下拉列表。

有没有办法从这些下拉列表中捕获数据然后每次重新加载它们？还是实现此功能的更好方法？

感谢您的帮助。

这是我正在使用的一些 asp 和代码。这正如我所愿，但我不知道如何将数据保留在回发中，因为我添加的所有下拉列表都丢失了。

ASP：

```
<table>
    <asp:Repeater ID="repChemicals" runat="server" OnItemCommand="repChemicals_OnItemCommand">
        <ItemTemplate>
            <tr>
                <td>
                    <asp:HiddenField ID="hfNumber" runat="server" />
                    <%# Eval("ChemicalName") %>
                </td>
                <td>
                    <asp:Button runat="server" ID="btnAdd" Text="Add" CommandArgument="ADD" />
                </td>
                <td>
                    <div id="divContainer" runat="server">
                        <asp:DropDownList runat="server" Width="60px" ID="ddlTest"></asp:DropDownList>
                    </div>
                </td>
            </tr>
        </ItemTemplate>
    </asp:Repeater>
</table> 
```

C＃：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            List<Chem> Chemicals = new List<Chem>();
            Random rnd = new Random();

            for (int z = 0; z <= 10; z++)
            {
                List<string> t = new List<string>();

                Chem a = new Chem()
                {
                    ChemicalName = "Chemical" + z.ToString()
                };

                Chemicals.Add(a);
            }

            repChemicals.DataSource = Chemicals;
            repChemicals.DataBind();
        }

    }

public void repChemicals_OnItemCommand(object sender, RepeaterCommandEventArgs e)
    {
        int number = 0;

        foreach (RepeaterItem i in repChemicals.Items)
        {
            HiddenField hf = (HiddenField)repChemicals.Items[i.ItemIndex].FindControl("hfNumber");

            if (i.ItemIndex == e.Item.ItemIndex)
            {
                if (!string.IsNullOrWhiteSpace(hf.Value))
                {
                    number = Convert.ToInt16(hf.Value) + 1;
                }
                else
                {
                    number = 1;
                }

                hf.Value = number.ToString();
            }
            else
            {
                if (!string.IsNullOrWhiteSpace(hf.Value))
                {
                    number = Convert.ToInt16(hf.Value);
                }
                else
                {
                    number = 0;
                }
            }

            for (int x = 0; x < number; x++)
            {
                DropDownList ddl = new DropDownList();

                ddl.Style.Add("width", "60px");
                ddl.ID = "ddl" + i.ToString() + x.ToString();

                ddl.Style.Add("Margin-right", "3px");
                ddl.Attributes.Add("runat", "server");
                ddl.DataSource = DataSource();
                ddl.DataBind();

                Control c = repChemicals.Items[i.ItemIndex].FindControl("divContainer");
                c.Controls.Add(ddl);
            }
        } 
```

一些循环用于创建测试数据。基本上，我在隐藏字段的每一行上存储了一些动态控件。然后在 item 命令上，我遍历所有行并重新创建所有以前存在的 ddl，并将一个添加到命令来自的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:47:09.063

这并不能完全回答您的问题，但它以一种不太复杂的方式实现了您的最终目标，并且利用了内置的 ASP.NET 控件，因此您可以在回发之间维护状态。

它利用[jQuery](http://jquery.com/)、[jQuery UI](http://jqueryui.com/)和[DropDownChecklist](http://code.google.com/p/dropdown-check-list/)插件。

ASPX

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/ui.dropdownchecklist.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css"/>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <table>
            <asp:Repeater ID="repChemicals" runat="server">
                <ItemTemplate>
                    <tr>
                        <td>
                            <%# Container.DataItem %>
                        </td>
                        <td>
                            <div id="divContainer" runat="server">
                                <asp:ListBox ID="lstAttributes" SelectionMode="Multiple" runat="server"></asp:ListBox>
                            </div>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
        </table>
        <asp:Button ID="btnPostback" Text="Postback" runat="server"/>
    </div>
    </form>
</body>
</html> 
```

C＃

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace PersonAttributes
{
    public partial class People : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            repChemicals.ItemCreated += RepChemicalsOnItemCreated;

            var chemicals = new[] {"Hydrogen", "Helium", "Lithium", "Beryllium", "Boron"};

            if(!IsPostBack)
            {
                repChemicals.DataSource = chemicals;
                repChemicals.DataBind();
            }

            var dropDownChecklist = "$(document).ready(function () { $('select').dropdownchecklist(); });";
            ScriptManager.RegisterStartupScript(this,GetType(),"initDropDownChecklist",dropDownChecklist,true);
        }

        private void RepChemicalsOnItemCreated(object sender, RepeaterItemEventArgs repeaterItemEventArgs)
        {
            var lst = repeaterItemEventArgs.Item.FindControl("lstAttributes") as ListBox;

            if (lst == null)
                return;

            lst.DataSource = new[] {"Option 1", "Option 2", "Option 3"};
        }
    }
} 
```

[在CodeRun](http://www.coderun.com/ide/?w=dl1A0TLX7kiDyccfHoKNfQ)上查看它的实际效果。

# nosql - 创建复合列 cassandra

> ID：11459065
> 
> 赞同：2
> 
> 时间：2012-07-12T19:19:09.213
> 
> 标签：nosql, cassandra, hector

我需要为每个夜间构建存储基准运行。为此，我提出了以下数据模型。

```
BenchmarkColumnFamily= {

   build_1: {
       (Run1, TPS) : 1000K
       (Run1, Latency) : 0.5ms
       (Run2, TPS) : 1000K
       (Run2, Latency) : 0.5ms
       (Run3, TPS) : 1000K
       (Run3, Latency) : 0.5ms
    }

    build_2: {
       ...
    }
...

} 
```

为了创建这样的模式，我在 cassandra-cli 上提出了以下命令：

```
create column family BenchmarkColumnFamily with 
    comparator = 'CompositeType(UTF8Type,UTF8Type)' AND 
    key_validation_class=UTF8Type AND
    default_validation_class=UTF8Type AND
    column_metadata = [
    {column_name: TPS, validation_class: UTF8Type}
    {column_name: Latency, validation_class: UTF8Type}
    ]; 
```

上述命令是否创建了我打算创建的架构？我感到困惑的原因是，当我使用以下方法将数据插入到上述 CF 中时： `set BenchmarkColumnFamily['1545']['TPS']='100';` 即使比较器类型是复合的，它也会成功插入。此外，即使以下命令也成功执行

```
set BenchmarkColumnFamily['1545']['Run1:TPS']='1000'; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:33:54.220

cassandra-cli 工具在处理复合材料方面非常有限。此外，在 Cassandra 中可能会发生一些关于用户提供的显式组合验证的意外事情。我不知道您的情况的确切答案，但我可以告诉您，使用 CQL 3 引擎您会发现使用这种模型*非常容易。*

例如，您的模型可以表示为：

```
CREATE TABLE BenchmarkColumnFamily (
    build text,
    run int,
    tps text,
    latency text,
    PRIMARY KEY (build, run)
);

INSERT INTO BenchmarkColumnFamily (build, run, tps, latency) VALUES ('1545', 1, '1000', '0.5ms'); 
```

有关如何将其转换为存储引擎层的更多信息，请参阅[这篇文章](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T21:29:21.863

我不认为你做错了什么。CLI 正在根据类型解析字符串以获取值，可能使用`org.apache.cassandra.db.marshal.AbstractType<T>.fromString()`. 对于复合类型，它使用“：”作为字段分隔符（不是我见过的文档，但我已经尝试使用 Java 代码来说服自己。

如果没有“：”，它似乎只是设置了 Composite 的第一部分，而将第二部分保留为 null。要仅设置第二个，您可以使用

```
set BenchmarkColumnFamily['1545'][':NOT_TPS']='999'; 
```

在 CLI 中，转储 CF：

```
list BenchmarkColumnFamily; 
```

你应该看到所有的名字（所有的行），例如

```
RowKey: 1545
=> (column=:NOT_TPS, value=999, timestamp=1342474086048000)
=> (column=Run1:TPS, value=1000, timestamp=1342474066695000)
=> (column=TPS, value=100, timestamp=1342474057824000) 
```

无法（通过 CLI）将复合元素限制为非 null 或特定值，这是您必须在代码中执行的操作。

此外，创建 CF 的 column_metadata 选项是不必要的，因为您已经将默认验证列为 UTF8Type。

# c# - 使用 .Net 的 StatisticFormula 库

> ID：11459066
> 
> 赞同：4
> 
> 时间：2012-07-12T19:19:15.287
> 
> 标签：c#, .net, normal-distribution

C# 命名空间 System.Windows.Forms.DataVisualization.Charting.StatisticFormula 似乎有一些我需要的统计函数。命名空间记录在[MSDN 此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.statisticformula.aspx)。我真的很想使用 InverseNormalDistribution(double Z) 函数。问题是构造函数是内部的，所以我无论如何都无法访问我知道的函数。

有什么方法可以访问这个命名空间中的静态函数，还是我必须找到其他解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:34:36.450

您可能可以使用反射，应该这样做：

```
var statisticFormula = 
    (StatisticFormula) typeof(StatisticFormula).GetConstructor(
        BindingFlags.NonPublic | BindingFlags.Instance,
        null, Type.EmptyTypes, null).Invoke(null); 
```

但这可能是更好的方法：

```
var chart = new Chart();
var value = chart.DataManipulator.Statistics.InverseNormalDistribution(.15) 
```

# r - 卡方数据的 Kolmogorov-Smirnov 检验

> ID：11459070
> 
> 赞同：2
> 
> 时间：2012-07-12T19:19:33.987
> 
> 标签：r, statistics

我很难`ks.test`处理卡方分布式数据：

```
> chi10 <- rchisq(200,10) 
> ks.test(chi10, dchisq, df=10)

    One-sample Kolmogorov-Smirnov test

data:  chi10 

D = 0.9983, p-value < 2.2e-16

alternative hypothesis: two-sided 
```

看起来它无法将此数据识别为`chisq`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:30:04.403

据我所知`?ks.test`，第二个参数是“数据值的数字向量，或者命名累积分布函数或实际**累积**分布函数（如 pnorm）的字符串。只有连续 CDF 才有效。”

```
set.seed(123456)
chi10<-rchisq(200,10)

ks.test(chi10,pchisq,df=10)

#One-sample Kolmogorov-Smirnov test

#data:  chi10 
#D = 0.0518, p-value = 0.6576
#alternative hypothesis: two-sided 
```

# git - 在 github 上的 fork 中跟踪上游的最佳实践

> ID：11459072
> 
> 赞同：13
> 
> 时间：2012-07-12T19:19:43.987
> 
> 标签：git, github, git-merge

简介： 处理要维护一组本地更改的上游存储库的长期运行跟踪的最佳实践是什么？

我想让 github 上的分支与上游保持同步，但仍允许清晰地跟踪分支独有的更改。（对于本次讨论，假设`upstream`指向主项目存储库，并且`origin`指向我的存储库分支）

想象一下，当上游/主服务器位于 E 时，我有这样的事情，我在其中分叉了一个存储库。

```
Upstream:
A-B-C-D-E-F

Fork:    
A-B-C-D-E ----- P ------T
         \-L-M-/ \-Q-R-/ 
```

分叉存储库后，我创建了两个功能分支（LM 和 QR）来添加我需要的新功能并将它们合并回我的源/主。所以现在我的分支有了上游不存在的改进。

我发现上游有一些有趣的修复，所以我想重新与上游同步。根据我发现的大多数参考资料（[git hub fork](https://help.github.com/articles/fork-a-repo)），推荐的方法是将上游/主服务器合并到您的源站/主服务器并继续您的方式。所以我会发出如下命令：

```
git checkout master
git fetch upstream
git git merge upstream/master
git push 
```

然后我最终会得到如下所示的存储库：

```
Upstream:
A-B-C-D-E-F

Fork:    
A-B-C-D-E ----- P ------T-F'
         \-L-M-/ \-Q-R-/ 
```

不过，我看到了一些问题。

1.  我的存储库中实际上没有提交 F，我有 F'，它具有相同的内容，但哈希值不同。所以我不能轻易地引用两个存储库之间的提交并且知道我有更改。（考虑到上游可能有不止一个更改并且有自己的一组已合并的功能分支时，它变得更加复杂）

2.  随着我继续前进并继续这样做，我越来越难以知道我的存储库中除了上游的更改之外还有哪些更改。例如，我可以将其中一些更改提交回上游，同时继续添加我自己的改进。经过多次迭代，查看我的存储库的人如何知道它与上游有何不同？（是否有 git 命令来查找这些更改？）

3.  与 #2 类似，有人如何在上游找到修复并检查我的 fork 是否包含修复？

我想问题的根源是我无法保证我的存储库在任何给定点都与上游“同步”，因为代码和哈希值不一样。那么，我该如何准确地跟踪变化并避免让自己疯狂地试图保持同步呢？

注意：我曾考虑使用 rebase 来保持我的存储库远离上游，但这有一组完全不同的问题。例如，如果有人通过子模块、分支等引用我的存储库，那么历史重写将破坏他们的引用。此外，我认为我的分支历史不会在 rebase 中幸存下来，因此我无法完整查看我创建的所有功能分支和相关历史记录。

其他人如何处理这个问题？我应该研究哪些最佳实践？

* * *

更新：

根据 Seth 的反馈，我创建了一组测试存储库来展示我在说什么以及它是如何按照他所说的方式运行的。

存储库是：

*   [上游](https://github.com/vrsource/fork_testing)
*   [叉](https://github.com/abierbaum/fork_testing)

他们应该更清楚地展示当有本地更改时从上游合并的外观。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T00:21:51.370

你的假设是不正确的。您在文本示例中说您将运行该`git merge`命令。如果你真的是这个意思，而不是`git cherry-pick`（为了记录，git-merge 是这种情况下的最佳实践），那么你的分支中没有得到 F`，你得到 F。也许是一张图片：

在 fetch 之后但在合并之前，您的 repos 如下所示：

```
Upstream:
A-B-C-D-E-F  [master]

Fork:    /-F                  [upstream/master]
A-B-C-D-E ----- P ------T     [master]
         \-L-M-/ \-Q-R-/      [Other branches] 
```

合并后，您的 repo 将如下所示：

```
Fork:    /-F-------------\    [upstream/master]
A-B-C-D-E ----- P ------T-U   [master]
         \-L-M-/ \-Q-R-/      [Other branches] 
```

你的仓库中的新提交“U”将是一个合并提交，就像提交“P”和“T”一样。

`git cherry-pick`如您在示例中所示，将创建“F'”。不要那样做。 `git rebase`有时可以支持变基分支`git rebase -p`，但并不总是有效。此外，这是改写公共历史，这是一个坏主意。

我有一份关于 git 最佳实践的文档：[经常提交、稍后完善、一次发布](http://sethrobertson.github.io/GitBestPractices/) 您可能特别想研究工作流部分以获得更多灵感。

# autofac - 为什么我不能让信号器使用 autofac 依赖注入？

> ID：11459073
> 
> 赞同：1
> 
> 时间：2012-07-12T19:19:46.020
> 
> 标签：autofac, signalr

我是 AutoFac 的新手，但我认为这很简单。我有一个简单的集线器：

```
public class Chat : Hub
{
    private readonly IHomeTasks _homeTasks;
    public Chat(IHomeTasks homeTasks) 
    {
        _homeTasks = homeTasks;
    }

    public void Send(string text)
    {
        _homeTasks.DoNothing();
        Clients.addMessage(text);
        var user = new UserDocument { Username = text };
    }
} 
```

在我的 Global.ascx.cs 我有：

```
 protected void Application_Start()
    {
        var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);
        builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).AsImplementedInterfaces();

        builder.RegisterType<Helpers.AutofacDependencyResolver>().As<SignalR.IDependencyResolver>(); // Not sure if I need this or...

        var container = builder.Build();
        RouteTable.Routes.MapHubs(new Helpers.AutofacDependencyResolver(container));
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

和我刚刚从[这里](https://github.com/pszmyd/SignalR.Autofac/blob/master/AutofacDependencyResolver.cs)复制的 AutofacDependencyResolver ：

```
public class AutofacDependencyResolver : DefaultDependencyResolver, IRegistrationSource
{
    private readonly ILifetimeScope _lifetimeScope;

    public AutofacDependencyResolver(ILifetimeScope lifetimeScope)
    {
        _lifetimeScope = lifetimeScope;
        _lifetimeScope.ComponentRegistry.AddRegistrationSource(this);
    }

    public override object GetService(Type serviceType)
    {
        object result;
        if (_lifetimeScope.TryResolve(serviceType, out result))
        {
            return result;
        }

        return null;
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        object result;
        if (_lifetimeScope.TryResolve(typeof(IEnumerable<>).MakeGenericType(serviceType), out result))
        {
            return (IEnumerable<object>)result;
        }

        return Enumerable.Empty<object>();
    }

    public IEnumerable<IComponentRegistration> RegistrationsFor(Service service, Func<Service, IEnumerable<IComponentRegistration>> registrationAccessor)
    {
        var typedService = service as TypedService;
        if (typedService != null)
        {
            var instance = base.GetServices(typedService.ServiceType);

            if (instance != null)
            {

                return instance.Select(i => RegistrationBuilder.ForDelegate(i.GetType(), (c, p) => i).As(typedService.ServiceType)
                    .InstancePerMatchingLifetimeScope(_lifetimeScope.Tag)
                    .CreateRegistration());
            }
        }

        return Enumerable.Empty<IComponentRegistration>();
    }

    bool IRegistrationSource.IsAdapterForIndividualComponents
    {
        get { return false; }
    }
} 
```

我的 HomeTasks 看起来像这样：

```
public class HomeTasks : Sandbox.Tasks.IHomeTasks
{
    public void DoNothing()
    {
    }
} 
```

看起来没有任何事情发生，因为我在 SignalR.Hosting.AspNet.HttpTaskAsyncHandler 中遇到了这样的错误：

> 无法从程序集“SignalR，版本=0.5.1.10625，文化=中性，PublicKeyToken=null”加载类型“SignalR.Hosting.IRequest”。

**编辑：**

我删除了所有 SignalR dll，然后由于 dfowler 的回答而重新添加，一切都很好，但是现在当我在聊天中心实际调用 Send(text) 时，我得到了这个：

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Activator.CreateInstance(Type type) +6
   SignalR.Hubs.DefaultHubActivator.Create(HubDescriptor descriptor) +141
   SignalR.Hubs.DefaultHubManager.ResolveHub(String hubName) +71
   SignalR.Hubs.HubDispatcher.CreateHub(IRequest request, HubDescriptor descriptor, String connectionId, TrackingDictionary state, Boolean throwIfFailedToCreate) +679
   SignalR.Hubs.HubDispatcher.OnReceivedAsync(IRequest request, String connectionId, String data) +870
   SignalR.<>c__DisplayClass6.<ProcessRequestAsync>b__4(String data) +73
   SignalR.Transports.ForeverTransport.ProcessSendRequest() +141
   SignalR.Transports.ForeverTransport.ProcessRequestCore(ITransportConnection connection) +128
   SignalR.Transports.ForeverTransport.ProcessRequest(ITransportConnection connection) +37
   SignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +1018
   SignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context) +216
   SignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context) +676
   SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +125
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8968180
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

我想我只是在这里遗漏了一件我只是无法弄清楚它到底是什么。

是什么让我认为 SignalR 的接线有问题是因为我还有一个可以正常工作的简单控制器。

```
public class HomeController : Controller
{
    private IHomeTasks _homeTasks;
    public HomeController(IHomeTasks homeTasks)
    {
        _homeTasks = homeTasks;
    }

    public ActionResult Index()
    {
        _homeTasks.DoNothing(); // No problems resolving HomeTasks!
    } 
```

**更新答案**

```
 protected void Application_Start()
    {
        var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);
        builder.RegisterAssemblyTypes(Assembly.GetExecutingAssembly()).AsImplementedInterfaces();
        builder.RegisterType<Chat>().InstancePerLifetimeScope();

        var container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        RouteTable.Routes.MapHubs(new AutofacSignalrDependencyResolver(container));

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

让它与上面的 AppStart 方法一起工作。关键线是builder.RegisterType().InstancePerLifetimeScope();。老实说，我不知道这是否是最好的方式，因为这对我来说是一种学习体验，因为我使用我更了解的 [Windsor] 来解决这个问题，但我认为我已经花了足够的时间，我想至少看到一些东西从我的劳动。希望这可以帮助某人：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:28:01.630

它看起来像版本不匹配，这可能是它无法加载类型的原因。确保您使用的是二进制兼容版本的依赖项。

# php - 在 Apache 2.2 上使用 FatFree 和 PHP5.3 时无法呈现简单页面

> ID：11459074
> 
> 赞同：3
> 
> 时间：2012-07-12T19:19:51.493
> 
> 标签：php, apache, fat-free-framework

我正在使用 Apache 2.2 和 PHP 5.3。我正在尝试使用 Fatfree 框架进行路由。我的 index.php 文件如下所示：

```
<?php
require_once 'f3/lib/base.php';

F3::route('GET /','home');
function home() {
    echo F3::render('templates/index.html');
}

F3::route('GET /@pagenum','mainlist');
function mainlist() {
    F3::set('pagenum', @pagenum);
    echo Template::serve('templates/index.html');       
}

F3::run();

?> 
```

如果我转到“http://localhost:8080/”，它会正确呈现文件 templates/index.html，这意味着 PHP 和 Fatfree 正在工作。但是如果我去“http://localhost:8080/1”那么它就行不通了。我收到以下错误：

```
Not Found
The requested URL /1 was not found on this server. 
```

如果我将第一部分更改为

```
F3::route('GET /anotherthing','home');
function home() {
    echo F3::render('templates/index.html');
} 
```

那么“http://localhost:8080/anotherthing”也不起作用。它只适用于根。有什么帮助吗？

**MORE INFO** 这是在 httpd.conf 中配置的

```
DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"
<Directory "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs">
Options -Indexes FollowSymLinks Includes
AllowOverride All
Order allow,deny
Allow from All
</Directory> 
```

启用了 Modrewrite：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

.htaccess 看起来像：

```
RewriteEngine On
RewriteBase /fatfree/
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /fatfree/index.php [L,QSA] 
```

“/fatfree/” base 是由于另一个具有类似问题的 SO question 中的答案。

我还尝试了以下.htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:33:34.640

您确实需要查看您的服务器日志。如果您尚未启用它们，我建议您这样做。Apache 有非常好的日志。如果您看到日志条目并且没有收到 500 服务器错误，则通常不是 mod_rewrite。

如果你想确保重写模块被加载（在 Linux 上），试试这个：

> [root@server ~]# httpd -M 2>&1|grep 重写

它将返回一些结果：

> rewrite_module（共享）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T13:06:32.817

# 启用重写引擎并将请求路由到框架

试试这个，这个修复对我有用。修改您的 .htaccess 文件，就像下面的代码一样。

```
RewriteEngine On

# Some servers require you to specify the `RewriteBase` directive
# In such cases, it should be the path (relative to the document root)
# containing this .htaccess file
#
#RewriteBase /

RewriteRule ^(lib|tmp)\/|\.(ini|php)$ - [R=404]

RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [END,QSA]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-26T11:20:01.450

你可以试试这个.htaccess：

```
RewriteEngine On
RewriteRule ^(app|tmp)\/|\.ini$ - [R=404]
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L,QSA]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-14T01:48:13.257

我以前和你有同样的问题。

我在 httpd.conf 条目中的 DocumentRoot 如下所示：

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

使用这些 .htaccess 指令：

```
RewriteEngine On
RewriteBase /fatfree/
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /fatfree/index.php [L,QSA] 
```

加上 mod_rewrite 在我这边工作正常。截至今天，我拥有最新的 f3 和 wamp。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-25T12:48:14.367

你只需要在你的 index.php

```
$f3=require('lib/base.php');
$f3->config('config/config.ini');
$f3->config('config/routes.ini');
$f3->run(); 
```

然后在你的 config.ini 中：

```
[globals]
DEBUG=3
UI=views/ 
```

路线.ini：

```
[routes]
GET /=ControllerName->methodThatRenderTheView
GET /@pagenum=ControllerName->methodThatRenderTheView 
```

渲染视图的基本控制器：

```
class ControllerName {
   public function methodThatRenderTheView() {
      $this->f3->set('view', 'template.htm');
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-21T17:16:10.677

fatfree的根目录下有config.ini文件

```
[globals]
DEBUG=3
UI=ui/ 
```

DEBUG=3 将让 f3 显示来自内部的所有错误，并且更改 ui 值很重要，因为您需要将模板保存在 ui 文件夹中，因此在此配置中，您必须将其更改为您自己的模板目录。

根据 f3 文档，静态调用约定 (F3::xxx) 已被弃用，更好的选择是调用 F3 的实例（如 $f3->xxx）。

还请检查 HTTPD 错误日志以了解与 mod_rewrite 和 .htaccess 相关的问题。

--

# uml - 用例图混淆：泛化和依赖

> ID：11459075
> 
> 赞同：0
> 
> 时间：2012-07-12T19:19:52.520
> 
> 标签：uml, diagram, use-case

我正在做一个大学项目。我有以下问题。这是一个发布系统的用例图。如您所见，其中存在混乱。我不确切知道如何以及在何处使用扩展-包含关系。以及如何使用继承 UC。是否应该从主 Report-UC 扩展所有报告？我们在哪里可以有包含-扩展关系？ ![在此处输入图像描述](../Images/f611f30d02607151e5ea122b0c9952bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:09:40.660

**警告**

“用例”通常以动词开头，表示一个动作。

**快速简短的回答**

也许，您可能想坚持标准的“用例”。

“继承”和“包含”可能会有所帮助，但也可能会让您更加困惑。

**冗长的无聊答案**

**1\. 继承**

您的发布系统中有多个用户。其中一些用户由不包括在内的通用“用户”表示，需要登录系统。

例如，您可能有一个通用的“管理员”有权执行某些操作，而您的“经理”演员和您的“责任”演员从他那里继承。

```
 o
-+-
 |
/ \
"Administrator"
 ^             ^
 |             |
 | "inherits"  | "inherits"
 |             |
 o             o
-+-           -+-
 |             |
/ \           / \
"Manager"    "Responsible" 
```

这些参与者共享几个用例，但没有完全相同的用例。

“继承”更集中在“演员”（“人”），而不是“用例”（“泡泡”）。

**2\. 扩展/包含**

“扩展/包含”更侧重于“用例”，而不是“参与者”。

这种情况需要几个可能独立的“用例”，以及其他需要独立的组合“用例”。

您可能有一个“与作者签订合同”用例。该用例包括更多其他用例：

2.1 “与作者签订合同”，这是一种手动操作，而不是计算机操作。

```
("Make a Contract with the Author") --includes--> ("Deal the Contract with the Author") 
```

2.2 “登录系统”，即系统中的一个模块，可以包含在其他用例中，并且是独立的。

```
("Make a Contract with the Author") --includes--> ("Login into the System") 
```

2.3 “向作者注册合同”，这是系统中的一个模块，需要“登录到系统”用例，其中合同数据被捕获。

```
("Make a Contract with the Author") --includes--> ("Register the Contract with the Author") 
```

**概括**

我学习了不包含“继承”或“扩展/包含”的“用例”图的第一个 UML 版本。后来，我发现了如何使用它们。

作为家庭作业，您的项目是否需要实施它们？

# ruby-on-rails - 从目录下载特定文件

> ID：11459082
> 
> 赞同：0
> 
> 时间：2012-07-12T19:20:22.190
> 
> 标签：ruby-on-rails

我有一个包含一堆 csv 文件的文件夹，我想让用户下载他们需要的任何文件。唯一的问题是每天都会创建新文件，所以我不能只在文件名中硬编码。我想知道是否有可能以某种方式从视图传递参数到控制器以允许下载请求的文件，但我所做的似乎没有任何工作......

控制器：

```
def download_file(file_to_download)
  send_file RAILS_ROOT + "/public/csv/" + file_to_download,
    :type => 'text/csv; charset=iso-8859-1; header=present',
    :disposition => "attachment; filename=#{file_to_download}",
    :stream => true,
    :buffer_size => 4096
end 
```

意见：（使用haml）

```
%h1 Database Export
%h2 Date: #{Date.today}
%table
  %tr
    %td Click on a file to download
    - @files = Dir.glob("public/csv/*.csv")
    - for file in @files
      - name = File.basename(file, '.csv')
      %tr
        %td= link_to name, :controller => "csv_exports", :action => "download_file", :file_to_download => name + ".csv" 
```

我收到错误：参数数量错误（0 代表 1）

但是，我的请求参数似乎传递了我想要使用的内容： {"file_to_download"=>"property_site_views_07-12-2012.csv"}

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:58:18.623

rails 控制器方法不应该接受参数。

您需要通过 params 选项访问您的请求参数：

```
def download_file
  file_to_download = params[:file_to_download]
  send_file RAILS_ROOT + "/public/csv/" + file_to_download,
    :type => 'text/csv; charset=iso-8859-1; header=present',
    :disposition => "attachment; filename=#{file_to_download}",
    :stream => true,
    :buffer_size => 4096
end 
```

然而，像这样通过用户提交的值被认为是一种不好的做法，因为它允许注入。您应该验证提交的文件名是否实际上是您在该特定目录中的文件列表中的一个。

查看指南以获取有关控制器的更多信息：http: [//guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html)

# git - 无法使用 git reset 恢复文件结构

> ID：11459089
> 
> 赞同：0
> 
> 时间：2012-07-12T19:20:55.087
> 
> 标签：git

我在我的项目中更改了文件目录结构，现在当我这样做时，`git reset --hard 514c98bd`我确实得到了`514c98bd`提交时的文件，但不是目录结构。

我通过 IDE 更改了目录结构，现在完全一团糟，不可能像以前那样手动获取所有内容。为什么 git 不恢复目录中的文件，如果它恢复了 - 我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:23:47.110

我的猜测是你有额外的文件存在？如果是这样，请尝试“git clean -dfx”进行硬清理（包括目录、强制删除、删除 .gitignored 文件）。另外：请更具体地说明您的问题。“但不是目录结构”告诉我们你没有你所期望的；它没有告诉我们您拥有什么**或**您期望什么。

# java - 如何获取列的最后一个值

> ID：11459094
> 
> 赞同：1
> 
> 时间：2012-07-12T19:21:14.627
> 
> 标签：java, sql, ms-access, ms-access-2007

如何检索数据库中列的最后输入值（MS ACCESS 2007）

我使用了以下代码

```
String sql = "SELECT Last(RegNumber) FROM Death "; 
```

但它在 MS ACCESS 中不起作用，当我运行程序时，错误生成为

```
java.sql.SQLException: Column not found 
```

但我在数据库中创建了一个列`RegNumber`

我正在使用 Java 进行编程，其中我使用了这个查询

编辑：

RegNumber 是字符串形式而不是整数形式，所以我不能使用 DESC 或 ASC

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:25:22.440

根据您喜欢和使用的任何标准对您的表格进行排序`SELECT TOP 1 * FROM myTable ORDER BY RegNumber ASC`。

或者`ORDER BY incrementingId DESC`

基本上，您所说的“最后输入的列”的排序必须有一些逻辑顺序（我假设这意味着行，而不是列）

编辑：您的函数在 Access 中是正确的，并且应该返回正确的值。但是 Java 可能无法正确解释它。在 Access 本机查询中尝试查询，然后尝试调试 Java。如果只是Java不支持这个功能，可以考虑使用Java.sql中内置的ResultSet()函数

```
ResultSet rs = ....;
rs.last();
int RegNumber = rs.getRow(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:34:14.123

我不知道 中的`last()`功能`MS ACCESS`，但我有另一个想法：

通常`id`每个 都有一个自动生成的`table`，因此您可以对其进行排序并从结果集中获取第一条记录，如下所示：

```
SELECT RegNumber
FROM Death 
ORDER BY id DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:39:09.287

这取决于您的数据库结构。

通常，表带有一些唯一标识符，如果您确定它**总是**为了数据库，您可以使用函数`MAX`来检索标识符，然后检索整行。

另一种情况是用于描述列创建时间的时间戳列，如果序列真的很重要，如果不是`id`足够的话，这种方法可以满足要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T05:20:41.330

以下将返回最后一个和最新的 RegNumber ：

```
SELECT RegNumber FROM Death ORDER BY RegNumber DESC 
```

# c++ - 如何为函数指针设置默认函数？

> ID：11459096
> 
> 赞同：0
> 
> 时间：2012-07-12T19:21:22.383
> 
> 标签：c++

我正在从我的代码中的 .SO 'plugin' 文件加载一个函数。该插件将定义 3 个非常具体的功能，每个功能的完整 API 都是提前定义的（重点是允许同一程序的不同实例通过使用不同的插件来修改它们的行为。由于它的使用量，需要速度，以及我一般的懒惰，我决定使用一个静态函数指针，它可以存储插件函数，而不是在各种对象周围传递函数指针。

插件可能不存在，在这种情况下，我想运行本质上是“无操作”功能的功能，而不是从插件中读取的功能。为了一般安全，我想确保静态函数指针指向我的无操作函数。

无论出于何种原因，我似乎无法做到这一点。如果我尝试在 .h 文件中定义无操作函数并将函数指针分配给它，我会在 .h 中定义函数时遇到各种错误。如果我尝试仅在 .h 中声明方法的原型并将函数指针分配给原型，我会得到一个未声明的函数异常，即使该函数是在 .cpp 文件中定义的。

我知道我可以轻松地将函数指针分配给我的 main() 函数中的空操作。但是有没有办法做到这一点，即使我（或以后的某人）没有在我的 main() 方法中正确分配它，指针默认为我的无操作函数的 .H 文件也是如此？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:28:13.240

标头（例如，PluginInterface.h）：

```
extern void (*my_plugin_function_ptr)(...); 
```

来源（例如，PluginInterface.cpp）：

```
#include "PluginInterface.h"

static void default_plugin_function(...) {/* does nothing */};

void (*my_plugin_function_ptr)(...)=&default_plugin_function; 
```

# maven - Maven 正在获取 Archiva 中最古老的快照 - 为什么？

> ID：11459097
> 
> 赞同：3
> 
> 时间：2012-07-12T19:21:25.020
> 
> 标签：maven, archiva

我有一个具有以下结构的 projectA-parent：

```
projectA-parent|
----------------|projectA
----------------|projectA-core
----------------|projectA-api 
```

模块 projectA 简单地定义了对 core 和 api [1] 的依赖关系，因此我可以在其他需要 core 和 api 的项目中定义对 projectA 的依赖关系。我将项目部署到 Archiva (1.4-M2) 的 SNAPSHOT 存储库。

我有另一个项目 X，我在其中定义了对 projectA 的依赖项，今天下午，目标“mvn compile”开始因未解决的编译问题而失败。在对该项目使用“mvn dependency:tree”进行调查后，我发现在 projectA 下，对 projectA-core 的依赖被声明为“运行时”。虽然今天早上是这样的，但我执行了几次 mvn 安装，因为范围是“编译”（参见 [1]，其中列出了最新的 pom 定义）。

查看档案，我看到该项目的以下文件（缩写）：

```
projectA-0.0.7-20120712.084920-61-tests.jar
projectA-0.0.7-20120712.084920-61-tests.jar.md5
projectA-0.0.7-20120712.084920-61-tests.jar.sha1
projectA-0.0.7-20120712.084920-61.jar
projectA-0.0.7-20120712.084920-61.jar.md5
projectA-0.0.7-20120712.084920-61.jar.sha1
projectA-0.0.7-20120712.084920-61.pom
projectA-0.0.7-20120712.084920-61.pom.md5
projectA-0.0.7-20120712.084920-61.pom.sha1
projectA-0.0.7-20120712.172412-87-tests.jar
projectA-0.0.7-20120712.172412-87-tests.jar.md5
projectA-0.0.7-20120712.172412-87-tests.jar.sha1
projectA-0.0.7-20120712.172412-87.pom
projectA-0.0.7-20120712.172412-87.pom.md5
projectA-0.0.7-20120712.172412-87.pom.sha1
projectA-0.0.7-20120712.180733-90.pom
projectA-0.0.7-20120712.180733-90.pom.md5
projectA-0.0.7-20120712.180733-90.pom.sha1 
```

这是有趣的部分：如果我从本地 .m2/repository 中删除 projectA，即使我“mvn compile -U”**我也会得到 08:49 的版本，而不是 18:07 的版本！**这意味着**maven 或 archiva**正在解决当天的第一个 sNAPSHOT，而不是最近的一个。 **为什么会这样，如何解决这个问题？**

[1]：

```
<dependencies>
        <dependency>
            <groupId>com.projectA</groupId>
            <artifactId>projectA-api</artifactId>
            <version>${project.version}</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.projectA</groupId>
            <artifactId>projectA-core</artifactId>
            <version>${project.version}</version>
            <type>jar</type>
            <scope>runtime</scope>
        </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:02:35.973

您的项目A（' '或' '）的*包装*是什么。它只存在08:49 的“”人工制品。`jar``pom``jar`

我想您将包装更改为“ `pom`”。因此，如果您将库声明为其他项目中的依赖项，则必须设置`<type>pom</type>`.

# jquery - 204 No Content with jquery-ui-map，一个 jquery google maps v3 插件

> ID：11459099
> 
> 赞同：0
> 
> 时间：2012-07-12T19:21:31.620
> 
> 标签：jquery, jquery-ui-map

我尝试了许多不同的示例来使用 jquery-ui-map jquery 插件，但并不幸运。

这是简单的代码

```
<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/jquery.ui.map.js"></script>
    <script type="text/javascript" src="js/jquery.ui.map.services.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.1.min.js"></script>
    <script>
        function init() {
          $('#map_canvas').gmap({ 'center': '42.345573,-71.098326' });
        };
    </script>
</head>

<body onload="init();">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>

</html> 
```

它启动的脚本每次都在萤火虫控制台中向我显示：

网址：获取“https://maps.googleapis.com/maps/gen_204?ev=api_ads&cad=src:apiv3,ads:0”状态：204 无内容

我的第一印象是我不使用 API KEY，但在 Google 文档中说“不强制使用 KEY”。

任何想法 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:55:46.440

这是一个工作示例。您应该只更改 jquery 和 jquery-ui-map 的路径：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="js/jquery/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery/jquery.ui.map.full.min.js"></script>
        <script>
            function init() {
              $('#map_canvas').gmap({ 'center': '42.345573,-71.098326' });
            };
        </script>
    </head>

    <body onload="init();">
        <div id="map_canvas" style="width:100%;height:350px;"></div>
    </body>    
</html> 
```

您的错误似乎如下：

1.  您必须在 ui-map-plugin 之前包含 jQuery
2.  `map_canvas`的样式高度应以 px 为单位。
3.  您应该通过 api`http`而不是`https`

# linux - 需要将输出重定向到 /dev/null.... 在命令行中可以正常工作，但在 shell 中不行

> ID：11459100
> 
> 赞同：1
> 
> 时间：2012-07-12T19:21:37.967
> 
> 标签：linux, bash, shell, rhel5, lvm

我需要在 bash 文件中编写执行一些命令并忽略输入。

例子

```
pvs --noheadings -o pv_name,vg_name,vg_size 2> /dev/null 
```

上面的命令在命令行中效果很好，但是当我在 shell 中编写相同的命令时，它给了我一个错误

像

```
Failed to read physical volume "2>"
Failed to read physical volume "/dev/null" 
```

我猜它看起来是整个命令的一部分。你能给我一些关于如何纠正它的建议吗？

提前致谢。

全码

#------------------------------------------

```
main() {
    pv_cmd='pvs'
    nh='--noheadings'
    sp=' '
    op='-o'
    vgn='vg_name'
    pvn='pv_name'
    pvz='pv_size'
    cm=','
    tonull=' 2 > /dev/null '
    pipe='|'

    #cmd=$pv_cmd$sp$nh$sp$op$sp$vgn$cm$pvn$cm$pvz$sp$pipe$tonull  #line A
    cmd='pvs --noheadings -o vg_name,pv_name,pv_size 2> /dev/null' #line B
    echo -n "Cmd="
    echo $cmd
    $cmd 
```

}

主要的

#------------------------------------------------ ----

如果您查看 A 行和 B 行，两个版本都在那里，尽管一个被注释掉了.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:46:39.477

您不能在带引号的字符串中包含 2> /dev/null 。处理重定向*后*会删除引号。你必须做

```
cmd='pvs --noheadings -o vg_name,pv_name,pv_size'
$cmd 2> /dev/null 
```

以便重定向正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:15:08.130

你这样做的方式， 2> 和 /dev/null 将被解析为参数。但是您希望 2> /dev/null 是 bash 代码，而不是程序参数，所以

代替

```
 $cmd 
```

你应该

```
 eval $cmd 
```

事情就是这样运作的。

或者如果 echo 是为了调试，你可以在命令之前设置 -o xtrace 并在命令之后设置 +o xtrace 。并以正常方式而不是填充字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:47:20.443

我认为正在发生的事情是行内有一些我们看`>`不到的字符，或者是与它看起来不同的字符。毕竟shell应该在命令看到它之前吞下重定向，但是命令看到`2>`and `/dev/null`as `[PhysicalVolume [PhysicalVolume...]]`。或者，重定向可以通过引用传递（因此它对 shell 失去了特殊含义并被传递），请参阅 chepner 的回答。

* * *

```
tonull=' 2 > /dev/null ' 
```

是问题。正如切普纳所猜测的那样。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T19:24:04.540

消除 2 和 > 之间的空格

```
pvs --noheadings -o pv_name,vg_name,vg_size 2>/dev/null 
```

# ios - 科尔多瓦截图插件无法返回图像

> ID：11459101
> 
> 赞同：0
> 
> 时间：2012-07-12T19:21:40.250
> 
> 标签：ios, plugins, jquery-mobile, screenshot, cordova

我正在使用 Cordova/jQuery Mobile 构建一个 iPhone/iPad 应用程序。我使用了以下屏幕截图插件[https://github.com/josemando/phonegap-plugins/commit/4c2ec54ae001ad409e4d4fe6f5ec6b9ef8b7dc3f](https://github.com/josemando/phonegap-plugins/commit/4c2ec54ae001ad409e4d4fe6f5ec6b9ef8b7dc3f)，这是一种享受。它捕获屏幕截图并将其保存到我的相机胶卷相册中。但是，我如何才能在我的 Javascript 中获取此图像，以最终将其上传到我的 Web 服务器。

我使用以下 js 脚本执行截图功能，但它不返回图像。

```
Screenshot.prototype.saveScreenshot = function() {
    cordovaRef.exec("Screenshot.saveScreenshot");
}; 
```

这是 Screenshot.m 文件：

```
#import "Screenshot.h"

@implementation Screenshot

@synthesize webView;

- (void)saveScreenshot:(NSArray*)arguments withDict:(NSDictionary*)options
{
CGRect imageRect;
CGRect screenRect = [[UIScreen mainScreen] bounds];

// statusBarOrientation is more reliable than UIDevice.orientation
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) { 
    // landscape check
    imageRect = CGRectMake(0, 0, CGRectGetHeight(screenRect), CGRectGetWidth(screenRect));
} else {
    // portrait check
    imageRect = CGRectMake(0, 0, CGRectGetWidth(screenRect), CGRectGetHeight(screenRect));
}

UIGraphicsBeginImageContext(imageRect.size);

CGContextRef ctx = UIGraphicsGetCurrentContext();
[[UIColor blackColor] set];
CGContextTranslateCTM(ctx, 0, 0);
CGContextFillRect(ctx, imageRect);

[webView.layer renderInContext:ctx];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
UIGraphicsEndImageContext();

UIAlertView *alert= [[UIAlertView alloc] initWithTitle:nil message:@"Image Saved" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
[alert release];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:03:24.983

我认为这行不通！

**UIImageWriteToSavedPhotosAlbum（图像，无，无，无）；**

例如：

```
UIImageWriteToSavedPhotosAlbum(theImage,
   self, // send the message to 'self' when calling the callback
   @selector(thisImage:hasBeenSavedInPhotoAlbumWithError:usingContextInfo:), // the selector to tell the method to call on completion
   NULL); // you generally won't need a contextInfo here 
```

[看这里](https://stackoverflow.com/a/7628764/1322642)

获取图像

```
- (UIImage*)saveScreenshot:(NSArray*)arguments withDict:(NSDictionary*)options
....
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

....
 UIGraphicsEndImageContext();
....

return image; 
```

# python - 如何在 Python 中重新运行代码？

> ID：11459102
> 
> 赞同：1
> 
> 时间：2012-07-12T19:21:42.987
> 
> 标签：python, python-3.x

我有这个单词 un-scrambler 游戏，它只在 CMD 或 python shell 中运行。当用户正确或错误地猜出单词时，它会说“按任意键再次播放”

我怎样才能让它重新开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:28:37.957

在评估用户输入后不要让程序退出；相反，请在循环中执行此操作。例如，一个甚至不使用函数的简单示例：

```
phrase = "hello, world"

while input("Guess the phrase: ") != phrase:
    print("Incorrect.")  # Evaluate the input here
print("Correct")  # If the user is successful 
```

这将输出以下内容，同时显示我的用户输入：

```
Guess the phrase: a guess
Incorrect.
Guess the phrase: another guess
Incorrect.
Guess the phrase: hello, world
Correct 
```

这显然很简单，但逻辑听起来像你所追求的。一个稍微复杂一点的版本，带有定义的函数让您查看您的逻辑适合的位置，可能是这样的：

```
def game(phrase_to_guess):
    return input("Guess the phrase: ") == phrase_to_guess

def main():
    phrase = "hello, world"
    while not game(phrase):
        print("Incorrect.")
    print("Correct")

main() 
```

输出是相同的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-04T09:56:31.920

甚至**以下样式也有效！****！**

 *看看这个。

```
def Loop():
    r = raw_input("Would you like to restart this program?")
        if r == "yes" or r == "y":
            Loop()
        if r == "n" or r == "no":
            print "Script terminating. Goodbye."
    Loop() 
```

> 这是 重复执行函数*（语句集）的方法。*

希望你喜欢 ：） ：} ：]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T19:28:44.210

尝试循环：

```
while 1==1:
    [your game here]
    input("press any key to start again.") 
```

或者，如果你想变得花哨：

```
restart=1
while restart!="x":
    [your game here]
    input("press any key to start again, or x to exit.") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T19:29:21.137

这是一个可用于重新运行代码块的模板。将#code 视为一行或多行 Python 代码的占位符。

```
def my_game_code():
    #code

def foo():
    while True:
        my_game_code() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T19:32:12.047

你可以使用一个简单的`while`循环：

```
line = "Y"

while line[0] not in ("n", "N"):
    """ game here """
    line = input("Play again (Y/N)?") 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-22T06:18:07.770

```
while True:
    print('Your game yada-yada')
    ans=input('''press o to exit or any key to continue
''')
    if ans=='o':
        break 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-12T16:56:07.740

一个简单的方法也是使用布尔值，如果您是初学者（如我）更容易理解。这是我为一个小组项目所做的：

```
 restart = True

 while restart:
     #the program
     restart = raw_input("Press any key to restart or q to quit!")
     if restart == "q":
         restart = False 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-26T20:03:43.203

**您需要将代码块埋在另一个代码块中。** 请按照以下说明进行操作：

```
Step 1: Top of code def main()  
Step 2: restart = input("Do you want to play a game?").lower()    
Step 3: Next line; if restart == "yes":    
Step 4: Next line; Indent - main()    
Step 5: Next line; else:  
Step 6: Indent - exit()  
Step 7: Indent all code under def main(): 
Step 8: After all code indent. Type main() 
```

您正在做的是将代码块封装到主变量中。程序在 main() 变量中运行一次，然后退出并返回以再次运行 main 变量。重复游戏。希望这可以帮助。

```
def main():    
    import random
    helper= {}
    helper['happy']= ["It is during our darkest moments that we must focus to see the light.",
        "Tell me and I forget. Teach me and I remember. Involve me and I learn.",
        "Do not go where the path may lead, go instead where there is no path and leave a trail.",
        "You will face many defeats in life, but never let yourself be defeated.",
        "The greatest glory in living lies not in never falling, but in rising every time we fall.",
        "In the end, it's not the years in your life that count. It's the life in your years.",
        "Never let the fear of striking out keep you from playing the game.",
        "Life is either a daring adventure or nothing at all."]

    helper['sad']= ["Dont cry because it’s over, smile because it happened.",
        "Be yourself; everyone else is already taken",
        "No one can make you feel inferior without your consent.",
        "It’s not who you are that holds you back, its who you think you're not.",
        "When you reach the end of your rope, tie a knot in it and hang on."]

    answer = input ('How do you feel : ')
    print("Check this out : " , random.choice(helper[answer]))
    restart = input("Do you want a new quote?").lower()
    if restart == "yes":
        main()

    else:
        exit()
main() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-12T18:02:18.060

如何在 python 中使用用户输入 [yes/no] 重新运行代码？

**强文本**

如何在 python 中使用用户输入 [yes/no] 重新运行代码？ **强文本**

**内部代码** def main(): 尝试：

```
 print("Welcome user! I am a smart calculator developed by Kushan\n'//' for Remainder\n'%' for Quotient\n'*' for Multiplication\n'/' for Division\n'^' for power")
    num1 = float(input("Enter 1st number: "))
    op = input("Enter operator: ")
    num2 = float(input("Enter 2nd number: "))

    if op == "+":

        print(num1 + num2)
    elif op =="-":
        print(num1 - num2)
    elif op =="*":
        print(num1 * num2)
    elif op =="/" :
        print(num1 / num2)
    elif op =="%":
        print(num1 % num2)
    elif op =="//":
        print(num1 // num2)
    elif op == "^":
        print(num1 ** num2)
    else:
        print("Invalid number or operator, Valid Operators < *, /, +, -, % , // > ")

except ValueError:

    print("Invalid Input, please input only numbers")

restart = input("Do you want to CALCULATE again? : ")

if restart == "yes":

    main()

else:
    print("Thanks! for calculating keep learning! hope you have a good day :)")

    exit() 
```

main() **强文本**

您可能会尝试运行整个代码，并允许用户键入“是”或“否”以再次运行程序而无需手动运行它。这是我使用过这个东西的“计算器”的代码。那是你的解决方案吗？

顺便说一句，这是我学习应用此功能的参考链接。 [https://www.youtube.com/watch?v=SZdQX4gbql0&t=183s](https://www.youtube.com/watch?v=SZdQX4gbql0&t=183s)*

# three.js - 平面中的顶点没有位置？

> ID：11459104
> 
> 赞同：3
> 
> 时间：2012-07-12T19:21:45.540
> 
> 标签：three.js

我有一个可能很愚蠢的问题。我试图遍历平面的顶点。为什么这行不通。我收到“未捕获的类型错误：无法设置未定义的属性‘x’”错误。

```
plane = new THREE.Mesh(new THREE.PlaneGeometry(100,100, 10, 10), planeMat);

//Set up heightmap for plane
var vertices = plane.geometry.vertices;
var l = vertices.length;
for ( var i = 0;i < l;i++){
    vertices[i].position.x = Math.random()*50;
}

scene.add(plane); 
```

呈现[http://jsfiddle.net/sJESN/](http://jsfiddle.net/sJESN/)的整个代码取消注释上述循环中的注释行以获取错误。

感谢您的帮助，我已经为此发疯了 3 天！对不起任何菜鸟的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:46:03.867

作为所有几何对象的一部分的顶点数组没有位置成员。位置变量是 Object3D 的成员，它是一个 THREE.Vector3。顶点数组实际上*本身就是*一个 THREE.Vector3 数组，因此您只需更改此行

```
vertices[i].position.x = Math.random() * 50; 
```

到...

```
vertices[i].x = Math.random() * 50; 
```

# python - 如何在具有 Decimal 类型值的 pandas TimeSeries 上使用 mean 方法？

> ID：11459106
> 
> 赞同：5
> 
> 时间：2012-07-12T19:21:46.577
> 
> 标签：python, decimal, dataframe, pandas

我需要将 Python 十进制类型值存储在 pandas `TimeSeries`/`DataFrame`对象中。在 TimeSeries/DataFrame 上使用“groupby”和“mean”时，Pandas 给我一个错误。以下基于浮点数的代码运行良好：

```
[0]: by = lambda x: lambda y: getattr(y, x)

[1]: rng = date_range('1/1/2000', periods=40, freq='4h')

[2]: rnd = np.random.randn(len(rng))

[3]: ts = TimeSeries(rnd, index=rng)

[4]: ts.groupby([by('year'), by('month'), by('day')]).mean()
2000  1  1    0.512422
         2    0.447235
         3    0.290151
         4   -0.227240
         5    0.078815
         6    0.396150
         7   -0.507316 
```

但是如果使用十进制值而不是浮点数做同样的事情，我会得到一个错误：

```
[5]: rnd = [Decimal(x) for x in rnd]       

[6]: ts = TimeSeries(rnd, index=rng, dtype=Decimal)

[7]: ts.groupby([by('year'), by('month'), by('day')]).mean()  #Crash!

Traceback (most recent call last):
File "C:\Users\TM\Documents\Python\tm.py", line 100, in <module>
print ts.groupby([by('year'), by('month'), by('day')]).mean()
File "C:\Python27\lib\site-packages\pandas\core\groupby.py", line 293, in mean
return self._cython_agg_general('mean')
File "C:\Python27\lib\site-packages\pandas\core\groupby.py", line 365, in _cython_agg_general
raise GroupByError('No numeric types to aggregate')
pandas.core.groupby.GroupByError: No numeric types to aggregate 
```

错误消息是“GroupByError（'没有要聚合的数字类型'）”。是否有机会在包含 Decimal 值的 TimeSeries 或 DataFrame 上使用标准聚合，如 sum、mean 和 quantileon？

为什么它不起作用，如果不可能，是否有机会获得同样快速的替代方案？

编辑：我刚刚意识到大多数其他函数（最小值、最大值、中值等）工作正常，但不是我迫切需要的平均函数:-(。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T22:26:18.750

```
import numpy as np
ts.groupby([by('year'), by('month'), by('day')]).apply(np.mean) 
```

# android - 在不同布局上具有相同内容的多个 ListView

> ID：11459115
> 
> 赞同：0
> 
> 时间：2012-07-12T19:22:24.637
> 
> 标签：android, sqlite, listview, layout, android-activity

**在不同布局上具有相同内容的多个 ListView**

所以基本上我所拥有的是两个从 SQLite DB 获取内容的 ListView。我在下面创建了一个 BaseActivity 来扩展我的其他活动以访问相同的数据。我遇到的问题是我无法显示数据，因为它们是包含这些 ListView 的两种不同布局，一个在 Dialog 中，另一个在 TabWidget 中，它们都在单独的活动中。

所以基本上......

1.  我需要知道如何在不同的活动中显示两个具有相同数据的 ListView（一个在对话框中，另一个在 TabWidget 中）
2.  我目前得到的错误是来自 SimpleCursorAdapter 中的布局仅适用于 ListViews 之一，它不会添加另一个，因为它找不到 View
3.  我不会在任何时候扩展 ListActivity

非常感谢您提前。我将随时编辑或澄清。

**我的基本活动的一部分**

```
public class BaseActivity extends Activity
{

    private SimpleCursorAdapter contactAdapter;
    public static final String ROW_ID = "row_id";
    private static ListView study_guide_list_view;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        String[] from = new String[] { "name" };
        int[] to = new int[] { R.id.study_guide_item_in_listview };
        contactAdapter = new SimpleCursorAdapter(BaseActivity.this, R.layout.study_guide_item_in_listview, null, from, to);

    }
} 
```

**这个部分是我将 ListView 添加到 TabWidget 的地方，它目前正在工作**

```
study_guide_list_view = (ListView) findViewById(R.id.list);

contactAdapter = getSimpleCursorAdapter();
study_guide_list_view.setAdapter( contactAdapter );
study_guide_list_view.setOnItemClickListener(listview_item_listener); 
```

**我试图在自定义对话框中添加 ListView（不起作用：错误出现在 study_guide_dialog_list_view.setAdapter(contactAdapter); 上）**

```
public OnClickListener save_slide_page_to_guide_btn_listener = new OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        TabbedPagesActivity.getListViewAdapter();

        dialog = new Dialog(PDFViewerActivity.this);
        dialog.setContentView(R.layout.study_guide_custom_dialog_box);
        dialog.setTitle("Select a Study Guide");
        dialog.setCancelable(true);

        study_guide_dialog_list_view = (ListView) findViewById(R.id.list);

        contactAdapter = getSimpleCursorAdapter2();
        study_guide_dialog_list_view.setAdapter( contactAdapter );
        study_guide_dialog_list_view.setOnItemClickListener(listview_item_listener);

        Button dialog_ok_btn = (Button) dialog.findViewById(R.id.dialog_ok_btn);//it says cancel though
        dialog_ok_btn.setTextSize(20);
        dialog_ok_btn.setTypeface(Typeface.createFromAsset(getAssets(), "fonts/AGENCYR.TTF"));
        dialog_ok_btn.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                dialog.dismiss();
            }
        });
        dialog.show();
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:13:07.367

哇，所以我终于想通了。问题出在自定义对话框中。而不是打电话...

```
study_guide_dialog_list_view = (ListView) findViewById(R.id.list); 
```

它需要......

```
study_guide_dialog_list_view = (ListView) dialog.findViewById(R.id.list); 
```

如果您不这样做，findViewById 将返回 null，因此会返回 NullPointerException

# asp.net-mvc - 如何使用 DataContractJsonSerializer 反序列化 JsonResult

> ID：11459122
> 
> 赞同：0
> 
> 时间：2012-07-12T19:22:44.297
> 
> 标签：asp.net-mvc, json, datacontractserializer

我有一个返回的 MVC 控制器：

```
public JsonResult ValidateUser(string siteId, string userName, string password) 
{
            UserObj userObj = new UserObj();
            userObj.Name = userName;
            return Json(JsonConvert.SerializeObject(userObj), JsonRequestBehavior.AllowGet);
} 
```

然后在客户端我有：

```
MemoryStream ms = new MemoryStream();
stream.Copy(ms);
var text = Encoding.Default.GetString(ms.ToArray()); 
```

他们输出的文本是："{\"Name\":\"Peter\"}"

尝试反序列化时，值 Name 为空。

```
DataContractJsonSerializer obj = new DataContractJsonSerializer(typeof(UserObj));
var resultUser = obj.ReadObject(stream) as UserObj; 
```

我发现问题出在反斜杠上..有关如何使其工作的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:26:15.373

代替：

```
return Json(JsonConvert.SerializeObject(userObj), JsonRequestBehavior.AllowGet); 
```

和：

```
return Json(userObj, JsonRequestBehavior.AllowGet); 
```

# html - 将 div 居中

> ID：11459124
> 
> 赞同：0
> 
> 时间：2012-07-12T19:22:48.357
> 
> 标签：html, css

简单的一个似乎不想工作..

我想在一个 100% 宽的 div 中居中一个 div。

HTML。

```
<div id="body-outside">
    <div id="body-inside">
        content
    </div>
</div> 
```

CSS。

```
#body-outside{
    width:100%;
    float:left;
    background-color:#F7B3DA;
}

#body-inside{
    width:1280px;
    margin:0 auto;
    background-color:#F7B3DA;
    float:left;
} 
```

内容目前停留在屏幕左侧。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:24:54.440

摆脱`float:left;`. 尽管将边距设置为自动，但这会将其推向左侧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:27:13.707

您可能还想考虑在正文外部使用 text-align: center 。

# notepad++ - 更改崇高文本中的运算符颜色？

> ID：11459126
> 
> 赞同：3
> 
> 时间：2012-07-12T19:22:52.157
> 
> 标签：notepad++, text-editor, sublimetext2

在记事本++中，我可以更改特殊字符的颜色，例如“！@#$%^&*(){}[]。

这可能与崇高的文字？我知道它使用 textmate 主题文件，但我不知道我应该编辑什么......

任何想法 ？

PS：我主要使用 C++ 语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:21:40.300

我有点晚了，但是要更改 Sublime Text 中的运算符颜色，您必须编辑您的配色方案文件（`.tmTheme`文件类型）。只要您使用的语言的语言定义以您想要的符号分类为运算符的方式编写，这应该可以解决问题。

将以下代码添加到当前`.tmTheme`文件的末尾（`Packages/Color Scheme - Default/`如果您使用的是默认值之一，则位于 ；其他代码将在它们自己的子目录中或在 中`Packages/User/`），就在最终`</array>`标记之前：

```
<!-- Custom operator colors -->
<dict>
    <key>name</key>
    <string>Custom Operator Colors</string>
    <key>scope</key>
    <string>keyword.operator</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <!-- Your hexadecimal color code here -->
        <string>#FFFFFF</string>
    </dict>
</dict> 
```

这将使用您想要的任何颜色值对分类为`keyword.operator`（基于[TextMate 命名约定）的代码进行着色。](http://manual.macromates.com/en/language_grammars#naming_conventions)只要您使用相同的配色方案，此解决方案将适用于所有语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T07:03:16.930

Sublime Text 的 C++ 语言文件中似乎没有列出运算符，所以我认为您需要先添加它们。

向文件*%SUBLIMEDIR% / Packages / C++.sublime-package / C++.tmLanguage*添加以下内容：

```
<dict>
    <key>match</key>
    <string>\=|\+|\-|\*|\%|\+\+|\-\-|\=\=|\!\=|&lt;|&gt;|&lt;\=|&gt;\=|\!|&amp;&amp;|\|\||\~|&amp;|\||\^|&lt;lt;|&gt;&gt;|\+\=|\-\=|\*\=|/\=|\%\=|&amp;\=|\|\=|\^\=|&lt;&lt;\=|&gt;&gt;\=|\[|\]|\(|\)|\-&gt;|\-&gt;\*|\.|\.\*|\?|\:|\:\:</string>
    <key>name</key>
    <string>keyword.operator</string>
</dict> 
```

...在进行类似条目的地区。这应该涵盖大多数 C++ 运算符。

之后 Protractor Ninja 建议的编辑应该生效。不过，我还没有彻底测试过，复杂的正则表达式可能会更好。

# php - SimpleXML 命名空间或 SemiColin

> ID：11459134
> 
> 赞同：2
> 
> 时间：2012-07-12T19:23:21.513
> 
> 标签：php, xml

我在使用 PHP 的 SimpleXML 获取命名空间（或半科林）项目时遇到问题。我已经通过谷歌进行了一些挖掘，并尝试了喜欢 asXML 的方法，但我回到了第一方。

**我无法获取的部分 <内容：编码>**

```
http://content.sportsdatallc.com/?feed=rss2&cat=364 
```

**PHP**

```
$xml = new SimpleXMLElement($response, LIBXML_NOCDATA);
print_r($xml); 
```

我可以得到我需要的所有节点，除了上面的那个。如果我 print_r 它不显示。

**我也试过这个：**

```
$xml = new SimpleXMLElement($response, LIBXML_NOCDATA);
foreach ($xml->channel->item as $item)
{
    echo 11;
    $art = $item->children('content:encoded');
    print_r($art);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:37:43.790

简单的解决方案 str_replace 内容：用内容编码。

```
$xml = str_replace('content:encoded>', 'content>', $xml); 
```

它可能不是最好的解决方案，但它很简单并且有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:27:55.173

你需要：

```
foreach($xml->channel->item as $item) {
  $contentNodes = $item->children('content',true);
   ...
} 
```

看看这个类的命名空间。

# c# - 检查控件类型

> ID：11459135
> 
> 赞同：23
> 
> 时间：2012-07-12T19:23:25.553
> 
> 标签：c#, asp.net, interface, casting

我能够在打印时在页面中获取页面的所有控件的 ID 及其类型，它显示

```
myPhoneExtTxt Type:System.Web.UI.HtmlControls.HtmlInputText 
```

这是基于此代码生成的

```
 foreach (Control c in page)
    {
        if (c.ID != null)
        {
            controlList.Add(c.ID +" Type:"+ c.GetType());
        }
    } 
```

但是现在我需要检查它的类型并访问其中的文本，如果它的类型是 HtmlInput 并且我不太确定该怎么做。

喜欢

```
if(c.GetType() == (some htmlInput))
{
   some htmlInput.Text = "This should be the new text";
} 
```

我该怎么做，我想你明白了吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-12T19:26:07.867

如果我得到您的要求，这应该就是您所需要的：

```
if (c is TextBox)
{
  ((TextBox)c).Text = "This should be the new text";
} 
```

如果您的主要目标是设置一些文本：

```
if (c is ITextControl)
{
   ((ITextControl)c).Text = "This should be the new text";
} 
```

为了支持隐藏字段：

```
string someTextToSet = "this should be the new text";
if (c is ITextControl)
{
   ((ITextControl)c).Text = someTextToSet;
}
else if (c is HtmlInputControl)
{
   ((HtmlInputControl)c).Value = someTextToSet;
}
else if (c is HiddenField)
{
   ((HiddenField)c).Value = someTextToSet;
} 
```

必须将其他控件/接口添加到逻辑中。

# regex - 使用正则表达式重定向带有查询字符串的 url

> ID：11459141
> 
> 赞同：0
> 
> 时间：2012-07-12T19:23:55.880
> 
> 标签：regex, redirect, zeus

我将网站上的旧网址重定向到不同网站上的新网址。它使用 Zeus 网络服务器，前两条规则运行良好。然而，它似乎并没有与第三个网址打球，其中有一个查询字符串......关于如何解决这个问题的任何想法？好像我可能需要一个正则表达式来处理特殊字符`?`，因为如果我把它从比赛中去掉，它就可以正常工作。谢谢

```
match URL into $ with ^/$
if matched
set OUT:Location = http://www.website.co.uk/
set OUT:Content-Type = text/html
set RESPONSE = 301
set BODY = Moved
goto END
endif

match URL into $ with ^/index.php$
if matched
set OUT:Location = http://www.website.co.uk/
set OUT:Content-Type = text/html
set RESPONSE = 301
set BODY = Moved
goto END
endif

match URL into $ with ^/index.php?cPath=1_50$
if matched
set OUT:Location = http://www.website.co.uk/categories.php?category=Boilers
set OUT:Content-Type = text/html
set RESPONSE = 301
set BODY = Moved
goto END
endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:55:28.690

我不熟悉 Zeus url 重写。但如果它使用标准正则表达式，则需要`?`用反斜杠转义。

```
match URL into $ with ^/index.php\?cPath=1_50$ 
```

问号通常是一个元字符，它修改前面的字符或表达式，使其成为可选的。所以你现在的模式将匹配`/index.phpcPath=1_50`or `/index.phcPath=1_50`。

# c# - 构造函数参数的正确数量是多少？/ 我怎样才能结合这些课程？

> ID：11459142
> 
> 赞同：0
> 
> 时间：2012-07-12T19:24:04.357
> 
> 标签：c#, oop

首先，我有一个如下所示的类签名：

```
internal class JobStore : IJobStore
{
    private readonly IFileHandler fileHandler;
    private readonly IJobSerializer serializer;
    private readonly IJobValidator validator;
    internal readonly string DirectoryPath = "JobStore";
    internal readonly string JobExtension = ".job";

    public JobStore(IFileHandler fileHandler, IJobSerializer jobSerializer, IJobValidator jobValidator)... 
```

我有点想将 DirectoryPath 和扩展名删除到他们自己的类中，但我不太确定。我确实认为在构造函数中有四个对象是个坏主意。

我的问题是如何将其中两个对象组合起来以减少我在此方法中使用的参数数量，三个太多了吗？

为问题的模糊性道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:32:02.440

看起来您应该[重构为 Aggregate Services](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:36:51.513

构造函数中的 4 个对象并不算多。没有特定数量的参数算作“太多”

请注意，对于您可能希望或可能不希望使用构造函数的事物，还有其他更灰色的标准，但具体的参数计数不是您应该关注的地方。

只要确保你的类代表某种名词，你会没事的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:46:43.667

你可以有一个带有多个参数的构造函数，没关系。其实三个是少数参数，也许你会有n个参数的方法和构造函数，只要你需要它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:48:55.893

如果您在使用它时担心所需参数的数量，那么使用默认参数可能会有所帮助。

这样，如果您发现自己只更改了一个或两个参数并在所有其他时间使用默认值，则在更新时不必传递这么多参数。

但是，这不会从构造函数本身中取出参数。

所以，我不确定你在找什么，但也许这可能会对你有所帮助。:)

[http://msdn.microsoft.com/en-us/library/dd264739.aspx](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

# xamarin.ios - 对 Monotouch 中的事件、代表等感到困惑

> ID：11459144
> 
> 赞同：4
> 
> 时间：2012-07-12T19:24:09.480
> 
> 标签：xamarin.ios

我来自非常精通的 Windows .NET 背景，我正在尝试使用 Monotouch，但我对如何响应事件感到非常困惑。我喜欢保持简单，我已经阅读了 Montouch 教程并查看了示例。我感到困惑的是如何响应事件。

假设我有一个带有 UIButton 和 UILabel 的 ViewController。当我按下按钮时，我想将标签更改为“单击按钮”。

因此，我可以执行以下操作：

```
public override void ViewDidLoad () {
     base.ViewDidLoad ();
     this.btnClickMe.TouchUpInside += (sender, e) => {
         this.lblOutput.Text = "Clicked @ " + DateTime.Now.ToShortTimeString ();
} 
```

或者，我可以使用这种方法，我认为在响应 NavigationBars 等中按下的按钮时会更好地为我服务。在 IB 中，我 Ctrl-Drag 创建一个动作。然后我将 [Action] 方法移动到我的 .cs 文件并执行以下操作。

```
[Action ("btnClickMe_TouchUpInside:")]
public void btnClickMe_TouchUpInside (NSObject sender)
{
    this.lblOutput.Text = "Clicked @ " + DateTime.Now.ToShortTimeString ();
} 
```

让我更困惑的是一些 UI 组件有一个 .delegate 成员。我可以添加一个事件。

什么是最好的方法，还是我完全糊涂了？如果是这样，有一个链接，您可以将我引导到我可以学习最佳实践、正确方法等的地方。

非常感谢

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:23:03.943

对于一个好的介绍，我推荐 Xamarin 关于[事件、协议和委托](http://docs.xamarin.com/ios/tutorials/Events,_Protocols_and_Delegates)的文章。

至于您将 Action Outlets 与将事件连接到 Reference Outlets 的问题，他们有这样的说法：

> 使用 .NET 事件与使用目标操作的主要区别在于，后者允许您将多个控件连接到单个操作方法。

所以，如果你正在构建一个快速而肮脏的计算器，你可能倾向于使用动作方法，并且按下数字 0-9 都做同样的事情——你可以从按钮上读取数字。（如果您曾经使用 VB 创建控件数组，您可能对这种技术很熟悉。）

也就是说，我发现我个人的偏好是坚持使用参考网点。它需要更少的思考和在 MonoDevelop 和 Interface Builder 之间来回走动。我放入一个 UISlider 并引用它，然后我可以从代码中访问它的所有属性和事件。因此，稍后可以从代码中进行挂钩。许多开发人员评论说他们倾向于不再使用 IB...

回到事实，MonoTouch 提供了多种与 UI 交互的冗余方式。对于那些来自 Objective-C 的人，你会发现熟悉的“Objective-C Delegates”和对“selectors”的引用。来自 C#，您通常可以忽略这些方法。但是，您应该花时间阅读那篇文章，以便熟悉 Apple 文档中使用的语言。例如，重要的是要注意“Objective-C Delegates”和“C# delegates”之间的区别。

> 委托用于 iOS 中的回调，类似于 .NET 使用事件的方式。为了使 iOS API 及其使用 Objective-C 委托的方式看起来更像 .NET，MonoTouch 在 iOS 中使用委托的许多地方公开了 .NET 事件。

随着时间的推移，我相信您会发现 API 灵活且适用于 .NET 模式。NS 类型和 .NET 类型之间的转换通常是透明的（例如，从 lambda 表达式到 NSAction）。

如果您需要更具体的信息，请告诉我。干杯。

# delphi - 使用 jquery 和 AJAX 传递 DataSnap 身份验证凭据

> ID：11459148
> 
> 赞同：1
> 
> 时间：2012-07-12T19:24:18.397
> 
> 标签：delphi, jquery, delphi-xe2, datasnap

我正在尝试构建一个 Delphi XE2 DataSnap Rest 服务器，用作访问我们 DBMS 的第 3 方 API。

我已经扩展了在 xe2 中使用带有身份验证和授权的 rest datasnap 向导时提供的示例方法的功能。

我可以确认，我编写的所有服务器方法在直接通过浏览器访问时都会传回预期的数据。

问题来自尝试通过 $.ajax() 调用对服务器进行身份验证。

从浏览器地址栏访问时，系统会提示您输入用户名和密码，当您同时输入“dev”时，您可以继续。

将 ajax() 用户名​​和密码参数设置为“dev”时，我收到了 HTTP 401 响应。

我想我做得对，但这里是代码片段：

```
$("#contentdiv").click(function(){
        $.ajax({
            type:"GET",
            cache:"false",
            username:"dev",
            password:"dev",
            url:"http://192.168.0.2:8080/datasnap/rest/TServerMethods1/methodname/",
            dataType:"jsonp",
            statusCode: {
                200: function(data){
                    alert('success ');
                }
            }               
        });
}); 
```

如果我关闭身份验证，我可以成功获得 HTTP 200 响应（尽管返回的 JSON Delphi DataSnap 中有语法错误，但这是一个不同时间的问题）。

另外，值得知道的是 - 如果我手动登录然后运行 ​​ajax，它可以工作 - 我假设这是因为凭据被缓存或类似的。

这两种技术都很新，所以要温柔。如果我遗漏了一些可能很重要的东西，请告诉我，我会在这里找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:04:13.697

您的 Ajax 代码使用 JSONP，服务器使用基本身份验证。

对此[答案](https://stackoverflow.com/a/3571126/80901)的评论说 JSONP 不能包含基本身份验证所需的 USER / PWD 标头：

[使用 jQuery.ajax 请求和 jsonp 进行基本身份验证](https://stackoverflow.com/questions/3571090/basic-authentication-with-jquery-ajax-request-and-jsonp)

原因是（引用上面的答案）：

> JSONP 的工作方式不同，它是通过标签包含的 GET 请求来获取文件，因此您不会发送特殊的标头或任何东西。

# c# - 将 StdError 流镜像到日志文件

> ID：11459149
> 
> 赞同：0
> 
> 时间：2012-07-12T19:24:23.480
> 
> 标签：c#, file, console, mirroring, tracelistener

我希望能够将我的应用程序的所有控制台输出记录到文本文件中。我已经实现了 ConsoleTraceListener 和 TextWriterTraceListener，如以下帖子中所述：将 [控制台输出镜像到文件](https://stackoverflow.com/questions/420429/mirroring-console-output-to-a-file)

这适用于所有正常的控制台输出。但是，我还希望 StdError 流显示在日志文件中。我用一些最终抛出 DivideByZeroException 的简单代码进行了测试（代码如下所示）。使用上面帖子中建议的实现，错误消息会显示在控制台中，但不会显示在日志文件中。

有没有人对如何实现这一点有建议？请注意，我不希望重定向 Stderror 流。理想情况下，错误消息将同时显示在控制台和日志文件中。

在此先感谢您的任何建议！

```
Trace.Listeners.Clear();
string logfilePath = @"Q:\logfile.txt";
TextWriterTraceListener log_tracer = new TextWriterTraceListener(logfilePath);
log_tracer.TraceOutputOptions = TraceOptions.ThreadId | TraceOptions.DateTime;
ConsoleTraceListener console_tracer = new ConsoleTraceListener(false);
console_tracer.TraceOutputOptions = TraceOptions.DateTime;
Trace.Listeners.Add(log_tracer);
Trace.Listeners.Add(console_tracer);
Trace.AutoFlush = true;

Trace.WriteLine("HELLO THIS IS TO TEST THE TRACE LISTENER");
for (int a = 5; a >= 0; a--) {
    Trace.WriteLine(50 / a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:16:31.673

为了任何有同样问题的人的利益，这就是我最终解决问题的方法：

我基本上实现了一个异常处理程序并将 Trace.WriteLine() 放在代码的 catch 部分中。例如：

```
try {
    // Code that can potentially create StdError message
}
catch (Exception ex) {
    Trace.WriteLine(ex.ToString());
} 
```

希望对您有所帮助，以防万一有人遇到同样的问题！

# ios - 状态为“已上传”时拒绝二进制文件

> ID：11459151
> 
> 赞同：7
> 
> 时间：2012-07-12T19:24:26.653
> 
> 标签：ios, app-store, app-store-connect

在我发现一个需要拒绝二进制文件并上传新文件的小问题后不久，我上传了我的二进制文件以供审核。

在我的应用详细信息中，二进制详细信息链接不存在，因此我无法拒绝二进制文件。我想知道这是应该的方式还是这是 iTunes Connect 中的错误。还有没有其他方法可以拒绝这个二进制文件，而不必等待其状态更改为“等待审查”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T17:21:29.950

我必须等到应用程序状态更改为“等待审核”才能拒绝二进制文件。问题是它长时间停留在“已上传”状态。

# javascript - requestAnimationFrame 在 Firefox 中占用 CPU

> ID：11459156
> 
> 赞同：1
> 
> 时间：2012-07-12T19:24:50.383
> 
> 标签：javascript, firefox, coffeescript, sticky, requestanimationframe

因此，我正在使用 Paul Irish 的 requestAnimationFrame 在页面上制作侧边栏“粘性”。我发现至少在 webkit 浏览器中，这比 Waypoints 等其他解决方案带来了巨大的性能改进。但是，我在 Firefox 上注意到，当我开始滚动页面时，CPU 会飞过屋顶，因此页面速度非常慢。我是在执行这个错误，还是需要为 Firefox 使用另一种方法？

```
 (function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame =
          window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); },
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}());

window.widget_is_sticky = false;
window.widget_is_locked = false;

$(function(){

  (function animloop() {
    requestAnimationFrame(animloop);
    if (adjust_networth) {
      if (self.pageYOffset) {
        yScroll = self.pageYOffset;
      } else if (document.documentElement && document.documentElement.scrollTop) {
        yScroll = document.documentElement.scrollTop;
      } else if (document.body) {// all other Explorers
        yScroll = document.body.scrollTop;
      }
      update_networth_position(yScroll);
    }
  })();
});

// Separate file written in CoffeeScript
window.update_networth_position = ( offset ) ->
  if offset >= 259
    if !window.widget_is_sticky
      window.widget_is_sticky = true
      $('.widgets').addClass 'sticky'
    else if !window.widget_is_locked and widget_is_at_boundary(offset)
      window.widget_is_locked = true
      $('.widgets').addClass 'locked'
    else if !widget_is_at_boundary(offset) and window.widget_is_locked
      window.widget_is_locked = false
      $('.widgets').removeClass 'locked'
  else
    return false if !window.widget_is_sticky

    $('.widgets').removeClass 'sticky'
    window.widget_is_sticky = false

widget_is_at_boundary = ( offset ) ->
  offset = offset - $('section.top-section').outerHeight(true)
  maximum_height = $('section.main-content div.content:first-child').outerHeight(true)
  widget_height  = $('section.main-content .widgets').outerHeight(true)

  if (offset + widget_height) > maximum_height
    return true
  else
    return false 
```

非常感谢任何帮助！对于如何解决这个问题，我也对完全不同的解决方案持开放态度（但 Waypoints 的性能不足以很好地工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:28:49.157

对不起，虚惊一场。事实证明，性能影响来自我使用的背景 css 技术。requestAnimationFrame 这次是安全的 :)

# javascript - 基于单选按钮选择的互斥元素

> ID：11459161
> 
> 赞同：1
> 
> 时间：2012-07-12T19:24:57.980
> 
> 标签：javascript, jquery, forms

我想根据单选按钮选择来切换两个表单字段的启用/禁用。没有发生。看看，请告诉我大脑皮层的哪一部分需要发育。- [http://jsfiddle.net/KggHA/3/](http://jsfiddle.net/KggHA/3/)。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:32:07.267

尝试这个：

```
function initPopupInputsEffect() {
    if ($('input[name=ruleType]:checked').val() == "Banana") {
        $("#AppleBoat").attr('disabled', true);
        $("#BananaBoat").attr('disabled', false);
    }
    else { 
        $("#BananaBoat").attr('disabled', true);
        $("#AppleBoat").attr('disabled', false);
    }
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/KggHA/4/)**

您需要查找 :checked 单选按钮，然后将 disabled 属性相应地设置为 true 或 false，而不是删除它。

# json - 使用 jQuery ajax 调用发出 api 请求时，数据没有很好地转换为查询字符串参数

> ID：11459163
> 
> 赞同：1
> 
> 时间：2012-07-12T19:25:01.313
> 
> 标签：json, jquery, query-string

```
 $.ajax({
                type: "GET",
                async: false,
                url: "http://localhost:1234/api/",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: '{"id":"125"}',
                success: function (data) {
                    console.log(data.toString());
                }
            }); 
```

当我使用 jQuery ajax 调用调用 api 时，我传递的数据没有很好地转换为查询字符串参数。

这就是我看到的所谓的。

```
http://localhost:1234/api/?{%22id%22:%22125%22} 
```

但是，例如，当我将数据作为对象传递时， data: {"id":"125"} 可以正常工作。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:36:48.663

您将数据作为 js 对象传递，而 jQuery 将其转换为 JSON 格式，因为您指定了 JSON 数据类型。

```
 $.ajax({
       type: "GET",
       async: false,
       url: "http://localhost:1234/api/",
       contentType: "application/json; charset=utf-8",
       dataType: "json",
       data: {"id": 125},
       success: function (data) {
            console.log(data.toString());
       }
  }); 
```

# ruby-on-rails-3 - 在请求之间存储 Omniauth 身份验证数据？

> ID：11459164
> 
> 赞同：1
> 
> 时间：2012-07-12T19:25:04.680
> 
> 标签：ruby-on-rails-3, omniauth

1.  用户使用传统的电子邮件和密码登录。
2.  该用户单击“与 Facebook 连接”按钮。
3.  他们使用与他们当前登录我网站时使用的电子邮件地址**不同**的电子邮件地址在facebook 上进行身份验证。
4.  我向他们展示了一个页面，询问他们是否想更新他们的传统登录以使用他们的 Facebook 电子邮件（也允许我统一帐户并使用 Facebook 填写任何缺失的数据）。

问题出在第 4 步，因为omniauth 回调 URL`sessions#create`与存储在`request.env['omniauth.auth']`.

的相关位`sessions_controller`：

```
def create
  return link_accounts if signed_in?

  if params[:email]
    create_session_from_login
  elsif env['omniauth.auth']
    create_session_from_facebook
  else
    redirect_to login_path, alert: "Couldn't login!"
  end
end 

private

def link_accounts
  auth = env['omniauth.auth']
  redirect_to user_link_accounts_path current_user unless current_user.email == auth[:info][:email]
end 
```

...这会将我带到我的用户控制器，它会显示一条可爱的小消息，提示用户（a）以其他用户身份登录我的网站，或（b）更新他们的帐户以使用此 Facebook 信息...除了我再也无法访问`request.env['omniauth.auth']`.

如何在请求之间保留身份验证信息？它太大了`session`......我也希望它在用户在页面上执行操作后可以到达它（例如，单击链接 - 所以我可以在实际 FB 身份验证之后在服务器端对它们进行身份验证已经发生），但我不想将它存储在页面上......

# android - 访问主屏幕并打开一个新应用程序而不退出在 Android 手机上打开的应用程序

> ID：11459166
> 
> 赞同：0
> 
> 时间：2012-07-12T19:25:06.547
> 
> 标签：android

假设 program1 已打开。我想访问主屏幕并打开program2而不关闭program1。

这个怎么做？

我的三星 Galaxy Note 有一个主页按钮，但是当我在程序打开时按下它时，只能访问我最近使用的应用程序。

谢谢奥兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:19:30.533

除非应用程序设计为在后台运行，否则它不能在 Android 上“最小化”。要打开另一个应用程序，当前应用程序必须暂停或退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:42:02.130

不确定这是否是您要求的：

> 如果一个活动失去焦点但仍然可见（也就是说，一个新的非全尺寸或透明活动的焦点位于您的活动之上），它会被暂停。暂停的活动是完全活动的（它维护所有状态和成员信息并保持连接到窗口管理器），但可以在内存极低的情况下被系统杀死。
> 
> 如果一个活动被另一个活动完全遮挡，它就会停止。它仍然保留所有状态和成员信息，但是，它不再对用户可见，因此它的窗口是隐藏的，并且当其他地方需要内存时，它通常会被系统杀死。

换句话说，如果您的应用程序不在第一个计划中，系统将决定是否必须关闭它（取决于您的系统资源）

请检查[此](http://developer.android.com/reference/android/app/Activity.html)以获取更多详细信息。

# android - 如何在android textview中选择一个单词

> ID：11459168
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:25:08.897
> 
> 标签：android, textview

在以下情况下，我如何在 textview 中获得特定单词的确切值：1 - 用户已录制了该单词（该单词可能只是某些文本块中的许多单词之一），2 - textview 在其 xml 布局中，android :textIsSelectable="true" ，因此默认情况下，android 允许用户突出显示特定单词并打开一个小菜单（复制、粘贴、共享）。我可以操作这个菜单或者添加更多选项以扩展它并使用突出显示的单词做我想做的事情吗？

我需要根据与用户的一些交互来获得确切的单词（点击、点击、选择....）

我没有找到任何直接的答案。有可能吗？

（我有 android htc 一个 x）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:21:11.843

更适合用于您的场景的组件是`EditText`.

它在您的清单文件中声明如下：

```
<EditText 
android:text=" This is not an editable EditText" 
android:id="@+id/EditText01" 
android:layout_width="wrap_content" 
android:textColor = "@android:color/white"
android:editable = "false"
android:cursorVisible="false"
android:layout_height="wrap_content"
android:background = "@android:drawable/dark_header">
</EditText> 
```

然后，只需要两行代码就可以得到选中的文本：

```
EditText et = (EditText)findViewById(R.id.title);
String selectedText = et.getText().substring(et.getSelectionStart(), et.getSelectionEnd()); 
```

在这里，我们假设文本是从左到右选择的。如果它是从右到左选择的，那么上面会导致异常，因此您可以通过检查开始位置是否高于结束位置来避免这种情况。

# c# - XP和Win7之间Management.ManagementObject的区别

> ID：11459173
> 
> 赞同：0
> 
> 时间：2012-07-12T19:25:38.727
> 
> 标签：c#, windows, vb.net, windows-7, windows-xp

我设置了两个操作系统，一个 win7 和一个 XP，它们都在同一个**WORKGROUP**中（它们都不是这样的域）

我正在尝试使用以下代码获取计算机的工作组名称：

```
VB.NET:

Public Function GetWorkGroup() As String
    Dim computer_system As New Management.ManagementObject(String.Format("Win32_ComputerSystem.Name='{0}'", Environment.MachineName))
    Dim result As Object = computer_system("Workgroup")
    Return result.ToString()
End Function

C#:

public string GetWorkGroup()
{
    Management.ManagementObject computer_system = new management.ManagementObject(string.Format("Win32_ComputerSystem.Name='{0}'",   Environment.MachineName));
    object result = computer_system("Workgroup");
    return result.ToString();
} 
```

这在 Win7 上确实有效，但在 XP computer_system("Workgroup") 上没有任何结果。如果我想让它工作，我必须进行以下修改：

```
VB.NET:
        Dim result As Object = computer_system("Domain")
C#:
        object result = computer_system("Domain"); 
```

这适用于 Win7 和 XP，返回正确的工作组名称，但如果我在 XP 上用 Domain 属性返回工作组名称，显然有些问题。

有人可以解释一下为什么 XP 将其工作组作为域处理吗？谢谢。

# ruby - Watir Webdriver ECONNRESET 错误

> ID：11459174
> 
> 赞同：2
> 
> 时间：2012-07-12T19:25:39.417
> 
> 标签：ruby, webdriver, watir, watir-webdriver

我收到此错误

```
C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': An existing connection was forcibly closed by the remote host. (Errno::ECONNRESET)
    from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:141:in `rbuf_fill'
    from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
    from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1293:in `request'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1064:in `head'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/chrome/service.rb:63:in `block in stop'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:557:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/chrome/service.rb:59:in `stop'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/chrome/bridge.rb:50:in `quit'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.24.0/lib/selenium/webdriver/common/driver.rb:166:in `quit'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:87:in `close'
    from test_google.rb:9:in `block in <main>'
    from test_google.rb:5:in `times'
    from test_google.rb:5:in `<main>' 
```

每当我连续运行测试时。我相信这是一个 webdriver/selenium 错误，但希望有人可以帮助我修复或确定原因。

以下是一些您可以尝试在 irb 中运行的代码：

```
20.times { b = Watir::Browser.new :chrome; b.goto "http://google.com"; p b.div.exists?; b.close;} 
```

编辑：我更新了我的[ChromeDriver](http://code.google.com/p/chromedriver/downloads/list)并且没有收到上述代码的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:28:14.883

为了解决这个问题，请尝试更新您的 Chrome 驱动程序：[http ://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

# android - 可以运行 Android 2.0 应用程序的最高 Android 版本是哪个？

> ID：11459175
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:25:40.627
> 
> 标签：android, version, backwards-compatibility

我正在使用使用 android V2.0 的教科书。你能告诉我哪个版本的 android 可以运行 2.0 版的应用程序没有任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:11:16.277

如果您只想*运行*应用程序，那么任何具有 API 级别 5 (Android 2.0) 及更高版本（包括 Jelly Bean 和任何未来版本）的设备都可以毫无问题地运行您的应用程序。开发人员文档在[此处提供 API 级别指南](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)。

但是，您应该熟悉 Android 的后续版本，以便您可以就应该使用的版本以及无法使用的功能做出明智的决定。

例如，您可以在[Supporting Multiple Screen Sizes](http://developer.android.com/guide/practices/screens_support.html)页面上看到 Android 3.2（API 级别 13）引入了支持多种屏幕尺寸的新功能。如果您使用 API 级别 5，您的应用程序可能无法在某些设备（即平板电脑）上正确扩展。

尽管尝试支持尽可能多的设备是很有诱惑力的，但使用较低的 API 级别肯定需要权衡取舍。对于某些应用程序，是否正确扩展并不重要，但在选择目标或最低 API 级别时需要考虑这一点。

# python - 在 django 中动态创建字段

> ID：11459176
> 
> 赞同：0
> 
> 时间：2012-07-12T19:25:40.737
> 
> 标签：python, django, tastypie, composite-primary-key

我有两张桌子（比如父母和孩子）。我希望父母和孩子使用外键相互链接。子表有两个字段，其中一个是“country_sig”。这个 country_sig 实际上是通过连接**父表中**名为**'country'**和**'code' 的**两个字段制成的。例如：如果 country 是 'IN' 并且 code 是 '15' 那么 country_sig 是**IN.15**。

现在我希望在为父表创建 django 模型期间，它应该自动创建**从“国家”和“代码”派生**的这个字段 country_sig ，以便我可以将其引用到子表。

PS：由于父表非常大，我不想在从这两个字段派生的数据库中创建另一个字段，但我可以调整另一个表（子表）以将 country_sig 字段分为两列' 和 'code' 但这不起作用，因为 django 不支持复合主键。

**编辑**：实际上我是在美味派中实现它，我希望美味派认为它是一个真实的领域。这将解决我真正的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:13:18.503

也许不要使用标准的 tasypie ModelResources，而是编写自己的资源：

```
class DictWrapper(object):
    '''
    to be used as generic tastypie resource object 
    '''
    def __init__(self, initial=None):
        self.__dict__['_data'] = {}

        if hasattr(initial, 'items'):
            self.__dict__['_data'] = initial

    def __getattr__(self, name):
        return self._data.get(name, None)

    def __setattr__(self, name, value):
        self.__dict__['_data'][name] = value

    def to_dict(self):
        return self._data

class ParentResource(Resource): 
    def get_object_list(self, request):        
        ret = []
        for parent in Parent.objects.all():
            ret.append(DictWrapper({"country_sig":"{0}.{1}".format(parent.country, parent.code})))
        return return

    def obj_get_list(self, request=None, **kwargs):      
        return self.get_object_list(request) 
```

# google-app-engine - 在数据存储实体中搜索的最佳方式是什么？

> ID：11459177
> 
> 赞同：3
> 
> 时间：2012-07-12T19:25:45.307
> 
> 标签：google-app-engine, search, full-text-search, datastore

我正在建立一个类似于黄页的网站，用户或访问者可以搜索注册公司。我的网站使用 GAE 数据存储来存储公司信息。我对我将用来在我的网站上实现全文搜索之类的方式、API 或机制感到有些困惑。我举个例子：假设我们有 3 家公司

1.  名称：name11，地址：address11，活动：activity11。
2.  名称：bla bla co. ，地址：USE Chicago ... ，活动：上门服务。
3.  名称：其他有限公司，地址：保加利亚，活动：软件开发。

我有一个搜索栏，用户输入以下文本：house serving bulgaria name11。

1.  保存公司实体的最佳方法是什么，以便在搜索时轻松获取信息？
2.  搜索我的公司财产的最佳机制是什么？
3.  我还想查看公司简介中的一些长文本，例如一些描述或其他内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:09:30.090

您应该为此使用全文搜索。替代方案，数据存储，维护起来太不灵活和昂贵（代码方面和便士方面）。

我看到您担心全文搜索是实验性的，但未来不太可能对 API 进行重大更改。我不知道未来的定价，但我认为用数据存储实现类似的功能特性不会更便宜（索引会花费你，内存搜索会花费你实例时间）

# c# - SignalR 如何公开它的集线器方法？

> ID：11459180
> 
> 赞同：0
> 
> 时间：2012-07-12T19:25:54.310
> 
> 标签：c#, signalr

我的 datatranshub 未定义。我在想，因为我正在使用 mvc 区域，而我的集线器类位于集线器方法未正确公开的区域。我需要手动指向我的集线器代理吗？

```
var datatransfer = $.connection.DataTransferHub;
console.log(datatransfer);
$.connection.hub.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:51:16.783

它们应该通过`~/signalr/hubs`在您的页面中引用为脚本来自动公开。即 URL 由 SignalR 运行时提供，并为应用程序公开的所有集线器生成代理。

如果这不起作用，请尝试`~/signalr/hubs`使用您的浏览器（或 Fiddler）点击，您应该会收到一个 JavaScript 文件。如果您不这样做，那么您可能有某种配置问题阻止 SignalR 运行时公开该资源。

# jquery - 在网络服务器上设置/保存数据

> ID：11459185
> 
> 赞同：0
> 
> 时间：2012-07-12T19:26:10.820
> 
> 标签：jquery, client-server

我有一个数据库应用程序，我想使用它`$(window).unload`来传递一组表示要返回的字段的复选框的状态。索引文件有一个包含复选框的表单。以及调用各种数据库请求的一组链接。
单击链接时，卸载操作首先将数据设置为 localStorage，然后触发`$.getJSON()`将数据传递到服务器的 a。但是，似乎链接行为是在 之前执行的`$.getJSON`，并且数据不可用，它们似乎也不共享相同的范围。
我正在寻找任何方法来允许我传递数据并使其在所有执行查询的页面上可用。任何想法将不胜感激。

# dll - Clr 程序集必须有主文件指定错误

> ID：11459186
> 
> 赞同：0
> 
> 时间：2012-07-12T19:26:13.563
> 
> 标签：dll, clr, ssas, cube, security-roles

这是我制作的第一个dll。它的目的是从数据库中获取领土名称并作为 mdx 集返回。dll 编译得非常好，但是当我将 dll 作为程序集部署到我的多维数据集时，我收到以下错误：

Clr 程序集必须有主文件指定错误

dll 应该类似于 ssas 存储过程，因此我可以在角色中为 ssas 设置权限。

谢谢！伊森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:24:12.947

我终于想出了一个解决办法！我相信由于msmgdsv.dll是framework 2.0的我不喜欢这个文件，所以我将项目属性下的目标framework从Framework 4.0更改为Framework 2.0。然后我开始从 BIDS 部署所有内容，而不是错误，它部署了！

# if-statement - mysql连接两列中的所有字段

> ID：11459190
> 
> 赞同：0
> 
> 时间：2012-07-12T19:26:24.330
> 
> 标签：if-statement, mysql-workbench, self-join

我有一个包含两列的视图：一个人的 ID（一个数字）和他们所在的部门（以数字 1-5 给出）。

我想创建一个视图来显示人们是否属于同一部门。我认为这将包含三列：ID1、ID2 和 SameSector。第一列将列出 ID，对于第 1 列中的每个 ID，第二列将列出所有 ID。第三列是 if 语句，如果两个 ID 的扇区相同，则为 1，否则为 0。这会稍微复杂一些，因为一个人可以属于多个部门。

例如：

我有：

```
身份证部门

1 1
2 1
2 5
3 1

```

我想：

```
ID1 ID2 同扇区
1 1 1
1 2 1
1 2 0
1 3 0
2 1 1
2 1 0

```

等等

我猜这涉及某种自加入和 if 语句，但我不知道如何让所有 ID 字段列在 ID1 列中并与 ID2 中的所有 ID 字段匹配有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:42:09.450

这应该是你想要的：

```
SELECT a.ID AS ID1, b.ID AS ID2, IF(a.Sector=b.Sector,1,0) AS SameSector
FROM theTable AS a, theTable AS b 
```

[http://sqlfiddle.com/#!2/f2cbc/4](http://sqlfiddle.com/#!2/f2cbc/4)

我最初有一个更复杂的查询，但后来意识到你想要一个完整的交叉连接，包括与自身比较的相同 ID。

# jquery - jQuery选择器不替换文本

> ID：11459193
> 
> 赞同：0
> 
> 时间：2012-07-12T19:26:34.893
> 
> 标签：jquery

我有一张桌子，我正在尝试替换应该是文件名 td 的兄弟文件中的文本，但它似乎不起作用。

这是我正在尝试的：

```
var current = $(".filename:contains('image.jpg')").siblings();
current.find(".filesize").text('new text'); 
```

的HTML：

```
<table id="uploadifive-fileupload-queue" class="table table-striped uploadifive-queue">
    <tbody>
        <tr class="uploadifive-queue-item complete" id="uploadifive-fileupload-file-0">
            <td class="preview">thumb</td>
            <td class="filename">image.jpg</td>
            <td class="filesize">100x100</td> 
            <td class="fileinfo">Failed</td>
            <td class="fileactions">Create Thumbnail</td>
            <td class="filedelete"><button class="btn btn-danger">Delete</button></td>
        <tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:29:44.687

在一行中

```
$(".filename:contains('image.jpg')").siblings(".filesize").text('new text'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T19:28:34.883

`current`是所有兄弟姐妹的集合。

```
current.find(".filesize") 
```

这是寻找`.filesize`作为一个孩子的`current`。相反，您希望`.filter`在集合中找到一个项目：

```
current.filter(".filesize").text('new text'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T19:30:05.000

find 仅通过子项进行搜索。不是兄弟姐妹。

如果您将其更改为...

```
var current = $(".filename:contains('image.jpg')").parent();
current.find(".filesize").text('new text'); 
```

有用

# jquery - 初始化后更新 SlickGrid 选项

> ID：11459194
> 
> 赞同：1
> 
> 时间：2012-07-12T19:26:35.780
> 
> 标签：jquery, jquery-plugins, slickgrid

我关于 SlickGrid 的问题是这样的。

如果我使用选项 { enableCellNavigation: true } 创建网格，我可以稍后编辑网格选项以将此值设置为 false 吗？

我可以通过 getOptions(); 访问选项。函数，但分配一个新值什么都不做。之后也尝试再次调用 render() 和 init() 方法，但没有改变。

想知道这是否可能？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:54:59.750

这一直对我有用：

```
grid.setOptions({
  editable: false,
  autoEdit: false
});
grid.invalidate(); 
```

# java - 将对象数组传递给 java web 服务

> ID：11459202
> 
> 赞同：2
> 
> 时间：2012-07-12T19:27:09.490
> 
> 标签：java, arrays, web-services, axis

我没有成功使用 Axis 1.4 1855（根据axis.jar manifest.mf 文件）将对象数组传递给Java Web 服务。我正在使用 IntelliJ IDE 来帮助我构建它、生成 WSDL 并生成存根。

几周前，我成功创建了一个非常小的 Web 服务，它接受一个简单的请求对象（RequObj，它聚合了一些字符串、整数和双精度）并返回一个简单的响应对象（RespObj，也包含字符串、整数和双打）。这工作正常。

但是，当我尝试进行更改以将 RequObj 的数组而不是单个 RequObj 传递给服务时，出现错误：

```
AxisFault
 faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
 faultSubcode: 
 faultString: org.xml.sax.SAXException: SimpleDeserializer encountered a child element, which is NOT expected, in something it was trying to deserialize.
 faultActor: 
 faultNode: 
 faultDetail: 
    {http://xml.apache.org/axis/}hostname:JO007BI-BOU7
org.xml.sax.SAXException: SimpleDeserializer encountered a child element, which is NOT expected, in something it was trying to deserialize.
    at org.apache.axis.message.SOAPFaultBuilder.createFault(SOAPFaultBuilder.java:222) 
```

... ETC

我向/从服务器发送/接收的类是非常基本的。当我将 RequObj 和 RespObj 都减少为一个字符串成员变量（m_reqString1 和 m_resString1）时，我得到了完全相同的错误。我在服务器中重新生成了 WSDL，在客户端中，我从服务器 WSDL 文件中重新生成了 Java 存根（显然还有请求和响应类文件）。我显然不是 WSDL 专家，但 WSDL 中似乎包含传递对象数组的正确内容。我还为请求和响应对象仅包含字符串的情况附加了 WSDL。

我真的被困住了，没有运气在各种论坛上对此进行调查。我看过你写的很多文章，但似乎都没有解决这个特定问题……如果我不能解决这个问题，我将不得不返回调用我自己的 Java DOM 函数来将我的请求/响应转换为 XML，我知道这是非标准的……</p>

这些是包含我的请求和响应定义的类。在我附加的文件中，我进一步简化了这些文件，使它们只包含单个 m_reqString1 和 m_resString1，在更简单的情况下我得到了同样的错误。

```
public class RequObj  implements java.io.Serializable {
    public java.lang.String m_reqString1;
    public int m_reqInt1;
    public double m_reqDouble1;
    public java.lang.String m_reqString2;
    public int m_reqInt2;
    public double m_reqDouble2;
    public java.lang.String m_reqString3;
    public int m_reqInt3;
    public double m_reqDouble3;
    ...
}

public class RespObj  implements java.io.Serializable {
    public java.lang.String m_resString1;
    public int m_resInt1;
    public double m_resDouble1;
    public java.lang.String m_resString2;
    public int m_resInt2;
    public double m_resDouble2;
    public java.lang.String m_resString3;
    public int m_resInt3;
    public double m_resDouble3;
    ...
} 
```

我可以包含任何源文件（例如 WSDL、客户端代码、服务代码、存根代码等）如果有帮助的话（我相信它会），但我主要想先提出这个问题。如果有人想看到这个级别的细节，我会在这里提出我的问题。非常感谢 -

# perl - WWW::Mechanize 提交后无法工作

> ID：11459205
> 
> 赞同：2
> 
> 时间：2012-07-12T19:27:27.650
> 
> 标签：perl, www-mechanize

在我的工作中，我建立了很多 wordpress 网站，也做了很多剪切和粘贴。为了简化这个过程，我正在尝试制作一个可以填写表单信息并将其提交到 wordpress 的爬虫。但是，一旦我通过登录，我就无法让爬虫在 wordpress 管理面板中正确运行。

我知道提交登录表单是可行的，因为我之前已经取回了该页面。但是这个脚本似乎没有返回我想要的“设置”页面。我一直在尝试将此站点用作指南：[www.higherpass.com/Perl/Tutorials/Using-Www-mechanize/3/](http://www.higherpass.com/Perl/Tutorials/Using-Www-mechanize/3/)了解如何使用 mechanize，但我可以为此使用一些额外的指针。这是我的 Perl 脚本，我尝试了一些变体，但我只需要指出正确的方向。

谢谢！

```
use WWW::Mechanize;
my $m = WWW::Mechanize->new();
$url2 = 'http://www.moversbatonrougela.com/wp-admin/options-general.php';

$url = 'http://www.moversbatonrougela.com/wp-admin';
$m->get($url);
$m->form_name('loginform');
$m->set_fields('username' => 'user', 'password' => 'password');
$m->submit();

$response = $m->get($url2);
print $response->decoded_content(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:15:44.907

将以下代码行放在之前`$m->submit();`。因为`WWW::Mechanize`是一个子类，`LWP::UserAgent`你可以使用任何 LWP 的方法。

```
$m->add_handler("request_send",  sub { shift->dump; return });
$m->add_handler("response_done", sub { shift->dump; return }); 
```

以上将启用登录您的代码。注意请求/响应返回代码，即 200（OK）或 302（重定向）等。URL 请求，`$m->get()`即可能被重定向或机器的 ip 被服务器阻止。如果它是一个重定向，那么您可能可以使用`$m->redirect_ok();`跟随重定向 URL，或者如果您不想跟随重定向 URL 使用`$m->requests_redirectable`（这是一种 LWP 方法）。日志应显示如下 -

```
HTTP/1.1 200 OK 
```

或者

```
HTTP/1.1 302 Found 
```

如果上述方法均无效，请使用以下替代方法`$m->submit();`并试一试-

```
 my $inputobject=$mech->current_form()->find_input( undef, 'submit' );
 $m->click_button(input => $inputobject); 
```

# sql-server - 如何在间隔内从 SQL Server 数据库返回值

> ID：11459210
> 
> 赞同：0
> 
> 时间：2012-07-12T19:27:38.200
> 
> 标签：sql-server, date, return, intervals

嗨，我有一个包含 3 列的 SQL 服务器数据库，`Activity[start_date(datetime),end_date(datetime),title(string)]` 我希望计算一整年，每个月有多少活动有 start_date，我的意思是我希望返回 12 个值（12 个月）来计算月份内的活动， 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:29:00.957

```
select month(start_date) as Month, count(*) as Count
from Activity
where year(start_date) = 2011 
group by month(start_date)
order by month(start_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:39:41.007

如果有一个索引`start_date`和/或如果您需要在结果中包含月份，即使该月份没有活动，您也可以考虑这个：

```
DECLARE @year INT;
SET @year = 2012;

;WITH n AS 
(
  SELECT TOP (12) m = DATEADD(MONTH, ROW_NUMBER() OVER 
    (ORDER BY name)-1, DATEADD(YEAR, @year-1900, 0))
    FROM sys.all_objects ORDER BY name
)
SELECT [Month] = n.m, ActivityCount = COUNT(t.title) 
FROM n 
LEFT OUTER JOIN dbo.unspecified_table_name AS t
  ON t.start_date >= n.m
  AND t.start_date < DATEADD(MONTH, 1, n.m)
GROUP BY n.m
ORDER BY [Month]; 
```

（如果您不希望在给定月份的活动为零时出现一行，则更`LEFT OUTER`改为`INNER`。）

# asp.net-mvc - ASP.net MVC3 视图继承

> ID：11459211
> 
> 赞同：2
> 
> 时间：2012-07-12T19:27:42.740
> 
> 标签：asp.net-mvc, .net-4.0

我有一个列表，例如我想在单个页面中呈现的车辆，但每种车辆类型都有不同的视图特征。

**车辆**
- VehicleId
- VehicleTypeId（汽车/船/卡车/等...）
- 描述
- ...

我想在我的主要 AllVehiclesPage 上

```
@foreach(var vehicle in Model) //where Model is a List<Vehicle> from AllVehicles
{
    //Render proper View
    //CarView(vehicle)
    //BoatView(vehicle)
    //TruckView(vehicle)
} 
```

在每个视图中，它会根据车辆呈现不同的效果，IE Wheel rim size 适用于汽车/卡车而不是船等......

我已经阅读了 Stackoverflow 上关于视图继承的其他一些问题，但它们似乎并不适用。

这最好与部分视图有关吗？我应该创建用户控件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T19:30:35.590

使用显示模板。用以下代码行替换整个 foreach 循环：

```
@model IEnumerable<Vehicle>
...
@Html.DisplayForModel() 
```

现在是有趣的部分。您为要处理的每种类型定义显示模板：

```
~/Views/Shared/DisplayTemplates/Car.cshtml
~/Views/Shared/DisplayTemplates/Boat.cshtml
~/Views/Shared/DisplayTemplates/Truck.cshtml 
```

每个模板都将被强类型化为相应的具体类型。所以这就是`Html.DisplayForModel()`在线上会发生的事情：

1.  ASP.NET MVC 认为该模型是`IEnumerable<Vehicle>`
2.  ASP.NET MVC 开始枚举这个集合
3.  对于集合的每个元素，ASP.NET MVC 查看其具体的运行时类型。
4.  ASP.NET MVC 为文件夹中定义的此类型查找相应的显示模板，`~/Views/Shared/DisplayTemplates`并通过将此模板作为模型传递给当前元素来自动呈现它。

您会注意到这种模式中的一些有趣的东西：我经常使用*ASP.NET MVC*这个词而不是*.NET 开发者*这个词。这太棒了，因为开发人员所要做的就是遵循标准约定，然后 ASP.NET MVC 将为他完成这项工作，这样开发人员就不需要编写循环，不需要编写 if 条件和不'不需要重新发明轮子。

# php - 如何在 Opencart 中检索自定义属性？

> ID：11459216
> 
> 赞同：8
> 
> 时间：2012-07-12T19:27:55.443
> 
> 标签：php, opencart

[我已经定义了一些自定义属性并通过Opencart](http://www.opencart.com/)管理面板将它们分配给产品。我试图在结帐时检索这些属性以调整一些运费。

我目前正在函数中的`catalog/model/shipping/ups.php`文件中`getQuote`工作。我正在接近这个：

```
print_r($this->cart->getProducts()); 
```

这给了我以下产品数据：

```
Array
(
    [59] => Array
        (
            [key] => 59
            [product_id] => 59
            [name] => My Product Name 
            [model] => ABC
            [shipping] => 1
            [image] => data/myproduct.jpg
            [option] => Array
                (
                )

            [download] => Array
                (
                )

            [quantity] => 1
            [minimum] => 1
            [subtract] => 1
            [stock] => 1
            [price] => 29.99
            [total] => 29.99
            [reward] => 0
            [points] => 0
            [tax_class_id] => 0
            [weight] => 3.75
            [weight_class_id] => 5
            [length] => 0.00
            [width] => 0.00
            [height] => 0.00
            [length_class_id] => 3
        )

) 
```

但是，不会返回任何自定义属性。我确信有一种很好的方法可以将产品 ID 传递给属性获取函数，但我找不到它。Opencart 文档在开发方面有点缺乏，而且在 Google 上也没有运气。

通常我会`grep`从整个目录结构中找出我正在寻找的东西，但是在这个特定的 Web 主机上禁用了 shell 访问:(。

**编辑**

我相信 Attributes 是 Opencart 中内置的一项新功能。它就像一个自定义字段。

无论如何，在管理方面，我转到目录 > 属性并创建了一个名为“Shipping Box Type”的自定义属性。然后，在特定产品下，我可以设置属性。见截图。我的目标是检索“Shipping Box Type”的值。这能回答你的问题@Cleverbot 吗？我确定我可以做一个自定义数据库查询来抓取它，但是必须有一个内置函数来抓取属性？

![opencart 产品属性](../Images/07292243eb68fad03a914fcd2b6f55b2.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T12:53:56.133

**检索给定 product_id 的属性**

```
$this->load->model('catalog/product');

$attributes = $this->model_catalog_product->getProductAttributes(59); 

print_r($attributes); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [attribute_group_id] => 9
            [name] => Shipping Fields
            [attribute] => Array
                (
                    [0] => Array
                        (
                            [attribute_id] => 16
                            [name] => Shipping Box Type
                            [text] => SM2
                        )

                )

        )

) 
```

更进一步，这是一个循环浏览购物车中当前产品以查看它们具有哪些属性的示例：

```
$this->load->model('catalog/product');

$cart_products = $this->cart->getProducts();

// get attributes for each product in the cart
foreach($cart_products as $product) {
    $attributes = $this->model_catalog_product->getProductAttributes($product['product_id']);
    print_r($attributes);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T06:34:27.487

这不是 Opencart 中最直观的功能。首先你必须去目录>属性>属性组，你必须创建一个组名，作为你的属性的标题。为此，它可能是“运输规范”。

然后您需要转到目录>属性>属性>并在“运输规范”下创建一个名为“运输箱类型”的新属性。

现在您已准备好转到目录>产品并将属性添加到产品。

**问题**是它不会像你希望的那样显示出来。它将显示在产品页面上描述旁边的规格选项卡下。您可以轻松选择在 catalog/view/*your_theme*/products/products.tpl 中将“规格”更改为您选择的标题，或者您可以编辑相同的 tpl 文件以更改数据输出的容器/格式。

# java - 在应返回结果的 Java FX UI 中使用线程

> ID：11459221
> 
> 赞同：1
> 
> 时间：2012-07-12T19:28:09.197
> 
> 标签：java, swing, user-interface, thread-safety, javafx-2

我可能在这里遗漏了一些东西，但我会尝试解释我想要实现的目标，然后有人请告诉我我做错了（我是:)）并指出我正确的方向？

我正在使用 JavaFX 2.0，但我认为这个问题适用于 Swing 或任何 UI 框架。

我想为我的应用程序开发一个简单的启动屏幕，当启动屏幕启动时，我想要一个消息标签，用于向用户更新正在发生的事情，关于配置应用程序的后端。我的应用程序启动有 2 个步骤，第一步使用 Spring 初始化应用程序上下文，进而初始化数据库（JPA 2.0/Hibernate/etc）。我的应用程序启动过程的第二部分将查询数据库以获取将用于填充 UI 的初始数据。这两个步骤都需要在我关闭初始屏幕之前完成，并且在每个步骤之间我想更新初始屏幕中的标签以让用户知道当时正在完成哪个阶段。

我已将其分解为以下使用 JavaFX 和按钮的简单程序，当按下按钮时，会创建一个新线程，该线程会启动另一个类，该类仅对 abitary 值执行一些计数，然后创建另一个线程模拟启动过程的第二步，但我的问题是第二个线程尝试在第一个线程完成之前运行，结果运行到 NPE。

下面是一些突出此问题的简单代码的细分：

```
public class Test extends Application
{
    private LongTester lt;
    public static void main(String[] args)
    {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage)
    {
        Button btn = new Button();
        final Label lblText = new Label("Starting");

        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>()
        {
            @Override
            public void handle(ActionEvent event)
            {                
                new Thread(new ConstructorRunnable()).start();

                lblText.setText("More Loading?");

                new Thread(new MethodRunnable()).start();

                lblText.setText("Finished");
            }
        });

        HBox root = new HBox();
        root.getChildren().add(btn);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private class ConstructorRunnable implements Runnable
    {
        @Override
        public void run()
        {
            lt = new LongTester();
        }
    }

    private class MethodRunnable implements Runnable
    {
        @Override
        public void run()
        {
            lt.countAgain();
        }
    }

    private class LongTester
    {
        public LongTester()
        {
            for (int idx = 0; idx < 1000000; idx++)
            {
                System.out.println("Constructor: " + idx);
            }
        }

        public Boolean countAgain()
        {
            for (int idx = 0; idx < 1000000; idx++)
            {
                System.out.println("Method: " + idx);
            }
            return Boolean.TRUE;
        } 
    }
} 
```

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:47:20.370

要解决您的问题，您可以使用 a[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html) 这可以通过以下方式使用：

```
private class ConstructorRunnable implements Runnable {
   CountDownLatch gate_ = null;
   public ConstructorRunnable(CountDownLatch gate){
      gate_ = gate;
   } 
   @Override
   public void run() {
      lt = new LongTester();
      gate_.countDown();  // Signal the second thread to start
   }
}

private class MethodRunnable implements Runnable{
  CountDownLatch gate_ = null;
  public MethodRunnable(CountDownLatch gate){
      gate_ = gate;
  }
  @Override
  public void run(){
     CountDownLatch.await(); // Wait for the first thread to finish
     lt.countAgain();
  }
} 
```

现在可以这样使用：

```
CountDownLatch gate = new CountDownLatch(1);
new Thread(new ConstructorRunnable(gate)).start();
lblText.setText("More Loading?");
new Thread(new MethodRunnable(gate)).start();
lblText.setText("Finished"); 
```

附带说明：由于您的任务是连续的，为什么需要多个线程？线程用于运行并行运行的多个任务，并且您的案例不会成为线程的用例，因为这些操作是顺序的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:00:50.767

我建议使用[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)来执行您的启动任务并将消息进度返回到您的初始屏幕（类似于此[示例](https://gist.github.com/2305098)中为初始屏幕上的先前[stackoverflow 问题](https://stackoverflow.com/questions/9997509/designing-a-splash-screen-java)创建的方法）。如果您希望任务中的内容按顺序运行，只需为任务使用一个线程而不是两个线程。

您的任务的示例代码可能类似于：

```
final Task<Data> initTask = new Task() {
  @Override protected Data call() throws InterruptedException {
    updateMessage("Initializing Application");
    MyApp.initializeAppContext(); 
    updateMessage("Loading Data");
    Data data = DB.loadData(); 
    updateMessage("Data Loaded");

    return data;
  }

showSplash(initStage, initTask);
new Thread(initTask).start();
showMainStage(initTask.valueProperty()); 
```

# visual-studio - CUDA 纹理函数未识别

> ID：11459225
> 
> 赞同：0
> 
> 时间：2012-07-12T19:28:14.790
> 
> 标签：visual-studio, cuda

CUDA 4.2 SDK 示例项目 simpleTexture 在 vs2008 sp1 中编译和运行正确，但是当我尝试将纹理添加到正在进行的 CUDA 内核项目时，无法识别创建和使用绑定的一些必要函数：

```
1>c:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 4.2/C/src/rohan/Rohan-kernel.cu(67): error: identifier "channelDesc" is undefined
1>c:/ProgramData/NVIDIA Corporation/NVIDIA GPU Computing SDK 4.2/C/src/rohan/Rohan-kernel.cu(664): error: identifier "tex2d" is undefined 
```

纹理声明本身似乎没问题：

```
texture<cuDoubleComplex, cudaTextureType2D, cudaReadModeElementType> tex; 
```

我已经复制了所有的`#include`s `simpleTexture`，包含路径看起来相同，并且正在进行的项目使用提供的模板项目/解决方案文件，按照指示定制。

在添加纹理位之前，一切都运行良好，是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:43:51.593

尝试使用标志编译`-arch sm_20`

# drupal - 动态菜单链接如何

> ID：11459226
> 
> 赞同：0
> 
> 时间：2012-07-12T19:28:18.523
> 
> 标签：drupal

我的内容区域右侧有一个菜单块。我希望能够单击其中一个链接并更改内容区域中的内容，无论是将节点推进到匹配的内容类型还是仅显示包含该内容类型的块。

我通常会使用 php 执行此操作，方法是添加一个 url 变量 site.com/data?uid=somenumber 以在同一页面上显示我想要的数据。我不想创建多个内容页面来执行此操作。必须有一种方法，在菜单块中创建和显示的链接可以更改页面上显示的视图内的内容。

我是一个完全的drupal新手。因此，任何帮助都将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:08:33.867

如果您的内容区域正在显示视图，您绝对可以使用视图参数来执行此操作。因此，例如，如果您希望菜单链接根据不同的术语改变视图内容，您可以将视图设置为期望来自 url 的参数。

要设置它：

1.  在您的视图中添加“上下文过滤器”（在“高级”部分下）
2.  在下面的示例中，我添加了“区域”作为我的上下文过滤器，这只是我的内容类型的术语参考
3.  在配置上下文过滤器时，将其设置为当 URL 中不存在过滤器时，它只显示所有值（这是默认值）——如屏幕截图所示。

这样，当您第一次加载页面，并且没有选择菜单项时，您的所有内容都将显示在视图中。现在您必须设置菜单以提供参数，并且您的视图应该做出适当的反应！

让我知道这是否有效或您有任何问题。

![在此处输入图像描述](../Images/eaf5c6053257d121d1bdbb17885dc973.png)

# android - SQLite android中的可绘制图像

> ID：11459233
> 
> 赞同：0
> 
> 时间：2012-07-12T19:28:49.943
> 
> 标签：android, database, image, sqlite, drawable

我有一个使用数据库填充文本的工作 TextView，但我想连接本地数据库中的图像路径名称。如何将其合并到 java 中？

在我设置的主要活动中：

```
String image = currentQ.getImage();
ImageView iView = (ImageView) findViewById(R.id.IS);
Bitmap bMap = BitmapFactory.decodeFile(image);
iView.setImageBitmap(bMap); 
```

在问题中：

```
private String image;

/**
* @return the image
*/
public String getImage() {
return image;
}
/**
 * @param image the image to set
 */
public void setImage(String image) {
this.image = image;
} 
```

在数据库中，我将其声明为文本：

```
file.path.name/drawable/i1.jpg and so on for the others. 
```

如何在我的可绘制文件夹中为数据库中的每个问题附加一个图像文件位置并在 java 中连接它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-01T13:53:21.240

```
ImageView imageView = (ImageView) findViewById(R.id.imageView);

String imageName = "NameofImage"; // store only image name in database(means not   store "R.drawable.image") like "image".
            int id = getResources().getIdentifier("projectPackageName:drawable/" + imageName, null, null);
            imageView.setImageResource(id); 
```

# mysql - 一种在 MySQL 中重新排序行 ID 的方法

> ID：11459239
> 
> 赞同：0
> 
> 时间：2012-07-12T19:29:26.620
> 
> 标签：mysql

我有一个表，我从中获取行，总是按它们的 ID 排序。在某些时候，我创建了一个具有新 ID 顺序的数组，下次应该通过该数组获取行。切换行 ID 以匹配新顺序的最佳方法是什么？还是有其他方法可以做到这一点？

例子：

```
ID col1 col2 ...
1个
2 bb
3毫升

```

按该顺序获取行。现在我希望新的顺序是 2、3 和 1，所以我需要将表格更改为如下所示：

```
ID col1 col2 ...
1 bb
2 立方厘米
3个啊啊啊

```

只要保留所需的顺序，新 ID 的值就可以更改为任何值。

# php - 坚持尝试将输入转换为某种格式的字符串

> ID：11459241
> 
> 赞同：3
> 
> 时间：2012-07-12T19:29:30.357
> 
> 标签：php

所以我在数据库中有一个用于交付时间的字段，它具有某种格式（肯定不是我的设计！）：这里有几个例子：

M, T, W, TH ; MTWTH 9 至 4 关闭 12 至 1

T、W、TH、F；TTHF 9 至 5 关闭 12 至 2，W 9 至 12

T、W、TH、F；T 10 到 7 关闭 2 到 3，WTH 9 到 6 关闭 1 到 2，F 8 到 5 关闭 1 到 2

所以基本上，你有一个日期列表，用逗号分隔，后跟分号。分号后面是天数列表，没有分开，后面是交货时间，包括休息时间。问题是，每天的交货时间可能不同，所有日子都相同，或者星期一和星期二相同，然后星期三不同，星期四和星期五相同（但星期四和星期五的交货时间与星期一和星期二不同）周二）。如果某些天的交货时间匹配，则应将这些天组合在一起，将交货时间列在组天之后，然后再列出其他匹配的天或单天。指定交货时间的第一天必须先行。

我知道，这种格式很荒谬，交货天数/时间应该在一个由组织 ID 链接的单独表格中，但这是他们现在用于某些下载文件的格式。我希望稍后更改它，但现在......我无法弄清楚如何将来自 4 个下拉菜单（从、到、关闭从、关闭到）的输入转换为该格式。任何一天都可能根本没有关闭时间。至少一天必须指定交货时间（我检查一下）。

我当然得到了第一部分（分号之前） - 这很容易，之后我完全陷入困境。如果有送货的所有日子都有相同的时间，我就不会有问题。但由于每天都可能完全不同，我不知道该怎么做。

所以这是到目前为止的处理块：

$trimmed 是已修剪的 POST 值数组，

$trimmed['1Monday'] 是星期一从，$trimmed['2Monday'] 是星期一到，

$trimmed['3Monday'] 是星期一休息日，$trimmed['4Monday'] 是星期一休息日。

所以 $M_times 变量将有星期一的开/关时间。

$days_del 数组用于稍后创建作为所需格式的第一部分的字符串。

我可以获得指定时间的第一天，然后我可以尝试捕捉任何匹配项，但如果第一个交货日的值与其他日期不同，那么这将没有用，但在那之后有一些匹配的值。我什至不确定我是否需要使用另一个（编号的）天数组，或者我可以只使用带有 MF 键的主要数组来完成它。

```
<?php

$days = array('M' => 'Monday', 'T' => 'Tuesday', 'W' => 'Wednesday', 'TH' => 'Thursday', 'F' => 'Friday');

$days_numbered = array(1 => 'M', 'T', 'W', 'TH', 'F');

$days_del = $matches = $full_list = array();

$days_delivery2 = '';

$count_no_del = 0;  # initialize count for days with no delivery
$times_6 = '';

foreach ($days as $k => $v){  #####  Beginning of days loop

if (isset($trimmed["1$v"]) &&  isset($trimmed["2$v"])){ #  If both closing and opening times have been specified

$days_del[] = $k;
${$k.'_times'} = $trimmed["1$v"] . ' TO ' . $trimmed["2$v"];

if ((!isset($trimmed["3$v"]) && isset($trimmed["4$v"])) || (isset($trimmed["3$v"]) && !isset($trimmed["4$v"]))){  #  If only beginning or only end of lunch(?) break has been specified

$errors[] = 'Delivery times for $v - please specify both start and end of closing time.';

}elseif (isset($trimmed["3$v"]) && isset($trimmed["4$v"]){  #  If both beginning and end of lunch(?) breakh have been specified

${$k.'_times'} .= 'CLOSED' .  $trimmed["3$v"] . ' TO ' . $trimmed["4$v"];
}

    }elseif ((!isset($trimmed["1$v"]) &&  isset($trimmed["2$v"])) || (isset($trimmed["1$v"]) &&  !isset($trimmed["2$v"]))){  #  If only closing or only  opening time has been specified

$errors[] = 'Delivery times for $v - please specify both start and end of delivery time.';
${$k.'_times'} = NULL;

    }elseif (!isset($trimmed["1$v"]) &&  !isset($trimmed["2$v"])){  # No delivery times specified for this day

${$k.'_times'} = NULL;
$count_no_del++;

    }

$full_list["$k"] = ${$k.'_times'};

}  #####  End of days loop

if ($count_no_del > 0){  #  If there are no delivery days specified
$errors[] = 'You must specify delivery hours for at least one day of the week.';
}

$days_delivery1 = implode(',', $days_del);
$days_delivery1 = $days_delivery1 . ' ; ';

foreach ($days_numbered as $num => $val){  #  Getting first day for which delivery hours have been specified
if (isset(${$val.'_times'}) && (${$val.'_times'} != NULL)){
${'times_'.$num} = ${$val.'_times'};
$first_day = $num;
break;
}
}

$check_array = array_keys($full_list, ${'times_'.$first_day}));  #  checking how many other days match the delivery hours for the first specified day.

foreach ($check_array as $array_key){
$days_delivery2 .= $array_key;
}

$days_delivery2 .= " " . ${'times_'.$first_day};

$note_line = $days_delivery1 . " "  ; #  second part, something like 'MTH 9 To 5, TW 10 TO 5 CLOSED 1 TO 2, F 10 TO 2' should go a s the second part of the string.
?> 
```

如您所见，在以该格式 ($days_delivery1) 获取字符串的第一部分后，我被卡住了，不知道我到底在做什么。我有一个使用 2 个不同数组（主数组和编号数组）并使用 array_keys 来查找匹配值的想法，但是任何时候我尝试处理它，我都会遇到一堵墙。任何想法都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:27:25.047

这里潜在的困难是将第二部分的条目分组。为了克服这个问题，我建议您将时间转换为 4 位表示以对其进行规范化并连接模式，因此为每个模式创建一个“签名”。

在下面的示例中，我将处理以下`$_POST`数组将产生相应结果字符串的原则：

```
 $_POST1 = array(
   '1Monday' => 9,
   '2Monday' => 5,
   '3Monday' => 12,
   '4Monday' => 1,
   '1Tuesday' => 9,
   '2Tuesday' => 5,
   '3Tuesday' => 12,
   '4Tuesday' => 1,
   '1Wednesday' => 9,
   '2Wednesday' => 5,
   '3Wednesday' => 12,
   '4Wednesday' => 1,
   '1Thursday' => 9,
   '2Thursday' => 5,
   '3Thursday' => 12,
   '4Thursday' => 1,
   '1Friday' => 9,
   '2Friday' => 4,
   '3Friday' => 11,
   '4Friday' => 12
 );
 $result1 = "M, T, W, TH, F ; MTWTH 9 TO 5 CLOSED 12 TO 1, F 9 TO 4 CLOSED 11 TO 12";     

 $_POST2 = array(
   '1Monday' => '',
   '2Monday' => '',
   '3Monday' => '',
   '4Monday' => '',
   '1Tuesday' => 9,
   '2Tuesday' => 5,
   '3Tuesday' => 12,
   '4Tuesday' => 1,
   '1Wednesday' => 9,
   '2Wednesday' => 5,
   '3Wednesday' => 12,
   '4Wednesday' => 1,
   '1Thursday' => 9,
   '2Thursday' => 5,
   '3Thursday' => 12,
   '4Thursday' => 1,
   '1Friday' => 9,
   '2Friday' => 5,
   '3Friday' => 12,
   '4Friday' => 1
 );
 $result2 = "T, W, TH, F ; TWTHF 9 TO 5 CLOSED 12 TO 1"; 
```

现在让我们看看我们如何处理这些数据。我将假设我们直接使用未处理的 POST 数组。

```
<?php

  // Obviously we will need this map if the inputs use the full day names
  $days = array('M' => 'Monday', 'T' => 'Tuesday', 'W' => 'Wednesday', 'TH' => 'Thursday', 'F' => 'Friday');

  // A couple of arrays to hold the results of the loop iterations
  $resultDays = $resultTimes = array();

  // First we iterate over the days
  foreach ($days as $dayCode => $dayFull) {

    // Data about this day
    $dayData = array(
      'open' => 0,
      'close' => 0,
      'lunchClose' => 0,
      'lunchOpen' => 0,
      'days' => array()
    );

    // First get the open/close times
    $open = $_POST["1$dayFull"];
    $close = $_POST["2$dayFull"];
    if (empty($open) || empty($close)) {
      // If we don't have both open/close times, skip this day
      continue;
    }

    // We definitely open on this day
    $resultDays[] = $dayCode;
    $dayData['open'] = $open;
    $dayData['close'] = $close;

    // Pad the strings to make the signature
    $openPadded = str_pad($open, 2, "0", STR_PAD_LEFT);
    $closePadded = str_pad($close, 2, "0", STR_PAD_LEFT);

    // Now look at lunch times
    $lunchClose = $_POST["3$dayFull"];
    $lunchOpen = $_POST["4$dayFull"];
    if (!empty($lunchClose) || !empty($lunchOpen)) {
      // If we have both open/close times, add a lunch break

      // Add data to $dayData
      $dayData['lunchClose'] = $lunchClose;
      $dayData['lunchOpen'] = $lunchOpen;

      // Pad the strings to make the signature
      $lunchClosePadded = str_pad($lunchClose, 2, "0", STR_PAD_LEFT);
      $lunchOpenPadded = str_pad($lunchOpen, 2, "0", STR_PAD_LEFT);

    } else {
      // So we don't break this signature
      $lunchClosePadded = $lunchOpenPadded = '';
    }

    // Build the signature
    $signature = $openPadded.$closePadded.$lunchClosePadded.$lunchOpenPadded;

    // Add day data to result times array
    if (!isset($resultTimes[$signature])) {
      $resultTimes[$signature] = $dayData;
    }
    $resultTimes[$signature]['days'][] = $dayCode;

  }

  // Now we can build the string

  // Like you say, first part is easy
  $firstPart = implode(', ', $resultDays);

  // Loop $resultTimes and construct to more sensible arrangements
  $secondPart = array();
  foreach ($resultTimes as $block) {
    $str = implode('', $block['days'])." {$block['open']} TO {$block['close']}";
    if (!empty($block['lunchClose']) && !empty($block['lunchOpen'])) {
      $str .= " CLOSED {$block['lunchClose']} TO {$block['lunchOpen']}";
    }
    $secondPart[] = $str;
  }

  // Now we can construct the final string
  $finalResult = $firstPart." ; ".implode(', ', $secondPart); 
```

[看到](http://codepad.org/Z00P4H0N)它[工作](http://codepad.org/qkxp6UB7)。

嗯，那很有趣。

# c# - 在后面的代码中获取最大数组长度配额...C#

> ID：11459242
> 
> 赞同：0
> 
> 时间：2012-07-12T19:29:31.800
> 
> 标签：c#, asp.net-mvc-3

这是一个 MVC3 应用程序。我已经阅读了阅读和阅读，但我无法弄清楚这一点。尝试将文件上传到服务器时出现最大数组长度配额错误。我以前在我的应用程序中得到了这个，并通过在 web.config 中增加它来修复它。

```
 <readerQuotas maxDepth="32" maxStringContentLength="2147483647" 
                    maxArrayLength="2147483647" maxBytesPerRead="4096" 
                    maxNameTableCharCount="2147483647"/> 
```

现在我通过老式 asmx 服务上传文件（因为我必须这样做，而不是我的决定）。我通过 WCF 调用 asmx 服务，我得到最大配额错误。我可以下载我之前上传的文件（通过 WCF 流式传输对象）。所以我的问题不是如何通过更改配置文件中的值来解决这个问题，而是如何以编程方式获取 C# 中的最大数组长度。我想在调试时看看它是什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:36:00.077

看看[http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.readerquotas.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.readerquotas.aspx)

和[http://msdn.microsoft.com/en-us/library/system.xml.xmldictionaryreaderquotas.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldictionaryreaderquotas.aspx)

第一个解释了属性的存储位置。第二个描述属性。

# javascript - Backbone.js 空数组属性

> ID：11459244
> 
> 赞同：13
> 
> 时间：2012-07-12T19:29:43.453
> 
> 标签：javascript, arrays, backbone.js

我在 Backbone.js 模型中遇到了一个奇怪的问题，其中数组成员显示为空白。它看起来像这样：

```
var Session = Backbone.Model.extend({
    defaults: {
        // ...
        widgets: []
    },
    addWidget: function (widget) {
        var widgets = this.get("widgets");

        widgets.push(widget);
        this.trigger("change:widgets", this, widgets);
    },
    // ...
    // I have a method on the model to grabbing a member of the array
    getWidget: function (id) {
        console.log(this.attributes);
        console.log(this.attributes.widgets);

        // ...
    }
}); 
```

然后我通过添加一个小部件`addWidget`。在尝试`getWidget`我得到的结果时（在 Chrome 中）是这样的：

```
Object
    widgets: Array[1]
        0: child
        length: 1
        __proto__: Array[0]
    __proto__: Object
[] 
```

它显示小部件在记录时不为空，`this.attributes`但在记录时显示为空`this.attributes.widgets`。有谁知道这会导致什么？

**编辑** 我已经更改了模型以在初始化方法中实例化小部件数组以避免跨多个实例的引用，并且我开始使用[骨干嵌套](http://afeld.github.com/backbone-nested/)但没有运气。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T02:08:16.707

小心信任控制台，经常有异步行为会让你绊倒。

你期望`console.log(x)`表现得像这样：

1.  你打电话`console.log(x)`。
2.  `x`被转储到控制台。
3.  `console.log(x)`在您调用之后立即执行语句继续执行。

但事实并非如此，现实更像是这样：

1.  你打电话`console.log(x)`。
2.  浏览器获取对 的引用`x`，并将“真实”调用排队`console.log`等待稍后。
3.  JavaScript 的各种其他位运行（或不运行）。
4.  稍后，`console.log`来自**(2)**的调用将转储`x`到控制台的当前状态，但这`x`不一定与**(2)**`x`中的状态匹配。

 **在你的情况下，你正在这样做：

```
console.log(this.attributes);
console.log(this.attributes.widgets); 
```

所以你在**(2)**有这样的东西：

```
 attributes.widgets
             ^         ^
             |         |
console.log -+         |
console.log -----------+ 
```

然后在**（3）**中发生了一些事情，它有效地做`this.attributes.widgets = [...]`了（即改变了`attributes.widget`参考），所以，当**（4）**出现时，你有这个：

```
 attributes.widgets // the new one from (3)
             ^
             |
console.log -+
console.log -----------> widgets // the original from (1) 
```

这会让你看到两个不同的版本：新版本在**(3)**`widgets`中收到了一些东西，而原来的版本是空的。

 **当你这样做时：

```
console.log(_(this.attributes).clone());
console.log(_(this.attributes.widgets).clone()); 
```

`this.attributes`您正在获取和`this.attributes.widgets`附加到`console.log`调用的副本，因此**(3)**不会干扰您的引用，并且您会在控制台中看到合理的结果。

这就是这个问题的答案：

> 它显示小部件在记录时不为空，`this.attributes`但在记录时显示为空`this.attributes.widgets`。有谁知道这会导致什么？

就根本问题而言，您可能在`fetch`某处有一个调用，而您没有考虑其异步行为。解决方案可能是绑定到一个`"add"`或`"reset"`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:00:23.797

请记住，`[]`在 JS 中只是 的别名`new Array()`，并且由于对象是通过引用传递的，因此 Session 模型的每个实例都将共享相同的数组对象。这会导致各种问题，包括看起来为空的数组。

为了使这项工作以您想要的方式工作，您需要在构造函数中初始化您的小部件数组。这将为每个 Session 对象创建一个唯一的小部件数组，并且应该可以缓解您的问题：

```
var Session = Backbone.Model.extend({
    defaults: {
        // ...
        widgets: false
    },
    initialize: function(){
        this.set('widgets',[]);
    },
    addWidget: function (widget) {
        var widgets = this.get("widgets");

        widgets.push(widget);
        this.trigger("change:widgets", this, widgets);
    },
    // ...
    // I have a method on the model to grabbing a member of the array
    getWidget: function (id) { 
        console.log(this.attributes);
        console.log(this.attributes.widgets);
    // ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:43:40.030

在 Chrome 和 Firefox 中测试：http: [//jsfiddle.net/imsky/XBKYZ/](http://jsfiddle.net/imsky/XBKYZ/)

```
var s = new Session;
s.addWidget({"name":"test"});
s.getWidget() 
```

控制台输出：

```
Object
widgets: Array[1]
__proto__: Object

[
Object
name: "test"
__proto__: Object
] 
```****

# ruby-on-rails - simple_form_for 提交时重定向

> ID：11459246
> 
> 赞同：1
> 
> 时间：2012-07-12T19:29:46.110
> 
> 标签：ruby-on-rails, ruby, redirect, simple-form

我是 Ruby on Rails 的菜鸟，我有一个愚蠢的问题：在我的 session_controller 中我有

```
def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
      session[:user_id] = user.id
      redirect_to root_path, :notice => "Logged in!"
    else
      flash.now.alert = "Invalid email or password"
      render "new"
    end
  end 
```

在路线中我匹配'/signin'，到：'sessions#new'

在 new.html.haml 我有

```
 = simple_form_for :session do |f|
    = f.input :email
    = f.input :password
    = f.button :submit, 'Sign in!' 
```

当我按下“登录”按钮时，我希望将调用“创建”方法（它在我的用户模型中如何工作），但调试向我显示“新”方法，并且我有“authenticity_token”而没有填写电子邮件和密码。有人可以解释我发生了什么吗？我不明白何时调用“新”方法以及其他方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:59:19.103

此行为与`simple_form`. 您没有为要调用的操作指定 url，也没有传递任何模型来推断其路径，因此您最终会得到`url_for()`在空哈希上调用的方法。此调用的结果是当前页面，这显然与显示表单的路径相同，但`POST`作为 HTML 动词。

要调用您的`sessions_path`而不是您的，`new_session_path`您可以执行以下操作：

```
= simple_form_for :session, url: :sessions do |f| 
```

通过 处理`url_for`，它实际上与指定相同，`url: sessions_path`但正在使您成为魔术师。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:00:34.597

我不使用haml，我使用erb，但我怀疑工作相似。在 erb 中，您的表单需要调用一个操作，例如：

```
 form_for :session, :url => {:action => "create"} do |f| 
```

这将调用会话控制器的 create 方法。所以我猜haml会是

```
 simple_form_for :session, :url => {:action => "create"} do |f| 
```

希望这可以帮助

# python - Python：从 JSON 中抓取 ID

> ID：11459250
> 
> 赞同：1
> 
> 时间：2012-07-12T19:30:00.840
> 
> 标签：python, json, list, filter, scrape

这个问题有点问，但一整天都让我头疼（因为我对编程还很陌生）。

基本上我有大量的 ID（命名为 pk），我需要获取所有这些 ID，因为它们被其他文本包围。

我将如何检索所有 ID？顺便说一下，每个 ID 看起来像这样：

```
"pk":12345678
"pk":123456789 
```

ID 是 8 位或 9 位数字。

非常感谢大家，任何帮助将不胜感激！

*编者注：Asker 确实在对此[答案](https://stackoverflow.com/a/11459592/418413)的评论中发布了他的[完整 json 数据](http://pastebin.com/CXNe2DCT)。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:54:17.297

```
ids = [var["pk"]] 
```

其中 var 是 JSON 的变量

如果你再澄清一下你的 JSON，我可能会更精确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:52:51.643

我只是使用[JSONPath](http://pypi.python.org/pypi/jsonpath/)。提取所有内容的一种简单但非常通用的方法`ids`是：

```
>>> from jsonpath import jsonpath
>>> from json import loads
>>> instagram_pop = open("instagram_popular_list.json"), "r").read()
>>> instagram_data = loads(instagram_pop)
>>> jsonpath(instagram_data, '$..id')[:3]
[u'234148392791340801_11305924', u'234098919041318605_2364270', u'234153616185741448_1907035'] 
```

当然，由于您的数据是平坦的，因此您可以直接使用循环，例如：

```
[item['id'] for item in instagram_data['items']] 
```

但我感觉你有更多的结构解析要做，所以我认为 jsonpath 是一个更灵活的答案。

# c++ - 字符串表 RGB 值

> ID：11459256
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:30:24.897
> 
> 标签：c++

我在我的项目中使用了一个字符串表，我想在其中存储 RGB 值。如何将 rgb 值从 LoadString char 转换为可用于 CreateSolidBrush 的 COLORREF 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:57:46.453

根据 MSDN`COLORREF`是一个`DWORD`typedef。所以`COLORREF cRef = RGB( 0, 0, 0 );`也是有效的。我了解到您正在尝试的是：

```
const char *szTable[] = { "RGB( 255, 255, 255)", "RGB( 255, 0, 255)" }; //etc
COLORREF dwMyColor = szTable[0]; 
```

`COLORREF`从字符串表中获取对象。我认为这是你应该做的而不是字符串表：

```
COLORREF dwColor1 = RGB( 255, 0, 255 );
COLORREF dwTable[] = { 0xff00ff00, 0xffffffff, dwColor1 }; 
```

为什么还需要一个字符串表来存储 RGB 值？我猜还不够清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:32:55.270

我用以下方法弄清楚了：

```
 LoadString(g_hInstance,IDS_STRING151,rBuffer,256);
                    LoadString(g_hInstance,IDS_STRING152,gBuffer,256);
                    LoadString(g_hInstance,IDS_STRING153,bBuffer,256);
                    int r,g,b;
                    if(EOF == sscanf_s(rBuffer, "%d", &r))
                    {
                      //error
                    }
                    if(EOF == sscanf_s(gBuffer, "%d", &g))
                    {
                      //error
                    }
                    if(EOF == sscanf_s(bBuffer, "%d", &b))
                    {
                      //error
                    } 
```

# ruby-on-rails - heroku restart 反弹杀死后台工作人员

> ID：11459258
> 
> 赞同：1
> 
> 时间：2012-07-12T19:30:32.277
> 
> 标签：ruby-on-rails, heroku, resque, restart

我们在 Heroku 上为我们的 Ruby on Rails 应用程序提供了背景（resque）工作。

当 Heroku 像昨天那样反弹盒子时，我们的后台工作就丢失了。
我们的后台作业运行大约 2 - 6 个小时。
有没有办法让它们保持运行或在失败后自动重新启动它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:37:09.013

简而言之，不，没有简单的方法（如果简单意味着对应用程序开发人员透明）。

处理此类中断的最佳方法是在接收到来自测功机歧管的[SIGTERM 信号](https://devcenter.heroku.com/articles/ps#graceful_shutdown_with_sigterm)时正确保存作业状态。您的工作人员测功机将在不同的物理位置重组，在那里它可以恢复处理中断的工作。

虽然这涉及额外的开发工作，但结果是一个更强大和更有弹性的应用程序（无论底层平台是什么）。

# android - 我想在android中创建自定义标签栏，标签必须右对齐，内容必须在左侧

> ID：11459262
> 
> 赞同：1
> 
> 时间：2012-07-12T19:30:44.810
> 
> 标签：android, android-layout, android-listview, tabwidget

我需要在 Android 中创建一个选项卡*右对齐*的布局，并且内容必须显示在**ListView的***左侧*。

 **请通过提供有用的建议来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:37:47.470

您可以为列表视图中的行项目使用 RelativeLayout。从那里你可以使用

```
android:layout_alignParentRight="true" 
```

在您的 xml 中，这将确保您放入的任何视图都在右侧。**

# objective-c - 在 uiimageview 中设置视网膜图像

> ID：11459264
> 
> 赞同：1
> 
> 时间：2012-07-12T19:31:00.593
> 
> 标签：objective-c, xcode, uiimageview, retina-display

今天我第一次在我的 iphone 上运行我的应用程序，但我所有的图像（我的背景图像也是）都很模糊，我阅读了苹果文档，我知道我应该使用双像素大小（640X960 而不是 320X460）。要设置我的图像背景，我只需使用 uiiamgeview 并将图像设置在 xib 文件中。现在，我的问题是如何从 .m 文件而不是我的 xib 文件中设置图像。当我尝试从 .m 文件设置图像时，我的图像比我的 uiimageview 大得多（我只看到图像的一部分）？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T19:32:56.643

当使用视网膜双倍尺寸图像时，您实际上不需要做任何事情，只要将它们加载到代码或 Interface Builder 中即可。

您只需要正确命名并确保它们在您的 Xcode 项目中。

例如，如果您有一个`image.png`，那么您的 Xcode 项目中也需要一个`image@2x.png`。在 Retina 设备上显示时，iOS 将自动使用正确的。

**更新：**回应您的评论。

这将创建一个 UIImageView 并将其设置为视图的大小。它与大多数人在 Interface Builder 中的操作非常相似。

```
- (void)viewDidLoad
{
    UIImageView *background = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"];
    [background setFrame:CGRect(0.0,0.0,self.view.frame.size.width,self.view.frame.size.height)];
    [self.view addSubview:background];
} 
```

# eclipse - 有没有好的 Equinox P2 核心 api 示例？

> ID：11459265
> 
> 赞同：2
> 
> 时间：2012-07-12T19:31:08.293
> 
> 标签：eclipse, equinox, p2

我在网上可以找到的所有内容都只是展示了非常简单的高级教程，例如如何在 RCP 应用程序中使用 P2 ui 或如何使用操作 api。

我真的找不到任何关于如何制作自定义 P2 安装过程的好信息。这些信息分散在各处，我能找到的所有高级教程都是针对 Helios 的，它具有临时 api，与 Indigo P2 api 不同。

作为我想做的一个想法，我的 RCP 应用程序连接到运行一些嵌入式硬件并传达一堆随机硬件状态信息的远程 PC。那台远程电脑上有一些 C 代码，我们会定期更新它的二进制文件，这会改变 RCP 应用程序与其通信的方式。

我想做的是在 IU 中拥有其他软件包可以依赖的二进制文件。然后当 P2 安装新的 IU 时，我可以运行另一个类，该类将在另一台计算机上远程安装二进制文件。

# iis - 这个重定向在哪里设置？

> ID：11459268
> 
> 赞同：0
> 
> 时间：2012-07-12T19:31:16.543
> 
> 标签：iis, redirect, coldfusion, web

我试图找出为我正在管理的网站设置一些重定向的位置。它是一个 IIS 服务器，应用程序主要是冷融合。我确信 IIS 设置没有指定任何重定向。我发现没有冷融合设置允许来自服务器端的重定向。冷融合文件中没有会导致此重定向的“< cflocation >”或标头更改。最后，任何 .htaccess 文件中都没有重定向。设置 301 重定向还有哪些其他可能的原因/位置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:02:46.700

也可以使用 cfheader 进行重定向：

```
<cfheader statuscode="301" statustext="Moved permanently" />
<cfheader name="location" value="http://www.mysite.com/new-location-for-content/" /> 
```

或者也可以有一个 Javascript 重定向，例如：

```
document.location='http://www.mysite.com/new-location-for-content/'; 
```

或者可能有一点ASP等等等等。

更多示例在这里[http://www.somacon.com/p145.php](http://www.somacon.com/p145.php)

# c++ - boost::optional 不允许我重新分配 const 值类型

> ID：11459270
> 
> 赞同：8
> 
> 时间：2012-07-12T19:31:36.730
> 
> 标签：c++, boost, assignment-operator, const-correctness, boost-optional

在我看来应该有四种变体`boost::optional`

*   `optional<Foo>`=> 持有一个可变的 Foo 并且可以在初始化后重新分配

*   `optional<Foo const> const`=> 持有一个 const Foo 并且在初始化后不能重新分配

*   `optional<Foo> const`=>（应该？）持有一个可变的 Foo 但在初始化后不能重新分配

*   `optional<Foo const>`=> (should?) 持有一个 const Foo 并且可以在初始化后重新分配

前 2 个案例按预期工作。但是对`optional<Foo> const`const Foo 的取消引用，并且`optional<Foo const>`不允许在初始化后重新分配（如[本问题](https://stackoverflow.com/questions/2306645/using-boostoptional-with-constant-types-c)所述）。

const 值类型的重新分配具体是我遇到的，错误是：

> /usr/include/boost/optional/optional.hpp:486：错误：将 'const Foo' 作为 'Foo& Foo::operator=(const Foo&)' 的 'this' 参数传递会丢弃限定符 [-fpermissive]

它发生在这里：

```
void assign_value(argument_type val,is_not_reference_tag) { get_impl() = val; } 
```

构造后，实现将赋值运算符用于您参数化可选项的类型。它显然不想要一个 const 值的左操作数。但是为什么不能将非 const 选项重置为新的 const 值，例如在这种情况下：

```
optional<Foo const> theFoo (maybeGetFoo());
while (someCondition) {

    // do some work involving calling some methods on theFoo
    // ...but they should only be const ones

    theFoo = maybeGetFoo();
} 
```

一些问题：

*   想要这个在概念上是好的，而不能做到这一点只是实施中的侥幸，我对吗？

*   如果我不编辑 boost 源，那么在不完全废弃 boost::optional 的情况下实现上述循环中的逻辑的干净方法是什么？

*   如果这确实有意义并且我要编辑 boost::optional 源（我已经不得不这样做以使其[支持可移动类型](https://stackoverflow.com/questions/10783391/is-it-possible-to-move-a-boostoptional)，尽管我怀疑他们很快就会自己这样做）那么微创更改可能做这个把戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:24:12.430

所以基本上这个问题似乎与[文档](http://www.boost.org/doc/libs/1_50_0/libs/optional/doc/html/boost_optional/detailed_semantics.html#reference_optional_operator_equal_value)中的这个注释有关`optional& optional<T (not a ref)>::operator= ( T const& rhs )`：

> **注意：**如果 *this 已初始化，则使用 T 的赋值运算符，否则使用其复制构造函数。

也就是说，假设你有`boost::optional<const Foo> theFoo;`. 由于默认构造`boost::optional<>`为空，因此语句：

```
theFoo=defaultFoo; 
```

应该意味着“将构造复制`defaultFoo`到`theFoo`内部存储中”。由于该内部存储中已经没有任何内容，因此这是有道理的，即使内部存储应该容纳`const Foo`. 一旦完成，`theFoo`就不会为空。

一旦`theFoo`包含一个值，语句

```
theFoo=defaultFoo; 
```

应该意味着“分配`defaultFoo`到`theFoo`内部存储中的对象”。但是`theFoo`s 内部存储是不可分配的（因为它是`const`），所以这应该会引发一个（编译时间？）错误。

不幸的是，您会注意到最后两个语句是相同的，但在概念上需要不同的编译时行为。但是，没有什么可以让编译器分辨出两者之间的区别。

* * *

特别是在您描述的场景中，将`boost::optional<...>`' 赋值运算符定义为具有语义可能更有意义：

> 如果 *this 被初始化，它的当前内容首先被销毁。然后`T`使用 的复制构造函数。

毕竟，`T`如果这是您真正想要做的事情，完全可以调用 ' 赋值运算符，只需说`*theFoo = rhs`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:46:57.107

回答你的三个问题：

1.  实现遵循 optional 的赋值使用 T 的赋值的设计理念；从这个意义上说，实施很好。
2.  optional 的设计考虑了可能的扩展。Optional 只是底层类 optional_base 的接口。您可以从 optional_base 派生自己的类，而不是使用 optional。optional_base 有一个受保护的成员结构，它几乎可以满足您的需要。您将需要一个新成员，例如 reset(T)，它首先清除 optional_base，然后调用construct()。
3.  或者，您可以将成员 reset(T) 添加到可选。这将是侵入性最小的更改。

你也可以试试[这个提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3406.html)中 optional 的参考实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T00:24:03.200

**(1)**对“应该”行为的看法取决于选项是*“零个或一个任意类型的对象的容器”*还是*“具有附加功能的类型的精简代理”*。现有代码采用后一种思路，通过这样做，将列表中的“四种不同行为”去掉了一半。这降低了复杂性，并防止您无意中引入低效的用法。

**(2)**对于任何`Foo`值可复制的类型，可以通过创建一个新选项轻松地在可变选项和不可变选项之间切换。所以在给定的情况下，你会简单地将它作为可变的，然后将它复制到一个不可变的值中。

```
optional<Foo> theMutableFoo (maybeGetFoo());
while (someCondition) {
    optional<Foo const> theFoo (theMutableFoo);

    // do some work involving calling some methods on theFoo
    // ...but they should only be const ones
    // ...therefore, just don't use theMutableFoo in here!

    theMutableFoo = maybeGetFoo();
} 
```

*考虑到它是类型的“瘦代理”的模型，如果类型没有包装在可选项中，这与您必须做的事情完全相同。在这种情况下，普通的 const 值类型需要同样的处理。*

**(3)** 必须跟进[@Andrzej 提供的信息](https://stackoverflow.com/a/11461199/211160)才能找到答案。但是这样的实现更改可能不会比每次都创建一个新的可选（如上面的循环）更好。最好接受现有的设计。

* * *

资料来源：[@R.MartinhoFernandez](https://stackoverflow.com/questions/11459270/boostoptional-not-letting-me-reassign-const-value-types/11479925#comment15126003_11459270)， @ [KerrekSB](https://stackoverflow.com/questions/11459270/boostoptional-not-letting-me-reassign-const-value-types/11479925#comment15126051_11459270)

# ssis - SSIS派生列将字符串转换为日期

> ID：11459272
> 
> 赞同：0
> 
> 时间：2012-07-12T19:31:55.123
> 
> 标签：ssis, bids

我正在尝试使用派生列将字符串转换为日期，并且我正在使用平面文件源。我阅读了大量关于 stackoverflow 的文章并遵循相同的步骤，但我无法将我的字符串转换为日期格式。

这是字符串

```
Tue Nov 25 17:32:03 EST 2008 
```

我想表现得像

```
2008-nov-25 
```

我尝试使用以下代码

```
(DT_DBDATE)(SUBSTRING(dateCreated,24,4) + "-" + SUBSTRING(dateCreated,4,3) + "-" +    SUBSTRING(dateCreated,8,2)) 
```

我也尝试使用

```
 (DT_DATE)(SUBSTRING(dateCreated,24,4) + "-" + SUBSTRING(dateCreated,4,3) + "-" +    SUBSTRING(dateCreated,8,2))

  (DT_DBTIMESTAMP)(SUBSTRING(dateCreated,24,4) + "-" + SUBSTRING(dateCreated,4,3) + "-" +    SUBSTRING(dateCreated,8,2)) 
```

这是将字符串转换为日期格式的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:15:59.437

我认为不可能按照[BOL](http://msdn.microsoft.com/en-us/library/ms187928.aspx)以 yyyy-mon-dd 的格式显示。我检查了你的表情，经过细微的改动，它就可以工作了。您不能再次将字符串类型转换为字符串（您希望输出中的月份名称）。即使您要使用 DATEPART 函数，它也会再次将不同的部分连接成一个字符串。

与您的输入一起使用的表达式如下（将 @dateCreated 替换为您想要的任何内容）。

```
SUBSTRING(@[User::dateCreated],24,5) + "-" + SUBSTRING(@[User::dateCreated],4,4) + "-" + SUBSTRING(@[User::dateCreated],8,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:51:20.633

谢谢拉吉夫！

因此，给出所需结果的最终表达式是：-

```
(DT_DBTIMESTAMP)(SUBSTRING(dateCreated,24,5) + "-" + SUBSTRING(dateCreated,4,4) + "-" + SUBSTRING(dateCreated,8,3) + " " + SUBSTRING(dateCreated,11,9)) 
```

输入是： -

```
Tue Nov 25 17:47:41 EST 2008 
```

输出是： -

```
2008-11-25 17:47:41.000 
```

# mysql - Rails 在分区的 mySQL 表上过多的 DESCRIBE 和 SHOW TABLES

> ID：11459273
> 
> 赞同：0
> 
> 时间：2012-07-12T19:32:00.180
> 
> 标签：mysql, ruby-on-rails, activerecord

我们在生产环境中看到了大量的`SHOW TABLES;`查询`DESCRIBE `table name`;`——不仅仅是在 Rails 服务器重启时。我们注意到它仅适用于我们的分区表。这是在 Rails 3.1.1 上 - 未在其他版本上测试。

在开发控制台（使用`cache_classes = true`）中进行测试时，我们注意到对于分区模型，Rails 对从任何 find 方法返回的**每条记录**`SHOW TABLES;`运行一个和一个。`DESCRIBE `table name`;`

 **例如，如果`items`已分区，并`Item.limit(5)`返回 5 条记录，mySQL 日志如下所示（注意：Rails 日志中不包含`SHOW TABLES`AND ）：`DESCRIBE`

```
SELECT  `items`.* FROM `items`  LIMIT 5;
SHOW TABLES;
DESCRIBE `items`;
SHOW TABLES;
DESCRIBE `items`;
SHOW TABLES;
DESCRIBE `items`;
SHOW TABLES;
DESCRIBE `items`;
SHOW TABLES;
DESCRIBE `items`; 
```

这太疯狂了。

非分区模型不做任何`SHOW TABLES`' 和`DESCRIBE`'，当然除了在启动 Rails 服务器时。看起来如果 AR 模型不知道它的主键，AR 必须在每次实例化该模型的对象时获取模式。

如果`cache_classes`设置为`true`，您会认为 Rails 会/应该缓存模式，即使是没有已知主键的模型。但事实并非如此。

您不会这么认为，`SHOW TABLES`并且`DESCRIBE`会对系统产生任何实际影响，但我们发现在足够大的流量下，由于对一个分区表的这些额外查询导致的并发读取会导致真正的性能问题。

我们怎样才能摆脱这些查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:32:00.787

The [composite_primary_keys](http://compositekeys.rubyforge.org/) gem saved the day. I remember seeing this gem a long time ago, but never used it. The intended features of the gem will definitely simplify our partitioned models when we start using those methods, but a side-effect of using the gem was more important:

Just telling Rails the `primary_key` of each partitioned table removed all the `SHOW TABLES`'s and `DESCRIBE`'s, which brought us well below the explode-due-to-read-concurrency threshold and improved response times.**

# wpf - 正确使用 WPF kiosk 触摸屏应用程序的 Viewbox

> ID：11459284
> 
> 赞同：2
> 
> 时间：2012-07-12T19:32:12.993
> 
> 标签：wpf, touch, screen, kiosk

是否有某种“最佳实践”手册来为信息亭触摸屏创建适当的 GUI？这些应用程序需要在不同的屏幕分辨率和更重要的屏幕比率上具有一致的外观和感觉（因为所有内容都呈现为矢量，因此屏幕分辨率和 DPI 不应该成为 WPF 的问题）。

以这个截图为例，我尝试为触摸屏创建简单的键盘。我使用了 UniformGrid 以便每个按钮都获得相同大小的单元格：

![在此处输入图像描述](../Images/2dc4fe720fc99f3895545009796084bc.png)

这是此的代码：

```
 <TabItem Header="Test 1">
        <ItemsControl ItemsSource="{Binding KeyboardItems}" SnapsToDevicePixels="True">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Viewbox Margin="5">
                        <Button Content="{Binding}"></Button>
                    </Viewbox>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="8" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </TabItem> 
```

请注意，所有按钮都根据内容调整大小，使其不可拉伸，因此每个按钮都有自己的大小……这就是 Viewbox 缩放其内容的方式，当然这种 GUI 是没有问题的。这不是我想在某些信息亭应用程序上使用的键盘，所以下一个更好的版本如下：

![在此处输入图像描述](../Images/cfbcac791270f932c3cb6c310ba63d57.png)

```
 <TabItem Header="Test 2">
        <ItemsControl ItemsSource="{Binding KeyboardItems}" SnapsToDevicePixels="True">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                        <Button Margin="5">
                            <Viewbox>
                                <TextBlock Text="{Binding}" />
                            </Viewbox>
                        </Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="8" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </TabItem> 
```

现在这有点好，因为 Viewbox 现在包装内容而不是整个按钮。但是请注意，因为我们现在包装按钮的内容而不是整个按钮，所以按钮的边框现在没有缩放。我希望它也可以缩放，而不仅仅是内容。在第一个示例中，我们有这个，但 GUI 的整体外观很糟糕。

另请注意，在此版本中，我将 Margin 设置为 Button 和 Viewbox 上的第一个版本。这意味着在第一个版本中，边距也会缩放（我想要那个！），而在第二个版本中，它对于任何屏幕尺寸都是恒定的。因此，对于真正的大屏幕，按钮之间的空白将变得相对较小，尽管它们的大小绝对是恒定的（不是我想要的！）。

下面是生成键盘按钮的代码：

```
public partial class MainWindow : Window
{
    public List<string> KeyboardItems { get; set; }

    public MainWindow()
    {
        KeyboardItems = new List<string>();
        for (char c = 'A'; c <= 'Z'; c++)
        {
            KeyboardItems.Add(c.ToString());
        }
        KeyboardItems.Add("Space");

        DataContext = this;
        InitializeComponent();
    }
} 
```

像这样的问题都围绕着 WPF 触摸屏信息亭的开发，所以我想听听您在处理缩放问题时提出的一些想法和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:38:31.163

您没有向我们展示测试 3，我认为可能是这样的：

```
<TabItem Header="Test 3">
    <Viewbox>
        <ItemsControl ItemsSource="{Binding KeyboardItems}" SnapsToDevicePixels="True">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                        <Button Margin="5">
                            <TextBlock Text="{Binding}" />
                        </Button>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid Columns="8" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Viewbox>
</TabItem> 
```

有没有达到预期的效果？

# c++ - 有没有办法使用可变参数模板来实现策略模式？

> ID：11459294
> 
> 赞同：2
> 
> 时间：2012-07-12T19:32:44.020
> 
> 标签：c++, c++11, variadic-templates, strategy-pattern

我想将不同的算法封装为策略。所有策略都将提供一种可能在参数数量和类型上有所不同的方法。

```
template <typename... Arguments>
double price(Arguments... parameters) 
```

策略不应直接在使用它们的类中编码。有没有使用可变参数模板实现策略设计模式的简单方法？我也知道“基于策略的设计”，我正在尝试使用可变参数模板来实现类似的东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:27:21.130

你的意思是，你想要有需要不同参数的策略，可以由策略的用户透明地转发，而不知道任何实际参数？

演示（*我希望是做作但说明性的*）。**[在http://ideone.com/MExyx](http://ideone.com/MExyx)**上现场观看

```
#include <string>
#include <iostream>

struct StratA {
    enum gender { male, female, unknown };
    double price(std::string name, int age, gender g) const
    { return 42; }
};

struct StratB {
    double price(int age, int volume, double historic_rate) const
    { return (age*age*historic_rate)/volume; }
};

template <typename PricingStrategy=StratA>
struct SomeEngine
{
    template <typename... Args>
    void doSomethingInvolvingPricing(std::string logmessage,
            Args... args) // involving pricing
    {
        std::cout << logmessage << ": " << PricingStrategy().price(std::forward<Args>(args)...) << '\n';
    }
};

int main()
{
    SomeEngine<>().doSomethingInvolvingPricing("default", "name", 18, StratA::female);
    SomeEngine<StratB>().doSomethingInvolvingPricing("overridden", 18, 3000, 4.5);
} 
```

输出（也在[ideone](http://ideone.com/MExyx)上）：

```
default: 42
overridden: 0.486 
```

# .net - 实体模型向导缺少表格文档

> ID：11459298
> 
> 赞同：1
> 
> 时间：2012-07-12T19:33:00.813
> 
> 标签：.net, oracle, entity-framework, odac

我正在使用 ODAC 11.2 r4 在 Visual Studio 2010 中创建实体模型。现在我正在测试所有向导将从我的 oracle 数据库中自动生成的内容，我想弄清楚如何根据数据库生成文档。我已经为我的表和列设置了注释，但实体端没有显示。有没有办法让我的文档从这些评论或我在数据库端设置的其他字符串中自动生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:47:41.100

不幸的是，EF 不支持此功能。甚至对于 SQL Server 也不行。但是，有一些 3rd 方工具支持这一点。对于 SQL 服务器：[Entity Framework SQL Server 文档生成器](http://eftsqldocgenerator.codeplex.com/)（免费）。对于 Oracle [dotConnect for Oracle](http://www.devart.com/dotconnect/oracle/)（商业）。（v. 6.70 支持将注释传输到摘要属性。）

# button - FlashBuilder/Spark :: Mobile Project :: 更改视图操作栏中按钮的颜色

> ID：11459299
> 
> 赞同：1
> 
> 时间：2012-07-12T19:33:03.263
> 
> 标签：button, mobile, view, colors, flex-spark

FlashBuilder/Spark 移动项目视图操作栏。

目前，如果您在操作栏中设置按钮的 chromeColor，它只会在按钮处于按下状态时显示。它不会改变按钮默认状态的颜色。我找不到任何样式来设计它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:35:08.410

经过一番挖掘，我发现TransparentActionButtonSkin.as 覆盖了drawBrackground 函数，并专门删除了chromeColor，只允许它在按钮按下状态下显示。

我用自己的班级取代了那个“小宝石”。

```
package view_components
{
    import mx.core.mx_internal; 
    import spark.skins.mobile.TransparentActionButtonSkin;

    use namespace mx_internal;

    public class ActionbarColoredButton extends TransparentActionButtonSkin
    {
        public function ActionbarColoredButton()
        {
            super();
        }

        override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void
        {
            // omit super.drawBackground() to drawRect instead
            // only draw chromeColor in down state (transparent hit zone otherwise)

            //NO, I want colored action buttons
            var chromeColor:uint = getStyle(fillColorStyleName);
            var chromeAlpha:Number = 1;

            graphics.beginFill(chromeColor, chromeAlpha);
            graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
            graphics.endFill();
        }
    }
} 
```

# java - 将旋转对象与数值对应

> ID：11459300
> 
> 赞同：8
> 
> 时间：2012-07-12T19:33:05.620
> 
> 标签：java, android, rotation, translate-animation

我有一个 360 度旋转的密码锁。

密码锁上有数值，这些都是纯图形的。

我需要一种方法将图像的旋转转换为图形上的 0-99 值。

在第一个图形中，值应该能够告诉我“0”

[![](../Images/f02b7ac8549fc1d225ed5598b074a747.png)](https://i.stack.imgur.com/vhA9W.png)

在这个图形中，用户旋转图像后，该值应该可以告诉我“72”

[![](../Images/7387920dc04e40ec23391a40d2c1364d.png)](https://i.stack.imgur.com/SepCO.png)

这是代码：

```
package co.sts.combinationlock;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.util.Log;
import android.view.GestureDetector;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View.OnTouchListener;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.widget.ImageView;
import android.support.v4.app.NavUtils;

public class ComboLock extends Activity{

        private static Bitmap imageOriginal, imageScaled;
        private static Matrix matrix;

        private ImageView dialer;
        private int dialerHeight, dialerWidth;

        private GestureDetector detector;

        // needed for detecting the inversed rotations
        private boolean[] quadrantTouched;

        private boolean allowRotating;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_combo_lock);

        // load the image only once
        if (imageOriginal == null) {
                imageOriginal = BitmapFactory.decodeResource(getResources(), R.drawable.numbers);
        }

        // initialize the matrix only once
        if (matrix == null) {
                matrix = new Matrix();
        } else {
                // not needed, you can also post the matrix immediately to restore the old state
                matrix.reset();
        }

        detector = new GestureDetector(this, new MyGestureDetector());

        // there is no 0th quadrant, to keep it simple the first value gets ignored
        quadrantTouched = new boolean[] { false, false, false, false, false };

        allowRotating = true;

        dialer = (ImageView) findViewById(R.id.locknumbers);
        dialer.setOnTouchListener(new MyOnTouchListener());
        dialer.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

                @Override
                        public void onGlobalLayout() {
                        // method called more than once, but the values only need to be initialized one time
                        if (dialerHeight == 0 || dialerWidth == 0) {
                                dialerHeight = dialer.getHeight();
                                dialerWidth = dialer.getWidth();

                                // resize
                                        Matrix resize = new Matrix();
                                        //resize.postScale((float)Math.min(dialerWidth, dialerHeight) / (float)imageOriginal.getWidth(), (float)Math.min(dialerWidth, dialerHeight) / (float)imageOriginal.getHeight());
                                        imageScaled = Bitmap.createBitmap(imageOriginal, 0, 0, imageOriginal.getWidth(), imageOriginal.getHeight(), resize, false);

                                        // translate to the image view's center
                                        float translateX = dialerWidth / 2 - imageScaled.getWidth() / 2;
                                        float translateY = dialerHeight / 2 - imageScaled.getHeight() / 2;
                                        matrix.postTranslate(translateX, translateY);

                                        dialer.setImageBitmap(imageScaled);
                                        dialer.setImageMatrix(matrix);
                        }
                        }
                });

    }

        /**
         * Rotate the dialer.
         *
         * @param degrees The degrees, the dialer should get rotated.
         */
        private void rotateDialer(float degrees) {
                matrix.postRotate(degrees, dialerWidth / 2, dialerHeight / 2);

                //need to print degrees

                dialer.setImageMatrix(matrix);
        }

        /**
         * @return The angle of the unit circle with the image view's center
         */
        private double getAngle(double xTouch, double yTouch) {
                double x = xTouch - (dialerWidth / 2d);
                double y = dialerHeight - yTouch - (dialerHeight / 2d);

                switch (getQuadrant(x, y)) {
                        case 1:
                                return Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

                        case 2:
                        case 3:
                                return 180 - (Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI);

                        case 4:
                                return 360 + Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

                        default:
                                // ignore, does not happen
                                return 0;
                }
        }

        /**
         * @return The selected quadrant.
         */
        private static int getQuadrant(double x, double y) {
                if (x >= 0) {
                        return y >= 0 ? 1 : 4;
                } else {
                        return y >= 0 ? 2 : 3;
                }
        }

        /**
         * Simple implementation of an {@link OnTouchListener} for registering the dialer's touch events.
         */
        private class MyOnTouchListener implements OnTouchListener {

                private double startAngle;

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                        switch (event.getAction()) {

                                case MotionEvent.ACTION_DOWN:

                                        // reset the touched quadrants
                                        for (int i = 0; i < quadrantTouched.length; i++) {
                                                quadrantTouched[i] = false;
                                        }

                                        allowRotating = false;

                                        startAngle = getAngle(event.getX(), event.getY());
                                        break;

                                case MotionEvent.ACTION_MOVE:
                                        double currentAngle = getAngle(event.getX(), event.getY());
                                        rotateDialer((float) (startAngle - currentAngle));
                                        startAngle = currentAngle;
                                        break;

                                case MotionEvent.ACTION_UP:
                                        allowRotating = true;
                                        break;
                        }

                        // set the touched quadrant to true
                        quadrantTouched[getQuadrant(event.getX() - (dialerWidth / 2), dialerHeight - event.getY() - (dialerHeight / 2))] = true;

                        detector.onTouchEvent(event);

                        return true;
                }
        }

        /**
         * Simple implementation of a {@link SimpleOnGestureListener} for detecting a fling event.
         */
        private class MyGestureDetector extends SimpleOnGestureListener {
                @Override
                public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

                        // get the quadrant of the start and the end of the fling
                        int q1 = getQuadrant(e1.getX() - (dialerWidth / 2), dialerHeight - e1.getY() - (dialerHeight / 2));
                        int q2 = getQuadrant(e2.getX() - (dialerWidth / 2), dialerHeight - e2.getY() - (dialerHeight / 2));

                        // the inversed rotations
                        if ((q1 == 2 && q2 == 2 && Math.abs(velocityX) < Math.abs(velocityY))
                                        || (q1 == 3 && q2 == 3)
                                        || (q1 == 1 && q2 == 3)
                                        || (q1 == 4 && q2 == 4 && Math.abs(velocityX) > Math.abs(velocityY))
                                        || ((q1 == 2 && q2 == 3) || (q1 == 3 && q2 == 2))
                                        || ((q1 == 3 && q2 == 4) || (q1 == 4 && q2 == 3))
                                        || (q1 == 2 && q2 == 4 && quadrantTouched[3])
                                        || (q1 == 4 && q2 == 2 && quadrantTouched[3])) {

                                dialer.post(new FlingRunnable(-1 * (velocityX + velocityY)));
                        } else {
                                // the normal rotation
                                dialer.post(new FlingRunnable(velocityX + velocityY));
                        }

                        return true;
                }
        }

        /**
         * A {@link Runnable} for animating the the dialer's fling.
         */
        private class FlingRunnable implements Runnable {

                private float velocity;

                public FlingRunnable(float velocity) {
                        this.velocity = velocity;
                }

                @Override
                public void run() {
                        if (Math.abs(velocity) > 5 && allowRotating) {
                                //rotateDialer(velocity / 75);
                                //velocity /= 1.0666F;

                                // post this instance again
                                dialer.post(this);
                        }
                }
        }
} 
```

我想我需要将矩阵中的一些信息转换为 0-99 值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T04:02:38.397

您应该完全重新组织您的代码。一遍又一遍地将新的旋转后乘到矩阵中是一种数值不稳定的计算。最终位图会变形。尝试从矩阵中检索旋转角度过于复杂且不必要。

首先请注意，[这](https://stackoverflow.com/questions/4166917/android-how-to-rotate-a-bitmap-on-a-center-point)是一篇有用的先前文章，关于围绕选定点旋转绘制位图。

只需保持一个单一`double dialAngle = 0`的，即表盘的当前旋转角度。

您正在做太多工作来从触摸位置检索角度。让`(x0,y0)`成为触摸开始的位置。当时，

```
// Record the angle at initial touch for use in dragging.
dialAngleAtTouch = dialAngle;
// Find angle from x-axis made by initial touch coordinate.
// y-coordinate might need to be negated due to y=0 -> screen top. 
// This will be obvious during testing.
a0 = Math.atan2(y0 - yDialCenter, x0 - xDialCenter); 
```

这是起始角度。当触摸拖动到 时`(x,y)`，使用此坐标相对于初始触摸调整转盘。然后更新矩阵并重绘：

```
// Find new angle to x-axis. Same comment as above on y coord.
a = Math.atan2(y - yDialCenter, x - xDialCenter);
// New dial angle is offset from the one at initial touch.
dialAngle = dialAngleAtTouch + (a - a0); 
// normalize angles to the interval [0..2pi)
while (dialAngle < 0) dialAngle += 2 * Math.PI;
while (dialAngle >= 2 * Math.PI) dialAngle -= 2 * Math.PI;

// Set the matrix for every frame drawn. Matrix API has a call
// for rotation about a point. Use it!
matrix.setRotate((float)dialAngle * (180 / 3.1415926f), xDialCenter, yDialCenter);

// Invalidate the view now so it's redrawn in with the new matrix value. 
```

Note`Math.atan2(y, x)`完成了您对象限和反正弦所做的所有操作。

要得到当前角度的“刻度”，需要2个pi弧度对应100，所以很简单：

```
double fractionalTick = dialAngle / (2 * Math.Pi) * 100; 
```

要以整数形式找到实际最近的刻度，请将分数四舍五入并以 100 取模。请注意，您可以忽略矩阵！

```
 int tick = (int)(fractionalTick + 0.5) % 100; 
```

这将始终有效，因为`dialAngle`在 [0..2pi) 中。需要使用 mod 将舍入值 100 映射回 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T19:52:40.960

为了更好地理解矩阵的作用，了解 2d 图形变换矩阵会很有帮助：[http](http://en.wikipedia.org/wiki/Transformation_matrix#Examples_in_2D_graphics) ://en.wikipedia.org/wiki/Transformation_matrix#Examples_in_2D_graphics 。如果您唯一要做的事情是旋转（而不是变换或缩放），那么提取旋转相对容易。但是，更实际的是，您可以修改旋转代码，并存储一个状态变量

```
 private float rotationDegrees = 0;

    /**
     * Rotate the dialer.
     *
     * @param degrees The degrees, the dialer should get rotated.
     */
    private void rotateDialer(float degrees)
            matrix.postRotate(degrees, dialerWidth / 2, dialerHeight / 2);

            this.rotationDegrees += degrees;

            // Make sure we don't go over 360
            this.rotationDegrees = this.rotationDegrees % 360

            dialer.setImageMatrix(matrix);
    } 
```

保留一个变量来存储以度为单位的总旋转，您可以在旋转函数中递增该值。现在，我们知道 3.6 度是一个刻度。简单的数学收益率

```
tickNumber = (int)rotation*100/360
// It could be negative
if (tickNumber < 0)
    tickNumber = 100 - tickNumber 
```

您必须检查的最后一件事：如果您的旋转*正好是*360 度，或者刻度数为 100，则必须将其视为 0（因为没有刻度 100）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T19:43:33.700

这应该是一个简单的乘法，带有一个“比例”因子，将您的度数（0-359）缩小到您的 0-99 比例：

```
float factor = 99f / 359f;
float scaled = rotationDegree * factor; 
```

编辑：更正 getAngle 函数

对于 getAngle，您可以改用[atan2](http://en.wikipedia.org/wiki/Atan2)函数，它将笛卡尔坐标转换为角度。

只需在触地和移动时存储第一个触摸坐标，您就可以应用以下计算：

```
 // PointF a = touch start point
            // PointF b = current touch move point

            // Translate to origin:
            float x = b.x - a.x;
            float y = b.y - a.y;

            float radians = (float) ((Math.atan2(-y, x) + Math.PI + HALF_PI) % TWO_PI); 
```

弧度的范围为两个 pi。模计算将其旋转，因此值为 0 点。旋转方向为逆时针方向。

因此，您需要将其转换为度数并更改旋转方向以获得正确的角度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T11:26:12.823

表盘应精确旋转 3.6 度，以从一个标记转到下一个或上一个标记。每次用户触摸（围绕中心）旋转 3.6 度，表盘应旋转 1 标记（3.6 度）。

代码片段：

```
float touchAngle = getTouchAngle();
float mark = touchAngle / 3.6f;
if (mCurrentMark != mark) { 
    setDialMark(mark); 
} 
```

*   `getTouchAngle()`使用 计算用户触摸点与拨号中心的角度`atan2`。
*   `setDialMark`按更改的标记数旋转刻度盘。

.

```
void setDialMark(int mark) {  
    rotateDialBy(mCurrentMark - mark);  
    mCurrentMark = mark;    
}

void rotateDialBy(int rotateMarks) {
    rotationAngle = rotateMarks * 3.6;
    ...
    /* Rotate the dial by rotationAngle.   */
} 
```

# sql-server - 字符串中第一个字符的 T-SQL 索引

> ID：11459304
> 
> 赞同：2
> 
> 时间：2012-07-12T19:33:28.417
> 
> 标签：sql-server, string, tsql, character, indexof

如何使用 T-SQL 找到字符串中第一个数字字符的索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:36:32.510

我使用[`PATINDEX`](http://msdn.microsoft.com/en-us/library/ms188395.aspx)：

```
select patindex('%[0-9]%', 'My1String') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:36:58.160

```
select PATINDEX('%[0-9]%', 'your_12345_string') 
```

请参阅[文档](http://msdn.microsoft.com/en-us/library/ms188395.aspx)
[SQLFiddle](http://sqlfiddle.com/#!3/d41d8/2522)

# css - 仅带有图像的链接上的 CSS 过渡

> ID：11459306
> 
> 赞同：0
> 
> 时间：2012-07-12T19:33:41.737
> 
> 标签：css, hyperlink, css-transitions

如何仅在具有图像而不是文本的链接上应用过渡。例如仅在第二个链接中：

```
<a href="#">no image</a>
<a href="#"><img src="http://i.qkme.me/35rb4r.jpg"></a> 
```

以下 CSS 将在所有链接上应用过渡：

```
a{   
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

a:hover{
    opacity:0.1;
} 
```

我已经尝试过了，但不起作用。

```
a:hover img{
    opacity:0.1;
} 
```

这是jsfiddle：http: [//jsfiddle.net/wg5b3/](http://jsfiddle.net/wg5b3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:39:47.310

您不能通过 css 选择父元素。但是你真的可以直接设置图像的样式，即

```
a > img {transition: opacity 0.5s;}
a > img:hover {opacity 0.1;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:42:29.353

```
a > img:hover{
    opacity:0.1;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:55:41.347

你也可以试试这个：

```
a{   
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

a:hover #hello{
    opacity:0.1;
}

<a href="#">no image</a>
<a href="#" id="hello" ><img src="http://i.qkme.me/35rb4r.jpg"></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:37:53.387

```
a img:hover {
    opacity:0.1;
} 
```

# c# - 如何在 C# 中搜索字符串数组以查找匹配项，就像在我的代码中一样

> ID：11459311
> 
> 赞同：0
> 
> 时间：2012-07-12T19:34:04.323
> 
> 标签：c#

有没有办法在 C# 中执行以下操作，但我正在寻找 .indexOf 并没有突出我。它是否存在，或者我应该使用什么其他方法？

```
string t = "joke";
string sentence = "there is no joke here";
string[] array = sentence.Split(" ".ToCharArray());

//here is the kicker
int count = array.indexOf(t);
return count; 
```

这应该返回 3??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:36:07.440

怎么样[`Array.IndexOf()`](http://msdn.microsoft.com/en-us/library/eha9t187.aspx)？

```
var index = Array.IndexOf(array, t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:38:27.120

使用[Array.IndexOf](http://msdn.microsoft.com/en-us/library/eha9t187.aspx)

```
int count = Array.IndexOf(array, t); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:38:44.527

Array.IndexOf 是静态方法，所以你应该像这样使用它：

```
int count = Array.IndexOf(array, t); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:37:31.317

这将给出元素的索引...

```
int keyIndex = array.ToList().FindIndex(w => w=="joke"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T19:39:42.387

```
int indexOfWord = Array.FindIndex(sentence.Split(' '), w => w == t); 
```

您不必这样做`Split(" ".ToCharArray())`，因为 Split 方法的定义中有`params`关键字。编译器会自动为您转换`Split(' ')`为`Split(new char[] {' '})`;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T19:40:36.543

你很接近：[Array.IndexOf](http://msdn.microsoft.com/en-us/library/system.array.indexof.aspx)是 Array 中的静态方法。所以你会有

```
int index = Array.IndexOf<string>(words, "no"); 
```

看到不同？

# visual-studio-2010 - BundleTable.Bundles.RegisterTemplateBundles

> ID：11459312
> 
> 赞同：6
> 
> 时间：2012-07-12T19:34:08.947
> 
> 标签：visual-studio-2010, asp.net-mvc-4, asp.net-optimization

我有用 VS2010 创建的 MVC4 RC 项目。我不确定发生了什么，突然间我开始收到以下错误：

> 错误 1“System.Web.Optimization.BundleCollection”不包含“RegisterTemplateBundles”的定义，并且找不到接受“System.Web.Optimization.BundleCollection”类型的第一个参数的扩展方法“RegisterTemplateBundles”（您是否缺少使用指令还是程序集引用？） C:\xxxx\xxxx\Global.asax.cs 40 33 xxxx

错误来自 Application_Start()：

```
protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);

            BundleTable.Bundles.RegisterTemplateBundles();

        } 
```

我的 Global.asax.cs 文件中有以下 using 语句：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing; 
```

有任何想法吗？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T22:48:19.543

您是否将优化包升级到 RC？我们删除了该方法，而是将捆绑配置移动到由新项目/网站模板创建的 BundleConfig.cs 类中。它有一个名为 RegisterBundles 的静态方法，它显式地向您显示正在注册的捆绑包，您应该可以在 global.asax 中调用它（您可能需要调整捆绑包以匹配您现有的应用程序）。目标是希望使捆绑设置更加透明且易于调整。

# performance - 我可以使用 LIMIT 来加速 SPARQL 查询吗？

> ID：11459314
> 
> 赞同：2
> 
> 时间：2012-07-12T19:34:25.853
> 
> 标签：performance, limit, sparql

我有大量来自查询的结果，用户可以通过输入搜索词来细化这些结果。但是，当有很多很多结果时，我不需要显示所有结果。

我注意到，当我在我的 SPARQL 查询中使用 LIMIT 时，查询所用的时间也一样长。有没有办法以“中断”方式使用 LIMIT 来缩短处理时间？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:28:26.080

不，查询的`LIMIT`任何部分的实现都取决于底层查询引擎。

一些查询引擎可能`LIMIT`以这样的方式实现，它比获取所有结果更快，但这并不一定适用于每个查询（也不适用于每个查询引擎）

根据用于进行查询和处理结果的框架，您可能能够以只查看您关心的部分结果的方式处理结果，但这可能无法解决您的问题。

# qt - 应用 QGraphicsItem::ItemIgnoresTransformations 后保持相对子位置

> ID：11459318
> 
> 赞同：8
> 
> 时间：2012-07-12T19:34:51.550
> 
> 标签：qt, qt4, qgraphicsview

我有一个 QGraphicsTextItem 的父级 QGraphicsItem。我希望 QGraphicsTextItem 始终位于 QGraphicsItem 的正上方，但我也希望文本在比例因子低于 1 时保持相同的大小，即即使父图形也保持比例因子为 1 的大小项目缩小。我发现`QGraphicsItem::ItemIgnoresTransformations`当比例因子低于 1 时将标志设置为 true 可以保持大小。

但我似乎无法找到一种方法让文本的位置始终保持在 QGraphicsItem 之上。有没有办法做到这一点？我尝试使用`deviceTransform ()`函数，但当我滚动出去时，文本仍然从 QGraphicsItem 移开。更糟糕的是，一些文本项开始“抖动”，即它们开始不断地改变它们的位置，非常轻微，以至于看起来它们在抖动。如果这是我需要使用的功能，我想我不知道如何正确使用它。

在我的 QGraphicsItem 的构造函数中，我添加了一个 QGraphicsTextItem：

```
fTextItem = new QGraphicsTextItem(getName(), this);
fTextItem->setFlag(QGraphicsItem::ItemIgnoresTransformations); 
```

这是 QGraphicsItem 的绘制函数的代码片段

```
qreal lod = painter->worldTransform().m22();
if(lod <= 1.0) {
     fTextItem-setFlag(QGraphicsItem::ItemIgnoresTransformations);
     fTextItem->setPos(fTextItem->deviceTransform(view-viewportTransform()).inverted().map(view->mapFromScene(mapToScene(0,0))));
} else {
     fTextItem->setFlag(QGraphicsItem::ItemIgnoresTransformations, false);
     fTextItem->setPos(0, 0);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T00:29:29.367

我的建议是以这种方式继承 QGraphicsSimpleTextItem ：

```
class TextItem
    : public QGraphicsSimpleTextItem
{
public:
    TextItem(const QString &text)
        : QGraphicsSimpleTextItem(text)
    {

    }
    void paint(QPainter *painter, 
        const QStyleOptionGraphicsItem *option, QWidget *widget)
    {
        painter->translate(boundingRect().topLeft());
        QGraphicsSimpleTextItem::paint(painter, option, widget);
        painter->translate(-boundingRect().topLeft());
    }
    QRectF boundingRect() const
    {
        QRectF b = QGraphicsSimpleTextItem::boundingRect();
        return QRectF(b.x()-b.width()/2.0, b.y()-b.height()/2.0, 
            b.width(), b.height());
    }
};
QGraphicsSimpleTextItem *mText = new TextItem("Item");
scene()->addItem(mText);
mText->setFlag(QGraphicsItem::ItemIgnoresTransformations, true);
mText->setPos(itemToFollow->pos()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T20:11:37.653

*免责声明：这对于您正在尝试做的事情来说可能是矫枉过正。我们的项目中有一些额外的限制，使这个解决方案对我们来说最简单。*

我们必须在项目中做类似的事情，最终我们最容易不使用`ItemIgnoresTransformations`而是滚动我们自己的变换。这是我们用于创建仅平移（无缩放）变换以在特定位置绘制项目的主要函数。您可以根据自己的使用情况对其进行修改。

```
static QTransform GenerateTranslationOnlyTransform(
    const QTransform &original_transform,
    const QPointF &target_point) {
  // To draw the unscaled icons, we desire a transform with scaling factors
  // of 1 and shearing factors of 0 and the appropriate translation such that
  // our icon center ends up at the same point. According to the
  // documentation, QTransform transforms a point in the plane to another
  // point using the following formulas:
  // x' = m11*x + m21*y + dx
  // y' = m22*y + m12*x + dy
  //
  // For our new transform, m11 and m22 (scaling) are 1, and m21 and m12
  // (shearing) are 0\. Since we want x' and y' to be the same, we have the
  // following equations:
  // m11*x + m21*y + dx = x + dx[new]
  // m22*y + m12*x + dy = y + dy[new]
  //
  // Thus,
  // dx[new] = m11*x - x + m21*y + dx
  // dy[new] = m22*y - y + m12*x + dy
  qreal dx = original_transform.m11() * target_point.x()
             - target_point.x()
             + original_transform.m21() * target_point.y()
             + original_transform.m31();
  qreal dy = original_transform.m22() * target_point.y()
             - target_point.y()
             + original_transform.m12() * target_point.x()
             + original_transform.m32();

  return QTransform::fromTranslate(dx, dy);
} 
```

要使用，请使用`QPainter`传递给paint方法的转换并执行以下操作：

```
painter->save();
painter->setTransform(GenerateTranslationOnlyTransform(painter->transform(),
                                                       some_point));
// Draw your item.
painter->restore(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T09:14:33.363

戴夫·马特（Dave Mateer）的回答很好！我有一个问题，我想在不同的缩放级别定义不同的比例因子。我是这样做的：

```
void MyGraphicsItem::paint(QPainter * painter, const QStyleOptionGraphicsItem* option, QWidget* widget)
{
    //save painter for later operations
    painter->save();
    QTransform originalTransform = painter->transform();
    QPointF originalCenter = rect().center();
    qreal dx = originalTransform.m11() * originalCenter.x() + originalTransform.m21() * originalCenter.y() + originalTransform.m31();
    qreal dy = originalTransform.m22() * originalCenter.y() + originalTransform.m12() * originalCenter.x() + originalTransform.m32();
    //normally our target scale factor is 1, meaning the item has keeps its size, regardless of zoom
    //we adjust the scale factor though when the item is smaller than one pixel in comparison to the background image
    qreal factor = 1.0;
    //check if scale factor if bigger that the item size, and thus it occupies less that a pixel in comparision to the background image
    if (rect().width() < originalTransform.m11()) {
        //calculate adjusted scale factor
        factor = originalTransform.m11() / rect().width();
    }
    //adjust position according to scale factor
    dx -= factor * originalCenter.x();
    dy -= factor * originalCenter.y();
    //set the new transform for painting
    painter->setTransform(QTransform::fromScale(factor, factor) * QTransform::fromTranslate(dx, dy));
    //now paint...
    QGraphicsXYZItem::paint(painter, option, widget);
    //restore original painter
    painter->restore();
} 
```

在这种情况下，您也需要调整边界矩形：

```
QRectF MyGraphicsItem::boundingRect() const
{
    QRectF rect = QGraphicsEllipseItem::boundingRect();
    //this is a bit hackish, let me know if you know another way...
    if (scene() != NULL && scene()->views().at(0) != NULL)
    {
        //get viewport transform
        QTransform itemTransform = scene()->views().at(0)->transform();
        QPointF originalCenter = rect.center();
        //calculate back-projected original size of item
        qreal realSizeX = rect.width() / itemTransform.m11();
        qreal realSizeY = rect.height() / itemTransform.m11();
        //check if scale factor is bigger that the item size, and thus it occupies less that a pixel in comparison 
        //to the background image and adjust size back to equivalent of 1 pixel
        realSizeX = realSizeX < 1.0 ? 1.0 : realSizeX;
        realSizeY = realSizeY < 1.0 ? 1.0 : realSizeY;
        //set adjusted position and size according to scale factor
        rect = QRectF(rect.center().x() - realSizeX / 2.0, rect.center().y() - realSizeY / 2.0, realSizeX, realSizeY);
    }
    return rect;
} 
```

使用此解决方案，该项目在我的情况下工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-08T13:49:53.247

我找到了另一种解决方案，它不涉及弄乱任何转换或手动缩放/定位。`QGraphicsItem::ItemIgnoresTransformations`标志说明中有提示：

> `QGraphicsItem::ItemIgnoresTransformations`
> 
> 该项目忽略继承的转换（即，**它的位置仍锚定到其父级**，但忽略父级或视图旋转、缩放或剪切转换）。[...]

这就是关键！我们需要两个项目：一个将保持相对位置的父项（不设置任何标志）和一个将在父项的*(0,0)*点进行绘图的子项（`QGraphicsItem::ItemIgnoresTransformations`设置标志）。就那么简单！

我已将此功能封装到一个类中 - 这是一些代码：

```
#include <QGraphicsItem>
#include <QPainter>

class SampleShape : public QGraphicsItem
{
private:
    /* This class implements shape drawing */
    class SampleShapeImpl : public QGraphicsItem
    {
    public:
        SampleShapeImpl (qreal len, QGraphicsItem *parent = nullptr)
            : QGraphicsItem(parent), m_len(len)
        {
            /* ignore transformations (!) */
            setFlag(QGraphicsItem::ItemIgnoresTransformations);
        }

        QRectF boundingRect (void) const override
        {
            /* sample bounding rectangle */
            return QRectF(-m_len, -m_len, m_len*2, m_len*2);
        }

        void paint (QPainter *painter, const QStyleOptionGraphicsItem *, QWidget *) override
        {
            /* draw a shape, (0,0) is an anchor */
            painter->drawLine(0, -m_len, 0, m_len);
            painter->drawLine(-m_len, 0, m_len, 0);
            // ...
        }

    private:
        qreal m_len;  // sample shape parameter
    };

public:
    /* This is actually almost an empty class, you only need to set
     * a position and pass any parameters to a SampleShapeImpl class.
     */
    SampleShape (qreal x, qreal y, qreal len, QGraphicsItem *parent = nullptr)
        : QGraphicsItem(parent), m_impl(len, this) // <-- IMPORTANT!!!
    {
        /* set position at (x, y), view transformations will apply */
        setPos(x, y);
    }

    QRectF boundingRect (void) const override
    {
        return QRectF(); // it's just a point, no size
    }

    void paint (QPainter *, const QStyleOptionGraphicsItem *, QWidget *) override
    {
        // empty, drawing is done in SampleShapeImpl
    }

private:
    SampleShapeImpl m_impl;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T04:17:34.697

添加到 Dave Mateer 的回答中，我认为在某些情况下添加它会有所帮助，您还应该保持对象的正确边界矩形（以及形状）。对我来说，我也需要进行`boundingRect()`一些修改才能获得正确的对象选择行为。`ItemIgnoresTransformations`请记住，如果我们不使用标志，对象的边界矩形将照常缩放和转换。所以我们还需要重新缩放boundingRect来保持视图独立效果。

维护独立于视图的边界矩形非常容易：只需从中获取缩放因子`deviceTransform(m_view->viewportTransform()).inverted().m11()`并将该常数乘以您的局部坐标边界矩形。例如：

```
qreal m = this->deviceTransform(m_view->viewportTransform()).inverted().m11();
return QRectF(m*(m_shapeX), m*(m_shapeY),
              m*(m_shapeR), m*(m_shapeR)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-03T19:11:08.550

这是我设计的一个非常复杂的解决方案：

1）获取父级的boundingRect（）并将其映射到场景2）取此点列表的最小X和Y，这是您项目的真实原点，在场景坐标中3）设置孩子的位置

在 Pyside 中：

```
 br = parent.mapToScene(parent.boundingRect())
    realX = min([item.x() for item in br])
    realY = min([item.y() for item in br])
    child.setPos(parent.mapFromScene(realX, realY)) #modify according to need 
```

# teamcity - TeamCity，没有清理某些配置。没有固定的构建，没有依赖的构建

> ID：11459319
> 
> 赞同：4
> 
> 时间：2012-07-12T19:34:59.930
> 
> 标签：teamcity

我正在运行 TeamCity 5。我有一个特殊的配置，它保留了 3500 多个过去的构建，以及去年左右的工件。它占用了将近 7 个演出空间，所以我需要清理旧版本。

该配置设置为清理超过 30 天或 5 次构建的所有内容。没有任何构建被固定。服务器上的任何配置都不依赖于工件，即使它们确实如此，我也没有设置“防止依赖工件清理”。其他构建配置清理，但这个特定的没有。

有人对下一步要检查什么有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T19:57:01.617

我想到了。我不明白 TeamCity 如何保留旧版本。它保留了自第五次成功构建以来的所有构建，而第五次成功构建是一年前。我将清理规则减少为“清理比上一次构建早 30 天且早于第**一次**成功构建的工件”，并删除了一些历史记录。现在，让开发人员修复他们的单元测试，以便更频繁地成功...... ;)

此外，您可以将“-th successful build”字段留空并限制为天数。

# objective-c - Objective-C 中的属性声明

> ID：11459320
> 
> 赞同：5
> 
> 时间：2012-07-12T19:35:01.460
> 
> 标签：objective-c, ios

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

所以我发现在合成属性时必须使用下划线，这对我来说毫无意义。

那么，让我们开始吧。在我们的 .h 文件中，我们写下这一行：

```
@property (nonatomic) double speed; 
```

在我们的 .m 文件中，我们这样做：

```
@synthesize speed = _speed; 
```

为什么？据我所知，属性会创建一个实例变量并为其创建 setter 和 getter。但到底是什么线

```
@synthesize speed = _speed 
```

做？正如常识告诉我的那样，我们将 _speed 中的值分配给速度。好的。我们在哪里声明了_speed？为什么编译器不给我们一个错误？它应该是什么意思？为什么会有这样一个混淆的代码？

我的问题在这里：

如果我这样做会发生什么

```
@synthesize speed; 
```

没有_speed，我会得到错误或一些错误吗？这个语法之后的原因是什么？他们制作的时候在想什么？_speed 来自哪里？它是什么？它是指针还是实数值？到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:42:18.713

嗯，`_speed`是属性使用的实例变量。如果你真的想完全声明它，你需要写：

```
@interface Foo
{
    double _speed;
}

@property double speed;

@end

@implementation Foo

@synthetize speed = _speed;

@end 
```

现在 Xcode 4.4 发布了，其中大部分内容都是不必要的，为了理智起见应该省略。

基本上，您所要做的就是：

```
@interface Foo

@property double speed;

@end 
```

没有实例变量，没有`@synthetize`，一切仍然像以前一样工作。您可以使用`self.speed`或`self->_speed`直接访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:41:32.663

好吧，你不必这样做......

但是，这样做意味着在您的实现中您不能使用该属性的非下划线名称，因为实际上这样做您会混淆直接访问 iVar 而不是通过该属性。

换句话说，通过这样做：

```
@synthesize myProperty; 
```

在您的代码中，您可以通过`myProperty`( `iVar`) 或`self.myProperty`（属性 - 使用访问规则 - 只读/读写、getter、setter 等）引用它，如果您使用某种规则，这当然会令人困惑：

```
@property(nonatomic, retain, getter = anotherProperty) NSNumber myProperty 
```

通过`myProperty`在代码中访问它，您将期望获得`anotherProperty`

这只能通过以下方式实现：

```
self.myProperty 
```

所以在 Objective-C 中我们可以做以下事情来避免这种情况：

```
@synthesize myProperty = _myProperty; 
```

因此，在代码中直接引用实际上是***错误***`myProperty`的，而是必须执行`self.myProperty`(property access) 或`_myProperty`(iVar access)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:42:18.313

你不必这样做。这只是常见的做法。...=_speed 将创建一个名为 _speed 的属性，它的 setter 和 getter 将以 speed 命名。这使您可以区分

```
self.speed = value; 
```

和

```
speed = value; 
```

因为后者会产生编译器错误。

```
_speed = value; 
```

在那种情况下是正确的。

这有助于避免与保留/释放相关的错误，因为设置器将保留对象而简单的分配者不会。（self.speed = ...将调用setter！）

如果您在综合语句中省略“=_speed”，则该属性将仅命名为“speed”。如果您没有犯任何错误，那么这将完全正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:57:11.940

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

`@synthesize speed = _speed;`将属性`speed`指向实例变量`_speed`。

您不必这样*做*。`@synthesize speed`工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T20:15:37.103

在具有手动内存管理的环境中：

# 为什么我需要一个实例变量名？

1.  您需要释放您的属性在 dealloc 中可能使用的内存
2.  您可以使用`self.field = nil`，但这种方法[可能会导致问题](https://stackoverflow.com/questions/11457877/objective-c-using-parent-properties-in-init-method/11458889#11458889/ "但这可能会导致问题")
3.  所以你需要一个在这个属性后面使用的实例变量，这样你就可以`[_field release];`在 dealloc 中使用它。

如果您需要在初始化程序中访问您的属性，则相同。

# 为什么我需要在实例变量名称中使用下划线？

*   永远不要不小心直接使用 ivar 并破坏属性的内存管理合同

```
@property (retain) UILabel *label;

...

@synthesize label;

...

-(void)viewDidLoad {
   [super viewDidLoad];

   label = [[[UILabel alloc] initWithFrame:frame] autorelease];
} 
```

在这里不小心错过了自我。你做了`label`潜在的“悬空指针”。如果你使用`@synthesize label = _label;`上面的代码会产生编译错误。

*   局部变量或方法参数名称通常与属性名称相同 - 如果您使用带下划线的实例变量，则不会导致任何问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T19:41:43.387

它是一个命名约定，您不必这样*做*。人们倾向于这样做，以便他们可以区分实例变量和属性。

通常它会去

```
.h

@interface myClass : NSObject
{
    NSNumber *_speed
}

@property (nonatomic, strong) NSNumber *speed;

.m

@implementation
@syntesize speed = _speed; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T19:41:54.160

不会有什么不好的事情发生——只写@synthesize 速度就可以了。使用 _speed 只会使底层实例变量 _speed 而不是 speed。大多数人这样做是为了避免意外直接访问 ivar，而不是通过 thr getter。

# powershell - 有没有办法抑制 Write-Error cmdlet 的“额外”输出？

> ID：11459324
> 
> 赞同：14
> 
> 时间：2012-07-12T19:35:13.260
> 
> 标签：powershell

寻找这个，但找不到解决方案。“额外”输出是指 Write-Output 在您的错误消息文本之后发出的额外文本。IE：

```
write-error -Message "test" 
```

产生：

```
write-error -Message "test" : test
+ CategoryInfo          : NotSpecified: (:) [Write-Error], WriteErrorException
+ FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException 
```

我只想看到文本“test”，并通过运行 PS 脚本的 Process 对象从 stderr 中检索它。

我知道可以开发一个复杂的正则表达式（以捕获可能出现在类别中的所有潜在字符等），但我想避免这种情况。不要忘记，由于控制台，Write-Error 还会在每 80 个字符位置注入一个换行符，因此也必须将其考虑在内。

有没有办法告诉 Powershell (2.0) 在写入 stderr 并只写消息部分时不要那么罗嗦？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T19:57:08.187

我认为不可能限制错误的输出，但您可以像这样解决问题：

```
$Host.UI.WriteErrorLine("My custom error") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T08:55:22.413

$Host.UI.WriteErrorLine 不更新 $error 变量：

```
PS> $error.Clear()
PS> $Host.UI.WriteErrorLine("My custom error")
My custom error

PS> $Error.Count
0 
```

您应该使用`Write-Error`cmdlet，但输出仍然很冗长：

```
PS> Write-Error "My custom error"
Write-Error "My custom error" : My custom error
    + CategoryInfo          : NotSpecified: (:) [Write-Error], WriteErrorException
    + FullyQualifiedErrorId : Microsoft.PowerShell.Commands.WriteErrorException 
```

有一个选项可以使用内置的 $ErrorView 变量输出不太详细的消息，它的默认值是 'Normal' (verbose)。您可以将其设置为“CategoryView”以获取简短消息。

```
PS> $ErrorView="CategoryView"
PS> Write-Error "My custom error"
NotSpecified: (:) [Write-Error], WriteErrorException 
```

# c# - 无法读取 MS 图表上的最大 Y 轴值

> ID：11459325
> 
> 赞同：2
> 
> 时间：2012-07-12T19:35:13.747
> 
> 标签：c#, asp.net-mvc-3, mschart

![图表](../Images/ce0196643de127d0824107a0f57d9935.png)

我在 MVC3 视图上使用 MS Chart 生成的图像。

该图表有效，但图表顶部的最大值太高，我无法读取这些值。

图表不应该与最大值有一个边距吗？

我真的不知道这是否是一个真正的问题，但除非我定义一个我认为不应该用于动态值的 AxisYMaximum 值，否则我不能让它看起来不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:22:00.520

是的，图表控件**应该**计算清楚显示数据所需的边距，但根据我的经验，它没有。

由于您的 y 值是动态的，因此您可以将 AxisYMaximum 动态设置为刚好高于显示的最大 y 值的值。像这样的东西可以设置它：

```
double greatestYValue = double.MinValue;

foreach (var pt in Chart1.Series[0].Points) 
{
    if (greatestYValue < pt.YValues[0]) greatestYValue = pt.YValues[0];
}

Chart1.ChartAreas[0].AxisY.Maximum = greatestYValue * 1.2;
// or
Chart1.ChartAreas[0].AxisY.Maximum = greatestYValue + 20; 
```

我只是遍历第一个系列中的所有点以找到最大的 y 值，然后将 y 轴最大值设置为该值的 120%，或者高于该值的某个绝对量，或者您需要的任何值。

您还可以使用 LINQ 在单行中获得最大的 y 值：

```
double greatestYValue = Chart1.Series[0].Points.Select(p => p.YValues[0]).Max(); 
```

# git - 使用 git 设置网站和测试版网站

> ID：11459329
> 
> 赞同：0
> 
> 时间：2012-07-12T19:35:34.417
> 
> 标签：git, web, webserver

我有一个正在设置的网站，我想使用 git 进行版本控制。我的想法是创建一个 beta 子域，我可以在其中测试站点，然后将其“推送”到 public_html 文件夹中的主站点。一切都需要在服务器上才能访问数据库。我试图将主站点实际克隆到 beta 文件夹中，但在尝试推送到主站点时收到以下错误。

```
remote: error: By default, updating the current branch in a non-bare repository denied 
```

我尝试使用裸仓库，但这对网站没有好处，因为它不包含工作树。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:47:18.850

我认为您可以使用“git post-receive hook”。

在服务器上，您必须使用两个存储库：

*   裸存储库（您将通过“git push”上传代码）
*   这个裸存储库的克隆。此克隆将托管您的网站

在裸存储库上，您配置 post-receive-hook：当存储库更新时，您可以自动执行克隆存储库的更新以更新您的网站。

# php - MySQL 更新单个字段中的多个段落

> ID：11459330
> 
> 赞同：1
> 
> 时间：2012-07-12T19:35:43.947
> 
> 标签：php, mysql

不知道该怎么说，但我的问题是我的字段不会正确更新。我设置了一个页面，用户可以在其中更新工作列表、事件等。问题是某些描述有 3 段或更多段长，并且在处理表单时，它不会正确更新数据库。当用户制作新商品时也会发生这种情况。

一次可以加载多少文本有限制吗？

这是我正在使用的更新代码：

```
mysql_query("UPDATE tbl_workers_club SET eventdate='".$newDate."', theme='".$theme."', text='".$text."', contactperson='".$contactperson."', contactphone='".$phone."', dateentered='".$dateentered."' WHERE specialID='".$id."' "); 
```

这是新项目的代码：

```
mysql_query("INSERT INTO tbl_workers_club (eventdate, theme, text, contactperson, contactphone, dateentered)
VALUES ('$newDate', '$theme', '$text', '$contactperson', '$contactphone', '$dateentered')"); 
```

我没有看到另一个这样的问题，所以如果你知道一个，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:01:38.877

看看 MySQL 的设置[`max_allowed_packet`](https://dev.mysql.com/doc/refman/5.5/en/packet-too-large.html) `A communication packet is a single SQL statement sent to the MySQL server, a single row that is sent to the client, or a binary log event sent from a master replication server to a slave.`

```
mysql> select * from information_schema.global_variables where variable_name like 'max_allow%';
+--------------------+----------------+
| VARIABLE_NAME      | VARIABLE_VALUE |
+--------------------+----------------+
| MAX_ALLOWED_PACKET | 1048576        |
+--------------------+----------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:11:53.797

说出您遇到的错误（或没有错误）将极大地帮助诊断此问题。内容只是在数据库中“截断”了吗？还是 MySQL 将错误返回给 PHP？然而，这里有一些想法......

mysql_real_escape_string() 是一个很好的起点。任何带有单个撇号的输入都会破坏您的代码。阅读有关为 SQL 清理用户输入的内容，网络上有大量资源。这绝对不是可选的。还要查看参数化查询/准备好的语句，或者那里的许多 ORM 库/框架之一。

如果您只是在很长的条目上遇到问题，您的“文本”列也可能不够大，无法容纳这些输入。VARCHAR(X) 只能保存 X 个字符。改用 MEDIUMTEXT 之类的东西。

使用 POST 而不是 GET；GET 对通过 URL 发送的值的大小有限制。POST 是发送创建/更改数据的请求时的常规方法。

如果没有更多关于您遇到的错误的信息，很难说问题出在哪里。

# ruby - Rails 3：如何使用 ruby gem 对非模型数据进行日期验证

> ID：11459333
> 
> 赞同：0
> 
> 时间：2012-07-12T19:35:50.593
> 
> 标签：ruby, ruby-on-rails-3.1, rubygems

在我的 Rails 应用程序中，我遇到了用户在网页上输入出生日期的情况。我想根据这个出生日期验证他们的年龄。我想在模型中进行验证，因为即使用户提供的出生日期不是模型的一部分，我确实需要向模型查询用户对特定项目的年龄他们正在尝试访问。

我找到了**date_validator** gem，但它只适用于模型。最重要的是，我没有使用日期字段，因此我将出生日期分为三部分，包括月、日和年的 3 个字符串，然后需要以某种方式将其转换为日期并基于该日期，验证他们是否年龄大于或等于他们应该有的年龄。

我不确定我正在尝试做的事情是否有宝石，但我想在我尝试编写自己的验证器之前我会问一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:19:01.550

rails 提供了几个帮助器来处理日期。

如果您想在多个字段中分隔日期输入，您可以使用`date_select` [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)

即使您自己煮汤，rails 也足够灵活，可以将单独的字段合并到一个日期字段中：

```
Event.new("date(1i)"=>"2007", "date(2i)"=>"8", "date(3i)"=>"11").date
=> date: "2007-08-10" 
```

# mediawiki - 如何修复 Mediawiki 确认帐户扩展错误 qmail-inject：致命：无法解析此行：

> ID：11459335
> 
> 赞同：0
> 
> 时间：2012-07-12T19:35:57.233
> 
> 标签：mediawiki

我有一个 mediawiki 实例，安装了一个名为**Confirm Account**的扩展程序。这适用于我在家的 MAMP 设置。在我的 MediaTemple.net 帐户上，运行扩展程序时出现此错误：

**发送邮件时出错：PHP 的 mail() 函数中出现未知错误。**

服务器错误日志错误是：

```
qmail-inject: fatal: unable to parse this line: Return-Path:apache@ 216.70.110.23:7081 
```

我不知道该怎么做才能解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:20:43.607

将[$wgPasswordSender](https://www.mediawiki.org/wiki/%24wgPasswordSender)设置为一些有意义的电子邮件地址。

# facebook - 从 wordpress 到 facebook 页面的帖子

> ID：11459340
> 
> 赞同：0
> 
> 时间：2012-07-12T19:36:21.007
> 
> 标签：facebook

我想我可能做错了什么。但是，首先，我使用新的 Facebook 插件从我的 WordPress 发布到我的 Facebook 页面。但事情进展并不顺利：没有文本摘录有时没有显示特色图片。所以我从插件中禁用了它，并使用了 API。它正在发布，但现在摘录带有 html 标签，例如：

```
<p> this is a blog post</p>
<p> <em> this is the post content</em> </p> 
```

为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:58:29.943

> 为什么呢？

因为*您*正在向 Facebook 发送 HTML 代码……？

去掉 HTML 代码，只发送原始文本。您可以尝试使用`strip_tags`它——如果您的 HTML 代码格式正确，那么它应该可以正常工作。（但如果不是，它可能会剥离很多。）

# c# - 如何将 DateTimeOffset 存储在 SQL Server DateTime 字段中

> ID：11459347
> 
> 赞同：0
> 
> 时间：2012-07-12T19:37:03.753
> 
> 标签：c#, sql-server-2005, datetimeoffset

这是在 C# 中

我正在使用来自 RSS 提要的数据，并希望将数据存储在我们的数据库中。我遇到的问题是如何存储 LastUpdateTime。

```
XmlReader reader = XmlReader.Create(uri);
SyndicationFeed rssFeed = SyndicationFeed.Load(reader);

var lastUpdate = rssFeed.LastUpdatedTime; 
```

问题是 rssFeed.LastUpdateTime 是 DateTimeOffset。但是，我们使用的是只有 DateTime 的 SQL Server 2005。处理这种情况的最佳做法是什么？如果重要的话，我们所有的数据库和服务器都是东部时间。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:17:06.383

最简单的方法是使用 rssFeed.LastUpdateTime.UtcDateTime 将 DateTimeOffset 转换为 UTC DateTime，然后将其存储在数据库中的 DateTime 字段中。

不要费心存储偏移量，没有必要。无论如何，偏移量都不会将 DateTime 值与任何时区相关联。

然后，您可以使用 .NET 中内置的 TimeZoneInfo 类将您的 UTC DateTime 值转换为任何时区。TimeZoneInfo 类的美妙之处在于它还可以为夏令时调整您的 DateTime 值。

这也将是性能和存储方面的最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:40:32.267

我通常有一个额外的列，比如

```
[LastUpdateOffset] SMALLINT NOT NULL 
```

并使用它来存储给定行的偏移量。然后为客户转换，比如

```
/// <summary>
/// Convert a given UTC DateTime value into its localized value from given offset
/// </summary>
/// <param name="column">DateTime value, such as CreatedOn, UpdatedOn etc</param>
/// <param name="offset">-60 is DST for example</param>
private void ConvertUTCToClientTimeZone(DateTime column, int offset)
{
    TimeSpan offsetTimeSpan = new TimeSpan(0, offset, 0).Negate();
    DateTimeOffset newDate = new DateTimeOffset(column, offsetTimeSpan);
    column = newDate.DateTime;
} 
```

希望这可以帮助！:)

# php - 根据循环计数增加变量

> ID：11459351
> 
> 赞同：1
> 
> 时间：2012-07-12T19:37:20.397
> 
> 标签：php, loops, foreach, language-construct

我有一个 PHP 函数，其中目录中未定义数量的图像被输出到浏览器。正在将图像读入对象。我遇到的问题是图像的呈现方式。我想把它们放在一个表格中，`<td>`连续四个单元格。这是代码：

```
function displayThumbList(){

   $tlist = $this->getThumbList();
   $i = 0;
   $e = 3;
   echo '<table width="400px" border=1><tr>';
   foreach ($tlist as $value) {
    echo "<td width=\"90px\" height=\"50px\"><a href=\"showImage.php?id=".$this->getBaseName($value,$this->thumbPrefix)."\" target=\"imgHolder\"><img class=\"timg\" src=\"thumbnail/".$value."\" alt=\"a\" /></a></td>";
    $_GET['imagefocus'] = $this->getBaseName($value,$this->thumbPrefix);

  //here is where the condition for adding a <tr> tag is evaluated 
  if ($i == $e){
       echo '<tr>';
     }

  $i++; //increments by 1 with each foreach loop
 }
 echo '</table>';
} 
```

第一次 $i（第三次通过 foreach 循环）等于 $e，该过程按预期添加。每次满足条件后，我都需要 $e 增加 3。

图像数量未定义。如果目录中有 21 张图像，则 $i 将增加 21 倍，$e 应增加 7 倍，每次增加 3（3、6、9、12、15 等）。

我想我正在寻找基于另一个循环条件的增量（每次达到相等时）。有什么想法吗？rwhite35

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:41:38.877

```
if ($i == $e){
   echo '<tr>';
   $e = $e + 3;
 } 
```

或者，使用模数，例如

```
if ($i % 3 == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:42:42.127

您想在 $i == $e 时更新 $e。该条件已在您的 if 语句中使用。只需添加

```
$e += 3; 
```

你就完成了。

```
if ($i == $e){
   echo '<tr>';
   $e += 3;
 } 
```

# tsql - SQL Server 2005 用 0 填充数据透视表

> ID：11459355
> 
> 赞同：3
> 
> 时间：2012-07-12T19:37:43.573
> 
> 标签：tsql, sql-server-2005, null, pivot

我在 SQL Server 2005 中有[这个查询](http://sqlfiddle.com/#!3/a1627/3)（我仅使用了更方便的 2008 插入方法），我需要在网格输出中将 (null) 替换为 0。

无论如何要这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:40:29.467

您将使用该[`ISNULL()`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)功能。请参阅[SQL 小提琴](http://sqlfiddle.com/#!3/a1627/11)

```
SELECT 'lessonid          response ->'
   , isnull([0], 0) as [0]
  , isnull([1], 0) as [1]
  , isnull([2], 0) as [2]
  , isnull([3], 0) as [3]
  , isnull([4], 0) as [4]
FROM (
    SELECT lessonid AS 'lessonid          response ->'
        ,ISNULL(response,0) as response
        ,count(response) AS respcnt
    FROM tblRChoices
    GROUP BY lessonid
        ,response
    ) TableResponse
PIVOT(SUM(respcnt) FOR response IN (
            [0]
            ,[1]
            ,[2]
            ,[3]
            ,[4]
            )) ResponsePivot 
```

# javascript - 循环遍历数组以启用复选框

> ID：11459360
> 
> 赞同：0
> 
> 时间：2012-07-12T19:37:55.977
> 
> 标签：javascript, jquery

我有一组复选框和一个数组，其中包含应选择哪些复选框的索引。我正在尝试遍历数组和其中的每个索引。我制作了一个示例 jsFiddle，让你们了解我正在尝试做什么。如果这让事情变得更容易，我也有 JQuery 库。[http://jsfiddle.net/7EetA/1/](http://jsfiddle.net/7EetA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:42:08.460

试试这个：

```
var arrx=new Array();
arrx[0]=4;       
arrx[1]=5;
arrx[2]=3;
arrx[3]=1;
for (var i = 0; i < arrx.length; i++) {
    document.getElementsByName('cal')[arrx[i]].checked = true;
}
​ 
```

不需要 jQuery！**[jsFiddle 示例](http://jsfiddle.net/j08691/7EetA/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:43:47.387

```
var arrx=new Array();
arrx[0]=4;       
arrx[1]=5;
arrx[2]=3;
arrx[3]=1;

var calArray = document.getElementsByName("cal");
for (var i = 0; i < arrx.length; i++) {
    calArray[arrx[i]].checked = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:51:45.550

如果你坚持使用 jQuery：

```
var arrx=new Array();
arrx[0]=4;       
arrx[1]=5;
arrx[2]=3;
arrx[3]=1;
var i = 0;
$('[name=cal]').each(function() { 
    if ($.inArray(i, arrx) != -1) {
        $(this).prop('checked',true);
    }
    i++;
}); 
```

[工作示例](http://jsfiddle.net/7EetA/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:25:49.177

如果你愿意使用 jQuery，它可以根据输入的名称很容易地做到这一点：

jQuery('[name="cal"]').each(function(i){jQuery(this).attr('checked', 'checked');});

但是，如果您的目标不一定是选择所有这些，则可以使用以下内容：

jQuery('[name$="_c"]').each(function(i){jQuery(this).attr('checked', 'checked');});

它只检查名称末尾带有 _c 的输入。

[http://jsfiddle.net/7EetA/9/](http://jsfiddle.net/7EetA/9/)

# javascript - 函数中item的含义

> ID：11459361
> 
> 赞同：1
> 
> 时间：2012-07-12T19:38:05.347
> 
> 标签：javascript, asp.net, html, json, jquery

我从某个地方借了一段代码，但我不明白。这是一种 ajax 调用 web 服务。

```
function SearchMyStuff() {
$("#tblHouse").hide();
$.ajax({
    type: "POST",
    url: pageName + "SearchMyStuff",
    data: "{'oParams':" + JSON.stringify(BuildMyStuffSearch()) + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (response) {
        if (response.d.length > 0) {
            while ($('#MyStuffBody tr').length > 1) {
                $('#MyStuffBody tr:last').remove();
            }

            $.each(response.d, function (index, item) {
                var templateRow = $('#templateMyStuff'); 
```

我想知道的是

```
function (index, item) 
```

这里的**索引**和**项目**是什么。

谢谢你解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:40:23.153

`index`值表示`index`元素数组中的 from，值`item`表示`element`自身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:41:26.717

换句话说：

```
$.each(array, function (index, item) { 
    //body
}); 
```

相当于以下的简写：

```
for(var index = 0; index !== array.length; index++){
    var item = array[index];
    //body
} 
```

[`$.each`当然，它比实际实现要简单得多]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:44:49.370

$.each 循环遍历数组中的每个元素，并使用这些参数调用回调

`index`当前索引，当前索引`item`处的值

# windows - 安装windows打印机驱动出错

> ID：11459362
> 
> 赞同：2
> 
> 时间：2012-07-12T19:38:14.920
> 
> 标签：windows, printing, driver, device-driver

我正在尝试安装作为 WDK（Windows 驱动程序工具包）中的示例提供的 Windows 打印机驱动程序（[OEMUNI](http://msdn.microsoft.com/en-us/library/windows/hardware/ff559580%28v=vs.85%29.aspx)）。但我不断从添加打印机向导中收到以下错误：“**未安装打印机驱动程序。操作无法完成（错误 0x00000002）** ”。我尝试使用管理员权限运行添加打印机向导，但我仍然遇到同样的问题。

我正在使用 Windows 7 64 位版本。有人可以在这里帮助我吗？另外，错误代码：0x00000002 表示什么？

以下是我的 INF 文件：-

```
; OEMDLL.INF
;
; INF file for OEM DLL Customization samples
;
; Copyright 1999-2003 Microsoft Corporation

[Version]
Signature="$Windows NT$"
Provider=%MS%
LayoutFile=ntprint.inf
ClassGUID={4D36E979-E325-11CE-BFC1-08002BE10318}
Class=Printer
DriverVer=6/07/2001,1.0.0.1

;
; Manufacturer section.
;
; This section lists all of the manufacturers 
; that we will display in the Dialog box
;
[Manufacturer]
"Microsoft"=Microsoft, NTamd64, NTia64

;
; Model sections. 
; 
; Each section here corresponds with an entry listed in the
; [Manufacturer] section, above. The models will be displayed in the order
; that they appear in the INF file.
;

[Microsoft]
"PostScript WaterMark Sample"          = INSTALL_WATERMARK.PS
"Unidrv WaterMark Sample"              = INSTALL_WATERMARK.UNI
"OEM PostScript Customization Sample"  = INSTALL_OEMPS
"OEM Unidrv Customization Sample"      = INSTALL_OEMUNI
"OEM UI Customization Sample (PS)"     = INSTALL_OEMUI.PS
"OEM UI Customization Sample (Unidrv)" = INSTALL_OEMUI.UNI

[Microsoft.NTamd64]
"PostScript WaterMark Sample"          = INSTALL_WATERMARK.PS
"Unidrv WaterMark Sample"              = INSTALL_WATERMARK.UNI
"OEM PostScript Customization Sample"  = INSTALL_OEMPS
"OEM Unidrv Customization Sample"      = INSTALL_OEMUNI
"OEM UI Customization Sample (PS)"     = INSTALL_OEMUI.PS
"OEM UI Customization Sample (Unidrv)" = INSTALL_OEMUI.UNI

[Microsoft.NTia64]
"PostScript WaterMark Sample"          = INSTALL_WATERMARK.PS
"Unidrv WaterMark Sample"              = INSTALL_WATERMARK.UNI
"OEM PostScript Customization Sample"  = INSTALL_OEMPS
"OEM Unidrv Customization Sample"      = INSTALL_OEMUNI
"OEM UI Customization Sample (PS)"     = INSTALL_OEMUI.PS
"OEM UI Customization Sample (Unidrv)" = INSTALL_OEMUI.UNI

;
; Installer Sections
;
; These sections control file installation, and reference all files that
; need to be copied. The section name will be assumed to be the driver
; file, unless there is an explicit DriverFile section listed.
;

[INSTALL_WATERMARK.PS]
CopyFiles=@OEM.PPD
CopyFiles=@WMARKPS.INI
CopyFiles=WMARKPS
DataFile=OEM.PPD
DataSection=PSCRIPT_DATA
Include=NTPRINT.INF
Needs=PSCRIPT.OEM,PSCRIPT_DATA

[INSTALL_WATERMARK.UNI]
CopyFiles=@OEM.GPD
CopyFiles=@WMARKUNI.INI
CopyFiles=WMARKUNI
DataFile=OEM.GPD
DataSection=UNIDRV_DATA
Include=NTPRINT.INF
Needs=UNIDRV.OEM,TTFSUB.OEM,UNIDRV_DATA

[INSTALL_OEMPS]
CopyFiles=@OEM.PPD
CopyFiles=@OEMPS.INI
CopyFiles=OEMPS
DataFile=OEM.PPD
DataSection=PSCRIPT_DATA
Include=NTPRINT.INF
Needs=PSCRIPT.OEM,PSCRIPT_DATA

[INSTALL_OEMUNI]
CopyFiles=@OEM.GPD
CopyFiles=@OEMUNI.INI
CopyFiles=OEMUNI
DataFile=OEM.GPD
DataSection=UNIDRV_DATA
Include=NTPRINT.INF
Needs=UNIDRV.OEM,TTFSUB.OEM,UNIDRV_DATA

[INSTALL_OEMUI.PS]
CopyFiles=@OEM.PPD
CopyFiles=@OEMUI.INI
CopyFiles=OEMUI
DataFile=OEM.PPD
DataSection=PSCRIPT_DATA
Include=NTPRINT.INF
Needs=PSCRIPT.OEM,PSCRIPT_DATA

[INSTALL_OEMUI.UNI]
CopyFiles=@OEM.GPD
CopyFiles=@OEMUI.INI
CopyFiles=OEMUI
DataFile=OEM.GPD
DataSection=UNIDRV_DATA
Include=NTPRINT.INF
Needs=UNIDRV.OEM,TTFSUB.OEM,UNIDRV_DATA

; Copy Sections
;
; Lists of files that are actually copied. These sections are referenced
; from the installer sections, above. Only create a section if it contains
; two or more files (if we only copy a single file, identify it in the
; installer section, using the @filename notation) or if it's a color
; profile (since the DestinationDirs can only handle sections, and not
; individual files).
;

[WMARKPS]
WMARKPS.DLL
WMARKUI.DLL

[WMARKUNI]
WMARKUNI.DLL
WMARKUNIUI.DLL

[OEMPS]
OEMPS.DLL

[OEMUI]
OEMUI.DLL

[OEMUNI]
OEMUNI.DLL

;
; Data Sections
;

; These sections contain data that is shared between devices.
;

;
;  Location of source files not in Layout.inf.
;

[SourceDisksNames]
100 = %OEMSample%

[SourceDisksFiles.x86]
oemps.dll      = 100,OEMPS\x86
oemui.dll      = 100,OEMUI\x86
oemuni.dll     = 100,OEMUNI\x86
wmarkps.dll    = 100,WaterMark\x86
wmarkuni.dll   = 100,WaterMarkUni\x86
wmarkuniui.dll = 100,WaterMarkUni\x86
wmarkui.dll    = 100,WaterMark\x86

[SourceDisksFiles.amd64]
oemps.dll      = 100,OEMPS\amd64
oemui.dll      = 100,OEMUI\amd64
oemuni.dll     = 100,OEMUNI\amd64
wmarkps.dll    = 100,WaterMark\amd64
wmarkuni.dll   = 100,WaterMarkUni\amd64
wmarkuniui.dll = 100,WaterMarkUni\amd64
wmarkui.dll    = 100,WaterMark\amd64

[SourceDisksFiles.ia64]
oemps.dll      = 100,OEMPS\ia64
oemui.dll      = 100,OEMUI\ia64
oemuni.dll     = 100,OEMUNI\ia64
wmarkps.dll    = 100,WaterMark\ia64
wmarkuni.dll   = 100,WaterMarkUni\ia64
wmarkuniui.dll = 100,WaterMarkUni\ia64
wmarkui.dll    = 100,WaterMark\ia64

[SourceDisksFiles]
OEM.PPD       = 100
OEM.GPD       = 100
WMARKPS.INI   = 100
WMARKUNI.INI  = 100
OEMPS.INI     = 100
OEMUNI.INI    = 100
OEMUI.INI     = 100

;
; Call SetupSetDirectoryId with 66000 to set the target directory at runtime
; (depending on which environment drivers are getting installed)
;

[DestinationDirs]
DefaultDestDir=66000

;
; Localizable Strings
;
[Strings]
MS="Microsoft DDK Sample"
OEMSample="OEM DLL Print samples" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:42:07.420

错误是`ERROR_FILE_NOT_FOUND`。

1.  你是先建立样品的吗？
2.  构建后，是否将其放入相对于`.inf`文件的正确文件夹中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T09:02:30.297

我也遇到了这个问题。原因是：文件oem.gpd包含ttfsub.gpd，在oemdll目录下找不到。但是即使我们将 ttfsub.gpd 从 FileRepsoitory 复制到 oemdll 目录下，安装也会失败。但是，如果您安装位图示例，您将成功。所以正确的方法是像位图驱动一样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T18:04:33.277

0x000002 指的是一些丢失的文件，这意味着在 inf 文件中有对该文件的引用，但它实际上并不存在于驱动程序包中。如果 inf 文件中提到的所有文件都存在于驱动程序包中，请检查驱动程序包。

# jquery - 找不到 jquery animate 的 img 标签

> ID：11459363
> 
> 赞同：0
> 
> 时间：2012-07-12T19:38:16.107
> 
> 标签：jquery, jquery-animate

在处理图像时，我试图使用动画来减小当前拇指的大小并应用叠加层。叠加层正在工作，但我似乎无法让动画工作，我认为这与我查找图像的方式有关。

这是HTML：

```
<img id='loading' />
....

<tr>
    <td>
        <img id="5" src="<?php echo($url['url'])?>" style="height:120px;"/>
    </td>
    <td>
        <a href="#" id="img_5" class="test">Test Overlay</a></li>
    </td>
</tr> 
```

CSS：

```
#loading { 
position: absolute; 
display: none;
background:transparent url(../../images/overlay.png) repeat top left;
} 
```

我当前的点击事件如下所示：

```
 $('.test').click(function(e) {
        e.preventDefault();

        var loading_img = $('#loading');

        var id = $(this).attr('id').substr(4);

        var img = $('#' + id);        
        var pos = img.offset();

        var $image  = $('#' + id).find('img:first');

        $image.stop(true)
          .animate({
            'width' :img.width() - 10 + 'px',
            'height':img.height() - 10 + 'px',
          },250);

        loading_img.show().css({
            width: img.width(),
            height: img.height(),
            left:pos.left, 
            top:pos.top
        });
    }); 
```

知道我的动画调用缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:51:55.370

在 HTML5 之前，id 不能以数字字符开头。如果没有 HTML5 文档类型，使用此类 ID 可能无法在所有浏览器中使用。

# grails - 在 Grails 中支持 Basic Auth 和 Form based Authenticaion

> ID：11459372
> 
> 赞同：6
> 
> 时间：2012-07-12T19:38:49.943
> 
> 标签：grails, spring-security

我需要支持使用 grails 1.3.6 的应用程序的基本身份验证和基于表单的身份验证。是否可以使用 Spring Security 来做到这一点？现在我确实有为应用程序工作的基于表单的身份验证，我还需要做什么才能支持两者？还是不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:07:19.340

是的，Spring Security 可以支持基本身份验证以及基于表单的身份验证。要允许特定 URL 或模式的基本身份验证，您可以添加以下配置：

```
grails.plugins.springsecurity.useBasicAuth = true
grails.plugins.springsecurity.basic.realmName = "My App Name"
grails.plugins.springsecurity.filterChain.chainMap = [
    '/someController/someAction': 'JOINED_FILTERS,-exceptionTranslationFilter',
    '/**': 'JOINED_FILTERS,-basicAuthenticationFilter,-basicExceptionTranslationFilter'
] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-01T13:31:46.503

改变

```
grails.plugins.** 
```

到

```
grails.plugin.** 
```

没有“s” `grails 2.3.9`。

# r - 在 R 中，我可以连接，然后调用变量 column=concatenated 字符串吗？

> ID：11459378
> 
> 赞同：0
> 
> 时间：2012-07-12T19:39:27.543
> 
> 标签：r, concatenation

我试图在我的 dataframe= 中确定许多患者的主要救护车到达时间`data`。

主要救护车是现场的第 1、2、3 或 4 辆车（`data$prim.amb.num=1`、`2`、`3`或`4`每个患者/行）。

`data$time_v1`, `data$time_v2`,`data$time_v3`并且`data$time_v4`有一个时间或缺失值，对应于相关的第 1、2、3 和 4 辆车。

我想做的是`prim.amb.time`使用与主要救护车到达时间相对应的时间创建一个新变量=。假设患者=1，救护车是第一个。那我要`data[1,"prim.amb.time"]=data[1,"time_v1"]`。

我可以通过以下方式找出正确`time_v*`的：

```
paste("time_v", data$prim.amb.num, sep="") 
```

但我不知道如何传递结果信息来调用正确的列。

我的希望是简单地拥有类似的东西：

```
data$prim.amb.time<-data$paste("time_v", data$prim.amb.num, sep="") 
```

但当然，这是行不通的。我什至不知道如何谷歌。我尝试了这个标题的各种组合，但无济于事。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:13:51.590

设置示例数据：

```
# read in basic example data for four patients, wide format
zz <- textConnection("patient.id prime.amb.num time_v1 time_v2 time_v3 time_v4
1000 1 30 40 60 100 
1001 3 40 50 60 80
1002 2 10 30 40 45
1003 1 24 40 45 60
")
d <- read.table(zz, header = TRUE)
close(zz) 
```

因此，在示例数据集中，我假设您的数据如下所示：

```
 patient.id prime.amb.num time_v1 time_v2 time_v3 time_v4
1       1000             1      30      40      60     100
2       1001             3      40      50      60      80
3       1002             2      10      30      40      45
4       1003             1      24      40      45      60 
```

鉴于这种数据结构，使用每行车辆而不是每行患者的数据集可能更容易。这可以通过使用`reshape()`将宽格式转换为长格式来实现。

```
dl <- reshape(d, direction='long', idvar="patient.id", varying=list(3:6))
# ordering & rename var for aesth. reasons:
dl <- dl[order(dl$patient.id, dl$time),]
dl$vehicle.id <- dl$time 
dl$time <- NULL
dl 
```

这给出了一个长数据集，每辆车有一行：

```
 patient.id prime.amb.num time_v1 vehicle.id
1000.1       1000             1      30          1
1000.2       1000             1      40          2
1000.3       1000             1      60          3
1000.4       1000             1     100          4
1001.1       1001             3      40          1
1001.2       1001             3      50          2
1001.3       1001             3      60          3
1001.4       1001             3      80          4
1002.1       1002             2      10          1
1002.2       1002             2      30          2
1002.3       1002             2      40          3
1002.4       1002             2      45          4
1003.1       1003             1      24          1
1003.2       1003             1      40          2
1003.3       1003             1      45          3
1003.4       1003             1      60          4 
```

获取每位患者第一辆救护车的到达时间，然后变成一个简单的单线：

```
dl[dl$prime.amb.num == dl$vehicle.id,] 
```

这使

```
 patient.id prime.amb.num time_v1 vehicle.id
1000.1       1000             1      30          1
1001.3       1001             3      60          3
1002.2       1002             2      30          2
1003.1       1003             1      24          1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:26:40.290

虽然我喜欢@mhermans 的回答，但如果你想要一个单线，一种解决方案是使用`?apply`如下：

```
#From @mhermans
zz <- textConnection("patient.id prime.amb.num time_v1 time_v2 time_v3 time_v4
1000 1 30 40 60 100 
1001 3 40 50 60 80
1002 2 10 30 40 45
1003 1 24 40 45 60
")
d <- read.table(zz, header = TRUE)
close(zz)

#Take each row of d and pull out time_vn where n = d$prime.amb.num
d$prime.amb.time <- apply(d, 1, function(x) {x[x['prime.amb.num'] + 2]})

> d
  patient.id prime.amb.num time_v1 time_v2 time_v3 time_v4 prime.amb.time
1       1000             1      30      40      60     100             30
2       1001             3      40      50      60      80             60
3       1002             2      10      30      40      45             30
4       1003             1      24      40      45      60             24 
```

编辑 - 或使用`paste`：

```
d$prime.amb.time <- 
  apply(
    d, 
    1, 
    function(x) {
      x[paste('time_v', x['prime.amb.num'], sep = '')]
    }
  )
#Gives the same result 
```

# mysql - 如何确保 MySQL 触发器是原子的？

> ID：11459382
> 
> 赞同：0
> 
> 时间：2012-07-12T19:39:35.850
> 
> 标签：mysql, sql, triggers

在创建博客时，我决定使用触发器是一种方便的方式来添加和删除帖子，同时在类别表中维护一个计数器。这是我在类别表中递增和递减计数器的两个触发器：

```
delimiter |
CREATE TRIGGER increment_category_count AFTER INSERT ON posts
  FOR EACH ROW BEGIN
    UPDATE categories SET count = count + 1 WHERE id = NEW.category_id;
  END;
|
delimiter ;

delimiter |
CREATE TRIGGER decrement_category_count AFTER DELETE on posts
  FOR EACH ROW BEGIN
    UPDATE categories SET count = count - 1 WHERE id = OLD.category_id;
  END;
|
delimiter ; 
```

我担心如果在插入或删除帖子时出现问题，那么我的计数器会变得不准确。如果出现问题，MySQL中有什么东西可以让我在触发器中回滚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:44:31.717

在触发器中完成的任何更改都将与触发触发器的事务一起回滚（或提交）（假设您确实对表使用 InnoDB）。

# asp.net - 布局页面中的 ASP.NET MVC 3 部分视图

> ID：11459390
> 
> 赞同：11
> 
> 时间：2012-07-12T19:39:50.497
> 
> 标签：asp.net, asp.net-mvc-2, partial-views

我正在为 asp.net MVC 布局页面设置共享内容（导航）。

这是我的部分视图“_LayoutPartial.cshtml”，其中包含从模型中提取导航数据的代码。

```
@model MyApp.Models.ViewModel.LayoutViewModel
<p>

    @foreach (var item in Model.navHeader)
    {
        //Test dump of navigation data
        @Html.Encode(item.Name); 
        @Html.Encode(item.URL); 

    }
</p> 
```

这是我的控制器“LayoutController.cs”的代码的样子。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MyApp.Models.ViewModel;

namespace MyApp.Controllers
{
    public class LayoutController : Controller
    {

        //
        // GET: /Layout/

        LayoutViewModel layout = new LayoutViewModel();

        public ActionResult Index()
        {
            return View(layout);
        }

    }
} 
```

这是“_Layout.cshtml”页面的代码。我正在尝试使用 Html.RenderAction(Action,Controller) 方法在这里调用局部视图。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
</head>
<body>
    <p>
        @{Html.RenderAction("Index","Layout");}
    </p>

    @RenderBody()
</body>
</html> 
```

当布局页面执行@{Html.RenderAction("Index","Layout");} 行时，它会抛出错误消息“Error execution child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'”。

我缺少什么朋友？如何在布局页面中调用局部视图？

谢谢大家！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T19:42:30.280

代替：

```
public ActionResult Index()
{
    return View(layout);
} 
```

做：

```
public ActionResult Index()
{
    return PartialView(layout);
} 
```

如果您在从子操作返回普通视图时不这样做，则此普通视图会尝试包含布局，这反过来会尝试呈现子操作，而子操作又会返回一个视图，该视图又包含布局，这反过来又试图呈现子动作，......我们最终得到的名字就像这个网站移植的名字一样。

同样在您的部分中，您不需要进行双重编码。@Razor 函数已经进行了 HTML 编码：

```
@model MyApp.Models.ViewModel.LayoutViewModel
<p>

    @foreach (var item in Model.navHeader)
    {
        @item.Name 
        @item.URL
    }
</p> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T19:43:33.190

首先验证您的子视图是否在`Shared`目录中

```
@Html.Partial("_LayoutPartial") 
```

或者

```
 @{Html.RenderAction("actionname", "controller name");} 
```

并且不要使用`@Html.Encode()`，Razor 已经在为你做。只需使用

```
@item.Name 
@item.URL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-13T11:34:21.690

我已经解决了进入布局页面的这个错误

```
System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper 
```

重要的 ！首先在共享文件夹中创建局部视图

在控制器中，

```
public PartialViewResult Userdetails()
{
   ....
   return PartialView("PartialViewName", obj);  
} 
```

在布局页面中，

```
@{Html.RenderAction("action","controller");} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T17:59:23.947

我知道这是一个老问题，但我想我会把它扔在这里。您可以使用`Html.Action`或`Html.RenderAction`。它们在技术上都做同样的事情，但取决于您返回的内容量可能会影响您应该真正使用哪个内容以获得最佳效率。

> 这两种方法都允许您从视图调用操作方法并在视图中输出操作的结果。两者之间的区别在于，`Html.RenderAction`将结果直接呈现给响应（如果操作返回大量 HTML，则效率更高），而`Html.Action`返回带有结果的字符串。

[来源](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx/)

# jquery - 当用户按下右箭头键时，如何让 jquery 幻灯片转到下一张幻灯片

> ID：11459391
> 
> 赞同：0
> 
> 时间：2012-07-12T19:40:02.157
> 
> 标签：jquery, slideshow, keyboard-events, next, keyup

好的，这就是场景，我希望用户能够按键盘上的左右箭头键并使页面上的 jquery 幻灯片触发下一张幻灯片。我想使用右箭头键，但输入、空格或制表符以外的任何键都可以（我只想要一个键来执行此操作）。我在想类似的东西

```
$('#target').keyup(function(event){.doslide();} 
```

或任何帮助将不胜感激。

```
<script type="text/javascript">
                            var slo=null;
                            var sola = Array();
                            var prev = 0;
                            var cur = 1;
                            var timi=null

                            jQuery.noConflict()
                            jQuery(document).ready(function() {
                                sol = $(".slide")
                                var sho = document.getElementById('slidya').getElementsByTagName('a');

                                for(var i=1;i<sho.length-1;i++)sola.push(sho[i]);

                                for(var i=1;i<sol.length;i++)sol[i].style.display = 'none';                        

                                timi = window.setInterval('doslide()',10000);

                            })
                            function doslide()
                                {
                                    $(sol[prev]).fadeOut(3000);
                                    $(sol[cur]).fadeIn(3000);
                                    sola[prev].className = 'number'
                                    sola[cur].className = 'number select'

                                    prev = cur++;
                                    if(cur>sol.length-1)
                                    {
                                        cur=0;
                                        prev= sol.length-1;
                                    }
                                }
                                function prevnext(mode)
                                {
                                    window.clearInterval(timi);timi=null;

                                    if(mode)
                                    {
                                        if(cur>sol.length-1)
                                        {
                                            cur=0;
                                            prev= sol.length-1;
                                        }
                                        doslide();      
                                    }
                                    else
                                    {
                                        cur--;
                                        prev--;

                                        if(prev<0)
                                        {
                                            cur=0;
                                            prev= sol.length-1;
                                        }
                                        if(cur<0)
                                        {
                                            cur=sol.length-1;
                                            prev=cur-1 ;        
                                        }

                                        $(sol[cur]).fadeOut(3000);
                                        $(sol[prev]).fadeIn(3000);
                                        sola[cur].className = 'number'
                                        sola[prev].className = 'number select' 
                                    }
                                    timi = window.setInterval('doslide()',10000)
                                }
                                function thisisit(aiyo)
                                {
                                    cur = aiyo
                                    window.clearInterval(timi);timi=null;

                                    $(sol[cur]).fadeIn(1000);
                                    $(sol[prev]).fadeOut(1000);
                                    sola[cur].className = 'number select'
                                    sola[prev].className = 'number'

                                    prev=cur
                                    ++cur;
                                    if(prev<0)prev = sol.length-1;
                                    timi = window.setInterval('doslide()',10000)     
                                }

                        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:48:16.173

我会尝试这样的事情：

```
var VK_LEFT = 37,
    VK_UP =  38,
    VK_RIGHT =  39,
    VK_DOWN = 40;

$(document).keydown(function(e){
   var key = (e.keyCode ? e.keyCode : e.which);

   if(key==VK_RIGHT)
       doslideright();
   else if(key==VK_LEFT)
       doslideleft();
}); 
```

# tabs - 将 Twitter 引导选项卡转换为选择菜单

> ID：11459392
> 
> 赞同：4
> 
> 时间：2012-07-12T19:40:16.763
> 
> 标签：tabs, twitter-bootstrap

有人知道如何将 Twitter Bootstrap 选项卡转换为选择菜单吗？这对于移动布局会派上用场。

像这样的东西...

```
<select>
<option value="#everything">Everything</option>
<option value="#catalog">Catalog</option>
<option value="#articles">Articles+</option>
<option value="#ejournals">E-Journals</option>
<option value="#reserve">Reserve</option>
<option value="#databases">Databases</option>
</select> 
```

这是一个活生生的例子。我有标签设置并且正在工作。但我希望它也可以与选择菜单一起使用。所以选择菜单也会改变标签。这将用于网站的移动版本。

[http://library.buffalo.edu/redesign/html/tabs.html](http://library.buffalo.edu/redesign/html/tabs.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T23:47:43.983

我有一个解决方案，因为我正在寻找类似的东西。特里的片段对我帮助太大了。我使用了 jQuery：

```
$(document).ready(function() {

  $(window).resize(responsive);
  $(window).trigger('resize');

});

function responsive(){

  // get resolution
  var resolution = document.documentElement.clientWidth;

  // because mobile layout
  if (resolution < 979) {

    if( $('.select-menu').length === 0 ) {

      // create select menu
      var select = $('<select></select>');

      // add classes to select menu
      select.addClass('select-menu input-block-level');

      // each link to option tag
      $('.nav-tabs li a').each(function(){
        // create element option
        var option = $('<option></option>');

        // add href value to jump
        option.val(this.href);

        // add text
        option.text($(this).text());

        // append to select menu
        select.append(option);
      });

      // add change event to select
      select.change(function(){
        window.location.href = this.value;
      });

      // add select element to dom, hide the .nav-tabs
      $('.nav-tabs').before(select).hide();

    }

  }

  // max width 979px
  if (resolution > 979) {
    $('.select-menu').remove();
    $('.nav-tabs').show();
  }

} 
```

[查看演示](http://jsfiddle.net/LACnj/)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:06:07.793

你不必做任何特别的事情。如果您在页面中包含这四个文件：

*   引导程序.css
*   bootstrap-responsive.css <--这是你需要的最重要的。此 .css 文件将根据页面宽度指示遵循的布局。
*   jquery-lastest-pack.js <-- 在 google 中搜索：“最新包 jquery”
*   引导程序.js

名为 bootstrap 的文件将包含在您下载的 bootstrap 包中。

导航栏必须是这样的：

```
<div class="navbar">
 <div class="navbar-inner">
  <div class="container">

   <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
   <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
   </a>

   <!-- Be sure to leave the brand out there if you want it shown -->
   <a class="brand" href="#">Project name</a>

   <!-- Everything you want hidden at 940px or less, place within here -->
   <div class="nav-collapse">
    <!-- .nav, .navbar-search, .navbar-form, etc -->
   </div>

  </div>
 </div>
</div> 
```

您包含的`nav-collapse`内容将包含在移动设备的精美菜单中。*您可以在“可选响应变体”*小节中[阅读](http://twitter.github.com/bootstrap/components.html#navbar)更多的引导文档

 *如果您想查看最终结果的示例，请转到[Bootstrap 主页](http://twitter.github.com/bootstrap/)并减小浏览器的宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T13:54:19.047

如果您可以使用 Javascript，则可以在确定用户在移动设备上时创建一个函数来转换它。

```
var $select = $('<select></select>');

$('.nav-tabs li a').each(function() {
    $select.append('<option>' + $(this).text() + '</option>');
}); 
```

[http://jsfiddle.net/mBddM/](http://jsfiddle.net/mBddM/)*

# sql - 在一个答案下加入两个不同的查询

> ID：11459395
> 
> 赞同：1
> 
> 时间：2012-07-12T19:40:21.467
> 
> 标签：sql, combinations

我有两个不同的查询产生了正确的结果，但我想让它们在一张表中产生答案。我怎么做？

这是我的代码：

```
SELECT count(distinct ID) as NoOfEmployees
FROM Table_Name
WHERE date<= '2012-05-31';

select count(subA.ID) as EmployeesChanged from (
SELECT A.ID 
FROM Table_Name A 
WHERE A.date < '2012-06-01' 
GROUP BY 1 
HAVING COUNT(A.Service_type) > 1 ) subA 
```

目前我有以下输出：

```
在职员工人数
X

```

```
员工变动
X

```

我该怎么做

```
员工人数 | 员工变动 | （员工人数 - 人数变化）
x | x | X

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:45:23.930

不知道你用的是什么数据库。但是对于某些数据库，您可以尝试：

```
select q1.Value, q2.Value, q1.Value - q2.Value from
  (SELECT count(distinct ID) as Value FROM Table_Name 
    WHERE date<= '2012-05-31') q1,
  (select count(subA.ID) as Value from 
      ( SELECT A.ID FROM Table_Name A 
        WHERE A.date < '2012-06-01' GROUP BY 1 
        HAVING COUNT(A.Service_type) > 1 ) subA) q2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:48:14.560

您可以使用`CROSS JOIN`：

```
SELECT a.*, b.*, a.NoOfEmployees - b.EmployeesChanged
FROM
(
    SELECT count(distinct ID) as NoOfEmployees
    FROM Table_Name
    WHERE date<= '2012-05-31'
) a
CROSS JOIN
(
    SELECT count(subA.ID) as EmployeesChanged 
    FROM 
    (
        SELECT A.ID 
        FROM Table_Name A 
        WHERE A.date < '2012-06-01' 
        GROUP BY 1 
        HAVING COUNT(A.Service_type) > 1 
    ) subA
) b 
```

**编辑：**

您可以通过使用条件聚合而不是执行两个单独的查询来极大地优化您的查询：

```
SELECT a.NoOfEmployees, a.EmployeesChanged, a.NoOfEmployees - a.EmployeesChanged
FROM
(
    SELECT 
        COUNT(DISTINCT CASE WHEN date <= '2012-05-31' THEN ID END) as NoOfEmployees,
        COUNT(DISTINCT CASE WHEN date < '2012-06-01' AND COUNT(Service_type) > 1 THEN ID END) AS EmployeesChanged
    FROM Table_Name
    GROUP BY ID
) a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:53:04.680

如果 date<= '2012-05-31' 与 A.date < '2012-06-01' 相同？

```
SELECT COUNT(1) AS NoOfEmployees,
SUM(CASE WHEN STCount > 0 then 1 else 0 end) as HasChange,
SUM(CASE WHEN STCount = 0 then 1 else 0 end) as NoChange
FROM 
  (SELECT ID,
  COUNT(A.Service_type) STCount
  FROM Table_Name
  WHERE date<= '2012-05-31'
  GROUP BY ID) AS Data 
```

# python - Python中的子进程Popen函数

> ID：11459398
> 
> 赞同：0
> 
> 时间：2012-07-12T19:40:24.427
> 
> 标签：python, subprocess, nuke

```
 import subprocess
  subprocess.Popen(['C:\Program Files\Nuke6.1v3\\Nuke6.1.exe', '-t', 'C:\Users\user\Desktop\\server.py' 
```

我目前正在使用它来调用server.py，它是通过以下方式设置的

```
import sys
import os
import distutils
import shutil
import nuke

def imageScale(source,destination,scale):
    myRead = nuke.createNode("Read")
    #SET VALUES
    myRead["file"].setValue(source)
    myRead["selected"].setValue(True)
    #CREATE REFORMAT
    myReformat = nuke.createNode("Reformat")
    #SET VALUES
    myReformat["type"].setValue("scale")
    myReformat["scale"].setValue(scale)#.75)
    #SELECTION
    myRead["selected"].setValue(False)
    myReformat["selected"] .setValue(True)
    #CREATE WRITE
    myWrite = nuke.createNode("Write")

    #SET VALUES
    myWrite["file"].setValue(destination)
    myWrite["file_type"].setValue("png")
    myWrite["channels"].setValue("rgba")
    myWrite["name"].setValue("temp")
    nuke.execute("temp",1,1,1) 
```

我是否可以使用 subprocess.popen 将参数传递给我的 imageScale 函数，即我直接从子进程传递参数源、目标和缩放

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:48:52.423

简短的回答是肯定的。您想从 server.py 中的 sys.argv 读取参数。

但是，如果你知道你有一个 python 函数并且知道你会从 python 调用它，我会看看

```
import multiprocessing
import server

p = multiprocessing.Process(target=server.imageScale, args=(source,destination,scale))
p.start()
p.join() 
```

除了更美观之外，您还可以在开始和加入之间自由地做其他事情。

编辑：实际上，我只是假设 Nuke 会用参数做正确的事情。不能保证它会，所以第二种策略可能也因为这个原因更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:48:43.677

`subprocess`只是执行一个进程并允许使用参数和管道与新进程通信，它不能做任何其他事情。如果要实现这一点，则需要一个包装器来与父程序通信并调用该`imageScale()`函数。

# android - Android测试：storage状态mounted，已经声明了WRITE_EXTERNAL_STORAGE权限，但是仍然无法写入模拟器的sdcard

> ID：11459401
> 
> 赞同：0
> 
> 时间：2012-07-12T19:40:31.233
> 
> 标签：android, testing, permission-denied

我正在编写一个测试程序，我想将我的一些测试结果序列化到一个文件中。我不断收到这个烦人的权限被拒绝异常。为了让事情变得更容易，我编写了一个小示例代码，但仍然得到相同的权限被拒绝警告。这是我的代码，我使用 getExternalStorageDirectory 来获取 /mnt/sdcard/ 目录：

```
private void writetry(){
        try {
            File sdCard = Environment.getExternalStorageDirectory();
            Log.d("can write", String.valueOf(sdCard.canWrite()));
            Log.d("ExternalStorageState", Environment.getExternalStorageState());
            File file = new File(sdCard, "VisitedScreen.temp");
            //file.createNewFile();
            FileOutputStream f = new FileOutputStream(file);
             byte[] buf = "Hello".getBytes();
             f.write(buf);
             f.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

这是 logcat 打印出来的内容：

```
07-12 12:28:47.288: D/can write(253): false
07-12 12:28:47.288: D/ExternalStorageState(253): mounted
07-12 12:28:47.297: W/System.err(253): java.io.FileNotFoundException: /sdcard/VisitedScreen.temp
07-12 12:28:47.437: W/System.err(253):  at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:244)
07-12 12:28:47.437: W/System.err(253):  at java.io.FileOutputStream.<init>(FileOutputStream.java:97)
07-12 12:28:47.437: W/System.err(253):  at java.io.FileOutputStream.<init>(FileOutputStream.java:69) 
```

我将我的 Junit 测试清单文件声明为：（实际上是设置权限的错误位置）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.mandaria.tippytipper.test"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="7" />

    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="net.mandaria.tippytipper" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>

</manifest> 
```

任何建议表示赞赏！

补充：我将相同的代码复制到一个普通的android程序中，它可以工作，并且sdCard.canWrite()返回true。但是在 Android Junit 测试项目中它不起作用。有谁知道为什么？？

问题已解决：感谢所有回复的人。这是因为我没有添加原始Android程序。我还注意到我不需要向 Junit 测试项目添加任何权限。很有意思的是，写动作发生在测试项目中，但在原项目中需要权限。我想知道如果我对 .apk 文件进行黑盒测试怎么办。我无法更改字节码的权限，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:49:37.310

使用许可

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

应该添加到您的主项目的清单中。请记住，测试与主应用程序在同一进程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:02:31.183

更改此行：

```
File sdCard = Environment.getExternalStorageDirectory(); 
```

对此：

```
File sdCard = new File(Environment.getExternalStorageDirectory().getPath()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T18:42:20.143

我遇到了同样的问题。为了解决这个问题，我不仅必须将权限标记添加到主清单，而且还必须将标记添加到包含单元测试的模块的清单。

权限标签：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# angularjs - 为 angularjs 控制器测试注入模拟服务

> ID：11459404
> 
> 赞同：21
> 
> 时间：2012-07-12T19:40:37.713
> 
> 标签：angularjs

我正在尝试测试一个依赖于我自己构建的服务的控制器。我想模拟这个服务，因为该服务与 DOM 对话。

这是我目前的测试：

```
describe('Player Controllers', function () {

    beforeEach(function () {
        this.addMatchers({
            toEqualData: function (expected) {
                return angular.equals(this.actual, expected);
            }
        });
    });

    describe('TestPSPlayerModule', function () {
        var $httpBackend, scope, ctrl;

        beforeEach(module('PSPlayerModule'));

        beforeEach(inject(function (_$httpBackend_, $rootScope, $controller) {
            $httpBackend = _$httpBackend_;

            scope = $rootScope.$new();
            ctrl = $controller(PlayerController, { $scope: scope });
        }));

        it('should request a clip url from the server when clipClicked is called', function () {
            expect(1).toBe(1);
        });
    });

}); 
```

我的控制器如下所示：

```
w.PlayerController = function ($scope, $http, $window, speedSlider, $location) {
    ...
} 
```

所以这是我要模拟的speedSlider。

我有想法使用我在测试代码中创建的模块，它可以提供速度滑块的伪造实现，所以我在 test.js 文件的顶部添加了以下内容：

```
module('TestPSPlayerModule', []).factory('speedSlider', function () {
    return = {
       ...
    };
}); 
```

然后在 beforeEach() 调用而不是具体的调用中列出该模块，但如果我这样做，我会收到以下错误：

```
Injector already created, can not register a module! 
```

所以我认为必须有更好的方法来提供我的一项服务的模拟实现。我也许可以将 sinon.js 用于....

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-09-05T13:58:55.233

还要确保您没有尝试在注入函数调用中执行此操作：

这将引发错误：

```
 beforeEach(inject(function(someOtherService) {
        module('theApp', function($provide) {
            myMock = {foo: 'bar'};
            $provide.value('myService', myServiceMock);
            someOtherService.doSomething();
        });
    })); 
```

这不会：

```
 beforeEach(function() {
        module('theApp', function($provide) {
            myMock = {foo: 'bar'};
            $provide.value('myService', myServiceMock);
        });

        inject(function(someOtherService) {
           someOtherService.doSomething();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T21:38:13.843

确保在定义后使用模块时没有多余的括号。所以`module('TestPSPlayer')`代替`module('TestPSPlayer',[])`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-08T15:42:11.793

就我而言，这没有用：

```
beforeEach(module('user'));
beforeEach(inject(function ($http) {
}));

beforeEach(module('community'));
beforeEach(inject(function ($controller, $rootScope) {
})); 
```

我已更改为此以使其正常工作：

```
beforeEach(module('user'));
beforeEach(module('community'));

beforeEach(inject(function ($http) {
}));
beforeEach(inject(function ($controller, $rootScope) {
})); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T11:14:25.313

如果您的提供程序不使用全局初始化，您可以使用原始注入的提供程序并模拟它。在下面的示例中，testedProvider 是您的控制器。

```
var injectedProviderMock;

beforeEach(function () {
    module('myModule');
});

beforeEach(inject(function (_injected_) {
    injectedProviderMock  = mock(_injected_);
}));

var  testedProvider;
beforeEach(inject(function (_testedProvider_) {
    testedProvider = _testedProvider_;
}));

it("return value from injected provider", function () {
    injectedProviderMock.myFunc.andReturn('testvalue');
    var res = testedProvider.executeMyFuncFromInjected();
    expect(res).toBe('testvalue');
});

//mock all provider's methods
function mock(angularProviderToMock) {

    for (var i = 0; i < Object.getOwnPropertyNames(angularProviderToMock).length; i++) {
        spyOn(angularProviderToMock,Object.getOwnPropertyNames(angularProviderToMock)[i]);
    }
    return angularProviderToMock;
} 
```

# css - 为什么 3 位十六进制 css 颜色会以它们的方式转换为 6？

> ID：11459405
> 
> 赞同：4
> 
> 时间：2012-07-12T19:40:44.200
> 
> 标签：css, styles, convention

我知道将 3 位十六进制 css 颜色转换为 6 位代码的方法是将每个十六进制数字复制一次，如下所示。

```
#ABC === #AABBCC 
```

为什么它会这样工作？为什么不`#ABC`等于`#A0B0C0`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T19:45:56.757

来自 W3C 规范：

> 三位 RGB 符号 (#rgb) 通过复制数字而不是添加零转换为六位形式 (#rrggbb)。例如，#fb0 扩展为 #ffbb00。这确保了白色 (#ffffff) 可以用短符号 (#fff) 指定，并消除对显示器颜色深度的任何依赖。

你可以在这里阅读更多关于它的信息：http: [//www.w3.org/TR/css3-color/](http://www.w3.org/TR/css3-color/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T17:54:05.947

原因是能够编码全范围的颜色（能够同时进行最高和最低颜色）。例如，如果`#RGB`成为`#R0G0B0`，那么`#fff`将成为`#f0f0f0`，这意味着您不能编码白色。相反，如果`#RGB`变为`#RfGfBf`，`#000`则将是`#0f0f0f`，排除黑色。系统`#RGB = #RRGGBB`允许`#000`= `#000000`（黑色）和`#fff = #ffffff`（白色），提供全范围的均匀间隔颜色。

* * *

阅读更多：

*   [维基百科文章](http://en.wikipedia.org/wiki/Web_colors#Hex_triplet)
*   [W3网站](http://www.w3.org/TR/css3-color/#rgb-color)

# linux - 通过管道将连续流传输到多个文件

> ID：11459406
> 
> 赞同：3
> 
> 时间：2012-07-12T19:40:46.267
> 
> 标签：linux, shell, awk

我有一个程序将持续运行，将输出写入标准输出，我想不断地从中获取最后一组输出并将其写入文件。每次出现一组新的输出时，我都想覆盖同一个文件。

一个示例是以下命令：

```
iostat -xkd 5 
```

每 5 秒打印一些输出，每个输出后都有一个空行。我希望将最后一个“集合”写入文件，我认为这应该可以通过一些简单的方法来实现。

到目前为止，我已经尝试过使用 xargs，我只能用一行来做到这一点，而不是一组由某些东西分隔的行。

我认为使用 awk 可能是可行的，但我不知道如何让它在数据传输过程中缓冲数据，以便它可以使用系统将其写出，或者让它关闭并重新打开同一个输出文件。

**编辑**：为了澄清，这是一个将连续运行的命令。我不想启动一个新命令并阅读它的输出。

**解决方案**

我改编了@Bittrance 的答案以获得以下信息：

```
iostat -xkd 5 | (while read r; do
        if [ -z "$r" ]; then
                mv -f /tmp/foo.out.tmp /tmp/foo.out
        else
                echo "$r" >> /tmp/foo.out.tmp
        fi
done) 
```

这基本上是相同的，除了检测“节”的结尾并写入临时文件以便每当外部进程尝试读取输出文件时它就会完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:11:01.110

部分答案：

```
./your_command | (while read r ; do 
    if ... ; then
        rm -f foo.out
    fi
    echo $r >> foo.out
done) 
```

如果有一个条件（...），您知道您正在接收“集合”的第一行，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:26:33.023

**编辑**在回复评论时，我测试了这个 perl 解决方案的工作：

```
#!/usr/bin/perl
use strict;
use warnings;

$|=1;

open(STDOUT, '>', '/tmp/iostat.running') or die $!;

while(<>)
{
    seek (STDOUT, 0, 0) if (m/^$/gio);
    print
} 
```

所以现在你可以

```
iostat -xkd 5 | myscript.pl& 
```

并观看快照：

```
watch -n10 cat /tmp/iostat.running 
```

如果您想确保最后有足够的空间被覆盖（因为每次输出长度可能略有不同），您可以在最后打印一些填充，例如：

```
 print "***"x40 and seek (STDOUT, 0, 0) if (m/^$/gio); 
```

（剪掉旧的答案文本，因为它显然让人们感到困惑）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:13:45.397

为什么不：

```
while :; do
  iostat -xkd > FILE
  sleep 5
done 
```

如果您使用`awk`以下设置将每个输出写入`iostat`编号文件：

```
iostat -xkd 5 | awk -v RS=$'\n'$'\n' '{ print >NR; close(NR) }' 
```

注意：第一条记录是`iostat`输出的表头。

# xcode - SIGABRT xcode 4.2 错误

> ID：11459413
> 
> 赞同：0
> 
> 时间：2012-07-12T19:41:07.943
> 
> 标签：xcode, xcode4.2, sigabrt

我正在尝试在 xcode 4.2 中为 iPhone 运行我的应用程序，但它一直在关闭。据我所知，SIGABRT 可以来自很多地方。我已经尝试重新启动计算机并重置 iOS 模拟器。构建成功，但在我测试应用程序之前会弹出此错误。错误在 main.m 文件中。

> 0x00001fa8 <+0152> mov -0x38(%ebp),%ecx

线程1：程序接收信号：“SIGABRT”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:09:50.280

SIGABRT 表示您的代码中某处发生了错误。这可能是由于各种问题而发生的。尝试在断点导航器中设置异常断点，或者自己手动设置断点，看看哪里抛出异常。您还可以在调试器控制台中查看异常的来源。

# javascript - 带有悬停图像的子导航栏

> ID：11459418
> 
> 赞同：0
> 
> 时间：2012-07-12T19:41:35.080
> 
> 标签：javascript, html, navigation, dreamweaver

我正在创建一个带有图像的水平顶部导航栏。我已经准备好顶部栏（下面的代码），但我不确定如何添加第二级和第三级导航。例如，当有人将鼠标悬停在 Business Essentials 上时，我希望图像本身更改为悬停状态，并在其下方显示一个表格，这是我的子导航。也许我以错误的方式解决这个问题，但使用图像是我可以获得所要求的确切外观的唯一方法。如果有人能告诉我下一步应该做什么或给我一个参考/示例代码，我将不胜感激。

```
<head>
<script type="text/javascript">
function MM_swapImgRestore() { //v3.0
var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-   2);i+=3)
if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src;  x.src=a[i+2];}
}
</script>
</head>

<body onload="MM_preloadImages('Nav2_hover.jpg','Nav3_hover.jpg','Nav4_hover.jpg','Nav5_hover.jpg','Nav6_hover.jpg','Nav7_hover.jpg','Nav8_hover.jpg','Nav9_hover.jpg')">

<table width="950" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="194"><img src="Nav1.jpg" width="194" height="67" alt="Home" longdesc="/home.aspx" /></td>
<td width="70"><a href="/bus_essentials.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('BusEssentials','','Nav2_hover.jpg',1)"><img src="Nav2.jpg" alt="Business Essentials" width="70" height="67" id="BusEssentials" /></a></td>
<td width="9"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="68"><a href="/career_planning.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('CareerPlanning','','Nav3_hover.jpg',1)"><img src="Nav3.jpg" alt="Career Planning" width="68" height="67" id="CareerPlanning" /></a></td>
<td width="9"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="108"><a href="/communications.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Communications','','Nav4_hover.jpg',1)"><img src="Nav4.jpg" alt="Communications" width="108" height="67" id="Communications" /></a></td>
<td width="9"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="95"><a href="/ind_effectiveness.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('IndivEffectiveness','','Nav5_hover.jpg',1)"><img src="Nav5.jpg" alt="Individual Effectiveness" width="95" height="67" id="IndivEffectiveness" /></a></td>
<td width="9"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="84"><a href="/leadership.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Leadership','','Nav6_hover.jpg',1)"><img src="Nav6.jpg" alt="Leadership" width="84" height="67" id="Leadership" /></a></td>
<td width="10"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="77"><a href="/mentoring.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Mentoring','','Nav7_hover.jpg',1)"><img src="Nav7.jpg" alt="Mentoring" width="77" height="67" id="Mentoring" /></a></td>
<td width="182"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="9"><a href="/effectiveness.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Effectiveness','','Nav8_hover.jpg',1)"><img src="Nav8.jpg" alt="Effectiveness" width="99" height="67" id="Effectiveness" /></a></td>
<td width="182"><img src="NavDiv.jpg" width="9" height="67" /></td>
<td width="17"><a href="/skills.aspx" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Skills','','Nav9_hover.jpg',1)"><img src="Nav9.jpg" alt="Skills" width="93" height="67" id="Skills" /></a></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:31:48.910

大约有一百万个`jquery`脚本和教程可以做到这一点，而无需尝试手动编写代码。我不知道这是否可行，但一个快速的谷歌搜索想出了这个：

[http://www.webdesigndev.com/web-development/create-the-fancyst-dropdown-menu-you-ever-saw](http://www.webdesigndev.com/web-development/create-the-fanciest-dropdown-menu-you-ever-saw)

# windows - 在脚本中以管理员身份运行 cmd.exe

> ID：11459419
> 
> 赞同：6
> 
> 时间：2012-07-12T19:41:35.333
> 
> 标签：windows, vbscript, runas

我有一个脚本，我需要以管理员身份运行，就像我右键单击 cmd.exe 并单击*Run As Administrator 一样*。

目前这就是我所拥有的：

```
Call WSHShell.Run("cmd.exe /K netdom renamecomputer ... end code") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T16:01:12.083

您是否尝试过使用 ShellExecute？

RunCmdElevated.vbs

```
Set objShell = CreateObject("Shell.Application")
objShell.ShellExecute "cmd.exe", "/k echo test", "", "runas", 1 
```

> wscript RunCmdElevated.vbs

给

> 测试
> 
> C:\Windows\system32>

在新窗口中。“1”是查看模式

[http://ss64.com/vb/shellexecute.html](http://ss64.com/vb/shellexecute.html)

# iphone - 如何获得在后台运行的 AFNetworking AFURLConnectionOperation 的进度？

> ID：11459423
> 
> 赞同：2
> 
> 时间：2012-07-12T19:41:50.627
> 
> 标签：iphone, ios5, upload, progress-bar, afnetworking

在我的 iOS 应用程序中，我正在使用 AFURLConnectionOperation 类（视图 A）上传图像，然后允许用户编辑图像的一部分（视图 B）。稍后，在视图 C 中，我有一个进度条，需要显示从视图 A 开始的上传进度。

我无法弄清楚如何使用 AFNetworking 从视图 C 中访问在视图 A 中启动的操作的进度。据我所知，这可能是不可能的。

提前致谢，

将要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:33:39.980

当然，Will 是可能的，它与 AFNetworking 几乎没有关系，但更多的是与常见的编程模式有关。

您将需要将`AFURLConnectionOperation`对象存储在视图控制器之外，它们都可以访问它。这里的最佳实践是创建一个[单例类](https://stackoverflow.com/questions/5720029/create-singleton-using-gcds-dispatch-once-in-objective-c)来封装 AFNetworking 属性和方法来处理上传图像。每当您需要有关该上传的信息或与之交互时，您都可以通过类方法（如`sharedInstance`.

```
+ (id)sharedInstance
{
    static dispatch_once_t once;
    static id sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
} 
```

如果您正在与 Web 服务（而不是原始 FTP 服务器）进行交互，那么子类[化 AFHTTPClient](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html)可能是“上传管理器”类型的类解决方案的最佳选择。

无论您选择什么，一旦您将一个简单的类放在一起，您就可以在 ViewControllers 的 viewWillAppear 中注册 KVO 通知并在 viewWillDisappear 中取消注册以干净地处理您的 UI 更新（例如进度条）。如果你不了解 Key-Value Observing，请阅读[Introduction to Key-Value Observing Programming Guide](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)。在掌握了这些知识之后，您将能够更好地应对 iOS。

因此，在视图 A 的上传代码中，使用您的神奇新类使用 URL 创建和排队上传（可以使用多种方法来使用内存中的图像、NSFileURLs 或 NSString，如此处所示）

```
[[MyImageUploadManager sharedInstance] uploadImageFromPath:@"/wherever/1.png" toURL:[NSURL URLWithString:@"ftp://someserver.com/images/"]]; 
```

…在视图 C 的控制器的 viewWillAppear 中

```
- (void) viewWillAppear:(BOOL)animated
{
    ...
    [[MyImageUploadManager sharedInstance] addObserver:self forKeyPath:@"progress" options:NSKeyValueObservingOptionNew context:nil];
    ...
} 
```

… 在视图 C 的视图中将消失

```
- (void)viewWillDisappear:(BOOL)animated
{
    ...
    [[MyImageUploadManager sharedInstance] removeObserver:self forKeyPath:@"progress" context:nil];
    ...
} 
```

每当您的上传管理器类中的“进度”属性发生变化时，iOS 都会调用该函数`observerValueForKeyPath:ofObject:change:context:`。这是一个非常简单的版本：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ( [keyPath isEqualToString:@"progress"] )
    {
        // since you only upload a single file, and you've only added yourself as 
        // an observer to your upload, there's no mystery as to who has sent you progress

        float progress=[change valueForKey:NSKeyValueChangeNewKey];
        NSLog(@"operation:%@ progress:%0.2f", object, progress );

        // now you'd update the progress control via a property bound in the nib viewer
        [[_view progressIndicator] setProgress:progress];
    }
    else
    {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

这应该会让你在路上顺利，希望这对你有所帮助。

# c# - 将 .FindOne() 结果传递给 gridView 的变量 - C# .net

> ID：11459425
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:41:56.773
> 
> 标签：c#, .net, variables, gridview

我在后面的 C# .NET 网页代码中使用目录搜索。我不知道如何将结果添加到单元格的文本中。列中显示的结果是文本“System.DirectoryServices.SearchResult”。我怀疑当我将结果添加到字符串时我没有正确传递属性。

```
String Name = userName;
DirectorySearcher ds = new DirectorySearcher();
ds.Filter = "samaccountname=" + Name;
ds.PropertiesToLoad.Add("userAccountControl");
SearchResult sr = ds.FindOne();
e.Row.Cells[5].Text = sr.ToString(); 
```

如您所见，我将 sr.ToString() 传递给单元格。这似乎是不正确的，但我不知道如何将结果传递给一个变量，然后我可以将其转换为字符串。我试过这个：

```
var result1 = sr;
string result2 = result1.ToString();
e.Row.Cells[5].Text = result2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:51:38.250

[来自SearchResult](http://msdn.microsoft.com/en-us/library/system.directoryservices.searchresult.aspx)上的 msdn 站点。看起来您想将其设置为`sr.Path`? 没有重载，`ToString()`所以它只会返回对象的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:54:22.227

在 SearchResult - 尝试类似`sr["userAccountControl"].ToString()`. 搜索结果对象只是一个对象。你必须告诉从它的集合中加载什么属性。您可以检查`PropertyNames`属性以查看结果对象中的内容。查看： http: [//msdn.microsoft.com/en-us/library/system.directoryservices.resultpropertycollection.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.resultpropertycollection.aspx) 以获取您正在使用的对象的参考。

# apache-camel - Apache骆驼FTP独立程序

> ID：11459432
> 
> 赞同：2
> 
> 时间：2012-07-12T19:42:10.620
> 
> 标签：apache-camel

您好，我正在尝试编写一个简单的独立 java FTP 程序，该程序使用 Apache Camel 将文件从 FTP 服务器位置下载到我的本地计算机。当我运行时，我看到它永远运行并且实际的文件传输没有发生。可能是什么问题？

```
private static class MyRouteBuilder extends RouteBuilder {
           @Override
       public void configure() throws Exception {
           from("sftp://serverIpAddress?password=passwd&binary=true")
           .process(new Processor() {
               public void process(Exchange exchange) throws Exception {
                   System.out.println("Invoked timer at " + new Date());

               }
           }) 
           .tracing()
           .to("file://localmachine/Users/localFtpOutput/")
           ;
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:33:53.480

疯狂猜测：您不需要提供用户名来访问您的 ftp 吗？

```
from("sftp://username@serverIpAddress?password=passwd&binary=true") 
```

如果您不这样做，骆驼将尝试使用匿名用户名登录并且不使用密码（根据[文档](http://camel.apache.org/ftp.html)）

# python - 我的输出文件中的数据没有打印出它应该有的所有结果

> ID：11459435
> 
> 赞同：0
> 
> 时间：2012-07-12T19:42:25.970
> 
> 标签：python, list, return, lxml

我正在尝试将 makeList[start] 的索引输出到 makeList[end]。我有所有正确的开始和结束值，总共大约 11 对。但是，我没有得到正确的输出，因为它没有打印出所有可能的输出。为什么会这样？

```
def searchPFAM(fname):
   with open(fname,'rb') as f:
       root = etree.parse(f)
       for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):
          try:
             start = int(lcn.get("start"))
             end = int(lcn.get("end"))
             yield start, end
          except (TypeError , ValueError) as e:
             pass 

uniprotID ='Q14591'

def createRef():
    fileInput = open(uniprotID +'.txt','r')
    readAA = fileInput.read()
    store_value = (readAA.partition('\n'))
    aaSequence = store_value[2].replace('\n', '')
    makeList = list(aaSequence)
    return makeList

makeList = createRef()

for start, end in searchPFAM(fname):
    print start, end  
    if start <= end:
        with open('newfile.txt','w') as fileinput:
            while start <= end:
                result = makeList[start]
                fileinput.write(result)
                start += 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:54:34.040

只是一个猜测，但你可能想要：

```
with open('newfile.txt','w') as fileinput:
    for start, end in searchPFAM(fname):
        print start, end  
        if start <= end:
            while start <= end:
                result = makeList[start]
                fileinput.write(result)
                start += 1 
```

您的旧版本仅向文件写入 1 个开始/结束循环，将其关闭，然后打开一个新文件（与旧文件同名），写入 1 个开始/结束循环，关闭文件......换句话说，你'在每次循环迭代时重写文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:47:48.937

最常见的原因：您需要在脚本终止之前刷新输出文件。

上面的片段：

```
with open('newfile.txt','w') as fileinput:
        while start <= end:
            result = makeList[start]
            fileinput.write(result)
            start += 1
fileinput.flush() 
```

# arrays - 将数组分配给范围时无法转换错误

> ID：11459438
> 
> 赞同：1
> 
> 时间：2012-07-12T19:42:37.210
> 
> 标签：arrays, google-apps-script, runtime-error, google-sheets

下面是我的代码，在代码的最后一行我收到“无法转换错误”。*澄清这一行：`sheet.getRange`引发错误。*

这就是错误的全部内容；仅此而已，只是“无法转换”。另外，这是完整的代码，所以没有别的了。

```
 function days(){   
      var table = new Array(7); 

      for ( var i = 0; i < 7 ; i ++){
        table[i] = i+2;  
        }

       var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Want");
           sheet.getRange("B2:B9").setValues(table); 

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:17:54.373

`SetValues()`将 2 维数组作为参数，`TABLE`是 1 维数组...这不能按原样工作...虽然很容易更改，但将 table 设置为 7 个元素的 2D 数组。

像这样 ： `table[i] = [i+2];`

顺便说一句，范围（'B2：B9'）是 8 个单元格高，你只给出 7 个值......那里会有问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:18:59.880

我对 Google Apps 脚本一无所知，但我设法在 Google 上找到[了这个](https://developers.google.com/apps-script/class_range#setValues)。

看来您的表需要是一个二维数组。

也许这可以帮助？

（代码来自上面的链接）

```
var myTable = [[1, 2, 3, 4],[5, 6, 7, 8]];
var sheet = SpreadsheetApp.getActiveSheet();
sheet.getRange(1,1,2,4).setValues(myTable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:19:28.173

我想出了这个问题的问题，所以我会回答这个问题，以便其他人可以受益。这里的问题是必须为 Range 对象的 .setValues 方法提供一个二维数组 [][]。所以我在另一个数组中创建了一个 0 维数组，这样我现在就有了一个二维数组。

```
var array = new Array(7);

 for (var i = 0; i < 7; i++) {
    array[i] = new Array(0);
  } 
```

# javascript - 标签分组和标签着色：如何将此功能应用于从我的网页打开的标签，而不考虑浏览器

> ID：11459441
> 
> 赞同：0
> 
> 时间：2012-07-12T19:43:06.123
> 
> 标签：javascript, html, tabs, frontend

我编写了一个代码来在我的网页中显示一堆超链接。

```
<td id="formType" class="center" width="75">
<a href="${d.getURL()}" title="${d.getTitle()}">
<c:out value="${d.getType()}" />
</a>
</td> 
```

当我单击浏览器上的超链接时，它会在同一选项卡中显示单击的超链接。

我进行了如下修改以在新选项卡中显示它。

```
<td id="formType" class="center" width="75"> 
<a href="${d.getURL()}" title="${d.getTitle()}" target="_blank">
<c:out value="${d.getType()}" /> 
</a>
</td> 
```

进行此修改后，我可以在新选项卡中打开单击的超链接。

现在我想对标签进行分组。和颜色标签。IE 8 有这个很酷的特性。这是浏览器依赖的功能。无论浏览器如何，我都可以将这些功能添加到我的选项卡中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:01:04.750

选项卡处理在浏览器级别完成。尽管您可以编写一个适用于您的页面的浏览器扩展程序，但您不能只编写页内 javascript 来更改浏览器的行为。在您的代码中，'target="_blank"' 是导致创建新选项卡的原因，或者如果浏览器不支持选项卡，它将默认为新窗口。但是，您不能影响浏览器处理该新选项卡或窗口的方式。如果您只想要标签分组、着色和其他功能，Chrome 和 Firefox 都有几个很棒的扩展。

# javascript - Javascript 菜单选择

> ID：11459444
> 
> 赞同：0
> 
> 时间：2012-07-12T19:43:28.830
> 
> 标签：javascript, jquery, menu, navigation

编码新手，请帮帮我。我有一个垂直导航的滑动代码。当用户将鼠标悬停在导航上时，它会向右滑出。一旦用户单击导航，我希望它保持活动状态。我该怎么做呢？这是一个视觉的链接

[http://edgecastcdn.net/00009B//TEMP/NAV/index.html](http://edgecastcdn.net/00009B//TEMP/NAV/index.html)

作为对您的帮助的回报，这是你们可能会喜欢的一个笑话（如果您还没有听说过的话）

> 一位妻子问她的丈夫，一位计算机程序员；“你能不能帮我去商店买一箱牛奶，如果他们有鸡蛋，就买六个！”
> 
> 不久之后，丈夫带着 6 箱牛奶回来了。
> 
> 妻子问他：“你他妈为什么要买六箱牛奶？”
> 
> 他回答说：“他们有鸡蛋。”

谢谢大家，任何帮助表示赞赏！这是代码。如果你也需要css，请告诉我。

```
$(document).ready(function(){
    slide("#sliding-navigation", 30, 15, 150, .8);
});

function slide(navigation_id, pad_out, pad_in, time, multiplier){
// creates the target paths
var list_elements = navigation_id + " li.sliding-element";
var link_elements = list_elements + " a";

// initiates the timer used for the sliding animation
var timer = 0;

// creates the slide animation for all list elements 
$(list_elements).each(function(i)
{
    // margin left = - ([width of element] + [total vertical padding of element])
    $(this).css("margin-left","-180px");
    // updates timer
    timer = (timer*multiplier + time);
    $(this).animate({ marginLeft: "0" }, timer);
    $(this).animate({ marginLeft: "12px" }, timer);
    $(this).animate({ marginLeft: "0" }, timer);
});

// creates the hover-slide effect for all link elements         
$(link_elements).each(function(i)
{
    $(this).hover(
    function()
    {
        $(this).animate({ paddingLeft: pad_out }, 150);
    },      
    function()
    {
        $(this).animate({ paddingLeft: pad_in }, 150);
    });

});

} 
```

这是我的 CSS 代码（使用道格拉斯“活动”代码更新）谢谢！

```
body 
{
margin: 0;
padding: 0;
background: #1d1d1d;
font-family: "Lucida Grande", Verdana, sans-serif;
font-size: 100%;
}

h2  
{ 
color: #999;
margin-bottom: 0; 
margin-left:13px;
background:url(navigation.jpg) no-repeat;
height:40px;
}

h2 span
{
display: none;
}

p   navigation-block
{ 
color: #00b7e6; 
margin-top: .5em;
font-size: .75em;
padding-left:15px;  
}

#navigation-block {
position:relative;
}

#hide {
position:absolute;
top:30px;
left:-190px;
}

ul#sliding-navigation
{
list-style: none;
font-size: 0.75em;
margin: 30px 0;
padding: 0;
}

ul#sliding-navigation li.sliding-element h3,
ul#sliding-navigation li.sliding-element a
{
display: block;
width: 150px;
padding: 2px 18px;
margin: 0;
margin-bottom: 0px;
}

ul#sliding-navigation li.sliding-element h3
{
color: #fff;
background:#333333 url(heading_bg.jpg) repeat-y;
padding-top: 7px;
padding-bottom: 7px;
}

ul#sliding-navigation li.sliding-element a
{
color: #999;
background:#222 url(tab_bg.jpg) repeat-y;
border: 1px solid #1a1a1a;
text-decoration: none;
}

ul#sliding-navigation li.sliding-element a.selected { color: #cc0000; }
{
color: #FFF;
margin-top: 0.5em;
font-size: 10pt;
padding-left:15px;
font-weight: bolder;
}

ul#sliding-navigation li.sliding-element a:hover { color: #00b7e6; background:#2a2a2a; }
#navigation-block p {
color: #FFF;
margin-top: 0.5em;
font-size: 10pt;
padding-left:15px;
font-weight: bolder;
}

.active{
  padding-left:12px;
  /*Add whatever other styles you need */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:43:53.240

看起来您的导航实际上并没有更改页面，只是在页面上加载（或切换）新内容。

在用户单击链接后保持这种状态的最简单方法是添加具有正确设置的类。例如：

jQuery

```
$(link_elements).hover(
  function()
  {
    $(this).animate({ paddingLeft: pad_out }, 150);
  },      
  function()
  {
    $(this).animate({ paddingLeft: pad_in }, 150);
  }
).click(function(){
  $(link_elements).removeClass("active");
  $(this).addClass("active");
}); 
```

CSS

```
.active{
  padding-left:12px;
  /*Add whatever other styles you need */
} 
```

编辑：添加了 CSS

* * *

编辑：好的，我看到了我之前错过的内容 - jQuery 正在设置内联填充，它覆盖了外部 CSS。从技术上讲，您可以`!important`在`.active`CSS 中使用，但我个人更喜欢这种方法。

基本上，我`active`像以前一样添加了类，但我只将它用作参考。当用户单击链接时，将`active`添加该类。如果链接具有`active`该类，则它不会在鼠标移出时设置动画。当一个 not`active`类被点击时，`active`从所有其他导航链接中删除，它们都被动画到它们的起点，并且新链接被创建`active`。

这可以用相关代码更好地解释：

```
// creates the hover-slide effect for all link elements         
$(link_elements).each(function(i) {
    $(this)
        .hover(
            function() {
                $(this).animate({ paddingLeft: pad_out }, 150);
            }, function() {
                if(!$(this).hasClass("active"))
                    $(this).animate({ paddingLeft: pad_in }, 150);
            })
        .click(
            function() {
                $(link_elements).not($(this)).removeClass("active").animate({ paddingLeft: pad_in}, 150);
                $(this).addClass("active");
            });
}); // End `each` loop 
```

以及相关的 jsFiddle： http: [//jsfiddle.net/eAaCn/](http://jsfiddle.net/eAaCn/) （添加`console.log()`并`return false`在 jsFiddle 中仅用于测试）

# c# - ASP .Net 用户控制错误处理

> ID：11459445
> 
> 赞同：2
> 
> 时间：2012-07-12T19:43:31.670
> 
> 标签：c#, asp.net, .net, iis

我们正在使用带有 C# 的 asp .Net。我的页面（.aspx）由多个 Web 用户控件（.ascx）组成

我希望有一个错误处理机制，如果其中一个用户控件有任何异常，asp .net 应该在控件上显示一些友好的错误消息。所有其他控件应按预期呈现。

有没有什么办法可以做到这一点，而无需在出现异常时显示/隐藏的每个控件上放置占位符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:47:20.493

你可以做这样的事情。

具有每个 UserControl 必须实现的抽象 OnLoad() 的抽象基类。您可以对任何想要共享错误处理的事件使用相同的模型。

```
public abstract class BaseUserControl : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            OnLoad();
        }
        catch (Exception)
        {
            //Custom error handling here
        }
    }

    protected abstract void OnLoad();
}

public class MyUserControl: BaseUserControl
{
    protected override void OnLoad()
    {
        //My normal load event handling here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:40:04.660

1）在app_code中，创建一个继承Page的类MyPage.cs

```
class MyPage : Page { } 
```

2) 将您的页面的继承更改为 MyPage。

```
public partial class _Default : MyPage { ... 
```

web.config 中有一个属性，您可以根据需要使用它来更改它

3）回到MyPage.cs，添加所有页面的通用错误处理程序

```
protected override void OnError(EventArgs e)
{
    /* here you can intercept the error and show the controls that you want */
    base.OnError(e);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T21:28:14.900

首先创建一个覆盖默认 onerror 事件的基本用户控件类。

```
 public class MyControlClass:UserControl
        {

            protected override void OnError(EventArgs e)
            {
                //here you sould add your friendly msg implementation

                //base.OnError(e); here should remain commented
            }
        } 
```

然后你可以创建你的用户控件：

```
public class Control1:MyControlClass
    {
        // ....
        // ....
    } 
```

因此，如果任何控件创建异常，其余控件将继续工作。

# ios - CFStream 上的 HTTP 请求

> ID：11459452
> 
> 赞同：1
> 
> 时间：2012-07-12T19:43:49.847
> 
> 标签：ios, cocoa, networking, cfnetwork

我正在尝试使用 CFStream 进行简单的 HTTP 通信，但是使用下面的代码，即使我提供了无效的 URL (wwwww.yahoo.com)，我仍然可以成功连接。

有人可以指出我这段代码有什么问题吗？我预计对 CFReadStreamOpen() 的调用会失败，但即使 URL 错误，它也会成功。

我还没有找到一个简单的 CFNetwork 示例，它可以在 ARC 上运行 HTTP（不使用 NSURL）。如果有人知道这样的示例代码，请告诉我。

```
- (void) test
{

    CFStringRef m_host = CFStringCreateWithCString(NULL, "wwwww.yahoo.com", kCFStringEncodingASCII);

    int m_port = 80;
    CFHostRef host;

    NSLog(@"Attempting to (re)connect to %@:%d", m_host, m_port);

    {

        CFReadStreamRef     m_in = NULL;
        CFWriteStreamRef    m_out = NULL;

        host = CFHostCreateWithName(kCFAllocatorDefault, (CFStringRef)m_host);
        if (!host)
        {
            NSLog(@"Error resolving host %@", m_host);
        }

        CFStreamCreatePairWithSocketToCFHost(kCFAllocatorDefault, host , m_port, &m_in, &m_out);
        CFRelease(host);

        CFStreamClientContext context = {0, nil,nil,nil,nil}; 

        if (CFReadStreamSetClient(m_in, kCFStreamEventHasBytesAvailable | kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered, networkReadEvent, &context))
        {
            CFReadStreamScheduleWithRunLoop(m_in, CFRunLoopGetCurrent(),kCFRunLoopCommonModes);
        }

        if (CFWriteStreamSetClient(m_out, kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered, networkWriteEvent, &context))
        {
            CFWriteStreamScheduleWithRunLoop(m_out, CFRunLoopGe   tCurrent(),kCFRunLoopCommonModes);
        }        

        BOOL success = CFReadStreamOpen(m_in);
        CFErrorRef error = CFReadStreamCopyError(m_in);
        if (!success || (error && CFErrorGetCode(error) != 0))
        {
            NSLog(@"Connect error %s : %ld", CFErrorGetDomain(error), CFErrorGetCode(error));
            [NSThread sleepForTimeInterval:5.0];
        }

        success = CFWriteStreamOpen(m_out);
        error = CFReadStreamCopyError(m_in);
        if (!success || (error && CFErrorGetCode(error) != 0))
        {
            NSLog(@"Connect error %s : %d", CFErrorGetDomain(error), CFErrorGetCode(error));
            [NSThread sleepForTimeInterval:5.0];
        }
        else 
        {
            NSLog(@"Connected");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T05:48:13.603

对于像您这样的异步代码，您需要设置委托并在那里捕获错误。查看[http://iphonedevsdk.com/forum/iphone-sdk-development/17542-cfstream-catch-error-in-connection.html](http://iphonedevsdk.com/forum/iphone-sdk-development/17542-cfstream-catch-error-in-connection.html)

根据 Apple Developer 网站，“如果流可以在后台打开而不会阻塞，则此函数始终返回 true。”。这意味着打开流的请求是在不同的线程上发送的，因此当您调用它并在后台线程上启动连接过程时，该函数会返回 true。然后，各个流上的所有读/写调用都会阻塞，直到后台线程完成打开流。如果您在“CFReadStreamOpen(m_in);”上设置断点，您将能够看到这一点 看看那一行执行后会发生什么。希望这能回答你的问题。

# c# - C# 密码系统 .NET API 接口与 C

> ID：11459454
> 
> 赞同：0
> 
> 时间：2012-07-12T19:43:54.543
> 
> 标签：c#, c, cryptography, cryptoapi

我正在寻找用 C 代码实现 C# Cryptosystem .NET api，所以我想知道最好的路线是什么？

我目前已经开始查看下面的这个链接。

[http://libtom.org/?page=features&whatfile=crypt](http://libtom.org/?page=features&whatfile=crypt)

我想知道是否可以使用我自己的公钥和私钥来解码（在 C 中）已经加密的数据（在 C# 中完成）与这个库？

有人对这种程序的过去经验有什么建议吗？

# java - jsp编码不能正确显示字符

> ID：11459456
> 
> 赞同：2
> 
> 时间：2012-07-12T19:44:08.067
> 
> 标签：java, jsp, utf-8, character-encoding

尝试在 .jsp 上显示以下字母**š**（它是立陶宛语，根据[http://docs.oracle.com/cd/E17904_01/bi.1111/b32121/pbr_nls003.htm受 UTF-8 支持）。](http://docs.oracle.com/cd/E17904_01/bi.1111/b32121/pbr_nls003.htm)在编辑模式下尝试保存包含字母的文本时 Eclipse 抱怨：

![在此处输入图像描述](../Images/976ed9d0e9caeee6683b3af5649faeaa.png)

如果按照建议将其保存为 UTF-8，则投诉停止，但我得到的不是**š ：**

![显然**š**不是](../Images/8dc9e5dd157c2b29de4f15d87a6f15e7.png)

当前配置：

资源 => 显式设置为其他：UTF-8

首选项 => Web => ISO 10646/UNICODE UTF-8

加载文件 => 用户工作区编码：是

字母的外观（示例）：[http ://en.wiktionary.org/wiki/lietuvi%C5%A1kai](http://en.wiktionary.org/wiki/lietuvi%C5%A1kai)

我完全一无所知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:31:35.577

我的错，忘了补充：

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%> 
```

在 .jsp 文件的顶部。希望对任何人都有帮助。

# android - Android中的简单乘法应用程序

> ID：11459458
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:44:15.390
> 
> 标签：android, multiplication

所以像许多其他人一样，我是 android 新手。我到处寻找有关如何执行此操作的解释，但没有找到。这是我试图制作的应用程序。 [http://i.stack.imgur.com/JGhJP.png](http://i.stack.imgur.com/JGhJP.png)

我假设我必须从前两个编辑文本中获取输入并将它们放入字符串中，然后将它们相乘并将答案设置为等于底部编辑文本？我只是对如何正确地做到这一点感到困惑。这是我到目前为止所尝试的。

```
 package com.wattzen.testcalculation;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.EditText;
import android.support.v4.app.NavUtils;

public class Main extends Activity {

private static final String total_Made = "total_Made";

private double tmmade;
private int hedittext;
private int etmade;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (savedInstanceState == null) {
        tmmade = 0.0;

    } else {
        tmmade = savedInstanceState.getDouble(total_Made);
    }
}
    {

{
    hedittext = (EditText) findViewById(R.id.ethours);
    etmade = (EditText) findViewById(R.id.etmade);
    etmade.addTextChangedListener(etmadeWatcher);}

}

private void updateStandard() {
    double tmmade = hedittext * etmade;
    tmmade.addTextChangedListener(tmmadeWatcher);
    double toTal= tmmade;
}

} 
```

这是xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hours Worked" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/ethours"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" >

            <requestFocus />
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:text="Amount made per hour" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/etmade"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/bcalculate"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Calculate" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Total Money Made" />

    </TableRow>

    <EditText
        android:id="@+id/tmmade"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:ems="10"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:inputType="number" />

</TableLayout> 
```

我非常感谢你们能给我的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:56:56.387

您应该会收到大量语法错误，这些错误应该会提示您需要更改的行。

由于 hedittext 和 etmade 是整数，因此不能像在 onCreate() 中那样将它们设置为等于 EditText。

首先，您需要获取 EditTexts 的实际内容。您可以通过调用编辑文本的[getText()](http://developer.android.com/reference/android/widget/EditText.html#getText%28%29)方法来做到这一点。然后需要将 getText 的结果解析为整数。您可以使用 Integer 包装器类的[parseInt()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)方法来执行此操作。

它应该看起来更像这样：

```
EditText editTextA = (EditText) findViewById(R.id.ethours);
int hours = Integer.parseInt(editTextA.getText().toString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:01:14.377

您的第一步是为计算按钮分配一个 onClick 侦听器。完成此操作后，请在 onCreate 中引用这两个 editText。之后，您可以使用**getText()**函数从编辑文本中获取文本。

这是代码的基本模型。我建议先检查输入是否有效，然后相乘

```
Button bcalculate = (Button)findViewById(R.id.bcalculate);
EditText hedittext   = (EditText)findViewById(R.id.ethours);
EditText etmade   = (EditText)findViewById(R.id.etmade);
EditText tmmade   = (EditText)findViewById(R.id.edittext3);

bcalculate.setOnClickListener(
    new View.OnClickListener()
    {
        public void onClick(View view)
        {
           try{ 
            double e1 = Double.parseDouble(hedittext.getText().toString());
            double e2 = Double.parseDouble(etmade.getText().toString());
            tmmade.setText(e1*e2);
            } catch (NumberFormatException e) {
        }

    }); 
```

# svg - FakeSmile 与 IE9

> ID：11459460
> 
> 赞同：3
> 
> 时间：2012-07-12T19:44:17.770
> 
> 标签：svg, internet-explorer-9, smil, fakesmile

我正在尝试使用[FakeSmile在 IE9 中伪造 SMIL 支持](http://fakesmil.blogspot.co.il/)

我正在动态创建 SVG 元素，添加一个带有动画元素的矩形元素并调用 beginElement()。IE9 给我一个错误：对象不支持属性或方法 'beginElement'

静态 SVG 作品：http: [//jsfiddle.net/FG3PG/1/](http://jsfiddle.net/FG3PG/1/)

如何使用 FakeSmile 修复它？以下显示了我正在尝试做的事情：http: [//jsfiddle.net/DgMDV/13/](http://jsfiddle.net/DgMDV/13/)

这是相同的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <script type="text/javascript" src="http://bazaar.launchpad.net/~smilteam/smil/MAIN/download/head:/smil.user.js-20080305202719-59ane0zgfr5f3vz8-1/smil.user.js"></script>
</head>
<body>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" height="200">
   <rect class="drag resize" x="10" y="10" width="100" height="50" fill="#c66" />
</svg>
<script type="text/javascript">
    var svg   = document.getElementsByTagName('svg')[0];
    var svgNS = svg.getAttribute('xmlns');
    var rect = document.getElementsByTagName('rect')[0];

    var animation = document.createElementNS(
        "http://www.w3.org/2000/svg", "animate");
    animation.setAttributeNS(null, 'attributeName', 'x');
    animation.setAttributeNS(null, 'dur', 0.5);
    animation.setAttributeNS(null, 'begin', 'indefinite');
    animation.setAttributeNS(null, 'fill', 'freeze');
    animation.setAttributeNS(null, 'to', 100);
    rect.appendChild(animation);
    animation.beginElement();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T01:49:31.103

Fenring (leunen-d) anwered fakesmil 不支持动态动画，可以添加以下功能： [https ://answers.launchpad.net/smil/+question/203333](https://answers.launchpad.net/smil/+question/203333)

```
function registerAnimation(anim) {
    var targets = getTargets(anim);
    var elAnimators = new Array();
    for(var i=0; i<targets.length ;i++) {
      var target = targets[i];
      var animator = new Animator(anim, target, i);
      animators.push(animator);
      elAnimators[i] = animator;
    }
    anim.animators = elAnimators;
    var id = anim.getAttribute("id");
    if (id)
      id2anim[id] = anim;
    for(var i=0; i<elAnimators.length ;i++)
      elAnimators[i].register();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:02:34.250

看来您设置的属性不正确：

```
animation.setAttributeNS(null, 'begin', 'indefinite'); 
```

更改属性名称以匹配值：

```
animation.setAttributeNS(null, 'repeatCount', 'indefinite'); 
```

# rest - 无法以编程方式创建实时平滑流发布点

> ID：11459462
> 
> 赞同：0
> 
> 时间：2012-07-12T19:44:22.853
> 
> 标签：rest, iis, live, smooth-streaming

我正在尝试使用 IIS 媒体服务的[REST API](http://msdn.microsoft.com/en-us/library/hh206008%28v=vs.90%29.aspx)以编程方式创建实时发布点。为此，我向该 URL 发送 POST 调用：

```
http://127.0.0.1/services/smoothstreaming/publishingpoints.isml/settings 
```

我在请求中包含了两个自定义标头：

```
Content-Type: application/atom+xml
Slug: /test.isml 
```

这是请求的正文：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
  <entry xmlns="http://www.w3.org/2005/Atom">
    <id>http://127.0.0.1/test.isml/settings</id>
    <title>Test</title>
    <updated>2012-07-12T19:13:25Z</updated>
    <content type="application/xml">
      <SmoothStreaming xmlns="http://schemas.microsoft.com/iis/media/2011/03/streaming/management">
        <Settings>
          <Title>Test</Title>
          <SourceType>Push</SourceType>
          <AutoStart>false</AutoStart>
          <AutoRestartOnEncoderReconnect>false</AutoRestartOnEncoderReconnect>
          <LookAheadChunks>2</LookAheadChunks>
          <Archive enabled="false">
            <Path useEventIdOnPath="false" />
          </Archive>
          <ClientConnections enabled="true">
            <ClientManifestVersion>2.0</ClientManifestVersion>
          </ClientConnections>
          <ServerConnections enabled="false">
            <SendEndOfStreamOnStop>false</SendEndOfStreamOnStop>
          </ServerConnections>
        </Settings>
      </SmoothStreaming>
    </content>
  </entry> 
```

IIS 给我这个正文的 405/Bad Request 错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<SmoothStreaming xmlns="http://schemas.microsoft.com/iis/media/2011/03/streaming/management">
  <Error>
    <ErrorCode>0x80880026</ErrorCode>
    <ErrorMessage>The resource contains one or more elements that contain invalid data. For information about valid resource representations, please see the documentation for the supported schemas.</ErrorMessage>
  </Error>
</SmoothStreaming> 
```

任何人都知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:31:48.303

省略“存档”和“服务器连接”节点修复它。不确定它们有什么问题，或者它们是否应该只在启用 = true 时才包含在内。

# database - .NET Entity Framework Code First Migrations - 数据库连接错误

> ID：11459463
> 
> 赞同：1
> 
> 时间：2012-07-12T19:44:28.687
> 
> 标签：database, connection, migration, entity

我正在构建一个应该有 N 个 DataContexts 的项目。我有一个 Web 应用程序，它将在 App-Start (Global.asax) 中执行以下步骤：

1 - 如果数据库不存在，则创建。2 - 将数据库更新到最新的迁移。

当我第一次运行应用程序时（数据库尚未创建），我得到一个执行“无法打开登录请求的数据库“DBName”。登录失败。用户“sa”登录失败。”

好的，所以此时我检查数据库并创建它，但 __Migrations 表不存在。

如果我停止应用程序并再次运行它，则不会引发异常并且数据库已成功更新。

我尝试在我的连接字符串中设置持久安全信息，但没有任何变化。

我的代码如下： Global.asax

```
 void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
       Bll.AppStart.Databases.Start();  

    } 
```

打电话..

```
namespace BusinessLogicLayer.AppStart
{
/// <summary>
/// Inicialização e Update de versão dos bancos de dados do sistema
/// </summary>
public static class Databases
{
    public static void Start()
    {
        //Iniciar DBCore
        DataBaseStart<DataAccessLayer.DataContexts.Core.Context,
            DataAccessLayer.Migrations.Core.Configuration>();
    }

    #region Inicializar bancos de dados

    private static void DataBaseStart<T, TC>()
        where T : DbContext, new()
        where TC : DbMigrationsConfiguration<T>, new()
    {

        //Atualiza a base de dados com base na configuração do migrations
        try
        {

            var migratorConfig = new TC();
            var dbMigrator = new DbMigrator(migratorConfig);
            dbMigrator.Configuration.AutomaticMigrationDataLossAllowed = false;
            dbMigrator.Update();

        }
        catch (Exception)
        {
            //Exceção quando cria o banco a primeira vez?

            throw new Exception("Banco de dados criado pela primeira vez. Reinicie a aplicação.");

        }

    }

    #endregion
} 
```

}

我的 Context 类..注意它定义了一个空数据库

```
 public class Context : DbContext
 {

    public Context()
    {
        Database.Connection.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["PODBCore"].ConnectionString;

    }
    public Context(string connectionString)
    {
        Database.Connection.ConnectionString = connectionString;

    }

} 
```

我的迁移配置类

```
public sealed class Configuration : DbMigrationsConfiguration<DataContexts.Core.Context>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
        AutomaticMigrationDataLossAllowed = false;
    }

    protected override void Seed(DataContexts.Core.Context context)
    {
        //  This method will be called after migrating to the latest version.

    }
} 
```

我有一个定义空模型的初始迁移

```
public partial class Initial : DbMigration
{
    public override void Up()
    {
    }

    public override void Down()
    {
    }
} 
```

请记住，如果我运行该应用程序两次，则成功创建和更新数据库（我确实使用其他迁移进行了测试，创建表和东西）。仅在应用程序第一次运行时抛出异常，并且数据库不存在。

我还尝试在运行迁移更新代码之前调用 Database.SetInitializer 和 context.CreateIfNotExist()。

编辑：

我检查了 SQL Server 日志，基本上应用程序正在尝试连接到连接字符串中指定的初始目录，但它不存在。抛出异常后，数据库已创建并在线。

编辑：

如果我删除 Initial Catalog 属性，它将起作用，但是我将让我的所有 dataContexts 在主数据库中创建表。

我们可以有 N 个服务器实例，并且在上下文之间仍然存在某种分离，但我仍然试图在同一个 SQL 实例中按上下文获取一个目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:03:13.930

好的，所以我找到了解决方案。它不是最好的编码，但它现在可以工作。

我必须做的是

1.  在我的项目中创建一个新的 WCF 服务层。
2.  将“创建和更新”数据库工作移至服务类。
3.  在业务逻辑层，消费服务。
4.  如果 service.DoWork() 方法失败，再试一次（正如我之前所说，它第二次工作）

这是 BLL 消费服务中的代码

```
using BusinessLogicLayer.WcfServicesLayer.AppStart.Databases;

namespace BusinessLogicLayer.AppStart
{
   /// <summary>
   /// Inicialização e Update de versão dos bancos de dados do sistema
   /// </summary>
   public static class Databases
   {
    public static void Start()
    {
        //Iniciar DBCore
        var client = new DatabasesClient();
        bool databaseStarted = client.DoWork();
        if(!databaseStarted)
        {
            var retry = new DatabasesClient();
            databaseStarted = retry.DoWork();
        }

    }

   }
   } 
```

这里是服务类。

```
using System;
using System.Data.Entity;
using System.Data.Entity.Migrations;
namespace WcfServicesLayer.AppStart
{
// Serviço de inicialização dos bancos de dados da aplicação
public class Databases : IDatabases
{
    public bool DoWork()
    {
        return StartDatabases();
    }

    private bool StartDatabases()
    {

        //Iniciar DBCore
        return DataBaseStart<DataAccessLayer.DataContexts.Core.Context,
            DataAccessLayer.Migrations.Core.Configuration>();

    }

    private bool DataBaseStart<T, TC>()
        where T : DbContext, new()
        where TC : DbMigrationsConfiguration<T>, new()
    {

        //Atualiza a base de dados com base na configuração do migrations
        try
        {
            var migratorConfig = new TC();
            var dbMigrator = new DbMigrator(migratorConfig);
            dbMigrator.Configuration.AutomaticMigrationDataLossAllowed = false;

            dbMigrator.Update();
            return true;
        }
        catch (Exception)
        {
            //Exceção quando cria o banco a primeira vez?
            return false;

        }

    }
}
} 
```

# php - 简单的 PHP 帮助（不插入数组）

> ID：11459465
> 
> 赞同：1
> 
> 时间：2012-07-12T19:44:38.487
> 
> 标签：php, arrays, forms, insert

我已经搜索和搜索，但没有找到任何东西，尽管这可能是因为我什至不知道是什么导致了这个错误，更不用说如何修复它了。

首先，我有点新。我知道 PHP 的基础知识，但还有很多我不知道，所以如果这个问题的答案很简单（或者如果你看不懂我的代码，因为它太乱了！），请原谅。

我想作为我的第一个应用程序之一，我会制作一个简单的电子邮件脚本，用户可以在其中输入他们的姓名、主题、消息和电子邮件地址。

这是表单页面的相关位：http: [//pastebin.com/UhQukUuB](http://pastebin.com/UhQukUuB)（对不起，不太清楚如何嵌入代码......）。

```
<form action="send.php" method="post">
    Name: <input type="text" name="name" size="20" /><br />
    Subject: <input type="text" name="subject" size="20" /><br />
    Message:<br /><textarea name="message" rows="12" cols="55"></textarea><br />
    Your email address: <input type="text" name="emailAddress" size="20" /><br />
    <input type="submit" value="Send" />
</form> 
```

这是在 send.php 中：http: [//pastebin.com/nky0L1dT](http://pastebin.com/nky0L1dT)。

```
<?php
    $name=$_POST['name'];
    $subject=$_POST['subject'];
    $message=$_POST['message'];
    $emailAddress=$_POST['emailAddress'];
    //It's receiving the variables correctly, I've checked by printing the variables.
    $errors=array(); //Creates empty array with 0 indexes. This will now be filled with error messages (if there are any errors).
    if($name=="" || $subject=="" || $message=="" || $emailAddress=""){
        if($name==""){
            $errors[0]="You did not supply a name.";
        }
        if($subject==""){
            $errors[count($errors)]="You did not supply a subject."; //I'm using count($errors) so it will create a new index at the end of the array, regardless of how many indexes it currently has (if that makes sense, it's hard to explain)
        }
        if($message==""){
            $errors[count($errors)]="You did not supply a message.";
        }
        if($emailAddress==""){
            $errors[count($errors)]="You did not supply an email address.";
        }
    }
    //Were there any errors?
    if(!count($errors)==0){
        print "The following errors were found:<br />";
        for($i=0; $i<count($errors); $i++){
            print $errors[$i]."<br />";
        }
        die ();
    }
    //Rest of email script, which I'll write when the stupid bug is fixed. :(
?> 
```

以下是发生的情况：当您错过名称、主题或消息时，错误检测器工作正常并显示“您没有提供名称/主题/消息”。当您错过电子邮件地址时，什么也不会发生。我知道它被存储在数组中并且被正确接收，因为如果您错过了名称/主题/消息和电子邮件地址，它会显示“您没有提供名称/主题/消息。您没有提供电子邮件地址”。我盯着屏幕看了半个小时，只是想弄清楚它为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:50:01.857

有两个问题，其中一个是你的否定：

```
if(!count($errors)==0){ 
```

一元`!`适用于`count($errors)`，不适用于`count($errors)==0`。改用`!=`：

```
if(count($errors) != 0) { 
```

第二个错误是这里使用了赋值 ( `=`) 而不是比较 ( `==`)：

```
if($name=="" || $subject=="" || $message=="" || $emailAddress=""){ 
```

作为旁注，您不需要使用`$errors[count($errors)]`将项目添加到数组的末尾。`$errors[]`会做。对于迭代，使用`foreach`循环也比您当前正在做的要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:48:40.057

改变

```
if($name=="" || $subject=="" || $message=="" || $emailAddress=""){ 
```

至

```
if($name=="" || $subject=="" || $message=="" || $emailAddress==""){ 
```

您无意中在语句中设置`$emailAddress`为`""``if`

```
... || $emailAddress=""){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:49:09.527

在您的 if 语句中，您使用的是赋值，而不是比较

```
if($name=="" || $subject=="" || $message=="" || $emailAddress=""){ 
```

代替

```
if($name=="" || $subject=="" || $message=="" || $emailAddress==""){ 
```

# ms-access - VBA 在循环期间隐藏动作

> ID：11459469
> 
> 赞同：1
> 
> 时间：2012-07-12T19:44:56.623
> 
> 标签：ms-access, vba

这是一个愚蠢的问题，但我想遍历表单上的控件列表并更改它们的值。当我这样做时，它实际上显示了所有控件的变化。这为我的执行增加了很多时间。有没有办法关闭这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:47:18.920

这表明您正在使用未绑定的表单。也许您应该考虑更改为绑定表单并更新记录以更改值。

您还可以隐藏表单，仅在更改完成时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T19:55:14.877

您可以使用 Application.Echo 方法：

```
Application.Echo False
'Do something
Application.Echo True 
```

只是不要忘记将 Application.Echo True 添加到您的错误处理程序中。

# bash - 以数组形式获取开放端口

> ID：11459470
> 
> 赞同：4
> 
> 时间：2012-07-12T19:44:58.247
> 
> 标签：bash, sed, awk, grep, netstat

所以，我`netstat -lt`用来获取开放端口。但是，我对某些值（如 SSH 或 22）不感兴趣，因此我希望能够排除它们。我还想将它们作为 bash 中的数组。到目前为止，我有`netstat -lt | sed -r 's/tcp[^:]+://g' | cut -d' ' -f1`，但它们不是一个数组，我也不排除任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:13:43.430

尝试使用`ss`替换`netstat`.

```
ss -atu | awk '{print $5}' | awk -F: '{print $NF}' 
```

该`ss`命令为您提供本地计算机上的所有 TCP 和 UDP 端口（唯一具有端口的套接字）。第一个 awk 提取包含本地地址和端口号的列。第二个`awk`只取冒号后面的最后一个字段；如果您的机器上有 IPv6 套接字，这是必要的，其 IP 地址也将包含冒号。

完成此操作后，您可以`grep`删除不需要的端口。`ss`此外，有关过滤器的信息，请参阅手册页引用的文档，这可以让您从`ss`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:56:27.197

`($())`在您的声明周围添加：

```
port=($(netstat -ltn | sed -rne '/^tcp/{/:(22|25)\>/d;s/.*:([0-9]+)\>.*/\1/p}')) 
```

过滤端口 22 和 25。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:06:28.423

```
a=( `netstat -ltn --inet | sed -r -e '1,2d''s/tcp[^:]+://g' | cut -d' ' -f1 | sed -e '1,2d' | grep -v "22\|33\|25"` ) 
```

如果您的 netstat 版本打印了这样的标题，则第二个 sed 命令会删除标题。我将“Active”和“Proto”作为前两行。使用 grep 过滤不需要的端口。将 -n 添加到 netstat 以查看端口号而不是名称。--inet 是强制使用 ipv4，否则您可能会看到 IPv6，这可能会混淆您的脚本。

顺便说一句，不确定你需要一个数组。通常只有当您要处理您拥有的值的子集时才需要数组。如果您处理所有值，则会有更简单的构造，但不确定您要做什么。

问候。

更新：您可以使用带有两个操作的单个 sed 命令，而不是两个单独的调用：

```
sed -r -e '1,2d' -e 's/tcp[^:]+://g' 
```

# c++ - 重写不共享通用接口的基类的虚函数

> ID：11459473
> 
> 赞同：13
> 
> 时间：2012-07-12T19:45:12.537
> 
> 标签：c++, overriding, virtual, multiple-inheritance

```
#include <iostream>
struct B1
{
    virtual void method()=0;
    virtual ~B1(){}
};

struct B2
{
    virtual void method()=0;
    virtual ~B2(){}
};

struct D: B1, B2
{
    virtual void method()
    {
        std::cout << "D::method\n";
    };
};

int main(int argc,char *argv[])
{
    D d;
    B1 &b1=d;
    B2 &b2=d;
    b1.method();
    b2.method();
    return 0;
} 
```

注意，B1 和 B2 不共享公共接口。

这合法吗？如果是 - 在哪个标准中？C++98/03/11 ？

msvc 和 gcc 都编译好了。

以前我认为，我必须为这种情况使用一些通用接口（可能的虚拟继承）。

这种情况有什么特别的名称吗？

请问具体是怎么操作的？也许一些ISO参考？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:41:42.583

您的代码格式正确： `void D::method()`同时覆盖`void B1::method()`和`void B2::method()`。

规范声明（C++11 §10.3/2）：

> 如果在一个类和一个类`vf`中声明了一个虚成员函数，直接或间接地派生自一个与被声明，然后也是虚拟的（无论它是否被声明）并且它覆盖.`Base``Derived``Base``vf``Base::vf``Derived::vf``Base::vf`

`B1`声明一个虚拟成员函数`void B1::method()`。类`D`派生自`B1`并且它还声明了一个具有相同名称 ( `method`)、相同参数列表（无参数）、相同 cv-qualification（无限定）和相同 ref-qualifier（无限定）的成员函数。

因此，`void D::method()`覆盖`void B1::method()`.

同样的逻辑适用于`void B2::method()`（只是在上面的`B2`解释中替换`B1`），所以`void D::method()`覆盖了`void B1::method()`and `void B2::method()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:07:33.207

afaik 这在每个标准中都是合法的。我不确定它是否有自己的特殊名称，但它类似于[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)。

如果您在 D 中覆盖“virtual void method()”，那么您将同时覆盖 B1 和 B2 中的方法。

**编辑：**

回答为什么你没有“D: B1::method 和 B2::method 中有两个不同的独立继承虚函数”：

重写方法时，只能指定函数名、返回类型和参数，但不能添加关于从哪个方法继承的签名细节。

想象一下它是可能的，那么它可能看起来像这样：

```
struct D: B1, B2
{
    virtual void B1::method()
    {
        std::cout << "D::method\n";
    };
    virtual void B2::method()
    {
        std::cout << "D::method\n";
    };
}; 
```

**但是**看到这里，你已经可以说不可能有这样的东西了，因为当调用

```
objectD.method() 
```

你不能指定你打电话给哪一个。所以即使有办法重载两者，仍然存在函数调用上的区分问题。

**编辑：** “不能指定你打电话给哪一个。” 指的是，您无法指定是要调用 B2::method 的 D 类重载还是 B2 方法本身。objectD.B2::method 将始终调用 B2（未重载）方法（在这种情况下不会编译，因为 B2 没有实现）

# git - 在 Heroku 上创建 Node.js 应用程序时，我应该将文件夹“node_modules”签入 Git 吗？

> ID：11459475
> 
> 赞同：394
> 
> 时间：2012-07-12T19:45:23.497
> 
> 标签：git, node.js, heroku, npm, gitignore

我在这里遵循了 Heroku 上 Node.js 的基本*入门*说明：

[https://devcenter.heroku.com/categories/nodejs](https://devcenter.heroku.com/categories/nodejs)

这些指令没有告诉您创建 .gitignore node_modules，因此暗示应该将文件夹*node_modules*签入到 Git。当我在 Git 存储库中包含*node_modules*时，我的入门应用程序运行正常。

当我在以下位置遵循更高级的示例时：

*   *[使用 Node.js、Ruby、MongoDB 和 Socket.IO 构建实时的多语言应用程序](https://devcenter.heroku.com/articles/realtime-polyglot-app-node-ruby-mongodb-socketio)*
*   [https://github.com/mongolab/tractorpush-server](https://github.com/mongolab/tractorpush-server) （来源）

它指示我将文件夹*node_modules*添加到文件*.gitignore*。所以我从 Git 中删除*了 node_modules*文件夹，将其添加到文件*.gitignore*中，然后重新部署。这次部署失败，如下所示：

```
-----> Heroku receiving push
-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.8.2
       Using npm version: 1.0.106
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       Error: npm doesn't work with node v0.8.2
       Required: node@0.4 || 0.5 || 0.6
           at /tmp/node-npm-5iGk/bin/npm-cli.js:57:23
           at Object.<anonymous> (/tmp/node-npm-5iGk/bin/npm-cli.js:77:3)
           at Module._compile (module.js:449:26)
           at Object.Module._extensions..js (module.js:467:10)
           at Module.load (module.js:356:32)
           at Function.Module._load (module.js:312:12)
           at Module.require (module.js:362:17)
           at require (module.js:378:17)
           at Object.<anonymous> (/tmp/node-npm-5iGk/cli.js:2:1)
           at Module._compile (module.js:449:26)
       Error: npm doesn't work with node v0.8.2
       Required: node@0.4 || 0.5 || 0.6
           at /tmp/node-npm-5iGk/bin/npm-cli.js:57:23
           at Object.<anonymous> (/tmp/node-npm-5iGk/bin/npm-cli.js:77:3)
           at Module._compile (module.js:449:26)
           at Object.Module._extensions..js (module.js:467:10)
           at Module.load (module.js:356:32)
           at Function.Module._load (module.js:312:12)
           at Module.require (module.js:362:17)
           at require (module.js:378:17)
           at Object.<anonymous> (/tmp/node-npm-5iGk/cli.js:2:1)
           at Module._compile (module.js:449:26)
       Dependencies installed
-----> Discovering process types
       Procfile declares types -> mongod, redis, web
-----> Compiled slug size is 5.0MB
-----> Launching... done, v9 
```

运行“heroku ps”确认崩溃。好的，没问题，所以我回滚了更改，将文件夹*node_module*添加回 Git 存储库并将其从文件*.gitignore*中删除。但是，即使在还原后，我仍然在部署时收到相同的错误消息，但现在应用程序再次正常运行。运行“heroku ps”告诉我应用程序正在运行。

这样做的正确方法是什么？是否包含文件夹*node_modules*？为什么回滚时仍然会收到错误消息？我的猜测是 Git 存储库在 Heroku 方面的状态不佳。

* * *

## 回答 #1

> 赞同：404
> 
> 时间：2013-10-17T00:46:38.657

## 第二次更新

常见问题解答不再可用。

从以下文档[`shrinkwrap`](https://docs.npmjs.com/cli/shrinkwrap)：

> 如果您希望锁定包中包含的特定字节，例如对能够重现部署或构建有 100% 的信心，那么您应该将您的依赖项检查到源代码控制中，或者采用其他一些可以验证的机制内容而不是版本。

香农和史蒂文之前提到过这一点，但我认为这应该是公认答案的一部分。

* * *

## 更新

以下建议列出的来源[已更新](https://docs.npmjs.com/misc/faq#should-i-check-my-node-modules-folder-into-git)。他们不再建议提交该`node_modules`文件夹。

> 通常，没有。允许 npm 为您的包解析依赖项。
> 
> 对于您部署的包，例如网站和应用程序，您应该使用 npm shrinkwrap 锁定您的完整依赖关系树：
> 
> [https://docs.npmjs.com/cli/shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap)

* * *

## 原帖

作为参考，npm FAQ 清楚地回答了您的问题：

> 将 node_modules 检入 git 以获取您部署的内容，例如网站和应用程序。不要将 node_modules 签入 git 以获取打算重用的库和模块。使用 npm 管理开发环境中的依赖项，而不是部署脚本中的依赖项。

并为此提供一些很好的理由，请阅读[Mikeal Rogers 的帖子](https://web.archive.org/web/20150116024411/http://www.futurealoof.com/posts/nodemodules-in-git.html)。

* * *

来源：[https ://docs.npmjs.com/misc/faq#should-i-check-my-node-modules-folder-into-git](https://docs.npmjs.com/misc/faq#should-i-check-my-node-modules-folder-into-git)

* * *

## 回答 #2

> 赞同：169
> 
> 时间：2013-02-13T11:50:36.277

*对于不将*文件夹*node_modules 检*入 Git，我最大的担忧是 10 年后，当您的生产应用程序仍在使用时，npm 可能不存在了。或者 npm 可能会损坏；或者维护人员可能决定从他们的存储库中删除您依赖的库；或者您使用的版本可能会被删减。

这可以通过[Maven](https://en.wikipedia.org/wiki/Apache_Maven)等存储库管理器来缓解，因为您始终可以使用自己的本地[Nexus](https://en.wikipedia.org/wiki/Nexus#Other_computing_uses) (Sonatype) 或[Artifactory](https://jfrog.com/artifactory/)来维护您使用的包的镜像。据我了解，npm 不存在这样的系统。[Bower](https://bower.io/)和[Jam.js](https://github.com/caolan/jam)等客户端库管理器也是如此。

如果您已将文件提交到自己的 Git 存储库，那么您可以随时更新它们，并且您可以轻松地进行可重复构建，并且知道您的应用程序不会因为某些第三方操作而中断。

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2012-07-12T20:42:32.383

您不应该在*.gitignore文件中**包含*文件夹*node_modules*（或者[您](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)[*应该*](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)在部署到 Heroku[的源代码中包含](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)[文件夹](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)[*node_modules ）。*](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)*[](https://devcenter.heroku.com/articles/getting-started-with-nodejs#package-json)*

 ***如果文件夹*node_modules*：

*   **存在**然后`npm install`将使用那些供应商的库，并将重建任何二进制依赖项`npm rebuild`。
*   **不存在**则`npm install`必须自己获取所有依赖项，这会增加 slug 编译步骤的时间。

[有关这些确切步骤](https://github.com/heroku/heroku-buildpack-nodejs/blob/master/bin/compile#L171)，请参阅 Node.js buildpack 源代码。

但是，最初的错误看起来是[npm](https://en.wikipedia.org/wiki/Npm_(software))和 Node.js版本之间的不兼容。始终根据[本指南明确设置](https://devcenter.heroku.com/articles/nodejs-versions)*packages.json*`engines`文件的部分是一个好主意，以避免这些类型的情况：

 *```
{
  "name": "myapp",
  "version": "0.0.1",
  "engines": {
    "node": "0.8.x",
    "npm":  "1.1.x"
  }
} 
```

这将确保[开发/生产平价](http://www.12factor.net/dev-prod-parity)，并减少未来发生此类情况的可能性。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-09-05T22:03:32.187

在发表此评论后，我打算离开：*[在 Heroku 上创建 Node.js 应用程序时，我应该将文件夹“node_modules”签入 Git 吗？](https://stackoverflow.com/questions/11459475/should-i-check-in-node-modules-to-git-when-creating-a-node-js-app-on-heroku#comment38119517_19416403)*

但是 Stack Overflow 的格式很奇怪。

如果您没有相同的机器并且正在检查 node_modules，请在本机扩展上执行 .gitignore。我们的 .gitignore 看起来像：

```
# Ignore native extensions in the node_modules folder (things changed by npm rebuild)
node_modules/**/*.node
node_modules/**/*.o
node_modules/**/*.a
node_modules/**/*.mk
node_modules/**/*.gypi
node_modules/**/*.target
node_modules/**/.deps/
node_modules/**/build/Makefile
node_modules/**/**/build/Makefile 
```

通过首先检查所有内容进行测试，然后让另一个开发人员执行以下操作：

```
rm -rf node_modules
git checkout -- node_modules
npm rebuild
git status 
```

确保没有文件更改。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-04-29T09:47:22.650

我认为不`npm install`应该在生产环境中运行。有几件事可能会出错 - npm 中断，下载较新的依赖项（[shrinkwrap](https://docs.npmjs.com/cli/v6/commands/npm-shrinkwrap/)似乎已经解决了这个问题）是其中两个。

另一方面，不应将文件夹*node_modules提交给 Git。*除了它们的大尺寸之外，包括它们在内的提交可能会分散注意力。

最好的解决方案是：`npm install`应该在类似于生产环境的[CI环境中运行。](https://en.wikipedia.org/wiki/Continuous_integration)所有测试都将运行，并且将创建一个包含所有依赖项的压缩发布文件。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-04-19T13:51:05.277

我一直在使用提交*node_modules*文件夹和收缩包装。两种解决方案都没有让我高兴。

简而言之：一个提交的*node_modules*文件夹给存储库增加了太多的噪音。而且*shrinkwrap.json*不容易管理，并且不能保证一些收缩包装的项目将在几年内构建。

我发现 Mozilla 正在为他们的一个项目使用单独的存储库：[https ://github.com/mozilla-b2g/gaia-node-modules](https://github.com/mozilla-b2g/gaia-node-modules)

所以没多久我就在 Node.js CLI 工具中实现了这个想法：[https ://github.com/bestander/npm-git-lock](https://github.com/bestander/npm-git-lock)

在每次构建之前，添加：

```
npm-git-lock --repo [git@bitbucket.org:your/dedicated/node_modules/git/repository.git] 
```

它将计算您的*package.json*文件的哈希值，并从远程存储库中检出文件夹*node_modules*内容，或者，如果这是此*package.json*文件的第一次构建，将执行清理`npm install`并将结果推送到远程存储库。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-07-13T14:12:13.410

将 npm 版本显式添加到文件*package.json* ("npm": "1.1.x") 并且*不*将文件夹*node_modules 签*入 Git 对我有用。

部署可能会更慢（因为它每次都下载包），但我无法在签入时编译包。Heroku 正在寻找只存在于我的本地机器上的文件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-12T19:56:12.993

不要签入文件夹*node_modules*，而是为您的应用程序创建一个*package.json*文件。

*package.json 文件*指定应用程序的依赖项。Heroku 然后可以告诉 npm 安装所有这些依赖项。您链接到的教程包含有关*package.json*文件的部分。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-02-10T09:15:23.407

来自*[Git 中的“node_modules”](https://web.archive.org/web/20150212165006/http://www.futurealoof.com/posts/nodemodules-in-git.html)*：

> 回顾一下。
> 
> *   仅为您部署的应用程序签入 node_modules，而不是您维护的可重用包。
> *   任何编译的依赖项都应该签入它们的源，而不是编译目标，并且应该在部署时 $ npm rebuild。

我最喜欢的部分：

> 所有在你的 gitignore 中添加 node_modules 的人，**删除那个狗屎，今天**，它是一个我们都乐于留下的时代的产物。全局模块的时代已经结束。

[（原来的链接是[这个](http://www.futurealoof.com/posts/nodemodules-in-git.html)，但现在已经死了。感谢@Flavio指出它。）*]

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-08-27T21:24:24.903

我正在使用这个解决方案：

1.  创建一个包含文件夹*node_modules*的单独存储库。如果您有应为特定平台构建的本机模块，则为每个平台创建一个单独的存储库。

2.  将这些存储库附加到您的项目存储库`git submodule`：

    `git submodule add .../your_project_node_modules_windows.git node_modules_windows`

    `git submodule add .../your_project_node_modules_linux_x86_64 node_modules_linux_x86_64`

3.  创建从平台特定`node_modules`到`node_modules`目录的链接并添加`node_modules`到`.gitignore`.

4.  运行`npm install`。

5.  提交子模块存储库更改。

6.  提交您的项目存储库更改。

因此，您可以轻松地在不同平台之间切换`node_modules`（例如，如果您在 OS X 上开发并部署到 Linux）。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-01-01T14:23:25.943

**场景一：**

一种情况：

您使用从 npm 中删除的包。如果您在 node_modules 文件夹中拥有所有模块，那么这对您来说不是问题。如果你在 package.json 中只有包名，你就不能再得到它了。

如果一个包的使用时间少于 24 小时，您可以轻松地将其从 npm 中删除。如果它超过 24 小时，那么您需要联系他们。

但：

> 如果您联系支持人员，他们将检查删除该版本的软件包是否会破坏任何其他安装。如果是这样，我们不会删除它。

[阅读更多](https://blog.npmjs.org/post/141905368000/changes-to-npms-unpublish-policy#_=_)

所以这种情况的可能性很低，但有第二种情况......

* * *

**场景二：**

这种情况的另一种情况：

你开发一个企业版的软件或一个非常重要的软件，并在你的 package.json 中写：

```
"dependencies": {
    "studpid-package": "~1.0.1"
} 
```

你使用`function1(x)`那个包的方法。

现在 studpid-package 的开发人员将方法重命名`function1(x)`为`function2(x)`并且他们犯了一个错误......他们将包的版本从 更改`1.0.1`为`1.1.0`。这是一个问题，因为当您`npm install`下次调用时，您将接受版本`1.1.0`，因为您使用了波浪号 ( `"studpid-package": "~1.0.1"`)。

现在调用`function1(x)`可能会导致错误和问题。

* * *

将整个 node_modules 文件夹（通常超过 100 MB）推送到您的存储库，将占用您的内存空间。与数百 MB（package.json 和 node_modules）相比，只有几 kb（仅 package.json）……想想看。

如果出现以下情况，您**可以这样做/应该考虑一下**：

*   软件非常重要。

*   当某些事情失败时，它会花费你的钱。

*   你不信任 npm 注册表。npm 是集中式的，理论上可以关闭。

在 99.9% 的情况下，您**不需要**发布 node_modules 文件夹，如果：

*   您只为自己开发软件。

*   你已经编写了一些程序，只是想在 GitHub 上发布结果，因为其他人可能会对它感兴趣。

* * *

如果您不希望 node_modules 出现在您的存储库中，只需创建一个`.gitignore`文件并添加行`node_modules`.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-07-02T20:13:08.177

如果您正在滚动您自己的特定于您的应用程序的模块，您可以：

*   将那些（*并且只有那些*）保留在应用程序的`/node_modules`文件夹中，并将所有其他依赖项移出到父`../node_modules`文件夹。这将起作用，因为 NodeJS CommonJS 模块系统如何通过向上移动到父目录等方式工作，直到到达树的根目录。见：[https ://nodejs.org/api/modules.html](https://nodejs.org/api/modules.html)

*   或者 gitignore`/node_modules/*` **除了**你的`/node_modules/your-modules`. 请参阅：[使 .gitignore 忽略除少数文件之外的所有内容](https://stackoverflow.com/questions/987142/make-gitignore-ignore-everything-except-a-few-files)

这个用例非常棒。它使您可以很好地保留您专门为您的应用程序创建的模块，并且不会与可以稍后安装的依赖项混淆。****

# flash - 如何迭代 flashvars？（Actionscript）

> ID：11459477
> 
> 赞同：0
> 
> 时间：2012-07-12T19:45:32.243
> 
> 标签：flash, actionscript

我需要使用什么结构，用于或用于？

```
var params = stage.loaderInfo.parameters;

    for (var i in params) 
    { 
       // trace(params[i]);
       // or
       // var test = params[i];
    } 
```

怎么做，得到所有的价值？

ps: params.length - 显示 flashvars 的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:31:08.453

您应该使用**for-in**或**for-each-in**循环。for-in 将遍历键，而 for-each-in 将遍历值。如果您想同时获取键和值，那么 for-in 循环可能就是您想要的。

例如，如果您的 flashVar 看起来像这样：

```
{ userId: 100, userName: 'Mister PHP' } 
```

for-in 循环看起来像这样：

```
var flashVars:Object = stage.loaderInfo.parameters;

for (var key:String in flashVars) {
    var value:String = flashVars[key] as String;
    trace(key + ' = ' + value);
}

// output:
// userId = 100;
// userName = Mister PHP 
```

虽然 for-each-in 循环看起来像：

```
var flashVars:Object = stage.loaderInfo.parameters;

for each (var value:String in flashVars) {
    trace(value);
}

// output:
// 100
// Mister PHP 
```

据我所知，没有简单的方法来获取对象或字典的长度。您必须遍历对象并在每次传递时增加一个计数器。

这是[ActionScript 中循环的参考](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fcf.html)

# facebook - 无法使用“Facebook 订阅”代码

> ID：11459479
> 
> 赞同：0
> 
> 时间：2012-07-12T19:45:44.040
> 
> 标签：facebook, subscribe

我尝试使用的代码可以从以下网址显示：[http](http://www.thebrazilianlanguage.com/test/test.htm) ://www.thebrazilianlanguage.com/test/test.htm 。我可以让 Facebook 评论小部件工作，但不能让订阅按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:48:03.640

您将订阅按钮指向 Facebook 页面。

根据[订阅按钮文档](https://developers.facebook.com/docs/reference/plugins/subscribe/)，`href`参数必须指向用户配置文件：

> href - 要订阅的用户的个人资料 URL。这必须是 facebook.com 个人资料 URL。

# c++ - CSS设置QTableView背景颜色？

> ID：11459481
> 
> 赞同：0
> 
> 时间：2012-07-12T19:45:58.653
> 
> 标签：c++, css, qt, qtableview

我想`QTableView`使用 css 设置对象中所有单元格的背景颜色。

类似于...的东西

```
ui.tableView->setStyleSheet("QTableView { background-color: red; color: yellow"); 
```

这可能吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:52:31.153

将 css 属性更改为“背景颜色”，然后您的示例看起来不错。

参考：
[http ://doc.qt.nokia.com/4.7-snapshot/stylesheet-reference.html](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T14:49:28.080

我认为以下 qss 可以解决问题：

```
QTableView::item {
      border: 1px solid #d9d9d9;
     border-top-color: transparent;
     border-bottom-color: transparent;
 } 
```

QTreeView 的大多数 qss 示例也适用于 QTableView

[http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtreeview](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtreeview)

# php - 解析错误的问题：语法错误，Internet Explorer 上的意外 $end

> ID：11459483
> 
> 赞同：0
> 
> 时间：2012-07-12T19:46:04.270
> 
> 标签：php, internet-explorer

Internet Explorer 显示以下经典错误： `Parse error: syntax error, unexpected $end in C:\xampplite\htdocs\obg001\tpl\chooseStart.tpl.php on line 133` 这通常是缺少护腕，但是有两件事我不完全理解：

1.- php_error_log 没有报告任何错误

2.- 错误只出现在 IE

我自己没有发现任何丢失的护腕。除了括号之外几乎没有其他任何内容的代码是：

```
 <?php
        if ($_SESSION['game']['status']=='OPEN'){
    ?> 
    <?php
                        foreach($gamers as $gamer){
            }
    ?>

    <?php
        }else{
    ?>
    <?php
            foreach($gamers as $gamer){
            }
        }
    ?>
    <?php 
        if($_SESSION['game']['status']=='CHOOSING'){         
    ?>
    <?php
        }
        else if ($_SESSION['game']['status']=='DONECHOOSING'){
    ?>
    <?php
        }
        else if ($_SESSION['game']['status']=='ROLLING'){
    ?>
    <?php 
            if ($canRoll['result']==true){
    ?>
    <?php        
            }else{
    ?>
                <?php  ?>    
    <?php
            }
    ?>    
    <?php
        }else if ($_SESSION['game']['status']=='DONEROLLING'){
            if($_SESSION['game']['userId'] == $_SESSION['user']['userId']){
    ?>
    <?php
            }
        }else {        
            if($_SESSION['game']['userId'] == $_SESSION['user']['userId']){        
    ?>
    <?php
            }
        }
    ?> 
```

如果您想查看没有截止的代码，请转到[此处](http://codepad.org/dHVgYtvf)

非常感谢你。

**服务器配置：**

*   操作系统：windows 7 x64
*   ApacheFriends XAMPP 1.7.7 版：
    *   阿帕奇 2.2.21
    *   MySQL 5.5.16（社区服务器）
    *   PHP 5.3.8 (VC9 X86 32 位线程安全) + PEAR
*   [php.ini](http://codepad.org/dSOputwe)

**更新**：

如果我得到它正确我的 php.ini 应该记录一切：

```
 error_reporting = E_ALL | E_STRICT
 display_errors = On 
 log_errors = On
 error_log =  "\xampplite\php\logs\php_error_log" 
```

此外，该项目过去和现在都是由我自己创建和编码的，所以我确信没有一个指令不记录任何包含中的错误。

**更新 2**

如果我故意在该代码的最后一行添加一个结束括号，我会在 php_error_log 中得到以下行：

`[12-Jul-2012 22:23:30] PHP Parse error: syntax error, unexpected '}' in C:\xampplite\htdocs\obg001\tpl\chooseStart.tpl.php on line 139`

所以PHP毕竟是登录解析错误，这应该在IE加载页面时发生，而它又没有。

我终于可以补充一点，即使在 iPad 上，页面也能完美加载，所以这对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:02:44.833

问题取决于 IE，它保留旧页面的缓存版本，而不调用应用程序。

正在开发中建议发送此标头

```
Cache-Control: no-cache 
```

# javascript - Jquery focus(in|out) 以奇怪的顺序运行

> ID：11459484
> 
> 赞同：2
> 
> 时间：2012-07-12T19:46:09.073
> 
> 标签：javascript, jquery

问题是，当专注于一个时，我尝试 通过运行`#input1`来专注于它`#input2`

```
$('#input2').focus(); 
```

首先运行然后的`focusin`事件`#input2``focusout``#input1`

为什么会发生这种情况，为什么不`focusout`先运行？

请参阅示例[http://jsfiddle.net/zZZsD/3/](http://jsfiddle.net/zZZsD/3/) 首先输入 4 个符号

更新：顺便说一句，出于性能原因，我使用委托绑定而不是直接绑定，可能会有很多输入字段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:21:12.290

有一种叫做**Event Hierarchy**的东西。它决定事件的触​​发顺序。

如果您的案例需要先触发另一个，请务必记下这一点。

有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/282245/what-is-the-event-precedence-in-javascript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:21:17.240

这可能是浏览器中 Javascript 引擎的 jQuery 的内部机制，甚至是“更糟糕的”。如果顺序很重要，可以在*focus之前使用**blur*方法。

 *```
(function () {
    $('#cont').on('keyup', 'input', function (event) {
        var input = $(this);
        if (input.val().length == 4) {
            input.blur();
            $('#input2').focus();
        }
    });

    $('#cont').on('focus', 'input', function () {
        $('#events').append('focusin of ' + this.id + ' <br>');
    });

    $('#cont').on('blur', 'input', function () {
        $('#events').append('focusout of ' + this.id + ' <br>');
    });

})(); 
```

当您选择另一个元素并取消焦点时，导航器可能会检查焦点元素。*

# class - 相同的 DIV 两次不同的浮点数？

> ID：11459485
> 
> 赞同：1
> 
> 时间：2012-07-12T19:46:26.090
> 
> 标签：class, html, css-float

我试图通过没有这么多的 div id 来清理我的代码。据我了解，您不应该多次使用相同的 div id。

的HTML：

```
<div id="sides" class="alignLeft"></div>
<div id="sides" class="alignRight"></div>
<div id="center"></div><!--center--> 
```

CSS：

```
.alignLeft {
   float: left;
}
.alignRight {
   float: right;
}
#sides {
   width: 350px;
   height: 45px;
}
#center {
   width: 350px;
   height:350px;
} 
```

如您所见，我在 html 中使用了两次 #sides div，但应用了不同的浮点类（左、右）。即使代码似乎有效，但我知道它是不正确的。使用具有不同浮点数的相同 div 的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:49:21.073

是的，id 选择器每页只能使用一次。你可以重构你的代码看起来像这样。

**HTML**

```
<div class="sides alignLeft"></div>
<div class="sides alignRight"></div>
<div id="center"></div><!--center--> 
```

**CSS**

```
.alignLeft {
   float: left;
}
.alignRight {
   float: right;
{
.sides {
   width: 350px;
   height: 45px;
}
#center {
   width: 350px;
   height:350px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:49:43.350

您可以将多个类分配给一个元素，因此您可以将`sides`其用作类而不是 id：

的HTML：

```
<div class="sides alignLeft"></div>
<div class="sides alignRight"></div>
<div id="center"></div><!--center--> 
```

CSS：

```
.alignLeft {
   float: left;
{
.alignRight {
   float: right;
{
.sides {
   width: 350px;
   height: 45px;
}
#center {
   width: 350px;
   height:350px;
{ 
```

# .net - 7zip 自解压存档 (SFX) 和 .Net 安装程序

> ID：11459486
> 
> 赞同：5
> 
> 时间：2012-07-12T19:46:27.533
> 
> 标签：.net, installation, 7zip, sfx

我正在尝试为我编写的 Windows 应用程序创建一个自解压存档。我的应用程序使用最新的 .Net 4.0，我想在 SFX 安装程序中包含 .Net 设置。但是，如果计算机需要安装 .Net 框架并重新启动，它将无法正确恢复安装我的应用程序。我查看了 Stack 站点上的其他 sfx 帖子，但没有一个问题涉及将 .Net 安装程序作为应用程序的先决条件。

我的项目产生 4 个文件：“App Installer.msi”“setup.exe”“WindowsInstaller-KB893803-v2-x86.exe”（在文件夹“WindowsInstaller3_1”中）和“dotNetFx40_Client_x86_x64.exe”（在文件夹“DotNetFX40Client”中） ，我认为所有这些都是标准的。

我使用 7zip 创建 SFX，如下所示：

首先，使用 7zip 将所有文件压缩到一个存档中：

```
7z.exe a -r AppInstallFiles.7z * 
```

接下来，我使用 7zS.sfx 文件（用于创建自解压安装程序）、我的配置文件和存档进行二进制复制。配置文件如下：

```
;!@Install@!UTF-8!
Title="MyApp Installer"
ExecuteFile="setup.exe"
;!@InstallEnd@! 
```

我用以下行复制它们：

```
copy /b 7zS.sfx + config.txt + AppInstallFiles.7z MyAppInstaller.exe 
```

安装程序在已经有 .Net 4.0 的计算机上完美运行 我的问题出现在没有 .Net Framework 的计算机上 - 我运行 SFX，它将所有内容提取到临时目录。然后，当 setup.exe 识别出计算机没有 .Net 4.0 时，它会调用 .Net 安装程序。这将提取到它自己的临时目录并开始安装。完成后，它会提示重新启动。点击“否”退出整个安装。点击“是”重新启动机器，重新登录时出现错误：“尝试安装 MyApp 时发生错误”，详细信息为“无法找到应用程序文件 'App Installer.msi'

问题似乎是，当安装程序移交给 .Net 安装程序并且 .Net 安装程序重新启动时，包含 My App 安装文件的临时目录被删除。我曾尝试从 setup.exe 切换到使用“App Installer.msi”，但这只会导致 msi 报告计算机没有 .Net 并建议进行 Web 下载。因为我可能在离线情况下安装应用程序，所以这对我不起作用。

之前有没有其他人尝试在 7zip SFX 中包含 .Net 安装程序，如果是，他们是如何解决的？如果可能，我更愿意继续使用 7zip，但如有必要，我会研究其他工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:27:52.340

我确定了一个我认为可以接受的解决方案。由于问题是由于 sfx 临时文件夹在重新启动时自行删除，因此我运行批处理文件而不是 setup.exe。批处理文件将 temp 目录中的所有内容复制到 temp 中的新目录，并从那里调用 setup：

```
::install.cmd, used to move the setup files to another directory before executing
xcopy /s * ..\MY_APP\
::use start to hide the cmd window
start ..\MY_APP\setup.exe 
```

然后，此文件夹在重新启动时仍然存在，从而允许继续设置。正如 serghei 所说，这在技术上是一个问题，因为它会持续到用户手动删除临时文件，但考虑到我的应用程序与现代硬盘相比的大小，它是可以接受的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T13:54:14.210

问题是 SFX 会在 setup.exe 完成后删除提取的文件。为避免这种情况，您可以使用[InstallPath](http://www.7zsfx.info/en/parameters.html#InstallPath)参数：

```
;!@Install@!UTF-8!
Title="MyApp Installer"
ExecuteFile="setup.exe"
InstallPath="%temp%\\My App"
;!@InstallEnd@! 
```

但在这种情况下，提取的文件根本不会被删除。例如，您可以在 MSI 中删除这些文件。

PS。如果您的客户将通过远程桌面会话运行安装程序，您也考虑过[这个问题](http://connect.microsoft.com/VisualStudio/feedback/details/383838/bootstrapper-generated-by-ms-visual-studio-2008-sp1-fails-to-start-after-system-reboot)

# wordpress - 强制将 www.domain.com\blog 重定向到 domain.com\blog .htaccess？

> ID：11459487
> 
> 赞同：0
> 
> 时间：2012-07-12T19:46:28.707
> 
> 标签：wordpress, .htaccess

我有一个 wordpress 多站点实例，由于某种原因默认为 domain.com（/blog 前面没有 www。任何前面带有 www 的请求都被强制发送到主页（domain.com/blog）而不是它的预期页面比如说 domain.com/blog/page。

我想要做的是强制所有传入流量剥离 www（如果存在），然后转到 /blog/what-ever-page-youre-trying-to-go-to。我需要它转到请求的页面，目前如果 /blog URL (/blog/ANY-PAGE-HERE) 末尾有任何内容，它默认为 /blog。

任何人都知道我将如何解决这个问题？在 .htaccess 中似乎是最简单的方法，但在研究了几个小时后，我似乎找不到可行的解决方案。

PS：它是多站点的，所以我不能只进行设置并将 URL 和 HOME 更改为 www.domain/blog

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:01:20.263

这是我在我的网站上使用的：

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # adapt and uncomment the following:
  RewriteCond %{HTTP_HOST} ^domain\.net$ [NC]
  RewriteRule ^(.*)$ http://www.domain.net/$1 [L,R=301]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:37:36.217

在文档根目录的 htaccess 中添加所有 wordpress 内容：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.domain\.net$ [NC]
RewriteRule ^blog(.*) http://domain.net/blog$1 [L,R=301] 
```

# schema.org - HTML5 时间和架构 startDate

> ID：11459490
> 
> 赞同：2
> 
> 时间：2012-07-12T19:46:41.413
> 
> 标签：schema.org, html

有什么办法可以将`<meta />`and`<time />`结合在一起吗？两者都是必要的吗？

```
<div itemscope itemtype="http://schema.org/Event">
      <a itemprop="url" href="nba-miami-philidelphia-game3.html" itemprop="name"> 
            Miami Heat at Philadelphia 76ers
      </a>

      <meta itemprop="startDate" content="2016-04-21T20:00">
      <time datetime="2016-04-21T20:00"></time>
        Thu, 04/21/16
        8:00 p.m.
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:53:41.467

你为什么不这样做：

```
<time itemprop="startDate" datetime="2016-04-21T20:00">
    Thu, 04/21/16
    8:00 p.m.</time> 
```

查看[规范基本语法部分中](http://www.w3.org/TR/html5/microdata.html#the-basic-syntax)的日期示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T15:22:33.167

如果你想同时满足 HTML5 和 Schema.org/RDFA Lite，你可以这样做：

```
<time itemprop="startDate" datetime="2016-04-21T20:00" content="2016-04-21T20:00">Thu, 04/21/16 8:00 p.m.</time> 
```

解析 ISO 日期比处理文本表示更容易

# php - 在 iframe 中的动态外部跨域上强制 target="_self"

> ID：11459494
> 
> 赞同：0
> 
> 时间：2012-07-12T19:47:05.880
> 
> 标签：php, iframe

我在 chrome 上使用 iframe 在信息亭模式下有一个站点，我在其中打开了许多外部站点。每个站点都有自己的链接，target="_blank"。我无法控制这些外部链接。我只想在 iframe 中打开所有这些外部链接，或者我需要为这些 target=_blank 链接发布一些消息。我无法在自助服务终端上打开新窗口。到目前为止我已经搜索过，发现它必须是一些服务器端编码。Javascript 在这方面没有任何帮助。

我的 iframe 代码：

```
 navigateToExternal:function(href)
    {
        Engine.ui.openMenu();
        Engine.ui.exit();
        Engine.ui.mostRecentSection = "external";

        $("a[data-navsection], a[href]").removeClass("disabled");
        $("a[href='" + href + "']").addClass("disabled");

        $(".footer").hide();

       var sandbox = "sandbox=\"allow-forms allow-scripts allow-same-origin\"";

         $("#content-container").append("<iframe id=\"contentFrame\" src=" + href + "\"" + sandbox + "></iframe>");
    }, 
```

任何帮助或建议都会非常棒。

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:49:10.573

不能，父页面无法访问跨站iframe，iframe也无法访问跨站父页面。

这属于同源策略，无法在客户端解决。您可以在服务器上抓取这些站点并将它们呈现为您自己的，但是我不确定这会有多有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:13:59.910

如果您在 Chrome 上运行，则可以尝试 html5 iframe`sandbox`属性。

```
<iframe sandbox="allow-scripts allow-forms" src="..."></iframe> 
```

[更多阅读](http://blog.chromium.org/2010/05/security-in-depth-html5s-sandbox.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T17:38:48.300

我得到了解决这个问题，并想分享。我们可以传递一个命令行参数对于 Mac，打开终端并运行：

```
 $ open -a Google\ Chrome --args --disable-web-security 
```

它将禁用同源策略，然后我们可以在跨站点 iframe 上进行所需的更改。

# java - 需要澄清继承和异常

> ID：11459495
> 
> 赞同：5
> 
> 时间：2012-07-12T19:47:08.080
> 
> 标签：java, oop

所以我想弄清楚为什么一个程序会这样编译，希望你们能为我解释一下。

```
class Vehicle{
   public void drive() throws Exception{
     System.out.println("Vehicle running");
   }
}

class Car extends Vehicle{
   public void drive(){
      System.out.println("Car Running");
   }

   public static void main(String[] args){
      Vehicle v = new Car();
      Car c = new Car();
      Vehicle c2 = (Vehicle) v;

      c.drive();
      try {
          v.drive();
      } catch (Exception e) {
          e.printStackTrace();
      } //try v.drive()

      try {
          c2.drive();
      } catch (Exception e) {
          e.printStackTrace();
      } //try c2.drive()
   }
} 
```

所以上述程序的输出将是

汽车运行
汽车运行
汽车运行

我的问题是，为什么我必须做一个 try/catch 块来为 v 和 c2 对象而不是 c 调用 drive() 方法？它们都是 Car 的实例，所以这里发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T19:50:18.770

`Vehicle`有一个`drive()`抛出异常的方法。

`Car`用它自己的不抛出异常的方法覆盖`Vehicle`'s方法。`Drive()``Drive()`

你得到你所做的输出的原因是因为即使`Vehicle v`是 car 类型，编译器在编译时也不知道这个事实，所以当你调用`v.drive()`编译器时不知道你正在调用 Car 的`drive`方法。

假设您`v`通过以下方式实例化：

```
Vehicle v;
if(rand(0,1) == 1)
    v = new Car();
else
    v = new Vehicle(); 
```

编译时您不会知道 v 是否是汽车。在你运行程序之前你不会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:22:27.270

被覆盖的方法可以更具体地说明它们返回和抛出的内容。它们可以使用返回对象和异常的子类，或者省略父方法签名中声明的异常。当您调用 ((Vehicle)new Car()).drive() 时，将执行子级的实现，但在编译时使用父级的方法签名，这会迫使您捕获 Vehicle.Driver 中定义的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:54:19.977

其他答案已经解释了覆盖的方法；但是，还有另一个问题。你之前这么说：

> 它们都是 Car 的实例，所以这里发生了什么？

但是对于编译器来说，它们并不是 Car 的所有实例——编译器会查看*变量*的类型：

```
 Vehicle v = new Car();
  Car c = new Car();
  Vehicle c2 = (Vehicle) v; 
```

在编译时，`v`被视为 a `Vehicle`，`c`作为 a `Car`，并且将相应地处理异常。在运行时，JVM 知道`v`实际包含 a `Car`，但这是不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T19:51:15.853

我们有：

```
 Vehicle v = new Car();
  Car c = new Car();
  Vehicle c2 = (Vehicle) v; 
```

此时，`v`和。这意味着您正在调用. 这就是为什么您需要为这些方法而不是为这些方法尝试/捕获（因为该方法不会引发异常）。`c2``Vehicle``public void drive() throws Exception``Vehicle``c.drive()`

# android - Android OpenGL ES 的 3D 对象中的图像纹理与颜色？

> ID：11459502
> 
> 赞同：3
> 
> 时间：2012-07-12T19:47:37.300
> 
> 标签：android, opengl-es, 3d, glsl, render-to-texture

如果我们只是为 3D 对象使用颜色（例如，绿色）或加载纹理图像文件（例如，green.png 文件），在渲染开销方面是否有任何区别？

**OpenGL ES**不应该最终为***彩色***对象创建纹理吗？

我正在使用 Android API v8 和模拟器，目标是真正的 Android 手机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:16:51.703

为什么它最终会为彩色对象创建纹理？

我不能谈论每一个可以想象的实现，但在我看来，制服会是一个更好的解决方案。统一值可能非常本地缓存在数据路径中，可以快速访问，而纹理则必须对纹理坐标进行插值，从 vram 中检索纹理并对其进行采样。我不确定这怎么能像从制服上读取几个花车一样快。

# vb.net - 我可以覆盖 SqlCommand 函数吗？

> ID：11459504
> 
> 赞同：0
> 
> 时间：2012-07-12T19:47:46.943
> 
> 标签：vb.net

我有例如代码

```
Dim cmd As New SqlClient.SqlCommand(commandString, databaseString) 
Dim result As Integer

Try
    result = cmd.ExecuteScalar()
Catch e as Exception
    'catch exception code
End Try 
```

除了这样做，我可以覆盖 ExecuteScalar 函数来进行某种通用异常捕获吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:06:13.660

您还可以使用组合：

```
Public Class SqlCommandManager
Private _sqlCommand As System.Data.SqlClient.SqlCommand
Public Sub New(command As System.Data.SqlClient.SqlCommand)

    If command Is Nothing Then
        Throw New ArgumentNullException("command")
    End If

    _sqlCommand = command
End Sub
Private ReadOnly Property Command As System.Data.SqlClient.SqlCommand
    Get
        Return _sqlCommand
    End Get
End Property
Public Function ExecuteScalar() As Object
    Dim result As Object

    Try
        result = Command.ExecuteScalar()
    Catch e As Exception
        'catch exception code
    End Try

    Return result
End Function
End Class 
```

不是说这是最好的选择，只是说它是一个....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:51:18.643

不，但您可以创建一个通用的`DoExecuteScalar`辅助函数，该函数采用 SQL 字符串和连接字符串：

```
Public Function DoExecuteScalar(commandString as String, databaseString as String) as Object
    Dim cmd as New SqlClient.SqlCommand(commandString, databaseString)
    Dim result as Integer
    Try
        result = cmd.ExecuteScalar()
    Catch e As Exception
        Return 0
    End Try
    Return result
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T19:51:34.803

不，您不能覆盖方法，因为您不能从它继承，因为[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)is [`sealed`](http://msdn.microsoft.com/en-us/library/88c54tsw.aspx)。

在您使用的地方捕获（或抛出）异常有什么问题`SqlCommand`？

# android - 在计算内核的分配中接收索引

> ID：11459507
> 
> 赞同：0
> 
> 时间：2012-07-12T19:47:50.907
> 
> 标签：android, renderscript

我如何知道 root() 函数内部分配中的当前索引？

现在我通过绑定一个额外的指针来做到这一点——分配的开始。像这样的东西：

```
// Java 代码
分配在 = Allocation.create...;
mScript.bind_gStart(in);

```

然后在渲染脚本中使用一些指针算法：

```
// RS 文件 - 假设一维数组
无效根（常量 uint8_t *in）{
  size_t idx = in - gStart;
  ...
}

```

这能保证工作吗？有没有更好/更直接的方法来做到这一点？不知何故，我觉得一定有一些 curIdx 伪变量，或者什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:24:45.057

一个常见的 root() 函数原型是：

```
void root(const uchar4 *data_in, uchar4 *data_out, const void * usrData, uint32_t x, uint32_t y) 
```

x 和 y 参数指定输入分配中的索引。我已经成功地将它们用于图像处理，例如：

```
void root(const uchar *data_in, uchar4 *data_out, const void * usrData, uint32_t x, uint32_t y) {
int sum_x;
int sum_y;
unsigned char channel;
int color;

width = rsAllocationGetDimX(gIn);
height = rsAllocationGetDimY(gOut);

if ( (x > 1) & (y > 1) & (x < width-1) & (y < height-1)) {
    sum_x = 0;
    sum_x += -1 * gPixels[(y-1)*width+x-1];
    sum_x +=  1 * gPixels[(y-1)*width+x+1];
    sum_x += -2 * gPixels[y*width+x-1];
    sum_x +=  2 * gPixels[y*width+x+1];
    sum_x += -1 * gPixels[(y+1)*width+x-1];
    sum_x +=  1 * gPixels[(y+1)*width+x+1];

    sum_y = 0;
    sum_y += -1 * gPixels[(y-1)*width+x-1];
    sum_y += -2 * gPixels[(y-1)*width+x];
    sum_y += -1 * gPixels[(y-1)*width+x+1];
    sum_y +=  1 * gPixels[(y+1)*width+x-1];
    sum_y +=  2 * gPixels[(y+1)*width+x];
    sum_y +=  1 * gPixels[(y+1)*width+x+1];

    //channel = (byte) (Math.hypot(sum_x,  sum_y)); // L2 norm
    channel = (uchar) (abs(sum_x) + abs(sum_y)); // L1 norm
    //color = 0xFF000000 | (channel << 16) | (channel << 8) | channel;
    data_out->w = 0xFF;
    data_out->x = channel;
    data_out->y = channel;
    data_out->z = channel;
}
else {
    data_out->w = 0xFF;
    data_out->x = 0xFF;
    data_out->y = 0xFF;
    data_out->z = 0xFF;
} 
```

}

# scala - 如何在 Scala 中为特定 Map 类型创建类型别名

> ID：11459510
> 
> 赞同：7
> 
> 时间：2012-07-12T19:47:58.003
> 
> 标签：scala, types, map

我有一堆使用 Map[String, Float] 的代码。所以我想做

```
type DocumentVector = Map[String, Float]
...
var vec = new DocumentVector 
```

但这不会编译。我收到消息：

```
trait Map is abstract; cannot be instantiated
[error]       var vec = new DocumentVector 
```

好的，我想我明白这里发生了什么。Map 不是一个具体的类，它只是通过 () 生成一个对象。所以我可以这样做：

```
object DocumentVector { def apply() = { Map[String, Float]() } }
...
var vec = DocumentVector() 
```

这行得通，虽然它有点笨拙。但现在我想嵌套类型。我想写：

```
type DocumentVector = Map[String, Float]
type DocumentSetVectors = Map[DocumentID, DocumentVector] 
```

但这给出了相同的“无法实例化”问题。所以我可以尝试：

```
object DocumentVector { def apply() = { Map[String, Float]() } }
object DocumentSetVectors { def apply() = { Map[DocumentID, DocumentVector]() } } 
```

但 DocumentVector 实际上不是一个类型，只是一个带有 apply() 方法的对象，所以第二行不会编译。

我觉得我在这里缺少一些基本的东西......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T20:01:48.403

只需具体说明您想要哪种地图

```
scala> type DocumentVector = scala.collection.immutable.HashMap[String,Float]
defined type alias DocumentVector

scala> new DocumentVector                                                    
res0: scala.collection.immutable.HashMap[String,Float] = Map() 
```

除非您需要抽象 Map 类型的灵活性，在这种情况下，没有比将类型别名与工厂分开更好的解决方案（这可能是一个普通的方法，不需要带有 apply 的 Object）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T08:17:26.480

我同意@missingfaktor，但我会实现它有点不同，所以感觉就像使用一个特征和一个同伴：

```
type DocumentVector = Map[String, Float]
val DocumentVector = Map[String, Float] _

// Exiting paste mode, now interpreting.

defined type alias DocumentVector
DocumentVector: (String, Float)* => scala.collection.immutable.Map[String,Float] = <function1>

scala> val x: DocumentVector = DocumentVector("" -> 2.0f)
x: DocumentVector = Map("" -> 2.0) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T20:05:32.557

普通方法怎么样？

```
type DocumentVector = Map[String, Float]
def newDocumentVector = Map[String, Float]()
type DocumentSetVectors = Map[DocumentID, DocumentVector]
def newDocumentSetVectors = Map[DocumentID, DocumentVector]() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-25T15:13:55.040

这可能是一种可能的解决方案

```
package object Properties {
  import scala.collection.generic.ImmutableMapFactory
  import scala.collection.immutable.HashMap

  type Properties = HashMap[String, Float]
  object Properties extends ImmutableMapFactory[Properties] {
    def empty[String, Float] = new Properties()
  }
} 
```

# android - Android中屏幕锁定和主页按钮之间的区别

> ID：11459514
> 
> 赞同：1
> 
> 时间：2012-07-12T19:48:14.707
> 
> 标签：android, android-activity, surfaceview, glsurfaceview

我不明白用户锁定屏幕（使用顶部屏幕锁定按钮）并立即返回应用程序与用户按下主页按钮然后立即返回应用程序之间的区别。

似乎正在发出所有相同的呼叫。根据我的观察：

按下主页按钮或屏幕锁定时调用：onPause -> onStop

在重新按下主页按钮或屏幕锁定后按下应用程序时调用：onRestart -> onStart -> onResume

**我的个人问题：**

这尤其让我感到沮丧，因为我在 onResume 上将 SurfaceView 和 GLSurfaceView 重新创建为 FrameLayout，但是，根据按下的按钮，元素的顺序正在发生变化。我的 onResume 中有以下代码：

```
cameraPreviewArea = (FrameLayout) findViewById(id.camera_preview);
cameraPreviewArea.addView(glView, glLayout);
cameraPreviewArea.addView(camprevSurfaceView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

这具有在以下情况下将我的 glSurfaceView 显示在顶部的效果：应用程序第一次启动时，以及当应用程序从屏幕锁定然后屏幕解锁恢复时。但是，在按下主页按钮，然后重新打开应用程序时，SurfaceView 被放置在 glSurfaceView 的顶部！

如果我按如下方式切换 addView 调用，则会发生相反的情况。我可以用一些布尔标志来解决这个问题，但由于我不确定屏幕锁定/解锁和主页按钮之间的区别，我不清楚我将在哪里设置布尔值。另外，无论如何我都不想以这种方式解决问题，因为它看起来很老套，并且对问题缺乏任何真正的理解。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:51:24.287

一般而言，您没有理由需要不断地从`Activity`.

由于您感兴趣的两个视图都是`SurfaceView`组件，因此如果在窗口变为可见或隐藏时需要执行某些操作，则可以利用和方法`SurfaceHolder.Callback`进行监视。`onSurfaceCreated()``onSurfaceDestroyed()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:37:29.470

这种特定情况 - 使用两个表面视图并在一个窗口中指定它们的 Z 顺序 - 目前 Android 似乎不支持。[android 开发者组的这个帖子](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/COffLpanlz0)分享了以下信息：

> 框架当前不支持任何类型的多个活动重叠表面视图。您可能会让它们工作，但这主要是由于运气 -**视图层次结构没有定义这些表面的 Z 顺序，也没有尝试确保它们以任何特定方式进行 Z 顺序，所以这可能会改变原因。**

嗯……给你！

...但是对于**尝试此操作**的任何人，我找到了一种解决方法：将您的相机预览尺寸设置为 1x1 的小正方形。这将允许您同时显示两者（因为必须显示相机预览才能继续预览）并忽略 cameraPreview 呈现给您的讨厌的 SurfaceView 问题。我相信有一个更好的解决方案，严格使用一个 GLSurfaceView，但它在 3.0 以下不兼容。

# c# - 起订量，如何测试保存方法？

> ID：11459521
> 
> 赞同：0
> 
> 时间：2012-07-12T19:48:53.650
> 
> 标签：c#, unit-testing, moq

我有一个 save() 方法，不太确定如何测试。下面是我的代码。

```
public interface IRepository<T>
{
    T Get(int id);
    void Save(T item);
    void Delete(int id);
} 
```

save 方法不返回任何值，我无法比较该值。但是，我已经有4个用户了，再添加一个后，我只查看用户总数，测试就够了吗？

```
[Test]
public void Add_a_new_smoothie_user_should_return_total_5_users()
{
    // Arrange

    var totalUsers = _users.Count();

    _mockUserRepository.Setup(s => s.Save(It.IsAny<User>()))
        .Callback((User user) => _users.Add(user));

    var newUser = new User
                      {
                          Id = 3,
                          Email = "newuser@test.com",
                          Password = "1234567".Hash(),
                          Firstname = "",
                          Lastname = "",

                          CreatedDate = DateTime.Now,
                          LastLogin = DateTime.Now,

                          AccountType = AccountType.Smoothie,
                          DisplayName = "",
                          Avatar = "",
                          ThirdPartyId = "",
                          Status = Status.Approved,
                          Ip = "127.0.0.1"
                      };

    // Act

    _mockUserRepository.Object.Save(newUser);

    // Assert

    Assert.AreEqual(5, _users.Count());
    Assert.AreEqual(1, _users.Count() - totalUsers);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:55:51.090

您正在模拟您尝试测试的部分功能。`Add()`除了您持有用户的数据类型的方法之外，这些测试不会证明任何事情。最后，如果您的存储库正在运行，它不会给出任何想法。

您应该尝试实现一个[数据库沙箱](http://xunitpatterns.com/Database%20Sandbox.html)来测试您的存储库功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:11:50.780

永远不要为模拟代码编写测试，因为这些测试实际上不测试任何东西（嗯，除了模拟框架实现）。

如何使用测试优先的方法创建接口？这简单。考虑你有一些`FooController`，这需要一些数据。在某些时候（在为控制器编写测试期间），您决定会有一些依赖关系，它将将该数据提供给控制器（是的，存储库）。您当前的控制器测试需要一些功能来`Bar`从数据存储中获取一些对象。所以，你写测试

```
Mock<IBarRepository> repositoryMock = new Mock<IBarRepository>();
repositoryMock.Setup(r => r.GetById(It.IsAny<int>()).Returns(new Bar());
FooController controller = new FooController(repositoryMock.Object);
controller.Exercise(); 
```

该测试将无法编译，因为此时您没有`IBarRepository`控制器所需的接口。您创建此接口。`GetById`并且您还向此接口添加方法。之后你实现控制器。

好消息 - 当控制器完成时，你将有`IBarRepository`接口定义，它有 API 非常方便控制器。

下一步是创建`IBarRepository`实现。我很少为存储库编写测试。但是，您可以通过以下几种方式进行操作：

*   如果您有存储库（ORM 框架、ADO.NET 类等）使用的数据访问代码，您可以模拟这些依赖项并验证您的存储库实现是否对底层数据访问代码进行了所有必需的调用。这些测试非常脆弱。并且不会给您带来太多好处，因为存储库很少包含复杂的业务逻辑。
*   您可以使用真实数据库（例如内存中的 SQLite）进行集成测试，并验证数据库表中的数据是否真的经过 CRUD。这些测试也很脆弱并且非常耗时。但是在这种情况下，您可以肯定，该存储库可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:59:39.283

您的存储库保存在哪里？如果它保存在某个文件中，那么您可以将您的文件与某个模型文件（金色）进行比较，其中所有内容都经过手动检查并且没问题。如果是某个数据库，那么您应该模拟您的数据库接口，记录所有插入查询，然后将日志与理想日志进行比较。

# jvm - 这个函数的堆栈是什么样的？

> ID：11459531
> 
> 赞同：0
> 
> 时间：2012-07-12T19:49:31.807
> 
> 标签：jvm

我必须追问。

给定的是功能：

```
show(int a, int b) 
{
    int v1;
    int v2;
} 
```

a 和 b 是参数。v1 和 v2 是局部变量。绘制一个堆栈，其中明确 a、b、v1、v2、旧帧指针和返回地址的位置。还显示高堆栈地址和低堆栈地址在哪里。

我希望我已经足够清楚了。

编辑：

我现在拥有的是：

```
v2      <-- SP
v1
prevLV  <-- LV
Ra
a
b 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:28:06.250

绘制一个确定的图片很困难，因为它取决于 JVM 的实现，但是您现在所拥有的不太可能是正确的。

因为 Java 不区分 args 和 temps（参见 iload 等字节码），它们将需要并排出现在内存中，或者有人将不得不将它们从调用者挂起堆栈复制到被调用者在框架构建时（这往往很昂贵）。

# .net - Nessus 命令行工具

> ID：11459542
> 
> 赞同：0
> 
> 时间：2012-07-12T19:50:21.137
> 
> 标签：.net, cmd, nessus

有一个问题，我认为互联网上没有好的文档。所以我想请你帮忙。我想以编程方式调用 nessus（Windows、.Net）。所以我正在尝试测试 nessuscmd 开关和选项。问题是我找不到如何使用预定义的策略（从 Web 界面创建）进行扫描并加载所有可用的插件。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:53:03.353

我不确定是否有明确的方法可以做到这一点。如果您使用的是 Tenable 的 Security Center 4.x / Nessus，那么您应该能够打开票证并得到很好的响应。

# java - getter 和 setter 应该同步吗？

> ID：11459543
> 
> 赞同：70
> 
> 时间：2012-07-12T19:50:26.110
> 
> 标签：java, synchronized

```
private double value;

public synchronized void setValue(double value) {
    this.value = value;
}
public double getValue() {
    return this.value;
} 
```

在上面的例子中，使 getter 同步有什么意义吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-12T19:55:31.933

我认为最好在这里引用[Java Concurrency in Practice](http://jcip.net/)：

> 假设仅在写入共享变量时才需要使用同步是一个常见的错误。这是不正确的。
> 
> 对于可能被多个线程访问的每个可变状态变量，对该变量的**所有访问**都必须在持有相同的锁的情况下执行。在这种情况下，我们说变量被那个锁保护着。
> 
> 在没有同步的情况下，编译器、处理器和运行时可以对操作执行的顺序做一些非常奇怪的事情。试图推断在不充分同步的多线程程序中“必须”发生的内存操作的顺序几乎肯定是不正确的。

通常，您不必对原语如此小心，所以如果这将是 an`int`或 a`boolean`它可能是：

> 当一个线程在没有同步的情况下读取一个变量时，它可能会看到一个陈旧的值，但至少它会看到一个由某个线程实际放置在那里的值，而不是某个随机值。

然而，这对于 64 位操作来说是不正确的，例如 on`long`或者`double`如果它们没有被声明`volatile`：

> Java 内存模型要求 fetch 和 store 操作是原子的，但对于非易失性 long 和 double 变量，JVM 允许将 64 位读取或写入视为两个单独的 32 位操作。如果读取和写入发生在不同的线程中，则可以读取非易失性 long 并取回一个值的高 32 位和另一个值的低 32 位。
> 
> 因此，即使您不关心过时的值，在多线程程序中使用共享的可变 long 和 double 变量也是不安全的，除非它们被声明为 volatile 或由锁保护。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-12T20:12:08.217

让我通过示例向您展示 JIT 编译代码的合法方式。你写：

```
while (myBean.getValue() > 1.0) {
  // perform some action
  Thread.sleep(1);
} 
```

JIT 编译：

```
if (myBean.getValue() > 1.0) 
  while (true) {
    // perform some action
    Thread.sleep(1);
  } 
```

在稍微不同的场景中，即使是 Java 编译器也可以产生类似的字节码（它只需要消除动态分派到不同的`getValue`. 这是一个教科书式的起重例子。

为什么这是合法的？编译器有权假设`myBean.getValue()`在执行上述代码时结果永远不会改变。没有`synchronized`它可以忽略其他线程的任何操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T07:37:39.797

这里的原因是防止任何其他线程在线程读取时更新值，从而避免对陈旧值执行任何操作。

这里 get 方法将在“this”上获得内在锁，因此任何其他可能尝试使用 setter 方法设置/更新的线程都必须等待获得“this”上的锁才能进入执行 get 的线程已经获得的 setter 方法.

这就是为什么它建议在对可变状态执行任何操作时遵循使用相同锁的做法。

由于没有复合语句，因此使字段 volatile 在这里起作用。

* * *

重要的是要注意同步方法使用内部锁，即“this”。所以 get 和 set 都是同步的，这意味着任何进入该方法的线程都必须获得锁定。

* * *

在执行非原子 64 位操作时，应特别考虑。Java Concurrency In Practice 的摘录可能有助于理解这种情况 -

“Java 内存模型要求 fetch 和 store 操作是原子的，但对于非易失性 long 和 double 变量，JVM 允许将 64 位读取或写入视为两个单独的 32 位操作。如果读取和写入发生在不同的线程, 因此可以读取非易失性 long 并取回一个值的高 32 位和另一个值的低 32 位. 因此, 即使您不关心过时的值, 也不安全在多线程程序中使用共享的可变长和双变量，除非它们被声明为 volatile 或由锁保护。”

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-05-23T09:05:20.320

也许对于某人来说，这段代码看起来很糟糕，但它工作得很好。

```
 private Double value;
  public  void setValue(Double value){
    updateValue(value, true);
  }
  public Double getValue(){
      return updateValue(value, false);
  }
  private double updateValue(Double value,boolean set){
    synchronized(MyClass.class){
      if(set)
        this.value = value;
      return value;
    }
  } 
```

# java - NumberFormatException：无法将“”解析为整数

> ID：11459547
> 
> 赞同：1
> 
> 时间：2012-07-12T19:50:46.240
> 
> 标签：java, android, arrays, parsing, numberformatexception

我有一个日期字符串：

```
gridcell.setTag(theday + "-" + themonth + "-" + theyear + "|" + hijri_day + "-" + hijri_month + " ("+ hijri_monthno +") " + hijri_year); 
```

..如果日期有事件，我会在按钮单击时将其传递给另一个类：

```
String date_month_year = (String) view.getTag();
if (isHoliday(d, m, y))
{
    Intent i = new Intent(view.getContext(), Events.class);
    i.putExtra("date_string", date_month_year);
    startActivity(i);
} 
```

在 Events.class 中，我得到了参数：

```
Intent intent = getIntent();
String date_string = intent.getStringExtra("date_string");

date_view = (TextView) this.findViewById(R.id.hijridate);
eventdetails = (TextView) this.findViewById(R.id.eventdetails);
date_view.setText(date_string);

String[] dateAr = date_string.split("-|\\||\\(|\\)|\\s+");
m = Integer.parseInt(dateAr[6]);
d = Integer.parseInt(dateAr[3]);
y = Integer.parseInt(dateAr[8]); 
```

这是回历月份数组：

```
private String months[] = {"Muharram","Safar","Rabi-al Awwal","Rabi-al Thani","Jumada al-Ula","Jumada al-Thani","Rajab","Sha\'ban","Ramadhan","Shawwal","Dhul Qa\'dah","Dhul Hijjah"}; 
```

我遇到的问题是，当它是一个单词的月份名称（即 Muharram、Safar、Rajab 等）时，一切都很顺利。但是，如果它是带有空格或破折号的单词（即 Rabi-al awwal、Dhul Hijjah），则会引发错误：`NumberFormatException: unable to parse '' as integer`或`NumberFormatException: unable to parse 'al' as integer`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:57:52.160

您是否有理由需要使用许多不同的字符类型来拆分字符串？

它失败的原因是因为您使用的拆分字符

> String[] dateAr = data_string.split("-|\||\(|\)|\s+");

也在月份名称中。

在该行之后放置一个调试点，或者在 dateAr 数组上为每个执行一个并记录结果。这样，您就可以了解它是如何被拆分的。

# spring - 实体退出@Transactional上下文时的Spring回调？

> ID：11459548
> 
> 赞同：0
> 
> 时间：2012-07-12T19:50:52.697
> 
> 标签：spring, hibernate, transactional, hibernate-onetomany, entitylisteners

Spring 是否有任何钩子可以在事务上下文的出口处为每个实体调用实体上的方法或实体侦听器？

我们使用 Spring 和 Hibernate 来管理我们也为搜索编制索引的一堆实体。我们目前使用带有 Hibernate 的 @PreUpdate 方法的实体侦听器来在创建或修改实体时执行重新索引。当然，该事件仅在实体自身的一个或多个属性（即其数据库行中的值）被更新时触发。

当实体具有非平凡子属性的 @OneToMany 映射时，就会出现问题。当更新这些子属性之一时，*不会*在父实体上调用 PreUpdate 回调。

我们已经跟踪了属性的更新时间，但我们希望等到所有更新完成后再触发重新索引。进行此类重新索引调用的最佳位置是什么？PreUpdate 在大多数情况下运行良好，但这个问题让我想知道当实体离开 @Transactional 范围时是否存在挂钩。或者，当 OneToMany 孩子被持久化时，是否有一种休眠方式来触发父母的回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:17:54.437

我认为方面是为了救援。看看第 10.5.8 节[建议事务操作](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)在 Spring 文档中建议事务操作这将帮助您围绕 @Transactional 方法编写方面，然后进行索引。

# php - 如何保护您的代码免受客户的侵害

> ID：11459552
> 
> 赞同：0
> 
> 时间：2012-07-12T19:51:18.700
> 
> 标签：php, encode

我有一个包含 HTML/Javascript/PHP 的 wb 应用程序。不幸的是，我不信任我的客户将其重新分发和转售给其他公司，因此我需要以某种方式对我的代码进行编码，然后将它们交给他。我知道有很多软件可以为 PHP 完成这项工作。有什么建议可以用来提高安全性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:54:55.860

防止这种情况的唯一方法是不向客户端提供除 html 和 javascript 之外的代码，并且只有这两个东西与您网站上的 api 交互。再多的混淆都不足以阻止他们获取原始代码，尤其是您描述的动态语言。PHP 有一些是的，但它们只能保护很短的时间。您最好的选择是向您的客户端公开一个 API 并保护该 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:59:04.270

如果您给他一个完整的包，他可以将其发布在服务器上并运行，那么您已经将完整的包交给了他。再多的编码都不会阻止这个客户简单地复制你给他的东西并在他认为合适的时候重新分发它。防止您的客户这样做是版权法的工作——您最好与律师讨论此事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T19:56:16.940

到目前为止，我使用了 ioncube 和 ZendGuard。两者都很好！这是一个选择的问题。

# asp.net-mvc - 适当的导航属性使用

> ID：11459557
> 
> 赞同：0
> 
> 时间：2012-07-12T19:51:40.810
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4.1

我知道这可能是一个非常迟钝的问题，但是代表查找表的实体是否需要导航属性？

例如

```
public class State
{
    public int StateId      { get; set; }
    public string StateName { get; set; }
    public string StateAbbr { get; set; }

    public virtual ICollection<AccreditingAgency> AccreditingAgencies { get; set; }
}

public class AccreditingAgency
{
    public int AccreditingAgencyId { get; set; }
    public string AgencyName { get; set; }
    public string AgencyAddress { get; set; }
    public string AgencyCity { get; set; }
    public int StateId { get; set; }
    public string AgencyZipCode { get; set; }
    public string AgencyWebsite { get; set; }

    public virtual State State { get; set; }
} 
```

另外，在上面的示例中，我什至应该在 AccreditingAgency 中拥有一个 State 导航属性吗？

事实上，什么时候*应该*使用导航属性？

感谢您的任何澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:06:01.467

导航属性纯粹是为了您的利益。

如果您希望能够找出一个州的所有认证机构，包括第一个导航属性。

如果您想了解认证机构所处的状态，请包含第二个导航属性。

如果您真的不想知道其中任何一个，那么可能这两个实体根本不应该联系起来。

# box-api - 使用 Box2.0 Delete 方法时返回 400 错误

> ID：11459564
> 
> 赞同：0
> 
> 时间：2012-07-12T19:52:02.373
> 
> 标签：box-api

我正在使用 Box 2.0 API 来删除文件。使用邮递员，我输入以下内容：

[https://api.box.com/2.0/files/2605672883](https://api.box.com/2.0/files/2605672883)

指定 DELETE 操作。我已经适当地设置了授权标头。当我提交请求时，我收到以下错误：

{“类型”：“错误”，“状态”：400，“代码”：“bad_request”，“help_url”：“http://developers.box.com/docs/#errors”，“消息”：“可以不解析 JSON", "request_id": "4934716064fff2a0a70988" }

这让我觉得我需要一个 JSON 对象作为消息正文的一部分，文档指定文件 ID 是请求中唯一需要的东西。这是一个错误还是我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T20:33:54.487

DELETE /files/{id} 请求需要（[截至上周](http://developers.blog.box.com/2012/07/13/more-v2-updates/)）带有`If-Match`文件 sha1 的标头，以防止出现竞争条件。您可以在此处查看更新的文档：http: [//developers.box.com/docs/#files-delete-a-file](http://developers.box.com/docs/#files-delete-a-file)

编辑：POSTMAN 发送删除请求的方式存在错误。如果您发送一个空的 JSON 对象`{}`作为正文，它应该可以成功运行。

# html - 是否有一个 URL 参数可以使 URL 在特定命名的浏览器窗口中打开

> ID：11459566
> 
> 赞同：4
> 
> 时间：2012-07-12T19:52:17.630
> 
> 标签：html, email, url, parameters, href

我有一个电子邮件摘要，每天都会发送给我网站的用户，其中包含指向网站内容的链接，以便他们可以轻松进入并开始通过电子邮件进行交互。麻烦的是，如果他们点击多个链接，他们将打开多个浏览器，非技术用户可能无法理解，最终不得不在完成后关闭一堆标签/浏览器网站。我希望在同一窗口/选项卡中打开电子邮件摘要中的所有链接。

我知道，如果您有一个`href`您可以设置`target=my_window`的链接，那么链接将在该窗口中打开。我想知道是否有一个 URL 参数可以用来代替编辑`a`标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:54:20.277

不。我不知道任何将任何特殊行为与链接查询字符串相关联的浏览器（或其他用户代理）。查询字符串是供接收HTTP请求的服务器处理的。

正如您在问题中所说，该`target`属性是控制（或至少建议）链接应在哪个窗口中打开的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:08:35.977

您可以使用 PHP 来捕获自定义 URL 参数。

假设您有一个链接，例如： www.yoursite.com/somepage.php?title=Some Page Title Here

URL 中的参数字符串以 ?something=somevalue 开头，并且可以与 & 符号链接（例如 ?something=somevalue&somethingelse=someothervalue）等。

然后，您可以将此 PHP 广告添加到页面顶部：

```
<?php $title = $_GET['title']; ?> 
```

然后为您的标题标签输入以下内容：

```
<title><?php echo $title; ?></title> 
```

您将为要传递到页面的每个参数添加另一个带有参数值的变量。但是对于您要执行的操作，上面的代码将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:13:52.783

你能用这个`window.open`方法吗？

[**参考：**](http://msdn.microsoft.com/en-us/library/ie/ms536651%28v=vs.85%29.aspx) `window.open(url, name, features, replace);`

它允许将浏览***器窗口*****命名为**，从而在单击格式化为使用该语法的新链接时***重用。***`window.open`

**示例：** [**链接**](http://www.w3schools.com/js/tryit.asp?filename=try_win_focus)

**状态更新：**注意你可以搜索很多[**window.open(); 在线生成器**](http://www.google.com/search?q=window.open+generator)帮助构建打开的窗口的外观。在所有浏览器中测试所需的外观很重要，因为每个浏览器中的地址栏呈现方式不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T20:01:10.680

最简洁的答案是不。您所说的这种行为是严格的客户端，由浏览器控制。在 Web 服务器上运行的应用程序负责对查询字符串做出反应。

您无法控制所发送电子邮件的模板吗？将目标添加到适当的锚点应该很简单。

# delphi - 使用 TGIFImage 重建和保存 Gif 的问题

> ID：11459568
> 
> 赞同：4
> 
> 时间：2012-07-12T19:52:29.080
> 
> 标签：delphi, delphi-xe

我还有一个关于 Delphi XE 中包含的 GifImage.pas 的问题。我遇到的问题与我之前提出的一个问题有关：[TGifImage Transparency Issue](https://stackoverflow.com/questions/10349050/tgifimage-transparency-issue)

通过使用 TGifRenderer 从 Gif 文件中显示正确的帧来解决上述上一个问题中的问题，该文件非常适合加载。

但是现在我需要做相反的事情，我需要从一系列位图中重建并保存一个新的 Gif。但是当我保存时，输出的 Gif 文件绘制不正确 - 就像以前一样。

我不确定是否再次需要 TGIfRenderer，因为我所做的只是添加位图并打包然后保存 Gif。

要查看我面临的确切问题，请继续阅读（为长篇文章提前道歉！）

**首先将这些位图保存到一个新的示例项目文件夹中：**

**注意：**这些图像最初是位图，但 StackOverflow 似乎已将它们转换为 PNG，因此您可能需要复制到 Paint 并再次保存。

![在此处输入图像描述](../Images/98d21862d45852d961e78145f08028a5.png)

![在此处输入图像描述](../Images/1e1d531e5af8a7e96e2e17f130696e44.png)

![在此处输入图像描述](../Images/f27e5c146e7f0b95604ff08cc9085e65.png)

![在此处输入图像描述](../Images/66ad37281f41742eee45280455b10849.png)

**现在从一个新项目中，粘贴以下代码：**

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, GifImg, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  Bmp: TBitmap;
  Gif: TGIFImage;
begin
  Bmp := TBitmap.Create;
  Gif := TGIFImage.Create;
  try
    Bmp.LoadFromFile('img0.bmp');
    Bmp.Transparent := True;
    Gif.Add(Bmp);
    Bmp.LoadFromFile('img1.bmp');
    Bmp.Transparent := True;
    Gif.Add(Bmp);
    Bmp.LoadFromFile('img2.bmp');
    Bmp.Transparent := True;
    Gif.Add(Bmp);
    Bmp.LoadFromFile('img3.bmp');
    Bmp.Transparent := True;
    Gif.Add(Bmp);

    // add netscape loop if we want animation to keep repeating
    TGIFAppExtNSLoop.Create(Gif.Images.Frames[0]).Loops := 0;
    Gif.Pack;
    Gif.SaveToFile('test.gif');
  finally
    Bmp.Free;
    Gif.Free;
  end;
end;

end. 
```

确保保存的位图与项目的 exe 位于同一文件夹中（或更改文件名路径），然后运行项目以创建输出 gif。

保存的输出不正确。从上面保存的企鹅位图中，我得到了这个保存的 Gif：

![在此处输入图像描述](../Images/81e5652e771265d5f6e44309e1c976de.png)

您可以看到帧相互重叠，或者正在发生一些时髦的事情！这个 gif 文件的来源可以从这里找到：[http ://www.animated-gifs.org.uk/agif/ani02.gif](http://www.animated-gifs.org.uk/agif/ani02.gif)

我没有使用 Gif 中的所有帧，因为有这么多，但你可以看到它在动画时应该如何工作。

请注意，并非每个 gif 都会发生这种情况，似乎只有少数几个会像这样保存。另一个例子是尝试这些位图而不是企鹅：

![在此处输入图像描述](../Images/69ce33629b11caecff4e66498d0ce923.png)

![在此处输入图像描述](../Images/d3bca9c6cffc9f64bd7804afc97c86b1.png)

![在此处输入图像描述](../Images/d9fec95791af479548b0144dea151e97.png)

![在此处输入图像描述](../Images/7189660911efd57a78e70d26114051fd.png)

结果是：

![在此处输入图像描述](../Images/cd430d5427cdf14c1f075807c89aefa2.png)

应该是（注意飞机上的火焰）：

![在此处输入图像描述](../Images/46050268280f4cb59f1965e4a43255e9.png)

简而言之，我需要从一系列位图中保存一个 Gif，使其与打开时的状态相同。您可以从上面的示例位图中看到与实际图像数据没有不一致，所以这让我相信这与将它们添加到 gif 中的方式有​​关。

如果我确实需要 TGIfRenderer 我不知道如何实现它来保存，我一直认为它只是为了加载？

这是我无法解决的问题之一。我一直在尝试更改透明度、颜色和模式等，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:25:54.130

我不是 GIFImg 或 gif 图像的专家，但问题似乎与帧的处理有关。在 'GIFImg.pas' 中搜索 'disposal'，我想出了以下似乎适用于您的测试图像的内容：

```
....
Gif.Add(Bmp); // last frame

for i := 0 to Gif.Images.Count - 1 do
  for j := 0 to Gif.Images[i].Extensions.Count - 1 do
    if Gif.Images[i].Extensions[j] is TGIFGraphicControlExtension then
      TGIFGraphicControlExtension(Gif.Images[i].Extensions[j]).Disposal :=
          dmBackground;
... 
```

# c++ - 从 R 调用 C++

> ID：11459570
> 
> 赞同：1
> 
> 时间：2012-07-12T19:52:32.447
> 
> 标签：c++, visual-studio-2010, r, visual-c++

我正在使用 Visual Studio 创建我的 C++ DLLS。一个示例 C++ 函数是

```
void _stdcall MyFunc(char ** strInput)
{
   MessageBox(NULL,"Hi from C++", L"C++ program", NULL);
} 
```

然后我可以通过执行以下操作从 R 调用此函数

```
dyn.load("Path\myDll.dll")
.C("MyFunc","Hello") 
```

当从 R 64 位调用时，上面的代码工作正常。但是，当我将我的 DLL 编译为 32 位 DLL 并从 R 32 位调用它时，它会在短暂显示消息框后崩溃。我知道我的 DLL 正在工作并且是一个有效的 32 位 DLL，因为我可以毫无问题地从其他程序调用它的函数。你知道为什么当 R 64 位可以毫无问题地处理同一个调用时，为什么 R 32 位会崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:23:21.377

^(从评论转贴：)

Replace `_stdcall`with `__cdecl`– x64 有一个单一的通用调用约定，但 x86 没有，而且您显然使用了错误的约定。

# algorithm - 不了解“算法设计手册”中的最接近对启发式

> ID：11459571
> 
> 赞同：26
> 
> 时间：2012-07-12T19:52:35.737
> 
> 标签：algorithm, graph-theory

几乎完全相同的[问题](https://stackoverflow.com/questions/7216755/what-is-the-meaning-of-from-distinct-vertex-chains-in-this-nearest-neighbor-al/7216814#comment15114654_7216814)。但我仍然不明白，这种启发式方法是如何工作的，以及顶点以什么顺序通过。书中还有一张图：![在此处输入图像描述](../Images/3bf3d7efe930e5cb00eac0aa75aaa8f4.png)

这显示了最近邻启发式和我认为是最近对启发式的比较。从图中我可以假设在上图中，首先选择了 0 点，但在下图中，选择了最左边或最右边的点。因为没有任何关于第一个点选择的说明（最近对启发式也没有做任何动作），我可能会假设任何算法的结果无论多么好它都不会给你底部的图片，如果它没有考虑一下，从什么开始。

现在我只想知道，最近对启发式的步骤是什么。一张类似于底部的图片，带有与每次迭代相关的数字以及解释，将不胜感激。

这是从该帖子中获取的书的[链接。](http://www.cs.sysu.edu.cn/~lxm/DSA/textbook/Skiena.-.TheAlgorithmDesignManual.pdf)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T20:06:01.903

我没有这本书，但它显示了最近邻启发式与该数据的最佳解决方案的比较。此处显示的数据为 (-21, -5, -1, 0, 1, 3, 11)。

混淆可能在“局部”贪心算法和“全局”贪心算法之间（因为没有更好的词）。上面显示的最近邻居是严格本地的。“机器人”从 0 开始，选择走到 1，因为它是最近的路径。机器人在 1，并找到下一个最近点是 -1。然后机器人在-1，下一个最近的点是3，依此类推。

最接近的对更具全局性。它同时查看所有最佳边缘。因此，该算法从 0 开始，并找到四个恰好相隔 1 个单位的 (0, 1)、(1, 0)、(-1, 0) 和 (0, -1)。它将添加两个不同的对来创建图形 (-1, 0, 1)。这可以是定向的或非定向的。

然后它会重复，并注意到 (1, 3) 是下一个最小的边，依此类推，直到它到达最优解。

不同之处在于，在最近邻的情况下，机器人只能查看其当前所在位置的邻居。在最近对的情况下，您可以查看所有边以选择最小的边。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-11-23T20:26:35.070

我同意这在书中不是很清楚（这有点令人沮丧，因为读者马上就会遇到它——我的版本中的第 7 页）。

我认为这里的困难不在于*最近对启发式*本身。关键是要注意启发式方法本身并不是问题的解决方案！只有算法的一部分（可以说是最重要的部分）在书中从未完全描述过（可能是因为这是一个错误的算法）。使用启发式，您可以获得应该连接的顶点对，但不是它们应该连接**的顺序。**为此，需要更多的东西。

为了完整起见，这是书中的问题陈述

> *问题*：机器人漫游优化
> 
> *输入*：平面上*n*个点的集合*S*
> 
>  **输出：访问集合**S*中每个点的最短循环旅行是多少*

 **现在，*最接近对启发式*，如书中定义并在[此处](https://stackoverflow.com/questions/7216755/what-is-the-meaning-of-from-distinct-vertex-chains-in-this-nearest-neighbor-al/7216814#comment15114654_7216814)引用，只为您提供一组连接/列表，而不是游览本身，因此不是所需的解决方案。要获得游览，您将不得不做更多的事情。使用此策略的整体（有缺陷！）解决方案如下所示：

```
1) Initialize the output list of vertexes to visit as the empty list (call it RET).
2) Obtain the list of connections (vertex pairs) given by ClosestPair (let it be L)
3) If L is empty, jump to 12
4) Remove an arbitrary connection from L (call it C1).
5) Choose an arbitrary vertex from C1 (call it V1)
6) Append V1 to RET
7) Remove from L the other connection that contains V1 (call it C2)
8) Choose the other vertex from that connection (call it V2)
9) append V2 to RET
10) Set V1=V2
11) If L is not empty, jump back to 7
12) return RET 
```

或者在伪代码中

```
Alg(P): # P is the input set of points
    RET = []
    L = ClosestPairs(P)
    if(L.empty()):
        return RET
    C1 = L.getAndRemoveRandomElement()
    V1 = C1.getRandomVertex()
    RET.append(V1)
    while(!L.empty()):
        C2 = L.getAndRemoveElementContaining(V1)
        V2 = C2.getTheOtherVertex(V1)
        RET.append(V2)
        V1 = V2
    return RET 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-07T02:59:38.770

我在理解这个启发式时遇到了同样的问题，我的回答可能会帮助其他面临同样问题的人。

机器人需要的是一个封闭的路径，它访问**所有**的点并循环回到它的**原始**位置。有一个声明提到过早终止，它坚持认为路径应该是完整的（访问所有点，即我们不应该加入一些顶点对，这样它们会创建一个更小的封闭路径）。

现在通过下面的例子

![图 1.3](../Images/24651a0967215747e40ac605d8d3c79c.png)

在这里，通过使用最近对启发式，我们将找到一条连接一条线上所有点的路径，然后将剩余的端点相互连接（-21，11）。因此，无论机器人从 0 还是 -21 或 11 开始，它都将行进相同的距离（它将绕回其起始位置进行下一次迭代）。这个距离将是最佳距离。

但上述方法在以下情况下失败

![图 1.4](../Images/c3da171806e8db21ac81afd0fed02418.png)

这里最接近的对路径原来是左边的图像，而最佳路径应该是右边的图像，因此启发式无法给出正确的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-30T13:54:59.093

TL; DR - 据我了解，“坏”方法将越来越远的未访问点直接相互连接，在多个弧中浪费更多焊料，并最终将最后一个点连接回第一个点“0”。

“更好”的方法一次从中心向外移动 1 点在任一方向上，因此仍然来回移动，但仅在沿“数字线”的直接相邻点之间铺设焊料。

单个静态图像中的插图和解释确实不清楚。他没有解释虚线的含义（它是焊接的吗？只是运动吗？似乎不一致）。同意在本应是“清晰”的算法书中这么早遇到这令人沮丧......

“最近的邻居”和“最近的对”示例似乎都在点 0 上来回“跳房子”，这是第一种方法不好的原因。他甚至说第二种方法也应该左右交替，那怎么更好呢？因为您只将相邻的点直接连接起来，逐步构建完整的线。

“坏”的例子（据我所知）：

```
1\. 0 connects to 1
2\. 1 jumps over 0 & connects to -1
3\. -1 jumps over 0 & connects to 3
4\. 3 jumps over 0 & connects to -5
5\. -5 jumps over 0 & connects to 11
6\. 11 jumps over 0 & connects to -21
7\. -21 connects back to 0, completing the cycle. 
```

这些“跳房子”来回超过0，但不要将点连接在一条直线上。你结束了 w/6 不同的焊接连接“线”。

“更好”的最接近配对示例：

```
1\. 0 connects to 1.
2\. 0 connects to -1
3\. 1 connects to 3
4\. -1 connects to -5
5\. 3 connects to 11
6\. -5 connects to -21
7\. -21 connects to 11 
8\. Unstated, the robot arm apparently travels back to 0 afterward? 
```

这些也可以在 0 上来回移动，但在每一步将现有直线一次递增地延伸一个点。而不是 6 弧焊料，大部分都有一条线，然后是最外端点的第二个连接。**

# python - Tkinter Frame 调整一个轴的大小

> ID：11459572
> 
> 赞同：1
> 
> 时间：2012-07-12T19:52:39.507
> 
> 标签：python, resize, tkinter

我有一个 tkinter 框架，我想在 Y 轴上自动调整大小，但在向其添加标签小部件时保持恒定宽度。

为了保持我正在使用的 X 大小不变，`grid_propogate(False)`但这会使整个东西保持不变的大小。

如何设置框架以这种方式调整大小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:37:50.497

好的，想通了

制作了一个更大的框架，它包含了我的框架在最大化和使用时可以填充的空间`pack(fill=X`），`pack_propagate(False)`并使内框架符合外框架的 X 尺寸而不改变它。然后我可以根据需要向内框添加线条，并保持它的 X 大小：

```
OuterFrame = Frame(root, height=500, width=400)
InnerFrame = Frame(OuterFrame, borderwidth=3, relief=RAISED)
InnerFrame.pack(side=TOP, fill=X)

# stuff that goes in the y-resizing InnerFrame

OuterFrame.pack_propogate(False)
OuterFrame.pack() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:12:50.417

这对我来说似乎是一个非常丑陋的解决方案，（希望有人会提出更好的解决方案）：

```
import Tkinter as tk
root=tk.Tk()
f=tk.Frame(root,width=100,height=300)
f.grid_propagate(False)
f.grid(row=0,column=0)
def resize(evt):
    f.update_idletasks()
    height=f.winfo_reqheight()
    f.grid_propagate(False)
    if(evt.width!=100) or (evt.height!=height):
        f.configure(width=100,height=height)
    print "HERE", evt.width,height

f.bind('<Configure>',resize)

#Just some stupid (ugly) code to update the size of the widget at runtime.
def add_label():
    f.grid_propagate(True)
    lbl=tk.Label(f,text='   %d                   Hello!'%(add_label.row))
    lbl.grid(column=0,row=add_label.row)
    add_label.row+=1

add_label.row=0

b=tk.Button(root,text="Add label",command=add_label)
b.grid(row=1,column=0)
root.mainloop() 
```

# iphone - 无法将 UIBarbutton 设置回默认色调

> ID：11459574
> 
> 赞同：16
> 
> 时间：2012-07-12T19:52:43.613
> 
> 标签：iphone, xcode, ipad, uibarbuttonitemstyle

如果我更改 UIBarbutton 的色调，如何将其重置为默认色调。

在这里，我为按钮设置了自定义色调...

```
examCancelButton.style = UIBarButtonSystemItemCancel;
examCancelButton.tintColor = myRedButtonTint; 
```

然后稍后我需要将其设置回它的默认样式和色调。所以我认为只需将样式设置为 UIBarButtonItemStyleDone 就可以做到这样......

```
examCancelButton.style = UIBarButtonItemStyleDone; 
```

但颜色仍然是红色。我可以自己将其设置为漂亮的蓝色，但我想获得 UIBarButtonItemStyleDone 按钮的默认颜色。这可能吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T19:57:21.083

`examCancelButton.tintColor = nil;`

# php - 使用 PHP 为 Apple 通讯录创建 .vcf（如何构建 UUID）

> ID：11459575
> 
> 赞同：1
> 
> 时间：2012-07-12T19:52:45.260
> 
> 标签：php, macos, vcf-vcard

我将构建一个与 Mac OS X 内部地址簿应用程序同步的在线地址簿。我使用著名的 Baikal (http://baikal.codr.fr/) 服务器来连接两个应用程序（web 应用程序和 mac os x 应用程序）。

现在我想在线添加联系人（联系人文件基于 sqlite 数据库），但我不知道如何为 Apples .vcf 卡创建 UUID。它们看起来像这样：

```
BEGIN:VCARD
VERSION:3.0
PRODID:-//Apple Inc.//Address Book 6.1.2//EN
N:Test;Test;;;
FN:Test Test
REV:2012-07-09T20:19:39Z
UID:036f8e50-4b4d-49e1-82fb-089181227b15
END:VCARD 
```

有谁知道，我如何为 .vcf 文件创建 UUID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:56:44.687

首先，Apple 的地址簿不需要任何特殊的 Apple-.vcf-Card，而是使用通用的 vCard 进行地址交换。

您应该能够使用任何唯一标识符作为“UID”。其目的是识别一张卡是唯一的，以便您可以将相同的 UID 用于第二张卡，这将更新第一张卡的内容（例如，当用户更改姓名或地址更改时）。

我什至不确定它是否必须是 UUID，它必须是唯一的。因此，您可以使用众多 UUID 生成器之一（向您最喜欢的搜索引擎询问一个）或在这里查看：[PHP function to generate v4 UUID](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)

看看 vCard-RFC 可能也是一个好主意（[RFC 2426](http://www.ietf.org/rfc/rfc2426.txt)）

# javascript - node.js 服务器和客户端 sideo 代码连接

> ID：11459576
> 
> 赞同：0
> 
> 时间：2012-07-12T19:52:49.293
> 
> 标签：javascript, postgresql, node.js

我试图建立一个 node.js 服务器来向客户端发送消息，然后它将使用 jquery 通知库显示消息，如果有人感兴趣，我正在使用这个通知库：http: [//needim.github.com/通知/](http://needim.github.com/noty/)

此刻，我有一个 postgres 数据库，该数据库设置了一个表，该表上有一个触发器以写入侦听器。

触发器如下：

```
CREATE OR REPLACE FUNCTION new_noti() RETURNS trigger AS $$
DECLARE
BEGIN
    PERFORM pg_notify('watchers', TG_TABLE_NAME || ',msg,' || NEW.msg );
    RETURN new;
END; 
$$ LANGUAGE plpgsql; 
```

然后我有一个 node.js 服务器，如下所示：

```
var pg = require ('pg');

var pgConString = "pg://aydin:password@localhost/test"

var app = require('http').createServer(handler)
    , io = require('socket.io').listen(app)
    , url = require('url')

app.listen(8080);

function handler (request, respsonse) {
    var client = new pg.Client(pgConString);
    client.connect();
    client.query('LISTEN "watchers"');
    client.on('notification', function(msg) {
        console.log(msg.payload);
        sendMessage(msg.payload);
    });
}

function sendMessage(message) {
    io.sockets.emit('notification', {'message': message});
} 
```

然后我有一些客户端代码如下：

```
<script type="text/javascript">
    var socket = io.connect('http://localhost:8080');
    socket.on('notification', function (data) {
        console.log(data.message);
        newNoty(data);
    });

    function newNoty(data) {
        noty({
            "text":data.message,
            buttons: [{
                type: 'button green',
                text: 'Go to' 
            }],
            "theme":"noty_theme_twitter",
            "layout":"bottomRight",
            "type":"information",
            "animateOpen":{
                "height":"toggle"
            },
            "animateClose":{
                "height":"toggle"
            },
            "speed":500,
            "timeout":7500,
            "closeButton":true,
            "closeOnSelfClick":true,
            "closeOnSelfOver":false,
            "modal":false,
        });
    }
</script> 
```

这不起作用，似乎 node.js 从未收到 postgres 通知，我认为这是因为我正在使用函数处理程序，而我实际上并没有从客户端代码向它发出任何请求。我不确定如何做到这一点以及它是否是正确的方法？是否有可以在连接而不是请求时触发的功能？

我什至以正确的方式做事吗？node.js 向其发送消息的客户端是否应该有服务器？它如何知道客户何时可用？任何帮助或指导教程将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:58:40.343

在客户端发送 HTTP 请求之前，您实际上并没有设置数据库连接。由于同源问题（您的客户端代码似乎来自您显示的服务器以外的其他地方），这看起来可能永远不会发生。

在任何情况下，您可能希望建立连接以响应`"connection"`来自的事件`io.sockets`（即，将当前位于 HTTP 请求处理程序中的内容移动到那里）。这就是它“知道客户何时可用”的方式。或者，也许您应该将其作为初始化的一部分。您的客户端代码看起来不错，但它与上下文无关，因此很难判断它是否真的符合您的需求。

# script# - 为什么在使用来自另一个 .NET 程序集的 Script# 程序集时会出现 MissingMethodException？

> ID：11459579
> 
> 赞同：0
> 
> 时间：2012-07-12T19:53:10.793
> 
> 标签：script#

我现在正在测试 Script#，并创建了一个带有单个类的简单 Script# 类库。

该类有一个方法可以执行以下操作：

```
public static string[] SplitName(string name)
{
    return name.Split(' ');
} 
```

它编译得很好并生成了 JS 输出文件，但是当我从我的 NUnit 项目中引用这个程序集并尝试对其进行测试时，会抛出一个 MissingMethodException 。

```
System.MissingMethodException : Method not found 'System.String[] System.String.Split(Char)'. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:51:19.250

请记住，即使它是有效的 .net 程序集，它也会引用自定义 mscorlib.dll。看看我对你其他问题的回答，看看我是怎么做的。[是否可以用 C# 编写代码并使用 Script# 在 .NET 程序集和 JavaScript 之间共享它？](https://stackoverflow.com/questions/11460012/is-it-possible-to-write-code-in-c-sharp-and-use-script-to-share-it-between-net)

# objective-c - CFArrayGetValueAtIndex 不返回任何东西

> ID：11459580
> 
> 赞同：0
> 
> 时间：2012-07-12T19:53:13.550
> 
> 标签：objective-c, c, arrays

我有一个*非常*简单的代码片段来获取一个使用的应用程序支持目录。问题是，它不起作用！我在 a 中获取值`CFArrayRef`（因为我想使用 C 代码，因为稍后我将在 C++ 应用程序中使用此代码段）并尝试使用`CFArrayGetValueAtIndex()`. 我使用 C 样式转换将返回的转换`void*`为 a`char*`并尝试使用 输出它`printf()`，但没有输出任何内容！谁能解释为什么？我已经通过文档在线查看`CFArray`并尝试用谷歌搜索该问题，但一无所获。任何帮助将非常感激！

代码：

```
#include <Foundation/Foundation.h>
#include <typeinfo>

int main (int argc, const char * argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    CFArrayRef array = \
      (CFArrayRef)NSSearchPathForDirectoriesInDomains(
                        NSApplicationSupportDirectory, 
                        NSUserDirectory, 
                        YES);
    char* string = (char*)CFArrayGetValueAtIndex(array, 0);
    printf("string: %s\n", string);
    [pool drain];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T19:57:26.440

你为什么要把它转换成一个`char*`？结果数组`NSSearchPathForDirectoriesInDomains()`包含`CFStringRef`s，而不是`char*`s。

尝试使用`CFShow((CFTypeRef)CFArrayGetValueAtIndex(array, 0));`

# javascript - 使用 jQuery 增加计数器的时间

> ID：11459584
> 
> 赞同：0
> 
> 时间：2012-07-12T19:53:22.773
> 
> 标签：javascript, jquery, time

所以我有一个时间戳（字符串）以这种格式显示在页面上：`1h 49m 58s ago`

每一秒，我都希望它增加时间戳+1秒。然后在一分钟结束时，添加分钟并重置秒，添加小时，重置分钟，等等......

所以我猜我需要在数字处拆分字符串，找出需要增加或重置的数字，执行 .replace() 并将其添加回 DOM。

这是我所拥有的，但我有点陷入僵局，有什么建议吗？

```
setInterval(function(){
    $('.timestamp-large').each(function(){
        theData = $(this).html().split()
        console.log(theData)
    });
},1000) 
```

# ruby - 从ruby中的字符串中提取文本

> ID：11459586
> 
> 赞同：0
> 
> 时间：2012-07-12T19:53:35.773
> 
> 标签：ruby

我看到了一些[解决方案](https://stackoverflow.com/questions/4115115/extract-substring-from-string-ruby)并提出了以下代码。我想要的结果是**100.02**。所需的结果始终在**“我的启动持续时间=”**和**“分钟”之间**

```
mystring ='2012-07-11 22:30:33,536  INFO: 00/00/164/ABCTimeTest: my launch duration= 100.02 mins|z-vndn'
mypattern = /^.*=([^mins]*)/
subst = mystring.match(mypattern)
puts subst 
```

**使用上述代码输出：** 2012-07-11 22:30:33,536 信息：00/00/164/ABCTimeTest：我的启动持续时间= 100.02

我的模式有什么问题？用我对这种模式的理解纠正我。

```
#/
#^.*=             ## move from start till = (now I have reached till '=')
#([^mins])        ## capture somethings that starts with mins (thats my 100.2)
#/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:57:44.473

这对我来说可以。不要`puts subst`，因为`subst`包含`MatchData`对象。捕获在内部`$1`或`subst[1]`。

```
mystring ='2012-07-11 22:30:33,536  INFO: 00/00/164/ABCTimeTest: my launch duration= 100.02 mins|z-vndn'
mypattern = /^.*=([^mins]*)/
subst = mystring.match(mypattern)

# Contains extra whitespace, so call .strip
puts $1.strip
# 100.02

# Or ...
puts subst[1].strip
# 100.02 
```

要获得`100.02`没有额外空格的 ，您可以使用以下内容：

```
mypattern = /^.*=\s*([^\smins]*)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T19:58:54.753

您的模式是正确的，但您没有正确使用结果。`subst`是一个匹配对象，而不是捕获的内容。你想要的是：

```
# Show first captured result
puts subst[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:00:24.137

`[^mins]`不匹配任何不是确切字符串的字符序列`mins`。它实际上意味着一个不是“m”、“i”、“n”或“s”的单个字符。

要匹配所需的文本，请尝试以下操作：

`/my launch duration= ([0-9.]*) mins/`

这意味着匹配一个 0-9 的序列和一个句点任意次数，但它必须在`my launch duration=`和之间`mins`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:46:05.803

我会使用一些简单的东西，例如：

```
mystring ='2012-07-11 22:30:33,536  INFO: 00/00/164/ABCTimeTest: my launch duration= 100.02 mins|z-vndn'
mystring[/(\S+) mins/, 1] # => "100.02" 
```

# active-directory - 如何在 WiX 中创建本地组并向其添加活动目录用户

> ID：11459591
> 
> 赞同：1
> 
> 时间：2012-07-12T19:54:02.460
> 
> 标签：active-directory, wix

我正在尝试创建一个新的本地组，然后在通过 WiX 安装期间将当前登录的 Active Directory 用户添加到该组。

我有两个部分工作，但不是同时工作......所以我可以使用[Wix UserPrivileges Extension](http://dblock.github.com/msiext/)创建一个组，如下所示：

```
<Component Id="LocalSQLAdminGroupComponent" Guid="MYGUID" KeyPath="yes">
            <userPrivileges:LocalGroup Id="LocalSQLAdminsGroupCreate" Name="LocalSQLAdmins" 
                                       Description="Members of this group are designated as sql admins for the ISFS SQL Express instance." 
                                       CheckIfExists="yes" 
                                       CreateOnInstall="yes" 
                                       /> 
```

但是，当我添加它以将用户添加到 AD 中的组时（为什么我不能使用 userPriviledges:User 元素，因为它只适用于本地用户），安装程序出错，因为在 GroupRef 尝试分配之前尚未创建组组的用户。

```
<util:Group Id="LocalSQLAdminsGroup" Name="LocalSQLAdmins"/>
...
<util:User Id="ADUser" Domain="[%USERDOMAIN]" Name="[%USERNAME]">
   <util:GroupRef Id="LocalSQLAdminsGroup"/>
</util:User> 
```

有没有办法可以确保在 GroupRef 尝试将其添加到组之前创建组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:00:37.150

我不确定这是否可行，但您可以尝试一下。

该`<userPrivileges:LocalGroup>`元素会导致在[`InstallExecuteSequence`](http://wix.sourceforge.net/manual-wix3/wix_xsd_installexecutesequence.htm). 据我所知，它被称为`CreateLocalGroups_Deferred`. 类似地，该`<util:User>`元素会产生一个名为 的自定义操作`CreateUser`。

您应该尝试在表格中的`CreateUser`自定义操作之后安排自定义操作。您可以使用元素的,和属性来做到这一点。`CreateLocalGroups_Deferred``InstallExecuteSequence``Before``After``Sequence`[`<Custom>`](http://wix.sourceforge.net/manual-wix3/wix_xsd_custom.htm)

我可能对上面的确切名称有误，但我希望你能明白。

# asp.net-mvc-routing - MVC 4 Web API 的路由？

> ID：11459596
> 
> 赞同：1
> 
> 时间：2012-07-12T19:54:26.423
> 
> 标签：asp.net-mvc-routing, asp.net-mvc-4, asp.net-web-api

在我最初尝试创建 MVC4 Web API 时。我注意到关于路由处理方式的一些事情似乎有点不对劲：

*   控制器不再有超过 4 个动作？
*   仅支持一个 HTTP 动词的资源仍然拥有它自己的控制器？
*   路线层次往往非常平坦，或者
*   与人类的 MVC 应用程序相比，必须指定/维护大量的路由。

我已经创建了相当大的站点，只使用了两到三个路由，但我刚刚开始使用我的 API，而且我已经接近十几个。我想 API 从本质上来说更适合于比网站更深的 URL，但这似乎有点过分了。

我觉得我在某处缺少命名空间或路由约定。我几乎将所有这一切都归因于动作名称不再是路由的一部分，只是 HTTP 方法的一部分。除了参数匹配、控制器名称和 HTTP 方法之外，还有其他方法支持路由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:27:24.463

您可以在 Global.asax 中修改路由。默认设置为：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional } 
```

但是您可以将其更改为例如使用操作名称：

```
routes.MapHttpRoute(
name: "ActionApi",
routeTemplate: "api/{controller}/{action}/{id}",
defaults: new { id = RouteParameter.Optional } 
```

有关 MVC WEB API 中自定义路由的更多信息，请查看这篇[文章](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)。

***根据评论更新***

以上是对“我可以更改路由吗？”问题的答案。简短的回答是肯定的，但正如在另一个答案中指出的那样，您可能不想维护一个好的 REST API。带有默认路由的 MVC Web API 维护您正在处理资源的基本 REST 概念，控制器代表资源。在您的另一个问题中，您举了一个例子：

```
DELETE /account/1234/note/321 <- delete note 321 on account 1234 
```

您要删除帐户 1234 上的注释的位置。在这种情况下，您正在处理的资源是注释。对此更好的表示是使用查询字符串，因此本示例的 API 如下所示：

```
DELETE /note/321?account=1234 <- delete note 321 on account 1234 
```

这样您就不需要弄乱路由，并且很明显，被操作的资源是使用过滤器的注释。但是我也会质疑如果 note 的 id 对于整个应用程序而不只是特定帐户是唯一的，是否有必要添加这个显式过滤器（即 where 子句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:18:08.650

Web API 是为 RESTFull 服务设计和定制的，将控制器视为服务名称。按照约定，GET/PUT/POST/DELETE 映射到名称包含动词的控制器操作。

如果你不想做一些 RESTFull 的事情，那么我会使用 HTTPController 来代替。正如您可能注意到的那样，您可以将它们混合在同一个项目中并使用不同的路线。

# python - 文件中的 Python Unicode

> ID：11459597
> 
> 赞同：1
> 
> 时间：2012-07-12T19:54:30.633
> 
> 标签：python, unicode

我无法掌握 Python 如何处理文件中的 Unicode ......

```
f = open('test.txt', 'w')
f.write('abc')
f.close() 
```

这给出了一个 3 个字节的文件。

```
f = open('test.txt', 'w')
f.write('abcé')
f.close() 
```

这给出了一个 5 个字节的文件（é 占用两个字节，但 Python 怎么知道它必须在那里读取 2 个字节？）

```
f = open('test.txt', 'w')
f.write('abcそ')  # a Japanese character
f.close() 
```

这给出了一个 6 字节的文件（そ 占用了 3 个字节，但是 Python 怎么知道它必须在那里读取 3 个字节？）

所以我可以理解 Unicode 需要两个字节，但有时是 1、2 或 3 个字节，我看不出它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:00:11.023

默认情况下，它使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码写入输出文件，这是一种可变长度编码：它使用 1 个字节编码 ASCII 字符（代码点 U+0000-U+007F），代码点 U+0080-U +07FF（包括拉丁语 1 字符，例如 é）使用 2 个字节，码位 U+0800-U+FFFF（包括中文和日文字符，例如 そ）使用 3 个字节，码位 U+10000-U+ 10FFFF 使用 4 个字节。

如果你想使用不同的编码，比如 UTF-16，你可以[`str.encode`](http://docs.python.org/library/stdtypes.html#str.encode)使用你想要的编码：

```
# Save the string as UTF-16 little-endian
f = open('test.txt', 'w')
f.write(u'abcそ'.encode('utf-16le')  # Output will be 8 bytes
f.close() 
```

# google-apps-script - 从多维数组中删除逗号

> ID：11459598
> 
> 赞同：0
> 
> 时间：2012-07-12T19:54:30.880
> 
> 标签：google-apps-script

当我将逗号写入谷歌电子表格中的单元格时，我在从数组中删除逗号时遇到了一些麻烦。array.join(''); 似乎没有奏效。我将不胜感激任何帮助。此外，anchor[i][j].join('') 返回错误。

这是一段代码：

`anchor[i][j].join('')`返回错误

`anchor[i].join('')`似乎没有效果。

```
for (var i=0; i(less than) rangeKW.length-2;i++){

anchor[i] = [];

   for (var j=0; j<rangeURL.length;j++){

     anchor[i][j] = ahref + rangeKW[i] + ahref1 + rangeURL[j] + "</a>|";      

    }       
  }    
 cell.setValue("{" + anchor);      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:30:12.513

假设你有

```
 var x = [[1,2,3],[4,5,6]] 
```

然后这些行中的任何一条都会给你“123456”：

```
 Array.prototype.concat.apply([], x).join('')
  x.map(function(a){ return a.join(''); }).join(''); 
```

第一个构造数组 [1,2,3,4,5,6] 然后加入它。第二个首先加入每个内部数组，构造 ["123", "456"] 然后加入它。我认为第一个可能会更高效一些，虽然我们在这里谈论的是花生，但是如果你想在行和列之间放置一些不同的东西，第二个给你更多的控制。

在这两种情况下，这都不会改变 x 中的原始值。如果这是您想要的，您可以将新值分配给 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:35:01.923

`array.join()`适用于“正常”数组，正常我的意思是 1 维并适用于数组本身，而不是单个元素（[i][j] 上的错误），除此之外我真的不明白你想要做什么和您的代码如何与您的问题相关...

关于`anchor[i].join('');// doesn't seem to have an effect.`我不知道那里有多少元素以及它们的外观，但语法是正确的。如果要将其设为 CSV 字符串，也可以使用 toString()。

**编辑：（** *感谢评论中的信息。）*

我认为最简单的方法（或者至少是最清晰的方法）是创建几个新变量，您可以分别记录这些变量以查看究竟发生了什么。

例如

```
var anchorString = anchor[i].join(); // or toString() they both return strings from 1D arrays
Logger.log(anchorString) 
```

如果锚的每个索引 i 都必须在同一个单元格中，那么在 i-loop 中这样写：

```
var anchorString += anchor[i].join(); 
Logger.log(anchorString) 
```

# php - 动态行垂直向下并在六行后创建列

> ID：11459601
> 
> 赞同：3
> 
> 时间：2012-07-12T19:54:38.873
> 
> 标签：php

我正在尝试创建这样的动态行：

[1] [7] [13]

[2] [8] [14]

[3] [9] [15]

[4] [10]

[5] [11]

[6] [12]

目前，我的输出如下：

[1] [2] [3]

[4] [5] [6]

[7] [8] [9]

[10] [11] [12]

[13] [14] [15]

我想在创建另一列之前按字母/数字向下输出 6 行。下面的代码用于在一行中创建 3 个数据，然后为另外 3 个数据创建另一行，依此类推。对于无法附上我喜欢输出的图像，我深表歉意。

```
<?php

$query = "SELECT name FROM categories WHERE parent_id=1 ORDER BY order_id ASC";
$result = mysql_query($query) or die ("Query failed");

$numrows = (mysql_num_rows ($result));

if($numrows >0){
echo "<table width = 100% border = '0' cellspacing = '2' cellpadding = '0'><tr>";

for ( $i = 0; $i <= 3; $i++) 
{

    echo "<td width='33%'>";

    while ($friendList = mysql_fetch_array($result)){

     $end = '<div class="left">'.$friendList['name'].'</div>'; 
      if ( isset($friendList[$j+6] )) 
      { 
        $end = '<div class="right">'.$friendList[$j+6].'</div>'; 
      } 
     echo $end."\n"; 

    }
    echo "</td>";
}
echo $end."</tr></table> ";

}

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-12T23:45:26.370

既然您知道返回的行数`$numrows`，那么您可以利用它来预先构建您的表格并在您完成循环记录后进行组装。

```
$maxRows = 6;
$numCols = ceil($numRows / $maxRows); 
```

在构建表期间，您将遍历返回的值并将输出分配给数组。添加完所有记录后，您将组装并输出表格。

*注意：您需要确保您的记录在查询中正确排序，因为编号仅用于索引。*

```
<?php

$numRows = 41;
$maxRows = 6;
$numCols = ceil($numRows / $maxRows);

$records = array();

for($i=1; $i <= $maxRows; $i++){
    $records[$i] = array();
}

for($i=1; $i <= $numRows; $i++){
    $row = ($i % $maxRows == 0 ? $maxRows : $i % $maxRows);
    $records[$row][]  = "[$i]";
}

$table = ['<table>'];

for($i=1; $i <= count($records); $i++){
    $row = ['<tr>'];
    $col = $records[$i];

    for($j=0; $j < count($col); $j++){

        /*
         * Begin modification area:
         * 
         * You would change the value of $col[$j] to reflect the desired 
         * output within each cell.
         */

         $output = $col[$j];

        /* End modification area */

         $row[$j+1] = '<td>' . $output . '</td>';
    }
    array_push($row, '</tr>');
    $table[$i] = implode('', $row);
}

$table[$i++] = '</table>';
echo implode('', $table);

?> 
```

**输出：**

```
[1] [7]  [13] [19] [25] [31] [37] 
[2] [8]  [14] [20] [26] [32] [38] 
[3] [9]  [15] [21] [27] [33] [39] 
[4] [10] [16] [22] [28] [34] [40] 
[5] [11] [17] [23] [29] [35] [41] 
[6] [12] [18] [24] [30] [36] 
```

# javascript - InDesign CS5 脚本：如何在“n”秒后打开和关闭弹出窗口？

> ID：11459602
> 
> 赞同：0
> 
> 时间：2012-07-12T19:54:42.833
> 
> 标签：javascript, window, adobe-indesign, adobe-scriptui

窗口打开正常，但在手动关闭弹出窗口之前脚本**不会继续！**这是不可取的，因为我宁愿窗口在  `n`  几秒钟后自行关闭......

那么我是否必须在脚本其余部分的单独线程中打开窗口？这甚至可能吗？

到目前为止，这是我的代码：

```
function showMessageWindow()
{
    var script = getScriptName(); // initialized from the function below
    var message = new Window("dialog", script);
    message.add("StaticText", undefined, "The script " + script + " is now running, please wait...");

    message.show();

    var startTime = new Date().getTime(); // in milliseconds
    var currentTime = new Date().getTime(); // in milliseconds
    var waitTime = 5000; // 1000 milliseconds is 1 second

    var delay = function()
    {
        while( (currentTime - startTime) < waitTime)
        {
            currentTime = new Date().getTime(); // in milliseconds
        }
    } // end of closure delay

    delay(); // calling the delay closure function here
    message.close(); // close the message after the specified delay time

} // end of function showMessageWindow

    // called from the function showMessageWindow
    function getScriptName()
    {
        var scriptName = "";

        try
        {
            scriptName = File(app.activeScript).name;
        }
        catch(e)
        {
            scriptName = File(e.fileName).name;
        }

        return scriptName;
    } // end of function getScriptName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:46:39.600

对话框类型窗口是阻止任何后台操作的模式对话框。但是，即使使用非模态窗口，我也不确定您是否可以从同一个脚本中并行执行这两个例程。我很确定脚本引擎会耐心等待我们的延迟程序结束，然后再继续前进：\

我可以处理这种异步进程的唯一方法是结合 swf 文件使用 scriptUI，并在 AS3 中完成任何计时器的工作。这样您就可以在 InDesign 中继续执行脚本，并让您的循环在 swf 文件中运行。我这样做了一次，特别是为了监视一个热文件夹。

顺便说一句：您的代码中有错误 => message.add("StaticText", undefined,... 那应该是小写的 statictext ;)

# android - 应用小部件布局中的视图重叠

> ID：11459603
> 
> 赞同：0
> 
> 时间：2012-07-12T19:54:44.440
> 
> 标签：android, android-layout

我正在构建一个应用程序小部件，布局将`View`在小部件的底部对齐，以容纳 a`TextView`和 a `ImageView`，然后在其`View`上方容纳主要文本。我所拥有的问题是，“顶部”似乎`View`与底部重叠`View`：

![在此处输入图像描述](../Images/c1d79f3ea06151f5a32486b01040816f.png)

**更新**

现在我在想“顶部”视图没有与底部视图重叠，但有些东西正在切断图像的顶部。这是另一个屏幕截图：

![在此处输入图像描述](../Images/692c429a1208c2522a5d2a44438b0150.png)

如您所见，底部视图顶部的文本被截断，但图像也被截断。这是一张图片没有缩放到 18dp 的截图：

![在此处输入图像描述](../Images/353927fed7aeb85743de9a0fcfbfdc9b.png)

我非常困惑。

这是我正在使用的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/widgetLayout"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="@dimen/widget_margin">

    <RelativeLayout
        android:id="@+id/widgetBgLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingTop="10dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:background="@drawable/bg_widget"
         >

        <RelativeLayout
            android:id="@+id/widgetStatusLayout" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_alignParentBottom="true"
            android:paddingTop="10dp"
          >
                <TextView 
                    android:id="@+id/widgetStatus" 
                    style="@style/WidgetStatus"
                    android:layout_centerVertical="true"
                    android:layout_alignParentLeft="true" 
                />

                <ImageView 
                   android:id="@+id/widgetIcon"
                   android:src="@drawable/icon"
                   android:layout_width="18dp"
                   android:layout_height="18dp"
                   android:layout_alignParentRight="true"
                   android:layout_centerVertical="true"
                   android:scaleType="centerInside"
                   android:adjustViewBounds="true"
                 />

            </RelativeLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_above="@id/widgetStatusLayout"       
                    android:layout_alignParentTop="true"
             >      
                    <TextView 
                        android:id="@+id/widgetTitle" 
                        style="@style/WidgetTitle"
                    />

                    <TextView 
                        android:id="@+id/widgetText" 
                        style="@style/WidgetText"
                    />
            </LinearLayout>
    </RelativeLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:46:35.437

我想到了。我不得不将图标的高度设置为更高的数字（28dp）。我不认为该图标是真正的矩形（我让其他人为我制作了图标），这可能会导致纵横比出现问题。

# php - $_FILES 数组在函数中使用后会被删除吗？

> ID：11459605
> 
> 赞同：-1
> 
> 时间：2012-07-12T19:54:53.720
> 
> 标签：php, file-upload

我正在从用户上传表单调整图像的大小，并且我已将`$_FILES`数组的内容传递给我的调整大小函数。该函数使用 GD 调整图像大小并将其保存在所需的目录中。

我需要制作图像的两个副本：一个大副本和一个用于缩略图的小副本。当我尝试第二次调用该函数（但尺寸不同）来制作缩略图时，就会出现问题。我收到数组的`unidentified index`数组消息`$_FILES`。

将`$_FILES`数组传递给函数后是否会自动删除数组，尽管我没有使用函数清除它？

FUNCION CALL如下

```
 if ($_FILES['image']['error'] != 4){
foto($_FILES['image'], $THUMBS_DIR, 400, 400, 1);
foto($_FILES['image'], $THUMBS_DIR, 70, 70, 1);
} 
```

功能

```
 /*foto function, foto upload, where to save, fotowidth, fotosize,*/
function foto($_FILES, $THUMBS_DIR, $MAX_WIDTH, $MAX_HEIGHT){

/*generate random name*/
$fecha = time();$passpart1 = $fecha;$passpart2 = mt_rand(1, 1000);$ps = $passpart1.$passpart2;$ps2= $passpart1.$passpart2.'thumb';$thumbref='0';    
if (is_uploaded_file($_FILES['tmp_name']))

{
/*resize ratio*/
$original = $_FILES['tmp_name'];
list($width, $height, $type) = getimagesize($original);
if ($width <= $MAX_WIDTH && $height <= $MAX_HEIGHT) {$ratio = 1;}
elseif ($width > $height) {$ratio = $MAX_WIDTH/$width;}
else {$ratio = $MAX_HEIGHT/$height;}

$imagetypes = array('/\.gif$/','/\.jpg$/','/\.jpeg$/','/\.png$/');
$name = preg_replace($imagetypes, '', basename($original));

$name=$ps;switch($type) 
{case 1:$source = @ imagecreatefromgif($original);if (!$source) {$result = 'Cannot process GIF files. Please use JPEG or PNG.';}break;
 case 2:$source = imagecreatefromjpeg($original);break;
 case 3:$source = imagecreatefrompng($original);break;
 default:$source = NULL;$result = 'Cannot identify file type.';}

 if (!$source) {$result = 'Problem copying original';}

 else {
 $thumb_width = round($width * $ratio);
 $thumb_height = round($height * $ratio);
 $thumb = imagecreatetruecolor($thumb_width, $thumb_height);
 imagecopyresampled($thumb, $source, 0, 0, 0, 0, $thumb_width, $thumb_height, $width, $height);
 switch($type) 
 {case 1:if (function_exists('imagegif')) {$success = imagegif($thumb, $THUMBS_DIR.$ps.'.gif');$thumb_name = $ps.'.gif';}
 else {$success = imagejpeg($thumb, $THUMBS_DIR.$ps.'.jpg', 50);$thumb_name = $ps.'.jpg';}break;

 case 2:$success = imagejpeg($thumb, $THUMBS_DIR.$ps.'.jpg', 100);$thumb_name = $ps.'.jpg';break;
 case 3:$success = imagepng($thumb, $THUMBS_DIR.$ps.'.png');$thumb_name = $ps.'.png';}

 /*destroy temp or not*/
 if ($success) {$result = "$thumb_name created";}

 }
 $fotref = $thumb_name;

 } 
 else{$errorreport='error with upload';}} 
```

再次您好我已经发布了代码，我最初没有发布它，因为我没想到人们想要看到它，我真的很感激它，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:54:28.527

我很确定这是因为 $_FILES 是一个超全局变量，因此当您将它用作函数 foto 中的参数名称时，它会被破坏，这样 $_FILES 就会成为您作为第一个参数传递的任何内容。

用 $_FILES 以外的变量重写 foto 函数，例如：

```
function foto($image, $THUMBS_DIR, $MAX_WIDTH, $MAX_HEIGHT){
    // rest of code here with $_FILES changed to $image
} 
```

或者，由于 $_FILES 是一个超级全局变量，您可以完全跳过将其用作参数，将调用更改为：

```
foto($THUMBS_DIR, 400, 400, 1) 
```

函数的形式为：

```
function foto($THUMBS_DIR, $MAX_WIDTH, $MAX_HEIGHT){
   //code placeholder 
   if (is_uploaded_file($_FILES['image']['tmp_name'])) {       
       $original = $_FILES['image']['tmp_name'];
   //rest of code
} 
```

# c# - 从 Web 服务中的 SQL Server 检索多个字段？

> ID：11459608
> 
> 赞同：4
> 
> 时间：2012-07-12T19:54:58.797
> 
> 标签：c#, .net, web-services, sql-server-2008, asmx

我正在测试如何从 Web 服务中的 SQL Server 检索数据。我在 VS 2010 中使用 SQL Server 2008 R2、asp.net Web 服务应用程序项目模板。

假设我有一个有 4 列且没有任何约束的表（为了对话）。

*   名
*   姓
*   电子邮件
*   大学

如果用户输入 FirstName 的值，我希望能够获取我的 SQL 表的所有值。稍后我会将 FirstName 更改为 NTID 或一些有意义的列。现在，如果用户输入 FirstName，我的 Web 服务只返回单个值，比如说 LastName。

作为 Web 服务的新手，我正在努力学习尽可能多的知识，并且非常感谢您在帮助我时所付出的时间和精力。TIA。

我在哪里/如何在下面的代码中进行更改

这是我的数据助手类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;

namespace EmployeeRecs
{
    public class DataHelper
    {
        //create new method to get Employee record based on First Name
        public static string GetEmployee(string firstName)
        {
            string LastName = "";

            //Create Connection
            SqlConnection con = new SqlConnection (@"Data Source=myDBServer;Initial Catalog=MyDataBase;Integrated Security=true;");

            //Sql Command
            SqlCommand cmd = new SqlCommand("Select LastName from Employees where FirstName ='" + firstName.ToUpper() + "'", con);

            //Open Connection
            con.Open();

            //To Read From SQL Server
            SqlDataReader dr = cmd.ExecuteReader();

                while (dr.Read())
                {
                    LastName = dr["LastName"].ToString();
                }

            //Close Connection
                dr.Close();
                con.Close();

            return LastName;

        }

    }
} 
```

这是我的 asmx.cs 课程

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace EmployeeRecs
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

               //Create new web method to get Employee last name
        [WebMethod]
        public string GetEmployee(string firstName)
        {
            return DataHelper.GetEmployee(firstName);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T20:01:20.077

除了 SQL 注入之外，还有一些事情：

创建 DataContract 并为要返回的数据创建模型

```
[DataContract]
public class Employee
{
    [DataMember]
    public int NTID { get; set; }

    [DataMember]
    public string LastName { get; set; }

    [DataMember]
    public int FirstName { get; set; }
} 
```

用您的 SQL 查询结果填充该模型并从您的服务中返回它

```
 //create new method to get Employee record based on First Name
    public static List<Employee> GetEmployee(string firstName)
    {
        //Create Connection
        SqlConnection con = new SqlConnection (@"Data Source=myDBServer;Initial Catalog=MyDataBase;Integrated Security=true;");

        //Sql Command
        SqlCommand cmd = new SqlCommand("Select NTID, LastName, FirstName from Employees where FirstName ='" + firstName.ToUpper() + "'", con);

        //Open Connection
        con.Open();

        List<Employee> employees = new List<Employee>();

        //To Read From SQL Server
        SqlDataReader dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            var employee = new Employee { 
                       NTID = dr["NTID"].ToString();
                       LastName = dr["LastName"].ToString();
                       FirstName = dr["FirstName"].ToString();
                    };
            employees.Add(employee);
        }
        //Close Connection
        dr.Close();
        con.Close();
        return employees;
} 
```

暴露它：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

namespace EmployeeRecs
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

               //Create new web method to get Employee last name
        [WebMethod]
        public List<Employee> GetEmployee(string firstName)
        {
            return DataHelper.GetEmployee(firstName);

        }
    }
} 
```

来自 OP 的完整代码供后代使用：

这可能对其他在相同情况下苦苦挣扎的人有用。所以我发布了我的解决方案代码：在 VS 2010 中创建一个新的 WCF 项目，我使用 .net 版本 3.5 并在 WCF 模板下选择了 WCF 服务库。

这是我在 IService1.cs 下的代码

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Runtime.Serialization; 
using System.ServiceModel; 
using System.Text; 

namespace WcfServiceLibrary1 
{ 
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together. 
    [ServiceContract] 
    public interface IService1 
    { 
        [OperationContract] 
        List<Employee> GetEmployee(string firstName); 

        [OperationContract] 
        CompositeType GetDataUsingDataContract(CompositeType composite); 

        // TODO: Add your service operations here 
    } 

    //Custon Data contract 

    [DataContract] 
    public class Employee 
    { 
        [DataMember] 
        public string FirstName { get; set; } 

        [DataMember] 
        public string LastName { get; set; } 

        [DataMember] 
        public string Email { get; set; } 

        [DataMember] 
        public string University { get; set; } 

    }  

    // Use a data contract as illustrated in the sample below to add composite types to service operations 
    [DataContract] 
    public class CompositeType 
    { 
        bool boolValue = true; 
        string stringValue = "Hello "; 

        [DataMember] 
        public bool BoolValue 
        { 
            get { return boolValue; } 
            set { boolValue = value; } 
        } 

        [DataMember] 
        public string StringValue 
        { 
            get { return stringValue; } 
            set { stringValue = value; } 
        } 
    } 
} 
```

这是我在 Service1.cs 下的代码

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Runtime.Serialization; 
using System.ServiceModel; 
using System.Text; 
using System.Data; 
using System.Data.SqlClient; 

namespace WcfServiceLibrary1 
{ 
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in both code and config file together. 
    public class Service1 : IService1 
    { 
        public List<Employee> GetEmployee(string firstName)  

        { 
            //Create Connection  
            SqlConnection con = new SqlConnection(@"Data Source=gsops4;Initial Catalog=MultiTabDataAnalysis;Integrated Security=true;"); 

            //Sql Command  
            SqlCommand cmd = new SqlCommand("Select LastName, FirstName, Email, University from Employees where FirstName ='" + firstName.ToUpper() + "'", con); 

            //Open Connection  
            con.Open(); 

            List<Employee> employees = new List<Employee>(); 

            //To Read From SQL Server  
            SqlDataReader dr = cmd.ExecuteReader();  

            while (dr.Read())  
        {  
            var employee = new Employee {   

                       FirstName = dr["FirstName"].ToString(),  
                       LastName = dr["LastName"].ToString(), 
                       Email = dr["Email"].ToString(), 
                       University = dr["University"].ToString() 

                    };  
            employees.Add(employee);  
        }  
        //Close Connection  
        dr.Close();  
        con.Close();  
        return employees; 

        } 

        public CompositeType GetDataUsingDataContract(CompositeType composite) 
        { 
            if (composite == null) 
            { 
                throw new ArgumentNullException("composite"); 
            } 
            if (composite.BoolValue) 
            { 
                composite.StringValue += "Suffix"; 
            } 
            return composite; 
        } 
    } 
} 
```

# javascript - 如何停止在输入中提交空字段

> ID：11459624
> 
> 赞同：0
> 
> 时间：2012-07-12T19:56:19.607
> 
> 标签：javascript, mysql, html

我正在使用 MySQL 和 PHP 订阅新闻信函脚本。当用户输入电子邮件并单击按钮时，电子邮件被添加到数据库中。

问题是在不输入电子邮件的情况下单击按钮时，数据库正在更新一个空记录。如何停止提交空字段并强制用户输入电子邮件？

这是我的 HTML：

```
<form id="myForm" action="update.php" method="post">
    <input type="hidden" name="action" value="update" />
    <input type="text" name="email" id="email" value="Enter your email here" onfocus="if (this.value == 'Enter your email here') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Enter your email here';}" onwebkitspeechchange="this.value = this.value.replace('Enter your email here','')"; style=" color:#999; font-size:1em;width:200px; font-style:italic; font-family:"Times  New Roman", Times, serif;"/>
    <input class="button" type="image" src="rss.png" />
 </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:00:50.407

在我看来，您需要在接受用户输入并将其插入数据库之前进行一些表单验证。做你正在做的事情是危险的。

为什么不使用众多插件之一：

[http://www.queness.com/post/10104/powerful-javascript-form-validation-plugins](http://www.queness.com/post/10104/powerful-javascript-form-validation-plugins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T15:07:23.643

理想情况下，您将在*客户端*(javascript/JQuery) 和*服务器端*(php) 验证表单。

为清楚起见，我将删除输入框中的内联代码以获取此信息：

```
<input type="text" name="email" id="email" value="Enter your email here" /> 
```

*注意*- 您可以使用

```
placeholder='Enter your email here' 
```

在您的输入框中获得提示。

*使用 HTML5 进行客户端验证*

使用电子邮件格式验证创建必填字段：

```
<input type="email" name="email" id="email" value="Enter your email here" required="required"/> 
```

*使用 javascript/JQuery 的客户端验证 - **example.js***

查询：

```
$('#email').bind('blur', function() {
    if (!validateEmail($(this).val()) {
        // Add errors to form or other logic such as disable submit
    }
});
function validateEmail($email) {
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    return emailReg.test($email);
} 
```

}

*服务器端验证 - **update.php***

```
// Require the email
if (empty($_POST['email'])) {
    $error_message = 'You must enter an email!';
} else if (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
    $error_message = 'Invalid email format. Example: example@example.example';
} else { // If no errors, continue processing the form
    // process the form, enter email
} 
```

单独的 HTML5 将阻止提交表单，但是只有更新的浏览器支持 HTML5。

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:05:44.057

这是关于使用 jquery 验证插件的有用教程：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

忽略他们示例中的样式并专注于核心方面。在您的情况下，最有用的行是：

```
<input id="cemail" name="email" size="25"  class="required email" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:05:54.157

粗略地说，你需要做类似..

```
var form = $('#mtForm');

$('input').change(function(){
   if($((this).val() == ''){
       form.unbind('submit').submit(function(){
           return false;
       });
   }
   else{
       form.unbind('submit');
   }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T20:05:57.973

1.  您应该将`value`电子邮件字段的属性更改为`placeholder`属性。和代码可以从电子邮件输入标签中删除`onfocus`。`onwebkitspeechchange``onblur`
2.  如果这是您所追求的唯一验证类型*（下面是用 jQuery 编写的），*您可以使用类似这样的东西来检查空白字段。

    ```
    $(function(){
        $('#myForm').submit(function(e){
            if ($('#email').val().trim() == "") {
              // some sort of notification here
              e.preventDefault();
              return false;
            }
        });
    }); 
    ```

    ​</p>

# javascript - 如何在 Macbook 上测试网页上的捏合事件

> ID：11459629
> 
> 赞同：1
> 
> 时间：2012-07-12T19:56:44.847
> 
> 标签：javascript, macos, canvas, zooming, pinch

我正在一个有画布的网站上工作。我在画布上有一张图片，我想做的是捏缩放图片（网页最终会在触摸屏上）。我正在使用 jGestures 来检测捏合事件。但是，我想知道是否有办法在 Mac 电脑上进行测试，因为当我在 mac 触控板上捏合时，它会缩放网页，而不是画布，这意味着触控板上的捏合不适用于我的画布标签，它缩放我的网页（字体、宽度、高度）。我也想知道魔术触控板或魔术鼠标是否可以做到。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:08:50.717

如果你有 Xcode，你可以运行 iOS 模拟器。模拟器可以让你捏。按住 Option 键，您应该可以单击鼠标进行放大和缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:22:25.073

我在 MacBook 的触控板上使用 npTUIOClient（[请参阅文章](http://smus.com/multi-touch-browser-patch/)）和旧版本的 Chrome 进行多点触控。认为它是 v.10 左右。

# c# - 最灵活的 .Net 集合

> ID：11459635
> 
> 赞同：0
> 
> 时间：2012-07-12T19:57:00.750
> 
> 标签：c#, .net, collections

我正在创建一个`CustomControl`并且我需要我的控件有一个集合，该集合接受几乎所有类型的泛型和非泛型集合。例如`List<T>`，`IEnumerable`等等。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T19:58:15.067

`IEnumerable`或`IEnumerable<T>`将接受大多数（可能是所有）收藏*。

[*事实上，严格来说，这些不是收藏品——但是，你`IEnumerable`在问题中提到了。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T19:59:07.327

通用集合接口是非通用`IEnumerable`接口。实际上，自 .NET 1.0 以来创建的每个集合都实现了此接口。如果您想要最大的灵活性，这是最好的选择。

# app-store - 如何处理“粗鲁”的应用商店促销代码..？

> ID：11459641
> 
> 赞同：1
> 
> 时间：2012-07-12T19:57:16.857
> 
> 标签：app-store

我最近为 iOS 应用商店生成了促销代码，其中至少一个包含一些您最好不要在电视上发音的字母组合（至少可以这么说）。有没有办法返回或更改这些代码？我的意思是，我不能将该代码发送给审阅者，甚至不能发送给朋友。

编辑：“生成”是指我使用 iTunes Connect 来获取促销代码，即 Apple 创建它们，我只是将它们作为文本文件下载。其中一个代码读取 xxMFxxxxANAL。可不是闹着玩的！（x=此处未披露的任意字符）。不完全是您想要发送给您想要查看您的应用程序的人的那种代码......

对此我能做些什么吗？例如返回代码并获得一个新代码？您是否必须手动检查 Apple 提供给您的每个代码？如果您想向网站提供一批以将它们分发给用户，那么这样的代码很容易通过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:19:48.297

从字符集中删除元音？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:03:25.843

在返回生成的促销代码之前，请对照您不想发送的单词列表对其进行检查。如果它在该列表中，请重新生成它。

**编辑**
然而，这真的不是最好的解决方案。更改生成代码的方式可能对您很有帮助。
一种可能性：在 C# 中有一个 Guid 类可以生成保证唯一的字符串。您可以使用 Guid 的一个子集作为您的促销代码。
另一种可能性：您可以交替使用字母和数字。

# java - 一键按下并拖动？

> ID：11459642
> 
> 赞同：2
> 
> 时间：2012-07-12T19:57:20.637
> 
> 标签：java, swing, mouseevent, jpanel, mousemove

我有一个程序，我在其中单击创建 JLabel，然后将其拖动到界面的另一部分。

我想要的是单击 JPanel 中的某个位置，让它在那里放置一个 JLabel，然后在同一次单击中拖动另一个 JLabel。

我能够做到这一点，但它需要多次点击。我可以一键完成吗？

为了说明我的意思，我创建了这个示例程序：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class DragTest extends JFrame implements MouseMotionListener,
        MouseListener {

    private JPanel panel = new JPanel(null);
    private JLabel dragLabel = new JLabel("drag");;
    private final JWindow window = new JWindow();

    public DragTest() {
        this.add(panel);
        panel.addMouseListener(this);

        dragLabel.setFont(new Font("Serif", Font.BOLD, 48));
    }

    @Override
    public void mouseDragged(MouseEvent me) {
        dragLabel = new JLabel("drag");
        dragLabel.setFont(new Font("Serif", Font.BOLD, 48));
        int x = me.getPoint().x;
        int y = me.getPoint().y;
        window.add(dragLabel);
        window.pack();
        Point pt = new Point(x, y);
        Component c = (Component) me.getSource();
        SwingUtilities.convertPointToScreen(pt, c);
        window.setLocation(pt);
        window.setVisible(true);
        repaint();
    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }

    @Override
    public void mouseClicked(MouseEvent e) {

    }

    @Override
    public void mousePressed(MouseEvent e) {

        JLabel dropLabel = new JLabel("drop");
        panel.add(dropLabel);
        dropLabel.setForeground(Color.RED);
        dropLabel.setFont(new Font("Serif", Font.BOLD, 48));
        dropLabel.setBounds(e.getX(), e.getY(), 100, 60);
        dropLabel.addMouseMotionListener(this);
        dropLabel.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseReleased(MouseEvent e) {
                dragLabel.setVisible(false);
                window.setVisible(false);

            }

        });
        repaint();

    }

    @Override
    public void mouseReleased(MouseEvent e) {

    }

    @Override
    public void mouseEntered(MouseEvent e) {

    }

    @Override
    public void mouseExited(MouseEvent e) {

    }

    public static void main(String[] args) {
        DragTest frame = new DragTest();
        frame.setVisible(true);
        frame.setSize(600, 400);
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

所以最初的点击创建了“drop”JLabel，然后点击并拖动“drop”JLabel 将创建一个跟随鼠标的“drag”JLabel。

如何一键拖动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:10:42.320

不要在 mouseDragged 方法中创建新的 JLabel，而是使用相同的 JLabel。例如：

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.*;

public class DragTest2 extends JPanel {
   private static final int PREF_W = 500;
   private static final int PREF_H = 400;
   private static final float LABEL_PTS = 24f;
   private static final String LABEL_TEXT = "My Label";
   private JLabel label = null;

   public DragTest2() {
      setLayout(null);
      MyMouseAdapter myMouseAdapter = new MyMouseAdapter();
      addMouseListener(myMouseAdapter);
      addMouseMotionListener(myMouseAdapter);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   class MyMouseAdapter extends MouseAdapter {

      @Override
      public void mousePressed(MouseEvent e) {
         label = new JLabel(LABEL_TEXT);
         label.setFont(label.getFont().deriveFont(LABEL_PTS));
         Dimension labelSize = label.getPreferredSize();
         label.setSize(labelSize);
         int x = e.getX() - labelSize.width / 2;
         int y = e.getY() - labelSize.height / 2;
         label.setLocation(x , y);
         add(label);
         repaint();
      }

      @Override
      public void mouseDragged(MouseEvent e) {
         if (label != null) {
            Dimension labelSize = label.getPreferredSize();
            int x = e.getX() - labelSize.width / 2;
            int y = e.getY() - labelSize.height / 2;
            label.setLocation(x , y);
            repaint();
         }
      }

      @Override
      public void mouseReleased(MouseEvent e) {
         if (label != null) {
            Dimension labelSize = label.getPreferredSize();
            int x = e.getX() - labelSize.width / 2;
            int y = e.getY() - labelSize.height / 2;
            label.setLocation(x , y);
            repaint();
            label = null;
         }
      }
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("DragTest2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new DragTest2());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# api - SDK 1.5.1 现在可以与 Kinect 的开源库在同一台计算机上运行吗？

> ID：11459648
> 
> 赞同：0
> 
> 时间：2012-07-12T19:57:36.130
> 
> 标签：api, sdk, open-source, kinect

过去，beta 2 SDK 无法与任何其他 Kinect 黑客软件在同一台计算机上运行。这仍然是真的吗？我现在可以将 OpenNI 和 SDK 合并到同一个项目中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:14:24.073

这是一个棘手的问题。理论上是的。然而，实际问题是，在使用 OpenNI 时，您需要一个兼容 OpenNI 的驱动程序。通常的选择是[SensorKinect](https://github.com/avin2/SensorKinect/)。Kinect for Windows SDK 需要 Microsoft 自己的驱动程序，该驱动程序与 OpenNI 不兼容。让两个驱动程序同时运行是不可能的。

因此，Kinect for Windows SDK 和 OpenNI 是互斥的。在库之间切换时需要更换驱动程序。

使 SDK 和 OpenNI 同时工作的一种可能方法是，您需要编写一个兼容 OpenNI 的传感器模块，该模块使用 Microsoft 的 Kinect 驱动程序。据我所知，以前没有人这样做过，而且我不完全确定它会起作用。如果您打算走这条路，请查看[OpenNI 程序员指南以获取有关 OpenNI 架构的更多信息。](http://openni.org/Documentation/ProgrammerGuide.html#Concepts)

# javascript - Backbone Coffeescript 超级渲染

> ID：11459651
> 
> 赞同：2
> 
> 时间：2012-07-12T19:57:47.667
> 
> 标签：javascript, inheritance, backbone.js, coffeescript

如何在主干（coffeescript）中调用超级的渲染功能？

如果不是在咖啡脚本中，我听说过

```
MyModel.__super__.render.call(this); 
```

会起作用，但在这种情况下，MyModel 是exports.MyModel，如果它是exports 的一个元素，我该如何使用它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:24:59.570

由于您尝试从渲染方法内部调用超级渲染方法，因此您可以像这样：

```
class TopLevelClass extends Backbone.View
  initialize: ->
    @render()

  render: ->
    console.log 'Render TopLevelClass'
    @ # return this

class SecondaryLevelClass extends TopLevelClass
  initialize: ->
    @render()

  render: ->
    super()
    console.log 'Render SecondaryLevelClass'
    @ # return this

t = new TopLevelClass
  # el: $("#first_div")
s = new SecondaryLevelClass
  # el: $("#second_div") 
```

来源： [http ://coffeescript.org/#classes](http://coffeescript.org/#classes)

编辑：@lublushokolad 是正确的。Backbone[文档](http://backbonejs.org/#View-render)建议`render`返回`this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T23:49:59.253

在 Backbone 环境中，coffeescript 类方法有一些缺点：

1.  使用`class SecondaryLevelClass extends TopLevelClass`语法会改变传统的 Backbone 扩展模型，这可能会造成混淆。
2.  它会生成大量的 JS 代码，并且您已经加载了 Backbone/Underscore 的扩展代码。

使用常规的 Backbone 扩展语法与以更详细的方式调用 super 的权衡可能是值得的，如下所示：

```
TopLevelClass Backbone.View.extend
  initialize: -> @render()
  render: ->
    console.log 'Render TopLevelClass'
    @

SecondaryLevelClass = TopLevelClass.extend
  initialize: -> @render()
  render: ->
    SecondaryLevelClass.__super__.initialize.call(this)
    console.log 'Render SecondaryLevelClass'
    @

t = new TopLevelClass # el: $("#first_div")
s = new SecondaryLevelClass # el: $("#second_div") 
```

另一种选择是这样的混合：http: [//pivotallabs.com/a-convenient-super-method-for-backbone-js/](http://pivotallabs.com/a-convenient-super-method-for-backbone-js/)

# gwt - 我可以将 Play 2 应用程序添加到现有的 WAR 中吗？

> ID：11459653
> 
> 赞同：1
> 
> 时间：2012-07-12T19:57:55.100
> 
> 标签：gwt, servlets, playframework-2.0

我有一个基于 servlet 的 Java 应用程序（更准确地说：一个带有标准[GWT](https://developers.google.com/web-toolkit/) Java 后端的[GWT应用程序）。](https://developers.google.com/web-toolkit/)我想添加一个 REST API 并希望为此使用[Play 2 框架](http://www.playframework.org/)。这可能吗？

我不介意 servlet 是否在一个端口（例如 8080）上运行，而 Play Web 服务器是否在另一个端口（例如 8081）上运行。

（*背景：*从长远来看，我会将整个应用程序迁移到 Play 和 Akka 演员。因此，我想已经使用 Play 来开发 REST API。）

# mysql - 无法解决此 SQL 查询结果

> ID：11459655
> 
> 赞同：1
> 
> 时间：2012-07-12T19:58:03.193
> 
> 标签：mysql, sql

我似乎无法弄清楚为什么：

```
SELECT `Title`.`Title`, `FirstName`, `LastName`, `Address1`, `Address2`, `Town`.`Town`, `County`.`County`, `PostalCode`, `Phone1`, `Solo` 
FROM `Person` 
JOIN `Title` ON `Person`.`Title` = `Title`.`id` 
JOIN `Town` ON `Person`.`Town` = `Town`.`id` 
JOIN `County` ON `Person`.`County` = `County`.`id` 
WHERE `Person`.`Solo`='1' 
ORDER BY `LastName` ASC; 
```

返回 0 个结果，（它不应该，至少有 5 个结果，其中`Solo`='1'）

如果我修改它，取出所有的 JOINS：

```
SELECT `Title`, `FirstName`, `LastName`, `Address1`, `Address2`, `Town`, `County`, `PostalCode`, `Phone1`, `Solo` 
FROM `Person` 
WHERE `Person`.`Solo`='1' 
ORDER BY `LastName` ASC; 
```

我得到结果？如果我修改它以取出`WHERE Person.Solo='1'`它也会给我结果，但只有 2；surley 它应该在哪里返回所有行？有人可以解释吗？

:)

注意：Solo 是一个 tinyint，它在所有记录中等于 0 或 1！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:00:16.643

您的联接是严格的，这意味着如果`Person`没有`Title` *或* `Town` *则* `Country`不会返回。即使删除整个`WHERE`子句，您也不会得到任何结果。

试试`LEFT JOIN`吧。

这很好地解释了不同类型的连接是如何工作的：[A Visual Explanation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:07:22.573

有一些常见的约定可以使您的代码对其他人更具可读性。首先，始终使用`id`(autoincrement) -primary-key。然后在相关表中使用 xxxxx_id。其次，您应该使用更精确的 JOIN 声明：LEFT JOIN 或 INNER JOIN。那更容易阅读。第三：一般不需要使用```。除此之外，您可以使用表别名来减少 SQL 代码的数量。

```
SELECT ti.title, firstname, lastname, address1, address2, to.town, county.county, postalcode, phone1, solo 
FROM person AS p
LEFT JOIN title AS ti ON p.title = ti.id 
LEFT JOIN town AS to ON p.town_id = to.id 
LEFT JOIN county AS c ON p.county = c.id 
WHERE p.solo=1
ORDER BY lastname ASC; 
```

只是一个建议...

# javascript - Yepnope + Harvey.js

> ID：11459656
> 
> 赞同：2
> 
> 时间：2012-07-12T19:58:08.407
> 
> 标签：javascript, modernizr, yepnope

我最近遇到了[Harvey.js](http://harvesthq.github.com/harvey/)，对它非常满意。现在，我正在尝试将它与 Modernizr.load (Yepnope) 集成，但收效甚微。

您可以了解我正在尝试使用此代码片段做什么：

```
Modernizr.load({
    test: Harvey,
    nope: '<?php bloginfo('stylesheet_directory'); ?>/js/harvey.js',
    complete: function(){
        Harvey.attach('screen and (max-width: 960px)', {
            on: function(){ $('ul#menu-primary').each(menuReplace) },
            off: function(){ $('#navigation nav').empty().append(menu) }
        });
        if( !smallV ){
            $('.responsivize').each(function(){
                var me = $(this),
                data = me.data();
                data.src = data.fullsrc;
                delete data.fullsrc;
                $('<img />', data).insertBefore(me)
                me.remove()
            });
         }
     }
}); 
```

当我试一试时，浏览器会抛出“函数未定义错误”并且页面会死掉。

知道如何让 YepNope 测试某个功能是否可用吗？

编辑：我测试该功能的原因是因为我在使用 Harvey 的代码中有两个类似的代码块。我认为这是一种简单的方法来仔细检查脚本是否正确加载。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:24:07.660

如果有人想知道，这似乎可行。

```
!typeof(Harvey) 
```

# c - 命令行参数不起作用。某种逻辑错误

> ID：11459660
> 
> 赞同：0
> 
> 时间：2012-07-12T19:58:36.000
> 
> 标签：c, command-line, getopt

我在让命令行参数正常工作时遇到问题。当`argc`大于 3 时，参数似乎失败了，之后你只能让它们工作，如果你写*-fwhatever*而不是*-f 不管*它应该是什么。-t 也复制 -o 的值。

```
int main(int argc,char **argv)
{
    int c;

    /* Are we in root? */

    if(geteuid() !=0)
        {
            printf("Root access is required to run this program. \n");

            exit(0);        
        }   

    /* How do we use the program */

    if ((argc < 6) || (argc > 8))
        {
            usage(argv[0]);

            exit (0);
        } 

    while (1)
        {
            static struct option long_options[] =
                {
                    /* Options */
                {"send",       no_argument,       0, 's'},
                {"recieve",    no_argument,       0, 'r'},
                {"file",       required_argument, 0, 'f'},
                {"data",       required_argument, 0, 'd'},
                {"destip",     required_argument, 0, 'i'},
                {"destport",   required_argument, 0, 'p'},
                {"sourceip",   required_argument, 0, 'o'},
                {"sourceport", required_argument, 0, 't'},
                {0, 0, 0, 0}
                };

               int option_index = 0;

               c = getopt_long (argc, argv, "srf:d:i:p:o:t:",
                            long_options, &option_index);

                          /* Detect the end of the options. */
               if (c == -1)
                 break;

               switch (c)
                 {
                 case 0:
                   /* If this option set a flag, do nothing else now. */
                   if (long_options[option_index].flag != 0)
                 break;
                   printf ("option %s", long_options[option_index].name);
                   if (optarg)
                 printf (" with arg %s", optarg);
                   printf ("\n");
                   break;

                 case 's':
                   puts ("option -s\n");
                   break;

                 case 'r':
                   puts ("option -r\n");
                   break;

                 case 'f':
                   printf ("option -f with value `%s'\n", optarg);
                   break;

                 case 'd':
                   printf ("option -d with value `%s'\n", optarg);
                   break;

                 case 'i':
                   printf ("option -i with value `%s'\n", optarg);
                   break;

                 case 'p':
                   printf ("option -p with value `%s'\n", optarg);
                   break;

                 case 'o': 
                   printf ("option -o with value `%s'\n", optarg);

                 case 't': 
                   printf ("option -t with value `%s'\n", optarg);

                 case '?':
                   /* Error message printed */
                   break;

                 default:
                   abort ();
                 }
             }

               /* Print any remaining command line arguments (not options). */
            if (optind < argc)
        {
            printf ("non-option ARGV-elements: ");
            while (optind < argc)
            printf ("%s ", argv[optind++]);
            putchar ('\n');
        }

        getchar ();
        exit (0);

} 
```

这里显然有什么可怕的错误，但它似乎找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:42:25.550

关于复制到-t 的-o，您忘记`break;`在案例末尾添加a。

另外，我会删除`argc`检查。让它`getopt`发挥它的魔力。您可以在解析结束时检查是否设置了所有强制选项。您还可以检查未知参数。

# codeigniter - 使用 CodeIgniter 运行 cron 作业

> ID：11459663
> 
> 赞同：4
> 
> 时间：2012-07-12T19:58:43.570
> 
> 标签：codeigniter

我需要使用 CodeIgniter 对文件运行 cron 作业，但 CodeIgniter 不会让我直接运行文件。IE

我可以在浏览器中运行控制器：

```
api.example.com/index.php/cron 
```

我的主机只允许我运行 PHP 文件，我不能通过命令行来执行它，因为它不允许我运行 wget 或 curl。

如何让 CodeIgniter 运行如下文件：

```
api.example.com/index.php/application/controller/cron.php 
```

我可以用我的主机调用该文件。

更新

以为我会更新任何对我有用的选项我最终改变了托管并执行以下操作。

[http://devsforrest.com/116/setup-a-cronjob-to-run-every-5-minute-on-media-temple](http://devsforrest.com/116/setup-a-cronjob-to-run-every-5-minute-on-media-temple)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:45:38.093

不确定这是否是您要查找的内容，或者我的回答是否错误，但是我使用 CodeIgniter 运行 CRON 作业的方式只是作为 cron 执行此操作：

```
php /path/to/index.php controller function 
```

然后在控制器中，我在它的顶部有这个

```
if( PHP_SAPI != 'cli') exit('My Custom Error Message'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:50:01.720

在您的情况下，使用 wget 命令以及您的 url 在 codeigniter 文件中运行 cron 它应该是：

```
wget api.example.com/index.php/controller/function 
```

并注意不要使用文件路径使用调用您的函数的 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:09:09.583

使用 .htaccess 将 .php 附加到请求的 URL，我没有测试下面的代码，但我希望它有所帮助。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [R=301] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T06:31:31.130

使用 CURL 并通过 URL 调用您的 cronjob。如果在您的主机中启用了 CURL，那将是一个不错的选择。

在您网站的根文件夹中创建一个名为 cronjob.php 的 PHP 文件，并将以下脚本添加到文件中。

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"http://www.mysite.com/index.php/controller/method");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$server_output = curl_exec ($ch);
curl_close ($ch);
?> 
```

现在在 cronjob 中调用 php 文件 cronjob.php 它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T20:07:40.957

```
class Cron extends CI_Controller {
    function index($dummy) {

        // Crony command

    }
} 
```

线：`api.example.com/index.php/cron/index/dummy.php`

基本上给出的示例使用第三个 uri 段来传递一个以`.php`您不使用的结尾的值。

否则你可以使用好的 ol' [**Routing**](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T17:50:53.023

简单地

```
/usr/local/bin/php /home/cpanel_username/public_html/sub_folder/index.php param1 param2 optional_param3 optional_param3 
```

这里

cpanel_username - 您的域 cpanel 的用户名，

sub_folder（可选） - 如果您的 Web 应用程序是任何文件夹

Param(parameters) - 指控制器及其方法（函数）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-25T17:17:27.673

用于 Godaddy 托管的 Codeigniter API Cronjob

基于 CodeIgniter cron 作业 API 的每日 10 点

```
0   10  *   *   *   /usr/local/bin/php public_html/folder_name/index.php controller_name funcation_name 
```

对我来说工作正常

# java - 如何在linux的classpath中添加多个jar文件

> ID：11459664
> 
> 赞同：21
> 
> 时间：2012-07-12T19:58:47.233
> 
> 标签：java, linux, jar, classpath

好的，我对 linux 和命令行很陌生，对 java 也很陌生。我得到了一份构建 Java 程序的实习机会。我终于在我的机器（windows）上完成了它，现在我必须将它迁移到linux机器上进行测试，然后让它作为可执行文件运行。我在 linux 和理解类路径方面做了很多阅读和研究，但仍然很难完全理解。它只是还没有为我点击。任何人都可以使用示例以简化的方式解释类路径的目的吗？对我来说最令人困惑的方面之一实际上是定义 jar 的物理路径。我是从 usr 开始还是只需要从 jvm 文件夹开始？如果重要的话，我的 java 程序不在 jvm 文件夹中。任何人都可以为我解释一下吗？

编辑：非常感谢你们的帮助，我不能说我完全清楚，但我对我的情况的理解要好得多。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-03T06:39:57.840

假设您有多个 jar 文件 a.jar、b.jar 和 c.jar。要在编译时将它们添加到类路径中，您需要做

```
$javac -cp .:a.jar:b.jar:c.jar HelloWorld.java 
```

跑做

```
$java -cp .:a.jar:b.jar:c.jar HelloWorld 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T20:10:46.477

你使用`-classpath`论据。您可以使用相对路径或绝对路径。这意味着您可以使用相对于当前目录的路径，或者您可以使用从 root 开始的绝对路径`/`。

例子：

```
bash$ java -classpath path/to/jar/file MyMainClass 
```

在此示例中，该`main`函数位于`MyMainClass`并将包含在 jar 文件中的某处。

对于编译，您需要使用`javac`

例子：

```
bash$ javac -classpath path/to/jar/file MyMainClass.java 
```

您还可以通过环境变量指定类路径，请遵循[以下示例](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)：

```
bash$ export CLASSPATH="path/to/jar/file:path/tojar/file2"
bash$ javac MyMainClass.java 
```

对于任何通常复杂的 java 项目，您应该查找名为的 ant 脚本`build.xml`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-12T20:12:59.543

类路径是 java 编译器（命令：javac）和 JVM（命令：java）查找应用程序引用的类的位置。应用程序引用另一个类意味着什么？简而言之，这意味着在其代码的某处使用该类：

例子：

```
public class MyClass{
    private AnotherClass referenceToAnotherClass;
    .....
} 
```

当您尝试编译此 (javac) 时，编译器将需要 AnotherClass 类。当您尝试运行您的应用程序时也是如此：JVM 将需要 AnotherClass 类。为了找到这个类，javac 和 JVM 在一个特定的（一组）地方寻找。这些位置由类路径指定，在 linux 上是一个冒号分隔的目录列表（javac/JVM 应该查找的目录，以便在需要时找到 AnotherClass）。

所以为了编译你的类然后运行它，你应该确保类路径包含包含 AnotherClass 类的目录。然后你像这样调用它：

```
javac -classpath "dir1;dir2;path/to/AnotherClass;...;dirN" MyClass.java //to compile it
java -classpath "dir1;dir2;path/to/AnotherClass;...;dirN" MyClass //to run it 
```

通常，类以称为 jar 文件/库的“包”的形式出现。在这种情况下，您必须确保包含 AnotherClass 类的 jar 在您的类路径中：

```
javac -classpath "dir1;dir2;path/to/jar/containing/AnotherClass;...;dirN" MyClass.java //to compile it
java -classpath ".;dir1;dir2;path/to/jar/containing/AnotherClass;...;dirN" MyClass //to run it 
```

在上面的示例中，您可以看到如何编译位于工作目录中的类（MyClass.java），然后运行编译后的类（注意类路径开头的“.”代表当前目录）。该目录也必须添加到类路径中。否则，JVM 将无法找到它。

如果您将类放在 jar 文件中，正如您在问题中指定的那样，那么您必须确保该 jar 也在类路径中，以及其余所需的目录。

例子：

```
java -classpath ".;dir1;dir2;path/to/jar/containing/AnotherClass;path/to/MyClass/jar...;dirN" MyClass //to run it 
```

或更一般的（假设某些包层次结构）：

```
java -classpath ".;dir1;dir2;path/to/jar/containing/AnotherClass;path/to/MyClass/jar...;dirN" package.subpackage.MyClass //to run it 
```

为了避免每次要运行应用程序时都设置类路径，您可以定义一个名为 CLASSPATH 的环境变量。

在 linux 中，在命令提示符下：

```
export CLASSPATH="dir1;dir2;path/to/jar/containing/AnotherClass;...;dirN" 
```

或编辑 ~/.bashrc 并在末尾添加此行；

但是，类路径会经常更改，因此，您可能希望将类路径设置为您经常需要的核心目录集，然后在每次只需要该会话时扩展类路径。像这样：

```
export CLASSPATH=$CLASSPATH:"new directories according to your current needs" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-20T17:57:14.733

对于 linux 用户，您应该了解以下内容：

1.  $CLASSPATH 特别是 Java 用来查看多个目录以查找脚本所需的所有不同类（除非您使用 -cp 覆盖明确告诉它）。使用 -cp (--classpath) 需要您手动跟踪所有目录，并在每次运行程序时复制粘贴该行（不推荐 IMO）。

2.  冒号 (":") 字符分隔不同的目录。只有一个 $CLASSPATH 并且其中包含所有目录。因此，当您运行“export CLASSPATH=....”时，您希望包含当前值“$CLASSPATH”以附加到它。例如：

    ```
    export CLASSPATH=.
    export CLASSPATH=$CLASSPATH:/usr/share/java/mysql-connector-java-5.1.12.jar 
    ```

    在上面的第一行中，您只用一个简单的“点”开始 CLASSPATH，它是您当前工作目录的路径。这样，每当您运行 java 时，它都会在当前工作目录（您所在的目录）中查找类。在上面的第二行中，$CLASSPATH 获取您之前输入的值 (.) 并将路径附加到 mysql 驱动程序。现在，java 将为您的类查找驱动程序和。

3.  ```
    echo $CLASSPATH 
    ```

    非常方便，它返回的内容应该像冒号分隔的列表一样，您希望 java 查找运行脚本所需的所有目录。

4.  Tomcat 不使用 CLASSPATH。在此处阅读如何处理：[https ://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html](https://tomcat.apache.org/tomcat-8.0-doc/class-loader-howto.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-15T07:01:19.423

步骤1。

```
vi ~/.bashrc 
```

步骤 2\. 将此行附加到最后：

```
export CLASSPATH=$CLASSPATH:/home/abc/lib/*;  (Assuming the jars are stored in /home/abc/lib) 
```

步骤 3。

```
source ~/.bashrc 
```

在这些步骤之后直接编译并运行您的程序（例如 javac xyz.java）

# c++ - 在一系列 char* 缓冲区中查找序列号？

> ID：11459667
> 
> 赞同：0
> 
> 时间：2012-07-12T19:58:58.897
> 
> 标签：c++, c, gdb

我正在接收某个 size_t len 的 const char* msg 类型的流。在其中的某个字节偏移处有一个序列号（32 或 64 字节，我不确定是哪个）所以我的想法是每次我得到一个 msg 的东西时都执行以下操作：

```
for (int i = 0; i < 30; ++i)
{
    uint32_t seq = *(uint32_t*) msg[i];
    cout << "seq" << i << " " << seq << endl;
}
//and similar for 64 bytes 
```

这样之后我就可以对具有相同偏移量的行进行分组，并查看哪个偏移量`i`给了我顺序外观的输出。这样做的问题是我使用以下内容出现了段错误：

```
(gdb) p *(uint32_t*) msg[i]
Cannot access memory at address 0x2d 
```

我怎样才能执行我对序列号的小搜索想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:02:09.363

尝试：

```
uint32_t seq = *(uint32_t*) &msg[i]; 
```

和

```
(gdb) p *(uint32_t*)&msg[i] 
```

* * *

**编辑**：一个更大的变化，可能更便携的是：

```
uint32_t seq;
memcpy(&seq, msg + i, sizeof(seq));
seq = ntohl(seq); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:53:15.640

```
char msg[30];
for ( int i = 0; i < 30; i++ )
    msg[i] = '\0';

char *iter_p = NULL;
iter_p = msg;

int i = 0;
while ( iter_p < &msg[30] ) {

    uint32_t seq = *(uint32_t *)iter_p;
    cout << "seq" << i << "  " << seq << endl;
    iter_p += 4;
    i++;
} 
```

尝试像这样迭代，遍历一个迭代器指针。=)

iter_p +=4 --> step 32 位，因为 iter_p 是一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:45:08.820

您犯了一个简单的错误： msg[i] 返回位置 i 处的字符的 VALUE。要获取它的地址，您应该使用 msg + i 或 &msg[i]。但是对于某些无法读取未对齐字的体系结构，此代码不可移植。

阅读未对齐单词的最佳方法是使用打包结构：

```
#pragma pack(1)
struct Header {
   uint32_t seq;
};
#pragma pack()

for (int i = 0; i < 30; ++i)
{
    const Header *h = (const Header *)(msg + i);
    cout << "seq" << i << " " << htonl(h->seq) << endl;
} 
```

注意字节序问题和 htonl 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:04:24.133

这不是您将字节转换为 int 的方式，您试图取消引用指向内存中不存在的位置的指针。尝试这样的事情：[http ://www.cplusplus.com/forum/beginner/3076/](http://www.cplusplus.com/forum/beginner/3076/)

# css - 如何在不使用 CSS 添加新类的情况下对齐 DIV 内的图像

> ID：11459668
> 
> 赞同：0
> 
> 时间：2012-07-12T19:59:04.020
> 
> 标签：css, alignment, center

我需要将图像与 DIV 内的中心对齐，但我无法添加新类。有可能做到这一点吗？我已经尝试过，但直到现在才知道。

```
<div class="thumbnail visible-phone">
    <a href="/#"><img src="some.jpg"></a>
</div> 
```

一些线索？

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:00:11.400

```
.thumbnail {
  text-align: center;
} 
```

这将使div中的所有文本居中。

如果您只想将图像居中并让其他所有内容保持对齐，

```
.thumbnail img {
  display: block;
  margin: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:05:18.063

或者只是添加一个快速的内联样式

```
<div class="thumbnail visible-phone">
<a href="/#"><img src="some.jpg" style="text-align: center"></a> 
```

# android - 静音短信检测安卓

> ID：11459671
> 
> 赞同：6
> 
> 时间：2012-07-12T19:59:12.867
> 
> 标签：android

我试图弄清楚是否有办法通过 android api 检测无声短信。也只是为了好玩，您可以从设备发送一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-30T16:27:51.163

通过将 TP DCS（数据编码方案）字段的第 4-7 位设置为 1100（消息等待指示组：丢弃消息），蜂窝运营商（或可能由入侵者）可以发起静默 SMS -[请参阅本文](http://www.ivizsecurity.com/blog/security-awareness/silent-sms-how-i-know-where-you-were-yesterday-night/)，但 AFAIK这并未反映在 Android SDK 中。
0 类与静音 SMS 无关。
3GPP 23.038 实际上说“当移动终止消息为 0 类且 MS 具有显示短消息的能力时，MS 应立即显示该消息并向 SC 发送确认”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T13:42:38.093

好吧，我想我明白了。在telephony.SmsMessage 类中有一个名为getMessageClass() 的方法。0 级表示无声短信。至于发送它们，这仍在进行中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T16:36:21.420

如果您正在测试您的应用程序...

然后我建议使用短信模拟器工具。

在 Windows 机器上 -

1.  转到 CMD
2.  输入 - “telnet localhost 5554”（假设这是唯一的活动模拟器；如果您有更多模拟器，请输入相应的端口号）
3.  使用短信功能（有更多选项，如 gsm 通话等）

您还可以在 telnet 会话中键入帮助，它会列出您可以做的所有可能的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-19T09:41:05.170

Android SDK 支持数据 SMS，作为通用 SMS 接收广播接收器功能的子集：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" ></uses-permission> 
```

您需要指定一个意图过滤器并侦听与静默 SMS 匹配的指定端口：

```
 <intent-filter android:priority="10" >
            <action android:name="android.intent.action.DATA_SMS_RECEIVED" />
            <data android:scheme="sms" />
            <data android:port="16001" />
        </intent-filter> 
```

参考： [https ://developer.android.com/reference/android/provider/Telephony.Sms.Intents#DATA_SMS_RECEIVED_ACTION](https://developer.android.com/reference/android/provider/Telephony.Sms.Intents#DATA_SMS_RECEIVED_ACTION)

# python - 在 matplotlib 中，set_xlim 和 set_xbound 有什么区别？

> ID：11459672
> 
> 赞同：28
> 
> 时间：2012-07-12T19:59:13.880
> 
> 标签：python, matplotlib

从帮助：

**set_xlim：**设置 xaxis 的数据限制。

**set_xbound：**设置 x 轴的数值上下界。

这不是很清楚，所以假设我绘制了一些东西：

```
import matplotlib.pylab as plt
fig, ax = plt.subplots(1, 1)
ax.plot(xrange(10), xrange(10)) 
```

现在，要么我做：

```
ax.set_xlim(2, 7) 
```

或者：

```
ax.set_xbound(2, 7) 
```

我看不出有什么区别。我可以拖动绘图，所有线都绘制在 0 到 9 之间。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-13T09:04:32.587

如果您稍后绘制不在边界内的内容，则边界可以自动更改。相反，限制是固定的，不会自动更改。

```
import pylab as p

t = p.arange(0.0, 2.0, 0.01)
s = p.sin(2*p.pi*t)

ax=p.subplot(111)
ax.plot(t, s, color='r',linewidth=1.0)
ax.set_ylim(-1,1)
ax.plot(t, s+1, color='g',linewidth=1.0, label="Graph2")
p.show()

ax=p.subplot(111)
ax.plot(t, s, color='r',linewidth=1.0)
ax.set_ybound(-1,1)
ax.plot(t, s+1, color='g',linewidth=1.0, label="Graph2")
p.show() 
```

![在此处输入图像描述](../Images/9b09a43c654d8c14670b299267337002.png) ![在此处输入图像描述](../Images/680f6b4e59ecfc59ba823c32e69e1692.png)

# rabbitmq - 从 RabbitMQ 中删除所有队列？

> ID：11459676
> 
> 赞同：209
> 
> 时间：2012-07-12T19:59:36.923
> 
> 标签：rabbitmq, rabbitmqctl

我安装`rabbitmqadmin`并能够列出所有的交换和队列。如何使用`rabbitmqadmin`或`rabbitmqctl`删除所有队列。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2012-07-12T20:19:39.183

首先，列出您的队列：

`rabbitmqadmin list queues name`

然后从列表中，您需要手动将它们一一删除：

`rabbitmqadmin delete queue name='queuename'`

由于输出格式的原因，您似乎无法从 grep 响应`list queues`。或者，如果您只是在寻找一种清除*所有内容*的方法（阅读：**重置所有设置**，将安装返回到默认状态），请使用：

```
rabbitmqctl stop_app
rabbitmqctl reset    # Be sure you really want to do this!
rabbitmqctl start_app 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2018-08-24T10:07:26.307

**[使用管理插件](https://www.rabbitmq.com/management.html#getting-started)和策略实际上超级容易：**

*   转到**管理控制台**(localhost:15672)

*   转到**管理**选项卡

*   转到**策略**选项卡（在右侧）

*   添加**策略**

*   填写字段

    *   **虚拟主机：**选择
    *   **名称：**过期所有策略（稍后删除）
    *   **图案：** .*
    *   **适用于：**队列
    *   **定义：** **过期**值为**1**（将类型从字符串更改为数字）
*   节省

*   再次结帐**队列**选项卡

*   必须删除所有队列

*   **并且不要忘记删除政策！！！！！！**.

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-10-02T22:29:08.013

您可以使用`rabbitmqadmin`此单线删除它们：

```
rabbitmqadmin -f tsv -q list queues name | while read queue; do rabbitmqadmin -q delete queue name=${queue}; done 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-02-04T16:11:44.453

在 Rabbit 版本 3.7.10 中，您可以使用 root 权限运行以下命令：

```
rabbitmqctl list_queues | awk '{ print $1 }' | xargs -L1 rabbitmqctl delete_queue 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-02-18T10:12:58.397

试试这个：

```
 rabbitmqadmin list queues name | awk '{print $2}' | xargs -I qn rabbitmqadmin delete queue name=qn 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-03-27T11:46:32.733

如果您没有安装 rabbitmqadmin，请尝试使用 rabbitmqctl 清除队列：

`rabbitmqctl list_queues | awk '{ print $1 }' | xargs -L1 rabbitmqctl purge_queue`

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-04-12T13:52:40.063

如果您尝试删除队列，因为它们未使用并且您不想重置，一种选择是通过策略将队列 TTL 设置为非常低，等待队列在 TTL 通过后自动删除然后删除该策略 ( [https://www.rabbitmq.com/ttl.html](https://www.rabbitmq.com/ttl.html) )。

```
rabbitmqctl.bat set_policy delq ".*" '{"expires": 1}' --apply-to queues 
```

删除策略

```
rabbitmqctl clear_policy delq 
```

请注意，这仅适用于*未使用*的队列

此处的原始信息：[http ://rabbitmq.1065348.n5.nabble.com/Deleting-all-queues-in-rabbitmq-td30933.html](http://rabbitmq.1065348.n5.nabble.com/Deleting-all-queues-in-rabbitmq-td30933.html)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-09-13T12:06:34.287

我做了一个 deleteRabbitMqQs.sh，它接受参数来搜索队列列表，只选择与你想要的模式匹配的那些。如果您不提供任何参数，它将全部删除！它向您显示即将删除的队列列表，让您在执行任何破坏性操作之前退出。

```
for word in "$@"
do
        args=true
        newQueues=$(rabbitmqctl list_queues name | grep "$word")
        queues="$queues
$newQueues"
done
if [ $# -eq 0 ]; then
        queues=$(rabbitmqctl list_queues name | grep -v "\.\.\.")
fi

queues=$(echo "$queues" | sed '/^[[:space:]]*$/d')

if [ "x$queues" == "x" ]; then
        echo "No queues to delete, giving up."
        exit 0
fi

read -p "Deleting the following queues:
${queues}
[CTRL+C quit | ENTER proceed]
"

while read -r line; do
        rabbitmqadmin delete queue name="$line"
done <<< "$queues" 
```

如果您想要对传入的参数进行不同的匹配，您可以更改第四行中的 grep。删除所有队列时，它不会删除其中包含三个连续空格的队列，因为我认为这种可能性比使用 rabbitmqctl 以不同语言打印输出的人更罕见。

享受！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-11-20T02:23:36.273

这是使用 PowerShell 的一种方法。URL 可能需要更新

```
$cred = Get-Credential
 iwr -ContentType 'application/json' -Method Get -Credential $cred   'http://localhost:15672/api/queues' | % { 
    ConvertFrom-Json  $_.Content } | % { $_ } | ? { $_.messages -gt 0} | % {
    iwr  -method DELETE -Credential $cred  -uri  $("http://localhost:15672/api/queues/{0}/{1}" -f  [System.Web.HttpUtility]::UrlEncode($_.vhost),  $_.name)
 } 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-08-19T10:59:18.960

您可以使用 rabbitmqctl eval 如下：

```
rabbitmqctl eval 'IfUnused = false, IfEmpty = true, MatchRegex = 
<<"^prefix-">>, [rabbit_amqqueue:delete(Q, IfUnused, IfEmpty) || Q <- 
rabbit_amqqueue:list(), re:run(element(4, element(2, Q)), MatchRegex) 
=/= nomatch ].' 
```

以上将删除名称以“prefix-”开头的所有虚拟主机中的所有空队列。您可以根据需要编辑变量 IfUnused、IfEmpty 和 MatchRegex。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-01-31T05:00:57.750

使用rabbitmqctl one liner删除所有队列

```
rabbitmqctl list_queues | awk '{ print $1 }' | sed 's/Listing//' | xargs -L1 rabbitmqctl purge_queue 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-10-29T09:23:37.410

您无需重置 rabbitmq 服务器即可删除*非持久*队列。只需停止服务器并重新启动，它将删除所有可用的*非持久*队列。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-03-30T15:21:40.410

如果您只想清除非空队列（更快）：

```
rabbitmqctl list_queues | awk '$2!=0 { print $1 }' | sed 's/Listing//' | xargs -L1 rabbitmqctl purge_queue 
```

对我来说，清除一个队列（空的和非空的）需要 2-3 秒，所以迭代 50 个队列是一件很痛苦的事情，而我只需要清除其中的 10 个（40/50 是空的）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-04-25T14:50:44.037

我尝试了 rabbitmqctl 和 reset 命令，但它们非常慢。

这是我找到的最快的方法（替换您的用户名和密码）：

```
#!/bin/bash

# Stop on error
set -eo pipefail

USER='guest'
PASSWORD='guest'

curl -sSL -u $USER:$PASSWORD http://localhost:15672/api/queues/%2f/ | jq '.[].name' | sed 's/"//g' | xargs -L 1 -I@ curl -XDELETE -sSL -u $USER:$PASSWORD http://localhost:15672/api/queues/%2f/@
# To also delete exchanges uncomment next line
# curl -sSL -u $USER:$PASSWORD http://localhost:15672/api/exchanges/%2f/ | jq '.[].name' | sed 's/"//g' | xargs -L 1 -I@ curl -XDELETE -sSL -u $USER:$PASSWORD http://localhost:15672/api/exchanges/%2f/@ 
```

注意：这仅适用于默认虚拟主机 /

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-03-15T15:45:00.493

这是一个更快的版本（使用`parallel`install sudo apt-get install parallel）扩展了 @admenva 的出色答案

`parallel -j 50 rabbitmqadmin -H YOUR_HOST_OR_LOCALHOST -q delete queue name={} ::: $(rabbitmqadmin -H YOUR_HOST_OR_LOCALHOST -f tsv -q list queues name)`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-09-18T09:26:47.127

此命令删除所有队列

```
python rabbitmqadmin.py \
  -H YOURHOST -u guest -p guest -f bash list queues | \
xargs -n1 | \
xargs -I{} \
  python rabbitmqadmin.py -H YOURHOST -u guest -p guest delete queue name={} 
```

这个脚本非常简单，因为它使用`-f bash`，将队列输出为列表。

然后我们用`xargs -n1`它把它分成多个变量

然后我们使用`xargs -I{}`它将运行以下命令，并`{}`在命令中替换。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-11-19T16:41:53.693

要列出队列，

```
./rabbitmqadmin -f tsv -q list queues 
```

要删除队列，

```
./rabbitmqadmin delete queue name=name_of_queue 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-04-23T14:21:16.043

我尝试了上面的代码，但我没有做任何流式传输。

`sudo rabbitmqctl list_queues | awk '{print $1}' > queues.txt; for line in $(cat queues.txt); do sudo rabbitmqctl delete_queue "$line"; done`.

我生成一个包含所有队列名称的文件，并逐行循环以删除它们。对于循环，`while read ...`没有为我做。它总是停在第一个队列名称处。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-11-14T07:47:24.083

对于安装rabbitmqadmin有问题的人，你应该先安装python。

类 UNIX 操作系统用户需要将 rabbitmqadmin 复制到 PATH 中的一个目录，例如 /usr/local/bin。

Windows 用户需要确保 Python 在他们的 PATH 上，并以 python.exe rabbitmqadmin 的形式调用 rabbitmqadmin。

然后

1.  浏览`http://{hostname}:15672/cli/rabbitmqadmin`至下载。
2.  转到包含的文件夹，然后以管理员权限运行 cmd

**列出队列** `python rabbitmqadmin list queues`。

**删除队列** `python rabbitmqadmin delete queue name=Name_of_queue`

**删除所有队列**

1- 声明政策

```
python rabbitmqadmin declare policy name='expire_all_policies' pattern=.* definition={\"expires\":1} apply-to=queues 
```

2- 删除政策

```
python rabbitmqadmin  delete policy name='expire_all_policies' 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-11-11T09:47:53.950

有一种方法可以在没有脚本和完全重置的情况下删除所有队列和交换。您可以从管理界面删除并重新创建虚拟主机。这甚至适用于 vhost `/`。

您唯一需要恢复的是新创建的虚拟主机的权限。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-01-12T18:40:53.863

好的，这个答案的重要限定符：这个问题确实要求使用**rabbitmqctl**或**rabbitmqadmin**来解决这个问题，我的答案需要同时使用两者。另外，请注意，这是在 MacOS 10.12.6 以及在使用 Homebrew 安装 rabbitmq 时安装的**rabbitmqctl**和**rabbitmqadmin**`brew list --versions`版本进行测试的，并且标识为**rabbitmq 3.7.0**

`rabbitmqctl list_queues -p <VIRTUAL_HOSTNAME> name | sed 1,2d | xargs -I qname rabbitmqadmin --vhost <VIRTUAL_HOSTNAME> delete queue name=qname`

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-22T16:22:09.777

另一种选择是删除与队列关联的虚拟主机。这将删除与虚拟主机关联的*所有内容*，因此请注意，但它既简单又快速。

* * *

[**注意：** RabbitMQ 团队会监控[邮件列表](https://groups.google.com/forum/#!forum/rabbitmq-users)[，`rabbitmq-users`](https://groups.google.com/forum/#!forum/rabbitmq-users)有时只会在 StackOverflow 上回答问题。]

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-01-17T08:20:53.090

这是我使用的一种方法。它简单、清晰、有效。这是[文件](https://pulse.mozilla.org/api/index.html)：

```
Vhost=the_vhost_name
User=user_name
Password=the_passworld

for i in `rabbitmqctl list_queues -p $Vhost |  awk '{ print $1 }'`
do
    echo "queu_name: $i"
    curl  -u $User:$Passworld -H "content-type:application/json"  -XDELETE http://localhost:15672/api/queues/$Vhost/$i
done 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2014-02-20T11:22:09.950

```
rabbitmqadmin list queues|awk 'NR>3{print $4}'|head -n-1|xargs -I qname rabbitmqadmin delete queue name=qname 
```

# extjs4 - 打印表单值

> ID：11459678
> 
> 赞同：2
> 
> 时间：2012-07-12T19:59:45.300
> 
> 标签：extjs4, extjs4.1

我有以下表格。我需要打印用户为 textfiled 输入的值`uname`吗？我怎样才能做到这一点 ？

```
Ext.create('Ext.form.Panel', {
    title: 'Basic Form',
    renderTo: Ext.getBody(),
    bodyPadding: 5,
    width: 350,

    // Any configuration items here will be automatically passed along to
    // the Ext.form.Basic instance when it gets created.

    // The form will submit an AJAX request to this URL when submitted
    url: 'save-form.php',

    items: [{
        fieldLabel: 'NAME',
        name: 'uname'
    }],

    buttons: [{
        text: 'Submit',
        handler: function() {
            // The getForm() method returns the Ext.form.Basic instance:
            var form = this.up('form').getForm();
            if (form.isValid()) {

                // CONSOLE.LOG (FORM VALUES) ///////////////////////////////////////

            }
        }
    }]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:52:57.940

使用[getValues](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-getValues)方法获取包含表单中所有字段值的对象：

```
var form = this.up('form').getForm();
if (form.isValid()) {
    var values = form.getValues();

    // log all values.
    console.log(values);

    // log uname value.
    console.log(values['uname']);
} 
```

或者，使用[findField](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-findField)方法访问表单中的特定字段：

```
var form = this.up('form').getForm();
if (form.isValid()) {

    // log uname value.
    var field = form.findField('uname');
    console.log(field.getValue());
} 
```

* * *

**示例：http:** [//jsfiddle.net/5hndW/](http://jsfiddle.net/5hndW/)

# sdk - Corona SDK 中的物理体缩放

> ID：11459680
> 
> 赞同：1
> 
> 时间：2012-07-12T20:00:10.743
> 
> 标签：sdk, lua, coronasdk

我需要编写一个代码，它在对象经过 500 像素后对其进行缩放，我编写了此代码，但它不起作用：

```
function localScale( event )
  if self.y > 500 then
    self.scale(1.10, 1.10)
  end
end 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:14:05.213

你应该给

```
self:scale(1.10,1.10) 
```

或者你可以给

```
self.scale(self,1.10,1.10) 
```

另外，我认为在缩放物理体时，只有图像被缩放。物理体未缩放。所以请记住这一点！

# drupal - Drupal 视图：根据内容类型以不同方式处理标题字段链接？

> ID：11459700
> 
> 赞同：1
> 
> 时间：2012-07-12T20:01:40.353
> 
> 标签：drupal, drupal-7, views, hyperlink, drupal-views

我有一个从 3 种不同内容类型中提取标题的视图。其中一种内容类型的标题应该链接到外部网站，另外两种类型的标题链接到 Drupal 站点内的节点。有没有办法可以设置标题字段以根据标题来自的内容类型以不同方式处理链接？

**感谢下面的弗拉德回答！:)**

这是我们在`views-view-fields--news--block.tpl.php`模板中使用的工作代码..

```
<?php if ($fields['type']->content == 'Event'): ?>
  <a href="<?php print $fields['path']->content; ?>"><?php print $fields['title']->content; ?></a>
<?php endif; ?>

<?php if ($fields['type']->content == 'PATF News'): ?>
  <a href="<?php print $fields['path']->content; ?>"><?php print $fields['title']->content; ?></a>
<?php endif; ?>

<?php if ($fields['type']->content == 'News Link'): ?>
//This link goes to _blank
 <a href="<?php print $fields['field_link']->content; ?>" target="_blank"><?php print $fields['title']->content; ?></a>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:43:18.817

**Drupal 6**

1.  在您的视图设置中，添加`Node: Type`到`Fields`
2.  在`Basic settings`组中单击`Theme: Information`并单击`Row style output`
3.  将所有内容复制`Row style output`到主题文件夹中的主题文件（应命名为`views-view-fields--viewsname.tpl.php`或`views-view-fields--viewsname--viewsnamw.tpl.php`）。
4.  修改输出，您应该检查内容类型并进行不同的输出。

**德鲁巴 7**

它与您可以`Theme: Information`在组中找到的差异非常相似，`Advanced`并且您必须添加`Content: Type`到您的`Fields`组中。

在您的`views-view-fields--xxx--xxx.tpl.php`文件中写入如下内容：

```
if ($fields['type']->content == 'Page') {
  // print title linking to node
  print $fields['title']->content;
}
if ($fields['type']->content == 'News') {
  // print title linking to other website
  print 'http://example.com/'. $fields['title']->content;
} 
```

**改进的代码**

```
$link = $fields['path']->content;
$title = $fields['title']->content;
$options = array();

if ($fields['type']->content == 'News Link') {
  $link = $fields['field_link']->content;
  $options['attributes']['target'] = '_blank';
}

print l($title, $link, $options); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-09T18:06:38.703

我之前通过以下步骤完成了此操作：

1.  包括**内容标题**、**内容链接**和您的**外部链接**的字段。
2.  从视图中隐藏内容标题和内容链接。
3.  **内容链接的重写结果**应设置为内容标题的标记（均仍隐藏）。
4.  **不应将外部链接字段的任何结果行为**设置为内容链接的令牌。

这会在外部链接出现时显示它，并且会在不存在时回退到链接到原始内容的标题。

# .net - Teradata .NET 参数：我可以将输出参数与 SQL 一起使用（即，不使用存储过程）吗？

> ID：11459701
> 
> 赞同：1
> 
> 时间：2012-07-12T20:01:45.077
> 
> 标签：.net, sql, parameters, teradata

我想做这样的事情：

`Dim pId As TdParameter = New TdParameter With {.ParameterName = "p_id", .SourceColumn = "id", .TdType = TdType.Integer, .Direction = ParameterDirection.Output}`

然后像这样：

`cmd.Parameters.Add(pId);`

`cmd.CommandText = "insert into employee (id, name, age) values (?, 'bob', 34)"`

`cmd.ExecuteNonQuery();`

然后`pId.Value`返回新记录的 Id 列（这是一个标识列）的值。如果我能做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:59:25.370

INSERT 语句的执行永远不会返回结果集。最多您可能会收到返回给客户端的活动计数。要获取标识列的值，需要在 INSERT 完成后使用 SELECT 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T11:16:04.480

假设一张桌子：

*   ID 整数（默认生成的标识列无循环）
*   名称 varchar(20)
*   电子邮件 varhcar(50)

而不是使用`.ExecuteNonQuery()`您的插入语句，`.ExecuteReader()`而是使用。它实际上会返回刚刚插入的记录，并带有 Identity 列的值！

```
Using cmd As TdCommand = MyConnection.CreateCommand
    cmd.GeneratedDataBehavior = GeneratedDataBehavior.IdentityColumn
    cmd.CommandText = "insert into mydb.employee (name, email) values ('bob', 'bob@snob.com')"
    Using reader As TdDataReader = cmd.ExecuteReader
        While reader.Read
            Id = reader.GetInt64(reader.GetOrdinal("Id"))
            iRowsInserted += 1
        End While
    End Using
End Using 
```

# javascript - 加税 - 贝宝变量

> ID：11459705
> 
> 赞同：0
> 
> 时间：2012-07-12T20:01:53.560
> 
> 标签：javascript, html, paypal

我正在尝试在我的购物车的贝宝设置中添加税金。

这是我在 Javascript 代码中得到的内容：

```
//static paypal request arguments
            var pp_settings = {
                cmd: '_cart',
                upload: 1,
                no_note: 0,
                bn: 'JQPayPalShop_ShoppingCart_EC_US',
                rm: 2,
                custom: '',
                discount_rate_cart:50,
                tax_rate:9
            }; 
```

我添加了“discount_rate_cart”来测试我是否在正确的位置添加了变量，是的，总共便宜了 50%。所以我来对地方了。

但是，当添加“tax_rate”时，我可以在它旁边输入我想要的任何内容，它只是不起作用。结帐页面上没有添加税费。

知道为什么吗？

编辑：对于那些想要查看完整代码的人：http: [//jsfiddle.net/uNV6f/](http://jsfiddle.net/uNV6f/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T16:27:04.300

你有错误的变量名。对于单个项目，没关系，但看起来您正在尝试为整个购物车设置它。

在这种情况下，它应该是**`tax_cart`**

查看此文档以及您可以使用的完整变量列表：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH0D0TA](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH0D0TA)

# opencv - pthread 并行处理

> ID：11459706
> 
> 赞同：0
> 
> 时间：2012-07-12T20:01:57.440
> 
> 标签：opencv, pthreads

在线程上需要紧急帮助：这里的目标是 separtemask 将获取每个图像并分离不同的轮廓，并且对于图像中的每个轮廓，它将调用 handleobject 线程。所以每个for循环都会调用handeobject线程。但是，需要在每个线程中传递对象索引变量。但是只有 objectndex 的最后一个值被传递，这是因为 speratemask 函数循环并替换 obj.objindx 的值，并且只有 obj.objindx 的最后一个值被传递给所有线程。无论如何要在句柄对象中传递每个对象索引值。如果我们取消注释 pthread_join(tid[objectIndex],NULL); ，代码运行良好。但它不会给出并行程序

```
void separateMask(IplImage *maskImg)
{    
  for(r = contours; r != NULL; r = r->h_next)
  {
    cvSet(objectMaskImg, cvScalarAll(0), NULL);
    CvScalar externalColor = cvScalarAll(0xff);
    CvScalar holeColor = cvScalarAll(0x00);
    int maxLevel = -1; 
    int thinkness = CV_FILLED; 
    int lineType = 8; /* 8-connected */
    cvDrawContours(objectMaskImg, r, externalColor, holeColor, maxLevel, thinkness,lineType, cvPoint(0,0));;
    obj.objectMaskImg1[objectIndex]=(IplImage *) malloc(sizeof(IplImage));
    obj.objectMaskImg1[objectIndex]=objectMaskImg;
    obj.objindx=objectIndex;
    obj.intensityOut1=intensityOut;
    obj.tasOut1=tasOut;
    pthread_create(&tid[objectIndex],NULL,handleObject,(void *)&obj);
    //pthread_join(tid[objectIndex],NULL);
    printf("objectindx %d\n",obj.objindx);
    objectIndex++;

  }
  // cvReleaseImage(&objectMaskImg);
  //cvReleaseMemStorage(&storage);
  printf("Exitng Separatemask\n");

}

void* handleObject(void *arg)
{
  int i, j;
  handle *hndl;
  hndl=(handle *) malloc(sizeof(handle));
  hndl=(handle*)arg;
  pthread_mutex_t lock=PTHREAD_MUTEX_INITIALIZER;
  pthread_mutex_lock(&lock);
  IplImage *pImg;
  float statistics_ratio[3][9];
  pthread_t tid3;
  tas3 tas2;
  pImg = cvLoadImage("image.tif", CV_LOAD_IMAGE_ANYCOLOR | CV_LOAD_IMAGE_ANYDEPTH);
  if(pImg == NULL)
  {
    fprintf(stderr, "Fail to load image %s\n", "tiff file");
    return ;
  }
  tas2.pImg1=pImg;
  printf("tst%d\n",hndl->objindx);
  tas2.x=hndl->objindx;
  tas2.objectMaskImg1=hndl->objectMaskImg1[tas2.x];
  tas2.statistics_ratio[3][9]=statistics_ratio[3][9];
  double mean = average_intensity(pImg, tas2.objectMaskImg1); 
  int total = total_white(pImg, tas2.objectMaskImg1);
  pthread_mutex_unlock(&lock);

  printf("Exiting handle object thread_id %d\n\n", pthread_self());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:27:04.137

此功能似乎有问题

```
void* handleObject(void *arg) 
```

首先

```
 pthread_mutex_t lock=PTHREAD_MUTEX_INITIALIZER;
    pthread_mutex_lock(&lock); 
```

这是一个本地创建的互斥锁 - 但在线程函数中创建。所以你锁定它，但既然没有其他东西可以看到互斥锁，你为什么需要它？？？如果没有其他线程可以看到它，它不会提供同步功能。第二

```
 float statistics_ratio[3][9];
    pthread_t tid3;
    tas3 tas2;
    pImg = cvLoadImage("image.tif", CV_LOAD_IMAGE_ANYCOLOR | CV_LOAD_IMAGE_ANYDEPTH);
    if(pImg == NULL){
        fprintf(stderr, "Fail to load image %s\n", "tiff file");
        return ;
    }
    tas2.pImg1=pImg;
    printf("tst%d\n",hndl->objindx);
    tas2.x=hndl->objindx;
    tas2.objectMaskImg1=hndl->objectMaskImg1[tas2.x];
    tas2.statistics_ratio[3][9]=statistics_ratio[3][9]; 
```

您创建一个本地未初始化的 2d 浮点数组`statistics_ratio`，对其不做任何操作，然后将其分配给另一个本地创建的对象成员。这似乎没有意义，另一个 pthread 实例的声明也是如此`tid3`。

这并不重要，因为没有其他东西可以看到线程，但是如果`pImg == NULL`没有首先解锁互斥锁，你会从这个函数内部返回。

很难看出您的代码为什么不起作用或它的用途是什么，但也许上面突出显示的事情可能会有所帮助。您在线程函数中创建了许多未使用的局部变量。我不确定你是否需要其中一些是全局的——尤其是互斥锁（如果你确实需要一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T19:23:32.193

我认为您最初的问题是您正在重用`obj`传递给创建线程的结构，因此您将遇到数据竞争，其中刚刚创建的线程将读取已被用于另一个线程的数据覆盖的信息。

创建线程的循环具有以下结构：

```
for(r = contours; r != NULL; r = r->h_next)
{
    // initialize obj with information for the thread
    // ...

    // create a thread and pass it a pointer to obj
    pthread_create(&tid[objectIndex],NULL,handleObject,(void *)&obj);

    // some other bookkeeping
} 
```

由于您在下一次循环迭代时立即重新初始化 obj，谁知道线程函数将获取哪些数据？这就是为什么如果你在创建线程后加入线程，事情就会起作用的原因——`obj`结构保持稳定，因为循环阻塞直到线程完成。

将循环更改为如下所示：

```
for(r = contours; r != NULL; r = r->h_next)
{
    // instead of using `obj`, allocate a struct using malloc
    handle* threaddata = malloc(sizeof(handle); // note: I'm not sure if `handle` is the right type

    // initialize *threaddata with information for the thread
    // ...

    // create a thread and pass it the threaddata pointer
    pthread_create(&tid[objectIndex],NULL,handleObject,threaddata);

    // some other bookkeeping
} 
```

然后`free()`线程函数中的数据用 with 完成后（即线程创建代码创建并初始化数据块，然后将其所有权传递给线程）。

请注意，这可能不像通常那样简单，因为看起来您的`obj`结构中已经包含一些每个线程的信息（`objectMaskImg1`元素看起来是一个数组，每个元素都用于单独的线程）。因此，您可能还需要对数据结构进行一些重构。

最后，还有其他几个彻底的错误，例如立即覆盖指向 malloc() 分配的块的指针：

```
obj.objectMaskImg1[objectIndex]=(IplImage *) malloc(sizeof(IplImage));
obj.objectMaskImg1[objectIndex]=objectMaskImg; 
```

和

```
hndl=(handle *) malloc(sizeof(handle));
hndl=(handle*)arg; 
```

除了`handleObject()`数学家1975（http://stackoverflow.com/a/11460092/12711）提到的线程函数中毫无意义地使用互斥锁之外。

A fair bit of the code in the thread function (copying or attempting to copy data locally, the mutex) appears to be stuff thrown in to try to fix problems without actually understanding what the problem is. I think you really need to get an understanding of where various data lives, how to copy it (as opposed to just copying a pointer to it), and how to manage the ownership of the data.

# django - django-social-auth：从单元测试客户端登录

> ID：11459707
> 
> 赞同：5
> 
> 时间：2012-07-12T20:01:57.610
> 
> 标签：django, django-socialauth

我使用 django-social-auth 作为我的身份验证机制，我需要使用登录用户测试我的应用程序。我正在努力：

```
from django.test import Client
c = Client()
c.login(username='myfacebook@username.com", password='myfacebookpassword') 
```

尝试登录的用户从浏览器登录成功。该应用程序已被允许访问用户的数据。

使用 django-social-auth 作为身份验证机制时如何从单元测试登录有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:43:07.280

使用用户实例创建一个夹具

```
{
    "pk": 15,
    "model": "auth.user",
    "fields": {
        "username": "user",
        "first_name": "user",
        "last_name": "userov",
        "is_active": true,
        "is_superuser": false,
        "is_staff": false,
        "last_login": "2012-07-20 15:37:03",
        "groups": [],
        "user_permissions": [],
        "password": "!",
        "email": "",
        "date_joined": "2012-07-18 13:29:53"
    }
} 
```

像这样使用 SocialAuthUser 实例创建一个夹具

```
{
    "pk": 7,
    "model": "social_auth.usersocialauth",
    "fields": {
        "uid": "1234567",
        "extra_data": "%some account social data%",
        "user": 15,
        "provider": "linkedin"
    }
} 
```

因此，您将获得与真实用户具有相同行为并拥有您需要的所有社交数据的用户。设置新密码，然后您可以使用身份验证机制登录该用户：

```
...
user.set_password('password')
user.save()                    
logged_in = self.client.login(username='user', password='password') 
```

然后只需调用需要登录的视图

```
self.client.get("some/url") 
```

不要忘记，这`django.contrib.auth.backends.ModelBackend`是必需的，并且`django.contrib.sessions`应该在您的 INTALLED_APPS 元组中

此外，使用标准身份验证的优点是您不需要发出服务器请求来获取 oauth 令牌等。

# cakephp - 在其控制器中创建模型的实例

> ID：11459709
> 
> 赞同：0
> 
> 时间：2012-07-12T20:02:05.490
> 
> 标签：cakephp, object, model, controller

这可能是一个简单的问题，但我很难尝试创建模型的对象。我想创建一个与模型相同的临时变量，以便可以根据发布到操作的数据更新其内部值。

我的数据已成功发布到控制器中的操作。目前我正在做的是抓取数据库中的所有项目，然后将其分配给数组中的第一个项目。这样我可以覆盖现有值，但如果表是空的，它将无法工作。

我正在使用 cakephp 2.x，我是新手，这将解释为什么我无法弄清楚这一点。

这是来自控制器的代码：

```
public function lcadd()
    {
        if ($this->request->is('post'))
        {
            // Create a new Local Clock object
            $temp = $this->LocalClock->find('all'); // THIS IS THE PROBLEM AREA
            $temp = $temp[0];

            $temp['LocalClock']['name'] = $this->request->data['LocalClock']['Name'];
            debug($temp);  // THIS DEBUG ONLY DISPLAYS SOMETHING IF THE DATABASE TABLE IS NOT EMPTY

            debug($this->request->data);  // THE DATA COMING IN IS CORRECT AND I CAN ACCESS IT WITHOUT A PROBLEM

            if($this->request->data['LocalClock']['Time Zone'] == 0 or $this->request->data['LocalClock']['Time Zone'] == -1)
            {
                //debug('Hello');
                $temp['LocalClock']['auto_offset'] = 1;
            }
            else if($this->request->data['LocalClock']['Time Zone'] == 1)
            {
                $temp['LocalClock']['auto_offset'] = 0;
            }

            // Check the value posted from the DST
            if($this->request->data['LocalClock']['DST Definition'] == -1 or $this->request->data['LocalClock']['DST Definition'] == 0)
            {
                $temp['LocalClock']['in_month'] = 0;
            }
            else if($this->request->data['LocalClock']['DST Definition'] == 2)
            {
                $temp['LocalClock']['in_month'] = $this->request->data['LocalClock']['InMonth'];
            }

            if ($this->LocalClock->save($temp))
            {
                $this->set('localClocks', $this->request->data);
                $this->set('islcAddValid', true);
                $this->set('lcaddValidationErrors', false);
            }
        }
    } 
```

我不知道如何从模型中制作一个简单的对象。模型是LocalClock，控制器是LocalClocksController。上面的函数在 LocalClocksController 中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:26:42.863

我注意到的几件事...

首要问题：

```
// Create a new Local Clock object
$temp = $this->LocalClock->find('all'); // THIS IS THE PROBLEM AREA
$temp = $temp[0]; 
```

这不是创建一个新的本地时钟对象。第一行返回一个包含本地时钟数据库表中所有记录的数组（即，不是对象）。然后，第二行说“获取结果的第一行，并将其存储在 $temp 中”。因此，现在 $temp 包含一个数组（仍然不是对象），其中包含 LocalClock 表中第一条记录的数据。

但是，您实际上不需要对象，因为您稍后调用的“保存”方法不接受对象 - 它只接受数据数组。您也不需要从数据库中获取任何内容来保存新记录。所以上面的代码应该替换为：

```
$temp = array(); // Create an empty array. We will populate it as we go, with the data for the new record. 
```

在您尝试保存记录之前，您方法中间的所有内容都应该可以正常工作。

第二期：

```
if ($this->LocalClock->save($temp)) 
```

在调用“保存”之前，您首先需要调用“创建” -

```
$this->LocalClock->create(); // prepare the Model to save a new record
if ($this->LocalClock->save($temp)) // This should now save a new record successfully. 
```

有道理？如果您还有其他问题，请告诉我。

此外，了解如何从模型中检索、操作和保存数据对于使用 CakePHP 非常重要，如果您从一开始就学会如何正确地做到这一点，您将在未来为自己节省无数小时的挫败感。我建议端到端阅读以下页面：

1.  [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

2.  [http://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

# jpa - 命名本机查询并将列映射到表中不存在的实体字段

> ID：11459712
> 
> 赞同：2
> 
> 时间：2012-07-12T20:02:14.790
> 
> 标签：jpa

我有一个命名本机查询，我正在尝试将其映射到命名本机查询的返回结果。有一个字段我想添加到我的实体中，该字段在表中不存在，但它会存在于查询的返回结果中。我想这与存储过程相同......

如何在 JPA 中映射存储过程的返回结果？...

您甚至如何调用存储过程？

这是我想做的示例查询...

```
select d.list_id as LIST_ID, 0 as Parent_ID, d.description  from EPCD13.distribution_list d 
```

结果将映射到该实体...

```
public class DistributionList implements Serializable {
    @Id
    @Column(name="LIST_ID")
    private long listId;

    private String description;

    private String owner;

    private String flag;

    @Column(name="PARENT_ID", nullable = true)
    private long parentID;
} 
```

父 ID 不在我数据库的任何表中。我还需要再次将此实体用于其他调用，与此调用无关，并且不需要此 parent_id？JPA 标准中有什么可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:12:54.423

如果不需要数据库中的结果进行进一步操作，仅用于预览，您可以考虑使用[数据库视图或结果类构造函数表达式](https://stackoverflow.com/questions/11320586/jpa-how-to-composite-an-entity-from-columns-of-multiple-tables-not-save-an-ent)。

* * *

如果需要从数据库中检索的实体进行进一步操作，您可以使用[多个选择表达式](http://www.objectdb.com/java/jpa/query/jpql/select#Multiple_SELECT_Expressions_)和[瞬态字段](http://www.objectdb.com/java/jpa/entity/fields#Transient_Fields_)。

1.  将 @Column 注释替换为父 ID 上的 @Transient 注释。
2.  从数据库中检索多个列后，迭代结果并手动设置 parentID。

# ios - iOS CGPath 性能

> ID：11459713
> 
> 赞同：6
> 
> 时间：2012-07-12T20:02:16.240
> 
> 标签：ios, drawing, drawrect

**更新**

通过使用 OpenGL 绘制所有内容，我绕过了 CG 的限制。仍然有一些小故障，但到目前为止，它的工作速度要快得多。

一些有趣的观点：

*   **`GLKView`**：这是一个 iOS 特定的视图，它对设置 OpenGL 上下文和渲染循环有很大帮助。如果你不在 iOS 上，恐怕你自己一个人。
*   **着色器精度**：当前版本的 OpenGL ES (2.0) 中着色器变量的精度为[16 位](https://stackoverflow.com/questions/4414041/what-is-the-precision-of-highp-floats-in-glsl-es-2-0-for-iphone-ipod-touch-ipad "16 位")。这对我的目的来说有点低，所以我用一对 16 位变量模拟了 32 位算术。
*   **`GL_LINES`**: OpenGL ES 可以原生绘制简单的线条。不是很好*（没有关节，没有大写，请参见下面屏幕截图顶部的紫色/灰色线）*，但要改进这一点，您必须编写自定义着色器，将每条线转换为三角形条并祈祷它作品！*（据说当浏览器告诉你 Canvas2D 是 GPU 加速时，它们就是这样做的）*

                                                      ![示例渲染](../Images/5ee01350df57af860146ff960b913a56.png)

*   **尽量少**画。我认为这是有道理的，但是您可以经常避免渲染例如在视口之外的东西。
*   OpenGL ES***不*支持填充多边形**，因此您必须自己对它们进行镶嵌。考虑使用[iPhone-GLU](http://code.google.com/p/iphone-glu/ "iPhone-GLU")：这是 MESA 代码的一个端口，它非常好，虽然它有点难使用（没有标准的 Objective-C 接口）。

**原始问题**

我试图在`drawRect`我的滚动视图的方法中绘制大量 CGPath（通常超过 1000 个），当用户用手指平移时会刷新。我在浏览器的 JavaScript 中有相同的应用程序，我正在尝试将它移植到 iOS 本机应用程序。

iOS测试代码为（100行操作，`path`为预制`CGMutablePathRef`）：

```
- (void) drawRect:(CGRect)rect {
    // Start the timer
    BSInitClass(@"Renderer");
    BSStartTimedOp(@"Rendering");

    // Get the context
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 2.0);
    CGContextSetFillColorWithColor(context, [[UIColor redColor] CGColor]);
    CGContextSetStrokeColorWithColor(context, [[UIColor blueColor] CGColor]);
    CGContextTranslateCTM(context, 800, 800);

    // Draw the points
    CGContextAddPath(context, path);
    CGContextStrokePath(context);

    // Display the elapsed time
    BSEndTimedOp(@"Rendering");
} 
```

在 JavaScript 中，供参考，代码为（具有 10000 行操作）：

```
window.onload = function() {
  canvas = document.getElementById("test");
  ctx = canvas.getContext("2d");

  // Prepare the points before drawing
  var data = [];
  for (var i = 0; i < 100; i++) data.push ({x: Math.random()*canvas.width, y: Math.random()*canvas.height});

  // Draw those points, and write the elapsed time
  var __start = new Date().getTime();
  for (var i = 0; i < 100; i++) {
    for (var j = 0; j < data.length; j++) {
      var d = data[j];
      if (j == 0) ctx.moveTo (d.x, d.y);
      else ctx.lineTo(d.x,d.y)
    }
  }
  ctx.stroke();
  document.write ("Finished in " + (new Date().getTime() - __start) + "ms");
}; 
```

现在，我在优化 JavaScript 方面比在 iOS 方面更加精通，但是，经过一些分析后，与 JavaScript 相比，CGPath 的开销似乎绝对非常糟糕。两个片段在真实 iOS 设备上的运行速度大致***相同***，而且 JavaScript 代码的行操作数是 Quartz2D 代码的 100 倍！

*编辑：这是 Instruments 中时间分析器的顶部：*

```
Running Time   Self             Symbol Name
6487.0ms       77.8%  6487.0    aa_render
449.0ms        5.3%   449.0     aa_intersection_event
112.0ms        1.3%   112.0     CGSColorMaskCopyARGB8888
73.0ms         0.8%   73.0      objc::DenseMap<objc_object*, unsigned long, true, objc::DenseMapInfo<objc_object*>, objc::DenseMapInfo<unsigned long> >::LookupBucketFor(objc_object* const&, std::pair<objc_object*, unsigned long>*&) const
69.0ms         0.8%   69.0      CGSFillDRAM8by1
66.0ms         0.7%   66.0      ml_set_interrupts_enabled
46.0ms         0.5%   46.0      objc_msgSend
42.0ms         0.5%   42.0      floor
29.0ms         0.3%   29.0      aa_ael_insert 
```

据我了解，这在 iOS 上应该更快，仅仅是因为代码是原生的......所以，你知道吗：

*   ...我在这里做错了什么？
*   ...如果有另一种更好的解决方案来实时绘制那么多线？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:44:39.067

正如您在问题中所描述的，使用 OpenGL 是正确的解决方案。理论上，你可以用OpenGL模拟各种图形绘制，但你需要自己实现所有形状算法。例如，您需要自己延长线的边角。OpenGL 中没有*线的概念。*画线是一种实用功能，几乎只用于调试。您应该将所有内容视为一组三角形。

我相信 16 位浮点数对于大多数绘图来说已经足够了。如果您使用大数坐标，请考虑将空间划分为多个扇区以使坐标数更小。当浮点数变得非常大或非常小时，它的精度就会变差。

## 更新

如果您尝试在 OpenGL 显示上显示 UIKit，我认为您很快就会遇到这个问题。不幸的是，我也找不到解决方案。

*   [如何使 OpenGL 绘图与 UIKit 更新同步](https://stackoverflow.com/questions/12967340/how-to-synchronize-opengl-drawing-with-uikit-updates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T14:52:53.670

您使用 CGContextAddPath 杀死了 CGPath 性能。

Apple 明确表示这将运行缓慢 - 如果您希望它快速运行，则需要将 CGPath 对象附加到 CAShapeLayer 实例。

你正在做动态的运行时绘图——阻止了 Apple 的所有性能优化。尝试切换到 CALayer——尤其是 CAShapeLayer——你应该会看到性能大幅提升。

（注意：CG 渲染中还有其他可能影响此用例的性能错误，例如 CG/Quartz/CA 中的模糊默认设置，但是......您需要首先摆脱 CGContextAddPath 上的瓶颈）

# css - 没有边距的内联块？

> ID：11459714
> 
> 赞同：9
> 
> 时间：2012-07-12T20:02:26.383
> 
> 标签：css

我有几个 DIV 显示为内联块；并且它们似乎正在从浏览器中自动在它们之间应用间距。他们将边距/填充设置为 0。有没有办法在不使用负边距的情况下纠正这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T21:47:47.003

山姆，你看到的那个空间实际上是空白。这就是为什么删除填充和边距什么都不做的原因。让我解释。当你有这个：

HTML

```
<div>
    a
    a
    a
    a
</div> 
```

这是它的渲染方式：

```
a a a a 
```

...正确的？

所以，如果你有这个：

```
<div>
    <div style="display:inline-block"></div>
    <div style="display:inline-block"></div>
    <div style="display:inline-block"></div>
</div> 
```

...你会得到同样的东西：

```
block [space] block [space] block 
```

现在......这个问题有很多不同的解决方案。我相信最常见的是注释掉 html 中的空格：

```
 <div>
        <div style="display:inline-block"></div><!--
        --><div style="display:inline-block"></div><!--
        --><div style="display:inline-block"></div>
   </div> 
```

不过我不喜欢它——我更喜欢保持 html 尽可能干净。我首选的方法是将父级的字体大小设置为 0，然后在内联块本身上设置所需的字体大小。像这样：

```
div {
    font-size: 0; /* removes the whitespace */
}

div div {
    display: inline-block;
    font-size: 14px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:04:47.613

您不需要使用负边距来抵消原始边距。

相反，您可以使用以下内容覆盖它们：

`* { margin:0; }`

或者：

`.div { margin:0; }`

如果它是特定于元素的。

**编辑：**

看来问题可能是意外空白的结果。例如：

```
<div style="display:inline-block">
    ...
</div>
<div style="display:inline-block">
    ...
</div> 
```

两个分隔符之间存在空白，浏览器将打印空白。要解决此问题，您需要将其更改为：

```
<div style="display:inline-block">
    ...
</div><div style="display:inline-block">
    ...
</div> 
```

享受和好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-14T19:17:44.460

您可以同时使用`display: inline-block`和`float: left`来删除该空间。

这里是 plunkr：[https ://plnkr.co/edit/Sn3NG77asiXO8UrrpxWD?p=preview](https://plnkr.co/edit/Sn3NG77asiXO8UrrpxWD?p=preview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:49:47.930

Inline-block 最初是一个 IE6 hack

这就是它的用途：

*   修复浮动元素上的 IE6 双倍边距错误
*   将多个块状元素放置在同一水平线上而不浮动它们（如果你不能浮动'例外情况）
*   允许内联元素具有宽度和/或高度，同时仍保持内联
*   允许内联元素具有填充或边距

所以如果你想有多个 div 并排请使用 float，它会解决你的许多 inline-block 可能导致的 css 问题，尤其是跨浏览器问题

有关 inline-block 的更多信息[，](http://www.w3.org/TR/CSS2/visuren.html)请参见第 9.2.4条

最好的问候 SP

如果不同意请评论

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-09T10:12:04.230

我发现改变父容器上的字间距的另一种方法对我[有用 https://jsfiddle.net/1ex5gpo3/2/](https://jsfiddle.net/1ex5gpo3/2/)

```
.parent {
    word-spacing: -1em;
}

.child {
    word-spacing: normal;
    display: inline-block;
} 
```

# c# - C# 奇怪的 ComboBox 数据——Visual Studio 问题？

> ID：11459721
> 
> 赞同：0
> 
> 时间：2012-07-12T20:03:22.613
> 
> 标签：c#, visual-studio-2010, debugging, list

我为我的组合框设置了数据绑定，如下所示：[显示枚举描述而不是名称](https://stackoverflow.com/questions/11439920/show-enum-description-instead-of-name)

但是，当我尝试提取数据时，我不能只获取状态代码，例如 IA。我得到这样的长字符串：{ Value = IA, Description = Iowa }

当我暂停代码并查看组合框值时，我可以执行诸如 State.SelectionBoxItem.Value 之类的操作，这是当您将鼠标悬停在变量上时从弹出菜单中展开的选项。不过，我似乎永远无法以编程方式获取该值。

允许我像这样分解该列表是否是视觉工作室的“功能”？

那是我必须以编程方式分解的字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:12:19.247

我的猜测是您正在查看 SelectedItem 属性而不是 SelectedValue。字符串 { Value = IA, Description = Iowa } 是调用匿名类型的 ToString 方法的结果，所以是的，它是一个特性。

在代码表单中另一个问题 SelectedValuePath 属性未设置为 Value，这是通过 SelectedValue 属性获取 ListBox 选定项的状态代码所必需的。

# sql-server - 选择数据后索引是否仍然有效？

> ID：11459722
> 
> 赞同：1
> 
> 时间：2012-07-12T20:03:22.957
> 
> 标签：sql-server, join, indexing

我有两个要加入的表，它们都有我要加入的列的索引。

查询 1

```
SELECT * FROM [A] INNER JOIN [B] ON [A].F = [B].F; 
```

查询 2

```
SELECT * FROM (SELECT * FROM [A]) [A1] INNER JOIN (SELECT * FROM B) [B1] ON [A1].F=[B1].F 
```

第一个查询显然会使用索引，那么第二个呢？在执行完括号中的两个 select 语句后，会发生 join，但我的猜测是索引无助于加快查询速度，因为它几乎是一个新表..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:13:37.373

查询并没有像您建议的那样按字面意思执行，首先执行内部查询，然后将它们的结果与外部查询组合。优化器将接受您的查询，并会考虑通过各种连接顺序、索引使用等获取数据的许多可能方法，并提出一个它认为足够优化的计划。

如果您执行这两个查询并查看它们各自的执行计划，我想您会发现它们使用完全相同的一个。

这是相同概念的一个简单示例。我这样创建了我的架构：

```
CREATE TABLE A (id int, value int)
CREATE TABLE B (id int, value int)

INSERT INTO A (id, value)
VALUES (1,900),(2,800),(3,700),(4,600)

INSERT INTO B (id, value)
VALUES (2,800),(3,700),(4,600),(5,500)

CREATE CLUSTERED INDEX IX_A ON A (id)
CREATE CLUSTERED INDEX IX_B ON B (id) 
```

并运行您提供的查询。

```
SELECT * FROM A INNER JOIN B ON A.id = B.id 
SELECT * FROM (SELECT * FROM A) A1 INNER JOIN (SELECT * FROM B) B1 ON A1.id = B1.id 
```

生成的计划如下所示：

![在此处输入图像描述](../Images/c1b1ca15dbef14d844e4bce73e934b10.png)

如您所见，两者都使用索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T20:13:02.870

SQL Server 查询优化器很有可能检测到查询 2 实际上与查询 1 相同并使用相同的索引方法。

是否会发生这种情况取决于很多因素：您的表设计、您的表统计信息、查询的复杂性等。如果您想确定，让 SQL Server 查询分析器向您展示**执行计划**。以下是一些可帮助您入门的链接：

*   [显示图形执行计划](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)
*   [检查查询执行计划](http://sqlserverpedia.com/wiki/Examining_Query_Execution_Plans)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T05:30:05.330

SQL Server 使用[谓词推送](http://www.davewentzel.com/content/nested-views-performance-and-predicate-pushdown)（又名*谓词下推*）将查询条件尽可能地移向源表。它不会按照你给它们加上括号的顺序盲目地做事。优化器使用复杂的规则（本质上是一种几何图形）来确定查询的*含义*，并根据需要重组其对数据的访问，以获得最佳性能，同时仍返回相同的最终数据集您的查询逻辑要求。

当查询变得越来越复杂时，优化器*有时*无法彻底搜索所有可能的执行计划，最终可能会出现次优结果。但是，您几乎可以假设像您提出的一个简单案例将*始终*被“透视”并优化掉。

所以答案是，您应该获得与合并两个查询一样好的性能。现在，如果您要加入的值是复合的，即它们是计算或连接的结果，那么您几乎肯定不会得到您想要的*谓词推送*，这将使索引有用，因为服务器不会t 或不能基于部分字符串或在执行反向算术等之后进行搜索。

我是否可以建议，将来，在此处提出此类问题之前，您只需检查自己的执行计划以验证它是否正在使用索引？您可以通过一些实验来回答您自己的问题。如果您仍有疑问，请发帖，但同时尝试做一些自己的研究，以表示对帮助您的人的尊重。

要查看执行计划，在 SQL Server Management Studio（2005 及更高版本）或 SQL 查询分析器（SQL 2000）中，您只需单击菜单栏上的“显示执行计划”按钮，运行查询，然后切换到底部显示执行计划的图形版本。一些小动作并将鼠标悬停在各个部分上会快速显示哪些索引正在用于哪些表。

但是，如果事情与您的预期不同，请不要自动认为服务器出错了。它可能决定在不使用索引的情况下扫描主表的成本更低——而且几乎总是正确的。扫描成本较低的原因有很多，其中一个是一个非常小的表，另一个是服务器统计猜测它必须返回的行数超过了表的很大一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T11:39:01.320

这两个查询是相同的。第二个查询将在转换过程中与第一个查询一样进行转换。

但是，如果您有特定要求，我建议您将整个代码放入。然后回答您的问题会容易得多。

# css - 为什么不是所有图像都换行

> ID：11459725
> 
> 赞同：0
> 
> 时间：2012-07-12T20:03:43.293
> 
> 标签：css

帮助我理解为什么只有最后一个盒子在包装......

html:

```
<p>
  <div class='box'>
    <img alt="Red_box" src="/assets/red_box.png" />
  </div>
  <div class='box'>
    <img alt="Vertical" src="/assets/vertical.png" />
  </div>
  <div class='box'>
    <img alt="Blue_box" src="/assets/blue_box.png" />
  </div>
  <div class='box'>
    <img alt="Horizontal" src="/assets/horizontal.png" />
  </div>
</p> 
```

CSS：

```
.box {
  float: left
} 
```

在这里你可以看到蓝色的盒子没有包裹，为什么？

**更新**事件序列：

窗口对于所有元素都足够宽：

![在此处输入图像描述](../Images/b78bafd67034eb440022557ced434a70.png)

最右边的盒子可以包装在哪里：

![在此处输入图像描述](../Images/6961660b625d82162509c32477b13451.png)

最右边的盒子再次换行：

![在此处输入图像描述](../Images/d37c5730ffc256d67c395120fce29654.png)

蓝框不换行：

![在此处输入图像描述](../Images/d1c8e74323877ab381244a2a9cee678a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:10:28.943

根据您的代码，什么都不应该换行。您是否将宽度设置为 p 的父级？

# sql - 递归 Oracle 查询

> ID：11459726
> 
> 赞同：1
> 
> 时间：2012-07-12T20:03:43.143
> 
> 标签：sql, oracle, hierarchical-data, recursive-query

我有三张桌子：

*   **Subscriptions**
    SubscriptionID
    SubscriptionName
    Inherits（可以为 NULL）

*   **SubscriptionOptions**
    SubscriptionOptionID
    SubscriptionID
    OptionID
    OptionValue

*   **选项**
    OptionID
    OptionDefaultValue
    描述

我需要传入一个带有多个选项和订阅 ID 的查询，大致如下：

```
SELECT optionid, optionvalue WHERE subscriptionid = x AND options IN (a, b, c, d, e, f) 
```

只有我需要通过这样的递归调用通过逻辑实现继承：

```
if subscriptionoption exists for subscription id & optionid
    use subscriptionoption.optionvalue in the row
else
    if inherits is not NULL
        call this function using inherited subscription id
    else
        use options.optiondefaultvalue for that optionid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:44:38.400

要在 SQL 中执行此操作，我认为您需要合并分层查询。这是一个摇摆，但我无法测试它。

```
SELECT optionID, NVL( MAX(optionValue), MAX(optionDefaultValue) ) optionValue
FROM (SELECT optionID, optionDefaultValue, subscriptionID, inherits
        FROM options CROSS JOIN subscriptions
        WHERE optionID IN (a,b,c,d,e,f)
     )
     LEFT JOIN subscriptionOptions USING (optionId, subscriptionID)
START WITH subscriptionID = x
CONNECT BY PRIOR optionValue IS NULL
       AND subscriptionID = PRIOR inherits
       AND optionID = PRIOR optionID
GROUP BY optionID 
```

另一种方法是编写一个函数，为单个 subscriptionID 和 optionID 实现递归逻辑，然后像这样调用它：

```
SELECT optionID, NVL( getSubscriptionOption( x, optionID), optionDefaultValue )
  FROM options
  WHERE optionID IN (a,b,c,d,e,f) 
```

该函数可能类似于：

```
FUNCTION getSubscriptionOption( pSubID NUMBER, pOptID NUMBER )
  RETURN subscriptionOptions.optionValue%TYPE
  IS
    l_optionValue subscriptionOptions.optionValue%TYPE;
    l_inherits    subscriptionOptions.inherits%TYPE;
  BEGIN
    SELECT optionValue
      INTO l_optionValue
      FROM subscriptionOptions
      WHERE subscriptionID = pSubID
        AND optionID = pOptID;
    RETURN l_optionValue;
  EXCEPTION
    WHEN no_data_found THEN
      SELECT inherits
        INTO l_inherits
        FROM subscriptions
        WHERE subscriptionID = pSubID;
      IF inherits IS NULL THEN
        RETURN NULL;
      ELSE
        RETURN getSubscriptionOption( l_inherits, pOptID );
      END IF;
  END; 
```

或者可以写成使用循环而不是递归。

# c# - 使用用户输入自动化 GUI Windows 应用程序以每周运行

> ID：11459728
> 
> 赞同：1
> 
> 时间：2012-07-12T20:04:04.907
> 
> 标签：c#, user-interface, automation

我有一个简单的 Windows 应用程序，它有两个文本框和一个名为“运行”的按钮。目前，我必须每周在文本框中手动输入值并单击“运行”按钮。我想自动化这个过程，这样就不需要用户交互了。我可以写一个脚本来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:27:31.943

我假设您已经使用 C# 标记了您的问题，因此您拥有 Windows 应用程序的源代码。如果是这样，那么通过 Windows [Task Scheduler](https://en.wikipedia.org/wiki/Windows_Task_Scheduler)之类的东西在命令行上传递文本框值，解析应用程序中的命令行参数，然后在按下 Run 时将它们传递给你调用的任何东西，都是相当简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:26:56.860

在每个 X 间隔启动它是一回事。我建议使用 Windows[任务计划程序](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)。但是，听起来您需要在启动 GUI 应用程序后与其进行交互。为此，我所能做的就是为您指明正确的方向。唯一想到的是使用第三方 GUI 测试套件。看看[这份清单](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)。您可以编写任何这些套件的脚本以与 GUI 交互，即输入一些数据并单击`Run`按钮。

# php - 多个ajax请求不会同时触发

> ID：11459730
> 
> 赞同：1
> 
> 时间：2012-07-12T20:04:07.407
> 
> 标签：php, jquery, ajax, request, timing

我正在向 PHP 文件发出 3 个后续 AJAX 请求。

```
$.post("page/1");
$.post("page/2");
$.post("page/3"); 
```

他们似乎都在等待对方完成后再开火。我可以在 Network Console 中观看活动，并看到他们确实在等待对方。我不知道如何让他们一次全部开火。

我正在使用 PHP 会话，我在这里看到这可能是问题所在。但是我按照建议添加了 session_close() 并没有帮助。我不认为 PHP 是问题，因为至少浏览器会进行 3 次 ajax 调用，然后他们会错误地排队。但事实并非如此，他们都在等待对方。1个接一个。

我检查了 jQuery Ajax.settings 并将 async 设置为 true。我正在使用来自 CDN 的 1.7.2。

关于在哪里查看如何让这些一次性全部触发的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:25:36.650

默认情况下，您可以有 4 个**并发**HTTP 请求。

至于 XMLHttpRequests，它有时是 6 (FF)。但因人而异。

看起来它们是由相关领域决定的。

请参阅此[相关问题](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)。

# java - Android、JUnit 测试和失败的 BINDER TRANSACTION

> ID：11459732
> 
> 赞同：0
> 
> 时间：2012-07-12T20:04:18.780
> 
> 标签：java, android, junit, android-testing

我有大量的测试。当我再添加一些时，我得到`E/JavaBinder(1705): !!! FAILED BINDER TRANSACTION !!!`. 我该如何解决？我目前的 hack 是有多个 test`TestSuite`只测试我的测试的一个选择子集。必须有更好的方法来做到这一点。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:09:29.297

找到这个[问题和回复](https://stackoverflow.com/questions/3576887/large-amount-of-unit-tests-cause-freezes-with-failed-binder-transaction)，说明SDK tools v8已经修复了这个问题。我正在使用 Android 2.1（即 SDK v7）的旧手机上运行测试。较新的手机可能不会遇到此问题；在使用运行 Android 4 的 Nexus 手机进行测试后，我不再遇到此问题。

# node.js - 签入 node_modules 与 shrinkwrap

> ID：11459733
> 
> 赞同：16
> 
> 时间：2012-07-12T20:04:23.493
> 
> 标签：node.js, npm

签入 node_module 是社区标准，但现在我们也可以选择使用 shrinkwrap。后者对我来说更有意义，但总有可能有人“强制发布”并引入了错误。有什么额外的缺点吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T23:20:08.800

我最喜欢的关于这个主题的帖子/哲学可以追溯到 2011 年（在 node.js 领域很长一段时间）：

[https://web.archive.org/web/20150116024411/http://www.futurealoof.com/posts/nodemodules-in-git.html](https://web.archive.org/web/20150116024411/http://www.futurealoof.com/posts/nodemodules-in-git.html)

直接引用：

> 如果您有要部署的应用程序，请将所有依赖项签入 node_modules。如果您使用 npm do deploy，只需为这些模块定义 bundleDependencies。如果您有需要编译的依赖项，您仍然应该签入代码并在部署时运行 $ npm rebuild。
> 
> 我告诉过这个的每个人都告诉我我是个白痴，然后几周后告诉我我是对的，将 node_modules 签入 git 对部署和开发来说是一件好事。客观上更好，但这里有一些我似乎得到的问题/投诉。

我认为这仍然是最好的建议。

强制发布场景很少见，`npm shrinkwrap`可能适用于大多数人。`node_modules`但是，如果您要部署到生产环境，没有什么比检入整个目录更能让您高枕无忧了。

或者，如果您真的，真的不想签入`node_modules`目录但想要更好地保证没有强制推送，我会遵循以下建议`npm help shrinkwrap`：

> 如果您想避免拜占庭作者用破坏您的应用程序的代码替换您正在使用的包的任何风险，您可以修改收缩包装文件以使用 git URL 引用而不是版本号，以便 npm 始终从 git 获取所有包。

当然，有人可以运行一个奇怪的`git rebase`东西并修改一个 git commit 哈希......但现在我们快疯了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T00:49:32.157

npm FAQ 直接回答了这个问题：

> *   将 node_modules 检入 git 以获取您部署的内容，例如网站和应用程序。
> *   不要将 node_modules 签入 git 以获取打算重用的库和模块。
> *   使用 npm 管理开发环境中的依赖项，而不是部署脚本中的依赖项。

引用自[npm FAQ](https://npmjs.org/doc/faq.html#Should-I-check-my-node_modules-folder-into-git)

# ios - 以编程方式获取 TabBar 中 ViewController 的索引

> ID：11459737
> 
> 赞同：1
> 
> 时间：2012-07-12T20:04:29.273
> 
> 标签：ios, tabview

如何从视图控制器文件中以编程方式获取视图控制器选项卡栏中的索引（最左侧选项卡从 0 开始）。

我正在用这个切换视图：

```
[self.tabBarController setSelectedIndex:nextIndex]; 
```

我希望能够设置：

```
int nextIndex = currentIndex++; 
```

我如何获得当前指数？

编辑：以下三个答案都是正确的，谢谢大家。公平地说，我会选择最先发布的那个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:09:24.723

获取选定的索引：

```
NSUInteger selectedIndex = self.tabBarController.selectedIndex; 
```

获取当前 ViewController 的索引（来自 VC）：

```
NSUInteger selectedIndex = [self.tabBarController.viewControllers indexOfObject:self]; 
```

设置索引：

```
NSUInteger nextIndex = selectedIndex + 1;
if(nextIndex < [self.tabBarController.viewControllers count])
    [self.tabBarController setSelectedIndex:nextIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:10:00.967

您可以使用以下属性获取 tabController 的当前索引`selectedIndex`：

```
[self.tabBarController selectedIndex] 
```

此外，如果您想获取 ViewController 的索引，您可以使用属性访问选项卡数组`viewControllers`。

查看Apple[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)以获取更多信息。

# c++ - jpeg 和 tiff 像素值提取

> ID：11459741
> 
> 赞同：0
> 
> 时间：2012-07-12T20:04:46.503
> 
> 标签：c++, jpeg, tiff, cimg

我希望能够比较 2 个图像（相同格式）并对这些图像执行位级比较。1）为标题创建结构。2）打开文件并读取从 SOI 标记的图像数据偏移开始的内容。3）将各自的值存储在 3d 数组或向量数组中。4）进行元素比较和返回一个结果。我已经成功地能够使用 fread() 为 bmp 执行此操作，并将 3d 数组用作容器，其中包含可以分配和取消分配内存的方法。（但 bmp 是未压缩的图像）。不知何故，这个过程对于 jpeg 和 tiff 来说似乎要困难得多。即使在理解了这两种格式的标题格式之后，我的代码也说它无法读取元素 [45][24] 的颜色。

我的 bmp 代码如下： ...snip ...

```
unsigned char*** create3dArray(FILE **fptr1,int height,int width,int depth)
{
       unsigned char*** databuff = new unsigned char **[height];

   // Allocate an array for each element of the first array
   for(int x = 0; x < height; ++x)
   {
        databuff[x] = new unsigned char *[width];

        // Allocate an array of integers for each element of this array
        for(int y = 0; y < width; ++y)
        {
            databuff[x][y] = new unsigned char[depth];

            // Specify an initial value (if desired)
            for(int z = 0; z < depth; ++z)
            {
                    databuff[x][y][z] = -1;

            }
        }
   }

   if ((sizeof(fheader) != 14) || (sizeof(iheader) != 40)) 
   {
        printf("Header structs are not properly packed\n");
    return 0;
    }

  if (fread(&fheader, sizeof(fheader), 1, *fptr1) != 1)
  {
    printf("Couldn't read fheader.\n");
    return 0;
   }

   if (fread(&iheader, sizeof(iheader), 1, *fptr1) != 1) 
  {
    printf("Couldn't read iheader.\n");
    return 0;
}
 // uncomment to get an idea of what the headers look like.
if ((iheader.height != height) || (iheader.width != width) || (iheader.bits != 24)) 
   {
    printf("This only works for 512x512 24-color bitmaps\n");
    return 0;
    }

    if (fheader.offset != 54) {
    printf("This only works if the offset is equal to 54\n");
    return 0;
    }
    for (int i = 0; i < iheader.height; i++) {
    for (int j = 0; j < iheader.width; j++) {
         if (fread(&databuff[i][j][0], 3, 1, *fptr1) != 1 ){
            printf("Couldn't read colors for element [%d][%d]\n", i, j);
                        return 0;
                    }
            }
            }

 return databuff;
}

template <typename Tx>
void destroy3dArray(Tx*** myArray)
{
delete[] **myArray;
delete[] *myArray;
delete[] myArray;
}

int main()
{
 FILE *fptr1,*fptr2;        // two file pointers one for each file.
 int count=0;
 float total_bits=0;
 float ber=0;               //variable for bit error rate
 int width,height,depth;
 cout<<"Please enter height of the image "<<endl;
 cin>>height;
 cout<<"Please enter width of the image "<<endl;
 cin>>width;
 cout<<"Please enter depth of the image. The max depth can be 3 for RGB values"<<endl;
 cin>>depth;
 char *filename = "lena512.bmp";
 char *filename2 = "lena512_2.bmp";
 //std::string trueBinaryDataInString[512][512][3];

 if ((fptr1 = fopen(filename, "r")) == NULL) {
            printf("Coulsn't open file %s for reading.\n", filename);
            return 1;
        }
 unsigned char*** trueArray = create3dArray(&fptr1,height,width,depth);

 for(int i=0;i<height;i++)
{   
    //std::cout << "Row " << i << std::endl;
    for(int j=0;j<width;j++)
    {
        for(int k=0;k<depth;k++)
        {

            total_bits += ToBinary(trueArray[i][j][k]).length();

        }
        //std::cout<<endl;
    }
//std::cout<<endl;
}
 std::cout << total_bits<<endl;
 //createAnddestroy3dArray<unsigned char> MyArray;
 if ((fptr2 = fopen(filename2, "r")) == NULL) {
            printf("Coulsn't open file %s for reading.\n", filename2);
            return 1;
        }
 unsigned char*** trueArray2 = create3dArray(&fptr2,height,width,depth);
 /*for(int i=0;i<512;i++)
{
    std::cout << "Row " << i << std::endl;
    for(int j=0;j<512;j++)
    {
        for(int k=0;k<3;k++)
        {
            std::cout<<" "<<ToBinary(trueArray2[i][j][k]);
        }
        std::cout<<endl;
    }
std::cout<<endl;
}
 */
 /******** BIT Error Rate Calculation ******/
for(int i=0;i<height;i++)
{
for(int j=0;j<width;j++)
    {
    for(int k=0;k<depth;k++)
        {
          if(ToBinary(trueArray[i][j][k])!= ToBinary(trueArray2[i][j][k]))  
            {
 std::cout<<ToBinary(trueArray[i][j][k])<< " " <<ToBinary(trueArray2[i] [j][k])<<endl;
            count++;
            }
            else 
            continue;
        }
    }
}
 ber = (count/total_bits)*100;
 std::cout<<"Bit Error Rate (BER) = "<<ber<<endl;
 destroy3dArray<unsigned char>(trueArray);    //Deallocating memory for array 1
 destroy3dArray<unsigned char>(trueArray2);   //Deallocating memory for array 2
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:49:18.343

JPEG 和 TIFF 是压缩格式，在编码图像时可能具有您可能期望的更大自由度。

所以你从错误的角度来处理问题。为了支持图像格式的选择，您需要库来读取文件并将其解压缩为位图，例如 24 位 RGB 或其他格式。可能需要进行色彩空间转换，因为其中一张比较图像可能被解压缩为 4:2:2 YUV 空间，另一张为 4:2:0 等。

利用您选择的一些图像库（也许您也有操作系统限制），您将能够将文件加载和解压缩为您感兴趣的像素格式的二维数组。完成后，您会将其输入您的 C++ 数字运算代码并从那里进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:44:14.513

成功解析和处理 JPEG 和 TIFF 文件中可能存在的变化是很*困难*的。有许多令人惊讶的细节：颜色深度、渐进式编码、EXIF 数据、缩略图——不胜枚举。利用图书馆，不要重新发明轮子。使用 libjpeg 和 libtiff 加载合适的（RGB？）缓冲区进行比较。

[http://www.libtiff.org/](http://www.libtiff.org/)

[http://www.ijg.org/](http://www.ijg.org/)

FWIW，libpng 也非常好 - 如果您也想将图像比较扩展到该格式。[http://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)

# backbone.js - 我们可以为骨干应用程序创建环境变量吗？

> ID：11459745
> 
> 赞同：6
> 
> 时间：2012-07-12T20:05:06.513
> 
> 标签：backbone.js

我们正在构建一个使用一组 REST API 的主干应用程序。理想情况下，我们想要为 dev 和 live 提供不同的配置文件，这些配置文件由环境变量决定。可能吗。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T14:29:01.610

I recommend you to have one file in a way like this:

```
var YourProject = {};
YourProject.Config = {
   Local : {
     db : 'mysql:dumy:dummy@localhost',
     relativeUrl : 'blabla',
     otherConfig : '123456'
   },
   Dev : {
     db : 'mysql:dumy:dummy@localhost',
     relativeUrl : 'blabla',
     otherConfig : '123456'
   },
   Production : {
     db : 'mysql:dumy:dummy@localhost',
     relativeUrl : 'blabla',
     otherConfig : '123456'
   }
} 
```

And then in your utilities to have something like this:

```
YourProject.ConfigHandler = {
  getValue : function(key){
    var env;
    switch( window.location.hostname ){
      case "localhost":
      case "127.0.0.1":
        env = 'Local';
        break;
      case "dev.yourdomain.com":
        env = 'Dev';
        break;
      case "yourdomain.com":
        env = 'Production';
        break;
      default:
        throw('Unknown environment: ' + window.location.hostname );
    }
    return YourProject.Config[env][key];
  }
}; 
```

So you will have just one file and for call differents API DB urls you will need to call just one line:

```
YourProject.ConfigHandler.getValue( 'db' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:34:29.450

您的问题可以针对任何 javascript 应用程序，而不仅仅是骨干应用程序，因此以下答案更笼统：

我要做的是有一个 config.js 文件，它是您的 HTML 中加载的第一件事。内容只是一个带有配置的 JSON 对象：

```
var CONFIG = {
    debug : false,
    server : 'http://production.foo.com'
}; 
```

现在您的应用程序的每个组件都可以访问配置，因为 CONFIG 是一个全局对象。所以你可以在你的应用程序的任何地方写这个：

```
if (CONFIG.debug) {
    console.log('my debug stuff...');
} 
```

诀窍是拥有 2 个 config.js 文件。一种用于开发，一种用于生产。当您想要发布您的应用程序时，捆绑您的生产 config.js 文件并将其上传到您的服务器。

您可以创建一个构建脚本来构建您的生产应用程序。作为第一步，它可以将正确的 config.js 文件复制到正确的位置。您还可以添加步骤来缩小 js 文件，将它们捆绑到一个文件中等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T20:38:33.530

我改编了丹尼尔对 Coffeescript/CommonJS 的好回答，所以`config.coffee`我有：

```
env = switch window.location.hostname
  when "localhost", "127.0.0.1"
    "development"
  when "www.example.com", "example.com"
    "production"

config =
  development:
    urlRoot: "http://localhost:3000"
  production:
    urlRoot: "http://www.example.com"

module.exports = config[env] 
```

然后客户端代码如下所示：

```
config = require("config")
config.urlRoot 
```

# css - Firefox 和 Opera 中的 Webfont 平滑和抗锯齿

> ID：11459746
> 
> 赞同：113
> 
> 时间：2012-07-12T20:05:11.173
> 
> 标签：css, fonts, webfonts, antialiasing

我在我的网站上使用了定制的网络字体。为了设置渲染输出的样式，我使用了以下代码：

```
//-webkit-text-stroke-width: .05px;
//-webkit-text-stroke-color: white;
-webkit-font-smoothing: antialiased; 
```

这在 Safari 和 Chrome 上运行良好（边缘更锐利，线条更细）。有没有办法在 Firefox 和 Opera 上实现相同的样式？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-07-29T15:15:04.733

由于 Opera 由 Blink 提供支持，因为 15.0 版`-webkit-font-smoothing: antialiased`也可以在 Opera 上运行。

Firefox 终于添加了一个属性来启用灰度抗锯齿。经过长时间的[讨论](https://bugzilla.mozilla.org/show_bug.cgi?id=857142)，它将在版本 25 中提供另一种语法，指出该属性仅适用于 OS X。

```
-moz-osx-font-smoothing: grayscale; 
```

这应该可以修复模糊的图标字体或深色背景上的浅色文本。

```
.font-smoothing {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
} 
```

你可以阅读[**我关于 OSX 上字体渲染的文章，**](http://max.hn/thoughts/better-font-rendering-on-osx)其中包含一个 Sass mixin 来处理这两个属性。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-12T20:27:55.727

好吧，Firefox 不支持这样的东西。

在来自 Mozilla 的参考页面中，`font-smooth`将 CSS 属性指定为在呈现字体时控制抗锯齿的应用，但该属性**已从**本规范中删除，目前不在标准轨道上。

此属性仅在 Webkit 浏览器中受支持。

如果你想要一个替代方案，你可以检查这个：

*   [文本阴影抗锯齿 | Philip Renich，网站 - 博客](http://www.elfboy.com/blog/text-shadow_anti-aliasing/)
*   [cufón - 人民的字体](http://cufon.shoqolate.com/generate/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-06T22:50:51.240

**案例：深色背景上带有锯齿网络字体的浅色文本 Firefox (v35)/Windows**
示例：[Google Web Font Ruda](http://codepen.io/Volker_E/pen/azVLbd)

令人惊讶的解决方案 -
向应用的选择器添加以下属性：

```
selector {
    text-shadow: 0 0 0;
} 
```

实际上，结果与 相同`text-shadow: 0 0;`，但我喜欢明确设置模糊半径。

这不是一个通用的解决方案，但在某些情况下可能会有所帮助。此外，到目前为止，我还没有经历过（也没有彻底测试过）这个解决方案对性能的负面影响。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-03T14:49:53.800

遇到问题后，我发现我的 WOFF 文件没有正确完成，我向[FontSquirrel](http://www.fontsquirrel.com/tools/webfont-generator)发送了一个新的 TTF，它为我提供了一个在 Firefox 中流畅的 WOFF，而无需添加任何额外的 CSS。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-05T17:32:02.503

我通过此链接找到了解决方案：http: [//pixelsvsbytes.com/blog/2013/02/nice-web-fonts-for-every-browser/](http://pixelsvsbytes.com/blog/2013/02/nice-web-fonts-for-every-browser/)

循序渐进的方法：

*   将您的字体发送到 WebFontGenerator 并获取 zip
*   在 Zip 文件中找到 TTF 字体
*   然后，在 linux 上，执行以下命令（或安装方式`apt-get install ttfautohint`）：
    `ttfautohint --strong-stem-width=g neosansstd-black.ttf neosansstd-black.changed.ttf`
*   然后，再将新的 TTF 文件 (neosansstd-black.changed.ttf) 发送到 WebFontGenerator
*   你得到一个完美的 Zip 与你所有的 webfonts ！

我希望这将有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-02T17:58:28.047

...在正文标签中，这些内容和字体总体上看起来更好...

```
body, html {
width: 100%;
height: 100%;
margin: 0;
padding: 0;
text-rendering: optimizeLegibility;
text-rendering: geometricPrecision;
font-smooth: always;

font-smoothing: antialiased;
-moz-font-smoothing: antialiased;
-webkit-font-smoothing: antialiased;
-webkit-font-smoothing: subpixel-antialiased;
}

#content {
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;

} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-07-29T18:17:56.997

当文本颜色较暗时，在 Safari 和 Chrome 中，使用 text-stroke css 属性可以获得更好的结果。

```
-webkit-text-stroke: 0.5px #000; 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2013-06-07T01:57:25.290

添加

```
font-weight: normal; 
```

您的 @font-face 字体将修复 Firefox 中的粗体外观。

# javascript - Firefox 和 Chrome 中具有日期选择器行为的奇怪函数

> ID：11459747
> 
> 赞同：0
> 
> 时间：2012-07-12T20:05:16.583
> 
> 标签：javascript, jquery, jquery-ui

我想在一页上使用几个日期选择器，所以我把日期选择器放在一个函数中。该函数在 onfocus 事件上触发。这在 IE 中完美运行，在 Firefox/chrome 中也是如此，但在 Firefox 中，我必须单击输入字段，失去焦点并再次单击，然后才能获得日期选择器....

见例子：[http ://www.huurhulp.nl/prijzen.php](http://www.huurhulp.nl/prijzen.php)

首先单击第二个项目符号“wij zijn bepaalde periodes gesloten”以取消隐藏输入字段。

知道如何让它在 Firefox 中一键运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:59:33.373

而不是在`onfocus`事件中创建您的日期选择器，而是在您的`$(document).ready`块中创建它们。

datepicker 插件在内部使用焦点事件来显示 datepicker 小部件，因此使用它来创建小部件是一个坏主意。

查看您的代码执行以下操作应该可以：

```
$(function() {
    $('.datums').datepicker({
        //List your options here.
    });
}); 
```

# php - 如何允许我的用户拥有自定义域？

> ID：11459748
> 
> 赞同：0
> 
> 时间：2012-07-12T20:05:16.693
> 
> 标签：php, .htaccess

我想创建一个允许我的用户拥有自定义域的功能。就像博主/wordpress 正在做的那样。

例如

```
http://www.domain.com 
```

用户可以拥有自己的自定义域

```
http://www.custom.com 
```

其中输入 www.custom.com 映射到 www.domain.com

我该怎么做？我正在使用 php。这是服务器配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:10:28.813

我用我的多账户平台来做到这一点。每次他们指定域名时，我都会使用 cpanel api 创建一个附加域，并要求他们将其域上的名称服务器更改为我的主机。所以这里有一个例子： www.example.com ask user to change nameservers to ns1.hostingwerks.com and ns2.hostingwerks.com prompt user for their domain use api to add on their domain 告诉用户它已经完成，但要留出一些时间propigate 这需要你有 whm 访问权限，但它可能会给你一些帮助。

```
if(!empty($domain) AND $olddomain != $domain){

    $d = explode(".",$origdomain);
    if(count($d) != 1){
    if($d[0] == "www" OR $d[0] == "http://www" OR $d[0] == "https://www"){
    $origdomain = $d[1] .".". $d[2];
    }
    else {
    $origdomain = $d[0] .".". $d[1];
    }
    }
    if(substr($origdomain, 0, 8) == "https://"){
    $origdomain = substr($origdomain, 8);
    }
    elseif(substr($origdomain, 0, 7) == "http://"){
    $origdomain = substr($origdomain, 7);
    }
    $dom = $origdomain;
    $user = "your cpanel client username";
    $addonpass = "your new domain's password";
    $cpanel_skin = "x3";
    $passw = "your cpanel password";
    $ownername = "your cpanel hosting user name";
    $pass = "your cpanel password";
    $host = "localhost";
    //Using 'explode' breaks the domain into its constituent pieces, the name and the extension (TLD), and puts them in an array
    $domai = explode('.',$dom);
    /*the directory path is defined by the first element appended to public_html.  It does not matter where this file, 'addonhelper.php', is located - 
    the program will always install the addon domains to this directory.  If this needs to be changed, this line needs to be updated.
    Some versions of Cpanel do not allow for this to be changed and will ignore changes.  Most notably - version X.*/
    $dir="public_html/sys";
    //the user is the first element of the $domain, as requested
    $user=trim($domai[0]);
    //put the domain back together and trim whitespace.
    $dom=trim($domai[0]).".".trim($domai[1]);
    //create the cpanel request.
    $request = "/frontend/$cpanel_skin/addon/doadddomain.html?domain=$dom&user=$user&dir=$dir&pass=$addonpass";
    //process the request with addondomain below
    $sock = @fsockopen($host,2082);
    if(!$sock) {
        print('Socket error');
        exit();
    }
    //authenticate the connection
    $authstr = "$ownername:$passw";
    //make the passphrase slightly more difficult to decipher
    $pass = base64_encode($authstr);
    $in = "GET $request\r\n";
    $in .= "HTTP/1.0\r\n";
    $in .= "Host:$host\r\n";
    $in .= "Authorization: Basic $pass\r\n";
    $in .= "\r\n";
    //process
    fputs($sock, $in);
    while (!feof($sock)) {
        $result .= fgets ($sock,128);
    }
    fclose( $sock ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:06:57.993

您需要更改新站点的 DNS 才能转发到他们的站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:16:44.180

如果您只是想更改单个域，请将其上的名称服务器更改为相同，并将其设置为 plesk/cpanel 中的附加组件到同一文件夹。或者您可以转发域并将其屏蔽。这也有效。[http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name](http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name)

# java - 迷宫生成 prim 算法并非遍历所有单元格

> ID：11459752
> 
> 赞同：3
> 
> 时间：2012-07-12T20:05:24.883
> 
> 标签：java, algorithm, prims-algorithm

我正在尝试实现 Prim 迷宫生成算法：

*   从一个充满墙壁的网格开始。
*   选择一个单元格，将其标记为迷宫的一部分。将单元格的墙壁添加到墙壁列表中。
*   虽然列表中有墙：
    *   从列表中随机选择一面墙。如果对面的牢房
        还没有进入迷宫：
        *   使墙壁成为通道，并将另一侧的单元格标记为迷宫的一部分。
        *   将单元格的相邻墙添加到墙列表中。
    *   如果对面的牢房已经在迷宫中，则将墙从列表中删除。

删除一些实现细节，我的实现如下所示：

```
Cell[][] maze 
```

是带有单元格的矩阵。每个单元格都有左/右/上/按钮墙。边界墙标记为`boolean frontier`并且不是实施的一部分，因为我想保持我的迷宫框架。

```
public Cell[][] prim(){
    List<Wall> walls = new ArrayList<Wall>();

    //Pick a cell, mark it as part of the maze
    int initialCellI = rnd(sizeX)-1;
    int initialCellJ = rnd(sizeY)-1;
    Cell randomCell = maze[initialCellI][initialCellJ];
    randomCell.setPartOftheMaze(true);

    //Add the walls of the cell to the wall list.
    if ((randomCell.getLeft() != null) && (!randomCell.getLeft().isFrontier()))
        walls.add(randomCell.getLeft());
    if ((randomCell.getRight() != null) && (!randomCell.getRight().isFrontier()))
        walls.add(randomCell.getRight());
    if ((randomCell.getButtom() != null) && (!randomCell.getButtom().isFrontier()))
        walls.add(randomCell.getButtom());
    if ((randomCell.getUp() != null) && (!randomCell.getUp().isFrontier()))
        walls.add(randomCell.getUp());

    //While there are walls in the list:
    while (!walls.isEmpty()){

        //Pick a random wall from the list.
       Wall randomWall = randomElement(walls);
       //pick the cell opposite to this wall. 
       Cell opositeSideCell = getNeightbourCell(randomWall, maze);
       if (opositeSideCell.isPartOftheMaze()){
           //If the cell on the opposite side already was in the maze, remove the wall from the list.
           walls.remove(randomWall);
       }
       else{
          // Make the wall a passage and mark the cell on the opposite side as part of the maze.
           this.removeWall(randomWall, maze);
           opositeSideCell.setPartOftheMaze(true);

            //Add the walls of the cell to the wall list.
            if ((opositeSideCell.getLeft() != null) && (!opositeSideCell.getLeft().isFrontier()))
                walls.add(opositeSideCell.getLeft());
            if ((opositeSideCell.getRight() != null) && (!opositeSideCell.getRight().isFrontier()))
                walls.add(opositeSideCell.getRight());
            if ((opositeSideCell.getButtom() != null) && (!opositeSideCell.getButtom().isFrontier()))
                walls.add(opositeSideCell.getButtom());
            if ((opositeSideCell.getUp() != null) && (!opositeSideCell.getUp().isFrontier()))
                walls.add(opositeSideCell.getUp());   
       }
    }
    return maze;
} 
```

我的问题是我的迷宫没有完成，并不是所有的单元格都被遍历了。有时只遍历了几个单元格，几乎所有单元格都完成了。我相信我错过了一些无法弄清楚的东西。

请帮忙。

部分穿越的迷宫见下图。

![在此处输入图像描述](../Images/71a749dd2835dc123b52cffc2d7be95f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:06:24.543

嗯，我解决了这个问题。这个纯Java问题和算法无关。我比较了两堵墙。

```
public class Wall{

    Point p1;
    Point p2;
    }

    public class Point{
    int x;
    int y;
    } 
```

如果我使用 p1 和 p2 实现 Wall 类 equals() 和 hashCode()。然后在 leftCell.rightWall 将等于 rightCell.leftWall ，这就是问题所在。

# vb.net - 使用 for 循环进行分组

> ID：11459754
> 
> 赞同：-3
> 
> 时间：2012-07-12T20:05:29.743
> 
> 标签：vb.net, for-loop

如何在 vb.net 中使用 for 循环显示以下内容？

```
Type1
Desc1    1      $400
Desc2    1      $300

Type2
Desc3    1      $1400
Desc4    2      $2300 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:03:19.323

如果没有进一步的信息，将很难制定一个准确的答案。但是，此代码示例可能会对如何解决您的问题有所帮助。

只需创建一个 VB.Net 控制台应用程序，将下面的代码示例复制并粘贴到主模块中并运行。

```
Module Module1

    Sub Main()
        Dim table As New System.Data.DataTable("TestTable")
        With table
            .Columns.Add("Type", GetType(String))
            .Columns.Add("Description", GetType(String))
            .Columns.Add("Number", GetType(Integer))
            .Columns.Add("Value", GetType(Decimal))
        End With
        table.Rows.Add("Type1", "Desc1", 1, 400.0)
        table.Rows.Add("Type1", "Desc2", 1, 300.0)
        table.Rows.Add("Type2", "Desc3", 1, 1400.0)
        table.Rows.Add("Type2", "Desc4", 2, 2300.0)
        table.Rows.Add("Type2", "Desc5", 2, 700.0)

        Dim outputDictionary As New Dictionary(Of String, List(Of String))
        For Each row As DataRow In table.Rows
            Dim typeName As String = CStr(row("Type"))
            If (Not outputDictionary.ContainsKey(typeName)) Then
                outputDictionary.Add(typeName, New List(Of String))
            End If
            outputDictionary(typeName).Add(String.Format("{0} {1} {2}", CStr(row("Description")), CInt(row("Number")).ToString(), CStr(row("Value"))))
        Next

        For Each namedType In outputDictionary
            Console.WriteLine(namedType.Key)
            For Each item In namedType.Value
                Console.WriteLine("     " & item)
            Next
        Next

        Console.ReadKey(True)
    End Sub

End Module 
```

# sql - 是否可以在同一个表中引用不同的列？

> ID：11459758
> 
> 赞同：9
> 
> 时间：2012-07-12T20:05:45.147
> 
> 标签：sql, create-table, hierarchical

如果博客有一个“类别”表，如下所示：

```
CREATE TABLE categories
(
  id INTEGER PRIMARY KEY AUTO_INCREMENT,
  parent_id INTEGER NOT NULL,
  name VARCHAR(30) NOT NULL,
  description TEXT,
  count INTEGER NOT NULL DEFAULT 0
); 
```

如果 parent_id 字段旨在引用类别表的“id”字段，那么我如何添加一个约束来确保插入到 parent_id 中的值引用 id 字段？

我只是想确保只有存在的类别 id 值可以用作新插入类别的父级。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T20:10:03.590

是的，您可以引用同一个表中的列。

但是该列应该可以为空，否则您无法插入第一条记录。

```
CREATE TABLE categories
(
  id INTEGER PRIMARY KEY AUTO_INCREMENT,
  parent_id INTEGER NULL,
  name VARCHAR(30) NOT NULL,
  description TEXT,
  count INTEGER NOT NULL DEFAULT 0,
  FOREIGN KEY (parent_id) REFERENCES categories(id)
); 
```

请注意，在 REFERENCES 关键字之后，表名不是可选的，因此即使您引用同一个表中的列，也必须指定它。从[文档](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)中：

```
参考定义：
    参考 tbl_name (index_col_name,...)
      [匹配完整 | 比赛部分 | 匹配简单]
      [ON DELETE reference_option]
      [ON UPDATE reference_option]

```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/f84d6/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:12:04.027

只需使用普通的外键：

```
ALTER TABLE categories ADD CONSTRAINT FK_categories_Parent_ID 
REFERENCES categories (ID) 
```

但是 Parent_ID 应该可以为空，因为您将永远无法插入记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:12:31.777

您可以使用以下链接。它有你如何做到的Oracle数据库。

[http://www.adp-gmbh.ch/ora/data_samples/hierarchic_yahoo.html](http://www.adp-gmbh.ch/ora/data_samples/hierarchic_yahoo.html)

谢谢

# java - 消息队列中作业的唯一 ID？

> ID：11459759
> 
> 赞同：4
> 
> 时间：2012-07-12T20:05:51.077
> 
> 标签：java, message-queue, rabbitmq

我有一个正在编写的应用程序，它需要在后台执行长时间的计算，所以我基本上有以下工作流程：

1.  客户端将作业提交到边缘“调度程序”服务器。
2.  Dispatcher 服务器将作业提交到消息队列。
3.  计算服务器拉取作业并开始工作。

计算服务器还提供工作状态的实时反馈，以便客户端可以看到进度。

我现在遇到的主要问题是弄清楚如何为队列中提交的消息获取唯一的作业 ID，并且还要弄清楚哪个服务器为消息提供服务。一旦最初提交作业（第 1 步），客户端应该会收到一个标识作业的唯一令牌。然后，客户端应该能够定期轮询调度程序服务器以检查令牌的状态是否已启动。

在计算服务器为请求提供服务后，客户端应在轮询调用中获取编码器服务器的 DNS 地址或 IP 地址。

我怎样才能做到这一点？消息队列是否为队列中的每条消息提供了唯一标识令牌的概念？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T22:50:49.920

事实证明，RabbitMQ[实际上确实为消息提供了唯一的 id](http://www.rabbitmq.com/tutorials/tutorial-six-java.html)，这在 RPC 应用程序中尤其有用，这是我正在寻找的那种应用程序。每条消息都有一个`correlationId`唯一标识它的信息，并且可以提供一个`callback`信息，以便在作业完成时或实际上在任何时候通知原始服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:31:55.063

[您可以使用java.util.UUID](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html)类生成通用唯一标识符。

示例代码：

```
UUID uuid = UUID.randomUUID();
System.out.println("UUID: " + uuid.toString()); 
```

样本输出：`UUID: d5a43450-2321-40ac-9746-9cf5d7447aca`

对于消息队列部分，为了避免重新发明轮子，我建议您首先检查基于 JMS 的解决方案。有[很多选择](https://stackoverflow.com/questions/123817/which-jms-implementation-do-you-use)。

# spring - scala jdbc 模板和行映射器

> ID：11459767
> 
> 赞同：0
> 
> 时间：2012-07-12T20:06:22.340
> 
> 标签：spring, scala, jdbc

我是 Scala 的新手，我正在查看一些涉及 Spring JDBC 模板和 RowMapper 的 Scala 代码：

它是这样的：

```
val db = jdbcTemplate.queryForObject(QUERY, new RowMapper[SomeObject]() {
  def mapRow(ResultSet rs, int rowNum) {
     var s = new SomeObject()
     s.setParam1 = rs.getDouble("columnName")
     return s
  }
  })
   db 
```

我是凭记忆写的，所以我只使用了通用名称。

我想知道为什么 db 写在最后。我想不出它有什么用途。

此外，如果我有几个 JDBC 模板和一个像`s`示例中的对象，我想用几个 JDBC 模板的输出填充它的数据。是否可以在一个功能中做到这一点？是否有可能有一个不返回任何内容的 mapRow 函数，以便我可以拥有一个模板数组并循环遍历它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T04:25:49.470

`db`at the end 表示`return db`跳过 return 语句的位置。这是 Scala 中的标准约定。似乎您的代码是应该返回的函数的主体`db`。第一条语句只是将查询结果分配给`db`

RowMapper 接口可以替换为[隐式转换](http://www.codecommit.com/blog/ruby/implicit-conversions-more-powerful-than-dynamic-typing)为以下类型的函数`(ResultSet, Int) => SomeObject`，这意味着它接受两个参数（ResultSet 和 Int）并返回 SomeObject 类型的结果

# java - 关于 JDBC 连接

> ID：11459769
> 
> 赞同：0
> 
> 时间：2012-07-12T20:06:29.517
> 
> 标签：java

一个非常简单的问题，但我是 Java 新手。如何与网络中的 SQL Server 数据库建立连接？

我下载了 JDBC 4.0，将文件关联到我的项目中，我正在尝试以下代码，但我不知道如何引用我的数据库

```
try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");  
        String connectionUrl = "what i put here ?";
        Connection con = DriverManager.getConnection(connectionUrl, "sa", "testtest");
    } catch (SQLException e) {
        e.printStackTrace();
    }
catch (ClassNotFoundException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:13:51.593

```
String url = "jdbc:mysql://localhost:3306/";
String db = "yourDB";
String driver = "com.mysql.jdbc.Driver";
String user = "root";
String pass = "";
    try {
        Class.forName(driver);
        Connection con = DriverManager.getConnection(url + db, user, pass);
        con.setAutoCommit(true);
    } catch (ClassNotFoundException e1) {
                    e1.printStackTrace();
                } catch (SQLException e1) {
                    e1.printStackTrace();
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:30:55.210

```
try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        DriverManager.getConnection("jdbc:sqlserver://url.com;database=dbname;user=username;password=test")
    } catch (SQLException e) {
        e.printStackTrace();
    }
catch (ClassNotFoundException e) {
        e.printStackTrace();
    } 
```

替换 url/用户名/密码。这是 sql server 的连接字符串

# jquery - 单击链接时如何一次显示一个div

> ID：11459770
> 
> 赞同：0
> 
> 时间：2012-07-12T20:06:36.800
> 
> 标签：jquery, html, hidden

看看[这里](http://space.equiet.sk/)

每个 div 都是隐藏的，当从菜单中单击一个按钮时，它会显示特定的内容 (div)，而其他的则被隐藏。仅显示主页和所选内容。我的问题是......你如何使用 jquery 做到这一点？您如何隐藏除第一个 div 之外的所有内容以及单击菜单时出现的所选内容？

例子：

我的菜单如下所示：

```
<nav>
<ul>
<li><a href="#home" class="active">Home</li>
    <li><a href="#page1">Page 1</li>
    <li><a href="#page2">Page 2</li>
    <li><a href="#page3">Page 3</li>
</ul>
</nav>

<article id="page1">
<div class="container">
    <h1>Page 1</h1>
        <p>Page 1 content</p>
</div>
</article>

 <article id="page2" class="dark">
<div class="container">
    <h1>Page 2</h1>
    <p>Page 2 content</p>
</div>
</article>

  <article id="page3">
<div class="container">
    <h1>Page 3</h1>
    <p>Page 3 content</p>
</div>
 </article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:09:51.777

`href`您可以更改与目标元素相同的锚值`id`：

```
<li><a href="#home" class="active">Home</li>
<li><a href="#page1">Page 1</li>
<li><a href="#page2">Page 2</li>
<li><a href="#page3">Page 3</li> 
```

```
$('a:not(:first)').click(function(e){
  e.preventDefault()
  var href = $(this).attr('href')
  $('article').hide();
  $(href).show()
}) 
```

[演示](http://jsfiddle.net/NAbVs/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:09:43.547

您提供的片段有点令人困惑，但也许您正在寻找[toggle](http://api.jquery.com/toggle/)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:10:02.017

使用 CSS 隐藏您最初不需要的内容。

```
.container { display:none; } 
```

然后就可以好好利用`href`and`id`属性了，如下

```
$('.link').click(function(){
  var correspondingDivId = $(this).attr('href'); //get id of div to be shown

  $('.container').hide(); //hide all the containers

  $(correspondingDivId).show(); //show only the one we need

}); 
```

您显然需要稍微更改您的标记。

```
<a href='#Div1'>Link 1 </a>
.
.
<div id="Div1" class="container"   /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:11:32.240

不了解 JQuery（为什么这么多依赖框架？），但这很容易使用 style.display 属性实现。设置为“阻止”或“无”以显示/隐藏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T20:11:55.757

在纯 CSS 中你可以做到`article { display:none; }` `article:first-child { display:block; }`。这将显示第一个`article`，同时隐藏其余部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T21:27:45.233

我更喜欢使用`hashchange`事件（即使 IE7 不支持它）——这种方法使单个文章可以收藏：

```
$(window).on('hashchange',function() {
    var hash = location.hash;
    $('article').hide();
    $(hash).show();
});

$(document).ready(function() {
    $(window).trigger('hashchange');
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-12T20:14:24.527

看文档：[http](http://api.jquery.com/visual/#?q=) ://api.jquery.com/visual/ (Effects -> Basiscs -> `show(speed, callback)`) 稍微学习一下，肯定你一个人就能搞定。

# xml - 对内部循环进行分组但得到“任务在一次测试中失败”：XSLT

> ID：11459774
> 
> 赞同：0
> 
> 时间：2012-07-12T20:07:10.280
> 
> 标签：xml, xslt, xpath, xml-serialization, xml-parsing

我需要帮助才能获得准确的输出。我在 Sean B. Durkin 为以下输入 xml 提供的代码的帮助下处理了一个 xml。**我更改了代码以获得所需的输出**，但在获得**准确输出**时遇到问题。帮助我在哪里出错并在代码中。当我调试时，我可以在“game_no”123 和“group”1 中找到“indoor”的值无法识别

输入 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<t>
<Games>
    <Game_no>123</Game_no>
    <Group>1</Group>        
    <Name>game.outdoor</Name>   
    <Value>Golf</Value>     
</Games>            
<Games>     
    <Game_no>123</Game_no>  
    <Group>1</Group>    
    <Name>game.indoor</Name>    
    <Value>Chess</Value>        
</Games>        
<Games>         
    <Game_no>223</Game_no>      
    <Group>1</Group>            
    <Name>games.outdoor</Name>  
    <Value>Soccer</Value>   
</Games>        
<Games>     
    <Game_no>223</Game_no>  
    <Group>2</Group>            
    <Name>games.indoor</Name>       
    <Value>Golf</Value> 
</Games>        
<Games>     
    <Game_no>223</Game_no>      
    <Group>1</Group>        
    <Name>games.outdoor</Name>  
    <Value>Batminton</Value>    
</Games>            
<Games>     
    <Game_no>123</Game_no>      
    <Group>1</Group>        
    <Name>ga.outdoor</Name> 
    <Value>tennis</Value>   
</Games>
<Games>         
    <Game_no>123</Game_no>  
    <Group>1</Group>        
    <Name>today</Name>  
    <Value>value returning with no'.'</Value>   
</Games>        
<Games> 
    <Game_no>123</Game_no>      
    <Group>1</Group>
    <Name>indoor</Name>     
    <Value>value returning with same Group 123 and game_no 1</Value>    
</Games>    
<Games> 
    <Game_no>123</Game_no>          
    <Group>2</Group>            
    <Name>outdoor</Name>        
    <Value>value returning with different Group 2</Value>       
</Games> 
<Games> 
    <Game_no>323</Game_no>          
    <Group>2</Group>            
    <Name>outdoor</Name>        
    <Value>value returning with different Game_no 323</Value>       
</Games> 
</t> 
```

上面的输入 XML 有一个元素“Games”，如果我有相同的值“Game_no”和“Group”用于后续节点，那么我可以在“.”时为元素“Name”生成所需的输出。在那儿。但是，如果我在“Game_no”和“Group”的每个节点都有相同的值，我无法在没有“.”的情况下实现输出。在元素“名称”处。我将放置我想要的输出和我得到的输出。连同代码。 **需要帮助**，为什么我不能做到这一点。

我根据预期的输出修改了 XSL 文件代码：

```
<xsl:stylesheet version="1.0" xmlns:xsl='http://www.w3.org/1999/XSL/Transform' xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
<xsl:key name="gamekey" match="Games" use="Game_no"/>
<xsl:key name="game-group" match="Games" use="concat(substring-before(Name,'.'),'|',Game_no,'|',Group)"/>
<xsl:template match="/">
    <Holiday>
            <xsl:for-each select="//t/Games[generate-id(.) = generate-id(key('gamekey', Game_no)[1])] ">
                <Weekend>
                    <xsl:variable name="var1" select="Game_no"/>
                    <xsl:apply-templates select="//t/Games[generate-id(.) = generate-id( key('game-group',        concat( substring-before(Name ,'.'),'|',$var1,'|',Group))[1])] [substring-before(Name ,'.')or not(Name/*)] "/>
                    <xsl:apply-templates select="key('game-group','||')/self::Games"/>
                </Weekend>
            </xsl:for-each>
    </Holiday>
</xsl:template>
<xsl:template match="Games [ substring-before(Name,'.') != '']">
    <xsl:element name="{substring-before(Name,'.')}">
        <xsl:for-each select="key('game-group', concat( substring-before(Name,'.'),'|',Game_no,'|',Group))">
            <xsl:element name="{substring-after(Name,'.')}">
                <xsl:value-of select="Value"/>
            </xsl:element>
        </xsl:for-each>
    </xsl:element>
</xsl:template>
<xsl:template match="Games [ substring-before(Name,'.') = '']">
    <xsl:element name="{Name}">
        <xsl:value-of select="Value"/>
    </xsl:element>
</xsl:template> 
```

我得到的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Holiday>
<Weekend>
    <game>
        <outdoor>Golf</outdoor>
        <indoor>Chess</indoor>
    </game>
    <ga>
        <outdoor>tennis</outdoor>
    </ga>
    <today>value returning with no'.'</today>
    <outdoor>value returning with different Group 2</outdoor>
</Weekend>
<Weekend>
    <games>
        <outdoor>Soccer</outdoor>
        <outdoor>Batminton</outdoor>
    </games>
    <games>
        <indoor>Golf</indoor>
    </games>
</Weekend>
<Weekend>
    <outdoor>value returning with different Game_no 323</outdoor>
</Weekend>
</Holiday> 
```

所需输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Holiday>
<Weekend>
    <game>
        <outdoor>Golf</outdoor>
        <indoor>Chess</indoor>
    </game>
    <ga>
        <outdoor>tennis</outdoor>
    </ga>
    <today>value returning with no'.'</today>
    <indoor>value returning with same Group 123 and game_no 1</indoor>
    <outdoor>value returning with different Group 2</outdoor>
</Weekend>
<Weekend>
    <games>
        <outdoor>Soccer</outdoor>
        <outdoor>Batminton</outdoor>
    </games>
    <games>
        <indoor>Golf</indoor>
    </games>
</Weekend>
<Weekend>
    <outdoor>value returning with different Game_no 323</outdoor>
</Weekend>
</Holiday> 
```

注意：问题看起来很相似，但我是一个尝试各种方法来修改内部循环的学习者。帮助表示赞赏。如果我能知道为什么其中一个节点正在淘汰，我很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:38:02.937

这是我提出的问题的更新。

现在我可以获得所需的输出。当循环到没有“。” 在“Game_no”和“Group”中具有相同的值。这是代码。

```
<xsl:stylesheet version="1.0" xmlns:xsl='http://www.w3.org/1999/XSL/Transform' xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
<xsl:key name="gamekey" match="Games" use="Game_no"/>
<xsl:key name="game-group" match="Games" use="concat(substring-before(Name,'.'),'|',Game_no,'|',Group)"/>
<xsl:key name="gamekey2" use="concat(Game_no,'|',Group)" match="Games"/>
<xsl:template match="/">
    <Holiday>
            <xsl:for-each select="//t/Games[generate-id(.) = generate-id(key('gamekey', Game_no)[1])] ">
                <Weekend>
                    <xsl:variable name="var1" select="Game_no"/>
                    <xsl:apply-templates select="//t/Games[generate-id(.) = generate-id( key('game-group',        concat( substring-before(Name ,'.'),'|',$var1,'|',Group))[1])] [substring-before(Name ,'.')or not(Name/*)] "/>
                    <xsl:apply-templates select="key('game-group','||')/self::Games"/>
                </Weekend>
            </xsl:for-each>
    </Holiday>
</xsl:template>
<xsl:template match="Games [ substring-before(Name,'.') != '']">
    <xsl:element name="{substring-before(Name,'.')}">
        <xsl:for-each select="key('game-group', concat( substring-before(Name,'.'),'|',Game_no,'|',Group))">
            <xsl:element name="{substring-after(Name,'.')}">
                <xsl:value-of select="Value"/>
            </xsl:element>
        </xsl:for-each>
    </xsl:element>
</xsl:template>
<xsl:template match="Games [ substring-before(Name,'.') = '']">
<xsl:for-each select="key('gamekey2', concat( Game_no,'|',Group))">
<xsl:if test="not(contains(Name,'.'))">
    <xsl:element name="{Name}">
        <xsl:value-of select="Value"/>
    </xsl:element>
    </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

应用时获得所需的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Holiday>
<Weekend>
    <game>
        <outdoor>Golf</outdoor>
        <indoor>Chess</indoor>
    </game>
    <ga>
        <outdoor>tennis</outdoor>
    </ga>
    <today>value returning with no'.'</today>
    <indoor>value returning with same Group 123 and game_no 1</indoor>
    <outdoor>value returning with different Group 2</outdoor>
</Weekend>
<Weekend>
    <games>
        <outdoor>Soccer</outdoor>
        <outdoor>Batminton</outdoor>
    </games>
    <games>
        <indoor>Golf</indoor>
    </games>
</Weekend>
<Weekend>
    <outdoor>value returning with different Game_no 323</outdoor>
</Weekend>
</Holiday> 
```

# java - 未正确接收 XML 文件

> ID：11459779
> 
> 赞同：0
> 
> 时间：2012-07-12T20:07:30.013
> 
> 标签：java, android, http-post

我正在使用此代码从给定的 url 获取 rss 文件：

```
// get the xml file from the given url in a string format
public String getXmlFromUrl(String url) 
{
    String xml = null;
    try 
    {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

这是获取 xml 文件文本的代码：

```
 String yahoo_url = "http://feeds.finance.yahoo.com/rss/2.0/headline?s=intc&region=US&lang=en-US";
    parser = new XMLParser();
    String text = parser.getXmlFromUrl(yahoo_url);
    System.out.println(text); 
```

我没有给我整个文件，而是只得到两行：

```
"?xml version="1.0" encoding="utf-8"?
rss version="2.0"><channel/></rss?" 
```

可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:22:46.477

问题可能是一些编码问题。如果使用错误的字符集处理您的 XML 字符串，则可能是某些字符被误解为例如换行符（将解释示例中的换行符）或文件结尾。

尝试告诉`EntityUtils`字符串的字符集（可能是 UTF-8）：

```
xml = EntityUtils.toString(httpEntity, "UTF-8"); 
```

# asp.net-mvc - 将常量值和变量（输入）文本从视图传递到控制器

> ID：11459782
> 
> 赞同：2
> 
> 时间：2012-07-12T20:07:36.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我对 ASP.NET MVC 还很陌生，并且仍然习惯了一些概念。我知道要将视图中文本框的值传回控制器，我可以使用 Html.BeginForm 并将文本框的名称与控制器操作中的相应参数相同。

这是我的情况：我有 2 个按钮。我希望他们在控制器中调用相同的操作。我希望他们都传递文本框的值（即“searchText”）。但是，我希望其中一个按钮为参数 isQuickJump 传递“false”，而我希望另一个按钮为参数 isQuickJump 传递“true”。

这是我的观点：

```
@using (Html.BeginForm("SearchResults", "Search", FormMethod.Get))  {
<div id="logo" class="centered">
    <a href="SearchResults">
        <img alt="Search" src="../../Content/themes/base/images/Search.jpg" />
    </a>
</div>

<div id="searchBox" class="centered">
    @Html.TextBox("searchText", null, new { @class = "searchTextBox" })
</div>

<div id="buttons" class="centered">
    <input type="submit" id="searchButton" value="Search" class="inputBtn"  />
    @Html.ActionLink("Quick Jump", "SearchResults", "Search", new { isQuickJump = true }, new { @class = "btn" })
</div> 
```

}

控制器：

```
public ActionResult SearchResults(string searchText, int? page, int? size, bool? isQuickJump, GridSortOptions sort)
    {
        var items = GetSearchGrid(searchText, page, size, sort);

        if (Request.IsAjaxRequest())
            return PartialView("_SearchResultsGrid", items);

        return View(items);
    } 
```

关于如何做到这一点的任何建议？

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:11:06.990

只需使用 2 个具有相同名称和不同值的提交按钮：

```
<div id="buttons" class="centered">
    <button type="submit" name="isQuickJump" value="false">Search</button>
    <button type="submit" name="isQuickJump" value="true">Quick Jump</button>
</div> 
```

根据单击的按钮，相应的值将被发送到服务器的`isQuickJump`参数。并且由于两者都是提交按钮，它们还将所有其他输入字段数据提交到服务器（您用作第二个按钮的锚不是这种情况）。

# android - MediaMetaDataRetActivity - getFrameAtTime：videoFrame 是一个 NULL 指针

> ID：11459784
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:08:00.613
> 
> 标签：android, video, media-player

我在使用`MediaMetaDataRetActivity`.

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
    filepath = Environment.getExternalStorageDirectory().getPath()+"/adhavan.mp4";
        System.out.println("imagepath"+filepath);
 MediaMetadataRetriever retriever = new MediaMetadataRetriever();
        retriever.setDataSource(filepath);
bitmap = retriever.getFrameAtTime(10000 ,MediaMetadataRetriever.OPTION_CLOSEST);
System.out.println("BITMAP"+bitmap);
       Log.d(TAG, "METADATA_KEY_ALBUM: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUM));
        Log.d(TAG, "METADATA_KEY_ALBUMARTIST: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUMARTIST));
        Log.d(TAG, "METADATA_KEY_ARTIST: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ARTIST));
        Log.d(TAG, "METADATA_KEY_AUTHOR: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_AUTHOR));
        Log.d(TAG, "METADATA_KEY_COMPILATION: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_CD_TRACK_NUMBER));
        Log.d(TAG, "METADATA_KEY_COMPILATION: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_COMPILATION));
        Log.d(TAG, "METADATA_KEY_DATE: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DATE));
        Log.d(TAG, "METADATA_KEY_DISC_NUMBER: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DISC_NUMBER));
        Log.d(TAG, "METADATA_KEY_DURATION: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION));
        Log.d(TAG, "METADATA_KEY_GENRE: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_GENRE));
        Log.d(TAG, "METADATA_KEY_MIMETYPE: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_MIMETYPE));
        Log.d(TAG, "METADATA_KEY_NUM_TRACKS: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_NUM_TRACKS));
        Log.d(TAG, "METADATA_KEY_TITLE: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE));
        Log.d(TAG, "METADATA_KEY_WRITER: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_WRITER));
        Log.d(TAG, "METADATA_KEY_YEAR: " + retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_YEAR));
          imageView = (ImageView)findViewById(R.id.imageview);
         imageView.setImageBitmap(bitmap); 
```

我得到的错误是`getFrameAtTime: videoFrame is NULL pointer`. 这是我在运行时进入**Logcat**并且屏幕是空白的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T23:34:42.677

尝试使用 OPTIONS_CLOSEST_SYNC 而不是 OPTIONS_CLOSEST。

但是，这将为您提供关键帧而不是确切的帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:44:23.240

`adhavan.mp4`可能正在使用未[列为受支持](http://developer.android.com/guide/appendix/media-formats.html)的编解码器。如果是这种情况，请使用更好的视频进行测试和/或[转换](http://ubuntuforums.org/showthread.php?t=1243312)您拥有的视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T15:24:47.190

我有同样的错误。

检查您是否可以通过`ExtractMetadata`. 如果不是，则呼叫可能有问题`setDataSource()`或视频格式/编解码器错误。

这段代码对我有用。

```
AssetFileDescriptor afd=getAssets().openFd("t.mp4");
mediaMetadataRetriever.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength()); 
```

我必须提供`afd.getStartOffset()`和`afd.getLength()`

也许它可以帮助您走上正轨。

# javascript - 如何将相同的列表加载到客户端的几个下拉列表中？

> ID：11459787
> 
> 赞同：0
> 
> 时间：2012-07-12T20:08:21.933
> 
> 标签：javascript, asp.net, drop-down-menu, .net-3.5, viewstate

我的页面有 3 个下拉列表，其中包含大量相同的数据（用户列表）。我不能使用按需加载来仅加载列表的一部分 - 我需要整个列表。我需要处理这个问题，并且在回发后不会出现无效视图状态错误的问题 - 当我在客户端更改下拉列表中的选项列表时，有时会遇到这个问题。

如何通过在 html 中发送此列表一次来最小化页面大小，然后在回发后将其加载到每个下拉列表中而不会出现问题？

# javascript - 更改 XML 而不在服务器中更改它

> ID：11459800
> 
> 赞同：0
> 
> 时间：2012-07-12T20:09:41.977
> 
> 标签：javascript, html, xml

我有一个视频列表，单击一个名称应该显示一个视频，我正在使用的视频播放器从同一文件夹中的 XML 文档中读取视频文件名，我正在考虑，更改单击视频名称时，xml 中带有 javascript 的文件名称，但我认为这会更改来自服务器的原始 XML，并使两个人无法同时查看该页面，这实际上很糟糕。
那么有没有办法只更改用户计算机上的 XML 呢？
或者您有其他方法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:50:57.983

您无法轻松更改服务器上的 (xml) 文件。当您加载它时，服务器将向您发送一个字符流（称为字符串），浏览器会将其解析为文档对象模型。这个模型在本地是很明显的，当你使用 DOM 操作方法修改它时`setAttribute`，其他人不会受到影响。

要更改服务器上的文件，您需要明确请求服务器执行此操作。

# jquery - 用于 jquery 附加文本的 FontFace

> ID：11459803
> 
> 赞同：0
> 
> 时间：2012-07-12T20:09:48.097
> 
> 标签：jquery, font-face

我正在我的网站上做一个旋转横幅。此横幅是图像和文本的混合体。除了我的@fontface 字体不适用于文本之外，我的效果很好。

我正在为旋转做这样的事情：

```
$("#container div").first().appendTo('#container').fadeOut(5000);
$("#container div").first().fadeIn(5000); 
```

所以我假设它与应用字体后附加的文本有关。或者其他的东西。我对字体相当陌生，所以这可能是我做错了。

相关CSS：

```
@font-face {
    font-family: 'OpenSansRegular';
    src: url('fonts/OpenSans-Regular-webfont.eot');
    src: url('fonts/OpenSans-Regular-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/OpenSans-Regular-webfont.woff') format('woff'),
     url('fonts/OpenSans-Regular-webfont.ttf') format('truetype'),
     url('fonts/OpenSans-Regular-webfont.svg#OpenSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

#homecontainer span {
    float: right;
    display:block;
    font-family:OpenSansRegular,Ariel, Helvetica, sans-serif;
} 
```

文本显示为 Ariel。使用此字体的其余文本工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:13:37.293

尝试：

```
font-family:OpenSansRegular,Ariel, Helvetica, sans-serif; 
```

到

```
font-family:'OpenSansRegular',Ariel, Helvetica, sans-serif; 
```

还要用令人讨厌的东西仔细检查你的 CSS 选择，`font-size:50px;color:pink;`以确保你实际上将该字体应用于正确的区域。

# java - 如何配置 Eclipse 以便在 Java 类的底部添加私有字段？

> ID：11459806
> 
> 赞同：6
> 
> 时间：2012-07-12T20:09:55.083
> 
> 标签：java, eclipse

如何配置 Eclipse 以便在 Java 类的底部添加私有字段？

默认情况下，当我选择“创建字段..”时，该字段将添加到类的顶部。我可以配置 Eclipse 以便将字段添加到底部吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T20:21:32.013

`Window`>`Preferences`

在左侧选择：`Java`> `Appearance`>`Members Sort Order`

在右侧选择`Fields`并检查`Sort members in same category by visibility`。

之后，右键单击您的项目并选择`Source`>`Sort members...`以修改源代码。您可以将 Eclipse 配置为在保存时自动执行此操作：再次转到首选项`Window`>`Preferences`然后`Java`> `Editor`> `Save actions`，然后单击以`Configure`执行其他操作。

# bash - JBoss 初始化脚本 - 捕获问题

> ID：11459810
> 
> 赞同：0
> 
> 时间：2012-07-12T20:10:06.317
> 
> 标签：bash, jboss, jboss7.x, init.d, shell-trap

我有一个用于启动/停止/等 JBoss AS (v7.1.1) 的脚本。我在 SUSE Enterprise 11 上运行，所以提供的 initscript 不起作用。我的脚本遇到的问题是清理函数永远不会被调用。

```
#!/bin/sh

HOME="/var/rulesserver"
CURRENT=$HOME/logs/current
LOGFILE=$HOME/logs/`date -u +%Y-%m-%d-%H-%M-%S`.log
COMMAND=/usr/local/jboss/bin/standalone.sh
SELF=/usr/sbin/jboss-as-standalone

function cleanup() {
    rm $CURRENT
}

function run() {
    trap cleanup 1 2 3 6 15
    nohup $COMMAND &> $CURRENT
}

case $1 in
    "start" )
        echo "Starting the server..."
        if [ -e $CURRENT ]
        then
            echo "ERROR: The server is already running"
        else
            ln -s $LOGFILE $CURRENT
            run &
            echo "Server started"
        fi
        ;;
    "stop" )
        echo "Stopping the server..."
        killall java
        echo "Server stopped"
        ;;
    "status" )
        if [ -e $CURRENT ]
        then
            echo "The server is currently running"
        else
            echo "The server is currently stopped"
        fi
        ;;
    "cleanup" )
        cleanup
        ;;
    "restart" )
        $SELF stop
        $SELF start
        ;;
    * )
        $SELF start
        ;;
esac 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:01:55.723

Standalone.sh 启动脚本中提供了一种方法，您可以使用它来控制它的行为。只需将环境变量 LAUNCH_JBOSS_IN_BACKGROUND 的值设置为某个值，即。

```
LAUNCH_JBOSS_IN_BACKGROUND=true 
```

在调用脚本之前，您将不再需要 nohup 为您完成这项工作，也不需要进行清理。

此外，还有一个选项可以告诉 JBoss AS 将“控制台输出”写入文件，这样您仍然可以拥有它将生成的消息。

还有一件事：我个人认为`killall java`在所有可能的情况下都不是 100% 聪明的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:22:32.637

我可能会感到困惑，但你能不能不只是做

```
function run() {
    ( nohup $COMMAND ; rm $CURRENT )
} 
```

?

$COMMAND 会阻塞直到我死了，然后会有一个 rm 然后子shell会退出？就不需要陷阱了。

# c# - 自测委托：避免在调用前检查 null？

> ID：11459813
> 
> 赞同：9
> 
> 时间：2012-07-12T20:10:31.000
> 
> 标签：c#, .net

有什么聪明的方法可以避免在以通用方式调用事件之前测试事件的无效性的冗长吗？很明显，如果我打电话给一个代表，我希望它被分配。
（如果我*真的*想/需要测试它的无效性，我最终可以明确地做，但是系统地进行这个测试有点乏味和冗长。）

```
public delegate void ResetTradesDelegate();
public ResetTradesDelegate ResetTradesEvents;

public void OnSessionRxAdmMessage(IVfxFixAppSession session, FixMessage msg)
{    
    if (ResetTradesEvent != null)  //<-- Is there "any" a way not to write this test explicitly for each delegate ?
       ResetTradesEvent();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T20:30:11.823

```
public event EventHandler NoDataEventHandler = delegate{}; 
```

以这种方式声明事件意味着它永远不会为空。至少，它将始终连接一个无操作事件处理程序。

在你的情况下，可能

```
public event ResetTradesDelegate ResetTradesEvents = delegate{}; 
```

触发一个事件总是会有一个与之相关的竞争条件。您要么冒险尝试在其为空时调用委托，要么在事件被取消挂钩后调用委托。[Eric Lippert 在这里](http://blogs.msdn.com/b/ericlippert/archive/2009/04/29/events-and-races.aspx)写了一篇关于这个主题的非常全面的文章。上面的技术仍然受到第二种竞争条件的影响，因此事件处理程序需要在事件被取消挂钩后被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T20:39:32.117

```
static void CallIfNotNull(this Action action)
{
 if (action != null) action();
} 
```

作为一种扩展方法，使用起来相当方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T21:03:12.423

您可以使用始终订阅的无操作事件创建事件处理程序：

```
public class MyClass
{
    public MyClass()
    {
        this.Event += (sender, e) => ();
    }

    public event EventHandler Event;

    protected virtual void OnEvent()
    {
        this.Event(this, EventArgs.Empty);
    }
} 
```

但是，这需要订阅您的事件并且会导致性能损失，因为 no-op 委托仍将存在于订阅的事件处理程序列表中。

* * *

我的偏好是创建一对扩展方法来调用任何事件处理程序，同时执行空安全检查：

```
public static void Raise(this EventHandler @event, object sender)
{
    if(@event != null)
    {
        @event.Invoke(sender, EventArgs.Empty);
    }
}

public static void Raise<TEventArgs>(
    this EventHandler<TEventArgs> @event,
    object sender,
    TEventArgs args)
    where TEventArgs : EventArgs
{
    if(@event != null)
    {
        @event.Invoke(sender, args);
    }
} 
```

然后可以在库中的任何位置轻松调用它以安全地引发事件：

```
this.ResetTradesEvent.Raise(this); 
```

它纯粹是语法糖；您仍在对委托进行检查。然而，它是一种很好的可重用方式来包装 C# 语言的这个臭的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-07T09:53:00.313

```
public static void Call(this Action action)
{
    var safeAction = Interlocked.CompareExchange(ref action, null, null);
    if (safeAction != null)
        safeAction();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-27T17:39:17.323

使用 null 条件运算符可以保持测试但不那么冗长，所以对我有用。我不认为它解决了其他人提到的竞争条件。

```
ResetTradesEvent?.Invoke(); 
```

这是在 Visual Studio 2017 中自动建议的。

# zend-route - 路由器在 ZF 2beta5 中不起作用

> ID：11459819
> 
> 赞同：0
> 
> 时间：2012-07-12T20:10:56.117
> 
> 标签：zend-route, zend-framework2, zend-router

> **可能重复：**
> [Zend Framework 2 MVC - 模块路由映射不起作用](https://stackoverflow.com/questions/11340932/zend-framework-2-mvc-modules-route-mapping-not-working)

我的路由器在 beta4 中工作，但在 beta5 中不工作。

需要的是 url 中的语言环境。选项是 url 中的命名空间/模块。

在 module.config.php

```
return array(
        'router' => array(
            'routes' => array(
                'default' => array(
                    'type' => 'Zend\Mvc\Router\Http\Segment',
                    'options' => array(
                        'route' => '/[:locale[/:namespace[/:controller[/:action]]]]',
                        'constraints' => array(
                            'locale' => '[a-z]{2}_[A-Z]{2}',
                            'namespace' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                            'locale' => 'da_DK',
                            'namespace' => 'Application',
                            'controller' => 'index',
                            'action' => 'index',
                        ),
                    ),
                ),
            ), ),
        'controller' => array(
            'classes' => array(
                'index' => 'Application\Controller\IndexController'
            ),
        ), 
            ......
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:58:38.113

他们做了一些改变，所以控制器部分不起作用。它已将名称更改为`controllers`（带有*s*），而不是`invokables`现在的类。

所以试试：

```
'controllers' => array(
            'invokables' => array(
                'index' => 'Application\Controller\IndexController'
            ),
), 
```

编辑：如果这解决了问题，我们实际上在[这里](https://stackoverflow.com/a/11376305/923847)有一个类似的问题。

# android - How can I set the order of the positive and negative buttons in AlertDialog?

> ID：11459827
> 
> 赞同：22
> 
> 时间：2012-07-12T20:11:13.370
> 
> 标签：android, android-alertdialog

Why I want to do this is another discussion entirely, but I need to figure out the best way to make all my alert dialogs have the positive button on the right side. Note that in version 3.0 and below the buttons normally appear as OK / Cancel and in 4.0 and above it is Cancel / OK. I want to force my application to use Cancel / OK in the simplest way possible. I have a lot of AlertDialogs in the application.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T20:18:23.990

Unfortunately, I don't believe you can. However, to quote the [documentation](http://developer.android.com/guide/topics/ui/dialogs.html#AddingButtons):

> Note: You can only add one of each button type to the AlertDialog. That is, you cannot have more than one "positive" button. This limits the number of possible buttons to three: positive, neutral, and negative. These names are technically irrelevant to the actual functionality of your buttons, but should help you keep track of which one does what.

So you can turn the different buttons into whatever you want. What you're seeing here is the order having switched (ordering from [this](https://stackoverflow.com/a/11402031/264775) answer):

*   On devices prior to ICS, the button order (left to right) was POSITIVE - NEUTRAL - NEGATIVE.
*   On newer devices using ICS, the button order (left to right) is now NEGATIVE - NEUTRAL - POSITIVE.

You might try checking the [`Build.VERSION`](http://developer.android.com/intl/de/reference/android/os/Build.VERSION.html) and using that to decide which button is which at runtime.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-08T02:50:10.187

this is my solution. It is work for me.

```
 // Show alertDialog after building
    AlertDialog alertDialog = createAlertDialog(context);
    alertDialog.show();
    // and find positiveButton and negativeButton
    Button positiveButton = (Button) alertDialog.findViewById(android.R.id.button1);
    Button negativeButton = (Button) alertDialog.findViewById(android.R.id.button2);
    // then get their parent ViewGroup
    ViewGroup buttonPanelContainer = (ViewGroup) positiveButton.getParent();
    int positiveButtonIndex = buttonPanelContainer.indexOfChild(positiveButton);
    int negativeButtonIndex = buttonPanelContainer.indexOfChild(negativeButton);
    if (positiveButtonIndex < negativeButtonIndex) {
        // prepare exchange their index in ViewGroup
        buttonPanelContainer.removeView(positiveButton);
        buttonPanelContainer.removeView(negativeButton);
        buttonPanelContainer.addView(negativeButton, positiveButtonIndex);
        buttonPanelContainer.addView(positiveButton, negativeButtonIndex);
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-03T11:28:31.797

You can extend the `AlertDialog.Builder` to force the order:

```
public class MyDialog extends AlertDialog.Builder {

    public MyDialog(Context arg0) {
        super(arg0);
    }

    @Override
    public Builder setPositiveButton(CharSequence text, OnClickListener listener) {
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            return super.setNegativeButton(text, listener);
        } else {
            return super.setPositiveButton(text, listener);
        }

    }

    @Override
    public Builder setNegativeButton(CharSequence text, OnClickListener listener) {
        if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            return super.setPositiveButton(text, listener);
        } else {
            return super.setNegativeButton(text, listener);
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-26T14:49:29.420

I've created a solution to force order of buttons for any Android version on any device.

The idea is that we can get list of buttons of dialog in order they appear on screen and set text and actions in order we want. It guarantees that we would have same order on any device.

Please check my [GitHub repository](https://github.com/StevenRudenko/FixedOrderDialog)

Here is example of creating and showing dialog:

```
 new FixedOrderDialogFragment.Builder()
    .setLeftButtonText(R.string.left)
    .setCenterButtonText(R.string.center)
    .setRightButtonText(R.string.right)
    .setDefaultButton(FixedOrderDialogFragment.BUTTON_RIGHT)
    .setMessage(R.string.message)
    .setTitle(R.string.app_name)
    .create()
 .show(getSupportFragmentManager(), "DEMO"); 
```

Please note that owner Activity should implement FixedOrderDialogFragment.FixedOrderDialogListener to be able restore dialog state on Activity re-creation.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-09T21:08:30.260

I figured I could just set the text for the positive button to Cancel and the negative to OK but it turns out they are in alphabetical order.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-05T04:03:54.300

*   In AlertDialog buttonPanel,the three buttons sort by [Neutral] [Negative] [Positive]
*   then you can set buttons like following codes

    builder.setNeutralButton("Negative",listener);

    builder.setNegativeButton("Neutral",listener);

    builder.setPositiveButton("Positive",listener);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-22T01:11:59.930

**Sometimes completely different perspectives are the solution to a problem, the HI-user culture.**

*   In Win32 an OK and a Cancel button is absolutely necessary or the dialog will not work.
*   **In Android the HI is quite different because of the existence of the OS "Back" button** (onBackPressed() that could also be overridden, ESC on attached physical keyboards) in the operative system HI.

    *   **There is no need for a Negative/cancel button in most cases.**
    *   So most dialog are enough with the Positive button
    *   **Then there are no button order issue**, the positive button is alone?
    *   If you are in an edit field set it to edittext.setSingleLine(); and enter will move focus to the single positive button. Enter again and its positive button pressed.
    *   **If the user wants to push Cancel, he presses the OS "Back" button** (As a developer we do not need to explain the core of the OS HI policy to the user, that is an issue of the OS issuer. We just leave the Android dialog without a Cancel button.)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-09T11:45:37.203

There is *absolutely no need to switch the order of any buttons*!

Apparently, it is not immediately obvious, but you can simply set the labels and the actions to **ANY** of the three handlers you have at your disposal, i.e. you are **NOT** required to have the **OK** button defined as a positiveButton.

For example, you can attach your Cancel action to the **`setNeutralButton()`** button, and your "I feel lucky" action to the **`setNegativeButton()`**.

Android has no semantics attached to `negative/positive/neutral` so you might as well cancel your dialog in **`setPositiveButton()`** and confirm the dialog using **`setNegativeButton()`**. Just set the right labels and actions.

Example:

```
new AlertDialog.Builder(ctx)
        .setTitle("Switching buttons the easy way")
        .setPositiveButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        })
        .setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(ctx, "I agree!", Toast.LENGTH_SHORT).show();
            }
        })
        .setNegativeButton("I feel lucky...", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(ctx, "Make a bet", Toast.LENGTH_SHORT).show();
            }
        })
        .create()
        .show(); 
```

# java - Java：在 While 循环中嵌入 Equals 语句

> ID：11459828
> 
> 赞同：0
> 
> 时间：2012-07-12T20:11:14.797
> 
> 标签：java, apache, while-loop, opennlp

我想知道是否有人可以向我解释下面的代码行是做什么的？

`while((sample = samples.read()) != null)`

它是否首先设置`sample`为等于 的下一行`samples`，然后检查以确保它不为空？

这是一个更普遍的问题，但如果有人有一个很好的 OpenNLP 教程，我也会非常感激。

这是整个方法：

`public static Dictionary buildNGramDictionary(ObjectStream samples, int cutoff) throws IOException {`

 ````
 NGramModel ngramModel = new NGramModel();
    POSSample sample;

    while((sample = samples.read()) != null) {
        String[] words = sample.getSentence();
        if (words.length > 0)
            ngramModel.add(new StringList(words), 1, 1);
    }

    ngramModel.cutoff(cutoff, Integer.MAX_VALUE);
    return ngramModel.toDictionary(true);
} 
````  `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:13:50.637

1.  它将返回值`samples.read()`赋给`sample`变量
2.  它验证是否`sample`不为空，然后才执行 while 循环的主体

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:17:23.827

表达式的计算由[运算符优先级](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#15.7)决定。
首先计算括号内的表达式，`(sample = samples.read())`因为`()`括号的优先级高于`!=``

# php - PHP 中的 google+ oAuth 联系人完整列表

> ID：11459833
> 
> 赞同：0
> 
> 时间：2012-07-12T20:11:40.967
> 
> 标签：php, oauth, google-plus

我正在使用谷歌最新的 api 来检索联系人列表。此代码似乎以 XML 格式输出我列表中的前 20 项。
问题：如何输出整个列表？

```
<?php
require_once '../../src/apiClient.php';
session_start();

$client = new apiClient();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/feeds/");
// Documentation: http://code.google.com/apis/gdata/docs/2.0/basics.html
// Visit https://code.google.com/apis/console?api=contacts to generate your
// oauth2_client_id, oauth2_client_secret, and register your oauth2_redirect_uri.
// $client->setClientId('insert_your_oauth2_client_id');
// $client->setClientSecret('insert_your_oauth2_client_secret');
// $client->setRedirectUri('insert_your_redirect_uri');
// $client->setDeveloperKey('insert_your_developer_key');

if (isset($_GET['code'])) {
    $client->authenticate();
    $_SESSION['token'] = $client->getAccessToken();
    $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
    header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
    unset($_SESSION['token']);
    $client->revokeToken();
}

if ($client->getAccessToken()) {
    $req = new apiHttpRequest("https://www.google.com/m8/feeds/contacts/default/full");
    $val = $client->getIo()->authenticatedRequest($req);

    // The contacts api only returns XML responses.
    /* * * * * * * * * produced an error
    $response = json_encode(simplexml_load_string($val->getResponseBody()));
    print "<pre>" . print_r(json_decode($response, true), true) . "</pre>"; 
    */

    // fix
    $response = $val->getResponseBody();
    print "<pre>" . print_r($response) . "</pre>";

    // The access token may have been updated lazily.
    $_SESSION['token'] = $client->getAccessToken();
} else {
    $auth = $client->createAuthUrl();
}

if (isset($auth)) {
        print "<a class=login href='$auth'>Connect Me!</a>";
    } else {
        print "<a class=logout href='?logout'>Logout</a>";
}
?> 
```

我看到了这个[回复](http://groups.google.com/group/google-contacts-api/tree/browse_frm/month/2012-05/4ea69e52ae930044?rnum=51&lnk=nl)，但不知道如何实现它

*首先你需要询问版本 3，因为extendedProperties 没有返回。这是来自一些工作代码的cnp。*

```
function get($xmlfile) {
try {
  @$feed = simplexml_load_file($xmlfile. '&v=3.0');
  if ($feed === FALSE) {
    throw new Exception(file_get_contents($xmlfile));
  }
} catch (Exception $e) {
  return array('error' => true, 'payload' => $e->getMessage());
}
return array('error' => false, 'payload' => $xmlData);
} 
```

*接下来要查找的内容是告诉 simplexml 您要使用 gd 命名空间。另一个例子：*

```
 $this->nsGd = $xmlData->children('http://schemas.google.com/g/2005');
 ...
 $this->email = @(string)$this->nsGd->email->attributes()->address;
 ...
 foreach ($this->nsGd->extendedProperty as $x) {
    if ($x->attributes()->name == 'ethnicity') {
      $this->ethnicity = $x->attributes()->value;
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:09:34.143

您是否尝试过使用 max-results 查询参数？来自[联系人 API 文档](https://developers.google.com/google-apps/contacts/v3/)。

> **注意**：Feed 可能不包含用户的所有联系人，因为返回的结果数量存在默认限制。[有关更多信息，请参阅使用查询参数检索联系人](https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters)中的 max-results 查询参数。

因此，您可以发送请求，例如：[https ://www.google.com/m8/feeds/contacts/default/full?max-results=1000](https://www.google.com/m8/feeds/contacts/default/full?max-results=1000)

# .htaccess - Magento 多商店 URL 重写

> ID：11459835
> 
> 赞同：0
> 
> 时间：2012-07-12T20:11:46.397
> 
> 标签：.htaccess, magento, url-rewriting

我们正在开发一个拥有多个不同商店的 Magento 网站。我们正在重写 url，因此当您在特定商店时，商店名称会添加到 url。我们尝试了几种不同的方法。首先在系统>配置>Web中打开“将商店代码添加到网址”。这会导致其中一个商店名称被添加到 url 中两次，而其余商店则添加基本商店名称。我们的第二个想法是添加：

```
SetEnvIf Request_URI ^\/site_wow\/ MAGE_RUN_CODE=site_wow
SetEnvIf Request_URI ^\/site_ahepa\/ MAGE_RUN_CODE=site_ahepa
SetEnvIf Request_URI ^\/site_ita\/ MAGE_RUN_CODE=site_ita
SetEnvIf Request_URI ^\/site_deca\/ MAGE_RUN_CODE=site_deca 
```

到网站上 public_html 文件夹中的 .htaccess 文件。这适用于 ahepa 商店，但不适用于其他商店。如果我将其他商店更改为 MAGE_RUN_CODE=site_ahepa，它会将 site_ahepa 添加到 url。

我在这里发现了一个类似的问题：[Magento siteswitching .htaccess](https://stackoverflow.com/questions/8754089/magento-site-switching-htaccess)但我没有任何运气来解决这个问题。如果有人可以向我发送正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:57:29.833

好的，这就是我要工作的内容。我有上面的 .htaccess 文件。在 System>Configuration>Web 中，我将 Add Store Code to Urls 设置为 YES 并将 Use Web Server Rewrites 设置为 NO。ahepa 商店的 url 重写与其他商店不同，但所有链接都重定向到正确的商店，并且产品显示在它们应该出现的位置，所以我不会再搞砸了。

# c# - Windows 8 Metro 磁贴可以有不同的可点击区域并产生不同的结果吗？

> ID：11459836
> 
> 赞同：0
> 
> 时间：2012-07-12T20:11:50.857
> 
> 标签：c#, wpf, microsoft-metro

希望是一个快速的问题，

是否有可能拥有一个包含多个可点击区域的动态磁贴（同时显示）？

谢谢

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:30:23.060

我不认为你可以，这有点违背[建议](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)（瓷砖之间的简单和统一的外观）。“磁贴基于一组不可扩展的 Windows 提供的 XML 模板”磁[贴指南和清单（Metro 风格的应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)

如果您想显示其他信息/不同的信息，那么[辅助磁贴](http://msdn.microsoft.com/en-us/library/windows/apps/hh465372.aspx)可能是您的选择？

你想干什么？

祝你的项目好运，希望这会有所帮助:)

# c - 如何使用读取将字符正确存储在数组中？

> ID：11459839
> 
> 赞同：1
> 
> 时间：2012-07-12T20:11:59.213
> 
> 标签：c, arrays, string, char, buffer

我编写了以下代码，但我不明白为什么 read 没有按照我期望的方式存储字符：

```
char temp;
char buf[256];

    while(something)   
        read (in,&temp, 1);
        buf[strlen(buf)] = temp;
     } 
```

如果我在阅读时打印`temp`和`buf`数组的最后一个位置，有时它们不匹配。例如，字符可能是 'd' 但数组包含`%`，或者字符是`0`并且数组包含`.`

我正在阅读少于 256 个字符，但这没关系，因为我在阅读时正在打印。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:16:29.243

是的，你没有初始化`buf`——`strlen(buf)`未定义。你应该像这样初始化它：

```
buf[0] = 0; 
```

此外，最好跟踪长度而不是调用`strlen`每次迭代来避免[Shlemiel thepainter algorithm](http://www.joelonsoftware.com/articles/fog0000000319.html)。

您还应该检查调用中的错误`read(2)`-- 如果它返回 -1 或 0，您应该跳出循环，因为这意味着发生错误或者您到达了文件/输入流的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:45:53.140

不要`strlen`在此代码中使用。`strlen`依赖于它的参数是一个`NULL`终止的 C 字符串。因此，除非您将*整个*缓冲区初始化为`0`，否则此代码将不起作用。

无论如何，在缓冲数据时使用`strlen` **它不是**一个好的选择，即使您知道您正在使用可打印的字符串数据，如果只是因为*每次*`strlen`都会遍历字符串以获得您的长度。

 *保留一个名为 eg 的单独计数器，`numRead`仅附加到`buf`该`numRead`位置，并按`numRead`您读取的数量递增。*

# javascript - 当特定的 div 在客户端窗口中可见时如何触发事件

> ID：11459840
> 
> 赞同：0
> 
> 时间：2012-07-12T20:12:02.590
> 
> 标签：javascript, jquery, background-image

我有一个由连续条目组成的博客，即。分区。我为每个条目都有一个单独的背景图像。当特定 div 在客户端窗口中可见时，我想更改背景图像。我不知道如何触发它。

我认为这与 :visible 或 .show 无关，所有 div 都已经可见。但是，由于连续的条目，页面很长，我只想在滚动页面并且看到 div 时更改背景图像。

**注意：**顺便说一句，如果存在，javascript 解决方案会更好......而不是 jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:35:42.943

我认为您需要将一个函数绑定到 Windows 滚动事件并在事件触发时验证 div。$j(document).bind("scroll", function() { //检查这里 });

我发现有人也在为这类事情提供插件：[http ://remysharp.com/2009/01/26/element-in-view-event-plugin/](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

--edit-- 这是一个类似的问题和答案： [Check if element is visible after scrolling](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)

# php - 根据条件将css类添加到mysql结果

> ID：11459844
> 
> 赞同：1
> 
> 时间：2012-07-12T20:12:09.547
> 
> 标签：php, css

`MySQL`我从这样的数据库中填充日期列表：

```
<?php
    while ($row = mysql_fetch_array($list_customers)) {
        echo "<tr>\n";
            echo "<td>".$row['customer_date']."</td>\n";
        echo "</tr>\n";
    }
?> 
```

现在我想将结果添加到根据某些标准`<span>`更改的 a 中：`class=''`

*   如果日期结果在今天日期的 30 天内，请添加 `class='yellow'`
*   如果日期结果从今天起超过 30 天，请添加`class='green'`
*   如果日期结果已过，则根据今天的日期，添加`class='red'`

这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:25:42.843

是的。只需使用一系列`if`语句将您的日期与当前时间进行比较，然后为类名分配一个变量，如下所示：

```
while ($row = mysql_fetch_query($list_customers)) {
    echo "<tr>\n";
    $class = "class='green'";
    if (strtotime($row['customer_date']) < time()) {
        $class = "class='red'";
    }elseif (strtotime($row['customer_date']) < time() + 30*24*3600) {
        $class = "class='yellow'";
    }
    echo "<td><span $class>" . $row['customer_date'] . "</span></td>\n";
    echo "</tr>\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:46:40.167

这实际上只是编写`if()`您指定的条件的简单案例。它没有魔法。

首先，我们需要知道您的`customer_date`字段采用什么格式。由于您将其直接打印到 HTML 代码中，我猜它是文本格式，所以我们需要做的第一件事是将其转换为日期对象。

```
$custDate = new DateTime($row['customer_date']); 
```

这仅在日期采用合适的格式时才有效，但老实说，如果它不是标准的 MySQL 日期格式，那么您现在应该停止并在我们继续之前修复它。

您还需要当前日期作为日期对象：

```
$currDate = new DateTime(); 
```

现在您可以使用 DateTime 类上的方法轻松地比较它们：

```
$dateDiff = $currDate->diff($custDate)->days; 
```

现在你已经有了，你可以做你的`if()`条件。

不过，我要注意几点：

1.  你正在使用`mysql_fetch_array()`. 请注意，这些`mysql_`功能被认为是过时的；您应该尽可能替换为`mysqli_xxx`或 PDO 库。

2.  你建议把类放到a`<span>`里面`<td>`——也可以直接把类放到`<td>`. 这将是一个更清洁的选择，因此我将在答案中使用它，尽管这取决于您。

3.  您建议使用类名`red`, `green`, `yellow`. 请注意，这不是对类名的特别好的使用。类名应该反映元素的实际用途，而不是它的外观。这是因为使用类并将样式与 HTML 分开的全部意义在于，可以更改样式而无需更改 HTML。但是，如果类名只是颜色名，它会在逻辑上将其与该颜色联系起来；您也可以将颜色直接放入 HTML 中。类名的更好选择可能是`custExpired`,`custNearlyExpired`等。这会给您以后更大的灵活性，并使任何阅读它的人都更容易理解代码（例如 google bot！）。

因此，考虑到所有这些，这里有一些代码给你：

```
$currDate = new DateTime();
while ($row = $mysqli->fetch_array($list_customers)) {
    $custDate = new DateTime($row['customer_date']);
    $dateDiff = $currDate->diff($custDate)->days;

    $class = '';
    if($dateDiff < 30) { $class = 'custNearlyExpired'; }
    if($dateDiff < 0) { $class = 'custExpired'; }

    echo "<td class='custDate {$class}>{$row['customer_date']}</td>\n";
} 
```

和 CSS：

```
td.custDate {
    background: green;
}
td.custDate.custNearlyExpired {
    background: yellow;
}

td.custDate.custExpired {
    background: red;
} 
```

希望有帮助。

# cocoa - 应用最小化时如何使用 Cocoa 的响应链

> ID：11459851
> 
> 赞同：1
> 
> 时间：2012-07-12T20:12:53.960
> 
> 标签：cocoa, action, target, chain

我正在使用响应者链 (sendAction:to:from:) 从子视图到文档进行通信。问题是当窗口最小化时，如果仍然有任何动作发生，它们就会失败，因为响应者链被破坏了。我不能使窗口成为关键窗口，因为它已最小化。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:42:52.157

我刚刚发现如何使用 NSResponder 做到这一点：

```
- (BOOL)tryToPerform:(SEL)anAction with:(id)anObject 
```

如果接收方响应 anAction，它会调用以 anObject 作为参数的方法并返回 YES。如果接收者没有响应，它会将此消息发送给具有相同选择器和对象的下一个响应者。

# mysql - MySQL 自连接查询优化

> ID：11459852
> 
> 赞同：1
> 
> 时间：2012-07-12T20:12:54.437
> 
> 标签：mysql, django

我有一个从单词列表生成的子字符串数据库。我正在执行比较以检索与某些输入单词共享子字符串的所有单词。

'word_substrings' 数据库格式和示例（对于单词 'aback' ）：

```
 id (primary key), word_id (Foreign Key), word_substring (char(3))

    30                4                      "  a"
    31                4                      " ab"
    32                4                      "aba"
    33                4                      "bac"
    34                4                      "ack"
    35                4                      "ck "
    36                4                      "k  " 
```

其中“word_id”是单词表中单词的键。

我试过一个等价的：

```
 select distinct t1.word_id 
        from word_substrings t1, word_substrings t2 
        where t1.word_substring = t2.word_substring 
        and t2.word_id = [some word_id] 
```

以及表连接：

```
 select distinct t1.word_id
        from word_substrings as t1
        join word_substrings as t2 
        on t1.word_substring = t2.word_substring
        where and t2.word_id = [some word_id] 
```

但是，这两个查询都需要大约 10 秒才能返回结果。

鉴于 word_substrings 表和 word_substrings 表都可能发生变化，但数据会被非常定期地检索，我尝试制作一个视图来帮助缩短查询时间。但是，我看到返回时间没有名义上的变化。

我的单词列表目前是 40k 行，而我的子字符串列表大约是 400k 行。

有没有人对如何优化查询或重新格式化数据库以缩短返回时间有任何想法？

我已经考虑生成一个表，其中包含代表每个可能的子字符串的列，并在适当的列中注册每个单词，但是我不太清楚它是如何工作的。

我感谢您的所有帮助！如果有任何我忽略的信息，我很乐意为您检索这些数据。

注意：如果是相关信息，这是针对 Django Web 应用程序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:22:48.520

你需要一个关于`word_id`和的索引`word_substring`。（同时，尽可能设置列`not null`）

这样，使用 only 的查询`word_id`将起作用，而其他使用`word_id`and的查询`word_substring`也将起作用。

干杯。

# android - Android - 具有多项活动的 Google Analytics（分析）

> ID：11459853
> 
> 赞同：0
> 
> 时间：2012-07-12T20:12:56.050
> 
> 标签：android

我们有一个想要添加分析的现有应用程序。

此链接：[https](https://developers.google.com/analytics/devguides/collection/android/devguide) ://developers.google.com/analytics/devguides/collection/android/devguide展示了如何使用单个 Activity 执行此操作。它提到具有多个活动的应用程序应该使用[EasyTracker 库](https://code.google.com/p/analytics-api-samples/downloads/detail?name=EasyTrackerAndroid_1.0.zip&can=2&q=)。虽然我找不到任何直接文档，但查看示例并搜索 SO 建议使用 EasyTracker，活动应该扩展 TrackerActivity。

但是，我们正在使用兼容库来支持 Fragment，因此 App 中的大多数 Activity 已经扩展了 FragmentActivity，因此无法扩展 TrackerActivity。

找到这篇文章：[Android 应用程序中的 Google Analytics - 处理多个活动](https://stackoverflow.com/questions/3216692/google-analytics-in-android-app-dealing-with-multiple-activities/6253664#6253664)，回答者为这种情况提供了替代方案。当我开始实施那里发布的解决方案时，Eclipse 会发出警告，表明 GoogleAnalyticsTracker 的`start`和`stop`方法已被弃用。

找不到文档，我假设它`start`已被替换为`startNewSession`，并且`stopSession`应该被用来代替`stop`，但我不确定。如果我进行这些更改，上面链接的解决方案是否仍然有效？是否有可用于具有多个活动的应用程序的替代方法，它不能继承 TrackerActivity？

蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:26:37.743

事实证明，上面链接的解决方案效果很好，并且可以根据我的评论替换不推荐使用的[方法](https://stackoverflow.com/questions/3216692/google-analytics-in-android-app-dealing-with-multiple-activities/6253664#comment15168180_6253664)。

# php - 无法在 Apache 2.2.17 (Unix) 上发布

> ID：11459855
> 
> 赞同：0
> 
> 时间：2012-07-12T20:13:00.810
> 
> 标签：php, apache, apache2

我在安装 Apache 时遇到问题，其中任何 POST 请求都会导致：

```
Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data. 
```

或者

```
Error 115 Connection Reset 
```

我在下面设置了一个基本测试，apache 每次都失败。任何人都知道可能导致这种情况的原因吗？谢谢！

```
 <?php
     // Note: This is running on my localhost:8080
    if(isset($_POST)) print_r($_POST);
    ?>
    <!DOCTYPE html>
    <body>
        <form method="post" action="posttest.php">
        <input type="text" name="test" value="test" />
        <input type="submit" />
        </form>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:55:40.267

我们遇到了同样的问题。

解决了重新安装Apache

```
yum reinstall httpd 
```

希望这有帮助。Rgds

# javascript - 将列表值传递给 jQuery 点击函数

> ID：11459859
> 
> 赞同：0
> 
> 时间：2012-07-12T20:13:05.507
> 
> 标签：javascript, jquery, arguments

我有一个可以更改背景图像的小 js 脚本。您可以通过以下方式解决

```
$(document).ready(function(){ 
$("#test").click(function(){
   api.goTo(5); // this will call background slide no. 5
});
});
// this ahref will call the jQuery click handler and swap the background
<a href="javascript:;" id="test" name="test">Test</a> 
```

而且我需要一种方法来动态地告诉第一个脚本它必须交换到的页面。另一个脚本以这种方式提供列表结构：

```
<ul class="myclass" id="slider">
    <li jcarousel-page="1" class="active"><a href="javascript:void(0)"><span>1</span></a></li>
    <li jcarousel-page="2"><a href="javascript:void(0)"><span>2</span></a></li>
</ul> 
```

我最终尝试得到的是，例如，如果您单击列表项 2，则应告知第一个脚本“api.goTo(2)”更改为背景 2...

我知道 jQuery 中有一个事件处理函数。但我真的不明白如何将点击的列表项的数量传递给 jQuery.click 处理程序......

感谢您的帮助！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:18:33.717

```
$('li[jcarousel-page]').click(function() {
    api.goTo($(this).attr('jcarousel-page'));
}); 
```

# python - Python编辑距离

> ID：11459861
> 
> 赞同：3
> 
> 时间：2012-07-12T20:13:11.220
> 
> 标签：python, sequence, edit, distance, biopython

我是一名分子生物学家，使用 Biopython 分析基因突变，我的问题是：

我有一个包含许多不同序列（数百万）的文件，其中大部分是重复的。我需要找到重复项并丢弃它们，为每个唯一序列保留一份副本。我打算使用模块 editdist 来计算它们之间的编辑距离，以确定哪些是重复项，但 editdist 只能处理 2 个字符串，而不是文件。

任何人都知道我如何将该模块与文件而不是字符串一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:29:49.557

假设您的文件仅由每行排列一个序列的序列组成，我建议如下：

```
seq_file = open(#your file)

sequences = [seq for seq in seq_file]

uniques = list(set(sequences)) 
```

假设你有它的记忆。几百万？

预计到达时间：

正在阅读上面的评论（但没有评论权限）-假设任何重复项的序列 ID 相同，这将起作用。如果重复序列可以有不同的序列 ID，那么就会知道文件中哪个先出现，它们之间是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:25:49.467

如果要过滤掉完全重复的内容，可以使用`set`Python 内置类型。举个例子 ：

```
a = ["tccggatcc", "actcctgct", "tccggatcc"] # You have a list of sequences
s = set(a) # Put that into a set 
```

`s`然后等于`['tccggatcc', 'actcctgct']`，没有重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:23:48.367

它必须是Python吗？

如果序列只是每行一个的文本字符串，那么 shell 脚本将非常有效：

```
sort input-file-name | uniq > output-file-name 
```

这将在 32 位 Linux 上处理高达 2GB 的文件。

如果您在 Windows 上，请安装 GNU utils [http://gnuwin32.sourceforge.net/summary.html](http://gnuwin32.sourceforge.net/summary.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:35:47.670

想到四件事：

1.  如 FX 所述，您可以使用 set() - 假设唯一的字符串都适合内存
2.  您可以每个序列使用一个文件，并将文件提供给 equivs3e 之类的程序：http: [//stromberg.dnsalias.org/~strombrg/equivalence-classes.html#python-3e](http://stromberg.dnsalias.org/~strombrg/equivalence-classes.html#python-3e)
3.  您也许可以将 gdbm 用作一个集合，而不是通常的键值存储使用。如果您需要 100% 准确的东西，这很好，但是您有太多数据无法容纳虚拟内存中的所有唯一性。
4.  如果您有大量的字符串要检查并且有大量重复项，您也许可以使用布隆过滤器将数据缩减到更易于管理的大小。基本上布隆过滤器可以说“这绝对不在集合中”或“这几乎肯定在集合中”。这样，您可以在使用更常见的方式对剩余元素进行操作之前消除大部分明显的重复项。 [http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/](http://stromberg.dnsalias.org/~strombrg/drs-bloom-filter/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T20:29:37.673

不要害怕文件！;-)

我通过假设以下内容发布一个示例：

1.  它是一个文本文件
2.  每行一个序列

-

```
filename = 'sequence.txt'
with open(filename, 'r') as sqfile:
   sequences = sqfile.readlines() # now we have a list of strings

#discarding the duplicates:
uniques = list(set(sequences)) 
```

就是这样 - 通过使用 pythons set-type 我们自动消除所有重复项。

如果您在同一行中有 id 和序列，例如：

```
423401 ttacguactg 
```

您可能希望消除以下 ID：

```
sequences = [s.strip().split()[-1] for s in sequences] 
```

使用 strip 我们从前导和尾随空格中去除字符串，使用 split 我们将行/字符串拆分为 2 个组件：id 和序列。使用 [-1] 我们选择最后一个组件（= 序列字符串）并将其重新打包到我们的序列列表中。

# iphone - 缺少 WWW 文件夹 Cordova/PhoneGap iOS

> ID：11459862
> 
> 赞同：0
> 
> 时间：2012-07-12T20:13:12.750
> 
> 标签：iphone, ios, xcode, cordova

下载并安装 Cordova/PhoneGap 后，我创建了一个新的 xCode 项目。在尝试按照入门指南进行操作后，我发现我没有“www”文件夹可以复制到 xCode！

我在某个地方出错了吗？

[![截图 1](../Images/1ad391ec737833a73ff99ed243720dc4.png)](https://i.stack.imgur.com/qut7E.png)
[（来源：[jonweb.co.uk](http://jonweb.co.uk/phonegap/screenshot1.png)）]

[![截图 2](../Images/a934c0b4bd0e0d8e69e8ea34a3c3b864.png)](https://i.stack.imgur.com/8Eezj.png)
[（来源：[jonweb.co.uk](http://jonweb.co.uk/phonegap/screenshot2.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:38:49.787

您需要运行该应用程序一次，www 文件夹将在您的目录中创建。然后，您只需将其拖入 XCode 以告知您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:21:35.677

您是[从](http://docs.phonegap.com/en/1.9.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)“基于 Cordova 的应用程序”开始的吗？

![](../Images/21713c24999af3687747378c3cb96b17.png)

# java - Android ListViews 中是否有类似的内置功能，例如 iOS 分组 UITableView？

> ID：11459863
> 
> 赞同：0
> 
> 时间：2012-07-12T20:13:18.047
> 
> 标签：java, android, ios, eclipse, android-listview

Android开发新手在这里....

在 iOS 中，您可以从 UITableView 的两种主要样式（自定义之前）中进行选择...普通和分组。我真的很喜欢我在 iOS 中对我的应用程序的一些视图的分组外观。

Android ListViews 是否有类似的内置视图样式？显然我不希望它看起来像 Android 上的 iOS，但如果 Android 有自己的“分组”风格，我很想看看。

有这样的吗？还是我只需要自定义基本的 ListView 它是怎样的？

顺便说一句，我使用的是 API 14 (ICS 4.0) 的基础 SDK，所以我*可以*使用最新最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:02:27.320

经过一番研究，我了解到这个问题的答案是否定的。

# c - C 语言：将 3 个字符字符串 ("123") 转换为 %.2f (1.23)

> ID：11459865
> 
> 赞同：-3
> 
> 时间：2012-07-12T20:13:21.217
> 
> 标签：c, string, pointers, floating-point, double

我需要将 3 个字符（“123”）的 char * 字符串转换为带两位小数的浮点数（1.23）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:19:06.977

您可以使用 atoi，它将 ASCII 转换为整数。然后将该 int 转换为浮点数。

```
int num = atoi(string);
float f = num/100.0f;
printf ("%.2f", f); 
```

# editor - VIM：在我们/他们的冲突块之间进行选择

> ID：11459867
> 
> 赞同：3
> 
> 时间：2012-07-12T20:13:33.667
> 
> 标签：editor, vim

这个问题是关于如何在冲突块上选择我们或他们的有用映射，例如

```
<<<<<<< HEAD
ours code
=======
theirs code
>>>>>>> branch 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:50:22.843

只需将以下代码粘贴到您的 ~/.vimrc 中并使用`,fc`,`,so`和`,st`. （完整的 .vimrc 在[https://github.com/brauliobo/gitconfig](https://github.com/brauliobo/gitconfig)）

```
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" Find Nearest
" Source: http://vim.1045645.n5.nabble.com/find-closest-occurrence-in-both-directions-td1183340.html
""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""                                                        
function! FindNearest(pattern)
  let @/=a:pattern
  let b:prev = search(a:pattern, 'bncW')
  if b:prev
    let b:next = search(a:pattern, 'ncW')
    if b:next
      let b:cur = line('.')
      if b:cur - b:prev == b:next - b:cur
        " on a match
      elseif b:cur - b:prev < b:next - b:cur
        ?
      else
        /
      endif
    else
      ?
    endif
  else
    /
  endif
endfunction

command! -nargs=1 FN call FindNearest(<q-args>)
nmap \ :FN<space>

""" Select between conflict blocks
" select ours
nmap <leader>so \<<<<<<<<CR>dd/=======<CR>V/>>>>>>><CR>d
" select theirs
nmap <leader>st \<<<<<<<<CR>V/=======<CR>dk/>>>>>>><CR>dd
" find next conflict
nmap <leader>fc /<<<<<<<<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T06:36:50.500

我为此编写了一个插件：[ConflictMotions](http://www.vim.org/scripts/script.php?script_id=3991)。它提供以下映射：

```
 ]x     Go to [count] next start of a conflict.
    ]X     Go to [count] next end of a conflict.
    [x     Go to [count] previous start of a conflict.
    [X     Go to [count] previous end of a conflict.
    ]z     Go to [count] next conflict marker.
    [z     Go to [count] previous conflict marker.

    ax     "a conflict" text object, select [count] conflicts,
           including the conflict markers.
    az     "a conflict section" text object, select [count]
           sections (i.e. either ours, theirs, or base) including
           the conflict marker above, and in the case of "theirs"
           changes, also the ending conflict marker below.
    iz     "inner conflict section" text object, select current
           section (i.e. either ours, theirs, or base) without
           the surrounding conflict markers. 
```

# ruby-on-rails-3.1 - 在 Maven 下运行 Warbler 的 Gem 问题

> ID：11459872
> 
> 赞同：1
> 
> 时间：2012-07-12T20:13:43.450
> 
> 标签：ruby-on-rails-3.1, rubygems, jruby, bundler, maven-3

我发现我们的构建管理服务器有些奇怪（我们正在使用 Jenkins CI）。项目使用 Maven（版本 3.0.3）构建

其他环境细节： `Rails 3.1.3` `Jruby 1.6.7` `Ruby 1.9.2` `Bundler 1.0.22 for rails gem management` `warbler 1.3.5`

我们有一个 bash 脚本，它运行捆绑安装、assets:precompile（rake 任务）和 rake war 任务：

```
jruby -S bundle install
jruby -S bundle exec rake assets:precompile
jruby -S bundle exec rake war RAILS_ENV=production 
```

该`pom.xml`项目的文件有一个名为的任务`package`，它基本上运行上面的 bash 脚本，以及其他一些构建后清理的东西。

**我的问题：**

如果我运行，`mvn package`我会收到以下错误：

```
[INFO] ..... Previous output of maven stuff .....
[INFO] + jruby -S bundle exec rake war RAILS_ENV=production
[INFO] Bundler::GemNotFound: Could not find rake-0.9.2.2 in any of the sources
[INFO]       materialize at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/spec_set.rb:88
[INFO]              map! at org/jruby/RubyArray.java:2371
[INFO]       materialize at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/spec_set.rb:82
[INFO]             specs at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:107
[INFO]         specs_for at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:152
[INFO]   requested_specs at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/definition.rb:141
[INFO]   requested_specs at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/environment.rb:23
[INFO]             setup at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:11
[INFO]             setup at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler.rb:110
[INFO]            (root) at /mnt/data_drive/opt/jruby-1.6.7/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/setup.rb:17 
```

**但是**，如果我只是运行，在项目文件夹的命令行中：

```
jruby -S bundle exec rake war RAILS_ENV=production 
```

（这实际上是它似乎在抱怨的命令） - 一切都成功了，它构建了 WAR 没有问题，找到所有的 gem 文件，等等。

我想知道是否有人对问题可能有任何建议。我已经做了一个`jruby -S gem install rake -v '0.9.2.2'`，而且，为了以防万一，一个`gem install rake -v '0.9.2.2'`- 但是它没有任何区别。

任何建议表示赞赏:) 谢谢！

# android - 清单/活动错误

> ID：11459874
> 
> 赞同：3
> 
> 时间：2012-07-12T20:13:49.143
> 
> 标签：android, autostart

我正在尝试让我的应用程序在启动时自动启动，它会在启动应用程序时发生错误

这是我的清单和“自动启动器”的程序文件：

```
manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="this.bad.file"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="autoBot"
        android:enabled="true"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

这是我所说的“AutoBot”（不是因为垃圾邮件的原因，我只是喜欢变形金刚）：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class autoBot extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        Intent startUp = new Intent(context, MainActivity.class);
        context.startActivity(startUp);
    }
} 
```

因此，我们有它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:22:01.423

在您的清单中，您遗漏了类的重要名称，通常可以缩写为 [dot][ClassName] 或完整的包名，例如`.autoBot`或参见下面的示例：

```
<receiver android:name="this.bad.file.autoBot">
    <intent-filter>
       <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

在您的广播接收器中：

```
public class autoBot extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent startUp = new Intent(context, MainActivity.class);
        context.startActivity(startUp);
    }
} 
```

`@Override`注意类上的用法`onReceive`。

通常推荐的正常路线是，在启动时启动警报，并在警报到期时收听广播，这样您的活动就不会占用启动，并且允许启动过程“解决”就一点点。

# c# - 将分钟转换为小时、分钟和秒

> ID：11459879
> 
> 赞同：6
> 
> 时间：2012-07-12T20:13:55.140
> 
> 标签：c#, timer

在我的界面中，我让用户输入他们可以暂停操作的 X 分钟数。

如何将其转换为小时、分钟和秒？

我需要它来更新倒计时标签以向用户显示剩余时间。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-12T20:16:16.753

首先创建 TimeSpan，然后将其格式化为您想要的任何格式：

```
TimeSpan span = TimeSpan.FromMinutes(minutes);
string label = span.ToString(@"hh\:mm\:ss"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T20:17:16.950

创建一个新的`TimeSpan`：

```
var pauseDuration = TimeSpan.FromMinutes(minutes); 
```

您现在有了方便的属性`Hours`,`Minutes`和`Seconds`。我应该认为它们是不言自明的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:47:10.030

这应该给你一个开始的地方。定时器设置为 1000 毫秒。它使用与其他答案相同的想法，但更加充实。

```
public partial class Form1 : Form
{
    TimeSpan duration;

    public Form1()
    {
        InitializeComponent();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
      duration  =  duration.Subtract(TimeSpan.FromSeconds(1)); //Subtract a second and reassign
      if (duration.Seconds < 0)
      {
          timer1.Stop();
          return;
      }

      lblHours.Text = duration.Hours.ToString();
      lblMinutes.Text = duration.Minutes.ToString();
      lblSeconds.Text = duration.Seconds.ToString();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if(!(string.IsNullOrEmpty(textBox1.Text)))
        {
            int minutes;
            bool result = int.TryParse(textBox1.Text, out minutes);
            if (result)
            {
                duration = TimeSpan.FromMinutes(minutes);
                timer1.Start();
            }
        }

    }
} 
```

# php - 如何将变量对象传递给多个 javascript 弹出表单

> ID：11459884
> 
> 赞同：0
> 
> 时间：2012-07-12T20:14:21.867
> 
> 标签：php, javascript, ajax, symfony1, symfony-1.4

这是我第一次认真尝试 javascript/ajax。

概述：我有一个索引页面列出了多条记录，每条记录在不同的行上。对于每条记录，我都有一个链接，它会弹出一个包含 symfony 表单的小 javascript 窗口。一切顺利，除了我不知道如何通过弹出 javascript 传递每条记录的对象 ID。这是我所拥有的：

从行动开始：

```
public function executeTrackReferrals(sfWebRequest $request){
       $userId = $this->getUser()->getId();       
       $this->pager = new sfDoctrinePager('referral', sfConfig::get('app_pager'));
       $this->pager->setQuery(Doctrine_Core::getTable('Referral_submissions')->getUsersSubmissions($userId));
       $this->pager->setPage($request->getParameter('page', 1));
       $this->pager->init();} 
```

主索引页面：

```
<?php 
    include_partial('<a bunch of other includes >');
    include_partial('referral/rtsIndex', array('pager' => $pager));  
?> 
```

_rtsIndex 部分：

```
<table>
<?php foreach ($pager->getResults() as $r => $referral): ?>
<?php 
    $referralObject = Doctrine_Core::getTable('referral')->getReferralObjectById($referral->getId()); 
    $submissionObject = Doctrine_Core::getTable('referral_submissions')->getObjectByReferralId($referralObject->getId()); 
?> 
<TR VALIGN=TOP> 
            <td WIDTH=10% ALIGN="center" class="_7">
            <P ALIGN=CENTER>
                <script type='text/javascript'>
                    $('.popup_changestatus').click(function(){
                    // put the row id into the hidden field in the popup
                      var rowId = $(this).parent().find('span.row_id').html();
                      $('test').val(rowId);
                    fg_popup_form("fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup");
                    return false;
                    });
                </script>

                <a href="#" class="popup_changestatus">
                    <?php echo utilities::getStatusCode($submissionObject->getCandidateStatus()); ?>
                </a>
                <span class="row_id" style="display: none">
                    <?php echo $referral->getId() ?>
                </span>

            </P>
        </td>
</TR>
</table> 
```

上面提到的 Javascript 弹出表单代码，包括这一行：

```
<?php  include_partial('referral/changeStatusCodeForm'); ?> 
```

上面的行渲染了实际的 symfony 表单：

_changeStatusCodeForm 部分：

```
<?php
$object = new referral_submissionsForm(<this is where I need to pass an ID for each popup form>);
echo $object;
?> 
```

谁能引导我朝着正确的方向前进？

如果对实际的 javascript 代码感兴趣，这是一个非常漂亮的开源弹出窗口：http: [//www.html-form-guide.com/contact-form/simple-modal-popup-contact-form.html](http://www.html-form-guide.com/contact-form/simple-modal-popup-contact-form.html)

编辑：这是contactform-code.php的内容：

```
<script type='text/javascript' src='/project/misc/simple-popup-form-1/scripts/gen_validatorv31.js'></script>
<script type='text/javascript' src='/project/misc/simple-popup-form-1/scripts/fg_ajax.js'></script>
<script type='text/javascript' src='/project/misc/simple-popup-form-1/scripts/fg_moveable_popup.js'></script>
<script type='text/javascript' src='/project/misc/simple-popup-form-1/scripts/fg_form_submitter.js'></script>
<div id='fg_formContainer'>
    <div id="fg_container_header">
        <div id="fg_box_Title">Change Status</div>
        <div id="fg_box_Close"><a href="javascript:fg_hideform('fg_formContainer','fg_backgroundpopup');">Close(X)</a></div>
    </div>

    <div id="fg_form_InnerContainer">
    <form id='contactus' action='javascript:fg_submit_form()' method='post' accept-charset='UTF-8'>

    <input type='hidden' name='submitted' id='submitted' value='1'/>
    <input type='hidden' name='<?php echo $formproc->GetFormIDInputName(); ?>' value='<?php echo $formproc->GetFormIDInputValue(); ?>'/>
    <input type='text'  class='spmhidip' name='<?php echo $formproc->GetSpamTrapInputName(); ?>' />
    <div class='short_explanation'>* required fields</div>
    <div id='fg_server_errors' class='error'></div>
    <div class='container'>

        <?php 
//        $form = new referral_submissionsForm();
          include_partial('referral/changeStatusCodeForm'); 
        ?>
</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:33:41.897

首先，您不应该直接`Doctrine_Core`在模型中使用。最好的方法是`leftJoin`在将查询传递给寻呼机时在 2 个表上创建一个。然后，在您的模板中，您只需获取关系（如`$object->getRelation()`）。

关于您的问题，您应该在构建时传递 ID，`<div id='fg_formContainer'>`因为它是您的弹出窗口的内容。该部分来自此文件：`contactform-code.php`.

告诉我们你在哪里建造这个`div`，你将有你必须通过的地方`id`。

**编辑：**

好吧，我终于明白你的问题了。您的页面上有一个弹出定义，可以在每行的每次点击时调用。并且您想知道如何将行 ID 传递给全局弹出窗口。

这可以在 javascript 中完成。代替 ：

```
<a href='javascript:fg_popup_form("fg_formContainer","fg_form_InnerContainer","fg_backgroundpopup" );'>
  <?php echo utilities::getStatusCode($submissionObject->getCandidateStatus()); ?>
</a> 
```

您可以更好地使用：

```
<a href="#" class="popup_contact">
  <?php echo utilities::getStatusCode($submissionObject->getCandidateStatus()); ?>
</a>
<!-- use this hidden span to put the row id, to be able to retrieve it using jQuery -->
<span class="row_id" style="display: none">
  <?php echo $referral->getId() ?>
</span> 
```

然后，使用 jQuery 定义一个动作（例如）：

```
$('.popup_contact').click(function() {
  // put the row id into the hidden field in the popup
  var rowId = $(this).parent().find('span.row_id').html();
  $('#submitted').val(rowId);

  fg_popup_form("fg_formContainer", "fg_form_InnerContainer", "fg_backgroundpopup");
  return false;
}) 
```

# coverity-prevent - Coverity 安装和数据库设置 (cov-install-gui)

> ID：11459888
> 
> 赞同：3
> 
> 时间：2012-07-12T20:14:36.217
> 
> 标签：coverity-prevent

我是使用覆盖的新手，这可能不是一个非常具有挑战性的问题，但如果有人能指导我完成设置 .

我首先运行以下命令：

cov-configure --compiler /usr/bin/gcc --comptype gcc

这在我的 /config 目录中创建了一些与上述命令有关的文件。

真正的问题发生在我运行 cov-install-gui 命令来设置缺陷管理器和数据库时，我不确定为 --datadir 选项输入什么。当我传入一个空目录（仅作为尝试）时，它抱怨说在空目录中不存在coverity_db。

我不清楚在哪里可以找到coverity_db 目录或如何安装它？我觉得我在 cov-configure 命令中遗漏了一些东西，但我不确定。

我也在使用，Linux CentOS 5.4 和 Coverity 阻止 4.5

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:42:27.707

由于您引用的是缺陷管理器，因此您使用的是旧的且不再受支持的 Coverity Prevent 版本（4.5 或更早版本）。

当前版本是 6.0，因此您不应该使用您现在的版本。

您的问题的答案是数据目录是用于写入结果和 GUI 文件的任何目录，因此您可以指定任何尚不存在的文件路径，它将创建目录和它需要的文件那个目录。

# if-statement - 这个 If 语句是如何工作的？

> ID：11459890
> 
> 赞同：2
> 
> 时间：2012-07-12T20:14:44.667
> 
> 标签：if-statement, fortran, goto

我正在尝试自学`fortran`，这样我就可以解开一个旧程序并将其重新用于我们自己的用途。我无法弄清楚这个语句的作用：

```
if(s - fm) 198, 198, 197 
```

`s - fm`不是可以为真或假的条件，对吗？

当它把控制权交给标记为 198 的行时，它会继续到程序的结尾吗？它怎么知道什么时候回来执行 198 再执行 197？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T20:20:20.800

这是 IF 的“古老”形式：

```
IF (''arithmeticExpression'') ''firstLineNumber'', ''secondLineNumber'', ''thirdLineNumber'' 
```

在第二种形式中，计算算术表达式。如果表达式的计算结果为负数，则从第一行号继续执行。如果表达式的计算结果为零，则在第二行号处继续执行。否则，在第三行号处继续执行。

根据表达式的符号，这是一个“三向 goto”。

在更传统的类 C 语言中，它是

```
/* IF(a) label1, label2, label3 */

if(a > 0)
{
   goto label3;
} else
if(a < 0)
{
   goto label1;
} else
{
   // a == 0
   goto label2;
} 
```

您的案例包含两个标签 198，其工作方式类似于

```
if(s <= fm) { goto lbl198; } else { goto lbl197; } 
```

参考：[维基书](http://en.wikibooks.org/wiki/Fortran/Fortran_control)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:56:03.603

这个过时的功能让很多人感到困惑：

[FORTRAN 编译器警告：过时的算术 IF 语句](https://stackoverflow.com/questions/10758935/fortran-compiler-warning-obsolete-arithmetic-if-statement)

[Fortran 奇怪的 IF](https://stackoverflow.com/questions/11124855/fortran-strange-if)

[奇怪的标签用法](https://stackoverflow.com/questions/6789946/strange-label-usage)

# android - 在android中的活动上调用finish（）的最佳实践？

> ID：11459894
> 
> 赞同：8
> 
> 时间：2012-07-12T20:14:54.053
> 
> 标签：android, android-activity

我的大多数活动都从服务器加载动态数据，当页面重新成为焦点时，我无论如何都会重新加载它。如果我只是要重新加载它们，保留它们似乎很浪费，所以如果用户离开页面，我想在它们上调用 finish()。

如果某些活动您可以按后退按钮转到而其他活动则不能，因为我已经在它们上调用了finish（），所以我想知道是否只是在用户导航离开的所有活动上调用finish（）是不好的做法? （我在每个活动的底部都有一个导航栏，因此不需要返回按钮）。或者，最好不要在任何活动上调用finish()，只希望它们不会减慢手机速度，并且操作系统会处理垃圾收集它们？

我是 Android 编程新手，并且没有 Android 手机，所以我不确定在这种情况下常见/最佳做法是什么，或者这只是个人喜好问题。

此外，是否可以指示 Android 保留活动历史记录，以便后退按钮仍然有效，但在它们离开时完成（）它们，这样它们就不会不必要地占用资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:20:43.210

虽然您可以在返回活动时重新加载所有数据，但调用`finish()`.

当活动被隐藏时，它们不使用资源，并且没有真正的问题。让它们保持原样，然后当用户导航回来时，它会根据需要重新加载它。

在这种状态下，如果需要，它们也可以被垃圾收集——这一切都由 android 负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:21:55.353

在大多数情况下，您不需要（也不应该）调用 finish(); Android 会为您管理活动。

如果您需要在用户离开活动时进行清理，您可以在各种活动回调中执行此类操作，例如 onDestroy()。

如果您还没有这样做，请阅读Android 开发人员指南中的[活动](http://developer.android.com/guide/components/activities.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:22:19.453

`finish()`除非您确定该活动不会在很长一段时间内执行，否则您不应调用。最好让Android处理它的处理方式。将您的清洁代码`onPause()`和加载代码放入`onResume()`.

# html - twitter-bootstrap-rails 最大列宽

> ID：11459900
> 
> 赞同：2
> 
> 时间：2012-07-12T20:15:21.753
> 
> 标签：html, css, ruby-on-rails-3, column-width, twitter-bootstrap-rails

我正在开发一个使用 twitter-bootstrap-rails 设置样式的非常简单的应用程序。我的模型索引页面有一个显示数据的表格，它看起来非常棒。问题是，如果有人在其中一个字段中输入一串很长的完整文本（例如 URL），则该列的宽度会拉伸并挤压所有其他列。我想要一些方法来强制列的宽度并告诉浏览器分解很长的单词。

到目前为止，我尝试做的是为每个`<th>`我添加了一个类并尝试使用 CSS 来控制宽度。这是一个例子

```
<table>
  <thead>
    <tr>
      <th class="column1"> etc
      <th class="column2"> etc
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="column1"> etc
      <td class="column2" etc
    </tr>
  </tbody>
</table> 
```

然后我在我的样式表中使用它

```
th.column1 { width: 300px;
  word-wrap:break-word;}
td.column1 { width: 300px;
  word-wrap:break-word;} 
```

到目前为止，这对我不起作用，我想知道我是否需要大量复制我的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T14:24:33.350

我最终自己修复了它。我所做的是使用最大宽度而不是宽度

```
th.column1 td.column1 { max-width:300px; word-wrap:break-word; } 
```

# c# - 非静态字段需要对象引用。. . . ， 错误

> ID：11459902
> 
> 赞同：0
> 
> 时间：2012-07-12T20:15:31.097
> 
> 标签：c#

这是我的代码：

目的是添加两个大数字，首先在 2 个数组中输入两个数字，然后交换它们并添加它们，基于控制台，

我是 C# 的新手，所以请解释一下，记住我对代码的了解

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace Sum_Two_BIG_Numbes
{
    public class matrix
    {

        public int[] c;

        public void input(int[] a)
        {
            for (int i = 0; i < a.Length; i++)
            {

                a[i] = Convert.ToInt32(Console.ReadLine());

            }
        }
        public void Jamk(int[] a, int[] b, int[] c)
        {

            for (int i = 0; i < a.Length; i++)
            {
                int temp = a[i] + b[i];
                if ((temp < 10) && (c[i] != 1))
                {
                    c[i] = c[i] + temp;
                }
                else
                {
                    c[i] = c[i] + temp % 10;
                    c[i + 1] = c[i + 1] + temp / 10;

                }
            }

        }
        public void swap(int[] a)
        {

            for (int i = 0; i < a.Length; i++)
            {
                a[i] = a[a.Length - i];
            }

        }
    }
    class Program
    {
        public void Main(string[] args)
        {
            int[] a = new matrix();
            //int[] a = new int[30];
            int[] b = new int[30];
            int[] c = new int[30];
            Console.WriteLine("Enter First Number : ");
            matrix.input(a);

            Console.ReadLine();
        }
    }
} 
```

我收到此错误“非静态字段需要对象引用......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:19:52.297

```
matrix.input(a); 
```

在哪里`matrix`声明（不是）。

```
int[] a = new matrix(); 
```

此外，您不能将 的实例分配`matrix`给`int[]`. 没有从一个到另一个的隐式转换。虽然我不能说这是一个伟大的设计，但你想要的是这样的：

```
matrix a = new matrix();
a.c = new int[SomeSize];
// more code
a.input(b);  // or something similar... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:22:16.690

您需要在 Main 方法中创建一个新的类矩阵实例，如下所示：matrix instance = new matrix(); 然后你可以调用矩阵类的方法。阅读静态和实例方法/属性/字段之间的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:23:50.173

您的代码实际上没有意义，但这就是我认为您的意思

```
public void Main(string[] args)
        {
            matrix m = new matrix();
            int[] a = new int[30];
            int[] b = new int[30];
            int[] c = new int[30];
            Console.WriteLine("Enter First Number : ");
            m.input(a);

            Console.ReadLine();
        } 
```

现在，这将使您克服第一轮编译错误，但这仍然没有意义。关于您的输入/输出。

我建议您阅读`Console.ReadLine()`

# c# - 启动过程并不总是启动

> ID：11459908
> 
> 赞同：1
> 
> 时间：2012-07-12T20:15:47.210
> 
> 标签：c#, .net, process, process.start

我有以下功能：

```
public static void ExecuteNewProcess(string fileToExecute, Action<string> writeToConsole)
{
    ProcessStartInfo startInfo = new ProcessStartInfo(fileToExecute);
    Process processToExecute = new Process();

    startInfo.UseShellExecute = true;
    processToExecute.StartInfo = startInfo;

    if (!File.Exists(fileToExecute))
    {
        throw new FileNotFoundException("File not found for execution");
    }

    if (processToExecute.Start())
    {
        Thread.Sleep(6000);
        Process[] procs = Process.GetProcesses();

        if (IsProcessOpen(Path.GetFileNameWithoutExtension(fileToExecute)))
        {
            writeToConsole(fileToExecute + " launched successfully...");
        }
        else
        {
            writeToConsole(fileToExecute + " started but not found.");
            throw new Exception("Application started butnot found running...Delay = 6000, File Name = " + Path.GetFileNameWithoutExtension(fileToExecute));               
        }

    }
    else
    {
        writeToConsole("Error Launching application: " + fileToExecute);
        throw new Exception("Application did not launch " + fileToExecute);
    }

}

private static bool IsProcessOpen(string name)
{

    foreach (Process clsProcess in Process.GetProcesses())
    {

        if (clsProcess.ProcessName.Contains(name))
        {

            return true;
        }
    }

    return false;
} 
```

所以问题是，有时我试图用这个函数启动的应用程序没有启动（它启动了大约 80% 的时间）。但是，我确实检查了代码的一部分，以确保它启动并输出。我不知道为什么它没有开始。当我看到它没有启动时，我双击该应用程序以确保它是一个有效的 exe。它总是很好，而且开始很好。我也尝试过使用外壳而不是使用外壳。没有不同。

我认为 processToExecute 在应用程序一直成功启动之前就被清理了。不过只是猜测。

我提前感谢您的帮助。

我睡了几觉，看看是不是发生得太快了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:37:59.930

20% 的时间你的应用程序在 Process 启动时没有显示的原因是应用程序在我们看到用户界面之前加载的时间

因此，它们是您可以实现它的两种方式

`1\. start the process - > process.Start(); And then process.WaitForInputIdle();`

或者

```
 2\. start the process - > process.Start(); And then  Thread.Sleep(1000);
    //make sure you give reasonable milliseconds 
```

# jquery - 如何检查状态图像javascript加载

> ID：11459909
> 
> 赞同：2
> 
> 时间：2012-07-12T20:15:48.630
> 
> 标签：jquery, ajax, image, status

我正在做一个新项目，我正在从不同的网站拍照。

问题是当我拍照时，有时会出现404错误状态。如果链接损坏，这不是一个真正的问题，因为我从 DOM 中删除了这些图像，但是某些网站用默认图像替换了损坏的图像（如这里：[http://p.twimg.com/Axm3Vs-CQAEwfAj.jpg：大](http://p.twimg.com/Axm3Vs-CQAEwfAj.jpg:large)）

唯一的信息是我的日志中出现这样的错误：加载资源失败：服务器响应状态为 404（未找到）。

这里有没有人可以为我提供解决方案？

有我用于检测损坏图像的代码：

```
$('img').error(function(){
    $(this).hide().parents('a').parents('li').remove();
}); 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:30:28.137

这真的很难。这是我能想到的最佳解决方案。

**第一步：**从各种图像源下载您将遇到的所有 404 替换图像。将这些图像转换为 base64 字符串，并将这些字符串存储在 js 中的数组中。

**第二步：**使用虚拟画布标签将下载的图片转换为base64字符串：[How to convert image into base64 string using javascript](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)

**第三步：**遍历 404 图像 base64 数组，测试下载图像的 base64 字符串是否与数组中的任何一个匹配。如果它与 jQuery 的图像上的触发器“错误”匹配，则通过重用现有`.error`脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:09:09.573

您的问题有更简单的（与提供的相比）解决方案，但它需要一些服务器端代码（最后解释）。因此，JS 将如下所示：

```
$("img").each(function()
{
    // Check each target image and try to resolve its src
    $.ajax(
    {
        url: $(this)[0].src,
        type: "get",
        context: $(this),
        error: function()
        {
            // Delete on error (404)
            $(this).remove();
            console.log("ERR!");
        },
        success: function(data)
        {
            // It's OK!
            console.log("YEAH!");
        }
    });
}); 
```

因为不允许跨域请求，所以您需要编写简单的代理脚本，将图像内容传递到您的服务器。

例如：`yoursite.com/imageproxy?src=http://p.twimg.com/Axm3Vs-CQAEwfAj.jpg:large`返回`http://p.twimg.com/Axm3Vs-CQAEwfAj.jpg:large`带有原始标题的图像内容。

**更新：**

作为对@Fresheyeball 答案的评论的说明：

![颜色比较](../Images/6f11672a489400928790227ffde72d80.png)

**更新 2：**

另外，我认为您可以尝试使用[Brain.js](https://github.com/harthur/brain)来训练神经网络，这可以帮助您稍后与颜色进行比较。但...

也许为图像编写 4 字符串代理更容易（当然，如果有无限带宽）。

# visual-studio-2010 - 如何锁定文件以避免 Visual Studio 中的冲突

> ID：11459912
> 
> 赞同：2
> 
> 时间：2012-07-12T20:15:58.753
> 
> 标签：visual-studio-2010, visual-studio, version-control, merge

我们使用 Microsoft Visual Studio 2010，它允许我们同时签出和编辑同一个文件。

我们经常发现我们有冲突，合并工具很糟糕，插入这样令人困惑的东西`mine <<<<<<<<<`并不是很有帮助。

如果文件当前正在被其他人编辑，有没有办法让 VS2010 禁止编辑文件？如果有一个更好的合并工具，它可以让您以交互方式选择如何合并它，而不是仅仅将所有内容粘贴到文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:54:39.213

如果您使用 Subversion 作为您的源代码控制系统，请了解它适用于*编辑合并*主体，而不是 Visual SourceSafe 等工具使用的专有签出模型。这意味着每个人都可以同时编辑他们的工作副本，并且开发人员应该在他们定期更新他们的工作副本时解决差异。所以，按照你的要求去做有点违背 Subversion 的设计工作方式。

尽管如此，您可以通过“锁定”文件来相当接近 SourceSafe 签出概念。如果您使用的是 Ankh Plug In for Visual Studio，您可以在解决方案资源管理器中右键单击文件并选择“锁定”。

你还可以在一个名为“svn:needs-lock”的文件上设置一个属性，这意味着如果你得到一个文件的工作副本，它以只读方式交付，如果你想编辑它，你必须明确地锁定它。

**编辑**：为了快速了解 Subversion 锁定原理，您可以看看[这里。](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html)祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:22:03.320

您没有正确使用 Subversion。您会提到`mine <<<<<<`SVN 在冲突文件中使用的模式这一事实告诉我，您最好选择几个 Subversion 类，而不是试图弄清楚如何锁定文件。

# c# - 提交表单后在 ASP.net C# 中显示/隐藏面板

> ID：11459914
> 
> 赞同：1
> 
> 时间：2012-07-12T20:16:02.353
> 
> 标签：c#, asp.net, forms, panel

因此，在将我的 default.aspx 表单页面与 confirm.aspx 确认页面相结合的过程中，我必须在页面初始加载时创建面板并显示/隐藏它们。

该表格是一个评论/投诉表格，因此用户将提交他们的信息，并生成一封电子邮件并发送给网站管理员。

我有 4 个面板：面板 1 + 3 默认显示，并在脚本的早期设置为可见，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    Panel1.Visible = true;
    Panel2.Visible = false;
    Panel3.Visible = true;
    Panel4.Visible = false;
} 
```

基本上，一旦用户提交表单并且在论坛中没有发现错误，我希望面板 1+3 变为隐藏，并且 2 + 4 变为可见。

`try`我会在发送电子邮件时还是在函数之前运行脚本来更改函数的可见性`frmReset`？

另外，是否有我需要的特定功能可以在提交表单后切换面板可见性而没有发现错误？（除了将可见性更改为`true`或`false`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:26:30.387

根据您的意见，您将分两步解决您的要求。

1st，更新您的页面加载以避免在更改后恢复可见性：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack){
        Panel1.Visible = true;
        Panel2.Visible = false;
        Panel3.Visible = true;
        Panel4.Visible = false;
    }
} 
```

第二，您必须更改`try`方法的可见性：

```
protected void Try_Click(object sender, EventArgs e)
{
    Panel1.Visible = false;
    Panel2.Visible = true;
    Panel3.Visible = false;
    Panel4.Visible = true;   
} 
```

# json.net - MVC4 RC 如何将 JSON.NET 与 MVC 控制器一起使用

> ID：11459920
> 
> 赞同：1
> 
> 时间：2012-07-12T20:16:28.133
> 
> 标签：json.net

我正在使用 MVC4 RC，并且我读到 MVC4 使用 JSON.NET 作为默认的 JSON Serializer/DeSerializer。我没有使用 Web Api，只是使用默认的 MVC 控制器。当我打开 Application_Start 并浏览 ValueProvidersFactories 时，我仍然发现 JSONValueProviderFactory，它在内部使用 JavaScriptSerializer。

> ?ValueProviderFactories.Factories 计数 = 6
> 
> [0]：{System.Web.Mvc.ChildActionValueProviderFactory}
> 
> [1]：{System.Web.Mvc.FormValueProviderFactory}
> 
> [2]: {System.Web.Mvc.JsonValueProviderFactory} <--
> 
> [3]：{System.Web.Mvc.RouteDataValueProviderFactory}
> 
> [4]：{System.Web.Mvc.QueryStringValueProviderFactory}
> 
> [5]：{System.Web.Mvc.HttpFileCollectionValueProviderFactory}

所以要使用 JSON.NET，我是否还需要创建自己的 ValueProviderFactory （如此处所做[的](http://json.codeplex.com/discussions/347099)）或者我在整个画面中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:23:00.143

> 所以要使用 JSON.NET，我是否还需要创建自己的 ValueProviderFactory（如此处所做的）或者我在整个画面中遗漏了一些东西？

不，你没有错过任何东西。您调试并完全理解了整个画面。如果您想将 JSON.NET 与标准 ASP.NET MVC 控制器（而不是 Web API）一起使用，您必须推出自己的 Json 值提供程序工厂。

# twitter - IE 中未触发 Twitter 推文事件

> ID：11459922
> 
> 赞同：1
> 
> 时间：2012-07-12T20:16:31.600
> 
> 标签：twitter

我看不到关于推特事件的推特讨论有任何运气。我想很多人都在经历 twitter 中的 tweet 事件，但它没有在 IE 中被触发。请看下面的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html>
 <head>
 <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
 </head>
 <body>
<div>
  <a href="http://twitter.com/share" class="twitter-share-button"
     data-url="http://www.testsite.com"
     data-text="hello world @"
    data-count="none">Tweet</a>
</div>
<script type="text/javascript">
   twttr.ready(function (twttr) {
   twttr.events.bind('tweet', function(event) {
     alert("Post successful");    
   });
  });
</script>
</body> 
```

此脚本在 IE 以外的其他浏览器上运行良好。推特发帖成功。没有javascript错误。

任何人都知道如何进行这项工作？

# c# - Configuration.GetSection("basicHttpBinding") 未从 app.config 文件中读取该部分

> ID：11459926
> 
> 赞同：1
> 
> 时间：2012-07-12T20:16:57.413
> 
> 标签：c#, configurationmanager, basichttpbinding

我有以下财产：

```
protected BasicHttpBinding Binding
{
    get
    {
        var config = ConfigurationManager.GetSection("basicHttpBinding") as ServiceModelSectionGroup;
        foreach (ChannelEndpointElement bindings in config.Bindings.BasicHttpBinding.Bindings)
        {
            string binding = bindings.Binding;

            if (binding != null)
            {
                return new BasicHttpBinding(binding);
            }
        }
        return null;
    }
} 
```

当我调试它时，它失败并出现空异常：对象引用未设置为该行的对象实例：

```
foreach (ChannelEndpointElement bindings in config.Bindings.BasicHttpBinding.Bindings) 
```

但是，我注意到它上面的行也是空的。

这是 app.config 文件

```
<?xml version="1.0" encoding="utf-8" ?>
    <configuration>
        <system.serviceModel>
            <bindings>
                <basicHttpBinding>
                    <binding name="IntelexWSSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="Transport">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>

.....

            </basicHttpBinding>
        </bindings>
    ....
    </system.serviceModel>
</configuration> 
```

我不知道为什么它失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:41:27.433

试试这个：

```
var config = ConfigurationManager.GetSection("system.serviceModel/bindings") as   
                        System.ServiceModel.Configuration.BindingsSection; 
```

`<basicHttpBinding>`不是配置部分，它是配置部分中的一个元素`<bindings>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:26:21.287

看起来您正在获取“basicHttpBinding”部分，但随后尝试将其转换为`ServiceModelSectionGroup`引用“system.serviceModel”部分，因此它返回`null`。

试试`ConfigurationManager.GetSection("system.serviceModel")`吧。

# c++ - decltype 和 auto 等价

> ID：11459928
> 
> 赞同：1
> 
> 时间：2012-07-12T20:17:08.877
> 
> 标签：c++, type-inference, auto, decltype

由于 auto 和 decltype 都用于推断类型。我以为他们会是一样的。

然而，[这个](https://stackoverflow.com/q/6869888/811335)问题的答案却表明并非如此。

我仍然认为它们不能完全不同。我可以想到一个简单的例子，`i`在以下两种情况下，类型都是相同的。

```
auto i = 10; and decltype(10) i = 10; 
```

那么 auto 和 decltype 表现相同的可能情况是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:21:13.293

`auto`行为与模板参数推导*完全相同*，这意味着如果您不指定对它的引用，则不会得到。`decltype`只是表达式的类型，因此考虑了引用：

```
#include <type_traits>

int& get_i(){ static int i = 5; return i; }

int main(){
  auto i1 = get_i(); // copy
  decltype(get_i()) i2 = get_i(); // reference
  static_assert(std::is_same<decltype(i1), int>::value, "wut");
  static_assert(std::is_same<decltype(i2), int&>::value, "huh");
} 
```

[Ideone 上的实时示例。](http://ideone.com/c2PM9)

# objective-c - 计算给定月份的周数

> ID：11459932
> 
> 赞同：1
> 
> 时间：2012-07-12T20:17:22.277
> 
> 标签：objective-c, xcode, nscalendar, nsdatecomponents

我想计算给定月份的周数。例如，2012 年 7 月应该有第 26、27、28、29、30 和 31 周。我制作了这个片段，但我正在寻找一种可行的方法来获取前一周和后一周的数字。有任何想法吗。

谢谢，达雷尔。

```
//Get current week number
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents *components = [cal components:NSWeekCalendarUnit fromDate:[NSDate date]];
NSInteger week = [components week];
NSLog(@"Week nummer: %d", (int)week);

//Get week numbers in month
[components weekOfYear];
NSRange weeksInMonth = [cal rangeOfUnit:NSWeekCalendarUnit
                          inUnit:NSMonthCalendarUnit
                         forDate:[cal dateFromComponents:components]];
NSLog(@"Weken in maand: %lu", weeksInMonth.length); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:22:22.063

功能：

```
- (NSArray *)weeksOfMonth:(int)month inYear:(int)year
{
    NSCalendar *calendar = [NSCalendar currentCalendar];

    NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
    [components setMonth:month];
    [components setYear:year];

    NSRange range = [calendar rangeOfUnit:NSDayCalendarUnit
                                   inUnit:NSMonthCalendarUnit
                                  forDate:[calendar dateFromComponents:components]];

    calendar = [NSCalendar currentCalendar];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd"];
    NSMutableSet *weeks = [[NSMutableSet alloc] init ];

    for(int i = 0; i < range.length; i++)
    {      
        NSString *temp = [NSString stringWithFormat:@"%4d-%2d-%2d",year,month,range.location+i];
        NSDate *date = [dateFormatter dateFromString:temp ];
        int week = [[calendar components: NSWeekOfYearCalendarUnit fromDate:date] weekOfYear];
        [weeks addObject:[NSNumber numberWithInt:week]];
    }

    NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"" ascending:YES];
    NSArray *descriptors = [[NSArray alloc] initWithObjects:descriptor, nil];
    return [weeks sortedArrayUsingDescriptors:descriptors];
} 
```

用法：

```
NSArray *weeks = [self weeksOfMonth:7 inYear:2012];
NSLog(@"%@",weeks); 
```

输出：

```
{(
    27,
    28,
    29,
    30,
    31
)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:45:50.790

```
int year = 2012;
int month = 7;

NSCalendar *cal = [NSCalendar currentCalendar];
NSDate *date = nil;
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];

[components setYear:year];
[components setMonth:month];
date = [cal dateFromComponents:components];
NSLog(@"starting week # %d = %@", [[cal components:NSWeekCalendarUnit fromDate:date] week], date);

[components setMonth:month + 1];
[components setDay:-1];
date = [cal dateFromComponents:components];
NSLog(@"ending week # %d = %@", [[cal components:NSWeekCalendarUnit fromDate:date] week], date); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T19:58:58.503

安妮建议的解决方案对我有用，但输出不像她的输出那样排序。我需要转换为数组并排序如下：

```
// Sorting everything.
NSSortDescriptor *sorter = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:YES];
NSArray *weeks = [[self weeksOfMonth:7 inYear:2012]allObjects];
NSArray *sorters = [[NSArray alloc] initWithObjects:sorter, nil];
NSArray *sortedArray = [weeks sortedArrayUsingDescriptors:sorters];

for (NSNumber *element in sortedArray)
{
    NSLog(@"%i",element.intValue);
} 
```

这是合乎逻辑的步骤，是否有更性感的方式来做到这一点？

# ruby-on-rails - 运行 db:migrate 时的 Factory Girl 和延迟初始化

> ID：11459934
> 
> 赞同：3
> 
> 时间：2012-07-12T20:17:36.527
> 
> 标签：ruby-on-rails, rake, factory-bot

我有一个这样的工厂：

```
FactoryGirl.define do
  factory :member_data,
          :class => Member do
    first_name 'fn_member'
    last_name 'ln_member'
  end
end 
```

当我运行时`db:migrate`，FactoryGirl 在创建`Member`表之前被调用。而且我遇到了一些错误，例如“找不到属性”。我在网上搜索时发现有些东西必须是惰性初始化的，例如：

```
Factory.define :order do |f|
  ...
  f.code_id Code.first
end 
```

一定是：

```
Factory.define :order do |f|
  ...
  f.code_id { Code.first }
end 
```

事实上，如果我删除`:class => Member`迁移成功。但是我怎么能懒惰地定义工厂`:class`？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:43:16.597

`ActiveRecord`允许`:class_name => "ClassNameInQuotes"`在其关联中，FactoryGirl 也可以这样做。**只需将类名放在引号中即可。**

```
FactoryGirl.define do
  factory :member_data, :class => "Member" do
    first_name 'fn_member'
    last_name 'ln_member'
  end
end 
```

# ruby - 在应用程序启动之前，我可以让瘦不绑定到端口吗？

> ID：11459945
> 
> 赞同：1
> 
> 时间：2012-07-12T20:18:25.800
> 
> 标签：ruby, rack, thin

我希望在我的应用程序完成启动/加载到内存之前不绑定到端口。

有没有办法做到这一点？我可以探索任何可能的黑客攻击吗？

其他机架服务器的行为是否不同？

# string - 动态结构引用的参数必须评估为有效的字段名称

> ID：11459946
> 
> 赞同：4
> 
> 时间：2012-07-12T20:18:28.107
> 
> 标签：string, matlab, cell

我收到此错误“动态结构引用的参数必须评估为有效的字段名称。” 我有一个名为 spectData 的结构，它看起来像这样

```
spectData{1} = 

data: [256x26 double]
textdata: {1x26 cell}
colheaders: {1x26 cell}
Row: [256x1 double]
Col: [256x1 double]
Cho: [256x1 double]
Cho0x25SD: [256x1 double]
Cho0x2FCit: [256x1 double]
PCho: [256x1 double]
PCho0x25SD: [256x1 double] 
```

我尝试在函数调用中分配它，代码行看起来像这样。这是 matlab 说错误所在的代码行。

```
 SDdata = spectData{sliceNum - firstSlice}.(MetabMapSDString); 
```

其中 metabString 是名称之一的字符串，例如“PCho0x25SD”spectData 总共有 4 个子结构，就像我显示的这个一样。我究竟做错了什么？？这是双所以我想应该没问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T14:08:40.060

当您不小心传递了一个元胞数组而不是字符串时，Matlab 有时会给出这种误导性的错误消息。以下示例给出了相同的错误：

```
fields = {'foo', 'bar'}
s = struct('foo', 23, 'bar', pi)

for f = fields
  disp(f)
  s.(f) = 0
end 
```

如果这是您的问题（使用 eg 测试您的字段名称的实际类型`whos`），说 . 应该会有所帮助`f = char(f)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T18:33:45.677

字符串在 matlab 中表示为单元格。而文字字符串是 char 数组类型。它们的打印方式不同。单元格字符串打印为

```
ans =

    'abc' 
```

而常规的 char 数组打印为

```
ans = 
abc 
```

现在来看看两个内置函数的区别：`cellstr`将 char 数组转换为字符串，而`char`将单元格字符串转换为 char 数组。

因此，在您的情况下，您应该将`char(MetabMapSDString)`其用作动态结构参考。

# python - Python BeautifulSoup 解码 HTML 实体

> ID：11459953
> 
> 赞同：0
> 
> 时间：2012-07-12T20:18:53.217
> 
> 标签：python, html, beautifulsoup

```
file_txt = urllib.request.urlopen("ftp://ftp.sec.gov/edgar/data/1220985/0000930413-12-003922.txt")
file = file_txt.read().decode('cp1252')
soup = BeautifulSoup(file)
print(soup.prettify())
#UnicodeEncodeError: 'charmap' codec can't encode character '\x92' in position 11900: character maps to <undefined> 
```

我检查了txt文件。当它显示在浏览器中时，`\x92`实际上显示`&#146`为`'`. 我不确定为什么在使用与`cp1252`浏览器相同的编码方案 ( ) 对其进行解码后会出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:26:15.443

通常`BeautifulSoup`擅长检测网页使用的编码，如果它可用，它通过使用[chardet](http://pypi.python.org/pypi/chardet/1.0.1)库来做到这一点。所以我会建议你安装[chardet](http://pypi.python.org/pypi/chardet/1.0.1)包并让`BeautifulSoup`找出编码。

```
pip install chardet (or easy_install chardet) 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:43:51.410

Beautiful Soup 会读取文档，但是当您尝试将其打印到控制台时会出现错误。这通常表明您的控制台无法显示某个字符。[Python wiki 上的这个页面可能会有所帮助。](http://wiki.python.org/moin/PrintFails)

# php - 如何在 PHP 中覆盖 register_argc_argv？

> ID：11459959
> 
> 赞同：8
> 
> 时间：2012-07-12T20:19:17.413
> 
> 标签：php, argv, command-line-interface, argc, ini-set

我使用的是共享主机（fasthostingdirect），出于某种原因，他们默认关闭了这个标志。这意味着我无法访问 PHP 命令行参数...除非`-n`我`--no-php-info`在`php.exe`.

已在我的 php 文件中尝试过`ini_set('register_argc_argv', 1)`，但没有效果。我猜这是由于托管服务提供商的限制性质，但他们并没有停止这个`-n`选项 - 虽然不确定使用它的其他含义。有没有人有更好的建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-09-12T13:19:21.347

无需创建全新的ini文件，只需使用`-d`标志

```
php -d register_argc_argv=1 myscript.php 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T20:23:30.133

`ini_set('register_argc_argv', 1)`不起作用，因为在执行代码时，它们已经注册（或未注册）。

看来你可以`php`直接运行，所以复制你自己的`php.ini`文件并传递它：

```
php -c yourphp.ini 
```

# jquery - jquery val() 在第一个空格后截断结果

> ID：11459968
> 
> 赞同：1
> 
> 时间：2012-07-12T20:19:42.577
> 
> 标签：jquery

当我打电话时：

```
var status = $('#status').val(); 
```

并且该值设置为带有空格的值（在本例中为“请选择...”），状态变量返回“请”，在第一个空格之后切断所有内容。

经过进一步测试，我发现这似乎只发生在组合框上

这是标记：

```
<select name = "status" id="status" class="wide_field">
        <?php
            populate_list("statuses.txt");
        ?>
    </select> 
```

和PHP

```
 function populate_list($list_file)
            {
            echo "<option value=Please Select...>Please Select...</option>";
                $file = file($list_file,$file);
                for($i=0;$i<count($file);$i++)
                {
                    echo "<option value=".$file[$i].">".$file[$i]."</option>";
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:26:29.530

在你的价值观周围加上引号。

前任：`echo "<option value=\"Please Select...\">Please Select...</option>";`

# javascript - 带有子菜单的下拉菜单

> ID：11459974
> 
> 赞同：0
> 
> 时间：2012-07-12T20:19:56.683
> 
> 标签：javascript, html, drop-down-menu, menu

我在导航中插入另一个新子菜单时遇到问题。

这是我的 JavaScript 代码：

```
// Main Nav Javascript Function *****************************************
var navTimer = "";
bop = new Object();
bop.targetDiv = "";
bop.hide = function(){
document.getElementById(bop.targetDiv).style.visibility = "hidden";
}

function openNav(myDiv){
if(bop.targetDiv != "") bop.hide();
    bop.targetDiv = myDiv;
    clearTimeout(navTimer);
    document.getElementById(myDiv).style.visibility = "visible";
    document.getElementById(myDiv).onmouseout = function(){
        navTimer = setTimeout("bop.hide()", 100);
    }
    document.getElementById(myDiv).onmouseover = function(){
        clearTimeout(navTimer);
    }
}

function hideNav(myDiv){
    bop.targetDiv = myDiv;
    navTimer = setTimeout("bop.hide()", 150);
}

<!-- Display Sub Nav / Clear Sub Nav -->
function SubNav(myVar){
document.getElementById(myVar).style.visibility = "visible";
}

function clearNav(myVar){
document.getElementById(myVar).style.visibility = "hidden";
}

function shortPopUp( url, name, width, height, scrollbars ) { 
    var top  = "0"; 
    var left = "0"; 

    if( scrollbars == null ) scrollbars = "0"; 

    str  = ""; 
    str += "resizable=1,titlebar=1,menubar=1,"; 
    str += "toolbar=0,location=0,directories=0,status=0,"; 
    str += "scrollbars=1" + scrollbars + ","; 
    str += "width=" + width + ","; 
    str += "height=" + height + ","; 
    str += "top=" + top + ","; 
    str += "left=" + left; 

    window.open( url, name, str ); 
} 
```

这是我的 HTML 代码：

```
><div class="navItem" onMouseOver="SubNav('seat-twenty');" onMouseOut="clearNav('seat-twenty');"><a href="fps_twenty2.html" target="frame">Twenty2</a><div id='seat-twenty' class="dropDown" onMouseOver="SubNav('seat-twenty');" onMouseOut="clearNav('seat-twenty');">
<div class="navItem"><a href="fps_twenty2.html" target="frame">Twenty2 Overview</a></div>
<div class="navItem"><a href="fb_twenty2_black.html" target="frame">Twenty2</a></div>
<div class="navItem"><a href="fb_twenty2_red.html" target="frame">Twenty2-US</a></div>
<div class="navItem"><a href="fb_twenty2_red_black.html" target="frame">Twenty2-UP</a></div>
</div></div> 
```

服务器上的页面可以在[这里](http://www.calibredesign.com/clients/spec/index.html?view=intro_random_6.html)找到。

问题出在导航的座位选项卡下，当我尝试插入新标签“Twenty2”时，没有打开额外的子菜单，子菜单仍然停留在同一个下拉菜单中....然后我检查了代码并结束了，我的错误代码和正确的代码没有区别。

这是运行良好的代码：

```
> <div class="navItem" onMouseOver="SubNav('seat-heavy');"
> onMouseOut="clearNav('seat-heavy');"><a href="fps_heavy_duty.html"
> target="frame">Heavy Duty</a><div id='seat-heavy' class="dropDown"
> onMouseOver="SubNav('seat-heavy');"
> onMouseOut="clearNav('seat-heavy');"> 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:28:02.900

您的工作菜单项与它们有关联的样式表规则，例如

```
#seat-healthcare {
    background-color: #E7E7E7;
    position: absolute;
    margin-top: -18px;
    margin-left: 130px;
    z-index: 199;
    width: 119px;
    padding-top: 3px;
    padding-bottom: 4px;
} 
```

但是你没有 for `#seat-twenty`，所以当它弹出时它会立即消失，因为它认为你已经滚动出去了，因为它没有设置 margin-left 。

总而言之，菜单以一种愚蠢的方式工作，我真的建议您使用更通用的东西，这样您就不必为每个项目都有一个样式表条目。

插入样式表样式表的相关 JS

```
// Browser & Platform Detection & Style Sheet Documentation *******************
if(navigator.userAgent.indexOf("Safari")!=-1){
    document.write("<link href='styles/MacSafari_style.css' rel='stylesheet' type='text/css'>");

}
if(navigator.userAgent.indexOf("Firefox")!=-1){
    if(navigator.appVersion.indexOf("Mac")!=-1){
    // Added Fix for High Rez Screens
    if((screen.width >= 1400) && (screen.height >= 1050)){
        document.write("<link href='styles/HighRez_MacMozilla_style.css' rel='stylesheet' type='text/css'>");
    } else {
        document.write("<link href='styles/MacMozilla_style.css' rel='stylesheet' type='text/css'>");
    }
} else {
    document.write("<link href='styles/Mozilla_style.css' rel='stylesheet' type='text/css'>");
    }
}
if(navigator.appName == "Microsoft Internet Explorer"){
    if(navigator.appVersion.indexOf("Mac")!=-1){ 
        document.write("<link href='styles/MacIE_style.css' rel='stylesheet' type='text/css'>");
    } else {
    document.write("<link href='styles/IE_style.css' rel='stylesheet' type='text/css'>");
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:43:00.227

你那里有太多的div。检查其他工作子导航菜单之一。它只是一个带有链接的单个 div。

例如，下面是表格菜单中的一个片段：

会议

我也同意另一张海报；查看如何制作 CSS 菜单。特别是[http://www.htmldog.com/articles/suckerfish/dropdowns/](http://www.htmldog.com/articles/suckerfish/dropdowns/)是一篇很棒的文章，只要你不需要 IE6 支持，你就不需要使用 Javascript。

# java - Java设计，如何避免将对象向下传递？！？不可能的？

> ID：11459975
> 
> 赞同：3
> 
> 时间：2012-07-12T20:20:04.543
> 
> 标签：java, oop, generics

我有很多课程，请允许我介绍它们，然后在最后问我的问题：

我有一个容器类，其中包含复合关系中的两个对象：

```
public class Container{

    A a;
    B b;

    public someMethod(){
        a.getC().myMethod(b);
    }
} 
```

A 和 B 是超类（或接口），其子类型也可以是复合关系中的类型。

A 包含（接口）类型 C 的成员：

```
public class A{
   C c;
}

public interface C{
    public void myMethod(B b);
}

public class D implements C{
    public void myMethod(B b){
        //This code will modify the state of object b, in class Container.
        b.changeState();
    }
}

public class E implements C{
    public void myMethod(B b){
        //This code will modify the state of object b, in class Container.
        b.changeState();
    }
} 
```

我的问题是我希望将对象 b 的状态从容器类中开始的方法修改为类 D 和 E——通过动态绑定调用 myMethod()，该方法最终调用层次结构中的代码。我想这样做是因为我将使用多态性来运行正确的`myMethod()`（取决于对象的类型是 D 还是 E）并且我希望这样做，而不是编写 IF 语句。

所以我的问题是，将对象 b 的实例沿类层次结构向下传递给 myMethod 似乎非常糟糕，这样我就可以运行特定于 b 的代码来修改 b 的状态。我还能做些什么来从 d 和 e （统称为 c）修改 b 吗？

我可以只使用接口而不使用泛型来让它工作——但是当我添加泛型时，我遇到了类型问题，这让我开始思考我的整个设计是否有缺陷？

编辑：我可以通过使用 IF 语句轻松地做到这一点 - 但我想要一个使用 D 和 E 类的多态性的优雅解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:35:33.543

首先，如果我正确理解了您的问题，那么`B`您的代码中没有任何实例被“传递”。动态调度将简单地导致`myMethod()`实际类型的实现被作为参数`a`的实例调用。`B`

虽然每次实现时都必须显式地编写参数可能很乏味，`myMethod()`但这并没有错。

另一种方法是给每个子类/实现`A`type 的属性`B`。但是，在这种情况下，您必须将`B`实例沿着构造函数链传递给实际具有您的`B`属性的类。

您的代码将变为：

```
public class A{
  C c;

  public A(C c) {
    this.c = c;
}

public interface C{
    public void myMethod(B b);
}

public abstract class CC {
  protected B b;

public CC(B b) {
  this.b = b;

public class D extends CC implements C {
    public D(B b) {
      super(b);
    }
    public void myMethod(){
        b.changeState();
    }
}

public class E extends CC implements C {
    public E(B b) {
      super(b);
    }
    public void myMethod(){
        b.changeState();
    }
} 
```

然后在某个地方，例如在`Container`的构造函数中：

```
b = new B();
a = new A(new E(b)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:30:58.580

您可以将 B 的实例传递给 E 的构造函数（或使用 setter）。这本身就带来了问题，但至少它避免了每次调用 myMethod() 时都必须向下传递 B，而现在不需要参数。

例如

B里面的某个地方

```
E myE = new E(this); 
```

并且，在 E 内

```
final B myB;
public E(B myHigherLevelThing) {
  this.myB = myHigherLevelThing;
}

public void myMethod() {
  myB.changeState();
} 
```

使用最通用的声明界面，我对你的完整层次结构有点困惑，所以那里可能有改进的空间......

# ios - 为什么需要在图像格式之间进行如此多的转换？（UIImage、CGImage、CIImage）

> ID：11459977
> 
> 赞同：5
> 
> 时间：2012-07-12T20:20:18.467
> 
> 标签：ios, uikit, core-image

我很困惑为什么在 iOS 中需要在图像格式之间进行如此多的转换。例如，如果我将 jpg 加载到 UIImage 中，然后想对其进行人脸检测，我需要创建一个 CIImage 以传递给 CIDetector。这不代表内存和性能都受到打击吗？

这是Core Graphics，Core Image和UIKit（可能还有openGL ES，但我不使用它）之间的一些遗留问题吗？整体命中是微不足道的吗？

我会做我需要做的，但我想更多地了解这是需要的。此外，我有时在进行转换时遇到问题，并且纠结于格式之间的差异。

* * *

**更新**

好的 - 所以我对这些格式的困惑（或这些格式的困惑......）再次感到困惑。浪费了半个小时。这是我正在做的事情：

在本地图像中测试人脸，我创建了所需的 CIImage：

```
CIImage *ciImage = [image CIImage]; 
```

并且无论我传入什么方向，都没有恢复任何功能。我*知道*这个特定的图像与`CIDetectorTypeFace`以前的图像一起使用，*并且*`CIImage`我在格式上遇到了问题。尝试像这样创建 CCImage：

```
 CIImage *ciImage = [CIImage imageWithCGImage:image.CGImage]; 
```

和人脸检测工作正常。啊！我确保`[image CIImage]`生成的 CIImage 不为零。所以我很困惑。第一种方法只是获取一个指针，而第二种方法创建一个新的 CIImage。这有什么区别吗？

深入研究 UIImage.h 文件，我看到以下内容：

```
// returns underlying CGImageRef or nil if CIImage based
@property(nonatomic,readonly) CGImageRef  CGImage; 

// returns underlying CIImage or nil if CGImageRef based
@property(nonatomic,readonly) CIImage     *CIImage; 
```

所以我想这是关键 -**开发人员当心**：测试为零......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:26:43.677

原因在于观念。所有 UIKit、CoreGraphics 和 CoreImage 都做了三个根本不同的事情，以至于不可能有一个“大中央统一的图像格式”。此外，这些框架配合得很好；也就是说，转换应该尽可能优化和尽可能快，但当然图像处理始终是计算量相对较大的操作。

# python - 从烧瓶应用程序向 mongodb 记录添加标签

> ID：11459984
> 
> 赞同：0
> 
> 时间：2012-07-12T20:21:04.650
> 
> 标签：python, mongodb, post, flask, pymongo

我正在使用 Flask 和 PyMongo 开发一个爱好应用程序，以在浏览器中呈现 mongodb 记录。

这是一个维基百科编辑数据库，记录如下所示：

```
{
    "_id" : ObjectId("4ff1c0d0dec94126a2000000"),
    "image" : "http://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Us_declaration_independence_signatures.jpg/350px-Us_declaration_independence_signatures.jpg",
    "unvandalism" : "<div>:<span class=\"diffchange diffchange-inline\">53</span>.  [[Arthur Middleton]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">54</span>.  [[Button Gwinnett]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">55</span>.  [[Lyman Hall]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">56</span>.  [[George Walton]]</div>",
    "delta" : 0,
    "date" : ISODate("2012-07-02T00:44:57.781Z"),
    "offender" : "24.119.187.78",
    "reverter" : "Chillin411",
    "anon" : true,
    "vandalism" : "<div>:<span class=\"diffchange diffchange-inline\">54</span>.  [[Arthur Middleton]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">55</span>.  [[Button Gwinnett]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">56</span>.  [[Lyman Hall]]</div>], [<div>:<span class=\"diffchange diffchange-inline\">57</span>.  [[George Walton]]</div>",
    "time" : 1341189897781,
    "diff_url" : "http://en.wikipedia.org/w/index.php?diff=500257674&oldid=498121414",
    "date_str" : "Mon, 02 Jul 2012 00:44:57 GMT",
    "page" : "Signing of the United States Declaration of Independence"
} 
```

我希望能够有一个与记录关联的文本字段，允许用户向该记录添加标签。所以我知道这应该是使用模板中的某种形式的更新/更新 POST 操作。但是我一直停留在实现这一点的基本方法上，即获取每条记录的上下文并说“在此处获取此记录并在用户提交标签并单击提交的地方更新它的标签”。我想多了。

鉴于现有设置，实现此功能的最实用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:18:33.713

不确定您是在寻找[pymongo help](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.update)、[MongoDB help](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pushAll)还是[Flask help](http://flask.pocoo.org/docs/api/#flask.Request.form)。

也许这个代码片段会帮助你......

```
from flask import request

tags = request.form.get('tags', []) # Where tags is a list of new tags

mongo_collection.update(
    {'_id': ObjectId('4ff1c0d0dec94126a2000000')},
    {'$pushAll': {'tags': tags}},
    ) 
```

# python - BeautifulSoup 在两种环境中的工作方式不同

> ID：11459990
> 
> 赞同：1
> 
> 时间：2012-07-12T20:21:20.923
> 
> 标签：python, beautifulsoup

我在使用 Python 和 BeautifulSoup4 时遇到了一个有趣的问题。我的方法通过给定的餐厅（字典键）获取当地学生餐厅当天的菜单，然后显示这些菜单。

```
def fetchFood(restaurant):
  # Restaurant id's
  restaurants = {'assari': 'restaurant_aghtdXJraW5hdHIaCxISX1Jlc3RhdXJhbnRNb2RlbFYzGMG4Agw', 'delica': 'restaurant_aghtdXJraW5hdHIaCxISX1Jlc3RhdXJhbnRNb2RlbFYzGPnPAgw', 'ict': 'restaurant_aghtdXJraW5hdHIaCxISX1Jlc3RhdXJhbnRNb2RlbFYzGPnMAww', 'mikro': 'restaurant_aghtdXJraW5hdHIaCxISX1Jlc3RhdXJhbnRNb2RlbFYzGOqBAgw', 'tottisalmi': 'restaurant_aghtdXJraW5hdHIaCxISX1Jlc3RhdXJhbnRNb2RlbFYzGMK7AQw'}

if restaurants.has_key(restaurant.lower()):
  soup = BeautifulSoup(urllib.urlopen("http://murkinat.appspot.com"))
  meal_div = soupie.find(id="%s" % restaurants[restaurant.lower()]).find_all("td", "mealName hyphenate")
  mealstring = "%s: " % restaurant
  for meal in meal_div:
    mealstring += "%s / " % meal.string.strip()
  mealstring = "%s @ %s" % (mealstring[:-3], "http://murkinat.appspot.com")
return mealstring

else:
  return "Restaurant not found" 
```

它将成为我的 IRCBot 的一部分，但目前它只能在我的测试机器上运行（Ubuntu 12.04 和 Python 2.7.3），但在另一台运行机器人的机器上（Xubuntu 和 Python 2.6.5）它失败了。

线后

```
soup = BeautifulSoup(urllib.urlopen("http://murkinat.appspot.com"))

>>> type(soup)
<class 'bs4.BeautifulSoup'> 
```

我可以打印它，它显示了所有应有的内容，但它可以找到任何东西。如果我这样做：

```
>>> print soup.find(True)
None

>>> soup.get_text()
u'?xml version="1.0" encoding="utf-8" ?' 
```

它停止读取第一行，尽管在另一台机器上，它完美地读取了所有内容。

输出应该是这样的（在这个日期来自带有餐厅参数“Tottisalmi”的工作机器）：

```
 Tottisalmi: Sveitsinleike, kermaperunat / Jauheliha-perunamusaka / Uuniperuna, kylmäsavulohitäytettä / Kermainen herkkusienikastike @ http://murkinat.appspot.com 
```

I'm completely clueless with this. I have many similar kind of BeautifulSoup parsing methods that work just fine on the bot (it parses titles of urls and Wikipedia stuff) but this one keeps bugging me.

Does anyone have any idea? I can only come up with it having something to do with my Python version which sounds odd since in everywhere else BeautifulSoup4 works fine.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:38:04.740

I believe you have [different parsers installed on the two machines](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#other-parser-problems). The html5lib parser fails on the given markup, giving the bad behavior. The lxml and html.parser parsers parse the markup correctly and don't give the bad behavior.

When writing code that will be run on multiple machines, it's best to explicitly state which parser you want to use:

```
BeautifulSoup(data, "lxml") 
```

This way you'll get an error if the appropriate parser isn't installed.

# gwt - 是否可以始终在 MGWT ScrollPanel 中显示滚动条？

> ID：11459991
> 
> 赞同：2
> 
> 时间：2012-07-12T20:21:27.517
> 
> 标签：gwt, mgwt

我项目中的一些利益相关者表示怀疑是否可以轻松识别隐藏的垂直内容以在 MGWT [ScrollPanel](http://docs.mgwt.googlecode.com/git/javadoc/latest/index.html?com/googlecode/mgwt/ui/client/widget/ScrollPanel.html)中滚动（无需滑动）。作为解决这个问题的尝试，我想始终显示漂亮的半透明垂直滚动条，作为更多内容滚动到的提示，以及显示数量与面板中所有内容之间的比率的指示。

是否可以永久显示面板的滚动条？起初我认为这`setShowScrollBarY(boolean)`可以解决问题，但很快证明自己错了。

PS：现在不应该有`m-gwt`StackOverflow 标签吗？AFAIKT MGWT 已经获得了足够的吸引力，可以拥有一个 MGWT 特定的问题流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:43:02.103

我与客户有同样的问题，他们建议显示滚动条是个好主意。如果你把你的内容剪掉了，用户很容易看到有更多的内容..

无论如何，我只是在后备箱中添加了一个 setHideScrollBar(boolean)。从（[https://oss.sonatype.org/service/local/artifact/maven/redirect?r=snapshots&g=com.googlecode.mgwt&a=mgwt&e=jar&v=LATEST](https://oss.sonatype.org/service/local/artifact/maven/redirect?r=snapshots&g=com.googlecode.mgwt&a=mgwt&e=jar&v=LATEST)）下载并试一试。也许我们还应该考虑一个选项，让滚动条闪烁一次以指示有更多内容。

顺便说一句，我会像使用邮件列表一样支持 mgwt 特定标签：[https ://groups.google.com/group/mgwt](https://groups.google.com/group/mgwt)

# php - PHP - 使用类来获取用户信息

> ID：11459993
> 
> 赞同：1
> 
> 时间：2012-07-12T20:21:32.523
> 
> 标签：php, class, fetch

假设与数据库的连接以及对表和单元格的所有引用都是正确的......我怎样才能得到这样的工作？

```
class User  
{  

    private $_display;  
    private $_email;  

    public function __construct($username)  
    {  

        $fetch_user = mysql_query("SELECT * FROM `registered_users` WHERE `user_name`='$username'");
        $fetch_user = mysql_fetch_array($fetch_user);

        $this->_display = $fetch_user['user_display'];  
        $this->_email = $fetch_user['user_email'];  
    }  

} 
$person1 = new User('username'); 
echo "Information: " . print_r($person1, TRUE); 
```

问题是它什么也不返回。调试时不会抛出错误或任何东西。这是可行的方法吗？:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:22:11.780

这*大致*是我会做的：

```
<?php

  class User{

    private $username;
    private $data;

    public function __construct($username){
      $this->username = $username;
      if($this->valid_username()){
        $this->load();
      }
    }

    private function load(){
      // Let's pretend you have a global $db object.
      global $db;
      $this->data = $db->query('SELECT * FROM registered_users WHERE user_name=:username', array(':username'=>$this->username))->execute()->fetchAll();
    }

    public function save(){
      // Save $this->data here.
    }

    /**
     * PHP Magic Getter
     */
    public function __get($var){
      return $this->data[$var];
    }

    /**
     * PHP Magic Setter
     */
    public function __set($var, $val){
      $this->data[$var] = $val;
    }

    private function valid_username(){
      //check $this->username for validness.
    }  

    // This lets you use the object as a string.
    public function __toString(){
      return $this->data['user_name'];
    }

  } 
```

如何使用：

```
<?php

  $user = new User('donutdan');
  echo $user->name; //will echo 'dan'
  $user->name = 'bob';
  $user->save(); // will save 'bob' to the database 
```

# ios - 如何在 UILabel 中检测并使超链接/提及/主题标签可点击？

> ID：11459997
> 
> 赞同：1
> 
> 时间：2012-07-12T20:21:40.957
> 
> 标签：ios, uikit, uilabel

如何在 UILabel 中检测并使链接/提及/主题标签可点击。或者，是否有任何我可以使用的开源库（我已经看过不处理多行 tex 的 Fancy UILabel，不处理提及/标签的 TTAttributedLabel）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:26:09.170

在当前的 iOS 中，没有办法使用 UILabel 这样做......

*TTTAttributedLabel*将让您设置标签样式，但是对于可点击（或者更确切地说 - 可点击）链接，您应该使用 UIWebView 并将其设置为将其伪装成标签，或者，您可能会变得怪异并拆分您的标记并在混合中使用 UIButton，但这非常混乱 - 就像一个谜题，只是......它们不适合在一起。

您可能拥有的最后一个选项是在链接上覆盖 UIButton，但这要求您知道链接在哪里，因为问题是关于**检测**链接等...

你真的应该看看 UIWebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T12:58:12.060

您可以使用以下库来实现此目的：

[https://github.com/SebastienThiebaud/STTweetLabel](https://github.com/SebastienThiebaud/STTweetLabel)

# php - 使用 number_format 添加千位分隔符

> ID：11459998
> 
> 赞同：7
> 
> 时间：2012-07-12T20:21:47.697
> 
> 标签：php, number-formatting

我试图非常简单地获取变量 $output 中的数字并将其转换为带有千位分隔符的数字。它当前输出的数字是 49995，但我希望它显示为 49,995。

遇到一些麻烦。帮助？

```
function twitter_followers($user = 'mytwitterusername'){
    // Build Twitter api url
    $apiurl = "http://api.twitter.com/1/users/show.json?screen_name={$user}";

    //cache request
    $transient_key = $user . "_twitter_followers";

    // If cached (transient) data are used, output an HTML
    // comment indicating such
    $cached = get_transient( $transient_key );

    if ( false !== $cached ) {
        return $cached;
    }

    // Request the API data, using the constructed URL
    $remote = wp_remote_get( esc_url( $apiurl ) );

    // If the API data request results in an error, return
    // an appropriate comment
    if ( is_wp_error( $remote ) ) {
        return '<p>Twitter unaviable</p>';
    }

    // If the API returns a server error in response, output
    // an error message indicating the server response.
    if ( '200' != $remote['response']['code'] ) {
        return '<p>Twitter responded with an HTTP status code of '. esc_html( $remote['response']['code']) . '</p>';
    }

    // If the API returns a valid response, the data will be
    // json-encoded; so decode it.
    $data = json_decode( $remote['body'] );

    $output = $data->followers_count;
    $followers = number_format($output,2,'.',',');

    set_transient( $transient_key, $output, 600 );

    return $followers;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T20:28:48.150

我已经测试了以下代码并且它可以工作：

```
$output = 49995;
$followers = number_format( $output , 0 , '.' , ',' );
echo $followers; 
```

不知道为什么您的代码不起作用。还要确保将第二个参数设置为 0，除非您需要小数点。也许 $output 的值最初是一个字符串，您需要将其转换为整数，然后再将其放入 number_format()？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:27:01.713

您的 number_format 似乎是正确的。试一试

```
$output = intval($data->followers_count); 
```

在调用它之前，解码值后可能存在问题。