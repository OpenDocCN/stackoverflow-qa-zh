# StackOverflow 问答 11341000-11341999

# emacs - Emacs Lisp，如何映射宏并评估其中一个参数

> ID：11341000
> 
> 赞同：5
> 
> 时间：2012-07-05T08:59:17.213
> 
> 标签：emacs, elisp, advising-functions, defadvice

Bob Glickstein 在“编写 GNU Emacs 扩展”第 3 章中描述了一种建议滚动功能的方法。（他建议让它们可逆，所以我们必须在滚动之前保存状态。）

例如，对于向上滚动命令，此建议是这样完成的

```
(defadvice scroll-up-command (before reversibilate activate compile)
   "If it wants to be reversible, it must save the former state."
   (save-before-scroll)) 
```

好。我当然必须对所有滚动命令执行此操作。所以我想对它们进行排序，并想一起为它们提供建议。

```
(setq reversible-scroll-commands 
  [scroll-up-command 
   scroll-down-command 
   scroll-left-command 
   scroll-right-command]) 
```

（我使用一个向量来保存 5 个引号。）

但现在我被困住了。

```
(mapcar 
  (lambda (fun-name)
    (defadvice fun-name (before reversibilate activate compile)
       "If it wants to be reversible, it must save the former state."
       (save-before-scroll)))
   reversible-scroll-commands) 
```

将建议（不存在的）函数 fun-name 四次，因为 defadvice 是一个宏，并且不评估 fun-name。

有什么办法吗？

（我正在使用 Emacs 24）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:03:32.997

未经测试：

```
(mapcar 
  (lambda (fun-name)
    (eval `(defadvice ,fun-name (before reversibilate activate compile)
             "If it wants to be reversible, it must save the former state."
             (save-before-scroll))))
   reversible-scroll-commands) 
```

请参阅elisp 手册中[关于反引号的部分。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Backquote.html)

# segmentation-fault - Vala/GTK+ 3：从 GtkIconView 获取数据

> ID：11341002
> 
> 赞同：0
> 
> 时间：2012-07-05T08:59:24.020
> 
> 标签：segmentation-fault, vala, gtk3, gnome-3

在我的应用程序中，我有一个具有单选模式的 GtkIconView。我想获取所选项目的文本（并进一步采取行动）。现在，我有一些我可以使用的代码，但是 GtkTreePath 的实际获取会使程序崩溃（段错误）。

```
Program received signal SIGSEGV, Segmentation fault.
0x0804d350 in minkovsky_ufilter_ufilter_window_on_filter_selected (
    e=0x8172010, self=0x8354d80)
    at /home/filip/ufilter/src/UfilterWindow.vala:281
281               TreePath item = filterchooser.get_selected_items().data; 
```

你能告诉我为什么会发生（以及如何解决它）吗？

谢谢。

编辑：我做了更多的测试，但仍然没有定论。也就是说，我想检查是否`get_selected_items()`返回 null （导致问题），但它只是在新的地方再次出现了段错误。这是代码：

```
 [CCode (instance_pos = -1)]
    public void on_filter_selected (Event e) {

        if(filterchooser.get_selected_items() == null){ // <-- Now happens here
            stderr.printf("Null!");
            return;
        }

        TreePath item = filterchooser.get_selected_items().data; // <-- Used to happen here
        TreeIter iter;
        string selection;
        filterchooser_liststore.get_iter(out iter, item);
        filterchooser_liststore.get(iter, 0, out selection);
        stderr.printf("Selected filter: %s\n", selection);
    } 
```

编辑 2：这是[精简版](http://ubuntuone.com/09DS4MOiQ7JNEAdnMnN6Ac)。它包含：两个源文件、一个glade 文件和示例图像，以及一个带有编译命令的自述文件。您将需要 Valac v0.16、GTK+ 3.0 和 GModule 2.0（我本可以进一步精简它，但它只是忽略了一点：生产代码中需要这些）。仍然是段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:46:12.463

问题是您的 on_filter_selected 签名与其连接的信号不匹配（[GtkIconView::item-activated](http://developer.gnome.org/gtk3/stable/GtkIconView.html#GtkIconView-item-activated)，如果您更喜欢 Valadoc，则为 Gtk.IconView.item_activated ）[。](http://valadoc.org/gtk+-3.0/Gtk.IconView.item_activated.html)你有

```
public void on_filter_selected (Event e) ... 
```

但它应该是这样的

```
public void on_filter_selected (Gtk.IconView view, Gtk.TreePath path) {
  Gtk.TreeIter iter;
  string selection;

  GLib.return_if_fail (filterchooser_liststore.get_iter (out iter, path));
  filterchooser_liststore.get (iter, 1, out selection);
  GLib.stderr.printf ("Selected filter: %s\n", selection);
} 
```

# matlab - 稀疏矩阵的线性代数库

> ID：11341004
> 
> 赞同：10
> 
> 时间：2012-07-05T08:59:31.617
> 
> 标签：matlab, linear-algebra, sparse-matrix, blas, armadillo

我有兴趣将我的 Matlab 实现移植到 C++ 以提高速度。我试过犰狳。它非常适合从 Matlab 移植代码，因为 Armadillo 的库函数名称/语法非常接近于 Matlab 编程。但是我意识到，在某些地方，Matlab 的表现不如犰狳，因为我的数据主要是稀疏的，而犰狳没有给它任何特殊处理，只是将其视为密集矩阵。Armadillo 团队正在研究稀疏矩阵支持，但目前不可用。所以我正在寻找一个像犰狳这样的库，它的语法非常接近 Matlab（或易于使用），并支持稀疏矩阵以实现速度和空间优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:33:31.830

版本 3.6.2 支持更多稀疏矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:25:02.543

不确定您要做什么，但请尝试[SPAMS](http://spams-devel.gforge.inria.fr/)。这是一个良好且快速的稀疏建模实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T08:17:39.000

从 3.4 版开始，[Armadillo](http://arma.sourceforge.net)初步支持稀疏矩阵。这可能会在未来的版本中变得更加完整。

# java - 哪个方法签名是好的，为什么？

> ID：11341006
> 
> 赞同：0
> 
> 时间：2012-07-05T08:59:40.677
> 
> 标签：java

给定一个 IP 地址范围（abcd - abce），我想要一种方法来返回该范围之间的数组列表中的 IP 地址。

选项1 ：

```
public static int getIPAddressesFromRange(String rangeStr, List list ) ; 
```

返回值是`count` ，输入列表将填充范围具有的 IP 列表

选项 2：

```
public static List getIPAddressesFromRange(String rangeStr) 
```

返回值是IP地址列表'

我的选项是 2，但那是直觉，虽然不能支持我的论点。

编辑：选项1是否违反任何设计原则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:02:58.473

我会说

```
public static List<String> getIPAddressesFromRange(String rangeStr) 
```

如果您决定将 IP 地址表示为字符串。

反对＃1的论点：

*   调用者需要提前构造列表
*   除非您记录它，否则返回值是什么并不直截了当
*   该方法改变了它的一个参数，这通常不是被禁止的，但最好避免让你的 API 用户感到惊讶（特别是如果他们倾向于不阅读文档）
*   意外为列表参数传入`null`值将导致 NullPointerException。
*   如果您真的关心它，您总是可以从列表本身获取列表的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:04:27.667

为什么要在第一种方法中返回计数？您可以从 List 本身获取 IP 的数量。

第二种方法应该是首选

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T09:02:35.653

比选项 1 更喜欢选项 2。

该列表无论如何都包含其计数，因此无需返回两个值（计数和列表）。

此外，由于您知道列表的类型，因此可以使用泛型`List<String>`：

最后，您还可以考虑采用两个参数：范围的开头和结尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T09:08:17.040

您的第二个选项是最好的，因为第一个选项有两个问题：

1.  这是多余的。如果 a`List`返回，您可以使用它的`size()`方法来获取该计数，因此通过返回该计数您将一无所获。
2.  该列表必须经过验证，在某些情况下，该方法完全无法执行其工作。`NullPointerException`如果调用者传递 null，如果代码编写不仔细，就有被抛出的危险。同样在这种情况下，调用者不会观察到重新分配参数以指向新列表，因此您唯一的远程理智选择是抛出一个明确的异常。使用第二个选项，您可以完全控制列表，直到它返回给调用者。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T09:04:17.353

我认为第二个更好：

*   计数是列表的大小
*   您不必为函数提供列表
*   减少空指针异常风险

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T09:02:45.367

选项二可能更好，因为任何读者都清楚返回的方法是什么。
方法 1 可能会导致未来的编码人员花时间思考这个参数是什么（除非它被正确记录），而方法 2 非常简单。

如果您以后需要在检索到的列表上进行迭代，选项二也使它更整洁，不需要临时变量：

```
for (Object o : getIPAddressesFromRange(String rangeStr)) { ... } 
```

您还应该更喜欢使用[泛型类型](http://docs.oracle.com/javase/tutorial/java/generics/types.html) `List<>`而不是原始类型。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-05T09:03:26.370

塞进去，塞出来。这就是您的选项 2 所做的。

选项 1 改变其输入参数并返回冗余值（计数，可以从列表中获取）。

另一件事是，也许某个 IP 地址范围可以用其他类型而不是字符串来更好地描述。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-05T09:03:54.343

IMO方法签名表明它将返回范围内的IP地址列表，而不是该范围内有多少地址，因此我也支持选项2。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-05T09:03:18.963

你的直觉也是我的，最好让 getIPAddressesFromRange 使用其首选的 List 实现，避免有人给你一个已经填充的列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-05T09:03:30.187

我的观点是，第二种方法签名通常是最好的，因为第一种方法会将您的列表对象暴露给并发修改。因此，在您的方法结束时，它可能包含比预期更少、更多的其他对象。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-05T09:08:00.987

这取决于您是要填充预先创建的列表还是创建新列表。

例如：您可以使用同一个 List 对象多次调用您的函数以节省一些内存。

或者：要比较多个列表，您可能希望为每个调用返回一个新列表。

我会选择选项 2。

# javascript - 弱类型语言类型转换的意义在哪里，为什么用。例如 JavaScript

> ID：11341026
> 
> 赞同：-3
> 
> 时间：2012-07-05T09:01:00.000
> 
> 标签：javascript

弱类型语言不需要类型转换，可以直接使用，何必类型转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:08:28.647

如果您的问题是我[认为](https://stackoverflow.com/questions/11341026/weakly-typed-language-type-conversion-of-meaning-where-why-use-for-example-jav#comment14933411_11341026)的，[这篇文章](http://jibbering.com/faq/notes/type-conversion/)可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:42:27.357

Javascript 是弱类型的。

这意味着变量没有固定的类型。

但这并不意味着没有类型的值：javascript 中的值都有一个类型，可能是数字、字符串、对象（包括函数）等（请参阅[此处](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)的完整类型列表）。

因此，当您想要对特定值类型进行不自然的操作（例如将字符串解释为布尔值）时，需要进行转换。

# c++ - 是否可以在 C++ 中将指向类成员的指针作为单个参数传递？

> ID：11341028
> 
> 赞同：2
> 
> 时间：2012-07-05T09:01:01.787
> 
> 标签：c++, class, pointers, function-pointers

这里很好地描述了如何通过指针调用成员函数：http: [//www.newty.de/fpt/functor.html](http://www.newty.de/fpt/functor.html)

但是函子需要获得 2 个参数：指向对象的指针和指向成员函数的指针：

```
TSpecificFunctor(TClass* _pt2Object, void(TClass::*_fpt)(const char*))
{ pt2Object = _pt2Object;  fpt=_fpt; } 
```

称呼：

```
(*pt2Object.*fpt)(string); 
```

是否可以像 C 风格一样传递单个参数：

```
func() -- call
func -- function pointer 
```

为什么**obj.method**不是完整的指向类成员的指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T09:11:32.000

该语法`object.*ptmf`不会创建中间对象。它没有任何意义，被语言所禁止。您*必须*立即调用访问成员函数指针的结果。

您可以使用 显式创建这样的对象`std::bind`，它将 ptmf 解释为仿函数对象，并使隐式`this`参数显式。

```
auto fn = std::bind( ptmf, object, std::placeholders::_1 );
std::function< void( const char * ) > stdfn = fn;
fn( "foo" ); // equivalent to object.*ptmf( "foo" ); 
```

[http://ideone.com/ds24F](http://ideone.com/ds24F)

请注意，此功能是 C++11 中的新功能。尽管 C++03 TR1 有`function`and `bind`，但它们不会在 ptmf 上执行此转换。（普通的 C++03 可以使用 and 来完成这项工作`std::mem_fn`，`std::bind1st`但它们使用起来非常痛苦并且已被弃用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:05:06.670

> 是否可以在 C++ 中将指向类成员的指针作为单个参数传递？

不，这是不可能的。您需要要调用该方法的类的对象。

你可以通过使用[lambda 函数](http://en.wikipedia.org/wiki/C++11#Lambda_functions_and_expressions)来解决这个问题，就像在下一个例子中一样：

```
#include <iostream>
#include <functional>

void call( const std::function< void( const char * a ) > & fn )
{
  fn("hi");
}

void foo( const char * a )
{
  std::cout << "foo : " << a << std::endl;
}

class bar
{
public:
  void operator()( const char * a )
  {
    std::cout << "bar : " << a << std::endl;
  }
};

int main()
{
  bar b;
  const auto f1 = [&]( const char * a ){ b(a); };

  const auto f2 = foo;

  call( f1 );
  call( f2 );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:08:10.420

问问自己是否可以在不指定对象的情况下调用成员方法。考虑一下：

```
class A {
public: void m() {}
};
int main() {
   m(); // can't call without object - like: A a; a.m(); 
} 
```

# c++ - 获取系统信息不起作用

> ID：11341029
> 
> 赞同：1
> 
> 时间：2012-07-05T09:01:04.473
> 
> 标签：c++, system

我正在尝试确定当前系统是 32 位还是 64 位。我想从 SystemInfo 中获取该信息，但是当我尝试编译它时，它 VS 给了我错误。我无法使用大多数其他方法来确定操作系统是 64 位还是 32 位。因为我需要检查 Windows 是否是 64 位而不是进程。

```
LPSYSTEM_INFO info;
GetSystemInfo(&info); // Error 
```

IntelliSense：“LPSYSTEM_INFO *”类型的参数与“LPSYSTEM_INFO”类型的参数不兼容

错误 C2664：“GetSystemInfo”：无法将参数 1 从“LPSYSTEM_INFO *”转换为“LPSYSTEM_INFO”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T09:02:40.617

您的`info`缓冲区应该是类型`SYSTEM_INFO`，而不是`LPSYSTEM_INFO`。当你用它捕获它的地址时，`&info`你会得到`LPSYSTEM_INFO`你需要传入的指针`GetSystemInfo`。

（如果不清楚`LPSYSTEM_INFO`是 typedef，别名为`SYSTEM_INFO *`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:30:32.490

使用此代码：

```
SYSTEM_INFO info;
GetSystemInfo(&info); 
```

# c# - C#：读取 JS 和 CSS 文件内容的最佳优化方式

> ID：11341030
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:01:05.357
> 
> 标签：c#, asp.net, file-io

使用**`C#, Framework 2.0`**

> 读取 JS 和 CSS 文件内容的最佳优化方式是什么？

*注意内容需要同时写出*

## 编辑：

更清楚地说，在加载页面时，我需要读取所有 JS 文件的内容并在页面上写出内容。最后，这个页面将作为一个单独的 JS 文件和 CSS 文件以同样的方式运行。

因为这里我要求多次读取文件的内容。

我正在寻找在访问文件时优化其性能的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:02:11.957

据我所知，这是读取文件内容的最佳方式，

用于`File.ReadAllText(filepath)`获取它的内容。

```
filepath = Server.MapPath(jsFile);
if (File.Exists(filepath))
{
   contents = File.ReadAllText(filepath);
   Response.Write(contents);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:46:40.547

已经有一个 ToolkitScriptManager，它将捆绑、缩小和压缩所有 javascript 到一个请求中。你可以试着看看这个。

我理解您将 javascript 和 CSS 捆绑、缩小和压缩到一个文件中的原因，但无法理解为什么必须为每个请求完成它。你也可以，

1.  使用[CodeMaster 在他的回答](https://stackoverflow.com/a/11341263/30594)中建议的现有捆绑和缩小工具之一（YUICompressor、Closure Compiler、AJAXminifier）。这只会将脚本和 CSS 捆绑一次，这也是在构建时本身，并使用它来服务所有请求。对我来说，这是捆绑脚本并减少服务器负载的最有效方法，因为它们只是静态文件，捆绑它们不需要处理。此外，脚本可以被视为静态文件并缓存在客户端或从 CDN 加载。

2.  使用 Toolkit Script Manager 方法，自定义处理程序将在其中查找查询字符串，如果存在组合，则在其缓存中查找，如果不存在，则使用[Florion 的答案](https://stackoverflow.com/a/11341387/30594)构建输出并将其缓存以供后续调用。通过这种方式，您可以避免频繁的文件读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:22:26.750

目标是什么？扫描输出？这是一个编码安全的版本（即：尽可能进行编码翻译）

```
 void ConcatenateAllSafe(StreamWriter output, params string[] files)
    {
        foreach (var f in files)
        {
            using(StreamReader rd = new StreamReader(f))
            {
                string line = null;
                while (null != (line = rd.ReadLine()))
                {
                    output.WriteLine(line);
                }
            }
        }
    }

    // This version will assume everything is sharing the same encoding
    void ConcatenateAllUnsafe(Stream output, params string[] files)
    {
        var data = new byte[1024 * 64];//64k should be enough for anyone

        foreach (string f in files)
        {
            using (Stream inStream = new FileStream(f, FileMode.Open, FileAccess.Read, FileShare.Read))
            {
                for (int offset = 0,
                         read; 0 != (read = inStream.Read(data, offset, data.Length)); offset += read)
                {
                    output.Write(data, 0, read);
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:15:28.690

取决于项目的类型，但您可以查看[Bundling & Minification](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5.aspx)。这样你就不必重新发明轮子了。

# java - 主线程异常上的 Android Bump Api Network

> ID：11341032
> 
> 赞同：0
> 
> 时间：2012-07-05T09:01:13.370
> 
> 标签：java, android, multithreading, exception, android-asynctask

首先，我对 Android 和 JAVA 世界很陌生（来自 C/C++/Objective-C）。我正在尝试集成 Android Bump API（3.0，最新版本），但我遇到了麻烦。我复制了这个例子，它在Android 2.2下运行良好，bump服务正常启动，但对于Android 3.0及更高版本它不起作用。我在加载我的活动时遇到了一个异常（主线程上的网络），我知道这个异常以及如何避免它，但是在这种情况下，Bump 声明他们在自己的线程中运行他们的 API，所以我不真的知道我为什么得到它。他们说您不需要运行线程或任务。

这是我的活动示例

```
public class BumpActivity extends Activity {
private IBumpAPI api;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bump);

    bindService(new Intent(IBumpAPI.class.getName()), connection,
            Context.BIND_AUTO_CREATE);

    IntentFilter filter = new IntentFilter();
    filter.addAction(BumpAPIIntents.CHANNEL_CONFIRMED);
    filter.addAction(BumpAPIIntents.DATA_RECEIVED);
    filter.addAction(BumpAPIIntents.NOT_MATCHED);
    filter.addAction(BumpAPIIntents.MATCHED);
    filter.addAction(BumpAPIIntents.CONNECTED);
    registerReceiver(receiver, filter);

}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}

private final ServiceConnection connection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName className, IBinder binder) {

        Log.i("BumpTest", "onServiceConnected");
        api = IBumpAPI.Stub.asInterface(binder);
        try {
            api.configure("API_KEY", "Bump User");
        } catch (RemoteException e) {
            Log.w("BumpTest", e);
        }
        Log.d("Bump Test", "Service connected");
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        Log.d("Bump Test", "Service disconnected");
    }
};
} 
```

听起来问题发生在 api.configure 上的连接服务期间。我应该在单独的线程中运行它还是在它自己的 AsynchTask 中运行它，但是如何以及为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:09:36.627

我在这个问题上停留了一天左右……从字面上看，在这里发布后 2 分钟我解决了它……我只是将 api.configure 放在一个单独的线程上（比 AsynchTask 短）。

```
private final ServiceConnection connection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName className, IBinder binder) {

        Log.i("BumpTest", "onServiceConnected");
        api = IBumpAPI.Stub.asInterface(binder);
        new Thread() {
            public void run() {
                try {
                    api.configure("API_KEY",
                            "Bump User");
                } catch (RemoteException e) {
                    Log.w("BumpTest", e);
                }

            }
        }.start();

        Log.d("Bump Test", "Service connected");
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        Log.d("Bump Test", "Service disconnected");
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:07:22.323

在后台进程中发出请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:07:38.203

主线程上的网络在 2.2 和 3.0 及更高版本中发生了一个异常，不同之处在于，在 3.0 及更高版本上，它们会强制您将涉及一些繁重或慢速操作的所有内容放在不同的线程中，正如您在 asyncTask 中所说的那样。

您只需要创建一个内部[asyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并在其 onBackground 方法上放置您的 api.configure :)

```
class LoadBumpAsyncTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        try {
        api.configure("9b17d663752843a1bfa4cc72d309339e", "Bump User");
    } catch (RemoteException e) {
        Log.w("BumpTest", e);
    }
        return null;
    }

} 
```

只需调用`new LoadBumpAsyncTask().execute()`已连接的服务即可。

# ios - 在 start_time 中没有小时值的 Facebook 事件在 fql 中提前一天返回

> ID：11341037
> 
> 赞同：2
> 
> 时间：2012-07-05T09:01:20.790
> 
> 标签：ios, facebook, timezone, facebook-fql

从今天（2012 年 7 月 5 日）开始，Facebook 将事件的返回值从 unix 时间戳更改为字符串。这弄乱了我的显示音乐会日期的 iO​​S 应用程序。

我从事件 fql 表中获取事件数据。

当我查看从 Facebook 返回的 json 时，我现在看到了这样的字符串：
“2012-10-07T19:30:00+0200”。

现在，如果活动创建者没有在 facebook 上发布活动的开始时间，api 只会返回“2012-10-06” - 没有附加时间，它会提前一天返回活动。虽然浏览器中的 facebook 页面正确显示了事件日期，但 api 提前一天返回日期。

这里发生了什么，我错过了什么，处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:40:23.103

从昨天开始一切都恢复为unix格式，我检查并发现这种字符串（“2012-10-07T19：30：00 + 0200”）是一个错误！只有一些应用程序收到了，实际上图形 api 资源管理器从未使用过它，并且总是使用 unix 时间...谢谢 facebook，现在我必须在一周内第二次更改所有内容。

这是错误链接： [https ://developers.facebook.com/bugs/415058451869226?browse=search_5001222c9ff516a78134883](https://developers.facebook.com/bugs/415058451869226?browse=search_5001222c9ff516a78134883)

# regex - Fitnesse中的正则表达式问题

> ID：11341049
> 
> 赞同：0
> 
> 时间：2012-07-05T09:02:09.303
> 
> 标签：regex, fitnesse

我在健身中使用正则表达式时遇到问题。我想获得一个 10 位数字序列的正则表达式。我尝试了以下 -

```
=~/\d{10}/ 
```

和

```
=~/[0-9]{10}/ 
```

但这些都行不通。对于示例输入说“1234”，上面的正则表达式以绿色传递。

在fitnesse中测试10位数字序列的正则表达式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:06:37.133

您的正则表达式匹配序列只有 10 位，但不是 4，您必须写`\d{1,10}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:16:22.267

尝试添加开始/结束锚点，例如

```
=~/^\d{10}$/ 
```

或者如果 10 位数字嵌入在其他文本中，则可能是单词锚：

```
=~/\b\d{10}\b/ 
```

# java - Java 和 MySQL：“主键”异常的重复值

> ID：11341051
> 
> 赞同：0
> 
> 时间：2012-07-05T09:02:15.460
> 
> 标签：java, mysql

我使用 for 循环在 MySQL 数据库中进行了一些插入操作。

我的自动增量有问题，因为在第一次插入后我获得了 com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException。

这里的代码：

```
for (int i=0; i<numKeys; i++) {
try {
   stm1 = this.db_connection.prepareStatement("INSERT INTO mytable (Cod, Prop, Field, Value) VALUES (?,?,?,?)");
   stm1.setInt(1, Statement.RETURN_GENERATED_KEYS);
   stm1.setInt(2, 0);
   stm1.setString(3, aname);  
   stm1.setString(4, avalue);
       stm1.executeUpdate();
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

Cod 是一个自动增量字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:04:36.933

如果它是一个自动递增的字段，则没有理由将其作为参数传递，只是不要将其包含在 Insert 语句中。

```
stm1 = this.db_connection.prepareStatement("INSERT INTO mytable (Prop, Field, Value) VALUES (?,?,?)"); 
```

并删除下面适当的 setInt 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:04:40.500

`Statement.RETURN_GENERATED_KEYS`是一个 int 常量，

如果您尝试使用相同的主键多次添加它，它将无法添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:04:37.410

如果 Cod 是自动增量的，则不需要插入它。您应该尝试以下代码。

```
for (int i=0; i<numKeys; i++) {
try {
   stm1 = this.db_connection.prepareStatement("INSERT INTO mytable (Prop, Field, Value) VALUES (?,?,?)");
   stm1.setInt(1, 0);
   stm1.setString(2, aname);  
   stm1.setString(3, avalue);
   stm1.executeUpdate();
} catch (SQLException e) {
    e.printStackTrace();
} 
```

}

# ajax - Selenium：如何等待 RichFaces ajax 请求完成

> ID：11341055
> 
> 赞同：2
> 
> 时间：2012-07-05T09:02:33.267
> 
> 标签：ajax, jsf, selenium, richfaces, selenium-rc

我使用 selenium 来测试 JSF/RichFaces 应用程序。由于“未找到元素”错误，测试随机失败。这如[Selenium：间歇性“找不到元素”问题](https://stackoverflow.com/questions/5961044/selenium-intermittent-element-not-found-issues)中所述，但它仅与 jQuery ajax 调用有关。

这里的挑战是使用`selenium.waitForCondition(jsExpression, timeout)`. 使用 RichFaces ajax 调用时最好的 jsExpression 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:39:12.287

我调查了为 a4j:status 生成的 html。下面的代码现在可以完成这项工作，它比`wait()`语句更好，但我正在寻找更好的解决方案。

```
// depends on <a4j:status> present in the page under test
selenium.waitForCondition(          
    "selenium.browserbot.getCurrentWindow().document.getElementById(
    "_viewRoot:status.start\").style.display == 'none'",
    "3000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:11:26.373

我曾经发现自己的处境和你一样。此外，我有很多实际找到但不可见的元素——JSF 还不够快，无法让它们可见。此外，我厌倦了`selenium`一次又一次地写作。

于是我坐下来写了下面的代码。它等待所有元素出现在页面上并且在与它们交互之前可见（或在超时后失败）。我已经搬到 WebDriver，所以我没有原始代码，但它是这样的：

```
public static long WAIT = 10000;    // ten seconds

private void waitForElement(String locator) {
    long targetTime = System.currentTimeMillis() + WAIT;
    boolean found;
    do {
        found = selenium.isElementPresent(locator) && selenium.isVisible(locator);
    } while (!found && (targetTime < System.currentTimeMillis()));
    if (!found) {
        throw new SeleniumException("Element " + locator + " not found");
    }
}

public void click(String locator) {
    waitForElement(locator);
    selenium.click(locator);
}

public void type(String locator, String text) {
    waitForElement(locator);
    selenium.type(locator, text);
} 
```

至于`waitForCondition()`这应该是检测元素是否存在的代码：

```
String locator = "id=anything";
String script =
        "var retValue = true;" +
        "try {" +
        "    selenium.browserbot.findElement('" + locator + "');" +
        "} catch(e) {" +
        "    retValue = false;" +
        "}" +
        "retValue;";
selenium.waitForCondition("!!selenium.browserbot.findElement('" + locator + "')", "10000");
selenium.click(locator); 
```

只是普通的 JavaScript：

```
var retValue = true;
try {
    selenium.browserbot.findElement('" + locator + "');
} catch(e) {
    retValue = false;
}
retValue; 
```

# facebook - 如何检测 Facebook 发送对话框是否可用？

> ID：11341064
> 
> 赞同：3
> 
> 时间：2012-07-05T09:03:02.563
> 
> 标签：facebook, mobile-website, fbjs

[发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)是一个有用的功能。遗憾的是它[在移动设备上不可用](https://developers.facebook.com/bugs/483239768359255)

我通过以下方式调用api；

```
app.sendMessage = function(){
  FB.ui({
    app_id: app.facebook_app_id,
    method: "send",
    link:   "http://google.com"
  });
}; 
```

现在移动设备上的结果是一个令人讨厌的错误页面。

有没有办法在 javascript 中检测发送对话框是否可用？

我会建议类似的东西；

```
function sendDialogAvailable(){
  return FB.supports("senddialog");
} 
```

然后我可以根据这个属性更改我的应用程序的功能，但现在我担心我不得不求助于浏览器嗅探。

# c# - 如何在 Zedgraph 中删除特定的上下文菜单项

> ID：11341065
> 
> 赞同：7
> 
> 时间：2012-07-05T09:03:03.030
> 
> 标签：c#, contextmenu, zedgraph

我想删除特定的上下文菜单项，在触发鼠标按下（右）事件时出现。

[![在此处输入图像描述](../Images/461cfaac61701b4e05ead3659f9d8a41.png)](https://i.stack.imgur.com/qn0Fn.png)

在 Context Menu Builder 事件的帮助下，我能够添加一些服装菜单项，但我想摆脱最后一项（默认）。

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:52:19.560

在同一个事件处理程序中，您也可以删除项目，例如：

```
private void zedGraphControl1_ContextMenuBuilder(ZedGraphControl sender, ContextMenuStrip menuStrip, Point mousePt, ZedGraphControl.ContextMenuObjectState objState)
{
  foreach (ToolStripMenuItem item in menuStrip.Items)
  {
    if ((string)item.Tag == "set_default")
    {
      menuStrip.Items.Remove(item);
      break;
    }
  }
} 
```

相关链接：[http ://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index43d0.html?title=Edit_the_Context_Menu](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index43d0.html?title=Edit_the_Context_Menu)

# jquery - 使用 jquery 上传文件的 Ajax 表单提交

> ID：11341067
> 
> 赞同：2
> 
> 时间：2012-07-05T09:03:09.127
> 
> 标签：jquery, ajax, forms, upload

我正在尝试使用 jQuery 通过 ajax 提交一个包含一个文本和一个文件上传字段的表单。

```
$("#myForm").submit(function() {
    var formData = new FormData($(this)[0]);
    $.ajax({
        url: $(this).attr("action"),
        type: "POST",
        data: formData,
        async: false,
        cache: false,
        contentType: false,
        proccessData: false,
        success: function() {
            // do something smart here
        }
    });
}); 
```

在提交时，我只收到错误**Illegal operation on WrappedNative 原型对象**，因为 ajax 请求试图从表单发送整个 DOM。

如何正确发送数据？

$(this).serialize() 将是选项，如果我只想发送文本，但我正在尝试发送文本并同时上传文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:57:25.057

试试这个，

```
$("#pushform").submit(function(){
var formData = new FormData($(this)[0]);

$.ajax({
url:$(this).attr("action"),
type: 'POST',
data: formData,
async: false,
success: function (data) {
alert(data);
location.reload();
},
cache: false,
contentType: false,
processData: false
});
return false; 
```

# c# - WPF MessageBox 出现两次

> ID：11341071
> 
> 赞同：0
> 
> 时间：2012-07-05T09:03:22.300
> 
> 标签：c#, wpf

我正在使用以下代码显示带有确定和取消按钮的 MessageBox。当我单击任何按钮时，再次出现相同的消息框。这段代码有什么问题吗？

 `````
 string messageBoxText = "Uploading Data";
        string caption = "Upload Data";
        MessageBoxButton button = MessageBoxButton.OKCancel;                
        // Display message box
        MessageBox.Show(messageBoxText, caption, button, icon);
        MessageBoxResult res = MessageBox.Show(messageBoxText, caption, button, icon);
        if (res == MessageBoxResult.OK)
        {
           count++;              
        } 
````  `* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:06:55.213

因为你打`MessageBox.Show`了两次...

```
string messageBoxText = "Uploading Data";
    string caption = "Upload Data";
    MessageBoxButton button = MessageBoxButton.OKCancel;                
    // Display message box
    MessageBox.Show(messageBoxText, caption, button, icon); //**Comment this line**
    MessageBoxResult res = MessageBox.Show(messageBoxText, caption, button, icon);
    if (res == MessageBoxResult.OK)
    {
       count++;              
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:06:11.253

您通过 调用消息框两次`MessageBox.Show`。您可能想删除第一个

```
MessageBox.Show(messageBoxText, caption, button, icon); 
`````

# pdf - 如何使用 Acrobat SDK 将 PDF 转换为 Word？

> ID：11341073
> 
> 赞同：7
> 
> 时间：2012-07-05T09:03:24.063
> 
> 标签：pdf, ms-word, acrobat-sdk

我的 .Net 应用程序需要以编程方式将 PDF 文档转换为 Word 格式。

我评估了几种产品并找到了[Acrobat X Pro](http://www.adobe.com/products/acrobatpro.html)，它提供了另存为选项，我们可以将文档保存为 Word/Excel 格式。我尝试使用 Acrobat SDK，但找不到合适的文档从哪里开始。

我查看了他们的 IAC 示例，但不明白如何调用菜单项并使其执行另存为选项。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T20:18:29.943

您可以使用 Acrobat X Pro 执行此操作，但您需要使用 c# 中的 javascript API。

```
 AcroPDDoc pdfd = new AcroPDDoc();
 pdfd.Open(sourceDoc.FileFullPath);
 Object jsObj = pdfd.GetJSObject();
 Type jsType = pdfd.GetType();
 //have to use acrobat javascript api because, acrobat
 object[] saveAsParam = { "newFile.doc", "com.adobe.acrobat.doc", "", false, false };
 jsType.InvokeMember("saveAs",BindingFlags.InvokeMethod | BindingFlags.Public | BindingFlags.Instance,null, jsObj, saveAsParam, CultureInfo.InvariantCulture); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-28T04:04:40.837

我使用 WinPython x64 2.7.6.3 和 Acrobat X Pro 做了一些非常相似的事情，并使用 JSObject 接口将 PDF 转换为 DOCX。[与jle 的](https://stackoverflow.com/a/13847910/1125709)解决方案基本相同。

下面应该是一段完整的将一组 PDF 转换为 DOCX 的代码：

```
# gets all files under ROOT_INPUT_PATH with FILE_EXTENSION and tries to extract text from them into ROOT_OUTPUT_PATH with same filename as the input file but with INPUT_FILE_EXTENSION replaced by OUTPUT_FILE_EXTENSION
from win32com.client import Dispatch
from win32com.client.dynamic import ERRORS_BAD_CONTEXT

import winerror

# try importing scandir and if found, use it as it's a few magnitudes of an order faster than stock os.walk
try:
    from scandir import walk
except ImportError:
    from os import walk

import fnmatch

import sys
import os

ROOT_INPUT_PATH = None
ROOT_OUTPUT_PATH = None
INPUT_FILE_EXTENSION = "*.pdf"
OUTPUT_FILE_EXTENSION = ".docx"

def acrobat_extract_text(f_path, f_path_out, f_basename, f_ext):
    avDoc = Dispatch("AcroExch.AVDoc") # Connect to Adobe Acrobat

    # Open the input file (as a pdf)
    ret = avDoc.Open(f_path, f_path)
    assert(ret) # FIXME: Documentation says "-1 if the file was opened successfully, 0 otherwise", but this is a bool in practise?

    pdDoc = avDoc.GetPDDoc()

    dst = os.path.join(f_path_out, ''.join((f_basename, f_ext)))

    # Adobe documentation says "For that reason, you must rely on the documentation to know what functionality is available through the JSObject interface. For details, see the JavaScript for Acrobat API Reference"
    jsObject = pdDoc.GetJSObject()

    # Here you can save as many other types by using, for instance: "com.adobe.acrobat.xml"
    jsObject.SaveAs(dst, "com.adobe.acrobat.docx") # NOTE: If you want to save the file as a .doc, use "com.adobe.acrobat.doc"

    pdDoc.Close()
    avDoc.Close(True) # We want this to close Acrobat, as otherwise Acrobat is going to refuse processing any further files after a certain threshold of open files are reached (for example 50 PDFs)
    del pdDoc

if __name__ == "__main__":
    assert(5 == len(sys.argv)), sys.argv # <script name>, <script_file_input_path>, <script_file_input_extension>, <script_file_output_path>, <script_file_output_extension>

    #$ python get.docx.from.multiple.pdf.py 'C:\input' '*.pdf' 'C:\output' '.docx' # NOTE: If you want to save the file as a .doc, use '.doc' instead of '.docx' here and ensure you use "com.adobe.acrobat.doc" in the jsObject.SaveAs call

    ROOT_INPUT_PATH = sys.argv[1]
    INPUT_FILE_EXTENSION = sys.argv[2]
    ROOT_OUTPUT_PATH = sys.argv[3]
    OUTPUT_FILE_EXTENSION = sys.argv[4]

    # tuples are of schema (path_to_file, filename)
    matching_files = ((os.path.join(_root, filename), os.path.splitext(filename)[0]) for _root, _dirs, _files in walk(ROOT_INPUT_PATH) for filename in fnmatch.filter(_files, INPUT_FILE_EXTENSION))

    # patch ERRORS_BAD_CONTEXT as per https://mail.python.org/pipermail/python-win32/2002-March/000265.html
    global ERRORS_BAD_CONTEXT
    ERRORS_BAD_CONTEXT.append(winerror.E_NOTIMPL)

    for filename_with_path, filename_without_extension in matching_files:
        print "Processing '{}'".format(filename_without_extension)
        acrobat_extract_text(filename_with_path, ROOT_OUTPUT_PATH, filename_without_extension, OUTPUT_FILE_EXTENSION) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T09:50:32.150

Adobe 不支持 PDF 到 Word 的转换，除非您使用他们的 Acrobat PDF 客户端。Maeaning 你不能用他们的 SDK 或调用命令行来做到这一点。您只能手动进行。

# java - Spring 3：@OneToOne 单向生成 java.sql.SQLException: ORA-00918

> ID：11341080
> 
> 赞同：2
> 
> 时间：2012-07-05T09:03:36.437
> 
> 标签：java, hibernate, spring-mvc, hibernate-annotations, spring-annotations

我正在用 Spring 3 + Hibernate 做一个项目。当我尝试获取包含对象 PoaUpa 的对象时。我得到**java.sql.SQLException: ORA-00918**这个单向连接：

```
@OneToOne
@JoinColumns({
    @JoinColumn(name="ID_ESCALA",referencedColumnName="ID_ESCALA",insertable=false,updatable=false),
    @JoinColumn(name="ANO",referencedColumnName="ANO",insertable=false,updatable=false),
    @JoinColumn(name="MES",referencedColumnName="MES",insertable=false,updatable=false)
})
private PoaUpa poaUpa; 
```

这是查询：

```
@Override
public Autorizacion getAutorizacionDeterminada(User u, Long ano,Long mes, Long escala) {
    Query q = em.createQuery("SELECT a FROM Autorizacion a WHERE a.ano=:ano AND a.mes=:mes AND a.idEscala=:escala");
    q.setParameter("ano", ano);
    q.setParameter("mes", mes);
    q.setParameter("escala", escala);
    return (Autorizacion) q.getSingleResult();
} 
```

这里是控制台输出：

```
Hibernate: select * from ( select autorizaci0_.ano as ano0_, autorizaci0_.ID_ESCALA as ID2_0_, autorizaci0_.mes as mes0_, autorizaci0_.AUTORIZACION_HORAS_DIA_FIJIS as AUTORIZA4_0_, autorizaci0_.AUTORIZACION_HORAS_EVENT as AUTORIZA5_0_, autorizaci0_.AUTORIZACION_HORAS_FACTP as AUTORIZA6_0_, autorizaci0_.AUTORIZACION_HORAS_FIJIS as AUTORIZA7_0_, autorizaci0_.AUTORIZACION_HORAS_FIJOS as AUTORIZA8_0_, autorizaci0_.AUTORIZACION_HORAS_SEM_FACTP as AUTORIZA9_0_, autorizaci0_.AUTORIZACION_NAP as AUTORIZ10_0_, autorizaci0_.AUTORIZACION_NUM_PERS_EVENT as AUTORIZ11_0_, autorizaci0_.AUTORIZACION_OBSERVACIONES as AUTORIZ12_0_, autorizaci0_.PETICION_HORAS_DIA_FIJIS as PETICION13_0_, autorizaci0_.PETICION_HORAS_EVENT as PETICION14_0_, autorizaci0_.PETICION_HORAS_FACTP as PETICION15_0_, autorizaci0_.PETICION_HORAS_FIJIS as PETICION16_0_, autorizaci0_.PETICION_HORAS_FIJOS as PETICION17_0_, autorizaci0_.PETICION_HORAS_SEM_FACTP as PETICION18_0_, autorizaci0_.PETICION_NAP as PETICION19_0_, autorizaci0_.PETICION_NUM_PERS_EVENT as PETICION20_0_, autorizaci0_.PETICION_OBSERVACIONES as PETICION21_0_, autorizaci0_.ANO as ANO0_, autorizaci0_.MES as MES0_, autorizaci0_.REALIZACION_HORAS_DIA_FIJIS as REALIZA22_0_, autorizaci0_.REALIZACION_HORAS_EVENT as REALIZA23_0_, autorizaci0_.REALIZACION_HORAS_FACTP as REALIZA24_0_, autorizaci0_.REALIZACION_HORAS_FIJIS as REALIZA25_0_, autorizaci0_.REALIZACION_HORAS_FIJOS as REALIZA26_0_, autorizaci0_.REALIZACION_HORAS_SEM_FACTP as REALIZA27_0_, autorizaci0_.REALIZACION_NAP as REALIZA28_0_, autorizaci0_.REALIZACION_NUM_PERS_EVENT as REALIZA29_0_, autorizaci0_.REALIZACION_OBSERVACIONES as REALIZA30_0_ from TTR_AUTORIZACION autorizaci0_ where autorizaci0_.ano=? and autorizaci0_.mes=? and autorizaci0_.ID_ESCALA=? ) where rownum <= ?
WARN : org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 918, SQLState: 42000
ERROR: org.hibernate.engine.jdbc.spi.SqlExceptionHelper - ORA-00918: columna definida de forma ambigua

DEBUG: org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver - Resolving exception from handler [public es.iberia.tryp.model.entities.Autorizacion es.iberia.tryp.controllers.AdministracionController.getJSONAutorizacion(org.springframework.ui.Model,javax.servlet.http.HttpSession,java.lang.Long)]: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua

DEBUG: org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver - Resolving exception from handler [public es.iberia.tryp.model.entities.Autorizacion es.iberia.tryp.controllers.AdministracionController.getJSONAutorizacion(org.springframework.ui.Model,javax.servlet.http.HttpSession,java.lang.Long)]: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua

DEBUG: org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [public es.iberia.tryp.model.entities.Autorizacion es.iberia.tryp.controllers.AdministracionController.getJSONAutorizacion(org.springframework.ui.Model,javax.servlet.http.HttpSession,java.lang.Long)]: javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua

DEBUG: org.springframework.web.servlet.DispatcherServlet - Could not complete request
javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua

    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1367)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:317)
    at es.iberia.tryp.model.entities.dao.impl.AutorizacionDAOImpl.getAutorizacionDeterminada(AutorizacionDAOImpl.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy44.getAutorizacionDeterminada(Unknown Source)
    at es.iberia.tryp.services.impl.AdministracionServiceImpl.getAutorizacionDeterminada(AdministracionServiceImpl.java:233)
    at es.iberia.tryp.controllers.AdministracionController.getJSONAutorizacion(AdministracionController.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua

    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy56.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:829)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doList(Loader.java:2438)
    at org.hibernate.loader.Loader.doList(Loader.java:2424)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
    at org.hibernate.loader.Loader.list(Loader.java:2249)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:284)
    ... 46 more
Caused by: java.sql.SQLException: ORA-00918: columna definida de forma ambigua

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:288)
    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:743)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:216)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:799)
    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1037)
    at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:839)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1132)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3316)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3361)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 61 more
05-jul-2012 10:51:08 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: El Servlet.service() para el servlet [appServlet] en el contexto con ruta [/tryp] lanzó la excepción [Request processing failed; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: ORA-00918: columna definida de forma ambigua
] con causa raíz
java.sql.SQLException: ORA-00918: columna definida de forma ambigua

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:288)
    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:743)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:216)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:799)
    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1037)
    at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:839)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1132)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3316)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3361)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy56.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:829)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doList(Loader.java:2438)
    at org.hibernate.loader.Loader.doList(Loader.java:2424)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
    at org.hibernate.loader.Loader.list(Loader.java:2249)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:284)
    at es.iberia.tryp.model.entities.dao.impl.AutorizacionDAOImpl.getAutorizacionDeterminada(AutorizacionDAOImpl.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy44.getAutorizacionDeterminada(Unknown Source)
    at es.iberia.tryp.services.impl.AdministracionServiceImpl.getAutorizacionDeterminada(AdministracionServiceImpl.java:233)
    at es.iberia.tryp.controllers.AdministracionController.getJSONAutorizacion(AdministracionController.java:84)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:46:21.777

**解决了改变连接：**

```
@OneToOne
@JoinColumns({
    @JoinColumn(name="ID_ESCALA",referencedColumnName="ID_ESCALA",insertable=false,updatable=false),
    @JoinColumn(name="ANO",referencedColumnName="ANO",insertable=false,updatable=false),
    @JoinColumn(name="MES",referencedColumnName="MES",insertable=false,updatable=false)
})
private PoaUpa poaUpa; 
```

**对于这个加入：**

```
@OneToOne
  @JoinTable(name="TTR_POA_UPA",
    joinColumns = {
      @JoinColumn(name="ANO", insertable=false, updatable=false),
      @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
      @JoinColumn(name="MES", insertable=false, updatable=false)          
    },
    inverseJoinColumns = {
      @JoinColumn(name="ANO", insertable=false, updatable=false),
      @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
      @JoinColumn(name="MES", insertable=false, updatable=false)
    }     
  )
private PoaUpa poaUpa; 
```

**编辑：**显示[为什么更改 joinColumn 的顺序，休眠返回正确或不正确的查询？](https://stackoverflow.com/q/11342733/1474638)更多细节

# html - 内部包含绝对定位 div 的 div 的 IE8 不透明度

> ID：11341081
> 
> 赞同：2
> 
> 时间：2012-07-05T09:03:42.360
> 
> 标签：html, css, opacity

想知道这是否可能：我有一个容器 div，它设置了不透明度，并且在该 div 内部是两个（或更多）绝对定位的 div。它应该使整个事情变得透明，就像在除 IE8 之外的所有浏览器中一样（IE7 甚至可以工作！）

[http://jsfiddle.net/yckQu/6/](http://jsfiddle.net/yckQu/6/)

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:06:20.497

差不多好了。只需在 CSS 中更新这一行：

```
#opacity, #opacity div { 
```

问题在于，当您编写*#opacity*时，它针对的是该元素，而不是其子元素。像上面这样写可以纠正这一点。

[http://jsfiddle.net/yckQu/7/](http://jsfiddle.net/yckQu/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:45:52.657

您可以将以下行添加到内部 div 的 CSS 声明中：

```
filter:inherit; 
```

这应该可以完成工作（它对我有用）。

资源：

[http://www.jacklmoore.com/notes/ie-opacity-inheritance/](http://www.jacklmoore.com/notes/ie-opacity-inheritance/)

# django - Django 创建子字段

> ID：11341083
> 
> 赞同：0
> 
> 时间：2012-07-05T09:03:49.570
> 
> 标签：django, django-models

我是 Django 的新手。我试图找出是否可以在 django 中创建一个需要多个相互关联的输入的字段。例如：我正在尝试创建一个学生评估记录，我想在其中存储每个学生科目的分数。为此，我想要一个像subject1（下拉菜单以选择主题）（最高分数）（获得的分数）subject2（下拉菜单以选择主题）（最高分数）（获得的分数）等字段。

我可以这样做吗？或者有没有更好的方法来做到这一点，比如当我输入前一个领域的学生所攻读的学位或课程时，它会为我获取该特定学位下的科目列表，并且我可以为每个科目输入分数。这样可以更容易地显示学生明智的记录以及学科明智。

请帮助..提前谢谢！

回复第一个答案：还没有工作..要么我不明白你，要么我执行错了这里的代码。我哪里错了？

```
class Evaluation(models.Model):
 student = models.ForeignKey('Student', related_name='Evaluation_Students')
 subject = models.ForeignKey('Subject', related_name='Evaluation_Subjects')
 def __unicode__(self):
    return self.Evaluation_Students

class Student(models.Model):
Student_First_Name = models.CharField(max_length = 50,default = 0)
Last_Name = models.CharField(max_length = 50, default = 0)
Registeration_Number = models.CharField(max_length = 12,default=0,unique=True)
SelectDegree = models.CharField(max_length=100,default = 0,choices=Allowed_courses)
Subjects= models.CharField(max_length = 100,choices=Subjects,default='-')
evaluations = models.ManyToManyField('Evaluation')
def __unicode__(self):
    return "{} {}".format(self.Student_First_Name, self.Last_Name)

class Subject(models.Model):
 SelectSubject = models.CharField(max_length = 4,choices=Subjects)
 Test_Type = models.CharField(max_length = 12,default= '-')
 Maximum_marks = models.IntegerField(default = 0)
 Marks_Obtained =  models.IntegerField(default = 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:02.770

听起来您需要创建一个名为“评估”的附加模型，并使用多对多字段将其链接到学生。

```
Student model:
     fields…
     evaluations = models.ManyToManyField(Evaluation)

Evaluation model:
      student = models.ForeignKey(Student)
      subject = models.ForeignKey(Subject)
      mark = models.CharField(…whatever…) 
```

您也可以在没有多对多字段的情况下执行此操作并自己管理关系。例如，在学生模型中添加一个属性：

```
 Student model:

       @property
       def evaluations(self):
            return Evalution.objects.filter(student=self) 
```

# .net - 生成条形码作为图像，并将其嵌入到 rdlc

> ID：11341086
> 
> 赞同：1
> 
> 时间：2012-07-05T09:03:54.853
> 
> 标签：.net, barcode, rdlc

首先，我想描述一下我现在的情况。我有一个 RDLC，其数据是使用存储过程“sp”从数据集“ds”中获取的。可以说，从“ds”我可以得到一个名为“bar_code”的字符串类型字段，然后可以在占位符中使用 3of9 字体来生成条形码。

现在，我想获得相同的结果，但使用另一种方法，给定一个字符串，将返回 BMP 或 JPEG 格式的条形码图像。此方法已在[http://www.techrepublic.com/blog/howdoi/how-do-i-generate-barcodes-using-c/173](http://www.techrepublic.com/blog/howdoi/how-do-i-generate-barcodes-using-c/173)中进行了描述。

我的问题：是否可以在 (.aspx.cs) 后面的 ReportViewer 代码中编写方法？如果可能的话，我如何将“bar_code”传递给这个方法，然后将结果（JPEG 或 BMP）嵌入到 RDLC 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:57:37.890

我找到了答案。我们可以通过在代码隐藏中调用 DataSetTableAdapter 从存储过程中获取我们想要转换为图像的值，将其填充为任何所需的参数，然后将结果存储在 DataTable 中。之后，我们遍历每一行并将获得的值传递给生成 BMP 条形码的方法。关键是我们必须将此 BMP 存储在 System.Byte[] 类型的列中，因此我们在 DataTable 中添加一个具有该类型的新列。如果我们将它存储在 System.Object 中，它将无法工作。使用 MemoryStream 将图像保存到 Byte[] ：

内存流毫秒 = 新的内存流（）；image_result.Save(ms, System.Drawing.Imaging.ImageFormat.Png);

然后，将我们的 RDLC 数据源设置为使用该新数据表，并在我们的 RDLC 中按图像类型添加一个占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T14:57:07.007

您可以使用 Barcode.dll[条码组件](http://www.limilabs.com/barcode)，它支持 RDLC 报告（web 和 windows）。

您只需要一种简单的方法来 RDLC 代码选项卡：

1.  在设计模式下打开 Report.rdlc，从灰色字段的上下文菜单中选择“属性”：看一下“References”选项卡，那里引用了 Barcode.dll，并实例化了 BarcodeFactory。湾。请注意，必须在 GAC 中注册 Barcode.dll - 安装程序会这样做。C。看一下“代码”选项卡，那里定义了 GetBarcode128 方法。

2.  看一下“ID”文本下方的 Image 控件，注意它的属性： MimeType "image/png" Source "DataBase" Value "=Code.GetBarcode128(Fields!Name.Value)"

下载包包括 RDLC 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:15:17.473

您引用的那篇文章包含有关如何从 aspx 生成条形码的信息。

缺少一小部分：您使用“BarcodeGenerator.aspx?data=11111111”链接作为`<img>`html 中节点的“src”。

顺便说一句：在这种情况下，“gif”比“jpg”好：jpg 会导致不需要的伪影，使条形码难以扫描。“bmp”通常太大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T19:52:33.807

您可以将图像存储在数据集中的 byte[] 字段中，并使用 rdlc 报告上的图像控件显示该图像

另一种选择是创建一个新参数并以这种方式传递它。

如果它进入页脚的页眉，还有其他问题需要处理。那么您需要使用 =Convert.ToBase64String(First(Fields!BarcodeImage.Value, "DataSet Name")) 将其存储在文本框中，然后使用 Convert.FromBase64String(ReportItems!NameOfYourTextBox.Value) 将其显示在图像中

另请参阅[http://www.codeproject.com/Articles/2434/Drawing-Barcodes-in-Windows-Part-1-Code-39](http://www.codeproject.com/Articles/2434/Drawing-Barcodes-in-Windows-Part-1-Code-39)了解如何生成图像。

我已经使用它并将图像作为流返回并将该流放入我的 byte[] 列（或作为参数传递）以在报告上打印

# android - android:state_enabled="false" 时无法设置颜色

> ID：11341088
> 
> 赞同：4
> 
> 时间：2012-07-05T09:04:01.643
> 
> 标签：android, listview

我有一个 ListView，第一次显示它时，我想禁用它的一些项目。

为此，我制作了这个*textorange_selected.xml*：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" 
          android:color="@color/medium_gray" />

    <item android:state_selected="true"
        android:color="@android:color/white" />

    <item android:state_focused="true"
        android:color="@android:color/white" />

    <item android:state_pressed="true"
        android:color="@android:color/white" />

    <item android:color="@color/lighter_orange" />
</selector> 
```

我在一行的布局中使用它：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="20dp"
   android:gravity="left|center"
   android:layout_width="wrap_content"
   android:paddingLeft="5dp"
   android:paddingRight="5dp"
   android:background="@color/list_bg">

    <ImageView
       android:id="@+id/avatar"
       android:layout_width="48dp"
       android:layout_height="48dp"
       android:layout_marginTop="10dp"
       android:layout_alignParentLeft="true" />

    <LinearLayout
       android:orientation="vertical"
       android:layout_width="wrap_content"
       android:layout_height="48dp"
       android:layout_toRightOf="@+id/avatar"
       android:layout_marginLeft="10dp"
       android:layout_marginTop="5dp">

           <TextView android:id="@+id/listitem1"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginTop="2dp"
               android:textColor="@drawable/textblack_selected"
               android:textSize="18dp"
               android:textStyle="bold" />

           <TextView android:id="@+id/listitem2"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginLeft="40dp"
               android:textColor="@drawable/textorange_selected" />

    </LinearLayout>

    <ImageView
       android:id="@+id/arrowImage"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_marginTop="25dp"
       android:layout_alignParentRight="true"
       android:src="@drawable/arrow_selector" />

</RelativeLayout> 
```

问题是它永远不会进入`android:state_enabled="false"`（那应该是该项目被禁用并且我将文本颜色设置为灰色的那一刻）。

为了禁用我在适配器中使用此代码的项目：

```
@Override
public boolean areAllItemsEnabled() {                    
    return false;
}

@Override
public boolean isEnabled(int position) {
    return position < 1;
} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:32:24.667

Selector 使用`isEnabled()`分配给它的 View 上的值，在本例中为`RelativeLayout`. 它不会调用`isEnabled()`.`Adapter`

您将需要以下代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout v = (RelativeLayout)LayoutInflater.from(parent.getContext())
            .inflate(R.layout.listitem_relativelayout, null);
    if(postion < 1) v.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T11:14:38.350

问题是返回的启用状态`isEnabled()`不会**自动**转发到列表项的所有子视图。您需要做的是`view.setEnabled()`在适配器方法的末尾调用`getView()`以使您的选择器正常工作。

此外，请确保通过指定自身以及包装器`android:duplicateParentState="true"`将状态传递给后代。`TextView``LinearLayout`

# c# - DataGrid绑定到DataTable时如何刷新DataGrid的行？

> ID：11341090
> 
> 赞同：2
> 
> 时间：2012-07-05T09:04:08.283
> 
> 标签：c#, .net, wpf, datagrid, datatable

DataGrid 绑定到一些DataTable。用户更改了一些值。我想用一些颜色标记更改的行。我已经做到了。但是如何通知 DataGrid，当前行值已更改？

PS 我在 currentRow.Row.RowState 上使用触发器来指示更改的行。我不想刷新所有 ItemsSource - 它的操作太长了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:52:35.243

沿着这些思路的东西可能有助于配合....它不准确，您可能必须在不同的事件句柄上调用它..但它应该给你一个正确方向的点！

```
private void dgv_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {
            int colIndex = e.ColumnIndex;
            int rowIndex = e.RowIndex;

            DataGridViewRow theRow = dgvOutstandingReports.Rows[rowIndex];

            theRow.DefaultCellStyle.BackColor = Color.LightYellow;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:17:10.963

不是最好的决定，但它可以按我的预期工作：

```
dataView.ListChanged += (o, e) =>
{
    if (e.ListChangedType == ListChangedType.ItemChanged)
    {
        DataRowView row = ((DataView)o)[e.NewIndex];
        if(row != null)
        {
            MethodInfo method = typeof(DataRowView).GetMethod("RaisePropertyChangedEvent", BindingFlags.Instance | BindingFlags.NonPublic);
            method.Invoke(row, new object[] { "Row" });
        }
    }
}; 
```

# php - 正在搜索 Lime 解析器生成器语法示例...只是找不到任何

> ID：11341091
> 
> 赞同：2
> 
> 时间：2012-07-05T09:04:16.263
> 
> 标签：php, grammar, parser-generator, segment, lime

我正在为我们网站的用户编写一个消息传递系统，它实现了分段以允许单个消息针对用户的动态段。因为给定消息的段定义可能包含多个单独的段匹配，所以消息正文的内容也必须被分段。我试图通过编写一个自定义词法分析器/解析器（我什至不知道词法分析器或解析器）来做到这一点，直到与一位更有经验的程序员的一次偶然对话建议我看看词法分析器和解析器生成器。我做了一些研究，发现 PHP 原生 Lime 解析器生成器似乎是我最好的选择，因为我正在编写的代码是 PHP。

我已经查看了计算器示例的语法文件和元语法（事实上，我已经花了几个小时分析大部分源代码）但我真的很难理解如何构建甚至是一个简单的语法文件。有没有人知道任何专门用于 Lime 的示例语法文件，因为在我们看来它是它自己的语法定义，而不是 Lemon 或任何其他 PG 的语法定义。

如果您愿意并且能够提供具体示例，我特别尝试以如下格式编写条件：

```
This is a text block all users will see.

{{IF user.modules.sms}}
This is a text block only visible to users with the sms module enabled
{{/IF}}

{{IF user.modules.anothermodule AND user.previouslogin < (now() - 3600)}}
This is a text block only visible to users with the anothermodule module enabled, whose previous login was more than an hour ago
{{/IF}} 
```

或者只是一般来说，如果有人对实现此类功能的其他可能方法有任何建议，我愿意接受建议！请记住，不可能使用 PHP，因为编写这些消息的人将是项目经理和营销人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T14:56:54.950

[自 90 年代中期以来，当我使用lex 和 yacc](http://dinosaur.compilertools.net/)构建 C 程序时，我没有做过任何解析器生成器工作，但我会提供这个 - 因为我看到您自 2012 年以来没有得到满意的答案或更新您的问题：

*一般而言，当您希望解析器生成器发出 PHP 代码时，* [lime](http://sourceforge.net/projects/lime-php/)似乎可以替代 yacc，但[计算器示例](https://github.com/rvanvelzen/lime/blob/master/examples/calc/calc.php)中显示的 tokenize() 方法是 lex 的极弱替代品。因此*，一般而言*，如果您的目标是在“消息”中嵌入一些编程逻辑，那么您可以期望“从头开始”编写标记器逻辑是一个挑战（如果消息格式受到高度限制，则情况会更糟）。

但是您提出的示例消息提出了更大的问题：

解析器生成器要发出的 PHP 代码究竟将如何使用？

具体来说：

*   这些解析器生成的代码块是否是“独立”网页 - 可通过 URL 直接寻址并由网络服务器直接呈现（在这种情况下，下一个问题是您将如何告诉网络服务器执行 PHP 代码，例如通过使将它们转换为 CGI 脚本）？或者它们会在某种应用程序框架（或“消息渲染器”）中运行吗？

*   (PHP) 程序状态将如何持久化？您的示例指的是“user.previouslogin”，这表明不仅跨页面视图而且还包括某种“会话”的持久性。

*   您提议在标签内的消息中嵌入的逻辑真的是 PHP 或 Javascript 的某种变体，还是真正新的东西？

在静态页面中嵌入逻辑是一个古老的想法（毕竟服务器端包含在 90 年代很流行），而现代模板引擎（正如 Ugo Meda 的回答所建议的那样）非常强大。滚动您自己的消息解析+渲染系统是否真的有意义实际上取决于您在示例中编写“user.modules.*”时所指的应用程序上下文所施加的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:14:57.927

不要重新发明轮子。也许你应该使用[Smarty 之](http://www.smarty.net/)类的东西来实现它。请注意，这应该由受信任的用户使用，因为它执行代码，这可能很危险。

如果您不打算实现数百个功能，那么适当的正则表达式应该可以解决问题。

# opengl-es - Cocos2D 应用程序中 OpenGL ES 3D 视图的缓冲区问题

> ID：11341093
> 
> 赞同：0
> 
> 时间：2012-07-05T09:04:20.770
> 
> 标签：opengl-es, cocos2d-iphone, buffer

我正在尝试在 iPad 上的 Cocos2D 应用程序中插入 OpenGL ES 3D 视图。我对这些框架比较陌生，所以我基本上在我的 CCLayer 中添加了这些行：

```
CGRect rScreen;
// some code to define the bounds and origin of my frame
EAGL3DView * view3d = [[EAGL3DView alloc] initWithFrame:rScreen] ;

[[[CCDirector sharedDirector] openGLView] addSubview: view3d];

[view3d startAnimation] 
```

我用于 3D 部分的代码基于来自 Apple Developer 的示例代码：http: [//developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html) 我所做的唯一更改是以编程方式创建我的视图（没有 xib 文件，initWithCoder -> initWithFrame ...），并且我还将 EAGLView 类和文件重命名为 EAGL3DView，以免干扰 Cocos2D 附带的 EAGLView。

现在谈谈我的问题：当我运行这些时，我得到一个“-[EAGLView swapBuffers] 中的 OpenGL 错误 0x0502”，3D 视图被正确显示，但其他情况下是完全粉红色的屏幕。

我进入了 Cocos2d EAGLView 中的 swapBuffers 函数，结果发现唯一重要的代码块就是这个：

```
if(![context_ presentRenderbuffer:GL_RENDERBUFFER_OES])
    CCLOG(@"cocos2d: Failed to swap renderbuffer in %s\n", __FUNCTION__); 
```

顺便说一句，它没有进入“if”条件（presentRenderbuffer 不返回空值，但是不正确，因为之后 CHECK_GL_ERROR() 给出了 0x0502 错误）。

所以我知道我的 3D 视图对 OpenGL ES 渲染缓冲区存在某种不正确的覆盖（因为 Cocos2d 也使用 OpenGL ES）导致 Cocos2D 视图无法正常工作。这是我到目前为止所得到的，我无法准确地弄清楚需要做什么才能修复它。所以你怎么看？

希望这只是一个新手问题……</p>

象素兽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:19:51.897

我认为您尝试做的正确方法是：

1.  创建您自己的自定义 CCSprite/CCNode 类；

2.  将您在 Apple 示例中使用的所有 GL 代码放入该类（即覆盖该类的`draw`or`visit`方法）。

如果您想尝试使两个 GL 视图很好地协同工作，您可以尝试阅读[这篇文章](http://gamesfromwithin.com/using-multiple-opengl-views-and-uikit)，它将解释如何将不同的缓冲区与视图相关联。

至于第一种方法，看看这个[帖子](http://www.cocos2d-iphone.org/forum/topic/12108) 和[这个](http://www.deluge.co/?q=cocos-2d-custom-filled-polygon)文章。

确实，第一种方法可能更复杂（取决于 Apple 示例如何进行 open gl），但会使用更少的内存并且会比第二种方法更优化。

# c# - StyleCop+ 高级命名规则，变量命名

> ID：11341101
> 
> 赞同：1
> 
> 时间：2012-07-05T09:05:03.970
> 
> 标签：c#, stylecop, naming-conventions

如何配置 StyleCop+ 命名规则，以使我的变量名称（如`controlUI`、`controlHVACTest`等）成功验证？

目前，由于它没有`sampleName`格式，StyleCop+ 抱怨命名约定。

另外，添加自定义命名验证规则的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:16:36.130

很简单——你关闭你不喜欢的规则，你写你自己的规则。

StyleCop 规则不能像您想要的那样配置 - 您必须替换规则。

> 另外，添加自定义命名验证规则的最佳方法是什么？

从文档开始。

或者：

[http://scottwhite.blogspot.com/2008/11/creating-custom-stylecop-rules-in-c.html](http://scottwhite.blogspot.com/2008/11/creating-custom-stylecop-rules-in-c.html)

（我在谷歌中找到了“Stylecop own rule”作为关键字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:18:55.163

`controlUI`允许名称喜欢的最方便的方法是在“缩写”部分`controlHVACTest`添加`UI`和。`HVAC`

关于您关于“更改`AaBb`为`A*B*`”的问题 - 我不确定我是否理解您的意思。StyleCop+ 命名规则确实非常灵活，但是如果您将命名模板设置为`$(A)$(*)$(A)$(*)`（这看起来与您所说的相似） - 它会强制所有名称至少有两个大写字母（不相互跟随）。

如果您详细说明您的情况，如果可能的话，我可以尝试帮助您设置命名模板。

# c# - 在 C# 中合并两个 ArrayList

> ID：11341103
> 
> 赞同：1
> 
> 时间：2012-07-05T09:05:06.950
> 
> 标签：c#, merge, arraylist, .net-2.0

我想在 c# 中合并两个数组列表中的所有数据。arraylist 中的一些数据与另一个 arraylist 相同。合并时我不想重复数据。

```
ArrayList1   ArrayList2
    1             1
    2             2
    3             4
                  5 
```

我试过下面的编码。但结果不像我预期的那样：

```
for(int i = 0; i<arrayList2;i++)
{
  for(int j = 0; j<arrayList1;j++)
  {
     if(arraylist1[i] == arraylist2[j])
     {
        newArraylist.add(arraylist[i]+"-same");
     }
     else
     {
        newArraylist.add(arraylist[i]+"-from arrayList2");
     }
  }
} 
```

上面代码的结果是：

```
newArrayList
   1 - same
   2 - same
   4 - from arraylist2
   5 - from arraylist2 
```

我想要的结果：

```
 newArrayList
       1 - same
       2 - same
       3 - from arraylist1
       4 - from arraylist2
       5 - from arraylist2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:28:02.683

最简单和最简单的方法是使用 LINQ

```
var collection1 = new ArrayList() { 1, 2, 3 };
var collection2 = new ArrayList() { 1, 2, 4, 5 };
var mergedList = new ArrayList();
mergedList.AddRange(collection1);
mergedList.AddRange(collection2.ToArray().Where(item => !collection1.ToArray().Contains(item)).ToList());
Console.WriteLine(String.Join(", ", mergedList.ToArray()));
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:17:16.990

这个怎么样：

```
var arrayList1 = new ArrayList {1, 2, 3};
var arrayList2 = new ArrayList {1, 2, 4, 5};
var newList = new ArrayList();

foreach (var item in arrayList1)
{
    if(arrayList2.Contains(item))
    {
        newList.Add(string.Format("{0} - same", item));
        arrayList2.Remove(item);
    }
    else
    {
        newList.Add(string.Format("{0} - from arrayList1", item));
    }
}

foreach(var item in arrayList2)
{
    newList.Add(string.Format("{0} - from arrayList2", item));
} 
```

这会给你这个结果：

```
1 - same
2 - same
3 - from arraylist1
4 - from arraylist2
5 - from arraylist2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:14:46.037

遍历项目并查看它是否包含在第一个数组中。

```
foreach (int item in arrayList2)
{
    if (!arrayList1.Contains(item))
        arrayList1.Add(item);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:08:39.117

您正在根据索引进行比较，这是行不通的。`ArrayList1[2]`包含`3`，而`ArrayList1[2]`包含`4`。

您必须使用`.Contains()`来检查该号码是否存在于其他列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T09:16:53.113

代码

```
var collection1 = new ArrayList() { 1, 2, 3 };
var collection2 = new ArrayList() { 1, 2, 4, 5 };

var merge = collection1.ToArray().Union(collection2.ToArray()).Distinct();
var result = new List<String>();
foreach (var val in merge)
{
    var newString = string.Empty;
    if (collection1.Contains(val) && collection2.Contains(val))
        newString = val.ToString() + " - same";
    else if (collection1.Contains(val))
        newString = val.ToString() + " - from list 1";
    else
         newString = val.ToString() + " - from list 2";
    Console.WriteLine(newString);
    result.Add(newString);
} 
```

产生输出

```
1 - same
2 - same
3 - from list 1
4 - from list 2
5 - from list 2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T07:36:10.050

最干净的选择是使用 Union (LINQ)。要了解它是如何工作的，请查看： http: [//www.dotnetperls.com/union](http://www.dotnetperls.com/union)

# cocoa-touch - iOS uitableview 单元格仅被选中片刻

> ID：11341107
> 
> 赞同：0
> 
> 时间：2012-07-05T09:05:17.917
> 
> 标签：cocoa-touch, ios5

在我的代码中，我想在 UITableView 中选择一个单元格。我在这里执行选择，但是每次应该选择它时，它只会被选择一会儿，然后它就会失去选择。

我做错什么了？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SimpleTableIdentifier"];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"SimpleTableIdentifier"];
    }

    cell.textLabel.text = [[self tableViewArray] objectAtIndex:indexPath.row];

    if(indexPath.row == self.selectedTopicIndex)
    {
        NSLog(@"DIE DIE DIE DIE DIE!!!");
        [cell setSelected:YES];
        [cell setSelectionStyle:UITableViewCellSelectionStyleBlue];
        [cell setSelected:YES];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:43:47.023

只需将您的选择逻辑移动到`-tableView:willDisplayCell:forRowAtIndexPath:`方法中。像这样的东西：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(indexPath.row == self.selectedTopicIndex)
    {
        NSLog(@"DIE DIE DIE DIE DIE!!!");
        [cell setSelectionStyle:UITableViewCellSelectionStyleBlue];
        [cell setSelected:YES];
    }
} 
```

# c# - Jquery datepicker - 仅每秒触发一次单击事件

> ID：11341110
> 
> 赞同：0
> 
> 时间：2012-07-05T09:05:27.010
> 
> 标签：c#, jquery, asp.net

我有一个带有 jqueryui datepicker 控件的页面。在每天的选择中，我使用 ajax 发布到一个 web 方法来进行一些服务器端数据填充，以填充日历控件下方的下拉框。

我已经在两页上使用了这段代码，第一次工作完美，但这个代码有问题。我第一次选择日期时，事件触发正常，第二次没有任何反应，然后下一次点击再次正常工作。因此，该事件仅在每第二次点击时触发，无论是同一日期还是不同日期。我添加了一个输入控件来捕获日期选择，它适用于每个选择。

现在让我烦恼的是，如果我在我的 select jquery 函数中添加一个警报，它每次都会触发，把它拿出来，我又遇到了这个问题。

谢谢

标记：

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="Site.Master" CodeBehind="calendartest.aspx.cs"  Inherits="Test.calendartest" EnableEventValidation="false" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <script type="text/javascript">
        $(function() {
            $('#datepicker').datepicker({
                onSelect: function(dateStr, inst) {

                    document.getElementById('<%= hSelectedDate.ClientID %>').value = dateStr;
                    var hubid = 2; 

                    $('#<%=ddlAvailableTimes.ClientID %>').empty().append('<option selected="selected" value="0">Loading...</option>');

                    $.ajax
                        ({
                            type: "POST",
                            url: "UserCP.aspx/PopulateAvailableTimeSlots",
                            data: ("{date:'" + dateStr + "', hubid:'" + hubid + "'}"),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: OnTimeSlotsPopulated
                        });

                    $("#datepicker_value").val(dateStr);
                }
            });
        });

        function OnTimeSlotsPopulated(response) {
            PopulateControl(response.d, $("#<%=ddlAvailableTimes.ClientID %>"));
        }

        function PopulateControl(list, control) {
            if (list.length > 0) {
                control.removeAttr("disabled");
                control.empty().append('<option selected="selected" value="0">--Select Time Slot--</option>');
                $.each(list, function() {
                    control.append($("<option></option>").val(this['Value']).html(this['Text']));
                });
            }
            else {
                $("#<%=ddlAvailableTimes.ClientID%>").attr("disabled", "disabled");
                control.empty().append('<option selected="selected" value="0">--No Slots Available--<option>');
            }
        }
    </script>

    <input id="hSelectedDate" type="hidden" value="" runat="server" />
    <input id="hfHub" type="hidden" value="" runat="server" />
    <table style="width: 290px" cellpadding="0" cellspacing="0" 
        align="center">
        <tr>
            <td align="center">
                <div id="datepicker">
                </div>
                <asp:DropDownList ID="ddlAvailableTimes" runat="server"  Width="192px" Enabled="false">
                    <asp:ListItem Text="--Select Time Slot--" Value="0"></asp:ListItem>
                </asp:DropDownList>             
                    <input id="datepicker_value" />
            </td>
        </tr>       
    </table>
</asp:Content> 
```

服务器端：

```
public partial class calendartest : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    [WebMethod]
    public static ArrayList PopulateAvailableTimeSlots(string date, string hubid)
    {
      ArrayList list = new ArrayList();
      //Do stuff here
      return list;
    }
  } 
```

HTML 输出：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link href="css/master.css" rel="stylesheet" type="text/css" />
    <link href="themes/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="themes/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="/Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery-ui-1.8.20.custom.min.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.ui.core.js"></script>
    <script type="text/javascript" src="/Scripts/jquery.ui.datepicker.js"></script>
    <title>Test</title>
</head>
<body>
    <form name="aspnetForm" method="post" action="calendartest.aspx" id="aspnetForm">
    <script type="text/javascript">
        $(function() {
            $('#datepicker').datepicker({
                onSelect: function(dateStr, inst) {
                    document.getElementById('ctl00_MainContent_hSelectedDate').value = dateStr;
                    var hubid = 2; 
                    $('#ctl00_MainContent_ddlAvailableTimes').empty().append('<option selected="selected" value="0">Loading...</option>');

                    $.ajax
                        ({
                            type: "POST",
                            url: "UserCP.aspx/PopulateAvailableTimeSlots",
                            data: ("{date:'" + dateStr + "', hubid:'" + hubid + "'}"),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: OnTimeSlotsPopulated
                        });
                    $("#datepicker_value").val(dateStr);
                }
            });
        });

        function OnTimeSlotsPopulated(response) {
            PopulateControl(response.d, $("#ctl00_MainContent_ddlAvailableTimes"));
        }

        function PopulateControl(list, control) {
            if (list.length > 0) {
                control.removeAttr("disabled");
                control.empty().append('<option selected="selected" value="0">--Select Time Slot--</option>');
                $.each(list, function() {
                    control.append($("<option></option>").val(this['Value']).html(this['Text']));
                });
            }
            else {
                $("#ctl00_MainContent_ddlAvailableTimes").attr("disabled", "disabled");

                control.empty().append('<option selected="selected" value="0">--No Slots Available--<option>');
            }
        }
    </script>

    <input name="ctl00$MainContent$hSelectedDate" type="hidden" id="ctl00_MainContent_hSelectedDate" />
    <input name="ctl00$MainContent$hfHub" type="hidden" id="ctl00_MainContent_hfHub" />

    <table style="width: 290px" cellpadding="0" cellspacing="0" align="center">
        <tr>
            <td align="center">
                <div id="datepicker">
                </div>
                <select name="ctl00$MainContent$ddlAvailableTimes" id="ctl00_MainContent_ddlAvailableTimes" disabled="disabled" style="width:192px;">
                <option selected="selected" value="0">--Select Time Slot--</option>
                </select>             
                    <input id="datepicker_value" />
            </td>
        </tr>       
    </table>
</form>
</body>
</html> 
```

# python - 在 plone 我怎样才能使上传的文件不可下载？

> ID：11341112
> 
> 赞同：1
> 
> 时间：2012-07-05T09:05:35.373
> 
> 标签：python, plone

我希望上传的文件内容只能在浏览器上查看，即对 doc/xls/pdf 文件使用 atreal.richfile.preview。该文件不应不惜一切代价下载。如何删除该文件夹中所有文件的特定文件夹中模板的超链接？我使用 Plone 4.1 有 AT at_download。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:02:07.273

加州酒店的提示音：“你可以随时退房，但你永远不能离开。”

您并不是真的想禁用所有下载，我相信您真的只想禁用除所有者之外的所有用户的下载。将文件放入没有工具的东西中没有实际用途，以便将它们取出......

...因此您需要通过工作流程解决此问题：

*   使用具有此行为状态的自定义工作流定义（“机密”）。确保在此状态的权限中，“查看”权限不是从上面的文件夹继承的，并检查“所有者”（如果您认为合适，可能还有“经理”）具有“查看”权限。

*   将机密状态设置为文件的默认状态。如果您不希望在整个站点范围内执行此操作，则可以在站点的某些部分中使用工作流程策略支持（“地方性工作流程”）来执行此操作。

如果您希望项目的存在可见，但下载不可见，建议您创建自定义权限和自定义类型，以使用“查看”以外的权限保护下载（但您仍应使用工作流状态作为权限到角色映射模板）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:22:27.843

/mysite/portal_skins/archetypes/at_download 处的脚本 (Python) 只需自定义以不包含任何内容。认为这对希望通过共享具有查看权限的文件夹并禁用所创建角色的签出和复制选项来对 Plone 中的文件/图像文件保密的人有所帮助

# django-forms - 单独打印重复的 Django 表单字段

> ID：11341118
> 
> 赞同：0
> 
> 时间：2012-07-05T09:06:00.117
> 
> 标签：django-forms

我有一个 Django 表单的困境。在模板中呈现表单时，我通常更喜欢单独打印表单字段，而不是使用 form.as_p 注释。但是，在我正在处理的表单中，我有一组重复次数未知的字段。例如，如果有 3 个项目正在编辑，则字段将是：

field_name_1
field_email_1

field_name_2
field_email_2

field_name_3
field_email_3

但是我事先不知道项目的数量。为了解决这个问题，我在**init**函数的循环中创建字段，那里没有问题。但是我想不出一种在模板中单独打印字段的方法，因为我不知道每个字段的全名。如果这是我唯一的问题，我可以使用 form.as_p 语法，没什么大不了的。但我还想在每组字段的开头添加一些 html，这样结果将是：

**添加值 1：**
field_name_1
field_email_1

**添加值 2：**
field_name_2
field_email_2

**添加值 3：**
field_name_3
field_email_3

但是，我还没有找到一种在 Django 代码中将任意 html 插入表单的方法，类似于 Drupal 表单中的#markup。所以：

1.  有没有办法单独打印字段，以便我可以将额外的 html 放入模板中？（我在这里缺少的是确切的语法）
2.  如果没有，如何将额外的 html 插入表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:09.920

你的意思是在模板中是这样的吗？：

```
{% for field in form %}
<div class="fieldWrapper">
    {{ field.errors }}
    {{ field.label_tag }}: {{ field }}
</div>
{% endfor %} 
```

（来自 Django 文档：[https](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#looping-over-hidden-and-visible-fields) ://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#looping-over-hidden-and-visible-fields ）

您可以使用以下内容呈现标题：添加值 {{forloop.counter}}：

# database - 数据库中的大量时间课程

> ID：11341119
> 
> 赞同：1
> 
> 时间：2012-07-05T09:06:02.733
> 
> 标签：database, oracle, compression

我有相当多的数据（约 400 个 mio 数据点），它们组织在一组约 100,000 个时间课程中。该数据可能每天都在变化，出于修订安全的原因，必须每天存档。

显然我们在谈论太多数据无法有效处理，所以我对样本数据进行了一些分析。大约。两天之间，60% 到 80% 的课程完全没有变化，其余的只有非常有限的元素变化。总而言之，我预计少于 10 个 mio 数据点的变化。

问题是，我如何利用这些知识？我知道 SVN 使用的 Delta-Trees 和类似技术之类的概念，但是我更愿意，如果数据库本身能够处理这种语义压缩。我们使用 Oracle 11g 进行存储，问题是，有没有比自制解决方案更好的方法？

**澄清**

我说的是代表每小时能量流的时间进程。这样的时间进程可能开始于过去（如 2005 年），每年包含 8760 个元素，并且可能在 2020 年之前的任何时间结束（目前）。每个时间课程由一个唯一的字符串标识。

课程本身或多或少有些无聊：“Course_XXX: 1.1.2005 0:00 5; 1.1.2005 1:00 5;1.1.2005 2:00 7,5;...”

我的任务是使这些课程中的日常更改可见，为此，必须每天在给定时间拍摄快照。我的希望是，一些无损语义压缩将使我免于每天归档约 20GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:33:15.537

基本上我的源数据如下所示：

```
Key | Value0 | ... | Value23 
```

要存档该数据，我需要添加一个附加维度，该维度直接或间接告诉我从源系统加载数据的时间，因此我的存档数据库是

```
Key | LoadID | Value0 | ... | Value23 
```

`LoadID`访问源数据库的时间或多或少在哪里。

现在，我的场景中的压缩很容易。LoadIDs 每次运行都在增长，我可以给出一个范围，即

```
Key | LoadID1 | LoadID2 | Value0 | ... | Value23 
```

其中 LoadID1 给了我第一个负载的 ID，其中观察到了 24 个值，LoadID2 给了我最后一个连续负载的 ID，其中观察到了 24 个值。

在我的场景中，这将存储在数据库中的数据量减少到 1/30

# ruby-on-rails - 如何在lib和model中获取restful资源的url

> ID：11341120
> 
> 赞同：1
> 
> 时间：2012-07-05T09:06:07.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 路由 url 助手（例如`item_url(1)`）可以在视图中访问。但是，我经常需要视图之外的资源 url。例如，我需要使用 url 从 goo.gl 生成缩短的 url，并且我还需要将 url 传递给 Facebook 以获取评论计数。

我也有自定义助手，它包含内置路由 url 助手。我也想在 lib/model 中使用这些。

我知道生成 _url 需要**请求**对象。所以我可以接受在某处硬编码服务器域以生成完整的 url。

如何从 lib 或模型中获取 url/调用路由 url helper？我还需要在 lib 类方法中访问它。

**我读过的类似问题：**

[Rails：如何在 lib 的单独类中使用帮助程序](https://stackoverflow.com/questions/896134/rails-how-do-i-use-helpers-in-a-separate-class-in-lib)，该解决方案不适用于 lib 类的类方法。

[Lib 类中的用户辅助函数](https://stackoverflow.com/questions/5178729/user-helper-functions-in-lib-classes)，没有明确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:07:32.977

只需将其添加到顶部或您的 lib / model

```
include Rails.application.routes.url_helpers 
```

# twitter-bootstrap - 捕获隐藏事件手风琴引导不起作用

> ID：11341121
> 
> 赞同：1
> 
> 时间：2012-07-05T09:06:08.727
> 
> 标签：twitter-bootstrap

我正在为我的网络使用引导程序，并在一个部分中添加了手风琴组件。我想捕捉手风琴的隐藏事件，但这不起作用。

```
$('#myCollapse').on('hidden', function(){ ...code... }) 
```

根据[文档](http://twitter.github.com/bootstrap/javascript.html#collapse)，以这种方式捕获隐藏事件，但它不起作用。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:35:35.280

你安装了Transitions的插件吗？动画事件 (`hidden`和`shown`) 需要它，否则您可以使用“静态”事件 (`hide`和`show`)，它们不会等到过渡结束才能启动。

# php - 使用 foreach 循环将多维数组值抓取到表中

> ID：11341122
> 
> 赞同：1
> 
> 时间：2012-07-05T09:06:08.803
> 
> 标签：php, multidimensional-array, html-table

这是我的代码；到时候我会告诉你这个问题。

```
<?php
//checking for perfect loging
 session_start();
$user_name = $_SESSION['username'];
$user_pass = $_SESSION['password'];
require ("connection.php");
if ( $user_name == '' ) {
header('location:home.php');
exit();
}
/////////////////////////////////////
?>

<?php 
//collecting posted variables by pressing addanother button
if(isset($_POST['adnother'])) {
  $date = $_POST['date'];
  $billnmbr = $_POST['billnmbr'];
  $itemcode = $_POST['itemcode'];
  $itemname = $_POST['itemname'];
  $exdate = $_POST['exdate'];   
  $eachprice = $_POST['eachprice']; 
  $itmtotal = $_POST['itmtotal'];
  $wasFound=false;
  $i=0; 
// check for >>>>>>>>>>> if the session bill_array  array  is not set or cart array is empty <<<<<<<<<<<<<<<
    if(!isset($_SESSION["bill_array"]) || count($_SESSION["bill_array"]) < 1 ) {
        // Run if the bill_array is empty or not set
        $_SESSION["bill_array"]= array(1 => array("date"=> $date, "billnmbr"=> $billnmbr, "itemcode"=> $itemcode, "itemname"=> $itemname, "exdate"=> $exdate, "eachprice"=> $eachprice, "itmtotal"=> $itmtotal));
    } else {
        // Run if the bill has at least one item in it
        foreach($_SESSION["bill_array"] as $each_item) {
            $i++;
            while(list($key,$value)=each($each_item)){
                if($key=="itemcode" && $value == $itemcode){
                    // That item is in cart already so push a error message in to screen
                    $wasFound = true;
                    ?>
                    <script type="text/javascript">
                    var error = "<?= $wasFound ?>";
                    if(error == "true") {
                        alert("You trying to add same item twice")
                    }
                    </script>
                    <?php 
                    }//close if condition
            }//close while loop
        }//close foreach loop
//if the next item is not in the bill and then add it to the bill_array     
if($wasFound==false){
    array_push($_SESSION["bill_array"],array("date"=> $date, "billnmbr"=> $billnmbr, "itemcode"=> $itemcode, "itemname"=> $itemname, "exdate"=> $exdate, "eachprice"=> $eachprice, "itmtotal"=> $itmtotal));
}//clos if condition
    }//close else statment
        }//close ifisset
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Front-end Billing</title>
<link href="main.css" rel="stylesheet" type="text/css" media="all" />
<style type="text/css">
.mainheder {
    font-size: 36px;
    font-weight: bolder;
    color: #00C;
    text-align: center;
}
#headertopic {
    position:absolute;
    left:304px;
    top:1px;
    width:395px;
    height:44px;
    z-index:1;
    background-color: #999900;
}
#mainmenue {
    position:absolute;
    left:208px;
    top:78px;
    width:614px;
    height:48px;
    z-index:10000;
}
#dateandtime {
    position:absolute;
    left:790px;
    top:251px;
    width:208px;
    height:82px;
    z-index:1;
}
#redcross {
    position:absolute;
    left:377px;
    top:321px;
    width:247px;
    height:239px;
    z-index:0;
}
#usrlogin {
    position:absolute;
    left:4px;
    top:216px;
    width:265px;
    height:184px;
    z-index:1;
}
#address {
    position:absolute;
    left:2px;
    top:462px;
    width:204px;
    height:155px;
    z-index:2;
}

#logdas {
    position:absolute;
    left:10px;
    top:92px;
    width:197px;
    height:58px;
    z-index:1;
}
.logdas {
    font-weight: bold;
    color: #00F;
}
#pagetheam {
    position:absolute;
    left:332px;
    top:49px;
    width:341px;
    height:24px;
    z-index:1;
    text-align: center;
    font-size: 18px;
    font-weight: bolder;
    color: #0CF;
    text-decoration: underline;
}
#billingitems {
    position:absolute;
    left:11px;
    top:186px;
    width:489px;
    height:293px;
    z-index:1;
}
#printlayout {
    position:absolute;
    left:531px;
    top:186px;
    width:211px;
    height:322px;
    z-index:1;
    text-align: center;
}
.printlayoutshopname {
    font-size: 14px;
    font-weight: bold;
    color: #000;
}
.billaddrs {
    font-size: 10px;
}
.bilnmbr {
    font-size: 10px;
    font-weight: bold;
    text-align: left;
}
</style></head>
<body>
<div id="wrap">
<div id="headertopic" class="mainheder">Accoutnig for Phamacy</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="mainmenue"> <?php // include 'index.html' ;?> </div>
<div id="logdas"><p class="logdas">Logged in as :  <?php echo $user_name; ?></p>
  <p class="logdas">Date : <?php echo date("Y-m-d") ?></p>
</div>
<div id="pagetheam">Front-end Billing </div>
<div id="billingitems">
<form id="form1" name="form1" method="post" action="biling.php">
<?php $data = mysql_query("SELECT * FROM billnumber ") ;
      $info = mysql_fetch_array( $data ); 
      $oldnumber = $info['bill_number'];
      $oldnumber= $oldnumber + 1;
      $Transaction_number = "PM". $oldnumber ;

?>
  <table width="490" height="282" border="0">
  <tr>
      <td width="160"><input type="hidden" name="date" id="date" value=" <?php echo date("Y-m-d") ?> " /><?php echo date("Y-m-d") ?></td>
      <td width="47">&nbsp;</td>
      <td width="69">&nbsp;</td>
    </tr>
    <tr>
      <td width="206">Bill Number</td>
      <td width="160"><input type="hidden" name="billnmbr" id="billnmbr" value="<?php  echo $Transaction_number; ?>" /><?php  echo $Transaction_number; ?></td>
      <td width="47">&nbsp;</td>
      <td width="69">&nbsp;</td>
    </tr>
    <tr>
      <td>Item Code</td>
      <td><input type="text" name="itemcode" id="itemcode" tabindex="1" /></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Item Name</td>
      <td><input type="text" name="itemname" id="itemname" tabindex="2" /></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Expier Date</td>
      <td><input type="text" name="exdate" id="exdate" /></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>Item Price</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>Each : 
        <input type="text" name="eachprice" id="eachprice" /></td>
      <td>Total : 
        <input type="text" name="itmtotal" id="itmtotal" /></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input type="submit" name="adnother" id="adnother" value="add another item" tabindex="5" /></td>
      <td><input type="submit" name="submit" id="submit" value="Submit" /></td>
      <td>&nbsp;</td>
    </tr>
</table>
  </form>
</div>
<div id="printlayout">
<p><span class="printlayoutshopname">Yasitha Pharacy<br />
  </span><span class="billaddrs">22,Colombathanthiri Mawatha, Ethulkotte, Kotte.</span></p>
<table width="211" border="0">
  <tr>
    <td width="103"><span class="bilnmbr">Bill No: <?php  echo $Transaction_number; ?></span></td>
    <td colspan="2" class="bilnmbr">Date: <?php echo date("Y-m-d") ?></td>
    </tr>
     <?php 
     if(isset($_POST['adnother'])) {
  //taking items in the bill to variables if the bill_array is not empty.

$cartOutput="";
if(!isset($_SESSION["bill_array"]) || count($_SESSION["bill_array"]) < 1 ) {
    $cartOutput = "<h2 align='center'> Bill is still empty </hd>";
}
else {
    $i = 0;
    foreach ($_SESSION["bill_array"]as $each_item ): ?>

  <tr>
    <td class="bilnmbr">Item code: </td>
    <td colspan="2" class="bilnmbr"><?php echo $each_item['itemcode']; ?></td>
    </tr>
  <tr>
    <td colspan="3" class="bilnmbr">Item Name:</td>
    </tr>
  <tr>
    <td colspan="3" class="bilnmbr"><?php echo $each_item['itemname']; ?></td>
    </tr>
  <tr class="bilnmbr">
    <td>Each</td>
    <td width="98">Qty</td>
    <td width="98">Total</td>
  </tr>
  <tr class="bilnmbr">
    <td><?php echo $each_item['eachprice']; ?></td>
    <td>20</td>
    <td><?php echo $each_item['itmtotal']; ?></td>
  </tr>
</table>

<?php endforeach; ?>
<?php
    }
     }
////////////////////////////////////////

?>
<p>

</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<?php //closing div for wrapper?>
</div> 
</body>
</html> 
```

我使用二维数组将项目详细信息插入会话数组，在插入项目后，我希望其详细信息显示在单独的表（右侧）中，当我添加正在查看的项目时，一个项目没有问题在完美的地方，但是当我添加第二个项目时，它会在该表下方而不创建新行。我所做的有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:00:02.050

我发现我的错误我像这样结束了我的 foreach 循环

```
</tr>
</table>
  <?php endforeach; 

    }
     }
////////////////////////////////////////

?> 
```

但现在我改正了这种方式

```
</tr>
  <?php endforeach; 

    }
     }
////////////////////////////////////////

?>
</table> 
```

现在一切都好……谢谢你们为我的愚蠢错误浪费时间……对不起……:(

# ios - iOS：如何检查标签是否存在于某个区域？

> ID：11341123
> 
> 赞同：0
> 
> 时间：2012-07-05T09:06:10.490
> 
> 标签：ios, label, intersection

在我的应用程序中，我包含了许多不同的标签（它们代表街道名称）。因此，我做了一些计算，以正确的角度和正确的位置显示它们。现在我想检查在我想要包含新标签的区域中是否存在具有相同文本的现有标签，但我不确定如何管理它。我可以检查十字路口吗？

我期待着帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:05:20.507

您可以`UILabel`通过`UIView`以下方式获取 -

```
for (id view in self.view.subviews) {
    if ([view isKindOfClass:[UILabel class]]) {
        UILabel *label = (UILabel *) view;
    }
} 
```

# java - 协议特定的通道处理程序

> ID：11341130
> 
> 赞同：0
> 
> 时间：2012-07-05T09:06:26.630
> 
> 标签：java, netty

我正在编写一个应用程序服务器，它将接收来自网络的**SIP**和**DNS**消息。

当我收到来自网络的消息时，我从文档中了解到，起初，我收到一个`ChannelBuffer`. 我想确定已收到哪种消息（SIP 或 DNS）并对其进行解码。

要确定消息类型，我可以将端口专用于每种类型的消息，但我很想知道是否存在另一种解决方案。我的问题更多是关于如何解码`ChannelBuffer`.

Netty是否`ChannelHandler`提供解码 SIP 或 DNS 消息？如果不是，那么在类型层次结构中编写我的自定义的正确位置是什么`ChannelHandler`什么？

为了说明我的问题，让我们以 为例`HttpRequestDecoder`，层次结构是：

```
java.lang.Object
    org.jboss.netty.channel.SimpleChannelUpstreamHandler
        org.jboss.netty.handler.codec.frame.FrameDecoder
            org.jboss.netty.handler.codec.replay.ReplayingDecoder<HttpMessageDecoder.State>
                org.jboss.netty.handler.codec.http.HttpMessageDecoder
                    org.jboss.netty.handler.codec.http.HttpRequestDecoder 
```

另外，我是否需要使用两个不同`ChannelHandler`的解码和编码，或者是否有可能使用单个`ChannelHandler`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:42:44.143

如果您确实需要端口统一（[此处](http://static.netty.io/3.5/xref/)是一个示例），即在同一端口上接收不同的协议，那么您必须在处理程序中检测协议并采取适当的措施。可以像在管道中插入不同的处理程序一样简单。

但是，我发现 SIP 和 DNS 不太可能共享同一个端口，因此无需使事情复杂化。

我还没有看到 Netty 的 SIP 解码器/编码器，但是根据您想要对消息执行的操作，HTTP 解码器是一个非常好的起点（并且可以变得更简单，因为 SIP 不支持分块）。

我强烈建议不要尝试在一个处理程序中组合 DNS 和 SIP 解码（或任何其他组合）。使处理程序尽可能简单和连贯。如果需要，可以合并处理程序。

# c - 线程处理

> ID：11341131
> 
> 赞同：4
> 
> 时间：2012-07-05T09:06:26.713
> 
> 标签：c, multithreading, exception-handling

假设一个线程 A 创建了一个线程 B 并且在一段时间后线程 B 因问题而崩溃，是否有可能将控制移回 C 语言中的线程 A。一种特殊的处理方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:13:27.667

不。“控制权传回”根本没有多大意义，因为它们无论如何都是独立执行的——通常，线程 A 不会坐等线程 B 完成，但它会做一些事情别的。

顺便说一句，线程当然可以检查另一个线程是否仍在运行。检查您的线程库或您正在使用的系统函数。

但是，这只适用于可以称为“软崩溃”的情况；许多崩溃不仅仅是线程做坏事，例如杀死整个进程的硬件异常或破坏内存。因此，尝试在另一个线程中捕获崩溃将是大量的工作，但几乎没有什么好处，如果有的话。最好花时间修复崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T09:08:36.107

不，它们是独立的执行线程。一旦线程 A 创建并启动了线程 B，A 和 B 都可以独立执行*。*

当然如果线程 B 整个进程都崩溃了，线程 A 就不会再存在了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:43:42.563

线程不能调用其他线程，只能向它们发出信号。“正常”函数/方法调用/返回机制是基于堆栈的，每个线程都有自己的堆栈，（多个线程使用不同的堆栈自动变量运行完全相同的代码是很常见的）。

如果一个线程不能调用另一个线程，那么也没有从一个线程到另一个线程的“返回”。

# jquery - 我想在 p 标签中插入一个文本，通过 jquery 返回字符串 tinyMCE

> ID：11341132
> 
> 赞同：1
> 
> 时间：2012-07-05T09:06:34.210
> 
> 标签：jquery

我想通过以下代码在从 tinyMCE 返回的最后一个 p 标记中插入一个文本

```
 var html = tinyMCE.activeEditor.getContent();
For this I am using the following jquery code

tinyMCE.init({
               mode : "textareas",
               theme : "advanced"
       });

       $(document).ready(function(){
   $("a[title='click_to_add']").click(function() {
               var html = tinyMCE.activeEditor.getContent();
               html = $("#p:last").text();
               alert(html);

               name = $(this).html();

               content = html+" "+name;

               tinyMCE.activeEditor.setContent(content);
               return false;
               });
       }); 
```

但它不起作用。下面给出了 HTML 代码

```
<div style="float:left;">
       <textarea id="mail_body" name="mail_body" rows="15" cols="80" style="width:575px;"></textarea>

       </div>
       <div id="aaa">
           <a href="#" id="news_user" title="click_to_add"> < name > </a>
   </div> 
```

请给我们一个解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:14:06.583

为什么

```
#p 
```

你只会得到一个名为“p”的**id 。**

尝试这个 ：

```
$("p:last") 
```

# android - 360 度后停止图像旋转

> ID：11341135
> 
> 赞同：7
> 
> 时间：2012-07-05T09:06:46.373
> 
> 标签：android, rotational-matrices

我正在尝试将图像从其中心点旋转一圈，但我无法在所需位置停止，因为我可以进行旋转，但我想在`360'(1 round)`.

```
public class RotateRoundActivity extends Activity implements OnTouchListener
{

    private ImageView dialer;
    //private float y=0;
    private float x=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        dialer = (ImageView) findViewById(R.id.big_button);
        dialer.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
    //  double r=Math.atan2(event.getX()-dialer.getWidth()/2, dialer.getHeight()/2-event.getY());

        double r=Math.atan2(event.getX()-dialer.getWidth()/2, dialer.getHeight()/2-event.getY());
        int rotation=(int)Math.toDegrees(r);
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                x=event.getX();
              //  y=event.getY();
                updateRotation(rotation);
                break;
            case MotionEvent.ACTION_UP:
                break;
        }//switch       

        return true;
    } 
```

*旋转方式@*

```
 private void updateRotation(double rot){
        float newRot=new Float(rot);
        Bitmap bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher);
        Matrix matrix=new Matrix();
        matrix.postRotate(newRot,bitmap.getWidth(),bitmap.getHeight());
        Log.i("demo===>", "matrix==>" + matrix);
     //   Log.i("demo===", "y===>" + y);
        Log.i("demo===", "x===>" + x);

        if(x>250){
            Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
            dialer.setImageBitmap(reDrawnBitmap);
        }
        else{
            Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
            dialer.setImageBitmap(reDrawnBitmap);
        }
    }

} 
```

你的建议是可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:15:40.657

您必须保存以前的`rot`值。并添加签入`updateRotation`方法，如果`previousRot`在 360' 度的左侧并且`rot`在 360' 度的右侧，那么我们进行了 1 轮并需要停止旋转。

顺时针案例的示例代码

```
if (previousRot >= 300 && previousRot <= 360 && rot >= 0 && rot <= 60) {
    rot = 359.99; // or here can be 360'
} 
```

对于逆时针情况，它几乎相同，但值交换了

```
if (previousRot >= 0 && previousRot <= 60 && rot >= 300 && rot <= 360) {
    rot = 0;
} 
```

此代码将停止旋转。从一开始`previousRot`应该是 0 顺时针的情况和 359.99 逆时针

* * *

另一种方法是再添加一个变量来存储总行驶角度。从一开始`traveledAngle`就必须等于 0。如果你按顺时针方向旋转，你必须通过 和 之间的差来增加`rot`它`previousRot`。逆时针旋转时，将其减小相同的值。

```
traveledAngle += rot - previousRot; 
```

当`traveledAngle`大于 360' 时需要停止顺时针方向旋转，当小于 0 时需要停止逆时针方向旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T14:12:37.447

我已经使用了您的演示并添加了一些逻辑，较新的演示如下：

```
public class RotateRoundActivity extends Activity implements OnTouchListener {
    float rot1=0.0F, rot2=0.0F;
    boolean clockwise, rotationDone = false, halfrotated = false;
    int rotcall=0;

    private ImageView dialer;
    //private float y=0;
    private int x=0;
    //private int y=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        dialer = (ImageView) findViewById(R.id.big_button);
        dialer.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
    //  double r=Math.atan2(event.getX()-dialer.getWidth()/2, dialer.getHeight()/2-event.getY());
        double r=Math.atan2(event.getX()-dialer.getWidth()/2, dialer.getHeight()/2-event.getY());
        int rotation=(int)Math.toDegrees(r);
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                x=(int) event.getX();
                //y=(int) event.getY();
                updateRotation(rotation);
                break;
            case MotionEvent.ACTION_UP:
                break;
        }//switch       

        return true;
    }

    private void updateRotation(double rot){
        float newRot = new Float(rot);

        rotcall++;
        if(rotcall == 1)
            rot1 = new Float(rot);
        if(rotcall == 2)
            rot2 = new Float(rot);
        if(rot1 != 0.0F && rot2 != 0.0F)
            if(rot1 < rot2)
                clockwise = true;
            else
                clockwise = false;
        System.out.println("Rotate :: "+newRot);

        if(clockwise && rot1>=0 ) {
            if(newRot < 0)
                halfrotated = true;
            if(halfrotated && newRot > 0)
                rotationDone = true;
            if(rotationDone)
                newRot = 0;
        }
        if(clockwise && rot1<0) {
            if(newRot > 0)
                halfrotated = true;
            if(halfrotated && newRot < 0)
                rotationDone = true;
            if(rotationDone)
                newRot = 0;
        }
        if(!clockwise && rot1<0) {
            if(newRot > 0)
                halfrotated = true;
            if(halfrotated && newRot < 0)
                rotationDone = true;
            if(rotationDone)
                newRot = 0;
        }
        if(!clockwise && rot1>=0) {
            if(newRot < 0)
                halfrotated = true;
            if(halfrotated && newRot > 0)
                rotationDone = true;
            if(rotationDone)
                newRot = 0;
        }

        System.out.println("Rotation Done :: "+rotationDone);

        if(!rotationDone) {
            //BitmapDrawable bitmapDrawable = (BitmapDrawable) dialer.getDrawable();
            //Bitmap bitmap = bitmapDrawable.getBitmap();
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.  YOUR_DRBL  );
            int width = bitmap.getWidth();
            int height = bitmap.getHeight();
            Matrix matrix = new Matrix();
            matrix.postRotate(newRot, width, height);
            System.out.println("x===>" + x);
            //System.out.println("y===>" + y);

            //if (x > 250) {
                Bitmap reDrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0, width, height, matrix, true);
                dialer.setImageBitmap(reDrawnBitmap);
            /*} else {
                Bitmap reDrawnBitmap = Bitmap.createBitmap(bitmap, 0, 0,
                        width, height, matrix, true);
                dialer.setImageBitmap(reDrawnBitmap);
            }*/
        }
    }

} 
```

# ruby-on-rails-3 - 如何告诉 Rails RSpec 规范是“类型助手”

> ID：11341136
> 
> 赞同：0
> 
> 时间：2012-07-05T09:06:52.137
> 
> 标签：ruby-on-rails-3, rspec, rspec2, simple-form, rspec-rails

我编写了位于**app/inputs/something_input.rb中的 *simple_form* 输入扩展**

我正在尝试为此编写 RSpec。当我将此规范放入**spec/helpers/application_helper_spec.rb**时，一切正常，没有一个问题。

```
# spec/helpers/application_helper_spec.rb
require 'spec_helper'
describe ApplicationHelper do
  it do
    helper.simple_form_for @foo,:method=>'get', :url=>helper.users_path do |f|
      f.input :created_at, :as =>:custom_datepicker
    end.should =~ /something/
  end
end 
```

现在我正在尝试将该规范移至**spec/inputs/something_input_spec.rb**所以它将是相似的名称路径。

```
# spec/imputs/something_input_spec.rb
require 'spec_helper'
describe SomethingInput do
  it do
    helper.simple_form_for @foo,:method=>'get', :url=>helper.users_path do |f|
      f.input :created_at, :as =>:custom_datepicker
    end.should =~ /something/
  end
end
#
#ERROR:   undefined local variable or method `helper' for #<RSpec::Core::ExampleGroup 
```

我想告诉 RSpec 将这个文件作为**类型帮助规范**来威胁的事情，所以我将拥有所有*RSpec::Rails::HelperExampleGroup*功能都可用的*帮助方法*

 *... 我怎样才能做到这一点 ？？

我试图用*RSpec::Rails::HelperExampleGroup*扩展/包含它似乎没有任何效果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T04:11:22.360

使用以下类型启动描述块`:helper`：

```
describe SomethingInput, :type => :helper do
  ... tests ...
end 
```*

# jsf-2 - 如何防止在 JSF 2.0 中使用 GET 方法提交表单？

> ID：11341145
> 
> 赞同：1
> 
> 时间：2012-07-05T09:07:31.333
> 
> 标签：jsf-2

我正在为 IBM Webshere 7.0 开发 JSF 2.0 应用程序，出于安全原因，我想阻止用户使用 GET 方法提交表单，即用户将无法提交将表单值附加到查询字符串的表单。

是否有任何简单的解决方案，或者我需要构建过滤器来防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:11:54.540

当您使用 JSF`<h:form>`时，默认情况下会发出 POST 请求。即使发送了 Query 字符串，由于提交方法是 POST，因此结果不会作为查询字符串发送，即不会添加到表单的操作 URL 中。相反，该字符串作为 HTTP 请求的主体发送，并且将调用 FacesServlet 的 doPost() 方法。

也可以看看：

*   [从 Facelets 调用 servlet 的正确方法？](https://stackoverflow.com/questions/10175963/proper-way-to-call-servlet-from-facelets/10176840#10176840)
*   [http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)

# php - XDebug 已安装，但未在 phpinfo() 中显示且不起作用

> ID：11341148
> 
> 赞同：1
> 
> 时间：2012-07-05T09:07:43.857
> 
> 标签：php, ubuntu, netbeans, xdebug

我正在尝试让 Ne​​tBeans 的 php 调试器在 Ubuntu 中工作。当我尝试启动调试会话时，它会永远尝试建立连接，但最终它给了我一条错误消息，说没有与 netbeans-xdebug 的连接可用。我已经安装了 php5-xdebug，但是当我尝试使用 phpinfo() 查看它时，它没有显示。我的 php/apache2/php.ini 有这些代码行：

```
zend_extension=/usr/lib/php5/20090626/xdebug.so
[debug]
; Remote settings
xdebug.remote_autostart=off
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.idekey="netbeans-xdebug"

; General
xdebug.auto_trace=off
xdebug.collect_includes=on
xdebug.collect_params=off
xdebug.collect_return=off
xdebug.default_enable=on
xdebug.extended_info=1
xdebug.manual_url=http://www.php.net
xdebug.show_local_vars=0
xdebug.show_mem_delta=0
xdebug.max_nesting_level=100
;xdebug.idekey=

; Trace options
xdebug.trace_format=0
xdebug.trace_output_dir=/tmp
xdebug.trace_options=0
xdebug.trace_output_name=crc32

; Profiling
xdebug.profiler_append=0
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=0
xdebug.profiler_output_dir=/tmp
xdebug.profiler_output_name=crc32 
```

如您所见，我试图自己解决它，但我无法让它发挥作用。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T12:15:41.770

首先使用 ubuntu 中的流动命令行找出调用 php.ini 的位置：

```
php -i |grep "php.ini" 
```

您可以测试 xdebug 是否正在使用 php 文件中的以下代码：

```
<?php
function test(){
    echo "Called @ ".xdebug_call_file().
    ":".xdebug_call_line()." from".
    xdebug_call_function();
}
test(); 
```

?>

并像这样运行脚本： php -e myphpfile.php

你会得到类似的东西： Called @ /var/www/testxdebug.php:8 from{main}root@magento b

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:16:09.683

我猜你编辑了错误的 php.ini

如果您的机器是这种情况，我不会，至少在我的机器中， /etc/php5/ 文件夹中有四个目录： /apache2, /apache2fiter, /cli ；有时你需要编辑/apache2filter文件夹下的php.ini文件来激活Xdebug~希望它有效

# android - 强制关闭查看数据库条目：Android

> ID：11341152
> 
> 赞同：1
> 
> 时间：2012-07-05T09:08:06.800
> 
> 标签：android, database, sqlite

在我正在开发的 android 应用程序中，我正在存储一个条目，然后我想查看它。我能够存储条目（代码不会返回任何错误），但是当我尝试查看条目（即所有条目）时，我会强制关闭。请帮我。这是我的代码：

```
package com.ankita.try1;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class viewAttendance extends Activity {

LinearLayout l;
quer q;
@Override
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_attendance);

        l=(LinearLayout)findViewById(R.id.LinearLayout);

        q= new quer(this);
        q.open();
        Cursor c1;
        c1=q.fetchAllTodos();

        long co=1;

        if(c1!=null)
        {
            do
            {
                TextView t;

                Cursor c=q.fetchTodo(co);
                String name = c.getString(c.getColumnIndexOrThrow(quer.KEY_NAME));
                String present = c.getString(c.getColumnIndexOrThrow(quer.KEY_PRESENT));
                String total = c.getString(c.getColumnIndexOrThrow(quer.KEY_TOTAL));

                int a = (Integer.parseInt(present)/Integer.parseInt(total))*100;

                String A = a+"%";

                LayoutParams la=new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                t=new TextView(this);
                t.setLayoutParams(la);
                t.setText(name+"   "+A);                                
                l.addView(t);
                co++;
            }while(co<=c1.getCount());
            q.close();
        }
        else
        {
            q.close();
            Toast.makeText(this, "No Subjects Added", Toast.LENGTH_SHORT).show();
        }

         }

} 
```

这是我的 quer.java （定义了所有函数）：

```
package com.ankita.try1;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import com.ankita.try1.database1;

public class quer 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "name";
    public static final String KEY_PRESENT = "present";
    public static final String KEY_ABSENT = "absent";
    public static final String KEY_TOTAL = "total";

    /*public static final int KEY_PRESENT=0;
    public static final int KEY_ABSENT=0;
    public static final int KEY_TOTAL=0;*/

    private static final String DATABASE_TABLE = "SUBJECT";
    private Context context;
    private SQLiteDatabase database;
    private database1 dbHelper;
    public quer(Context context) 
    {
        this.context = context;
    }

    public quer open() throws SQLException 
    {
        dbHelper = new database1(context);
        database = dbHelper.getWritableDatabase();
        return this;
    }

    public void close() 
    {
        dbHelper.close();
    }
    private ContentValues createContentValues(String name, String present, String absent,String total) 
    {
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name);
        values.put(KEY_PRESENT, present);
        values.put(KEY_ABSENT, absent);
        values.put(KEY_TOTAL, total);
        return values;
    }
    //TO CREATE A ROW
    public long createTodo(String name, String present, String absent,String total) {
        ContentValues initialValues = createContentValues(name, present,absent,total);
                return database.insert(DATABASE_TABLE, null, initialValues);
    }
    //TOI DELETE A ROW
    public boolean deleteTodo(long rowId) 
    {
        return database.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }
    //FETCH ALL ROWS
    public Cursor fetchAllTodos() 
    {
        return database.query(DATABASE_TABLE, new String[] { KEY_ROWID,KEY_NAME, KEY_PRESENT, KEY_ABSENT, KEY_TOTAL}, null, null, null,null, null);
    }
    //UPDATE THE DATABASE
    public boolean updateTodo(long rowId, String name, String present, String absent,String total) 
    {
        ContentValues updateValues = createContentValues(name, present,absent,total);
        return database.update(DATABASE_TABLE, updateValues, KEY_ROWID + "="
                + rowId, null) > 0;
    }
    //FETCH ACC. TO _ID
    public Cursor fetchTodo(long rowId) throws SQLException {
        Cursor mCursor = database.query(true, DATABASE_TABLE, new String[] {
                KEY_ROWID, KEY_NAME, KEY_PRESENT, KEY_ABSENT, KEY_TOTAL },
                KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }
    //FETCH ACC. TO NAME
    public Cursor fetchTodo(String name) throws SQLException {
        Cursor mCursor = database.query(true, DATABASE_TABLE, new String[] {
                KEY_ROWID, KEY_NAME, KEY_PRESENT, KEY_ABSENT, KEY_TOTAL },
                KEY_NAME + "=" + name, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }
} 
```

我无法查看数据库条目，即我没有看到任何正在执行的 viewAttendance 活动 - 我强制关闭 - 我哪里出错了？

这是日志猫：

```
07-05 19:06:16.304: D/AndroidRuntime(29530): Shutting down VM
07-05 19:06:16.304: W/dalvikvm(29530): threadid=1: thread exiting with uncaught exception (group=0x40018578)
07-05 19:06:16.328: E/AndroidRuntime(29530): FATAL EXCEPTION: main
07-05 19:06:16.328: E/AndroidRuntime(29530): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ankita.try1/com.ankita.try1.viewAttendance}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.os.Looper.loop(Looper.java:130)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at java.lang.reflect.Method.invoke(Method.java:507)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at dalvik.system.NativeStart.main(Native Method)
07-05 19:06:16.328: E/AndroidRuntime(29530): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at com.ankita.try1.viewAttendance.onCreate(viewAttendance.java:36)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-05 19:06:16.328: E/AndroidRuntime(29530):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
07-05 19:06:16.328: E/AndroidRuntime(29530):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:35:07.240

我移动这个来回答，因为它有点太长了，无法发表评论。首先在一个线程内访问数据库，可以使用`AsyncTask`,`Threads`或`CursorLoaders`.

还要通过光标移动尝试使用`cursor.moveToNext()`and 而不是 do-while 使用简单的 while 并检查它是否不是 afterlast ：

```
while(!cursor.isAfterLast){
    cursor.moveToNext();
    //do-something
} 
```

你也有这个：

```
c1=q.fetchAllTodos();

        long co=1;

        if(c1!=null)
        { //something } 
```

您正在检查您的光标是否为空，但请记住您的光标可以为空，这可能会导致您出现问题（我猜它是您遇到的问题），因此要修复它添加一个验证，例如：

```
if(c1!=null && c1.getCount()!=0) 
 { //something } 
```

还要更新你的`View`你不能在非 UI 线程中这样做，所以你需要一个处理程序、一个帖子或其他方法。如果你会使用`AsyncTask`我建议你在你的`onPostExecute`.

# python - Tastypie + Backbone：model.save (PUT) 失败（直到我通过浏览器打开资源）

> ID：11341155
> 
> 赞同：1
> 
> 时间：2012-07-05T09:08:20.160
> 
> 标签：python, backbone.js, tastypie

我正在使用 Django-Tastypie 和 Backbone，保存模型时出现问题，由于某种原因操作失败。

接口：

```
class InboxResource(ModelResource):
user = fields.ForeignKey(UserResource, 'user')

class Meta:
    queryset = Email.objects.filter( Q(spam = False) & Q(archive = False) ).order_by('-date')
    limit = 0
    always_return_data = True
    authentication = CustomAuthentication()
    authorization = CustomAuthorization() 
```

骨干功能：

```
set_spam: function(e) {
    e.preventDefault();
    this.model.set({ 'spam': true });
    this.model.save();
    console.log('spam set');
    $(this.parent).fadeOut();
    $(this.el).fadeOut();
}, 
```

安慰：

> 把 127.0.0.1:8000/api/v1/inbox/7 jquery-1.7.1.js:8102
> 
> jQuery.ajaxTransport.send jquery-1.7.1.js:8102 jQuery.extend.ajax
> 
> jquery-1.7.1.js:7580 Backbone.sync 主干.js:1355
> 
> _.extend.save 主干.js:392
> 
> Backbone.View.extend.set_spam Views.Single.js:41
> 
> jQuery.event.dispatch jquery-1.7.1.js:3256
> 
> jQuery.event.add.elemData.handle.eventHandle

在操作后检查模型时，它的值实际上发生了变化，因此我推断问题可能与 Tastypie 有关。

不过有些奇怪；当我通过浏览器访问特定资源时，例如“http://127.0.0.1:8000/api/v1/inbox/7”，它按预期正确显示。但是，如果在那之后我尝试完全相同的操作，那么这次就可以了！所以我承认我对此有点困惑。

任何想法将不胜感激，在此先感谢！

# javascript - 如何在 Javascript 中将命名空间函数添加到 onclick？

> ID：11341156
> 
> 赞同：0
> 
> 时间：2012-07-05T09:08:20.520
> 
> 标签：javascript, onclick

在发现 Javascript 命名空间后，我尝试实现它们，但在尝试将命名空间方法附加到元素的 onclick 时遇到了问题。

我用这个方法来包装我的函数/方法/类（一个简化的概念，不是我的实际代码）：

```
;(function(window, undefined) {

    //my namespace
    var NS = {};

    NS.test = {
        f : function(param) {
            alert(param);
        }
    }

    NS.test.('test 2');

})(window); 
```

在里面，一切正常，并提示“测试 2”。

但是，当我尝试将该功能附加到单击事件时，通过执行以下操作：

```
<a href-"#" onclick="NS.test.f('test');">Click me!</a> 
```

它不起作用，就像我在`})(window);`零件之后调用该函数时它不起作用一样。

我尝试调用它，`window.NS.test.f('test');`但没有任何效果。

如何让 onclick 事件调用我的函数？

我可以在我的包装器中附加一个事件侦听器，就像我对其他 html 元素所做的那样毫无困难，但在这种情况下会出现问题，因为我使用 javascript 生成链接，我发现`onclick="doSomething"`为所有人添加更容易和更简单我的链接，而不是创建它们，然后缓存它们并添加事件侦听器。

叫我懒惰，但在这种特殊情况下，我更喜欢这样做

```
someDiv.innerHTML = my_Generated_Html_Code_With_OnClick; 
```

代替

```
//demo code, ignore the flaws and the fact it won't work on IE
someDiv.innerHTML = my_generated_Html_code;
myLink = document.getElementById(id);
myLink.addEventListener('mousedown', NS.test.f('test')); 
```

我不使用任何框架，也不希望使用，因为我试图首先更好地理解所谓的 vanilla javascript。

[我在这里](http://jsfiddle.net/F73K4/3/)设置了一个 jsfiddle 。

PS我必须承认我没有完全理解命名空间，所以如果我在这里做错了什么或者以我不应该的方式应用这个概念，我将不胜感激任何提示或更正

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:11:08.313

这是因为`NS`在内部声明，因此只存在于函数内部：

```
function(window, undefined) {
    var NS = {};

    // NS exists here ...
}

// ... but not here 
```

如果您想让它对页面的其余部分可用，那么您可以执行以下操作：

```
function(window, undefined) {

    var NS = window.NS = {};

    // NS and window.NS exist here ...
}

// ... and window.NS exists here. 
```

# php - 合作伙伴网站托管的 Web 应用程序不暴露源代码 - 可能吗？

> ID：11341157
> 
> 赞同：0
> 
> 时间：2012-07-05T09:08:21.377
> 
> 标签：php, javascript, mysql, html, web-applications

如果这个特定问题已经得到解答，请道歉（搜索没有找到任何直接相关的内容）。

我们是用于向我们的合作伙伴网站提供社区评论和“社交”的网络应用程序的开发人员。我们的应用在前端使用 Javascript 和 HTML，在后端使用 PHP 和 mySQL。

目前，我们通过自己的服务器运行一切，这变得非常昂贵。

我们想询问我们的合作伙伴是否可以通过他们的服务器托管应用程序，由于他们将帮助我们共享带宽/cpu 负载，他们可以获得每月费用的折扣。

我的问题是，有没有办法通过我们合作伙伴的网络服务器托管我们的应用程序，这样我们就可以在不暴露源代码的情况下卸载大部分 CPU 时间和带宽？

我将不胜感激任何想法/帮助！

非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:16:58.000

如果您还提供静态或很少更改的内容，您的客户端可以运行缓存**反向代理**来从您的服务器中移除一些负载，而无需提供任何源代码。但是您需要实现缓存标头才能使其正常工作。

您可能想查看[nginx](http://nginx.org)。

再想一想：您是否尝试使用 facebooks [Hip-Hop for PHP](https://github.com/facebook/hiphop-php/)编译脚本？首先，脚本应该执行得更好，其次，如果您仍然必须外包托管，您部署一个编译程序，不涉及源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:19:12.967

如果您将代码放在他们的服务器上，他们可以找到。所以这不会是100％的工作。虽然你可以让它变得困难，但它仍然不是很好。

最可行的解决方案可能是分离应用程序的各个部分并共享它们。所以：你放弃了一个过程（所以源和其他需要的数据），但它只是总数的一部分。这样，没有合作伙伴拥有您的整体解决方案，但您确实将零件外包。

# xcode - Xcode 中定义的 SYMROOT 或 DSTROOT 等变量在哪里？

> ID：11341158
> 
> 赞同：6
> 
> 时间：2012-07-05T09:08:24.590
> 
> 标签：xcode, variables, build

我想将 DSTROOT（或 Xcode 用于构建设置的任何其他变量）更改为其他位置，但无法找到它的定义位置。

我正在使用 Xcode 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:03:42.473

查看[Xcode Build Settings Reference](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html)，它看起来`$DSTROOT`只受 影响，`$PROJECT_NAME`并且`$SYMROOT`只受 影响`$SRCROOT`，所以我不确定您是否可以轻松更改它们。

# javascript - 在 JsPlumb for FlowChart 连接器中获取画布上端点的位置

> ID：11341163
> 
> 赞同：1
> 
> 时间：2012-07-05T09:08:33.430
> 
> 标签：javascript, jsplumb

有没有办法在 jsPlumb 中获取流程图连接器画布上端点的位置...当流程图连接器从一个元素绘制到另一个元素时，我还想获得弯曲的位置...

有人可以帮忙吗我出去？

或者是否有任何其他具有此功能的 JS API？

# oracle - 过程中出现奇怪的错误“Ora-01001 Invalid cursor”

> ID：11341166
> 
> 赞同：7
> 
> 时间：2012-07-05T09:08:44.073
> 
> 标签：oracle, oracle11g

昨天我在我们的生产过程中处理了一个奇怪的错误。语句执行失败

```
if v_cursor%isopen then
  close v_cursor; -- here was an error 
end if; 
```

经过一番深入研究后，我发现问题出在打开此光标的子程序中。我通过在子程序中添加输出参数 sys_refcursor 来修复错误。为了澄清情况，请考虑以下测试代码：

```
procedure nested_test(test  number,
                        p_cur out sys_refcursor)
  is  
    procedure nested_procedure_fail is
    begin      
      open p_cur for
        select 1, 2, 3, 4
          from dual
         where 1 = 0;
    end;

    procedure nested_procedure_success(p_cur out sys_refcursor) is
    begin
      open p_cur for
        select 1, 2, 3, 4
          from dual
         where 1 = 0;
    end;

  begin
    if test = 1 then
      nested_procedure_fail;
    else
      if test = 2 then
        nested_procedure_success(p_cur => p_cur);
      else
        open p_cur for
          select 6, 7, 8, 9
            from dual
           where 1 = 1;
      end if;
    end if;
  end;

  procedure test_fail is
    v_cur sys_refcursor;
  begin
    nested_test(test => 1, p_cur => v_cur);
    if v_cur%isopen then
      close v_cur;
    end if;
  end;

  procedure test_success is
    v_cur sys_refcursor;
  begin
    nested_test(test => 2, p_cur => v_cur);
    if v_cur%isopen then
      close v_cur;
    end if;
  end; 
```

如果我尝试运行`test_success`一切正常，但`test_fail`我收到一条消息

> ORA-01001: 游标无效

我找不到有关此的任何信息。谁能解释为什么这段代码会失败？

甲骨文版本：

```
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
PL/SQL Release 11.2.0.3.0 - Production
CORE    11.2.0.3.0  Production
TNS for Solaris: Version 11.2.0.3.0 - Production
NLSRTL Version 11.2.0.3.0 - Production 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T11:12:57.573

这似乎是错误 7174888，或者至少与它密切相关。对此的描述是“当 sys_refcursor 传递给另一个过程时引发 ORA-6504”，但如果我更改`test_fail`为进行提取，我也可以做到这一点：

```
 procedure test_fail is
    v_cur sys_refcursor;
    a number;
    b number;
    c number;
    d number;
  begin
    nested_test(test => 1, p_cur => v_cur);
    if v_cur%isopen then
      fetch v_cur into a,b,c,d;
      close v_cur;
    end if;
  end; 
```

我明白了`ORA-06504: PL/SQL: Return types of Result Set variables or query do not match`。

错误报告中的解决方法可以解决 fetch 和 close 问题。

> 将 ref 游标初始化为将被访问的最高级别的非 NULL 值

```
 begin
    /* Dummy open to avoid bug 7174888 */
    open v_cur for 'select 1 from dual';
    nested_test(test => 1, p_cur => v_cur);
    if v_cur%isopen then
      fetch v_cur into a,b,c,d;
      close v_cur;
    end if;
  end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T16:42:18.250

一个有趣的问题！只是想补充一些东西。

对我来说，真正的问题在于依赖 IS_OPEN 来确定游标是否有效。Oracle 可能出于多种原因抛出 INVALID_CURSOR，并且可能有一个无效的“打开”游标。假设打开的游标必须有效似乎是合理的（因此我们可以从中获取或执行其他操作，例如简单的关闭），但情况不一定如此。

例如，您不能在远程过程调用中使用游标变量（通过 dblinks）。如果在 1 个数据库实例上调用 open 并在另一个实例上调用 fetch（如果在 db_A 上定义任何版本的nested_test，然后从 db_B 调用），同样的示例，即使使用 Alex 的解决方法，也会失败。然而，对 ISOPEN 的测试仍然会返回 TRUE，但是尝试使用游标（获取）会失败。

INVALID_CURSOR 可能因其他原因引发（例如超出最大打开游标，或者有时打开游标并等待一段时间再尝试使用它）。

综上所述，我所知道的没有“ISVALID”测试。imo 最好的方法是在同一个程序或子程序中打开、获取和关闭游标。创建一个只负责打开一个游标的过程对我来说有点奇怪（但我确信这是有原因的），并且可能会导致难以解释的问题（比如这个）。如果您必须让另一个程序为您打开游标，那么您可能希望将获取并最终关闭游标的代码包含在匿名块中并捕获 INVALID_CURSOR 异常。

只是我的胡言乱语;-)

# oauth - 如何以编程方式获取 Google API 的 OAuth2 客户端凭据

> ID：11341170
> 
> 赞同：2
> 
> 时间：2012-07-05T09:09:15.620
> 
> 标签：oauth, google-api, oauth-2.0

我正在尝试创建一个可再分发的 Web 应用程序，该应用程序将通过 Google Reporting API 与 Google Analytics 集成。客户将在他们的服务器上安装应用程序。

我正在关注本教程（我正在使用 PHP，但我相信这对我的问题并不重要）

[https://developers.google.com/analytics/resources/tutorials/hello-analytics-api](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)

这工作正常。那里没有问题。

但是我想不出一个缺失的元素：本教程首先将我发送到 Google API 控制台，我必须在该控制台中创建和配置一个新的 API 项目，并创建和配置一个客户端 ID。

这是很多需要相当技术知识的工作（重定向 url、选择正确的 API、容易出错的复制和粘贴等）

所以我的问题：

*   是否有 API 以便我可以以编程方式为我的用户设置它？
*   如果这不可能，是否有更用户友好的方式来获取面向未来的分析报告？（我注意到他们目前正在弃用一些较旧的 API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:21:28.960

不幸的是，这是不可能的。

您可以采用以下方式之一：

*   移动`client_id`到`client_secret`某个配置文件并帮助您的客户进行部署。

*   为您的应用显示一次性设置向导并逐步指导您的客户。在那里，您至少可以为他提供正确的回调 URL。

*   将您的应用程序视为[“已安装的应用程序”](https://developers.google.com/accounts/docs/OAuth2InstalledApp)和仪器[`curl`](https://stackoverflow.com/questions/1522869/how-do-i-use-oauth-with-php-and-curl)或类似的东西来发送请求。

# c# - 如何在 Excell SpreadSheet 中填充数据以及如何使用 C# 从该数据中绘制图表

> ID：11341173
> 
> 赞同：2
> 
> 时间：2012-07-05T09:09:19.910
> 
> 标签：c#, excel-2007, openxml, openxml-sdk

我创建了一个电子表格（MSDN 的示例），现在我想将数据从数据集填充到此工作表中。填充数据后，我想根据可用数据绘制图表。我不想使用数据透视表，我只想绘制来自数据集的任何数据的图表。我以前从未使用过电子表格，也找不到合适的示例来获得帮助。我这里有两个问题

1.  如何从数据集中填充电子表格中的数据
2.  如何根据可用数据绘制图表（任何图表示例）

任何人的帮助都会得到真正的赞赏。

以下是我的代码片段

```
Public void CreateSpreadSheet()
{
    DataSet dataSet = GetDatasetForSpreadSheetChart();
    int noOfRows = dataSet.Tables["SpreadSheetTestTable"].Rows.Count;
    int noOfColumns = dataSet.Tables["SpreadSheetTestTable"].Columns.Count;

    // Create a spreadsheet document by supplying the filepath.
    SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Create(filePath,SpreadsheetDocumentType.Workbook);

    // Add a WorkbookPart to the document.
    WorkbookPart workbookpart = spreadsheetDocument.AddWorkbookPart();
    workbookpart.Workbook = new Workbook();

    // Add a WorksheetPart to the WorkbookPart.
    WorksheetPart worksheetPart = workbookpart.AddNewPart<WorksheetPart>();
    worksheetPart.Worksheet = new Worksheet(new SheetData());

    // Add Sheets to the Workbook.
    Sheets sheets = spreadsheetDocument.WorkbookPart.Workbook.
    AppendChild<Sheets>(new Sheets());

    // Append a new worksheet and associate it with the workbook.
    Sheet sheet = new Sheet()
    {
        Id = spreadsheetDocument.WorkbookPart.GetIdOfPart(worksheetPart),SheetId = 1,Name = "mySheet"
    };

    sheets.Append(sheet);

    // Get data from dataset and insert it in spreadsheet
    SheetData sheetData = sheet.GetFirstChild<SheetData>();
    for (int c = 0; c < noOfColumns; c++)
    {
       string headerName = dataSet.Tables["SpreadSheetTestTable"].Columns[c].ToString();
    }

    workbookpart.Workbook.Save();

    // Close the document.
    spreadsheetDocument.Close();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:37:01.357

```
public void CreateExcelDocFromDatatable(DataTable dataTable)
{
    object misValue = System.Reflection.Missing.Value;
    Excel.Application xlApp = new Excel.ApplicationClass();
    Excel.Workbook xlWorkBook = xlApp.Workbooks.Add(misValue);
    Excel.Worksheet xlWorkSheet1 = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

    int iCol = 0;
    foreach (DataColumn c in dataTable.Columns)
    {
        iCol++;
        xlWorkSheet1.Cells[1, iCol] = c.ColumnName;
    }

    int iRow = 0;
    foreach (DataRow r in dataTable.Rows)
    {
        iRow++;
        iCol = 0;
        foreach (sd.DataColumn c in mdtOutput.Columns)
        {
            string cellData = r[c.ColumnName].ToString();
            iCol++;
            xlWorkSheet1.Cells[iRow + 1, iCol] = r[c.ColumnName];
        }
    }

    xlWorkSheet1.Activate();
    var range = xlWorkSheet1.get_Range("2:2",misValue);
    range.Select();
    xlApp.ActiveWindow.FreezePanes = true;
    range = xlWorkSheet1.get_Range("1:1", misValue);
    range.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Yellow);

    mXlWorkBook.SaveAs(outputFilePath, Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
    xlApp.Visible = true;
    xlWorkSheet1.Activate();
}

private void CreateExcelCharts()
{
    object misValue = System.Reflection.Missing.Value;
    Excel.Workbook xlWorkBook = xlApp.Workbooks.Add(misValue);
    Excel.Worksheet chartsSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(2);
    chartsSheet.DisplayRightToLeft = false;
    chartsSheet.Name = "Charts";

    Excel.ChartObjects chartObjs = (Excel.ChartObjects)chartsSheet.ChartObjects(Type.Missing);
    Excel.ChartObject chartObj = chartObjs.Add(200, 40, 300, 300);
    Excel.Chart xlChart = chartObj.Chart;
    Excel.Range range = chartsSheet.get_Range("B2", "C7");
    xlChart.SetSourceData(range, misValue);
    xlChart.ChartType = Microsoft.Office.Interop.Excel.XlChartType.xl3DPie;
    mXlWorkBook.Save();
} 
```

然后您可以使用图表属性，您可以在其中几乎控制 Excel UI 中的所有内容（图表标题、轴、网格线、颜色等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:56:18.910

对于这种情况，我找到了一个非常好的解决方案。Excel中的表格可以从以下链接 [http://www.nitrix-reloaded.com/2010/09/26/creating-excel-files-from-dataset-using-openxml-20-c-sharp/](http://www.nitrix-reloaded.com/2010/09/26/creating-excel-files-from-dataset-using-openxml-20-c-sharp/)

而不是通过使用[http://spreadsheetlight.com/](http://spreadsheetlight.com/)库可以在 Excel 中绘制任何类型的图表/图形。

可以根据场景进行更改。例如为图表创建提供开始和结束单元格值等。在我的场景中，我使用过运行时值，但我不知道我的 Excel 表中有哪些列和多少列。如果有人需要，我可以提供我的场景的代码片段。

问候！

# javascript - 滚动100px后将div位置设置为固定？

> ID：11341177
> 
> 赞同：1
> 
> 时间：2012-07-05T09:09:38.647
> 
> 标签：javascript, jquery

我尝试使用以下函数在滚动 100 像素后将 div 的位置设置为距顶部 100 像素。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(window).scroll(function(){
    $("#header").css("top",Math.max(0,100-$(this).scrollTop()));
});
</script>
<div class="header"  style="position:fixed;top:100px;background-color:red">something</div> 
```

它不工作（div 坚持它的固定位置）。似乎该功能与div无关。我的问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:12:17.303

你的问题是你`div`有`class`标题，而不是`id`. 尝试 `<div id="header" style="position:fixed;top:100px;background-color:red">something</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:12:15.937

```
$(document).ready(function(){
    $('.header').scroll(function(){
        $(this).css("top",Math.max(0,100-$(this).scrollTop()));
    });
}); 
```

# php - php回显，改变打印方式

> ID：11341178
> 
> 赞同：-3
> 
> 时间：2012-07-05T09:09:39.090
> 
> 标签：php

我有一个快速的问题：

我有这段代码，一切正常，但我需要以不同的方式打印它，我尝试了一些方法，但问题是，我没有收到任何错误，但结果不正确方法，

我要打印的代码是这样的：

```
<ul class='star-rating' id="star-rating-<?php echo $star['id'];?>">
<?php /* getRating($id) is to generate current rating */?>
  <li class="current-rating" id="current-rating-<?php echo $star['id'];?>" style="width:<?php echo getRating($star['id'])?>%"><!-- will show current rating --></li>
  <?php 
  /* we need to generate 'id' for star rating.. this 'id' will identify which data to execute  */
  /* we will pass it in ajax later */
  ?>
  <span class="ratelinks" id="<?php echo $star['id'];?>">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul> 
```

虽然我正在尝试这个：

```
echo"<ul class='star-rating' id='star-rating-'". $star['id'].">
 <li class='current-rating' id='current-rating-".  $star['id']." style='width:". getRating($star['id'])."'%></li>";
 echo'<span class="ratelinks" id="'. $star['id'].'">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:12:07.957

您在 echo 和字符串之间缺少一个空格。您在字符串中也有一些错误。

```
echo "<ul class='star-rating' id='star-rating-". $star['id']."'>
 <li class='current-rating' id='current-rating-".  $star['id']."' style='width:". getRating($star['id'])."%'></li>";
echo '<span class="ratelinks" id="'. $star['id'].'">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul>'; 
```

我必须说，我很想知道您为什么要进行此更改的原因？我建议用单引号将您的字符串括起来`'`。这样，您仍然可以使用预期的双引号添加 HTML 属性，`"`而无需转义它们。

例子：

```
echo '<ul class="star-rating" id="star-rating=' . $star['id'] . '">
  <li class="current-rating" id="current-rating-' . $star['id'] . '" style="width:' . getRating($star['id']) . '%"></li>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:16:05.617

在处理大量 HTML 时，我总是建议使用[`heredoc`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)和使用`{}`来替换变量，即`{$star['id']}`.

你需要在这个heredoc之前计算你的星级。

```
echo <<<"EOD"
<ul class='star-rating' id="star-rating-{$star['id']}">
<?php /* getRating($id) is to generate current rating */?>
  <li class="current-rating" id="current-rating-{$star['id']}" style="width:{$star_rating['id']}%"><!-- will show current rating --></li>
  <span class="ratelinks" id="<?php echo $star['id'];?>">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span>
</ul>
EOD; 
```

# php - PHP：查询函数错误执行更新查询字符串

> ID：11341181
> 
> 赞同：-2
> 
> 时间：2012-07-05T09:09:56.623
> 
> 标签：php, mysql

我有一个查询问题。此查询适用于 phpMyAdmin，但当 PHP 执行此查询时出现错误。可能是什么原因？

我的 PHP 代码是：

```
var_dump($sql);
query($sql); 
```

当我调试时：

这是查询字符串：

```
 UPDATE searchcolumnsets SET name = "Project X",jsonfields = "[{\"name\":\"cm:contentPropertyName\",\"title\":\"Thumbnailed Content Property Name\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:defaultHomeFolderPath\",\"title\":\"Percorso cartella homepage\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"trx:enabled\",\"title\":\"Abilitato\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:identifier\",\"title\":\"Identificativo\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:expiryDate\",\"title\":\"Data di scadenza\",\"description\":\"Data di scadenza\",\"datatype\":\"d:date\"},{\"name\":\"cm:hits\",\"title\":\"Conteggio\",\"description\":\"Conteggio\",\"datatype\":\"d:int\"}]" WHERE id = 50 
```

这是错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'name":"cm:contentPropertyName","title":"Thumbnailed Content Property Name","desc' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:16:37.147

您可以改用单个 qoute。尝试这个

```
UPDATE searchcolumnsets SET name = 'Project X',jsonfields = '[{\"name\":\"cm:contentPropertyName\",\"title\":\"Thumbnailed Content Property Name\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:defaultHomeFolderPath\",\"title\":\"Percorso cartella homepage\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"trx:enabled\",\"title\":\"Abilitato\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:identifier\",\"title\":\"Identificativo\",\"description\":\"\",\"datatype\":\"\"},{\"name\":\"cm:expiryDate\",\"title\":\"Data di scadenza\",\"description\":\"Data di scadenza\",\"datatype\":\"d:date\"},{\"name\":\"cm:hits\",\"title\":\"Conteggio\",\"description\":\"Conteggio\",\"datatype\":\"d:int\"}]' WHERE id = 50 
```

# php - MySQL或PHP来计算总记录的百分比？

> ID：11341183
> 
> 赞同：1
> 
> 时间：2012-07-05T09:09:58.003
> 
> 标签：php, mysql

早上好，我有 mysql 查询，我想计算查询返回的总记录的百分比；

```
Select
  tblcontacts.ContactFullName As Advisor,
  Count(tblcases.CaseID) As Cases
From
  tblcases Inner Join
  tblcontacts On tblcontacts.ContactID =
    tblcases.ContactAssignedTo
Group By
  tblcontacts.ContactFullName with rollup 
```

这将输出数据 Adv 1 100 | 进阶 2 300 | 进阶 3 600 | 总计 1000。我能否在案例之后添加另一列来计算案例/总计 * 100，例如，Adv 1 输出写入为 10%。根据我的研究，我不确定在 php 或 mysql 中执行此操作是否更好？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:15:15.603

这段代码应该可以解决问题：

```
select
    a.advisor,
    a.cases,
    round((a.cases/b.totalCases)*100,2) as PercentCases
from
(
    Select
      tblcontacts.ContactFullName As Advisor,
      Count(tblcases.CaseID) As Cases
    From
      tblcases Inner Join
      tblcontacts On tblcontacts.ContactID =
        tblcases.ContactAssignedTo
    Group By
      tblcontacts.ContactFullName with rollup
) a,
(
    Select
      Count(tblcases.CaseID) As Cases
    From
      tblcases Inner Join
      tblcontacts On tblcontacts.ContactID =
        tblcases.ContactAssignedTo
) b 
```

如果 tblCases 表除了第一个查询中返回的内容之外没有其他记录，您可以简单地使用 b 语句：

```
(
    Select
      Count(tblcases.CaseID) As Cases
    From
      tblcases 
) b 
```

基于您提供的代码的 PHP 版本将如下所示：

```
<?php
mysql_select_db($database_ghl_portal, $ghl_portal); 
$query_Recordset1 = "
    SELECT 
        tblcontacts.ContactFullName, 
        Count(tblcases.CaseID) As Cases 
    FROM 
        tblcases 
            Inner Join 
            tblcontacts 
            On tblcontacts.ContactID = tblcases.ContactAssignedTo 
    GROUP BY 
        tblcontacts.ContactFullName with rollup";
$totalValue=0;
$i=0;
$Recordset1 = mysql_query($query_Recordset1, $ghl_portal) or die(mysql_error()); 
$row_Recordset1 = mysql_fetch_assoc($Recordset1); 
while ($row_Recordset1 = mysql_fetch_assoc($Recordset1))
{
    $totalValue+=$row_Recordset1["Cases"];
    // Do all your other stuff to put the result into an array here such as
    $yourArray[$i][0]=$row_Recordset1["Advisor"];
    $yourArray[$i][1]=$row_Recordset1["Cases"];
    $i++;
}
$totalRows_Recordset1 = mysql_num_rows($Recordset1); 

// And your output code would look like:
for ($j=0; $j<$totalRows_Recordset1; $j++)
{
    echo "Advisor: ".$yourArray[$j][0]."<br>";
    echo "Count: ".$yourArray[$j][1]."<br>";
    echo "Percentage: ".(round(($yourArray[$j][1]/$totalValue),2)*100)."<br><br>";
}
?> 
```

话虽如此，您应该使用[php PDO 对象](http://php.net/manual/en/book.pdo.php)进行查询。

至于帮助，很高兴能够回馈这个社区，只是我在这里查看并获得有用答案的一小部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:49:00.767

试试这个查询

```
SELECT tblcontacts.ContactFullName AS Advisor, 
COUNT( tblcases.CaseID ) AS Cases,
(COUNT( tblcases.CaseID )*100)/(SELECT COUNT( A.CaseID ) FROM tblcases AS A) as Percentage
FROM tblcases
INNER JOIN tblcontacts ON tblcontacts.ContactID = tblcases.ContactAssignedTo
GROUP BY tblcontacts.ContactFullName 
```

考虑数据库架构和数据。

如果不存在则创建表`tblcases`( `CaseID`int(11) NOT NULL AUTO_INCREMENT, `ContactAssignedTo`int(11) NOT NULL, PRIMARY KEY ( `CaseID`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=21;

插入`tblcases`( `CaseID`, `ContactAssignedTo`) 值 (1, 1),(2, 1),(3, 1),(4, 1),(5, 2),(6, 2),(7, 3),(8 , 3),(9, 3),(10, 3),(11, 4),(12, 4),(13, 5),(14, 5),(15, 5),(16, 6 ),(17, 7),(18, 7),(19, 8),(20, 8);

如果不存在则创建表`tblcontacts`( `ContactID`int(11) NOT NULL AUTO_INCREMENT, `ContactFullName`varchar(64) NOT NULL, PRIMARY KEY ( `ContactID`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=7;

插入`tblcontacts`( `ContactID`, `ContactFullName`) 值 (1, 'amit 1'),(2, 'amit 2'),(3, 'amit 3'),(4, 'amit 4'),(5, 'amit 5') ,(6, 'amit 6');

结果将是这样的，这对于数据库中的上述数据是正确的。

顾问案例百分比

阿米特 1 4 20.0000

阿米特 2 2 10.0000

阿米特 3 4 20.0000

阿米特 4 2 10.0000

阿米特 5 3 15.0000

阿米特 6 1 5.0000

# c# - 无法将 DateTime 格式插入数据库

> ID：11341184
> 
> 赞同：0
> 
> 时间：2012-07-05T09:09:58.410
> 
> 标签：c#, asp.net, date, insert, sqlanywhere

我无法将 DateTime 插入我的数据库。我写错了声明吗？

显然没有日期时间，我可以插入数据库

```
 string dateAndTime = date + " " + time;

    CultureInfo provider = CultureInfo.InvariantCulture;        
    DateTime theDateTime = DateTime.ParseExact(dateAndTime, "d MMMM yyyy hh:mm tt", provider);

//Create a connection, replace the data source name with the name of the SQL Anywhere Demo Database that you installed
            SAConnection myConnection = new SAConnection("UserID=dba;Password=sql;DatabaseName=emaDB;ServerName=emaDB");
            //open the connection 
            ; myConnection.Open();
            //Create a command object. 
            SACommand insertAccount = myConnection.CreateCommand();
            //Specify a query. 
            insertAccount.CommandText = ("INSERT INTO [meetingMinutes] (title,location,perioddate,periodtime,attenders,agenda,accountID,facilitator,datetime) VALUES ('"+title+"','" + location + "', '" + date + "','" + time + "', '" + attender + "','" + agenda + "', '" + accountID + "','" + facilitator + "','" +theDateTime+ "')");
try
    {
        insertAccount.ExecuteNonQuery();

        if (title == "" || agenda == "")
        {
            btnSubmit.Attributes.Add("onclick", "displayIfSuccessfulInsert();");
            //ScriptManager.RegisterStartupScript(this, GetType(), "error", "alert('Please ensure to have a title or agenda!');", true);
        }
        else
        {

            btnSubmit.Attributes.Add("onclick", "displayIfSuccessfulInsert();");
            Response.Redirect("HomePage.aspx");
            //ScriptManager.RegisterStartupScript(this, this.GetType(), "Redit", "alert('Minutes Created!'); window.location='" + Request.ApplicationPath + "/HomePage.aspx';", true);
        }
    }
    catch (Exception exception)
    {
        Console.WriteLine(exception);
    }

    finally 
    {            
        myConnection.Close();          
    } 
```

它不会将 SQL 插入我的数据库。

PS：例如，theDateTime 的值可能是 7/14/2012 1:35:00 AM。如何将其插入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:13:51.057

是的，您应该使用参数 {0}、{1} 等编写查询，然后使用*[Parameters.Add](http://dcx.sybase.com/1101/en/dbprogramming_en11/ianywhere-data-sqlanywhere-sacommand-parameters2-0.html)*。

```
insertAccount.CommandText = ("INSERT INTO [meetingMinutes]  
   (title,location,perioddate,periodtime, ...) 
   VALUES (?,?,?,?,  ... )");
insertAccount.Parameters.Add( ... ); 
```

这将确保 SQL 以正确的语法形成；并且还可以防止 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:33:39.257

首先，切勿对 SQL 查询或命令使用字符串连接。使用参数。如果您将使用参数，那么：

*   无法进行 sql 注入
*   查询文本和计划被缓存，从而提高了性能
*   以及在您的情况下重要的是 - 您不必考虑值的格式，只需将 DateTime 变量作为参数传递

还要交叉检查您的数据库列是否具有 datetime2 类型，否则很可能您将无法存储小于 1758 年 1 月 1 日的值（例如 DateTime.MinValue）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:17:10.153

不要在您的日期使用引号，删除您使用日期的所有引号

```
change ,'" +theDateTime+ "') to ," +theDateTime+ ") 
```

并且还保护 yr sql 导致它无法保存 SQL 注入

# ios - 绝对初学者应该从哪里开始？

> ID：11341189
> 
> 赞同：0
> 
> 时间：2012-07-05T09:10:34.353
> 
> 标签：ios, macos

我对编写代码完全陌生，对所有不同的语言都有些困惑。我的主要目标是为 iOS/OSX 构建网站和应用程序。

我应该从哪些编码语言开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:31:21.240

[这](https://stackoverflow.com/questions/3949995/what-programming-languages-can-one-use-to-develop-iphone-ipod-touch-and-ipad-i)是以前提出的问题，可能对您有用。

如果你觉得这有点过头了，你可以先在[W3Schools](http://w3schools.com/)学习 HTML/CSS/JavaScript 的基础知识，或者在[Codecademy](http://codecademy.com/)学习广泛适用的编程技能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:14:48.830

对于 iOS/OSX，学习 Objective C 并熟悉 Apple 提供的不同框架是一个好主意。

对于构建网站，您只需要一个文本编辑器和一个很好的 HTML/CSS 介绍。如果网站应该是动态的（即在检索网站时应该创建一些内容）PHP 可能很容易学习并且一些 JavaScript 知识不会受到伤害。

请注意，应用程序与网站不同！您可以构建看起来像应用程序并通过浏览器访问的网站——“本地”应用程序只能在设备上运行，而不能通过浏览器运行。

因此，没有“iOS/OSX 网站”之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:13:07.333

> 我的主要目标是为 iOS/OSX 构建网站和应用程序。

您需要定义是要使用原生（objective-c + Cocoa/Cocoa-touch）还是网站（HTML + JS + CSS）。对于当前标准，您会选择哪一个是一个棘手的问题。这真的取决于项目和客户（有时甚至他们都不知道他们真正想要什么）。如果你能告诉我们你学习它们的目标是什么，我可以试着给你更好的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-26T02:33:04.387

我将从基本的 c 开始，因为它是一切的基础。它教你基本的整数、变量、指针等，然后你可以进入面向对象的编程（对于其他语言以及 ios/mac osx 编程）

或直接进入目标c。如果你想设计和构建你需要了解 c、objective c 的 mac os x 应用程序，然后进入今年夏天发布的新宣布的“swift”苹果，它们都是面向对象的。

如果你想构建像 facebook、twitter、google 等 web 应用程序。然后我建议使用 php 和 mysqli（mysql 已停产）。你可以实现的比你想象的要多得多。你也可以在 mysqli 和 php 中做面向对象，但你也可以做“过程风格”。

请注意，ios/mac osx 比 html、css、php 和 mysql 更难。

# mysql - 以字符串格式返回 MySQL 表中的所有列

> ID：11341192
> 
> 赞同：5
> 
> 时间：2012-07-05T09:10:55.803
> 
> 标签：mysql, sql, mysql5

有没有办法以字符串格式返回 MySQL 表中的所有列？

我想返回这样的东西：

`course_id, name, par, yds, mtrs`等等

我知道如何在表格 ( `SHOW FIELDS FROM course;`) 中显示字段/列，但是这些以表格格式返回。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T09:12:46.103

```
select group_concat(column_name separator ', ') 
from information_schema.columns 
where table_name = 'course' 
group by table_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:20:53.913

如果您的 DB 用户有权访问信息模式，则可以使用以下内容：

```
SELECT GROUP_CONCAT( `COLUMN_NAME` )
FROM `information_schema`.`COLUMNS`
WHERE `TABLE_SCHEMA` = 'your_database_name'
AND `TABLE_NAME` = 'your_table_name'
GROUP BY `TABLE_NAME` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:22:32.410

从 INFORMATION_SCHEMA 中选择 GROUP_CONCAT(COLUMN_NAME,',')。`COLUMNS`WHERE TABLE_NAME = '表名'

# java - 如何让 Person 在此代码中保留对 Player 的引用？

> ID：11341193
> 
> 赞同：0
> 
> 时间：2012-07-05T09:11:02.530
> 
> 标签：java, object, game-engine, modeling

问题：当骨架进入一个地方时，我希望在我的`World`对象中使用此方法更新所有玩家屏幕：

```
/**
 * Say `text' in the Place `place'. The text will become visible at the
 * bottom of the text window of any Players currently watching `place'.
 * 
 * @param place
 *            The place where the string will be displayed.
 * @param text
 *            The string to be diplayed.
 */
public void sayAtPlace(Place place, String text) {
    synchronized (players) {
        Iterator<Player> ls = players.iterator();
        while (ls.hasNext()) {
            Player p = ls.next();
            if (p.currentPlace() == place) {
                p.say(text);
            }
        }
    }
} 
```

我有两个类，Person 和 Player，我希望 Person 在`goTo`调用该方法时写入 textarea，但我无法使 Person 对象正确引用具有 textarea 的 Player：

```
package adventure;

import java.awt.*;
import java.util.*;

/**
 * ADT for persons which is completed which subclasses to creating actors with
 * specific properties
 */
public class Person {
    public Player player = null;

    /**
     * Name of the Person.
     */
    public String name;

    /**
     * The World which this Person is associated with.
     */
    public World world;

    /**
     * Tells where this Person is at the moment.
     */
    public Place where;    

    /**
     * Create Person named `name' in world `world'.
     * 
     * @param world
     *            The world where the Person is created.
     * @param name
     *            Name of the Person.
     * @param app
     *            An image used to display the Person.
     */
    public Person(World world, String name, Image app) {
        this.world = world;
        this.name = name;
        this.appearance = app;
        // this.player = player;
        where = world.defaultPlace();
        where.enter(this);

        inventory = Collections.synchronizedCollection(new LinkedList<Thing>());
    }

    /**
     * Go directly, and quietly, to 'place'. That is to say, without posting a
     * message that you're doing so.
     * 
     * @param place
     *            A string referring to the Place to go to.
     * @see #goTo(Place)
     * @see #go
     */
    public void goTo(String place) {
        goTo(world.getPlace(place), null);
    }

    /**
     * Go directly, and quietly, to `whereTo'. That is to say, without posting a
     * message that you're doing so.
     * 
     * @param whereTo
     *            The Place to go to. Can be null in which case nothing happens.
     * @see #goTo(String)
     * @see #go
     */
    public void goTo(Place whereTo, Player player) {
        if (whereTo != null) {
            where.exit(this);
            whereTo.enter(this);
            // Update any Player's which are viewing place `where'.
            world.update(where);
            // Record our new position.
            where = whereTo;
            // Also update Player's here.
            world.update(where);
        }

        System.out.println("player:"+player);
        if(player != null){
            player.say("A terrifying skeleton warrior appears!");
        }
        // send a msg which doors are available
        Object[] doorNames = whereTo.exits.keySet().toArray();
        String s = "";
        int i = 1;
        for (Object obj : doorNames) {
            if (i < doorNames.length) {
                s = s + obj.toString().toLowerCase();

                if(i<doorNames.length){

                    s = s+ ",";
                }

            } if (i == doorNames.length && i > 1) {
                s = s + " and " + obj.toString().toLowerCase();
            }
            if (i == doorNames.length && i == 1) {
                s = obj.toString().toLowerCase();
            }
            ++i;
        }
        if (player != null) {
            player.say("There are doors " + s);
        }
    }

package adventure;

import java.awt.*;

/**
 * A Player object enables commands to control a certain person: »you». This
 * object is displayed graphically as a control panel where the user both can
 * control and follow the course of events
 */
public class Player extends Panel {
    private Person me;
    private PlaceView placeview;
    private Commands commands;
    private TextArea textarea;
    private static final long serialVersionUID = 100L;

    /**
     * Creates a new instance of Player, in World w, reflecting Person p.
     * 
     * @param w
     *            The world in which the Player will play in.
     * @param p
     *            The Person associated by Player.
     */
    Player(World w, Person p) {
        setLayout(new BorderLayout());
        setSize(650, 540);

        me = p;
        p.player = this;
        placeview = new PlaceView(me);
        commands = new Commands(me);
        textarea = new TextArea("", 10, 60, TextArea.SCROLLBARS_VERTICAL_ONLY);
        textarea.append("You are in a dungeon. The horrible shrieks of the undead chill your bones.\n");
        textarea.setEditable(false);
        add("West", placeview);
        add("East", commands);
        add("South", textarea);
        w.addPlayer(this);
    }

    /**
     * Display a string in the players graphical interface.
     * 
     * @param text
     *            A string to display.
     */
    void say(String text) {
        textarea.append(text + '\n');
        textarea.repaint();
    }

    /**
     * Returns the Place of the Person associated with the Player.
     * 
     * @return The Place of the Person associated with the Player.
     */
    public Place currentPlace() {
        return me.where;
    }
} 
```

你明白我想要做什么吗？我想要工作的代码是

```
 System.out.println("player:"+player);
    if(player != null && this.name.equals("Skeleton")){
        player.say("A terrifying skeleton warrior appears!");
    } 
```

但是没有实例化作为僵尸的 Person 的玩家引用。唯一实例化了 Player 对象的 Person 是也是 Person 的 Player。

你能帮助我吗？我还在此处发布了 Person、Player 和 World 类的完整版本

[http://pastebin.com/RJCcr2ph](http://pastebin.com/RJCcr2ph) (人) [http://pastebin.com/eYSh8L9Q](http://pastebin.com/eYSh8L9Q) (播放器) [http://pastebin.com/DKvRvEY8](http://pastebin.com/DKvRvEY8) (世界)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:40:10.303

如果我很好地理解了您的问题，那么您希望拥有 2 个类，其中每个类都有另一个类的引用。您需要创建其中一个（让它成为`Foo`），创建另一个类（让它成为`Boo`）并通过`Foo`构造函数传递对它的引用，然后通过 setter 方法设置`Boo`内部类的引用。`Foo`

例如：

```
public static void main(String[] args)
{
    Foo f = new Foo();
    Boo b = new Boo(f);
    f.setBoo(b);
}

class Foo
{
    private Boo b;

    public Foo()
    {
        // ...
    }

    public void setBoo(Boo b)
    {
        this.b = b;
    }
}

class Boo
{
    private Foo f;

    public Boo(Foo f)
    {
        this.f = f;
    }
} 
```

现在，`Foo`有一个参考`Boo`，并且`Boo`有一个参考`Foo`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:40:56.823

首先，您应该在构造函数中实例化 Person 的成员 'player'。

```
this.player = new Player(world, this); 
```

然后，将代码从

```
public void goTo(String place) {
    goTo(world.getPlace(place), null);
} 
```

至

```
public void goTo(String place) {
    goTo(world.getPlace(place), this.player);
} 
```

# javascript - 对齐工具提示对话框顶部

> ID：11341200
> 
> 赞同：0
> 
> 时间：2012-07-05T09:11:36.377
> 
> 标签：javascript, dojo

我正在使用以下代码使用dojo来获得工具提示对话框，通过使用此代码，对话框在文本框下方可见，但我想在文本框上方看到..

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
     <script language="JavaScript" src="dojo/dojoroot/dojo/dojo.js" type="text/javascript">    
        </script>
         <script language="JavaScript" src="dojo/dojoroot/dijit/TooltipDialog.js" type="text/javascript" >    
        </script>
<link rel="stylesheet" href="dojo/dojoroot/dijit/themes/claro/claro.css" />

        <script>
         dojo.require("dijit.TooltipDialog");

dojo.ready(function(){
    var myTooltipDialog = new dijit.TooltipDialog({
        id: 'myTooltipDialog',
        style: "width: 100px;",

        content: "<p>Nitin.",
        onMouseLeave: function(){
            dijit.popup.close(myTooltipDialog);
        }
    });

    dojo.connect(dojo.byId('thenode'), 'onmousedown', function(){ dijit.popup.open({popup: myTooltipDialog, around: dojo.byId('thenode')}) ;});
});
        </script>

    </head>
    <body class="claro">

<br/>
<br/>
 <input type="text" id="thenode"/>

    </body>
</html> 
```

请给我一些解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T16:51:43.707

在 dijit.popup.open 函数的参数对象中指定 'orient' 属性。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JSP Page</title>
<script src="./dojo-release-1.7.3-src/dojo/dojo.js"></script>
<link rel="stylesheet" href="./dojo-release-1.7.3-src/dijit/themes/claro/claro.css" />
<script>
  require([ "dojo/ready", "dijit/TooltipDialog" ], function(ready, TooltopDialog) {
    ready(function(){
      var myTooltipDialog = new TooltopDialog({
        id : 'myTooltipDialog',
        style : "width: 100px;",

        content : "<p>Nitin.</p>",
        onMouseLeave : function() {
          dijit.popup.close(myTooltipDialog);
        }
      });

      dojo.connect(dojo.byId('thenode'), 'onmousedown', function() {
        dijit.popup.open({
          popup : myTooltipDialog,
          around : dojo.byId('thenode'),
          orient: ['above']
        });
      });
    });
  });
</script>
</head>
<body class="claro">
  <br />
  <br />
  <br />
  <br />
  <input type="text" id="thenode" />
  <br />
  <br />
  <br />
  <br />
</body>
</html> 
```

Dojo/dijit/popup.js:252 在 Dojo 1.7.3 版本中。

```
orient = args.orient || ["below", "below-alt", "above", "above-alt"], 
```

# java - 提取嵌入在 pdf 中的图像的名称

> ID：11341201
> 
> 赞同：1
> 
> 时间：2012-07-05T09:11:38.450
> 
> 标签：java, itext, pdfbox

我有一个包含多张图片的 pdf 文档。

我想检索这些图像的名称。

如何使用 iText 或 pdfbox 来实现这一点？

我知道 ExtractImages 从 PDF 中提取图像。我觉得这将在某个地方具有获取图像名称的功能。但是，我不知道 ExtractImages 的用法。

获取 PDF 名称的实际问题是使用它来压缩这些图像以减小 pdf 的大小。我的方法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:44:25.690

使用 pdfbox 可以得到的是图像的键和它的后缀（类型）。您也可以保存该图像。

```
 String prefix = new File(pdfFilename).getName();
    prefix = prefix.substring(0, prefix.indexOf(".pdf"));

    PDDocument document = null;

    try
    {
        document = PDDocument.loadNonSeq(new(pdfFilename), null); // use non-seq parser is better

        List<PDPage> pages = document.getDocumentCatalog().getAllPages();
        System.out.println(pdfFilename + ": Total pages: " + pages.size());
        int p = 0;
        for (PDPage page : pages)
        {
            ++p;
            PDResources resources = page.getResources();
            Map<String, PDXObjectImage> imageResources = resources.getImages();
            for (String key : imageResources.keySet())
            {
                PDXObjectImage objectImage = imageResources.get(key);
                System.out.printf("image key '%s': %d x %d, type %s%n", key, objectImage.getHeight(), objectImage.getWidth(), objectImage.getSuffix());

                // write that image
                String fname = String.format("%s-%04d-%s", prefix, p, key);
                objectImage.write2file(fname);
            }
        }
    }
    // put catch here
    document.close(); 
```

但是，除非您确定所有这些图像都直接转换为 PDF，即没有旋转、平移或缩放，否则这对您没有帮助。如果您需要这个，那么您可能想查看 PDFBOX src 下载中的 PrintImageLocations.java 示例。

# workflow - CRM 2011，以编程方式停止自定义工作流

> ID：11341204
> 
> 赞同：3
> 
> 时间：2012-07-05T09:11:46.087
> 
> 标签：workflow, dynamics-crm-2011

我一直在尝试以编程方式停止工作流程。我在各种帖子和 msdn 中都阅读过，这可以通过更新请求更新异步操作状态来完成。但是每次我更新请求。工作流卡在中间阶段，例如取消或暂停，并且没有达到最终状态。

有任何想法吗？

```
protected void ExecutePostAccountUpdate(LocalPluginContext localContext)
    {
        if (localContext == null)
        {
            throw new ArgumentNullException("localContext");
        }

        string fetchXML = "<fetch mapping='logical' count='50' version='1.0'>" +
                          "<entity name='asyncoperation'>" +
                          "<filter>" +
                          "<condition attribute='regardingobjectid' operator='eq' value='" +
                          localContext.PluginExecutionContext.PrimaryEntityId + "' />" +
                          "</filter>" +
                          "</entity>" +
                          "</fetch>";
        EntityCollection col = localContext.OrganizationService.RetrieveMultiple(new FetchExpression(fetchXML));
        if (col.Entities.Count > 0)
        {
            AsyncOperation a = (AsyncOperation)col[0];
            a.StateCode = AsyncOperationState.Completed;
            a.StatusCode = new OptionSetValue(32);
            localContext.OrganizationService.Update(a);

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T14:46:55.460

看看我的博客：[如何使用 C# 以编程方式取消工作流](http://hayercrm.blogspot.co.uk/2014/05/crm-2011-how-to-cancel-workflow-using-c.html)

确保用户有权取消系统作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-26T11:09:09.817

```
QueryExpression queryExpression = new QueryExpression("asyncoperation") { ColumnSet = new ColumnSet("statuscode") };
        queryExpression.Criteria.AddCondition("name", ConditionOperator.Equal, Name of Workflow);
        queryExpression.Criteria.AddCondition("regardingobjectid", ConditionOperator.Equal, regardingobjectId);
        var asyncOperations = organizationService.RetrieveMultiple(queryExpression);

        foreach (var asyncOperation in asyncOperations.Entities)
        {
            if (((OptionSetValue)asyncOperation["statuscode"]).Value == 10 || // Waiting
                ((OptionSetValue)asyncOperation["statuscode"]).Value == 20 || // In Process
                ((OptionSetValue)asyncOperation["statuscode"]).Value == 0)
            {
                Entity operation = new Entity("asyncoperation")
                {
                    Id = asyncOperation.Id,
                    ["statecode"] = new OptionSetValue(3),
                    ["statuscode"] = new OptionSetValue(32)
                };

                organizationService.Update(operation);
            }
        } 
```

确保用户有权取消系统作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:40:12.977

根据[这篇文章](http://social.microsoft.com/Forums/en/crm/thread/3386e6e4-4ed0-495f-9a83-1e54d13e4e46)，您似乎可以通过代码取消发布工作流。

**注意：这不一定会停止正在进行的工作流，但会阻止启动该类型的任何新工作流。**

```
const int WorkflowStatusDraft = 1;
const int WorkflowStatusPublished = 2;

public void PublishWorkflow(Guid workflowId)
{
    SetStateWorkflowRequest publishRequest = new SetStateWorkflowRequest();
    publishRequest.EntityId = workflowId;
    publishRequest.WorkflowState = WorkflowState.Published;
    publishRequest.WorkflowStatus = WorkflowStatusPublished;

    this.CrmService.Execute(publishRequest);
}

public void UnpublishWorkflow(Guid workflowId)
{
    SetStateWorkflowRequest unpublishRequest = new SetStateWorkflowRequest();
    unpublishRequest.EntityId = workflowId;
    unpublishRequest.WorkflowState = WorkflowState.Draft;
    unpublishRequest.WorkflowStatus = WorkflowStatusDraft;

    this.CrmService.Execute(unpublishRequest);
} 
```

# php - 如何采取 不提交表单的变量

> ID：11341206
> 
> 赞同：0
> 
> 时间：2012-07-05T09:11:51.750
> 
> 标签：php, options

我正在尝试获取一个`<option>`变量，以便可以使用它来计算产品的总价格。

例如，`<option>`是项目的数量。我需要将其与价格相乘才能得到总数。总数将显示在与下拉列表相同的页面上。如何将变量分配给选择选项？

```
<?php 
    if ($product->quantity < $product->max) $q = $product->quantity;
    if ($product->quantity > $product->max) $q = $prodcut->max;
    if ($product->quantity = $product->max) $q = $product->max;

    for($i=1; $i<=$q; $i++){ 
        echo '<option value="'.$i.'">'.$i.'</option><br/>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:19:56.190

如果我理解正确，您希望能够在页面上动态显示项目的子项？

最好的方法是使用 javascript (jQuery)。一旦页面在您的浏览器上呈现，它就不再在服务器端运行。PHP 是一种服务器端编程语言，因此一旦 HTML 交付给浏览器就无法运行。

有两种方法可以解决这个问题。您可以使用[ajax](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://api.jquery.com/jQuery.ajax/&ei=ZFv1T4jxBoXw8QODs_SRBw&usg=AFQjCNF1ITsE5bJBc65MY4nqhZq7OkHZpg)（链接到 jQuery 的 ajax 函数）通过​​ javascript 将选项值发送到 php 脚本，该脚本将计算价格并将其发送回。

但是，由于它是一个非常简单的计算，不需要服务器端编程，最好只在客户端进行。例如在 jQuery 中

```
jQuery(document).ready(function($){
    $('select#qty').change(function(){
        var price = parseFloat($('input#price').val()); // hidden input with price in it
        var qty = parseInt($('select#qty').val()); // option selected with qty
        var total = price * qty; // calculate total
        $('div#total').text(total); // update the div showing the total
    });
}); 
```

# android - 如何从 android 提供者日期调用日志中转换日期？

> ID：11341207
> 
> 赞同：0
> 
> 时间：2012-07-05T09:11:53.213
> 
> 标签：android, android-contentprovider

我想从 android 提供商通话记录转换日期。实际日期为 1341238489840。

```
int _DATE =  calls.getColumnIndex(android.provider.CallLog.Calls.DATE);
String date = calls.getString(_DATE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:15:46.487

用于`SimpleDateFormat`格式化日期。

```
 Date dt=new Date(1341238489840L); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:25:39.827

你可以给我这段代码吗？我已经测试过了

```
public class CDate {
        public static void main(String[] args) {
            Date date = new Date(1341238489840L);
            System.out.println(new SimpleDateFormat("dd:MM:yyyy", Locale.ENGLISH)
                    .format(date));
        }
    } 
```

# android - ID 元素不显示

> ID：11341211
> 
> 赞同：0
> 
> 时间：2012-07-05T09:12:06.390
> 
> 标签：android, cordova

我是 Web 开发和 Phonegap/Cordova 的新手。在下面的代码中，我预计该表将与版本、uuid 等一起归档，但我得到一个空列。

```
<!DOCTYPE HTML>
<html>
<head>
<title> Phone Gap </title>
<script type="text/javascript" src="cordova-1.9.0.js"></script>
<script type="text/javascript">

function onDeviceReady() {
    document.getElementById("deviceName").innerHtml=device.name;
    document.getElementById("version").innerHtml=device.cordova;
    document.getElementById("uuid").innerHtml=device.uuid;
}

function init() {
    document.addEventListener("deviceready", onDeviceReady, false);
}
</script>
</head>
<body onLoad="init()">
    <h1>Device Info </h1>
    <table border="1">
        <tr>
            <td>Device Name</td>
            <td id="deviceName"></td>
        </tr>
        <tr>
            <td>Version</td>
            <td id="version"></td>
        </tr>
        <tr>
            <td>UUID</td>
            <td id="uuid"></td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:03:12.270

它是innerHTML 不是innerHtml。

```
function onDeviceReady() {
    document.getElementById("deviceName").innerHTML=device.name;
    document.getElementById("version").innerHTML=device.cordova;
    document.getElementById("uuid").innerHTML=device.uuid;
} 
```

# jquery - jQuery单击并拖动3次触发事件

> ID：11341214
> 
> 赞同：0
> 
> 时间：2012-07-05T09:12:14.377
> 
> 标签：jquery, jquery-ui, click, drag

我试图弄清楚如何触发一个事件，在元素上单击并拖动 3 次后会触发一个事件。场景是摩擦“阿拉丁神灯”（我知道）——当你点击并拖动左/右/左或右/左/右时——之后会发生一些事情。

除了触发 click() 事件然后可能使用 jQuery UI 拖动之外，我真的不知道从哪里开始——只是一个猜测——任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:23:18.103

您应该阅读 jQuery UI[可拖动文档](http://jqueryui.com/demos/draggable/)。您可以使用[dragstop 事件](http://jqueryui.com/demos/draggable/#event-stop)。
一个简单的例子：
构造一个元素`lamp`和（例如）另一个元素`hand`。当您拖动`hand`悬停时`lamp`，如果您`hand`确实悬停了 ，则可以将其存储在布尔变量中`lamp`。如果是`true`什么时候，那么你可以增加另一个包含悬停`dragstop`次数的变量。然后，如果这个数字等于 3，请展示天才 :) ！`hand``lamp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:29:01.940

好的 - 找到了解决方案 - 这个插件做得很好：[Jquery Gestures](http://www.jsplugins.com/Scripts/Plugins/View/Jquery-Gestures/)

感谢大家！

# wpf - 如何在 WPF 应用程序中使用 Windows 8 运行时类 MediaCapture 来显示网络摄像头预览？

> ID：11341217
> 
> 赞同：2
> 
> 时间：2012-07-05T09:12:18.293
> 
> 标签：wpf, windows, windows-runtime

我正在开发 Windows 8 WPF 桌面应用程序。我需要在我的应用中预览网络摄像头。我知道 MediaCapture 类允许这样做（[http://msdn.microsoft.com/en-US/library/windows/desktop/windows.media.capture.mediacapture](http://msdn.microsoft.com/en-US/library/windows/desktop/windows.media.capture.mediacapture)），但我无法在 WPF 应用程序中使用 MediaCapture 类任何想法，任何帮助如何做到这一点？谢谢。

更新：我正在使用以下代码，它崩溃了：

```
 async private void StartWebCamPrev()
    {
        Windows.Media.Capture.MediaCapture mediaCapture = new Windows.Media.Capture.MediaCapture();
        await mediaCapture.InitializeAsync();
        await mediaCapture.StartPreviewAsync();
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T13:37:21.867

Windows.* 命名空间属于 Windows 运行时 (WinRT)。大多数 WinRT UI API 不适用于桌面/WPF/.NET 应用程序，因此您的方法行不通。您可以使用几乎任何其他技术来显示网络摄像头预览，因为 WPF 应用程序可以与许多其他技术集成 - DirectShow 最为显着。我将从[WPF MediaKit](https://github.com/Sascha-L/WPF-MediaKit)开始。

# javascript - 使用 On Keyup 功能进行直播

> ID：11341218
> 
> 赞同：1
> 
> 时间：2012-07-05T09:12:24.360
> 
> 标签：javascript, jquery

我想在 ajax 调用（意味着 .live）之后执行此代码我应该如何更改代码？

```
var el=document.getElementById('txt_url');
el.onkeyup=function(){
    var str=el.value;
    if(str=='') return;   
    if(str.indexOf('http://')==-1 && str.length >= 7)
    el.value='http://'+str;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:23:04.910

要将处理程序实时绑定到元素，请使用 jQuery[`.on()`](http://api.jquery.com/on/)方法。（从 jquery 1.7 开始）

```
$("body").on("keyup","#txt_url",function(){
   // your code
}); 
```

它取代了不推荐使用的[`.live()`](http://api.jquery.com/live/)处理程序。

此外，如果您使用 jQuery，我建议您始终如一地使用它 - 也用于元素选择和处理程序绑定。

或者，您可以在成功函数中绑定处理程序，但我更喜欢以更一致的方式进行事件绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:23:33.720

您需要设置成功处理程序：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    var el=document.getElementById('txt_url');
    el.onkeyup=function(){
        var str=el.value;
        if(str=='') return;   
        if(str.indexOf('http://')==-1 && str.length >= 7)
        el.value='http://'+str;   
    }
  }
}); 
```

[jQuery Ajax 文档](http://api.jquery.com/jQuery.ajax/)

# android - Android：如何更改我的 ExpandAnimation 类以正确处理动画？

> ID：11341221
> 
> 赞同：0
> 
> 时间：2012-07-05T09:12:40.690
> 
> 标签：android, android-animation

这是我从 Udnic 获取的动画课程 - 感谢 m8，但我“不是从关闭位置而是从打开位置”使用它，它会跳跃并且行为不正确。

我应该怎么办？

```
 public class ExpandAnimation extends Animation {
    private View mAnimatedView;
    private LinearLayout.LayoutParams mViewLayoutParams;
    public int mMarginStart, mMarginEnd;
    private boolean mIsVisibleAfter = false;
    private boolean mWasEndedAlready = false;
    private ImageView mImageView;
    /**
     * Initialize the animation
     * @param view The layout we want to animate
     * @param duration The duration of the animation, in ms
     */
    public ExpandAnimation(View view, int duration, ImageView imageView) {
        setDuration(duration);
        mImageView = imageView;
        mAnimatedView = view;
        mViewLayoutParams = (LinearLayout.LayoutParams) view.getLayoutParams();

        mMarginStart = mMarginEnd = 0;
        // decide to show or hide the view
        mIsVisibleAfter = (view.getVisibility() == View.VISIBLE);
        //mIsVisibleAfter = (mViewLayoutParams.bottomMargin == 0);

        mMarginStart = mViewLayoutParams.bottomMargin;
        if(mMarginStart != 0)
            mMarginStart = 0 - view.getHeight();
        mMarginEnd = (mMarginStart == 0 ? (0 - view.getHeight()) : 0);

        view.setVisibility(View.VISIBLE);
        mImageView.setImageResource(R.drawable.expand_open);
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);

        if (interpolatedTime < 1.0f) {

            // Calculating the new bottom margin, and setting it
            mViewLayoutParams.bottomMargin = mMarginStart
                    + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

            // Invalidating the layout, making us seeing the changes we made
            mAnimatedView.requestLayout();

            // Making sure we didn't run the ending before (it happens!)
        } else if (!mWasEndedAlready) {
            mViewLayoutParams.bottomMargin = mMarginEnd;
            mAnimatedView.requestLayout();

//          if (mIsVisibleAfter) {
            if(mMarginEnd != 0) {
                mAnimatedView.setVisibility(View.GONE);
                mImageView.setImageResource(R.drawable.expand_close);
            }
            mWasEndedAlready = true;
        }
    }
} 
```

# matlab - MATLAB 只打印我图的一部分

> ID：11341222
> 
> 赞同：1
> 
> 时间：2012-07-05T09:12:43.340
> 
> 标签：matlab, matlab-figure, figure

我正在尝试在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中打印我的图形，但它一直在搞砸，我不知道为什么。

```
opslaan = figure(1);
        plot(1:handles.aantal,handles.nauw,'-r','LineWidth',1.5);
        xlabel(gca,sprintf('Framenummer (%g ms per frame)',60/handles.aantal));
        ylabel(gca,'dB');
        set(gca,'YGrid','on');
        yAsMax = ceil( ceil(max(handles.nauw)) / 2) * 2;
        axis([0 handles.aantal 0 yAsMax]);
        pause(1);
        print -dpng image.png 
```

第一行只是在我的图形上绘制数据，然后标记 x 和 y，打开网格并像我想要的那样计算 y 轴。这一切都很好，MATLAB 在图形窗口中显示它就像我想要的那样。当保存到 .png / .jpeg / .eps 时，它会出错并且只打印左下角（473x355 像素），其余的就消失了。

通过*File* -> *Save As*手动导出时，它可以正常工作。

我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T08:44:28.820

*[Making Pretty Graphs](http://blogs.mathworks.com/loren/2007/12/11/making-pretty-graphs/)*这篇文章包含一个关于如何从[MATLAB](http://en.wikipedia.org/wiki/MATLAB)图形生成可发布图像的优秀教程。

通常，以编程方式将图形打印到图像文件应包含以下步骤。

```
% Some data to be plotted
t1 = 0:0.1:4*pi ;
t2 = 0:0.01:4*pi ;
f1 = sin(t1) + randn(size(t1))/10 ;
f2 = sin(t2) + cos(t2.^2)/10 + randn(size(t2))/100 ;

% Define the styles to be used
linstyle_11 = {'LineStyle','--','Color',[.3 .6 .6],'LineWidth',1} ;
linstyle_12 = {'LineStyle','o','Color',[.3 .6 .6],'LineWidth',2,'MarkerSize',8,'MarkerFaceColor','m'} ;
linstyle_2 = {'Color',[.6 .3 .6],'LineWidth',3} ;
titleprops = {'FontSize',24,'FontWeight','bold',...
    'FontName','FixedWidth','FontAngle','oblique',...
    'Interpreter','None'} ;
axisprops = {'FontSize',20,'FontWeight','normal','FontName','FixedWidth'} ;
ylim_s = [-2 2] ;

% Set up the figure for PNG/JPEG export
canvas = [1 1 2048 1024] ;
fh = figure(1);
set( fh, ...
    'PaperPositionMode','auto', ...
    'Position',canvas ) ;

% Do the plotting and apply styles
ha1 = subplot(2,1,1);
hp11 = plot(t1,f1);
hold on
hp12 = plot(t1,f1);
hold off
title('subplot 1',titleprops{:})
xlabel('t',titleprops{:})
ylabel('f1',titleprops{:})

ha2 = subplot(2,1,2);
hp2 = plot(t2,f2);
title('subplot 2',titleprops{:})
xlabel('t',titleprops{:})
ylabel('f2',titleprops{:})

% finish appliing styles
set(hp11,linstyle_11{:}) ;
set(hp12,linstyle_12{:}) ;
set(hp2,linstyle_2{:}) ;
set(ha1,axisprops{:}) ;
set(ha2,axisprops{:}) ;

% Print
outfname = 'test' ;
print(fh,'-dpng',[outfname,'.png']) ;

% Sometimes it's better to use vector graphics ==>
% alter figure properties to allow proper PDF printouts.
set( fh, ...
        'PaperSize', [29.71 13.01], ...
        'PaperPosition', [0.01 0.01 29.7 13.0] ) ;

% print to pdf file
print(fh,'-dpdf',[outfname,'.pdf']) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:18:27.843

尝试使用以下行而不是您已有的打印行。

打印（opslaan，'-dpng'，'image.png'）

另一种选择是调查`imwrite`.

# permissions - 如何在 WIX 中授予 INSTALLDIR 文件夹权限？

> ID：11341225
> 
> 赞同：1
> 
> 时间：2012-07-05T09:13:01.747
> 
> 标签：permissions, installation, wix

我正在设计一个 WIX 3.6 安装程序项目，在安装过程中我们需要授予用户对安装文件夹（INSTALLDIR）的创建文件权限，特别是对于默认安装文件夹 Program Files，用户通常无法在安装中创建文件. 我们经历了一些失败）。我想这可以通过使用 CreateFile 属性设置 Permission 元素来实现。但是，INSTALLDIR 是一个目录，只有 CreateFolder、File、FileShare、Registry、ServiceInstall 这样的元素可以有权限元素。那么谁能告诉我该怎么做？我的目录声明是这样的：

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFiles64Folder">
      <Directory Id='MANUFACTUREFOLDER' Name='$(var.ManufacturerName)'>
        <Directory Id="INSTALLDIR" Name="$(var.ProductName)"> 
```

谢谢！

更新：现在我设法创建了一个文件（不是部署的文件。而是基于一个部署的文件生成的文件，它是在提交阶段的自定义操作中生成的）。但是，我现在在删除刚才描述的部署文件时遇到了问题（因为其他文件生成成功后就没有用了）。当安装文件夹为 Program Files 时，我无法在自定义操作中将其删除。它说访问被拒绝。

另一件事是，我真的不明白 CreateFolder 元素的用途。如果它的目的是创建一个文件夹，顾名思义，嵌套目录不做同样的事情，就像在我的示例代码中一样？而且我认为在那里描述文件夹结构更清楚，因为将 Component 元素（其中将驻留 CreateFolder 元素）和 Directory 元素分开是很常见的。组件将只使用 DirectoryReference 来引用正确的目录。其次，多个组件驻留在同一个目录中也很常见。因此，如果我将 CreateFolder 添加到其中一个组件中，并将默认目录作为这些组件的公共父目录，它甚至意味着什么？这样的结构真的不直观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:59:19.927

如您所述， CreateFolder 元素可能具有 Permission 元素，如果未指定目录，它们默认为父组件的目录。所以结构看起来像下面这样。

```
<Directory Id="INSTALLDIR" Name="$(var.ProductName)">
  <Component>
    <CreateFolder>
      <Permission>
      </Permission>
    </CreateFolder>
  </Component>
</Directory> 
```

但是，根据 Vista 和 Windows 7 的限制以及 Windows 徽标指南，如果您对此仍有疑问，我不会感到惊讶，因为 Program Files 目录已被完全锁定。安装后，您不应写入此目录。

# sql - rails belongs_to 使用 NULL id 的 sql 语句

> ID：11341226
> 
> 赞同：2
> 
> 时间：2012-07-05T09:13:04.743
> 
> 标签：sql, ruby-on-rails, performance, null

通过我们的短语表进行分页时，返回结果需要很长时间。

在 sql 日志中，我们看到许多对我们没有意义的 sql 请求：

```
Phrase Load (7.4ms)  SELECT "phrases".* FROM "phrases" WHERE "phrases"."id" IS NULL LIMIT 1
User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1 
```

这些加起来显着。有没有办法防止查询空 id？

这是底层模型：

```
class Phrase < ActiveRecord::Base
  belongs_to :user 
  belongs_to :response, :class_name => "Phrase",  :foreign_key => "next_id"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:13:33.723

在我们的例子中，罪魁祸首隐藏在我们自己的代码中，即在一个太阳黑子块中，它在保存/更新时被调用：

```
 searchable do
    integer :previous_ids, :multiple => true do
      previous.map { |previous| previous.id }
    end 
```

# java - DOM解析XML

> ID：11341233
> 
> 赞同：0
> 
> 时间：2012-07-05T09:13:52.747
> 
> 标签：java, xml, dom

```
 NodeList nList2 = doc.getElementsByTagName("dep");
    Map<String, List<Map<String, String>>> depMap = new HashMap<String, List<Map<String, String>>>();
    for (int temp = 0; temp < nList2.getLength(); temp++) {
      Element el = (Element)nList2.item(temp);
      String type=el.getAttribute("type");
      Node nNode = nList2.item(temp);
      if (nNode.getNodeType() == Node.ELEMENT_NODE) {
        Element eElement = (Element) nNode;
        List<Map<String,String>> depList = new ArrayList<Map<String,String>>();
        String governor = getTagValue("governor", eElement);
        String dependent = getTagValue("dependent", eElement);
        Map<String, String> govdepmap = new HashMap<String, String>();
        govdepmap.put(governor, dependent);
        depList.add(govdepmap);
        List<Map<String,String>> flist = new ArrayList<Map<String,String>>();
        flist.add(govdepmap);
        depMap.put(type, flist);
      }
    } 
```

我的 XML 文件中有以下结构：

```
 <basic-dependencies>
              <dep type="nsubj">
                <governor idx="4">going</governor>
                <dependent idx="1">I</dependent>
              </dep> 
```

现在我想存储每个“州长”和“依赖”标签的“idx”属性。我应该更改或添加什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:26:40.457

您可以执行以下操作：

```
 NodeList liste = eElement.getElementsByTagName("governor");
    NodeList liste2 = eElement.getElementsByTagName("dependent"); 
```

如果一位州长总是有一位家属，您可以这样做：

```
 for(int i=0; i<liste.getLength(); i++){
        Element e = (Element)liste.item(i);
        Element e2 = (Element)liste2.item(i);
        govToIdxMap.put(governor,e.getAttribute("idx"));
        depToIdxMap.put(dependent,e2.getAttribute("idx"));
    }
    List<Map<String,String>> listMap = new ArrayList<>();
    listMap.add(govToIdxMap);
    listMap.add(depToIdxMap);
    Map<String,List<Map<String,String>>> final = new Map<String,List<Map<String,String>>>();
    final.put(governor,listMap); 
```

# android - 垂直对齐 ViewPager 和 TextView

> ID：11341241
> 
> 赞同：0
> 
> 时间：2012-07-05T09:14:27.797
> 
> 标签：android, textview, android-relativelayout, android-viewpager, vertical-alignment

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Layout-Normal-Portrait -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/thumb_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <android.support.v4.view.ViewPager
            android:id="@+id/mypager"
            android:layout_width="fill_parent"
            android:layout_height="300dp"
            android:layout_above="@id/sum_layout"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" >
        </android.support.v4.view.ViewPager>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/sum_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@id/thumb_layout" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="6dp"
            android:text="@string/lorem__ipsum"
            android:textColor="@color/black" />
    </RelativeLayout>

</RelativeLayout> 
```

一旦我运行程序，它就会在编辑器中显示一个错误，说“**错误：错误：找不到与给定名称匹配的资源（在'layout_above'，值为'@id/sum_layout'）。** ”在第22行在这段代码中。

任何人都可以告诉，什么是错的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:34:09.523

我想知道你为什么把它弄得这么复杂。

无论如何，这里是更正的片段

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Layout-Normal-Portrait -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > <---No need to specify android:orientation

    <android.support.v4.view.ViewPager
        android:id="@+id/mypager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/textView" />

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:padding="6dp"
        android:text="Hello"
        android:textColor="@android:color/black" />  <---Place your text String here 

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:20:54.220

这是因为您在第一次引用之后声明了 sum_layout id。最好的解决方案是在 /res/values/ids.xml 中声明它，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources> 
     <item type="id" name="sum_layout" />
</resources> 
```

然后在您的所有布局中引用它而不使用 + 关键字

```
 <android.support.v4.view.ViewPager
        android:layout_above="@id/sum_layout"
    /> 
```

和

```
 <RelativeLayout android:id="@id/sum_layout" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:38:18.643

当您使用相对布局时，您将控件彼此关联。当您添加任何控件时，您添加下一个控件相对于之前定义的控件。同样在这里您定义了视图寻呼机布局，该布局位于具有 id @+id 的布局下/sum_layout。但是您在视图分页器下定义了布局@+id/sum_layout。所以它没有得到id@+id/sum_layout，所以它将如何在文本视图下设置视图分页器。首先添加视图，然后添加到它的下/上。这是你的错误：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <android.support.v4.view.ViewPager
            android:id="@+id/mypager"
            android:layout_width="fill_parent"
            android:layout_height="300dp">    
    </android.support.v4.view.ViewPager>

    <TextView 
        android:id="@+id/mytext"
        android:text="@string/lorem__ipsum"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mypager"/>
</RelativeLayout> 
```

根据此设置布局，无论您必须保持其下方或上方。希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:17:44.440

利用`@+id/sum_layout`

并清理项目并再次运行！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T09:25:49.763

尝试这个

```
xmlns:tools="http://schemas.android.com/tools"

android:layout_width="fill_parent"

android:layout_height="fill_parent"

android:background="@color/white"

android:orientation="vertical" >

<android.support.v4.view.ViewPager

    android:id="@+id/mypager"

    android:layout_width="fill_parent"

    android:layout_height="300dp"

    android:layout_alignParentLeft="true"

    android:layout_alignParentRight="true"

    android:layout_alignParentTop="true" >

</android.support.v4.view.ViewPager>

<TextView
    android:layout_width="fill_parent"

    android:layout_height="wrap_content"

    android:padding="6dp"

    android:textColor="@color/black" /> 
```

# jquery - 使用 jQuery 的 .each() 函数将函数附加到多个幻灯片容器

> ID：11341242
> 
> 赞同：0
> 
> 时间：2012-07-05T09:14:29.047
> 
> 标签：jquery, function, cycle, each

我在一个单页网站上有很多小的 jQuery Cycle 幻灯片 div（容器），比如

```
 <div class="foo bar" data-value="1000"> // data-value varies on each container
        <img src="directory/img_0.jpg" alt="img 0" />
        <img src="directory/img_1.jpg" alt="img 1" />
        <img src="directory/img_2.jpg" alt="img 2" />
    </div> 
```

并希望将它们全部循环 -**每个幻灯片 div 具有不同的数据值**- 无需硬编码/重复

```
$(document).ready(function() {
  $('.foo.bar').cycle({
      speed: 300,
      timeout: 6000,
      delay: $('.foo.bar').data('value')
  });
}); 
```

对于此类幻灯片 div 的所有出现。如何将此类 jQuery 函数“附加”或“绑定”或“链接”到每个幻灯片 div，以便使用每个元素的不同数据值？我怀疑 jQuery 的 .each() 函数可以让我这样做——但是怎么做呢？

编辑[小提琴](http://jsfiddle.net/6mU9S/6/ "小提琴")

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:29:01.847

正如你提到的，`.each()`会让你很容易做到这一点：

```
$('.foo.bar').each(function() {
    $(this).cycle({
      speed: 300,
      timeout: 6000,
      delay: $(this).data('value')
    });
}); 
```

在`.each`回调内部，`this`指的是您当前正在操作的元素。

# node.js - Node.js 安装失败。日志在哪里？

> ID：11341245
> 
> 赞同：5
> 
> 时间：2012-07-05T09:14:41.053
> 
> 标签：node.js

正忙于尝试通过 nodejs 网站上的 windows 下载设置 node.js。它似乎一直运行到最后，当它遇到“正在创建快捷方式......”然后开始回滚并得到一个非常无用的一般错误。

是否没有我可以检查的日志文件以查看发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T02:03:01.340

我的首选选项是使用[WiX 网站上指示](http://wixtoolset.org/documentation/manual/v3/howtos/general/get_a_log.html)的命令行 msiexec 工具： `msiexec /i MyApplication.msi /l*v MyLogFile.txt`

我从未使用过的另一个选项是[按照 Microsoft 网站上的说明](http://support.microsoft.com/kb/223300)编辑注册表：

```
To enable Windows Installer logging yourself, open the registry with Regedit.exe and create the following path and keys:
HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Installer

Reg_SZ: Logging
Value: voicewarmupx
The letters in the value field can be in any order. Each letter turns on a different logging mode. Each letter's actual function is as follows for MSI version 1.1:
v - Verbose output
o - Out-of-disk-space messages
i - Status messages
c - Initial UI parameters
e - All error messages
w - Non-fatal warnings
a - Start up of actions
r - Action-specific records
m - Out-of-memory or fatal exit information
u - User requests
p - Terminal properties
+ - Append to existing file
! - Flush each line to the log
x - Extra debugging information. The "x" flag is available only on Windows Server 2003 and later operating systems, and on the MSI redistributable version 3.0, and on later versions of the MSI redistributable.

"*" - Wildcard, log all information except for the v and the x option. To include the v and the x option, specify "/l*vx".
Note This should be used only for troubleshooting purposes and should not be left on because it will have adverse effects on system performance and disk space. Each time you use the Add/Remove Programs tool in Control Panel, a new Msi*.log file is created. 
```

# mysql - 带有消息“PDO 连接错误：SQLSTATE [28000] [1045] 的 Doctrine_Connection_Exception”

> ID：11341249
> 
> 赞同：0
> 
> 时间：2012-07-05T09:14:46.843
> 
> 标签：mysql, codeigniter, doctrine, doctrine-orm, codeigniter-2

请帮助我深入了解此错误：

> 致命错误：未捕获的异常 'Doctrine_Connection_Exception' 带有消息'PDO 连接错误：SQLSTATE [28000] [1045] 用户'root'@'localhost' 的访问被拒绝（使用密码：否）'

检查了我的数据库配置文件，它读取正确，

下面是我的配置文件：

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = 'mypassword';
$db['default']['database'] = 'mydb';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

如果有任何帮助，我正在运行 Doctrine 2.xx + COdeigniter 2.xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:47:46.323

在 phpmyAdmin 中删除密码似乎可以解决问题，尽管是暂时的。

有趣的是，编辑codeigniter

> 配置文件

似乎不会影响连接状态/错误。

确保通过注释掉允许没有密码的 phpmyAdmin 登录

> $cfg['Servers'][$i]['AllowNoPassword'] = TRUE;

在

> /etc/phpmyadmin/config.inc.php

谢谢。

# svn - SVN介绍

> ID：11341253
> 
> 赞同：2
> 
> 时间：2012-07-05T09:14:58.240
> 
> 标签：svn, branch

我正在与使用 SVN 的其他开发人员合作。我是 SVN 的新手，我想更好地了解如何最好地使用 SVN。

目前我们有：

```
 __ branch developer 1
Project 1                 /___ branch developer 2
      |                  /____ branch developer 3
      |____ branches---- \____ branch developer 4
      |                   \___ branch developer 5
      |____ tags           \__ branch developer 6
      |
      |____ trunk 
```

在开始开发之前，他们要求我：

1.  更新我的分支
2.  从其他分支合并我的分支并解决冲突，所以我必须从dev1，dev2，dev3等合并......提交我的作品

现在，我的问题是……这是正确的方法吗？每次进行如此多的合并都需要很多时间。或者我们应该为所有开发人员只使用一个分支？我真的是 SVN 的新手，我不想做错事......所以我非常感谢你帮助我走上正确的道路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:31:42.800

不，这不是使用 SVN 的正确方法。每个开发人员都没有理由拥有自己的分支。

通常，每个人都在主干上工作。如果某些功能需要很长时间开发并且不能在主干上完成，以免打扰其他开发人员，则创建一个特定的功能分支。来自主干的更改定期合并到此功能分支，一旦该功能在其自己的功能分支中完全开发，该分支将重新集成到主干中，并删除。

如果每个人都必须不断地从其他人的分支合并，这与在主干上工作没有什么不同，只是更痛苦。无论如何，它不会扩展到超过 2 或 3 个开发人员。

我建议阅读免费提供的[SVN 书籍](http://svnbook.red-bean.com/en/1.7/svn-book.html)，其中详细解释了上述所有内容，并与您的同事讨论以使他们采用传统的最佳实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:38:03.933

我个人认为上面的当前实现是疯狂的。目前有 7 个分支（每个开发人员一个），每个分支需要 7 次合并才能开始任何工作。

一旦更多的开发人员加入到团队中，合并策略就会变得异常繁琐，并且容易出现更多错误。在您自己开始开发之前，您冒着必须在 X 个分支中编辑冲突的风险。

我会让每个开发人员都在存储库的主干上工作。当只处理一个 repo 目录时，更容易管理冲突解决和合并。

理想情况下，您希望在最多只需要几天时间即可完成的敏捷工作流程（一小块可管理的小块工作）中工作。任何比这更长的项目都可能值得拥有自己的分支文件夹，纯粹是为了将代码和大量重构从主干中分离出来，以免破坏团队其他成员的工作流程。

一旦完成了这项大任务，您就只有一个分支文件夹可以合并回主干（其他开发人员在他们的工作完成后不断更新）。

应该使用源代码控制系统来简化开发工作流程，而不是更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:35:39.413

就像其他答案告诉你的那样：这种方法简直是脑死。在您最终提交工作之前，您将浪费时间从不同的分支合并。

除此之外：如果您想为每个开发人员拆分内容，为什么不使用像[mercurial](http://mercurial.selenic.com/)或[Git](http://git-scm.com/)这样的分布式 VCS ？

如果你必须学习 SVN（并且还没有被宠坏），你也可以学习[mercurial](http://hginit.com/)或[Git](http://git-scm.com/book)。并且有[充分的理由](http://thinkvitamin.com/code/why-you-should-switch-from-subversion-to-git/)切换。

两年前我为 Git 放弃了 SVN，一天都没有后悔。相反，我喜欢便宜的分支、工作合并、在进入 master 之前返工提交等等。

每个人都在本地工作，当涉及到将东西合并回`master`（也称为`trunk`SVN）时，开发人员合并然后推送到中央仓库。您不必浪费任何关于哪个开发人员应该在哪个分支上工作的想法。

关于分支，这里有一篇关于**成功的 Git 分支模型**的非常受欢迎的文章：http : [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

也许你可以让你的同事相信，转职对他们的工作来说是一个真正的好处。我正在与一个坚持手动合并的人合作，即使我们使用的是 Git。我们每周需要 2 到 3 个小时来同步我们的工作。只有两个人的工作。如果您要合并更多，则需要**更多**时间才能更好地使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:23:47.863

我同意其他人的观点，即您目前的策略是疯狂的！;)

就个人而言，我更愿意将主干保持为稳定的“实时”版本，并将所有开发保留在一个分支上，这样所有开发人员都在同一个分支上工作，您只需在您的功能或项目准备就绪时进行合并活，你知道树干自从你分支以来没有改变。

虽然上面的选项会起作用，但我担心每次主干上发生变化时您都必须不断更新分支，并且增加了冲突的可能性（如果主干是实时代码，则会增加站点/产品损坏的可能性）。

# php - 在 PHP 中对嵌套数组进行排序

> ID：11341255
> 
> 赞同：2
> 
> 时间：2012-07-05T09:15:00.983
> 
> 标签：php, arrays

我有一个看起来像这样的数组，按城市名称排序。PHP中最简单的方法是对该数组进行排序以在顶部显示纽约，然后是伦敦，然后其余部分将按照现在的城市名称进行排序。请记住，这是一个很长的数组，我为这个问题缩短了。

```
Array
(
    [0] => Array
        (
            [0] => Berlin
            [1] => 1
        )

    [1] => Array
        (
            [0] => London
            [1] => 2
        )

    [2] => Array
        (
            [0] => New York
            [1] => 4
        )

    [3] => Array
        (
            [0] => Paris
            [1] => 5
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:37:14.810

希望这可以帮助

```
$arrayCity; //your array
$newYork = null;
$london = null;
// Get London and New York and remove them
foreach ($arrayCity as $key => $item) {
    if ($item[0] == "New York") {
        $newYork = $item;
        unset($arrayCity[$key]);
    } elseif ($item[0] == "London") {
        $london = $item;
        unset($arrayCity[$key]);
    }
    // break if they were found
    if ($newYork && $london) {
        break;
    }
}
// Add them at the top
array_unshift($arrayCity, $newYork, $london); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:37:30.067

一种贫民区解决方案：

```
$arrayCityIndex = array(); // Creating an array for sorting the keys while preserving index numbers.
$arrayNYLondonCityIndex = array();

foreach ($originalArray as $index => $cityArray) // Iterating through the original array.
{
    if ($cityArray[0] != 'New York' && $cityArray[0] != 'London') // Adding non NY and non London to array of indexes first.
    {
        $arrayCityIndex[$cityArray[0]] = $index; // Creates a City Name => Index Number hash.
    }
    else if ($cityArray[0] == 'New York' || $cityArray[0] = 'London')
    {
        $arrayNYLondonCityIndex[$cityArray[0]] = $index;
    }
}

ksort($arrayCityIndex); // Sort the index array by the key

$sortedArray = array();

foreach ($arrayNYLondonCityIndex as $cityName => $index) // Iterate through the hash of indexes and for each city in the hash, return the city's array in the original array (using the associated index number), and add it to the sorted array.
{
    $sortedArray[] = $originalArray[$index];
}

foreach ($arrayCityIndex as $cityName => $index)
{
    $sortedArray[] = $originalArray[$index];
}

var_dump($sortedArray); 
```

这是处理解决方案的一种相当老套的方法，但我认为它应该可以工作。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:38:43.687

使用二分搜索逻辑搜索 London 和 NewYork，删除并将其放在前面。

```
$cityList=<the above array>;
$key="London";
$start=0;
$end=count($cityList);
$mid=($start+$end)/2;
while($end>=$start)
{
if($cityList[$mid][0]==$key)
{
    $keyForLondon=$mid;
    break;
}
elseif(strcmp($cityList[$mid][0],$key)<0)
    $start=$mid+1;
else
    $end=$mid-1;
$mid=($start+$end)/2;
}
$temp=$cityList[$mid];
unset($cityList[$mid]);
array_unshift($temp);
<Similar for New York>
$cityList=array_values(array_filter($cityList)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:58:38.000

您可以将内置函数[`usort()`](http://www.php.net/manual/en/function.usort.php)与自定义排序函数一起使用：

```
 // Input array
    $cities = array(
            array('Berlin', 1),
            array('London', 2),
            array('New York', 4),
            array('Paris', 5),
            array('Test', 12),
            array('Zzz', 3)
    );

    // Custom sort function
    function customFilter($a, $b)
    {
            static $firstEntries = array('New York', 'London');

            foreach ($firstEntries as $name)
            {
                    if ($a[0] == $name)
                            return -1;
                    if ($b[0] == $name)
                            return 1;
            }

            // Unprioritized : sort by name
            return strcmp($a[0], $b[0]);
    }

// Original array order
var_dump($cities);

// Filter and dump of the new array order
usort($cities, 'customFilter');
var_dump($cities); 
```

该`$firstEntries`数组是可定制的，并将优先考虑定义的名称。

# php - 贝宝成功网址不起作用：Codeigniter

> ID：11341256
> 
> 赞同：1
> 
> 时间：2012-07-05T09:15:03.543
> 
> 标签：php, codeigniter, paypal

我关于codeigniter的第一个问题。我已经使用 paypal 库在 codeigniter 中集成了 paypal。一切正常，但是当我返回成功页面时，它给了我“发生错误：您执行的操作无效”。但是可以直接从 url 访问相同的成功页面（我的意思是当我直接将它放在浏览器中时）。

**控制器**

```
function form()
{
$this->paypal_lib->add_field('business', 'xxxxxxx@ymail.com');
$this->paypal_lib->add_field('return', site_url('checkout/paypal/success'));
$this->paypal_lib->add_field('cancel_return', site_url('checkout/paypal/cancel'));
$this->paypal_lib->add_field('notify_url', site_url('checkout/paypal/ipn')); 
$this->paypal_lib->
add_field($this->security->csrf_token_name,   $this->security->csrf_hash); 
}
function success()
{
  echo "success";
} 
```

**路线**

```
$route['checkout/paypal'] = 'checkout/paypal/index';
$route['checkout/paypal/(:any)'] = "checkout/paypal/$1"; 
```

成功页面可直接访问并打印“成功”，但是当我从贝宝返回时，它给了我“发生错误”

在 apache log..getting 500 572 中。我不太确定它反映了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:17:32.820

打开您站点的主配置文件并检查您的 CSRF 设置。我曾经遇到过类似的问题，通过禁用 CSRF 保护解决了。

```
$config['csrf_protection'] = FALSE; 
```

这有什么区别吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T22:03:04.927

```
$config['csrf_protection'] = FALSE; 
```

上面的代码在这种情况下会起作用，尽管你不应该把它关掉，所以在这种情况下：

```
$config['csrf_protection'] = TRUE;

$config['csrf_exclude_uris'] = array('controller/success_function'); 
```

也会成功的。

# iphone - 通过 NSDictionary 获取您不知道“键”的对象？IOS

> ID：11341257
> 
> 赞同：1
> 
> 时间：2012-07-05T09:15:09.157
> 
> 标签：iphone, objective-c, ios, xcode

我有一个从网络服务获得的 NSDictionary。此字典中的每个对象都包含一个数组。我不知道 NSDictionary 中有多少对象，也不知道每个对象的“键”是什么。我只知道它将是一个数组字典。

如何通过字典将对象的名称及其内容读出到数组中？

到目前为止，我与字典的所有交易都可以使用

```
[anotherDict objectForKey:@"accounts"] 
```

因为我知道“钥匙”；提前期待。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:24:27.890

NSDictionary 有方法：`enumerateKeysAndObjectsUsingBlock:`从 iOS 4.0 开始。这很简单，它接收一个块对象来操作字典中的条目。

一个例子：

```
[anotherDict enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
   NSArray *arr = obj;
   //Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:19:18.120

`NSDictionary`类有一个实例方法`-allKeys`，它为所有键返回一个`NSArray`with `NSStrings`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:34:16.180

最简单的方法是通过 allKeys 实例方法获取 allKeys

```
NSArray *keys = [myDictionary allKeys]; 
```

然后为每个键迭代字典。

```
for (NSString *k in keys)
{
    id object = [myDictionary objectForKey:k];
} 
```

您还可以按顺序获取键，就好像值是使用排序的

```
NSArray *sortedKeys = [myDictionary keysSortedByValueUsingSelector:@selector(compare:)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:18:52.630

你可以这样做 ：

```
NSArray * keys = [dictionnary allKeys];
for (NSString *key in keys) {
   NSArray *tmp = [dictionnary objectForKey:key];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T09:19:02.193

我不是专业人士，但我知道您可以获得字典的所有键

```
 NSLog(@"%@",[Your_Dictionary allKeys]); 
```

这将给出该字典中的键数组。

# c# - 是否可以根据搜索项更改网格视图中列的文本颜色？

> ID：11341258
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:15:09.483
> 
> 标签：c#, asp.net, .net, html

**注意**：我需要根据搜索请求更改不同的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:19:19.883

是的，您可以在`GridView.RowDataBound`活动中做到这一点

像这样

```
protected void yourGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[0].BackColor = Color.Beige;
            // 0 could be any valid cell index in your row
        }
    } 
```

欲了解更多信息，请[转到此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# java - Mahout 和数据模型的自定义表

> ID：11341259
> 
> 赞同：0
> 
> 时间：2012-07-05T09:15:11.707
> 
> 标签：java, mysql, mahout

该文档说评级表应如下所示：

```
CREATE TABLE taste_preferences (
  user_id BIGINT NOT NULL,
  item_id BIGINT NOT NULL,
  preference REAL NOT NULL,
  PRIMARY KEY (user_id, item_id)
); 
```

但是，在我的评级实施表中如下：

```
CREATE TABLE taste_preferences (
  profile_id BIGINT NOT NULL,
  event_id BIGINT NOT NULL,
  status_id BIGINT NOT NULL,
  PRIMARY KEY (user_id, item_id)
); 
```

成绩的形式是 status_id（去，不去，也许我会去）。

用户表如下：

```
 CREATE TABLE user (
  profile_id_1 BIGINT NOT NULL,
  profile_id_2 BIGINT NOT NULL,
  profile_id_3 BIGINT NOT NULL,
  ...
); 
```

一个用户可以有多个配置文件，我需要将这些数据与用户进行比较。

我需要自己编写数据模型的实现吗？我看到哪种方式可以解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:40:21.223

这里没有任何形式的评级数据。因此，您不能在推荐中使用评级。没关系; 你只有“布尔”数据。

或者，你说你需要使用状态，但我不清楚你想如何使用它。

你当然可以使用你的`taste_preferences`桌子。只需使用`MySQLBooleanPrefJDBCDataModel`或类似。该`user`表无关紧要。

# android - Android 中的 Smack 库集成：显示异常

> ID：11341262
> 
> 赞同：1
> 
> 时间：2012-07-05T09:15:26.080
> 
> 标签：android, smack

我想在 Android 上创建一个聊天应用程序。为此我使用 XMPP，为此我使用 Smack API。我正在尝试[此处给出的源代码。](http://davanum.wordpress.com/2007/12/31/android-just-use-smack-api-for-xmpp/)

但是当我尝试运行该应用程序时，它显示异常“*无法连接到 gtalk.google.com* ”。

```
java.lang.IllegalStateException: Not connected to server. 
```

任何人都可以告诉我应该做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:54:07.853

好的解决了，而不是**gtalk.google.com**我使用了**talk.google.com**。

# bxslider - 浏览器窗口中的 bxslider 中心图片

> ID：11341273
> 
> 赞同：0
> 
> 时间：2012-07-05T09:15:55.967
> 
> 标签：bxslider

我在我的网站中使用 bxslider。非常好的插件，但我想将滑块中间的图像（不同宽度）居中到窗口中间。像这样：

![滑块](../Images/5cc9eaa8d06f7b3f5e88aed926a39914.png)

有人可以帮我吗？或者让任何人为另一个插件提供提示，这是做什么的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:13:43.890

这可能不是您想要的答案，但您可以将包含照片的每个 div 设置为恒定大小并调整照片大小以适合。您需要将包含 div 的整体设为 500px，而每张照片包含 div 100px。这会产生类似于你想要的效果..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T12:34:00.830

也许你可以做这样的事情

[解决方案](http://jsfiddle.net/FJYJM/8/)

检查涉及到的Jquery

```
$(document).ready(function () {
    $('#slider').bxSlider({
        auto: true,
        pause: 2000,
        autoHover: true,
        controls: false,
        maxSlides:3,
        displaySlideQty: 3,
        moveSlideQty: 1,
        onAfterSlide: function (currentSlide, totalSlides, currentSlideHtmlObject) {
            var $middleSlide = currentSlide + 2;
            $('#slider li').css({
                width:200
            });
            $('#slider li:eq(' + $middleSlide + ')').animate({
                width: 150
            }, 100);
        }
    });

}); 
```

# javascript - 上传文件时检测到取消的拖放操作

> ID：11341277
> 
> 赞同：2
> 
> 时间：2012-07-05T09:16:13.197
> 
> 标签：javascript, html, drag-and-drop

这是我想要的行为：

1.  用户开始从文件资源管理器中拖动文件
2.  当文件悬停在浏览器窗口上时，会出现 3 个拖放区
3.  当用户取消拖放或放置文件时，放置区消失。

我遇到的问题是#3。
使用`dragenter`on时，拖放区看起来很好，`document`但我无法让它们再次消失。

我已经尝试过`dragend`从不触发的绑定，`dragleave`每次拖动离开后代时都会触发，因此拖动区域会闪烁。

哪个事件将是正确的听？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T15:39:35.577

我还没有完全测试它，但似乎你可以利用每个元素的烦人行为`dragenter`和触发。`dragleave`

```
var counter = 0;
$(document).on('dragenter', function () { 
  if (counter++ === 0) {
    console.log('entered the page');
  }
});

$(document).on('dragleave', function () {
  if (--counter === 0) {
    console.log('left the page');
  }
}); 
```

如果通过按 Escape 取消拖动，似乎也可以工作。

[http://jsbin.com/atodem/2/](http://jsbin.com/atodem/2/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T04:34:41.517

在 上`document`，您想同时收听`dragleave`和`dragover`，分别隐藏和显示区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T16:31:23.263

好吧，`dragstart`and`dragend`事件似乎仅在将某些内容*从*浏览器拖动*到*浏览器时才会触发，这在您的情况下几乎没有用。我似乎无法停止闪烁，但是如果您为`dragenter`and`dragleave`事件添加超时，您可以最小化闪烁：

```
window.onload=function(){
    var drag = new (function(){
        var timeout;
        this.detected = function(){
            return !(timeout === undefined)
        }
        this.start = function(){
            clearTimeout(timeout);
        }
        function endDrag(){
            for (var i=0;i<3;i++) //no longer dragging, remove drop zones
                document.getElementsByClassName("dropZone")[i].style.display="none";
        }
        this.end = function(){
            timeout = setTimeout((function(){timeout=undefined;endDrag();}),1500)
        }
    })()
    document.body.ondragenter = function(){
        drag.start();
        for (var i=0;i<3;i++) //drag started, show drop zones
            document.getElementsByClassName("dropZone")[i].style.display="block";
    }
    document.body.ondragleave = function(event){
        event = event||window.event
        if ((event.source||event.target)==document.body)
            drag.end();
    }
} 
```

希望这会有所帮助，如果它不完美，请见谅。:-(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T18:27:27.730

dragleave 对我不起作用。我使用了超时：

```
function stopDrag(){
   console.log('bye drag!');
}

var timeoutHandle;
document.addEventListener('dragover', function(){
    console.log('you are dragging');
    window.clearTimeout(timeoutHandle);
    timeoutHandle = window.setTimeout(stopDrag, 200);
}, false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T14:50:54.870

您可以通过检查是否在 dragend 之前调用了 drop 来验证它。

```
 var dragConfirmed;

     document.addEventListener("drop", function( event ) {
          // prevent default action (open as link for some elements)
          event.preventDefault();

          dragConfirmed = true;
      }, false);

      document.addEventListener("dragend", function( event ) {

        if (dragConfirmed != true)
        {
             // Escape has been pressed
        }

      }, false); 
```

# android - Android表面在缓冲区之间闪烁

> ID：11341278
> 
> 赞同：0
> 
> 时间：2012-07-05T09:16:16.670
> 
> 标签：android, linux, configuration, framebuffer, surfaceflinger

我的 Android 系统有问题。它在自定义平台上运行，当我启动设备时，屏幕`bootanim`在控制台“ `A N D R O I D`”屏幕之间闪烁。

当`bootanim`重绘自身时它是可见的，但随后它会快速闪烁回“ `A N D R O I D`”屏幕。

我怀疑这是由于 SurfaceFlinger 或 OpenGL 的某些设置造成的，但是当时我找不到太多文档 - 除了源代码。

我需要在我的设备配置中为我的平台定义一些东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:45:06.103

我已经设法解决了这个问题。

它与内核配置有关。要停止“闪烁”，我需要取消设置 CONFIG_FRAMEBUFFER_CONSOLE。

我的`bootanim`现在显示得很漂亮......！

# iphone - 停止 UIButtons 干扰 UIScrollView

> ID：11341279
> 
> 赞同：1
> 
> 时间：2012-07-05T09:16:21.067
> 
> 标签：iphone, objective-c, ios, uiscrollview, uibutton

我有一个 UIScrollView。它是一个带有许多按钮的窄水平条。我希望用户能够滚动视图，以及点击按钮。

```
------------------------
|                      |
| button 1    button2  |  (and button 3,4 etc) outside the frame
|                      |
------------------------ 
```

但是，在用户测试期间，出现了问题。用户将手指放在按钮所在的区域，然后尝试滚动。因为他们的手指暂时按下按钮，所以触摸永远不会通过滚动视图。

如果用户开始用手指向左或向右滑动，我将如何让触摸向下滚动到滚动视图？但仍然允许点击按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:20:07.293

您可以模仿按钮并在其上添加手势识别器。我认为这样你可以滚动按钮，也可以根据手势识别器生成的动作进行滑动。

如果您需要更多信息，请告诉我。

编辑：

创建一个 UIImage 视图并将按钮图像添加到它们。现在在它们上添加手势识别器。现在手势回调将仅在触摸时调用。滑动/平移将在滚动视图上照常工作。

# java - Synchronized Collection Wrapper 工厂方法如何“拥有”传递给它的对象？

> ID：11341281
> 
> 赞同：4
> 
> 时间：2012-07-05T09:16:21.827
> 
> 标签：java, multithreading, collections, concurrency, java.util.concurrent

在 Java Concurrency in Practice 一书中，Brian Goetz 说传递给类的构造函数和方法的对象**不**归类本身所有。是不是因为他们是外面来的，班上没管他们？

他接着说，如果一个方法被显式设计为传递传入对象的所有权（例如同步集合包装器工厂方法），则存在一个例外。有人可以举一个相同的例子并向我解释如何将其视为例外吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:19:46.143

一个例外是

```
List<String> syncList = Collections.synchronizedList(new ArrayList<>()); 
```

您可以看到 synchronizedList 的设计方式只要包装器对象拥有对底层数组列表的唯一可访问引用，它就承担了线程安全责任的所有权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:22:43.197

从这个意义上说，拥有通常与谁负责清理对象获取的任何资源，即调用`Close`或`Dispose`其他此类方法。

如果一个方法返回一个对象以供使用（例如工厂方法），那么在返回之前关闭这个对象是没有意义的，因为它会变得不可用 - 因此所有权被转移，它成为调用代码的责任清理。

在某些情况下，将所有权转移给被调用代码是有意义的。当新对象的使用与它的底层机制无关时，通常会出现这种情况。例如，如果我有一个能够读取字符串的类的接口，我不希望根据从哪里读取字符串（文件流、网络流、内存等）以不同的方式使用这些实现。因此，如果实现需要 Stream 的实例，则将 Stream 的所有权传递给字符串读取器实现而不是创建 Stream 的类是明智的。

# java - 如何使用 Hibernate 捕获数据库通信失败

> ID：11341283
> 
> 赞同：0
> 
> 时间：2012-07-05T09:16:33.260
> 
> 标签：java, mysql, spring, hibernate

如何使用 Hibernate 捕获数据库通信失败？，在运行应用程序时，如果存在 DB 连接，那么我得到了 entitymanager，否则我没有从 spring 容器中获取 entitymanager。如何获取连接是打开还是关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:45:45.340

一般来说，您应该使用说`org.hibernate.SessionFactory`对象和方法`getCurrentSession()`或`openSession()`. 一旦你拥有 Session 对象，它实际上是你的实例，你可以使用方法`org.hibernate.impl.SessionImpl`获取 Connection 对象。`connection()`

例子：

```
((SessionImpl)sessionFactory.getCurrentSession()).connection().isClosed(); 
```

您可以使用[c3p0 连接池](http://www.mchange.com/projects/c3p0/) ，该连接池具有在使用前检查连接的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:27:35.430

您使用的是哪个 JPA 提供程序？

如果您使用的是带有连接池的 EclipseLink，它应该在失败后自动检测死连接并重试在新连接上执行查询。

否则，根据您使用的数据源或连接池，您可以启用连接测试以确保连接在使用前有效（但这确实会增加开销）。

您还可以捕获 JPA 异常并重试您的 JPA 事务。

# ruby-on-rails - RSpec td标签不返回数据

> ID：11341284
> 
> 赞同：0
> 
> 时间：2012-07-05T09:16:35.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, integration-testing

我正在使用一个表格来表示一个列表，并且我想使用 RSpec 来测试日期是否出现：

```
 describe "Checking the rota" do

    let(:service){ FactoryGirl.create(:service)}
    before{ visit root_path } #this is where the rota is displayed
    it{ should have_selector('td', date: service.date) }

  end 
```

据我所知，应用程序本身运行良好，因为当我自己访问页面时轮播显示完美。我很好奇为什么测试失败了。我正在使用的工厂脚本是：

```
factory :service do
    date Date.today
    leader "Bob"
    singers "Mr T"
    soundAM "Thor"
    soundPM "Wobbles"
  end 
```

最后是我用来渲染 rota 的存根：

```
<% if(service.date < Date.today) %>
  <% service.destroy %>
<% end %>
<tr>
    <td><%=link_to service.date, edit_service_path(service.id) %></td>
    <td><%= service.leader %></td>

    ...</tr> 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:00:50.090

我认为正确的路线是：

```
it{ should have_selector('td', text: service.date) } 
```

取决于您使用的是 Capybara 还是 Webrat

# jquery - jquery 在 asp.net mvc3 的视图中不起作用？

> ID：11341288
> 
> 赞同：0
> 
> 时间：2012-07-05T09:16:52.567
> 
> 标签：jquery, asp.net-mvc

我的 asp.net mvc3 页面有问题。我有一个视图，其中有一个表单来创建特定模型的项目。它看起来像这样：

```
@model testPro.Models.AddItemModel
@{
    ViewBag.Title = "New";
}
@*<h2>New</h2>*@

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>New Item</legend>

                <div class="editor-label">
                    @Html.LabelFor(model => model.UserItem.name)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.UserItem.name)
                    @Html.ValidationMessageFor(model => model.UserItem.name)
                </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<script>
    $(document).ready(function () {

        alert("test");
        $("#UserItem_Name").html("bla");
        $("#UserItem_Name").attr('disabled');
    });
</script> 
```

最后我有我的 jquery 东西，应该改变文本框。

**问题是，什么都没有改变，我不知道为什么**

是的：我在标题中包含了 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:20:29.107

尝试：

```
<script type="text/javascript">
    $("#UserItem_name").val('bla');
    $("#UserItem_name").attr('disabled', 'disabled');
</script> 
```

注意事项：

*   您的文本框 id 是`UserItem_name`，`UserItem_Name`这显然不是一回事
*   用于`.val()`设置表单输入字段的值，而不是`.html()`
*   `.attr()`当您要设置属性值时，该方法采用 2 个参数：1) 属性名称和 2) 属性值。您当前只传递一个参数，因此您基本上是在读取属性值，而不是设置它。

此外，如果此代码位于您在 AJAX 请求后注入 DOM 的局部视图中，则应删除该`$(document).ready`处理程序。

# java - 图像未显示

> ID：11341291
> 
> 赞同：1
> 
> 时间：2012-07-05T09:17:04.390
> 
> 标签：java, html, swing, applet, awt

这是我的小代码。小程序中添加了一个按钮。按钮有一个图像图标。当我从服务器运行它时，代码运行正常，但按钮上没有图像。

.java 文件的目录：C:\Program Files\OpenLaszlo Server 4.9.0\Server\lps-4.9.0\App 我在这里生成类文件。我将 html 文件保存在这里。此外，图像文件夹在此文件夹中。html代码：

```
<html>
<applet code="applet.class" width="800" height="600">
</applet>
</html> 

/* 
```

*这里是 .java 代码：

```
import java.applet.Applet;
import java.awt.Image;
import java.net.URL;
import javax.swing.ImageIcon;
import javax.swing.JButton;

/**
 *
 * @author USER
 */
public class applet extends Applet {
    JButton button;
    URL url;
    Image myImage;
    ImageIcon myIcon;

    public void init(){

       button = new JButton();
       this.add(button);

       try{
                 url = new URL(getCodeBase(), "image/REC1.jpg");
           }catch(Exception e){}
         myImage = getToolkit().createImage(url);
         myIcon = new ImageIcon(myImage);
//         myIcon = new ImageIcon("image/REC1.jpg");
         button.setIcon(myIcon);
    }

    public void paint(){

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:26:19.930

我正在使用它，它正在工作：

```
 URL url = applet.class.getResource("/image/"+name_of_picture);
        Image I = this.getToolkit().getImage(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:34:43.173

```
 url = new URL(getCodeBase(), "/image/REC1.jpg"); 
```

# joomla - Joomla 2.5 - JUser 不返回用户组名称

> ID：11341292
> 
> 赞同：0
> 
> 时间：2012-07-05T09:17:04.943
> 
> 标签：joomla

我想获取用户的用户组。我使用以下代码：

```
$CurrentUser =& JFactory::getUser();
print_r($CurrentUser->groups); 
```

现在，在 Joomla 的 1.5 版中，它打印出这个数组：

数组（[已注册] => 2 [作者] => 3 [RBGS_RBS_U15_Trainer] => 1063）

在 v2.5 中，我得到了这个：

数组（ [2] => 2 [3] => 3 [1063] => 1063 ）

那么在 v2.5 中是否有可能获取用户组的名称？

提前致谢，

安内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:14:32.237

好吧，答案是更改一行代码。浏览到库/joomla/database/table/user.php。在那里，换行

```
$this->groups = $this->_db->loadAssocList('id', 'id'); 
```

至

```
$this->groups = $this->_db->loadAssocList('title', 'id'); 
```

它应该可以工作。

# asp.net - 当 NHibernate 代理对象位于第一个位置时，ObjectDataSource 无法绑定列表

> ID：11341293
> 
> 赞同：0
> 
> 时间：2012-07-05T09:17:05.273
> 
> 标签：asp.net, .net, nhibernate, castle-dynamicproxy

我有一个 ObjectDataSource 的选择方法：

```
 public static IEnumerable<Model.Domain.Theme> Select()
    {
        var cycleRepo = new RbaCycleRepository(Global.sessionFactory.GetCurrentSession());
        RbaCycle lacOpenCycle = cycleRepo.FindLacOpenCycle();
        if (lacOpenCycle != null)
        {
            var themeRepo = new ThemeRepository(Global.sessionFactory.GetCurrentSession());
            var result = themeRepo.FindAll(new ThemesForCycle(lacOpenCycle).GetQuery());
            return result;
        }
        return Enumerable.Empty<Model.Domain.Theme>();
    } 
```

这是场景：

*   我单击按钮，执行了一些操作，结果我在一级缓存中得到了一些代理*主题对象——这很好。*
*   *调用Select()*方法并返回结果。结果只能包含*Theme*对象或*Theme*和*NHibernate Castle Proxy*的混合（例如）。这是来自监视窗口的跟踪：

> {Castle.Proxies.ThemeProxy} Model.Domain.Theme {Castle.Proxies.ThemeProxy} {Model.Domain.Theme} Model.Domain.Theme

*   如果结果集合中的第一个对象是实际的*Theme*对象，则整个集合的绑定成功。**但是如果集合中的第一个元素是 Proxy object**，那么我最终会遇到异常：

> 未处理的异常：System.Web.HttpUnhandledException：引发了“System.Web.HttpUnhandledException”类型的异常。---> System.Reflection.TargetInvocationException：对象“CIPNet.Model.Domain.Theme”上的属性访问器“Title”引发以下异常：“对象与目标类型不匹配。” ---> System.Reflection.TargetException：对象与目标类型不匹配。

编辑：这是 FindAll 实现：

```
 public IList<T> FindAll(QueryOver<T, T> query)
    {
        return query.GetExecutableQueryOver(session).List();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:31:20.443

看起来`ObjectDataSource`是使用集合的第一个元素来找出数据源的列。由于它使用反射，NHibernate / Castle DynamicProxy 没有机会取消代理对象。您可能需要手动执行此操作。

[识别 NHibernate 代理类](https://stackoverflow.com/questions/2664245/identifying-nhibernate-proxy-classes)
[NHibernate：获取引用抽象实体的具体类型](https://stackoverflow.com/questions/5229510/nhibernate-get-concrete-type-of-referenced-abstract-entity)

此外，如果您的`FindAll`方法返回`IQueriable`or `IEnumerable`，请尝试在结果上调用`.ToList()`or`.ToArray()`以强制执行查询。您可能不需要手动取消代理：

```
var result = 
    themeRepo.FindAll(new ThemesForCycle(lacOpenCycle).GetQuery()).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:47:48.193

这是我想出的临时解决方案。它有效，我只是确保绑定到控件的列表具有第一个不是代理的对象：

```
 public static IList<T> ToProxySafeList<T>(this IList<T> list)
        where T: class
    {
        if (list.Count == 0) return list;

        var proxy = list[0] as INHibernateProxy;
        if (proxy != null)
        {
            list[0] = proxy.HibernateLazyInitializer.GetImplementation() as T;
        }
        return list;
    } 
```

有什么建议么？

# c# - 如何使用 Setter 设置 Hyperlink.Foreground？

> ID：11341299
> 
> 赞同：0
> 
> 时间：2012-07-05T09:17:19.527
> 
> 标签：c#, wpf, styles, setter

我正在尝试`Hyperlink.Foreground`使用二传手进行设置。二传手将在一个`MultiDataTrigger`.

这是我尝试过的：

```
<Setter Property="Hyperlink.Foreground" Value="DarkGreen"/> 
```

这没有效果

```
<Style TargetType="Hyperlink" BasedOn="{StaticResource {x:Type Hyperlink}}" x:Key="greenHyperlink">
     <Setter Property="Foreground" Value="DarkGreen"/>
</Style> 
```

确实有效，但是

```
<Setter Property="Hyperlink.Style" Value="{StaticResource greenHyperlink}"/> 
```

抛出异常。

如何使用 setter 设置超链接颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:48:09.360

如果你想设置超链接的样式，为什么不只是：

```
<HyperLink Style="{StaticResource greenHyperLink}"/> 
```

或者你可以试试这个：

```
<Style TargetType="Hyperlink" BasedOn="{StaticResource {x:Type Hyperlink}}" x:Key="greenHyperlink">
     <Setter Property="Style" Value="{StaticResource greenHyperLink}"/>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:24:45.860

请尝试以下行：

```
<Setter Property="Foreground" Value="#........"/> 
```

更新：

请看一下这个帖子已经回答这可能对你有帮助

[在不丢失悬停颜色的情况下更改超链接前景](https://stackoverflow.com/questions/1252889/changing-hyperlink-foreground-without-losing-hover-color)

# python - Django 包含标签问题

> ID：11341301
> 
> 赞同：1
> 
> 时间：2012-07-05T09:17:24.330
> 
> 标签：python, django

我尝试使用包含标签创建最简单的包含标签。

```
\main
    \templatetags
        \tegs_test.py
        \__init__.py 
```

Python tegs_test.py：

```
from django import template

register = template.Library()

@register.inclusion_tag('test.html')
def test_something():
    return {'test_list':[1,2,3,4,5]} 
```

模板 test.html：

```
{% load tegs_test %}
{% test_something %}

{% for i in test_list %}
    {{ i }}
{% endfor %} 
```

结束我在setting.INSTALLED_APPS中注册main。当我尝试打开 test.html 时出现错误：

**渲染时捕获 RuntimeError：调用 Python 对象时超出最大递归深度**

请帮忙解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:30:12.253

`{% test_something %}`调用模板`test.html`，它再次调用`{% test_something %}`等等......

您需要使用标签指向不同的模板或使用过滤器。

# android - Android GCM : GCMRegistrar gives empty registration ID

> ID：11341305
> 
> 赞同：4
> 
> 时间：2012-07-05T09:17:49.720
> 
> 标签：android, google-cloud-messaging

I have followed [http://developer.android.com/guide/google/gcm/gs.html#server-app](http://developer.android.com/guide/google/gcm/gs.html#server-app) to implement GCM in my application

```
 GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        if (GCMRegistrar.isRegistered(this)) {
            Log.d(TAG, GCMRegistrar.getRegistrationId(this));
        }
        final String regId = GCMRegistrar.getRegistrationId(this);

        if (regId.equals("")) {
            GCMRegistrar.register(this, sender_id);
            Log.d(TAG, "Registration id :  "+GCMRegistrar.getRegistrationId(this));
        }
            else {
            Log.d("info", "already registered as" + regId);
        } 
```

that returns empty string as registration ID what else is needed to get the registration ID??

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T12:42:08.040

Empty String comes when device is not registered successfully. There may be following reasons for it-

1.  Put you GCM code in application package. [You can make another package with same name of application package]
2.  Put all permissions properly.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T04:47:47.470

I also got the empty registration ID and finally fix it. Here are my solutions:

1) check the project ID. It should be the 12 char long shown in the hyperlink of Google API's console (not the Project ID you named in the project summary)
2) try change the **final String regId** to **String regId**. I don't know why but it works for me.

Hope it helps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:45:54.317

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);

    if (regId.equals("")) {
        GCMRegistrar.register(this, "YOUR_ACCOUNT");
    } else {
        app.prefs.edit().putString("prefs_googleid", regId).commit();
        GCMRegistrar.setRegisteredOnServer(this, true);
        Log.v(TAG, "Already registered");
    } 
```

then wait the call back in your receiver that extend GCMBaseIntentService in the onRegistered ovverride, there you will get your ID registration.

Anyway I full create an app that use GCM following this post: [http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T16:16:21.953

I got the same issue, the solution was:

You need to implement a **GCMIntentService** (extending from GCMBaseIntentService). And **DO NOT !!!** rename **GCMIntentService** by something else, this was a reason in my case.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T05:59:58.977

Creating a new project using google console with the same name as application's name in eclipse helped me to solve this problem.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T08:59:00.573

I also got the empty string as a registration id and solved it as follow :

1.  Check whether senderId is correct or not.
2.  Check whether there is an active google account signed in your device or not.
3.  Check wheter permissions are correctly defined in manifest file or not.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-09T06:30:46.010

Make sure you defined the service in the "app_package" as this intent service will be called by the GCMBroadcastReceiver

For example

```
<service android:name=".GCMIntentService" /> 
```

or

```
<service android:name="app_package.GCMIntentService" /> 
```

Fail to define the service correctly, there will be no callback for onRegister, and your Register Id is always empty

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-07T22:50:10.063

I had the same problem with my application. First thing that was wrong, was with my GCMIntentService. It has to be at the root of your package.

I will include here a short snippet of my GCMIntentService. Please keep in mind that, you will receive your registrationID on GCMIntentService register method

```
public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "GCMIntentService";

public GCMIntentService() {
    super(CloudMessagingUtility.SENDER_ID);
}

/**
 * Method called on device registered
 **/
@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId); 
```

//here call your methods to send the registrationId to your webserver CloudMessagingUtility.register(context, registrationId); }

```
/**
 * Method called on device un registred
 * */
@Override
protected void onUnregistered(Context context, String registrationId) {
    Log.i(TAG, "Device will unregister from Google Cloud Messaging");
    //unregister the device from your own webserver too
    CloudMessagingUtility.unregister(context, registrationId);
}

/**
 * Method called on Receiving a new message
 * */
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message from GCM:");
    String message = "";//TODO handle here the messages!

}

/**
 * Method called on receiving a deleted message
 * */
@Override
protected void onDeletedMessages(Context context, int total) {
    Log.i(TAG, "Received deleted messages notification");
    String message = getString(R.string.gcm_deleted, total);
    displayMessage(context, message);

}

/**
 * Method called on Error
 * */
@Override
public void onError(Context context, String errorId) {
    Log.e(TAG, "Received error: " + errorId);
} 
```

}

you have to make the right configuration in the Android

```
e <service android:name=".GCMIntentService" /><receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >

        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name=" your package here" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-02T05:29:58.407

> GCMRegistrar.register(this, sender_id); Log.d(TAG, "Registration id : "+GCMRegistrar.getRegistrationId(this));

Calling getRegistrationId() straight after register() is risky because register might not return the id straight away.

For my case I did a check later on in my script (upon button press) using:

> boolean registered = GCMRegistrar.isRegistered(this);

if registered then call GCMRegistrar.getRegistrationId(this)); to get the ID registered.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-12T21:07:08.137

I have tried the second solution of Nick Wong and i changed => `public static final String PROPERTY_REG_ID = "registration_id";` to => `public static String PROPERTY_REG_ID = "registration_id";`

and simply it worked.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-25T11:15:35.250

Since GCMRegistrar.getRegistrationId is asynchronous, I added a counter to check whether regId is actually empty or not. If empty the counter would just increment and try to get the registration Id again. A fairly large number like 100 should suffice.

```
int counter = 0;
                while (true) {
                    regID = GCMRegistrar.getRegistrationId(this);
                    counter++;
                    if (counter == 100 || regID != null || !regID.equals("")) {
                        break;
                    }
                } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-05T17:20:04.263

I've solved changing the project used for registering with GCMRegistrar.register from the project name to the google project number

# javascript - window.print() 方法停止世界

> ID：11341309
> 
> 赞同：3
> 
> 时间：2012-07-05T09:18:16.707
> 
> 标签：javascript, google-chrome

我使用 window.print() 方法，它会暂停 javascript 代码（例如 setInterval），当您关闭打印窗口时，代码会继续。看下面的例子，我在 IE9.0 和 chrome 20.0 中测试过

[http://jsfiddle.net/f9aGR/](http://jsfiddle.net/f9aGR/)

我也尝试打开另一个页面，然后调用window.print()，比如

```
<a href='/1231' target='_newtab'>wtf</a> 
```

但是，调用 window.print() 也会暂停当前页面中的 javascript。

有没有办法在打印窗口打开时保持编码运行？一般和特殊解决方案都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:46:14.797

在 chrome 中，如果打印是由用户手动触发的，例如单击菜单中的打印按钮或按 CTRL + P，它不会暂停 javascript。

现在我必须要求我们的用户手动打印页面。

# php - 多个类似按钮的问题为 Facebook 创建元数据以供阅读

> ID：11341310
> 
> 赞同：0
> 
> 时间：2012-07-05T09:18:17.207
> 
> 标签：php, facebook

我在页面中添加了多个类似按钮，然后将其定位到静态 .php 页面，例如：

Atricle.php（包含我所有的喜欢按钮） Facebook.php（是我的动态页面，它为单个喜欢页面创建元数据）

所以文章 23 将链接到 facebook.php?art=23 这将为这篇文章创建元数据。

但是，当我导航到 facebook.php?art=23 时，它可以很好地加载正确的元数据，但是当我在 Facebook 上调试时，它似乎根本没有读取 php。

有没有办法解决这个/我做错的事情，因为我不想仅为静态元信息创建 100 个页面。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:16:41.447

当您将一个独特的 (http:// ... facebook.php?art=23) URL 插入[Facebook 调试器](http://developers.facebook.com/tools/debug)时，它应该向您显示与该 URL 对应的相同 Open Graph 元标记。

我可以想到这可能不会发生的两个原因：

1) 该 URL 的 Open Graph 对象尚未初始化，因为尚未触发 Facebook 抓取该 URL。（例如，该 URL 尚未被点赞。）

**解决方案：**第一次喜欢特定的 URL。（另外，请确保您的 Like 按钮的 href 参数与您正在调试的“http:// ... facebook.php?art=23” URL 完全匹配。）

2) 调试器显示该 URL 的缓存、以前的元内容。

**解决方案：使用**[Facebook 调试器](http://developers.facebook.com/tools/debug)中的 fbrefresh 参数刷新缓存的元内容。

**示例：** http:// ... /facebook.php?art=23&fbrefresh=AnyString

请注意，“?art”参数不需要在您的文章的 og:url 中。它确实需要在您文章的 Like 按钮的 href 参数中。

# c# - 图像控件不显示图像

> ID：11341315
> 
> 赞同：0
> 
> 时间：2012-07-05T09:18:34.960
> 
> 标签：c#, asp.net, image, imageurl

我的 asp.net 页面中有一个图像控件。我从属性窗口提供了一个图像 url，但是当我运行我的应用程序时，图像没有显示。源代码在这里：

```
 <asp:Image ID="imgMain" runat="server" 
        ImageUrl="~/ProductImages/Larges/Hydrangeas.jpg" /> 
```

而且我确信路径是正确的。当我从浏览器的源代码复制图像 url 时，我可以在文件资源管理器中看到图片。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:26:58.577

我发现由于我的网站是作为默认网站启动的，所以我还必须在 C:\inetpub\wwwroot** 中添加文件*。** * 表示文件位置的目录结构。一旦我这样做了，图像就会通过浏览器显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:46:44.603

我假设您在问题中的原始 URL 是正确的。

在不知道更多信息的情况下，我会首先检查它是否是一个自动化问题：

*   当您调试此问题时，您是否登录到该站点？如果没有尝试先登录。
*   登录后，检查登录用户是否有权访问相关路径中的内容。

还可以尝试复制渲染页面中图像标签上的 URL，并将其直接粘贴到浏览器的地址栏中。发生什么了？

# iphone - Cocos 2d 中的警报框样式

> ID：11341317
> 
> 赞同：0
> 
> 时间：2012-07-05T09:18:41.037
> 
> 标签：iphone, ios, cocos2d-iphone

我是 cocos-2d 的新手，所以请保持温和，因为这可能是一个非常菜鸟的问题。

好的，现在我的问题。

我如何在 cocos 2D 中实现警报框，带有是或否按钮。所以是按钮调用一个方法。该方法打开一个网站链接。

例如，我看过几款游戏，其中一个提醒让用户在应用商店中进行评论。当他们按下是时，它会进入应用商店。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:34:21.193

为什么不使用[UIAlertView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)？您可以将它作为任何 UIKit 应用程序使用，并查看此[线程](https://stackoverflow.com/questions/4784248/rating-and-reviews-from-within-an-ios-app)以获取评分/评论库。无论如何，您可以查看这篇为 Cocos2D 提供自定义实现的[文章。](http://jpsarda.tumblr.com/post/9162433577/scale9grid-for-cocos2d)

# regex - Spintax 的正则表达式

> ID：11341326
> 
> 赞同：1
> 
> 时间：2012-07-05T09:18:57.673
> 
> 标签：regex

我对纺纱税有点问题。我有这样的文字：

```
嗨 {man|buddy|mate} 怎么样？你 {cool|ok} ？
```

我只想要一个正则表达式来制作一个随机句子

```
嗨，伙计，最近怎么样？你给力 ？
```

将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:24:00.537

正则表达式无法做到这一点，您可以匹配`{man|buddy|mate}`和拆分，但随机选择一个您必须在没有正则表达式的情况下执行

用于匹配各种单词的正则表达式：

```
(?<={)((.+?\|)+?.+?)(?=}) 
```

# mysql - MySQL 有条件的可能吗？

> ID：11341335
> 
> 赞同：0
> 
> 时间：2012-07-05T09:19:16.443
> 
> 标签：mysql, conditional, unix-timestamp

我试图将 Unix 日期从“01/01/1970”更改为“0”

基本上我有这个：

```
FROM_UNIXTIME(last_visit, '%d-%m-%Y') AS Last_Visit 
```

因此，当我导出此 MySQL 时，它会显示“上次访问 - 01/01/1970”，这显然是不正确的。

所以我想我可能需要一个条件来说明如果它说 1970 将其更改为“从不”

但是我有点失落...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:23:05.000

在这种情况下使用会更好`NULL`。`0`

如果等于（即），您可以使用 MySQL 的[`NULLIF()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_nullif)函数替换`last_visit`为：`NULL``0``01/01/1970`

```
FROM_UNIXTIME(NULLIF(last_visit,0), '%d-%m-%Y') AS Last_Visit 
```

更好的是，更新基础表（然后您的原始 SQL 将按原样正常工作）：

```
UPDATE mytable SET last_visit = NULL WHERE last_visit = 0 
```

# ios - 嵌入导航控制器

> ID：11341337
> 
> 赞同：0
> 
> 时间：2012-07-05T09:19:17.947
> 
> 标签：ios, xcode, xcode4.2, xcode4.3, navigationcontroller

我刚刚将我的 Xcode 从 4.2 更新到 4.3.3，我一直遇到一个问题，即是否可以在单个视图应用程序中添加导航控制器，因为当我尝试将导航控制器嵌入到控制器中时没有任何反应。我想通过一个按钮将两个视图控制器连接到第二个控制器，并将导航栏连接到第一个视图控制器。

我想不出任何其他方式来连接视图控制器请帮助我任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:41:28.447

1.  如果您不想添加导航控制器，您可以在现有视图控制器之间转换，使用`presentViewController`从第一个到第二个，然后`dismissViewControllerAnimated`返回。

2.  假设您使用的是 NIB（否则您只需对故事板使用 embed 命令），如果您想添加与您的 NIB 保持一致的导航控制器，您可以相应地更改您的应用程序委托。

因此，您可能有一个应用程序委托，其内容如下：

```
//  AppDelegate.h

#import <UIKit/UIKit.h>

@class YourViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) YourViewController *viewController;

@end 
```

更改此项以添加导航控制器（您可以在此处摆脱对主视图控制器的先前引用）：

```
//  AppDelegate.h

#import <UIKit/UIKit.h>

//@class YourViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

//@property (strong, nonatomic) YourViewController *viewController;
@property (strong, nonatomic) UINavigationController *navigationController;

@end 
```

然后，在您的应用程序委托的实现文件中，您`didFinishLaunchingWithOptions`可能会看到类似这样的内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    self.viewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
    self.window.rootViewController = self.viewController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

您可以将其更改为：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    //self.viewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
    //self.window.rootViewController = self.viewController;

    YourViewController *viewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
    self.window.rootViewController = self.navigationController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

完成此操作后，您现在可以从一个 NIB 视图控制器导航到另一个的 using`pushViewController`并返回`popViewControllerAnimated`. 您`viewDidLoad`还可以使用该`self.title = @"My Title";`命令来控制视图导航栏中显示的内容。您可能还想更改 NIB 中的“顶部栏”属性以包含导航栏模拟指标，以便您可以布局屏幕并很好地了解它的外观：

![在此处输入图像描述](../Images/b807c59f081bf70c61b3401f8bee3186.png)

显然，如果您有一个非 ARC 项目，那么那些带有视图控制器的 alloc/init 的行也应该有一个`autorelease`.

# xtext - 如何从 Java 项目调用 Xtext 解析器/JvmModelInferrer

> ID：11341342
> 
> 赞同：0
> 
> 时间：2012-07-05T09:19:27.550
> 
> 标签：xtext

我已经实现了一个简单的小 DSL，它使用 JvmModelInferrer 方法从输入文件生成类。我试图弄清楚如何在常规 java 项目的代码中调用解析器和代码生成器。因此，在我的非 Xtext 项目的主类中的某个时刻，我可以创建一个文件，将其传递给我的 DSL 的 Xtext 解析器/codeGenerator，结果将是类文件生成到我选择的文件夹中（在我的java项目中）。此案例未包含在文档中，因此非常感谢您的帮助，谢谢！

更新：到目前为止，我的代码如下所示：

```
 private  static IGenerator generator;

    /**
     * @param args
     */
    public static void main(String[] args) {

        // this line registers the EMF for our DSL
        Injector injector = new HyRuleStandaloneSetup().createInjectorAndDoEMFRegistration();
        ResourceSet rs = new ResourceSetImpl();
        File file = new File(
                "C:/Documents and Settings/chmamat2/runtime-EclipseXtext/hyrule.project/src/hyrule/project/main.hrule");
        Resource resource = rs.getResource(URI.createURI(file.toURI().toString()), true);

        //setup the generator
        generator = injector.getInstance(IGenerator.class);

        //setup the file system access
        final EclipseResourceFileSystemAccess2 fsa = new EclipseResourceFileSystemAccess2();

        generator.doGenerate(resource, fsa); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:03:19.190

基本上，您可以将 DSL 作为 EMF 模型打开：创建 EMF ResourceSet，然后使用 ResourceSet API 打开文件（通过创建代表文件的文件或平台 uri），并打开其内容。

但是，这仅在您不使用 Xbase 时才有效。如果使用 Xbase，则必须使用 Xtext API 提供的 Guice 注入器来实例化 ResourceSet。如果 ResourceSet 已初始化，它的工作方式与以前相同。

要使用注入器，请使用 StandaloneSetup 类对其进行实例化 - 如果您计划将 Eclipse IDE 中的代码与您自己的编辑器一起使用，请不要这样做，或者通过使用基于 Xtext 的执行工厂注册 Eclipse 扩展。例如，在我的[Xtext Reflective Tree 编辑器项目](https://github.com/ujhelyiz/xtext-reflective/tree/master/hu.cubussapiens.xtext.reflectiveeditor)中查看已注册的编辑器。

要同时调用代码生成器，您有几种可能性：

1.  您可以使用具有 Xtext 项目性质的 Eclipse 项目。如果设置好了，您只需创建/修改您的 DSL 文件，构建器就会神奇地完成我之前提到的所有内容 - 无需再做任何事情。
2.  您还可以在代码中注入 IGenerator（当有注入的类时），因此您可以在打开原始的基于 EMF 的 Xtext 模型后以编程方式调用它。

# asp.net-mvc - 使用网格中的复选框和按钮从 Telerik MVC 网格中删除多个记录

> ID：11341345
> 
> 赞同：1
> 
> 时间：2012-07-05T09:19:40.203
> 
> 标签：asp.net-mvc, telerik, grid

假设我有一个 Telerik MVC 网格，绑定了 AJAX，并且我想将复选框放入网格中，以便用户可以检查它们并从网格外部的 Ajax.ActionLink 按钮中删除多个选中的记录......如何实现这个？我可以在 Grid 中放置复选框 .. 但是当我点击一个按钮时多次删除记录对我来说很难

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:58:21.703

您需要捕获检查的记录并将它们放入列表中。（有关捕获选中项目的建议，请参阅Telerik 的[此](http://demos.telerik.com/aspnet-mvc/grid/checkboxesajax)演示。）

然后使用按钮调用控制器方法，传入要删除的记录列表。遍历列表并删除每条记录。

# javascript - 匹配 [word] 但不匹配 [word] 撇号 Regex

> ID：11341352
> 
> 赞同：1
> 
> 时间：2012-07-05T09:20:06.427
> 
> 标签：javascript, regex

我的正则表达式是通过在 javscript 中使用此代码动态构造的：

```
var regExp = new RegExp("\\b" + $("#value").val() + "\\b", "ig"); 
```

即正则表达式很简单`\bbrother\b/ig`，问题是它也匹配单词，例如

```
don in don't
sister in sister's 
```

只有当它是一个完整的单词时它才应该匹配单词，即

```
The don came late   - match
don't do that       - no match
she is my sister    - match
my sister's wedding - no match 
```

**编辑**：感谢您的回答。如果正则表达式非常大`\bbrother|sister|car|truck.......\b`，如 6500 OR 单词，请建议最快（或最便宜）的方法（如果这会产生影响）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T09:24:10.073

有几种方法可以做到。我会推荐一个前瞻性的负面展望。

`\bbrother\b(?!')`

该构造`(?!something)`确保`something`不遵循匹配项。

# javascript - javascript自动完成自制定位问题

> ID：11341357
> 
> 赞同：2
> 
> 时间：2012-07-05T09:20:23.573
> 
> 标签：javascript, ajax, autocomplete, position

我使用 javascript 和 ajax 制作了自己的自动完成功能。一切都很好，但我有一个主要问题：定位。我目前正在像这样定位列表：

```
function ajaxautocomplete(elm)
{
    lista.innerHTML="";
        var x=getOffset(elm).left;
        var y=getOffset(elm).top;
        lista.style.position="absolute";
        lista.style.left=(x+5)+"px";
        lista.style.top=(y+25)+"px";
...
} 
```

其中“lista”是我的自动完成列表，“elm”是当前的文本输入。现在，我有一个将文本输入作为单元格的表格，它们需要具有此自动完成功能。此定位有效，但如果表格足够大并且需要滚动，当我向下滚动页面并尝试自动完成底部的单元格时，定位不再起作用，并且我的列表出现在页面顶部的某个位置，如果我滚动得足够多，可能会超出屏幕。

任何想法，即使我滚动页面，我如何动态地为该列表分配一个位置？谢谢！

编辑：我忘了提，这是我的 getOffset(elm) 函数：

```
function getOffset( el ) {
    var _x = 0;
    var _y = 0;
    while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
        _x += el.offsetLeft - el.scrollLeft;
        _y += el.offsetTop - el.scrollTop;
        el = el.offsetParent;
    }
    return { top: _y, left: _x };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:37:22.917

为什么不使用为此构建的 jquery 插件，例如[这个](http://jqueryui.com/demos/autocomplete/)插件或其他插件。否则您有很多工作要做而且不值得，尝试根据屏幕可见部分计算自动完成位置很大苹果..

# hadoop - hadoop - 从非常大的序列文件中获取数据的最佳方法是什么？

> ID：11341358
> 
> 赞同：1
> 
> 时间：2012-07-05T09:20:25.013
> 
> 标签：hadoop, hive, bigdata

我在 hdfs 中有一个非常大的 hadoop 序列文件。从中获取数据的最佳方法是什么？即，选择记录等。

可以通过蜂巢完成吗？如何从序列文件在 hive 中创建表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:09:01.910

如果您需要“快速”访问数据，您应该考虑将数据加载到某种数据存储中（DB 或 noSQL 存储，例如 HBase、Accumulo）。

另一种选择（如果您可以重写数据）是使用[MapFile](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/io/MapFile.html)进行研究- 这会为序列文件中的键创建索引，并与完整文件扫描相比提供*更快的数据访问。*

否则，如果你想使用 Hive，hive 邮件列表上有一个关于这个确切主题的线程：

*   [http://www.mail-archive.com/hive-user@hadoop.apache.org/msg00173.html](http://www.mail-archive.com/hive-user@hadoop.apache.org/msg00173.html)

# asterisk - 将 CDR 数据库记录存储在以帐户代码命名的表中？

> ID：11341363
> 
> 赞同：1
> 
> 时间：2012-07-05T09:20:41.003
> 
> 标签：asterisk

是否可以告诉星号将 cdr 记录存储到不同的表中？我最好根据帐户代码字段来执行此操作。

我可以定期编写脚本来执行此操作，但我想知道是否有更好的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:49:36.820

是的，这是可行的。您没有指定 CDR 后端，而且并非所有 CDR 后端都能够做到这一点——但这在 cdr_adaptive_odbc 中是可能的。

您将为要在其中存储 CDR 记录的每个表设置单独的上下文，然后使用过滤器来匹配列。任何不明确匹配过滤器的 CDR 记录都会被丢弃。请注意，过滤器确实支持使用“！”的否定。特点。

例如，假设我们有 accountcode foo 和 accountcode bar - 要存储在表 cdr_foo 和 cdr_bar 中。我们可以这样设置：

```
[cdr_foo]
connection=pgsql1
table=cdr_foo
filter accountcode => foo

[cdr_bar]
connection=pgsql1
table=cdr_bar
filter accountcode => bar 
```

# javascript - JavaScript 数组缩减

> ID：11341371
> 
> 赞同：1
> 
> 时间：2012-07-05T09:21:15.930
> 
> 标签：javascript, arrays

```
function init(){
var panel = document.getElementById("panel");
var i;

var week = ["monday","tuesday","wednesday","thursday","friday"];
var weekend = ["saturday","sunday"];

panel.innerHTML+="weekdays: "+ week;
panel.innerHTML+="<hr>weekend days: "+ weekend;

for(i=0; i<weekend.length; i++)
{
    week[week.length]=weekend[i];
}

panel.innerHTML+="<hr>increased with weekend days: "+week;

week-=2;

panel.innerHTML+="<hr>reduced back to weekdays: "+week;
}
window.onload=init; 
```

这是从另一个 html 文件加载的主要 js 代码。一切正常，直到最后。最后一个输出应该是“减少到工作日：星期一，星期二，星期三，星期四，星期五”，但我得到的是“减少到工作日：NaN”，这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T09:24:31.300

您应该将数组长度减少 2，而不是数组本身：

`week.length -= 2;`

例子：

```
var week = [1,2,3,4,5,6,7];
week.length -= 2;

console.log(week);
//[1, 2, 3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T09:29:42.563

也许你必须改变：

```
week-=2; 
```

至：

```
week.splice(-2); 
```

编辑（感谢@Esailija）：

splice 返回删除的元素，因此您只需调用 splice 方法，而无需将结果分配回数组：

```
week.splice(-2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T09:24:33.547

您不能从数组中减去一个数字并期望得到有意义的结果。那是混合类型，当然行为会很奇怪。

要获得周末，请使用`pop()`数组对象的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:51:57.910

```
function init(){
var panel = document.getElementById("panel");
var i;

var week = ["monday","tuesday","wednesday","thursday","friday"];
var weekend = ["saturday","sunday"];

panel.innerHTML+="weekdays: "+ week;
panel.innerHTML+="<hr>weekend days: "+ weekend;

for(i=0; i<weekend.length; i++)
{
    week[week.length]=weekend[i];
}

panel.innerHTML+="<hr>increased with weekend days: "+week;

week.length -= 2;

panel.innerHTML+="<hr>reduced back to weekdays: "+week;
}
window.onload=init; 
```

但这不是`.length`用于 setter 的好方法！

# jquery - 选择 tablerow 包含某些文本的复选框

> ID：11341372
> 
> 赞同：0
> 
> 时间：2012-07-05T09:21:19.257
> 
> 标签：jquery, html, jquery-ui, html-table

我有一个有两列的表。第一列是所有复选框，第二列是属性名称列表。如何检查包含特定文本的表格单元格旁边的复选框？

这是我的桌子：

```
<table id="table1">
    <tr>
        <td class="SelectColumn"><span title="Select this attribute">
            <input id="chkSelected" type="checkbox" /></span> </td>
        <td>Age (required)</td>
    </tr>
</table> 
```

这是我对 jQuery 代码的尝试：

```
$('#[someButton]').click(function () {
        var tableRow = $("td:contains('required')").closest('td').find('input');
        $(tableRow).attr('checked', true);
}); 
```

当我调试这段代码时，tableRow.length 返回 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:30:01.613

我想我自己找到了答案:)

```
var tableRow = $("td:contains('required')").prev().find('input');

$(tableRow).attr('checked', true); 
```

有没有更优雅/有效的方法来做到这一点？

# jquery - DataTables 对字符串而不是数字进行排序

> ID：11341379
> 
> 赞同：11
> 
> 时间：2012-07-05T09:21:43.533
> 
> 标签：jquery, sorting, datatables

我正在使用[jquery.datatables](http://datatables.net/)在数据表列中显示数字。数字被格式化为在千单位之间有空格（如`123 456 789`）。不幸的是，这种数字格式会引发*字符串*排序而不是*数字*排序（请参阅本问题末尾的屏幕截图）。

我已经确定：

*   `function _fnSort(oSettings, bApplyClasses) {`是排序的核心功能。
*   在这个函数中，使用了*动态函数排序*方式（如果`if (!window.runtime) {`为真则执行）
*   使用的**字符串排序函数**是以下两个函数。

    ```
    /*
    * text sorting
    */
    "string-asc": function(a, b) {
        var x = a.toLowerCase();
        var y = b.toLowerCase();
        return ((x < y) ? -1 : ((x > y) ? 1 : 0));
    },

    "string-desc": function(a, b) {
        var x = a.toLowerCase();
        var y = b.toLowerCase();
        return ((x < y) ? 1 : ((x > y) ? -1 : 0));
    }, 
    ```

我对javascript的了解很差，这里最好的方法是什么？

1.  调整字符串排序函数以检测*千数格式的*大小写，并进行比较（我想这在大型数据集上会很慢）。
2.  提供专用于*千位格式*的数字排序功能? 在这种情况下
    *   你会怎么编码？
    *   我如何向核心排序功能指示使用这个特殊的数字排序功能？

这是排序现在的样子：

![在此处输入图像描述](../Images/44936e2c56699b563b4a489a87f51d2c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T09:28:04.130

要对此类值进行排序，您可以使用此排序功能：

```
var sortFunction=function(a, b)​{
    var ia = parseInt(a.split(' ').join(''), 10);
    var ib = parseInt(b.split(' ').join(''), 10);
    return ia-ib;
}; 
```

测试 ：

```
var data = ['3 333', '100 333', '22 000', '1 333'];
console.log(data.sort(sortFunction)); 
```

使用合理数量的值，这将足够快。如果您没有检测到性能问题，则不应尝试丰富数据。

**编辑 ：**

事实上，[文档](http://datatables.net/plug-ins/sorting)提出了一个适当的（类似的）排序功能：

```
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    "formatted_numbers-pre": function ( a ) {
        a = (a==="-") ? 0 : a.replace( /[^\d\-\.]/g, "" );
        return parseFloat( a );
    },

    "formatted_numbers-asc": function ( a, b ) {
        return a - b;
    },

    "formatted_numbers-desc": function ( a, b ) {
        return b - a;
    }
} ); 
```

添加此扩展后，您只需设置`sType`列的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:37:01.987

好的，经过大量搜索，我找到了替代解决方案。*dystroy*和*Allan Jardine*提出的解决方案当然更干净。但这意味着触摸 HTML，在[我的情况下](http://www.ndepend.com/SampleReports.aspx)，触摸 HTML 会引发棘手的消息框，如下面的这个。

![在此处输入图像描述](../Images/d82d0fda7a2b0fc291bc68cf0159d88f.png)

所以我的解决方案是触摸 javascript 字符串排序算法，在数字和文本案例之间切换。我希望它可以通过使用类似的东西更清洁，`isDigit(sa.charAt[0])`但尽管我做了所有尝试，但它还是不起作用。至少这个解决方案有效并且并不意味着任何明显的性能成本：

```
 /*
    * text + integer sorting
    */
    "string-asc": function(a, b) {
       var sa = a.toString();
       if(sa.length > 0) {
          // Don't know why, isDigit(sa.charAt[0]) doesn't work??
          var ca = sa.substring(0,1);
          if(ca === "0" || ca === "1" || ca === "2" || ca === "3" || ca === "4" || ca === "5" || ca === "6" || ca === "7" || ca === "8" || ca === "9") {
             var x1 = parseInt(a.split(' ').join(''), 10);
             var y1 = parseInt(b.split(' ').join(''), 10);
             return x1 - y1;
          }
       }
       var x = a.toLowerCase();
       var y = b.toLowerCase();
       return ((x < y) ? -1 : ((x > y) ? 1 : 0));
    },

    "string-desc": function(a, b) {
        var sa = a.toString();
        if(sa.length > 0) {
           var ca = sa.substring(0,1);
           if(ca === "0" || ca === "1" || ca === "2" || ca === "3" || ca === "4" || ca === "5" || ca === "6" || ca === "7" || ca === "8" || ca === "9") {
              var x1 = parseInt(a.split(' ').join(''), 10);
              var y1 = parseInt(b.split(' ').join(''), 10);
              return y1 - x1;
           }
        }
        var x = a.toLowerCase();
        var y = b.toLowerCase();
        return ((x < y) ? 1 : ((x > y) ? -1 : 0));
    }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T20:03:05.170

对于正在阅读本文并希望获得数字之间空格的完整答案的任何人：

```
 jQuery.extend( jQuery.fn.dataTableExt.oSort, {
      "formatted_numbers-pre": function ( a ) {
        a = (a===" ") ? 0 : a.replace( /[^\d\-\.]/g, "" );
        return parseFloat( a );
      },

      "formatted_numbers-asc": function ( a, b ) {
        return a - b;
      },

      "formatted_numbers-desc": function ( a, b ) {
        return b - a;
      }
  } );

    $('.myTable').DataTable({
      "columnDefs": [
        { "type": "formatted_numbers", "targets": 4 }
      ],
    });
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T10:37:26.563

像这样构建 DataTable 时只需设置小数点：

```
var main_table = $('#main_list').DataTable({
    ajax: {
        url: "/api/your/data",
        dataSrc: ''
    },
    columns: [
        { data: "Col1" },
        { data: "Col2" },
        { data: "Col3" },
        { data: "Col4" }
    ],
    language: {
        /* -----> */ "decimal": ",", // <---------
        "emptyTable": "Keine Daten in der Tabelle verfügbar",
        "info": "Anzeigen von _START_ bis _END_ von _TOTAL_ Einträgen",
        "infoEmpty": "Anzeigen von 0 bis 0 von 0 Einträgen",
        "infoFiltered": "(filtriert von_MAX_ Gesamteinträge)",
        "infoPostFix": "",
        /* -----> */ "thousands": ".", // <---------
        "lengthMenu": "_MENU_ Einträge anzeigen",
        "loadingRecords": "Laden...",
        "processing": "Verarbeitung...",
        "search": "Suche:",
        "zeroRecords": "Keine passenden Datensätze gefunden",
        "paginate": {
            "first": "Erste",
            "last": "Letzte",
            "next": "Nächste",
            "previous": "Vorherige"
        },
        "aria": {
            "sortAscending": ": aufsteigend sortieren",
            "sortDescending": ": absteigend sortieren"
        }
    },
    columnDefs: [
        {//set german formatting

            render: function (data, type, row) {
                return formatDE(data,2);
            },
            targets: [2, 4, 5]
        },
        {

            render: function (data, type, row) {
                return formatDE(data,0);
            },
            targets: [3]
        }
    ],
    pageLength: 50}); 
```

如果您深入研究，`jquery.dataTables.js`您会发现它们具有确定每个列值的类型并捕获格式的函数

# ajax - f:ajax 里面 rich:popupMenu 不能从不同的表单执行组件

> ID：11341382
> 
> 赞同：1
> 
> 时间：2012-07-05T09:22:02.170
> 
> 标签：ajax, jsf, richfaces, popuppanel

我有一个`<rich:popupPanel>`标签，在其中我使用`<f:ajax>`事件。因此，它`<rich:popupMenu>`也需要有一个`<h:from>`内部。在我的 ajax 事件中，我需要从“主页”中获取一个值，因此我将它与相应的 :formid:elementid 模式一起列在执行列表中，但这不起作用 - 侦听器方法中的值为 null。这是代码：

```
 <h:form id="form">
        ...
        <h:selectOneMenu  id="selectUser" value="#{usersBean.user_id}" styleClass="comboBoxes" >
            <f:selectItems value="#{usersBean.myModelUsersValues}" />   
            <a4j:ajax event="valueChange" listener="#{usersBean.userSelected}" render="login password customer_name" execute="@this"/>      
        </h:selectOneMenu >
        ...
    </h:form>
    <rich:popupPanel id="popup" modal="true" autosized="true" resizeable="false">

    <f:facet name="header">
        <h:outputText value="Atributes" />
    </f:facet>
    <f:facet name="controls">
        <h:outputLink value="#" onclick="#{rich:component('popup')}.hide(); return false;">
            X
        </h:outputLink>
    </f:facet>
    <h:form id="popupForm">
            ...
            <h:selectOneListbox  id="atrib_list" value="#{usersBean.atribSelect}" styleClass="comboBoxes" style="height:100px;width:100px;">
                        <f:selectItems value="#{usersBean.atribValues}" />  
                        <f:ajax event="valueChange" listener="#{usersBean.atribValuesChanged}" render="child_list" execute="@this :form:selectUser"/>                           
            </h:selectOneListbox > 
            ...
    </h:form>
    </rich:popupPanel> 
```

在`usersBean.atribValuesChanged`侦听器方法中，该`usersBean.user_id`字段为空（没有选择的值）。如何强制执行 form:selectUser 元素，以便我可以在侦听器方法中读取它的选定值？

第2部分：

这只是顺便说一句。问题，也许我应该为此打开另一个线程。问题是当`<h:selectOneListBox>`它只有一个值时，它被创建得更像一个`h:selectOneMenu`。这看起来很糟糕，并且`valueChange`当您选择它时不会触发该事件。这个问题不存在`<h:selectManyListBox>`是不是bug？它可以修复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:00:21.520

这是预期的行为，您真的不能在表单之外提交任何数据。

您可以在表单外重新呈现 JSF 组件（请参阅本文），但您不能将表单外的任何内容发送到服务器。

因此，也许您想要做的是`h:inputHidden`在您要发送的表单中放置一个，`h:selectOneMenu`从第一个表单重新呈现它，然后`idUserHidden`在表单上发送：

```
<h:form id="form">
    ...
    <h:selectOneMenu  id="selectUser" value="#{usersBean.user_id}"
      styleClass="comboBoxes" >
        <f:selectItems value="#{usersBean.myModelUsersValues}" />   
            <!-- rerender the hidden input also: -->
            <a4j:ajax event="valueChange" listener="#{usersBean.userSelected}"
          render="login password customer_name :idUserHidden" execute="@this"/>      
    </h:selectOneMenu >
    ...
</h:form>
....
<h:form>
    ....
    <!-- hidden input to submit the same value of :selectUser -->
    <h:inputHidden id="idUserHidden" value="#{usersBean.user_id}" />

    <h:selectOneListbox  id="atrib_list" value="#{usersBean.atribSelect}"
       styleClass="comboBoxes" style="height:100px;width:100px;">
        <f:selectItems value="#{usersBean.atribValues}" />  
        <f:ajax event="valueChange" listener="#{usersBean.atribValuesChanged}"
          render="child_list" execute="@this idUserHidden"/>                           
        </h:selectOneListbox > 
</h:form> 
```

# xml - XSD：序列中的单个可选元素

> ID：11341386
> 
> 赞同：1
> 
> 时间：2012-07-05T09:22:18.813
> 
> 标签：xml, xsd

我有以下形式的 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<hw:config name="test" xmlns:hw="hw">
  <switch var="var.test" >
    <case value="a">
    </case>
    <case value="b">
    </case>
    <default>
    </default>
    <case value="c">
    </case>
  </switch>
</hw:config> 
```

我想要一个 XSD，它允许可能有一个默认块或没有，但不超过一个。它可能出现在 case 块之间的任何位置。

以下 XSD 应该可以完成这项工作，但 xmllint (libxml2) 说“内容模型不是确定性的。”：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns:hw="hw" targetNamespace="hw" >

    <xsd:simpleType name="defaultType">
      <xsd:restriction base="xsd:string">
      </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="caseType">
      <xsd:simpleContent>
        <xsd:extension base="xsd:string">
          <xsd:attribute name="value" type="xsd:string" use="required" />
        </xsd:extension>
      </xsd:simpleContent>
    </xsd:complexType >

    <xsd:complexType name="switchType" >
      <xsd:sequence>
        <xsd:element name="case" minOccurs="0" maxOccurs="unbounded" type="hw:caseType" />
        <xsd:sequence minOccurs="0" maxOccurs="1">
          <xsd:element name="default" type="hw:defaultType" />
          <xsd:element name="case" minOccurs="0" maxOccurs="unbounded" type="hw:caseType" />
        </xsd:sequence>
      </xsd:sequence>
      <xsd:attribute name="var" type="xsd:string" use="required" />
    </xsd:complexType>

  <xsd:complexType name="configType" >
    <xsd:sequence>
      <xsd:element name="switch" type="hw:switchType" />
    </xsd:sequence>
    <xsd:attribute name="name" type="xsd:string" />
  </xsd:complexType>

  <xsd:element name="config" type="hw:configType" />

</xsd:schema> 
```

为什么这个模式不是确定性的？有没有办法改写它，使它成为决定论者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:32:06.357

正如其他人所指出的，这似乎是 xmllint（或者更确切地说是 libxml）中的一个错误。等效的 DTD 没有任何问题——即声明

```
<!ELEMENT switch (case*, (default, case*)?) > 
```

毫无怨言地被接受。因此，该错误似乎纯粹是在 XSD 支持中，而不是在更普遍的确定性检查中。

一种解决方法是替换 (...)? 在 (default, case*) 和空序列之间进行选择：

```
<xsd:complexType name="switchType" >
  <xsd:sequence>
    <xsd:element name="case" 
                 minOccurs="0" maxOccurs="unbounded" 
                 type="hw:caseType" />
    <xsd:choice>
      <xsd:sequence/>
      <xsd:sequence>
        <xsd:element name="default" type="hw:defaultType" />
        <xsd:element name="case" 
                     minOccurs="0" maxOccurs="unbounded" 
                     type="hw:caseType" />
      </xsd:sequence>
    </xsd:choice>
  </xsd:sequence>
  <xsd:attribute name="var" type="xsd:string" use="required" />
</xsd:complexType> 
```

# tabs - 选项卡未加载

> ID：11341393
> 
> 赞同：0
> 
> 时间：2012-07-05T09:22:45.300
> 
> 标签：tabs, facebook-apps

我在此页面上发布了一个标签信息[https://www.facebook.com/pages/Gianluca-Bottaro/302369106525364?sk=app_323186087769261](https://www.facebook.com/pages/Gianluca-Bottaro/302369106525364?sk=app_323186087769261)，但它不想显示:-(

我多次控制设置，看起来很正确。添加了截图。

我问过我的供应商，他说从他们那里一切都很好，实际上该页面显示在 facebook 之外。

真的需要帮助，它快把我逼疯了！

这是设置的屏幕截图：

![截屏。](../Images/573be9338f9df954c6fef499ba70d787.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:56:13.790

检查您的服务器日志 - 您的服务器似乎拒绝了来自 Facebook 的 POST 请求，并将您发送到该垃圾邮件页面作为您服务器的 403/405 错误页面的一部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:21:57.710

我认为您必须`index.html`从“页面选项卡”设置中删除。

# iphone - 如何在 iPhone 中逐字制作文字动画？

> ID：11341397
> 
> 赞同：0
> 
> 时间：2012-07-05T09:23:05.903
> 
> 标签：iphone, animation, text

大家好，我是 iPhone 开发的新手，我想为文字制作动画，`UITextView`如果有人可以从非常基础的角度告诉我，我将非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:14:53.263

它不会真的被动画化，但你可以将要显示的文本分解成单词

NSArray *wordsToDisplay = [文本组件SeparatedByString:@" "];

然后运行一个计时器，每次计时器触发时，在文本视图中的文本中添加另一个单词，一旦显示所有单词，计时器就会失效

# ajax - Drupal 7 - 如何使用 AJAX 更改多个下拉列表？

> ID：11341399
> 
> 赞同：3
> 
> 时间：2012-07-05T09:23:08.900
> 
> 标签：ajax, database, drupal, drop-down-menu, drupal-7

我是 Drupal 和 PHP 的新手。[我对这个未回答](https://stackoverflow.com/questions/9408761/dynamic-dropdown-by-ajax-drupal-7)的问题有类似的问题，我自己也找不到。

我需要用户需要选择的 3 个相关下拉列表：

*   1st-讲师。
*   2nd-他的相关课程之一。
*   3rd-课程章节之一。

（数据是从数据库中提取的）

作为个人，他们工作得很好（当我选择讲师时，课程列表会更新，当我选择课程时，章节会更新），但是当我选择讲师时，章节列表不会更新以反映课程下降的变化-向下。

这是我到目前为止写的代码：

```
function test_form($form, &$form_state)
{
  $form = array();
  $lect_options = drupal_map_assoc(get_lecturer_dropdown_options());
  $selected_lect = isset($form_state['values']['lect']) ? $form_state['values']['lect'] : key($lect_options);

  $form['lect'] = array(
    '#type' => 'select',
    '#title' => t('Lecturer Name:'),
    '#default_value' => $selected_lect,
    '#options' => $lect_options,
    '#ajax' => array(
       'callback' => 'ajax_dependent_crs_dropdown_callback',
       'wrapper' => 'dropdown-course-replace',
       ),
    );

  $course_options = drupal_map_assoc(_ajax_get_crse_dropdown_options($selected_lect));
  $selected_course = isset($form_state['values']['course']) ? $form_state['values']['course'] : key($course_options);

  $form['course'] = array(
    '#type' => 'select',
    '#title' => t('Courses:'),
    '#prefix' => '<div id="dropdown-course-replace">',
    '#suffix' => '</div>',
    '#options' => $course_options,
    '#default_value' => $selected_course,
    '#ajax' => array(
      'callback' => 'ajax_dependent_chap_dropdown_callback',
      'event' => 'change',
      'wrapper' => 'dropdown-chap-replace',
     ),
   );

  $form['chapter'] = array(
    '#type' => 'select',
    '#title' => t('Chapter:'),
    '#prefix' => '<div id="dropdown-chap-replace">',
    '#suffix' => '</div>',
    '#options' => _ajax_get_chap_dropdown_options($selected_course),
  );    

  return $form;
}

function ajax_dependent_crs_dropdown_callback($form, $form_state) {
  return $form['course'];
}
function ajax_dependent_chap_dropdown_callback($form, $form_state) {
  return $form['chapter'];
}

function get_lecturer_dropdown_options()
{
  $lect_array = array();

  $lect_result = db_query("SELECT Vod_Lectuerers.LecturerID, Vod_Lectuerers.LecFirsName, Vod_Lectuerers.LecLastName FROM Vod_Lectuerers ORDER BY Vod_Lectuerers.LecturerID");

  foreach ($lect_result as $lect_key=>$lect_row)//Get each lecturer data from the query result
  {
    $lect_array[] = $lect_row->lecturerid . '# ' . $lect_row->lecfirsname . ' ' . $lect_row->leclastname;
  }

  return $lect_array;
}

function _ajax_get_crse_dropdown_options($key) 
{
  if ($key!='')
  {   
    $course_data = array();
    $lect_id = substr($key, 0, 4);//cut the ID for the key recived by function

    $crs_result = db_query("SELECT Vod_Course.CourseID, Vod_Course.CourseName FROM Vod_Course WHERE Vod_Course.LecturerID='$lect_id' ORDER BY Vod_Course.CourseID", array($lect_id));

    foreach ($crs_result as $crs_key=>$crs_row)//Get each course data from the query result
    {
      $course_data[] = $crs_row->courseid . '# ' . $crs_row->coursename;
    }
    return $course_data;
  }
  else 
  {
    return array();
  }
}

function _ajax_get_chap_dropdown_options($key) 
{
  if ($key!='')
  {   
    $chapter_data = array();
    $course_id = substr($key, 0, 1);//cut the ID

    $cptr_result = db_query("SELECT Vod_Chapters.ChapterID, Vod_Chapters.ChapterDescription FROM Vod_Chapters WHERE Vod_Chapters.CourseID='$course_id' ORDER BY Vod_Chapters.ChapterID", array($course_id));

    foreach ($cptr_result as $cptr_key=>$cptr_row)//Get each chapter data from the query result
    {
      $chapter_data[] = $cptr_row->chapterid . '# ' . $cptr_row->chapterdescription;
    }

    return $chapter_data;
  }
  else 
  {
    return array();
  }
} 
```

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:38:29.373

您可以使用[Hierarchical Select 模块](http://drupal.org/project/hierarchical_select)来做到这一点。您还应该按照[本教程](http://drupal.org/node/532724)开始。

希望这会有所帮助……穆罕默德。

# jquery - 如何使用“z-index”作为 CSS 属性选择器？

> ID：11341401
> 
> 赞同：2
> 
> 时间：2012-07-05T09:23:13.970
> 
> 标签：jquery, css

我需要一个属性选择器来匹配第一个 div 元素与 z-index 和值 0。tTis 是我尝试通过在 jquery 中使用 css 属性选择器语法来获取元素的方式：

```
$("div[z-index='0']").first().doSomeJqueryStuff() .... 
```

在我的文档中，在 div 元素上显式设置了值为 0 的 z-index，但选择器不返回任何结果。感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:26:33.477

尝试

```
$('div').each(function({ 
    if ($('div').css('z-index') === '0') { // or ... === 0
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-06T10:57:40.897

您可以将属性选择器应用于内联样式属性（* 表示包含）：

```
div[style*="z-index: 0"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T09:24:12.970

不，那是不可能的。您不能以这种方式根据**css 属性**值选择元素。

您应该使用您的 CSS 值将**类**或**id**应用于元素并使用它来代替或**遍历所有元素并检查 css 属性的存在**（相当昂贵的操作）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T09:25:58.553

您可以逐个检查它们，直到找到第一个 z-index = 0 ：

```
$('div').each(function({ 
    // Check doc about .css() function
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T09:26:26.543

您使用[Sizzle](http://sizzlejs.com/) CSS 选择器库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T09:26:56.057

`z-index`是一个 CSS 属性，其值为 0。

CSS 选择器由**HTML**（和 SVG，...）id、类、元素、属性、伪和它们的值组成（和 Sizzle，jQuery 的选择器部分以相同的方式制作）。这些 CSS 选择器用于编写 CSS 声明 ( `property: value`) 的 CSS 规则，并将设置 HTML 文档的样式。

# biztalk - BAM 存档活动窗口设置不起作用

> ID：11341405
> 
> 赞同：0
> 
> 时间：2012-07-05T09:23:22.403
> 
> 标签：biztalk, biztalk-bam

我们有一项工作正在运行，将数据从 BAMPrimaryImport 移动到 BAMArchive。部署 BAM 后，我们在目标服务器（单开发服务器）上运行以下命令

```
bm set-activitywindow -Activity:AnActivity -TimeLength:30 -TimeUnit:Day 
```

并得到以下响应...

```
Microsoft (R) Business Activity Monitoring Utility Version 3.9.469.0
Copyright (C) Microsoft Corporation. All rights reserved.

Using 'BAMPrimaryImport' BAM Primary Import database on server 'anyserver'...

The online window for activity 'AvaPreValidation' has been successfully set to 30 days. 
```

到目前为止，一切看起来都很好。然后我执行了 BAM_DM_[ActivityName] 作业以查看发生了什么。我 5 分钟前在该开发服务器上生成的测试数据仍然从 BAMPrimaryImport 中消失（移至 BAMArchive）。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:49:59.533

我想我已经自己解决了这个问题。我上面提到的命令确实有效。我应该检查视图 bma_[activity] *AllInstances 而不是表 bam* [activity]_completed

# jaxb - Mule CXF 客户端并接收未编组的对象

> ID：11341411
> 
> 赞同：1
> 
> 时间：2012-07-05T09:23:44.177
> 
> 标签：jaxb, cxf, mule

我正在尝试将 cxf:jaxws-client 与 http 出站端点结合使用，以使用 Mule 3.3 使用 Web 服务。我已经阅读了许多来源（例如[Mule CXF Marshall Response](https://stackoverflow.com/questions/6345876/mule-cxf-marshall-response)），表明如果我想接收我的操作返回的未编组的 Java 对象，cxf:jaxws-client 元素应该放在出站端点内，例如：

```
<http:outbound-endpoint host="localhost" port="9001" path="crmService?wsdl">
   <cxf:jaxws-client operation="getSomething" serviceClass="com.something.Service" />
</http:outbound-endpoint> 
```

但是，当我尝试此操作时，我在 Mule Studio 中收到模式错误，指出“JAX-WS 客户端不允许成为元素 HTTP 的子级”。如果以上不允许，我如何获取操作返回的未编组对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:21:25.090

所以问题是 Studio 不支持端点内的嵌套 MP。您需要做的是将 jaxws-client 放在出站端点之前。

由于 CXF MP 的工作方式，它将处理以下 MP，然后返回到 jaxws 客户端，在那里将解组响应。因此，出站端点之后的有效负载将是肥皂消息。要获得 POJO，您需要使用 jaxws 客户端和出站端点声明一个子流。子流执行后，主流将根据需要获取 POJO。

我们需要更新文档，以便明确此行为。

HTH 伊娃

# android - 将元素放在单独的行中

> ID：11341414
> 
> 赞同：0
> 
> 时间：2012-07-05T09:24:08.180
> 
> 标签：android

我试图将`TextView`,`EdiText`和`Button`放在 3 个单独的行上，但它们最终在同一行上：

```
<TextView android:id="@+id/lat_label"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/lat_label" />

<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMessage" /> 
```

我刚开始使用android，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:27:01.120

将这`LinearLayout`三个视图作为父级并设置`android:orientation="vertical"` 为`LinearLayout`。就是这样。简单的 ：-）

试试这个..

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

<TextView android:id="@+id/lat_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/lat_label" />

    <EditText android:id="@+id/edit_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"
        android:onClick="sendMessage" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:28:04.323

> 将元素放在单独的行中

您需要为您的*布局*`android:orientation="vertical"`使用属性，然后您将在一行上有*元素，下一个**元素*在其下方。

# html - 如何停止将 textarea 调整到其包含的 div 之外

> ID：11341416
> 
> 赞同：5
> 
> 时间：2012-07-05T09:24:11.307
> 
> 标签：html, css-float, css-position, responsive-design

我一直在玩响应式布局和表单。到目前为止，我对我所拥有的感到非常满意：它从移动设备到宽屏都可以很好地工作；见下文。（目前仅在 firefox/chrome 上测试过。）

在 800px 宽度处，它将消息块移动到右列。问题是这是通过 float:right 和 position:absolute 完成的，这意味着它的高度不再影响周围的 div。所以消息框突出。

我可以（并且确实）通过添加 height:220px 来改进它，这样默认情况下它看起来还可以。但是有人仍然可以在周围的 div 之外调整 textarea 的大小。我发现调整 textareas 的大小是一个很棒的功能，所以不想禁止调整大小。而且 overflow:auto 不是一个解决方案：用户只是将 textarea 上的滚动条换成 div 上的滚动条！

那么，有没有办法让外部 div 调整大小以始终包含 textarea？

```
<html>
<head>
<style>
body{background:#fff;font-family:FreeSerif, serif;font-size:16px;margin: 0 0 0 0;}

#contactform {margin: 0 auto;width:90%;max-width:320px;border:1px #000 solid;border-radius:8px;padding:6px;}
#contactform .required:after{color:red;content:" *";}
#contactform label {display:block;}
#contactform textarea {height:120px;rows:5;min-width:90%;max-width:90%;}
#contactform input,textarea {border: 1px solid red;border-radius:8px;width:90%;height:26px;padding:2px 4px;font-family:sans;}

@media (min-width: 800px) {
#contactform {margin: 0 auto;width:640px;max-width:640px;position:relative;/*height:220px;*/}
#formsecondhalf {top:0;right:6px;position:absolute;}
#contactform textarea {height:200px;rows:8;min-height:200px;min-width:300px;max-width:300px;}
#contactform input,textarea {width: 300px;min-width:300px;max-width:300px;}
}

</style>
</head>
<body>
<div id="contactform">
<form action="" method="post">
<label for="name" class="required">Name:</label>
<input id="name">
<br/>
<label for="email" class="required">Email:</label>
<input id="email">
<br/>
<div id="formsecondhalf">
<label for="message">Message:</label>
<textarea id="message"></textarea>
</div>
<br />
<input type="submit" value="SEND">
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:52:01.203

使用 float:right 而不是绝对定位正确的区域。然后在其他字段周围包裹一个 div，向左浮动，然后将其全部清除。

例子

```
<html>
    <head>
        <style>
            body{background:#fff;font-family:FreeSerif, serif;font-size:16px;margin: 0 0 0 0;}

            #contactform {margin: 0 auto;overflow:auto;width:90%;max-width:320px;border:1px #000 solid;border-radius:8px;padding:6px;}
            #contactform .required:after{color:red;content:" *";}
            #contactform label {display:block;}
            #contactform textarea {height:120px;rows:5;min-width:90%;max-width:90%;}
            #contactform input,textarea {border: 1px solid red;border-radius:8px;width:90%;height:26px;padding:2px 4px;font-family:sans;}

            @media (min-width: 800px) {
                #contactform {margin: 0 auto;width:640px;max-width:640px;position:relative;/*height:220px;*/}
                #formsecondhalf {float:right;}
                #formfirsthalf {float:left;}
                #contactform textarea {height:200px;rows:8;min-height:200px;min-width:300px;max-width:300px;}
                #contactform input,textarea {width: 300px;min-width:300px;max-width:300px;}
            }

        </style>
    </head>
    <body>
        <div id="contactform">
            <div id="formfirsthalf">
                <form action="" method="post">
                    <label for="name" class="required">Name:</label>
                    <input id="name">
                    <br/>
                    <label for="email" class="required">Email:</label>
                    <input id="email">
                    <br/>
            </div>
            <div id="formsecondhalf">
                <label for="message">Message:</label>
                <textarea id="message"></textarea>
            </div>
            <br />
            <input type="submit" value="SEND">
                </form>
        </div>
    </body>
</html> 
```

# php - 使用 SimpleXML 读取参数名称

> ID：11341426
> 
> 赞同：2
> 
> 时间：2012-07-05T09:24:32.377
> 
> 标签：php, xml, simplexml

我有这个表格：

```
<item><parameter name="a">3</parameter></item> 
```

是否可以使用 SimpleXML 读取“a”？

我已经尝试过 $xml->item->parameter->getName(); 但它只返回“参数”。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:28:30.337

是的，使用`attributes()`方法`SimpleXML`

[SimpleXML::attributes()](http://www.php.net/manual/en/simplexmlelement.attributes.php)

```
echo (string)$xml->item->parameter->attributes()->name; 
```

[键盘示例](http://codepad.org/djyZMcuW)

* * *

替代解决方案正在使用`xpath()`

[SimpleXML::xpath()](http://www.php.net/manual/en/simplexmlelement.xpath.php)

```
$name = $xml->xpath('item/parameter/@name');
echo $name[0]; 
```

[键盘示例](http://codepad.org/w0RvdOMr)

`xpath()`总是返回数组（如果出错则返回 false），这就是为什么你需要将它分配给一个 var，或者如果你有**php >= 5.4**你可以使用[数组解引用](http://schlueters.de/blog/archives/138-Features-in-PHP-trunk-Array-dereferencing.html)

```
echo $xml->xpath('item/parameter/@name')[0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T09:29:33.200

阅读有关 SimpleXML 函数的信息：[attribute()](http://www.php.net/manual/fr/simplexmlelement.attributes.php)。

您可以使用它来获取元素的所有属性。
在你的情况下：

```
$attr = $xml->item->parameter->attributes();
$name = $attr['name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:30:24.353

见[http://php.net/manual/en/simplexmlelement.attributes.php](http://php.net/manual/en/simplexmlelement.attributes.php)

xml:

```
<item>
 <parameter name="a">3</parameter >
</item> 
```

php:

```
$xml = simplexml_load_string($string);
foreach($xml->parameter [0]->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
}

// output
name="a" 
```

# javascript - Backbone.js 应用程序方法不是很可扩展 - 嵌套视图

> ID：11341429
> 
> 赞同：1
> 
> 时间：2012-07-05T09:24:39.310
> 
> 标签：javascript, jquery, backbone.js

我正在创建一个主干应用程序，尽管一切似乎都正常，但如果我继续使用这种方法添加功能和视图，我担心我可能需要很快重构。我在后端使用[Parse](http://www.parse.com)，这意味着该对象`Parse`等效于`Backbone.Model`. 我无法控制我的模型，因为它们已经针对移动设备进行了优化，在这里我只需要显示 3 个不同模型的某些关键值。

虽然没有什么“错误”（它有效），但我开始犯“更大”的错误只是时间问题。

这是我的`Router`：

```
App.Controllers.Documents = Backbone.Router.extend({
    routes:{
        "story/:id" : "fullStory",
        "" : "index"
    },
// ...
   fullStory: function(id){
     var self = this;
     var query = new Parse.Query(Steps);
     query.equalTo("story", id)
     var steps = query.collection();

     steps.fetch({
       success: function() {

         new App.Views.Steps({ collection: steps });

         var title = new Story({ objectId: id });
         title.fetch({
              success: function(model, resp) {
              new App.Views.Title({ model: title});
              var idUser = title.toJSON().idUser;
              var user = new Parse.User({ objectId: idUser });
              user.fetch({
                  success: function(){
                         // I just need the username key here...
                     new App.Views.Username({model:user,el:$("#user")});
                  },
                  error: function(){
                     new Error({ message: 'Could not find the user you requested.' });
                  }
               })
             },
              error: function() {
                new Error({ message: 'Could not find that story.' });

               }
          })
        },
        error: function() {
          new Error({ message: "Error loading story." });
        }
      });
} 
```

鉴于在[Parse](http://www.parse.com)中创建对象的方式，我需要访问 3 个不同的对象，这就是我渲染`View`“部分”的原因。我希望这个函数只在`FullStory` `View`其中呈现这些“子视图”，但我不确定如何做到这一点，因为`Parse.Object`s 需要对另一个对象的引用->另一个对象的键`var user = new Parse.User({ objectId: idUser });`在哪里。`idUser`

最后我的`Views`：

```
App.Views.Steps = Backbone.View.extend({
  tagName : "ul",
  className: "steps",
  initialize: function() {
    this.render();
  },
  render: function() {
    this.$el.html(_.template($("#story_steps").html())({ collection: this.collection }));
    $('#steps_wrapper').html(this.el);
  },
});

App.Views.Title = Backbone.View.extend({
  initialize: function() {
    this.render();
  },
  render: function() {
    this.$el.html(_.template($("#story_title").html())({ model: this.model }));
    $('#title').html(this.el);
  }
});
App.Views.Username = Backbone.View.extend({
  initialize: function() {
   this.render();
  },
  template: _.template('<%= name %>'),

  render: function() {
  this.$el.html(this.template(this.model.toJSON()));
  }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:40:21.280

你以错误的方式解决这个问题。您的路由器应该是几行代码来进行初始视图/收集，并可能进行 fetch 调用。大多数功能应该在您的视图中。

你的路由器应该这样做

```
fullStory: function(id){
     var self = this;
     var query = new Parse.Query(Steps);// not sure what this does
     query.equalTo("story", id) // This does nothing!
     var stepsCollection = query.collection();
     var stepsView = new App.View.Steps({collection: stepsCollection});
     stepsCollection.fetch() // you could also do this in initialize()
} 
```

现在您需要知道的是，collection.fetch() 会触发集合上的“重置”事件，该事件会冒泡到视图中，您可以在其中处理它。因此，在视图中侦听您的“重置”事件并处理它，然后重新渲染：

```
App.Views.Steps = Backbone.View.extend({
  tagName : "ul",
  className: "steps",
  initialize: function() {
      this.bindAll(this, 'render');
    this.collection.bind('reset', this.render);
  },
  render: function() {
    this.$el.html(_.template($("#story_steps").html())({ collection: this.collection }));
    $('#steps_wrapper').html(this.el);
  },
}); 
```

请记住 StepsView 的[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle) 负责渲染和处理 Steps（无论它们是什么）及其各自的模型/集合的事件。用户名视图负责渲染和处理与用户名有关的一切。目前，所有事情的责任都在您的路由器中实现，这种方法是完全错误的。

我会质疑您是否需要单独的 USername 和 Title 视图——这些应该作为更广泛视图的模板的一部分呈现出来——而不是它们自己的视图——它们什么都不做。

我感觉到您闻到了不对劲，这就是您发布问题的原因。我会进行重大的重构 - 将您的路由器减少到几行......您的视图将永远是主干中最大的类。

如果你想快速确定骨干，我强烈推荐优秀的 peepcode 截屏视频：

[https://peepcode.com/products/backbone-js](https://peepcode.com/products/backbone-js) [https://peepcode.com/products/backbone-ii](https://peepcode.com/products/backbone-ii) [https://peepcode.com/products/backbone-iii](https://peepcode.com/products/backbone-iii)

您将在大约 3 小时内以 30 美元的价格了解所有内容

# ajax - 使用 PrototypeJS 进行跨域资源共享

> ID：11341431
> 
> 赞同：1
> 
> 时间：2012-07-05T09:25:01.393
> 
> 标签：ajax, xmlhttprequest, prototypejs, express, cors

我正面临一个带有原型 Ajax 请求的常见问题 CORS。我用谷歌搜索了大约 2 个小时，但仍然无法解决问题。我尝试了不同的方法。没有什么帮助我。我需要`Access-Control-Allow-Origin`在我的代码中设置 orgin, 等。我参考了以下网站，但它们没有任何帮助。

[http://kourge.net/node/131](http://kourge.net/node/131)

[使用 PrototypeJS 进行跨域资源共享](https://stackoverflow.com/questions/3413762/cross-origin-resource-sharing-with-prototypejs)

```
new Ajax.Request("http://localhost:4000/somefolder/some.xml", {
    //new Ajax.Request(source, {
        asynchronous: false,
        method: 'get',
        contentType: 'text/xml',
        //requestHeaders: ('Access-Control-Allow-Origin', '*','Access-Control-Allow-Methods','GET','Access-Control-Max-Age','1000','Access-Control-Allow-Headers','*' ),
        //requestHeaders: (Access-Control-Allow-Origin, *,Access-Control-Allow-Methods,GET,Access-Control-Max-Age,1000,Access-Control-Allow-Headers,*),
        //onCreate: function(request) { 
        //   request.transport.setRequestHeader = Prototype.emptyFunction; 
    // },
    requestHeaders: {Access: '*/*'},
    onSuccess: function(result) {   
        alert(result.responseXML);
    }
}); 
```

我收到以下回复：

```
Response Headersview source
Connection  keep-alive
Content-Length  0
Content-Type    text/html; charset=utf-8
Date    Thu, 05 Jul 2012 08:58:08 GMT
X-Powered-By    Express
Request Headersview source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Access-Control-Request-He...    x-prototype-version,x-requested-with
Access-Control-Request-Me...    GET
Connection  keep-alive
Host    localhost:4000
Origin  http://localhost:8080
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0 
```

我将它作为`GET`请求发送，但它作为`OPTIONS`请求发送。

* * *

我也添加了标题作为响应。仍然没有帮助。

```
app.configure('development', function() {
    app.use(express.errorHandler( {
        dumpExceptions :true,
        showStack :true
    }));
    app.all('*', function(req, res, next) { 
        res.setHeader('Access-Control-Allow-Origin', 'http://localhost:4000, http://localhost:8000');
        res.setHeader('Access-Control-Allow-Methods', 'GET,POST,PUT,DELETE');
        res.setHeader('Access-Control-Allow-Headers', 'x-prototype-version,x-requested-with');
        res.setHeader('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8');
        res.setHeader('Accept-Encoding', 'gzip, deflate');
        res.setHeader('Accept-Language', 'en-us,en;q=0.5');
        res.setHeader("X-Requested-With", "XMLHttpRequest" );
        res.setHeader("Orgin", 'http://localhost:4000'); 
        next()
    });
}); 
```

添加/反映的响应：

```
Response Headersview source

Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Access-Control-Allow-Head...    x-prototype-version,x-requested-with
Access-Control-Allow-Meth...    GET,POST,PUT,DELETE
Access-Control-Allow-Orig...    http://localhost:4000, http://localhost:8000
Allow   GET,POST,PUT,DELETE,TRACE,CONNECT,PROPFIND,PROPPATCH,MKCOL,COPY,MOVE,LOCK,UNLOCK,VERSION-CONTROL,REPORT,CHECKOUT,CHECKIN,UNCHECKOUT,MKWORKSPACE,UPDATE,LABEL,MERGE,BASELINE-CONTROL,MKACTIVITY,ORDERPATCH,ACL,SEARCH,PATCH,PURGE
Connection  keep-alive
Content-Length  224
Content-Type    text/html; charset=utf-8
Date    Fri, 06 Jul 2012 06:20:51 GMT
Orgin   http://localhost:4000
X-Powered-By    Express
X-Requested-With    XMLHttpRequest

Request Headersview source

Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Access-Control-Request-He...    x-prototype-version,x-requested-with
Access-Control-Request-Me...    GET
Connection  keep-alive
Host    localhost:4000
Origin  http://localhost:8080
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0 
```

我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:53:39.717

`Access-Control-Allow-Origin: *`需要成为*响应*标头的一部分，而不是请求标头（您的 Ajax 请求）。

您从中请求数据的服务器是授予/拒绝跨域脚本权限的服务器。

我会研究如何为`Access-Control-Allow-Origin`您使用的任何服务器环境进行设置。

# android - MapActivity 中的 SherlockActionBar

> ID：11341432
> 
> 赞同：10
> 
> 时间：2012-07-05T09:25:02.657
> 
> 标签：android, actionbarsherlock, mapactivity

我在整个应用程序中广泛使用了 Sherlock 操作栏，但我有一个从 MapActivity 继承的活动，因此我不能让它从 SherlockActivity 继承。

有什么办法可以利用地图中的 Sherlock 操作栏，以便我可以自定义它？

最好的，曼努埃尔。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T09:45:40.463

您必须下载地图插件：

[https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/downloads](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/downloads)

# python - 如何在文本格式以下的python中获取一些文本值

> ID：11341434
> 
> 赞同：0
> 
> 时间：2012-07-05T09:25:07.307
> 
> 标签：python

我有类似的句子

```
// string1 = value1
// string2 = value2..... 
```

依此类推，我怎样才能使用 python 只获取“值”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:34:16.710

```
print [line.split('=',1)[-1].strip() for line in s.splitlines()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:28:52.830

```
>>> strs="""
// string1 = value1
// string2 = value2
"""
>>> [x.split('=')[1].strip() for x in strs.split('\n') if x.strip()]
['value1', 'value2'] 
```

# json - 使用没有数组的嵌套文档为我的 JSON 定义有效的猫鼬模式？

> ID：11341437
> 
> 赞同：3
> 
> 时间：2012-07-05T09:25:09.583
> 
> 标签：json, node.js, mongoose, schema-design

我对 JavaScript 和 Mongoose 很陌生。我以设计有点奇怪的 JSON 结尾，我想通过 mongoose 坚持下去。

这是此 JSON 的示例：

```
{name : "a_string", a1 : {something : 'a_number', something_else : 'a_number'}, a2 : {...} } 
```

**a1、a2**是可变的（并非总是有 a1 和 a2，也许还有其他） **something，something_else**也是可变的，可以是不同的标识符 - 它们是属性 -。

也许设计这样一个奇怪的 JSON 是我的错，但是为它定义 Schema 的最佳方法是什么？

我有多种选择，但都不能说服我：

```
Schema {
      myJSON : []
} 
```

这非常难看，但现在我可以将我的 JSON 存储为 myJSON[0] = {name: "theName"...}。Ofc 是最丑陋的，但与我的原始数据结构最接近。

另一个

```
json Schema {
   name: String,
   parts: [part]
}

part Schema {
   name :  String,
   props : [prop]
}

prop Schema {
   name : String,
   value : Numeric
} 
```

这更漂亮但是我发现了一些麻烦，最终的 JSON 将有许多我在原始 JSON 上没有的数组和间接：

```
{name :"a_string", parts:[{name : "a1", 
           props : [{name : "something", value: 'a_number'}]},{...}]} 
```

有没有办法从 Schema 中删除所有这些烦人的数组？

**更新：**

最后我解决了我的问题，因为我可以稍微调整我的数据模型：

```
var mySchema = new Schema({
       name  : String
     , valid   : Boolean
     , parts  : {}
}); 
```

然后“道具”包含我想要的所有JSON（名称放在外面）。这不是我的想法，但它工作正常（我认为）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:34:05.183

看起来您正在使用 mongoose[嵌入式文档](http://mongoosejs.com/docs/embedded-documents.html)。

我不确定嵌入式文档是否总是被包裹在数组中。

按照这个猫鼬文档示例：

```
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , date      : Date
  , comments  : [Comments]
  , meta      : {
        votes : Number
      , favs  : Number
    }
}); 
```

一个 BlogPost 可以包含多个评论，评论将被包装在一个数组中（如果我是对的，就像你的问题一样）。

如果你在模式定义中去掉那个数组怎么办？

使用`Comments`而不是`[Comments]`：

```
var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , date      : Date
  , comments  : Comments
  , meta      : {
        votes : Number
      , favs  : Number
    }
}); 
```

我现在不能这样尝试。

否则，我有一个使用[猫鼬虚拟属性](http://mongoosejs.com/docs/virtuals.html)的想法，如果这不起作用，请告诉我。

**编辑**

使用虚拟属性，您可以执行以下操作：

```
BlogPost
    .virtual('customComment')
    .get(function() { 
        return this.comments[0]; 
    }); 
```

这将返回第一个没有数组的评论条目对象。

```
var BlogPost = mongoose.model('BlogPost');

BlogPost
    .find({ title: 'foo' })
    .populate('comments')
    .run(function (err, post) {

    console.log(post.customComment); // returns the first comment without array
}); 
```

未经测试，这可能包含拼写错误。

# c# - 将 If 转换为 Switch 语句

> ID：11341439
> 
> 赞同：0
> 
> 时间：2012-07-05T09:25:21.543
> 
> 标签：c#, if-statement, switch-statement, case

我一直在尝试将 If Else 语句转换为 switch，但它给出了一个错误，它需要一个常量：

这是我一直在处理的代码：

```
using System;

namespace ConsoleApplication6

{
    class Program
    {
        static void Main()
        {
            String me;
            int ME = 0, YOU = 5, THEY = 20, THEM = 30;
            Console.WriteLine("Default Values: YOU = 5, THEY = 20 and THEM = 30\nValue for \"ME\" >>");
            me = Console.ReadLine();
            ME = Int16.Parse(me);

            switch(true) {
                case (ME > 0 && ME < 12) :  
                 YOU = ME;
                 Console.WriteLine("Value of YOU is {0}", YOU);
                 break;

                case ( ME == 15):
                YOU = THEY * THEM;
                Console.WriteLine("Value of YOU is {0}", YOU);
                break;

                case (ME == 20):
                YOU++;
                Console.WriteLine("Value of YOU is {0}", YOU);
                break;

                case (ME == 17):
                YOU = YOU - 4;
                Console.WriteLine("Value of YOU is {0}", YOU);
                break;

                default:
                Console.WriteLine("You've entered {0}", ME);
                Console.WriteLine("Value of YOU is {0}", YOU);
                break;

           }
            Console.WriteLine("Press Enter to EXIT");
            Console.ReadLine();

        }

    }
} 
```

这是我要转换的内容：

```
using System;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main()
        {
            String me;
            int ME = 0, YOU = 5, THEY = 20, THEM = 30;
            Console.WriteLine("Default Values: YOU = 5, THEY = 20 and THEM = 30\nValue for \"ME\" >>");
            me = Console.ReadLine();
            ME = Int16.Parse(me);

            if (0 < ME && ME < 12)
            {
                YOU = ME;
                Console.WriteLine("Value of YOU is {0}", YOU);
            }
            else if( ME == 15)
            {
                YOU = THEY * THEM;
                Console.WriteLine("Value of YOU is {0}", YOU);
            }

            else if (ME == 20)
            {
                YOU++;
                Console.WriteLine("Value of YOU is {0}", YOU);
            }

            else if (ME == 17)
            {
                YOU = YOU - 4;
                Console.WriteLine("Value of YOU is {0}", YOU);
            }

            else
            {
                Console.WriteLine("You've entered {0}", ME);
                Console.WriteLine("Value of YOU is {0}", YOU);

            }
            Console.WriteLine("Press Enter to EXIT");
            Console.ReadLine();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:30:14.703

我认为您需要先了解开关。开关应用于变量，在本例中为“ME”。此外，switch-case 不能有“范围”条目，只有“精确”。所以你的代码看起来像：

```
String me;
int ME = 0, YOU = 5, THEY = 20, THEM = 30;
Console.WriteLine("Default Values: YOU = 5, THEY = 20 and THEM = 30\nValue for \"ME\" >>");
me = Console.ReadLine();
ME = Int16.Parse(me);

if ((0 > ME) && (ME < 12))
{
    YOU = ME;
    Console.WriteLine("Value of YOU is {0}", YOU);
}
else 
{
    switch (ME)
    {
        case 15:
            YOU = THEY * THEM;
            break;
        case 20:
            YOU++;
            break;
        case 17:
            YOU = YOU - 4;
            break;
        default:        
            break;
    }

    Console.WriteLine("You've entered {0}", ME);
    Console.WriteLine("Value of YOU is {0}", YOU);
}
Console.WriteLine("Press Enter to EXIT");
Console.ReadLine(); 
```

你也犯了一个复制粘贴错误：`if (0 < ME && ME < 12)`应该`if (0 > ME && ME < 12)`。

要寻求仅开关解决方案，您可以使用跌落槽案例。但我认为这很丑陋，使代码更难阅读。

```
String me;
int ME = 0, YOU = 5, THEY = 20, THEM = 30;
Console.WriteLine("Default Values: YOU = 5, THEY = 20 and THEM = 30\nValue for \"ME\" >>");
me = Console.ReadLine();
ME = Int16.Parse(me);

switch (ME)
{
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    case 10:
    case 11:
        YOU = ME;
        break;          
    case 15:
        YOU = THEY * THEM;
        break;
    case 20:
        YOU++;
        break;
    case 17:
        YOU = YOU - 4;
        break;
    default:        
        break;
}

Console.WriteLine("You've entered {0}", ME);
Console.WriteLine("Value of YOU is {0}", YOU);

Console.WriteLine("Press Enter to EXIT");
Console.ReadLine(); 
```

# image-processing - 直方图均衡变换函数

> ID：11341440
> 
> 赞同：0
> 
> 时间：2012-07-05T09:25:23.863
> 
> 标签：image-processing

假设给定大小为 64*64 像素（M*N=4096）的 3 位图像（L=8）具有如下所示的强度分布。如何获得直方图均衡变换函数，然后计算出图像的均衡直方图？

```
Rk     nk
0      800
1      520
2      970 
3      660
4      330
5      450
6      260
7      106 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:34:46.550

*“直方图均衡是自动获取变换函数的过程。所以你不必担心变换函数的形状和性质”*

所以在直方图均衡中，变换函数是使用累积频率方法计算的，这个过程是自动的。根据图像的直方图，我们确定了累积直方图，`c`我们会重新调整值，使它们占据 8 位范围。以这种方式，`c`成为一个查找表，可以随后应用于图像以执行均衡。

```
rk      nk       c        sk = c/MN       (L-1)sk     rounded value
0       800      800      0.195            1.365      1
1       520      1320     0.322            2.254      2
2       970      2290     0.559            3.913      4
3       660      2950     0.720            5.04       5 
4       330      3280     0.801            5.601      6
5       450      3730     0.911            6.377      6
6       260      3990     0.974            6.818      7
7       106      4096     1.000            7.0        7 
```

因此，现在均衡直方图是

```
rk           nk
0            0
1            800
2            520     
3            0
4            970
5            660
6            330 + 450 = 780
7            260 + 106 = 366 
```

均衡算法可以表示为

```
Compute a scaling factor, α= 255 / number of pixels
Calculate histogram of the image
Create a look up table c with
    c[0] =  α * histogram[0]
for all remaining grey levels, i, do
    c[i] = c[i-1] + α * histogram[i]
end for
for all pixel coordinates, x and  y, do
    g(x, y) = c[f(x, y)]
end for 
```

但是直方图均衡存在一个问题，这主要是因为它是一种完全自动化的技术，无需设置参数。有时，它可以显着提高我们解释图像的能力。然而，很难预测均衡对任何给定图像的益处。事实上，它可能根本没有任何用处。这是因为对比度的改进在统计上是最优的，而不是在感知上。在具有窄直方图和相对较少灰度级的图像中，由于直方图均衡而导致的对比度大幅增加可能会产生降低感知图像质量的不利影响。特别是，采样或量化伪影和图像噪声可能变得更加突出。

自动获取转换（映射）函数的替代方法是**直方图规范**. 在直方图规范中，我们不需要平面直方图，而是明确指定特定形状。在希望一组相关图像具有相同直方图的情况下，我们可能希望这样做——也许是为了使特定操作对所有图像产生相同的结果。直方图规范可以可视化为一个两阶段的过程。首先，我们通过均衡将输入图像转换为具有平坦直方图的临时图像。然后我们将这个均衡的临时图像转换为具有所需直方图的输出图像。第二阶段的映射函数很容易获得。由于累积直方图的重新缩放版本可用于将具有任何形状的直方图转换为平面直方图，

有关使用 C 和 C++ 代码的直方图均衡和映射函数的更多详细信息 [https://programming-technique.blogspot.com/2013/01/histogram-equalization-using-c-image.html](https://programming-technique.blogspot.com/2013/01/histogram-equalization-using-c-image.html)

# android - Android 以编程方式在 for 循环中添加视图

> ID：11341441
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:25:33.470
> 
> 标签：android, for-loop

嗨，我已经创建了一个日期数组，我想为每个日期添加一个标题视图，然后我将运行另一个 for 循环，它将在每个标题下添加其他视图。目前我只想添加标题视图，但目前屏幕上没有显示任何内容。所以我的问题是如何以编程方式在 for 循环中添加视图？

这是我的代码

```
public void FillData() throws JSONException{    

      ListView list = getListView();
        list.scrollTo(0, 0);
        list.setVerticalFadingEdgeEnabled(false);

           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);

       fixturesView = LayoutInflater.from(getBaseContext()).inflate(R.layout.fixturescell,
                 null);

       //Log.v("MyFix", "fixturesArray = " + fixturesArray);
       if(fixturesArray.length() < 1){

             TextView emptytext = (TextView) fixturesView.findViewById(R.id.TextView02);
             emptytext.setText("No Upcoming Fixtures Available");

       }else{
        try{   

            for(int t = 0; t < fixturesArray.length(); t++){
               JSONObject matchDateDict = fixturesArray.getJSONObject(t);
               String matchDate = matchDateDict.getString("matchdate");

               if(matchDatesArray.length() != 0){

                   int lm = t - 1;
                   JSONObject lastDateDict = fixturesArray.getJSONObject(lm);
                   String lastMatchDate = lastDateDict.getString("matchdate");

                   Log.v("MyFix", "lastMatchDate " + lastMatchDate);

                   if(matchDate.equals(lastMatchDate)){
                       Log.v("MyFix", "2 are the same");                        
                   } else {
                       Log.v("MyFix", "add new matchdate to array");   
                       matchDatesArray.put(matchDate);

                   }

               } else {
                   Log.v("MyFix", "add new matchdate to array (first time only)");                      
                   matchDatesArray.put(matchDate);    

               }
            }

            Log.v("MyFix", "matchDatesArray = " + matchDatesArray);

        }catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         DateHeader = LayoutInflater.from(getBaseContext()).inflate(R.layout.redcell,
                 null);

         adapter = new MergeAdapter();

        for(int t = 0; t < matchDatesArray.length(); t++){      

          JSONObject mdheaderdict = matchDatesArray.getJSONObject(t);
           String matchheader = mdheaderdict.getString("matchdate");

               TextView matchdayheader = (TextView) DateHeader.findViewById(R.id.redheadertext);
               matchdayheader.setText(matchheader);
               adapter.addView(DateHeader);

        }

     } 

       setListAdapter(adapter);  

}     

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:35:17.693

我想这就是你正在寻找的

[http://code.google.com/p/android-amazing-listview/](http://code.google.com/p/android-amazing-listview/)

带有部分标题和自动加载下一页的 ListView（即最后一项上的“正在加载...”）

# silverlight - 失去焦点时重新加载 DataGrid 中的 Silverlight 控件

> ID：11341447
> 
> 赞同：0
> 
> 时间：2012-07-05T09:25:54.893
> 
> 标签：silverlight, datagrid

我在包含自定义控件的 Silverlight 控件中有一个 DataGrid。这些自定义控件也可以在网格之外使用并且可以完美运行。然而，当在网格中使用时，它们似乎会在失去焦点时自行重置（即我们移动到另一个单元格）。

为了测试它不是我的自定义控件，我添加了一个包含自动完成框的列。当在框中键入并切换到下一列时，框会被清除。

调试时，我可以看到在我们失去焦点后调用了控件加载事件，这证实了在移动到下一个字段时它正在重新加载/重新创建！？是否出于某种原因根本没有将更改提交到网格？

例如 XAML（非常基本，这里没什么奇怪的）

```
 <sdk:DataGridTemplateColumn Header="Description">
             <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                            <sdk:AutoCompleteBox Name="Description" Width="100" />
                        </DataTemplate>
                    </sdk:DataGridTemplateColumn.CellTemplate>
                </sdk:DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:53:52.090

这是完全正常的 - CellTemplate 在渲染单元格时使用，如果您打开了虚拟化，当将行滚动到视图之外时它们会被破坏。

当网格单元进入编辑模式时使用 CellEditingTemplate，此时您的编辑控件将被创建 - IOW 编辑控件是按需创建的。仅关注单元格不足以使单元格自行进入编辑模式。

# ruby - MatchData.begin(n) 在 jruby 上总是返回 0

> ID：11341449
> 
> 赞同：1
> 
> 时间：2012-07-05T09:26:02.053
> 
> 标签：ruby, regex, jruby

我只是在jruby上运行时发现的。当文本中有中文/日文时，MatchData.begin() 将始终返回 0。

我使用以下 ruby​​ 脚本进行了测试：

```
# encoding: utf-8
text = 'i love dog @chichi dog dog'
text_cn = '我爱你狗狗 @chichi 狗狗'
text_jp = '私はあなたの犬を愛して @chichi ドッグ'
reg = /([@＠])([a-zA-Z0-9_]{1,20})(.*)/o

puts "==== Text in English ===="
text.scan(reg) do |before, at, screen_name, list_slug|
  puts $~.inspect

  puts "1\. #{$~.begin(1)}"
  puts "2\. #{$~.begin(2)}"
  puts "3\. #{$~.begin(3)}"
end

puts "==== Text in Chinese ===="
text_cn.scan(reg) do |before, at, screen_name, list_slug|
  puts $~.inspect

  puts "1\. #{$~.begin(1)}"
  puts "2\. #{$~.begin(2)}"
  puts "3\. #{$~.begin(3)}"
end

puts "==== Text in Japanese ===="
text_jp.scan(reg) do |before, at, screen_name, list_slug|
  puts $~.inspect

  puts "1\. #{$~.begin(1)}"
  puts "2\. #{$~.begin(2)}"
  puts "3\. #{$~.begin(3)}"
end 
```

结果是`jruby-1.6.7.2`：

```
$ jruby -S test.rb
==== Text in English ====
#<MatchData "@chichi dog dog" 1:"@" 2:"chichi" 3:" dog dog">
1\. 11
2\. 12
3\. 18
==== Text in Chinese ====
#<MatchData "@chichi 狗狗" 1:"@" 2:"chichi" 3:" 狗狗">
1\. 0
2\. 0
3\. 0
==== Text in Japanese ====
#<MatchData "@chichi ドッグ" 1:"@" 2:"chichi" 3:" ドッグ">
1\. 0
2\. 0
3\. 0 
```

如果我在`ruby-1.9.2-p290`一切正确的情况下运行它，我不确定是否需要对我错过的 jruby 进行一些设置？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:57:38.170

刚刚跟里面的人聊过`jruby irc`，这个是固定的`1.7.0`。

两者都是正确`1.7.0.preview1`的`1.7.0.prevew2`

# android - isRegistered() 与 isRegisteredOnServer()

> ID：11341452
> 
> 赞同：5
> 
> 时间：2012-07-05T09:26:17.297
> 
> 标签：android, google-cloud-messaging

> isRegisteredOnServer()
> 
> 检查设备是否在服务器端注册成功

新的 GCM 会`isRegisteredOnServer()`检查应用程序是在 GCM 上还是在 3rd 方服务器上注册的？`isRegistered()`和 和有什么不一样`isRegisteredOnServer()`？

如果`isRegisteredOnServer()`在第三方服务器中检查，在第三方服务器中将如何处理？第三方服务器是否也有任何特定的功能要实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T09:33:14.670

`isRegistered()`返回应用程序/设备对是否在 GCM 上注册。

`isRegisteredOnServer()`返回您是否已将注册 ID 发送到您的服务器。它知道这一点，因为你会`setRegisteredOnServer()`在成功之后调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T09:37:39.797

当您调用时`GCMRegistrar.setRegisteredOnServer(context, true)`，它会保存在您负责在后端服务器上注册此用户的 Google 服务器上（服务器会将 msg 发布到 Google 服务器）

当您调用 时`GCMRegistrar.setRegisteredOnServer(context, false)`，它会删除该标志。

`isRegisteredOnServer()`用于查询该属性。

希望这有帮助。

# python - '扫'分栏实现

> ID：11341453
> 
> 赞同：0
> 
> 时间：2012-07-05T09:26:18.513
> 
> 标签：python, wxpython

好的，我意识到这不是一个非常明确的标题，所以希望这可以更好地澄清它（如果有人能为它想出一个更清晰的名称，我将不胜感激！）。

我正在为我的幼儿园班级创建一个积分跟踪器。我在脑海中看到的是一个底部为 0，顶部为 100 的条形图，以及一个从 0 到 100 上下扫描的颜色渐变点条形图。当他们点击触摸屏时，该条形图会冻结，并且它们的团队获得 x 点，其中 x 是条冻结的数字。

现在，我正在研究移动条的功能（甚至还没有设置冻结/中断）。我把它放在一起，但感觉真的很不优雅和丑陋。

```
def score_inc():
    x = 0
    while x < 100:
        x += 1
        time.sleep(0.01)
    while x > 100:
        x -= 1
        time.sleep(0.01) 
```

更不用说，我有理由相信这段代码会阻止操作，这意味着我无法显示/更新图形。

这是我第一次涉足 GUI 编程，所以我小心翼翼地尝试在编写图形前端之前编写一个无 GUI 的后端，这是错误的路线吗？由于缺乏更好的术语，是否有一种更流畅、更不丑陋的方式来使用“GUI 感知”的函数来实现这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:25:22.910

在 wxPython 中，您可能想要使用 wx.Slider，尽管我认为它不支持您正在寻找的颜色。但是，您可能能够将滑块事件绑定到可以为您执行此操作的 wx.GCDC 或 wx.PaintDC。我会向 wxPython 用户组询问其他建议。

您对 time.sleep() 阻止 GUI 的主循环是正确的。如果您这样做，您的 GUI 将不会响应。相反，您应该使用 wx.Timer。这是一个[教程](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)。您可以将 time.sleep() 放入一个线程中，但我认为这太过分了，并且会使它变得不必要地复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:31:39.353

实现条形移动的最简单方法不是单独的函数，而是在与中断相同的循环中：

```
def barLoop():
    current_score = 0
    increment = True
    while True:
        ## HANDLE INTERRUPT HERE ##
        if increment:
            current_score += 1
            if current_score == 100: #stop incrementing at 100
                increment = False
        else:
            current_score -= 1
            if current_score == 0: #start incrementing again at 0
                increment = True 
```

这具有使分数变量暴露以被中断捕获的优点。无论您需要调用什么 GUI 函数来以图形方式更新条形位置，都可以在 if/else 块中调用。这将阻止任何其他事件循环，因此最好将其用作主循环，处理退出和您需要响应的任何其他事件。

# php - 在 KOHANA 框架中检索 GET 参数

> ID：11341456
> 
> 赞同：1
> 
> 时间：2012-07-05T09:26:21.853
> 
> 标签：php, get, routes, kohana

我的网址，例如[http://MYDOMAIN.com/cron/reports/test?code=f463529c1b75f4d868](http://MYDOMAIN.com/cron/reports/test?code=f463529c1b75f4d868)。我需要检索代码 (f463529c1b75f4d868) 。我该怎么办？（我在 Kohana 工作）我有这样的路线：

```
Route::set('cron_defaults', 'cron/<controller>(/<action>(?code=<code>))')
        ->defaults(array(
    'directory' => 'cron',
    'controller' => 'reports',
    'action' => 'test',
)); 
```

在我写的控制器报告中：

```
var_dump(Request::instance()->param('code')); 
```

结果我有NULL。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T09:30:52.890

通常查询字符串应该像这样可用：

```
$code = $this->request->query('code'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T11:13:42.250

为什么不只是`$_GET['code']`代替呢？问号是一个获取请求，您不需要 Kohana。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-16T13:40:44.583

解决此问题的最简单方法是全局数组 $_SERVER！

# javascript - 右对齐新超链接

> ID：11341465
> 
> 赞同：0
> 
> 时间：2012-07-05T09:26:50.963
> 
> 标签：javascript, jquery

是否可以在下面的脚本中使用与“查看结果”右对齐的 jquery/javascript 添加新的超链接？

[这是一个很长的测试问题，用于测试 polldaddy 如何处理超过正常长度的问题............是的，确实是一个很长的问题](http://polldaddy.com/poll/6352993/)............ </p>

在下面的示例中，有一个同名的新超链接“查看结果”

![在此处输入图像描述](../Images/dc9313e2e4c24339c71b00f269010c6d.png)

我想我需要修改类 - 'pds-view-results'

[http://jsfiddle.net/25LjE/8/](http://jsfiddle.net/25LjE/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:30:42.520

看到这个演示：http: [//jsfiddle.net/rathoreahsan/25LjE/14/](http://jsfiddle.net/rathoreahsan/25LjE/14/)

**查询：**

```
$('.pds-view-results').after('<a href="#">test</a>') 
```

**初始化：**

```
$(document).ready(function(){
    $('.pds-view-results').after('<a href="#">test</a>')
}); 
```

**或者**

```
$(function(){
    $('.pds-view-results').after('<a href="#">test</a>')
}); 
```

**或者**

```
$(window).load(function(){
    $('.pds-view-results').after('<a href="#">test</a>')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:42:20.427

添加下面的 jquery 应该可以做到：

```
$(function() {
   $("span.pds-links a").addClass('pds-vote-button');
    $("span.pds-links").css("display","inline");
}); 
```

**[演示](http://jsfiddle.net/25LjE/21/)**

# c# - 使用 Linq To SQL 时，我是否应该在 BLL 类中使用数据访问和业务逻辑

> ID：11341469
> 
> 赞同：1
> 
> 时间：2012-07-05T09:26:56.183
> 
> 标签：c#, asp.net, data-access-layer, business-logic-layer

我正在使用`ASP.NET Web Forms/C#`.

我研究了实施`BLL`和`DLL`我的应用程序。

我发现很多人说 using`Linq To SQL`代替了`DAL`自己。

因此，您应该在`BLL`类本身内部访问数据并实现业务逻辑。不确定它是否正确。

目前我有一个类`CustomerBLL`。我正在访问数据并在其中实现业务逻辑。

所以我的问题是，这是一个好方法吗？

我可以遵循这个吗？

另外，目前我只有一`BLL`门课，我应该`.aspx`每页只使用一门还是一门，或者将相似的页面组合在一起。

这是我的`CustomerBLL.cs`（仅包括几个功能）。

```
namespace CwizBankApp
{
    public class CustomerBLL
    {
        public string GetDateFormat()
        {
            using (var db = new DataClasses1DataContext())
            {
                var format = db.CODEs.Where(code => code.NAME.Equals("dateformat")).Select(code=>code.DRNAME) .SingleOrDefault();  
                return format;   
            }
        }

        public IList<string> GetAccountTypes()
        {
            using (var db = new DataClasses1DataContext())
            {
                var  acctype = db.mem_types.Select(account=>account.CustCategory).Distinct().ToList();
                return acctype;
            }
        }

        public IList<mem_city> GetCities(int index)
        {
            using (var db = new DataClasses1DataContext())
            {
                var city = db.mem_cities.Where(c => c.state_id.Equals(index)).ToList();
                return city;
            }
        }

        public string InsertDate(string datefield,string dateFormat)
        {
            string dd, mm, yyyy;
            string date;
            string [] split = Regex.Split(datefield, @"/");
            yyyy = split[2];
            if (dateFormat.Equals("British"))
            {
                dd = split[0];
                mm = split[1];
            }
           else
            {
                dd = split[1];
                mm = split[0];
            }

            date = mm.PadLeft(2, '0') + "/" + dd.PadLeft(2, '0') + "/" + yyyy;  
            return date;
        }

        public string RetrieveDate(string datefield,string dateFormat)
        {
            string dd, mm, yyyy;
            string date;
            string [] split = Regex.Split(datefield, @"/");
            dd = split[1];
            mm = split[0];
            yyyy = split[2];

            if (dateFormat == "British")
            {
                date = dd.PadLeft(2, '0') + "/" + mm.PadLeft(2, '0') + "/" + yyyy;   
            }
            else
            {
                date = mm.PadLeft(2, '0') + "/" + dd.PadLeft(2, '0') + "/" + yyyy;   
            }
            return date;
        }
} 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:38:57.737

一般来说，我将 BL 与 DAL 分开，因此 DAL 需要对 BL 的引用。这意味着 BL 包含 POCO 和一个描述存储库/工作单元/的接口......所以要回答你的问题，是的，我仍然会创建一个使用 L2S 的 DAL。

为了回答您的第二个问题，我将为您的域中存在的每个实体创建一个业务对象。通常这与 DAL 中的表匹配。aspx 的代码隐藏包含页面的逻辑，而不是业务层。

# objective-c - 如何从 xml 文件导入数据并使用可可在 NSCombobox 中解析它们？

> ID：11341472
> 
> 赞同：0
> 
> 时间：2012-07-05T09:27:19.120
> 
> 标签：objective-c, cocoa

您好我想使用可可将 xml 文件中的数据解析为组合框。我没有找到如何从我的 xml 文件中导入数据。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:38:44.273

要将数据导入 NSDate 对象，您可以使用以下内容：

```
NSString* path = [[NSBundle mainBundle] pathForResource: @"xmlfile" ofType: @"xml"];
NSData* data = [NSData dataWithContentsOfFile: path]; 
```

对于解析 xml，您可以使用 NSXMLParser 或一些 3rdparty 代码，例如：TBXML。
使用 TBXML，您可以像这样加载 xml：

```
TBXML * tbxml = [[TBXML alloc] initWithXMLFile:@"books.xml"]; 
```

# xml - Crm 2011 Fetch XMl - 无效的 XML 问题，如何解决？

> ID：11341473
> 
> 赞同：3
> 
> 时间：2012-07-05T09:27:33.943
> 
> 标签：xml, dynamics-crm-2011, fetchxml

我正在使用 fetch xml 从 ms crm 2011 实体中检索值。它抛出**INVALID XML 错误**，示例 xml 如下所示：

```
<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'>
    <entity name='xyz_registrationanswer'>
         <attribute name='xyz_registrationid' />
         <attribute name='xyz_name' />
         <filter type='and'> 
            <condition attribute='xyz_name' operator='in' >  
                <value>Do you want to subscribe to 1 & 2?</value>         
            </condition> 
        </filter> <order attribute='xyz_name' descending='false' />
    </entity>
</fetch> 
```

通过调查问题，我发现了 1 到 2 之间的**&**符号的原因：

```
<value>Do you want to subscribe to 1 & 2?</value> 
```

1-有人可以帮我解决这个问题吗？

2-还有哪些其他非法字符，我可以处理它们？

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T17:25:46.153

XML 中有五个“非法”字符必须编码为实体：

< 作为 <
> 作为 >
'作为'
" 作为 "
& 作为 &

这是`HttpUtility.HtmlEncode()`有效的。

还有其他一些字符，例如元音变音字符，在 HTML 中使用时应该进行编码，但对于 Unicode XML，只有绝对需要注意这五个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T10:14:36.430

**HttpUtility.HtmlEncode** () 通过处理非法字符（<>&'"）为我工作。

```
<value>HttpUtility.HtmlEncode("Do you want to subscribe to 1 & 2?")</value> 
```

有关更多详细信息，请参阅下面的文章。

[如何使用 Visual C# .NET 查找和替换 XML 文件中的特殊字符](http://support.microsoft.com/kb/316063)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:06:14.103

我实际上会使用`System.Net.WebUtility.HtmlEncode()`而不是`HttpUtility.HtmlEncode()`因为 HttpUtility 在部分信任环境中不受支持。换句话说，在 CRM Online 的沙盒插件中。

@GCATNIM 正确提到了这两种方法都将涵盖的“非法字符”。

# c# - 温莎城堡的词典适配器

> ID：11341477
> 
> 赞同：1
> 
> 时间：2012-07-05T09:28:03.070
> 
> 标签：c#, .net, castle-windsor, castle

我正在尝试将我们的一个应用程序从 Castle Windsor 2.1 升级到 2.5。

我删除了所有 Castle DLL，并添加了从 Castle 网站下载的 2.5 版本：

Castle.Core.dll Castle.Windsor.dll

在进行迁移之前，我还参考了我的项目：

Castle.Components.DictionaryAdapter.dll

但是，根据 Krzysztof Koźmic 在[此处](http://kozmic.pl/2010/07/05/castle-windsor-2-5hellip-the-final-countdown-ndash-beta-1-released/)的帖子，不再需要此类引用，因为 DictionaryAdapter 现在捆绑到 Castle.Core.dll 中。

删除它后，我到处都收到错误消息：

> 错误 6 找不到类型或命名空间名称“DictionaryComponent”（您是否缺少 using 指令或程序集引用？）

和

> 错误 64 找不到类型或命名空间名称“DictionaryKey”（是否缺少 using 指令或程序集引用？）

和

> 错误 27 找不到类型或命名空间名称“DictionaryKeyAttribute”（是否缺少 using 指令或程序集引用？）

然后我想我应该添加对 Castle.Components.DictionaryAdapter.dll 的引用，因为可能是 CORE 没有在其中实现上面列出的类型。

这样做消除了所有错误，但给了我一个新错误：

错误 8 'd:.NET\app\libs\Castle.Core.dll' 和 'd:.Net\app\libs\Castle.Components.DictionaryAdapter.dll 中都存在“Castle.Components.DictionaryAdapter.DictionaryAdapterFactory”类型'

错误发生在以下方法实现上：

```
internal static ISettingService GetServiceFromAdapterFactory(NameValueCollection collection)
{
    var adapter = new DictionaryAdapterFactory();
    return adapter.GetAdapter<ISettingService>(collection);
} 
```

有没有人在从 2.1 升级到 2.5 时遇到过这样的问题，可以给我一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:15:11.760

要在这里回答我自己的问题，这是我必须在代码中更改的内容。

*   将所有**DictionaryKey**更改为**KeyAttribute**
*   将所有**DictionaryComponent**更改为**ComponentAttribute**
*   使用**Kernel.Register**而不是**Kernel.AddComponent**

显然删除了所有 2.1 DLL 并添加了 2.5。您会注意到 DictionaryAdapter.dll 已被删除，因为它现在捆绑在 Castle.Core.dll 中

希望对将来的人有所帮助。

# google-apps-script - 错误数据存储

> ID：11341481
> 
> 赞同：0
> 
> 时间：2012-07-05T09:28:18.740
> 
> 标签：google-apps-script

在我的所有脚本中，当我想检查脚本属性时，我收到此错误：

> 错误数据存储

现在我根本无法访问“项目属性”窗口。可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:36:30.003

你不是一个人。问题是一个空的属性名称。[此处](https://stackoverflow.com/questions/11308215/how-to-reset-user-properties-script-properties-gas-data-storage)报告了此问题（有可能的解决方法）和[Google Apps 脚本问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1519)。

# svg - 使用 RaphaelJS 附加图像翻转形状

> ID：11341482
> 
> 赞同：1
> 
> 时间：2012-07-05T09:28:22.297
> 
> 标签：svg, raphael, jquery-svg

我设法用 Raphel 创建了一个六边形，给它一个笔触和一个填充图像，然后（在 StackOverFlow 的帮助下）设法在六边形上创建了一个翻转动画。

但我面临一个问题。当六边形翻转时，背景图像不会随之翻转。我怎样才能使六边形翻转，但在翻转时，也显示背景图像翻转。

这是我[目前拥有的](http://jsfiddle.net/G7ZRY/)：

```
function polygon(x, y, size, sides, rotate) {
    var self = this;

    self.centrePoint = [x,y];
    self.size = size;
    self.sides = sides;
    self.rotated = rotate;
    self.sizeMultiplier = 50;

    self.points = [];

    for (i = 0; i < sides; i++) {
        self.points.push([(x + (self.size * self.sizeMultiplier) * (rotate ? Math.sin(2 * 3.14159265 * i / sides) : Math.cos(2 * 3.14159265 * i / sides))), (y + (self.size * self.sizeMultiplier) * (rotate ? Math.cos(2 * 3.14159265 * i / sides) : Math.sin(2 * 3.14159265 * i / sides)))]);
    }

    self.svgString = 'M' + self.points.join(' ') + ' L Z';
}

$(document).ready(function() {
    var paper = Raphael(0, 0, 450, 450);

    var path1 = new polygon(100, 100, 2, 6, false);

    var hex1 = paper.path(path1.svgString);

    hex1.node.id = "hex1";
    hex1.attr("fill", "url('http://i49.tinypic.com/23ma7pt.jpg')");
    hex1.attr("stroke", "#aceace");

    /* flip animation */
    hex1.click(function() {
            hex1.animate({transform: "S0,1"},500,'easeIn', function()
            {    
                hex1.attr("fill","url('http://i49.tinypic.com/23ma7pt.jpg')");
                hex1.animate({transform: "S-1,1"},500,'easeOut');
            });
    });
}); 
```

# java - 即使 click() 方法在使用 selenium Web 驱动程序的移动 Web 应用程序中成功执行，屏幕也无法导航

> ID：11341483
> 
> 赞同：1
> 
> 时间：2012-07-05T09:28:26.243
> 
> 标签：java, selenium, webdriver, selenium-webdriver, iphone-web-app

我试图使用 selenium 网络驱动程序单击我的移动网络应用程序上的按钮。按钮被定位，按钮上的文本可以被派生，甚至点击事件表现良好。但导航不会发生。

我尝试使用 Click() 方法、sendKeys() 方法以及脚本执行器。但无法进一步处理。

**代码：**

```
public class TestWeb
{  

    WebDriver driver; 

    private Selenium selenium;   

    @Before
    public void setUp() throws Exception {
      driver = new IPhoneDriver();
      driver.get("http://10.5.95.25/mobilebanking");       
    }

    @Test
    public void TC() throws Exception  { 
        System.out.println("page 1");
        Thread.sleep(5000);
        WebElement editbtn1 = driver.findElement(By.id("ext-comp-1018"));
        String s1 = editbtn1.getText();
        System.out.println(s1);
        editbtn1.click();
        editbtn1.sendKeys(Keys.ENTER);
        ((JavascriptExecutor)driver).executeScript("arguments[0].click;", editbtn1); 

        System.out.println("ok");
    }

@After
    public void tearDown() throws Exception {
         System.out.println("*******Execution Over***********");
    }
} 
```

我分别尝试了 click、sendKeys 和 ScriptExecutor，也尝试了组合。它正在执行而没有任何错误，但导航不会发生。

有没有人可以帮助我用其他方法在按钮上执行点击功能？

* * *

内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:58:11.113

这可能不是你的问题，但我注意到“ext-comp-”并且猜你正在使用 extjs。

我正在使用 GXT，虽然通过 id 查找对很多事情都有效，但在某些提交按钮上却没有。

我不得不在 firefox 中使用 firebug 来定位元素并复制 xpath。然后我可以点击元素

```
driver.findElement(By.xpath("//div[@id='LOGIN_SUBMIT']/div/table/tbody/tr[2]/td[2]/div/div/table/tbody/tr/td/div")).click();  // worked 
```

对我来说，它也在默默地失败。我的提交按钮的 ID 为 LOGIN_SUBMIT 所以我不知道为什么以下失败但是......

```
driver.findElement(By.id("LOGIN_SUBMIT")).click();//failed 
```

编辑：

**这是一个确切的示例（案例 1 of 2）：**

```
WebDriverWait wait = new WebDriverWait(driver, 30);
    wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//div[@id='gwt-debug-LOGIN_SUBMIT']")));
    //wait.until(ExpectedConditions.elementToBeClickable((By.id("gwt-debug-LOGIN_SUBMIT"))));  <!-- id works as well 
```

好的，所以找到了元素。如果不是，它将超时并抛出异常。

尽管如此，以下失败（在Firefox下，与chrome一起使用）没有错误并且页面无法导航。

```
driver.findElement(By.xpath("//div[@id='gwt-debug-LOGIN_SUBMIT']")).click();
//driver.findElement(By.id("gwt-debug-LOGIN_SUBMIT")).click(); <-- fails too 
```

我要做的是：

```
driver.findElement(By.xpath("//div[@id='gwt-debug-LOGIN_SUBMIT']/div/table/tbody/tr[2]/td[2]/div/div/table/tbody/tr/td/div")).click(); 
```

所以我的经验是，即使我用xpath找到了元素，除非我使用完整的xpath，否则点击失败。

**这是另一个确切的示例（案例 2 of 2）：**

我可以找到这样的元素：

```
WebElement we = driver.findElement(By.xpath("//*[@id=\"text" + i + "\"]")); 
```

我知道我找到了它，因为我可以通过以下方式看到文本：

```
 we.getText(); 
```

仍然选择我发现它失败的路径。

```
//get outta town man the following fails
driver.findElement(By.xpath("//*[@id=\"text" + i + "\"]")).click(); 
```

在这种情况下，没有更明确的 xpath 可以尝试，如案例 1 我必须做的是使用 css：

```
//bingo baby works fine
driver.findElement(By.cssSelector("div#text" + i + ".myChoices")).click(); 
```

实际上，我通过 firebug 获得了 css 路径，而不是缩短了它。

```
//this is what I recieved
html.ext-strict body.ext-gecko div#x-auto-0.x-component div#x-auto-1.x-component div#x-auto-3..myBlank div#choicePanel1.myBlank div.x-box-inner div#text3.myChoices  //text3 is the id of the element I wanted to select 
```

我不知道你是否能弄清楚你需要的 xpaths 和 css 选择器，但我相信我确实经历过你所做的。

# assembly - 显示不同指令的反汇编程序

> ID：11341484
> 
> 赞同：3
> 
> 时间：2012-07-05T09:28:28.043
> 
> 标签：assembly, operating-system, reverse-engineering, decompiling

只是在阅读有关用于将二进制文件识别为汇编指令的不同算法反汇编程序的信息。在不同的反汇编程序中打开一个程序，一些将程序的特定部分显示为代码，而另一些将相同的部分显示为数据。所以我的问题是，如果反汇编程序混淆了操作码是指令还是数据，处理器如何确切知道如何处理该操作码？

我希望我的问题很清楚..提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:51:13.727

> 只是在阅读有关用于将二进制文件识别为汇编指令的不同算法反汇编程序的信息。

我假设你的意思是线性扫描与递归遍历 - 这里有一个有趣的[页面](http://static.usenix.org/event/usenix03/tech/full_papers/prasad/prasad_html/node5.html)。

> 所以我的问题是，如果反汇编程序混淆了操作码是指令还是数据，处理器如何确切知道如何处理该操作码？

所以，问题的核心——他们不关心，也不关心。CPU 对数据与指令一无所知。这就是为什么您可以通过替换包含操作码的字符串来从缓冲区溢出执行堆栈上的输入。这可以通过将页面标记为不执行来解决，在这种情况下，如果指令指针（EIP/RIP）最终到达那里，处理器只会引发错误（基本上是在操作系统上抱怨）。

反汇编的挑战在于，您试图找出代码的结构，除了实际运行它之外的所有事情。解决这个问题的唯一方法是生成一个 x86 模拟器并使用它。

这被称为[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T09:52:46.113

处理器不知道它被要求执行的是代码还是数据。它可以是其中之一，也可以同时是两者。CPU 将尝试执行给定的任何内容。

如果执行失败，它会生成诸如“遇到无效指令”或“指令引用的内存不可访问”或“除以零”或操作系统将（希望）处理的“权限不足”等事件. 如果它知道如何解决问题（虚拟内存通常基于此机制），或者让应用程序处理此事件或终止应用程序，它将解决问题。

有不同的反汇编程序。有些是“愚蠢的”反汇编程序，因为他们不会尝试对可执行文件格式产生太多或任何意义，他们只会尝试对给出的任何内容进行反汇编。其他人将反汇编标记为代码的文件部分，他们将从入口点位置开始反汇编（每个可执行文件都有一个应该由 OS/CPU 开始执行的位置）并使用各种启发式方法进行合理的反汇编。

然而，拆卸几乎不可能完美地完成。正确反汇编的主要问题是反汇编程序不知道一段代码会做什么以及不会做什么。

例如，可以编写代码以便计算要跳转或调用的地址。反汇编器将无法计算这样的地址，因为它不执行、模拟或解释代码。因此反汇编程序可能无法确定下一个要反汇编的位置。

还有一些具有可变长度指令的 CPU。这使得代码可以跳转到指令的中间。反汇编程序应该如何反汇编那种代码？

另一种令人讨厌的做法是使用代码进行操作。代码可以在执行时即时更改自身。代码还可以生成更多代码。代码也可以存储为数据。你如何分解所有这些？

因此，许多反汇编程序仍然非常愚蠢也就不足为奇了。他们只是无法与编写各种曲折程序的程序员的脑力竞争。

**编辑**：

此外，由于同样的可变长度指令问题，从稍微不同的位置开始反汇编相同的代码可能会产生不同的指令。

例子：

考虑 x86 处理器在 32 位模式下的这个字节序列：66h,0B8h,90h,90h,90h,90h。

如果你从第一个字节开始反汇编它，你会得到：

```
mov ax,9090h
nop
nop 
```

如果您在下一个字节开始反汇编，您将获得：

```
mov eax,90909090h 
```

如果您跳过另一个字节，您将获得：

```
nop
nop
nop
nop 
```

# x86-64 - 如何直接gas使用指定编码形式的指令，例如MOV？

> ID：11341486
> 
> 赞同：1
> 
> 时间：2012-07-05T09:28:30.223
> 
> 标签：x86-64, gnu-assembler

MOV 有两种形式将 imm 移动到 r64：

```
| Opcode         | Instruction     | Op/En | 64-Bit Mode | Compat/Leg Mode | Description                                   |
| REX.W + B8+ rd | MOV r64, imm64  | E     | Valid       | N.E.            | Move imm64 to r64\.                            |
| REX.W + C7 /0  | MOV r/m64,imm32 | F     | Valid       | N.E.            | Move imm32 sign extended to 64-bits to r/m64\. | 
```

在下面的示例中，第 6 行（第 5,7 行不是那么重要，我们忽略它。）使用第二种形式。所以问题是，如果我们用'-Ttext=' 链接目标文件来指定一个适合32 位的地址，例如'ld mo -Ttext=0x1234' 它工作得很好。但是如果我们使用一个超过 32 位的地址，例如 'ld mo -Ttext=0x1234567887'，它就不起作用。

如果第 6 行以第一种形式编码，我认为上面的两个链接命令都可以正常工作。

**那么如何引导气体以第一种形式对第 6 行进行编码呢？**

```
 1
 2  .code64
 3  .global _start
 4  _start:
 5      movq $1, %rdi
 6      movq $str, %rsi
 7      movq $len, %rdx
 8      movl $1, %eax
 9      syscall
10      movq $0, %rdi
11      movl $60, %eax
12      syscall
13  str: .asciz "hello write\n"
14  .equ len, . - str

# as m.s -o m.o
# ld m.o -Ttext=0x1234

0000000000001234 <_start>:
1234:       48 c7 c7 01 00 00 00    mov    $0x1,%rdi
123b:       48 c7 c6 5e 12 00 00    mov    $0x125e,%rsi
1242:       48 c7 c2 0d 00 00 00    mov    $0xd,%rdx
1249:       b8 01 00 00 00          mov    $0x1,%eax
124e:       0f 05                   syscall
1250:       48 c7 c7 00 00 00 00    mov    $0x0,%rdi
1257:       b8 3c 00 00 00          mov    $0x3c,%eax
125c:       0f 05                   syscall

# ld m.o -Ttext=0x1234567887
m.o: In function `_start':
(.text+0xa): relocation truncated to fit: R_X86_64_32S against `.text' 
```

***编辑：***

我知道了。我写了一个类似的函数

```
long aaa(void)
{
    return 0x1234567890l;
} 
```

和 gcc 生成以下 asm 代码

```
movabsq $78187493520, %rax 
```

返回值。我的示例现在以这种方式工作。

但我在“ingo gas”中没有找到任何关于“movabsq”的内容。有人告诉我在哪里可以得到帮助？谢谢！

# android - android 4.0.3 解析 XML：意外令牌（位置：TEXT @1:2

> ID：11341488
> 
> 赞同：4
> 
> 时间：2012-07-05T09:28:34.157
> 
> 标签：android, xml-parsing

我尝试解析 XML 并得到以下错误，问题可能是什么？

> I/System.out(8058)：错误的 XML 文件结构：意外的标记（位置：TEXT @1:2 in java.io.StringReader@4113db88）

这就是我解析的方法

```
public final static Document XMLfromString(String xml){

    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        System.out.println("XML parse error: " + e.getMessage());
        return null;
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        System.out.println("I/O exeption: " + e.getMessage());
        return null;
    }

    return doc;

} 
```

这就是我尝试解析的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<app>
    <Date Value="02.07.2012">
     </Date>
</app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:58:58.480

默认情况下，您的 java 字符串采用 UTF-16 编码。要使用字符串创建文档，请尝试以下操作：

```
Document doc = db.parse(new ByteArrayInputStream(xmlData.getBytes())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:34:06.293

这似乎不喜欢问号。您能否确保使用正确的编码*保存XML 文件？*(UTF-8)

# sql - 如何检查字符串是否包含数字

> ID：11341492
> 
> 赞同：9
> 
> 时间：2012-07-05T09:28:54.560
> 
> 标签：sql, oracle

我需要检查一个字符串是否包含一个数字。任何数字。不是字符串是否是数字，而是它是否包含一个数字。

例子：

'测试' = 没有数字。

'test2' = 包含数字。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-05T09:34:30.083

使用[正则表达式](http://psoug.org/reference/regexp.html)：

```
SELECT *
FROM test
WHERE REGEXP_LIKE(testcol, '[[:digit:]]'); 
```

不使用正则表达式：

```
SELECT *
FROM test
WHERE testcol LIKE '%0%'
    OR testcol LIKE '%1%'
    OR testcol LIKE '%2%'
    OR testcol LIKE '%3%'
    OR testcol LIKE '%4%'
    OR testcol LIKE '%5%'
    OR testcol LIKE '%6%'
    OR testcol LIKE '%7%'
    OR testcol LIKE '%8%'
    OR testcol LIKE '%9%' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-25T01:10:39.657

这是我用来检测字符串是否包含数字的技术：

```
select LAST_NAME, 'contains a number'
  FROM names
 where translate(LAST_NAME, '0123456789', '') <> LAST_NAME 
```

这通过将数字转换为空字符串来工作。如果字符串保持不变，则它不可能包含数字。

此技术也可用于测试字符串是否全为数字

```
select TEL_NUMBER, 'is all numbers'
  FROM names
 where trim(translate(TEL_NUMBER, '-0123456789', '')) = '' 
```

对于电话号码，我包括一个破折号，因为电话号码通常包含破折号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:34:05.203

我会尝试使用正则表达式。像：

```
select regexp_instr('%[0-9]%',@str1) from table_name; 
```

干杯——乔克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-29T19:07:32.557

由于 SQL 函数有限，我有时会在 NetSuite 保存的搜索中使用 REGEXP_INSTR。如果没有找到数字，或者在字符串中找到第一个数字的起始位置，则返回零：

```
REGEXP_INSTR(my_var, '[[:digit:]]') 
```

此示例返回零：

```
REGEXP_INSTR('test', '[[:digit:]]') 
```

此示例返回一个大于零的数字，因为它找到了一个数字：

```
REGEXP_INSTR('test2', '[[:digit:]]') 
```

# java - 如何正确设置 permgen 大小？

> ID：11341494
> 
> 赞同：63
> 
> 时间：2012-07-05T09:29:03.660
> 
> 标签：java, tomcat, grails, jvm, permgen

我有这个带有 tomcat、java 和 grails 的 VM。我一直收到 permgen 错误，所以我环顾四周，找到了解决方案：

```
set JAVA_OPTS="-Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m" 
```

我使用 SSH 访问 vm 并输入上面的参数。我想这会解决问题。问题是，我想确保我做得正确。所以我再次搜索了如何检查当前的 permSize，这就是我得到的解决方案：

```
jinfo -flag MaxPermSize 6444 
```

6444 是 pid，作为回应，我得到了这个。

```
-XX:MaxPermSize=85983232 
```

问题：maxPermSize 的值是否以字节为单位？因为，如果是，那将意味着 java_opts 命令不起作用。我期望得到 512m 但 85983232 字节 = 82 mb .. 还是我看错了..？有人可以启发我吗？丁：

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-05T09:46:05.120

您必须更改Tomcat Catalina 启动文件中定义的**CATALINA_OPTS选项中的值。**要增加`PermGen`内存改变`MaxPermSize`变量的值，否则改变变量的值`Xmx` 。

**Linux & Mac OS：**打开或创建`setenv.sh`放置在“bin”目录中的文件。您必须将更改应用于此行：

```
export CATALINA_OPTS="$CATALINA_OPTS -server -Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m" 
```

**视窗：**

打开或创建`setenv.bat`放置在“bin”目录中的文件：

```
set CATALINA_OPTS=-server -Xms256m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-15T02:04:43.540

不要把环境配置放在catalina.bat/catalina.sh中。相反，您应该在 CATALINA_BASE\bin\setenv.bat 中创建一个新文件，以将您的自定义设置与 tomcat 安装分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:45:05.647

所以你在做关于“-XX:MaxPermSize=512m”的正确事情：它确实是正确的语法。您可以尝试将这些选项直接设置为 Catalyna 服务器文件，以便在服务器启动时使用它们。

也许这篇文章会对你有所帮助！

[如何确保 Tomcat6 在 Windows 上读取 CATALINA_OPTS？](https://stackoverflow.com/questions/3583757/how-to-make-sure-that-tomcat6-reads-catalina-opts-on-windows)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-23T15:38:40.353

从 java 8 中完全删除 +
从 java 7 中部分删除（例如，interned Strings）
[源](https://dzone.com/articles/java-8-permgen-metaspace)

# actionscript-3 - 如果测试失败，是否停止 FlexUnit 测试运行？

> ID：11341495
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:29:31.567
> 
> 标签：actionscript-3, apache-flex, actionscript, integration-testing, flexunit

我使用 FlexUnit 4.1 和 Adob​​e 的 TestRunnerBase 来运行一套集成测试，以验证 3 层 BlazeDS/Java EE/MySQL 服务器的完整性。

为了在运行这些测试时绕过 Apache Shiro 强制执行的安全检查，我配置了两个单独的测试运行：一个以 root 身份登录，一个执行实际的集成测试。

由于 BlazeDS 处理重复会话的方式（这是另一个问题的问题，或者更确切地说，它已经存在），有时登录机制会失败 - 在这种情况下，我希望 TestRunner 暂停所有进一步的活动。

我已经到处寻找一些方法来配置 FlexUnitCore 以在测试失败时停止，但无济于事。此外，似乎只有 TEST_START 和 TEST_COMPLETE 的事件，而不是 TEST_FAIL 的事件。

是否有其他方法可以找出测试是否失败，以阻止跑步者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:29:32.347

对我来说是第一次——我在写我的问题时偶然发现了我的问题的解决方案：有一个[IRunListener](http://docs.flexunit.org/asdocs/org/flexunit/runner/notification/IRunListener.html)接口可以用来对 TestRunner 发送的各种信息做出反应。然后我们简单地使用[FlexUnitCore#addListener()](http://docs.flexunit.org/asdocs/org/flexunit/runner/FlexUnitCore.html#addListener%28%29)来初始化它，就像我们使用 Adob​​e 提供的 UIListener、TraceListener、CIListener 等一样。

# c++ - 根据另一个向量对点向量进行排序

> ID：11341498
> 
> 赞同：9
> 
> 时间：2012-07-05T09:29:33.250
> 
> 标签：c++, sorting, c++11, vector, stl-algorithm

我正在开发一个 C++ 应用程序。

我有 2 个点向量

```
vector<Point2f> vectorAll;
vector<Point2f> vectorSpecial; 
```

Point2f 定义`typedef Point_<float> Point2f;`

vectorAll 有 1000 分，而 vectorSpecial 有 10 分。

**第一步：**

我需要根据它们在vectorAll中的顺序对vectorSpecial中的点进行排序。所以是这样的：

```
For each Point in vectorSpecial
    Get The Order Of that point in the vectorAll
    Insert it in the correct order in a new vector 
```

我可以做一个双循环并保存索引。然后根据它们的索引对点进行排序。但是，当我们有很多点时（例如，vectorAll 中的 10000 个点和 vectorSpecial 中的 1000 个点，所以这是一千万次迭代），这种方法花费的时间太长了

有什么更好的方法来做到这一点？

**第二步：**

vectorSpecial 中的某些点可能在 vectorAll 中不可用。我需要采取最接近它的点（通过使用通常的距离公式`sqrt((x1-x2)^2 + (y1-y2)^2)`）

这也可以在循环时完成，但如果有人对更好的方法有任何建议，我将不胜感激。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:31:44.250

您可以将`std::sort`on`vectorAll`与`Compare`旨在考虑以下内容的功能一起使用`vectorSpecial`：

```
struct myCompareStruct
{
    std::vector<Point2f> all;
    std::vector<Point2f> special;
    myCompareStruct(const std::vector<Point2f>& a, const std::vector<Point2f>& s)
        : all(a), special(s) 
    {
    }
    bool operator() (const Point2f& i, const Point2f& j) 
    { 
        //whatever the logic is
    }
};

std::vector<Point2f> all;
std::vector<Point2f> special;
//fill your vectors
myCompareStruct compareObject(all,special);

std::sort(special.begin(),special.end(),compareObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:11:12.933

对于您的**First Step**，您可以使用 C++11 lambda 来发挥出色的效果（special.size() = K 和 all.size() = N）

```
#include <algorithm>   // std::sort, std::transform, std::find, std::min_element
#include <iterator>    // std::distance

std::vector<int> indices;
indices.reserve(special.size());

// locate exact index in all for every element of special. Complexity = O(K * N)
std::transform(special.begin(), special.end(), indices.begin(), [&all](Point2f const& s){                   
     return std::distance(
         all.begin(), 
         std::find(all.begin(), all.end(), s)
     ); 
});

// sort special based on index comparison. Complexity = O(K * log(K))
std::sort(special.begin(), special.end(), [&indices](Point2f const& r, Point2f const& s){
     auto i = std::distance(special.begin(), r);
     auto j = std::distance(special.begin(), s);
     return indices[i] < indices[j];
}); 
```

**解释**：首先，对于 中的每个点`special`，计算 中`all`特殊元素的起点和位置之间的距离`all`，并将结果存储到`indices`向量中。其次，通过比较向量`special`中每对元素的对应元素来对所有元素进行排序。`indices`

对于您的**第二步**，您只需更改计算索引的方式

```
// locate closest element in all for every element of special. Complexity = O(K * N)
std::transform(special.begin(), special.end(), indices.begin(), [&all](Point2f const& s){                   
     return std::distance(
         all.begin(), 
         std::min_element(all.begin(), all.end(), [&s](Point2f const& a){
              return // Euclidean 2D-distance between a and s    
         });
     ); 
}); 
```

**说明**：与您的第一步相比，唯一的变化是，对于您中的每个元素，`special`您都可以找到`all`最接近它的元素，您可以通过计算问题中建议的最小欧几里得距离来做到这一点。

**更新**：您可以通过首先将每个元素的索引存储`all`到`std::unordered_map`哈希表中来进行空间/时间权衡，然后`special`根据对该哈希表的查找进行元素之间的比较。这将第一步的时间复杂度降低到 O(N)（假设 K < N），但为哈希表增加了 O(N) 的存储空间。

# objective-c - iPhone 中使用 Mapkit 和 Google 地图的 GPS 路由（最短路径）

> ID：11341499
> 
> 赞同：2
> 
> 时间：2012-07-05T09:29:40.770
> 
> 标签：objective-c, google-maps, routing, mapkit, shortest-path

我正在 Xcode 4.3.3、iOS 5 上开发并使用 Mapkit 库。该应用程序应该在谷歌地图上显示当前位置，获取目的地地址，最后绘制这两点之间的最短路径。

我使用本教程来实现应用程序，我现在有当前位置：http: [//blog.objectgraph.com/index.php/2009/04/02/iphone-sdk-30-playing-with-map-kit/](http://blog.objectgraph.com/index.php/2009/04/02/iphone-sdk-30-playing-with-map-kit/)

我寻找路由，但我没有找到任何资源。请指导我如何绘制当前位置和目的地之间的最短路径。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T08:27:34.230

你可以试试这个只适用于ios 6。

```
 Class itemClass = [MKMapItem class];
        if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

            CLGeocoder *geocoder = [[CLGeocoder alloc] init];
            CLLocation *newLocation = [[CLLocation alloc]initWithLatitude:getLatitude
                                                                longitude:getLongitude];

            [geocoder reverseGeocodeLocation:newLocation
                           completionHandler:^(NSArray *placemarks, NSError *error) {

                               MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

                               MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

                               MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

                               NSArray *mapItems = @[mapItem, mapItem2];

                               NSDictionary *options = @{
                           MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
                           MKLaunchOptionsMapTypeKey:
                               [NSNumber numberWithInteger:MKMapTypeStandard],
                           MKLaunchOptionsShowsTrafficKey:@YES
                               };

                               [MKMapItem openMapsWithItems:mapItems launchOptions:options];

                           }         ];
        }
        else
        {
            UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to Get Your Location"delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [errorAlert show];

        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:26:20.427

你谷歌地图套件和路线？

你会发现这个： http: [//inlight.com.au/posts/mapkit](http://inlight.com.au/posts/mapkit)，它解释了如何使用谷歌地图并解码响应以提取点以获取路线。

还有一个商业工具包： http: [//mtdirectionsk.it/](http://mtdirectionsk.it/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:34:09.993

```
Below ans work for all ios:
   NSString *deviceVersion   = [[UIDevice currentDevice] systemVersion];
    NSLog(@"My Device version is :%@ ",deviceVersion);

    //*********  For ios 6 supporting devices  *********
    if ([deviceVersion isEqualToString:@"6.0"])
    {

        Class itemClass = [MKMapItem class];
        if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

            CLGeocoder *geocoder = [[CLGeocoder alloc] init];
            CLLocation *newLocation = [[CLLocation alloc]initWithLatitude:getLatitude
                                                                longitude:getLongitude];

            [geocoder reverseGeocodeLocation:newLocation
                           completionHandler:^(NSArray *placemarks, NSError *error) {

                               MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

                               MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

                               MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

                               NSArray *mapItems = @[mapItem, mapItem2];

                               NSDictionary *options = @{
                           MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
                           MKLaunchOptionsMapTypeKey:
                               [NSNumber numberWithInteger:MKMapTypeStandard],
                           MKLaunchOptionsShowsTrafficKey:@YES
                               };

                               [MKMapItem openMapsWithItems:mapItems launchOptions:options];

                           }         ];
        }
        else
        {
            UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to Get Your Location"delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [errorAlert show];

        }
    }
    //*********  For other ios supporting devices  *********
    else {

        MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
        region.center.latitude = getLatitude;
        region.center.longitude = getLongitude;

        MKCoordinateRegion currentRegion = { {0.0, 0.0 }, { 0.0, 0.0 } };
        currentRegion.center.latitude = currentLatitude;
        currentRegion.center.longitude = currentLongitude;

        region.span.longitudeDelta = 4.0f;
        region.span.latitudeDelta = 4.0f;
        currentRegion.span.longitudeDelta = 4.0f;
        currentRegion.span.latitudeDelta = 4.0f;

        CLLocationCoordinate2D start = { currentRegion.center.latitude, currentRegion.center.longitude };
        CLLocationCoordinate2D destination = { region.center.latitude, region.center.longitude };

        NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f",start.latitude, start.longitude, destination.latitude, destination.longitude];

        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]];

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:07:59.300

iOS MapKit 不提供应用程序即服务的路由信息​​。相反，您现在的选择是从第三方机制获取路线信息，或者自己构建路线（如果您没有基础街道数据，这基本上是不可能的）。

如果您需要在自己的应用程序中提供路线信息，您可能会将[CloudMade](http://developers.cloudmade.com/projects/show/iphone-sdk)视为替代地图系统，或者如果您想利用 Apple 的 Map 进行导航，则可以考虑仅调用 Maps 以路由到某个位置。

如果要调用 Map App 进行导航，则基本上需要打开一个带有源和目标位置的 URL。这是一个例子：

```
 CLLocationManager *manager = [[[CLLocationManager alloc] init] autorelease];
    CLLocationCoordinate2D currentLocation = [manager location].coordinate;
    NSString *from = [NSString stringWithFormat: @"%f,%f", 
                      currentLocation.latitude, currentLocation.longitude];
    // used to be able to (3.2 iPad) "Current+Location", now we have to send: lat,long
    NSString *encodedAddress = [address stringByAddingPercentEscapesUsingEncoding:
                                 NSUTF8StringEncoding];
    NSString *url = [NSString stringWithFormat:
                     @"http://maps.google.com/maps?saddr=%@&daddr=%@", from, encodedAddress];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

# javascript - 如何在 iPhone PhoneGap jQuery Mobile 中将文件附加到邮件

> ID：11341503
> 
> 赞同：2
> 
> 时间：2012-07-05T09:30:00.900
> 
> 标签：javascript, iphone, jquery-mobile, cordova

我已经**使用 jQuery Mobile 在 Phone Gap 中实现了一个 iPhone 应用程序。**

作为我的应用程序的一部分，我需要**通过单击“邮件”按钮发送电子邮件**

为此我添加了 **`EmailComposer plug in.`**

在 www 文件夹中添加了 EmailComposer.js 和

在应用程序的 Resources 文件夹中添加了 EmailComposer.H 和 .M 文件。

我实现的代码如下

```
<script type="text/javascript" src="EmailComposer.js"></script>
<script type="text/javascript" charset="utf-8"> 

      function SendEmail() { 

           alert('XXXXX');

        window.plugins.emailComposer.showEmailComposer("SubjectXXX","PlainTextBody---", 
                                 "recipientName,recipientName", "ccRecipient", "bccRecipient",false); 
        } 
  </script> 

<a href="#" onclick="SendEmail(); return false;"  data-icon="arrow-r" data-iconpos="left" class="ui-btn-left" >Send</a> 
```

邮件编辑器视图显示一切正常。

**现在我需要将文件附加到这封电子邮件如何附加文件**

谁能给我指路

提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T09:13:25.267

我是这样做的：

```
var attachPath; 
                var attachFile= new Array();
                    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
                    fileSystem.root.getDirectory("MyAppFolder", {
                        create: true
                    }, 
        function(directory) {
            console.log("Final 63" + directory.fullPath);
            attachPaths = directory.fullPath;
            var attachPath=attachPaths.slice(7,attachPaths.length);
            var directoryReader = directory.createReader();
            directoryReader.readEntries(function(entries) {
                var i;
                for (i=0; i<entries.length; i++) {
                    console.log(entries[i].name);
attachFile[i] =attachPath + "/" + entries[i].name;
                            }
                            console.log(attachFile);
                        }, 
                        function (error) {
                            alert(error.code);
                        });

                    });
                }, function(error) {
                    alert("can't even get the file system: " + error.code);
                }); 
```

现在将 attachFile 传递给 mailcomposer

```
window.plugins.emailComposer.showEmailComposerWithCallback(null,
                    "Get an Estimate",
                     "Body",
                ["mail_id"],
                    [],
                    [],
                    true,
                    attachFile
                    ); 
```

希望这对你有帮助！！！！

# php - 用PHP编写二进制文件

> ID：11341506
> 
> 赞同：3
> 
> 时间：2012-07-05T09:30:04.807
> 
> 标签：php, file-io, io, binaryfiles

我编写了一个 PHP 文件，它将在服务器中保存一个 JPEG 文件，部分代码如下所示：

```
 //create folder if folder not exist
if (!is_dir($save_path)){

    $old = umask(0);
    $flag = @mkdir($save_path,0777);
    umask($old); 

if(isset($flag)){
    $string = 'Folder Create Success!'."\n";
}else{
    $string= 'Folder Create Fail!'."\n";
}
echo $string;

}else{

   echo "Folder exist!!!!";

}

//write the content to the server
$base=$_REQUEST['image'];
$binary=base64_decode($base);
header('Content-Type: image/jpg; charset=utf-8');

if(!$file = fopen($path, 'wb')){

    echo 'Image upload Fail!'."\n";
    return;
}
else
{

    fwrite($file, $binary);
    fclose($file);

} 
```

问题是当我运行代码时，如果文件夹不存在，它只会创建文件夹，但内容无法保存在文件夹中。错误信息是：

[2012 年 7 月 5 日星期四 16:59:06] [错误] [客户端 10.95.61.220] PHP 警告：fopen(/mnt/csis/upload/newphoto/others/12346_test/12346_test_2012-07-05_others_abc.jpg)：无法打开流：第 57 行 /var/www/html/upload_image.php 中的权限被拒绝

但是，如果我再次运行代码，由于该文件夹是过去创建的，它可以正常工作。内容可以保存在文件夹中......

我有什么不对吗？我试图在网上找到答案，但仍然无法解决问题。

任何人都可以提供帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:34:11.177

I would try changing the creation of the folder to use the [recursive flag](http://php.net/manual/en/function.mkdir.php):

```
$flag = @mkdir($save_path . "/" . $file,0777,true); 
```

# android - Android：在后台运行应用程序时跟踪总击键？

> ID：11341507
> 
> 赞同：1
> 
> 时间：2012-07-05T09:30:06.717
> 
> 标签：android, input, android-keypad, keystrokes

当我的应用程序在后台运行时，有没有办法跟踪设备中的总击键？我试图找到任何可行的解决方案，但没有运气。

**更新：** 背景意味着我的应用程序没有向用户显示。现在它可能正在通过服务或使用广播接收器或任何其他方法运行，但它对用户不可见。它只需要检测击键而不向用户显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:34:39.600

幸运的是，不，出于明显的隐私和安全原因。

# python - 可以在单个视图中使用动态数量的formset并传递oa单个模板吗

> ID：11341514
> 
> 赞同：0
> 
> 时间：2012-07-05T09:30:29.907
> 
> 标签：python, django, view, formset

我有以下视图、模板和表单，我通过这些视图、模板和表单来实现表单集。我打算在单个视图/模板中实现多个表单集，但我的表单集数量是基于用户输入的动态的。如何在此代码中拥有多个动态数量的表单集？我可以用字典元素来做到这一点，即通过创建一个表单集字典吗？

我的看法如下：

```
def show (request):

 b = request.session["s1"] # count of no of period ids
 c = request.session["s2"] # account number inserted by user
 d = request.session["s3"] # year inserted by customer
 a = account_period.objects.filter(year=d).values('id')
 e = account_period.objects.filter(year=d).values('month')
 f = account_period.objects.filter(id = a).values('year') 
 butt = formset_factory(bu, extra=b)
 if request.method == 'POST'
  formset = butt(request.POST)
  if formset.is_valid():

    z = account_tab.objects.get(account_number=c)
    pr = date.today()
    i=0
    for form in formset.forms:
      x = form.cleaned_data['value']
      y = account_period.objects.get(id=a[i:(i+1)])
      try:
             uip = budget.objects.get(account_no = c,account_period = a[i:(i+1)])
             if uip.budget_amount != x
               uip.budget_amount = x
               uip.save()

      except budget.DoesNotExist:
             w = budget(account_no = z, account_period = y, budget_amount = x, created_by_login = 'me')
             w.save()
      i=i+1
    pass
    return HttpResponse('thanks') 
```

形式是

```
class bu(forms.Form):
   value = forms.CharField() 
```

模板是

```
<html>
<head>
<title>BUDGET</title>
</head>
<body>
<p>BUDGET MANAGEMENTS</p>
<p>Your Account Number is : {{ account_number }}.</p> <p>You Chose {{ period }} {{month}} as period<p>   
{% if form.errors %}
<p style="color: red;">
    Please correct the error{{ form.errors|pluralize }} below.
</p>
{% endif %} 
<form action="." method="post">{% csrf_token %}
{{ formset.management_form }}
<table>
{% for form in formset.forms %}
{{ form }}
{% endfor %}
</table>    
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

#

@rohan

我的 GET 方法返回有许多变量必须传递到模板中，所以我尝试通过以下两种方式传递字典 formsetlist（在应用你建议的更改之后）

1)

```
formset = butt( return render_to_response('budgetfinalform.html', {'account_number': c,'period':d,'month':e,'year':f,'formset': formset},context_instance=RequestContext(request)) 
```

2)

```
ctx ={'formsetlist': formset} 

 formset = butt( return render_to_response('budgetfinalform.html', {'account_number': c,'period':d,'month':e,'year':f,ctx,context_instance=RequestContext(request)) 
```

但获得“unboundlocalerror：分配前引用的局部变量'formset'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:02:53.390

我会做类似的事情：

```
def show (request):
  #initial view processing
  # fomset_count taken as parameter or user input
  formsetlist = []
  #create formset list
  for i in range(0, formset_count):
    formsetlist.append(formset_factory(bu, extra=b))
  # other view related code

 # for GET method    
 ctx = { 'formsetlist': formset }
 return render_to_response('your_template_name', ctx,
                          context_instance = RequestContext(request)
                          ) 
```

在模板中：

```
<form action="." method="post">{% csrf_token %}
 {% for formset in formsetlist %}
    {{ formset.management_form }}
    <table>
    {% for form in formset.forms %}
    {{ form }}
    {% endfor %}
    </table>    
{%endfor%}
<input type="submit" value="Submit"> 
```

# php - 包含文件 PHP 中的全局变量和函数

> ID：11341520
> 
> 赞同：0
> 
> 时间：2012-07-05T09:30:48.970
> 
> 标签：php, function, global-variables

我正在尝试调整图像的大小，然后将其放入 FancyBox。我已经在另一个页面中做到了，我将它模仿到另一个页面，并且这些功能不起作用。

这是无效页面中的代码（它有 2 个宽度和高度变量，resizeImage 函数通过声明“global ;”来获取它们，但它不会工作）。

*注意 - 两个页面：一个正在工作的页面和一个不在同一个文件夹中的页面，因此所有路径都相同。

```
include("Include/FunctionsPHP.php"); //Includes the ResizeImage functions
$outputHeight;
$outputWidth; 

$index=$row["nIndex"];
$picture="products/pictures/{$row["sPicture"]}";

ResizeImage(450,400,$picture); 
```

这是包含文件：

```
function ResizeImage($maxWidth,$maxHeight,$picture)
{
    GLOBAL $outputWidth;
    GLOBAL $outputHeight;
    $size = getimagesize($picture);

    if ($size) {
        $imageWidth  = $size[0];
        $imageHeight = $size[1];
        $wRatio = $imageWidth / $maxWidth;
        $hRatio = $imageHeight / $maxHeight;
        $maxRatio = max($wRatio, $hRatio);
        $outputWidth = $imageWidth / $maxRatio;
        $outputHeight = $imageHeight / $maxRatio;
        echo $outputHeight."\t";
        echo $outputWidth;
    }
}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:36:23.577

将这两个变量作为参数添加到您的函数中。

# javascript - Maps API v3 - Chrome 和 Opera 不显示标记

> ID：11341524
> 
> 赞同：0
> 
> 时间：2012-07-05T09:31:06.840
> 
> 标签：javascript, jquery, google-maps-api-3

标记在 Firefox 中正确显示，而不是在 Chrome 或 Opera 中。我认为我有一些范围问题，因为`db_locations`数组“有时”会失去它的价值，并且是空的`buildMap()`。我说“有时”是因为当我在第一页刷新时添加`alert(db_locations)`“`BuildMap()`倾向于”显示实际值。

感谢任何帮助。

```
var db_locations = new Array();
$.ajax({
    type: "GET",
    url: "markers_xml.php",
    dataType: "xml",
    success: function(xml) {
...
var inside = new Array(val1,val2,val3 etc);
db_locations[i]=inside;
...
});

function buildMap() { /* this is the init function */
...
setMarkers(map, db_locations);
...
}

function setMarkers(map, locations) {
// markers loop
}

window.onload = buildMap; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:35:20.927

AJAX 请求很可能没有按时返回。将 AJAX 调用封装在一个函数中，在 Ajax 成功函数内调用 buildMap，在窗口加载时调用 AJAX 请求封装函数。

# internet-explorer-8 - 自动完成结果位置 - IE8 问题

> ID：11341532
> 
> 赞同：0
> 
> 时间：2012-07-05T09:32:03.127
> 
> 标签：internet-explorer-8, autocomplete, ajaxtags

我们使用 java **ajaxtags**作为库来填充文本框的**自动完成**值。它在大多数浏览器（Firefox、ie6、ie7 等）中都能完美运行。

但是**在 IE8**的情况下，**自动完成结果**的位置**不会与**实际的文本框链接，而是**向 down 移动**。它只发生**在 IE8 中**。

请提出解决方案来解决此问题并能够以正确的方式显示自动完成结果。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:48:57.820

自己找到了**解决方案**...

在**control.js**文件中，我添加了以下条件以使其正常工作

```
if(!update.style.position || update.style.position=='absolute') {
   update.style.position = 'absolute'; 
```

> ```
> // Adding the following condtion will fix the issue with IE8
>   if(navigator.appVersion.indexOf('MSIE')>0) {
>      update.style.display = 'inline';
>   } 
> ```

```
 Position.clone(element, update, {setHeight: false, offsetTop: element.offsetHeight});
} 
```

# excel - OLEDB中IMEX的默认值是多少？

> ID：11341535
> 
> 赞同：5
> 
> 时间：2012-07-05T09:32:10.420
> 
> 标签：excel, connection-string, oledb

```
string strConn = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=" + filename + ";Extended Properties=\"Excel 12.0 Xml;HDR=Yes;IMEX=1\";"; 
```

我在谷歌上搜索，并没有得到任何结果。我认为默认值为 2，但我不确定。

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-17T19:53:17.523

虽然我没有找到有关默认值的信息，但 @Bao 的评论有助于解释 IMEX 设置。根据[Microsoft 知识库文章 194124](http://support.microsoft.com/kb/194124/EN-US)，IMEX 参数代表**IM**端口**EX**端口模式。这是文章的引述：

> IMEX 的可能设置是：
> 
> > ```
> >  0 is Export mode
> >  1 is Import mode
> >  2 is Linked mode (full update capabilities) 
> > ```

简单来说，您可以使用 IMEX=0 表示写入，IMEX=1 表示只读，IMEX=2 表示修改/更新（读取、更改、保存更改）。

我注意到这个问题被标记为 Excel，但 Microsoft.ACE.OLEDB 提供程序允许连接到 Access 数据库引擎支持的多种类型的数据源，包括 Access (*.accdb)、Excel (*.xlsx)、SharePoint Lists、等等。 IMEX 参数将以类似的方式影响这些其他类型的数据源。

* * *

**2017 年 8 月更新。关于 IMEX扩展属性**的其他评论，如另一个文档[ADO.NET 连接字符串语法](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/connection-string-syntax)(docs.microsoft.com) 在标题*“连接到 Excel”*下所述：

> *在 [example] 连接字符串中，**Extended Properties**关键字设置**特定于 Excel**的属性。“HDR=是的；” 表示第一行包含列名，而不是数据，并且**“IMEX=1;” 告诉驱动程序始终将“混合”数据列读取为 text**。*

我相信之前的知识库文章仍然适用，并且 IMEX 设置更普遍地应用为导出/导入/链接到数据源连接字符串中的其他非 Excel 数据源。另请注意，知识库文章指出可以通过注册表更改“ImportMixedTypes”设置 - 这使我相信第二篇文章应该大部分被忽略，而支持知识库来解释 IMEX 设置。Access Connectivity Engine (ACE) Excel Driver @ [Windows Registry Settings for External Data Sources - Initializing the Microsoft Excel Driver](https://msdn.microsoft.com/en-us/library/office/ff844939.aspx)记录了相关的注册表设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T19:43:09.260

根据下面的文章，IMEX 值 0 和 2 做同样的事情；他们使用 ImportMixedTypes=MajorityType。如果您未在扩展属性中指定 IMEX=1，则这是默认设置。

所以默认的 IMEX 行为是 MajorityType，这可以通过在连接字符串中使用 IMEX=1 以及注册表设置 ImportMixedTypes=Text 来覆盖。

[http://www.instantpages.ltd.uk/ADODB_WP.htm](http://www.instantpages.ltd.uk/ADODB_WP.htm)

# javascript - Mongoose 以级联方式填充嵌入式文档

> ID：11341536
> 
> 赞同：1
> 
> 时间：2012-07-05T09:32:15.710
> 
> 标签：javascript, nosql, mongoose

我正在模拟我的微博应用程序用户之间的“朋友”关系。它看起来像这样：

*在 user.js 文件中*

```
var db = require('mongoose')
, Schema = db.Schema
, ObjectId=Schema.ObjectId;

var userSchema = new Schema({
    name:{firstname:String,surname:String},
    birthdate:String,
    email:String,
    posts: [new Schema({
        timestamp:Date,
        post:{type: ObjectId, ref: 'Post'}
    })],
    friends: [new Schema({
        friend: {type:ObjectId, ref:'User'}
    })]
});

module.exports = db.model('User', userSchema); 
```

*在 post.js 文件中*

```
var db = require('mongoose')
  , Schema = db.Schema,
  ObjectId=Schema.ObjectId;

var postSchema = new Schema({   
        title:String,
        content:String,
});

module.exports = db.model('Post', eventSchema); 
```

我想要实现的是获取所有当前用户的朋友，他们的帖子数组的嵌入式文档已经填充。我笨拙地尝试了这个功能：

```
function getUserFriendsPost(req, res) {
    var count = 0;
    var output = new Array();
    User.findOne({
        _id: req.params.id
    }, function(err, user) {
        for (var i = 0; i < user.friends.length; i++) {
            User.findOne({
                _id: user.friends[i].friend
            }).populate('posts.post').exec(function(err, post) {
                output.push(post);
                count++;
                if (count==user.friends.length) {
                    res.send(output);
                }
            });
        }

    });

} 
```

相反，我得到的是正确返回的朋友数组，但帖子的元素具有 null 值，如下所示：

```
[
    {
        "_id": "4fd5e5f3e45fd10100000004",
        "birthdate": "11/11/1911",
        "email": "blablabla@gmail.com",
        "friends": [],
        "posts": [
            {
                "timestamp": "2012-04-12T16:47:14.576Z",
                "post": null,
                "_id": "4f870712c488cf0100000081"
            },
            {
                "timestamp": "2012-04-12T16:48:42.282Z",
                "post": null,
                "_id": "4f87076ac488cf01000000a3"
            },
            {
                "timestamp": "2012-04-12T16:56:26.062Z",
                "post": null,
                "_id": "4f87093ac488cf0100000117"
            }
        "name": {
            "firstname": "John",
            "surname": "Doe"
        }
    }
] 
```

有什么我忽略了填充机制还是应该采用不同的方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:52:12.117

运气好的话，我们将在[Mongoose 3.0](https://github.com/LearnBoost/mongoose/issues/601#issuecomment-6520568)中进行递归填充。在此之前，请考虑从帖子中复制您想要的数据（可能只有标题）并像这样存储它：

```
var db = require('mongoose')
, Schema = db.Schema
, ObjectId = Schema.ObjectId;

var userSchema = new Schema({
    name: {firstname: String, surname: String},
    birthdate: String,
    email: String,
    posts: [new Schema({
        timestamp: Date,
        title: String,
        post: {type: ObjectId, ref: 'Post'}
    })],
    friends: [new Schema({
        friend: {type: ObjectId, ref: 'User'}
    })]
});

module.exports = db.model('User', userSchema); 
```

然后你可以做一个常规的：

```
User.findOne({_id: req.params.id}).populate('friends').exec(function(err, user) { ... }) 
```

# windows-phone-7 - 图像到字节数组的转换

> ID：11341537
> 
> 赞同：0
> 
> 时间：2012-07-05T09:32:20.763
> 
> 标签：windows-phone-7

我需要将图像转换为字节数组，因为我必须上传到服务器，看过很多文章，但我无法理解如何做到这一点，如果您认为我的问题是在这个论坛上提出的，请原谅我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:34:08.367

如果您有一个 WriteableBitmap，例如称为 LoadedPhoto，您可以尝试：

```
using (MemoryStream ms = new MemoryStream()
{
    LoadedPhoto.SaveJpeg(ms, LoadedPhoto.PixelWidth, LoadedPhoto.PixelHeight, 0, 95);
    ms.Seek(0, 0);
    byte[] data = new byte[ms.Length];
    ms.Read(data, 0, data.Length);
    ms.Close();
} 
```

如果您使用 CodePlex 中的 WriteableBitmapEx 库，它也可以转换为字节数组 [http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:40:08.237

我假设它是一个位图（但它适用于所有图像类型）：

```
 System.Drawing.Bitmap bmp = GetYourImage();
 System.IO.MemoryStream stream = new System.IO.MemoryStream();
 bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp);
 stream.Position = 0;
 byte[] data = stream.ToArray(); 
```

# matlab - 如何在编辑器中搜索变量名？

> ID：11341539
> 
> 赞同：1
> 
> 时间：2012-07-05T09:32:24.093
> 
> 标签：matlab, variables, search, variable-names

在函数中，如果在函数结束之前或在变量被覆盖之前未使用定义的变量，MATLAB 编辑器会显示警告。这显然告诉我编辑器有一种方法可以在代码中搜索给定变量的出现。

我可以手动执行此操作吗？Find 功能显然在这里受到限制，因为它仅在编辑器窗口中搜索文本主体（包括注释）以查找搜索字符串的匹配项。这使得在搜索具有短名称的变量时非常不方便（例如我常用的“a”）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:03:06.597

我无法告诉您内置编辑器的早期版本，但至少从 2011b 开始，编辑器的右侧边距会为以下内容创建颜色标签：

*   警告，标记为橙色
*   错误，标记为红色
*   变量/函数出现：标记为深灰色，用于选定的文本。

其中第三个是您正在寻找的。您只需双击变量名称或函数名称来选择它，您的 Matlab 编辑器将自动突出显示相同标识符的其余部分，并在右侧功能区上用我上面提到的灰色标记标记它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:19:00.983

您可以将搜索限制为匹配大小写和整个单词，这将只为您提供此变量，无论是否在注释中。

顺便说一句，你不应该使用像 a、b、c 这样的变量名。它使代码更难阅读和维护。即使您有像循环和临时变量这样的虚拟变量，也可以使用 indexFiles 或 tempValue

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:00:30.620

您还可以使用一些正则表达式来匹配代码中的变量名称。

如果您假设任何变量名称与其余代码之间的任何分隔`linefeed tab space ! " # $ % & ' ( ) * + , - . / : ; < = > ? [ \ ] ^ `` { | } ~`，那么您可以创建一个小函数，该函数将函数名称作为输入并输出提及变量名称的行。但是，这种方法不会将函数名和变量名分开，但是无论如何您都应该有一些标准来分开它们。我使用这种方法来更改我的 MATLAB 代码的变量名称（但我的代码是用 awk 编写的，而不是用 MATLAB 编写的）。

我想知道当你有一个包含数千或数万行代码的复杂程序并且你的变量被命名为`a`,`b`等等时你会怎么做`c`......

# git - 尝试从 PHPEd 转到 Aptana

> ID：11341541
> 
> 赞同：1
> 
> 时间：2012-07-05T09:32:27.963
> 
> 标签：git, aptana, phped

多年来，我一直使用 PHPEd 作为我的首选 IDE。它很棒而且速度很快，但仍然没有对 git 的原生支持。我需要使用 git，我希望它集成到我的工作流程中。

我听说过关于 Aptana 的好消息——包括它有很好的 git 集成，所以已经安装了它，我现在正试图弄清楚所有的差异。

1.  **工作区链接到文件夹是怎么回事？**在 PHPEd 中，工作区只是项目的集合。它与文件系统中的位置无关，除了存储工作区元信息的 .ppw 文件的存储位置。
2.  **同样，为什么项目要绑定到特定文件夹？**在 PHPEd 中，项目不会“绑定”到文件系统中的特定位置。是的，该项目定义了一个根文件夹，但它只是项目的一个属性。这意味着没有项目相关文件（元文件？）使项目源文件的文件结构混乱。可以让 Aptana 以这种方式运行吗？
3.  **连接**- 连接相似，但项目引用它们的方式不同。在 PHPEd 中，我使用的每个远程服务器都有一个连接。然后在一个项目中，我可以指定一个相对于连接的远程根文件夹 - 如果它们都发布在同一个远程服务器上，这允许我让多个项目使用一个连接。Aptana 可以这样表现吗？还是我必须为每个项目定义一个单独的连接？
4.  **从现有来源创建项目的最佳方法是什么？**我喜欢我的本地文件结构来镜像我的主机上的文件结构。这允许轻松移动文件夹，轻松同步，允许我在 Filezilla 等中同步浏览。所以我的工作目录将如下所示：

    ```
    /www
        /dev_html
            /development <- this is the root of a development subdomain
            /test <- this is the root of the last build being tested in the test subdomain
        /intra_html <- contains the root folders of various intranet subdomains
            /crm
            /kb
        /public_html  <- this is the live site 
    ```

    现在，我真的不想将 Aptana 指向这些文件夹并让它添加它的元文件夹，但我不想让 Aptana 复制这些文件夹 - 引入另一个分片。如何创建指向这些现有文件的项目？我知道这与我的第二个问题有关，但是如果 Aptana 必须在本地复制它们，是否有办法让这些本地文件保持最新？

5.  如果我希望能够轻松上传到远程主机，与 git 集成的最佳方式是什么？PHPEd 使用简单的键盘快捷键（Ctrl+Shift+S）处理了这个问题，它会立即上传到远程服务器，但不支持 git。我有一个与远程主机分开的远程存储库（bitbucket）。我希望 git 集成可以轻松地立即上传到我的开发环境，以及在一切按我想要的方式工作后轻松提交的能力。

我的部分问题是 Aptana 中的术语不是很直观（对我来说，来自 PHPEd）并且没有得到很好的解释。如果我想为代码自动完成添加一个框架文件夹，那是“PHP Buildpath”选项卡下的“外部目录”吗？什么是 PHP 构建路径？

总而言之，我希望有一个镜像托管文件结构的本地文件结构，我希望能够非常轻松地将本地文件同步到主机，并且我希望能够轻松暂存然后提交我曾经编辑过的那些文件我已经在主机上测试了它们。Aptana 可以实现这一切吗？还是我需要经历将 git 与 PHPEd 集成的巨大痛苦？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:37:50.493

尝试 tortoise git，您将拥有与 tortoise svn 相同的集成。而且你不能将 PHPEd 的调试器与 Aptana 一起使用，我已经使用了 Xdebug 和 PHPEd 的调试器，我可以告诉你，与 PHPEd 相比，Xdebug 是垃圾。我不为 NuSphere 工作，但他们绝对拥有最好的 PHP 调试器。

# iphone - iPhone模拟器将数据文件放在哪里？

> ID：11341543
> 
> 赞同：0
> 
> 时间：2012-07-05T09:32:31.707
> 
> 标签：iphone, xcode

如果我使用捆绑包中内置的数据库编译我的 iPhone 应用程序，我必须使用什么路径来查找文件以便我可以打开它，如下所示：

```
FMDatabase* db = [FMDatabase databaseWithPath:@"/???/database.sqlite"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:36:30.843

无论模拟器或设备如何，您都可以这样使用。请不要忘记将 db 文件添加到您的项目文件夹并添加到您的包中。

```
#define DATABASE @"databasefile.sqlite"

NSArray *documentPaths      = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir      = [documentPaths objectAtIndex:0];
databasePath                = [[NSString alloc] initWithString:[documentsDir stringByAppendingPathComponent:DATABASE]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:40:44.107

在你的里面 `- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

设置以下代码：

```
databaseName=@"yourfileName.sqlite";    
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    [self checkAndCreateDatabase]; 
```

-（无效）checkAndCreateDatabase {

```
BOOL success;

NSFileManager *fileManager = [NSFileManager defaultManager];

success = [fileManager fileExistsAtPath:databasePath];

if(success) return;
else
    printf("NO File found");

NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil]; 
```

}

# asp.net-mvc-3 - 如何更新文本框值@Html.TextBoxFor(m => m.MvcGridModel.Rows[j].Id)

> ID：11341545
> 
> 赞同：1
> 
> 时间：2012-07-05T09:32:31.910
> 
> 标签：asp.net-mvc-3, html.textboxfor

我有问题，文本框值没有用模型中的新值更新。@Html.TextBoxFor(m => m.MvcGridModel.Rows[j].Id)

首先集合 MvcGridModel.Rows 填充了一些数据，然后当按下按钮并提交表单时，它成功获取新数据，但它不会更新文本框的值。

你有什么想法？提前谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:35:25.123

这是因为诸如 TextBoxFor 之类的 HTML 帮助器在绑定它们的值时首先查看 ModelState，然后才在模型中查看。因此，如果在您的 POST 操作中您尝试修改作为初始 POST 请求一部分的某些值，如果您希望这些更改在视图中生效，您也必须将其从 ModelState 中删除。

例如：

```
[HttpPost]
public ActionResult Foo(MyViewModel model)
{
    // we change the value that was initially posted
    model.MvcGridModel.Rows[0].Id = 56;

    // we must also remove it from the ModelState if
    // we want this change to be reflected in the view
    ModelState.Remove("MvcGridModel.Rows[0].Id");

    return View(model);
} 
```

这种行为是故意的，而且是设计使然。这就是允许例如具有以下 POST 操作的原因：

```
[HttpPost]
public ActionResult Foo(MyViewModel model)
{
    // Notice how we are not passing any model at all to the view
    return View();
} 
```

但是在视图中，您会获得用户最初在输入字段中输入的值。

还有`ModelState.Clear();`一种方法可用于从模型状态中删除所有键，但要小心，因为这也会删除任何相关的模型状态错误，因此建议仅从模型状态中删除您打算在 POST 控制器操作中修改的值。

话虽如此，在一个设计合理的应用程序中，你不应该需要这个。因为您应该使用[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    if (!ModelState.IsValid)
    {
        // there was some error => redisplay the view without any modifications
        // so that the user can fix his errors
        return View(model);
    }

    // at this stage we know that the model is valid. 
    // We could now pass it to the DAL layer for processing.
    ...

    // after the processing completes successfully we redirect to the GET action
    // which in turn will fetch the modifications from the DAL layer and render
    // the corresponding view with the updated values.
    return RedirectToAction("Index");
} 
```

# git - 如何在 Git 中区分具有特定修订版的文件？

> ID：11341546
> 
> 赞同：3
> 
> 时间：2012-07-05T09:32:32.493
> 
> 标签：git, diff, revision, magit

不知道Git有没有revision的概念。

我想将当前工作副本与旧版本（不一定是最后一次提交）进行比较。

如果可以在 Emacs 中完成，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:39:27.373

我不知道在 Emacs 中这样做，但是：

```
git diff rev1..rev2 
```

将为整个存储库执行您想要的操作。然后，您可以添加：

```
 git diff rev1>..rev2 path 
```

`path`可以是文件的绝对路径，也可以是目录的路径，因此您可以区分子树。

如果您想比较工作副本 - 只需指定修订版 1：

```
git diff rev1 path 
```

修订代码可以是特殊名称，例如，`HEAD^..HEAD`表示最后到当前，或者它们来自日志的 SHA-1 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T14:35:12.457

要在 Emacs 中执行此操作（使用 magit），您可以：

1.  从 magit 缓冲区按下`d`以打开`diff`菜单
2.  按下`r`以选择要在差异中使用的提交范围。或者，您可以突出显示一系列提交，它们将被自动选中。

如果您只想比较某些文件，您还可以使用该`--`选项来选择哪些文件将包含在 diff 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-04T11:07:18.047

可以使用 Emacs[内置包`vc`](https://www.gnu.org/software/emacs/manual/html_node/emacs/Old-Revisions.html)来区分修订。

`C-u C-x v D`（`M-x vc-root-diff`带有前缀参数）允许区分整个树的任何两个版本。

`C-u C-x v =`（`M-x vc-diff`带有前缀参数）允许对当前[文件集](https://www.gnu.org/software/emacs/manual/html_node/emacs/Basic-VC-Editing.html)执行相同的操作（可以粗略地定义为标记文件的集合）。

# .net - 使用样式禁用 WPF 中的列重新排序

> ID：11341548
> 
> 赞同：3
> 
> 时间：2012-07-05T09:32:39.197
> 
> 标签：.net, wpf, xaml, listview, .net-4.0

我有一个应用程序有很多使用布局的`ListView`控件。`GridView`所有这些都使用自定义的`Style` `customStyle`. 我想在所有这些`ListView`控件中禁用列重新排序。

我可以在不使用现有样式的所有控件的情况下执行此操作吗？我试过这个，但它似乎不起作用：

```
<Style x:Key="customStyle"
       BasedOn="{StaticResource ResourceKey={x:Type ListView}}"
       TargetType="{x:Type ListView}">
    <Setter Property="GridView.AllowsColumnReorder" Value="False" />
    ...
</Style> 
```

谢谢！

**更新：**如果这是不可能的，有没有办法在我的应用程序中默认禁用列重新排序？

**更新：** 我也试过这个，它不起作用。可能是因为 GridView 没有`Style`属性。

```
<Style TargetType="{x:Type GridView}">
    <Setter Property="AllowsColumnReorder" Value="False" />
    ...
</Style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-07T19:24:53.390

这是你应该做的：

在这种风格定义中

```
<Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}" TargetType="ScrollViewer"> 
```

有一个

```
<GridViewHeaderRowPresenter 
```

它有一个属性 AllowsColumnReorder 将其硬编码为 false。

...

我知道......两年前的线程。但我敢打赌，人们仍然会阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-28T08:36:15.143

只需将此属性添加到您的数据网格标签

```
CanUserResizeColumns="False" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:39:33.623

检查这个[答案](https://stackoverflow.com/a/1176800/182344)。

尝试`GridView`使用此属性设置页面中所有内容的默认样式。

**编辑：**创建继承自的新类`GridView`。并更改构造函数中的属性值或将静态构造函数`AllowsColumnReorder`中依赖属性的默认值更改为 false。`AllowsColumnReorderProperty`并将此类用于所有页面中的列表视图。

**编辑 2**：覆盖依赖属性的最佳方法 -在静态构造函数中使用[OverrideMetadata方法。](http://msdn.microsoft.com/en-us/library/ms597491.aspx)

我已经厌倦了使用类似的东西

`<Setter Property="(ListView.View).(GridView.AllowsColumnReorder)" Value="False"/>`

但它不编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:48:11.613

我使用 ListView 控件的附加依赖属性解决了这个问题。然后，此属性将在 GridView 上设置该属性。然后，我可以从我的 Style 设置这个附加的依赖属性。仍然不是一个好的解决方案，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:43:13.737

您可以`x:key`在您的示例中删除，将其移动到 app.xaml，并使其成为`GridView`您应用中所有内容的默认样式。

# facebook - 应用 Facebook 登录

> ID：11341550
> 
> 赞同：1
> 
> 时间：2012-07-05T09:32:44.103
> 
> 标签：facebook, authentication, oauth

我试图为我的 Facebook 应用程序进行登录操作，代码如下：

```
$("#btnLogin").click(function ()
    {
     FacebookLogin();

    }); 
```

……

```
function FacebookLogin()
    {

        FB.login(function(response) {
        if (response.authResponse) {

            top.location.href = "result.html";
        } 
        }, {scope: 'email'});
    } 
```

当我单击登录按钮时，会显示 Facebook 登录弹出窗口，并且在初始化会话之后，此弹出窗口无法正常重定向，在

[https://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request) ..

我认为问题与设置安全性有关。如果我禁用导航安全，应用程序运行正常，否则“登录弹出窗口”在 url 中停止

任何想法？

# jquery - 基本的ajax-php形式

> ID：11341554
> 
> 赞同：0
> 
> 时间：2012-07-05T09:32:54.797
> 
> 标签：jquery, ajax

我有下面的表格。它的问题是，在我单击提交按钮后，什么也没有发生。表格就消失了。即使我在表单功能中插入警报，它也不会显示或者如果删除

```
if(hasError == false){
    $(this).hide
}; 
```

为什么会这样？

```
<html><body><ul>
    <li><a href="#" title="Share with a friend"><span>NOTIFY A FRIEND</span></a>
        <div class="navLinks">
            <form name="send-to-friend" id="form2" action="">
                <label for="name" class="blockItem">Your Name</label>
                <input type="text" id="name" class="blockItem" name="your name" maxlength="60" size="30"/>
                <label for="emailFrom" class="blockItem">Your Email Address</label>
                <input type="text" id="emailFrom" class="blockItem" name="your email" maxlength="60" size="30" />
                <label for="friend-email" class="blockItem">Your friend's e-mail Address</label>
                <input  type="text" id="emailTo" class="blockItem" name="your friends email" maxlength="60" size="30"  />
                <input class="button" id="submitt2" type="submit" value="Send Message" />
                <input  class="button"  type="submit" value="Cancel"  />
            </form>
        </div>
    </li>
</ul></body></html> 
```

**CSS：**

```
.navLinks {
    text-align: left;
    color: #b9cce4;
    background: #2C75D8;
    padding: 0 5px;
    z-index: 10000;
        background: #333;
    }
form {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 14px;
    line-height: 1.5em;
    color: #222;
    text-decoration: none;
    padding: 1em;
    margin-bottom: 1em; 
    }   
label {
    margin: 10px 0 0 0;
    }
.blockItem {
    display: block;
    }
.button {
    display: inline;
    margin-top: 10px;
    } 
```

**JavaScript：**

```
 $('.navLinks').hide();

    //hide show the main nav content
    $(".nav a").on("click", function(e) {
        $(".navLinks").hide();
        $(this).siblings(".navLinks").show();
        e.preventDefault();
    });
    //error checking
    $("#submit2").click(function(){
          $(".error").hide();
          var hasError = false;
          var emailReg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

          var nameVal = $("#name").val();
          if(nameVal == '') {
            $("#name").after('<span class="error">You forgot to enter the name.</span>');
            hasError = true;
          }

          var emailToVal = $("#emailTo").val();
          if(emailToVal == '') {
            $("#emailTo").after('<span class="error">You forgot to enter the email address to send to.</span>');
            hasError = true;
          } else if(!emailReg.test(emailToVal)) {
            $("#emailTo").after('<span class="error">Enter a valid email address to send to.</span>');
            hasError = true;
          }

          var emailFromVal = $("#emailFrom").val();
          if(emailFromVal == '') {
            $("#emailFrom").after('<span class="error">You forgot to enter the email address to send from.</span>');
            hasError = true;
          } else if(!emailReg.test(emailFromVal)) {
            $("#emailFrom").after('<span class="error">Enter a valid email address to send from.</span>');
            hasError = true;
          }

          if(hasError == false){
              $(this).hide();
              $.ajax({
                    type: "POST", 
                    url: "sendemail.php", 
                    data: data,
                    success: function(){ 
                     $("#loading").fadeOut(100).hide(); $('#message-sent').fadeIn(500).show(); } 
                });
          };
          return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:46:48.013

如果我理解正确你的 $.ajax 函数什么都不做，除了隐藏电子邮件表单......

```
data: data 
```

你在这里转移什么？提交表格中的信息在哪里写？

另外，如果您想获得一些响应数据，请将其添加到您的成功功能中，例如

```
success: function(data){
   //show it somehow
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:19:34.867

有几个问题...

您的 HTML 显示了这一点（注意`id`属性）

```
<input class="button" id="submitt2" type="submit" value="Send Message" /> 
```

你的 jQuery ：

```
$("#submit2").click(function(){ 
```

并且您正在监听`click`事件，`submit2`并且`id`按钮的 是`submitt2`。

我建议不要听`click`提交按钮的事件，而是听`submit`表单的事件：

```
$('#form2').submit(funciton(evt) {
   // your validation here

   // then to prevent submission
   evt.preventDefault();
} 
```

此处和[此处的](http://api.jquery.com/event.preventDefault/)[`.submit()`功能](http://api.jquery.com/submit/)文档 [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)

你还没有初始化数据参数

```
data: data, 
```

也许应该是

```
data: $('#form2').serialize(), 
```

阅读[`.serialize()`此处的文档](http://api.jquery.com/serialize/)

# php - PHP缓存是否在用户之间共享？

> ID：11341556
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:01.887
> 
> 标签：php, caching

看看这段代码：

```
$cache = Zend_Cache::factory('Output',
                             'File',
                             $frontendOptions,
                             $backendOptions);

// we pass a unique identifier to the start() method
if(!$cache->start('mypage')) {
    // output as usual:

    echo 'Hello world! ';
    echo 'This is cached ('.time().') ';

    $cache->end(); // the output is saved and sent to the browser
} 
```

正如this [doc](http://framework.zend.com/manual/en/zend.cache.introduction.html)解释的那样，如果上面已经处理过，则不会进入block语句，因此，时间不会刷新。假设过期时间配置为 30 秒。

访问者 A 来了，输出被缓存了，所以很明显，访问者会看到相同的时间多次刷新 30 秒。我的问题是，如果访客 B 同时出现，他是否会看到与访客 A 相同的时间，因为它已经缓存或缓存将是用户特定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:34:46.450

是的，他会，因为这就是为什么要使用缓存的原因：不要一遍又一遍地为每个用户处理内容。您*可以*使用特定于用户的内容创建缓存 ID

```
$cache->start('mypage'.$userId); 
```

但是你应该问问自己是否真的值得缓存。

# r - 在确切日期加入 data.table，如果不是，则在最接近的小于日期的情况下加入

> ID：11341557
> 
> 赞同：6
> 
> 时间：2012-07-05T09:33:02.197
> 
> 标签：r, data.table

我想加入两个`data.table`s 使用日期作为加入。

好吧，有时我没有完全匹配，在这种情况下，我想找到最近的更少日期。我的问题与这篇关于 SQL 的帖子非常相似： [SQL Join on Nearest less than date](https://stackoverflow.com/questions/2142907/sql-join-on-nearest-less-than-date)

我知道`data.table`语法类似于 SQL，但我无法编写代码。什么是正确的语法？

一个简化的例子：

```
Dt1 
   date      x
1/26/2010 - 10  
1/25/2010 - 9  
1/24/2010 - 9   
1/22/2010 - 7    
1/19/2010 - 11

Dt2
   date
1/26/2010   
1/23/2010   
1/20/2010 
```

输出

```
 date     x
1/26/2010 - 10  
1/23/2010 - 7 
1/20/2010 - 11 
```

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:58:30.700

干得好：

```
library(data.table) 
```

创建数据：

```
Dt1 <- read.table(text="
date      x
1/26/2010,  10  
1/25/2010,  9  
1/24/2010,  9   
1/22/2010,  7    
1/19/2010,  11", header=TRUE, stringsAsFactors=FALSE)

Dt2 <- read.table(text="
date
1/26/2010   
1/23/2010   
1/20/2010", header=TRUE, stringsAsFactors=FALSE) 
```

转换为`data.table`，将字符串转换为日期，并设置`data.table`键：

```
Dt1 <- data.table(Dt1)
Dt2 <- data.table(Dt2)

Dt1[, date:=as.Date(date, format=("%m/%d/%Y"))]
Dt2[, date:=as.Date(date, format=("%m/%d/%Y"))]

setkey(Dt1, date)
setkey(Dt2, date) 
```

加入表格，使用`roll=TRUE`：

```
Dt1[Dt2, roll=TRUE]

           date  x
[1,] 2010-01-20 11
[2,] 2010-01-23  7
[3,] 2010-01-26 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:28:37.657

```
?data.table                  # search for the `roll` argument
example(data.table)          # search for the example using roll=TRUE
vignette("datatable-intro")  # see section "3: Fast time series join" 
vignette("datatable-faq")    # see FAQs 2.16 and 2.20 
```

这是 的主要特点之一`data.table`。由于行是有序的（与 SQL 不同），因此此操作简单且非常快速。SQL 本质上是无序的，因此您需要自联接和“排序依据”来完成此任务。它可以在 SQL 中完成并且可以工作，但它可能很慢并且需要更多代码。由于 SQL 是行存储，甚至是内存中的 SQL，它的下限由从 RAM 到 L2 缓存的页面提取确定。`data.table`低于该下限，因为它是列存储。

2 个小插曲也在[主页](http://datatable.r-forge.r-project.org/)上。

# java - 通过产品名称从 NVD 下载漏洞

> ID：11341558
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:07.463
> 
> 标签：java

通过访问[http://nvd.nist.gov/download.cfm#XML](http://nvd.nist.gov/download.cfm)，

我意识到 NIST 提供 XML 提要，免费使用。

有没有一种方法可以让我通过产品名称下载所有漏洞。

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:27:17.687

[http://nvd.nist.gov/download.cfm#CVE_FEED](http://nvd.nist.gov/download.cfm#CVE_FEED)

这不是您要找的吗？

# c# - 在 MS Access 中查询以查找数字和文本

> ID：11341559
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:08.087
> 
> 标签：c#, sql, ms-access, is-empty

我编写了一个搜索查询来从 MS Access 表中查找数据。但是当用户没有像 ID 这样输入数字时，查询会失败。

```
"Select UID, FirstName from tUserInfo where UID = " + UserID + " and  FirstName like '%" + txtSearchFirst.Text + "%'" 
```

数字为空时如何搜索表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:35:25.810

```
Select UID, FirstName from tUserInfo 
where (UID = " + UserID + " or UID is null)
and FirstName like '%" + txtSearchFirst.Text + "%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:33:54.003

一些笔记。

```
 thisCommand.CommandText = "SELECT UID, FirstName FROM tUserInfo " +
    " WHERE FirstName Like '%' & ?  & '%' And UID & "" Like ? & '%';";

    //Names are irrelevant with OLEDB and MS Access, the order is important
    thisCommand.Parameters.AddWithValue("@Param", txtSearchFirst.Text);
    thisCommand.Parameters.AddWithValue("@Param", UserID + ""); 
```

# php - 在 codeigniter 中使用 ajax 和 jquery 检查用户名的可用性

> ID：11341563
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:20.757
> 
> 标签：php, javascript, jquery, ajax, codeigniter

在这里，我试图检查用户名输入是否可供用户使用。我在codeigniter中这样做。这是我的查看页面：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
    <style type="text/css">
        .no{color:red;}
        .yes{color:green;}
    </style>
    <script>
        $(document).ready(function(){
                // unique user name checking ------------- starts here----------------
                $("#username").blur(function(){
                        var form_data= {
                            action : 'check_username',
                            username : $(this).val
                        };

                        $.ajax({
                                type: "POST",
                                url : "check_unique_username",
                                data : form_data,
                                success : function(result) {
                                    $("#message").html(result.message);
                                    alert(result);
                                }
                        });
                });
                // unique username checking -------------- ends here-----------------
        });  

    </script>
</head>
<body>
    <form class="RegistrationForm" id="RegistrationForm" method="POST" action="">
        <label for="username">User Name</label>
        <div>
            <input id="username" name="username" size="25" class="required" />
        </div>
        <input type="button" id="button1" name="button1" value="check availability" />
        <div id="message"></div>
    </form>
</body> 
```

这是我的控制器代码：

```
<?php
class Registration extends MX_controller {
    function index(){
        $this->load->view('registrationPage');  // this will load the registration page.
    }
    function unique_username() {
        $action = $_POST['action'];
        if($action=='check_username'){
            $u = $this->input->post('username');
            $users=array("jhon","neo","margo","hacker","user123");
            if(in_array($u,$user)) {
                echo json_encode(array('message' => "It is not available!"));

            }
            else {
                echo json_encode(array('message' => "It is available!"));

            }
        }
    }
}
?> 
```

但是我的代码不起作用，我错了，请帮帮我..只显示它可用于每个用户名

**编辑：**我改变了我的控制器代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:44:26.720

使用 div 的 id 时你没有使用`#`，所以使用：

```
$("#message").html(result); 
```

代替`$("message").html(result);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:46:18.487

编辑：更新问题的更新答案。

这实际上很愚蠢，我们谁都看不到，但问题是这个字符串：`username : $(this).val`. 原因是 .val 不是 jQuery 获取文本字段值的方法，它应该是`username : $(this).val()`（带括号）。

这涵盖了第一个 JS 部分，下一个问题是一个错字，你有`url : "check_unique_username",`，但它应该是`url : "registration/unique_username",`（没有控制器名称，并且`check_`在控制器中方法没有它时有不必要的前缀）。

下一个错字在 PHP -`if(in_array($u,$user)) {`中，但我们有一个数组`$users`，因此将其更改为`if(in_array($u,$users)) {`，这样 PHP 就不会发出通知。

下一个问题是 AJAX 请求中缺少的行`dataType: 'json',`。我们必须把它说出来，以便 JS 可以知道我们正在接收什么数据类型并以正确的方式解析它。

之后它应该工作。但我有一些建议给你。更改 PHP，使其返回的不是字符串，而是布尔值。例如 - 如果可用，则为 true，如果不可用，则为 false。

```
if(in_array($u,$users)) {
    echo json_encode(array('message' => false));
} else {
    echo json_encode(array('message' => true));
} 
```

这样，在您的 JS 代码中操作这些数据会更容易。例如，您可以将此代码添加到 AJAX 请求的成功部分：

```
success : function(result) {
    if(result.message) { 
        $("#message").html("It's available!");
        $("#button1").removeAttr('disabled');
    } else {
        $("#message").html("It's not available!");
        $("#button1").attr('disabled','disabled');
    }
} 
```

您将启用/禁用提交按钮。这将确保普通用户在输入被占用的用户名时将无法提交表单。

此外，我会将事件更改`blur`为`keyup`，这样您将获得更快的更新，但它在服务器上有点重。事件的问题`blur`是您的用户可以填写用户名并单击按钮，因为模糊事件仅在用户离开元素后才会触发。

希望这可以帮助！

# git - 去中心化票务和维基系统

> ID：11341567
> 
> 赞同：1
> 
> 时间：2012-07-05T09:33:36.090
> 
> 标签：git

我正在与一个互联网连接非常糟糕的国家的团队合作。

目前我们正在通过 SVN 中的电子邮件和文本文件进行协调。

但这不是最优的。

有没有基于 git 的项目管理系统？

我发现 ticgit 是一个基于 GIT 的票务系统，如果有一个类似的解决方案可以在 wiki 结构中显示 markdown 文件，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:43:07.910

*   TicGit 作为票务系统
*   GitIt 作为一个 Wiki 系统

# actionscript-3 - 检查数字是减少还是增加

> ID：11341569
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:38.040
> 
> 标签：actionscript-3, flash

在我的循环中，我有一个不断变化的数字 - 我需要弄清楚如何判断数字是增加还是减少：

一些不起作用的伪代码:)

```
 var now:Number; 
    var then:Number;

    function loop():void 
    {
        now = changingNumber;
        then = changingNumber;
        if (now > then) {
            // increasing
        }else {
            // decreasing
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T09:38:15.500

```
var now:int = 0;
var thn:int = 0;

function loop():void
{
    // Change the number.
    now = changingNumber;

    if(now > thn)
    {
        trace("Got larger.");
    }
    else if(now < thn)
    {
        trace("Got smaller.");
    }
    else
    {
        trace("Maintained value.");
    }

    // Store the changed value for comparison on new loop() call.
    // Notice how we do this AFTER 'now' has changed and we've compared it.
    thn = now;
} 
```

* * *

或者，您可以为您的值准备一个 getter 和 setter，并在那里管理增加或减少。

```
// Properties.
var _now:int = 0;
var _thn:int = 0;

// Return the value of now.
function get now():int
{
    return _now;
}

// Set a new value for now and determine if it's higher or lower.
function set now(value:int):void
{
    _now = value;

    // Comparison statements here as per above.
    // ...

    _thn = _now;
} 
```

这种方法效率更高，不需要循环。

# c# - 什么是自治搜索引擎

> ID：11341571
> 
> 赞同：0
> 
> 时间：2012-07-05T09:33:46.900
> 
> 标签：c#, .net, search-engine, article, autonomy

什么是自主搜索引擎，是计算机语言（C#、PHP、VB 等）还是技术，或者它是什么。
如果有教程或文章，请与我分享，

亲切和最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:41:33.887

它是一个软件，允许您在数据库中搜索结构化以及非结构化数据（这是一个有组织的数据集合，我不是在谈论任何特定的 DBMS）。

您可以使用引擎的 api 或专用接口与引擎进行交互。

# android - 为什么 ImageView 的 getHeight 比实际大小低 30 像素？

> ID：11341583
> 
> 赞同：1
> 
> 时间：2012-07-05T09:34:26.933
> 
> 标签：android, android-widget, android-imageview

我的任务是使图像适合 ImageView 并保持纵横比。所以我需要裁剪图像以保持 ImageView 纵横比。

我有来自相机的图像，尺寸为 320x240。我的屏幕尺寸是 480x320（横向模式） 应用程序只能横向模式，但不能全屏。

ImageView 填充父级。布局 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView 
        android:id="@+id/image" 
        android:layout_height="fill_parent"  
        android:layout_width="fill_parent" android:keepScreenOn="true" android:scaleType="fitCenter">
    </ImageView>

</LinearLayout> 
```

使用 image.getWidth() 和 image.getHeight() 我得到 480x270 大小。

我的代码：

```
@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    MySize msize = main.imageSize();

    //msize.height += 30; <----this fix my problem, but I dont undersand why?

    Size size = camera.getParameters().getPreviewSize();

    double kw = (double)size.width / (double)msize.width;
    double kh = (double)size.height / (double)msize.height;

    double k = Math.min(kw, kh);

    Log.d("INFO", "msize before" + msize);

    msize.width = (int)Math.ceil(msize.width * k);
    msize.height = (int)Math.ceil(msize.height * k);

    int left = (size.width - msize.width) / 2;
    int top = (size.height - msize.height) / 2;

    Log.d("INFO", "msize " + msize);
    Log.d("INFO", "size " + size.width + "x" + size.height);

    YuvImage yuvimage = new YuvImage(data, ImageFormat.NV21, size.width, size.height, null);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    yuvimage.compressToJpeg(new Rect(left, top, msize.width, msize.height), 80, baos);
    byte[] jdata = baos.toByteArray();
    Bitmap image = BitmapFactory.decodeByteArray(jdata, 0, jdata.length);
    main.updateImage(image);
} 
```

其中 msize 是 ImageView 大小，size 是 Camera 图片大小。在此之后，相机图像将被裁剪为：320x180，结果为：

[https://www.dropbox.com/s/9e2xwdc6m88ty34/SC20120705-121813.png](https://www.dropbox.com/s/9e2xwdc6m88ty34/SC20120705-121813.png)

如果我将 30 添加到 ImageView 高度，我得到了正确的结果。

我的安卓是 2.3.3。

# c++ - pcl的链接和编译

> ID：11341587
> 
> 赞同：1
> 
> 时间：2012-07-05T09:34:40.117
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, openni, point-cloud-library

我在使用 vs 2010 和 vs 2008 安装点云库时遇到了很大的麻烦，我为两个 vs 版本下载了最新的多合一软件包，我尝试并添加了所有链接器（附加的 dep 和这些 lib 文件的路径到输入部分）并且所有包含文件和路径都包含在 vcc++ 目录中......但它在编译时总是给我一些错误。当我修复它们时，它总是逐渐增加这些错误，所有这些错误，如 blabla.lib blabla.h 无法找到或一些东西，但我做得很好，因为我在 opencv 中也做过类似的事情，它只是起到了作用。任何教程或帮助将被appriciated，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:30:07.350

考虑使用 CMake 生成项目文件并使用 PCL。PCL 网站上有一个教程，它一步一步地解释了如何去做！

看看[这里](http://www.pointclouds.org/documentation/tutorials/using_pcl_pcl_config.php#using-pcl-pcl-config)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:13:56.663

请检查您的显卡是否受支持。

然后，去官网下载[PCL下载](http://pointclouds.org/downloads/)的软件并按照说明正确操作。目前我已经安装了 PCL (windows) 并且工作正常。我下载了“All in one installer”、“cmake-2.8.7”来创建项目（[这是cMake的官方网站](http://www.cmake.org)）。并确保拥有最新版本的显卡驱动程序。其他可能的问题可能是您没有正确安装 OpenNi，但问题不大，您可以按照此[视频](http://www.youtube.com/watch?v=TDuGfAV6hDc)中的说明进行操作（请阅读视频说明以获取说明）。之后，您可以运行您的第一个示例。

快乐的代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-15T00:12:07.187

它可能是来自依赖版本或 C++ 编译器版本的错误。我从 Eigen 工具中遇到了一个错误，所以我单独安装了建议的 Eigen 版本，并使 Eigen 文件夹的包含路径不是来自 All-In-One Installer（预构建的二进制文件）。

这是我的设置：

操作系统：Windows 10，C++ 编译器：Cygwin g++ 7.4.0，IDE：Eclipse 4.10.0，PCL 版本：1.6.0，Eigen 版本：3.0.5（我单独安装）

# iphone - 将数据插入 SQLite DB 表

> ID：11341589
> 
> 赞同：0
> 
> 时间：2012-07-05T09:34:42.923
> 
> 标签：iphone, ios

在我的应用程序中，我使用 SQLite 数据库来存储数据。这是用于插入数据的示例代码

**在我的主课中，我如下调用这些方法**

```
-(IBAction)insertButtonAction:(id)sender
{
BOOL isRollNum;
Database *db = [[Database alloc]init];
if ([rollNumberTxtFld.text length]>0)
{
    isRollNum = [db checkForRollNumber:rollNumberTxtFld.text];
    if (isRollNum == YES) 
    {
        UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Student with specified roll number already available" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [errorAlert show];
    }
    else
    {
        if ([nameTxtFld.text length]>0 && [rollNumberTxtFld.text length]>0  ) 
        {
            NSString *name = nameTxtFld.text;
            NSString *num = rollNumberTxtFld.text;
            int age = [ageTxtFld.text intValue];
            NSString *address1 = address1TxtFld.text;
            NSString *address2 = address2TxtFld.text;
            NSString *mobile = mobileTxtFld.text;
            NSString *class =classTxtFld.text;

            NSLog(@"%@ %@ %d %@ %@ %@ %@ ",name,num,age,address1,address2,mobile,class);

            NSString* insert_stmt = NULL;
            insert_stmt = [NSString stringWithFormat:@"insert into friends(name,rollnumber,age,address1,address2,mobile,class) values('%@', '%@', '%d', '%@', '%@', '%@', '%@')",name,num,age,address1,address2,mobile,class,nil ];  
            Database *db = [[Database alloc]init];
            BOOL inserted = [db insertIntoDB:insert_stmt];
            if (inserted == YES) 
            {
                insertReenterAlert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Inserted" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [insertReenterAlert show];
            }
            else
            {
                insertReenterAlert = [[UIAlertView alloc] initWithTitle:@"Failed" message:@"Not Inserted" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                [insertReenterAlert show];
            }
        }
        else
        {
            insertReenterAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@" Please enter required fields and try again." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [insertReenterAlert show];
        }
    }
}
else
{
    insertReenterAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@" Please enter required fields and try again." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [insertReenterAlert show];
}
} 
```

**此方法用于检查我们要插入的卷号是否已经存在于数据库表中。**

```
-(BOOL)checkForRollNumber:(NSString *) num
{
rollNumberArray = [[NSMutableArray alloc] init];
NSFileManager *fileManager = [NSFileManager defaultManager];
dbPath = [[NSBundle mainBundle]pathForResource:@"FriendsList"ofType:@"sqlite"];
NSLog(@"dbPath %@",dbPath);    
BOOL success = [fileManager fileExistsAtPath:dbPath];
int rowCount = 0;
if (success)
{
    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) 
    {
        const char* sqlStatement = "SELECT COUNT(rollnumber) FROM friends ";
        sqlite3_stmt* statement;
        if( sqlite3_prepare_v2(database, sqlStatement, -1, &statement, NULL) == SQLITE_OK ) 
        {
            if( sqlite3_step(statement) == SQLITE_ROW )
            rowCount  = sqlite3_column_int(statement, 0); 
        }
        else
        {
            NSLog( @"Failed from sqlite3_prepare_v2\. Error is:  %s", sqlite3_errmsg(database) );
        }
        sqlite3_finalize(statement);
        sqlite3_close(database);
    }
}
NSLog(@"rowCount %d",rowCount);
if (success)
{
    if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        const char *selectSQL = "SELECT rollnumber FROM friends"; 
        sqlite3_stmt *statement;
        if (sqlite3_prepare_v2(database, selectSQL, -1, &statement, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement) == SQLITE_ROW)
            {
                for ( int i=0; i<rowCount; i++ )
                {
                    NSLog(@"i    %d",i);
                    NSString *str = [NSString stringWithUTF8String:(char *) sqlite3_column_text(statement, 0)];
                    [rollNumberArray addObject:str];
                    NSLog(@"rollNumberArray: %@",[rollNumberArray objectAtIndex:i]);
                }
            }
            for ( int i=0; i<[rollNumberArray count]; i++ )
            {
                NSLog(@"[rollNumberArray objectAtIndex:%d] %@ == num %@",i,[rollNumberArray objectAtIndex:i],num);
                if ([[rollNumberArray objectAtIndex:i] intValue] == [num intValue])
                {
                     NSLog(@"FOUND");
                    return YES;
                }
                else
                {
                    NSLog(@"NOT FOUND");
                    return NO;
                }
            }
        }
        else
        {
            NSLog(@"Statement Not Prepared");
            return NO;
        }
        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"Database Not Opened");
        return NO;
    }
    sqlite3_close(database);
}
else
{
    NSLog(@"File Not Opened");
    return NO;
}
} 
```

**这是向表中插入数据的方法**

```
-(BOOL) insertIntoDB :(NSString *) insert_stmt 
{
NSFileManager *fileManager = [NSFileManager defaultManager];
dbPath = [[NSBundle mainBundle]pathForResource:@"FriendsList"ofType:@"sqlite"];
NSLog(@"dbPath %@",dbPath);    
BOOL success = [fileManager fileExistsAtPath:dbPath];
if (success)
{
    if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        const char *insertSQL = [insert_stmt UTF8String]; 
        sqlite3_stmt *statement;
        if (sqlite3_prepare_v2(database, insertSQL, -1, &statement, NULL) == SQLITE_OK) //**Always not entering into this if**
        {
            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                NSLog(@"Succesfully added in DB");
                return YES;
            }
            else
            {
                 NSLog(@"Not added in DB");
                return NO;
            }
        }
        else
        {
            NSLog(@"Statement Not Prepared");
            return NO;
        }
        sqlite3_finalize(statement);
    }
    else
    {
        NSLog(@"Database Not Opened");
        return NO;
    }
    sqlite3_close(database);
}
else
{
    NSLog(@"File Not Opened");
    return NO;
}
} 
```

它不满足这个条件**sqlite3_prepare_v2(database, selectSQL, -1, &statement, NULL) == SQLITE_OK)** 并且只有第一次添加值。任何人都可以帮助或建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:30:36.677

sqlite3_prepare_v2 将返回您忽略的错误代码。为什么不将它分配给一个变量，以便在使用 if 语句测试它之前检查它？

```
int returnCode = sqlite3_prepare_v2(database, insertSQL, -1, &statement, NULL) 
if (returnCode == SQLITE_OK) // put a breakpoint here and look at return code. 
```

# iphone - 如何为多个 uiimageviews 处理一个 UITapGesturerecognizer

> ID：11341597
> 
> 赞同：1
> 
> 时间：2012-07-05T09:35:06.980
> 
> 标签：iphone, ios

我正在开发一个应用程序。我在其中使用了 70 `UIImageViews`。对于所有`UIImageViews`我使用 single `UITapgestureRecognizer`。但只有它为最后工作`UIImageView`。

所以请告诉我如何将单曲`UITapGgestureRecognizer`用于所有这些。我的`UIImageViews`代码看起来像

```
radiotap=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(radiochanged:)];
radiotap.delegate=self;

a=[[UIImageView alloc]initWithFrame:CGRectMake(10, male.frame.origin.y, ima.size.width, ima.size.height)];
[a setImage:ima];
a.tag=0;
a.userInteractionEnabled=YES;
[a addGestureRecognizer:radiotap];
[scroll addSubview:a];

 b=[[UIImageView alloc]initWithFrame:CGRectMake(10, female.frame.origin.y, ima.size.width, ima.size.height)];
[a setImage:ima];
b.tag=1;
b.userInteractionEnabled=YES;
[b addGestureRecognizer:radiotap];
[scroll addSubview:b]; 
```

像这样我添加了 70 个 UIImageViews。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:39:07.857

1.  将点击手势识别器添加到图像视图的容器中
2.  禁用所有图像视图的用户交互

这样，触摸就会传递到保存图像视图的容器下方。

嘿，我现在有你的问题。

为每个图像视图创建新的手势识别器。问题是您只创建了一个手势识别器实例。

我希望你有错误，并会适当地编辑你的代码。如果您遇到困难，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:41:15.900

您可以一对一`UITapGestureRecognizer`分配`UIView`。一个想法是子类化`UIIimageView`并添加 a`UITapgestureRecognizer`作为属性。并为 for 循环中的每`UIImageView`一个新的分配/初始化。`UITapGestureRecognizer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:04:47.840

当您将 UITapGestureRecognizer 添加到现实中的视图时，您正在这样做：

您正在设置 UITapGestureRecognizer 的属性，其中包含链接到的视图：这意味着每个 UITapGestureRecognizer 只有一个与之关联的 uiview。

这就是为什么你只能在你设置的最后一个中看到它。

做你想做的事，所以你需要为每个视图创建/分配/初始化一个 UITapGestureRecognizer ...

# java - 使用 Gson java 解析 json

> ID：11341600
> 
> 赞同：1
> 
> 时间：2012-07-05T09:35:20.747
> 
> 标签：java, json, gson

使用 Gson 解析 json 时遇到问题。这是我的代码：

```
Gson gson = new GsonBuilder().create();
String json = gson.toJson(myMap.values());
MyClass clazz = gson.fromJson(json, MyClass.class);
System.out.println(clazz.toString()); 
```

但是我得到了下一个错误（我也尝试了新的 TypeToken，但错误是一样的）：

```
com.google.gson.JsonParseException: The JsonDeserializer MapTypeAdapter failed to deserialized json object /*here is json object*/

Caused by: java.lang.IllegalArgumentException: Map objects need to be parameterized unless you use a custom serializer. Use the com.google.gson.reflect.TypeToken to extract the ParameterizedType.
    at com.google.gson.TypeInfoMap.<init>(TypeInfoMap.java:45)
    at com.google.gson.DefaultTypeAdapters$MapTypeAdapter.deserialize(DefaultTypeAdapters.java:605)
    at com.google.gson.DefaultTypeAdapters$MapTypeAdapter.deserialize(DefaultTypeAdapters.java:573)
    at com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:50) 
```

这是获得的json字符串，它是有效的（但可能我应该删除“items”子字符串？）：

```
["{\n 
    \"items\": 
        [
        \n  {
        \n \"MyClass_type_var1\": {
        \n    \"field1\": \"val1\",
        \n    \"field2\": \"val2\",
        \n    \"field3\": [
                        \n     {
                        \n      \"subfield1\": subval
                        \n     }
                        \n    ]
                        \n   }
                        \n  },
        \n \"MyClass_type_var2\": {
        \n    \"field1\": \"val1\",
        \n    \"field2\": \"val2\",
        \n    \"field3\": [
                        \n     {
                        \n      \"subfield1\": subval
                        \n     }
                        \n    ]
                        \n   }
                        \n  },
        \n \"MyClass_type_var3\": {
        \n    \"field1\": \"val1\",
        \n    \"field2\": \"val2\",
        \n    \"field3\": [
                        \n     {
                        \n      \"subfield1\": subval
                        \n     }
                        \n    ]
                        \n   }
                        \n  },

etc......   may I haven't closed brackets correctly, but they are correct :)                
            }           
        ]               
    "] 
```

我将不胜感激任何建议。

```
public final class MyClass extends GenericJson {

  private String field1;
  private String field2;
  private java.util.List<AClass> field3; // has subfield1
//getters and setters
} 
```

单行json：

```
["{\n \"items\": [ \n  { \n \"MyClass\": { \n    \"field1\": \"val1\", \n    \"field2\": \"val2\", \n    \"field2\": [ \n  { \n \"subfield1\": subval   \n } \n    ] \n   } \n  }, \n \"MyClass\": { \n    \"field1\": \"val1\", \n    \"field2\": \"val2\", \n    \"field2\": [ \n     {  \n      \"subfield1\": subval \n     } \n    ] \n   } \n  }, \n \"MyClass\": {\n   \"field1\":\"val1\", \n    \"field2\": \"val2\", \n    \"field2\": [ \n     { \n      \"subfield1\": subval \n     } \n    ] \n   } \n  }, }          ]   "] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:19:31.330

[在这里，](https://stackoverflow.com/questions/11346514/parsing-json-with-jackson-java)我尝试使用jackon，但没有帮助。查看该问题的答案（使用我自己的解析器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:56:30.413

尝试这样的事情：

我的课：

```
import java.util.List;

public class MyClass {

    public List<Item> items;

    public static class Item{

        public List<innerData> MyClass_type_var1;
        public List<innerData> MyClass_type_var2;
        public List<innerData> MyClass_type_var3;

        public static class innerData{
            public String field1;
            public String field2;
            public List<String> field3;
        }       
    }   
}

MyClass cls = new Gson().fromJSon(json, MyClass.class); 
```

希望这将引导您朝着正确的方向前进:-)

编辑：

试试这个

```
public class NewClass{
    public List<MyClass> items;
}

NewClass cls = new Gson().fromJSon(json, NewClass.class); 
```

# perl - PPM - 从给定存储库安装模块

> ID：11341604
> 
> 赞同：1
> 
> 时间：2012-07-05T09:35:28.057
> 
> 标签：perl

我正在使用 ActiveState Perl 并使用 PPM 安装模块。我通过批处理文件运行 ppm 命令。就像是

```
ppm rep add Bribes http://www.bribes.org/perl/ppm
ppm rep add UWinnipeg http://theoryx5.uwinnipeg.ca/ppms
ppm rep add Trouchelle http://trouchelle.com/ppm/

ppm install SOAP-Lite 
```

因此，我使用这三个存储库来安装各种模块。 `SOAP::Lite`模块在所有三个存储库中都可用，但使用贿赂存储库安装它似乎很好。请参考这个链接

[http://www.mail-archive.com/perl-win32-users@listserv.activestate.com/msg38184.html](http://www.mail-archive.com/perl-win32-users@listserv.activestate.com/msg38184.html)

在使用 ppm install 安装 SOAP-Lite 期间，如何指定存储库？我知道我们可以指定 url，但我正在寻找使用存储库名称的东西（Bribes、UWinnipeg、Trouchelle）。如果我们有任何这样的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:13:22.437

如果您的 PPM 版本 > 3。这些命令将对您有所帮助。

`ppm> rep`

要获取您列出的存储库列表，活动的存储库将标有前导“*”。然后输入

`ppm> rep set X`

其中 X 是您要搜索的存储库的编号。

# perl - 编写 SnmpGet 命令函数时出现 Perl 错误

> ID：11341605
> 
> 赞同：1
> 
> 时间：2012-07-05T09:35:31.580
> 
> 标签：perl, net-snmp

执行 1 个 perl 文件时 .....M 遇到此问题

**无法识别的字符 \x03; PK<-- HERE 在 mibwalk.pl 第 1 行的第 3 列附近由 <-- HERE 标记。**

AnyBody 对此有任何想法

```
Code--->

#!usr/bin/perl
use BER;
use SNMP_util;
use SNMP_Session;
$MIB1 = “sysLocation.0”;
$HOST = “192.168.1.150”;
($value) = &snmpget(“public\@$HOST”,”$MIB1”);
if($value) {
            print “Results :$MIB1: :$value:\n”; 
}   
  else { warn “No response from host :$HOST:\n”; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:47:07.060

您的文件中似乎有一个字符 \x03 。那是ASCII中的“文本结尾”。它可能是您的`.pl`文件本身或由它加载的东西。

如果您在文件开头看到类似`^C`或的内容，请将其删除。`^B`否则，您可能必须使用十六进制编辑器。

不过，让我印象深刻的一件事是提到“PK”。可能是您正在尝试执行 pk 压缩文件吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:11:11.830

您必须以十六进制格式发送字符串。在我的情况下，使用 NET::SNMP 模块是不可能的。

所以我修改了这个模块的源代码，使它成为可能。我使用了以下版本`Net::SNMP`：

```
SNMP.pm,v 5.3 2005/10/20 14:17:01
Version v5.2.0 
```

有关详细信息，请参阅本文底部。

现在您可以使用新的 ASN.1 类型 HEX_STRING的`set_request()`功能。`Net::SNMP`

例如：

```
#! /usr/local/bin/perl
use strict;
use warnings;
use Net::SNMP;

my $OID_sysContact = '1.3.6.1.2.1.1.4.0';

my ($session, $error) = Net::SNMP->session(
      -hostname  => shift || 'localhost',
      -community => shift || 'public',
   );

my $rv = $session->set_request(-varbindlist => [ $OID_sysContact, HEX_STRING, 'FF0a1200' ],);

$session->close();
exit 0;

# ============================================================================
package Net::SNMP;

# $Id: SNMP.pm,v 5.3 2005/10/20 14:17:01 dtown Rel $
# [...]
# ============================================================================

use strict;

## Validate the version of Perl

BEGIN 
{
   die('Perl version 5.6.0 or greater is required') if ($] < 5.006);
}

## Version of the Net::SNMP module

our $VERSION = v5.2.0;

## Load our modules

use Net::SNMP::Dispatcher();
use Net::SNMP::PDU qw( :ALL );
use Net::SNMP::Security();
use Net::SNMP::Transport qw( :ports );

## Handle importing/exporting of symbols

use Exporter();

our @ISA = qw( Exporter );

our @EXPORT = qw(
   INTEGER INTEGER32 OCTET_STRING OBJECT_IDENTIFIER IPADDRESS COUNTER
   COUNTER32 GAUGE GAUGE32 UNSIGNED32 TIMETICKS OPAQUE COUNTER64 NOSUCHOBJECT
   NOSUCHINSTANCE ENDOFMIBVIEW snmp_dispatcher HEX_STRING 
);

our @EXPORT_OK = qw( snmp_event_loop oid_context_match );

our %EXPORT_TAGS = (
   asn1        => [ 
      qw( INTEGER INTEGER32 OCTET_STRING NULL OBJECT_IDENTIFIER SEQUENCE
          IPADDRESS COUNTER COUNTER32 GAUGE GAUGE32 UNSIGNED32 TIMETICKS
          OPAQUE COUNTER64 NOSUCHOBJECT NOSUCHINSTANCE ENDOFMIBVIEW
          GET_REQUEST GET_NEXT_REQUEST GET_RESPONSE SET_REQUEST TRAP
          GET_BULK_REQUEST INFORM_REQUEST SNMPV2_TRAP REPORT HEX_STRING )
   ],
# [...]
# no more changes in source code of Net::SNMP
# [...] only changes in description of Net::SNMP
# [documentation] ------------------------------------------------------------

=head1 EXPORTS

The Net::SNMP module uses the F<Exporter> module to export useful constants 
and subroutines.  These exportable symbols are defined below and follow the
rules and conventions of the F<Exporter> module (see L<Exporter>).

=over

=item Default

&snmp_dispatcher, INTEGER, INTEGER32, OCTET_STRING, OBJECT_IDENTIFIER, 
IPADDRESS, COUNTER, COUNTER32, GAUGE, GAUGE32, UNSIGNED32, TIMETICKS, 
OPAQUE, COUNTER64, NOSUCHOBJECT, NOSUCHINSTANCE, ENDOFMIBVIEW HEX_STRING

=item Exportable

&snmp_debug, &snmp_dispatcher, &snmp_type_ntop, &oid_base_match, &oid_lex_sort, 
&ticks_to_time, INTEGER, INTEGER32, OCTET_STRING, NULL, OBJECT_IDENTIFIER, 
SEQUENCE, IPADDRESS, COUNTER, COUNTER32, GAUGE, GAUGE32, UNSIGNED32, TIMETICKS,
OPAQUE, COUNTER64, NOSUCHOBJECT, NOSUCHINSTANCE, ENDOFMIBVIEW, GET_REQUEST,
GET_NEXT_REQUEST, GET_RESPONSE, SET_REQUEST, TRAP, GET_BULK_REQUEST,
INFORM_REQUEST, SNMPV2_TRAP, REPORT, DEBUG_ALL, DEBUG_NONE, DEBUG_MESSAGE,
DEBUG_TRANSPORT, DEBUG_DISPATCHER,DEBUG_PROCESSING, DEBUG_SECURITY, COLD_START,
WARM_START, LINK_DOWN, LINK_UP,AUTHENTICATION_FAILURE, EGP_NEIGHBOR_LOSS,
ENTERPRISE_SPECIFIC, SNMP_VERSION_1,SNMP_VERSION_2C, SNMP_VERSION_3, SNMP_PORT,
SNMP_TRAP_PORT, TRANSLATE_NONE,TRANSLATE_OCTET_STRING, TRANSLATE_NULL,
TRANSLATE_TIMETICKS, TRANSLATE_OPAQUE,TRANSLATE_NOSUCHOBJECT,
TRANSLATE_NOSUCHINSTANCE, TRANSLATE_ENDOFMIBVIEW, TRANSLATE_UNSIGNED, 
TRANSLATE_ALL HEX_STRING

=item Tags

=over 

=item :asn1

INTEGER, INTEGER32, OCTET_STRING, NULL, OBJECT_IDENTIFIER, SEQUENCE, 
IPADDRESS, COUNTER, COUNTER32, GAUGE, GAUGE32, UNSIGNED32, TIMETICKS, OPAQUE, 
COUNTER64, NOSUCHOBJECT, NOSUCHINSTANCE, ENDOFMIBVIEW, GET_REQUEST, 
GET_NEXT_REQUEST, GET_RESPONSE, SET_REQUEST, TRAP, GET_BULK_REQUEST, 
INFORM_REQUEST, SNMPV2_TRAP, REPORT, HEX_STRING

=item :debug

&snmp_debug, DEBUG_ALL, DEBUG_NONE, DEBUG_MESSAGE, DEBUG_TRANSPORT, 
DEBUG_DISPATCHER, DEBUG_PROCESSING, DEBUG_SECURITY

=item :generictrap

COLD_START, WARM_START, LINK_DOWN, LINK_UP, AUTHENTICATION_FAILURE,
EGP_NEIGHBOR_LOSS, ENTERPRISE_SPECIFIC

=item :snmp

&snmp_debug, &snmp_dispatcher, &snmp_type_ntop, &oid_base_match, &oid_lex_sort, 
&ticks_to_time, SNMP_VERSION_1, SNMP_VERSION_2C, SNMP_VERSION_3, SNMP_PORT,
SNMP_TRAP_PORT

=item :translate

TRANSLATE_NONE, TRANSLATE_OCTET_STRING, TRANSLATE_NULL, TRANSLATE_TIMETICKS,
TRANSLATE_OPAQUE, TRANSLATE_NOSUCHOBJECT, TRANSLATE_NOSUCHINSTANCE, 
TRANSLATE_ENDOFMIBVIEW, TRANSLATE_UNSIGNED, TRANSLATE_ALL

=item :ALL

All of the above exportable items.

=back

=back

=head1 EXAMPLES
# [...]

# ============================================================================
1; # [end Net::SNMP] 
```

**网络::SNMP::消息**

```
# ============================================================================
package Net::SNMP::Message;

# $Id: Message.pm,v 2.3 2005/10/20 14:17:01 dtown Rel $

# Object used to represent a SNMP message. 

# Copyright (c) 2001-2005 David M. Town <dtown@cpan.org>
# All rights reserved.

# This program is free software; you may redistribute it and/or modify it
# under the same terms as Perl itself.

# ============================================================================

use strict;
use bytes;

use Math::BigInt();

## Version of the Net::SNMP::Message module

our $VERSION = v2.0.3;

## Handle importing/exporting of symbols

use Exporter();

our @ISA = qw( Exporter );

our @EXPORT_OK = qw( TRUE FALSE );

our %EXPORT_TAGS = (
   generictrap    => [
      qw( COLD_START WARM_START LINK_DOWN LINK_UP AUTHENTICATION_FAILURE
          EGP_NEIGHBOR_LOSS ENTERPRISE_SPECIFIC )
   ],
   msgFlags       => [ 
      qw( MSG_FLAGS_NOAUTHNOPRIV MSG_FLAGS_AUTH MSG_FLAGS_PRIV 
          MSG_FLAGS_REPORTABLE MSG_FLAGS_MASK )
   ],
   securityLevels => [
      qw( SECURITY_LEVEL_NOAUTHNOPRIV SECURITY_LEVEL_AUTHNOPRIV
          SECURITY_LEVEL_AUTHPRIV )
   ],
   securityModels => [
      qw( SECURITY_MODEL_ANY SECURITY_MODEL_SNMPV1 SECURITY_MODEL_SNMPV2C
          SECURITY_MODEL_USM )
   ],
   translate      => [
      qw( TRANSLATE_NONE TRANSLATE_OCTET_STRING TRANSLATE_NULL 
          TRANSLATE_TIMETICKS TRANSLATE_OPAQUE TRANSLATE_NOSUCHOBJECT 
          TRANSLATE_NOSUCHINSTANCE TRANSLATE_ENDOFMIBVIEW TRANSLATE_UNSIGNED 
          TRANSLATE_ALL )
   ],
   types          => [
      qw( INTEGER INTEGER32 OCTET_STRING NULL OBJECT_IDENTIFIER SEQUENCE
          IPADDRESS COUNTER COUNTER32 GAUGE GAUGE32 UNSIGNED32 TIMETICKS
          OPAQUE COUNTER64 NOSUCHOBJECT NOSUCHINSTANCE ENDOFMIBVIEW
          GET_REQUEST GET_NEXT_REQUEST GET_RESPONSE SET_REQUEST TRAP
          GET_BULK_REQUEST INFORM_REQUEST SNMPV2_TRAP REPORT HEX_STRING )
   ],
   utilities      => [ qw( asn1_ticks_to_time asn1_itoa ) ],
   versions       => [ qw( SNMP_VERSION_1 SNMP_VERSION_2C SNMP_VERSION_3 ) ]
);

Exporter::export_ok_tags( 
   qw( generictrap msgFlags securityLevels securityModels translate types 
       utilities versions ) 
);

$EXPORT_TAGS{ALL} = [ @EXPORT_OK ];

## ASN.1 Basic Encoding Rules type definitions

sub INTEGER()                  { 0x02 }  # INTEGER
sub INTEGER32()                { 0x02 }  # Integer32           - SNMPv2c
sub OCTET_STRING()             { 0x04 }  # OCTET STRING
sub HEX_STRING()               { 0xfe }  # OCTET STRING in HEX  # Work a Round
# [...]
# [public methods] -----------------------------------------------------------

sub new
{
   my ($class, %argv) = @_;

   # Create a new data structure for the object
   my $this = bless {
      '_buffer'      =>  '',              # Serialized message buffer
      '_error'       =>  undef,           # Error message
      '_index'       =>  0,               # Buffer index
      '_leading_dot' =>  FALSE,           # Prepend leading dot on OIDs
      '_length'      =>  0,               # Buffer length
      '_security'    =>  undef,           # Security Model object
      '_translate'   =>  TRANSLATE_NONE,  # Translation mode
      '_transport'   =>  undef,           # Transport Layer object
      '_version'     =>  SNMP_VERSION_1   # SNMP version
   }, $class;

   # Validate the passed arguments

   foreach (keys %argv) {

      if (/^-?callback$/i) {
         $this->callback($argv{$_});
      } elsif (/^-?debug$/i) {
         $this->debug($argv{$_});
      } elsif (/^-?leadingdot$/i) {
         $this->leading_dot($argv{$_});
      } elsif (/^-?msgid$/i) {
         $this->msg_id($argv{$_}); 
      } elsif (/^-?requestid$/i) {
         $this->request_id($argv{$_});
      } elsif (/^-?security$/i) {
         $this->security($argv{$_});
      } elsif (/^-?translate$/i) {
         $this->translate($argv{$_});
      } elsif (/^-?transport$/i) {
         $this->transport($argv{$_});
      } elsif (/^-?version$/i) {
         $this->version($argv{$_});
      } else {
         $this->_error("Invalid argument '%s'", $_);
      }

      if (defined($this->{_error})) {
         return wantarray ? (undef, $this->{_error}) : undef;
      }

   }

   return wantarray ? ($this, '') : $this;
}

{
   my $prepare_methods = {
      INTEGER,            \&_prepare_integer,
      OCTET_STRING,       \&_prepare_octet_string,
      NULL,               \&_prepare_null,
      OBJECT_IDENTIFIER,  \&_prepare_object_identifier,
      SEQUENCE,           \&_prepare_sequence,
      IPADDRESS,          \&_prepare_ipaddress,
      COUNTER,            \&_prepare_counter,
      GAUGE,              \&_prepare_gauge,
      TIMETICKS,          \&_prepare_timeticks,
      OPAQUE,             \&_prepare_opaque,
      COUNTER64,          \&_prepare_counter64,
      NOSUCHOBJECT,       \&_prepare_nosuchobject,
      NOSUCHINSTANCE,     \&_prepare_nosuchinstance,
      ENDOFMIBVIEW,       \&_prepare_endofmibview,
      GET_REQUEST,        \&_prepare_get_request,
      GET_NEXT_REQUEST,   \&_prepare_get_next_request,
      GET_RESPONSE,       \&_prepare_get_response,
      SET_REQUEST,        \&_prepare_set_request,
      TRAP,               \&_prepare_trap,
      GET_BULK_REQUEST,   \&_prepare_get_bulk_request,
      INFORM_REQUEST,     \&_prepare_inform_request,
      SNMPV2_TRAP,        \&_prepare_v2_trap,
      REPORT,             \&_prepare_report,
      HEX_STRING,         \&_prepare_hex_string
   };

   sub prepare 
   {
#     my ($this, $type, $value) = @_;

      return $_[0]->_error('ASN.1 type not defined') unless (@_ > 1);
      return $_[0]->_error if defined($_[0]->{_error});

      if (exists($prepare_methods->{$_[1]})) {
         $_[0]->${\$prepare_methods->{$_[1]}}($_[2]);
      } else {
         $_[0]->_error('Unknown ASN.1 type [%s]', $_[1]);
      }
   }
}

{
   my $process_methods = {
      INTEGER,            \&_process_integer32,
      OCTET_STRING,       \&_process_octet_string,
      NULL,               \&_process_null,
      OBJECT_IDENTIFIER,  \&_process_object_identifier,
      SEQUENCE,           \&_process_sequence,
      IPADDRESS,          \&_process_ipaddress,
      COUNTER,            \&_process_counter,
      GAUGE,              \&_process_gauge,
      TIMETICKS,          \&_process_timeticks,
      OPAQUE,             \&_process_opaque,
      COUNTER64,          \&_process_counter64,
      NOSUCHOBJECT,       \&_process_nosuchobject,
      NOSUCHINSTANCE,     \&_process_nosuchinstance,
      ENDOFMIBVIEW,       \&_process_endofmibview,
      GET_REQUEST,        \&_process_get_request,
      GET_NEXT_REQUEST,   \&_process_get_next_request,
      GET_RESPONSE,       \&_process_get_response,
      SET_REQUEST,        \&_process_set_request,
      TRAP,               \&_process_trap,
      GET_BULK_REQUEST,   \&_process_get_bulk_request,
      INFORM_REQUEST,     \&_process_inform_request,
      SNMPV2_TRAP,        \&_process_v2_trap,
      REPORT,             \&_process_report
   };

   sub process 
   {
#     my ($this, $expected, $found) = @_;

      return $_[0]->_error if defined($_[0]->{_error});
      return $_[0]->_error unless defined(my $type = $_[0]->_buffer_get(1));

      $type = unpack('C', $type);

      if (exists($process_methods->{$type})) {
         if ((@_ >= 2) && (defined($_[1])) && ($type != $_[1])) {
            return $_[0]->_error(
               'Expected %s, but found %s', asn1_itoa($_[1]), asn1_itoa($type)
            );
         }
         $_[2] = $type if (@_ == 3);
         $_[0]->${\$process_methods->{$type}}($type);
      } else {
         $_[0]->_error('Unknown ASN.1 type [0x%02x]', $type);
      }
   }
}

# [...]
# [private methods] ----------------------------------------------------------

#
# Basic Encoding Rules (BER) prepare methods
#

sub _prepare_type_length
{
#  my ($this, $type, $value) = @_;

   return $_[0]->_error('ASN.1 type not defined') unless defined($_[1]);

   my $length = CORE::length($_[2]);

   if ($length < 0x80) {
      $_[0]->_buffer_put(pack('C2', $_[1], $length) . $_[2]);
   } elsif ($length <= 0xff) {
      $_[0]->_buffer_put(pack('C3', $_[1], 0x81, $length) . $_[2]);
   } elsif ($length <= 0xffff) {
      $_[0]->_buffer_put(pack('CCn', $_[1], 0x82, $length) . $_[2]);
   } else {
      $_[0]->_error('Unable to prepare ASN.1 length');
   }
}

sub _prepare_integer
{
   my ($this, $value) = @_;

   return $this->_error('INTEGER value not defined') unless defined($value);

   if ($value !~ /^-?\d+$/) {
      return $this->_error('Expected numeric INTEGER value');
   }

   $this->_prepare_integer32(INTEGER, $value);
}

sub _prepare_unsigned32
{
   my ($this, $type, $value) = @_;

   if (!defined($value)) {
      return $this->_error('%s value not defined', asn1_itoa($type));
   }

   if ($value !~ /^\d+$/) {
      return $this->_error(
         'Expected positive numeric %s value', asn1_itoa($type)
      );
   }

   $this->_prepare_integer32($type, $value);
}

sub _prepare_integer32
{
   my ($this, $type, $value) = @_;

   # Determine if the value is positive or negative
   my $negative = ($value =~ /^-/);

   # Check to see if the most significant bit is set, if it is we
   # need to prefix the encoding with a zero byte.

   my $size   = 4;     # Assuming 4 byte integers
   my $prefix = FALSE;
   my $bytes  = '';

   if ((($value & 0xff000000) & 0x80000000) && (!$negative)) {
      $size++;
      $prefix = TRUE;
   }

   # Remove occurances of nine consecutive ones (if negative) or zeros
   # from the most significant end of the two's complement integer.

   while ((((!($value & 0xff800000))) ||
           ((($value & 0xff800000) == 0xff800000) && ($negative))) &&
           ($size > 1))
   {
      $size--;
      $value <<= 8;
   }

   # Add a zero byte so the integer is decoded as a positive value
   if ($prefix) {
      $bytes = pack('x');
      $size--;
   }

   # Build the integer
   while ($size-- > 0) {
      $bytes .= pack('C*', (($value & 0xff000000) >> 24));
      $value <<= 8;
   }

   # Encode ASN.1 header
   $this->_prepare_type_length($type, $bytes);
}

sub _prepare_octet_string
{
   my ($this, $value) = @_;

   if (!defined($value)) {
      return $this->_error('OCTET STRING value not defined');
   }

   $this->_prepare_type_length(OCTET_STRING, $value);
}

sub _prepare_hex_string
{
   my ($this, $value) = @_;

   if (!defined($value)) {
      return $this->_error('HEX STRING value not defined');
   }

   $this->_prepare_type_length(OCTET_STRING, pack("H*", $value));
}

sub _prepare_null
{
   $_[0]->_prepare_type_length(NULL, '');
}

# [...]

#
# Abstract Syntax Notation One (ASN.1) utility functions
#

{
   my $types = {
      INTEGER,            'INTEGER',
      OCTET_STRING,       'OCTET STRING',
      NULL,               'NULL',
      OBJECT_IDENTIFIER,  'OBJECT IDENTIFIER',
      SEQUENCE,           'SEQUENCE',
      IPADDRESS,          'IpAddress',
      COUNTER,            'Counter',
      GAUGE,              'Gauge',
      TIMETICKS,          'TimeTicks',
      OPAQUE,             'Opaque',
      COUNTER64,          'Counter64',
      NOSUCHOBJECT,       'noSuchObject',
      NOSUCHINSTANCE,     'noSuchInstance',
      ENDOFMIBVIEW,       'endOfMibView',
      GET_REQUEST,        'GetRequest-PDU',
      GET_NEXT_REQUEST,   'GetNextRequest-PDU',
      GET_RESPONSE,       'GetResponse-PDU',
      SET_REQUEST,        'SetRequest-PDU',
      TRAP,               'Trap-PDU',
      GET_BULK_REQUEST,   'GetBulkRequest-PDU',
      INFORM_REQUEST,     'InformRequest-PDU',
      SNMPV2_TRAP,        'SNMPv2-Trap-PDU',
      REPORT,             'Report-PDU',
      HEX_STRING,         'HEX STRING'
   };

   sub asn1_itoa
   {
      my ($type) = @_;

      return '??' unless (@_ == 1);

      if (exists($types->{$type})) {
         $types->{$type};
      } else {
         sprintf('?? [0x%02x]', $type);
      }
   }
}

sub asn1_ticks_to_time
{
   my $ticks = shift || 0;

   my $days = int($ticks / (24 * 60 * 60 * 100));
   $ticks %= (24 * 60 * 60 * 100);

   my $hours = int($ticks / (60 * 60 * 100));
   $ticks %= (60 * 60 * 100);

   my $minutes = int($ticks / (60 * 100));
   $ticks %= (60 * 100);

   my $seconds = ($ticks / 100);

   if ($days != 0){
      sprintf('%d day%s, %02d:%02d:%05.02f', $days,
         ($days == 1 ? '' : 's'), $hours, $minutes, $seconds);
   } elsif ($hours != 0) {
      sprintf('%d hour%s, %02d:%05.02f', $hours,
         ($hours == 1 ? '' : 's'), $minutes, $seconds);
   } elsif ($minutes != 0) {
      sprintf('%d minute%s, %05.02f', $minutes,
         ($minutes == 1 ? '' : 's'), $seconds);
   } else {
      sprintf('%04.02f second%s', $seconds, ($seconds == 1 ? '' : 's'));
   }
}

#
# Error handlers
#

#[...]
# ============================================================================
1; # [end Net::SNMP::Message] 
```

# oracle11g - 使用 fluentmigrator 在 Oracle 中创建序列

> ID：11341606
> 
> 赞同：3
> 
> 时间：2012-07-05T09:35:34.577
> 
> 标签：oracle11g, fluent-migrator

我是 FluentMigrator 和 Oracle 的新手。我们正在尝试在我们的迁移脚本中支持 MsSql 服务器、Postgres 和 Oracle。

由于NHibernate在Oracle中使用sequence，在另外两个中使用identity，我们需要添加一个sequence；

```
public class CreateTagSystem : Migration
{
    public override void Up()
    {
        IfDatabase("MsSql2008", "Postgres").Create.Table("TestTable").WithColumn("Id").AsInt16().PrimaryKey().Identity();

        IfDatabase("Oracle").Create.Table("TestTable").WithColumn("Id").AsInt16().PrimaryKey();

        IfDatabase("Oracle").Create.Sequence("hibernate_sequence");
    }

    public override void Down()
    {
        Delete.Table("TestTable");
    }
} 
```

这导致;

```
System.NullReferenceException : Object reference not set to an instance of an object.
at FluentMigrator.Runner.Generators.Generic.GenericQuoter.IsQuoted(String name) in D:\Development\Code\GitHub\fluentmigrator\src\FluentMigrator.Runner\Generators\Generic\GenericQuoter.cs: line 105
at FluentMigrator.Runner.Generators.Generic.GenericQuoter.QuoteSchemaName(String schemaName) in D:\Development\Code\GitHub\fluentmigrator\src\FluentMigrator.Runner\Generators\Generic\GenericQuoter.cs: line 183
at FluentMigrator.Runner.Generators.Generic.GenericGenerator.Generate(CreateSequenceExpression expression) in D:\Development\Code\GitHub\fluentmigrator\src\FluentMigrator.Runner\Generators\Generic\GenericGenerator.cs: line 360
at FluentMigrator.Runner.Processors.ProcessorBase.Process(CreateSequenceExpression expression) in ProcessorBase.cs: line 138
at FluentMigrator.Expressions.CreateSequenceExpression.ExecuteWith(IMigrationProcessor processor) in D:\Development\Code\GitHub\fluentmigrator\src\FluentMigrator\Expressions\CreateSequenceExpression.cs: line 17
at FluentMigrator.Runner.MigrationRunner.<>c__DisplayClasse.<ExecuteExpressions>b__b() in MigrationRunner.cs: line 349
at FluentMigrator.Runner.MigrationRunner.AnnounceTime(String message, Action action) in MigrationRunner.cs: line 379
at FluentMigrator.Runner.MigrationRunner.ExecuteExpressions(ICollection`1 expressions) in MigrationRunner.cs: line 362
at FluentMigrator.Runner.MigrationRunner.Up(IMigration migration) in MigrationRunner.cs: line 304
at FluentMigrator.Runner.MigrationRunner.ApplyMigrationUp(Int64 version) in MigrationRunner.cs: line 189
at FluentMigrator.Runner.MigrationRunner.MigrateUp(Boolean useAutomaticTransactionManagement) in MigrationRunner.cs: line 96 
```

查看源代码我需要一个模式（参见 GenericGenerator.cs 第 360 行）？但是在这种情况下，模式是什么？

# playframework - 播放应用程序部署为战争时，资源文件（图像、css、js 等）不加载

> ID：11341610
> 
> 赞同：0
> 
> 时间：2012-07-05T09:35:56.183
> 
> 标签：playframework

我正在使用播放框架。我用 play war [project] -o [war name] 创建了我的项目的战争。它成功了，但是在运行图像期间，没有加载 css 和 js，因为所有内容都放在了 WEB-INF 文件夹中。

任何人都可以帮助我如何使用/创建战争以便它可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T10:06:34.613

我对 .css 文件中的图像有类似的问题。当战争展开时，图片是不可见的。以下是我的解决方案：

1.在**路由**文件中你应该有这一行：

```
GET         /assets/*file       controllers.Assets.at(path="/public", file) 
```

使用您的 .css .js 和图像的实际路径。

2.您应该以这种方式包含**.css**文件：

```
<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/main.css")"> 
```

3\. **Java 脚本**应该被引用到 Play！模板方式如下：

```
<script type="text/javascript" src="@routes.Assets.at("javascripts/myscript.js")"></script> 
```

4\. .css 中**的图片**应使用相对路径引用，因为 .css 文件与图像一样被放置在 assests\ 中：

```
.checked-partial {
    background-image: url("../images/partial.png");
} 
```

5.之后你可以按照你的要求制造战争：*玩战争*

如果您以这种方式配置 .css、.js 和图像，它将在 Play 上运行！网络服务器以及与您的战争有关的其他网络服务器。

# javascript - 如何更改 cloudzoom 中的缩放系数？

> ID：11341612
> 
> 赞同：0
> 
> 时间：2012-07-05T09:36:19.320
> 
> 标签：javascript

我正在使用具有集成 Cloud Zoom 的 Shopware。我已经找到了 Cloud Zoom 的 javascript 和 CSS 表达式，但我找不到更改图像放大系数的选项。

任何帮助将不胜感激。

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:21:17.333

刚刚在谷歌搜索类似的东西时发现了这个问题。作为记录，这里是调整 CloudZoom 参数的方法。在 JS 文件中（例如在您的模板中）使用如下内容：

```
(function($) {
    $.fn.CloudZoom.defaults.zoomWidth = 600;
    $.fn.CloudZoom.defaults.zoomHeight = 370;
    $.fn.CloudZoom.defaults.showTitle = false;
})(jQuery); 
```

# android - Android：微调器文本向右对齐但不居中

> ID：11341613
> 
> 赞同：7
> 
> 时间：2012-07-05T09:36:19.633
> 
> 标签：android, layout, arabic

我完成了我的应用程序的英文版，现在我正在处理阿拉伯语本地化。阿拉伯语是一种从右到左的语言，因此我需要调整布局中的很多内容，包括微调器显示。

我使用了这里提到的相同方法[Android - Text is Pushed to the Left in a Spinner](https://stackoverflow.com/questions/5755506/text-is-pushed-to-the-left-in-a-spinner-android)但我将重力设置为右侧。

这是我的 spinner_item.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:layout_width="fill_parent"
    android:gravity="right" /> 
```

更改了我的代码

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

对此

```
adapter.setDropDownViewResource(R.layout.spinner_item); 
```

我希望我的微调器看起来像我在下面找到的旧英文微调器，

![英语微调器](../Images/587a9285831c3dad7072aaf5ba1ba1ce.png)

但目前看起来是这样的，

![阿拉伯语微调器](../Images/f9e70825317c5e16564b5f8840421f58.png)

如何恢复以下内容：

1.  单选按钮
2.  更大的文本大小
3.  我希望它在如图所示的右侧，但在两个分隔线之间居中。

注意 阿拉伯语的网络服务还没有完成，这就是为什么图像中的数据仍然是英文的。

**更新**

在尝试了 Adil Soomro 的建议后，我得到以下信息，

![微调器半理想](../Images/b8e217e6e15082389355c7217b7f0607.png)

没有单选按钮，边框和第一个字母之间有相当大的空间。

**更新**

在 Adil Soomro 的编辑之后，我现在有了以下内容，

![微调阿拉伯语固定](../Images/ca8e88b7365e64ac916f517a761987d6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T09:52:43.753

您必须使用`CheckedTextView`，它将解决您的所有 3 个问题。

您将放置一个布局 xml，如下所示：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    android:drawableLeft="?android:attr/listChoiceIndicatorSingle"
    android:gravity="right|center_vertical"
    android:singleLine="true"
    android:layout_width="fill_parent"
    android:textSize="20dp"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:ellipsize="marquee" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:28:39.430

试试这个：

```
android:layout_gravity="right" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:50:18.143

更改您的代码

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:layout_width="fill_parent"
    android:gravity="right" /> 
```

到

```
<TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        style="?android:attr/listPreferredItemHeight"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right" /> 
```

# javascript - 谷歌图表辅助轴线图

> ID：11341614
> 
> 赞同：4
> 
> 时间：2012-07-05T09:36:19.887
> 
> 标签：javascript, google-visualization

我目前正在学习一些带有网络编辑的谷歌图表，以扩大我的知识，但我遇到了一个我无法解决的问题。

```
<html>   
<head>     
<script type="text/javascript" src="https://www.google.com/jsapi"></script>    
 <script type="text/javascript">       
 google.load("visualization", "1", {packages:["corechart"]});       
 google.setOnLoadCallback(drawChart);       
 function drawChart() {         
 var data = google.visualization.arrayToDataTable([           
 ['Year', 'Derby', 'Bristol', 'Warrington', 'Indianapolis', 'Dahlewitz', 'Montreal'],           
 ['2012',  143754.00 , 7607.59, 958.51, 6029.12 , 13605.12, 586.00], //continue here!!!!!         
 ['2013',  186065.32, 1674.50, 1823.93, 9574.24, 23935.14, 743.43],          
 ['2014',  251238.53, 0,    0,  10154.41, 19926.63, 363.71],           
 ['2015',  323134.57, 0,    0,  10400.66, 12002.84, 555.86], 
 ['2016',  467058.18, 0,    0,  10529.27, 5844.90,  0] ,
 ['2017',  391209.43, 0,    0,  11072.43, 3603.65,  0] ,
 ['2018',  460257.40, 0,    0,  12031.69, 1833.52,  0] ,
 ['2019',  744114.34, 0,    0,  13012.83, 1517.89,  0] ,
 ['2020',  1484193.59,0,    0,  14274.78, 1292.55,  0]        
 ]);          

 var options = {           
 title: 'Total CPU Hours Per Year By Site',          
 hAxis: {title: 'Year',  titleTextStyle: {color: 'black'}}   

 };          

 var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));        
  chart.draw(data, options);       
  }     
  </script>  
  </head>   
  <body>     
  <div id="chart_div" style="width: 900px; height: 500px;"></div>   
  </body> 
  </html> 
```

我想要做的是在辅助轴（右轴）上获取 Derby 的数据，但是通过 API 我看不到如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:36:01.130

要使用多轴，您需要在选项中设置 Axes 值，声明有多个轴，以及 Series 属性，以指示哪个系列转到哪个轴。实现这一点的代码是将您的选项替换为

```
 var options = {           
    title: 'Total CPU Hours Per Year By Site',          
    hAxis: {title: 'Year',  titleTextStyle: {color: 'black'}}  , 
    series:[
                {targetAxisIndex:1},
                {targetAxisIndex:0},
                {targetAxisIndex:0},
                {targetAxisIndex:0},
                {targetAxisIndex:0},
                {targetAxisIndex:0} 
    ],
    vAxes:[
        {}, // Left axis
        {} // Right axis
    ]
 }; 
```

如果你这样做，你需要确保图表是诚实的，从一个轴到两个轴的变化严重改变了图表给观众的印象，可以用作一种撒谎的统计方式。

# java - 如何使用复合 ID 解决 Session.get() 的奇怪行为？

> ID：11341621
> 
> 赞同：0
> 
> 时间：2012-07-05T09:36:41.703
> 
> 标签：java, hibernate, composite-id

我正在尝试在没有映射复合标识符的情况下声明复合 id 的对象的会话上执行获取。
使用的休眠版本是 3.5.5。

获取代码是通用的，并读取包装实际数据的容器对象：

```
ClassMetadata metadata = 
          session.getSessionFactory().getClassMetadata(wrapper.getDomainClass());
Serializable id = metadata.getIdentifier(wrapper, EntityMode.POJO);
return session.get(wrapper.getDomainClass(), id, LockOptions.UPGRADE); 
```

代码对实际映射一无所知，因此它必须查阅有关 id 的元数据。

如果映射定义如下：

```
<hibernate-mapping default-access="field">
  <class name="Wrapper"
      entity-name="Data"
      table="DATA">
    <composite-id>
      <key-property name="identifier" column="identifier" />
      <key-property name="version" column="version" />
    </composite-id>

    <component name="domainObject" class="Data">
      <property name="source" column="source" />
    </component>                    
  </class>
</hibernate-mapping> 
```

没有复合标识符类，id 等于对象本身并且等于包装器引用。
当我执行 session.get() 而不是从数据库中获取对象时，它返回与传入 id 的对象相同的对象（不是相等的对象，而是对象的相同实例）。
**更新：**实际上 session.get() 从数据库中加载对象，`in`传递的 id 对象并将其返回。我监督最初认为它跳过加载。

到目前为止我发现的解决方案是引入映射的复合标识符并将映射更改为：

```
<hibernate-mapping default-access="field">
  <class name="Wrapper"
      entity-name="Data1"
      table="DATA_1">
    <composite-id  class="SurrogateKey" mapped="true">
      <key-property name="identifier" column="identifier" />
      <key-property name="version" column="version" />
    </composite-id>

    <component name="domainObject" class="Data">
      <property name="source" column="source" />
    </component>                    
  </class>
</hibernate-mapping> 
```

SurrogateKey 被定义为具有两个字段和根据需要的等于/哈希码的对象。
通过 metadata.getIdentifier() 返回的更改 id 是 SurrogateKey 的一个实例，并且 session.get() 从数据库中获取对象（如果存在）。

映射修复的问题是标准和 HQL 的属性名称从**标识符**更改为**id.identifier**，这实际上破坏了许多现有代码。

我目前正在探索的事情是：

1.  有没有办法在不声明 Id 类的情况下使 session.get() 工作（我知道这是一种不鼓励的做法，但所需的更改量可能会令人望而却步）？
2.  替代方案是否可以告诉hibernate像以前一样对待属性，而不添加id。在他们面前？
3.  将hibernate升级到v4（由于依赖项目和审批流程并不容易）？
4.  还有其他可用的选项/解决方法吗？

到目前为止，我只设法使上述解决方案起作用，但我正在寻找侵入性较小的解决方案，并且希望能提供任何线索、建议和指向相关文档的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:49:07.020

你`wrapper`的第一个代码片段是什么？如果它是一个附加实体（我怀疑它是），显然`session.get()`将返回具有相同标识符的附加实体，并且由于标识符是实体本身，它将返回给定的附加实体。会话中任何给定实体总是只有一个实例。

现在，回答您的问题：

1.  AFAIK，它按预期工作。
2.  不。
3.  这是一个问题吗？
4.  最好的解决方法是做正确的事并停止使用复合标识符。按照 Hibernate 的建议，使用单列自动生成的 ID，一切都会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:49:31.460

问题来自使用有意义的对象作为 session.get() 方法的 id。

事实证明 session.get() 有副作用并修改了它的参数（这发生在 PojoInstantiator.instantiate() 的深处）。在加载时，当休眠检测到 id 类等于映射类时，它会跳过实例创建并使用传递给方法的 id 对象而不是实例化新实例。该对象通过数据库覆盖现有字段而得到补充。

解决方案是如果 metadata.getIdentifier() 在没有映射键时返回对象，则创建对象的克隆。该克隆将由 get() 补水并返回。

# ember.js - 查看绑定 Emberjs

> ID：11341622
> 
> 赞同：2
> 
> 时间：2012-07-05T09:36:41.977
> 
> 标签：ember.js

我有一个简单的应用程序，您可以在其中登录它看起来像这样：

```
{{#view App.mainV}}
  {{#if logged}}
     Hey!
  {{else}}
  <!-- Login form here when clicked: App.mainC.login()-->
  {{/if}}
{{/view}} 
```

这是示例控制器：

```
App.mainC = Ember.ArrayController.create({
    login: function(){
        if(ok)//Everything went fine
            App.mainV.logged = true;
    }
}); 
```

这是mainV：

```
App.mainV = Ember.View.extend({
    logged: false,
    test: function()
    {
        console.log('JO');
    }
}); 
```

关于这个应用程序，我有两个问题：

*   为什么当我将记录更改为真实视图时不会更改？
*   如果我调用 App.mainV.test() 我会收到错误消息。为什么？

    TypeError：“App.mainV.test”不是函数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T09:54:32.453

如果要从模板访问视图的属性，则必须以“视图”作为前缀。在您的示例中：`{{#if view.logged}}`.

你不能这样做`App.mainV.test()`，因为`App.mainV`它是一个类，而不是一个实例。你可以做`App.mainV.create().test()`。

并且您应该重命名`App.mainV`以`App.MainV`适应 Ember.js 约定（类名应大写，请参阅[http://www.emberist.com/2012/04/09/naming-conventions.html](http://www.emberist.com/2012/04/09/naming-conventions.html)）

**编辑**：

您的示例中还有另一个问题：控制器尝试修改视图中的值。在 Ember 方式中，您应该将视图的属性绑定到控制器。控制器中的任何更改都将传播到视图：

```
<script type="text/x-handlebars">
{{#view App.MainView}}
    {{#if view.logged}}
        Hey!
    {{else}}
        <!-- Login form here when clicked: App.mainController.login()-->
    {{/if}}
{{/view}}
</script>​

App = Ember.Application.create();

App.mainController = Ember.Controller.create({
    logged: false,
    login: function() {
        this.set('logged', true);
    }
});

App.MainView = Ember.View.extend({
    loggedBinding: 'App.mainController.logged'
});

// change in controller will be propagated to the view
App.mainController.set('lo​gged', true);​​​​​​ 
```

# linux - 在c linux模块中通过UDP套接字发送带有指针字符的结构

> ID：11341623
> 
> 赞同：0
> 
> 时间：2012-07-05T09:36:46.993
> 
> 标签：linux, sockets, module, udp, send

我必须通过 udp 套接字在两台机器之间发送一个结构，我需要的信息是发送一个结构，如下所示：

```
unsigned long x;

unsigned long y;

char *buf; 
```

我必须一次性发送结构。

我的问题是：我如何处理这个结构，例如，设置一个我可以通过套接字发送的变量，特别是变量 buf 的大小不固定

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:39:22.300

您不能发送指针，在您的进程空间之外没有任何意义。相反，您必须对其进行序列化，即复制到一个数组并发送它。在字符串之前，您还需要存储它的长度。你可以试试：

```
char sendbuf[...];
int len = strlen(buf);

memcpy(sendbuf, &x, sizeof(x));
memcpy(sendbuf + sizeof(x), &y, sizeof(y));
memcpy(sendbuf + ..., &len, sizeof(len));

memcpy(sendbuf + ..., buf, len); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:46:07.633

您需要将结构中的所有内容按顺序复制到单独的字符缓冲区中，然后将其写入套接字。（可选）由于结构中的 char* 缓冲区不是固定长度的，因此计算要发送的内容的大小并在消息开头将其写为整数通常是一个好主意，以便在另一端您发送的数据包的长度可以通过您的接收套接字进行验证。

在另一端解包数据时，只需从接收缓冲区的开头开始，然后将 memcpy 数据放入您的值中

字符*消息；// 这是指向您接收到的消息缓冲区开始的指针

```
// TODO: assign message to point at start of your received buffer.

unsigned long xx;
unsigned long yy;
memcpy(&xx,message,sizeof(unsigned long));  // copy bytes of message to xx
message += sizeof(unsigned long);           // move pointer to where yy SHOULD BE 
                                            // within your packet    
memcpy(&yy,nessage,sizeof(unsigned long));  // copy bytes to yy
message += sizeof(unsigned long);           // message now points to start of 
                                            // the string part of your message

int iStringLength =   //  ?????? You need to calculate length of the string
char tempBuffer[1000]; // create a temp buffer this is just for illustration
                       // as 1000 may not be large enough - depends on how long
                       // the string is
memcpy(tempBuffer,message,iStringLength); 
```

然后 xx,yy 包含您的 long 值， tempBuffer 包含字符串。如果您希望字符串在当前范围之外持续存在，那么您需要分配一些内存并将其复制到那里。您可以从整个消息的大小减去 2 个无符号长项的大小来计算此字符串的大小（或者，如果您按照我上面的建议进行操作，则使用数据包中发送的额外项目）。

我希望这能澄清你需要做什么

# java - 将第 3 方 jar 集成到 Eclipse RCP 中

> ID：11341627
> 
> 赞同：0
> 
> 时间：2012-07-05T09:37:08.690
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我的 RCP 需要一些第三方 jar。我想使用产品导出向导创建的 .exe。

我的 3rd 方 jar 位置不固定并且经常更新。所以我无法为依赖 jar 创建插件，因为每次更新任何 jar 时我们都必须为 3rd 方 jar 创建插件。

我在 MANIFEST.MF 中添加了下面的相对路径

```
Bundle-ClassPath: .,
deliverables/DependencyJars/xercesImpl.jar,
deliverables/DependencyJars/xml-apis-1.3.03.jar,
deliverables/DependencyJars/XmlSchema-1.3.2.jar,
deliverables/DependencyJars/xmlsec-1.4.0.jar, 
```

知道如何为 exe 指定类路径，以便 exe 可以在相对路径之上拾取吗？

有什么方法可以让我们从改变位置整合 3rd 方罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:06:52.113

您应该只创建一次包装这些 jar 的插件，然后在更新时替换其中的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:43:54.693

您必须确保 JAR 包含在二进制构建中。打开您的`MANIFEST.MF`or`plugin.xml`并转到**Build**选项卡。确保在**Binary Build**部分中选择了 JAR。

# .htaccess - 继承.htaccess 中的缓存选项？

> ID：11341630
> 
> 赞同：1
> 
> 时间：2012-07-05T09:37:17.320
> 
> 标签：.htaccess

我的根文件夹上的 .htaccess 包含以下主要处理缓存过期的代码：

```
# Disable Etags
Header unset ETag
FileETag None

# Expires
ExpiresActive On
ExpiresDefault "access plus 1 year"
Header unset Last-Modified
Header set Cache-Control "public"

<FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi|html?)$">
Header set Cache-Control "private, must-revalidate, proxy-revalidate"
ExpiresDefault A0

ExpiresActive Off
</FilesMatch>

<FilesMatch ".(css|js)$">
Header set Expires "access plus 1 day"
</FilesMatch>

# Enable Compresion
<FilesMatch ".(js|css|html|htm|php|xml)$">
SetOutputFilter DEFLATE
</FilesMatch> 
```

我目前正在将代码复制粘贴到根目录内的文件夹中。如何在位于根目录内的文件夹中的 .htaccess 上继承此配置？

# mysql - 为什么mysql在使用视图时忽略索引

> ID：11341635
> 
> 赞同：3
> 
> 时间：2012-07-05T09:37:43.890
> 
> 标签：mysql

为什么mysql在使用视图时不使用相同的索引，就像在运行查询whitout视图时一样：

在我发表观点之前我的查询：

```
DESCRIBE SELECT membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death, COALESCE(memberships.death, '2099-12-31 23:59:59') AS to_date 
FROM memberships
LEFT JOIN groups ON (group_id = target_id)
LEFT JOIN citizens ON (citizen_id = member_id)
WHERE target_type = 31 AND member_type = 11
AND member_id = 5613956;
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
| id | select_type | table       | type   | possible_keys | key        | key_len | ref                                 | rows | Extra                    |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
|  1 | SIMPLE      | memberships | ref    | member,target | member     | 10      | const,const                         |    6 | Using where; Using index |
|  1 | SIMPLE      | groups      | eq_ref | group_id      | group_id   | 8       | interfaceways.memberships.target_id |    1 |                          |
|  1 | SIMPLE      | citizens    | const  | citizen_id    | citizen_id | 8       | const                               |    1 |                          |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+ 
```

它可以工作，而且速度很快，每次我想调试成员时，它的编写时间都会有点长。所以我根据该查询创建了一个视图：

```
CREATE VIEW group_members AS 
SELECT membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death, COALESCE(memberships.death, '2099-12-31 23:59:59') AS to_date 
FROM memberships 
LEFT JOIN groups ON (group_id = target_id) 
LEFT JOIN citizens ON (citizen_id = member_id) 
WHERE target_type = 31 AND member_type = 11; 
```

但是当我尝试获取 5613956 的会员资格时，我得到了这个：

```
DESCRIBE SELECT * FROM group_members WHERE citizen_id = 5613956;
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+
| id | select_type | table       | type   | possible_keys | key      | key_len | ref                                 | rows    | Extra                    |
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+
|  1 | SIMPLE      | memberships | ref    | member,target | target   | 1       | const                               |    5269 | Using where; Using index |
|  1 | SIMPLE      | groups      | eq_ref | group_id      | group_id | 8       | interfaceways.memberships.target_id |       1 |                          |
|  1 | SIMPLE      | citizens    | ALL    | NULL          | NULL     | NULL    | NULL                                | 4766712 | Using where              |
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+ 
```

为什么公民的“possible_keys”为NULL？

字段citizen_id 是`SERIAL (= BIGINT(20) UNSIGNED UNIQUE NOT NULL AUTO_INCREMENT)`

* * *

**编辑 1**

如果我在第一个查询中使用 member_id 的citizen_id，我得到：

```
DESCRIBE SELECT membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death, COALESCE(memberships.death, '2099-12-31 23:59:59') AS to_date
FROM memberships
LEFT JOIN groups ON (group_id = target_id)
LEFT JOIN citizens ON (citizen_id = member_id)
WHERE target_type = 31 AND member_type = 11
AND citizen_id = 5613956;
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
| id | select_type | table       | type   | possible_keys | key        | key_len | ref                                 | rows | Extra                    |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
|  1 | SIMPLE      | citizens    | const  | citizen_id    | citizen_id | 8       | const                               |    1 |                          |
|  1 | SIMPLE      | memberships | ref    | member,target | member     | 10      | const,const                         |    6 | Using where; Using index |
|  1 | SIMPLE      | groups      | eq_ref | group_id      | group_id   | 8       | interfaceways.memberships.target_id |    1 |                          |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+ 
```

**编辑 2**

A`RIGHT JOIN`将问题移至成员表 insted。（1054 x 需要的行，而之前的 4 766 712 x 需要的行）

```
CREATE VIEW group_members AS 
SELECT membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death, COALESCE(memberships.death, '2099-12-31 23:59:59') AS to_date 
FROM memberships 
RIGHT JOIN groups ON (group_id = target_id) 
RIGHT JOIN citizens ON (citizen_id = member_id) 
WHERE target_type = 31 AND member_type = 11;

DESCRIBE SELECT * FROM group_members WHERE citizen_id = 5613956;
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+-------+--------------------------+
| id | select_type | table       | type   | possible_keys | key        | key_len | ref                                 | rows  | Extra                    |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+-------+--------------------------+
|  1 | SIMPLE      | citizens    | const  | citizen_id    | citizen_id | 8       | const                               |     1 |                          |
|  1 | SIMPLE      | memberships | index  | NULL          | member     | 45      | NULL                                | 10540 | Using where; Using index |
|  1 | SIMPLE      | groups      | eq_ref | group_id      | group_id   | 8       | interfaceways.memberships.target_id |     1 |                          |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+-------+--------------------------+ 
```

**编辑 3** 一个有趣的注释：这更快，因为它使用索引，视图本身失败

```
SELECT * FROM (SELECT * FROM group_members) AS t WHERE citizen_id = 5613956;
6 rows in set (0.03 sec)

DESCRIBE SELECT * FROM (SELECT * FROM group_members) AS t WHERE citizen_id = 5613956;
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
| id | select_type | table       | type   | possible_keys | key        | key_len | ref                                 | rows | Extra                    |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+
|  1 | PRIMARY     | <derived2>  | ALL    | NULL          | NULL       | NULL    | NULL                                | 4423 | Using where              |
|  2 | DERIVED     | memberships | ref    | member,target | target     | 1       |                                     | 5270 | Using where; Using index |
|  2 | DERIVED     | groups      | eq_ref | group_id      | group_id   | 8       | interfaceways.memberships.target_id |    1 |                          |
|  2 | DERIVED     | citizens    | eq_ref | citizen_id    | citizen_id | 8       | interfaceways.memberships.member_id |    1 |                          |
+----+-------------+-------------+--------+---------------+------------+---------+-------------------------------------+------+--------------------------+ 
```

**编辑 4** YaKs 评论

```
CREATE VIEW group_members AS 
SELECT membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death
FROM memberships 
LEFT JOIN groups ON (group_id = target_id) 
LEFT JOIN citizens ON (citizen_id = member_id) 
WHERE target_type = 31 AND member_type = 11;

DESCRIBE SELECT * FROM group_members WHERE citizen_id = 5613956;
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+
| id | select_type | table       | type   | possible_keys | key      | key_len | ref                                 | rows    | Extra                    |
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+
|  1 | SIMPLE      | memberships | ref    | member,target | target   | 1       | const                               |    5270 | Using where; Using index |
|  1 | SIMPLE      | groups      | eq_ref | group_id      | group_id | 8       | interfaceways.memberships.target_id |       1 |                          |
|  1 | SIMPLE      | citizens    | ALL    | NULL          | NULL     | NULL    | NULL                                | 4766736 | Using where              |
+----+-------------+-------------+--------+---------------+----------+---------+-------------------------------------+---------+--------------------------+ 
```

**编辑 5** jcho360 评论

```
ANALYZE TABLE group_members;
+-----------------------------+---------+----------+-------------------------------------------------+
| Table                       | Op      | Msg_type | Msg_text                                        |
+-----------------------------+---------+----------+-------------------------------------------------+
| interfaceways.group_members | analyze | Error    | 'interfaceways.group_members' is not BASE TABLE |
| interfaceways.group_members | analyze | error    | Corrupt                                         |
+-----------------------------+---------+----------+-------------------------------------------------+
2 rows in set (0.00 sec)

ANALYZE TABLE memberships;
+---------------------------+---------+----------+----------+
| Table                     | Op      | Msg_type | Msg_text |
+---------------------------+---------+----------+----------+
| interfaceways.memberships | analyze | status   | OK       |
+---------------------------+---------+----------+----------+
1 row in set (0.02 sec)

ANALYZE TABLE citizens;
+------------------------+---------+----------+----------+
| Table                  | Op      | Msg_type | Msg_text |
+------------------------+---------+----------+----------+
| interfaceways.citizens | analyze | status   | OK       |
+------------------------+---------+----------+----------+
1 row in set (0.11 sec)

ANALYZE TABLE groups;
+----------------------+---------+----------+----------+
| Table                | Op      | Msg_type | Msg_text |
+----------------------+---------+----------+----------+
| interfaceways.groups | analyze | status   | OK       |
+----------------------+---------+----------+----------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:27:23.133

我打算添加评论，但它太多了。

尝试这个：

```
Select * from 
(SELECT member_id, membership_id, group_id, groups.name AS group_name, citizen_id, citizens.name, citizens.family, citizens.identification, memberships.birth, memberships.death, COALESCE(memberships.death, '2099-12-31 23:59:59') AS to_date 
FROM memberships
LEFT JOIN groups ON (group_id = target_id)
LEFT JOIN citizens ON (citizen_id = member_id)
WHERE target_type = 31 AND member_type = 11) as table1
where member_id = 5613956; 
```

如果您愿意，您可以对该查询进行描述。我认为视图表也会发生同样的情况，因此`where member_id=5613956`不会使用公民 id 索引，因为它没有在 where 条件中使用来显示该查询。因此查询不完全相同。

# twig - Twig - 遍历数组的一部分

> ID：11341636
> 
> 赞同：5
> 
> 时间：2012-07-05T09:37:46.360
> 
> 标签：twig

我已经可以做的是：

```
{% for _item in objects %}
    {{ _item.id }}
{% endfor %} 
```

或这个：

```
{% for i in 0..objects|length-1 %}
    {{ objects[i].id }}
{% endfor %} 
```

循环整个数组。

我想做的是：

*   循环遍历数组的一部分
*   如果到达数组的末尾：停止（而不是抛出异常）

有点像这样 - 取决于哪个更小（想象只有 5 个项目）：

```
{% for i in 0.. (10 OR objects|length-1) %}
    {{ objects[i].id }}
{% endfor %} 
```

写这个的最简单/最短的方法是什么？

**编辑**

当然，我可以在我的控制器中对其进行测试，然后将结果作为变量传递给模板，但是没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T06:23:18.963

您正在寻找[切片](http://twig.sensiolabs.org/doc/filters/slice.html)过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-24T18:17:22.237

为将来可能需要此内容的任何人发布。

我使用以下切片方法完成了此操作，以获取数组的一半，然后是另一半。我需要这个来为数组的前半部分设置一个类，不管数字是多少（在我的例子中是导航子项）。记得`Array`根据需要更新

```
{% set half_first = Array|slice(0, Array|length / 2) %}
{% set half_second = Array|slice(Array|length / 2) %} 
```

# ruby-on-rails-3 - Rails Active Record 不区分大小写的查找

> ID：11341637
> 
> 赞同：10
> 
> 时间：2012-07-05T09:37:47.617
> 
> 标签：ruby-on-rails-3, activerecord, find

虽然总的来说我喜欢在我的数据库中区分大小写，但有几次我觉得它很痛苦。user_name 和 email 是我不想担心的字段的好例子——尤其是在搜索时。

在保存之前使用以下内容很容易将字符串小写：

before_save 做 self.email.downcase！结尾

这样，用户名和电子邮件始终以小写形式保存。但是 find_by_user_name 和 find_by_email 的最佳方法是什么？我当然可以记住总是将我传递给这些方法的字符串小写——但这似乎不是很干。

一旦我缩小电子邮件的大小写，我就考虑过覆盖 find_by_email 并用 super 调用原始文件，但我没有运气弄清楚这一点。

那么，最好的方法是什么？

PS 我不认为像这样的相关帖子（[如何为 Rails 3 编写不区分大小写的 find_by_email](https://stackoverflow.com/questions/7963477/how-can-i-write-a-case-insensitive-find-by-email-for-rails-3)）试图解决同样的问题。此处带有“较低”的自定义 sql 对我来说是毫无意义的，因为我已经确保所有这些值都较低 - 它是现在进入的那个（可能来自用户输入它的表单），我需要小写。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-18T16:09:10.073

使用 PostgreSQL，您可以：

```
User.where("email ILIKE ?", email).first 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-05T09:48:17.503

其中之一应该是好的：

```
def self.find_by_lower_email(email)
  User.find_by_email(email.downcase)
end
# OR
def self.find_by_email(email)
  User.find(:all, :conditions => ["email = lower(?)", email]) 
end 
```

**更新**：

find_by_... 函数实际上是不存在的。当您调用其中之一时，ActiveRecord::Base 会在`method_missing`方法中捕获您的调用，并且如果名称格式正确（包含列名等），则会为该类创建适当的 find 方法。之后它就会存在。

如果您有`find_by_email`，默认情况下会调用它。如果它调用`super`，则意味着您尝试调用`ActiveRecord::Base.find_by_email`，它不存在。`missing_method`捕获它，并创建（实际上覆盖您的）实现`find_by_email`。这就是为什么在那里称呼 super 不好。如果您使用自己的实现来通过电子邮件查找，就像我在第二部分中所写的那样，那么它将非常有效。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-15T18:41:58.463

我做了这样的事情：

```
def self.find_by_email(email)
  Member.find(:first, :conditions => ["lower(email) =?", email.downcase])
end 
```

您可以就这是否正确进行辩论，但通常应该将电子邮件规范化到数据库中以防止需要这样做。

编辑：Rails 3：

```
Member.where("lower(email) =?", email.downcase).first 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T12:23:58.760

这个对我有用！谢谢，但使用较低（：xxx）。

Client.includes(:responsibles).where(["lower(name) || lower(contact) || cnpj || clients.rg || rg ILIKE ?", "%#{params[:search]}%"] )

# c# - 如何从richtextbox 中读取特殊对象并将其存储在Access 中？

> ID：11341640
> 
> 赞同：0
> 
> 时间：2012-07-05T09:38:02.123
> 
> 标签：c#, winforms, ms-access, ms-word, richtextbox

我有一个要求，我需要从用户那里获取数学表达式，他们使用 Microsoft Equation Editor 并将其粘贴到应用程序中`inputbox(Rich textbox)`并将其存储在 Access 数据库中。稍后我需要通过读取数据在 Office Word doc 中生成报告。我从richtextbox 中读取数据，`byte[]`但它只读取普通文本而不是数学表达式。

# java - Twitter，获取过去 24 小时内的所有推文

> ID：11341647
> 
> 赞同：1
> 
> 时间：2012-07-05T09:38:20.143
> 
> 标签：java, twitter, tweets

我正在开发一个需要显示某个用户在过去 24 小时内发布的所有推文的应用程序。有没有使用 REST-API 的便捷方式？我想避免使用[时间线](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)的某种缓存机制。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:57:06.987

您可以使用 Twitter REST API 做的唯一事情是这样的：

```
Timeline resTimeline = downloadTimeline();
Tweet lastTweet = resTimeline.get(resTimeline.size() - 1);

while (lastTweet is younger than 24 hours) {
    TweetID lastTweetID = lastTweet.id;
    Timeline bufferTimeline = downloadTimeline(max_id = lastTweetID);
    resTimeline.addAll(bufferTimeline);
    lastTweet = resTimeline.get(resTimeline.size() - 1);
}

return resTimeline; 
```

# javascript - 使用链接的类更改背景

> ID：11341649
> 
> 赞同：0
> 
> 时间：2012-07-05T09:38:32.293
> 
> 标签：javascript, html, css, background

首先，对不起我的英语，我是法国人，所以..

这是我的问题。我有一个菜单，其中一个 class="selected" 用于活动项目。我有这个类的自定义 css。它有效，所以，这没关系。但是，我希望页面有不同的主体背景。例如，page1 必须是灰色的，page2 必须是黑色的，等等。

但是，我不能在我的正文中添加一个类（然后，用 css 更改背景），因为我将所有页面加载到同一个 index.php 文件中。

我认为我可以用一点 javascript 来解决我的问题？哪个将获得哪个项目具有“选定”类，并应用自定义主体的背景

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:46:09.317

可以有很多其他不同的方法来做到这一点。这是一个想法。

在使用 Jquery 的 $(document).get 加载页面时，您可以获得选定的菜单。这是一个关于整体的粗略想法。

```
<ul>
<li bodybgcolor="red" class="selected"></li>
<li bodybgcolor="green"></li>
<li bodybgcolor="yell"></li>
<ul>

 $(document).ready(function() { 
 bodybgcolor =   $(.selected).attr("bodybgcolor");
 $("body").css('background-color', 'blue');
 } 
```

您可以获取 class=selected 及其 bodybgcolor 属性来设置主体颜色。

**从服务器端：** 如果您正在动态生成菜单并在其中标记所选类，那么当时您在 $bodybgcolor 中定义了 body bg 颜色，并且可以在您的 body 颜色或样式中使用相同的颜色。

```
<body background=""=<?php  echo $bodybgcolor; ?>> 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:57:22.580

用 jquery 试试这个：

```
$("#id_of_what_you_want_to_change).css({background: url("image.jpg")}); 
```

对于每一页：

在页面加载时执行此操作，假设您有一系列背景图像，每个图像都有相应页面的名称：

```
 jQuery(function($){
var title = $(this).attr('title');

        loadbackground(title);      
    });
function loadbackground(title)
{
$("body").css({background: url(title+".jpg")});
} 
```

# asp.net-mvc - ActionFilter OnActionExecuted 中的 ViewBag 为空

> ID：11341652
> 
> 赞同：2
> 
> 时间：2012-07-05T09:38:38.287
> 
> 标签：asp.net-mvc, action-filter

我需要通过 ASP.NET MVC 应用程序记录用户的旅程。我正在使用全局 ActionFilter 和 log4net。我需要能够`ViewBag.Title`从视图中设置的 ViewBag 中读取值（特别是）。目前 ViewBag 是空的。

```
public class UserActivityFilter : IActionFilter
{
    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var properties = new Dictionary<string, string>();
        if (filterContext.Result is ViewResult)
        {
            var action = filterContext.Result as ViewResult;
            properties.Add("Page.Title", action.ViewBag.Title);
        }
        // Log4net stuff goes here
    }
} 
```

我的观点一般有以下几种形式：

```
@model Foo.BarViewModel
@{
    ViewBag.Title = "Application: " + Model.Name;
}

@Html.DisplayForModel() 
```

是否可以读取视图中设置的 ViewBag 中的值？

# php - 限制文件下载速度的好处？

> ID：11341656
> 
> 赞同：0
> 
> 时间：2012-07-05T09:38:44.850
> 
> 标签：php, download, nginx

我有一个文件服务器，想尽我所能优化它，我正在考虑限制文件的下载速度（通过 PHP），想知道这样做有什么好处。是的，它可能会使用更少的 RAM，但可以建立更多的人；那是对的吗？

我正在使用最新的 PHP 运行 Nginx。

## 编辑

我刚刚检查了我可以通过 Nginx 进行带宽限制，所以我可以这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:45:40.923

为什么它会使用更少的 RAM？如果您将文件从磁盘流式传输到网络端口，则实际上根本不需要 RAM。但是，如果您通过 PHP 执行此操作，则需要保持 PHP 实例运行，这会占用一些 RAM。如果您*放慢速度*，该实例将运行更长时间。越来越多的实例将同时运行，所有这些都会占用越来越多的 RAM。

您最好的策略是尽可能快地处理请求，因为这样它们就消失了，您可以停止使用系统资源来处理它们。您的用户的频率不会改变，您处理这些用户的速度越慢，他们使用资源的时间就越长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T13:51:58.763

除了@deceze 写的 - 在你开始“优化”之前弄清楚你的限制资源是什么。

带宽限制可能会占用服务器上更多的内存/CPU 资源（因为进程可能正在等待网络 I/O）。除非您确定地知道网络带宽是问题所在（如果是，您的文件服务器不是您应该优化的 - 您应该改进网络），否则它绝对不会有任何好处。

# notepad++ - 一次性更改多个文件的 EOL

> ID：11341660
> 
> 赞同：104
> 
> 时间：2012-07-05T09:38:59.333
> 
> 标签：notepad++, batch-processing, eol

Notepad ++（甚至使用其他工具）中有什么方法可以一次更改**多个文件上**自动结束的行吗？

即将windows EOL ( `CRLF`) 和 UNIX EOL ( `LF`) 文件的混合转换为所有 Windows EOL ( `CRLF`)

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-05T09:46:06.063

*Replace*对话框可以处理 EOL 等扩展字符。只需将“搜索模式”更改为“扩展”，您就可以使用 EOL（Windows 中的 \r\n 或 Unix 中的 \n）、制表符 (\t) 等。

您还可以使用对话框的*“在文件中查找”*选项卡来跨多个文件进行替换。

![截屏](../Images/fc77dcd343254ccbffedfa899abcff91.png)

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-07-05T09:42:17.830

我有记事本++ 6.1.2。
在“编辑”菜单中，您有完全符合您需要的“EOL 转换”。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2014-08-03T21:28:29.000

使用“在文件中查找”功能 (Ctrl + Shift + F)。将左下角的搜索模式更改为“正则表达式”。

在“查找内容”框中，使用以下模式：

```
(?<!\r)\n 
```

用。。。来代替：

```
\r\n 
```

选择您的目录并指定任何文件类型过滤器。如果需要，请选中“在所有子文件夹中”。单击“在文件中替换”。

这样做是用 \r\n 替换当前没有以回车符 (\r) 开头的任何换行符 (\n)。所以它不会匹配已经是 Windows 样式的行尾。

![在此处输入图像描述](../Images/4765aeefa2a9cef4aa423ce4994ba4b8.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-07-24T03:28:16.260

使用正则表达式替换所有

```
(\r?\n)|(\r\n?) 
```

至

```
\r\n 
```

这会将所有可能的行结束模式（单个 \r、\n 或 \r\n）匹配回 \r\n (Windows)。

要对多个文件进行操作，请执行以下任一操作：

*   使用“替换”选项卡中的“全部替换所有打开的文档”。您必须先将所有文件拖放到 Notepad++ 中。您可以控制要操作的文件，但如果有数百或数千个文件可能会很慢。
*   “在文件中查找”选项卡中的“在文件中替换”，按您选择的文件过滤器，例如，指定目录下的 *.cpp *.cs。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-02-05T10:21:15.057

在谷歌搜索 1 小时后，我为多个文件/文件夹找到的唯一**可行的解​​决方案是：**

*   安装[PyCham](https://www.jetbrains.com/pycharm/)试用模式，
*   打开并选择您的项目文件夹/文件夹并按照屏幕截图

[![在此处输入图像描述](../Images/5dd6c50c6451ef03cbf3ef1ec8001494.png)](https://i.stack.imgur.com/85plT.jpg)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-03T16:32:54.763

通过这个[讨论](https://stackoverflow.com/questions/16239551/eol-conversion-in-notepad)找到了这个解决方案：

> 您还可以通过“设置”->“首选项”->“新建文档/默认目录”在 notepad++ 中设置默认 EOL，然后在“格式”框下选择“Unix/OSX”。

注意：始终可以使用命令行使用带外选项：

```
unix2dos *.cmd
dos2unix *.sh 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-07T22:02:12.930

将多个文件转换为一个目录并递归。只需在 Notepad ++ 上安装 PythonScript，然后使用下面的脚本

[https://gist.github.com/bjverde/583c2ee8b386994f3a1f8acdea3b7ed2](https://gist.github.com/bjverde/583c2ee8b386994f3a1f8acdea3b7ed2)

# django - Django - 覆盖管理站点的登录表单

> ID：11341663
> 
> 赞同：11
> 
> 时间：2012-07-05T09:39:08.993
> 
> 标签：django, django-admin, django-authentication

我目前正在尝试在登录到管理站点时覆盖 Django 1.4 中使用的默认表单（我的站点使用选择加入双因素身份验证的用户所需的额外“令牌”字段，并且对于站点工作人员是强制性的）。Django 的默认表单不支持我所需要的。目前，我的`templates/`目录中有一个名为的文件`templates/admin/login.html`，它似乎正确地覆盖了与我在网站其余部分中使用的模板一起使用的模板。该文件的内容如下：

```
# admin/login.html:
{% extends "login.html" %} 
```

实际登录表单如下：

```
# login.html:
{% load url from future %}<!DOCTYPE html>
<html>
    <head>
        <title>Please log in</title>
    </head>
    <body>
        <div id="loginform">
            <form method="post" action="{% url 'id.views.auth' %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ next }}" />
                {{ form.username.label_tag }}<br/>
                {{ form.username }}<br/>
                {{ form.password.label_tag }}<br/>
                {{ form.password }}<br/>
                {{ form.token.label_tag }}<br/>
                {{ form.token }}<br/>
                <input type="submit" value="Log In" />
           </form>
        </div>
    </body>
</html> 
```

我的问题是提供的表单在使用我的正常登录 URL 访问时工作得非常好，因为我提供自己`AuthenticationForm`的表单作为要显示的表单，但是通过 Django Admin 登录路由，Django 喜欢向这个模板提供它自己的表单，因此只有`username`和`password`字段渲染。有什么办法可以使这项工作，还是我最好将HTML字段“硬编码”到表单中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-09-12T13:38:05.467

Holá
我找到了一个非常简单的解决方案。
您只需要修改项目的 urls.py 文件（注意，不是应用程序）

1.  在您的项目文件夹中找到文件 urls.py。
2.  将此行添加到导入部分
    `from your_app_name import views`
3.  找到这条线
    `url(r'^admin/', include(admin.site.urls))`
4.  在该行上方添加以下内容
    `url(r'^admin/login/', views.your_login_view),`

这是一个例子

```
from django.conf.urls import include, url
from django.contrib import admin

from your_app import views

urlpatterns = [
    url(r'^your_app_start/', include('your_app.urls',namespace="your_app_name")),

    url(r'^admin/login/', views.your_app_login),
    url(r'^admin/', include(admin.site.urls)),
] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-05T15:13:23.383

`AdminSite`有一个`login_form`属性，您可以使用它来覆盖所使用的表单。

子类`AdminSite`，然后使用您的子类的实例，而不是`django.contrib.admin.site`在管理员、urls.py 等中注册您的模型。

这一切都在[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adminsite-objects)中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-11T13:00:26.620

This code in `urls.py` works fine for me (Django version 1.5.1):

```
from django.contrib import admin
from my.forms import AuthenticationForm

admin.autodiscover()
admin.site.login_form = AuthenticationForm 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-10T13:26:47.903

我知道这是一个旧线程，但我想添加一些它帮助我找到的东西，以防它可以帮助其他人。

我正在使用特殊的远程身份验证（Shibboleth）并覆盖管理员 login_form 是不够的。我有一个设置 cookie 并返回变量并重定向到远程身份验证提供程序等的视图。

所以我这样做的方式是：

```
from my_app.views import user_login, user_logout
admin.autodiscover()
admin.site.login = user_login
admin.site.logout = user_logout 
```

效果很好！感谢@dgk

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T11:58:59.000

也许使用模板标签来获取您的自定义`AuthenticationForm`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-16T07:37:32.117

我重定向到一个唯一的登录网址（我正在使用 django 2.1 和 python 3.6 f-strings）：

```
from apps import admin
from django.urls import path, include
from django.shortcuts import redirect

urlpatterns = [
    path(
        'admin/login/',
        lambda r: redirect(
            f"/login?{r.META['QUERY_STRING']}" if r.META['QUERY_STRING'] \
            else '/login'
        )
    ),
    path('admin/', admin.site.urls),
] 
```

# windows-phone-7 - 如何获取 Google Talk api 密钥？

> ID：11341664
> 
> 赞同：0
> 
> 时间：2012-07-05T09:39:09.940
> 
> 标签：windows-phone-7, windows-phone-7.1, google-plus, flurry, google-talk

我正在为 WP7 开发一个 Google Talk 应用程序。如何获得 Google Talk api 密钥、flurry api 密钥和 plus api 密钥？我找不到任何地方可以拿到这些钥匙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:55:09.837

您不需要 api 密钥！您只需要遵守[XMPP 规范](http://xmpp.org/xmpp-protocols/rfcs/)。如果您想为 wp7 开发 Gtalk 客户端，这两个链接应该会派上用场：

[https://developers.google.com/talk/talk_developers_home](https://developers.google.com/talk/talk_developers_home)

[http://www.programmableweb.com/api/google-talk](http://www.programmableweb.com/api/google-talk)

我经常使用第二个，因为它提供了有关各种 API 的有用信息，因此可以作为入门知识指南！

# php - 这个 PHP 验证码脚本有什么问题？

> ID：11341666
> 
> 赞同：1
> 
> 时间：2012-07-05T09:39:25.537
> 
> 标签：php, session, captcha

我已经使用这个脚本很长时间了，它在 99% 的情况下都能完美运行。它对用户来说简单明了，我想继续使用它。

但是，偶尔有一个稀疏的用户告诉我，当数字正确时，系统不接受他的验证码（错误代码）。每次我都在检查他们的 cookie 设置、清除缓存等，但在这些情况下似乎没有任何效果。

因此，我的问题是，这个脚本的代码中是否有任何原因可以解释在特殊情况下出现故障？

```
session_start();

$randomnr = rand(1000, 9999);
$_SESSION['randomnr2'] = md5($randomnr);

$im = imagecreatetruecolor(100, 28);
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0,0,0);

imagefilledrectangle($im, 0, 0, 200, 35, $black);

$font = '/img/captcha/font.ttf';

imagettftext($im, 30, 0, 10, 40, $grey, $font, $randomnr);
imagettftext($im, 20, 3, 18, 25, $white, $font, $randomnr);

// Prevent caching
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past3
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

header ("Content-type: image/gif");

imagegif($im);
imagedestroy($im); 
```

然后，在我的表单中，我将此脚本称为验证码图像的来源。发送表单后，以这种方式检查验证码：

```
if(md5($_POST['norobot']) != $_SESSION['randomnr2']) {
    echo 'Wrong captcha!';
} 
```

请注意，`session_start();`在表单页面和表单结果页面上调用。

如果有人可以查明此脚本中的潜在错误原因，我将不胜感激！

PS：我知道验证码脚本的缺点。我知道某些机器人仍然可以读出它们。我不想使用 Recaptcha，因为它对我的用户来说太难了（不同的语言 + 很多次老用户）。我也知道 md5 很容易解密。

* * *

编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑

* * *

按照Ugo Méda的说法，我一直在做一些实验。这是我创建的（为方便起见进行了简化）：

表格

```
// Insert a random number of four digits into database, along with current time
$query   = 'INSERT INTO captcha (number, created_date, posted) VALUES ("'.rand(1000, 9999).'", NOW(),0)';
$result  = mysql_query($query);

// Retrieve the id of the inserted number
$captcha_uid = mysql_insert_id();

$output .= '<label for="norobot"> Enter spam protection code';
// Send id to captcha script
$output .= '<img src="/img/captcha/captcha.php?number='.$captcha_uid.'" />'; 
// Hidden field with id 
$output .= '<input type="hidden" name="captcha_uid" value="'.$captcha_uid.'" />'; 
$output .= '<input type="text" name="norobot" class="norobot" id="norobot" maxlength="4" required  />';
$output .= '</label>';

echo $output; 
```

验证码脚本

```
$font = '/img/captcha/font.ttf';

connect();
// Find the number associated to the captcha id
$query = 'SELECT number FROM captcha WHERE uid = "'.mysql_real_escape_string($_GET['number']).'" LIMIT 1';
$result = mysql_query($query) or trigger_error(__FUNCTION__.'<hr />'.mysql_error().'<hr />'.$query);
if (mysql_num_rows($result) != 0){          
    while($row = mysql_fetch_assoc($result)){
        $number = $row['number'];
    }
} 
disconnect();

$im     = imagecreatetruecolor(100, 28);
$white  = imagecolorallocate($im, 255, 255, 255);
$grey   = imagecolorallocate($im, 128, 128, 128);
$black  = imagecolorallocate($im, 0,0,0);

imagefilledrectangle($im, 0, 0, 200, 35, $black);
imagettftext($im, 30, 0, 10, 40, $grey, $font, $number);
imagettftext($im, 20, 3, 18, 25, $white, $font, $number);

// Generate the image from the number retrieved out of database
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past3
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
header ("Content-type: image/gif");

imagegif($im);
imagedestroy($im); 
```

表格的结果

```
function get_captcha_number($captcha_uid) {
    $query = 'SELECT number FROM captcha WHERE uid = "'.mysql_real_escape_string($captcha_uid).'" LIMIT 1';
    $result = mysql_query($query);
    if (mysql_num_rows($result) != 0){          
        while($row = mysql_fetch_assoc($result)){
            return $row['number'];
        }
    } 
    // Here I would later also enter the DELETE QUERY mentioned above...
}
if($_POST['norobot'] != get_captcha_number($_POST['captcha_uid'])) {
    echo 'Captcha error'
    exit;
} 
```

这工作得很好，所以非常感谢这个解决方案。

但是，我在这里看到了一些潜在的缺点。我注意到至少有 4 个查询，并且感觉我们正在做的事情有点资源密集。此外，当用户多次重新加载同一页面时（只是为了成为一个混蛋），数据库会很快填满。当然，这将在下一次提交表单时全部删除，但尽管如此，你能和我一起讨论一下这个可能的替代方案吗？

我知道一个人通常不应该加密/解密。然而，由于验证码本质上是有缺陷的（因为机器人的图像读取），我们不能通过加密和解密发送到`captcha.php`脚本的参数来简化过程吗？

如果我们这样做（按照[Alix Axel 的加密/解密指令](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)）会怎样：

1）加密一个随机的四位字符，如下所示：

```
$key = 'encryption-password-only-present-within-the-application';
$string = rand(1000,9999);
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key)))); 
```

2) 将带参数的加密数字发送到图像脚本并存储在隐藏字段中

```
<img src="/img/captcha.php?number="'.$encrypted.'" />
<input type="hidden" name="encrypted_number" value="'.$encrypted.'" /> 
```

3) 解密验证码脚本中的数字（通过 $_GET 发送）并从中生成图像

```
$decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encrypted), MCRYPT_MODE_CBC, md5(md5($key))), "\0"); 
```

4）再次解密表单提交上的数字以与用户输入进行比较 $decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encrypted), MCRYPT_MODE_CBC, md5(md5($key))), "\0 ");
if($_POST['norobot'] != $decrypted) { echo '验证码错误！'; 出口; }

同意，这有点“隐蔽安全”，但它似乎提供了一些基本的安全性并且仍然相当简单。或者这种加密/解密操作本身是否会占用大量资源？

有人对此有何评论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:06:20.953

不要只依赖 SESSION 值，原因有两个：

*   您的会话可能会过期，因此在某些情况下它不起作用
*   如果用户打开具有相同页面的另一个选项卡，您将有一个奇怪的行为

使用某种令牌：

*   当您输出表单时生成一个随机 ID，将其与预期的数字（以及当前日期/时间）一起放入您的数据库中
*   使用此 ID 生成您的图像
*   使用 ID 在表单中添加隐藏输入
*   收到 POST 后，从数据库中获取预期值并进行比较
*   删除此令牌和所有旧令牌（`WHERE token == %token AND datetime < DATE_SUB(NOW(), INTERVAL 1 HOUR)`例如）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:13:34.940

It sometimes happens that some visitors can be behind proxies or there is a plugin/software on their computer that can do double-request of some of the files. I have discovered this while developing a project of mine and had some Chrome plugin I have completely forgotten about.

As it is happening to so few of your visitors, it is possible that this is the case. Here are the steps I followed to debug the problem (keep in mind that this was a development environment and I was able to modify the code directly on the site):

When a visitor reports the problem, enable 'debugging' for them which means that I would add their IP to a debug array in the config of the captcha generator. This would do the following:

1.  Acquire the generation time of the image in microtime format.
2.  Write in a log file somewhere on the filesystem every request to the captcha page in a format similar to: ip|microtime|random_numbers
3.  Check the logs for the requests made by the user's IP address and see if there are any close requests in the ranges of about 10 seconds of each other. If there are, then there is something that is making a second request to your captcha page and it is generating a new code, which the visitor cannot see.

Also you need to make sure that after clearing the user's cache, the user is seeing different numbers at every refresh of the page. There can be a quirky behavior on the browser's end and it can be showing an old cached copy nevertheless (seen it on Firefox, you have to clear the cache, restart the browser, clear the cache again and then it works fine).

If this is the case you can do a simple time based addition to your script that does the following:

When generating a new captcha image, check if there is already a captcha numbers set in the session. If they are set, check what time they were generated and if it is less than let's say 10 seconds, just show the same numbers. If it is more than 10 seconds, show new numbers. The only caveat of this method is that you must unset the captcha variable in the session every time you use it.

An example code would be:

```
<?php

// begin generating captcha:

session_start();

if (
   empty($_SESSION['randomnr2']) // there is no captcha set
   || empty($_SESSION['randomnr2_time'])  // there is no time set
   || ( time() - $_SESSION['randomnr2_time']  > 10 ) // time is more than 10 secs
) {
   $randomnr = rand(1000, 9999);
   $_SESSION['randomnr2'] = md5($randomnr);
   $_SESSION['randomnr2_time'] = microtime(true); // this is the time it was 
                                                  // generated. You can use it 
                                                  // to write in the log file
}

// ...
?> 
```

# visual-studio-2010 - Visual Studio 在构建 VSTO/Word 加载项项目时冻结或挂起

> ID：11341670
> 
> 赞同：0
> 
> 时间：2012-07-05T09:39:30.813
> 
> 标签：visual-studio-2010, vsto

我刚刚在我的空白解决方案中添加了一个新的 Word AddIn 项目，然后按下了构建按钮。Visual Studio 每次冻结大约 2 - 3 分钟....

我有一台 64 位的机器

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:04:41.933

你安装了 Visual Studio SP1 吗？否则，插件将被安装并在您的程序和功能中可见。每次启动插件可能都需要时间。

# ios - 用于 iOS 的快速 base64 图像编码器？

> ID：11341672
> 
> 赞同：1
> 
> 时间：2012-07-05T09:39:48.160
> 
> 标签：ios, image, encoding, base64

我需要一个快速的 base64 图像编码器。我在 stackOverflow 上搜索并在这里找到了这个与相同主题的好问题（[如何在 iphone-sdk 上进行 base64 编码？](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)）

但是提供的一些解决方案非常慢......而且快速的解决方案似乎从任何地方“泄漏”......所以我要问的是如果可能的话，在不到一秒的时间内将大约 1mb 的图像编码到 base64。任何人都知道一个好的和坚实的类来做到这一点？感谢您阅读我的帖子。

*为了防止有人说“你检查谷歌了吗”，是的，我做了，但解决方案是否非常慢（40 秒编码）或有很多很多错误......

**请提供一个你知道它有效的解决方案，而不仅仅是一个你刚刚用谷歌搜索的链接，因为我尝试了很多而且真的很慢..

# android - 只为多个活动初始化 PayPal 库一次

> ID：11341674
> 
> 赞同：0
> 
> 时间：2012-07-05T09:39:59.113
> 
> 标签：android, paypal

我正在使用 PayPal MECL 库来：

*   在活动 A 中显示“使用 PayPal 付款”按钮
*   在活动 B 中启动付款流程

出于显而易见的原因，我不想初始化 PayPal 库两次（每次活动一次），因为这需要时间并且不必要地让用户等待。

如何在我的两个活动之间共享对库的引用？

这是我目前的代码（在活动 A 和 B 中都有）（取自 PayPal 示例）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //...

    //Show PayPal-Button
    initializePayPal();

}

public void initializePayPal() {
    //Time to launch the library but first we need to initialize
    setSupportProgressBarIndeterminateVisibility(true);

    //Create a separate thread to do the initialization
    Thread libraryInitializationThread = new Thread() {
        public void run() {
            //Initialize the library
            initLibrary();

            // The library is initialized so let's launch it by notifying our handler
            if (PayPal.getInstance().isLibraryInitialized()) {
                hRefresh.sendEmptyMessage(INITIALIZE_SUCCESS);
            }
            else {
                hRefresh.sendEmptyMessage(INITIALIZE_FAILURE);
            }
        }
    };
    libraryInitializationThread.start();
}

private void initLibrary() {
    // This is the main initialization call that takes in your Context, the Application ID, the server you would like to connect to, and your PayPalListener
    PayPal.fetchDeviceReferenceTokenWithAppID(this, CompletePaymentActivity.appID, CompletePaymentActivity.server, new ResultDelegate());

    // -- These are required settings.
    PayPal.getInstance().setLanguage(SharedFunctions.getCurrentLocaleString()); // Sets the language for the library.
    // --
}

// This handler will allow us to properly update the UI. You cannot touch Views from a non-UI thread.
Handler hRefresh = new Handler(){
    @Override
    public void handleMessage(Message msg) {
        switch(msg.what){
            case INITIALIZE_SUCCESS:
                //We have initialized the application, close the dialog and show the PayPal Button
                setSupportProgressBarIndeterminateVisibility(false);
                showPayPalButton();
                break;
            case INITIALIZE_FAILURE:
                //Initialization failure, close the dialog, update the page and show a toast
                setSupportProgressBarIndeterminateVisibility(false);
                Toast.makeText(mContext, mContext.getString(R.string.paypal_initialization_failed), Toast.LENGTH_LONG).show();
                finish();
                break;
        }
    }
};

public void showPayPalButton() {
    //...

    PayPal pp = PayPal.getInstance();
    // get the checkoutbutton
    launchPayPalButton = pp.getCheckoutButton(this, PayPal.BUTTON_194x37,
            CheckoutButton.TEXT_PAY);
    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:45:29.857

制作一个基础活动并将其扩展到其他活动。

在基本活动中，编写用于初始化贝宝流程或任何您想做的代码。

```
public class BaseActivity extends Activity {
 .....
 .....
 .....
}

public class ActivityA extends BaseActivity {
 .....
 .....
 .....

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:45:54.630

使用**单例**claas，在类的构造函数中可以初始化paypal库，随时随地都可以使用，不会再初始化，

[单身医生](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:27:31.690

我最终声明了一个扩展类，`Application`我在其中初始化了一次库，所有活动都可以从中使用它。

# iphone - 假设 ViewControllers 数据源需要很长时间才能返回结果是一种不好的做法吗

> ID：11341679
> 
> 赞同：0
> 
> 时间：2012-07-05T09:40:32.187
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller, objective-c-blocks

我的 ViewController 有一个`dataSource`，在我的情况下，它必须从 Web 服务中获取数据。当我在 ViewController 中假设 dataSource-methods 需要很长时间并且只能从另一个线程调用它们时，这是不好的做法吗？

所以我做了以下事情：

1.  显示项目列表
2.  用户触摸一个单元格
3.  DetailViewController 会立即显示，其父级是其`dataSource`
4.  现在的 DetailViewController
    *   显示加载指示器
    *   向 dataSource 询问另一个 Thread 中的数据
    *   完成后隐藏指示器（在主线程上调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:46:07.973

老实说，对于您通常看到的一些方法，我更喜欢这种方法：

1.  用户触摸一个单元格
2.  当前`UIViewController`向 DataSource 询问数据
3.  DataSource 向 Web 服务发出请求。
4.  完成后，新`UIViewController`的加载数据。

虽然，如果您在 Cell 上放置一个微调器或某种视觉参考来显示背景上正在发生某些事情，您可能会给用户带来良好的体验。无论哪种方式，它有时都是品味、用户体验，甚至是客户需求的问题。

> 当我在我的 ViewController 中假设 dataSource-methods 需要很长时间时，这是不好的做法吗

[墨菲定律](http://en.wikipedia.org/wiki/Murphy%27s_law)...因此，假设并为何时发生这种情况创建必要的机制是一个很好的做法。

# javascript - 激活后单击选项卡时页面跳下

> ID：11341687
> 
> 赞同：4
> 
> 时间：2012-07-05T09:41:06.990
> 
> 标签：javascript, jquery, twitter-bootstrap

因此，在[STVPlus](http://stvplus.com)网站上，我们使用 bootstrap 和 tabs 脚本来显示各种电视节目的剧集和文章列表。我遇到一个问题，一旦页面加载（通常）它工作正常，您可以选择一个选项卡并显示相应的 div。但是，如果您选择一个已经处于活动状态的 div，则页面会向下跳。此外，当加载带有 hash 标签的页面时，例如[episodes hash tag link](http://stvplus.com/#episodes)，当页面完全加载时它会自动向下跳。我曾尝试使用 chrome 开发工具单步执行 JS 代码，但是我找不到任何明显的东西。

任何帮助，将不胜感激。

示例代码：

```
$(function()
{
    $('.sidebar').jScrollPane();

  // Bind an event to window.onhashchange that, when the hash changes, gets the
  // hash and adds the class "selected" to any matching nav link.
  $(window).hashchange( function(){
    var hash = location.hash;

    if ( hash == '#episodes'){
        //e.preventDefault();
        $('.nav-pills a:last').tab('show');
    }else{
        //e.preventDefault();
        $('.nav-pills a:first').tab('show');
    }

  })

  // Since the event is only triggered when the hash changes, we need to trigger
  // the event now, to handle the hash the page may have loaded with.
  $(window).hashchange();
  return false;
}); 
```

剧集 div 容器是这样的

```
<div class="tab-pane" id="episodes">    ..... </div> 
```

你点击的标签是这样的

```
<ul class="nav nav-pills pull-right" data-tabs="tabs">
   <li class="active"><a href="<?php echo current_url(); ?>#articles">Latest Articles</a></li>
   <li><a href="<?php echo current_url(); ?>#episodes">Upcoming Episodes</a></li>
   </ul> 
```

我使用最新的 jquery，带有[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-19T07:21:17.313

@Sherbrow 的答案对我不起作用。但是，下面的代码做到了：

```
$('.nav-tabs li a').click( function(e) {
    history.pushState( null, null, $(this).attr('href') );
}); 
```

在 Bootstrap 3.2.0 上测试。

我从[Twitter Bootstrap 获得了这段代码：如何在单击选项卡时防止跳转](http://blog.shaunscovil.com/post/55630727782/twitter-bootstrap-how-to-prevent-jump-when-tabs-are-clic "Twitter Bootstrap：如何防止单击选项卡时跳转")。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T20:12:38.623

这就是我对您的问题的处理方法：

我不确定你是否需要 hashchange 插件——除了一些`document.location.hash`后备（如果有的话）。

以下代码使用手动激活的经典引导选项卡，以及一些`onready`将显示与哈希匹配的选项卡的代码。

```
var hasHash = false;
var hash = document.location.hash;
if(hash) {
    hasHash = true;
    var $toggleTab = $('a[href='+hash+']');
    if($toggleTab.length) $toggleTab.tab('show');
} 
```

标签激活：

```
$('.nav > li > a').click(function(event) {
    event.stopPropagation();
    var $this = $(this);
    $this.tab('show');
    if(hasHash) document.location.hash = $this.attr('href');
}); 
```

基于 HTML：

```
<ul class="nav nav-pills" data-tabs="tabs">
    <li class="active"><a href="#articles" data-target="#articles-tab">Latest Articles</a></li>
    <li><a href="#episodes" data-target="#episodes-tab">Upcoming Episodes</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane" id="episodes-tab">episodes</div>
    <div class="tab-pane active" id="articles-tab">articles</div>
</div> 
```

[演示 (jsfiddle)](http://jsfiddle.net/Sherbrow/AgYDX/)和[哈希演示 (jsfiddle)](http://fiddle.jshell.net/Sherbrow/AgYDX/show/#episodes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-23T02:31:40.477

解决此问题的另一种方法是在加载选项卡后调用“scrollTop”。我这样做：

```
$("ul.nav-tabs > li > a").on("shown.bs.tab", function (e) {
    var id = $(e.target).attr("href").substr(1);
    window.location.hash = id;
    setTimeout(function () { $("body").scrollTop(0); }, 50);
}); 
```

# java - 如何对各个字段进行 LDAP 搜索

> ID：11341688
> 
> 赞同：4
> 
> 时间：2012-07-05T09:41:09.220
> 
> 标签：java, ldap

我需要在身份验证后从 LDAP 中检索各种值，例如 Description、Office 等。

我已经能够完成身份验证，但我无法检索其他值。

我应该使用什么名称来检索完整的数据？

请帮忙。

我的代码如下：

```
 public boolean authenticate(String userid, String pass, String domain) {
        boolean retval = false;
        String searchFilter ="(&(objectClass=user)(" + LDAP_UID_ATTR + "=" + userid + "))";

        try {
            System.out.println("Start: getLDAPAttrs");
            NamingEnumeration answer =
                getLDAPAttrs(userid, pass, searchFilter, domain);
            String uid = "";

            while (answer.hasMoreElements()) {
                SearchResult sr = (SearchResult)answer.next();

                Attributes attrs = sr.getAttributes();

                try {
                    uid = attrs.get(LDAP_UID_ATTR).toString();
                    System.out.println("uid: " + uid);
                    System.out.println(attrs.get("mail"));
                    uid = uid.substring(uid.indexOf(':') + 2);
                } catch (Exception err) {
//                    uid = "";
                    System.out.println(err.getMessage());
                    err.printStackTrace();
                }

                // verify userid
                if (userid.equalsIgnoreCase(uid)) {
                    retval = true;

                    break;
                }
            }
        } catch (NamingException ne) {
            System.out.println("In authenticateWithLDAP, LDAP Authentication NamingException : " +
                               ne.getMessage());
        } catch (Exception ex) {
            System.out.println("In authenticateWithLDAP, LDAP Authentication Exception : " +
                               ex.getMessage());
        }

        return retval;
        //        return retval;
    }

    private NamingEnumeration getLDAPAttrs(String userid, String pass,
                                           String searchFilter,
                                           String domain) throws NamingException,
                                                                 Exception {
        String host = getServerName();
        String port = getIP_Port();
        String dcPart1 = getDcPart1();
        String dcPart2 = getDcPart2();
//        String attrUserID = getLDAP_UID_ATTR();
//        String attrUserName = getLDAP_UNAME_ATTR();

        // set attribute names to obtain value of
        String[] returnedAtts = { "sAMAccountName", "cn","mail" };
        SearchControls searchCtls = new SearchControls();
        searchCtls.setReturningAttributes(returnedAtts);

        // specify the search scope
        searchCtls.setSearchScope(SearchControls.SUBTREE_SCOPE);

        // set search base
        String searchBase = "DC=" + dcPart1 + ",DC=" + dcPart2;

        // set ldap env values
        Hashtable environment = new Hashtable();
        environment.put(Context.INITIAL_CONTEXT_FACTORY,
                        "com.sun.jndi.ldap.LdapCtxFactory");
        environment.put(Context.PROVIDER_URL, "ldap://" + host + ":" + port);
        environment.put(Context.SECURITY_AUTHENTICATION, "simple");
        environment.put(Context.SECURITY_PRINCIPAL, userid + "@" + domain);
        environment.put(Context.SECURITY_CREDENTIALS, pass);

        // set ldap context
        DirContext ctxGC = new InitialDirContext(environment);

        // perform search to obtain values
        NamingEnumeration answer =
            ctxGC.search(searchBase, searchFilter, searchCtls);
        return answer;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:01:07.303

LDAP 客户端通过将搜索请求传输到服务器然后读取服务器的响应来检索属性值（在问题中称为“字段”）。搜索请求至少包含以下组件：

*   基本 DN - 开始搜索的对象。不返回高于基本 DN 的对象
*   scope - 搜索范围；这是`base`, `one`, 或`subtree`
*   filter - 限制服务器返回的条目的过滤器

此外，请求的属性列表可以与搜索请求一起传输。如果未提供请求的属性列表，许多 LDAP SDK 将仅返回所有用户属性而不返回操作属性。在这种情况下，请求属性`description`以及`office`所需的任何其他内容。

符合 LDAP 的服务器强制实施可能导致服务器不返回某些属性的访问控制方案。请咨询 LDAP 管理员以确定 LDAP 客户端连接的身份验证状态是否有权访问所需的属性。

### 也可以看看

*   [LDAP：使用 ldapsearch](https://ff1959.wordpress.com/2011/07/27/mastering-ldapsearch/)：本文指的是`ldapsearch`命令行工具，但概念与编程访问的概念相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:25:28.773

我发现出了什么问题。

我必须在返回的属性中包含参数：

```
String[] returnedAtts = { "sAMAccountName", "cn","mail" }; 
```

或者

```
String[] returnedAtts = { "sAMAccountName", "cn","mail","description" }; 
```

然后在获取属性时使用它的值。

谢谢

# mongodb - Enzo SQL 分片库和 MongoDB 的分片

> ID：11341691
> 
> 赞同：0
> 
> 时间：2012-07-05T09:41:23.110
> 
> 标签：mongodb, azure-sql-database, sharding

我知道 MongoDB 中的分片机制。但是我刚刚知道 MySQL 也可以通过一个名为 Enzo SQL 分片库的库支持分片。
[http://enzosqlshard.codeplex.com/](http://enzosqlshard.codeplex.com/)
[http://searchcloudcomputing.techtarget.com/tip/Sharding-relational-databases-in-the-cloud](http://searchcloudcomputing.techtarget.com/tip/Sharding-relational-databases-in-the-cloud)
关系数据库如何在强一致性的同时进行分片？还是仅在云中提供的某些功能？它与 MongoDB 的分片相比如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:43:04.180

您的问题“如何在保持强一致性的同时对关系数据库进行分片？”的答案 在本白皮书中进行了描述：http: [//www.codefutures.com/database-sharding/](http://www.codefutures.com/database-sharding/)

由于其使用标准，分片功能更好且更适用于云数据库，但它不限于云，因为它可以根据需要使用本地数据库完成。一旦定义了使用标准并且限制不再是问题，分片就是满足高度可扩展、成本更低和高性能数据库的选项。

对于 SQL 数据库（以前称为 SQL Azure），您不需要用于分片的库，而是可以直接使用数据库进行分片，并让应用程序正确使用 ADO.NET 来访问 Sharded DB。此处描述了详细过程： [如何使用 Windows Azure SQL 数据库进行分片](http://social.technet.microsoft.com/wiki/contents/articles/1926.how-to-shard-with-windows-azure-sql-database.aspx)

不幸的是，我无法评论这两者之间的比较。

# java - 如何在同一网页中的小程序之间共享数据？

> ID：11341692
> 
> 赞同：2
> 
> 时间：2012-07-05T09:41:24.293
> 
> 标签：java, applet

我在同一个网页中有几个小程序，我想在它们之间共享数据。

这样做的最佳解决方案是什么？

编辑 ：

感谢您的回复，我会尝试更具体：

我的网页上有 3 个小程序：

*   第一个将从网络服务器下载文件
*   第二个将用于修改本地文件
*   第三个会将修改后的文件发送回服务器

每个小程序都将处理文件，我想将文件的路径、名称和其他属性存储在一个对象中，这些对象将在小程序之间共享。

对于我的情况，使用 Javascript 在小程序之间进行通信的解决方案似乎不是很安全。

我将阅读有关 AppletContext 的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:41:25.267

Java<->JS 是一种在 applet 之间获取信息的尝试过的方法，但另请参阅[`AppletContext`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletContext.html).

> 该接口对应于applet 的环境：**包含applet 的文档和同一文档中的*其他applet*。**

它提供了如下方法：

*   [`getApplet(String)`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletContext.html#getApplet%28java.lang.String%29)
*   [`getApplets()`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletContext.html#getApplets%28%29)
*   [`getStream(String)`](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletContext.html#getStream%28java.lang.String%29)// `getStreams()`_`setStream(String,InputStream)`

流是一种非常通用且强大的信息交换方式。

# facebook - Facebook 登录不起作用

> ID：11341695
> 
> 赞同：0
> 
> 时间：2012-07-05T09:41:35.200
> 
> 标签：facebook, windows-phone-7

我制作了一个使用 facebook 的**windows phone 7**应用程序......直到一周前它都运行良好，现在以前的 facebook 登录都没有工作...... webbrowser 没有导航到预期的 url 并保持空白......请帮助...我也尝试了链接-但没有成功，浏览器只是没有重定向到任何地方！请帮忙

[http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-first-Facebook-Application.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-first-Facebook-Application.aspx) http://windowsphoneaalto.org/2012/01/facebook-log-in-with-a -班级/

这是更新但仍然相同的问题 [http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx)

无法检索访问令牌。

如果有人可以将我指向正确的位置或提供有效的代码，那就太棒了

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:28:54.783

这是 - 一篇解释这一切的博客文章，以及工作代码：

[http://igrali.com/2012/06/05/facebook-authentication-from-windows-phone-app/](http://igrali.com/2012/06/05/facebook-authentication-from-windows-phone-app/)

# c++ - OpenCV 2.3.0 级联分类器

> ID：11341696
> 
> 赞同：0
> 
> 时间：2012-07-05T09:41:41.730
> 
> 标签：c++, opencv, cascade, classification, haar-wavelet

我正在尝试使用 OpenCV 2.3.0 制作人脸检测软件。虽然 OpenCV 2.4 具有面部识别器类，但 2.3.0 没有此功能。我检查了文档并指定 detectMultiScale 函数具有以下声明

```
void CascadeClassifier::detectMultiScale(const Mat& image, vector<Rect>& objects, double      
scaleFactor=1.1, int minNeighbors=3, int flags=0, Size minSize=Size()) 
```

现在我正在给出图像，即相机馈送，但不知道在矢量块中填充什么。这是我编写的代码。

```
#include "cv.h"
#include "highgui.h"
#include <stdio.h>
#include<iostream>

using namespace cv;
using namespace std;

int main()
{
    std::vector<Rect> faces;
    VideoCapture cap(0);

    if(!cap.isOpened())
        cout<<"Camera is not connected"<<endl;
    cv::CascadeClassifier* cascade=0;
    if(cascade.empty())
        return -1;
    Mat edges;
    namedWindow("Camera Feed",1);
    for(;;)
    {
        Mat frame;
        cap >> frame;
        imshow("Camera Feed", frame);
        if(waitKey(10)==27)
            break;
        cascade.detectMultiScale(frame,faces);
    }
    return 0;
} 
```

问题：如何进一步进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:35:09.307

通过[Docs OpenCV](http://docs.opencv.org)。在这里查看详细[示例](http://docs.opencv.org/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html?highlight=haarcascade)

```
void detectAndDisplay( Mat frame )
{
  std::vector<Rect> faces;
  Mat frame_gray;

  cvtColor( frame, frame_gray, CV_BGR2GRAY );
  equalizeHist( frame_gray, frame_gray );

  //-- Detect faces
  face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );

  for( int i = 0; i < faces.size(); i++ )
  {
    Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
    ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 );

    Mat faceROI = frame_gray( faces[i] );
    std::vector<Rect> eyes;

    //-- In each face, detect eyes
    eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );

    for( int j = 0; j < eyes.size(); j++ )
     {
       Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );
       int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
       circle( frame, center, radius, Scalar( 255, 0, 0 ), 4, 8, 0 );
     }
  }
  //-- Show what you got
  imshow( window_name, frame );
 } 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:40:30.320

这里是2.3文档 [http://www.opencv.org.cn/opencvdoc/2.3.2/html/index.html](http://www.opencv.org.cn/opencvdoc/2.3.2/html/index.html)

使用`circle`or`rectangle`函数绘制`faces`向量中包含的矩形。然后用于`imshow`显示结果。

# javascript - 纯 JavaScript 等于 jquery $(this)

> ID：11341699
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:42:17.583
> 
> 标签：javascript, jquery, this

我目前有用于链接的 jQuery 代码。单击选定对象中的链接时，将打开对话框。

```
$('.dialog_link_add').click(function(){
    var row_id = $(this).parent().parent().attr('id');
    return false;
} 
```

因为对话框总是使窗口滚动到顶部（在 Internet Explorer 中），所以我通过使用纯 JavaScript 和旧方法的实现方法找到了解决方案。

```
onclick="function_call(this);return false;" 
```

...但它不起作用。我现在如何发送“this”参数等于 jQuery $(this)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T09:44:34.233

您实际提出的问题的答案是： is 的原始等价物`$(this)`，`this`但使用您 given 的形式`onclick`，它将是您传递给函数的参数。如果愿意，您可以继续在该函数中使用 jQuery，只需接受该元素作为参数（因为这是您传递它的方式），然后`$()`在其上使用：

```
function function_call(elm) {
    var row_id = $(elm).parent().parent().attr('id');
    // ...
} 
```

但是要完全原始 DOM::

```
function function_call(elm) {
    var row_id = elm.parentNode.parentNode.id;
} 
```

更多关于各种 DOM 规范和 HTML5 API 的内容：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 网络应用 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

~~**但是**：您可以以相同的方式防止 jQuery 版本中的滚动：~~

 ~~```
$('.dialog_link_add').click(function(){
    var row_id = $(this).parent().parent().attr('id');
    return false; // <<=============
}); 
```~~ 

在 jQuery 处理程序中，`return false`做两件事：

1.  阻止默认操作（因此对于表单中的链接`#`，它不会滚动窗口）。

2.  防止事件冒泡 DOM。

~~在 DOM0 样式的处理程序（您的`onclick`）中，`return false`阻止默认操作，但不会停止冒泡。[更多关于`return false`各种类型的处理程序](http://blog.niftysnippets.org/2011/11/story-on-return-false.html)。~~ *（编辑后的问题`return false`在最初不存在的 jQuery 处理程序中显示。）*

# mysql - 尝试创建表时出现错误 1064

> ID：11341703
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:42:21.937
> 
> 标签：mysql, sql, sqlyog

这是代码：

```
create table `team`.`User`( 
   `UserID` bigint NOT NULL AUTO_INCREMENT , 
   `Username` text(30) NOT NULL , 
   `Email` text(30) NOT NULL , 
   PRIMARY KEY (`UserID`)
 )  Engine= [default] comment='' row_format=Default 
```

和错误信息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near
'[default] comment='' row_format=Default' at line 6 
```

有人能告诉我为什么我会收到这个错误以及如何解决它吗？

**编辑：**此代码由 SQLyog 自动生成。似乎是引擎位导致了问题。有谁知道如何使用 SQLyog 设置默认引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:45:42.960

如果您想使用默认引擎，您应该尝试删除`Engine= [default]`部分。
您的查询应该是

```
CREATE TABLE `team`.`User`( 
   `UserID` BIGINT NOT NULL AUTO_INCREMENT , 
   `Username` TEXT(30) NOT NULL , 
   `Email` TEXT(30) NOT NULL , 
   PRIMARY KEY (`UserID`)
 )  comment='' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:46:34.293

`Engine= [default]``Engine= MyISAM`，例如，尝试使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:47:22.860

据我所知，方括号在 MySQL 中没有任何特殊含义。您可能对其他一些 DBMS 感到困惑。

[ENGINE 关键字的有效语法](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)是`ENGINE [=] engine_name`. 例如：

```
ENGINE=InnoDB 
```

... 或者

```
ENGINE InnoDB 
```

如果您不关心存储引擎，请删除该子句，MySQL 将使用默认值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T09:46:56.647

您的创建查询是错误的。查看手册[以及 ENGINE 的正确语法是什么](http://dev.mysql.com/doc/refman/5.1/de/create-table.html)

# parsing - 如何在 Tcl 中将选定的行从一个文件复制到另一个文件？

> ID：11341704
> 
> 赞同：1
> 
> 时间：2012-07-05T09:42:37.287
> 
> 标签：parsing, tcl

我想将一个文件中的选定行复制到 Tcl 中的另一个文件中，其中正则表达式查找选择的开始行和结束行。我试过这个：

```
 while {[gets $thefile line] >= 0} {
       if { [regexp {pattern1} $line] } {
            while { [regexp {pattern2} $line] != 1 } {
                    puts $thefile2 $line
                    }
    } 
```

和`pattern1`并不`pattern2`总是在同一行。这是一个无限循环，但是如何继续写行直到达到第二个模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:07:12.270

有两种方法。要么嵌套循环（使用内部复制），要么有某种标志来来回切换单个循环的行为。

## 嵌套循环

```
while {[gets $thefile line] >= 0} {
    if {[regexp {pattern1} $line]} {
        while {![regexp {pattern2} $line]} {
            puts $thefile2 $line
            # Note: might attempt a [gets] *twice* on EOF
            if {[gets $thefile line] < 0} break
        }
    }
} 
```

## 单回路

```
set flag off
while {[gets $thefile line] >= 0} {
    if {!$flag && [regexp {pattern1} $line]} {
        set flag on
    } elseif {$flag && [regexp {pattern2} $line]} {
        set flag off
    }

    # "off" and "on" are booleans
    if {$flag} {
        puts $thefile2 $line
    }
} 
```

您可以通过删除在该点是否设置标志的测试来简化切换模式的代码；如果两种模式都可以匹配同一行，则只需要小心。

# java - 64 位浏览器上的 XML 解析

> ID：11341707
> 
> 赞同：0
> 
> 时间：2012-07-05T09:42:55.260
> 
> 标签：java, xml, internet-explorer, firefox, dom

我必须解析 xml 文件，如果我使用了任何 32 位 Firefox，但在 64 位浏览器上不能很好地工作，它会做得很好。我在 java 程序中使用了 DOM Parsing。会有什么不同吗？错误如下

SAX 异常：org.xml.sax.SAXParseException；行号：1；列号：1；prolog 中不允许内容。我已经在 net 中搜索过问题，有人说在 utf-8 和 prolog 之间添加一个空格。我也尝试过。但问题依然存在。请向我提出真正的问题。提前致谢。

# php - xml字符串转数组，或者获取他的属性

> ID：11341708
> 
> 赞同：1
> 
> 时间：2012-07-05T09:43:01.670
> 
> 标签：php, xml, xml-parsing

我有以下字符串：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/UKash/Service1"><UKashTransaction><txCode>99</txCode><txDescription>Failed</txDescription><settleAmount> <settleAmount><transactionId>1341481253EDFC871620</transactionId><changeIssueVoucherNumber> <changeIssueVoucherNumber><changeIssueVoucherCurr> <changeIssueVoucherCurr><changeIssueAmount> <changeIssueAmount><changeIssueExpiryDate> <changeIssueExpiryDate><ukashTransactionId> <ukashTransactionId><currencyConversion> <currencyConversion><errCode>219</errCode><errDescription>Invalid Voucher Number</errDescription> <UKashTransaction></string></xml> 
```

我想获取该字符串的一些属性，例如 txDescrition 等，我尝试了不同的变体但无法获得结果。我正在使用 php，如果有人可以提供帮助，我将非常感激，因为我被阻止了。

更新：

问题是我没有将字符串格式化为有效，所以我使用 curl 这就是我从网关得到的：

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/UKash/Service1">&lt;UKashTransaction&gt;&lt;txCode&gt;99&lt;/txCode&gt;&lt;txDescription&gt;Failed&lt;/txDescription&gt;&lt;settleAmount&gt;&lt;/settleAmount&gt;&lt;transactionId&gt;13414821393ED286BF2A&lt;/transactionId&gt;&lt;changeIssueVoucherNumber&gt;&lt;/changeIssueVoucherNumber&gt;&lt;changeIssueVoucherCurr&gt;&lt;/changeIssueVoucherCurr&gt;&lt;changeIssueAmount&gt;&lt;/changeIssueAmount&gt;&lt;changeIssueExpiryDate&gt;&lt;/changeIssueExpiryDate&gt;&lt;ukashTransactionId&gt;&lt;/ukashTransactionId&gt;&lt;currencyConversion&gt;&lt;/currencyConversion&gt;&lt;errCode&gt;219&lt;/errCode&gt;&lt;errDescription&gt;Invalid Voucher Number&lt;/errDescription&gt;&lt;/UKashTransaction&gt;</string> 
```

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:53:35.203

您的 XML 格式不正确 - 它以`</xml>`没有起始`<xml>`元素的 a 结尾。假设您正在纠正这一点，下面的代码将解决您的问题。

```
$xml = simplexml_load_string($string);
print_r($xml->txDescrition); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:47:40.757

如果你有 Simple XML（PHP 应该默认启用它），试试这个：

```
$xmlObject = simplexml_load_string($string);
echo $xmlObject->txDescription; 
```

[http://www.php.net/manual/en/function.simplexml-load-string.php](http://www.php.net/manual/en/function.simplexml-load-string.php)

# c# - 使用 jquery 打开 RDP 连接窗口 - 客户端

> ID：11341711
> 
> 赞同：2
> 
> 时间：2012-07-05T09:43:02.997
> 
> 标签：c#, javascript, jquery, asp.net-mvc

有没有办法使用 jquery(client side) 打开 RDP Connection 窗口？

我的 jquery 代码如下所示，

```
$(function () {
        $(".RDPLink1").live('click', function () {
            var IPAddress = $(this).attr('id');  // ip or name of computer to connect

            $.ajax({
                type: 'post',
                cache: false,
                data: { strIPAddress: IPAddress },
                url: '<%=Url.Action("OpenRDPWindow","Home") %>',
                success: function (data) {                        
                }
            });
        }); 
```

我调用**Home**控制器方法，名称是**OpenRDPWindow**，比如

```
 public void OpenRDPWindow(string strIPAddress)
    {            
        Process objProcess = new Process();
        string exe = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\mstsc.exe");
        if (exe != null)
        {               
            objProcess.StartInfo.FileName = exe;
            objProcess.StartInfo.Arguments = "/v " + strIPAddress;   // ip or name of computer to connect
            objProcess.Start();
        }            
    } 
```

*   其实我的需要是，当用户点击我页面中的href链接时，我们需要打开基于IPAddress的RDP窗口......

*   在我使用 VS2010 的系统中，它工作正常并且它打开了
    基于 IPAddress 的 RDP 窗口，因为我将服务器端（C#）
    中的代码写入了我的系统......

*   在我在 IIS 中部署项目后，用户单击 href 链接，RDP（mstsc.exe）正在服务器机器（我部署我的
    应用程序）中运行。

*   但我需要在用户机器（客户端）中打开 RDP 窗口...

我如何使用 jquery 或 javascript 解决这个问题？（或）有没有其他方法可以解决这个问题？

提前致谢....@@@

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:40:51.623

我按照下面给出的步骤来解决这个问题，

1）jQuery代码是

```
$(function () {
    $(".RDPLink1").live('click', function () {
        var IPAddress = $(this).attr('id');  // ip or name of computer to connect
        window.location.href="http://path/home/OpenRDP?address="+IPAddress ;            
    });
}); 
```

2）我创建了一个新的 .aspx 页面并在 GET 方法（页面加载）中编写了下面给出的服务器端（C#）代码来解决这个问题

```
[HttpGet]
public ActionResult OpenRDP()
{
        string address = Request.QueryString["address"];
        Response.ContentType = "application/octet-stream";
        Response.AppendHeader("Content-Disposition", string.Format("attachment; filename={0}.rdp", address));
        Response.Output.Write(string.Format(@"
screen mode id:i:2
session bpp:i:32
compression:i:1
keyboardhook:i:2
displayconnectionbar:i:1
disable wallpaper:i:1
disable full window drag:i:1
allow desktop composition:i:0
allow font smoothing:i:0
disable menu anims:i:1
disable themes:i:0
disable cursor setting:i:0
bitmapcachepersistenable:i:1
full address:s:{0}
audiomode:i:0
redirectprinters:i:1
redirectcomports:i:0
redirectsmartcards:i:1
redirectclipboard:i:1
redirectposdevices:i:0
autoreconnection enabled:i:1
authentication level:i:2
prompt for credentials:i:0
negotiate security layer:i:1
remoteapplicationmode:i:0
alternate shell:s:
shell working directory:s:
gatewayhostname:s:
gatewayusagemethod:i:4
gatewaycredentialssource:i:4
gatewayprofileusagemethod:i:0
promptcredentialonce:i:1
drivestoredirect:s:E:;
use multimon:i:0
audiocapturemode:i:0
videoplaybackmode:i:1
connection type:i:2
redirectdirectx:i:1
use redirection server name:i:0", address));

        Response.End();
        return View();
} 
```

它将从客户端的浏览器下载选项中打开 RDP 窗口......

所以，这是解决这个问题的一种类型......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:46:54.243

> 我如何使用 jquery 或 javascript 解决这个问题？

等一下，您是在服务器上打开一个进程，而不是在客户端计算机上。这就是为什么您的应用程序不起作用的原因。出于安全原因，您不能在客户端计算机上启动进程。仅通过 javascript 完成此任务可能非常具有挑战性。诸如此类的公司[`LogMeIn`](http://www.logmein.com/)已经实现了这样的接口，但是背后有多年的工作，而不是您希望通过几行代码实现的东西，有人会在 Stack Overflow 上发布您:-)

一些可能性包括[使用 ActiveX](http://msdn.microsoft.com/en-us/library/aa380809%28VS.85%29.aspx)，这显然会强制您控制您的客户端环境。另一种可能性是使用在完全信任下运行的 Silverlight 5 Out-Of-Browser 应用程序，它允许您在客户端上启动进程，但它显然与第一个解决方案具有相同的限制，只是 ActiveX 现在有点过时了。

# windows-7 - 将 Eclipse Juno/Luna/Mars 快捷方式固定到 Windows 7 任务栏时遇到问题

> ID：11341713
> 
> 赞同：44
> 
> 时间：2012-07-05T09:43:08.097
> 
> 标签：windows-7, eclipse-juno, eclipse-luna, eclipse-mars, eclipse-neon

我似乎无法正确地将快捷方式固定到朱诺。我在早期版本的 Eclipse 中从来没有遇到过这个问题。

我已经尝试过这种方法[如何使 Eclipse 在 Windows 7 任务栏中表现良好？](https://stackoverflow.com/questions/5234626/how-to-make-eclipse-behave-well-in-the-windows-7-taskbar) 但这对我没有用。

发生的情况是，当我运行 eclipse.exe 时，任务栏中会显示新的闪亮 Juno 图标，但是当它完成加载并且我可以选择工作区时，图标会切换到“Java EE IDE”图标并固定该图标不会'不工作。

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-09T19:25:46.393

我面临着同样的问题。我做了几件事：

1.将此添加到eclipse.ini的**开头**

```
-vm
C:/Program Files/Java/jre6/bin/server 
```

2.更新了eclipse定义——使用eclipse中的更新检查。我仍然没有得到 pin 选项（图标显示 Java EE）

3.Updated Windows 并重新启动我的系统。

瞧！有效！希望它也适合你！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-17T14:01:39.163

我遇到了同样的问题，首先是新的 eclipse juno 图标，然后是 windows 任务栏中的旧 eclipse ide ee 图标。我所做的是在 eclipse 插件文件夹中搜索 png 文件，并尝试识别新图标和旧图标。

我发现旧的来自我计算机上的 eclipse-juno\plugins\org.eclipse.epp.package.jee_1.5.0.20120131-1544，而新的位于 eclipse-juno\plugins\org.eclipse。平台_4.2.0.v201206081400。

在 epp jee 文件夹中，我为 javaee-ide_x16、_x32 和 _48 png 文件创建了备份，然后从 org.eclipse.platform 文件夹中将图标 eclipse_16、_32 和 _48 png 文件复制到 epp jee 文件夹并将它们重命名为 javaee- ide_x16、_x32 和 _48。

之后我重新启动了 eclipse juno，任务栏图标是新的闪亮图标。

希望这会有所帮助，干杯

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T01:36:11.943

如果您创建指向可执行文件的快捷方式，您可以将快捷方式固定到任务栏。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T15:54:37.353

*ganeshk*的解决方案对我不起作用。然后我在[Eclipse Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=314805)上找到了简单的解决方案。

您需要 **固定一个正在运行的 Eclipse 实例**，然后它会按预期运行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-09T10:28:56.417

接受的答案有效。但是，它也更改了出现在**About Eclipse**面板上的功能图标，然后与**Eclipse.org**功能的图标发生冲突。

为了在**Eclipse Packaging Project**的 About 面板上获得正确的**Java EE IDE**图标，请编辑位于图标所在文件夹中的**about.ini文件，并更新“** **featureImage=** ”以指向旧的 _x32 图标。

 ******干杯!

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T16:04:59.393

做一个小实验，如果您进行基本的 Eclipse 安装，似乎会出现闪亮的 Juno 图标，但是如果您安装 Java 或 Java EE 版本（这是您似乎拥有的版本，Olle），那么该图标会软件加载后立即覆盖在任务栏上。我也很失望，我的任务栏上没有闪亮的新图标，但我需要 Java 插件，我不愿意手动安装它们以获得漂亮的图标。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-26T10:11:08.263

这对我有用：

1 - 在桌面上复制/粘贴可执行文件“eclipse.exe”

2 - 固定到任务栏

3 - 删除桌面可执行文件

4 - 右键单击​​任务栏中的 eclipse 图标 > 右键单击​​列表中的 eclipse 图标 > 属性

5 - 更改可执行文件的路径（目标：..../eclipse.exe）并更改目录（开始于：）

奇怪，但它对我有用！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-10T14:26:14.363

这对我很有用...但一开始不是...因为我将这些行添加到 eclipse.ini 的末尾...您必须将其添加为第一行

[http://androblip.huiges.nl/2011/10/11/how-to-get-eclipse-to-pin-to-taskbar-in-windows-7/](http://androblip.huiges.nl/2011/10/11/how-to-get-eclipse-to-pin-to-taskbar-in-windows-7/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-05T19:55:05.457

首先，您是否*验证*了您的安装确实使用了 eclipse.ini 中指向的 VM（通过在 about 对话框 -> 安装详细信息 -> 配置中检查它）并且它确实是 JVM 的 DLL 版本，而不是可执行文件？

您能否通过 Juno 的经典（甚至仅平台二进制）下载验证它是否适合您？这听起来可能很愚蠢，但是您在启动后使用另一个图标（因为您选择了 Juno 包）对它的注释让我认为 Windows 可能会以某种方式被这些不同的图标混淆。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-12-17T11:37:16.010

[http://rianjs.net/2010/11/how-to-pin-eclipse-to-the-windows-7-taskbar](http://rianjs.net/2010/11/how-to-pin-eclipse-to-the-windows-7-taskbar)

这对我有用。（带有 Eclipse Juno 4.2 和 jre7 的 Windows 7）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-09T21:11:12.460

您可以通过右键单击资源管理器窗口中显示的可执行文件来固定它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-12T13:17:14.417

I had another Eclipse (3.7.2) already pinned in the task bar. That shortcut was pointing to the **same VM** as the new Eclipse (4.2.0). I had to unpin the 3.7.2 and then REBOOT the operational system. Otherwise Windows would not allow me to pin the new Eclipse. The right click even started, so no options to pin was displayed!

If I let the old pin to the 3.7.2 in the task bar and then started the 4.2.0, after loading my workspace the active icon in the task bar always changed to the 3.7.2 pin. So.. well, I think you need to unpin your old Eclipse (if the case), reboot your OS and then you open and pin your new Eclipse. Perhaps restart the explorer.exe would do the trick?

Just one note, I removed the pin to the 3.7.2\. Don't know if you can have multiples pins to multiples Eclipses with the same -vm argument.

--- Edit ---
Nope, restarting the "explorer.exe" doesn't work. =)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-05-23T08:21:13.580

如果您已经安装了 eclipse 在您的计算机中搜索 eclipse.exe 文件，然后创建一个快捷方式或将其固定在任务栏上。

如果你还没有安装 Eclispse。从（[http://eclipse.org/](http://eclipse.org/)）下载正确的版本并安装。******

# dynamic - 在struts中，如果我单击单选按钮，如何动态地将值添加到下拉列表

> ID：11341714
> 
> 赞同：0
> 
> 时间：2012-07-05T09:43:13.407
> 
> 标签：dynamic, drop-down-menu, struts, radio, struts-html

我是struts的初学者，这里我的问题是当我检查单选按钮时动态地将值添加到下拉列表中。下拉列表中已经存在两个值。如果我单击单选按钮，则应添加另外两个值。我在 JSP 页面中使用 struts-html 标记。请给出想法或建议如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:01:25.743

一种快速的广告肮脏方法是使用 DOM 事件和 javascript 来更改您的选择中的选项。这将为您的 select 添加第三个选项：

```
document.<formId>.<selectId>.options[2]=new Option("Label", "value", false, false) 
```

为此，您必须检索标签的 DOM id（假设最坏的情况，即 struts 1）

# javascript - 从使用 javascript 的页面获取元素信息

> ID：11341719
> 
> 赞同：0
> 
> 时间：2012-07-05T09:43:37.853
> 
> 标签：javascript, html, inspector

在诸如谷歌浏览器之类的浏览器中，当我想获取页面信息时，我只选择查看页面源，但在某些使用javascript的网站中你不能这样做，所以我发现在按钮等任何元素上并选择检查element 它会向我显示我需要的信息，它真的很棒，但我想自动执行此操作，例如对于使用 html 的简单页面，我只是使用 wget 将页面保存为文本以便稍后分析它，但对于那些使用 javascript 和 css 是不可能的，所以我的问题是有一种工具或任何方法来获取我需要的信息并将其保存为文本假设我指定了站点和元素（按钮），它将下载代码并保存它到文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:50:51.390

如果你使用 chrome，你可以`Ctrl + Shift + J`打开开发者工具窗口。单击最左上角的图标（元素）以查看 JavaScript 修改后的 DOM。

在 IE（我认为是 7 或更高版本）中使用`F12`打开类似的窗口。

而在 FireFox 中你可以用它`Ctrl + Shift +I`来打开一个类似的窗口。

为了使这个过程自动化，请尝试使用[http://www.phantomjs.org/](http://www.phantomjs.org/)（*如此处建议：[wget + JavaScript？](https://stackoverflow.com/questions/5901661/wget-javascript)*）

**编辑：**

IE 中有一个保存按钮，用于保存当前的 DOM：

![在此处输入图像描述](../Images/f9cb70547d2321891fafcac1cc85f0db.png)

`Ctrl + Shift + I`按下后在 FireFox 中`Ctrl + S`，它将保存当前的 DOM。

**编辑2：**

下载 PhantomJS，创建一个名为`script.js`paste 的文件：

```
system = require('system');
var page = new WebPage();
page.open(system.args[1], function (status) {
    if(status == 'success') {
        html = page.evaluate(function() {
            return document.getElementsByTagName('html')[0].innerHTML;
        }); 
        console.log(html);
    } else {
        console.log('Page could not be loaded');
    }
    phantom.exit();
}); 
```

在注释行运行`phantomjs script.js http://www.website.co.uk > website.html`（script.js 和 phantom.exe 必须在当前工作目录中）。更改`http://www.website.co.uk`为您需要下载的网站以及`website.html`您要保存到的`html 文件。

# php - 如何删除一个url参数并保留另一个？

> ID：11341721
> 
> 赞同：0
> 
> 时间：2012-07-05T09:43:45.587
> 
> 标签：php, parsing, url, hyperlink, uri

我有这个 youtube 网址

[http://www.youtube.com/watch?v=9N51Etoikfw&feature=youtube_gdata](http://www.youtube.com/watch?v=9N51Etoikfw&feature=youtube_gdata)

我需要删除特征参数并留下 v 视频 id

所以结果是

[http://www.youtube.com/watch?v=9N51Etoikfw](http://www.youtube.com/watch?v=9N51Etoikfw)

你能帮我实现这个结果吗请使用 php 和/或正则表达式

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:50:33.160

使用 PHP parse_url、[http](http://php.net/manual/en/function.parse-url.php) ://php.net/manual/en/function.parse-url.php解析 URL 的所有部分，然后将其拼接在一起。

# php - 在 Internet Explorer 上使用 jquery 的问题

> ID：11341724
> 
> 赞同：2
> 
> 时间：2012-07-05T09:44:00.613
> 
> 标签：php, jquery, ajax

Jquery 在 Internet Explorer 上不起作用。但是它在其他网络浏览器上运行。我写的代码是

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#myform").validate({
            debug: false,
            rules: {
                name: "required",
                email: {
                    required: true,
                    email: true
                }
            },
            messages: {
                name: "Please let us know who you are.",
                email: "A valid email will help us get in touch with you.",
            },
            submitHandler: function(form)
            {
                $.post('process.php', $("#myform").serialize(), function(data)
                {
                    $('#results').html(data);
                });
            }
        });
    });
    </script>

</head>
<body>
<form name="myform" id="myform" action="" method="POST">
    <label for="name" id="name_label">Name</label>
    <input type="text" name="name" id="name" size="30" value=""/>
    <br>
    <label for="email" id="email_label">Email</label>
    <input type="text" name="email" id="email" size="30" value=""/>
    <br>
    <input type="submit" name="submit" value="Submit">
</form>
<div id="results"><div>
</body>
</html> 
```

进程.php

```
<?php
    print "Form submitted successfully: <br>Your name is <b>".$_POST['name']."</b> and your email is <b>".$_POST['email']."</b><br>";
?> 
```

如何在 INTERNET EXPLORER 上运行此代码。非常感谢您提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:00:41.550

在此行之后删除“，”

```
email: "A valid email will help us get in touch with you.", 
```

应该

```
 email: "A valid email will help us get in touch with you." 
```

在您的消息块中是这样的

```
 messages: {
            name: "Please let us know who you are.",
            email: "A valid email will help us get in touch with you.",   // <<<< HERE REMOVE IT                
        }, 
```

您需要删除最后一行中的“，”（逗号），不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:50:17.997

试试下面的代码： -

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#myform").validate({
        debug: false,
        rules: {
            name: "required",
            email: {
                required: true,
                email: true
            }
        },
        messages: {
            name: "Please let us know who you are.",
            email: "A valid email will help us get in touch with you.",
        },
        submitHandler: function(form)
        {
            $.post('process.php', $("#myform").serialize(), function(data)
            {
                $('#results').html(data);
            });
            return false;
        }
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:52:10.560

我试图在最后执行你的代码。请在顶部添加文档类型。我使用了相同的方法，并且它在早期不起作用时起作用。

```
<!DOCTYPE html> 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T09:49:14.523

你应该添加`return false`到`submitHandler`.

或者，您可以将提交输入转换为不使用提交表单的按钮`<button>Submit</button>`。

# c++ - C++/CLI 包装器 LNK2028 和 LNK2019 错误

> ID：11341726
> 
> 赞同：0
> 
> 时间：2012-07-05T09:44:08.523
> 
> 标签：c++, dll, c++-cli, dllimport, lnk

我需要 C++/CLI 中可用的以下函数（来自 C++ dll）

```
extern "C" _declspec(dllexport) void __stdcall DestroyInstance(CKeyManagerServerApp *ptr); 
```

我的尝试：

```
[DllImport("KeyManagerServer.dll", CallingConvention=CallingConvention::StdCall)]
void DestroyInstance(CKeyManagerServerApp IntPtr); 
```

C++/CLI 包装器使用 /clr 和 stdcall 编译（C++ dll 也使用 stdcall）！

我收到以下错误：

```
MKeyManagerInterface.obj : error LNK2028: unresolved token (0A000585) "extern "C" void __stdcall DestroyInstance(class CKeyManagerServerApp *)" (?DestroyInstance@@$$J14YGXPAVCKeyManagerServerApp@@@Z) referenced in function "private: __clrcall MKeyManagerInterface::ManagedKeyInterface::~ManagedKeyInterface(void)" (??1ManagedKeyInterface@MKeyManagerInterface@@$$FA$AAM@XZ)
1>MKeyManagerInterface.obj : error LNK2019: unresolved external symbol "extern "C" void __stdcall DestroyInstance(class CKeyManagerServerApp *)" (?DestroyInstance@@$$J14YGXPAVCKeyManagerServerApp@@@Z) referenced in function "private: __clrcall MKeyManagerInterface::ManagedKeyInterface::~ManagedKeyInterface(void)" (??1ManagedKeyInterface@MKeyManagerInterface@@$$FA$AAM@XZ)
1>..\Debug\Bin\KeyManagerInterfaceD.dll : fatal error LNK1120: 2 unresolved externals 
```

如何解决此链接器错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:46:40.067

您不需要使用 C++/CLI 中的 P/Invoke。您应该能够包含声明导入函数的常用 C/C++ 头文件。只需确保将您的 C++/CLI 程序集与导出相关函数的本机代码 DLL 中的导出库链接起来。

# jquery - 如何使用jquery更改与特定类匹配的所有文本框的属性

> ID：11341729
> 
> 赞同：0
> 
> 时间：2012-07-05T09:44:15.870
> 
> 标签：jquery, forms, textinput

这是我的 jquery 代码。[http://jsfiddle.net/geekrule/ZnAvP/1/](http://jsfiddle.net/geekrule/ZnAvP/1/)
当我选择一个图像时，添加了一个带有图像源的文本框并添加了一个“名称”属性。
现在，当我取消选择图像时，我希望更新“名称”。
**例如：** `i select images 1,3,4,5 corresponding value of 'name' of input boxes will be 1,2,3,4 and now when i unselect images -3,4 value of 'name' should be 1 and 2(this part is what i am stuck at.the values i get are 1,4).`
他们没有得到更新。
希望你理解这个问题。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:31:55.330

在我看来，更简单的解决方案是在每个图像选择上重新生成文本框：

```
<div id="selectList">
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
    <img src="http://tinyurl.com/26asnv7" />
</div><form id='if' name='forms' method='post'>
<button type='submit' class="uploadPic">Upload Fb</button>
</form>
​
$(function() {
    $("#selectList img").click(
    function(event) {
        if( !$(this).is(".clicked") && $("#selectList img.clicked").length >= 3){
            event.preventDefault();
            alert('only 3 photos allowed');
            return;
        }
        $(this).toggleClass("clicked");
        regenerateTextBoxes();
    });
});

function regenerateTextBoxes() {
    $('#if .selection').remove();
    $("#selectList img.clicked").each(function(index, element) {
        var $input = $('<div>', {
            'class': 'selection',
            'html': $('<input>', {
                'type': 'text',
                'value': $(this).attr('src'),
                'name': 'pics' + index
            })
        });

        $("#if").append($input);
    });
}​ 
```

# jquery - 为 ajax 加载的内容应用 jquery 函数

> ID：11341735
> 
> 赞同：0
> 
> 时间：2012-07-05T09:44:35.917
> 
> 标签：jquery, ajax

我有一个问题..问题是jquery不适用于ajax内容..我的jquery：-

```
$(document).ready(function() {

$('.mainWorkImage').hover(function() {
    $(this).find('.caption').fadeIn(200);
},
function() {
    $(this).find('.caption').stop(false,true).fadeOut(200);
});

}); 
```

内容 ： -

```
 echo "<div class=\"mainWorkImage\" projects=\"".$mainResult['category']."\"><a href=\"work.php?page=".$mainResult['id']."\"><img name=\"mainWorkImage\" src=\"".$mainResult['imageUrl']."\" width=\"212\" height=\"207\" alt=\"\"/><div class=\"caption\"><p>PROJECT NAME:</p><p>".$mainResult['projectName']."</p><br/><p>PROJECT TYPE:</p><p>".$mainResult['category']."</p></div></a></div>"; 
```

这里发生的事情是，当下拉更改内容将使用 AJAX 从 DB 获取并显示时，我有一个下拉列表。但标题 div 不显示从 AJAX 加载的内容。请帮我 。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:47:59.167

根据您的 jquery 版本，看看[http://api.jquery.com/on/](http://api.jquery.com/on/) 替代使用“实时”处理程序。

.hover() 处理程序不起作用，因为目标在应用时不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:49:06.187

您可以在成功加载 ajax 时绑定函数

IE

```
$.ajax{
url:
data:
    success(function){
     //put your bind elements here
    }
} 
```

或者，您可以使用[on()](http://api.jquery.com/on/) api。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:50:51.567

尝试

```
$(document).ready(function() {

$('body').delegate('.mainWorkImage','hover',function() {
    $(this).find('.caption').fadeIn(200);
},
function() {
    $(this).find('.caption').stop(false,true).fadeOut(200);
});

}); 
```

# asp.net - 更新sql server中的二进制字段

> ID：11341736
> 
> 赞同：0
> 
> 时间：2012-07-05T09:44:37.110
> 
> 标签：asp.net, sql-server

我有一个字符串，它是一个加密的二进制值

```
(0x00C11EA094DC7F45AD2B13F42E26ED03010000006018F6DFCEC8BAFC47AC2854C21A5B00FEFA7C3035A9A4EF7AEBB9FDADBF7FA4B2E6392EA0DC4614). 
```

我需要将上面的确切字符串`VarBinary`从.net 传递到 SQL Server 中的列。

我怎样才能做到这一点？

问候拉吉什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:50:48.190

您可以使用

```
 var input = "your value string";
        var connectionString = "";

        using(var connection = new SqlConnection(connectionString))
        {
           connection.Open();
           using(var command = new SqlCommand("your query : stored procedure", connection))
           {
             command.CommandType = CommandType.StoredProcedure;

             // your parameter in your stored procedure
             SqlParameter parameter = new SqlParameter("@parameter", SqlDbType.VarBinary); 
             parameter.Direction = ParameterDirection.Input;
             parameter.Value = Encoding.ASCII.GetBytes(input);

             command.Parameters.Add(parameter);
             command.ExecuteNonQuery();
            }
         } 
```

# android - Eclipse ADT 在哪里存储默认密钥库路径？

> ID：11341739
> 
> 赞同：2
> 
> 时间：2012-07-05T09:45:04.677
> 
> 标签：android, adt, keystore

我有一个稍微尴尬的问题：

我在商店中有一个 Android 应用程序，我想为其推送更新。我的问题是我换了电脑，现在找不到用于签署应用程序的密钥库。

我肯定有这个文件（和私钥），因为我有一个完整的备份，但我的问题是我在其中找不到文件（并且不记得我一开始给它起什么名字）。

我想知道的是如何跟踪这个文件，或者通过对标题的全文搜索，或者通过检查（旧）eclipse 和/或 android 配置文件以获取文件的路径（因为 Eclipse 已经有路径每次我构建的密钥库，它都必须保存在某个地方......）

我正在使用 Mac OS X（当时是 Snow Leopard）...

谢谢大家的时间

编辑：

我已经部分回答了我自己的问题：找不到 Eclipse ADT 缓存密钥库路径的配置文件，但发现 Mac OS X 上的 Eclipse ADT 默认将密钥库保存在 Eclipse.app/Contents/Mac OS 中（是的，在 .app 包内）......可能是对“当前目录”的疏忽，但仍然很愚蠢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:33:56.120

它可能在

```
C:\Users\nainit\.android 
```

# android - 通过 android 上的 glget 检索 OpenGL 功能值时什么也得不到

> ID：11341742
> 
> 赞同：0
> 
> 时间：2012-07-05T09:45:06.540
> 
> 标签：android, opengl-es

我想检测那些运行我的游戏的设备是否支持某些 OpenGL 功能，例如 GL_MAX_VERTEX_ATTRIBS。我写了这些代码：

```
int[] result = new int[1];

GLES20.glGetIntegerv(GLES20.GL_MAX_VERTEX_ATTRIBS, result, 0); 
```

我看过官方文档，上面说返回值必须高于8，但我得到的结果总是0。我在IOS上通过C语言很好地使用了这些东西，但在android上他们真的让我很困惑. 我应该怎么做才能在android上完成这种任务？

我发现“OpenGL Extensions Viewer”（[http://www.realtech-vr.com/glview/](http://www.realtech-vr.com/glview/)）可以在android上检测到很多东西而且它在屏幕上只有一个listview，我可以在不创建的情况下获取这些信息吗？自定义 GLSurfaceView 和渲染器？

我发现了这个类似的问题 [Get GPU info on Android without SurfaceView](https://stackoverflow.com/questions/8442720/get-gpu-info-on-android-without-surfaceview) 但它也没有最佳答案。

我现在已经解决了这个问题，我将检测代码放在另一个 Activity 中，并按照本教程[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)获取 OpenGL ES 2.0 上下文，然后检索这些功能信息通过 gl API 调用，完成所有这些之后，我跳回我的主要活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:40:28.757

见[这里](http://www.anddev.org/android-2d-3d-graphics-opengl-tutorials-f2/possible-to-do-opengl-off-screen-rendering-in-android-t13232.html#wrap)。该类`GL10`直接使用`EGL`. 这应该足以查询上下文的功能。

我想知道的是这些能力是否取决于所选择的`EGLConfig`......

# java - 我怎样才能获得已经被占用的端口？

> ID：11341743
> 
> 赞同：1
> 
> 时间：2012-07-05T09:45:19.847
> 
> 标签：java, jakarta-ee, port

我正在为我们的组织开发 eclipse 插件。我们通过 eclipse 使用这个插件在用户机器上打开多个服务器[最少 10 个服务器]。对于启动服务器，我们需要尚未绑定的端口号。为此，我使用 serversocket 来检查这一点。我认为打开 serversocket 对象是一项昂贵的操作。在内部 serversocket 将检查端口是否已绑定它至少需要 50 毫秒。这是我返回自由端口的代码。有没有办法在不使用操作系统命令和打开 ServerSocket 的情况下找到已经占用的端口？

```
 /**
     *Tries 100 times
     * @param port
     * modes
     *  1.increment - 1
     *  This mode increment the port with your start value . But it's costly operation because each time we open a socket and check the port is free .
     *  2.decrement - 2
     *  Invert of increment.
     *  3.random - 3
     *  Randomly choose based on your starting point
     * @return
     */
    public static String getDefaultPort(int port , int mode){
        int retry = 100;
        int random = 3;
        int increment = 1;
        int decrement = 2;
        while(true){
            //this is for preventing stack overflow error.
            if(retry < 1){ //retries 100 times .
                break;
            }
            if(mode==increment){
                port++;
            }else if(mode == decrement){
                port--;
            }else if(mode == random){
                port = (int) (port+Math.floor((Math.random()*1000)));
            }
            if(validate(port+"")){
                long end = System.currentTimeMillis();
                return port+"";
            }
        }
        return "";
    }

    public boolean validate(String input) {
    boolean status = true;
    try {
        int port = Integer.parseInt(input);
        ServerSocket ss = new ServerSocket(port);
        ss.close();         
    }
    catch (Exception e) {
        status = false;
    }
    return status;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:59:04.167

**最快**的方法是运行本机`netstat`命令并解析输出。它也[可以在 Windows 和 Linux 平台上使用](http://en.wikipedia.org/wiki/Netstat)。一个典型的 netstat 命令输出如下

```
 Proto  Local Address          Foreign Address        State
 TCP    MYHOST:8080           MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:9090           MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:3389           MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:7717           MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:51114          MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:netbios-ssn    MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:netbios-ssn    MYHOST.mydomain.co.in:0  LISTENING
 TCP    MYHOST:2573           hj-lyncfe.mydomain.co.in:5061  ESTABLISHED
 TCP    MYHOST:2591           mail.mydomain.co.in:8502  ESTABLISHED
 TCP    MYHOST:2593           mail.mydomain.co.in:8502  ESTABLISHED 
```

您感兴趣的端口在`Local Address`带有in 的列`State`中`LISTENING`

# c++ - TCPServer 连接线程上的 POCO 引发事件

> ID：11341744
> 
> 赞同：0
> 
> 时间：2012-07-05T09:45:23.950
> 
> 标签：c++, multithreading, events, tcpserver, poco-libraries

我是 Poco 框架的新手，不熟悉 C++，但我正在学习。我必须在 Windows 中创建一个基于服务器客户端的应用程序。我现在遇到的问题是我需要每分钟重复发送一些数据给客户端。我需要为与服务器有活动 tcp 连接的客户端执行此操作。我不知道如何创建事件，或者在线程中触发并启动所有活动线程以向客户端发送数据。我的第一个想法是我必须重写或扩展 TCPServerDispatcher 类。而且我不知道如何从 ThreadPool 中识别活动线程。

你有什么想法，或者建议，或者教程之类的吗？我不知道该怎么做...

希望有人能给我一个想法，或者一些代码示例。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:00:23.317

这些服务器<>客户端线程不能自己获取数据吗？在每个线程的 read() 上添加 60 秒的超时然后发送数据是相当容易的。也许这会涉及太多的数据库连接？

如果做不到这一点，您能否将最新数据放入可锁定对象中，并让线程在超时时锁定、写入和解锁最新数据？这样的解决方案实际上也应该具有写入超时，以防止行为不端的客户端导致其服务器线程在持有锁时阻塞。如果它不是太大，我想服务器 <> 客户端线程可以复制要发送的数据，但我不太喜欢复制，TBH。

有更复杂的方法可以向服务器<>客户端线程发出新数据可用的信号。很有可能向每个线程发出新数据可用的信号并让它们“立即”对其采取行动。这通常意味着服务器<> 客户端线程等待多个信号。一般来说，延迟越低，解决方案就越复杂：(

Rgds，马丁

# boost - boost::bind 是否复制成员函数

> ID：11341750
> 
> 赞同：1
> 
> 时间：2012-07-05T09:45:41.650
> 
> 标签：boost, bind, member-function-pointers

Boost::bind 文档状态：

> 默认情况下，bind 会复制提供的函数对象。boost::ref 和 boost::cref 可用于使其存储对函数对象的引用，而不是副本。

当我使用带有指向成员函数的指针的 boost::bind 时，我在代码中看到过多的消息和删除。我不清楚文档是否 boost::bind(&classname::functionname,...) 复制了该函数。

或者这个问题可能没有意义，因为它将成员函数转换为函数对象，它显然必须新的函数对象。

所以我的问题是有没有一种方法可以绑定到成员函数并避免新建和删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:55:00.250

根据我的实验（boost 1.49），`boost::bind`它自己的实现不使用动态内存。使用此代码

```
#include <boost/bind.hpp>

int f(int a , int b) {
  return a>b ? a+b : a-b;
}

int main()
{
  auto a = boost::bind(f, _1, 2);
  return a(0);
} 
```

我尝试破解`operator new`gdb 中的变体，但没有触发。所以我怀疑你的问题实际上`boost::bind`是复制绑定参数（比较这[两个](http://codepad.org/0Ytk5xZ6) [片段](http://codepad.org/ubgohkH3)的输出）或调用参数。在这些中搜索可以在复制时分配内存的东西，并尝试摆脱它。

如果您使用的是 C++11 编译器，则可以完全摆脱困境`boost::bind`并改用 lambda 函数。该示例将转换为

```
auto a = [&](int a1) { return f(a1, 2); } 
```

如果您按值捕获对象，那只会复制。

编辑：使用您发布的代码，尝试将有问题的行更改为

```
TConstIterator pIt = std::find_if(rtContainer.begin(), rtContainer.end(), 
  boost::bind(&TValueType::bSameSocket, boost::cref(rtData), _1));
                                        ^^^^^^^^^^^ 
```

那应该会更好；如果没有，请报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:49:32.453

被复制的是*指向*该方法的指针，因此不涉及新/删除。返回的是`bind`一个函数对象，它在某个时候被创建和销毁，但同样没有动态内存分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:26:23.820

据我所知，如果您在代码中使用 boost::bind，例如创建一个函数对象以充当 find_if 中的谓词，则该函数对象是新的和删除的，这就是导致我的代码运行缓慢的原因。

我的问题是：有没有办法可以绑定到成员函数并避免 new 和 delete？

我通过迭代列表自己通过成员函数指针调用成员函数来解决 boost::bind 问题。

成员指针函数的类型派生自列表的模板参数及其存储的数据类型，但无论类型是否模板化，相同的技术都适用。

该解决方案将用户对特定操作的响应感知从 5 分钟缩短为立即有效。

# sync - TFS2010 - 与 apache Web 服务器同步 - 工作文件夹

> ID：11341752
> 
> 赞同：0
> 
> 时间：2012-07-05T09:45:50.890
> 
> 标签：sync, working-directory

我正在开发 Team Foundation Server 2010，需要为我的项目设置一个工作文件夹，但我无法像往常一样在右键菜单上找到该选项（设置映射文件夹）。我必须定义一个构建还是什么？

事实上，我需要做的就是：

我在 apache httpd 服务器上运行一个 web 项目，为了方便团队编辑和更新文件，同时我决定使用 TFS2010。

现在我们所有人都可以成功更新 TFS 上的文件，但问题是我必须找到一种方法在签入时自动将这些更新再次下载到 apache。

那么，设置工作文件夹是实现这一目标的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:34:57.590

由于您想在签入时更新 Apache 文件，因此工作文件夹将无法工作，因为它不会自动更新，您必须手动“获取最新”。

我认为您是对的，因为创建构建定义是可行的方法，因为它可以由签入触发，然后您可以或多或少地使用代码和构建输出做任何您想做的事情。工作流的东西确实有一点学习曲线，但是由于您可以从工作流中执行脚本，这使它更容易一些，或者您可以使用旧版构建模板和 MSBuild 项目。

# java - 使用 DOM 解析复杂的 XML

> ID：11341755
> 
> 赞同：0
> 
> 时间：2012-07-05T09:45:56.087
> 
> 标签：java, xml, parsing, dom

我知道以前在这里问过这类问题，但我仍然找不到任何解决我的问题的方法。所以拜托，谁能帮帮我......

**情况：**

我正在使用 DOM 解析器解析以下 xml 响应。

```
<feed>
<post_id>16</post_id>
<user_id>68</user_id>
<restaurant_id>5</restaurant_id>
<dish_id>7</dish_id>
<post_img_id>14</post_img_id>
<rezing_post_id></rezing_post_id>
<price>8.30</price>
<review>very bad</review>
<rating>4.0</rating>
<latitude>22.299999000000</latitude>
<longitude>73.199997000000</longitude>
<near> Gujarat</near>
<posted>1340869702</posted>
<display_name>username</display_name>
<username>vivek</username>
<first_name>vivek</first_name>
<last_name>mitra</last_name>
<dish_name>Hash brows</dish_name>
<restaurant_name>Waffle House</restaurant_name>
<post_img>https://img1.yumzing.com/1000/9cab8fc91</post_img>
<post_comment_count>0</post_comment_count>
<post_like_count>0</post_like_count>
<post_rezing_count>0</post_rezing_count>
<comments>
<comment/>
</comments>
</feed>

<feed>
<post_id>8</post_id>
<user_id>13</user_id>
<restaurant_id>5</restaurant_id>
<dish_id>6</dish_id>
<post_img_id>7</post_img_id>
<rezing_post_id></rezing_post_id>
<price>3.50</price>
<review>This is cheesy!</review>
<rating>4.0</rating>
<latitude>42.187000000000</latitude>
<longitude>-88.346497000000</longitude>
<near>Lake in the Hills IL</near>
<posted>1340333509</posted>
<display_name>username</display_name>
<username>Nullivex</username>
<first_name>Bryan</first_name>
<last_name>Tong</last_name>
<dish_name>Hash Brows with Cheese</dish_name>
<restaurant_name>Waffle House</restaurant_name>
<post_img>https://img1.yumzing.com/1000/78e5c184fd3ae752f8665636381a8f0006762dc0</post_img>
<post_comment_count>6</post_comment_count>
<post_like_count>1</post_like_count>
<post_rezing_count>1</post_rezing_count>
<comments>
<comment>
<user_id>16</user_id>
<email>existentialism27@gmail.com</email>
<email_new></email_new>
<email_verification_code></email_verification_code>
<password>9d99ef4f72f9d2df968a75e058c78245fa45e9e7</password>
<password_reset_code></password_reset_code>
<salt>31a988badccd35a1be7dacc073f60f52e49ff881</salt>
<username>existentialism27</username>
<first_name>Daniel</first_name>
<last_name>Amaya</last_name>
<display_name>username</display_name>
<birth_month>10</birth_month>
<birth_day>5</birth_day>
<birth_year>1985</birth_year>
<city>Colorado Springs</city>
<state>CO</state>
<country>US</country>
<timezone>US/Mountain</timezone>
<last_seen>1338365509</last_seen>
<is_confirmed>1</is_confirmed>
<is_active>1</is_active>
<post_comment_id>9</post_comment_id>
<post_id>8</post_id>
<comment>this is a test comment!</comment>
<posted>1340334121</posted>
</comment>

<comment>
<user_id>16</user_id>
<email>existentialism27@gmail.com</email>
<email_new></email_new>
<email_verification_code></email_verification_code>
<password>9d99ef4f72f9d2df968a75e058c78245fa45e9e7</password>
<password_reset_code></password_reset_code>
<salt>31a988badccd35a1be7dacc073f60f52e49ff881</salt>
<username>existentialism27</username>
<first_name>Daniel</first_name>
<last_name>Amaya</last_name>
<display_name>username</display_name>
<birth_month>10</birth_month>
<birth_day>5</birth_day>
<birth_year>1985</birth_year>
<city>Colorado Springs</city>
<state>CO</state>
<country>US</country>
<timezone>US/Mountain</timezone>
<last_seen>1338365509</last_seen>
<is_confirmed>1</is_confirmed>
<is_active>1</is_active>
<post_comment_id>10</post_comment_id>
<post_id>8</post_id>
<comment>this is a test comment!</comment>
<posted>1340334128</posted>
</comment>
</comments>
</feed> 
```

在上面的 xml 响应中，我**得到了多个“提要”，我可以毫无问题地对其进行解析**，但是这里**每个“提要”都可以有 None 或 N 个“comment”**。我**无法解析单个提要的评论**。谁能建议我如何朝着正确的方向前进。

我**还在这里放了一段代码，而不是我用来解析 xml doc 的整个代码**，因此更容易找出问题所在。

```
DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
DocumentBuilder odb =  odbf.newDocumentBuilder();
InputSource is = new InputSource(new StringReader(xml));
Document odoc = odb.parse(is);
odoc.getDocumentElement().normalize ();    
NodeList LOP = odoc.getElementsByTagName("feed");
System.out.println(LOP.getLength());

  for (int s=0 ; s<LOP.getLength() ; s++){

       Node FPN =LOP.item(s);
       try{
            if(FPN.getNodeType() == Node.ELEMENT_NODE)
                {

            Element token = (Element)FPN;

            NodeList oNameList0 = token.getElementsByTagName("post_id");
            Element ZeroNameElement = (Element)oNameList0.item(0);
            NodeList textNList0 = ZeroNameElement.getChildNodes();

feed_post_id = Integer.parseInt(((Node)textNList0.item(0)).getNodeValue().trim());

 System.out.println("#####The Parsed data#####");
 System.out.println("post_id : " + ((Node)textNList0.item(0)).getNodeValue().trim());
 System.out.println("#####The Parsed data#####");

            }
           }catch(Exception ex){}
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:57:19.510

在其上运行提要 NodeList 并使用：

```
NodeList nodes = feedNode.getChildNodes();

  for (Node node: nodes)
  {
    if(node.getNodeName().equals("comments")){
    //do something with comments node
  }
} 
```

# ios - 如何使用 CgLayer 进行最佳绘图

> ID：11341763
> 
> 赞同：0
> 
> 时间：2012-07-05T09:46:08.487
> 
> 标签：ios, cocoa-touch, drawing, quartz-graphics, cglayer

我创建了一个简单的绘图项目，代码工作正常，但我想将绘图缓存到 CGlayer 中，因为我读到它更有效的绘图方式。我已阅读文件，但无法正确理解。所以朋友们，我请求你们在这方面帮助我。

下面是我的代码，我想知道如何在这个中使用 CgLayer

```
- (void)drawRect:(CGRect)rect
{

   CGContextRef context = UIGraphicsGetCurrentContext();

   if(myLayerRef == nil)
   {

       myLayerRef = CGLayerCreateWithContext(context, self.bounds.size, NULL);
   }

    CGContextRef layerContext = CGLayerGetContext(myLayerRef);

    CGContextDrawLayerAtPoint(context, CGPointZero, myLayerRef);   
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

    m_previousPoint2 = m_previousPoint1;
    m_previousPoint1 = [mytouch previousLocationInView:self];
    m_currentPoint = [mytouch locationInView:self];

    CGPoint mid1    = midPoint(m_previousPoint1, m_previousPoint2); 
    CGPoint mid2    = midPoint(m_currentPoint, m_previousPoint1);  

    testpath = CGPathCreateMutable();
    CGPathMoveToPoint(testpath, NULL, mid1.x, mid1.y);

    CGPathAddQuadCurveToPoint(testpath, NULL, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y);       

    CGContextRef context = UIGraphicsGetCurrentContext();

    context = CGLayerGetContext(myLayerRef);

    CGRect bounds = CGPathGetBoundingBox(testpath);   

     CGPathRelease(testpath);

    CGRect drawBox = bounds;

    //Pad our values so the bounding box respects our line width
    drawBox.origin.x        -= self.lineWidth * 2;
    drawBox.origin.y        -= self.lineWidth * 2;
    drawBox.size.width      += self.lineWidth * 4;
    drawBox.size.height     += self.lineWidth * 4;

   [self setNeedsDisplayInRect:drawBox];       
}

- (void) drawingOperations
{

    CGContextRef context1 = CGLayerGetContext(myLayerRef);

    CGPoint mid1 = midPoint(m_previousPoint1, m_previousPoint2); 
    CGPoint mid2 = midPoint(m_currentPoint, m_previousPoint1);

    CGContextMoveToPoint(context1, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context1, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context1, kCGLineCapRound);
    CGContextSetLineWidth(context1, self.lineWidth);
    CGContextSetStrokeColorWithColor(context1, self.lineColor.CGColor);

    CGContextSetFlatness(context1, 2.0);

    CGContextSetAllowsAntialiasing(context1, true);

    CGContextStrokePath(context1);
} 
```

问候兰吉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-05T17:36:44.080

@hfossli 发布的链接现已失效，但这是存档内容：

不再推荐 CGLayer

*robnapier 于 2012 年 7 月 13 日在图书更新中发布*

我花了很多时间在 WWDC 的实验室里提出问题并与开发人员交谈。这次我和 Core Graphics 工程师坐了下来，向他们询问了我最喜欢的未充分利用的工具之一：CGLayer，我将在第 6 章末尾讨论。CGLayer 听起来是个好主意：专门为在屏幕上绘图而优化的绘图上下文，与硬件优化。会出什么问题？

不过，我开始怀疑 CGLayer 总是一个伟大的胜利。如果您的图层太大而无法存储在 GPU 纹理中怎么办？CGLayer 被宣传用作您反复绘制的“印章”。将数据移入和移出 GPU 的成本很高。除非您绘制一定次数，否则可能 CGLayer 没有意义。文档对此没有提供任何指导。

所以我问 Core Graphics 团队“我什么时候应该使用 CGLayer？”</p>

“从来没有。”</p>

……？？？绝不？但是对于冲压对吗？

绝不。

于是我们又聊了几句。看起来 CGLayer 是那些在纸上听起来很棒的东西之一，但在实践中并不总是有效。有时它会更快。有时它更慢。什么时候会更快，没有简单的规则。随着时间的推移，他们似乎已经悄悄地放弃了它而没有真正弃用它。我已要求更新文档以符合 Apple 当前的建议。CGLayer 参考自 2006 年以来未更新。

我收到的建议是使用 CGBitmapContext 或 CALayer 进行标记。~~对于第 131-132 页给出的具体示例，CATextLayer 可能是最好的工具。请记住，您可以使用 initWithLayer: 轻松克隆 CALayer。（John Mueller 在下面指出，这实际上不受支持。）~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T08:34:37.140

不再适合使用 CGLayer

[http://iosptl.com/posts/cglayer-no-longer-recommended/](http://iosptl.com/posts/cglayer-no-longer-recommended/)

# django - Django - 带有控制数据的错误模型

> ID：11341768
> 
> 赞同：3
> 
> 时间：2012-07-05T09:46:21.890
> 
> 标签：django, django-models, django-forms, django-admin, django-views

我正在编写models.py 文件，我需要一些控件来执行某些字段的自动编译。

```
MOTIVOINGRESSO = (
         (u'sequestro ', u'sequestro'),
         (u'fermo ', u'fermo'),
         (u'confisca final ', u'confisca final'),
         (u'cambio custodian ', u'cambio custodian'),
     )
     motivo_ingresso = models.CharField (max_length = 50, choices = MOTIVOINGRESSO)

FERMO = (
         (u'30 ', u'30'),
         (u'60 ', u'60'),
         (u'90 ', u'90'),
         (u'180 ', u'180'),
         (u'1 month ', u'1 month'),
         (u'3 months, 'u'3 months'),
         (u'indeterminato ', u'indeterminato'),
     )
     durata_in_giorni_del_fermo = models.CharField (max_length = 20, choices = STOPPED, blank = True) 
```

如果管理员选择点击' *sequestro* '，在里面`durata_in_giorni_del_fermo`会自动选择' *indeterminato* '。我应该报告输入的值吗？或机器周期，如果在模型内？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:18:35.833

`Jquery`如果您在模板中完成它非常容易。我不知道，这在`models.py`. 以下链接与您的问题非常相关。

1.  [如何使用 Django 和 jQuery 实现两个相互依赖的下拉菜单](http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/)
2.  [使用 JQuery 和 django 动态选择字段](http://formerlyconversal.wordpress.com/2009/11/01/dynamic-select-fields-with-jquery-and-django/)

希望您在关注上述链接后对 ajax 和 Jquery 有所了解:)

# facebook - 如何以png格式获取facebook个人资料图片？

> ID：11341770
> 
> 赞同：2
> 
> 时间：2012-07-05T09:46:23.667
> 
> 标签：facebook

我想以编程方式获取 facebook 个人资料图片，然后将其作为纹理加载到我们的引擎中。由于我们的引擎只支持几种图片格式（bmp、tga、png），我想从 facebook 获取 png 格式的图片。

现在我看到头像有两种格式，未上传图片的为gif，已上传的为jpg。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:35:41.350

你有你的答案 - Facebook 只通过 API 返回 GIF 或 JPG 图像 - 如果你不能存储 JPG，你需要将它们转换为你自己的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T08:24:32.077

Facebook 确实以 JPG 格式返回个人资料图片。但是，您可以使用图像处理解决方案来动态转换为不同的格式。例如，您可以使用 Cloudinary - [http://cloudinary.com](http://cloudinary.com)（免责声明 - 我在 Cloudinary 工作）来做到这一点。

使用 Cloudinary，您可以获取 Facebook 个人资料图片，根据您的喜好进行任何图像转换，并转换为所有主要图像文件类型（包括 PNG）的任何格式。转换很容易进行，即时进行，并通过快速 CDN 交付。用户更改他/她的个人资料照片后，图像甚至会刷新

这是 Facebook 个人资料图片的示例。这是原文：

[https://graph.facebook.com/billclinton/picture?type=large](https://graph.facebook.com/billclinton/picture?type=large)

![](../Images/c12ab258b4c92d042b7171f0072fd996.png)

这是同一张图片，从 facebook 实时获取，调整为 80px 宽度和 120px 高度，填充裁剪，并将其转换为 PNG 文件： [https ://res.cloudinary.com/demo/image/facebook/ w_80,h_120,c_fill/billclinton.png](https://res.cloudinary.com/demo/image/facebook/w_80,h_120,c_fill/billclinton.png)

![](../Images/159022edacc36e6168b68f43c6824881.png)

您需要将“demo”替换为您自己帐户的云名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T10:47:18.833

Facebook 仅返回 jpeg 格式的图像。如果您的引擎仅支持 bmp、tga 和 png，那么最好的做法是在您请求时以编程方式将 jpg 转换为 png。

使用图形 api 访问图像：

1.  [https://graph.facebook.com/nike/picture?type=large](https://graph.facebook.com/nike/picture?type=large)（耐克 Facebook 页面图片）
2.  使用 imagecreatefromjpeg（用于 php）或等效工具将图像转换为 png

下面的回复有更多细节。

[使用 PHP 将 jpg 图像转换为 gif、png 和 bmp 格式](https://stackoverflow.com/questions/755781/convert-jpg-image-to-gif-png-bmp-format-using-php)

# android - GPS 的 IsProviderEnabled 不起作用

> ID：11341771
> 
> 赞同：4
> 
> 时间：2012-07-05T09:46:26.210
> 
> 标签：android, gps

我们已经为 Android 实现了基于地理的应用程序，因此我们需要确保始终启用 GPS。问题是

```
manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) 
```

即使启用了 GPS 提供程序，它也总是返回 false，因此我们的应用程序总是显示更改 GPS 状态的警报，或者它不工作。

你知道发生了什么吗？

我们正在使用三星 Galaxy S 和 HTC Wildfire 设备对其进行测试……提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:19:29.990

您可以直接从系统获取 GPS 状态：

```
LocationManager myLocationManager = (LocationManager)  getSystemService(Context.LOCATION_SERVICE);

private boolean getGPSStatus()
{
   String allowedLocationProviders =
   Settings.System.getString(getContentResolver(),
   Settings.System.LOCATION_PROVIDERS_ALLOWED);

   if (allowedLocationProviders == null) {
      allowedLocationProviders = "";
   }

   return allowedLocationProviders.contains(LocationManager.GPS_PROVIDER);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T17:27:01.417

您需要首先检查您的手机上是否真的存在 GPS。如果您的手机是便宜的手机，很可能它使用网络位置作为位置提供者。

你可以试试这个：

```
private boolean isGPSEnabled() {
Context context = Session.getInstance().getCurrentPresenter().getViewContext();

LocationManager locationMgr = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

boolean GPS_Sts = locationMgr.isProviderEnabled(LocationManager.NETWORK_PROVIDER)|| locationMgr.isProviderEnabled(LocationManager.GPS_PROVIDER);

return GPS_Sts;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T06:14:04.627

有时您的设备设置被设置为使用 WiFi 网络而不是 GPS 系统获取位置，以便打开该位置，但您的应用程序在检查`GPS_PROVIDER`.

正确的解决方案是同时检查 GPS 和网络：

如果你想检查使用`Settings`：

```
private boolean checkIfLocationOpened() {
    String provider = Settings.Secure.getString(getActivity().getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
    if (provider.contains("gps") || provider.contains("network"))
        return true;
    }
    // otherwise return false
    return false;
} 
```

如果你想使用`LocationManager`：

```
private boolean checkIfLocationOpened() {
    final LocationManager manager = (LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE);
    if (manager.isProviderEnabled(LocationManager.GPS_PROVIDER) || manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)){
        return true;
    }
    // otherwise return false
    return false;
} 
```

您可以在[我的回答](https://stackoverflow.com/a/47258015/1638739)中找到完整的详细信息。

# c# - 如何在 Windows 8 中在线播放背景音乐

> ID：11341772
> 
> 赞同：8
> 
> 时间：2012-07-05T09:46:32.383
> 
> 标签：c#, windows-8

在我的应用程序中，我使用 UI MediaElement。但是当我点击 Windows 键时，音乐停止了。

我尝试使用：

```
MediaControl.PlayPressed += MediaControl_PlayPressed;
        MediaControl.PausePressed += MediaControl_PausePressed;
        MediaControl.PlayPauseTogglePressed += MediaControl_PlayPauseTogglePressed;
        MediaControl.StopPressed += MediaControl_StopPressed; 
```

我设置源 MediaElement：

```
media.Source = new Uri("http://stream-hq.mp3.zdn.vn/fsgggsfdlwjglwjAAAAA/2a3f830202ea6d29bc7c5a5146401566/4ff5620a/2011/12/27/a/4/a4fcc199a184a93cfeb0fe35642c53bf.mp3", UriKind.RelativeOrAbsolute); 
```

请帮我！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T12:28:27.770

要让 Metro/WinRT 应用在后台播放音频，该应用需要满足以下条件：

1.  一个[MediaElement](http://msdn.microsoft.com/en-us/library/windows/apps/br242926.aspx)控件：
    1.  位于 XAML 页面中。
    2.  AudioCategory[属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.mediaelement.audiocategory.aspx)设置为[BackgroundCapableMedia](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.audiocategory.aspx)（如阿曼多的回答）。根据需要，游戏或通信系统还有其他价值。有关不同选项含义的信息，请参阅[Metro 应用程序中的音频播放。](http://msdn.microsoft.com/en-us/library/windows/hardware/hh770517)
2.  使用[MediaControl](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediacontrol%28v=win.10%29.aspx)对象至少捕获以下内容。如果需要，可以处理其他事件和属性，但后台播放功能需要以下内容。
    1.  [按下播放](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediacontrol.playpressed.aspx)
    2.  [停止按下](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediacontrol.stoppressed.aspx)
    3.  [播放暂停切换按下](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediacontrol.playpausetogglepressed.aspx)
    4.  [暂停按下](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediacontrol.pausepressed.aspx)
3.  将音频添加到应用程序清单中的支持后台任务列表。清单通常称为`Package.appxmanifest`. 在解决方案资源管理器中选择它，转到声明选项卡并选中“音频”，如图所示：

![在此处输入图像描述](../Images/bef2e7c93f198179132a2e15414d5a8b.png)

有关捕获硬件按钮（例如，在键盘上播放/暂停）的更多信息，请参阅[传输控制指南以及](http://msdn.microsoft.com/en-us/library/windows/hardware/hh833781)[创建媒体播放器的快速入门指南以](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh986967.aspx)获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:56:41.393

这将是我的第一个答案。确保您`AudioCategory="BackgroundCapableMedia"`在 XAML 中设置如下：

```
<MediaElement x:Name="backgroundMusic" 
              AutoPlay="True" 
              AudioCategory="BackgroundCapableMedia" 
              Source="mms://betafm.santafe-conicet.gov.ar:1175">
</MediaElement> 
```

希望能帮助到你！

# ios - MKAnnotation 无需点击即可显示所有图钉标题

> ID：11341773
> 
> 赞同：5
> 
> 时间：2012-07-05T09:46:33.450
> 
> 标签：ios, mkannotation, mkannotationview

我正在以编程方式添加多个注释，如下所示：

```
- (void)addAnnotations{
    NSInteger i;
    CLLocationCoordinate2D location;

    for ( i = 0 ; i < [storeLatitude count] ; i ++ ){
        location.latitude = [[storeLatitude objectAtIndex:i] floatValue];
        location.longitude = [[storeLongitude objectAtIndex:i] floatValue];

        MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:[listOfStores objectAtIndex:i] andCoordinate:location];
        [self.mapView addAnnotation:newAnnotation];
        [newAnnotation release];    
    }
} 
```

是否可以在不单击它们的情况下显示所有图钉的标题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T10:32:22.730

声明一个数组来存储所有注解并使用 MKMapView 的 setSelectedAnnotations:(NSArray *) 方法

```
- (void)addAnnotations {

    NSMutableArray *annotationArray = [[NSMutableArray alloc]init];
    NSInteger i;
    CLLocationCoordinate2D location;

    for ( i = 0 ; i < [storeLatitude count] ; i ++ ) {
        location.latitude = [[storeLatitude objectAtIndex:i] floatValue];
        location.longitude = [[storeLongitude objectAtIndex:i] floatValue];

        MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:    [listOfStores objectAtIndex:i] andCoordinate:location];
        [annotationArray addObject:newAnnotation];
        [self.mapView addAnnotation:newAnnotation];    
    }
    [mapView setSelectedAnnotations:annotationArray];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T10:09:08.143

尝试这个。它会自动显示标题。

```
-(void)mapView:(MKMapView *)mapView1 didAddAnnotationViews:(NSArray *)views
{
    [self.mapView selectAnnotation:yourannotationpin animated:NO];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:07:06.210

U 可以使用自定义注释视图来显示标题和子标题，而无需单击图钉。有一个自定义注释视图的教程。

[此应用程序包含自定义注释视图](http://developer.apple.com/library/ios/#samplecode/WeatherMap/Introduction/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-16T19:07:19.407

找不到 swift 版本`setSelectedAnnotations`。下面显示了标题，但是对于多个移动目标，只有数组中最后一个的标题才会显示，直到下一次迭代`didAdd`。所以仍在寻找更通用/完整的解决方案。

```
func mapView(_ mapView: MKMapView, didAdd views: [MKAnnotationView]) {
    for view in views {
        if let annotation = view.annotation, let title = annotation.title {
            print("displaying:\(title!)")
            mapView.selectAnnotation( annotation, animated: true )
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-05T09:53:42.917

不，这是不可能的。您必须单击 pin Annotation 才能显示标题。

# android - Android：使用下载将数据保存到内存

> ID：11341782
> 
> 赞同：0
> 
> 时间：2012-07-05T09:47:00.510
> 
> 标签：android, storage, internal, download-manager

我正在使用`DownloadManager`该类从 Android 中的服务器下载文件。我想将此文件存储在设备的内部存储器中。我尝试使用[这里](https://stackoverflow.com/questions/11340853/android-download-file-from-internet-using-downloadmanager-and-save-it-to-the-in)`.setDestinationInExternalPublicDir(Environment.getExternalStorageDirectory() +"/Android/data/xxx.xxx.xxx/files/")`提到的，但它不起作用。如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:49:27.083

添加

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

到 manifest.xml 并创建“/Android/data/xxx.xxx.xxx/files/”路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:07:19.440

尝试这个

```
File testDirectory = new File(Environment.getExternalStorageDirectory() +"/Android/data/xxx.xxx.xxx/files/"); 
```

和

```
if (!testDirectory.exists()) {
    testDirectory.mkdirs();
        } 
```

# java - 访问自定义 Maven 报告插件中的类

> ID：11341783
> 
> 赞同：2
> 
> 时间：2012-07-05T09:47:03.170
> 
> 标签：java, maven, reflection, maven-plugin

我编写了一个自定义 maven 报告插件来输出有关 spring-mvc 类的一些基本信息。在我的内部测试中，我可以看到这样的代码：

```
public Set<Class<?>> findControllerClasses(File buildOutputDir) throws IOException, ClassNotFoundException {

    Collection<URL> urls = ClasspathHelper.forJavaClassPath();
    if (buildOutputDir != null) {
        urls.add(buildOutputDir.toURI().toURL());
    }

    Reflections reflections = new Reflections(new ConfigurationBuilder().setUrls(urls));
    Set<Class<?>> types = reflections.getTypesAnnotatedWith(Controller.class);
    return types;
} 
```

在引入带注释的类方面效果很好。但是，当我在另一个项目中使用报告插件时，不会选择带注释的类。

有人可以阐明如何访问已编译的类以进行报告吗？或者这是否可能？

编辑：使用以下答案部分解决： [将 maven-build-classpath 添加到插件执行类路径](https://stackoverflow.com/questions/2659048/add-maven-build-classpath-to-plugin-execution-classpath)

但是，这只会加载类，如果它们在 maven 的 runtimeClasspathElements var 之外没有依赖项。有没有办法将这些类也合并到类域中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:41:15.403

也许使用

```
/**
 * The classpath elements of the project.
 * 
 * @parameter expression="${project.runtimeClasspathElements}"
 * @required
 * @readonly
 */
private List<String> classpathElements; 
```

和

```
private ClassLoader getProjectClassLoader()
    throws DependencyResolutionRequiredException, MalformedURLException
{
    List<String> classPath = new ArrayList<String>();
    classPath.addAll( classpathElements );
    classPath.add( project.getBuild().getOutputDirectory() );
    URL[] urls = new URL[classPath.size()];
    int i = 0;
    for ( String entry : classPath )
    {
        getLog().debug( "use classPath entry " + entry );
        urls[i] = new File( entry ).toURI().toURL();
        i++; // Important
    }
    return new URLClassLoader( urls );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:35:28.620

好的。扩展上述评论中的答案，完整的解决方案是使用一个同时考虑运行时类路径和来自 poms 依赖项的 URL 的配置器。代码如下所示

```
/**
 * 
 * @plexus.component 
 *                   role="org.codehaus.plexus.component.configurator.ComponentConfigurator"
 *                   role-hint="include-project-dependencies"
 * @plexus.requirement role=
 *                     "org.codehaus.plexus.component.configurator.converters.lookup.ConverterLookup"
 *                     role-hint="default"
 * 
 */
public class ClassRealmConfigurator extends AbstractComponentConfigurator {

    private final static Logger logger = Logger.getLogger(ClassRealmConfigurator.class.getName());

    public void configureComponent(Object component, PlexusConfiguration configuration, ExpressionEvaluator expressionEvaluator, ClassRealm containerRealm, ConfigurationListener listener) throws ComponentConfigurationException {

        addProjectDependenciesToClassRealm(expressionEvaluator, containerRealm);

        converterLookup.registerConverter(new ClassRealmConverter(containerRealm));

        ObjectWithFieldsConverter converter = new ObjectWithFieldsConverter();

        converter.processConfiguration(converterLookup, component, containerRealm.getClassLoader(), configuration, expressionEvaluator, listener);
    }

    private void addProjectDependenciesToClassRealm(ExpressionEvaluator expressionEvaluator, ClassRealm containerRealm) throws ComponentConfigurationException {
        Set<String> runtimeClasspathElements = new HashSet<String>();
        try {
            runtimeClasspathElements.addAll((List<String>) expressionEvaluator.evaluate("${project.runtimeClasspathElements}"));

        } catch (ExpressionEvaluationException e) {
            throw new ComponentConfigurationException("There was a problem evaluating: ${project.runtimeClasspathElements}", e);
        }

        Collection<URL> urls = buildURLs(runtimeClasspathElements);
        urls.addAll(buildAritfactDependencies(expressionEvaluator));
        for (URL url : urls) {
            containerRealm.addConstituent(url);
        }
    }

    private Collection<URL> buildAritfactDependencies(ExpressionEvaluator expressionEvaluator) throws ComponentConfigurationException {
        MavenProject project;
        try {
            project = (MavenProject) expressionEvaluator.evaluate("${project}");
        } catch (ExpressionEvaluationException e1) {
            throw new ComponentConfigurationException("There was a problem evaluating: ${project}", e1);
        }
        Collection<URL> urls = new ArrayList<URL>();
        for (Object a : project.getArtifacts()) {
            try {
                urls.add(((Artifact) a).getFile().toURI().toURL());
            } catch (MalformedURLException e) {
                throw new ComponentConfigurationException("Unable to resolve artifact dependency: " + a, e);
            }
        }
        return urls;
    }

    private Collection<URL> buildURLs(Set<String> runtimeClasspathElements) throws ComponentConfigurationException {

        List<URL> urls = new ArrayList<URL>(runtimeClasspathElements.size());
        for (String element : runtimeClasspathElements) {
            try {
                final URL url = new File(element).toURI().toURL();
                urls.add(url);
            } catch (MalformedURLException e) {
                throw new ComponentConfigurationException("Unable to access project dependency: " + element, e);
            }
        }

        return urls;
    }

} 
```

# php - 无法访问包含@符号的数组对象

> ID：11341789
> 
> 赞同：0
> 
> 时间：2012-07-05T09:47:32.640
> 
> 标签：php, web

我有一个在对象中包含 @sign 的数组。我无法访问它
实际上我正在
将XML 解析为数组`print_r`输出如下

```
[link] => SimpleXMLElement Object
                        (
                            [@attributes] => Array
                                (
                                    [type] => text/html
                                    [href] => http://www.livingsocial.com/cities/1964-klang-valley-kuala-lumpur/deals/393950-2-pax-steamboat-set-2-iced-lemon-tea
                                    [rel] => alternate
                                )

                        ) 
```

$entry->link-> **@attributes** ->href
无法访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:56:24.990

您必须使用[attributes()](http://www.php.net/manual/de/simplexmlelement.attributes.php)方法从 SimpleXMLElement 对象中获取属性

```
 $entry->link->attributes(); 
```

如果要将 href 属性作为字符串获取，可以执行以下操作：

```
$href = $entry->link->attributes()->href->__toString(); 
```

# silverlight - Silverlight 应用程序在部署时不工作

> ID：11341791
> 
> 赞同：1
> 
> 时间：2012-07-05T09:47:49.893
> 
> 标签：silverlight, authentication, iis, deployment, nullreferenceexception

编辑：

在 MainPage.xaml.cs

```
public MainPageViewModel ViewModel
        {
            set
            {
                try
                {
                    DataContext = value;
                }
                catch (Exception ex)
                {
                    MessageBox.Show(string.Format("Message: {0} \r\n StackTrace: {1}", ex.Message, ex.StackTrace));
                }
            }
        } 
```

在调试时，没有消息框

部署：

消息：对象引用未设置为对象 StackTrace 的实例：

```
at System.Windows.Data.BindingExpression.SendDataToTarget()
at System.Windows.Data.BindingExpression.SourceAcquired()
at System.Windows.Data.BindingExpression.System.Windows.IDataContextChangedListener.OnDataContextChanged(Object sender, DataContextChangedEventArgs e)
at at System.Windows.WeakDataContextChangedListener.MentorDataContextChanged(Object sender, DataContextChangedEventArgs e)... 
```

# javascript - Twitter Bootstrap Typeahead 与静态数据

> ID：11341793
> 
> 赞同：0
> 
> 时间：2012-07-05T09:47:51.140
> 
> 标签：javascript, ajax, twitter-bootstrap, typeahead

对于非常大的数据，我需要使用预先输入。数据的生成耗时4-5秒。所以我不能每次都进行 Ajax 调用。我根据用户请求下载并缓存数据。我的代码如下：

```
$("#build-package-list-btn").click(function(){
        $.get**JSON**("/packages", function(data){
            // data is an array
            $("#typeahead-packages").typeahead({source:data});
            console.log(data == null); // returns false
        });
    }) 
```

它没有给出任何错误，但是每当我尝试写入预输入文本框时，它都会给我以下错误：

```
Uncaught TypeError: Cannot call method 'toLowerCase' of null bootstrap.js:1644
Typeahead.matcher bootstrap.js:1644
(anonymous function) bootstrap.js:1631
e.extend.grep jquery-1.7.2.min.js:2
Typeahead.lookup bootstrap.js:1630
Typeahead.keyup bootstrap.js:1738
e.extend.proxy.g jquery-1.7.2.min.js:2
f.event.dispatch jquery-1.7.2.min.js:3
f.event.add.h.handle.i jquery-1.7.2.min.js:3 
```

我的预输入是这样的（JADE）

```
input#typeahead-packages(type="text",data-provide="typeahead") 
```

我也在 Chrome 控制台中尝试过：

```
 $("#typeahead-packages").typeahead({source:["abcdef","abcddd","abcccc"]}); 
```

但是 typeahead 不会给出错误，但它也不起作用。我找不到我做错了什么。我正在使用 2.0.4 引导程序。

**编辑：**我将它从 get 更改为 getJSON 并没有帮助。但是，当我构建这样的数据时，它正在工作：

```
data = [new String((data[0])), new String((data[5]))]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:23:03.813

根据您的更新，问题来自 JSON。

> ## jQuery.getJSON()
> 
> 重要提示：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。（[来源](http://api.jquery.com/jQuery.getJSON/)）

您应该专注于项目的来源。确保这是一个字符串数组。您的错误建议`data`是一个字符串。

您可以使用 Chrome 控制台（或任何您选择的），在*Network 选项卡*下，监视 AJAX 请求的实际结果。[JSONLint](http://jsonlint.com/)是一个有趣的工具来验证你的结果。

然后你的下一个问题将是更新已经初始化的预输入的源。您可以使用以下代码：

```
var $myTypeahead = $('#myTypeahead');
var typeaheadObj = $myTypeahead.data('typeahead');
if(typeaheadObj) typeaheadObj.source = ["abc", "cde"]; 
```

[示例（jsfiddle）](http://jsfiddle.net/Sherbrow/bTzZm/)

# zeromq - zeromq 和 bind_to_random_port - 如何选择端口

> ID：11341795
> 
> 赞同：11
> 
> 时间：2012-07-05T09:48:10.477
> 
> 标签：zeromq, pyzmq

在python中，我使用以下内容：

```
 context = zmq.Context()
    socket = context.socket(zmq.PUSH)
    socket.bind_to_random_port('tcp://*', min_port=6001, max_port=6004, max_tries=100)
    port_selected = socket.??????? 
```

我怎么知道选择了哪个端口？我将在 redis 中查找表供工人阅读。

我正在使用推拉模型。我需要让工作人员知道要连接到哪些端口。

我必须这样做，因为我在 uwsgi 中使用 gevent 循环并指定一个普通的盲目 thows 和因为 fork 的错误。如果使用 bind_to_random_port 然后选择一个端口，我只是不知道是哪个。

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/gevent-1.0b2-py2.7-linux-x86_64.egg/gevent/greenlet.py",
line 328, in run
    result = self._run(*self.args, **self.kwargs)
  File "/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbUwsgiPixelServer/uwsgiPixelServer.py",
line 43, in sendthis
    socket.send(push)
  File "/usr/local/lib/python2.7/dist-packages/zmq/green/core.py",
line 173, in send
    self._wait_write()
  File "/usr/local/lib/python2.7/dist-packages/zmq/green/core.py",
line 108, in _wait_write
    assert self.__writable.ready(), "Only one greenlet can be waiting
on this event"
AssertionError: Only one greenlet can be waiting on this event
<Greenlet at 0x2d41370: sendthis('2012-07-02 04:05:15')> failed with
AssertionError 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T18:03:51.207

```
port_selected = socket.bind_to_random_port('tcp://*', min_port=6001, max_port=6004, max_tries=100) 
```

# resize - 无法在 cs5 中将图像大小调整为 72 x 72

> ID：11341797
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:48:15.097
> 
> 标签：resize, photoshop, flash-cs5

我正在尝试为我的 Hello World (Android) 应用程序制作一个 72 x 72 的高分辨率图标。

我去了图像调整大小，输入 72 高度和宽度自动更改为 59。我将宽度更改为 72，高度更改为 88。我无法让它们都更改为 72 - 这可能吗？

[http://i1043.photobucket.com/albums/b439/darrengove/resize.png](http://i1043.photobucket.com/albums/b439/darrengove/resize.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T23:34:55.343

您可以先将其调整为 88x72 像素，然后使用裁剪工具 (Ctrl+Alt+C) 进行裁剪。

而已 ：）

# android - 强制关闭，使用 asynctask 下载文件

> ID：11341800
> 
> 赞同：0
> 
> 时间：2012-07-05T09:48:19.110
> 
> 标签：android, android-asynctask

我有一个正在运行的下载功能。但是当我运行它时，就像 80% 的时间它让我的手机滞后，强制关闭，很长一段时间没有响应，比如 1~2 分钟。这种情况非常随机发生，我无法真正追踪到问题所在。下载完成后设备将恢复正常。我尝试过各种设备，例如galaxy S2、galaxy note、SE xperia Arc S 和几张桌子。问题依旧。谁能建议我如何改进我的代码？以下是我现有的代码：

```
public void onClickDownload(View view){
        String url = "http://www.mydomain.com./" + fileURL;
        url = url.replaceAll(" ","%20");
        String sourceUrl = url;
        new DownloadFileAsync().execute(sourceUrl);
    }   

public class DownloadFileAsync extends AsyncTask<String, Integer, Void> {
        private boolean run_do_in_background = true;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        }

    @Override
    protected Void doInBackground(String... aurl) {
        int count;
        try {
            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lengthOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lengthOfFile);

            File folder = new File(Environment.getExternalStorageDirectory() + "/MaxApps");
            boolean success = false;
            if (!folder.exists()) {
                success = folder.mkdirs();
            }
            if (!success) {
            } else {
            }

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/MaxApps/" + apkURL);

            byte data[] = new byte[100*1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
            total += count;             
            int progressPercent = (int) ((total*100)/lengthOfFile);
            if(progressPercent % 5 == 0){  
                publishProgress(progressPercent);
                }
            output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            } catch (Exception e) {

                notificationManager.cancel(Integer.parseInt(ID.toString()));

                Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
                MyN.tickerText = "Download Failed";
                MyN.number = 1;
                MyN.setLatestEventInfo (getApplicationContext(), apkURL + " Download Failed.", "Please try again", MyPI);
                MyN.flags |= Notification.FLAG_AUTO_CANCEL;
                MyNM.notify(1, MyN);    
                run_do_in_background = false;
            }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {          
        notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
        notificationManager.notify(Integer.parseInt(ID.toString()), notification);
        }

    @Override
    protected void onPostExecute(Void unused) {
        if(run_do_in_background) {
        notificationManager.cancel(Integer.parseInt(ID.toString()));

        Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
        MyN.tickerText = "Download Complete";
        MyN.number = 1;
        MyN.setLatestEventInfo (getApplicationContext(), "Download Complete, Click to install.", apkURL, MyPI);
        MyN.flags |= Notification.FLAG_AUTO_CANCEL;
        MyNM.notify(Integer.parseInt(ID.toString()) , MyN);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:19:39.583

可能是更新 UI 需要很长时间？也许您可以尝试像这样进行测试，看看它是否有所作为：

```
@Override
protected void onProgressUpdate(Integer... progress) {          
    Log.d("ANDRO_ASYNC", "Progress: " + progress[0]);
} 
```

顺便说一句，这与您的要求无关，但我认为您在处理进度的代码中存在问题：

```
int progressPercent = (int) ((total*100)/lengthOfFile);
if(progressPercent % 5 == 0){  
     publishProgress(progressPercent);
} 
```

只有当进度正好是 5、10、15、20% 等时才会更新进度……我猜你实际上想在进度比以前至少 %5 时更新进度。

```
int previousProgress = 0;
while ((count = input.read(data)) != -1) {
    total += count;             
    int progressPercent = (int) ((total*100)/lengthOfFile);
    if(progressPercent - previousProgress >= 5) {  
        previousProgress = progressPercent;
        publishProgress(progressPercent);
    }
    output.write(data, 0, count);
} 
```

# scipy - Scipy/Python 间接样条插值

> ID：11341804
> 
> 赞同：0
> 
> 时间：2012-07-05T09:48:25.570
> 
> 标签：scipy, curve-fitting, spline

我需要以相当间接的方式拟合数据。要在拟合中恢复的原始数据是一些线性函数，上面有小的振荡和漂移，我想识别它。我们称之为 f(t)。我们不能在实验中直接记录这个参数，只能间接记录，比如 g(f) = sin(af(t))。（真正的传递函数更复杂，但在这里应该不起作用）

因此，如果 f(t) 朝着 sin 函数的转折点改变方向，则很难识别，我尝试了一种替代方法来恢复 f(t)，而不仅仅是 g 的反函数和一些数据继续猜测：

我创建了一个模型函数 fm(t)，它经历相同且已知的传递函数 g() 并将 g(fm(t)) 拟合到数据中。由于数据集很大，我对连续的数据块进行分段处理，以保证 fm 在整个数据集中的连续性。

第一次尝试是使用使用 optimize.leastsq 的线性函数，其中误差估计来自 g(fm)。这并不完全令人满意，我认为最好将样条拟合到数据中以获得 fspline(t) 作为 f(t) 的模型，从而保证数据及其导数的连续性。

它的问题是，插值包中的样条拟合直接对数据起作用，所以我不能使用 g(fspline) 包装样条并对此进行样条插值。有没有办法在 scipy 中做到这一点？

还有其他想法吗？

我尝试了二次函数并修复了偏移和斜率，以匹配前面拟合的数据块，所以只有一个拟合参数，曲率，它很快开始偏离

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:23:24.630

谢谢你的这些评论。我尝试了上面建议的多项式基础，但多项式不能满足我的需求，它们往往会产生振铃，这很难调节。

我现在找到的使用样条的解决方案非常简单明了，我认为这就是您所说的“以间接方式使用样条”的意思。

拟合函数 f(t) 由 interpolate.splev(x, (t,c,k)) 函数获得，但通过 omptimize.leastsq 函数提供样条系数 c。这样，f(t) 不是直接样条拟合（通常使用 splrep(x, y) 函数获得），而是在拟合中间接优化，因此可以在其上使用链接函数 g。c 的初始猜测可以通过对模型数据的 splrep(xinit, yinit, t=knots) 进行一次评估来获得。

一个技巧是通过在 splrep() 函数调用期间显式指定样条曲线的节点数限制在数据点数以下，并在使用 splev() 评估期间给出这个缩减集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T03:30:03.423

您需要的是样条基函数矩阵 b(t)，因此您可以将 f(t) 近似为样条基函数的线性组合

```
f(t) = np.dot(b(t), coefs) 
```

然后通过 optimize.leastsq 估计系数 coefs。

但是，据我所知，样条基函数在 python 中并不容易获得（除非您借用实验脚本或搜索某些包的代码）。

相反，您也可以使用多项式，例如

```
b(t) = np.polynomial.chebvander(t, order) 
```

并使用多项式近似而不是样条。

这个问题的结构非常类似于广义线性模型，其中 g 是您已知的链接函数，并且类似于计量经济学中的指数问题。

如果您创建人工数据，则可以以间接方式使用 scipy 样条曲线

```
y_i = f(t_i) 
```

其中 f(t_i) 是 scipy.interpolate splines，y_i 是要在最小二乘优化中估计的参数。（大致基于我前段时间看到的一个脚本，该脚本使用它来创建与 scipy 版本不同的平滑样条曲线。我不记得我在哪里看到的。）

# java - 在java中使用字节将对象数据从表保存到数据库

> ID：11341805
> 
> 赞同：0
> 
> 时间：2012-07-05T09:48:28.257
> 
> 标签：java, sql, user-interface, jdbc

经过一些研究，我似乎应该在发送之前将我的对象修改为字节。由于我的代码相当广泛，我将在演示中给出它。我的问题是成功完成程序后什么也没有发生。

SAVE 和 SET 变量在私有 void 中以下列方式命名

```
int count = jTable1.getRowCount();

    for(int i=0;i<count;i++){
//SET0       
        SET0 = new Object[1][count];
        SET0[0][i] = txt.getText();
        ByteArrayOutputStream baosSET0 = new ByteArrayOutputStream();
        ObjectOutputStream oosSET0 = new ObjectOutputStream(baosSET0);
        oosSET0.writeObject(SET0.toString());
        byte[] SET0asBytes = baosSET0.toByteArray();
        ByteArrayInputStream baisSET0 = new ByteArrayInputStream(SET0asBytes); 
```

和

```
 SAVE = new Object[1][count];  
      SAVE[0][i] = jTable1.getModel().getValueAt(i,0);
      ByteArrayOutputStream baosSAVE = new ByteArrayOutputStream();
        ObjectOutputStream oosSAVE = new ObjectOutputStream(baosSAVE);
        oosSAVE.writeObject(SAVE.toString());
        byte[] SAVEasBytes = baosSAVE.toByteArray();
        ByteArrayInputStream baisSAVE = new ByteArrayInputStream(SAVEasBytes); 
```

这导致我的 SQL 查询：

```
 String sqla1 = "INSERT INTO MIT(MTY_KOD,MTY_TYY,MTY_ALU,MTY_PAR1,MTY_PAR2,MTY_TOL,MTY_KAN,MTY_DATE) values(?,?,?,?,?,?,?,?);";

 try{
       pst = conn.prepareStatement(sqla1);

   pst.setBinaryStream(1, baisSET0 , SET0asBytes.length);
   pst.setBinaryStream(2, baisSET2, SET2asBytes.length);
   pst.setBinaryStream(3, baisSET1, SET1asBytes.length);
   pst.setBinaryStream(4, baisSAVE, SAVEasBytes.length);
   pst.setBinaryStream(5, baisSAVE3, SAVE3asBytes.length);
   pst.setBinaryStream(6, baisSAVE5, SAVE5asBytes.length);
   pst.setBinaryStream(7, baisSET3, SET3asBytes.length);
   pst.setBinaryStream(8, baisSET2, SET2asBytes.length);

   pst.executeUpdate();}
 catch (Exception e) {
   System.out.println(e);
        } 
```

事件从以下位置触发：

```
if(txt.getText().isEmpty()){
    }else{ 
        try{
    INSERT();}
        catch(IOException ex){
        System.out.println(ex);
        }
    } 
```

我得到的错误是：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The stream value is not the specified length. The specified length was 35, the actual length is 0. 
```

谁能指导我如何解决此错误...或另一种保存信息的方法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:16:42.683

我怀疑你需要关闭你的`ObjectOutputStream`.

从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)：

```
FileOutputStream fos = new FileOutputStream("t.tmp");
ObjectOutputStream oos = new ObjectOutputStream(fos);
oos.writeInt(12345);
oos.writeObject("Today");
oos.writeObject(new Date());
oos.close();   // <-- my emphasis! 
```

# regex - sed/awk 替换所有匹配项

> ID：11341806
> 
> 赞同：1
> 
> 时间：2012-07-05T09:48:30.837
> 
> 标签：regex, sed, awk

我想反转一堆文件中的所有颜色值。颜色都是十六进制格式`#ff3300`，因此可以使用 sed 命令按字符进行反转

```
y/0123456789abcdef/fedcba9876543210/ 
```

如何遍历所有颜色匹配并在 sed 或 awk 中进行字符转换？

编辑：

样本输入：

```
random text... #ffffff_random_text_#000000__
asdf#00ff00
asdfghj 
```

所需的输出：

```
random text... #000000_random_text_#ffffff__
asdf#ff00ff
asdfghj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:06:16.690

这可能对您有用（GNU sed）：

```
sed '/#[a-f0-9]\{6\}\>/!b
s//\n&/g
h
s/[^\n]*\(\n.\{7\}\)[^\n]*/\1/g
y/0123456789abcdef/fedcba9876543210/
H
g
:a;s/\n.\{7\}\(.*\n\)\n\(.\{7\}\)/\2\1/;ta
s/\n//' file 
```

解释：

*   `/#[a-f0-9]\{6\}\>/!b`摆脱不包含所需模式的行
*   `s//\n&/g`在每个模式前加上换行符
*   `h`将此复制到保留空间
*   `s/[^\n]*\(\n.\{7\}\)[^\n]*/\1/g`删除除所需模式之外的所有内容
*   `y/0123456789abcdef/fedcba9876543210/`转换模式
*   `H`将新模式附加到保留空间
*   `g`用保持空间的内容覆盖模式空间
*   `:a;s/\n.\{7\}\(.*\n\)\n\(.\{7\}\)/\2\1/;ta`用新模式替换旧模式。
*   `s/\n//``H`从命令中删除换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T09:51:57.053

*编辑*：我根据您的编辑更改了我的回复。

好的，`sed`可能会导致处理困难。`awk`可以或多或少轻松地做到这一点，但我发现`perl`这项任务更容易：

```
$ perl -pe 's/#[0-9a-f]+/$&=~tr%0123456789abcdef%fedcba9876543210%r/ge' <infile >outfile 
```

基本上你找到了模式，然后执行右侧，它在匹配上执行 tr，并替换那里的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:14:59.687

倒置真的是*减法*。要反转一个十六进制，你只需从`ffffff`.
考虑到这一点，您可以构建一个简单的脚本来处理每一行，提取十六进制，反转它们，然后将它们注入回行。

* * *

这仅使用**Bash**（请参阅数组，`printf -v`等`+=`）（那里没有外部工具）：

```
#!/usr/bin/env bash

[[ -f $1 ]] || { printf "error: cannot find file: %s\n" "$1" >&2; exit 1; }

while read -r; do
    # split line with '#' as separator
    IFS='#' toks=( $REPLY )
    for tok in "${toks[@]}"; do
        # extract hex
        read -n6 hex <<< "$tok"
        # is it really a hex ?
        if [[ $hex =~ [0-9a-fA-F]{6} ]]; then
            # compute inversion
            inv="$((16#ffffff - 16#$hex))"
            # zero pad the result
            printf -v inv "%06x" "$inv"
            # replace hex with inv
            tok="${tok/$hex/$inv}"
        fi
        # build the modified line
        line+="#$tok"
    done
    # print the modified line and clean it for reuse
    printf "%s\n" "${line#\#}"
    unset line
done < "$1" 
```

* * *

像这样使用它：

```
$ ./invhex infile > outfile 
```

测试用例输入：

```
random text... #ffffff_random_text_#000000__
asdf#00ff00
bdf#cvb_foo
asdfghj
#bdfg 
```

处理后的输出：

```
random text... #000000_random_text_#ffffff__
asdf#ff00ff
bdf#cvb_foo
asdfghj
#bdfg 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T11:50:24.823

这有效...

```
cat test.txt |sed -e 's/\#\([0123456789abcdef]\{6\}\)/\n\#\1\n/g' |sed -e ' /^#.*/ y/0123456789abcdef/fedcba9876543210/' | awk '{lastType=type;type= substr($0,1,1)=="#";} type==lastType && length(line)>0 {print line;line=$0} type!=lastType {line=line$0} length(line)==0 {line=$0} END {print line}' 
```

第一个 sed 命令在十六进制代码周围插入换行符，然后可以在所有以散列开头的行上进行替换。可能有一个优雅的解决方案可以再次合并这些行，但是 awk 命令可以完成这项工作。唯一的假设是不会有两个直接紧随其后的十六进制代码。如果是这样，则必须修改此步骤。

# java - Liferay：严重：无法初始化 PropsUtil java.lang.NullPointerException

> ID：11341807
> 
> 赞同：1
> 
> 时间：2012-07-05T09:48:31.203
> 
> 标签：java, hook, liferay-6

我正在尝试向 Liferay 用户发布登录操作添加一个挂钩，因此我创建了 liferay-hook.xml 指向 portal.properties，它指向我的类：

```
public class PostLoginActionHook extends Action {

@Override
public void run(HttpServletRequest request, HttpServletResponse response)
        throws ActionException {
    try {
        runExceptionThrowing(request, response);
    } catch (Exception e) {
        e.printStackTrace();
        throw new ActionException(e);
    }
} 
```

但是在服务器启动时出现以下异常：

```
SEVERE: Unable to initialize PropsUtil
java.lang.NullPointerException
at java.util.Hashtable.put(Hashtable.java:394)
at java.util.Properties.setProperty(Properties.java:143)
at java.lang.System.setProperty(System.java:729)
at com.liferay.portal.kernel.util.SystemProperties.set(SystemProperties.java:52)
at com.liferay.portal.util.PropsUtil.<init>(PropsUtil.java:172)
at com.liferay.portal.util.PropsUtil.<clinit>(PropsUtil.java:323)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.kernel.util.MethodHandler.invoke(MethodHandler.java:77)
at com.liferay.portal.kernel.util.PortalClassInvoker.invoke(PortalClassInvoker.java:42)
at com.liferay.portal.kernel.util.PropsUtil.get(PropsUtil.java:32)
at com.liferay.util.log4j.Log4JUtil._getLiferayHome(Log4JUtil.java:193)
at com.liferay.util.log4j.Log4JUtil._getURLContent(Log4JUtil.java:201)
at com.liferay.util.log4j.Log4JUtil.configureLog4J(Log4JUtil.java:67)
at com.liferay.util.log4j.Log4JUtil.configureLog4J(Log4JUtil.java:57)
at com.liferay.portal.util.InitUtil.init(InitUtil.java:94)
at com.liferay.portal.spring.context.PortalContextLoaderListener.contextInitialized(PortalContextLoaderListener.java:134)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

有人处理过吗？

我正在使用 Liferay 6.1

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:15:49.817

从来没有处理过。

但是您可以尝试扩展 BaseStrutsAction 而不是 Action。当我覆盖一个动作时，这就是我所做的。

# asp.net - asp.net webfarm 部署

> ID：11341808
> 
> 赞同：0
> 
> 时间：2012-07-05T09:48:41.640
> 
> 标签：asp.net, deployment, web-farm

有人可以向我指出一个资源，我可以详细说明在网络农场场景中部署 asp.net 应用程序的注意事项吗？

在低级设计期间是否需要考虑 Web 场部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:26:55.047

Web Farm 部署肯定是低级设计期间的一个考虑因素。您需要决定在哪里存储会话变量，这在很大程度上取决于您如何进行请求分发。

浏览此[链接](http://www.c-sharpcorner.com/uploadfile/gopenath/page107182007032219am/page1.aspx)，看看它是否回答了您的所有问题。

# android - Android：如何使用大量的位图？

> ID：11341817
> 
> 赞同：3
> 
> 时间：2012-07-05T09:49:18.653
> 
> 标签：android, canvas, bitmap, size, out-of-memory

我正在将逐帧动画绘制到画布上，我有大约 100 张用于执行此操作的图片（总共大约 1.5MB）。我开始这样做：

```
s000 = BitmapFactory.decodeResource(getResources(), R.drawable.s0);
s001 = BitmapFactory.decodeResource(getResources(), R.drawable.s1); ...etc... 
```

到每个图像，然后将每个图像绘制到画布上：

```
c.drawBitmap(s000, X, Y, null); 
```

制作动画。

问题是我收到此错误“OutOfMemoryError：位图大小超出 VM 预算”。我如何加载所有图片而不会出现此错误？1.5MB 是多少内存还是我有内存泄漏？我该怎么做才能修复内存泄漏？

非常感谢您的帮助。我是 android 的菜鸟，所以请你留下例子，而不仅仅是告诉我做一些我不会理解的事情:) 再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:32:38.667

为您绘制的每一帧尝试这样的操作：

```
s000 = BitmapFactory.decodeResource(getResources(), R.drawable.s0);
c.drawBitmap(s000, X, Y, null);
s000.recycle();
s000 = null; 
```

这将在绘制框架后尝试释放内存。

**编辑**

```
myImgLen = 30;
Bitmap bitmap = null;
for (int i = 0; i < myImgLen; i++) {
    bitmap = BitmapFactory.decodeResource(getResources(), getResource‌​s().getIdentifier("s" + i, "drawable", getPackageName()));
    c.drawBitmap(bitmap, X, Y, null);
    bitmap.recycle();
    bitmap = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:56:17.330

将图像存储到 res->drawable-xhdpi make 文件夹中 res 文件夹中。
有关更多信息，请参阅此链接[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:58:01.780

也许图像的大小不正确。参考这个答案：[Strange out of memory issue while loading an image to a Bitmap object](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)。

# objective-c - 将 WEAK 设置为非 @property 变量

> ID：11341818
> 
> 赞同：2
> 
> 时间：2012-07-05T09:49:18.757
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting, weak

需要了解 ARC 的人来帮助我。

基本上，我已经在我的班级中声明了一些变量

```
@interface Class{
    NSString* one;
    NSString* two;
}

@property(nonatomic,weak) NSString* one; 
```

如您所见，我可以将弱标识符设置为`NSString* one`. 但是，我不需要 getter/setter/synthesizer，`NSString* two`因为它只是一个公共变量。如何为其设置`weak`标签以便释放内存？还是自动设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:07:22.823

你*可以*这样做：

```
__weak NSString *two; 
```

但在这种情况下，您可能*不想这样做。*

声明一个实例变量`__weak`意味着对目标对象的引用（在你的例子中是一个字符串）只有在其他对象持有引用时才会存在。当最后一个持有强引用的对象释放字符串时，您的变量`two`将`nil`自动退出。这在对象持有彼此的引用时非常有用，例如在父子层次结构中。由于您`NSString *two`不可能持有对您的对象的引用，因此使用该`__weak`引用是非常值得怀疑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:55:05.113

您可以这样做而不必担心：

```
NSString* two = [[NSString alloc] init]; 
```

当您的类实例`Class`由于某种原因被释放时，因为是唯一一个（理论上）引用`two`，它将被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:06:31.827

我的建议（虽然我可能错了，但我认为 Apple 的建议）是养成始终为 iVar 使用属性的习惯，然后这个问题就消失了。

# javascript - 检查文本字段是否为空 jquery

> ID：11341824
> 
> 赞同：3
> 
> 时间：2012-07-05T09:49:30.590
> 
> 标签：javascript, jquery

我有一个包含很多`input[type=text]`字段的 div。我想检查用户是否必须填写所有字段，否则会显示错误消息。为此，我尝试了：

```
if ($('div').children("input[type=text]").attr("value") == '') 
 flag = false; 
else 
 flag = true; 
```

但这不会检查所有文本字段，它只会检查 first-child 。如何检查所有文本字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:50:47.097

尝试[`find()`](http://api.jquery.com/find/)改用

```
 if ($('div').find("input[type=text]").val() == '') 
```

要检查所有输入项，您需要使用[`each()`](http://api.jquery.com/each/).

正确的代码是：

```
$(function() {
    $('input:submit').click(function(){
        var flag = true;
        $('div').find("input[type=text]").each(function(){
            if($(this).val() === '') flag = false
        });

        alert(flag);
    });
});​ 
```

请参阅jsFiddle 上的[演示。](http://jsfiddle.net/antyrat/QH36p/1/)

`true`如果里面的所有`input[type=text]`字段`div`都已填写并且`false`至少有一个为空，则此代码返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:51:54.560

标准方式

```
if(!$('div').find('#idOfTextField').val()){
 //empty
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T11:27:15.037

```
if($("div").find('input:text[value=""]').length > 0)
{
 alert("error");
 return false;
} 
```

# python - 将正则表达式添加到 yaml python

> ID：11341827
> 
> 赞同：1
> 
> 时间：2012-07-05T09:49:37.437
> 
> 标签：python, regex, yaml

有什么方法可以使用 python 在 YAML 中存储和读取这个正则表达式：

```
regular: /<title [^>]*lang=("|')wo("|')>/ 
```

有人对此有任何想法或解决方案吗？

我有以下错误：

```
 % ch.encode('utf-8'), self.get_mark())
yaml.scanner.ScannerError: while scanning for the next token
found character '|' that cannot start any token
  in "test.yaml", line 10, column 49 
```

我的代码：

```
def test2():
    clueAppconf = open('test.yaml')
    clueContext = yaml.load(clueAppconf) 
    print clueContext['webApp'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:32:18.530

好的，看起来问题在于您选择表示此正则表达式的标量类型。如果您与标量（yaml 字符串）结婚，则需要对它阻塞的特殊字符使用双引号标量和转义码。因此，您的 yaml 应如下所示：

```
regular: "/<title [^>]*lang=("\x7C')wo("\x7C')>/" 
```

我只是转义了它正在窒息的字符以保持一些可读性，但是您可能需要转义其他字符，具体取决于它是否会引发更多错误。此外，您可以使用 unicode 转义码。看起来像这样：

```
regular: "/<title [^>]*lang=("\u007C')wo("\u007C')>/" 
```

我对我的 yaml 知识有点了解，所以我不知道如何在 yaml 中维护特殊字符及其可读性。根据我对 yaml 文档的粗略扫描，这是我能找到的最好的。

# html - 使用纯 CSS 增加 CSS 持续时间

> ID：11341832
> 
> 赞同：5
> 
> 时间：2012-07-05T09:50:10.720
> 
> 标签：html, css, css-animations

当用户第一次查看页面时，我使用`-webkit-animation`属性将表单元素旋转到它们的位置。

我使用以下代码来实现：

```
.bounce {
    -webkit-animation-name: bounceup;
}

@-webkit-keyframes bounceup {
    from {
    opacity:0.5;
    -webkit-transform: translateY(100px) rotate(180deg);
    -webkit-box-shadow: 20px 20px 80px #000;
    }
    to {
    opacity:1;
    -webkit-transform: translateY(0px) rotate(0deg);
    }
} 
```

服务器端代码是PHP。在我的 php 类的每个表单元素中，我有一个类“bounce”，我添加了一个名为的内联属性`-webkit-animation-duration`，我在每个 for 元素之间增加了 0.18。

# php代码：

```
private $animationDuration=0.7;

private function _getAnimationDuration() {
    $ret= '-webkit-animation-duration: '.$this->animationDuration.'s';
    $this->animationDuration+=0.1;
    return $ret;
} 
```

`_getAnimationDuration()`在这里，我使用函数的结果为每个表单元素添加一个名为“样式”的属性。

问题是：我可以使用纯 CSS3 和 HTML5（不使用 JavaScript）以某种方式实现 _getAnimationDuration() 函数吗？

我想添加每个表单元素之间不同的动画持续时间 css 样式。每一个都增加了相同的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T03:22:13.310

如果您可以假设所有元素在 DOM 树中处于同一级别，那么您可以在 CSS 中实现这一点。但是您必须预先决定您愿意支持的最大元素数量，因为您需要为每个潜在元素编写 CSS。

例如，要支持最多四个元素，您可以执行以下操作：

```
.bounce { animation-delay:0s; }
.bounce ~ .bounce { animation-delay:0.1s; }
.bounce ~ .bounce ~ .bounce { animation-delay:0.2s; }
.bounce ~ .bounce ~ .bounce ~ .bounce { animation-delay:0.3s; } 
```

第一个“反弹”元素只是延迟 0 秒。一个 'bounce' 元素前面有另一个 'bounce' 元素（即它是第二次出现），将获得 0.1 秒的延迟。一个 'bounce' 元素前面有*两个*其他 'bounce' 元素（即它是第三个），将获得 0.2 秒的延迟。等等。

显然，您想要支持的元素越多，这些选择器就会变得越长。因此，如果您需要在表单上支持大量输入，CSS 可能会变得有些笨拙，但这是可能的。

像 SASS 或 LESS 这样的预处理器可以使 CSS 的生成更容易，但输出仍然会相当大。

例如，您可以在 SASS 中执行以下操作：

```
@mixin generateDelays($class,$increment,$count) {
  $selector: ".#{$class}";
  $delay: 0s;
  @while $count > 0 {
    #{$selector} { animation-delay:$delay; }
    $selector: "#{$selector} ~ .#{$class}";
    $delay: $delay + $increment;
    $count: $count - 1;
  } 
}

@include generateDelays('bounce',0.1s,10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:50:49.300

总结评论：

现有的解决方案本质上是 HTML5/CSS3；借助 PHP 的后端辅助来动态生成 CSS3 样式。

仅使用 HTML5 和 CSS3 无法实现参数化或动态 CSS 样式。LESS 或 Sass 可以利用 JavaScript 和库编译来接近所需的结果。

# c++ - std::list 线程安全

> ID：11341834
> 
> 赞同：4
> 
> 时间：2012-07-05T09:50:14.040
> 
> 标签：c++, stl, thread-safety, stdlist

1.  我有一个列表，其中一个线程只是执行 push_back，而其他线程偶尔会遍历列表并打印所有元素。在这种情况下我需要锁吗？
2.  我有指向其他对象中元素的指针。安全吗？我知道向量会在需要更多空间时移动所有对象，因此指针将失效。

    mylist.push_back(MyObj(1));
    if(someCond)
    {
    _myLastObj = &mylist.back();
    }

`_myLastObj`是类型`MyObj*`

如果我使用了向量，则对象将被移动到不同的位置，并且指针将指向垃圾。清单安全吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T10:00:42.607

1.  是的，你需要一个锁（某种形式的同步）。
2.  `std::list`仅当从列表中删除同一元素时，指向 a 元素的指针才会失效。由于您的代码从不从列表中删除任何内容，因此您的指针是安全的。

对于需要锁的具体原因，例如考虑`list::push_back`允许按以下顺序执行以下操作：

1.  分配一个新节点，
2.  将列表尾部的“下一个”指针设置为新节点，
3.  将新节点的“下一个”指针设置为空（或其他一些列表结束标记），
4.  将新节点的“previous”指针设置为前一个尾部，
5.  将列表自己的指向尾指针设置为新节点。

如果您的阅读器线程位于 2 和 3 之间，那么它将从前一个尾部转到新节点，然后尝试跟随未初始化的指针。繁荣。

不过，一般来说，您需要同步，因为这是保证编写器线程中所做的更改以任何合理的顺序（或根本没有）发布到读取器线程的唯一方法。

如果您想象不同的线程在不同的星球上运行，每个线程都有自己的程序内存副本，并且当您使用同步对象（或 C++11 中的原子变量）时，您的代码应该是正确的（a） )，加上 (b) 当您不使用同步对象但传输某些特定的部分更改时会破坏您的代码（例如两个字对象的一半或在这种情况下您需要发生的两个指针写入之一按特定顺序）。有时这种模型比严格必要的模型更保守，并导致代码变慢。但是一个不太保守的模型依赖于线程系统和内存模型的特定实现细节。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-25T18:11:32.020

我想知道列表是否通常是线程安全的，所以我询问并找到了这个线程。我得出的结论是，**在 gcc libstdc++ 中 std::list 的当前实现中，您可以安全地在一个线程中修改一个列表，并任意同时遍历列表，但不敢有两个线程修改相同的列表（没有同步）。** 此外，*不应*依赖此行为。我已经撕掉了库代码以更详细地指出问题。我希望它会有所帮助。

首先让我们从列表的线程安全的一般问题开始。我认为通过示例“证明”列表是不安全的会很好，所以我将以下代码放在一起。

```
#include <iostream>
#include <list>
#include <mutex>
#include <thread>

using namespace std;

list<int> unsafe_list;

class : public list<int> {
  mutex m;
  public:
  void push_back(int i) {
    lock_guard<mutex> lock{m};
    list<int>::push_back(i);
  }
} safe_list;

template <typename List> void push(List &l) {
  for (auto i = 0; i < 10000; ++i)
    l.push_back(0);
}

void report_size(const list<int> &li, char const *name) {
  size_t count{};
  for (auto && i : li) ++count;
  cout << name << endl;
  cout << "size() == " << li.size() << endl;
  cout << "count  == " << count << endl;
}

int main() {
  auto unsafe = []() { push(unsafe_list); };
  auto safe = []() { push(safe_list); };
  thread pool[]{
      thread{unsafe}, thread{unsafe}, thread{unsafe},
      thread{safe},   thread{safe},   thread{safe},
  };
  for (auto &&t : pool)
    t.join();
  report_size(unsafe_list, "unsafe_list");
  report_size(safe_list, "safe_list");
} 
```

我得到的输出是：

```
unsafe_list
size() == 19559
count  == 390
safe_list
size() == 30000
count  == 30000 
```

哎呀。这意味着我推送的几乎没有任何元素最终出现在列表中。但比这更糟糕！它不仅没有正确数量的元素，它认为它的数量与实际数量不同，而且这个数字也不是我想要的！虽然这意味着几乎可以肯定存在内存泄漏，但当我使用 valgrind 运行它时，所有操作都成功完成。我听说 valgrind 和其他工具在尝试处理并发时可能不太有用，我想这就是证据。

首先，我尝试一次推送 10 个元素左右，但没有发生任何可疑的事情。我认为它正在设法在其时间片内推送所有内容，因此我将其提高到 10000 并得到了我想要的结果。只是给任何试图复制实验的人的注释，它可能工作或不工作取决于系统配置和调度算法等。

鉴于链表的性质，我预计这样的实验会导致段错误或其他损坏的链表。如果这是您正在寻找的某些错误的原因，那么段错误将是一种仁慈。

## 到底他妈发生了什么

在这里，我将准确地解释发生了什么以及为什么（或者至少给出一个非常合理的解释）。如果您未初始化并发问题，请将此视为介绍。如果您是专家，请告诉我我错在哪里或不完整。

我很好奇，所以我只是看了一下 gcc libstdc++ 的实现。为了解释观察到的行为，快速解释列表的工作原理是有序的。

## 实施细节

底层结构或算法没有任何有趣或奇怪的地方，但有各种 C++ 实现细节需要提及。首先，列表的节点都派生自一个只存储两个指针的公共基类。这样，列表的所有行为都被封装了。实际的节点，除了从基派生之外，是具有非静态数据成员的结构`__gnu_cxx::__aligned_membuf<_Tp> _M_storage`。这些节点都知道`value_type`列表的，并从`allocator_type`反弹到`_List_node<_Tp>`. 这些节点的目的是获取和释放列表的存储空间，并使用它们的基础来维护数据的结构。（我推荐这篇论文来解释类型是如何从迭代器中分解出来的，它可能会阐明为什么某些事情是以[http://www.stroustrup.com/SCARY.pdf](http://www.stroustrup.com/SCARY.pdf)的方式实现的。对于受虐狂，观看此向导解释 c++ 分配器的美丽噩梦[https://www.youtube.com/watch?v=YkiYOP3d64E](https://www.youtube.com/watch?v=YkiYOP3d64E)）。然后该列表处理构建和销毁，并为图书馆用户提供界面，等等。

为节点使用通用（类型无关）基类的一个主要优点是您可以将任意节点链接在一起。如果不计后果地放弃，这不是很有帮助，但他们以可控的方式使用它。“尾节点”不是 type `value_type`，而是 type `size_t`。尾节点保存列表的大小！（我花了几分钟才弄清楚发生了什么，但这很有趣，所以没什么大不了的。这样做的主要优点是存在的每个列表都可以具有相同类型的尾节点，因此代码重复更少用于处理尾节点，并且列表只需要一个非静态数据成员来完成它需要做的事情）。

因此，当我将一个节点推到列表的后面时，`end()`迭代器将传递给以下函数：

```
 template<typename... _Args>
   void
   _M_insert(iterator __position, _Args&&... __args)
   {
 _Node* __tmp = _M_create_node(std::forward<_Args>(__args)...);
 __tmp->_M_hook(__position._M_node);
 this->_M_inc_size(1);
   } 
```

`_M_create_node()`最终使用正确的分配器来获取节点的存储空间，然后尝试使用提供的参数在那里构造一个元素。该`_M_hook()`函数的“点”是将指针指向它们应该指向的指针，并在此处列出：

```
void
_List_node_base::
_M_hook(_List_node_base* const __position) _GLIBCXX_USE_NOEXCEPT
{
  this->_M_next = __position;
  this->_M_prev = __position->_M_prev;
  __position->_M_prev->_M_next = this;
  __position->_M_prev = this;
} 
```

**操作指针的顺序很重要。** 这就是我声称您可以在同时操作列表的同时进行迭代的原因。稍后再谈。然后，调整大小：

```
void _M_inc_size(size_t __n) { *_M_impl._M_node._M_valptr() += __n; } 
```

正如我之前所说，列表有一个类型为 的尾节点`size_t`，因此，您可以猜到，`_M_impl._M_node._M_valptr()`检索指向该数字的指针，然后`+=`是正确的数量。

## 观察到的行为

那么，发生了什么？线程正在和函数中进入*数据竞争*（[https://en.cppreference.com/w/cpp/language/memory_model](https://en.cppreference.com/w/cpp/language/memory_model)） 。我在网上找不到漂亮的图片，所以我们说那是尾巴，是“背部”，我们想推到后面。也就是说，我们有列表（片段），我们想要。最终，调用，然后发生以下情况：`_M_hook()``_M_inc_size()``T``B``1``B <-> T``B <-> 1 <-> T``1``_M_hook``T`

1.  `1`指向`T`
2.  `1`向后指向`B`
3.  `B`指向`1`
4.  `T`向后指向`1`

这样，就不会“忘记”任何位置。现在这么说，`1`并`2`被推回同一列表上的不同线程中。完全合理的是，步骤 (1) 和 (2) 完成`1`，然后`2`被完全推回，然后 (1) 必须完成。在这种情况下会发生什么？我们有 list `B <-> 2 <-> T`，但是`1`指向`B`and `T`，所以当他们的指针被调整时， list 看起来像`B <-> 1 <-> T`，这是一个内存泄漏儿子。

**就迭代而言，**无论您是向后还是向前，都将始终正确地在列表中递增。**但是，标准似乎无法**保证这种行为，因此如果代码依赖于这种行为，那么它是脆弱的。

## 大小呢？？？

好的，这就像并发 101，一个老故事可能被更好地讲述了很多次，我希望它至少值得一看库代码。我认为尺寸问题更有趣一些，我当然从弄清楚它中学到了一些东西。

基本上，因为要递增的值不是“局部”变量，所以必须将其值读入寄存器，将一个添加到该值，然后将该值存储回变量中。先看一些拼装（我的拼装游戏比较弱，有指正的请不要客气）。考虑以下程序：

```
int i{};
int main() {
  ++i;
} 
```

当我在对象上运行 objdump -D 时，我得到：

```
Disassembly of section .text:

0000000000000000 <main>:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   8b 05 00 00 00 00       mov    0x0(%rip),%eax        # a <main+0xa>
   a:   83 c0 01                add    $0x1,%eax
   d:   89 05 00 00 00 00       mov    %eax,0x0(%rip)        # 13 <main+0x13>
  13:   b8 00 00 00 00          mov    $0x0,%eax
  18:   5d                      pop    %rbp
  19:   c3                      retq 
```

`4:`将 的值移动`i`到寄存器`eax`中。 `0x1`被添加到`eax`，然后`eax`被移回`i`。那么，这与数据竞赛有什么关系呢？再看一下更新列表大小的函数：

```
void _M_inc_size(size_t __n) { *_M_impl._M_node._M_valptr() += __n; } 
```

将列表的当前大小加载到寄存器中是完全合理的，然后在此列表上运行的另一个线程会执行我们的操作。因此，我们将列表的旧值存储在寄存器中，但我们必须保存该状态并将控制权转移给其他人。也许他们成功地将一个项目添加到列表中并更新了大小，然后将控制权交还给我们。我们恢复我们的状态，但我们的状态不再有效！我们有列表的旧大小，然后我们将其递增，并将其值存储回内存，忘记其他线程执行的操作。

## 最后一件事

正如我之前提到的，上述程序中的“局部性”`i`发挥了作用。这一点的重要性可以从以下方面看出：

```
int main() {
  int i{};
  ++i;
}

Disassembly of section .text:

0000000000000000 <main>:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   c7 45 fc 00 00 00 00    movl   $0x0,-0x4(%rbp)
   b:   83 45 fc 01             addl   $0x1,-0x4(%rbp)
   f:   b8 00 00 00 00          mov    $0x0,%eax
  14:   5d                      pop    %rbp
  15:   c3                      retq 
```

在这里可以看出，没有值被存储到寄存器中，也没有寄存器被压入某个变量。不幸的是，据我所知，这不是避免并发问题的好技巧，因为在同一个变量上运行的多个线程*必须*通过内存访问来对其进行操作，而不仅仅是通过寄存器。我很快就离开了我的联盟，但我很确定情况就是这样。下一个最好的方法是使用`atomic<int>`，但这该死的东西已经太长了。

# ios - 如何使用周数获 取一周的星期一日期

> ID：11341840
> 
> 赞同：0
> 
> 时间：2012-07-05T09:50:30.090
> 
> 标签：ios

如果我通过了周数，如何找出星期一的日期。例如，我需要一年中第 24 周的星期一

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:50:28.940

`NSDateComponents`用您拥有的信息填写一个对象。然后您可以询问当前`NSCalendar`哪些日期对应于这些组件。

```
NSDateComponents *components = [NSDateComponents new];
components.weekday = 2;
components.weekOfYear = 24;
components.year = 2012;
NSDate *date = [[NSCalendar currentCalendar] dateFromComponents: components]; 
```

该`weekday`属性以星期日 = 1 开始。

如果您使用的是 OS X 10.7 或更高版本，则应使用该属性`yearForWeekOfYear`而不是`year`.

# javascript - 卡在 javascript-html 输出中

> ID：11341842
> 
> 赞同：0
> 
> 时间：2012-07-05T09:50:35.007
> 
> 标签：javascript

我有点陷入奇怪的问题。我找不到以下代码的问题

```
 <html>
    <head>

<script type="text/javascript">

    // Import GET Vars
   document.$_GET = [];
   var urlHalves = String(document.location).split('?');
   if(urlHalves[1]){
      var urlVars = urlHalves[1].split('&');
      for(var i=0; i<=(urlVars.length); i++){
         if(urlVars[i]){
            var urlVarPair = urlVars[i].split('=');
            document.$_GET[urlVarPair[0]] = urlVarPair[1];
         }
      }
   }

    var tag_tag=document.$_GET['tags'];
    alert(tag_tag);

document.getElementById("resultElem4").innerHTML=tag_tag;

</script>
</head>

<body>
<p id='resultElem4'></p>

</body>
</html> 
```

当我像 result.php?tags=cat 一样调用它时，它在警报中显示字符串但不在 html 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:55:17.480

将您的脚本标签放在底部（就在结束*正文*标签之前）。问题是当您尝试使用*getElementById引用元素**resultElem4*时，它尚未加载。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:59:08.117

您只需将 移动`< script >`到身体的末端。

```
<body><p></p><script>....</script></body> 
```*

# c# - 指南针 UI 和针

> ID：11341843
> 
> 赞同：2
> 
> 时间：2012-07-05T09:50:35.363
> 
> 标签：c#, silverlight, windows-phone-7, xaml, expression-blend

我想制作一些指南针应用程序，并希望根据用户的纬度显示针偏转。但我无法理解如何将正确的形状作为指南针。目前我正在使用此代码来显示指南针。

```
 <Ellipse StrokeThickness="2" x:Name="circle" Width="400" Height="400" 
                  Margin="0,90,0,0" Fill="Black">
                <Ellipse.Stroke>
                    <SolidColorBrush Color="{StaticResource PhoneAccentColor}" />
                </Ellipse.Stroke>
            </Ellipse>

 <Line  x:Name="line" X1="240" Y1="350" X2="240" Y2="270"  Stroke="{StaticResource  PhoneForegroundBrush}" StrokeThickness="4"></Line> 
```

你可以用这个代码看到我糟糕的用户界面。

![在此处输入图像描述](../Images/457d75b32f3ee1de94cf7836e36baec8.png)

我想要这种更好的用户界面，至少有这样的针。

![在此处输入图像描述](../Images/36cf96f826cd342e01e4e17653aa4763.png)

我希望有人能在这个 UI 形状中帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:58:25.603

这有两个部分。

在第一个实例中，您需要定义一个箭头形状。以下是执行此操作的一些 XAML：

```
 <system:String x:Key="ArrowData">
        M7.7314458,3.052578
        L13.998698,9.3155994
        L13.998698,14.038256
        L9.4029951,9.445858
        L9.4029951,18.633959
        L6.059896,18.633959
        L6.059896,9.445858
        L1.4641927,14.038256
        L1.4641927,9.3155994
        z
    </system:String> 
```

你可以像这样使用它：

```
<Path Data="{StaticResource ArrowData}" RenderTransformOrigin="0.5,1.0" Stretch="Uniform" UseLayoutRounding="False" Fill="Black"/> 
```

在第二种情况下，您需要旋转它以使其指向正确的方向：

```
<Path Data="{StaticResource ArrowData}" RenderTransformOrigin="0.5,1.0" Stretch="Uniform" UseLayoutRounding="False" Fill="Black">
    <Path.RenderTransform>
        <TransformGroup>
            <RotateTransform Angle="180"/>
        </TransformGroup>
    </Path.RenderTransform>
</Path> 
```

显然，在这种情况下，它会倒置显示并固定，但如果将 绑定`RotateTransform` `Angle`到您的指南针航向，它将指向正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:57:15.787

以下将为您提供所需的示例箭头，用于您的特定电话页面，中心位于底部，因此您可以将其放在指南针上。

它还有一个命名成员，`MyTransform`您可以简单地设置旋转属性的角度（0 = 北，180 = 南等）。

```
 <Path Data="M87.026947,24.16836 L102.66625,48.669857 L94.666451,48.669857 L94.666451,84.674995 L78.666855,84.674995 L78.666855,48.669857 L70.667053,48.669857 z" HorizontalAlignment="Right" Height="60.498" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Bottom" Width="32" RenderTransformOrigin="0.5,1" Margin="0,0,208,191.502">
            <Path.RenderTransform>
                <CompositeTransform x:Name="MyTransform" Rotation="0" ScaleX="2.91" TranslateX="-16" TranslateY="-61" ScaleY="3.4"/>
            </Path.RenderTransform>
            <Path.Fill>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="White" Offset="0"/>
                    <GradientStop Color="White" Offset="1"/>
                    <GradientStop Color="#FEFEFEFE" Offset="0.58"/>
                    <GradientStop Color="#FEE22828" Offset="0.604"/>
                    <GradientStop Color="#FEE64C4C" Offset="0.795"/>
                    <GradientStop Color="#FEFFFFFF" Offset="0.826"/>
                </LinearGradientBrush>
            </Path.Fill>
        </Path> 
```

## 示例图像：

![在此处输入图像描述](../Images/be2c650802a34a16e92530050cf92712.png)

*它是通过导入您的示例图像并在顶部绘制而在 Expression blend 中创作的。然后缩放比例改变以匹配您的实际页面大小（因为显示的位图不是 1:1 比例）。*

要使用从代码到所需角度的简单设置旋转

## 例如，根据您的代码段：

```
 void DrawCompass()
    {
       MyTransform.Rotation = 0.0;   // North
       MyTransform.Rotation = 180.0; // South
       MyTransform.Rotation = 90.0;  // East
       MyTransform.Rotation = 270.0; // West
       // Or any other angle in between
       // or simply bind the Rotation property to an angle property on your viewmodel
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:14:28.637

使用 Blend SDK 中的 BlockArrow 形状。无需再次绘制自己的箭头。然后根据您希望显示的角度简单地旋转控件。您可能还必须转换原点，以便它围绕末端而不是中间旋转。

# javascript - 检测被用户操作中断的 Ajax 请求

> ID：11341850
> 
> 赞同：3
> 
> 时间：2012-07-05T09:50:55.303
> 
> 标签：javascript, ajax

我想检测正在进行 Ajax 调用然后由于某些用户操作（例如，用户导航到另一个页面）而中断的情况？

我可以看到，当这种情况发生时，我的 onreadystatechange 处理程序被调用 readyState == 4 (DONE) 和 status == 0。

问题是，有什么方法可以确保这确实对应于所描述的场景（由于用户操作而中止请求）？我想避免掩盖其他可能更危险的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:54:52.827

对于导航到另一个页面的用户，您可以使用该`onbeforeunload`事件。

例如：

```
window.onbeforeunload = function() {
    // Check ajax request state and do something accordingly...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:53:32.063

当用户触发 ajax 请求时，您可以设置一个变量（布尔值）。将其设置回回调函数中。如果用户离开页面，您可以检查此变量。

# android - 具有LinearLayout中多个图像的Android相机应用程序

> ID：11341852
> 
> 赞同：2
> 
> 时间：2012-07-05T09:51:03.883
> 
> 标签：android, camera, position, imageview, selected

我正在开发一个相机应用程序，该应用程序显示多个动态添加到简单 LinearLayout 的图像作为子级。选择特定图像（ONCLICK）时，它将转到相机视图（相机意图）。该应用程序应该显示在右侧选定的 ImageView 中捕获的新图像。问题是，我不知道如何让特定的 ImageView 在 onActivityResult 方法中处理它。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:59:29.770

在你的`onActivityResult()`

```
if (resultCode == RESULT_OK) {
        if (data != null) {
                Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
                imageView.setImageBitmap(thumbnail);
        }
} 
```

`data`意图在哪里。

您可以`ImageView`在打开相机应用程序之前保存 clicked 的参考，并使用该参考来设置新图像。

**更新：**只需`ImageView`在您的活动中创建一个变量，然后在打开相机之前，将单击的实例放在此字段中，并`ImageView`在我的示例代码中使用它。

# wpf - 接受按钮和数据绑定不一致

> ID：11341853
> 
> 赞同：1
> 
> 时间：2012-07-05T09:51:07.870
> 
> 标签：wpf, data-binding, acceptbutton

在表单上有一个“接受按钮”（在 WPF 中：IsDefault="True"）很方便。

在 Windows 窗体世界中，我曾经在按钮的相应 Click 事件中将数据从 UI 读取到对象。

但是对于 WPF，应该使用数据绑定。在Window的构造函数中，我设置了this.DataContext = test;

问题来了：用户在 TextBox2 中输入了一些文本，然后按了 Enter 键。现在，绑定到 OK 按钮的命令被执行，数据被保存。

但这不是正确的数据！为什么？TextBox2 尚未失去焦点，因此 ViewModel 尚未更新。将 UpdateSourceTrigger 更改为 PropertyChanged 并不总是合适的（例如格式化数字），我正在寻找一个通用的解决方案。

你如何克服这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:01:03.297

通常我使用自定义附加属性来告诉 WPF 在按下 Enter 键时更新绑定源

它在 XAML 中使用如下：

```
<TextBox Text="{Binding SomeProperty}" 
         local:TextBoxProperties.EnterUpdatesTextSource="True" /> 
```

附加属性的代码如下：

```
public class TextBoxProperties
{
    // When set to True, Enter Key will update Source
    public static readonly DependencyProperty EnterUpdatesTextSourceProperty =
        DependencyProperty.RegisterAttached("EnterUpdatesTextSource", typeof(bool),
                                            typeof(TextBoxProperties),
                                            new PropertyMetadata(false, EnterUpdatesTextSourcePropertyChanged));

    // Get
    public static bool GetEnterUpdatesTextSource(DependencyObject obj)
    {
        return (bool)obj.GetValue(EnterUpdatesTextSourceProperty);
    }

    // Set
    public static void SetEnterUpdatesTextSource(DependencyObject obj, bool value)
    {
        obj.SetValue(EnterUpdatesTextSourceProperty, value);
    }

    // Changed Event - Attach PreviewKeyDown handler
    private static void EnterUpdatesTextSourcePropertyChanged(DependencyObject obj,
                                                              DependencyPropertyChangedEventArgs e)
    {
        var sender = obj as UIElement;
        if (obj != null)
        {
            if ((bool)e.NewValue)
            {
                sender.PreviewKeyDown += OnPreviewKeyDownUpdateSourceIfEnter;
            }
            else
            {
                sender.PreviewKeyDown -= OnPreviewKeyDownUpdateSourceIfEnter;
            }
        }
    }

    // If key being pressed is the Enter key, and EnterUpdatesTextSource is set to true, then update source for Text property
    private static void OnPreviewKeyDownUpdateSourceIfEnter(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            if (GetEnterUpdatesTextSource((DependencyObject)sender))
            {
                var obj = sender as UIElement;
                BindingExpression textBinding = BindingOperations.GetBindingExpression(
                    obj, TextBox.TextProperty);

                if (textBinding != null)
                    textBinding.UpdateSource();
            }
        }
    }
} 
```

# php - Javascript 正则表达式并获取所有匹配项，类似于 preg_match_all(PHP)

> ID：11341858
> 
> 赞同：3
> 
> 时间：2012-07-05T09:51:36.250
> 
> 标签：php, javascript, regex, preg-match-all

是否可以在 JavaScript 中做类似 preg_match_all 在 PHP 中所做的事情？

我希望能够从字符串中获取两个数字：

```
var text = 'b463_z78'; 
```

分成两个单独的变量：

```
var bannerID = 463;
var zoneID    = 78; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:26:34.133

要匹配字符串中的所有数字，您可以使用：

```
.match(/(?:\D*(\d+))*/); 
```

所以，如果你有一个输入字符串，你会得到一个包含and`'b463_z78'`的数组，或者如果你有一个输入字符串，你会得到一个包含,和的数组。`'463'``'78'``'1a2b3c4d'``'1'``'2'``'3'``'4'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:57:38.660

你可以用这个

```
.match(/^b(\d+)_z(\d+)$/) 
```

假设输入字符串是严格的：以`b`, 数字开头，然后下划线`_`，然后`z`，然后以数字结尾。

这两个数字在返回数组的索引 1 和索引 2 中。

# php - mt_rand 最大值

> ID：11341859
> 
> 赞同：0
> 
> 时间：2012-07-05T09:51:43.197
> 
> 标签：php, unique-id

在 php 文档中，我发现了这个注释：

> 在 32 位和 64 位系统（OS X 和 Linux）上，mt_getrandmax() 返回 2147483647

我已经使用提供的简单功能确认了这一点

```
function gethighest()
{
return mt_getrandmax();
}
$hello = gethighest();
echo '<b>'.$hello.'</b>'; 
```

我正在使用这个片段来生成一个唯一的 id

```
$number = mt_rand(163245,978534);
$unique_id = crypt($number);
echo md5($unique_id).'<br/>'; 
```

我的问题是，mt_rand 的最大值是什么意思？一旦达到最大值，id 会开始重复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:55:20.537

你的代码：

```
$number = mt_rand(163245,978534); 
```

表示生成的数字将介于这两个数字之间，它将在您运行它的次数之多，在这两个值之间生成一个数字。没有返回值超出该范围。但是，是的，值可以重复..

例如，用 mt_rand(1,5) 尝试并告诉它执行 20 次并输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:56:13.687

考虑使用uniqid？[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T09:57:42.947

如果您打算生成唯一 ID，则应使用[`uniqid`](http://php.net/manual/en/function.uniqid.php)：

```
$unique_id = uniqid(microtime(true)); 
```

# php - 如何避免 & 在 XML 中？

> ID：11341862
> 
> 赞同：0
> 
> 时间：2012-07-05T09:51:49.390
> 
> 标签：php, xml, curl, encoding

我正在尝试通过 php 将所有数据发送到 xml。但不知何故，XML 会解析数据，并在通过 Curl 发布数据后在 Password 中找到`&`并替换它。那么在xml中`&amp;`是否有任何方法/技术可以避免。`&`或者按原样进行。我尝试了几乎所有的编码功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:55:41.567

使用[CDATA 部分](http://www.w3schools.com/xml/xml_cdata.asp)使其与符号保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:33:39.437

在正常的事件过程中，数据中的 & 被编码为`&amp;`XML，并且 XML 解析器对此进行解码并将其呈现`&`给应用程序。如果应用程序（curl？）看到它，`&amp;`要么是因为它在 XML 中被双重转义（as `&amp;amp;`），要么是因为它没有被使用真正的 XML 解析器读取。

# php - Sonata Admin Bundle 不适用于多对多实体关系

> ID：11341872
> 
> 赞同：3
> 
> 时间：2012-07-05T09:52:25.417
> 
> 标签：php, doctrine-orm, symfony-sonata, symfony-2.1

我目前正在使用使用**Symfony 2.1.0-DEV**和**Doctrine 2.2.x**的 Sonata Admin Bundle ，我遇到了**多对多**实体*关联*的问题：

```
class MyProduct extends Product {

    /**
     * @ORM\ManyToMany(targetEntity="Price")
     */
    private $prices;

    public function __construct() {
        $this->prices = new \Doctrine\Common\Collections\ArrayCollection()
    }

    public function getPrices() {
        return $this->prices;
    }

    public function setPrices($prices) {
        $this->prices = $prices;
    }
}

// Admin Class

class GenericAdmin extends Admin {

    ...

    public function configureFormFields(FormMapper $formMapper)
        {
            $formMapper
                ->with('General')
                ->add('prices', 'sonata_type_model')
                ->end()
            ;
        }
    }

    ...

} 
```

*现在，如果尝试从 Sonata 的 CRUD创建/编辑*表单面板向多对多关联添加价格，则更新不起作用。

关于这个问题的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T09:42:28.913

# 更新解决方案

我找到了我的问题的答案：为了使事情与**多对多**关系一起工作，您需要传递 *by_reference* 等于**false**（有关更多详细信息，请参见[此处](http://symfony.com/doc/current/reference/forms/types/collection.html#by-reference)）。

更新的工作版本是：

```
class MyProduct extends Product {

    /**
     * @ORM\ManyToMany(targetEntity="Price")
     */
    private $prices;

    public function __construct() {
        $this->prices = new \Doctrine\Common\Collections\ArrayCollection()
    }

    public function getPrices() {
        return $this->prices;
    }

    public function setPrices($prices) {
        $this->prices = $prices;
    }

    public function addPrice($price) {
        $this->prices[]= $price;
    }

    public function removePrice($price) {
        $this->prices->removeElement($price);
    }
}

// Admin Class

class GenericAdmin extends Admin {

    ...

    public function configureFormFields(FormMapper $formMapper)
        {
            $formMapper
                ->with('General')
                ->add('prices', 'sonata_type_model', array('by_reference' => false))
                ->end()
            ;
        }
    }

    ...

} 
```

# java - 使用 XMLReader 在 java 中解析一个大的 xml 字符串

> ID：11341873
> 
> 赞同：0
> 
> 时间：2012-07-05T09:52:30.350
> 
> 标签：java, xml, spring

我有以下代码解析从数据库返回的 XML 字符串：

* * *

> > > XMLReader xReader = XMLReaderFactory.createXMLReader();
> > > 
> > > xReader.setContentHandler(解析器);
> > > 
> > > xReader.parse(new InputSource(new StringReader( **theResponseStringFromTheDatabase** )));

* * *

只要**theResponseStringFromTheDatabase**太大，解析就会失败。有没有办法修改代码以便解析大字符串？

最好的祝愿，ck

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:58:58.847

我建议您需要让*[读者](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Reader.html)*访问该列。

`InputSource`可以接受一个`Reader`对象，并且该阅读器应该能够逐步拉取 XML（适用于底层的 SAX 阅读器`XMLReader`）

[ResultSet.getCharacterStream()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#getCharacterStream%28java.lang.String%29)可以解决问题。

# hibernate - 在将 struts2 与 hibernate 集成时陷入困境

> ID：11341878
> 
> 赞同：0
> 
> 时间：2012-07-05T09:52:43.590
> 
> 标签：hibernate, struts2, jdb

我想将 Struts 与 Hibernate 集成。我对这些技术很陌生。

不幸的是，我在过去 4 天里严重卡在了这些地方，而且我的桌子无法绘制地图。请帮忙。我正在使用netbeans 7.1.2。我在 derby (Java DB) 上创建了数据库。我在里面创建了几张桌子。

在我的 Java EE 简单项目中，它只需要从数据库中获取整个数据并显示在 JSP 页面上。

这是我的文件：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
 <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>example/HelloWorld.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

Helloworld.jsp

```
<%@ page contentType="text/html; charset=UTF-8" %>

<%@ taglib prefix="s" uri="/struts-tags" %>

<html>
    <head>
        <title>Hello</title>
    </head>

    <body>
        <table>
            <tr>
                <th>CNAME</th>
                <th>BODY</th>
            </tr>
            <s:iterator value="questionList" var="question">
                <tr>
                    <td><s:property value="cname"/></td>
                    <td><s:property value="body"/></td>
                </tr>   
            </s:iterator>
        </table>
    </body>
</html> 
```

示例.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="example" namespace="/example" extends="struts-default">
        <action name="HelloWorld" class="example.HelloWorld">
            <result>/example/HelloWorld.jsp</result>
        </action>
    </package>
</struts> 
```

休眠.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.DerbyDialect</property>
    <property name="hibernate.connection.driver_class">org.apache.derby.jdbc.ClientDriver</property>
    <property name="hibernate.connection.url">jdbc:derby://localhost:1527/Q4U</property>
    <property name="hibernate.connection.username">rambo</property>
    <property name="hibernate.connection.password">**</property>
    <mapping resource="hibernate.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

休眠.hbm.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="beans.Question" table="QUESTION">
      <!--  <id name="qid" type="java.lang.Integer">
            <column name="QID" />
            <generator class="increment" />
        </id>
        <property name="opc" type="java.lang.Integer">
            <column name="OPC" not-null="true"/>
        </property>
        <property name="uid" type="java.lang.Integer">
            <column name="UID" not-null="true"/>
        </property>
        <property name="cid" type="java.lang.Integer">
            <column name="CID" not-null="true"/>
        </property>
        <property name="abuse" type="java.lang.Integer">
            <column name="ABUSE" not-null="true"/>
        </property>
        <property name="accuracy" type="java.lang.Float">
            <column name="ACCURACY" not-null="true"/>
        </property>
        <property name="poston" type="java.util.Date">
            <column name="POSTON" not-null="true"/>
        </property>
        <property name="body" type="java.lang.String">
            <column name="BODY" not-null="true"/>
        </property>
        <property name="op1" type="java.lang.String">
            <column name="OP1" not-null="true"/>
        </property>
        <property name="op2" type="java.lang.String">
            <column name="OP2" not-null="true"/>
        </property>
        <property name="op3" type="java.lang.String">
            <column name="OP4" not-null="true"/>
        </property>
        <property name="op4" type="java.lang.String">
            <column name="OP4" not-null="true"/>
        </property>
        <property name="op5" type="java.lang.String">
            <column name="OP5" not-null="true"/>
        </property>
        <property name="cname" type="java.lang.String">
            <column name="CNAME" not-null="true"/>
        </property> -->
    </class> 
</hibernate-mapping> 
```

休眠.reverse.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering PUBLIC "-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">
<hibernate-reverse-engineering>
  <schema-selection match-schema="RAMBO"/>
  <table-filter match-name="TESTS"/>
  <table-filter match-name="USERS"/>
  <table-filter match-name="QUESTION"/>
  <table-filter match-name="INBOX"/>
  <table-filter match-name="ADMIN"/>
  <table-filter match-name="CATEGORY"/>
</hibernate-reverse-engineering> 
```

struts.xml：

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <include file="example.xml"/>
    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">
    </package>
</struts> 
```

问题.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package beans;

import java.util.Date;
import java.io.Serializable;
import javax.persistence.*;
/**
 *
 * @author ROMO
 */

@Entity
@Table (name="QUESTION")
public class Question implements Serializable {

    int qid, opc, uid, cid, abuse;
    float accuracy;
    Date poston;
    String body, op1, op2, op3, op4, op5, cname;

    @Column(name="CNAME")
    public String getCname() {
        return cname;
    }

    public void setCname(String cname) {
        this.cname = cname;
    }

    @Column(name="ABUSE")
    public int getAbuse() {
        return abuse;
    }

    public void setAbuse(int abuse) {
        this.abuse = abuse;
    }

    @Column(name="ACCURACY")
    public float getAccuracy() {
        return accuracy;
    }

    public void setAccuracy(float accuracy) {
        this.accuracy = accuracy;
    }

    @Column(name="BODY")
    public String getBody() {
        return body;
    }

    public void setBody(String body) {
        this.body = body;
    }

    @Column(name="CID")
    public int getCid() {
        return cid;
    }

    public void setCid(int cid) {
        this.cid = cid;
    }

    @Column(name="OP1")
    public String getOp1() {
        return op1;
    }

    public void setOp1(String op1) {
        this.op1 = op1;
    }

    @Column(name="OP2")
    public String getOp2() {
        return op2;
    }

    public void setOp2(String op2) {
        this.op2 = op2;
    }

    @Column(name="OP3")
    public String getOp3() {
        return op3;
    }

    public void setOp3(String op3) {
        this.op3 = op3;
    }

    @Column(name="OP4")
    public String getOp4() {
        return op4;
    }

    public void setOp4(String op4) {
        this.op4 = op4;
    }

    @Column(name="OP5")
    public String getOp5() {
        return op5;
    }

    public void setOp5(String op5) {
        this.op5 = op5;
    }

    @Column(name="OPC")
    public int getOpc() {
        return opc;
    }

    public void setOpc(int opc) {
        this.opc = opc;
    }

    @Column(name="POSTON")
    @Temporal(javax.persistence.TemporalType.DATE)
    public Date getPoston() {
        return poston;
    }

    public void setPoston(Date poston) {
        this.poston = poston;
    }

    @Id
    @GeneratedValue
    @Column(name="QID")
    public int getQid() {
        return qid;
    }

    public void setQid(int qid) {
        this.qid = qid;
    }

    @Column(name="UID")
    public int getUid() {
        return uid;
    }

    public void setUid(int uid) {
        this.uid = uid;
    }

} 
```

HelloWorld.java

```
/*
 * $Id: HelloWorld.template,v 1.2 2008-03-27 05:47:21 ub3rsold4t Exp $
 *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

package example;

import java.util.List;
import beans.Question;

import com.opensymphony.xwork2.ActionSupport;

/**
 * <code>Set welcome message.</code>
 */
public class HelloWorld extends ActionSupport {

    private Question question;
    private List<Question> questionList;
    private HiberTest hiberTest;

    public String execute() throws Exception {
        this.questionList = hiberTest.list();
    System.out.println("execute called");
        setMessage(getText(MESSAGE));
        return SUCCESS;
    }

    /**
     * Provide default valuie for Message property.
     */
    public static final String MESSAGE = "HelloWorld.message";

    /**
     * Field for Message property.
     */
    private String message;

    /**
     * Return Message property.
     *
     * @return Message property
     */
    public String getMessage() {
        return message;
    }

    /**
     * Set Message property.
     *
     * @param message Text to display on HelloWorld page.
     */
    public void setMessage(String message) {
        this.message = message;
    }
} 
```

HiberTest.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package example;

import java.util.List;

import org.hibernate.HibernateException;
import org.hibernate.classic.Session;

import beans.Question;

public class HiberTest extends HibernateUtil {

    public List<Question> list() {

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<Question> contacts = null;
        try {

            contacts = (List<Question>)session.createQuery("from QUESTION").list();

        } catch (HibernateException e) {
            e.printStackTrace();
            session.getTransaction().rollback();
        }
        session.getTransaction().commit();
        return contacts;
    }
} 
```

HibernateUtil.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package example;

import org.hibernate.cfg.AnnotationConfiguration;
import org.hibernate.SessionFactory;

/**
 * Hibernate Utility class with a convenient method to get Session Factory
 * object.
 *
 * @author ROMO
 */
public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from standard (hibernate.cfg.xml) 
            // config file.
            sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

就是这样。当我运行项目时，它运行，但它不显示任何数据库数据。此外，当我右键单击文件 Hibernate.cfg.xml 并选择“运行 HQL 查询”并运行我的查询：“来自 QUESTION”时，我收到以下错误：

org.hibernate.hql.ast.QuerySyntaxException：QUESTION 未在 org.hibernate.hql.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:158) 的 org.hibernate.hql.ast.tree 中映射 [来自 QUESTION]。 FromElementFactory.addFromElement(FromElementFactory.java:87) 在 org.hibernate.hql.ast.tree.FromClause.addFromElement(FromClause.java:70) 在 org.hibernate.hql.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:255)在 org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3056) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2945) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause (HqlSqlBaseWalker.java:688) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker。selectStatement(HqlSqlBaseWalker.java:281) at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229) at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228) at org.hibernate .hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160) 在 org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111) 在 org.hibernate.engine.query.HQLQueryPlan.(HQLQueryPlan.java: 77) 在 org.hibernate.engine.query.HQLQueryPlan.(HQLQueryPlan.java:56) 在 org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72) 在 org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan( AbstractSessionImpl.java:133) 在 org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112) 在 org.hibernate.impl.SessionImpl。createQuery(SessionImpl.java:1623)

请帮帮我。它是一个简单的应用程序，用于在集成的 struts 和 Hibernate 中在浏览器上显示数据库数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:03:21.007

在 HQL 查询中，您使用逻辑实体名称，而不是表名称，并且它们区分大小写：

```
contacts = (List<Question>)session.createQuery("from Question").list(); 
```

# r - 判别分析交叉验证

> ID：11341880
> 
> 赞同：0
> 
> 时间：2012-07-05T09:52:46.137
> 
> 标签：r, validation

我刚刚尝试了判别分析的代码，如下所示：http: [//www.statmethods.net/advstats/discriminant.html](http://www.statmethods.net/advstats/discriminant.html)

如果使用这个：

```
fit <- lda(G ~ x1 + x2 + x3, data=mydata, na.action="na.omit", CV=TRUE) 
```

其次是：

```
ct <- table(mydata$G, fit$class) 
```

并且数据集包含 NA（我的确实如此）该表无法生成，因为两个向量的长度不同。$G 是包括 NA 的整个向量，但 $class 删除了 NA，因此长度不同。

在使用 table() 命令之前，有没有办法删除已删除的 $G 向量的数据点？

# javascript - 使用javascript获取单元格值

> ID：11341882
> 
> 赞同：0
> 
> 时间：2012-07-05T09:52:49.763
> 
> 标签：javascript, jquery, vb.net

我有一个 asp:table(table1)，在具有以下结构的用户控件中

* * *

```
 |  Col2 | Col3 | SUM
   DEFAULT |    5  |   2  |    
      R1   |    1  |   2  |     
      R2   |    4  |   5  | 
```

* * *

这里仅在 aspx 页面中静态创建标题，其余所有行都添加到 .vb（动态）页面中。

我的要求是，在页面加载时（在客户端，加载表格后），我希望 Sum 列显示 Col2 和 Col3 的总和。此外，由于 Col2 和 Col3 是可编辑的，因此在单元格中的数据更改时，Sum 值应自行更新。

我怎样才能找到单元格，因为我没有它们的 ID，还应该调用哪些事件来显示这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:01:55.017

**JavaScript**：

```
 var col2,col3;
    var table = document.getElementById('tableid');
    for (var i = 0; i < table.rows.length; i++) {
        //2 - first cell number, 3 2nd cell number.
        for (var j = 2; j <= 3; j++) {
           if(j==2){//coll2
             col1 += table.rows[i].cells[j].innerHTML;
           }else if(j==3){//col3
             col2 += table.rows[i].cells[j].innerHTML;
           }
        }
    } 
```

您可以这样查看：（也许这会让它看起来很简单）
表格：
{row:0,cell:0},{row:0,cell:1}, **{row:0,cell:2},{row :0,cell:3}** ,{row:0,cell:4}
{row:1,cell:0},{row:1,cell:1}, **{row:1,cell:2},{row: 1，单元格：3}**，{行：1，单元格：4}
{行：2，单元格：0}，{行：2，单元格：1}，**{行：2，单元格：2}，{行：2 ,cell:3}** ,{row:2,cell:4}
...
*（粗体值是您将通过上面的代码获得的值）*
我希望它有所帮助，您只需要表格 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:11:16.153

**HTML：**

```
<Table id='tblTest'>
    <thead >
        <th>
            ID
        </th>
        <th>
            Name
        </th>
    </thead>
    <tbody >
        <tr>
            <td>
                1
            </td>
            <td>
                JavaScript
            </td>
        </tr>
        <tr>
            <td>
                2
            </td>
            <td>
                JQuery
            </td>
        </tr>
    </tbody>
</table> 
```

**查询：**

```
var totRow=$('#tblTest tbody').find('tr').length;
var totCol=$('#tblTest thead').find('th').length;

for(var i=0;i<totRow;i++){
    for(var j=0;j<totCol;j++){
    var text= $('#tblTest tbody').find('tr:eq('+i+') td:eq('+j+')').text();
        console.log(text.trim());
    }
} 
```

如果你想看 [JSFiddle](http://jsfiddle.net/umairnoor84/D34dt/)

# java - 使用 getImage() 和 getScaledInstance() 时 java.awt.Image 的异常大小调整

> ID：11341893
> 
> 赞同：2
> 
> 时间：2012-07-05T09:54:11.337
> 
> 标签：java, image, swing, rmi, imageicon

我正在制作一个`java rmi based application`我从服务器传递和接收 ImageIcon 对象的地方......（图像存储在服务器中的单独 URL 中）

**该功能涉及以下......**

```
 1\.  Getting the image from the server at first....(on button press A)
        2\.  Replacing it with a image file in the client[optional]....(on button press B)
        3\.  Remove the image with a default image[optional]....(on button press C) 
        4\.  Sending it back to the Server....................(On button press D)..... 
```

**这里的图像显示在一个**`jlabel` **叫做**`img_label`

我使用的代码如下......

**使用的变量**

```
 java.awt.Image img;
                   javax.swing.ImageIcon CurrentImageIcon;
                   javax.swing.ImageIcon DefaultImageIcon;
                   // CurrentImageIcon contains the image to be displayed in the img_label....
                   // img is used for copying as well for scaling......
                   // DefaultImageIcon holds the default Image...... 
```

**开启按钮按下 A**

```
 img = temp.getImage();
                   CurrentImageIcon = new ImageIcon(img);
                   // Assuming temp holds the ImageIcon taken from the server.......

                   img=img.getScaledInstance(83,85 , Image.SCALE_DEFAULT);
                   img_label.setIcon(new ImageIcon(img));
                   img_label.revalidate();
                   img_label.repaint(); 
```

**开启按钮按下 B**

```
 String url_text = jTextField.getText(); // taking the url frm the field.....
                   CurrentImageIcon = new ImageIcon(url_text);

                   img=CurrentImageIcon.getImage();
                   img=img.getScaledInstance(83,85 , Image.SCALE_DEFAULT);
                   img_label.setIcon(new ImageIcon(img));
                   img_label.revalidate();
                   img_label.repaint(); 
```

**开按钮 按 C**

```
 img = DefaultImageIcon.getImage();
                   CurrentImageIcon = new ImageIcon(img);
                   img=img.getScaledInstance(83,85 , Image.SCALE_DEFAULT);
                   img_label.setIcon(new ImageIcon(img));
                   img_label.revalidate();
                   img_label.repaint(); 
```

**开按钮 按 D**

```
 // ImagetoSend is an ImageIcon to be sent to the Server.....
                   ImagetoSend = CurrentImageIcon;
                   CurrentImageIcon = null; 
```

现在我遇到的问题是一个奇怪的问题...... **当我点击这个按钮时，图像正在嵌入，因为我想要重新绘制......**

`But when i download the recently uploaded image next time on Button press A....it is displayed either magnified or reduced to size even though i included the getScaledInstance method....` 像这样...

![当我单击图像时。 它正确嵌入](../Images/dad742c1301e7d00cfe10a4d5fba127c.png) ![在此处输入图像描述](../Images/ffe51619a705e0b56d9b1e9c3dc356cb.png)

我正在处理的图像是 jpg 图像......我什至检查了服务器目录中的图像......从客户端上传到服务器的那个文件没有发生大小变化。但是当它被下载并嵌入到 jlabel 中时会观察到变化...... ***任何人都可以帮我解决这个问题......？？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:28:24.407

不知何故，它被缩小了两倍。要么缩小它，然后将它发送到缩小它的服务器，要么点击两个按钮来缩放它。消除服务器端的缩减代码，看看会发生什么。

# jquery - django Web 应用程序无法返回 json 响应

> ID：11341894
> 
> 赞同：0
> 
> 时间：2012-07-05T09:54:13.880
> 
> 标签：jquery, python, ajax, django, json

我正在尝试使用 django 返回 ajax 请求的 json 响应。Json 响应是一个序列化的 python 字典。我确信字典包含足够的数据，但它没有到达客户端。服务器端我有这个 python 例程：

```
def routine(request):
    response_dict = {}
    f = open("output.txt", "r")
    for line in f:
        line.strip('\n ')
        (key, val) = line.split('\t')
        if re.search("^[a-zA-Z][a-zA-Z0-9]*$", key) != None:
            if re.search("^[0-9]+$", val) != None:
                response_dict[key] = val
    f.close()
    json_response = json.dumps(response_dict)
    return HttpResponse(json_response, mimetype='application/json') 
```

客户端我有这个 javascript+jQuery 例程（**在下面编辑，见那个版本**）：

```
$.postJSON('ajax/routine', '', function(data) 
      {
        console.debug(data);
        console.debug(data.result);
        $("#result").html(data.result);
      }); 
```

postJSON 是一个执行 POST ajax 请求的 jQuery 插件，代码如下：

```
$.postJSON = function(url, data, callback) {
    return jQuery.ajax({
    'type': 'POST',
    'url': url,
    'contentType': 'application/json',
    'data': JSON.stringify(data),
    'dataType': 'json',
    'success': callback
    });
}; 
```

控制台和标有“结果”的标签中都没有输出。

**现在编辑**它返回 200 Http 状态代码和 124 作为 data.result 。在我调试的服务器中，json.dumps 可以完美运行。

**Edit2**我编辑了我的 jQuery/javascript 代码：

```
$.postJSON('ajax/routine', '', function(data) 
      {
        array = {};
        for(key in data)
          {
            array = key + " " + data[key];
          }
        $("#result").html(array);
      }); 
```

我已经在 Firebug 下对其进行了测试，并且响应到达了客户端，但是：1）使用小数组（1 个元素）将其打印出来 2）响应使 Chromium 开发人员工具和 Firebug 都崩溃（打开 JSON 选项卡时，在响应选项卡中我得到只有一条响应和消息“已达到 Firebug 响应大小限制。单击此处在新的 Firefox 选项卡中打开整个响应”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:12:25.697

`$.postJSON`是关于发布数据的，这不是您在这里需要的，因为您显然没有发布任何内容（也不处理您视图中发布的任何内容）。使用`$.getJSON`替代可能是第一件事（http://api.jquery.com/jQuery.getJSON/）。这也可以避免 django 的 csrf 令牌出现任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:20:58.290

问题出在javascript代码上。我可以改用这个：

```
$.postJSON('ajax/routine', '', function(data) 
      {
        for(key in data)
            $("#result").html($("#result").html() + " " + key + " " + data[key]);
      }); 
```

但是，这是可行的，但它是错误的，而且肯定不聪明，因为要处理的大量数据会导致页面挂起（#result innerHtml 更新了 48612 次）。所以我正在考虑使用 webWorker 来执行此操作或保存数据而不是在 html 中显示它。

谢谢大家

# javascript - 如何让图片单独放置

> ID：11341895
> 
> 赞同：0
> 
> 时间：2012-07-05T09:54:18.927
> 
> 标签：javascript, html, image

如何让这个img单独放置？所有图像的宽度= 300，3图像/行，但高度是随机的，那么..如何使2行和之后的行放在前行的底部？

```
 <section id="contenedor">
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
    <div id="imagen"><img src="x" class="ancho" />300</div>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:07:55.903

我不完全确定我理解这个问题。但我感觉你会想要研究 jQuery Masonry 插件：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

它允许您以流畅的布局布置图像（和其他元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:12:58.937

添加样式：

```
<style>
#imagen{
    width: 320px;
    float: left;
}
#imagen img{
    width: 300px;
    margin: 0px auto;
}

.split{
    clear: left;
}
</style> 
```

并添加`<div class="split"></div>`每 3 张图像。就像：

```
<section id="contenedor">
    <div id="imagen"><img src="200.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="300.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="400.jpg" class="ancho" />300</div>
    <div class="split"></div>
    <div id="imagen"><img src="300.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="400.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="200.jpg" class="ancho" />300</div>
    <div class="split"></div>
    <div id="imagen"><img src="400.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="300.jpg" class="ancho" />300</div>
    <div id="imagen"><img src="300.jpg" class="ancho" />300</div>
</section> 
```

# vba - Outlook 中的 VBA：“Microsoft Outlook 已停止工作”消息

> ID：11341899
> 
> 赞同：1
> 
> 时间：2012-07-05T09:54:48.383
> 
> 标签：vba, outlook

我尝试编写一个 VBA 脚本，它会自动回复共享邮箱收件箱中的邮件。目前这只是一个测试，稍后我想回复新收到的邮件。但是，到目前为止，如果我尝试运行代码，Outlook 会因错误“Microsoft Outlook 已停止工作”而崩溃，我必须重新启动 Outlook。

仅供参考：我使用的是德语 Outlook 版本 2007。

```
Sub ReplyMail()

Dim myOutApp As Object
Dim myNameSpace As Object
Dim myMailFolder As Object
Dim myRecipient As Outlook.Recipient

boxName = "sharedmailbox@host.de"      'configure mailbox address here

'Get Mailbox folder
Set myOutApp = CreateObject("Outlook.application")
Set myNameSpace = myOutApp.GetNamespace("MAPI")
Set myRecipient = myNameSpace.CreateRecipient(boxName)
    myRecipient.Resolve         'convert mail address into mailbox name
Set myMailFolder = myNameSpace.GetSharedDefaultFolder(myRecipient, olFolderInbox)

Dim Item As Object
Set Item = myMailFolder.Items(1)

Dim oMail As Outlook.MailItem
Set oMail = Item.Reply
With oMail
    .BodyFormat = olFormatHTML
    .HTMLBody = "<HTML>This is a test mail.</HTML>"     
    .Send
End With

End Sub 
```

如果使用“.display”而不是“.send”，邮件会正确弹出，我可以手动发送邮件。

我真的不知道如何解决这个错误，请帮助！

谢谢！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:01:52.073

很奇怪！除非它是一个特殊的错误，否则我看不到它。小备注：将您的对象声明为 Outlook 对象：

```
Dim myOutapp as outlook.application 
Dim myNameSpace as outlook.namespace
Dim myMailFolder as Mapifolder 
```

这是为了一般性能（对象是一般类型），但它几乎肯定不会解决您的问题。

如果我遇到您的情况，我会尝试从内存中完全退出 Outlook，修复或重新安装 Outlook/Office。我不认为您的代码有什么大问题。由于 .display 有效，我很惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T13:16:29.983

C:\Users\ 的访问权限可能存在问题

从某个时间点开始打开某些电子邮件时，我遇到了类似的问题。不知何故，对该文件夹的访问权限已被取消配置。所以我按照这个程序，一切都很好了： http: [//www.addictivetips.com/windows-tips/windows-7-access-denied-permission-ownership/](http://www.addictivetips.com/windows-tips/windows-7-access-denied-permission-ownership/)

# visual-studio-2008 - Visual Studio 2008 报表设计器行可见性

> ID：11341900
> 
> 赞同：0
> 
> 时间：2012-07-05T09:54:50.497
> 
> 标签：visual-studio-2008, row, visibility, report-designer

是否可以编写VB代码来确定VS 2008报告中组页脚的可见性？我已经在 VS 2010 中做到了

![在此处输入图像描述](../Images/444eb77647609d8bcf4ac0bb4aafafe1.png)

但我无法在 VS 2008 中找到这样的选项，我也无法使用 VS 2010。有没有办法获得那个好的对话框，以便我可以编写代码？

![在此处输入图像描述](../Images/9b984f2cbc42b466876648a199f252c6.png)

最接近这一点的似乎是行属性，但它只有：

![在此处输入图像描述](../Images/dca6f14565463b34f24dc772e23c2cfa.png)

那么，有没有一种解决方案可以像在 VS2010 中一样，根据他们在 VS2008 中的组值不显示某些页脚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:44:32.340

其实这很容易。我只是查找了 2010 版本的代码并将其添加到 2008（在 .rdlc 的 xml 版本中）并且它有效。

```
<TableRow>
    <Visibility>
        <Hidden>=IIF(some_condition, TRUE, FALSE)</Hidden>
    </Visibility>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T09:00:27.243

您也可以在属性->可见->隐藏->下拉菜单中选择“表达式”并在那里添加相同的 IIF() 代码。这样您就不需要手动更改 RDL 文件 :)

# soap - 是否需要在我的服务器中启用肥皂？

> ID：11341901
> 
> 赞同：1
> 
> 时间：2012-07-05T09:54:51.487
> 
> 标签：soap

我从 eway 令牌支付 API 收到此错误，

“soap:ReceiverServer 无法处理请求。---> 根级别的数据无效。第 1 行，位置 1。”

而且在我的服务器中没有启用肥皂。

是问题还是其他？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:11:07.943

“soap：ReceiverServer 无法处理请求。” 表示您的服务器没有接收 SOAP 数据

我认为您的服务器没有安装 SOAP。尝试安装 SOAP

# asp.net-mvc - 当我首先将 EF 与数据库一起使用时，如何在我的 asp.net mvc3 中添加验证内容？

> ID：11341903
> 
> 赞同：0
> 
> 时间：2012-07-05T09:54:58.833
> 
> 标签：asp.net-mvc

我的 mvc3 应用程序有问题，我需要创建一些验证内容。但我没有普通的模型类，因为我已经将 EF 与数据库优先方法一起使用。

我不能只是打开课程并写下类似的东西：

```
[Required]
[StringLength(10)] 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:06:47.480

您可以使用[MetadataType 属性](http://blogs.microsoft.co.il/blogs/gilf/archive/2011/01/20/adding-metadata-to-entities-in-the-data-model.aspx)。因此，让我们假设 EF 向您吐出以下您无法修改的类：

```
public partial class Foo
{
    public string Bar { get; set; }
} 
```

现在你可以扩展它，因为它是一个[部分类](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)：

```
[MetadataType(typeof(FooMetadata))]
public partial class Foo
{
} 
```

然后定义元数据：

```
public class FooMetadata
{
    [Required]
    [StringLength(10)]
    public string Foo { get; set; }
} 
```

或者，简单地丢弃数据注释并使用真正的验证框架，例如[FluentValidation.NET](http://fluentvalidation.codeplex.com/)（我使用并强烈推荐），允许您以流畅的方式在模型上表达复杂的验证规则，[与 ASP.NET MVC 具有出色的集成](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)并且还允许您优雅地[对您的验证逻辑](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)进行单独的单元测试。

# android - 动态添加自定义布局

> ID：11341908
> 
> 赞同：0
> 
> 时间：2012-07-05T09:55:07.797
> 
> 标签：android

![在此处输入图像描述](../Images/14481d9937a731af16da2ad8d4850c06.png)我必须在单击按钮时在相对布局中添加自定义布局。再次单击添加相同的布局，并在之前的膨胀布局之上添加另一个值。它会继续这样。我不想使用列表视图。

我可以动态添加我的自定义布局，但如何将它放在之前添加的上方。

单击添加按钮时，将在 xml 中的相对布局中添加一个新行，例如第 1 行、第 2 行，这将继续第 3 行、第 4 行等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:04:53.340

您可以使用 RelativeLayout.LayoutParams 类的 addRule 方法。例如：

```
RelativeLayout.Layoutparams params = (RelativeLayout.LayoutParams)button.getLayoutParams();
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
params.addRule(RelativeLayout.LEFT_OF, R.id.id_to_be_left_of);

button.setLayoutParams(params); 
```

这样做，您可以以编程方式设置您将在布局 xml 文件中设置的所有参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:48:26.743

在按钮单击事件上添加此代码：

```
 LinearLayout linearLayout=(LinearLayout) findViewById(R.id.layout);
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);

            LinearLayout layout=new LinearLayout(getApplicationContext());
            LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
            layout.setOrientation(LinearLayout.VERTICAL);
            layout.setLayoutParams(params);
            Button button1=new Button(getApplicationContext());
            button1.setLayoutParams(params1);
            button1.setText("button");

            layout.addView(button1);
            linearLayout.addView(layout); 
```

在 XML 文件中定义具有 id @+id/layout 和方向 Vertical 的布局。您会发现在每个单击事件上都添加了按钮布局。

# j - J 中带 /~ 的真值表

> ID：11341913
> 
> 赞同：3
> 
> 时间：2012-07-05T09:55:24.660
> 
> 标签：j

我正在尝试在 J 中生成真值表：

```
 nand =: *:
    nand /~ 0 1
1 1
1 0
    bxor =: 22 b.  NB. Built-in bitwise XOR
    bxor /~ 0 1
0 1
1 0 
```

现在我想定义我自己的逻辑异或，我这样做了：

```
 xor =: 3 : 0
]y                     NB. monadic case is just the identity
:
(x*.-.y)+.(y*.-.x)     NB. dyadic case is (x AND NOT y) OR (y AND NOT x)
) 
```

当我直接调用它时，这正如我所期望的那样工作。

```
 0 xor 0 1
0 1
    1 xor 0 1
1 0 
```

但它不会生成真值表：

```
 xor /~ 0 1
0 0 
```

为什么不？

我想也许问题是它`]/~ 0 1`本身产生了一个 1 x 2 数组，所以我将 monadic 部分更改为使用 nand ( `*:y`) 因为它产生 2x2 数组：

```
 *:/~ 0 1
1 1
1 0

   xor =: 3 : 0
*:y                  NB. certainly wrong, but at least has 2x2 shape.
:
(x*.-.y)+.(y*.-.x)
) 
```

但我仍然得到相同的行为：

```
 xor /~ 0 1
0 0 
```

有人可以帮助我理解我的思维缺陷吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:12:12.293

您`xor`的排名是无限的，而`*:`的`~:`排名是 0。您可以使用[b 来验证这一点。](http://www.jsoftware.com/help/dictionary/dbdotu.htm):`v b. 0`像这样：

```
~: b. 0
  _ 0 0 

*: b. 0
  0 0 0

xor b. 0
  _ _ _ 
```

这意味着`xor`对列表`0 1`而不是对每个单独的原子`0`,进行操作`1`。

`xor`如果您使用rank 0，您将获得预期的结果：

```
xor"0 /~ 0 1
0 1
1 0 
```

或者，如果您定义`xor`为 0 级。

# iphone - 立即显示 ActivityIndi cator

> ID：11341917
> 
> 赞同：0
> 
> 时间：2012-07-05T09:55:37.603
> 
> 标签：iphone, ios, cocoa-touch, uiactivityindicatorview

我知道如何制作动画，显示活动指示器。但我想知道如何立即显示活动指示器。

现在，当我单击按钮时，它将在 5 秒或多秒后加载另一个视图。单击该按钮正在加载子视图。调用该按钮单击方法时，它将调用超过 7 个方法，然后将加载子视图。但是 ActivityIndi​​cator 仅在执行完所有 7 个方法后才会显示。

我想做的是，我想在 Button Click 方法之后立即显示 ActivityIndi​​cator。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:59:00.380

```
-(IBAction)button_click{

..
..
..

[self performSelector:@selector(afterDelay) withObject:nil afterDelay:0.3];
}

-(void)afterDelay{

YOUR_Code 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:14:22.827

如果您已将代码显示或取消隐藏`activityIndicator`但未显示您必须使用`performSelector:withObject:afterDelay:`方法在取消隐藏后执行任何操作或显示`activityIndicator`延迟为 0.001 将在单击按钮后立即显示指标

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:59:54.210

问题是您在主线程上执行大量计算（或从互联网加载？），但所有视图突变操作都没有立即调用 - 在运行循环开始时，框架创建一个新的隐式核心动画事务，然后它收集有关视图突变的所有信息，然后*在 runloop 结束时提交事务*。通过阻塞主线程，您不允许事务提交并启动指标动画。

您可以在文档中阅读有关此架构的信息：[核心动画编程指南：事务](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Transactions.html)。

有三个选项：

1.  *（首选）*在后台执行您的操作。
2.  将您的二进制文件链接到`QuartzCore.framework`, 然后在您`#import <QuartzCore/QuartzCore.h>`调用`[CATransaction commit]`后`startAnimating`调用。这样您就可以提交*隐式*事务。
3.  创建自己的*显式* `CATransaction`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T10:05:14.253

如果您在谈论系统活动指示器，请使用：

```
[[UIApplication sharedApplication] performSelector:@selector(setNetworkActivityIndicatorVisible:) withObject:[NSNumber numberWithBool:YES ] afterDelay:0.0]; 
```

# php - 从数字中删除小数并转换为 12 位

> ID：11341924
> 
> 赞同：-1
> 
> 时间：2012-07-05T09:56:27.873
> 
> 标签：php

如何将数字（价格）从总计转换`1.00` 为 `000000000100` 所有字符串`12 digits` ，如果价格`100.00`函数应该转换为`000000010000`相同，如果价格`150.00`函数应该转换为`000000015000`。

这个值实际上我需要发送到银行（支付网关）进行处理。

谢谢你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:06:29.760

这是一个执行此操作的函数：

```
/**
 * Format a price according to the bank payment gateway specification.
 *
 * @param $price float The price
 * @return The formatted price
 */
function format_price($price) {
    $price = (int) ($price * 100);
    return str_pad((string) $price, 12, '0', STR_PAD_LEFT);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:07:58.947

你可以试试这个。

```
$num=<number with 2 decimal places>;
$strnum=''.intval($num*100);
while(strlen($strnum)<12)
    $strnum='0'.$strnum; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T10:15:46.663

从 c dev 来到 php dev 的人的答案：）

```
$a = 100.00;
printf("a=%012d", $a*100); 
```

输出：a=000000010000

```
$a = 150.00;
printf("a=%012d", $a*100); 
```

输出：a=000000015000

对于数字转换需要使用`sprintf`：

```
$a = 150.00;
$b = sprintf("%012d", $a*100);
var_dump($b); 
```

输出：字符串（12）“000000015000”

# objective-c - NSTableView 在行中添加越来越多的数字

> ID：11341925
> 
> 赞同：0
> 
> 时间：2012-07-05T09:56:29.853
> 
> 标签：objective-c, cocoa, nstableview

我正在尝试通过添加具有两列 x 和 y 的行来制作 NSTable 视图应用程序。我希望 x 列是常量字符串，但 y 列我希望每次按下按钮添加时将初始数字增加 1。

这是我的 TableController 实现代码

```
@implementation TableViewController

-(id)init {

self = [super init];
if (self) {
    list = [[NSMutableArray alloc]init];

}

return self;
}
-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
return [list count];
}

-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
Number *p = [list objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
return [p valueForKey:identifier];
}

-(IBAction)add:(id)sender{

    [list addObject:[[Number alloc] init]];

    [tableView reloadData];

}

-(void) dealloc {
[super dealloc];
}
@end 
```

和号码实现文件：

```
@implementation Number

@synthesize x;
@synthesize y;

-(id) init {
self=[super init];
if (self) {
    int j;
    x = 5;
    y=2+j;
    j++; 
}

return self;
}

@end 
```

编号 .h 文件：

```
#import <Foundation/Foundation.h>
int j;
@interface Number : NSObject {
@private 
int x,y;
}

@property int x,y,j;

@end 
```

但是当我点击添加按钮时，y 列中的数字不会增加 1。每次我点击添加按钮时，它似乎都会被重置。任何帮助我做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:04:06.467

将 j 声明到 .h 文件中。

```
.f file:
    int j; 
```

int .m 文件：

```
 -(id) init {
self=[super init];
if (self) {
    x = 5;
    y=2+j;
    j++; 
}

return self;
} 
```

# android - 在android应用程序中从http转换为https后的SocketTimeoutException

> ID：11341928
> 
> 赞同：1
> 
> 时间：2012-07-05T09:56:44.687
> 
> 标签：android, ssl, https, ca, socket-timeout-exception

在尝试将我的 android 应用程序转换为使用 SSL 在我的 android 应用程序和 Web 服务器之间传输信息后，我遇到了一些问题。(SocketTimeOutException)

我从证书颁发机构 (CA) 购买了正 SSL 证书，并将我的服务器配置为正确使用它。我已经在我的网络浏览器中对其进行了测试，并且它工作正常。

现在我正在尝试修改我的 android 应用程序以使用 https 而不是 http，但由于这是我自己第一次使用 https，所以我对需要在 java 代码中实现哪些步骤感到有些困惑。

目前我正在我的设置页面上配置我的应用程序以使用正确的 url。例如，我在输入网站 url (http://www.mydomain.com) 和存储相关页面的应用程序文件夹 (myappfolder) 的活动中有 2 个文本字段

然后，我使用以下代码进行连接并测试连接变量是否配置正确，其中 validateurl.aspx 是一个网页，如果页面存在则返回 JSON 字符串：

```
protected boolean validateConnectionSettings() {        

    String result = "";
    boolean validated = false;
    try {
        StringBuilder urlBuilder = new StringBuilder();
        urlBuilder.append(tvWebsiteURLValue.getText() + File.separator + tvApplicationMiddlewareValue.getText() + File.separator + "validateurl.aspx");
        URL url = new URL(urlBuilder.toString());
        URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef()); 
        url = uri.toURL();

        URLConnection urlConn = url.openConnection();
        BufferedReader in = new BufferedReader( new InputStreamReader(urlConn.getInputStream()));

        String inputLine;
        while((inputLine = in.readLine()) != null){
            result += inputLine;
        }                   
        in.close();

        if(result.equals("exists")) {
            validated = true;
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
        Log.e(TAG, e.getMessage());
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, e.getMessage());
    }

    return validated;
} 
```

现在，当我尝试将 (http://www.mydomain.com) 变量转换为使用 https 时，我得到了上面提到的 java.net.SocketTimeoutException。

我已经用谷歌搜索了这个问题，发现我应该在上面的代码中实现 HttpsURLConnection 而不是 URLConnection 所以我已经相应地修改了我的代码如下：

```
 protected boolean validateConnectionSettings() {        

    String result = "";
    boolean validated = false;
    try {
        StringBuilder urlBuilder = new StringBuilder();
        urlBuilder.append(tvWebsiteURLValue.getText() + File.separator + tvApplicationMiddlewareValue.getText() + File.separator + "validateurl.aspx");
        URL url = new URL(urlBuilder.toString());
        URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef()); 
        url = uri.toURL();

        // URLConnection urlConn = url.openConnection();
        HttpsURLConnection urlConn = (HttpsURLConnection)url.openConnection();
        BufferedReader in = new BufferedReader( new InputStreamReader(urlConn.getInputStream()));

        String inputLine;
        while((inputLine = in.readLine()) != null){
            result += inputLine;
        }                   
        in.close();

        if(result.equals("exists")) {
            validated = true;
        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
        Log.e(TAG, e.getMessage());
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, e.getMessage());
    }

    return validated;
} 
```

但是我仍然收到 java.net.SocketTimeoutException。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:43:54.833

好的，我发现了导致 SocketTimeOutException 的问题。

问题似乎是我在家工作，而电话使用的网络与服务器所在的网络相同。在这种情况下，它似乎无法使用 https 访问服务器。我关闭了手机的无线网络并使用手机的 3G 连接进行连接，嘿，应用程序已连接并验证了我的 URL。

我在直接从服务器和我的工作笔记本电脑在网络浏览器中测试 https 连接时遇到了类似的问题。在每种情况下，我都通过将 www.mydomain.com 地址添加到主机文件中来解决问题。

我现在要研究编辑我的 android 手机主机文件，看看这是否能解决它，因为我不想使用手机 G3 连接进行测试，因为我预计会收到很多费用......

稍后我会在下面发表评论，说明情况如何

我希望这可以帮助其他有类似问题的人

# php - PHP 标头（位置）错误

> ID：11341929
> 
> 赞同：0
> 
> 时间：2012-07-05T09:56:50.410
> 
> 标签：php, header, location

每当我打开页面时，我都会收到以下错误：

> [04-Jul-2012 17:10:45] PHP 警告：无法修改标头信息 - 标头已由 /home/test/public_html 中的（输出开始于 /home/test/public_html/admin/header.php:39）发送/admin/edAgent.php 在第 80 行
> 
> [04-Jul-2012 17:10:55] PHP 警告：无法修改标头信息 - 标头已由 /home/test/public_html 中的（输出开始于 /home/test/public_html/admin/header.php:39）发送/admin/edAgent.php 在第 80 行

包括标题的代码片段：

**编码头：**

```
header('Content-Type: text/html; charset=utf-8'); 
```

**登录重定向标头：**

```
if(!isset($_SESSION["login"])OR $_SESSION["login"]!=1){        
    header('Location: login.php');
    exit;     
    } 
```

**检查登录用户是否有编辑权限：**

```
if($level!='4') {
    header('Location: acd.php?msg=1');
    exit;
} 
```

**检查 ID 是否存在：**

```
if ($nUsers==0) {    
    header('Location: acd.php?msg=2');
    exit;    
} 
```

**检查信息是否可编辑：**

```
if($access != '4') {        
    header('Location: acd.php?msg=1');
    exit;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:59:09.837

如果您将任何内容输出到屏幕，则标题将写入。因此，如果您打算`header()`在代码中使用，则必须在输出任何内容之前执行此操作，或者在开始时使用`ob_start()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:21:53.697

如果标头已发送，则 JS 方法应该可以工作。

```
print '<script type="text/javascript">window.top.location.href = "'. $myurl .'";</script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:09:04.623

`ob_start();`在页首和页尾添加`ob_end_flush();`。尝试在函数中存储 header()，尽管 header() 之后不应有任何输出代码。

希望能帮助到你

# shell - 列出大小大于 N 的文件

> ID：11341930
> 
> 赞同：1
> 
> 时间：2012-07-05T09:56:58.690
> 
> 标签：shell, unix, awk, grep

我需要在一个目录下列出所有大小> 0的文件（实际上预计文件大小为0）。我怎样才能用 grep 和/或 awk 做到这一点？我在想类似的东西

```
$ ls -alR | grep ... | awk ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:01:44.300

还有一个`find`选择：

```
find . ! -empty 
```

更新：（感谢@steve 评论）

如果您只需要列出当前目录中的文件：

```
find . -maxdepth 1 -type f ! -empty 
```

请注意，这`-maxdepth`是 GNU 功能。在 POSIX 环境中还有另一种方法：

```
find -type f -o \( ! -name . -type d -prune -false \) ! -empty 
```

# android - 如何在 android 上创建 .csv

> ID：11341931
> 
> 赞同：19
> 
> 时间：2012-07-05T09:57:07.077
> 
> 标签：android

我的目标是从表格创建一个 .csv 文件，以打印报告。然后我可以将此 .csv 文件存储到我的 sdCard 中。我提到了一些与此类似的问题，但他们要求提供一个 jar 文件。有没有其他方法可以不集成jar文件？

已在组件 au.com.bytecode.opencsv.CSVWriter 中集成了一个 jar 文件...我在这里找不到的是写入新行的逻辑...帮助？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-02-06T13:12:47.433

在互联网上搜索了很多之后，我得到了在 android App、内部存储（没有 SD 卡）中创建 Csv 文件的解决方案，所以我决定与其他人分享如何在 android 中创建 csv 文件以及如何通过邮件附加它。

首先下载`Opencsv.jar`库并添加到您的 android 项目中。[https://sourceforge.net/projects/opencsv/files/opencsv/](https://sourceforge.net/projects/opencsv/files/opencsv/)

**直接添加实现（无需下载`.jar`）**

```
implementation 'com.opencsv:opencsv:4.6' // Here is opencsv library 
```

**或者在android项目中添加jar文件：**

1.  将 Android Studio 文件结构 Android 更改为 Project（在项目名称 Android 的左下方，更改为 Project）
2.  复制`opencsv.jar`文件并粘贴到`libs`文件夹中。
3.  右键单击`opencsv.jar`文件并点击`Add as library`.

**向 Menifest.xml 添加权限**（如果设备 API 为 23 或更高，请检查运行时权限）

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

打开**build.gradle (Module:app)**并检查它是否添加：

```
dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
        exclude group: 'com.android.support', module: 'support-annotations'
    })
    compile 'com.android.support:appcompat-v7:26.+'
    compile 'com.google.code.gson:gson:2.2.4'
    compile 'com.android.support:recyclerview-v7:26.+'
    testCompile 'junit:junit:4.12'
    implementation files('libs/opencsv-4.1.jar') // Here is opencsv library added to project when using .jar
} 
```

现在编码部分：**创建 csv 文件并将数据插入其中。**

```
 String csv = (Environment.getExternalStorageDirectory().getAbsolutePath() + "/MyCsvFile.csv"); // Here csv file name is MyCsvFile.csv

 //by Hiting button csv will create inside phone storage.
 buttonAdd.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

            CSVWriter writer = null;
                try {
                    writer = new CSVWriter(new FileWriter(csv));

                    List<String[]> data = new ArrayList<String[]>();
                    data.add(new String[]{"Country", "Capital"});
                    data.add(new String[]{"India", "New Delhi"});
                    data.add(new String[]{"United States", "Washington D.C"});
                    data.add(new String[]{"Germany", "Berlin"});

                    writer.writeAll(data); // data is adding to csv 

                    writer.close();
                    callRead();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }); 
```

现在，如果您想**在 android 中查看您的 csv 文件，请**按照以下步骤操作：

1.  转到文件管理器/我的文件到您的手机。
2.  转到内部存储/本地，只需滚动即可获得 csv 文件。
3.  如果 csv 文件未在您的设备中打开，请从 Play 商店安装[Csv Viewer 。](https://play.google.com/store/apps/details?id=jp.ne.shira.csv.viewer&hl=en)

现在，如果您想将此 csv 文件附加到您的应用程序的附件中

**以下是邮件中 csv 文件附件的代码：**

```
button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent emailIntent = new Intent(Intent.ACTION_SEND);
                emailIntent.setType("text/plain");
                emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"email@example.com"});
                emailIntent.putExtra(Intent.EXTRA_SUBJECT, "subject here");
                emailIntent.putExtra(Intent.EXTRA_TEXT, "body text");

                File file = new File(csv);
                Uri uri = Uri.fromFile(file);
                emailIntent.putExtra(Intent.EXTRA_STREAM, uri);
                startActivity(Intent.createChooser(emailIntent, "Pick an Email provider"));
            }
        }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-05T10:21:15.383

检查下面的代码以生成 CSV 文件。无需使用 jar 文件。

您必须将一个 csv 文件保存到 SD-CARD 中。

[CSV 文件示例](http://s374326078.onlinehome.us/foursquare/web/a.csv)

```
public void exportEmailInCSV() throws IOException {
        {

            File folder = new File(Environment.getExternalStorageDirectory()
                    + "/Folder");

            boolean var = false;
            if (!folder.exists())
                var = folder.mkdir();

            System.out.println("" + var);

            final String filename = folder.toString() + "/" + "Test.csv";

            // show waiting screen
            CharSequence contentTitle = getString(R.string.app_name);
            final ProgressDialog progDailog = ProgressDialog.show(
                    MailConfiguration.this, contentTitle, "even geduld aub...",
                    true);//please wait
            final Handler handler = new Handler() {
                @Override
                public void handleMessage(Message msg) {

                }
            };

            new Thread() {
                public void run() {
                    try {

                        FileWriter fw = new FileWriter(filename);

                        Cursor cursor = db.selectAll();

                        fw.append("No");
                        fw.append(',');

                        fw.append("code");
                        fw.append(',');

                        fw.append("nr");
                        fw.append(',');

                        fw.append("Orde");
                        fw.append(',');

                        fw.append("Da");
                        fw.append(',');

                        fw.append("Date");
                        fw.append(',');

                        fw.append("Leverancier");
                        fw.append(',');

                        fw.append("Baaln");
                        fw.append(',');

                        fw.append("asd");
                        fw.append(',');

                        fw.append("Kwaliteit");
                        fw.append(',');

                        fw.append("asd");
                        fw.append(',');

                        fw.append('\n');

                        if (cursor.moveToFirst()) {
                            do {
                                fw.append(cursor.getString(0));
                                fw.append(',');

                                fw.append(cursor.getString(1));
                                fw.append(',');

                                fw.append(cursor.getString(2));
                                fw.append(',');

                                fw.append(cursor.getString(3));
                                fw.append(',');

                                fw.append(cursor.getString(4));
                                fw.append(',');

                                fw.append(cursor.getString(5));
                                fw.append(',');

                                fw.append(cursor.getString(6));
                                fw.append(',');

                                fw.append(cursor.getString(7));
                                fw.append(',');

                                fw.append(cursor.getString(8));
                                fw.append(',');

                                fw.append(cursor.getString(9));
                                fw.append(',');

                                fw.append(cursor.getString(10));
                                fw.append(',');

                                fw.append('\n');

                            } while (cursor.moveToNext());
                        }
                        if (cursor != null && !cursor.isClosed()) {
                            cursor.close();
                        }

                        // fw.flush();
                        fw.close();

                    } catch (Exception e) {
                    }
                    handler.sendEmptyMessage(0);
                    progDailog.dismiss();
                }
            }.start();

        }

    } 
```

在清单中添加此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T10:16:42.940

这将工作:)

```
 try {
    String TestString="";

    FileOutputStream fOut = openFileOutput(filename, MODE_WORLD_READABLE);

    OutputStreamWriter osw = new OutputStreamWriter(fOut); 

       // Write the string to the file
     for( i=1; i<total_row; i++)
        {

            for( j=1; j<total_col; j++)
            {
                TestString+=table[i][j].getText().toString();        // to pass in every widget a context of activity (necessary) 
                TestString += " ,";
            }
             TestString+="\n";
        }
     Log.v("the string is",TestString);
     osw.write(TestString);
     osw.flush();
     osw.close();
    }
    catch (IOException ioe) 
      {ioe.printStackTrace();} 
```

在清单中你必须写

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

就在应用程序标签之前

# javascript - 将旧 javascript 转换为 jQuery 的工具

> ID：11341932
> 
> 赞同：5
> 
> 时间：2012-07-05T09:57:09.770
> 
> 标签：javascript, jquery

我知道网上有很多工具可以让我们的生活更轻松，对于我们开发人员来说，包括一些非常强大的工具。

我问你是否知道将旧 javascript 转换为 jQuery 的工具？

一个可以帮助制作这些东西的工具？因为我要在jQuery中翻译数千行代码，而且我想我有大约15年的时间...... :)

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T09:59:22.783

不，这样的工具不存在。如果它存在，那么由它创建的代码就不会是任何人想要使用的东西。

开始使用 jQuery 的最佳方式是简单地将 jQuery 用于新的东西，如果有时间慢慢手动迁移旧的东西 - 最好是那些已经损坏或需要修改的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T10:26:26.327

这个问题没有意义。jQuery 不是您可以翻译成的语言。jQuery 是一个库，您可以根据需要在 Javascript 代码中使用它。没有 jQuery 没有什么是做不到的。

您可能需要一个工具来帮助您重构 Javascript 代码，用等效的 jQuery 方法替换特定模式。问题是这会造成混乱。

例如 jQuery 等价于：

```
var x = document.getElementById('foo'); 
```

是：

```
var x = $('#foo'); 
```

但是现在 x 是一个 jQuery 对象，而不是 DOM 对象，所以使用它的代码会中断。

你可以这样做：

```
var x = $('#foo')[0]; 
```

这会给你一个 DOM 对象，但是你在浪费 jQuery。

一种解决方案是将代码替换为：

```
var $x = $('#foo');
var x = $x[0]; 
```

然后坚持`$var`使用 jQuery 包装版本的约定`var`。随着重构的进行，您可以使用一个告诉您“x”未使用的工具（如 jsLint）来了解删除它是安全的。

各种 IDE 都有一些工具来重构 Javascript。请参阅以下问题：[您如何重构 JavaScript、HTML、CSS 等？](https://stackoverflow.com/questions/1446267/how-do-you-refactor-javascript-html-css-etc)

# javascript - Appcelerator 中的自定义标签栏 - 如何返回根窗口？

> ID：11341935
> 
> 赞同：0
> 
> 时间：2012-07-05T09:57:25.067
> 
> 标签：javascript, ios, titanium, appcelerator, appcelerator-mobile

我有一个需要在 Appcelerator Titanium 上开发的 iOS 应用程序中修复的错误。

我一直在使用 customTabBar（[在 GitHub 上可用](https://github.com/netsells/customTabBar)）来创建一个定制的 tabBar，效果很好！

唯一的小问题是它删除了在图标上选项卡并返回到根窗口的选项（就像在 iOS 中适当的原生 tabBar 一样）。

因此，如果我在我的应用程序中向下钻取 3 或 4 个窗口，点击选项卡图标没有任何作用，我必须通过多次点击返回导航到开头。

这是我正在使用的完整 customTabBar.js 脚本：

```
CustomTabBar = function(settings) {
var tabBarItems = [];
var tabCurrent = 2;

var resetTabs = function() {
    for(var i = 0; i < tabBarItems.length; i++) {
        // Clear all the images to make sure only
        // one is shown as selected
        tabBarItems[i].image = tabBarItems[i].backgroundImage;
    }
};

var assignClick = function(tabItem) {
    tabItem.addEventListener('click', function(e) {
        // Just fetching the 'i' variable from the loop
        var pos = e.source.pos;

        if (tabCurrent == pos) {
            // TODO
            // Change back to root window, like the native tab action.

            // code must go in here

            return false;
        }       

        // Switch to the tab associated with the image pressed
        settings.tabBar.tabs[pos].active = true;
        tabCurrent = pos;

        // Reset all the tab images
        resetTabs();

        // Set the current tab as selected
        tabBarItems[pos].image = settings.imagePath + settings.items[pos].selected;     
    });
};

// Create the container for our tab items
var customTabBar = Ti.UI.createWindow({
    height: 48,
    backgroundImage:'images/tabbarbackground.png',
    bottom: 0
});

for(var i = 0; i < settings.items.length; i++) {
    // Go through each item and create an imageView
    tabBarItems[i] = Titanium.UI.createImageView({
        // background is the default image
        backgroundImage: settings.imagePath + settings.items[i].image,

        width: settings.width,
        height: settings.height,
        left: settings.width * i
    });

    // Pass the item number (used later for changing tabs)
    tabBarItems[i].pos = i;
    assignClick(tabBarItems[i]);

    // Add to the container window
    customTabBar.add(tabBarItems[i]);
}

// Display the container and it's items
customTabBar.open();

// Set the first item as current :)
resetTabs();
//tabBarItems[0].image = settings.imagePath + settings.items[0].selected;
tabBarItems[2].image = settings.imagePath + settings.items[2].selected;

return {
    hide: function() { customTabBar.hide(); },
    show: function() { customTabBar.show(); }
};
}; 
```

包含我需要添加的位的函数已被标记，但只是空的。这里是：

```
var assignClick = function(tabItem) {
    tabItem.addEventListener('click', function(e) {
        // Just fetching the 'i' variable from the loop
        var pos = e.source.pos;

        if (tabCurrent == pos) {
            // TODO
            // Change back to root window, like the native tab action.

            // code must go in here

            return false;
        }       

        // Switch to the tab associated with the image pressed
        settings.tabBar.tabs[pos].active = true;
        tabCurrent = pos;

        // Reset all the tab images
        resetTabs();

        // Set the current tab as selected
        tabBarItems[pos].image = settings.imagePath + settings.items[pos].selected;     
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T15:28:23.840

customTabBar 在现有的标签栏上放置一个窗口（实际上，只是一个视图）。然后它处理通过的点击。但是您必须处理单击事件以在选项卡之间切换，并且正如您所指出的，跟踪堆栈上的所有窗口。

但你知道吗？你工作太辛苦了。该平台已经为您完成了所有这些工作。

通过点击事件（通过禁用覆盖上的触摸），底层选项卡组将发挥自己的魔力。然后您需要做的就是使用选项卡组的焦点事件更新 UI（evt.index 是焦点选项卡，而 evt.previousIndex 是模糊的）。

**应用程序.js：**

```
Ti.include('overrideTabs.js');

/*
 This is a typical new project -- a tab group with three tabs.
 */

var tabGroup = Ti.UI.createTabGroup();

/*
 Tab 1.
 */
var win1 = Ti.UI.createWindow({ title: 'Tab 1', backgroundColor: '#fff' });
var tab1 = Ti.UI.createTab({
    backgroundImage: 'appicon.png',
    window: win1
});
var button1 = Ti.UI.createButton({
    title: 'Open Sub Window',
    width: 200, height: 40
});
button1.addEventListener('click', function (evt) {
    tab1.open(Ti.UI.createWindow({ title: 'Tab 1 Sub Window', backgroundColor: '#fff' }));
});
win1.add(button1);
tabGroup.addTab(tab1);

/*
 Tab 2.
 */
tabGroup.addTab(Ti.UI.createTab({
    backgroundImage: 'appicon.jpg',
    window: Ti.UI.createWindow({ title: 'Tab 2', backgroundColor: '#fff' })
}));

/*
 Tab 3.
 */
tabGroup.addTab(Ti.UI.createTab({
    backgroundImage: 'appicon.png',
    window: Ti.UI.createWindow({ title: 'Tab 3', backgroundColor: '#fff' })
}));

/*
 Now call the overrideTabs function, and we're done!
 */
overrideTabs(
    tabGroup, // The tab group
    { backgroundColor: '#f00' }, // View parameters for the background
    { backgroundColor: '#999', color: '#000', style: 0 }, // View parameters for selected tabs 
    { backgroundColor: '#333', color: '#888', style: 0 } // View parameters for deselected tabs
);

tabGroup.open(); 
```

**overrideTabs.js：**

```
 /**
 * Override a tab group's tab bar on iOS.
 *
 * NOTE: Call this function on a tabGroup AFTER you have added all of your tabs to it! We'll look at the tabs that exist
 * to generate the overriding tab bar view. If your tabs change, call this function again and we'll update the display.
 *
 * @param tabGroup The tab group to override
 * @param backgroundOptions The options for the background view; use properties like backgroundColor, or backgroundImage.
 * @param selectedOptions The options for a selected tab button.
 * @param deselectedOptions The options for a deselected tab button.
 */
function overrideTabs(tabGroup, backgroundOptions, selectedOptions, deselectedOptions) {
    // a bunch of our options need to default to 0 for everything to position correctly; we'll do it en mass:
    deselectedOptions.top = deselectedOptions.bottom
        = selectedOptions.top = selectedOptions.bottom
        = backgroundOptions.left = backgroundOptions.right = backgroundOptions.bottom = 0;

    // create the overriding tab bar using the passed in background options
    backgroundOptions.height = 50;
    var background = Ti.UI.createView(backgroundOptions);

    // pass all touch events through to the tabs beneath our background
    background.touchEnabled = false;

    // create our individual tab buttons
    var increment = 100 / tabGroup.tabs.length;
    deselectedOptions.width = selectedOptions.width = increment + '%';
    for (var i = 0, l = tabGroup.tabs.length; i < l; i++) {
        var tab = tabGroup.tabs[i];

        // position our views over the tab.
        selectedOptions.left = deselectedOptions.left = increment * i + '%';

        // customize the selected and deselected based on properties in the tab.
        selectedOptions.title = deselectedOptions.title = tab.title;
        if (tab.backgroundImage) {
            selectedOptions.backgroundImage = deselectedOptions.backgroundImage = tab.backgroundImage;
        }
        if (tab.selectedBackgroundImage) {
            selectedOptions.backgroundImage = tab.selectedBackgroundImage;
        }
        if (tab.deselectedBackgroundImage) {
            deselectedOptions.backgroundImage = tab.deselectedBackgroundImage;
        }
        selectedOptions.visible = false;
        background.add(tab.deselected = Ti.UI.createButton(deselectedOptions));
        background.add(tab.selected = Ti.UI.createButton(selectedOptions));

    }

    // update the tab group, removing any old overrides
    if (tabGroup.overrideTabs) {
        tabGroup.remove(tabGroup.overrideTabs);
    }
    else {
        tabGroup.addEventListener('focus', overrideFocusTab);
    }

    tabGroup.add(background);
    tabGroup.overrideTabs = background;
}

function overrideFocusTab(evt) {
    if (evt.previousIndex >= 0) {
        evt.source.tabs[evt.previousIndex].selected.visible = false;
    }
    evt.tab.selected.visible = true;
} 
```

[https://gist.github.com/853935](https://gist.github.com/853935)

# javascript - 谷歌气泡图维度错误

> ID：11341938
> 
> 赞同：0
> 
> 时间：2012-07-05T09:57:38.777
> 
> 标签：javascript, html, bubble-chart

首先对不起我的英语，但我是意大利人。

现在......我正在毫无问题地使用动态图表和地理图表，但气泡图似乎有他的方式做事。

我在我的页面上使用了几个图表，有些是隐藏的（显示：无），但当我隐藏气泡图时，当我在代码 900x600 上书写时，他的尺寸变化为 400x200。

这是我完美地与其他图表一起使用的代码：

```
<div style="width: 100%; clear: left; display: none" id="religioni-frame">
    <div style="width: 50%; float: left; text-align: center">
        <div id="religione-bubble" style="width: 650px; height: 360px;margin: 0 auto"></div>
    </div>
    <div style="width: 50%; float: left; text-align: center;">
        <div id="religioni" style="width: 650px; height: 360px; margin: 0 auto"></div>
    </div>
</div> 
```

但是当我在气泡图上使用它时，一切都崩溃了……我得到了一个 400x200 的邮票……

```
<div style="height: 900px;display: none" id="bubble-frame">
       <div id="chart_div"  style="width: 900px; height: 400px;"></div>
</div> 
```

如果我在没有显示的情况下使用它：无它需要正确的尺寸。

```
<div style="height: 900px;display: inline" id="bubble-frame">
       <div id="chart_div"  style="width: 900px; height: 400px;"></div>
</div> 
```

这是一个测试页面[https://dl.dropbox.com/u/29200489/IPC/untitled/test.html](https://dl.dropbox.com/u/29200489/IPC/untitled/test.html) 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:15:07.313

对不起我的英语，我也是意大利人..

最好总是指定宽度和高度

像这样更改“选项”代码行

```
var options = {width: 500, height: 900,
colorAxis: {colors: ['yellow', 'red']}
}; 
```

等等

再见

六产

# javascript - 使用ckeditor编辑页面

> ID：11341939
> 
> 赞同：0
> 
> 时间：2012-07-05T09:57:40.443
> 
> 标签：javascript, jquery, ckeditor

我正在构建一个类似于 pagemodo.com 的页面自定义功能的功能。用户必须单击 HTML 页面中的标签（div），CKEDITOR 将加载带有标签文本的单独 div。

现在，ckeditor 正在加载标签文本，但 CKEDITOR 的“KeyUp”事件没有触发。只有当“KeyUp”事件触发时，我才能调用另一个函数“readAsTyped”来同时更改标签中的文本。

您可以在此处查看工作副本[http://graffiti-media.co/testing/rashmi/custom/](http://graffiti-media.co/testing/rashmi/custom/)

```
 $(document).ready(function() {
        $('.editable').click(function(){
        $(this).children().each(function(index, domEle) {
                createEditor($(domEle).text(), domEle);
            });
        });

    });

    var editor, html = '';

    function createEditor(text1, domEle)
    {

        // Create a new editor inside the <div id="editor">, setting its value to html
        var config = {};
        ckeditor_instance = CKEDITOR.appendTo( 'editor', config, text1 );

        var abc=ckeditor_instance.name;
        ckeditor_instance.on('instanceCreated', function(e) {
                e.editor.on('contentDom', function() {

                e.editor.document.on('keyup', function(event) {
                    // keyup event in ckeditor

                readAsTyped($('#cke_editor2'),$(domEle));
                    //on focus
                }
            );
        });
    }); 
    }

function readAsTyped(obj, label) {
    var typedVal = obj.val();
    // set the value of characters into the label
    $(label).html(typedVal);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:32:57.953

你的意思是这样的吗？ [http://alfonsoml.blogspot.com.es/2012/05/recipe-live-preview-of-ckeditor.html](http://alfonsoml.blogspot.com.es/2012/05/recipe-live-preview-of-ckeditor.html)

# javascript - 使用 jQuery / javascript 进行 HTML 表格转换

> ID：11341941
> 
> 赞同：3
> 
> 时间：2012-07-05T09:57:54.313
> 
> 标签：javascript, jquery, html, html-table

`table #1`您是否知道任何可以转换`table #2`并可能再次返回的插件或现成的解决方案？

**[jsFiddle 演示](http://jsfiddle.net/Seefeld/4BJKa/)**

![在此处输入图像描述](../Images/b23b8278adfef33948e570f761f4066b.png)

![在此处输入图像描述](../Images/815ccdbf63420d91ec5dd9683ad83588.png)

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:32:31.483

你要找的词是转置表格

如果您对它的工作原理有任何疑问，请咨询我。

[http://jsfiddle.net/4BJKa/32/](http://jsfiddle.net/4BJKa/32/)

# blackberry - 在黑莓上格式化电话号码

> ID：11341943
> 
> 赞同：-2
> 
> 时间：2012-07-05T09:58:05.373
> 
> 标签：blackberry, java-me, format

我需要在编辑字段中输入手机号码。我需要以这种格式显示数字：
`123-456-7890`

例如：1234567890 是我的手机号码，当我在文本字段中输入这个时，前 3 位数字后我需要放置一个“-”，接下来的 3 位数字后，我需要放置另一个“-”。

如果我输入 123 然后自动在文本字段中放置“-”，在 456 之后放置另一个“-”，不需要放置最后 4 位数字。

似乎类似于以货币格式显示文本，但是从该文本字段获取文本时，我需要获取没有任何“-”的实际手机号码（“1234567890”，而不是 123-456-7890）关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:18:41.677

请尝试在 EditFiled 上添加侦听器并检查输入音素的长度并在 3 和 7 位置设置“-”，请参阅以下代码可能会有所帮助。

```
editField.getEditField().setChangeListener(new FieldChangeListener() { 

            public void fieldChanged(Field field, int context) {
                EditField sfield = (EditField)field;
            String number = sfield.getText();
            if (number.length() == 3 || number.length() == 7) { 
                setFormat(number); 
            } 
            } 

            });

    add(editField); 
```

在主屏幕类上创建以下方法

```
private void setFormat(String newPhoneNo){
    editField.setText(newPhoneNo+"-");
} 
```

每当您获取文本表单编辑时，删除“-”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:19:18.680

请检查此代码，

```
 public MyScreen()
{        
    setTitle("MyTitle");
    final EditField  ef = new EditField();
    add(ef);
    ef.setChangeListener(new FieldChangeListener() 
    {
        public void fieldChanged(Field field, int context) 
        {

             if (ef.getText().length() == 4 && !ef.getText().endsWith("-"))
             { 
                    ef.setText(""+ef.getText().substring(0,3)+"-"+ef.getText().charAt(3));
            }
             if (ef.getText().length() == 8 && !ef.getText().endsWith("-"))
             { 
                    ef.setText(""+ef.getText().substring(0,7)+"-"+ef.getText().charAt(7));
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T10:47:41.877

首先尝试原生 TextField.PHONENUMBER 约束。

```
public void startApp()
    {
        mDisplay = Display.getDisplay(this);
        mTextField = new TextField("Text Field Label:",null,MAXCHARS,TextField.PHONENUMBER);
        mForm = new Form("MIDlet Developer Guide: Display a text field.");
        mForm.append(mTextField);
        mDisplay.setCurrent(mForm);
    } 
```

# delphi - Indy 和 smtps：无法连接

> ID：11341944
> 
> 赞同：2
> 
> 时间：2012-07-05T09:58:08.867
> 
> 标签：delphi, delphi-xe2, indy, indy10

[我正在尝试使用 Indy 和这篇 Marco Cantù 文章中](http://www.marcocantu.com/tips/oct06_gmail.html)阐述的技术从 smtps（安全 smtp）发送电子邮件。

这就是我正在使用的：

```
object SMTP: TIdSMTP
  IOHandler = IdSSLIOHandlerSocketOpenSSL1
  SASLMechanisms = <>
  UseTLS = utUseExplicitTLS
  Left = 32
  Top = 196
end 
```

和

```
SMTP.Host := 'smtps.pec.aruba.it';;
        SMTP.Port := 465;;
        SMTP.Username := 'myaddress@pec.it';
        SMTP.Password := 'myPassw0rd'; 
        MailMessage.Encoding := meDefault;
        MailMessage.From.Address := 'myaddress@pec.it';

        MailMessage.BccList.EMailAddresses := 'testaddress0@gmail.com';
        MailMessage.Subject := 'Test Mail';
        MailMessage.Body.Text := 'Please ignore this mail, This is a test';

        SMTP.Connect; //failure!!!
        SMTP.Send(MailMessage); 
```

我的程序在 SMTP.Connect 上挂起，但没有任何异常或有用的错误。

如果不是 aboe，我使用 gmail 设置，如[文章中所述，](http://www.marcocantu.com/tips/oct06_gmail.html)所有工作

你能给个建议吗？

我在与 exe 相同的路径中有 Indy 10.5.8 和 ssl dll。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T23:21:43.763

`Connect()`挂起，因为您`Port`使用错误的`UseTLS`属性分配连接到错误。

端口 465 是 SMTP 的隐式 SSL 端口，这意味着客户端必须在连接到服务器后立即加密连接，然后才能进行任何与 SMTP 相关的通信。服务器期望您的客户端发送 SSL 握手，但您的客户端没有这样做，因为您设置了`UseTLS=utUseExplicitTLS`. 这表明`TIdSMTP`在连接到服务器时期望连接最初是未加密的，然后`TIdSMTP`可以向服务器发送显式`STARTTLS`命令以在需要时动态激活 TLS 加密。

因此，`TIdSMTP`它正在等待服务器发送 SMTP 问候语，但它永远不会发送，并且服务器希望您的客户端发送 SSL 握手，而它永远不会发送。直到其中一方断开连接才会发生死锁。

如果连接到端口 465，则必须`UseTLS=utUseImplicitTLS`改为设置。要使用`UseTLS=utUseExplicitTLS`，您需要连接到端口 25 或 587。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:57:41.177

许多邮件服务器延迟接受连接，以防止邮件程序机器人通过尝试发送垃圾邮件来轰炸它们。

您看到的挂起可能只是连接中的长时间延迟，我之前曾在许多不同的服务器上使用过这些组件，并且连接总是会在错误时返回异常。如果是我，我现在会使用诸如[wireshark](http://www.wireshark.org)之​​类的数据包嗅探器来检查发生了什么

# actionscript-3 - 如何在 AS3 (Adobe Air2.5) 中录制音频并将其保存为 mp3 格式？

> ID：11341945
> 
> 赞同：2
> 
> 时间：2012-07-05T09:58:10.213
> 
> 标签：actionscript-3, air, mp3

我正在 Air2.5 中构建一个桌面应用程序，它需要录制和保存音频。在 AS3（特别是 Air 2.5）中，是否可以以**mp3**格式录制和保存音频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:59:18.687

这是将音频转换为 mp3 的库： [https ://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy](https://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy)

记录音频信息在这里： [http ://titansturf.in/2010/02/08/fetching-data-from-the-microhpone-and-recording-sound/](http://titansturf.in/2010/02/08/fetching-data-from-the-microhpone-and-recording-sound/)

这也应该有用： [http ://suzhiyam.wordpress.com/2011/04/14/as3-microphone-record-and-save-as-wave-file/](http://suzhiyam.wordpress.com/2011/04/14/as3-microphone-record-and-save-as-wave-file/)

关于保存阅读： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T23:31:41.077

我使用这个预先构建的 Flash + JavaScript 解决方案。它要花钱，但效果很好。它将记录、编码为 MP3，并通过 PHP 上传： [http ://recorder.denniehoopingarner.com/](http://recorder.denniehoopingarner.com/)

这是一个免费的相关示例，它将使用 Flash 编码为 OGG： http: [//labs.byhook.com/2011/02/22/ogg-vorbis-encoder-decoder-for-flash/](http://labs.byhook.com/2011/02/22/ogg-vorbis-encoder-decoder-for-flash/)

在最近的 SF 黑客马拉松上，我坐在一些 Google 程序员旁边，他们与我分享说 Chrome 将从 2013 年 4 月开始默认打开录音标志，这在技术上使得纯 JS 录音成为可能，但我还没有看到编码的解决方案并上传到服务器呢。祝你好运！

# ios - 用于将应用程序分发到 App Store 的 iOS 公司名称

> ID：11341947
> 
> 赞同：6
> 
> 时间：2012-07-05T09:58:16.563
> 
> 标签：ios, app-store, app-store-connect

我环顾了 SO 和 Google，但找不到明确而具体的答案，也许它应该是显而易见的！

但是，我之前没有向商店提交过应用程序，所以当我通过 iTunes Connect 添加应用程序时，它说的第一件事是

```
Specify the company or developer name to display on the App Store for your apps.
The company name cannot be changed, so be sure to enter the correct name. 
```

现在，设置该公司名称是否适用于我在设置后上传的所有应用程序，还是它会问您这个问题并让您在每次添加新应用程序时设置它？

如果它为所有应用程序设置它，它是否必须与我用来注册我的 iOS 开发者帐户的公司名称相匹配？当我创建帐户时，我将名称命名为 Company Ltd，那么在设置要在 App Store 上显示的公司名称时，我是否必须严格使用 Company Ltd？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:06:40.290

通常，公司名称在设置后将（并且不能）更改（他们可以这样做，但他们要求大量法律文件和东西）。

但是，如果您确实经营一家无关紧要的公司，那么您应该已经知道自己在做什么。但是，您必须小心，就好像您假装是一家公司而您不是（例如，作为个人开发人员），您可能会遇到法律问题，至少可以说会造成一些麻烦（即使您“仅”打算发布免费应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T05:31:07.850

你不能在网上做，你必须要求苹果做，打电话给他们。

要请求将您的个人开发者会员资格迁移到公司开发者会员资格，请首先确保您满足我们的初始迁移要求：

1.  您拥有有效的个人开发者计划会员资格。
2.  贵公司不作为独资企业、DBA、虚构名称、商号或分支机构运营。
3.  您是您公司的创始人或联合创始人。
4.  您有权约束您的公司遵守 Apple 开发者计划协议。
5.  您的公司尚未拥有有效或过期的公司会员资格。
6.  如果您有付费应用程序，则您已同意 iTunes Connect 的合同、税务和银行模块中的最新付费应用程序合同。
7.  您可以获得贵公司的 DUNS 编号：[https](https://developer.apple.com/support/D-U-N-S) ://developer.apple.com/support/DUNS 。

如果您不符合我们的迁移要求，您可以使用单独的 Apple ID 为您的公司注册 Apple Developer Program。

要继续您的迁移请求，请通过电话 ( [https://developer.apple.com/contact/phone](https://developer.apple.com/contact/phone) ) 联系 Apple，或向他们发送包含以下信息的电子邮件：

*   确认您满足上面列出的初始迁移要求。
*   提供您希望将个人会员资格迁移到的公司名称。

审核并接受您的信息后，他们将向您发送一封电子邮件，其中包含完成迁移的说明。在此过程中，您将无法访问证书、标识符和配置文件门户。

如果您需要更新您的个人银行信息，请在开始公司迁移之前执行此操作。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T10:05:05.143

在 iTunes Connect 中，当您添加新应用程序时，它们会指定：

> “[...] 在 App Store 上为您的应用显示的名称* *s* * [...]”

apps 是复数形式，因此这意味着它适用于该帐户的所有应用程序。

# c# - 使用 CXXI 封装 C++ 库

> ID：11341950
> 
> 赞同：5
> 
> 时间：2012-07-05T09:58:30.333
> 
> 标签：c#, c++, interop

我的公司正在研究 CXXI 以创建与 C++ 库的 C# 绑定，这些库将在 Linux Mono 中使用。主要原因是易于使用和看起来简单的绑定代码。CXXI 的主要问题是它没有完成，没有文档，甚至无法在 Ubuntu 12.04 中编译，并且在编译后，提供的测试和示例甚至无法运行......

我知道此时使用 Swig 或手动创建绑定可能比使用 CXXI 更好。我只是想知道是否有人有使用 CXXI 的经验并且可以在我放弃 CXXI 并继续前进之前分享他们的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T11:35:10.077

我已经看到 C# 通过 SWIG 与多个平台（iOS、Android）上的本机库进行通信，恕我直言，我认为这是最简单的路径

# c# - 如何将按钮的 Hold/DoubleTap 事件绑定到 ViewModel 中的属性

> ID：11341951
> 
> 赞同：2
> 
> 时间：2012-07-05T09:58:31.087
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我有一个包含按钮的视图。我想对**Hold**事件执行操作。我怎样才能在 mvvm 中做到这一点？对于**Tap**事件，我可以将其绑定到 Command 属性。是否可以用同样的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:52:06.447

不确定它是否支持该命令，如果不支持，您可以使用 MVVM Light Toolkit（免费和开源）行为：EventToCommand

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:58:22.963

我会选择 Braulio 的回答——我会使用 MVVM Light，但在 Silverlight 3 天里，我使用自定义附加属性来实现这一点。有关自定义附加属性的示例，请参见此处：http: [//umairsaeed.com/2010/04/22/custom-attached-properties-in-silverlight/](http://umairsaeed.com/2010/04/22/custom-attached-properties-in-silverlight/)

您可以为保持事件创建一个自定义附加属性以将命令绑定到，然后像这样使用它：

```
<Border local:MyTextBoxControl.HoldEventCommand="{Binding HoldCommand}"/> 
```

与在项目中包含 mvvm light 工具包然后执行以下操作相比，这是很多工作：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Hold">
        <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding YourCommand}"/>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

# javascript - 如何区分由不同优化器优化的 javascript

> ID：11341954
> 
> 赞同：1
> 
> 时间：2012-07-05T09:58:47.523
> 
> 标签：javascript, requirejs, google-closure-compiler, uglifyjs

我在我的一个项目中使用[RequireJS 优化器](http://requirejs.org/docs/optimization.html)，默认情况下，它使用 UglifyJS。`'anim' is undefined`但是，在 IE 和 Opera 上运行时遇到错误 ( )。切换到闭包编译器而不进行其他配置更改，只需坚持默认设置，问题就消失了。

如何获得这两个工具产生的优化输出的有效差异？

我并不是要比较两者的能力，无论哪种方式我都可以，但这可能有助于指出其中一种或另一种的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:40:35.777

首先，您需要将每个压缩器的输出合并到单行，以防它添加换行符以避免一些晦涩的旧浏览器错误（至少 GCC 会这样做）。然后，您可以使用视觉差异实用程序突出显示两个比较变体之间单行内的变化。至少`meld`并且`winmerge`有这个功能。大多数其他人也应该拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:20:14.097

通过启用漂亮打印的闭包编译器仅空白模式运行两者。这将使区分差异变得更容易。

# javascript - 仅为移动设备加载 JQuery Mobile 脚本

> ID：11341956
> 
> 赞同：12
> 
> 时间：2012-07-05T09:58:48.457
> 
> 标签：javascript, mobile, jquery-mobile

我有一个必须在移动设备上正确显示的网页。为此，我在页面头部加载了 JQuery Mobile 脚本。头部标签如下所示：

```
<head> 
    <title>Page Title</title> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
```

并在页面的 body 元素中使用 data-role 属性来显示事物。这些页面在移动设备上看起来相当不错，但即使请求来自非移动浏览器，它看起来也很相似。

我想知道是否有人知道仅当请求来自移动设备时才加载 JQuery Mobile 脚本的方法。

到目前为止我尝试的是使用一个检测我的用户代理并加载脚本的功能，如果它是移动设备：

```
function init() {

    if(isMobile()) {
        document.write('<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />');
document.write('<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>');
dcument.write('<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>');
    }
}

function isMobile() {

    if(navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i) || navigator.userAgent.match(/IEMobile/i))
            return true;
        return false;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T11:16:55.147

很难检测您的设备是移动设备还是平板电脑还是带有触摸功能的大屏幕，但首先

1.  使用脚本从[http://detectmobilebrowsers.com/检测](http://detectmobilebrowsers.com/)
2.  使用[http://yepnopejs.com/进行测试](http://yepnopejs.com/)

像这样（应该适用于来自[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)的 jQuery 脚本）：

```
yepnope({
  test : jQuery.browser.mobile,
  yep  : 'mobile_specific.js',
  nope : ['normal.js','blah.js']
}); 
```

**编辑：**

另请查看[https://github.com/borismus/device.js](https://github.com/borismus/device.js)，以根据条件加载内容。我不确定它是否允许您加载条件 JS 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T15:37:53.143

如何确定是否使用基于设备宽度的移动布局，例如 Twitter Bootstrap 等 CSS 框架？这样，您可以使用 jQuery mobile 为小型设备设计，而使用 vanilla jQuery 为其他设备设计？我认为使用 yepNope 或类似的测试仍然适用。

# javascript - 英国银行排序代码javascript正则表达式

> ID：11341957
> 
> 赞同：8
> 
> 时间：2012-07-05T09:58:50.027
> 
> 标签：javascript, regex, bank

我正在尝试在 javascript 中为英国银行排序代码创建一个正则表达式，以便用户可以输入 6 位数字或 6 位数字，并在对之间使用连字符。例如“123456”或“12-34-56”。也不是所有的数字都可以是 0。到目前为止，我已经有了`/(?!0{2}(-?0{2}){2})(\d{2}(-\d{2}){2})|(\d{6})/`这个[jsFiddle 来测试。](http://jsfiddle.net/sd88a/1/)

这是我的第一个正则表达式，所以我不确定我做对了。6 0 位数字的测试应该失败，我认为`-?`前瞻中的可选连字符会导致它与 6 0 位带连字符的数字相同，但事实并非如此。如果我做的完全不正确，我会很感激一些帮助和任何批评！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T10:17:32.357

只是为了回答您的问题，您可以通过以下方式验证用户输入：

```
/^(?!(?:0{6}|00-00-00))(?:\d{6}|\d\d-\d\d-\d\d)$/.test(inputString) 
```

它将仅严格匹配表单中的输入`XX-XX-XX`或`XXXXXX`where `X`are numbers，并将***排除*** `00-00-00`以及`000000`任何其他情况（例如`XX-XXXX`或`XXXX-XX`）。

但是，在我看来，正如其他评论中所述，我认为如果你强制用户要么总是输入连字符，要么根本不输入连字符会更好。在处理与金钱有关的任何事情时格外严格可以节省（未知）以后的麻烦。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T10:12:19.737

Since any of the digits can be zero, but not all at once, you should treat the one case where they are all zero as a single, special case.

You are checking for two digits (`\d{2}`), then an optional hyphen (`-?`), then another two digits (`\d{2}`) and another optional hyphen (`-?`), before another two digits (`\d{2}`).

Putting this together gives `\d{2}-?\d{2}-?\d{2}`, but you can simplify this further:

```
(\d{2}-?){2}\d{2} 
```

You then use the following pseudocode to match the format but not `000000` or `00-00-00`:

```
if (string.match("/(\d{2}-?){2}\d{2}/") && !string.match("/(00-?){2}00/"))
     //then it's a valid code, you could also use (0{2}-?){2}0{2} to check zeros 
```

You may wish to add the string anchors `^` (start) and `$` (end) to check the entire string.

# asp.net - 网站的用户界面是如何设计的？

> ID：11341958
> 
> 赞同：1
> 
> 时间：2012-07-05T09:58:53.000
> 
> 标签：asp.net, user-interface

我更像是一个服务器端程序员，所以请耐心等待。网站的用户界面究竟是如何设计的？我的意思是通常使用哪些工具？例如，stackoverflow.com 有很多动态内容。各个区域是如何设计的？我很确定它不在 Visual Studio 中。可能服务器端代码在 asp.net 中，但实际的 UI 呢？（布局、图像、表格、按钮等）

像这样的活动通常的工作流程是什么？说，我有一个纸上的设计。我从那里去哪里？接口设计完成后如何在代码中连线？

您如何处理页面中的某些内容是静态的而某些区域是动态的这一事实？（就像我现在的提问页面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:12:52.843

The paper design is the first correct step.

How to continue:
You can get the 960 grid system from [http://960.gs/](http://960.gs/) and start from this one. Its a nice trick that have ready to use css templates that you can build on them your design.

The image effects:
The shadow and borders and other thinks that you ask is usually make on Photoshop, but now the new browsers support many of them using css. For example: [http://css-tricks.com/snippets/css/css-box-shadow/](http://css-tricks.com/snippets/css/css-box-shadow/)

Software that can help on design:
- [MS Expression](http://www.microsoft.com/expression/)
- [DreamWeaver](http://www.adobe.com/products/dreamweaver.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:18:36.287

正如你所说，它归结为网页的要求。

对于一个专业的（相当大的）网站，涉及到许多团队，例如，创意团队进行文书工作和 UI 元素和控件的设计，图形团队实际设计图像，UI 开发人员负责适当地放置内容和 CSS，架构师负责决定各种项目的性能（并决定控制的静态/动态性质）

通常，设计师使用一些外部工具来设计 HTML 页面以提供模板，并且稍后可以在 Visual Studio 中使用这些工具来制作实际页面。市场上有许多这样的工具，例如[Dreamweaver](http://www.adobe.com/products/dreamweaver.html) 。市场上还有许多免费软件可用于设计客户端和 CSS 丰富的网站。你可以在谷歌上搜索这些。

如果您的网站要求不是非常丰富的客户端，您仍然可以使用 Visual Studio 进行设计或使用新的 Microsoft 产品[Webmatrix](http://www.microsoft.com/web/webmatrix/)，它为您提供用户友好的工具，使网站看起来很棒。

# c# - 如何将 C# 变量的值传递给 javascript？

> ID：11341961
> 
> 赞同：2
> 
> 时间：2012-07-05T09:58:59.590
> 
> 标签：c#, javascript, asp.net

在按钮单击事件中，我正在编写此代码。（后面的代码）。我知道按钮单击事件

```
protected void button_click()
{         
    string s1 = "Computer"; 
    StringBuilder sb = new StringBuilder(); 
    sb.Append(@"<script language='javascript'>"); 
    sb.Append("document.write('<table><tbody>')";); 
   sb.Append("document.write('<tr><td>Information</td></tr>')";); 
    if(s1 == "Computer" ) 
   {
     sb.Append("<tr><td>s1</td></tr>"); 
   }
   sb.Append("document.write('</tbody></table>')";);
   sb.Append(@"</script>"); 

} 
```

它正在工作，但我想要 s1 的值而不是 s1。我知道 javascript 是客户端编程。我在按钮单击事件中编写了这个函数。如何将计算机的 s1 的值传递给表格的单元格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:01:05.813

简单地

```
sb.Append("document.write('<tr><td>" + s1 + "</td></tr>');"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T10:01:00.770

你有没有尝试过

```
 if(s1 == "Computer" )  
   { 
     sb.Append("<tr><td>"+s1+"</td></tr>"); 
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T10:01:04.153

您可以将此行更改为：

`sb.Append("<tr><td>" + s1 + "</td></tr>");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T10:10:35.007

您的代码与您提出的问题有点无关。您的错误已由先前的答案修复。但我会尝试进一步扩大答案。如果您希望将某些值从 C# 传递到 JavaScript，则有不同的方法。

1）您可以在代码隐藏文件中创建一个受保护的方法并从您的 .aspx 文件中调用它，例如

**我的.aspx**

```
<script type="text/javascript">
var x = '<%= GetMyValue() %>';
DoFooWithX(x);
</script> 
```

**我的.aspx.cs**

```
protected string GetMyValue()
{
    return "example";
} 
```

2）如果您希望在页面完成加载后执行一些 JavaScript，您也可以像这样从您的代码隐藏中执行它

**我的.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    string myScript = string.Format("myVar = '{0}';", GetMyVarValue());
    ScriptManager.RegisterStartupScript(this, this.GetType(), "MyVarSetter", myScript, true);
}
private string GetMyVarValue()
{
    return "example";
} 
```

# android - Android Wifi 流量

> ID：11341964
> 
> 赞同：4
> 
> 时间：2012-07-05T09:59:04.447
> 
> 标签：android, wifi, android-wireless

我正在尝试跟踪 wifi 设置代码。我的目的是在将 WIFI 按钮关闭到打开后了解从应用程序到内核层的流程。

当我们进入Android中的设置页面时，切换WLAN（WIFI）按钮，然后您的wifi应该被启用。

1.  我发现这个页面对应`WifiSettings.java`。在此文件中，当您将按钮从 OFF 切换到 ON 时：

    ```
    private void updateWifiState(int state) {

    getActivity().invalidateOptionsMenu();
       switch (state) {
            case WifiManager.WIFI_STATE_ENABLING:
            addMessagePreference(R.string.wifi_starting);
            break;
    }

    mLastInfo = null;
    mLastState = null;
    mScanner.pause();          
    } 
    ```

    将调用此函数。

2.  然后我去检查`WifiManager.java`。我发现：

    ```
    /**  
     * Wi-Fi is currently being enabled. The state will change to  
       {@link#WIFI_STATE_ENABLED}  
     if it finishes successfully.  
     *  
     * @see #WIFI_STATE_CHANGED_ACTION  
     * @see #getWifiState()  
     */  

    public static final int WIFI_STATE_ENABLING = 2; 
    ```

但是，在这之后，我并没有真正理解如何深入挖掘追踪流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:54:46.377

你应该看看`WifiEnabler.java`，因为你提到的代码只是显示了一些字符串。在`WifiEnabler::onCheckChanged()`中，您可以看到它`mWifiManager.setWifiEnabled()`被称为。

之后，您可以查看`WifiManager.java`该目录中的其他相关文件。有一个状态机，您应该跟踪状态转换。

一般安卓都是用`wpa_supplicant`的，跟Linux差不多。配置文件位于`/data/misc/wifi/wpa_supplicant.conf`，由 Android 生成。切换 wifi 开关后，Android 将启动`wpa_supplicant`并与之通信。`wpa_supplicant`负责扫描和连接wifi站。

# junit - 将 Portlet 单元与 JSR 168 规范 Portlet 一起使用

> ID：11341967
> 
> 赞同：1
> 
> 时间：2012-07-05T09:59:16.983
> 
> 标签：junit, websphere, portlet, ibm-rad, jsr168

我们正在转向基于测试的开发方法。我们正在寻找[PortletUnit](http://sourceforge.net/projects/portletunit/)作为我们测试 Portlet 的单元测试辅助工具。

1.  我已将所有 Portlet Unit jar 包含到项目中
2.  创建了一个测试用例并添加了一种测试方法来测试 doView 功能。

虽然我已按照文档中的步骤进行操作，但在以下点出现异常。

```
File webInfDir=new File("C:/Test_168_Portlet/WebContent");
Class portletClass = Test_168_Portlet.class;
PortletRunner runner = null;
runner = PortletRunner.createPortletRunner(portletClass,webInfDir, "Test_168_Portlet"); 
```

异常状态：

> javax.servlet.UnavailableException：一个或多个服务的初始化失败。

# c# - 使用 System.Uri 创建相对路径

> ID：11341968
> 
> 赞同：2
> 
> 时间：2012-07-05T09:59:17.107
> 
> 标签：c#

我正在使用以下代码将绝对文件系统路径转换为相对路径。

```
public static void Main(string[] args)
{
    System.Uri uri1 = new Uri(@"C:\Users\301591\Downloads\My Pics\abcd.jpg", true);
    System.Uri uri2 = new Uri(@"C:\Users\301591\", true);
    Uri relativeUri = uri2.MakeRelativeUri(uri1);
    Console.WriteLine(relativeUri.ToString());
} 
```

我得到的结果是 /Downloads/My Pics/abcd.jpg

但是编译器发出警告，我正在使用的构造函数被标记为已过时。

```
Uri testUri=new Uri("string path","flag to remove escape sequences"); 
```

有没有其他方法可以创建相对路径并在结果中显示转义序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:06:27.583

我找到了解决方案。

这是

```
Console.WriteLine(Uri.UnescapeDataString(relativeUri.ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:10:09.317

根据 MSDN，Uri.MakeRelative 方法已过时：http: [//msdn.microsoft.com/en-us/library/system.uri.makerelative.aspx](http://msdn.microsoft.com/en-us/library/system.uri.makerelative.aspx)

所以 Urii.MakeRelativeUri 不能通过过时警告[http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri](http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri)

所以请继续使用[http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri](http://msdn.microsoft.com/en-us/library/system.uri.makerelativeuri)和 Cosntructor new Uri(@"C:\Users\301591\");

# spotify - SPPlaylistCallbackProxy 播放列表：发送到已释放实例的消息

> ID：11341974
> 
> 赞同：0
> 
> 时间：2012-07-05T09:59:30.390
> 
> 标签：spotify, cocoalibspotify-2.0

我正在将 cocoalibspotify 用于 Spotify iOS 应用程序。

在我的应用程序中，我正在创建一个新的播放列表并向播放列表中添加一些曲目。这样做时，我遇到了崩溃，因为创建的播放列表实例似乎已被释放。

这是代码的样子：

```
[[[SPSession sharedSession] userPlaylists] 
 createPlaylistWithName:playlistName 
 callback:^(SPPlaylist *createdPlaylist) {
     if (createdPlaylist) {
          [SPAsyncLoading waitUntilLoaded:createdPlaylist 
                                     then:^(NSArray *playlists) {
                                        // Load all tracks using the URI's and add them to the playlist
                                        SPPlaylist *playlist = [playlists objectAtIndex:0];
                                        for (NSString *trackUri in trackUris) {
                                            [[SPSession sharedSession] 
                                                trackForURL:[NSURL URLWithString:trackUri] 
                                                callback:^(SPTrack *track) {
                                                if (track != nil) {
                                                    [SPAsyncLoading 
                                                     waitUntilLoaded:track 
                                                     then:^(NSArray *tracks) {
                                                         [playlist addItems:tracks atIndex:0 callback:NULL];
                                                     }];
                                                }
                                            }];
                                        }
                                    }];
    }}]; 
```

这是日志消息：

```
*** -[SPPlaylistCallbackProxy playlist]: message sent to deallocated instance 0x100e0120 
```

我尝试在课堂上保留播放列表，但我仍然遇到同样的问题。我在这里遗漏了一些明显的东西吗？

额外问题：在创建播放列表或加载曲目（即使用`-trackForURL:callback`）之后，我必须使用`SPAsyncLoading`，还是对象总是已经加载？

（注意：我在我的项目中使用 ARC。）

**编辑**：我在仪器中运行 Zombies 以查看发生了什么，并在崩溃时得到以下结果： ![实例的保留/释放历史](../Images/038c9747f02f9342d050e6048187742c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:27:38.703

如果您有一个对象（`SPTrack`等），您可以将其添加到播放列表而无需等待它加载，因为加载只处理元数据。您可能希望等待播放列表加载，以便知道您使用的索引是正确的（尽管在这种情况下`0`将始终有效）。

现在调查你问题的实质。这很可能是 CocoaLibSpotify 中的错误 - 您的代码看起来不错。

# javascript - Javascript 中的动态 CSS 图像 URL

> ID：11341976
> 
> 赞同：0
> 
> 时间：2012-07-05T09:59:41.687
> 
> 标签：javascript, css

我有一个按钮，它可以有一个与之关联的焦点 css 类，我在运行时在 Javascript 中实例化它。
这都是由定制的 Javascript 框架提供的，因此无法更改。

通常我会为这个按钮提供 2 个额外的 CSS 类，例如

```
btn { background-image: url(/btn.png);}
btn.focus { background-image: url(/btn-focus.png);} 
```

这将根据按钮是否“聚焦”给我 2 个不同的图像。

我现在遇到的问题是图像 url 是在运行时动态加载的，并且无法使用静态 CSS 文件指定它们。

我在想一种可能的解决方案是“以某种方式”生成一个新的样式元素，其中包含 btn 和 btn.focus 类（带有动态 URL），并将其附加到头部或在实例化之前将其嵌入到标记中按钮本身。这种解决方案似乎并不理想。任何人都可以提出其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:02:59.510

您是说这不起作用，因为他们的 css 样式“内联”样式覆盖了您的样式？如果是这样，那么改为这样做

```
btn { background-image: url(/btn.png) !important;}
btn.focus { background-image: url(/btn-focus.png) !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:06:28.443

如果您的案例专门针对表示单个对象的不同状态的图像（例如按钮的聚焦或非聚焦状态），那么使用[sprites](http://css-tricks.com/css-sprites/)是一个好主意。那就是创建一个包含所有按钮状态的图像并加载它（如果需要，可以动态加载）。然后你可以在你的 CSS 中编写一个通用规则：

```
btn {background-position: 0 0;}
btn.focus {background-position: 0 -20px;} /* 20px is the height of your button*/ 
```

# database - 单例数据库连接会影响 weblogic 集群环境中的性能吗？

> ID：11341977
> 
> 赞同：0
> 
> 时间：2012-07-05T09:59:47.680
> 
> 标签：database, jakarta-ee, struts, weblogic, cluster-computing

我有一个使用单例数据库连接的 Java EE struts Web 应用程序。以前只有一个weblogic server，现在一个集群有两个weblogic server。

会话复制已经过测试，可以在这个集群中工作。Web 应用程序包含几个链接，这些链接将打开不同的表单供用户填写。每个表单都有一个动态下拉列表，该下拉列表将根据单击的表单填充一些值。这些下拉列表值是从 oracle 数据库中检索的。

一个独特的问题是单击的第一个表单可能需要大约 2-5 秒，而单击的第二个表单可能需要永远加载或超过 5 分钟。我检查了代码，碰巧知道问题出在尝试调用数据库连接的一个实例时。这可能是一个僵局吗？

```
public static synchronized DataSingleton getDataSingleton()
throws ApplicationException {
        if (myDataSingleton == null) {
            myDataSingleton = new DataSingleton();
        }
        return myDataSingleton;
    } 
```

任何解释这种情况的帮助将不胜感激。

谢谢

```
A sample read operation calling Singleton 

String sql = "...";
DataSingleton myDataSingleton = DataSingleton.getDataSingleton();
conn = myDataSingleton.getConnection();

        try {

            PreparedStatement pstmt = conn.prepareStatement(sql);

            try {
                pstmt.setString(1, userId);
                ResultSet rs = pstmt.executeQuery();

                try {
                    while (rs.next()) {
                        String group = rs.getString("mygroup");
                    }

                } catch (SQLException rsEx) {
                    throw rsEx;

                } finally {
                    rs.close();
                }
            } catch (SQLException psEx) {
                throw psEx;

            } finally {
                pstmt.close();
            }
        } catch (SQLException connEx) {
            throw connEx;

        } finally {
            conn.close();
        }

 The Singleton class
 /**
 * Private Constructor looking up for Server's Datasource through JNDI
 */
private DataSingleton() throws ApplicationException {
    try {
        Context ctx = new InitialContext();
        SystemConstant mySystemConstant = SystemConstant
                .getSystemConstant();

        String fullJndiPath = mySystemConstant.getFullJndiPath();
        ds = (DataSource) ctx.lookup(fullJndiPath);

    } catch (NamingException ne) {
        throw new ApplicationException(ne);
    }
}

/**
 * Singleton: To obtain only 1 instance throughout the system
 * 
 * @return DataSingleton
 */
public static synchronized DataSingleton getDataSingleton()
        throws ApplicationException {
    if (myDataSingleton == null) {
        myDataSingleton = new DataSingleton();
    }

    return myDataSingleton;
}

/**
 * Fetching SQL Connection through Datasource
 * 
 */
public Connection getConnection() throws ApplicationException {
    Connection conn = null;
    try {

        if (ds == null) {
        }

        conn = ds.getConnection();

      } catch (SQLException sqlE) {
        throw new ApplicationException(sqlE);
    }
    return conn;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:19:05.387

听起来您可能没有在使用连接结束时提交事务。

DataSingleton 中有什么 - 它是数据库连接吗？允许多个线程访问同一个数据库连接是行不通的，例如当你有多个用户时。为什么不使用数据库连接池，例如 DataSource？

# c# - 查找所有参考列表并将其导出

> ID：11341978
> 
> 赞同：3
> 
> 时间：2012-07-05T09:59:58.317
> 
> 标签：c#, .net, visual-studio, export

我需要获取对特定类（通常是继承）的引用列表并能够管理它，我的意思是，导出或简单地复制所有。

VS Find all References 没有用，因为我无法将列表复制到其他地方。

有人知道这个技巧/工具吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:00:50.497

使用锐器。.Net 好友的最佳工具。我不确定物理文件副本，但您可以生成引用的 dll 列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T07:07:23.743

实际上，您可以从 VS 复制 Find All References 结果。确保 Find All References 窗口具有焦点，执行 Select All (Ctrl-A) 并右键单击，然后从上下文菜单中选择 Copy。你得到一个制表符分隔的列表。它至少在 VS2017 和 VS2019 中有效。

# c++ - 通常有多少个 D3DXEffect？

> ID：11341980
> 
> 赞同：1
> 
> 时间：2012-07-05T10:00:07.983
> 
> 标签：c++, hlsl, directx-9, d3dx

我必须使用几个着色器。在这种情况下，通常首选哪种方式？

1.  制作几个效果
2.  只有一种效果和几种技术
3.  或其他方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:46:54.003

编写针对特定目的、使用类似资源并期望类似输入的效果。不要试图通过将所有内容塞进一个效果来满足您的所有渲染需求。为一般渲染编写一个效果，另一个用于解决所需的样式，如法线贴图或立方体贴图等。如果是应用不同着色算法的问题，我会说编写单独的效果。根据应用程序定制您的效果，并在其中创建技术以解决各种硬件问题或运行时条件。如果您有一个不需要工业强度代码的简单项目，并且效果管理是一个问题，那就别管了。老实说，尽管做最适合项目的事情，但对您的情况最有效的事情。. .

# javascript - 虚拟键盘问题

> ID：11341984
> 
> 赞同：0
> 
> 时间：2012-07-05T10:00:13.773
> 
> 标签：javascript, jquery, html, virtual-keyboard

我有一个用于虚拟键盘的脚本，我在为上标和下标创建键时遇到了一些问题。例如。当我`<'sup'>3<'/sup'>`在我的跨度类中使用它时，它会正确显示，但是当我按下该键时，它也会`<'sup'>3<'/sup'>`在文本框中打印。那么我应该在 jquery 中改变什么？

这是我的工作代码。

**HTML 代码：**

```
 <li class="symbol"><span class="off"><sup>11</sup></span><span class="on"><sup>11</sup></span></li> 
```

**查询代码**

```
// Special characters
    if ($this.hasClass('symbol')) character = $('span:visible', $this).html(); 
```

**完整代码：**

[jsfiddle.net/xMzVY](http://jsfiddle.net/xMzVY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:02:14.473

将您的代码更改为：

```
if ($(this).hasClass('symbol'))
    character = $('span:visible', $(this)).html(); 
```

# iphone - 如何通过 hdmi 电缆将我的 iPhone 应用程序连接到电视

> ID：11341987
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:00:32.053
> 
> 标签：iphone

我有一个要求，我需要通过 HDMI 电缆将我的 iPhone 连接到电视并在电视上播放视频。

如何检测 hdmi 电缆已连接到 iPhone。是否有任何委托方法？

任何人都可以为此提供参考说明......

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:12:28.757

Here a link, in french, but you can go trough the code to understand it.

[http://www.benoit-deldicque.com/blog/utiliser-une-tv-avec-iphone-ipad-hdmi-adapter-et-ios-sdk/](http://www.benoit-deldicque.com/blog/utiliser-une-tv-avec-iphone-ipad-hdmi-adapter-et-ios-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T16:53:25.970

您需要使用适用于您的 iPhone 型号和电视型号的特定电缆才能正常工作。此外，它不是您 iPhone 的精确镜像，它仅使用照片应用程序和视频应用程序。

[http://connect-to-tv.blogspot.com/2014/02/connect-iphone-to-your-tv.html](http://connect-to-tv.blogspot.com/2014/02/connect-iphone-to-your-tv.html)

# html - 在 css 文件中组合 css 类

> ID：11341988
> 
> 赞同：2
> 
> 时间：2012-07-05T10:00:38.867
> 
> 标签：html, css

假设我有以下 css 规则：

```
.blah { Rules } 
```

我就这样使用它

```
<div class="blah"> 
```

现在假设，在我的文档中的某个地方，我需要添加`margin-bottom: 10px`到其中一个类名为 blah 的 div 中，以便我可以使其尽可能具体，

我应该将其声明为

```
.blah.mar-bot-blah { margin-bottom: 10px; }
or 
.blah .mar-bot-blah { margin-bottom: 10px; } 
```

将其用作`<div class="blah mar-bot-blah">`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:02:22.037

将其声明为：

```
.blah.mar-bot-blah { margin-bottom: 10px; } 
```

它将匹配同时具有类`.mar-bot-blah`和`.blah`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:06:42.927

如果你想让它真正具体，我会使用你的第一个解决方案。（警告：IE6 无法处理！）

在大多数情况下，只需使用 .mar-bot-blah { margin-bottom: 10px; 就足够了。} 所以你也可以在其他类中重复使用这个设置。

# ios - 为什么 NSMetadataQueryDidUpdateNotification 被快速连续调用多次？

> ID：11341992
> 
> 赞同：3
> 
> 时间：2012-07-05T10:00:48.230
> 
> 标签：ios, icloud, nsmetadataquery

为了监控我的 iCloud 容器中的文件更改，我注册了

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(processiCloudUpdates:)
                                             name:NSMetadataQueryDidUpdateNotification
                                           object:nil]; 
```

理想情况下，每当我收到已进行更新的消息时，我都想打开我的每个 UIDocs 并检查设置是否已更改。这很好，如果`NSMetadataQueryDidUpdateNotification`只调用一次。然而，它被触发了好几次（我没有忘记`removeObserver`等等并且有几个实例正在运行），因此每次更新通知被触发时加载所有文件非常不切实际（如果我有 5 个文件和这被调用了 4 次，我会快速连续打开 20 个 UIDocs）。例如，如果我更新一个文件（并且在我的无处不在的容器中只有一个文件），就会发生这种情况：

```
2012-07-05 10:51:39.565 Meernotes[7842:707] ... NSMetadataQuery update
2012-07-05 10:51:42.468 Meernotes[7842:707] ... NSMetadataQuery update
2012-07-05 10:51:45.216 Meernotes[7842:707] ... NSMetadataQuery update
2012-07-05 10:51:47.036 Meernotes[7842:707] ... NSMetadataQuery update 
```

有没有其他方法可以确定文件何时更改？NSFileVersion 也没有多大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:10:13.037

`NSMetadataQueryDidUpdateNotification`每次更新任何结果`NSMetadataItem`中的某些属性时都会发出问题。`NSMetadataQuery`它包括部分上传或下载进度。`UIDocument`因此，在此通知处理期间尝试打开实例是错误的。

相反，您可以通过观察 的属性值来确定文档下载的时间`NSMetadataItem`，然后将其排队打开。

不要忘记处理`NSMetadataQueryDidFinishGatheringNotification`。它在接收者完成查询的初始结果收集阶段时发布

# javascript - 关于计算坐标之间的距离

> ID：11341994
> 
> 赞同：1
> 
> 时间：2012-07-05T10:00:52.150
> 
> 标签：javascript, gps, position, distance

我发现了这篇文章： [谷歌地图 - 如何以米为单位获得两点之间的距离？](https://stackoverflow.com/questions/7997627/google-maps-how-to-get-the-distance-between-two-point-in-metre)

我有同样的问题，我的变量“a”具有 NaN 值。如果可以的话，我宁愿不使用 google api。

我正在使用此网页中的代码：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

但我的变量仍然返回 NaN ...

这是我的代码：

```
function actualizaLimpieza(jsonData){ //jsonData keeps all points (lat&lon)
    var latJSON; 
    var lonJSON;
    var R = 6371; // km
    var dLat;
    var dLon;
    var lat1;
    var lat2;

    var a; 
    var c; 
    var d;

    latGPS = 43.466827534582606; //this are supossed to be gotten by gps, but for try...
    lonGPS = -3.863614797592163;

    for(i = 0; i < jsonData.length; i ++){
        latJSON = jsonData[i].lng; 
        lonJSON = jsonData[i].lat;
        dlat = toRad(latJSON-latGPS);
        dlon = toRad(lonJSON-lonGPS); 
        latGPS = toRad(latGPS);
        latJSON = toRad(latJSON);

        a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(latGPS) * Math.cos(latJSON);
        alert("a vale: " + a); //returns NaN
        c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
        alert("c vale: " + c);
        d = R * c;  
        alert("d vale: " + d);
        if(d < 0,010){ 
            alert("less than 10 meters");
        }
    }
}

function toRad(degrees){
    return degrees * Math.PI / 180;
} 
```

我应该做更多的改变来让它工作吗？我应该添加任何脚本吗？我没有为这项工作添加任何人。

好的，我写变量失败了：dlat != dLat ...现在它或多或少地工作了

# asp-classic - 如何在经典asp中设置会话状态？

> ID：11341995
> 
> 赞同：0
> 
> 时间：2012-07-05T10:00:53.753
> 
> 标签：asp-classic

有没有办法在经典 asp 中设置 sessionstate=readonly？

我们要设置 sessionstate 是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:18:15.773

据我所知，在经典的 asp 中没有办法像在 asp.net 中那样将会话状态设置为只读。

[你可以像这里](http://support.microsoft.com/kb/244465/en-us)描述的那样打开或关闭它

另一种方法是不在会话变量中存储会话数据，而是在数据库中。但在经典 asp 中，您必须手动执行此操作....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:15:10.073

没有会话状态是读/写的，但是只是用一个防止篡改的功能来包装它。您甚至可以在会话名称前加上一个“神秘”值，这样篡改变得更加困难。

问题在于，在某个时间点，在代码中的某个位置，您必须编写，否则您根本无法使用它们。

所以寻找解决方案的地方是： - 允许写入的地方 - 不允许写入的地方

这是真正的问题（我认为......）

# asp.net-mvc-3 - MVC3 字符串验证

> ID：11341998
> 
> 赞同：0
> 
> 时间：2012-07-05T10:01:02.833
> 
> 标签：asp.net-mvc-3

基本上我想验证一个文本框是否是一周中的某一天。

是否任何数据注释都涵盖了这一点，或者这是我需要在其他地方的 for 循环下运行的东西。

如果是后者，我是在 model.designer.cs 中还是在控制器中携带它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:17:55.993

您可以使用正则表达式数据注释 + mvc 的内置验证。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx#Y2063](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx#Y2063)