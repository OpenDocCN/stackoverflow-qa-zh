# StackOverflow 问答 11098000-11098999

# java - 使用 Tycho 项目构建 eclipse 功能时偶尔出现错误

> ID：11098001
> 
> 赞同：5
> 
> 时间：2012-06-19T09:19:27.037
> 
> 标签：java, eclipse, maven, osgi, tycho

我有一个基于 OSGi 的应用程序的 Maven/Tycho 构建，它偶尔会因异常而失败。

我有大约 20 个 eclipse 功能，它似乎与实际功能没有任何关系（它可能是每次都失败的不同功能，而且通常构建工作正常）

这不是灾难，但我想在某个时候修复这个问题，而且我真的不知道如何进一步调试这个问题，除非深入研究 Tycho 代码或开始弄乱随机设置。

这是否与任何人敲响警钟？

系统：Fedora Linux JVM：OpenJDK 运行时环境 (IcedTea6 1.11.3) (fedora-67.1.11.3.fc16-x86_64) Maven：3.0.3 Tycho：0.15.0

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.eclipse.tycho:tycho-packaging-plugin:0.15.0:package-feature (default-package-feature) on project com.dexels.navajo.tipi.swing.feature: Execution default-package-feature of goal org.eclipse.tycho:tycho-packaging-plugin:0.15.0:package-feature failed: com.dexels.navajo:com.dexels.navajo.tipi.swing.deps:eclipse-plugin:1.2.1-SNAPSHOT does not provide an artifact with classifier 'null'
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:287)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-package-feature of goal org.eclipse.tycho:tycho-packaging-plugin:0.15.0:package-feature failed: com.dexels.navajo:com.dexels.navajo.tipi.swing.deps:eclipse-plugin:1.2.1-SNAPSHOT does not provide an artifact with classifier 'null'
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 27 more
Caused by: java.lang.IllegalStateException: com.dexels.navajo:com.dexels.navajo.tipi.swing.deps:eclipse-plugin:1.2.1-SNAPSHOT does not provide an artifact with classifier 'null'
at org.eclipse.tycho.packaging.FeatureXmlTransformer$1.visitPlugin(FeatureXmlTransformer.java:62)
at org.eclipse.tycho.core.osgitools.AbstractArtifactDependencyWalker.traversePlugin(AbstractArtifactDependencyWalker.java:215)
at org.eclipse.tycho.core.osgitools.AbstractArtifactDependencyWalker.traverseFeature(AbstractArtifactDependencyWalker.java:86)
at org.eclipse.tycho.core.osgitools.AbstractArtifactDependencyWalker.traverseFeature(AbstractArtifactDependencyWalker.java:63)
at org.eclipse.tycho.packaging.FeatureXmlTransformer.transform(FeatureXmlTransformer.java:47)
at org.eclipse.tycho.packaging.PackageFeatureMojo.expandVersionQualifiers(PackageFeatureMojo.java:300)
at org.eclipse.tycho.packaging.PackageFeatureMojo.execute(PackageFeatureMojo.java:120)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
... 28 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:33:34.897

这可能与

*   项目在本地 Maven 存储库和/或远程 Maven 存储库中的可用性
*   您正在执行的构建阶段。

如果包含的 eclipse-plugin 的版本不在任何 Maven 存储库中，并且您只执行构建到不包括安装的生命周期阶段，您可能能够重现该问题。

如果您设法确定问题，这将为[Tycho 提供一个很好的错误报告](https://bugs.eclipse.org/bugs/query.cgi?format=specific)。

# xcode - xcode 属性列表，获取内部键值

> ID：11098006
> 
> 赞同：0
> 
> 时间：2012-06-19T09:19:35.977
> 
> 标签：xcode, cocoa-touch, nsdictionary, property-list

我是 xCode 的新手，我试图在表格视图中显示我的属性列表中的值，但我只能显示键值。到目前为止，这是我的代码，我应该提示什么来显示这些值？我已经尝试了 10 个示例代码，但仍然没有得到它。感谢任何帮助=）

`familiaEspecie`是一个`NSDictionary`，并且`especie`是一个`NSMutableArray`

```
NSBundle *bundle = [NSBundle mainBundle];
NSURL *plistURL = [bundle URLForResource:@"Animales"
                           withExtension:@"plist"]; 
NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfURL:plistURL];
self.familiaEspecie = dictionary;
especie=[[familiaEspecie allKeys]sortedArrayUsingSelector:@selector(compare:)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:34:56.257

`[familiaEspecie allValues];`应该获取字典中的所有值。

如果要在排序后检索值（基于键的排序方式），您可以迭代并获取每个值，如下所示：

```
for (NSString *key in especie)
{
  id value = [self.familiaEspecie valueForKey:key];
  // Do whatever with 'value'
} 
```

# android - Android Facebook SDK 每次登录时显示授权对话

> ID：11098008
> 
> 赞同：0
> 
> 时间：2012-06-19T09:19:39.843
> 
> 标签：android, facebook, sdk, dialog, authorization

我尝试使用 Facebook Android SDK 登录我的一个应用程序，早些时候，它用于显示权限授权对话，最初和一次仅在运行应用程序时，并授予其 Facebook 应用程序权限。但是自从今天我尝试登录后，在第一次询问我的权限后，当我第二次登录时，它显示 SCREEN 1 即授权请求对话框，说我已经授权了这个应用程序。这个对话从来没有用户更早出现过，我没有对可能启动这件事的代码做任何更改。

请参阅随附的屏幕截图 ![在此处输入图像描述](../Images/9f2a3ec21c275d346661e7efc7636f4c.png)

# twitter-bootstrap - Twitter Boostrap 中的语法错误更少 - mixins.less

> ID：11098009
> 
> 赞同：0
> 
> 时间：2012-06-19T09:19:47.740
> 
> 标签：twitter-bootstrap, less

我在下面的部分中遇到语法错误，我不确定语法上的问题是什么：

```
.spanX (@index) when (@index > 0) {
    (~".span@{index}") { .span(@index); }
    .spanX(@index - 1);
}
.spanX (0) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T13:25:42.530

更新到盒式磁带 v 2（测试版）并且一切正常

# batch-file - 批处理文件以重命名文件夹中的文件并再次命名

> ID：11098010
> 
> 赞同：2
> 
> 时间：2012-06-19T09:19:55.007
> 
> 标签：batch-file, batch-processing

恐怕是一个有点过时的问题，但这里有：

我有一个程序可以按顺序生成一些 .RAW 文件，例如。

Example_1.RAW
Example_2.RAW

然后，这会根据需要向该数字添加额外的有效数字，例如。

Example_10.RAW
Example_200.RAW

我需要将这些文件名转换为数字，以便通过批处理器运行，然后生成更多文件作为输出。我编写了一个批处理文件，用于重命名并将新旧文件名存储在一个文本文件中，我的代码是：

```
@echo off
set i=1
echo Running Batch Rename
for %%f in (*.RAW) do (set file=%%f) & CALL :rename

:rename
echo %i% >>Names.txt
echo %file% >>Names.txt
echo. >>Names.txt
ren %file% %i%.RAW
set /A i+=1 
```

然后，这会将我所有的 .RAW 重命名为 1.RAW、2.RAW 等，并使用新旧文件名创建 Names.txt。由于 DOS 处理数字的方式，这确实意味着我得到了一个稍微不稳定的编号过程，即它将把 Ex_1、Ex_10、Ex_100、Ex_101 处理为 1、2、3、4，这将导致在后期处理中做更多的工作这些结果，以便在正确的位置获得正确的结果。

是否可以编写另一个批处理文件来获取 Names.txt 并反转输出文件的过程？所以它会占用一个文件夹，其中包含 1.raw、1.something、1.something else，请参阅 Names.txt 并将它们重命名为 Example_1.raw 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:51:07.540

这应该做的工作

```
@echo off
set cnt=0
del Names.txt > nul 2>&1
echo Running Batch Rename
for %%f in (*.RAW) do (
    set "file=%%f"
    CALL :renameToNumber
)
echo .. Do the jobs ...
rem ** As sample: copy the file
copy *.raw *.some
call :renameBack
exit /b

:renameToNumber
set /A cnt+=1
set "number=00000%cnt%"
set "number=%number:~-4%"
(echo %number% %file%) >> Names.txt
ren "%file%" %number%.RAW
exit /b

:renameBack
for /F "tokens=1,*" %%A in (names.txt) DO (
   set "number=%%A"
   set "filename=%%~nB"
   call ren %%number%%.* "%%filename%%_%%number%%.*"
   call echo ren %%number%%.* "%%filename%%_%%number%%.*"
)
exit /b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:14:34.903

通过测试目录中的最后一个文件（使用“if errorlevel”），我能够调整上面的代码，使其在现有批处理例程中运行 - 以便在到达最后一个文件后例程不会退出，而是返回到我的日常。

```
 ::  *** Renumber .JPG files ***

    setlocal EnableDelayedExpansion
    set dir=C:%homepath%\Desktop\Temp

    :: Create variable and set to zero
    set cnt=0

    :: For each file in specified class
    for %%f in (%dir%\*.jpg) do (
        :: Get name of file 
        set "file=%%f"
        :: Run specified Subroutine
        CALL :renameToNumber
    )

    :renameToNumber
    :: Increment variable by 1
    set /A cnt+=1
    :: Preceed value of variable with 00000
    set "number=00000%cnt%"
    :: Delete all but final 2 digits
    set "number=%number:~-2%"
    :: Store new and original name of file
    (echo %number% %file%) >> Names.txt
    :: Rename file
    ren "%file%" %number%.jpg
    :: Quit Subroutine if no further files
    if errorlevel==1 goto :Continue
    :: Loop back to start of Subroutine
    exit /b

    :Continue

::  *** Zip the image files into an RAR file ***
    SET rar=C:\Program Files (x86)\WinRAR\RAR.exe
    "%rar%" a -ep -m0 temp.rar "%dir%\*.*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:21:50.657

您可以准备两个批处理文件，一个用于将 RAW 文件重命名为 1.RAW、2.RAW 等，另一个用于将这个过程反向。

重命名脚本将RAW文件的原始名称存储在相应的txt文件中：

```
@echo OFF
@setlocal ENABLEDELAYEDEXPANSION

set I=1

for %%G in (*.RAW) do (
    set ORIGINAL_NAME=%%~nG
    ( 
        REM Try to rename file
        ren "%%G" "!I!.RAW"
    ) && (
        REM Renaming was successful
        > "!I!.txt" echo !ORIGINAL_NAME!
        set /A I+=1
    ) || (
        REM Renaming was a failure
        echo Cannot rename [!ORIGINAL_NAME!.RAW] file.
    )
)

@endlocal 
```

RenameBack 脚本使用该信息来恢复所有相应文件的名称：

```
@echo OFF
@setlocal ENABLEDELAYEDEXPANSION

for %%F in (*.txt) do (
    set BASENAME=%%~nF
    REM Read original name from txt file
    for /F %%G in (%%F) do (
        REM iterate over all corresponding files
        for %%H in (!BASENAME!.*) do (
            set EXTENSION=%%~xH
            REM Remove dot from extension string
            set EXTENSION=!EXTENSION:~1!
            if not "!EXTENSION!" == "txt" (
                REM Process files
                (
                    REM try to rename corresponding file to old name
                    ren "!BASENAME!.!EXTENSION!" "%%G.!EXTENSION!"
                ) && (
                    REM Operation was successful - remove TXT file
                    del /F /Q "%%F"
                ) || (
                    REM Something went wrong
                    echo Cannot restore old name for file [!BASENAME!.!EXTENSION!].
                )
            )
        )
    )
)

@endlocal 
```

# javascript - 在单页 JS 应用程序上的页面锚点和路由中

> ID：11098012
> 
> 赞同：1
> 
> 时间：2012-06-19T09:20:04.353
> 
> 标签：javascript, web-applications, javascript-framework

我有一个用 JS 编写的单页应用程序。有一个函数绑定到哈希更改事件（[jquery-hashchange-plugin](https://github.com/cowboy/jquery-hashchange)）。

在哈希更改事件中，我调用匹配路由的已定义控制器 init 方法。问题是有时我将散列用于页内锚点，并且我不希望再次调用控制器的 init 方法。

例如，路线 /#info 具有以下页内锚点：/#info/about 和 /#info/contact。

我能想到的解决此问题的唯一方法是在每次哈希更改时设置最后一个哈希（或路由），并在路由相同时检查路由更改。

还有其他方法吗？

# java - 春天 标签和css类

> ID：11098013
> 
> 赞同：10
> 
> 时间：2012-06-19T09:20:09.203
> 
> 标签：java, jsp, spring-mvc

我有问题：

```
<form:checkboxes path="roles" cssClass="checkbox" items="${roleSelections}" /> 
```

如果在 jsp 中使用了上一行，则生成的 html 如下所示：

```
<span><input id="roles1" name="roles" class="checkbox" type="checkbox" value="ROLE_NEWUSER"/><label for="roles1">ROLE_NEWUSER</label></span>
<span><input id="roles2" name="roles" class="checkbox" type="checkbox" value="ROLE_USER" checked="checked"/><label for="roles2">ROLE_USER</label></span>
<span><input id="roles3" name="roles" class="checkbox" type="checkbox" value="ROLE_EDITOR"/><label for="roles3">ROLE_EDITOR</label></span>
<span><input id="roles4" name="roles" class="checkbox" type="checkbox" value="ROLE_ADMINISTRATOR"/><label for="roles4">ROLE_ADMINISTRATOR</label></span> 
```

请注意，css 类已添加到输入标签中。而是将 css 类添加到输入标签中，我需要将此类添加到 span 标签中。`< c:forEach >`除了使用标签之外，我的问题有什么解决方案吗

提前致谢。抱歉，如果问题重复。如果是这样，请指出我原来的问题。

干杯，蒂霍米尔

PS：

我正在使用弹簧 3.1.0.RELEASE。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T11:23:44.523

您需要做的就是指定“元素”属性：

```
<form:checkboxes path="roles" element="span class='checkbox'" items="${roleSelections}" /> 
```

这会将每个“输入”标签和“标签”标签包含在“复选框”类的跨度中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T10:09:15.237

你可以试试这个：

```
<c:forEach var="item" items="${roleSelections}">
    <span class="checkbox"><form:checkbox path="roles" value="${item}"></span>
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:41:25.843

如果没有 forEach 循环，您可以尝试以下代码

例如定义css

```
<style type="text/css">
            div {
                padding-left: 10px;
                background-color: #00ae42;
            }
        </style> 
```

然后在您的代码中删除复选框的“cssClass”属性使用“元素”属性。对于这个元素属性，您已经在上面指定了 css。前任。

```
<form:checkboxes path="roles" element="div" items="${roleSelections}" /> 
```

请参阅下面的 Spring MVC 复选框属性链接 [http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.checkboxes](http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.checkboxes)

# java - 取消对话框时关闭整个应用程序

> ID：11098019
> 
> 赞同：4
> 
> 时间：2012-06-19T09:20:23.633
> 
> 标签：java, swing, jframe, jdialog, java-6

我有一个 JFrame，它在实例化时调用自定义 JDialog(Login)。如果登录成功，我希望该 jFrame 可见。如果用户在该登录对话框上按下退出/取消，则应该关闭整个应用程序。

我怎么能这样...

目前，如果我处理对话框，jFrame 会变得可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:22:24.867

`JFrame`假设您可以通过`frame`变量访问您的，您可以简单地调用：

```
frame.dispatchEvent(new WindowEvent(frame, WindowEvent.WINDOW_CLOSING)); 
```

它可能比调用 a 更好，`System.exit()`因为如果您已向框架注册了窗口关闭侦听器，它将使您能够运行一些清理代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:25:55.100

您可以覆盖对话框关闭事件：

```
dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);

dialog.addWindowListener(new WindowAdapter() {

  public void windowClosing(WindowEvent we) {  
    //Release you source, close all your frames or call a brutal System.exit(0);
  }
}); 
```

# multithreading - 最大并发线程数小于 max-thread-pool-size

> ID：11098020
> 
> 赞同：3
> 
> 时间：2012-06-19T09:20:26.987
> 
> 标签：multithreading, glassfish, grizzly

我不明白 glassfish v3.1.2 的行为。

我使用这样的 glassfish 线程池参数运行我的 java web 应用程序：

*   类名：com.sun.grizzly.http.StatsThreadPool
*   最大队列大小：4096
*   最大线程池大小：10
*   最小线程池大小：10
*   空闲线程
*   超时：900

然后我向我的 servlet 发送许多请求。我的servlet的逻辑是这样的：

```
//do some action
Thread.currentThread().sleep(5000); 
```

Netbeans 探查器在线程窗口中显示这些结果：http: [//s8.postimage.org/5hupqk4ad/profiler.png](http://s8.postimage.org/5hupqk4ad/profiler.png)

似乎创建了所有 10 个线程，但只有 5 个可以同时运行。当然我想同时使用最大线程数。

有人可以解释这种行为并建议如何解决它。

如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:08:51.323

尝试检查您的客户端，可能您那里有限制。

# c# - 识别 UI 挂起问题

> ID：11098024
> 
> 赞同：0
> 
> 时间：2012-06-19T09:20:42.090
> 
> 标签：c#, asp.net, wpf, visual-studio-2010

是否有任何工具可以让您查看代码的当前执行情况？我需要这个，因为我的 WPF 应用程序的 UI 在没有任何通知/异常的情况下挂起。我无法调试问题。系统保持空闲，每次我必须明确终止进程。有什么建议么。仅供参考.. 正在使用许多第三方工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:35:00.183

我不确定您已经测试过什么，也许我的回答无效但是：

您是否尝试过在 Visual Studio 中使用暂停功能。它暂停应用程序的所有线程，您可以查看每个线程暂停的位置。您还可以逐步检查每个线程以查找可能的问题。

我过去遇到的一些问题：

*   从 UI 线程立即执行的操作过多
    *   使用`BackgroundWorker`
*   不正确的锁定模型导致 UI 线程无法收集它想要的信息
    *   确保 ViewModel 中的数据在没有锁定属性的情况下不能被后台线程更改。

阅读有关 WPF 和多线程的一些有趣链接：

*   [WPF 基础 - 线程模型](http://msdn.microsoft.com/en-us/library/ms741870.aspx)
*   [调试锁和死锁](http://www.microframework.nl/2009/02/23/debugging-locks-and-deadlocks/)

希望这对您有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:42:20.497

您可以使用 windbg 全面调查流程的所有方面。虽然涉及到学习曲线，但在我看来，熟悉这个工具对开发人员来说至关重要。要开始通过任务管理器获取正在运行的进程的完整内存转储并下载和安装[Windows 调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)。完成此操作后，请查看一些教程，如果您回复评论，我会尽力提供帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:33:00.770

如果您正在使用主线程执行内存/CPU 消耗任务，即使没有任何异常，UI 也会变为空闲状态。要解决此问题，请使用 BackgroudWorker/单独的线程来执行耗时的操作。这样 UI 就不会冻结。

# plone - 将原型内容转换为文件夹

> ID：11098033
> 
> 赞同：4
> 
> 时间：2012-06-19T09:21:15.753
> 
> 标签：plone

我有一个以前不是文件夹的原型内容类型。现在我已将其设置为文件夹。需要更改哪些属性或属性才能迁移之前创建的任何数据？

我已阅读以下文件：

[通用设置升级步骤](http://collective-docs.readthedocs.org/en/latest/components/genericsetup.html#upgrade-steps)

[将一种内容类型转换为另一种](http://collective-docs.readthedocs.org/en/latest/content/archetypes/converting-content-types.html)

我按照上述关于升级步骤的教程进行操作，但我不知道要更改哪些属性或属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:24:52.183

您可以使用[Products.contentmigration](http://pypi.python.org/pypi/Products.contentmigration/)。查看它的文档以了解如何使用它，它应该不会太难：只需定义您的`CustomQueryWalker`和您的两种内容类型之间的映射。为了找出您必须映射的字段，只需`pdb`在内容视图中的某个位置放置一个并检查内容架构。

类似的问题：[从（现已过时的）自定义 ATImage 内容类型迁移](https://stackoverflow.com/questions/7255932/migrating-from-now-obsolete-custom-atimage-content-type)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T22:33:19.010

[我在尝试将非文件夹类型迁移到文件夹类型时偶然发现了同样的问题： http](http://pypi.python.org/pypi/collective.folderishtypes) ://pypi.python.org/pypi/collective.folderishtypes

这有帮助：在要转换的上下文中，调用 @@migrate-btrees 视图 [1] 来初始化 btree 结构 [2]。我假设您的新 Archetype 内容是基于 plone.app.folder 的。

[1] 定义在：plone.app.folder.migration.BTreeMigrationView。

[2] 主要工作由：Products.BtreeFolder2.BTreeFolder2Base._initBtrees 完成。

# android - phonegap 输入焦点

> ID：11098039
> 
> 赞同：1
> 
> 时间：2012-06-19T09:21:37.710
> 
> 标签：android, jquery, html, css

我想在 android 上为我的 Phonegap 应用程序创建一个表单。当输入字段被填充时，焦点必须移动到下一个输入字段。

很好，但是当我在下一个输入字段中输入内容时，该值会附加到上一个输入字段。我必须用手指触​​摸输入才能更改它。

在我的浏览器和安卓模拟器中，它运行良好，但在我手机上的应用程序上却不行。

还有另一种方法可以做到这一点吗？

# android - 无法为 Android 实施 EDSDk 以进行佳能相机集成？

> ID：11098041
> 
> 赞同：0
> 
> 时间：2012-06-19T09:21:47.817
> 
> 标签：android, edsdk

我正在制作一个应用程序，我需要通过 Android 设备集成佳能相机，因为我从为 windows 提供的佳能获得了 sdk。其中有 3 个头文件和 EDSDK.lib 和一些 Dll 文件。我正在使用 android NDK 将 c 文件集成到 android 应用程序中。请帮忙..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:06:08.477

您真的无法使用适用于 Android 的 Windows SDK。

您要么必须找到一个 Android SDK，自己构建它[假设 SDK 的源代码可用]，要么对协议进行逆向工程。

# windows - 无法在 Windows 上为 SQLite 3 安装节点模块

> ID：11098043
> 
> 赞同：0
> 
> 时间：2012-06-19T09:21:49.483
> 
> 标签：windows, sqlite, node.js

有人知道为 SQLite3 安装节点模块所需的步骤吗？

看不到任何清楚说明步骤的帖子/线程。

我还需要在不安装 Visual Studio 等的情况下执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:06:43.980

和旧帖子，但仍然相关。sqlite3 模块依赖于 node-gyp 模块，在 windows 上安装起来很麻烦。它的自述文件最近得到了更新，以解释完成这项工作所需的步骤，请参阅[https://github.com/TooTallNate/node-gyp/blob/master/README.md](https://github.com/TooTallNate/node-gyp/blob/master/README.md)

# c# - c#使用文件名将数据库值与目录中的现有文件匹配

> ID：11098047
> 
> 赞同：0
> 
> 时间：2012-06-19T09:22:01.043
> 
> 标签：c#, .net-2.0

我正在用 c# 编写一个控制台应用程序来检查 sql server 表中的文件 'id' 是否与本地目录中文件的文件名匹配...我知道如何使用文件名来检查位置（所有这些都是检查文件是否存在于本地目录中)...

例如，如果 sql 表中有一个值为 '925677bb-cabb-4ff1-8c90-3e130a77b366'...存在，即'925677bb-cabb-4ff1-8c90-3e130a77b366.jpg'

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:24:26.597

像这样使用[Directory.GetFiles()](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)

```
string []files = Directory.GetFiles(@"C:\", "925677bb-cabb-4ff1-8c90-3e130a77b366*.jpg") 
```

这样，您将在 C:\ 目录中获取所有以指定字符串**开头的文件**

因此，如果数组`files` 为空，则没有类似的文件，否则至少有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:25:04.367

您可以使用以下[`File.Exists`](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)功能：

```
string id = ... go and fetch from your db
string filename = Path.ChangeExtension(Path.Combine(@"c:\somefolder", id), ".jpg");
if (File.Exists(filename))
{
    // the file c:\somefolder\925677bb-cabb-4ff1-8c90-3e130a77b366.jpg exists
} 
```

# git - 如何在不检查的情况下浏览不同的 git 分支

> ID：11098052
> 
> 赞同：2
> 
> 时间：2012-06-19T09:22:17.533
> 
> 标签：git, merge, branch, branching-and-merging, git-merge

我刚刚在 git 中合并了两个分支。现在我正在 Eclipse（在 Windows 上）检查我的（损坏的）代码。我希望能够浏览源分支的 HEAD 而无需检查它。我知道我可以使用[git-show](http://www.kernel.org/pub/software/scm/git/docs/git-show.html)在另一个分支中查看单个文件，但理想情况下，我希望能够（在本地）查看源分支的目录树，并轻松地从一个文件跳转到另一个文件。我已经安装了[git-extensions](http://code.google.com/p/gitextensions/)，以防万一我错过了使用它的方法。

如果没有办法在本地执行此操作，我假设我必须浏览（远程）存储库，但我宁愿在本地执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:52:06.427

如果您使用的是**Git-Gui**，您可以浏览不同分支中的文件而无需检出它们。在 Git-Gui 中，转到**Repository**菜单，然后单击**Browse Branch Files**，选择任何分支，单击**Browse**按钮​​。它会打开一个新窗口，您可以在其中浏览所选分支的完整目录树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:34:31.403

你可以使用 git-daemon 和 web 界面？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:37:06.243

您已经拥有 Git Extensions，它提供了一种浏览文件树的方法。单击任何提交，底部有显示提交、文件树和差异的选项卡。只需单击“文件树”即可浏览文件的内容，因为它们会在提交时出现。

# android - 在 Android 中运行较长时间（+30 分钟）的线程是不是很糟糕？

> ID：11098056
> 
> 赞同：0
> 
> 时间：2012-06-19T09:22:24.350
> 
> 标签：android

我正在从一个服务中运行一个线程，在该服务中，我每 3 秒监听一次加速度计中的转换器。所以我用 Thread.sleep(3000) 在 while 循环中运行监听器。但它往往以较短的持续时间工作。但从长远来看，它似乎会使整个应用程序崩溃。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:24:46.173

您应该考虑改用 IntentService，它与服务相同，只是它将在主 UI 线程之外运行。否则不应该有我知道的问题。服务应该是长期运行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:27:26.187

您应该使用警报进行时间跟踪和广播接收器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:01:30.643

我使用`AsyncTask`了，并且修复了线程崩溃的问题。

# regex - 相当简单的正则表达式没有找到任何结果

> ID：11098058
> 
> 赞同：1
> 
> 时间：2012-06-19T09:22:31.963
> 
> 标签：regex

我正在尝试构建一个可以提取结构名称的正则表达式，尽管我没有找到任何东西。我正在执行的步骤是：

1.  查找字符串“公共结构”。
2.  找到所有字符 AZ az 一次或多次并将它们分组。
3.  然后查找换行符、回车符或任何其他字符一次或多次（我认为这将解释左大括号和任何空格的可能性）。
4.  最后找一个}

/

```
public struct ABC{
    int a;
    int b;
}

public struct DEF {
    ulong d;
    string e;
}

Regex:
    public struct ([A-Za-z]+)[{|\r|\n|.]+}

Should give:
    ABC
    DEF 
```

为什么正则表达式没有找到任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:26:05.813

因为身体包含的东西比可以匹配的要多`[{|\r|\n|.]+`。

如果您只想要名称，您可以使用：

```
public struct (\w+)\s*{ 
```

`[{|\r|\n|.]+`与`[{\r\n.|]+`（括号是字符类，而不是组）相同，您可能的意思是`[^}]+`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:26:23.410

要仅提取**“ABC”**部分，您需要在正则表达式中进行积极的前瞻。一个简单的解决方案是：

```
(?<=(public struct ))[\w]+ 
```

因此，对于您给定的示例，它将仅提取：

*   美国广播公司
*   国防军

编辑：这是工作示例的链接：

[http://gskinner.com/RegExr/?319vk](http://gskinner.com/RegExr/?319vk)

# delphi - 为什么我的单选组中的按钮都表现得像在一个组中一样？

> ID：11098061
> 
> 赞同：1
> 
> 时间：2012-06-19T09:22:43.433
> 
> 标签：delphi, radio-button

在 Delphi 2010 中，我将 2 个单选组放在一个表单上，然后向每个组添加 2 个按钮。所以总共有4个按钮。

问题是按钮的`Checked`属性表现得好像所有 4 个按钮都在同一个单选组中。即，在任何时候都只能检查 4 个按钮中的 1 个。在设计和运行时都是如此。

```
 object RadioGroup1: TRadioGroup
    Left = 14
    Top = 314
    Width = 177
    Height = 35
    Caption = 'Series 2 Axis'
    TabOrder = 14
  end
  object RButtonLeftAxis: TRadioButton
    Left = 91
    Top = 326
    Width = 41
    Height = 17
    Caption = 'Left'
    TabOrder = 12
    OnClick = RButtonLeftAxisClick
  end
  object RButtonRightAxis: TRadioButton
    Left = 138
    Top = 326
    Width = 45
    Height = 17
    Caption = 'Right'
    Checked = True
    TabOrder = 13
    TabStop = True
    OnClick = RButtonRightAxisClick
  end 
```

等等等等更多的对象

```
 object RadioGroup2: TRadioGroup
    Left = 8
    Top = 146
    Width = 113
    Height = 69
    Caption = 'Output Type'
    TabOrder = 33
  end
  object RadBtnkWh: TRadioButton
    Left = 20
    Top = 165
    Width = 65
    Height = 17
    Caption = 'kWh'
    TabOrder = 34
    OnClick = RadBtnkWhClick
  end
  object RadBtnLossFact: TRadioButton
    Left = 20
    Top = 188
    Width = 81
    Height = 17
    Caption = 'Loss Factors'
    TabOrder = 35
    OnClick = RadBtnLossFactClick
  end 
```

如何取消这两个组的链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:50:07.190

您似乎已手动将单选按钮添加到 TRAdioGroup。不要那样做。只需单击单选组的属性项并在其中写入字符串（各种单选按钮的名称）。你准备好一个广播组！

![在此处输入图像描述](../Images/7e890d56321a6c0419939b7b5649fa11.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:31:20.693

你在某个地方被越过了

[`Items`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TRadioGroup.Items)您可以通过设置属性将按钮添加到单选组。

您有两个 TRadioGroups 和四个单选按钮，它们都有相同的父级，因此它们在一个组中。

所以摆脱按钮并正确使用无线电组。

或者摆脱无线电组并将它们放入另一个容器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:15:21.510

您的`TRadioButton`控件就像它们在一个组中一样，因为它们**在**一个组中，因为它们具有相同的`Parent`- 这是`TRadioGroup.Parent`，而**不是**`TRadioGroup`控件本身。您实际上根本没有将按钮**放在**组中。您展示的 DFM 证明了这一点。您所做的只是将按钮放在组的**顶部**而不是**组**内。

该`TRadioGroup.ControlStyle`属性没有`csAcceptsControls`启用标志，因此您不能在设计时将`TRadioButton`控件拖放到 a上。`TRadioGroup`这就是为什么`TRadioGroup`不是成为按钮的`Parent`，而是`TRadioGroup.Parent`成为按钮的`Parent`。要将按钮放在**INSIDE**内`TRadioGroup`，您需要改用该`TRadioGroup.Items`属性。但是，这并不能让您对按钮的位置进行任何控制。如果需要，您必须使用另一个容器，例如`TPanel`or `TGroupBox`，您可以将`TRadioButton`控件拖放到该容器上。

# javascript - 如何构建适用于触摸屏的 Web 应用程序？

> ID：11098063
> 
> 赞同：2
> 
> 时间：2012-06-19T09:22:45.850
> 
> 标签：javascript, mobile, jquery-mobile, web, touch

开源世界为移动/ipad 触摸屏构建基于 Web 的应用程序提供了哪些可能的支持？

我正在浏览[http://jquerymobile.com/](http://jquerymobile.com/) .. 为移动/ipad 触摸屏开发基于 Web 的应用程序是不是很好的插件？有人用过吗。。定制方便吗？

使用它面临的主要挑战是什么？

任何其他适合我的开发工作的好工具/插件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:44:09.487

PhoneGap 是一个将您的 HTML5 应用程序包装在 WebView 中的框架，因此您可以像本地应用程序一样部署它。PhoneGap 支持 iOS、Android、Windows Phone、Bada、Symbian、Blackberry 和 WebOS。

[PhoneGap 入门](http://docs.phonegap.com/en/1.8.1/guide_getting-started_index.md.html)

jQuery Mobile 是一个用于移动触摸设备应用程序 UI 设计的 Javascript 框架。

[jQuery Mobile 入门](http://jquerymobile.com/demos/1.1.0/docs/about/getting-started.html)

对于简单的应用程序来说，它非常好用且易于使用。jQuery Mobile 也是可主题化的，您可以使用自己的 CSS 对其进行自定义。

如果您想将您的 Web 应用程序部署为应用商店中的本地应用程序，PhoneGap 是您的最佳选择，但您也可以使用 jQuery Mobile UI 在 Web 服务器上部署您的 Web 应用程序，如果您希望它可以在线访问。

[jQuery 移动文档](http://jquerymobile.com/test/docs/pages/phonegap.html)：

> PhoneGap 是一个 HTML5 应用程序平台，允许开发人员使用 Web 技术编写本机应用程序并访问 API 和应用程序商店。应用程序构建为普通的 HTML 页面，并打包为在 UIWebView 或 WebView（无铬浏览器，以下称为 webview）中作为本机应用程序运行。

[PhoneGap 维基](http://wiki.phonegap.com/w/page/36868306/UI%20Development%20using%20jQueryMobile)：

> **jQuery Mobile：针对智能手机和平板电脑的触控优化 Web 框架**
> 
> 一个跨所有流行移动设备平台的统一用户界面系统，建立在坚如磐石的 jQuery 和 jQuery UI 基础之上。其轻量级代码采用渐进增强构建，并具有灵活、易于主题化的设计。
> 
> **认真跨平台和跨设备**
> 
> jQuery 移动框架将“少写，多做”的口号提升到一个新的水平：jQuery 移动框架将允许您设计一个可以运行的高度品牌化和定制的 Web 应用程序，而不是为每个移动设备或操作系统编写独特的应用程序在所有流行的智能手机和平板电脑平台上。设备支持网格
> 
> **触控优化布局和 UI 小部件**
> 
> 我们的目标是提供工具来构建能够优雅地适应各种设备外形的动态触摸界面。该系统将包括布局（列表、详细信息窗格、覆盖）和一组丰富的表单控件和 UI 小部件（切换、滑块、选项卡）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:26:31.477

[Phonegap](http://phonegap.com/)是另一种选择。适用于多个平台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T09:50:08.837

我们使用 jQueryMobile 和 Sencha touch 来开发用于触摸屏的 Web 应用程序。

Sencha Touch 是领先的基于 MVC 的 JavaScript 框架，用于构建跨平台移动 Web 应用程序。Sencha Touch 利用硬件加速技术为移动设备提供高性能 UI 组件。新开发人员将欣赏 Sencha Architect 的可用性，这是一种 GUI 工具，可帮助创建像拖放一样简单的界面。

# php - 按域划分的唯一电子邮件地址

> ID：11098068
> 
> 赞同：0
> 
> 时间：2012-06-19T09:22:54.180
> 
> 标签：php

我试图使以下函数仅返回每个域 1 封电子邮件。

示例：如果我提供函数：

> email1@domain.com email2@domain.com email1@domain.com email1@domain.com email3@test.co.uk

我希望它返回

> email1@domain.com email3@test.co.uk

这是当前功能：

```
function remove_duplicates($str) {

  # match all email addresses using a regular expression and store them
  # in an array called $results
  preg_match_all("([\w-]+(?:\.[\w-]+)*@(?:[\w-]+\.)+[a-zA-Z]{2,7})",$str,$results);

  # sort the results alphabetically
  sort($results[0]);

  # remove duplicate results by comparing it to the previous value
  $prev="";
  while(list($key,$val)=each($results[0])) {
    if($val==$prev) unset($results[0][$key]);
    else $prev=$val;
  }

  # process the array and return the remaining email addresses
  $str = "";
  foreach ($results[0] as $value) {
     $str .= "<br />".$value;
  }

  return $str;
}; 
```

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:28:29.967

这些方面的东西：

```
$emails = array('email1@domain.com', 'email2@domain.com', 'email1@domain.com', 'email1@domain.com', 'email3@test.co.uk');

$grouped = array();
foreach ($emails as $email) {
    preg_match('/(?<=@)[^@]+$/', $email, $match);
    $grouped[$match[0]] = $email;
}

var_dump($grouped); 
```

这会保留域的*最后一次*出现，如果需要，不难修改以保留第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:25:34.677

您可以简单地使用该`array_unique`功能为您完成工作：

```
$emails = explode(' ', $emailString);
$emails = array_unique($emails); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:30:54.953

我建议以下技巧/程序：

1.  从一个字符串更改为地址数组。你这样做`preg_match_all`，其他人可能这样做`explode`，一切似乎都有效。所以你已经有了这个。
2.  从地址中提取域。您可以使用正则表达式或其他东西再次执行此操作，我会说这很简单。
3.  现在检查该域是否已被使用，如果没有，请选择该电子邮件地址。

最后一点可以通过使用数组和域作为键轻松完成。然后您可以使用`isset`它来查看它是否已在使用中。

**编辑：**由于 deceze 选择了类似的答案（他覆盖了每个域的匹配项），因此以下代码示例略有不同。由于您有字符串输入，我考虑逐步迭代它以节省临时地址数组并立即进行地址和域解析。为此，您需要处理由`preg_match`. 但是，实际上可以进行类似的操作`preg_match_all`，然后您将再次拥有该数组。

此代码将选择第一个并忽略每个域的其他地址：

```
$str = 'email1@domain.com email2@domain.com email1@domain.com email1@domain.com email3@test.co.uk';
$addresses = array();
$pattern = '/[\w-]+(?:\.[\w-]+)*@((?:[\w-]+\.)+[a-zA-Z]{2,7})/';
$offset = 0;
while (preg_match($pattern, $str, $matches, PREG_OFFSET_CAPTURE, $offset)) {
    list(list($address, $pos), list($domain)) = $matches;
    isset($addresses[$domain]) || $addresses[$domain] = $address;
    $offset = $pos + strlen($address);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:26:52.927

这个概念`prev`是不可靠的，除非所有相同的主机名都在一个连续的序列中。如果您按主机名排序并提供排序功能，它会起作用，但这有点矫枉过正。

使用主机名构建一个数组，删除数组中已经存在主机名的条目。

# maven - Maven + Surefire/Failsafe - forkMode="perthread" 不起作用......一种解决方法？

> ID：11098073
> 
> 赞同：2
> 
> 时间：2012-06-19T09:23:23.037
> 
> 标签：maven, maven-2, infinispan, surefire, maven-failsafe-plugin

我们正在开发基于嵌入式 Infinispan 数据网格集群的应用程序。在我们应用程序的目标环境中，数据网格的每个成员都将运行在一个独立的 JVM 中，并`jgroup`形成使用集群（这实际上是由 Infinispan 完成的）。

为了在这个数据网格上做一些自动化测试，我们正在使用`maven-surefire-plugin`（或`maven-failsafe-plugin`）这个配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
      <forkMode>perthread</forkMode>
      <threadCount>4</threadCount>
    </configuration>
</plugin> 
```

因为这个配置应该为每个测试用例类创建一个分支（使用 4 个并行进程），所以我们创建了 4 个测试类，每个测试类都将模拟一个集群成员。在每个测试用例类中，我们将有多个线程并行运行测试方法，这要归功于 TestNG，如下所示：

```
@Test(threadPoolSize = 3, invocationCount = 2,  timeOut = 10000, testName="Test 1")
public void testSomething() throws Throwable { ... } 
```

问题是`maven-surefire-plugin` `forkMode="perthread"`and`threadCount=4`是错误的：它不会为每个类创建一个 fork，而是多次创建同一类的 fork。所以，在我的场景中，它需要一个测试用例并并行运行 4 次！！！

[注意：在此处](http://jira.codehaus.org/browse/SUREFIRE-869)检查 jira 错误。**请投票！！！！**

有人知道解决方法吗？我们正在做一些努力，`ant`但变得非常混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:39:26.280

该`maven-surefire-plugin`错误已解决，将在 2.13 版本中发布！

查看 Jira 票以获取更多信息：http: [//jira.codehaus.org/browse/SUREFIRE-869](http://jira.codehaus.org/browse/SUREFIRE-869)

# c - 导致分段错误的指针和字符串

> ID：11098074
> 
> 赞同：0
> 
> 时间：2012-06-19T09:23:30.760
> 
> 标签：c, string, pointers, segmentation-fault

> **可能重复：**
> [char a[] = “string”; 之间有什么区别？和 char *p = “字符串”；](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

```
char *str = "Hello";
printf("%c",++*str); 
```

这会在使用 gcc 的 linux 上产生分段错误。第一个语句更改为的那一刻

```
char str[10] = "Hello"; 
```

有用。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:25:29.980

尝试修改字符串文字是未定义的行为。

编译器可以自由地将它放在只读内存中（就像您的情况一样）。尝试修改只读内存可能会触发段错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T09:35:25.650

该语句`char *str = "Hello";`将字符串“Hello”存储在 RO-section 中，并将 RO-section 区域的地址（其中存储“Hello”）分配给 str。存储在 RO 部分的数据无法修改，因此您遇到了段错误。

```
char str[10] = "Hello"; 
```

也是错误的。你应该改为写

```
char str[10];
strncpy(str,"Hello",sizeof(str)); 
```

# ruby-on-rails - 活动资 源返回 nil 对象

> ID：11098078
> 
> 赞同：1
> 
> 时间：2012-06-19T09:23:37.843
> 
> 标签：ruby-on-rails, null, activeresource

我尝试将活动资源与可以查看日志的服务器一起使用。我请求服务器显示带有 xml 的订单。

```
class Orders < ActiveResource::Base
  self.site = "http://"+Hello::Services.session.server+"/api/"
  self.element_name = "orders"
  self.format = ActiveResource::Formats::XmlFormat
end 
```

```
o = Hello::Services::Orders.find(o.id) 
```

当我查看他返回的内容时，他会在 xml 中向我发送正确的对象。

但是当我查看我收到的内容时：

```
puts "====:"
puts xml
puts xml.inspect 
```

第二个 put return

> #<你好::服务::订单:0x007fc685339070>

但是第三个让我犯了一个错误：

> NoMethodError（当你没有预料到它时你有一个 nil 对象！你可能期望一个 Array 的实例。在评估 nil.each 时发生错误）：app/models/user.rb:27:in `inspect' app/models/user.rb:27:in`inspect' app/models /user.rb:27:in `inspect' app/models/user.rb:27:in`parseXml' app/controllers/orders_controller.rb:47:in `order'

所以如果你知道为什么我不能使用我的对象。对我来说，ActiveResource 更改本身接收到对象中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:28:55.300

好的，我不知道为什么，但我成功地用 .to_yaml 打印了我的对象。

# php - 使用PHP的SFTP本地文件上传

> ID：11098081
> 
> 赞同：1
> 
> 时间：2012-06-19T09:23:42.900
> 
> 标签：php, ftp, sftp, phpseclib

我在下面有以下脚本，我尝试通过 FTP 模拟文件上传，但使用 phpseclib 将其更改为 SFTP。

该脚本会很好地回显，直到该行：

> $upload = $conn_id->put($paths.'/'.$name, $filep, NET_SFTP_LOCAL_FILE); echo "upload == ".$upload."\n";

什么都没有发生或打印出来的地方。

这是完整的脚本：

```
<?
include('Net/SSH2.php');

if(!isset($_POST["submit"])){?>

<form action="upload.php" method="POST" enctype="multipart/form-data">
<table align="center">
<tr>
<td align="right">
Server:
</td>
<td>
<input size="50" type="text" name="server" value="">
</td>
</tr>
<tr>
<td align="right">
Username:
</td>
<td>
<input size="50" type="text" name="user"  value="">
</td>
</tr>
<tr>
<td align="right">
Password:
</td>
<td>
<input size="50" type="text" name="password" value="" >
</td>
</tr>
<tr>
<td align="right">
Path on the server:
</td>
<td>
<input size="50" type="text" name="pathserver" >
</td>
</tr>
<tr>
<td align="right">
Select your file to upload:
</td>
<td>
<input name="userfile" type="file" size="50">
</td>
</tr>
</table>
<table align="center">
<tr>
<td align="center">
<input type="submit" name="submit" value="Upload image" />
</td>
</tr>

</table>
</form>
<?}
else 
{

set_time_limit(300);//for setting 

$paths=$_POST['pathserver'];

echo "paths == ".$paths."\n";

$filep=$_FILES['userfile']['tmp_name'];

echo "filep == ".$filep."\n";

$sftp_server=$_POST['server'];

echo "sftp_server == ".$sftp_server."\n";

$sftp_user_name=$_POST['user'];

echo "sftp_user_name == ".$sftp_user_name."\n";

$sftp_user_pass=$_POST['password'];

echo "sftp_user_pass == ".$sftp_user_pass."\n";

$name=$_FILES['userfile']['name'];

echo "name == ".$name."\n";

// set up a connection to ftp server
$conn_id = new Net_SSH2($sftp_server);

// login with username and password
$login_result = $conn_id->login($sftp_user_name, $sftp_user_pass);

// check connection and login result
if ((!$conn_id) || (!$login_result)) {
       echo "SFTP connection has encountered an error!";
       echo "Attempted to connect to $sftp_server for user $sftp_user_name....";
       exit;
   } else {
       echo "Connected to $sftp_server, for user $sftp_user_name".".....";
   }

echo "HERE "."\n";
// upload the file to the path specified

$upload = $conn_id->put($paths.'/'.$name, $filep, NET_SFTP_LOCAL_FILE);
echo "upload == ".$upload."\n";

// check the upload status
if (!$upload) {
       echo "SFTP upload has encountered an error!";
   } else {
       echo "Uploaded file with name $name to $sftp_server ";
   }

// close the FTP connection
ftp_close($conn_id);    

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:59:45.160

NET/ssh2.php 是哪个库？看起来像[http://phpseclib.sourceforge.net](http://phpseclib.sourceforge.net)？

您正在混合使用他们的 SSH2 和 SFTP 库。直接取自他们的手册，您想要的代码是：

```
<?php
include('Net/SFTP.php');

$sftp = new Net_SFTP('www.domain.tld');
if (!$sftp->login('username', 'password')) {
    exit('Login Failed');
}

echo $sftp->pwd() . "\r\n";
$sftp->put('filename.ext', 'hello, world!');
print_r($sftp->nlist());
?> 
```

因此，只需将“put”函数中的 $data 更改为文件名，并按照您在代码中所做的那样添加模式。

一种替代方法是 PHP 提供的 PECL 函数。这些具有“内置”的 sftp 功能。示例代码是[http://www.php.net/manual/en/function.ssh2-sftp.php](http://www.php.net/manual/en/function.ssh2-sftp.php)如果它仍然不起作用，我们将更好地帮助调试，因为我们都可以访问它。

# java - BerkeleyDB JE 随机访问时间非线性增加

> ID：11098085
> 
> 赞同：0
> 
> 时间：2012-06-19T09:24:11.917
> 
> 标签：java, performance, nosql, berkeley-db

我正在测试 BerkeleyDB Java 版以了解我是否可以在我的项目中使用它。

我创建了一个非常简单的程序，它适用于 com.sleepycat.je.Database 类的对象：

*   写入 N 条记录，每条 5-15kb，生成的键如 Integer.toString(random.nextInt());

*   读取这些记录并使用方法 Database#get 按照它们创建的顺序获取它们；

*   使用方法 Database#get 以随机顺序读取相同数量的记录。

我现在看到了奇怪的事情。第三次测试的执行时间随着记录数的增加呈非线性增长。

*   N=80000，写入=55sec，顺序读取=17sec，随机读取=3sec
*   N=100000，写入=60sec，顺序读取=20sec，随机读取=7sec
*   N=120000，写入=68sec，顺序读取=27sec，随机读取=11sec
*   N=140000，写入=82sec，顺序读取=32sec，随机读取=47sec

（当然，我已经多次运行测试。）

我想我做错了什么。这是参考的来源（对不起，它有点长），方法的调用顺序相同：

```
private Environment env;
private Database db;
private Random random = new Random();
private List<String> keys = new ArrayList<String>();
private int seed = 113;

public boolean dbOpen() {
    EnvironmentConfig ec = new EnvironmentConfig();
    DatabaseConfig dc = new DatabaseConfig();
    ec.setAllowCreate(true);
    dc.setAllowCreate(true);
    env = new Environment(new File("mydbenv"), ec);
    db = env.openDatabase(null, "moe", dc);
    return true;
}

public int storeRecords(int i) {
    int j;
    long size = 0;
    DatabaseEntry key = new DatabaseEntry();
    DatabaseEntry val = new DatabaseEntry();

    random.setSeed(seed);

    for (j = 0; j < i; j++) {
        String k = Long.toString(random.nextLong());
        byte[] data = new byte[5000 + random.nextInt(10000)];
        keys.add(k);

        size += data.length;

        random.nextBytes(data);
        key.setData(k.getBytes());
        val.setData(data);
        db.put(null, key, val);
    }

    System.out.println("GENERATED SIZE: " + size);

    return j;
}                   

public int fetchRecords(int i) {
    int j, res;
    DatabaseEntry key = new DatabaseEntry();
    DatabaseEntry val = new DatabaseEntry();

    random.setSeed(seed);
    res = 0;

    for (j = 0; j < i; j++) {
        String k = Long.toString(random.nextLong());
        byte[] data = new byte[5000 + random.nextInt(10000)];
        random.nextBytes(data);
        key.setData(k.getBytes());
        db.get(null, key, val, null);
        if (Arrays.equals(data, val.getData())) {
            res++;
        } else {
            System.err.println("FETCH differs: " + j);
            System.err.println(data.length + " " + val.getData().length);
        }
    }

    return res;
}

public int fetchRandom(int i) {
    DatabaseEntry key = new DatabaseEntry();
    DatabaseEntry val = new DatabaseEntry();

    for (int j = 0; j < i; j++) {
        String k = keys.get(random.nextInt(keys.size()));
        key.setData(k.getBytes());
        db.get(null, key, val, null);
    }

    return i;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:50:35.513

性能下降是非线性的，原因有两个：

1.  BDB-JE 数据结构是一个 b-tree，它在检索一条记录时具有 O(log(n)) 的性能。通过 get 方法检索所有内容是 O(n*log(n))。
2.  大型数据集不适合 RAM，因此磁盘访问会减慢一切。随机访问的缓存局部性很差。

请注意，您可以通过放弃一些持久性来提高写入性能： ec.setTxnWriteNoSync(true);

您可能还想尝试 Tupl，这是我一直在研究的开源 BerkeleyDB 替代品。它仍处于 alpha 阶段，但您可以在 SourceForge 上找到它。

为了公平比较 BDB-JE 和 Tupl，我将缓存大小设置为 500M，并在存储方法结束时执行显式检查点。

使用 BDB-JE：

*   N=80000，写入=11.0sec，读取=5.3sec
*   N=100000，写入=13.6sec，读取=7.0sec
*   N=120000，写入=16.4 秒，读取=29.5 秒
*   N=140000，写入=18.8sec，读取=35.9sec
*   N=160000，写入=21.5sec，读取=41.3sec
*   N=180000，写入=23.9 秒，读取=46.4 秒

使用 Tupl：

*   N=80000，写入=21.7sec，读取=4.4sec
*   N=100000，写入=27.6sec，读取=6.3sec
*   N=120000，写入=30.2sec，读取=8.4sec
*   N=140000，写入=35.4sec，读取=12.2sec
*   N=160000，写入=39.9 秒，读取=17.4 秒
*   N=180000，写入=45.4sec，读取=22.8sec

由于其基于日志的格式，BDB-JE 写入条目的速度更快。然而，Tupl 的阅读速度更快。以下是 Tupl 测试的来源：

导入 java.io。*; 导入 java.util。*;

导入 org.cojen.tupl.*；

公共类 TuplTest { public static void main(final String[] args) 抛出异常 { final RandTupl rt = new RandTupl(); rt.dbOpen(args[0]);

```
 {
        long start = System.currentTimeMillis();
        rt.storeRecords(Integer.parseInt(args[1]));
        long end = System.currentTimeMillis();
        System.out.println("store duration: " + (end - start));
    }

    {
        long start = System.currentTimeMillis();
        rt.fetchRecords(Integer.parseInt(args[1]));
        long end = System.currentTimeMillis();
        System.out.println("fetch duration: " + (end - start));
    }
}

private Database db;
private Index ix;
private Random random = new Random();
private List<String> keys = new ArrayList<String>();
private int seed = 113;

public boolean dbOpen(String home) throws Exception {
    DatabaseConfig config = new DatabaseConfig();
    config.baseFile(new File(home));
    config.durabilityMode(DurabilityMode.NO_FLUSH);
    config.minCacheSize(500000000);
    db = Database.open(config);
    ix = db.openIndex("moe");
    return true;
}

public int storeRecords(int i) throws Exception {
    int j;
    long size = 0;

    random.setSeed(seed);

    for (j = 0; j < i; j++) {
        String k = Long.toString(random.nextLong());
        byte[] data = new byte[5000 + random.nextInt(10000)];
        keys.add(k);

        size += data.length;

        random.nextBytes(data);
        ix.store(null, k.getBytes(), data);
    }

    System.out.println("GENERATED SIZE: " + size);

    db.checkpoint();
    return j;
}

public int fetchRecords(int i) throws Exception {
    int j, res;

    random.setSeed(seed);
    res = 0;

    for (j = 0; j < i; j++) {
        String k = Long.toString(random.nextLong());
        byte[] data = new byte[5000 + random.nextInt(10000)];
        random.nextBytes(data);
        byte[] val = ix.load(null, k.getBytes());
        if (Arrays.equals(data, val)) {
            res++;
        } else {
            System.err.println("FETCH differs: " + j);
            System.err.println(data.length + " " + val.length);
        }
    }

    return res;
}

public int fetchRandom(int i) throws Exception {
    for (int j = 0; j < i; j++) {
        String k = keys.get(random.nextInt(keys.size()));
        ix.load(null, k.getBytes());
    }

    return i;
} 
```

}

# mysql - ALTER TABLE 问题

> ID：11098087
> 
> 赞同：1
> 
> 时间：2012-06-19T09:24:13.647
> 
> 标签：mysql, sql, create-table

我有一个问题，我想在表中添加一个外键（电子邮件）`bericht`。

电子邮件引用电子邮件中`vrijwilliger`，电子邮件是一个`varchar(80)`。

```
ALTER TABLE bericht
ADD(
FOREIGN KEY (email) REFERENCES vrijwilliger(email)); 
```

错误信息：

> #1005 - 无法创建表 '.\c5g4westpopintranet#sql-1494_145.frm' (errno: 150)

没看懂，希望你能帮帮我。

第一张桌子

```
CREATE TABLE bericht(
berichtID int(8),
onderwerp varchar(255),
datum date,
tijd time,
inhoudbericht,
email varchar(80),
PRIMARY KEY(berichtID),
FOREIGN KEY(email) REFERENCES vrijwilliger(email)); 
```

第二张桌子

```
 CREATE TABLE vrijwilliger(
 vrijwilligerID int(8),
 email varchar(80),
 Primary key(vrijwilligerID)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:31:23.783

尝试以下查询来更改表

```
ALTER TABLE bericht ADD CONSTRAINT email FOREIGN KEY(email) REFERENCES vrijwilliger(email) ON DELETE SET NULL ON UPDATE SET NULL; 
```

Alter 表的语法

```
ALTER TABLE tbl_name
    ADD [CONSTRAINT [symbol]] FOREIGN KEY
    [index_name] (index_col_name, ...)
    REFERENCES tbl_name (index_col_name,...)
    [ON DELETE reference_option]
    [ON UPDATE reference_option] 
```

参考

```
http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T11:00:37.127

试试下面的查询，它会为你工作

```
CREATE TABLE `vrijwilliger` (  
vrijwilligerID INT(8),  
email VARCHAR(80),  
PRIMARY KEY(vrijwilligerID),
UNIQUE KEY (email)
);

CREATE TABLE bericht( 
berichtID INT(8), 
onderwerp VARCHAR(255), 
datum DATE, 
tijd TIME, 
inhoudbericht INT(8), 
email VARCHAR(80), 
PRIMARY KEY(berichtID), 
FOREIGN KEY(email) 
REFERENCES vrijwilliger(email)); 
```

# trigger.io - 是否必须使用 TriggerIO 指定 Native 标签栏的图像分辨率

> ID：11098090
> 
> 赞同：1
> 
> 时间：2012-06-19T09:24:20.010
> 
> 标签：trigger.io, forge

TriggerIO 支持本机标签栏，添加按钮看起来很容易，但它是否支持图标的视网膜图形？还是需要这个？（指定更好的图像按比例缩小？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:15:55.480

单个更大的图像是最好的选择 - 我们确实将它们缩小以适合按钮本身。

根据经验，图标的高度应 > 100 像素，以在视网膜显示屏上保持清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:01:51.960

我尝试过使用 100x100 和 200x200 的图标，它们在配备 Retina 显示屏的 iPhone 上看起来都很模糊和像素化。看起来它们仅针对非视网膜设备调整大小。

# java - ArrayList.Indexof("Value") 返回 -1

> ID：11098093
> 
> 赞同：-4
> 
> 时间：2012-06-19T09:24:29.590
> 
> 标签：java, android, arraylist, android-spinner

我`ArrayList.Indexof("Value")`在我的一个应用程序中使用。`ArrayList`包含 400 多个值，我正在使用此列表在微调器中显示。我想将微调器移动到特定位置，因为我需要`Indexof`那个项目。我正在使用 Spinner `setSelection`，但这里`ArrayList.Indexof("Value")`返回 -1... 为什么？？？请帮我..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:26:37.127

请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)：

如果没有这样的索引，则返回 -1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:32:09.757

它返回 -1 的事实告诉您 ArrayList 中不存在索引“Value”。为了比较，`equals()`使用。可能失败的两点：

*   拼写，包括大小写 ("value".equals("Value") -> false)
*   您的 ArrayList 不包含字符串，而是其他可能使用不同实现的东西`String#equals(String)`

如果您希望我们能够为您提供更多信息，我们需要一些代码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:50:09.923

> I am using Spinner's setSelection but here ArrayList.Indexof("Value") returns -1

This tells you that the string is in fact not in the list. Period.

So what could *really* be going on?

@brimborium has identified a couple of possibilities:

*   the value in the list and the value that you are testing differ in case
*   the value in the list or the value that you are testing is not a String

And some others are:

*   one or other of the values has leading or trailing whitespace that doesn't show up
*   certain Unicode codepoints (characters) look the same when rendered but are different, and compare as different

Or ... your code either didn't add the value, or it removed it.

# url - 在 cakephp 中获取 url 参数

> ID：11098095
> 
> 赞同：0
> 
> 时间：2012-06-19T09:24:44.940
> 
> 标签：url, cakephp

有点问题，因为我没有正确地在谷歌中得到搜索结果。我想要做的是简单地在这个 url 中提取这个确认码：

```
http://localhost/myproject/webactivate/activate/4fe114bf590c410597b20ef8ac1000751340150975vU0t70lN 
```

我想得到这个

```
4fe114bf590c410597b20ef8ac1000751340150975vU0t70lN 
```

应该很简单吧。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:45:38.877

你的问题有点含糊，但假设你`activate`的控制器中有一个方法，你可以通过以下方式访问激活码：

```
public function activate($activationCode) {
    // do something with $activationCode
} 
```

# c# - Linq 无限嵌套查询

> ID：11098103
> 
> 赞同：0
> 
> 时间：2012-06-19T09:25:26.237
> 
> 标签：c#, linq, nested

我需要通过 linq 深入查看嵌套集合的节点。

这是嵌套类：

```
public class Group
{

    public int Id { get; set; }

    public string Description { get; set; }

    public int ParentId { get; set; }

    public List<Group> Groups { get; set; }

} 
```

此类的每个实例都可以在 Groups 方法中具有多个实例，依此类推。每个实例都通过 ParentId 属性链接。

我需要，有一个 Group 类的实例，检索他的父亲。我试过这个：

```
var parent = _repositoryGroups
.Where(g => g.Id == [my Group instance].ParentId)
.SelectMany(g => g.Groups)
.FirstOrDefault() 
```

我不知道为什么，但它并不总是找到父亲实例并且它从第二级开始查找（但这不是一个真正的问题）。

在这个嵌套类的所有深处找到元素的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:48:26.630

现在听起来你想递归地获取某个组的所有孩子。

所以你可以拥有：

```
private IEnumerable<Group> EnumerateChildren(Group parent)
{
    if (parent.Groups != null)
    {
        foreach (var g in parent.Groups)
        {
            yield return g;

            foreach (var sub in EnumerateChildren(g))
            {
                yield return sub;
            }
        }
    }
} 
```

如果您只想获取某个组的父级：

```
private Group GetParent(Group child)
{
    _repositoryGroups.Where(g => g.Id == child.ParentId).FirstOrDefault();
} 
```

如果您需要获取某个组的超级父级（...的父级的父级的父级）：

```
private Group GetSuperParent(Group child)
{
    parent = GetParent(child);

    while (parent != null)
    {
        child = parent;
        parent = GetParent(child);
    }

    return child;
} 
```

最重要的是，我建议如果你能做到这一点，请保留对父级的引用而不是它的 Id。如果它没有父亲，就让它为空。省去了很多麻烦。很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:26:16.377

对不起，伙计们，也许我没有很好地解释我的问题。我开发了这个解决方案，启发了你的答案：

```
private static Group GetGroupFather(IEnumerable<Group> groups, Group child)

{

    foreach (var group in groups)
{

    // try to nested search
    var result = GetGroupFather(group.Groups, child);

    if (result != null) return result;

    // check in the current level
    if (group.Id == child.ParentId)

        return group;

}

return null;

} 
```

如果您使用 linq 有更好的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:50:24.180

如果你想上去你的结构并找到父母的最后一个父母，你可以使用这段代码：

```
var group = [my Group instance];

while(group.ParentId > 0)
{
    group = _repositoryGroups.First(g => g.Id == group.ParentId);
} 
```

这假设您的 ID 大于零，并且 id>0 将始终具有有效的父级。

# java - 仅检查一个连字符/下划线的屏幕名称

> ID：11098104
> 
> 赞同：2
> 
> 时间：2012-06-19T09:25:28.793
> 
> 标签：java, regex, validation, hyphen

我需要验证用户的屏幕名称以确保它不能有**多个连字符或下划线**我不希望人们的屏幕名称都是标点符号。

这是我到目前为止的验证：

```
public boolean validateScreenName(String screenName) {
  // Check screen name has > 0 chars and that it contains only a-z, A-Z, _ and -
  boolean validated = false;

  if (screenName.matches("[a-zA-Z0-9_-]{1,20}") 
      && (! screenName.equals("")) 
      && (! screenName.contains("\\s"))) {
    validated = true; 
  } else {
    validated = false;
  }
  return validated;
} 
```

我想添加无多个连字符/下划线验证作为另一个 if 条件可能以 RegEx 的形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:33:44.573

你可以使用：

```
screenName.matches("^(?=[^_-]*[_-]?[^_-]*$)[a-zA-Z0-9_-]{1,20}$") 
```

不需要其他条件，它们是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:32:43.540

由于您已经验证了单词包含的内容。您可以在另一个 if 条件中添加此检查。

```
screenName.matches("[^-]*-?[^-]*") 
```

# javascript - 如何在表单输入元素内的数组中插入数据

> ID：11098113
> 
> 赞同：2
> 
> 时间：2012-06-19T09:26:05.453
> 
> 标签：javascript, jquery

我有一个数组，里面有一些数据。该数组包含 id、名字、姓氏、电子邮件、电话。我还有五个表单输入元素。现在我想在这些元素的数组中添加数据。例如，ID 应该插入到 ID 表单字段中，名称应该插入到名称输入元素等。我该如何实现呢？

这是我的代码

```
insert_data_in_form: function(data) {
    var form = $("#dataform");
    var form_arr = new Array();

    form.each(function(i) {
        var form_el = form.children("input[type='textfield']");
        form_arr.push(form_el);
        console.log(data.length);
        //for(var j = 0; j < 5; j++) {
            form_el.val(data[i]);
        //}
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:34:28.793

如果数据数组中的值与表单中的值顺序相同，那么您可以这样做

```
insert_data_in_form: function(data) {
    var formElems = $("#dataform input[type='text']");
    formElems.each(function(i,elem) {
        $(this).val(data[i]);
        // or even better use the following faster way 
        // if they are always text boxes
        // this.value = data[i];
    });
} 
```

**演示：http:** [//jsfiddle.net/joycse06/AJhEW/](http://jsfiddle.net/joycse06/AJhEW/)

**更新（替代方式）：**

您也可以使用`Implicit Looping`此函数`.val(function(index,val)`的变体来实现此目的，如下所示[`.val()`](http://api.jquery.com/val/)

```
var insert_data_in_form =  function(data) {
    var formElems = $("#dataform input[type='text']");
    formElems.val(function(i) {
       return data[i];
    });
}; 
```

**演示：http:** [//jsfiddle.net/joycse06/AJhEW/2/](http://jsfiddle.net/joycse06/AJhEW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:34:36.187

埃尔-> arr：

```
form_arr[form_el.attr('name')] = form_el.val(); 
```

arr -> 埃尔：

```
form_el.val(form_arr[form_el.attr('name')]); 
```

# android - 使用 RotateAnimation 的最短路径动画

> ID：11098116
> 
> 赞同：3
> 
> 时间：2012-06-19T09:26:13.370
> 
> 标签：android, android-animation

我想做两个角度之间的最短路径旋转动画。我正在使用 RotateAnimation(fromDegrees, toDegrees, pivotX, pivotY) 方法为图像设置动画。

问题是，当 fromDegrees 为 350 且 toDegrees 为 10 时，它会旋转整个圆（340 度）而不是顺时针旋转 20 度。

有没有办法强制最小旋转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-14T06:38:54.830

您可以使用[ViewPropertyAnimator](https://developer.android.com/reference/android/view/ViewPropertyAnimator.html)代替 RotateAnimation ，它有一个方法[rotationBy](https://developer.android.com/reference/android/view/ViewPropertyAnimator.html#rotationBy(float))，它按指定的值旋转视图**，**因此您不需要 'from' 和 'to' 值。

这两个动画之间的主要区别主要在于，RotateAnimation 仅移动屏幕上的像素，因此例如 OnClickListener 不会使用像素进行动画处理，而 ViewPropertyAnimator 会更改视图在屏幕上的实际属性/位置。

ViewPropertyAnimator 也很有帮助，因为它很容易实现。顺时针旋转 20 度的 ViewPropertyAnimator 的最小实现如下所示：

```
yourImage.animate().rotationBy(20); 
```

设置持续时间从来没有错，还建议设置插值器，因为它使任何动画看起来更逼真：

```
yourImage.animate()
    .rotationBy(20) -> degrees -20 would be counter clockwise
    .setDuration(1000) -> ms
    .setInterpolator(new AccelerateDecelerateInterpolator()); 
```

请务必查看所有可用方法的[文档](https://developer.android.com/reference/android/view/ViewPropertyAnimator.html)。

# android - 如何检测电话服务状态

> ID：11098119
> 
> 赞同：0
> 
> 时间：2012-06-19T09:26:24.277
> 
> 标签：android

我阅读了有关[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)及其`onServiceStateChanged`回调的信息。可能的服务状态值之一是我需要检测的 STATE_OUT_OF_SERVICE。

我可以在不实例化侦听器的情况下获取电话状态信息吗？在我的应用程序中，我不需要及时通知手机状态的每次变化，而只需要在某个时刻测试手机是否离线（由于无线电信号不可用）。

我想要的是一个（伪）`TelephonyManager.getServiceState()`调用一次，不幸的是我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:47:37.147

使用[此处记录](http://developer.android.com/reference/android/telephony/ServiceState.html#ServiceState%28%29)`ServiceState`的类。

调用`getState()`返回手机当前状态的函数。

# php - OCI_CONNECT，连接远程机器的TNS

> ID：11098127
> 
> 赞同：2
> 
> 时间：2012-06-19T09:26:45.147
> 
> 标签：php, oracle, tns

Apache Web 服务器正在我的机器（本地主机）中运行。但是 TNS 条目位于同一网络内的另一台机器上，

另一台机器 ip 是 - 192.168.11.122。

我需要按如下方式连接远程机器的 TNS。但给出一个错误

> 致命错误：ORA-12154：TNS：无法解析指定的连接标识符

```
oci_connect("ABS", "b2a8a621", "//192.168.11.122 / 10.20.42.11:1521/AVABS"); 
```

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T21:48:48.673

10.20.42.11是Oracle数据库服务器的IP地址吗？如果是这样，请尝试：

```
oci_connect("ABS", "b2a8a621", "//10.20.42.11:1521/AVABS"); 
```

# java - 如何编写java库的python包装器

> ID：11098131
> 
> 赞同：6
> 
> 时间：2012-06-19T09:26:57.937
> 
> 标签：java, python, binding, word-wrap, cpython

我们如何编写一个与 Java 库绑定的 Python（使用 CPython），以便想要使用这个 Java 库的开发人员可以通过只编写 Python 代码来使用它，而不用担心任何 Java 代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:49:19.660

你可以这样尝试：

*   使用**Jython**而不是 CPython 编写 Python 代码[http://www.jython.org](http://www.jython.org)。
*   **通过Apache Bean Scripting Framework** [http://commons.apache.org/bsf/](http://commons.apache.org/bsf/)将 Jython 代码与 Java 代码集成

如果您确实需要使用 CPython，那么**Apache Trift**可能对您来说很有趣：http: [//thrift.apache.org/](http://thrift.apache.org/)所以您可以制作额外的可扩展抽象层并将您的 Java 代码与不同的语言（不仅仅是 Python）集成

如果您需要一个真正低级的接口，您可以查看 JNI [http://java.sun.com/docs/books/jni/](http://java.sun.com/docs/books/jni/)进行调查。但我认为使用 JNI 将您的代码与 CPython 集成需要花费很多时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T23:27:47.133

我在类似的实例中使用了 JPype，效果不错。主要任务是编写包装器以将您的 java api 转换为更 Pythonic 的 api，因为原始 JPype 的使用几乎不比编写 java 代码更漂亮。

# php - 如何在phpmysql中的日期时间+1个月？

> ID：11098133
> 
> 赞同：-2
> 
> 时间：2012-06-19T09:27:06.483
> 
> 标签：php, mysql

我有一个样本数据

```
table(id, name, date_create)
table(1, 'Iphone 4S', '2012-06-18 17:19:05') // format Y-m-d H:i:s 
```

和 phpmysql

```
SELECT * FROM table 
WHERE date_create BETWEEN('date_create' AND '2012-07-18 17:19:05') // date_create +1 month 
```

如何在此查询中 +1 个月

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:29:59.103

您可以使用[DATE_ADD()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)：

```
WHERE date_create BETWEEN(DATE_ADD(date_create, INTERVAL 1 MONTH) AND '2012-07-18 17:19:05') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:33:37.870

使用`DATE_ADD`：

```
SELECT * 
FROM table 
WHERE DATE(date_create) BETWEEN DATE(date_create) AND 
                                DATE(DATE_ADD(date_create,INTERVAL 1 MONTH)) 
```

# javascript - HTML onclick document.getElementById

> ID：11098134
> 
> 赞同：1
> 
> 时间：2012-06-19T09:27:08.170
> 
> 标签：javascript, html

我有一个问题，我确信它很简单，但我在让它工作时遇到了一点问题。我在具有一个参数的外部 js 文件中编写了一个函数。

在我的 HTML 中，我有 onclick 事件，我想要提供的参数是下拉菜单中的值，因此我使用 document.getElementById 来获取该值。但是当我触发事件时它在抱怨。

```
<select id="ddlOriginHubChinaSea" onclick="chkHub(document.getElementById('ddlOriginHubChinaSea').val())" >
                <option value="Cambodia">Cambodia</option>
                <option value="HK">HK</option>
                <option value="Indonesia">Indonesia></option>
                <option value="Shanghai">Shanghai</option>
                <option value="Thailand">Thailand</option>
</select>

function chkHub(param) {  
    if (param != '') {
        $('#txtChinaSeaAirHub').val(param);       
    }
    else {
        $('#txtChinaSeaAirHub').val('');
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T09:28:44.523

试试这个：

```
<select id="ddlOriginHubChinaSea" onchange="chkHub(this.value)" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:29:50.667

```
function chkHub(param) {  
    if (param.options[param.selectedIndex].value != '') {
        $('#txtChinaSeaAirHub').val(param.options[param.selectedIndex].value);       
    }
    else {
        $('#txtChinaSeaAirHub').val('');
    }
} 
```

和`onchange="chkHub(this)"`

# java - Java 压缩/解压大文件 (>1gb)

> ID：11098135
> 
> 赞同：2
> 
> 时间：2012-06-19T09:27:09.683
> 
> 标签：java, android, file, compression

我在 android 中制作了一个应用程序，可以让用户压缩和解压缩文件，我使用了 package `java.util.zip`。一切正常。速度，文件与目录一起完全压缩和解压缩。唯一的问题是应用程序无法压缩/解压缩大文件（大于 1gb）。

我相信问题是我的`buffer`. 我见过的其他代码，其缓冲区的值为 1024 或 2048 或 8192，但我的缓冲区值基于所选文件的大小（只是为了使其灵活）。但是一旦用户选择了一个大文件（大小超过 8 位），就会出现错误。我在网上搜索过，也在这个网站上搜索过，但我找不到答案。我的问题与此类似：

[使用 Java 压缩 ZIP 中的大文件](https://stackoverflow.com/questions/1770776/to-compress-a-big-file-in-a-zip-with-java)

感谢您未来的帮助！:)

编辑：

感谢您的评论和回答。它真的帮了很多忙。我认为`BUFFER`在 java 中压缩/解压缩意味着文件的大小，所以在我的程序中，我使缓冲区大小变得灵活（缓冲区大小 = 文件大小）。有人可以解释一下缓冲区是如何工作的，这样我就可以理解为什么它可以`BUFFER`具有固定值。我也想弄清楚为什么其他人会说如果缓冲区大小为 8k 或其他情况会好得多。非常感谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:33:45.263

如果将缓冲区的大小调整为文件的大小，则意味着只要文件大小太大而无法使用内存，就会出现 OutOfMemoryError 。

使用正常的缓冲区大小并让它发挥作用 - 以流方式缓冲数据，一次一个块，而不是一次全部缓冲。

有关说明，请参见[BufferedOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html)的文档：

> 该类实现了一个缓冲的输出流。通过设置这样的输出流，应用程序可以将字节写入底层输出流，而不必为每个写入的字节调用底层系统。

因此使用缓冲区比非缓冲写入更有效。

而从[write](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html#write%28int%29)方法：

> 通常，此方法将给定数组中的字节存储到此流的缓冲区中，并根据需要将缓冲区刷新到底层输出流。但是，如果请求的长度至少与此流的缓冲区一样大，则此方法将刷新缓冲区并将字节直接写入底层输出流。

每次写入都会导致内存缓冲区填满，直到缓冲区已满。当缓冲区已满时，它会被刷新并清除。如果使用非常大的缓冲区，则会导致在刷新之前将大量数据存储在内存中。如果您的缓冲区与输入文件的大小相同，那么您是说您需要在刷新之前将整个内容读入内存。使用默认缓冲区大小通常就可以了。会有更多的物理写入（刷新）；避免内存爆炸。

通过允许您指定特定的缓冲区大小，API 允许您在内存消耗和 i/o 之间选择适当的平衡以适合您的应用程序。如果您调整应用程序的性能，您最终可能会调整缓冲区大小。但是对于许多情况，默认大小是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:35:06.150

听起来简单地设置缓冲区的最大大小会有所帮助，例如：

```
//After calculating the buffer size bufSize:
bufSize = Math.min(bufSize, MAXSIZE); 
```

# android - 在 Android 中发出 Http 请求

> ID：11098136
> 
> 赞同：0
> 
> 时间：2012-06-19T09:27:09.950
> 
> 标签：android, httprequest, runtime-error

我正在尝试`http`使用 Android 发出一个简单的请求，但应用程序在运行时崩溃。错误发生在：

```
HttpResponse rp= hc.execute(post); 
```

我认为这可能是因为缺少互联网许可，但补充说：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

不工作。

这是我使用的一段代码：

```
public class Http_requestActivity extends Activity {
    /** Called when the activity is first created. */

    private String getPage() {
        String str = "***";

        try
        {
            HttpClient hc = new DefaultHttpClient();
            HttpPost post = new HttpPost("http://www.yahoo.com");

            HttpResponse rp = hc.execute(post);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
            {
                str = EntityUtils.toString(rp.getEntity());
            }
        } catch(IOException e) {
            e.printStackTrace();
        }  

        return str;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView txt = (TextView)findViewById(R.id.textView1);
        txt.setText(this.getPage());

    }
} 
```

日志文件：

```
06-19 09:04:47.277: E/AndroidRuntime(2213): FATAL EXCEPTION: main
06-19 09:04:47.277: E/AndroidRuntime(2213): android.os.NetworkOnMainThreadException
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at com.exatech.httprequest.Http_requestActivity.getPage(Http_requestActivity.java:99)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at com.exatech.httprequest.Http_requestActivity.access$0(Http_requestActivity.java:91)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at com.exatech.httprequest.Http_requestActivity$1.onClick(Http_requestActivity.java:123)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.view.View.performClick(View.java:3511)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.view.View$PerformClick.run(View.java:14105)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.os.Handler.handleCallback(Handler.java:605)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.os.Looper.loop(Looper.java:137)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at java.lang.reflect.Method.invokeNative(Native Method)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at java.lang.reflect.Method.invoke(Method.java:511)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-19 09:04:47.277: E/AndroidRuntime(2213):     at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 缩放 Azure 角色时，实例化 DCOM 对象有时会挂起

> ID：11098142
> 
> 赞同：0
> 
> 时间：2012-06-19T09:27:45.267
> 
> 标签：c#, .net, com, azure, dcom

在我的 Azure 角色启动代码中，我实例化了一个 DCOM 对象以确保它可以被实例化，然后立即释放它，因为此时我并不真正需要它。

我在一个单独的线程中执行此操作，该线程实际上`new`是相应的 C# RCW 类和主线程`Thread.Join()`，该线程具有 30 秒的超时。如果线程在返回后仍在运行，`Thread.Join()`这意味着 DCOM 对象的创建时间很长，因此`Thread.Abort()`被调用并且角色重新启动。30 秒应该足够了 - 对象是轻量级的，并且在实例化时不会做任何耗时的事情。

在我尝试大幅扩展我的服务之前，该代码运行良好。我要求支持取消计算核心配额并尝试扩展到 100（一百）个实例。

现在大多数实例都可以正常启动，但其中一些实例恰好面临上述情况 - DCOM 对象创建时间过长，因此代码抛出异常导致角色重新启动。

我重复了几次测试。一旦我要求扩大几十个实例，问题就会在一些新启动的实例中重现。由于所有实例都是统一的，我不知道是什么导致了这种行为。

仅在某些情况下 DCOM 对象需要这么长时间的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:34:05.690

到目前为止，我的研究表明，当我扩大大量实例时，一些实例在开始时会相当缓慢，尤其是在 IO 密集型操作方面。我认为这是因为运行 VM 的主机（8 核硬件服务器）正在做一些繁重的事情，因此对 IO 的竞争很激烈。在这些条件下，实例化一个通常需要大约 1 秒的 DCOM 对象可能需要长达 40 秒，而我的超时应该只是增加。

# asp.net - 清除文本框

> ID：11098143
> 
> 赞同：1
> 
> 时间：2012-06-19T09:27:46.360
> 
> 标签：asp.net, visual-studio-2010, asp.net-controls

大家早，

我想在我的网页上有一个取消按钮，基本上我想清除表单字段并将用户重定向到主页。

在页面重定向之前，我需要清除 7 个 txt 框。我在互联网上进行了一些搜索，并试图将以下示例放入我的页面中，但没有成功......

使用此代码，我在 X = "" 行上出现错误。我收到一条消息“字符串类型的值无法转换为 system.we.UI.control”

```
 Protected Sub btnCancel_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnCancel.Click

         Dim x As Control
           For Each x In Me.Controls
         If TypeOf x Is TextBox Then
           x = " "
         End If

         Next

 End Sub 
```

而且我还尝试了以下也产生编译错误的方法。

```
 For Each c As Control In Me.Controls
        If TypeOf c Is TextBox Then
            DirectCast(c, TextBox).Text = ""
        End If
        Next 
```

谁能帮我解决这个问题？

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:31:51.343

尝试这个：

```
Dim x As Control
For Each x In Me.Controls
  If TypeOf x Is TextBox Then
    Dim txt as TextBox = x
    txt.Text = ""
  End If
Next 
```

说明：您尝试将字符串设置为 -`Control`变量，当然编译器不知道如何做到这一点。我给出的版本会将每个 TextBox 的 Text-property 设置为 empty-String

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:43:45.643

您可以使用 html 代码重置您正在使用的当前表单的所有字段

使用以下代码重置所有字段

```
<input type="reset" value="Clear" onclick="redirectFunction()" /> 
```

并在 redirectFunction 中编写以下 javascript 代码：

```
function redirectFunction()
{
window.location="destination.aspx";
} 
```

使用上面的代码，您可以重定向到目标页面。

# php - 通过 php 检查当前域是否允许并启用 ModPagespeed

> ID：11098148
> 
> 赞同：2
> 
> 时间：2012-06-19T09:28:00.563
> 
> 标签：php, .htaccess, apache2, pagespeed, mod-pagespeed

我试图弄清楚如何检查[ModPagespeed](http://code.google.com/p/modpagespeed/)是否已通过 PHP 在当前域上启用和允许。我已经编写了以下代码，但我对这个解决方案并不完全满意。它有效，但它是一个瓦罐。

[使用Pagespeed 过滤器](https://developers.google.com/speed/docs/mod_pagespeed/config_filters)摘录 .htaccess（服务于不同的域）：

```
<IfModule pagespeed_module>
  ModPagespeed On
  ModPagespeedRewriteLevel PassThrough
  ...
  ModPagespeedEnableFilters combine_css
  ...
</IfModule> 
```

摘自 pagespeedtest.html：

```
...
<head>
...
  <!-- If combine_css filter is active, the following code should be combined -->
  <style type="text/css" media="all">@import url("/style1.css");</style>
  <style type="text/css" media="all">@import url("/style2.css");</style>
  <style type="text/css" media="all">@import url("/style3.css");</style>
...
</head> 
```

检查此 PHP 代码是否启用或允许 Pagespeed：

```
 $psturl = 'http://'. $_SERVER['HTTP_HOST'] .'/pagespeedtest.html';
        $pagespeed_is_active = TRUE;
        $pstheaders = get_headers($psturl, 1);
        if ($pstheaders['Content-Length'] == 960) {
          $pagespeed_is_active = FALSE;
        } 
```

[我使用 PHP 5 函数get_headers($url)](http://php.net/manual/en/function.get-headers.php)获取 Content-Length 标头。我知道原始文件的长度为 960 字节，所以我想如果不执行优化，则在提供给客户端时 Content-Length 应该是相同的。

这种方法有其他选择吗？我不喜欢我在 pagespeedtest.html 上执行的补充 HTTP 请求，并且该解决方案强烈依赖于 PageSpeed 配置：如果过滤器将被禁用，即使 ModPagespeed 被允许`combine_css`，我也会得到。`$pagespeed_is_active == FALSE``On`

必须通过不同的域验证替代解决方案，因为我可以在同一个 .htaccess 中禁止某些域。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:31:27.100

而不是检查`Content-Length`，您可以改为查找`X-Mod-Pagespeed`标题，只要域存在“ModPageSpeed on”指令，它就会为您提供您正在寻找的答案。

除此之外，我认为您没有任何方法可以检查是否从请求中启用了 PageSpeed。PageSpeed 的全部意义在于它作为输出过滤器运行：您生成页面，PageSpeed 将其拾取并进行优化和重写。

# javascript - 将 JavaScript 移动到 ASPX 页面的底部以减少 PageLoad

> ID：11098149
> 
> 赞同：2
> 
> 时间：2012-06-19T09:28:00.807
> 
> 标签：javascript, asp.net, performance

在我的 WebApplication 中，我有许多 ASPX 页面，每个页面的开头都包含很多 javaScript。这会增加页面的加载时间（40 秒分钟）。我知道页面开头的 javascript @ 会阻止页面渲染，并且加载时间会增加。如何在不丢失实际功能的情况下将 Javascript 移动到页面底部以减少页面加载时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:54:09.683

[`ClientScriptManager.RegisterClientScriptBlock`](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx) （我认为`ClientScriptManager.RegisterClientScriptInclude`）会将脚本块渲染到元素的顶部`form`，而[`ClientScriptManager.RegisterStartUpScript`](http://msdn.microsoft.com/en-us/library/z9h4dk8y)将它们渲染到元素的底部`form`。

问题`RegisterStartUpScript`在于它不会按照添加的顺序输出脚本，这非常令人沮丧。你可以尝试几件事：

1.  确保您的脚本名称按您希望它们呈现的顺序按字母顺序排列（愚蠢，我知道）。
2.  尝试实现你自己的`ClientScriptManager`，它不会那么愚蠢。
3.  完全避免`ClientScriptManager`将脚本发送到您希望脚本出现的确切位置的文字块中。
4.  捆绑您的客户端脚本并仅包含该捆绑包。

#3 和 #4 的问题是控件可能会检查`ClientScriptManager`是否添加了依赖项，如果没有，它可能会添加它，导致脚本被包含两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:40:28.563

JavaScript 文件应该被缓存。这是减少加载时间的第一步。将 JS 文件移动到底部会有所帮助，但如果这是您唯一的操作，则效果不大。您还必须检查为您的 JS 文件使用 defer 属性的可能性，这意味着脚本在页面完成解析时执行。

# c# - 将父表单传递给从类实例调用的 ShowDialog

> ID：11098151
> 
> 赞同：6
> 
> 时间：2012-06-19T09:28:05.693
> 
> 标签：c#, .net, winforms, multithreading

我有一个表格。

在这种形式中，我在一个新线程上创建了一个类的实例，因为它运行了一些长时间运行的逻辑。该表单还使用户能够取消此逻辑/线程。

如果需要输入，该类会打开一个新表单。

新表格有时会出现在其他表格的后面。

我在类上设置了一个属性：

```
public Form ParentForm{get;set;} 
```

我现在可以这样做：

```
MyForm form = new MyForm();
form.ShowDialog(ParentForm); 
```

但是我在调​​用时遇到了跨线程异常`ShowDialog(ParentForm)`。

我知道我可以`InvokeRequired`以某种方式使用，但不确定如何在属性上使用。

谢谢

**更新：尝试过这样做但仍然出现异常：**

```
MyForm form = new MyForm();
form.ShowDialog(GetParentForm()); 

private Form GetParentForm()
{
    //You have to Invoke() so you can wait for the function to return and obtain its return value.
    if (ParentForm.InvokeRequired)
    {
        return (Form)ParentForm.Invoke(new Func<Form>(() => GetParentForm()));
    }
    else
    {
        return ParentForm;
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:53:24.670

您更新的方法 ( `GetParentForm`) 将不起作用，因为您将获取引用的任务包装`ParentForm`在一个`InvokeRequired`块中。您可以尝试将调用包装`ShowDialog`在这样的块中，但我认为您仍然会收到跨线程错误。

您最简单的解决方法是将创建和显示第二种形式的代码移出您的类并移入`ParentForm`. 所以代替这个：

```
MyForm form = new MyForm();
form.ShowDialog(ParentForm); 
```

你会这样做：

```
ParentForm.showMyNewForm(); 
```

你`ParentForm`会有这个：

```
public void showMyNewForm()
{
    MyForm form = new MyForm();
    form.ShowDialog(this);
} 
```

如果`MyForm`需要引用另一个线程上的类，您只需添加一个参数，`showMyNewForm()`以便可以传入对它的引用。

您在此处尝试执行的操作（创建和显示在不同线程上创建的相关、连接的表单）实际上违背了表单在 .NET 中的使用方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:33:55.980

您可以将异步方法添加到表单。让我们这样说：

```
public class MyForm : Form
{
    public void ShowModalAsync()
    {
        this.Invoke(new Action(()=> {
              ShowDilaog(..);
        }));  
    }
} 
```

并使用它，例如：

```
MyForm form = new MyForm();
form.ShowModalAsync(...); 
```

*应该*为你工作。

顺便说一句，如果您的问题**只是**窗口出现在其他人的后面，请尝试使用[Form.TopMost](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.topmost.aspx)属性将其设置为`true`. 请记住，是的，它将把它带到其他形式的前面，但没有必要在其他最顶层的形式前面。

# javascript - Geochart：使用 ISO 3266-2 区域代码但显示真实姓名

> ID：11098153
> 
> 赞同：5
> 
> 时间：2012-06-19T09:28:07.200
> 
> 标签：javascript, google-visualization

我正在使用[Google Visualization Geochart API](https://developers.google.com/chart/interactive/docs/gallery/geochart)创建一个国家地区的地图。我提供了[ISO 3266-2 国家细分代码](http://en.wikipedia.org/wiki/ISO_3166-2)并获得了正确的结果。然而，在图表中将 ISO 3266-2 代码显示为标签是一种糟糕的用户体验。所以我想提供一个自定义标签。以此为例：

```
 function drawVisualization() {
    var data = google.visualization.arrayToDataTable([
      ['Country', 'Popularity'],
      ['DE-BY', 200],
      ['DE-NW', 500]
    ]);

    var geochart = new google.visualization.GeoChart(
          document.getElementById('visualization'));
    geochart.draw(data, {width: 556, height: 347, region: 'DE', resolution: 'provinces'});
  } 
```

[[在代码游乐场](https://code.google.com/apis/ajax/playground/?type=visualization#geo_chart) 尝试一下]

我想提供“DE-BY”，但将“巴伐利亚”作为标签。我有必要使用 ISO 3266-2 代码，尽管 Google 写道

> 等效英文文本（例如，“US-NJ”或“New Jersey”）

是允许的，它非常不可靠，并且不适用于示例“巴伐利亚”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T15:49:52.177

这是一个有效的概念快速证明，我正在寻找类似的东西，并希望自动获得名称，但我不确定这是否可能，但这至少允许手动填充工具提示文本。

关键因素是创建包含所需列的表，然后应用[PatternFormat](https://developers.google.com/chart/interactive/docs/reference#patternformatter)以根据需要获取工具提示，然后创建一个数据视图，其中仅包含数据绑定所需的那些列。

```
function drawVisualization() {

      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Country');
      data.addColumn('number', 'Value');
      data.addColumn('string', 'Display');

      data.addRows([
        ['Germany', 200, 'Germany'],
        ['United States', 300, 'USA'],
        ['Brazil', 400, 'Brasil'],
        ['Canada', 500, 'Canada'],
        ['France', 600, 'France'],
        ['RU', 700, 'Russia']
      ]);

      var geochart = new google.visualization.GeoChart(
          document.getElementById('visualization'));

      var formatter = new google.visualization.PatternFormat('{1}');  
      formatter.format(data, [0, 2]);

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1]);  

      geochart.draw(view, {width: 556, height: 347});
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T14:18:46.133

根据我的经验，ISO 3166-2 存在几个问题，除了大多数人不知道的代码。

1.  似乎没有任何地方可以免费找到可机器处理的最新版本。

2.  除了在美国和加拿大等最稳定（通常是联邦）的国家/地区外，分配不断变化。有免费的机器可加工但过时的版本。

3.  人们使用的国名并不总是官方的（有些长的名字）。

4.  一些国家的地区名称与当地对地区真实情况的看法不符（在次地区层面更糟）。

5.  （子）区域名称是英语或当地语言的奇怪混合。

6.  对于那些仍然以 ASCII 为重点的应用程序，没有 Unicode 名称的官方 ASCII 回退。

我对此没有算法解决方案，但我对国家代码问题的务实解决方案是有一个长查找表来处理国家名称的常见变体，然后从代码反向查找到可接受的“规范” “ 形式。因为在我的情况下#6，我确保规范形式是 ASCII。我对 ISO 639-1 和 -3 中的语言做了类似的任务。

为 ISO 3166-2 中的所有地区制作这样一份清单是一项非常漫长的任务——目前我专注于经合组织、金砖四国和欧盟国家，因为这需要很长的路要走。

# java - Android：使用 SMS 触发操作

> ID：11098154
> 
> 赞同：0
> 
> 时间：2012-06-19T09:28:21.337
> 
> 标签：java, android

我有一个简单的应用程序，只需单击一个按钮即可获取 gps 坐标。

这是代码：

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class Coordinates extends Activity {

    protected LocationManager locationManager;

    protected Button retrieveLocationButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                0, 
                0,
                new MyLocationListener()
        );

        retrieveLocationButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                showCurrentLocation();
            }
        });        

    }    

    protected void showCurrentLocation() {

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if (location != null) {
            String message = String.format(
                    "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(Coordinates.this, message,
                    Toast.LENGTH_LONG).show();
        }

    }   

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {

        }

        public void onStatusChanged(String s, int i, Bundle b) {

        }

        public void onProviderDisabled(String s) {

        }

        public void onProviderEnabled(String s) {

        }

    }

} 
```

我还制作了接收短信的 SmsReceiver 类：

这是代码：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
Bundle bundle = intent.getExtras();

SmsMessage[] msgs = null;
if (bundle != null) {
Object[] pdus = (Object[]) bundle.get("pdus");
msgs = new SmsMessage[pdus.length];
if (msgs.length >= 0) {
msgs[0] = SmsMessage.createFromPdu((byte[]) pdus[0]);
String message = msgs[0].getMessageBody().toString();
if (message.toString().matches("GPS")){

    Toast.makeText(context,message,Toast.LENGTH_LONG).show();}

else
{Toast.makeText(context,"Nothing",100 ).show();
}

}
}
}
} 
```

一切正常，但我的问题是，如何触发 gps 以特定**SMS**而不是**按钮**显示坐标。

提前致谢！

# asp.net - aspx devexpress中gridview行和列的条件外观

> ID：11098166
> 
> 赞同：0
> 
> 时间：2012-06-19T09:29:23.173
> 
> 标签：asp.net, devexpress, aspxgridview, appearance

我有一个带有 devexpress 组件 ASPxGridView 的 Web 项目。所以我想知道是否有机会改变行的外观，以及提供一些规则的有条件的外观。我知道它在 Windows 应用程序中是如何工作的，并且希望在 aspx 网络中也一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:41:32.143

对于行外观更改处理[ASPxGridView.HtmlRowPrepared](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_HtmlRowPreparedtopic)事件。
对于单元格外观更改，请处理[ASPxGridView.HtmlDataCellPrepared](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_HtmlDataCellPreparedtopic)事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:53:43.600

引用您提供的示例，您必须使用[GridView Events](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview_events.aspx)。像 DataBount 事件在绑定数据时触发，因此您可以像这样更改外观：

```
protected void GridView1_DataBound(object sender, EventArgs e)
    {
        int rowindex = e.Row.RowIndex;
        if (/* Your Condition */)
        {            
            GridView1.Rows[rowindex].BackColor = System.Drawing.Color.Red;
        }
    } 
```

在你的 aspx 但是你必须做这样的事情：

```
OnRowDataBound="GridView1_DataBound" 
```

同样，您可以更改其他事件的外观，例如 OnRowCreated，顾名思义，它在创建行时触发。

# javascript - 使用 Javascript 创建表单

> ID：11098172
> 
> 赞同：0
> 
> 时间：2012-06-19T09:29:52.740
> 
> 标签：javascript, html, forms, dynamic

我正在考虑创建一个抽奖生成器，并且只使用 HTML 和 Javascript 来做到这一点。我目前有用户为“玩家”的数量选择一个“选择”选项，然后是一个 onclick() 事件，它创建了这么多“名称”框。

代码是：

```
<label for="playerNumbers">How many people are involved in the sweepstake?</label>
<select id="playerNumbers" name="playerNumbers">
<option value="2" onclick="makeform(2)"> 2 </option>
<option value="3" onclick="makeform(3)"> 3 </option>
<option value="4" onclick="makeform(4)"> 4 </option>
<option value="5" onclick="makeform(5)"> 5 </option>
<option value="6" onclick="makeform(6)"> 6 </option>
<option value="7" onclick="makeform(7)"> 7 </option>
<option value="8" onclick="makeform(8)"> 8 </option>
<option value="9" onclick="makeform(9)"> 9 </option>
<option value="10" onclick="makeform(10)"> 10 </option>
</select> 
```

'makeform()' 函数看起来像：

```
function makeform(numberOfPlayers) {
var x = '<form id="playerNames">';
for (i = 0; i < numberOfPlayers; i++) {
    x += '<label for="player'+(i+1)+'">Player '+(i+1)+'</label>';
    x += '<input type="text" id="player'+(i+1)+'" />';
    x += '<br />';
}
document.getElementById("newForm").innerHTML = x;
} 
```

这是一种享受，但是当用户填写新生成的表单时问题就来了。我在“整体表单”（包括新表单）的底部添加了一个提交底部，但它似乎无法识别新生成的表单。

我想我在问两个问题：1.）我如何使这项工作？您可以使用 Javascript 无限生成表单还是有限制？2.) 这是最好的方法吗？我确定不是，但我真的不知道我应该看什么技术。

谢谢！

（根据要求 - 所有代码:)

```
<form id="nameForm">
<div id="teamForm">
<label for="teamNumber">How many teams are involved?</label>
<select id="teamNumber" name="teamNumber">
<option value="2" onclick="makeform1(2)"> 2 </option>
<option value="3" onclick="makeform1(3)"> 3 </option>
<option value="4" onclick="makeform1(4)"> 4 </option>
<option value="5" onclick="makeform1(5)"> 5 </option>
<option value="6" onclick="makeform1(6)"> 6 </option>
<option value="7" onclick="makeform1(7)"> 7 </option>
<option value="8" onclick="makeform1(8)"> 8 </option>
<option value="9" onclick="makeform1(9)"> 9 </option>
<option value="10" onclick="makeform1(10)"> 10 </option>
<option value="11" onclick="makeform1(11)"> 11 </option>
<option value="12" onclick="makeform1(12)"> 12 </option>
<option value="13" onclick="makeform1(13)"> 13 </option>
<option value="14" onclick="makeform1(14)"> 14 </option>
<option value="15" onclick="makeform1(15)"> 15 </option>
<option value="16" onclick="makeform1(16)"> 16 </option>
<option value="17" onclick="makeform1(17)"> 17 </option>
<option value="18" onclick="makeform1(18)"> 18 </option>
<option value="19" onclick="makeform1(19)"> 19 </option>
<option value="20" onclick="makeform1(20)"> 20 </option>
<option value="21" onclick="makeform1(21)"> 21 </option>
<option value="22" onclick="makeform1(22)"> 22 </option>
<option value="23" onclick="makeform1(23)"> 23 </option>
<option value="24" onclick="makeform1(24)"> 24 </option>
<option value="25" onclick="makeform1(25)"> 25 </option>
<option value="26" onclick="makeform1(26)"> 26 </option>
<option value="27" onclick="makeform1(27)"> 27 </option>
<option value="28" onclick="makeform1(28)"> 28 </option>
</select>
<div id="newForm2"></div>
</div>
<label for="playerNumbers">How many people are involved in the sweepstake?</label>
<select id="playerNumbers" name="playerNumbers">
<option value="2" onclick="makeform(2)"> 2 </option>
<option value="3" onclick="makeform(3)"> 3 </option>
<option value="4" onclick="makeform(4)"> 4 </option>
<option value="5" onclick="makeform(5)"> 5 </option>
<option value="6" onclick="makeform(6)"> 6 </option>
<option value="7" onclick="makeform(7)"> 7 </option>
<option value="8" onclick="makeform(8)"> 8 </option>
<option value="9" onclick="makeform(9)"> 9 </option>
<option value="10" onclick="makeform(10)"> 10 </option>
</select>
<div id="newForm"></div>
<input type="submit" value="Submit Form" onclick="doSweepstake(this.form)" />
</form> 
```

和：

```
function makeform1(numberofTeams) {
var y = '<form id="teamNames">';
for (j = 0; j < numberofTeams; j++) {
    y += '<label for="team'+(j+1)+'">Team '+(j+1)+'</label>';
    y += '<input type="text id="team'+(j+1)+'" />';
    y += '<br />';
}
document.getElementById("newForm2").innerHTML = y;
} 
```

除了上面已经给出的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:35:20.917

这在原则上不起作用，因为您不能嵌套表单。您需要将字段添加到父表单。

你可以用普通的 JS 来做到这一点，但我建议你不要重新发明轮子，而是学习使用 JS 库——比如 jQuery。这会让你的生活更轻松——它极大地简化了 DOM 操作（并且做得更多）。例如，您可以执行以下操作：

```
$("#playerNumbers option").click(function() {
    var p = $("#playerNames");
    for (var i = 0; i < $(this).attr("value"); i++)
        p.append('<label><input /></label><br />'); // etc
}) 
```

一开始可能看起来很混乱，但再看一遍这段代码，你会发现很多熟悉的东西——以及使用类似这样的东西而不是笨拙的野兽`onclick`和`innerHTML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:43:32.150

我发现了一些事情：

1）您应该在选择上使用 onchange 事件，而不是在选项上使用 onclick - 这使得它跨浏览器友好且可访问 - 如果用户选项卡到选择然后使用箭头键更改选择会发生什么？onclick 不会触发...

```
<select id="playerNumbers" name="playerNumbers" onchange="makeform(this.options[this.selectedIndex].value)">
    <option value="2"> 2 </option>
    <option value="3"> 3 </option>
    <option value="4"> 4 </option>
    <option value="5"> 5 </option>
    <option value="6"> 6 </option>
    <option value="7"> 7 </option>
    <option value="8"> 8 </option>
    <option value="9"> 9 </option>
    <option value="10"> 10 </option>
</select> 
```

2) 您通过 JavaScript 创建的表单没有结束标记或提交按钮。

3) 您的输入元素没有名称，因此不会发送 POST/GET 数据。

尝试这个：

```
function makeform(numberOfPlayers) {
    var x = '<form id="playerNames">';
    for (i = 0; i < numberOfPlayers; i++) {
        x += '<label for="player'+(i+1)+'">Player '+(i+1)+'</label>';
        x += '<input type="text" id="player'+(i+1)+'" name="player[]" />';
        x += '<br />';
    }
    x += '<input type="submit" name="submit" value="Submit" />';
    x += '</form>';
    document.getElementById("newForm").innerHTML = x;
} 
```

# php - 生产服务器上的 PHP 标头速记功能失败

> ID：11098173
> 
> 赞同：0
> 
> 时间：2012-06-19T09:29:53.207
> 
> 标签：php, header, cgi

我正在尝试根据[这个答案](https://stackoverflow.com/a/4162238/416714)实现一个非常简单的发送标头的速记函数。

函数是这样的：

```
function hdr($code)
{
    if (!headers_sent())
    {
        header('x', TRUE, $code);
    }
} 
```

现在，它在我的本地服务器上运行良好，但一旦我投入生产，我会得到 500，错误日志如下所示：

> [2012 年 6 月 19 日星期二 11:01:59] [错误] [客户端 87.12.83.179] 脚本的标头格式错误。错误的标头=x：php54.cgi

如果我这样修改函数：

```
function hdr($code)
{
    if (!headers_sent())
    {
        header($_SERVER['SERVER_PROTOCOL'], TRUE, $code);
    }
} 
```

它适用于生产，但不适用于本地。

我想问题在于生产 php 是一个 cgi 脚本吗？任何解决问题的方法（即，对所有人都有一个功能）而不使用'codes' =>'messages'的关联数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:34:22.030

问题是，标题永远不会看起来像`X`. 标题块以类似的东西开头

```
HTTP/1.1 200 OK 
```

然后只有键值对跟随

```
A-Header: Some value 
```

看起来，网络服务器接受`HTTP/1.1`没有状态作为标题，但你不应该依赖它。此外，您的本地服务器接受`X`作为头值并不意味着您应该使用它；）

# php - 我不希望 php move_uploaded_file 覆盖现有文件

> ID：11098178
> 
> 赞同：1
> 
> 时间：2012-06-19T09:30:13.377
> 
> 标签：php, file-upload

我有一个允许用户提交文件的 html 页面。
下面是我保存提交文件的网络服务。但我不希望 move_uploaded_files 覆盖现有文件？我应该怎么办？谢谢

```
$tmpname = $_FILES["image"]["tmp_name"];
$movedname = "submit-img/" . $_POST["category"] . "/" . $_FILES["image"]["name"];
$prevPage = parse_url($_SERVER['HTTP_REFERER']);

move_uploaded_file($tmpname, $movedname); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:31:30.043

三思而后行：

```
if (!is_file($movedname)) {
    move_uploaded_file($tmpname, $movedname);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T14:19:54.063

我认为处理这种情况的一种更有效的方法是检查文件是否存在，在这种情况下编辑文件名直到找不到匹配项，然后上传文件。

```
$x=1;
$newfilename=$movedname;

while(is_file($_SERVER['DOCUMENT_ROOT'].$newfilename)){ //actual control

  $newfilename=$movedname;//to prevent creating flower123.jpg at the third iteration, see below

  $fn=explode(".",$newfilename);
  $fp=count($fn)-2;
  $fn[$fp].=$x;
  //here we get the filename before extension (eg. "flower" in fakepath/flower.jpg) and add $x to get "flower1"

  $newfilename=implode(".",$fn);
  //we rebuild our path having now fakepath/flower1.jpg
  $x++;
}

move_uploaded_file($filevar['tmp_name'], $_SERVER['DOCUMENT_ROOT'].$newfilename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T14:28:17.960

您可以检查如下：

```
 if( !is_file($movedname)) {

    move_uploaded_file($tmpname, $movedname);
} 
```

或者假设您想为其他目的上传相同的文件，而不是您可以执行以下操作：

```
 $tmpname = $_FILES["image"]["tmp_name"];  // use timestamp string to prevent overwrite files
$filename = $_FILES["image"]["name"] . '_' . time();

$movedname = "submit-img/" . $_POST["category"] . "/" . $filename;

$prevPage = parse_url($_SERVER['HTTP_REFERER']);

move_uploaded_file($tmpname, $movedname); 
```

# unix - 根据从另一个文件中选择的标题从文件中提取列

> ID：11098189
> 
> 赞同：6
> 
> 时间：2012-06-19T09:31:18.343
> 
> 标签：unix, awk

我有以下想在 awk 中解决的问题。我有一个大文本表，逗号分隔，由 100k 行和 5k 列组成。第一行是标题，第一列是记录 ID。然后我有第二个文本文件，其中包含第一个文件中标题的子集。我想提取第一个文件的所有列，其标题包含在第二个文件中给出的列表中。这是输入和所需输出的示例：

数据.TXT

```
 ID, head1, head2, head3, head4  
    1, 25.5, 1364.0, 22.5, 13.2  
    2, 10.1, 215.56, 1.15, 22.2 
```

列表.TXT

```
head1  
head4 
```

期望的输出：

```
ID, head1, head4  
1, 25.5, 13.2  
2, 10.1, 22.2 
```

任何人都可以就如何在 awk 中或通过 unix 脚本解决这个问题给我一些建议？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:22:22.793

[这里](http://awk.info/?doc/tip/readheaders.html)有一个有用的`awk`脚本，您可以使用它从 csv 文件中提取特定的列名。

我稍微修改了它，以便它可以从另一个文件中读取列名。将下面的脚本另存为`dataExtractor.sh`.

```
#!/bin/bash

DATAFILE=${1:-data.txt}
COLUMNFILE=${2:-list.txt}

awk -F, -v colsFile="$COLUMNFILE" '
   BEGIN {
     j=1
     while ((getline < colsFile) > 0) {
        col[j++] = $1
     }
     n=j-1;
     close(colsFile)
     for (i=1; i<=n; i++) s[col[i]]=i
   }
   NR==1 {
     for (f=1; f<=NF; f++)
       if ($f in s) c[s[$f]]=f
     next
   }
   { sep=""
     for (f=1; f<=n; f++) {
       printf("%c%s",sep,$c[f])
       sep=FS
     }
     print ""
   }
' "$DATAFILE" 
```

**运行它：**

```
$ cat data.txt
ID,head1,head2,head3,head4
1,25.5,1364.0,22.5,13.2
2,10.1,215.56,1.15,22.2

$ cat list.txt
ID
head1
head4

$ dataExtractor.sh data.txt list.txt
1,25.5,13.2
2,10.1,22.2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:23:50.590

我有一个想法，但由于我没有 shell 编程经验（也不知道 awk），这看起来像是以一种荒谬的方式重新发明了一些轮子：

```
$ cat DATA.TXT 
ID, head1, head2, head3, head4
1, 25.5, 1364.0, 22.5, 13.2
2, 10.1, 215.56, 1.15, 22.2

$ cat LIST.TXT 
head1
head4

$ cols=($(sed '1!d;s/, /\n/g' DATA.TXT | grep -nf LIST.TXT | sed 's/:.*$//'))

$ cut -d ',' -f 1$(printf ",%s" "${cols[@]}") DATA.TXT 
ID, head1, head4
1, 25.5, 13.2
2, 10.1, 22.2 
```

PS我从[这个](https://stackoverflow.com/a/2317171/1258041)和[这个](https://stackoverflow.com/a/5257398/1258041)答案中使用了一些关于bash数组的非常基本的想法。

# qt - 如何在 QML 中引用调用对象

> ID：11098196
> 
> 赞同：4
> 
> 时间：2012-06-19T09:32:02.207
> 
> 标签：qt, qml

有没有办法在 QML 中获取对调用对象的引用？我正在查看与 QML 中的“this”指针等效的东西

示例：假设我有一个组件用作图形元素的后端，例如视频播放器的搜索栏。此后端将视频的当前持续时间和总持续时间作为输入，并定期为图形搜索栏提供更新。现在，如果此后端中有一个信号处理程序用于发送当前和总持续时间的信号，它可能看起来像这样：

```
Connections {
  target: sender //this

  onSendSeekUpdate()
  {
    //do something
  } 
} 
```

当然我猜这可以用 C++ 实现，然后导入 QML。但我只是想知道 QML 是否也支持这个？这样我就可以立即在 QML 中编写这样的钩子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:56:59.580

在 QML 中，您可以使用 any`id`作为指针，以及任何 QObject 派生类型属性，因此在您的代码示例中，我们可以动态更改`target`var`Connection`并且仍然在信号处理程序中使用相同的 var 指向 sender ：

```
Connections {
    target: myitem; // change it when you need
    onMySignal: {
        target.doSomething(); // just use target here as it points on the listened object
        // it's just like 'sender()' in Qt/C++
    }
} 
```

不确定这是您要的，但我试图理解您的解释；-)

# c++ - 为 SetWaitableTimer 设置相对时间时算术溢出

> ID：11098197
> 
> 赞同：1
> 
> 时间：2012-06-19T09:32:08.690
> 
> 标签：c++, c, windows, winapi

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686289%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686289%28v=vs.85%29.aspx)

我希望计时器从当前时间开始发出 5 分 5 秒的信号，但是当我将 LARGE_INTEGER 的 QuadPart 设置为 -3050000000 时，变量溢出，当我打印出来时，它显示为 1244967296。我该怎么做它从当前时间发出 5 分 5 秒（或更多）的信号？

```
LARGE_INTEGER li;
li.QuadPart = -3050000000;
printf( "%ld\n", li ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:39:48.017

按照您的链接链接到的示例：

```
LARGE_INTEGER li;
li.QuadPart = -3050000000LL; 
```

“LL”使它成为一个长长的文字；没有它，它只是一个`int`.
（您*可以*使用小写字母“l”，但在许多字体中它们与“1”（一个）非常相似。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T09:46:18.827

```
LARGE_INTEGER alarm_after;  
alarm_after.QuadPart =  -1 * (seconds * 10000000LL);
printf("Quadpart=%I64x\n", alarm_after.Quadpart); 
```

# javascript - 将 JavaScript 放在部分视图中是否可以

> ID：11098198
> 
> 赞同：72
> 
> 时间：2012-06-19T09:32:08.667
> 
> 标签：javascript, asp.net-mvc, razor, partial-views

我正在开发 Web 应用程序，其中主页包含两部分：始终可见的常量块和由 3 个部分视图之一组成的信息块。每个部分视图都作为 AJAX 请求的结果出现，并且只加载一次（之后由 jquery 提供切换窗口）。它运作良好，但我遇到了一个问题。

部分视图的 html 代码包含用于常量块和信息块中的 js 函数。加载页面时，这些函数可以“看到”彼此并且它可以工作，但是 resharper 找不到函数声明并警告我这一点。由于可以在他们的代码中找到剃刀语法，我无法通过将它们传输到外部 js 文件来解决问题。

我能用这个做什么？

谢谢。

**更新：**

最后，我决定解决将我的 js 代码与视图分开的问题。所以新的问题是如何将 razor 语法包含到 js 文件中，或者什么是可接受的替代方案。我发现的流行解决方案是使用全局变量、数据属性和我更喜欢的一个——John Katsiotis 的 RazorJS 库。

[http://djsolid.net/blog/razorjs---write-razor-inside-your-javascript-files](http://djsolid.net/blog/razorjs---write-razor-inside-your-javascript-files)

我希望它能够稳定运行并使 Resharper 高兴。

干杯!

**更新：**

3年后我回忆起这个问题并决定根据我的经验对其进行更新。事实上，现在我宁愿不建议为此使用额外的库。尤其是如果您不是项目团队中的唯一成员……如果您在所有库中都得到保证会更好，它们得到创建者和社区的支持，并且可以轻松集成到您的 IDE 中（例如，如果使用特殊语法） . 此外，您团队中的所有人员都应该知道它是如何工作的。所以现在我建议做接下来的事情：

1.  将所有 JS 保存在单独的文件中。尽可能地隔离它。为其提供外部 API。
2.  从您的视图中调用 API 函数。
3.  将所有 Razor 生成的 URL、文本消息、常量作为资源参数传递。

例如：

.js 文件：

```
$.api.someInitFunction = function(resources){ ... } 
```

看法：

```
<script>
    $.api.someInitFunction({
        urls: { myAction: '@Url.Action("MyAction", "MyController")' },
        messages: { error: '@errorMessage' },
        consts: { myConst: @myIntConst }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-19T11:00:54.937

如果 Resharper 警告你，这没什么大不了的^_^

**但如果我是你，我根本不会把 JavaScript 放在局部视图中**。

因为局部视图可以多次插入到一个页面中，所以您的 JavaScript 会出现问题。

对于您的情况，如果您无法将 JavaScript 与 JS 文件分开，那么只需**创建另一个 PartialView 并将这些脚本放入其中，然后将其呈现在您的主页中。**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-27T21:26:47.223

如果您想编写封装“小部件”的局部视图，一旦将它们包含在页面中就可以工作，那么在局部视图中嵌入脚本块是将标记和初始化脚本一起包装在局部视图中的一种干净方法. 例如，我可能有一个名为“_EventList”的局部视图，我在整个站点中都使用它。如果我在我的母版页上放置两个位置，它应该可以正常工作，我不想在我的母版页中编写逻辑来初始化小部件。

如果您永远不会在一个页面中多次使用它，那么它很简单。但是，如果可以的话，请包装脚本，使其不会执行两次。见下文。为了堆栈溢出片段，我通过在代码片段中重复两次部分视图来模拟它，以表示在母版页中包含两次部分视图。

我的母版页可能如下所示：

```
<div id="left-nav">
   @Html.Partial("_EventList")           
</div>

<div id="body">
</div>

<div id="right-nav">
   @Html.Partial("_EventList")
</div> 
```

例子：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<!-- Self-contained partial view containing widget -->

<div id="widgetDiv" class="panel panel-default">

    <div class="panel-heading">Event Dates</div>
    <div class="panel panel-group">
       <ul class="widget">
         <!-- These will load dynamically -->
       </ul>
    </div>

    <script>
        $(document).ready(function() {

            // Run this once only in case widget is on page more than once
            if(typeof $widget == 'undefined') {
                $widget = $("ul.widget"); // could be more than one
                // mock data to simulate an ajax call
                var data = [
                   {Description: "March", StartDate: "03/01/2015"},
                   {Description: "April", StartDate: "04/01/2015"},
                   {Description: "May", StartDate: "05/01/2015"}
                ];

                $.each($widget, function(w, widget) {
                    // might be an $.ajax call
                    $.each(data, function(i, row) {
                        $(widget).append("<li><a href='/Widget/Search?startDate=" + row.StartDate + "'>" + row.Description + "</a></li>");
                    });
                });
            }
        });
    </script>
</div>
<!-- End of widget / partial view -->

<!-- Second copy of above for sake of example snippet -->
<!-- No need to read further -->

<!-- Self-contained partial view containing widget -->

<div id="widgetDiv" class="panel panel-default">

    <div class="panel-heading">Event Dates</div>
    <div class="panel panel-group">
       <ul class="tinylist nav nav-sidebar widget">
         <!-- These will load dynamically -->
       </ul>
    </div>

    <script>
        $(document).ready(function() {

            // Run this once only in case widget is on page more than once
            if(typeof $widget == 'undefined') {
                $widget = $("ul.widget"); // could be more than one
                // mock data to simulate an ajax call
                var data = [
                   {Description: "March", StartDate: "03/01/2015"},
                   {Description: "April", StartDate: "04/01/2015"},
                   {Description: "May", StartDate: "05/01/2015"}
                ];

                $.each($widget, function(w, widget) {
                    // might be an $.ajax call
                    $.each(data, function(i, row) {
                        $(widget).append("<li><a href='/Widget/Search?startDate=" + row.StartDate + "'>" + row.Description + "</a></li>");
                    });
                });
            }
        });
    </script>
</div>
<!-- End of widget / partial view -->
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T11:14:58.430

我同意 Wahid 的观点，即您不应该将 JavaScript 放在任何部分或其他视图中。我已经看过足够多的代码来做到这一点，知道它只会导致没有好处。

我还要说，您应该能够将封装在 Razor 语法中的逻辑转移到 JavaScript 中，您只需将逻辑所需的信息传递给 JavaScript。

我只是根据下一条评论的经验猜测，但您应该以与设计 C# 或 VB.NET 代码结构相同的方式设计 JavaScript。这样，您使用 Razor 的逻辑应该是 JavaScript 的一部分。

这样你的 JavaScript 将更容易维护，我认为 Resharper 也应该更快乐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-15T08:09:47.927

我这样做并发现它非常方便。它可以很好地使用 ViewBag、HttpContext 等来动态加载部分 javascript 片段。

它产生的感觉就像使用 T4 模板。

如果您添加这样的幻像脚本标签，您甚至可以获得 javascript 验证、智能感知等。

```
@using System.Configuration
@if (false)
{
    @:<script type="text/javascript">
}    
        $scope.clickCartItem = function(cartItem) {
            console.log(cartItem);
            window.location.href =@Html.Raw("('" + ConfigurationManager.AppSettings["baseUrl"] + "/Checkout/' + cartItem.ItemId)");
        };
        dataAccess.getCart(
        function (response) {
            //...
        },
        function (response) {
            //...
        }
        );

@if (false)
{
    @:</script>
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-09T17:56:11.060

对于这个问题的未来观众，这是我的经验。我认为将仅由局部使用的脚本保留在局部组织中是一个好主意。

我遇到的问题是在调试过程中，有时我很难让我的断点命中并且无法解决问题，除非我将脚本移动到父视图。很可能是由于多次打印该功能。我希望部分能够更好地解决和组织这个问题，但部分视图不支持部分（至少在 MVC 4 中不支持）。

所以我的回答是为了维护和调试，不应该将任何脚本放在局部视图中。

# objective-c - 在Objective-C中创建框架并将按钮放在框架内

> ID：11098200
> 
> 赞同：0
> 
> 时间：2012-06-19T09:32:13.257
> 
> 标签：objective-c, ios, xcode4.3

我想用网格创建带有 52 个正方形或按钮的视图（一年中的 52 周），但我不知道应该如何对齐它们或如何将它们放在框架中

（您将有 13 行和 4 列），但是如果您尝试使用此代码，它不是 algin ：我不知道应该如何创建框架以将所有按钮放在框架的一侧。

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
int rows = 13, columns = 4;

for (int y = 0; y < rows; y++) {
    for (int x = 0; x < columns; x++) {
        UIButton * button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = CGRectMake(58 * x, 31 * y, 58, 31);

        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview: button];

    }
}

}

 -(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:59:39.887

不要将按钮直接添加到控制器的视图中，而是创建一个包含所有按钮的子视图。然后，将此子视图居中。这是您可以使用的代码：

```
int rows = 13, columns = 4;
UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 58*columns, 58*rows)];
for (int y = 0; y < rows; y++) {
    for (int x = 0; x < columns; x++) {
        UIButton * button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.frame = CGRectMake(58 * x, 31 * y, 58, 31);

        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button];

    }
}

// Center the view which contains your buttons
CGPoint centerPoint = buttonView.center;
centerPoint.x = self.view.center.x;
buttonView.center = centerPoint;
[self.view addSubview:buttonView]; 
```

如果您希望按钮占据整个视图，请调整按钮的宽度和高度（您使用了 58 和 31）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:56:23.507

你能用这个吗：

```
CGPoint center = CGPointMake([self.view bounds].size.width/2.0, [self.view bounds].size.height/2.0);    
[button setCenter:center]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:10:40.073

将此代码写入`AppDelegate.m`文件中。只是检查一下。我运行这个程序，它在导航栏下方运行良好。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    } else {
        self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
    }
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    navigationController.navigationBar.barStyle = UIBarStyleDefault; 
    //navigationController.navigationBar.hidden = YES;
    //navigationController.navigationBar.frame = CGRectMake(0, 20, 320, 40);
   // self.window.rootViewController = self.viewController;
    [self.window addSubview:navigationController.view];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

# javascript - setTimeout() 不允许我传递文本值

> ID：11098203
> 
> 赞同：2
> 
> 时间：2012-06-19T09:32:33.770
> 
> 标签：javascript

> **可能重复：**
> [如何将参数传递给 setTimeout() 回调？](https://stackoverflow.com/questions/1190642/how-can-i-pass-a-parameter-to-a-settimeout-callback)
> [是否有充分的理由将字符串传递给 setTimeout？](https://stackoverflow.com/questions/6081560/is-there-ever-a-good-reason-to-pass-a-string-to-settimeout)

我想`loadPHPQuote(code)`在 1 秒后调用一个函数。并希望传递包含数字和文本字符的名为**code的参数。**但是`setTimeout()`如果代码包含一个字符，那么只有数字就可以了。

这是我的代码

```
setTimeout('loadPHPQuote('+code+')',1000); 
```

有没有人可以帮助我解决这个问题......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:34:02.607

做这个：

```
setTimeout(function() { loadPHPQuote(code); }, 1000); 
```

*   当你使用引号时，它会`eval`在幕后调用，
*   当您需要传递参数时，请将其包装在上面的函数中。
*   为防止立即调用函数，请勿使用`()`in`setTimeout`或`setInterval`直接使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:34:21.497

不建议将字符串作为参数传递给`setTimeout()`（例如，参见[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don%27t_use_eval!)）。改用匿名函数：

```
setTimeout( function(){ loadPHPQuote( code ); }, 1000 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:34:23.147

您需要将参数放在引号中，因为它是您传递的字符串，例如：

```
setTimeout('loadPHPQuote("'+code+'")',1000); 
```

# objective-c - 对 NSPopUpButton 进行排序

> ID：11098205
> 
> 赞同：4
> 
> 时间：2012-06-19T09:32:36.047
> 
> 标签：objective-c, cocoa

我有一个需要在 NSPopUpButton 中显示的元素列表。我希望 PopUp 按钮按字母顺序显示列表。此外，列表中有一个 NEW MenuItem，它将从文本字段中提取一个字符串并将其插入到 PopUp 按钮中。所以，有两个问题我想问：

1.  在 NSPopUpButton 中按排序顺序显示元素列表的正确方法是什么？
2.  我应该如何处理向 NSPopUpButton 插入新元素以保持排序顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:28:33.067

如果您使用 an`NSArrayController`来填充弹出按钮（或者更确切地说，它的菜单），那么您可以定义一个排序描述符来处理排序。

第一次让数组控制器与弹出按钮一起工作可能有点棘手，但如果您将弹出按钮的*内容*绑定到数组控制器的内容`arrangedObjects`，然后将*内容值*绑定到模型对象的合适字符串属性，您应该美好的。

然后，添加一个新项目只需通过数组控制器添加一个项目。

因此，如果您不熟悉`NSArrayController`类和绑定，以下是如何在 Interface Builder 中进行的简短描述。假设您的元素有一个名为`name`.

1.  在您的 nib 文件的所有者（例如，应用程序委托）中创建一个（可变的）数组属性来保存您的元素。
2.  在 Interface Builder 中创建一个数组控制器对象。
3.  将其内容数组绑定到您刚刚创建的数组属性。可以在 Xcode 的 Bindings Inspector (Cmd-Opt-7) 中设置绑定。
4.  在窗口中添加一个弹出按钮。
5.  将弹出按钮的内容绑定设置为数组控制器的`arrangedObjects`控制器键。这是该绑定的默认选项。
6.  将弹出按钮的内容值绑定设置为数组控制器的`arrangedObjects`控制器键和`name`模型键路径。这将在菜单中提供正确的文本。
7.  在您的代码中的某处，创建一个排序描述符并将其设置在数组控制器上（使用`setSortDescriptors:`方法）。为此，您可能希望在文件所有者上定义一个出口来保存阵列控制器。
8.  要向弹出按钮添加新元素，请使用数组控制器的`add:`方法。

这应该让您使用最少的自己的代码，以及一点 Interface Builder 的魔力。

对于相当简单的 UI 元素，绑定确实可以节省很多工作。更多关于他们[在这里](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/cocoabindings.html)。

*编辑添加一个例子：*

有关如何完成此操作的示例，请考虑具有应用程序委托的应用程序，该应用程序具有`data`属性、字典数组和`name`属性。请注意，这是比您的示例更深的抽象级别，其中数组仅包含单个字符串。就个人而言，我更喜欢这种方式。

```
self.data = [NSMutableArray arrayWithObjects:
             [NSDictionary dictionaryWithObjectsAndKeys:@"Flowers", @"name", nil],
             [NSDictionary dictionaryWithObjectsAndKeys:@"Animals", @"name", nil],
             [NSDictionary dictionaryWithObjectsAndKeys:@"Trees", @"name", nil],
             nil];

// Sort the array controller alphabetically by the name property
NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];

self.arrayController.sortDescriptors = [NSArray arrayWithObject:sd]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:11:26.070

我已经设法使用以下绑定对弹出按钮进行排序：

```
[arrayController bind:@"contentArray" toObject:self withKeyPath:@"displayElements" options:nil];
[popUpButton bind:@"content" toObject:arrayController withKeyPath:@"arrangedObjects" options:nil];
[popUpButton bind:@"contentValues" toObject:arrayController withKeyPath:@"arrangedObjects.title" options:nil]; 
```

我还更改了 init 中的语句：

```
displayElements = [[NSMutableArray alloc] initWithObjects:@"one",@"two",@"three", nil]; 
```

至

```
displayElements = [[NSMutableArray alloc] initWithObjects:[[NSMenuItem alloc]initWithTitle:@"one" action:nil keyEquivalent:@""],
                                                              [[NSMenuItem alloc]initWithTitle:@"two" action:nil keyEquivalent:@""],
                                                              [[NSMenuItem alloc]initWithTitle:@"three" action:nil keyEquivalent:@""],
                                                              nil]; 
```

并且排序工作得很好。
现在的问题是，如果我将子菜单添加到任何菜单项，然后我将新的 NSMenuItem 添加到数组控制器，则先前添加的子菜单会消失，如下图所示：

**添加新项之前：**
![在此处输入图像描述](../Images/bc702bc48ae268b4fcb571b84f3fee03.png)

**添加新项目后：**
![在此处输入图像描述](../Images/8b54985f22550182b3a27dcd8fc9d7e5.png)

当我们对元素进行排序时，会显示相同的行为。
有关解决此问题的任何想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:24:24.653

感谢@Monolo 的回答

我已经能够在 NSArrayController 的弹出窗口中加载值（已存储在 NSMutableArray 中）。但我仍然坚持排序的事情。下面是代码，我无法弄清楚它有什么问题。
**控制器类.h**

```
@interface ControllerClass : NSObject{
NSWindow *window;
NSArray *sortDescriptorArray;
NSMutableArray *displayElements;
NSSortDescriptor *sortDescriptor; 
IBOutlet NSArrayController *arrayController;
IBOutlet NSTextField *newItemTextField;
}
@property (readwrite,retain) NSMutableArray *displayElements;
-(id)init;
-(IBAction)AddItem:(id)sender;
@end 
```

==================================================== ==========
**ControllerClass.m**

```
#import "ControllerClass.h"

@implementation ControllerClass
@synthesize displayElements;
-(id)init
{
    self =[super init];
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"displayElements" ascending:YES];
    sortDescriptorArray = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [arrayController setSortDescriptors:sortDescriptorArray];
    displayElements = [[NSMutableArray alloc] initWithObjects:@"one",@"two",@"three", nil];
    return self;
}

-(IBAction)AddItem:(id)sender
{
    [arrayController addObject:[newItemTextField stringValue]];
}
@end 
```

# scala - 如何在scala中切片元组

> ID：11098208
> 
> 赞同：23
> 
> 时间：2012-06-19T09:32:51.283
> 
> 标签：scala

我正在尝试切片一个元组，删除最后两项。我尝试使用列表删除/获取方法，但无法成功取回元组。

这是我尝试过的方法：

```
scala> val myTuple = (1, 2, 4, 5, 0, 5)
myTuple: (Int, Int, Int, Int, Int, Int) = (1,2,4,5,0,5)

scala> val myList = myTuple.productIterator.toList
myList: List[Any] = List(1, 2, 4, 5, 0, 5)

scala> val mySubList = myList.dropRight(2)
mySubList: List[Any] = List(1, 2, 4, 5)

scala> val mySubTuple = ??? 
```

我在[这里](https://stackoverflow.com/a/8008105/595223)看到元组列表在scala中（还没有？）是可能的。

还有其他方法可以获得该子元组（不处理 myTuple._1、myTuple._2...）？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-19T11:12:40.240

这是[**shapeless**](https://github.com/milessabin/shapeless)可以以*通用*方式做的事情，包括转换为`HList`.

首先 -[变得无形](https://oss.sonatype.org/content/repositories/releases/com/chuusai/shapeless_2.9.2/1.2.2/)。然后**在打开依赖方法类型的情况下运行 scala**（默认情况下在 2.10 中打开）：

```
C:\Scala\sdk\scala-2.9.2\bin>scala -Ydependent-method-types
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_04).
Type in expressions to have them evaluated.
Type :help for more information. 
```

将 shapeless 添加到类路径中：

```
scala> :cp C:\Users\cmarsha\Downloads\shapeless_2.9.2-1.2.2.jar
Added 'C:\Users\cmarsha\Downloads\shapeless_2.9.2-1.2.2.jar'.  Your new classpath is:
"C:\tibco\tibrv\8.2\lib\tibrvnative.jar;C:\Users\cmarsha\Downloads\shapeless_2.9.2-1.2.2.jar" 
```

现在让我们玩吧！

```
scala> (1, 2.3, 'a, 'b', "c", true)
res0: (Int, Double, Symbol, Char, java.lang.String, Boolean) = (1,2.3,'a,b,c,true) 
```

我们必须导入无形

```
scala> import shapeless._; import Tuples._; import Nat._
import shapeless._
import Tuples._
import Nat._ 
```

我们把我们的元组变成一个`HList`

```
scala> res0.hlisted
res2: shapeless.::[Int,shapeless.::[Double,shapeless.::[Symbol,shapeless.::[Char,shapeless.::[java.lang.String,shapeless.::[Boolean,shapeless.HNil]]]]]] = 1 :: 2.3 :: 'a :: b :: c :: true :: HNil 
```

然后我们取前 4 个（注意`_4`是类型参数，*不是方法参数*）

```
scala> res2.take[_4]
res4: shapeless.::[Int,shapeless.::[Double,shapeless.::[Symbol,shapeless.::[Char, shapeless.HNil]]]] = 1 :: 2.3 :: 'a :: b :: HNil 
```

现在转换回元组

```
scala> res4.tupled
res5: (Int, Double, Symbol, Char) = (1,2.3,'a,b) 
```

我们可以缩短这个：

```
val (a, b, c, d) = sixtuple.hlisted.take[_4].tupled 
//a, b, c and d would all have the correct inferred type 
```

这当然可以推广到-tuple的第一个`M`元素`N`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T08:38:46.430

怎么样：

```
scala> val myTuple = (1,2,4,5,0,5)
myTuple: (Int, Int, Int, Int, Int, Int) = (1,2,4,5,0,5)

scala> val (left,right):Tuple2[List[Int],List[Int]] = myTuple.productIterator.toList.splitAt(myTuple.productArity - 2)
左：List[Int] = List(1, 2, 4, 5)
右：List[Int] = List(0, 5)

scala> val mytuple2 = (right(0),right(1))
mytuple2: (Int, Int) = (0,5)

```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T09:54:07.473

```
scala> val myTuple = (1, 2, 4, 5, 0, 5)
myTuple: (Int, Int, Int, Int, Int, Int) = (1,2,4,5,0,5)

scala> myTuple match {
     |   case (a, b, c, d, _, _) => (a, b, c, d)
     | }
res0: (Int, Int, Int, Int) = (1,2,4,5) 
```

# rfid - 射频识别 14443a 标准

> ID：11098210
> 
> 赞同：-2
> 
> 时间：2012-06-19T09:32:56.483
> 
> 标签：rfid

我需要 14443a rfid 标准命令。喜欢读和写。我发现读取命令是 0109000304A0010000。我需要为此编写命令。谢谢最好的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:39:25.567

[ISO/IEC 14443A 规范第 4 部分](http://www.waazaa.org/download/fcd-14443-4.pdf)包含处理此类 RFID 设备所需的所有数据。

对 read 命令进行快速的[Google 搜索](https://www.google.com/search?q=0109000304A0010000)会从使用它成功构建项目的人那里获得大量信息。

# php - Eway 沙盒网关 CURL

> ID：11098212
> 
> 赞同：0
> 
> 时间：2012-06-19T09:33:12.917
> 
> 标签：php, xml, soap

我正在开发一个与 Eway 连接的网站。我试图在 Sandbox 中创建一个 Rebill 客户。但是调用中的一些错误。

```
<?php

$url = "https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx";

$post_string = '<?xml version="1.0" encoding="utf-8"?>
                <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                  <soap:Header>
                    <eWAYHeader xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
                      <eWAYCustomerID>9194****</eWAYCustomerID>
                      <Username>******@********d.com.sand</Username>
                      <Password>S******55</Password>
                    </eWAYHeader>
                  </soap:Header>
                  <soap:Body>
                    <CreateRebillCustomer xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
                      <customerTitle>Mr</customerTitle>
                      <customerFirstName>Achintha</customerFirstName>
                      <customerLastName>Samindika</customerLastName>
                      <customerAddress>SID Designs</customerAddress>
                      <customerSuburb>Colombo</customerSuburb>
                      <customerState>ACT<</customerState>
                      <customerCompany>SID Con</customerCompany>
                      <customerPostCode>2111</customerPostCode>
                      <customerCountry>Australia</customerCountry>
                      <customerEmail>a****@ymail.com</customerEmail>
                      <customerFax>0298989898</customerFax>
                      <customerPhone1>0298989558</customerPhone1>
                      <customerPhone2>0295489898</customerPhone2>
                      <customerRef>REF585</customerRef>
                      <customerJobDesc>Dev</customerJobDesc>
                      <customerComments>Please Ship ASASP</customerComments>
                      <customerURL>www.****.com</customerURL>
                    </CreateRebillCustomer>
                  </soap:Body>
                </soap:Envelope>';

$header  = "POST /gateway/rebill/test/manageRebill_test.asmx HTTP/1.1 \r\n";
$header .= "Host: www.eway.com.au \r\n";
$header .= "Content-Type: text/xml; charset=utf-8 \r\n";
$header .= "Content-Length: ".strlen($post_string)." \r\n";
//$header .= 'SOAPAction: "http://www.eway.com.au/gateway/rebill/manageRebill/CreateRebillCustomer"'. "\r\n";
$header .= "Connection: close \r\n\r\n"; 
$header .= $post_string;

$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt($ch, CURLOPT_URL,$url);

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);

$data = curl_exec($ch); 
$status = curl_getinfo($ch);

if(curl_errno($ch))
    print curl_error($ch);
else{
    curl_close($ch);

    echo '<pre>';
    print_r($data);
    print_r($status);
    echo '</pre>';
    //echo '<div align="center"><h3>Thank you.</h3></div>';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:06:24.353

我有一个语法错误

`<customerState>ACT<</customerState>`

当这个额外小于删除时，我的原始代码可以工作。

工作代码。

```
<?php

    $url = "https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx";

    $post_string = '<?xml version="1.0" encoding="utf-8"?>
                                    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                                      <soap:Header>
                                            <eWAYHeader xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
                                              <eWAYCustomerID>9194****</eWAYCustomerID>
                                              <Username>******@********d.com.sand</Username>
                                              <Password>S******55</Password>
                                            </eWAYHeader>
                                      </soap:Header>
                                      <soap:Body>
                                            <CreateRebillCustomer xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
                                              <customerTitle>Mr</customerTitle>
                                              <customerFirstName>Achintha</customerFirstName>
                                              <customerLastName>Samindika</customerLastName>
                                              <customerAddress>SID Designs</customerAddress>
                                              <customerSuburb>Colombo</customerSuburb>
                                              <customerState>ACT</customerState>
                                              <customerCompany>SID Con</customerCompany>
                                              <customerPostCode>2111</customerPostCode>
                                              <customerCountry>Australia</customerCountry>
                                              <customerEmail>a****@ymail.com</customerEmail>
                                              <customerFax>0298989898</customerFax>
                                              <customerPhone1>0298989558</customerPhone1>
                                              <customerPhone2>0295489898</customerPhone2>
                                              <customerRef>REF585</customerRef>
                                              <customerJobDesc>Dev</customerJobDesc>
                                              <customerComments>Please Ship ASASP</customerComments>
                                              <customerURL>www.****.com</customerURL>
                                            </CreateRebillCustomer>
                                      </soap:Body>
                                    </soap:Envelope>';

    $header  = "POST /gateway/rebill/test/manageRebill_test.asmx HTTP/1.1 \r\n";
    $header .= "Host: www.eway.com.au \r\n";
    $header .= "Content-Type: text/xml; charset=utf-8 \r\n";
    $header .= "Content-Length: ".strlen($post_string)." \r\n";
    //$header .= 'SOAPAction: "http://www.eway.com.au/gateway/rebill/manageRebill/CreateRebillCustomer"'. "\r\n";
    $header .= "Connection: close \r\n\r\n";
    $header .= $post_string;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_URL,$url);

    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);

    $data = curl_exec($ch);
    $status = curl_getinfo($ch);

    if(curl_errno($ch))
            print curl_error($ch);
    else{
            curl_close($ch);

            echo '<pre>';
            print_r($data);
            print_r($status);
            echo '</pre>';
            //echo '<div align="center"><h3>Thank you.</h3></div>';
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:24:36.420

你能试试这个。修改了一些标题。

```
<?php
$url = 'https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx';
$post_string = "<?xml version=\"1.0\" encoding=\"utf-8\"?>
                <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">
                  <soap:Header>
                        <eWAYHeader xmlns=\"http://www.eway.com.au/gateway/rebill/manageRebill\">
                          <eWAYCustomerID>9194****</eWAYCustomerID>
                          <Username>******@********d.com.sand</Username>
                          <Password>S******55</Password>
                        </eWAYHeader>
                  </soap:Header>
                  <soap:Body>
                        <CreateRebillCustomer xmlns=\"http://www.eway.com.au/gateway/rebill/manageRebill\">
                          <customerTitle>Mr</customerTitle>
                          <customerFirstName>Achintha</customerFirstName>
                          <customerLastName>Samindika</customerLastName>
                          <customerAddress>SID Designs</customerAddress>
                          <customerSuburb>Colombo</customerSuburb>
                          <customerState>ACT<</customerState>
                          <customerCompany>SID Con</customerCompany>
                          <customerPostCode>2111</customerPostCode>
                          <customerCountry>Australia</customerCountry>
                          <customerEmail>a****@ymail.com</customerEmail>
                          <customerFax>0298989898</customerFax>
                          <customerPhone1>0298989558</customerPhone1>
                          <customerPhone2>0295489898</customerPhone2>
                          <customerRef>REF585</customerRef>
                          <customerJobDesc>Dev</customerJobDesc>
                          <customerComments>Please Ship ASASP</customerComments>
                          <customerURL>www.****.com</customerURL>
                        </CreateRebillCustomer>
                  </soap:Body>
                </soap:Envelope>";

    $headers    = array(
        "Content-Length: : " . strlen($post_string),
       'Content-Type: application/soap+xml;charset=utf-8'
   );

$ch     = curl_init();
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_POSTFIELDS, $post_string );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers );

$data = curl_exec($ch);
$status = curl_getinfo($ch);

if(curl_errno($ch)) {
        print curl_error($ch);
}else{
        curl_close($ch);

        echo '<pre>';
        print_r($data);
        print_r($status);
        echo '</pre>';
        //echo '<div align="center"><h3>Thank you.</h3></div>';
}
?> 
```

请更换占位符。希望它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T03:25:51.737

请使用以下名称空间。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:man="https://www.eway.com.au/gateway/managedpayment">
   <soapenv:Header>
      <man:eWAYHeader>
         <man:eWAYCustomerID></man:eWAYCustomerID>
         <man:Username></man:Username>
         <man:Password></man:Password>
      </man:eWAYHeader>
   </soapenv:Header>
   <soapenv:Body>
      <man:CreateCustomer>
         <man:Title></man:Title>
         <man:FirstName></man:FirstName>
         <man:LastName></man:LastName>
         <man:Address></man:Address>
         <man:Suburb></man:Suburb>
         <man:State></man:State>
         <man:Company></man:Company>
         <man:PostCode></man:PostCode>
         <man:Country></man:Country>
         <man:Email></man:Email>
         <man:Fax></man:Fax>
         <man:Phone></man:Phone>
         <man:Mobile></man:Mobile>
         <man:CustomerRef></man:CustomerRef>
         <man:JobDesc></man:JobDesc>
         <man:Comments></man:Comments>
         <man:URL></man:URL>
         <man:CCNumber></man:CCNumber>
         <man:CCNameOnCard></man:CCNameOnCard>
         <man:CCExpiryMonth></man:CCExpiryMonth>
         <man:CCExpiryYear></man:CCExpiryYear>
      </man:CreateCustomer>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-21T10:38:10.903

这对我来说很好用！

```
$data = array('salutation' => 'Mr', 'first_name' => 'Joe', 'last_name' => 'Bloggs', 'address' => 'Bloggs', 'city' => 'Capital City', 'state' => 'ACT', 'company' => 'Bloggs','postcode' => '2111', 'country' => 'Australia', 'email' => 'test3@eway.com.au', 'phone' => '0297979797', 'fax' => '0298989898', 'cusRef' => 'Ref123', 'customerComments' => 'Please Ship ASASP', 'cusURL' => 'https://www.eway.com.au');

$xml = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:man="http://www.eway.com.au/gateway/rebill/manageRebill">
<soap:Header>
    <eWAYHeader xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
        <eWAYCustomerID>SandboxCustomerID</eWAYCustomerID>
        <Username>Username</Username>
        <Password>Password</Password>
    </eWAYHeader>
</soap:Header>
  <soap:Body>
<CreateRebillCustomer xmlns="http://www.eway.com.au/gateway/rebill/manageRebill">
  <customerTitle>' . $data["salutation"] . '</customerTitle>
        <customerFirstName>' . $data["first_name"] . '</customerFirstName>
        <customerLastName>' . $data["last_name"] . '</customerLastName>
        <customerAddress>' . $data["address"] . '</customerAddress>
        <customerSuburb>' . $data["city"] . '</customerSuburb>
        <customerState>' . $data["state"] . '</customerState>
        <customerCompany>' . $data["company"] . '</customerCompany>
        <customerPostCode>' . $data["postcode"] . '</customerPostCode>
        <customerCountry>' . $data["country"] . '</customerCountry>
        <customerEmail>' . $data["email"] . '</customerEmail>
        <customerFax>' . $data["fax"] . '</customerFax>
        <customerPhone1>' . $data["phone"] . '</customerPhone1>
        <customerPhone2/>
        <customerRef>' . $data["cusRef"] . '</customerRef>
        <customerJobDesc/>
        <customerComments>' . $data["customerComments"] . '</customerComments>
        <customerURL>' . $data["cusURL"] . '</customerURL>
</CreateRebillCustomer>
</soap:Body>
</soap:Envelope>';

$ch = curl_init('https://www.eway.com.au/gateway/rebill/manageRebill.asmx');
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, "$xml");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);
    echo "<pre>";
   print_r($output); 
```

# python - 在 Python 中分析子进程 Popen 调用

> ID：11098216
> 
> 赞同：5
> 
> 时间：2012-06-19T09:33:33.563
> 
> 标签：python, profiling, subprocess, popen

我有一个程序通过使用子进程中的 popen 调用几个外部脚本。现在我想介绍这个程序。虽然我可以使用 cProfile 轻松分析 python 代码，但我没有得到有关不同外部脚本运行时间的信息。

我想避免用计时器弄乱每一个 popen 调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:48:47.277

正如西蒙所说，您只需要编写一次计时代码。一种方法是[装饰](http://www.python.org/dev/peps/pep-0318/)popen 函数。

# webdriver - 我们如何使用 selenium -webdriver 处理 IE 和 chrome 的 SSL 证书？

> ID：11098217
> 
> 赞同：0
> 
> 时间：2012-06-19T09:33:33.857
> 
> 标签：webdriver, ssl-certificate, selenium-webdriver

我们如何使用**selenium -webdriver**处理 IE 和 chrome 的 SSL 证书？

当我运行我的脚本以打开浏览器时，该浏览器的 url 带有 https:// 我收到弹出窗口，显示我的证书错误。

我想知道如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:53:04.317

将正确的证书添加到 chrome 配置文件并使用以下代码加载您的配置文件

```
 DesiredCapabilities capabilities = DesiredCapabilities.chrome();
  capabilities.setCapability("chrome.switches", Arrays.asList("--user-data-dir=/path/to/profile/directory"));
  WebDriver driver = new ChromeDriver(capabilities); 
```

来源：[http ://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)

对于 IE。它应该放在默认配置文件中。

# validation - Jquery验证submitHandler

> ID：11098219
> 
> 赞同：0
> 
> 时间：2012-06-19T09:33:40.050
> 
> 标签：validation, button, submit

我已经尝试在这个论坛和网络上搜索以寻找答案，但如果有的话，他们只会告诉我做我已经尝试过的事情。

所以，我的问题是这样的：我有一个通过两个验证器运行的表单，一个客户端 jquery 和一个服务器端 php（重力形式）。这已经有一段时间了。但是，我们注意到我们收到了很多重复的提交，所以我想禁用提交按钮，一旦表单在客户端得到验证。填写并提交表单后，它会运行客户端验证脚本，如果字段有效 - 禁用提交按钮（以防止重复提交） - 并将脚本发送到第二次验证。如果任何字段无效，则验证应返回错误消息并且不会禁用提交按钮。

我环顾四周，最后添加了这个：

```
submitHandler: function(form) {
$(form).find(":submit").attr("disabled", true).attr("value",
"Submitting...");
form.submit();
} 
```

到我的验证脚本结束。

然而，这并没有如我所愿。我已经尝试了上述各种不同的变体，但是当我添加它时，脚本根本不会运行，或者它只是禁用提交按钮（即使所有表单字段都无效），这使得它不可能更正并重新提交 - 您必须重新加载页面以再次启用提交按钮。

我究竟做错了什么？整个验证脚本如下所示：

```
jQuery(function() {

var $ = jQuery;
$(document).ready(function() {

$('#gform_6').validate( {     
rules       : {
input_6      : { required: true, personnummer: true },          // Personnummer
input_30     : { required: true, personnummer: true },          // Personnummer
input_10     : { required: true, minlength: 6 },                 // telenr
"input_21.1" : { required: true },                               // villkor
"input_3.3"  : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); } },  // 
"input_3.6"  : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); } },  // efternamn
input_7      : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); }, email: true },  // e-post 1
input_31     : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); }, email: true, equalTo: "#input_6_7" }, // e-post 2 //adress       : { required: true },  // adress
input_14     : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); } },   // lön
input_15     : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); }, number: true, minlength: 4, maxlength: 5 }, // clearingnr
input_16     : { required: function(element) { return (jQuery(element).parent().is(":hidden") == false); }, number: true, minlength: 7 }    // kontonr
      },

messages    : {
//pnummer      : "Födelsedatum ogiltigt, ska ha formatet 19770131-1234",
input_6      : "",
input_30     : "Födelsedatum ogiltigt, ska ha formatet 19770131-1234",
"input_3.3"  : "Du måste fylla i ditt förnamn",
"input_3.6"  : "Du måste fylla i ditt efternamn",
input_7      : "Ej giltig e-postadress",
input_31     : "Dina mail-adresser stämmer ej överens",
//adress       : "Fyll i din adress",
input_14     : "Fyll i din lön",
input_10     : "Fyll i ditt telefonnummer",
input_15     : "Clearingnummer måste vara 4 eller 5 siffror",
input_16     : "Kontonummer måste vara minst 7 siffror",
"input_21.1" : "Du måste acceptera villkoren"
},

//debug        : true,

errorClass   : "form-error",
errorElement : "span"
//validClass   : "valid",
submitHandler: function(form) {
$(form).find(":submit").attr("disabled", true).attr("value",
"Submitting...");
form.submit();
}

}
); 
```

请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:17:39.403

我不认为你对验证代码做错了什么。问题更多在于提交表单。为什么在有效提交表单之前不对其进行验证？像这样：

```
submitHandler: function(form) {
//Validates your form
$(form).validate();
//Checks if the form rules are all valid
if($(form).valid()){
$(form).find(":submit").attr("disabled", true).attr("value",
"Submitting...");
form.submit();
}
} 
```

或者，您可以添加一个 var 来检查您的表单上是否有提交。

```
<script type="text/javascript">
var isSubmit = false;

$(form).submit(function(){
//Checks if the form has already been submitted
if(isSubmit === false){
isSubmit = true;
//Do your form submission logic here
}
//Just in case you don't want it to conclude
return false;
});

</script> 
```

# php - 将 SQL 数据库中的字符串与“普通”字符串进行比较

> ID：11098242
> 
> 赞同：0
> 
> 时间：2012-06-19T09:34:47.403
> 
> 标签：php, mysql, string-comparison, strcmp

我正在尝试使用下拉菜单制作表格。然后将表单的值存储在数据库中。我希望以后能够更改表单的值，并通过返回表单来实现，该表单填充了数据库中输入的值。

一切似乎都在工作，除了下拉菜单。因为我希望所有字段都填充正确的值，所以这也适用于菜单。因此，我尝试在 if-else 子句中使用字符串比较来确定将哪个选项设置为选中。但是字符串比较不起作用。这是一个代码示例：

```
$query = mysql_query(SELECT * FROM data);
$result = mysql_fetch_assoc($query);

if(strcmp($result['pet'],"Dog")==0)
{
    echo "
        <option value='Dog' selected>Dog</option>
        <option value='Cat'>Cat</option>
        <option value='Bird'>Bird</option>
    ";
}
elseif(strcmp($result['pet'],"Cat")==0)
{
    echo "
        <option value='Dog'>Dog</option>
        <option value='Cat' selected>Cat</option>
        <option value='Bird'>Bird</option>
    ";
} 
```

我也试过：

```
if(result['pet']=="Dog")
{
    .....
}
elseif(result['pet']=="Cat")
{
    .....
} 
```

和

```
if(strcmp(trim(reuslt['pet']),trim("Dog"))==0)
{
    .....
}
elseif(strcmp(trim(result['pet']),trim("Cat"))==0)
{
    .....
} 
```

但没有任何效果。我怀疑它与排序规则有关，所以我在选择值时尝试更改它：

```
$query = mysql_query("SELECT * COLLATE latin_1 FROM data");
$result = mysql_fetch_assoc($query); 
```

这给了我错误消息**“警告：mysql_fetch_assoc() 期望参数 1 是资源，在第 12 行的 /opt/lampp/htdocs/PHP/control.php 中给出的布尔值”**。

那么，出了什么问题，我该如何解决？

编辑：我现在稍微改变了我的查询：

```
$query = mysql_query("SELECT * FROM data WHERE user='$user' COLLATE uft8_general_ci") or die(mysql_error()); 
```

由此我得到以下错误：

**COLLATION 'utf8_general_ci' 对 CHARACTER SET 'latin1' 无效**

当我将排序规则更改为**latin1_general_ci**时，我将执行以下操作：

**非法混合排序规则 (utf8_swedish_ci,IMPLICIT) 和 (latin1_general_ci,EXPLICIT) 用于操作 '='**

我对数据库中的列使用的排序规则是**utf8_swedish_ci**，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:36:35.273

您收到此错误是因为`mysql_query`在查询失败时返回布尔值 (false)，请执行以下操作以更好地解释问题

```
$result = mysql_query('SELECT * COLLATION latin_1 FROM data');
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

问题是您的查询无效 - 您应该使用`COLLATE`not `COLLATION`... 请参阅以下内容以获得有关如何[`COLLATE`工作](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)的良好解释- 本质上您使用`COLLATE`的是单个列而不是组 ( `*`)

# cordova - 使用单一框架开发跨平台应用程序和网站

> ID：11098245
> 
> 赞同：1
> 
> 时间：2012-06-19T09:34:58.140
> 
> 标签：cordova, sencha-touch, cross-platform, mobile-application

我的任务是开发一个跨平台移动应用程序以及一个可以在更大分辨率的触摸屏上运行的普通网站。网站和应用程序都应该具有相同的功能。

我只是想知道是否有任何工具可用于跨平台移动原生应用程序和网站。

考虑使用 SenchTouch 的 PhoneGap。但不确定我们是否可以使用它建立网站。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:10:03.673

使用`PhoneGap`并且`Sencha`您是否制作原生应用程序以及您是否可以使用这些 MVC。或者`Sencha, Web Server, javascript and CSS3`你可以制作网络应用程序吗？我希望能帮助你。;)

# linux - 使用 #!bin/sh shell 脚本监视新文件的文件夹，如果有，则触发另一个 shell 脚本

> ID：11098248
> 
> 赞同：0
> 
> 时间：2012-06-19T09:35:02.860
> 
> 标签：linux, shell, ubuntu

我需要一个脚本来监视我在 ubuntu 和 windows 之间创建的共享文件夹。该脚本将在 ubuntu 上的共享文件夹中检测到新的 .exe 文件时触发另一个脚本。

如果有人对这样的 shell 脚本有想法，请在这里与我分享，我急需，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:19:04.363

我喜欢这个想法，`dnotify`但也想提出一个快速而简单的解决方案：

```
while true
do 
  ls /dir/*.exe > current-list
  if diff current-list old-list
  then
    # do something with new files
    diff current-list old-list | grep '^<' | while read x file 
    do
       # make an operation with new file $file
    done && mv current-list old-list
  fi
  sleep 1
done 
```

我想指出，这只是一个“概念验证”，您需要稍微调整脚本（文件名、目录、错误处理等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:12:17.203

你应该看看**dnotify** ( [http://linux.die.net/man/1/dnotify](http://linux.die.net/man/1/dnotify) )

# c# - 如何在指定数量的数据后中断 WebRequest (GET)？

> ID：11098251
> 
> 赞同：1
> 
> 时间：2012-06-19T09:35:08.383
> 
> 标签：c#, .net, webrequest

我发现 HTTP HEAD 方法在实践中并不总是可靠的：[HTTP HEAD 方法的可靠性](https://stackoverflow.com/questions/11088796/reliability-of-http-head-method)

是否可以使用 HTTP GET 方法模拟 HTTP HEAD 方法？我的意思是我只需要答案的标题，所以它应该足以限制最大数据量。我可以在.NET 中做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:48:22.530

> 是否可以使用 HTTP GET 方法模拟 HTTP HEAD 方法？

不，当然不。GET 请求总是带有响应的主体。这就是 HTTP 规范所说的。因此，除非您找到违反 HTTP 规范的 Web 服务器，否则我认为它不会起作用。只有 HEAD 动词旨在实现您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:59:57.047

使用`WebClient.OpenRead()`which 返回一个流。读入所需的字节数，然后关闭流。

# java - 获取 ZipInputStream 的大小

> ID：11098253
> 
> 赞同：6
> 
> 时间：2012-06-19T09:35:20.313
> 
> 标签：java, zip, zipinputstream

在我们完全读取流之前，有没有办法找到/估计 ZipInputStream 的大小？

例如，我们可以在读取用户数据之前使用 getNextEntry 获取条目的元数据。

Inputstream 有一个方法 available() 来返回可以从此输入流中读取的字节数的估计值，但我无法为 ZipInputStream 找到类似的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:46:42.667

ZipInputStream 有方法 available() 但它返回 0 或 1。

要获得任何类型文件的估计大小，可以使用 FileInputStream，然后使用 ZipInputStream 读取 zip 文件。前任。

```
 public class ZipUtil {

    public static void main(String[] args) throws Exception {
        ZipInputStream zis = null;

        FileInputStream fis = new FileInputStream("C:/catalina.zip");
        int size = fis.available();
        System.out.println("size in KB : " + size/1024);
        zis = new ZipInputStream(fis);        

        ZipEntry ze;
        while ((ze = zis.getNextEntry()) != null) {
            System.out.println(ze.getName());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:47:40.110

如果你只有流，那么我不这么认为。

[zip 文件格式](http://en.wikipedia.org/wiki/Zip_%28file_format%29)只有一个条目序列，然后是一个全局目录（其中包含所有文件及其大小的表*）*。因此，如果无法访问该文件，您将无法获得该信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:29:00.663

> Inputstream 有一个方法 available() 来返回可以从此输入流中读取的字节数的估计值

*没有阻挡*。不是一回事。*Javadoc 中有一个关于不*将此值视为总文件大小的特定警告。

> 但我无法为 ZipInputStream 找到类似的方法。

这很奇怪，因为它就在那里。*然而，它返回零，这是它可以做出的最佳估计，可以在不阻塞*的情况下读取多少。

 *为什么？因为 (a) 它是一个流，并且 (ii) 它是一个压缩流。如果不阅读全部内容，就无法知道有多少。并且没有办法知道有多少内容可以在没有阻塞的情况下阅读，*

# jquery - jQuery在父元素内移动DOM元素

> ID：11098257
> 
> 赞同：6
> 
> 时间：2012-06-19T09:35:41.267
> 
> 标签：jquery, element

有没有一种简单的方法可以将元素移动到它自己的父元素中？

像这样...

从：

```
<div class="test">hello 1</div>
<div class="test">hello 2</div>
<div class="test">hello 3</div> 
```

到：

```
<div class="test">hello 1</div>
<div class="test">hello 3</div>
<div class="test">hello 2</div> 
```

将 div 向上或向下移动一步，或使用索引将 appendTo 附加到特定位置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T09:51:18.500

你应该能够使用[`.prev()`](http://api.jquery.com/prev/)并且[`.next()`](http://api.jquery.com/next/)喜欢这个（这里作为一个 jQuery 函数）：

```
$.fn.moveUp = function() {
    $.each(this, function() {
         $(this).after($(this).prev());   
    });
};
$.fn.moveDown = function() {
    $.each(this, function() {
         $(this).before($(this).next());   
    });
};
$("div:eq(2)").moveUp(); //Would move hello 3 up
$("div:eq(0)").moveDown(); //Would move hello 1 down 
```

[**JSFiddle 演示**](http://jsfiddle.net/h2ooooooo/HFtVJ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:39:05.153

尝试

```
$("div:eq(2)").after($("div:eq(0)")); 
```

或者

```
$("div:eq(2)").before($("div:eq(1)")) 
```

记住 :eq() 是从零开始的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T09:49:25.973

```
var child = $('#parent div'); // keep reference for further use
child.eq(2).insertBefore(child.eq(1)); 
```

**[演示](http://jsfiddle.net/AMNzJ/1/)**

# python - 我需要帮助迭代列表，通过函数

> ID：11098258
> 
> 赞同：1
> 
> 时间：2012-06-19T09:35:46.840
> 
> 标签：python, iteration

好的，我需要做的是遍历列表列表，并为每个列表解析结果，然后再从顶部开始迭代。尽管我尝试 python 的方式清楚地表明我不能按照我的方式去做。所以希望我展示这将有助于有人更好地教育我如何实现我的理论。

```
list = [['name','phone'],['name2','phone2']](AND SO FORTH)
templist = [] 
```

现在我正在尝试迭代“列表”，以便我可以创建一个临时列表（templist），以便我可以通过一个函数（对于每个临时列表）传递它的临时列表。

前任。templist[0],templist[1]...然后，一旦它通过函数，我会将 templist 重置为空，因为迭代从顶部返回到“列表”中的下一个列表。

这是一个样本

```
(insert iteration here):
    foofunction(templist[0],templist[1])
    templist = [] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:39:04.123

您可以遍历列表`mylist`并将项目（本身就是列表）立即传递给`foofunction`：

```
for item in mylist:
    foofunction(*item) 
```

该`*`运算符用于将列表解压缩为该函数的多个参数（更多信息可以在[文档](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)中找到）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T09:37:52.170

不要`list`用作变量名。我已将您的列表重命名为`biglist`：

```
biglist = [['name','phone'],['name2','phone2']]

for name, phone in biglist:
    foofunction(name, phone) 
```

相当于：

```
foofunction('name', 'phone')
foofunction('name2', 'phone2') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:45:14.300

```
for x in mylist:
   foofunction(*x) 
```

# php - 如何防止 CSRF 注入（特殊情况 - 两个域之间）

> ID：11098259
> 
> 赞同：0
> 
> 时间：2012-06-19T09:35:50.540
> 
> 标签：php, javascript, codeigniter, csrf

我有这样的情况。我们在子域 my.test.com 上开发了功能。我们在域 test.com 上有 javascript，它必须从 my.test.com 获取数据。

我通过 test.com 上的代理 php 文件实现了它（我知道 javascript 库跨域，但它很简单）。此文件连接到 my.test.com 并获取必要的信息。

但我认为这可能是 CSRF 注入。当我通过 AJAX 从 test.com 连接到 proxy.php 并接下来通过 php 连接到 test.com 时，如何正确防止 CSRF 注入。

my.test.com 上的 CSRF 保护已经实现。

# c# - TextureBrush 内存不足异常

> ID：11098263
> 
> 赞同：2
> 
> 时间：2012-06-19T09:36:14.070
> 
> 标签：c#, gdi+

我正在尝试在另一个图像上放置水印。这是我的代码：

```
var imgPhoto = Image.FromFile(filePath);
var grPhoto = Graphics.FromImage(imgPhoto);

var point = new Point(imgPhoto.Width - imgWatermark.Width, imgPhoto.Height - imgWatermark.Height);

var brWatermark = new TextureBrush(imgWatermark, new Rectangle(point.X, point.Y, imgWatermark.Width, imgWatermark.Height));

grPhoto.FillRectangle(brWatermark, new Rectangle(point, imgWatermark.Size));
imgPhoto.Save(outputFolder + @"\" + filename); 
```

但是，会出现一个问题，TextureBrush 会引发内存不足异常。我已经四处寻找，但我真的找不到一个好的解决方案。据我所见，在 TextureBrush 尝试完成其工作之前，什么都没有处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-01T22:58:17.097

`Image`此外，当从中加载的流已被释放时，可能会发生这种情况。如果您计划创建纹理画笔，请尽量避免处理图像流。例如，这将起作用：

```
var bytes = File.ReadAllBytes("image.bmp");
System.Windows.Controls.Image image = null;
using (var stream = System.IO.MemoryStream(bytes))
{
    image = System.Windows.Controls.Image.FromStream(stream);
    var brush = new System.Drawing.TextureBrush(image); // No issues
} 
```

但是在处理流的错误中做几乎相同的事情会产生异常。

```
var bytes = File.ReadAllBytes("image.bmp");
System.Windows.Controls.Image image = null;
using (var stream = System.IO.MemoryStream(bytes))
{
     image = System.Windows.Controls.Image.FromStream(stream); 
}
var brush = new System.Drawing.TextureBrush(image); // Exception Thrown! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T05:14:42.573

检查绑定区域的大小。在您的情况下，这将是**new Rectangle(point.X, point.Y, imgWatermark.Width, imgWatermark.Height)**。我遇到了同样的“内存不足”问题，原因是我的绑定区域大于我的纹理大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:39:08.837

`IDisposable`您应该将资源包装在[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句中，以确保尽快正确处理。也不要期望能够对`Image.FromFile`大于内存容量的文件执行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:40:05.380

我敢打赌，该文件`filePath`相当大。

`OutOfMemoryException`通常在您有 .NET 堆碎片时发生，因此您可能正在尝试加载一个大于运行时中任何可用内存块的文件。

尝试压缩您的图像文件，或者在可以接受的情况下将其裁剪以使其更小。

**编辑** 尝试在 MS Paint 或 Paint.NET 等图像编辑器中打开文件。然后重新保存。

如果这不起作用，试试这个（基本上确保你的矩形边界在水印图像内）： [http ://www.owenpellegrin.com/blog/net/out-of-memory-errors-with-gdi-texturebrush /](http://www.owenpellegrin.com/blog/net/out-of-memory-errors-with-gdi-texturebrush/)

# android - CustomDialog 异常中没有标题

> ID：11098264
> 
> 赞同：0
> 
> 时间：2012-06-19T09:36:14.793
> 
> 标签：android, dialog

我试图从方法中的`Dialog`with`requestWindowFeature((int) Window.FEATURE_NO_TITLE);`中删除标题`onCreate`，但它不起作用，因为它给出了异常：

```
06-19 09:35:00.319: E/AndroidRuntime(5071): android.util.AndroidRuntimeException: requestFeature() must be called before adding content 
```

我有`requestWindowFeature((int) Window.FEATURE_NO_TITLE);`之前的内容，如下所示：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature((int) Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.leesmeerdialog_layout);
        ...
} 
```

我也尝试过，但仍然没有运气

```
@Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
            requestWindowFeature((int) Window.FEATURE_NO_TITLE);
            setContentView(R.layout.leesmeerdialog_layout);
            ...
    } 
```

使用`show()`方法调用对话框时会弹出异常：

```
mLeesMeer.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                mDialog = new LeesMeerDialog(getActivity(), mDescription, new OnReadyListener());
                mDialog.show();
            }
        }); 
```

我已经在我的代码中的对话框中做到了这一点，从来没有遇到过问题，但我无法弄清楚这个问题，所以非常感谢任何帮助！

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:38:35.100

请检查此代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature((int) Window.FEATURE_NO_TITLE);
        setContentView(R.layout.leesmeerdialog_layout);
        ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:40:18.737

使用它来隐藏对话框中的标题。

```
 public void onCreate(Bundle savedInstanceState) {

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:44:45.847

可能是因为你在打电话

```
mDialog.setContentView(R.layout.customdialog_layout); 
```

当您尝试显示对话框时调用`mDialog.show();`
The`onCreate`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:07:45.777

修复了它调用`mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);`将`CustomDialog`要显示的位置：

```
mDialog = new CustomDialog(getActivity(), getResources().getString(R.string.ervaringen_post_msg), new OnReadyListener());
                mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                mDialog.setContentView(R.layout.customdialog_layout);
                mDialog.show(); 
```

# hibernate - 休眠：使用merge()时防止删除孤儿；

> ID：11098266
> 
> 赞同：0
> 
> 时间：2012-06-19T09:36:18.907
> 
> 标签：hibernate

我有一个对象列表

```
@ManyToMany(Fetch=FetchType.Lazy)
@JoinTable(...inverseJoin....)
public list<objects> getList() 
```

我可能不想在执行 dto.merge 时对其进行初始化。

Hibernate 会自动删除所有的关系，即使我没有指定 delete_orphan。

我可以知道如何防止休眠删除孤儿又名关系吗？

目前我必须在进行合并之前从数据库中检索/设置列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:44:49.920

该列表是实体状态的一部分，因为实体是关联的所有者。

因此，如果您合并一个在 bean 中没有任何内容的分离实体，您就是在告诉 Hibernate：这是该实体的新状态，它不再包含任何对象。所以很明显，Hibernate 删除了实体和之前包含在列表中的对象之间的关联。

我的猜测是您构造了一个新的实体实例并将其传递给`merge()`，而不是从会话中获取实体，对其进行修改，然后将此实例传递给 merge()：

而不是这样做：

```
SomeEntity e = new SomeEntity();
e.setId(34L);
e.setFoo("newFoo");
e = session.merge(e); 
```

你应该这样做：

```
SomeEntity e = session.get(SomeEntity.class, 34L);
e.setFoo("newFoo");
// if the entity is detached:
e = session.merge(e); 
```

请注意，您的问题与删除孤儿无关。删除孤儿意味着：如果我删除了父子实体之间的关联，那么子实体本身应该被自动删除。

# r - 为数据框中不存在的列返回 NA 或 NULL

> ID：11098267
> 
> 赞同：2
> 
> 时间：2012-06-19T09:36:19.940
> 
> 标签：r, dataframe

我正在寻找一种优雅的方式来返回列的值，如果它存在并且（一个向量）`NA`或者`NULL`如果它不存在。直接解决它会产生一个`undefined columns`错误，使用子集会产生一个 0 列数据框。有没有一种优雅的内置方式，没有定义一个函数来做到这一点？

```
> example(data.frame)
# output omitted
> head(d, 1)
  x y fac
1 1 1   A
> head(d['x'], 1)
  x
1 1

# Works when accessing column using $
> head(d$z, 1)
NULL
# Not satisfactory
> head(d['z'], 1)
Error in `[.data.frame`(d, "z") : undefined columns selected
> head(d[colnames(d) == 'z'], 1)
data frame with 0 columns and 1 rows 
```

**编辑**：当然，这条单线可以完成这项工作。我正在寻找更多的 R-ish 方式。

```
> safe.index <- function(df, n)
     if (any(n %in% colnames(df))) df[n] else rep(NA, nrow(df))
> head(safe.index(d, 'z'), 1)
[1] NA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:59:03.680

解决此问题的一种方法是在尝试子集之前测试`'z'`列名中是否存在：`d`

```
if('z' %in% names(d)){
  head(d['z'],1)
} else {
  NA
} 
```

另一种方法是使用`tryCatch`和条件处理：

```
# Actually, the following line defining e isn't really necessary.
# e <- simpleError("stopped")
safe.index <- function(df, n){
  tryCatch(df[n], error = function(e)return(rep(NA, nrow(df))))
}
head(safe.index(d, 'z'), 1)
# [1] NA

head(safe.index(d, 'x'), 1)
#   x
# 1 1 
```

一个潜在的缺点是，无论错误如何，上述解决方案`tryCatch`都会返回一个向量，而不仅仅是在不是列名的情况下。`NA``n`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:58:32.447

关于什么：

```
data <- data.frame(x = 1:2, y = 2:3, z = 3:4)
outCol <- function(df, name){
  unlist(ifelse(name %in% names(df),df[name],list(rep(NA,nrow(df)))))
}
outCol(data, 'x')
[1] 1 2
outCol(data, 'u')
[1] NA NA 
```

# exception - AuthenticationFailed Azure 表存储

> ID：11098268
> 
> 赞同：1
> 
> 时间：2012-06-19T09:36:26.107
> 
> 标签：exception, azure, azure-table-storage

访问数据时，我们从表存储中得到一个随机错误：

```
System.Data.Services.Client.DataServiceClientException: <?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
 <code>AuthenticationFailed</code>
 <message xml:lang="en-US">Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:67cd9503-7a10-48a9-8c97-fee3906ac8cb
Time:2012-06-19T08:20:42.0670051Z</message>
</error>
  at System.Data.Services.Client.QueryResult.Execute()
  at System.Data.Services.Client.DataServiceRequest.Execute[TElement](DataServiceContext context, QueryComponents queryComponents) 
```

以下是有关错误和我们的 Web 应用程序的一些事实：

*   我们有 5 个中型网络服务器托管我们的网站
*   在任何给定时间，我们的网站上都有 200-500 名访客。他们不断地点击。
*   每次点击都会从表存储中加载数据，也可以保存数据。
*   该错误每天仅发生 20-50 次。

令我困惑的是，与大量页面加载和 AJAX 回调相比，此错误很少发生。

这个错误的原因是什么？我们已经读到，如果服务器时间关闭，可能会出现时间戳问题，但为什么我们的实时服务器上的时间会出错，为什么错误不会不断发生呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:33:14.400

好的，我终于找到了导致我的问题的原因。我的 DataSource 类中有一个错误的静态和非静态内部变量组合：

```
private static CloudStorageAccount storageAccount;
private CharacterContext _context; 
```

由于 storageAccount 变量是静态的，因此在实例化 DataSource 对象时并发请求将竞争将其更改为不同的存储帐户：

```
public CharacterDataSource()
{
      storageAccount = CloudStorageAccount.FromConfigurationSetting(ServiceConfigurationHelper.GetTableStorageConnectionStringConfigKey(GameInstanceName));
      _context = new CharacterContext(storageAccount.TableEndpoint.AbsoluteUri, storageAccount.Credentials);
} 
```

由于这个小问题，_context 对象的实例化实际上可能在访问 storageAccount.TableEndpoint.AbsoluteUri 时使用一个存储帐户，而在访问 storageAccount.Credentials 时使用另一个。这导致了 AuthenticationFailed 错误。

storageAccount 变量绝对没有理由是静态的，因此解决方案只是删除此修饰符，从那时起我们就再也没有错误了。

我从 Microsoft 得到的提示是我们使用了错误的存储帐户凭据，我们无法在获得的堆栈跟踪中看到这一点。不知道微软的那个人在哪里找到了这些信息，但我很高兴我联系了他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:03:25.433

服务器时间关闭是此类问题的常见原因，但由于您的应用程序在 Azure 中运行并且不会发生太多，因此我将排除此问题。

就像您在问题中所说的那样，在任何给定时间，您的网站上都有 200 到 500 个用户。这意味着您将拥有数千个正常工作的事务，并且只有极少数的错误。我有两个建议：

1.  [致电 Microsoft](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)并向他们提供您的 RequestId 和时间，以便他们调查真正的原因。
2.  实施重试策略。你可能知道，Table Storage 已经自带了[重试策略](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.tableservicecontext.retrypolicy.aspx)。但在您的情况下，这还不够，因为此重试策略[不会重试](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/03/overview-of-retry-policies-in-the-windows-azure-storage-client-library.aspx)403（和所有其他 400）错误代码。这就是您可以考虑构建[自定义重试策略](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/03/overview-of-retry-policies-in-the-windows-azure-storage-client-library.aspx)的原因。人们可能不同意，但我认为这类问题是暂时性故障，因为它可能随机发生在您所有交易的 < 0.5% 上。在那种情况下，我会使用重试策略来处理它。

# php - 对已经分组的查询结果进行分组（Codeigniter）

> ID：11098269
> 
> 赞同：1
> 
> 时间：2012-06-19T09:36:26.973
> 
> 标签：php, mysql, codeigniter

好的，所以基本上我想要做的是返回一组从同一个表的同一个查询中分组两次的结果。

我有三列：“类型”、“金额”和“日期”。

我需要做的是对整个金额表求和，然后按日期分组，然后按类型再次分组：我想要每个日期的金额总和，按类型分组。

我的查询如下：

```
$this->db->select("*, DATE_FORMAT(date, '%d/%m') as date_formatted", FALSE)->select_sum('total')->from('accounts')->group_by('date');
$query = $this->db->get();
return $query->result_array(); 
```

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:38:57.043

在纯 SQL 中，它看起来像：

```
SELECT date, type, SUM(amount) as TOTAL
FROM accounts
GROUP BY date, type; 
```

我想用 PHP 重写它可能很接近:)

# matlab - 多个（超过 2 个）数的最大公约数

> ID：11098274
> 
> 赞同：10
> 
> 时间：2012-06-19T09:36:54.133
> 
> 标签：matlab, math

我正在寻找最简单的解决方案来获得多个值的最大公约数。就像是：

```
x=gcd_array(30,40,35) % Should return 5
x=gcd_array(30,40) % Should return 10 
```

你会如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T09:48:47.143

```
gcd(a,b,c) = gcd(a,gcd(b,c)) 
```

这意味着您可以使用递归。

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.73.3&rep=rep1&type=pdf&ei=90jgT9KPAtLS4QSNlOGdDQ&usg=AFQjCNGH_GewFofxWPfX2BDN6T5NF9PxAA](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.73.3&rep=rep1&type=pdf&ei=90jgT9KPAtLS4QSNlOGdDQ&usg=AFQjCNGH_GewFofxWPfX2BDN6T5NF9PxAA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T20:24:16.217

```
 `% GCD OF list of Nos using Eucledian Alogorithm 
  function GCD= GCD(n);
  x=1;
  p=n;
  while(size(n,2))>=2
  p= n(:,size(n,2)-1:size(n,2));
  n=n(1,1:size(n,2)-2);
  x=1;
  while(x~=0)
  x= max(p)-min(p);
  p = [x,min(p)];
  end    
  n=[n,max(p)];
  p= [];
  end
  ' 
```

# html - 使用 HTML 和 Javascript 在 Metro App 中创建 2 个 ListView

> ID：11098276
> 
> 赞同：2
> 
> 时间：2012-06-19T09:37:01.520
> 
> 标签：html, microsoft-metro, visual-studio-2012, winjs

我试图在一个 html 文件中创建 2 个具有不同信息的列表视图。但是，如果我修改一个列表视图，它也会影响其他列表视图。但是我需要维护 2 个具有不同服务信息的列表视图？我正在使用 Visual-studio-2012RC 和 windows8。任何工作示例都对我很有帮助。

这是我的 HTML：

```
<div class="headerTemplate" data-win-control="WinJS.Binding.Template">
    <p class="group-title win-type-x-large" data-win-bind="textContent: title; groupKey: key" 
        onclick="WinJS.Navigation.navigate('/pages/groupDetail/groupDetail.html', { groupKey: event.srcElement.groupKey })" role="link"></p>
</div>
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <img class="item-image" src="#" data-win-bind="src: backgroundImage" style="-ms-grid-column-span: 1;"/>
    <div class="item-overlay">
        <h5 class="item-title" data-win-bind="textContent: title"></h5>
        <h4 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h4>
        <h6 class="group-content" data-win-bind="textContent:content" style="margin-left: 2px; margin-right: -13.5px; -ms-grid-row-span: 2; -ms-grid-row:4;" ></h6>
       </div>
</div>

<!-- The content that will be loaded and displayed. -->
<div class="fragment groupeditemspage">
    <header aria-label="Header content" role="banner">
        <button class="win-backbutton" aria-label="Back" disabled></button>
        <h1 class="titlearea win-type-ellipsis">
            <span class="pagetitle">DealFoundry</span>
        </h1>
    </header>
    <section aria-label="Main content" role="main">
        <div class="groupeditemslist" aria-label="List of groups" data-win-control="WinJS.UI.ListView" data-win-options="{selectionmode:'all'}" style="left: 1.5px; top: -1.5px;"></div>
    </section>
    </div> 
```

这是我的 javascript 文件（data.js）：

```
 (function () {
    "use strict";

    var groupDescription = "Group Description: Lorem ipsum dolor sit amet, ";
    var itemDescription = "Item Description:This is the Item Description";
    var content1 = "Task assigned to James";
    // backgroundImage property in your real data to be URLs to images.
    var lightGray = "ms-appx:///images/microsoft-logo.png";
    // Each of these sample groups must have a unique key to be displayed
    // separately.
    var sampleGroups = [
        { key: "group1", title: "Group-1", subtitle: "Tasks", backgroundImage: darkGray, description: groupDescription },
        { key: "group2", title: "Group-2", subtitle: "Today Deals",backgroundImage: darkGray, description: groupDescription}
          ];

    // Each of these sample items should have a reference to a particular
    // group.
    var sampleItems = [
        { group: sampleGroups[0], title: "John Smith", subtitle: "LesliHart (QR-2157DEF)", description: itemDescription,  backgroundImage: lightGray,content:"Application has been re-assigned"},
        { group: sampleGroups[0], title: "Anna J Fox", subtitle: "Samn Snooker (QNB-1256ABC)", description: itemDescription,  backgroundImage: darkGray,content:"Application rejected"},
        { group: sampleGroups[0], title: "Masson Greeves", subtitle: "Jhonty Rodes (ARN-7854AD)", description: itemDescription,  backgroundImage: mediumGray,content:"Application accepted"},
        { group: sampleGroups[0], title: "Peter Dormain", subtitle: "Glen McGrath (HCL-4567ADE)", description: itemDescription,  backgroundImage: msGray,content:"Application has been re-assigned as the UW is not available for next 2 weeks" },
       { group: sampleGroups[1], title: "Jenni Scott", subtitle: "Jhonty Rodes (ARN-7854AD)", description: itemDescription , content: "Status:Application has been re-assigned as the UW is not available for next 2 weeks" },
       { group: sampleGroups[1], title: "John Smith", subtitle: "James Gosling (IBM - 8569PNM)", description: itemDescription, content: "Status:Application accepted" },
    // Get a reference for an item, using the group key and item title as a
    // unique reference to the item that can be easily serialized.
    function getItemReference(item) {
        return [item.group.key, item.title];

    }

    function resolveGroupReference(key) {
        for (var i = 0; i < groupedItems.groups.length; i++) {
            if (groupedItems.groups.getAt(i).key === key) {
                return groupedItems.groups.getAt(i);
            }
        }
    }

    function resolveItemReference(reference) {
        for (var i = 0; i < groupedItems.length; i++) {
            var item = groupedItems.getAt(i);
            if (item.group.key === reference[0] && item.title === reference[1]) {
                return item;
            }
        }
    }

    // This function returns a WinJS.Binding.List containing only the items
    // that belong to the provided group.
    function getItemsFromGroup(group) {
        return list.createFiltered(function (item) { return item.group.key === group.key; });
    }

    var list = new WinJS.Binding.List();
    var groupedItems = list.createGrouped(
        function groupKeySelector(item) { return item.group.key; },
        function groupDataSelector(item) { return item.group; }
    );

    // TODO: Replace the data with your real data.
    // You can add data from asynchronous sources whenever it becomes available.
    sampleItems.forEach(function (item) {
        list.push(item);

    });

    WinJS.Namespace.define("Data", {
        items: groupedItems,
        groups: groupedItems.groups,
        getItemsFromGroup: getItemsFromGroup,
        getItemReference: getItemReference,
        resolveGroupReference: resolveGroupReference,
        resolveItemReference: resolveItemReference

    });

})(); 
```

在这里我尝试给你我的应用程序，如果我在我的第二组中删除图像，它也会影响第 1 组。但是我需要为第 1 组设置图像并且为第 2 组设置不需要图像？我应该怎么做为我的场景做些什么？提前谢谢你。

# r - 将系统命令的输出存储到 r 中的变量中

> ID：11098277
> 
> 赞同：66
> 
> 时间：2012-06-19T09:37:05.477
> 
> 标签：r, variables, system

我在 R 中执行以下命令：

```
system("ls ") 
```

我需要将上述命令的输出存储在某个 R 变量中。有没有办法做同样的事情？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-06-19T09:39:42.403

使用`intern=TRUE`：

```
a <- system("ls ", intern = TRUE) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T09:53:15.053

为什么不使用相应的 R 函数？

```
a <- list.files()
b <- list.files(recursive = TRUE) 
```

更多细节

```
?list.files 
```

# java - Intent.FLAG_ACTIVITY_CLEAR_TASK 的替代方案

> ID：11098279
> 
> 赞同：34
> 
> 时间：2012-06-19T09:37:17.947
> 
> 标签：java, android, android-intent

我有两个应用程序 App-B 启动 App-A。如果用户从 App-A 内部的 App AI 调用中启动 App B，那么我没有问题。

如果用户从应用程序抽屉或长按主页按钮直接进入应用程序 B，那么我将执行以下操作，在应用所有附加功能之前先清除应用程序 A 中的任务。这具有预期的效果，但仅适用于 API 11。在较低的 API 上，APP-A 中的新任务不会改变，额外的 putExtra 将无效。有什么替代方法`FLAG_ACTIVITY_CLEAR_TASK`吗？对于 API <=10？

```
 Intent i = new Intent("com.App-A");
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

谢谢

杰森

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-06T18:53:06.883

新的[IntentCompat](http://developer.android.com/reference/android/support/v4/content/IntentCompat.html#FLAG_ACTIVITY_CLEAR_TASK)应该对此有所帮助，但显然低于 11 的 API 会忽略该标志。

要使用 IntentCompat，请执行以下操作：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
IntentCompat.FLAG_ACTIVITY_CLEAR_TASK); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:04:13.753

这将正常工作

```
i.addFlag(Intent.FLAG_ACTIVITY_NO_HISTORY | 
               Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:11:08.137

我可能无法理解您在问什么，但是当您启动 B 时，您是否希望 A 被杀死？

在 A 中，将其添加到清单中的活动标记中：

```
android:noHistory=true 
```

这将导致活动在失去焦点后立即从内存中删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-29T00:23:26.617

我为这些 Intent 标志找到的最佳文档在这里：[http ://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)

我不明白您要做什么，但是您尝试过`FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:43:39.457

我仍然很难理解这个问题，但想帮助你解决它。由于评论只允许 600 个字符并且格式不正确，因此我将创建一个答案，因为我确信我们可以一起解决这个问题。

我希望能够重现您的问题。为此，我创建了 2 个应用程序：**AppA**和**AppB**。AppA 有一个名为的活动`ActivityA`，而 AppB 有一个名为 的活动`ActivityB`。两者`ActivityA`并`ActivityB`使用`android:launchMode="singleTask"`.

`ActivityA`上面有一个按钮，可以启动 AppB 并完成，如下所示：

```
 Intent intent = new Intent("de.sharpmind.example.AppB");
    intent.putExtra("extra", "launched from AppA");
    startActivity(intent);
    finish(); 
```

`ActivityB`上面有一个按钮，可以像这样启动 AppA：

```
 Intent intent = new Intent("de.sharpmind.example.AppA");
    intent.putExtra("extra", "launched from AppB");
    startActivity(intent); 
```

这一切都按我的预期工作。AppA 和 AppB 在不同的任务中运行。`onCreate()`在每个应用程序的方法中正确地看到了“额外” 。

所以，你能告诉我更多关于你的问题吗？我怎样才能准确地重现您的问题？你写了：

> 在较低的 API 上，APP-A 中的新任务不会改变，额外的 putExtra 将不起作用。

你是什​​么意思？你在哪里放置额外的东西，你从哪里得到它们，你期望发生什么？

另外，你的是`launchMode`什么`AppB`？

此外，当您遇到此问题时，AppA 的任务堆栈中是否还有其他活动？

请在您的原始问题或此处作为评论提供更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T01:00:46.710

使用`FLAG_ACTIVITY_CLEAR_TASK`清除后台堆栈。如果我理解正确，这就是你想要的行为。

在你的清单中使用`singleInstance`而不是会做到这一点。`singleTask`

在评论中你说它必须是`singleTask`。我假设这是因为您在某些情况下需要后台堆栈。

由于`launchMode`无法以编程方式更改并且`FLAG_ACTIVITY_CLEAR_TASK`不适用于 API <=10，因此您可能必须创建两个相同的活动。

一个与`launchMode=singleTask`一个与`launchMode=singleInstance`。

从应用程序抽屉启动时，将其添加到使用`singleInstance`以获得清晰的堆栈：

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

# python - “pip install --upgrade 分发”错误

> ID：11098280
> 
> 赞同：5
> 
> 时间：2012-06-19T09:37:19.140
> 
> 标签：python, pip, homebrew, easy-install

通过自制软件安装python，如下所示：

```
brew install python --universal --framework 
```

按照[https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)上的说明安装 pip 并升级分发。pip install 似乎很顺利，但是每当我尝试使用 pip 来升级分发或安装 virtualenv 时

```
pip install --upgrade distribute 
```

或者

```
pip install virtualenv 
```

我收到以下错误：

> 回溯（最后一次调用）：文件“/usr/local/bin/pip”，第 5 行，从 pkg_resources 导入 load_entry_point 文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python /pkg_resources.py”，第 2603 行，在 working_set.require（**需要**）文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py”，第 666 行，需要= self.resolve(parse_requirements(requirements)) 文件“/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py”，第 565 行，在解决中提高 DistributionNotFound(req) # XXX在此处放置更多信息 pkg_resources.DistributionNotFound: pip==1.0.2

对python不够精通，不知道这里发生了什么，所以如果有人知道如何纠正这个问题，将不胜感激。

我的 $PATH 看起来像这样：

> /Users/wg/.rvm/gems/ruby-1.9.3-p125@rails3_2/bin:/Users/wg/.rvm/gems/ruby-1.9.3-p125@global/bin:/Users/wg/。 rvm/rubies/ruby-1.9.3-p125/bin:/Users/wg/.rvm/bin:/usr/local/bin:/usr/local/share/python:/usr/bin:/bin:/usr /sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin

...当我运行时，`which pip`我得到`/usr/local/bin/pip`了（不确定这是否是问题，如果是，如何让它使用正确版本的 pip）。

编辑：

想要包括我正在运行 Lion OS 10.7 并安装了最新版本的 XCode 和命令实用程序。另外，不知道这是否有帮助，但我想我也会包括运行“which easy_install”的结果......返回：

> /usr/local/share/python/easy_install

不确定这是否也可能相关。

* * *

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-24T19:07:08.887

我练习，我发现跑步

```
pip install --upgrade setuptools 
```

前

```
pip install --upgrade distribute
pip install --upgrade pip 
```

运行时解决了我的问题`pip install --upgrade distribute`。

# jquery - 将事件添加到 scrollTo 插件以用于滚动键盘导航

> ID：11098283
> 
> 赞同：2
> 
> 时间：2012-06-19T09:37:25.480
> 
> 标签：jquery, jquery-plugins, keyboard, navigation, scroll

我正在尝试将键盘导航添加到网站设计中，并且我一直在关注[Remy Sharp 的添加键盘导航教程，](http://jqueryfordesigners.com/adding-keyboard-navigation/)但我似乎无法使其适应我的需求。

我想将此代码添加到 scrollTo 插件，以便当用户单击向上或向下键时，页面将滚动到下一个或上一个部分。

这是 Remy 的代码：

```
$(window).keyup(function (event) { 

            if(event.keyCode == 40) { //down key
            $('#nav-bar #nav li.current').parent().prev().find('a').click();    
            } else if (event.keyCode == 38) { //up key
              $('#nav-bar #nav li.current').parent().next().find('a').click()
            }
        }); 
```

我已经针对我的 HTML 标记对其进行了调整，并且我将使用向上和向下箭头键，就像他向左和向右一样，但除此之外，它与他的几乎相同。在他的版本中，他将它添加到一个名为 codaSlider 的插件中，我想知道是否可以将它添加到我拥有的[scrollTo 插件](http://demos.flesler.com/jquery/scrollTo/)中，是否有人对如何做到这一点有任何想法？

这是他完成的代码：

```
$(document).ready(function () {
  $('#coda-slider-1').codaSlider();

  $('body').keyup(function (event) {
    var direction = null;

    // handle cursor keys
    if (event.keyCode == 37) {
      // slide left
      direction = 'prev';
    } else if (event.keyCode == 39) {
      // slide right
      direction = 'next';
    }

    if (direction != null) {
      $('ul a.current').parent()[direction]().find('a').click();
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:56:32.680

不确定您真正想要做什么，但这里有一个使用 keyboardJS 和 scrollTo jquery 插件的示例：

[http://jsfiddle.net/Raildecom/TwJAM/](http://jsfiddle.net/Raildecom/TwJAM/)

告诉我它是否符合您的需求！

**编辑 ：**

这是一个带有节流功能的新版本：http: [//jsfiddle.net/Raildecom/TwJAM/4/](http://jsfiddle.net/Raildecom/TwJAM/4/)

您可以调整两个参数：

```
//Handle keyDown events throttling
//Will execute one event every 2sec when the user hold the key
var throttleKeyDown = 2000;

//Handle KeyUp events throttling
//Will wait 0.3sec after the user release the key to avoid "double click" effect
var throttleKeyUp = 300;

//Parent node. Doesn't have to be ul
var node = $('ul'); 
```

# email - 使用亚马逊 SES 发送带附件的电子邮件

> ID：11098285
> 
> 赞同：5
> 
> 时间：2012-06-19T09:37:32.950
> 
> 标签：email, symfony, amazon-web-services

我正在尝试使用亚马逊 SES API 发送一封包含附件（pdf 文件）的电子邮件。

我正在使用 Symfony2，所以我将 AmazonWebServiceBundle 包含在我的项目中。我可以使用以下代码轻松发送一封简单的电子邮件（没有附件）：

```
$ses = $this->container->get('aws_ses');
$recip = array("ToAddresses"=>array("Quilly@yourownpoet.com"));
$message = array("Subject.Data"=>"My Subject","Body.Text.Data"=>"My Mail body");
$result = $ses->send_email("Quilly@yourownpoet.com",$recip, $message); 
```

不幸的是，要发送带有附件的电子邮件，我需要使用[sendRawEmail](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonSES/send_raw_email)函数而不是 send_email 函数。

我无法找到如何使用此功能，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-06T21:09:24.047

是的，使用 SES 发送带有附件的电子邮件很痛苦。也许这会帮助仍在为此苦苦挣扎的其他人。我编写了一个简单的类来帮助简化对 sendRawEmail 的调用。

用法：

```
$subject_str = "Some Subject";
$body_str = "<strong>Some email body</strong>";
$attachment_str = file_get_contents("/htdocs/test/sample.pdf");

//send the email
$result = SESUtils::deliver_mail_with_attachment(
    array('email1@gmail.com', 'email2@lutz-engr.com'),       
    $subject_str, $body_str, 'sender@verifiedbyaws', 
    $attachment_str);

//now handle the $result if you wish 
```

班级：

```
<?php
require 'AWSSDKforPHP/aws.phar';
use Aws\Ses\SesClient;

/**
 * SESUtils is a tool to make it easier to work with Amazon Simple Email Service
 * Features:
 * A client to prepare emails for use with sending attachments or not
 * 
 * There is no warranty - use this code at your own risk.  
 * @author sbossen 
 * http://right-handed-monkey.blogspot.com
 */
class SESUtils {

    const version = "1.0";
    const AWS_KEY = "your_aws_key";
    const AWS_SEC = "your_aws_secret";
    const AWS_REGION = "us-east-1";
    const BOUNCER = "bouncer@yourdomain.com";  //if used, this also needs to be a verified email
    const LINEBR = "\n";
    const MAX_ATTACHMENT_NAME_LEN = 60;

    /**
     * Usage
     * $result = SESUtils::deliver_mail_with_attachment(array('receipt@r.com', 'receipt2@b.com'), $subject_str, $body_str, 'validatedsender@aws', $attachment_str);
     * use $result->success to check if it was successful
     * use $result->message_id to check later with Amazon for further processing
     * use $result->result_text to look for error text if the task was not successful
     * 
     * @param type $to - individual address or array of email addresses
     * @param type $subject - UTF-8 text for the subject line
     * @param type $body - Text for the email
     * @param type $from - email address of the sender (Note: must be validated with AWS as a sender)
     * @return \ResultHelper
     */
    public static function deliver_mail_with_attachment($to, $subject, $body, $from, &$attachment = "", $attachment_name = "doc.pdf", $attachment_type = "Application/pdf", $is_file = false, $encoding = "base64", $file_arr = null) {
        $result = new ResultHelper();
        //get the client ready
        $client = SesClient::factory(array(
                    'key' => self::AWS_KEY,
                    'secret' => self::AWS_SEC,
                    'region' => self::AWS_REGION
        ));
        //build the message
        if (is_array($to)) {
            $to_str = rtrim(implode(',', $to), ',');
        } else {
            $to_str = $to;
        }
        $msg = "To: $to_str".self::LINEBR;
        $msg .="From: $from".self::LINEBR;
        //in case you have funny characters in the subject
        $subject = mb_encode_mimeheader($subject, 'UTF-8');
        $msg .="Subject: $subject".self::LINEBR;
        $msg .="MIME-Version: 1.0".self::LINEBR;
        $msg .="Content-Type: multipart/alternative;".self::LINEBR;
        $boundary = uniqid("_Part_".time(), true); //random unique string
        $msg .=" boundary=\"$boundary\"".self::LINEBR;
        $msg .=self::LINEBR;
        //now the actual message
        $msg .="--$boundary".self::LINEBR;
        //first, the plain text
        $msg .="Content-Type: text/plain; charset=utf-8".self::LINEBR;
        $msg .="Content-Transfer-Encoding: 7bit".self::LINEBR;
        $msg .=self::LINEBR;
        $msg .=strip_tags($body);
        $msg .=self::LINEBR;
        //now, the html text
        $msg .="--$boundary".self::LINEBR;
        $msg .="Content-Type: text/html; charset=utf-8".self::LINEBR;
        $msg .="Content-Transfer-Encoding: 7bit".self::LINEBR;
        $msg .=self::LINEBR;
        $msg .=$body;
        $msg .=self::LINEBR;
        //add attachments
        if (!empty($attachment)) {
            $msg .="--$boundary".self::LINEBR;
            $msg .="Content-Transfer-Encoding: base64".self::LINEBR;
            $clean_filename = mb_substr($attachment_name, 0, self::MAX_ATTACHMENT_NAME_LEN);
            $msg .="Content-Type: $attachment_type; name=$clean_filename;".self::LINEBR;
            $msg .="Content-Disposition: attachment; filename=$clean_filename;".self::LINEBR;
            $msg .=self::LINEBR;
            $msg .=base64_encode($attachment);
            //only put this mark on the last entry
            if (!empty($file_arr))
                $msg .="==".self::LINEBR;
            $msg .="--$boundary";
        }
        if (!empty($file_arr) && is_array($file_arr)) {
            foreach ($file_arr as $file) {
                $msg .="Content-Transfer-Encoding: base64".self::LINEBR;
                $clean_filename = mb_substr($attachment_name, 0, self::MAX_ATTACHMENT_NAME_LEN);
                $msg .="Content-Type: application/octet-stream; name=$clean_filename;".self::LINEBR;
                $msg .="Content-Disposition: attachment; filename=$clean_filename;".self::LINEBR;
                $msg .=self::LINEBR;
                $msg .=base64_encode($attachment);
                //only put this mark on the last entry
                if (!empty($file_arr))
                    $msg .="==".self::LINEBR;
                $msg .="--$boundary";
            }
        }
        //close email
        $msg .="--".self::LINEBR;

        //now send the email out
        try {
            $ses_result = $client->sendRawEmail(array(
                'RawMessage' => array('Data' => base64_encode($msg))), array('Source' => $from, 'Destinations' => $to_str));
            if ($ses_result) {
                $result->message_id = $ses_result->get('MessageId');
            } else {
                $result->success = false;
                $result->result_text = "Amazon SES did not return a MessageId";
            }
        } catch (Exception $e) {
            $result->success = false;
            $result->result_text = $e->getMessage()." - To: $to_str, Sender: $from, Subject: $subject";
        }
        return $result;
    }

}

class ResultHelper {

    public $success = true;
    public $result_text = "";
    public $message_id = "";

}

?> 
```

我写了一篇博客文章来解决这个问题，也许它会对你或其他人有用：[http ://righthandedmonkey.com/2013/06/how-to-use-amazon-ses-to-send-email-php .html](http://righthandedmonkey.com/2013/06/how-to-use-amazon-ses-to-send-email-php.html "如何使用 Amazon SES 发送电子邮件")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-20T11:02:39.363

我设法以以下方式创建原始 MIME 消息，以使用 Amazon SES sendRawEmail 发送带有附件（.pdf 文件）的电子邮件。这是为了普通的 javascript 使用；当然也可以进一步完善它，添加其他内容类型。

1.  使用 jsPDF 和 html2Canvas 之类的库来创建 PDF 文件并将内容保存到变量中并获取 base 64 数据：

    ```
    var pdfOutput = pdf.output();
    var myBase64Data = btoa(pdfOutput); 
    ```

2.  使用以下代码创建 MIME 消息。请注意，顺序很重要，否则电子邮件将最终成为暴露所有 base 64 数据的文本电子邮件：

    ```
    var fileName = "Attachment.pdf";
    var rawMailBody = "From: testmail@gmail.com\nTo: testmail@gmail.com\n";
    rawMailBody = rawMailBody + "Subject: Test Subject\n"; 
    rawMailBody = rawMailBody + "MIME-Version: 1.0\n"; 
    rawMailBody = rawMailBody + "Content-Type: multipart/mixed; boundary=\"NextPart\"\n\n"; 
    rawMailBody = rawMailBody + "--NextPart\n";  
    rawMailBody = rawMailBody + "Content-Type: application/octet-stream\n"; 
    rawMailBody = rawMailBody + "Content-Transfer-Encoding: base64\n"; 
    rawMailBody = rawMailBody + "Content-Disposition: attachment; filename=\"" + fileName + "\"\n\n"; 
    rawMailBody = rawMailBody + "Content-ID random2384928347923784letters\n"; 
    rawMailBody = rawMailBody + myBase64Data+"\n\n"; 
    rawMailBody = rawMailBody + "--NextPart\n"; 
    ```

3.  调用 sendRawEmail：

    ```
     var params = {
          RawMessage: {
            Data: rawMailBody
          },
          Destinations: [],
          Source: 'testmail@gmail.com'
        };

     ses.sendRawEmail(params, function(err, data) {
       if (err) alert("Error: "+err); // an error occurred
       else     {

       alert("Success: "+data);           // successful response
       }

     }); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T20:20:04.180

手动构建电子邮件，正如您清楚地表达的那样“太痛苦了”，维护自己的服务器只是为了发送电子邮件。这就是为什么我建议使用库来处理创建电子邮件的原因。

例如，[Swift 邮件程序](https://github.com/swiftmailer/swiftmailer)有一个名为[Swift_Message](https://github.com/swiftmailer/swiftmailer/blob/master/lib/classes/Swift/Message.php)的类，可用于创建电子邮件消息并[包含附件](https://swiftmailer.symfony.com/docs/messages.html#attaching-files)。

以下示例直接取自[文档](https://swiftmailer.symfony.com/docs/messages.html#creating-messages)：

```
$message = (new Swift_Message())
  ->setSubject('Your subject')
  ->setFrom(['john@doe.com' => 'John Doe'])
  ->setTo(['receiver@domain.org', 'other@domain.org' => 'A name'])
  ->setBody('Here is the message itself')
  ->addPart('<q>Here is the message itself</q>', 'text/html')
  ->attach(Swift_Attachment::fromPath('my-document.pdf')) 
```

然后只需调用`toString`消息的方法并将其设置为`RawMessage`

```
$result = $client->sendRawEmail([
    'RawMessage' => [
        'Data' => $message.toString()
    ]
]); 
```

或者，您可以设置 symfony + swift mailer 以使用 SES SMTP 端点，有关更多信息，请参阅[symfony 文档](https://symfony.com/doc/current/email.html#using-cloud-services-to-send-emails)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T02:59:29.280

经过多次尝试，我得出的结论是，直接从代码向 Amazon SES 发送电子邮件太痛苦了。

所以我没有更改代码中的任何内容，而是配置了我的 postfix 服务器。

我遵循了这个过程：[http](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTAs.Postfix.html) ://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SMTP.MTA.Postfix.html并使用 STARTTLS 配置了集成。

我不得不在 Amazon 控制台中询问 SMTP 凭证。

现在它工作正常，电子邮件通过 Amazon SES 正确发送。

# oracle - unixODBC/Oracle：如何仅在连接字符串中指定所有数据源信息，而不是在 odbc*.ini 文件中

> ID：11098289
> 
> 赞同：6
> 
> 时间：2012-06-19T09:37:45.160
> 
> 标签：oracle, unixodbc

我想使用`unixODBC`. 我希望连接字符串仅指定所有数据库/数据源信息，并且 ODBC INI 文件（`/etc/odbc.ini`和`/etc/odbcinst.ini`）仅包含通用驱动程序信息，例如在哪里可以找到“.so”等。即我希望它们是静态的。我想这样做，以便我可以从外部获取用户的连接字符串，并连接到数据源，而无需修改任何 INI 文件或任何其他磁盘配置。

我看到的所有示例都让我`/etc/odbc.ini`这样定义服务器信息：

```
[myDSNname]
Driver = OracleODBC-11g
DSN = OracleODBC-11g
ServerName = //xxx.xxx.xxx.xxx:1521/SID_NAME
UserID = my_user
Password = my_pass 
```

现在，我想出了如何通过添加`"UID=my_user;PWD=my_pass"`到连接字符串中将用户 ID 和密码取出到连接字符串中，并将它们从`odbc.ini`. 当我也找不到`ServerName`出入`odbc.ini`连接字符串的方法时，我的喜悦很快就过去了。那么我该怎么做呢？有没有办法完全摆脱 DSN，`odbc.ini`只在连接字符串中使用`Driver`from `odbcinst.ini`，就像我们对 MySQL 所做的那样？

**编辑：** 尝试来自[www.connectionstrings.com](http://www.connectionstrings.com)的任何似乎不需要 TNS 或 DSN的连接字符串，包括`EZCONNECT`变体，都给我：

```
[HY000] [unixODBC][Oracle][ODBC][Ora]ORA-12162: TNS:net service name is incorrectly specified
    (12162) (SQLDriverConnectW) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-11T05:38:56.920

只需使用 Dbq=address:1521/orcl ，你会得到你想要的

# c# - 将数据从 XML 复制到新文件中

> ID：11098290
> 
> 赞同：0
> 
> 时间：2012-06-19T09:37:44.967
> 
> 标签：c#, xml

我有一个 XML 文件，其中包含超过 50 000 条记录（未来可能有多达 500 000 条记录）。每个记录有 3 个级别 - 主要级别（用于区分记录）、通用数据级别（标签包含定义每个记录的属性）和第三级包含特定于每个记录的数据（主要作为属性，但有时作为内部文本）。我的任务是将这个文件“分解”成多个较小的文件。第三层有一个属性，它决定了整个记录属于哪个组。

算法应该是这样的：

对于文件中的每条记录：

*   读取包含确定记录所属组所需信息的属性（这很容易，我解决了这部分）
*   将整个记录（每个级别的每个字母）复制到适当的文件中

所以我的问题是将数据复制到新文件中最简单（也是最有效的方法）是什么？请记住，我需要复制整个记录，而不仅仅是一些特定数据。我正在使用 VS 2010 在 C# 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:42:31.753

您可以使用 a[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)来遍历源文件的节点，一旦遇到满足您要求的节点，只需读取它并复制到新文件（`InnerXml`当前节点的属性将为您提供可以存储的整个字符串表示到一个新文件）。

顺便说一句，如果您希望您的 XML 增长到数百万条记录的大小，我建议您提前预测这种增长并切换到更适合处理此类数据量的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:49:30.737

最有效的方法（关于性能）是拥有一个`XmlReader`实例，通过你的大文件。由于您有多个可能是目标的组，因此您应该有多个实例`XmlWriter`，您可以按需创建这些实例并将其存储在由“组键”索引的字典中，以供下一次迭代使用。

使用`XmlReader`并且`XmlWriter`您避免将整个文件加载到内存中。

要跟踪您经历的嵌套级别，您可以使用 a `Stack`，在向内导航时推送项目并在向外导航时弹出项目，或者只是方法中的局部变量。

完成后不要忘记关闭`Stream`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:53:03.103

通过`System.Xml`您可以执行操作。创建`List<XmlElement>`并覆盖每个级别的三个级别。

```
 XmlDocument doc = new XmlDocument();
      doc.Load("Test.xml");
      XmlElement root = doc.DocumentElement;
    //Preform your read and write operation here
     doc.Save("Test.xml"); 
```

# javascript - 网络工作者支持

> ID：11098293
> 
> 赞同：3
> 
> 时间：2012-06-19T09:37:52.360
> 
> 标签：javascript, web-worker

网络工作者是否支持？

1.  XMLHttpRequest 和回调
2.  上传文件
3.  网络套接字

我在不同的网站上发现了非常令人困惑的答案。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:32:27.477

如有疑问，请进行测试。我的 Chromium 版本建议答案是：

*   [XMLHttpRequest](https://developer.mozilla.org/en/xmlhttprequest)：是的
*   [文件上传](https://developer.mozilla.org/en/Using_files_from_web_applications)：是
*   [网络套接字](https://developer.mozilla.org/en/WebSockets)：是的

来源[在这里](http://jsfiddle.net/taylorbuley/Rtmct/)和下面。

* * *

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Embedded Web Worker Test</title>
<script type="text/js-worker">
  var xmlhttp = 'XMLHttpRequest: ' + ( ( 'function' === typeof XMLHttpRequest ) ? ' YES' : ' NO' )
  var file_reader = 'FileReader: ' + ( ( 'function' === typeof FileReader ) ? ' YES' : ' NO' )
  var websockets = 'Websockets: ' + ( ( 'function' === typeof WebSocket ) ? ' YES' : ' NO' )    
    var myVar = "Test results: " + xmlhttp + ", " + file_reader + ", " + websockets;
</script>
<script type="text/javascript">
  function log_worker_msg(worker_msg) {
    var frag = document.createDocumentFragment();
    frag.appendChild(document.createTextNode(worker_msg));
    document.querySelector("#worker_log").appendChild(frag);
  }
</script>
<script type="text/js-worker">
  self.onmessage = function (oEvent) {
    self.postMessage(myVar);
  };
</script>
<script type="text/javascript">

  var oBuilder = new WebKitBlobBuilder() || new MozBlobBuilder();
  Array.prototype.forEach.call(document.querySelectorAll("script[type=\"text\/js-worker\"]"), function (oScript) { oBuilder.append(oScript.textContent); });

  var obj_url = window.webkitURL.createObjectURL(oBuilder.getBlob()) || window.URL.createObjectURL(oBuilder.getBlob());
  document.worker = new Worker(obj_url);

  document.worker.onmessage = function (oEvent) {
    log_worker_msg( oEvent.data);
  };

  window.onload = function() { document.worker.postMessage(""); };
</script>
</head>
<body><div id="worker_log"></div></body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:02:19.153

您的 webworker 支持测试包含重大错误，这会导致 worker 抛出参考错误。BlobBuilder 已弃用，Blob 最好在浏览器范围内使用，但尚未得到广泛支持。

[斑点支持](http://caniuse.com/blobbuilder)

为了测试它对 XMLHttpRequest 文件上传 Websockets 的支持，我已经更正了嵌入式工作者测试

更正的来源在这里。 [更正的来源](http://jsfiddle.net/zludany/nG3nx/)

```
function log_worker_msg(worker_msg) {
  var frag = document.createDocumentFragment();
  frag.appendChild(document.createTextNode(worker_msg));
  document.querySelector("#worker_log").appendChild(frag);
}
var aFileParts = ["var xmlhttp = \'XMLHttpRequest: \' + ( ( \'function\' === typeof XMLHttpRequest ) ? \' YES\' : \' NO\' );var file_reader = 'FileReader: ' + ( ( \'function\' === typeof FileReader ) ? \' YES\' : \' NO\' );var websockets = \'Websockets: \' + ( ( \'function\' === typeof WebSocket ) ? \' YES\' : \' NO\' );var myVar = \"Test results: \" + xmlhttp + \", \" + file_reader + \", \" + websockets;self.onmessage=function(oEvent){self.postMessage(myVar)};"];
var oBuilder = new Blob(aFileParts, { "type" : "text\/javascript" });
var obj_url = window.webkitURL.createObjectURL(oBuilder) || window.URL.createObjectURL(oBuilder);
document.worker = new Worker(obj_url);
document.worker.onmessage = function (oEvent) {
    log_worker_msg( oEvent.data);
};
window.onload = function() { document.worker.postMessage(""); }; 
```

# c - 如何减少c中的if else条件

> ID：11098298
> 
> 赞同：0
> 
> 时间：2012-06-19T09:38:16.947
> 
> 标签：c

实际上我正在尝试减少 if else 条件，但我不知道如何在 C 中做。

**例如我的代码是**

```
 if(this.Index==1100 && this.SubIndex==1)
 {
 putValue(Com_stMECUErr,this.Data);
  }

 else if(this.Index==1100 && this.SubIndex==2)
  {
  putValue(B_sbbvk,this.Data);
   }

 else if(this.Index==1100 && this.SubIndex==3)
  {
 putValue(Com_bMSVIdle,this.Data);
   }

  // haivng 100 more similar conditions

   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:43:20.033

如果值在连续范围内：

```
yourtypehere subIndexValues[] = {whatever, Com_stMECUErr, B_sbbvk, Com_bMSVIdle};

if(this.Index==1100)
{
  putValue(subIndexValues[this.SubIndex],this.Data);
} 
```

或者您可以混合使用`if`s 作为索引，使用`case`s/arrays 作为特定范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T09:43:15.247

您可以像这样摆脱一些冗余：

```
if (this.Index == 1100)
{
    switch (this.SubIndex)
    {
        case 1:
            putValue(Com_stMECUErr, this.Data);
            break;
        case 2:
            putValue(B_sbbvk, this.Data);
            break;
        case 3:
            putValue(Com_bMSVIdle, this.Data);
            break;
        ...
        default:
            ...
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T09:52:34.363

如果 SubIndex 没有映射到特定值，则使用 if 或 switch。

这就是如果的方式。

```
if(this.Index == 1100) {
    if (this.SubIndex==1) putValue(Com_stMECUErr, this.Data);
    if (this.SubIndex==2) putValue(B_sbbvk, this.Data);
    if (this.SubIndex==3) putValue(Com_bMSVIdle,this.Data);
    // 100's more if's 
} else { //if this.Index != 1100
} 
```

这是切换方式。

```
if(this.Index == 1100) {
    switch(this.SubIndex) {
        case 1: putValue(Com_stMECUErr, this.Data); break;
        case 2: putValue(B_sbbvk, this.Data); break;
        case 3: putValue(Com_bMSVIdle,this.Data); break;
        // 100's more cases
        default: break;
    }
    // 100's more if's 
} else { //if this.Index != 1100
} 
```

如果 SubIndex 确实映射到特定值，那么您可以使用数组以最短的方式进行操作。

```
YourDataType values[] = {
    whatever, 
    Com_stMECUErr, 
    B_sbbvk, 
    Com_bMSVIdle, 
    hundredsmore
}
if(this.Index == 1100) {
    putValue(values[this.SubIndex], this.Data);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T09:43:02.610

```
if (this.Index==1100) {
  if (this.SubIndex==1)
    putValue(Com_stMECUErr, this.Data);
  if (this.SubIndex==2)
    putValue(B_sbbvk, this.Data);
  if (this.SubIndex==3)
    putValue(Com_bMSVIdle,this.Data);
  // haivng 100 more similar conditions
} 
```

或类似的东西

```
if (this.Index==1100) {
  the_type_of_the_first_argument_of_putValue table1100[]= {
    Com_stMECUErr, // 1
    B_sbbvk,       // 2
    Com_bMSVIdle   // 3
    // haivng 100 more similar conditions
  };
  if (this.SubIndex<=no_of_entries_in_table1100)
    putValue(table1100[this.SubIndex-1], this.Data);
  else
    printf("value not found.");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T09:45:02.403

每个 SubIndex 是否映射到特定值？

在这种情况下，您可以制作一个 HashMap 或类似的东西来跟踪映射。如果你这样做了，每当你必须检查值时，你可以执行以下操作：

```
if(this.Index == 1100){
    putValue(someMap.get(this.SubIndex), this.Data);
} 
```

这样做可以节省大量代码，尤其是当您必须在代码的不同部分多次检查映射时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T09:40:56.993

在这种情况下，您可以检查 this.Index == 1100 一次，然后使用 switch 语句来测试子索引

即，由于您对所有条件都有共同的检查，因此您可以提取它：

```
if (this.Index==1100){
  switch(this.Subindex){
    case 1:
      ...
    case 2:
      ...
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T09:43:21.813

您可以使用 switch 语句和向上移动一个 if 语句来缩短代码：

```
if (this.Index == 1100) {
    switch(this.SubIndex) {
    case 1:
        putValue(Com_stMECUErr,this.Data);
        break;
    case 2:
        putValue(B_sbbvk,this.Data);
        break;
    case 3:
        putValue(Com_bMSVIdle,this.Data);
        break;
    default:
        break;
    }
} 
```

# php - PHP MYSQL 将 HTML 插入 MYSQL 数据库

> ID：11098303
> 
> 赞同：1
> 
> 时间：2012-06-19T09:38:44.427
> 
> 标签：php, mysql

如何将 html 代码存储在 mysql 数据库中？我到处都能找到人们可以做到的地方，但没有人说怎么做。我知道我需要使用与示例一起播放的“mysqli_real_escape_string”来剥离数据，但不知道如何实际操作。我只是简单地放置了如下所示的代码，但它只是给我一个错误。我知道它是因为 HTML 代码有“”，但我需要在页面加载时加载这些代码，那么如何将代码插入数据库？一个链接或其他东西会很棒。

编辑：这是完整的代码，它没有将信息输入数据库，但没有给出任何错误。

```
<?php
    include_once('global.php');

    $city = ("<div id='body_sidebar'>
        <ul>
            <li class='sidebar_service_space'>&nbsp;</li>
            <li class='sidebar_service_title'>About Malware</li>
            <li><a href='<?php echo '$home' ?>/services/malware/what-is-malware.html'>What is Malware?</a></li>
            <li><a href='<?php echo '$home' ?>/services/malware/common-signs.html'>Common Signs of Malware</a></li>
            <li class='sidebar_service_space'>&nbsp;</li>

            <li class='sidebar_service_title'>Malware Removal</li>
            <li><a href='<?php echo '$home' ?>/services/malware/virus-removal.html'>Virus Removal</a>
                <a class='tooltip' href='/knowledge_base/virus_removal.php'><img id='viruses' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Viruses</em>
                    The computer virus is the most infamous form of malware. It is a self replicating program that infects a system without authorization. Once installed, it will execute itself, infect system files, and attempt to propagate to other systems. The impact of a virus ranges widely from slow system performance to wiping out every file on your computer. <br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>

            <li><a href='<?php echo '$home' ?>/services/malware/worm-removal.html'>Worm Removal</a>
                <a class='tooltip' href='/knowledge_base/worm_removal.html'><img id='worm' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Worms</em>
                    A computer worm is a self-replicating computer program. It uses a network to send copies of itself to 
    other computers on the network and it may do so without any user intervention. Worms usually exploit a 
    known or zero-day vulnerability that allows them to execute their copies on computers on the same 
    network.<br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>

            <li><a href='<?php echo '$home' ?>/services/malware/adware-removal.html'>Adware Removal</a>
                <a class='tooltip' href='/knowledge_base/adware_removal.html'><img id='adware' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Adware</em>
                    Adware is a program that causes the host computer to display advertisements that the user did not request. These are frequently in the form of pop-up ads that appear while browsing the Internet and pop-under ads that open in a window hidden beneath the Internet browser's window, according to security4web.com. Another version of adware is a toolbar that attaches to an Internet browser search ability.<br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>

            <li><a href='<?php echo '$home' ?>/services/malware/spyware-removal.html'>Spyware Removal</a>
                <a class='tooltip' href='/knowledge_base/spyware_removal.html'><img id='spyware' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Spyware</em>
                    Spyware collects information from a host computer and sends it to the creator of the program. Spyware can infect a computer as a result of surfing a website that installs it or even as part of programs a user knowingly downloads to use for a different purpose, according to security4web.com. The website notes that freeware (free software) and Internet links advertising spyware-removal programs frequently install spyware.<br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>

            <li><a href='<?php echo '$home' ?>/services/malware/rootkit-removal.html'>Rootkit Removal</a>
                <a class='tooltip' href='/knowledge_base/rootkit_removal.html'><img id='spyware' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Rootkit</em>
                    Rootkits can make it difficult to discover that your computer has been infected by other types of malware. According to h-online.com, a rootkit manipulates files so they are difficult to discover on your computer. This makes it a challenge to find out if a malware process or file is running in the background on your computer because a rootkit program may be preventing you from finding it by browsing folders or searching on your computer file system.<br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>

            <li><a href='<?php echo '$home' ?>/services/malware/trojan-removal.html'>Trojan Horse Removal</a>
                <a class='tooltip' href='/knowledge_base/trojan_removal.html'><img id='spyware' src='<?php print'$style_images' ?>/question.jpg' />
                <span class='custom info'><img src='<?php print'$style_images' ?>/info.png' alt='Information' height='48' width='48' />
                <em>Trojan Horse</em>
                    A trojan horse is unlike a virus or a worm because it cannot replicate itself, according to spamlaws.com. Instead, it executes itself, and the execution of the file can install additional forms of malware, such as viruses or worms. It can also delete files, eliminate access to specific websites and damage files on the computer.<br /><br />
                    <font style='text-align:right; padding-left:150px; margin-top:15px;'>Click the icon for more information...</font></span></a></li>
            <li class='sidebar_service_space'>&nbsp;</li>
        </ul>
        <span id='sidebar_contactus'>Contact Us</span>
        <span id='sidebar_findus'>Find Us</span>
        <hr />
        <div id='sidebar_quote'>
            <div id='sidebar_quote_text'>This is a small quote about someone loving who we are and what we do so they are praising us cuz well we are awesome.</div>
        </div>
        <div id='sidebar_quote_arrow'>
            <div id='sidebar_quote_cite'>
            Steven Hawkings
            Intelectual Badass
            <a href='#'>hiswebsite</a>
            </div>
        </div>

    </div>");

    $city = mysqli_real_escape_string($cnx, $city);

    /* this query with escaped $city will work */
    if (mysqli_query($cnx, "INSERT into services (template_name, template_code) VALUES (sidebar_malware, '$city')")) {
        printf('%d Row inserted.\n', mysqli_affected_rows($cnx));
    }

    mysqli_close($cnx);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:41:50.410

VALUES 中的测试字符串必须用引号封装，在您的模板名称值周围加上一些引号

```
if (mysqli_query($cnx, "INSERT into services (template_name, template_code) VALUES ('sidebar_malware', '$city')")) { 
```

查看如何输出 mysql 错误，他们会帮助您调试此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T10:14:19.390

利用`htmlentities($city);`

它将标签`<a>, <img>, <b>`, .. 转换为 HTML 实体。

# android - 文本必须从编辑文本中获取并显示在编辑文本中

> ID：11098310
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:39:06.510
> 
> 标签：android, android-edittext, android-button

我有 2 个编辑文本。我将在其中一个编辑文本中键入一条消息。单击按钮时，我希望它显示在另一个编辑文本框中。怎么做？？我是安卓新手。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:41:01.980

它应该像这样简单。在`OnClickListener`您的按钮中执行以下操作：

```
editText2.setText(editText1.getText().toString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:42:55.807

```
public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(<layoutResID>)
        Button b = (Button)findViewById(<Buton _id>);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 EditText e1 = (EditText)findViewById(<EditText _id>);
                 EditText e2 = (EditText)findViewById(<EditText _id>);

                 e2.setText(e1.getText());

            }
        })
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:44:26.460

您可以尝试的另一种方法是使用`TextWatcher`即实现TextChangedListener()。给你更好的控制。

# objective-c - 目标 c - NSTimer、CADisplayLink、线程

> ID：11098311
> 
> 赞同：0
> 
> 时间：2012-06-19T09:39:07.783
> 
> 标签：objective-c, nstimer, countdown

我目前正在制作一个带有倒数计时器的小游戏。我使用 NSTimer，你可以得到额外的时间或更少的时间，取决于你的行动。当我向计时器添加或删除秒数时，时间标签有问题。问题出在我身上，我正在调用我的方法 timerAction，当我添加或删除时间时，他在标签中设置了新时间，然后 NSTimer 也在调用该方法。如果我不调用 timerAction，我必须等待 1 秒才能使用 NSTimer 刷新标签。

那么，我应该怎么做才能解决我的问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:03:18.323

首先，我想问一下您的代码。

此外，在这种情况下，我会喜欢这种模式。

```
@property (nonatomic) NSInteger remainingTime;
@property (nonatomic) NSTimer *timer;

timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timerAction) userInfo:nil repeats:YES]; 

- (void)timerAction {
    if (!countingFinish) {
       remainingTime --;
       //backend regular action
       [self frontEndUpdate];
    }else {
       [timer invalidate];
    }
}

- (bool)countingFinish {
    return (reamainingTime <= 0);
}

- (void)frontEndUpdate {
    //update time label, or other front end update action
}

- (void)addCountingRemaining:(NSInteger) _sec {
     remainingTime += _sec;
     [self frontEndUpdate];
} 
```

顺便说一句，这是 juz 草案代码。希望能帮助到你

# javascript - 禁用事务按钮，直到事务在 asp.net 页面中结束

> ID：11098314
> 
> 赞同：0
> 
> 时间：2012-06-19T09:39:11.060
> 
> 标签：javascript, asp.net

我的`asp.net`页面上有一个交易按钮。
如果用户点击*交易*按钮，该按钮应该被禁用，直到交易结束。

*如何使用客户端脚本来完成？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:43:02.217

可以，假设您的事务是 ajax 请求，您可以使用 javascript 执行以下操作：

...

```
 performTransaction = function() {
    var btn = document.getElementById('transaction_btn'), ajax;
    btn.disabled = true;

    // perform ajax request....
    ajax = ...;
    ajax.onreadystatechange = function(ste) {
        btn.disabled = false;
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:52:03.040

按钮代码：

```
<asp:Button ID="btnTransaction" runat="server" Text="Submit" onclick="btnTransaction_Click" OnClientClick="DisableMe(this.id);" /> 
```

客户端脚本：

```
<script type="text/javascript">
    function DisableMe(id)
    {
        document.getElementById(id).disabled = true;
    }
</script> 
```

然后在服务器端使用

```
protected void btnTransaction_Click(object sender, EventArgs e)
    {
        // after your transction code executes
        btnTransaction.Enabled = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:01:01.457

客户端脚本 -
OnClientClick= "this.disabled = true; this.value = 'Submitting...'; enableImage();"
UseSubmitBehavior="false" Text="确认订单" onclick="BtnSubmit_Click1" />

# jquery - 使用jquery在coldfusion中选择下拉值

> ID：11098316
> 
> 赞同：0
> 
> 时间：2012-06-19T09:39:22.157
> 
> 标签：jquery, coldfusion

我有 3 个下拉菜单`DD1`，`DD2`并且`DD3`在使用 ColdFusion 和 jQuery 填充值的标题部分中。此外，我还有另一个名为`'Main'`的下拉列表，其中包含值`DD1`,`DD2`和`DD3`. 表示标题部分中的下拉列表形成主下拉列表的值。

假设我为 header dropdowns 和`DD1`dropdowns选择了一些值。也是Main 下拉列表中的值。现在我面临的**问题**是：如果我从 Main 中选择，我想从当前选中的 header 下拉列表中获取该值（意味着如果我选择了 mango，当我从 Main 下拉列表中选择时，应该提醒 mango） .`DD2``DD3``DD2`**`DD2``DD2``DD2``DD2`**

 **下面是我正在尝试做的代码片段， `build_dd`用于构建标题下拉列表`DD1`，`DD2`并且`DD3`

```
<cfloop query="build_dd">
       <cfoutput>#build_dd.value#</cfoutput>
</cfloop> 
```

我尝试了以下行。但这给了我选择的 DD1、DD2 和 DD3 的值。我只想要在 Main 中选择的内容

```
 alert("selectedindex "+jQuery("select[name='<cfoutput>#build_dd.value#</cfoutput>'] option:selected").text()); 
```

有人可以帮我解决这个问题吗

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:59:49.547

只需提供选择框 id，例如 dd1 或其他。然后你可以使用`$('#dd1').val();`

奖励：如果您将“主要”选项设置为 DD1、DD2、DD3 的 ID，则可以非常轻松地完成此操作。

```
<select id="main">
   <option value="dd1">DD1</option>
   <option value="dd2">DD2</option>
   <option value="dd3">DD3</option>
</select> 
```

那么你的JS超级简单

```
$('#main').change(function(){
   alert($('#'+$('#main').val()).val());
}); 
```**

# lotus-notes - 哪些项目返回 Lotus Notes 中的发送日期和接收日期值？

> ID：11098319
> 
> 赞同：0
> 
> 时间：2012-06-19T09:39:38.720
> 
> 标签：lotus-notes

我正在为我的应用程序使用 Lotus Notes Java API。我已经从我的 Lotus Notes 帐户发送了一封邮件。我需要使用 java API 获取该邮件的发送日期。我想知道哪个项目包含**发送日期**信息。我已经打印了该文档的所有项目名称及其值。但我需要发送日期信息和收到日期信息。谁能帮助我如何获取这些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:04:18.947

发送日期在`PostedDate`字段中。

接收日期在该`DeliveredDate`字段中。

# iphone - 视频合并ios

> ID：11098321
> 
> 赞同：1
> 
> 时间：2012-06-19T09:39:41.267
> 
> 标签：iphone, ios, xcode, video

我的一个客户想要一个具有以下功能的应用程序：

他们向我发送视频和有关用户可以与视频交互的时间范围的信息。

当时间框架到来时，视频有一个白屏（已经在那里），我将视频输出切换到相机。然后用户与（录制）相机进行一些交谈，直到时间帧结束，然后切换回视频。

在 2 分钟的视频中大约有 5 个时间段会发生这种情况（时间段和视频是可变的）

播放完整个视频并录制完所有内容后，我需要将现有视频与录制的视频合并（将录制的视频放在指定的时间范围内）并将其“编译”为新视频。

由于我从未在 iOS 上使用过视频，因此我正在寻求一些帮助/指导。我已经检查了**AVFoundation**，但这并没有让我更明智地这样做是否可行或如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:54:02.930

按照[这个](https://stackoverflow.com/questions/6575128/how-to-combine-video-clips-with-different-orientation-using-avfoundation)和[这个](http://www.iphonedevsdk.com/forum/iphone-sdk-development/90621-merging-two-videos-avassetexportsession-problem.html)线程。这将为您提供有关如何执行此操作的指南。

# database - PhoneGap 数据库

> ID：11098324
> 
> 赞同：0
> 
> 时间：2012-06-19T09:39:42.650
> 
> 标签：database, cordova

我在 Xcode (IOS) 中使用数据库 (PhoneGap) 开发了一个简单的应用程序，但是我找不到 DB 文件，这是我搜索数据库但我没有找到它的路径（链接）：

/Users/myname/Library/Application Support/iPhone Simulator/5.0/Applications/4D1D37B0-F2EA-4FB0-8B60-F746BC9E73B2/Library/WebKit/Databases/file__0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:01:39.883

Phonegap 使用 webview 数据库。所以为了回答您的问题，您的数据存储在 0000000000000001.db 中

# google-chrome - 如何仅向测试人员发布新版本的 Chrome 扩展

> ID：11098325
> 
> 赞同：7
> 
> 时间：2012-06-19T09:39:47.597
> 
> 标签：google-chrome, testing, google-chrome-extension, version

我有一个有很多用户的 chrome 扩展，我想更新它。我已准备好一切，但我需要测试更新以确保当前用户不会丢失数据。有没有办法只将新版本发布给受信任的测试人员？

*   我创建了一个测试组。
*   我插入受信任的测试人员电子邮件帐户。
*   我在测试账户下登录了谷歌浏览器
*   我在测试帐户下登录了 Google Chrome 网上商店

但是我仍然看不到新版本。“发布到测试人员帐户”按钮仅在未发布的扩展程序上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:01:33.363

我能够向测试人员发布新版本的唯一方法就是这样做，创建一个专门用于测试的新版本。

当前设置仪表板的方式，您必须先取消发布当前应用程序，然后才能将其发布到测试帐户，我怀疑您是否想要这样做。

所以在你的情况下，我会做以下事情

1.  使用当前代码设置应用程序的“测试”版本。
2.  将其发布到您的测试组并让他们使用一段时间，直到他们获得您关心的数据。
3.  使用您的更改更新“测试”版本，并查看数据是否丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T13:26:17.310

谷歌最近通过新的更新解决了这个问题。因此，现在可以选择将新版本发布给测试人员。该扩展将被隐藏一段时间，但是当您再次将其发布到公共时，一切都完成了。

# android - usb 附件，通过 Service 的 intent-filter 捕获 USB_ACCESSORY_ATTACHED

> ID：11098332
> 
> 赞同：3
> 
> 时间：2012-06-19T09:39:58.943
> 
> 标签：android, usb

在 android usb 附件[文档](http://developer.android.com/guide/topics/usb/accessory.html)中，有 android manifest 的示例，其中 Activity 通过 intent-filter 捕获 USB_ACCESSORY_ATTACHED。我问自己，是否有可能通过 Service/IntentService 的意图过滤器捕捉到相同的意图？

***编辑***

我试过这个，但没有成功：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.entreprise.ws.main"
    android:versionCode="1"

    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"

        >
            <activity
            android:name="com.entreprise.ws.main.WeatherStationClientActivity"
            android:exported="true"
            android:screenOrientation="portrait"
             >
<!--              <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>  -->

        </activity>

        <activity android:name=".EntryPointActivity"

            android:screenOrientation="portrait" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

            <activity
            android:name="com.entreprise.ws.main.WiFiListActivity"
            android:label="@string/appname_wifilist" >
            </activity> 

            <uses-library android:name="com.android.future.usb.accessory" />

         <activity
            android:screenOrientation="portrait"
            android:name=".WSInstallatorActivity"
            android:exported="true"
             >

        </activity> 

    <service class="services.MyService" android:name="services.MyService">
                     <intent-filter>
            <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
            <action android:name="android.hardware.usb.action.USB_ACCESSORY_DETACHED" />
        </intent-filter>

                                <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
                android:resource="@xml/accessory_filter" />
    </service>

    </application>

</manifest> 
```

服务：

```
package services;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {

    final static String TAG = "MyService";
    @Override
    public void onCreate() {
        super.onCreate();
        Log.i("TAG", "onCreate");
        Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.i("TAG", "onDestroy");
        Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
    }
    @Override
    public IBinder onBind(Intent intent) {
        Log.i("TAG", "onBind");
        // TODO Auto-generated method stub
        return null;
    }
} 
```

PS活动，这很好用

***编辑2***

我通过将意图过滤器和元数据移动到我的广播接收器来进行试验：我不再收到附加事件。有趣的是，我继续收到分离事件。尽管文档中有“广播动作”分类，但它看起来像 USB_ACCESSORY_ATTACHED 仅适用于活动。

***EDIT3：最终结论***

它看起来像 USB_ACCESSORY_ATTACHED*只能*在活动中被捕获（因为可能与用户对话？！）。分离事件可以在接收器中捕获。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T03:47:02.663

我还在为我的项目探索 android 上的 USB 支持，并最终浏览了 Android 源代码。

是的 USB_ACCESSORY_ATTACHED 和 USB_DEVICE_ATTACHED 两个意图只能在活动中被捕获，但不能在服务中。我还不能确切地找到为什么会这样。像你一样，我相信应该可以直接通知服务关于 USB 状态（设备已连接，附件已连接）。但这不是它在 Android 中的实现方式。如果我找到更多关于此的内容，将发布。

可以在广播接收器中捕获分离意图。

如果你想在 Android 源代码中冒险，你可以从这个目录开始 - **ICS_SOURCE/frameworks/base/services/java/com/android/server/usb**并从那里读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T22:53:49.717

有同样的问题：

无法根据插入 USB 设备启动服务。

不是很好的解决方案：

我们向已经包含该服务的应用程序添加了一个活动。活动所做的只是启动服务并将插入 USB 设备时的意图传递给服务。然后活动退出。（仅活动结束。）这使服务继续运行。我们称之为“System.exit(0);” 在活动中“默默地”执行此操作（即没有弹出窗口）。

为什么它不是那么好？：

1.  这会在启动器中为应用程序放置一个无用的图标。
2.  暂时启动一个活动确实会接管 GUI（暂时）。不确定如果其他具有活动的应用程序正在运行会发生什么。

因此，如果有人有更好的解决方案...请发布！

OTOH，如果这是 Android 中的一个错误......好吧，我有点太绿了，无法确定这一点，但如果它是一个错误 - 如何帮助 WRT 如何跟进谷歌。

-谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:43:16.737

是的，这应该是可能的。如果您查看[`<service>`](http://developer.android.com/guide/topics/manifest/service-element.html)文档，您可以看到 中的元素`Service`就像一个.`Manifest``<intent-filter>``Activity`

如果您查看[USB_ACCESSORY_ATTACHED](http://developer.android.com/reference/android/hardware/usb/UsbManager.html#ACTION_USB_ACCESSORY_ATTACHED)操作，则没有提到这不是针对`Service`.

如果您查看[SEARCH_LONG_PRESS](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEARCH_LONG_PRESS)操作，则会提到：

> 活动操作：启动与长按搜索键相关的操作。

因此，您应该能够`Broadcast(USB_ACCESSORY_ATTACHED)`在`Service`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-26T23:51:54.790

我还可以确认`ACTION_USB_ACCESSORY_ATTACHED`在活动广播接收器中不起作用。但我也注意到，`ACTION_USB_ACCESSORY_DETACHED`如果用户在请求权限对话框中禁止访问附件，通常与广播接收器一起使用的功能将停止进入广播接收器。

例如 0.`ACTION_USB_ACCESSORY_DETACHED`向广播接收器注册。

1.  在打开的活动中获取附件，例如：

    ```
    final UsbAccessory[] accessories = usbManager.getAccessoryList();
    final UsbAccessory accessory = (accessories == null ? null : accessories[0]); 
    ```

2.  向用户请求权限：

    ```
    usbManager.requestPermission(accessory, permissionIntent); 
    ```

3.  在弹出对话框中：

    1.  如果按“确定”授予权限，则断开附件并确保`ACTION_USB_ACCESSORY_DETACHED`在广播接收器中接收到。

    2.  如果按“取消”放弃权限，则断开附件并查看`ACTION_USB_ACCESSORY_DETACHED`在这种情况下广播接收器未收到该权限。

因此，如果 Android 系统不向广播接收器发送有关用户未从对话框授予权限的附件的通知（附加/分离），这可能是预期的行为。因此，只要用户不允许附加附件，附加事件就永远不会到达广播接收器。无论如何，这看起来像是一个错误或损坏的设计，因为无法`ACTION_USB_ACCESSORY_ATTACHED`在广播接收器中接收事件，用户将不得不在每次重新连接配件时重新启动应用程序或通过手动操作强制连接。

# c# - 从 SharePoint 中的 _layouts 文件夹获取文件

> ID：11098333
> 
> 赞同：5
> 
> 时间：2012-06-19T09:40:02.713
> 
> 标签：c#, sharepoint, spweb

我目前正在开发一个项目，我将 docx 文件添加到 Visual Studio 中的 Layout 文件夹，然后使用这些 ducment 文件创建内容类型。

问题是我无法以编程方式获取文档文件。使用网络浏览器我可以获取文件，但不能使用 web.GetFolder();。激活功能时，代码在功能接收器中运行。

```
SPSite site = properties.Feature.Parent as SPSite;
SPWeb web = site.RootWeb;

SPFolder docTempFolder = web.GetFolder("_LAYOUTS/Projekt/DocumentTemplates"); 
```

这段代码给了我一个零文件的集合。

我究竟做错了什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:56:21.537

`SPFolder`用于从 SharePoint 文档库/列表中获取对象。您无法通过尝试将**文件**`SPFolder`转换为. 您也不能使用`SPWeb.GetFolder`这些文件，因为这些文件离您的网络不远。它们在您的硬盘上。

您可以使用 获得 14 个蜂巢`GetGenericSetupPath`，因此可以使用以下方法：

```
var path = SPUtility.GetGenericSetupPath(@"TEMPLATE\LAYOUTS\Projekt\DocumentTemplates"); 
```

您现在可以使用常规流阅读器`System.IO.File`等访问此路径。

* * *

**编辑：**对于 SharePoint 2013 及更高版本，上述方法已过时，因为在较新`_layouts`的 SharePoint 版本中，对文件夹的引用始终在路径中包含 SharePoint 版本（例如`/_layouts/15`，对于 SharePoint 2013而言`/_layouts/14`，对于 SharePoint 2010。

新方法是[`SPUtility.GetVersionedGenericSetupPath`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.utilities.sputility.getversionedgenericsetuppath.aspx)。SharePoint 2010中*不存在*该方法。

# codeigniter - 使用 form_dropdown 在 Ion Auth 中创建用户时将用户添加到组

> ID：11098339
> 
> 赞同：2
> 
> 时间：2012-06-19T09:40:12.680
> 
> 标签：codeigniter, ion-auth

我在函数 create_user() 中添加到身份验证控制器：

```
if ($this->ion_auth->is_admin())
        {    
            $this->data['groups'] = $this->ion_auth->groups()->result_array(); // выбираем все группы
            $groups=$this->data['groups'];
        } 
...
if ($this->form_validation->run() == true && $this->ion_auth->register($username, $password, $email, $additional_data, $groups)) 
... 
```

接下来在视图中我添加下拉字段并希望使用表“组”中的所有组填充它：

```
<div class="grid_8"><p>Добавить в группы:<br />

    <?php echo form_dropdown('groups',$groups) ?></p></div> 
```

但我弄错了下拉列表：

```
0
    1
    admin
    Administrator
1
    2
    moderator
    Moderator
... 
```

请帮助我了解如何列出所有组：

```
Administrator
Moderator
User
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:48:34.363

我在**ion_auth_model.php中做了这个**

```
/**
 * group list
 *
 * @return array
 * @author Susilo N
 **/
public function grouplist()
{
    $query = $this->db->get('groups');

    foreach ($query->result() as $row)
            {
                  $listArray[$row->id] = $row->name;                
            }               

    return $listArray;
} 
```

然后我在控制器上添加这个

```
$this->data["listGroups"] = $this->ion_auth->grouplist(); 
```

并且在视图中

```
<?= form_dropdown('groups', $listGroups, '1') ?> 
```

# c# - 无法触发 onItemCommand 事件

> ID：11098340
> 
> 赞同：1
> 
> 时间：2012-06-19T09:40:14.867
> 
> 标签：c#, asp.net, visual-studio-2010, telerik-grid

我无法猜测这里的问题，因为网格项命令的事件没有执行。我也更改了 pageevent 验证状态，但没有用。我正在粘贴 .aspx 代码以及网格完美绑定

```
<telerik:RadGrid ID="frds" runat="server" OnItemCommand="go_frd" AutoGenerateColumns="false" >
<MasterTableView>
<Columns>
<telerik:GridTemplateColumn>
<ItemTemplate>
<asp:Button ID="bt" runat="server" CommandArgument='<%#Eval("frd_ID") %>' Text="test" />
</ItemTemplate>
</telerik:GridTemplateColumn>
</Columns>
</MasterTableView>
</telerik:RadGrid> 
```

活动是这样的

```
 protected void go_frd(object o, GridCommandEventArgs e)
{
    if (e.CommandName == "frd_go")
    {
        Response.Redirect("Profiling.aspx?uid=" + e.CommandArgument);
    }
    if (e.CommandName == "add_frd")
    {
        db_accessDataContext db = new db_accessDataContext();
        Frd_request req = new Frd_request();

        db.AddFriend(Int64.Parse(cur_mem_id), Int64.Parse(e.CommandArgument.ToString()));
        SqlConnection con = new SqlConnection(connectionString);
        SqlCommand cmd = new SqlCommand("dbo.addFriend", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(@"memID", Int64.Parse(cur_mem_id));
        cmd.Parameters.Add(@"frdID", Int64.Parse(e.CommandArgument.ToString()));
        try
        {
            con.Open();
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex) { }
    }
} 
```

我尝试了很多方法，但无法触发网格中按钮的事件我也通过放置断点来检查它，问题是它甚至没有开始执行事件绑定代码

```
 string query = "my query containing the frd_id ,works fine in query builder and it also is shown grid view "; 
try { SqlConnection con = new SqlConnection(connectionString);
 SqlDataAdapter adapter = new SqlDataAdapter(query, con); 
adapter.Fill(d0); con.Close(); 
} catch (Exception ex) { } 
frds.DataSource = d0; 
frds.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:49:02.307

您需要设置 CommandName：

```
<asp:Button ID="bt" runat="server" 
     CommandName="frd_go" 
     CommandArgument='<%#Eval("frd_ID") %>' Text="test" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T14:09:59.960

我今天有一个类似的问题。在我的 radgrid 中，我有代码来构建 sql 并在 page_load 事件中填充 radgrid，但我忘了添加

如果（！IsPostBack）{}

围绕此代码，因此在每次加载页面时，都会重建网格并且 onitemcommand 方法不起作用。该页面似乎在按钮单击或 rowclick 上发回，但该事件并未触发。尝试在数据绑定周围添加 if (!isPostback) 代码，您可能会发现它对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:30:25.497

您需要将`EnablePostBackOnRowClick`属性设置为`true`for `ClientSettings`。然而，这将导致一个完整的回帖。

```
.
.
.
</MasterTableView>
<ClientSettings EnablePostBackOnRowClick="true"> 
</ClientSettings>
</telerik:RadGrid> 
```

您可能想[在 Telerik 论坛上查看此主题](http://www.telerik.com/community/forums/aspnet-ajax/style-builder/radgrid-not-firing-postback-on-itemcommand-events.aspx)

# php - PHP-在某些字段上验证

> ID：11098347
> 
> 赞同：0
> 
> 时间：2012-06-19T09:40:33.157
> 
> 标签：php

我有一个表单，表单中只有几个字段是必填的。当一个字段不是必填时，它不应该检查空数据验证。如果非必填字段包含数据，那么它应该检查数据，只有在存在的数据。

我下面的代码检查所有字段。例如：在下面的代码中说电话不是强制性的，如何更改代码。

```
$validate = array(
    array($x, '/^[a-z\d ]{4,20}$/i', "Please enter valid name."),
    array($y, '/^[a-z\d ]{4,20}$/i', "Please enter a real category."),
    array($phone, '/^\(?[0-9]{3}\)?|[0-9]{3}[-. ]? [0-9]{3}[-. ]?[0-9]{4}$/' , "Please enter a valid phone number")
);

$error = '';
foreach ($validate as $validation)
{
    if (!preg_match($validation[1],$validation[0]))
    {
       $error .= $validation[2]; 
    }
}

if($error != '')
{
    echo $error;
    exit;
} 
```

评论这个帖子，如果不清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:05:20.973

`isset`如果要检查是否至少提交了必填字段，可以使用and`empty`函数检查它们是否已设置并具有真值。

例如：

```
if ( isset($_POST['username'], $_POST['password']) && 
     ! empty($_POST['username']) && ! empty($_POST['password']) ) {
    // validation here
} 
```

这将检查用户名和密码字段是否已提交并具有值，而例如电子邮件字段不一定已填写，上述条件返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:32:52.137

如果您事先知道必填字段，我建议您将它们分组到一个数组中并根据当前键进行测试。如果密钥不是强制性的，但具有价值，您可以进行测试，否则请进行定期检查。

```
$error = '';
$mandatoryFields = array('key1', 'key2' 'key3');

foreach ($validate as $validation)
{
    if (!in_array($validation[0], $mandatoryFields) && strlen(trim($validation[0])) > 0) 
    {
        // There is data in a non mandatory field.
        // Perform your test.
    } 
    else {
        // Do your regular test.
        if (!preg_match($validation[1],$validation[0]))
        {
           $error .= $validation[2]; 
        }
    }
} 
```

你可以试试这个。

# java - 实现 Java 调频收音机

> ID：11098353
> 
> 赞同：2
> 
> 时间：2012-06-19T09:40:51.543
> 
> 标签：java, swing

谁能告诉我如何实现一个独立的java客户端来播放FM收音机。我在网上搜索找不到任何有用的东西。我们需要实现的所有 API 是什么，一旦实现结束，如何测试它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:30:05.183

除了**AurA**答案...

您可以使用[JLayer 库](http://www.javazoom.net/javalayer/javalayer.html)轻松**阅读**和播放大多数网络收音机。该库也是跨平台的，此外，还允许您播放任何 mp3 文件。

这是一个小型流播放器示例：

```
import javazoom.jl.decoder.JavaLayerException;
import javazoom.jl.player.Player;

import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

public class RadioConnector
{
    public static void main ( String[] args )
    {
        try
        {
            playRadioStream ( "http://radio.flex.ru:8000/radionami" );
        }
        catch ( IOException e )
        {
            e.printStackTrace ();
        }
        catch ( JavaLayerException e )
        {
            e.printStackTrace ();
        }
    }

    private static void playRadioStream ( String spec ) throws IOException, JavaLayerException
    {
        // Connection
        URLConnection urlConnection = new URL ( spec ).openConnection ();

        // If you have proxy
        //        Properties systemSettings = System.getProperties ();
        //        systemSettings.put ( "proxySet", true );
        //        systemSettings.put ( "http.proxyHost", "host" );
        //        systemSettings.put ( "http.proxyPort", "port" );
        // If you have proxy auth
        //        BASE64Encoder encoder = new BASE64Encoder ();
        //        String encoded = encoder.encode ( ( "login:pass" ).getBytes () );
        //        urlConnection.setRequestProperty ( "Proxy-Authorization", "Basic " + encoded );

        // Connecting
        urlConnection.connect ();

        // Playing
        Player player = new Player ( urlConnection.getInputStream () );
        player.play ();
    }
} 
```

请注意，playRadioStream 方法将处理其调用的线程，直到发生某些事情（例如与无线电服务器的连接中断或您停止流）。

PS 是的，我在示例中包含了工作无线电 URL - 您可以尝试启动它，您的计算机将开始播放无线电流。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T09:45:20.663

您可以使用 Webservices API 访问许多 Radio 网站

我正在在线发布最流行的广播 api 的链接。

[http://www.last.fm/api/radio](http://www.last.fm/api/radio)

使用 Java Web 服务，您可以轻松地与您的应用程序集成。

# github - 如何访问自动生成的 github 页面？

> ID：11098356
> 
> 赞同：6
> 
> 时间：2012-06-19T09:41:05.367
> 
> 标签：github, github-pages

我已经根据[此处](https://help.github.com/articles/creating-pages-with-the-automatic-generator)的说明自动生成了一个 github 页面。现在我有一个名为`gh-pages`.

我真的没有下一步，我可以将生成的页面托管在 github 上吗？还是我需要将它部署在我自己的网络服务器上？我需要将页面分支与我的主分支合并吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:51:32.963

[在这里](https://help.github.com/articles/user-organization-and-project-pages)找到了答案。要访问该页面，请转到`username.github.com/projectname`。您对`gh-pages`分支所做的任何更改都将反映在那里。

# msbuild - Sitecore 自动重新发布

> ID：11098357
> 
> 赞同：2
> 
> 时间：2012-06-19T09:41:11.473
> 
> 标签：msbuild, continuous-integration, sitecore

有没有什么方法可以通过命令行在 Sitecore 中使用给定的一组目标自动发布站点？

我安装了 PowerShell 控制台，但是我怎么知道它甚至支持哪些命令？文档似乎很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:53:44.930

我推荐由 Adam Najmanowicz 创建的 Sitecore Powershell 控制台。他的博客上有很多文档和示例命令。[您可以在 http://blog.najmanowicz.com/2011/11/17/powershell-console-for-sitecore-what-c​​an-it-do-for-me/](http://blog.najmanowicz.com/2011/11/17/powershell-console-for-sitecore-what-can-it-do-for-me/)找到将发布页面的代码。

更多信息和其他命令可以在他博客上的其他帖子中找到。

# c# - C# 中的链式命令

> ID：11098361
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:41:26.363
> 
> 标签：c#

我正在尝试以编程方式在文件系统上复制和粘贴文件夹结构。我在递归的帮助下成功地做到了。但是对于某些验证，我需要实现命令链（我在 eclipse java 中观察到）。

C#.Net 中是否存在命令链？

我正在寻找有关命令链的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:51:07.707

命令链是一种设计模式。它有据可查，并已成功用于许多软件解决方案。[.Net 中关于命令链的](http://www.codeproject.com/Articles/39166/Using-the-Chain-Of-Command-Design-Pattern-Concepts)文章

简而言之，这种模式涉及一系列`loosely coupled programming units`或`handler objects`。这些对象耦合在一起形成 ac 中的链接`hain of handlers`。

每个处理程序执行其处理逻辑，然后可能将处理请求传递到链中的下一个链接（即处理程序）。使用该链的客户端只会发出一个处理请求。在此请求之后，链处理程序开始进行处理。

# java - 可执行 jar - 导出的内容

> ID：11098362
> 
> 赞同：0
> 
> 时间：2012-06-19T09:41:26.817
> 
> 标签：java, eclipse, jar

问题是：从 Eclipse 导出时，可执行 jar 中包含什么？我问是因为我想知道，例如，**如果我在项目根目录中有一个图像，该图像是否会包含在导出中？**

澄清：我说的是可运行的 jar 文件（已编辑）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:46:17.443

你的意思是`File->Export...->Runnable JAR file`？只有类文件在 jar 中，并且 - 如果选择此选项 - 链接库。但是，您可以创建一个源文件夹（将其命名为“ressources”左右），这也将包含在您的 jar 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:49:01.263

Eclipse JAR 导出器遵循 JAR 包规范： [http ://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html)

但一如既往 - 学习的最佳选择就是尝试一下。它快速而直接。

# mysql - 将记录分组的 MySQL 查询

> ID：11098363
> 
> 赞同：1
> 
> 时间：2012-06-19T09:41:28.180
> 
> 标签：mysql

我有这张表 [表 1]

西德 | 到了| 到达日期

[arrived 字段可以有 [T] 或 [F] 的值，值为 [F] 到达日期字段为 NULL

1 条记录最多只能出现 2 条（到达时 1 条记录=T，到达时另一条记录=F）但也有可能只出现一次的记录

```
1 | T | 2012-02-01
2 | F | [Null]
1 | F | [Null]
3 | T | 2012-03-05 
```

我需要一个显示类似这样的查询

```
cid | arrived | not_arrived
1      Yes          Yes
2      No           Yes
3      Yes          No 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:47:35.353

这有效：

```
SELECT
    cid,
    SUM(arrived = 'T') > 0 as arrived,
    SUM(arrived = 'F') > 0 as not_arrived 
FROM [Table 1]
GROUP BY cid; 
```

你可以在这里试试：[http ://sqlfiddle.com/#!2/2b5a7/1/0](http://sqlfiddle.com/#!2/2b5a7/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:49:00.983

尝试

```
select cid, 
   case when find_in_set('T', group_concat(arrived)) > 0 then 'yes'  else 'no' end as arrived, 
   case when find_in_set('F', group_concat(arrived)) > 0 then 'yes'  else 'no' end as not_arrived
from table1
group by cid 
```

# php - Preg_match 地址

> ID：11098367
> 
> 赞同：0
> 
> 时间：2012-06-19T09:41:36.767
> 
> 标签：php, preg-match

所以我正在尝试 preg_match PHP 中的地址。

它应该是字母空格数字而不是数字空格字母。所以，像这样： Myplace 16\. 数字和字母的长度无关紧要，但它们不能混在一起。

我已经尝试过这个，但是这个不检查空格：

```
if(preg_match("/^[0-9a-zA-Z_]{5,}$/", $adres) === 0)
{
echo 'Address is wrong';
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:45:28.033

您显示的模式与您要执行的操作完全不符。为了你的目的，你会做类似的事情

```
/^[a-zA-Z]+\ +[0-9]+$/ 
```

这会检查字符串开头是否至少有一个字母，后跟 1 个或多个空格，后跟 1 个或多个数字，此时字符串必须结束。

当然，除非我误解了你想要达到的目标......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:48:05.677

我使用 1 来捕获错误（preg_match 返回 false，而 0，不匹配）

```
if(1 !== preg_match('/^[a-z]*\ +\d*$/i', $address))
{
    echo 'Address is wrong';
} 
```

这将匹配 0 到无限次之间 az（不区分大小写）之间的任何字符，然后匹配至少一个空格字符，然后匹配 0 到无限次之间的任何数字。如果您需要至少 1 个字母和 1 个数字，`*`请将`+`

# css - 用于 css 的 Internet Explorer 9 开发人员工具问题

> ID：11098368
> 
> 赞同：0
> 
> 时间：2012-06-19T09:41:47.260
> 
> 标签：css, internet-explorer-7, internet-explorer-9

我在 IE9 浏览器中使用开发人员工具使用 IE7 文档模式，以便我的网页看起来像在 IE 7 浏览器中的样子，仅在 IE 7 中修复一些问题我仅将以下代码用于 ie7。

```
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="ie7.css" />
<![endif]--> 
```

我在 ie7.css 文件中进行了修改，并在 ie9 浏览器的 ie7 开发人员工具中进行了审查，但没有任何效果。但是我在ie7浏览器中查看效果就存在了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:45:21.393

您应该在浏览器模式下选择“兼容性视图”以获得特定于 IE7 的 CSS 效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:09:47.840

确保在 IE7.css 中添加 !important 标签，否则元素将根据优先级进行规则。

例子：

```
.home_link{
     color: #EEE !important;
     padding: 15px !important;
} 
```

# gcc - 链接时未定义的引用

> ID：11098369
> 
> 赞同：1
> 
> 时间：2012-06-19T09:41:48.187
> 
> 标签：gcc, linker, undefined-reference

我已经向 ns2 添加了一个模块，当我得到未定义的引用错误时，我正在编译它。

```
g++ -o ns \
-lXext -lX11 -lnsl -ldl -lm -lm -lrt -lneoclassic -lxml
maser/mamas.o: In function `mamasReasoner::mamasReasoner()':
mamas.cc:(.text+0x95): undefined reference to `NeoEnvironment::initFromNs(std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >&, std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >&, int)'
maser/mamas.o: In function `mamasReasoner::build_ontology_tree(knBase&)':
mamas.cc:(.text+0x1c84): undefined reference to `NeoEnvironment::evaluateCommand(String const&)'
maser/mamas.o: In function `NeoEnvironment::readXmlFromMemory(char const*, char const*)':
mamas.cc:(.text._ZN14NeoEnvironment17readXmlFromMemoryEPKcS1_[NeoEnvironment::readXmlFromMemory(char const*, char const*)]+0x14): undefined reference to `Parser::readXmlFromMemory(char const*, char const*)'
collect2: ld returned 1 exit status
make: *** [ns] Error 
```

它所要求的库位于[http://pastebin.com/NZWPxKht](http://pastebin.com/NZWPxKht)`/usr/local/lib/libneoclassic.so`， 它使用以下代码进行链接。

```
LINK    = g++
LDFLAGS =  -lneoclassic -lrt -lxml2
LDOUT   = -o $(BLANK)
LIB     = \
        -L/usr/local/lib -ltclcl -L/usr/local/lib -lotcl -L/usr/local/lib -ltk8.4 -L/usr/local/lib -ltcl8.4 \
        -lXext -lX11 \
         -lnsl -ldl \
        -lm -lm
OBJ_CC = \
        tools/random.o tools/rng.o tools/ranvar.o common/misc.o common/timer-handler.o \
        common/scheduler.o common/object.o common/packet.o \
        common/ip.o routing/route.o common/connector.o common/ttl.o \
        trace/trace.o trace/trace-ip.o \
        classifier/classifier.o classifier/classifier-addr.o \
        classifier/classifier-hash.o \
        classifier/classifier-virtual.o \
        classifier/classifier-mcast.o \
        classifier/classifier-bst.o \
        classifier/classifier-mpath.o mcast/replicator.o \
        classifier/classifier-mac.o \
        classifier/classifier-qs.o \
        classifier/classifier-port.o src_rtg/classifier-sr.o \
        src_rtg/sragent.o src_rtg/hdr_src.o adc/ump.o \
        qs/qsagent.o qs/hdr_qs.o \
        apps/app.o apps/telnet.o tcp/tcplib-telnet.o \
        tools/trafgen.o trace/traffictrace.o tools/pareto.o \
        tools/expoo.o tools/cbr_traffic.o \
        adc/tbf.o adc/resv.o adc/sa.o tcp/saack.o \
        tools/measuremod.o adc/estimator.o adc/adc.o adc/ms-adc.o \
        adc/timewindow-est.o adc/acto-adc.o \
        adc/pointsample-est.o adc/salink.o adc/actp-adc.o \
        adc/hb-adc.o adc/expavg-est.o\
        adc/param-adc.o adc/null-estimator.o \
        adc/adaptive-receiver.o apps/vatrcvr.o adc/consrcvr.o \
        common/agent.o common/message.o apps/udp.o \
        common/session-rtp.o apps/rtp.o tcp/rtcp.o \
        common/ivs.o \
        common/messpass.o common/tp.o common/tpm.o apps/worm.o \
        tcp/tcp.o tcp/tcp-sink.o tcp/tcp-reno.o \
        tcp/tcp-newreno.o \
        tcp/tcp-vegas.o tcp/tcp-rbp.o tcp/tcp-full.o tcp/rq.o \
        baytcp/tcp-full-bay.o baytcp/ftpc.o baytcp/ftps.o \
        tcp/scoreboard.o tcp/scoreboard-rq.o tcp/tcp-sack1.o tcp/tcp-fack.o \
        tcp/tcp-asym.o tcp/tcp-asym-sink.o tcp/tcp-fs.o \
        tcp/tcp-asym-fs.o \
        tcp/tcp-int.o tcp/chost.o tcp/tcp-session.o \
        tcp/nilist.o \
        sctp/sctp.o apps/sctp_app1.o\
        sctp/sctp-timestamp.o sctp/sctp-hbAfterRto.o \
        sctp/sctp-multipleFastRtx.o sctp/sctp-mfrHbAfterRto.o \
        sctp/sctp-mfrTimestamp.o \
        sctp/sctp-cmt.o \
        sctp/sctpDebug.o \
        tools/integrator.o tools/queue-monitor.o \
        tools/flowmon.o tools/loss-monitor.o \
        queue/queue.o queue/drop-tail.o \
        adc/simple-intserv-sched.o queue/red.o \
        queue/semantic-packetqueue.o queue/semantic-red.o \
        tcp/ack-recons.o \
        queue/sfq.o queue/fq.o queue/drr.o queue/srr.o queue/cbq.o \
        queue/jobs.o queue/marker.o queue/demarker.o \
        link/hackloss.o queue/errmodel.o queue/fec.o\
        link/delay.o tcp/snoop.o \
        gaf/gaf.o \
        link/dynalink.o routing/rtProtoDV.o common/net-interface.o \
        mcast/ctrMcast.o mcast/mcast_ctrl.o mcast/srm.o \
        common/sessionhelper.o queue/delaymodel.o \
        mcast/srm-ssm.o mcast/srm-topo.o \
        routing/alloc-address.o routing/address.o \
        $(LIB_DIR)int.Vec.o $(LIB_DIR)int.RVec.o \
        $(LIB_DIR)dmalloc_support.o \
        webcache/http.o webcache/tcp-simple.o webcache/pagepool.o \
        webcache/inval-agent.o webcache/tcpapp.o webcache/http-aux.o \
        webcache/mcache.o webcache/webtraf.o \
        webcache/webserver.o \
        webcache/logweb.o \
        empweb/empweb.o \
        empweb/empftp.o \
        realaudio/realaudio.o \
        mac/lanRouter.o classifier/filter.o \
        common/pkt-counter.o \
        common/Decapsulator.o common/Encapsulator.o \
        common/encap.o \
        mac/channel.o mac/mac.o mac/ll.o mac/mac-802_11.o \
        mac/mac-802_3.o mac/mac-tdma.o mac/smac.o \
        mobile/mip.o mobile/mip-reg.o mobile/gridkeeper.o \
        mobile/propagation.o mobile/tworayground.o \
        mobile/antenna.o mobile/omni-antenna.o \
        mobile/shadowing.o mobile/shadowing-vis.o mobile/dumb-agent.o \
        common/bi-connector.o common/node.o \
        common/mobilenode.o \
        mac/arp.o mobile/god.o mobile/dem.o \
        mobile/topography.o mobile/modulation.o \
        queue/priqueue.o queue/dsr-priqueue.o \
        mac/phy.o mac/wired-phy.o mac/wireless-phy.o \
        mac/mac-timers.o trace/cmu-trace.o mac/varp.o \
        mac/mac-simple.o \
        satellite/sat-hdlc.o \
        dsdv/dsdv.o dsdv/rtable.o queue/rtqueue.o \
        routing/rttable.o \
        imep/imep.o imep/dest_queue.o imep/imep_api.o \
        imep/imep_rt.o imep/rxmit_queue.o imep/imep_timers.o \
        imep/imep_util.o imep/imep_io.o \
        tora/tora.o tora/tora_api.o tora/tora_dest.o \
        tora/tora_io.o tora/tora_logs.o tora/tora_neighbor.o \
        dsr/dsragent.o dsr/hdr_sr.o dsr/mobicache.o dsr/path.o \
        dsr/requesttable.o dsr/routecache.o dsr/add_sr.o \
        dsr/dsr_proto.o dsr/flowstruct.o dsr/linkcache.o \
        dsr/simplecache.o dsr/sr_forwarder.o \
        aodv/aodv_logs.o aodv/aodv.o \
        aodv/aodv_rtable.o aodv/aodv_rqueue.o \
        common/ns-process.o \
        satellite/satgeometry.o satellite/sathandoff.o \
        satellite/satlink.o satellite/satnode.o \
        satellite/satposition.o satellite/satroute.o \
        satellite/sattrace.o \
        rap/raplist.o rap/rap.o rap/media-app.o rap/utilities.o \
        common/fsm.o tcp/tcp-abs.o \
        diffusion/diffusion.o diffusion/diff_rate.o diffusion/diff_prob.o \
        diffusion/diff_sink.o diffusion/flooding.o diffusion/omni_mcast.o \
        diffusion/hash_table.o diffusion/routing_table.o diffusion/iflist.o \
        tcp/tfrc.o tcp/tfrc-sink.o mobile/energy-model.o apps/ping.o tcp/tcp-rfc793edu.o \
        queue/rio.o queue/semantic-rio.o tcp/tcp-sack-rh.o tcp/scoreboard-rh.o \
        plm/loss-monitor-plm.o plm/cbr-traffic-PP.o \
        linkstate/hdr-ls.o \
        mpls/classifier-addr-mpls.o mpls/ldp.o mpls/mpls-module.o \
        routing/rtmodule.o classifier/classifier-hier.o \
        routing/addr-params.o \
         nix/hdr_nv.o nix/classifier-nix.o \
         nix/nixnode.o \
         routealgo/rnode.o \
         routealgo/bfs.o \
         routealgo/rbitmap.o \
         routealgo/rlookup.o \
         routealgo/routealgo.o \
         nix/nixvec.o \
        nix/nixroute.o \
        diffserv/dsred.o diffserv/dsredq.o \
        diffserv/dsEdge.o diffserv/dsCore.o \
        diffserv/dsPolicy.o diffserv/ew.o diffserv/dewp.o \
        queue/red-pd.o queue/pi.o queue/vq.o queue/rem.o \
        queue/gk.o \
        pushback/rate-limit.o pushback/rate-limit-strategy.o \
        pushback/ident-tree.o pushback/agg-spec.o \
        pushback/logging-data-struct.o \
        pushback/rate-estimator.o \
        pushback/pushback-queue.o pushback/pushback.o \
        common/parentnode.o trace/basetrace.o \
        common/simulator.o asim/asim.o \
        common/scheduler-map.o common/splay-scheduler.o \
        linkstate/ls.o linkstate/rtProtoLS.o \
        pgm/classifier-pgm.o pgm/pgm-agent.o pgm/pgm-sender.o \
        pgm/pgm-receiver.o mcast/rcvbuf.o \
        mcast/classifier-lms.o mcast/lms-agent.o mcast/lms-receiver.o \
        mcast/lms-sender.o \
        queue/delayer.o \
        xcp/xcpq.o xcp/xcp.o xcp/xcp-end-sys.o \
        wpan/p802_15_4csmaca.o wpan/p802_15_4fail.o \
        wpan/p802_15_4hlist.o wpan/p802_15_4mac.o \
        wpan/p802_15_4nam.o wpan/p802_15_4phy.o \
        wpan/p802_15_4sscs.o wpan/p802_15_4timer.o \
        wpan/p802_15_4trace.o wpan/p802_15_4transac.o \
        maser/maser.o maser/mamas.o \
        $(OBJ_STL)

$(LINK) $(LDFLAGS) $(LDOUT)$@ \
                    common/tclAppInit.o $(OBJ) $(LIB) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:25:46.280

我发现这些函数已声明但未实现。一旦我实施它们，问题就解决了。

# c# - C# timers.timer 无法正常工作

> ID：11098373
> 
> 赞同：2
> 
> 时间：2012-06-19T09:42:07.553
> 
> 标签：c#, timer, intervals

我正在尝试使用 C# 中的计时器以五秒的间隔运行一个方法。虽然这段代码似乎不起作用。运行它时我没有收到任何错误，但程序（我在控制台中运行它）在`IP.timer1.Start()`. timer1_Elapsed 方法永远不会被执行。我知道这是因为我尝试让程序在 timer1_Elapsed 方法的第一行向控制台打印一个字符串。

```
class Program
{
    Timer timer1 = new Timer();

    static void Main(string[] args)
    {
        Program IP = new Program();
        IP.timer1.Elapsed += new ElapsedEventHandler(timer1_Elapsed);
        IP.timer1.Interval = 5000;
        IP.timer1.Enabled = true;
        IP.timer1.Start();

    }

    static void timer1_Elapsed(object sender, ElapsedEventArgs e)
    {
    //Function to get executed each time the counter elapses. 
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:44:22.013

原因是`Start`定时器的方法在另一个线程上启动定时器，并立即从该方法返回。这会导致您的`Main`方法结束，并关闭控制台。

根据`Timer`您使用的内容（BCL 中有一些类似命名的类），您可能希望以不同的方式实现修复。我建议阅读有关[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.71%29.aspx)、[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.start.aspx)或[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)的文档，具体取决于您使用的是哪个文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:46:42.867

您的程序将在 main 函数终止的那一刻退出。

您需要防止 main 退出，直到您准备好，可能使用 Console.ReadLine();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:45:50.217

计时器在另一个线程上启动，使用以下命令暂停线程，直到用户在计时器启动后点击一个键。

```
Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:58:39.637

程序在 IP.timer1.Start() 之后立即退出的原因是它执行完 Main() 函数并且没有什么阻止它返回。

如果您想要一种简单的方法来保持程序运行，您可以添加 Console.ReadKey(); 在 timer1.Start() 之后；这样您的应用程序将等到该函数返回（即您按任意键时）。完成此操作后，您的回调应按照指定每五秒调用一次。

# django - Django 和 Celery：管理任务列表不显示值

> ID：11098377
> 
> 赞同：5
> 
> 时间：2012-06-19T09:42:31.543
> 
> 标签：django, django-admin, redis, celery, django-celery

我的问题应该相当简单，与其说是需要拼命解决的问题，不如说是一个有趣的问题。谷歌无法给我我正在寻找的答案，所以我希望你的专业知识可以帮助我。我在用：

```
Django 1.4
Celery 2.5.5
Redis 2.4.10 (latest version on homebrew?) 
```

我正在使用以下命令运行所有内容：

```
redis-server /usr/local/etc/redis.conf
foreman run python manage.py runserver
foreman run "python manage.py celeryd -E -B --loglevel=INFO"
foreman run python manage.py celerycam 
```

在我的 settings.py 中，我为 Celery 设置了以下配置：

```
import djcelery
djcelery.setup_loader()

BROKER_URL = redis
CELERY_RESULT_BACKEND = 'redis'
CELERY_REDIS_HOST = "localhost"
CELERY_REDIS_PORT = 6379
CELERY_REDIS_DB = 0

CELERY_SEND_TASK_ERROR_EMAILS = True
CELERYBEAT_SCHEDULER = 'djcelery.schedulers.DatabaseScheduler'
CELERY_TASK_RESULT_EXPIRES = 172800  # 48 hours. 
```

有了这个配置，一切似乎都在工作，除了一件事：

使用 django-celery，您可以自动在 django 管理员中获得 celery 集成（整洁！），您可以检查所有未过期任务的状态并安排新任务等。

在 admin 的任务列表中，没有显示任何值，这意味着所有值都是 None。当我单击一个值时，我可以看到详细信息，因此看起来它们确实被正确收集了。这只是一个细节，但它让我很恼火。

它没有在列表中显示这些值的原因可能是什么？我能做些什么来解决它？

提前致谢

**编辑：截图**

所以这里有一些截图，你可以看到像 uuid 等所有的值都是 None 但它确实看到任务是否完成。在第二个屏幕截图中，您可以看到详细信息页面（单击任务后），这里包含所有信息。

![django-celery 管理任务列表未显示所有值](../Images/8e6bc82e23ae2b5583278e04c11d82dc.png) 第二张图片：

![显示所有值的任务的详细信息页面](../Images/f370387a4c05ef8264d356c42644d4be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:50:50.940

我也有这个。它似乎是 django-celery 中的一个错误。如果你想修复这个问题，你应该更新你的 django-celery 版本（它已在 django-celery 的[这个提交](https://github.com/celery/django-celery/commit/3835ea96c272f7f298d911b6c917a8bd6afd8d5e)中修复）。

如果您更改以下内容（在`djcelery.admin_utils`函数中`fixedwidth`）：

```
return """<span title="%s", style="font-size: %spt;\
                font-family: Menlo, Courier; ">%s</span>""" % (
    escape(val[:255]), pt, escape(shortval)).replace("|br/|", "<br/>") 
```

进入：

```
 return ("""<span title="%s", style="font-size: %spt;\
                    font-family: Menlo, Courier; ">%s</span>""" % (
        escape(val[:255]), pt, escape(shortval))).replace("|br/|", "<br/>") 
```

然后这些值确实出现在管理员中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T16:54:04.043

我也有同样的错误。给出的关于更新 admin_utils.py 的示例虽然有一个小错误！您需要进行的替换是：

在 admin_utils.py 的顶部添加 FIXEDWIDTH_STYLE：

```
FIXEDWIDTH_STYLE = '''\
<span title="%s", style="font-size: %spt; \
font-family: Menlo, Courier; ">%s</span> \
''' 
```

然后替换：

```
return """<span title="%s", style="font-size: %spt;\
                font-family: Menlo, Courier; ">%s</span>""" % (
    escape(val[:255]), pt, escape(shortval)).replace("|br/|", "<br/>") 
```

和 ：

```
styled = FIXEDWIDTH_STYLE % (escape(val[:255]), pt,escape(shortval))
return styled.replace("|br/|", "<br/>") 
```

您可以在上面的 github 链接中更清楚地看到它。完美运行！干杯!

# magento - Magento：添加到购物车功能在产品详细信息页面上不起作用

> ID：11098381
> 
> 赞同：0
> 
> 时间：2012-06-19T09:42:39.580
> 
> 标签：magento

我面临一个奇怪的问题，不知道如何解决这个问题，因为我是 magento 的新手。添加到购物车按钮在此处的产品详细信息页面上不起作用

[http://www.eyaas.com/products/home/decor/thai-benjarong/benjarong-dainty-cats.html](http://www.eyaas.com/products/home/decor/thai-benjarong/benjarong-dainty-cats.html)

但它在这里的类别页面上工作

[http://www.eyaas.com/products/home/decor/thai-benjarong.html](http://www.eyaas.com/products/home/decor/thai-benjarong.html)

为什么会发生这种情况。我已经提供了上面的链接，以便您可以查看按钮代码并告诉我是否出现问题。

**编辑**

我删除了 jquery 库和导航文件的声明。然后添加到购物车按钮开始工作。我需要知道的是为什么事情在 localhost 中运行良好。相同的文件、相同的库和相同的代码，但它们似乎只是在服务器上遇到了冲突。请提出一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:22:43.443

我看不到您已在代码中添加了 jquery 库-错误似乎说 jQuery 未定义-我认为删除所有 jquery 或添加库应该可以解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:09:24.330

在调用脚本之后添加 jQuery。确保在任何其他依赖它的脚本之前将 jQuery 添加到页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:04:53.030

这一切的原因是 jquery 和 prototoype.js 库之间的冲突。我通过使用`jQuery.noConflict()`函数解决了同样的问题，然后用**jQuery**替换我的 javascript 代码中的所有**$引用**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T12:32:10.573

只需禁用为该特定主题添加的 page.xml 和 head.phtml 中添加的 js 文件。

事情会奏效:-)**

# office365 - 将 .xslx 文件上传到 Office 365 中的文档库

> ID：11098384
> 
> 赞同：0
> 
> 时间：2012-06-19T09:42:47.337
> 
> 标签：office365

我上传了一个 xml 文件并为其分配了一个自定义文档内容。它工作正常。但是使用相同的代码，我上传了一个 xlsx 文件并分配了自定义文档内容类型。但是当我查看它的内容类型时，它被设置为默认文档。

当我通过浏览器上传相同的 xlsx 文件并分配自定义文档内容类型时。它工作正常。

客户端对象模型是否提供了在 Office 365 中上传文件的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:29:28.060

通常你可以使用沙盒方法来处理。

# ruby-on-rails - 即使使用 Spork，Rspec 在 Windows 上仍然很慢

> ID：11098385
> 
> 赞同：10
> 
> 时间：2012-06-19T09:42:48.970
> 
> 标签：ruby-on-rails, rspec, spork

我已经按照[本教程使用 spork 加速 rspec](http://www.rubyinside.com/how-to-rails-3-and-rspec-2-4336.html)，并且我使用的是带有 ruby​​ 1.9.2 和 rails 3.2.5 的 win7 x64 机器。一切正常，但测试仍然执行缓慢。由于操作系统不支持分叉，spork 在 Windows 上根本没有做太多事情吗？

我还能做些什么来加快速度吗？

我还[发现了这个类似的 SO question](https://stackoverflow.com/questions/8029912/rails-3-1-rspec-guard-and-spork-is-really-slow-on-windows)，并观看了[Corey Haines 关于快速测试的视频](http://www.youtube.com/watch?v=bNn6M2vqxHE)。我喜欢这个视频，但是当我们的工具状态（在这种情况下，由于 Rails 启动时间导致的缓慢测试）决定了我们如何构建代码时，我不禁感到有些不对劲。如果不存在那种缓慢的启动时间，那还需要他的方法吗？另一方面，由于测试需要 10 到 30 秒的时间来运行，所以 TDD 的许多好处都失去了，我也看到了他的观点。

如果它是相关的，这里是 spork 的控制台输出，因为 rspec 被执行了几次：

```
 $ bundle exec spork
Using RSpec
  -- Starting to fill pool...
     Wait until at least one slave is provided before running tests...
  ** CTRL+BREAK to stop Spork and kill all ruby slave processes **
Spork is ready and listening on 8989!
  -- Rinda Ring Server listening for connections...

   -- build slave 1...
Preloading Rails environment
   -- build slave 2...
Preloading Rails environment
Loading Spork.prefork block...
Loading Spork.prefork block...
Running tests with args ["--color"]...
  --> DRb magazine_slave_service: 1 provided...
  --> DRb magazine_slave_service: 2 provided...
  <-- take tuple(2); slave.run...
   -- (2);run done
Done.

   -- build slave 2...
Preloading Rails environment
Loading Spork.prefork block...
Running tests with args ["--color"]...
  <-- take tuple(1); slave.run...
   -- (1);run done
Done.

   -- build slave 1...
Preloading Rails environment
Loading Spork.prefork block...
  --> DRb magazine_slave_service: 2 provided... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:27:13.070

[Code Shop 正在构建针对 Windows 优化的 MRI Ruby，您可以在他们的网站](http://thecodeshop.github.com/projects.html) 或[Github Repo](https://github.com/thecodeshop/ruby)上找到有关它的更多信息。

我还建议您观看有关在 Windows 上开发 Rails 应用程序的[演讲](https://www.youtube.com/watch?v=QASKzyJdcTY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T16:15:55.290

尝试查看[http://railscasts.com/episodes/413-fast-tests](http://railscasts.com/episodes/413-fast-tests)。这显示了许多不同的工具可以显着提高测试套件的速度！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:55:19.967

以前，我在使用 Windows 运行 RSPEC 测试时和其他人一样有耐心！做 rake(s) 花费了我太多的时间，而且它不再那么健康了。由于在 Windows 中的开发是如此痛苦，因此交付物有所延迟。这就是事实。这就是我转向 Linux 的原因。但有时，在使用 Linux 时仍然存在问题（安装一些东西的麻烦等等）。我只是保持耐心，直到我切换到更好的 MAC。

如果您确实始终如一地使用 Windows 进行 ROR，那么如果有大量模块要测试，那么运行测试会很慢。

我也有点确定 Selenium 测试在 Windows 中将是一场灾难。

但是，您也可以尝试添加一些其他的东西，比如使用 GUARD（为了更快地执行测试脚本），您不必`rspec spec`重复输入。

见：[https ://github.com/guard/guard](https://github.com/guard/guard)

对于 spork，我也遇到了一个关于它的错误（之前）......其中我正在使用 Linux 测试一些规范文件，然后它太慢了，以至于我真的讨厌使用它。

这就是现实。

看看我是如何配置 SPORK 来为 rspec 工作的：

spec_helper.rb

见：[https ://github.com/xirukitepe/animelist/blob/master/spec/spec_helper.rb](https://github.com/xirukitepe/animelist/blob/master/spec/spec_helper.rb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T07:56:54.603

我会为这种事情使用linux VM...

我设法通过 RSpec 获得的最大测试速度提升是确保它永远不会访问数据库，除非它绝对必须这样做。

# asp.net-mvc - 从单元测试启动 WebActivator

> ID：11098390
> 
> 赞同：1
> 
> 时间：2012-06-19T09:42:59.453
> 
> 标签：asp.net-mvc, ninject, mstest, webactivator

我正在尝试编写集成测试。因此，我需要在单元测试的预启动初始化阶段执行 WebActivator 的启动方法。

我试过这个

```
[TestClass]
public class UnitTests
{
    [ClassInitialize]
    public static void Init(TestContext c)
    {   
        WebActivator.ActivationManager.Run();
    } 
```

但它总是会给我错误信息：

```
Unable to create instance of class EL.NET.SecurityAdapter.Tests.UnitTests. Error: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.InvalidOperationException: This method can only be called during the application's pre-start initialization stage.. 
```

像这样的堆栈跟踪

```
System.Web.Compilation.BuildManager.ThrowIfPreAppStartNotRunning()
Microsoft.Web.Infrastructure.DynamicModuleHelper.DynamicModuleUtility.LegacyModuleRegistrar.RegisterModule(Type moduleType)
Microsoft.Web.Infrastructure.DynamicModuleHelper.DynamicModuleUtility.RegisterModule(Type moduleType)
<myproject>.Tests.App_Start.NinjectWebCommon.Start() in <myprojectPath>Tests\App_Start\NinjectWebCommon.cs: line 25
System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
WebActivator.BaseActivationMethodAttribute.InvokeMethod()
WebActivator.ActivationManager.RunActivationMethods[T]()
WebActivator.ActivationManager.Run()
<myproject>.Tests.UnitTests..ctor() in <myprojectPath>Tests\UnitTests.cs: line 40 
```

我知道单元测试应该与模拟一起使用，但我真的需要那些集成测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:07:08.390

我想运行 WebActivator 来创建我的 Ninject 映射。

我最终为 DI 容器创建了一个包装器接口。我的存储库仅通过此包装器访问 DI。

在 Web 应用程序中，我使用了该接口的 Ninject 特定实现，并且对于测试，我制作了自定义实现。

我仍然认为应该可以让 Ninject 在单元测试中以某种方式工作，但现在这也有效。

# cassandra - Cassandra 通过 Hector API 连接错误

> ID：11098400
> 
> 赞同：1
> 
> 时间：2012-06-19T09:43:26.720
> 
> 标签：cassandra, hector

我的计算机中安装了 Cassandra 1.1.1，我正在尝试通过 Hector API 连接到它。我正在使用 DeveloperStation.ORG 中的示例。我已经启动了服务器，我还通过 cli 创建了所需的键空间和列族。现在，当我尝试执行程序以插入数据时，出现以下错误。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
me.prettyprint.hector.api.exceptions.HInvalidRequestException: InvalidRequestException(why:unconfigured columnfamily authCollection)
at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:42)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl$1.execute(KeyspaceServiceImpl.java:95)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl$1.execute(KeyspaceServiceImpl.java:88)

Error encountered while inserting data!!
at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:101)
at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:224)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl.operateWithFailover(KeyspaceServiceImpl.java:129)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl.batchMutate(KeyspaceServiceImpl.java:100)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl.batchMutate(KeyspaceServiceImpl.java:106)
at me.prettyprint.cassandra.model.MutatorImpl$3.doInKeyspace(MutatorImpl.java:219)
at me.prettyprint.cassandra.model.MutatorImpl$3.doInKeyspace(MutatorImpl.java:216)
at me.prettyprint.cassandra.model.KeyspaceOperationCallback.doInKeyspaceAndMeasure(KeyspaceOperationCallback.java:20)
at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecute(ExecutingKeyspace.java:85)
at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:216)
at me.prettyprint.cassandra.model.MutatorImpl.insert(MutatorImpl.java:55)
at com.examples.cassandra.CassandraExample.insertData(CassandraExample.java:31)
at com.examples.cassandra.CassandraExample.main(CassandraExample.java:131)

Caused by: InvalidRequestException(why:unconfigured columnfamily authCollection)
at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:16477)
at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:916)
at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:890)
at me.prettyprint.cassandra.service.KeyspaceServiceImpl$1.execute(KeyspaceServiceImpl.java:93)
... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:14:26.600

“未配置的 columnfamily X”意味着您需要在尝试插入之前创建 columnfamily X。

# objective-c - SMJobBless 更新后无法访问钥匙串项目

> ID：11098402
> 
> 赞同：23
> 
> 时间：2012-06-19T09:43:28.503
> 
> 标签：objective-c, macos, osx-lion, code-signing, launchd

我们在使用 SMJobBless 更新辅助工具时遇到了一个问题，这让我们困惑了好几天。

我们正在开发一个应用程序，在某些时候我们需要执行管理任务（加载/卸载 kext）。我们还使用钥匙串来存储我们的应用程序的帐户信息。

对于管理任务，我们使用一个使用[SMJobBless](http://developer.apple.com/library/mac/#documentation/General/Reference/ServiceManagementFwRef/ServiceManagement_h/index.html)安装的帮助工具，我们使用 DO over Mach 端口（使用 NSConnection）与之通信。

在帮助工具中：

```
// use our bundle id as our service name
NSString* name = [[NSBundle mainBundle] bundleIdentifier];

launch_data_t checkinRequest = launch_data_new_string(LAUNCH_KEY_CHECKIN);
launch_data_t checkinResponse = launch_msg(checkinRequest);
launch_data_t machServicesDict = launch_data_dict_lookup(checkinResponse, LAUNCH_JOBKEY_MACHSERVICES);
launch_data_t machPort = launch_data_dict_lookup(machServicesDict, [name UTF8String]);

mach_port_t mp = launch_data_get_machport(machPort);

launch_data_free(checkinResponse);
launch_data_free(checkinRequest);

NSMachPort *receivePort = [[NSMachPort alloc] initWithMachPort:mp];
NSConnection *server = [NSConnection connectionWithReceivePort:receivePort sendPort:nil]; 
```

在应用程序中：

```
NSConnection *conn = [NSConnection connectionWithRegisteredName:HELPER_BUNDLE_IDENTIFIER host:nil];

id proxyServerObject = [conn rootProxy];

if(conn && proxyServerObject) {
    return [proxyServerObject someMethod];
}
return NO; 
```

我们使用来自 Thawte 的协同签名证书对应用程序和帮助工具进行签名。到目前为止，一切都像一个魅力。安装了辅助工具，我们可以使用 DO 与它进行通信；我们的 kext 已成功加载和卸载。

当我们尝试*更新*我们的帮助工具时，问题就开始了。我们使用已安装工具的信息字典和我们的应用程序包中的捆绑工具来检查是否需要更新工具，并再次调用 SMJobBless 执行更新。

SMJobBless 调用后，控制台中出现以下行：

```
6/19/12 10:31:24.000 AM kernel: CODE SIGNING: cs_invalid_page(0x104e17000): p=74362[OURAPP] clearing CS_VALID
6/19/12 10:31:24.000 AM kernel: CODE SIGNING: cs_invalid_page(0x10d0de000): p=74364[OURAPPHELPER] clearing CS_VALID 
```

在此之后，应用程序无法从我们的钥匙串项中读取应用程序密码，函数`SecKeychainItemCopyContent`返回`errSecAuthFailed (-25293)`。但是，如果我们使用`codesign -vvvv PATH_TO_TOOL_OR_BUNDLE`. 该工具和应用程序在 Xcode 环境之外进行签名，并且在签名过程之后内容不会更改。

我们发现[了另一篇](http://lists.macosforge.org/pipermail/launchd-dev/2010-October/000835.html)描述类似情况的帖子，但该问题仍未得到解答。一个相关的问题可能是[SMJobBless 返回错误 4098](https://stackoverflow.com/questions/10817785)。

我们正在 OSX 10.7.4 上进行测试。

有没有人遇到过类似的问题，或者有什么明显的我们做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:12:23.737

这是由于与如何`SMJobBless`替换磁盘上的帮助工具有关的错误。特别是，它修改了二进制文件，而不是采用常见的方法写入临时文件，然后在目标文件的顶部重命名它。这样做的效果是，如果二进制文件在内存中，则对文件的修改会更改支持文件的内存页面，从而使它们的代码签名无效。我已经写了一个关于这个的错误报告 rdar://problem/13514523。如果您还没有这样做，我鼓励您自己提交。

一种可能的解决方法可能是让您的应用程序在`SMJobBless`升级之前要求帮助工具从磁盘中删除自己。这应该会导致`SMJobBless`复制到磁盘上的新文件，绕过问题。

# android - 如何在android中向其他设备发送推送通知？

> ID：11098404
> 
> 赞同：1
> 
> 时间：2012-06-19T09:43:33.553
> 
> 标签：android, android-notifications, android-notification-bar

使用此代码，我可以向我自己的设备发送通知。

```
 Intent intent = new Intent(getApplicationContext(), ContactDonor.class);
            PendingIntent pi = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
            //display text
            String body = "Please Click on this to accept!";
            String title = bloodgroup+" Required";
            Notification n = new Notification(R.drawable.ic_launcher, body , System.currentTimeMillis());
            n.setLatestEventInfo(getApplicationContext(), title, body, pi);
            n.defaults = Notification.DEFAULT_ALL;
            nm.notify(uniqueID, n);
            finish(); 
```

但是现在我有一个屏幕，其中显示了一个人的详细信息，例如： Name: ... email: ... ，并且有一个消息框和一个 Request Button ，单击该按钮，他应该会收到一条通知特定消息。这个特殊的事情怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:25:37.383

它不能通过使用来实现`PUSH notifications`。`PUSH notification`当有`server-client`comm 实现时非常有用，其中`server`通知`client`有关已发生的事件`server`。

您试图间接实现的是服务器 - 客户端架构，您的设备将充当服务器。如果您将当前架构塑造成服务器-客户端，您将能够向其他设备发送通知。在这种情况下，您也不需要 PUSH 通知，这将是一个简单的服务器-客户端通信。

有关 PUSH 的更多信息，请参阅：[http ://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#c2dm_sendmessage](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#c2dm_sendmessage)

您也可以发送短信，但这并不能解决您的问题。据我说，没有其他解决方案可以申请发送通知。

# php - Zend OpenId 消费者存储 无法访问存储目录

> ID：11098405
> 
> 赞同：0
> 
> 时间：2012-06-19T09:43:33.730
> 
> 标签：php, apache, zend-framework, openid

我有一个在 Zend Framework 1.11 中开发的应用程序。我使用 Zend_OpenId 创建与合作伙伴网站的单点登录。这一直运行良好，直到我将我的 PHP 版本升级到 5.3.13。我现在收到以下错误：

```
Error: Cannot access storage directory /root/tmp/ 
```

我已将其追踪到 Zend_OpenId_Consumer_Stroage_File。临时目录由返回 /root/tmp 的 getenv('TMP') 设置。如果我通过将 tmp 目录硬编码为 /tmp 来覆盖它，我的 OpenId SSO 应用程序将再次运行。

我有第二台服务器可以运行该应用程序，但它运行的是 PHP 5.3 的早期版本。测试 getenv('TMP') 在该服务器上返回 false，因此 Zend 查找 /tmp。

是否可以：

a) 覆盖 Zend 中的存储目录？b) 在运行 5.3.13 的服务器上禁用 getenv 以便它返回 false 并且 Zend 查找 /tmp 而不是 /root/tmp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:00:07.060

感谢 Aurimas 的评论。对于那些对可能有类似问题的答案感兴趣的人，我已经覆盖了构造函数：

```
$dir = new Zend_OpenId_Consumer_Storage_File('/tmp');
$consumer = new Zend_OpenId_Consumer($dir); 
```

# ajax - 更新primefaces命令按钮属性的值

> ID：11098406
> 
> 赞同：2
> 
> 时间：2012-06-19T09:43:37.270
> 
> 标签：ajax, jsf-2, primefaces

我在这里有一个关于primefaces 命令按钮的更新属性的值的查询。

这是一个简单的代码。我有一个简单的 xhtml 页面

```
<h:body>
<h:form id="main">
    <p:growl id="maingrowl" showDetail="true"></p:growl>
    <p:panelGrid id="mainpanel" columns="2">

            <p:commandButton value="Ajax Submit" update="test" id="ajax"
                actionListener="#{mytestBean.display}" />

    </p:panelGrid>

    <p:panelGrid id="test" rendered="#{mytestBean.show}" columns="1">
        <h:inputText value="#{mytestBean.val1}" />
        <h:inputText value="#{mytestBean.val2}" />
        <p:commandButton value="value in" id="aj" update="test"
            actionListener="#{mytestBean.displaysec}">
            </p:commandButton>
    </p:panelGrid>

</h:form>
</h:body> 
```

现在，如果我必须更新panelgrid“test”，那么在第一个命令按钮中，我必须在命令按钮的更新属性中提供前缀为“:main:”的id“test”，因为这是确切的id我在浏览器的*视图源*中找到的 HTML DOM 。但是，即使只在更新属性中给出“测试”，我也能够更新。所以我的问题是我什么时候应该在id中使用“：”或者它是强制性的还是有任何预定义的规则来在属性中给出id？

另外，我知道更新属性中给出的 id 是通过它所在的 UINamingContainer 给出的。如果它微不足道，请原谅我，我在这里真的很困惑。

非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:02:35.813

如果两个组件（要更新的组件和触发更新的组件）都在同一个 NamingContainer 内，则没有 的相对客户端 ID`:`就足够了。

jsf 中的 NamingContainers 是所有将自己的 id 附加到所有子组件的客户端 id 的组件，例如`<h:form>`，`<h:dataTable>`或`<ui:repeat>`（或更准确地说：实现[`javax.faces.component.NamingContainer`](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)接口的所有组件）。

如果两个组件*不在* 同一个 NamingContainer 中，则必须使用`:`从视图根开始的绝对 id。

如果您对更详细的信息感兴趣，我建议您阅读描述搜索算法的[UIComponent#findComponent()方法的 javadoc。](http://javaserverfaces.java.net/nonav/docs/2.1/javadocs/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)

请注意，这`:`是分隔 clientId 段的默认字符。您可以使用`web.xml`.

# build - 在 Gradle 构建中从 EMMA 中排除类

> ID：11098407
> 
> 赞同：0
> 
> 时间：2012-06-19T09:43:38.630
> 
> 标签：build, code-coverage, gradle, emma

我使用 Gradle 1.0 构建我的项目，并使用 EMMA 插件获取代码覆盖率信息。我想从覆盖率报告中排除某些文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:36:15.947

你包括这个[Gradle 脚本](https://github.com/breskeby/gradleplugins/blob/master/emmaPlugin/emma.gradle)吗？我认为您可以在仪器定义中排除类（参见下面的示例）。但是，您似乎无法使用约定属性设置排除模式。

```
ant.emma(enabled: 'true', verbosity:'info'){
    instr(merge:"true", destdir: emmaInstDir.absolutePath, instrpathref:"run.classpath",
          metadatafile: new File(emmaInstDir, '/metadata.emma').absolutePath) {
        instrpath {
            fileset(dir:sourceSets.main.output.classesDir.absolutePath, includes:"**/*.class", excludes:"**/Some*.class")
        }
    }
} 
```

如果我是你，我会尝试分叉插件，添加一个新字段`EmmaPluginConvention`，让你设置排除模式，然后在`instrpath`定义中使用该变量。更改代码并验证其是否有效后，向作者发送拉取请求。我相信他会接受你的改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:28:39.923

这不适用于 gradle 1.5。Emma 采用如下过滤器：

```
ant.emma(enabled: 'true', verbosity: $verbosityLevel) {
        instr(merge: "true", destdir: emmaInstDir.absolutePath, instrpathref: "run.classpath",
                metadatafile: new File(emmaInstDir, '/metadata.emma').absolutePath, filter: "-com.someclass.*" ) {
            instrpath {
                fileset(dir: sourceSets.main.output.classesDir.absolutePath, includes: "**/*.class" )
            }
        }
    } 
```

过滤器遵循此页面的定义： http: [//emma.sourceforge.net/reference/ch02s06s02.html](http://emma.sourceforge.net/reference/ch02s06s02.html)

# android - Android - 如何制作 Android 应用程序的试用版？

> ID：11098409
> 
> 赞同：5
> 
> 时间：2012-06-19T09:43:51.900
> 
> 标签：android

在我的应用程序中，我想为我的应用程序实现试用版和完整版功能。在这个试用版中，所有用户都可以使用完整版，付费完整版的用户可以使用完整版。所以请建议我可以通过哪些方式来实现这些功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:51:29.183

有两种方法可以做到这一点，我能想到：

1.  构建 2 个版本的 apk 文件并发布两次到 Android Market。
    *   一个是试用版，启用广告或功能有限
    *   第二个将作为付费应用程序提供，解锁全部功能。
2.  将应用程序作为试用版发布，并添加对应用程序内购买的支持，以解锁应用程序的全部功能。这通常被称为免费增值 ( [http://en.wikipedia.org/wiki/Freemium](http://en.wikipedia.org/wiki/Freemium) ) 类型的应用程序。

我推荐第二种方式，因为用户只需下载一次应用程序。

请参阅此处的 Android 应用内计费文档：http: [//developer.android.com/guide/market/billing/index.html](http://developer.android.com/guide/market/billing/index.html)

希望这可以帮助。干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-04T12:09:03.367

其他答案不是我所说的“审判”。概述的解决方案更像是“Lite”与“Pro”应用程序方法。

我认为试用是一个功能齐全的应用程序，在 X 天/周后到期。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-17T10:16:44.243

我多次遇到同样的问题，所以我决定开发一个[Android 试用库](https://www.trialy.io)，您可以简单地将其放入您的项目中，它将为您处理所有服务器端管理（包括离线宽限期） .

要使用它，只需

**将库添加到主模块的`build.gradle`**

```
dependencies {
  compile 'io.trialy.library:trialy:1.0.2'
} 
```

**`onCreate()`在您的主要活动的方法中初始化库**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Initialize the library and check the current trial status on every launch
    Trialy mTrialy = new Trialy(mContext, "YOUR_TRIALY_APP_KEY");
    mTrialy.checkTrial(TRIALY_SKU, mTrialyCallback);
} 
```

**添加回调处理程序：**

```
private TrialyCallback mTrialyCallback = new TrialyCallback() {
    @Override
    public void onResult(int status, long timeRemaining, String sku) {
        switch (status){
            case STATUS_TRIAL_JUST_STARTED:
                //The trial has just started - enable the premium features for the user
                 break;
            case STATUS_TRIAL_RUNNING:
                //The trial is currently running - enable the premium features for the user
                break;
            case STATUS_TRIAL_JUST_ENDED:
                //The trial has just ended - block access to the premium features
                break;
            case STATUS_TRIAL_NOT_YET_STARTED:
                //The user hasn't requested a trial yet - no need to do anything
                break;
            case STATUS_TRIAL_OVER:
                //The trial is over
                break;
        }
        Log.i("TRIALY", "Trialy response: " + Trialy.getStatusMessage(status));
    }

}; 
```

要开始试用，请致电`mTrialy.startTrial("YOUR_TRIAL_SKU", mTrialyCallback);` 您的应用密钥，试用 SKU 可在[开发人员仪表板上](https://www.trialy.io)找到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T09:58:44.820

您还应该看看[Android 的 Application Licensing](http://developer.android.com/guide/market/licensing/index.html)。我不确定这是否完全符合您的想法，但我相信您可以调整您的需求以使其适合您，我会说这将是正确的解决方案。

# javascript - 如何将变量传递到我的网页

> ID：11098411
> 
> 赞同：0
> 
> 时间：2012-06-19T09:44:07.490
> 
> 标签：javascript, android, html, webview

我从网页视图中的资产加载网页。现在我需要调用一个函数来初始化网页中的某些内容。

我用 html GET 参数尝试过：它适用于 android 2.3.3 但不适用于所有更高版本（网页不可用）

现在我通过调用 javascript 函数来解决我的问题的不同方法。但以下代码：

```
<script type="javascript">
var isChecked = "";
function initLoc(name) {
                            isChecked = name;
                            if(isChecked == null)
                                isChecked = "";
                            else
                                document.getElementById(isChecked).style.backgroundImage = "url(../location-button-active.png)";
                    } 
```

```
 frontWebView.loadUrl("file:///android_asset/location-front/front.html");  
   frontWebView.loadUrl("javascript:initLoc('"+ locationID +"')"); 
```

给我以下错误：

```
 06-19 11:40:07.749: E/Web Console(16210): Uncaught ReferenceError: initLoc is not defined at null:1 
```

有谁知道问题是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:59:05.970

您正在调用一个名为`initPainLoc`的函数，但您定义的函数是命名的`initLoc`。

[看看这个例子](http://android-er.blogspot.co.uk/2011/10/call-javascript-inside-webview-from.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:01:58.950

方法是`initLoc`和不是`initPainLoc`。

您必须致电：

`frontWebView.loadUrl("javascript:initLoc('"+ locationID +"')");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:29:02.460

我找到了解决方案。该页面尚未加载，因此尚未定义该功能。我现在在 onPageFinished 中调用该方法，效果很好。

# android - 立即应用程序崩溃，只要添加单行代码

> ID：11098413
> 
> 赞同：0
> 
> 时间：2012-06-19T09:44:10.190
> 
> 标签：android

这是一个完美运行的类，直到我想添加更多功能，代码编译然后在执行时立即崩溃。
问题在于`componentAnalyzer`我希望在这个类中实现的类。我不知道为什么它不起作用，因为我`componentAnalyzer`在另一个类中以完全相同的方式实现了它，并且效果很好。

我认为这是一个小错误，但不确定。我注释掉了造成问题的部分，因为其余部分有效，不应该被触及。

将使用的方法`componentAnalyzer`在代码的末尾。为了更容易看到它，我剪掉了所有正在工作的东西。

```
public class PowerMonitorActivity extends Activity implements SeekBar.OnSeekBarChangeListener {
    private static boolean instantiated = false;

    //private static ComponentAnalyzer componentAnalyzer;
    //private Context context;

    private Button changeGPSButton;
    private Button changeAudioButton;       
    private Button locationUpdateButton;        
    private SeekBar brightnessSeekBar;
    private int screenBrightness = 123;         
    private Handler cpuHandler = new Handler();
    private CPUMonitor cpuMonitor = new CPUMonitor();
    private int updateTime = 1000;

    private Handler totalPowerHandler = new Handler ();         
    private MediaManager mediaManager = new MediaManager();
    private boolean requestingLocation = false;

    private boolean wifiIsTransmitting = false;
    private boolean wifiIsConnected = false;
    private boolean cellIsTransmitting = false;
    private boolean cellIsConnected = false;
    private boolean isLogging = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Bundle extras = getIntent().getExtras();
        if (!instantiated) {
            instantiated = true;
                 //componentAnalyzer = new ComponentAnalyzer(context, extras);
        }

        // Create GPS button - note that location settings cannot be changed directly
        // in a program. Rather, a settings screen is shown when this button is pressed.
        changeGPSButton = (Button)findViewById(R.id.changeGPS);
        changeGPSButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                showGPSOptions();
            }
        });

        totalPowerHandler.removeCallbacks(updatePower);
        totalPowerHandler.postDelayed(updatePower, 1000);  
    }

    private Runnable updateCpu = new Runnable() {
        public void run() {
            float util = cpuMonitor.getUtil();
            int rutil = Math.round(100*util);

            TextView cpuTextView = (TextView)findViewById(R.id.cpuTextView);
            cpuTextView.setText(rutil+"%");      
            cpuHandler.postDelayed(this, updateTime);
            }   
    };

    private Runnable updatePower = new Runnable() 
    {
        public void run()
        {
            //float testPower = componentAnalyzer.getWifiPower();; 

            TextView totalPowerView = (TextView)findViewById(R.id.totalPowerTextView);
            //totalPowerView.setText(testPower+"mW");

            totalPowerHandler.postDelayed(this, 1000);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:50:55.320

你初始化了`context`吗？在当前的代码示例`context`中是实例化的`null`时候。`ComponentAnalyzer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:51:15.277

在我看来，您的应用程序**上下文为空**（您忘记为当前活动或应用程序分配对上下文的引用）

删除有问题的行的注释，

现在看看这些线，

```
Bundle extras = getIntent().getExtras();
        if (!instantiated) {
            instantiated = true;
                 componentAnalyzer = new ComponentAnalyzer(context, extras); // Here context is null
        } 
```

根据下面给出的更改，

```
Bundle extras = getIntent().getExtras();
        if (!instantiated) {
            instantiated = true;
            if(extras != null)
            componentAnalyzer = new ComponentAnalyzer(PowerMonitorActivity.this, extras);
            else Log.e("PowerMonitorActivity","Bundle extras is null");
        } 
```

# javascript - 严格模式下的 ImageData 数据分配

> ID：11098419
> 
> 赞同：3
> 
> 时间：2012-06-19T09:44:29.433
> 
> 标签：javascript, html5-canvas

假设我有这样的 PoC 代码片段来处理`canvas`原始像素数据

```
(function(){
  'use strict';
  var img = document.createElement("canvas").getContext("2d").getImageData(0, 0, 1, 1);
  var imgData = img.data;
  img.data = imgData;
})(); 
```

问题是我得到了一个合理的错误（我已经检查了最新的 Chrome 和 FF）

```
TypeError: Cannot assign to read only property 'data' of #<ImageData> 
```

所以，我可以禁用严格模式，一切都会变得完美，但是有没有可能在严格模式下实现呢？也许我只是没有找到关于 setter for 的文档`data`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:19:57.913

你应该`putImageData()`改用。看[这篇文章](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)寻求帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:26:14.913

阅读代码中的注释：

```
(function(){
  'use strict';
  var canvas=document.createElement("canvas");
  // canvas object must have size
  var w=canvas.width=100;
  var h=canvas.height=50;
  var ctx=canvas.getContext("2d");
  var imgData=ctx.getImageData(0,0,w,h);
  // In next line you retrieve array of RGBA values where each array element
  // is value between 0 and 255\. Array size is size imgData.width*imgData.height
  var pixelData = imgData.data;
  pixelData[0] = 128; // Store 128 for Red channel of first pixel: (0,0)
  pixelData[5] = 128; // Store 128 for Green channel of second pixel
  imgData.data = pixelData; // Error
})(); 
```

您还可以`putImageData`使用另一个 CanvasImageData 对象使用方法来修改 CANVAS 的内容：

```
 var newImgData=ctx.createImageData(w,h);
  ctx.putImageData(newImgData,0,0); 
```

阅读 MDN 中的 CanvasImageData：[https](https://developer.mozilla.org/en/DOM/ImageData) ://developer.mozilla.org/en/DOM/ImageData和 MSDN：http: [//msdn.microsoft.com/en-us/library/ie/ff974957%28v=vs.85 %29.aspx](http://msdn.microsoft.com/en-us/library/ie/ff974957%28v=vs.85%29.aspx)

MSDN 中的 HTML5 画布：http: [//msdn.microsoft.com/en-us/library/ie/hh771733%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/hh771733%28v=vs.85%29.aspx)

# android - 重新创建类似于 android 平板电脑上的设置屏幕的屏幕

> ID：11098424
> 
> 赞同：0
> 
> 时间：2012-06-19T09:44:59.067
> 
> 标签：android, android-layout

我想创建一个类似于 android 平板电脑上的设置屏幕的屏幕。屏幕一分为二，右侧有一个列表。当在右侧选择项目时，详细信息将显示在左侧。我还希望在显示已选择项目的小箭头方面具有类似的图形。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:50:17.177

**`Fragment Activity`**您可以将其用于与平板电脑中的设置布局相同的调用。

有关更多信息，请搜索**`Fragment Activity`**

这里是[最佳链接](http://developer.android.com/guide/topics/fundamentals/fragments.html)

# c - C 中的 .e 文件类型是什么？

> ID：11098426
> 
> 赞同：0
> 
> 时间：2012-06-19T09:45:05.800
> 
> 标签：c, header, history

我正在考虑让[HTML-XML-Utils](http://www.w3.org/Tools/HTML-XML-utils/)在我的计算机上运行，​​我注意到源代码树中的 .e 文件类型。跑步：

```
% file types.e
types.e: ASCII c program text 
```

揭示了一些关于它的线索，它在 C 文件中的使用似乎是一个头文件。

谁能透露有关此文件类型的更多信息或历史记录？我已经尝试了我最好的 Google-foo，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:54:16.127

我以前从未听说过与 C 相关的文件类型，但在检查文件和 Makefile 之后，它似乎是*导出*的变量和函数，因此是`.e`扩展名。

它们似乎是由一个名为的特殊程序（随软件包提供）创建的，`cexport`其手册页指出：

> cexport - 使用从 C 文件中导出的声明创建头文件

# android - Android：禁用开始播放收音机 FM

> ID：11098427
> 
> 赞同：0
> 
> 时间：2012-06-19T09:45:09.257
> 
> 标签：android, radio

好的，现在我有很大的问题。

我有在显示 FMRadioActivity 时启动的应用程序。无法关闭我的应用程序以强制学生听英语记录。问题是收音机开始自动播放并且令人不安。没有什么可补充的。

请知道如何以编程方式禁用开始播放收音机？

# php - 基于url构建PHP页面

> ID：11098433
> 
> 赞同：0
> 
> 时间：2012-06-19T09:45:28.177
> 
> 标签：php, html, url, dynamic

如果您有如下网址：

```
http://www.example.com/400x200 
```

当用户使用 php 访问该 url 时，是否可以创建一个回显 400x200 的页面？

我知道如何回显路径 - 这很容易（`ltrim($_SERVER['PATH_INFO'], '/')`），但不知道如何动态创建页面。

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:48:33.337

您可能希望查看 Apache Rewrites 以重写您的 URL：

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:51:42.297

不知道动态创建页面是什么意思，但我想使用 of`mod_rewrite`是您所需要的。

在您的`.htaccess`文件中您必须创建一些规则，将 URL 重写为您的 PHP 脚本可区分的内容 - 例如从 URL

```
http://www.example.com/400x200 
```

要得到

```
http://www.example.com/index.php?param=400x200 
```

然后你可以在你的`index.php`脚本中做`echo $_GET['param'];`......

谷歌一些关于 PHP 和`mod_rewrite`：[http ://www.google.com/#q=PHP+mod_rewrite](http://www.google.com/#q=PHP+mod_rewrite)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:52:47.100

假设您使用的是 Apache，这可以使用称为[URL 重写](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)的东西来完成。`.htaccess`在您的文档根目录中创建一个名为的文件，并添加以下内容：

```
# Turn URL rewriting on
RewriteEngine on
Options +FollowSymlinks

# Rewrite rule
RewriteRule ^(\d+x\d+)/?$ index.php?dimensions=$1 [L] 
```

前两行打开重写引擎，第三行定义一个`RewriteRule`. 第一部分`^(\d+x\d+)/?$`是正则表达式，域之后的 URL 部分将与之匹配。

第二部分`index.php?dimensions=$1`是要重写的 URI。客户端看不到这一点，但 PHP 会。

如果我使用 URL 进行`print_r($_GET)`操作，我会得到以下信息：`index.php``http://localhost/400x300`

```
Array ( [dimensions] => 400x300 ) 
```

这是来自`$_GET`PHP 中的标准超全局数组，可以正常使用。URL 重写将 URL 保留在浏览器中，但允许您通过查询字符串将其转换为 PHP 可用的 URL。

* * *

为了使您的脚本更易于使用，您可以拆分表达式以获得单独的 X 和 Y 值：

```
RewriteRule ^(\d+)x(\d+)/?$ index.php?x=$1&y=$2 [L] 
```

这将给出一个这样的数组：

```
Array ( [x] => 400, [y] => 300 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T09:56:31.153

请求 URI ( `/400x200`) 存储在服务器 superglobal:`$_SERVER["REQUEST_URI"]`中。

您需要采用它并相应地路由 URI。最简单的可能方案：在您的 index.php 中，放置以下代码：

```
$uri = trim($_SERVER["REQUEST_URI"],"/");

if (preg_match("/\d+x\d/")) {
    list($width,$height) = explode("x",$uri);
    // some logic with the above vars, e.g. include a view script
} 
```

它的作用是检查 URI 是否具有格式`{number}x{number}`，提取两个数字并将它们存储在变量`$width`和`$height`中。然后你可以对变量做任何你喜欢的事情。

为了使请求始终指向包含此代码的文件，请编辑您的 .htaccess 并输入如下内容：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

（.htaccess 代码是从默认的 Zend Framework 项目中复制的，以防有人询问）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T09:51:19.233

使其成为 GET 变量，例如

```
http://www.example.com?size=400x200 
```

然后你可以检索字符串

```
$size = $_GET['size']; 
```

我建议您做的是根据 split 或 explode() 获取值

```
$lw = $size.explode('x',$size);
$length = $lw[0];
$width = $lw[1];
//Manipulate the values accordingly like
echo $length.'x'.$width; 
```

# php - PHP GD 库制作拼贴问题

> ID：11098435
> 
> 赞同：1
> 
> 时间：2012-06-19T09:45:32.543
> 
> 标签：php, gd

我正在尝试使用 GD 库创建图像拼贴画，但是我在屏幕上显示的只是一个损坏的图像链接。

即时消息源文件是从 facebook URL 获得的 - 我检查了图像的链接，所有这些都是有效的。

我的循环代码如下

```
$pos_counter=0;
        $new_collage = imagecreatetruecolor(851,315); // Create our canvas
        $pos = array(array(0,0), array(206,0), array(412,0), array(618,0));
        $width = 206;
        foreach($collage_images as $image)
        {
            $current_image =     imagecreatefromstring(file_get_contents($image));
            imagecopymerge($new_collage, $current_image,      $pos[$pos_counter][0], $pos[$pos_counter][1],0,0,206,206);
            imagedestroy($current_image);
            $pos_counter++;
        }
        header("Content-type: image/jpeg");
        imagejpeg($new_collage); 
```

这只是返回一个损坏的图像链接。

我开始调试我的代码：

例如，循环仅尝试单独输出每个图像也会返回损坏的图像链接：

```
foreach($collage_images as $image)
        {
            $current_image =imagecreatefromstring(file_get_contents($image));
            header("Content-type: image/jpeg");
            imagejpeg($current_image);

        } 
```

我也尝试回显 $current_image 但是我只返回了资源 ID，这向我显示 imagecreatefromstring 正在工作，因为它没有返回 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:53:55.030

@hakre 建议打开错误报告。这样做并发现我没有传递图像不透明度。

imagecopymerge 应该是

```
imagecopymerge($new_collage, $current_image, $pos[$pos_counter][0], $pos[$pos_counter][1],0,0,206,206,100); 
```

# jquery - 在jquery中保留文本框值

> ID：11098438
> 
> 赞同：1
> 
> 时间：2012-06-19T09:45:48.547
> 
> 标签：jquery, textbox

在以下代码中，每次单击按钮时，alter 都会显示变量 counter=20 的值，即空文本框的值。请对此进行指导。

```
 var username = $("#<%= uname.ClientID %>").val();
 var pwd = $("#<%= pwd.ClientID %>").val();

 var counter = (function () {
            var counter1 = 0;
            return function () {

                if (username == "DEF" && pwd == "5678") {
                    counter1 = 6;
                }

                else if (username == "" && pwd == "") {
                    counter1 = 20;
                }

                else {
                    counter1 = -1;
                }

                return counter1;
            };
            return false;
        })();

        $("#<%= Login.ClientID %>").click(function makecounter1() {

            counter();

            if (counter() != -1) {

                alert(counter());

            }

            else {
                alert("Wrong Credentials");
            }

            return false;

        }); 
```

为什么计数器不显示其他值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:48:55.820

这些值是在页面加载且未刷新时设置的。

移动代码

```
 var username = $("#<%= uname.ClientID %>").val();
 var pwd = $("#<%= pwd.ClientID %>").val(); 
```

进入该功能`counter`，它应该可以工作。

# sql-server - 游标内的表变量，奇怪的行为 - SQL Server

> ID：11098440
> 
> 赞同：1
> 
> 时间：2012-06-19T09:45:58.863
> 
> 标签：sql-server, sql-server-2008

我在表变量上使用 select 的存储过程中观察到一个奇怪的事情。它总是返回在游标的第一次迭代中获取的值（在后续迭代中）。这是一些证明这一点的示例代码。

```
DECLARE @id AS INT;
DECLARE @outid AS INT;

DECLARE sub_cursor CURSOR FAST_FORWARD
    FOR SELECT [TestColumn]
        FROM   testtable1;

OPEN sub_cursor;

FETCH NEXT FROM sub_cursor INTO @id;

WHILE @@FETCH_STATUS = 0
BEGIN            
        DECLARE @Log TABLE (LogId BIGINT NOT NULL);
        PRINT 'id: ' + CONVERT (VARCHAR (10), @id);

        INSERT INTO Testtable2 (TestColumn)
        OUTPUT inserted.[TestColumn] INTO @Log
        VALUES (@id);

        IF @@ERROR = 0
        BEGIN
                SELECT TOP 1 @outid = LogId
                FROM   @Log;
                PRINT 'Outid: ' + CONVERT (VARCHAR (10), @outid);

                INSERT INTO [dbo].[TestTable3] ([TestColumn])
                VALUES (@outid);
        END
        FETCH NEXT FROM sub_cursor INTO @id;
    END

CLOSE sub_cursor;

DEALLOCATE sub_cursor; 
```

但是，当我在 SO 上发布代码并尝试各种组合时，我观察到从下面的行中删除 top 会给我在游标内的表变量中的正确值。

```
SELECT TOP 1 @outid = LogId FROM   @Log; 
```

这会让它像这样

```
SELECT @outid = LogId FROM   @Log; 
```

我不确定这里发生了什么。我认为表变量上的 TOP 1 应该可以工作，认为循环的每次迭代都会创建一个新表。有人可以阐明表格变量范围和生命周期。

**更新**：我有解决方案来规避这里的奇怪行为。作为一种解决方案，我在循环之前在顶部声明了表格，并在循环开始时删除了所有行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:05:17.900

这段代码有很多东西有点偏离。

首先，您在出错时回滚嵌入式事务，但我从未看到您成功提交它。如所写，这将泄漏事务，这可能会在以下代码中给您带来重大问题。

对于表情况，您可能会感到困惑的`@Log`是，SQL Server 没有使用与 C++ 或其他标准编程语言相同的变量范围和生命周期规则。即使在游标块中声明表变量时，您也只会得到一个`@Log`表，然后该表将用于批处理的其余部分，并且将多行插入其中。

因此，您的使用`TOP 1`并没有真正的意义，因为没有任何`ORDER BY`子句可以对表施加任何类型的确定性排序。没有它，您将获得 SQL Server 认为适合给您的任何顺序，在这种情况下，这似乎是插入顺序，每次运行时都会给您该日志表的第一个插入元素`SELECT`。

如果你真的只想要最后一个 ID 值，你需要为你的`@Log`表提供一些真正的排序标准——数据列旁边的某种形式的自动编号或日期字段，可用于为你想要做的事情提供正确的排序.

# java - Spring MVC细化下拉列表选择后

> ID：11098445
> 
> 赞同：1
> 
> 时间：2012-06-19T09:46:14.880
> 
> 标签：java, javascript, html, spring, hibernate

您好我想知道如何创建动态下拉列表，在另一个下拉列表中选择一个值后得到改进。

例如，如果我有两个下拉列表`Customer Name`并且`Customer Country`我选择了某个`Customer Name`，我只想查看相应的客户国家/地区。

使用查询：

```
public List<Customer> getAllCustomerCountries(customerName) {
    return this.sessionFactory
            .getCurrentSession()
            .createQuery(
                    "select distinct customerCountry from Customer where 
                     customerName=:name").setParameter("name", customerName)
                    .list();
} 
```

`customerName`我可以获得相应的国家/地区，但是当在其自己的下拉列表中选择输入值时，如何传递输入值？

这是我用于`customerName`下拉列表的代码：

```
 <tr>
                <td>Customer Name</td>
                <td><form:select path="customerName">
                    <form:option value="" label="--- Select ---" />
                    <form:options items="${customerNameList}" />
                    </form:select>
                </td>
                <td><form:errors path="customerName" cssClass="error" /></td>
            </tr> 
```

在控制器中，列表由以下内容填充：

```
 model.addAttribute("customerNameList",
            customerService.listAllCustomerNames());
    model.addAttribute("customerCountryList",
            customerService.listAllCustomerCountries()); 
```

感谢您的帮助！

/D

**更新**

好的，所以我现在使用 JavaScript 在`CustomerName`选择 a 时提交页面，以便为`CustomerCountry`下拉框加载精炼列表列表。

这是包含脚本的jsp的一部分：

```
 <script>
            function repopulate(){  
                document.getElementById("hasId").value ="true";
                alert("You selected : " + document.getElementById("hasId").value);
                document.deliveryForm.submit();

            }
        </script>

<!-- ... -->        

                <tr>
                    <td><form:hidden id="hasId" path="hasCustomerName" value="false"/></td>
                </tr>

            <tr>
                <td>Customer Name</td>
                <td><form:select path="customerName" onChange="repopulate()">
                    <form:option value="" label="--- Select ---" />
                    <form:options items="${customerNameList}" />
                    </form:select>
                </td>
                <td><form:errors path="customerName" cssClass="error" /></td>
            </tr> 
```

这是控制器的一部分：

```
@RequestMapping(value = "/add", method = RequestMethod.GET)
    public String getDelivery(ModelMap model) {

        DeliveryDto deliveryDto = new DeliveryDto();

        model.addAttribute("deliveryDtoAttribute", deliveryDto)

        model.addAttribute("customerNameList",
                customerService.listAllCustomerNames());
        model.addAttribute("customerCountryList", null);

        return "new-delivery";
    }

    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public String postDelivery(
            @ModelAttribute("deliveryDtoAttribute") @Valid DeliveryDto deliveryDto,
            BindingResult result, ModelMap model) {

        if (deliveryDto.getHasCustomerName() == "true"){

            model.addAttribute("deliveryDtoAttribute", deliveryDto); 

            model.addAttribute("customerNameList",
                    customerService.listAllCustomerNames());
            model.addAttribute("customerCountryList",
                    customerService.listAllCustomerCountries(deliveryDto.getCustomerName()));

            return "new-delivery";
        }

        if (result.hasErrors()) {
            model.addAttribute("deliveryDtoAttribute", deliveryDto); 
            model.addAttribute("customerTargetIdList",
                    customerService.listAllCustomerTargetIds());
            model.addAttribute("customerNameList",
                    customerService.listAllCustomerNames());
            model.addAttribute("customerCountryList",
                    customerService.listAllCustomerCountries(deliveryDto.getCustomerName()));

        }

        Delivery delivery = new Delivery();

        /* A bunch of setters and to set the values in the delivery object that will be saved */

        deliveryService.createDelivery(delivery);

        return "redirect:/home";

    } 
```

我遇到的问题是 post 方法在第一个 if 循环之后不会停止并检查错误，然后在我在`CustomerName`下拉框中选择一个值后立即尝试保存交付。

有谁知道我如何做到这一点，以便它只继续检查错误（第二个 if 循环）并在我点击 jsp 页面中的提交按钮时保存交付？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:52:32.823

您必须将 JavaScript 事件侦听器添加到选择框，这将执行以下操作之一：

*   提交表单（在修改其 action 属性之后），以便控制器重新显示相同的页面但具有不同的国家/地区集
*   使用客户名称向控制器发送 AJAX 请求，并使用响应中包含的国家集动态填充选择框。例如，响应可以是国家/地区的 JSON 数组，或包含选择框的新选项的 HTML 片段。

# python - Python 和 Gtk - 正在使用哪个 GTK 版本？

> ID：11098446
> 
> 赞同：7
> 
> 时间：2012-06-19T09:46:16.757
> 
> 标签：python, gtk, pygobject

```
from gi.repository import Gtk

#print Gtk.GTK_MAJOR_VERSION

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

那是我的代码，我怎么知道正在使用哪个版本的 Gtk。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T10:35:49.103

您可以使用以下函数来获取版本信息：

```
Gtk.get_major_version()
Gtk.get_minor_version()
Gtk.get_micro_version() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:33:08.633

签入 .gir 文件：

```
grep -rin 'get_[a-zA-Z]*_version' /usr/share/gir-1.0/Gtk-3.0.gir 
```

示例输出：

```
grep -rin 'get_[a-zA-Z]*_version' /usr/share/gir-1.0/Gtk-3.0.gir
108409:    <function name="get_major_version"
108410:              c:identifier="gtk_get_major_version"
108424:    <function name="get_micro_version"
108425:              c:identifier="gtk_get_micro_version"
108439:    <function name="get_minor_version"
108440:              c:identifier="gtk_get_minor_version" 
```

# mysql - 改进 sql 查询以排除项目

> ID：11098449
> 
> 赞同：0
> 
> 时间：2012-06-19T09:46:19.893
> 
> 标签：mysql, sql

是否可以改进以下查询：

```
SELECT * 
FROM   search s left join search_criteria sc ON s.id = sc.search_id
WHERE  sc.deleted_at IS NOT NULL 
AND    s.id NOT IN
        (  SELECT s.id
           FROM   search s
                    left join search_criteria sa ON s.id = sc.search_id
           WHERE sc.deleted_at IS NULL
        )
GROUP BY s.id 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:51:17.190

这取决于 - 如果默认数据库是 kelformation，那么我认为您的查询有效地简化为：

```
SELECT  * 
FROM    search s left join search_criteria sc ON s.id = sc.search_id
WHERE   sc.deleted_at IS NOT NULL 
GROUP BY s.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:52:41.190

考虑下一个场景：

你有一个装满弹珠的盒子。什么会更快？

*   展示整个盒子（把它洒在桌子上）

*   或仅显示带有绿点的弹珠（您需要在显示之前检查每个单独的弹珠）。

现在，看来您必须排除，所以您必须接受它。
MySql 存在内部查询问题。您需要将其更改为 LEFT JOIN。
提供您的架构以获得更详细的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:06:46.810

尝试这个 ：：

```
SELECT * 
FROM   search s
          left join search_criteria sc ON s.id = sc.search_id
          left join kelformation.search ks on (s.id=ks.id)
          left join search_criteria sa ON ks.id = sa.search_id
WHERE  sc.deleted_at IS NOT NULL and sc.deleted_at IS NULL 
AND    /*Primary key of kelformation.search */ is null
GROUP BY s.id 
```

# javascript - Javascript/JQuery 创建一个 div - 简单的方式

> ID：11098450
> 
> 赞同：0
> 
> 时间：2012-06-19T09:46:31.233
> 
> 标签：javascript, html

我在 div 中有这段代码：

```
 <div class="user_event my_background">
        <%= image_tag("events_pics/boom.png", :class=> 'event_pic_small') %>
        <h6 class="event_info">Event_1: Frame: 974</h6>
        <a class="btn btn-mini btn-danger pull-right " href="#"><i class="icon-remove"></i></a>
    </div> 
```

并且我希望每次单击按钮时都将其附加到另一个元素中。无论如何，主要问题是，有没有一种简单的方法可以使用 javascript 创建上述 div？例如一个将其作为参数并创建它的函数？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:51:03.603

这个简单的 Jquery 函数会将所选元素内的 html 设置为您想要的任何内容。

```
$("SomeElement").html("<div class='user_event my_background'>...</div>") 
```

只需指定要添加 html 的元素和其余的 html 作为参数，就可以了。希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:50:58.953

如果你可以使用 jQuery 那么

```
$(".user_event").clone().appendTo("#MyTargetElement"); 
```

**编辑**：

我建议您将其隐藏在某个元素中，并使用该隐藏元素的 id 获取它并将其附加到目标元素，而不是一次又一次地创建 div。

```
<div id="myhiddenelement" style="display:none;">
 <div class="user_event my_background">
        <%= image_tag("events_pics/boom.png", :class=> 'event_pic_small') %>
        <h6 class="event_info">Event_1: Frame: 974</h6>
        <a class="btn btn-mini btn-danger pull-right " href="#"><i class="icon-remove"></i></a>
    </div>
</div> 
```

jQuery

```
("#MyTargetElement").append($("#myhiddenelement").html()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:51:30.190

```
function append_to_what(id)//id can be any css3 selector
{var div=document.createElement('div');
div.innerHTML='<%= image_tag("events_pics/boom.png", :class=> "event_pic_small") %><h6 class="event_info">Event_1: Frame: 974</h6><a class="btn btn-mini btn-danger pull-right " href="#"><i class="icon-remove"></i></a>';
'
div.className='user_event my_background';
document.querySelector(id).appendChild(div);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T09:50:18.830

使用这个脚本：

```
$("body").prepend('<div>').addClass("user_event").addClass("my_background");
function addElement()
{
    $(".user_event.my_background").append('<h6 class="event_info">Event_1: Frame: 974</h6>');
    $(".user_event.my_background").append('<a class="btn btn-mini btn-danger pull-right " href="#"><i class="icon-remove"></i></a>');
} 
```

希望这可以帮助！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T09:51:20.190

您可能需要检查 Jquery，您可以在其中使用类名访问 div。

# python - 为什么“网站用 Facebook”登录后，您也会登录到 facebook.com？

> ID：11098455
> 
> 赞同：2
> 
> 时间：2012-06-19T09:46:48.813
> 
> 标签：python, facebook

我正在使用 django-social-auth 通过 facebook 登录登录我的网站。这给我带来了如下问题。1\. 首次登录时，我的网站会重定向到 facebook 登录对话框。2\. 在正确的登录信息上，它会登录到我的网站。3\. 现在，如果我退出我的网站，我将被正确识别为访客。4\. 但是再次点击用 facebook 登录时，我会以之前登录的用户身份直接登录而没有 facebook 对话框。

在进一步的研究中，我意识到当我使用 facebook 登录我的网站时，我也会登录到 facebook.com。当我退出我的网站时，它只会让我退出我的网站，但仍然保持 facebook.com 登录。我知道这是以前登录的用户可以简单地重新登录而无需输入任何用户名/密码。

我知道这有助于一些用户案例。就像我已经登录到 facebook.com 并单击 mysite 上的 facebook 登录一样，我直接登录而无需任何用户名/密码详细信息。

互联网上提到的最常见的解决方案（也可在 stackoverflow 上找到）是使用注销重定向或 javascript 方法手动注销 facebook.com。但是，如果用户在另一个选项卡中手动登录到 facebook.com，或者如果用户使用 facebook 登录到另一个网站，这将成为一个问题。

facebook 以这种方式实施“用于网站的 facebook”的可能原因是什么？

我发现部分正确的一个解决方案是在登录我的网站期间检查登录对话框是否出现，并根据这些数据手动注销 Facebook，如果我的网站首先导致登录。但这是一个部分解决方案，因为它可能仍会从包括 facebook 在内的其他网站注销用户，即使他可能打算留在那里。暂时我会继续这样做，因为它似乎更符合谷歌在其在线应用程序（gmail、阅读器、文档等）中实施的内容。

但我仍在寻找更好的解决方案。

最好的解决方案当然是在登录过程中避免 facebook.com 登录。

等待想法和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:04:58.467

不是您问题的核心部分，但是……：

> 当我退出我的网站时，它只会让我退出我的网站，但仍然保持 facebook.com 的登录状态。

如果是这样，那么你**做错了**。

[Facebook 的政策](https://developers.facebook.com/policy/)实际上**要求**您提供一个按钮，让用户同时退出您的网站**和**Facebook（请参阅第*I 节。特性和功能*，*第 6*项）

# .htaccess - url 重定向的 htaccess 规则

> ID：11098457
> 
> 赞同：0
> 
> 时间：2012-06-19T09:46:51.280
> 
> 标签：.htaccess, redirect

[http://abc.com/forum/forum/topic/topic-1/](http://abc.com/forum/forum/topic/topic-1/)

至

[http://abc.com/forum/topic/topic-1/](http://abc.com/forum/topic/topic-1/)

请帮我编写 htaccess 规则以获取以上 url 。

我想从网址中删除额外的“论坛”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:59:13.010

在 htaccess 文件中尝试以下代码：

重定向[http://abc.com/forum/forum/topic/topic-1/](http://abc.com/forum/forum/topic/topic-1/) http://abc.com/forum/topic/topic-1/

# json - 在 WebClient 方法中在哪里捕获异常？

> ID：11098458
> 
> 赞同：0
> 
> 时间：2012-06-19T09:46:57.723
> 
> 标签：json, windows-phone-7, webclient

我正在开发连接到服务并使用一些 JSON 数据的应用程序。消费效果很好（JSON.net 摇滚），但我想知道我应该在哪里捕获异常错误并显示简单的 MessageBox？在几个地方尝试过，但我的应用程序仍然关闭。或者也许我应该根据包含错误标签的 json 响应来做？我认为正常的错误处理可能会更容易，但现在我脑子里有空白..

代码如下：

```
private void LoginLoginButton_Click(object sender, System.EventArgs e)
        {
            ((ApplicationBarIconButton)ApplicationBar.Buttons[0]).IsEnabled = false;
            ProgressOverlay.Show();
            GenerateLoginString();
            var w = new SharpGIS.GZipWebClient();

            Observable.FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted")
              .Subscribe(r =>
              {

                  var settings = IsolatedStorageSettings.ApplicationSettings;

                  var deserializedRootObject = JsonConvert.DeserializeObject<RootObject>(r.EventArgs.Result);

                  UserSettings us = new UserSettings()
                  {

                          first_name = deserializedRootObject.user.first_name,
                          last_name = deserializedRootObject.user.last_name,
                          user_id = deserializedRootObject.user_id,

                    };
                    settings.Add("UserSettings", us);
                    settings.Save();
              });
            w.DownloadStringAsync(new Uri(UserUri));
            w.DownloadStringCompleted += new DownloadStringCompletedEventHandler(w_DownloadStringCompleted);

        }

        void w_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
                NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:57:43.473

解决了！

在这种情况下，我使用了 try and catch 。完美运行:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:18:55.113

如果您的意思是要捕获 Web 客户端调用中发生的异常，那么它应该`Error`在`DownloadStringCompletedEventArgs`.

```
void w_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if(e.Error != null)
    {
        MessageBox.Show("An error occurred!");
    }
    else
    {
        NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
    }
} 
```

# php - 如何以组合而不是标签显示

> ID：11098460
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:47:12.697
> 
> 标签：php

当我指定`$symbol='<img src=""></img>'`时，`$symbol`页面中的任何地方都正确显示，但组合框中实际上将其显示为标签`"<img src=""></img>"` 本身而不是图像。请提出解决方案，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:49:41.403

假设您`<select>`说“组合框”时指的是元素（组合框是自由文本输入和下拉菜单的组合，`<select>`元素不会生成）：

该`<option>`元素不能包含标记。您不能在其中包含图像。在对标记[执行基本的自动 QA](http://validator.w3.org/)时，您应该已经发现了这一点。

如果您想要一个包含图像的下拉菜单，您需要使用 JavaScript 和其他元素来构建它。

# javascript - 在 Javascript 中使链接处于活动状态

> ID：11098462
> 
> 赞同：5
> 
> 时间：2012-06-19T09:47:30.700
> 
> 标签：javascript, css

我对 Javascript 有一些问题。事实上，我只是该脚本语言的新手，所以我需要一些帮助。问：如何使此链接处于活动状态：

```
<a href="#box1">something</a> 
```

此链接只是指向位于 index.html 文件中的 div 的链接，因此不会加载页面。这是div

```
<div id="box1" class="box">
<h3><a name="box1">something</a></h3>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:05:16.813

由于您刚刚开始，我建议您使用诸如 jQuery 之类的库。所以，如果你的 HTML 是这样的：

```
<div id="box1" class="box">
<h3><a name="box1">something</a></h3>
</div>
<div id="box2" class="box">
<h3><a name="box2">something</a></h3>
</div>
<div id="box3" class="box">
<h3><a name="box3">something</a></h3>
</div> 
```

你有一个名为的 CSS 类`youarehere`：

```
.youarehere { color:white; background:green; } 
```

使用 jQuery，您可以编写以下内容：

```
$(".box > a").click(function() {             // when clicking any of these links
    $(".box > a").removeClass("youarehere"); // remove highlight from all links
    $(this).addClass("youarehere");          // add highlight to clicked link
}) 
```

在纯 JS 中，实现这一点需要更多的努力。帮自己一个忙，不要重新发明轮子——人们已经解决了这个问题，所以用他们的劳动成果让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:59:14.320

a:active 表示当您单击链接时，css 属性将应用于链接，而不是使用 a:active 使用

```
a.visited{color:red;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:00:41.647

要在鼠标悬停时更改链接文本颜色，请使用以下 css：

```
<style type="text/css">
        a:hover{color:Red;}
    </style> 
```

# c# - 在 C# 中附加到鼠标的工具提示

> ID：11098468
> 
> 赞同：4
> 
> 时间：2012-06-19T09:47:45.373
> 
> 标签：c#, .net, windows, tooltip

如何使用 C# 获得附加到鼠标光标的工具提示？我正在尝试实现如下效果，一个显示 Ctrl / Shift / Alt 键状态的小工具提示。

我目前正在使用 a`Tooltip`但它拒绝显示，除非它有大约 2 行文本。

```
tt = new ToolTip();
tt.AutomaticDelay = 0;
tt.ShowAlways = true;
tt.SetToolTip(this, " "); 
```

在鼠标移动中：

```
tt.ToolTipTitle = "....."; 
```

![工具提示](../Images/cfa8925fc7394385dd7c1ff6a050d514.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:14:45.090

所以我认为没有任何方法可以纯粹使用托管代码来做到这一点。你将不得不去本土。

在我看来，有两种选择。

1.  P/调用[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)函数。将 设置`hwnd`为您的目标窗口并为 lParam 传递一条`TTM_ADDTOOL`消息和一个[TOOLINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760256%28v=vs.85%29.aspx)结构。当您想要在尚未创建的外部窗口（不在您的应用程序中）上显示工具提示时，这很有用。您可以通过调用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)来获得它的 hwnd 。

    [在本文](http://www.codeproject.com/Articles/2417/Display-ToolTip-in-any-place-on-the-screen)中查看所有这些是如何完成的。 您只需添加 P/Invoke。

2.  显然，您可以将该`CreateWindowEx()`函数`TOOLTIPS_CLASS`用作类名，它会为您生成一个工具提示。像这样的东西：

    ```
    HWND hwndTip = CreateWindowEx(NULL, TOOLTIPS_CLASS, NULL,
                            WS_POPUP | TTS_NOPREFIX | TTS_ALWAYSTIP,
                            CW_USEDEFAULT, CW_USEDEFAULT,
                            CW_USEDEFAULT, CW_USEDEFAULT,
                            hwndParent, NULL, hinstMyDll,
                            NULL);

    SetWindowPos(hwndTip, HWND_TOPMOST,0, 0, 0, 0,
             SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE); 
    ```

    在此处查看整篇文章：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb760250 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760250(v=vs.85).aspx)

* * *

为了让您快速上手，您可以在 .NET 代码中定义类似的内容。我从[这里](http://www.pinvoke.net/default.aspx/user32/createwindowex.html?diff=y)得到了定义。

您将在同一网站（或其他类似网站）上找到我在答案中提到的所有结构一旦您在代码中定义了所有这些结构，您就可以轻松地转置/移植我的答案中的 C 示例和链接的文章。：

```
class NativeFunctions 
{
[DllImport("user32.dll", SetLastError=true)]
static extern IntPtr CreateWindowEx(
   WindowStylesEx dwExStyle, 
   string lpClassName,
   string lpWindowName, 
   WindowStyles dwStyle, 
   int x, 
   int y, 
   int nWidth, 
   int nHeight,
   IntPtr hWndParent, 
   IntPtr hMenu, 
   IntPtr hInstance, 
   IntPtr lpParam);
} 
```

# android - 如何在android中录制音频时暂停背景音乐

> ID：11098470
> 
> 赞同：0
> 
> 时间：2012-06-19T09:47:54.033
> 
> 标签：android

我正在android中开发一个音频记录应用程序。因此，如果任何背景音乐已经在设备音乐播放器中播放，则应该在开始录制之前暂停，并且只要录制停止或暂停，背景音乐就应该恢复。在播放录制的音频时也应该这样做。有人可以帮我解决这个问题吗？提前致谢..：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:02:21.743

获取 audioManager 并检查

```
audioManager.isMusicActive() 
```

如果真实

```
private void toggleNativePlayer(Context context) {
    Intent intent = new Intent("com.android.music.musicservicecommand");
    intent.putExtra("command", "togglepause");
    context.sendBroadcast(intent);
} 
```

并在完成录制后再次运行此代码以再次开始播放 musig

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T12:59:49.877

*您可以通过请求AudioFocus*来阻止其他应用程序播放音乐。当您被授予*AudioFocus*时，其他应用程序将停止播放音乐，然后您可以根据需要播放/录制。

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

// Request audio focus for playback
int result = am.requestAudioFocus(focusChangeListener,
// Use the music stream.
AudioManager.STREAM_MUSIC,
// Request permanent focus.
AudioManager.AUDIOFOCUS_GAIN_TRANSIENT);

if (result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED) {
// other app had stopped playing song now , so you can start recording.
} 
```

但是，只有一个 AudioManager。**因此，音频焦点被一一**分配给每个请求它的应用程序。这意味着如果另一个应用程序请求音频焦点，**您的应用程序将失去它**。您将通过您在请求音频焦点时注册的音频焦点更改侦听器 ( **afChangeListener ) 的 onAudioFocusChange 处理程序收到音频焦点丢失的通知。**

```
 private OnAudioFocusChangeListener focusChangeListener =
      new OnAudioFocusChangeListener() {
              public void onAudioFocusChange(int focusChange) {
                         AudioManager am =(AudioManager)getSystemService(Context.AUDIO_SERVICE);
                switch (focusChange) {

                       case (AudioManager.AUDIOFOCUS_LOSS) :
                       //Lost focus. Stop recording
                       break;

                       case (AudioManager.AUDIOFOCUS_GAIN) :
                       //Gained AudioFocus. Start recording tasks
                       break;
                       default: break;
        }
    }
}; 
```

# python - 如何在 PyDev ( eclipse ) 中解决这些未解决的导入？

> ID：11098483
> 
> 赞同：0
> 
> 时间：2012-06-19T09:48:30.983
> 
> 标签：python, module, ubuntu-12.04

我得到这些未解决的进口，

```
from gi.repository import GLib, GObject, Gio
from gi.repository import Dee
from gi.repository import Unity 
```

我一直在学习为统一（ubuntu）编写镜头。在哪里/如何获取这些模块并链接它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:27:38.757

那些在你的 PYTHONPATH 中吗？您是否尝试过将“gi”添加到强制内置函数中？有关详细信息，请参见：[http](http://pydev.org/manual_101_interpreter.html) ://pydev.org/manual_101_interpreter.html 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:15:50.377

右键单击项目节点并选择`Properties`. 选择`PyDev - PYTHONPATH`和`External Libraries`选项卡。按`Add source folder`并在包含您的`gi`包的目录上方添加目录。也就是说，如果你有`/src/gi/repository`你应该添加`/src`.

# php - 将 $_SERVER 的输出保存到文件

> ID：11098485
> 
> 赞同：0
> 
> 时间：2012-06-19T09:48:46.817
> 
> 标签：php

我用这个：

```
<?php
foreach($_SERVER as $key => $value){
echo "<b>$key:</b> $value<br>\n";
}

 ?> 
```

在浏览器中输出。无论如何将输出重定向到文件并将其隐藏在浏览器页面中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T09:53:24.567

我会建议类似：

```
<?php
foreach($_SERVER as $key => $value)
{
  file_put_contents('the_file.txt', "<b>$key:</b> $value<br>\n", FILE_APPEND);
}
?> 
```

确保它`the_file.txt`具有写权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:59:27.670

而不是回显构建输出以放入您的文件中：

```
<?php
$in='';
foreach($_SERVER as $key => $value){
    $in .= $key.' - '.$value.PHP_EOL;
}
//save it
file_put_contents('_SERVER.txt', $in);
?> 
```

此外，您不想添加任何 html 标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:03:04.880

要编写文件，您需要使用[file_put_contents()](http://php.net/file_put_contents)。要生成内容的（人类）可读表示，`$_SERVER`应该查看[print_r()](http://php.net/print_r)或[var_export()](http://php.net/var_export)。

```
file_put_contents("/tmp/exported-server.txt", print_r($_SERVER, true)); 
```

使用`$s = print_r($_SERVER)`，`$s = var_export($_SERVER)`甚至`ob_start(); var_dump($_SERVER); $s = ob_get_clean();`确保您获得任何值类型的正确可视化。您的方法仅适用于字符串和数字，但不适用于数组、对象……</p>

# python - 在 Django 视图中使用字典

> ID：11098494
> 
> 赞同：0
> 
> 时间：2012-06-19T09:49:02.900
> 
> 标签：python, database, django, dictionary

在我的 django 应用程序中，我需要创建用户名和文件名之间的映射。当用户选择特定文件时，程序会关联该用户名和文件名之间的映射。

要使用 python 字典，我尝试如下：

```
views.py
----------

uname_file_map ={}

def user_select_file(request):
    filename = get_filename_from_request()
    username = request.user.username
    uname_file_map[username] = filename
    ....

def do_some_file_ops(request):
   username = request.user.username
   process_file_contents(uname_file_map.get(username))
   ... 
```

当我使用两个浏览器（`chrome and firefox`）时，它可以正常工作，以两个不同的用户身份登录并选择两个不同的文件。我想知道的是，如果许多用户同时登录并选择不同的文件，这是否会中断，因为所有人都使用相同的字典实例。

使用两个`database`表`User with a filename_id field`和`Filename`更好的解决方案吗？还是字典就够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:49:15.170

> 当我使用两个浏览器（chrome 和 firefox），以两个不同的用户登录并选择两个不同的文件时，它可以正常工作。

s/它有效/它似乎有效/

只要您在单线程/单进程服务器上运行此代码，并且该进程未重新启动，如果您想要的是每个用户在单个文件的非持久映射，它“有点”工作在给定的时间，您只是不在乎在任何给定的时间要处理什么文件。

一旦您在多线程或多进程环境中部署代码，这将完全中断。

IOW：按照马丁说的做，使用模型；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:55:06.037

你为什么不使用模型来实现你正在寻找的东西？

```
class FileMapping(models.Model):
    user = models.ForeignKey(User)
    file_name = models.CharField(_('filename'))

def user_select_file(request):
    filename = get_filename_from_request()
    fm = FileMapping(user=request.user, file_name=filename)
    ....

def do_some_file_ops(request):
   fm = FileMapping.objects.filter(user=request.user)
   process_file_contents(fm) 
```

我认为它比使用纯 python 解决方案更“django 友好”，需要检查几个安全问题，例如你提到的并发。

# ruby-on-rails - 有什么方法可以知道是否对网站进行了任何分析？

> ID：11098495
> 
> 赞同：1
> 
> 时间：2012-06-19T09:49:04.447
> 
> 标签：ruby-on-rails, google-analytics, analytics

我正在 Rails 中开发一个网站，该网站需要信息，无论是否为输入的网站的 URL 完成任何分析，如谷歌分析或任何其他分析工具。例如，如果我输入：http://facebook.com 并单击 checkAnalytics 按钮，那么它结果是是或否..在这种情况下是肯定的。请让我知道是否有人对此有解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:23:49.440

有一些在线服务可以收集这些信息。

[https://www.ghostery.com](http://www.ghostery.com)制作了一个浏览器扩展程序，用于查找广告网络和分析等第三方脚本。

对于我们的内部 CRM，我们只需请求网站的主页，然后检查以查找 HTML 中的字符串，例如“google-analytics”。

您可以使用[OpenURI ruby​​ 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)来获取网站页面的内容。

希望这可以帮助！

# java - java.io.IOException：CONNECT 的意外响应代码：405

> ID：11098496
> 
> 赞同：1
> 
> 时间：2012-06-19T09:49:18.373
> 
> 标签：java, web-services

有时当我在我的应用程序中时，我会收到以下错误：

**java.io.IOException：CONNECT 的意外响应代码：405**

据我所知，它不会影响我的应用程序。但谁能说出为什么它有时会不断出现，它是什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:31:20.383

远程服务器必须有该`HTTP CONNECT`方法的处理程序，否则你会得到一个`405 Method not allowed`.

# asp.net-mvc - asp.net mvc - 在视图中显示富文本代码

> ID：11098507
> 
> 赞同：3
> 
> 时间：2012-06-19T09:49:52.557
> 
> 标签：asp.net-mvc, asp.net-mvc-3

您将如何显示像这样呈现的 html 代码并 在 ASP.net mvc 3 视图中将其`<b>short article</b>`显示为粗体**短文章？**

我试过了，`@System.Web.HttpUtility.HtmlDecode(item.short_article);`但没有用

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T09:53:37.563

您可以使用[HtmlHelper.Raw](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)。它将返回非 HTML 编码的标记。

但是，在输出这样的 HTML 时，您需要注意安全风险。如果用户输入一些包含 Javascript 的 HTML 代码并将其保存到数据库中，您的页面将呈现并执行此脚本。

如果存在用户为您的 short_article 字段输入恶意数据的风险，您应该根据您希望允许的标签白名单去除他们的输入。

# vba - VBA，错误 400，在电子表格之间切换

> ID：11098508
> 
> 赞同：0
> 
> 时间：2012-06-19T09:49:58.797
> 
> 标签：vba, excel

我从电子表格模块调用一个函数，该函数在另一张表中进行一些处理并返回一个整数。然后，我想将该整数写入工作表中调用该函数的单元格中。我收到错误 400，我想我没有正确处理工作表之间的切换。

你能帮我解决这个问题吗？

```
Function lastNonZero(Rng As Range) As Integer

 i = 19
 Do While ActiveCell.Value = 0
   ActiveCell.Offset(0, -1).Activate
   i = i - 1
 Loop
lastNonZero = i
End Function 
```

从位于 Sheet A 模块中的 Sub 中提取：

```
For j = startRow To startRow + (nRows - 1)
        Worksheets("B").Select
        Range("Y" & j).Activate
        k = lastNonZero(Worksheets("B").Range("Y" & j))
        Worksheets("A").Range("BZ" & j) = k
Next j 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:11:55.467

尝试将`Range("Y" & j)`行替换为：

```
Worksheets("B").Range("Y" & j).Activate 
```

当您调用`Range(xxx)`工作表的模块时，它指的是该工作表中的一个范围，无论它是否被选中。但是，如果未选择工作表并且您尝试选择/激活范围，它将返回错误，因为您无法在不是活动工作表的工作表上选择范围。

`k = lastNonZero(Worksheets("B").Range("Y" & j))`ps：这并没有改变在下一行（ ）上，函数中没有使用参数的事实`lastNonZero`）。

# python - python-websocket 和 socket.io 命名空间

> ID：11098514
> 
> 赞同：3
> 
> 时间：2012-06-19T09:50:18.503
> 
> 标签：python, websocket, socket.io

我会在 python 中编写一个 websocket 客户端来连接到一个用 socket.io 编写的服务器。我当前的代码，取自[1](http://gist.github.com/1402238)如下：

```
import websocket, httplib, sys, asyncore
def connect(server, port):

    print("connecting to: %s:%d" %(server, port))

    conn  = httplib.HTTPConnection(server + ":" + str(port))
    conn.request('POST','/socket.io/1/')
    resp  = conn.getresponse() 
    hskey = resp.read().split(':')[0]
    ws = websocket.WebSocket(
                'ws://'+server+':'+str(port)+'/socket.io/1/websocket/'+hskey,
                onopen   = _onopen,
                onmessage = _onmessage,
                onclose = _onclose)

    return ws

def _onopen():
    print("opened!")

def _onmessage(msg):
    print("msg: " + str(msg))

def _onclose():
    print("closed!")

if __name__ == '__main__':

    server = 'localhost'
    port = 8081

    ws = connect(server, port)

    try:
        asyncore.loop()
    except KeyboardInterrupt:
        ws.close() 
```

我的问题是如何连接到特定的命名空间？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T23:14:08.673

您可以使用在 MIT 许可下在 PyPI 上可用的[socketIO-client 。](http://pypi.python.org/pypi/socketIO-client)它支持单个套接字的不同命名空间。

```
from socketIO_client import SocketIO, BaseNamespace

class MainNamespace(BaseNamespace):

    def on_aaa(self, *args):
        print 'aaa', args

class ChatNamespace(BaseNamespace):

    def on_bbb(self, *args):
        print 'bbb', args

class NewsNamespace(BaseNamespace):

    def on_ccc(self, *args):
        print 'ccc', args

mainSocket = SocketIO('localhost', 8000, MainNamespace)
chatSocket = mainSocket.connect('/chat', ChatNamespace)
newsSocket = mainSocket.connect('/news', NewsNamespace)
mainSocket.wait() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T08:35:32.227

您可以更轻松地更改命名空间。

```
from socketIO_client import SocketIO, BaseNamespace
socket = SocketIO('192.168.4.47', 7777)
chat = socket.define(BaseNamespace, '/openchat')
chat.emit('echo', 'hello openchat my name is Anderson') 
```

我已经在[https://pypi.python.org/pypi/socketIO-client解决了这个问题](https://pypi.python.org/pypi/socketIO-client)

希望你能节省很多时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:05:10.873

我建议您使用 Wireshark 嗅探与 Socket.IO 建立的连接，并通过您的 websocket 连接发送正确的数据包到假冒 Socket.IO 客户端..然后实现 Socket.IO 的数据包和消息传递协议层。

这里有数据包类型的基本文档：

[http://gevent-socketio.readthedocs.org/en/latest/packet.html#module-socketio.packet](http://gevent-socketio.readthedocs.org/en/latest/packet.html#module-socketio.packet)

此外，您可以阅读显示线级协议的测试套件（您可能需要实现）：

[https://github.com/abourget/gevent-socketio/blob/master/tests/test_packet.py](https://github.com/abourget/gevent-socketio/blob/master/tests/test_packet.py)

正如您将在文档中看到的那样，在不同类型的数据包中指定了特定的命名空间。

希望这可以帮助。

# c++ - 如何获取向量的那些元素，其中另一个向量在相应索引处具有“1”

> ID：11098517
> 
> 赞同：3
> 
> 时间：2012-06-19T09:50:21.513
> 
> 标签：c++, stl, vector, indices

我有两个向量

```
std::vector<int>   markedToBeRead(7);   // contains: 1,1,0,0,1,0,1
std::vector<float> myVec(7);            // contains: 1,2,3,4,5,6,7 
```

从 myVec 中获取这些元素的最佳方法是什么，其中 的相应索引`markedToBeRead`具有 value `1`。
这是否可能不使用 for 循环，但使用 stl 方法？

```
std::vector<float> myResult;            // contains: 1,2,5,7 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:23:34.037

显然，这里更喜欢简单的 for 循环，而不是任何 STL 算法。

但就像一个概念的证明一样，这里可以采用 stl::equals 和来自 C++11 的 lambda：

```
std::equal(myVec.begin(), myVec.end(), markedToBeRead.begin(), [&](float item, int mark)->bool {
    if (mark)
        myResult.push_back(item);
    return true;
}); 
```

这有效，但看起来很难看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T10:58:44.310

这是我为此编写算法的方法：

```
template <typename I, typename O, typename M>
void mask_copy(I begin, I end, O obegin, M mbegin) {
    for (; begin != end; ++begin, ++mbegin)
        if (*mbegin)
            *obegin++ = *begin;
} 
```

像这样调用：

```
int a[] = { 1, 2, 3, 4, 5, 6, 7, 8 , 9 };
bool m[] = { true, false, false, false, true, false, false, true, false };

std::vector<int> out;
mask_copy(begin(a), end(a), back_inserter(out), begin(m)); 
```

`std::begin`（对于和需要 C++11 `std::end`。）

也就是说，库中的*正确*实现可能会使用`enable_if`(or `static_assert`) 来确保所使用的迭代器类型与其用途兼容，即，它`I`是一个输入迭代器、`O`一个兼容的输出迭代器和`M`一个其`value_type`is的输入迭代器`bool`。不幸的是，缺乏概念会导致名副其实的模板“爆炸”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T09:57:06.333

像这样的东西？

```
for (unsigned int i = 0; i < myVec.length(); i++)
    if (markedToBeRead[i] == 1)
        myResult.push_back(myVec[i]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T11:08:42.070

在功能方面，这很简单：它是两个输入范围的 zip，然后是标记为 1 的过滤器，然后是映射以仅提取值。

不幸的是，C++ 标准算法不太适合组合。如果您不介意创建中间容器，您可以应用二进制版本的`transform`，后跟`copy_if`（或`remove_copy_if`在 C++03 中，将谓词颠倒，或`remove_if`修改您的中间容器），然后应用一元版本的`transform`.

或者，Boost 以迭代器适配器的形式提供前两个操作。像这样的东西（未经测试）：

```
struct marked {
    bool operator()(boost::tuple<int, float> t) {
        return t.get<0>() == 1;
    }
};

auto first = boost::make_zip_iterator(boost::make_tuple(markedToBeRead.begin(), myVec.begin());
auto last = boost::make_zip_iterator(boost::make_tuple(markedToBeRead.end(), myVec.end());

std::transform(
    boost::make_filter_iterator<marked>(first, last),
    boost::make_filter_iterator<marked>(last, last),
    std::back_inserter(myResults);
    [](boost:tuple<int, float> t) { return t.get<1>(); }
); 
```

您现在可能已经确信 (a) 循环更好，并且 (b) 用其他构造替换循环是 C++ 中的一种旁观运动；-)

如果您需要链接进一步的操作，那么`std::transform`也可以用迭代器适配器替换：`transform_iterator`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T11:12:15.357

这对我有用：

```
#include <algorithm>
#include <iostream>
#include <vector>

int main()  {
        std::vector<int>   markedToBeRead = {  1,1,0,0,1,0,1 };
        std::vector<float> myVec = { 1, 2, 3, 4, 5, 6, 7};

        // copy
        std::vector<float> result;
        std::copy_if(myVec.begin(), myVec.end(),
                std::back_inserter(result), [&](const float & f) {
                        return markedToBeRead[&f - &myVec[0]] == 1;
                });

        // Check result
        for (std::vector<float>::size_type i = 0; i < result.size(); ++i)
                std::cout << result[i] << " ";
} 
```

[在 Ideone 上测试。](http://ideone.com/hIUgo)

# linux - 如何在一台 linux 机器上并行执行多个 perl 脚本？

> ID：11098520
> 
> 赞同：4
> 
> 时间：2012-06-19T09:50:38.420
> 
> 标签：linux, perl

我想从目录运行所有脚本。像 ，

该目录包含 40 个脚本，我想并行运行前 5 个脚本。完成这些脚本后，接下来的 5 个脚本将与剩余的一样执行。

请使用linux和perl命令给出任何解决方案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T10:01:21.557

每个人都喜欢重新发明并行执行工具。

*   [平行线](http://enwp.org/GNU_parallel)
*   [执行程序](http://enwp.org/pexec)
*   [运行N](http://aaroncrane.co.uk/2008/07/runN/)
*   [xapply](http://carrera.databits.net/~ksb/msrc/local/bin/xapply/xapply.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:52:08.610

前 5 个脚本可以使用[nohup吗？](http://linux.die.net/man/1/nohup)让第 5 个脚本写入已完成的某个文件并继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T09:58:52.133

当您在包含脚本的文件夹中时，运行此 bash 脚本/命令：

```
for var in $(ls *.pl)
do
    $var &
    # 5 simultaneous jobs 
    while test "$(jobs |wc -l)" -gt 4 
    do
        sleep 1
    done
done 
```

这取决于您没有运行其他后台作业，通过在命令行上编写“作业”来测试它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T15:12:13.893

不要忘记 GNU Make！使用这样的生成文件并使用 -j 选项运行。见[http://www.gnu.org/software/make/manual/make.html#Parallel](http://www.gnu.org/software/make/manual/make.html#Parallel)

```
scripts=$(wildcard *.sh)
all: $(patsubst %.sh,%.out,$(scripts))
%.out: %.sh
    sh $< > $@ 2>&1 
```

如果您在 Perl 中工作，我建议您使用[Parallel::ForkManager](http://search.cpan.org/~dlux/Parallel-ForkManager-0.7.9/lib/Parallel/ForkManager.pm)

哦，Linux 上的 xargs 似乎有一个 -P 选项来并行运行作业。我没有使用它，因为我的 GNU Make 技巧早于它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T10:40:48.760

```
You can write sth like below. It's pseudo code.

#!/bin/ksh

dir=$1
count=0
for script in $1/*
  do
   count++
   $i &
   add the pid to pidList array
   if( count==5){
     while(waitforProcessComplete(pidList){
     }
   }

  done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T19:24:56.743

我更喜欢 GNU 并行。它既简单又有趣——[文档](http://www.gnu.org/software/parallel/man.html)附带了许多简洁的示例。

最大的优势：您无需编写任何代码或 Makefile 即可运行您的脚本。例子：

```
# create the example scripts:
mkdir scripts
for i in {1..50}; do {echo '#!/bin/sh'; echo "echo $i"; echo "sleep 1" } > scripts/s$i.sh; done

# use parallel to run all these scripts, 5 at a time:
parallel -j 5 ::: scripts/*.sh 
```

# css - 宽度 100% 水平溢出

> ID：11098521
> 
> 赞同：1
> 
> 时间：2012-06-19T09:50:39.303
> 
> 标签：css

我正在使用以下 CSS 来获取标题和部分的宽度。

```
header {
width: 100%;
height: 60px;
    padding:60px;
    float:left;
    background: url('extras/header.jpg') repeat-x;
}

section {
width: 100%;
float: left;
    padding:20px 60px;
height:760px;
    background: url('extras/body.jpg') repeat-x;
} 
```

在 IE、Chrome 和 FF 上，设计被水平拉伸并产生 X 轴滚动条。即使分辨率高达 1300 像素。

谁能明白为什么？我需要指定更多代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T09:53:57.893

填充总是以您定义的宽度添加。所以实际上你的容器将从 css 文件中获得 100%+120px 的宽度。因此，将您的宽度减小到 100% 以下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:17:49.907

您可以使用两个 div，并在外部 div 中设置填充（也请从标题和部分中删除填充）。像那样：

```
header {
    width: 100%;
    height: 60px;
    /* padding:60px; */ /* Move it to outer div */
    float:left;
    background: url('extras/header.jpg') repeat-x;
}

.section {
    width: 100%;
    float: left;
    /*padding:20px 60px;*/ /* Move it to outer div */
    height:760px;
    background: url('extras/body.jpg') repeat-x;
}

<!-- And in your code: -->
<div style="padding: 60px;">
   <div class="header">
      <p>Content here</p>
   </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:58:50.950

如果你不想关心计算 width-padding-margin-doodahs-demwutwuts 的数学，你可以声明你的`headers`和`sections`，`box-sizing: border-box`所以你最终渲染的盒子将是声明的宽度，并且填充将被切割盒子里面。[更多信息](http://css-tricks.com/box-sizing/)

# javascript - 将函数作为参数传递给单独的函数

> ID：11098522
> 
> 赞同：1
> 
> 时间：2012-06-19T09:50:55.653
> 
> 标签：javascript, jquery

我有一个要作为参数传递的函数

```
function myFun(){

}

function myFunParam(myFun){

} 
```

上面的代码正确吗？我如何在`myFun`里面调用函数`myFunParam`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:52:35.990

```
function myFun(){
   alert('test');
}

function myFunParam(myFun){
   if (typeof myFun === "function")
      myFun(); // alerts "test"
} 
```

如果你的函数需要一个参数，你会这样做：

```
function myFun(myarg){
   alert(myarg);
}

function myFunParam(myFun){
   if (typeof myFun === "function")
      myFun('foo'); // alerts "foo"
} 
```

或者您也可以使用对象（实际上是一个类似数组的对象）传递**任意数量的参数。**[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:52:44.370

这是正确的，但我肯定会重命名参数以避免全局 myFun 和参数之间的混淆：

```
function myFunParam(func) {
    func(); // call function
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:04:28.680

```
function myFun(){
}

function myFunParam(myFun){
    if ($.isFunction(myFun)){         
        //Added example of passing arguments to myFun
        myFun.apply(this, ['arg1', 'arg2', 'arg3']);
    }
} 
```

您还可以传递匿名函数，

```
myFunParam(function(){
    alert('anonymous function');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T09:52:58.437

你的代码是对的。你需要这样调用：

```
function myFun(){
}

function myFunParam(myFun){
    // Other Statements
    myFun();
} 
```

希望能帮助到你！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T10:05:49.763

或者你也可以这样做

```
var newFunction = function() {
alert("I am in newFunction");
}

function calleFunction(func) {
func();
}

calleFunction(newFunction); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T10:15:24.497

```
function outerFunction(innerFunction) {
    innerFunction(); // call inner function
} 
```

# ruby-on-rails - 下载上传的文件回形针

> ID：11098526
> 
> 赞同：0
> 
> 时间：2012-06-19T09:51:06.010
> 
> 标签：ruby-on-rails, file, download, paperclip

我在使用回形针时遇到问题。我可以看到上传的文件，但现在我想要一个下载链接，以便在单击“pdf 文件”时下载它。

我看到这个例子：

```
<%= link_to "Download", model.whatever.url(:original, false) %> 
```

但我不知道如何用我自己的视图和模型来实现这一点。

希望可以有人帮帮我。

编辑：

这是我的模型：

```
class Contractgegeven < ActiveRecord::Base

  has_attached_file :pdf

    attr_accessible :bedrijfsonderdeel, :bestemd_voor, :betalingsgegevens, :betreft, :contractbeheerder, :contractduur, :einddatum, :ingangsdatum, :opzegtermijn, :soort_contract, :pdf
    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:29:07.460

说你的模型是`Image`，你有：

```
class Image < ActiveRecord::Base
  has_attached_file :picture 
```

然后你应该写：

```
Image.last.picture.url(:original, false) 
```

不是`Image.last.url(:original, false)`

# drupal - drupal 安装模块：不包含任何 .info 文件

> ID：11098534
> 
> 赞同：1
> 
> 时间：2012-06-19T09:51:24.600
> 
> 标签：drupal, installation

我正在为 drupal 开发一个自定义模块。在安装 drupal 时说：**不包含任何 .info 文件。**

这是信息文件：

```
 ; $Id$
name = Cookiedo
description = Dop default cookie module
core = 7.x
package = Dop development

version = 1.0.0

files[] = cookiedo.install
files[] = cookiedo.module
files[] = cookiedo.admin.inc

configure = admin/config/system/cookiedo 
```

你看到什么缺陷了吗？关于如何解决这个问题的任何想法？我使用 GUI tar 将文件压缩为 .tgz 文件。是的，压缩文件包含 .info 文件..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:14:09.903

找到了解决方案：

**压缩整个文件夹** 而不是压缩所有文件

# android - 如何在 Android 中验证 Hotmail？

> ID：11098538
> 
> 赞同：1
> 
> 时间：2012-06-19T09:51:30.840
> 
> 标签：android

在我的应用程序中，我需要获取 Gmail、Yahoomail 和 Hotmail 联系人。我有 Gmail 和 Yahoo 邮件联系人，但我不知道如何验证 Hotmail。

我通过[此链接](http://androidwarzone.blogspot.in/2011/07/android-oauth-full-example-with-source.html)获得了 Gmail 身份验证和联系方式。我找不到有关 hotmail 身份验证的任何信息。是否可以使用 Android 应用程序对 Hotmail 进行身份验证？如何？

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:02:41.880

**编辑：**
看来我声明没有 Live Id 身份验证 API 的信息很可能已经过时了。我在仔细检查时遇到了这个 Microsoft 网站：[Live Connect Developer Center](http://msdn.microsoft.com/en-us/live)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:06:55.310

Live Connect Hotmail怎么样[（联系人和日历）](http://msdn.microsoft.com/en-us/library/live/hh826535)

这是关于使用 API 的部分是 android 应用程序。 [MSDN Live Connect：Android 应用程序](http://msdn.microsoft.com/en-us/library/live/hh875196.aspx)

# php - 检查两次是否重叠

> ID：11098541
> 
> 赞同：11
> 
> 时间：2012-06-19T09:51:32.233
> 
> 标签：php, mysql, time, overlapping

我想看看我从数据库读取的时间是否与用户提供的时间重叠。

我的数据库如下所示：

```
-----------------------------------------------
|organiser|meeting_start|meeting_end|boardroom|
-----------------------------------------------
| John Doe| 1340193600  | 1340195400| big     |
----------------------------------------------- 
```

我的代码如下所示：

```
date_default_timezone_set('Africa/Johannesburg');
$from = strtotime($_GET['meeting_date'] . ' ' . $_GET['meeting_start']);
$to = strtotime($_GET['meeting_date'] . ' ' . $_GET['meeting_end']);
$another_meeting = false;
$meeting_date = strtotime($_GET['meeting_date']);
$meeting_next = $meeting_date + 86400;

$result = mysql_query("SELECT meeting_start, meeting_end FROM admin_boardroom_booking WHERE boardroom = '" . $_GET['boardroom'] . "' AND meeting_start >= '" . $meeting_date . "' AND meeting_end < '" . $meeting_next . "'")or die(mysql_error());
while($row = mysql_fetch_array($result)) {
    $from_compare = $row['meeting_start'];
    $to_compare = $row['meeting_end'];

    $intersect = min($to, $to_compare) - max($from, $from_compare);
    if ( $intersect < 0 )
        $intersect = 0;

    $overlap = $intersect / 3600;
    if ( $overlap <= 0 ) {
        $another_meeting = true;
        break;
    }
}

if ($another_meeting)
    echo 'ERROR'; 
```

如果我故意键入两个重叠时间，它不会回显错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-19T10:21:08.097

当且仅当至少满足以下条件之一时，两个时间段 P1 和 P2 重叠：

1.  P1 在 P2 的开始和结束之间开始 ( `P2.from <= P1.from <= P2.to`)
2.  P2 在 P1 的开始和结束之间开始 ( `P1.from <= P2.from <= P1.to`)

这将捕获部分重叠的时期以及一个完全覆盖另一个时期的时期。如果它们重叠，则其中一个句点必须始终在另一个句点内开始（或结束）。

所以`$another_meeting`将定义为：

```
$another_meeting = ($from >= $from_compare && $from <= $to_compare) ||
                   ($from_compare >= $from && $from_compare <= $to); 
```

`<`如果一个事件可以在与另一事件完全相同的时间开始，您可能希望将边界情况更改为严格检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:08:49.920

只是在做类似的事情......但只是随着时间......

```
$startTime = strtotime("7:00");
$endTime   = strtotime("10:30");

$chkStartTime = strtotime("10:00");
$chkEndTime   = strtotime("12:10");

if($chkStartTime > $startTime && $chkEndTime < $endTime)
{
    // Check time is in between start and end time
    echo "1 Time is in between start and end time";
}
elseif(($chkStartTime > $startTime && $chkStartTime < $endTime) || ($chkEndTime > $startTime && $chkEndTime < $endTime))
{
    // Check start or end time is in between start and end time
    echo "2 ChK start or end Time is in between start and end time";
}
elseif($chkStartTime==$startTime || $chkEndTime==$endTime)
{
    // Check start or end time is at the border of start and end time
    echo "3 ChK start or end Time is at the border of start and end time";
}
elseif($startTime > $chkStartTime && $endTime < $chkEndTime)
{
    // start and end time is in between  the check start and end time.
    echo "4 start and end Time is overlapping  chk start and end time";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:44:40.083

我可能会用这样的方法解决它：

```
function avaliable($start, $end) {
  // checks if there's a meeting between start or end
  $q = "SELECT * FROM admin_boardroom_booking "
    . "WHERE NOT (meeting_start BETWEEN '$end' AND '$start' "
    . "OR meeting_end BETWEEN '$end' AND '$start')";
  $result = mysql_query($q);

  // returns true on no conflicts and false elseway
  return mysql_num_rows($result) === 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-29T05:39:40.687

Emil Vikström 的回答是正确的，但需要考虑一种情况。
就像，其中一个时间范围是另一个时间范围的子集。
因此，假设`P1{start_time, end_time}`和`P2{start_time, end_time}`将在以下任何一项为真时重叠。

*   P1.start_time <= P2.start_time <= P1.end_time
*   P1.start_time <= P2.end_time <= P1.end_time
*   P2.start_time <= P1.start_time <= P1.end_time <= P2.end_time

只是假设时间按升序排序。下面的例子：

```
|-----------------------------------|
|  Start time  |   End time  | Name |
|-----------------------------------|
|    10:00     |    14:00    |  P1  |
|-----------------------------------|
|    12:00     |    16:00    |  P2  |
|-----------------------------------|
|    08:00     |    12:00    |  P3  |
|-----------------------------------|
|    07:00     |    16:00    |  P4  |
|-----------------------------------| 
```

如果您将 P1 视为基准时间，并且您想对照它检查 P2、P3、P4。

1.  P1.start_time <= P2.start_time <= P1.end_time`true`
2.  P1.start_time <= P3.end_time <= P1.end_time`true`
3.  P4.start_time <= P1.start_time <= P1.end_time <= P4.end_time`true`

这是您可以检查任何时间是否与另一个时间重叠的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-27T17:15:43.673

如果 $to 总是晚于 $from 我们可以使用这个更短的解决方案

```
$another_meeting = !($from > $to_compare || $from_compare > $to); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-13T20:27:10.727

我处理边缘情况的解决方案非常紧凑：

```
 private function meetingOverlap($meeting1, $meeting2){
        if ($meeting1['start']>$meeting2['start'] && $meeting1['start']<$meeting2['end'] ) return true;
        if ($meeting2['start']>$meeting1['start'] && $meeting2['start']<$meeting1['end'] ) return true;
        if ($meeting2['start']==$meeting2['start'] && $meeting1['end']==$meeting2['end'] ) return true;
        return false;
    } 
```

# c# - 如何打开 Outlook 接收和阅读电子邮件

> ID：11098549
> 
> 赞同：3
> 
> 时间：2012-06-19T09:51:53.403
> 
> 标签：c#, outlook

我们有 5 个人使用同一封电子邮件通过 Outlook 回复我们的客户。我想设计一个程序来打开所有发送的电子邮件，阅读它们（*打开它们*），找到第一个人的签名，然后在他/她的柜台上添加一个数字，这样我就可以得出一些统计数据。

关于如何打开 Outlook 通过 C# 收到的电子邮件并解析它们的任何想法（*阅读*）？

你认为[这是我问题的正确答案](https://stackoverflow.com/questions/5880551/how-to-read-emails-from-outlook)吗？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:11:19.633

您可以使用[EWS](http://msdn.microsoft.com/en-us/library/dd633709%28v=exchg.80%29)或[VSTO](http://msdn.microsoft.com/en-us/office/hh133430.aspx)来实现此目的。这真的取决于你更舒服的路线。EWS 可能会更慢，因为它必须进行远程调用，而 VSTO 可以访问本地计算机上的电子邮件。任何一条路线都应该让您访问**电子邮件正文**。

**VSTO**：[MailItem.Body](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.body.aspx)
**EWS**：[EmailMessage.Body](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.item.body%28v=exchg.80%29.aspx)

# uitableview - didSelectRowAtIndexPath 函数如何在 UITableViewController 类中执行某些操作

> ID：11098554
> 
> 赞同：1
> 
> 时间：2012-06-19T09:52:15.613
> 
> 标签：uitableview, uinavigationcontroller, pushviewcontroller, didselectrowatindexpath

我有一个视图并且有 navigationController ...

和一个 rightBarButtonItem ，

然后单击-->使用 popoverController 显示 tableViewController 的视图... tableView 有 3 个单元格----如 A、B、C

我想知道，在表格列表中，不同的文本标签转到不同的视图，单元格A转到View_A，单元格B转到View_B....我需要把视图放在`navigationController`...

但是它在tableViewController的类中不起作用，当我在`didSelectRowAtIndexPath`函数中编写代码时......

我试试

```
[ self.navigationController pushViewController:detailViewController animated:YES]; 
```

或者

```
[ self.parentViewController.navigationController pushViewController:detailViewController animated:YES]; 
```

或者

```
[ self.view.superview.navigationController pushViewController:detailViewController animated:YES]; 
```

**当我单击 tableView 的单元格时，我不知道如何在外面做某事，尤其是如何获取`navigationController`.....**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:19:13.790

当您在弹出视图中时，该视图只是在点击 tableView 的单元格`self`后被关闭，它被称为 popupView 它不起作用。你必须使用`delegate`来完成工作。请参考[此](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009307)链接以供参考

# matlab - %#ok 是什么意思 注释在 MATLAB 中是什么意思？

> ID：11098556
> 
> 赞同：9
> 
> 时间：2012-06-19T09:52:28.407
> 
> 标签：matlab, comments

我遇到了许多带有`%#ok<SAGROW>`注释的 MATLAB 代码。此评论用于不同的情况，我无法弄清楚它的含义。

举个例子：

```
i = 1; 
flag = true;
for l = 1:k
    while(flag==true)
        if(probs(i)~=0)
            leaves(l).val = i-1; %#ok<*SAGROW>
            leaves(l).zero = '';
            leaves(l).one = '';
            leaves(l).prob = probs(i);
            i = i + 1; 
            flag = false;
        else
            i = i+1;
            flag = true;
        end
    end
flag =true;
end 
```

还有其他对此评论的引用，例如：

*   [http://www.codeproject.com/Questions/151765/answer.aspx](http://www.codeproject.com/Questions/151765/answer.aspx)
*   [http://www.scribd.com/doc/69869075/EEE-554-Matlab-Solutions](http://www.scribd.com/doc/69869075/EEE-554-Matlab-Solutions)
*   [http://www.mathworks.com/matlabcentral/newsreader/view_thread/321047](http://www.mathworks.com/matlabcentral/newsreader/view_thread/321047)
*   [http://www.nd.edu/~jrunkle1/ballis_problem.m](http://www.nd.edu/~jrunkle1/ballis_problem.m)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T09:55:47.250

它抑制`mlint`警告。在这种特定情况下，它是关于不预先分配数组。

[mlint](http://www.mathworks.com/help/techdoc/matlab_env/brqxeeu-151.html#brqxeeu-156)是 Matlab 拥有的静态代码分析工具之一。它会发现可能的错误并显示警告。

**编辑（1）**：我刚刚注意到您的问题是关于`SAGROW`，而不是`AGROW`。我找不到。我的猜测是它是一种旧的/新的 mlint 语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-09T22:26:25.273

[一般答案](http://www.mathworks.de/de/help/matlab/matlab_prog/check-code-for-errors-and-warnings.html#brx2q1o)（对于尖括号中的不同值）：

输入`msgid:SAGROW`首选项-> 代码分析器。

为他人`msgid:<your-ok-msg-id>`。

**编辑：** 最短的方法，1.删除注释，2.阅读下划线代码的代码分析器工具提示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T09:58:11.887

我不知道`SAGROW`，但`AGROW`意味着给定的数组/向量/矩阵`<name> might be growing inside a loop. Consider preallocating for speed`。

# jquery - jquery timepicker插件onDone

> ID：11098561
> 
> 赞同：1
> 
> 时间：2012-06-19T09:52:42.870
> 
> 标签：jquery, datepicker, add-on, timepicker

我找到了这个。 [http://forum.jquery.com/topic/datepicker-done-button-onclick](http://forum.jquery.com/topic/datepicker-done-button-onclick) 我尝试将它与 timepicker 插件一起使用（http://trentrichardson.com/2010/04/19/timepicker-addon-for-jquery -ui-datepicker），但它不起作用。有谁有想法，如何让它工作？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T21:19:15.900

使用这个**onClose**函数：

```
onClose: function() {

      function isDonePressed(){
            return ($('#ui-datepicker-div').html().indexOf('ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all ui-state-hover') > -1);   
      }

       if (isDonePressed()){

            //do your job

      }

 } 
```

# asp.net - ASP.NET：是否可以在 Global.asax 中调用异步任务？

> ID：11098575
> 
> 赞同：15
> 
> 时间：2012-06-19T09:53:26.287
> 
> 标签：asp.net, asynchronous, task, global-asax

我需要在 Global.asax 中对我的数据库调用一些异步操作。例如，在 Application_AuthenticateRequest 中，我需要针对 DB 对用户进行身份验证是否可以使用异步任务？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-03-15T14:02:21.847

现在有一种更简单的方法可以做到这一点：

```
 public MvcApplication()
    {
        var wrapper = new EventHandlerTaskAsyncHelper(DoAsyncWork);
        this.AddOnAuthenticateRequestAsync(wrapper.BeginEventHandler, wrapper.EndEventHandler);
    }

    private async Task DoAsyncWork(object sender, EventArgs e)
    {
        var app = (HttpApplication)sender;
        var ctx = app.Context;

        ...
        await doSomethingAsync();
    } 
```

使用这种方法，您可以使用 async 关键字定义一个方法，并使用“EventHandlerTaskAsyncHelper”类包装该方法，以生成 BeginEventHandler 和 EndEventHandler 方法以传递给 AddOnAuthenticateRequestAsync 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:24:12.973

我没有找到使用新 C# 关键字 async 和 await 的方法，但我们仍然可以使用 APM 模式在 Global.asax 中使用异步操作，因为它实现了 IHttpAsyncHandler 接口。这是一个演示异步的小代码，这里我以 WebRequst 为例，在您的情况下，请改用数据库操作。

```
 public Global()
    {
        this.AddOnAuthenticateRequestAsync(BeginGetAsyncData, EndGetAsyncData);
    }

    IAsyncResult BeginGetAsyncData(Object src, EventArgs args, AsyncCallback cb, Object state)
    {
        Console.WriteLine("BeginGetAsyncData: thread #" + System.Threading.Thread.CurrentThread.ManagedThreadId);
        WebRequest request = WebRequest.Create("http://www.google.com");
        return request.BeginGetResponse(cb, request); // call database async operation like SqlCommand.BeginExecuteReader()
    }

    void EndGetAsyncData(IAsyncResult ar)
    {
        Console.WriteLine("EndGetAsyncData: thread #" + System.Threading.Thread.CurrentThread.ManagedThreadId);

        WebRequest requst = (WebRequest)ar.AsyncState;
        System.Net.WebResponse response = requst.EndGetResponse(ar); // call database async operation like SqlCommand.EndExecuteReader()

        Console.WriteLine(new StreamReader(response.GetResponseStream()).ReadToEnd());
        response.Close();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T08:19:40.480

您必须自己添加 AuthenticateRequest 的异步版本。使用以下代码：

```
public MvcApplication()
{
    // Contrary to popular belief, this is called multiple times, one for each 'pipeline' created to handle a request.
    // Wire up the async authenticate request handler.
    AddOnAuthenticateRequestAsync(BeginAuthenticateRequest, EndAuthenticateRequest, null);
} 
```

接下来的问题是，如何实现`BeginAuthenticateRequest`和`EndAuthenticateRequest`使用 C# 的新 async/await 特性。首先，让我们把异步版本的 AuthenticateRequest 去掉：

```
private async Task AuthenticateRequestAsync(object sender, EventArgs args)
{
    // Yay, let's do async stuff!
    await ...
} 
```

我们接下来需要做的是提出 BeginAuthenticateRequest 和 EndAuthenticateRequest 的实现。我关注[了一篇博客文章](http://blogs.msdn.com/b/pfxteam/archive/2011/06/27/10179452.aspx)，但得出了我自己的实现：

```
private IAsyncResult BeginAuthenticateRequest(object sender, EventArgs args, AsyncCallback callback, object state)
{
    Task task = AuthenticateRequestAsync(sender, args);
    var tcs = new TaskCompletionSource<bool>(state);

    task.ContinueWith(_ =>
    {
        if (task.IsFaulted && task.Exception != null) tcs.TrySetException(task.Exception.InnerExceptions);
        else if (task.IsCanceled) tcs.TrySetCanceled();
        else tcs.TrySetResult(true);

        if (callback != null) callback(tcs.Task);
    }, CancellationToken.None, TaskContinuationOptions.None, TaskScheduler.Default);

    return tcs.Task;
} 
```

您可以阅读整个链接文章以了解它是如何工作的，但基本上`IAsyncResult`是由 Task 实现的，所以您所要做的就是在完成时调用回调。

最后一点很简单：

```
private void EndAuthenticateRequest(IAsyncResult result)
{
    // Nothing to do here.   
} 
```

# sql - TSQL选择键分组的最近的非未来日期范围

> ID：11098576
> 
> 赞同：1
> 
> 时间：2012-06-19T09:53:26.753
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是简化的表结构`PRICES`：

> ```
> SKU      PriceType    FromDate      ToDate        Price
> ..............................................................
> SUR40    NONMEMBER    1900-01-01    1900-01-01    1000
> SUR40    RSP          1900-01-01    1900-01-01    1500
> SUR40    MEMBER       2012-07-04    2012-07-04    649
> SUR40    MEMBER       2012-06-15    2012-06-15    699
> SUR40    MEMBER       2012-06-01    2012-06-01    599
> SUR40    MEMBER       2012-03-31    2012-03-31    699
> SUR40    MEMBER       1900-01-01    1900-01-01    749 
> ```

此`PRICES`表存储所有产品的所有价格。`FromDate`和`ToDate`列指定价格应该生效的时间段。如果指定日期没有促销活动，则默认价格为空日期（返回为 1900-01-01）。

给定 SKU 和日期，查询应返回适用于该日期的产品价格。例如，使用 2012-06-16 选择应该返回：

> ```
> SUR40    NONMEMBER    1900-01-01    1900-01-01    1000
> SUR40    RSP          1900-01-01    1900-01-01    1500
> SUR40    MEMBER       1900-01-01    1900-01-01    749 
> ```

使用 2012-06-15 选择应该返回：

> ```
> SUR40    NONMEMBER    1900-01-01    1900-01-01    1000
> SUR40    RSP          1900-01-01    1900-01-01    1500
> SUR40    MEMBER       2012-06-15    2012-06-15    699 
> ```

SQL 服务器是 MS SQL 2008 R2。自从我编写上一个 SQL 查询以来已经有一段时间了，我似乎无法理解这一点。:(

任何帮助将不胜感激。到目前为止，这是我想出的：

```
select SKU, PriceType, FromDate, ToDate, Price from PRICES
where SKU IN ('SUR40')
and PriceType IN ('NONMEMBER','RSP','MEMBER')
and FromDate < GETDATE()
order by PriceType, FromDate DESC 
```

我认为应该有一个`group by`地方，但是使用在失败时不返回错误消息的 Web 服务不是很有帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:15:57.397

样本数据：

```
DECLARE @PRICES TABLE (
    SKU nvarchar(10),
    PriceType nvarchar(10),
    FromDate date,
    ToDate date,
    Price int
)

INSERT @PRICES VALUES 
('SUR40'  ,  'NONMEMBER' ,   '1900-01-01'  ,  '1900-01-01'  ,  1000 ) ,
('SUR40'  ,  'RSP'        ,  '1900-01-01'  ,  '1900-01-01'  ,  1500 ) ,
('SUR40'  ,  'MEMBER'    ,   '2012-07-04'  ,  '2012-07-04'  ,  649  ) ,
('SUR40'  ,  'MEMBER'   ,    '2012-06-15'  ,  '2012-06-15' ,   699  ) ,
('SUR40'  ,  'MEMBER'   ,    '2012-06-01'  ,  '2012-06-01' ,   599  ) ,
('SUR40'  ,  'MEMBER'    ,   '2012-03-31'  ,  '2012-03-31'  ,  699  ) ,
('SUR40'  ,  'MEMBER'     ,  '1900-01-01'  ,  '1900-01-01'   , 749  ) 
```

查询参数：

```
DECLARE @SKU nvarchar(10)
DECLARE @Date date

SET @SKU = 'SUR40'
SET @Date = '2012-06-15' 
```

询问：

```
SELECT * FROM 
    (
    SELECT
        SKU,
        PriceType,
        FromDate,
        ToDate,
        Price,
        ROW_NUMBER() 
            OVER (
                PARTITION BY SKU, PriceType
                ORDER BY 
                CASE 
                    WHEN (FromDate = '1900-01-01' 
                      AND ToDate = '1900-01-01') THEN 1 
                    ELSE 0
                END ASC) rn
    FROM @PRICES
    WHERE 
        SKU = @SKU
        AND (
            (FromDate = '1900-01-01' AND ToDate = '1900-01-01')
            OR
            (FromDate <= @Date AND @Date <= ToDate)
            )
    ) Raw
WHERE rn = 1 
```

由内而外的解释：

*   对于每个 SKU 和价格类型，我们都对后备行和日期匹配行感兴趣，如果有的话
*   我们想要一个日期匹配的行，所以我们使用`ROW_NUMBER()`with 合适的`PARTITION`and`ORDER BY`子句将日期匹配的行（如果有的话）排在后备行的前面
*   这是内部, `Raw`, 查询
*   然后，我们只需从中选择所有`Raw`具有 rownumber的行`1`。这将是它们存在的日期匹配行，或者是没有日期匹配行的后备行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:19:15.363

尽管您的第二个查询似乎有问题（尽管日期为 749，但您已省略了价格为 749 的记录``1900-01-01`），但我认为您希望始终返回`1900-01-01`日期：

```
select SKU, PriceType, FromDate, ToDate, Price 
from PRICES
where SKU='SUR40'
and PriceType IN ('NONMEMBER','RSP','MEMBER')
and ((FromDate='1900-01-01' AND ToDate='1900-01-01')
    OR 
     (FromDate>='2012-06-15' AND ToDate<='2012-06-15')
    )
order by PriceType, FromDate DESC 
```

当然，您应该使用上面的参数而不是常量值。

这是 SQL 小提琴：[http ://sqlfiddle.com/#!3/18cf7/4](http://sqlfiddle.com/#!3/18cf7/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:06:18.370

您不需要分组依据，您只需要对日期添加限制：

```
select SKU, PriceType, FromDate, ToDate, Price from PRICES
where SKU IN ('SUR40')
and PriceType IN ('NONMEMBER','RSP','MEMBER')
and (FromDate = '1900-01-01' or @dateToProcess between FromDate and ToDate)
order by PriceType, FromDate DESC 
```

`@dateToProcess`将是 2012-06-16 或 2012-06-15 等。

# asp.net - 当用户从基于 Windows 身份验证的 ASP.Net MVC 网站退出时，如何运行清理代码？

> ID：11098590
> 
> 赞同：0
> 
> 时间：2012-06-19T09:54:11.090
> 
> 标签：asp.net, asp.net-mvc

我有一个使用**Windows 身份验证**的基于 ASP.Net MVC 3 Intranet 的 Web 应用程序。每当用户启动应用程序时，我们都需要在数据库中存储一些用户特定的数据（仅用于当前用户会话）。

当用户退出应用程序时（即通过关闭浏览器窗口，由于超过 30 分钟不活动，网络故障等），我需要一种完整的证明方法来从数据库中删除这些临时数据

我只是想在布局页面中包含一个 javascript，用于定期记录用户在数据库中的最后活动时间，然后构建一个调度程序，如果活动时间高于定义，它可以检查数据库并删除用户的临时数据临界点。

请建议是否有更好和更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:00:14.143

即使在用户关闭窗口而不注销之后，问题肯定是清理。我们使用类似的解决方案，我们有一个计划的作业来查找过期会话并删除相关数据。不过，我们查找过期解决方案的方法要简单一些。

我们有一个 HttpModule ，它`AuthenticateRequest`更新`LastActiveOn`我们用户实体的属性。我们过滤掉某些类型的请求（如 AJAX 轮询、对图像和静态资源的请求等）。

# php - 将 htaccess 配置为只读 index.php

> ID：11098595
> 
> 赞同：-1
> 
> 时间：2012-06-19T09:54:26.583
> 
> 标签：php, apache, .htaccess

他们是我可以将 .htaccess 文件配置为只读特定文件的一种方式吗？只说 index.php 而不是其他的？

**编辑：**我知道 index.php 是将被读取的默认文件。我想要这样的东西：

如果用户输入 www.example.com 它默认读取 index.php。如果如果输入 www.example.com/index2.php 它应该读取 index2.php。

我想要的不是在任何地方显示 404 错误页面，无论 url 是什么。我只有两个文件应该被读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:01:42.960

Zend Framework 提供了一个默认的 .htaccess，它将所有请求路由到 index.php，除非请求的文件确实存在：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

您可以使其更具限制性并将所有内容路由到 index.php：

```
RewriteEngine On
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

请记住，这将使对 CSS 文件的额外请求变得不可能。

[编辑]

看看 Drupal 提供的 .htaccess 也很不错。在那里，某些路径和文件类型也被阻止。Drupal 的 .htaccess 中的第一个指令是：

```
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$">
    Order allow,deny
</FilesMatch> 
```

因此，如果您只想阻止对 php 文件和`application`目录中所有内容的访问，您可能会这样做：

```
<FilesMatch "(\.php$|^application)">
    Order allow,deny
</FilesMatch> 
```

（未测试，因为我不是 htaccess 专家，代码只是我的头脑；如果需要更正，请有人在评论中发表评论或直接编辑我的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:56:58.767

您并没有真正提供有关您真正想要做的事情的太多信息，如果您尝试仅对某些文件要求身份验证，那么您可以使用如下内容：

```
<Files "index.php">
require valid-user
</Files> 
```

不幸的是，如果没有更多信息，我真的无法提出任何其他建议。

# delphi - 将文本拖放到 SynEdit 控件中

> ID：11098596
> 
> 赞同：3
> 
> 时间：2012-06-19T09:54:32.820
> 
> 标签：delphi, drag-and-drop, synedit

我在表单上有一个**TSynEdit控件，我想从****TVirtualStringTree**拖放焦点节点文本。**我希望它的行为方式与您在TSynEdit**控件中拖放突出显示的文本时相同：

*   当您拖过**TSynEdit**时，插入符号应标记当前放置位置。
*   删除文本时，它应该替换当前突出显示的任何文本。
*   放置位置应正确处理标签。

我查看了**TSynEdit** *DragOver*事件中的代码，但它使用了几个我无法在后代类中访问的变量和过程，因为它们被声明为**private**。

我检查了所有**TSynEdit**演示，但找不到满足我需求的演示。

有人成功地做到了这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:13:51.717

AZ01 的回答并没有完全符合我的要求，但它确实为我指明了正确的方向。这是我最终使用的代码：

```
procedure TfrmTemplateEdit.memTemplateDragDrop(Sender, Source: TObject; X,
  Y: Integer);
var
  InsertText: String;
  ASynEdit: TSynEdit;
  OldSelStart, DropIndex: Integer;
  LCoord: TBufferCoord;
begin
  // Set the Insert Text
  InsertText := 'The text to insert';

  // Set the SynEdit memo
  ASynEdit := TSynEdit(Sender);

  // Get the position on the mouse
  ASynEdit.GetPositionOfMouse(LCoord);

  // Find the index of the mouse position
  DropIndex := ASynEdit.RowColToCharIndex(LCoord);

  // Delete any selected text
  If (ASynEdit.SelAvail) and
     (DropIndex >= ASynEdit.SelStart) and
     (DropIndex <= ASynEdit.SelEnd) then
  begin
    // Store the old selection start
    OldSelStart := ASynEdit.SelStart;

    // Delete the text
    ASynEdit.ExecuteCommand(ecDeleteChar, #0, Nil);

    // Move the caret
    ASynEdit.SelStart := OldSelStart;
  end
  else
  begin
    // Position the caret at the mouse location
    ASynEdit.CaretXY := LCoord;
  end;

  // Insert the text into the memo
  ASynEdit.ExecuteCommand(ecImeStr, #0, PWideChar(InsertText));

  // Set the selection start and end points to selected the dropped text
  ASynEdit.SelStart := ASynEdit.SelStart - length(InsertText);
  ASynEdit.SelEnd := ASynEdit.SelStart + length(InsertText);

  // Set the focus to the SynEdit
  ASynEdit.SetFocus;
end; 
```

该代码似乎可以与选择、选项卡和撤消一起正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:15:05.277

我认为您可以通过将两个事件分配给您的编辑器来实现您的目标：DragOver/DragDrop。

*1/您在DragOver 事件*中测试有效性，您还通过调用**GetPositionOfMouse移动插入符号**

```
Procedure TForm1.EditorDragOver(Sender,Source: TObject;X,Y: Integer; State: TDragState; Var Accept: Boolean);
Var
  LCoord: TBufferCoord;
  LMemo: TSynMemo;
Begin
  LMemo := TSynMemo(Sender);
  // In your case you would rather test something with your tree...
  Accept := Clipboard.AsText <> '';
  // "As you drag over the TSynEdit, the caret should mark the current drop position": OK
  If LMemo.GetPositionOfMouse(LCoord) Then
    LMemo.CaretXY := LCoord;
End; 
```

*2/ 您在DragDrop 事件*中使用编辑器命令，清除选择并插入字符

```
Procedure TForm1.EditorDragDrop(Sender, Source: TObject; X,Y: Integer);
Var
  LMemo: TSynMemo;
Begin
  LMemo := TSynMemo(Sender);
  // "When the text is dropped, it should replace any text that is currently highlighted." : OK
  If LMemo.SelAvail Then
    LMemo.ExecuteCommand( ecDeleteChar , #0, Nil );
  // Paste, same comment as previously, here it's just an example...
  LMemo.ExecuteCommand( ecPaste, #0, Nil );
End; 
```

这必须根据您的上下文进行一些调整。

# android - android EditTextPreference onclick

> ID：11098599
> 
> 赞同：3
> 
> 时间：2012-06-19T09:54:50.703
> 
> 标签：android, onclick, preferences

我正在进行设置活动，我想让用户选择声音通知。我用这个来做到这一点：

```
EditTextPreference dataPref = (EditTextPreference) findPreference("opcion3");

        dataPref.setOnPreferenceClickListener(new OnPreferenceClickListener() {

            public boolean onPreferenceClick(Preference preference) {
                Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
                intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_NOTIFICATION);
                intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
                intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri) null);
                Ajustes.this.startActivityForResult(intent, 5);          
                return true;
            }
          }); 
```

但是，当我单击 EditTextPreference 时，它​​会显示一个带有 OK 和取消的编辑框，并立即显示通知声音列表。

我怎样才能让它只显示通知声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T17:09:54.933

为什么使用 EditTextPreference？使用 RingtonePreference 或创建自定义首选项。

```
<RingtonePreference 
    android:key="notification_sound" 
    android:ringtoneType="notification" 
    android:title="Notification Sound" 
    android:defaultValue="content://settings/system/notification_sound"
    android:showDefault="true" 
    android:showSilent="true" /> 
```

# .net - 目标框架下拉列表为空

> ID：11098601
> 
> 赞同：5
> 
> 时间：2012-06-19T09:55:03.057
> 
> 标签：.net, visual-studio-2010

我安装了 VS.NET 2010 Premium，但在尝试针对现有 .NET 框架时似乎存在问题。当我打开 Web 应用程序项目的属性时，我得到的唯一选择是安装框架。如果我打开任何其他项目类型的属性，我会得到完整的列表。

到目前为止，我做了以下无济于事：

*   修复并重新安装 Microsoft.NET Framework 4 客户端配置文件
*   修复并重新安装 Microsoft.NET Framework 4 Extended
*   修复并重新安装 Microsoft.NET Framework 4 多目标包
*   修复并重新安装 VS.NET 2010 Premium
*   重新应用并重新安装 VS.NET 2010 SP1。

我确实发现了一个似乎相关的问题，但不幸的是没有答案。

[Visual Studio 2010“无目标框架”](https://stackoverflow.com/questions/10430943/visual-studio-2010-no-target-framework)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:58:17.643

我在许多不同的机器上也遇到过这个问题，每次都不得不重新发现答案！

对我来说一直有效的解决方案是更改机器上的用户变量“TEMP”和“TMP”的环境变量。我将这两个变量都重新指向“c:\Temp”，而不是路径中包含您的用户名（带撇号）的默认位置。

![在此处输入图像描述](../Images/aae3b8d4bd1001a2718d097c263eef92.png)

在努力完成与帐户特定路径（项目、模板等）相关的每个 Visual Studio 设置之后，这是我解决问题所需进行的唯一更改。

马特奥布莱恩

# wpf - 在 WPF DrawingContext 上绘制旋转图像时的 DrawImage 过滤

> ID：11098603
> 
> 赞同：0
> 
> 时间：2012-06-19T09:55:08.123
> 
> 标签：wpf, drawimage, drawingcontext

我在控件上绘制图像，通常仅旋转几度。这使得适当的过滤很重要，但我看到的伪影看起来像是最近邻问题。绘制图像时在哪里可以设置要使用的过滤器？

图像大于屏幕上的最终尺寸。

```
 private void drawRotatedImage( DrawingContext dc , double width_px , double x , double y , double angle )
    {
        dc.PushTransform( new TranslateTransform(x,y) );
        dc.PushTransform( new RotateTransform(angle) );
        double scale = width_px / image.Width;
        Rect rr = new Rect( -image.Width*0.5*scale , -image.Height*0.5*scale , image.Width*scale , image.Height*scale );
        dc.DrawImage( image , rr );
        dc.Pop();
        dc.Pop();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:07:30.097

如果您在 .NET 4 中编写代码，那么您需要将过滤器升级到更高质量的 Fant 过滤器。

通过在 Window 或特定元素上放置附加属性来做到这一点。

*   [http://msdn.microsoft.com/en-us/library/system.windows.media.bitmapscalingmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.bitmapscalingmode.aspx)

*   [http://10rem.net/blog/2010/05/01/crappy-image-resizing-in-wpf-try-renderoptionsbitmapscalingmode](http://10rem.net/blog/2010/05/01/crappy-image-resizing-in-wpf-try-renderoptionsbitmapscalingmode)

*   [http://10rem.net/blog/2010/05/16/more-on-image-resizing-in-net-4-vs-net-35sp1-bilinear-vs-fant](http://10rem.net/blog/2010/05/16/more-on-image-resizing-in-net-4-vs-net-35sp1-bilinear-vs-fant)

# java - 如何在 Websphere Application server 8.5 中设置 JAVA_HOME

> ID：11098604
> 
> 赞同：4
> 
> 时间：2012-06-19T09:55:17.437
> 
> 标签：java, websphere

由于 WAS 8.5 默认随 IBM JDK6 一起提供，因此我使用 Installation Manager 安装了 IBM JDK7

但是当我运行我的应用程序时，它使用的是 IBM JDK6 而不是 JDK7

有人可以让我知道如何设置 JAVA_HOME 以使用 JDK7 而不是 JDK6

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T11:03:38.390

使用记录的[`managesdk`](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=/com.ibm.websphere.nd.iseries.doc/ae/rxml_managesdk.html)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T12:05:44.743

您可以从 Web 控制台更改服务器使用的 SDK：在 Web 控制台上选择您的服务器，然后在右侧，单击“java SDKs”并选择您想要的

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T10:01:57.283

查看 WAS 安装目录中的 setupCmdLine.bat/sh 文件。据我记得你应该可以直接设置 JAVA_HOME（例如 JAVA_HOME=C:\Program Files\WebSphere\AppServer\java 或 JAVA_HOME=C:\MyJDK）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-12T09:27:23.407

是的，Maciej，

我相信我可以 setupCmdLine.bat 在这里会有所帮助。

谢谢， Kusuma

# c++ - 默认构造函数的宏可能，等待编译器支持？

> ID：11098605
> 
> 赞同：0
> 
> 时间：2012-06-19T09:55:35.210
> 
> 标签：c++, constructor, c++11, c++03

```
struct Foo {
    int data;
    Foo() = default;
    Foo(const Foo& arg) = default;
}; 
```

但是我的编译器[还没有默认的构造函数](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)。

我可以定义一个宏`DEFAULTED`来代替`= default`吗？如果它刚刚离开该行

```
 Foo(const Foo& arg); 
```

编译器仍会生成其默认值，还是会抱怨？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:01:50.057

当然可以：

```
#if __cplusplus == 201103L
# define DEFAULTED(func) func = default;
#else
# define DEFAULTED(func)
#endif

struct foo
{
    DEFAULTED(foo())
}; 
```

但是：某些编译器支持 C++11 的部分内容，即使它们不支持默认构造函数，也可能设置`__cplusplus`为。`201103L`

# java-me - 如何在 j2me 应用程序中锁定横向模式？

> ID：11098607
> 
> 赞同：3
> 
> 时间：2012-06-19T09:55:42.977
> 
> 标签：java-me, orientation, midp, lcdui

我只想以纵向模式显示我的应用程序。我必须在我的应用程序中限制横向模式。

每个设备都有单独的属性。

对于诺基亚，**Nokia-MIDlet-App-Orientation : Portrait**。对于三星，**MIDlet-ScreenMode : Portrait**。

在 JAD 中添加这些后，我尝试将其安装在诺基亚 C5 中。我无法安装它。我收到**Compulsory attribute missing 错误**，因为自定义 JAD 属性不应以**MIDlet- 开头**。**由于MIDlet-ScreenMode : Portrait**属性，我无法安装它。

是否有任何通用代码可以锁定所有设备（如诺基亚、LG、摩托罗拉、三星等）中的横向模式，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:06:02.253

MIDP 中无法将应用程序锁定到某个方向。这通常通过不同设备上的专有 JAD 参数来实现。您需要找出这些参数对于您希望定位的设备是什么，并将它们添加到您的 JAD。

执行此操作的一些方法在[此问题](https://stackoverflow.com/questions/8708008/how-to-restrict-j2me-application-in-the-landscape-mode-only)的答案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T13:34:59.300

It's a bit stressful but you could add an orientation listener and when the orientation changes, you could set the orientation value back to portrait.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:30:48.313

如果您的应用程序 GUI 是基于 Canvas 实现的，您可以通过编程方式实现。在另一个答案[为 Asha 303 创建横向游戏画布中，](https://stackoverflow.com/questions/10923801/create-landscape-game-canvas-for-asha-303/10929977#10929977)我展示了如何保持横向模式，但可以应用相同的原则将应用程序保持为纵向。

# oracle - Oracle：我如何从 PL/SQL 中脱机工作？

> ID：11098610
> 
> 赞同：4
> 
> 时间：2012-06-19T09:55:58.250
> 
> 标签：oracle, jobs, dbms-job

我需要通过 WHAT 列寻找工作。检查它是否真的在运行。如果不使其脱机并再次联机以使其立即启动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:39:36.003

假设根据您引用的列名称，您正在使用`DBMS_JOB`包来安排您的工作，而不是更新和更复杂`DBMS_SCHEDULER`的，对我来说，您确实需要离线工作并不明显。如果你想强制它立即运行，

```
dbms_job.run( <<job number>> ); 
```

如果你真的想把工作离线，你可以打破它

```
dbms_job.broken( <<job number>>, true );
commit; 
```

然后你可以解开它

```
dbms_job.broken( <<job number>>, false );
commit; 
```

`DBA_JOBS_RUNNING`您可以通过查询视图来确定作业当前是否正在运行

```
SELECT count(*)
  FROM dba_jobs_running
 WHERE job = <<job number>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T14:08:32.657

如果您使用 Toad，请转到模式浏览器并寻找工作。rt clk on the job 并使其脱机然后提交。如果您不记得命令，这是一种简单的方法。

# c# - C# 属性如何真正起作用？

> ID：11098611
> 
> 赞同：3
> 
> 时间：2012-06-19T09:56:00.743
> 
> 标签：c#, properties

如果我有：

```
class Test
{
    private Vector2 v;

    public Vector2 Velocity
    {
        get { return v; }
        set { v = value; }
    }
} 
```

接着：

```
Test t = new Test();

t.Velocity = new Vector2(2, 2);
t.Velocity.Normalize();
Console.WriteLine(t.Velocity); // here not normalized

Vector2 tmp = t.Velocity;
tmp.Normalize();
t.Velocity = tmp;
Console.WriteLine(t.Velocity); // here normalized

Console.Read(); 
```

为什么如果我直接尝试在属性 Velocity 上调用 Normalize 它没有被规范化并且使用 tmp Vector2 它是？

PS Vector2 是一个结构：

```
public struct Vector2 : IEquatable<Vector2>
{
    public float X;
    public float Y;
    ...
    public void Normalize() {...}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T10:01:04.910

我**想**这个问题与实际如何管理属性无关**，**`.NET Framework`而是如何`value types`在 .NET Framework 中管理。

我使用 CAD 内核，即使提供的代码不清楚，我**认为**这`Vector2`是一个`struct`（通常是为了加快快速分配/渲染的速度），所以它是一个`value type`

当你`Normalize(...)`是一个值类型时，你规范化它的**副本**，这就是为什么在第二种情况下它起作用的原因，*首先*你规范化**copy**，*然后*将它分配给**原始**值。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T10:00:03.910

如果`Vector2`是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，则属性 getter 将返回一个新副本，并且应用于`Normalize()`该副本不会影响原始副本。

换句话说，`v`and`t.Velocity`不是同一个对象，因此对一个对象所做的更改不会反映在另一个对象中。

如果`Vector2`是[引用类型](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)，您将获得您正在寻找的行为。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T09:59:48.123

项目清单

我猜你的情况`Vector2`是一个值类型（结构）。

在这种情况下，在您的第一个示例中，您将获得`v`由属性的 get 部分返回的副本，`Velocity`并且您将调用`Normalize`该副本，实际上什么都不做，因为在调用 Normalize 后副本超出了范围。

如果 Vector2 是一个引用类型（类），这将按您的预期工作，而不必先创建一个新对象，然后使用`Velocity`.

请记住，可变结构是[邪恶](http://blogs.msdn.com/b/ericlippert/archive/2008/05/14/mutating-readonly-structs.aspx)的。如果你总是让你的结构不可变，你就不应该遇到这样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:00:08.497

在不知道您的具体情况的情况下，`Vector2`它听起来像是一种值类型。因此，您获得的不是您的参考，`Velocity`而是它的副本。

# c# - 在 RavenDB 中使用 SaveChangesAsync

> ID：11098612
> 
> 赞同：2
> 
> 时间：2012-06-19T09:56:03.647
> 
> 标签：c#, asynchronous, insert, nosql, ravendb

我正在将大量数据插入 RavenDB 数据库；约 2 `500`000 条记录。这需要在尽可能短的时间内完成。

我使用一个列表来保存 SaveChangesAsync 返回的 Task 对象：

```
session.Store(loc);

splitter++;
if (splitter % 2048 == 0)
{
    var t = session.SaveChangesAsync();
    tasks.Add(t);

    if (tasks.Count == 2)
    {
        Task.WaitAll(tasks.ToArray());
        tasks.Clear();
    }
} 
```

此代码在具有 i7（8 核）和 12 GB 内存的机器上运行。如果我持有的 Task 对象的数量为 2（如您在代码中看到的那样），它会起作用，但如果我将此数字增加到 8（核心数），我会收到 System.IndexOutOfRangeException （有时还会收到 System.AggregateException ，上面写着：“ Raven.Abstractions.Exceptions.ConcurrencyException：尝试使用非当前 etag 对文档“X/I”进行 PUT”）。

这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:53:52.767

每个会话只能有一个异步挂起操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T10:28:29.747

这段代码有两个问题：

*   您正在尝试保存更改，同时仍向会话添加更改。
*   您正在安排另一个 SaveChangesAsync 在第一个完成之前。这可能会引发 ConcurrencyException

至少您应该等待每个 SaveChangesAsync 调用完成，然后再安排另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T16:34:21.930

你会想要使用[BulkInsert](http://ravendb.net/docs/2.0/client-api/advanced/bulk-inserts)。它用于将大量数据保存到数据库中，因为异步对您没有帮助。

# php - 用于格式化 Apache 日志的 PHP 正则表达式模式

> ID：11098613
> 
> 赞同：1
> 
> 时间：2012-06-19T09:56:10.967
> 
> 标签：php, regex, apache, logging

我有这个正则表达式模式适用于我当前的 apache 日志格式：

```
preg_match("/^(\S+) (\S+) (\S+) \[([^:]+):(\d+:\d+:\d+) ([^\]]+)\] \"(\S+) (.*?) (\S+)\" (\S+) (\S+) (\".*?\") (\".*?\")$/", $line, $matches); // pattern to format the line 
```

它适用于此日志：

```
127.0.0.1 - - [19/Jun/2012:11:38:37 +0200] "GET /some_page HTTP/1.1" 200 8243 "http://example.com/referrer" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" 
```

现在我更改了 apache 日志格式以包含服务器名称，因此新日志将是：

```
127.0.0.1 - - [19/Jun/2012:11:38:37 +0200] **servername.com** "GET /some_page HTTP/1.1" 200 8243 "http://example.com/referrer" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5" 
```

它唯一做的就是在“GET /url ...”之前添加servername.com。

现在正则表达式不再起作用，我不知道我必须修改什么才能使其匹配新的日志格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:00:22.910

这是您更新的正则表达式：

```
preg_match("/^(\S+) (\S+) (\S+) \[([^:]+):(\d+:\d+:\d+) ([^\]]+)\] [\w.]+ \"(\S+) (.*?) (\S+)\" (\S+) (\S+) (\".*?\") (\".*?\")$/", $line, $matches); 
```

我添加了一个额外的**[\w.]+**组，它应该与您的服务器名称匹配。

# iphone - 如何存根“respondsToSelector”方法

> ID：11098615
> 
> 赞同：1
> 
> 时间：2012-06-19T09:56:26.550
> 
> 标签：iphone, objective-c, ios5, ocmock

我正在尝试做这样的事情：

```
id synchronizerDelegate = [OCMockObject mockForProtocol:@protocol(SynchronizerDelegate)];
BOOL isRespondsToSelector = NO;
[[[synchronizerDelegate stub] andReturnValue:OCMOCK_VALUE(isRespondsToSelector)] respondsToSelector:@selector(didLoadFullImage:)];
GHAssertFalse([synchronizerDelegate respondsToSelector:@selector(didLoadFullImage:)], nil); 
```

这是 SynchronizerDelegate 的定义

```
@protocol SynchronizerDelegate <NSObject>
- (void)didLoadFullImage:(NSData *)data;
@end 
```

但是这个测试用例总是失败（返回值为 YES）。

之前有人尝试过存根“respondsToSelector”方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:12:18.800

当你 mockForProtocol 时，mock 实际上并不符合协议，所以[`OCProtocolMockObject`重写`respondsToSelector`](https://github.com/erikdoe/ocmock/tree/master/Source/OCMock)为协议中定义的方法返回 YES。

OCMock 依赖于`forwardInvocation:`，当对象没有定义被调用的方法时，它由运行时调用。由于`OCProtocolMockObject`implements `respondsToSelector`，你不能模拟它。

如果您描述了您要实现的目标，则可能有另一种方法可以实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T11:31:44.623

这个问题很老，但实际上我找到了一种方法来测试两个代码路径（响应选择器并且不响应），当您这样做以检查系统功能（如 iOS 8 中的新本地化权限）时。

这是我的规格：

```
it(@"asks for location permission on viewDidLoad", ^{

    id locationManagerMock = OCMClassMock([CLLocationManager class]);

    if([locationManagerMock respondsToSelector:@selector(requestWhenInUseAuthorization)]) {
        [[locationManagerMock expect] requestWhenInUseAuthorization];
    }
    else {
        [[locationManagerMock expect] startUpdatingLocation];
    }

    [sut setLocationManager:locationManagerMock];
    [sut view];

    [locationManagerMock verify];

}); 
```

# winforms - 如何在复选框中找到检查状态更改的来源

> ID：11098622
> 
> 赞同：1
> 
> 时间：2012-06-19T09:56:54.570
> 
> 标签：winforms

在我想知道的 CheckedChanged 事件中，哪个操作触发了此更改，要么是用户显式单击了复选框，要么是从数据绑定更新的。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        Source = new ValueSource();
        this.checkBox1.DataBindings.Add(new Binding("Checked", Source, "State", false, DataSourceUpdateMode.OnPropertyChanged));
        this.checkBox1.CheckedChanged += new EventHandler(checkBox1_CheckedChanged);
    }

    void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        // databinding changed the value.
        MessageBox.Show("Value changed from data binding");
        // user checked the check box using mouse.
        MessageBox.Show("Value changed due to use action");
    }

    public ValueSource Source { get; set; }
}

public class ValueSource
{
    private bool state = true;

    public bool State 
    {
        get { return state; }
        set { state = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:37:10.340

我认为您将不得不尝试处理 Mouse 和 KeyBoard 事件：

```
public ValueSource Source { get; set; }
private bool _FromUser = false;

public Form1() {
  InitializeComponent();

  Source = new ValueSource();
  this.checkBox1.DataBindings.Add(new Binding("Checked", Source, "State", false, DataSourceUpdateMode.OnPropertyChanged));
  this.checkBox1.CheckedChanged += new EventHandler(checkBox1_CheckedChanged);

  this.checkBox1.MouseDown += new MouseEventHandler(checkBox1_MouseDown);
  this.checkBox1.MouseUp += new MouseEventHandler(checkBox1_MouseUp);
  this.checkBox1.KeyDown += new KeyEventHandler(checkBox1_KeyDown);
  this.checkBox1.KeyUp += new KeyEventHandler(checkBox1_KeyUp);
}

void checkBox1_KeyDown(object sender, KeyEventArgs e) {
  _FromUser = true;
}

void checkBox1_KeyUp(object sender, KeyEventArgs e) {
  _FromUser = false;
}

void checkBox1_MouseDown(object sender, MouseEventArgs e) {
  _FromUser = true;
}

void checkBox1_MouseUp(object sender, MouseEventArgs e) {
  _FromUser = false;
}

void checkBox1_CheckedChanged(object sender, EventArgs e) {
  MessageBox.Show("From User = " + _FromUser.ToString());
} 
```

此外，您的 ValueSource 类应该实现该`INotifyPropertyChanged`事件：

```
public class ValueSource : INotifyPropertyChanged {
  public event PropertyChangedEventHandler PropertyChanged;

  private bool state = true;

  public bool State {
    get { return state; }
    set {
      state = value;
      OnPropertyChanged("State");
    }
  }

  private void OnPropertyChanged(string propertyName) {
    if (PropertyChanged != null) {
      PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:31:55.317

我认为最好的方法是分别处理“CollectionChanged”和“click”事件。

# c# - 自定义控件绑定属性

> ID：11098624
> 
> 赞同：0
> 
> 时间：2012-06-19T09:57:06.083
> 
> 标签：c#, xaml, binding, custom-controls

我创建了一个自定义控件，但我无法将属性绑定到这样的内容：

```
<Style TargetType="control:Pie">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="control:Pie">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">

                        <ContentControl Content="{Binding Path=Test}"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

在我的控制之下

```
public string Test
    {
        get { return (string)GetValue(TestProperty); }
        set { SetValue(TestProperty, value); }
    }
    public static readonly DependencyProperty TestProperty =
        DependencyProperty.Register(
            "Test",
            typeof(string),
            typeof(Pie),
            new PropertyMetadata(null)); 
```

当我创建控件时，在 Test 属性中设置了一个字符串，但视图中没有出现任何内容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:08:49.090

`TemplateBinding`用于绑定到模板化控件，因此仅适用于`ControlTemplate`. 仅上面 2 行您已经使用 TemplateBinding 作为背景、BorderBrush 和 BorderThickness。

`Binding`另一方面绑定到`DataContext`，这是一个用于从用户那里获取“业务”相关数据的对象。它应该独立于您的控件的工作方式和

根据经验：如果您在 a 中使用普通绑定`ControlTemplate`，它没有 a或set `RelativeSource`，它通常不应出现在 ControlTemplate 或 Style 中。`ElementName``Source`

# c - 理解 c-'0'

> ID：11098626
> 
> 赞同：0
> 
> 时间：2012-06-19T09:57:08.560
> 
> 标签：c

我试图测试使用 c-'0' 的 K&R 函数之一。为了清楚地理解，我写了如下两行代码。我的问题是为什么它打印“1”。在这种情况下，“数值”实际上意味着什么。谢谢！

```
char c = 'a';
printf("%c",c-'0'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T10:02:24.677

`c - '0'`仅当 c 为数字（'0'、'1'、... 或 '9'）时才具有明确的特定值。

什么时候`c`是`'0'`，`'0' - '0'`是`0`因为它们是相等的，什么时候`c`是`'1'`，`'1' - '0'`是`1`因为在任何 C 实现选择使用的任何字符集中`'1'`紧随其后。与其他数字`'0'`相同：值为。`'2'``'9' - '0'``9`

而且您真的不应该使用`"%c"`格式说明符打印值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T09:59:51.137

数值是字符的 ASCII 值。

`'a'`是 97，`'0'`是 48。97-48=49。

49 又是 的值`'1'`，所以这就是打印的内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-19T10:01:30.947

C 中的字符只不过是一个整数值。它们的值是根据[字符编码](http://en.wikipedia.org/wiki/Character_encoding)定义的。[ASCII](http://en.wikipedia.org/wiki/ASCII)编码非常有名，适用于 OP 发布的问题。因此，'0' 等于 48，'a' 等于 97。通过减去它们，你只是得到了 ASCII 表中这些字符之间的差异。

在这个例子中（相当于你的）：

```
printf("%c",'a'-'0'); 
```

你得到`1`因为 97-48 = 49 对应于 ASCII 字符 '1'。

如果您使用的是（注意“%d”而不是“%c”）：

```
printf("%d",'a'-'0'); 
```

那么这将只打印差异（在这种情况下为 49），而不是与差异相关的 ASCII 字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T10:04:32.493

您的代码的行为取决于实现。它依赖于字符的编码。

在我的 Linux 机器上，`a`字符以[ASCII](http://en.wikipedia.org/wiki/Ascii)（和 UTF8）编码为单字节`97`（十进制），即`0x61`. 同样，`0`字符被编码为`48`ie `0x30`。不同之`'a' - '0'`处`97 - 48`在于`49`恰好是字符的编码`1`

在一些古老的[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC)机器上（例如旧的 IBM 大型机，或者在某种兼容模式或操作系统下运行的新主机），编码是不同的。

使用[UTF8](http://en.wikipedia.org/wiki/UTF8)（现在经常使用）存在更多字符（例如，`ç`用于法语拼写的 C cedilla），并且它们通常被编码为一个以上的字节！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T10:01:07.030

c - '0' 将从 c 中减去 '0'(48) 的字符代码。如果 c 代表一个数字，这将导致对应于 c 的数值（例如 char '3' 为 3）。

为了得到这个数值，你应该在 printf 中使用格式说明符 %d 而不是 %c。

从“a”中减去“0”没有多大意义，但它可能对特定任务有一些应用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T10:23:09.540

让我们通过使用整数而不是字符来解释这一点。

```
char c = 97;
printf("%d", c - 48); 
```

这当然会打印 49，但是当我们使用 ASCII 表将其转换为字符时，我们得到 1。

```
char c = 97;
printf("%c", c-48); 
```

此代码现在打印 1，因为我们在打印时使用 char 数据类型，它将 49 值转换为 ASCII 等效数字 1。

为了证明这一点，我们可以尝试这样的事情。

```
char a = 'a';
char b = 97;
if((a == b) && ((a-'0') == (b-48))) { 
      printf("%s", "true");
} 
```

首先我们看 a 和 b 是否等价，然后我们看 a-'0' 是否与 b-48 等价。因为两者都是真实的，所以我们打印真实。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-12T06:30:10.343

单引号内的字符，如 '0'，是一个字符常量。它是一个数字常数，取决于机器的字符集。在 ASCII 字符集中，“a”相当于 97，“0”相当于 48。

97-48 = 49，相当于 ASCII 字符集中的 '1'。最后，它将以 %c 格式打印 '1'。

# python - 调试python时如何重定向标准输入？

> ID：11098628
> 
> 赞同：4
> 
> 时间：2012-06-19T09:57:17.623
> 
> 标签：python, debugging, pdb

当我调试 c 代码时，我总是使用 'gdb a.out < test' 来重定向标准输入流。但是当涉及到 时`pdb`，我发现它不起作用。在 pdb 帮助文档中搜索后，我仍然找不到与此问题相关的内容。

编辑：我发布我的代码。您能帮我将其更改为以最少的修改从文件中读取吗？谢谢。

```
cnt = int(raw_input())
paths = []
for cs in range(cnt):
    action, path = map(None, (raw_input() + " dumb").split(" ", 1))
    if (action == "pwd"):
        print "/",
        for p in paths:
            print p + "/",
        print
    else:
        strs = path.split("/")
        for i in range(len(strs)):
            p = strs[i]
            if (p == ""): 
                continue
            if (p == ".."):
                paths.pop()
            else:
                paths.append(p) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:54:29.023

更改您的程序以从命令行指定的文件中读取测试数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:28:28.393

好的。我找到了解决方案。`file`所以我只需要注释和取消注释最初切换方式`stdin`来自的这两行。

```
import pdb
import sys

file = sys.stdin
#file = open('test', "r")

cnt = int(file.readline())
paths = []
for cs in range(cnt):
    inputs = file.readline().split()
    action  = inputs[0]
    if (action == "pwd"):
        sb = "/"
        for p in paths:
            sb = sb + p + "/"
        print sb
    else:
        path = inputs[1]
        strs = path.split("/")
        for i in range(len(strs)):
            p = strs[i]
            if (p == ""): 
                continue
            if (i == 1 and strs[0] == ""):
                paths = []
                paths.append(p)
                continue
            if (p == ".."):
                paths.pop()
            else:
                paths.append(p) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T21:10:59.970

作为一个丑陋的临时黑客，您可以重新定义`raw_input()`(Python 2) 或`input()`(Python 3) 以从这样的文件中读取（对于 Python 2 替换`input`为`raw_input`）

```
def input(f=open("test")): return f.readline().rstrip()

# `input()` now reads from "test" file instead of STDIN!
... = input() 
```

# android - 使用 ksoap2 的 android 中的 SocketTimeoutException

> ID：11098630
> 
> 赞同：1
> 
> 时间：2012-06-19T09:57:42.757
> 
> 标签：android, ksoap2, socketexception

我看到了类似的问题，但我没有找到答案。我正在使用 ksoap2 库与网络服务器连接，有时我得到那个异常 java.net.SocketTimeoutException: read timed out。

这是我的代码：

```
 SoapObject request = new SoapObject(NAMESPACE, method);

    if (properties != null) {
        for (PropertyInfo property : properties) {
            request.addProperty(property);
        }
    }

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);;

    HttpsTransportSE transport = new HttpsTransportSE(HOST, PORT, FILE, TIMEOUT);

    transport.debug = true;
    transport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");

    try {
        transport.call(NAMESPACE + "#" +  soapAction, envelope);

        Object res = (Object)envelope.getResponse();

        return res;
    } catch (Exception e) {
        Log.e("WebService", e.toString());

        return null;
    } 
```

我可以在某处更改套接字的超时时间还是我能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-11T09:38:59.647

您可以通过提供 Web 服务需要响应的平均时间来控制超时异常。

```
HttpTransportSE httpTransport = new HttpTransportSE(URL, timeout_in_millsecond); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T11:57:13.433

当服务没有响应或可能存在网络连接问题时，Socket 会超时。在我的情况下，当服务开始响应时，我没有收到套接字超时异常，因此问题得到了解决。这是我的代码：

```
public SoapObject soap(String METHOD_NAME, String SOAP_ACTION, String NAMESPACE, String URL) throws IOException, XmlPullParserException 
{
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); //set up request
    // adding a property to SoapObject
    PropertyInfo pi = new PropertyInfo();
    FileDetailList C = new FileDetailList();
    pi.setName("C");
    pi.setValue(C);
    pi.setType(C.getClass());
    request.addProperty(pi);
    //  request.addProperty("iTopN", "5"); //variable name, value. I got the variable name, from the wsdl file!
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); //put all required data into a soap envelope
    envelope.setOutputSoapObject(request);  //prepare request
    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    //  AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);  
    httpTransport.debug = true;  //this is optional, use it if you don't want to use a packet sniffer to check what the sent message was (httpTransport.requestDump)
    httpTransport.call(SOAP_ACTION, envelope); //send request
    //  SoapObject result=(SoapObject)envelope.getResponse();
    SoapObject result=(SoapObject)envelope.bodyIn; //get response
    return result;          
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:52:55.560

我不确定这是否与我刚刚遇到的问题相同。有多个调用，在真实设备上只有第一个可以工作，而其余的会因超时而失败。

每次通话后断开连接为我解决了问题：

```
transport.call(NAMESPACE + "#" +  soapAction, envelope);
transport.getServiceConnection().disconnect(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T01:53:48.933

Make sure of the below two, 1) HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,60000); 60000 - timeout value 2) Use [http://10.0.2.2](http://10.0.2.2) instead of [http://localhost](http://localhost)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-12T18:23:47.283

在使客户端应用程序使用 Web 服务时，我使用 ksoap2 库遇到了完全相同的问题，您必须做的是在 AsyncTask 中执行所有网络访问操作。

我是我的情况，`timeout_in_milliseconds`有人建议传递给 HttpTransportSE 对象构造函数的参数对我不起作用。

```
HttpTransportSE httpTransport = new HttpTransportSE(URL, timeout_in_millsecond); 
```

如果您以前从未使用过异步任务，请按照以下链接访问 android 文档，以便您开始使用。

[异步任务文档](https://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-14T06:33:21.097

有趣的是，在增加/减少目标 API 和使用清单时，请确保您拥有 Internet 权限：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

[Android KSOAP2 抛出 SocketTimeoutException](https://stackoverflow.com/questions/14573637/android-ksoap2-throws-sockettimeoutexception)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-06T14:04:44.663

## 2019更新！

在花了很长时间试图解决我的问题之后，我想发布我的发现：

*   在模拟器中可以 100% 正常工作，但根本无法在我的手机上使用。（虽然模拟器需要IP地址在我的网络上进行服务，但它无法解析机器名称）

*   在电话上运行时，呼叫总是`SocketTimeoutException`在线路执行后立即产生`androidHttpTransport.call(soap_action,envelope)`- 即使我会设置这样的超时，也没有“等待”：

    `HttpTransportSE androidHttpTransport = new HttpTransportSE(wsdl_url,40000000)`

*   我一直在使用 kSOAP v2.5.2 并且感谢 mya 在之前的回复中我更改为`ksoap2-android-assembly-2.5.8-jar-with-dependencies.jar`. 这并没有解决问题，但它确实改变了提供给`Cleartext HTTP traffic not permitted`

*   然后可以通过将此行添加到 AndoidManifest.xml 的 Application 部分来轻松解决此问题：

    `android:usesCleartextTraffic="true"`

我还必须禁用 Google Play Protect 才能允许从 APK 安装

[我的项目的ZIP](https://drive.google.com/file/d/1BTpJFxiVuF1TupNXq-MqGW1FvPv2QXOc/view?usp=sharing)，以防你想看。它包括一个公共互联网网络服务 ( [http://www.dneonline.com/calculator.asmx](http://www.dneonline.com/calculator.asmx) )，它应该适用于任何人。另一个按钮调用本地服务，因此您将失败。有很多注释行我需要让我达到这一点 - 被忽略！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-02T10:32:52.590

如果有人仍然遇到这种情况，我的情况是从 ksoap2-android-2.5.2.jar 更改为 ksoap2-android-assembly-2.5.8-jar-with-dependencies.jar 停止抛出 SocketTimeoutException

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-21T09:07:26.620

由于以下原因，我得到了**SocketTimeOutExceptions ：**

*   无效**的 NAMESPACE、METHOD_NAME、SOAP_ACTION、URL**
*   网络连接问题

添加

```
HttpTransportSE androidhttpsTransportSE=new HttpTransportSE(URL,600000); 
```

或者

```
 HttpTransportSE androidhttpsTransportSE=new HttpTransportSE(URL); 
```

两者都没有什么大的区别。

[最后，我在Liaqat](https://stackoverflow.com/a/15200930/5740760)建议的**异步任务**的帮助下修复了它。有关更多详细信息，请查看我的[GitHub 项目](https://github.com/gotoark/SOAP-Demo/blob/master/app/src/main/java/application/arkthepro/com/soapdemo/SoapCallWithAsynTask.java)以使用[Ksoap2](http://kobjects.org/ksoap2/index.html)进行[SOAP Demo](https://github.com/gotoark/SOAP-Demo)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-08-08T09:47:13.500

在 OnCreate 中添加以下代码：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# python - 使用小部件 Tkinter 最大化窗口

> ID：11098631
> 
> 赞同：0
> 
> 时间：2012-06-19T09:57:49.953
> 
> 标签：python, tkinter

我之前在 Tkinter 的程序中设置了最小窗口大小，如下所示：

```
win1.update()                                         # Update window
win1.minsize(win1.winfo_width(), win1.winfo_height()) # Minimum size of contents
win1.mainloop() 
```

但是，我想通过拖动角落/最大化按钮来调整窗口的大小，并使用所有小部件（标签、框架等）使其最大化。有没有类似于上述方法的方法？

还是它更复杂，必须分别对每个小部件应用一些东西？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:36:57.400

我建议看看我问的关于我的跳棋游戏的[这个 SO 问题。](https://stackoverflow.com/questions/4785856/how-do-i-achieve-the-following-tkinter-gui-layout-with-either-pack-or-grid)当我调整窗口大小或最大化窗口时，让小部件正确调整时，我遇到了同样的问题。[Bryan Oakley](https://stackoverflow.com/users/7432/bryan-oakley)的代码示例应该为您指明正确的方向。

# android - 如何在钛中创建拉动以刷新 tableview/scrollview？

> ID：11098635
> 
> 赞同：1
> 
> 时间：2012-06-19T09:58:12.337
> 
> 标签：android, titanium, refresh, scrollview, tableview

从过去 2 天开始，我一直在寻找如何实现这个 Pull to Refresh 的东西，就像他们在 Tweetanium 中展示的那样。

我发现了一些信息丰富的代码片段，例如

**1\. [http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html](http://developer.appcelerator.com/blog/2010/05/how-to-create-a-tweetie-like-pull-to-refresh-table.html)**

但是这个仅适用于IOS。

另一个是

**2\. [https://gist.github.com/903895](https://gist.github.com/903895)**

这适用于 android，但它有一个限制，即必须为每一行指定一个预定义的高度。

如果我将内容放入 Row 中，形成一些随机 JSON 响应，那么在这种情况下，我无法在表中预定义 ROW 的高度。因此我无法计算表格的高度并破坏代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T19:59:49.573

迟到的答案，但对于下一个人，如果你使用合金（你应该！）[http://alloylove.com/#pulltorefresh](http://alloylove.com/#pulltorefresh)是一个很好的解决方案。

# ios - 如何制作一个按钮，iOS

> ID：11098641
> 
> 赞同：1
> 
> 时间：2012-06-19T09:58:38.187
> 
> 标签：ios, button, view, picker

我正在尝试为用户制作一个按钮，他可以在其中选择 5 个不同的选项。我想到了类似单行按钮的东西，其中一个选项将被预先选择，当用户按下按钮时，将显示 5 个选项供用户选择。在对象库中，我可以找到最接近的选择器视图，但它对我的屏幕来说太大了，它会显示所有选项，因为我只希望在开始时显示一个并且当用户点击所有按钮时选项，以便他可以根据需要选择不同的选项。xcode 上是否有这样的按钮，我错过了，或者我应该自定义选择器视图或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:06:04.593

带有 5 个按钮的 UISegmentedControl 怎么样？

![在此处输入图像描述](../Images/74f20bcc04c1cab62021ab5a1c234ba9.png)

phix 提到了这样的 UITextField/UIPicker 组合

![在此处输入图像描述](../Images/6c193d8a08a6e6bc44165dccb3c16157.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:14:02.903

一个选项是分段控件，但当您有很多选项时，它会变得太大。

我建议使用带有 UIPickerView 的自定义 UITextfield 作为 inputView。所以用户只能从选择器中选择文本，而不是通过键盘。

也可以使用 UIButton 来做到这一点，这需要继承 UIButton。

这是有关如何实现此目的的教程：http: [//nomtek.com/tips-for-developers/working-with-pickers/](http://nomtek.com/tips-for-developers/working-with-pickers/)

# ruby-on-rails-3.1 - Cloudfoundry 中的 RMagick 宝石？

> ID：11098643
> 
> 赞同：0
> 
> 时间：2012-06-19T09:58:42.057
> 
> 标签：ruby-on-rails-3.1, cloud-foundry

rails 3.2 应用程序需要 RMagick gem。

从支持票中，他们说它在私有 PaaS 中。

但是托管在 cloudfoundry.com 本身而不是私有 PaaS 上的应用程序呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:27:22.597

CloudFoundry.com 最近添加了 ImageMagick 二进制文件，这是 RMagick 等库工作所必需的。路径是`/var/vcap/packages/imagemagick/bin/`。例如，要配置回形针 gem，请将以下内容添加到`config/environments/production.rb`：

```
Paperclip.options[:command_path] = "/var/vcap/packages/imagemagick/bin/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:06:47.243

As Glenn has already said in his comment, RMagick has a dependency on the native library ImageMagick and the Cloud Foundry engineering team are currently working on integrating this in to the live environment.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T11:50:30.207

文档说 cloudfoundry.com 不支持它：http: [//docs.cloudfoundry.com/frameworks/ruby/ruby-cf.html](http://docs.cloudfoundry.com/frameworks/ruby/ruby-cf.html)

# android - 如果我将位图绘制为 SurfaceView 的背景然后播放视频，则会出现“[SurfaceView] 连接：已连接”错误

> ID：11098646
> 
> 赞同：9
> 
> 时间：2012-06-19T09:58:48.670
> 
> 标签：android, surfaceview

我想做的是在开始播放视频之前在 SurfaceView 上显示背景图像。

1.  我试图只绘制一个 jpeg 图像作为 SurfaceView 的背景。有效。
2.  我还尝试在 SurfaceView 上播放视频。它也奏效了。

但是，当我尝试在 surfaceCreated 函数中将 jpeg 图像绘制为 Surface 的背景然后播放视频时。我收到错误“[SurfaceView] 连接：已连接”。

有任何想法吗？谢谢。

这是部分代码

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    try {
    Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.pic1);
    float scale = (float) background.getHeight()/(float)mPreview.getHeight();
    int newWidth = Math.round(background.getWidth()/scale);
    int newHeight = Math.round(background.getHeight()/scale);
    mScaledBitmap = Bitmap.createScaledBitmap(background, newWidth, newHeight, true);
    Canvas canvas = mHolder.lockCanvas();
    canvas.drawBitmap(mScaledBitmap, 0, 0, null);
    mHolder.unlockCanvasAndPost(canvas);
    } catch (Exception e)
    {}
            // initialize mediaplayer
    try {
        mMediaPlayer = new MediaPlayer();
        mMediaPlayer.setDataSource("/sdcard/Movies/2.mp4");
        mMediaPlayer.setDisplay(mHolder);
        mMediaPlayer.setLooping(true);
        mMediaPlayer.prepare();
        mMediaPlayer.setOnPreparedListener(this);
        mMediaPlayer.setOnCompletionListener(this);
    } catch (IOException e) {
        e.printStackTrace();
        Log.e(TAG, "error: " + e.getMessage(), e);
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG, "error: " + e.getMessage(), e);  
    }
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub
    Log.i(TAG, "surfaceChanged(w="+ width + ", h=" + height);
    mSurfaceWidth = width;
    mSurfaceHeight = height;
    mVideoWidth = mMediaPlayer.getVideoWidth();
    mVideoHeight = mMediaPlayer.getVideoHeight();
    Log.i(TAG, "video size w=" + mVideoWidth + ", h=" + mVideoHeight +")");     
}

@Override
public void onPrepared(MediaPlayer mp) {
    // TODO Auto-generated method stub
    Log.i(TAG, "onPrepared");
    mMediaPlayer.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T10:01:06.467

我认为问题是您可以使用外部 SurfaceHolder 只需将 mHolder 对象更改为本地持有者对象即可。我不能在我这边尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T19:14:04.903

Here are couple of things that I see wrong based on my experience with MediaPlayer.

*   First, use prepareAysnc() instead of prepare().
*   Second, set the listeners first before calling prepare(). In your case, mMediaPlayer.setOnPreparedListener(this)

is followed by prepare(). Consider scenario where prepare() upon completion looks for OnPreparedListener and does not finds it, because you haven't set it yet. And setting it afterwards is not going to help since, media player is already in PREPARED state and thus you'd never get onPrepared() callback.

Thus in your case, mMediaPlayer.start() may never get executed.

In general, set all the necessary listeners first, before invoking their triggers.

# javascript - HTML 高度属性 - 对可以设置高度的元素类型的限制？

> ID：11098648
> 
> 赞同：0
> 
> 时间：2012-06-19T09:58:53.977
> 
> 标签：javascript, jquery, html, height

我一直在徒劳地尝试设置容器的高度。我一直主要使用这个：

```
$rdc.height(rdc_height); 
```

我也试过这些：

```
$rdc.height(300);
$rdc.css({height:300});
document.getElementById("RDC162").style.height = rdc_height + "px"; 
```

然而，这些工作正常（所以问题不在于`$rdc`）：

```
$rdc.css({padding:20, maxHeight:80});
$rdc.hide(); 
```

为什么我不能设置元素的高度？如果这`position: relative`有什么不同，尽管当我测试时似乎没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:02:30.310

也许该元素不是块元素。

试试这个

```
$rdc.css({display:"block", height:"300px"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:06:39.277

即使您真的想使用 javascript，我也不明白您为什么要使用 $。

你应该做的是

```
var rdc_height;/* properly make a new variable */
document.getElementById("RDC162").style.height = rdc_height + "px"; /*which you already had*/ 
```

您非常接近，但这是编码它的正确方法。:)

# java - 用于零长度值的 Java String split() 分隔符

> ID：11098649
> 
> 赞同：0
> 
> 时间：2012-06-19T09:58:53.707
> 
> 标签：java, string, delimiter, zero

我想拆分从数据库结果集行生成的以下字符串。

示例行：

A) (74,"and there","is a car","in the","garage man",t)

B) (17,account3,,,,t)

我想要如下输出（管道 | 分隔拆分元素）：

A) 74 | 那里| 是一辆车| 在| 车库人| 高分辨率照片| CLIPARTO 吨

B) 17 | 帐户3 | | | | 吨

我想在我的应用程序中将零长度值存储为 null。这是我的源代码：

```
public void refreshSearchTable (ArrayList<String> newData){
        int noOfRows = newData.size();
        int noOfColumns = gui.getTableSearchResultHeader().length + 1;
        Object[][] tempList = new Object[noOfRows][noOfColumns];
        String rowResult = "";
        String delims = "[,()\"]+";
        String [] tokens;
        Object [] elements = newData.toArray();

        int j = 0;
        for (int i = 0; i < noOfRows; i++){
            rowResult = elements[i].toString();
            System.out.println("rowresult: " + rowResult);
            tokens = rowResult.split(delims, -1);
            for (String t : tokens){

                System.out.println("j: " + j + "t: " + t);

                if (j == 1){ ... }
                else if (j==2){ ... }
                                ...

                j++;
            }
            j=0;
        }
    } 
```

"[,()\"]+" 适用于非零长度值。我能够根据索引值 j 拾取正确的子字符串。我读过将负值传递给 split(, ) 不会丢弃非零长度值...但确实如此。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:11:32.767

也许你可以试试`.split("[()\"]*,{1}[()\"]*")`;

之前的表达式用户`[,()\"]+`将使用多个逗号或任何其他分隔符作为分隔符。例如`,,`将考虑一个，因此也是如此`[],[]`。上面注释的表达式期望零个或多个分隔符后跟一个逗号，这也可以跟零个或多个分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:06:51.503

为什么你没有使用[String.replace 或 replaceall](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace%28char,%20char%29)，它将作为你当前的程序工作，但如果你需要跳过字符串的空白部分，你应该首先

*   创建字符串生成器
*   追加输入数组列表中的所有数据（如果数据长度== 0或数据为空，则跳过它）
*   最后附加您的符号 |

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:09:03.333

的`int`参数`split()`表示结果数组的最大长度。所以我认为你应该`String#isempty()`自己确定它的使用方法。

查看更多详细信息：

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String) , int)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:17:21.767

谢谢斯派思。这是他们的工作方式，我需要它。很抱歉我在原始问题中添加了管道。我只是键入它们以分隔元素。我需要根据由逗号定义的特定索引的元素，以维护结果集中的列。

```
public void refreshSearchTable (ArrayList<String> newData){
        int noOfRows = newData.size();
        int noOfColumns = gui.getTableSearchResultHeader().length + 2;
        Object[][] tempList = new Object[noOfRows][noOfColumns];
        String rowResult = "";
        String delims = "[()\"]*,{1}[()\"]*";
        String [] tokens;
        Object [] elements = newData.toArray();

        int j = 0;
        for (int i = 0; i < noOfRows; i++){
            rowResult = elements[i].toString();
            if (rowResult.startsWith("(")){
                rowResult = rowResult.substring(1);
            }
            if (rowResult.endsWith(")")){
                rowResult = rowResult.substring(0, rowResult.length()-1);
            }
            System.out.println("rowresult: " + rowResult);
            tokens = rowResult.split(delims);
            for (String t : tokens){

                System.out.println("j: " + j + "t: " + t);

                j++;
            }
            j=0;
        } 
```

输出：

```
rowresult: 74,"and there","is a car","in the","garage man",t
j: 0t: 74
j: 1t: and there
j: 2t: is a car
j: 3t: in the
j: 4t: garage man
j: 5t: t 
```

# cuda - CUDA-OpenGL 互操作性：最低计算能力

> ID：11098653
> 
> 赞同：1
> 
> 时间：2012-06-19T09:59:06.473
> 
> 标签：cuda

是否有使用 CUDA-OpenGL 互操作性的最低计算能力？我没有找到任何有关此的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:02:35.540

它可以一直追溯到 CUDA 计算 1.0。我一直在将[ArrayFire 的图形库](http://www.accelereyes.com/arrayfire/c/page_gfx.htm)与一些非常旧的卡 (GT8400) 以及最新的 Kepler (GTX690) 一起使用，这是我知道它如何在各种卡上工作的唯一方法。

# android - 带有cygwin的Windows 7中的repo init错误

> ID：11098654
> 
> 赞同：3
> 
> 时间：2012-06-19T09:59:09.047
> 
> 标签：android, cygwin, init, repository

我在Windows7平台工作，想下载Android源代码，所以我尝试让它与cygwin + git + repo一起工作。但是在我执行以下代码来初始化 repo 工具时发生了错误：

```
$ repo init -u https://android.googlesource.com/platform/manifest 
```

错误信息：

```
$ repo init -u https://android.googlesource.com/platform/manifest
gpg: keyblock resource `/home/Administrator/.repoconfig/gnupg\secring.gpg': file open error
gpg: keyblock resource `/home/Administrator/.repoconfig/gnupg\pubring.gpg': file open error
gpg: no writable keyring found: eof
gpg: error reading `[stdin]': general error
gpg: import from `[stdin]' failed: general error
gpg: Total number processed: 0
fatal: registering repo maintainer keys failed 
```

我查看了 /home/Administrator/.repoconfig/gnupg\ 的目录，但什么也没有！

以前有人遇到过这个问题吗？我该怎么做才能使它正确。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:03:48.913

我有同样的问题。但是我安装了gnupg并解决了。
我以为我安装了 msysgit 和系统路径包括 msysgit/mingw/bin/gpg.exe 文件。

因此，cygwin shell 可以引用不正确的 gpg.exe（不确定 :)）

首先，您需要执行 cygwin setup.exe。然后，检查 Utils/gnupg 并安装。
然后重试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T16:34:17.217

原来我的问题是由使用“\”的 Windows 版本的 git 引起的。我只是卸载了 git 的 windows 版本，然后使用安装程序为 Cygwin（在 Devel 下找到）安装了 git。

# jquery - 淡出标签的边框

> ID：11098656
> 
> 赞同：2
> 
> 时间：2012-06-19T09:59:13.943
> 
> 标签：jquery, jquery-animate, fadeout

我正在尝试使用 jQuery 淡出 html 标签的边框。经过大量搜索，我知道`.animate()`jQuery的功能可能对此有用。但我无法正确实施。这是我正在研究的**[jsfiddle 。](http://jsfiddle.net/7Vc9u/1/)**我尝试`$("#lbl").animate({border-bottom: 'border-bottom: 1px solid #D8D8D8'});`在按钮单击方法中使用。但它没有用。请让我知道，我做错了什么？或者有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:01:46.847

使用[jQuery UI](http://jqueryui.com/demos/animate/)并为边框颜色设置动画，如下所示：

```
$("#lbl").animate({
    "border-color": "#fff"
}); 
```

**演示：http:** [//jsfiddle.net/7Vc9u/9/](http://jsfiddle.net/7Vc9u/9/)

* * *

**更新。**似乎`border-color`(or `borderColor`) 不是用于动画的跨浏览器属性，并且在 FF 和 IE 中不起作用（请参阅[下面的评论](https://stackoverflow.com/questions/11098656/fadeout-a-border-of-a-label#comment14534683_11098706)）。我们可以单独更改每个边框的属性。它应该可以正常工作。

```
$("#lbl").animate({
    "borderBottomColor": "#fff",
    "borderLeftColor": "#fff",
    "borderRightColor": "#fff",
    "borderTopColor": "#fff"
}); 
```

**演示：http:** [//jsfiddle.net/7Vc9u/11/](http://jsfiddle.net/7Vc9u/11/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T10:03:33.507

尝试这个 ：

```
$("#lbl").animate({
    "border-color": "#fff"
},1000); 
```

这将在 1 秒的持续时间内将边框颜色设置为白色（第二个参数`animate`- 1000 毫秒）。

**注意**使用`.animate()`你需要使用[jQuery UI](http://jqueryui.com/demos/animate/)

[在这里工作 jsfiddle](http://jsfiddle.net/manseuk/7Vc9u/4/)

# c# - Linq to Entities - 需要通过 PK 动态过滤

> ID：11098662
> 
> 赞同：0
> 
> 时间：2012-06-19T09:59:45.723
> 
> 标签：c#, entity-framework-4, linq-to-entities

我正在尝试找到一种方法，如何仅从给定表中获取那些 PK 列在给定对象列表中的元素。

不要问我为什么要这样做。它用于同步多个数据库，我想为给定的主键预加载所有本地值，然后插入、更新或删除它们。

在第一次尝试时，我使用动态反射加载了整个表并返回了一个字典，其中表 PK 作为键，EntityObject 作为值，这很好。但是对于较大的桌子，这将变得非常沉重。所以我只需要给定 PK 的那些。

```
private static Dictionary<object, EntityObject> GetAllEntities<TEntityType>(ObjectContext dbContext, IEnumerable<object> primaryValues) where TEntityType : EntityObject
    {
        // loop through the elements for the given entity
        return dbContext.CreateObjectSet<TEntityType>().ToDictionary(type => type.EntityKey.EntityKeyValues[0].Value, type => (EntityObject)type); // this runs fine

        // this is what i need to be executed
        return dbContext.CreateObjectSet<TEntityType>().Where(type => primaryValues.Contains(type.EntityKey.EntityKeyValues.First().Value)).ToDictionary(type => type.EntityKey.EntityKeyValues[0].Value, type => (EntityObject)type); // this crashes
    } 
```

第二行按预期抛出错误，因为 Linq 2 Entities 无法直接处理 EntityKey：

> LINQ to Entities 不支持指定的类型成员“EntityKey”。仅支持初始化程序、实体成员和实体导航属性。

我敢肯定，几个月前我已经在互联网上的某个地方找到了一种方法，但我再也找不到了。我只记得，最初将它发布在某处的人在 where 子句中调用了一个方法，该方法返回了 EntityObjects PK 值，因此我可以检查给定列表中是否存在。

任何帮助，提示，链接，任何将不胜感激。

也许这是错误的问题，或者不是处理这些案件的正确方法。所以任何事情都会有帮助。

一些附加信息：每个表只有一个 PK 可以是 Guid 或字符串类型。所以这将是一个简单的字符串到字符串的相等性检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:27:43.770

它比这有点复杂。这里的问题是 linq 查询被转换为 SQL。实体框架只能转换为包含“已知”类型的 SQL 表达式 - 即来自模型的类型。EntityKey 不是这样的类型，因此是例外。您仍然尝试做的事情是可能的，但需要一些 Linq 表达式和反射魔法。我想出了一个这样的方法：

```
 private static IQueryable<TEntity> DynamicContains<TEntity, TProperty>(IQueryable<TEntity> query, Expression<Func<TEntity, TProperty>> property, IEnumerable<TProperty> values)
    {
        var memberExpression = property.Body as MemberExpression; 
        if (memberExpression == null || !(memberExpression.Member is PropertyInfo)) 
        { 
            throw new ArgumentException("Property expression expected", "property"); 
        }

        // get the generic .Contains method
        var containsMethod =
            typeof(Enumerable)
            .GetMethods()
            .Single(m => m.Name == "Contains" && m.GetParameters().Length == 2);

        // convert the generic .Contains method so that is matches the type of the property
        containsMethod = containsMethod.MakeGenericMethod(typeof(TProperty));

        // build e => Enumerable.Contains(values, e.Property)
        var lambda = 
            Expression.Lambda<Func<TEntity, bool>>(
                Expression.Call(
                    containsMethod, Expression.Constant(values), property.Body), 
                    property.Parameters.Single());

        // return query.Where(e => Enumerable.Contains(values, e.Property))
        return query.Where(lambda);
    } 
```

它是您的实体可能拥有的任何属性（不仅是键）上的通用 Contains。它需要 IQueryable，因此可以应用于任何查询（不仅是 DbSet/ObjectSet）并返回 IQueryable，因此您可以在它之上进一步构建。不要被所有的尖括号吓倒。您可以像这样使用此方法：

```
var entities = DynamicContains(ctx.EntitySet, e => e.Id, new[] { 1, 4 }); 
```

e => e.Id 是一种告诉包含应该使用什么属性的奇特方式。

这是一个完整的例子，展示了这个方法：

```
 using System;
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Linq;
    using System.Linq.Expressions;
    using System.Reflection;
    using System.Text;
    using System.Threading.Tasks;

    namespace ConsoleApplication3
    {
        class MyEntity
        {
            public int Id { get; set; }
            public string Description { get; set; }
        }

        class MyContext : DbContext
        {
            public DbSet<MyEntity> EntitySet { get; set; }
        }

        class Program
        {

            private static void Seed()
            {
                using (var ctx = new MyContext())
                {
                    if (!ctx.EntitySet.Any())
                    {
                        ctx.EntitySet.Add(new MyEntity() { Description = "abc" });
                        ctx.EntitySet.Add(new MyEntity() { Description = "xyz" });
                        ctx.EntitySet.Add(new MyEntity() { Description = null });
                        ctx.EntitySet.Add(new MyEntity() { Description = "123" });
                        ctx.SaveChanges();
                    }
                }
            }

            private static void PrintEntities(IEnumerable<MyEntity> entities)
            {
                foreach (var e in entities)
                {
                    Console.WriteLine("Id: {0}, Description: {1}", e.Id, e.Description);
                }
            }

            static void Main(string[] args)
            {
                List<int> list = new List<int>() { 1, 3 };

                Seed();

                using (var ctx = new MyContext())
                {
                    PrintEntities(DynamicContains(ctx.EntitySet, e => e.Id, new[] { 1, 4 }));
                    PrintEntities(DynamicContains(ctx.EntitySet, e => e.Description, new[] { null, "xyz" }));

                }
            }

            private static IQueryable<TEntity> DynamicContains<TEntity, TProperty>(IQueryable<TEntity> query, Expression<Func<TEntity, TProperty>> property, IEnumerable<TProperty> values)
            {
                var memberExpression = property.Body as MemberExpression; 
                if (memberExpression == null || !(memberExpression.Member is PropertyInfo)) 
                { 
                    throw new ArgumentException("Property expression expected", "property"); 
                }

                // get the generic .Contains method
                var containsMethod =
                    typeof(Enumerable)
                    .GetMethods()
                    .Single(m => m.Name == "Contains" && m.GetParameters().Length == 2);

                // convert the generic .Contains method so that is matches the type of the property
                containsMethod = containsMethod.MakeGenericMethod(typeof(TProperty));

                // build e => Enumerable.Contains(values, e.Property)
                var lambda = 
                    Expression.Lambda<Func<TEntity, bool>>(
                        Expression.Call(
                            containsMethod, Expression.Constant(values), property.Body), 
                            property.Parameters.Single());

                // return query.Where(e => Enumerable.Contains(values, e.Property))
                return query.Where(lambda);
            }
        }
    } 
```

# c++ - 如何强制用户程序阻止 16GB 的物理 RAM？

> ID：11098664
> 
> 赞同：2
> 
> 时间：2012-06-19T09:59:49.263
> 
> 标签：c++, memory-management, operating-system, buffer

我有一台 32GB 内存的机器，我想模拟尝试一个用户进程在 16GB 机器内运行。一种方法是让一个小型用户进程运行并阻塞 16GB 物理内存，然后进入睡眠状态，然后让这个以前的用户进程在可用系统中运行。

问题是当我写一个程序到 malloc 16GB 内存时，大部分内存被虚拟内存阻塞，只有大约 64MB 的物理 RAM 被阻塞。有没有办法强制阻止物理RAM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:08:44.320

Linux 有一个内核参数可以忽略超过一定大小的内存：

```
 max_addr=[KMG]  [KNL,BOOT,ia64] All physical memory greater than or
                    equal to this physical address is ignored. 
```

所以你可以使用它。或者看看[`mlock`](http://linux.die.net/man/2/mlock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:22:20.690

您可以使用`mmap`using `MAP_ANONYMOUS`and `MAP_LOCKED`（第一个标志只是为了避免需要文件来创建`mmap`，`fd`and`offset`参数被忽略）。如果`size_t`不是 64 位，则需要多次`mmap`调用才能达到 16 GB。

# c - 即使执行了 free 程序也会崩溃

> ID：11098675
> 
> 赞同：0
> 
> 时间：2012-06-19T10:00:14.193
> 
> 标签：c, file, ubuntu, error-handling, io

鉴于这段代码，它是更大代码的一部分，但这是罪魁祸首。

在`int main()`我这样做：

```
int main(int argc, char* argv[]) {

// code 

// code 

path2 = (char*)malloc(strlen(currentDir)*sizeof(char));

traverseDirectories(path2 , filename);

free(path2);
} 
```

错误 ：

```
a@ubuntu:~/Desktop$ ./exer4 fsdfsdfdafsd/ exer4
Could not open: No such file or directory
*** glibc detected *** ./exer4: free(): invalid next size (normal): 0x08b54038 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6ebc2)[0x93ebc2]
/lib/i386-linux-gnu/libc.so.6(+0x6f862)[0x93f862]
/lib/i386-linux-gnu/libc.so.6(cfree+0x6d)[0x94294d]
/lib/i386-linux-gnu/libc.so.6(fclose+0x154)[0x92e0b4]
/lib/i386-linux-gnu/libc.so.6(perror+0xc5)[0x920a45]
./exer4[0x8048f52]
./exer4[0x8048b34]
./exer4[0x8048a99]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x8e9113]
./exer4[0x80487c1]
======= Memory map: ========
00398000-003b4000 r-xp 00000000 08:01 394171     /lib/i386-linux-gnu/libgcc_s.so.1
003b4000-003b5000 r--p 0001b000 08:01 394171     /lib/i386-linux-gnu/libgcc_s.so.1
003b5000-003b6000 rw-p 0001c000 08:01 394171     /lib/i386-linux-gnu/libgcc_s.so.1
008d0000-00a46000 r-xp 00000000 08:01 394150     /lib/i386-linux-gnu/libc-2.13.so
00a46000-00a48000 r--p 00176000 08:01 394150     /lib/i386-linux-gnu/libc-2.13.so
00a48000-00a49000 rw-p 00178000 08:01 394150     /lib/i386-linux-gnu/libc-2.13.so
00a49000-00a4c000 rw-p 00000000 00:00 0 
00b5a000-00b5b000 r-xp 00000000 00:00 0          [vdso]
00c4b000-00c69000 r-xp 00000000 08:01 394137     /lib/i386-linux-gnu/ld-2.13.so
00c69000-00c6a000 r--p 0001d000 08:01 394137     /lib/i386-linux-gnu/ld-2.13.so
00c6a000-00c6b000 rw-p 0001e000 08:01 394137     /lib/i386-linux-gnu/ld-2.13.so
08048000-0804a000 r-xp 00000000 08:01 947365     /home/a/Desktop/exer4
0804a000-0804b000 r--p 00001000 08:01 947365     /home/a/Desktop/exer4
0804b000-0804c000 rw-p 00002000 08:01 947365     /home/a/Desktop/exer4
08b54000-08b75000 rw-p 00000000 00:00 0          [heap]
b7600000-b7621000 rw-p 00000000 00:00 0 
b7621000-b7700000 ---p 00000000 00:00 0 
b775f000-b7760000 rw-p 00000000 00:00 0 
b776f000-b7771000 rw-p 00000000 00:00 0 
bf87d000-bf89e000 rw-p 00000000 00:00 0          [stack]
Aborted 
```

以下是方法：

```
int traverseDirectories(char * path , const char * filename)
{

    // printf("\nCurrent path is :%s\n " , path);
    struct dirent *direntp = NULL;
    DIR *dirp = NULL;
    size_t path_len;
    char full_name[BUFFER];
    strcpy(full_name, path);

    displayAllFiles(full_name , filename);  // display the file details to STDOUT

// code 
// code 

}

void displayAllFiles(char * directory , char * filename)
{
    struct stat st;
    DIR *dir;
    struct dirent *ent;

    char fullPathDirectory[BUFFER];
    char fileDetails[BUFFER];

    memset(fullPathDirectory, '\0', BUFFER);   // reset the array of the input
    memset(fileDetails, '\0', BUFFER);   // reset the array of the input

    dir = opendir (directory);

    if (dir != NULL)
    {

         // print all the files and directories within directory
         while ((ent = readdir (dir)) != NULL)
         {
             if (strcmp(ent->d_name , filename) == 0)
             {
                  // printf("\nFile found!\n");

                  strcpy(fullPathDirectory , directory);
                  strcat(fullPathDirectory , "/");
                  strcat(fullPathDirectory , filename);

                  if (lstat(fullPathDirectory, &st) < 0)
                  {
                      perror(ent->d_name);
                      putchar('\n');
                      continue;
                  }

                  displayProperties(&st , fileDetails);

                  printf("\n%s" , fileDetails); // print file details
                  printf("%s\n" , fullPathDirectory); // print file path
             }

         }
         closedir (dir);
    }

    else
    {
     // could not open directory
     perror ("Could not open");
     free(directory);
     exit(EXIT_FAILURE);
    }

} 
```

我`free`是`directory`in 方法`displayAllFiles`，但即使我在执行时收到此消息：

```
./exer4 fsdfsdfdafsd/ exer4 
```

程序没有找到文件夹`fsdfsdfdafsd`，这没问题，但为什么会打印所有的回溯？我想要它做的就是打印它`no such file or directory`。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:02:12.243

一些快速的观察：

1.  [不要投射`malloc()`](https://stackoverflow.com/a/605858/28169).
2.  `sizeof (char)`是 1。
3.  字符串需要为`'\0'`终止字符留出空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:05:28.743

当来自. `free(directory)`_ `displayAllFiles()`_`directory``traverseDirectories()`

通常，您不应该`exit()`在那里调用，而只是返回一个错误指示器，调用者可以（并且应该）处理该错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T11:35:41.557

这是您的代码的一部分。

```
char full_name[BUFFER];    
displayAllFiles(full_name , filename); 
.....
void displayAllFiles(char * directory , char * filename)
....
free(directory); 
```

参数`directory`不是由 分配的`malloc`，不是由 分配`free`的地址`malloc`将导致未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:33:57.837

我写了一个测试代码来模拟你的问题。

```
 1 #include <stdio.h>
  2 #include <stdlib.h>
  3 
  4 void problem(char * addr)
  5 {
  6     free(addr);
  7 }
  8 
  9 int func(char * buf)
 10 {
 11     char name[10];
 12 
 13 
 14 
 15     problem(name);
 16 
 17     return 0;
 18 }
 19 
 20 int main(void)
 21 {
 22     char *string;
 23 
 24     string = NULL;
 25     string = malloc(10);
 26     if(string == NULL)
 27         return -1;
 28 
 29     func(string);
 30     free(string);
 31     return 0;
 32 }
 33 
```

运行 valgrind 给出消息。

```
==17451== Invalid free() / delete / delete[] / realloc()
==17451==    at 0x59CFC: free (in /usr/local/lib/valgrind/vgpreload_memcheck-x86-freebsd.so)
==17451==    by 0x8048490: problem (main.c:6)
==17451==    by 0x80484B0: func (main.c:15)
==17451==    by 0x8048500: main (main.c:29)
==17451==  Address 0xbebfec2e is on thread 1's stack 
```

您不能释放不是由 分配的地址`malloc`，这会导致问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:38:26.060

问题在这里：

```
a@ubuntu:~/Desktop$ ./exer4 fsdfsdfdafsd/ exer4
Could not open: No such file or directory
*** glibc detected *** ./exer4: free(): invalid next size (normal): 0x08b54038 *** 
```

问题是，当我分配这个时：

```
path2 = (char*)malloc(strlen(currentDir)*sizeof(char)); 
```

稍后更改`path2`指向 的字符串的大小，然后我尝试释放`main` 长度为 的字符串`strlen(currentDir)`，然后得到以下信息：

```
 invalid next size (normal): 0x08b54038 *** 
```

这意味着我尝试释放其他大小的内存，这当然是不正确的。这就是我这样做的原因 : `path2 = malloc(BUFFER*sizeof(char));`，一切正常。

谢谢大家 ！

# assembly - 8086中的有效地址和相对地址

> ID：11098680
> 
> 赞同：0
> 
> 时间：2012-06-19T10:00:21.150
> 
> 标签：assembly, x86, x86-16

我不确定在 8086 中我是否理解正确，但我想分享它 CS、Ds、ss、es 将指向段的指针存储在内存中 cs:ip => 说当前指令的相对地址，如果我们想计算物理地址（或有效）地址我们只是在代码段的末尾添加一个 0h 并添加它 ip ds:bx 说数据的相对地址，如果我们想计算物理地址（或有效）地址，我们只是添加一个 0h 到数据段的末尾并用 bx 添加它

我理解对了吗？？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:51:02.917

是的，换句话说，将段乘以 16/将其左移 4，然后将偏移量添加到其中。

# design-patterns - Factory 和 Builder 模式（混合两种或多种模式）

> ID：11098682
> 
> 赞同：4
> 
> 时间：2012-06-19T10:00:23.353
> 
> 标签：design-patterns, architecture, factory-pattern

我知道这个问题被问了很多次，看起来这个问题是重复的，但我试图理解 SO、Google、GoF 上的帖子，但没有找到适合我的答案......

我了解工厂方法和生成器之间的区别：工厂方法 - 创建从特定基类派生的对象，将具体实现与客户端解耦

Builder Method - 隐藏客户端创建对象的复杂性

现在我看到了我在互联网上找到的示例（[依赖注入的抽象工厂设计模式](http://www.theserverside.com/news/1363653/Programmatic-Dependency-Injection-with-an-Abstract-Factory)），它是关于抽象工厂的，但这对我的问题无关紧要。这只是我查看的众多文章之一

```
//Abstract Factory for Dependency Injection
//Factory interface
public interface Module1ServiceFactory {
 ComponentA getComponentA();
 ComponentB getComponentB();
}

//Concrete factory
public class Module1ServiceFactoryImpl {
 private Module1ServiceFactory instance;

 private Module1ServiceFactoryImpl() {}

 public static synchronized Module1ServiceFactory getInstance() {
  if (null == instance) {
   instance = new Module1ServiceFactoryImpl();
  }

return instance;
 }

*** SUBJECT METHOD ***
 public ComponentA getComponentA() {
  ComponentA componentA = new ComponentAImpl();
  ComponentB componentB = getComponentB();
  componentA.setComponentB(componentB);
  return componentA;
 }

 public ComponentB getComponentB() {
  return new ComponentBImpl();
 }
} 
```

我在该示例中看到， ComponentA 是一种复杂类型， getComponentA() 方法用于构建它。

1.  那么为什么这被称为工厂而不是建造者？？？或者这意味着 Module1ServiceFactoryImpl 实现了 Factory **AND** Builder 模式？
2.  在软件架构设计中创建实现多个设计模式的类/对象是否正确（常用）？

对不起我的英语:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:14:10.253

工厂模式基本上隐藏了实例化*具体对象*（与构造函数不同），而是强调创建对象的*接口*。

相反，构建器模式通常有助于实现*多步骤构建行为*，其中某些步骤也可能是可选的。它强调将对象创建拆分为逻辑单元，而不是立即在语义上创建它，这与构造函数（或工厂方法）不同。

我希望以下示例可能更清楚地表达差异。

```
public class ComponentABuilder {
  private ComponentB componentB;
  private ComponentC componentC;

  public ComponentABuilder BuildComponentB(ComponentB b) {
    this.componentB = b;
  }

  public ComponentABuilder BuildComponentC(ComponentC c) {
    // Added another ComponentC, since just building B would
    // be pointless
    this.componentC = c;
  }

  public ComponentA Build() {
    // Might also be implemented via setters or whatever, the
    // point is that build now returns an object that is fully
    // built according to the steps the consumer performed via
    // the builder's methods, whereas a Factory Method would
    // do all the stuff by theirself.
    return new ComponentA(this.componentB, this.componentC);
  }
}

// Consumer sticks together his very own ComponentA
// in (usually) multiple steps
ComponentA c = new ComponentABuilder()
  .BuildComponentB(new ComponentBImpl()) // step 1
  .BuildComponentB(new ComponentCImpl()) // step 2
  .Build();

// Factory builds their ComponentA according to their
// own internal application, and getInstance is exposed
// as an "atomic" step to the consumer
ComponentA c2 = new ComponentAFactory().getInstance(); 
```

Builder Sample 是一个相当具体的案例，应用它是有意义的。但是，它也应该可用于不同的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:10:48.853

> 那么为什么这被称为工厂而不是建造者？？？或者这意味着 Module1ServiceFactoryImpl 实现了 Factory AND Builder 模式？

之所以叫工厂，是因为它是工厂，也是唯一的工厂

```
*** SUBJECT METHOD ***
 public ComponentA getComponentA() {
  ComponentA componentA = new ComponentAImpl();
  ComponentB componentB = getComponentB();
  componentA.setComponentB(componentB);
  return componentA;
 }

 public ComponentB getComponentB() {
  return new ComponentBImpl();
 } 
```

我在这里没有看到建设者。当然，这不是最简单的方法，但如果引入构建器模式，它绝对不会那么复杂。这更像是 JavaBean 方式并在新创建的对象上使用 setter。Builder模式要求在最后一步创建对象，使创建对象不可能处于ready-to-use和not-ready-yet之间的状态。

> 在软件架构设计中创建实现多个设计模式的类/对象是否正确（常用）？

是的，它是正确的并且有时被使用。不是很常见，因为每种模式都会增加一些复杂性，而多种模式会增加多种复杂性 :) 但是，当然，您可以将 builder 与 factory 混合（builder 需要一些被分解的部分）， facory 与 builder （工厂封装了创建对象的用法与建设者）。模式很好地协同工作。MVC 是很好的示例：

*GoF（Gang of Four）并不将 MVC 称为设计模式，而是将其视为“一组用于构建用户界面的类”。在他们看来，它实际上是其他三种经典设计模式的变体：观察者（Pub/Sub）、策略和复合模式。根据 MVC 在框架中的实现方式，它也可能使用工厂模式和装饰器模式。*

[http://addyosmani.com/blog/understanding-mvc-and-mvp-for-javascript-and-backbone-developers/](http://addyosmani.com/blog/understanding-mvc-and-mvp-for-javascript-and-backbone-developers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T15:24:01.190

> 这只是我的两分钱：
> 
> 1.  Module1ServiceFactoryImpl 似乎正在实现**单例**模式，所有字段和构造函数都是私有的，并且 getInstance() 用于获取 self 的新实例。
> 2.  如果 Module1ServiceFactoryImpl 实现了 Module1ServiceFactory，它可能是工厂模式。然后客户端代码可以使用工厂实现，如下所示。

```
class Client {
    public static void main(String[] args) {
        Module1ServiceFactory factory = Module1ServiceFactoryImpl.getInstance();
        ComponentA compA = factory.getComponentA();
        compA.printComponentA();

        ComponentB compB = factory.getComponentB();
        compB.printComponentB();
    }
}

class Module1ServiceFactoryImpl implements Module1ServiceFactory {
    private static Module1ServiceFactory instance;

    private Module1ServiceFactoryImpl() {
    }

    public static synchronized Module1ServiceFactory getInstance() {
        if (null == instance) {
            instance = new Module1ServiceFactoryImpl();
        }

        return instance;
    }

    public ComponentA getComponentA() {
        ComponentA componentA = new ComponentAImpl();
        ComponentB componentB = getComponentB();
        componentA.setComponentB(componentB);
        return componentA;
    }

    public ComponentB getComponentB() {
        return new ComponentBImpl();
    }
}

interface Module1ServiceFactory {
    ComponentA getComponentA();

    ComponentB getComponentB();
}

interface ComponentA {
    void setComponentB(ComponentB componentB);

    void printComponentA();
}

class ComponentAImpl implements ComponentA {
    ComponentB componentB;

    @Override
    public void setComponentB(ComponentB componentB) {
        this.componentB = componentB;
    }

    @Override
    public void printComponentA() {
        System.out.println("ComponentA");
    }
}

interface ComponentB {
    public void printComponentB();
}

class ComponentBImpl implements ComponentB {
    @Override
    public void printComponentB() {
        System.out.println("ComponentB");
    }
} 
```

# php - 按值排序多维数组

> ID：11098685
> 
> 赞同：-3
> 
> 时间：2012-06-19T10:00:39.263
> 
> 标签：php

> **可能重复：**
> [PHP 按值对多维数组进行排序](https://stackoverflow.com/questions/2699086/php-sort-multidimensional-array-by-value)

我想根据特定值（在这种情况下为人口）对多维数组进行排序，同时保持关联（数字索引不重要）。

```
array(
    array(
    'code'=>'usa',
    'name'=>'United States',
    'population'=>100
    ),
    array(
    'code'=>'de'
    'name'=>'Denmark',
    'population'=>20
    )
    array(
    'code'=>'tr'
    'name'=>'Turkey',
    'population'=>30
    )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:04:30.833

```
usort($array, function($a, $b){
    $a = $a['population'];
    $b = $b['population'];

    if ($a == $b) { return 0; }
    return ($a < $b) ? -1 : 1;
});

print_r($array); 
```

# android - 使用 Android.mk 使用预构建的静态库创建共享库

> ID：11098688
> 
> 赞同：0
> 
> 时间：2012-06-19T10:00:53.660
> 
> 标签：android, android-ndk, shared-libraries

我正在尝试使用预构建的静态库构建共享库，相应的 Android.mk 文件如下。

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
 #Include kerne headers in a proper way later on
 #LOCAL_C_INCLUDES:= $(LOCAL_PATH)/../../../../kernel/include
LOCAL_MODULE := sensors.$(TARGET_BOARD_PLATFORM)
LOCAL_MODULE_TAGS := optional

LOCAL_PRELINK_MODULE := false

LOCAL_MODULE_PATH := $(TARGET_OUT_SHARED_LIBRARIES)/hw

LOCAL_STATIC_LIBRARIES := LibFusion_ARM_cpp
 #LOCAL_LDFLAGS := $(LOCAL_PATH)/LibFusion_ARM_cpp.a

LOCAL_SHARED_LIBRARIES := liblog libcutils
 #include any shared library dependencies
LOCAL_LDFLAGS := $(LOCAL_PATH)/libimu.a
LOCAL_PRELINK_MODULE := false
LOCAL_SRC_FILES := sensors_u8500.cpp

include $(BUILD_SHARED_LIBRARY) 
```

文件夹中的文件是 Android.mk 、 LibFusion_ARM_cpp.a 、 libimu.a 、 MEMSAlgLib_eCompass.h 、 sensors_u8500.cpp

我在构建时遇到的错误如下，

```
**make: *** No rule to make target `out/target/product/u8500/obj/STATIC_LIBRARIES/LibFusion_ARM_cpp_intermediates/LibFusion_ARM_cpp.a', needed by `out/target/product/u8500/obj/SHARED_LIBRARIES/sensors.montblanc_intermediates/LINKED/sensors.montblanc.so'.  Stop.** 
```

这里有什么问题？

无法构建共享库。我的意思是无法生成 libsensor.so 文件。面对上述错误。** make: ***没有制定目标的规则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:34:21.307

我做了两件事来理解这个案子：

A. 在上面显示的 make 文件中，我添加了以下内容，以确保将这个 .a 文件复制到构建中。

```
include $(CLEAR_VARS)
LOCAL_MODULE := LibFusion_ARM
LOCAL_SRC_FILES := LibFusion_ARM_cpp.a
include $(BUILD_STATIC_LIBRARY) 
```

当我使用`mm -n`命令构建它时，我看到了 LibFusion_ARM.a 的这个奇怪的语句`rm -f ...`。当然，构建失败，说它无法找到`STATIC LIB`.

```
mkdir -p out/target/product/u8500/obj/STATIC_LIBRARIES/LibFusion_ARM_intermediates/  
rm -f out/target/product/u8500/obj/STATIC_LIBRARIES/LibFusion_ARM_intermediates/LibFusion_ARM.a  
echo "target StaticLib: LibFusion_ARM (out/target/product/u8500/obj/STATIC_LIBRARIES/LibFusion_ARM_intermediates/LibFusion_ARM.a)"
mkdir -p out/target/product/u8500/obj/SHARED_LIBRARIES/sensors.montblanc_intermediates/LINKED/
.
. 
```

为什么会发生这种删除？我不知道。这导致了问题。请提供建议。

B. 我在 make 文件中添加了以下行：

```
include $(CLEAR_VARS)
LOCAL_MODULE := LibFusion_ARM
LOCAL_SRC_FILES := LibFusion_ARM_cpp.a
include $(PREBUILT_STATIC_LIBRARY) 
```

我看到以下错误：

```
make: *** No rule to make target `out/target/product/u8500/obj/STATIC_LIBRARIES/LibFusion_ARM_intermediates/LibFusion_ARM.a', needed by `out/target/product/u8500/obj/SHARED_LIBRARIES/sensors.montblanc_intermediates/LINKED/sensors.montblanc.so'.
Stop. 
```

显然，在第二种情况下，文件 LibFusion_ARM 没有被复制（甚至`obj/STATIC_LIBRARIES/LibFusion_ARM_intermediates`没有创建目录）。不用强调，如果我手动将文件 LibFusion_ARM_cpp.a 复制为 LibFusion_ARM.a，那么构建就会通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:44:32.357

似乎构建系统找不到`LibFusion_ARM_cpp.a`. `PREBUILT_STATIC_LIBRARY`AFAIK，您必须首先使用with `LibFusion_ARM_cpp.a`set as`LOCAL_SRC_FILES`和`LOCAL_MODULE`as指定一个预构建的库模块`LibFusion_ARM_cpp`。这基本上会将指定的静态库复制到构建系统搜索所有必要模块的默认目录。

# javascript - 如何在 innerHTML 中插入脚本？

> ID：11098689
> 
> 赞同：0
> 
> 时间：2012-06-19T10:00:54.860
> 
> 标签：javascript, innerhtml, adsense

我想在javascript中将它添加到innerHTML中：

```
<script type='text/javascript'>
googletag.defineSlot('xxxxxxxxxxxx', [160, 600], 'div-gpt-ad-xxxxxxxxxx').addService(googletag.pubads());
googletag.pubads().enableSyncRendering();
googletag.enableServices();
</script>
<div id='div-gpt-ad-xxxxxxxxx' style='width:160px; height:600px;'>
<script type='text/javascript'>
googletag.display('div-gpt-ad-xxxxxxxxxxxx');
</script>
</div> 
```

无论我做什么，它总是会破坏我的代码。

你知道我能做什么吗？

谢谢！

# jsf-2 - primefaces中的多个图像上传

> ID：11098690
> 
> 赞同：0
> 
> 时间：2012-06-19T10:00:57.793
> 
> 标签：jsf-2, primefaces

我正在使用带有多个上传选项的 PrimeFaces fileUpload。在我的项目中，我想在图像上传期间发送电子邮件通知。我的问题是当我上传 10 张图片时，意味着同时发送了 10 封电子邮件通知。我想在上传 10 张图片时只发送一封电子邮件通知。我正在使用 primefaces 3.0 和 jsf 2.0。我该如何解决？

我的jsf页面：

```
 <p:fileUpload id="imaload" fileUploadListener="#{photoUploadAction.handleImage}"  
                           mode="advanced"  multiple="true" process="@form" 
                          update="messages,@form" 
                           allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/> 
```

支持豆：

```
 public void handleImage(FileUploadEvent event) throws IOException, EmailException {
       try {
            photoUploadVO.setDisabled("false");

            //BufferedImage image = ImageIO.read(in);
            ImageIO.write(resize(bufferedImage, 400,  bufferedImage.getHeight()), "jpg", new File(tmpFile));
            flag = photoUploadDaoService.uploadPhotos(photoUploadVO);

            // profileImageService.uploadPhotos(profileImageBean);
            if (flag == true) {

                if(!loginBean.getType().equals("ngo") && !loginBean.getType().equals("admin") &&
                         !loginBean.getType().equals("ngo_coordinator") ){

                     volName = getVolunteerName(photoUploadVO.getUsrId(),photoUploadVO.getUser_type());

                 lst = apDao.retreiveSetup();
                   notification = lst.get(0).activity_email.toString();
                    email = lst.get(0).approval_toEmail.toString();

                    if(notification.equalsIgnoreCase(tmp)){
                          ecs.sendPhotoNotiFication(email,photoUploadVO,volName);
                    }
                 }

                FacesMessage msg = new FacesMessage("Successfully Uploaded");

                FacesContext.getCurrentInstance().addMessage(null, msg);
            } else {
                FacesMessage msg = new FacesMessage("Failure", event
                        .getFile().getFileName() + " to uploaded.");

                FacesContext.getCurrentInstance().addMessage(null, msg);
            }

        } catch (IOException e) {
            e.printStackTrace();

            FacesMessage error = new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,
                    "The files were not uploaded!", "");
            FacesContext.getCurrentInstance().addMessage(null, error);
        }
    }

    This is my email notification method inside handle upload methos:

     ecs.sendPhotoNotiFication(email,photoUploadVO,volName); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:59:32.613

重新设计您的 bean，以便文件上传处理程序方法仅捕获并记住某个集合中的所有上传文件。然后在表单下方添加一个“保存”按钮，该按钮绑定到一个操作方法，该操作方法将*实际*处理并保存所有上传的文件并最终发送邮件。如果您将 bean 放在视图范围内，那么只要最终用户与同一个视图交互，就会重用一个相同的 bean 实例。然后，您可以在集合属性中收集上传的文件。

像这样的东西：

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {

    private List<UploadedFile> uploadedFiles;

    @PostConstruct
    public void init() {
        uploadedFiles = new ArrayList<UploadedFile>();
    }

    public void upload(FileUploadEvent event) {
        uploadedFiles.add(event.getFile());
    }

    public void save() {
        for (UploadedFile uploadedFile : uploadedFiles) {
            // Process them all here.
        }

        // Send only one email.
    }

} 
```

和

```
<p:fileUpload ... fileUploadListener="#{bean.upload}" />
<p:commandButton value="Save" action="#{bean.save}" /> 
```

# macos - 如何在 Mac 中向外部进程发送事件或消息？

> ID：11098694
> 
> 赞同：5
> 
> 时间：2012-06-19T10:01:10.510
> 
> 标签：macos, cocoa, macos-carbon, postmessage

在 Windows 中，我可以将自定义消息发布到另一个进程并通知它执行以下操作：

```
PostMessage(WindowOfAnyProcess, WM_CUSTOM_MESSAGE, param1, param2) 
```

Mac OS 上的替代方案是什么？碳事件对我有帮助吗？如何？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T00:34:11.750

假设这两个进程都是你的，你可以使用[NSDistributedNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistributedNotificationCenter_Class/Reference/Reference.html)向每个进程发送通知和数据。

为此，请执行以下操作：

```
[[NSDistributedNotificationCenter defaultCenter] postNotificationName:@"HelloFromProcessOne" object:nil] 
```

如果要包含数据，可以使用：

```
[[NSDistributedNotificationCenter defaultCenter] postNotificationName:@"HelloFromProcessOne" object:nil userInfo:[NSDictionary dictionaryWithObject:@"some info here" forKey:@"data"]] 
```

**需要补充一点：** 沙盒应用只有在不包含字典的情况下才能发送通知。如果发送应用程序在 App Sandbox 中，则`notificationInfo`必须是`nil`. 这意味着如果您打算以 Mac AppStore 为目标，您将无法在通知中提供信息。

要使应用程序接收通知，请执行以下操作：

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(someNotificationUpdate:) name:@"HelloFromProcessOne" object:nil] 
```

`someNotificationUpdate:`将被声明为：

```
- (void)someNotificationUpdate:(NSNotification *)note; 
```

# postgresql - postgresql - 计划将数据从 dblink 插入到本地表中

> ID：11098698
> 
> 赞同：1
> 
> 时间：2012-06-19T10:01:29.250
> 
> 标签：postgresql, scheduled-tasks, dblink

我正在尝试使用 dblink 将远程数据库链接到本地​​数据库。这里想要实现的是：

1.  我只想每 10 秒从远程数据库中的表中获取最新行的数据。

2.  我希望将数据插入本地数据库到预先存在的表中。在这种情况下，我希望将我从远程数据库收集的数据以及其他一些数据（如主键）和一些我没有从远程数据库获得的序列插入到表中。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:01:54.473

*   您需要远程表中的索引列，每次插入或更新行时都会增加（不是时间戳，因为许多行可以具有相同的时间戳，计算机时钟有时可以倒退等）。如果您从不更新，那么串行主键就足够了（如果您决定依赖此触发器，则强制使用触发器不允许更新）。删除也不会同步，所以我建议强制他们也不允许使用触发器。

*   您需要一个 cron（或 Windows 上的调度程序）作业来连接到您的数据库并执行同步，因为 PostgreSQL 没有定期任务的机制。

*   这项工作只会做：

    ```
    开始交易；
    以独占模式锁定表 local_tablename；
    dblink_connect(…);
    插入 local_tablename (id, data, row_counter)
      选择 * 从 dblink(
        '从 remote_tablename 中选择 id、data、row_counter
           where row_counter>'||(select coalesce(max(row_counter),-1) from local_tablename)
      ) as t(id int, data text, row_counter int);
    犯罪;
    ```

    它需要处于事务中并用锁保护，因为如果它与另一个同步作业同时运行（例如，如果前一个作业花费超过 10 秒），它可能会中断。

    如果 `local_tablename` 还没有行，则需要 `coalesce` - 如果没有它，它将不会插入任何内容。它假定总是 `row_counter>=0`。

# javascript - fitBounds() 显示整个地球（如果地图先隐藏然后显示）

> ID：11098700
> 
> 赞同：9
> 
> 时间：2012-06-19T10:01:37.687
> 
> 标签：javascript, google-maps, google-maps-api-3, fitbounds

我有一堆或标记，我只想显示包含它们的区域。我发现了一长串类似问题（请参阅帖子底部的一些问题），但没有一个解决方案适合我。LatLngBounds 是正确构建的，但是当我调用 fitBounds 时，结果将如下： ![调用 fitBounds() 后](../Images/de8dab692ea3e74848115c3e2106d321.png) 而不是： ![应该是什么](../Images/a3e660706b61cf43493d47766eac492f.png) 有人能在我的代码中发现明显的错误吗？

```
var opt = {
    zoom: 8,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("map"),opt);
var box = new google.maps.LatLngBounds();
for(var i=0;i<list.length;i++){
    var p = new google.maps.LatLng(list[i].lat,list[i].lon);
    var marker = new google.maps.Marker({
        position: p,
        map: map
    });
    box.extend(p);
}
map.fitBounds(box);
map.panToBounds(box); 
```

我阅读并尝试过的一些帖子（列表不全面）：

*   [Google Maps v3 - 自动缩放级别？](https://stackoverflow.com/questions/3245564/google-maps-v3-automating-zoom-level)
*   [谷歌地图 V3 自定义标记图像和 fitBounds()](https://stackoverflow.com/questions/10676140/google-maps-v3-custom-marker-images-and-fitbounds)
*   [带有 fitBounds 的谷歌地图不缩放](https://stackoverflow.com/questions/8565539/google-maps-with-fitbounds-dont-zoom)
*   [Google 地图 api V3 中的 fitbounds() 不适合边界](https://stackoverflow.com/questions/2494756/fitbounds-in-google-maps-api-v3-does-not-fit-bounds)

* * *

**编辑**：如果（就像我在我的应用程序中所做的那样）地图最初是隐藏的，然后才显示出来，这实际上会发生。我以这种方式隐藏它：

`$('#map').hide();`

并展示它：

```
$('#map').show(function(){
  //this is necessary because otherwise
  //the map will show up in the upper left corner 
  //until a window resize takes place
  google.maps.event.trigger(map, 'resize');
}); 
```

关于为什么会发生这种情况以及如何防止它的任何线索（除了在首次显示时初始化地图）？

附带说明一下，如果我在声明地图对象时设置了缩放和居中（即我不使用`fitBounds()`），那么即使在隐藏/显示之后，地图也会正确显示。不过，我无法设置缩放和中心，因为点列表是在其他地方检索的，我事先不知道它们在哪里。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T09:30:25.383

解决了（虽然不是很好）。我最终做的是`LatLngBounds`在加载页面时用点初始化，但仅在显示地图时才进行平移和缩放。通过这种方式，它可以正常工作。例如

```
var box;
function init(){
  var opt = {
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map"),opt);
  box = new google.maps.LatLngBounds();
  for(var i=0;i<list.length;i++){
      var p = new google.maps.LatLng(list[i].lat,list[i].lon);
      var marker = new google.maps.Marker({
          position: p,
          map: map
      });
      box.extend(p);
  }
} 
```

然后，稍后（例如单击一个按钮）

```
function showMap(){
  $('#map').show(function(){
    google.maps.event.trigger(map, 'resize');
    map.fitBounds(box);
    map.panToBounds(box);
  });
} 
```

它可以工作，但我不喜欢让那个全局变量到处闲逛。我使用 OpenLayers 实现了完全相同的行为，并且无需这种 hack 即可正常工作。如果有人有更好的解决方案，请发布，如果可行，我会接受。

感谢@Engineer 和@Matt Handy 帮助我消除了一种可能的错误来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:34:09.723

[我在小提琴](http://jsfiddle.net/7TPQZ/4/)中尝试了您的代码，它按预期工作。

所以你的代码失败的原因必须在你的数据点的定义中（正如工程师已经建议的那样）。将您的列表定义与我的进行比较，并检查它们是否不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:58:24.233

根据您的需要进行修改

```
map.fitBounds(bounds);

var listener = google.maps.event.addListener(map, "idle", function() { 
  if (map.getZoom() > 16) map.setZoom(16); 
  google.maps.event.removeListener(listener); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-14T18:14:41.933

`display: none;`同样的问题，发现原因是我在调用之前隐藏了地图（制作地图的容器）`fitbounds()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-07T10:08:56.653

为了扩展@JayThakkar 的答案，这对我有用

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    map.fitBounds(bounds);
}); 
```

该`addListenerOnce`功能无需调用`google.maps.event.removeListener(listener);`. 在侦听器内部调用`map.fitBounds(bounds)`让我们使用计算出的边界的缩放级别。

# android - Android Horizo ntalScrollView 不滚动

> ID：11098704
> 
> 赞同：0
> 
> 时间：2012-06-19T10:01:43.613
> 
> 标签：android, xml, horizontalscrollview

我有以下`HorizontalScrollView`两个自定义视图。

由于某种原因它不滚动

```
<com.name.CustomObjects.HorizontalLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp"
    android:fillViewport="true"
    android:scrollbars="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <com.name.Views.AView
            android:id="@+id/aView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <com.name.Views.BView
            android:id="@+id/bView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

    </LinearLayout>

</com.name.CustomObjects.HorizontalLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:08:01.580

AView 或 BView 中是否有任何内容？因为它们的宽度都设置为 wrap_content，所以 ScrollView 可能不会拉伸......？

您是否在 Horizo​​ntalLayout 中扩展了 ScrollView 类？

由于 fillViewPort="true"，您的 Horizo​​ntalLayout 也可能不会拉伸

# javascript - 获取div的顶部位置

> ID：11098705
> 
> 赞同：2
> 
> 时间：2012-06-19T10:01:45.423
> 
> 标签：javascript, jquery, css

我正在尝试获取`top`位置相对的 div 元素。所以结构类似于：

```
 <div class="head"></div> 
         <div class="main"></div> 
         <div class="foot"></div> 
         div { position : relative; } 
```

现在我尝试了：

```
 $(".foot").css("top") => auto

         $(".foot").offset().top => This gives value but that value is 
                           not matching the current top position of the foot div 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:10:47.527

使用[`.offsetTop`](https://developer.mozilla.org/en/DOM/element.offsetTop).

[演示。我让窗口自动滚动到顶部`div`](http://jsfiddle.net/QtXhU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T11:04:02.100

怎么样[`$('.foot').position().top`](http://api.jquery.com/position/)？这为您提供了相对于父 DOM 元素的位置

# extjs - 如何在按钮单击时加载商店

> ID：11098708
> 
> 赞同：0
> 
> 时间：2012-06-19T10:01:52.553
> 
> 标签：extjs, load, store

我在建筑师中制作了一个应用程序。我的店是这个

```
Ext.define('MyApp.store.storeMain', {
extend: 'Ext.data.Store',
requires: [
    'MyApp.model.modelMain'
],

constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
    me.callParent([Ext.apply({
        autoLoad: false,
        storeId: 'storeMain',
        model: 'MyApp.model.modelMain',
        pageSize: 50,
        proxy: {
            type: 'ajax',
            reader: {
                type: 'json',
                root: 'Main',
                totalProperty: 'Main.totalCount'
            }
        }
    }, cfg)]);
}}); 
```

这是我的按钮：

```
{
                                xtype: 'button',
                                text: 'Submit',
                                listeners: {
                                    click: {
                                        fn: me.onButtonClick,
                                        scope: me
                                    }
                                } 
```

这就是功能

```
onButtonClick: function(button, e, options) {
    storeMain.load({
        url:'test.json'
    })
}
                            }, 
```

但它没有加载商店。相反，它给出了这个错误：未定义 storeMain。我有 viewport.js 和其他文件，例如 storeMain.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:23:30.013

任何地方都没有变数`storeMain`。您需要致电`Ext.getStore('storeMain')`以获取商店参考。

# upload - 防止ckeditor中的漏洞？

> ID：11098718
> 
> 赞同：1
> 
> 时间：2012-06-19T10:02:34.813
> 
> 标签：upload, ckeditor, xss, exploit

1.  我想阻止用户在我的主机上上传 shell（利用）。我记得 fckeditor，几乎没有允许黑客在服务器上上传文件的错误。ckeditor有类似的问题吗？

2.  如何信任用户文件并确保它们不是假文件，例如：黑客可以在 pdf 文件中进行编辑 -> 文件具有 pdf 扩展名和类型但包含恶意代码。

3.  使用 htmlencode、htmldecode 是否足以应对 XSS 攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:41:26.743

1.  CKEditor 不包含任何文件上传，您必须添加该部分。

2.  同样，CKEditor 没有那个部分。他们出售 CKFinder 来担任该角色，并且它有一些检查以验证上传的文件是否安全，但您必须非常小心您允许哪些用户将文件上传到您的服务器。

3.  不。如果您使用的是所见即所得编辑器，您将不会对提供的数据进行 htmlencode，其他基本技巧也不够。您需要像[HTMLPurifier这样的全面检查](http://htmlpurifier.org/)

# excel - csv 文件未正确打开

> ID：11098720
> 
> 赞同：0
> 
> 时间：2012-06-19T10:02:36.483
> 
> 标签：excel

我在打开 csv 文件时遇到问题。

我有一个导出按钮。单击时，将使用我的数据库中的数据生成一个 csv 文件。

生成的文件在我的位置正确打开，但相同的文件在我的客户端电脑上中断。

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:15:21.873

正确形成csv如下，

```
$arr = ("data1,data2,data3,data3","data1,data2,data3,data3","data1,data2,data3,data3");
$fp = fopen('/tmp/reports.csv', 'w');
foreach ($arrData as $line) {
 fputcsv($fp, explode(',', $line));
}
fclose($fp);
header('Content-type: application/excel');
header('Content-Disposition: attachment; filename="reports.csv"');
readfile('/tmp/reports.csv'); 
```

# javascript - 动画 到未知高度

> ID：11098721
> 
> 赞同：0
> 
> 时间：2012-06-19T10:02:41.323
> 
> 标签：javascript, jquery, html, smooth

情况：我有一个索引页面，它使用 ajax 将页面加载到其中：

```
$("#ajax2").load("contact.php"); 
```

我对我的所有页面都这样做，但它改变了真正波涛汹涌的大小，我想对此进行动画处理。

我的索引页面中的重要内容：

```
<ul id="nav">
    <li id="current"><a href="#" id="home" onclick="pages('home');">Home</a></li>
    <li><a href="#" id="contact" onclick="pages('contact');">Contact</a></li>
</ul> 
```

我的javascript函数：

```
var pages = function(id) {
switch(id) {
    case 'home':
        $("#ajax2").load("home.php");
        break;
    case 'contact':
        $("#ajax2").load("contact.php");
        break;
}
}; 
```

有没有人可以指出我需要做的事情的方向，以便我的 div“ajax2”真正平滑地改变大小？

我会用

```
$("#ajax2").animate({ height: '60px' }, 'easeInOutCubic', function(){
}); 
```

除了我不知道联系人/主页/任何页面的高度。

解决了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:20:41.583

> > 除了我不知道联系人/主页/任何页面的高度。

使用高度函数查找高度

```
var h = $("#ajax2").height();

$("#ajax2").animate({ height: h }, 'easeInOutCubic', function(){
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:35:42.943

```
$("#ajax2")
  .css({
    display:'none'
  })
  .load('home.php', function () {
    var height;
    height = $(this).height();
    $(this)
      .css({
        height :0,
        display:'block'
      })
      .animate({
        height:height
      }, 1000, 'linear', function () {
      });
  }); 
```

# eclipse - 如何根据工作区更改eclipse窗口颜色？

> ID：11098723
> 
> 赞同：5
> 
> 时间：2012-06-19T10:02:46.437
> 
> 标签：eclipse, eclipse-plugin, themes

如果我几乎同时在实时分支和开发分支上工作，那么两个分支中的代码自然是相似的，我的两个 Eclipse 实例同时打开，我不断在它们之间交换并且倾向于犯错误在错误的工作区中添加代码。

如果我可以有不同的主题（颜色）来区分两个日食实例，这可能是一个很好的防呆措施。

我希望 Eclipse 窗口的主题与代码字体或文件背景不同。我对不同的工作区使用相同的 eclipse (Helios) .exe。

任何更简单的建议也可能会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T11:54:22.003

您还可以为每个工作区添加一个名称。打开`Preferences>General>Workspace`并输入工作区名称。它将显示在 shell 和任务栏中的标题开头。

这就是我区分 4.2 和 3.8 工作区的方式，因为我经常需要打开它们来比较行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T06:52:45.513

您可以在其中一个文件的背景中单击鼠标右键 > 首选项 > 文本编辑器并更改背景颜色。

# java - readObject 对 Serializability 的影响

> ID：11098724
> 
> 赞同：0
> 
> 时间：2012-06-19T10:02:48.010
> 
> 标签：java, deserialization

我有一个对象已序列化到数据库的经典情况，现在当我尝试反序列化它时，我得到一个`SerializationException: could not deserialize`. 现在我的挑战是此代码安装在可能具有不同值的各种客户处`serialVersionUID`，因此将其覆盖为报告的本地类值不是解决方案。

我的问题是，如果提供 readObject 方法会禁用 serialVersionUID 检查，还是仍然会被检查？

如果 readObject 禁用了对 serialVersionUID 的检查，那么这就足够了：

```
private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
    in.defaultReadObject();
} 
```

# ios - 在 UIImage 上绘图的问题

> ID：11098726
> 
> 赞同：0
> 
> 时间：2012-06-19T10:02:52.167
> 
> 标签：ios, cgcontext

我正在使用以下代码在图像上绘制。所有的触摸代理都在工作，但绘图没有在 UIImage 上呈现。这是代码。我无法确定问题所在。提前致谢。

```
- (id)initWithCoder:(NSCoder *)aDecoder {

    if ((self = [super initWithCoder:aDecoder])) {
        [self setupVariables];
    }

    return self;
}

- (void)drawPic:(UIImage *)thisPic {    
    myPic = thisPic;

    [myPic retain];
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {

    float newHeight;
    float newWidth;
    float xPos;
    float yPos;
    float ratio;

    if (myPic != NULL) {
        ratio = myPic.size.height/460;

        if (myPic.size.width/320 > ratio) {
            ratio = myPic.size.width/320;
        }

        newHeight = myPic.size.height/ratio;
        newWidth = myPic.size.width/ratio;

        xPos = (320 - newWidth) / 2;
        yPos = (460 - newHeight) / 2;

        [myPic drawInRect:CGRectMake(xPos, yPos, newWidth, newHeight)];
    }
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { 

    NSArray *allTouches = [[event allTouches] allObjects];

    if ([allTouches count] > 1) {
        return;
    }
    else {
        [self drawPoint:[allTouches objectAtIndex:0]];
    }    
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    NSArray *allTouches = [[event allTouches] allObjects];

    if ([allTouches count] > 1) {
        return;
    }
    else {
        [self drawPoint:[allTouches objectAtIndex:0]];

        self.previousPoint = nil;
        self.point = nil;
    }    
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {

    NSArray *allTouches = [[event allTouches] allObjects];

    if ([allTouches count] > 1) {
        return;
    }
    else {
        [self drawPoint:[allTouches objectAtIndex:0]];

        self.previousPoint = nil;
        self.point = nil;
    }        
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    NSArray *allTouches = [[event allTouches] allObjects];

    if ([allTouches count] > 1) {
        return;
    }
    else {
        [self drawPoint:[allTouches objectAtIndex:0]];
    }    
}

- (void)dealloc {

    CGContextRelease(offScreenBuffer);
    [point release];
    [previousPoint release];
    [super dealloc];
}

- (void)setupVariables {

    self.point = nil;
    self.previousPoint = nil;
    offScreenBuffer = [self setupBuffer];
}

- (CGContextRef)setupBuffer {

    CGSize size = self.bounds.size;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef context =  CGBitmapContextCreate(NULL,size.width,size.height,8,size.width*4, colorSpace,kCGImageAlphaPremultipliedLast);

    CGColorSpaceRelease(colorSpace);

    CGContextTranslateCTM(context, 0, size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    return context;    
}

- (void)drawToBuffer {

    //                  Red  Gr   Blu  Alpha
    CGFloat color[4] = {0.0, 1.0, 0.0, 1.0};

    if (self.previousPoint != nil) {
        CGContextSetRGBStrokeColor(offScreenBuffer, color[0], color[1], color[2], color[3]);

        CGContextBeginPath(offScreenBuffer);
        CGContextSetLineWidth(offScreenBuffer, 10.0);
        CGContextSetLineCap(offScreenBuffer, kCGLineCapRound);

        CGContextMoveToPoint(offScreenBuffer, previousPoint.location.x, previousPoint.location.y);
        CGContextAddLineToPoint(offScreenBuffer, point.location.x, point.location.y);

        CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeColor);

        CGContextDrawPath(offScreenBuffer, kCGPathStroke);
    }    
}

- (void)drawPoint:(UITouch *)touch {

    PointLocation *currentLoc = [[PointLocation alloc] init];

    currentLoc.location = [touch locationInView:self];

    self.previousPoint = self.point;

    self.point = currentLoc;
    [self drawToBuffer];

    [self setNeedsDisplay];

    [currentLoc release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:13:40.540

这很简单。您需要在其中完成所有绘图，`drawRect:`并且只在其中绘制图像`drawRect:`，这就是为什么您只看到图像的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:49:27.837

```
-(void)drawPic:(UIImage *)thisPic {
//code for UIViewContentModeScaleAspectFit if needed
self.backgroundColor = [UIColor colorWithPatternImage:thisPic];
[self setNeedsDisplay];
} 
```

**不要在****drawRect**方法中使用这个：

> [myPic drawInRect:CGRectMake(xPos, yPos, newWidth, newHeight)];

**编辑**

```
- (void)drawRect:(CGRect)rect {

if (!myDrawing) {

//      CGFloat scale = 0.5;
//      CATransform3D transform = CATransform3DMakeScale(scale, scale, scale);
//      [self layer].transform = transform;
    myDrawing = [[NSMutableArray alloc] initWithCapacity:0];
    self.lineOnOffArray = [[NSMutableArray alloc] initWithCapacity:0];

    //arrPenThickness = [[NSMutableArray alloc] initWithCapacity:0];
}

CGContextRef ctx = UIGraphicsGetCurrentContext();

if ([myDrawing count] > 0) {

    for (int i = 0 ; i < [myDrawing count] ; i++) {
        NSArray *thisArray = [myDrawing objectAtIndex:i];

        NSString  *onOffFlag = [self.lineOnOffArray objectAtIndex:i];

        if (([thisArray count] > 2) && (onOffFlag == @"1")){
            float penT = [[arrPenThickness objectAtIndex:i] floatValue];
            NSString* penC = [arrPenColors objectAtIndex:i];

            NSArray *arr = [penC componentsSeparatedByString:@","];

            float   r = [[arr objectAtIndex:0]floatValue];
            float   g = [[arr objectAtIndex:1]floatValue];
            float   b = [[arr objectAtIndex:2]floatValue];
            float   a = [[arr objectAtIndex:3]floatValue];
            CGContextSetRGBStrokeColor(ctx, 
                                       r/255.0,
                                       g/255.0,
                                       b/255.0,
                                       a);

            CGContextSetLineCap(ctx, kCGLineCapRound);
            CGContextSetLineWidth(ctx, penT);
            float thisX = [[thisArray objectAtIndex:0] floatValue];
            float thisY = [[thisArray objectAtIndex:1] floatValue];

            CGContextBeginPath(ctx);

            for (int j = 2; j < [thisArray count] ; j+=2) {

                CGContextMoveToPoint(ctx, thisX, thisY);
                thisX = [[thisArray objectAtIndex:j] floatValue];
                thisY = [[thisArray objectAtIndex:j+1] floatValue];
                CGContextAddLineToPoint(ctx, thisX,thisY);
            }

            CGContextStrokePath(ctx);

        }
    }
}

} 
```

# iphone - 596 在 Iphone 的 JSON 解析中未找到服务

> ID：11098728
> 
> 赞同：0
> 
> 时间：2012-06-19T10:02:55.130
> 
> 标签：iphone, xcode, json

我正在使用 JSON 解析来解析数据。ConnectionDidFinishLoading 函数是：-

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
if (connection==conn1) {`[UIApplication sharedApplication].networkActivityIndicatorVisible=NO;NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
[self requestFinished:theXML];}} 
```

XML 显示的错误是 596 Service Not Found。虽然获取的网络数据大约是 30 个字节。知道这个错误是什么意思吗？

# java - Java 7 上的 Swing Nimbus LoweredBorder

> ID：11098730
> 
> 赞同：1
> 
> 时间：2012-06-19T10:02:56.983
> 
> 标签：java, swing, border, nimbus

我有一个使用 Nimbus 外观的 Java Swing 应用程序。我还使用 LowerBorder 来布局一些组件。这在 Java 6 及更早版本上运行良好，但在 Java 7 上出现类未找到异常。

任何想法为什么？我检查了 Java 7 的 JavaDoc，似乎这个边框已被删除。如果是这种情况，是否有任何解决方法可以解决此问题？

先感谢您。

最好的，瑞

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T10:13:38.847

该类的包在 Java 6:`com.sun.java.swing.plaf.nimbus.LoweredBorder`和 Java 7:之间发生了变化`javax.swing.plaf.nimbus.LoweredBorder`，因此 Class not found 问题。

您应该避免尝试使用受限制的包，例如`com.sun.*`，因为它们会受到任意更改。

更一般地说，您还应该避免尝试操纵低级 L&F 东西，而是使用原始 API 来实现您想要的。

# android - 如何将光标传递给另一个活动？

> ID：11098736
> 
> 赞同：2
> 
> 时间：2012-06-19T10:03:21.243
> 
> 标签：android

我需要将`Cursor`对象传递给另一个活动，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:06:33.080

您可以使用 Application 类共享您的 Cursor 对象，但这并不有趣，因为建议不要过多使用静态引用，因此最好在另一个活动中使用新查询创建游标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:24:16.130

游标生命周期应在活动中处理，否则您可能会导致内存泄漏，理想情况下传递用于在意图中查询游标的 URI，例如

```
Intent intent = new Intent(this, SomeActivity.class);
intent.setData(uri);
startActivity(intent); 
```

在响应此意图的活动中，使用加载器和加载器回调查询游标。

# java - java.lang.ClassCastException: [Ljava.lang.String; 不能转换为 java.util.List

> ID：11098740
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:03:40.070
> 
> 标签：java, generics, arraylist, classcastexception

我有一个`List`，我试图以两种不同的方式使用它......

```
private List<List<List<String>>> mListSelectedsWeekDAY;

// technique 1
for(int t = 0; t < mListSelectedsWeekDAY.get(0).get(0).size();t++){
    ...
}

// technique 2
List<String> tmpList = mListSelectedsWeekDAY.get(0).get(0); 
```

我的名单是这样填充的......

```
mListSelectedsSDAY = new ArrayList<List<List<String>>>(); 
for (int i = 0; i < mListTimeBand.size(); i++) { 
    List<List<String>> tmp2 = new ArrayList<List<String>>(); 
    for (int j = 0; j < mListTimeBand.get(i).getTimeBandDefList().getTimeBandDefini().size(); j++) { 
        List<String> tmp1 = new ArrayList<String>(); 
        if (mListTimeBand.get(i).getTimeBandDefList().getTimeBandDefini().get(j).isAllSpeci‌​alDays()) { 
            for (int t = 0; t < mListSDayType.size(); t++) { 
                tmp1.add(mListSDayType.get(t).getSpecialDayName()); 
            } 
        }
        tmp2.add(tmp1); 
    }

    mListSelectedsSDAY.add(tmp2); 
} 
```

但是我的代码总是给出以下错误......

```
java.lang.ClassCastException: [Ljava.lang.String; cannot be cast to java.util.List 
```

有人可以帮我理解为什么会这样。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T10:21:54.600

一种可能的情况是，在您的一系列 Get 方法（）中，您正在继续获取字符串并将其分配给 List 变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T01:28:07.027

你实际上有一个`List<List<String>>`，而不是一个`List<List<List<String>>>`。

您必须在`List`某处使用原始类型才能发生这种情况

# jquery - jQuery Mobile 在 changePage 期间显示加载中断

> ID：11098742
> 
> 赞同：1
> 
> 时间：2012-06-19T10:03:55.317
> 
> 标签：jquery, jquery-mobile

我正在使用 JQM 构建一个移动 Web 应用程序。这是非常基本的，首页显示链接项目列表。当用户单击链接时，JQM 会动态注入显示项目特定详细信息的页面。问题是，当用户单击链接时，我需要应用程序显示加载动画，而 JQM 通过 ajax 获取页面并显示它。这是代码：

```
// Listen for any attempts to call changePage().
$( document ).bind( "pagebeforechange", function( e, data ) {

    // We only want to handle changePage() calls where the caller is
    // asking us to load a page by URL.
    if ( typeof data.toPage === "string" ) {
        // We are being asked to load a page by URL, but we only
        // want to handle URLs that request the data for a specific
        // item.
        var u = $.mobile.path.parseUrl( data.toPage ),
            re = /^#item_/;

        if ( u.hash.search(re) !== -1 ) {
            // Show the loading message
            $.mobile.showPageLoadingMsg();
            // We're being asked to display the information for a specific item.
            // Call our internal method that builds the content for the category
            // on the fly based on our in-memory category data structure.
            showPostDetails( u, data.options );

            // Make sure to tell changePage() we've handled this call so it doesn't
            // have to do anything.
            e.preventDefault();
        }
    }
});

// Load the data for a specific item, based on
// the URL passed in. Generate markup for the items in the
// ajax call, inject it into an embedded page, and then make
// that page the current active page.
function showPostDetails( urlObj, options ) {
    // Get the data string
    var IDString = urlObj.hash.replace( /.*show_id=/, "" )
    // Perform ajax to get the other page details
    $.ajax({
        type: 'POST',
        dataType : 'json',
        async: false,
        url: template_url + '/bin/aj_ax.php',
        data: 'post_id=' + IDString + '&ajax-action=get_post_details',
        success: function( data ) {
            // If we are successful
                    // Hide loading message
                    $.mobile.hidePageLoadingMsg();
            if( data.success ) {
                var $page = $( '#item_' ),
                    // Get the header for the page.
                    $header = $page.children( ":jqmData(role=header)" ),
                    // Get the content area element for the page.
                    $content = $page.children( ":jqmData(role=content)" ),
                    // Get the footer area element for the page.
                    $footer = $page.children( ":jqmData(role=footer)" ),
                    // The markup we are going to inject into the content
                    // area of the page.
                    markup = data.content;
                // Find the h1 element in our header and inject the data
                // header attribute to it.
                $header.find( "h1" ).html( data.header );
                // Inject the markup into the content element.
                $content.html( markup );
                // Inject the footer markup
                $footer.html( data.footer );
                // Pages are lazily enhanced. We call page() on the page
                // element to make sure it is always enhanced before we
                // attempt to enhance the markup we just injected.
                // Subsequent calls to page() are ignored since a page/widget
                // can only be enhanced once.
                $page.page();
                // We don't want the data-url of the page we just modified
                // to be the url that shows up in the browser's location field,
                // so set the dataUrl option to the URL for the category
                // we just loaded.
                options.dataUrl = urlObj.href;
                // Now call changePage() and tell it to switch to
                // the page we just modified.
                $.mobile.changePage( $page, options );
                // Refresh the page elements
                $( "div[data-role=page]" ).page( "destroy" ).page();
            }
        }
    });
} 
```

奇怪的是，当我在 Win7 上使用 Firefox 时，加载消息显示得很好。但是，当我使用适用于 Windows 和 Android 的 Google Chrome、默认的 Android 浏览器和适用于 iOS 设备的 Safari 时，我什么也得不到。请让我知道我可能做错了什么。谢谢！

编辑：当我试图找出问题所在时，我意识到当我调用 $.mobile.changePage( $page, options ); 时加载动画消失了。那里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:56:28.280

我遇到了完全相同的问题，由于某种原因，您调用该函数时会出现延迟。这就是我为解决它所做的：

```
$('html').addClass( "ui-loading" ); 
```

您可以以通常的方式停止加载微调器：

```
$.mobile.hidePageLoadingMsg() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:20:19.243

我有类似的问题，并通过`beforeSend`在 Ajax 配置中使用并在那里放置显示加载消息来解决它。

```
$.ajax({
    type: 'POST',
    dataType : 'json',
    async: false,
    url: template_url + '/bin/aj_ax.php',
    data: 'post_id=' + IDString + '&ajax-action=get_post_details',
    beforeSend: function () {
        $.mobile.showPageLoadingMsg();
    }
    success: function( data ) {
        $.mobile.hidePageLoadingMsg();
    } 
```

...并尝试`$.mobile.showPageLoadingMsg()`在您的内部发表评论`pageBeforeChange`

# javascript - 播放图标 youtube 视频 div 覆盖

> ID：11098746
> 
> 赞同：0
> 
> 时间：2012-06-19T10:04:23.707
> 
> 标签：javascript, jquery, youtube, overlay

我有一个图像导航，但客户想通过产品描述添加一个视频图标。

![在此处输入图像描述](../Images/d9208dbf8d092abd62ea370eca610343.png)

当用户点击视频图标时，它应该将 youtube 视频覆盖在主产品图像的顶部。有点像隐藏它并只显示视频。

我找不到任何可以做到这一点的 jquery 插件？

这是我创建的一些示例标记，当您单击图标上的播放时，我希望在图像顶部的红色框内播放 youtube 视频。

**看看我的例子：http:** [//jsfiddle.net/mC5c3/4/](http://jsfiddle.net/mC5c3/4/)

**HTML：**

```
<div class="container">

<div class="product-image">
<img src="http://www.skriftlig.com/konfliktmegling/wp-content/uploads/2010/02/Photoxpress_2658886-480x220.jpg" alt="http://www.skriftlig.com/konfliktmegling/wp-content/uploads/2010/02/Photoxpress_2658886-480x220.jpg">
</div>

    <div class="image-nav">
    </div>

    <div class="icon">
        &nbsp
    </div>

</div> 
```

**CSS：**

```
div.container
{
    margin:10px 10px auto;
    border:1px solid orange;
}

div.product-image
{
    height:220px;
    width:480px;
    border:1px solid red;  
    margin:30px;        
}

div.image-nav
{
    border:1px solid black;
    width:500px;
    height:100px;
    margin:30px;
}

div.icon
{
background-image: url("http://i.stack.imgur.com/zsQik.png");
    background-repeat: no-repeat;
    height: 50px;
    left: 540px;
    position: relative;
    top: -104px;
    width: 50px;
} 
```

**编辑：**

1.  它应该基于图标点击。
2.  并根据图标的点击显示和隐藏。
3.  视频需要嵌入到图标 div 中，以便客户端可以更改视频。

**我添加了一个点击事件并调整了视频的大小**

```
var $video=$('<iframe width="480" height="220" src="http://www.youtube-nocookie.com/embed/jvTv_oatLA0?rel=0" frameborder="0" allowfullscreen></iframe>');
var $productImage=$('.product-image');
var $icon=$('.icon');
$icon.on('click',function()
{
    $('.product-image').append($video);
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:11:33.467

```
var $icon=$('.icon');
var $video=$('.product-image iframe');
$icon.on('click',function()
{
    $video.toggle();//Shows the video if hidden, hides the video if visible.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:37:42.643

您可以使用您的 tube api 执行此操作：

```
function play() {
  if (ytplayer) {
    ytplayer.playVideo();
  }
} 
```

阅读 You Tube API 参考：[https ://developers.google.com/youtube/js_api_reference?hl=fr-FR#onYouTubePlayerReady](https://developers.google.com/youtube/js_api_reference?hl=fr-FR#onYouTubePlayerReady)

# ruby - 以下在红宝石中是什么意思？

> ID：11098751
> 
> 赞同：0
> 
> 时间：2012-06-19T10:04:34.983
> 
> 标签：ruby

谁能告诉我？以下在红宝石程序中意味着什么：

```
obj = myClass.new
(Err("Error: Can't get myClass instance"); exit) if obj == nil 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:08:31.923

这相当于：

```
obj = myClass.new
if obj == nil
   Err("Error: Can't get myClass instance")
   exit
end 
```

我个人会使用上面显示的版本，因为我认为它更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:06:48.937

```
# create instance of a class with non-standard name. 
obj = myClass.new
# call function Err and exit if myClass.new returned nil
(Err("Error: Can't get myClass instance"); exit) if obj == nil 
```

我发现这段代码令人困惑。在正常情况下，`new`永远不会返回 nil。如果它在您的应用程序中存在，那么您在某处有更复杂的代码。这不是你最大的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:07:33.780

这意味着 that `Err("Error: Can't get myClass instance")`is called 后跟`exit`if `obj`is `nil`。

在 ruby​​ 中，您可以编写这样的 if 语句`(code) if (expression)`：

# iphone - UIWebview 未检测到链接

> ID：11098753
> 
> 赞同：0
> 
> 时间：2012-06-19T10:04:47.590
> 
> 标签：iphone, ios, ipad, ios5, uiwebview

我有一个带有文本的 UIWebView，其中包含 Web 链接。测试正在从 DB 中显示。

对于文本中的某些链接，UIWebView 会检测链接，而对于某些链接则不会。在数据库中，所有链接都以与空格后相同的格式编写，我有链接。请帮助我，为什么某些链接有效而不有效？

提前致谢。

```
NSString *newString =[NSString stringWithFormat:@"<html><script> document.ontouchmove = function(event) { if (document.body.scrollHeight == document.body.clientHeight) event.preventDefault(); } </script><script type='text/javascript'>function myFunction() { window.open('http://www.otherlink.com');} function myFunction1(){window.open('http://www.newlink.com');}</script><style type='text/css'>.layout {padding:6px 10px 12px; width:300px; height:398px} *{padding:0; margin:0;line-height:normal}img{margin-bottom:10px;width:300px} button{padding-bottom:7px; border:none; text-decoration:underline;text-align:right;float:right; font-family:ArnhemPro-Blond; font-size:13px; color:#666666}.headline {color:#000000; font-family:PublicoHeadline-Light; font-size:28px; padding-bottom:4px;}.subHeadLine {color:#585c74; font-family:ApexNew-Book;margin-bottom:10px;font-size:14px;}.fullText {font-size:13px;font-family:ArnhemPro-Blond;margin-bottom:7px;} .fullText p { color:black; font-size:13px; margin-bottom:7px} .fullText a { text-decoration: underline; color: #A6091E; font-weight:bold;} .clr {clear:both;} </style> <body><div class='layout'><p class='headline'>%@</p><p class='subHeadLine'>%@</p><img src='%@'/><p class='fullText'>%@</p><button onclick='myFunction()'>Try it</button><div class ='clr'></div><button onclick='myFunction1()'>Try it Next</button></div></body></html>",headLine,subHeadLine,path,fullText] ; 
```

它显示文本+图像+2 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:46:19.040

这是一个编码问题。只是将编码更改为

> NSUTF8StringEncodeing，问题已解决。

# facebook-page - 如何在“兴趣”下获取项目 ID

> ID：11098754
> 
> 赞同：0
> 
> 时间：2012-06-19T10:04:54.580
> 
> 标签：facebook-page

我正在开发一个应用程序，以从在首页左侧菜单区域中显示的“兴趣”节点下注册的特定 Facebook 页面获取图像。

所以我想获取“兴趣”下的菜单项的ID。

我可以找到一种方法来获取用户个人资料的“兴趣”，但它与“兴趣”不同。

请有人告诉我如何获得它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:54:25.990

我用自己的新列表对其进行了测试。如果我复制链接地址并在 Graph API 中查询它包含的 id，我会得到这样的结果，

```
{
  "id": "…",
  "name": "test",
  "list_type": "user_created",
  "type": "friendlist"
} 
```

但是我在 /me/friendlists 下看不到它，也没有运气在某处使用 FQL 找到连接。不知道它是否没有显示，因为类型是“user_created”（也许？）......</p>

# eclipse - 用于 JBoss JSF 开发的 IDE

> ID：11098755
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:04:55.210
> 
> 标签：eclipse, jsf, netbeans, jboss

我计划使用 JSF（加上 PrimeFaces 或其他）作为视图层，使用 EJB3 作为业务逻辑开发一个中型到大型 Web 应用程序。我们选择 EJB3 而不是可能只需要 Servlet 容器（与 EJB3 容器相反）的更轻量级的 JSF bean 的原因是为了获得额外的 EJB3 特性，例如安全性。由于我们的目标是在 JBoss AS 上部署，所以我想知道您会推荐哪种 IDE 解决方案。我已经看到 Eclipse 和 Netbeans 都支持开箱即用或使用插件的 JBoss。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:14:55.527

甚至您也可以尝试[IntelliJ Idea](http://www.jetbrains.com/idea/)。所有这些 IDE 都支持所有常见的服务器（包括 JBoss），所以这真的不是选择 IDE 的标准。

这仅取决于您的习惯以及您是否已经运行了这些 IDE 之一（使用 Maven、Ant、SVN、Git 或您在项目中使用的任何东西），然后继续使用它:-)

# c# - 使用 WPF MVVM 推送组合框

> ID：11098757
> 
> 赞同：0
> 
> 时间：2012-06-19T10:05:02.930
> 
> 标签：c#, wpf, mvvm, push

我在 WPF 窗口中有一个组合框，它填充了来自数据库的用户名，

在数据库中创建新用户时，我希望将 UserName 推送到 ComboBox，即添加到现有用户中。

同样，当用户被删除时，它应该从`ComboBox`.

我怎样才能做到这一点。目前，我正在使用`WPF MVVM`with `Caliburn Micro`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:16:08.037

为此，我将 ItemsSource 绑定到 ObservableCollection。当您从集合中添加或删除项目时工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:46:49.480

如果您正在使用，`MVVM`那么您应该有一些绑定到`ComboBox.ItemsSource`属性的集合。如果对集合进行了任何更改 - 调用`FireProeprtyChanged("UsersCollection")`。UI 应该对此进行反思并更新`ComboBox`。

***更新：***
如果您想提供某种推送通知 - 您必须创建 HTTP 轮询双工 WCF 服务。Dan Wahlin 实现的一个很好的例子： [Syncing Data with a Server using Silverlight and HTTP Polling Duplex](http://weblogs.asp.net/dwahlin/archive/2011/02/06/syncing-data-with-a-server-using-silverlight-and-http-polling-duplex.aspx)

# android - 关于 GridView Android 的问题

> ID：11098758
> 
> 赞同：2
> 
> 时间：2012-06-19T10:05:06.467
> 
> 标签：android, gridview

我创建了包含 20 个项目的 gridview。我已经使用自定义适配器来绑定这个 gridview。当我在 gridview 中滚动时，项目的索引已更改，或者有时某些项目已不可见。N 有时整个网格视图是不可见的。不知道它是怎么回事。

```
 public class MyAdapter extends BaseAdapter {

        final int NumberOfItem = 90;
        private Bitmap[] bitmap = new Bitmap[NumberOfItem];

        View grid;

        private Context context;
        private LayoutInflater layoutInflater;

        MyAdapter(Context c){
         context = c;
         layoutInflater = LayoutInflater.from(context);

         //init dummy bitmap,
         //using R.drawable.icon for all items
       /*  for(int i = 1; i < NumberOfItem; i++){
          bitmap[i] = BitmapFactory.decodeResource(context.getResources(), R.drawable.image1);
         }*/
        }

        @Override
        public int getCount() {
         // TODO Auto-generated method stub
         return imageIDs.length;
        }

        @Override
        public Object getItem(int position) {
         // TODO Auto-generated method stub
         return position;
        }

        @Override
        public long getItemId(int position) {
         // TODO Auto-generated method stub
         return position;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
         // TODO Auto-generated method stub

         if(convertView==null){
          grid = new View(context);
          grid = layoutInflater.inflate(R.layout.main, null);

          ImageView imageView = (ImageView)grid.findViewById(R.id.image);
          imageView.setBackgroundResource(imageIDs[position]);

          TextView textView = (TextView)grid.findViewById(R.id.text);
          textView.setText(names[position]);

         }else{

             grid = (View)convertView;

         }

         return grid;
        }

        Integer[] imageIDs = {

                R.drawable.attorneys_180, R.drawable.auto_repair_180, R.drawable.coffee_180, R.drawable.gas_stations_180,
                R.drawable.grocery_180, R.drawable.hotels_180, R.drawable.locksmith_180, R.drawable.nightclubs_180,
                R.drawable.plumbers_180

        };

        String[] names = {"Attorneys","Auto Repair","Coffee","Gas Stations","Grocery","Hotels","Locksmith","NightClubs","Plumbers"};

    } 
```

main.xml 的内容

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" android:gravity="center">

<ImageView
android:id="@+id/image"
android:layout_width="67dp"
android:layout_height="67dp" android:background="@drawable/ic_launcher"/>

<TextView
 android:id="@+id/text"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:layout_alignRight="@+id/image"
 android:layout_below="@+id/image"
 android:text="gsdfgsd"
 android:textColor="#000000" android:gravity="center"/>

 </RelativeLayout> 
```

给我正确的解决方案。

谢谢，杰伊帕特尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:05:59.753

在没有看到 Activity 的其余代码的情况下发现错误有点困难，但我们可以从修复`getView`方法开始（我在所做的更改旁边添加了一些注释）：

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent) 
    {
         if(convertView == null){
             //grid = new View(context); You don't need this because next line creates it for you
             grid = layoutInflater.inflate(R.layout.main, null);
         }
         else
         {
             grid = convertView;
         }

         // You always need to set the right image and text, even when you have a non-null convertView

         ImageView imageView = (ImageView)grid.findViewById(R.id.image);
         imageView.setBackgroundResource(imageIDs[position]);

         TextView textView = (TextView)grid.findViewById(R.id.text);
         textView.setText(names[position]);

         return grid;
    } 
```

# javascript - 水平滚动时动态更新 Metro listView (JS/HTML)

> ID：11098760
> 
> 赞同：2
> 
> 时间：2012-06-19T10:05:11.193
> 
> 标签：javascript, html, listview, microsoft-metro

在以下代码中：

```
 var dataObj = document.getElementById("listView").winControl;
            var postList = new WinJS.Binding.List(appData); //json formatted data array
            var filteredList = postList.createFiltered(function _filterItems(item) { return item.ID < 3 });
        dataObj.itemDataSource = filteredList.dataSource; 
```

我创建了一个过滤列表，它只显示前 3 个项目。我想在横向滚动时动态添加更多项目，

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:12:41.950

根据 appData 的来源，这可能会也可能不会过大

如何创建自定义数据源 - [http://msdn.microsoft.com/en-us/library/windows/apps/Hh770849.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh770849.aspx)

# java - 挂毯属性文件+注入，实现对参数[n]的支持

> ID：11098762
> 
> 赞同：0
> 
> 时间：2012-06-19T10:05:12.380
> 
> 标签：java, code-injection, tapestry

我对挂毯比较陌生。在挂毯项目中，这种情况

参数在**X.properties**文件中，例如

```
SomeService.urlDoOnething=http://etc/etc1
SomeService.urlDoOtherthing=http://etc/etc2 
```

在**1.java**

```
@Inject
@Value("SomeService.urlDoOnething")
private String SomeServiceurlDoOnething
@Inject
@Value("SomeService.urlDoOtherthing")
private String SomeServiceurlDoOtherthing 
```

**2.java**中

 **```
request = new ClientRequest(SomeServiceurlDoOnething); .... 
```

我必须实现 SomeService[N].url*thing 参数。用户可以从组合框中选择服务（也在思考如何优雅地实现组合框）。

由于我不太了解挂毯并且搜索文档/谷歌还没有太大帮助..也许我可以在这里找到很好的建议 - 我怎样才能以最优雅/最少的编码方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:58:52.887

我不确定我是否完全理解您的问题，您能否进一步解释这部分：

> 我必须实现 SomeService[N].url*thing 参数。用户可以从组合框中选择服务（也在思考如何优雅地实现组合框）。

我想我确实理解的是，您的问题有两个阶段：

1.  如何摄取属性文件
2.  如何通过注入访问键/值对

解决**1**：

将以下内容添加到您的模块 (AppModule.java)：

```
public void contributeSymbolSource(OrderedConfiguration<SymbolProvider> providers)
{
    providers.add("ExtraConfiguration", new ClasspathResourceSymbolProvider("extra.properties"), "after:SystemProperties", "before:ApplicationDefaults");
} 
```

解决**2**：

在您的 Page.java 中，使用`@Symbol`而不是`@Value`：

```
@Inject
@Symbol("SomeService.urlDoOnething")
private String urlDoOnething; 
```**

# android - 是否需要在 android 设备上预装 SL4A 才能运行用 python 开发的应用程序？

> ID：11098765
> 
> 赞同：2
> 
> 时间：2012-06-19T10:05:18.467
> 
> 标签：android, python, sl4a

我了解我们需要安装在我们测试的设备中，一旦我们开始分发应用程序，客户的 Android 设备是否需要预先安装 SL4A 或者我们可以将其与应用程序一起打包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:27:57.290

您可以使用嵌入式解释器创建 APK，因此无需安装 SL4A。

说明在[这里](http://code.google.com/p/android-python27/)。

# iphone - 长按手势和子视图不起作用

> ID：11098773
> 
> 赞同：0
> 
> 时间：2012-06-19T10:05:42.837
> 
> 标签：iphone, ios, xcode

我有一个 UIView，带有一个 UISCrollView 的子视图和一个视图（`lastView`）的子视图。我想要的是当我长按视图时它会删除`lastView`. 然后再次长按后`lastView`会再次出现。我试过了，但我只到了这么远。我没有`lastView`出现，我`long press gesture`也没有工作。

这是我的代码：

```
- (void)handleLongPress:(UILongPressGestureRecognizer*)sender { 
    if (sender.state == UIGestureRecognizerStateEnded) {
        [self.slotView removeFromSuperview];
        NSLog(@"Long press Ended");
    }
    else {
        NSLog(@"Long press detected.");
    }
}

- (void) createScrollView {
    self.slotBg = [[UIView alloc] initWithFrame:CGRectMake(43, 370, 300, 143)];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.slotBg.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor grayColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
    [self.slotBg.layer insertSublayer:gradient atIndex:0];
    [self.view addSubview:self.slotBg];
    UILongPressGestureRecognizer *longPress = 
    [[UILongPressGestureRecognizer alloc] initWithTarget:self 
                                            action:@selector(handleLongPress:)];
     longPress.minimumPressDuration = 2.0;
    [slotBg addGestureRecognizer:longPress];

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,300.0f,134.0f)];
    [slotBg addSubview:scrollView];

    self.slotView = [[UIView alloc] initWithFrame:CGRectMake(0.0f,0.0f,300.0f,134.0f)];
    [scrollView addSubview:slotView];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self 
                   action:@selector(buttonClicked:) 
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i; 

        [scrollView addSubview:button];

        if (column == 4) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    [scrollView setContentSize:CGSizeMake(330, (row+1) * 60 + 10)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:38:05.900

添加并`UIGestureRecognizerDelegate` 写入`[longPress setDelegate:self];`. `- (void) createScrollView`我认为它会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:56:54.137

在视图的 touchesBegan 中：您可以延迟调用“长按”句柄。

```
[touchHandler performSelector:@selector(longTap:) withObject:nil afterDelay:1.5]; 
```

然后在视图的 touchesEnded: 如果没有足够的时间过去，您可以取消该调用：

```
[NSObject cancelPreviousPerformRequestsWithTarget:touchHandler selector:@selector(longTap:) object:nil]; 
```

在视图的.h文件中添加**bool *flag**；并在 viewDid load 添加此**标志 = true;**

现在选择器 longTap: 将是：

```
 -(void)longTap:(id)sender
 {
   if(flag){ 
    flag = false;
    [lastView removeFromSuperView];
    }
    else{
     flag = true;
     //Create lastView reference 
     [scrollView addSubView:lastView];
    }
 } 
```

# json - AFNetworking + 下载文件或 JSON 响应 + setDownloadProgressBlock

> ID：11098775
> 
> 赞同：0
> 
> 时间：2012-06-19T10:05:45.747
> 
> 标签：json, file, download, afnetworking

在某些情况下，我在下载文件或管理错误时遇到问题 (JSON)

下载工作非常好。问题是当用户请求下载时，服务器可以在少数情况下发送 404 或 200（使用 JSON）。

在这种情况下如何处理 JSON？当我们发送请求时，我们不知道我们是否会收到 JSON 错误（状态为 200 或 404）或压缩文件...

我看不到 responseObject 如何帮助我。

这是我的代码：

```
 AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
  operation.outputStream = [NSOutputStream outputStreamToFileAtPath:zipPath append:NO];

  [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) 
  {
    NSLog(@"Successfully downloaded zip file to %@", zipPath);

    // is-it impossible to handle a JSON response here ?
    // responseObject can help me ? don't think !

    // do what I have to do after the download is complete
  } 
  failure:^(AFHTTPRequestOperation *operation, NSError *error) 
  {
    // 404
    // is-it impossible to handle a JSON response here ?
    if ([error code] == -1011)
    {

    }
  }];

  [operation setDownloadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    float progress = ((float)((int)totalBytesWritten) / (float)((int)totalBytesExpectedToWrite));
    self.progressView.progress = progress;
  }];  
  [operation start]; 
```

我需要制作 AFJSOnRequestOperation 吗？但是在这种情况下，如何接收下载的不是 JSON 的文件？感谢您的帮助。

编辑：正如我在评论中所写，只有当我评论该行时，我才能在成功块中获取并捕获 responseData：

```
 operation.outputStream = [NSOutputStream outputStreamToFileAtPath:zipPath append:NO]; 
```

这是合乎逻辑的，我想响应进入 outputStream 而不是成功块。有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:44:29.863

服务器应在标头中指示 MIME 类型`Content-Type`。如果不是，您需要自己检测数据类型。

此行确保在成功块中获得所有状态码为 200-499 的响应：

```
[AFHTTPRequestOperation addAcceptableStatusCodes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(300, 200)]]; 
```

在成功块中，您需要确定响应的类型：

```
id jsonObject = AFJSONDecode(operation.responseData, NULL);
if (jsonObject) {
   // handle JSON
} else {
  // handle zip file 
} 
```

您也可以`operation.response.statusCode`事先 检查`operation.response.MIMEType`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T05:03:27.653

```
 AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];

    manager.responseSerializer =    [AFCompoundResponseSerializer serializer];

    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@"application/octet-stream"];

    AFHTTPRequestOperation *operation = [manager GET:url   parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {

    if (responseObject) {

    }
    else{

        }

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    }];

[operation start]; 
```

// manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@"application/octet-stream"]; ：可以根据您的期望而有所不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:36:54.200

我尝试过使用 AFJSOnRequestOperation，在 .m 中我只是将 outputStream 放在 init 下方：

```
AFJSONRequestOperation *requestOperation = [[[self alloc] initWithRequest:urlRequest] autorelease];

requestOperation.outputStream = [NSOutputStream outputStreamToFileAtPath:[FullyLoaded filePathForResourceAtURL:urlRequest.URL.absoluteString] append:NO]; 
```

同样的情况，除非注释 outputStream 行，否则 responseData 为零，因此不是 HTTPRequest 或 JSOnRequest 问题。我用来解决的方法是对来自 responseData 的对象进行 JSON 排序并将其写入文件，而不是直接输出请求。

# bash - Redis：当通过 awk 传递 llen 结果时，谁在吃我的领域？

> ID：11098776
> 
> 赞同：5
> 
> 时间：2012-06-19T10:05:47.323
> 
> 标签：bash, shell, awk, redis, pipe

Redis：2.0.4、2.4.1、...

我将编写一个 Nagios 插件来检查列表的长度。这是我的脚本：

```
#!/bin/sh

help()
{
    echo "Usage: $0 <host> <port> <key> -w <warning> -c <critical>"
}

case "$1" in
    --help)
        help 
        exit
        ;;
esac

if [ $# -eq 0 ]; then
    help
    exit 3
fi
if [ $# -ne "7" ]; then
    help
    exit 4
fi
if [ $4 !="-w" -o $6 !="-c" ]; then
    help
    exit 5
fi

REDIS_CLI="/usr/local/redis/bin/redis-cli"
LLEN=`$REDIS_CLI -h $1 -p $2 llen $3 | awk '{ print $2 }'`
if [ $LLEN -lt $5 ]; then
    echo "$3.llen:$2 OK - $LLEN | $3.llen:$2=$LLEN;$5;$7"
    exit 0
elif [ $LLEN -ge $5 -a $LLEN -lt $7 ]; then
    echo "$3.llen:$2 WARNING - $LLEN | $3.llen:$2=$LLEN;$5;$7"
    exit 1
elif [ $LLEN -ge "$7" ]; then   
    echo "$3.llen:$2 CRITICAL - $LLEN | $3.llen:$2=$LLEN;$5;$7"
    exit 2
fi 
```

但运行时出现以下错误`/usr/lib64/nagios/plugins/redis_llen.sh 192.168.5.201 2468 -w 90000 -c 100000`：

```
/usr/lib64/nagios/plugins/redis_llen.sh: line 31: [: -lt: unary operator expected
/usr/lib64/nagios/plugins/redis_llen.sh: line 34: [: too many arguments
/usr/lib64/nagios/plugins/redis_llen.sh: line 37: [: -ge: unary operator expected 
```

在调试模式下运行它，我发现`LLEN`' 的值是......空白。由于`llen queue_1`返回正确的结果：

```
# /usr/local/redis/bin/redis-cli -h 192.168.5.201 -p 2468 llen queue_1
(integer) 965 
```

为什么管道会吞下我的田地？（不仅是，`awk`而且`echo`，，`tee`...）：

```
# /usr/local/redis/bin/redis-cli -h 192.168.5.201 -p 2468 llen queue_1 | \
awk '{ print $0 }'
961 
```

我可以检查字段的数量并打印相应的作为解决方法：

```
| awk '{ if (NF == 2) print $2; else print $1 }'` 
```

但我真的很想知道为什么会这样？和数字之间是否有任何空字符或特殊字符`(interger)`？

PS：似乎其他一些 Redis 版本（例如：1.3.7）没有遇到这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:06:40.810

您遇到的是`redis-cli`根据实际情况选择不同的输出`STDOUT`。如果`STDOUT`是 TTY，`redis-cli`将使用它的“标准”格式输出。否则，“原始”格式是默认的：

```
--raw            Use raw formatting for replies (default when STDOUT is not a tty) 
```

正如您从帮助或上面看到的那样，您可以指定`--raw`始终让它输出“原始”格式（没有类型限定符等）。我通过挖掘源代码发现，还有一个 CSV 模式，使用`redis-cli --csv`.

**编辑：**要强制“标准”输出，即使`STDOUT`不是 TTY，您也可以设置环境变量`FAKETTY`：

```
FAKETTY=1 redis-cli llen some_list | awk '{ print $2 }' 
```

或者

```
redis-cli --raw llen some_list | awk '{ print $1 }' 
```

# android - 按字母顺序排序按钮

> ID：11098778
> 
> 赞同：0
> 
> 时间：2012-06-19T10:05:53.753
> 
> 标签：android, sorting, button

我在 xml 布局中创建了一些按钮。他们的名字来自 3 种不同语言的字符串资源。因此，按钮并不总是按正确的字母顺序排列。所以这是我的问题。我该怎么做才能使按钮在所有 3 种语言中按字母顺序排序？

真诚的约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:24:55.857

假设这三个按钮位于 LinearLayout 中，您可以继承 LinearLayout 并覆盖 getChildAt() 方法以按您想要的顺序返回视图（一旦加载字符串，您就可以解决这个问题）。

例如

```
@Override
public View getChildAt(int index)
{
  // translate index into the ordering you want.
  // and put into newIndex...

  return super.getChildAt(newIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:37:41.260

您可以为每种语言创建一个布局（查看此[文档](http://developer.android.com/guide/topics/resources/localization.html)）

另一种解决方案是在 a 中加载字符串`List`，对其进行排序，然后使用`Button.setText`从排序中设置每个按钮的字符串，`List`并`Button.setTag`为每个按钮提供该文本的唯一标签。之后，您可以使用标签进行`onClickListener`相应的设置。

# android - 如何以编程方式查找android手机的电池充电时间？

> ID：11098779
> 
> 赞同：4
> 
> 时间：2012-06-19T10:05:55.827
> 
> 标签：android, battery

我想知道我们如何才能找到 android 设备为电池充满电所需的时间。

例如，如果我的电池电量为 0%，那么充满电需要多长时间，即 100%，如果我的设备电量为 70%，那么如果我现在连接充电器，那么我的设备充满电需要多长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:08:23.517

您应该阅读有关此的[官方文档](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)。基本上你需要使用`BatteryManager`类来找出电池电量的当前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:33:26.687

这对我有用：

```
private void batteryLevel() {
        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                context.unregisterReceiver(this);
                int rawlevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
                int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
                int level = -1;
                if (rawlevel >= 0 && scale > 0) {
                    level = (rawlevel * 100) / scale;
                }
                batterLevel.setText("Battery Level Remaining: " + level + "%");
            }
        };
        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(batteryLevelReceiver, batteryLevelFilter);
    } 
```

另见： http: [//mihaifonoage.blogspot.de/2010/02/getting-battery-level-in-android-using.html](http://mihaifonoage.blogspot.de/2010/02/getting-battery-level-in-android-using.html)

# javascript - 如何在 Javascript 中编辑 Telerik MVC 网格的行

> ID：11098784
> 
> 赞同：1
> 
> 时间：2012-06-19T10:06:24.347
> 
> 标签：javascript, asp.net-mvc, telerik, telerik-grid, telerik-mvc

我正在尝试编辑单元格的 innerText 属性。文本显示在表格中，但问题是该行没有被标记为已更新，因此当我按下“保存更改”按钮时，更新方法没有获取该行（在要更新的行列表中） .

我正在尝试使用此方法（updateRow），但到目前为止它一直不成功：

```
var grid = ("#grid").data("tGrid");
var rowToUpdate = grid.data[0];
rowToUpdate.quantity = 4;
grid.updateRow(rowToUpdate); 
```

调用该方法时，出现以下异常：

> “对象不支持此属性或方法”。

在telerik的来源。有谁知道如何将行标记为已更新？还是更新行中单元格值的更好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:10:33.810

您可以使用客户端方法[`updateRow`](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#updateRow)强制更新。关键是选择您希望更新的表格行，如他们的示例所示（当然，您不必使用他们的`$('#Grid .t-grid-edit-row')`选择器；您可以使用任何选择器，只要它选择您希望更新的行）。我相信您修改单元格的`innerHTML`/`innerText`以传达新值是它的完成方式。

# cordova - 如何为来自 Phonegap 的每个 http 请求添加标头？

> ID：11098788
> 
> 赞同：2
> 
> 时间：2012-06-19T10:06:38.133
> 
> 标签：cordova, phonegap-plugins

有没有一种简单的方法来创建一个插件（IOS/Android），为每个传出请求添加一个 HTTP 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:10:32.360

是的。您可以创建`BroadcastReceiver`和侦听传出请求。编辑收到的内容并在此之后发送。

关于此主题的有用文章：

*   [Android 开发者参考页面关于`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)
*   [关于此主题的 Stack Overflow 问题](https://stackoverflow.com/questions/7140061/broadcast-receiver-and-internet-connection)

如果您有更多问题，请写评论。

# silverlight-4.0 - Silverlight - 按特定顺序进行异步调用 - CRM

> ID：11098795
> 
> 赞同：0
> 
> 时间：2012-06-19T10:06:50.520
> 
> 标签：silverlight-4.0, asynchronous, dynamics-crm, crm

我目前正在使用 silverlight 为 CRM 表单构建控件。

在检索各种数据集的地方进行了很多异步调用。然而，我面临的问题是有时调用是按随机顺序进行的，出于数据绑定的原因，我需要按特定顺序检索数据。

任何想法？

基本上我有3种方法 -

检索客户 检索机会 检索潜在客户

每个人都有回调，但我希望每个人在移动到下一个之前用回调的结果做出响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:51:48.257

1.  使调用同步，或
2.  在每个回调中，调用下一个调用

# iphone - 将图像加载到缓存中

> ID：11098797
> 
> 赞同：1
> 
> 时间：2012-06-19T10:06:53.440
> 
> 标签：iphone, objective-c, ios, caching, uiimage

我有以下代码用于在 xml 解析 endElement 方法中从 url 加载图像：

```
food.image=strVal;
NSData *data=[[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:strVal]];
UIImage *image=[[UIImage alloc]initWithData:data];
food.myImage=image; 
```

虽然我在应用程序结束时使用这个加载的图像，但我的应用程序必须等到所有图像都加载完毕。我应该在这里使用缓存，但我很困惑如何在这个应用程序中使用缓存。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:53:56.937

试试这个代码，这不会在你的主线程上产生负载： -

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);

dispatch_async(queue, ^{

    NSData *data=[[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:yourURL]];
    UIImage *image=[[UIImage alloc]initWithData:data];

    dispatch_sync(dispatch_get_main_queue(), ^{
        [yourImageView setImage:image];

    });
}); 
```

# matlab - 未定义的函数或变量'mmread' - Matlab

> ID：11098800
> 
> 赞同：1
> 
> 时间：2012-06-19T10:07:04.827
> 
> 标签：matlab, video

我试图在 Matlab 中编写一个使用函数“mmread”的代码。

起初我收到以下错误：

```
 "C:\Program Files\MATLAB\R2008a\bin\win32" 
```

我在网上搜索，发现我必须下载 mmread 并将其定位在“C:\Program Files\MATLAB\R2008a\bin\win32”中，所以我做了。但它仍然不起作用。

当我尝试在命令窗口上运行它时，如下所示：

```
 mmread('C:\videosFolder\video1.avi'); 
```

我收到以下警告：

```
 Warning: In the directory "C:\Program Files\MATLAB\R2008a\bin\win32\mmread", mexDDGrab.mexw32 now shadows mexDDGrab.dll. 
```

请参阅 MATLAB 7.1 发行说明。

当我尝试运行我的代码时：

```
 [~,audio]=mmread(pathname,[],[n n+1],true,false,'',true,false); 
```

我收到以下错误：

```
 Expression or statement is incorrect--possibly unbalanced (, {, or [. 
```

有什么建议么 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:21:19.023

我刚刚测试过，2010a 可以，但 2009a 没有，所以对于 2008，您将不得不使用 [temp,audio]=mmread() 输入 temp 的内容

# iphone - 在特定点停止 CABasicAnimation

> ID：11098802
> 
> 赞同：7
> 
> 时间：2012-06-19T10:07:07.637
> 
> 标签：iphone, objective-c, ios, ipad, core-animation

我正在使用使用创建的旋转动画`CABasicAnimation`。它旋转了`UIView`超过 2 秒。但是我需要能够在`UIView`被触摸时阻止它。如果我删除动画，则视图与动画开始之前的位置相同。

这是我的动画代码：

```
float duration = 2.0;
float rotationAngle = rotationDirection * ang * speed * duration;
//rotationAngle =  3*(2*M_PI);//(double)rotationAngle % (double)(2*M_PI) ;
CABasicAnimation* rotationAnimation;
rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
rotationAnimation.toValue = [NSNumber numberWithFloat: rotationAngle ];
rotationAnimation.duration = duration;
rotationAnimation.cumulative = YES;
rotationAnimation.removedOnCompletion = NO;
rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
rotationAnimation.fillMode = kCAFillModeForwards;
rotationAnimation.delegate = self;

[self.view.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"]; 
```

`UIView`当它被触摸时，我怎样才能停止它的旋转？我知道如何管理触摸部分，但我不知道如何在动画的当前角度停止视图。

**解决方案：** 我通过获取表示层的角度、删除动画和设置视图的变换来解决问题。这是代码：

```
[self.view.layer removeAllAnimations];      
CALayer* presentLayer = self.view.layer.presentationLayer; 
float currentAngle = [(NSNumber *)[presentLayer valueForKeyPath:@"transform.rotation.z"] floatValue];
self.view.transform = CGAffineTransformMakeRotation(currentAngle); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T10:24:31.120

好问题！为此，了解 Core Animation 架构会很有帮助。

如果您查看描述 Core Animation Rendering Architecture 的[Core Animation Programming Guide](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)中的图表，您可以看到有三棵树。

你有*模型*树。这就是你设置你*想要*发生的事情的价值的地方。然后是*演示*树。就运行时而言，这几乎就是发生的事情。然后，最后是*渲染*树。这就是用户所看到的。

在您的情况下，您想要查询*表示*树的值。

这很容易做到。对于您附加动画的视图，获取`layer`和`layer`，查询`presentationLayer`的值。例如：

```
CATransform3D myTransform = [(CALayer*)[self.view.layer presentationLayer] transform]; 
```

没有办法“暂停”动画中间流。您所能做的就是查询这些值，将其删除，然后从您离开的地方重新创建它。

有点痛！

看看我的其他一些帖子，我会更详细地介绍这一点，例如

[当应用程序从后台恢复时恢复动画停止的地方](https://stackoverflow.com/questions/7568567/restoring-animation-where-it-left-off-when-app-resumes-from-background/7983292#7983292)

也不要忘记，当您将动画添加到视图层时，您实际上并没有更改底层视图的属性。那么会发生什么？我们会在动画停止的地方获得奇怪的效果，并且您会在原始位置看到视图。

这就是您需要使用`CAAnimation`代表的地方。看看我对这篇文章的回答，我在其中介绍了这一点：

[CABasicAnimation 旋转返回原始位置](https://stackoverflow.com/questions/7683526/cabasicanimation-rotate-returns-to-original-position/7690841#7690841)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T10:12:57.453

您需要将旋转设置为[presentationLayer](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/presentationLayer)的旋转，然后从图层中移除动画。[您可以在我关于Hit testing animating layers](http://ronnqvist.tumblr.com/post/21228285860/hit-testing-animating-layers)的博客文章中阅读有关表示层的信息。

设置最终旋转的代码类似于：

```
self.view.layer.transform = [(CALayer*)[self.view.layer presentationLayer] transform];
[self.view.layer removeAnimationForKey:@"rotationAnimation"]; 
```

# jquery - 如何清除 jQuery UI 地图中的叠加层？

> ID：11098807
> 
> 赞同：0
> 
> 时间：2012-06-19T10:07:37.057
> 
> 标签：jquery, jquery-ui, map, overlay

我已经编写了这段代码来使用 Jquery ui 地图在地图中创建叠加层。

```
 function drawTratta()

{

$.getJSON('json/getTratta.php?mode=set', function(data) {

  var flightPlanCoordinates = [];

  $.each(data.coord, function(i, item) 
    {

    flightPlanCoordinates.push(new google.maps.LatLng(item.latitudine,item.longitudine));  

    });

 $('#map_canvas').gmap('addShape', 'Polyline', 
{  'path': flightPlanCoordinates,
   'strokeColor': "#FF0000", 
   'strokeOpacity': 0.5, 
   'strokeWeight': 3, 
   'fillColor': "#FF0000", 
   'fillOpacity': 0.35 });

});

    } 
```

好吧，该函数正确绘制了一条线，但不知道如何从地图中清除该线！如果我再次调用该函数，则绘制另一行而不取消前一行。

在 Jquery ui 地图中，您可以使用此功能清除标记：

```
$('#map_canvas').gmap('clearMarkers'); 
```

是否有类似的功能来清除折线覆盖？

拜托，有人帮帮我！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:55:11.277

使用 jquery-ui-map 插件将是：

```
$("#map_canvas").gmap('clear', 'overlays'); 
```

对于特定类型：

```
$("#map_canvas").gmap('clear', 'overlays > Circle'); 
```

请注意这些选项（多边形、折线、矩形、圆形）的上限。

# objective-c - UIGestureRecognizers冲突

> ID：11098808
> 
> 赞同：2
> 
> 时间：2012-06-19T10:07:51.300
> 
> 标签：objective-c, ios, uigesturerecognizer

我有一个覆盖`UIGestureRecogniser`设计来检测 2 次触摸，但不一定是一个接一个。

我有：

```
- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer *)preventingGestureRecognizer
{
    if ([preventingGestureRecognizer isKindOfClass:[UIRotationGestureRecognizer class]])
    {
        self.state = UIGestureRecognizerStateCancelled;
        return YES;
    }

    if ([preventingGestureRecognizer isKindOfClass:[UISwipeGestureRecognizer class]])
    {
        self.state = UIGestureRecognizerStateCancelled;
        return YES;
    }

    //Will prevent a conflict with a 2 finger touch only.   
    if ([preventingGestureRecognizer isKindOfClass:[UITapGestureRecognizer class]])
    {
        if (preventingGestureRecognizer.numberOfTouches == 2)
        {
            self.state = UIGestureRecognizerStateCancelled;
            return YES;
        }  
        return NO;
    }
    self.state = UIGestureRecognizerStateRecognized;
    return NO;
} 
```

在我的 MVC 中，我还有一个旋转手势识别器。我的问题是它们是冲突的。`@selector`当上述方法应该阻止它时，我的 doubleTap 手势识别器正在调用它的动作。

看起来上面的方法没有被调用。我认为这是因为当两个手指触摸以执行旋转时，以下代码：

```
- (void)secondTouchRecived
{
    self.state = UIGestureRecognizerStateRecognized;
} 
```

调用`UIGestureResponders`操作方法并绕过预防方法。我尝试将其更改为，`UIGestureRecogniserStateBegan`但这似乎也绕过了预防方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:38:26.880

通过将旋转、滑动和点击手势识别器传递给您的自定义手势识别器上的 requireGestureRecognizerToFail: 来指定依赖项怎么样？这将阻止您的手势识别器在旋转识别器有机会处理触摸之前转换到已识别状态。

# groovy - 从重写的 Java 类调用方法。

> ID：11098811
> 
> 赞同：2
> 
> 时间：2012-06-19T10:07:58.717
> 
> 标签：groovy

我从 java 类调用覆盖方法时遇到问题。我有以下Java类：

```
public class Base
{
    int state = 0;
    public void called()
    {
        System.out.println("Hello, from called method: " + state);
    }

    public String getFirst() 
    {
       return "From Base;
     }

    //
    ...
    //
} 
```

我使用一个 groovy 脚本来覆盖`getFirst()`它，以便它调用`called()`

```
def base = [ getFirst : {
    called()                    // this line has an error
    "From Second"
    }] as Base

base.getFirst() 
```

我该如何实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:19:43.617

你不能那样使用代理魔法......在 Maps 声明的时候，它不知道它将成为 Base 的代理，所以它会抛出错误

为什么不按正常方式做呢？

```
 def base = new Base() {
   public String getFirst() {
     called()
     "from me"
   }
 } 
```

# ruby-on-rails - Heroku：将数据访问封装在 API 中

> ID：11098814
> 
> 赞同：1
> 
> 时间：2012-06-19T10:08:06.293
> 
> 标签：ruby-on-rails, ruby, database, api, heroku

我有一个带有 PostgreSQL 数据库的 Heroku 应用程序。现在我想有一个单独的进程，可能在另一台机器上，来访问数据库。Herkou 网站上的建议其实是我自己想做的：

```
No, connecting to your database from machines outside of Heroku is not supported.
We recommend that you encapsulate data access in an API to manipulate it. 
```

但我不确定如何做到最好。我希望能够将一些 JSON 发送到 API 并根据该请求取回 JSON。就像在一个示例微博应用程序中*，“给我所有针对一组给定 userIds 过期的帖子”*或*“如果他们的帖子包含任何给定单词，则更新所有用户以暂停” 。*

实现这一目标的最佳方法是什么？我可以编写一个可以通过 TCP 访问并接受 JSON 输入的额外 ruby​​ 程序吗？Heroku甚至可能吗？还是我必须以某种方式将 API 集成到我的 rails 应用程序中？如何？

感谢任何想法，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:05:15.993

您必须将 API 集成到您的 Rails 应用程序中，有很多解决方案，其中之一是使用专门用于 API 构建的工具（如[Grape](https://github.com/intridea/grape) ）并将其安装到您的 Rails 应用程序中。这样你就可以让你的 Rails 应用程序和 API 运行，它们都共享相同的代码库。

# delphi - 将小图标添加到 virtualtreeview

> ID：11098822
> 
> 赞同：1
> 
> 时间：2012-06-19T10:08:37.373
> 
> 标签：delphi, icons, virtualtreeview

我正在尝试在delphi2010中向VirtualTreeview添加小图标我使用属性图像将ImageList附加到VirtualTreeview

```
procedure TMainFrm.VSTGetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);
var
  FileInfo: PFileInfoRec;
begin
  if Kind in [ikNormal , ikSelected] then
  begin
    if Column = 0 then
    ImageIndex :=ImageList1.AddIcon(FileInfo.FileIco);
  end;
end; 
```

但添加图标后看起来太暗了：

![截屏](../Images/952666c1a9900ab9554848f5c59f3cd1.png)

FileInfo Strucutre (Record with methods) 在我加载文件时填充，所以我需要的只是将 fileico 从 fileinfo 添加到 imagelist 并显示在树视图中

```
type
  PFileInfoRec= ^TFileInfoRec;
  TFileInfoRec = record
  strict private
    vFullPath: string;
      .
      .
      .
    vFileIco : TIcon;
  public
    constructor Create(const FilePath: string);
    property FullPath: string read vFullPath;
      .
      .
      .
    property FileIco : TIcon  read vFileIco;
  end; 
```

构造函数：

```
constructor TFileInfoRec.Create(const FilePath: string);
var
  FileInfo: SHFILEINFO;
begin
  vFullPath := FilePath;
    .
    .
    .
  vFileIco        := TIcon.Create;
  vFileIco.Handle := FileInfo.hIcon;
//  vFileIco.Free;
end; 
```

那么问题在哪里？！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T11:55:43.953

让我们有一个图像列表`ImageList1`并将其分配给`VirtualStringTree1.Images`属性。然后加入之前的评论者，在你使用之前`FileInfo`，给它分配一些东西，比如：`FileInfo := Sender.GetNodeData(Node)`，而不是你可以使用`FileInfo.FileIco`的。但是您应该将您的图标添加到图像列表而不是`OnGetImageIndex`. 您应该在 OnInitNode 中执行此操作（如果您遵循虚拟范式，您应该执行的操作），而不是将添加图标的索引存储在 FileInfo 中。例子：

```
procedure TForm1.VirtualStringTree1InitNode(Sender: TBaseVirtualTree;
  ParentNode, Node: PVirtualNode; var InitialStates: TVirtualNodeInitStates);
var
  FileInfo: PFileInfoRec;
begin
  FileInfo := Sender.GetNodeData(Node);
  //...
  FileInfo.FileIcoIndex := ImageList1.AddIcon(FileInfo.FileIco);

end; 
```

比在`onGetImageIndex`：

```
procedure TMainFrm.VSTGetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);
var
  FileInfo: PFileInfoRec;
begin
  FileInfo := Sender.GetNodeData(Node);
  if Kind in [ikNormal , ikSelected] then
  begin
    if Column = 0 then
    ImageIndex :=FileInfo.FileIcoIndex;
  end;
end; 
```

如果还不够，请发布更多示例代码，以启发我们您的问题。

# ios - iOS 尝试附加 2 个 SQLite 数据库时出错

> ID：11098824
> 
> 赞同：1
> 
> 时间：2012-06-19T10:08:45.560
> 
> 标签：ios, database, xcode, sqlite

我是一名 Ios 开发人员，我在附加 2 个 SQLite db 时遇到问题。我们在运行时收到此错误：

```
Error calling sqlite3_step (1: SQL logic error or missing database) SQLITE_ERROR
2012-06-19 11:10:19.658 °°°°°°°[453:707] DB Query: ATTACH DATABASE '/var/mobile/Applications/A05034A8-F5AF-45AA-B520-DF2BBEBB800B/Documents/Meals.db' AS mealDB
2012-06-19 11:10:19.672 °°°°°°°[453:707] Err 1: no such table: Meal
2012-06-19 11:10:19.680 °°°°°°°[453:707] Error calling sqlite3_step (1: SQL logic error or missing database) SQLITE_ERROR
2012-06-19 11:10:19.684 °°°°°°°[453:707] DB Query: ATTACH DATABASE '/var/mobile/Applications/A05034A8-F5AF-45AA-B520-DF2BBEBB800B/Documents/Meals.db' AS mealDB
2012-06-19 11:10:19.693 °°°°°°°[453:707] Err 1: no such table: MealItem
2012-06-19 11:10:19.698 °°°°°°°[453:707] ERREUR 
```

附加后，我们正在尝试收集数据。他没有找到我们正在搜索的表： Err 1：没有这样的表：MealItem 或 Err 1：没有这样的表：Meal。

它变得更加陌生！当我们使用 iOS 5.0 在 Sim 中测试相同的代码时，它可以工作了！数据正在从请求中返回！仍然有几次这个错误：

```
Error calling sqlite3_step (1: SQL logic error or missing database) SQLITE_ERROR
2012-06-19 11:10:19.684 °°°°°°°[453:707] DB Query: ATTACH DATABASE '/var/mobile/Applications/A05034A8-F5AF-45AA-B520-DF2BBEBB800B/Documents/Meals.db' AS mealDB 
```

我们尝试在 sqlight manager 中附加 2 个数据库，这很成功。这个结果数据库也在应用程序中工作。似乎 iOS 在附加数据库时遇到了问题。或者我们在某处犯了错误。

到目前为止，我们正在寻找一个没有任何运气的解决方案。

这里有一些代码：（使用 FMDatabase api）

```
- (FMDatabase *) attachMealDatabase:(FMDatabase *) db {

    if (![db open]) {
        NSLog(@"Could not open db.");
        return nil;
    }else {

    }

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [paths objectAtIndex:0];
    //const char * mainDBPath = [[documentDirectory stringByAppendingPathComponent:@"Main.db"] UTF8String];
    const char * mealDBPath = [[documentDirectory stringByAppendingPathComponent:@"Meals.db"] UTF8String];

    NSString *attachSQL = [NSString stringWithFormat: @"ATTACH DATABASE \'%s\' AS mealDB", mealDBPath];

    [db beginTransaction];

    [db executeUpdate:attachSQL];
    [db commit];
    //[db close];

    return db;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:09:00.920

尝试将数据库附加在`FMDatabase`图层中而不是视图控制器中。我们通过调用以下函数在 Db open 函数中完成此操作：

```
-(void)attachDb{

  NSArray paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString documentDirectory = [paths objectAtIndex:0];
  const char  secondDBPath = [[documentDirectory    stringByAppendingPathComponent:@"Second.db"] UTF8String];

  if (sqlite3_open([databasePath UTF8String], &db) == SQLITE_OK)
  {
    NSString *strSQLAttach = [NSString stringWithFormat:@"ATTACH DATABASE \'%s\' AS SECOND", secondDBPath ];
    char *errorMessage;

    if (sqlite3_exec(db, [strSQLAttach UTF8String], NULL, NULL, &errorMessage) == SQLITE_OK)
    {
        DLog(@"Great Success!");
    }
  }    
} 
```

希望这对你有用！

# salesforce - 添加 VF 页面

> ID：11098834
> 
> 赞同：1
> 
> 时间：2012-06-19T10:09:47.153
> 
> 标签：salesforce, apex-code

如何将 Vf 页面添加到配置文件？我正在尝试向供应商用户添加 VF 页面。谁能帮我解决这个问题。

谢谢阿努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:11:58.630

在 Salesforce 中，只需导航到设置 -> 管理设置 -> 管理用户 -> 配置文件。打开您的个人资料，但不要单击编辑。一直滚动到屏幕底部，到名为“启用 Visualforce 页面访问”的部分。单击此区域中的编辑，您可以将页面从左侧框移到右侧框以授予该配置文件访问权限。

# python - 通过在列表的开头而不是尾部添加来扩展 python 列表的最佳解决方案？

> ID：11098836
> 
> 赞同：21
> 
> 时间：2012-06-19T10:09:57.837
> 
> 标签：python, performance, list

你有

```
x = ['a', 'b', 'c']
y = [1, 2, 3] 
```

并想`y`在开头插入列表`x`：

```
x = [1, 2, 3, 'a', 'b', 'c'] 
```

在 Python 中执行此操作的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-19T10:20:38.963

```
>>> x = ['a', 'b', 'c']
>>> y = [1, 2, 3]
>>> x = y + x 
```

`deque`对于较小的输入大小，这个简单的解决方案的运行速度是解决方案的两倍：

```
$ cat x1.py 
for i in range(1000000):
    x = ['a', 'b', 'c']
    y = [1, 2, 3]
    x = y + x

$ cat x2.py 
from collections import deque
for i in range(1000000):
    d = deque(['a', 'b', 'c'])
    d.extendleft(reversed([1, 2, 3]))

$ time python x1.py

real    0m1.912s
user    0m1.864s
sys     0m0.040s

$ time python x2.py

real    0m5.368s
user    0m5.316s
sys     0m0.052s 
```

但是，对于较大的输入，它会变得更慢：

```
>python -m timeit -s "y = range(100000)" "x = list(xrange(10000000)); y+x"
10 loops, best of 3: 229 msec per loop

>python -m timeit -s "from collections import deque; y = range(100000)" "d = deque(xrange(10000000)); d.extendleft(reversed(y))"
10 loops, best of 3: 178 msec per loop 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T10:11:35.347

当您想在左侧追加时， a[`deque`](http://docs.python.org/library/collections.html#collections.deque)比列表更有效。使用`extendleft`方法。

```
>>> from collections import deque
>>> d = deque(['a', 'b', 'c'])
>>> d.extendleft(reversed([1, 2, 3]))
>>> d
deque([1, 2, 3, 'a', 'b', 'c']) 
```

*如果您总是只*在左侧追加，请考虑以相反的顺序将元素保留在列表中。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-08T01:18:22.237

```
x[0:0] = y 
```

*   符号简单
*   性能特点：*未知*
*   保留 id(x)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-19T11:56:38.490

根据您对结果所做的事情，也许您根本不想列出清单：

```
new_x = itertools.chain(y, x) 
```

现在你有了一个迭代器，它将产生 y 中的所有值，然后是 x 中的所有值。现在你可以迭代它：

```
for val in new_x:
    blah blah 
```

# java - 如何创建可移植的 Weblogic 脚本工具应用程序？

> ID：11098841
> 
> 赞同：2
> 
> 时间：2012-06-19T10:10:37.157
> 
> 标签：java, weblogic, wlst

我正在创建 WLST 脚本，该脚本将针对运行 weblogic 的服务器运行，该服务器已被完全锁定。除非预先授权更改，否则我只有查看日志的权限和对控制台的只读访问权限。我无权访问整个 weblogic 域并运行 WLST。

我想在安装了 Java 但没有 Weblogic 的不同服务器上运行 WLST。

我最初希望将一个 weblogic jar 添加到类路径然后运行该工具，但这似乎有点复杂。

我一直按照[这些](https://forums.oracle.com/forums/thread.jspa?messageID=10331374)说明进行操作，但没有成功。

我当前的设置是这个目录结构，其中的 jars 取自 weblogic 12.1.1：

```
├── launch.sh
├── lib
│   ├── com.bea.core.utils.full_2.0.0.0.jar
│   ├── com.bea.core.xml.xmlbeans_2.2.0.0.jar
│   ├── com.oracle.cie.comdev_6.4.0.0.jar
│   ├── com.oracle.cie.config_7.2.0.0.jar
│   ├── com.oracle.cie.config-wls_7.2.0.0.jar
│   ├── com.oracle.cie.config-wls-schema_10.3.6.0.jar
│   ├── com.oracle.cie.wizard_6.1.0.0.jar
│   ├── com.oracle.core.weblogic.msgcat_1.3.0.0.jar
│   ├── jython.jar
│   ├── weblogic.jar
│   ├── weblogic.server.modules.jsf2.0_12.1.1.0.jar
│   ├── wlclient.jar
│   ├── wlfullclient.jar
│   └── wlthint3client.jar
└── props.txt 
```

Oracle 论坛上描述的 props.txt 为空，launch.sh 包含：

```
java -cp $(echo lib/*.jar | tr ' ' ':') -Dprod.props.file=props.txt -Dbea.home= -Dweblogic.home= weblogic.WLST 
```

在运行 launch.sh 时，我收到错误消息：

```
sam@ubuntu64vm:~/Desktop/scripts$ ./launch.sh

Initializing WebLogic Scripting Tool (WLST) ...

Problem invoking WLST - java.lang.NullPointerException 
```

是否可以创建最小/可移植的 WLST 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:06:39.363

通过运行以下命令，独立 WSLT 适用于 Weblogic 10.3.4（请参阅注 3，这会停止 java.lang.NullPointerException）：

```
java -cp lib/wlfullclient.jar;lib/com.bea.core.xml.xmlbeans_2.2.0.0.jar;lib/com.oracle.cie.comdev_6.3.0.0.jar;lib/com.oracle.cie.config-wls-schema_10.3.4.0.jar;lib/com.oracle.cie.config-wls_7.1.0.0.jar;lib/com.oracle.cie.config_7.1.0.0.jar;lib/com.oracle.cie.wizard_6.1.0.0.jar;lib/com.oracle.core.weblogic.msgcat_1.1.0.0.jar;lib/jython.jar;lib/weblogic.jar -Dprod.props.file=lib/props.txt -Dbea.home= -Dweblogic.home=c:/users/username/wls10 weblogic.WLST your-script.py 
```

关于脚本的注意事项：

1.  我的 WLST 示例设置从**c:/users/username/wls10 运行**
2.  所需的 jar 在**c:/users/username/wls10/lib**中。
3.  weblogic.home 必须设置为绝对路径，例如**c:/users/username/wls10'**。
4.  您必须在**/lib**目录中创建一个空白的**props.txt 。**
***   我也遵循了与上述[相同](https://forums.oracle.com/forums/thread.jspa?messageID=10331374)的说明。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T13:58:08.970

我需要的库列表如下：

```
coherence.jar
com.bea.core.xml.xmlbeans.jar
com.oracle.cie.comdev_7.7.0.0.jar
com.oracle.cie.config_8.4.0.0.jar
com.oracle.cie.config-external_8.4.0.0.jar
com.oracle.cie.config-owsm_8.4.0.0.jar
com.oracle.cie.config-security_8.4.0.0.jar
com.oracle.cie.config-wls_8.4.0.0.jar
com.oracle.cie.config-wls-external_8.4.0.0.jar
com.oracle.cie.config-wls-schema_8.4.0.0.jar
com.oracle.cie.dependency_1.7.0.0.jar
com.oracle.cie.encryption_2.4.0.0.jar
com.oracle.cie.service-table_1.4.0.0.jar
com.oracle.cie.wizard_7.7.0.0.jar
com.oracle.core.weblogic.msgcat.jar
com.oracle.glcm.common-logging_1.5.0.0.jar
com.oracle.glcm.encryption_2.6.0.0.jar
com.oracle.weblogic.lifecycle.provisioning.api.jar
com.oracle.weblogic.lifecycle.provisioning.core.jar
com.oracle.weblogic.lifecycle.provisioning.wlst.jar
cryptoj.jar
jython-modules.jar
weblogic.jar
wlfullclient.jar
wls-api.jar
wlst-impl.jar 
```

我使用 jarscan 实用程序通过尝试运行多个 wlst 脚本来定位所有丢失的类。总大小为 150MB

我的 launch.sh 如下：

```
#!/bin/bash
MYDIR=$(dirname $0)
CP=$(echo $MYDIR/lib/*.jar | tr ' ' ':')
echo $CP
java -cp $CP -Dprod.props.file=$MYDIR/props.txt -Dbea.home=`pwd` -Dweblogic.home=`pwd` weblogic.WLST $@ 
```

不完美，但为我工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-09T04:32:48.640

我编写了一个脚本来检索独立 WLST 工具所需的所有文件

存储库是[https://github.com/cheloide/wlst-standalone](https://github.com/cheloide/wlst-standalone)

该[脚本](https://github.com/cheloide/wlst-standalone/blob/master/packager/repack_wlst122130.sh) 提取 Weblogic Server 并将其安装在临时位置，创建`wlfullclient.jar`所需资源并将其复制到您选择的目录或工作路径中

我还在同一个仓库中制作了另一个[脚本](https://github.com/cheloide/wlst-standalone/blob/master/wlsutil.sh)来使用[Weblogic.Deployer](https://docs.oracle.com/cd/E13222_01/wls/docs90/deployment/wldeployer.html)工具

**目前该工具仅适用于 GNU/Linux**；应该可以在 Mac-OS 上进行一些调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T11:31:13.373

我最近在 WLS 12.1.3 上遇到了同样的问题，最终得到了一组不同的依赖 jar。这是我需要的：

```
wlfullclient.jar
weblogic.jar
com.bea.core.xml.xmlbeans_1.0.0.0_2-6-0.jar
com.oracle.cie.comdev_7.1.0.0.jar
com.oracle.cie.config-owsm_8.1.0.0.jar
com.oracle.cie.config-security_8.1.0.0.jar
com.oracle.cie.config-wls-schema_12.1.3.0.jar
com.oracle.cie.config-wls_8.1.0.0.jar
com.oracle.cie.config_8.1.0.0.jar
com.oracle.cie.dependency_1.1.0.0.jar
com.oracle.cie.encryption_2.1.0.0.jar
com.oracle.cie.service-table_1.1.0.0.jar
com.oracle.cie.wizard_7.1.0.0.jar
com.oracle.core.weblogic.msgcat_3.0.0.0.jar
jython-modules.jar 
```

这已针对启动/停止服务器和取消部署/部署应用程序进行了测试。**

# java - Java屏幕共享程序

> ID：11098844
> 
> 赞同：0
> 
> 时间：2012-06-19T10:10:49.210
> 
> 标签：java, windows, tcp, client-server

我想创建一个多客户端客户端-服务器程序，其中服务器有单独的窗口来显示所有客户端屏幕，以监控他们计算机上发生的事情。我将如何做？

我想知道如何在使用 GUI 界面的服务器上显示屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:13:42.210

您将列出您的需求，提出初始设计，充实设计，开始实施，然后细化设计，继续实施、测试和调试，直到获得满意的实施。如果您遇到麻烦或有具体问题，您可以提出更多问题。

# tesseract - 使用 tesseract 3.01 的逐字符置信度值

> ID：11098845
> 
> 赞同：7
> 
> 时间：2012-06-19T10:11:05.683
> 
> 标签：tesseract

我执行了以下代码以生成按字符的置信度值：

```
int main(int argc, char **argv) {

    const char *lang="eng";
    const PIX   *pixs;
     if ((pixs = pixRead(argv[1])) == NULL) {
       cout <<"Unsupported image type"<<endl;
        exit(3);
      }
    TessBaseAPI  api;
    api.SetVariable("save_blob_choices", "T");
    api.SetPageSegMode(tesseract::PSM_SINGLE_WORD  );        
    api.SetImage(pixs);
    int rc = api.Init(argv[0], lang);
    api.Recognize(NULL);
    ResultIterator* ri = api.GetIterator();
    if(ri != 0)
    {
        do
        {
            const char* symbol = ri->GetUTF8Text(RIL_SYMBOL);
            if(symbol != 0)
            {
                float conf = ri->Confidence(RIL_SYMBOL);
                cout<<"\nnext symbol: "<< symbol << " confidence: " << conf <<"\n" <<endl;

             }

            delete[] symbol;
                }    while((ri->Next(RIL_SYMBOL)));
    }
    return 0;
} 
```

[图片链接](http://www.google.com/imgres?hl=en&client=ubuntu&hs=oYw&sa=X&channel=fs&biw=1848&bih=947&tbm=isch&prmd=imvnso&tbnid=9rXmU4v9Lv-05M%3a&imgrefurl=http://www.sostars.com/nb-strange-font/&docid=tR10YRmNr592bM&imgurl=http://www.sostars.com/wp-content/uploads/2009/02/nb-strange.jpg&w=477&h=144&ei=pU_gT8z2F8O4rAeXo8iEDQ&zoom=1&iact=rc&dur=290&sig=107305962295400674833&page=1&tbnh=57&tbnw=189&start=0&ndsp=54&ved=1t:429,r:29,s:0,i:165&tx=61&ty=26)

上图得到的输出是：

> 下一个符号：N 置信度：72.3563 下一个符号：B 置信度：72.3563
> 
> 下一个符号：E 置信度：69.9937 下一个符号：T 置信度：69.9937
> 下一个符号：R 置信度：69.9937 下一个符号：A 置信度：69.9937
> 下一个符号：N 置信度：69.9937 下一个符号：G 置信度：69.9937
> 下一个符号：- 置信度：69.9937 下一个符号：我信心：69.9937

很明显，属于同一单词的字符的置信度值是相同的。这是预期的输出吗？每个角色的置信度值不应该不同吗？我尝试为每个字符采用不同字体样式的单词执行代码。但是，对于属于同一单词的字符，置信度值是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T00:55:14.853

问题是您在调用SetVariable*之后调用了 Init。*

# php - jQuery mobile 在列表条目后添加一个空格

> ID：11098847
> 
> 赞同：1
> 
> 时间：2012-06-19T10:11:09.223
> 
> 标签：php, jquery, json, listview, jquery-mobile

我从 php 中检索数据并将它们动态添加到列表视图中。如果我“即时”添加静态数据，一切看起来都很完美，但是当从 php 文件中检索数据时，jQuery Mobile 在我的列表条目之后添加了一个空格。有已知问题吗？！

我的 js 文件看起来像：

```
 userda = '';
    $.ajax({
           type: "POST",
           url: "userdata.php",
           data: {"iduser": iduser},
           dataType: 'json',
           cache: false,
           success: function(data1){
           userda += '<li data-role="list-divider">Name</li>';
           userda += '<li>'+data1.data.fname+' '+data1.data.lname+'</li>';
           userda += '<li data-role="list-divider">Money</li>';
           userda += '<li>'+data1.data.money+'</li>';
           userda += '<li data-role="list-divider">Headlines</li>';
           $.each(data1.headlines, function(i, currentObj) {
                  userda += '<li>' + currentObj + '</li>​';
                  });
           $('ul#userdatalist').html(userda).listview('refresh');
           }
           }); 
```

我的 HTML 文件看起来像

```
<ul data-role="listview" data-inset="true" data-theme="c" data-divider-theme="a" id="userdatalist">
                    </ul> 
```

并且（json）数据看起来像：

```
{"data":{"fname":"test","lname":"test","money":"47"},"headlines":["Promis","Unterhaltung","Unterwaesche"]} 
```

结果看起来像：http: [//imageshack.us/photo/my-images/705/bildschirmfoto20120619uj.png/](http://imageshack.us/photo/my-images/705/bildschirmfoto20120619uj.png/)

我看不到任何问题，但我的第二个列表视图也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:14:36.760

两个想法：

1.  您是否有任何 .live() 或 .delegate() 函数可能会弄乱您的列表？

2.  您可以尝试使用标准 for 循环并与 jquery 结合使用（因为您使用的是标准 js 而不是 'success' 中的 jquery）或因此在您的 .each()-loop 中使用 jquery：

    ```
    var $ul = $('ul#userdatalist'); // selector to the ul being filled 
                                    // (btw: since an id has to be unique, 
                                    // it is useless to prepend the tagType

    $ul.append(userda); // this is the jquery way -
                        // more or less ;)

    for (var i = 0;i < data1.headlines.length; i++) {
        $e = $("<li/>").text(data1.headlines[i]); // you could do this in your 
                                                  //.each()-loop as well, thus 
        $u.append($e);                            // sticking to jquery            
    } 
    ```

# android - 通过 google 登录在 android 应用程序中对用户进行身份验证

> ID：11098848
> 
> 赞同：0
> 
> 时间：2012-06-19T10:11:14.107
> 
> 标签：android, authorization, google-api

我想通过谷歌登录在我的 android 应用程序中验证用户，然后在他成功登录（验证）时显示他的姓名和电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:17:33.777

你应该看看这个：[http ://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)

# haskell - 如何在黑线鳕中记录自我声明的类型？

> ID：11098849
> 
> 赞同：1
> 
> 时间：2012-06-19T10:11:14.683
> 
> 标签：haskell

我有一个带有签名的函数，`Own_type1 -> String -> Own_type2 -> IO ()`希望我可以解释我自己的类型，并在最终的文档中正确链接等等。

使用 Haddock 时如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:18:20.953

您链接到您自己的类型的方式与链接到其他类型的方式相同（请参阅Haddock 文档中的[第 3.8.6 节）。](http://www.haskell.org/haddock/doc/html/ch03s08.html)

# iphone - 我可以在目标 C 中处理 UIImage 吗？

> ID：11098851
> 
> 赞同：0
> 
> 时间：2012-06-19T10:11:18.913
> 
> 标签：iphone, objective-c, image-processing, uiimage

我想一点一点地处理 UIImage 。根据所附示例，第一个是普通图像，第二个是使用 CGBitmapContextCreate 函数处理的图像。

有什么想法或参考吗？

我不太清楚，通过它可以实现，但不知道我们如何一点一点地处理。![在此处输入图像描述](../Images/fa62d1316043874cf0cc79687abaf592.png)

```
CGContextRef context;
context = CGBitmapContextCreate(pixelData,
                                CGImageGetWidth(sourceImage),
                                CGImageGetHeight(sourceImage),
                                8,
                                CGImageGetBytesPerRow(sourceImage),
                                CGImageGetColorSpace(sourceImage),
                                kCGImageAlphaPremultipliedLast); 
```

![在此处输入图像描述](../Images/d56c991e3c089278e47f0c8c39898a85.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:37:00.527

如果你想处理图像，你有不同的技术：

*   检查 Core Image 以查看内置的过滤器以及如何将它们应用于图像。请注意，Core Image 在 Mac OS 上也可用，您可以构建自定义过滤器

*   对于更多“图像处理”或“计算机视觉”相关的任务（我在这里说的是技术领域，而不是拉皮条图像），您需要访问图像的位图数据。为此，您可以从 UIImage 创建一个 CGImage（请参阅 Quartz 文档），或者如果您从网络摄像头抓取，您将需要使用中间缓冲区（请参阅 AVFoundation frmework）。

# php - 多行正则表达式

> ID：11098857
> 
> 赞同：0
> 
> 时间：2012-06-19T10:11:46.097
> 
> 标签：php, regex

考虑以下文本：

```
$content=<<<EOT
    {
        "translatorID": "f4a5876a-3e53-40e2-9032-d99a30d7a6fc",
        "label": "ACL",
        "creator": "Nathan Schneider",
        "target": "^https?://(www[.])?aclweb\\.org/anthology-new/[^#]+",
        "minVersion": "1.0.7",
        "maxVersion": "",
        "priority": 100,
        "browserSupport": "gcs",
        "inRepository": true,
        "translatorType": 4,
        "lastUpdated": "2012-01-01 01:42:16"
    }

    // based on ACM translator
    function detectWeb(doc, url) {
      var namespace = doc.documentElement.namespaceURI;
        var nsResolver = namespace ? function(prefix) {
            if (prefix == 'x') return prefix; else return null;
        } : namespace;

        var bibXpath = "//a[./text() = 'bib']"
        if(doc.evaluate(bibXpath, doc, nsResolver, XPathResult.ANY_TYPE, null).iterateNext()) {
          return "multiple"
        }
      //commenting out single stuff
      // if (url.indexOf("/anthology-new/J/")>-1)
      //  return "journalArticle";
      // else
      //  return "conferencePaper";
    }
EOT; 
```

我想在文本的开头`{`和之间选择文本。`}`我测试以下但它没有产生所需的文本。

```
preg_match('~\{(.*)\}~m',$content,$meta);
var_dump( $meta); 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:17:20.673

即使在多行模式下，`.`也不匹配换行符。[`s`您可以使用(PCRE_DOTALL) 修饰符](http://php.net/manual/reference.pcre.pattern.modifiers.php)使其与换行符匹配：

```
preg_match('~\{(.*)\}~sm',$content,$meta);
                      ^ 
```

但是，您的情况还需要使匹配不贪婪，否则这也将从下面的源代码中选择：

```
preg_match('~\{(.*?)\}~sm',$content,$meta);
                  ^ 
```

[演示](http://codepad.viper-7.com/XJ3IGq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:13:51.493

备忘单[http://www.cs.washington.edu/education/courses/cse190m/11su/cheat-sheets/php-regex-cheat-sheet.pdf](http://www.cs.washington.edu/education/courses/cse190m/11su/cheat-sheets/php-regex-cheat-sheet.pdf)说：

```
 Base Character Classes
 .  (Period) – Any character except newline 
```

但它也说

```
Pattern Modifiers
s   Dotall - . class includes newline 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:18:42.730

这可能是你所追求的：

```
preg_match('/\{(.*?)\}/s', $string, $result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:22:38.590

尝试

`preg_match('~\{(.*)\}~m',$content,$meta,PCRE_MULTILINE);`

附加文档 [http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

# java - 在插件视图中将非同质节点添加到树

> ID：11098859
> 
> 赞同：1
> 
> 时间：2012-06-19T10:11:54.270
> 
> 标签：java, eclipse-plugin, treeview, eclipse-rcp, eclipse-emf

我正在开发一个插件，并且有一个带有 treeviewer 的视图。我想以图形方式将节点添加到该树，因为这些节点不是输入对象的子节点（treeviewer.setInput(input object)

例子：

我有 x 和 y 对象，它们不相关 x 有子对象 x1 和子对象 x2

如果我将树查看器的输入设置为 x，那么我将在我的树中获得 x1 和 x2，因为它们是它的孩子

现在，我如何将对象 y 作为树节点添加到这棵树中，而它与 x 没有关系

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:37:15.657

您可以在一个`TreeViewer`. 你可以通过

*   使用`ArrayContentProvider`作为树的内容提供者
*   将树的根对象作为数组或`List`

# java - 如何将 CSV 文件拆分为多个块并在 Java 代码中并行读取这些块

> ID：11098873
> 
> 赞同：10
> 
> 时间：2012-06-19T10:13:26.273
> 
> 标签：java, csv

我有一个非常大的 CSV 文件（1GB+），它有 100,000 行。

我需要编写一个 Java 程序来解析 CSV 文件中的每一行，以创建一个用于发送 HTTP 请求的正文。

换句话说，我需要发送 100,000 个与 CSV 文件中的行相对应的 HTTP 请求。如果我在一个线程中执行这些操作会很长。

我想创建 1,000 个线程来做 i) 从 CSV 文件中读取一行，ii) 创建一个 HTTP 请求，其正文包含读取行的内容，以及 iii) 发送 HTTP 请求并接收响应。

这样，我需要将 CSV 文件拆分为 1,000 个块，并且这些块之间应该没有重叠的行。

这种拆分程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T10:20:42.613

同时在多个位置读取单个文件不会让你走得更快（但它可能会大大减慢你的速度）。

不是从多个线程读取文件，而是从单个线程读取文件，并并行*处理*这些行。单个线程应该逐行读取您的 CSV，并将每一行放入队列中。然后，多个工作线程应该从队列中取出下一行，对其进行解析，转换为请求，并根据需要并发处理请求。然后将由单个线程完成工作的拆分，确保没有丢失的行或重叠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T10:18:48.067

您可以有一个线程来读取 CSV 的行并构建读取的行列表。当这达到某个限制时，例如 100 行将其传递到固定大小的线程池以作为请求发送。

我怀疑除非您的服务器有 1000 个内核，否则您可能会发现使用 10-100 个并发请求会更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:30:13.773

通过构造您的对象并将其传递给该行，将这一行委托给 池中的`CSV`一个可用行，然后将其传递给该行，该行将在单线程中读取文件，该对象将异步执行。`Thread``Runnable Task``Executors's` `submit()`

```
 public static void main(String[] args) throws IOException {

      String fName = "C:\\Amit\\abc.csv";
      String thisLine;
      FileInputStream fis = new FileInputStream(fName);
      DataInputStream myInput = new DataInputStream(fis);
      ExecutorService pool=Executors.newFixedThreadPool(1000);
      int count = 0;  // Concurrent request to Server barrier

      while ((thisLine = myInput.readLine()) != null) {
          if (count > 150) {
              try {
                  Thread.sleep(100);
                  count = 0;
              } catch (InterruptedException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
              }
          }

          pool.submit(new MyTask(thisLine));
          count++;
      }

    }
} 
```

你的任务在这里：

```
class MyTask implements Runnable {
      private String lLine;
      public MyTask(String line) {
           this.lLine=line;

      }

      public void run() {
          // 1) Create Request  lLine
          // 2) send the HTTP request out and receive response
      }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-02T00:37:43.233

如果您希望在同一操作中解压缩和解析，请查看[https://github.com/skjolber/unzip-csv](https://github.com/skjolber/unzip-csv)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T10:19:33.943

让一个线程逐行读取文件，并且对于读取的每一行，将任务发布到一个`ExecutorService`以执行每个任务的 HTTP 请求。

从多个线程读取文件是行不通的，因为要读取第`n`th 行，您必须先读取所有其他行。（如果您的文件包含固定宽度的记录，理论上它可以工作，但 CSV 不是固定宽度格式。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-08T12:14:17.290

计划于本月发布的 Java 8 将通过并行流和 lambda 改进对此的支持。Oracle 关于并行流的[教程](http://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html)可能是一个很好的起点。

请注意，这里的一个陷阱是过多的并行性。对于检索 URL 的示例，并行调用数量较少可能是个好主意。过多的并行性不仅会影响带宽和您要连接的网站，而且还会面临文件描述符不足的风险，在大多数运行 java 的环境中，文件描述符是严格受限的资源。

一些可能对您有所帮助的框架是 Netflix 的[RxJava](https://github.com/Netflix/RxJava)和[Akka](http://akka.io/)。请注意，这些框架并非微不足道，需要一些努力才能学习。

# java - 实时物体检测（筛选）？

> ID：11098874
> 
> 赞同：0
> 
> 时间：2012-06-19T10:13:29.003
> 
> 标签：java, c++, image-processing, opencv

我正在研究这个领域以实时获得对象检测。

视频示例：

*   [http://www.youtube.com/watch?v=Bm5qUG-06V8](http://www.youtube.com/watch?v=Bm5qUG-06V8)
*   [http://www.youtube.com/watch?v=aYd2kAN0Y20](http://www.youtube.com/watch?v=aYd2kAN0Y20)

但是他们怎么能如此快地提取筛选关键点并匹配它们呢？
SIFT 提取通常需要一秒钟

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T22:28:26.723

我是一名 OpenIMAJ 开发人员，负责制作第一个视频。

我们并没有做任何特别花哨的事情来使该视频中的匹配速度更快，并且对每一帧的整体进行 SIFT 检测和提取。事实上，视频在我们进行任何优化之前就已经制作好了；该演示的当前版本更加流畅。我们也有一个带有混合 KLT-tracker 的版本，由于不必在每一帧上执行 SIFT，它的工作速度更快。

正如@Mario 所建议的那样，图像大小确实对提取速度有很大影响，因此处理较小的帧可以带来很大的好处。其次，在Lowe在SIFT论文中提出的高斯兴趣点定位的差异的原始描述中，建议首先将输入图像的尺寸增加一倍以增加特征数量。通过不执行这种双倍调整，您还可以获得性能大幅提升，但要匹配的功能更少。

该代码是开源的（BSD 许可证），您可以通过[http://www.openimaj.org](http://www.openimaj.org)上的链接获得它。如视频描述中所述，图像处理代码是纯 Java；唯一的本机代码是网络摄像头的精简接口。[当前教程 pdf 文档](http://openimaj.org/tutorial.pdf)中的教程编号 7介绍了在 OpenIMAJ 中使用 SIFT 的过程。禁用双重大小可以通过执行以下操作来实现：

```
DoGSIFTEngine engine = new DoGSIFTEngine();
engine.getOptions().setDoubleInitialImage(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:42:21.023

SIFT 可以通过多种方式加速：

*   如果你能负担得起近似值，那么你可以推导出一个名为 SURF 的关键点，它的速度更快（对大多数任务使用积分图像）

*   您可以在 CPU 级别（例如 OpenCV 使用 Intel 的 TBB）或 GPU 级别（google for sift gpu 获取相关代码和文档）使用并行实现。

无论如何，这些在 Java 中都不可用（AFAIK），因此您必须使用 Java 包装器来 opencv 或自己解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:42:47.993

一般和第一个想法：询问视频上传者。我们可以假设完成了什么或如何完成。了解您迄今为止所做的工作也可能会有所帮助（例如，您的视频分辨率、处理能力、图像准备等）。

我没有专门使用过 SIFT，但在过去的几年里我做了很多对象/运动跟踪，所以这更笼统。你可能已经尝试了一些点，我不知道。

*   降低图像分辨率：从 640x480 到 320x240 会将数据减少到 25%。降低到 160x120 将再减少 25%（因此剩下 6.25% 的数据），而不会显着影响您的算法。
*   以类似的方式，降低图像的颜色深度可能很有用（不仅仅是 256 灰度，甚至可能更多；比如 64 色）。
*   尝试其他方法使特征更明显或更快地找到，例如尝试在图像上运行边缘检测器。
*   至少第二个视频提到了一个跟踪系统，所以你可以尝试猜测被跟踪对象应该在下一帧重新出现的区域（使用一些简单的 a/b 过滤器或任何坐标和可能的旋转），然后在那个子上使用 SIFT区域（有一些额外的边距）。如果您无法再次找到它，请仅分析整个图像。在第二个视频中大约 40 或 50 秒时，他们正在丢失对象并且需要相当长的时间/尝试再次找到它。

# asp.net - asp.net 2.0 生命周期事件和 asp.net 3.5 生命周期事件的区别

> ID：11098875
> 
> 赞同：0
> 
> 时间：2012-06-19T10:13:33.813
> 
> 标签：asp.net

请任何人都可以将我指向链接，这些链接将为我提供从 asp.net 2.0 到 asp.net 3.5 的生命周期事件中添加或删除的内容的详细信息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:19:26.517

ASP.NET 3.5 仍然使用 ASP.NET 2.0 DLL，所以没有任何改变。直到 ASP.NET 4.0 他们才更新 System.Web DLL，但 4.0 也没有任何变化。

# java - 我的 utf8 应用程序在 Eclipse 中运行良好，但在终端中却没有

> ID：11098879
> 
> 赞同：0
> 
> 时间：2012-06-19T10:13:39.960
> 
> 标签：java, macos, utf-8

我有一个用`Java`. 当我在 中测试它时`Eclipse`，它工作得很好。每个字符都是完美的，但是当我编译和导出 jar 并使用 OS X 终端对其进行测试时，奇怪的字符*（我是西班牙人）*是错误的。他们是一个“？”。

我想我`UTF-8`到处都在使用，所以我不知道该怎么办。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T10:17:37.007

最有可能的是，您*没有*在任何地方使用 UTF-8，而是有一些默认为平台编码的代码（这反过来可以由环境变量设置，并且在 Eclipse 之间可能不同，它被设置为匹配工作空间文件编码和你的外壳）。

确保在代码中的所有字符转换（例如打开阅读器）中明确将“UTF-8”作为字符集。

例如，不要使用

```
Reader r = new FileReader("a.txt"); 
```

利用

```
Reader r = new InputStreamReader(new FileInputStream("a.txt"), "UTF-8"); 
```

如果这不可能，短期的解决方案是设置适当的环境变量或系统属性（我认为`-Dfile.encoding=UTF-8`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:16:46.227

`locale`使用终端上的命令检查您的语言环境。打印的字符串应包含`.UTF-8`或`.utf8`类似的后缀。如果他们不这样做，则您使用的是非 UTF-8 语言环境，并且您的应用程序的输出无法正确显示。我不确定哪些语言环境可用，但您可以`export LC_ALL=es_ES.UTF-8`在运行应用程序之前尝试运行，并检查是否有帮助。

# cassandra - 在 Pig 中生成 Cassandra 友好关系

> ID：11098881
> 
> 赞同：1
> 
> 时间：2012-06-19T10:13:49.090
> 
> 标签：cassandra, apache-pig

使用[Datastax](http://www.datastax.com/docs/datastax_enterprise2.0/analytics/about_pig)中的 Pig 示例，您可以通过以下方式从 Cassandra 加载数据

```
cassandra_data = LOAD 'cassandra://PigDemo/Scores' USING CassandraStorage()
   AS (name, columns: bag {T: tuple(score, value)}); 
```

接下来，您可以例如通过以下方式计算聚合

```
total_scores = FOREACH cassandra_data GENERATE name, COUNT(columns.score) as counts,
   LongSum(columns.score) as total; 
```

阅读 Pig 参考[手册](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html)后，我不清楚如何重写/扩展上述代码以生成可以存储回 Cassandra 的关系。它应该具有格式

```
(<row_key>,{(<column_name1>,<value1>),(<column_name2>,<value2>)}) 
```

在我们的例子中

```
(name,{('counts',counts),('total',total)}) 
```

我没有成功尝试使用*AS*并指定一个[schema](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#Schemas)，我尝试通过使用额外的*GROUP*语句来做到这一点：

```
grouped  = GROUP total_scores by name;
cass_in = FOREACH grouped GENERATE group, total_scores.(co,total); 
```

但是，我觉得必须有一种我想念的直截了当的方式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:49:11.560

使用 TOBAG() 和 TOTUPLE() UDF（从 0.8 开始）

```
FOREACH grouped GENERATE group, TOBAG(TOTUPLE('counts', total_scores.counts), TOTUPLE('total', total_scores.total)); 
```

# php - 我们什么时候应该警惕 PHP 中的反引号？

> ID：11098884
> 
> 赞同：2
> 
> 时间：2012-06-19T10:14:03.200
> 
> 标签：php

[精美的手册是](http://php.net/manual/en/language.operators.execution.php)这样说的：

> 与其他一些语言不同，反引号不能在双引号字符串中使用。

但是，经验测试没有发现任何问题：

```
$ cat test.php 
#!/usr/bin/php -q
<?php
echo "O`reilly\n";
echo `ls`;
echo "\n";
?>

$ ./test.php 
O`reilly
test.php

$ php --version
PHP 5.3.6-13ubuntu3.7 with Suhosin-Patch (cli) (built: May  4 2012 00:50:06) 
Copyright (c) 1997-2011 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies
    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans 
```

显然，由于反引号`ls`在行中工作，安全模式已关闭，我看到 php.ini 中禁用了圣人模式。在其他具有安全模式的服务器上，我在 SQL 查询中使用了反引号，我不记得曾经遇到过问题。那么为什么手册有关于双引号字符串中的反引号的警告呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:26:12.040

您正在阅读的部分称为“执行运算符”。因此，短语“与其他一些语言不同，不能在双引号字符串中使用反引号”意味着：

您不能在双引号字符串中使用反引号作为执行运算符。

即回显“`ls`”；输出`ls`，而不是结果`ls`

# youtube - 有没有办法自动将 YouTube 视频观看次数列表拉入 Google Doc 电子表格？

> ID：11098886
> 
> 赞同：2
> 
> 时间：2012-06-19T10:14:05.410
> 
> 标签：youtube, google-sheets

我想为我的一些教学视频创建一个简单的视频仪表板，看看有什么趋势等。

有没有办法从您的频道中直接（最好以编程方式）将视频计数提取到 Google 电子表格中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-24T07:59:01.777

从 Web 应用程序复制：

请试试：

```
=IMPORTXML("https://www.youtube.com/watch?v=j6RsJmelphk","//div[@class='watch-view-count']") 
```

它应该返回大约 97,000 次（Colin Farrell - Road to Hell 视频的观看次数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:22:23.800

我猜您可以尝试使用[Google App Script](https://developers.google.com/apps-script/)。我确信 Youtube 有一个 HTTP REST API，您可以查询该 API 以将必要的信息提取到 Google Doc 中。

这里涉及一些编码，但它只是一个可行的想法。

更新：[Google Apps 脚本教程](https://developers.google.com/apps-script/guide_writing_scripts)

希望这会有所帮助，干杯！

# shell - 如何编写一个 shell 脚本，在其中将日期、月份和年份添加到当前日期

> ID：11098889
> 
> 赞同：6
> 
> 时间：2012-06-19T10:14:11.747
> 
> 标签：shell, unix-timestamp

我是 shell 脚本的新手。

我想编写一个脚本，在其中将天数月和年添加到当前日期。例如，它需要当前日期，每次添加 3 到天 4 到月和 2 到年。作为参数给出的所有三件事。

我真的很感激。

溴

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T15:21:07.387

提示：启动一个终端（在我的例子中是 bash 终端）

帮助是一个很好的起点

```
date --help 
```

或手册页

```
man date 
```

很多信息和例子。

bash 中的日期操作（复制粘贴在终端中运行的示例）：

在当前日期上加 10 天：

```
date -d "10 day" +"%Y %m %d" 
```

或从当前日期删除 10 天

```
date -d "-10 day" +"%Y %m %d" 
```

在当前日期上添加 2 个月：

```
date -d "2 month" +"%Y %m %d" 
```

从当前日期删除 2 个月：

```
date -d "-2 month" +"%Y %m %d" 
```

将当前日期加 1 年

```
date -d "1 year" +"%Y %m %d" 
```

删除到当前日期的 1 年

```
date -d "-1 year" +"%Y %m %d" 
```

混合添加 1 年的月份和日期

```
date -d "1 year 1 month 1 day" +"%Y %m %d" 
```

在脚本中（在我的例子中是 bash）

```
foobaa=`date -d "1 year 1 month 1 day" +"%Y %m %d"`
echo $foobaa 
```

我希望它有点帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T20:09:05.673

Mac OSX 上的等价物是 date -v "+60M" 添加 60 分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T20:19:43.260

**简单的命令就是**
date -d "+3 days +4 Month +2 Years"

**同样，你也可以减去日期。**
date -d "-3 天 -4 月 -2 年"

# sql-server-2008 - 用于识别引用表的所有 FK 的 SQL 脚本

> ID：11098891
> 
> 赞同：1
> 
> 时间：2012-06-19T10:14:20.267
> 
> 标签：sql-server-2008, information-schema

> **可能重复：**
> [如何列出引用 SQL Server 2005 中给定表的所有外键？](https://stackoverflow.com/questions/483193/how-can-i-list-all-foreign-keys-referencing-a-given-table-in-sql-server-2005)

我正在尝试使用 Information_Schema 来查找引用特定表的所有 FK。但是，我只能在 Constraint_Column_Usage 和 Constraint_Table_Usage 表中找到该表持有的其他 FK。

我正在使用 SQL Server 2008

我怎样才能做到这一点？

# php - 附上两个sqlite文件

> ID：11098892
> 
> 赞同：1
> 
> 时间：2012-06-19T10:14:21.123
> 
> 标签：php, sqlite, join, attachment

我有个问题。我有两个 sqlite 文件，我需要（使用 PHP）在这两个数据库上进行连接。所以首先我想把它们连接在一起，但我不知道该怎么做。

这是我的小脚本：

```
class PA_SQLModel extends SQLite3
{
    function __construct($name)
    {
        $this->open($name);
    }
}

$firstDB = new PA_SQLModel('firstDB.sqlite');
$secondDB = new PA_SQLModel('secondDB.sqlite'); 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:00:31.980

是的，这很漂亮，您可以从一个 php 脚本访问两个 sqlite 数据库，但我相信您不能进行 JOIN 查询，因为它有 2 个不同的数据库、两种不同的资源，并且每次您必须查询数据库时都必须使用 1 个资源。所以我认为PHP中唯一可以处理结果的选项，比如说resource#1中query1和resource#2中query2的数组，您可以合并/切片/推送/弹出并通常操作数组以获得所需的结果。

另一种选择是将所有表从 X 数据库复制到 Y 并使用 fDB_users、sDB_users 之类的前缀，这将解决名称冲突，并为您提供运行复杂查询而不是在 php 中操作查询结果的选项。

# ios - 如何使用 ios 编程将图像上传到 Facebook 封面照片？

> ID：11098893
> 
> 赞同：2
> 
> 时间：2012-06-19T10:14:22.593
> 
> 标签：ios

在这里，我使用 fbGraph 库来连接 facebook 并上传照片。它已成功完成。

```
 [facebook requestWithGraphPath:@"me/photos"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self]; 
```

但是，如果我尝试将图像上传到 Facebook 封面，则根本不会上传。

```
[facebook requestWithGraphPath:@"me/cover"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self]; 
```

所以任何人都可以告诉我解决方案。或其他适当的方式。

# javascript - three.js：无法使用 THREE.OBJLoader 显示 obj 文件

> ID：11098895
> 
> 赞同：3
> 
> 时间：2012-06-19T10:14:30.877
> 
> 标签：javascript, webgl, three.js

我在使用示例代码加载 obj 文件时遇到问题。加载示例文件 male02.obj 时我没有问题，但是当我插入文件时，对象不显示。我在使用 Python 转换器脚本和 JSONLoader 时遇到了同样的问题。

这是 OBJLoader 的所有代码

```
<!doctype html>
<html lang="en">
    <head>
        <title>three.js webgl - loaders - OBJ loader</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #000;
                color: #fff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
        </style>
    </head>

    <body>
        <div id="info">
        <a href="http://github.com/mrdoob/three.js" target="_blank">three.js</a> - OBJLoader test
        </div>

        <script src="javascripts/Three.js"></script>
        <script src="javascripts/OBJLoader.js"></script>

        <script src="javascripts/Detector.js"></script>
        <script src="javascripts/Stats.js"></script>

        <script>

            var container, stats;

            var camera, scene, renderer;

            var mouseX = 0, mouseY = 0;

            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;

            init();
            animate();

            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.z = 100;
                scene.add( camera );

                var ambient = new THREE.AmbientLight( 0x101030 );
                scene.add( ambient );

                var directionalLight = new THREE.DirectionalLight( 0xffeedd );
                directionalLight.position.set( 0, 0, 1 ).normalize();
                scene.add( directionalLight );

                var loader = new THREE.OBJLoader();
        //loader.load( "img/male02.obj", function ( object ) {
        loader.load( "img/originalMeanModel.obj", function ( object ) {
                    object.position.y = - 80;
                    scene.add( object );
                } );

                // RENDERER
                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                container.appendChild( renderer.domElement );

                document.addEventListener( 'mousemove', onDocumentMouseMove, false );

            }

            function onDocumentMouseMove( event ) {

                mouseX = ( event.clientX - windowHalfX ) / 2;
                mouseY = ( event.clientY - windowHalfY ) / 2;

            }

            //

            function animate() {

                requestAnimationFrame( animate );
                render();

            }

            function render() {

                camera.position.x += ( mouseX - camera.position.x ) * .05;
                camera.position.y += ( - mouseY - camera.position.y ) * .05;

                camera.lookAt( scene.position );

                renderer.render( scene, camera );

            }

        </script>

    </body>
</html> 
```

我正在使用最新版本的 three.js (49)。

这是我尝试加载的 obj 文件的链接[https://dl.dropbox.com/u/23384412/originalMeanModel.obj](https://dl.dropbox.com/u/23384412/originalMeanModel.obj)

当我尝试使用 JSONLoader 时，我注意到导出的 JSON 文件没有任何法线、颜色或 uvs。在 Blender 或 MeshLab 中查看文件时这不会影响，但对 three.js 有影响吗？

如果有人可以帮助我，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:31:18.997

必须根据模型的位置和尺寸设置对象和相机位置。

“评论”所有这些行：

```
camera.position.z = 100;
...
object.position.y = - 80;
...
document.addEventListener( 'mousemove', onDocumentMouseMove, false ); 
```

并开始使用代码，更改相机位置：

```
camera.position.z = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T18:45:41.970

我有一个简单的解决方案。1\. 将three.js 安装程序包附带的male02.obj 导入blender，或daz3d，或您使用的任何3d 程序（不过我只用Daz3d 尝试过）。2\. 为您的 html 导入您想要替换的任何 .obj。重新缩放该 obj，使其与 male02.obj 的高度大致相同。3\. 从场景中删除maleo2.obj，保留你想要的新的。将此文件导出为 obj。4\. 将其添加到您的代码中。

这应该可行，我尝试将 objs 添加到该源几天，并且我已经成功使用这种方法。

# html - 将 div 对齐到主 div 的精确中心

> ID：11098896
> 
> 赞同：1
> 
> 时间：2012-06-19T10:14:42.077
> 
> 标签：html, css, alignment

如何让中心 div 完全以父 div 为中心。这是我的示例[http://jsfiddle.net/sVPDS/11/](http://jsfiddle.net/sVPDS/11/)

中间图像应该水平居中到主 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:18:34.680

只需`float: left`从中删除样式`.carousl_img`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:30:39.557

只需用js来做，就完美了。您需要做的就是包括这个

```
<script type="text/javascript" src="[DIR_PATH]/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        var PW = $('div.product_detail').width();
        var LM = (PW/2).toFixed(2);
        $("div.carousel").css('margin-left', LM+"px");      
    });
</script> 
```

如果解决了，请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:18:10.917

你需要一个合适的宽度说：宽度：100％；在“carousl_img”类上。

编辑：

您还需要在“carousl”上设置适当的宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T10:40:13.533

你会尝试`css`在课堂上应用这个而不是你以前的风格`carousl`-

```
.carousl{
  display: table;
  margin: auto;
  background: none;
  text-align: center;
  position: relative;
} 
```

您的上一个和下一个按钮将需要一些额外的填充或边距，希望您能照顾好它们。谢谢

# accelerometer - 加速度计在恒定加速度和静止状态下

> ID：11098899
> 
> 赞同：0
> 
> 时间：2012-06-19T10:14:58.857
> 
> 标签：accelerometer, acceleration

我正在做一个项目，我正在使用加速度计来执行位置跟踪任务。

如果物体处于恒定加速度或静止状态，我如何区分状态？

在这两种情况下，它都会返回 ag，据我所知，在这种情况下，我将不得不监视非常小的变化，比如对象何时静止，这对我来说很难。如果这些情况中的任何一个被误解，那么位置信息当然是错误的。

我只是使用加速度计，没有别的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:18:18.643

我认为您必须阅读有关[惯性导航系统的信息。](http://en.wikipedia.org/wiki/Inertial_navigation_system)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:06:58.113

您没看错，您无法区分这些情况。仅供参考：您也无法区分静态情况和围绕垂直轴的恒定旋转。

为了更进一步，您必须从测量的加速度中减去重力，因此无论如何您都需要陀螺仪。

即使你这样做了，计算位置也不起作用，[当前的传感器也不够精确，](https://stackoverflow.com/a/7835988/341970)无法跟踪位置。

# php - PHP preg_match 国家又名字母和空格

> ID：11098900
> 
> 赞同：0
> 
> 时间：2012-06-19T10:15:03.557
> 
> 标签：php, preg-match

我正在寻找一种方便的方法来检查 PHP 中 preg_match 中的字母和空格。

所以你只能添加“荷兰”或“丹麦”

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:18:20.870

```
preg_match('/^[a-zA-Z\s]+$/', $string); 
```

`^`和`$`分别表示字符串的开头和结尾，`a-z`是小写字母，`A-Z`是大写字母，`\s`是空格，`+`表示 1 次或多次。

# android - 像动画一样翻转

> ID：11098901
> 
> 赞同：0
> 
> 时间：2012-06-19T10:15:03.670
> 
> 标签：android, android-layout, android-animation, flip

> **可能的重复：**
> [活动变化的翻转动画](https://stackoverflow.com/questions/5473467/flip-animation-for-activity-change)

我是*Android Animation*的新手。

当从一个活动过渡到另一个活动时，我想实现类似动画的翻转。
**请注意**，我不是在谈论翻页动画，而是活动应该从背面从右转向左。

这个问题我可能不太清楚，请提供您的建议。

我通过使用实现了`fade-in`，但不知道是否可以以相同的方式完成翻转。`fade-out``overridePendingTransition(R.anim.fade_in, R.anim.fade_out);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:19:36.847

看看这个，[android-startactivity-rotate-3d-animation-activityswitcher](http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-animation-activityswitcher/)

这个例子利用了动画输入和动画输出，这样看起来就像在活动之间发生的 3d 翻转。在第一个活动的 onResume 中，您将能够在活动二中看到“动画输出”和“动画输入”。

# scala - 具有默认类型参数的类型参数化类

> ID：11098909
> 
> 赞同：1
> 
> 时间：2012-06-19T10:15:45.270
> 
> 标签：scala

例如，我有以下类层次结构：

```
abstract class A {
  def a() {}
  def aa()
}

class B extends A {
  def aa() {}
  def b()
}

class C extends A {
  def aa() {}
  def c()
} 
```

然后我想创建一个类，它可以存储这些类实例的任意组合的集合。它将能够调用常用方法。并且由于类型参数化，如果在创建期间使用这些类进行参数化，它必须提供调用特定于类的方法的能力：

```
object Group {

  def apply(as: Buffer[A]) = new Group[A](as)
  def apply[T <: A](as: Buffer[T]) = new Group[T](as)
}

class Group[T <: A](as: Buffer[T]) {

  def a() { as.map(_.a()) }
  def aa() { as.map(_.aa()) }

} 
```

因此`Group`可以使用默认的、最通用的类​​型参数创建，如下所示：

```
val groupA = Group(Buffer[A]())
groupA.a()  //ok
groupA.aa() //ok
groupA.b()  //error
groupA.c()  //error 
```

并且可以在使用 的后代之一显式参数化时创建`A`：

```
val groupB = Group[B](Buffer[B]())
groupB.a()  //ok
groupB.aa() //ok
groupB.b()  //ok
groupB.c()  //error 
```

如果可能的话，我想以某种方式删除`[B]`创建组时不必要的类型规范，因为它可以从传递的缓冲区类型中提取：

```
val groupB = Group(Buffer[B]()) 
```

实现此功能的正确方法是什么？是否可以？也许有更好的架构决策来实现这一点？

**更新：**这里的代码是伪代码，我只是不知道如何写我想要的。

**更新2：**我猜想调用特定于类型的方法，`b()`或者`c()`应该通过映射来实现：

```
groupC.as.map(_.c()) 
```

这*只有*在类型参数化正确的情况下才有可能。这更接近我的想法，但实现的确切可能方式仍然是一个谜（除了一堆`asInstanceOf`事物的用法）..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:09:11.133

您可以使用隐式转换来看似仅向那些`Group`使用正确类型参数化的实例添加方法。这可以被认为是[pimp my library](https://www.google.com/search?q=scala+pimp+my+library)模式的选择性版本。

```
scala> abstract class A { def a() {}; def aa() {} }
defined class A

scala> class B extends A {def b() {}}
defined class B

scala> class C extends A {def c() {}}
defined class C 
```

现在我定义`Group`类。请注意`Group[C]`添加`c()`方法的隐式转换。此转换不适用于例如`Group[A]`值。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Group[T <: A](as: Seq[T])
object Group{implicit def forC(gc: Group[C]) = new {def c() {gc.as.map(_.c())}}}

// Exiting paste mode, now interpreting.

defined class Group
defined module Group 
```

现在让我们看看它是否有效。

```
scala> val groupC = Group(new C :: new C :: Nil)
groupC: Group[C] = Group(List(C@7f144c75, C@da7d681))

scala> groupC.c()  //works

scala> val groupB = Group(new B :: new B :: Nil)
groupB: Group[B] = Group(List(B@e036122, B@7fde065d))

scala> groupB.c()  //fails as expected
<console>:16: error: value c is not a member of Group[B]
              groupB.c()
                     ^ 
```

# shell - 使用终端更改文件夹中的文件名

> ID：11098917
> 
> 赞同：1
> 
> 时间：2012-06-19T10:16:11.777
> 
> 标签：shell, unix

在我的应用程序的配置文件夹中，我希望将所有`*.yml.sample`文件转换为`*.yml`. 有人可以帮忙吗？我希望使用终端来完成。是否有一个命令可以执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T10:18:16.843

使用一个简单的 shell 循环和`basename`命令来剥离第二个扩展。

```
for f in *.yml.sample; do
    mv $f `basename $f .sample`
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:18:15.060

这很简单`mmv`。

```
$ mmv "*.yaml.sample" "#1.yaml" 
```

引号在这里很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:25:33.470

一种方法，使用`sed`：

```
ls -1 *.yml.sample | sed "s%\(.*\).yml.sample%mv & \1.yml%" | sh 
```

或更简单地说：

```
ls -1 *.yml.sample | sed "s%\(.*\).sample%mv & \1%" | sh 
```

**编辑：**

`ls`很方便，但解析它可能会因空格、换行符等而失败。在这种情况下，最好使用循环和 bash 字符串替换：

```
for i in *.yml.sample; do mv "$i" "${i%.sample}"; done 
```

给你一些阅读：

[用 Linux 重命名多个文件](http://www.go2linux.org/rename-bulk-files-with-linux-console-command)
[为什么你不应该解析 ls 的输出](http://mywiki.wooledge.org/ParsingLs)

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T09:18:48.393

```
find . -iname "*.png" -exec bash -c 'mv "$0" "${0%\.png}@2x.png"' {} \; 
```

I have used this to rename all files in current folder from ".png" to "@2x.png". This is too useful for giving name to retina images. Widely used for ios developers.

# sharepoint-2010 - SharePoint Search TrimDuplicates=true 删除唯一内容，这是一个已知错误吗？

> ID：11098918
> 
> 赞同：2
> 
> 时间：2012-06-19T10:16:11.733
> 
> 标签：sharepoint-2010, sharepoint-search

我正在运行一个`TrimDuplicates`设置为的 FullTextSqlQuery，`true`并且一直在搜索为什么某些项目不在结果中的原因。我今天才发现，结果是我设置的时候出现的`TrimDuplicates=false`。

这是一个已知的 SharePoint 搜索错误吗？

我的代码很简单：

```
using (var fullTextSqlQuery = new FullTextSqlQuery(_searchServiceApplicationProxy))
{
    fullTextSqlQuery.QueryText = querytext;
    fullTextSqlQuery.ResultsProvider = SearchProvider.Default;
    fullTextSqlQuery.TrimDuplicates = true;
    fullTextSqlQuery.EnableStemming = true;
    fullTextSqlQuery.EnableNicknames = true;
    fullTextSqlQuery.IgnoreAllNoiseQuery = true;
    fullTextSqlQuery.ResultTypes |= ResultType.RelevantResults;

    if (pageSize.HasValue && pageSize.Value > 0)
    {
        fullTextSqlQuery.RowLimit = pageSize.Value;
        fullTextSqlQuery.TotalRowsExactMinimum = pageSize.Value;

        if (selectedPage.HasValue && selectedPage.Value > 0)
            fullTextSqlQuery.StartRow = (selectedPage.Value - 1) * pageSize.Value;
    }

    searchResults = fullTextSqlQuery.Execute();
} 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:54:27.087

在以下位置找到了部分答案：[https ://sharepoint.stackexchange.com/questions/14460/sharepoint-2010-search-when-is-a-document-a-duplicate](https://sharepoint.stackexchange.com/questions/14460/sharepoint-2010-search-when-is-a-document-a-duplicate)

如果数据在一定程度上相似（不一定是 100%），似乎 TrimDuplicates 会删除搜索结果。虽然不知道实际的百分比。

简而言之，Trim Duplicates 中没有错误，只是对该功能的行为方式了解不多。

现在我的问题是弄清楚它正在比较哪些数据。因为看起来即使我使我的自定义列中的数据唯一，进行索引重置和另一个完全爬网，我正在寻找的页面仍然被修剪掉。

# c# - 防止线程两次拥有互斥锁

> ID：11098920
> 
> 赞同：0
> 
> 时间：2012-06-19T10:16:15.230
> 
> 标签：c#, mutex

我有一个有两个功能的类 -`OpenFile`和`CloseFile`. 他们分别获得 a`mutex`并适当地释放它。这样我可以在进程和不同线程之间同步文件访问。但是，有一种情况，线程`OpenFile`在关闭之前会第二次。我想阻止一个线程多次打开文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:37:26.560

您可以使用`Thread.SetData`and`Thread.GetData`存储某个标志的值，该标志确定文件是否被当前线程打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:32:01.883

由于您没有代码示例，因此很难确切地看到您在做什么。

看来您的锁定模式是错误的。您需要控制打开和关闭文件的流程。

实现此目的的一种方法是将文件访问修改为单例类型的模式。在单例中，您在打开文件时获得锁。执行您的写入，关闭文件并解锁。所有访问都通过这个地方完成，因此应该有助于协调您的文件访问。

这是多线程单例的基本框架，结合了 ReadWriterLock，如前所述。

```
using System;

public sealed class Singleton
{
    private static volatile Singleton instance;
    private static object syncRoot = new Object();
    private static ReaderWriterLockSlim cacheLock = new ReaderWriterLockSlim();

    private Singleton() {}

    public static Singleton Instance
    {
      get 
      {
         if (instance == null) 
         {
            lock (syncRoot) 
            {
               if (instance == null) 
                  instance = new Singleton();
            }
         }

         return instance;
      }
    }

    public void WriteToFile(string value)
    {
        cacheLock.EnterWriteLock();
        try
        {
            // perform your file write here
        }
        finally
        {
            cacheLock.ExitWriteLock();
        }
    }

} 
```

看看这里的注释和示例，这应该会有所帮助：

[http://msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

[http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)

# javascript - 保存大量数字的 JavaScript 变量

> ID：11098922
> 
> 赞同：2
> 
> 时间：2012-06-19T10:16:16.913
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中处理大数字](https://stackoverflow.com/questions/4288821/how-to-deal-with-big-numbers-in-javascript)

Javascript 不保存大于 17 位的数字。有没有其他方法可以将更大的数字放入变量中？除了将其解析为字符串？

例子：

```
var x = 12647586984746263548565656;
alert(x); 
```

试试这个。它不会起作用，因为 x 是一个很大的数字。

# iphone - UIWebview 中的奇怪加载

> ID：11098924
> 
> 赞同：0
> 
> 时间：2012-06-19T10:16:21.097
> 
> 标签：iphone, ios, uiwebview

我正在尝试在 UIWebview 中加载 URLRequest。

我试过几个网址。一切正常。但在一个 URL 中，它的行为很奇怪。当我导航到我的网络视图时，加载这个特定的 URL 花了很多时间。

```
[self.mediaWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[@"http://www.whatmakesahighperformanceorganization.com" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]]]]; 
```

它还多次通知我正在加载和完成加载。

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
    NSLog(@"webViewDidStartLoad...");
    [self.loadingActivityView setHidden:NO];
    [self.loadingActivityView startAnimating];
}
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"webViewDidFinishLoad...");
    [self.loadingActivityView stopAnimating];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
     NSLog(@"Error=%@",error);
} 
```

这是我在一次通话中收到的输出

```
2012-06-19 15:25:54.255 MyApp[1957:707] webViewDidStartLoad...
2012-06-19 15:25:55.842 MyApp[1957:707] webViewDidStartLoad...
2012-06-19 15:25:55.893 MyApp[1957:707] webViewDidStartLoad...
2012-06-19 15:25:56.675 MyApp[1957:707] webViewDidFinishLoad…
2012-06-19 15:27:03.148 MyApp[1957:707] webViewDidStartLoad...
2012-06-19 15:27:09.336 MyApp[1957:707] webViewDidFinishLoad…
2012-06-19 15:27:52.661 MyApp[1957:707] webViewDidFinishLoad...
2012-06-19 15:27:52.683 MyApp[1957:707] webViewDidFinishLoad… 
```

检查 4 号到 5 号之间的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:20:14.233

该 URL 可能包含许多 Flash 内容。表明这将需要很长时间。

这个 url 在浏览器中也需要一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:24:07.587

使用开发者工具的网络面板在 Chrome 中加载这个 URL，你可以看到它需要 124 个请求并传输 2.96Mb。难怪需要很长时间！

# android - Android BootReceiver 不起作用

> ID：11098926
> 
> 赞同：4
> 
> 时间：2012-06-19T10:16:39.907
> 
> 标签：android, broadcastreceiver

我正在尝试监听重启事件。

我创建了以下类：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class OnBootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i("MYBOOTRECEIVER", "HELLO!");
    }
} 
```

然后在清单文件中，我放入了以下 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mypackage"
    android:installLocation="internalOnly"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="8" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <application android:label="@string/app_name" >
        <receiver android:name=".OnBootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.QUICKBOOT_POWERON" />
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

但是，在我安装了这个应用程序并重新启动设备后，什么也没有发生。（我使用的是带有 android 3.2 的 Galaxy Tab 8.9）。正如您从清单中看到的那样，我已经在内部存储器上安装了应用程序（就像在 stackoverflow 上的类似问题上所建议的那样）......我还进行了 Quickboot_poweron 操作（查看 Galaxy 选项卡是否具有与 htc 设备类似的行为） ……但什么都没有。我希望有人能帮助我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T10:29:59.450

我早些时候在 3.0 后的设备上遇到了同样的问题。

原因是

> 从 3.1 开始，当安装应用程序时，它们处于“停止”状态，因此在用户明确启动它们之前它们将无法运行。按下强制停止将使它们返回此状态。
> 
> 一旦用户第一次运行应用程序（并且没有强制停止它），一切都会像以前一样 - 重新启动将导致接收到 BOOT_COMPLETED 广播等等。但是，如果用户安装了该应用程序，除非他们手动运行该应用程序，否则将不会收到任何广播。

因此，在您的情况下，您将必须创建启动器活动并确保您至少启动该启动器活动一次，然后您将开始接收启动事件广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:23:13.427

问题在于，对于 Honeycomb 及更高版本，广播信号不会自动启动尚未启动的应用程序。有一个标志可用于更改此设置，但是 BOOT_COMPLETED 广播不带有该标志。您需要安装在系统分区上才能克服这种细微差别。

如果您无法在系统分区上安装，则需要找到其他启动方式——通过说服用户手动启动您，或让用户安装您提供的小部件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:23:15.847

除了类别部分之外，清单中提到的操作是正确的，如果您只想接收启动完成，则可以排除。在 Receiver 文件中，这可以正常工作，但您应该始终使用 if-else 语句来区分收到的操作。

```
 if (action.equals(android.intent.action.BOOT_COMPLETED)) {
       Log.i("MYBOOTRECEIVER", "BOOT COMPLETED RECEIVED");
    } 
```

# mysql - 如何获得对 Amazon RDS 数据库的 phpmyadmin 访问权限

> ID：11098929
> 
> 赞同：11
> 
> 时间：2012-06-19T10:16:52.450
> 
> 标签：mysql, amazon-ec2, amazon-web-services, amazon

我是亚马逊网络服务的新手，我不知道如何操作这项服务。我最近使用 Amazon RDS 创建了一个 mysql 数据库，现在想访问 phpmyadmin 以将现有数据库导入 Amazon RDS，但是在花了很多时间之后，我找不到任何解决方案来解决这个问题。
谁能帮我找出解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-02T21:56:50.613

有一种方法可以在您的本地机器或服务器上配置 phpadmin 以直接连接到您的亚马逊数据库，但这需要您拥有亚马逊数据库的连接字符串。查看亚马逊数据库服务器的设置并获取 IP/URL、db_name、user_name 和密码。获取所有这些文件后，请按照以下步骤操作

1.  转到您的 phpadmin 文件夹，即（您的服务器可能需要 ftp）C:\wamp\apps\phpmyadmin4.1.14
2.  找到配置文件 config.inc.php
3.  复制它以创建备份
4.  在文本编辑器中打开它
5.  找到这段代码并复制它（整个块）

    ```
    $i++;
    /* Authentication type */
    $cfg['Servers'][$i]['verbose'] = 'mysql wampserver';
    //$cfg['Servers'][$i]['auth_type'] = 'cookie';
    $cfg['Servers'][$i]['auth_type'] = 'config';
    $cfg['Servers'][$i]['user'] = 'root';
    $cfg['Servers'][$i]['password'] = '';
    /* Server parameters */
    $cfg['Servers'][$i]['host'] = '127.0.0.1';
    $cfg['Servers'][$i]['connect_type'] = 'tcp';
    $cfg['Servers'][$i]['compress'] = false;
    /* Select mysql if your server does not have mysqli */
    $cfg['Servers'][$i]['extension'] = 'mysqli';
    $cfg['Servers'][$i]['AllowNoPassword'] = true; 
    ```

6.  更改下面的副本以匹配您的亚马逊网站，主机是数据库服务器的 ip/url，用户是用户名和密码...

7.  关闭配置文件并重新启动/重新启动 phpadmin ![落下](../Images/8cfef15feb032b758c3d5f53efc5dabe.png)
8.  在当前服务器下的下拉菜单中，您可以找到您添加的亚马逊服务器
9.  同样的技术可以将不同的数据库服务器添加到您的 phpadmin

# ruby-on-rails - Rails - 显示所有项目的分页宝石

> ID：11098931
> 
> 赞同：0
> 
> 时间：2012-06-19T10:17:05.773
> 
> 标签：ruby-on-rails, pagination, gem, has-many

我正在使用分页 gem 对客户订单进行分页。我不得不通过数据库使用关系显示订单：

```
<table class="order-items">
<th>Date</th>
<th>Order No.</th>
<th>View Order</th>
<% @customer.orders.each do |order| %>
    <tr>
        <td><%= order.created_at.strftime("%d %b. %Y") %></td>
        <td><%= order.id %></td>
        <td><%= link_to 'Show',  "../orders/#{order.id}" %></td>
    </tr>
<% end %>   
</table>

<p><%= will_paginate @orders %></p> 
```

我的控制器中的代码：

```
 @customer = Customer.find(params[:id])
  @order = @customer.orders
  @orders = @order.paginate page: params[:page], order: 'title',
  per_page: 5 
```

我为这个客户创建了 6 个订单来测试它。我遇到的问题是分页页面正确显示在底部（2 页），但所有 6 个订单仍显示在列表中，两个分页页面仍显示所有 6 个订单。

我已经设法让所有其他页面的分页工作正常，所以我假设这是因为我在那里有 order.line_items.each 构造 - 所以这就是它显示所有 6 个的原因。我不知道如何解决这个问题！任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:38:12.953

尝试这个

在控制器中：

```
 @customer = Customer.find(params[:id])
 @order_items = @customer.orders.paginate(:page => params[:page], :per_page => 5) 
```

鉴于：

```
<table class="order-items">
<th>Date</th>
<th>Order No.</th>
<th>View Order</th>

<%= will_paginate @order_items %>

<% @order_items.each do |order| %>
<tr>
    <td><%= order.created_at.strftime("%d %b. %Y") %></td>
    <td><%= order.id %></td>
    <td><%= link_to 'Show',  "../orders/#{order.id}" %></td>
</tr>
<% end %>   
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:27:49.730

您应该在每个语句之前添加以下行

```
 <%= will_paginate @orders %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:38:49.027

我建议您使用[Kaminari](https://github.com/amatsuda/kaminari)，它看起来是一种更清洁的做事和实施方式

在您的控制器中

```
@orders = Kaminari.paginate_array(Customer.find(params[:id]).orders).page(params[:page]) 
```

在您的模型中分配您想要的每页

```
paginates_per 10 
```

在你看来

```
<% @orders.each do |order| %>
<tr>
    <td><%= order.created_at.strftime("%d %b. %Y") %></td>
    <td><%= order.id %></td>
    <td><%= link_to 'Show',  "../orders/#{order.id}" %></td>
</tr>
<% end %>

<%= paginate @orders %> 
```

我希望它有帮助

# c# - 初始化后获取 UIElement 的大小

> ID：11098935
> 
> 赞同：-1
> 
> 时间：2012-06-19T10:17:11.510
> 
> 标签：c#, wpf, mvvm, binding, uielement

我正在尝试开发一个可以适应用户屏幕分辨率的程序。

我正在使用 mvvm 和 Meleak 的 pushbinding 来获取我的 MainWindow 的实际大小：

[在 ViewModel 中获取窗口属性](https://stackoverflow.com/questions/7653566/getting-window-properties-in-viewmodel)

为了定位我的对象，我使用`GridRow`and `GridColumn`。现在我正在尝试优化这个大小，因为我需要得到`ActualSize`我的另一个`UIElment`，但是就像它们的大小取决于它们的内容一样，我不知道如何获得它们的大小，我尝试使用绑定 onewaytosource 但是我获得了 0.0 的大小，显然不是初始化后的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:50:43.247

该事件`Loaded`可用于测量`ActualHeight`视觉对象的。

如果在下面的窗口中使用它，则内部内容应该全部呈现并可供您参考。

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    var temp = this.ActualHeight;
} 
```

在此示例中，我正在查找窗口`ActualHeight`，但您可以将其用于窗口中的任何对象。

如果您有嵌套的窗口/视图，则`Loaded`事件也可以在它们上使用。

# symfony1 - Symfony 1.4。如何将模板渲染成字符串

> ID：11098937
> 
> 赞同：2
> 
> 时间：2012-06-19T10:17:22.280
> 
> 标签：symfony1, symfony-1.4

我需要 symfony 1.4 操作，它将接收模板名称列表作为参数并将这些呈现的模板作为 JSON 散列返回。这是代码：

```
foreach ($templateNames as $templateName)
  $result[$templateName] = $this->getController()->getPresentationFor($this->getModuleName(), $this->getActionName(), $templateName); 
```

该代码导致“检测到此请求的转发次数过多”。要抛出的异常。我认为这是因为 getPresentationFor 创建了对相同模块和操作的内部请求。所以问题是我怎样才能实现我的目标并获得几个模板渲染和返回？

PS：我正在使用现有系统，所以我不能使用部分或组件，只能使用模板。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:22:36.427

试试这个：

```
$view = $this->getController()->getView($this->getModuleName(), $this->getActionName(), sfView::SUCCESS);
$view->execute();
$view->getAttributeHolder()->add($this->getVarHolder()->getAll());
$result[$templateName] = $view->render(); 
```

我个人扩展了 sfAction 以包含一个 getPresentation 方法：

```
<?php

abstract class kfAction extends sfAction {

    public function getPresentation($viewName = sfView::SUCCESS) {
        $view = $this->getController()->getView($this->getContext()->getModuleName(), $this->getContext()->getActionName(), $viewName);
        $view->execute();
        $view->getAttributeHolder()->add($this->getVarHolder()->getAll());
        return $view->render();
    }

} 
```

# c# - 使用 C# 将 REST 服务中的 XML 数据插入 DB

> ID：11098939
> 
> 赞同：1
> 
> 时间：2012-06-19T10:17:31.437
> 
> 标签：c#, xml, rest

谁能帮助我使用 C# 将 XML 数据（我从远程**REST 服务**获得）插入到我的 SQL Server 数据库中？

提前致谢。

代码

```
HttpWebRequest myHttpWebRequest = WebRequest.Create("http://api.asicentral.com/v1/news.xml") as HttpWebRequest;

HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

Encoding enc = System.Text.Encoding.GetEncoding(1252);
StreamReader loResponseStream = 
    new StreamReader(myHttpWebResponse.GetResponseStream(), enc);

string Response = loResponseStream.ReadToEnd();
myHttpWebResponse.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T06:52:34.090

```
 [WebMethod]
    public void XMLPersing()
    {
        var XMLDATA = "";

        WriteLogCLS objWriteLog = new WriteLogCLS();
        Stream receiveStream = HttpContext.Current.Request.InputStream;
        receiveStream.Position = 0;
        StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8);      //For xml persing..
        XMLDATA = readStream.ReadToEnd();
        readStream.Close();

      objWriteLog.WriteLog(Convert.ToString(XMLDATA));
        XmlTextReader xmlreader = new XmlTextReader(Server.MapPath("Log/Exception/Sample.xml"));
        DataSet ds = new DataSet();
        ds.ReadXml(xmlreader);
        xmlreader.Close();
        if (ds.Tables.Count != 0)
        {
            var strCon = string.Empty;
            strCon = ConfigurationManager.AppSettings["constring"];
            SqlCommand cmdInsertXMLData = new SqlCommand();
            SqlConnection SqlConn;
            SqlConn = new SqlConnection(strCon);
            try
            {
                cmdInsertXMLData = new SqlCommand("usp_InsertXML", SqlConn);
                cmdInsertXMLData.CommandType = CommandType.StoredProcedure;
                // cmdInsertLoginDetails.Parameters.Add("@XMLdata", SqlDbType.Xml).Value = ds.GetXml();
                cmdInsertXMLData.Parameters.AddWithValue("@XMLdata", SqlDbType.Xml);

                if (SqlConn.State == ConnectionState.Closed)
                {
                    SqlConn.Open();
                }
                cmdInsertXMLData.ExecuteNonQuery();
                // response = cmdInsertLoginDetails.Parameters["@Message"].Value.ToString();
            }
            catch (Exception ex)
            {
                objWriteLog.WriteLog("Error on XML Persing : " + ex.Message);
                // response = "Error";
            }
            finally
            {
                if (cmdInsertXMLData != null)
                {
                    cmdInsertXMLData.Dispose();
                }
                if (SqlConn.State == ConnectionState.Open)
                {
                    SqlConn.Close();
                    SqlConn.Dispose();
                }
                objWriteLog = null;
            }
            // return response  ;

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T10:39:20.227

开始学习 ADO.Net [http://www.csharp-station.com/Tutorial/AdoDotNet/lesson01](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson01)

或者试试这个实体框架代码优先方法[http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

好的，上面的内容有点生硬，那为什么要将Web服务响应存储到数据库中呢？

为了做任何有意义的事情，您可能需要解析 xml。您在这里有很多选择。一对突然想到的夫妇；将 xml 反序列化为强类型对象，或者使用 linq 创建匿名类型。最后，您可以使用 ADO.Net 或实体框架将对象存储到数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:58:07.283

为了将此 XML 插入 SQL Server，您需要在 SQL Server 中有一个表，其列类型为`XML`。

然后你可以使用一些非常简单的东西，比如：

```
string connectionString = "......";  // define your connection string here
string query = "INSERT INTO dbo.YourTableNameHere(XmlColumn) VALUES(@XmlContent)";

// set up SqlConnection and SqlCommand
using(SqlConnection conn = new SqlConnection(connectionString))
using(SqlCommand cmd = new SqlCommand(query, conn))
{
    // define parameter for query and set its value to your XML response
    cmd.Parameters.Add("@XmlContent", SqlDbType.VarChar, -1);
    cmd.Parameters["@XmlContent"].Value = Response;    // assign your XML response here

    // open connection, execute INSERT, close connection
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();     
} 
```

当然，如果您使用 Entity Framework 或其他 ORM 之类的东西，那么事情看起来会大不相同......这只是“直截了当”的纯 ADO.NET

# jquery - 在两个 raphael 对象之间拖动一条线

> ID：11098945
> 
> 赞同：0
> 
> 时间：2012-06-19T10:17:51.780
> 
> 标签：jquery, raphael

我试图在两个 Raphael 对象之间画一条线连接器，但我不能这样做。

我试过 jsPlumb 但它只适用于 div 标签。我想在 raphael 矩形对象上绘制端点。我已经尝试过了。

我在下面的代码中使用了带有 Raphael 对象的 jsplumb：

```
$("#btnAI, #btnDI").live("click", function() {

        if(this.id == "btnAI")
            text = "AI";
        else
            text = "DI";

        var Execount = "#" + (++ecount);
        var SetAI = paper.set().draggable.enable();
        // create a set to store AI

        var outerRect = getRectangle(paper, 30, 40, 120, 120, "white", "Gray", 5);
        // outer Rectangle
        SetAI.push(outerRect);

        var InnerRect = getRectangle(paper, 40, 50, 100, 100, "#5a5a5a", "Gray", 5);
        // inner Rectangle
        SetAI.push(InnerRect);

        SetAI.push(GetText(paper, 90, 70, text + uniqueId("AI")));
        // text to display which contact

        SetAI.push(GetText(paper, 110, 130, Execount));
        // text for unique id

        SetAI.push(GetLine(paper, 40, 80, 100, 0));
        //upper line

        SetAI.push(GetLine(paper, 40, 120, 100, 0));
        //lower line

        SetAI.push(getRectangle(paper, 99, 90, 41, 20, null, "#FFF", 0));
        //rect to display o/p value

        SetAI.push(getRectangle(paper, 40, 85, 48, 30, null, "#FFF", 0));
        //rect to display o/p value

        jsPlumb.setMouseEventsEnabled(true);
                jsPlumb.setRenderMode();
                jsPlumb.Defaults.Container = 'canvasdiv';
                jsPlumb.Defaults.Overlays = [["Arrow", {
                            location : 0.9
                        }], ["Label", {
                            location : 0.1,
                            label : function(label) {
                                return label.connection.labelText || "";
                            },
                            cssClass : "aLabel"
                        }]];
                outerRect.node.setAttribute("class","jsclass");
                var sourceEndpoint = {
                        endpoint : "Rectangle",
                        paintStyle : {
                            fillStyle : "red",
                            width:20,
                            height:15
                        },
                        isSource : true,
                        connector : ["Flowchart", {
                            stub : 40
                        }],
                        connectorStyle : {
                        lineWidth : 3,
                        joinstyle : "round",
                        strokeStyle :"Green",
                    },
                        connectorHoverStyle :{
                        lineWidth : 3,
                        strokeStyle : "#2e2aF8"
                    },
                        dropOptions : {
                            hoverClass : "hover",
                            activeClass : "active",
                            zIndex:1000
                        },
                }

                var targetEndpoint = {
                        endpoint : "Rectangle",
                        paintStyle : {
                            fillStyle : "green",
                            width:20,
                            height:15
                        },
                        isTarget : true,
                        connector : ["Flowchart", {
                            stub : 40
                        }],
                        connectorStyle : {
                        strokeStyle : "#FF3333",
                        lineWidth : 2
                    },
                    dropOptions : {
                            hoverClass : "hover",
                            activeClass : "active"
                        },
                }

                jsPlumb.addEndpoint(outerRect.node, {anchor : "BottomCenter"}, sourceEndpoint);
                //jsPlumb.addEndpoint(outerRect.node, {anchor : "RightMiddle"}, targetEndpoint);
                jsPlumb.draggable($(".jsclass")); 
```

请为此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:59:29.373

一个好的 jQuery 画线程序是[jsPlumb](http://jsplumb.org)。

# .htaccess - .htaccess 禁止来自字典的 RewriteUrl

> ID：11098946
> 
> 赞同：0
> 
> 时间：2012-06-19T10:17:54.137
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting

我的 htaccess：

```
RewriteEngine On
RewriteRule ^(.*)/(.*)$ /index.php?cat=$1&page=$2 [L] 
```

现在我的css位于：*/files/style.css* ，我的管理面板位于：*/admin/index.php*

当我转到这个文件时，它会告诉我：*/index.php?cat=files&page=style.css*和*/index.php?cat=admin&page=index.php*

**我该如何解决这个问题？** （也许禁止地图：/files 和 /admin，但我不知道如何..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:34:01.430

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/(files|admin)/
RewriteRule ^(.*)/(.*)$ /index.php?cat=$1&page=$2 [L] 
```

如果请求的 URL 以`/files/`or开头，条件行告诉 Apache 跳过重写`/admin/`。

# c# - 有没有更简单的方法来编写数组到 CSV 的编写器

> ID：11098947
> 
> 赞同：0
> 
> 时间：2012-06-19T10:17:56.113
> 
> 标签：c#, .net, string, csv

我在[另一个问题中找到了这个实现](https://stackoverflow.com/questions/8666518/how-can-i-write-a-general-array-to-csv-file)

```
public static void SaveArrayAsCSV<T>(T[] arrayToSave, string fileName)
{
    using (StreamWriter file = new StreamWriter(fileName))
    {
        foreach (T item in arrayToSave)
        {
            file.Write(item + ",");
        }
    }
} 
```

然而，这有一些缺点，例如数组末尾的尾随逗号，并且它错过了项目中可能包含逗号的可能性。我可以通过 if-else 来解决这个问题，但是代码会变得更大。有没有更简单的方法将数组格式化为 csv 行？可能通过使用 linq 或更强大的方法，例如`File.WriteAllText`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T10:20:10.410

请[*停止滚动您自己的 CSV 解析器*](http://secretgeek.net/csv_trouble.asp)。使用现有的 CSV 解析器来操作 CSV 文件。例如[FileHelpers](http://filehelpers.sourceforge.net/)。我不敢相信还有人以你的方式做这件事。

# mysql - 从多个表中选择行

> ID：11098948
> 
> 赞同：0
> 
> 时间：2012-06-19T10:17:55.777
> 
> 标签：mysql

我正在尝试从多个表中获取数据（所有表都相同）

```
Select column1,column2 From table1,table2 
```

这是在 MYSQL 中获取此信息的正确方法吗？（我在查询中动态传递表名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:21:02.650

您需要的语法是这样的：

```
SELECT a.column1, b.column2
FROM table1 AS a, table2 AS b 
```

`AS`给你的表一个别名，你可以直接在你的请求中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:24:19.327

也许是这样：

```
 SELECT column1, column2
 FROM table1
 UNION ALL
 SELECT column1, column2
 FROM table2 
```

但是你不能动态地传入表名。它们必须事先为数据库所知（因此您需要先在程序中构造 SQL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:21:29.560

喜欢：

```
SELECT table1.column1, table2.column2 
FROM table1, table2 
```

通过使用表完全限定列，当列在表中具有相同名称时，您将不会遇到冲突。正如[zessx](https://stackoverflow.com/questions/11098948/select-row-from-multiple-table/11098991#11098991)在他的回答中所说，另一种方法是给表起别名，这可以使用长表名/模式名使查询更简单。

# c# - WMI 查询返回多个 ManagementObjects

> ID：11098952
> 
> 赞同：0
> 
> 时间：2012-06-19T10:18:11.570
> 
> 标签：c#, .net, console, wmi

我正在使用 .NET 控制台应用程序来收集系统的性能数据。对于其中一个计数器，我使用如下查询：

```
SELECT CurrentConnections, ConnectionAttemptsPersec
      FROM Win32_PerfFormattedData_W3SVC_WebService 
```

此查询为我的系统返回四个管理对象。每个处理器核心
是否返回数据？`Win32_PerfFormattedData_W3SVC_WebService`我的系统中有四个核心处理器。如果不是，查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:54:30.243

> 此查询为我的系统返回四个管理对象。

那么您在 IIS 中配置了四个网站？

（查看 Perf Mon 的 Web 服务对象——我相信它是同一个计数器对象——我看到三个实例：`_Total`和`web-site-1`（`web-site-2`当然`<All instances>`还有）。

检查`Name`属性也应该有助于区分它们。

# windows - 在 Windows Phone 上使用 xna 进行微交易

> ID：11098955
> 
> 赞同：0
> 
> 时间：2012-06-19T10:18:20.203
> 
> 标签：windows, xna-4.0

嗨，我一直在阅读，一些消息来源说有一种方法可以在 Windows Phone 上进行微交易，但我无法准确学习如何操作，有人可以帮我指出正确的方向吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:22:45.153

将其设置为生产的一部分是在应用提交过程中为您的应用创建产品。您将看到“应用内购买”的可选链接

而不是给你一堵文字墙（关于实现这一点的文章有很多部分，请访问 MSDN for [Windows Phone Dev Center](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx)以获取“应用内购买”）。Microsoft 有一个非常有据可查的示例，说明如何允许您的应用程序的用户从应用程序内为生产环境进行购买，以及通过上面的链接进行模拟测试的示例。

我将总结这个模拟测试过程的要点：

1.  [从模拟](http://go.microsoft.com/fwlink/?LinkId=269984)应用内购买库下载模拟应用内购买库和示例应用。

2.  模拟应用内购买库是用 C# 代码编写的。在您使用应用内购买功能的每个 .cs 文件中，包含以下 using 语句代码块：

C＃

```
#if DEBUG
using MockIAPLib;
using Store = MockIAPLib;
#else
using Windows.ApplicationModel.Store;
#endif 
```

此语句允许您在使用模拟库测试应用内购买或作为已发布应用进行真正的应用内购买调用之间切换。测试时，您必须在调试模式下构建您的应用程序。对于调试模式，在 Visual Studio 的解决方案配置下拉列表中，单击调试。当您准备好为 Windows Phone Store 部署构建应用程序时，通过从“解决方案配置”下拉列表中选择“发布”来更改为发布模式。要初始化模拟库，请将以下代码添加到 App 构造函数末尾的 App.xaml.cs 文件中：

C＃

```
 SetupMockIAP(); 
```

然后，添加SetupMockIAP方法来初始化mock库，添加factic产品。示例 SetupMockIAP 方法如下所示：

C＃

```
 private void SetupMockIAP()
        {
#if DEBUG
            MockIAP.Init();

            MockIAP.RunInMockMode(true);
            MockIAP.SetListingInformation(1, "en-us", "A description", "1", "TestApp");

            // Add some more items manually.
            ProductListing p = new ProductListing
            {
                Name = "img.2",
                ImageUri = new Uri("/Res/Image/2.jpg", UriKind.Relative),
                ProductId = "img.2",
                ProductType = Windows.ApplicationModel.Store.ProductType.Durable,
                Keywords = new string[] { "image" },
                Description = "An image",
                FormattedPrice = "1.0",
                Tag = string.Empty
            };
            MockIAP.AddProductListing("img.2", p);
#endif
        } 
```

请注意，方法中包含的代码仅在项目在调试模式下运行时才会执行。填充应用内购买产品的另一种方法是使用 XML 片段，其中列出了您要用于测试的所有优惠。XML 如下所示：

XAML

```
<?xml version="1.0"?>
<ProductListings>
    <ProductListing Key="test1" Purchased="true" Fulfilled="true">
        <Name>Testproduct</Name>
        <Description>A sample product listing</Description>
        <ProductId>test.durable.1</ProductId>
        <ProductType>Durable</ProductType>
        <FormattedPrice>$1.00</FormattedPrice>
        <ImageUri></ImageUri>
        <Keywords>test;product</Keywords>
        <Tag>Additional text</Tag>
    </ProductListing>
</ProductListings> 
```

要在“模拟商店”中加载此 XML，请使用以下方法调用：

C＃

```
MockIAP.PopulateIAPItemsFromXml(Xml); 
```

要从 XNA 执行此操作，您需要创建一个界面供用户实际购买该项目。[第 9 频道](http://channel9.msdn.com/Shows/Inside+Windows+Phone/Inside-Windows-Phone-45--Adding-In-App-Purchase-as-a-light-up-feature-to-your-Windows-Phone-7-Games)上有一个很棒的教程，其中谈到“将应用程序购买添加为 Windows Phone 7 游戏的“点亮”功能”，他们通过相同的链接提供源代码。

最后的想法是，如果您对 XNA 还不是很满意，我鼓励您构建一个简单的 C#/XAML Windows Phone 应用程序来为这个过程提供文本。一旦你有了一个工作示例，代码将能够以最小的努力转移到 XNA。这样，您至少可以在处理 XNA 的细微差别之前将您的大脑围绕这个概念。

如果您在查看上述材料后有任何问题，请告诉我，我很乐意为您提供帮助。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx)

# objective-c - 您可以使用 NSSortDescriptor 按不为空的值进行排序吗？

> ID：11098959
> 
> 赞同：4
> 
> 时间：2012-06-19T10:18:29.097
> 
> 标签：objective-c, nsmutablearray, nssortdescriptor

我有以下排序描述符对我的业务对象数组进行排序，准备在表格中显示，我从[上一个 SO 问题中的一些示例排序代码开始](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

```
NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"awardedOn" ascending:NO];
NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor1, sortDescriptor2, nil];
NSArray *sortedArray = [returnable sortedArrayUsingDescriptors:sortDescriptors]; 
```

我要显示的所有对象都有一个标题。只有其中一些会有一个“awardedOn”集，即 NSDate。

我想做的事：

1.  对整个数组进行排序，以便所有带有“awardedOn”集的对象都显示在顶部
2.  在两个“集合”中，按字母顺序排列
3.  我不关心日期的实际值，我更感兴趣它是否存在

像这样的东西（标题，粗体的对授予的值有一个值）

*   **惊人的**
*   **更好的**
*   **凉爽的**
*   其他
*   另一个
*   多一个
*   完后还有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:23:27.340

有两种可能的方式：

1.  创建业务对象时，将`awardedOn`date 分配为`distantPast`好像它不存在一样，然后按正常排序`awardedOn`，然后按`title`。

2.  使用将在每个业务对象上调用的自定义比较方法创建排序描述符：

.

```
NSSortDescriptor *awardDescriptor = [NSSortDescriptor descriptorWithKey:@"awardedOn"
                                                              ascending:NO 
                                                               selector:@selector(compareAwardedOn:)];

// In class for business object
- (NSComparisonResult)compareAwardedOn:(id)otherBusiness {
    // return custom NSComparison result after 
    // checking whether either of awardedOn dates are nil.
    return NSOrderedSame;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T12:03:10.460

您应该能够使用您首先说的两个描述符来做到这一点，首先是按奖励，然后按标题。但是，您需要为awardOn 排序提供一个自定义的NSSortDescriptor，看起来像这样：

```
#define NULL_OBJECT(a) ((a) == nil || [(a) isEqual:[NSNull null]]) 
@interface AwardedOnSortDescriptor : NSSortDescriptor {} 
@end 
@implementation AwardedOnSortDescriptor 
- (id)copyWithZone:(NSZone*)zone 
{ 
    return [[[self class] alloc] initWithKey:[self key] ascending:[self ascending] selector:[self selector]]; 
} 
- (NSComparisonResult)compareObject:(id)object1 toObject:(id)object2 
{ 
    if (NULL_OBJECT([object1 valueForKeyPath:[self key]])) { 
        if (NULL_OBJECT([object2 valueForKeyPath:[self key]]))  
            return NSOrderedSame; // If both objects have no awardedOn field, they are in the same "set"
        return NSOrderedDescending; // If the first one has no awardedOn, it is sorted after         
    } 
    if (NULL_OBJECT([object2 valueForKeyPath:[self key]])) { 
        return NSOrderedAscending; // If the second one has no awardedOn, it is sorted after
    } 
    return NSOrderedSame; // If they both have an awardedOn field, they are in the same "set"
} 
@end 
```

这将允许您必须分开集合：在您的示例中，Awesome/Better/Cool 和 Another/Another One/One More/Yet another。在那之后，你应该擅长：

```
NSSortDescriptor *sortDescriptor1 = [[AwardedOnSortDescriptor alloc] initWithKey:@"awardedOn" ascending:YES];
NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES]; 
```

最后一点，您可能需要做更多的工作，具体取决于您的“空”奖励字段的外观（我假设，在上面的代码中，该字段设置为空）。你可以看看这里：[https ://stackoverflow.com/a/3145789](https://stackoverflow.com/a/3145789)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:32:36.423

尝试使用比较器：

```
_finalArray =  [_array sortedArrayUsingComparator: ^NSComparisonResult(NSDictionary *obj1, NSDictionary *obj2) 
               {
                   if([[obj1 valueForKey@"awardedOn"] lenght] && ![[obj2 valueForKey@"awardedOn"] lenght])
                       return NSOrderedDescending;
                    if([[obj2 valueForKey@"awardedOn"] lenght] && ![[obj1 valueForKey@"awardedOn"] lenght])
                       return NSOrderedAscending;
                   return NSOrderedSame;
               }]; 
```

# php - 如何在 joomla 2.5 中创建 joomla 用户组

> ID：11098960
> 
> 赞同：2
> 
> 时间：2012-06-19T10:18:30.673
> 
> 标签：php, joomla, nested-sets, joomla2.5

我正在 joomla 2.5 中处理我的组件，我需要通过我的代码动态创建用户组。

正如我在 2.5 中所知道的，joomla 使用嵌套集来维护层次结构，因此当我们插入任何新条目时它可能会影响整个表。

joomla 是否提供任何可直接用于创建用户组的功能？我们可以在其中指定父组和新组的东西将在其下创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:47:10.123

我自己解决了

在我的情况下，我需要在特定组下插入子组（在下面的代码中称为 $parent_id）

```
// get max right from all the child under parent id
    $child_query = "SELECT max(`rgt`) FROM `#__usergroups` WHERE `id` = ".$parent_id;
$db->setQuery($child_query);
$max_rgt = $db->loadResult();

// calculate left and rgt for new entry
$new_lft = $max_rgt;
$new_rgt = $max_rgt + 1;

// update lft and rgt of all entries having lft , rgt greater than max_rgt
$upd1 = "UPDATE `#__usergroups` SET `lft` = `lft` + 2 WHERE `lft` > ".$max_rgt;
$upd2 = "UPDATE `#__usergroups` SET `rgt` = `rgt` + 2 WHERE `rgt` >= ".$max_rgt;

// insert new  child
$insert = "INSERT INTO `#__usergroups`(`parent_id`,`lft`,`rgt`,`title`) VALUES(".$matrix_parent.",".$new_lft.",".$new_rgt.",'".$title."')"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-21T09:31:23.007

即使问题是一种旧的并且已经被接受，我使用此代码在自定义组件中添加/更新/删除组

为了获得所需的模型，`com_users`需要：

```
JModelLegacy::addIncludePath( JPATH_ADMINISTRATOR . 
                '/components/com_users/models/', 'UsersModel' );

$groupModel = JModelLegacy::getInstance( 'Group', 'UsersModel' ); 
```

在下面显示的代码将起作用之前。

**添加*/更新：**

```
$groupData = array(
    'title' => <new/old name of group here>,
    'parent_id' => <new/old id of parent group here>,
    'id' => <group id here> );

$groupModel->save( $groupData ); 
```

**如果组是新创建的，则`id`应该是`0`. 保存后，可以通过数据库查询访问新 ID，因为知道组的名称/标题*

**删除：**

```
$groupModel->delete( $groupIds ); 
```

上面的整个代码都包含在`save(), delete()`我的组件模型之一的方法中。由于 Joomla 将用户和组之间的连接存储在单独的 Map 表中，因此删除组时不会损坏用户数据。请注意，该`delete()`方法将 id 数组作为参数。

# c++ - 奇怪的布尔重载

> ID：11098971
> 
> 赞同：2
> 
> 时间：2012-06-19T10:19:31.000
> 
> 标签：c++

你能给我解释一下这里的 typedef 是做什么的以及目的是什么吗？

```
class C
{
    public:
        ...

        typedef bool (C::*implementation_defined_bool_type)(bool) const;

        operator implementation_defined_bool_type() const {
            return _spi ? &C::isPersistent : 0;
        }

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T10:20:43.277

> **你能解释一下这里在`typedef`做什么吗？**

```
typedef bool (C::*implementation_defined_bool_type)(bool) const; 
```

`typedef`sa**指向**a 类型的 const 成员函数的指针`C`，它接受 a`bool`作为输入参数并返回 a `bool`。

尽管，

```
operator implementation_defined_bool_type() const 
```

接受一个类型的对象`C`并返回一个类型`implementation_defined_bool_type`。
它被称为**转换运算符**。

> **它的目的是什么？**

它实现了**“Safe Bool Idiom”**，旨在验证布尔上下文中的对象。
请注意，[Safe Bool Idiom](https://stackoverflow.com/questions/6242768/is-the-safe-bool-idiom-obsolete-in-c11)在 C++11 标准中已过时。

**好读：**
[安全布尔成语](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFwQFjAA&url=http://www.artima.com/cppsource/safebool.html&ei=jFPgT-iuH4r3rQekpcz6DA&usg=AFQjCNFFSCg8G7WxPya15C6J1iJapbPcGA)

# html - Chrome 不显示 Raphael SVG 图像

> ID：11098975
> 
> 赞同：0
> 
> 时间：2012-06-19T10:19:51.590
> 
> 标签：html, image, svg, raphael

我只是使用以下代码将图像添加到我的项目中，

```
var paper = Raphael("mpdraw_div", 1920, 1080);
var img = paper.image("temp.jpg", 150, 10, 710, 653); 
```

当FF，IE8显示我的图像时，Chrome坚持不在我的项目中显示我的图像，当我创建一个新页面并使用上面的代码时，没有问题。

我的项目递归地有很多 div，但是我尝试将 mpdraw_div 写入 body 标记之后，这也是一个问题。

这种情况的可能原因是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:15:38.093

我意识到这是因为在拉斐尔之前加载图像是失败的原因。

解决方案是稍后在一些毫秒（我使用 100 毫秒）之后加载图像。

希望这对大家有所帮助。

# mysql - 如何使用此 MySql 查询获取个人计数

> ID：11098978
> 
> 赞同：0
> 
> 时间：2012-06-19T10:20:07.830
> 
> 标签：mysql, count

我有一张桌子，这张桌子包含`result column`一些条目。我只是想知道如何使用这样的 MySql Query 对这些条目进行单独计数（*请参阅所需的结果*）......另外（*请参阅结果列图像和查询*）或帮助绝对值得赞赏

**结果列图像**

![在此处输入图像描述](../Images/ba6e5ee2a1f0403a4e4456a55032d235.png)

**询问**

```
SELECT cpd.result FROM cron_players_data cpd
WHERE cpd.`status` = '1' 
AND (cpd.`result` = '1' OR cpd.`result` = '2') 
AND cpd.`player_id` = '81' 
```

**结果必填**

```
result count
1      2
2      6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:23:18.203

```
SELECT result, COUNT(result) `count` FROM
(
    SELECT cpd.result result 
    FROM cron_players_data cpd
    WHERE cpd.`status` = '1' 
        AND (cpd.`result` = '1' OR cpd.`result` = '2') 
        AND cpd.`player_id` = '81'
) a
GROUP BY result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T10:23:55.363

```
SELECT cpd.result, count(*) FROM cron_players_data cpd
WHERE cpd.`status` = '1' 
AND (cpd.`result` = '1' OR cpd.`result` = '2') 
AND cpd.`player_id` = '81' group by cpd.`result` 
```

# android - android - Geocoder.getFromLocationName() 在 ICS 设备中不起作用

> ID：11098983
> 
> 赞同：11
> 
> 时间：2012-06-19T10:20:27.750
> 
> 标签：android, geocoding, android-maps

我有两个设备。一种是**HTC WildFire S**，另一种是**HTC 1V**。我`Geocoder.getFromLocationName()`在我的应用程序中使用了。它在**HTC wildfire S**中成功运行。但是在**HTC 1V**中我得到了以下错误。为什么来了？我该如何解决这个问题？请任何人都可以帮助我。

代码

```
Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault()); 
//s is the address
List<Address> addresses = geoCoder.getFromLocationName(s, 5); //Here i got the following Exception. 
```

**错误**

```
06-18 16:28:17.933: W/System.err(4960): java.io.IOException: Service not Available
06-18 16:28:17.953: W/System.err(4960):at android.location.Geocoder.getFromLocationName(Geocoder.java:178) 
```

**位置选项卡**

![在此处输入图像描述](../Images/af9b8f6c0c1b5d5bf88478b84c073a98.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T22:35:37.303

最后我找到了答案：[https ://code.google.com/p/android/issues/detail?id=38009](https://code.google.com/p/android/issues/detail?id=38009)

重新启动您的设备以使 Geocoder 工作。希望它可以帮助某人

注意：有人说如果您使用 Google API 16 它将起作用

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-28T23:35:29.370

```
 GeoPoint point = new GeoPoint(
                        (int) (LATITUDE * 1E6),
                        (int) (LONGITUDE * 1E6));

String n;

public void someRandomMethod() {
        n = convertPointToLocation(point);
}

public String convertPointToLocation(GeoPoint point) {
        String address = "";
        Geocoder geoCoder = new Geocoder(
                getBaseContext(), Locale.getDefault());
        try {
            List<Address> addresses = geoCoder.getFromLocation(
                    point.getLatitudeE6()  / 1E6,
                    point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }

        return address;
    } 
```

# xslt - 用条件语句替换 XSL 中的文本

> ID：11098984
> 
> 赞同：1
> 
> 时间：2012-06-19T10:20:32.073
> 
> 标签：xslt

我正在处理由数码摄像机生成的 XML 文件。相机允许用户将相机的所有设置保存到 SD 卡中，以便可以调用设置或将设置加载到另一台相机中。我正在编写的 XSL 样式表将允许用户查看相机的设置，这些设置保存在 Web 浏览器中的 SD 卡中。

虽然 XML 文件中的大多数值（由我的样式表格式化）对人类来说是有意义的，但有些则不然。我想做的是让样式表显示文本基于 XML 文件中的值，但更容易被人类理解。

我的示例 XML 文件可以在这里查看：http: [//josephthomas.info/Alexa/Setup_120511_140322.xml](http://josephthomas.info/Alexa/Setup_120511_140322.xml)

您将在页面下方看到几行：

```
Color GAMMA-SxS    Rec_Log 
```

虽然“Rec_Log”是摄像机可以理解的值，但它不是摄像机用户可以理解的值。我希望样式表改为显示“LogC”。

在 XML 文件中，这个值是这样定义的：

```
<DteLut lowerLimit="0" upperLimit="2">Rec_Log</DteLut> 
```

为该值格式化示例页面的 XSL 是：

```
<tr>
  <td class="title_column">Color GAMMA-SxS</td><td><xsl:value-of select="Settings/Groups/Recording/DteLut"/>
  </td>
</tr> 
```

所以我希望做的是在页面上显示“LogC”而不是 Rec_Log。

在我看来，“when”条件语句是正确的方法，但我对导致这种情况发生的语法不够熟悉。XML 文件中还有其他值需要替换，但以上是我的任务的一个很好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:17:01.953

您可以做的是利用模板匹配，将异常与您想要更改的内容相匹配。首先，将以下模板添加到您的 XSL

```
<xsl:template match="DteLut[. = 'Rec_Log']">
   <xsl:text>LogC</xsl:text>
</xsl:template> 
```

然后，而不是以下行

```
<xsl:value-of select="Settings/Groups/Recording/DteLut"/> 
```

执行以下行

```
<xsl:apply-templates select="Settings/Groups/Recording/DteLut"/> 
```

当* *DteLut* * 的值为“Rec_Log”时，则匹配自定义模板改为输出“LogC”。当没有匹配时，默认行为将启动，即按原样输出文本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:24:29.287

我会使用数据驱动的方法。有一个提供所有翻译的映射文件：

```
<translations>
  <translate from="Rec_log" to="LogC"/>
  <translate .../>
</translations> 
```

然后定义一个键：

```
<xsl:key name="trans" match="translate" use="@from"/> 
```

然后改变

```
<xsl:value-of select="Settings/Groups/Recording/DteLut"/> 
```

到

```
<xsl:value-of select="key('trans', Settings/Groups/Recording/DteLut,
                          doc('translations.xml'))/@to"/> 
```

如果使用 XSLT 2.0，或者

```
<xsl:variable name="val" select="Settings/Groups/Recording/DteLut"/>
<xsl:for-each select="document('translations.xml')">
  <xsl:value-of select="key('trans', $val)/@to"/>
</xsl:for-each> 
```

如果你坚持使用 1.0.

# .net - MS 分布式计算解决方案

> ID：11098994
> 
> 赞同：1
> 
> 时间：2012-06-19T10:21:05.970
> 
> 标签：.net, javaspaces

在社区解决方案和 Java 领域工作多年后，我最近搬到了一家 MS Gold 合作伙伴公司。我刚刚开始一个需要对对象进行分布式管理的项目。在 Java 中，javaspaces/jini 将是理想的。我想知道是否有任何 MS 解决方案允许将单个对象分布在多个服务器上以实现负载平衡和冗余。