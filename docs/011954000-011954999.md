# StackOverflow 问答 11954000-11954999

# java - How to implement this function in Java?

> ID：11954005
> 
> 赞同：1
> 
> 时间：2012-08-14T14:03:32.263
> 
> 标签：java, math, recursion

I built the following function that finds the nth root of a number in Python:

```
def find_root(base, nth_root, top = None, bottom = 0):
    if top == None: top = base

    half = (float(top) + float(bottom)) / 2.0 

    if half**nth_root == base or half == top or half == bottom:
        return half
    if half**nth_root > base:
        return find_root(base, nthRoot, half, bottom)
    if half**nth_root < base:
        return find_root(base, nthRoot, top, half) 
```

As you can probably tell it is highly dependent upon default parameters. Is there (1) a better way to do this (I want it to be recursive), and (2) (this question probably has the same answer as 1) how can I do this in Java if the language does not support default parameters?

I'm new to Java and trying to work out the differences.

Thanks,

Michael G.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:05:50.253

您可以使用[方法重载](http://en.wikipedia.org/wiki/Function_overloading)来模拟默认参数：

```
int find_root(int base, int nth_root) {
  return find_root(base, nth_root, -1, 0);
}

int find_root(int base, nth_root, int top, int bottom) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:15:50.797

您还可以使用可变参数功能。[这里](http://www.deitel.com/articles/java_tutorials/20060106/VariableLengthArgumentLists.html)的例子。

# jqplot - Making the jqPlot area smaller

> ID：11954007
> 
> 赞同：0
> 
> 时间：2012-08-14T14:03:50.080
> 
> 标签：jqplot

Hi I have got a pie chart which is generated using jqPlot. But the jqPlot area is covering the whole width of the page. I want to show that only at the left half of the page. Can any on please provide me a little help to do this. My code is given below-

```
var plot2 = jQuery.jqplot ('month_record', [data], 
{ 
  title: "Records saved per month in the previous year",
  seriesDefaults: {
    // Make this a pie chart.
    renderer: jQuery.jqplot.PieRenderer, 
    rendererOptions: {
      // Put data labels on the pie slices.
      showDataLabels: true,
      startAngle:-90,
      dataLabels: monthRecord,
      dataLabelFormatString:'%d',

    }
  }, 
  legend: { show: true, location: 'e' }
} 
```

);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:21:57.810

jqPlot 使用容器的高度/宽度`<div>`来设置绘图尺寸。

```
<div id="chart" style="width: 400px; height: 260px;" class="jqplot-target">
    <!-- plot will render here with the above dimensions -->
</div> 
```

# ruby - 如何在 cap shell 命令中使用 sudo 作为参数？

> ID：11954012
> 
> 赞同：2
> 
> 时间：2012-08-14T14:04:04.743
> 
> 标签：ruby, capistrano

当我尝试运行使用*sudo*作为参数而不是命令的 cap shell 命令时，执行仅在将其用作命令时与 sudo 相关的替换。

例子：

```
$ cap shell
cap> rpm -q sudo 
```

这失败了，因为 shell.rb 包含

```
command = command.gsub(/\bsudo\b/, "sudo -p '#{configuration.sudo_prompt}'") 
```

它将命令破坏为

```
rpm -q sudo -p '\\''sudo password: '\\'' 
```

rpm 命令在遇到 -p 选项时需要一个包文件。没有包，所以它失败了。

当我尝试`grep sudo`从 cap shell 运行等时会出现类似的问题。

有没有办法在 cap shell 命令中使用*sudo*作为参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:15:58.517

AFAICS，这个问题似乎是 Capistrano 中的一个错误。所以，请向[BTS](https://github.com/capistrano/capistrano/issues)报告。

`Capistrano::Shell::exec_command()`无论如何，您可以通过在您自己的`cap`命令中覆盖私有方法来解决此问题。

1.  创建一个名为`mycap.rb`
2.  将原件复制到`/usr/bin/cap`您的`mycap.rb`
3.  添加`require 'capistrano/shell'`
4.  添加`exec_command()`你的`mycap.rb`
5.  `/\bsudo\b/`用类似的东西替换正则表达式`/^sudo\b/`
6.  执行`mycap.rb`而不是原来的`cap`命令

mycap.rb 的内容应该是这样的：

```
#!/usr/bin/env ruby

require 'capistrano/cli'
require 'capistrano/shell'

module Capistrano
  class Shell
    private

    def exec_command(command, servers)
      command = command.gsub(/^sudo\b/, "sudo -p '#{configuration.sudo_prompt}'")
      processor = configuration.sudo_behavior_callback(Configuration.default_io_proc)
      sessions = servers.map { |server| configuration.sessions[server] }
      options = configuration.add_default_command_options({})
      cmd = Command.new(command, sessions, options.merge(:logger => configuration.logger), &processor)
      previous = trap("INT") { cmd.stop! }
      cmd.process!
    rescue Capistrano::Error => error
      warn "error: #{error.message}"
    ensure
      trap("INT", previous)
    end
  end
end

Capistrano::CLI.execute 
```

请注意，`\b`替换为`^`in `command.gsub()`。但其他一切都是一样的。

# jquery - 通过 jquery 向 asp:Label phone 字段添加破折号

> ID：11954016
> 
> 赞同：0
> 
> 时间：2012-08-14T14:04:14.443
> 
> 标签：jquery, asp.net, label

我有来自 db 的 asp:Label phone 字段绑定。我需要添加破折号来制作像 999-999-9999 而不是 99999999999 这样的电话格式。我尝试了类似的方法，但它不起作用：

```
$(document).ready(function ()  
    num = $('#<%=HomePhone.ClientID %>').innerText;
    parts = [num.slice(0,3),num.slice(3,6),num.slice(6,10)];
    fNum = parts[0]+"-"+parts[1]+"-"+parts[2];
    num = fNum;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:24:55.717

将您的代码更改为：

```
$(document).ready(function () {
    num = $('#<%=HomePhone.ClientID %>').text(); // jQuery does not know innerText
    parts = [num.slice(0,3),num.slice(3,6),num.slice(6,10)];
    fNum = parts[0]+"-"+parts[1]+"-"+parts[2];
    //num = fNum; // setting a variable's value does not change value of your text box
    $('#<%=HomePhone.ClientID %>').text(fNum); // set the value using jQuery
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:17:30.733

**HTML：**

```
<p id="textbox">99999999999</p> 
```

**Javascript：**

```
$(function () {
    var num = $('#textbox').html();
    var parts = [num.slice(0, 3), num.slice(3, 6), num.slice(6)];
    var fNum = parts[0] + "-" +parts[1] + "-" + parts[2];
    $('#textbox').html(fNum);
});​ 
```

**小提琴：**

[http://jsfiddle.net/timothyclifford/h9ZCR/](http://jsfiddle.net/timothyclifford/h9ZCR/)

# php - 用户登录不起作用

> ID：11954018
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:04:22.120
> 
> 标签：php, login, forum, phpbb

我正在开发一个使用 phpBB 的论坛。身份验证有问题。用户必须非常频繁地登录，几乎在每个 HTTP 请求上。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:53:44.023

将此行添加到您的登录表单：

```
<input type='hidden' name='autologin' value=1> 
```

我在我的网站上遇到了同样的问题，添加这一行解决了它。

# android - 如何让home键紧贴操作栏左侧

> ID：11954019
> 
> 赞同：1
> 
> 时间：2012-08-14T14:04:23.260
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 并`android:logo`在我的主题中设置了一个图标。我希望图标与屏幕左侧齐平，但它总是有 6px 的间距（使用层次结构查看器测量）。我用红色突出显示了我无法摆脱的图标部分。如果我`DISPLAY_HOME_AS_UP`为操作栏设置，则向上启示显示在第二张图片中，没有额外的间距。

我假设无论向上箭头是否存在，间距都可以将图标保持在同一位置。我永远不会显示向上箭头，所以我宁愿让图标在左侧齐平。

![动作栏](../Images/8a5bd4d9c508390c6d99bb8fd1af2f3f.png)

[![具有向上功能的 ActionBar](../Images/81467855670257f6ca0be417908524f7.png)](https://i.stack.imgur.com/nak7b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:18:58.427

您可以像这样设置customView：

actionBar.setCustomView(R.layout.customActionBarLayout)

并根据自己的喜好创建自己的布局

# python - 如何在python中运行并行程序

> ID：11954021
> 
> 赞同：9
> 
> 时间：2012-08-14T14:04:25.317
> 
> 标签：python

我有一个 python 脚本来使用 os.subprocess 模块运行一些外部命令。但是其中一个步骤需要花费大量时间，因此我想单独运行它。我需要启动它们，检查它们是否完成，然后执行下一个不并行的命令。我的代码是这样的：

```
nproc = 24 
for i in xrange(nproc):
    #Run program in parallel

#Combine files generated by the parallel step
for i in xrange(nproc):
    handle = open('Niben_%s_structures' % (zfile_name), 'w')
    for i in xrange(nproc):
        for zline in open('Niben_%s_file%d_structures' % (zfile_name,i)):handle.write(zline)
    handle.close()

#Run next step
cmd = 'bowtie-build -f Niben_%s_precursors.fa bowtie-index/Niben_%s_precursors' % (zfile_name,zfile_name) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:45:30.463

对于您的示例，您只想并行处理 - 您不需要线程。

使用模块`Popen`中的构造函数：http: [//docs.python.org/library/subprocess.htm](http://docs.python.org/library/subprocess.htm)`subprocess`

收集`Popen`您生成的每个进程的实例，然后`wait()`让它们完成：

```
procs = []
for i in xrange(nproc):
    procs.append(subprocess.Popen(ARGS_GO_HERE)) #Run program in parallel
for p in procs:
    p.wait() 
```

你可以摆脱这个（而不是使用`multiprocessing`or`threading`模块），因为你对让这些互操作并不真正感兴趣 - 你只希望操作系统并行运行它们并确保它们在你去合并时都完成结果...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:38:18.457

并行运行也可以使用 Python 中的多个进程来实现。我前段时间写了一篇关于这个主题的博客文章，你可以在这里找到它

[http://multicodecjukebox.blogspot.de/2010/11/parallelizing-multiprocessing-commands.html](http://multicodecjukebox.blogspot.de/2010/11/parallelizing-multiprocessing-commands.html)

基本上，这个想法是使用“工作进程”独立地从队列中检索作业，然后完成这些作业。

根据我的经验，效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:29:27.363

您可以使用线程来完成。这是一个非常简短且（未经测试）的示例，如果您在线程中实际执行的操作非常难看 if-else，但您可以编写自己的工作类..

```
import threading

class Worker(threading.Thread):
    def __init__(self, i):
        self._i = i
        super(threading.Thread,self).__init__()

    def run(self):
        if self._i == 1:
            self.result = do_this()
        elif self._i == 2:
            self.result = do_that()

threads = []
nproc = 24 
for i in xrange(nproc):
    #Run program in parallel        
    w = Worker(i)
    threads.append(w)
    w.start()
    w.join()

# ...now all threads are done

#Combine files generated by the parallel step
for i in xrange(nproc):
    handle = open('Niben_%s_structures' % (zfile_name), 'w')
    ...etc... 
```

# c# - 托管在网络共享上的 SQL Server Express 数据库 - 可能吗？

> ID：11954024
> 
> 赞同：3
> 
> 时间：2012-08-14T14:04:36.903
> 
> 标签：c#, sql, sql-server-express

我已经开始了一个需要 SQL Server 数据库的项目。我将在 c# .Net 3.5 中构建一个前端应用程序，它将使用 LINQ to SQL。

我需要将数据库托管在网络共享上，以便一组用户都可以访问数据库，主要是只读的。

我知道 SQL Server Compact 设计为在本地计算机上运行，​​而我的公司不愿意承担完整的 SQL Server 的成本。

有没有办法通过 SQL Server Express 实现我需要做的事情？

如果是这样，哪些是关于如何设置的最佳指南？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:21:25.477

如果您使用（免费）SQL Server express，它将满足您的需求 - 但您不能通过网络共享驱动器访问它 - 服务器将通过 IP 地址（或等效的 DNS）定位。

您的 c# 应用程序将与服务 - SQL Server - 而不是从数据库文件读取/读取。该服务将处理与数据库的交互。只有 SQL Server 服务需要知道文件的实际位置——您的客户端机器不知道也不应该关心。

如果你的背景只是基于文件的数据库——即 MS Access，你需要稍微改变一下你对 SQL Server 工作原理的看法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:10:41.533

您可以安装 SQL Server Express 实例并为所有需要访问数据库的用户安装 SQL Management Studio Express。Express Edition 是标准 SQL 服务器，在使用的处理器数量、使用的最大内存量和最大数据库大小方面存在限制。如果这些限制不打扰您，它应该适合您。

使用网络共享作为数据库存储来访问来自多个客户端的 db 文件是一个坏主意，因为 sql server 实例应该始终是唯一直接访问数据库的实例，包括读取和写入访问。配置多个 SQL Server 实例来访问同一个数据库可能不起作用——如果它起作用，它可能会在您的数据库文件中造成严重破坏。

# java - 从 ecplise 导入库

> ID：11954027
> 
> 赞同：2
> 
> 时间：2012-08-14T14:04:42.307
> 
> 标签：java, eclipse

为了避免为每个类手动添加和导入，我想添加 import com.soft.dor.file ；到包 package1 中可用的所有 java 类。

ecplise java有没有办法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:26.850

假设您要添加`import com.soft.dor.file ;`到名为`package1`.

进行如下：

1.  首先`package1`在包资源管理器中选择包。

2.  然后，按 Ctrl + H 并单击`File Search`选项卡。

3.  像这样更改设置：

    ![在此处输入图像描述](../Images/fe17c98b24a925298a1fe964adaaa542.png)

    1.  选择`Selected resources`收音机

    2.  选择：`Regular expression`复选框

    3.  在`Containing text`类型`package package1;`

    4.  在`File name patterns`：`*.java`

    5.  点击`Replace`。

    6.  在出现的“替换文本匹配”中，在`With:`字段类型中：`package package1;\r\n\r\nimport com.soft.dor.file ;`

    7.  按确定或预览

    ![在此处输入图像描述](../Images/229ccc00da27723040f144393bb5c80f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:13:44.980

java.lang-package 是自动导入的。

所以放置一个类：

```
package java.lang;
public class file extends com.soft.dor.file {} 
```

因此，您可以在任何地方使用该文件

IE：

```
package package1;
public class Test {

    public static void main(String[] args) throws Exception {
        file f = new file();
    }
} 
```

# hibernate - Hibernate、子分类和访问者模式

> ID：11954031
> 
> 赞同：0
> 
> 时间：2012-08-14T14:04:48.850
> 
> 标签：hibernate, visitor-pattern, table-per-subclass

我可能使用了错误的词，所以当我说业务对象（BO）时，我的意思是一个类，它引用了一个类，该类通过 Hibernate 以及业务逻辑映射到一个数据库表。

我面临的问题是在不使用反射或 instanceof 的情况下为子类实例化正确的 BO。

例如，假设我有一个 Pen-table，其中只有一个引用 Animal-table，而 Animal-table 又有两个子表 Cat 和 Dog（都是一对一的引用）。这些类看起来有点像这样：

```
public class Pen {
    private Animal a;
    // Getters and setters
}
public class Animal {
    // Getters and setters
}
public class Dog extends Animal {
    // Getters and setters
}
public class Cat extends Animal {
    // Getters and setters
}
public class PenBO {
    private Pen p;
    public AnimalBO getAnimalBO() { ... }
}
public interface Action {
    void visit(DogBO dbo);
    void visit(CatBO cbo);
}
public class Sound implements Action {
    void visit(DogBO dbo) { ... }
    void visit(CatBO cbo) { ... }
}
public interface AnimalBO {
    void accept(Sound s);
}
public class DogBO implements AnimalBO {
    Dog d;
    void accept(Sound s) {
        s.visit(this);
    }
}
public class CatBO implements AnimalBO {
    Cat c;
    void accept(Sound s) {
        s.visit(this);
    }
} 
```

然后我只是与 BO 一起在 BO 的 get 方法中像这样实例化它们：

```
Pen p = ... // Get or load from database 
PenBO pbo = new PenBO();
pbo.setPen(p); 
```

然后我使用这样的类：

```
pbo.getAnimalBO().accept(new Sound()); 
```

这是我正在研究的 getAnimalBO 方法。我希望它根据 Pen 的 Animal-instance 返回正确的 BO 实例。

我“可以”使用 instanceof 检查当前 Pen 中的实际 Animal，但这显然不漂亮。我正在考虑的另一种选择是使用反射来获取类名并在之后添加“BO”并获取它的实例，但是它也很丑陋。

我尝试在 getAnimalBO 周围包装另一个访问者模式，但它无法选择正确的访问方法而不进行强制转换，我不想将接受方法添加到非 BO 类。

如果没有聪明的方法让该方法有效地工作，那么核心问题是什么？我还没有真正找到 Hibernate 的任何最佳实践。Hibernate 和访问者模式的一些示例只是将接受方法添加到映射的类中，这不是很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:27:48.080

您的问题实际上只是一个与继承有关的 OO 问题，并且从一个类层次结构转换为一个并行层次结构。您已经解决了这个和 Hibernate 映射的数据库建模，显然您的访问者实现没有任何问题。只是您不想将访问者模式应用于映射的类层次结构，因此您在两个层次结构之间转换时给自己造成了问题。

就目前情况而言，您的部分代码将不得不负责知道`CatBO`对应于`Cat`etc，并且知道如果`Pen`对象的`Animal`属性实际上是 a `Cat`，那么包含`PenBO`对象的`AnimalBO`属性实际上将是 a `CatBO`。鉴于此，它必须能够确定`Animal`返回的实例的类型，所以我看不出如何避免使用其中之一`instanceof`或反射。你反对`instanceof`什么？我同意，反射获取类名并附加“BO”是非常讨厌和丑陋的，尽管它显然可以工作。但是一个单一的方法，其职责是通过使用和选择正确的方法来获取`Animal`和返回合适的`AnimalBO``instanceof``BO`在恕我直言的情况下，上课并不是一件坏事。

我要问的问题是，为什么你要从一个类层次结构映射到另一个这样的层次结构。您已经说过您**不想**将`accept`方法添加到映射的类中，并且它**“不好”**，但是您没有解释为什么会有这种感觉。它是否比您已经提供给自己的选项更糟糕？通过将访问者模式添加到映射的类层次结构中，您实际上并没有在其中嵌入任何业务逻辑，您只是使用访问者模式启用跨层次结构的业务逻辑应用程序。因此，您的业务逻辑层包含简单的通用访问者实现，您的映射类或域层是 POJO 加上基本访问者实现，

# flash - 使用 Flash 流式传输视频

> ID：11954032
> 
> 赞同：0
> 
> 时间：2012-08-14T14:04:53.607
> 
> 标签：flash, actionscript, amazon-s3, video-streaming

我只是花了一整天的时间在这个问题上，我担心我错过了一些东西。

我的 S3 服务器上有一个使用 AVC 编码的简单 mov/mp4 文件，并且我有一个可以播放它的 swf 文件。我找到了 2 种方法来做到这一点，如此[处](http://flashascript.wordpress.com/2010/11/08/flash-custom-video-player-tutorial-part-3/)所述。

第一个是：

```
nc.connect(null);
var ns:NetStream = new NetStream(nc);
ns.play("http://url.path/movie.mov"); 
```

这行得通，但看起来它下载了视频，一旦完成它就会开始播放。

为了将它用于视频流，它说要使用它：

```
nc.connect("http://url.path/");
var ns:NetStream = new NetStream(nc);
ns.play("movie.mov"); 
```

这段代码在 NetStream ctor 中对我来说失败了：

> ArgumentError：错误 #2126：必须连接 NetConnection 对象。

问题：

1.  这是这样做的正确方法还是我在代码中遗漏了什么？
2.  我发现[这个线程](https://stackoverflow.com/questions/1541211/is-it-possible-to-do-flash-pseudo-streaming-with-s3)让我非常难过，但是我构建了一些 HTML 视频播放器来播放来自 S# 的流式视频，这是怎么回事？
3.  读了一下，发现可能是因为 h264 格式，最后才发送元数据。这是正确的吗？将它转换为另一种格式会解决它吗？
4.  所有的 flash-streaming 教程都假设我使用 RTMP 协议存储我的视频，阅读了一下，发现我可以[在 Amazon Web Services 上使用 Adob​​e Media Server 5](http://www.adobe.com/products/amazon-web-services.html)。我一定要吗？是否有免费的解决方案或闪存只能流式传输此协议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:21:04.987

如果文件在播放开始之前已完全下载，则可能是因为元数据位于视频的末尾。

尝试使用[qt-faststart](https://github.com/danielgtaylor/qtfaststart)（或在线搜索预编译的二进制版本）将此元数据移动到文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:03:57.800

对于您的两种方法：

1.  要么您的服务器需要被告知流式传输该 mime 类型（我没有使用 S3 的经验，但它可能已经为常见的视频类型设置）或者您的文件类型不是流式传输的支持类型，（MOOV atom -meta data- 是在文件的末尾而不是开头）。使用 Adob​​e Media Encoder（或将此数据放在文件开头的其他编码程序）重新编码为 .mp4（h.264 编码）或 .f4v（或 .flv）。

2.  这适用于流媒体服务器（Flash Media Server），因此您需要输入媒体服务器的地址：例如。“rtmp://mediaserver/application/streamname”。

# python - 动态定义具有不同签名的函数

> ID：11954037
> 
> 赞同：6
> 
> 时间：2012-08-14T14:05:03.907
> 
> 标签：python, dynamic

我想要完成的事情：

```
dct = {'foo':0, 'bar':1, 'baz':2}
def func(**dct):
    pass
#function signature is now func(foo=0, bar=1, baz=2) 
```

但是，** 语法显然在扩展 dict（我想做的）和声明包含关键字参数的参数（我不想做的）之间发生冲突。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T15:42:34.603

根据我对您的要求的解释——您希望动态定义一个函数，其签名与`dict`运行时提供的内容相匹配——这里有两个问题使其不切实际。

1.  如果参数是在运行时定义的，你的函数如何引用变量？您是否也计划在运行时构建函数体？
2.  `dict`s 是无序的，因此您不能可靠地使用它们来定义位置参数

我怀疑这是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。如果您可以解释您要达到的目标，那么也许我们可以提供更好的帮助。

但是，**假设**您尝试使用`dict`一种方法来分配默认关键字参数来实现这一点，那就是使用[decorators](http://www.artima.com/weblogs/viewpost.jsp?thread=240808)。例如：

```
def defaultArgs(default_kw):
    "decorator to assign default kwargs"
    def wrap(f):
        def wrapped_f(**kwargs):
            kw = {}
            kw.update(default_kw)  # apply defaults
            kw.update(kwargs)  # apply from input args
            f(**kw)  # run actual function with updated kwargs
        return wrapped_f
    return wrap 
```

然后，您可以使用此装饰器将默认关键字参数分配给只需要关键字参数的函数：

```
defaults = {'foo':0, 'bar':1, 'baz':2}

@defaultArgs(defaults)
def func(**kwargs):
    print kwargs  # args accessible via the kwargs dict 
```

结果：

```
func()  # prints {'baz': 2, 'foo': 0, 'bar': 1}
func(foo=2)  # prints {'baz': 2, 'foo': 2, 'bar': 1}

params = {'bar':1000, 'hello':'world'}
func(**params)  # prints {'baz': 2, 'foo': 0, 'bar': 1000, 'hello': 'world'} 
```

请注意，您将无法使用位置参数：

```
func(1, 2, 3)   # raises TypeError 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:09:35.090

我真的不确定你打算在这里完成什么。以下作品（某种）：

```
def func(**dct):
    pass

dct = {'foo':0, 'bar':1, 'baz':2}
func(**dct) 
```

如果它们是动态创建的`foo`，您打算如何使用`bar`或在函数中使用？`baz`如果您提供更多有关您实际尝试完成的任务的详细信息，我们可能会提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:05:54.110

我相信你想要的是`eval()` [链接](http://docs.python.org/library/functions.html#eval)

我对类似问题的回答：[https ://stackoverflow.com/a/11865190/1561176](https://stackoverflow.com/a/11865190/1561176)

# c# - Zedgraph 上的格式化工具提示

> ID：11954038
> 
> 赞同：6
> 
> 时间：2012-08-14T14:05:04.243
> 
> 标签：c#, tooltip, zedgraph

我想格式化我用来在 Zedgraph 上的 PointValueEvent 上显示图形和点信息的工具提示。

我知道如何格式化普通工具提示，但在这种情况下 zedgraph 没有工具提示属性。点值事件自动显示工具提示。

如何格式化该工具提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T16:12:48.433

有几种不同的方法可以做到这一点。

选项 1 是在设置数据时使用 PointPair 的 Tag 属性。如果 Tag 是一个字符串，它将显示为该点的工具提示。

```
PointPair pp = new PointPair(....);
pp.Tag = "This is a custom tooltip"; 
```

选项 2 是订阅图形控件的 PointValueEvent 并在您的事件处理程序中提供自定义值。

```
graph.PointValueEvent += OnPointValueRequested;
...
private string OnPointValueRequested(object sender, GraphPane pane, CurveItem curve, int pointIndex)
{
    PointPair point= curve[pointIndex];
    string tooltip = String.Format("({0}, {1})", point.X point.Y);
    return tooltip;
} 
```

还要记住，在 Vista 及更高版本上[，工具提示 CPU 使用率存在一个错误。](http://sourceforge.net/tracker/?func=detail&aid=3061209&group_id=114675&atid=669144)如果您还没有这样做，您可能需要修补您的 ZedGraph 副本来修复它。

# javascript - 将 JSP 变量输出到 JavaScript 片段

> ID：11954045
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:05:11.550
> 
> 标签：javascript, jsp, jstl

我的循环中有一个`varStatus`，我想将它发送到 js 中的一个函数。

这就是我所拥有的：

```
onkeyup="clickableButton(this.value, ${newCommentStatus.index})" 
```

但是`${newCommentStatus.index}`是未定义的。我怎么能发送这个值？

提前感谢ins

**编辑**

```
 <c:forEach items="${threadviewModel.emailToShowList}" var="row" varStatus="status">
    <form:form modelAttribute="commentFieldModel">
<span class="commentInput"><form:input id="commentInput" type="text" path="commentText" size="90" value=" " onkeyup="clickableButton(this.value, ${status.index})"/></span>
                                        <div><input disabled="true" type="submit" id="save-${status.index}" name="_eventId_addComment" value="Save"/></div>
                                    </div>
                            </form:form> 
```

Javascript代码

```
function clickableButton(text, id) {
            if (text.length > 0)
                document.getElementById("save-" + id).disabled = false;
            else
                document.getElementById("save-" + id).disabled = true;
        }
        ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:11:45.060

您`<c:forEach>`将变量称为“status”，而不是“newCommentStatus”。

事件处理程序如下所示：

```
... onkeyup="clickableButton(this.value, ${status.index})" ... 
```

此外，您可以清理 JavaScript：

```
 function clickableButton(text, id) {
        document.getElementById("save-" + id).disabled = text.length <= 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:59:30.033

换个方式试试

`onkeyup="clickableButton(this.value, '${newCommentStatus.index}')"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T14:09:30.533

${newCommentStatus.index} 不是标准的 JavaScript。
我怀疑您使用的是 JQuery 或类似的东西：尝试 ${newCommentStatus}.index
这将适用于一些假设。

# javascript - 检测点击 childNode 并发送槽事件处理程序

> ID：11954047
> 
> 赞同：0
> 
> 时间：2012-08-14T14:05:14.310
> 
> 标签：javascript

我有这个事件处理程序：

```
//Event Handler
var bindEvt = (function () {
    "use strict";
    if (document.addEventListener) {
        return function (element, event, handler) {
            element.addEventListener(event, handler, false);
        };
    }
    return function (element, event, handler) {
        element.attachEvent('on' + event, handler);
    };
}()); 
```

此代码循环遍历菜单元素并检测是否单击了一个。

```
// Ajax article loading
function test(){var menuitem = document.getElementsByTagName('nav')[0].childNodes;
    for(var i= 0; i < menuitem.length; i++){
        bindEvt(menuitem[i], "click", loadajax);
    }
};

function loadajax () {
    alert('yo')
}
bindEvt(window, "load", test); 
```

现在我的问题是我想`loadajax()`知道点击了哪个项目，但我似乎无法弄清楚如何从 to 传递`test()`参数`loadajax()`。

我该怎么做？我尝试了几件事，但似乎总是破坏脚本:(

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:08:45.597

如果您只想知道单击了哪个对象，那么您可以`this`在事件处理程序中使用 的值。您不必将其传递给 loadajax。事件系统将设置`this`为导致事件的对象。也可以参考`event.target`。

```
function loadajax (event) {
    event = event || window.event;   // deal with old IE

    // `this` points to the object that caused the event

    alert('yo');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:14:02.123

```
function loadajax (X) {
console.log(X);
alert('yo')
} 
```

X 应该是 Event 类型并且有很多很好的细节：

```
interface Event {

  // PhaseType
  const unsigned short      CAPTURING_PHASE                = 1;
  const unsigned short      AT_TARGET                      = 2;
  const unsigned short      BUBBLING_PHASE                 = 3;

  readonly attribute DOMString        type;
  readonly attribute EventTarget      target;
  readonly attribute EventTarget      currentTarget;
  readonly attribute unsigned short   eventPhase;
  readonly attribute boolean          bubbles;
  readonly attribute boolean          cancelable;
  readonly attribute DOMTimeStamp     timeStamp;
  void               stopPropagation();
  void               preventDefault();
  void               initEvent(in DOMString eventTypeArg, 
                               in boolean canBubbleArg, 
                               in boolean cancelableArg);
}; 
```

[http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event)

# asp.net - ClientGroupHeaderTemplate 不是唯一的，并且在每一行中重复相同的标题

> ID：11954050
> 
> 赞同：0
> 
> 时间：2012-08-14T14:05:20.513
> 
> 标签：asp.net, asp.net-mvc-3, telerik, telerik-grid, telerik-mvc

```
columns.Bound(model => model.Item).Filterable(false).Title("")
           .ClientGroupHeaderTemplate("<span> Item: <#= Item #> </span>"); 
```

如何从项目中获取列值以唯一显示。也就是说，我不需要每次都显示“项目”值。如果显示一次，则不应再次显示，因为该任务主要用于将详细项目分组到“项目”标题中。 **“项目”标题下的“项目”应该只有 1 个“项目”标题，而不是每一行（每个“项目”）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:00:41.077

您是否尝试添加 Hidden(true) ？

```
columns.Bound(model => model.CategoryItem).Hidden(true).Filterable(false).Title("") 
       .ClientGroupHeaderTemplate("<span> CategoryItem: <#= CategoryItem #> </span>"); 
```

# c - 在 Mac OS X 上编译 ncurses 应用程序时出错

> ID：11954057
> 
> 赞同：4
> 
> 时间：2012-08-14T14:05:47.527
> 
> 标签：c, macos, compilation, ncurses, curses

我正在尝试在 Mac OS X 10.6.8 上编译基于 ncurses 的应用程序，但出现此错误。

```
Undefined symbols for architecture x86_64:
  "_initscr", referenced from:
      _main in ccf8K8YG.o
  "_printw", referenced from:
      _main in ccf8K8YG.o
  "_stdscr", referenced from:
      _main in ccf8K8YG.o
  "_wrefresh", referenced from:
      _main in ccf8K8YG.o
  "_wgetch", referenced from:
      _main in ccf8K8YG.o
  "_endwin", referenced from:
      _main in ccf8K8YG.o 
```

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-05T19:02:39.827

我很确定这是因为您`ncurses`在编译时没有包含库。

尝试添加：

```
-lncurses 
```

编译时。

例如（对于 C++）：

```
g++ -o hello main.cpp -lncurses 
```

或使用 gcc（对于 C）：

```
gcc -o hello main.cpp -lncurses 
```

这个简短的命令将编译并执行：

```
gcc -o hello main.cpp -lncurses && ./hello 
```

这是我的问题，我希望这对某人有所帮助。

# javascript - 在 Adob e Acrobat X Pro 中使用 javascript 导出页面

> ID：11954064
> 
> 赞同：2
> 
> 时间：2012-08-14T14:06:11.293
> 
> 标签：javascript, pdf, acrobat

谢谢您的帮助。我正在尝试使用 Adob​​e Acrobat X Pro 从 PDF 中提取页面。我有一个包含大约 300 个 PDF 的文件夹。我只需要每个文件的最后三页。

我在 Adob​​e Acrobat 中使用以下行（[在本教程中](http://acrobatusers.com/tutorials/extracting-pages-pdf-acrobat-javascript)找到）作为指导操作。

```
this.extractPages(this.numPages-3,this.numPages-1,) 
```

引导操作允许用户对文件夹中的所有文件执行操作。此行生成最后三页，但不保存文件。它会打开一个临时 PDF 文件并转到文件夹中的下一个文件。在十几个文件之后，由于创建了所有临时文件，我的计算机冻结了。我需要一种方法来保存和关闭每个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:14:00.620

您需要指定保存新文档的路径，这就是`cPath`参数的`Doc.extractPages()`作用：

```
this.extractPages({
    nStart: this.numPages-3, 
    cPath: '/C/some/dir/' + this.documentFileName
});
this.closeDoc(false); // to close the current document 
```

请参阅：[Acrobat JS API 参考](http://livedocs.adobe.com/acrobat_sdk/10/Acrobat10_HTMLHelp/wwhelp/wwhimpl/js/html/wwhelp.htm)

# c# - XML 序列化和反序列化 - 节点

> ID：11954070
> 
> 赞同：-3
> 
> 时间：2012-08-14T14:06:30.277
> 
> 标签：c#, xml, xml-serialization

我有一个关于 XML 序列化和反序列化的问题。序列化类是否必须与 XML 完全相同。顺序可以不一样吗？

如果 XML 的节点比类少一个节点会怎样？

如果我有许多具有不同 XML 结构的不同 XML，我如何在序列化类中处理这种不同的结构？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:23.030

类属性实际上并没有顺序，因此 XML 中节点的顺序没有任何特殊含义——它可以是任何东西。

如果 XML 中缺少一个节点，则不会设置相应的类属性 - 因此它将具有其默认值，或者类构造函数将其设置为的任何值。

不同的 XML 结构可以由同一个类处理，但有一些限制——没有具体的例子很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:11:43.013

顺序无关紧要，只要您的属性、字段等与 xml 节点正确匹配即可。

此外，如果 xml 少一个节点，那么该属性将不会获得反序列化的值，仅此而已。

结构很重要，但不是顺序。这是一个相当广泛的问题，但我建议您阅读它并查看一些示例。

看看这些让你开始吧。

[http://msdn.microsoft.com/en-us/library/tz8csy73.aspx](http://msdn.microsoft.com/en-us/library/tz8csy73.aspx)

[http://msdn.microsoft.com/en-us/library/58a18dwa(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/58a18dwa(v=vs.100).aspx)

# php - PHP 启动 Windows 应用程序

> ID：11954071
> 
> 赞同：1
> 
> 时间：2012-08-14T14:06:31.263
> 
> 标签：php, windows, xampp

我想启动一个 bat 文件或 exe

我试过

```
system("C:\\PATH\\TO\\FOLDER\\script.bat")
system("CMD.EXE C:\\PATH\\TO\\FOLDER\\script.bat")
system("C:\\PATH\\TO\\FOLDER\\exefile.exe /S nameOfFileToCreate.txt")
system("CMD.EXE C:\\PATH\\TO\\FOLDER\\exefile.exe /S nameOfFileToCreate.txt")
system("START C:\\PATH\\TO\\FOLDER\\script.bat")
system("START C:\\PATH\\TO\\FOLDER\\exefile.exe /S nameOfFileToCreate.txt") 
```

使用 START，我收到此错误消息。其他尝试导致页面永远加载！

```
Fatal error: Uncaught exception 'com_exception' with message '<b>Source:</b> WshShell.Exec<br/><b>Description:</b> The system cannot find the file specified. ' in C:\xampp\htdocs\upload.php:95 Stack trace: #0 C:\xampp\htdocs\upload.php(95): com->Exec('START C:\PROGRA...') #1 {main} thrown in C:\xampp\htdocs\upload.php on line 95 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:10:06.667

试试执行功能：

[http://us2.php.net/function.exec](http://us2.php.net/function.exec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:47:49.630

这没有用。无论出于何种原因，我都无法启动该应用程序。我决定创建一个简单的 VBS 脚本，并使用 PHP 作为临时解决方案重新启动 PC

# ios - iOS：如何让我的块在不相互中断的情况下执行？

> ID：11954074
> 
> 赞同：0
> 
> 时间：2012-08-14T14:06:44.227
> 
> 标签：ios, ios5, xcode4, queue, grand-central-dispatch

我有一个我正在尝试创建的过程，我在其中下载不同的 xml 文件并从网站解析它们。目前，我可以使用...让它们全部工作

```
dispatch_async(dispatch_get_current_queue(),^ { [self updatePersons]; });
dispatch_async(dispatch_get_current_queue(),^ { [self updatePlaces]; });
dispatch_async(dispatch_get_current_queue(),^ { [self updatePositions]; });
dispatch_async(dispatch_get_current_queue(),^ { [self updateContacts]; }); 
```

这会锁定主线程，因为我正在使用`dispatch_get_current_queue`. 我怎样才能在不中断对方的情况下执行这些操作，在尝试以下方法时似乎就是这种情况。

```
dispatch_async(dispatch_get_global_queue(0,0),^ { [self updatePersons]; }); 
```

我正在使用的代码的完整版本如下，但是根据我的日志输出会发生什么是它们同时执行（如果我理解一切正确，我得到的目的是）；但是，它们的代码从未真正完成......我无法通过日志输出判断是否所有内容都被解析，并且主屏幕保持冻结状态。日志只显示它应该显示的部分日志......似乎被其他进程的`NSLog`消息打断了。

```
dispatch_async(dispatch_get_global_queue(0,0),^ { [self updatePersons]; });
dispatch_async(dispatch_get_global_queue(0,0),^ { [self updatePlaces]; });
dispatch_async(dispatch_get_global_queue(0,0),^ { [self updatePositions]; });
dispatch_async(dispatch_get_global_queue(0,0),^ { [self updateContacts]; });

dispatch_async(dispatch_get_global_queue(-2,0),^ { 

            dispatch_async(dispatch_get_main_queue(),^  {[self setBottomBarToUpdated]; });
 }); 
```

我正在尝试为应用程序创建一种通过上述每个功能下拉信息的方式，同时通过底部栏上的标签在执行时更新用户的进度。通过在四个函数中的每一个中使用以下代码，我似乎可以正常更新文本...

```
dispatch_async(dispatch_get_main_queue(),^ {
         [self setBottomBarToUpdating:@"Updating Places..."];
}); 
```

如果有人可以为正确使用队列的方法提供帮助，以便我的应用程序不会锁定，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:30:14.307

如果您创建自己的私有并发调度队列，那么您可以使用“障碍块”。只有当所有其他先前提交的块都完成时，才会执行此块。

```
dispatch_queue_t queue = dispatch_queue_create("myQueue", DISPATCH_QUEUE_CONCURRENT);

// These blocks are executed concurrently:
dispatch_async(queue, ^ { [self updatePersons]; });
dispatch_async(queue, ^ { [self updatePlaces]; });
// ...

dispatch_barrier_async(queue, ^ {
    // This will be executed when all previous blocks are finished.
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdated];
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:44:00.650

听起来您希望它们按顺序执行，并随着它们的进展更新 UI。如果是这样，您可以使用串行队列：

```
dispatch_queue_t serialQueue = dispatch_queue_create("com.company.MyQueue", NULL);

dispatch_async(serialQueue,^ { 
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdating:@"Updating Persons..."];
    }
    [self updatePersons]; 
});
dispatch_async(serialQueue,^ { 
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdating:@"Updating Places..."];
    }
    [self updatePlaces]; 
});
dispatch_async(serialQueue,^ { 
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdating:@"Updating Positions..."];
    }
    [self updatePositions]; 
});
dispatch_async(serialQueue,^ { 
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdating:@"Updating Contacts..."];
    }
    [self updateContacts]; 
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setBottomBarToUpdating:@"Finished updating"];
    }
});

dispatch_release(serialQueue); 
```

# facebook-graph-api - 从命令行上传照片到相册

> ID：11954077
> 
> 赞同：0
> 
> 时间：2012-08-14T14:06:55.287
> 
> 标签：facebook-graph-api, permissions

我编写了一个应用程序，它能够从命令行向特定用户帐户写入帖子。这具有所需的权限，正在成功发布带有位置和地点信息的消息。

我的下一步是将图像上传到用户帐户，但问题是，我收到以下错误：

**请求此资源需要用户访问令牌。**

现在，执行 API 发布的脚本不再从浏览器运行，而是作为使用 PHP 实现的 Linux 服务守护程序运行。该脚本包含一个游戏循环，在一天中的特定时间发布消息并将照片上传到参与者帐户，模拟他们的个人资料正在参加的假期。

因此，当从我的应用程序脚本调用**BaseFacebook::getUser**时，我得到的结果为 0，这意味着**BaseFacebook::getAccessToken**将返回**应用程序**访问令牌，而不是**用户**访问令牌。

我也检查了，注意到受保护的方法**BaseFacebook::getUserAccessToken**没有返回有效的令牌，因为命令行应用程序没有会话，并且它必须在游戏循环期间连续发布到不同的用户帐户。

正如我所提到的，我可以发布帖子，甚至可以将地点附加到我的帖子中，但是有没有一种方法可以在不需要用户访问令牌的情况下将照片上传到不同的用户帐户？

我知道我可以使用**offline_access**，但这在 2012 年 10 月 3 日被弃用，那时我们的客户应用程序已经开始运行。

然而，我们应用程序的玩家/用户确实会不时访问应用程序，那么是否可以使用浏览器中的令牌，将其存储在我们的数据库中，然后从命令行应用程序中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:20:42.367

> 但是，我们应用程序的玩家/用户确实会不时访问应用程序，那么是否可以使用浏览器中的令牌，将其存储在我们的数据库中，然后从命令行应用程序中使用它？

这正是要走的路。

并且本文档描述了如何处理这些令牌，如何获得长期存在的令牌等 – [https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

而且[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)也是值得一读的。

# c - 来自 DIR 的统计文件 *

> ID：11954081
> 
> 赞同：2
> 
> 时间：2012-08-14T14:07:08.397
> 
> 标签：c, linux

我编写了一个函数，它接受`DIR *`作为参数并列出其中的文件（带`readdir`函数）

另外，我只想能够`stat`将`readdir`. 目前尚不清楚`DIR *`指向哪里，所以有没有办法从中获取目录的完整路径，`DIR *`或者有没有其他方法可以用来`stat`归档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:18:05.963

您可以使用`dirfd()`, 和许多其他答案一样，然后使用`readdir()`call function读取每个条目`fstatat()`：

```
int fstatat(int dirfd, const char *pathname, struct stat *buf, int flags); 
```

我认为这个相对晦涩的功能正是您所需要的。

或者，您可以调用`openat()`传入目录的 fd 和从目录读取的路径名。然后执行 a`fstat()`以获取文件统计信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:10:34.900

我不这么认为，但是您应该能够使用`[dirfd()](http://linux.die.net/man/3/dirfd)`获取与 对应的文件描述符`DIR *`，并使用它可以调用`[fchdir()](http://linux.die.net/man/2/fchdir)`更改到该目录。

然后返回的名称`readdir()`成为您当前目录的本地名称，您可以直接使用`stat()`它们。

**更新**：澄清一下，这与调用不同*，*`chroot()`它只是对进程当前目录的普通更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:26:44.083

基于@unwind 答案，并且由于您使用的是 linux：

*   调用`dirfd()`获取目录的文件描述符
*   获取您的 pid 使用`getpid()`
*   `/proc/<pid>/fd/<dirfd>`使用阅读链接`readlink()`。它将按名称引用您的目录！

# objective-c - 在 iOS 5 中使用 2 行单元格文本时如何获取省略号

> ID：11954082
> 
> 赞同：1
> 
> 时间：2012-08-14T14:07:07.843
> 
> 标签：objective-c, ios5, uitableview

如果 textlabel 文本超过 2 行，我需要怎么做才能获得省略号？我已经在下面的屏幕截图中指出了问题，然后是设置 textLabel 属性的代码。感谢您的关注！

![在此处输入图像描述](../Images/20396b80232eb03374d750a1d0a80c47.png)

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

      //...          

      cell.textLabel.font = [UIFont boldSystemFontOfSize:16];
      cell.textLabel.numberOfLines = 2;
      cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
      cell.textLabel.text = [self.selectedSubject subject];
      cell.detailTextLabel.text = @"May 21st, 2012";

      return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:18:41.373

你想用

```
cell.textLabel.lineBreakMode = UILineBreakModeTailTruncation; 
```

代替

```
cell.textLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

UILineBreakModeWordWrap 仅在 numberOfLines 等于 1 时有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:18:34.730

改变这个

```
cell.textLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

至

```
cell.textLabel.lineBreakMode = UILineBreakModeTailTruncation; 
```

# java - 我怎样才能得到错误信息？

> ID：11954084
> 
> 赞同：1
> 
> 时间：2012-08-14T14:07:16.713
> 
> 标签：java, oracle, database-connection, try-catch

我想用java连接oracle dabase。我使用这段代码：

```
url = statement;
try {
    stmt = connection.createStatement();
    rset = stmt.executeQuery(url);
} catch (Exception e) {
    // what can I put here?
} 
```

当我的声明在 oracle 中导致错误时，我想收到错误消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:11:14.493

您可以使用 e.getMessage(); 我相信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:12:09.363

一个简单的谷歌搜索显示：

> JDBC 异常处理与 Java Excpetion 处理非常相似，但对于 JDBC，您将处理的最常见的异常是 java.sql.SQLException。

[在这里](http://www.tutorialspoint.com/jdbc/jdbc-exceptions.htm)查看他们的示例

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:20:27.980

尝试使用这段代码：

```
e.getMessage(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T14:27:38.170

尝试使用`e.getLocalizedMessage()`

# function - 在布隆过滤器中使用哪些哈希函数

> ID：11954086
> 
> 赞同：25
> 
> 时间：2012-08-14T14:07:26.323
> 
> 标签：function, hash, bloom-filter

我有以下关于为 Bloom 过滤器选择哈希函数的问题：

*   使用哪些功能？

在几乎所有文档/论文中，您都可以读到**Bloom 过滤器**中使用的**哈希函数**应该是独立且均匀分布的。

 **我知道这是什么意思（独立且均匀分布），但我很难找到一个论据或讨论，哪些散列函数满足这些要求，因此是合适的。在很多帖子中，我读到了有关使用**FNV**或**Murmur 哈希函数**的建议，但不知道为什么（或至少没有证明）它们是合适的。

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-10-31T14:08:20.620

在构建 Java Bloom 过滤器库时，我问过自己同样的问题。请参阅[Github 自述文件](https://github.com/Baqend/Orestes-Bloomfilter#hash-functions)，详细了解我对 Bloom 过滤器的哈希函数的分析。

我从两个角度看待这个问题：

*   计算速度有多快？
*   输出分布有多均匀？

速度可以很容易地通过随机输入的基准来衡量。均匀性有点困难，需要一些统计数据。使用卡方拟合优度测试，我测量了哈希值分布与均匀分布的相似程度。

**结果是：**

*   使用**Murmur3**在速度和均匀性之间取得最佳平衡。不要使用 Murmur2，因为它对于以小增量变化的输入并不统一*。*
*   使用 SHA-256 之类的**加密哈希函数**以获得最佳一致性。
*   应用[**Kirsch-Mitzenmacher-Optimization**](https://www.eecs.harvard.edu/~michaelm/postscripts/tr-02-05.pdf)仅计算 2 而不是 k 哈希函数 ( *hash_i = hash1 + ix hash2* )。

如果您的实现使用的是 Java，我建议您使用我们的 Bloom 过滤器哈希库。它有据可查并经过全面测试。有关详细信息，包括不同哈希函数的基准结果及其根据卡方测试的不一致性，请参阅[repo 的 Github 自述](https://github.com/Baqend/Orestes-Bloomfilter#hash-functions)文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T04:00:01.687

[哈希函数](http://bretmulvey.com/hash/)应该为您提供图形证明，说明为什么 FNV 会是一个糟糕的选择，以及为什么 Murmur2 或[Bob Jenkins 的哈希](http://burtleburtle.net/bob/hash/doobs.html)是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T22:07:19.180

我认为一个合理的选择是多个 CRC 哈希。我假设，如果你想要多个 n 位哈希值，那么对于具有布尔域系数的多项式，有多个 n+1 次的素数多项式。但我不知道找到这些多项式的过程。

另一种可能性是使用多个模哈希。布隆过滤器位数组的大小必须是最大模值。但我认为，要使其正常工作，模值必须是大于 10 的素数的乘积，并且彼此互为素数。并且从最小到最大模量值的范围必须尽可能小。我不知道找到这样的值的方法。我已经编写了一些开源 C++ 代码来快速计算余数： [https ://github.com/wkaras/C-plus-plus-intrusive-container-templates/blob/master/modulus_hash.h](https://github.com/wkaras/C-plus-plus-intrusive-container-templates/blob/master/modulus_hash.h)**

# csv - 如何从嵌入的 Raphael 数据集中提取数据到 CSV？

> ID：11954091
> 
> 赞同：2
> 
> 时间：2012-08-14T14:07:38.907
> 
> 标签：csv, raphael

尝试从“2012 年 1 月至今”的[Google Politics Insights网页中为 Mitt Romney 和 Barack Obama 提取以下数据集的数据：](http://gpolinsights.appspot.com/?hl=en&ed=us)

*   **基于数量的**搜索趋势****
***   **Google 新闻提及**文章和博客文章中的提及*   **YouTube 视频观看**次数 来自候选频道的观看次数**

 **对于视觉示例，这就是我的意思：

![在此处输入图像描述](../Images/e6335eafbc3b2f68f1eb1de2c5153d51.png)

使用 Firebug，我能够弄清楚数据是以 Raphael 2.1.0 可读的格式存储的；查看了数据集，没有什么让我觉得将数据转换为 CSV 的简单方法。

**如何将每位总统候选人的每个图表的数据转换为包含“搜索趋势”、“Google 新闻提及”和“YouTube 视频观看次数”表格的 CSV，按最小时间增量细分，结果在图表是否设置为“0.0 到 1.0”的值？**（注意：“0.0 到 1.0”的原因是图表似乎没有给出体积信息，因此体积与图表本身的高度有关。）

或者，如果 CSV 中的所有三个数据集都有另一个来源，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:17:41.333

首先要做的是找出数据来自哪里，所以我在我的开发者控制台中查找了网络流量，很快就找到了：[**数据在这里存储为json**](http://www.google.com/elections/data/trends/us/?hl=en&callback=jQuery172033727501635439694_1345014317767&_=1345014317916)。

现在您已经获得了每个候选人的大量数据。我不确切知道这些数字之间的关系，但它们肯定用于在图表中进行计算。我发现在[`main.js`](http://gpolinsights.appspot.com/static/js/main.js)第 392 行的位置，他们用这个表达式计算数据：

```
Math.log(dataPoints[i][j] * 100.0) / Math.log(logScaleBase); 
```

我的猜测是：没有对数和一点指数计算，你应该得到正确的结果。**

# python - 获取列表列表的单个元素

> ID：11954092
> 
> 赞同：0
> 
> 时间：2012-08-14T14:07:43.973
> 
> 标签：python

> **可能重复：**
> [在 Python 中展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

我在 python 中有一个列表，比如

```
l=[1,2,[3,4,5],[[4,2,4],[4,7,8]]] 
```

我想使用一个集合来获取所有唯一值，但这失败了

```
set(l)

TypeError: unhashable type: 'list' 
```

所以有人帮忙吗？想要使用 set 和 list of list 等 THX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:14:29.410

您需要先“展开”或展平嵌套结构，然后才能将其放入集合中。您可以为此使用生成器来保持对大型列表的效率：

```
def flatten(lst):
    for element in lst:
        if isinstance(element, list):
            for subelement in flatten(element):
                yield subelement
        else:
            yield element 
```

然后使用列表中的那个生成器`l`来创建一个集合：

```
set(flatten(l)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:14:55.557

这种方法怎么样，在对其应用 set 操作之前先展平列表。

```
import collections

def flat_list(tlist):
   if isinstance(tlist, collections.Iterable):
      return [j for i in tlist for j in flat_list(i)]
   else:
      return [tlist] 
```

然后：

```
myl=[1,2,[3,4,5],[[4,2,4],[4,7,8]]]

print set(flat_list(myl)) 
```

给出：

```
set([1, 2, 3, 4, 5, 7, 8]) 
```

@MartijnPieters 使用生成器的方法比这种基于[列表理解的方法更有效地处理非常](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)*大*的列表。

# c# - 时间：2019-01-10 标签：c#getmethodforminheritedclass

> ID：11954093
> 
> 赞同：0
> 
> 时间：2012-08-14T14:07:45.210
> 
> 标签：c#, class, methods

我们有课程：

```
 class A
    {

    }

    class B:A
    {
      public void metod(){}
    } 
```

和

```
 static class C
    {
        static void met(B clas)
        {
            A test = clas as B;
            // is it any way to get method "metod " from B via test?
        }
    } 
```

我知道这看起来很废话，但想法是正确的，我不能在 C 类中创建 B 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:13:17.567

孩子可以通过`base`. 例如

```
base.SomeMethod(); 
```

因为当继承孩子知道谁是父母并且父类成为基础

但是没有关键字 like`child`因为 base 不知道哪个类会继承它。

一个孩子可以有一个单亲，但一个父母可以有一个或多个孩子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:13:44.443

您需要像这样将其转换回来，然后才能访问

```
Base derivedInstance = new Derived();
Derived child= (Derived)derivedInstance; 
child.Callmethod(); 
```

简而言之

```
 A test = clas as B;
   ((B)test).method(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:12:47.843

您可以将 test 转换为 B，或者首先使用声明为 B 的变量：

```
((B)test).metod(); 
```

或者

```
clas.metod(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:14:26.003

```
 class A
    {
      public virtual void method(){}
    }
    class B:A
    {
      public override void method(){}
    }
 and 
    static class C
    {
    static void met(B clas)
      {
        A test = clas as B;
        test.method(); //this may be what you want?
       }
    } 
```

# python - python - 为什么在所有线程加入之前主线程打印结束行

> ID：11954094
> 
> 赞同：1
> 
> 时间：2012-08-14T14:07:49.113
> 
> 标签：python

我打电话加入，所以我不明白为什么在所有线程完成之前主线程打印“结束”。输出是：

```
End
Thread
Thread 
```

附加相关问题：只是为了确定if is set daemon flag 为true，是不是意味着调用join没有意义（因为当还有daemon线程时main可以结束）？

```
#!/usr/bin/env python
import sys
import threading
from time import sleep

num_worker_threads = 2                  
threads = []   

def worker():
    sleep(1)
    print 'Thread'

for i in range(num_worker_threads):
     t = threading.Thread(target=worker)
     threads.append(t)
     t.start()
     t.join

print 'End' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:09:11.703

因为你实际上并没有调用 join。代替：

```
t.join 
```

和：

```
t.join() 
```

关键是`t.join`表达式返回`bound method`对象，加上括号使表达式成为方法调用。

加入线程只对用户线程很重要，守护线程不会阻止主线程完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:10:58.347

您缺少 . 之后的括号`t.join`。应该是`t.join()`。

# web-config - TFS 构建网站部署包 web.config 转换不起作用

> ID：11954095
> 
> 赞同：1
> 
> 时间：2012-08-14T14:07:51.837
> 
> 标签：web-config, transformation

所以我尝试使用 TFS Build 为我的 3 个环境（ST、UAT、Prod）生成部署包。这就是我在本地成功生成包的方法。 [http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/74bb16ab-5fe6-4c00-951b-666afd639864/](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/74bb16ab-5fe6-4c00-951b-666afd639864/)

所以我的本地机器将生成 acive 配置的包，一切都很好。这是我的构建定义： /p:DeployOnBuild=true;DeployTarget=Package 我在要构建的项目中运行我的解决方案文件和 Web 部署项目。

它使用 ST、UAT 和 PROD 创建相应的文件夹。在其中的每一个中都有一个 _PublishedWebsites 文件夹。此文件夹有 2 个文件夹。

1) MydeploymentProject - 它包含转换后的 web.config 2) MyDeploymentProject_Package - 包含 Package 文件夹内容以及 zip 文件和 setparameters 文件。在这里，一切都没有改变。但是，如果我检查 TFS 服务器上的 TempBuildDir，它确实包含转换后的配置。

当比较本地和服务器上的日志时，我发现在我的本地转换文件更新并创建包之后，而在 TFS 上，AfterBuild 目标被称为转换完成并在那里结束。

这是我的本地日志目标“WPPCopyWebApplicaitonPipelineCircularDependencyError”跳过，由于错误条件；($(WPPCopyWebApplicaitonPipelineCircularDependencyError)) 被评估为 (False)。在项目“C:\TAX-IT\Main\Source\TDDB\TDDB_deploy2”的文件“C:\Program Files\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets”中定位“ProcessItemToExcludeFromDeployment” \TDDB_deploy2.wdproj”（目标“PipelineCollectFilesPhase”取决于它）：在项目“TDDB_deploy2.wdproj”中完成构建目标“ProcessItemToExcludeFromDeployment”。在项目“C:\TAX-IT\Main\Source\TDDB\TDDB_deploy2”的文件“C:\Program Files\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets”中定位“GetProjectWebProperties” \TDDB_deploy2。

我不确定出了什么问题。我还在构建服务器上安装了 VS2010、Web 部署 2.0 和 3.0 以及 Web 部署工具。

任何人都面临过这个问题并解决了。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:32:38.340

疯狂编码器，

根据我从您的描述中收集到的信息，您已正确设置了所有内容。似乎您只是缺少“配置”参数。当您运行构建定义时，它会使用“构建的配置”参数中指定的配置。如果您想构建多个配置（就像您建议的那样），您需要定义多个配置。我的一个问题是：当您查看 TFS 构建过程的日志时，您是否看到构建了多个配置，还是只看到一个？如果您只看到一个，那么您没有定义所有配置来转换配置文件。根据您的描述，您需要在构建定义配置中看到类似的内容：

![在此处输入图像描述](../Images/e31bc25e0c1d4a548e9090fe8b93c0a9.png)

如果您不想部署到网络服务器，可以在此处停止阅读，不必继续阅读。

* * *

如果您选择使用 TFS 构建定义部署到 Web 服务器，则需要在某处拥有目标 Web 服务器，并且还需要在该服务器上安装和配置 Web Deploy v2/v3。

当您使用 TFS 构建定义进行部署时，转换发生在部署时，而不是在打包期间（部署之前）。它可能会在某处打包转换后的配置，但实际上不会转换与网站捆绑的配置。我能够让部署真正使用转换后的配置的唯一方法是当我在 MSBUILD args 中指定了一个网站时。这是我的 MSBUILD 参数的示例：

```
/p:DeployOnBuild=True /p:DeployTarget=MSDeployPublish /p:MSDeployPublishMethod=RemoteAgent /p:MsDeployServiceUrl=MyWebServer/MsDeployAgentService /p:DeployIisAppPath="MyWebsite as named in IIS"  /p:UserName=MyDomain\MyWebDeployUser /p:Password=MyWebDeployPassword 
```

如果您不希望 MSBUILD 进行实际部署（我不希望这样做，因为您的部署过程与 TFS 相关联），您可以在构建过程之后进行部署并使用[codeplex 上的 CTT 项目](http://ctt.codeplex.com)。此工具执行与 MSBUILD 完全相同的转换，但它还包括参数化设置的功能，因此您可以定义环境类（例如，3 个 QA 环境、2 个暂存环境等）并仍然使用该类的相应转换的环境。

# sql - 如何从月份中计算月末日期 - SQL

> ID：11954096
> 
> 赞同：0
> 
> 时间：2012-08-14T14:07:51.643
> 
> 标签：sql, sql-server-2008, tsql

我有一列返回月份的整数，即 7 月份的整数。我想做的是取这个 7 并返回月底，即 2012 年 7 月 31 日，是否有允许我在 SQL 中执行此操作的函数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:12:01.640

像这样的东西怎么样：

```
DECLARE @Month int
DECLARE @Year int

set @Month = 7
set @Year = datepart(year,getdate())

select DATEADD(day,-1,DATEADD(month,@Month,DATEADD(year,@Year-1900,0))) 
```

结果：

```
2012-07-31 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:11:24.367

看看这个；

[http://blog.sqlauthority.com/2007/08/18/sql-server-find-last-day-of-any-month-current-previous-next/](http://blog.sqlauthority.com/2007/08/18/sql-server-find-last-day-of-any-month-current-previous-next/)

这是您感兴趣的部分；

```
SELECT DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,GETDATE()),0)) 
```

# javascript - 从另一个 javascript 文件访问 main() 函数

> ID：11954097
> 
> 赞同：1
> 
> 时间：2012-08-14T14:07:53.203
> 
> 标签：javascript

我有这个问题，我有 2 个文件 1) 包含 main() 和其他与 main() 内的主 UI 相关的东西，还有一些函数 2) 另一个文件，它使从服务器到 UI 的连接

我无法从辅助文件中找到从 main() 调用函数的任何解决方案（我知道这不是一个很好的编程设计，但我已经写了很多代码）

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:12:03.520

在 js 中，`function`s 是你的范围约束。因此，请考虑以下代码：

```
function main(){
    function callMom(){
        alert('hi mom!');
    }
}

function goAboutYourDay(){
    brushTeeth(); // works
    callMom(); // wont work
}

function brushTeeth(){
    alert('brush brush brush');
} 
```

鉴于您的情况，您可能会考虑返回一些 main 函数，如下所示：

```
function main(){
    var callMom = function(){ 
        alert('hi mom!');
    }

    return {
        callMommy: callMom
    };
}

function goAboutYourDay(){
    var m = main();
    m.callMommy(); 
} 
```

以下是使用原型的方法：

```
var Main = function(){
    this.message = "Will you send some candy?";
};

Main.prototype.callMom = function(){
    alert('Hi Mom! ' + this.message);
};

function otherFile(){
    // you could create a new instance of Main if there isn't one available to you here
    var main = new Main(); 
    main.callMom();    
}

otherFile();
​ 
```

这里有一些 jsfiddles，以便您可以使用这些示例：
[http://jsfiddle.net/lbstr/A3dSB/](http://jsfiddle.net/lbstr/A3dSB/)
[http://jsfiddle.net/lbstr/FyDAL/](http://jsfiddle.net/lbstr/FyDAL/)
[http://jsfiddle.net/lbstr/2TLu2/](http://jsfiddle.net/lbstr/2TLu2/)

# sharepoint - Sharepoint 工作流 - 条件重定向

> ID：11954100
> 
> 赞同：1
> 
> 时间：2012-08-14T14:08:00.560
> 
> 标签：sharepoint, workflow

我创建了一个工作流，允许员工通过工作流启动表单填写列表项中的空白字段。

很有可能多个员工可能会同时尝试在同一个列表项中输入信息，所以我想使用我的工作流程来尝试捕捉它，这样人们就不会互相覆盖。但是，我不确定如何做最后一部分....

如果字段为空，请执行工作流程并继续访问 SourceURL（感谢页面）；[知道了]

否则（如果字段不为空），请告知该项目已填写，并选择另一个。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-22T15:00:34.913

SharePoint 自动进行并发检查，如果列表项已被其他人更新，则将阻止其他人更新该列表项。这与工作流程无关。

# asp.net-mvc-3 - 在 Windows Azure Web 角色中禁用/关闭 URL 重写模块

> ID：11954103
> 
> 赞同：0
> 
> 时间：2012-08-14T14:08:08.413
> 
> 标签：asp.net-mvc-3, azure, azure-web-roles

我们正在使用 Windows Azure Web 角色来托管我们的 MVC 3 应用程序。从这里关于 SO 的许多与性能相关的问题中，我看到 URL Rewrite 模块可以对 MVC 3 应用程序产生性能影响，即使在不使用时也是如此。

话虽如此，web.config 或 ServiceDefinition 文件中是否有办法禁用或删除 Azure 上的 URL 重写模块？我考虑过的一种方法是在启动时使用 .cmd 文件，类似于我们用来延长应用程序池超时和回收期的方法，但找不到禁用模块的命令行方法。

[在 Azure Web 角色上默认启用 URL 重写](http://msdn.microsoft.com/en-us/library/dd573358.aspx)

[URL重写对服务器的影响](http://bartwullems.blogspot.com/2011/09/aspnet-mvc-performance-tips.html)

[在 Azure 上增加应用程序池超时的方法](http://blog.smarx.com/posts/controlling-application-pool-idle-timeouts-in-windows-azure)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:18:24.550

您使用的是哪个版本的 SDK？默认情况下不安装 1.3 及更高版本。[请参阅此处](http://msdn.microsoft.com/en-us/library/gg465715.aspx#IIS)的文档：

> 如果您希望使用 IIS URL 重写模块，**您必须安装它**并配置您的重写规则。有关详细信息，请参阅 URL 重写模块。

**更新：**

我已经仔细检查过，似乎 URL Rewrite 2 仍然安装在 Web 角色上（我使用的是 1.7 SDK）。要卸载 URL Rewrite，请创建执行以下操作的启动任务（提升的）：

```
wmic product where name="IIS URL Rewrite Module 2" call uninstall 
```

# android - SQLite rawQuery() 没有正确更新元素

> ID：11954105
> 
> 赞同：0
> 
> 时间：2012-08-14T14:08:15.757
> 
> 标签：android, sqlite

在 Android 上，我`rawQuery()`用来针对我的一张表运行此查询：

```
UPDATE Icons SET position = position - 1 WHERE position <= 4 AND position > 1 
```

当我之后在 ADB 中查看数据库时，我看到的结果如下所示，其中第二列是位置列：

```
0|0
1|4
2|2
3|3
4|4
5|5
6|6
7|7
8|8
9|9
10|10
11|11
12|12
13|13
14|14 
```

当我在 ADB 中运行相同的查询时，所有行都正确更新，而不仅仅是一个

```
0|0
1|3
2|1
3|2
4|3
5|5
6|6
7|7
8|8
9|9
10|10
11|11
12|12
13|13
14|14 
```

任何想法为什么会发生这种情况或我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:18:45.820

rawQuery 不支持更新，请改用 execSQL

# c# - 从 DateTime 值中删除正斜杠、冒号和 AM/PM

> ID：11954106
> 
> 赞同：1
> 
> 时间：2012-08-14T14:08:21.777
> 
> 标签：c#, datetime, replace

```
txtTest.text = DateTime.Now.ToString(); 
```

结果文本框：

2012 年 8 月 14 日上午 10:06:48

让它看起来像这样的最有效方法是什么？

8142012100648

我知道替换/删除功能，但我认为必须有一种更简单的方法来做到这一点。

顺便说一句，这样做的目的是生成唯一的文件名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:10:04.510

> 让它看起来像这样的最有效方法是什么？

`ToString`没有格式说明符就不能调用...

```
txtTest.text = DateTime.Now.ToString("MdyyyyHHmmss", 
                                     CultureInfo.InvariantCulture); 
```

不过，我强烈建议*不要*使用这种格式 - “1112012”是 1 月 11 日还是 11 月 1 日？

我建议使用 ISO-8601 样式格式通常会更好：“yyyyMMddTHHmmss”。

这将是明确的，也是可排序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:11:06.440

```
txtTest.Text = DateTime.Now.ToString("ddMMyyyyhhmmss"); 
```

资料来源：[C# 中的日期 - 时间字符串格式概述](http://www.csharp-examples.net/string-format-datetime/)

这只是为了删除 AM/PM，如果您想要 24 小时符号，请检查提供的 url。

# java - Unix下的境界

> ID：11954107
> 
> 赞同：0
> 
> 时间：2012-08-14T14:08:28.850
> 
> 标签：java, jsf, glassfish, netbeans-7

首先：请原谅我的英语。这不是我的天然语言。

我对 JDBC 领域及其后果有疑问。首先，我将向您展示与此问题相关的 web.xml 部分：

```
<welcome-file-list>
    <welcome-file>user/home.xhtml</welcome-file>
</welcome-file-list>
<security-constraint>
    <display-name>userConstraint</display-name>
    <web-resource-collection>
        <web-resource-name>User-Sites</web-resource-name>
        <description>Seiten fuer den normalen User</description>
        <url-pattern>/user/*</url-pattern>
        <url-pattern>/faces/user/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description>Alle Gruppen duerfen zugreifen</description>
        <role-name>user</role-name>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>twiburealm</realm-name>
    <form-login-config>
        <form-login-page>/faces/login.xhtml</form-login-page>
        <form-error-page>/faces/loginError.xhtml</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description>Normaler Anwendungs-User</description>
    <role-name>user</role-name>
</security-role>
<security-role>
    <description>Administrator</description>
    <role-name>admin</role-name>
</security-role> 
```

如您所见，我尝试了 URL 模式的不同部分和（此处未显示）所有不同类型的欢迎页面。如果我启动应用程序，登录页面将按预期显示。当我输入无效的用户/密码组合时，会显示错误页面。但是当我输入一个 vild 组合时，我有 2 个不同的结果。

在 Windows 上，它在 Unix 上按预期工作，显示 403-Error 我没有权限

我在两个系统上都使用 jdk 7-05、GlassFish 3.1.2.2 和 JSF 2.1。JDBC-、JNDI-、Pool-、Realm 和所有都是相同的，并且用户从 MySQL-Database 中成功读取。所有名称和 URL 都以相同的模式输入。甚至小写和大写也是一样的。

我真的不知道为什么我在 Unix 下得到 403。有任何想法吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:23:32.337

自 Oracle 掌舵以来，glassfish 部署描述符的 sun-* 命名约定已全部被弃用或消除，取而代之的是 glassfish-*。

这包括文件名和根 XML 元素名称。

据我所知（不确定），这不是 windows 与 unix 的问题，而是 glassfish 软件的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:23:52.243

好的，我发现了问题。所以如果有人有同样的问题：在 Unix 下你必须定义文件“glassfish-web.xml”。我的有以下内容：

```
<glassfish-web-app error-url="">
    security-role-mapping>
        <role-name>admin</role-name>
        <group-name>admin</group-name>
    </security-role-mapping>
    <security-role-mapping>
        <role-name>user</role-name>
        <group-name>user</group-name>
    </security-role-mapping>
    <class-loader delegate="true"/>
    <jsp-config>
        <property name="keepgenerated" value="true">
            <description>Keep a copy of the generated servlet class' java code.</description>
        </property>
    </jsp-config>
</glassfish-web-app> 
```

在 windows 下不需要这个文件。

谢谢并恭祝安康

# java - 查找树的最大宽度的算法，不使用节点结构

> ID：11954108
> 
> 赞同：3
> 
> 时间：2012-08-14T14:08:30.247
> 
> 标签：java, algorithm, recursion, groovy, binary-tree

我试图弄清楚如何计算树的最大宽度。我没有使用典型的叶/节点结构，而是基于数据库中的数据。我将找到特定“节点”（Person）的所有子节点来确定对等线的最大宽度：

```
 1
    /  \
   2    3
 / | \     \
4  5  6     7 
          /  \
         8    9 
```

所以上面那棵树的最大值是 4。由于我没有使用传统的左/右方法，并且孩子的数量可能大于 2，我该怎么做？

几件事：

*   这不是作业
*   我下面的代码是生成大约 3200 的最大宽度（我为我方便的示例计算的最大值是 22）

这是我现在的代码：

```
private int calculateWidth(def org, int h) {

    def allContacts = Contact.findAllByOrganization(org)
    List<String> headNodes = findHighestNode(org.id, allContacts )

    Contact contact = Contact.get(Long.parseLong(headNodes.get(0)))
    Person parent = new Person(contact.id, contact.fullName)

    int maxWidth = 0;
    int width;
    int heightOfChart = h;
    int i;

    for(i = 1; i <= heightOfChart; i++)
    {
      width = getWidth(parent, i);

      if(width > maxWidth)
        maxWidth = width;
    }

    System.out.println("The max width is = " + maxWidth)
    return ((NODE_HEIGHT + NODE_OFFSET) * (maxWidth))
}

private int getWidth(Person parent, int level)
{

  List<Person> allChildren = getChildren(parent)

  if(allChildren.size() == 0)
    return 0;

  if(level == 1)
    return 1;

  else if (level > 1) {
    int count = 0
    for(Person child : allChildren) {
        count = count + getWidth(parent, level-1)
    }
    return count
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:20:50.530

我还没有真正检查过您的代码，但是我会使用广度优先搜索方法。

一些伪代码：

```
start with list containing just the trees root. call it CurrNodes.
maxWidth = 1;
start with empty list. call it NextNodes.
while(CurrNodes is not empty) {
   get all children of nodes in CurrNodes and add them to NextNodes
   if number of children is > maxWidth, # of children is the new maxWidth
   CurrNodes = NextNodes
   NextNodes = empty.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:13:37.083

解决问题的一种方法是使用具有树高长度的计数器数组，然后对于您寻求的每个级别，您可以添加数组中节点的计数器，最后您只需要获取具有最大值的索引在数组中。修改你的代码，它可能是这样的：

```
private int calculateWidth(def org, int h) {
    def allContacts = Contact.findAllByOrganization(org);
    List<String> headNodes = findHighestNode(org.id, allContacts );
    Contact contact = Contact.get(Long.parseLong(headNodes.get(0)));
    Person parent = new Person(contact.id, contact.fullName)
    int maxWidth = 0;
    int heightOfChart = h;
    int i;
    //create the counter array, initialized with 0 values by default
    int[] levelWidth = new int[h];
    if (parent != null) {
        levelWidth[0] = 1;
        //I suppose that your "parent" var is the root of your tree.
        fillWidth(parent, 1, levelWidth);
    }
    for(int width : levelWidth) {
        maxWidth = Math.max(maxWidth, width);
    }
    return maxWidth;
}

private void fillWidth(Person parent, int level, int[] levelWidth) {
    List<Person> allChildren = getChildren(parent);
    if (allChildren != null && !allChildren.isEmptty())
        levelWidth[level] += allChildren.size();
        for(Person child : allChildren) {
            fillWidth(parent, level + 1, levelWidth)
        }
    }
} 
```

# c# - 如何使用 C# 以编程方式创建 MAPI 配置文件

> ID：11954109
> 
> 赞同：0
> 
> 时间：2012-08-14T14:08:29.797
> 
> 标签：c#, c++, mapi

[我通过此链接http://support.microsoft.com/kb/306962](http://support.microsoft.com/kb/306962)了解如何在 C++ 中创建配置文件，但一直无法找到如何使用 C#。对此有任何想法或链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:31:02.460

C# 无法访问扩展 MAPI。曾经有一个名为 MAPI33 的库，但我认为它不再被开发或出售。您可以使用[Profman](http://www.dimastr.com/redemption/profman.htm)（可与[Redemption](http://www.dimastr.com/redemption)的可分发版本一起使用） - 它可以在支持 IDispatch 友好的 COM 对象的所有语言中访问（包括 C# 或任何其他 .Net 语言）。

# actionscript-3 - ReferenceError：错误＃1069：在字符串上找不到可见的属性并且没有默认值

> ID：11954110
> 
> 赞同：1
> 
> 时间：2012-08-14T14:08:33.560
> 
> 标签：actionscript-3, flash

```
function item_back_click(evt:Event):void {
     var back:MovieClip = MovieClip(evt.currentTarget);
     var req:URLRequest = new URLRequest(MovieClip(back.parent).data.@link);
     var listnumber = ("listbox" + MovieClip(back.parent).data.@link);
     trace(listnumber);
     if (listnumber.visible == false) listnumber.visible = true;
} 
```

`trace(listnumber);`显示`listbox1`

但

```
if (listnumber.visible == false) listnumber.visible = true; 
```

给出错误：

```
ReferenceError: Error #1069: Property visible not found on String and there is no default value.
    at listbox_fla::listbox_1/item_back_click() 
```

为什么是这样？

这很好用：

```
if (listbox1.visible == false) listbox1.visible = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:11:30.950

“listBox1”是一个字符串而不是一个变量。所以基本上你试图访问一个不存在的字符串的可见属性。

```
"listBox1".visible = true;  // error 
```

尝试 ：

```
this[listnumber].visible = true; 
```

# php - PHP - 在提交按钮上更改整个页面内容

> ID：11954115
> 
> 赞同：0
> 
> 时间：2012-08-14T14:08:47.147
> 
> 标签：php, html

我有两个 php 页面 index.php 和 page2.php。
我希望当我的网站第一次加载时它会显示 index.php，其中有一个搜索按钮。单击提交按钮时，我想显示 page2.php 的全部内容（现在我只在 page2.php 上显示）通过消除对 page2.php 的需要，在 index.php 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:27:08.520

更改您的表单，使其重新加载同一页面：

```
<form method="post">
    // inputs go here
    <input type="submit" value="Submit" name="submit" />
</form> 
```

然后包含一个 if 语句来检查表单是否已经提交：

```
if (isset($_POST["submit"])){ // form already submitted
    // echo page2.php code here or simply include the code from an external file
}
else {
    // echo the form code above and anything else from the first page here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:25:31.127

从 page2.php 复制脚本并将其粘贴到 index.php 中？在这个闭包中：

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST')
{
//
}
?> 
```

# ios - ViewController 中父视图后面的子视图？

> ID：11954120
> 
> 赞同：0
> 
> 时间：2012-08-14T14:09:06.270
> 
> 标签：ios, uiview, uiviewcontroller, subview

是否可以在父视图后面显示子视图？显然，如果视图是兄弟，你可以这样做；然而，我的视图是 ViewController 层次结构的一部分，据我所知，一个 ViewController 不能有多个视图。

换句话说，我有这个层次结构：

```
ViewController
-->ViewController's view
------>subview 
```

基本上，我只希望“子视图”位于“ViewController 的视图”之后。这些都不是模态的——两种视图都一直存在。

上下文：“ViewController 的视图”是基于 OGL 的应用程序的主视图。我需要在主视图后面显示一个恒定的背景（用户可选择）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:27:30.250

贾斯汀是对的，您的问题令人困惑，因为将视图 (1) 放在另一个视图 (2) 之上会掩盖原始视图 (1)。我想你的意思是问你是否可以在 viewController 的“主”视图“后面”或“下面”添加一个子视图。答案是否定的，您只能将子视图添加到“主”视图（视图控制器的视图属性）。

但是，只需将背景视图添加到主视图（视图控制器的视图属性），然后在顶部添加其他视图。

顺便说一句，viewController 旨在控制多个视图（主视图及其子视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:43:21.980

创建您的背景视图，可能是 UIImageView 或其他东西，然后将其添加为子视图并将其移到后面。

```
UIImageView *backgroundImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]];
[backgroundImage setFrame:CGRectMake(0, 0, 320, 480)];
[self.view addSubview:backgroundImage];
[self.view sendSubviewToBack:backgroundImage]; 
```

您可以使用`sendSubviewToBack:`, `bringSubviewToFront:`, `insertSubview:aboveSubview:`, `insertSubview:belowSubview:`, `insertSubview:atIndex:`,`exchangeSubviewAtIndex:withSubviewAtIndex:`来组织子视图的层次结构（谁在谁之上）。该`subviews`属性返回`NSArray`所有子视图中的一个，以便它们出现在屏幕上。

# ruby-on-rails - 使用 Remotipart 的 Rails AJAX 上传表单

> ID：11954122
> 
> 赞同：4
> 
> 时间：2012-08-14T14:09:14.103
> 
> 标签：ruby-on-rails, ajax, upload

我一直在努力让 AJAX 上传表单正常工作。我正在使用 Rails 3.2。我放入`gem "remotipart", "~> 1.0"`了我的 Gemfile，运行`bundle install`并成功安装。

我以前有这个非 ajax 上传表单，我`:remote => true`根据[github 页面](https://github.com/JangoSteve/remotipart)上的文献添加了该表单：

```
<%= form_tag "/administration/data_imports", :multipart => true, :remote => true %>  
    <label for="file">Input File</label> <%= file_field_tag "file" %>
    <button type="submit">Import Data</button>
</form> 
```

这在我的`data_imports_controller` `create`行动中：

```
def create
  file = params[:file]
  filename = file.original_filename
end 
```

我在我的页面上添加了一个 javascript 包含，`jquery.remotipart.js`因为它感觉很重要，尽管没有明确的指示这样做..

我试过了，但没有给出服务器错误：

```
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `original_filename' for nil:NilClass):
app/controllers/data_imports_controller.rb:16:in `create' 
```

很明显我在做一些根本错误的事情，但我需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T08:10:44.157

经过大量调试和阅读大量代码后，我终于有了与 Rails 3.2.8 配合使用的最新 gem (1.0.2)。我被三个陷阱钉住了：

1.  我在提交表单之前禁用了我的文件输入字段，这导致 remotipart 忽略它以包含在 iframe 提交中。您必须确保您的文件输入已启用。这可能就是您所看到的，以及为什么为“文件”属性指定不同的选择器对您有用。
2.  在我的调试过程中，我用最新的上游源覆盖了 jquery.iframe-transport，它不支持 iframe 中的 X-Http-Accepts 隐藏变量。您必须使用与 remotipart gem 捆绑的版本。
3.  如果您使用的是“脚本”以外的数据类型，请不要忘记在表单上为 ajax:complete 连接回调。如果您未在全局 ajax 选项中指定 dataType 或在表单上使用 data-type 属性，则这是默认设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:42:48.910

幸运的你。前段时间我遇到了完全相同的问题。:) 将此添加到您的 application.js 中：

```
//= require jquery.remotipart
//= require jquery.iframe-transport 
```

您可以从此处获取“iframe-transport”文件：http: [//cmlenz.github.com/jquery-iframe-transport/](http://cmlenz.github.com/jquery-iframe-transport/)。

正如我对另一个答案的评论所说：我相信`:multipart`不需要，因为您使用的是 Rails 3.2。不是 100% 肯定，因为我仍在使用 Rails 3.1。;)

希望能帮助到你！

# 编辑

我创建了一个示例应用程序，展示了如何添加 remotipart 以启用 AJAX 文件上传。这对我很有效。

[https://github.com/RobinBrouwer/remotipart_example](https://github.com/RobinBrouwer/remotipart_example)

有关已采取的步骤，请参阅该存储库中的提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:21:59.783

通过以一种我不太了解的方式徘徊，设法实现了我想要的东西，但是嘿，它有点工作。我不得不按照以下方式添加一些 jQuery：

```
$("#myform").submit(function(e) {
    e.preventDefault();
    $.ajax(this.action, {
        files: $(":file", this),
        iframe: true
    }).complete( function(data) {
        eval(data.responseText);
    });
}); 
```

我相信它接管了表单提交，使用这个 iframe-transport lark 启动了一个 ajax 帖子，然后评估返回的内容（因为在我的情况下我正在返回 javascript）。我还必须`:remote => true`从表格中删除，否则它会发布两次或其他内容。

以为我会在这里发布它，以便它可以帮助某人或引导某人做得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-27T07:42:11.467

就我而言，我有旧版本`jquery.iframe-transport.js`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:56:03.200

问题是你实际上是如何声明你的`:multipart=> true`

请使用下面的代码，然后您的表单将接受文件参数。

```
 form_for "/administration/data_imports",:remote => true,:html => {:multipart => true} 
```

# html - 添加搜索核心结果 Web 部件后，IE 中的 mailto 中断

> ID：11954123
> 
> 赞同：3
> 
> 时间：2012-08-14T14:09:21.517
> 
> 标签：html, internet-explorer, sharepoint-2007, web-parts, mailto

我正在尝试创建一个在 Outlook 中弹出打开新电子邮件的链接：

```
<a href="mailto:someaddress@mail.com?subject=blah">Feedback</a> 
```

这在 Firefox 中运行良好，但在 IE9 中，它实际上将浏览器重定向到“mailto:someaddress@mail.com?subject=blah”。电子邮件窗口仍会弹出，但我需要 IE 保持在单击 mailto 链接的同一页面上。

**编辑：**我现在已经确定这是一个 SharePoint 2007 问题。在将搜索核心结果 web 部件添加到页面之前，mailto href 可以正常工作，但在添加核心结果 web 部件之后，就会出现前面描述的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:59:57.770

我仍然不知道问题的确切原因是什么，但我能够通过执行以下操作来解决它：

向页面添加隐藏的 iframe：

```
<iframe id="emailiframe" src="" style="display:none;"></iframe> 
```

在包含我的“反馈”链接的内容编辑器 Web 部件中，我将源设置为：

```
<script type="text/javascript">
function feedbackEmail()
{
var iframe = document.getElementById("emailiframe");
iframe.setAttribute("src", "mailto:someaddress@mail.com?subject=blah");
}
</script>

<a href="javascript:void(0);" onclick="feedbackEmail(); return false;">Feedback</a> 
```

IE 现在做了它应该做的事情。

# asp.net - Facebook 应用程序显示空白页

> ID：11954124
> 
> 赞同：0
> 
> 时间：2012-08-14T14:09:27.067
> 
> 标签：asp.net, facebook, facebook-canvas, facebook-fbml

两年多前，我在 Asp.net 中创建了一个 Facebook 应用程序（使用 CanvasFBMLBasePage），并且运行良好。

我今天试图检查它，它只是显示我的空白页。

在调试工具中，它给出响应代码：200

必须修复的错误无法下载：无法从 URL 检索数据。

在 Scraped URL 中：它在下面显示我的响应

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><redirect url="http://www.facebook.com/login.php?api_key=...&amp;v=1.0&amp;next=Default.aspx"></redirect></head></html> 
```

我还添加了创建应用程序时不存在的 SSL url。

不知道为什么应用程序突然停止工作，因为我没有改变任何东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:19:18.200

在过去的两年中，平台发生了如此多的变化，它可能是任何事情。如果它是一个 FBML 应用程序，它就完全坏掉了，需要重新实现为一个 Iframe 应用程序。如果它使用的是 Oauth 1，它可能会显示 OK，但登录失败，等等。

从您的问题来看，它似乎与 FBML 相关，在这种情况下，您需要使用当前 API 而不是旧的 FBML 标签重新实现应用程序

# python - 在 Windows 和 Linux 上开发 Web 应用程序

> ID：11954129
> 
> 赞同：0
> 
> 时间：2012-08-14T14:09:42.590
> 
> 标签：python, git, cross-platform, virtualenv

我正在开发一个网络应用程序，需要在两台计算机上完成工作，一台运行 Linux，另一台运行 Windows。

这个应用程序是在 Python 2.6.7 上使用 Pyramid 框架开发的（这是服务器运行的，我无法更改）

按照 Pyramid 网站上的教程，我在`virtualenv`Linux 机器上创建了一个，并创建了一个项目 - 对其进行了测试，它似乎在 Linux 机器上运行没有问题。现在为了将工作同步到 Windows，我想到了使用 git（带有来自 bitbucket 的免费私人项目）。我创建了一个 git 项目并将其推送到 bitbucket。我使用了这个[.gitignore](https://raw.github.com/github/gitignore/master/Python.gitignore)文件模板，并且还添加了这一行（我相信 venv 是特定于操作系统的，但我可能是错的）：

```
venv 
```

将项目克隆到 Windows 后，我没有 virtualenv - 如何创建与 Linux 机器上存在的 venv 兼容的 venv（我的 Windows 机器上安装了 Python 2.7，没有 sqlalchemy 等.)？什么是“正确”的做法？我应该只给应用程序（这是一个拼写错误，*但*我现在先不说）Windows 并在虚拟机上使用 Ubuntu 吗？

**编辑：**

尽管我已经接受了 Rostyslav Dzinko 关于文件使用的回答，但正确的方法是在此过程中实际使用由金字塔的脚手架机制生成`requirements.txt`的内置内容。因此，如果有人遇到此问题，请考虑尝试：`setup.py``pcreate`

```
python setup.py develop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:21:03.377

Virtualenv 为您的 Python 解释器创建虚拟环境。这意味着每个虚拟环境都可以安装不同版本的相同包或完全不同的包，这些包仅对您的项目（依赖项）很重要。

如果要管理依赖项，可以使用[pip](http://www.pip-installer.org/en/latest/index.html)使新虚拟环境与旧虚拟环境同步。

您需要做的就是创建[requirements.txt](http://www.pip-installer.org/en/latest/requirements.html)文件并用依赖项填充它，例如：

```
pyramid==1.0.1
... 
```

让这个文件在你的 git 存储库中。

将源代码克隆到新机器上新创建的 virtualenv 后，您可以使用 pip 安装所有依赖项：

```
pip install -r requirements.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:21:27.613

virtual-env 是安装在系统上的 Python 运行时环境。它不是您的代码库的一部分，因此不应该在您的 Git 存储库中。

在您使用的每台机器上单独安装一个虚拟环境。

# git-tfs - 项目名称中的 Git-tfs 和空格

> ID：11954134
> 
> 赞同：1
> 
> 时间：2012-08-14T14:09:55.527
> 
> 标签：git-tfs

当项目名称有空格时，在 git-tfs 中克隆 TFS 项目的语法是什么？我努力了：

```
git-tfs.exe clone http://tfsint:8080/tfsint01/ "$/NPP UBI Dev/DEV1" 
```

该系统找不到指定的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:30:12.147

试试这个：

```
git tfs clone http://tfsint:8080/tfsint01/ "$/NPP UBI Dev/DEV1" 
```

所以“git tfs”而不是“git-tfs.exe”。

您收到的错误消息实际上并不是指项目名称。这似乎是由于 git-tfs 无法找到 git.exe 造成的。（默认情况下添加到路径中的是 git.cmd）。[更多信息在这里](https://github.com/git-tfs/git-tfs/issues/31)。

# javascript - 从 jquery.ready() 调用的 javascript 何时相对于 中的脚本运行？

> ID：11954147
> 
> 赞同：1
> 
> 时间：2012-08-14T14:10:32.520
> 
> 标签：javascript, jquery

传递给[jQuery.ready()](http://api.jquery.com/ready/)的 Javascript将在 DOM 完全加载后运行，但不会等待所有资产（如图像）被接收（与[jQuery.load()](http://api.jquery.com/load-event/)不同）。凉爽的。但是放置在文档`<script>`标签中的javascript`<head>`总是在代码传递给 jQuery.ready() 之前运行吗？

我假设答案是肯定的，但找不到任何具体说明这一点的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:37:31.173

脚本标签中的脚本按照它们在 HTML 文件中遇到的顺序依次运行。因此，一旦加载文档的 HEAD 部分，HEAD 标记中的脚本就会运行，并且在该脚本完成执行之前不会运行任何脚本。

包含的脚本`$(document).ready(fn)`将安排它们的回调在整个文档加载后稍后运行。

因此，由于 HEAD 部分中的脚本在文档正文加载之前很长，因此 HEAD 部分中的脚本将在运行指定 using 的回调之前`$(document).ready()`运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:50:36.040

`script`在解析文档时，浏览器到达标签的那一刻就会执行 Javascript 代码。`jquery.ready`等待整个 DOM 直到整个文档被解析，所以是的，它在你传递给你的代码之前运行，`jquery.ready`无论它是在头部还是在正文中。

# javascript - 带有子窗口的 Window.opener 在同一窗口中导航不起作用

> ID：11954150
> 
> 赞同：0
> 
> 时间：2012-08-14T14:10:37.220
> 
> 标签：javascript, fckeditor, window.opener

我有像 P 是父页面这样的场景，并且从该页面使用 window.open(C) 打开一个子页面，其中 C 是子页面。现在我必须在同一个子窗口中导航。我们称该页面为 C1。

我发现当我尝试从页面 C1 访问页面 P 的一个按钮时，它给了我找不到。我的语法就像（在 C1 页），

```
window.opener.document.getElementById('xyz'); 
```

有什么方法可以识别我在 window.opener 中获得的页面与我正在寻找的页面相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:19:04.613

我在父页面上使用[FCKEditor](http://ckeditor.com/)，而子页面仅从该编辑器打开。所以我必须使用`window.opener.parent.my_function();`

非常感谢所有帮助过我的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:20:41.820

你问： `Is there any way using which I can identify the page I am getting in window.opener is same page what I am looking for?`

只是一个想法：在打开新窗口之前生成一些随机值并将其存储在父窗口中，将此值写入新窗口并交叉引用。

更新：在某些场景下，您可以在父子浏览器窗口之间共享数据，如下所示：

`window.opener.functioname(arg1,arg2,..)`
- 从子窗口向父窗口发送数据

`winobj.functioname(arg1,arg2,..)`
- 使用从 window.open() 获得的窗口句柄从父窗口向子窗口发送数据

[请参阅此页面](http://www.codeproject.com/Articles/25388/Accessing-parent-window-from-child-window-or-vice)上的更多信息。

祝你好运！

# javascript - console.dir 和 console.log 有什么区别？

> ID：11954152
> 
> 赞同：399
> 
> 时间：2012-08-14T14:10:41.760
> 
> 标签：javascript, google-chrome, console

在 Chrome 中，该`console`对象定义了两种似乎做同样事情的方法：

```
console.log(...)
console.dir(...) 
```

我在网上读到某处`dir`在记录之前获取了对象的副本，而`log`只是将引用传递给控制台，这意味着当你去检查你记录的对象时，它可能已经改变了。然而，一些初步测试表明没有区别，并且它们都可能会以不同的状态显示对象，而不是记录时。

`Ctrl`在 Chrome 控制台 ( ++ `Shift`)中试试这个，`J`看看我的意思：

```
> o = { foo: 1 }
> console.log(o)
> o.foo = 2 
```

现在，展开`[Object]`log 语句下方的语句，注意它显示`foo`的值为 2。如果使用`dir`而不是重复实验，情况也是如此`log`。

我的问题是，为什么这两个看似相同的功能存在于`console`?

* * *

## 回答 #1

> 赞同：391
> 
> 时间：2012-08-14T14:28:58.020

在 Firefox 中，这些函数的行为完全不同：`log`只打印出一个`toString`表示，而`dir`打印出一个可导航的树。

在 Chrome 中，`log`已经打印出一棵树——*大部分时间*。然而，Chrome`log`仍然会将某些类别的对象进行字符串化，即使它们具有属性。也许最明显的差异示例是正则表达式：

```
> console.log(/foo/);
/foo/

> console.dir(/foo/);
* /foo/
    global: false
    ignoreCase: false
    lastIndex: 0
    ... 
```

您还可以看到与普通对象不同的数组（例如`console.dir([1,2,3])`）的明显区别：`log`

```
> console.log([1,2,3])
[1, 2, 3]

> console.dir([1,2,3])
* Array[3]
    0: 1
    1: 2
    2: 3
    length: 3
    * __proto__: Array[0]
        concat: function concat() { [native code] }
        constructor: function Array() { [native code] }
        entries: function entries() { [native code] }
        ... 
```

[如另一个答案所述](https://stackoverflow.com/a/19269945/710446)，DOM 对象也表现出不同的行为。

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2013-10-09T10:48:33.837

将 DOM 元素发送到控制台时，Chrome 中存在另一个有用的区别。

![](../Images/4b8644ab394ecfc344bce40ddd498146.png)

注意：

*   `console.log`在类似 HTML 的树中打印元素
*   `console.dir`在类似 JSON 的树中打印元素

具体来说，`console.log`对 DOM 元素进行特殊处理，而`console.dir`没有。这在尝试查看 DOM JS 对象的完整表示时通常很有用。

[Chrome 控制台 API 参考](https://developers.google.com/chrome-developer-tools/docs/console-api#consoledirobject)中提供了有关此功能和其他功能的更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T14:25:15.827

我认为 Firebug 的做法与 Chrome 的开发工具不同。看起来 Firebug 为您提供了对象的字符串化版本，同时`console.dir`为您提供了可扩展的对象。两者都为您提供 Chrome 中的可扩展对象，我认为这可能是混乱的来源。或者这只是 Chrome 中的一个错误。

在 Chrome 中，两者都做同样的事情。扩展您的测试，我注意到 Chrome 在您扩展对象时会获取对象的当前值。

```
> o = { foo: 1 }
> console.log(o)
Expand now, o.foo = 1
> o.foo = 2
o.foo is still displayed as 1 from previous lines

> o = { foo: 1 }
> console.log(o)
> o.foo = 2
Expand now, o.foo = 2 
```

如果这是您想要看到的，您可以使用以下内容来获取对象的字符串化版本。这将向您显示在调用此行时对象是什么，而不是在您展开它时。

```
console.log(JSON.stringify(o)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T14:15:39.623

使用 console.dir() 输出一个可以点击的可浏览对象，而不是 .toString() 版本，如下所示：

```
console.dir(obj/this/anything) 
```

[如何在 Chrome 控制台中显示完整对象？](https://stackoverflow.com/questions/4482950/how-to-show-full-object-in-chrome-console)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T14:13:26.180

从萤火虫网站 [http://getfirebug.com/logging/](http://getfirebug.com/logging/)

> 调用 console.dir(object) 将记录对象属性的交互式列表，例如 > DOM 选项卡的微型版本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-27T10:45:00.650

之前提到的 7 个答案中没有一个[`console.dir`支持额外的参数](https://nodejs.org/api/console.html#console_console_dir_obj_options)：`depth`、、`showHidden`以及是否使用`colors`.

特别感兴趣的是`depth`，它（理论上）允许将对象遍历到超过`console.log`支持的默认 2 个级别。

我写“理论上”是因为在实践中，当我有一个 Mongoose 对象并运行`console.log(mongoose)`and`console.dir(mongoose, { depth: null })`时，输出是相同的。实际上深入到`mongoose`对象中的[是](https://stackoverflow.com/questions/10729276/how-can-i-get-the-full-object-in-node-jss-console-log-rather-than-object/10729284#10729284)使用`util.inspect`：

```
import * as util from 'util';
console.log(util.inspect(myObject, {showHidden: false, depth: null})); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T12:24:55.280

按照 Felix Klings 的建议，我在我的 chrome 浏览器中进行了尝试。

`console.dir([1,2])`给出以下输出：

```
Array[2]
 0: 1
 1: 2
 length: 2
 __proto__: Array[0] 
```

虽然`console.log([1,2])`给出以下输出：

```
[1, 2] 
```

所以我相信`console.dir()`应该用来获取更多信息，比如数组和对象中的原型等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-20T19:55:45.800

## `console.log()`和之间的区别`console.dir()`：

简而言之，这里是区别：

*   `console.log(input)`: 浏览器以格式良好的方式登录
*   `console.dir(input)`: 浏览器只记录对象及其所有属性

## 例子：

以下代码：

```
let obj = {a: 1, b: 2};
let DOMel = document.getElementById('foo');
let arr = [1,2,3];

console.log(DOMel);
console.dir(DOMel);

console.log(obj);
console.dir(obj);

console.log(arr);
console.dir(arr); 
```

在谷歌开发工具中记录以下内容：

[![在此处输入图像描述](../Images/f33d71e5f9b646ae15b4426516bdfef7.png)](https://i.stack.imgur.com/YxTIO.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-03T00:06:59.777

好吧，[控制台标准](https://console.spec.whatwg.org/)（从提交[ef88ec7a39fdfe79481d7d8f2159e4a323e89648 开始](https://console.spec.whatwg.org/commit-snapshots/ef88ec7a39fdfe79481d7d8f2159e4a323e89648/)）目前要求[console.dir](https://console.spec.whatwg.org/#dir)在将其传递给[打印机](https://console.spec.whatwg.org/#printer)（规范级别操作）之前应用[通用 JavaScript 对象格式](https://console.spec.whatwg.org/#generic-javascript-object-formatting)，但是对于单参数[console.log](https://console.spec.whatwg.org/#log)调用，规范结束将 JavaScript 对象直接传递给[Printer](https://console.spec.whatwg.org/#printer)。

由于规范实际上将有关[打印机](https://console.spec.whatwg.org/#printer)操作的几乎所有内容都留给了实现，因此由他们自行决定为 console.log() 使用哪种格式。

# r - 对按频率拆分的数据进行分组

> ID：11954153
> 
> 赞同：0
> 
> 时间：2012-08-14T14:10:42.137
> 
> 标签：r

我对 R 很陌生，我正在寻找一种按频率汇总数据的方法。所以，我有一个这样的数据框：

```
immagine    media
1          1 60.65391
2          2 58.89603
3          3 60.45428
4          4 55.91487
5          5 56.11804
6          6 56.05239
7          7 61.12667
8          8 60.46287
9          9 57.96718
10        10 58.75914
11        11 60.39214
12        12 57.64966
13        13 57.14457
14        14 56.85810
15        15 56.97652
16        16 58.45831
17        17 57.37774
18        18 57.31794
19        19 60.89813
20        20 61.57055
21        21 59.62459
22        22 56.86678
23        23 56.46254
24        24 54.72302
25        25 56.04285
26        26 55.88004
27        27 56.64764 
```

我想有一个表格，其中变量“媒体”分成 55-60、50-55 等组......这是相对的想象。我真的不知道怎么继续下去。提前感谢任何人。

我也在寻找将数据除以其置信区间。为了让不同的组被 95% CI 潜水，是否可以使用 cut 函数？. 提前致谢。尼古拉

尼古拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:25:59.627

`cut`为您提供一个因素，其中级别是您指定的分组。

`table`接受一个向量并告诉您每个级别中有多少个元素。

将两者结合起来，你应该能够做你想做的事：

```
> media <- rnorm(10,2.5)+57
> media
 [1] 60.13145 58.78920 61.01821 60.35878 59.20806 57.75657 61.12825 59.67605
 [9] 59.29902 58.70735
> ct <- cut( media, seq(50,65,2.5), include.lowest=TRUE ) 
> ct
 [1] (60,62.5] (57.5,60] (60,62.5] (60,62.5] (57.5,60] (57.5,60] (60,62.5]
 [8] (57.5,60] (57.5,60] (57.5,60]
Levels: [50,52.5] (52.5,55] (55,57.5] (57.5,60] (60,62.5] (62.5,65]
> table(ct)
ct
[50,52.5] (52.5,55] (55,57.5] (57.5,60] (60,62.5] (62.5,65] 
        0         0         0         6         4         0 
```

因为 table 返回一个向量，所以如果需要，您可以将输出以百分比表示：

```
> table(ct)/length(ct)*100
ct
[50,52.5] (52.5,55] (55,57.5] (57.5,60] (60,62.5] (62.5,65] 
        0         0         0        60        40         0 
```

`ct`由于保留了向量的顺序，因此您可以通过存储为新列将分组添加回 data.frame 。如果您的 data.frame 被调用`dat`，则：

```
dat$group <- ct 
```

应该这样做。

# java - Android Java：通过子类的全局变量；无法启动应用程序？

> ID：11954154
> 
> 赞同：0
> 
> 时间：2012-08-14T14:10:44.950
> 
> 标签：java, android

我一直在阅读有关如何执行此操作的示例，试图从本网站和其他网站上的帖子中拼凑出一个有效的示例。我确定我遗漏了一些小东西，但作为 Java 新手，我可以使用一些帮助。

我只是想创建一个小示例，它源自在 Eclipse 中创建新项目时生成的自动 hello world。我想做的就是能够在子类中存储一些全局变量，然后在我的主要活动中引用这些值。不幸的是，每次我尝试运行该应用程序时，它都会崩溃“不幸的是，GeneralTest1 已停止”，并且日志猫错误不是很有帮助。

快速概览：

*   GlobalVars 类扩展应用程序
*   在清单中，添加了 android:name 以引用额外的 GlobalVars 类
*   在我的主要活动中，我正在使用 getApplicationContext() 初始化全局变量类

这是我所拥有的一切；任何帮助将非常感激！

**MainActivity.java**

```
package com.example.generaltest1;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    GlobalVars myVars = ((GlobalVars)getApplicationContext());      
    TextView myText = (TextView) findViewById(R.id.myText);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myText.setText(myVars.getMyString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**GlobalVars.java**

```
package com.example.generaltest1;

import android.app.Application;

public class GlobalVars extends Application {

    String myString = "Some Text";

    public String getMyString() {
        return myString;
    }

    public String setMyString(String string) {
        this.myString = string;
        return myString;
    }
} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/myText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</RelativeLayout> 
```

**字符串.xml**

```
<resources>

    <string name="app_name">GeneralTest1</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>

</resources> 
```

**GeneralTest1 清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.generaltest1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:name="GlobalVars">
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**原木猫**

```
08-14 09:53:05.546: E/Trace(620): error opening trace file: No such file or directory (2)
08-14 09:53:05.656: D/AndroidRuntime(620): Shutting down VM
08-14 09:53:05.656: W/dalvikvm(620): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-14 09:53:05.676: E/AndroidRuntime(620): FATAL EXCEPTION: main
08-14 09:53:05.676: E/AndroidRuntime(620): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.generaltest1/com.example.generaltest1.MainActivity}: java.lang.NullPointerException
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.os.Looper.loop(Looper.java:137)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-14 09:53:05.676: E/AndroidRuntime(620):  at java.lang.reflect.Method.invokeNative(Native Method)
08-14 09:53:05.676: E/AndroidRuntime(620):  at java.lang.reflect.Method.invoke(Method.java:511)
08-14 09:53:05.676: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-14 09:53:05.676: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-14 09:53:05.676: E/AndroidRuntime(620):  at dalvik.system.NativeStart.main(Native Method)
08-14 09:53:05.676: E/AndroidRuntime(620): Caused by: java.lang.NullPointerException
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
08-14 09:53:05.676: E/AndroidRuntime(620):  at com.example.generaltest1.MainActivity.<init>(MainActivity.java:10)
08-14 09:53:05.676: E/AndroidRuntime(620):  at java.lang.Class.newInstanceImpl(Native Method)
08-14 09:53:05.676: E/AndroidRuntime(620):  at java.lang.Class.newInstance(Class.java:1319)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-14 09:53:05.676: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-14 09:53:05.676: E/AndroidRuntime(620):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:13:20.580

您正在调用`getApplicationContext()`您的类定义，这在活动生命周期中为时过早，并导致空指针异常。将分配移至您的`onCreate()`功能，它应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:15:39.700

请查看这篇关于活动及其生命周期的文章：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

您的活动应如下所示：

```
public class MainActivity extends Activity {

    GlobalVars myVars;      
    TextView myText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myVars = ((GlobalVars)getApplication());
        myText = (TextView) findViewById(R.id.myText);
        myText.setText(myVars.getMyString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:19:31.843

在 oncreate().. 中添加这些行 `GlobalVars myVars = ((GlobalVars)getApplicationContext());`
`TextView myText = (TextView) findViewById(R.id.myText);`

# android - Android 指南针：不同的方位角值取决于 Pitch

> ID：11954157
> 
> 赞同：2
> 
> 时间：2012-08-14T14:10:57.493
> 
> 标签：android, compass-geolocation, pitch, azimuth

我正在开发一个应用程序，我需要同时使用相机和指南针。问题是 Azimuth 的值会根据 Pitch 的一个而变化（换句话说，如果我拿着手机或者我把它放在桌子上），并且这两个值之间似乎存在数学相关性：指向 180 ° 没有区别……否则甚至会有 20-30° 的差距。

我已经使用+ 和+`Sensor.TYPE_ORIENTATION`的组合实现了指南针，但没有任何改变。`Sensor.TYPE_ACCELERATION``Sensor.TYPE_MAGNETIC_FIELD`

注意：我说的是 Pitch，而不是 Roll。显然，如果手机左转或右转，我必须用 +-90° 调整结果。

我正在使用 LG P500（擎天柱）进行测试。是我设备的问题吗？还是我错过了什么？

谢谢。

* * *

编辑：发现其他人已经问过同样的问题......仍未解决 [https://stackoverflow.com/questions/10224951/android-compass-in-extreme-circumstances](https://stackoverflow.com/questions/10224951/android-compass-in-extreme-circumstances)

# php - Zend SubForm：如何禁止更改子表单内的元素名称？

> ID：11954160
> 
> 赞同：0
> 
> 时间：2012-08-14T14:11:04.727
> 
> 标签：php, forms, zend-framework, zend-form

我有一个 zend 表单，其中我需要每个元素都由一个显示组包装。然后我需要将一组元素包装在另一个显示组中。由于 zend 表单不支持嵌套显示组，我使用子表单代替。

所以，我现在的结构是：

```
Form
--- SubForm (1)
--- --- DisplayGroup (1-1)
--- --- --- Element (1)
--- --- DisplayGroup (1-2)
--- --- --- Element (2)
--- SubForm (2)
--- --- DisplayGroup (2-1)
--- --- --- Element (3)
--- --- DisplayGroup (2-2)
--- --- --- Element (4) 
```

等等

然而，由此而来的问题是，每个子表单都被设置为属于它的每个元素的父级。这会更改元素的名称，fe`name="username"`变为`name="subformname[username]"`。

因为我使用子表单来代替显示组，所以我不需要它的额外功能。

如何禁用这种名称更改？

PS：我正在使用自定义函数来“批量处理”每个元素（琐碎的东西 - 删除装饰器，设置标签等），所以我能够强制`setAttrib('name', $element -> getName())`，但事实证明这只适用于常规表单元素。它不适用于 ZendX 表单元素，如日期选择器、颜色选择器等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T21:36:27.893

子表单元素名称中使用的数组表示法由`Zend_Form::$_isArray`. 它是*false* in`Zend_Form`和*true* in `Zend_Form_SubForm`，它扩展了`Zend_Form`。

您可以调用`setIsArray(FALSE)`您的子表单或覆盖`Zend_Form::$_isArray`您的子表单（如果它扩展`Zend_Form_SubForm`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:42:44.680

根据您所说的评论，您仅使用显示组为元素提供 twitter 引导网格类。您不需要为此使用显示组，只需为每个表单元素添加一个额外的 HtmlTag 装饰器，或者向现有的其中一个元素添加一个类。然后，您可以将显示组用于其预期目的，从而为您提供：

```
Form
--- DisplayGroup (1)
--- --- Element (1)
--- --- Element (2)
--- DisplayGroup (2)
--- --- Element (3)
--- --- Element (4) 
```

如果您有任何问题，请编辑您的问题以包含修改现有装饰器的“批量处理”代码，我们可以建议如何修改它。

编辑：获取装饰器来包装标签和表单元素只是按照指定装饰器的顺序。这是一个例子：

```
$element->addDecorator('ViewHelper')
        ->addDecorator('Errors')
        ->addDecorator('Description', array('tag' => 'p', 'class' => 'description'))
        ->addDecorator('Label', array('optionalSuffix' => ':', 'requiredSuffix' => ':*'))
        ->addDecorator(array('row' => 'HtmlTag'), array('tag' => 'div', 'class' => 'span4')); 
```

viewHelper 装饰器呈现表单元素本身。每个后续装饰器都“围绕”现有内容。具体如何呈现取决于装饰器本身，但在上面的示例中，您会看到一个 div 标记，其中类 'span4' 作为最后一个装饰器，这意味着 div 将包装其他所有内容。

# jquery - JQuery Colour Picker - From web.Config file

> ID：11954162
> 
> 赞同：1
> 
> 时间：2012-08-14T14:11:07.487
> 
> 标签：jquery

I am working in jQuery Color Picker. I am having a constant data in my web.config file.

```
<add key="colorCode" value="8A2BE2,0000FF,A52A2A,D87093,00FFFF,FFE4C4,008080,FF00FF,B8860B,FF8C00,800080,DA70D6,40E0D0"/> 
```

I my aspx page, i am having the method like

```
 var colorCode = '<%=ConfigurationManager.AppSettings["colorCode"]%>';
 $(function () {
 $('#color3').colorPicker({ pickerDefault: "ffffff", colors: [colorCode], transparency: true });
 }); 
```

The color picker is not recognising the colors which i had given in the web config file. How to fix this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:23:19.883

I think your problem is that you are passing the values like:

```
["000, 000, fff, fff"]; 
```

and you need

```
['000', '000', 'fff', 'fff']; 
```

as showed [here](https://github.com/laktek/really-simple-color-picker).

Try adding the `''` in the config, or using split

```
"000, 000, fff, fff".split(","); //["000", " 000", " fff", " fff"] 
```

In your code, the options look like this:

**1**

**Config**

```
 <add key="colorCode" value="8A2BE2,0000FF,A52A2A,D87093,00FFFF,FFE4C4,008080,FF00FF,B8860B,FF8C00,800080,DA70D6,40E0D0"/> 
```

**Code**

```
var colorCode = '<%=ConfigurationManager.AppSettings["colorCode"]%>';
 $(function () {
      $('#color3').colorPicker({ 
             pickerDefault: "ffffff", 
             colors: colorCode.split(","), 
             transparency: true 
      });
 }); 
```

**2**

**Config**

```
 <add key="colorCode" value="'8A2BE2','0000FF','A52A2A','D87093','00FFFF','FFE4C4','008080','FF00FF','B8860B','FF8C00','800080','DA70D6','40E0D0'"/> 
```

**Code**

```
var colorCode = [<%=ConfigurationManager.AppSettings["colorCode"]%>];
 $(function () {
      $('#color3').colorPicker({ 
             pickerDefault: "ffffff", 
             colors: colorCode, 
             transparency: true 
      });
 }); 
```

If neither of them work, try removing the `' '` in the **1** example, when getting the value from the config

# jakarta-ee - struts2如何提交表单？

> ID：11954163
> 
> 赞同：0
> 
> 时间：2012-08-14T14:11:11.423
> 
> 标签：jakarta-ee, struts2, tiles

我在tiles.xml中有以下代码

```
<definition name="m_st"  extends="mmain">
    <put-attribute name="body" value="reports/st/list.jsp"/>
</definition> 
```

以及 struts.xml 中的以下代码

```
<package name="m_st" namespace="reports/st" extends="struts-default, tiles-default">
    <action name="list" class="com.m.reports.StAction" method="list">
        <result type="tiles">m_st</result>
    </action>
</package> 
```

在 list.jsp 中，

```
<form name="rangeForm" method="post" action=""> 
```

在 StAction.java 中，

```
private String type = "";

public String list() throws Exception {

    type = "TEST"; //listStandard.get(0).getStatus();

    return SUCCESS;
} 
```

但是当我单击提交按钮时，没有任何反应，没有错误，也没有输出。提交后如何`<s:property value="type"/>`在 list.jsp 中获得预期结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:33:17.137

这是一个非常令人困惑的问题。你到底在做什么？如果您在一个普通的旧 JSP 中，并且操作是空白的，那么您将提交到同一个 JSP，并且不会执行任何操作。

如果您实际上的意思是您正在执行操作并且没有在 JSP 中看到该属性，那么“为什么不”可能取决于您使用的 S2 版本（更准确地说，OGNL 的版本）。对于更高版本，OGNL 将直接访问公共字段，早期版本需要公共 getter 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:29:23.157

```
<form name="rangeForm" method="post" action="list"> 
```

您忘记提及您的操作名称。

# javascript - 有没有办法在 Webview 中从 JavaScript 调用 Java？

> ID：11954169
> 
> 赞同：0
> 
> 时间：2012-08-14T14:11:41.907
> 
> 标签：javascript, android

有没有办法像这样在 Webview 中从 JavaScript 调用 Java

> [https://github.com/ochameau/NativeBridge](https://github.com/ochameau/NativeBridge)

在安卓？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:17:24.630

用于`addJavascriptInterface()`将 Java 对象添加到 WebView 的 JavaScript 环境中：

```
browser.addJavascriptInterface(new Locater(), "locater"); 
```

然后，您的 JavaScript 可以引用您注入的虚构对象上的方法：

```
<script language="javascript">
    function whereami() {
        var location=JSON.parse(locater.getLocation());

        document.getElementById("lat").innerHTML=location.lat;
        document.getElementById("lon").innerHTML=location.lon;
    }
</script> 
```

这些方法是在您使用的 Java 对象上实现的`addJavascriptInterface()`。

[这是一个完整的示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/WebKit/GeoWeb1)，从中提取了这些代码来演示这一点。

# c - C 信号代码混乱

> ID：11954171
> 
> 赞同：1
> 
> 时间：2012-08-14T14:11:44.010
> 
> 标签：c, linux, signals

这是我正在学习的考试的示例问题 - 问题是代码有什么问题。我在想可能是警报（3），导致它跳入while循环的延迟？或者可能不应该使用 SIGALRM 从睡眠中醒来，但我认为这不是一个有效的观点。任何反馈表示赞赏，我发现很难找到与这类东西相关的相关信息。

```
static void foo(int signo) {
  printf("Nudge-nudge\n");
  alarm(3);
}
int main() {
  sigset_t set;
  sigemptyset(&set);
  sigset(SIGALRM, foo);
  alarm(3);
  while (1) {
    sigsuspend(&set);
  }
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:19:28.740

这里的问题（可能只是其中一个）是您在一个*空*信号集上暂停进程，[`sigset(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/sigset.3.html)而不是填充它。[`sigsuspend(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/sigsuspend.2.html)修改进程信号掩码，因此`SIGALRM`被阻塞。

# php - php 中的 $_foo 和 _foo 有什么区别？

> ID：11954173
> 
> 赞同：2
> 
> 时间：2012-08-14T14:11:49.833
> 
> 标签：php, variables

php`$_foo`和in有什么区别？`_foo`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:12:45.917

第一个是指名为的[变量](http://php.net/manual/en/language.variables.php)`_foo`。第二个是一个名为的[全局常量](http://php.net/manual/en/language.constants.php)`_foo`。

默认情况下，当您尝试访问未定义的变量或[未定义的常量](http://www.php.net/manual/en/language.constants.syntax.php)时，PHP 会发出低严重性错误。在这种情况下，变量的“值”将被假定为，`null`而常量的“值”将被假定为其名称的字符串化版本——在这种情况下，`'_foo'`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T14:18:46.367

变量前面有一个美元符号 ($)。方法前面的下划线（没有美元符号）表示它是受保护的，双下划线表示它是私有的，它们不能被外部调用。

# java - 使用 JPA JSF MySql 上传、插入、检索和显示图像

> ID：11954181
> 
> 赞同：18
> 
> 时间：2012-08-14T14:12:17.170
> 
> 标签：java, mysql, image, jsf, jpa-2.0

我在问这个问题，我打算回答这个问题供其他人学习。它非常简单直接。我希望它有帮助。

就是这个

使用您的 blob 字段创建您的实体，例如客户

```
@Entity
public class Customer implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    @Lob
    private byte[] logo;

//setter and getter required 
```

例如，创建一个会话 Bean 以帮助与实体进行通信

```
@Stateless
public class CustomerService {
    @PersistenceContext(unitName = "ImageTestPU")
    private EntityManager em;

    public void persist(Object object) {
        em.persist(object);
    }

    public List<Customer> customerList(){
       return em.createNamedQuery(stat).getResultList();
    }

    public byte[] loadImage(int id){
        return em.find(Customer.class, id).getLogo();
    }

} 
```

创建你的 managedBean。记下 `private UploadedFile uploadedFile;`它的

> org.apache.myfaces.custom.fileupload.UploadedFile；我稍后会解释。

```
public class CustomerManager {
    @EJB
    private CustomerService customerService;
    private Customer customer = new Customer();
    private List<Customer> list;
    private DataModel<Customer> dataModel;
    private UploadedFile uploadedFile;

    public CustomerManager() {
    }
    public void createCustomer() throws IOException{
        customer.setId(0);
         byte[] file = uploadedFile.getBytes();
         customer.setLogo(file);
         customerService.persist(customer);
    }

    public void loadTable(){
         dataModel = new ListDataModel<Customer>();
        dataModel.setWrappedData(customerService.findStatus(customer));
    } 

    public String view(){
        customer = dataModel.getRowData();
        return "view.xhtml";
    }
//setter and getter for all
//use the loadTable method to load your model table 
```

创建 servlet 类。显示您的图像最重要。请注意以下几点，它们是最重要的

```
@WebServlet(name = "ImageServlet", urlPatterns = {"/ImageServlet"}) 
```

这是为了避免 web.xml 编辑，如果你问我会更容易。只需获取文件的url。

```
int id =Integer.parseInt(request.getParameter("id"));
        byte[] image = customerService.loadImage(id);

        response.setContentType("image/jpeg");
        ServletOutputStream outputStream = response.getOutputStream();
        outputStream.write(image);
        outputStream.close(); 
```

上面的行似乎是不言自明的。不要太担心`id`它会被用来引用 xhtml 中的图像。

所以完整的 servlet 看起来更像这样

```
@WebServlet(name = "ImageServlet", urlPatterns = {"/ImageServlet"})
public class ImageServlet extends HttpServlet {
    @EJB
    private CustomerService customerService;

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        int id =Integer.parseInt(request.getParameter("id"));
        byte[] image = customerService.loadImage(id);

        response.setContentType("image/jpeg");
        ServletOutputStream outputStream = response.getOutputStream();
        outputStream.write(image);
        outputStream.close();
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

这是将图像字节上传并保存到数据库的创建 xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk">
    <h:head>
        <title> Title</title>
    </h:head>
    <h:body>
        <h:form id="uploadForm" enctype="multipart/form-data">
            <h:panelGrid columns="2">
                username :<h:inputText value="#{customerManager.customer.username}"/>
                Status :<h:inputText value="#{customerManager.customer.status}"/>
                <h:outputLabel for="file" value="Select file" />
                <t:inputFileUpload id="file" value="#{customerManager.uploadedFile}" required="true" />
                    <h:message for="file" style="color: red;" />

                    <h:commandButton value="Create" action="#{customerManager.createCustomer()}"/>
            </h:panelGrid>
        </h:form>
    </h:body>
</html> 
```

这是列出数据库中数据的列表页面。它附有一个命令链接，可将您带到查看页面

```
<h:dataTable value="#{customerManager.dataModel}" var="list">
            <h:column>
                #{list.id}
            </h:column>

            <h:column>
                <h:commandLink value="#{list.username}" action="#{customerManager.view}"  />

            </h:column>
        </h:dataTable> 
```

总之，我希望有一天这对某人有所帮助。我希望有人花时间以最简单的方式解决问题，因为我还有很多未解决的问题，但当我做对时会继续阅读我会以最简单的方式分享给像我这样的人。对于`upload`前面提到的，请您将需要下载到 tomahawk 库。我认为人们喜欢关于它的 balusc 博客。他只是让它看起来比它应该的复杂。只需从博客中挑选您需要的东西并使用它。他是个好人，这一点没有争议。干杯

# objective-c - 何时调用 applicationWillUpdate？

> ID：11954182
> 
> 赞同：-2
> 
> 时间：2012-08-14T14:12:21.263
> 
> 标签：objective-c, macos

当它在我的项目中调用时，我无法解决。该项目是从其他人那里继承的 iOS 项目，它使用了 irrlicht。我遇到内存问题，因此尝试在 applicationWillUpdate 函数中打印出已用/可用内存。它主要在我期望的时候打印，但在某些屏幕上，它会在从一个类到另一个类的“场景转换”完成后继续打印 - 并在几秒钟后停止。

有谁知道这个函数什么时候被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:51:59.267

[-applicationWillUpdate：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSApplicationDelegate/applicationWillUpdate%3a)是在 NSApplicationDelegate 协议中定义的原生方法，与 iOS 无关（来自 AppKit，OS X 类似于 UIKit）。命令单击代码中方法的名称并查看它会将您带到哪里（cmd+单击跳转到方法定义）。

# grails - Groovy gsp：合并列表

> ID：11954184
> 
> 赞同：2
> 
> 时间：2012-08-14T14:12:29.737
> 
> 标签：grails, groovy, gsp

我正在尝试将许多列表合并到 gsp 中的单个列表中。例如：

1.  A 类有 B 类实例的列表

2.  当我尝试使用表达式时：`${a.findAll(some_condition).b}`我正在获取 B 实例列表的列表

我希望表达式返回一个列表，所有实例都`b`属于每个`a`满足`some_condition`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:19:06.367

你能试一下吗：

```
${a.findAll(some_condition).b.flatten()} 
```

那应该会给你一个列表

```
${a.findAll(some_condition).b.flatten().unique()} 
```

还应该删除重复项

# php - 服务器上 cookie 的 PHP 问题

> ID：11954187
> 
> 赞同：0
> 
> 时间：2012-08-14T14:12:38.157
> 
> 标签：php

我正在检查 cookie 是否存在。代码在本地主机上运行完美，但不能在服务器上运行。

```
if(!isset($_COOKIE['checkuser']))
{
  // Create a cookie
}
else
{
  // do other other action
} 
```

如果从网络服务器访问，则不会加载页面。但在本地主机上它的工作正常。我需要为此做一些设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:24:08.957

如果您的错误是“页面未加载”，那么它几乎肯定与您发布的代码无关。您在评论中提到您正在使用未发布的代码进行一些数据库调用 - 这比`isset()`调用更容易引起麻烦。

你看到什么错误？如果您只看到一个空白页面，则出于安全目的，这可能是一个语法错误，它被记录到服务器的错误日志而不是屏幕上。检查服务器的错误日志以获取相关消息。

您的服务器可能正在运行不同版本的 PHP 或不同的安全级别（例如 PHP 安全模式），这导致它在服务器上失败，但在您的机器上却没有。或者，它可能无法连接到服务器的数据库。

如果这些信息不足以解决您的问题，请使用更多信息更新您的问题（更多代码和/或确切的错误消息将是一个好的开始）。

# ruby-on-rails - 将多个版本的 libyaml 与 RVM 一起使用

> ID：11954193
> 
> 赞同：1
> 
> 时间：2012-08-14T14:12:47.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, macos, rvm

我在 OSX Mountain Lion 上使用 RVM 来管理我的各种 Ruby 安装，其中我有 1.9.3 的 32 位和 64 位版本。我遇到的问题是 32 位和 64 位 Ruby 安装需要不同的 libyaml 安装，但它们都在同一位置 (~/.rvm/usr) 查找 libyaml。所以安装 32 位 libyaml 会导致运行 64 位 Ruby 时出错，反之亦然。

任何解决方案的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:10:47.053

我最终使用了 Homebrew：

```
brew install --universal libyaml 
```

然后我创建了一个符号链接，以便 rvm 使用正确的 libyaml：

```
ln -s /usr/local/Cellar/libyaml/0.1.4 ~/.rvm/usr 
```

这让我启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:38:37.917

您必须知道将 libyaml 构建为两个平台的胖二进制文件的参数 - 然后可以将单个位置用于两者...如果您找到它的参数，然后为[rvm 打开一张票](https://github.com/wayneeseguin/rvm/issues/new)以尊重以下标志`--32`// for`--64``--universal``rvm pkg install ...`

# c# - 使用 NHibernate 在 C# 中使用附加数据映射联结表

> ID：11954197
> 
> 赞同：1
> 
> 时间：2012-08-14T14:12:54.673
> 
> 标签：c#, model-view-controller, nhibernate-mapping

假设我有一个 Parent 和 Child 表，以及一个维护它们之间关系的 ParentChild 表。

父类：

```
public class Parent
{
    public virtual int ParentId { get; set; }
    public virtual bool Deleted { get; set; }

     public Parent()
     {
       _children = new HashedSet<Child>();
     }

     protected ISet<Child> _children;

     public virtual ISet<Child> children
     {
         get { return _children; }
         protected set { _children = value; }
     }
} 
```

儿童班：

```
public class Child
{
    public virtual int ChildId { get; set; }
    public virtual bool Deleted { get; set; }

     public Child()
     {
       _parents = new HashedSet<Parent>();
     }

     protected ISet<Parent> _parents;

     public virtual ISet<Parent> parents
     {
         get { return _parents; }
         protected set { _parents = value; }
     }
} 
```

和 ParentChild 类：

```
public class ParentChild 
{
    public virtual int ParentChildId { get; set; }
    public virtual Parent Parent { get; set; }
    public virtual Child Child { get; set; }
    public virtual int DisplayOrderIndex { get; set; }
    public virtual bool Deleted { get; set; }
} 
```

我将如何映射这些，以便我可以对父对象进行更新，该对象还将使用附加数据（不仅仅是父/子 ID）和子表更新联结表。

现在，我正在做：

父地图

```
public ParentMap()
{
    Table("Parent");
    Id(x => x.ParentId);
    Map(x => x.Deleted);
    HasMany(x => x.ParentChild)
        .Table("Parent_Child")
        .KeyColumn("ParentID")
        .Access.CamelCaseField(Prefix.Underscore)
        .Cascade.AllDeleteOrphan()
        .LazyLoad();
} 
```

儿童地图

```
public ChildMap()
{
    Table("Child");
    Id(x => x.ChildId);
    Map(x => x.Deleted);
    HasMany(x => x.ParentChild)
        .Table("Parent_Child")
        .KeyColumn("ChildID")
        .Access.CamelCaseField(Prefix.Underscore)
        .Cascade.AllDeleteOrphan()
        .LazyLoad();
} 
```

父子图

```
public ParentChildMap()
{
    Table("Parent_Child");
    Id(x => x.ParentChildId, "Parent_ChildID");
    References(x => x.Parent, "ParentID");
    References(x => x.Child, "ChildID");
    Map(x => x.DisplayOrderIndex);
    Map(x => x.Deleted);
} 
```

但是当我从 Parent 存储库中提取时，Parent 对象的 ParentChild 集合中的 Child 是 Castle.Proxy 而不是 Child 类型。

应该如何进行这种映射以达到预期的结果？

# .net - 如何防止 C++/CLI 链接器删除未引用的内部类型？

> ID：11954198
> 
> 赞同：0
> 
> 时间：2012-08-14T14:12:55.647
> 
> 标签：.net, c++-cli, visual-c++-2005

我的 .NET 程序集中有一个非公共类型，我从这个程序集中使用反射加载它。

这在调试版本中效果很好，但在发布版本中，链接器会删除这种类型，因为：

*   它是内部的
*   它没有在程序集的代码中引用

我可以为整个项目关闭此行为或将类型公开，但这不是我想要的。相反，我正在寻找一种方法来告诉链接器在任何情况下都添加类型。理想情况下，与[System::Runtime::CompilerServices::DiscardableAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.discardableattribute%28v=vs.80%29.aspx)完全相反。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:18:51.233

最简单的方法是引用类型。（我认为有理由使用反射来查找类型，而不是直接引用它。）您可以在进行反射的方法中执行此操作，或者在任何公共类型的静态构造函数中执行此操作。无论您在哪里执行此操作，只要您记录正在发生的事情以及您这样做的原因，就应该没问题。

`Type^ keepThis = InternalOnlyClass::typeid;`in a method 可能就是您所需要的。如果编译器优化了该语句，那么`internal: static Type^ keepThis = InternalOnlyClass::typeid;`应该可以解决问题。

# installation - NServiceBus 没有使用 RunMeFirst.bat 安装 RavenDB

> ID：11954199
> 
> 赞同：1
> 
> 时间：2012-08-14T14:12:57.840
> 
> 标签：installation, nservicebus, ravendb

我们正在尝试使用生产集成在测试机器上设置 3.2.7 作为服务。Raven DB 不会下载和安装。

我试过 NServiceBus.Host.exe /installInfrastructure。我试过 NServiceBus.Host32.exe /installInfrastructure。从来没有运气。

看起来机器没有拉下 RavenDB 二进制文件。

我已经成功安装在几台运行 Win 7 Pro 64/32 的开发机器上。

（我打算昨天发布这个问题，因为从那时起我一直在解决这个问题，但正如我发布它时我发现了这个问题 - 请参阅下面的答案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:23:54.350

致 Andres & Udi - 安装程序正在查看是否有任何东西在 8080 上运行，如果有，它甚至不会下载 RavenDB。是否可以改为检查服务器上是否正在运行 RavenDB 实例。

我们在该端口上运行了另一个 Web 服务，只是更改了它的端口。然后 RavenDB 安装就好了。虽然这在网站上有所概述：http: [//docs.particular.net/nservicebus/ravenb/installation](http://docs.particular.net/nservicebus/ravendb/installation)

如果安装程序可以说“端口 8080 正在使用，而不是安装 RavenDB”，那就太好了。更好的是使用 sc 工具（或类似工具）来验证 RavenDB 是否已实际安装。

像这样的东西：

```
sc query RavenDB 
```

# c# - 列表 暴露为 IEnumerable

> ID：11954205
> 
> 赞同：1
> 
> 时间：2012-08-14T14:13:10.450
> 
> 标签：c#, generics, .net

我了解两者之间的层次结构并知道如何在它们之间进行转换，但是声明这样的列表有什么根本错误吗？

```
IEnumerable<int> _bookmarkedDeals = new List<int>(); 
```

我不需要在任何时候更改列表，它可以作为一个整体创建或重新创建。

作为替代方案，可能这

```
IEnumerable<int> _bookmarkedDeals = Enumerable.Empty<int>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:16:49.013

好吧，在这种情况下，`_bookmarkedDeals`将是空的，所以声明有点没用。话虽如此，将列表视为 IEnumerable 并没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:20:56.913

（与这里的所有答案不同..）**是**的。这个声明有一些非常错误的地方。`List<T>`如果不一直投射回列表，您将无法使用任何功能。

**如果以后不执行任何列表操作，最好**从您的方法中返回此类型。但是，当您采用相同的方法时-您只是使您的生活变得更加艰难，并且表现不佳（因为演员表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:15:16.657

您的声明绝对没有问题，尽管有些人确实喜欢在没有任何抽象的情况下精确地声明变量类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:15:28.023

该声明没有任何问题，但除非您有任何特定限制，否则它`IList<int>`是一个更适合列表的界面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:15:51.157

没有什么不对。

如果您从不以任何方式更改列表，您可能会使用数组 - 它比列表略轻。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T14:15:57.197

它从根本上没有错，但是为什么要削减 List 提供的一些功能（IEnumerable 没有）？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T14:16:13.890

没毛病，设计不错。阅读[Arrays Considered Somewhat Harmful](http://blogs.msdn.com/b/ericlippert/archive/2008/09/22/arrays-considered-somewhat-harmful.aspx)。关于选择正确界面的精彩阅读。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T14:16:46.573

不，这没有什么问题。

如果这是一个局部变量，我认为仅使用`var`创建一个类型的变量没有任何好处`List<int>`。如果您只是枚举，则完全没有害处。如果它是一个领域，也许是公开暴露的事件，那么不将其暴露为 a`List<int>`或`IList<int>`保留具体类型的自由选择可能是非常明智的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-14T14:16:51.453

没有语法问题，但我看不出它有什么用处。如果您不在此行中插入任何项目，则此列表将始终为空，除非您将其转换回`List<int>`，那么为什么要将其声明为`IEnumerable<int>`？

# java - 从可序列化类中使用 Serializable 启动意图

> ID：11954209
> 
> 赞同：0
> 
> 时间：2012-08-14T14:13:18.910
> 
> 标签：java, android, serializable

我正在尝试从实现 Serializable 的类中启动一个 Intent。我得到一个 IOException，上面写着“Parcelable 遇到 IOException 写入 Serializable 对象”。这就是我试图在实现 Serializable 的类的方法中做的事情：

```
thisOffer = this;

row.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View v) {

    Intent intent = new Intent(applicationContext, ActivityOffer.class);
    intent.putExtra("offer", thisOffer);

    activity.startActivity(intent);
}
}); 
```

一切正常，我取消了 putExtra() 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:19:40.843

您的班级中可能有一些字段没有实现`Serializable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:20:29.390

你不能像这样在 putExtra 中传递整个活动......

在 putextra 方法中，您可以传递基本数据类型和其他一些类...

只显示 putExtra 方法的第二个参数......

# php - 致命错误：在第 25 行调用 C:\xampp\htdocs\myFolder\exceltest.php 中的未定义函数 mssql_fetch_array()

> ID：11954213
> 
> 赞同：0
> 
> 时间：2012-08-14T14:13:23.650
> 
> 标签：php, sql-server-2008, iis-7, windows-server-2008-r2

我正在尝试将数据从 MSSQL 表导出到 Excel。下面是我的代码。问题是我收到以下错误：

```
 Fatal error: Call to undefined function mssql_fetch_array() in C:xampp\code.php on line 25 
```

我正在运行 Windows Server 2008 R2、IIS7、SQL Server 2008、PHP 版本 5.4.4。

我已取消注释该行：“extension=php_mssql.dll”在 C:\xampp\php\php.ini 中找到

```
 <?php
// load library
require 'include\php-excel.class.php';

$i = 0; // used as a counter

$myServer = "SERVERNAME\SQLEXPRESS";
$myUser = "UserName";
$myPass = "xxxxxx";
$myDB = "dbName";

$conn = new COM ("ADODB.Connection") or die("Cannot start ADO");

$connStr = "PROVIDER=SQLOLEDB;SERVER=".$myServer.";UID=".$myUser.";PWD=".$myPass.";DATABASE=".$myDB;
$conn->open($connStr); //Open the connection to the database

$result = "SELECT Col1, Col2, Col3 FROM myTable WHERE Col3='myCondition'";

//$rs = $conn->execute($result);
//$num_columns = $rs->Fields->Count();

    // create data array and print headers on the first row
    $data = array(1 => array ('No.', 'Col1', 'Col2', 'Col3'));

    while($row=mssql_fetch_array($result)) {
//include additional rows
array_push($data, array($i, $row['Col1'], $row['Col2'], $row['Col3']));
$i++;
}

// If no results, indicate this on the first row
if ($i == 0){
$data = array(1 => array ('No results', 'empty', 'empty', 'empty'));
                        }

//generate file (constructor parameters are optional)
$xls = new Excel_XML('UTF-8', false, 'My Test Sheet');
$xls->addArray($data);
$xls->generateXML('MyReport');
    ?> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:48:13.200

PHP5.3 以后不支持 mssql 函数。如果你检查你的 PHP ext 文件夹，你会发现不再有 php_mssql.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:08:52.127

您正在使用 ADODB COM 创建数据库连接。这与使用`mssql_xx`库不同。

你不能在两者之间混合和匹配——它们不兼容。

无论如何，您显然没有安装该`mssql_xx`库（我什至不确定它是否受支持），所以您不能使用它。

在您失败的呼叫上方`mssql_fetch_array()`，您有一些注释掉的行：

```
//$rs = $conn->execute($result);
//$num_columns = $rs->Fields->Count(); 
```

不知道您为什么将这些注释掉，因为您将需要它们或类似的东西。特别是其中的第一行。之后，您需要使用 ADODB 等价于`mssql_fetch_array()`读取循环中的记录。

但是，我的建议是放弃所有这些，转而使用 PDO 库。PDO 支持 MS SQL 数据库，并且是标准 PHP，与您在此处尝试使用的 ADODB 不同。

在此处查看 PDO 库的 PHP 手册：http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:15:44.633

取消 MS SQL 库的注释后，您是否重新启动了 Web 服务器以使更改生效？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T13:37:20.317

对于`sql`，我们可以使用`sqlsrv_fetch_array`with `sqlsrv_query`as：

```
$sql_query = "SELECT Col1, Col2, Col3 FROM myTable WHERE Col3='myCondition'";
$result = sqlsrv_query($conn,$sql_query);
while( $row = sqlsrv_fetch_array( $result, SQLSRV_FETCH_ASSOC) ) {
        echo $row['Col1'];
        /*etc codes here*/
} 
```

# javascript - 在页面之间保留 JavaScript 值

> ID：11954224
> 
> 赞同：2
> 
> 时间：2012-08-14T14:13:39.797
> 
> 标签：javascript, html, cookies, static

我正在尝试使用 HTML 和 JavaScript 在网页上创建测验。每个问题（有 4 个选项可供选择）都是一个单独的 html 文件，但使用相同的 JavaScript 文件来评估输入的选项是对还是错。

但是，我正在努力寻找一种方法来跟踪用户提供的正确答案数量以计算他/她的分数。

是否有在 JavaScript 中创建静态或类静态变量的方法？涉及 cookie 的解决方案也值得赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:18:57.787

一种可能的解决方案是将问题文件中的 HTML 加载到父页面中，但在该页面上进行整个测验。这样，您仍然可以灵活地为每个问题设置不同的页面，但对于浏览器来说，它们都是一页。此外，在 Javascript 中创建或跟踪的任何变量都将在整个测验中持续存在。

这很容易用 Jquery 的[`.load`](http://api.jquery.com/load/)函数来完成。您的页面中间有一个 div，它从您导航到的任何 HTML 页面加载其内容。

请记住，我很容易进入 Javascript 并更改正确答案的数量。事实上，任何客户端解决方案都存在这个问题。如果这不仅仅是为了好玩，而且准确性很重要，您可能希望在每个问题后将结果发送回您的服务器。这样，无论您如何实施测验，结果都会保留在您的最后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:15:54.193

看看[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/) 这可以让您轻松设置和读取 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:20:09.987

您可以将数据保存在 cookie 中。但是，用户可以更改 cookie 并产生更好的结果。在这种情况下，使用 session 是更好的选择。因为您在客户端存储的任何内容都是不安全的。

但是最好使用 xhr 以 json 格式获取问题并将它们显示在浏览器中并将跟踪保存在内存中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:22:42.853

这些天来，我将专注于制作一个单页应用程序，而不是依赖页面加载。这不仅具有解决您的问题的优势，还意味着为用户提供更灵敏、更快的体验。

如果您必须使用页面转换，并且您很乐意只使用现代浏览器，请查看**[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)**。比 cookie 更容易使用和更灵活——它就像一个序列化的 JavaSCript 对象一样工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:20:48.950

`localStorage`如果您正在开发 HTML5 应用程序，您可能希望研究 DOM 存储设施，例如`sessionStorage`：[https ://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

以下是一些有用的资源/信息：

[http://ejohn.org/blog/dom-storage/](http://ejohn.org/blog/dom-storage/)

[http://viralpatel.net/blogs/introduction-html5-domstorage-api-example/](http://viralpatel.net/blogs/introduction-html5-domstorage-api-example/)

[http://msdn.microsoft.com/en-us/library/cc197062(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc197062(v=vs.85).aspx)

# c# - 如何正确配置 WCF REST 服务端点？

> ID：11954228
> 
> 赞同：0
> 
> 时间：2012-08-14T14:13:45.093
> 
> 标签：c#, wcf, rest, service, endpoint

我计划根据不同的合同托管多个 RESTful 服务。有很多类似的问题，但我的 web.config 文件看起来不同，我不知道为什么。

这是我的 web.config 文件的一部分：

```
 <standardEndpoints>
          <webHttpEndpoint>
            <standardEndpoint name="" 
                              helpEnabled="true" 
                              automaticFormatSelectionEnabled="true">
            </standardEndpoint>
          </webHttpEndpoint>
    </standardEndpoints> 
```

这是我的 Web 应用程序中的服务声明：

```
 RouteTable.Routes.Add(new ServiceRoute("bob/chocolate", new WebServiceHostFactory(), typeof(RESTchocolate)));
    RouteTable.Routes.Add(new ServiceRoute("bob/vanilla", new WebServiceHostFactory(), typeof(RESTvanilla))); 
```

只有第一个 Route 似乎在工作（使用 .NET 的漂亮的“bob/chocolate/help”端点功能进行测试以列出可用的方法）这并不让我感到惊讶，但是我应该如何修改我的 web.config 文件？你们中有人知道怎么做吗？我需要修改其他东西吗？

对于那些想知道的人，我的合同是有效的。

如果我尝试在浏览器中到达第二个端点，我会在漂亮的 .NET 显示中看到“找不到端点”。

编辑 ：

我将以下节点添加到我的配置文件中......

```
 <services>
      <service name="chocolate">
        <endpoint address="bob/chocolate" binding="basicHttpBinding" name="chocolate" contract="RESTapi.IRESTchocolate" />
      </service>
      <service name="vanilla">
        <endpoint address="bob/vanilla" binding="basicHttpBinding" name="vanilla" contract="RESTapi.IRESTvanilla" />
      </service>
    </services> 
```

但我得到了同样的行为。问题仍然在这里

编辑：这是我要求的完整配置文件（没有上面的节点）：

```
 <?xml version="1.0"?>
    <configuration>
      <system.web>
        <compilation debug="true" targetFramework="4.0" />
        <authentication mode="None"></authentication>
      </system.web>
      <system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
        </serviceHostingEnvironment>
         <standardEndpoints>
          <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
          </webHttpEndpoint>
        </standardEndpoints>
      </system.serviceModel>
      <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
      </system.webServer>

    </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:00:46.150

我真的建议您安装[WCF REST 服务模板 40](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd?SRC=VSIDE)并查看引导程序。

网页配置

```
<standardEndpoints>
  <webHttpEndpoint>
    <!-- 
        Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
        via the attributes on the <standardEndpoint> element below
    -->
    <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
  </webHttpEndpoint>
</standardEndpoints> 
```

全球.asax

```
// Edit the base address of Service1 by replacing the "Service1" string below
RouteTable.Routes.Add(new ServiceRoute("Service1", new WebServiceHostFactory(), typeof(Service1))); 
```

# php - PHP如何动态调用定义

> ID：11954229
> 
> 赞同：1
> 
> 时间：2012-08-14T14:13:50.187
> 
> 标签：php, string, dynamic, concatenation

我想做一个连接来调用我的定义，但 php 不想要。

举例：

```
define('FOO_1', 'string 1');
define('FOO_2', 'string 2'); 
```

我想动态调用它：

```
$id = 1;
echo FOO_.$id; 
```

但它显示：

> FOO_1
> （不是“字符串 1”）；

如何动态调用我的定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:15:37.000

通过使用`constant()`

```
echo constant('FOO_'.$id); 
```

请参阅此处的文档：http: [//php.net/constant](http://php.net/constant)

*归功于 Yent*

# c++ - Debug 和 Release 的结果不同

> ID：11954238
> 
> 赞同：5
> 
> 时间：2012-08-14T14:14:17.693
> 
> 标签：c++, visual-studio-2010, openmp, release-mode, debug-mode

我的问题是在比较调试与发布时我的代码返回不同的结果。我检查了两种模式都使用 /fp:precise，所以这应该不是问题。我对此的主要问题是完整的图像分析（它是一个图像理解项目）是完全确定的，其中绝对没有随机性。

另一个问题是我的发布版本实际上*总是*返回相同的结果（图像为 23.014），而调试返回一些介于 22 和 23 之间的随机值，这是不应该的。我已经检查过它是否可能与线程相关，但算法中唯一的多线程部分在调试和发布时返回完全相同的结果。

这里还可能发生什么？

**Update1：**​​我现在发现负责此行为的代码：

```
float PatternMatcher::GetSADFloatRel(float* sample, float* compared, int sampleX, int compX, int offX)
{
    if (sampleX != compX)
    {
        return 50000.0f;
    }
    float result = 0;

    float* pTemp1 = sample;
    float* pTemp2 = compared + offX;

    float w1 = 0.0f;
    float w2 = 0.0f;
    float w3 = 0.0f;

    for(int j = 0; j < sampleX; j ++)
    {
        w1 += pTemp1[j] * pTemp1[j];
        w2 += pTemp1[j] * pTemp2[j];
        w3 += pTemp2[j] * pTemp2[j];
    }               
    float a = w2 / w3;
    result = w3 * a * a - 2 * w2 * a + w1;
    return result / sampleX;
} 
```

**更新 2：** 这不能用 32 位代码重现。虽然调试和发布代码对于 32 位总是会产生相同的值，但它仍然与 64 位发布版本不同，并且 64 位调试仍然返回一些完全随机的值。

**Update3：** 好的，我发现它肯定是由 OpenMP 引起的。当我禁用它时，它工作正常。（Debug 和 Release 都使用相同的代码，并且都激活了 OpenMP）。

以下是给我带来麻烦的代码：

```
#pragma omp parallel for shared(last, bestHit, cVal, rad, veneOffset)
for(int r = 0; r < 53; ++r)
{
    for(int k = 0; k < 3; ++k)
    {
        for(int c = 0; c < 30; ++c)
        {
            for(int o = -1; o <= 1; ++o)
            {
                /*
                r: 2.0f - 15.0f, in 53 steps, representing the radius of blood vessel
                c: 0-29, in steps of 1, representing the absorption value (collagene)
                iO: 0-2, depending on current radius. Signifies a subpixel offset (-1/3, 0, 1/3)
                o: since we are not sure we hit the middle, move -1 to 1 pixels along the samples
                */

                int offset = r * 3 * 61 * 30 + k * 30 * 61 + c * 61 + o + (61 - (4*w+1))/2;

                if(offset < 0 || offset == fSamples.size())
                {
                    continue;
                }
                last = GetSADFloatRel(adapted, &fSamples.at(offset), 4*w+1, 4*w+1, 0);
                if(bestHit > last)
                {
                    bestHit = last;
                    rad = (r+8)*0.25f;
                    cVal = c * 2;
                    veneOffset =(-0.5f + (1.0f / 3.0f) * k + (1.0f / 3.0f) / 2.0f);
                    if(fabs(veneOffset) < 0.001)
                        veneOffset = 0.0f;
                }
                last = GetSADFloatRel(input, &fSamples.at(offset), w * 4 + 1, w * 4 + 1, 0);
                if(bestHit > last)
                {
                    bestHit = last;
                    rad = (r+8)*0.25f;
                    cVal = c * 2;
                    veneOffset = (-0.5f + (1.0f / 3.0f) * k + (1.0f / 3.0f) / 2.0f);
                    if(fabs(veneOffset) < 0.001)
                        veneOffset = 0.0f;
                }
            }
        }
    }
} 
```

注意：在 Release 模式和 OpenMP 激活的情况下，我得到与停用 OpenMP 相同的结果。Debug 模式和 OpenMP 激活得到不同的结果，OpenMP deactivated 得到与 Release 相同的结果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T14:18:24.270

至少有两种可能：

1.  打开优化可能会导致编译器重新排序操作。与在调试模式下执行的顺序相比，这可能会在浮点计算中引入微小的差异，其中不会发生操作重新排序。这*可能会*解释调试和发布之间的数值差异，但不*考虑*调试模式下从一次运行到下一次运行的数值差异。
2.  您的代码中存在与内存相关的错误，例如读取/写入超出数组的边界、使用未初始化的变量、使用未分配的指针等。尝试通过内存检查器运行它，例如出色的 Valgrind，以识别此类问题。与内存相关的错误*可能会*导致非确定性行为。

如果您在 Windows 上，则[Valgrind](http://en.wikipedia.org/wiki/Valgrind)不可用（遗憾），但您可以[在此处](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)查找替代列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T13:00:18.787

为了详细说明我的评论，这很可能是您问题的根源：

```
#pragma omp parallel for shared(last, bestHit, cVal, rad, veneOffset)
{
    ...
    last = GetSADFloatRel(adapted, &fSamples.at(offset), 4*w+1, 4*w+1, 0);
    if(bestHit > last)
    { 
```

`last`仅在再次读取之前分配给它，因此`lastprivate`如果您确实需要并行区域之外的最后一次迭代的值，它是一个很好的变量候选者。否则就成功了`private`。

访问`bestHit`、`cVal`、`rad`和`veneOffset`应由临界区同步：

```
#pragma omp critical
if (bestHit > last)
{
    bestHit = last;
    rad = (r+8)*0.25f;
    cVal = c * 2;
    veneOffset =(-0.5f + (1.0f / 3.0f) * k + (1.0f / 3.0f) / 2.0f);
    if(fabs(veneOffset) < 0.001)
        veneOffset = 0.0f;
} 
```

请注意，默认情况下，除了`parallel for`循环的计数器和在并行区域内定义的那些变量之外，所有变量都是共享的，即`shared`除非您也应用该子句，否则您案例中的子句不会执行任何操作`default(none)`。

您应该注意的另一件事是，在 32 位模式下，Visual Studio 使用 x87 FPU 数学，而在 64 位模式下，它默认使用 SSE 数学。x87 FPU 使用 80 位浮点精度进行中间计算（即使`float`只涉及计算），而 SSE 单元仅支持标准的 IEEE 单精度和双精度。将 OpenMP 或任何其他并行化技术引入 32 位 x87 FPU 代码意味着在某些点，中间值应转换回单精度，`float`如果执行足够多次，则存在轻微或显着差异（取决于算法）可以在串行代码和并行代码的结果之间观察到。

根据您的代码，我建议以下修改后的代码将为您提供良好的并行性能，因为每次迭代都没有同步：

```
#pragma omp parallel private(last)
{
    int rBest = 0, kBest = 0, cBest = 0;
    float myBestHit = bestHit;

    #pragma omp for
    for(int r = 0; r < 53; ++r)
    {
        for(int k = 0; k < 3; ++k)
        {
            for(int c = 0; c < 30; ++c)
            {
                for(int o = -1; o <= 1; ++o)
                {
                    /*
                    r: 2.0f - 15.0f, in 53 steps, representing the radius of blood vessel
                    c: 0-29, in steps of 1, representing the absorption value (collagene)
                    iO: 0-2, depending on current radius. Signifies a subpixel offset (-1/3, 0, 1/3)
                    o: since we are not sure we hit the middle, move -1 to 1 pixels along the samples
                    */

                    int offset = r * 3 * 61 * 30 + k * 30 * 61 + c * 61 + o + (61 - (4*w+1))/2;

                    if(offset < 0 || offset == fSamples.size())
                    {
                        continue;
                    }
                    last = GetSADFloatRel(adapted, &fSamples.at(offset), 4*w+1, 4*w+1, 0);
                    if(myBestHit > last)
                    {
                        myBestHit = last;
                        rBest = r;
                        cBest = c;
                        kBest = k;
                    }
                    last = GetSADFloatRel(input, &fSamples.at(offset), w * 4 + 1, w * 4 + 1, 0);
                    if(myBestHit > last)
                    {
                        myBestHit = last;
                        rBest = r;
                        cBest = c;
                        kBest = k;
                    }
                }
            }
        }
    }
    #pragma omp critical
    if (bestHit > myBestHit)
    {
        bestHit = myBestHit;
        rad = (rBest+8)*0.25f;
        cVal = cBest * 2;
        veneOffset =(-0.5f + (1.0f / 3.0f) * kBest + (1.0f / 3.0f) / 2.0f);
        if(fabs(veneOffset) < 0.001)
        veneOffset = 0.0f;
    }
} 
```

它只存储在每个线程中给出最佳命中的参数值，然后在它计算的并行区域的末尾`rad`，`cVal`并`veneOffset`基于最佳值。现在只有一个临界区，它位于代码的末尾。你也可以绕过它，但你必须引入额外的数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T14:20:47.180

需要仔细检查的一件事是所有变量都已初始化。很多时候未优化的代码（调试模式）会初始化内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T14:26:35.187

我会说调试中的变量初始化而不是发布中的变量初始化。但是您的结果不会支持这一点（发布时的可靠结果）。

您的代码是否依赖于任何特定的偏移量或大小？调试构建会在一些分配周围放置保护字节。

它可能与浮点有关吗？

调试浮点堆栈不同于为提高效率而构建的版本。

看这里：[http ://thetweaker.wordpress.com/2009/08/28/debugrelease-numerical-differences/](http://thetweaker.wordpress.com/2009/08/28/debugrelease-numerical-differences/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T14:33:35.643

几乎任何未定义的行为都可以解释这一点：未初始化的变量、流氓指针、同一对象的多次修改而没有中间序列点等等。结果有时不可再现的事实在某种程度上为未初始化的变量提供了支持，但它指针问题或边界错误也可能发生。

请注意，优化可能会改变结果，尤其是在 Intel 上。优化可以改变哪些中间值溢出到内存，如果你没有仔细使用括号，甚至表达式中的评估顺序。（众所周知，在机器浮点中，`(a + b) + c) != a + (b + c)`。）结果仍然应该是确定性的：根据优化程度，您将获得不同的结果，但对于任何一组优化标志，您应该获得相同的结果。

# vim - vim 中的 Unicode 打印

> ID：11954241
> 
> 赞同：5
> 
> 时间：2012-08-14T14:14:28.180
> 
> 标签：vim, unicode, printing, gnome

我正在处理包含大量 unicode 字符（≼、⊓、⊔、...）的文本文件。Vim 可以很好地显示它们，但是当我打印它们时，它们会被通用字符替换。Gedit 打印它们没有问题，但是启动另一个编辑器只是为了打印有点痛苦。

有没有办法让 vim（在 Linux/Gnome 上）正确打印？我尝试使用`vim-gnome`，希望它会使用与 gedit 相同的基础架构，但事实并非如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:29:43.980

Vim 只能使用 8 位编码进行打印。如果存在包含所有这些字符的编码，那么您只需要使用

```
set printencoding={encoding} 
```

如果没有，那么您不能直接从 vim 打印它。您可以使用`:TOhtml`@DaoWen 建议的命令，执行

```
:TOhtml
:w /tmp/print.html
:!command-that-makes-browser-print-a-file(I-do-not-know-one) /tmp/print.html
:!rm /tmp/print.html 
```

. 您还可以使用我的[formatvim](http://www.vim.org/scripts/script.php?script_id=3113)插件通过 latex 将其打印为 pdf（不要忘记提交错误报告：latex-xcolor 输出未经测试）：

```
:Format format latex-xcolor to /tmp/print.tex
:!pdflatex /tmp/print.tex && lp /tmp/print.pdf && rm /tmp/print.* 
```

（您也可以使用 html 输出，但这不会让我知道打印它的命令）。当然，您可以将它们映射到单个键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:19:37.560

尝试使用[:TOhtml](http://vimdoc.sourceforge.net/htmldoc/syntax.html#%3aTOhtml)命令将文档转换为以 HTML 格式输出缓冲区。您应该能够从浏览器打印生成的文件。

# javascript - 骨干为collection.models输出空数组？

> ID：11954243
> 
> 赞同：1
> 
> 时间：2012-08-14T14:14:34.430
> 
> 标签：javascript, backbone.js, backbone-views, backbone-relational

有问题，如果我这样做

```
apples = new Apples
apples.fetch()
console.log apples
console.log apples.models 
```

`console.log apples`将放出 Apples Collection，并`models: Array(10)`在对象内列出。

但是，`console.log apples.models`输出一个空数组。

为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:32:22.957

我刚试过这个，它对我有用。Backbone 集合有一些开箱即用的下划线方法。尝试使用 toArray 来获取 apples 集合中的苹果模型。

```
 apples.toArray() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:43:48.190

您是在执行 fecth() 方法后立即尝试 console.log 集合还是等待回调通过使用执行

```
apples.on('reset', function(){ console.log(this.models);} ,this); 
```

?

# php - Facebook PHP SDK 发布活动

> ID：11954247
> 
> 赞同：0
> 
> 时间：2012-08-14T14:14:48.160
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试使用 PHP SDK 在 Facebook 上向用户发布**活动提要**，这可能吗？还是仅使用 Javascript？

这是我发布到用户墙的基本代码：

```
$facebook->api('/me/feed', 'POST',
     array(
         'link' => 'www.example.com',
         'message' => 'Posting with the PHP SDK!'
     )); 
```

我想发布到用户活动，这是如何完成的？我已经尝试过下面的代码，但没有成功。

```
$facebook->api('/me/application:view', 'POST',
         array(
             'item' => 'www.example.com',
         )); 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:49:57.573

我现在没有在我的应用程序中使用 opengraph，但希望这会有所帮助： [https ://developers.facebook.com/docs/opengraph/tutorial/#publish](https://developers.facebook.com/docs/opengraph/tutorial/#publish)

还要检查这个答案（PHP中有一个例子）： [https ://stackoverflow.com/a/11383901/173299](https://stackoverflow.com/a/11383901/173299)

希望它可以帮助你。

# actionscript-3 - 补间期间的夹紧

> ID：11954252
> 
> 赞同：0
> 
> 时间：2012-08-14T14:15:15.520
> 
> 标签：actionscript-3, gsap

我正在使用 Greensock 的 TweenLite (AS3) 来放大和缩小图片。在角落附近缩小时会变得很棘手。我想知道是否有办法在补间期间限制宽度/高度/x/y，使其永远不会超出范围。

目前，我有一个在补间完成时调用的“修复器”方法，但这并不理想。

我做了一个演示来说明我的意思，试着在角落附近缩小。（鼠标滚动缩放，点击平移...）

[http://cloudchamber.knapnokgames.com/CCMedia/CCImageViewer/CCImageViewer.html](http://cloudchamber.knapnokgames.com/CCMedia/CCImageViewer/CCImageViewer.html)

更新：这是补间代码：

```
TweenLite.to(content, 0.3, { 
    width : _nativeWidth * newZoom , 
    height : _nativeHeight * newZoom,   
    x : (((content.x - origin.x) / content.width) * (_nativeWidth * newZoom)) + origin.x,
    y : (((content.y - origin.y) / content.height) * (_nativeHeight * newZoom)) + origin.y,
    onComplete: ClampContentPosition}); 
```

X 和 Y 计算可能不是最好的，但它们有效。他们花了我一段时间才弄清楚；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:48:39.557

我建议您在创建补间**之前**运行您的逻辑，因此您首先要为补间提供调整后的值。或者您可以按照 Neil 的建议使用 onUpdate。

# configuration - 如何在 Nginx 中将 index.html 设置为根文件？

> ID：11954255
> 
> 赞同：60
> 
> 时间：2012-08-14T14:15:28.310
> 
> 标签：configuration, nginx

如何为域名设置 index.html，例如[https://www.example.com/](https://www.example.com/) - 将用户引导至根目录中的 index.html。

我尝试了不同的方法，例如：

```
server {
    # some configs

    location = / {
            index index.html;
            fastcgi_index index.html;
    }
or 
    location / {
            index index.html;
            fastcgi_index index.html;
    }

} 
```

没有什么帮助我。

还有其他一些带有 location 关键字的配置，尽管我也对它们进行了评论。

`server {`子句中的其他“位置”配置：

```
location ~ .*(css|htc|js|bmp|jp?g|gif|ico|cur|png|swf|htm?|html)$ {
        access_log off;
        root $www_root;
}

location ~ \.php$
{
        include                         /etc/nginx/fastcgi_params;
        index                           index.html;
        fastcgi_index                   index.html;
        fastcgi_param SCRIPT_FILENAME   $www_root$fastcgi_script_name;
        fastcgi_param QUERY_STRING      $query_string;
        fastcgi_param PATH_INFO         $fastcgi_path_info;
        fastcgi_pass                    127.0.0.1:9000;
        # Директива определяет что ответы FastCGI-сервера с кодом больше или равные 400
        # перенаправлять на обработку nginx'у с помощью директивы error_page
        fastcgi_intercept_errors        on;
        break;
}

location ~ /\.ht {
    deny all;
} 
```

所有这些都被评论和取消评论，但没有任何帮助。

PS 版本是在 /etc/nginx/sites-enabled/domainname.com 文件中制作的。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-14T17:49:55.603

在您的位置块中，您可以执行以下操作：

```
location / {
  try_files $uri $uri/index.html;
} 
```

这将告诉 ngingx 查找具有首先给出的确切名称的文件，如果没有找到这样的文件，它将尝试 uri/index.html。[因此，如果对https://www.example.com/](https://www.example.com/)的请求来了，它会首先查找完全匹配的文件，如果没有找到，则会检查 index.html

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-10-30T16:18:21.353

`location / {`是最一般的位置（带有`location {`）。它会匹配任何东西，[AFAIU](https://www.digitalocean.com/community/tutorials/understanding-nginx-server-and-location-block-selection-algorithms)。我怀疑它是否有用，`location / { index index.html; }`因为您网站的每个子目录都有很多重复的内容。

该方法与

> try_files $uri $uri/index.html index.html;

很糟糕，正如上面的评论中提到的，因为它会返回`index.html`您网站上不应该存在的页面（任何可能的`$uri`结果都会出现）。此外，正如上面的答案中提到的，在的最后一个参数中有一个内部重定向`try_files`。

你的方法

> ```
> location = / {
>    index index.html; 
> ```

也很糟糕，因为也会`index`进行内部重定向。如果您需要，您应该能够在特定的`location`. 创建例如

```
location = /index.html { 
```

正如[这里](https://www.tollmanz.com/nginx-location-match-homepage/)提出的那样。但是随后您将拥有一个工作链接`http://example.org/index.html`，这可能不是您所希望的。我使用的另一个变体是：

```
root /www/my-root;

# http://example.org
# = means exact location
location = / {
    try_files /index.html =404;
}

# disable http://example.org/index as a duplicate content
location = /index      { return 404; }

# This is a general location. 
# (e.g. http://example.org/contacts <- contacts.html)
location / {
    # use fastcgi or whatever you need here
    # return 404 if doesn't exist
    try_files $uri.html =404;
} 
```

[PS调试](http://nginx.org/en/docs/debugging_log.html)nginx非常容易（如果你的二进制文件允许的话）。只需添加到`server {`块中：

```
error_log /var/log/nginx/debug.log debug; 
```

并查看所有内部重定向等。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-14T14:42:08.907

答案是将根目录放置在位置指令中：

```
root   /srv/www/ducklington.org/public_html; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-28T07:22:59.260

根据文档按指定顺序检查文件是否存在，并使用第一个找到的文件进行请求处理；处理在当前上下文中执行。文件的路径是根据根和别名指令从文件参数构造的。可以通过在名称末尾指定斜杠来检查目录是否存在，例如“$uri/”。如果没有找到任何文件，则内部重定向到最后一个参数中指定的 uri。重要的

> 内部重定向到最后一个参数中指定的 uri。

因此，如果前两个参数返回 false，则在最后一个参数中您应该添加您的页面或代码。

```
location / {
  try_files $uri $uri/index.html index.html;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-10T12:31:40.257

对我来说，`try_files`（目前投票最多的）答案[https://stackoverflow.com/a/11957896/608359](https://stackoverflow.com/a/11957896/608359)中的指令导致重写周期，

```
*173 rewrite or internal redirection cycle while internally redirecting 
```

我对 index 指令有更好的运气。请注意，我在名称前使用了正斜杠，这可能是也可能不是您想要的。

```
server {
  listen 443 ssl;
  server_name example.com;

  root /home/dclo/example;
  index /index.html;
  error_page 404 /index.html;

  # ... ssl configuration
} 
```

在这种情况下，我希望所有路径都指向 /index.html，包括返回 404 时。

# javascript - Jquery替换所有文本语法正则表达式中的变量

> ID：11954269
> 
> 赞同：2
> 
> 时间：2012-08-14T14:15:57.943
> 
> 标签：javascript, regex, replace

由于变量 rep，这不起作用。请问正确的语法是什么？

```
var bigtext = 'testing test test test';
var rep = 'test'; 
bigtext = bigtext.replace(/rep/g, "MOO!"); 
```

我知道问题出在替换中的正则表达式部分……但是正确的编写方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T14:18:05.173

您需要使用`RegExp`构造函数构建正则表达式：

```
var bigtext = 'testing test test test';
var rep = 'test'; 
var regex = new RegExp(rep, 'g');
bigtext = bigtext.replace(regex, "MOO!"); 
```

这个构造函数的文档可以在[MDN 页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)上看到。请注意，您可能应该确保正则表达式中的任何特殊字符（例如`[`）都被转义。

# ruby-on-rails - 从现有模型/数据库设计安装

> ID：11954270
> 
> 赞同：8
> 
> 时间：2012-08-14T14:15:59.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, devise

我想知道如何将设计添加到具有不同用户的现有数据库中。在这里，我已经定义了一个客户模型，我想进行更改以允许设计对其进行处理。

我创建了一个新的迁移并插入了以下代码

```
class AddDeviseToCustomer < ActiveRecord::Migration
  def change
    change_table :customers do |t|
      #t.database_authenticatable
      t.string :encrypted_password, :null => false, :default => '', :limit => 128
      t.confirmable
      t.recoverable
      t.rememberable
      t.trackable
      t.token_authenticatable
      t.timestamps
    end
  end
end 
```

据此它应该工作。[https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns](https://github.com/plataformatec/devise/wiki/How-To:-change-an-already-existing-table-to-add-devise-required-columns)。但是当运行 rake db:migrate 我得到以下

```
undefined method `confirmable' for #<ActiveRecord::ConnectionAdapters::Table:0x9286a28> 
```

我已经运行了以下行

```
rails g devise:install 
```

任何原因设计都无法识别它，我需要做些什么来说客户是设计吗？提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T14:32:08.087

看起来该文档已过时。

尝试使用设计生成器，它将使用正确的参数创建相同的迁移，如果它是现有模型就可以：

```
rails g devise customer 
```

它应该创建`AddDeviseToCustomers`迁移

与此类似：

```
class AddDeviseToCustomers < ActiveRecord::Migration
def self.up
change_table(:customers) do |t|
  ## Database authenticatable
  t.string :email,              :null => false, :default => ""
  t.string :encrypted_password, :null => false, :default => ""

  ## Recoverable
  t.string   :reset_password_token
  t.datetime :reset_password_sent_at

  ## Rememberable
  t.datetime :remember_created_at

  ## Trackable
  t.integer  :sign_in_count, :default => 0
  t.datetime :current_sign_in_at
  t.datetime :last_sign_in_at
  t.string   :current_sign_in_ip
  t.string   :last_sign_in_ip

  ## Confirmable
  t.string   :confirmation_token
  t.datetime :confirmed_at
  t.datetime :confirmation_sent_at
  t.string   :unconfirmed_email # Only if using reconfirmable

  ## Lockable
  # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
  # t.string   :unlock_token # Only if unlock strategy is :email or :both
  # t.datetime :locked_at

  ## Token authenticatable
  # t.string :authentication_token

  # Uncomment below if timestamps were not included in your original model.
  # t.timestamps
end

def self.down
# By default, we don't want to make any assumption about how to roll back a migration when your
# model already existed. Please edit below which fields you would like to remove in this migration.
raise ActiveRecord::IrreversibleMigration
end
end 
```

请注意，没有更多`t.confirmable`

# c++ - 在开发机器上设置 dll 的完整性优先级是否在 install-build 上持续存在

> ID：11954271
> 
> 赞同：0
> 
> 时间：2012-08-14T14:16:01.203
> 
> 标签：c++, installshield, integrity

我使用 IShellLink 来获取快捷方式的目标路径。大多数时候它很好，但我偶尔会丢失一些文件。我在某处读到完整性优先级可能是一个问题。请参阅此处的完整性优先级 - [http://msdn.microsoft.com/en-us/library/bb625960.aspx](http://msdn.microsoft.com/en-us/library/bb625960.aspx) 我的问题是 - 如果我更改我的开发机器上所有 dll 的完整性优先级，然后使用这些构建安装版本dll的，然后将安装构建移动到另一台机器并在那里安装程序；我设置的中等完整性优先级是否会在新机器上持续存在。或者我必须在安装程序后编写一个脚本来更改完整性优先级。
我希望安装后我不需要做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:35:09.073

我不太了解 IShellLink 功能，因此我将尝试从 Windows Installer 的角度解决这个问题。（假设通过引用您正在使用 MSI 的 installshield 标签。）

MSI 使用[Shortcut 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371847%28v=vs.85%29.aspx)，如果在 Win7/Server2008R2 上，则使用[ShortcutProperty Table](http://msdn.microsoft.com/en-us/library/windows/desktop/dd408039%28v=vs.85%29.aspx)。这篇文章[应用程序用户模型 ID (AppUserModelIDs)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378459%28v=vs.85%29.aspx)有一个部分说：

> 在应用程序快捷方式文件的 System.AppUserModel.ID 属性中。快捷方式（作为 IShellLink、CLSID_ShellLink 或 .lnk 文件）通过 IPropertyStore 和整个 Shell 中使用的其他属性设置机制支持属性。这允许任务栏识别正确的固定快捷方式，并确保属于该进程的窗口与该任务栏按钮适当关联。注意 System.AppUserModel.ID 属性应在创建快捷方式时应用于快捷方式。使用 Microsoft Windows Installer (MSI) 安装应用程序时，MsiShortcutProperty 表允许 AppUserModelID 在安装期间创建快捷方式时应用到快捷方式。

MsiShortCutProperty 表是相当新的，我还没有真正让任何开发人员来找我想要利用它，所以我还没有深入研究可以设置的所有各种属性的细节。但是，我怀疑这是您需要走的路。

# c# - Lync 2010 SDK - 调用响应组

> ID：11954273
> 
> 赞同：1
> 
> 时间：2012-08-14T14:16:03.637
> 
> 标签：c#, wpf, lync-2010, ucma

我有一个由 2 个代理组成的响应组。为了清楚起见，让我们使用以下内容：

*   代理1：ag1@domain.com
*   代理2：ag2@domain.com
*   响应组：RG@domain.com

我的代码基于以下步骤与代理建立 AV 呼叫：http: [//msdn.microsoft.com/en-us/library/lync/hh378584.aspx](http://msdn.microsoft.com/en-us/library/lync/hh378584.aspx)

如果我直接使用他们的 SIP 地址与 Agent1 或 Agent2 建立呼叫，呼叫就会通过并且一切正常，我什至可以从双方渲染视频。

但是，如果我与响应组建立呼叫，并且即使代理 1 或代理 2 接听电话，它也只会以没有错误消息结束，也不会在我这边抛出异常。

SDK (AudioVideoConversation) 附带的示例应用程序也出现了同样的问题。

这是什么原因？SDK 是否能够处理响应组？如果是这样，那怎么办？

*   编辑：（1）忘了提：Lync 处于抑制模式！

*   编辑：（2）进一步的调查让我在 Lync 客户端开发论坛上找到了这个答案：说实话，自 2011 年提出该问题并且 MS 复制了该错误以来，论坛答案是非常不确定和离谱的[。](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/9a5a6b2b-6ac5-4542-adf0-0730cdff38e1)

*   编辑：（3）在 Lync 客户端开发论坛中再次提出问题，等待 Lync 团队错误重现[论坛答案](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/13ff0dd6-120a-4449-880e-8a7aeeec0c90)

*   编辑：（4）客户端最近的 6 月更新也没有解决问题。

# android - 如何在 Android ICS 数据使用设置中生成图表

> ID：11954276
> 
> 赞同：3
> 
> 时间：2012-08-14T14:16:19.283
> 
> 标签：android, graph, settings, android-4.0-ice-cream-sandwich

我想知道 android sdk 是否为 ICS 设置屏幕中看到的特定图形提供了任何内置组件（视图），如下所示：

![在此处输入图像描述](../Images/7527ca1aeb70461bcc7e0b2d4abc2e49.png) ![在此处输入图像描述](../Images/1193afeb279f63b179ff4feb298398b4.png)

如果不是，那么对于这种图形组件来说，最好的方法是什么。任何图书馆建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:32:38.667

好吧，幸运的是 Android 是开源的，所以我想您可以获取源代码并查看设置应用程序以了解它们是如何实现的：

[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:35:04.853

不，Android 没有用于此的默认 API。您必须为此实现自己的自定义视图。

# jquery - 悬停在 div 1 上显示循环所有幻灯片 1，悬停在 2 上显示循环所有幻灯片 2

> ID：11954278
> 
> 赞同：1
> 
> 时间：2012-08-14T14:16:26.193
> 
> 标签：jquery, hover, cycle, jquery-cycle

我创建了一个推荐的幻灯片，上面是与幻灯片相关的 3 个类别的 3 个部分。

所以我有div1和slide1、div2和slide2、div3和slide3。

我对 jquery 还是很陌生——我怎么说：

“悬停这个 div1，在 slide1 上暂停所有循环”

```
 $('.section-testimonials').cycle({
    fx: 'fade',
    speed: 1000,
    containerResize: 0,
    timeout: 9000
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:26:52.500

好吧，这些`<div>`只是需要放置为 jQuery 循环的 Nav 或 Paging 。

注意**请确保您使用的是循环-全部 FULL 而非 LITE

```
$('#slideshow').cycle({ 
    speed:       200, 
    timeout:     3000, 
    pager:      '#nav', // <-- point to the wrapper around your div's
    pagerEvent: 'mouseover', // <-- this causes the Pause (keeps it paused the whole time you're hovered)
    pauseOnPagerHover: true 
});​ 
```

[http://jquery.malsup.com/cycle/pagerHover.html](http://jquery.malsup.com/cycle/pagerHover.html)

# regex - 美国货币格式和长度限制的正则表达式

> ID：11954280
> 
> 赞同：0
> 
> 时间：2012-08-14T14:16:34.833
> 
> 标签：regex

对于美国货币的正则表达式，我面临着一些挑战。对美国货币格式的快速研究使我想到了以下正则表达式，这很奇怪。

```
^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$ 
```

根据我的其他要求，我已将其修改为以下。因此，下一个成功地将小数点 (.) 后的数字限制为 10。但是，我还有更多挑战。

```
^[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{0,**10**})?$ 
```

*   我希望我的 RegEx 也能验证 0.99 和 .99。在上面的 RegEx 中，0.99 被验证但 0.99 不匹配。因此，我将 RegEx 更新为：`^[0-9]{**0**,3}(?:,?[0-9]{3})*(?:\.[0-9]{0,10})?$`

这解决了我当前的问题，但现在它也匹配 ,333,323 模式。

*   我已更新 RegEx 以将其限制为 10 个小数，但我还要求将其限制为仅小数点前 18 位（**没有美国货币分隔符“，”**）。我尝试了一些模式，但没有奏效。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:46:47.780

试试这个：

```
^\d{,3}(?:(?:[^\b],)?\d{3}){,5}(?:\.\d{,10})?$ 
```

它解决了您提到的问题，但是这个正则表达式仍然存在一些问题。例如，它允许 99,999999.55 和 0,123.45

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:38:12.467

**“*这解决了我当前的问题，但现在它也匹配 ,333,323 模式。* ”**
针对此要求修改了 RegEx：

```
^((([1-9][0-9]{0,2}(?:,?[0-9]{3})*)?)|0)(?:\.[0-9]{0,10})?$ 
```

***但我还要求将其限制为仅小数点前 18 位（没有美国货币分隔符“，”）***
我假设您仍然需要逗号分隔符但希望将小数点前的位数限制为 18 不包括逗号. 这意味着您可以拥有 0 到 5 组“,ddd”。如果这个假设是错误的，请告诉我。针对此要求修改了 RegEx：

```
^((([1-9][0-9]{0,2}(?:,[0-9]{3}){0,5})?)|0|([1-9][0-9]{0,17}))(?:\.[0-9]{1,10})?$ 
```

**更新 1：**
如@davidrac 所述，将正则表达式编辑为不匹配 99,999999.55。

**更新 2：**
编辑正则表达式以删除前导零

**更新 3：**
合并了所有修复程序。请检查是否还有更多遗漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:03:52.760

怎么样：

```
^(?:[0-9]{1,3}(?:,?[0-9]{3})*)?(?:\.[0-9]{0,10})?$ 
```

**解释：**

```
The regular expression:

(?-imsx:^(?:[0-9]{1,3}(?:,?[0-9]{3})*)?(?:\.[0-9]{0,10})?$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (?:                      group, but do not capture (optional
                           (matching the most amount possible)):
----------------------------------------------------------------------
    [0-9]{1,3}               any character of: '0' to '9' (between 1
                             and 3 times (matching the most amount
                             possible))
----------------------------------------------------------------------
    (?:                      group, but do not capture (0 or more
                             times (matching the most amount
                             possible)):
----------------------------------------------------------------------
      ,?                       ',' (optional (matching the most
                               amount possible))
----------------------------------------------------------------------
      [0-9]{3}                 any character of: '0' to '9' (3 times)
----------------------------------------------------------------------
    )*                       end of grouping
----------------------------------------------------------------------
  )?                       end of grouping
----------------------------------------------------------------------
  (?:                      group, but do not capture (optional
                           (matching the most amount possible)):
----------------------------------------------------------------------
    \.                       '.'
----------------------------------------------------------------------
    [0-9]{0,10}              any character of: '0' to '9' (between 0
                             and 10 times (matching the most amount
                             possible))
----------------------------------------------------------------------
  )?                       end of grouping
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

**一些例子：**

```
match : 1,234.45
match : .123
match : 0.12345
match : 123456.7890123
not match : ,123,456.789 
```

# freemind - 在 FreeMind 中向节点添加多行

> ID：11954284
> 
> 赞同：1
> 
> 时间：2012-08-14T14:16:48.877
> 
> 标签：freemind

我正在为 FreeMind 使用版本 0.9.0。

我正在尝试向节点添加多行。试过alt+enter，用长节点编辑，简单回车。这没有用。

例如

```
just checking if I can split this line into multi lines. 
```

我想为同一个节点将上面的行分成两部分。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:41:36.887

`Alt+Enter`编辑节点时应该可以工作。你会得到一个扩展的编辑器弹出窗口，让你有多行。在该编辑器中，您只需要在需要换行时按 Enter 键，就像普通编辑器一样。

# python-2.7 - 如何每秒只获得一次密钥输入？（或延迟两次键盘输入之间的时间）

> ID：11954292
> 
> 赞同：1
> 
> 时间：2012-08-14T14:17:37.270
> 
> 标签：python-2.7, pygame, keyboard-events

在 pygame 中，我正在使用函数“pressed_key”

这是我的代码：

```
if(pressed_keys[K_y]):
    base += 10; 
```

但是当我只按一次它时，“基础”增加了 200ish。我想知道是否有办法增加两次进入之间的时间？

感谢您的帮助！

（ps我真的不知道如何搜索关于这个问题的类似问题。我希望这不是重复的。但如果是的话，请告诉我。我会删除这个问题。再次感谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:55:18.917

这里[http://www.pygame.org/docs/ref/key.html#pygame.key.set_repeat](http://www.pygame.org/docs/ref/key.html#pygame.key.set_repeat)

```
pygame.key.set_repeat(delay, interval): return None 
```

还：

```
pygame.key.get_pressed()[K_y]: return bool 
```

另一种方法是获取您接受“按键”的时间，然后等待再次接受它：

```
import time
interval = 100 #you set your interval in miliseconds
lasttime = 0

while 1:
    draw() #draw routine
    events() #another events
    now = time.time() #save in one variable if you are going to test against more than one, reducing the number of time.time() calls
    if(pressed_keys[K_y] and (now-lasttime)>interval):
        lasttime = now
        base += 10 
```

time.time() 以浮点数形式返回纪元以来的时间（以秒为单位）。纪元是时间开始的点。当年 1 月 1 日，0 时，“自纪元以来的时间”为零。对于 Unix，纪元是 1970 年。

知道了这一点，您现在就获得了与上次保存时间相比的时间：现在-上次。
当这个 delta 大于间隔时，您可以继续您的活动，不要忘记更新您的 lasttime 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:38:17.773

我希望你对 pygame 有足够的了解来使用[时钟](http://www.pygame.org/docs/ref/time.html#pygame.time.Clock)。

（为简单起见，我们会说所需的时间间隔为一秒）

一个简单的解决方案是每秒检查一次输入，使用一个简单的计数器和 pygame 时钟。

*首先在主循环之外*启动时钟和计数器。此外，添加一个布尔变量来确定是否在这一秒内按下了键。

```
FRAMERATE = 30 #(The framerate used in this example is 30 FPS)
clock = pygame.time.Clock()
counter = 0
not_pressed = True 
```

然后在主循环中，你要做的第一件事就是增加计数器，然后[勾选时钟](http://www.pygame.org/docs/ref/time.html#Clock.tick)。

```
while argument:
    counter+=1
    clock.tick(FRAMERATE) 
```

那么你有你的代码，一个`if`查看按钮是否被按下的语句：

```
if not_pressed:
    if(pressed_keys[K_y]):
        not_pressed=False
        base += 10
#Rest of code:
if(pressed_keys[K_up]): 
```

最后，在主循环结束时，添加一个检查器以`not_pressed`每秒将布尔值切换回 True：

```
if counter == FRAMERATE:
    counter=0
    not_pressed=True 
```

这应该允许程序每秒只从用户那里获取一次输入。要更改间隔，只需更改`if counter == FRAMERATE:`行。

*   `if counter == FRAMERATE:`将是 1 秒
*   `if counter == (FRAMERATE*2):`将是 2 秒
*   `if counter == int(FRAMERATE/4):`将是四分之一秒*

*注意-确保您将`FRAMERATE`除以数字，通过使用`int()`包围除法或使用整数除法转换为整数：`(FRAMERATE//4)`

有关查看一切如何适合的类似示例，请参阅[此答案](https://stackoverflow.com/a/10888145/1393894)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:01:40.983

另请参阅：[Pygame：key.get_pressed() 与事件队列不一致](https://stackoverflow.com/questions/11910410/pygame-key-get-pressed-does-not-coincide-with-the-event-queue/11918084#11918084)按住键时使用重复移动。对这些键使用状态轮询效果更好。

# dns - 将域指向 FTP 主机而不更改名称服务器

> ID：11954293
> 
> 赞同：0
> 
> 时间：2012-08-14T14:17:38.263
> 
> 标签：dns, hosting, nameservers, a-records

我在 godaddy [www.example.com] 注册了一个域。我在[Binhoster](http://www.binhoster.com)有一个免费的主机。

我想将我的域指向托管我的页面的 Binhoster 的 FTP 服务器。

我用谷歌搜索了这个，并被指示将我的 Godaddy 名称服务器更改为 Binhoster 的名称服务器，然后在 A-Record 中添加 FTP IP。

但是我在不更改名称服务器的情况下，添加了指向 Binhoster 的 A-Record 并在 Binhoster 的 [www.example.com 指向 public_html] 及其工作中添加了一个自定义域。我目前正在使用我的原始名称服务器。那么为什么它被指示在任何地方更改名称服务器。是强制性的吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:45:47.337

您可能想直接联系 Binhoster 了解他们为什么建议更改您的 NS。这可能是因为 IP 地址可能会更改。如果 IP 地址更改并且您控制 DNS，则需要通知您并随后更新 A 记录 IP，而如果您指向您的 NS，则 IP 可能会在主机上自动更新。

归根结底，只要你把你的A记录指向主机，你就可以了。

# c# - 无法加载文件或程序集“Microsoft.Office.Interop.Excel，版本=12.0.0.0，文化=中性，PublicKeyToken=71e9bce111e9429c”

> ID：11954296
> 
> 赞同：2
> 
> 时间：2012-08-14T14:17:52.543
> 
> 标签：c#, sql-server-2005, import-from-excel

当我添加跟随。代码，但在服务器上显示错误。代码 -

```
 object oMissing = System.Reflection.Missing.Value;
                        Microsoft.Office.Interop.Excel.ApplicationClass xl = new Microsoft.Office.Interop.Excel.ApplicationClass();
                        Microsoft.Office.Interop.Excel.Workbook xlBook;
                        Microsoft.Office.Interop.Excel.Worksheet xlSheet;
                        xlBook = (Workbook)xl.Workbooks.Open(docPath, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);
                        xlSheet = (Worksheet)xlBook.Worksheets.get_Item(1);
                        xlSheet.Name = "Sheet1";
                        xlBook.Save();
                        xl.Application.Workbooks.Close(); 
```

错误 -

```
System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Office.Interop.Excel, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' or one of its dependencies. The system cannot find the file specified. 
```

我在 webApplication 中添加了“Microsoft.Office.Interop.Excel”dll 的引用。在当地它工作正常。注意：在服务器 microsoft Office 中未安装。任何人都可以在不安装任何服务器的情况下解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:21:04.713

如果不安装 excel，您将无法使用**Microsoft.Office.Interop.Excel 。**但是您可以在服务器上使用[EPPlus](http://epplus.codeplex.com/)

# html - 如何组织我的 CSS 规则？

> ID：11954299
> 
> 赞同：0
> 
> 时间：2012-08-14T14:18:10.843
> 
> 标签：html, css, notepad++

我正在使用 Notepad ++，我需要知道如何为每个 css 规则添加中断，以便它们不在同一行。我需要一个插件，例如 XML tools>pretty print。

我的 CSS 看起来像这样：

```
body,div,ul,ol,li,h1,h2,h3,h4,h5,h6,form,fieldset,input,button,textarea,p{margin:0;padding:0;line-height:1.5em;}fieldset,img{border:0;}li{list-style:none;}h1,h2,h3,h4,h5,h6{font-weight:normal;cursor:default;}p,span{cursor:default;}input,button,textarea,select,optgroup,option,pre{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}table{border-collapse:collapse;border-spacing:0;}tr,td{padding:0;margin:0;}html,body{position:absolute;left:0;right:0;top:0;bottom:0;}.ui-row::after,.ui-container::after,.ui-component::after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0;}.ui-container{position:absolute;top:.5em;bottom:.5em;left:.5em;right:.5em;}.ui-container.type-b{top:0;bottom:0;left:0;right:0;}.ui-container.flow{position:relative;top:auto;bottom:auto;left:auto;right:auto;margin:.5em;}.ui-grid{position:relative;display:block;width:100%;height:100%;margin:auto;overflow:auto;}.ui-row{width:100%;position:relative;}.ui-row.auto{height:auto;}.ui-col{float:left;height:100%;position:relative;}.ui-col.auto{height:auto;}.ui-gutter.type-a{height:1em;}.ui-gutter.type-b{height:1.5em;}.ui-gutter.type-c{height:2em;}.ui-gutter.small{height:.5em;}.ui-block{height:100%;display:inline-block;}.ui-block.type-a{width:.5em;}.ui-block.type-b{width:1em;}.ui-block.type-c{width:1.5em;}.quarter{width:2.08%;}.half{width:4.166%;}.u1{width:8.333%;}.u2{width:16.666%;}.u3{width:25%;}.u4{width:33.333%;}.u5{width:41.666%;}.u6{width:49.999%;}.u7{width:58.333%;}.u8{width:66.666%;}.u9{width:74.999%;}.u10{width:83.333%;}.u11{width:91.666%;}.u12{width:100%;}.u1.half{width:12.59%;}.u2.half{width:20.82%;}.u3.half{width:29.16%;}.u4.half{width:37.49%;}.u5.half{width:45.83%;}.u6.half{width:54.16%;}.u7.half{width:62.49%;}.u8.half{width:70.83%;}.u9.half{width:79.16%;}.u10.half{width:87.49%;}.u11.half{width:95.83%;}.sixteen .u1{width:6.25%;}.sixteen .u2{width:12.5%;}.sixteen .u3{width:18.75%;}.sixteen .u4{width:25%;}.sixteen .u5{width:31.25%;}.sixteen .u6{width:37.5%;}.sixteen .u7{width:43.75%;}.sixteen .u8{width:50%;}.sixteen .u9{width:56.25%;}.sixteen .u10{width:62.5%;}.sixteen .u11{width:68.75%;}.sixteen .u12{width:75%;}.sixteen .u13{width:81.25%;}.sixteen .u14{width:87.5%;}.sixteen .u15{width:93.75%;}.sixteen .u16{width:100%;}.static>.ui-col{position:absolute;top:0;bottom:0;}.static>.ui-col:last-child{right:0;width:auto;}.w1>.ui-col:first-child{width:200px;}.w1>.ui-col:last-child{left:200px;}.w2>.ui-col:first-child{width:300px;}.w2>.ui-col:last-child{left:300px;}.w3>.ui-col:first-child{width:450px;}.w3>.ui-col:last-child{left:450px;}body{font-size:16px;line-height:1.5em;font-family:Verdana,Helvetica;}h1{font-size:216.6%;}h2{font-size:166.6%;}h3{font-size:141.6%;}h4{font-size:116.6%;}h5{font-size:100%;font-weight:bold;}h6{font-size:100%;font-style:italic;}.h7{font-size:75%;}p,span,a,strong,em,abbr,.copy,button,table{font-size:100%;}b{font-size:100%;font-weight:bold;}i{font-size:100%;font-style:italic;}pre{white-space:pre-wrap;cursor:default;margin:0;} 
```

我需要这样的：

```
.dialog.type-f {
        width: 99%;
        left: 0.5%;
        margin-left: 0;
    }
    .dialog.type-f section {
        overflow: auto;
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:21:49.370

由于此代码已缩小，我想这**不是**您的 css 代码。

该网站将为您完成工作

*   [http://mrcoles.com/blog/css-unminify/](http://mrcoles.com/blog/css-unminify/)

在你的情况下：

```
body, div, ul, ol, li, h1, h2, h3, h4, h5, h6, form, fieldset, input, button, textarea, p {
    margin: 0;
    padding: 0;
    line-height: 1.5em;
}
fieldset, img {
    border: 0;
}
li {
    list-style: none;
}
h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
    cursor: default;
}
p, span {
    cursor: default;
}
input, button, textarea, select, optgroup, option, pre {
    font-family: inherit;
    font-size: inherit;
    font-style: inherit;
    font-weight: inherit;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
tr, td {
    padding: 0;
    margin: 0;
}
html, body {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
}
.ui-row::after, .ui-container::after, .ui-component::after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
}
.ui-container {
    position: absolute;
    top: .5em;
    bottom: .5em;
    left: .5em;
    right: .5em;
}
.ui-container.type-b {
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.ui-container.flow {
    position: relative;
    top: auto;
    bottom: auto;
    left: auto;
    right: auto;
    margin: .5em;
}
.ui-grid {
    position: relative;
    display: block;
    width: 100%;
    height: 100%;
    margin: auto;
    overflow: auto;
}
.ui-row {
    width: 100%;
    position: relative;
}
.ui-row.auto {
    height: auto;
}
.ui-col {
    float: left;
    height: 100%;
    position: relative;
}
.ui-col.auto {
    height: auto;
}
.ui-gutter.type-a {
    height: 1em;
}
.ui-gutter.type-b {
    height: 1.5em;
}
.ui-gutter.type-c {
    height: 2em;
}
.ui-gutter.small {
    height: .5em;
}
.ui-block {
    height: 100%;
    display: inline-block;
}
.ui-block.type-a {
    width: .5em;
}
.ui-block.type-b {
    width: 1em;
}
.ui-block.type-c {
    width: 1.5em;
}
.quarter {
    width: 2.08%;
}
.half {
    width: 4.166%;
}
.u1 {
    width: 8.333%;
}
.u2 {
    width: 16.666%;
}
.u3 {
    width: 25%;
}
.u4 {
    width: 33.333%;
}
.u5 {
    width: 41.666%;
}
.u6 {
    width: 49.999%;
}
.u7 {
    width: 58.333%;
}
.u8 {
    width: 66.666%;
}
.u9 {
    width: 74.999%;
}
.u10 {
    width: 83.333%;
}
.u11 {
    width: 91.666%;
}
.u12 {
    width: 100%;
}
.u1.half {
    width: 12.59%;
}
.u2.half {
    width: 20.82%;
}
.u3.half {
    width: 29.16%;
}
.u4.half {
    width: 37.49%;
}
.u5.half {
    width: 45.83%;
}
.u6.half {
    width: 54.16%;
}
.u7.half {
    width: 62.49%;
}
.u8.half {
    width: 70.83%;
}
.u9.half {
    width: 79.16%;
}
.u10.half {
    width: 87.49%;
}
.u11.half {
    width: 95.83%;
}
.sixteen .u1 {
    width: 6.25%;
}
.sixteen .u2 {
    width: 12.5%;
}
.sixteen .u3 {
    width: 18.75%;
}
.sixteen .u4 {
    width: 25%;
}
.sixteen .u5 {
    width: 31.25%;
}
.sixteen .u6 {
    width: 37.5%;
}
.sixteen .u7 {
    width: 43.75%;
}
.sixteen .u8 {
    width: 50%;
}
.sixteen .u9 {
    width: 56.25%;
}
.sixteen .u10 {
    width: 62.5%;
}
.sixteen .u11 {
    width: 68.75%;
}
.sixteen .u12 {
    width: 75%;
}
.sixteen .u13 {
    width: 81.25%;
}
.sixteen .u14 {
    width: 87.5%;
}
.sixteen .u15 {
    width: 93.75%;
}
.sixteen .u16 {
    width: 100%;
}
.static>.ui-col {
    position: absolute;
    top: 0;
    bottom: 0;
}
.static>.ui-col:last-child {
    right: 0;
    width: auto;
}
.w1>.ui-col:first-child {
    width: 200px;
}
.w1>.ui-col:last-child {
    left: 200px;
}
.w2>.ui-col:first-child {
    width: 300px;
}
.w2>.ui-col:last-child {
    left: 300px;
}
.w3>.ui-col:first-child {
    width: 450px;
}
.w3>.ui-col:last-child {
    left: 450px;
}
body {
    font-size: 16px;
    line-height: 1.5em;
    font-family: Verdana, Helvetica;
}
h1 {
    font-size: 216.6%;
}
h2 {
    font-size: 166.6%;
}
h3 {
    font-size: 141.6%;
}
h4 {
    font-size: 116.6%;
}
h5 {
    font-size: 100%;
    font-weight: bold;
}
h6 {
    font-size: 100%;
    font-style: italic;
}
.h7 {
    font-size: 75%;
}
p, span, a, strong, em, abbr, .copy, button, table {
    font-size: 100%;
}
b {
    font-size: 100%;
    font-weight: bold;
}
i {
    font-size: 100%;
    font-style: italic;
}
pre {
    white-space: pre-wrap;
    cursor: default;
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:20:38.720

试试[prettydiff.com](http://prettydiff.com/)，因为它还可以处理 SASS 项目中的 SCSS 等高级结构。这是 Pretty Diff 吐出的内容：

```
body,
div,
ul,
ol,
li,
h1,
h2,
h3,
h4,
h5,
h6,
form,
fieldset,
input,
button,
textarea,
p {
    line-height: 1.5em;
    margin: 0px;
    padding: 0px;
}
fieldset,
img {
    border: 0px;
}
li {
    list-style: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    cursor: default;
    font-weight: normal;
}
p,
span {
    cursor: default;
}
input,
button,
textarea,
select,
optgroup,
option,
pre {
    font-family: inherit;
    font-size: inherit;
    font-style: inherit;
    font-weight: inherit;
}
table {
    border-collapse: collapse;
    border-spacing: 0px;
}
tr,
td {
    margin: 0px;
    padding: 0px;
}
html,
body {
    bottom: 0px;
    left: 0px;
    position: absolute;
    right: 0px;
    top: 0px;
}
.ui-row::after,
.ui-container::after,
.ui-component::after {
    clear: both;
    content: " ";
    display: block;
    font-size: 0px;
    height: 0px;
    visibility: hidden;
}
.ui-container {
    bottom: 0.5em;
    left: 0.5em;
    position: absolute;
    right: 0.5em;
    top: 0.5em;
}
.ui-container.type-b {
    bottom: 0px;
    left: 0px;
    right: 0px;
    top: 0px;
}
.ui-container.flow {
    bottom: auto;
    left: auto;
    margin: 0.5em;
    position: relative;
    right: auto;
    top: auto;
}
.ui-grid {
    display: block;
    height: 100%;
    margin: auto;
    overflow: auto;
    position: relative;
    width: 100%;
}
.ui-row {
    position: relative;
    width: 100%;
}
.ui-row.auto {
    height: auto;
}
.ui-col {
    float: left;
    height: 100%;
    position: relative;
}
.ui-col.auto {
    height: auto;
}
.ui-gutter.type-a {
    height: 1em;
}
.ui-gutter.type-b {
    height: 1.5em;
}
.ui-gutter.type-c {
    height: 2em;
}
.ui-gutter.small {
    height: 0.5em;
}
.ui-block {
    display: inline-block;
    height: 100%;
}
.ui-block.type-a {
    width: 0.5em;
}
.ui-block.type-b {
    width: 1em;
}
.ui-block.type-c {
    width: 1.5em;
}
.quarter {
    width: 2.08%;
}
.half {
    width: 4.166%;
}
.u1 {
    width: 8.333%;
}
.u2 {
    width: 16.666%;
}
.u3 {
    width: 25%;
}
.u4 {
    width: 33.333%;
}
.u5 {
    width: 41.666%;
}
.u6 {
    width: 49.999%;
}
.u7 {
    width: 58.333%;
}
.u8 {
    width: 66.666%;
}
.u9 {
    width: 74.999%;
}
.u10 {
    width: 83.333%;
}
.u11 {
    width: 91.666%;
}
.u12 {
    width: 100%;
}
.u1.half {
    width: 12.59%;
}
.u2.half {
    width: 20.82%;
}
.u3.half {
    width: 29.16%;
}
.u4.half {
    width: 37.49%;
}
.u5.half {
    width: 45.83%;
}
.u6.half {
    width: 54.16%;
}
.u7.half {
    width: 62.49%;
}
.u8.half {
    width: 70.83%;
}
.u9.half {
    width: 79.16%;
}
.u10.half {
    width: 87.49%;
}
.u11.half {
    width: 95.83%;
}
.sixteen .u1 {
    width: 6.25%;
}
.sixteen .u2 {
    width: 12.5%;
}
.sixteen .u3 {
    width: 18.75%;
}
.sixteen .u4 {
    width: 25%;
}
.sixteen .u5 {
    width: 31.25%;
}
.sixteen .u6 {
    width: 37.5%;
}
.sixteen .u7 {
    width: 43.75%;
}
.sixteen .u8 {
    width: 50%;
}
.sixteen .u9 {
    width: 56.25%;
}
.sixteen .u10 {
    width: 62.5%;
}
.sixteen .u11 {
    width: 68.75%;
}
.sixteen .u12 {
    width: 75%;
}
.sixteen .u13 {
    width: 81.25%;
}
.sixteen .u14 {
    width: 87.5%;
}
.sixteen .u15 {
    width: 93.75%;
}
.sixteen .u16 {
    width: 100%;
}
.static > .ui-col {
    bottom: 0px;
    position: absolute;
    top: 0px;
}
.static > .ui-col:last-child {
    right: 0px;
    width: auto;
}
.w1 > .ui-col:first-child {
    width: 200px;
}
.w1 > .ui-col:last-child {
    left: 200px;
}
.w2 > .ui-col:first-child {
    width: 300px;
}
.w2 > .ui-col:last-child {
    left: 300px;
}
.w3 > .ui-col:first-child {
    width: 450px;
}
.w3 > .ui-col:last-child {
    left: 450px;
}
body {
    font-family: Verdana, Helvetica;
    font-size: 16px;
    line-height: 1.5em;
}
h1 {
    font-size: 216.6%;
}
h2 {
    font-size: 166.6%;
}
h3 {
    font-size: 141.6%;
}
h4 {
    font-size: 116.6%;
}
h5 {
    font-size: 100%;
    font-weight: bold;
}
h6 {
    font-size: 100%;
    font-style: italic;
}
.h7 {
    font-size: 75%;
}
p,
span,
a,
strong,
em,
abbr,
.copy,
button,
table {
    font-size: 100%;
}
b {
    font-size: 100%;
    font-weight: bold;
}
i {
    font-size: 100%;
    font-style: italic;
}
pre {
    cursor: default;
    margin: 0px;
    white-space: pre-wrap;
} 
```

# android - 如何获得上传完成的百分比

> ID：11954301
> 
> 赞同：1
> 
> 时间：2012-08-14T14:18:14.183
> 
> 标签：android, android-intent

我怎样才能获得上传完成的百分比并对我的进度条进行进度更新。

我正在添加我的上传代码。我在异步任务中使用它。

请帮忙。谢谢

```
ileInputStream fileInputStream = new FileInputStream(sourceFile);
                     URL url            =   new URL(upLoadServerUri);
                     conn               =   (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
                     conn.setDoInput(true); // Allow Inputs
                     conn.setDoOutput(true); // Allow Outputs
                     conn.setUseCaches(false); // Don't use a Cached Copy
                     conn.setRequestMethod("POST");
                     conn.setRequestProperty("Connection", "Keep-Alive");
                     conn.setRequestProperty("ENCTYPE", "multipart/form-data");
                     conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
                     conn.setRequestProperty("uploaded_file", fileName); 
                     dos        =   new DataOutputStream(conn.getOutputStream());

                     dos.writeBytes(twoHyphens + boundary + lineEnd); 
                     dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
                     dos.writeBytes(lineEnd);
                      Log.i("buffer", "jgf"+fileInputStream.read());

                     bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size
                     bufferSize     = Math.min(bytesAvailable, maxBufferSize);
                     buffer         = new byte[bufferSize];

                     // read file and write it into form...
                     bytesRead      = fileInputStream.read(buffer, 0, bufferSize);  

                     while (bytesRead > 0) 
                     {
                       dos.write(buffer, 0, bufferSize);
                       bytesAvailable =     fileInputStream.available();
                       bufferSize     =     Math.min(bytesAvailable, maxBufferSize);
                       bytesRead      =     fileInputStream.read(buffer, 0, bufferSize);
}

dos.writeBytes(lineEnd);
                         dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

                     // Responses from the server (code and message)
                    serverResponseCode = conn.getResponseCode();
                    String serverResponseMessage    =   conn.getResponseMessage();

                     Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);

                     if(serverResponseCode == 200){
                         runOnUiThread(new Runnable() {
                              public void run() {

                                  Toast.makeText(getApplicationContext(), "File Upload Complete.", Toast.LENGTH_SHORT).show();                            
                                  dialog.dismiss();

                              }
                          });                
                     }    

                     //close the streams //
                     fileInputStream.close();
                     dos.flush();
                     dos.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:25:20.357

你应该使用`AsynchTask`和它的`publishProgress()`. 如果您四处搜索，您可以找到很多示例，例如[this](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)。

# log4j - 电锯中的颜色设置

> ID：11954303
> 
> 赞同：0
> 
> 时间：2012-08-14T14:18:23.880
> 
> 标签：log4j, apache-chainsaw

我想为 Chainsaw 中的每个线程名称设置一种颜色（[开发人员快照](http://people.apache.org/%7Esdeboy/)）

例如：

![在此处输入图像描述](../Images/d09bf005b5e3e1ed19b2f226cd6fd915.png)

现在我手动设置：

![在此处输入图像描述](../Images/7493d4d1aeb7e773aaeaf2e3551133ec.png)

但我想知道它是否可以自动完成，而无需为每个线程名称创建规则。你知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:13:23.007

我是 Chainsaw 提交者之一，我编写了颜色处理代码。

我在您的屏幕截图中看到线程与请求相关联。我想更好地了解您正在尝试做什么，因为 Chainsaw 可以做很多事情，并且今天可能有一种方法可以做您想做的事情。

所以..一个问题-您是使用日志文件来获取此信息，还是使用socketappender？

使用 Logger 树查看每个请求：如果您使用的是日志文件，我建议将“线程名称”映射为“记录器”字段，然后您可以使用左侧的记录器树 - 单击记录器名称（request123456），然后单击记录器树上方的放大镜按钮，以便“关注”并仅查看该请求。

为每个请求使用单独的选项卡：如果您使用的是 socketappender，我建议在记录器树下方的新“忽略”对话框中阻止所有不以“请求”开头的线程，然后更改“选项卡名称/将 Chainsaw 中的路由表达式'路由到 THREAD - 这将为每个线程创建一个新选项卡。

以编程方式为每个线程生成颜色绝对是可能的，但最终可能会生成难看的颜色……如果这对你不起作用，我可以考虑一下。

斯科特

# c# - 判断两个表是否相关的函数

> ID：11954305
> 
> 赞同：3
> 
> 时间：2012-08-14T14:18:24.277
> 
> 标签：c#, .net, sql, logic

假设我在内存中有 5 个表模式作为 DataTables，另一个 DataTable 是其他 5 个表之间的引用约束的模式。

这 5 个模式表是相关的，因此表 A 包含与 B 中的外键相关的主键列。B 还包含与 C 中的外键列相关的主键列，以及 C 到 D，但假设 A，B， C 和 D 与 E 没有直接或间接的关系。

什么样的函数会接收两个数据表并返回一个布尔值，指示这些表是相关的还是“链接的”。

**我想要完成的事情**

假设我在拖放式界面中向用户展示了 5 个表中的所有列。我希望用户能够以图形方式构建查询，但我需要根据它们是否甚至可以在同一个选择语句中返回来启用/禁用某些列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:48:04.160

您说您有第六个表，其中包含其他表之间的约束。

假设您可以有效地使用此信息，并且仅尝试映射直接关系，您可能会执行以下操作：

*   编译*可能*包含可能从其他表引用的主键的所有表的列表
*   遍历每个这样的表 X
    *   *编译 X可能*相关的表列表 L
    *   对于表 X 中的每个主键 K，遍历 L 中的每个表，搜索对 K 的任何引用。
    *   一旦遇到对任何 K 的引用，就中断并跳到 L 中的下一个表
    *   以某种方式存储有关关系的信息（例如，每个表 X 的 L 中的表列表）

我知道这是非常高级和抽象的，但我希望它有意义..

这可能需要一些时间来运行，具体取决于表的数量和它们关系的复杂性，但我看不出有更好的选择。

您可以将有关“禁止”关系的信息存储在例如字典中，其中包含每个表的键和列表；像这样的东西（对于单向关系，以避免重复注册信息）：

```
{TableA => {TableB, TableC}, 
 TableB => {TableC, TableD}, 
 TableC => {}, 
 etc..} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:11:35.133

如果表存在于数据集中，则数据集还可能包含您可以迭代的[Datarelations 。](http://msdn.microsoft.com/en-us/library/system.data.datarelation.aspx)

但是，您的数据库提供程序在加载数据时没有填充数据集中的数据关系的可能性很高。

恐怕您必须要求数据库获取关系信息。那是高度依赖数据库和数据库提供者的。

您可以查看[mygeneration mymeta](http://mygeneration.svn.sourceforge.net/viewvc/mygeneration/trunk/mymeta/)或[NHibernate](http://sourceforge.net/projects/nhibernate/)的来源，了解如何做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T17:21:51.047

```
// we have not defined which argument is the "parent" and which is the "child"
public bool IsTableRelated(DataTable thisOne, DataTable thatOne) {

    bool thisToThat = DiveDive(thisOne.Constraints, thatOne);
    bool thatToThis = DiveDive(thatOne.Constraints, thisOne);

    return thisToThat || thatToThis;
}

public bool DiveDive(ConstraintsCollection constraints, DataTable target) {

    bool theyRelate = false;

    foreach (Constraint aConstraint in constraints){

        if (aConstraint is ForeignKeyConstraint) {
            if(aConstraint.Table.TableName == target.TableName) {
                theyRelate = true;
                break;  // quit while we're ahead.
            }else{
               theyRelate = DiveDive(aConstraint.Table.Constraints, target);
            }
        } 
    }

    return theyRelate;
} 
```

# html - HTML/CSS：导航栏可拉伸以适应可变 html

> ID：11954306
> 
> 赞同：0
> 
> 时间：2012-08-14T14:18:26.743
> 
> 标签：html, css, css-float

我试图让a 中`li`的元素`ul`具有相等的宽度，并适合一行，使用 CSS，但不知道创建 CSS`li`时有多少 s （即动态生成的 HTML）。

W3Schools 有一个导航栏[示例](http://www.w3schools.com/css/css_navbar.asp)，但它是固定宽度的，如果您添加另一个`li`相当缩放以适应，整个布局就会被抛弃。

这是他们的例子：

CSS：

```
ul
{
  list-style-type:none;
  margin:0;
  padding:0;
  overflow:hidden;
}
li
{
  float:left;
}
a:link,a:visited
{
  display:block;
  width:120px;
  font-weight:bold;
  color:#FFFFFF;
  background-color:#98bf21;
  text-align:center;
  padding:4px;
  text-decoration:none;
  text-transform:uppercase;
}
a:hover,a:active
{
  background-color:#7A991A;
} 
```

HTML：

```
<ul>
<li><a href="#home">Home</a></li>
<li><a href="#news">News</a></li>
<li><a href="#contact">Contact</a></li>
<li><a href="#about">About</a></li>
</ul> 
```

理想情况下，我可以添加另一个`li`，菜单仍然会显示得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:26:58.693

甚至认为我讨厌这个解决方案......如果你真的需要它来处理 HTML/CSS 和自动更新宽度，那么表格就可以了。

否则，我建议您只使用一些简单的 JS 更新宽度。如果您通过 JS 添加额外的选项，则很容易将其折腾进去。

编辑：实际上，取决于您的目标浏览器。您可以使用这些`display: table`东西，但仅限于 IE8+。

[演示](http://jsfiddle.net/scispear/egGSX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:22:20.003

我猜你将不得不用javascript来做到这一点......

您可以使用 javascript 来获取窗口宽度和列表项的数量。如果你有这些，你可以使用 javascript 分配一个固定的宽度。

# java - 使用 java 小程序在打印机中打印呈现的网页

> ID：11954311
> 
> 赞同：1
> 
> 时间：2012-08-14T14:18:43.340
> 
> 标签：java, printing, dialog, applet

**如何使用带有 java 小程序的自定义打印对话框（删除页眉、页脚、**设置边距等）在打印机中打印呈现的网页？不能使用 window.print() 因为我需要在打印之前自定义页面设置。需要打印的网页结构良好，可以使用 html 和 css 进行打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:26:00.740

好吧，您的问题的一个一般性答案是使用可以呈现 HTML 的 Swing 组件，例如 JEditorPane，如下所述：[在 Swing 应用程序中呈现 html](https://stackoverflow.com/questions/1790500/render-html-in-swing-application)

要实际打印 Swing 组件的内容，您可以使用 Swings 操作系统无关的 PrinterJob 工具，如下所述：

[http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-Printing.html)

# css - 对 CSS 网格使用 inline-block 或 table-cell

> ID：11954314
> 
> 赞同：2
> 
> 时间：2012-08-14T14:18:47.180
> 
> 标签：css, web-applications, grid, frontend

我正在研究为仅限 webkit 的浏览器创建一组 CSS 网格类。应该类似于 blueprit/bootstrap/compass，但是我宁愿不使用它们，因为它们依赖于浮动定位。

我想要这样的东西：

```
span-1 {width:10%;display:inline-block}
span-2 {width:20%;display:inline-block} 
```

等等。使用 display:table-cell vs inline-block 会有什么好处吗？还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:58:54.373

实际上`display: table`确实是您可能正在寻找的解决方案（因为您的目标浏览器）。它被添加到浏览器中，因此人们无需使用表格即可获得网格布局。您甚至不需要百分比（您添加的列数将决定子元素的宽度）。

[演示](http://jsfiddle.net/scispear/egGSX/)

当您使用移动浏览器并希望动态布局转换（媒体标签）从水平列表变为垂直列表时，唯一真正需要注意的是。我想添加您自己的媒体标签（并向包装器添加一个类）并不是什么大不了的事......

您可能可以开始`display: inline-block`工作，但请确保使用`box-sizing: border-box`，因为当您使用百分比时，即使关闭一个 px 并且事情开始环绕..

# configuration - 带有自己的配置文件的 MEF 插件？

> ID：11954315
> 
> 赞同：7
> 
> 时间：2012-08-14T14:18:49.237
> 
> 标签：configuration, mef

我正在尝试在运行时加载插件并访问它们的配置文件。配置文件中的配置部分映射到从 ConfigurationElementCollection、ConfigurationElement 和 ConfigurationSection 派生的类。插件及其配置文件位于名为“Plugins”的子文件夹中。

问题是我似乎无法加载插件配置数据并将其正确反序列化到各自的类中。

这是插件 EmailPlugin.dll 的插件配置示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="EmailConfigurationSection" type="Foo.Plugins.EmailConfigurationSection, EmailPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" allowDefinition="Everywhere" allowExeDefinition="MachineToApplication" restartOnExternalChanges="true"/>
  </configSections>
  <EmailConfigurationSection server="192.168.0.10">
    <EmailSettings>
      <add  keyword="ERROR"
                    sender="error@error.com"
                    recipients="foo@bar.com, wiki@waki.com"
                    subject = "Error occurred"
                    body = "An error was detected"
            />
    </EmailSettings>
  </EmailConfigurationSection>
</configuration> 
```

我使用以下代码加载它：

```
 private static System.Configuration.Configuration config = null;
    public static System.Configuration.Configuration CurrentConfiguration
    {
        get
        {
            if (config == null)
            {
                Assembly assembly = Assembly.GetAssembly(typeof(EmailPlugin));
                string directory = Path.GetDirectoryName(assembly.CodeBase);
                string filename = Path.GetFileName(assembly.CodeBase);
                string assemblyPath = Path.Combine(directory, filename);
                config = ConfigurationManager.OpenExeConfiguration(new Uri(assemblyPath).LocalPath);
            }

            return config;
        }
    } 
```

这会导致错误：

```
An error occurred creating the configuration section handler for EmailConfigurationSection: Could not load file or assembly 'EmailPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. 
```

我将此添加到配置文件的顶部：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <probing privatePath="Plugins"/>
  </assemblyBinding>
</runtime> 
```

所以找到了 DLL，但是当我尝试检索它时它没有转换为正确的类：

```
EmailConfigurationSection defaults = CurrentConfiguration.Sections["EmailConfigurationSection"] as EmailConfigurationSection; 
```

它总是返回 null。我知道它正在查看正确的位置和配置文件，因为我可以使用以下代码检索 XML：

```
var section = CurrentConfiguration.Sections["EmailConfigurationSection"];
string configXml = section.SectionInformation.GetRawXml(); 
```

但是，当我尝试使用以下代码对其进行反序列化时：

```
var serializer = new XmlSerializer(typeof(EmailConfigurationSection));
object result;

EmailConfigurationSection defaults;
using (TextReader reader = new StringReader(configXml))
{
    defaults = (EmailConfigurationSection)serializer.Deserialize(reader);
} 
```

...我得到一个例外：

```
There was an error reflecting type 'Foo.Plugins.EmailConfigurationSection'. 
```

这是 InnerException 的内容：

```
You must implement a default accessor on System.Configuration.ConfigurationLockCollection because it inherits from ICollection. 
```

我假设它指的是类 EmailConfigElementCollection，但是该消息没有意义，因为该类确实具有默认访问器：

```
 public EmailConfigElement this[int index]
    {
        get
        {
            return (EmailConfigElement)BaseGet(index);
        }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    } 
```

我已在其他项目中成功使用此代码（即使使用单独的 DLL/配置），但这是我第一次尝试将它与 MEF 一起使用。有谁知道问题是什么，或者合适的解决方法？

我正在使用 .NET 4.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:22:51.893

我通过以下修改解决了这个问题：

```
public static System.Configuration.Configuration CurrentConfiguration
{
    get
    {
        if (config == null)
        {
            // Added the next bit
            AppDomain.CurrentDomain.AssemblyResolve += (o, args) =>
            {
                var loadedAssemblies = AppDomain.CurrentDomain.GetAssemblies();
                return loadedAssemblies.Where(asm => asm.FullName == args.Name)
                                           .FirstOrDefault();
            };

            Assembly assembly = Assembly.GetAssembly(typeof(EmailPlugin));
            string directory = Path.GetDirectoryName(assembly.CodeBase);
            string filename = Path.GetFileName(assembly.CodeBase);
            string assemblyPath = Path.Combine(directory, filename);
            config = ConfigurationManager.OpenExeConfiguration(new Uri(assemblyPath).LocalPath);
        }

        return config;
    }
} 
```

我从这个问题中得到了这个： [MEF exporting assembly 中的自定义配置部分](https://stackoverflow.com/questions/4845801/custom-configuration-sections-in-mef-exporting-assemblies/6646769#6646769)。我实际上早先尝试过，但没有成功。

诀窍是我必须将运行时标记移动到 XML 配置的底部：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="EmailConfigurationSection" type="Foo.Plugins.EmailConfigurationSection, EmailPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" allowDefinition="Everywhere" allowExeDefinition="MachineToApplication" restartOnExternalChanges="true"/>
  </configSections>
  <EmailConfigurationSection server="255.255.255.1">
    <EmailSettings>
      <clear />
      <add  keyword="FOO"
                    sender="foo@foo.com"
                    recipients="me@you.com"
                    subject = "Foo occurred"
                    body = "Hello"
            />
    </EmailSettings>
  </EmailConfigurationSection>
    <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <probing privatePath="Plugins"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

# oracle - 如何使用 SwisSQL 连接到 Sybase custdb.db？

> ID：11954319
> 
> 赞同：3
> 
> 时间：2012-08-14T14:18:57.437
> 
> 标签：oracle, database-migration, sqlanywhere, swissql

如何使用 SwisSQL 连接到 Sybase custdb.db？我使用标准 Sybase 示例。

我输入适当的命令行：

```
"mlsrv12.exe -vcrs -zu+
   -c "dsn=SQL Anywhere 12 CustDB;uid=ml_server;pwd=sql"
   -x http(port=80)" 
```

数据库工作正常 - 我从 InteractiveSQL 和 Android 客户端对其进行测试。当我尝试从这个数据库迁移到 Oracle 时，我遇到了麻烦。

```
Host name: 127.0.0.1
Port number: 80
User name: ml_server
Password: sql
Service ID (SID): custdb
Shema(optional): empty 
```

我做错了什么？

任何帮助表示赞赏！

# excel - 试图从列 J 中删除不在 Excel 中列 F 中的所有值

> ID：11954320
> 
> 赞同：0
> 
> 时间：2012-08-14T14:19:00.737
> 
> 标签：excel

现在我认为在 Excel 中有一种相当简单的方法可以做到这一点。我打算编写一个自定义的 Python 方法来执行此操作，但我对 CSV 模块并不是非常精通。我根本不知道 VBA（尽管我并不反对为此任务学习它）。

基本上我的问题是这样的：

我有一列 J ，其中包含多个名称（将列 H 和 I 中的名字和姓氏与公式连接起来`=H&" "&I`，我想做一些事情：

1 - 首先，我想将 G 列与 J 列相关联。（G 列包含我试图与所有其他行相关联的联系人 ID）。我相信我会和一群人一起做这个？

2 - 其次，我想删除在整个 F 列中不匹配的所有 J（以及 G）值。

本质上，对于 F 的所有值，如果 J 列中的任何一个都不相等，我希望删除或隐藏 J 和 G 的分组。

请注意，在整个过程中，绝对没有对 G 进行验证，仅在 F 和 J 之间进行。

**我的怀疑是，这意味着将 J 的每个值与 F 值的数组进行比较，然后如果没有对应的值，则删除 J 的特定值所属的组。**

编辑：为了澄清，F 中的数据也是名字和姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:18:15.640

我知道这非常不雅（甚至可能完全没有必要），但这会做你想要的。您只需将列的范围调整为您想要的任何内容（我使用了 17,000 行）。我像你说的那样使用了 J 和 F 列，所以你应该只需要运行它：

```
Sub CheckColumnForValuesInAnotherColumn()

Dim CheckColumn As Range
Dim ColumnToDeleteValuesFrom As Range

Dim wbk As Workbook
Set wbk = ThisWorkbook
Set ws = wbk.Sheets(1)

Set CheckColumn = ws.Range("F2:F17000")
Set ColumnToDeleteValuesFrom = ws.Range("J2:J17000")

Dim cell As Range

On Error Resume Next

Application.ScreenUpdating = False

ws.Select

    For Each cell In ColumnToDeleteValuesFrom

        If Application.WorksheetFunction.VLookup(cell.Value, CheckColumn, 1, False) = IsError(xlErrNA) Then
            cell.ClearContents
        End If

    Next cell

ws.Select
Range("A1").Select

Application.ScreenUpdating = True

End Sub 
```

祝你好运。

# iphone - 在 NSNumberFormatter 中禁用四舍五入（使用语言环境）

> ID：11954324
> 
> 赞同：2
> 
> 时间：2012-08-14T14:19:12.693
> 
> 标签：iphone, objective-c, nsnumberformatter

我正在使用几个区域设置号码。例子：

1.  1.234.567,89 - 德语
2.  1'234'567.89 - 瑞士
3.  1,234,567.89 - 美国

我的代码将小数点分隔符后的最后一位向上舍入：

```
NSNumberFormatter *formatter = [[[NSNumberFormatter alloc] init] autorelease];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setLocale:[NSLocale currentLocale]];
[formatter setMinimumFractionDigits:2];
[formatter setMaximumFractionDigits:2];

double myValue = [[formatter numberFromString:@"123.458"] doubleValue];
double myValue2 = [[formatter numberFromString:@"123.444"] doubleValue];

NSString *rezult = [formatter stringFromNumber:[NSNumber numberWithDouble:myValue]];
NSString *rezult2 = [formatter stringFromNumber:[NSNumber numberWithDouble:myValue2]];

NSLog(@"rezult = %@", rezult);  //gives 123.46 - incorrect
NSLog(@"rezult2 = %@", rezult2);//gives 123.44 - correct 
```

请建议如何防止四舍五入。

请记住，我不能这样做：

```
double aDouble = 1234.56789;
NSString *stri = [NSString stringWithFormat:@"%.2f", aDouble];
NSLog(@"%@", stri); //result is 1234.56 - correct (not rounded up to 1234.57) 
```

...因为我必须使用 *formatter 设置 *stri（见上文）。

我想必须有一些额外的设置`NSNumberFormatter`，不是吗？

提前致谢。

**编辑 1**

解决方案：在声明 NSNumberFormatter 之后，还要说：

```
[formatter setRoundingMode: NSNumberFormatterRoundDown]; 
```

感谢@Price 的快速解决方案。主题关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:35:06.793

你可以添加这个：

```
[formatter setRoundingMode: NSNumberFormatterRoundDown]; 
```

# .net - 如何更改 WebBrowser 的代理？

> ID：11954326
> 
> 赞同：1
> 
> 时间：2012-08-14T14:19:16.390
> 
> 标签：.net, vb.net, proxy

通过说网络浏览器，我的意思是在 VB 中创建的对象，不像 chrome 或 IE。如何更改浏览器用于浏览页面的代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:31:45.937

[这](http://www.pinvoke.net/default.aspx/wininet/InternetSetOption.html?diff=y)看起来很有希望。 [http://www.pinvoke.net/default.aspx/wininet/InternetSetOption.html?diff=y](http://www.pinvoke.net/default.aspx/wininet/InternetSetOption.html?diff=y)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T06:31:22.207

我在互联网上用 C# 找到了你的问题的解决方案，所以这是我可以推荐的 VB 版本。只需确保导入 System.Runtime.InteropServices。

```
<Runtime.InteropServices.DllImport("wininet.dll", SetLastError:=True)> _
         Private Shared Function InternetSetOption(ByVal hInternet As IntPtr, ByVal dwOption As Integer, ByVal lpBuffer As IntPtr, ByVal lpdwBufferLength As Integer) As Boolean
                End Function

                Public Structure Struct_INTERNET_PROXY_INFO
                        Public dwAccessType As Integer
                        Public proxy As IntPtr
                        Public proxyBypass As IntPtr
                End Structure

                Private Sub RefreshIESettings(ByVal strProxy As String)
                        Const INTERNET_OPTION_PROXY As Integer = 38
                        Const INTERNET_OPEN_TYPE_PROXY As Integer = 3

                        Dim struct_IPI As Struct_INTERNET_PROXY_INFO

                        ' Filling in structure
                        struct_IPI.dwAccessType = INTERNET_OPEN_TYPE_PROXY
                        struct_IPI.proxy = Marshal.StringToHGlobalAnsi(strProxy)
                        struct_IPI.proxyBypass = Marshal.StringToHGlobalAnsi("local")

                        ' Allocating memory
                        Dim intptrStruct As IntPtr = Marshal.AllocCoTaskMem(Marshal.SizeOf(struct_IPI))

                        ' Converting structure to IntPtr
                        Marshal.StructureToPtr(struct_IPI, intptrStruct, True)

                        Dim iReturn As Boolean = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_PROXY, intptrStruct, System.Runtime.InteropServices.Marshal.SizeOf(struct_IPI))
     End Sub 
```

# php - 在codeigniter中哪里处理mysql查询？

> ID：11954328
> 
> 赞同：0
> 
> 时间：2012-08-14T14:19:29.707
> 
> 标签：php, sql, codeigniter

我们应该在 CodeIgniter 应用程序中在哪里处理 mysql 查询？
例如，在一个简单的项目中，我们这样做：

对于控制器：

```
class Blog extends CI_Controller {
    function posts(){
        $data['query'] = $this->blog_model->index_posts();
        $this->load->view('blog_view', $data);
    }
} 
```

并认为：

```
<?php
while ($post = mysql_fetch_object($query)):
?>
<div>
    <p><?= $post->body; ?></p>
</div>
<?php endwhile; ?> 
```

但是，如果我们想在打印之前对正文做一些事情，应该在哪里做呢？
例如，我想编写一个函数来格式化 post 的正文并在执行 echo 之前将正文传递给它。

根据 CoeIgniter 的结构和推荐的做法，它应该放在哪里？（最佳选择）

*   在控制器中？（如果有，如何使用）
*   在视图中？
*   写个助手？
*   其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:23:51.110

这是推荐的：

**控制器：**

```
function posts() {
   $this->load->model("blog_model");
   $data['rows'] = $this->blog_model->index_posts(); 
   $this->load->view("blog_view", $data);
} 
```

**型号：（blog_model.php）**

```
function index_posts() {
   $this->load->database();
   $query = $this->db->get('your_table');
   $return = array();
   foreach ($query->result_array() as $line) {
      $line['body'] = ... do something with the body....
      $return[] = $line;
   }
   return $return;
} 
```

**查看：（blog_view.php）**

```
<?php foreach ($rows as $line): ?>
<div>
<p><?php echo $line['column']; ?></p>
</div>
<?php endforeach; ?> 
```

基本上会发生什么是您的模型返回一个多维数组，该数组被传递给视图并使用`foreach()`循环进行处理。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:45:27.430

如果您想重用该功能，请创建一个助手。如果您只想将此功能放入您的控制器并从该控制器调用。

模型仅用于访问数据库或可能在其他少数情况下，但主要用于访问数据库中的内容或编辑、删除等，并将结果发送到控制器进行进一步处理。

在你的情况下，我会坚持使用助手。

例如，您将创建一个文件**top_mega_best_functions.php**并将其放在 helpers 文件夹中。

比你写在那里，例如

```
function red_text($input) {

    echo '<span style="color: red;">';
    echo $input;
    echo '</span>';
} 
```

然后在您的自动加载器文件中加载帮助程序或在使用前加载。

并在您的视图或控制器中使用

```
$blablabla = "This text will be red";

red_text($blablabla); 
```

# mysql - MySQL 的字符编码问题 - 排序规则设置为 UTF-8，但文本存储为 ISO Latin 1

> ID：11954329
> 
> 赞同：0
> 
> 时间：2012-08-14T14:19:30.003
> 
> 标签：mysql, utf-8, character-encoding, latin1

我有一个表，其排序规则设置为 ut8_general_ci。表中的列也设置为此编码。

但是由于某种原因，当我在 MySQL 中查看我的表时，表中的文本被呈现/存储为 ISO Latin 1，如果我不想编辑表中任何条目中的任何文本，我必须使用ISO Latin 1 编码以确保文本在页面上正确呈现（页面用户 UTF8）。

手动将 ISO Latin 1 文本输入到表中通常可以工作，但是对于几个条目它不起作用，即字符在我的页面上没有正确呈现（当我使用 UTF8 时它们也没有正确呈现）。因此这个问题。如果我能弄清楚 MySQL 如何处理字符编码，我可能会解决这个问题。

所以，问题是有人可以解释 MySQL 如何处理编码，特别是为什么当排序规则设置为 UTF-8 时我在表中看到 ISO Latin 1 字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:42:02.070

事实证明，尽管在页面和表格以及表格的列上设置了字符编码，但与表格的连接默认为 ISO Latin 1。在我的查询中添加 'SET NAMES utf8' 解决了这个问题，即

```
$pdo = new PDO('mysql:dbname=****;host=localhost', '****', '****',
                array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8')); 
```

链接到的文章 deceze 非常有帮助。谢谢！

# assembly - 汇编中的 XOR 语句

> ID：11954331
> 
> 赞同：3
> 
> 时间：2012-08-14T14:19:35.883
> 
> 标签：assembly, gdb, x86-64

我试图理解这个程序的反汇编版本：

```
#include <stdio.h>

int main(){
   int i=0;
   printf("HELLO VIK");
   return 0;
} 
```

gdb 反汇编：

```
(gdb) disass main
Dump of assembler code for function main:
0x0000000100000ef0 <main+0>:    push   rbp
0x0000000100000ef1 <main+1>:    mov    rbp,rsp
0x0000000100000ef4 <main+4>:    sub    rsp,0x10
0x0000000100000ef8 <main+8>:    mov    DWORD PTR [rbp-0xc],0x0
0x0000000100000eff <main+15>:   xor    al,al
0x0000000100000f01 <main+17>:   lea    rcx,[rip+0x50]        # 0x100000f58
0x0000000100000f08 <main+24>:   mov    rdi,rcx
0x0000000100000f0b <main+27>:   call   0x100000f2c <dyld_stub_printf>
0x0000000100000f10 <main+32>:   mov    DWORD PTR [rbp-0x8],0x0
0x0000000100000f17 <main+39>:   mov    eax,DWORD PTR [rbp-0x8]
0x0000000100000f1a <main+42>:   mov    DWORD PTR [rbp-0x4],eax
0x0000000100000f1d <main+45>:   mov    eax,DWORD PTR [rbp-0x4]
0x0000000100000f20 <main+48>:   add    rsp,0x10
0x0000000100000f24 <main+52>:   pop    rbp
0x0000000100000f25 <main+53>:   ret 
```

如果我正确理解了前 3 行，则基指针将作为返回地址推入堆栈。然后将基指针设置为当前堆栈指针。堆栈的大小设置为 16 字节 (x10)。int i 的大小为 12 字节（0xc）并设置为 0。我不确定 (xor al, al) 做了什么。我是否正确地解释了这一点？xor al, al 行有什么作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:21:51.467

`xor al,al`是一种将寄存器归零的快速方法。它是 x86 汇编器中的一字节操作码，而`mov al, 0`.

# java - 以编程方式检查我是否植根于 Android 的有效方法？

> ID：11954336
> 
> 赞同：1
> 
> 时间：2012-08-14T14:19:51.600
> 
> 标签：java, android

它似乎有效，但我并不积极，因为我的测试能力有限（仅限于 AVD）。我想出了这个算法来检查我是否已经扎根。认为它会一直有效吗？我不相信。

```
private boolean isRooted() {
    try {
        Process process = new ProcessBuilder()
            .command("/system/bin/su")
            .redirectErrorStream(false)
            .start();
    } catch (IOException e) { 
        return false;
    }
    return true;
} 
```

# knockout.js - Knockout.js 不显示子对象

> ID：11954338
> 
> 赞同：2
> 
> 时间：2012-08-14T14:19:59.733
> 
> 标签：knockout.js, asp.net-web-api

我在获取 knockout.js 绑定以显示有可能从 ASP.NET Web Api 为空的子对象时遇到问题。

我基本上是在尝试创建一个可搜索的客户列表（使用 Jquery Datatable 插件），用户将选择一个客户记录来检索客户的完整详细信息（姓名、订单历史记录、客户备注等）。此客户详细信息将显示在数据表的一侧，并且某些字段将是可编辑的。在我的数据模型中，客户可以有零个、1 个或多个注释，这就是我遇到问题的对象。

**如何重现问题**

在 UI 上，如果用户选择了带有备注的客户，则敲击绑定并正确显示备注。如果用户选择了没有备注的客户，则不会显示任何内容（如预期的那样），但是当用户随后选择带有备注的另一个客户时，则不会显示任何内容（意外）。

**的JavaScript：**

```
$(document).ready(function () {

    //Party Model.
    var PartyModel = function (id) {
        var self = this;
        self.loaded = ko.observable(false);
        self.party = ko.observableArray([]);

        $.getJSON('api/party/GetParty?id=' + id, self.party).done(function () {
            self.loaded(true);
        });
    };

    //Customer List Datatable which is displayed on the left.
    custlisttable = $('#customerlist').dataTable({
        //"bServerSide": true,
        "bProcessing": true,
        "bPaginate": false,
        "sAjaxSource": "api/PartyNameView/GetvPartyNamebyStoreID?storeid=1600", //"api/PartyNameView/GetvPartyName?id=2",
        "sAjaxDataProp": "",
        "sDom": 'R<"H"lfr>t<"F"iTp>',
        "bJQueryUI": true,
        "aoColumns": [
                { "mDataProp": "DisplayName" },
                { "mDataProp": "PartyCategoryDesc"}],
        "oTableTools": {
            "sRowSelect": "single",
            "aButtons": [],
            "fnRowSelected": function (node) {
                aData = custlisttable.fnGetData(node); 
                $('#displayname').html(aData.DisplayName);
                id = aData.PartyID                      
                //get new party model using the PartyID (customerid).
                ko.applyBindings(new PartyModel(id));
                $("#accordion").show(750);
            }
        }
    });

    //Define the Contact Detail Accordian Section, but hide it until a record is selected.
    $("#accordion").accordion();
    $("#accordion").hide();
    $('.accordion .head').click(function () {
        $(this).next().toggle();
        return false;
    }).next().hide();
}); 
```

**的HTML**

```
<h2>Customers</h2>
<div class="row-fluid">
    <div class="span8">
        <!--Customer List using Datatable-->
        <table id="customerlist" class="display">
            <thead>
                <tr>
                    <th>Company Name</th>
                    <th>Customer Type</th>             
                </tr>
            </thead>
            <tbody> 
            </tbody>
        </table>
    </div>
    <div class="span4">
        <div class="row-fluid">
            <div id="accordion">
                <h3><a href="#"><div id="displayname">[displayname]</div></a></h3>
                    <div>
                        <div data-bind="text: party().PartyID"></div>
                        <div data-bind="text: party().StoreID"></div>
                        <!--pre data-bind="text: ko.toJSON($data)"></pre-->
                    </div>
                <h3><a href="#">People</a></h3>
                    <div>
                    <ul data-bind="foreach: party().People">
                        <li class="ui-widget" style="list-style-type: none; list-style-position: inside;">
                            <span data-bind="text: LastName"></span>, <span data-bind="text: FirstName"></span>
                        </li>
                    </ul>
                    </div> 
                <h3><a href="#">Notes</a></h3>
                    <div>
                    <ul data-bind="foreach: party().Notes">
                        <li class="ui-widget" style="list-style-type: none; list-style-position: inside;">
                            <span data-bind="text: NoteText"></span>
                        </li>
                        <li class="ui-widget" style="list-style-type: none; list-style-position: inside;">
                            <span data-bind="text: NoteID"></span>
                        </li>
                    </ul>
                    </div>
            </div>
        </div>
    </div>
</div> 
```

**来自 Web API 的示例 JSON，其中包含一个 Note 对象。**

```
{"$id":"1","PartyID":1,"StoreID":"1600 ","ApprovedforAR":false,"PartyCategoryID":1,"PartyTypeID":1,"OrganizationID":1,"InvoiceHeaders":[],"Notes":[{"$id":"2","NoteID":2,"NoteText":"Test Note 1","PartyID":1,"Party":{"$ref":"1"},"PeopleNotes":[],"EntityKey":{"$id":"3","EntitySetName":"Notes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"NoteID","Type":"System.Int32","Value":"2"}]}},{"$id":"4","NoteID":3,"NoteText":"Deliveries only after 5","PartyID":1,"Party":{"$ref":"1"},"PeopleNotes":[],"EntityKey":{"$id":"5","EntitySetName":"Notes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"NoteID","Type":"System.Int32","Value":"3"}]}}],"PartyCategory":{"$id":"6","PartyCategoryID":1,"PartyCategoryDesc":"Category 1","Parties":[{"$ref":"1"}],"EntityKey":{"$id":"7","EntitySetName":"PartyCategories","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyCategoryID","Type":"System.Int32","Value":"1"}]}},"PartyType":{"$id":"8","PartyTypeID":1,"PartyTypeDesc":"Party Type 1","Parties":[{"$ref":"1"},{"$id":"9","PartyID":2,"StoreID":"1600 ","ApprovedforAR":false,"PartyCategoryID":2,"PartyTypeID":1,"InvoiceHeaders":[],"Notes":[],"PartyCategory":{"$id":"10","PartyCategoryID":2,"PartyCategoryDesc":"Category 2","Parties":[{"$ref":"9"}],"EntityKey":{"$id":"11","EntitySetName":"PartyCategories","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyCategoryID","Type":"System.Int32","Value":"2"}]}},"PartyType":{"$ref":"8"},"People":[{"$id":"12","PersonID":2,"FirstName":"Tom","LastName":"Harber","Title":"Accounting","PartyID":2,"Notes":[],"Party":{"$ref":"9"},"EntityKey":{"$id":"13","EntitySetName":"People","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PersonID","Type":"System.Int32","Value":"2"}]}}],"PostalAddresses":[],"ChannelAddresses":[],"EntityKey":{"$id":"14","EntitySetName":"Parties","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyID","Type":"System.Int32","Value":"2"}]}}],"EntityKey":{"$id":"15","EntitySetName":"PartyTypes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyTypeID","Type":"System.Int32","Value":"1"}]}},"People":[{"$id":"16","PersonID":3,"FirstName":"Jared","LastName":"Kirkwood","Title":"Owner","PartyID":1,"Notes":[],"Party":{"$ref":"1"},"EntityKey":{"$id":"17","EntitySetName":"People","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PersonID","Type":"System.Int32","Value":"3"}]}}],"PostalAddresses":[],"Organization":{"$id":"18","OrganizationID":1,"OrganizationName":"Tony's Pizza Company","TaxExempt":false,"Parties":[{"$ref":"1"}],"EntityKey":{"$id":"19","EntitySetName":"Organizations","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"OrganizationID","Type":"System.Int32","Value":"1"}]}},"ChannelAddresses":[],"EntityKey":{"$id":"20","EntitySetName":"Parties","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyID","Type":"System.Int32","Value":"1"}]}} 
```

**来自 Web API 的示例 JSON，没有注释。**

```
{"$id":"1","PartyID":2,"StoreID":"1600 ","ApprovedforAR":false,"PartyCategoryID":2,"PartyTypeID":1,"InvoiceHeaders":[],"Notes":[],"PartyCategory":{"$id":"2","PartyCategoryID":2,"PartyCategoryDesc":"Category 2","Parties":[{"$ref":"1"}],"EntityKey":{"$id":"3","EntitySetName":"PartyCategories","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyCategoryID","Type":"System.Int32","Value":"2"}]}},"PartyType":{"$id":"4","PartyTypeID":1,"PartyTypeDesc":"Party Type 1","Parties":[{"$ref":"1"},{"$id":"5","PartyID":1,"StoreID":"1600 ","ApprovedforAR":false,"PartyCategoryID":1,"PartyTypeID":1,"OrganizationID":1,"InvoiceHeaders":[],"Notes":[{"$id":"6","NoteID":2,"NoteText":"Hello Party World","PartyID":1,"Party":{"$ref":"5"},"PeopleNotes":[],"EntityKey":{"$id":"7","EntitySetName":"Notes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"NoteID","Type":"System.Int32","Value":"2"}]}},{"$id":"8","NoteID":3,"NoteText":"It's Tomato Fest","PartyID":1,"Party":{"$ref":"5"},"PeopleNotes":[],"EntityKey":{"$id":"9","EntitySetName":"Notes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"NoteID","Type":"System.Int32","Value":"3"}]}}],"PartyCategory":{"$id":"10","PartyCategoryID":1,"PartyCategoryDesc":"Category 1","Parties":[{"$ref":"5"}],"EntityKey":{"$id":"11","EntitySetName":"PartyCategories","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyCategoryID","Type":"System.Int32","Value":"1"}]}},"PartyType":{"$ref":"4"},"People":[{"$id":"12","PersonID":3,"FirstName":"Jared","LastName":"Kirkwood","Title":"Owner","PartyID":1,"Notes":[],"Party":{"$ref":"5"},"EntityKey":{"$id":"13","EntitySetName":"People","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PersonID","Type":"System.Int32","Value":"3"}]}}],"PostalAddresses":[],"Organization":{"$id":"14","OrganizationID":1,"OrganizationName":"Tony Tomato's Pizza Company","TaxExempt":false,"Parties":[{"$ref":"5"}],"EntityKey":{"$id":"15","EntitySetName":"Organizations","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"OrganizationID","Type":"System.Int32","Value":"1"}]}},"ChannelAddresses":[],"EntityKey":{"$id":"16","EntitySetName":"Parties","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyID","Type":"System.Int32","Value":"1"}]}}],"EntityKey":{"$id":"17","EntitySetName":"PartyTypes","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyTypeID","Type":"System.Int32","Value":"1"}]}},"People":[{"$id":"18","PersonID":2,"FirstName":"Allen","LastName":"Harber","Title":"Helpdesk","PartyID":2,"Notes":[],"Party":{"$ref":"1"},"EntityKey":{"$id":"19","EntitySetName":"People","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PersonID","Type":"System.Int32","Value":"2"}]}}],"PostalAddresses":[],"ChannelAddresses":[],"EntityKey":{"$id":"20","EntitySetName":"Parties","EntityContainerName":"appCateringFulfillmentEntities","EntityKeyValues":[{"Key":"PartyID","Type":"System.Int32","Value":"2"}]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:24:29.447

终于能够弄清楚了。每次用户选择数据表行时，我都会调用 applyBindings。根据我发现的一些信息，这是不好的做法。

新视图模型

```
viewModel = {
    Party: ko.observableArray([]),
    GetParty: function (id) {
        //Reset Party
        this.Party([]);
        //Retrieve the new data from the server.
        $.ajax({ url: "api/party/GetParty?id=" + id,
            accepts: "application/json",
            cache: false,
            statusCode: {
                200: function (data) {
                    viewModel.Party(data);
                }
                //TODO Handle other status codes
            }
        });
    }
};
ko.applyBindings(viewModel); 
```

然后，当用户单击数据表中的一行时，只需在 fnRowSelected 函数中调用 GetParty。

```
viewModel.GetParty(id); 
```

# java - 反射、哈希表或性能方法？

> ID：11954339
> 
> 赞同：0
> 
> 时间：2012-08-14T14:20:01.787
> 
> 标签：java, class, reflection, data-structures, dictionary

我正在尝试编写一个 Java 程序来解码和编码 Ogg 流。我有一个解码器工作，但我不喜欢我有重复代码的事实，所以我开始写这样的东西：

```
Decoder oggDecoder = new Decoder(
    new StringDecoder( "Ogg" ),
    new IntDecoder( "something" )//, ...
); 
```

我为某些“类型”编写了编码器和解码器，然后用它们来构建整个东西。但是我不知道如何存储结果。我知道 3 个选项： - 将数据保存在一个字节数组中，并提供一个`get( String name )`和`set( String name, Object value )`方法可以直接在字节上工作。- 使用字典。- 使用一个类并使用反射来设置属性。

我对性能不是很感兴趣，如果它很慢，我并不在乎，只要它足够快来阅读音乐。这意味着我知道自己编写函数会使其更快，但我只想编写一个适用于所有属性的函数。

那么你认为最快的方法是什么？

问这个问题的另一种方法是：给定一组字段名称作为字符串数组，存储从字节流解码的相应值的最合适的数据结构是什么： - 将它们保存为字节 - 将它们存储在字典 - 使用反射将它们存储在一个类中

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:23:52.750

[KISS](http://en.wikipedia.org/wiki/KISS_principle) - 只需使用`HashMap<String, byte[]>`. 不需要反思。

**更新** 我不认为我一开始就明白你想要什么，但现在我认为你正在寻找的是一个异构的地图结构。

这是一个可能对您更有用的[问题。](https://stackoverflow.com/questions/6139325/heterogeneous-container-to-store-genericly-typed-objects-in-java)

# linker - freeglut 错误 LNK1104

> ID：11954344
> 
> 赞同：5
> 
> 时间：2012-08-14T14:20:18.417
> 
> 标签：linker, freeglut

在我的项目中，我想使用来自非官方 opengl sdk 的 freeglut 库。

我使用 Premake 为 vs2010 生成构建文件。然后我构建了所有库（调试）。在我的项目中，我为 freeglut 设置了 Additional Include Directories、Additional Library Directories。在其他依赖项中，我添加了 freeglutD.lib。

在代码中，我只包含了一个 freeglut 标头。当我想运行程序时出现错误：

```
>LINK : fatal error LNK1104: cannot open file 'freeglut.lib'. 
```

freeglutD.lib 是`sdk/freeglut/lib`. sdk中没有`freeglut.dll`and `freeglut.lib`。

早些时候，我使用动态链接的[链接](http://www.transmissionzero.co.uk/software/freeglut-devel/)中的 freeglut 2.8.0 MSVC 包（包含 freeglut.dll），一切正常。

怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T11:54:14.597

我的猜测是您忘记了有关使用 SDK 的文档中的这些行：

> 您还需要在命令行中添加一些#defines。这些都是：
> 
> *   FREEGLUT_STATIC
> *   _LIB
> *   FREEGLUT_LIB_PRAGMAS=0

你需要它`FREEGLUT_STATIC`来让 GLUT 知道它是静态链接的。否则它会寻找一个 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T14:06:46.110

我有一个来自 VS12 的旧项目，并且在 VS15 升级后尝试构建它时遇到了相同的 LNK1104 错误。我所要做的就是运行包管理器控制台（工具 - NuGet 包管理器）并输入：

```
Install-Package freeglut 
```

请注意，我在我的一个头文件中引用了 glew.h 和 freeglut.h，如下所示：

```
#include "..\packages\nupengl.core.0.1.0.1\build\native\include\GL\glew.h" 
#include "..\packages\nupengl.core.0.1.0.1\build\native\include\GL\freeglut.h" 
```

# delphi - Delphi对Stringlist进行排序，首先有两个字段

> ID：11954345
> 
> 赞同：1
> 
> 时间：2012-08-14T14:20:18.550
> 
> 标签：delphi, delphi-xe2, tstringlist

我正在实现一个本地缓存来加速 DNS 查找（IP-> 主机名）。缓存从 CSV 文件（“1.1.1.1host.example.com”）加载到具有两个字段的 TStringList 中：

```
TStringList[0] := IPAddress;
TStringList[1] := HostName; 
```

由于我将通过 IP 查询 TStringList，所以我很自然地希望对第一个字段进行排序：

```
TStringList.sorted := True; 
```

那会照顾好它，以便我可以更快地找到

```
IPResolved:=TStringList[TStringList.IndexOf('1.1.1.1'),1]; 
```

?

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T15:26:37.730

***免责声明：***

这不会回答您如何对字符串列表进行排序或如何将数据加载到字符串列表中。它将为您提供使用哈希表，这比使用字符串列表更有效（40k 名称，按名称搜索的值对）。

***选择：***

因为你有 Delphi XE2，你可以使用泛型[`TDictionary`](http://docwiki.embarcadero.com/Libraries/en/System.Generics.Collections.TDictionary)类。它将包含 IP 地址作为键和主机名作为值。在下面的代码中显示了如何填充字典以及如何通过给定的键（IP 地址）搜索值（主机名）：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Generics.Collections;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    IPList: TDictionary<string, string>;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  // create the TDictionary instance
  IPList := TDictionary<string, string>.Create;
  // here you will read your CSV file and add the items in a loop
  // I've used here some of the major IP addresses for Sweden
  IPList.Add('77.244.224.0', 'Insat Net AB');
  IPList.Add('79.138.128.0', 'Hi3G Access AB');
  IPList.Add('62.181.192.0', 'DGC Access AB');
  IPList.Add('81.216.128.0', 'TDC Swerige AB');
  IPList.Add('80.252.176.0', 'Phonera Networks AB');
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  // release a dictionary instance
  IPList.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  HostName: string;
begin
  // and how to search by the IP address and get the host name if found
  if IPList.TryGetValue('81.216.128.0', HostName) then
    ShowMessage(HostName)
  else
    ShowMessage('IP address not found!');
end;

end. 
```

***延期：***

然后，您可以简单地扩展上述解决方案以使用结构来存储不仅仅是主机名，例如主机位置：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Generics.Collections;

type
  TIPData = record
    HostName: string;
    HostLocation: string;
  end;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    IPList: TDictionary<string, TIPData>;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  IPData: TIPData;
begin
  IPList := TDictionary<string, TIPData>.Create;

  IPData.HostName := 'Broadnet Europe France';
  IPData.HostLocation := 'France';
  IPList.Add('78.155.128.0', IPData);

  IPData.HostName := 'DNA Palvelut Oy';
  IPData.HostLocation := 'Finland';
  IPList.Add('62.113.160.0', IPData);

  IPData.HostName := 'CD-Telematika a.s.';
  IPData.HostLocation := 'Czech republic';
  IPList.Add('89.203.128.0', IPData);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  IPList.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  IPData: TIPData;
begin
  if IPList.TryGetValue('89.203.128.0', IPData) then
    ShowMessage('Provider ' + IPData.HostName + ' from ' + IPData.HostLocation)
  else
    ShowMessage('IP address not found!');
end;

end. 
```

# c++ - 通过 popen() 执行的命令随机挂起

> ID：11954346
> 
> 赞同：2
> 
> 时间：2012-08-14T14:20:20.787
> 
> 标签：c++, linux, block, popen, futex

我的程序有这个奇怪的问题：

它尝试通过管道读取某些命令的输出来查找设备：

```
FILE* fp = NULL;
fp = popen ("cd /sys/bus/usb/devices; grep -i NDI */product", "r"); 
```

然后使用*fgets()*读取文件流并使用*pclose()*关闭管道。

在单线程程序中它运行良好。但是，当我把它集成到一个多线程程序中后，fgets()函数开始随机阻塞线程。

检查后，我发现*fgets()*阻塞，因为有时*fp*作为空文件流返回。在我将*fp*的状态设置为**非阻塞**并使用*read()*通过其 ID 读取文件后，我可以看到*read()*由于文件流为空而返回 -1，然后*pclose()*挂起。所有这些都是随机发生的。

所以我认为在这种情况下，通过 popen() 执行的命令会挂起并且永远不会终止。但为什么它随机发生？多线程程序只有另一个线程用于用户界面交互。我认为这很好，因为管道仅在本地使用。

任何想法表示赞赏。谢谢！

* * *

更新

strace 显示有时子进程在一堆 munmap() 调用之后调用 futex() 然后挂在那里： futex(0xb72eaf00, FUTEX_WAIT_PRIVATE, 2, NULL

在正常情况下，不会调用 futex。

作为参考，主进程中 strace 的输出：

```
1344962944.530384 pipe2([26, 27], O_CLOEXEC) = 0
1344962944.530441 clone(child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0xb41a8a68) = 25529
1344962944.534683 close(27)             = 0
1344962944.534801 fcntl64(26, F_SETFD, 0) = 0
1344962944.534852 write(1, "entering fgets\n", 15) = 15
1344962944.534924 fstat64(26, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
1344962944.534992 mmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb377d000
1344962944.535065 read(26, 
```

子进程 shell 的 strace 输出：

```
1344962944.534652 set_robust_list(0xb41a8a70, 0xc) = 0
1344962944.534790 getpid()              = 25529
1344962944.534843 getppid()             = 25453
1344962944.534917 close(12)             = 0
1344962944.534983 munmap(0xa8fff000, 1048576) = 0
...
1344962944.535925 munmap(0xb2728000, 118784) = 0
1344962944.535952 close(11)             = 0
1344962944.535980 close(10)             = 0
1344962944.536018 futex(0xb72eaf00, FUTEX_WAIT_PRIVATE, 2, NULL 
```

# delphi - 我可以从 FormCreate 调用 TIdTCPClient 函数吗？

> ID：11954350
> 
> 赞同：1
> 
> 时间：2012-08-14T14:20:28.397
> 
> 标签：delphi, indy10

我不确定 Delphi 何时创建主窗体的子组件。

在我的`TMainForm.FormCreate()`我调用`TIdTCPClient.Connect()`和`TIdTCPClient.SendCmd()`. 我的程序显示在 Windows 任务管理器中，但我没有看到 GUI。但是，如果我断开以太网电缆并启动程序，则会出现 GUI。

我猜这是因为我试图在主窗体的方法中调用主窗体的子组件的`FormCraete()`方法。

糟糕，我忘了说 -`TIdTCPClient`在设计时放置在表单上，​​它不是在运行时动态创建的。

任何意见？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:31:01.817

问题是 Indy 正在阻塞，因此`Create`在连接建立或超时之前停止继续。

您可以通过使用在`OnCreate`事件中发布到表单的自定义消息来解决此问题，这将延迟它直到表单显示：

```
const
  UM_DOCONNECTION = WM_USER + 1;

type
  TForm1=class(TForm)
     ...
  private
    procedure UmDoConnection(var Msg: TMessage); message UM_DOCONNECTION;
    ...
  end;

  implementation

  procedure TForm1.FormCreate(Sender: TObject);
  begin
    PostMessage(Handle, UM_DOCONNECTION, 0, 0);
    // Other stuff
  end;

  procedure TForm1.UmDoConnection(var Msg: TMessage);
  begin
    IdTCPClient.Connect;
    IdTCPClient.SendCmd(...);
  end; 
```

当然，最好的方法是将你的 Indy 东西移到它自己的线程中，这样它就与主线程没有连接。

# java - 将无状态 jsf 类添加到 JSF 项目时出错

> ID：11954352
> 
> 赞同：1
> 
> 时间：2012-08-14T14:20:33.847
> 
> 标签：java, jsf, jsf-2, clone, jsf-stateless

有时在 Glassfish 3.0.1 上运行 JSF 项目时，我会收到此错误，这也会导致服务器停机。谁能解释如何解决这个问题？

实际上，我正在尝试将[无状态 JSF 实现](http://industrieit.com/blog/2011/11/stateless-jsf-high-performance-zero-per-request-memory-overhead/)类添加到我的项目中。有时它运行良好，而有时会出现此错误。[这是源代码](https://bitbucket.org/industrieit/stateless-jsf/src/693208a2ebdd/src/main/java/com/industrieit/jsf/stateless/impl/SJSFStatePool.java)。

```
INFO: 19:23:47.730 [http-thread-pool-8080(2)] ERROR c.i.jsf.stateless.impl.SJSFStatePool - error force cloning view on postback
java.lang.IllegalArgumentException: Can not set final org.osgi.framework.BundleContext field org.osgi.util.tracker.ServiceTracker.context to org.osgi.util.tracker.ServiceTracker
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146) ~[na:1.6.0_23]
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150) ~[na:1.6.0_23]
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:37) ~[na:1.6.0_23]
    at sun.reflect.UnsafeQualifiedObjectFieldAccessorImpl.set(UnsafeQualifiedObjectFieldAccessorImpl.java:59) ~[na:1.6.0_23]
    at java.lang.reflect.Field.set(Field.java:657) ~[na:1.6.0_23]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:405) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.FastClonerArrayList.clone(com.rits.cloning.FastClonerArrayList:22) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.fastClone(com.rits.cloning.Cloner:96) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:355) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.FastClonerArrayList.clone(com.rits.cloning.FastClonerArrayList:22) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.fastClone(com.rits.cloning.Cloner:96) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:355) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.FastClonerHashMap.clone(com.rits.cloning.FastClonerHashMap:21) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.fastClone(com.rits.cloning.Cloner:96) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:355) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.FastClonerHashMap.clone(com.rits.cloning.FastClonerHashMap:22) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.fastClone(com.rits.cloning.Cloner:96) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:355) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:377) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:377) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.cloneInternal(com.rits.cloning.Cloner:404) ~[cloning-1.7.4.jar:na]
    at com.rits.cloning.Cloner.deepClone(com.rits.cloning.Cloner:309) ~[cloning-1.7.4.jar:na]
    at com.industrieit.jsf.stateless.impl.SJSFStatePool.get(SJSFStatePool.java:80) ~[SJSFStatePool.class:na]
    at com.industrieit.jsf.stateless.impl.SJSFViewHandler.initView(SJSFViewHandler.java:62) [SJSFViewHandler.class:na]
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:115) [jsf-impl.jar:2.1.3-FCS]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl.jar:2.1.3-FCS]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jsf-api.jar:2.1.3-FCS]
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539) [web-core.jar:3.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343) [web-core.jar:3.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) [web-core.jar:3.1.1]
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79) [primefaces-3.4-SNAPSHOT.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) [web-core.jar:3.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) [web-core.jar:3.1.1]
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) [org-netbeans-modules-web-httpmonitor.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) [web-core.jar:3.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) [web-core.jar:3.1.1]
    at px10.Security.AuthenticationFilter.doFilter(AuthenticationFilter.java:48) [AuthenticationFilter.class:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) [web-core.jar:3.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) [web-core.jar:3.1.1]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279) [web-core.jar:3.1.1]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) [web-core.jar:3.1.1]
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655) [web-core.jar:3.1.1]
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) [web-core.jar:3.1.1]
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98) [web-glue.jar:3.1.1]
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91) [web-glue.jar:3.1.1]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162) [web-core.jar:3.1.1]
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330) [web-core.jar:3.1.1]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) [web-core.jar:3.1.1]
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174) [kernel.jar:3.1.1]
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828) [grizzly-http.jar:1.9.36]
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725) [grizzly-http.jar:1.9.36]
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019) [grizzly-http.jar:1.9.36]
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225) [grizzly-http.jar:1.9.36]
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) [grizzly-http.jar:1.9.36]
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71) [grizzly-framework.jar:1.9.36]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) [grizzly-utils.jar:1.9.36]
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) [grizzly-utils.jar:1.9.36]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_23] 
```

.

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d897543, pid=7096, tid=4344
#
# JRE version: 6.0_23-b05
# Java VM: Java HotSpot(TM) Client VM (19.0-b09 mixed mode windows-x86 )
# Problematic frame:
# C  [zip.dll+0x7543]
#
# An error report file with more information is saved as:
# C:\Users\Rajat\.netbeans\7.0\config\GF3\domain1\hs_err_pid7096.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

# ruby - 在开发期间运行 Ruby 程序

> ID：11954361
> 
> 赞同：1
> 
> 时间：2012-08-14T14:20:48.777
> 
> 标签：ruby

我第一次用 Ruby 编写程序（我使用 RubyMine 作为我的 IDE），以前主要用 Java 编写代码。

在使用 Java 编程时，我过去常常在我添加到其中的每一位功能之后定期“运行”我的代码，只是为了检查它是否正常工作。

我正在尝试用 Ruby 做到这一点，但我遇到了一点困难。

我有以下类，我将把它用作我的程序的菜单，所以我希望用户在运行程序时从这里开始：

```
class Application
  # To change this template use File | Settings | File Templates.
  def initialize
    mainMenu
  end

  def navigateTo(what)
    what.new.display
    mainMenu
  end

  def mainMenu
    puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
case gets.strip
  when "1"
    navigateTo Module
    addModule
  when "2"
    navigateTo Module
  when "3"
    navigateTo Module
  when "4"
    navigateTo Module
  when "5"
    navigateTo Student
  when "6"
    navigateTo Student
  when "7"
    navigateTo Student
end
end
end 
```

但是，当我运行该类时，控制台会显示一行说明它正在运行它，但下一行是“进程完成，退出代码为 0”

我想不通这是为什么？在 Java 中，有一个 main 方法，程序在运行时总是会在该方法中获取指令……但据我所知，Ruby 是否不需要 main 方法？如果是这种情况，我如何运行到目前为止我写的内容来检查我写的是否正确？

****更新*****

好的，我已经在行中添加了

```
Application.new 
```

正如建议的那样，这太棒了——菜单现在打印出来了。我从菜单中选择了选项 1，并在控制台中打印了这一行：

```
#<Module:0x1bd2c90>What would you like to do? 
```

然后再次打印菜单。

选项 1 应该导航到我的 Module 类，如下所示：

```
class Module
  # To change this template use File | Settings | File Templates.
  @@moduleScheme = nil
  @@moduleYear = nil
  #@moduleTitle = ""

  def self.moduleYear
    @@moduleYear
  end

  def initialize(v)
    @val = v
  end
  # Set and get the @val object value
  def set (v)
    @val = v
  end
  def get
    return @val
  end

  def addModule
    moduleName = Module.new(30)
    moduleRefNo = Random(100)
    #moduleTitle = @moduleTitle
    moduleYear(4)

    print "What is the name of the module you would like to add?"
    moduleName = gets
    moduleRefNo
    printf "Which year does the module belong to?"
    @@moduleYear = gets
    puts "#{moduleName}, belonging to #{@@moduleYear} has been added to the system, with reference number #{moduleRefNo}."
    navigateTo Application

  end

  def addModuleToScheme
    moduleName.moduleScheme = schemeName
  end
  def removeModuleFromScheme
    moduleName.moduleScheme = nil
  end

  def queryModule

  end

end 
```

一旦用户从主菜单中选择了选项 1，并且程序已经导航到 Module 类，我希望它完全运行该类，即向用户显示提示，并读取他们在键盘上键入的任何内容，然后导航回菜单，如行所示

```
navigateTo Application 
```

在我的“addModule”函数结束时。但是，由于某种原因，它似乎要么没有导航到 Module 类，要么只是直接跳到它的末尾。谁能指出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:25:32.330

当您运行 ruby​​ 文件时，它将从头到尾运行该文件。在您的文件中，您只是定义一个类，因此它将在 ruby​​ 中创建该类，然后什么也不做，因为您没有告诉它实例化该类的实例。在文件末尾添加`Application.new`，它将创建该类的一个实例，并且查看您的代码，将打印并接收输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:32:29.130

您的代码可能如下所示：

```
class Application

  def run
    puts "What would you like to do?
      1: Add module to a scheme
      ...."
  end
  ...
end

Application.new.run
# here the user will interact with you application 
```

# android - Android：如何访问所有活动的数据？

> ID：11954364
> 
> 赞同：0
> 
> 时间：2012-08-14T14:20:55.290
> 
> 标签：android, memory, storage

我正在寻找一种可能性，以一种所有活动都可以访问它的方式存储用户 ID（登录后收到）。
如果我理解正确，SharedPreference 仅适用于一个特定的 Acitivty。

我必须全面保存ID的哪些可能性？

问候，奥兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:27:12.787

*   选项 1：创建一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)来保存您的数据（首选）
*   [`Application`](http://developer.android.com/reference/android/app/Application.html)选项 2：使用上下文覆盖和访问数据

这些适用于**非持久**的应用程序状态，这意味着它们存储在内存中，因此一旦您的应用程序退出，它们就会丢失。

对于持久存储，请使用其中之一。

*   选项 1：使用[`SharedPrefferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)
*   选项 2：使用[SQLiteDatabase](http://developer.android.com/guide/topics/data/data-storage.html#db)
*   选项 3：使用[内部应用程序内存](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)（用于私有数据）

有关更多想法，请参阅 Android 文档中的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:26:28.123

放置数据：

```
SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
editor.putString("user_id", "THE USER ID HERE");
editor.commit(); 
```

要检索数据：

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
String userID = prefs.getString("user_id", null); 
```

如果用户 id 是一个数字，您可以使用 putInt 或任何原始数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:27:09.600

在整个应用程序中都可以访问 SharedPreferences。如果您只需要为应用程序的运行时存储数据，只需将其声明为 public static，您就可以从任何地方访问它。

# jquery-ui - 日期时间格式

> ID：11954371
> 
> 赞同：1
> 
> 时间：2012-08-14T14:21:06.920
> 
> 标签：jquery-ui

我正在处理要设置日期字段的列标签内的 wijgrid。

我的数据来自 JSON（日期在表格列中），但我的日期格式是 2012-07-24T14:03:24.000+0000，我希望我的日期格式应该是这样的 2012-07-24。

我在列中尝试了 dataType: "datetime" 但它没有显示它而是隐藏在列中（列显示为空）

这是我的代码：

```
$("#deviceloglist")
     .wijgrid({
        pageSize : 5,
        allowPaging : true,
        allowSort: true,
        allowfilter:true,
columns: [ { headerText : "Created Date" ,dateFormat: 'd'
    },{ headerText : "Details"}, { headerText : "CreatedBy"},
    { headerText : "LogType", visible:false}, { headerText : "LogData",visible:false}
], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:12:38.337

您可以简单地使用一个**子字符串**，它首先会找出字母“T”在哪里。

这是一个测试样本：

```
var test = "2012-07-24T14:03:24.000+0000";
alert(test.substr(0,test.indexOf("T"))); 
```

.indexOf("T") 返回 10。然后我们使用它将字符串从 char 0 剪切到 10。

# c# - howto：itemscontrol 中的列拖动/移动功能，类似于 Silverlight 中的 DataGrid

> ID：11954376
> 
> 赞同：0
> 
> 时间：2012-08-14T14:21:12.607
> 
> 标签：c#, .net, silverlight, itemscontrol

e 需要显示与实体相关的数据的垂直配置文件，配置文件可以动态更改，因此基本上它是一个动态列网格，只是它不是网格控件，而是我使用 ItemsControl 和 Listboxes 实现了这一点。

现在我需要实现类似于网格在列移动中的行为方式，我必须能够将配置文件 6 移动到配置文件 1 旁边以进行比较。

我怎样才能做到这一点？

下面是我的 Xaml，它呈现如下代码所示的屏幕。

标题按钮是切换按钮，因此单击它会选择整个配置文件。

**使用拖放更新代码**

```
<ScrollViewer Height="500" Name="scrollViewer1" Width="Auto" HorizontalAlignment="Stretch" 
                      VerticalAlignment="Top" Margin="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">

                <toolkit:DockPanel>
                    <!-- Items control container to hold time Bucket information -->
                    <ItemsControl x:Name="TimeBucket" Grid.Column="0" toolkit:DockPanel.Dock="Left" VerticalAlignment="Top">
                        <Grid HorizontalAlignment="Left">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <ToggleButton Grid.Row="0" Content="Bucket" Width="Auto" HorizontalAlignment="Stretch" IsEnabled="False"/>
                            <ListBox Grid.Row="1" Width="Auto" ItemsSource="{Binding Source={StaticResource DC1}, Path=Content.TimeBuckets, Mode=TwoWay}" 
                                 IsEnabled="False">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBox Text="{Binding}" Style="{StaticResource BucketProfileStyle}" />
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical"  VerticalAlignment="Top"  HorizontalAlignment="Stretch">
                                        </StackPanel>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ListBox>
                        </Grid>
                    </ItemsControl>

                    <!-- Items Control for dynamic profile columns creation -->
                <toolkit:ListBoxDragDropTarget AllowDrop="True" AllowedSourceEffects="Move" toolkit:DockPanel.Dock="Left" BorderThickness="0" Padding="0" VerticalAlignment="Top">
                    <ListBox ItemsSource="{Binding Profiles}" VerticalAlignment="Top" toolkit:DockPanel.Dock="Left" BorderThickness="0" Padding="0" IsTabStop="True" TabNavigation="Cycle">
                        <!--<ItemsControl x:Name="Profile" ItemsSource="{Binding Profiles}" VerticalAlignment="Top" toolkit:DockPanel.Dock="Left" Drop="Profile_Drop" >-->
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel  Orientation="Horizontal" Drop="StackPanel_Drop" Margin="0"/>
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid HorizontalAlignment="Left">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <ToggleButton Grid.Row="0" x:Name="HeaderButton" Content="{Binding Name}" Tag="{Binding ID}"
                                        Width="Auto" HorizontalAlignment="Stretch" ClickMode="Release">
                                        <i:Interaction.Behaviors>
                                            <b:ToggleButtonAsHeaderButtonItemClickBehavior Command="{Binding Source={StaticResource DC1}, Path=Content.HeaderButtonClickCommand}"/>
                                        </i:Interaction.Behaviors>

                                        <ig:ContextMenuService.Manager>
                                            <!--If you use the Infragistics Commanding Framework, you should set the OpenMode property to None-->
                                            <ig:ContextMenuManager ModifierKeys="None" OpenMode="RightClick">
                                                <ig:ContextMenuManager.ContextMenu>
                                                    <ig:XamContextMenu   HorizontalAlignment="Left" Name="xamContextMenu11" VerticalAlignment="Top">
                                                        <ig:XamMenuItem Header="Import" IsEnabled="{Binding Source={StaticResource DC1}, Path=Content.ImportMenuIsEnabled}">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="Click">
                                                                    <i:InvokeCommandAction Command="{Binding Source={StaticResource DC1}, Path=Content.ImportMenuCommand}"
                                                           CommandParameter="IMPORT"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </ig:XamMenuItem>
                                                        <ig:XamMenuItem Header="Export" IsEnabled="{Binding Source={StaticResource DC1}, Path=Content.ExportMenuIsEnabled}">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="Click">
                                                                    <i:InvokeCommandAction Command="{Binding Source={StaticResource DC1}, Path=Content.ExportMenuCommand}"
                                                           CommandParameter="EXPORT"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </ig:XamMenuItem>
                                                        <ig:XamMenuItem Header="Revert to Original" IsEnabled="{Binding Source={StaticResource DC1}, Path=Content.RevertMenuIsEnabled}">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="Click">
                                                                    <i:InvokeCommandAction Command="{Binding Source={StaticResource DC1}, Path=Content.RevertMenuCommand}"
                                                           CommandParameter="REVERT"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </ig:XamMenuItem>
                                                        <ig:XamMenuItem Header="Graph" IsEnabled="{Binding Source={StaticResource DC1}, Path=Content.GraphMenuIsEnabled}">
                                                            <i:Interaction.Triggers>
                                                                <i:EventTrigger EventName="Click">
                                                                    <i:InvokeCommandAction Command="{Binding Source={StaticResource DC1}, Path=Content.GraphMenuCommand}"
                                                           CommandParameter="GRAPH"/>
                                                                </i:EventTrigger>
                                                            </i:Interaction.Triggers>
                                                        </ig:XamMenuItem>
                                                    </ig:XamContextMenu>
                                                </ig:ContextMenuManager.ContextMenu>
                                            </ig:ContextMenuManager>
                                        </ig:ContextMenuService.Manager>
                                    </ToggleButton>

                                    <ListBox Grid.Row="1" Height="Auto" x:Name="listBox1" Width="Auto" HorizontalAlignment="Stretch"
                                     ItemsSource="{Binding Path=Profile, Mode=TwoWay}" SelectionMode="Extended" 
                                     dp:ListBoxExtenders.AutoScrollToCurrentItem="True">

                                        <ListBox.Style>
                                            <Style TargetType="ListBox">
                                                <Setter Property="Background" Value="{Binding Path=Status, Converter={StaticResource ProfileStatusIndicator}}"/>
                                            </Style>
                                        </ListBox.Style>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBox Text="{Binding}" Style="{StaticResource BucketProfileStyle}" />
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel  Orientation="Vertical"  VerticalAlignment="Top"  HorizontalAlignment="Stretch">
                                                </StackPanel>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                    </ListBox>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <!--</ItemsControl>-->

                    </ListBox>
                </toolkit:ListBoxDragDropTarget>
            </toolkit:DockPanel>

        </ScrollViewer> 
```

![在此处输入图像描述](../Images/f3e05a3154bdb2608ee8b30a83c1a831.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T10:53:05.810

因此，使用 dragdropTarget，我能够达到所需的结果，为了清楚起见，将完整的解决方案留在上面。

```
<toolkit:ListBoxDragDropTarget AllowDrop="True" AllowedSourceEffects="Move" toolkit:DockPanel.Dock="Left" BorderThickness="0" Padding="0" VerticalAlignment="Top"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:50:01.057

使用拖放目标解决，如果有人需要，上面发布的更新解决方案。

# android - 著名的android未绑定前缀错误

> ID：11954377
> 
> 赞同：0
> 
> 时间：2012-08-14T14:21:15.570
> 
> 标签：android, xml

我正在按照“Beginning Android 4”一书中的示例进行操作，但遇到了 xml 解析错误。显然很多人都有同样的问题，但我找不到与书籍示例类似的帖子。下面是我的代码。unboundn 前缀命中第二个无线电组...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 

    <RadioGroup android:id="@+id/orientation"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp">          
        <RadioButton
            android:id="@+id/horizontal"
            android:text="horizontal">
        </RadioButton>
        <RadioButton
            android:id="@+id/vertical"
            android:text="vertical">
        </RadioButton>
    </RadioGroup>  
    <RadioGroup android:id="@+id/gravity"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        andorid:padding="5dip">         
        <RadioButton
            android:id="@+id/left"
            andoid:test="left">
        </RadioButton>
        <RadioButton
            android:id="@+id/center"
            android:text="center">           
        </RadioButton>    
        <RadioButton
            android:id="@+id/right"
            android:text="right">
        </RadioButton>   
    </RadioGroup>        
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:30:05.420

你的第二个无线电组有几个错误

```
 andorid:padding="5dip" 
```

将此更改为

```
 android:padding="5dip" 
```

注意从`andorid`到`android`和的变化

```
 andoid:test="left" 
```

到

```
 android:text="left" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:24:43.967

```
andorid:padding="5dip"> 
```

前缀 andorid 未绑定。我想你的意思是

```
android:padding="5dip"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:24:41.993

您在文档中多次错字 android，这是属性的前缀。看：

```
andorid:padding 
```

代替

安卓：填充

# r - 如何在R中绘制ccdf，y轴显示概率

> ID：11954382
> 
> 赞同：1
> 
> 时间：2012-08-14T14:21:29.987
> 
> 标签：r

根据[Plotting CCDF of walk durations](https://stackoverflow.com/questions/6680635/plotting-ccdf-of-walking-durations)，我生成了这样的 ccdf 图：

```
ccdf<-function(views,density=FALSE)
  {
    freq = table(views)
    X = rev(as.numeric(names(freq)))
    Y =cumsum(rev(as.list(freq)));
    data.frame(x=X,count=Y)
  }
library(ggplot2)
qplot(x,count,data=ccdf(views),log='xy') 
```

![ccdf](../Images/130796b8473dafba78526a25152b9f95.png)

Y 轴 = x 值的计数，但我想得到 Y = P[X >= x]，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:15:34.637

我不确切知道您的数据是什么样的，但听起来像您想要的：

```
ccdf<-function(views,density=FALSE)
  {
    freq = table(views)
    X = rev(as.numeric(names(freq)))
    Y =cumsum(as.list(freq));          #not reversed
    Y=(max(Y)-Y)/max(Y)                #proportion, beware recursion!
    data.frame(x=X,Cum.Prop=Y)         #name change  
  }
qplot(x,Cum.Prop ,data=ccdf(views),log='xy') 
```

如果你告诉我更多关于你的`views`变量的信息，我可以确保它工作正常。

# ios - 核心数据保存进度

> ID：11954387
> 
> 赞同：2
> 
> 时间：2012-08-14T14:21:44.297
> 
> 标签：ios, core-data

我想知道我是否可以获得有关保存 NSManagedObjectContext 进度的信息。

```
if (![self.context save:&error]) 
{
    NSLog(@"Unresolved error %@", error);
    [self.context rollback];
    return NO;
} 
```

我需要保存很多东西，所以保存可能需要很多时间......我需要以百分比通知用户进度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:28:37.447

不幸的是，Core Data 并没有真正的保存过程，而且它因设备而异——例如，4S 的保存比 3GS 快得多。

您可以做的就是进行几次保存。我为一个项目做了这个。我循环了很多 XML，每循环 20 次，我就会保存上下文并更新进度条。这使得整个解析+保存过程在视觉上看起来更快了一些。它实际上也可能有助于加快速度，因为一次保存一小块数据对我来说比最后保存对上下文的所有更改要快。我最终在我的循环中保存了 17 次神奇的数字，这对我来说是最快的解析时间，所以你可以稍微调整一下这个数字。

您也可以只显示一个活动视图（微调器），这是一种不确定的方式，或者在保存过程中向用户提供视觉反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:35:48.387

最简单的方法是只对 MOC 进行小块更改，保存每个小的更改。然而，为了得到一个真实的百分比，你必须首先知道工作的总量......或者做出一个很好的猜测并随时更新总数。

无论如何，你可以做这样的事情......

```
dispatch_async(some_queue, ^{
    while (workToDo) {
        getSomeWorkToDo();
        doTheCurrentPieceOfWork();
        // Save current piece of work practicing Safe Core Data
        [managedObjectContext performBlock:^{
            if (![managedObjectContext save:&error]) {
                // Handle error
            }
        }];
        computePercentageComplete();
        dispatch_async(dispatch_get_main_queue(), ^{
            // Update the control with the new percent complete
        });
    }
}); 
```

# c#-4.0 - 如何将值从数据库分配给asp.net c#中的标签或文本框

> ID：11954390
> 
> 赞同：0
> 
> 时间：2012-08-14T14:21:48.410
> 
> 标签：c#-4.0

我正在使用以下方法为标签或文本框分配值：首先我使用下拉列表然后我使用数据绑定然后我将下拉列表值分配给标签或文本框。

```
<asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="A" DataTextField="Regisno" DataValueField="Regisno">
    </asp:DropDownList>

 <asp:AccessDataSource ID="A" runat="server" DataFile="~/App_Data/Database.mdb" 
            SelectCommand="SELECT [Regisno] FROM [tblsignupv] WHERE ([Email] = ?)">
            <SelectParameters>
                <asp:SessionParameter Name="Email" SessionField="User" Type="String" />
            </SelectParameters>
        </asp:AccessDataSource> 
```

我想知道一种使用 c# 代码直接从数据库中为标签或文本框赋值的方法

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:37:56.227

如果您的组合框已经填充了数据，您可以简单地使用以下命令选择一个项目：

```
DropDownList1.SelectedValue="123"; 
```

如果您的值来自数据库，那么您必须使用以下内容：

```
SqlCommand comm = new SqlCommand();
comm.Connection = new SqlConnection("Data Source=(local);Initial Catalog=[db];user=[user];password=[pwd];");
String sql = @"SELECT [Regisno] FROM [tblsignupv] WHERE ([Email] = '[emailaddress]')";
comm.CommandText = sql;
comm.Connection.Open();
SqlDataReader cursor = comm.ExecuteReader();
while (cursor.Read())
{
     // add your option to the combobox here
     customerID.Items.Add(new ListItem(cursor["text"].ToString(), cursor["value"].ToString()));
}
comm.Connection.Close(); 
```

当然，您需要将“文本”和“值”更改为数据库的列。

# selenium - Selenium 将存储的文本与 NOT 或 != 运算符进行比较

> ID：11954392
> 
> 赞同：0
> 
> 时间：2012-08-14T14:21:56.437
> 
> 标签：selenium, operators, compare

我正在尝试比较两个变量的内容，以便在 variable1 != variable2 时返回。我发现了一些不同的示例，如何比较变量，但没有找到如何将其与运算符一起使用。

首先，我存储文本，等待 5 分钟，然后再次存储文本。如果文字不同，则睾丸通过。

```
<tr>
    <td>storeText</td>
    <td>id=newsdiv_1</td>
    <td>newsBox1</td>
</tr>
<!--wait 6 min for ajax update-->
<tr>
    <td>pause</td>
    <td>360000</td>
    <td></td>
</tr>
<tr>
    <td>storeText</td>
    <td>id=newsdiv_1</td>
    <td>newsBox2</td>
</tr>
<tr>
    <td>verifyExpression</td>
    <td>${newsBox1}</td>
    <td>regexp=!(${newsBox2})</td>
</tr> 
```

`verifyExpression`如果 2 个变量相等，则非常适合比较。但最后一个测试应该像这样工作：`if newsBox1!=newsBox2 than return true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:20:59.970

你可以做一个`verifyNotExpression`，这基本上是一个不是`verifyExpression`：

```
<tr>
    <td>verifyNotExpression</td>
    <td>${newsBox1}</td>
    <td>${newsBox2}</td>
</tr> 
```

# magento - Magento - 网格分页

> ID：11954393
> 
> 赞同：3
> 
> 时间：2012-08-14T14:21:56.930
> 
> 标签：magento, gridview, pagination

我在 magento 后端创建了网格，但分页不起作用。无论我选择每页有多少条记录，它们总是在页面上可见。现在我在数据库中有 41 条记录，并且网格上方的“统计信息”正常（找到的页数和记录数）：

```
Page 1 of 3 pages | View 20 per page | Total 41 records found 
```

哪个文件负责分页？某些列的顺序还有另一个问题。例如。记录的显示方式与我按 ID 选择 ASC 或 DESC 顺序相同...

网格：

```
public function __construct() {
        parent::__construct();

        $this->setId('logger_grid');
        $this->setUseAjax(FALSE);
        $this->setDefaultSort('id');
        $this->setDefaultDir(Varien_Data_Collection::SORT_ORDER_ASC);
        $this->setSaveParametersInSession(TRUE);
    }

    public function _prepareCollection() {
        $collection = Mage::getModel('logger/logger')->getCollection()->load();
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }

    public function _prepareColumns() {
        $this->addColumn('id', array(
            'header' => Mage::helper('logger')->__('ID'),
            'sortable' => TRUE,
            'index' => 'log_id',
            'editable' => FALSE,
        ));

        $this->addColumn('interface', array(
            'header' => Mage::helper('logger')->__('Interface'),
            'sortable' => TRUE,
            'index' => 'interface',
            'editable' => FALSE,
        ));

        $this->addColumn('type', array(
            'header' => Mage::helper('logger')->__('Type'),
            'sortable' => TRUE,
            'index' => 'type',
            'editable' => FALSE,
        ));

        $this->addColumn('description', array(
            'header' => Mage::helper('logger')->__('Description'),
            'sortable' => TRUE,
            'index' => 'description',
            'editable' => FALSE,
        ));

        $this->addColumn('message_data', array(
            'header' => Mage::helper('logger')->__('Message'),
            'sortable' => TRUE,
            'index' => 'message_data',
            'editable' => FALSE,
        ));

        $this->addColumn('time', array(
            'header' => Mage::helper('logger')->__('Time'),
            'sortable' => TRUE,
            'index' => 'time',
            'editable' => FALSE,
            'type' => 'datetime',
        ));

        return parent::_prepareColumns();
    }

    public function getRowUrl($row) {
        return $this->getUrl('*/*/edit', array('id' => $row->getId()));
    } 
```

集合.php：

```
public function _construct(){
    $this->_init("logger/logger");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:43:48.200

好的，问题解决了。一如既往只是一件小事......在`_prepareCollection()`我使用的功能中 `$collection = Mage::getModel('logger/logger')->getCollection()->load();`，分页由于`load()`功能而不起作用。

感谢您的回复，sparcksoft :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:12:36.270

如果您创建了自定义集合资源模型，则可能是您覆盖或破坏了 {{_renderLimit()}} 的实现，它根据当前页面和页面大小为基础 SQL 查询添加了限制。

```
// Varien_Data_Collection_Db
protected function _renderLimit()
{
    if($this->_pageSize){
        $this->_select->limitPage($this->getCurPage(), $this->_pageSize);
    }

    return $this;
} 
```

你能从你的收藏资源模型和你的网格块中发布相关部分吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T10:33:58.400

你可以使用这个：

```
protected function _prepareCollection()
{
    $collection = Mage::getModel('vendor/model')->getCollection();
    $this->setCollection($collection);
    //
    return Mage_Adminhtml_Block_Widget_Grid::_prepareCollection();
} 
```

在这种情况下，您可以访问您的自定义模型并使用分页显示

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-10-30T11:49:23.577

要解决此问题，您需要编辑您的核心文件之一，请点击以下链接：

[https://raisereview.com/wrong-grid-count-and-pagination-issue-in-magento-admin-grid/](https://raisereview.com/wrong-grid-count-and-pagination-issue-in-magento-admin-grid/)

# scala - Scala trait 组合问题

> ID：11954394
> 
> 赞同：1
> 
> 时间：2012-08-14T14:22:02.390
> 
> 标签：scala, traits

我有一个我无法修改源的类：

```
class Foo {

  def bar() = println("bar")

} 
```

还有一个我想在运行时混入其中的特征

```
trait Zee { this: Foo =>

  abstract override def bar() = {
    println("before bar")
    super.bar()
  }
} 
```

这是扔那个`bar is not a member of Object with ScalaObject`

我究竟做错了什么？是否可以在不修改源代码的情况下实现这一`Foo`目标？

最终的客户端代码需要如下所示：

```
val foo = new Foo with Zee
foo.bar() // should print 'before bar' and then 'bar' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:28:22.130

您的 Zee 特征没有超级特征（除了从 ScalaObject 的隐式继承），因此 super 不包含定义，`bar`也没有什么可以覆盖或调用（super.bar）。

你为什么不写这个没有自我参考？

```
class Foo {

  def bar() = println("bar")

}

trait Zee extends Foo {

  abstract override def bar() = {
    println("before bar")
    super.bar()
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:28:54.310

你可以在你的 trait 中扩展类 Foo ：

```
trait Zee extends Foo 
```

您的代码将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:29:23.657

你的特质需要`extend`foo

```
trait Zee extends Foo {
  abstract override def bar() = {
    println("before bar")
    super.bar()
  }
} 
```

# jsf - 如何创建一个在 inputText 和 inputSecret 之间切换的复合组件？

> ID：11954395
> 
> 赞同：2
> 
> 时间：2012-08-14T14:22:06.680
> 
> 标签：jsf, facelets, composite-component

我正在编写一个 Facelets 复合组件，它根据参数在使用 inputText 和 inputSecret 之间切换：

```
<composite:interface>
    <composite:attribute name="myId" required="true"/>
    <composite:attribute name="secret" required="false" default="false" />
</composite:interface>

<composite:implementation>
    <h:inputSecret rendered="#{cc.attrs.secret}" id="#{cc.attrs.myId}" />
    <h:inputText rendered="#{!cc.attrs.secret}" id="#{cc.attrs.myId}" />
</composite:implementation> 
```

问题是我收到以下错误：

> 组件 ID [JSF mangled id] 已在视图中找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T20:06:26.190

使用类似 JSTL 的视图构建时间标记`<c:if>`或`<c:choose>`代替 JSF 组件的`rendered`属性。视图构建时间标记在构建 JSF 组件树期间评估，而渲染属性仅在基于 JSF 组件树生成 HTML 期间评估（因此您最终仍然会在 JSF 组件树中得到具有相同 ID 的**两个**组件！） .

例如

```
<c:if test="#{not cc.attrs.secret}">
    <h:inputText id="input" />
</c:if>
<c:if test="#{cc.attrs.secret}">
    <h:inputSecret id="input" />
</c:if> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

**与具体问题**无关**`myId`，没有意义。给他们一个固定的ID。如果原因是无法通过 ajax 从外部引用它们，请[参阅在 f:ajax render 中引用复合组件 ID](https://stackoverflow.com/questions/13313207/referring-composite-component-id-in-fajax-render/)。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:57:24.743

组件是否实际呈现并不重要。这两个组件仍将存在于视图的内部组件树中，并且需要唯一的 id。我们也遇到了这个问题。

我们使用 _1 和 _2 作为 id 后缀，如果我们需要在 javaScript 中获取 id，我们使用 JQuery 的部分匹配器。

在你的情况下，你不能让你的 bean 的 getMyId() 方法根据秘密属性的值返回不同的 id 吗？**

# html - 您可以在本地创建一个 HTML 表单来输出要保存的 .txt 文件吗？

> ID：11954396
> 
> 赞同：0
> 
> 时间：2012-08-14T14:22:11.803
> 
> 标签：html

您能否创建一个 html 表单，该表单可以存放在 USB 闪存驱动器上并在浏览器中打开，允许某人输入信息，然后允许他们将输入的内容作为 .txt 文件保存回同一个 USB？您可以指出我的任何想法或资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:41:56.923

不是一个完整的解决方案，但也许它会让你走上正确的轨道：

1.  生成一个带有表单的普通 HTML 页面，以输入所有必要的信息。

2.  然后使用 JavaScript 构建一个字符串，其中包含要存储在文本文件中的所有数据。

3.  从中创建一个`Blob()`对象（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Blob)） - 该类型`application\octet-stream`对于稍后强制下载很重要：

    `var myBlob = new Blob( content, { "type" : "application\/octet-stream" });`

4.  `window.URL.createObjectURL`使用（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)）将该 blob 转换为 DataURL ：

    `var dataUrl = window.URL.createObjectURL( myBlob );`

5.  使用更新浏览器选项卡的位置`window.location`并将其设置为您的数据 url：

    `window.location = dataUrl;`

然后，用户将看到您生成的文本文件的常用“将文件另存为...”对话框。但是请注意，这种方式您无法设置文本文件的名称！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:23:28.570

不是直接的。由于这种类型的表单处理必须发生在服务器端，因此您需要一个 Web 服务器。

现在，完全可以从该闪存驱动器运行 Apache 或类似的东西，并让 PHP 或其他东西来写入文件。这并不像您正在寻找的那么简单，但是是可能的。请记住，并非每个人都启用了自动运行，人们使用不同的操作系统，而且防火墙通常对新应用程序开放端口很挑剔。

# javascript - WKT 和 openlayers

> ID：11954401
> 
> 赞同：4
> 
> 时间：2012-08-14T14:22:24.253
> 
> 标签：javascript, jquery, openlayers, wkt

我不知道如何`WKT`在 OpenLayers 中使用该格式。

我试过[在文档中找到解决方案](http://dev.openlayers.org/releases/OpenLayers-2.6/examples/wkt.html)，女巫基本上把我带到了这个：http: [//jsfiddle.net/Christer/WG8YP/2/](http://jsfiddle.net/Christer/WG8YP/2/)

但这给了我以下错误：

```
Uncaught SyntaxError: Unexpected number 
```

我不知道hazzle是关于什么的，因为数字和所有内容都是直接从openlayers自己的边界/点/地理复制出来的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:56:12.817

试试这个

[http://jsfiddle.net/WG8YP/4/](http://jsfiddle.net/WG8YP/4/)

`addFeatures`需要[一系列特征](http://dev.openlayers.org/releases/OpenLayers-2.12/doc/apidocs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.addFeatures)。

# 代码：

```
var polygonFeature = wkt.read("POLYGON((-15.8203125 2.4609375, -15.8203125 -10.546875, 6.85546875 -11.25, 8.26171875 -3.33984375, -15.8203125 2.4609375))");
polygonFeature.geometry.transform(map.displayProjection, map.getProjectionObject());         
vectors.addFeatures([polygonFeature]); 
```

# iphone - 代码在 iPhone 上不工作，但在模拟器上工作

> ID：11954404
> 
> 赞同：0
> 
> 时间：2012-08-14T14:22:34.213
> 
> 标签：iphone, ios

我的实时聊天中有此代码。

```
if (TRUE && (balloonsOn != NO || !htmlStart)) {
    balloonsOn  = TRUE;

    htmlStart = [self createChatLines: balloonsOn ? @"htmlformat-balloons" : @"htmlformat"];

    if (chatLines > 0){
        chatLines = 0;
        [self updateView];
    }   
} 
```

在模拟器上它可以正常工作，但在手机上它不起作用。它以前工作过很多次，但现在它在电话上停止工作了。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:28:50.177

据我所见，应该没有什么东西不能在 iPhone 上运行。我唯一能想到的是，你在使用这些字符串时并不关心 iO 的大小写敏感性。模拟器不区分大小写，但 iOs 是..让我知道 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:33:04.843

什么是变量“真”？我认为将其作为变量名可能是问题所在，将其重命名为其他名称，看看它是否有效。

# asp.net - ExecuteNonQuery() 错误；

> ID：11954406
> 
> 赞同：2
> 
> 时间：2012-08-14T14:22:39.630
> 
> 标签：asp.net, tsql, c#-4.0, ado.net

我收到以下错误`ExecuteNonQuery()`

```
"String or binary data would be truncated. The statement has been terminated." 
```

问题是要发送的变量比数据库中的变量大。我正在使用以下代码：

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //GridViewRow row = GridView1.SelectedRow;
        GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
        var Username = (Label)row.FindControl("Label3");
        var Password = (Label)row.FindControl("Label4");
        var Email = (Label)row.FindControl("Label5");
       // var ID_Inscricao = ((Label)row.FindControl("Label1")).Text;
        var ID_Inscricao = ((Label)row.FindControl("Label1")).Text;

        SqlConnection sqlConn = new SqlConnection(ConfigurationManager.ConnectionStrings["FormacaoConnectionString"].ToString());
        SqlCommand sqlComm = new SqlCommand();

        sqlComm = sqlConn.CreateCommand();
        sqlComm.Parameters.Add("@Username", SqlDbType.Text);
        sqlComm.Parameters.Add("@Password", SqlDbType.Text);
        sqlComm.Parameters.Add("@Email", SqlDbType.Text);
        sqlComm.Parameters.Add("@ID_Inscricao", SqlDbType.Int);

        sqlComm.Parameters["@Username"].Value = Convert.ToString(Username);
        sqlComm.Parameters["@Password"].Value = Convert.ToString(Password);
        sqlComm.Parameters["@Email"].Value = Convert.ToString(Email);
        sqlComm.Parameters["@ID_Inscricao"].Value = Convert.ToInt32(ID_Inscricao);

        string sql = "INSERT INTO Utilizadores (Username, Password, Email, ID_Inscricao) VALUES (@Username, @Password, @Email, @ID_Inscricao)";
        sqlComm.CommandText = sql;
        sqlConn.Open();
        sqlComm.ExecuteNonQuery();
        sqlConn.Close();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:24:33.160

当您尝试将某些内容插入对于该列来说太长的列时，就会发生这种情况。

例如，当您有一列`VARCHAR(10)`并尝试插入值时`"ABCDEFGHIJKLMNOP"`。这将导致数据被截断并产生错误。

我不知道在您的情况下它是哪一列，但它必须是`Username`,`Password`或`Email`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:27:53.903

问题是您尝试填充的数据库中的数据类型小于您传递的值之一。您需要检查每个参数@Username、@Password 和@Email，并查看哪个参数大于数据库数据类型。然后您可以根据需要增加数据库中数据类型的大小，或者在发送前修剪参数值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-22T09:26:29.543

```
 Dim qry As String
        qry = "inserg into Table1 values('" & TextBox1.Text & "'+'" & TextBox2.Text & "'+'" & DropDownList1.Text & "'+'" & DropDownList2.Text & "'+'" & TextBox4.Text & "'+'" & TextBox5.Text & "'+'" & RadioButtonList1.Text & "'+'" & RadioButton1.Text & "'+'" & RadioButtonList2.Text & "'+'" & CheckBoxList1.Text & "'+'" & TextBox6.Text & "'+'" & TextBox7.Text & "'+'" & TextBox8.Text & "'+'" & TextBox9.Text & "'+'" & TextBox10.Text & "'+'" & RadioButtonList3.Text & "'"
        Dim cn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Documents and Settings\MCALab\My Documents\net.mdb")
        Dim cmd As New OleDbCommand(qry, cn)
        cn.Open()
        **cmd.ExecuteNonQuery()**this line have error please any one know mean debug it.

        cn.Close() 
```

# java - 用 git 复制 svn:externals

> ID：11954408
> 
> 赞同：2
> 
> 时间：2012-08-14T14:22:43.673
> 
> 标签：java, git, svn, jakarta-ee

我最近加入了一个新团队。这个团队一直在使用 Subversion 进行源代码控制。他们让我调查将源代码移动到 Git 的可能性。

这似乎是一个微不足道的练习，直到我意识到他们有大量的 svn:externals。该项目是一个大型 Java EE 项目，由多个 Web 项目组成。团队使用 svn:externals 在各个项目之间共享一些固定资源（如 css、javascript 等）。

我的问题是双重的：

*   在我们可以考虑的一组 Java 项目中共享资源是否有更好的策略，允许我们消除 svn:externals 的必要性并使切换到 git 更简单？
*   如果不存在这样更好的策略，那么我的替代方案是什么？

这是一个相当大的代码库（很多修订和文件），所以我想利用 git 的性能。

这是他们正在使用的相关软件堆栈：

*   颠覆
*   蚀
*   Maven (2.2.1 IIRC)
*   Windows（用于开发）、AIX（用于生产）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:27:54.753

听起来像是 Git 子模块的好案例。它们应该与`svn:external`s 非常相似。

摘自 Git 书：

> 经常发生的情况是，在处理一个项目时，您需要使用其中的另一个项目。也许它是第三方开发的库，或者您正在单独开发并在多个父项目中使用。在这些场景中会出现一个常见问题：您希望能够将两个项目视为独立的，但仍然能够在另一个项目中使用其中一个。

在 Git 书上阅读更多关于 Git 子模块的信息：http: [//book.git-scm.com/5_submodules.html](http://book.git-scm.com/5_submodules.html)

# c++ - C++这个do while循环有什么问题

> ID：11954412
> 
> 赞同：0
> 
> 时间：2012-08-14T14:22:49.303
> 
> 标签：c++

我正在尝试输入一个字符串。当我输入类似`John`.

但是，如果我输入类似的内容，`John Smite`我最终会陷入无限循环和终端崩溃。

```
string fullname;

do{
    cout << "Please input the Full Name of the user: ";
    cin >> fullname;
}while(fullname==""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:25:33.407

这个空间正在扔掉cin。你应该使用getline。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:29:17.593

你可以试试这个：

```
do{
cout << "Please input the Full Name of the user: ";
cin >> fullname;
}
while(fullname.length() == 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:55:10.710

至于为什么会出现无限循环 -`operator>>`重载 for`std::string`将首先丢弃任何前导空格，然后读取到下一个空格或可用输入的末尾。

当您输入“John Smite”时，第一次迭代读取“John”，第二次迭代读取“Smite”，然后没有更多的输入用于后续迭代。`fullname`问题是您的实现在尝试读取之前似乎已经清除了。但是由于流不再处于良好状态，因此无法再进行读取，并且存在无限循环。

你可以这样做：

```
string temp;
string fullname;
do {
    cin.clear(); // clear any error flags
    do {
        if (cin >> temp) fullname += temp + ' ';
    } while (cin.good());
} while (fullname.empty()); 
```

这有一个（好的）副作用，它会折叠多个相邻的空白字符，但它仍然很笨重。

更好的方法就是说

```
do std::getline(std::cin, fullname); while (fullname.empty()); 
```

# css - gitk 时出现 CFURLCopyResourcePropertyForKey 错误

> ID：11954413
> 
> 赞同：5
> 
> 时间：2012-08-14T14:22:52.390
> 
> 标签：css, xcode, git, version-control, terminal

有人可以解释一下如何解决此错误：

**CFURLCopyResourcePropertyForKey 失败，因为它通过了这个没有方案的 URL：**

当我在终端中尝试 gitk 或 gitk --all 时，这可能是由 xCode 引起的。它在山狮升级后开始出现。谢谢 ：）

错误截图：

![在此处输入图像描述](../Images/8bd717037f827d9402c4023bfdadbbfb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:08:48.487

我刚刚收到此错误并找到解决方案。

我试图在我的项目中调用函数 getResourceValue:forKey:error: 并且我的操作系统版本是 10.7.5。

我使用 + URLWithString: 初始化了一个新的 NSURL 对象，之前出现了问题，在我用 + fileURLWithPath: 替换它之后，现在可以了。

不同功能的两个对象的差值是/Volumes/Data/a file://localhost/Volumes/Data/a/

苹果已经声明关于下面的 NSURL 类，

处理对象创建失败 如果传递的路径格式不正确，则 NSURL 类无法创建新的 NSURL 对象；路径必须符合 RFC 2396。不成功的例子是包含空格字符和高位字符的字符串。如果创建 NSURL 对象失败，创建方法返回 nil，您必须准备好处理它。如果你使用文件系统路径创建 NSURL 对象，你应该使用 fileURLWithPath: 或 initFileURLWithPath:，它们处理 URL 路径和文件系统路径之间的细微差别。如果您希望容忍格式错误的路径字符串，则需要使用 Core Foundation 框架提供的函数来清理字符串。

在 NSURL 中使用 getResourceValue:forKey 方法时出错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T14:22:22.930

在 Mountain Lion 10.8.2 上，我通过安装/升级 tcl 和 tk 从终端调用 gitk 时解决了这个问题。

酿造安装 tcl
酿造安装 tk

gitk 的 UI 可能会改变，但你可以在 ~/.gitk 中调整它。

# ruby-on-rails - 单击带有黄瓜的 facebook 连接按钮

> ID：11954414
> 
> 赞同：0
> 
> 时间：2012-08-14T14:22:59.003
> 
> 标签：ruby-on-rails, facebook, testing, cucumber

到目前为止，我们所有的测试都通过了，但是自从一周以来，我们发现我们编写的 facebook 登录测试存在一些问题，以下是我们使用 facebook 登录的步骤：

```
When /^I login to facebook$/ do
  browser = page.driver.browser
  browser.switch_to.default_content
  fill_in "email", :with => @facebook_test_user["email"]
  fill_in "pass", :with => @facebook_test_user["password"]
  click_button "Connection"
end 
```

现在这个测试通过了，因为我们都有法语的 facebook，所以按钮的文本是 Connection，但是现在使用其他语言的 Facebook 的人也在运行测试，但它失败了。以下是 facebook 按钮的布局：

```
<div id="login_button_inline">
  <label for="u2krk0_2" id="loginbutton" class="uiButton uiButtonConfirm uiButtonLarge">
    <input type="submit" id="u2krk0_2" name="login" value="Connection">
  </label>
</div> 
```

id 不断变化，因此不能使用 id，我如何在不考虑 Facebook 语言的情况下单击按钮，以便我的测试顺利通过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:03:25.077

我会说按钮的名称-“登录”将是一件好事。Capybara 的`click_button`方法只能通过 id、text 或 value 找到按钮，所以你必须自己找到它：

```
find(:css, "input[name='login']").click 
```

如果您在页面的其他地方有其他“登录”按钮，您可能需要限制范围，但如果没有，这应该适合您。

# php - Zend-Framework - 形式和翻译

> ID：11954415
> 
> 赞同：1
> 
> 时间：2012-08-14T14:23:03.997
> 
> 标签：php, zend-framework, zend-form, zend-translate

嗨，我有一个表单元素错误，当我将它包装在翻译函数中时，它一直在破坏它。我正在使用 gettext 进行翻译。

我知道如果我在注册表和 Zend_Form 中设置了它，它应该会自动拾取它，但是 poedit 是如何看到它的呢？

我的引导程序（相关部分）：

```
 // Set the instance of Zend_Translate in the registry
    $registry->set('Zend_Translate', $translate);
    // Set an instance of Zend Translate object for validators
    Zend_Form::setDefaultTranslator($translate); 
```

我的错误表格：

```
public function formErrors(Zend_Form $form)
{       
        $registry = Zend_Registry::getInstance();
        $translate = $registry->get('Zend_Translate');
        $form->setTranslator($translate);

    if ($form->getMessages()) {
        $error = '<p class="errorBox">Error text here</p>';
        $error->setTranslator($translate);
        $error->getView()->translate($error);
        return $error;
    }
    return '';
} 
```

笔记：

```
 $this->translate('string to translate'); or $this->getView()->translate('string'); 
```

在其他任何地方都可以工作，但在这里不行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:39:10.913

我在上一个项目中使用的表单中的用法是

```
$this->getTranslator()->translate('text to translate') 
```

这只是很少使用，因为我们有自动检测资源路径，所以我们不需要调用它。您想要使用它的方式似乎略有不同。我建议在 getView() 之后添加额外的调用，因为它可能是解决方案。

# asp.net - LINQ 指定的强制转换无效

> ID：11954416
> 
> 赞同：-2
> 
> 时间：2012-08-14T14:23:07.120
> 
> 标签：asp.net, linq

没有得到关于这个错误的太多信息，但我没有在这个特定的代码中使用任何转换，所以我很迷茫。

```
 var dsn = Request.ServerVariables["HTTP_HOST"].Split('.').First();
        using (var ctx = new SharedDataContext("switchcurrent"))
        {
            var dbDsn = ctx.SiteObjects.FirstOrDefault(s => s.DSN == dsn);

            if (dbDsn == null)
            {
                Session["CurrentDsn"] = "SwitchCurrent";
            }
            else
            {
                Session["CurrentDsn"] = dbDsn.DSN;
                Response.Redirect(String.Format("~/{0}", dbDsn.DefaultPage));
            }
        } 
```

LINQ 语句是我得到错误的地方。如果语句返回 null，则代码继续正常，但如果它与数据库中的对象实际匹配，我会收到此错误。

编辑（附加信息）

错误消息是 InvalidCastException 堆栈跟踪：

```
 at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo  queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries) at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)at System.Data.Linq.Table`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression)at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate) at WebApplication1.Default.SetCurrentDsn() in C:\Code\dir\Default.aspx.cs:line 163 at WebApplication1.Default.Page_Load(Object sender, EventArgs e) in C:\Code\dir\Default.aspx.cs:line 32 at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) at System.Web.UI.Control.OnLoad(EventArgs e) at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean     includeStagesAfterAsyncPoint) 
```

SiteObject.Dsn 是一个字符串。dsn也是如此。

基本上，如果它是'localhost'（不在数据库中），则代码通过，但如果它匹配（'pgande'），则会引发此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:26:48.737

如果`s.DSN`无法转换为`dsn`，您将收到此错误。您可能需要提供转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:29:28.923

尝试这个：

```
 var dbDsn = ctx.SiteObjects.FirstOrDefault(s => s.DSN.ToString() == dsn.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:58:03.493

我想你已经尝试过了，但可能你需要投 dsn，而不是 s.DSN？尝试链接“s => s.DSN == dsn.ToString()”。这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:34:54.560

我最终将表放回我的数据上下文中，一切正常。显然，第一次放入的表已经损坏。

# java - apache poi最大行数

> ID：11954418
> 
> 赞同：6
> 
> 时间：2012-08-14T14:23:15.073
> 
> 标签：java, excel, apache-poi

我想知道您可以使用 apache poi 3.8 创建的最大行数是多少，以及您可以使用 apache poi 3.0 创建的用于生成 excel 文件的最大行数是多少。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T15:23:04.047

另一个 SO 用户提供了一种[使用 POI 3.8 创建许多行](https://stackoverflow.com/questions/7274076/writing-a-large-resultset-to-an-excel-file-using-poi/11919450#11919450)的方法。最大行数也受您尝试打开文件的 Excel 版本中的最大值的限制。`int`数据类型由`getRowNum`（[参见 API](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFRow.html) ）返回，因此可以提供您的“最大值”，但超出 Excel 版本中指定的行数（2003 年约为 65k，2007 年以上为 1,048,576）将意味着数据丢失并且可能错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-08T22:17:06.470

这些限制值由 POI 提供： [https ://poi.apache.org/apidocs/org/apache/poi/ss/SpreadsheetVersion.html](https://poi.apache.org/apidocs/org/apache/poi/ss/SpreadsheetVersion.html)

具体来说：`SpreadsheetVersion.EXCEL97.getMaxRows()`和`SpreadsheetVersion.EXCEL2007.getMaxRows()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T17:48:15.223

以防万一你想抓住它，这是被抛出的异常。

```
java.lang.IllegalArgumentException: Invalid row number (65536) outside allowable range (0..65535) 
```

# php - php 变量 = 变量 1 || 变量2

> ID：11954422
> 
> 赞同：2
> 
> 时间：2012-08-14T14:23:28.820
> 
> 标签：php, variables

这可能吗？

```
php $variable = $variable1 || $variable2? 
```

如果 $variable1 为空，则使用 $variable2

是否存在类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T14:24:57.937

PHP 5.3+：

```
$variable = $variable1 ?: $variable2; 
```

PHP 5.2-：

```
$variable = $variable1 ? $variable1 : $variable2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:25:37.777

在 PHP 中，`||`运算符返回一个布尔值，它不像在 Perl 或 JavaScript 中那样是短路运算符，因此您不能使用该语法。

您可以使用[三元运算符](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。

```
$variable = $variable1 ? $variable1 : $variable2 
```

# php - 使用 MySQL/PHP 导入大量数据

> ID：11954423
> 
> 赞同：0
> 
> 时间：2012-08-14T14:23:30.627
> 
> 标签：php, mysql

我们创建了一个导入脚本，将大约 120GB 的数据导入 MySQL 数据库。数据保存在几百个目录中（都是独立的数据库）。每个目录都包含具有表结构和表数据的文件。

问题是；它可以在我的本地计算机上使用实际数据的子集，但是当在服务器上运行导入时（这需要几天时间）。并非所有表都已创建（即使是在本地测试的表）。奇怪的是，脚本在服务器上运行时在创建表时没有显示任何错误。

以下是脚本如何工作的高层次：

1.  查找代表数据库的所有目录
2.  创建所有数据库
3.  每个数据库循环遍历表：创建表，填充表

在 gist 上添加了代码：[https ://gist.github.com/3349872](https://gist.github.com/3349872)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:17:47.180

添加更多日志记录以查看成功的步骤，因为您可能遇到内存使用或执行时间问题。

为什么不从给定的 CVS 文件创建 sql 文件，然后在 bash 中正常导入？

mysql -u root -ppassword db_something< db_user.sql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:32:57.227

哎呀，问题出在代码中。惊人的愚蠢错误。

在所有文件的子集上测试代码时，所有可用的表信息和表内容。当未创建表计数时，该函数进入日志记录语句并返回。在真实数据上，这是一个错误，因为有些文件没有数据，也没有结构，所以在创建几个表之后，某个数据库的表的创建出错并返回，因此没有创建其他表。

# c# - 使用 microsoft.ace12 版本 64 位从 c# 开发的 Web 服务读取 dbf 文件

> ID：11954424
> 
> 赞同：0
> 
> 时间：2012-08-14T14:23:33.373
> 
> 标签：c#, web-services, oledb, dbf

我在 32 位机器上开发了一个 Web 服务，它`dbf`使用`oledb`.

问题是服务器是 64 位的，`oledb`被替换为`microsoft.ace12`.

尝试打开连接时出现以下错误：`could not find isam installable.`

我的连接字符串是：

```
connectionString="Provider=Microsoft.ACE.OLEDB.12.0;SourceType=DBF;SourceDB=\\NEPTUNO\SISTEMAS\SIST\TABLAS;Exclusive=No;" providerName="Microsoft.ACE.OLEDB.12.0" 
```

有任何想法吗？再见 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:29:14.873

32 位应用程序无法访问 64 位驱动程序，它们被分开是有原因的。

您需要为 64 位平台重新构建应用程序或找到 32 位等效驱动程序。

# javascript - 使用 jasmine 测试骨干关系模型

> ID：11954425
> 
> 赞同：11
> 
> 时间：2012-08-14T14:23:34.127
> 
> 标签：javascript, backbone.js, jasmine, backbone-relational

假设我有两个简单的夹具文件，一个用于用户（1），一个用于消息（2）。

消息的主干模型如下 (3)。

如果我加载“消息夹具”，我还希望获得消息模型中指定的有关用户的相关信息。
使用 jasmine 测试套件在规范视图 (4) 中激活此目标的正确方法是什么？
更多细节请参见 (4) 中的注释。

* * *

(1)

```
// User Fixture
beforeEach(function () {
    this.fixtures = _.extend(this.fixtures || {}, {
        Users: {
            valid: {
                status: 'OK',
                version: '1.0',
                response: {
                    users: [
                        {
                            id: 1,
                            name: 'olivier'
                        },
                        {
                            id: 2,
                            name: 'pierre',
                        },
                        {
                            id: 3,
                            name: 'george'
                        }
                    ]
                }
            }
        }
    });
}); 
```

* * *

(2)

```
// Message Fixture
beforeEach(function () {
    this.fixtures = _.extend(this.fixtures || {}, {
        Messages: {
            valid: {
                status: 'OK',
                version: '1.0',
                response: {
                    messages: [
                        {
                            sender_id: 1,
                            recipient_id: 2,
                            id: 1,
                            message: "Est inventore aliquam ipsa"
                        },
                        {
                            sender_id: 3,
                            recipient_id: 2,
                            id: 2,
                            message: "Et omnis quo perspiciatis qui"
                        }
                    ]
                }
            }
        }
    });
}); 
```

* * *

(3)

```
// Message model

MessageModel = Backbone.RelationalModel.extend({
    relations: [
        {
            type: Backbone.HasOne,
            key: 'recipient_user',
            keySource: 'recipient_id',
            keyDestination: 'recipient_user',
            relatedModel: UserModel
        },
        {
            type: Backbone.HasOne,
            key: 'sender_user',
            keySource: 'sender_id',
            keyDestination: 'sender_user',
            relatedModel: UserModel
        }
    ]
}); 
```

* * *

(4)

```
// Spec View

describe('MyView Spec', function () {
        describe('when fetching model from server', function () {
            beforeEach(function () {
                this.fixture = this.fixtures.Messages.valid;
                this.fixtureResponse = this.fixture.response.messages[0];
                this.server = sinon.fakeServer.create();
                this.server.respondWith(
                    'GET',
                    // some url
                    JSON.stringify(this.fixtureResponse)
                );
            });
            it('should the recipient_user be defined', function () {
                this.model.fetch();
                this.server.respond();
                // this.fixtureResponse.recipient_user is not defined 
                // as expected by the relation defined in (3)
                expect(this.fixtureResponse.recipient_user).toBeDefined();
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:04:15.783

看看这个系列教程[http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html](http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html)

这是关于[模型测试](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html)的具体部分。

不知道是否会解决您的问题，但可能包含宝贵的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:17:57.603

`this.fixtureResponse`是模型的源数据，但在实际创建模型时，它会将该数据复制到内部属性中。因此，当 Backbone Relational 解析关系时，它不应该更改源数据对象。

你试过`expect(this.model.get('recipient_user')).toBeDefined()`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:18:47.523

Backbone-Relational 提供了从通过模型的 fetch 检索到的 JSON 中的嵌套实体创建相关模型或使用[fetchRelated](http://backbonerelational.org/#RelationalModel-fetchRelated)延迟加载相关模型的能力。

您正在向 Backbone-Relational 提供消息模型数据，但无法检索用户模型数据。您可以添加另一个返回相应相关用户数据的响应，并在消息模型上调用 fetchRelated。

或者，将用户数据内联到消息响应中，用户模型将自动创建并作为关系添加到消息模型上。

# php - PHP PDO 选择并输出第一个找到的行结果

> ID：11954427
> 
> 赞同：2
> 
> 时间：2012-08-14T14:23:41.267
> 
> 标签：php, pdo, limit

在找不到正确方向的 1 个下午后，我希望有人能帮助我。

我想要的是：将数组绑定到 PDO 执行语句。因此我在 PREPARE 中使用 WHERE IN 语句。到目前为止一切顺利，我现在的问题是，数字不是唯一的。在我的数据库中有更多具有此值的行。我需要一种方法将查询限制在第一个找到的 nummer fe = 1 的行，然后转到数组的下一个值。

这是代码（我在stackoverflow上找到的；）

```
$ids     = array(1, 2, 3, 7, 8, 9);
$inQuery = implode(',', array_fill(0, count($ids), '?'));

$stmt = $objDb->prepare(
    'SELECT *
     FROM table
     WHERE nummer IN(' . $inQuery . ')'  
);

$stmt->execute($ids);

while($row = $stmt->fetch()) {  

        echo $row['name'] . "<br />";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:25:12.463

我相信你想`GROUP BY nummer`在你的`WHERE`条款之后添加。

```
$stmt = $objDb->prepare(
  'SELECT *
   FROM table
   WHERE nummer IN(' . $inQuery . ')
   GROUP BY nummer
  '  
); 
```

**编辑**

对于 Postgres 尝试：

```
$stmt = $objDb->prepare(
  'SELECT DISTINCT ON (nummer) nummer, *
   FROM table
   WHERE nummer IN(' . $inQuery . ')
  '  
); 
```

# c# - 在 C# 中通过 TCP 发送 C 结构

> ID：11954431
> 
> 赞同：4
> 
> 时间：2012-08-14T14:23:53.873
> 
> 标签：c#, c, tcp, memcpy

我正在编写一个程序来通过 TCP 与一台设备的管理接口进行交互。问题是，设备的文档是用 C 编写的，而我正在编写的程序是用 C# 编写的。我的问题是，文档指定

> 通信基于基于 C 结构的 API 缓冲区

再多的谷歌搜索似乎都无法将我指向这个 API 或我如何通过 TCP 发送原始结构。该文档似乎暗示我应该使用 memcpy 将结构复制到 TCP 缓冲区，但 C# 不直接支持 memcpy。C# 中是否有等效的方法或不同的方法来完成此操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:59:01.207

您可以构建 C 结构的 .Net 版本，然后使用编组通过网络发送字节数组。`MLocation`这是C 结构的示例。

```
[StructLayout(LayoutKind.Sequential, Pack = 8)]
public struct MLocation
{
    public int x;
    public int y;
};

public static void Main()
{
    MLocation test = new MLocation();

    // Gets size of struct in bytes
    int structureSize = Marshal.SizeOf(test);

    // Builds byte array
    byte[] byteArray = new byte[structureSize];

    IntPtr memPtr = IntPtr.Zero;

    try
    {
        // Allocate some unmanaged memory
        memPtr = Marshal.AllocHGlobal(structureSize);

        // Copy struct to unmanaged memory
        Marshal.StructureToPtr(test, memPtr, true);

        // Copies to byte array
        Marshal.Copy(memPtr, byteArray, 0, structureSize);
    }
    finally
    {
        if (memPtr != IntPtr.Zero)
        {
            Marshal.FreeHGlobal(memPtr);
        }
    }

    // Now you can send your byte array through TCP
    using (TcpClient client = new TcpClient("host", 8080))
    {
        using (NetworkStream stream = client.GetStream())
        {
            stream.Write(byteArray, 0, byteArray.Length);
        }
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:33:48.263

您将使用不安全的结构、BitConverter 或编写托管 C++ 包装器来填充 API 缓冲区。
本质上，您正在通过调用套接字而不是调用函数来执行 P/Invoke。

# java - 使用 java.swing.Box 时出现意外错误

> ID：11954433
> 
> 赞同：3
> 
> 时间：2012-08-14T14:23:56.840
> 
> 标签：java, swing, layout, boxlayout

## 细节

我对 javax.swing.Box 类有一些疑问（有关文档，请参阅[http://docs.oracle.com/javase/7/docs/api/javax/swing/Box.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/Box.html)）。我最近将我的开发环境更新为 Java 7u5，并且正在重新编译一些旧项目......但是，在处理包含 javax.swing.Box 类的项目时，我得到一个“类 Box 中的构造函数 Box 不能应用于给定类型；必需：未找到参数：int”错误。这些以前工作得很好。

## 问题

有没有人对为什么会发生这种情况有任何想法？构造函数看起来并没有改变。有什么我想念的吗？在我的一生中无法在任何地方找到记录在案的变化。请参阅下面的示例代码，它会重新创建错误。

## 示例代码

```
import java.awt.*;
import javax.swing.*;

public class BoxTest
{
    private JFrame $_frame;
    private JPanel $_panel;
    private Box $_box;
    private JButton $_button1, $_button2;

    public BoxTest()
    {
        $_frame = new JFrame("Box Test");
        $_panel = new JPanel(new BorderLayout());
        $_box = new Box(BoxLayout.Y_AXIS);
        $_button1 = new JButton("Test Button 1");
        $_button2 = new JButton("Test Button 2");
    }

    public void buildGUI()
    {
        $_box.add($_button1);
        $_box.add($_button2);

        $_panel.add(BorderLayout.EAST, $_box);

        $_frame.getContentPane().add(this.$_panel);
        $_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        $_frame.setBounds(50, 50, 300, 300);
        $_frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        BoxTest boxTest = new BoxTest();
        boxTest.buildGUI();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:32:58.437

BoxTest 包中是否有 Box 类？

# iphone - 写入 plist 文件

> ID：11954434
> 
> 赞同：1
> 
> 时间：2012-08-14T14:24:01.450
> 
> 标签：iphone, plist

我头痛了几个小时，试图将一些信息写入 plist 文件。我的 plist 如下所示：

```
<plist version="1.0">
<array>
<dict>
    <key>page</key>
    <string>page 1</string>
    <key>description</key>
    <string>description  text 1</string>
</dict>
<dict>
    <key>page</key>
    <string>page 2</string>
    <key>description</key>
    <string>description text 2</string>
</dict>
</array>
</plist> 
```

我只想在 plist 中写一个新条目，例如第 3 页描述描述文本 3

这是我使用的代码

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES); //1
NSString *documentsDirectory = [paths objectAtIndex:0]; //2
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"bookmark.plist"]; //
NSMutableDictionary *rootArray = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
[rootArray setObject:@"Jimmy1" forKey:@"page"];
    [rootArray setObject:@"Jimmy2" forKey:@"description"];
    [rootArray writeToFile:path atomically:YES]; 
```

当我运行时，我没有收到任何错误消息，只是没有写任何东西到书签.plist，你能给我一个关于如何解决这个问题的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:34:25.600

我相信你的问题是你有一个字典数组而不是根字典。所以当你初始化你的时候，你`NSMutableDictionary`实际上得到了一个数组。

我认为您需要初始化一个`NSMutableArray`，添加一个新字典作为具有您想要的对象的对象。然后将您的数组写入文件。

```
NSMutableArray *rootArray = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSDictionary *newPage = [NSDictionary dictionaryWithObjectsAndKeys: @"Page 3", @"page", @"Description text 3", @"description"];

[rootArray addObject:newPage];

[rootArray writeToFile:path atomically:YES]; 
```

没有在 Xcode 中检查过这个，但我认为这是你问题的根源。

**更新**

一定要查看**Rahul**的答案。他记得将 write 方法包装在 if 语句中。这绝对是错误处理的最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:47:50.900

你的问题是

```
NSMutableDictionary *rootArray = [[NSMutableDictionary alloc] initWithContentsOfFile:path];` //it will return you array of dict not dictionary 
```

尝试这个

```
 // get your plist file path    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES); //1
    NSString *documentsDirectory = [paths objectAtIndex:0]; //2
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"bookmark.plist"];

// get content of your plist file     
NSMutableArray *rootArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

// create new dictionary with new content
NSDictionary *newPage = [NSDictionary dictionaryWithObjectsAndKeys: @"Page 3", @"page", @"Description text 3", @"description"];

// add new dictionnay to your rootArray
[rootArray addObject:newPage];

if([rootArray writeToFile:path atomically:YES]) // it will return bool value
{
   NSLog(@"Successfully finished writing to file");
}
else
{
    NSLog(@"failed to write");
} 
```

# android - 在 API 11+ 上调用 bitmap.recycle() 有什么作用？

> ID：11954435
> 
> 赞同：7
> 
> 时间：2012-08-14T14:24:03.773
> 
> 标签：android, bitmap, android-3.0-honeycomb, heap-memory, recycle

我知道在 Android 的 API 10 之前，调用不再使用`recycle()`的s 很重要，因为实际的原始数据存储在本机内存中。`Bitmap`

但是，从 API 11 开始，`Bitmap`s 存储在堆中，所以我的问题是：

如果 API 足够大（至少 11 个），`recycle()`是否还需要调用s？`Bitmap`如果我在这样的 API 上调用它会做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T14:10:53.707

官方文档告诉`recycle()`现在是一个高级调用，所以如果你想释放你的位图，你可以写一些类似`bitmap = null`的东西，GC 会处理其他所有事情。

# c++ - 我正在尝试将 3D 模型查看器集成到我的 GUI 中，但还没有找到一个可以让我轻松完成此操作的库。有什么建议么？

> ID：11954438
> 
> 赞同：2
> 
> 时间：2012-08-14T14:24:12.593
> 
> 标签：c++, qt, user-interface, graphics, mesh

我已经尝试过使用 VTK、PCL 和 Qt（使用[QVTKWidget.h](http://old.compucell3d.org/Documentation/class_q_v_t_k_widget.html)），但是，使用 CMake 非常不方便，因为第二次我更新了我的 GUI 使用的众多库中的任何一个，我必须至少再花一天时间试图解决链接器问题。此外，很多时候，使用这些库的 3D 模型会丢失大量信息。

注意：我专注于使用 PLY，因为它在同一个文件中保存颜色和几何信息，但任何其他格式都可以

我目前正在尝试创建一个 Meshlab 插件，但是对这个库的支持很少，我还没有成功编译 Meshlab 源。

任何输入或方向将不胜感激。如果你们想知道更多，请告诉我。

如果一开始不清楚，我正在使用 Qt (C++) 创建 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:27:18.023

使用 QT OpenGL 小部件并编写一些 OpenGL 代码来显示您的模型。
PLY 纹理格式非常简单，您可以自己编写解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:28:08.057

你试过[Coin3D](https://github.com/coin3d/coin)吗？这是 OpenInventor 的免费实现，它是由 SGI 在当时作为 OpenGL 的 C++ 包装器制作的。

至于与 Qt 的集成，有一个名为[SoQt](https://github.com/coin3d/soqt)的库（在同一站点中）。他们还有一个名为[Quarter](https://github.com/coin3d/quarter)的更新库，它更像是一个 Qt 组件。

我在 Coin + SoQt + Qt 方面取得了最大的成功。

# javascript - 从 Javascript 调用 AIR 应用程序方法

> ID：11954439
> 
> 赞同：1
> 
> 时间：2012-08-14T14:24:26.137
> 
> 标签：javascript, actionscript-3, air

我有一个使用 AIR HTML 组件嵌入 HTML 页面的 Adob​​oe AIR (ActionScript) 应用程序。我想在两者之间添加通信：例如，我想从 HTML 组件中的 HTML 页面中的 Javascript 调用 AIR 应用程序中的方法等...这可能吗？

在此先感谢，乔恩。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T15:48:21.760

我愿意推荐。参考这篇文章：

[在 Web 浏览器中的 ActionScript 和 JavaScript 之间进行通信](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb1.html)

# c# - 如何检索正确的 XPath 表达式

> ID：11954447
> 
> 赞同：0
> 
> 时间：2012-08-14T14:24:52.970
> 
> 标签：c#, xml, xpath

我遇到了以下问题，让我们考虑一下这个 XML 文档：

```
<FEATURE xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <LINES xmlns="namespace1">
  <LINE>
    <AMOUNT>5000</AMOUNT>
    ......
  </LINE>
  <LINE>
    <AMOUNT>6000</AMOUNT>
  </LINE>
 </LINES>
</FEATURE> 
```

我不知道如何修改例如第一行的 AMOUNT 值。

我尝试了很多事情，如下所示：

```
var doc = XDocument.Load(doc);
var xmn = new XmlNamespaceManager(new NameTable());
xmn.AddNamespace(string.Empty, "namespace1");

var element = doc.XPathSelectElement("/FEATURE/LINES/LINE[1]", xmn); 
```

element 始终为空，我不知道为什么。我试过这个：[http](http://www.xmlplease.com/update-xml-linq) ://www.xmlplease.com/update-xml-linq删除 id 属性 XPath /products/product[1] 效果很好......

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:44:40.283

给默认的 NS 一个名字

```
xmn.AddNamespace("my", "namespace1"); 
```

像这样写xpath

```
doc.XPathSelectElement("/FEATURE/my:LINES/my:LINE[1]", xmn); 
```

为我工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:12:03.337

```
XmlNodeList nodeList = root.SelectNodes("/FEATURE/LINES/LINE"); // selecting the first LINE node
foreach(XmlNode node in nodeList) 
{
   if(node.Name == "AMOUNT")
   {
      string anyValue = "7000"
      node.InnerText = value;
   }
} 
```

# django - ssh：连接到主机 heroku.com 端口 22：没有到主机的路由

> ID：11954457
> 
> 赞同：0
> 
> 时间：2012-08-14T14:25:23.320
> 
> 标签：django, heroku

嗨，我试图连接到多个 heroku 帐户时，我做了很多导致此错误的事情。“ssh：连接到主机 heroku.com 端口 22：没有路由到主机”我不知道问题是什么或如何解决它，所以我想在我的机器上使用 heroku 和 ssh 密钥重新开始。如何删除当前配置并重新开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:32:48.180

我会尝试做的几件事：

1.  确保您的 HOSTS (/etc/hosts) 文件中没有导致混淆的古怪设置
2.  检查您的 ~/.ssh 目录并确保您希望在那里的密钥......在那里。
3.  检查您的 ~/.ssh/config 文件是否有任何不正确的信息
4.  确保您的 heroku SSH 服务器实际上正在侦听端口 22。出于安全目的，很多人会更改默认 SSH 端口。
5.  确保您尝试使用的私钥已上传到 heroku 服务器。出于安全目的，某些 SSH 实例不会告诉您它是无效密钥。相反，它只会给你你提到的拒绝信息。

如果我想到任何其他诊断，我一定会更新。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:27:48.997

也许在您的 $HOME/.ssh/config 文件中设置了一些奇怪的东西。您可以尝试备份此文件，然后将其删除以查看它是否可以解决您的问题。

# java - 无法在春季自动装配字段。为什么？

> ID：11954461
> 
> 赞同：27
> 
> 时间：2012-08-14T14:25:30.653
> 
> 标签：java, exception, spring-mvc

我不断收到此错误，不知道为什么.. 是的，我知道很多人有类似的问题，但是阅读他们得到的答案并不能解决我的问题。

> org.springframework.beans.factory.BeanCreationException：创建名为“contactController”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 net.service.ContactService net.controller.ContactController.contactService；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [net.service.ContactService] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

**这是控制器：**

```
@Controller
@SessionAttributes
public class ContactController {

    @Autowired
    private ContactService contactService;
//methods...

} 
```

**ContactServiceImpl**

```
@Service("contactService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class ContactServiceImpl implements ContactService {

    @Autowired
    private ContactDao contactDao;

    public ContactServiceImpl() {
    }

    @Override
    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public void addContact(Contact contact) {
        contactDao.saveContact(contact);
    }

    @Override
    public List<Contact> getContacts() {
        return contactDao.getAllContacts();
    }

} 
```

**ContactDaoImpl**

```
@Repository("contactDao")
public class ContactDaoImpl implements ContactDao {

    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public void saveContact(Contact contact) {
        sessionFactory.getCurrentSession().saveOrUpdate(contact);
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<Contact> getAllContacts() {
        return (List<Contact>) sessionFactory.getCurrentSession().createQuery("from contact c").list();
    }

} 
```

**和 spring-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="net.controller" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.form.Contact</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-14T14:35:05.143

在 spring servlet .xml 中：

```
<context:component-scan base-package="net.controller" /> 
```

（我假设服务实现与服务接口“net.service”在同一个包中）

我认为您必须将包 net.service（或全部网络）添加到组件扫描中。目前 spring 仅在 net.controller 中搜索组件，并且由于您的服务 impl 在 net.service 中，因此 spring 不会实例化它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-09T18:11:18.477

我遇到了同样的错误并搜索它导致我来到这里。我的修复似乎只是将@Component 注释添加到抽象服务的实现中。

在这种情况下，它看起来像：

```
import org.springframework.stereotype.Component;

...

@Component
public class ContactServiceImpl implements ContactService { 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-14T14:33:28.507

`ContactServiceImpl`好吧， bean的创建存在问题。首先，通过在 Spring 上下文启动和创建实例时调试无参数构造函数来确保该类实际实例化`ContactController`。

如果`ContactServiceImpl`实际上是由 Spring 上下文实例化的，但它与您的`@Autowire`注解根本不匹配，请尝试在注解注入中更加明确。这是一个与您处理类似问题并提供一些可能解决方案的人：

[http://blogs.sourceallies.com/2011/08/spring-injection-with-resource-and-autowired/](http://blogs.sourceallies.com/2011/08/spring-injection-with-resource-and-autowired/)

如果你问我，我想如果你更换你会没事的

```
@Autowired
private ContactService contactService; 
```

和：

```
@Resource
@Qualifier("contactService")
private ContactService contactService; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-27T19:05:13.720

当您收到此错误时，缺少一些注释。我在服务上缺少@service 注释。当我添加该注释时，它对我来说效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T13:39:47.233

我今天也遇到了同样的问题。原来是我忘记为我的服务实现文件提及@Service/@Component 注释，spring 无法自动装配并且无法创建 bean。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-30T13:32:45.997

我有完全相同的问题尝试将两个类放在同一个包中并在 pom.xml 中添加行

```
<dependency> 
            <groupId> org.springframework.boot </groupId> 
            <artifactId> spring-boot-starter-web </artifactId> 
            <version> 1.2.0.RELEASE </version> 
</dependency> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-13T13:08:00.413

在 java config 中，确保您已像 @Import(PersistenceJPAConfig.class) 一样在 RootConfig 中导入您的配置

# jquery - 内部链接破坏网站结构

> ID：11954467
> 
> 赞同：0
> 
> 时间：2012-08-14T14:25:47.930
> 
> 标签：jquery, html, css

我正在开发一个网站（在 Wordpress 中），该网站在内容和页脚之间有页眉，然后绝对定位为您所期望的显示。这完美无瑕，直到我尝试使用评论内部链接。

如果您单击内部评论链接，它会向上移动内容区域（通过/在标题下方），而不是将屏幕向下移动到评论所在的位置。您可以在此处查看它的运行情况：http: [//peterbooker.com/blog/](http://peterbooker.com/blog/) 单击“1 条评论”。从博客页面或特定的帖子页面。

我找不到使用 CSS 来防止这种情况的方法，但是有没有一种方法可以使用 JavaScript 和/或其他任何方法来防止这种情况发生？

我真的很想让这个工作，我将不胜感激任何帮助/建议/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:50:45.700

好的，你的 CSS 真的很奇怪，但你可以解决这个问题：

*   移除溢出：隐藏；从 main 并使用 div 在辅助 div 之后清除浮动。
*   移除整个 padding-bottom: 5000px; 边距底部：-5000px；从中学...这没有任何意义。

然后你就可以把它弄好。但是隐藏的溢出导致您的问题在这里。

# android - java.lang.NullPointerExeption 错误？

> ID：11954469
> 
> 赞同：0
> 
> 时间：2012-08-14T14:25:57.267
> 
> 标签：android, nullpointerexception

这是我的报废算法：

```
private StringBuilder inputStreamToString(InputStream is) {
         String line = "";
         StringBuilder total = new StringBuilder();
         // Wrap a BufferedReader around the InputStream

         BufferedReader rd = new BufferedReader(new InputStreamReader(is));
         // Read response until the end

        try{
          while ((line = rd.readLine()) != null) 
              {
                    source = source + line;
              }

          st = new StringTokenizer(line, "><");
          marker = st.nextToken();

          while(st.hasMoreTokens())
          {

                nameLoop:
                if(marker.equals("Name:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Name = marker;
                                    marker = st.nextToken();
                                }
                                break nameLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                addressLoop:
                if(marker.equals("Address:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Address = marker;
                                    marker = st.nextToken();
                                }
                                break addressLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                sexLoop:
                if(marker.equals("Sex:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Sex = marker;
                                    marker = st.nextToken();
                                }
                                break sexLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                birthLoop:
                if(marker.equals("Birthdate:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Birthdate = marker;
                                    marker = st.nextToken();
                                }
                                break birthLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                bplaceLoop:
                if(marker.equals("Birth Place:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Birthplace = marker;
                                    marker = st.nextToken();
                                }
                                break bplaceLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                citizenLoop:
                if(marker.equals("Citizen:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Citizen = marker;
                                    marker = st.nextToken();
                                }
                                break citizenLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                parentLoop:
                if(marker.equals("Parent:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Parent = marker;
                                    marker = st.nextToken();
                                }
                                break parentLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                telLoop:
                if(marker.equals("Tel No.:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    TelNo = marker;
                                    marker = st.nextToken();
                                }
                                break telLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                idLoop:
                if(marker.equals("ID #: "))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    IDNo = marker;
                                    marker = st.nextToken();
                                }
                                break idLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                courseLoop:
                if(marker.equals("Course:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Course = marker;
                                    marker = st.nextToken();
                                }
                                break courseLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                majorLoop:
                if(marker.equals("Major:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Major = marker;
                                    marker = st.nextToken();
                                }
                                break majorLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                yearLoop:
                if(marker.equals("Year:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Year = marker;
                                    marker = st.nextToken();
                                }
                                break yearLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                sectionLoop:
                if(marker.equals("Section:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    Section = marker;
                                    marker = st.nextToken();
                                }
                                break sectionLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                schoolLoop:
                if(marker.equals("High School:"))
                {
                    while(st.hasMoreTokens())
                        {   
                            if(marker.equals("strong"))
                            {
                                marker = st.nextToken();
                                while(!(marker.equals("/strong")))
                                {
                                    School = marker;
                                    marker = st.nextToken();
                                }
                                break schoolLoop;
                            }

                            marker = st.nextToken();
                        }
                }

                else
                    marker = st.nextToken();
          }
        }

            catch (IOException e) {
                e.printStackTrace();
            }

         return total;

     } 
```

我打算在 webview 中显示图像。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://students.usls.edu.ph/login.cfm"); 
```

该程序将首先通过登录连接到一个网站。它将用户名和密码edittext的内容传递给该网站并登录。然后它将检索图片的 url 并将其显示在下一个面板中。它还将从网站上抓取所需的信息，例如姓名、地址等。

```
private class URLConnect extends AsyncTask<String, Void, Void> {
         private final ProgressDialog dialog = new ProgressDialog(Login.this);

         // can use UI thread here
         protected void onPreExecute() {
            this.dialog.setMessage("Logging in...");
            this.dialog.show();

         }

         // automatically done on worker thread (separate from UI thread)
         protected Void doInBackground(final String... args) {

            try {

                String username = txtUname.getText().toString();
                String password = txtPass.getText().toString();

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("username",username));
                nameValuePairs.add(new BasicNameValuePair("password",password));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                HttpResponse response = httpclient.execute(httppost);

                str = inputStreamToString(response.getEntity().getContent()).toString();

            }

            catch (ClientProtocolException e) {
                e.printStackTrace();
               } catch (IOException e) {
                e.printStackTrace();
               }

            return null;
         }

         protected void onPostExecute(Void result) {

                    result.setText(str);

        results = (String) result.getText();
                Intent intent = new Intent(Login.this,Main_screen.class);
                intent.putExtra("result", results);
                pic = "http://teachers.usls.edu.ph/student_pics/" + txtUname.getText() + ".jpg";
                intent.putExtra("pic",pic);

                startActivity(intent);
         }
     } 
```

通过按下一个称为登录的按钮。它将执行此代码。

```
public void login (View view)
{
    new URLConnect().execute();
} 
```

第二个面板中的代码是这样的：

```
public class Main_screen extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    TextView result = (TextView)findViewById(R.id.txtresult);
    String stdName;

    result.setText(""+getIntent().getExtras().getString("result"));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:31:28.650

您不能在非 UI 线程中更改 UI。该`doInBackground()`方法在非 UI 工作线程中调用。

和在 UI 线程`onPreExecute()`上`onPostExecute()`调用，因此您可以使用它们来更改 UI。

我建议你这样做：

```
private class URLConnect extends AsyncTask<String, Void, String> {
     private final ProgressDialog dialog = new ProgressDialog(Login.this);

     // can use UI thread here
     protected void onPreExecute() {
        this.dialog.setMessage("Logging in...");
        this.dialog.show();

     }

     // automatically done on worker thread (separate from UI thread)
     protected String doInBackground(final String... args) {

        try {

            String username = txtUname.getText().toString();
            String password = txtPass.getText().toString();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username",username));
            nameValuePairs.add(new BasicNameValuePair("password",password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent()).toString();

            results = (String) result.getText();

            return str; //Here you return the string you want to set

        }

        catch (ClientProtocolException e) {
            e.printStackTrace();
           } catch (IOException e) {
            e.printStackTrace();
           }

        return null;
     }

     protected void onPostExecute(String resultString) {

            result.setText(resultString); //Here you change the text on the TextView;
            Intent intent = new Intent(Login.this,Main_screen.class);
            intent.putExtra("result", results);
            pic = "http://teachers.usls.edu.ph/student_pics/" + txtUname.getText() + ".jpg";
            intent.putExtra("pic",pic);

            startActivity(intent);
     }
 } 
```

我的更改已完成，您可以复制粘贴它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:32:36.837

您不能在 doInBackground 中发出与 UI 相关的任务。所有对 UI 组件“结果”的访问都需要在 onPostExecute() 中完成。

# perl - 如何在不逐行读取的情况下从文本文件中提取 DNA 序列？

> ID：11954480
> 
> 赞同：-3
> 
> 时间：2012-08-14T14:26:21.907
> 
> 标签：perl, file, input, dna-sequence

我正在尝试从文本文件中提取 DNA 序列并将其存储。我可以使用下面的代码来做到这一点，但这不是最好的方法，因为我正在逐行读取文本文件。我想知道是否有一种更简单的方法可以在我的文本文件中找到每个 DNA 序列，而无需逐行读取文本文件。

例子.pl

```
#!/usr/local/bin/perl
open(MYFILE, 'data.txt');
@entire_file = <MYFILE>;
while (<MYFILE>) {
    chomp;
    print "$_\n";
}

$line1 = <MYFILE>;
chomp $line1;
$line2 = <MYFILE>;
chomp $line2;
$line3 = <MYFILE>;
chomp $line3;
$line4 = <MYFILE>;
chomp $line4;
$line5 = <MYFILE>;
chomp $line5;

#Prints DNA sequence 1
print "$line2";

#Prints DNA sequence 2
print "$line5";

close(MYFILE); 
```

数据.txt

> gi|171361, 酿酒酵母, (CYS3) 基因, 实验室 1, Joe Bloggs GCAGCGATCGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC
> 
> gi|171362, 酿酒酵母, (CYS4) 基因, 实验室 2, Paul McDonald GAAGCGCACGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:46:46.657

这是一个使用[BioPerl](http://search.cpan.org/~cjfields/BioPerl-1.6.901/BioPerl.pm)模块 Bio::SeqIO 的示例；

```
#!/usr/bin/perl
use strict;
use warnings;
use Bio::SeqIO;

my $in  = Bio::SeqIO->new( -file   => "junk.txt" ,
                           -format => 'FASTA');

while ( my $seq = $in->next_seq() ) {
    printf "id: %s\ndescr: %s\nseq: %s\n\n", $seq->id, $seq->desc, $seq->seq;
}

__END__
Contents of junk.txt

>gi|171361, Saccharomyces cerevisiae, (CYS3) gene, Lab 1, Joe Bloggs
GCAGCGATCGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCG
CTTGCGAAAGCATCGAGTACC
>gi|171362, Saccharomyces cerevisiae, (CYS4) gene, Lab 2, Paul McDonald
GAAGCGCACGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCG
CTTGCGAAAGCATCGAGTACC 
```

而且，这是运行 ptogram 的结果。

```
C:\Old_Data\perlp>perl t5.pl
id: gi|171361,
descr: Saccharomyces cerevisiae, (CYS3) gene, Lab 1, Joe Bloggs
seq: GCAGCGATCGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC

id: gi|171362,
descr: Saccharomyces cerevisiae, (CYS4) gene, Lab 2, Paul McDonald
seq: GAAGCGCACGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:20:32.367

后

```
@entire_file = <MYFILE>; 
```

您已将整个文件保存在数组中`@entire_file`。之后您使用 readline 运算符 ( `<..>`) 所做的所有其他操作都将不起作用，因为该文件已被完整读取。

您可以遍历数组中的元素并对它们做任何您想做的事情，例如，

```
foreach my $line (@entire_file) {
  if ($line =~ /^gi/) { print "Descriptor: $line" }
  else { print "Sequence: $line" }
} 
```

我建议您阅读阅读文件、模式匹配和一般循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:10:20.713

如果您将文件的所有行都放在一个数组中，则可以迭代该数组以使用正则表达式获取 id/descriptor 和序列元素：

```
use Modern::Perl;
use Data::Dumper;

my ( @id, @des, @dna );
chomp( my @FASTA = <DATA> );

for ( my $i = 0 ; $i < @FASTA ; $i += 3 ) {
    my ( $id, $des ) = split ', ', $FASTA[$i], 2;
    push @id,  $id;
    push @des, $des;
    push @dna, $FASTA[ $i + 1 ];
}

say Dumper \@id, \@des, \@dna;

say @FASTA + 0;

__DATA__
>gi|171361, Saccharomyces cerevisiae, (CYS3) gene, Lab 1, Joe Bloggs
GCAGCGATCGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC

>gi|171362, Saccharomyces cerevisiae, (CYS4) gene, Lab 2, Paul McDonald
GAAGCGCACGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC 
```

输出：

```
$VAR1 = [
          '>gi|171361',
          '>gi|171362'
        ];
$VAR2 = [
          'Saccharomyces cerevisiae, (CYS3) gene, Lab 1, Joe Bloggs',
          'Saccharomyces cerevisiae, (CYS4) gene, Lab 2, Paul McDonald'
        ];
$VAR3 = [
          'GCAGCGATCGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC',
          'GAAGCGCACGACAGCTGTGCTATCCCGGCGAGCCCGTGGCAGAGGACCTCGCTTGCGAAAGCATCGAGTACC'
        ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T22:30:44.667

如果您只想要命令行中的序列，则此单行程序会执行此操作：

```
perl -lane 'print $F[-1] if @F' data.txt 
```

详情请参阅`perlrun(1)`。

使用类似的解决方案`awk`：

```
awk 'NF { print $NF }' data.txt 
```

# video - 如何使用笔记本电脑配置/设置真正的视频墙

> ID：11954490
> 
> 赞同：1
> 
> 时间：2012-08-14T14:26:45.307
> 
> 标签：video, gstreamer, distributed-computing

这个想法是获得一个笔记本电脑网格，例如 5 x 5，并同时在所有笔记本电脑上播放分布式低分辨率视频。每台笔记本电脑将充当一个像素，当笔记本电脑排列成网格时，人们可以在一起查看所有笔记本电脑时看到视频。

如果我能以某种方式在一台计算机上渲染这个低分辨率视频并通过指定它们在网格中的位置等方式将其分发到这些笔记本电脑上，那将是不可思议的......

到目前为止，我已经研究过[一起使用](http://www.linux-1u.net/X11/Quad/gstreamer.net/video-wall-howto.html)[gstreamer](http://gstreamer.freedesktop.org/)和[xinerama](http://tldp.org/HOWTO/Xinerama-HOWTO/intro.html) 来完成这样的事情，但我不确定是否有更好的方法来做到这一点。

是否有一个项目可以为我做到这一点？我怎么能自己实现这个，因为它应该更简单一点，因为我只希望每台笔记本电脑都是一个像素？有没有一种方法可以在没有 25 台笔记本电脑的情况下测试此设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:56:26.200

你有整个视频还是预先分割的？如果视频是完整的，您不介意在每台机器上解码视频，您只需这样做并使用 videobox 裁剪区域。您可以设置一个 gstnetclock 将它们全部同步到同一个时钟。如果视频是预分割的，您只需播放它们并再次使用 gstnetclock。检查源代码库中的 gstnetclock 示例。

# c++ - 为什么第二个变量作为引用和 const 传递

> ID：11954493
> 
> 赞同：7
> 
> 时间：2012-08-14T14:26:57.150
> 
> 标签：c++

为什么不`first`作为参考和常量传递？

```
template <typename Iterator>
    int distance(Iterator first, const Iterator & last) {
    int count;
    for ( ; first != last; first++)
        count++;
    return count;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T14:28:21.123

不可能是`const`因为它在函数内部递增，并且它不是通过引用传递的，因为它可能对调用者没有意义。

此外，如果它是非常量引用，则不可能使用临时引用。例如，您将无法这样做：

```
std::vector<int> v{ 1, 2, 3, 4 };
auto distance = std::distance(v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T14:29:22.060

因为是在函数内部改的，所以不能是const。但是，你不希望它的状态（它的值）在函数之外改变，所以它是按值传递的（不是引用）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T14:39:03.783

一个更好的问题是为什么第二个参数是通过 const 引用传递的，因为标准中定义的签名是：

```
template <typename Iterator>
typename iterator_traits<InputIterator>::difference_type
distance(InputIterator first, InputIterator last); 
```

也就是说，两者都是按价值计算的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:29:40.873

因为如果我们不想修改调用者的值，我们无论如何都需要创建一个副本。

# python - 在 Mountain Lion 上安装 Pygame 时出错

> ID：11954497
> 
> 赞同：10
> 
> 时间：2012-08-14T14:26:59.857
> 
> 标签：python, macos, pygame, osx-mountain-lion

我一直在尝试让 Pygame 在 Mac OS X Mountain Lion 上运行，但在安装时遇到了问题。我已经使用自制软件安装了以下软件包：

*   sdl
*   sdl_image
*   sdl_mixer
*   sdl_ttf
*   smpeg

并且在尝试编译 Pygame（使用 Xcode 4.4 提供的最新 Mac OS X 命令行工具）时，我收到一条错误消息，说明如下：

> src/scale_mmx64.c:499:27：错误：无效指令助记符“movsxl”

我不知道如何解决这个问题。Pygame 在 Mac OS X Lion 上运行良好，这似乎是由于升级到最新版本的 Xcode（已从系统中删除 GCC）或升级到 Mountain Lion 本身造成的。我怀疑升级到 Xcode 是负责任的，但我不确定。

有没有人有任何解决这个问题的建议？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T14:58:01.910

我在同一件事上把头撞在墙上。我仍然很恼火，我正在考虑在我的 MacBook Air 上安装 Linux，但我们会看到的。

在对此处列出的源进行修改后，我从源构建它： [https ://bitbucket.org/pygame/pygame/changeset/e296ada67fad](https://bitbucket.org/pygame/pygame/changeset/e296ada67fad)

基本上，在 src/scale_mmx64.c 中，您需要将两次出现的 'movsxl' 替换为 'movslq'

如果您使用的是自制软件，请确保将 root 设置为首先引用您的自制软件库等。当我有机会再次处理它时，现在仍在修复它。（没有使用 SDL_image 并在加载 PNG 时窒息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:16:07.103

也许这不会帮助你解决你的问题。但是看到很多人可能会发现这篇文章，因为他们无法在 Mountain Lion 上安装 pygame，我将在此处发布解决方案：

首先不知道为什么Apple的Python 2.7.2版本没有在/Library/Frameworks目录下安装Python.framework bundle。为了解决这个问题，您必须安装[python.org上提供的 2.7.3 版本](http://python.org/download/)

然后你可以在你的硬盘上重新安装 pygame。我使用的版本是[pygame-1.9.1-for-32bit-python2.7](http://pygame.org/download.shtml)

现在你准备好了。重新打开终端并输入 python。您应该会看到 python 解释器和最高版本 2.7.3

由于 32 位 pygame 的限制，我必须像这样运行我的程序：

```
arch -i386 python main.py 
```

希望这对其他人有所帮助。

# java - 如何在检票口中使用 post 方法

> ID：11954498
> 
> 赞同：0
> 
> 时间：2012-08-14T14:27:05.217
> 
> 标签：java, wicket

当我想在我的页面中重定向到其他页面时，我使用此方法异常：

```
 throw new RedirectToUrlException("/login/j_security_check?j_username=" + username + "&j_password=" + pass); 
```

问题是这些信息在浏览器中可见。我如何发送这个并使用 POST 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:37:02.993

对于大多数浏览器来说，POST 重定向是一个有点深奥的边缘案例。Wicket 的 RedirectRequestHandler 目前仅支持 HTTP 代码 301 和 302。POST 重定向需要 307，这也会向用户显示警告。

也就是说，您尝试做的事情本质上是不安全的。永远不要*将*密码发送回客户端。

长话短说：Wicket 不支持这一点，你也不应该这样做。

# facebook - 认证脸书应用程序

> ID：11954506
> 
> 赞同：-2
> 
> 时间：2012-08-14T14:27:23.700
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-authentication

我开发了一个 facebook 应用程序，用户可以在其中上传视频和音频。现在我希望没有身份验证的用户将无法使用该应用程序。

为什么我想要这个是因为我需要用户个人资料图片，`current loggedin user profile picture`. 这样我就可以在认证后欢迎他。

搜索了几个小时后，我无法为自己找到答案，所以在这里发布。

我已阅读完整的文档

[https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)

但无法理解。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:03:40.310

如果您正在寻找画布应用程序的身份验证，请阅读[此文档](https://developers.facebook.com/docs/authentication/canvas/)。

如果您想使用服务器端身份验证，请从[github](https://github.com/facebook/facebook-php-sdk/tree/master/src)下载官方 php SDK 。存储库包含[示例应用程序](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)。我推荐这种身份验证方式，因为它是最简单的。[SDK文档](https://developers.facebook.com/docs/reference/php/)。

并且存在客户端的认证方式。[JS SDK](https://developers.facebook.com/docs/reference/javascript/)和[示例应用程序](http://developers.facebook.com/docs/authentication/client-side/)的文档。

# gwt - GWT：具有 db 变量的属性文件的安全位置

> ID：11954509
> 
> 赞同：1
> 
> 时间：2012-08-14T14:27:33.443
> 
> 标签：gwt, properties, server-side

我的 GWT 应用程序中有一个文件***variables.properties***在***war 文件夹***内。该文件包含一个 jdbc 字符串、用户名和密码，因此我不希望以任何方式在客户端看到它。

**我的问题**：*variables.properties*是否在运行时以某种方式集成到客户端代码中，当放置在*war 文件夹*中时，或者将其放置在那里是否安全？

如果不是，我应该把它放在哪里？我用这段代码阅读了文件：

```
variables = new Properties();
BufferedInputStream stream = new BufferedInputStream(new FileInputStream("variables.properties"));
variables.load(stream);
stream.close(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:12:32.870

如果您不希望这些属性对 GWT 客户端代码（或浏览的 Web 浏览器）可见，您可以从类路径中加载它们。这样他们最终会出现在`WEB-INF/classes`不可见的地方。如果您使用的是 Maven，您可以将属性文件存储在`src/main/resources`. 否则，您可以将它们存储在 Java 源文件旁边，并确保它们在构建过程中被复制。您可以使用以下方法从类路径加载它们：[http](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String) ://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream(java.lang.String )

# css - CSS：多行链接背景的两侧填充？

> ID：11954517
> 
> 赞同：7
> 
> 时间：2012-08-14T14:27:58.937
> 
> 标签：css, hyperlink, background-color, multiline

我正在尝试构建如下所示的链接：

![在此处输入图像描述](../Images/b9483c08c11b0ea07339f7fc33db5b75.png)

这是我发现的最接近的另一个帖子 - [http://jsbin.com/ahoyug/1/edit](http://jsbin.com/ahoyug/1/edit)

但是由于使用border-left，行高之间的间隙被填充了。如此处所示：

![在此处输入图像描述](../Images/7c6c4826bb7fd07fe11b39a6057c2553.png)

这可以使用 CSS 实现还是需要 JS 解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:37:12.317

这是你想要的吗？

### 演示

[JSFiddle](http://jsfiddle.net/Sd4UR/)

### HTML

```
<div>
<span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.</span>
</div>​ 
```

### CSS

```
div {
    padding: 40px;
    background-color: #C9D77D;
    font-family: Helvetica, sans-serif;
    font-weight: bold;
    font-size: 20px;
}

span {
    padding: 6px 0;
    background-color: white;
    line-height: 2.2;
    box-shadow: -10px 0px 0 #FFF, 10px 0px 0 #FFF;
} 
```

编辑：我`box-shadow`从@Jaik 的回答中添加了该属性，因为它非常棒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:44:06.703

它当然可以`box-shadow`很容易地用 CSS3 完成。我在这里放了一个 JS Bin 示例：http: [//jsbin.com/ahoyug/12/edit](http://jsbin.com/ahoyug/12/edit)

您需要整理供应商前缀和旧的 IE 后备以进行生产。

# coldfusion - 获取服务器的 IP 地址

> ID：11954521
> 
> 赞同：1
> 
> 时间：2012-08-14T14:28:11.393
> 
> 标签：coldfusion

情况就是这样，我们有一个由第三方供应商托管和更新的网站。我正在提供指向托管在我们服务器上的其他资源的链接。客户将访问供应商网站并单击链接以访问我们的其他资源。为了验证请求是否来自我们的第三方供应商，我需要获取供应商服务器的 IP 地址。

我的问题是，有没有办法使用 ColdFusion 获取供应商服务器的 IP 地址？我不能使用客户端 IP 地址，我需要客户端使用的供应商服务器地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:26:24.540

您必须与第 3 方合作才能实现这一目标，这是肯定的。

我可以在这里看到至少两种或多或少的工作方法。

(1) 将某种保护令牌附加到链接。您的供应商会生成加密字符串或散列，其中包括一些只有你们两个知道的信息，因此您可以解密（或生成相同的散列）并验证它。

哈希示例：

```
moment = DateConvert("local2utc", Now());
token = Hash("SecretSaultYouBothKnow" & DateFormat(moment, "yyyy-mm-dd") & TimeFormat(moment, "-HH-mm")); 
```

此令牌通过链接传递并快速过期以防止共享/泄漏。

您可以自己生成和验证它。

这是一个原始的想法，验证可能会出现问题，另外还要避免客户端的无效链接（也可以跳过“mm”掩码）。

加密/解密的字符串将类似地工作。你们俩现在只需要密钥。

顺便说一句，您的供应商可以加密他们的服务器 IP 地址或其他标识符，以便您根据您的数据库检查它，并可能应用一些其他操作。

(2) 您的供应商可以为您设置简单的网络服务来验证传入的链接（它可以以 0/1 或其他简单的方式响应）。

确切的实现可能会有所不同。同样，它可能是 URL 中的某个令牌，您将其发回以进行验证。

这类似于 Jason 建议的解决方案：供应商可以在单击链接时将服务器到服务器的请求发送到您的服务器，然后重新定位到资源。但这可能很复杂，因为您必须确保在客户端到达时已经处理了第一个请求。

希望这些想法有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:43:16.047

不，没有。如果请求直接来自客户端，则不会。如果供应商首先发送某种消息，您可以使用它来验证。或者，如果供应商的服务器是代表客户端发出请求的服务器，那么您可以使用 CGI.REMOTE_ADDR。但是，如果供应商只是提供指向您网站的链接，那么不，您无法确定供应商服务器的 IP。

正如 Jeremy 上面所说，您最接近的方法是检查 HTTP_REFERER，但这很容易被欺骗（很容易），所以它不是很安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:45:53.130

要访问 ColdFusion 可用的 CGI 变量，您可以执行以下操作：

```
<cfset ThisIP = CGI.SERVER_NAME> 
```

这里有许多有用的 CGI 变量：

```
http://www.perlfect.com/articles/cgi_env.shtml 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T15:07:16.443

尝试在您的服务器上放置一个使用 cfhttp 标签获取的页面： [http ://www.dslreports.com/whois](http://www.dslreports.com/whois)

这将为您提供 Web 服务器的 IP 地址。

# android - 如何插入 SlidingDrawer 横向？

> ID：11954522
> 
> 赞同：1
> 
> 时间：2012-08-14T14:28:12.840
> 
> 标签：android, android-layout, android-widget

我想在我的布局中包含一个 SlidingDrawer，但我会将它横向放置在我的布局中。所以开口是从左到右而不是从底部向上。怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:41:12.637

[此链接](https://stackoverflow.com/questions/3793194/android-making-sliding-drawer-to-slide-from-left-to-right)可能会帮助您创建水平滑动抽屉。如果您正在使用 LinearLayout，请通过将其方向设置为水平来检查一次

# hibernate - 使 JPA / Hibernate 实体不可变 / 线程安全的首选方法

> ID：11954524
> 
> 赞同：2
> 
> 时间：2012-08-14T14:28:16.990
> 
> 标签：hibernate, jpa, thread-safety, entity, immutability

我有一个有点标准化的数据库，其中实体对象由其他实体组成，我将在会话和应用程序范围内单独发布根实体，并在 Java Web 应用程序的集合中发布。我想知道将根 Entity 对象转换为线程安全且能够在 Web 应用程序环境中发布的不可变对象的最佳方法是什么。我找到的方法是：

1) 使用构建器将实体转换为 DAO 中的不可变对象。这似乎是最编程的，即必须遍历整个实体来设置不可变对象，但对于多线程环境来说，这似乎也是最安全的。

2）使用工厂/构建器将实体转换为由 get 方法组成的只读接口，在此问题上对此进行[了](https://stackoverflow.com/questions/4560167/possible-to-have-immutable-jpa-entities)描述。这看起来很酷，但我从未在实践中尝试过，而且它似乎不是完全线程安全的，因为字段不是最终的，并且对象在某种程度上是可变的，只是不是任何使用 read- 的应用程序唯一版本。

3) 使用特定于供应商的东西，例如 Hibernate 的 @Immutable 注释。起初这听起来不错，但在确保没有集合返回不可变值之后，它开始看起来像上面的选项 1，我只是通过迭代所有值并将它们转换为原始实体的不可变副本构建一个不可变的版本。此外，我找不到任何在 Web 应用程序中使用和发布 @Immutable 实体的示例。有没有人有这方面的经验，它是线程安全的吗？

实体关系示例（不完整且无功能，只是为了显示嵌套质量）：

```
class A {
    @Id
    private long id;

    @OneToOne
    @JoinColumn
    private B b;
}

class B {

    @Id
    private long id

    private String something;

    @OneToMany
    @JoinTable
    private List<C> cs;
}

class C {
    @Id
    private long id;

    @Column
    private String name;

    @Column
    private String otherName;
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:36:04.133

对于我的意见选项：

创建私有默认构造函数（hibernate需要的默认构造函数）。为所有字段创建完整的构造函数并将它们定义为私有。

# c - dlopen malloc 死锁

> ID：11954527
> 
> 赞同：5
> 
> 时间：2012-08-14T14:28:28.863
> 
> 标签：c, malloc, deadlock, dlopen

我们有一些经常死锁的单元测试。使用 GDB 进行更仔细的检查会发现以下内容：

**线程 1：**

```
(gdb) BT
#0 0x00110424 in __kernel_vsyscall()
#1 0x00c681a3 in __lll_lock_wait_private () from /lib/libc.so.6
#2 0x00bf09fb in _L_lock_515 () from /lib/libc.so.6
#3 0x00bf068c 来自 /lib/libc.so.6 的 tr_malochook ()
#4 0x00bece22 in calloc() from /lib/libc.so.6
#5 0x00b5ed93 in _dl_new_object () from /lib/ld-linux.so.2
#6 0x00b5b287 in _dl_map_object_from_fd () from /lib/ld-linux.so.2
#7 0x00b5c521 in _dl_map_object () from /lib/ld-linux.so.2
#8 0x00b66f43 in dl_open_worker () from /lib/ld-linux.so.2
#9 0x00b629a6 in _dl_catch_error () from /lib/ld-linux.so.2
#10 0x00b66a06 in _dl_open () from /lib/ld-linux.so.2
#11 0x00d38c3b in dlopen_doit () from /lib/libdl.so.2
#12 0x00b629a6 in _dl_catch_error () from /lib/ld-linux.so.2
#13 0x00d3903c in _dlerror_run () from /lib/libdl.so.2
#14 0x00d38b71 in dlopen@@GLIBC_2.1 () from /lib/libdl.so.2
...

```

**线程 2：**

```
#0 0x00110424 in __kernel_vsyscall()
#1 0x00d4c059 in __lll_lock_wait () from /lib/libpthread.so.0
#2 0x00d4740e in _L_lock_752 () from /lib/libpthread.so.0
#3 0x00d4731a 在来自 /lib/libpthread.so.0 的 pthread_mutex_lock ()
#4 0x00c95dd2 in _dl_addr () from /lib/libc.so.6
#5 0x00bf0425 in tr_where () from /lib/libc.so.6
#6 0x00bf06bd in tr_malchook () from /lib/libc.so.6
#7 0x00bed01b in malloc () from /lib/libc.so.6
……

```

我在互联网上进行了很多搜索，但我无法确定我是否做错了什么，或者我是否在库中发现了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:53:06.430

glibc 的`dlopen()`代码似乎不是线程安全的。

看起来您的代码调用`malloc()`并`dlopen()`同时来自两个线程。看起来`malloc()`call 遇到了一个未解析的动态符号并尝试使用 解析它`_dl_addr()`，这意味着您正在执行的二进制文件与惰性绑定（默认`ld`行为）链接，这就是运行时链接器在第一次调用时按需解析符号的原因。尝试使用`-Wl,-z,now` `gcc`链接器选项链接它，以使运行时链接器在启动应用程序之前解析所有符号。

这个错误看起来与我提交[错误报告](https://bugzilla.redhat.com/show_bug.cgi?id=661676)的那个类似。

# eclipse - TestNG eclipse 插件在哪里

> ID：11954536
> 
> 赞同：6
> 
> 时间：2012-08-14T14:28:56.417
> 
> 标签：eclipse, testng

[在哪里可以找到 5.x Testng eclipse 插件](https://stackoverflow.com/questions/5642925/where-to-find-5-x-testng-eclipse-plugin)

[在 Eclipse 3.5 上安装较旧的 TestNG 插件时出现问题](https://stackoverflow.com/questions/2995237/problem-installing-older-testng-plugin-on-eclipse-3-5)

这两个问题都很老了，所以那里的链接不再起作用。我有 Eclipse 3.5，我想安装 Eclipse TestNG 插件。更新站点的位置是什么？我正在迁移到 TestNG，所以我可以迁移最新版本的 TestNG

PS：我试过[http://beust.com/eclipse/](http://beust.com/eclipse/)但它给我一个 NPE，如下所示

![在此处输入图像描述](../Images/225117912a953fa9e62d3e1b1f517a70.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T06:44:07.250

Try to download TestNG plugin from Market Place.

Eclipse - > Help - > Eclipse MarketPlace -> TestNG..

Install it. After restarting Eclipse use it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:31:28.413

尝试 jar 来自的 URL：http: [//beust.com/eclipse/](http://beust.com/eclipse/) 使用上面的链接作为位置，确保包含 http://。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T15:33:41.340

我使用了以下页面[http://beust.com/eclipse-old/上发布的最新网址](http://beust.com/eclipse-old/)

那是[http://beust.com/eclipse-old/eclipse-6.7.0.20120825_1316/](http://beust.com/eclipse-old/eclipse-6.7.0.20120825_1316/)

它工作得很好。

您的 URL 看起来不错（http://beust.com/eclipse），因此我怀疑与此无关的问题，也许您的 Eclipse 安装有错误或配置不正确（虽然我的 Eclipse 安装不需要任何特殊配置）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-07T07:04:04.097

在 windows 如何在 Eclipse 中安装 testng 插件：

```
1\. Open Eclipse
2\. Click on Help at top menu
3\. Click on Install New Software... sub-menu
4\. Click on Add button
Do the following at Add Repository pop-up:
5\. Enter name as (Example - testng)
6\. Enter URL as your requirement:
   For Eclipse 3.4 and above, enter http://beust.com/eclipse
   For Eclipse 3.3 and below, enter http://beust.com/eclipse1
7\. Click on OK button
8\. Check process bar is displayed because plugin is installed in eclipse 
```

安装后按照以下步骤操作：
i) 重新启动 eclipse
ii) 转到 Window-> Preferences 并观察左侧面板
iii) TestNG 已登记

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-18T09:18:30.763

我注意到它是在配置代理后停止安装的代理，它像奶油一样安装。

较早的评论：经过大量尝试并尝试不同的 URL 后，终于发现该 URL 对我有用：http: [//beust.com/eclipse-old/eclipse-6.7.0.20120825_1316/](http://beust.com/eclipse-old/eclipse-6.7.0.20120825_1316/)

对于 MD5 示例，所有其他 URL 不断给出错误：收集要安装的项目时发生错误会话上下文是：(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect , 操作数=, 动作=)。下载工件时出现问题：osgi.bundle,org.testng.eclipse,6.9.11.201604020423。MD5 哈希值不如预期。预期：da03b0c2cd24e2636ad05a151538b195 并找到 60ea74539d11470e704c4210de6e5573。下载工件时出现问题：osgi.bundle,org.testng.eclipse.maven,6.9.11.201604020423。MD5 哈希值不如预期。预期：91946a86a2a3ae80d8583be62a9fe068 并找到 0f70e9fd8a1bb2564f26bc4730a58922。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-02T23:47:17.960

For eclipse Luna - [http://marketplace.eclipse.org/content/testng-eclipse/metrics](http://marketplace.eclipse.org/content/testng-eclipse/metrics) Drag and drop the install icon to the eclipse workspace and follow instructions.

Works like charm.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-27T09:26:25.630

如果链接：[http](http://beust.com/eclipse/) ://beust.com/eclipse/不适用于 3.4 及更高版本，则 Eclipse 的网络连接可能存在问题。转到窗口-> 首选项-> 搜索 SSL 或网络连接。检查是否根据您的 Internet/Intranet 进行了相同的设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-11T06:59:14.900

打开 Eclipse 单击顶部导航器的帮助 单击安装新软件 单击添加按钮 添加存储库弹出窗口已打开 输入名称为（示例 - TestNG） 输入 URL - [http://beust.com/eclipse](http://beust.com/eclipse) 单击确定按钮 检查过程显示栏是因为插件安装在 ecplise 重新启动 eclipse 检查 Testng 是否安装在 ecplise

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-24T13:05:32.700

就我而言，似乎 Eclipse 的更新是问题所在。

我刚刚为我的 Eclipse 安装了更新（Luna Service Release 2 (4.4.2) Build id: 20150219-0600）并重新启动了 Eclipse。然后，去帮助-> Eclipse Marketplace-> 搜索TestNG 并安装它。

这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-13T11:33:48.057

给定站点“ [http://beust.com/eclipse](http://beust.com/eclipse) ”被重定向到 [http://dl.bintray.com/testng-team/testng-eclipse-release/](http://dl.bintray.com/testng-team/testng-eclipse-release/)

因为那个 Eclipse 无法在原始 URL 中获取插件。

[要解决此问题，请转到帮助-> 安装新软件现在使用“ https://dl.bintray.com/testng-team/testng-eclipse-release/](https://dl.bintray.com/testng-team/testng-eclipse-release/) ”添加新站点

它是“https”，这样做会列出 URL 中可用的插件，

选择TestNG，继续安装。

它对我有用，希望它也对你有用。

# c - 不确定来自 K&R 的句子的正确性 - 指针算法 | 释放程序

> ID：11954539
> 
> 赞同：5
> 
> 时间：2012-08-14T14:29:01.020
> 
> 标签：c, pointers, kernighan-and-ritchie

引述：

> 测试 if (allocbuf + ALLOCSIZE - allocp >= n) { 检查是否有足够的空间来满足对 n 个字符的请求。如果有，allocp 的新值最多会超出 allocbuf 的末尾。

它涉及的代码：

```
#define ALLOCSIZE 10000 /* size of available space */
static char allocbuf[ALLOCSIZE]; /* storage for alloc */
static char *allocp = allocbuf; /* next free position */

char *alloc(int n)
/* return pointer to n characters */
{
    if (allocbuf + ALLOCSIZE - allocp >= n) { /* it fits */
        allocp += n;
        return allocp - n; /* old p */
    } else
/* not enough room */
        return 0;
}
void afree(char *p) /* free storage pointed to by p */
{
    if (p >= allocbuf && p < allocbuf + ALLOCSIZE)
        allocp = p;
} 
```

那么怎么能超出allocbuf中的最后一个位置呢？在我看来是 allocbuf[9999]

除此之外的任何东西，例如。allocbuf[10000] 不正确，是内存泄漏，对吗？

* * *

问题的第二部分 - 我虽然根据其名称的自由函数正在删除保存在数组中特定位置的值。但是，正如我所见，它只是将“记录头”移动到数组左侧的几个位置？保存在那里的数据保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:03:00.487

`allocp`应该总是指向最后一个空闲的内存位置，但是当没有可用的内存位置时，它将是`allocbuf`.

考虑缓冲区中只剩下一个内存单元的情况：`allocp`将指向`allocbuffer[9999]`因为这是最后一个空闲内存单元。现在，当您使函数调用`alloc(1)`测试时

```
allocbuf + ALLOCSIZE - allocp >= n 
```

将返回 true ，因为您正在尝试分配一个`char`并且`char`只剩下一个。然后将分配最后一个内存位置。现在`allocbuf - allocp == ALLOCSIZE`和是一个超越结束的`allocbuf`。但在这种情况下，上述测试将始终返回 false，因此不会访问超出范围的内存`allocbuf`。

* * *

关于您的问题`afree`：返回的内存的初始值`malloc`未定义。这意味着您永远不能对它做出任何假设，并且必须在使用前覆盖它。因此`afree`，不必删除与您假设相反的任何数据。将其简单地标记为不再使用并可供将来分配是完全可以的。

`malloc`附带说明一下，有一个与named非常相似的函数，`calloc`它在分配请求的内存块后将其全部初始化为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:32:20.010

关于您问题的第二部分：像库这样`afree()`的内存管理功能*通常*不会清零或清除内存。他们只是让它可供重用。这很好，因为您无需支付性能成本。不幸的是，它可以掩盖错误，例如使用您不再拥有的内存。`C``free()`

 *`free()`当您出于安全原因或协助调试时，某些堆管理器可能会将内存归零或使用特殊值填充它。这不是标准要求的，您必须专门启用此行为。*

# javascript - Javascript：获取图像宽度然后设置类

> ID：11954542
> 
> 赞同：2
> 
> 时间：2012-08-14T14:29:11.373
> 
> 标签：javascript, class, image

我想分析一篇文章的每张图片，并为所有小于/等于 400px 的图片设置一个类（以及为大于 400px 的图片设置一个类），以便我可以给它们一个特定的样式。

在 jQuery 中可能是这样的

```
$('div#content').find('img').each(function () {
    var $this = $(this), width = $this.width();
     if (width <= 400) {
     $this.addClass('small_img');
}

var $this = $(this), width = $this.width();
    if (width > 400) {
    $this.addClass('large_img');
}       
}); 
```

但我需要它使用纯 Javascript。作为一个愚蠢的记者和网页设计师，我不明白......如果你能帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:40:47.597

你的意思是像这样快速而短暂的东西？

```
window.onload = function() {
   var n=document.getElementById('content').getElementsByTagName('img'), 
       i=n.length;
   while(i--){
       n[i].className = n[i].clientWidth > 400 ? 'large_img' : 'small_img' ;
   }
}; 
```

有关工作示例，请参[见此小提琴。](http://jsfiddle.net/rafs2/)

另请阅读关于 SO 的[此问题](https://stackoverflow.com/questions/11927844/get-width-in-pixels-from-element-with-style-set-with/11927871#11927871)，以选择获取（计算的）宽度的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:41:07.027

```
window.onload = function() {
   var content = document.getElementById('content');
   if (content) {
       var img = content.getElementsByTagName('img');
       for (var i = 0, count = img.length; i < count; i++) {
            if (img[i].offsetWidth <= 400) {
                img[i].className += ' small_img';
            } else {
                img[i].className += ' large_img';
            }
       }
   }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:41:14.997

像这样的东西应该工作：

```
// Find the parent container 'div#content'
var container = document.getElementById( "content" ),
    // Find all images within the parent
    images = container.getElementsByTagName( "img" ),
    // Total number of images to check
    len = images.length,
    // Loop counter
    i = 0,
    // Represents the current image in the loop
    image;

// Loop through all the images
for ( ; i < len; i++ ) {
    // Access the current image
    image = images[ i ];

    // Use the ternary operator to assign one of two classes, based on width
    image.className += ( image.clientWidth > 400 ) ? " large_img" : " small_img";
} 
```

希望有帮助。干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:42:35.350

```
var contentDiv = document.getElementById('content');
var imgs = contentDiv.getElementsByTagName('img');
for(i=0;i<img.length;i++){
   var img = imgs[i];
   if(img.clientWidth <= 400) img.className += " small_img"
   else                       img.className += " large_img"
} 
```

# asp.net - 我是否正确使用 LINQ 来应用可变数量的过滤器？

> ID：11954543
> 
> 赞同：0
> 
> 时间：2012-08-14T14:29:12.737
> 
> 标签：asp.net, vb.net, linq

我在我的 .aspx 页面中填充了一个 DataGrid，并在页面上有一些下拉菜单用于过滤出现在网格中的数据。我正在尝试使用 LINQ 过滤我在 page_load 和下拉菜单的 SelecedIndexChanged 事件上绑定的 DataTable 中的数据。

这是我目前的方法：

```
Dim filteredData As DataTable = (From d In rawDataTable
                            Select d).CopyToDataTable

        If Me.cbFilter1.SelectedIndex > 0 Then

            filteredData = (From f In filteredData
                            Where f.Field(Of Date)("ADateField").Year = Me.cbFilter1.SelectedValue
                            Select f).CopyToDataTable

        End If

        If Me.cbFilter2.SelectedIndex > 0 Then

            filteredData = (From f In filteredData
                            Where f.Field(Of String)("AStringField") = Me.cbFilter2.SelectedValue
                            Select f).CopyToDataTable

        End If

        If Me.cbFilter3.SelectedIndex > 0 Then

            filteredData = (From f In filteredData
                            Where f.Field(Of Boolean)("ABooleanField") = (cbFilter3.SelectedValue = "Yes")
                            Select f).CopyToDataTable

        End If

        ' ...and finally binding my grid to filteredData 
```

有没有更清洁和更有效的方法来做到这一点？你会怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:35:22.873

尝试一下。

```
filteredData = (From f In filteredData
     Where ((Me.cbFilter1.SelectedIndex > 0 And f.Field(Of Date)("ADateField").Year = Me.cbFilter1.SelectedValue) Or _
(Me.cbFilter2.SelectedIndex > 0 And f.Field(Of String)("AStringField") = Me.cbFilter2.SelectedValue))
     Select f).CopyToDataTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:40:55.313

为什么`CopyToDataTable`每次都执行？我将从原始数据构造查询并在最后执行此步骤。

```
Dim query = From d In rawDataTable Select d

If Me.cbFilter1.SelectedIndex > 0 Then
    query = query.Where(Function(f) f.Field(Of Date)("ADateField").Year = Me.cbFilter1.SelectedValue)
End If

If Me.cbFilter2.SelectedIndex > 0 Then
    query = query.Where(Function(f) f.Field(Of String)("AStringField") = Me.cbFilter2.SelectedValue)
End If

If Me.cbFilter3.SelectedIndex > 0 Then
    query = query.Where(Function(f) f.Field(Of Boolean)("ABooleanField") = (cbFilter3.SelectedValue = "Yes"))
End If

Dim filteredData As DataTable = query.CopyToDataTable 
```

注意：像这样组合不同的 where 子句是完全合法的。结果与用“And”连接条件相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:44:14.067

您想要使用的是`IQueryable`处理添加多个 where 子句的接口。 `IQueryable`允许您将 Where 子句链接到您的查询，同时**推迟**查询的执行，直到您准备好结果。您概述的方式多次执行查询。最重要的是，您`.CopyToDataTable`每次都调用该方法，这可能会产生一些额外的性能影响。

除了您可能应该完全摆脱 DataSets 和 DataTables 之外，这里有一个示例可以帮助您将它们与 IQueryable 一起使用：

```
 ' Calling the AsQueryable extension method starts your query off as an IQueryable '
    Dim query = (From d In rawDataTable
                 Select d).AsQueryable()

    If Me.cbFilter1.SelectedIndex > 0 Then
        query = query.Where(Function(f) f.Field(Of Date)("ADateField") = Me.cbFilter1.SelectedValue)
    End If

    If Me.cbFilter2.SelectedIndex > 0 Then
        query = query.Where(Function(f) f.Field(Of String)("AStringField") = Me.cbFilter2.SelectedValue)
    End If

    If Me.cbFilter3.SelectedIndex > 0 Then
        query = query.Where(Function(f) f.Field(Of Boolean)("ABooleanField") = (cbFilter3.SelectedValue = "Yes"))
    End If

    ' At this point, you shouldn't even need the .CopyToDataTable() method. '
    MyGrid.DataSource = query
    MyGrid.DataBind() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:33:52.640

代替 LINQ，在 DataTable 上使用 DataView -> [http://msdn.microsoft.com/en-us/library/system.data.datatable.defaultview.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.defaultview.aspx)

filtersData.DefaultView.RowFilter = "AStringField = " & Me.cbFilter2.SelectedValue

和

filtersData.DefaultView.RowFilter = "ADateField.Year = " & Me.cbFilter1.SelectedValue

等等等等

所以你不要创建新的数据表而是过滤它。

# android - MediaRecorder 在 Droid X2 上记录错误的音频文件

> ID：11954546
> 
> 赞同：1
> 
> 时间：2012-08-14T14:29:20.910
> 
> 标签：android, android-mediaplayer, android-mediarecorder

我正在尝试使用 Droid X2 上的 MediaRecorder 录制音频，但遇到了问题。MediaRecorder 似乎可以很好地准备并开始录制，但是当我停止录制并尝试收听生成的文件时，播放立即停止。即使我尝试在标准媒体播放器应用程序中打开音频文件，它也会立即停止。

这是我用来记录的代码：

```
mCurrentRecordingFilePath = mContext.getExternalFilesDir(null).getAbsolutePath() + File.separator + fileName;

mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
mRecorder.setOutputFile(mCurrentRecordingFilePath);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
// mRecorder.setAudioEncodingBitRate(16);
// mRecorder.setAudioSamplingRate(44100);

try {
    mRecorder.prepare();
    mIsPrepared = true;
} catch (IOException e) {
    Log.e("Test", "MediaRecorder prepare() failed");
    e.printStackTrace();
}
if (mRecorder != null && mIsPrepared) {
    mRecorder.start();
    mIsRecording = true;
    Log.i("Test", "Started audio capture: " + mCurrentRecordingFilePath);
} 
```

我注释掉了这个`setAudioEncodingBitRate()`电话，因为它导致`prepare()`失败，为了安全起见，我也注释掉了`setAudioSamplingRate()`。我已经尝试了可用的输出格式和音频编码器的每种组合，结果始终相同。我没有例外，并且创建了一个非空文件，但它不会正确播放。

不确定它是否有助于诊断，但这是我用来停止记录的代码：

```
if (mRecorder != null && mIsRecording) {
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
    mIsPrepared = false;
    mIsRecording = false;
    Log.i("Test", "Stopped audio capture");
} 
```

录制代码在 Galaxy Nexus、Nexus S、EVO 4G 和 Galaxy SII 上运行良好。知道为什么我的音频文件在 Droid X2 上会不好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:24:50.410

在这里找到答案：[MediaPlayer can't play audio files from program data folder?](https://stackoverflow.com/questions/3773262/mediaplayer-cant-play-audio-files-from-program-data-folder)

问题不在于录制，而是我设置 MediaPlayer 数据源的方式。虽然我不知道为什么股票媒体播放器应用程序不会播放文件......也许这是一个许可的事情。这是我用来播放文件的代码：

```
mPlayer = new MediaPlayer();
mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mPlayer.setDataSource(fileName);
mPlayer.prepare();
mPlayer.start(); 
```

如果文件存储在外部文件目录中，以下代码将起作用：

```
mPlayer = new MediaPlayer();
mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mPlayer.setDataSource((new FileInputStream(fileName)).getFD());
mPlayer.prepare();
mPlayer.start(); 
```

# java - 是公共连接 getInstance(String databasename); 连接池的一种形式？

> ID：11954559
> 
> 赞同：1
> 
> 时间：2012-08-14T14:29:42.267
> 
> 标签：java, connection-pooling

在 javase 数据库应用程序中，我处理了许多短期对象（比如账单等会计文件）。
处理每个对象包括打开与数据库的连接并查找一些数据。并非所有对象都在同一个数据库中查找，但我根据某些对象属性选择了一个特定的数据库，所以我最终会打开几个连接。
我真正需要的是每个数据库不超过一个连接。
所以我做了这样的事情：

```
public MyPool {

    Map<String, Connection> activeConnections = new TreeMap<String, Connection>();

    public Connection getConnection(String database_name) throws SQLException {

    if (activeConnections.containsKey(database_name)) {
        return activeConnections.get(database_name);
    }

    //Retrive the configuration data from a configuration object
    ConnectionConfig c = Configuration.getConnectionConfig(database_name);

    Connection connection = DriverManager.getConnection(c.url, c.user, c.password);

    return connection;

} 
```

**问题是：**
1）由于我看到很多池库、DBCP、c3p0 和其他库：所有这些库的意义何在，它们为这样的“基本”方法添加了什么？[像这样](http://www.javaranch.com/journal/200601/JDBCConnectionPooling.html)
的 教程对回答这个问题没有多大帮助，因为这里公开的基本解决方案完全符合他们对连接池的定义。

2）这是一段将“公开”给其他开发人员的代码，进而可以开发程序以从具有不同结构的数据库中检索数据，可能从这个“池对象”获取连接。
在文档和代码中将其称为“池”是否正确，或者它是否不同，因此调用“池”会产生误导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:21:19.567

您的代码不是该术语的通俗用法中的连接池实现，因为每个数据源只有一个物理连接。对象池（在这种情况下，对象是一个连接）背后的概念是某些对象需要开销来配置。如您所知，在连接池的情况下，必须先打开数据库连接，然后才能与数据库通信。

这里的区别在于您的代码对于并发环境（如您提到的流行的连接池实现）不是线程安全的。在 Web 等高并发环境中运行的应用程序不需要承担在每个请求上建立连接的开销。相反，维护一个打开的连接池，当请求完成连接处理时，它会返回到池中以供后续请求使用。

这是必需的，因为连接是有状态的。您不能有多个请求同时共享同一个连接并保证任何类型的合理事务语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T11:27:26.233

使用 BoneCP 并像这样包装连接池：不要尝试创建自己的连接池，这就是 BoneCP 或任何数量的其他非常好的和经过良好测试的池的用途。

```
object ConnectionPool { 
    Class.forName("[ENTER DRIVER]")
    private val connstring = [ENTER YOUR STRING]

private var cp : BoneCP = _
createConnectionPool()  //upon init create the cp

/**
 * Create a new connection pool
 */
def createConnectionPool() = {
    if(cp == null) {
        try {
            val config = new BoneCPConfig()
            config.setJdbcUrl(connstring)
            config.setMaxConnectionsPerPartition(3)
            config.setMinConnectionsPerPartition(1)
            config.setPartitionCount(1)
            cp = new BoneCP(config)
        }
        catch {
            case e: SQLException => e.printStackTrace()     
        }
    }
}

def getConnection () = { cp.getConnection } 
```

# python - 不作为过滤功能中的功能

> ID：11954561
> 
> 赞同：0
> 
> 时间：2012-08-14T14:29:46.063
> 
> 标签：python, list, filter

我有一个字符串列表，我想删除其中包含列表 excludeList 中的字符串的字符串。过滤器需要一个函数和一个列表，我如何“函数化” `excluded not in`？excludeList 看起来像：`["A2123", "B323", "C22"]`

kolaDataList 看起来像：`["Very long string somethingsomething B323", "Lorem ipsum"]`

结果应该是`[Lorem ipsum]`

```
for excluded in excludeList:
    kolaDataList = filter((excluded not in), kolaDataList) 
```

我想这可以在haskell中工作，但我该如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:31:12.480

您可以使用[lambda](http://docs.python.org/reference/expressions.html#lambda)或匿名函数：

```
for excluded in excludeList:
    kolaDataList = filter(lambda l: excluded not in l, kolaDataList) 
```

或者，只需使用列表推导：

```
for excluded in excludeList:
    kolaDataList = [l for l in kolaDataList if excluded not in l] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:31:54.630

您可以将其作为列表理解来执行：

```
kolaDataList = [l for l in kolaDataList if excluded not in l] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:03:16.523

您必须构建自己的功能来过滤您的内容，例如使用`lambda`功能。让我们构建一个通用函数，根据您的条件过滤值：

```
generic_filter = lambda item, excludeList=[]: item not in excludeList 
```

现在您可以调整此函数以与 using 一起`filter`使用`functools.partial`。

```
import functools

# This function will be used with specific exclude list you pass it
my_filter = functools.partial(generic_filter, excludeList=excludeList)

# Apply filter
result = filter(my_filter, kolaDataList) 
```

创建中间泛型函数的优点是您可以重用它来应用不同的排除列表。

# ios - IOS - 在后台响应音频路由变化

> ID：11954563
> 
> 赞同：1
> 
> 时间：2012-08-14T14:29:54.313
> 
> 标签：ios, audio, background, routes

我浏览了开发人员库，发现了很多有用的信息，但仍然没有回答我的问题。

问题：**是否可以让我的应用程序主要在后台运行，监控手机的音频路由，并使用我选择的任何代码对路由的任何变化做出反应？我了解我必须遵守在后台运行并提供有用服务的应用程序的指导方针。**

**另请注意，此应用程序不会有任何自己的音频会话，它不需要播放或录制音频，只监视路线变化（例如拔下耳机）。**

希望这里有人比我知道的更多，可以给我小费！

# asp.net - En 连接到 LinkBut ton.Click 的事件处理程序在页面加载时被调用

> ID：11954568
> 
> 赞同：4
> 
> 时间：2012-08-14T14:30:02.257
> 
> 标签：asp.net, event-handling

这是我正在使用的代码。我理解它的方式，**LinkBut​​ton1_Click**应该只在我单击**LinkBut​​ton1**时被调用。不幸的是，该方法在页面加载时被调用，所以我迷路了。代码中的某个地方有什么问题吗？

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
        //Do something
}

override protected void OnInit(EventArgs e)
{
        InitializeComponent();
        base.OnInit(e);
}
private void InitializeComponent()
{
        this.Load += new System.EventHandler(this.Page_Load);
        this.LinkButton1.Click += new EventHandler(this.LinkButton1_Click);          
 } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:03:08.557

如果您没有从代码中调用“LinkBut​​ton1_Click”或使用一些 javascript 来最终触发此方法，那么这不应该发生。但是，我遇到了由 Visual Studio 调试输出引起的类似问题。转到 Visual Studio 主菜单并选择“构建”->“清洁解决方案”。您还可以从设计器中删除“LinkBut​​ton1”并强制重建解决方案。这应该会强制重新构建调试文件，并且幻像调用将消失。

# java - JavaFX Script 和 Visage，等价的？

> ID：11954569
> 
> 赞同：3
> 
> 时间：2012-08-14T14:30:04.593
> 
> 标签：java, javafx, javafx-2, javafx-1, visage

使用*Visage*为*JavaFX 2.0*编写代码与使用JavaFX Script 编写代码基本相同吗？

 *我对学习 Visage 很感兴趣，因为有人告诉我这与 JavaFX 1.3 脚本语言*相同，*因此它基本上相当于能够用 JavaFX Script 编写 JavaFX 2.0 应用程序。

这完全准确吗？例如，如果我要拿起一本关于将在 2.0 之前发布的最新 JavaFX Script 版本的书——那本书对学习 Visage 是否同样有用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T23:05:35.703

哇，我确信这将是那些 5 分钟转身的问题之一 :)

我遇到的最佳答案来自 Apress 的书*Pro JavaFX 2.0 使用 Java 技术的富客户端的权威指南*。它包含一个专门用于 Visage 的大部分内容。它说：

> Visage 是一个例外，因为它最初由 Christopher Oliver 构思为一种名为 F3 的 UI 语言，用于形式跟随功能，专门用于简化图形用户界面的编程。在 javafx 2.0 发布之前，它被重命名为 JavaFX Script，并作为所有 JavaFx 应用程序的 UI 编程语言。目前，它正在开发为一种名为 Visage 的独立 UI 编程语言，可作为开源软件使用，并可与 JavaFX 和其他 UI 工具包一起使用。”——第 465 页，第 10 章

耐人寻味...我认为这意味着它与 JavaFX Script 相似但不一样，如果您具有 FX Script 知识，那么选择它应该不会太难。

顺便说一句，这本书是 JavaFX 2.0 的绝佳资源。我强烈推荐它。*

# android - 为什么drawable有一个视图的引用？

> ID：11954572
> 
> 赞同：1
> 
> 时间：2012-08-14T14:30:07.433
> 
> 标签：android, memory-leaks, reference, drawable, android-view

关于内存泄漏的一个非常古老的链接谈到了一个对视图的引用的可绘制对象（[链接在这里](https://web.archive.org/web/20141113211643/http://www.curious-creature.org:80/2008/12/18/avoid-memory-leaks-on-android/)）。

我对此有一些简单的问题：

1.  为什么可绘制对象引用视图？

2.  drawable 对视图有什么作用？

3.  它是否引用了所有使用它的视图？

4.  各种可绘制对象都引用了视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-06T14:36:10.047

我也在读 Romain Guy 的文章。网站/博客现已消失，[Wayback 链接](https://web.archive.org/web/20171116104019/http://www.curious-creature.com/2008/12/18/avoid-memory-leaks-on-android/)。

Drawable 有一个私有字段 ( `mCallback`)，它指的是实现`Drawable.Callback`接口的类的实例，记录[在这里](https://developer.android.com/reference/android/graphics/drawable/Drawable.Callback)。View实现了这个接口，这个回调引用是系统在`view.setBackground`被调用时自动设置的。

```
public class View extends Object implements Drawable.Callback, KeyEvent.Callback, AccessibilityEventSource {} 
```

**为什么要设置这个字段？**它的用法是 的一个实现细节`Drawable`，因此很难知道它的具体用法是什么。“drawable 使用此接口来安排/执行动画更改。” 我只能从文档中得到。我想主要原因是打电话给`void scheduleDrawable(Drawable, Runnable, TimeToExecuteMeasuredSinceAppLaunch)` [doc](https://developer.android.com/reference/android/graphics/drawable/Drawable.Callback#scheduleDrawable(android.graphics.drawable.Drawable,%20java.lang.Runnable,%20long))。

> 如果要创建扩展 Drawable 的动画可绘制对象，请实现此接口。检索可绘制对象后，使用 Drawable#setCallback(android.graphics.drawable.Drawable.Callback) 将接口的实现提供给可绘制对象；它使用此接口来安排和执行动画更改。

* * *

所以专门回答你的问题

*   **为什么可绘制对象引用视图？**调用接口（`scheduleDrawable`和其他接口方法）为自己设置动画。还有，“安排和执行动画更改。”

*   **drawable 对视图有什么作用？**可绘制对象在接口中调用这些方法。

*   **它是否引用了所有使用它的视图？**Drawable 有 1 个回调（因此**只能使用 1 个视图**），并且可以使用[这里](https://developer.android.com/reference/android/graphics/drawable/Drawable#setCallback(android.graphics.drawable.Drawable.Callback))`setCallback`记录的设置。

*   **各种可绘制对象都引用了视图吗？**如果您设置`setCallback`，是的。它不必是“动画”来获得引用，因为 this ( ) 是根据[Drawable docs](https://developer.android.com/reference/android/graphics/drawable/Drawable)`setCallback`自动完成的。`View.setBackground(Drawable) and ImageView.`

* * *

最后，我发现他的帖子令人困惑，因为他掩盖了这个细节，这是内存泄漏的根本原因（`Drawable.Callback`接口，更重要的是，`mCallback`领域）。最后，回调 in`Drawable`存储为`private WeakReference<Callback> mCallback = null;`. 这是一个弱引用，不应该导致他说的内存泄漏。也许这是在他的博文之后对 Android 的一个改变。

编辑：啊哈！是 Romain在 2010 年[改变了它：](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/graphics/java/android/graphics/drawable/Drawable.java;bpv=1;bpt=0)

[![Romain guy 在 2010 年的提交细节，说明](../Images/b4439172b3d47b15860123c00429a1fc.png)](https://i.stack.imgur.com/gX30j.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:52:22.393

> 1.为什么drawable有一个view的引用？

由于允许它拦截视图状态，drawable 具有对 View 的引用，假设您有一个 selector-drawable ，当按下示例中的视图模式更改时，焦点，禁用更改它的背景

# sql - 在 WHERE 子句中的 CASE 语句中有两个参数

> ID：11954575
> 
> 赞同：2
> 
> 时间：2012-08-14T14:30:19.413
> 
> 标签：sql, sql-server

我正在运行查询以生成适用各种参数的所有记录。

假设相关表包含有关人员的详细信息。

我想生成“男性”和“女性”条目的记录，但我只想显示年龄低于“40”的男性。

目前我有这样的查询；

```
SELECT *
FROM table
WHERE gender IN('Male', 'Female') AND age < 40 
```

如何仅将年龄规则应用于男性？使用 CASE 语句？

**编辑**

由于我在 WHERE 子句中有许多其他参数，我在这里没有提到，我想避免使用 OR 运算符，很抱歉没有一开始就说明这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:32:39.507

无需`CASE`声明，只需更改您的`WHERE`子句以包含一个特定于`'Male'`记录的过滤器和一行`'Female'`记录：

```
SELECT *
FROM table
WHERE (gender = 'Male' AND age < 40)
    OR gender = 'Female' 
```

这是一个[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8b918/1)

编辑如果您的`WHERE`子句中有更多项目，您只需使用括号添加更多标准：

```
SELECT *
FROM table
WHERE 
(
    (gender = 'Male' AND age < 40)
        OR gender = 'Female'
)
AND -- place your other WHERE filters here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:31:37.390

有很多方法可以写这个，但这可能是最清楚的：

```
SELECT * 
FROM table 
WHERE gender = 'Female' 
    or (gender = 'Male' AND age < 40) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:32:33.133

```
SELECT * 
FROM table 
WHERE (gender = 'Female' OR (gender = 'Male' AND age < 40)) AND ...
    -- the rest of your WHERE criteria goes here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:31:55.327

```
SELECT *
FROM table
WHERE (age < 40 and gender = 'Male')
or gender = 'Female' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:35:41.000

使用 IN 否 =

```
SELECT *
FROM table 
WHERE gender IN('Female') OR (gender IN('Male') AND age < 40); 
```

# jsf - p:commandButton 不调用 bean 的方法 页

> ID：11954576
> 
> 赞同：2
> 
> 时间：2012-08-14T14:30:22.153
> 
> 标签：jsf, jsf-2, primefaces

当我动态地包含一个带有 的页面时，我遇到了一个问题`<ui:include>`，与组件关联的`action`和`actionlistener`没有`<p:commandButton>`被调用。我试图`<h:form>`从包含的页面中删除标签，但问题仍然存在。我该怎么做才能解决这个问题？

源代码：

**你好.xhtm**（主页）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<f:view>    
<h:head>
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />    
    <f:view contentType="text/html" />
</h:head>
<h:body>
    <h:form id="helloForm">
        <p:growl id="messages" />
        <p:panelGrid id="panelGridPrincipal" styleClass="panelGridPrincipal">
            <p:row>
                <p:column colspan="2">
                    <div style="width: 100%; height: 25px; padding-left: 230px;">
                        <p:commandButton id="botao1" value="Bookmark" styleClass="button"/>
                        <p:commandButton id="botao2" value="Bookmark2" styleClass="button"
                            actionListener="#{mainBean.renderMenuVendas}" update="panel" >
                            <f:setPropertyActionListener value="2" target="#{mainBean.menuType}" />  
                        </p:commandButton>
                    </div>
                </p:column>
            </p:row>
            <p:row>
                <p:column id="column2" style="width:200px;background-color: #5A5858;">
                    <h:panelGrid id="panel" styleClass="panelGridMenu" columns="1">
                        <p:menu id="dynamicMenu" model="#{mainBean.sideMenu}" rendered="#{mainBean.showMenuVendas}" style="width:189px;margin-right:100%;"/>
                        <p:spacer width="50px" height="700px" />
                    </h:panelGrid>
                </p:column>
                    <p:column style="background-color: white">
                        <p:panelGrid style="border:1px;">
                            <p:row>
                                <p:column>
                                    <p:outputPanel id="outputPanelConteudo">
                                        <ui:include src="#{mainBean.paginaAtual}" />
                                    </p:outputPanel>
                                </p:column>
                            </p:row>
                            <p:row/>
                        </p:panelGrid>
                    </p:column>
                </p:row>
        </p:panelGrid>
    </h:form>
</h:body>
</f:view>
</html> 
```

**pagina1.xhtml**（包含页面）

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <p:dataTable id="avioes" var="aviao" value="#{listaAvioesBean.aviao}"
        rowKey="#{aviao.numeroSerie}"
        selection="#{listaAvioesBean.selectedAviao}" selectionMode="single"
        style="width:500px">

        <p:column style="width:75px">
            <f:facet name="header">
                <h:outputText value="Numero de Serie" />
            </f:facet>
            <h:outputText value="#{aviao.numeroSerie}" />
        </p:column>

        <p:column style="width:100px">
            <f:facet name="header">
                <h:outputText value="Marca" />
            </f:facet>
            <h:outputText value="#{aviao.marca}" />
        </p:column>

        <p:column style="width:75px">
            <f:facet name="header">
                <h:outputText value="Modelo" />
            </f:facet>
            <h:outputText value="#{aviao.modelo}" />
        </p:column>

        <p:column style="width:75px">
            <p:commandButton id="insertAviao" value="Inserir" title="Visualizar">
                <f:setPropertyActionListener value="#{aviao}"
                    target="#{listaAvioesBean.selectedAviao}" />
            </p:commandButton>
                 <!--THESE ACTION DOESN'T CALL THE BEAN METHOD!!!  -->
                <p:commandButton id="removerAviao" style="width:50px" value="P"
                    title="Deletar" action="#{listaAvioesBean.removerAviao}"
                    update=":helloForm:outputPanelConteudo">
                    <f:setPropertyActionListener value="#{aviao}"
                        target="#{listaAvioesBean.selectedAviao}" />
                </p:commandButton>
        </p:column>
    </p:dataTable>
</ui:composition> 
```

**托管 bean (ListaAvioesBean.java)**

```
package br.com.erp.beans;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

import br.com.erp.object.Aviao;

@ManagedBean(name="listaAvioesBean")
@ViewScoped
public class ListaAvioesBean implements Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 8076960891132613195L;
    private Aviao selectedAviao;
    private List<Aviao> aviao;

    public ListaAvioesBean(){

        aviao = new ArrayList<Aviao>();
        System.out.println("ListaAvioesBean Criado!");

    }

    @PostConstruct
    public void init(){

        System.out.println("Iniciando o bean!");
        populateListAvioes();   
    }

    public void executa(){

        System.out.println("Executou");

    }

    private void populateListAvioes(){

        Aviao av1 = new Aviao();
        av1.setMarca("Marca1");
        av1.setModelo("M1");
        av1.setNumeroSerie("1234");
        aviao.add(av1);
        av1 = new Aviao();
        av1.setMarca("Marca2");
        av1.setModelo("M2");
        av1.setNumeroSerie("1111");
        aviao.add(av1);
        av1 = new Aviao();
        av1.setMarca("Marca3");
        av1.setModelo("M3");
        av1.setNumeroSerie("4321");
        aviao.add(av1);

    }

    public Aviao getSelectedAviao() {
        return selectedAviao;
    }

    public void setSelectedAviao(Aviao selectedAviao) {
        this.selectedAviao = selectedAviao;
    }

    public List<Aviao> getAviao() {
        return aviao;
    }

    public void setAviao(List<Aviao> aviao) {
        this.aviao = aviao;
    }

    public void removerAviao(){

        boolean removeu = aviao.remove(selectedAviao);

        if(removeu)
            System.out.println("Avião removido com sucesso");

    }

    public void executa(ActionEvent e){

        System.out.println();

    }

} 
```

# c++ - 如何将派生类型的容器转换为基类型的容器

> ID：11954577
> 
> 赞同：0
> 
> 时间：2012-08-14T14:30:25.657
> 
> 标签：c++, templates, constructor, type-conversion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:33:51.513

Add another constructor:

```
template <typename U>
Container(Container<U> const & ref,
          typename std::enable_if<std::is_base_of<T, U>::value, int>::type = 0)
: obj_(ref.obj_)
{ } 
```

I added the `enable_if` part to make sure that this new constructor template only participates in overload resolution when the type `U` is actually derived from `T`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:35:31.013

`Container<A>` and `Container<B>`are totally different class.

You can have something like `container_cast<T>(U)` that converts a `Container<A>` to `Container<B>`

container_cast will construct another `Container<T>` by taking the `obj_` `Container<U>` and casting that `obj_` to `T*`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T14:37:28.940

Instead of using the container, use an iterator pair, which is nicely convertible to base class. It solves the problem, and cleans up the code in one go.

* * *

**EDIT**: after more info was given, I change my answer to this:

Use `boost::shared_ptr`.

# java - 如何将向量转换为 JSONArray？

> ID：11954578
> 
> 赞同：0
> 
> 时间：2012-08-14T14:30:37.510
> 
> 标签：java, vector, gson, arrays

我需要将 a 转换`Vector<Vector<Float>>`为 a `JSONArray`。除了遍历向量并创建`JSONArray`，还有更简单的方法吗？

有人告诉我试试gson。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:05:58.397

`SharedPreferences`只是一个键值存储。是什么阻止你`JSONObject`完全绕过，只使用这样的东西（仅限 Gson）？

```
private static final Type DATA_TYPE = 
    new TypeToken<Vector<Vector<Float>>>() {}.getType(); 
```

**贮存：**

```
Vector<Vector<Float>> data = new Vector<Vector<Float>>();
data.add(new Vector<Float>());
data.get(0).add(3.0f);

String dataAsJson = new Gson().toJson(data, DATA_TYPE);
sharedPreferences.edit().putString("data", dataAsJson).commit(); 
```

**恢复：**

```
String dataAsJson = sharedPreferences.getString("data", "[]");
Vector<Vector<Float>> data = new Gson().fromJson(dataAsJson, DATA_TYPE); 
```

*免责声明：我从未为 Android 开发过。*

# python - RabbitMQ - 游戏室和安全注意事项

> ID：11954580
> 
> 赞同：1
> 
> 时间：2012-08-14T14:30:46.183
> 
> 标签：python, security, webserver, messaging, rabbitmq

我正在编写一个 Android 应用程序并想定义房间。房间将容纳某些游戏的所有用户。这就像扑克有 4 个玩家，每个房间可以容纳 4 个用户。我还想使用 rabbitmq 来实现可扩展性和可定制性。问题是 Android 应用程序使用相同的用户名：密码将所有用户连接到 RabbitMQ 服务器（特定虚拟主机）。

我想我担心一个用户可能能够读/写来自不同队列的消息，这是应该的。有多种解决方案不满意：

1.  在每个 Android 应用程序中使用不同的用户：这确实无法做到，因为 Android Market 不允许每个下载它的用户使用不同的应用程序。即便如此，这也是一个愚蠢的想法。

2.  设置适当的访问控制：[http](http://www.rabbitmq.com/access-control.html) ://www.rabbitmq.com/access-control.html 。我想这不会阻止恶意攻击者从/向它无权访问的队列读取/写入消息的问题。

3.  设置适当的路由键：我猜如果每个用户创建另一个队列，它可以从中读取消息并将消息发布到专门定义的队列，这可以工作。但我想问题是一样的，因为用户将使用相同的用户名：密码连接到 RabbitMQ：因此该用户可以读取所有队列并写入它们（基于访问规则）。

我的问题是：如何允许攻击者读取/写入仅代表他当前加入的房间的队列，并阻止访问其他队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:31:03.277

我自己正在开发一个扑克应用程序 =)

我依赖于基于 Akka/Actors（查看 Erlang）之类的基于流式 Web 套接字的流量，并希望它能够正常工作（仍然有点担心安全 Web 套接字）。

也就是说，我也在考虑使用 RabbitMQ 来接收玩家动作。我认为您不想将用户名或密码暴露给兔子队列。事实上，您甚至可能不希望从外部世界访问队列服务器。

相反，设置一些您的用户可以建立连接的服务器。这将是您的“前端”，Android 客户端将与之交谈。每个用户将通过安全的 TCP 连接连接到服务器，然后登录到您的系统。这是用户将拥有自己的用户名和密码的地方。如果身份验证成功，则保持套接字处于活动状态（这是我对 TCP 的了解较弱的地方），然后将用户信息与此套接字相关联。

当玩家做出动作（例如弃牌或加注）时，通过安全 TCP 连接将他们的动作发送到您的“前端”（此连接仍应建立）。“前端”然后检查哪个用户连接到此套接字，然后将消息发布到理想情况下包含用户 ID、所采取的操作和表 ID 的队列。换句话说，唯一允许访问队列的 IP 是您的前端服务器，而前端服务器只使用兔子队列的单个用户名/密码。

由您来处理队列消息的交换并将消息路由到正确的表（或确保该表只处理它负责的消息 - 这就是我现在喜欢 Akka 的原因:) 一旦消息到达到表中，验证消息中的用户 id 是实际轮到的用户 id，然后根据表的状态验证发送的操作是可接受的。例如，如果我收到一个 CHECK 请求，而用户只能 CALL/FOLD/RAISE，那么我只会回复无效操作或直接丢弃整个消息。

不要让公众排队，并始终确保您没有安全漏洞，尤其是当您开始处理真实货币时。

希望这可以帮助...

编辑：我只想说清楚。任何时候客户端进行操作，他们只需要发送操作和表 ID 或您需要的任何信息。不要让他们发送他们的用户 ID 或任何用户特定信息。您的“前端”服务器应该根据请求进入的套接字自动关联用户 ID。如果他们在请求中提交了任何用户信息，最好将其记录下来，然后丢弃数据。我会记录它只是因为我不喜欢试图作弊的人，如果他们向您发送意外数据，这可能就是他们正在做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:09:44.070

也许我不太了解应用程序，但根据我的经验，RabbitMQ 通常用于后端，例如，在创建具有数据库和应用程序服务器以及其他松散耦合实体的分布式系统时。消息队列是异步应用程序设计的重要工具，理论上每个消息队列都可以由 RabbitMQ 生成一个单独的进程，这使得它具有显着的可扩展性。

您在问题中提到的似乎更像是用户的访问控制机制。我会在系统的前端看到这一点。例如，在将传入消息传递到消息队列之前对传入消息进行过滤。您甚至可能需要考虑通过每个用户的速率控制来防止 DoS。

干杯!

# javascript - 选择菜单的转义 HTML“值”属性

> ID：11954581
> 
> 赞同：1
> 
> 时间：2012-08-14T14:30:47.163
> 
> 标签：javascript, jquery, html, select-menu

我有一个选择菜单，我从数据库中动态插入一些值：

```
 markup += '<option value=' + option["value"] + '>' + option["alias"] + '</option>'; 
```

但是，某些值包含双引号。为了解决这个问题，我尝试了：

```
markup += '<option value=' + JSON.stringify(option["value"]) + '>' + option["alias"] + '</option>'; 
```

例如，假设值为 6"Rocket（*这实际上是我的问题孩子*）当我尝试使用 Jquery 读取该值时，`.val()`我总是得到 6。

怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:34:05.077

避免这个问题的最简单方法是使用 DOM 脚本而不是插入 HTML 字符串。

```
var sel = $('#some_dropdown');
...
$('<option />', {value: option.value, text: option.alias}).appendTo(sel); 
```

# javascript - javascript - 将变量插入正则表达式

> ID：11954587
> 
> 赞同：4
> 
> 时间：2012-08-14T14:31:10.277
> 
> 标签：javascript, regex

我有以下工作正常，允许表单字段在空白或包含单词“hello”或通过其他验证时有效......

```
var re = new RegExp(/^$|^[hello]|^([FG]?\d{5}|\d{5}[AB])$/); 
```

但我想让“你好”这个词成为一个变量的值。

我已经尝试过了，但它似乎不再起作用：

```
var i = "hello";
var re = new RegExp('/^$|^['+i+']|^([FG]?\d{5}|\d{5}[AB])$/'); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T14:38:40.383

您的代码中有几处错误。

*   `RegExp`需要一个**string**，而不是像您在第一种情况下传递的正则表达式文字。不过，这似乎`RegExp`足够聪明，并且检测到您正在传递正则表达式文字。因此，您的第一个示例是巧合，与以下示例相同：

    ```
    var re = /^$|^[hello]|^([FG]?\d{5}|\d{5}[AB])$/; 
    ```

*   `/`不是表达式的一部分，**它们**是表示正则表达式文字的分隔符，很像引号 ( `'`) 表示字符串文字。因此，如果您将表达式作为字符串传递给`RegExp`，则它不应包含`/`。

*   由于反斜杠也是字符串中的转义字符，因此要为表达式创建文字反斜杠，您必须对其进行转义：`\\`.

*   `[hello]`不测试单词`hello`，它匹配`h`,或`e`,因此它等价于.`l``o``[ehlo]`

尽管如此，您的代码应该是：

```
var i = "hello";
var re = new RegExp('^$|^'+i+'|^([FG]?\\d{5}|\\d{5}[AB])$'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:34:16.623

删除前导和尾随`/`字符，您的 reg exp 不会像您期望的那样。将字符加倍，`\`以便它们被转义。也`[]`意味着匹配任何这些字符。

基本示例

```
var str = "hello world";
var word = "hello"
var re = new RegExp("^" + word + "\\s?")
console.log( str.match(re) ); 
```

# c# - 如何保证 Array 中“引用类型”项的更新对其他线程可见？

> ID：11954589
> 
> 赞同：11
> 
> 时间：2012-08-14T10:15:07.083
> 
> 标签：c#, multithreading, synchronization, volatile

```
private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM];

public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
{
    if (instrument == null || info == null)
    {
        return;
    }
    instrumentInfos[instrument.Id] = info;  // need to make it visible to other threads!
}

public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    return instrumentInfos[instrument.Id];  // need to obtain fresh value!
} 
```

`SetInstrumentInfo`并`GetInstrumentInfo`从不同的线程调用。 `InstrumentInfo`是不可变的类。打电话时我能保证有最新的副本`GetInstrumentInfo`吗？恐怕我会收到“缓存”副本。我应该添加某种同步吗？

声明`instrumentInfos`为`volatile`无济于事，因为我需要将数组项声明为`volatile`，而不是数组本身。

我的代码有问题吗？如果有，如何解决？

**UPD1：**

我需要我的代码在现实生活中工作，而不是符合所有规范！因此，如果我的代码在现实生活中有效，但在某些环境下的某些计算机上“理论上”不能工作 - 那没关系！

*   我需要我的代码在 Windows 下使用最新的 .NET 框架在现代 X64 服务器（当前为 2 个处理器 HP DL360p Gen8）上工作。
*   我不需要在奇怪的计算机或 Mono 或其他任何东西下工作我的代码
*   我不想引入延迟，因为这是 HFT 软件。因此，“微软的实现使用强大的内存模型进行写入。这意味着写入被视为易失性”，我可能不需要添加额外的`Thread.MemoryBarrier`内容，这只会增加延迟。我认为我们可以相信微软将在未来的版本中继续使用“强内存模型”。至少微软不太可能改变内存模型。所以让我们假设它不会。

**UPD2：**

最近的建议是使用`Thread.MemoryBarrier();`. 现在我不明白我必须在哪里插入它才能使我的程序在**标准**配置（x64、Windows、Microsoft .NET 4.0）上运行。请记住，我不想插入“只是为了在 IA64 或 .NET 10.0 上启动您的程序”的行。速度对我来说比便携性更重要。然而，如何更新我的代码以便它可以在任何计算机上工作也会很有趣。

**UPD3**

.NET 4.5 解决方案：

```
 public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
    {
        if (instrument == null || info == null)
        {
            return;
        }
        Volatile.Write(ref instrumentInfos[instrument.Id], info);
    }

    public InstrumentInfo GetInstrumentInfo(Instrument instrument)
    {
        InstrumentInfo result = Volatile.Read(ref instrumentInfos[instrument.Id]);
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:57:42.873

这是一个答案冗长而复杂的问题，但我会尝试将其提炼成一些可行的建议。

**1.简单的解决方案：只访问锁下的instrumentInfos**

避免多线程程序中不可预测性的最简单方法是始终使用锁来保护共享状态。

根据您的评论，听起来您认为此解决方案过于昂贵。您可能需要仔细检查该假设，但如果确实如此，那么让我们看看剩下的选项。

**2.高级解决方案：Thread.MemoryBarrier**

或者，您可以使用 Thread.MemoryBarrier：

```
private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM]; 

public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info) 
{ 
    if (instrument == null || info == null) 
    { 
        return; 
    } 

    Thread.MemoryBarrier(); // Prevents an earlier write from getting reordered with the write below

    instrumentInfos[instrument.Id] = info;  // need to make it visible to other threads! 
} 

public InstrumentInfo GetInstrumentInfo(Instrument instrument) 
{ 
    InstrumentInfo info = instrumentInfos[instrument.Id];  // need to obtain fresh value! 
    Thread.MemoryBarrier(); // Prevents a later read from getting reordered with the read above
    return info;
} 
```

*在写入之前*和读取*之后*使用 Thread.MemoryBarrier可以防止潜在的麻烦。第一个内存屏障防止写入线程重新排序初始化对象字段的写入，将对象发布到数组中，第二个内存屏障防止读取线程重新排序从数组接收对象的读取随后读取该对象的字段。

附带说明一下，.NET 4 还公开了使用 Thread.MemoryBarrier 的 Thread.VolatileRead 和 Thread.VolatileWrite，如上所示。但是，对于 System.Object 以外的引用类型，没有 Thread.VolatileRead 和 Thread.VolatileWrite 的重载。

**3\. 高级解决方案（.NET 4.5）：Volatile.Read 和 Volatile.Write**

.NET 4.5 公开了比完全内存屏障更高效的 Volatile.Read 和 Volatile.Write 方法。如果您的目标是 .NET 4，则此选项将无济于事。

**4.“错误但会起作用”的解决方案**

你永远不应该依赖我要说的话。但是......您不太可能重现原始代码中存在的问题。

事实上，在 .NET 4 中的 X64 上，如果你能重现它，我会感到非常惊讶。X86-X64 提供了相当强大的内存重新排序保证，因此这些发布模式恰好可以正常工作。.NET 4 C# 编译器和 .NET 4 CLR JIT 编译器还避免了会破坏您的模式的优化。因此，允许对内存操作重新排序的三个组件都不会碰巧这样做。

也就是说，发布模式的一些（有些模糊的）变体实际上不适用于 X64 中的 .NET 4。因此，即使您认为代码永远不需要在 .NET 4 X64 以外的任何体系结构上运行，如果您使用正确的方法之一，您的代码将更易于维护，即使该问题目前无法在您的服务器上重现.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:29:07.570

我首选的解决方法是使用关键部分。C# 有一个名为“Lock”的内置语言结构可以解决这个问题。该`lock`语句确保同一时间在该临界区中不能有超过一个线程。

```
private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM];

public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
{
    if (instrument == null || info == null) {
        return;
    }
    lock (instrumentInfos) {
        instrumentInfos[instrument.Id] = info;
    }
}

public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    lock (instrumentInfos) {
        return instrumentInfos[instrument.Id];
    }
} 
```

这确实会影响性能，但它始终可以确保您获得可靠的结果。如果您曾经迭代过`instrumentInfos`对象，这将特别有用；你绝对需要这样`lock`的代码声明。

请注意，这`lock`是一种通用解决方案，可确保任何复杂的语句都可靠且原子地执行。在您的情况下，因为您正在设置一个对象指针，您可能会发现可以使用更简单的构造，如线程安全列表或数组 - 只要这两个函数是曾经接触过的`instrumentInfos`。此处提供了更多详细信息：[C# 数组线程安全吗？](https://stackoverflow.com/questions/1460634/are-c-sharp-arrays-thread-safe)

编辑：关于您的代码的关键问题是：什么是`InstrumentInfo`？如果它派生自，则每次更新共享数组时`object`都需要小心始终构造一个新对象，因为在单独的线程上更新对象可能会导致问题。`InstrumentInfo`如果它是 a `struct`，则该`lock`语句将提供您需要的所有安全性，因为其中的值将在写入和读取时被复制。

编辑 2：从更多的研究来看，似乎确实存在某些情况下，对线程共享变量的更改不会出现在某些编译器配置中。该线程讨论了一个“布尔”值可以在一个线程上设置而从不在另一个线程上检索的情况：[C# 线程真的可以缓存一个值并忽略其他线程上对该值的更改吗？](https://stackoverflow.com/questions/458173/can-a-c-sharp-thread-really-cache-a-value-and-ignore-changes-to-that-value-on-ot)

然而，我注意到这种情况只存在于涉及 .NET 值类型的情况下。如果你看看乔·埃里克森的回应。这段特定代码的反编译说明了原因：线程共享值被读入寄存器，然后从不重新读取，因为编译器优化了循环中不必要的读取。

鉴于您使用的是共享对象数组，并且您已经封装了所有访问器，我认为您使用原始方法是完全安全的。但是：使用锁定的性能损失非常小，几乎可以忘记。例如，我编写了一个简单的测试应用程序，尝试调用`SetInstrumentInfo`和`GetInstrumentInfo`1000 万次。性能结果如下：

*   不加锁，1000万设置和接听：2秒149毫秒
*   带锁，1000万设置和接听：2秒195毫秒

这转化为大致的原始性能：

*   不加锁，每秒可以执行 4653327 次 get & set 调用。
*   使用锁定，您可以每秒执行 4555808 次获取和设置调用。

从我的角度来看，该`lock()`声明值得 2.1% 的性能折衷。根据我的经验，`get`这些`set`方法只占用应用程序执行时间的最小部分。您可能最好在其他地方寻找潜在的优化，或者花费额外的钱来获得更高时钟频率的 CPU。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T19:01:31.973

您可以使用系统级同步原语（如 Mutex）；但那些有点笨拙。Mutex 真的很慢，因为它是内核级别的原语。这意味着您可以拥有跨进程的互斥代码。这不是您需要的，您可以使用性能成本更低的东西，例如在单个进程中工作的`lock`or 。`Monitor.Enter``Monitor.Exit`

您不能使用`VolatileRead`/之类的东西，`Write`或者`MemoryBarrier`因为如果数组中的元素不是原子分配的，您需要使写入集合的行为成为原子的。 `VolatileRead`/`Write`或`MemoryBarrier`不这样做。这些只是给你获取和释放语义。这意味着写入的任何内容对其他线程都是“可见的”。如果您不对集合进行原子写入，则可能会损坏数据——获取/释放语义对此无济于事。

例如：

```
private InstrumentInfo[] instrumentInfos = new InstrumentInfo[Constants.MAX_INSTRUMENTS_NUMBER_IN_SYSTEM];

private readonly object locker = new object();

public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
{
    if (instrument == null || info == null)
    {
        return;
    }
    lock(locker)
    {
        instrumentInfos[instrument.Id] = info;
    }
}

public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    lock(locker)
    {
        return instrumentInfos[instrument.Id];
    }
} 
```

并发收集也会这样做；但是，您会产生成本，因为*每个*操作都受到同步保护。另外，并发集合只知道对元素的访问的原子性，您仍然必须确保应用程序级别的原子性：如果您对并发集合执行以下操作：

```
public bool Contains(Instrument instrument)
{
   foreach(var element in instrumentInfos)
   {
       if(element == instrument) return true;
   }
} 
```

...你至少有几个问题。一，您不会阻止 SetInstrumentInfo 在枚举时修改集合（许多集合不支持此操作并抛出异常）。即集合仅在检索单个元素时“受保护”。第二，集合在每次迭代时都受到保护。如果您有 100 个元素并且并发集合使用了一个锁，那么您将获得 100 个锁（假设要查找的元素是最后一个或根本没有找到）。这将比它需要的慢得多。如果您不使用并发集合，您可以简单地使用 lock 来获得相同的结果：

```
public bool Contains(Instrument instrument)
{
   lock(locker)
   {
      foreach(var element in instrumentInfos)
      {
          if(element == instrument) return true;
      }
   }
} 
```

并拥有一个锁并且性能更高。

**更新** 我认为重要的是要指出，如果`InstrumentInfo`是**struct**，使用`lock`（或其他一些同步原语）变得更加重要，因为它具有值语义，并且每次分配都需要移动与`InstrumentInfo`用于存储其字段的字节一样多的字节（即它不再是 32 位或 64 位本机字引用分配）。即一个简单的`InstrumentInfo`赋值（例如一个数组元素）永远不会是原子的，因此不是线程安全的。

**更新 2**如果替换数组元素的操作可能是原子的（如果`InstrumentInfo`是引用并且 IL 指令`stelem.ref`是原子的，则变成简单的引用赋值）。（即，将元素写入数组的行为与我上面提到的相比*是原子*`instrumentInfos`的）在这种情况下，如果唯一处理的代码是您发布的内容，那么您可以使用`Thread.MemoryBarrier()`：

```
public void SetInstrumentInfo(Instrument instrument, InstrumentInfo info)
{
    if (instrument == null || info == null)
    {
        return;
    }
    Thread.MemoryBarrier();
    instrumentInfos[instrument.Id] = info;
}

public InstrumentInfo GetInstrumentInfo(Instrument instrument)
{
    var result = instrumentInfos[instrument.Id];
    Thread.MemoryBarrier();
    return result;
} 
```

...如果可能的话，这相当于声明数组中的每个元素`volatile`。

`VolatileWrite`不起作用，因为它需要引用它将写入的变量，你不能给它引用数组元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:38:05.627

由于某种我没有时间了解的原因，我无法在任何地方添加任何评论，所以我添加了另一个答案。我带来的不便表示歉意。

UPD3 当然有效，但具有**危险的误导性**。

如果实际需要 UPD3 解决方案，请考虑以下场景：ThreadA 在 CPU1 上运行并对 Var1 进行原子更新。然后 ThreadA 被抢占，调度器决定在 CPU2 上重新调度它。Ooopss... 既然 Var1 在 CPU1 的缓存中，那么根据 UPD3 完全错误的逻辑，ThreadA 应该先对 Var1 进行 volatile 写入，然后再进行 volatile 读取。Oooopsss... 一个线程永远不知道它什么时候被重新调度或者它最终会在哪个 CPU 上结束。因此，根据 UPD3 完全错误的逻辑，线程应该始终执行 volatile writes 和 volatile reads，否则它可能会读取过时的数据。这意味着所有线程都应该始终进行易失性读/写。

对于单线程，更新多字节结构（非原子更新）时问题会更严重。想象一下，有些更新发生在 CPU1 上，有些发生在 CPU2 上，有些发生在 CPU3 上，等等。

这有点让我想知道为什么世界还没有走到尽头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T19:41:01.493

据我多年的设备驱动程序编程所知，易失性用于可以在 CPU 控制之外更改的东西，即通过硬件干预，或用于映射到系统空间（CSR 等）的硬件内存。当线程更新内存位置时，CPU 会锁定缓存行并引发处理器间中断，以便其他 CPU 可以丢弃它。因此，您没有机会读取过时的数据。从理论上讲，如果数据不是原子的（多个四边形），您可能只担心并发写入和读取到相同的数组位置，因为读取器可能会读取部分更新的数据。我认为这不会发生在引用数组上。

我会大胆猜测您要实现的目标，因为它看起来类似于我过去开发的应用程序+驱动程序，用于显示来自手机摄像头测试板的流式视频。视频显示应用程序可以对每一帧应用一些基本的图像处理（白平衡、偏移像素等）。这些设置是从 UI 中 SET 和从处理线程中获取的。从处理线程的角度来看，设置是不可变的。看起来你正试图用某种音频而不是视频做类似的事情。

我在 C++ 应用程序中采用的方法是将当前设置复制到伴随“框架”的结构中。因此，每个帧都有自己的设置副本，将应用于它。UI 线程执行锁定以将更改写入设置，处理线程执行锁定以复制设置。锁是必需的，因为多个四边形被移动了，并且没有锁我们可以确定读取部分更新的设置。这并不重要，因为在流式传输过程中可能没有人会注意到混乱的帧，但如果他们暂停视频或将帧保存到磁盘，那么他们肯定会在黑暗的墙壁中发现一个闪亮的绿色像素。在声音的情况下，即使在蒸汽过程中也更容易发现故障。

那是案例一。我们来看案例二。

当设备被未知数量的线程使用时，如何对设备进行彻底的重新配置？如果你直接去做，那么你肯定会有几个线程从配置A开始，在这个过程中遇到配置B，这在很大程度上意味着死亡。这就是您需要诸如读写器锁之类的东西的地方。也就是说，一个同步原语将允许您等待当前活动完成，同时阻止新活动。这就是读写锁的本质。

案例二结束。现在让我们看看你有什么问题，如果我的猜测是对的。

如果您的工作线程在其处理周期开始时执行 GET 并在整个周期中保持该引用，那么您不需要锁，因为引用更新是原子的，正如 Peter 提到的那样。这是我建议给你的实现，它相当于我在每帧处理开始时复制设置结构。

但是，如果您从整个代码中创建**多个**GET，那么您就有麻烦了，因为在同一个处理周期内，一些调用将返回引用 A，而一些调用将返回引用 B。如果您的应用程序没问题，那么您就是一个幸运的家伙。

但是，如果您对此问题有疑问，则必须修复该错误或尝试通过在其之上构建来修补它。修复这个 bug 很简单：消除多个 GET，即使这会花费你一个小的重写，以便你可以传递引用。

如果要修补错误，请使用 Reader-Writer 锁。每个线程获取一个读取器锁，执行一个 GET，然后保持锁，直到其循环完成。然后它释放读卡器锁。更新数组的线程获取写入器锁，执行 SET 并立即释放写入器锁。

该解决方案几乎可以工作，但是当代码长时间持有锁时它会很臭，即使它是阅读器锁。

然而，即使我们忘记了多线程编程，还有一个更微妙的问题。一个线程在循环开始时获取读锁，在结束时释放它，然后开始一个新的循环并重新获取它。当写入器出现时，线程无法开始其新的循环，直到写入器完成，这意味着直到所有其他正在工作的读取器线程都完成了它们的处理。这意味着一些线程在重新启动它们的周期之前会遇到意外的高延迟，因为即使它们是高优先级线程，它们也会被写入器锁的请求阻塞，直到所有当前读取器也完成它们的周期。如果您正在做音频或其他时间紧迫的事情，那么您可能希望避免这种行为。

我希望我猜得很好，并且我的解释很清楚:-)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-14T19:15:17.533

非常有趣的问题。我希望 Eric 或 Jon 进来澄清事实，但在那之前让我尽力而为。另外，让我先说我***不是***100% 确定这个答案是正确的。

通常，在处理“我是否使该字段易变？”时 问题，你担心这样的情况：

```
SomeClass foo = new SomeClass("foo");

void Thread1Method() {
    foo = new SomeClass("Bar");
    ....
}

void Thread2Method() {
    if (foo.Name == "foo") ...
    ...
    // Here, the old value of foo might be cached 
    // even if Thread1Method has already updated it.
    // Making foo volatile will fix that.
    if (foo.Name == "bar") ...
} 
```

在您的情况下，您并没有更改整个数组的地址，而是更改了该数组中元素的值，该元素是（大概）本机字长的托管指针。这些更改是原子的，但我不确定它们是否保证具有内存屏障（根据 C# 规范获取/释放语义）并刷新数组本身。因此，我建议`volatile`在数组本身上添加一个。

如果数组本身是易失的，那么我认为读取线程不可能从数组中缓存一个项目。您似乎不需要使元素变得易变，因为您没有在数组中就地修改元素 - 您正在用新元素彻底替换它们（至少从外观上看！）。

您可能会遇到麻烦的地方是：

```
var myTrumpet = new Instrument { Id = 5 };
var trumpetInfo = GetInstrumentInfo(myTrumpet);
trumpetInfo.Name = "Trumpet";
SetInstrumentInfo(myTrumpet, trumpetInfo); 
```

在这里，您正在就地更新项目，所以看到缓存发生我不会感到非常惊讶。不过，我不确定它是否真的会。MSIL 包含用于读取和写入数组元素的显式操作码，因此语义可能与标准堆读取和写入不同。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-14T18:35:51.130

或者，您可以使用 System.Collections.Concurrent 命名空间中的一些类，例如`ConcurrentBag<T>`类。这些类被构建为线程安全的。

[http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-14T18:35:57.813

在这种情况下，您可以利用[ConcurrentDictionary 。](http://msdn.microsoft.com/en-us/library/dd287191.aspx)它是线程安全的。

# c# - StreamWriter 中的 IOException

> ID：11954593
> 
> 赞同：0
> 
> 时间：2012-08-14T14:31:37.837
> 
> 标签：c#, .net, io, windows-ce

我正在使用 StreamWriter 序列化来覆盖现有的 xml 文件。下面是我的代码段：

```
using(StreamWriter sw = new StreamWriter("\\hard disk\logs\test.xml"))
{
   this.Serializer.Serialize(sw,this.StateObject);
} 
```

出于某种原因，我不时在 StreamWriter 行上收到 IOException，它非常普遍，当我尝试调试它时它没有内部异常。

StreamWriter 行实际上清除了我的 test.xml 文件的内容并使其变为 0 字节，但同时抛出异常。由于这个异常，序列化从未发生，所以我最终得到了一个 0 字节的文件。我可以使用异常处理程序来纠正这个 0 字节，但我更感兴趣的是解决 StreamWriter 首先抛出异常的原始问题。

你们以前从 StreamWriter 看到过这种行为吗？我确保路径有效，并且我验证它具有权限并且没有其他进程正在访问该文件（即使我会在堆栈跟踪中看到该错误）

我想知道我在 Window CE 上运行的事实与它有什么关系？即使 MSDN 指出 Window CE 支持这个 System.IO 库

编辑：

下面是我的堆栈跟踪，该`CopyData()`函数是包含我的序列化的函数。查看该行的值`System.IO.__Error.WinIOError(Int32 errorCode, String str)`，我看到我的 str 值是 "\hard disk\logs\test.xml" 并且 errorCode 是**2147483648**。

```
at System.IO.__Error.WinIOError(Int32 errorCode, String str)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync, String msgPath)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
at System.IO.StreamWriter.CreateFile(String path, Boolean append)
at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
at System.IO.StreamWriter..ctor(String path)
at Shs.ScanPanel.CA.DataManager.DataManagercr.CopyData(Object data)
at System.Threading.Timer.ring() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:36:52.160

2147483648 是一个未记录的错误。它是 0x80000000 的等价物——这不是一个定义的值。 `StreamWriter`如果文件名无效，只有真正的文档才会发生 IOException。如果文件名无效，则由于某些未记录的原因而发生错误。

我建议尝试直接使用像`FileStream`or `File`( `File.Create`or `File.Open`) 这样的其他类来尝试重现问题，看看它们是否提供了更详细的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T10:38:09.657

我遇到了与描述类似的问题。我也在读/写 xml 文件。原来问题是因为即使我使用 using(var writer = XmlWriter.Create(streamWriter, settings)){ ... }

using 语句在不关闭流并锁定它的情况下处理 xml 编写器。

要解决此问题，您需要更改 xmlWriterSettings CloseOutput = true

# bash - 我想创建一个 shell 脚本，它将创建一个预先格式化的文件并使用文件名作为参数在 vim 中打开它

> ID：11954597
> 
> 赞同：2
> 
> 时间：2012-08-14T14:31:49.460
> 
> 标签：bash, vim

我想创建一个 shell 脚本，它将创建一个预先格式化的文件并在 vim 中打开它。

具体来说，我想创建一个名为的脚本`newperl`，它允许我键入`newperl [filename]`和生成一个预先格式化的文件（使用 cat、echo、> 等）

```
#!/usr/bin/perl
use 5.014; 
```

等等

我知道如何进行所有格式化等。我的问题是将我输入的 [filename]`newperl`作为参数传递给脚本的其余部分。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:35:26.950

无需编写 shell 脚本。Vim 已经有一个钩子，当你打开一个新文件时，它允许你读入一个预先存在的文件。

首先，将您的 perl 模板保存在方便的地方。我保留了一个目录`~/.vim/new_file_templates`，其中包含`skeleton.pl`,`skeleton.py`等。

接下来，将此添加到您的`.vimrc`：

```
autocmd BufNewFile *.pl 0r ~/.vim/new_file_templates/skeleton.pl 
```

这表示当您打开一个`vim`名称与“*.pl”匹配的新文件时，读取`skeleton.pl`新文件第一行的内容。

然后只需输入

```
vim newperl.pl 
```

将使用“skeleton.pl”作为模板打开一个名为“newperl.pl”的新文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:33:56.023

该变量`$1`将自动包含在调用脚本后传递的单词/引号字符串。

# html - TWRequest 的带括号的格式链接

> ID：11954600
> 
> 赞同：0
> 
> 时间：2012-08-14T14:31:56.920
> 
> 标签：html, ios, twitter

我正在尝试在从 iPhone 发出的 twee 中嵌入一个链接。URL 以右括号结尾。该括号被删除并导致 t.co 链接失败。我试过编码，用href标记。似乎没有什么可以将右括号带入生成的 URL。看看我最后尝试了什么，因为字符太多而失败。为什么没有缩短？：

```
 if (tweetsEnabled && twitToSendTo != nil) {
        // Build the string
        NSString *mapURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@,%@+(%@)",newLogEvent.lattitude,newLogEvent.longitude,eventString];
        NSString *encodedURL = [mapURL encodeString:NSUTF8StringEncoding];
        NSString *tweetString = [NSString stringWithFormat:@"%@\n<a href>=\"%@\"></a>",note,encodedURL];
        NSLog(@"%@",tweetString);
        // Send it
        [self performSelectorOnMainThread:@selector(postToTwitterWithString:) withObject:tweetString waitUntilDone:NO];
    } 
```

在最简单的形式中，没有编码、没有标签和没有 +(%@)，链接可以工作。它显示为 t.co 缩短链接，并按预期显示网页。但是我需要括号中的字符串来为标签提供文本，而且看起来应该很容易得到它。

这是 NSLog 的输出：

```
2012-08-14 09:57:43:551 app[2683:34071] -[logger insertLogEvent:withLocation:isArrival:] [Line 641] Arrival logged for Home
<a href>="http%3A%2F%2Fmaps.google.com%2Fmaps%3Fq%3D26.17071170827948%2C-80.16628238379971%2B%28Arrival%29"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:11:08.180

这有效：

```
// Build the string
        NSString *mapURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@,%@+%%28%@%%29",newLogEvent.lattitude,newLogEvent.longitude,eventString];
        NSString *tweetString = [NSString stringWithFormat:@"%@\n%@",note,mapURL]; 
```

我现在不是对整个字符串进行编码，而是对括号进行编码。这篇方便的帖子，[如何向 NSString 添加百分号](https://stackoverflow.com/questions/739682/how-to-add-percent-sign-to-nsstring)，是我找到获取编码百分号的正确方法的地方。

# java - 我希望我的应用程序中的容器能够像 Windows 中的 snap 网格一样在桌面上工作

> ID：11954601
> 
> 赞同：1
> 
> 时间：2012-08-14T14:31:57.820
> 
> 标签：java, xml, swing, jtable, drag

在 iphone UI 或 Windows 桌面中，如果您将应用程序移动到屏幕上的另一个位置，它会根据应用程序的放置位置向后或向前移动应用程序。我想在 java 应用程序中具有此功能，但使用鼠标和 jtables 将是 jpanel 中的药物并以相同的方式重新排序。

我还需要程序知道 jtables 的顺序，因为它将布局保存到 xml 文件中。

我真的不确定从哪里开始，因为我从来没有做过这么复杂的事情。

# jquery - jquery 1.7.2 和 jquery 环形交叉路口形状在 DotNetNuke 中不起作用

> ID：11954602
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:06.620
> 
> 标签：jquery, jquery-plugins, dotnetnuke, dotnetnuke-6

我遇到了一个奇怪的问题，我正在运行 DotNetNuke 6.2.2，并且我在页面上使用了普通的 HTML 模块。在此页面中，我添加了图像，然后使用 jquery roundabout 插件对其进行操作。特别是我试图将图像显示为 jquery 环形交叉路口形状插件的 waterWheel 形状[http://fredhq.com/projects/roundabout-shapes/](http://fredhq.com/projects/roundabout-shapes/)。

问题是这样的，如果我以主机身份登录 DNN，动画会正确显示（waterWheel），但是当我注销时，图像会以标准方式显示：http: [//fredhq.com/projects/roundabout/demos/standard](http://fredhq.com/projects/roundabout/demos/standard)

我已经阅读了 jquery 1.7.2 并且 jquery roundabout 插件和 jquery 1.7.2 存在一些问题，但它似乎已经用 jquery roundabout 版本 2.4.2 和 jquery roundabout 形状版本 2.0 进行了整理，我'现在已经在我的 DNN 解决方案中实现了。

任何解决方案将不胜感激。

亲切的问候，阿尼娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:05:36.177

我将首先查看以 HOST 身份登录时加载的 javascript 文件（页面的 html 源代码）与未登录时加载的文件。

当您未登录时，听起来好像没有加载特定的 JS 文件，但我不知道是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:23:50.100

After much testing and time spent on this issue, I started to remove some js files that I includes on my skin page and low and behold when I removed the

```
<dnn:DnnJsInclude runat="server" FilePath="~/Resources/Shared/Scripts/jquery/jquery.hoverIntent.min.js" /> 
```

tag from my skin page it solved my problem. It also doesn't seem to affect the backend for this skin, in terms of editing content, settings for different modules and such.

So I'm going to assume that this is what I had to remove, although I still don't know exactly what's in this file that would have caused my roundabout shapes jquery file not to fire the waterWheel shape, the only explanation could possibly be a clash in the jquery file.

If anyone could tell me what the issue could have been with this file being included on my skin page with my jquery.roundabout.js and jquery.roundabout-shapes.js files I'd be really grateful.

Thanks for the help Chris!

# javascript - 在 Android 中使用 PhoneGap 下载后无法在画廊中找到文件

> ID：11954604
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:07.587
> 
> 标签：javascript, android, cordova, download

我的 Android 版 PhoneGap-App 中下载的文件有问题。我认为PhoneGap的[下载功能](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer)实际上运行良好。它从 URL 获取文件并将其存储在 SD 卡上。（代码如下）

那么问题出在哪里？当我将 JPG 或 PNG 下载到下载文件夹时，我希望它可以通过本机图库访问。但是这幅画并没有出现在画廊里。要看到它，我必须重新启动手机，或者我必须使用另一个应用程序，如 Astro。

是否有“Refresh_the_native_Gallerie”-Function 或类似的功能？

非常感谢你。

```
try {
     var filePath = 'file:///mnt/sdcard/Download/google.png'; // Correct filePath
     var url = "https://www.google.de/images/srpr/logo3w.png"; //Correct URL

     var fileTransfer = new FileTransfer();

     fileTransfer.download(url, filePath, function(entry) {
         console.log("s3_download download complete: " + entry.
         // Do i need a "Refresh_all_other_Apps"-function here?
     }, function(error) {
     // Normally no Error
         console.log("s3_download download error source " + error.source);
         console.log("s3_download download error target " + error.target);
         console.log("s3_download download error code" + error.code);
     });
} catch (e) {
     console.log("downloadTest ERROR: " + e);
} 
```

* * *

不能这么快回答我自己的问题，只能编辑我的问题。所以这里是答案：

我写了一个小PhoneGap-Plugin，它实际上只是从zapl调用代码。再次感谢。希望它会帮助有同样问题的人。

你可以在这里找到代码：[https ://github.com/philipp-at-greenqloud/pluginRefreshMedia](https://github.com/philipp-at-greenqloud/pluginRefreshMedia)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:07:55.213

我不知道这是否对您在 PhoneGap / JavaScript 上下文中有所帮助：

您的问题是图库将仅显示在设备媒体数据库中编入索引的文件。仅将文件添加到文件系统不会自动将其添加到该数据库。几乎唯一一次重新扫描/更新该数据库是在您重新启动设备或重新安装 sdcard 时（在它与 PC 共享之后，或者如果您将其弹出并放回原位）。

要将文件添加到数据库中，最简单的方法是将[Intent#ACTION_MEDIA_SCANNER_SCAN_FILE](http://developer.android.com/reference/android/content/Intent.html#ACTION_MEDIA_SCANNER_SCAN_FILE)发送到 MediaScanner，让它将您的文件添加到数据库中。完成后，文件将显示在图库中。

Java 代码将是

```
File newImage = new File("/mnt/sdcard/Download/google.png");
Intent scanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
scanIntent.setData(Uri.fromFile(newImage));
sendBroadcast(scanIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:47:59.837

我写了一个小PhoneGap-Plugin，它实际上只是从zapl调用代码。再次感谢。希望它会帮助有同样问题的人。

你可以在这里找到代码：[https ://github.com/philipp-at-greenqloud/pluginRefreshMedia](https://github.com/philipp-at-greenqloud/pluginRefreshMedia)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:34:37.283

这是一个非常需要的插件。我一直在尝试解决此问题，并且该插件很有效。我正在考虑自己开发一个，但你做得很好。我的头痛现在正在消退。这对我有用。

# slimdx - 如何在屏幕坐标中定位纹理四边形？

> ID：11954605
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:08.383
> 
> 标签：slimdx, directx-11

我正在试验不同的矩阵，研究它们对纹理四边形的影响。到目前为止，我已经相当容易地实现了缩放、旋转和平移矩阵——通过对我的位置向量使用以下方法：

```
enter code here
        for(int a=0;a<noOfVertices;a++)
        {
            myVectorPositions[a] = SlimDX.Vector3.TransformCoordinate(myVectorPositions[a],myPerspectiveMatrix);
        } 
```

但是，我想要做的是能够使用世界空间坐标而不是对象空间来定位我的向量。

目前我的位置向量是这样声明的：

```
enter code here
        myVectorPositions[0] = new Vector3(-0.1f, 0.1f, 0.5f);
        myVectorPositions[1] = new Vector3(0.1f, 0.1f, 0.5f);
        myVectorPositions[2] = new Vector3(-0.1f, -0.1f, 0.5f);
        myVectorPositions[3] = new Vector3(0.1f, -0.1f, 0.5f); 
```

另一方面（作为学习矩阵的一部分），我读到我需要应用矩阵来获取屏幕坐标。我一直在查看 SlimDX API 文档，但似乎无法确定我应该使用的那个。

无论如何，希望上述内容是有道理的，并且我想要实现的目标是明确的。我的目标是一个简单的 1024 x 768 窗口作为我的应用程序区域，并希望将我的纹理四边形定位在 10,10。我该怎么做？现在最迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:34:27.313

默认情况下，3d 系统中的屏幕空间是从 -1 到 1（其中 -1,-1 是左下角，1,1 是右上角）。

要将这些单位转换为像素值，您需要将像素值转换为该空间。因此，例如 1024*768 屏幕上的像素 10,30 是：

```
 position.x = 10.0f * (1.0f / 1024.0f); // maps to 0/1
 position.x *= 2.0f; //maps to 0/2
 position.x -= 1.0f; // Maps to -1/1 
```

现在你做

```
 position.y = 30.0f * (1.0f / 768.0f); // maps to 0/1
 position.y = 1.0f - position.y; //Inverts y
 position.y *= 2.0f; //maps to 0/2
 position.y -= 1.0f; // Maps to -1/1 
```

此外，如果您想对四边形应用变换，最好将变换发送到着色器（并在顶点着色器中进行矢量变换），而不是在顶点上进行乘法运算，因为您不需要更新您的每次都使用顶点缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T02:41:37.797

我不熟悉slimdx，但是在原生DirectX中，如果你想在屏幕坐标中绘制一个四边形，你应该将顶点格式定义为Translated，即你直接指定屏幕坐标而不是使用D3D变换引擎来变换你的顶点. 顶点定义如下

```
#define SCREEN_SPACE_FVF (D3DFVF_XYZRHW | D3DFVF_DIFFUSE) 
```

你可以像这样定义你的顶点

```
ScreenVertex Vertices[] =
{
    // Triangle 1
    { 150.0f, 150.0f, 0, 1.0f, 0xffff0000, }, // x, y, z, rhw, color
    { 350.0f, 150.0f, 0, 1.0f, 0xff00ff00, },
    { 350.0f, 350.0f, 0, 1.0f, 0xff00ffff, },

    // Triangle 2
    { 150.0f, 150.0f, 0, 1.0f, 0xffff0000, }, 
    { 350.0f, 350.0f, 0, 1.0f, 0xff00ffff, },
    { 150.0f, 350.0f, 0, 1.0f, 0xff00ffff, },
}; 
```

# c# - 使用 LINQ 和 LINQ 扩展计算字典中的值

> ID：11954608
> 
> 赞同：11
> 
> 时间：2012-08-14T14:32:11.530
> 
> 标签：c#, .net, linq, dictionary, linq-to-objects

我有一本看起来像这样的字典：

```
Dictionary<String, List<String>>

test1 : 1,3,4,5
test2 : 2,3,6,7
test3 : 2,8 
```

如何使用 LINQ 和 LINQ 扩展获取所有值的计数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-14T14:34:12.580

假设您有：

```
Dictionary<String, List<String>> dict = ... 
```

如果你想要列表的数量，它很简单：

```
int result = dict.Count; 
```

如果您想要所有列表中所有字符串的总数：

```
int result = dict.Values.Sum(list => list.Count); 
```

如果要计算所有列表中所有不同字符串的计数：

```
int result = dict.Values
                 .SelectMany(list => list)
                 .Distinct()
                 .Count(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T14:34:44.390

怎么样

```
yourdictionary.Values.Sum(l => l.Count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:38:41.070

如果您想分别计算每个项目：

```
dict.Values.SelectMany(s => s).GroupBy(s => s)
    .Select(g => new {Value = g.First(), Count = g.Count}); 
```

使用您的样品，您将获得：

"1", 1; "3", 2; "4", 1; “5”，1，“6”，1；"7", 1; "8", 1

# php - 打印 PHP 2D 数组

> ID：11954611
> 
> 赞同：3
> 
> 时间：2012-08-14T14:32:15.050
> 
> 标签：php, arrays, multidimensional-array

我有以下代码：

```
<!DOCTYPE html>
<html >
<head>
    <title>Distance</title>
</head>

<body>
    <?php

        $distance = array(
            array(0, 200, 57, 223),
            array(200, 0, 150, 5),
            array(57, 150, 0, 177),
            array(57, 150, 0, 177),
            array(223, 5, 177, 0)
        );

        $cityA = filter_input(INPUT_POST, "cityA");
        $cityB = filter_input(INPUT_POST, "cityB");
        $result = $distance[$cityA][$cityB];

        print "<p> The distance between the 2 cities is $result</p>";

    ?>
</body>
</html> 
```

对于代码：

```
 print "<p> The distance between the 2 cities is $result</p>"; 
```

结果是：

```
The distance between the 2 cities is 177 
```

但是，如果我将其更改为：

```
 print "<p> The distance between the 2 cities is $distance[$cityA][$cityB]</p>"; 
```

结果变为：

```
The distance between the 2 cities is Array[0] 
```

谁能解释为什么当我尝试直接打印 $distance[$cityA][$cityB] 时不将其解释为二维数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:35:15.410

试着用花括号把它包起来。

```
print "<p> The distance between the 2 cities is {$distance[$cityA][$cityB]}</p>"; 
```

# php - 从 PHP 调用 bash 脚本以生成另一个脚本

> ID：11954612
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:18.630
> 
> 标签：php, bash

我正在编写一个应用程序，它从用户那里获取文本输入来生成一个文本文件。将生成的文本文件作为输入的 bash 脚本应该生成另一个脚本作为输出。

我尝试使用 exec 命令，但我不确定它是否有效。我想要这样的东西：

```
exec('generate.sh input.txt generated.sh'); 
```

generate.sh 有两个输入：

1.  `input.txt`文件 - 有来自 PHP 页面的用户输入（文本由 '\n' 分隔）
2.  `generated.sh`- 生成文件的名称（由“generate.sh”生成）。

如何从 PHP 执行 bash 脚本以获得上述输出？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:34:25.357

exec 的整个参数需要是这样的字符串：

```
exec('generate.sh input.txt generated.sh'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:59:07.253

```
$generate = '/path/to/generate.sh';
$input = '/path/to/input.txt';
$generated = '/path/to/generated.sh';

if(file_exists($generate))
{
    chmod($generate, 0755);
    if(file_exists($input))
    {
        exec($generate.' '.$input.' '.$generated);
    }
    else
    {
        echo "Input file not found: ".$input."<br />";
    }
}
else
{
    echo "Generate file not found: ".$generate."<br />";
} 
```

此外，您还可以考虑使用 system()、shell_exec()、passthru() 或 proc_open() 来执行外部命令。

# vb.net - InstallShield：无法提取索引为 0 vb.net 的图标

> ID：11954618
> 
> 赞同：4
> 
> 时间：2012-08-14T14:32:30.333
> 
> 标签：vb.net, visual-studio-2010, installshield

我试图使用 installshield 为我的应用程序制作安装程序，但是当我将图标添加到它时，当我尝试构建它时，我收到错误消息 InstallShield：无法提取索引为 0 的图标

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T03:00:28.380

当然。InstallShield 正在尝试为添加/删除程序和/或快捷方式提取嵌入式资源（图标）。重新编译您的 EXE 以包含一个图标，该消息将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T06:53:03.990

I faced something similar. You need to check that the exe from which the icon will be extracted is present on the path specified in Shortcut/Folder of Install Shield

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T10:13:18.850

我收到此消息的原因通常是因为我没有在快捷方式/文件夹对话框中选择图标文件：

![InstallShield - 快捷方式/文件夹](../Images/4bb2288be472100299edfc2791743891.png)

# javascript - 未捕获的 SyntaxError：意外的字符串

> ID：11954623
> 
> 赞同：1
> 
> 时间：2012-08-14T14:32:37.407
> 
> 标签：javascript, jquery, jquery-events

我很难让以下工作，我从 Chrome 的控制台得到的是：

> 未捕获的 SyntaxError：意外的字符串。

我已尝试将声明更改为，`tmp = event.keyCode`但我无法确定问题所在。`tmp``if``event.keyCode`

```
function showSearching() {
    alert ("Hello World");
}

$('#search').bind('keydown', function() {
    tmp = Number(event.keyCode);
    if ( ( tmp=<"48" && tmp=>"90" ) || ( tmp=<"96" && tmp=>"111" ) || ( tmp=<"186" && tmp=>"222" ) ) {
        showSearching();
    }    
});
```

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<input id="search" type="text">
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:34:38.483

if 语句中关系运算符的语法错误。

改变`=> to >=`和`=< to <=`

```
$('#search').bind('keydown', function() {
    tmp = Number(event.keyCode);
    if ((tmp  <= "48" && tmp  >= "90") || (tmp  <= "96" && tmp  >= "111") || (tmp  <= "186" && tmp  >= "222")) {
        showSearching();
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:36:35.810

更改`=<`为`<=`

```
if ( ( tmp<="48" && tmp>="90" ) 
```

# asp.net - 如何保留呈现的页面以供以后使用（稍后重新发送）

> ID：11954626
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:38.773
> 
> 标签：asp.net, server-side

我有一个带有搜索页面的 asp.net 应用程序，标准和结果显示在同一页面上。**我想保留填充的搜索页面的副本，以便稍后在按钮单击另一个页面时将其重新分发给同一用户。**这是一种“返回搜索”按钮。**我怎样才能做到这一点？**

这是一些上下文：

搜索条件由一些基本控件组成，然后（在回发之后）将结果显示在 GridView 中。我也有一个母版页。就那么简单。

现在考虑以下场景：用户可以通过单击显示详细信息页面的链接来调查结果，并且可以向下钻取包含相关数据的相当多的详细信息页面。如果他/她想返回搜索结果，他/她需要多次单击浏览器的返回按钮。

我想在母版页上提供一个“返回搜索”按钮，允许一键返回到填充的搜索页面。笔记：

*   我不能以任何方式使用浏览器历史记录，因为当用户在另一个选项卡中打开一个详细视图时，它也必须工作。
*   我已经看到[保持 Viewstate 持久并按需检索它，](https://stackoverflow.com/questions/11901411/keeping-the-viewstate-persistent-and-retrieve-it-on-demand)但它希望有一个更简单的解决方案，因为我的网格是分页的，而且我还有多个搜索页面，我想返回到最后一个使用的页面。

谢谢，马塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:50:47.817

我可以提供一些合乎逻辑的方法来解决这个问题，而无需使用专门的 asp.net 功能（如果存在）： 1）有没有办法将搜索字符串保存在 GET 请求中？所以你可以在浏览页面之间以某种方式保存它？2）另一种方法是在某处缓存搜索模式（包含所有过滤器或您需要的东西） - 例如在数据库中，并在获取请求中包含一些键，这将指向此模式。

# php - PayPal 自适应付款错误 540031

> ID：11954631
> 
> 赞同：2
> 
> 时间：2012-08-14T14:32:48.913
> 
> 标签：php, paypal, paypal-sandbox, paypal-adaptive-payments

我正在尝试在 PHP 中设置自适应支付示例，但返回错误 540031。PayPal 显示这是“您无权获取这些预先批准的详细信息”。

首先....我不知道那是什么意思。预先批准？为了什么。第二.....它没有记录如何解决这个错误。

我已经正确设置了我的 API 信息和所有内容。

我的代码可以在这里找到：http: [//pastie.org/private/6age2v0qfunsueqdxk03ba](http://pastie.org/private/6age2v0qfunsueqdxk03ba)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:54:01.197

您似乎正在使用我所做的代码示例并且得到了相同的结果。

最终找到了这个 - [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptivepaymentsnew](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptivepaymentsnew)

这是一个更全面的示例代码库，似乎效果更好

# php - 尝试删除具有动态样式属性的跨度标签

> ID：11954632
> 
> 赞同：0
> 
> 时间：2012-08-14T14:32:53.483
> 
> 标签：php, regex

> **可能重复：**
> [允许用户在 PHP 中提交 HTML](https://stackoverflow.com/questions/1376825/allow-user-submitted-html-in-php)

我正在构建一个将网络文章发布到我们网站的小工具。很多时候，我们的用户直接从 Microsoft Word 复制并粘贴到我的所见即所得编辑器中。编辑器复制所有 Word 隐藏标签。

我要解决的主要问题是删除`<span>`. `<span>`Word 经常在标签后面抛出很多样式属性。例如：`<span style=" Arial, sans-serif; font-size: 10pt; ">`。

有没有办法删除整个跨度标签？正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:40:02.253

如果您准备使用正则表达式，您可以尝试类似

```
"/^(<span)+([A-Za-z0-9=,;:])*(>)+$/" 
```

捕获`(<span)+(>)+`开始和结束标记以及中间部分应捕获内联声明的任何属性的位置。然后你可以使用 php preg_replace 用空引号或类似的东西替换所有出现的这种模式。

[http://www.php.net/manual/en/function.preg-replace.php](http://www.php.net/manual/en/function.preg-replace.php)

# standards - Codesniffer 标准无法正常工作

> ID：11954634
> 
> 赞同：0
> 
> 时间：2012-08-14T14:33:08.630
> 
> 标签：standards, pear, codesniffer

我最近一直在研究一个编码标准，并想根据这个标准使用代码嗅探器来检查我的文件。因为我是 Codesniffer 的新手，所以我想在创建自己的标准之前先测试标准。

然而，我遇到了代码嗅探器的问题，我不确定这是一个错误还是我做错了什么。

`pear install CodeSniffer`在我尝试在我的测试文件上使用不同的标准之后，我使用命令行命令安装了 pear install code sniffer ：

```
<?php 
public class Application_IndexController() {

    DEFINE WEBSITE_URL = 'https://localhost/';

    public $avast = '';
    private $_ye = '';
    protected $_swabs = '';

    public setAvast($avast){
        $this->avast = $avast;
    }

    private getYe(){
        return $this->_ye;
    }

    protected changeProtected($_swabs){
        if($_swabs && $this->swabs) {
            $this->_swabs = $swabs;
        } elseif($swabs) {
            $this->_swabs = $swabs;
        } else {
            return null;
        }
    }

    public iDontKnowWhatImDoing($harhar) {
        Switch($harhar) {
            case 1:
                $yargh = "Avast ye "
                       . "swabs!";
                echo $yargh;
                break;
            default:
                $array = array(
                               "Sailor 1", "Sailor 2", "Sailor 3", 
                               "Sailor 4", "Sailor 5", "Sailor 5"
                               );
                break;
        }
    }
}
?> 
```

可以说我在写这个文件时心情很傻，但无论如何它都实现了它的目的。

我已经在这个文件上运行了所有标准，其中只有几个真正起作用，另一个似乎一直返回相同的错误。

'generic'、'psr1' 和 'psr2' 标准工作得非常好，但 'phpcs'、'pear'、'mysource'、'zend' 和 'squiz' 标准都会导致一个错误：

```
$stackPtr is not a class member var 
```

包括 phpcs 自己的标准在内，8 个中有 5 个不起作用，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:24:47.710

首先，您收到该错误消息的原因是您的文件存在解析错误。类定义不正确，`DEFINE WEBSITE_URL = 'https://localhost/';`也不是有效的 PHP 代码。`function`在可见性关键字之后也缺少所有函数声明。

检查它运行的解析错误的最佳方法`php -l /path/to/code`（这是一个小写的 L）。

PHPCS 实际上并不像 PHP 那样解析您的文件。相反，它是一个静态代码分析器，但它确实会遇到代码看起来错误且无法继续的情况。这只是其中一种情况。

其次，某些标准有效而某些无效的原因是因为所有标准都执行了不同的检查。许多标准共享这些检查。在这种特殊情况下，一些标准对变量名进行了检查，但由于函数声明不正确而失败。他们无法真正弄清楚失败的原因，因为他们在文件中太远了（121 个令牌），但他们知道出了点问题。我知道错误消息不是很有帮助，但足以让您知道发生了一些不好的事情并且文件存在问题。在这种情况下，解析错误。

总而言之：如果您修复了解析错误，所有 PHP_CodeSniffer 标准都将在您的代码上运行。

展望未来，`php -l`在 PHPCS 检查之前使用命令或将其包含到构建脚本（如果您使用持续集成）中检查代码中的解析错误总是有用的。

如果有帮助，这是您修复了解析错误的代码：

```
<?php
define('WEBSITE_URL', 'https://localhost/');
class Application_IndexController {

    public $avast = '';
    private $_ye = '';
    protected $_swabs = '';

    public function setAvast($avast){
        $this->avast = $avast;
    }

    private function getYe(){
        return $this->_ye;
    }

    protected function changeProtected($_swabs){
        if($_swabs && $this->swabs) {
            $this->_swabs = $swabs;
        } elseif($swabs) {
            $this->_swabs = $swabs;
        } else {
            return null;
        }
    }

    public function iDontKnowWhatImDoing($harhar) {
        Switch($harhar) {
            case 1:
                $yargh = "Avast ye "
                       . "swabs!";
                echo $yargh;
                break;
            default:
                $array = array(
                               "Sailor 1", "Sailor 2", "Sailor 3", 
                               "Sailor 4", "Sailor 5", "Sailor 5"
                               );
                break;
        }
    }
}
?> 
```

# git - git rebase 删除提交

> ID：11954635
> 
> 赞同：4
> 
> 时间：2012-08-14T14:33:13.623
> 
> 标签：git, repository, gerrit

我的 git 存储库中有以下更改历史记录：

```
---X---Y---Z---A---B---C 
```

我从代码 Z 的基础开始工作，并进行了三个更改 A、B 和 C。这些更改中的每一个都已作为单独的评论上传到 Gerrit 上，并且每个都取决于之前的更改。

经过审查，我想删除更改 A，以便我的更改历史记录是：

```
---X---Y---Z---B---C 
```

什么是正确的流程`git rebase -i`并`git commit`让它发挥作用？

我假设如下：

1.  用于`git rebase -i HEAD~3`显示最后三个提交。这显示了文件内容：

    `pick 1234567 Commit A message`
    `pick 1a2b3c4 Commit B message`
    `pick abcdefg Commit C message`

2.  然后我可以删除第一行并保存文件以删除第一个提交。

3.  这就是我卡住的地方......如果我尝试，`git commit --amend`我只能修改 C 的提交。因此我不知道如何将我的 rebase 更改推送到 Gerrit 以供审查使用`repo upload .`或`git push`

我使用的是 Gerrit 2.2，所以评论页面上没有变基按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:56:59.540

以下步骤现在对我有用：

1.  使用 git rebase -i HEAD~3 显示最后三个提交。这显示了文件内容：

    `pick 1234567 Commit A message`
    `pick 1a2b3c4 Commit B message`
    `pick abcdefg Commit C message`

2.  然后我可以删除第一行并保存文件以删除第一个提交。

3.  A`git log`现在显示了我的 B 和 C 在 Z 的基础之后的变化，以及它们的新 SHA-1 值

4.  然后我可以将每个更改单独推送到他们各自的评论中：

    `git push ssh://myserver:29418/project SHA1_of_B:ref/changes/123`
    `git push ssh://myserver:29418/project SHA1_of_C:ref/changes/789`

其中`123`和`789`分别是变更 B 和 C 的审查编号。我的 B 和 C 更改每个都有新的补丁，这些补丁被正确地重新定位。

原来我的问题只是理解我必须`git push`单独进行两个更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:38:33.640

在步骤 2) 之后，您就完成了变基。在选择哪个提交后选择。您可能会遇到合并冲突。修复它们`git mergetool`并执行`git rebase --continue`

编辑：因为变基确实改变了历史。我不知道格瑞特对此有何反应。您可以尝试添加 force 标志`git push -f`，但请记住，由于历史更改，这很危险！

# ruby-on-rails - Rails 关联访问

> ID：11954637
> 
> 赞同：3
> 
> 时间：2012-08-14T14:33:18.533
> 
> 标签：ruby-on-rails, ruby

我希望我能更好地描述这一点，但这是我所知道的最好的。我有两个班汽车和颜色。每个都可以通过关联类 CarColors 彼此拥有多个。关联设置正确我对此持肯定态度，但我似乎无法让它发挥作用：

```
@carlist = Cars.includes(:Colors).all

@carlist.colors 
```

**错误**

```
@carlist[0].colors 
```

**作品**

我的问题是如何在不像成功示例中那样声明索引的情况下迭代@carlist？以下是我尝试过的一些事情，但也失败了：

```
@carlist.each do |c|
c.colors
end

@carlist.each_with_index do |c,i|
c[i].colors
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:47:59.823

您的第一个示例失败，因为`Car.includes(:colors).all`返回了一个汽车数组，而不是一辆汽车，所以以下将失败，因为`#colors`没有为数组定义

```
@cars = Car.includes(:colors).all
@cars.colors #=> NoMethodError, color is not defined for Array 
```

以下将起作用，因为迭代器将具有 car 的实例

```
@cars.each do |car|
  puts car.colors # => Will print an array of color objects
end 
```

`each_with_index`也可以，但有点不同，因为第一个对象与每个循环汽车对象相同，第二个对象是索引

```
@cars.each_with_index do |car, index|
  puts car.colors # => Will print an array of color objects
  puts @cars[index].colors # => Will print an array of color objects
  puts car == @cars[index] # => will print true
end 
```

# ruby-on-rails - 用 rspec 和 capybara 测试 javascript 给我一个超时错误

> ID：11954638
> 
> 赞同：0
> 
> 时间：2012-08-14T14:33:26.867
> 
> 标签：ruby-on-rails, rspec, capybara

我正在尝试测试一个使用 Javascript 进行 ajax 调用的页面。

我可以看到控制器中的操作被正确调用，并且 200 被发送回 html 页面。但不知何故，在javascript中，触发了错误函数而不是成功函数...... Javascript工作正常，但就像它不等待来自服务器的答案......来自服务器的答案被发送回几毫秒的事。

我没有在 Rails 中使用数据库。

我注释掉了`config.use_transactional_fixtures = true`

在我的配置中，我添加了以下内容：

```
Capybara.register_driver :selenium do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

Capybara.javascript_driver = :chrome 
```

使用最新的 rails 版本、最新的 Capybara 版本和最新的 rspec 版本...

很难调试问题，因为我不知道幕后到底发生了什么。我认为这与超时问题有关，但我不确定。

顺便说一句，我的 javascript 看起来像这样：

```
$.ajax({
    type:'POST',
    dataType:'json',
    url:url,
    data:data,
    silent:true,
    loader:$("input#x, input#y").next(".loader"),
    success:function (response) {
        ...
    },
    error:function (jqXHR, textStatus, errorThrown) {
        redirectToLoginPage(jqXHR.status);
    }
}); 
```

任何人都可以向我指出一个 rspec 和 capybara 进行 Ajax 调用的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:56:14.167

你需要改变你的：

```
Capybara.javascript_driver = :chrome 
```

对于可用的驱动程序之一：:rack_test, :selenium, :webkit, :webkit_debug

例如：

```
Capybara.javascript_driver = :selenium 
```

# mysql - 在我的 JUnit 测试中无法破解“java.sql.SQLException：没有合适的驱动程序”

> ID：11954644
> 
> 赞同：0
> 
> 时间：2012-08-14T14:33:39.380
> 
> 标签：mysql, hibernate, junit, driver

我正在使用 Hibernate 4.1.5.SP1、Hibernate Validator 4.3.0.Final 和 JUnit 4.8.1。当我运行我的 JUnit 测试时，我在尝试设置我的事务时收到异常“java.sql.SQLException：没有为 jdbc:mysql://localhost:3306/myproject 找到合适的驱动程序”。

```
@Before
public void setUpDAOTest() { 
    final Configuration configuration = new Configuration();
    configuration.configure("junit_hibernate.cfg.xml")
        .setProperty("javax.persistence.validation.mode", "none")
        .setProperty("hibernate.show_sql", "false");
    final ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
    sessionFactory = configuration.buildSessionFactory(serviceRegistry);
    session = sessionFactory.openSession();
    ThreadLocalSessionContext.bind(session);
    tx = session.beginTransaction();    // exception thrown here 
```

异常表明我的 URL 格式不正确，但对我来说似乎是正确的。此外，我已验证数据库正在运行，并且可以在命令行上连接到它。我的休眠配置文件是

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/myproject</property>
        <property name="hibernate.connection.username">myproject</property>
        <property name="hibernate.connection.password">password</property>
        <property name="hibernate.connection.pool_size">10</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <property name="javax.persistence.validation.mode">none</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <mapping class="com.follett.fdr.myproject.model.UserRole" />
        <mapping class="com.follett.fdr.myproject.model.Organization" />
        <mapping class="com.follett.fdr.myproject.model.Product" />
        <mapping class="com.follett.fdr.myproject.model.State" />
        <mapping class="com.follett.fdr.myproject.model.Country" />
        <mapping class="com.follett.fdr.myproject.model.AccessCode" />
        <mapping class="com.follett.fdr.myproject.model.Contract" />
        <mapping class="com.follett.fdr.myproject.model.TrainingLink" />

    </session-factory>
</hibernate-configuration> 
```

所以我很难过。我还能做错什么？这是完整的堆栈跟踪...</p>

```
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/myproject
    at java.sql.DriverManager.getConnection(DriverManager.java:602)
    at java.sql.DriverManager.getConnection(DriverManager.java:154)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:193)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:281)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1396)
    at org.mainco.subco.orgsclient.dao.AbstractDaoTest.setUpDAOTest(AbstractDaoTest.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:39:13.010

你的类路径中应该有 mysql 驱动程序 jar，所以[下载它](http://dev.mysql.com/downloads/connector/j/)并将它包含在你的类路径中

如果您使用 maven 构建，请从[此处获取定义](http://mvnrepository.com/artifact/mysql/mysql-connector-java)

# php - 如何在php中生成0.3到0.35之间的随机数

> ID：11954648
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:33:53.383
> 
> 标签：php, random, numbers

我尝试使用以下

```
rand()/getrandmax()*0.35+0.3 
```

但它仍然会生成大于最大限制的数字。没有违反下限，但违反了最大值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:36:03.620

要更正您自己的代码，您需要添加下限并将随机值 ( `rand()/getrandmax()`) 乘以上限和下限的差 (0.35 - 0.3)。

```
rand()/getrandmax()*0.05+0.3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:38:07.527

我会用

```
 $min = 30;
   $max = 35;
   $accuracy = 1000000;

   $random_number = rand($min*$accuracy, $max*$accuracy)/(100*$accuracy); 
```

正如 PHP 手册所说：

```
 rand(int $min, int $max) 
```

[http://www.php.net/manual/en/function.rand.php](http://www.php.net/manual/en/function.rand.php)

如果你使用 PHP < 4.2.0 至少调用 srand(); 每次创建随机数之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:36:27.153

你的间隔是 0.05，所以你应该除以 20（或乘以 0.05）而不是乘以 0.35

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T14:35:42.847

```
$min = .3;
$max = .35;

echo rand($min, $max); 
```

这是我知道的最简单的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T14:37:53.643

这个函数的原型是：

```
int rand ( int $min , int $max ) 
```

所以只需调用：

```
rand (0.3, 0.35 ); 
```

# c++ - 如何将 XMMATRIX 和 XMVECTOR (DirectX11) 相乘？

> ID：11954656
> 
> 赞同：15
> 
> 时间：2012-08-14T14:34:16.227
> 
> 标签：c++, vector, matrix, directx, directx-11

我想将向量和矩阵相乘。向量是`XMVECTOR`类型，矩阵是`XMMATRIX`类型。我在 DirectX SDK 中找不到任何功能来做到这一点。但只有`XMMatrixMultiply`两个矩阵，向量相同 - 没有`(vector, matrix)`功能。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T14:36:45.710

您正在寻找的功能是[XMVector3Transform](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.transformation.xmvector3transform%28v=vs.85%29.aspx)（或[XMVector4Transform](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.transformation.xmvector4transform%28v=vs.85%29.aspx)，这取决于您想要什么）。

# .htaccess - zend 框架 htaccess 在生产服务器中工作，但在 xampp 中不工作

> ID：11954657
> 
> 赞同：1
> 
> 时间：2012-08-14T14:34:17.510
> 
> 标签：.htaccess, zend-framework

我正在使用这个在生产服务器中工作但在 xampp 中不工作的 htaccess 代码，我可以知道为什么

```
RewriteEngine On
RewriteRule ^\.htaccess$ – [F]
RewriteCond %{REQUEST_URI} =”"
RewriteRule ^.*$ /public/index.php [NC,L]
RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ – [NC,L]
RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T17:47:02.620

即使将非 ascii 双引号更改为 ascii 双引号，该条件也应该始终失败`=""`，因为 apache 将尝试将 URI（始终以斜杠开头）与字符 匹配`=`。尝试更改以下 2 行：

```
RewriteCond %{REQUEST_URI} =”"
RewriteRule ^.*$ /public/index.php [NC,L] 
```

至：

```
RewriteRule ^$ /public/index.php [L] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T15:49:36.033

在第三行你有一个非法字符：

```
RewriteCond %{REQUEST_URI} =”" 
```

应该

```
RewriteCond %{REQUEST_URI} ="" 
```

# ios - ios - 无法从 UIWebView 获取 css 文件样式以在 HTML 中呈现

> ID：11954661
> 
> 赞同：2
> 
> 时间：2012-08-14T14:34:33.070
> 
> 标签：ios, ios5, uiwebview

如果我创建它们呈现的内联样式，但是当尝试在 xCode 中引用同一组和目录中的 css 文件时，它们不会呈现。

这是我所做的：

```
<html>
<head>
    <link href="main.css" rel="stylesheet" type="text/css" /> 
</head>

<body>

    <h1>Hello, world! Learn</h1>

    <p>
    <a href="myscheme://advertising" class="buttonStyle">Click me!</a>
    </p> 
</body>
</html> 
```

然后我有一个名为 main.css 的 css 文件，如下所示：

```
body {background-color:#b0c4de;}
p {background-color:#e0ffff;} 
```

有谁知道为什么这不会渲染css？我是否遗漏了 HTML 标头中的重要内容？

这是我首先调用 HTML 的方式：

```
- (void)viewDidAppear:(BOOL)animated
{  
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"learn" 
                                                         ofType:@"html"];

    NSString* htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
    [theWebView loadHTMLString:htmlString baseURL:nil];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:htmlFile]];

    [theWebView loadRequest:request];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:43:55.527

问题出在

```
[theWebView loadHTMLString:htmlString baseURL:nil]; 
```

由于 baseURL 为 nil，因此 Web 视图无法确定您的 css 文件在哪里。无需手动创建数据并加载数据，而是将 HTML 文件的路径直接传递给 UIWebView：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"learn" ofType:@"html"];
NSURL *url = [NSURL fileURLWithPath:htmlFile];
NSURLRequest *rq = [NSURLRequest requestWithURL:url];
[webView loadRequest:rq]; 
```

# database - 维护开发数据库的建议

> ID：11954663
> 
> 赞同：6
> 
> 时间：2012-08-14T14:34:37.043
> 
> 标签：database, replication

现在，开发人员都有自己的本地开发环境，其中包含生产数据库的快照——他们可以扭曲、搅动和破坏数据，而不会影响除他们自己以外的任何人。

这些快照开始变大，它们的数据导入开始需要将近一个小时。

在维护开发数据方面有什么更好的建议吗？开发数据可以被撕开以进行潜在的更改，然后如果更改想法不好，则需要将其重新组合在一起，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:54:03.160

我尝试使用以下方法：

开发人员维护一个受版本控制的基线脚本，并从头开始设置数据库模式。它创建模式就像它存在于生产数据库中一样。

他们还维护一个“脚本”来设置测试数据。这个“脚本”实际上使用了生产类，有时还使用了一些 DSL。为了合理快速，脚本只生成最少的测试数据。我建议将其作为 done 定义的一部分，以便为任何新功能构建创建一些测试日期。

开发人员可以在他们的数据库（或数据库模式）上随意运行这些脚本。第一个脚本也用作运行自动数据库测试的基础。

开发人员所做的任何工作的结果都是一个迁移脚本。即可以应用于生产数据库以使其达到新的所需状态的脚本，包括对数据的更新。

这些迁移可以在生产数据库的快照上进行测试。生产数据库的快照也用于运行负载和性能测试。

仅对于我使用数据库特定工具的快照。大多数其他一切都是用主要的编程语言（对我来说是java）编写的，所以开发人员使用它感觉很舒服。

我经常遇到对这种方法的抵制（“脚本太多”、“数据库太多”、“我不想使用版本控制，因为我的数据库建模工具不支持它”）。但是除了大量的手动工作之外，我真的没有看到其他选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:03:05.323

通常，作为开发人员，您需要从开发数据库设置中获得一些东西。

您希望它易于使用 - 进行更改、保持这些更改版本并将它们应用到其他环境应该是简单的。

你想要有代表性的数据——并且让这些数据是可预测的。例如，如果您正在构建一个发票系统，您希望客户具有已知的信用额度，这样您就可以编写测试用例来跟踪他们在开具发票、付款等方面发生的情况。（集成测试，而不是单元测试） .

您希望能够查询有代表性的数据量，以便在开发和生产中出现性能问题。

您永远不会希望能够影响“真实”数据 - 例如，您希望电子邮件地址和姓名是匿名的，您希望重新设置密码。

[持续数据库集成](http://osherove.com/blog/2004/11/12/article-continuous-database-integration-by-peter-hancock.html)为其中大部分提供了解决方案 - 并且还解决了“为开发环境设置数据库需要一个小时”的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:40:44.867

以我的经验，为每个环境拥有一个集中的 DB+数据：开发、测试+集成和生产一直是最好的方法。

*   **开发：**让开发人员为所欲为。如果需要类似生产的数据，请混淆/删除敏感数据。这个数据库越轻量级，越便于你移动、维护和备份。
*   **测试：**用它来模拟生产环境，让测试人员输入/检索所有需要的数据，但只能通过您的应用程序接口。此环境还允许您在将部署发送到生产之前对其进行测试，您不希望糟糕的数据库安装程序使生产应用程序处于不可用状态。如果需要，您可以使用生产数据输入此环境，但也可以混淆/删除敏感数据。您可以使用高容量在性能问题投入生产之前发现它们。
*   **生产：**不要管您的生产数据/环境，您不希望敏感数据落入坏人之手或数据库错误配置允许开发人员意外更改数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:39:07.583

我也有同样的情况。我的想法是将存档数据移动到只读文件组，这样我只需要备份和恢复一次。非存档数据会小得多，并且可以更频繁地复制到备份存储和开发机器。

当然，这只有在可以将大部分数据库大小拆分为只读文件组时才有效。

另一个想法是在开发机器上恢复一次，然后使用数据库快照快速恢复到干净状态。我发现一个特别有用。

# java - 像在 css 中一样在 xml 中更改 br margin-bottom

> ID：11954665
> 
> 赞同：0
> 
> 时间：2012-08-14T14:34:38.713
> 
> 标签：java, android, css, xml

```
<string name="text">
• Text &lt;br />
• Text2 &lt;br />
• Text3 &lt;br />
</string> 
```

我在strings.xml 中使用它。它工作正常，但我希望在 text 和 text2 之间有更多空间。在 css 中我只会使用`margin-bottom`. 我可以在这里做类似的事情吗？我试过`<p></p>`了，但它有太多的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:10:09.903

XML 不是一种显示语言，只是一种记录数据的方式。您可以将记录在 XML 中的数据输入到另一种介质中并在那里设置样式。

# haskell - Haskell 中的半依赖动作

> ID：11954667
> 
> 赞同：4
> 
> 时间：2012-08-14T14:34:55.010
> 
> 标签：haskell, monads

我正在寻找一种 Haskell 设计，以某种方式组成一串单子动作（通常是 IO），以后的动作依赖于以前的动作，但在某些情况下可以在它们完成之前执行。

到目前为止我想出的解决方案是：

```
type Future m a = m (m a) 
```

读取：一个单子动作，它启动某个过程并返回一个动作，该动作将返回该过程的结果（可能通过等待该过程完成）。

所以在某些链中`a >>= b >>= c`b 得到一个返回 a 的结果的动作。如果 b 评估此操作，它会等待 a 完成，否则它将并行运行。这也意味着，如果某个动作不需要前一个动作的结果作为参数，那么根据定义它不依赖于它，因此依赖关系是显式的。

一些示例代码：

```
date :: Future IO String   -- long process to find out the date
date = do
    print "attempting to get date"  -- will usually start some thread or process to compute the date
    return (print "today")  -- will wait for this thread or process and return the computed date

main = do
    d <- date   -- starts recieving the date
    print "foo" -- some other process
    d >>= print -- waits until the date has been computed and prints it out 
```

输出：

```
"attempting to get date"
"foo"
"today" 
```

存在一个问题：如果一个动作决定等待前一个动作，它将始终依赖于之前的所有其他动作（在我的情况下）。但是在上面的例子中，如果 c 决定等待 b 但 b 没有决定等待 a，c 可能会在 a 完成之前开始，这不应该发生。

作为解决方案，我编写了另一个组合运算符：

```
(>=>) :: Monad m => Future m a -> (m a -> Future m b) -> Future m b
a >=> f = do
    r1 <- a
    r2 <- f r1
    return (r1 >> r2) 
```

所以这将结合“等待动作”并且`a >=> b >=> c`工作得很好，如果 c 等待 b 这个等待动作也会等待 a。然而，这种方法还有另一个问题（除此之外，您需要记住使用 >=> 而不是 >>=）：可能会多次评估等待操作。如果 b 等待 a 并且 c 等待 b，则等待 b 将连接到等待 a，因此等待 a 将被执行两次。

实际问题在于 >=>:`f r1`可能会评估 r1 在这种情况下，它不需要在 return 语句中使用 r2 进行排序（因为它已经被执行，因此 a 已经完成）。但它也可能不是，我不知道。

所以我基本上想要的正是这个，但不可能多次运行等待操作。不幸的是，我在功能设计方面不是很有经验。

所以我希望你能以某种方式启发我如何增强或改变我的设计，或者为我指出一种不同的、更灵活的方法。

**编辑**根据到目前为止的答案，我想进一步澄清我真正想要的内容：

我不想推迟（甚至跳过）动作的执行，我也不需要线程或类似的并行特性。实际上我正在调用外部进程。一个例子是

```
backup :: Future IO ExitCode
backup = do
    pid <- startProcess "backup"
    return (waitForProcessAndGetExitCode pid) 
```

当我现在链接类似的操作时`backup >=> otherAction`，otherAction 可以在备份运行时运行（总体上节省了很多时间）。但是 otherAction 可能需要完成备份，这种情况下它可以使用它的参数等待备份并检查是否成功。无论哪种方式，都必须执行备份。

我现在正在寻找一个很好的通用解决方案，最好不要与 IO monad 绑定。

**更新**我找到了一个适合我的解决方案。我在下面的单独答案中对其进行了描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:57:29.477

我很确定你真的想要这个签名：

```
(>>=) :: Future m a -> (a -> Future m b) -> Future m b 
```

以下是您实现所需内容的方式：

```
import Control.Concurrent
import Control.Monad
import Control.Monad.Trans

newtype Future m a = Future { runFuture :: m (m a) }

instance (Monad m) => Monad (Future m) where
    return = Future . return . return
    m >>= f = Future $ do
        fut1 <- runFuture m
        return $ join $ join $ liftM (runFuture . f) fut1

instance MonadTrans Future where
    lift = Future . liftM return 
```

换句话说，`Future`它是一个 monad 转换器，它的实现没有什么是专门针对`IO`monad 的。但是，以下示例将展示如何将它与`IO`monad 结合使用来链接期货：

```
parallel :: IO a -> Future IO a
parallel m = Future $ do
    v <- newEmptyMVar
    forkIO $ m >>= putMVar v
    return $ takeMVar v

future1 = parallel $ do
    threadDelay 1000000
    putStrLn "Hello, World" 
    return 1
future2 n = parallel $ do
    threadDelay 1000000
    print n
    return 2
future3 = future1 >>= future2

main = do
    f <- runFuture future3
    putStrLn "I'm waiting..."
    r <- f
    print r 
```

我还没有证明它满足 monad 定律或 monad 转换器定律，但我会尝试做到这一点，我会告诉你它是否检查出来。在那之前，那里的某个地方可能会放错`join`地方。

编辑：不！差远了。它绝对不满足单子定律。我不知道我是否接近，但现在假设这个答案是不正确的。但是，我现在有点好奇，想知道这是否可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:10:03.850

如果你添加你有一个`MonadIO`实例的限制`m`，你可以做这样的事情（从内存中，未经测试）：

```
share :: IO a -> IO (IO a)
share m = do
    ref <- newIORef Nothing
    let reader = do
          cached <- readIORef ref
          case cached of
            Just a -> return a
            Nothing -> m >>= \a -> writeIORef ref (Just a) >> return a
    return reader 
```

您可以`share2 :: IO a -> IO a`通过将 IORef 创建包装在 中来将其更改为`unsafePerformIO`，并且很容易推广到任何`MonadIO`实例。

但是，根据您的问题，使用类似`threads`or的东西可能会更好`IVar`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:57:38.127

`f`也许一种可能性是在需要其输出之前拒绝运行：

```
mma >=> fab = return $ do
    ma <- mma
    b  <- fab ma
    b 
```

根据您的需要，首先运行可能很重要`mma`：

```
mma >=> fab = do
    ma <- mma
    return $ do
        b <- fab ma
        b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T18:14:26.057

对于某些情况，当您想激发一些线程并在某个时刻收集结果时，请检查[http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent-SampleVar.html](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent-SampleVar.html)和[http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent.html#g:2](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent.html#g:2)，因为它们似乎相关

对于某些情况，当您需要按需执行操作时，您可能会发现此代码很有用 未在 GHC 中检查，但在拼写错误修复后应该可以工作

```
module Promise (SuspendedAction, createSuspendedAction, getValueFromSuspendedAction)
import Data.IORef

data Promise a = Suspended (IO a) | Done a

data SuspendedAction = SA (IORef (Promise a))

createSuspendedAction :: m a -> m (SuspendedAction a)
createSuspendedAction act = newIORef (Suspended act)

readSuspendedAction :: SuspendedAction a -> m a
readSuspendedAction (SA ref) = readIORef ref >>= \suspended -> case suspended of
  Done a -> return a
  Suspended sact -> sact >>= \rv -> writeIORef ref (Done rv) >> return rv 
```

顺便说一句，仔细检查 hackage，有一个包允许在尊重其顺序的同时懒惰地执行 IO 操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T16:34:19.013

我自己找到了一个解决方案，尽管不完全是我遇到的问题。

我意识到我必须事先以某种方式知道一个动作是否依赖于前一个动作。我尝试了各种方法，最终想出了我现在要描述的东西。我的解决方案允许编写类似的代码

```
a :: Process IO x ()
a = independant $ do
    print "start a"
    return $ print "end a"

b :: Process IO x Int
b = independant $ do
    print "start b"
    return $ print "end b" >> return 0

c :: Process IO Int ()
c = dependant $ \x -> do
    print $ "start c with " ++ show x
    return $  print ("end c, started with " ++ show x)

chain = a >~ b >~ c
main = exec chain

-- outputs:
"start a" "start b" "end a" "end b" "start c with 0" "end c, started with 0" 
```

（下面有更多示例）

我使用了以下类型

```
type Future m a = m (m a)
type Action m a b = a -> Future m b
type Process m a b = forall c. Action m c a -> Action m c b  -- will need -XRank2Types 
```

使用以下原语：

```
-- sequences f after g, f is dependant of g and gets its result
-- dependant :: Monad m => Action m a b -> Action m c a -> Action c b
dependant :: Monad m => Action m a b -> Process m a b
dependant f g a = join (g a) >>= f

-- sequences f after g, f is independant of g
independant :: Monad m => Future m a -> Process m b a
independant f g a = do
    w1 <- g a
    w2 <- f
    return (w1 >> w2)

-- concenation of processes
(>~) = flip (.) 
```

这种方法也允许其他原语更容易处理，例如：

```
-- lifts a pure function into an action
pureA :: Monad m => (a -> b) -> Action m a b
pureA f a = return . return $ f a

-- makes an action wich always returns the same result
constA :: Monad m => b -> Action m a b
constA = pureA . const

-- no operation action
nop :: Monad m => Action m a ()
nop = constA ()

-- puts a sequence point
wait :: Monad m => Process m a a
wait = dependant $ pureA id

-- modify its result with a pure function
modify :: (Monad m, Functor m) => (a -> b) -> Process m a b
modify f act a = do
    x <- act a
    return (fmap f x)

-- makes a process, wich always returns the same result
constP :: (Monad m, Functor m) => b -> Process m a b
constP = modify . const 
```

最后是一个运行进程的函数：

```
-- executes a process
exec :: Monad m => Process m () b -> m b
exec p = join $ p nop undefined 
```

所以一些更复杂的例子：

```
simleI :: String -> a -> Process IO b a
simpleI name r = independant $ do
    print ("start " ++ name)
    return $ print ("end " ++ name) >> return r

simpleD :: (Show a, Show b) => String -> (a -> b) -> Process IO a b
simpleD name f = dependant $ \a -> do
    print ("start " ++ name ++ " with " ++ show a)
    let r = f a
    return $ print ("end " ++ name ++ " with " ++ show r ++ " (started with " ++ show a ++ ")") >> return r

a = simpleI "a" ()
b = simpleI "b" 42
c = simpleD "c" (+1)
d = simpleI "d" ()

chain1 = a >~ b >~ c >~ d       -- == d . c . b . a
chain2 = a >~ wait >~ b >~ c >~ d
chain3 = a >~ b >~ modify (+1) >~ c >~ d

main = do
    exec chain1
    print "---"
    exec chain2
    print "---"
    exec chain3 
```

输出：

```
"start a"
"start b"
"end a"
"end b"
"start c with 42"
"start d"
"end c with 43 (started with 42)"
"end d"
"---"
"start a"
"end a"
"start b"
"end b"
"start c with 42"
"start d"
"end c with 43 (started with 42)"
"end d"
"---"
"start a"
"start b"
"end a"
"end b"
"start c with 43"
"start d"
"end c with 44 (started with 43)"
"end d" 
```

这几乎正​​是我想要的。

我有点好奇如何对 Action 和 Process 进行分类。它们不是单子。他们可能是箭，但我对箭太陌生，无法分辨。进程可能是一个带有 fmap = modify 和 pure = const 的 Applicative 。constA 或类似的东西。

请随时评论您想到的关于我的方法的任何内容，尤其是如何扩展或简化它。

# python - 循环中的 Python 错误

> ID：11954672
> 
> 赞同：2
> 
> 时间：2012-08-14T14:35:06.570
> 
> 标签：python, while-loop, python-2.7

我解决了间距问题，并在很长一段时间内纠正了其他错误。现在它正在做我想做的事情，但我选择了选项 2，它将打印出员工的记录 4 次。如果我输入另一名员工，它只会打印第二个而不是第一个。

```
class EmployeeClass:
def Employee(name, lastName, age, salary):
    name = name
    lastName = lastName
    age = age
    salary = salary
def displayEmployee(x):
    print("Name: " + name + ", " + lastName)
    print("Age: " + age)
    print("Salary: " + salary)

EmployeeArray = []

Continue = True
print ("Employee Information V2.0")

while Continue == True:
print ("Welcome to Employee Information")
print ("1: Add New Record")
print ("2: List Records")
print ("3: Quit")

choice = input()

if choice == "1":
    name = input ("Enter First Name: ")
    EmployeeArray.append(name)
    if name == "":
        Continue = False
        print ("Goodbye!")
        break
    lastName = input ("Enter Last Name: ")
    EmployeeArray.append(lastName)
    age = input ("Enter Age: ")
    EmployeeArray.append(age)
    salary = input ("Enter Salary: ")
    EmployeeArray.append(salary)
elif choice == "2":
    for Employee in EmployeeArray:
        EmployeeClass.displayEmployee(Employee)
        Continue = False
elif choice == "3":
    print ("Bye!")
    break
else:
    print ("Please choose a valid option")
    print ("\n") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:36:41.223

您的错误消息将为您提供有关发生此问题的行号的指示。基本上，*您正在混合制表符和空格*，因此您只需要始终使用其中一个来进行缩进。

[PEP8 - The Style Guide for Python](http://www.python.org/dev/peps/pep-0008/) 建议使用*[空格](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)*并注意：

> 当使用 -t 选项调用 Python 命令行解释器时，它会发出有关非法混合制表符和空格的代码的警告。使用 -tt 时，这些警告会变成错误。强烈推荐这些选项！

通过简要检查您的来源，似乎语句前面有标签`print`- 用空格替换它们（这也是它们在上面的帖子中没有正确呈现的原因）

```
while Continue == True:
    print ("Welcome to Employee Information")
    print ("1: Add New Record")
    print ("2: List Records")
    print ("3: Quit") 
```

可能还有其他地方，你必须仔细检查。事实上，我怀疑你的代码在你的帖子中没有正确缩进的地方可能值得一看。

为了避免此类问题，最好使用能够始终使用相同字符为您缩进的编辑器或 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:37:29.533

看起来您需要在第一行之后缩进所有内容。

IE

```
class Employee:
    empCount = 0
    def _init_(self, name, lastName, age, salary):
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:07:56.197

问题是您使用制表符 ('\t') 来缩进某些行，并使用四个空格 (' ') 来缩进其他行。

这可能是个问题，因为制表符不一定意味着给定数量的空格 - 不同的编辑器可能会将其解释为相当于 2 个或 4 个或 8 个空格（或者实际上，它喜欢任何数量的空格，但这些是最常见的选择）。如果你只使用空格或只使用制表符缩进，那是明确的，Python 很高兴。如果您使用混合，您的代码的含义将根据制表符等于多少个空格而有所不同 - 因此，Python 不会猜测，可能会导致奇怪的错误，而是会停止并显示您看到的警告消息。

直接的解决方案是使用搜索和替换将每个制表符替换为 4 个空格。长期的解决方案是使用文本编辑器，只要您按 Tab 键，它就会自动插入 4 个空格。（在 Windows 上，我喜欢 Notepad++，但也有很多其他的好东西）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:53:43.010

永远不要在 Python 中使用制表符，你*可以*，但它不是传统的。PEP8 约定是使用四个空格。

# directory - 如何找到 ElasticSearch 在哪里安装我的插件？

> ID：11954677
> 
> 赞同：61
> 
> 时间：2012-08-14T14:35:16.053
> 
> 标签：directory, elasticsearch

我已经安装了弹性搜索`brew install elasticsearch`。我的插件似乎驻留在`/usr/local/Cellar/elasticsearch/0.19.8/plugins`. 我`cat $( which plugin )`看到一个`ES_HOME`包含正确路径的变量。

**有没有办法询问弹性`ES_HOME`或插件目录？**

* * *

### 编辑

我正在寻找的是**插件**可执行文件在我安装插件时使用的目录`plugin -install something`。我想在脚本中使用该路径来启动弹性搜索。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2015-04-08T04:09:13.740

要找到您的 elasticsearch*主目录*并*安装插件*，请按照以下步骤操作。

**找到您的主目录** *（查找设置 -> 路径 -> 主页以获得价值）*

```
$ curl "localhost:9200/_nodes/settings?pretty=true" 
```

**转到位置** *（示例 settings.path.home 值：/usr/local/Cellar/elasticsearch/1.5.0）*

```
$ cd /usr/local/Cellar/elasticsearch/1.5.0 
```

**安装插件** *（示例插件：[mobz/elasticsearch-head](http://mobz.github.io/elasticsearch-head/)）*

```
$ bin/plugin -install mobz/elasticsearch-head 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-04-28T10:19:38.923

我使用了这个命令：

```
$ curl "localhost:9200/_nodes?pretty=true&settings=true" 
```

检查下一个设置：节点 - 设置 - 路径 - 插件并将其用作插件目录。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-28T09:01:20.280

我和你有同样的问题，我可以按照@imotiv 的建议找到 ES_HOME 目录。

只需调用`PATH_TO_SERVER:9200/_cluster/nodes?settings=true&pretty=true`

在那里你会看到`path.home`条目。那是你的 ES 工作目录。

一旦你找到你的 ElasticSearch 主文件夹，在我的例子`/usr/share/elasticsearch`中，`cd`就到那个位置。

在那里，您可以简单地运行`bin/plugin -install elasticsearch/elasticsearch-analysis-phonetic/1.3.0`，它会自动为您完成其余的工作。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-14T15:16:37.383

不完全确定您要达到的目标，但希望这会有所帮助。有几种方法可以找到 elasticsearch 的插件目录。您可以`plugins: TRACE`在`logging.yml`文件中设置，它会导致 elasticsearch 记录它正在加载的插件的完整路径。你也可以执行

```
$ curl "localhost:9200/_cluster/nodes?settings=true&pretty=true" 
```

检查当前设置。Elasticsearch 使用`path.plugins`设置中指定的位置来加载插件。如果`path.plugins`未设置，它将使用设置`plugins`指定的目录中的目录`path.home`。

# android - 知道什么应用程序调用我的远程服务

> ID：11954678
> 
> 赞同：2
> 
> 时间：2012-08-14T14:35:18.867
> 
> 标签：android, service, aidl

我在 android 应用程序中有一项服务。该服务通过aidl向其他应用程序公开它的接口。我想知道调用我的服务方法的应用程序的应用程序包。可能吗？

当然，我可以存储一个 HashMap 并为每个被调用者创建一个新的绑定器，但这对我来说似乎是一个糟糕的解决方案。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:06:57.213

> 当然，我可以存储一个 HashMap 并为每个被调用者创建一个新的绑定器，但这对我来说似乎是一个糟糕的解决方案。

实际上，我认为这行不通。AFAIK，Android 缓存你的`Binder`，或者至少在每个不同的`Intent`基础上缓存。

> 有任何想法吗？

使用`getCallingUid()`和`getCallingPid()`从您的任何方法中`Binder`查看谁触发了对该方法的调用。

# sql-server-2008 - 如何比较我的 SQL Reporting Services 报表服务器的开发、测试和生产阶段？

> ID：11954679
> 
> 赞同：0
> 
> 时间：2012-08-14T14:35:18.867
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我负责几十个不同文件夹和子文件夹中的 196 个不同 RDL 文件，并且 SSRS 中缺少一些关键功能，这使得维护报表服务器成为一场噩梦。

我们一直被开发、测试和生产之间的差异所困扰。Visual Studio 中的项目不允许您部署文件夹结构，而且似乎没有简单的方法来比较部署在各种报表服务器上的所有内容。

如果有什么方法可以使它更易于维护怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:56:10.570

你有几个选择。

第一个是在您的环境之间比较您的 ReportServer 数据库。特别是目录表，其中包含您的文件夹结构和报告（我相信它的类型 = 2）。

其次是报告服务脚本，也可以在这里找到： [http ://www.sqldbtips.com/showarticle.asp?ID=62](http://www.sqldbatips.com/showarticle.asp?ID=62)

这是一个很棒的工具，允许您管理所有不同的环境并将它们编写脚本以进行备份/恢复和比较。

# javascript - 附加 使用 javascript/jquery 在前一个或多个标签之上

> ID：11954684
> 
> 赞同：2
> 
> 时间：2012-08-14T14:35:28.920
> 
> 标签：javascript, jquery, ajax, dhtml

我正在开发一个带有评论框的网页，人们可以使用该评论框进行评论，这些评论使用 AJAX 动态显示在同一页面上。例如，当您提交评论时，它会发布在之前的评论之上。

这是我在 AJAX 中所做的事情：

```
xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

            var newDivElement = document.createElement('form');
            newDivElement.setAttribute('id',"postForm");
            newDivElement.setAttribute('action',"updateRecords.php");
            newDivElement.setAttribute('method',"post");
            newDivElement.innerHTML=postContent; 

            document.getElementById('mainPostContainer').appendChild(newDivElement);
        }
    } 
```

（`postcontent`由一个包含评论的 div 组成）

现在，如果我连续发表两条评论，说“这是第 1 条评论”和“这是第 2 条评论”，它们会按以下顺序发布：

```
<div id=mainPostContainer>
    <form id="postForm" action="updateRecords.php" method="post"><div id="post"> this is 1st comment </div></form>
    <form id="postForm" action="updateRecords.php" method="post"><div id="post"> this is 2nd comment </div></form>
</div> 
```

但我希望它们按以下顺序排列：

```
<div id=mainPostContainer>
    <form id="postForm" action="updateRecords.php" method="post"><div id="post"> this is 2nd comment </div></form>
    <form id="postForm" action="updateRecords.php" method="post"><div id="post"> this is 1st comment </div></form>
</div> 
```

我尝试使用`insertBefore()`而不是追加，但我不知道如何获取前一个元素（即最后创建的`<form>`）。

我在这里做错了吗？还是有更好的方法来做我想做的事情？也许使用jQuery？

**编辑**：我正在使用`<form>`，因为表单中有按钮和文本类型的输入元素，我没有提到它们只是为了保持简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:43:58.053

# 添加新元素作为第一个子元素

## 普通的旧 JavaScript

**HTML：**

```
<div id="mainPostContainer"><p>1</p></div> 
```

**JavaScript：**

```
var myContainer = document.getElementById("mainPostContainer");
var p = document.createElement("p");
p.innerHTML = "2";
myContainer.insertBefore(p,myContainer.firstChild); 
```

**例子：**

[jsfiddle](http://jsfiddle.net/gWpbY/)

* * *

## jQuery

**HTML：**

```
<div id="mainPostContainer"><p>1</p></div> 
```

**JavaScript：**

```
var p = $("<p>2</p>");
$("#mainPostContainer").prepend(p); 
```

**例子：**

[jsfiddle](http://jsfiddle.net/jqaYe/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:44:27.237

您可以使用 Jquery 方法“prepend()”。[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/) 尝试做这样的事情：

```
$('#mainPostContainer').prepend(newDivElement); 
```

此外，在使用“innerHTML”时要小心，它不会直接更新 DOM。因此，如果您需要引用 postContent 中的任何元素，您将无法这样做，因为 DOM 不会看到它。更好的方法是使用 javascript 的 createElement() 函数创建您可能需要引用的每个元素。

此外，您可能希望为您的 ID 提供一个唯一标识符，可能来自数据库（如果涉及敏感信息，则不是直接）。

# linux - Linux下使用Qt QDesktopServices::storageLocation的应用程序数据文件夹

> ID：11954686
> 
> 赞同：2
> 
> 时间：2012-08-14T14:35:36.427
> 
> 标签：linux, qt

我正在尝试使用 Qt 的 storageLocation 函数获取 Linux 下的应用程序数据文件夹位置：

```
QDesktopServices::storageLocation(QDesktopServices::DataLocation) 
```

但是这个函数返回路径末尾有两个斜杠：

```
 /home/user/.local/share/data// 
```

路径尽头的两个斜线对我来说看起来很奇怪。这是正常的吗？或者这是Qt中的错误？我的 Linux 是 Ubuntu。Qt 版本是 4.8.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T09:53:25.773

这是 Qt 中的一个错误（请参阅[错误报告](https://bugreports.qt-project.org/browse/QTBUG-10772)）。但是，只有在您没有设置应用名称和组织名称时才会发生这种情况。您应该使用`QApplication::setApplicationName`和设置它们`QApplication::setOrganizationName`。

`chop`您之前接受的解决方案很糟糕，原因有两个。首先，如果修复了这个错误，您的代码可能会被破坏。谁知道在下一个版本中会有多少斜线（可能是 0）。我建议使用以下内容删除双斜杠：

```
QString s = QDesktopServices::storageLocation(QDesktopServices::DataLocation);
s = QDir(s).absolutePath(); 
```

但更重要的是该`/home/user/.local/share/data/`位置仍然无效。如果您想获得正确的位置，您需要设置应用程序和组织名称。简单地删除尾部斜杠并不能解决任何问题，它只是一个肮脏的黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T09:35:39.897

我知道这是一个老问题，但`QDesktopService::dataLocation`有以下结构`<user data location>/<application name>/`。

在 linux 下，用户数据的位置是`$HOME/.local/share/data/`.

应用程序名称是通过`QCoreApplication::setApplicationName()`方法设置的，我猜你没有设置它，这就解释了为什么你有两个斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:48:44.977

不，不仅你在这里也一样。你只需要砍掉最后一个字符

```
QString s = QDesktopServices::storageLocation(QDesktopServices::DataLocation);
s.chop(1); 
```

# visual-studio-2010 - 网络驱动器上的代码时，Visual Studio 2010 Ultimate 超级慢

> ID：11954689
> 
> 赞同：0
> 
> 时间：2012-08-14T14:35:41.500
> 
> 标签：visual-studio-2010, windows-7

我的电脑安装了 Windows 7。当使用 VS2010 作为本地存储的解决方案时，它真的很快。设计模式完全响应并且零延迟。但是当我打开一个存储在与我在同一网络上的网络驱动器上的解决方案时，我几乎无法使用 VS2010。如果没有计算机挂起，我什至无法在设计模式下调整窗口大小。这台电脑也是全新的：6 核 i7-3930K 和 16 GB RAM 和 SSD。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:42:07.560

我相信这是因为您所做的任何事情都会临时保存在解决方案目录中的文件中。这允许您撤消更改（CTRL-Z），并且在程序崩溃并且您没有保存项目的情况下也有帮助（它可以恢复您正在执行的操作）。

因此，基本上，每次您键入内容、调整大小等时，这些更改都会保存在网络驱动器上的解决方案文件夹中，这比本地硬盘慢得多。

# spring - Spring 的 Embedded HSQL 数据库能否支持 Sybase 方言？

> ID：11954695
> 
> 赞同：1
> 
> 时间：2012-08-14T14:36:04.993
> 
> 标签：spring, hsqldb, embedded-database, sap-ase

我希望能够在使用 HSQL 的单元/集成测试中支持以下 Sybase 15 ASE 语法...

```
create table #myTable (value varchar(12) NULL) 
```

HSQL 无法识别临时表是如何命名的，并且对`#`字符犹豫不决。相反，HSQL 想使用这样的东西......

```
create temporary table myTable (value varchar(12) NULL) 
```

或者，根据他们的文档，HSQL 也支持大多数 ANSI-92 SQL，但是 Sybase ASE 15 对 ANSI-92 SQL 没有很好的支持，包括如何创建临时表，因此以下内容在 Sybase 中不起作用，但在 HSQL 中起作用...

```
DECLARE LOCAL TEMPORARY TABLE mytable (value varchar(12) NULL) 
```

从我尝试过的所有内容中，我无法想出一种适用于 Sybase 和 HSQL 的通用语法。有谁知道解决这个问题的干净方法？

我认为我唯一的选择是为每种数据库方言创建单独的 DAO，并控制在 Spring Application Context XML 文件中使用哪一个。

我的数据源不使用 Hibernate，只使用 Spring 的 JdbcTemplate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:16:31.423

我选择通过为我的 DAO 实现几个方言助手类来解决这个问题。我的目标是

1.  针对 HSQL 数据库而不是 Sybase 执行测试
2.  尽可能多地测试我的生产 DAO，包括 RowMapper 和针对生产中使用的数据库模式的各种 SELECT/INSERT 语句（但在 HSQL 中实现）

我的 DAO 最终看起来像这样（注意被注入的 DialectHelper）......

```
@Repository
public class MyDaoJdbc MyDao {

    private DialectHelper dialectHelper;

    /* the meat of the DAO removed for clarity */

    @Override
    public void createTemporaryTable() {        
        getSimpleJdbcTemplate().update(dialectHelper.getTempTableCreateSql());
    }

    @Autowired
    public final void setDialectHelper(DialectHelper dialectHelper) {
        this.dialectHelper = dialectHelper;
    }
} 
```

...我的生产 Spring 配置 (spring-db.xml) 看起来像这样并注入了 Sybase 方言

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName"    value="com.sybase.jdbc2.jdbc.SybDriver" />
    <property name="url"                    value="${jdbc.url}" />
    <property name="username"           value="${jdbc.username}" />
    <property name="password"           value="${jdbc.password}" />
</bean>

<bean id="dialectHelper" class="com.acme.myapp.jdbc.DialectHelperSybase" /> 
```

...我的测试 Spring 配置（spring-db-test.xml）看起来像这样并注入了 HSQL 方言

```
<jdbc:embedded-database id="dataSource" type="HSQL">
     <jdbc:script location="classpath:/resources/schema.sql"/>
     <jdbc:script location="classpath:/resources/test-data.sql"/>
</jdbc:embedded-database>

<bean id="dialectHelper" class="com.acme.myapp.dao.jdbc.DialectHelperHsql" /> 
```

DialectHelper 类提供了一种将不兼容的数据库语法从 DAO 中分离出来的方法......

```
public class DialectHelperHsql implements DialectHelper {
    @Override
    public String getTempTableCreateSql() {
        return "create temporary table myTable (value varchar(12) NULL)";
    }
}

public class DialectHelperSybase implements DialectHelper {
    @Override
    public String getTempTableCreateSql() {
        return "create table #myTable (value varchar(12) NULL)";
    }
} 
```

Test 类本身通过加载文件 spring-db-test.xml 使用 HSQL dialectHelper 初始化 Spring

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={
    "classpath:resources/spring-context.xml",
    "classpath:resources/spring-db-test.xml"})
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class MyDaoIntegrationHsqlTest {
    ...
} 
```

# c# - VB.NET 是否有与 c# 等效的多行字符串声明语法？

> ID：11954701
> 
> 赞同：7
> 
> 时间：2012-08-14T14:36:30.413
> 
> 标签：c#, vb.net

> **可能重复：**
> [VB.NET 中的多行字符串](https://stackoverflow.com/questions/706382/multiline-strings-in-vb-net)

在 c# 中，你可以像这样：

```
字符串 s = @"你好
那里
先生”;

```

VB.NET 是否有类似的东西不涉及字符串连接？我希望能够在两个双引号之间粘贴多行文本。不知何故，我不相信 VB.NET 支持这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T14:41:24.747

**编辑：VS2015 以后**

**您现在可以在 VS2015 中使用多行字符串，如下所示：**

```
Dim text as String = "
This
Is
Multiline
Text!" 
```

VB .NET 中没有多行字符串文字 - 您可以获得的最接近的东西（不使用 LINQ）是带有连接的多行语句。

在 VS2010 之前：

```
Dim x = "some string" & vbCrlf & _
        "the rest of the string" 
```

2010年后：

```
Dim x = "some string" & vbCrlf &
        "the rest of the string" 
```

XML/LINQ 技巧是：

```
Imports System.Core
Imports System.XML
Imports System.XML.Linq

Dim x As String = <a>Some code
and stuff</a>.Value 
```

`<a></a>`但是由于 XML 语义，这限制了您可以在块内放置的字符。如果您需要使用特殊字符将文本包装在标准`CDATA`块中：

```
Dim x As String = <a><![CDATA[Some code
& stuff]]></a>.Value 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T14:40:10.093

不，但您可以使用这样的 xml 技巧：

```
Dim s As String = <a>hello
there
mister</a>.Value 
```

或将您的字符串放入项目资源中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:40:09.983

我不知道这是否是最好的方法，但我认为没有等效的运算符。

```
Dim myString As String =
"Hello" & Environment.NewLine & "there" & Environment.NewLine & "mister" 
```

我认为`Environement.NewLine`根据操作系统需要正确的换行符。

编辑：我刚刚读到您想直接在代码中插入多行文本，所以还有另一种可能的解决方案：

您仍然必须使用字符串引号和逗号，但在这里

```
 Dim myList as new List(of String) (new String(){
        "Hello",
        "there",
        "mister"
    })

    Dim result as String

    For Each bob as String In myList
        result += bob & Environment.NewLine
    next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:40:52.503

这是 MSDN 推荐的 [http://msdn.microsoft.com/en-us/library/5chcthbw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/5chcthbw(v=vs.80).aspx)

MyString = "这是我的字符串的第一行。" & VbCrLf & _ "这是我的字符串的第二行。" & VbCrLf & _ "这是我的字符串的第三行。"

# c# - 从 SQL 读取到文本块

> ID：11954703
> 
> 赞同：0
> 
> 时间：2012-08-14T14:36:35.330
> 
> 标签：c#, sql, wpf

应用程序——一个文本块，一个按钮。+ SQL 数据库——一张表。当我单击按钮时，我正在尝试从 sql 读取到文本块，但它不起作用。

```
private void nextButton_Click(object sender, RoutedEventArgs e)
    {
        GetSqlData();
    }

    private void GetSqlData()
    {
        string connectionString = @"Data Source=Jama-Dharma\sqlexpress;Initial Catalog=Cars;Integrated Security=True";
        SqlConnection sqlConnection = new SqlConnection(connectionString);

        using (sqlConnection)
        {
            string sqlQuery = @"SELECT c.Name FROM CarsCatalog c";
            SqlCommand sqlCommand = new SqlCommand(sqlQuery, sqlConnection);

            sqlConnection.Open();

            SqlDataReader sqlReader = sqlCommand.ExecuteReader();

            while (sqlReader.Read())
            {
                nameTextBlock.Text = sqlReader.GetString(0);
            }

            sqlConnection.Close();
        }
    } 
```

如何在单击按钮时，从 SQL 中获取下一个 ID 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:43:22.923

乍一看，您的 while 循环似乎只是覆盖了文本块。退出循环后更新文本块文本。尝试类似的东西

```
 var sb = new StringBuilder();
 while (sqlReader.Read())
 {
     sb.AppendLine(sqlReader.GetString(0));
 }

 nameTextBlock.Text = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:57:01.557

您可以保存您到现在为止获得的最后一个 ID，并获取大于此保存的 ID 的下一个 ID。例如：

```
 using (var sqlConnection = new SqlConnection(...))
    {
        string sqlQuery = @"SELECT c.Name,c.ID FROM CarsCatalog c where c.ID > " 
                            + lastID.ToString();
        SqlCommand sqlCommand = new SqlCommand(sqlQuery, sqlConnection);

        sqlConnection.Open();

        SqlDataReader sqlReader = sqlCommand.ExecuteReader();

        if (sqlReader.Read())
        {
            nameTextBlock.Text = sqlReader.GetString(0);
            lastID = sqlReader.GetInt(1);
        }
    } 
```

# esb - 骡子集合聚合器

> ID：11954709
> 
> 赞同：0
> 
> 时间：2012-08-14T14:36:47.163
> 
> 标签：esb, mule

我正在尝试使用 Mule 3.2.0 s Collection Aggregator。我尝试使用 Mule Studio，但似乎仍然无法在 Mule Studio 中进行配置，尽管该图标确实出现在“流控制”部分。我的用例是 - 我从 VM 入站端点收到一条消息。我现在想将它传递给 3 个不同的流——都使用相同的请求对象但执行不同的操作——比如 A、B、C。它们都更新了各自的数据库，但它们都是公共 Order_ID 的一部分（我们应用程序的内部部分）。这 3 个进程可能需要不同的处理时间，但一旦完成，它们中的每一个都会返回相同的成功响应。我想使用一个聚合器来聚合所有这些响应而不会超时，然后将其转发到 Java 组件或另一个 VM 端点以进行进一步处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:50:09.213

而不是`Collection Aggregator`使用`All`消息处理器。它向其中的每个处理器发送相同的消息，并在它们完成后聚合结果。

[http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-All](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-All)

示例配置：（我将“foo”发送到 vm 端点）

```
<flow name="main" processingStrategy="asynchronous">
    <vm:inbound-endpoint path="in"/>
    <all>
        <flow-ref name="flow1"/>
        <flow-ref name="flow2"/>
    </all>

    <logger message="#[payload:]" level="INFO"/>
</flow>

<flow name="flow1">
    <append-string-transformer message="bar1"/>
</flow>

<flow name="flow2">
    <append-string-transformer message="bar2"/>
</flow> 
```

控制台输出：

```
INFO  2012-08-15 17:26:01,749 [main.stage1.02] org.mule.api.processor.LoggerMessageProcessor: [foobar1, foobar2] 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T05:42:27.193

我会使用 ALL 组件，您使用的端点应该是请求-响应（流等待响应的双向）。

因此，ALL 组件将聚合响应，然后返回一个 CopyOnWriteArrayList，其中包含来自流 A、B 和 C 的所有响应。您可以通过在 java 类中扩展 AbstractTransformer 来使用自定义转换器以任何所需的方式转换此数组列表。

干杯，纳文拉吉

# delphi - 如何遍历分隔字符串并将字符串的内容分配给本地 delphi 变量？

> ID：11954711
> 
> 赞同：0
> 
> 时间：2012-08-14T14:36:55.033
> 
> 标签：delphi, loops, delphi-xe2, tstringlist

我编写了一个 Delphi 函数，将 .dat 文件中的数据加载到字符串列表中。然后它解码字符串列表并分配给一个字符串变量。字符串的内容使用“#”符号作为分隔符。

我怎样才能获取这个字符串的内容，然后将其内容分配给局部变量？

```
// Function loads data from a dat file and assigns to a String List.
function TfrmMain.LoadFromFile;
var 
  index, Count : integer;
  profileFile, DecodedString : string;
begin
  // Open a file and assign to a local variable.
  OpenDialog1.Execute;
  profileFile := OpenDialog1.FileName;
  if profileFile = '' then
    exit;
  profileList := TStringList.Create;
  profileList.LoadFromFile(profileFile);
  for index := 0 to profileList.Count - 1 do
  begin
    Line := '';
    Line := profileList[Index];
  end;
end; 
```

解码后，var "Line" 包含如下所示的内容：

例子：

```
Line '23#80#10#2#1#...255#'. 
```

并非分隔符之间的所有值都具有相同的长度，并且每次调用函数 LoadFromFile 时，“Line”的值都会有所不同（例如，有时一个值可能只有一个数字接下来的两个或三个等，所以我不能依赖字符串或数组的复制函数）。

我试图找出一种循环遍历“Line”内容的方法，将其分配给名为“buffer”的局部变量，然后如果遇到“#”，则将缓冲区的值分配给局部变量，将缓冲区重新初始化为''；然后移动到“Line”中的下一个值，重复下一个参数的过程，每次忽略“#”。

我想我一直在纠结这个问题太久了，我似乎无法取得任何进展，需要休息一下。如果有人愿意看一看，我会欢迎任何关于如何实现这一目标的建议。

非常感谢

KD

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T14:50:48.110

你需要第二个 TStringList：

```
 lineLst := TStringList.Create;
  try
    lineLst.Delimiter := '#';
    lineLst.DelimitedText := Line;
    ...
  finally
    lineLst.Free;
  end; 
```

根据您的 Delphi 版本，您可以设置`lineLst.StrictDelimiter := true`该行是否包含空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:45:36.983

你可以这样做：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, StrUtils;

var
  S : string;
  D : string;

begin
  S := '23#80#10#2#1#...255#';

  for D in SplitString(S,'#') do //SplitString is in the StrUtils unit
    writeln(D);

  readln;
end. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:52:08.893

你没有标记你的 Delphi 版本，所以我不知道它是否适用。那是特定于版本的。请做！

按照我个人喜好排序：

1：下载 Jedi CodeLib - [http://jcl.sf.net](http://jcl.sf.net)。然后使用 TJclStringList。它有非常好的分割方法。之后，您只需要迭代。

函数拆分（常量 AText，ASeparator：字符串；AClearBeforeAdd：布尔 = True）：IJclStringList；

```
uses JclStringLists;
...
var s: string;  js: IJclStringList.
begin
...
   js := TJclStringList.Create().Split(input, '#', True);
   for s in js do begin
      .....
   end;
...
end; 
```

2：Delphi 现在的 StringSplit 例程功能较少。[http://docwiki.embarcadero.com/Libraries/en/System.StrUtils.SplitString](http://docwiki.embarcadero.com/Libraries/en/System.StrUtils.SplitString) 它有一个误区，即*字符串*类型的数组可能与自身不兼容。你好，1949 年的帕斯卡规则...

```
uses StrUtils;
...
var s: string;  
    a_s: TStringDynArray; 
(* aka array-of-string aka TArray<string>. But you have to remember this term exactly*)
begin
...
   a_s := SplitString(input, '#');
   for s in a_s do begin
      .....
   end;
...
end; 
```

3：使用TStringList。它的主要问题是它被设计成空格或新行是内置的分隔符。在可以抑制的较新的 Delphi 中。总体而言，代码应根据您的确切 Delphi 版本进行定制。您可以轻松地在 Google 上搜索“使用 TStringlist 拆分字符串”之类的内容并获取大量示例（例如 @Uwe 的示例）。

但是你可能会忘记在这里或那里压制。而且您可能在旧的 Delphi 上，无法做到这一点。你可能会误用不同 Delphi 版本的例子。而且...这很无聊 :-) 虽然您可以创建自己的函数来为您生成此类预先调整的字符串列表并仔细检查其中的 Delphi 版本 :-) 但是您必须在使用后小心地释放该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T09:37:51.650

我使用我编写的一个名为`Fetch`. 我想我前段时间从 Indy 图书馆偷走了这个想法：

```
function Fetch(var VString: string; ASeperator: string = ','): string;
var   LPos: integer;
begin
  LPos := AnsiPos(ASeperator, VString);
  if LPos > 0 then
  begin
    result := Trim(Copy(VString, 1, LPos - 1));
    VString := Copy(VString, LPos + 1, MAXINT);
  end
  else
  begin
    result := VString;
    VString := '';
  end;
end; 
```

然后我会这样称呼它：

```
var
  value: string;
  line: string;
  profileFile: string;
  profileList: TStringList;
  index: integer;
begin
  if OpenDialog1.Execute then
  begin 
    profileFile := OpenDialog1.FileName;
    if (profileFile = '') or not FileExists(profileFile) then
      exit;

    profileList := TStringList.Create;
    try
      profileList.LoadFromFile(profileFile);

      for index := 0 to profileList.Count - 1 do
      begin
        line := profileList[index];
        Fetch(line, ''''); //discard "Line '"
        value := Fetch(line, '#')
        while (value <> '') and (value[1] <> '''') do //bail when we get to the quote at the end
        begin
           ProcessTheNumber(value); //do whatever you need to do with the number
           value := Fetch(line, '#');
        end;
      end;
    finally
      profileList.Free;
    end;
  end;
end; 
```

注意：这是在浏览器中输入的，所以我没有检查它是否有效。

# maven - 有没有办法告诉 maven 始终使用最新的 _stable_ 版本的依赖项？

> ID：11954712
> 
> 赞同：2
> 
> 时间：2012-08-14T14:36:56.133
> 
> 标签：maven, dependency-management

如何告诉 maven 始终使用最新的*稳定*版本的依赖项？

我知道我可以依赖最新版本或仅依赖最新版本，无论[这个](https://stackoverflow.com/a/30628/117839)问题是什么。我也知道我可以使用依赖插件（也来自那个链接）。

但是，我使用 google 的 guava 库，它似乎每周都会更新。我发现自己一直在更新版本。这是 google 版本控制系统，它更多的是增量更新而不是大爆炸更新，因此它不太可能破坏任何东西，特别是考虑到这个库的性质。

所以我希望不必不断更改我的 Maven 依赖项的版本标识符。所以我可以这样做：

```
 <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>[12.0.1,)</version>
    </dependency> 
```

这将为我提供 12.0.1 及更高版本......并且由于我不依赖任何将提供此依赖项的任何快照版本的存储库，这将确保我始终拥有最新的发布版本。

但是，它也会给我“rc”版本（13.0-rc1 和 13.0-rc2）。这是我想要避免的。

是否可以使 maven 仅依赖于稳定版本？即它们的名称中没有任何“rc”或“beta”或“alhpa”，只是简单的“13.0”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:23:27.287

您可以在版本元素中为您的依赖项使用 RELEASE 值，以使 Maven 使用最新发布的版本。然而，这不是最佳实践，因为它会破坏构建的可再现性。

此外，Maven 不会在 12.0.1 和 13.0-rc1 等版本之间产生逻辑差异。从 Maven 的角度来看，它们都是发布版本，基本上你要做的是以几种方式打破 Maven 发布意识形态。

因此，您不应像 13.0-rc1 那样对工件进行版本控制，而应该定期发布并使用特殊的存储库和工件升级过程作为发布的一部分。因此，您可以拥有一个可在测试期间使用的发布候选存储库，一旦测试通过，您将把这些工件提升到最终发布存储库。但是如果您需要进行更改，您只需更新已发布的版本，例如 13.0、13.0.1 等...

# android - Android listView 重叠元素

> ID：11954717
> 
> 赞同：3
> 
> 时间：2012-08-14T14:37:12.380
> 
> 标签：android, listview, overlap

上下文：
我设法为我的 ListView 创建了一个自定义 BaseAdapter，它可以正确呈现我的元素。我有一个精美的 4x4 网格项目。

现在我想更改其中一个项目的按下状态（如按钮 OnPressed 状态）。我已经通过从按钮派生的自定义控件和一些自定义状态来实现这一点。这允许我以编程方式或触摸方式更改相关项目的状态。完美的。

问题：
现在我希望元素（处于给定状态）超出 listView 提供的范围。
适配器的 getView 方法返回一个视图，但这（AFAIK）适合提供的列，列表视图扩展以适合返回的视图。我想要的是指定每行的高度，但允许项目填充超出这些范围。例如，在按下时，我想在所触摸的项目周围画一个大圆圈——这个圆圈会与包含项目的其他元素重叠；圆圈超出了它所包围的元素的边界。

是否有一个简单的填充或布局参数来指定允许 Drawable 超出列表视图分配的空间范围？或者我是否需要在 ListView 顶部的另一个圆圈视图并在触摸的正确位置定位？（圆圈当前是按钮的背景可绘制对象，通过选择器显示正确状态）。

# iphone - GroupMe 如何验证我的号码？

> ID：11954720
> 
> 赞同：7
> 
> 时间：2012-08-14T14:37:23.387
> 
> 标签：iphone, ios

我正在开发一个需要用户电话号码的 iPhone 应用程序。从我读到的内容（例如，这里 - [Programmatically get own phone number in iOS](https://stackoverflow.com/questions/193182/programmatically-get-own-phone-number-in-iphone-os)），设备的电话号码在您的应用程序的容器中不可用。我一直让用户输入他或她自己的号码。但是当我前几天加入 GroupMe 时，点击开始按钮后，我的手机打开了一个草拟的短信，发给某个美国区号号码“发送此短信以验证您的电话号码（b2bd308eb7）”我发送短信后，应用程序知道我的号码....如何实现这样的系统？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T14:40:16.130

GroupMe 所做的是使用 MessageUI 框架 ( [http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MessageUI_Framework_Reference/_index.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MessageUI_Framework_Reference/_index.html) ) 将文本消息发送到他们的服务器。

基本上它是这样工作的：

1.  该应用程序已打开并调用服务器。
2.  服务器以代码响应`b2bd308eb7`。
3.  该应用程序通过 SMS 将该代码发送到服务器。
4.  服务器获取代码和您的电话号码（来自 SMS）并确认它们。
5.  您的电话号码和应用程​​序已连接！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:41:38.253

他们向某些服务发送一条短信，他们可以通过他们的服务器进行查询。所以通过将代码发送到服务器，他们可以验证号码，

# ruby-on-rails - Amazon EC2 + Auto Scaling + 负载均衡 + Rails + 部署

> ID：11954721
> 
> 赞同：1
> 
> 时间：2012-08-14T14:37:25.377
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, load-balancing, autoscaling

我对 Amazon EC2 中的 Auto Scaling 有一些疑问。

*   我每天从 GitHub 多次在我的应用程序中运行部署，我需要编译资产管道以将静态数据发送到 Amazon S3。如何将我的应用程序（更新）复制到其他**活动**服务器？
*   对于由 Auto Scaling 启动的**新服务器？**

我希望他们能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:46:04.020

我假设您已为应用程序确定了启动配置。我们这样做的方式是使用新的代码库创建一个新的 AMI。然后更新启动配置以反映新的 AMI。

当我们准备好开始更新时，我们只需终止负载均衡器中的实例并让启动配置启动新 AMI 的新实例。

例如，假设您的启动配置声明您至少有 8 个实例，最多有 12 个实例。假设您目前正在运行 10 个实例。我们将终止（或仅从负载均衡器中删除）一些实例以低于最小实例（例如 4 个实例）。然后这将启动两个新实例以满足最小启动配置。一旦这些在负载均衡器中成功，我们可能会终止另外 4 个实例，并让 4 个新实例启动。然后最后终止最后两个实例。

这允许将新的 AMI 分阶段部署到生产环境中，同时最大限度地减少对 serer 集群的负载影响。当然，如果您需要更新数据库架构或类似的情况，您需要硬停机进行切换，这会略有不同，因为您需要更改启动配置，终止所有实例，进行数据库迁移，然后启动新实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:57:32.353

尝试使用[Chef](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGgQFjAA&url=http://www.opscode.com/chef/&ei=imYqUPHpG4qyrAffz4DoAw&usg=AFQjCNGNoY99MFKpyEwvwJEl5653cxn3XQ&sig2=dLGrstQDgOeA89bDItGOww)或[Puppet](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGMQFjAA&url=http://puppetlabs.com/&ei=r2YqUJmADcrVrQf_soGACw&usg=AFQjCNFRhpgP8X0ITlzbTdaVZ5Krfc-xkw&sig2=it70SCsncPVA8XtwIQk4yw)等配置管理工具。

我不确定是否有任何现成的解决方案可用于 AWS Auto Scaling 实例。但是通过使用实例用户数据和厨师，可以复制更新的部署。

# eclipse - 如何使用 eclipse 在 sigel 中调试 GWT 2.4？

> ID：11954728
> 
> 赞同：0
> 
> 时间：2012-08-14T14:37:47.620
> 
> 标签：eclipse, gwt, deployment

在 eclipse 中使用 gwt 2.4 开发时存在某种方式进行热重新部署，因此我可以在视图中进行一些更改，例如标签的文本，然后按刷新或类似的东西并出现修改？这个问题是因为我正在运行的项目至少需要 50 分钟来编译并等待 50 分钟，例如一个标签的文本很难......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:44:59.547

好吧，你的问题有点含糊，但这里有一些希望能有所帮助的观点：

1.  是的，GWT 编译很慢。如果您有一个大型 GWT 项目，编译它可能需要几分钟时间。这是一个已知问题。您可以做些什么来解决这个问题，将您的项目拆分为多个 GWT 库，然后编译您当前正在使用的库。

2.  关于热部署：您的 gwt 项目有两种类型的代码：客户端代码和服务器端代码。客户端代码（由 GWT 编译器翻译成 Javascript）是可热部署的。如果您按照此处的说明进行操作：

[https://developers.google.com/web-toolkit/gettingstarted](https://developers.google.com/web-toolkit/gettingstarted)

您将拥有一个“魔术按钮”，可让您将项目热部署到任何更流行的浏览器中。这意味着您可以修改客户端代码、刷新浏览器并进行更新。

对于不起作用的服务器端代码。AFAIK，您需要重新编译您的项目以考虑这些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:28:49.900

您尝试过 GWT 设计器吗？

阅读更多：[https ://developers.google.com/web-toolkit/tools/gwtdesigner/](https://developers.google.com/web-toolkit/tools/gwtdesigner/)

# php - 按字母顺序对邻接列 表子项进行排序

> ID：11954733
> 
> 赞同：0
> 
> 时间：2012-08-14T14:38:05.320
> 
> 标签：php, sorting, children, adjacency-list-model

如果我有一个按 id/parent_id 排序的邻接列表，是否有一种简单的方法可以通过第三个文本字段（比如“名称”）按字母顺序对所有父母的孩子进行排序？

我使用了此处提供的信息：http: [//explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)让 MySQL 返回排序的邻接列表。理想情况下，这将允许我按第三列对子项进行排序，但测试数据集在该示例中根本不包含额外的列。

我的数据在查询后看起来像这样，但它需要按字母顺序按后代排序。

```
$myArr[] = array(1,0,"instruments");
$myArr[] = array(2,1,"electric");
$myArr[] = array(3,1,"acoustic");
$myArr[] = array(4,2,"guitar");
$myArr[] = array(5,2,"banjo");
$myArr[] = array(6,3,"guitar");
$myArr[] = array(5,3,"banjo"); 
```

或者：

```
array (
  0 => 
  array (
    0 => 1,
    1 => 0,
    2 => 'instruments',
  ),
  1 => 
  array (
    0 => 2,
    1 => 1,
    2 => 'electric',
  ),
  2 => 
  array (
    0 => 3,
    1 => 1,
    2 => 'acoustic',
  ),
  3 => 
  array (
    0 => 4,
    1 => 2,
    2 => 'guitar',
  ),
  4 => 
  array (
    0 => 5,
    1 => 2,
    2 => 'banjo',
  ),
  5 => 
  array (
    0 => 6,
    1 => 3,
    2 => 'guitar',
  ),
  6 => 
  array (
    0 => 5,
    1 => 3,
    2 => 'banjo',
  ),
) 
```

我需要这样排序：

```
instruments
    acoustic
        banjo
        guitar
    electric
        banjo
        guitar 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:53:05.070

鉴于您没有代码示例，我不知道您到底想做什么，但是这样做不是更容易吗：

```
SELECT * FROM my_table ORDER BY id, parent_id, title; 
```

首先按 id 排序，然后在 id 相同时按 parent_id 排序，如果 id 和 parent_id 相同则按标题排序

# sql - RODBC 查询不返回数据

> ID：11954734
> 
> 赞同：2
> 
> 时间：2012-08-14T14:38:06.637
> 
> 标签：sql, oracle, r

我完全不知道为什么在针对 Oracle 数据仓库编写查询时无法返回有效数据。

我以前在[这里](https://stackoverflow.com/questions/5956138/rodbc-returning-0-values)看到过帖子，以及这个[解决方案](https://stackoverflow.com/questions/7425100/rodbc-queries-returning-zero-rows)，但都没有解决我的问题。

一些背景：

*   我每天都连接到 Oracle 数据仓库，通常将数据拉入 R 没有任何问题
*   当我列出架构中的表时，Table_Type 被列为“TABLE”
*   我可以使用 SPSS 毫无问题地查询数据库中的表。我正在尽我所能从我的工作流程中删除 SPSS。

我的代码尝试使用上面找到的解决方案：

```
ch <- odbcConnect(DSN, USER, PWD)
tmp <- sqlQuery(ch, "SELECT * from MV_BRM_COMMUNICATION_DM", rows_at_time=1) 
```

这是返回的内容（不正确的列名从第 9 列开始）：

```
> tmp
 [1] COMM_ITEM_PK            COMM_ERROR_PK           COMM_ADDRESS_PRLO_PK   
 [4] COMM_ADDRESS_LOPR_PK    COMM_ADDRESS_PR_PK      COMM_OUTBOUNDMESSAGE_ID
 [7] COMM_PIDM               COMM_CREATED_BY         ?                      
[10] ?.1                     ?.2                     ?.3                    
[13] ?.4                     ?.5                     ?.6                    
[16] ?.7                     ?.8                     ?.9                    
[19] ?.10                    ?.11                    ?.12                   
[22] ?.13                    ?.14                    ?.15                   
[25] ?.16                    ?.17                    ?.18                   
[28] ?.19                    ?.20                    ?.21                   
[31] ?.22                    ?.23                    ?.24                   
[34] ?.25                    ?.26                    ?.27                   
[37] ?.28                    ?.29                    ?.30                   
[40] ?.31                    ?.32                    ?.33                   
[43] ?.34                    ?.35                   
<0 rows> (or 0-length row.names) 
```

这是我的连接信息：

```
> odbcGetInfo(ch)
       DBMS_Name         DBMS_Ver  Driver_ODBC_Ver Data_Source_Name      Driver_Name 
        "Oracle"     "11.01.0070"          "03.51"           "MYDSN"    "SQORA32.DLL" 
      Driver_Ver         ODBC_Ver      Server_Name 
    "09.02.0000"     "03.80.0000"       "myserver " 
```

最后，我的会话信息：

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RODBC_1.3-5

loaded via a namespace (and not attached):
[1] tools_2.15.0 
```

我真的很想继续使用 RODBC 包。我知道有很多抱怨，但基本上，我所需要的只是偶尔将数据上传回数据库。

提前谢谢了。

更新：这是有关该表的一些信息：

```
> sqlColumns(ch, "MV_BRM_COMMUNICATION_DM")[3:7]
                TABLE_NAME                COLUMN_NAME DATA_TYPE        TYPE_NAME COLUMN_SIZE
1  MV_BRM_COMMUNICATION_DM               COMM_ITEM_PK         3          DECIMAL          19
2  MV_BRM_COMMUNICATION_DM              COMM_ERROR_PK         3          DECIMAL          19
3  MV_BRM_COMMUNICATION_DM       COMM_ADDRESS_PRLO_PK         8 DOUBLE PRECISION           0
4  MV_BRM_COMMUNICATION_DM       COMM_ADDRESS_LOPR_PK         8 DOUBLE PRECISION           0
5  MV_BRM_COMMUNICATION_DM         COMM_ADDRESS_PR_PK         8 DOUBLE PRECISION           0
6  MV_BRM_COMMUNICATION_DM    COMM_OUTBOUNDMESSAGE_ID        12         VARCHAR2         144
7  MV_BRM_COMMUNICATION_DM                  COMM_PIDM         3          DECIMAL          19
8  MV_BRM_COMMUNICATION_DM            COMM_CREATED_BY        12         VARCHAR2        1020
9  MV_BRM_COMMUNICATION_DM         COMM_CREATION_DATE        -4     TIMESTAMP(3)  2147483647
10 MV_BRM_COMMUNICATION_DM COMM_GENERIC_TEMPLATE_NAME        12         VARCHAR2        1020
11 MV_BRM_COMMUNICATION_DM         COMM_TEMPLATE_NAME        12         VARCHAR2        2044
12 MV_BRM_COMMUNICATION_DM      COMM_TEMPLATE_VERSION        12         VARCHAR2        1020
13 MV_BRM_COMMUNICATION_DM             DATE_COMM_SENT        -4     TIMESTAMP(3)  2147483647
14 MV_BRM_COMMUNICATION_DM             COMM_DATE_SENT        -4     TIMESTAMP(3)  2147483647
15 MV_BRM_COMMUNICATION_DM COMM_COMMUNICATION_CHANNEL        12         VARCHAR2        1020
16 MV_BRM_COMMUNICATION_DM               COMM_SUBJECT        12         VARCHAR2        1020
17 MV_BRM_COMMUNICATION_DM              COMM_EMAIL_PK         3          DECIMAL          19
18 MV_BRM_COMMUNICATION_DM            COMM_TO_ADDRESS        12         VARCHAR2        1020
19 MV_BRM_COMMUNICATION_DM            COMM_ISP_DOMAIN        12         VARCHAR2        4000
20 MV_BRM_COMMUNICATION_DM                COMM_CCLIST        12         VARCHAR2        1020
21 MV_BRM_COMMUNICATION_DM               COMM_BCCLIST        12         VARCHAR2        1020
22 MV_BRM_COMMUNICATION_DM               COMM_REPLYTO        12         VARCHAR2        1020
23 MV_BRM_COMMUNICATION_DM                COMM_SENDER        12         VARCHAR2        1020
24 MV_BRM_COMMUNICATION_DM        COMM_REFERENCE_DESC        12         VARCHAR2        1020
25 MV_BRM_COMMUNICATION_DM          COMM_OPTOUT_TOKEN        12         VARCHAR2        1020
26 MV_BRM_COMMUNICATION_DM        COMM_DELIVERED_FLAG         8 DOUBLE PRECISION           0
27 MV_BRM_COMMUNICATION_DM           COMM_OPTOUT_FLAG         8 DOUBLE PRECISION           0
28 MV_BRM_COMMUNICATION_DM           COMM_OPTOUT_DATE        93             DATE          19
29 MV_BRM_COMMUNICATION_DM        COMM_OPTOUT_CHANNEL        12         VARCHAR2         200
30 MV_BRM_COMMUNICATION_DM            COMM_OPTIN_FLAG         8 DOUBLE PRECISION           0
31 MV_BRM_COMMUNICATION_DM            COMM_OPTIN_DATE        93             DATE          19
32 MV_BRM_COMMUNICATION_DM         COMM_OPTIN_CHANNEL        12         VARCHAR2         200
33 MV_BRM_COMMUNICATION_DM               COMM_OPTLOCK         8 DOUBLE PRECISION           0
34 MV_BRM_COMMUNICATION_DM            COMM_ERROR_FLAG         8 DOUBLE PRECISION           0
35 MV_BRM_COMMUNICATION_DM          COMM_BOUNCED_FLAG         8 DOUBLE PRECISION           0
36 MV_BRM_COMMUNICATION_DM               COMM_ONE_OFF         8 DOUBLE PRECISION           0
37 MV_BRM_COMMUNICATION_DM               COMM_OWNERID        12         VARCHAR2        1020
38 MV_BRM_COMMUNICATION_DM             COMM_OWNERNAME        12         VARCHAR2        2044
39 MV_BRM_COMMUNICATION_DM             COMM_OWNER_KEY         3          DECIMAL          19
40 MV_BRM_COMMUNICATION_DM                COMM_ORG_ID         3          DECIMAL          19
41 MV_BRM_COMMUNICATION_DM              COMM_ORG_NAME        12         VARCHAR2        1020
42 MV_BRM_COMMUNICATION_DM        COMM_CONTENT_PURGED        12         VARCHAR2          16
43 MV_BRM_COMMUNICATION_DM         COMM_ACTIVITY_DATE        93             DATE          19
44 MV_BRM_COMMUNICATION_DM              ACTIVITY_DATE        93             DATE          19
45 MV_BRM_COMMUNICATION_DM               COMM_ITEM_PK         3          DECIMAL          19
46 MV_BRM_COMMUNICATION_DM              COMM_ERROR_PK         3          DECIMAL          19
47 MV_BRM_COMMUNICATION_DM       COMM_ADDRESS_PRLO_PK         8 DOUBLE PRECISION           0
48 MV_BRM_COMMUNICATION_DM       COMM_ADDRESS_LOPR_PK         8 DOUBLE PRECISION           0
49 MV_BRM_COMMUNICATION_DM         COMM_ADDRESS_PR_PK         8 DOUBLE PRECISION           0
50 MV_BRM_COMMUNICATION_DM    COMM_OUTBOUNDMESSAGE_ID        12         VARCHAR2         144
51 MV_BRM_COMMUNICATION_DM                  COMM_PIDM         3          DECIMAL          19
52 MV_BRM_COMMUNICATION_DM            COMM_CREATED_BY        12         VARCHAR2        1020
53 MV_BRM_COMMUNICATION_DM         COMM_CREATION_DATE        -4     TIMESTAMP(3)  2147483647
54 MV_BRM_COMMUNICATION_DM COMM_GENERIC_TEMPLATE_NAME        12         VARCHAR2        1020
55 MV_BRM_COMMUNICATION_DM         COMM_TEMPLATE_NAME        12         VARCHAR2        2044
56 MV_BRM_COMMUNICATION_DM      COMM_TEMPLATE_VERSION        12         VARCHAR2        1020
57 MV_BRM_COMMUNICATION_DM             DATE_COMM_SENT        -4     TIMESTAMP(3)  2147483647
58 MV_BRM_COMMUNICATION_DM             COMM_DATE_SENT        -4     TIMESTAMP(3)  2147483647
59 MV_BRM_COMMUNICATION_DM COMM_COMMUNICATION_CHANNEL        12         VARCHAR2        1020
60 MV_BRM_COMMUNICATION_DM               COMM_SUBJECT        12         VARCHAR2        1020
61 MV_BRM_COMMUNICATION_DM              COMM_EMAIL_PK         3          DECIMAL          19
62 MV_BRM_COMMUNICATION_DM            COMM_TO_ADDRESS        12         VARCHAR2        1020
63 MV_BRM_COMMUNICATION_DM            COMM_ISP_DOMAIN        12         VARCHAR2        4000
64 MV_BRM_COMMUNICATION_DM                COMM_CCLIST        12         VARCHAR2        1020
65 MV_BRM_COMMUNICATION_DM               COMM_BCCLIST        12         VARCHAR2        1020
66 MV_BRM_COMMUNICATION_DM               COMM_REPLYTO        12         VARCHAR2        1020
67 MV_BRM_COMMUNICATION_DM                COMM_SENDER        12         VARCHAR2        1020
68 MV_BRM_COMMUNICATION_DM        COMM_REFERENCE_DESC        12         VARCHAR2        1020
69 MV_BRM_COMMUNICATION_DM          COMM_OPTOUT_TOKEN        12         VARCHAR2        1020
70 MV_BRM_COMMUNICATION_DM        COMM_DELIVERED_FLAG         8 DOUBLE PRECISION           0
71 MV_BRM_COMMUNICATION_DM           COMM_OPTOUT_FLAG         8 DOUBLE PRECISION           0
72 MV_BRM_COMMUNICATION_DM           COMM_OPTOUT_DATE        93             DATE          19
73 MV_BRM_COMMUNICATION_DM        COMM_OPTOUT_CHANNEL        12         VARCHAR2         200
74 MV_BRM_COMMUNICATION_DM            COMM_OPTIN_FLAG         8 DOUBLE PRECISION           0
75 MV_BRM_COMMUNICATION_DM            COMM_OPTIN_DATE        93             DATE          19
76 MV_BRM_COMMUNICATION_DM         COMM_OPTIN_CHANNEL        12         VARCHAR2         200
77 MV_BRM_COMMUNICATION_DM               COMM_OPTLOCK         8 DOUBLE PRECISION           0
78 MV_BRM_COMMUNICATION_DM            COMM_ERROR_FLAG         8 DOUBLE PRECISION           0
79 MV_BRM_COMMUNICATION_DM          COMM_BOUNCED_FLAG         8 DOUBLE PRECISION           0
80 MV_BRM_COMMUNICATION_DM               COMM_ONE_OFF         8 DOUBLE PRECISION           0
81 MV_BRM_COMMUNICATION_DM               COMM_OWNERID        12         VARCHAR2        1020
82 MV_BRM_COMMUNICATION_DM             COMM_OWNERNAME        12         VARCHAR2        2044
83 MV_BRM_COMMUNICATION_DM             COMM_OWNER_KEY         3          DECIMAL          19
84 MV_BRM_COMMUNICATION_DM                COMM_ORG_ID         3          DECIMAL          19
85 MV_BRM_COMMUNICATION_DM              COMM_ORG_NAME        12         VARCHAR2        1020
86 MV_BRM_COMMUNICATION_DM        COMM_CONTENT_PURGED        12         VARCHAR2          16
87 MV_BRM_COMMUNICATION_DM         COMM_ACTIVITY_DATE        93             DATE          19
88 MV_BRM_COMMUNICATION_DM              ACTIVITY_DATE        93             DATE          19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:55:29.663

这是我的想法，还有一些可以尝试的东西。

有趣的是，它失败的字段是表中 TIMESTAMP 的第一个实例。研究 TIMESTAMP 可能与它有关的理论，首先让我们在 MV_BRM_COMMUNICATION_DM 上创建一个视图，它将所有 TIMESTAMP 字段转换为 DATE：

```
CREATE VIEW MV_BRM_COMM_DM_VIEW AS
  SELECT COMM_ITEM_PK, COMM_ERROR_PK, COMM_ADDRESS_PRLO_PK,
         COMM_ADDRESS_LOPR_PK, COMM_ADDRESS_PR_PK,
         COMM_OUTBOUNDMESSAGE_ID, COMM_PIDM, COMM_CREATED_BY,
         TO_DATE(COMM_CREATION_DATE) AS COMM_CREATION_DATE,
         COMM_GENERIC_TEMPLATE_NAME, COMM_TEMPLATE_NAME,
         COMM_TEMPLATE_VERSION,
         TO_DATE(DATE_COMM_SENT) AS DATE_COMM_SENT,
         TO_DATE(COMM_DATE_SENT) AS COMM_DATE_SENT,
         COMM_COMMUNICATION_CHANNEL, COMM_SUBJECT, COMM_EMAIL_PK,
         COMM_TO_ADDRESS, COMM_ISP_DOMAIN, COMM_CCLIST,
         COMM_BCCLIST, COMM_REPLYTO, COMM_SENDER, COMM_REFERENCE_DESC,
         COMM_OPTOUT_TOKEN, COMM_DELIVERED_FLAG, COMM_OPTOUT_FLAG,
         COMM_OPTOUT_DATE, COMM_OPTOUT_CHANNEL, COMM_OPTIN_FLAG,
         COMM_OPTIN_DATE, COMM_OPTIN_CHANNEL, COMM_OPTLOCK,
         COMM_ERROR_FLAG, COMM_BOUNCED_FLAG, COMM_ONE_OFF,
         COMM_OWNERID, COMM_OWNERNAME, COMM_OWNER_KEY, COMM_ORG_ID,
         COMM_ORG_NAME, COMM_CONTENT_PURGED, COMM_ACTIVITY_DATE,
         ACTIVITY_DATE
    FROM MV_BRM_COMMUNICATION_DM 
```

现在，将您的 SELECT 更改为从视图中读取，看看情况是否有所不同。

不能保证，因为我无法针对您的环境进行测试，但这是开始的事情。

分享和享受。

# c# - 我可以依靠 DataAvailable 来获取 SSL 包装的网络流吗？

> ID：11954739
> 
> 赞同：2
> 
> 时间：2012-08-14T14:38:13.657
> 
> 标签：c#, ssl, network-programming

我正在处理一个执行大量异步读取的应用程序。为了提高性能，我想直接对`Read`from 进行同步调用，`SslStream`前提是调用不会阻塞。

它`SslStream`本身并不`DataAvailable`像底层`NetworkStream`那样提供属性。

那么，鉴于我知道它是一个正在读取的包装网络流，是否会`true`保证`DataAvailable`对 的调用`SslStream`不会导致阻塞？

像这样：

```
public void Read(NetworkStream netStream, SslStream sslStream)
{
    // given that netStream is the inner stream of sslStream
    if (netStream.DataAvailable)
    {
        // Will not block
        sslStream.Read(...);
    }
    else
    {
        // Would block
        sslStream.Read(...);
    }
} 
```

`SslStream`已经过身份验证并准备就绪。我不确定除了加密/解密之外是否还有其他开销。我认为答案取决于是否`SslStream`需要从底层流中读取超过一个字节才能读取一个加密字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:06:55.003

不，它不能保证，因为在下一层有 SSL 记录，你可能还没有收到完整的记录，从密码学上讲，在你拥有一切之前你不能做任何事情，因为你首先必须检查 MAC 的完整性。

但更重要的是，我质疑整个策略。只需在正常代码中根据需要发出读取：不要试图猜测哪种模式在每种情况下最有效。SSL 开销可能会淹没同步/异步差异，并且网络带宽限制会淹没它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:52:21.107

这取决于使用中的密码——使用 RC4 或其他流密码的端点更有可能一次解密一个字节，但不能保证。为 DES 或其他块密码配置的端点将等待，直到一个完整的块可用。

您可以使用可窥视的中间缓冲流来做一些棘手的事情，并尝试在进行阻塞读取之前确保您有一个合理的块大小，但这很讨厌。

如果你绝对不能阻止，我会坚持 BeginRead 和完成委托。

# php - 使用 file_get_contents 在 php 中进行屏幕截图

> ID：11954742
> 
> 赞同：-2
> 
> 时间：2012-08-14T14:38:21.020
> 
> 标签：php, screen, screen-scraping

嗨，我对屏幕抓取非常陌生。我正在尝试从酒店预订网站上抓取评论以显示在我的网站上。

我已经做到了这一点，但有点卡住了。任何人都可以帮忙吗？

```
<?php 
$data = file_get_contents('http://www.laterooms.com/en/hotel-reviews/238902_the-westfield-bb-sandown.aspx');
$regex = '/<div id="summary">
(.+?)</div>/';
preg_match($regex,$data,$match);
var_dump($match); 
echo $match[1];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:50:05.240

使用[DomDocument](http://php.net/manual/en/class.domdocument.php)

```
<?php
  define('URL', 'http://www.laterooms.com/en/hotel-reviews/238902_the-westfield-bb-sandown.aspx');
  $doc = new DOMDocument();
  $doc->loadHTML(file_get_contents(URL));
  $summary = $doc->getElementById('summary');
  // also have $doc->getElementsByTagName , etc
  var_export($summary);
?> 
```

此外，对于更复杂的查询，您应该考虑查看[XPATH](http://php.net/manual/en/simplexmlelement.xpath.php)（使用类似 jQuery 的语法）

# hudson - Phantomjs 不等待在 angularjs 中运行的脚本

> ID：11954743
> 
> 赞同：0
> 
> 时间：2012-08-14T14:38:26.537
> 
> 标签：hudson, angularjs, phantomjs

我试图在哈德逊服务器上使用 phantomjs 调用 angularjs 测试。但似乎 phantomjs 在 angularjs 完成测试之前自行关闭了。它是否有某种方法或方法可以让 phantomjs 等到 angular 测试脚本完成后再获取结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:47:44.533

也许您可以查看[QUnit runner 以获取 PhantomJS](https://github.com/ariya/phantomjs/blob/master/examples/run-qunit.js)示例，它附带 phantomjs。在名为**waitFor**的函数中。但我不知道这个例子是否会对你使用 angularjs 有所帮助。对于 QUnit，主要思想是使用 setInterval 函数检查 id = 'qunit-testresult' 的 div 以确定 QUnit 是否已完成。

**注意** 不要忘记 JavaScript 和 PhantomJS 的异步特性 :)

# java - 简单的 Java 构造函数

> ID：11954744
> 
> 赞同：0
> 
> 时间：2012-08-14T14:38:26.537
> 
> 标签：java, constructor

对于以下代码行：

```
public class Base{

    private int num1 = 0;
    private int num2 = 0;
    private static int dif = 0;

    public Base(int num){
         this(num,num+1);
         System.out.println("Base constructor1");
    }

    public Base(int num1, int num2){
         System.out.println("Base constructor2");
         this.num1 = num1;
         this.num2 = num2;
         dif = num2 - num1;
    }

    public int sum(){
        return num1 + num2;
    }

    public static int getDif(){
        return dif;
    }
} 
```

那两行应该打印什么？

```
Base b1 = new Base(10);
Base b2 = new Base(4,7); 
```

我认为，如果我能理解以下这句话： `this(num,num+1);`我会理解一切......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:39:36.853

```
this(num,num+1); 
```

在同一对象中调用以下构造函数

```
public Base(int num1, int num2){ 
```

为什么？

如果用户通过使用单个参数调用构造函数来创建对象`Base`，则您的代码会在上述构造函数和集合`num2`和`diff`值中进行一些默认计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:42:50.393

第一条语句`Base b1 = new Base(10);`是构造函数链接的示例，它将产生以下结果 -

```
Base constructor2 

Base constructor1 
```

第二个很简单。它会打印

```
Base constructor2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:41:01.380

```
Base b1 = new Base(10);
Base b2 = new Base(4,7); 
```

这将打印出：

> 基础构造函数2
> 
> 基础构造函数1
> 
> 基础构造函数2

由于构造函数是链式的，第一个构造函数的实例化调用`b1`( `public Base(int num1)`) 调用另一个构造函数 ( `public Base(int num1, int num2)`)，打印出“基础构造函数 2”，然后执行返回以打印出“基础构造函数 1”。

`b2`然后实例化并仅打印出“Base constructor2”，因为使用的构造函数没有链接到另一个构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:42:39.717

由于您在第一次调用中传递了一个整数参数：

```
Base b1 = new Base(10); 
```

它将仅使用一个整数参数调用构造函数并打印出：

```
Base constructor1 
```

第二个调用传入两个整数参数，因此它将使用两个整数参数调用构造函数并打印输出：

```
Base constructor2 
```

我建议自己测试一下，尝试一下可能是更好地学习和理解的最简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T14:42:58.007

当您调用具有多个定义的函数时，例如

```
public Base(int num) 
```

对比

```
public Base(int num1, int num2) 
```

选择一个取决于您使用的参数。所以，通过调用

```
new Base(5); 
```

您将使用第一个构造函数，只有一个 int。

这个构造函数说，“好吧，我想要两个都定义，但我只有一个数字。让我们调用第二个构造函数，让`num2`等于第一个数字加一。

```
this(num,num+1); //num == 5 
```

来电

```
Base(int num1, int num2) 
```

提供的位置`num1 == 5`，以及`num2 == 6`提供的数字加 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T14:43:27.697

如果您要运行这两行，您会看到...

```
Base constructor2
Base constructor1
Base constructor2 
```

在您的控制台中，因为第一个对象声明将调用一个构造函数然后另一个，而第二个声明只会调用第二个构造函数。

# salesforce - 添加商机行时，Apex 触发默认字段值

> ID：11954745
> 
> 赞同：0
> 
> 时间：2012-08-14T14:38:31.427
> 
> 标签：salesforce, apex-code

我不是开发人员，但我正在尝试学习，因为我已经到了需要代码来进一步定制和自动化的地步。我为商机产品创建了一个自定义“销售价格”字段，用于替换标准销售价格字段。我希望自定义字段默认使用价格手册条目清单价格（单价）值，标准销售价格字段也是如此。然后，我将标准销售价格字段更新为等于自定义销售价格乘以月份条款的数量（将在机会级别更新并通过触发器自动填充到机会产品的反射自定义字段中的自定义字段）。我已经为默认的销售价格值和默认的月份条款创建了触发器，但现在似乎都不起作用。下面是创建新机会行项目时销售价格值的触发器。添加新产品行项目时不确定如何将价格设为默认值？它应该只在添加新时默认，因为我不希望它覆盖他们放入和保存的任何金额。但如果他们回到 opp 并稍后添加其他项目，它也需要工作。非常感谢您对此的任何意见。我花了几个小时搜索帖子和其他文档，但我没有那种天生的开发人员大脑，我正在敲我的头！但如果他们回到 opp 并稍后添加其他项目，它也需要工作。非常感谢您对此的任何意见。我花了几个小时搜索帖子和其他文档，但我没有那种天生的开发人员大脑，我正在敲我的头！但如果他们回到 opp 并稍后添加其他项目，它也需要工作。非常感谢您对此的任何意见。我花了几个小时搜索帖子和其他文档，但我没有那种天生的开发人员大脑，我正在敲我的头！

```
trigger SalesPricecustom on OpportunityLineItem (before insert) {
    Set<Id> pbeIds = new Set<Id>();
        for (OpportunityLineItem oli : Trigger.new) 
        pbeIds.add(oli.pricebookentryid);

    Map<Id, PricebookEntry> entries = new Map<Id, PricebookEntry>(
        [select UnitPrice from pricebookentry 
         where id in :pbeIds]);     

for (OpportunityLineItem oli :trigger.new){
     if(pricebookentry.unitprice <> null && oli.sales_price__c == null){

    oli.sales_price__c = entries.get(oli.pricebookEntryId).UnitPrice;  
  }
}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:09:39.547

你能用其他语言描述你的问题吗？如果您想在更新旧数据时重新计算销售价格字段（不仅仅是插入新行），您应该为此触发器使用“更新前”事件，如下所示：

```
trigger SalesPricecustom on OpportunityLineItem (before insert, before update){
    //Here is your code
} 
```

此外，您可以检查哪些字段已更改，它将帮助您不再执行触发逻辑，如果其他字段已更新（用于此触发器上下文变量 - Trigger.new、Trigger.old、Trigger.newMap、Trigger .oldMap）。

# google-chrome - Twitter按钮未在chrome中显示推文计数

> ID：11954750
> 
> 赞同：5
> 
> 时间：2012-08-14T14:38:43.377
> 
> 标签：google-chrome, twitter

我注意到 twitter 按钮没有在 chrome 中显示推文计数（甚至在他们[自己的开发人员页面](https://dev.twitter.com/docs/tweet-button)中也没有）。

有谁知道问题是什么以及是否有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:24:50.753

它对我来说很好，尝试打开一个新的私人窗口（Ctrl + Shift + N）。

有时 chrome 插件会阻止某些页面，例如 adBlocker 插件

# java - 在 Java 客户端中“即时”更改 derbyDB 架构

> ID：11954755
> 
> 赞同：1
> 
> 时间：2012-08-14T14:39:00.397
> 
> 标签：java, schema, derby

我在我的应用程序中嵌入了 derbyDB，我目前正在测试我的代码。

如果我发送以下 SQL 代码

```
set current schema  [newSchemaName]; 
```

从 ij 然后我可以设置模式和来自数据库的响应

```
show tables; 
```

将仅报告先前确定的 newSchemaName 中存在的表（尽管这似乎并不总是有效！）

如果我从 java 代码做类似的事情，然后执行

```
getCurrentConection.getSchema(); 
```

从上面返回的值从不建议在 SQL 中传递 newSchemaName（尽管如果我使用准备好的语句，它会按预期返回 newSchemaName）。

这是一些额外的背景信息...

我有默认数据库名称“derbyTest”并创建了 3 个其他模式。管理员 S1 S2 从逻辑上分离/隐藏用户不需要知道的信息

我需要在操作期间更改架构（例如：如果需要查看更多“微妙”信息，管理员将更改架构）。

为此，我为 setSchema(String newSchemaName) 创建了一个方法，该方法创建模式（如果它不存在）然后连接到它。

但是在运行代码片段之后

```
/**
*method to change to a given schema
*@param newSchemaName the new schema to change to
/
public void SetSchema(String newSchemaName){

String sql = newSchemaName.toUpperCase();//make sure the newSchemaName is in upper case.

ResultSet rs;
        try
        {
            rs = this.sendQry("select schemaName from sys.sysschemas where schemaname = '" + sql + "'");//does this schema exist in the DB
        if (rs.next()) 
        {//the schema already exists
                //send some messages to the user about the change of schema
            errLog.setDevError(1, "derbyDB schema" +sql +" already exists ");
            errLog.add(2, "connecting to " + sql);
                //next line create the SQL for changing to the newSchemaName supplied
            this.sendSQL("set current schema " + sql);//connect to the schema
                //log a message to display the current schema in the DB
                //this next log never shows a change to the newSchemaName unless
                //I use a prepared statement in my java code.
            errLog.add(1, "current DB schema is " + getCurrentConection.getSchema();
    }
        else{//the schema does not exist
        //send a message to the user and output log
        errLog.setDevError(1, "derbyDB schema" +sql +" does not exist ");
        //code to send message asking if user wants to create the new schema....
        }

}//end try
        catch{
//catch errors

}
}//end method 
```

如果我查看文档[http://db.apache.org/derby/docs/dev/ref/rrefsqlj32268.html](http://db.apache.org/derby/docs/dev/ref/rrefsqlj32268.html)来设置架构，我的 SQL 是正确的，并且如果我直接从 ij 运行，代码就可以工作。

我知道 ij 和客户端之间存在一些差异（诸如 describe 之类的功能在客户端中不起作用，您需要使用元数据来放屁）。

设置模式语句的情况是否相同。或者这仅适用于我即将测试的准备好的语句。

如果是这样，那就引出了一个问题，为什么我只能从准备好的语句中更改模式？

想法和评论被极大地接受。

大卫

编辑：准备好的语句用于更改架构。所以现在只剩下第二个问题了。为什么准备好的陈述和普通陈述之间的区别......我认为谷歌的时间？

编辑：我不知道这是否会有所作为，但我在 Windows 平台上，使用标准 JDK (6)，并且 eclipse indigo 在 eclipse 中运行 jUnit 测试。如果它可能有助于排除故障，我还可以使用 opendJDK 在 Linux(ubuntu) 上进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:24:21.797

我不确定你的问题是什么。

您可以在表引用中明确指定架构，如下所示：

```
SELECT * FROM S1.TABLE_NAME 
```

或者

```
UPDATE S2.TABLE_NAME SET COL1=VALUE1 
```

等等

或者，如果您愿意，您可以从表引用中省略模式名称，仅说：

```
SELECT * FROM TABLE_NAME 
```

或者

```
UPDATE TABLE_NAME SET COL1=VALUE1 
```

等等，在这种情况下，您需要为这些语句建立一个隐式模式，方法是发出 SET SCHEMA 语句，或者使用现有的默认模式，该模式与您登录时的用户名匹配。

我认为您关于准备好的语句与未准备好的语句的问题与这样一个事实有关，即如果您没有指定显式模式，则在准备语句时会建立默认模式名称。

如果是我，并且我关心我使用的是什么模式，我会在我的所有 SQL 语句中的所有表引用中明确指定模式，然后我会确定我什么时候使用的模式。

# android - Android：如何实现“Facebook 轻松登录”？

> ID：11954764
> 
> 赞同：0
> 
> 时间：2012-08-14T14:39:16.647
> 
> 标签：android, facebook

很难用语言来解释我在说什么。

当您在手机上打开应用程序时，有时它需要您提供用户名/电子邮件和密码凭据。一些应用程序具有“使用 Facebook 登录”选项，并允许用户快速登录到 facebook。通过这样做，它会使用您的 Facebook 信息为您提供一个新帐户（我猜？）。

我知道你也可以在我的网站上做到这一点。

我的问题是这叫什么？facebook 开发人员对此有一个特定的名称吗？如果是这样，我如何通过 android，甚至通过 web 开发来实现它？

谢谢！！

更新：例如：当您登录此 stackoverflow 站点时。您可以点击“用Facebook登录”快速登录，无需填写信息。我知道它与stackoverflow android应用程序相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:42:59.650

Facebook 使用[OAuth 2.0](http://oauth.net/2/)。

相关：[OAuth Facebook API 教程](https://stackoverflow.com/questions/8200212/oauth-facebook-api-tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:50:42.557

我认为您正在寻找“OpenID”这个词。Facebook 登录是 OpenID。允许用户对不同的网页使用相同的凭据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:42:24.430

您正在寻找的是所谓的 Facebook 单点登录。[facebook 开发人员文档](https://developers.facebook.com/docs/mobile/android/sso/)应该足以让您入门。

# android - GSON 不会将 Json 字符串转换为类

> ID：11954765
> 
> 赞同：1
> 
> 时间：2012-08-14T14:39:21.437
> 
> 标签：android, json, gson, android-4.0-ice-cream-sandwich

我正在尝试将 JSonObject 字符串转换为一些特定的类。

```
MyClass mc= new Gson().fromJson(jo.toString(),MyClass.class); 
```

在这一步之后 mc 的所有值都为空。

jo.toString() 的值：

```
{
  "__type":"MyClass:#MyProject.Model",
  "ID":1,
  "Comment":"First Record",
  "SubClassID":534,
  "Active":true,
  "Date":"\/Date(1323087840000+0200)\/"
} 
```

MyClass.java 具有属性 ID、注释...

感谢和问候...

MyClass.Java：

```
public class MyClass extends ABase
{
    private String _Comment;
    public String getComment(){
        return _Comment;
    }
    public void setComment(String value){
        _Comment = value;
    }
    private Integer _ID;
    public Integer getID(){
        return _ID;
    }
    public void setID(Integer value){
        _ID = value;
    }
    private java.util.Date _Date;
    public java.util.Date getDate(){
        return _Date;
    }
    public void setDate(java.util.Date value){
        _Date = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:14:11.650

问题是 JSON 元素名称与 Java 字段名称不匹配，并且没有为 Gson 提供明确的替代名称映射配置。

可能的解决方案：

1.  更改 Java 字段名称以与 JSON 元素名称完全匹配。当然，这并不总是可行的，例如，当 JSON 元素名称包含对 Java 字段名称无效的字符或格式时。

2.  更改 JSON 元素名称以与 Java 字段名称完全匹配。当然，这并不总是可行的，例如，当 JSON 来自第三方时。

3.  使用[@SerializedName](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/annotations/SerializedName.html)注释或[FieldNamingPolicy](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/FieldNamingPolicy.html)[为 Gson 提供名称映射](https://sites.google.com/site/gson/gson-user-guide#TOC-JSON-Field-Naming-Support)。

# mysql - 带有函数 now() 的过程中的 INSERT 不正确

> ID：11954767
> 
> 赞同：0
> 
> 时间：2012-08-14T14:39:29.487
> 
> 标签：mysql, function, insert, procedure, concat

我认为问题在于查询 CONCAT (INSERT....) 中的字符示例 " 或 ' 我总是得到错误：

> 0 16:35:45 调用 InsertUser(990099,2,1,"Title1","Gosc","aaa","192.168.1.1",21426,23453245,1) 错误代码：1064。你有一个错误SQL 语法；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '16:35:44, 1, 1)' 附近使用正确的语法

程序：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS InsertUser $$
CREATE PROCEDURE `InsertUser`
      (UserId int, ServiceId int(11), CommentsId int(11), 
       Title varchar(255), Nick varchar(20), content text,
       Ip varchar(15), TableCrc int(5),Crc32 int(11) unsigned,
       ArticleId int(11))
BEGIN

        DECLARE tableName VARCHAR(65535);

        set tableName = CONCAT('User',userId);

        CALL CreateUsersTable(tableName);

        set @a = CONCAT("INSERT INTO `", tableName ,"` (`ServiceId`,   
                               `CommentsId`, `Title`, `Content`,`Ip`,
                               `TableCrc`, `Crc32`, `ArticleId`,`Date`,
                                `ViewStatus`, `CommentStatus`) 
                         VALUES (",ServiceId,", ",CommentsId,", '",Title,"',
                                 '",Content,"', '",Ip,"', ",TableCrc,", 
                                ",Crc32,", ",ArticleId,", 
                             ",now(),", 1, 1);");

        PREPARE stmi FROM @a;
        EXECUTE stmi;
        DEALLOCATE PREPARE stmi;          

END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:41:26.473

NOW() 返回的字符串值中有一个嵌入的空格

```
YYYY-MM-DD HH:MM:SS
          ^ 
```

在您的 SQL 语句中，需要将其视为字符串，这意味着它需要用单引号括起来。作为一个单独的问题，您不需要将分号作为 SQL 文本的一部分：

改变这个：

```
", ",now(),", 1, 1);");
                   ^ 
```

对此：

```
", '",now(),"', 1, 1)");
   ^         ^ 
```

# java - java中的日期减法

> ID：11954768
> 
> 赞同：0
> 
> 时间：2012-08-14T14:39:29.820
> 
> 标签：java, date

> **可能重复：**
> [如何在 Java 中减去日期？](https://stackoverflow.com/questions/3526485/how-do-you-subtract-dates-in-java)

我正在创建 java 桌面应用程序。在该应用程序中，用户提供一些日期输入。所以我使用 3party 库“jCalendar.jar”。为了验证，我想减去两个日期。有没有办法**在java中减去两个日期？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:43:27.317

Java 不给太多，你可以看看开源：试试[JODA](http://joda-time.sourceforge.net/userguide.html)。

```
DateTime dt1 = new DateTime(2000, 1, 1, 0, 0, 0, 0);
DateTime dt2 = new DateTime(2010, 1, 1, 0, 0, 0, 0);
int noOfdays = Days.daysBetween(dt1, dt2).getDays(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:42:44.153

我建议看一下[Joda Time](http://joda-time.sourceforge.net)，它是 Java 中日期处理的事实标准。给定两个`java.util.Dates`,`javaDate1`和`javaDate2`:

```
DateTime d1 = new DateTime(javaDate1);
DateTime d2 = new DateTime(javaDate2);

Period diff = new Period(d1, d2); 
```

您现在可以查询`diff`对象的差异，拆分为它的组成部分（年、月、日等）。有关更多信息，请参阅 Joda 时间[段指南](http://joda-time.sourceforge.net/key_period.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:47:59.043

如果您使用的是 Java 日期或 Java 日历，那么您可以使用以下内容：

```
Calendar firstOperand = new GregorianCalendar();
Calendar secondOperand = new GregorianCalendar();
Calendar result = new GregorianCalendar();

result.setTimeInMillis(firstOperand.getTimeInMillis() - secondOperand.getTimeInMillis()); 
```

编辑：正如评论中所指出的，将结果存储在日历中没有多大意义。您仍然可以使用返回的毫秒数进行操作。

如果可能的话，您还可以使用库来处理这个问题，比如[JODA](http://www.joda.org/joda-time/index.html)。

它允许您从两个日期和更多事物之间获取[秒数](http://www.joda.org/joda-time/apidocs/org/joda/time/Seconds.html#secondsBetween-org.joda.time.ReadableInstant-org.joda.time.ReadableInstant-)/[分钟](http://www.joda.org/joda-time/apidocs/org/joda/time/Minutes.html#minutesBetween-org.joda.time.ReadableInstant-org.joda.time.ReadableInstant-)数/[天数](http://www.joda.org/joda-time/apidocs/org/joda/time/Days.html#daysBetween-org.joda.time.ReadableInstant-org.joda.time.ReadableInstant-)/[月数](http://www.joda.org/joda-time/apidocs/org/joda/time/Months.html#monthsBetween-org.joda.time.ReadableInstant-org.joda.time.ReadableInstant-)/[等。](http://www.joda.org/joda-time/apidocs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:44:27.403

您可以使用[java.util.GregorianCalendar](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/GregorianCalendar.html)

创建此类的一个实例，然后调用 setTime() 方法来设置您的日期。最后使用这个类的方法。

# javascript - 骨干搜索多模型

> ID：11954771
> 
> 赞同：1
> 
> 时间：2012-08-14T14:39:32.980
> 
> 标签：javascript, search, backbone.js

我最近一直在尝试 Backbone，并且有一个非常基本的问题。

我需要搜索不同类型的记录，搜索 API 返回一个 JSON 响应，例如

```
{ foo: 
  [
      { name: 'foo1', url: '/foo1' },
      { name: 'foo2', url: '/foo2' }
  ],
  bar:
  [ { name: 'bar1', url: '/bar1' } ],
  baz:
  [ { name: 'baz1', url: '/baz1' } ]
} 
```

我有一个 Foo、Bar 和 Baz 的骨干模型。获取时应该访问我的服务器并为我获取搜索结果的集合。我尝试过类似的事情

```
window.searchEntities = Backbone.Collection.extend({
  url: '/get_search_results'

  model: function(attrs, options) {
    //Typecast the JSON to Foo, Bar and Baz Models
  });      
}); 
```

但是，我不知道如何解析服务器返回的结果，以便我的集合包含模型 Foo、Bar 和 Baz？或者我应该调整服务器返回的结果，以便使用 Backbone 更容易处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:31:33.720

As I'm seeing your JSON is not returning 3 different Models but 3 different Collection due the 3 of them are containing Arrays.

I think you should start from the beginning, If I understood weel you want to return a bunch of Models of different type, let's say:

```
[
  {
    type: "Foo",
    name: "foo1",
    url: "/foo1"
  },

  {
    type: "Foo",
    name: "foo2",
    url: "/foo2"
  },

  {
    type: "Bar",
    name: "bar1",
    url: "/bar1"
  },

  {
    type: "Baz",
    name: "baz1",
    url: "/baz1"
  },
] 
```

I see a Collection there, and also different Models of different types.

Now let's see the SearchCollection, I don't think you can play with the `model` property like you show in your example, so let's say all the Models has a common Model parent `Result`:

```
window.SearchEntities = Backbone.Collection.extend({
  url: '/get_search_results'

  model: Result  
}); 
```

From here we can do it simple and don't create sub-classes of Result if there is not a real need for it:

```
window.Result = Backbone.Model.extend({
  initialize: function(){
    this.url = this.get( "url" );
  }
}); 
```

And you're done:

```
var searchEntities = new window.SearchEntities();
searchEntities.fetch();

// ... wait for the fetch ends

searchEntities.at(0).get( "type" ); //=> "Foo" 
```

Still I don't feel confortable by two reasons:

*   I don't see clear why you want to play with the `Result.url`.
*   Where are the `ids` of your Models? which are very important for Backbone.

# c# - 如何在忽略 DateTime 属性的时间部分的同时使用 Linq by Date 选择项目？

> ID：11954773
> 
> 赞同：8
> 
> 时间：2012-08-14T14:39:33.953
> 
> 标签：c#, .net, linq, entity-framework

我有一个带有 DateTime 参数的对象列表。

我想使用 LINQ 查询此列表并按日期返回条目，但忽略时间部分

因此，我想选择 2012 年 8 月 10 日任何时候出现的任何条目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:42:34.380

您可以将此代码段用于内存查询：

```
var theDate = new DateTime(2012, 08, 10);
var entriesOnTheDate = list.Where(item => item.DateTimeField.Date.Equals(theDate)); 
```

对于 SQL Server 数据源的查询，您可以使用[`SqlFunctions.DatePart`](http://msdn.microsoft.com/en-us/library/dd487171.aspx)提取日、月和年，并分别进行比较。

```
var entriesOnTheDate = dbContext
    .EntriesWithDateTimeField
    .Where(item => SqlFunctions.DatePart("Year", item.DateTimeField) == 2012
                && SqlFunctions.DatePart("Month", item.DateTimeField) == 8
                && SqlFunctions.DatePart("Day", item.DateTimeField) == 12); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:44:48.380

您可以添加涵盖一整天的时间范围：

```
entries.Where(e => e.Property.Date >= new DateTime(2012, 08, 10) 
                   && e.Property.Date < new DateTime(2012, 08, 11)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T14:42:45.240

```
 entries.Where( e => e.Property.Date == new DateTime( 2012, 08, 10 ) ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-01T12:15:29.237

使用 EntityFunctions.TruncateTime 怎么样（从 EF 6 开始）

```
var result = context.Employees
.Where(x => EntityFunctions.TruncateTime(x.LoginDate) ==DateTime.Today)
.FirstOrDefault(); 
```

命名空间：System.Data.Objects.EntityFunctions.TruncateTime

# apex-code - 如何在 Apex 中为 Math.random() 设置种子

> ID：11954774
> 
> 赞同：3
> 
> 时间：2012-08-14T14:39:34.743
> 
> 标签：apex-code

有没有办法在 Apex 中为随机数生成器设置种子？如果是这样; 我要使用哪个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:33:06.300

在 Apex 中播种 RNG 可能是不可能的。如果您需要一个可重复的随机数序列，您必须自己实现一个种子伪随机数生成器。

在 Apex 平台上，我确信他们有大量可用于生成随机数的熵源，您无需为生成器播种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T00:28:51.543

无法在 Salesforce 中播种内置随机数生成器。我和你在同一条船上。我希望能够使用种子，这样我就可以创建可重复的随机数。

所以，我想我会尝试编写自己的RNG。我花了几天时间在互联网上搜索算法。我能够拼凑出一个非常全面的函数库，这些函数库是从各种来源借来的。这些类是：“Random.cls”，它是主要的 RNG 类，以及“Random_Test.cls”，它是测试代码。

它有以下方法：

1.  下一个整数（上限）
2.  nextLong（上限）
3.  nextDouble（上限）
4.  nextUniform() - 与 Math.Random() 相同的函数返回 0.0 到 1.0 之间的 Double。
5.  nextIntegerInRange（下限，上限）
6.  nextLongInRange（下限，上限）
7.  nextDoubleInRange（下限，上限）
8.  shuffle(List<Object>) - 破坏原始列表的顺序
9.  shuffleWithCopy(List<Object>) - 返回列表的混洗副本，以防您希望保留列表的原始顺序（效率低于“shuffle(List<Object>)”）

“Random.cls”记录了我借用的资源，以防您想了解更多关于随机数生成器的信息。

我将代码放在 GitHub 上供任何需要的人使用：[https ://github.com/DeviousBard/Salesforce/tree/master](https://github.com/DeviousBard/Salesforce/tree/master)

# javascript - 谷歌浏览器不执行所有 javascript 语句

> ID：11954776
> 
> 赞同：0
> 
> 时间：2012-08-14T14:39:54.243
> 
> 标签：javascript, google-chrome

我有一个`initView()`初始化所有值的函数，以便我的 HTML 页面看起来像它应该的样子。

在火狐，IE！并且歌剧一​​切正常，但是在谷歌浏览器中，当我将浏览器窗口变小然后再放大时，chrome似乎有点懒惰并且没有按照他应该做的那样呈现所有内容。问题是我什至无法检查出什么问题，因为如果我想打开 webinspector，突然一切都恢复正常了。

我能做些什么来避免这种情况？

initView 函数看起来像这样。没什么特别的，只是一些样式操作（大约 50 个）。

```
var initView = function(){
    $(element).css('left','50px').height('300px');
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:55:54.157

不知道这是否是答案，但 jQuery 的 height() 函数采用整数值并假设您给出的值以像素为单位。

也许其他浏览器正在根据需要解释您的 .height('300px') 并且 chrome 工作正常

# performance - 链接上的 Google Analytics（分析）事件跟踪会减慢用户体验吗？

> ID：11954778
> 
> 赞同：3
> 
> 时间：2012-08-14T14:39:58.413
> 
> 标签：performance, google-analytics, event-tracking

我正在考虑将 onclick 事件附加到我网站上的内部链接，以进行一些 Google Analytics 事件跟踪。但我担心性能。我的理解是工作流程会改变：

1.  用户点击超链接
2.  调用 Google Analytics 发送事件跟踪数据
3.  浏览器等待来自 GA 服务器的响应
4.  浏览器跟随链接并打开新页面。

我担心第 2 步和第 3 步引入的延迟。所以问题是：

1.  我对流程的理解是否正确？
2.  对 GA 事件跟踪的调用引入的典型延迟（以毫秒为单位）是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:19:49.127

事件跟踪通过从 Google 服务器发出图像请求来工作。一个问题是，跟踪指向新 URL 的链接会停止任何未决/正在进行的请求。如果浏览器在发出跟踪请求之前在同一窗口中打开指向新 URL 的链接，您可能会丢失分析数据。

因此，第 3 步不是等待，而是必须添加延迟以允许跟踪图像请求完成（或至少开始）。100-150 毫秒对于请求来说足够长，但足够短以至于不会被用户注意到。

我使用以下事件跟踪代码（jQuery 代码）的一些变体：

```
$('.someClassForTracking').click(function(e){
  _gaq.push(['_trackEvent', category, action, ...]);
  if (this.target != '_blank') {
    e.preventDefault();
    var url = this.href;
    setTimeout(function(){location.href = url}, 150);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T12:22:09.697

您可以使用该`hitCallback`机制，该机制已记录在案，`analytics.js`但也可用于`ga.js`.

这已在另一个问题上得到解决：[点击表单提交后在谷歌分析中跟踪事件](https://stackoverflow.com/questions/4086587/track-event-in-google-analytics-upon-clicking-form-submit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T01:20:46.777

您需要添加“hitCallback”，一旦在 GA 结束时完成跟踪就会触发。不要担心超时，因为如果 GA 需要很长时间才能返回响应，则此事件将触发 - 简而言之，它会处理事件超时。

```
<script>
/**
* Function that tracks a click on an outbound link in Google Analytics.
* This function takes a valid URL string as an argument, and uses that URL string
* as the event label.
*/
var trackOutboundLink = function(url) {
   ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
     function () {
     document.location = url;
     }
   });
}
</script> 
```

您还需要在链接中添加（或修改）onclick 属性。将此示例用作您自己的链接的模型：

```
<a href="http://www.example.com" onclick=”trackOutboundLink(‘http://www.example.com’); return false;">Check out example.com</a> 
```

取自这里：[https ://support.google.com/analytics/answer/1136920?hl=en](https://support.google.com/analytics/answer/1136920?hl=en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:43:22.203

我之前在内部和外部都实施过 GA，但在性能上没有看到明显的差异。此外，我相信跟踪链接点击的最新方法允许异步进行跟踪。

[集合 - Google 开发者指南](https://developers.google.com/analytics/devguides/collection/gajs/)

以这种方式添加跟踪将允许用户在异步完成跟踪时跟踪链接操作。

```
onclick="_gaq.push(['_trackEvent', 'myLink', 'clicked'])" 
```

# jquery - 计算列表中的选项数

> ID：11954787
> 
> 赞同：6
> 
> 时间：2012-08-14T14:40:29.623
> 
> 标签：jquery, hidden, option

我正在尝试计算列表中的选项数量。但是，由于在输入框中输入了搜索文本，某些选项已被隐藏。

我开始研究 .size() 和 .length 但只获得完整列表而不是那些没有隐藏的列表。为了简化，我对其进行了更改以尝试找到隐藏的选项（我可以使用 :not later）。

```
$('#txtListSearch').keyup(function(evt) {
    if($(this).val().length < 1) {
        $('#selContactLists option').show();
    } else {
        $('#selContactLists option:not(:contains("' + $(this).val() + '"))').hide();

        if($('#selContactLists').size()) {
            $('#selContactLists option:contains("' + $(this).val() + '")').first().attr('selected', 'selected');                
        } else {
        }
    }
    console.log($('#selContactLists option').filter(':hidden'));
}); 
```

我也试过：console.log($('#selContactLists option:hidden')); 我从来没有完全得到我期望的数字。谁能看到我哪里出错了？

更奇怪的是，如果我更改选择的“大小”以便默认显示多个项目，则在 chrome 上它永远不会隐藏任何选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:24:25.613

这对我有用，但是出于兼容性原因，您可能希望从元素中手动添加和删除 css display:none，而不是使用 show/hide...

```
alert($('#selContactLists option:not([style*=none])').length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T14:41:43.900

使用 jQuery 的[`:visible`](http://api.jquery.com/visible-selector/)选择器。

```
$('#selContactLists option:visible').length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:25:29.580

一种似乎有效的方法如下，尽管它通过将隐藏和显示的选项分配给变量然后使用`.length`这些变量的属性来作弊：

```
$('#txtListSearch').keyup(
    function(e) {
        var val = $(this).val().toLowerCase(),
            sel = $('#selContactLists');
        if (val.length < 1) {
            sel.find('option').show();
        }
        else {
            var shown = sel.find('option').filter(

                function() {
                    return $(this).text().toLowerCase().indexOf(val) !== -1;
                }).show().first().prop('selected',true),
                hidden = sel.find('option').filter(

                function() {
                    return $(this).text().toLowerCase().indexOf(val) == -1;
                }).hide();
            console.log(shown.length, hidden.length);
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/kcRUB/30/)。

请注意，以上是对您的原始代码的相对较大的重写。我使用了一些选择器缓存来减少从`keyup`方法中访问 DOM 的次数，并且，目前，由于这些`.toLowerCase()`方法，这是一个不区分大小写的搜索，并且还将 转移`selectedIndex`到第一个非隐藏选项（在 Chromium 中，这似乎是必需的，以便在键入`one`时显示时允许隐藏）。`select``t`

# xslt - 仅通过 XPath 计算特定子项

> ID：11954788
> 
> 赞同：2
> 
> 时间：2012-08-14T14:40:32.793
> 
> 标签：xslt, xpath

我有一种情况，只有当它们为真时，我才必须找到几个布尔字段值的计数。

**输入 XML：**

```
<PersonInfo>
  <ArrayOfPersonInfo>
   <CertAsAdultFlag>true</CertAsAdultFlag>
    <DeceasedFlag>true</DeceasedFlag>
    <WantedFlag>false</WantedFlag>
    <CPSORFlag>true</CPSORFlag>
    <ConditonalReleaseFlag>false</ConditonalReleaseFlag>
    <ProbationFlag>true</ProbationFlag>
    <MissingFlag>true</MissingFlag>
    <ATLFlag>true</ATLFlag>
    <CCWFlag>false</CCWFlag>
    <VictimIDTheftFlag>true</VictimIDTheftFlag>
  </ArrayOfPersonInfo>    
</PersonInfo> 
```

如果它们是，我需要找到这些标志的数量`'true'`。

**这是我尝试过但没有成功的方法：**

```
<xsl:variable name="AlertCount" select="
  count(
    PersonInfo/ArrayOfPersonInfo[
      CPSORFlag[.='true'] | CertAsAdultFlag[.='true'] | 
      DeceasedFlag[.='true'] | WantedFlag[.='true'] | 
      ConditonalReleaseFlag[.='true'] | MissingFlag[.='true'] | 
      ATLFlag[.='true'] | ProbationFlag[.='true'] | CCWFlag[.='true'] | 
      VictimIDTheftFlag[.='true'] | CHRIFlag[.='true'] | 
      CivilWritFlag[.='true'] | MentalPetitionFlag[.='true'] |
      ProtectionOrderFlag[.='true'] | juvWantedFlag[.='true'] | 
      WeaponsFlag[.='true'] | WorkCardFlag[.='true']
    ]
  )
"/> 
```

我真的需要有人帮助我，因为我一直在努力克服它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:43:01.970

```
<xsl:variable name="AlertCount" select="count(PersonInfo//*[. = 'true'])" /> 
```

这就是为什么你的不起作用：

您方法中的方括号在节点集上创建谓词。

该节点集是所有提到的满足其条件的子节点的并集。一个非空节点集计算为`true`，一个非空节点集计算为`false`。

因此，如果任何一个孩子都是真的，那么你`count()`永远都是，如果他们都是假的，那么你永远都是。`1``0`

换句话说：您选择了一个`<ArrayOfPersonInfo>`节点。如果它满足一个条件（有任意数量的孩子`'true'`作为他们的价值）它被计算在内，否则不被计算在内。

* * *

在评论中澄清后（*“我只需要担心我在上面的 XML 中提到的标志”*）：

```
<xsl:variable name="AlertCount" select="
  count(
    PersonInfo//*[
      self::CPSORFlag or
      self::CertAsAdultFlag or
      self::DeceasedFlag or
      self::WantedFlag or
      self::ConditonalReleaseFlag or
      self::MissingFlag or
      self::ATLFlag or
      self::ProbationFlag or
      self::CCWFlag or
      self::VictimIDTheftFlag or
      self::CHRIFlag or
      self::CivilWritFlag or
      self::MentalPetitionFlag or
      self::ProtectionOrderFlag or
      self::juvWantedFlag or
      self::WeaponsFlag or
      self::WorkCardFlag
    ][. = 'true']
  )
" /> 
```

# sql - Eclipse SQL Explorer 插件在哪里存储它的首选项？

> ID：11954797
> 
> 赞同：2
> 
> 时间：2012-08-14T14:40:52.027
> 
> 标签：sql, eclipse, preferences

我已经切换到 Eclipse Juno，它声称不支持 SQL Explorer。所以我想开始使用独立的 SQL Explorer，但我不想重新输入我的所有连接。

Eclipse SQL Explorer 插件在哪里保存其设置，而 SQL Explorer 独立应用程序在哪里存储其设置，以便我可以将它们复制过来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:42:30.030

所以，经过一番研究，我有一个答案。Exclipse SQL Explorer 设置存储在

```
<your-workspace>/.metadata/.plugins/net.sourceforge.sqlexplorer/ 
```

SQL Explorer 也是如此。但是，SQL Explorer 没有给您任何方法来指定要使用的“工作区”。在 Mac 上，您需要在 SQL Explorer 应用程序上“显示包内容”，然后深入到 Contents/MacOS/ 以找到工作区文件夹。

# delphi - 将 iFrame 注入 IE BHO

> ID：11954802
> 
> 赞同：0
> 
> 时间：2012-08-14T14:41:09.280
> 
> 标签：delphi, internet-explorer, iframe, bho

我正在开发一个 IE BHO 来拒绝某些特定的 URL。当我找到一个目标 URL 时，我想在显示警告的网页上方打开一个 iframe。要查找用户的 URL，我使用了 BeforeNavigate2 事件。当我找到目标 URL 时，我将创建 iframe。所以现在的代码是：

```
procedure DoBeforeNavigate2(
               const pDisp: IDispatch;
               var URL: OleVariant;
               var Flags: OleVariant;
               var TargetFrameName: OleVariant;
               var PostData: OleVariant;
               var Headers: OleVariant;
               var Cancel: WordBool
               );
var
Document: IHTMLDocument2;
iFrame: IHTMLElement;
begin
  Document:= IE.Document as IHTMLDocument2;
  iFrame:= Document.createElement('iframe');
  iFrame.setAttribute('src', 'http://www.google.com/', 0);
  iFrame.setAttribute('id', 'iFrame', 0);
  iFrame.setAttribute('style', 'position: fixed; left: 0px; top: 0px; border: 0px; width: 100%; height: 100%; background-color: white', 0);
end; 
```

它应该在所有网站之上用 google.com 打开一个 iframe，但它只会使 IE 崩溃......有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:33:30.007

该页面尚未加载`BeforeNavigate2`。您可以尝试在`DocumentComplete`. 将`IWebBrowser2`对象存储在 BHO 的`SetSite`方法中并检查它`pDisp`是否是同一个对象（QI 到`IWebBrowser2`第一个）以验证页面是否加载到主浏览器窗口（而不是框架）中。然后您应该能够像在当前代码中一样注入 iframe。我不知道 Delphi，所以也许这就是为什么我不明白什么`IE.Document`是，但你可能应该改用对象的`Document`属性`IWebBrowser2`。

# java - 为什么我的jstl 甚至退回虚假物品？

> ID：11954812
> 
> 赞同：2
> 
> 时间：2012-08-14T14:41:39.027
> 
> 标签：java, jsp, jstl

我有一个对象值列表，每个对象值的字段之一是名为“可显示”的布尔值。

这是我的代码：

```
<% int z = 1 %>
<c:forEach var="value" items="${valueList}" varStatus="status">
    <% String className = (z % 2 == 1) ? "Odd" : ""; %>
    <li class="<%= className %>">
        <c:if test="${value.displayable}"> 
            /* there are ten items in that list
            8 of the value.displayable are true
            2 are false */

            <a href=""> title </a>
            <a href=""> link </a>
        </c:if>
    </li>
    <% ++z; %>
</c:forEach> 
```

从那个循环我应该只得到正确的项目？不知何故，我得到了所有 10 件物品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:51:24.337

我会相信你的话，因为其中两个项目有`displayable == false`。在这种情况下，我*假设*您将获得一个包含 10 个`<li></li>`项目的列表，但其中两个项目内部没有“标题”和“链接”链接。

*这是因为无论*当前项目是否可显示，您都在渲染`<li></li>`标签（并切换 css 类并增加`z`计数器） 。将该循环的所有内容（scriptlet 和）放入其中，以便仅在项目可显示时显示列表*项*。*`for``<li></li>``<c:if>`*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:14:48.037

您可以像这样重写代码

```
 <c:forEach var="value" items="${valueList}" varStatus="status">
        <c:if test="${value.displayable}"> 
          <c:if test="${status.index%2==0 }">   
             <li>
                <a href=""> title </a>
                <a href=""> link </a>
            </li>
          </c:if>
          <c:if test="${status.index%2!=0 }">   
             <li class="Odd">
                <a href=""> title </a>
                <a href=""> link </a>
            </li>
         </c:if>
     </c:if>     
 </c:forEach> 
```**

# ios - 视网膜显示中的图像模糊在应用商店中显示

> ID：11954815
> 
> 赞同：0
> 
> 时间：2012-08-14T14:41:46.187
> 
> 标签：ios, image

我创建了一个通用应用程序。我在相同尺寸的 iPhone 和 iPad 屏幕上使用了相同的图像。对于 Retina 显示器，我添加了 @2x 图像。当我们运行测试应用程序时，在模拟器和设备上一切正常。

但在 Appstore 上上传后，在设备中下载的应用程序显示视网膜显示的图像质量很差。

提前致谢！！！

![在此处输入图像描述](../Images/2a5d3a2b3467d67b6278c0e23ce0d4d1.png)

# php - 使用 Windows 域的凭据进行 MediaWiki 身份验证

> ID：11954817
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:41:55.637
> 
> 标签：php, windows, iis, single-sign-on, mediawiki

我希望创建一个 wiki 页面供我公司内部使用。

理想情况下，我希望它能够针对我们公司的 windows 域验证登录，这样用户就不必专门为 wiki 创建一个新帐户来访问它。

因此，用户当前在早上工作时登录到他们的计算机时登录到域。我想在我的网页中使用这些凭据来验证是否应该允许用户编辑页面？我希望维护用户登录，以便我们可以跟踪谁进行了编辑以及何时进行了编辑。

是否有可能做到这一点 ？我能做些什么来做出这种改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:46:23.450

[NTLM](http://en.wikipedia.org/wiki/NTLM)或[Kerberos](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29)将允许您使用存储 Windows 域凭据的 Active Directory 进行单点登录。查看[MediaWiki 身份验证扩展](http://www.mediawiki.org/wiki/Category%3aUser_identity_extensions)。特别是LDAP 身份验证扩展或[此 NTLM 扩展的](http://www.mediawiki.org/wiki/Extension%3aWindows_NTLM_LDAP_Auto_Auth)[Kerberos 配置](http://www.mediawiki.org/wiki/Extension%3aLDAP_Authentication/Kerberos_Configuration_Examples)。

# jquery - 多个 .click() 绑定。如何强制一个绑定最后执行？

> ID：11954819
> 
> 赞同：0
> 
> 时间：2012-08-14T14:42:06.353
> 
> 标签：jquery

我有一个 javascript 链接，用作弹出窗口上的按钮：

```
<a href="#" class="submit-action close-modal">Submit</a> 
```

“submit-action”类有一个 jQuery .click() 绑定，它在嵌入模式的表单上执行 .submit()。“close-modal”类有一个 .click() 绑定来关闭模态。

```
$(".submit-action").click(function() ($("#someForm").attr("action", "someURL"); 
$("#someForm").submit();

this.close = function () {
    $("#modal").hide();
    $.unblockUI();
};

$(".close-modal").click(function()(this.close); 
```

目前，当我单击此按钮时，关闭模式绑定似乎首先执行并在提交表单之前关闭模式。所以弹出窗口关闭而不执行提交。有没有一种方法可以强制“提交操作”绑定首先执行而不结合两个 .click() 绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:46:35.163

它们按照绑定的顺序触发，因此在绑定提交操作后绑定关闭模式，它应该按照您想要的顺序进行。

小提琴 1：http: [//jsfiddle.net/johnkoer/2xNwn/1/](http://jsfiddle.net/johnkoer/2xNwn/1/)

小提琴 2：http: [//jsfiddle.net/johnkoer/2xNwn/2/](http://jsfiddle.net/johnkoer/2xNwn/2/)

从 JQuery[文档](http://api.jquery.com/on/)（强调我的）：

> 默认情况下，大多数事件会从原始事件目标冒泡到文档元素。在此过程中的每个元素处，jQuery 都会调用任何已附加的匹配事件处理程序。处理程序可以通过调用 event.stopPropagation() 来防止事件在文档树中进一步向上冒泡（从而防止这些元素上的处理程序运行）。但是，附加在当前元素上的任何其他处理程序都将运行。为了防止这种情况，请调用 event.stopImmediatePropagation()。（**绑定到元素的事件处理程序的调用顺序与它们绑定的顺序相同。**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:46:34.223

简单地将一个放在另一个之上将导致它首先发生：

[**jsFiddle 演示**](http://jsfiddle.net/mTG6U/)

```
$(document).on('click', '.submit-action', function () {
    alert('submit-action click');
});

$(document).on('click', '.close-modal', function () {
    alert('close-modal click');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:48:00.640

如果您想在提交完成后立即关闭模式。在 ajax 的“完成”事件上触发关闭模式的操作。

# php - 从远程 NFS 共享复制时，PHP 复制功能比 linux cp 命令慢

> ID：11954821
> 
> 赞同：3
> 
> 时间：2012-08-14T14:42:11.590
> 
> 标签：php, linux, cp

我一直在尝试从`nfs share`另一台服务器上复制音频文件。当我`PHP`用来复制时，复制一个 8 MB 的音频文件需要 5.5 秒。但是，当我在 shell 中使用 cp 命令时，它需要 0.845 秒。

有谁知道问题是什么以及如何解决？

```
<?php
  $result = copy('/remote/dir/remoteFile.wav’,’12345.wav');
  var_dump($returnVar);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:50:21.527

此外，您可以确定 PHP 副本会比 linux cp 慢，因为一个使用本机操作系统级别的调用，另一个是应用程序层，它通过 Web 服务器等调用相同的调用。要经过的层太多，要处理的通知，要遵守的协议等等等等。我认为这不是完全可以**修复**的..

也许`copy()`你可以尝试一个`exec('cp ..')`命令，而不是直接尝试从 php 运行 linux cp 命令。可能不会为您提供尽可能快的速度`cp from shell`，但可能会比`copy() from php`. 试试看..

# r - 在 ggplot 中突出显示散点图的特定区域

> ID：11954825
> 
> 赞同：10
> 
> 时间：2012-08-14T14:42:25.753
> 
> 标签：r, ggplot2

我需要讨论散点图，并想参考该图的特定区域。有没有办法“突出”情节的特定部分？也许带有如下框和标签？

```
set.seed(1410)
dsmall<-diamonds[sample(nrow(diamonds), 100), ]
df<-data.frame("x"=dsmall$carat, "y"=dsmall$price)

p <-ggplot(df, aes(x, y)) 
p <- p + geom_point(alpha=2/10, shape=21, fill="blue", colour="black", size=5) 
```

![在此处输入图像描述](../Images/b9c1868c0f35471b382c8ee0ab8410fb.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T14:50:28.033

对于单个区域，最容易使用`annotate`，首先使用`rect`，然后`text`：

```
p + annotate("rect", xmin=1.5, xmax=2.5, ymin=12500, ymax= 18000, 
             fill=NA, colour="red") +
    annotate("text", x=1.75, y=17000, label="Region A", size=8) 
```

![在此处输入图像描述](../Images/54849b8e888bd8d57943ba3adc2c7fe3.png)

* * *

对于多个区域，您可以将数据放入数据框中并使用`geom_text`and `geom_rect`：

```
regions <- data.frame(
  xmin=c(1.5, 1, 0),
  xmax=c(2.5, 2, 1),
  ymin=c(12500, 5000, 0),
  ymax=c(17500, 12500, 5000),
  x   =c(2, 1.5, 0.5),
  y   =c(15000, 7500, 2500),
  lab = paste("Region", LETTERS[1:3])
)

p + 
  geom_rect(data=regions, aes(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax), 
            fill=NA, colour="red") +
  geom_text(data=regions, aes(x=x, y=y, label=lab)) 
```

![在此处输入图像描述](../Images/bfd6fdbe287d7e42168e27c57f8131fc.png)

# android - 在每个人都可见的用户提要中发布帖子

> ID：11954826
> 
> 赞同：0
> 
> 时间：2012-08-14T14:42:30.607
> 
> 标签：android, facebook, facebook-android-sdk

我正在使用 android-facebook-sdk 并尝试发布到用户的墙上。这是我的代码：

```
Bundle params = new Bundle();

        JSONObject privacy = new JSONObject();
        try {
            privacy.put("value", "EVERYONE");
        } catch (JSONException e) {
            Log.e(TAG, "Unknown error while preparing params", e);
        }

        params.putString("message", message);
        params.putString("privacy", privacy.toString());
        facebook.request("me/feed", params, "POST"); 
```

已发布消息的隐私范围仅对朋友可见，但我想向所有人发布。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:48:52.693

> 我做错了什么？

主要是这个，我猜：

> 但我想向所有人发布。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)说，

> 任何非默认隐私设置都必须由用户有意选择。除非用户主动指定他们想要此非默认设置，否则您不得设置自定义隐私设置。

在您的场景中是这种情况吗？

> 请注意，帖子的可见性将由用户隐私设置的限制性更强以及帖子的隐私字段决定

因此，如果用户对您的应用发布的隐私帖子应遵守的设置比您在发布帖子时想要设置/*强制*的设置更具限制性，那么它将无法按照您想要的方式工作。

# architecture - 打开时 Sublime 崩溃，找不到合适的 python 图像，架构

> ID：11954834
> 
> 赞同：3
> 
> 时间：2012-08-14T14:42:39.370
> 
> 标签：architecture, 32bit-64bit, uninstallation, crash-reports, sublimetext2

我试图在强制退出后重新打开崇高。我按照[说明将 sublime 恢复到较早的状态](http://www.sublimetext.com/docs/2/revert.html)，但我没有数据文件夹，因此在尝试卸载时，我删除并永久删除了其中包含 sublime 的所有内容。除了通过“还原”页面上的说明之外，还有什么方法可以卸载 sublime？或者更改我的 python 版本，以便 sublime 开始工作？

我还查找了其他“找不到合适的图像”错误，似乎架构可能是一个问题（我最近使用自制软件更新了 python，我在 Lion，所以可能是 32/64 位问题？）我也尝试重新安装最新版本的python。

我在打开时收到的错误报告打印在下面。

```
Process: Sublime Text 2 [1088]
Path: /Applications/Sublime Text 2.app/Contents/MacOS/Sublime Text 2
Identifier: com.sublimetext.2
Version: Version 2.0.1, Build 2217 (2217)
Code Type: X86-64 (Native)
Parent Process: launchd [210]

Date/Time: 2012-08-13 23:42:36.059 -0400
OS Version: Mac OS X 10.7.4 (11E53)
Report Version: 9

Interval Since Last Report: 755530 sec
Crashes Since Last Report: 31
Per-App Crashes Since Last Report: 7
Anonymous UUID: 48A0DEC5-738E-472E-A106-15F5341FFA5B

Crashed Thread: 0

Exception Type: EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
dyld: launch, loading dependent libraries

Dyld Error Message:
Library not loaded: /System/Library/Frameworks/Python.framework/Versions/2.6/Python
Referenced from: /Applications/Sublime Text 2.app/Contents/MacOS/Sublime Text 2
Reason: no suitable image found. Did find:
/System/Library/Frameworks/Python.framework/Versions/2.6/Python: stat() failed with errno=13
/Library/Frameworks/Python.framework/Versions/2.6/Python: no matching architecture in universal wrapper
/System/Library/Frameworks/Python.framework/Versions/2.6/Python: stat() failed with errno=13

Binary Images:
0x10f292000 - 0x10f842fef +com.sublimetext.2 (Version 2.0.1, Build 2217 - 2217) <EFE756CA-FF0C-3EEB-BA80-309F00040A5D> /Applications/Sublime Text 2.app/Contents/MacOS/Sublime Text 2
0x7fff6ee92000 - 0x7fff6eec6baf dyld (195.6 - ???) <0CD1B35B-A28F-32DA-B72E-452EAD609613> /usr/lib/dyld
0x7fff89f86000 - 0x7fff89f86fff com.apple.Carbon (153 - 153) <895C2BF2-1666-3A59-A669-311B1F4F368B> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x7fff9349a000 - 0x7fff9349afff com.apple.Cocoa (6.6 - ???) <021D4214-9C23-3CD8-AFB2-F331697A4508> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa

Model: MacBookPro8,1, BootROM MBP81.0047.B27, 2 processors, Intel Core i5, 2.3 GHz, 4 GB, SMC 1.68f96
Graphics: Intel HD Graphics 3000, Intel HD Graphics 3000, Built-In, 384 MB
Memory Module: BANK 0/DIMM0, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353737334448302D4348392020
Memory Module: BANK 1/DIMM0, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353737334448302D4348392020
AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0xD6), Broadcom BCM43xx 1.0 (5.106.198.4.20)
Bluetooth: Version 4.0.5f11, 2 service, 11 devices, 4 incoming serial ports
Network Service: Wi-Fi, AirPort, en1
Serial ATA Device: Hitachi HTS545032B9A302, 320.07 GB
Serial ATA Device: OPTIARC DVD RW AD-5970H
USB Device: FaceTime HD Camera (Built-in), apple_vendor_id, 0x8509, 0xfa200000 / 3
USB Device: hub_device, 0x0424 (SMSC), 0x2513, 0xfa100000 / 2
USB Device: BRCM2070 Hub, 0x0a5c (Broadcom Corp.), 0x4500, 0xfa110000 / 5
USB Device: Bluetooth USB Host Controller, apple_vendor_id, 0x821a, 0xfa113000 / 8
USB Device: Apple Internal Keyboard / Trackpad, apple_vendor_id, 0x0252, 0xfa120000 / 4
USB Device: hub_device, 0x0424 (SMSC), 0x2513, 0xfd100000 / 2
USB Device: IR Receiver, apple_vendor_id, 0x8242, 0xfd110000 / 3 
```

提前致谢

獾

## 更新

所以事实证明我需要更改 python sublime 的目标版本。为此，我遵循[了 Mac OS X 10.7.4 上的 Sublimetext2 安装](https://stackoverflow.com/questions/11037934/sublimetext2-installation-on-mac-os-x-10-7-4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T06:20:40.357

也许你已经删除了 python 2.6 或 Python.framework。

因此，您可以安装 Python。

如果您从源代码安装 python，请传递启用框架参数

```
./configure --enable-framework=/Users/ronald/Library/Frameworks 
```

如果仍然提示错误，则可能是 Python 版本问题。

```
cd /Library/Frameworks/Python.framework/Versions/
sudo mv 2.6 2.6-backup`
sudo ln -s 2.7 2.6 
```

以上代码可以在 2.6 和 2.7 之间进行软链接共享 Python 版本。

然后问题解决了。

这个对我有用 。

# javascript - 层.删除（图像）；不能在 Kinetic.js 中工作

> ID：11954841
> 
> 赞同：0
> 
> 时间：2012-08-14T14:42:51.710
> 
> 标签：javascript, html, drag-and-drop, html5-canvas, kineticjs

我正在使用最新的 kineticjs。（v.3.10）这是问题所在

我正在使用单个函数将图像发送到单击时位于画布外部的画布。我正在使图像可拖动等等。我还添加了双击删除图像功能。当我双击任何图像时..最后添加的图像被删除，然后如果我尝试单击其他图像..我收到此错误：TypeError: this.children[child.index] is undefined

这是一个小代码：

使用此函数使用 ajax 从另一个文件中获取路径

```
 function loadajax(imgpath,imgid){

            sources = {
            yoda1 : imgpath,
        };
        loadImages(sources,initStage1);
      }; 
```

来源功能：----

```
 function loadImages(sources, callback){
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        for (var src in sources) {
          numImages++;
         }
        for (var src in sources) {
          images[src] = new Image();
          images[src].onload = function(){
          if (++loadedImages >= numImages) {
              callback(images);
           }
         };
     images[src].src = sources[src];
       }
     } 
```

这是我用来删除/拖放/等的功能。

```
 function initStage1(images){ 
            yodaGroup1 = new Kinetic.Group({
            x: 100,
            y: 110,
           draggable: true,
            });
            layery = new Kinetic.Layer();
            layery.add(yodaGroup1);
            stage.add(layery);
            var yoda1 = new Kinetic.Image({
            image: images.yoda1,
            x: 0,
            y: 0,
            width: 100,
            height: 120,
            name:"image",
            detectionType:"Pixel"
            });

    yodaGroup1.add(yoda1);
    yodaGroup1.on("dragstart", function() {

          yodaGroup1.moveToTop();
          layery.draw();
        });
    yodaGroup1.on("dblclick dbltap", function() {
          layery.remove(yodaGroup1);
          layery.draw();
        });          
    yodaGroup1.on("dragend", function() {
            layery.draw();
            yoda1.saveImageData();
                    });
    addAnchor(yodaGroup1,0, 0, "topLeft");
    addAnchor(yodaGroup1, 100, 0, "topRight");
    addAnchor(yodaGroup1, 100, 120, "bottomRight");
    addAnchor(yodaGroup1, 0, 120, "bottomLeft");

    stage.draw();   
    yoda1.saveImageData();         

        } 
```

现在根据这个功能，我应该能够将图像添加到画布（工作正常）当我拖动它时应该能够将一个图像移动到另一个图像上（.ie.moveToTop 函数）_不工作应该能够删除双击图像（仅适用于最新添加的图像）

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:47:20.907

```
layery.remove(yodaGroup1); 
```

指的是这个功能：

*   remove() 从舞台上移除图层

[http://www.kineticjs.com/docs/symbols/Kinetic.Layer.php#remove](http://www.kineticjs.com/docs/symbols/Kinetic.Layer.php#remove)

没有功能可以仅删除层中包含的一个节点：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T03:45:12.177

要删除层中包含的节点，只需使用以下命令：

```
node.remove(); 
```

所以在你的情况下，你会这样做：

```
yodaGroup1.remove();
layery.draw(); 
```

[http://kineticjs.com/docs/Kinetic.Image.html](http://kineticjs.com/docs/Kinetic.Image.html)

# c# - VS.NET 2010 对 C# 常量表达式的评估

> ID：11954842
> 
> 赞同：5
> 
> 时间：2012-08-14T14:42:54.790
> 
> 标签：c#, visual-studio

当我在 Visual Studio 中尝试 C# 中的示例表达式时

```
public int Test()
{
    if (10/2 == 5)
        throw new Exception();
    return 0;
} 
```

当我保留表达式 10/2 == 5 时，vs.net 会自动抛出警告“检测到无法访问的代码”。

如果我更改表达式 10/2 == 6，IDE 是否满意？它是如何发生的？

编辑：对不起，不完整的问题。它发生得如此迅速，甚至在编译代码之前就发生了？

我对每个回复都投了赞成票，并在 FIFO 的基础上接受了第一个答案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T14:45:04.257

```
if (10/2 == 5) 
```

将始终返回 true，这意味着

```
throw new Exception(); 
```

将永远被执行，并且

```
return 0; 
```

永远不会到达

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T14:47:10.907

如果你反编译这段代码，你最终会得到：

```
public int Test()
{
     throw new Exception();
} 
```

我相信，由于这些是常数值，所以数学是在编译时完成的，所以 10/2 并不是真正的 10/2，而是 5...所以编译器意识到 5==5 总是微不足道的会是真的。事实上，我相信这些常量会自动转换为 true。编译器的目标是优化总是会重复并在编译时运行它的处理的代码，而不是一遍又一遍地运行相同的处理。

因此，基本上，编译器意识到，由于 if 始终是`true`并且 if 导致 a `return`（通过 a `throw`），所以它优化了它知道永远不会执行的代码。因此，反编译的代码结果如上。

事实上，如果你这样做，就会发生相反的情况`10/2 == 6`，它被“常量化”为 5 == 6，它变成了 false。由于 if 总是为假，它优化了 if：

```
public int Test()
{
    int num = 0;
    return num;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T15:11:51.227

正如其他人所说，编译器可以在编译时评估表达式`10 / 2 == 5`，因为它是一个*常量*表达式。它评估为`true`，因此范围之后的任何代码`if`都是不可用的。如果更改为，则*中*的`false`代码无法访问。*`if`*

 *所以现在考虑这段代码：

```
public int TestA() 
{ 
    if (10 / 2 == 5) 
        return 1; 
    return 0; 
} 

public int TestB() 
{ 
    if (10 / 2 == 6) 
        return 1; 
    return 0; 
} 
```

这两种方法都会生成有关无法访问代码的警告！

C# 编译器的奇怪之处在于，如果无法访问的代码完全由`throw`语句组成，则*不会*发出有关无法访问的警告。

补充：[这个 Stack Overflow 问题是相关的](https://stackoverflow.com/questions/6371564/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T14:46:09.470

有人抱怨这条线

```
return 0; 
```

永远无法到达。10/2 总是等于 5。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T14:45:51.930

在第一种情况下，编译器处理表达式`10/2 == 5`，其计算结果为真，因此抛出异常并且`return 0`语句不可访问。

在第二种情况下，`10/2 == 6`计算结果为 false，因此该`return 0`语句是可访问的，因为没有引发异常。

作为对您的编辑的回应：您的代码不必实际编译，编译器就可以知道该代码行无法访问。无论任何用户输入如何，知道这`10/2 == 5`始终是真的是足够聪明的，这意味着总是会抛出异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T14:48:49.510

编译器足够聪明（这是一个非常简单的检查）并确定永远不会达到 return 0。这是因为 10/2 == 5 永远为真。根据编译器，以下表达式的计算结果相同

```
if (10/2 == 5) 
```

或者

```
if true 
```

编译器能够确定这一点的原因是数字不是*可变*的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-14T14:49:52.413

事实上他知道他永远不会回来 0

他只是警告说，10/2 == 5 以下的整个代码永远不会被解释为 10/2 永远是 5。

以同样的方式：

```
if (true)
{
     ......
}
else 
{
  .....
} 
```*

# c# - Silverlight 工具提示在鼠标悬停时仍然可见

> ID：11954857
> 
> 赞同：1
> 
> 时间：2012-08-14T14:43:30.893
> 
> 标签：c#, .net, silverlight, tooltip, silverlight-5.0

您好，感谢您的帮助。我有一个使用分层数据模板填充的 Treeview，并且当前底部节点有一个工具提示，该工具提示生成一个小的堆栈面板，其中填充了特定于鼠标悬停的项目的数据。我在工具提示中也有一个按钮，但是，当鼠标移到它上面时，工具提示不会持续存在，我无法像我需要的那样使用按钮。我的 xml 看起来像这样：

```
<!--===========================  Hierarchical Data template  for tree view -->
                        <!--template for bottom nodes-->
                        <sdk:HierarchicalDataTemplate x:Key="ModTemplate" ItemsSource="{Binding ApplicationModules}">
                            <StackPanel Orientation="Horizontal" >                            <!--======tooltip style to handle format for callout window============-->
                                <ToolTipService.ToolTip>
                                    <ToolTip  HorizontalOffset="0" VerticalOffset="0" Style="{StaticResource ModuleToolTipStyle}">

                                        <StackPanel Width="150" Height="auto" >
                             <TextBlock Text="Module Info" FontWeight="Bold" TextAlignment="Center"/>
                                            <TextBlock Text="Module State:" FontWeight="Bold" />
                                            <TextBlock Text="{Binding Path=ModInfo.ModuleState}" />
                                            <TextBlock Text="Module Start Time:" FontWeight="Bold" />
                                            <TextBlock Text="{Binding Path=ModInfo.ModuleStartTime}"/>
                                            <TextBlock Text="Module Down Time:" FontWeight="Bold"/>
                                            <TextBlock Text="{Binding Path=ModInfo.ModuleDownTime}" />
                                            <Button Content="More Info" Width="75"></Button>
                                        </StackPanel>

                                    </ToolTip>
                                </ToolTipService.ToolTip>
               <!--============end tooltip style for callout window===================-->

                                <ContentPresenter Margin="0 0 4 0" Content="{Binding Icon}" />
                                <TextBlock FontStyle="Italic" Text="{Binding Path=ModuleName}" />
                            </StackPanel>
                        </sdk:HierarchicalDataTemplate> 
```

我希望当鼠标移过它时工具提示仍然存在，以便我可以将事件连接到按钮。我怎样才能做到这一点？再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:08:17.657

你有几个选择来实现你的目标，我知道。您可以在 codeplex 上查看[Silverlight Advanced Tooltips](http://tooltipservice.codeplex.com/)项目，该项目可以满足您的需求（尽管我个人没有使用过它，因此无法给出任何评论。）

或者你可以用一些创造力自己制作。如果是我，我可能会跳过所有这些乱七八糟的东西，忘记 ToolTipService 一起做我自己的打扮，因为对于用户来说，你提供的不是他们习惯的工具提示无论如何都期望，并且更多地涉及标注或弹出功能。如果选项 #1 对您不起作用，我可以在腾出一些时间后立即举个例子，但我希望它可以。本质上，我的方式和我提供的项目链接都会做同样的事情，即在它所附加的 MouseLeave 事件之后提供延迟，以便用户可以在它消失之前到达它。然后将其可见性条件传递给该对象。如果这不起作用，请告诉我，我可以为您提供一个仅使用 XAML 的替代示例。

# extjs - 网格单元格上的组合框编辑器不起作用

> ID：11954861
> 
> 赞同：0
> 
> 时间：2012-08-14T14:43:38.950
> 
> 标签：extjs

我正在使用 Ext Js 4.1，我需要在网格单元格中放置一个组合框，以便用户选择要保存的参数，但是可用的参数来自商店，但它不起作用，我已经在使用编辑插件，如文档中所述，任何人都可以提供见解吗？

```
storeParameter = Ext.create('ParameterStore');

 {
            header: 'Parameter',
            flex: 1,
            sortable: true,
            dataIndex: 'parameter',
            field: {
                type: 'textfield'
            },
            editor: {
                xtype: 'combo',
                store: storeParameter
            }
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:48:01.903

您应该在希望它出现的**网格单元格上定义****编辑器**参数。似乎您正在尝试在商店本身中定义编辑器。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:21:39.747

我解决了这个问题。我需要在网格中添加属性：

```
selType: 'cellmodel', 
```

而不是直接放一个商店，我换成了有商店的comboBox。

```
var comboParameter = Ext.create('ComboBoxParameter'); 
```

并将列替换为：

```
{
            header: 'Parameter',
            flex: 1,
            sortable: true,
            dataIndex: 'parameter',
            editor: comboParameter
        }, 
```**

# windows-8 - 中心页面上的 Windows 8 多个网格视图

> ID：11954863
> 
> 赞同：2
> 
> 时间：2012-08-14T14:43:50.913
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我目前正在为我的应用程序构建一个中心页面。此页面设计为具有多个列，每个列都有一个标题和下面的网格视图。但是，每一列（gridview）都填充了来自我的视图模型的一组不同的数据。我成功地填充了网格视图，但我看到的是水平滚动不起作用，所以我永远无法查看中心页面上的所有信息。基本上，用户不能水平平移。

使用分组数据（gridview）是实现这一目标的唯一方法吗？

我还应该说我尝试使用 Scrollviewer，但它似乎弄乱了我的网格视图，它只在一列中显示我的数据（每个网格视图）。

请参阅下面我当前的 XAML 代码。感谢并期待您的回复。

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="CongressWatch.MainPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
IsTabStop="false"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:CongressWatch"
xmlns:common="using:CongressWatch.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>
    <!-- TODO: Delete this line if the key AppName is declared in App.xaml -->
    <x:String x:Key="AppName">congress watch</x:String>
</Page.Resources>

<!--
     This grid acts as a root panel for the page that defines two rows:
     * Row 0 contains the back button and page title
     * Row 1 contains the rest of the page layout
-->
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Back button and page title -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Grid.Column="1" Text="{StaticResource AppName}" Style="{StaticResource PageHeaderTextStyle}"/>
    </Grid>

    <Grid Grid.Row="1" Margin="0,-3,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <TextBlock x:Name="txtHeadingLegislators" 
                   HorizontalAlignment="Left" 
                   TextWrapping="Wrap" 
                   Text="legislators" 
                   Margin="120,0,0,20"
                   VerticalAlignment="Top" 
                   Style="{StaticResource PageSubheaderTextStyle}"/>
        <GridView 
            x:Name="grdViewLegislators" 
            Grid.Row="1" 
            Margin="120,0,0,50"
            ItemsSource="{Binding Legislators, Mode=TwoWay}"
            IsItemClickEnabled="True"
            SelectionMode="None"
            ItemClick="grdViewLegislators_ItemClick" 
            ItemTemplate="{StaticResource LegislatorGVDataItemTemplate}"/>
        <TextBlock x:Name="txtHeadingCommittees" 
                   Grid.Column="1"
                   HorizontalAlignment="Left" 
                   TextWrapping="Wrap" 
                   Text="committees" 
                   Margin="80,0,0,20"
                   VerticalAlignment="Top" 
                   Style="{StaticResource PageSubheaderTextStyle}"/>
        <GridView 
            x:Name="grdViewCommittees" 
            Grid.Row="1" 
            Grid.Column="1"
            Margin="80,0,0,50"
            ItemsSource="{Binding Committees, Mode=TwoWay}"
            IsItemClickEnabled="True"
            SelectionMode="None"
            ItemClick="grdViewCommittees_ItemClick" 
            ItemTemplate="{StaticResource CommitteeGVDataItemTemplate}"/>
        <TextBlock x:Name="txtHeadingBills" 
                   Grid.Column="2"
                   HorizontalAlignment="Left" 
                   TextWrapping="Wrap" 
                   Text="bills" 
                   Margin="80,0,0,20"
                   VerticalAlignment="Top" 
                   Style="{StaticResource PageSubheaderTextStyle}"/>
    </Grid>

    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:17:32.553

设计指南非常小心地指出了多个控件相互嵌套的问题，这些控件在相同甚至不同的方向上滚动。您不仅会遇到一个控件从另一个控件获取事件的问题，而且内容移动的方式可能是不确定的，并且会让用户感到沮丧。

听起来您可能正在尝试在 Windows Phone 上实现类似于全景控件的功能？目前在 Windows 8 上没有像这样工作的控件。 Panorama 的创建是为了通过模拟更宽的屏幕在小屏幕上容纳大量数据。带有停止点的 ScrollViewer 可以在 Windows 8 中执行类似的操作，但不完全相同。

我会花一些时间坐下来思考屏幕的设计，并确保这是您想要的交互。看看今日美国之类的应用程序，看看它们如何处理主页上的分组。当然，他们列表中的每个项目都是一篇新闻文章。

没有规定说每个组中的每个项目都必须是相同的类型。您可以创建一个包含不同对象类型的大型集合，并通过某个共享键对它们进行分组。您也可以手动创建组，并且只拥有一组组。

如果您遵循其中任何一种方法，诀窍就是告诉 GridView 为不同的对象类型使用不同的数据模板。这是使用 DataTemplateSelector 完成的。这是一篇关于在 WinRT 中使用 DataTemplateSelectors 的好博文：

[http://www.comyoucom.com/implementing-a-custom-datatemplateselector-in-winrt/](http://www.comyoucom.com/implementing-a-custom-datatemplateselector-in-winrt/)

# javascript - jquery 和 asp.net 文本区域

> ID：11954866
> 
> 赞同：0
> 
> 时间：2012-08-14T14:43:59.223
> 
> 标签：javascript, jquery, asp.net, visual-studio-2010

“我想要实现的是 onclick 将删除文本框中的文本”。

[我从这个网站](https://stackoverflow.com/questions/716827/jquery-click-event-on-aspbutton)上读到了一些答案，有人正在使用“function pageLoad(sender, args)”javascript，但问题是在使用 Firefox 断点进行调试时，函数行不会停止。我是否缺少来自微软或其他东西的加载的 javascript 要求？这是我的测试代码。

```
 function pageLoad() {
        $("#<%=Text_Message.ClientID%>").click(function () {
            alert("Handler for .click() called.");
        });
    }
    $(document).ready(function () {
        $("#<%=Text_Message.ClientID%>").click(function () {
            alert("Handler for .click() called.");
        });
    }); 
```

文本框

```
<asp:TextBox ID="Text_Name" runat="server" CssClass="" Width="234px" >Name</asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:46:04.713

使用[`focus`](http://api.jquery.com/focus/)而不是单击文本框并使用清空其文本`$(this).val("");`

**[现场演示](http://jsfiddle.net/rajaadil/LVQNs/)**

```
$(document).ready(function () {
        $("#<%=Text_Message.ClientID%>").focus(function () {
            alert("Handler for .click() called.");
            $(this).val("");
        });
 }); 
```

# jsf - 在 JSF2.0 中，如何在 facelets 中写出 cookie？

> ID：11954869
> 
> 赞同：2
> 
> 时间：2012-08-14T14:44:08.520
> 
> 标签：jsf, cookies, jsf-2, el

我知道如何从 facelets 中写出单个 cookie：

JSF：

```
<h:outputText value="#{facesContext.externalContext.requestCookieMap['TESTCOOKIE'].value}" /> 
```

输出：

> 我的饼干价值

我已经能够写出地图，但输出不是值，而是对值的引用。

JSF：

```
<h:outputText value="#{facesContext.externalContext.requestCookieMap}" /> 
```

输出：

> {DEFAULTUSERNAME=javax.servlet.http.Cookie@36a236a2，TESTCOOKIE=javax.servlet.http.Cookie@36b436b4，JSESSIONID=javax.servlet.http.Cookie@36d836d8}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:32:44.400

在 JSF 2.0 中，您不需要这么长的值表达式来访问您的 cookie，有一个名为的隐式对象`cookie`引用 cookie 映射，它相当于`facesContext.externalContext.requestCookieMap`.

所以，下面的代码：

```
<h:outputText value="#{cookie['TESTCOOKIE'].value}" /> 
```

应输出与以下内容相同：

```
<h:outputText value="#{facesContext.externalContext.requestCookieMap['TESTCOOKIE'].value}" /> 
```

现在，如果你想遍历所有这些，我的建议是使用 backing bean：

```
@RequestScoped
@ManagedBean(name = "triky")
public class TrikyBean {

    public List getCookies() {
        FacesContext context = FacesContext.getCurrentInstance();
        Map cookieMap = context.getExternalContext().getRequestCookieMap();
        return new ArrayList(cookieMap.values());
    }

} 
```

然后像这样使用它

```
<ui:repeat value="#{triky.cookies}" var="ck">
    #{ck.name}: #{ck.value}<br/>
</ui:repeat> 
```

**澄清**：这是因为`<ui:repeat />`标签只接受`java.util.List`它的`value`属性，否则它会创建自己的`ListModel`，里面只有一个元素。`values()`此外，a 中方法的默认实现给出的集合`java.util.Map`不是 a`java.util.List`而是 a `java.util.Set`，因此，`<ui:repeat/>`标签使用该集合作为其自己的列表模型的唯一元素，并且在迭代该列表模型时，元素的数量只是其中一个实际上都不是饼干。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:53:27.923

地图有一个`values()`方法可以返回所有元素的集合。我认为您需要一个比默认更强大的 EL 引擎才能在 getter 之外执行方法调用，例如 JBoss EL 或 JUEL（我强烈建议任何 java ee 6 项目使用这两者）。

另一种方法是在java中进行方法调用并提供这样的getter：

myBean.java

```
public Collection getCookies(){
    return FacesContext.getCurrentInstance().getExternalContext().getRequestCookieMap().values();
} 
```

并在您的标记中迭代集合

```
<ui:repeat value="#{myBean.cookies}" var="cookie">
    <p>#{cookie.name}: #{cookie.value</p>
</ui:repeat> 
```

还没有尝试过，但类似的东西会起作用。您可能必须用列表替换集合，不确定 ui:repeat 是否支持集合。

编辑：根据下面的评论，你可以试试这个：

```
<ui:repeat value="#{facesContext.externalContext.requestCookieMap.values()}" var="cookie">
    <p>#{cookie.name}: #{cookie.value</p>
</ui:repeat> 
```

# css - 加载对话框并将上一页保留在后台？

> ID：11954871
> 
> 赞同：0
> 
> 时间：2012-08-14T14:44:24.970
> 
> 标签：css, html, jquery-mobile

加载对话框将使上一页消失以显示对话框。有没有办法离开上一页并在上面加载对话框？

这样我可以给对话框一些透明背景，甚至没有背景！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:06:02.307

jquery mobile 1.2 alpha 中的新覆盖面板将完成您想要的。我会等到他们解决错误。

见这里：http: [//jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/popup-panels.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/popup-panels.html)

# android - 获取语 音率（）？（或如何判断当前设置的 TTS 速率）

> ID：11954874
> 
> 赞同：5
> 
> 时间：2012-08-14T14:44:28.553
> 
> 标签：android, text-to-speech

[TextToSpeech](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)有一种设置语速的方法：[setSpeechRate()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setSpeechRate%28float%29)。但它没有查询当前速度的相反方法。

有没有办法**在系统**中查询该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T13:54:30.923

您可能会获得默认的 TTS 语速

```
Settings.Secure.getInt(getContentResolver(), Settings.Secure.TTS_DEFAULT_RATE, 100) / 100f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T17:15:11.630

我一直在寻找类似的东西，似乎真的没有这样的方法。但是由于[1.0 是正常的语速](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setSpeechRate%28float%29)，我通过将语速保持在自己的变量中来解决它。我有一个类提供了一些使用 TTS 的方法，所以这是我的实现：

```
public class MyTts {
    private static float rate = 1.0f;
    ...

    public float getSpeechRate() {
        return rate;
    }

    public int setSpeechRate(float rt) {
        rate = rt;
        return tts.setSpeechRate(rate);
    }
    ...
} 
```

在哪里`setSpeechRate`退货`TextToSpeech.ERROR`或`TextToSpeech.SUCCESS`根据文件。

**编辑：**似乎当我将速率设置为 1.5f 然后又回到 1.0f 时，情况就不一样了。这取决于 Android 中的 tts 设置。

# sql - 为什么不扩展“引用”的定义以消除对“外键”的需要？

> ID：11954880
> 
> 赞同：1
> 
> 时间：2012-08-14T14:44:51.947
> 
> 标签：sql

为什么不能将定义`REFERENCES`扩展为也支持表约束，然后`FOREIGN KEY`可以从 SQL 中消除？

`REFERENCES`很明显，和之间的区别在于`FOREIGN KEY`它`REFERENCES`是列约束，而`FOREIGN KEY`是表约束。

例如，`create table T (A int, B int, C int, primary key (A,B), (B,C) references T(A,B) on delete cascade)`是不合法的，因为你需要有`foreign key`before `(B, C)`，因为约束引用了多个列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:51:38.450

SQL 是冗长且高度明确的。为什么？[除了SQL-1992 标准](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)已经以这种方式定义之外，不会有好的答案：

```
11.8 <referential constraint definition>

[...]

Format

     <referential constraint definition> ::=
          FOREIGN KEY <left paren> <referencing columns> <right paren>
            <references specification>

     <references specification> ::=
          REFERENCES <referenced table and columns>
            [ MATCH <match type> ]
            [ <referential triggered action> ] 
```

`FOREIGN KEY`只是 DDL 语句中的强制关键字。就是这样。有人可能会争辩说，与or约束`FOREIGN KEY`相比，约束不应该是更高等级的公民，因此它们都需要适当的关键字`UNIQUE``CHECK`

```
11.6 <table constraint definition>

[...]

    <table constraint> ::=
            <unique constraint definition>
          | <referential constraint definition>
          | <check constraint definition> 
```

# c++ - C++ 多态性：从基类到派生类

> ID：11954881
> 
> 赞同：0
> 
> 时间：2012-08-14T14:44:52.390
> 
> 标签：c++, polymorphism

```
class A{};

class B : A{};

void func(A* p)
{

      B* p2 = p; // Error

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:57:29.517

您的代码有几个奇怪之处。

1.  您使用私有继承。在私有继承中，当您不在类范围本身内时，您将无法转换为派生类。
2.  即使您要公开继承，您也需要在基类中至少有一个虚函数（应该是析构函数）才能使用`dynamic_cast`.
3.  当您需要大量向下转换时，您可能做错了什么。您可能应该重新考虑您对所提供 API 的设计或使用。

通常情况下，事情看起来像这样：

```
class A { 
public:
  virtual ~A() {}
};

class Derived : public A {

};

void func(A* a) {
  if(Derived* d = dynamic_cast<Derived*>(a)) {
    // yeah, a is of type derived
  } else {
    // a is not of type Derived 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:53:01.607

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T14:46:16.723

对于类，默认使用私有继承。

# asp.net - 避免默认页面的 Windows 身份验证弹出窗口

> ID：11954882
> 
> 赞同：1
> 
> 时间：2012-08-14T14:44:56.957
> 
> 标签：asp.net, windows, vb.net, authentication, anonymous

我们有一个使用 Windows 身份验证来允许访问网页的站点。大多数（如果不是全部）页面都是用 classic 编写的`asp`。我最近添加了一个“公共”主页，`asp.net`以便用户在忘记密码时可以更改密码。我尝试将主页设置为默认主页`IIS 6`，并将所有与该主页关联的文件设置为允许匿名访问。

问题是，我们仍然得到 Windows 身份验证的弹出窗口。如果你直接输入：[http](http://www.website.com/default.aspx) ://www.website.com/default.aspx页面拉起来没问题。但是，当您尝试简单地导航到[http://www.website.com](http://www.website.com)时，我们会不断收到 Windows 身份验证提示。

我尝试删除该`global.asa`文件和一个未使用的`global.asax`文件，认为它首先遇到了其中一个，但这没有用。以下是允许匿名访问的文件：

```
default.aspx
/Homepage -- directory with all code files and other public webpages
web.config
/bin -- folder containing the code generated by VS 2010] 
```

我觉得不允许匿名访问的东西首先被访问，但无法弄清楚它是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:44:10.410

我想您在 IIS 管理器（IIS 6.0？）的默认网站下有两个应用程序，一个是您的经典 asp 应用程序，具有匿名身份验证，它使用具有“无托管代码”的应用程序池。另一个是您的 ASP.NET 应用程序，带有 Windows 身份验证，它使用为 .NET 4.0 或其他东西设置的应用程序池。

确保将默认网站设置为匿名身份验证。这些设置会被继承。

# java - 如何使用 JSP 动态编辑表格？

> ID：11954886
> 
> 赞同：2
> 
> 时间：2012-08-14T14:45:06.157
> 
> 标签：java, javascript, jsp

我试图在我的表格的每一行上设置删除按钮，以便让用户删除表格的某些行。但是，我很难动态删除这些行并从数据库中删除数据...（不知道如何使用带有 jsp 的 html 中的按钮 onclick ）

我决定在 Jsp 中使用一些 javascript 来删除行但现在我无法从数据库中删除条目......

我想知道是否有使用javascript从数据库中删除数据的方法，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:54:03.310

如果您想使用 JavaScript，那么您需要向您的服务器发送一个[AJAX](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CG8QFjAD&url=http://www.ajaxtutorial.net/&ei=d2YqUKHUOvOb1AWQkoCYCw&usg=AFQjCNHXp7-p1rqKz7MENLbxkhJVmvN9sw)请求，然后在上一个操作成功后从视图中删除该行。

对于 AJAX 的简单方法，您可以尝试[PrototypeJS](http://www.prototypejs.org/)。但是，如果您想拥有真正花哨的动态功能，您可能对[jQuery](http://jquery.com/)更感兴趣。

在不从您的项目中了解更多信息的情况下，我建议在服务器端使用[Servlet](http://www.tutorialspoint.com/servlets/index.htm)来接收 AJAX 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:50:26.083

我想将[Ajax](http://www.javamex.com/tutorials/ajax/)与`div`和一起使用`InnerHTML`。`Onclick`对于`Remove`按钮，我将`javascript`使用一个函数调用服务器以`unique id`从数据库中删除记录，当我们得到响应时，我将隐藏表示基于该行的 innerHTML `div Id`。

# c# - 选择所有具有活动项目的类别？

> ID：11954888
> 
> 赞同：2
> 
> 时间：2012-08-14T14:45:22.100
> 
> 标签：c#, sql-server, linq, linq-to-sql

我不知道应该放什么标题，当然可以随意编辑，英语不是我的母语。

我已经链接了具有`Items`和`Categories`在其中的 LINQ2SQL 数据库。`Items`表有字段`IsActive`。

如何选择其中包含已`IsActive`设置为的项目的所有类别`true`？我可以很容易地选择所有项目`var items = _db.Items.Where(x => x.IsActive == true);`，但我现在可以以某种方式选择与我刚刚选择的这些项目相关联的所有类别吗？

我对 LINQ 的了解非常有限，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:49:39.593

尝试如下

对于每个活动项目

```
var items = _db.Cateogry.Where(x => x.Items.All( y=>y.IsActive == true)); 
```

对于任何活动项目

```
var items = _db.Cateogry.Where(x => x.Items.Any( y=>y.IsActive == true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:49:22.197

假设存在适当的关联属性，您可以执行以下操作：

```
var activeCategories = from category in _db.Categories
                       where category.Items.Any(item => item.IsActive)
                       select category; 
```

如果您必须加入，请尝试以下操作：

```
var activeCategories = from category in _db.Categories
                       join item in _db.Items on category.Id equals item.CategoryId
                                                  into categoryGroup
                       where categoryGroup.Any(i => i.IsActive)
                       select category; 
```

（或者）

```
var activeCategories = from category in _db.Categories
                       join item in _db.Items.Where(i => i.IsActive)
                                 on category.Id equals item.CategoryId
                                 into categoryGroup
                       where categoryGroup.Any()
                       select category; 
```

（或者）

```
var activeCategories = from category in _db.Categories
                       where _db.Items
                                .Where(i => i.IsActive)
                                .Select(i => i.CategoryId)
                                .Contains(category.Id)
                       select category; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:50:18.293

假设每个项目都有一个 CategoryID 或类似的，那么：

```
from c in db.Categories
  where db.Items.Any(it => it.CategoryID == c.ID && it.IsActive)
  select c; 
```

值得注意的是：

```
(from c in db.Categories join it in db.Items
  on c.ID equals it.CategoryID
  select c).Distinct(); 
```

在这种情况下，这有点不必要，但是后者有一些常见的变体，可以为您提供比前者更多的功能。

# c# - 我无法从 C# HTTPWebRequest 获取 cookie

> ID：11954889
> 
> 赞同：-1
> 
> 时间：2012-08-14T14:45:23.310
> 
> 标签：c#, http, cookies, request, response

我需要从登录中获取 cookie，因为我将在同一页面中应用此 cookie。这是我的代码

```
 string boundary = "41184676334";
        string username = "username";
        string password = "password";

        string login_post_data =
               "POSTDATA=-----------------------------" + boundary  +
               "\nContent-Disposition: form-data; name=\"login\"" +
               "\n\n" + username  +
               "\n-----------------------------" + boundary  +
               "\nContent-Disposition: form-data; name=\"key\"" +
               "\n\n" + password  +
               "\n-----------------------------" + boundary  +
               "\nContent-Disposition: form-data; name=\"clcode\"" +
               "\n\n" +
               "\n-----------------------------" + boundary  + "--";

        var cookies = new CookieContainer();

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://site.com/cgi-bin/login.pl?logout");
        request.CookieContainer = cookies;

        request.Method = "POST";
        request.ContentType = "multipart/form-data; boundary=---------------------------" + boundary;

        request.Host = "site.com";
        request.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1";
        request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        request.Referer = "https://site.com/cgi-bin/login.pl?logout";
        //request.Headers.Add("POSTDATA", post_data);

       using (var requestStream = request.GetRequestStream())
       {
           requestStream.Write(StrToByteArray(login_post_data), 0, StrToByteArray(login_post_data).Length);
        }

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        using (Stream stream = response.GetResponseStream())
        {

            StreamReader reader = new StreamReader(stream);

            string temp = reader.ReadToEnd();
            richTextBox1.Text = temp;
        }

        foreach (string c in response.Cookies)
        {
            listBox1.Items.Add(c);
        } 
```

事情是“https://site.com/cgi-bin/login.pl?logout”是我登录后的同一页面，我需要传递cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:52:19.543

看起来您尝试在发送到 URL 的请求的同时登录和注销

```
https://site.com/cgi-bin/login.pl?logout 
```

删除`?logout`参数，然后重试。如果它没有改变任何东西，请更新您的问题。

请进一步解释您要实现的目标，以便我们讨论代码是否正确。

# actionscript-3 - 如何提供内联 TextInput 格式模板

> ID：11954893
> 
> 赞同：2
> 
> 时间：2012-08-14T14:45:40.077
> 
> 标签：actionscript-3, apache-flex, formatting, flex4.5, textinput

我有一个 spark TextInput 控件，我想在用户输入时自动格式化。格式类似于`XX-XX-XXX-XXX`每个`X`都是数字的地方。

我已经创建了一个自定义`Formatter`，用于在其他位置显示这些值，但是我无法获得一个优雅的解决方案来在 TextInput 控件本身中提供这种自动格式设置。

这是我目前拥有的代码。它可以工作，但是当格式化程序插入一个连字符时，TextInput 的插入点不会前进，因此下一个数字会插入*到倒数第二个*位置。

```
<fx:Script>
  protected function changeHandler(event:TextOperationEvent):void
  {
    itemID.text = formatter.format(itemID.text);
  }
</fx:Script>

<fx:Declarations>
  <formatters:MyFormatter id="formatter" separator="-" pattern="{[2,2,3,3]}" />
</fx:Declarations>

<s:Form>
  <s:FormItem label="Item ID:">
    <s:TextInput id="itemID" restrict="0-9" change="changeHandler(event)" prompt="ex. xx-xx-xxx-xxx" /> 
  </s:FormItem>
</s:Form> 
```

这是按顺序输入字符 1,2,3,4,5,6,7,8,9,0 的结果。如您所见，插入点是从末尾开始的三个字符，对应于三个插入的连字符。

![显示错误字符插入的示例](../Images/38a44b074a1d38ede7419cc5f58e7c4e.png)

关于在这里创建流畅的用户体验有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:25:36.387

如果您`itemID`是基于 TextField 的类，请使用：

```
itemID.setSelection(itemID.length, itemID.length); 
```

它将插入符号移动到 TF 的末尾。

# asp.net-mvc - MVC 3编辑功能不起作用

> ID：11954894
> 
> 赞同：0
> 
> 时间：2012-08-14T14:45:41.717
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, viewmodel, edit

我似乎无法让我的视图的编辑功能起作用..我有一个列出的页面，一个显示特定详细信息的页面，在该页面上，我应该能够编辑表单的信息..问题：当我运行应用程序时，它说：没有为此对象定义无参数构造函数。我究竟做错了什么...？

在家庭控制器中，我有：

编辑功能：

```
 [HttpGet]
    public ViewResult EditSchoolDetails(int id)
    {
        var institution = _educationRepository.GetInstititionById(id);

        var model = (Mapper.Map<Institution, InstitutionModel>(institution));

        return View(model);
        } 
```

发布 [HttpPost]

```
public ActionResult EditSchoolDetails( InstitutionModel institutionModel, int id)
  {

       if (ModelState.IsValid)             {
 //_get from repository and add to instituion
           var institution = _educationRepository.GetInstititionById(institutionModel.Id);
       // Map from the view model back to the domain model
             var model = Mapper.Map<Institution, InstitutionModel>(institution);
           //UpdateModel(model);
       SaveChanges();
    return RedirectToAction("ViewSchoolDetails", new {institutionModel = institutionModel, id = id});

           }

return View(institutionModel);
  } 
```

制度模式

```
 public class InstitutionModel { 
      public InstitutionModel() { 
          NAABAccreditations = new List<AccreditationModel>(); 
      } 

      public int Id { get; set; } 
      public string Name { get; set; } 
      public bool IsNAAB { get { return NAABAccreditations.Any(); } }
      public string Website { get; set; }
      public AddressModel Address { get; set; }
      public IEnumerable<AccreditationModel> NAABAccreditations { get; set; } 
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:01:39.687

该类是否有无`Institution`参数构造函数？如果不是，那将是问题所在。您正在将 an 传递`InstitutionModel`给编辑视图，因此 post 操作可能也应该采取 an `InstitutionModel`，然后您可以映射回原始`Institution`模型：

```
public ActionResult EditSchoolDetails(int id, InstitutionModel institutionModel)
{
    if (ModelState.IsValid)
    {
        //add to database and save changes
        Institution institutionEntity = _educationRepository.GetInstititionById(institution.Id);
        // Map from the view model back to the domain model
        Mapper.Map<InstitutionModel, Institution>(institutionModel, institutionEntity);
        SaveChanges();
        return RedirectToAction("ViewSchoolDetails",);
    }

    return View(institutionModel);
} 
```

另请注意，如果模型状态无效，它将如何将视图模型返回给视图，否则您将丢失所有表单值！

这也是一个类似的问题，可能会有所帮助：[ASP.NET MVC: No parameterless constructor defined for this object](https://stackoverflow.com/questions/1355464/asp-net-mvc-no-parameterless-constructor-defined-for-this-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:24:25.503

每当我得到这个时，我都忘记在我的视图模型上创建一个无参数的构造函数。我现在总是添加一个，以防万一我忘记了。

机构模型有吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:54:32.473

是否可能需要将参数传递给`ViewSchoolDetails`？我注意到在 return 语句中你注释掉你传递了一个 id，但是在你使用的 return 语句中，你没有传递任何东西。

**编辑**

这（来自您下面的评论）：

```
parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult ViewSchoolDetails(Int32) 
```

...告诉我您需要将参数传递给 ViewSchoolDetails

**编辑 2**

我看到了您的编辑，并会这样说：如果您调用的方法是

```
public ActionResult ViewSchoolDetails(InstitutionModel institutionModel, int id) 
```

然后你必须向它传递一个类型的对象`InstitutionModel`和一个`int`as 参数，否则你会得到一个异常。意思是，你需要

```
RedirectToAction("ViewSchoolDetails", new {institutionModel = institutionModel, id = id}); 
```

# ms-access - 选中复选框时将行插入表格

> ID：11954895
> 
> 赞同：0
> 
> 时间：2012-08-14T14:45:44.723
> 
> 标签：ms-access, vba, ms-access-2010

我有一个 MS Access 数据库来处理我们的产品定价。我的一张表中包含我们所有的产品，其中包含“是/否”、“复选框”字段字段，以识别我们是否批量处理该产品。我有一个单独的表格来处理我们的批量产品定价。目前，当我想设置散装产品时，我将其添加到我们的产品表中，勾选散装，以便将其从非散装价格查询中删除，然后将产品# 添加到散装产品表中。

我是VBA的新手，但是我想要的是，当检查“散装”字段时，请使用当前行的产品代码，并将其插入批量产品中的产品代码字段中。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:48:55.710

是的，有可能，您可以在 VBA 中运行更新查询，但我建议您不要这样做。它将涉及您检查记录是否已存在于批量表中，是否存在，是否匹配，如果有人误点击则回退。我不相信你需要两个表，你只需要一个字段来表明产品是散装的。

# eclipse - Eclipse空（测试）更新站点

> ID：11954898
> 
> 赞同：2
> 
> 时间：2012-08-14T14:45:52.607
> 
> 标签：eclipse, repository, update-site

有没有办法为 Eclipse 创建一个空的更新站点存储库？

我目前正在开发一种正在测试的产品，并且我希望能够将更新站点自动添加到启用的可用软件站点中。

如果我这样做，那么用户会收到一个错误，告诉他在那个位置没有找到存储库。

有没有办法在那里有一个不包含任何更新的存储库？我可以只放置一个空的 content.xml 和 artifact.xml 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:35:15.057

如果您有一个 p2 复合站点[1](http://download.jboss.org/jbosstools/builds/staging/_composite_/core/trunk/)并且需要使用多个空站点引导它（在它们全部构建之前），您可能需要这样的东西：

```
now=`date +%s000`
webserver=user@domain:/web/server/path

cd /tmp
for d in component1 component2 component3 component4; do
echo "== ${f}/${d} =="
mkdir -p ${d}/all/repo/
echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" > ${d}/all/repo/site.xml
echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" > ${d}/all/repo/artifacts.xml
echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" > ${d}/all/repo/content.xml
echo "<site><description>Placeholder for ${d} site</description><feature></feature><category-def></category-def</site>" >> ${d}/all/repo/site.xml
echo "<?artifactRepository version='1.1.0'?><repository name='${d}.site' type='org.eclipse.equinox.p2.artifact.repository.simpleRepository' version='1'><properties size='2'><property name='p2.timestamp' value='${now}'/><property name='p2.compressed' value='true'/></properties></repository>" >> ${d}/all/repo/artifacts.xml
echo "<?metadataRepository version='1.1.0'?><repository name='${d}.site' type='org.eclipse.equinox.internal.p2.metadata.repository.LocalMetadataRepository' version='1.0.0'><properties size='2'><property name='p2.timestamp' value='${now}'/><property name='p2.compressed' value='true'/></properties></repository>" >> ${d}/all/repo/content.xml
rsync -zrlt --rsh=ssh --protocol=28 ${d}/* ${weberver}/${f}/${d}/
done
cd ..
done 
```

[1](http://download.jboss.org/jbosstools/builds/staging/_composite_/core/trunk/) [http://download.jboss.org/jbosstools/builds/staging/*复合*/core/trunk/]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:59:22.700

为了避免更新页面不存在的任何消息，我创建了一个包含 site.xml、artifacts.jar 和 content.jar 的虚拟更新站点

我在[这里](http://dl.dropbox.com/u/1196387/dummy.zip)上传了一个包含虚拟文件的存档。

对于那些不够信任的人，site.xml 的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<site>

   <feature>

   </feature>
   <category-def>

   </category-def>
</site> 
```

包含在 artifacts.jar 存档中的 artifacts.xml 的代码是：

```
<?xml version='1.0' encoding='UTF-8'?>
<?artifactRepository version='1.1.0'?>
<repository name='${p2.artifact.repo.name}' type='org.eclipse.equinox.p2.artifact.repository.simpleRepository' version='1'>
  <properties size='2'>
    <property name='p2.timestamp' value='1305295295102'/>
    <property name='p2.compressed' value='true'/>
  </properties>

</repository> 
```

最后，content.xml 的内容（来自 content.jar 文件）是：

```
<?xml version='1.0' encoding='UTF-8'?>
<?metadataRepository version='1.1.0'?>
<repository name='${p2.metadata.repo.name}' type='org.eclipse.equinox.internal.p2.metadata.repository.LocalMetadataRepository' version='1.0.0'>
  <properties size='2'>
    <property name='p2.timestamp' value='1305295295368'/>
    <property name='p2.compressed' value='true'/>
  </properties>
</repository> 
```

# android - Android LinearLayout.LayoutParams 在 View.measure() 上抛出异常

> ID：11954901
> 
> 赞同：0
> 
> 时间：2012-08-14T14:46:01.540
> 
> 标签：android, android-layout, android-linearlayout

首先，一些关于我正在尝试做的事情的背景。我以编程方式（在运行时）删除 ScrollView 的子元素并将其替换为 LinearLayout，并将曾经是 ScrollView 的子元素添加为 LinearLayout 的子元素。但是，为了获得我想要实现的目标，我必须处理设置我创建的 LinearLayout。至少，我意识到我必须设置 LinearLayout 的方向并更改一些大小设置。不幸的是，当我使用 LinearLayout 的 setLayoutParams() 方法时，它最终导致我的应用程序在某个地方崩溃（此代码从 onCreate 运行，但堆栈跟踪不显示 onCreate）。以下是相关代码：

```
parentContainer = new LinearLayout(activity);

            // So now we swap out our LinearLayout as the ScrollView's child and parent the ViewGroup to the LinearLayout.
            scrollView.removeAllViews();
            scrollView.addView(parentContainer);
            parentContainer.setOrientation(LinearLayout.VERTICAL);
            parentContainer.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

显然（最佳猜测）导致问题的行是：

```
parentContainer.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

堆栈跟踪显示：

```
java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams
    at android.widget.ScrollView.onMeasure(ScrollView.java:291)
    at android.view.View.measure(View.java:7703)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:2989)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
    at android.view.View.measure(View.java:7703)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:2989)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
    at android.view.View.measure(View.java:7703)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:2989)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
    at android.view.View.measure(View.java:7703)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:747)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1613)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4203)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
    at dalvik.system.NativeStart.main(Native Method) 
```

这让我认为我错误地使用了 LayoutParams，但是 LinearLayout.LayoutParams 和 setLayoutParams 的文档没有提供任何线索，并且异常没有相关消息（这在 Android 端是非常糟糕的设计）。我想检查是否有其他人知道我在这里做错了明显的事情。我的下一步是调试到 Android 源代码，但很难获得我需要的确切版本，而且调试时间非常昂贵。

所以问题是，我正在尝试做的事情有什么明显的错误，这样我就不会花几个小时调试一些愚蠢的使用错误？

PS：我正在测试/定位的Android版本是1.6（模拟器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:50:26.543

您没有将 LinearLayout 放置在另一个 LinearLayout 中，因此您会得到一个类转换异常。由于您将其放置在扩展 FrameLayout 的 ScrollView 中，因此将该行更改为：

```
parentContainer.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT)); 
```

或者，您可以在将其添加到视图时设置布局参数，如下所示：

```
scrollView.addView(parentContainer, new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.WRAP_CONTENT)); 
```

# search - hadoop中的索引和搜索

> ID：11954904
> 
> 赞同：3
> 
> 时间：2012-08-14T14:46:07.553
> 
> 标签：search, solr, indexing

有人可以告诉我如何解决下面提到的问题吗？

我有大量存储在 HDFS 中的文本文件。我的客户端应用程序需要查找特定搜索词的相关文件。我想知道 Apache Solr 是否可行。任何帮助是极大的赞赏。

谢谢，阿伦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T15:13:01.470

我认为您需要考虑的第一个问题是搜索是实时的（索引会经常更新）还是会不那么频繁。如果是前者，那么我强烈建议您使用 Elastic Search。而且，不要仅仅依靠我的建议。这个问题对 Elastic Search vs Solr Debate 有一些很好的答案。

[Solr 与 ElasticSearch](https://stackoverflow.com/questions/10213009/solr-vs-elasticsearch)

而且，关于您关于在 Apache Solr 中使用 hadoop 的问题，这里有一些我在互联网上找到的有用链接

[http://www.likethecolor.com/2010/09/26/using-hadoop-to-create-solr-indexes](http://www.likethecolor.com/2010/09/26/using-hadoop-to-create-solr-indexes)

[http://architects.dzone.com/articles/solr-hadoop-big-data-love](http://architects.dzone.com/articles/solr-hadoop-big-data-love)

# jquery - 模拟从左到右在 div 中滑动

> ID：11954907
> 
> 赞同：0
> 
> 时间：2012-08-14T14:46:12.117
> 
> 标签：jquery, jquery-animate

我有两个 div，我想模拟一个滑块但实际上不使用滑块，是否可以使用 animate 来模拟一个从右侧滑入的 div？

```
$('a.next').click(function(){
   $("#inside_work.part-one").hide();
   $("#inside_work.part-two").animate('slide', { direction: 'left' }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:53:57.740

您需要的一切都在这里。

[jQuery 幻灯片演示](http://jqueryui.com/demos/show/)

```
 // click 
    $( "#inside_work.part-two" ).click(function() {
        //options and callback are optional
        var options = {};
        $("#inside_work.part-one").hide();
        $( "#effect" ).show( "hide", options, 500, callback );
        return false;
    });

    //callback function
    function callback() {
        //anything else you want to do here.
        //but completely optional
    }; 
```

# jquery - Jquery追加到表TR

> ID：11954909
> 
> 赞同：1
> 
> 时间：2012-08-14T14:46:19.217
> 
> 标签：jquery, html-table, append

我正在使用以下 jQuery 代码附加到我的表中：

```
 $("tbody#order_details").append('<tr>...</tr><tr>...</tr>');
        $("tbody#order_details").append('<tr>...</tr><tr>...</tr>'); 
```

但是，当它执行时，它会将 放置在页面顶部，而不是当前开始`<tr>...</tr><tr>...</tr>`的位置下方。`<tbody id="order_details">`

表代码是这样的：

```
 <table border="1" cellspacing="0" cellpadding="0" id="OrdersTable" 
            style="border: 1px solid black; margin-top: 0px;">
        <tbody>
        <tr>
            <th>Account Number</th>
            <td colspan="3">99996</td>
            <th>Email</th>
            <td colspan="5"><asp:Label ID="billing_email" runat="server" Text="Label"></asp:Label></td>
            </tr>
        <tr>
        etc etc....
        </tbody>
             <tbody id="order_details"> 
                <!-- Start looping the orders here -->

             </tbody>
        </table> 
```

我忘记放置什么以便在 之后添加这两行`<tbody id="order_details">`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:55:41.263

尝试这个 ：：

```
$("tbody#order_details").append('<tr><td>...</td></tr><tr><td>...</td></tr>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:52:46.587

只需将此html更改为：

```
 <table border="1" cellspacing="0" cellpadding="0" id="OrdersTable" style="border: 1px solid black; margin-top: 0px;">
        <thead>
        <tr>
            <th>Account Number</th>
            <th colspan="3">99996</th>
            <th>Email</th>
            <th colspan="5"><asp:Label ID="billing_email" runat="server" Text="Label"></asp:Label></th>
        </tr>
        etc etc....
        </thead>
        <tbody id="order_details"> 
          <!-- Start looping the orders here -->

        </tbody>
        </table> 
```

我认为这是因为 HTML 标记，我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:53:09.403

您必须在 TD 中写入“...”。应该 ... 。

为了获得更好的性能，请仅使用#order_details 而不是 tbody#order_details。由于 ID 是唯一的，jQuery 总能找到正确的元素，而无需指定标签名称

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:55:07.757

您的标记无效，因此 jQuery 无法理解该做什么。

我用我认为你想要的东西创建了一个 jsFiddle：http: [//jsfiddle.net/DSLBT/](http://jsfiddle.net/DSLBT/)

# sql - 在同一列上排序两次

> ID：11954910
> 
> 赞同：4
> 
> 时间：2012-08-14T14:46:25.923
> 
> 标签：sql, sql-server, sorting

我有一个客户给我的一个奇怪的问题。

他有一个数据列表，括号之间的日期如下：

```
Foo (14/08/2012)
Bar (15/08/2012)
Bar (16/09/2012)
Xyz (20/10/2012) 
```

但是，他希望列表显示如下：

```
Foo (14/08/2012)
Bar (16/09/2012)
Bar (15/08/2012)
Foot (20/10/2012) 
```

（请注意，第二个 Bar 已上移一位）

因此，其背后的逻辑是，列表必须按日期升序排序，除非两行具有相同的名称（'Bar'）。如果它们具有相同的名称，则必须以 LATEST 日期在顶部进行排序，同时保持其他排序顺序。

这甚至有可能吗？我尝试了很多`ORDER BY`子句，但找不到合适的子句。有人有想法吗？

我应该指定此数据来自 sql server 数据库中的表（名称和日期位于两个不同的列中）。所以我正在寻找一个可以进行我想要的排序的 SQL 查询。

（我已经把这个例子简化了很多，所以如果你需要更多的上下文，不要犹豫，问）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:58:16.717

这行得通，我想

```
declare @t table (data varchar(50), date datetime)

insert @t 
values
('Foo','2012-08-14'),
('Bar','2012-08-15'),
('Bar','2012-09-16'), 
('Xyz','2012-10-20')

select t.*
from @t t
    inner join (select data, COUNT(*) cg, MAX(date) as mg from @t group by data) tc
        on t.data = tc.data
order by case when cg>1 then mg else date end, date desc 
```

生产

```
data       date
---------- -----------------------
Foo        2012-08-14 00:00:00.000
Bar        2012-09-16 00:00:00.000
Bar        2012-08-15 00:00:00.000
Xyz        2012-10-20 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:48:27.647

比任何其他发布的答案都具有更好性能的方法是完全使用 a`ORDER BY`而不是 a`JOIN`或 using `CTE`：

```
DECLARE @t TABLE (myData varchar(50), myDate datetime)

INSERT INTO @t VALUES 
('Foo','2012-08-14'),
('Bar','2012-08-15'),
('Bar','2012-09-16'), 
('Xyz','2012-10-20')

SELECT *
FROM @t t1
ORDER BY (SELECT MIN(t2.myDate) FROM @t t2 WHERE t2.myData = t1.myData), T1.myDate DESC 
```

这完全符合您的要求，并且可以与任何索引一起使用，并且比任何其他答案都更好地处理大量数据。

此外，更清楚您在这里实际尝试做什么，而不是用连接的复杂性掩盖真实逻辑并检查连接项目的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:14:38.203

这个使用[分析函数](http://msdn.microsoft.com/en-us/library/hh213234.aspx)来执行排序，它只需要从你的表中选择一个。

内部查询查找名称更改的间隙。这些间隙用于识别下一个查询中的组，外部查询按这些组进行最终排序。

我在[这里（SQL Fiddle）](http://sqlfiddle.com/#!6/dcda1/3)用扩展的测试数据尝试过。

```
SELECT name, dat
FROM (
  SELECT name, dat, SUM(gap) over(ORDER BY dat, name) AS grp
  FROM (
    SELECT name, dat,
          CASE WHEN LAG(name) OVER (ORDER BY dat, name) = name THEN 0 ELSE 1 END AS gap
    FROM t
  ) x
) y
ORDER BY grp, dat DESC 
```

* * *

**扩展测试数据**

```
('Bar','2012-08-12'),
('Bar','2012-08-11'),
('Foo','2012-08-14'),
('Bar','2012-08-15'),
('Bar','2012-08-16'),
('Bar','2012-09-17'),
('Xyz','2012-10-20') 
```

**结果**

```
Bar     2012-08-12
Bar     2012-08-11
Foo     2012-08-14
Bar     2012-09-17
Bar     2012-08-16
Bar     2012-08-15
Xyz     2012-10-20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T06:35:14.057

我认为这是可行的，包括我在评论中询问的情况：

```
declare @t table (data varchar(50), [date] datetime)

insert @t 
values
('Foo','20120814'),
('Bar','20120815'),
('Bar','20120916'), 
('Xyz','20121020')

; With OuterSort as (
    select *,ROW_NUMBER() OVER (ORDER BY [date] asc) as rn from @t
)
--Now we need to find contiguous ranges of the same data value, and the min and max row number for such a range
, Islands as (
    select data,rn as rnMin,rn as rnMax from OuterSort os where not exists (select * from OuterSort os2 where os2.data = os.data and os2.rn = os.rn - 1)
    union all
    select i.data,rnMin,os.rn
    from
        Islands i
            inner join
        OuterSort os
            on
                i.data = os.data and
                i.rnMax = os.rn-1
), FullIslands as (
    select
        data,rnMin,MAX(rnMax) as rnMax
    from Islands
    group by data,rnMin
)
select
    *
from
    OuterSort os
        inner join
    FullIslands fi
        on
            os.rn between fi.rnMin and fi.rnMax
order by
    fi.rnMin asc,os.rn desc 
```

它首先计算`OuterSort`CTE 中的初始排序。然后，使用两个 CTE (`Islands`和`FullIslands`)，我们计算该排序中相同数据值出现在相邻行中的部分。完成后，我们可以通过所有相邻值将具有的任何值（例如它们所属的“岛”的最低行号）计算最终排序，然后在“岛”内，我们使用相反的最初计算的排序顺序。

但是请注意，这对于大型数据集可能不太有效。在示例数据中，它显示需要对基表进行 4 次表扫描，以及一个假脱机。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-14T14:59:51.240

尝试类似...

```
ORDER BY CASE date
    WHEN '14/08/2012' THEN 1
    WHEN '16/09/2012' THEN 2
    WHEN '15/08/2012' THEN 3
    WHEN '20/10/2012' THEN 4
END 
```

在 MySQL 中，您可以执行以下操作：

```
ORDER BY FIELD(date, '14/08/2012', '16/09/2012', '15/08/2012', '20/10/2012') 
```

在 Postgres 中，您可以创建一个函数 FIELD 并执行以下操作：

```
CREATE OR REPLACE FUNCTION field(anyelement, anyarray) RETURNS numeric AS $$
  SELECT
    COALESCE((SELECT i
              FROM generate_series(1, array_upper($2, 1)) gs(i)
              WHERE $2[i] = $1),
             0);
$$ LANGUAGE SQL STABLE 
```

如果不想使用 CASE，可以尝试在 SQL Server 中找到 FIELD 函数的实现。

# android - 在 android 中使用 Achartengine 时如何更改图表 UI？

> ID：11954915
> 
> 赞同：1
> 
> 时间：2012-08-14T14:46:33.523
> 
> 标签：android, charts, achartengine

使用Achartengine绘制图表时，Achartengine库的函数只会提供一个intent，然后你只需要跳转到intent指向的屏幕即可；是的....这可以完美运行..但是，屏幕如此简单，图表屏幕的样式与其他屏幕完全不兼容，而且似乎Achartengine库没有提供任何更改图表的接口UI（不仅仅是线或点的颜色），任何人都可以告诉我一些解决这个问题的想法......任何帮助将不胜感激！

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:55:31.227

AChartEngine API 实际上也允许您创建视图。这意味着您可以在同一屏幕下拥有一个图表和其他 UI 组件。AChartEngine 演示中的示例代码向您展示了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:05:19.427

如果您通过清单应用应用程序范围的主题，您将继承其中的一些。背景颜色等。否则，您必须在设置意图时通过代码指定文本/轴/线颜色。

# asp.net - 跨域会话在 asp.net 中保持活动状态

> ID：11954921
> 
> 赞同：1
> 
> 时间：2012-08-14T14:46:47.157
> 
> 标签：asp.net, session, cross-domain, keep-alive

我有两个应用程序在不同的域上运行：

1.  webformapp.com
2.  mvcapp.com

webformapp.com 有一个指向 mvcapp.com 的 iframe。现在，当 mvcapp.com 上有活动时，我想在 webformapp.com 中保持会话活动。我在 webformapp.com 中实现了一个通用处理程序（KeepAlive.ashx），并尝试从 mvcapp.com 调用以在 webformapp.com 上保持会话活动，但我猜是因为跨域访问限制，直接调用 webformapp.com/KeepAlive。来自 mvcapp.com 的 ashx 通过一个简单的 http get/post 请求没有命中处理程序。我猜[这里](https://stackoverflow.com/questions/5642682/keeping-a-related-asp-net-applications-session-alive-from-another-asp-net-appli)给出的解决方案是针对同一个域的。在这种情况下实现保持活动机制的任何更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:04:30.953

如果我理解您的问题，则用户正在 webform 应用程序提供的 iframe 内的 mvc 应用程序上积极地做事。只要该浏览器窗口打开，您是否能够从 iframe 外部的浏览器向 webform 应用程序发送 javascript 超时？

我过去做过类似的事情，我在他们的会话中维护了一个计数器，并且在 x 刷新后，处理程序将响应一个失败代码，浏览器可以通过重定向提示或你有什么来响应该代码。

# c# - C# 转换列表 to Original Type without an Explicit Cast I'm having trouble converting a list object back to its original type without an explicit cast. My intention is to generalize methods so I could pass in different db Types such a 问问题 问问题 2012-08-14T14:46:54.330 4326 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm having trouble converting a list object back to its original type without an explicit cast. My intention is to generalize methods so I could pass in different db Types such as Person or Company. I have no problem getting the values via reflection but I need to convert the actual list back to its original type List <typet>instead of List in the method I am passing it to. I am aware of the following methods: SomeList.ConvertAll(x => (typeT)x); SomeList.Cast<typet>().ToList(); However for these methods I will have to explicitly cast typeT. I have tried the following: formatted1.ConvertAll(x => Convert.ChangeType(x, typeT)); and List <dynamic>newList = new List<dynamic>(); foreach (var p in SomeList) { newList.Add(Convert.ChangeType(p, typeT); } No success thus far. Maybe I should have another game-plan for generalizing these methods altogether. right now I'm passing the lists in as follows: public string returnJson(List entity, string someString) { } It seems like making returnJson generic would resolve most of these problems: public string returnJson<t>(List <t>entity, string someString) { } Now returnJson can be used generically, like: returnJson<company>(listOfCompanies, "someString"); and returnJson<person>(listOfPersons, "someOtherString"); You can still reflect over the objects, but the list is always a list of the type that you need at compile time. No casting required. c#dynamicgeneric-list 4 3 回答 3 This answer is useful 6 似乎使returnJson泛型可以解决大多数这些问题： public string returnJson<t>(List <t>entity, string someString) { } 现在returnJson可以泛型使用，例如： returnJson<company>(listOfCompanies, "someString"); 和 returnJson<person>(listOfPersons, "someOtherString"); 您仍然可以反映对象，但列表始终是您在编译时需要的类型的列表。无需铸造。 于 2012-08-14T14:50:14.750 回答 This answer is useful 1 Why not use generics, that way the calling function can do what it needs: public string returnJson<t>(List <t>entity, string someString) { //not sure what someString is for or why you need the type for this naming scheme JavaScriptSerializer jss = new JavaScriptSerializer(); return jss.Serialize(entity); } 于 2012-08-14T14:50:52.840 回答 This answer is useful 0 You can use the dynamic keyword and reflection to create the list. dynamic newList = Activator.CreateInstance(typeof(List<>).MakeGenericType(typeT)); foreach (var p in SomeList) { newList.Add(p); } CallOtherMethodOverloadedForListOfPersonCompanyEtc(newList) 于 2012-08-14T18:08:11.793 回答 Related 1 sql-server - 哪个查询执行得更快，使用表对象的查询或使用 sql server 中的临时表的查询 2 maven - 具有正确类路径的 Maven 插件分叉过程 1 javascript - 如何获得 180 天之前的日期？ 1 java - 一键打开/关闭项目中的原生支持 1 ruby - 无法在 Mountain Lion 上使用 RVM 安装 OpenSSL 包 3 java - 如何从 url 读取参数包含 '#' 而不是 '?' 4 php - mod_rewrite 正则表达式 1 php - 我可以在库方法codeigniter中使用模型类的方法吗 1 zend-framework - 单例类中的 Zend 模型访问 - 最佳方法 3 awk - 用 awk 在第 5 列中留出空间 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11954923
> 
> 赞同：5
> 
> 时间：
> 
> 标签：c#, dynamic, generic-list

I'm having trouble converting a list object back to its original type without an explicit cast. My intention is to generalize methods so I could pass in different db Types such as Person or Company. I have no problem getting the values via reflection but I need to convert the actual list back to its original type `List<typeT>` instead of `List<object>` in the method I am passing it to. I am aware of the following methods:

```
 SomeList.ConvertAll(x => (typeT)x);
 SomeList.Cast<typeT>().ToList(); 
```

However for these methods I will have to explicitly cast typeT. I have tried the following:

```
formatted1.ConvertAll(x => Convert.ChangeType(x, typeT)); 
```

and

```
List<dynamic> newList = new List<dynamic>();
foreach (var p in SomeList)
{
   newList.Add(Convert.ChangeType(p, typeT);
} 
```

No success thus far. Maybe I should have another game-plan for generalizing these methods altogether. right now I'm passing the lists in as follows:

```
public string returnJson(List<object> entity, string someString)
{
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:50:14.750

似乎使`returnJson`泛型可以解决大多数这些问题：

```
public string returnJson<T>(List<T> entity, string someString)
{
} 
```

现在`returnJson`可以泛型使用，例如：

```
returnJson<Company>(listOfCompanies, "someString"); 
```

和

```
returnJson<Person>(listOfPersons, "someOtherString"); 
```

您仍然可以反映对象，但列表始终是您在编译时需要的类型的列表。无需铸造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:50:52.840

Why not use generics, that way the calling function can do what it needs:

```
public string returnJson<T>(List<T> entity, string someString)
{
     //not sure what someString is for or why you need the type for this naming scheme

     JavaScriptSerializer jss = new JavaScriptSerializer();
     return jss.Serialize(entity);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:08:11.793

You can use the dynamic keyword and reflection to create the list.

```
dynamic newList = Activator.CreateInstance(typeof(List<>).MakeGenericType(typeT));
foreach (var p in SomeList)
{
   newList.Add(p);
}
CallOtherMethodOverloadedForListOfPersonCompanyEtc(newList) 
```</t></t></person></company></t></t></person></company></t></t></dynamic></dynamic></typet></typet>

# c# - 插入换行符而不是 CRLF

> ID：11954929
> 
> 赞同：16
> 
> 时间：2012-08-14T14:47:21.857
> 
> 标签：c#

使用 StringBuilder 并在我的字符串中使用 Environment.NewLine，当我打开它时它显示为 CRLF，C# 中是否还有其他命令输出仅显示为“LF”而不是“CRLF”？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-14T14:50:34.113

简单地写

```
sb.Append((char)10); 
```

或更具可读性

```
sb.Append('\n'); 
```

更具可读性

```
const char LF = '\n';
sb.Append(LF); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-14T14:56:12.447

存在的`Environment.NewLine`唯一区别是类似于 Windows 的行尾`\r\n`（`\n`Linux，那么您只需要`\n`，`Environment. NewLine`它将包含运行时设置的内容）。

所以当你知道你总是并且只想要一个换行符时，只需`\n`输入你的代码。它不会改变。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T14:49:41.773

使用转义字符 '\n' 而不是 Environment.Newline

有关转义字符列表，请参阅[http://msdn.microsoft.com/en-us/library/h21280bw.aspx](http://msdn.microsoft.com/en-us/library/h21280bw.aspx) ，有关环境，请参阅[http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx) .换行行为。

# javascript - 将服务器上外部文件中的变量加载到 HTML 文档中？

> ID：11954931
> 
> 赞同：1
> 
> 时间：2012-08-14T14:47:29.580
> 
> 标签：javascript, html, variables

标题确实说明了一切，但我想在我的 .html 文件的文件夹中有一个包含许多字符串的文件，并以某种方式将它们加载到页面中，可能使用 document.write() 或类似的东西。该网站遵循一个模板，我需要将许多字符串文件可互换地加载到文档中，就像我想象一个社交网络对其个人资料页面所做的那样。例如：

```
"My name is $NAME. I'm %AGE years old. I'm %HEIGHT inches tall." % ('Files/strings.txt') 
```

文件布局如下：

```
$NAME = 'Bob'
$AGE = '20'
$HEIGHT = '70' 
```

或者

```
Bob
20
70 
```

甚至

```
Bob.20.70 
```

任何我能做到这一点的方式都会很好，虽然我不是特别喜欢 AJAX。没有从客户端传输数据，所以似乎我不需要 AJAX。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:08:03.803

如果您只想使用 javascript 而没有 ajax：

```
// strings.js
var data = {
 NAME: 'Bob',
 AGE: 20,
 HEIGHT: 70
}; 
```

* * *

```
// index.html
<script src="strings.js"></script>
<script>
  window.onload = function () {
    var tags = document.getElementsByClassName('templated');
    for (var i=0; i<tags.length; ++i) {
      applyTemplate(tags[i]);
    }
  }
  function applyTemplate (tag) {
    for (var key in data) {
      var regexp = new RegExp('%'+key, 'g');
      tag.innerHTML = tag.innerHTML.replace(regexp, data[key]);
    }
  }
</script>

<div class="templated">
  "My name is %NAME. I'm %AGE years old. I'm %HEIGHT inches tall."
</div>
<p>
  "My name is %NAME. I'm %AGE years old. I'm %HEIGHT inches tall."
</p> 
```

在上面的例子中，段落不会被转换，但 div 会

但是如果你可以使用 PHP：如果你可以使用 php 那么：

```
//strings.txt:
$data['any_namespace'] = array(
  'name' => 'Bob'
  'age' => 20
  'height' => 70
); 
```

* * *

```
//index.php:
<?php
  require_once 'strings.txt';
  echo <<<HTML_CONTENT
My name is $data['name']. I'm $data['age'] years old. I'm $data['height'] inches tall.
HTML_CONTENT;
?> 
```

* * *

希望这是你想要的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:52:59.143

听起来可以使用基本的模板引擎来完成。查看[Dust.js](http://akdubya.github.com/dustjs/)或其他[JavaScript 模板引擎](https://www.google.co.uk/search?q=javascript%20templating&aq=f&sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8)

Dust 的好处是能够使用存储在 .js 文件中的预编译模板。不知道其他人是否也有这种能力，我想有些人会......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:57:36.433

如果是， s 静态文件。您应该使用 JSON 结构存储数据。json 文件。

# jquery - JS中的类似画廊的功能

> ID：11954932
> 
> 赞同：0
> 
> 时间：2012-08-14T14:47:43.553
> 
> 标签：jquery, image, click, gallery

我正在尝试创建一个简单的画廊，当有缩略图并单击它时，您将在其他所有内容之上获得它的大图像（非常像在 facebook 上）。

我试过这样的事情：

```
var watcher = vwTm;
if (watcher == vwTm) {
    $(this).css(vwOr);
    watcher = vwOr;
}
else if (watcher == vwOr) {
    $(this).css(vmTm);
    watcher = vwTm;
} 
```

但它只对第一个函数起作用，对于第二个函数它不起作用，因为我猜`var watcher = vwTm;`在函数的开头有，所以`Watcher = vwOr`不收费。

我觉得我要走很愚蠢的路，但无论如何，如果有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:07:16.683

会不会像最后一行代码的错字一样简单？你有`watcher = vwT;`它看起来应该在的地方`watcher = vwTm;`。虽然，如果没有更多代码，很难确定。

此外，如果您不想重新发明轮子，我认为有一个名为 fancyBox 的好工具可以满足您的需求。[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# git - 将基于相同代码的多个 CodeIgniter 站点部署到不同的服务器并更新所有代码库

> ID：11954933
> 
> 赞同：1
> 
> 时间：2012-08-14T14:47:49.667
> 
> 标签：git, codeigniter

好的，所以我在 CodeIgniter 中构建了一个电子商务系统，并且它已经作为几个不同的站点部署了几次。随着更多站点在管道中，我需要想出一种能够在所有站点上实施更新的方法，以便如果在一个站点中发现并修复了错误，或者添加了新功能，那么对模型和控制器可以在所有站点上更新。

有没有办法在 GIT 或任何其他类似的版本控制系统中做这种事情？

感谢您提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:59:47.547

两个快速的方法跳到脑海：

首先，您可以使用中央存储库维护运行电子商务平台的站点列表，`git push`并在需要更新时对每个站点执行更新。

其次，对于运行您的电子商务平台的每个站点，您可以设置一个 cron jon 以`git pull`定期从中央存储库执行一次。更新时会有更多的延迟（每个站点都有自己的时间表），但中间对你来说就少了一点。

其他人可能对更复杂的方法来布置流程有建议，但快速`push`或`pull`应该涵盖简单的情况。

最后一句话：我不知道您的托管环境是什么样的，但如果您的站点的环境和/或配置有*任何*变化，您将需要选择一个流程，让您在应用升级之前测试升级——除非你[告诉它，](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)否则 git 不会检测到问题！

# dfa - NFA转DFA的伪代码

> ID：11954935
> 
> 赞同：3
> 
> 时间：2012-08-14T14:47:50.913
> 
> 标签：dfa, nfa

正如标题所示，我希望有人帮助我编写 NFA 到 DFA 的转换。我只需要伪代码。我试过用谷歌搜索，甚至找到了整个源代码，但是几乎没有资源可以帮助我给我一个正式的方法（用书面文字，而不是通过图片）进行转换。这是一道作业题，而且我已经过了截止日期，所以在这里我真的需要一些利他主义。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:55:12.837

我写了一篇关于这个主题的文章。

[通过子集构造将 NFA 转换为 DFA](http://binarysculpting.com/2012/02/15/converting-dfa-to-nfa-by-subset-construction-regular-expressions-part-2/)

它还包括有关如何进行转换的伪代码。

基本上该算法是，从 NFA 的起始状态开始：

```
Perform closure on the current state set
For each input symbol do the GOTO operation on the closure set.
   If the state set you get from the GOTO is not empty
      Do a closure of the state set.
      If it is a new set of states:
         add a transition between the state sets on the input 
         repeat the entire operation on this new set
      Else
         add a transition between the state sets on the input 
```

执行此操作，直到不再添加任何集合或过渡。这是一个很难解释的算法，但如果你有两个基本操作`CLOSURE`并`GOTO`完成了，这并不难。

# vba - 搜索查询第一次工作，但后续运行在查询表达式中出现运行时错误 3075 extra )

> ID：11954936
> 
> 赞同：1
> 
> 时间：2012-08-14T14:47:51.467
> 
> 标签：vba, ms-access, search

我已经解决了所有以前提出的问题，甚至尝试了解决方案，但无济于事，所以这是我的困境。我使用了来自 Allenbrowne 的搜索查询，它最初很棒。但是，我想添加到我已经完成的搜索条件，并且在第一次搜索时我得到了我正在寻找的结果。我现在使用不同的代码来删除所有搜索条件并取消过滤表单（拆分表单）。再次一切正常。现在我想使用相同的不同参数再次搜索，这次我得到运行时错误 3075，说明我在查询表达式中有一个额外的 )。我什至查看了查询以查看这个额外的 ) 在哪里，但无济于事。代码如下，在 Me.Filter = strWhere 上出错。在清除搜索屏幕并想要开始新搜索时，我还提供了重置过滤器。任何帮助将不胜感激。

```
Option Compare Database
Option Explicit

Private Sub cmdFilter_Click()

    Dim strWhere As String                  'The criteria string.
    Dim lngLen As Long                      'Length of the criteria string to append to.

    '***********************************************************************
    'Look at each search box, and build up the criteria string from the non-blank ones.
    '***********************************************************************

    If Not IsNull(Me.txtCustID) Then
        strWhere = strWhere & "([Customer_ID] = " & Me.txtCustID & ") AND "
    End If

     If Not IsNull(Me.txtJobID) Then
        strWhere = strWhere & "([Job_ID] = " & Me.txtJobID & ") AND "
    End If

     If Not IsNull(Me.txtName) Then
        strWhere = strWhere & "([Name] Like ""*" & Me.txtName & "*"") AND "
    End If

    If Not IsNull(Me.TxtPostcode) Then
        strWhere = strWhere & "([Postcode] = ""*" & Me.TxtPostcode & "*"") AND "
    End If

    If Not IsNull(Me.txtCompany) Then
        strWhere = strWhere & "([CompanyName] Like ""*" & Me.txtCompany & "*"") AND "
    End If

    If Not IsNull(Me.txtLocation) Then
        strWhere = strWhere & "([Location] Like ""*" & Me.txtLocation & "*"") AND "
    End If

    If Not IsNull(Me.CboStatus) Then
        strWhere = strWhere & "([Status] = " & Me.CboStatus & ") AND "
    End If

    If Not IsNull(Me.CboSource) Then
        strWhere = strWhere & "([EnquirySource] = " & Me.CboSource & ") AND "
    End If

        'See if the string has more than 4 characters (a trailng " AND ") to remove.
    lngLen = Len(strWhere) - 4
    If lngLen <= 0 Then     'Nah: there was nothing in the string.
        MsgBox "No criteria", vbInformation, "Nothing to do."
    Else                    'Yep: there is something there, so remove the " AND " at the end.
        strWhere = Left$(strWhere, lngLen)
        'For debugging, remove the leading quote on the next line. Prints to Immediate Window (Ctrl+G).
    Debug.Print strWhere

        'Finally, apply the string as the form's Filter.
        Me.Filter = strWhere
        Me.FilterOn = True
    End If
End Sub

Private Sub cmdReset_Click()
    'Purpose:   Clear all the search boxes in the Form Header, and show all records again.
    Dim ctl As Control

    'Clear all the controls in the Form Header section.
    For Each ctl In Me.Section(acHeader).Controls
        Select Case ctl.ControlType
        Case acTextBox, acComboBox
            ctl.Value = ""
        Case acCheckBox
            ctl.Value = False
        End Select
    Next

    'Remove the form's filter.
    Me.FilterOn = False

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:19:06.723

看到这个`ctl.Value = ""`吗`cmdReset_Click()`？我猜想，当您清除控件时，其中一个以零长度字符串结尾，但是您在构建过滤器时的测试是针对空字符串，而不是零长度字符串，所以很可能是其中一个数字是结束了`somefield=<blank>`。尝试：

```
 ctl.Value = Null 
```

顺便说一句，将equals与通配符一起使用是没有意义的：

```
strWhere = strWhere & "([Postcode] = ""*" & Me.TxtPostcode & "*"") AND " 
```

应该：

```
strWhere = strWhere & "([Postcode] Like ""*" & Me.TxtPostcode & "*"") AND " 
```

或者

```
strWhere = strWhere & "([Postcode] = """ & Me.TxtPostcode & """) AND " 
```

# sql - 如何在没有内部子查询的情况下创建总和列？

> ID：11954937
> 
> 赞同：1
> 
> 时间：2012-08-14T14:47:53.227
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server 2008 R2

我有一个复杂的查询，我需要一个有条件的求和列。

这是我的查询和结果的简化版本：

```
DECLARE @t TABLE (id int, condition int, value int); 

INSERT INTO @t 
VALUES (1,1,12), (2,0,88), (3,1,11)

SELECT 
     *, 
    (SELECT SUM(value) FROM @t WHERE condition = 1) as SumOfConditionalValues 
FROM @t 
```

这是此查询的结果"

```
id  condition   value   SumOfConditionalValues
1   1           12      23
2   0           88      23
3   1           11      23 
```

我买不起`SumOfConditionalValues`子查询。

没有它有没有一种优雅的方法来实现条件求和列？

哪些聚合命令适用于此处（如果有），我该如何应用这些命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:55:36.440

尝试这个：

```
SELECT *, SUM(CASE WHEN condition = 1 THEN value END) OVER() SumOfConditionalValues
FROM @t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:07:35.640

见这里：[http ://sqlfiddle.com/#!3/1abea/1](http://sqlfiddle.com/#!3/1abea/1)

使用自联接：

```
CREATE TABLE MyTable (id int, condition int, value int); 

INSERT INTO MyTable 
VALUES (1,1,12), (2,0,88), (3,1,11)

SELECT
  MyTable.id,
  MyTable.Condition,
  MyTable.value,
  SUM(JoinedMyTable.Value)
FROM
  MyTable
  LEFT JOIN MyTable JoinedMyTable ON MyTable.condition = JoinedMyTable.Condition
GROUP BY
  MyTable.id,
  MyTable.Condition,
  MyTable.value 
```

编辑：不知道您是否希望每一行都显示条件 = 1 的行的总和，但如果您确实将连接子句更改为：

```
LEFT JOIN MyTable JoinedMyTable ON JoinedMyTable.Condition = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:07:03.950

您可以带来按条件聚合的结果：

```
DECLARE @t TABLE (id int, condition int, value int); 
INSERT INTO @t VALUES (1,1,12), (2,0,88), (3,1,11)
SELECT *, 
sum(value) over (partition by condition) as SumOfConditionalValues 
FROM @t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T15:01:19.677

```
Declare @sum int
SELECT @sum=SUM(value) FROM @t WHERE condition = 1
select *,@sum from yourtable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T15:10:38.390

我认为这就是你想要的：

```
SELECT id, condition, value,   
      SUM(CASE WHEN condition = 1 THEN value_at_1 END) OVER() SumOfConditionalValues
FROM (select *,
             (case when condition = 1 then value end) as value_at_1
      from @t
     ) t 
```

您需要一个“条件值”，您可以在子查询中创建它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T14:51:51.717

我相信您正在寻找的是“CASE”声明......非常强大，例如：

```
 select id, sum(case when condition=1 then value else 0 end) group by id..etc 
```

# graphics - 在终端上将图形呈现为 ASCII 艺术的库？

> ID：11954944
> 
> 赞同：3
> 
> 时间：2012-08-14T14:48:08.830
> 
> 标签：graphics, terminal, render, ascii-art

标题不言自明。我们使用 OpenGL 来渲染逼真的图像，但是如果我们无法连接到图形用户界面怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:57:53.353

看看[LibAA](http://aa-project.sourceforge.net/aalib/)它应该做你想做的事。希望 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-26T05:42:19.700

使用 CLI 和 API 用 Ja​​vaScript (Node.js) 编写：[https ://github.com/IonicaBizau/image-to-ascii](https://github.com/IonicaBizau/image-to-ascii)

# java - 自定义组件

> ID：11954945
> 
> 赞同：0
> 
> 时间：2012-08-14T14:48:12.490
> 
> 标签：java, jsf, xhtml

我有一个包含一些定制组件的 taglib 包。

有一个组件使用 icefaces “Panel Popup”，我创建它是为了进行多值查找并在多个项目中使用。

我一直在尝试将`<ui:include>`其附加到其他弹出 bean 并在需要时呈现。

但它只是行不通。我什至用

`<namespace:Component> <namespace:Component>`，页面运行正常，但当我单击按钮使其可见时不会呈现组件。

该组件在我使用时可以正常工作 `<ui:include src="url link"/>`，但我不希望该组件存在于每个项目中，我想使用一个包来共享它。

我可以知道是否有其他解决方案？

在此先感谢穴居人程序员！

# html - 如何在 Delphi 中将简单的 RichText 转换为 HTML 标签？

> ID：11954946
> 
> 赞同：8
> 
> 时间：2012-08-14T14:48:14.253
> 
> 标签：html, delphi, rtf, delphi-2006, richedit

你可能会说在 stackOverflow 中有很多关于这个的讨论，但大多数都比我需要的更复杂，而且主要是针对其他语言的。

我有一个 MySQL 远程数据库，其中有一个“帮助”表，其中包含用于填充使用该数据库的动态网站的帮助页面的代码。

我决定制作一个 Delphi 应用程序来管理该网站，而不是由网站本身来管理，以提高速度和安全性。

我想添加一个`TRichEdit`帮助文本并使用简单的东西，如对齐、粗体、斜体和下划线样式。我不想使用图片和字体。

**如何选择富样式文本并将其转换为 HTML**以放入远程数据库中的 BLOB 字段，**然后如果我想再次编辑它又重新转换为富文本**？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:15:18.197

如果您真的想使用 生成 RTF 内容`TRichEdit`，那么您应该将它生成的本机 RTF 与转换后的 HTML 一起存储。如果您使用的唯一原因`TRichEdit`是您可以拥有简单的格式化功能，那么您最好使用生成本机 HTML 内容的 HTML 编辑控件。

不管你走哪条路，最好存储原生格式供用户编辑内容，并根据需要将其转换为其他格式（而不是双向转换）。

如果您使用`TRichEdit`，那么您可以轻松地将 RTF 内容流式传输进出控件，尽管我建议您使用`TJvRichEdit`以下方法`TRichEdit`：

```
procedure GetRTFData(MS: TMemoryStream; RTF: TRichEdit);
begin
  MS.Clear;
  RTF.Lines.SaveToStream(MS);
  MS.Position := 0;
end;

procedure SetRTFData(MS: TMemoryStream; RTF: TRichEdit);
begin
  MS.Position := 0;
  RTF.StreamFormat := sfRichText;
  RTF.Lines.LoadFromStream(MS);
end; 
```

手动将 RTF 转换为 HTML 并非易事。有 unicode 字符注意事项、字体样式、字体代码、段落格式、编号列表、特殊 HTML 字符等等。即使您只需要支持简单的格式设置，用户也经常使用其他导致转换问题的功能——例如从 MSWord 复制内容并将其粘贴到您的应用中，并使用各种格式和字体样式。

`JvRichEditToHtml`在将 RTF 转换为 HTML 方面做得不错，但我们最终编写了自己的转换单元，因为我们用 RTF 做的比简单的格式化要多得多。 `JvRichEditToHtml`只要用户不通过复制/粘贴来引入复杂的内容，或者使用键盘快捷键格式化内容（例如，项目符号 = ctrl+shft+L、缩进 = ctrl+M、 ETC。）。

如果您想绕过在 RTF 中编写和转换为 HTML 的复杂性，还有几个很好的 Delphi HTML 编辑控件：

[Google 结果 :: Delphi、HTML、编辑器、组件](http://www.google.com/search?q=delphi%20html%20editor%20component)

*   [CBuilder/Delphi 的 HTML 编辑器](https://stackoverflow.com/questions/402455/html-editor-for-cbuilder-delphi)
*   [Delphi 的所见即所得 HTML 编辑器组件](https://stackoverflow.com/questions/2146116/wysiwyg-html-editor-component-for-delphi)
*   [寻求一个 HTML 编辑器 VCL 控件](http://delphimisver.wordpress.com/2009/03/07/the-quest-for-an-html-editor-vcl-control/)

[Stack Overflow :: Delphi、HTML、编辑器、组件](https://stackoverflow.com/search?q=delphi%20html%20editor%20component)

*   [带有 HTML/CSS 界面的 Delphi](https://stackoverflow.com/questions/3175937/delphi-with-html-css-interface)
*   （还有许多其他人！）

我们使用`TRichView`它是因为它具有广泛的功能。它可以加载/创建 RTF，并导出 HTML。然而它不是免费的。如果您正在寻找免费的东西，`TJvRichView`并且`JvRichEditToHtml`是不错的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-16T22:57:07.380

在尝试了许多没有给出准确结果的不同解决方案之后，我受到了这个解决方案的启发：[Convert RTF to HTML and HTML to RTF](https://www.experts-exchange.com/articles/3096/Convert-RTF-to-HTML-and-HTML-to-RTF.html)。

这个想法是`TWebBrowser`控件（在设计/编辑模式下）可以在从剪贴板粘贴时正确处理和转换富文本格式。

```
uses SHDocVw, MSHTML;

function ClipboardToHTML(AParent: TWinControl): WideString;
var
  wb: TWebBrowser;

  function WaitDocumentReady: Boolean;
  var
    StartTime: DWORD;
  begin
    StartTime := GetTickCount;
    while wb.ReadyState <> READYSTATE_COMPLETE do
    begin
      Application.HandleMessage;
      if GetTickCount >= StartTime + 2000 then // time-out of max 2 sec
      begin
        Result := False; // time-out
        Exit;
      end;
    end;
    Result := True;
  end;
begin
  Result := '';
  wb := TWebBrowser.Create(nil);
  try
    wb.Silent := True;
    wb.Width := 0;
    wb.Height := 0;
    wb.Visible := False;
    TWinControl(wb).Parent := AParent;
    wb.HandleNeeded;
    if wb.HandleAllocated then
    begin
      wb.Navigate('about:blank');
      (wb.Document as IHTMLDocument2).designMode := 'on';
      if WaitDocumentReady then
      begin
        (wb.Document as IHTMLDocument2).execCommand('Paste', False, 0);
        Result := (wb.Document as IHTMLDocument2).body.innerHTML;
      end;
    end;
  finally
    wb.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  RichEdit1.SelectAll;
  RichEdit1.CopyToClipboard;

  ShowMessage(ClipboardToHTML(Self));
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-18T22:51:23.693

这对我来说真的很好。没有 TWebBrowser。

但从html到richedit。

希望有人觉得它有用。

```
 ////////////////////////////////////////////////////////
    //                                                    //
    //          Formatting Richedit with HTML tags        //
    //                    by Carbonize                    //
    //                                                    //
    //    This is my second Delphi project and another    //
    //    conversion of one of my Visual Basic codes.     //
    //                                                    //
    //    This code goes through a string looking for     //
    //    <xxx> style tags then formats the richedit      //
    //    according to the text in the tag. It does       //
    //    colours, italics, bold, underline, line breaks, //
    //    font face, and font size.                       //
    //                                                    //
    //    I made the original VB version as a way of      //
    //    formatting the help files in one of my programs //
    //    to make them look better and be easier to read. //
    //                                                    //
    //    Please remember I am new to Delphi so some      //
    //    of the code may be sloppy. When handling        //
    //    <Font tags I did it the long way so it could    //
    //    handle tags with spaces between the 'face' or   //
    //    'size' and the actual face/size such as         //
    //    <font name = "Comic Sans MS"> as some people    //
    //    do their HTML this way.                         //
    //                                                    //
    ////////////////////////////////////////////////////////
    //                                                    //
    //             Monday, 27th January 2003              //
    //                                                    //
    ////////////////////////////////////////////////////////

    unit Unit1;

    interface

    uses
    Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
    Dialogs, ComCtrls, StdCtrls;

    type
    TForm1 = class(TForm)
    txtHTML: TMemo;
    Button1: TButton;
    rchHTML: TRichEdit;
    procedure Button1Click(Sender: TObject);
    procedure DisplayText(Tag: string; Buf:string);
    procedure FontTags(Tag: string; Buf:string);
    private
    { Private declarations }
    public
    { Public declarations }
    end;

    var
    Form1: TForm1;

    implementation

    {$R *.dfm}

    procedure TForm1.Button1Click(Sender: TObject);
    var
            Buf : string;
            Bumf : string;
            tag : string;
    begin
    //Clear the Richedit and set default formatting
    rchHTML.text := '';
    rchHTML.SelAttributes.style := [];
    rchHTML.selattributes.color := clBlack;
    rchHTML.SelAttributes.Name := 'MS Sans Serif';
    rchHTML.SelAttributes.Size := 8;

    //strip all new line commands as it screws the code up.
    Bumf := stringreplace(txtHTML.Text, #13#10, '', [rfReplaceAll]);

    //if there's no '<' then there's no tags so display whole string.
    if pos('<', Bumf) = 0 then
    begin   //but first convert any <> replacement strings.
            Bumf := stringreplace(Bumf, '&lt;', '<', [rfReplaceAll]);
            Bumf := stringreplace(Bumf, '&gt;', '>', [rfReplaceAll]);
            Bumf := stringreplace(Bumf, '&amp;', '&', [rfReplaceAll]);
            rchHTML.SelText := Bumf;
            exit;
    end;

    //else thats display all text before the '<'.
    //But first convert any replacements that are in there.
    Buf := copy(Bumf, 0, pos('<', Bumf) - 1);
    Buf := stringreplace(Buf, '&lt;', '<', [rfReplaceAll]);
    Buf := stringreplace(Buf, '&gt;', '>', [rfReplaceAll]);
    Buf := stringreplace(Buf, '&amp;', '&', [rfReplaceAll]);
    rchHTML.SelText := Buf;

    //then strip all text before the '<'
    delete(Bumf, 1 ,pos('<', Bumf) - 1);

    //If there's no '>' then it's not a tag so just post it all
    If pos('>', Bumf) = 0 then
    begin
            rchHTML.SelText := Bumf;
            exit;
    end;

    //else we need to parse any and all tags and the strings to post
    While length(Bumf) > 0 do
    begin
    //the tag := all text between '<' and '>'
    Tag := copy(Bumf, 2, pos('>', Bumf) - 2);
    //the text we will post is everything after the '>'
    Buf := copy(Bumf, pos('>', Bumf) + 1, length(Bumf) - pos('>', Bumf));
    //Empty Bumf
    Bumf := '';
    //Are there any '<'s in the tag?
    while pos('<', tag) > 0 do
    begin  //if so then post all text before the'<' as it's not part of a tag
            rchhtml.SelText := '<' + copy(Tag, 1, pos('<', Tag) - 1);
            //tag then := all text from the '<'
            Tag := copy(Tag, pos('<', Tag) + 1, length(Tag) - pos('<', Tag));
    End;
    //if there's a '<' in Buf then there may be another Tag
    If pos('<', Buf) > 0 then
    begin   //So we make Bumf := everything after the '<'
            Bumf := copy(Buf, pos('<', Buf), (length(Buf) - pos('<', Buf)) + 1);
            //And buf := everything before it
            Buf := copy(Buf, 1, pos('<', Buf) - 1);
    end;
    //now we pass the tag and the buf text to our text formatting procedure
    DisplayText(Tag, Buf);
    end;

    end;

    procedure TForm1.DisplayText(Tag: string; Buf:string);
    begin
    //There is a problem where if buf = '' the richedit attributes didn't get set
    //so I included this shoddy fix.
    //If you know why this bug happens please let me know.
    If Buf = '' then Buf := #12;

    //in case we want to actually show a tag or the markers used for < and >
    Buf := stringreplace(Buf, '&lt;', '<', [rfReplaceAll]);
    Buf := stringreplace(Buf, '&gt;', '>', [rfReplaceAll]);
    Buf := stringreplace(Buf, '&amp;', '&', [rfReplaceAll]);
    Tag := stringreplace(Tag, '&lt;', '<', [rfReplaceAll]);
    Tag := stringreplace(Tag, '&gt;', '>', [rfReplaceAll]);
    Tag := stringreplace(Tag, '&amp;', '&', [rfReplaceAll]);

    //if it's a font tag then send it to font handling
    If copy(lowercase(Tag), 0, 5) = 'font ' then
    begin
    FontTags(Tag, Buf);
    exit;
    end;

    //go through all known tags, formatting richedit as appropriate
    if lowercase(Tag) = 'red' then
            rchHTML.SelAttributes.Color := clRed
    else if lowercase(Tag) = 'black' then
            rchHTML.SelAttributes.Color := clBlack
    else if lowercase(Tag) = 'blue' then
            rchHTML.SelAttributes.Color := clBlue
    else if lowercase(Tag) = 'cyan' then
            rchHTML.SelAttributes.Color := clAqua
    else if ((lowercase(Tag) = 'gray') or (lowercase(Tag) = 'grey')) then
            rchHTML.SelAttributes.Color := clGray
    else if lowercase(Tag) = 'green' then
            rchHTML.SelAttributes.Color := clGreen
    else if lowercase(Tag) = 'pink' then
            rchHTML.SelAttributes.Color := clFuchsia
    else if lowercase(Tag) = 'purple' then
            rchHTML.SelAttributes.Color := clPurple
    else if lowercase(Tag) = 'yellow' then
            rchHTML.SelAttributes.Color := clYellow
    else if lowercase(Tag) = 'b' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style + [fsBold]
    else if lowercase(Tag) = '/b' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style - [fsBold]
    else if lowercase(Tag) = 'i' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style + [fsItalic]
    else if lowercase(Tag) = '/i' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style - [fsItalic]
    else if lowercase(Tag) = 'u' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style + [fsUnderline]
    else if lowercase(Tag) = '/u' then
            rchHTML.SelAttributes.Style := rchHTML.SelAttributes.Style - [fsUnderline]
    else if lowercase(Tag) = 'br' then
            Buf := #13#10 + Buf        
    //If it's an unknown tag then display the tag
    else Buf := '<' + Tag + '>' + Buf;

    //Now we've set the attributes we can display the text.
    rchHTML.SelText := Buf;
    end;

    procedure TForm1.FontTags(Tag: string; Buf:string);
    var
            a: integer;
            tag2: String;
    begin
    //we know it's a font tag so strip the 'font '
    Delete(Tag, 1, 5);

    //lets see if the want to set the font face
    If pos('face', lowercase(Tag)) > 0 then
    begin   //get the position of 'face'
            a := pos('face', lowercase(Tag));
            //set our temporary string to := all text from 'face' to the end.
            tag2 := copy(Tag, a, length(Tag) - (a - 1));
            //Then get position of the opening".
            a := pos('"', Tag2) + 1;
            //set our temporary string to := all text from " + 1 to the end.
            Tag2 := copy(Tag2, a, length(Tag2) - (a - 1));
            //Then locate the closing "
            a := pos('"', Tag2) - 1;
            //then make tag2 = the text between " and "
            Tag2 := copy(Tag2, 1, a);
            //Now set the font name to the chosen one.
            rchHTML.SelAttributes.Name := Tag2;
    end;

    //Now check if they want to set the fonts size.
    If pos('size', lowercase(Tag)) > 0 then
    begin   //get the position of 'size'
            a := pos('size', lowercase(Tag));
            //Make temporary string := all text from 'size' to end of the tag
            tag2 := copy(Tag, a, length(Tag) - (a - 1));
            //get position of opening "
            a := pos('"', Tag2) + 1;
            //make tag2 := all text from " + 1 to the end.
            Tag2 := copy(Tag2, a, length(Tag2) - (a - 1));
            //get position of the closing "
            a := pos('"', Tag2) - 1;
            //make tag2 := text between " and "
            Tag2 := copy(Tag2, 1, a);
            //set the fonts size
            rchHTML.SelAttributes.Size := strtoint(Tag2);
    end;

    //Now we've formatted we can display the text.
    rchHTML.seltext := Buf;

    end;

    end. 
```

# objective-c - 如何进行接触传播？

> ID：11954947
> 
> 赞同：0
> 
> 时间：2012-08-14T14:48:22.493
> 
> 标签：objective-c, ios, gesture

例如

我有一个自定义的 UIView 类，在视图上我放了一个 UIButton。

在视图类中

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    NSLog(@"touch view");
} 
```

但是当我触摸按钮时，它截获了视图触摸消息。当用户触摸视图的子视图时，有没有办法接收触摸？

我注意到当使用 UIGestureRecognizer 绑定到超级视图时，当用户触摸子视图时可以收到事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:29:59.483

没有（Apple 允许或稳定的）方法可以将触摸“传递”到另一个视图。相反，从您的 touches 方法调用另一个视图中的方法。

# r - 按因子拆分和组合成新列

> ID：11954948
> 
> 赞同：0
> 
> 时间：2012-08-14T14:48:24.323
> 
> 标签：r

我有一个 sql 输出到一个 data.frame 中，如下所示：

```
 dateTime              resultMean           SensorDescription
1 2009-01-09 21:35:00   7.134589             Aanderaa Optode - Type 3835
2 2009-01-09 21:35:00   7.813000         Seabird SBE45 Thermosalinograph
3 2009-01-09 21:35:00   8.080399 Turner SCUFA II Chlorophyll Fluorometer
4 2009-01-09 21:35:00   7.818604                          ADAM PT100 PRT
5 2009-01-09 21:36:00   7.818604                          ADAM PT100 PRT 
```

我想把它变成这样的框架：

```
 dateTime              Aanderaa Optode - Type 3835  Seabird SBE45 Thermosalinograph   Turner SCUFA II Chlorophyll Fluorometer   ADAM PT100 PRT               
1 2009-01-09 21:35:00   7.134589                     7.813000                          8.080399                                  7.818604 
```

目前我有一个由 SensorDescription 拆分的函数，然后通过合并循环遍历列表。有没有更好的方法使用内置函数来做到这一点？我已经查看了 plyr、ddply 等，但没有任何接缝可以满足我的需求。

当前的合并循环函数如下所示：

```
 listmerge = function(datalist){
    mdat = datalist[[1]][1:2]
    for(i in 2:length(datalist)){
        mdat = join(mdat,datalist[[i]][1:2], by="dateTime", match = "all")
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T14:53:52.943

您可以`dcast`从`reshape2`包中使用：

```
d <- data.frame(x=1, y=letters[1:10], z=runif(10))
dcast(x ~ y, data=d)
Using z as value column: use value.var to override.
  x         a         b         c         d         e         f         g         h        i        j
1 1 0.7582016 0.4000201 0.5712599 0.9851774 0.9971331 0.2955978 0.9895403 0.6114973 0.323996 0.785073 
```

`reshape`从基本统计包也可以做到这一点，但语法有点困难。

```
reshape(d, idvar='x', timevar='y', direction='wide')

  x       z.a       z.b       z.c       z.d       z.e       z.f       z.g       z.h      z.i      z.j
1 1 0.7582016 0.4000201 0.5712599 0.9851774 0.9971331 0.2955978 0.9895403 0.6114973 0.323996 0.785073 
```

# sql-server - SQL REPLACE 给出错误：“字符串或二进制数据将被截断。”

> ID：11954949
> 
> 赞同：2
> 
> 时间：2012-08-14T14:48:26.587
> 
> 标签：sql-server, replace, truncate

我正在尝试仅替换我们公司数据库中字符串的一部分。我要更新的列是`MERGECODES (varchar(20),null)`. 此列的典型值类似于`'M, GPE, T'`.

我想用 with 替换每个实例，`T`但`KD`出现以下错误。它将允许我更改具有相同或更少字符数的任何内容，例如，它将允许我替换`T`为`K`但不能替换为`KD`. 任何帮助将不胜感激。多谢你们！

代码：

```
UPDATE GoldMine.dbo.CONTACT1 
SET MERGECODES = REPLACE(MERGECODES, 'T', 'KD') 
```

错误：

> *消息 8152、级别 16、状态 14、第 1 行
> 字符串或二进制数据将被截断。该语句已终止。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T14:52:47.763

您需要增加数据类型大小。

目前你有`varchar(20)`.

如果数据长度为 20 个字符，并且您将 1 个字符替换为 2 个字符，那么这将是 21 个字符长，这将导致[truncation](http://en.wikipedia.org/wiki/Truncation)。

尝试将您的数据类型增加到`varchar(50)`例如，这应该可以解决您的问题。

# android - 应用程序升级需要“清除缓存/清除数据”才能工作

> ID：11954950
> 
> 赞同：1
> 
> 时间：2012-08-14T14:48:33.707
> 
> 标签：android

我对我的应用程序进行了重大重写以支持片段。我也借此机会重写了一堆代码，使其更稳定、更简洁、更易于维护等。

我们在 Play Store 上推送了新版本。不幸的是，一些用户抱怨他们必须清除缓存和应用程序数据才能使新版本正常工作。不幸的是，我没有更多信息（因为我无法联系这些用户）。清除缓存和数据似乎可以解决问题。我不知道问题是否是应用程序在启动时崩溃。或者如果应用程序启动，但随后陷入无限循环。

我们使用 Bugsense 进行自动错误报告。我看过他们，但我似乎无法找到问题的原因。

我很好奇存储的内容和位置。我的应用程序使用“context.getExternalCacheDir()”来存储从网络下载的图像。我将数据存储在首选项文件以及 SQL 数据库中。在发布应用程序之前，我们进行了内部 QA，以确保应用程序升级运行良好。我们的大多数用户都没有这个问题。

我可以做些什么来尝试查明此问题的原因？

# git - 将master合并到分支时，Git将整个文件标记为冲突

> ID：11954958
> 
> 赞同：2
> 
> 时间：2012-08-14T14:48:59.933
> 
> 标签：git, cross-platform, git-merge

> **可能重复：**
> [git 的最佳 CRLF 处理策略是什么？](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git)

我目前正在做一个项目，几乎每次我将 master 合并到我的分支时，我都会遇到合并冲突，git 说整个文件已经改变。通常，当我使用 Notepad++ 的比较工具比较这些文件时，它会报告实际上只有几行发生了变化，而且通常它甚至不应该导致冲突。

有一段时间我只是简单地忍受这种行为是在跨平台工作时必须遇到的问题（我们的团队使用 Windows 7、OSX 和 debian 的混合物进行开发），但是今天当我合并时有一些阻碍我前进的严重问题。我自己对此进行了调查，似乎它可能与 git core.autocrlf 配置有关，但我不确定如何解决这个问题，以便它立即消失，或者随着 git 修复损坏而慢慢消失我以前做过。任何人都可以就如何解决这个问题提出任何建议吗？

谢谢，
亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:00:12.523

我终于解决了这个问题——我必须启用 autocrlf。我已经阅读了很多针对此标志的建议，但它似乎在这种情况下有效。

`git config --global core.autocrlf true`

# c# - 我如何知道 XML 标签的索引

> ID：11954959
> 
> 赞同：1
> 
> 时间：2012-08-14T14:49:14.817
> 
> 标签：c#, linq

如何获取当前 XML 标记的索引？

例子：

```
<User>
  <Contact>
    <Name>Lucas</Name>
  </Contact>
  <Contact>
    <Name>Andre</Name>
  </Contact>
    ...
</User> 
```

我正在尝试下面的代码

```
 foreach (var element2 in doc2.Root.Descendants())
    {
        String name = element.Name.LocalName;
        String value = element.Value;
    } 
```

我想知道我是在读第一个`<Contact>`标签，还是第二个，还是第三个……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T15:00:26.353

使用[Select](http://msdn.microsoft.com/en-us/library/bb534869)的适当重载将在您枚举集合时产生索引。

```
var userContacts = doc2.Root
                       .Descendants()
                       .Where(element => element.Name == "Contact")
                       .Select((c, i) => new {Contact = c, Index = i});

foreach(var indexedContact in userContacts)
{
     // indexedContact.Contact
     // indexedContact.Index                 
} 
```

*注意：我添加了 .Where 因为 .Descendants 会递归。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:54:43.790

您可以使用`for`语句，然后您将始终知道索引。我正在做一个`Descendants()`可以在 for 语句中使用的假设。

另一种可能性是在`foreach`.

```
int count = 0
foreach (var element2 in doc2.Root.Descendants())
{
    String name = element.Name.LocalName;
    String value = element.Value;

    count++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:54:05.910

`foreach`用普通循环替换你的`for`循环：

```
for (int i = 0; i < doc2.Root.Descendants().Count(); i++)
{
    String name = doc2.Root.Descendants()[i].Name.LocalName;
    String value = doc2.Root.Descendants()[i].Value;
} 
```

然后用于`i`查看您是否正在阅读第一个、第二个、第三个等标签。

如果不使用外部计数器，就无法获取 foreach 枚举器的索引.. AFAIK。

这也带来了效率问题，因为每次循环迭代都必须处理 Descendants 方法两次，所以我建议在 for 循环之外保留一个表示 Descendants 的 List，然后像这样使用它：

```
var desecendants = doc2.Root.Descendants().ToList();
for (int i = 0; i < descendants.Count; i++)
{
    String name = descendants[i].Name.LocalName;
    String value = descendants[i].Value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:54:23.133

我认为你不能使用 foreach，尝试使用普通的 for 循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T14:57:25.270

使用变量作为计数器并将结果放入数组中。这里的问题是，您需要提前知道数组的大小。

```
int i = 0;
foreach (var element in doc2.Root.Descendants()) {
     name[i] = element.Name.LocalName;
     value[i] = element.Value;
     i++;
} 
```

使用 a`List<T>`你没有这个问题

```
var list = new List<KeyValuePair<string,string>>();
foreach (var element in doc2.Root.Descendants()) {
     list.Append(new KeyValuePair(element.Name.LocalName, element.Value));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T15:02:09.980

要在没有计数器的情况下获取当前节点的位置（如先前的解决方案指出的那样），您需要编写一个函数来构建当前 XmlElement 的 XPath。唯一的方法是使用父节点和以前的兄弟节点从您的节点遍历文档。这样，您将能够构建准确的 XPath 以从文档中访问您的节点。[这是从这里](https://stackoverflow.com/a/9221904/311115)获取的样本

```
 public static string GetXPath_UsingPreviousSiblings(this XmlElement element)
    {
        string path = "/" + element.Name;

        XmlElement parentElement = element.ParentNode as XmlElement;
        if (parentElement != null)
        {
            // Gets the position within the parent element, based on previous siblings of the same name.
            // However, this position is irrelevant if the element is unique under its parent:
            XPathNavigator navigator = parentElement.CreateNavigator();
            int count = Convert.ToInt32(navigator.Evaluate("count(" + element.Name + ")"));
            if (count > 1) // There's more than 1 element with the same name
            {
                int position = 1;
                XmlElement previousSibling = element.PreviousSibling as XmlElement;
                while (previousSibling != null)
                {
                    if (previousSibling.Name == element.Name)
                        position++;

                    previousSibling = previousSibling.PreviousSibling as XmlElement;
                }

                path = path + "[" + position + "]";
            }

            // Climbing up to the parent elements:
            path = parentElement.GetXPath_UsingPreviousSiblings() + path;
        }

        return path;
    } 
```

假设这确实是您真正需要的，根据文档大小，它可能是资源密集型的。如果您只需要索引，我建议您使用其他方法之一。

# php - 使用 codeigniter 表单验证一次验证整个复选框数组？

> ID：11954962
> 
> 赞同：0
> 
> 时间：2012-08-14T14:49:26.657
> 
> 标签：php, codeigniter, validation

我正在使用 CodeIgniter 的表单验证类来验证表单。在这个表格中，我有大约 200 个国家/地区的复选框。我想验证这一系列国家/地区都是有效的。我通过检查数组值是否对应于我的数据库中的实际国家 ID 来做到这一点。我遇到的问题是codeIgniter 的表单验证验证数组中的200 个国家中的每一个，这导致对数据库的200 个查询需要大约10 秒才能完成。有没有办法让 CodeIgniter 验证整个数组一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:04:48.573

您可以绕过 CodeIgniter 的表单验证，将数据库中的所有国家/地区加载到一个数组中，并将表单值加载到另一个数组中。然后可以使用[`array_diff`](http://php.net/manual/en/function.array-diff.php)查看表单值中是否有没有出现在数据库中的值：

```
$should_be_empty = array_diff($form_array, $database_array); 
```

`$should_be_empty``$form_array`如果数据库数组中没有任何值，则将为空。

# ios - 在 iOS 中使用 UISplitViewController

> ID：11954963
> 
> 赞同：0
> 
> 时间：2012-08-14T14:49:31.937
> 
> 标签：ios, uisplitviewcontroller

我想在登录屏幕上单击登录按钮时添加一个拆分视图控制器（当用户成功登录时）。我想展示另一个视图控制器，它是一个带有主控制器和细节控制器的拆分视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:29:08.153

SplitViewControllers 旨在用作根视图控制器。因此，您将需要创建您的登录 viewController 并将其附加到窗口。然后，当用户登录时，您必须删除登录 viewController，然后创建一个新的 SplitViewController 并将其附加到窗口。

如果您搜索，您应该找到有帮助的线程，例如

[如何在二级实现SplitViewController。？](https://stackoverflow.com/questions/7816670/how-to-implement-splitviewcontroller-on-second-level)

我知道也有线程显示如何为 tabBarControllers 执行此操作，并且过程是相同的。

# java - Libgdx SpriteBatch.draw() 指定 4 个顶点

> ID：11954964
> 
> 赞同：4
> 
> 时间：2012-08-14T14:49:34.383
> 
> 标签：java, opengl, sprite, draw, libgdx

我正在使用 libGdx 创建一个 2d 游戏，并尝试使用这种特殊方法来绘制一个简单的 2d 纹理，分别指定 4 个顶点；

```
draw(Texture texture, float[] spriteVertices, int offset, int length) 
```

描述说：使用给定的顶点绘制一个矩形。必须有 4 个顶点，每个顶点由 5 个元素按以下顺序组成：x、y、color、u、v。

其他绘图方法工作正常，但我无法让这个工作。我正在尝试的是这个；

```
batch.draw(boxTexture, new float[] {-5, -5, 0, Color.toFloatBits(255, 0, 0, 255), 0, 0, 
                5, -5, 0, Color.toFloatBits(255, 255, 255, 255), 1, 0, 
                5, 5, 0, Color.toFloatBits(255, 255, 255, 255), 1, 1, 
                -5, 5, 0, Color.toFloatBits(255, 255, 255, 255), 0, 1}, 3, 3); 
```

我对 OpenGL 的工作原理不是很熟悉，尤其是偏移量和长度应该是多少。有没有更知识渊博的人知道如何让这个工作？

更新：

它使用网格工作，但后来发现没有透明度，这很烦人。最后，我只是为 SpriteBatch 添加了一个自定义方法，只是因为它更容易让我理解。顶点是顺时针绘制的；

```
public void drawQuad (Texture texture, float x1, float y1, float x2, float y2, float x3, float y3, float x4, float y4, float col) {
        if (!drawing) throw new IllegalStateException("SpriteBatch.begin must be called before draw.");

        if (texture != lastTexture) {
            switchTexture(texture);
        } else if (idx == vertices.length) //
            renderMesh();

        final float u = 0;
        final float v = 1;
        final float u2 = 1;
        final float v2 = 0;

        vertices[idx++] = x1;
        vertices[idx++] = y1;
        vertices[idx++] = col;
        vertices[idx++] = u;
        vertices[idx++] = v;

        vertices[idx++] = x2;
        vertices[idx++] = y2;
        vertices[idx++] = col;
        vertices[idx++] = u;
        vertices[idx++] = v2;

        vertices[idx++] = x3;
        vertices[idx++] = y3;
        vertices[idx++] = col;
        vertices[idx++] = u2;
        vertices[idx++] = v2;

        vertices[idx++] = x4;
        vertices[idx++] = y4;
        vertices[idx++] = col;
        vertices[idx++] = u2;
        vertices[idx++] = v;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T04:49:01.477

Offset is where in the array to start (for you 0), and length is how many indices the array needs to go through. For your case: 4 points, with 5 pieces of data for each point: 4*5 = 20.

Draw was never starting the render process because the value 3 floats isn't enough to make a triangle (15 is the minimum).

As for P.T.'s answer, this particular function does a fan render, so the correct ordering is either clockwise or counter-clockwise.

Also: The order you put those points and textures in will render the texture upside-down (I don't know if that was intended.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T18:55:23.690

偏移量和长度用于获取`spriteVertices`数组的一部分。`0`在您的情况下，它们应该是*数组*`.length`（将顶点放在局部变量中以计算长度）。

另外，我不确定它是否需要，但我强烈怀疑顶点应该以三角形友好的方式传递。您当前正在执行逆时针枚举。通常对于四边形，您应该使用这样的 Z 模式：

```
3-4
 \
1-2 
```

（这是因为 OpenGL 采用列表中的每组 3 个顶点并渲染生成的三角形，因此顶点 1、2、3 和 2、3、4 都应该是有用的三角形。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-12-30T20:12:51.247

```
3-4

 \

1-2* 
```

错了，应该是这样的：

```
4-3

1-2 
```

# javascript - 将参数传递给对象或继承对象的功能？

> ID：11954965
> 
> 赞同：0
> 
> 时间：2012-08-14T14:49:38.407
> 
> 标签：javascript, function, object, inheritance, prototype

第二个`console.log()`执行者`WSFunctions[this.name]();`将打印`undentified`。我想知道我是否能够以某种方式发挥`inherit` `DoThisAndThat`我的`Call()`作用。我不想以这种方式传递参数，`WSFunctions[this.name](this.params)`因为随着项目的发展，可能会有更多的事情`this.params`通过。

```
function WS(name, params) {
    this.name = name;
    this.params = params;
}

WS.prototype.Call = function() {
    if (typeof WSFunctions[this.name] !== "function") {
        return false;
    }

    console.log(this.params);
    WSFunctions[this.name]();

    return true;
}

var WSFunctions = {
    'ScreenRightGuest': function() {
        // .. whatever ..
        return true;        
    },
    'DoThisAndThat': function() {
        console.log(this.params);
        return true;
    }
}

new WS('DoThisAndThat', { login: '123', pass: 'abc' }).Call(); 
```

在此先感谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:52:38.700

您可以使用[*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)或[*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)`this`显式设置函数中应引用的内容[`.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call) [`.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

```
WSFunctions[this.name].call(this); 
```

这将调用`WSFunctions[this.name]`设置`this`为`this`调用者中引用的内容（在这种情况下是由创建的实例`new WS(...)`）。

另请查看[此页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)，该页面彻底解释了其`this`工作原理。

# android - 如何将视图高度指定为屏幕高度的 1/3

> ID：11954978
> 
> 赞同：0
> 
> 时间：2012-08-14T14:50:19.780
> 
> 标签：android

我创建了一个视图（实际上是一个 webview）：

```
<WebView
  android:id="@+id/myWebView"
  android:layout_width="match_parent"
  android:layout_height="@dimen/input_height"
/> 
```

它指的是另一个 xml 文件中的高度：

```
<resources>
    <dimen name="key_height">50dip</dimen>
    <dimen name="candidate_font_height">16sp</dimen>
    <dimen name="candidate_vertical_padding">6sp</dimen>
    <dimen name="input_height">280dip</dimen>
</resources> 
```

我将我理解`input_height`为`280dip`大约 320 像素（或模拟 320ish 像素）高度的 280 像素（独立于设备）的设置。

在我的两台设备上（小型索尼爱立信 xperia x10 mini，320 像素屏幕和旧的 htc 渴望），它工作正常，提供的视图高度约为屏幕高度的 1.3。我的一位测试人员正在使用三星 Galaxy S，他们报告说视图占用的空间超过了整个屏幕。

我认为这个问题与屏幕密度有关，但我认为使用`dip`可以规避这个问题。

我应该如何定义我的布局视图以避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:23:46.757

在此之前，您需要按照此处显示的方法找出屏幕的宽度和高度：[获取屏幕尺寸（以像素为单位）](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

您需要使用 layoutparams 动态设置布局参数。看这里：http: [//developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

将布局参数设置为您想要的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:12:33.207

您可以检测屏幕的大小，然后进行一些数学运算以获得 1/3 的屏幕大小。要检测屏幕尺寸，请查看[此](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)。

# java - android - System.currentTimeMillis() 无法按预期工作

> ID：11954985
> 
> 赞同：6
> 
> 时间：2012-08-14T14:50:34.757
> 
> 标签：java, android

我使用 System.currentTimeMillis() 来保存用户开始活动的时间。

```
public class TimeStamp {
protected long _startTimeMillis = System.currentTimeMillis();

public String getStartTime() {
    return new Time(_startTimeMillis).toString();
} 
```

该类在活动开始时被实例化，并且 getStartTime() 返回正确的时间。我还尝试获取活动开始后经过的时间。

```
public String getElapsedTime() {
    return new Time(System.currentTimeMillis() - _startTimeMillis).toString();
} 
```

使用模拟的 android 设备（android 4.0.3）可以很好地工作。但是，当我在我的真实 android 设备 (android 4.0.3) 上部署应用程序时，getElapsedTime() 会额外增加一小时，然后正常计数。所以在我的真实设备上 getElapsedTime() 将在活动开始后返回“01:00:01”，但它应该返回“00:00:01”。

你知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T14:52:57.483

你应该使用`SystemClock.uptimeMillis()`.

uptimeMillis() 自系统启动后以毫秒为单位计算，并保证是单调的，而 System.currentTimeMillis() 不是因为用户或应用程序可以随时更改它。此外，通常启用自动时间同步，可以随时更改时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:00:25.170

您不能使用时间来表示 2 个瞬间之间的差异。在您的代码中，getElapsedTime() 返回接近 0 的时间，该时间被解释为 1970 年 1 月 1 日。我认为您遇到问题的原因是因为您的设备上没有相同的时区，因此时间的起源不是午夜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:58:48.197

System.currentTimeMillis() 返回设备时钟时间和纪元日期之间经过的毫秒数。这就是为什么它会因设备而异。

[http://developer.android.com/reference/java/lang/System.html#currentTimeMillis](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis) ()

# c# - asp.net 中的 Javascript 验证错误

> ID：11954993
> 
> 赞同：1
> 
> 时间：2012-08-14T14:50:53.693
> 
> 标签：c#, javascript, asp.net, validation

当我单击“搜索”按钮时，我的“客户搜索”页面上出现 javascript 验证错误。

```
<asp:Button id="btnCustomerSearch" runat="server" onclientclick="return ValidateCustomer(1);" 
                                    Text="Continue" OnClick="btnCustomerSearch_Click" /> 
```

错误信息是：

```
Microsoft JScript runtime error: 'ValidateCustomer' is undefined 
```

但是，在我的 ValidationFunctions.js 中，ValidateCustomer 函数确实存在。
为什么 aspx 看不到该功能（以及如何解决该问题）？

**更新：**
上述问题是由于js文件包含未准确引用而引起的。[但是，如本文](https://stackoverflow.com/questions/11906422/displaying-alert-boxes-in-asp-net-from-code-behind-does-not-always-work)所述，我的代码后面有一个警报消息框，并且警报消息框也没有出现。所以这可能是与机器相关的问题。

我如何确定问题是否与机器有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:18:41.807

> 这是一个母版页应用程序。所以我可以`<script type="text/javascript" src="Scripts/ValidationFunctions.js"></script>` 在 .Master 文件上看到

如果您所在的页面位于与 MasterPage 所在位置不同的子目录中，那么这可能是个问题。

我更喜欢的一种选择是在 ScriptManager 中添加外部 javascript 文件，如果我使用的是：

```
<asp:ScriptManager ID="SM1" runat="server">
  <Scripts>
    <asp:ScriptReference Path="~/js/ValidationScript.js" />
  </Scripts>
</asp:ScriptManager> 
```

这保证了脚本引用总是被解析为正确的路径，因为 ScriptManager 是一个服务端控件并用于`ResolveClientUrl`解析路径`~/js/ValidationScript.js`。

如果这不是一个选项或不适用，我会从母版页引用外部 JS 文件，如下所示：

```
<head runat="server" id="page_header">
  <script type="text/javascript" src='<%=ResolveClientUrl("~/js/Validation.js")%>'  />
</head> 
```

这保证了`js`无论页面或控件位于何处，都始终正确解析目录。

# ios - 在 init 中创建 UITableView 失败

> ID：11954994
> 
> 赞同：0
> 
> 时间：2012-08-14T14:51:00.660
> 
> 标签：ios

我正在 Xcode 4.3.2 中尝试以下操作。我创建了一个单视图应用程序。我的`ViewController`工具`UITableViewDelegate`，`UITableViewDataSource`。

在`ViewController.m`：

```
UITableView *tv = [[UITableView alloc] initWithFrame:CGRectMake(0, 10, 120, 100)
                                               style:UITableViewStylePlain];
tv.delegate = self;
tv.dataSource = self;

[self.view addSubview:tv]; 
```

我实现了`numberOfSectionsInTableView`,`numberOfRowsInSection`和. 它工作正常，并在两行中​​显示“欢迎”。**但是，如果我将****创建放在 init 中，则它不起作用。**`cellForRowAtIndexPath``didSelectRowAtIndexPath`**`UITableView`**

```
- (id)init
{
    self = [super init];
    if (self) {
        UITableView *tv = [[UITableView alloc] initWithFrame:
            CGRectMake(0, 10, 120, 100) style:UITableViewStylePlain];
        tv.delegate = self;
        tv.dataSource = self;
        [self.view addSubview:tv];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:04:45.183

两件事情：

*   如果您从 xib 文件或情节提要加载，则使用的初始化程序是`initWithCoder:`.

*   视图控制器的视图在需要时才会加载，这意味着`viewDidLoad:`而不是任何 init... 方法。（虽然，`viewDidLoad:`是由对属性的引用触发的`view`。）

# php - 从复选框ajax php javascript中检索值

> ID：11954995
> 
> 赞同：-2
> 
> 时间：2012-08-14T14:51:02.107
> 
> 标签：php, javascript, jquery, post, checkbox

我在 html 中有这段代码：

```
<form id='status_service' method='post' accept-charset='UTF-8' name='status_form'>
<fieldset>
<label class="cb-enable"><span>On</span></label>
<label class="cb-disable selected "><span>Off</span></label>
<input type="checkbox" id="id_sf_checkbox" class="checkbox" value="1" name="checkbox" onChange="document.getElementById('status_service').submit(); window.location.reload(true)"/>

<label class="cb-enable"><span>On</span></label>
<label class="cb-disable selected "><span>Off</span></label>
<input type="checkbox" id="id_sf_checkbox" class="checkbox" value="2" name="checkbox" onChange="document.getElementById('status_service').submit(); window.location.reload(true)"/>

<label class="cb-enable "><span>On</span></label>
<label class="cb-disable selected "><span>Off</span></label>
<input type="checkbox" id="id_sf_checkbox" class="checkbox" value="3" name="checkbox" onChange="document.getElementById('status_service').submit(); window.location.reload(true)"/>

<label class="cb-enable "><span>On</span></label>
<label class="cb-disable selected "><span>Off</span></label>
<input type="checkbox" id="id_sf_checkbox" class="checkbox" value="4" name="checkbox" onChange="document.getElementById('status_service').submit(); window.location.reload(true)"/>
</fieldset>
</form> 
```

它创建一个 iphone 样式的按钮（开/关），使用 CSS 来激活/停用服务（该值对应于用户想要修改的 id_service）

我会使用这段代码来检索它，但是，有什么问题：

```
$(document).ready( function()
{
$(".cb-enable").click(function()
{
    var parent = $(this).parents('.switch');
    $('.cb-disable',parent).removeClass('selected');
    $(this).addClass('selected');
    $('.id_sf_checkbox',parent).attr('checked', true);

    alert("Checkbox enabled");
    alert($("input[name=checkbo]:checked").map(function () {return this.value;}).get().join(","));

    $('.ajaxgif').removeClass('hide');

    var checkbox = new Array();
    $("input:checked").each(function()
    {
        data['checkbox[]'].push($(this).val());
    });

    alert(checkbox);

    $.ajax({
        type: "POST",
        url: "../proceso_checkboxes.php",
        data: {checkbox:checkbox},

        success: function()
        {
            $('.ajaxgif').hide();
            $('.msg').text('Mensaje enviado!').addClass('msg_ok').animate({ 'right' : '130px' }, 300);
        },
        error: function()
        {
            $('.ajaxgif').hide();
            $('.msg').text('Hubo un error!').addClass('msg_error').animate({ 'right' : '130px' }, 300);
        }
    });

});

$(".cb-disable").click(function()
{
    var parent = $(this).parents('.switch');
    $('.cb-enable',parent).removeClass('selected');
    $(this).addClass('selected');
    $('.id_sf_checkbox',parent).attr('checked', false);
    alert("Checkbox disabled");
    showSelectedValues();
});

$("input[type=checkbox][id=id_sf_checkbox][checked]").each(function()
{
    var parent = $(this).parents(".switch");
    $(".cb-enable",parent).addClass("selected");
    $(".cb-disable",parent).removeClass("selected");
});
}); 
```

我的目标是将复选框的值发送到 php，但在 javascript 警报功能中显示空白，没有值，而且我不知道出了什么问题，我一直在寻找解决方案，并进行了测试，但仍然显示为空白。

有什么帮助吗？提前致谢。

附在有关复选框的 CSS 代码下方：

```
/* Checkboxes */
span.jqTransformCheckboxWrapper {display:block;float:left}
a.jqTransformCheckbox {background:transparent url(../images/checkbox.gif) no-repeat left -30px;vertical-align:middle;height:17px;width:17px;display:block;/*display:-moz-inline-block;*/}
/* Checked - Used for both Radio and Checkbox */
a.jqTransformChecked {background-position:left top}
/* Hidden - used to hide the original form elements */
.jqTransformHidden {display:none}

/* Formulario de login-home status service form */
#status_service .cb-enable, .cb-disable, .cb-enable span, .cb-disable span { background: url(../images/switch.gif) repeat-x; display: block; float: left; }
#status_service .cb-enable span, .cb-disable span { line-height: 30px; display: block; background-repeat: no-repeat; font-weight: bold; }
#status_service .cb-enable span { background-position: left -90px; padding: 0 10px; }
#status_service .cb-disable span { background-position: right -180px;padding: 0 10px; }
#status_service .cb-disable.selected { background-position: 0 -30px; }
#status_service .cb-disable.selected span { background-position: right -210px; color: #fff; }
#status_service .cb-enable.selected { background-position: 0 -60px; }

#status_service .cb-enable.selected span { background-position: left -150px; color: #fff; }
#status_service .switch label { cursor: pointer; }
#status_service .switch input { display: none; }

/* Mod para AJAX gif */
#status_service  .ultimo{ margin-bottom: 0; position: relative; }
/* AJAX Gif y mensajes de exito o fracaso */
#status_service .hide{display: none; }
#status_service .ajaxgif{position: absolute; right: 150px; top: 5px; }
#status_service .msg{color: white; font-weight: bold; height: 32px; line-height: 32px; padding: 0 10px; position: absolute; right: -155px; text-transform: uppercase; min-width: 121px; }
#status_service .msg_ok{background: #589D05; }
#status_service .msg_error{background: red; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:55:09.047

您的选择器中缺少一个`x`。

```
alert($("input[name=checkbox]:checked")
                 ----------^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:59:28.150

只需制作`checkbox`为数组，它将为您提供在数组中选中的所有复选框。

```
var checkbox = new Array();
$("input:checked").each(function()
{
    checkbox.push($(this).val());
});

alert(checkbox); 
```

# java - SelectOneMenu 似乎改变了支持 bean 列表中的值

> ID：11954999
> 
> 赞同：1
> 
> 时间：2012-08-14T14:51:29.133
> 
> 标签：java, jsf, selectonemenu

我使用 glassfish 3.1.2 在 Myfaces 2.0.2 上使用 Primefaces 3.2。我已经在 firefox 14.0.1 和 safari 5.1.7 中进行了测试，并且在两者中都收到了相同的行为。当我在下拉列表中选择一个不是列表中第一个的值并单击命令按钮时，所选项目似乎替换了列表中的第一个元素（请参见下面的示例输出）。

我不应该在我的 bean 中使用直接列表来支持 selectOneMenu 吗？还是我做错了什么？

我创建了一个简单的测试用例来重现以下问题：

```
package com.example;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

@ManagedBean(name = "testBean")
@ViewScoped
public class TestBean implements Serializable
{
    private List<ContainerObject> container;
    private ContainerObject selectedContainerObject;

    public TestBean()
    {
        container= new ArrayList<ContainerObject>();
    }

    @PostConstruct
    public void initialize()
    {
        container.add(new ContainerObject("String 1"));
        container.add(new ContainerObject("String 2"));
        container.add(new ContainerObject("String 3"));
        container.add(new ContainerObject("String 4"));
        container.add(new ContainerObject("String 5"));
        selectedContainerObject = container.get(0);
    }

    public List<ContainerObject> getContainer()
    {
        return container;
    }

    public ContainerObject getSelectedContainerObject()
    {
        return selectedContainerObject;
    }

    public void listContainer(ActionEvent event)
    {
        for(ContainerObject c : container)
            System.out.println(c.getValue());
    }

    public class ContainerObject
    {
        String value;

        public ContainerObject(String value)
        {
            this.value = value;
        }

        public String getValue()
        {
            return value;
        }

        public void setValue(String value)
        {
            this.value = value;
        }
    }   
} 
```

以下是我的xhtml。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<h:html
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

    <h:head>
    </h:head>
    <h:body>
        <h:form id="container" enctype="multipart/form-data">
            <p:selectOneMenu id="c" value="#{testBean.selectedContainerObject.value}">
                <f:selectItems value="#{testBean.container}" var="container" 
                    itemLabel="#{container.value}" itemValue="#{container.value}" />
            </p:selectOneMenu>
            <p:commandButton value="submit list" 
                actionListener="#{testBean.listContainer}"/>
        </h:form>
    </h:body>
</h:html> 
```

以下是选择“String 3”并按下提交按钮后打印到控制台的内容。

```
INFO: String 3
INFO: String 2
INFO: String 3
INFO: String 4
INFO: String 5 
```

但我希望看到

```
INFO: String 1
INFO: String 2
INFO: String 3
INFO: String 4
INFO: String 5 
```

当我使用 h:selectOneMenu 时，我也会得到与使用 p:selectOneMenu 时相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:36:45.010

```
selectedContainerObject = container.get(0); 
```

我认为这是您出错的地方，您实际上是将 selectOne 对象的 value 属性设置为列表本身的第一个元素，因此无论您选择什么，最终都会出现在列表的第一个元素中。