# StackOverflow 问答 11880000-11880999

# objective-c - prepareForSegue 函数没有被委托调用？

> ID：11880003
> 
> 赞同：0
> 
> 时间：2012-08-09T09:05:02.177
> 
> 标签：objective-c, ios5, delegates, storyboard, segue

我添加了一个`UITableViewController`静态单元格。我有一个条形按钮“保存”，但是当我单击该按钮时，`prepareForSegue`根本不会调用该方法。这是我的代码：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"AddCustomer"]) {
        UINavigationController *navigationController = segue.destinationViewController;
       AddCustomersViewController *addCustomersViewController = [[navigationController viewControllers] objectAtIndex:0];
        addCustomersViewController.delegate = self;
    }
} 
```

这是我的代表方法

```
 -(void) customerDidSave:(AddCustomersViewController *)controller newCostomer:(Customers *)customer
    {
        [self dismissViewControllerAnimated:YES completion:nil];
        [self.customers addObject:customer];
        [self.tableView reloadData];
    } 
```

我不知道是什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:52:29.730

是的，你的segue没有连接到IB中的视图控制器类，或者视图控制器的类名没有设置为你的视图控制器类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:55:36.350

用。。。来代替;

```
if ([segue.identifier isEqualToString:@"AddCustomer"]) {
[[segue destinationViewController] setDelegate:self];
    } 
```

这是不必要的，可能是导致问题的原因 -`[[navigationController viewControllers] objectAtIndex:0]`

# macos - Mac OS X 凭据提供程序等效

> ID：11880004
> 
> 赞同：6
> 
> 时间：2012-08-09T09:05:07.263
> 
> 标签：macos

Windows 下的 CredentialProvider API 是否有适用于 Mac OS X 的等效 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-15T16:53:59.590

虽然现在回答这个问题已经很晚了，但我希望它对那些试图找到相同问题答案的人有所帮助。在 MacOS 中，它被称为[Authorization Plugin](https://developer.apple.com/documentation/security/authorization_plug-ins/using_authorization_plug-ins)。在 MacOS 中，授权是基于授权数据库完成的，授权数据库具有您向授权策略数据库添加策略的策略，它可以引用任意数量的插件（授权插件）。每个插件包括一个或多个授权机制，其中机制是在授权过程中执行一个步骤的代码模块。所有这些策略都需要同意，然后用户才能登录。

# php - 在 HTML 页面中寻找“stock_value” - preg_match 的东西

> ID：11880008
> 
> 赞同：0
> 
> 时间：2012-08-09T09:05:18.297
> 
> 标签：php, preg-match-all

我有一个 HTML 页面的 URL，其中显示了一些产品（钢笔、T 恤等）和库存（仓库中的产品）。

我需要获取（窃取）与产品相对应的特定 SKU_CODE 的库存，因为我已经通过电子邮件与他们进行了交谈，并且他们没有包含库存的 .CSV / .TXT 或 Excel 文件。所以我需要从动态 URL 加载 HTML 并使用 preg_match_all 解析它以获取外部库存，然后将其显示在我的网站页面上，对应于特定产品。

这类似于从银行网站获取当前货币平价，当您需要将其放在您的网站上时，如果您手动编码。

所以这就是我的代码，它只工作了一半。我设法在页面上找到了 SKU_CODE，但是当我查找库存值时，如果我执行 print_r，它会显示 Array()，然后我无法保留该数组的任何值。我将在下面发布我的代码。

$code = 'AP731463-10'; $code_minimized = explode("-", $code);

```
$url_to_get = 'http://www.andapresent.hu/index.php?term_idk_list=4776829&term_idk_l=&filt=&qs='.$code_minimized[0].'';

function findinside($start, $end, $string) {
    preg_match_all('/' . preg_quote($start, '/') . '([^\.)]+)'. preg_quote($end, '/').'/i', $string, $m);
    return $m[1];
}

    $array_lines = file($url_to_get);
    //echo($array_lines[1654]);

    $cont = 0;
    $found_match = 0;

    while(isset($array_lines[$cont])){

        //daca inca nu s-a gasit codul cautat, cauta-l intre <b> </b>
        //if code we're looking for is not yet found, search between <b> </b>

        if($found_match==0){
            $out = findinside('<b>','</b>', $array_lines[$cont]);
        }

        //o data ce s-a gasit, flag set ca sa nu-l mai caute inca o data
        //once found, set flag $found_match so it will not look for it next time
        if($out[0]==$code && $found_match==0){
            $found_match = 1;
            echo "Found match : ".$code." = ".$out[0]."<br>";
        }

        //daca e flag-ul gasit e setat, cauta next info (stock-ul) pana il gaseste in $array_lines[$cont]
        //if flag is already set, look for next info (the stock value of the product)
        if($found_match==1){
            $out_2 = findinside('<td class="szoveg_k" align="center">','</td>', $array_lines[$cont]);
            echo $out_2;
        }

        $cont++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:41:15.610

您正在逐行阅读 HTML 页面并一次搜索一行。但是，如果您要查找`<td>`的开盘价和收盘`</td>`价出现在不同的行上怎么办？我认为这就是您的函数没有返回正确结果的原因。

但是，考虑到您的任务，我认为使用 XPpath 搜索股票价值会更合适。看看这个[教程](http://martinsikora.com/parsing-html-pages-using-xpath)，看看它是否有帮助！

# javascript - jQuery将div从位置1移动到2

> ID：11880012
> 
> 赞同：6
> 
> 时间：2012-08-09T09:05:40.357
> 
> 标签：javascript, jquery

我有多个 div（具有相同的类名）。我想将 div （总是相同的 div，具有唯一 ID `#pos1`）移动到已单击的 div 。因此，为此，我使用以下代码来查找 position1（我要移动的 div 的）和 pos2（被点击的 div）。

但是，我不知道如何将 div 从一个位置移动（动画等）到另一个位置。我会给予任何帮助。

```
jQuery(".container").click(function() {

    var pos1 = jQuery("#pos1").position();
    alert(pos1.top + ', ' + pos1.left);

    var pos2 = jQuery(this).position();
    alert(pos2.top + ', ' + pos2.left);

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:11:14.280

首先确保你所有的`.container`div 都是`position:absolute`

然后就可以使用`animate`jQuery的如下功能了：

```
$('.container').click(function(){
    var pos1 = $('#pos1').position();

    $(this).animate({ 'top': pos1.top + 'px', 'left': pos1.left + 'px'}, 200, function(){
        //end of animation.. if you want to add some code here
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:12:34.950

两个 div 都应该有`position :relative`或者可能是你可以给你的移动 div 一个`position: absolute`顶部和左侧以正常工作。

# iphone - 如何在 CorePlot 中启用缩放和平移

> ID：11880015
> 
> 赞同：0
> 
> 时间：2012-08-09T09:05:46.677
> 
> 标签：iphone, ios, core-plot

我们目前正在使用 Coreplot，但似乎 Coreplot 不支持缩放和平移。我们如何启用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:47:36.650

在绘图空间上设置`allowsUserInteraction`为`YES`打开交互功能。托管视图的`allowPinchScaling`属性控制图形是否响应捏合手势。它默认为`YES`.

# java - 关于访问受保护的方法

> ID：11880025
> 
> 赞同：0
> 
> 时间：2012-08-09T09:06:07.283
> 
> 标签：java, public, protected

有一个名为 demo 的项目，它由两个包组成，名为 aa 和 bb。

在包 aa 中，我有一个公共类 One，它有一个带有 protected 作为修饰符的方法。

现在在另一个包 bb 中，我有一个公共类 2，它想要访问包 aa 类 One 的受保护方法。

请告知如何完成..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:08:06.000

`protected`方法仅在同一个类、同一个包中的类和扩展它的类中可见

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:08:57.567

在继承之前，您不能从另一个包中的类访问受保护的成员/方法。

您有以下选择：

1.  `public Class Two extends One`
2.  在同一个包中添加第一类和第二类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:09:58.137

受保护的方法仅在派生类或同一包中的类中可见。
由于受保护的方法位于不同的类中，因此您有两种选择：

1.  将访问说明符更改为`public`
2.  从带有说明符的类派生 using 类`protected`：`class Two extends One`

还有第三种选择，即在类二中重现受保护的方法。这是*不*推荐的，而且并不总是可行的——例如，如果该方法处理的是类 One 私有的成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:13:27.600

Jigar 和 SL Barth 说的是对的，即它只能从派生类或同一个包中的类访问。

有关更多信息，Java 官方文档非常清楚地说明了方法的可访问性和可见性。

[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# android - 如何在我的活动中创建类似 facebook 的侧边菜单？

> ID：11880028
> 
> 赞同：-2
> 
> 时间：2012-08-09T09:06:13.597
> 
> 标签：android

> **可能重复：**
> [Android facebook 样式幻灯片](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)

我有一个图像按钮。在点击图像按钮时，我想创建像 Facebook 一样的侧边菜单。在 Facebook 中，当我们点击通知或消息时，会有一个侧边菜单。我想在我们的应用程序中制作类似的菜单。如果可用，请帮助我并将代码发送给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:11:46.427

Here is interesting article, which discuss *Slide Navigation* pattern [Emerging UI Pattern - Side Navigation](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html). It contain a lot of links to other discussions as well as links to existing libraries which help to implement *Side Navigation* pattern.

# java - 在报告的最后一页使用 Print When 表达式

> ID：11880029
> 
> 赞同：1
> 
> 时间：2012-08-09T09:06:21.513
> 
> 标签：java, printing, jasper-reports, expression

如何在 Jasper 报告中使用 Print When Expression 在最后一页打印带？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T08:43:30.543

如果你想在最后一页使用

```
$P{REPORT_PARAMETERS_MAP}.get("isLastPage") 
```

或者如果您想在除最后一页之外的每一页上使用

```
$P{REPORT_PARAMETERS_MAP}.get("isLastPage") == null 
```

# sip - pjsua 自定义 sdp

> ID：11880030
> 
> 赞同：1
> 
> 时间：2012-08-09T09:06:30.727
> 
> 标签：sip, pjsip, sdp

我正在使用 pjsua 创建简单的 SIP UA。我需要在传出的邀请请求中插入自定义正文 (SDP)。据我所知，pjsua 不支持自定义 SDP，需要使用更多的底层 API 来实现。但是现在我必须找到任何粗鲁的技巧/黑客/修补程序来在 pjsua 生成的邀请中插入自定义 SDP。

所以这就是问题：我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:52:18.757

看似简单的解决方法就是修改pjsua源码。`pjmedia_session`关键是在传入和传出呼叫的代码路径上创建自定义 SDP。你想调查`pjsua_call_make_call()`,`pjsua_call_answer()`和`pjsua_call_get_media_session()`. 如果我没记错的话，在接听电话之前不会处理 SDP。

您仍然需要学习核心 pjsip 库。毕竟，pjsua 使用它。这个解决方案并不简单，但符合黑客的一般定义。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T18:18:38.210

您有不同的方法来修改请求的 SDP 正文：

1.  您可以使用 pjsip_endpt_create_request 构建自定义请求，并直接使用 pjsip_tx_data 结构。在这种情况下，您可以通过将类型、子类型和您的自定义主体作为 pj_str_t 指针传递来使用 pjsip_msg_body_create (http://www.pjsip.org/pjsip/docs/html/group_PJSIP *_MSG__BODY.htm )。*该函数的响应应该存储在 pjsip_tx_data 的字段 msg.body 中。

2.  另一方面，如果您使用的是 pjsua_msg_data 结构，并且您不介意处理多个主体，则可以将来自 pjsip_msg_body_create 的响应存储到
    pjsip_multipart_part（特别是 body 字段）并将其添加到 pjsup_msg_data 内的 multipart_parts 字段目的。

3.  您可以使用 pjsua 的 on_create_media_transport 回调创建自己的媒体传输。这有点复杂，但到目前为止，更灵活。您将能够定义几个与传输相关的回调（send_rtp、send_rtcp 等），如果我没记错的话，其中一个是在 SDP 正文编码上调用的，允许您对其进行修改或设置自己的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-25T07:05:44.423

如果您使用 PJSUA2，您可以使用 onCallSdpCreated() 和 on_call_sdp_created() 来设置自定义 sdp。

# c# - Osherove 的负单元测试命名约定？

> ID：11880033
> 
> 赞同：4
> 
> 时间：2012-08-09T09:06:41.340
> 
> 标签：c#, unit-testing, refactoring, naming-conventions

我正在尝试确定单元测试的命名约定。我喜欢 Roy Osherove 推荐的那一款：

> [MethodName_StateUnderTest_ExpectedBehavior]

[http://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html](http://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html)

对于我们正在测试应用程序是否通过抛出异常正确处理错误行为的负面测试，我不确定这个标准。

因此，在这种情况下，ExpectedBehavior 将始终是“CorrectExceptionThrown”。为每个负面单元测试编写 ExpectedBehavior 是否仍然有意义，或者是否可以将其设为可选？

有优点也有缺点。一方面，负面测试总是相同的，因此每次都编写它是多余的，它使单元测试方法名称变长。如果我们将其设为可选，则在必要时不会为单元测试添加预期行为也是一种风险。我还认为最好在整个项目中保持一致，因此在任何地方都以相同的方式应用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:15:39.317

指定抛出什么异常作为操作结果没有什么多余的。这实际上完全符合 Roy 的命名约定，因为：

```
SomeMethod_ExpectionalState_ThrowsInvalidOperationException
SomeMethod_ExceptionalState_ThrowsArgumentNullException 
```

您将获得有关您的代码的重要信息 - 引发的异常类型。但是，当您进行经典快乐路径测试时，名称某些部分的有用性是主观的。考虑：

```
SomeMethod_DependencyReturnsCorrectResult_ReturnsResult
SomeMethod_WhenNothingSpecialHappens_ReturnsResult
SomeMethod_EverythingElseWorked_WorksToo 
```

这些名字包含什么信息？比较少。`ReturnsResult`本质上意味着它有效。`NothingSpecialHappens`也是比较模糊的信息。在这种情况下，删除部分名称可能是合理的。

但是请注意，可能值得考虑**更改名称**而不是完全删除其中的一部分（例如，`ReturnsResult`可以用不太模糊的`ReturnsEntityFromDatabase`或替换`ReturnsSerializedValue`）。

最后，不要盲目追随罗伊——把它当作**指导方针**，而不是惯例。约定很少适用于*所有可能的情况*，这次也不例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:46:55.510

你可以写：

```
[Test]
public void Foo_ExceptionalCaseX1_ExceptionY1Thrown()
{
}

[Test]
public void Foo_ExceptionalCaseX2_ExceptionY2Thrown()
{
}

... 
```

如果异常情况不同并且抛出的异常类型相同，则没有冗余（即使后缀相同）。
这与编写这两个测试没有什么不同：

```
[Test]
public void Foo_SomeCaseX1_42Returned()
{
}

[Test]
public void Foo_SomeCaseX2_42Returned()
{
}

... 
```

你能做什么 - 42 在两种情况下返回，这是现实 - 例外情况相同。

还有一件事：当人们阅读一系列测试时，它们可能看起来（几乎）相同，但是当其中一个有一天失败时，幸运的开发人员将能够立即知道预期的行为是什么。每个测试都应该代表自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:05:12.140

想象一下单个单元测试失败的情况。然后你会从 CI 收到这样的消息：

```
Failed unit tests:

MethodName_NegativeTestParams1_CorrectExceptionThrown 
```

并且没有其他上下文。你*看到*了问题（抛出了不正确的异常）。如果您将此设置为可选或尝试缩短您的方法名称，您最终可能会得到

```
Failed unit tests:

MethodName_NegativeTestParams1 
```

没有任何线索出了什么问题，直到您查看测试。

在这种情况下，为除了失败的单元测试列表之外没有上下文的情况进行规划，您应该使方法名称尽可能详细，`CorrectExceptionThrown`并根据需要重复多次。

此外，如果您对不同的测试有不同的例外，`CorrectExceptionThrown`则消息可能会变得不那么笼统：`ArgumentExceptionThrown`等等。

因此，我会在所有情况下都包含预期的行为，尽管有时它可能看起来是不必要的重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:12:40.030

我认为这是真的；但是，这只是决定单元测试命名约定的一种方式。如果您显然知道此测试中的异常抛出，我认为 .NET 框架单元测试将提供一种类似于 JUnit 的简单方法。

`@Test (IOException.class) public void testIOException() {...}`

# java - Generic Java serialization/deserialization using Kryo

> ID：11880035
> 
> 赞同：6
> 
> 时间：2012-08-09T09:06:45.110
> 
> 标签：java, serialization, deserialization, kryo

I am trying to serialize and deserialize objects of a custom class (say, `SomeClass`, having a default no-args constructor) to a `byte[]` array, using `Kryo 2.19` and the default serializer (`FieldSerializer`).

Serialization seems to work OK, but I get various exceptions in deserialization, depending on the actual implementation of `SomeClass`.

The code looks something like this:

```
SomeClass object = getObject(); // Create and populate a new object of SomeClass

Kryo kryo = new Kryo();
FieldSerializer<?> serializer = new FieldSerializer<SomeClass>(kryo, SomeClass.class);
kryo.register(SomeClass.class, serializer);

ByteArrayOutputStream stream = new ByteArrayOutputStream();
Output output = new Output(stream);

kryo.writeObject(output, object);

output.close(); // Also calls output.flush()

byte[] buffer = stream.toByteArray(); // Serialization done, get bytes

// Deserialize the serialized object.
object = kryo.readObject(new Input(new ByteArrayInputStream(buffer)), SomeClass.class); 
```

An example of the exceptions I am getting is:

```
Exception in thread "main" java.lang.IncompatibleClassChangeError: Found interface org.objectweb.asm.MethodVisitor, but class was expected
    at com.esotericsoftware.reflectasm.ConstructorAccess.insertConstructor(ConstructorAccess.java:89)
    at com.esotericsoftware.reflectasm.ConstructorAccess.get(ConstructorAccess.java:70)
    at com.esotericsoftware.kryo.Kryo.newInstantiator(Kryo.java:1009)
    at com.esotericsoftware.kryo.Kryo.newInstance(Kryo.java:1059)
    at com.esotericsoftware.kryo.serializers.FieldSerializer.create(FieldSerializer.java:228)
    at com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:217)
    at com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:629) 
```

It seems that parameterized types are problematic to deserialize. To test this assumption , here is a parameterized implementation of `SomeClass` and `getObject()`:

```
class SomeClass<T extends Serializable>
{
    private final T[] elements;

    private final int first;
    private final int second;

    private SomeClass()
    {
        this.elements = null;
        this.first  = 0;
        this.second = 0;
    }

    private SomeClass(T[] elements, int first, int second)
    {
        this.elements = elements;
        this.first = first;
        this.second = second;
    }
}

SomeClass<?> getObject()
{
    String[] elements = new String[] {"This is a test", "one"};

    return new SomeClass<String>(elements, 1, 2);
} 
```

This serializes fine, but deserialization throws the following exception (observe how the first letter of the string is not reported in the exception cause):

```
Exception in thread "main" com.esotericsoftware.kryo.KryoException: Unable to find class: his is a test
Serialization trace:
elements (net.cetas.parserserver.data.report.SourceDataReporter$SomeClass)
    at com.esotericsoftware.kryo.util.DefaultClassResolver.readName(DefaultClassResolver.java:132)
    at com.esotericsoftware.kryo.util.DefaultClassResolver.readClass(DefaultClassResolver.java:109)
    at com.esotericsoftware.kryo.Kryo.readClass(Kryo.java:613)
    at com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:724)
    at com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(DefaultArraySerializers.java:338)
    at com.esotericsoftware.kryo.serializers.DefaultArraySerializers$ObjectArraySerializer.read(DefaultArraySerializers.java:293)
    at com.esotericsoftware.kryo.Kryo.readObjectOrNull(Kryo.java:702)
    at com.esotericsoftware.kryo.serializers.FieldSerializer$ObjectField.read(FieldSerializer.java:521)
    at com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:221)
    at com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:629) 
```

If the above class is implemented without parameterization (i.e., the `elements` array declared as a `String[]`), deserialization works as expected.

Any ideas?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T10:38:01.237

```
Exception in thread "main" java.lang.IncompatibleClassChangeError: Found interface org.objectweb.asm.MethodVisitor, but class was expected 
```

请检查您在项目中使用的 ASM 版本。MethodVisitor 是 ASM 3.3 之前的一个接口。4.0版本以后这是一个类。

链接：

*   [http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/MethodVisitor.html](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/MethodVisitor.html)
*   [http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/MethodVisitor.html](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/MethodVisitor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T18:03:18.227

确保使用相同的类版本进行序列化和反序列化。如果您使用一个类版本进行序列化并使用不同的类版本（例如添加或删除字段后），则可能会发生此错误。并不是说它只能在那种情况下发生。

# java - 从jar（不是main）调用java类方法

> ID：11880037
> 
> 赞同：2
> 
> 时间：2012-08-09T09:06:59.273
> 
> 标签：java, jar

这是否可以从命令行调用 jar 文件中类的特定方法（除了 main 方法）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:11:02.120

如果您正在谈论从命令行运行 Java 代码，那么没有。

你可以指定一个类名，但不能指定调用哪个方法，它总是必须是`public static void main(String[] argv)`.

你可以做的是编写一个帮助类（或像 BeanShell 之类的脚本）来做到这一点。

```
java -cp theJar.jar;.  my.helper.WrapperClass theClassToCall theMethodtoCall arg1 arg2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:11:49.727

将其`Jar`放入您的课程路径，实例化有`class`问题的并调用`method`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T09:11:39.287

是的，您需要做的就是创建一个调用您想要的方法的类（带有一个 main）。它不必在罐子里。它可以是一个普通`.class`文件，只要它和 jar 在类路径中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T09:09:43.923

不可以。只能调用 class(==main method)。

# hibernate - HQL：玩弄变量

> ID：11880040
> 
> 赞同：0
> 
> 时间：2012-08-09T09:07:12.370
> 
> 标签：hibernate, hql

我有这些测试查询：

```
String query = "";    
Query criteria;
query = 
  "from Test t " +
  "where (:value is null OR t.id = :value)"; // update: (t.id = (:value))

criteria = session.createQuery(query);

if (.. some condition ..) {
  criteria.setParameter("value", 0);
}
else {
  criteria.setParameter("value", null);
} 
```

如何仅使用参数将 where 条件从更改`id = 0`为`(id = 0 or id = 1)`（resp。 ）？`id < 2``value`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:17:00.973

您可以使用“where in”运算符。然后“值”将成为集合参数。

```
Query criteria;
query = 
  "from Test t " +
  "where (t.id in (:value))";

criteria = session.createQuery(query);
criteria.setParameterList("value", Arrays.asList(0, 1)); 
```

# eclipse - Eclipse dark skin

> ID：11880041
> 
> 赞同：0
> 
> 时间：2012-08-09T09:07:15.707
> 
> 标签：eclipse, customization, skins

What I'm looking for is a dark skin for Eclipse v3.3 on Win7\. I mean not just the code editor in dark, but the whole dark IDE together with toolbars and stuff. I know it's possible in Ubuntu, but I have to stick to Win7 for now and it rips my eyes off.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T00:57:14.113

我整理了一系列步骤，让您获得美丽的黑暗主题： [https ://github.com/davidcoleman007/VibrantNight](https://github.com/davidcoleman007/VibrantNight)

它是哪个工具？闪存生成器？正如您在我的说明中所见，它可能会被欺骗以与其他版本的 eclipse 一起工作！告诉我们它是哪个工具，我们也许可以帮助您破解更新的 Eclipse 来为您工作！

# c# - 单击菜单项...没有反应

> ID：11880043
> 
> 赞同：0
> 
> 时间：2012-08-09T09:07:23.103
> 
> 标签：c#, internet-explorer, com, bho, regsvr32

这是一个完全新手的问题，因为我的领域是 Java 而不是 C#，但我得到了构建 BHO 的任务，并且已经到了需要一个菜单​​项（在工具菜单内）来调用我的代码中的函数的地步。

我读到我必须声明并实现 IOleCommandTarget 接口，我这样做了。现在我需要将同一个类注册为 COM 对象。

显然要做到这一点，我需要用 [ComRegisterFunction] 声明几个函数，但即使这样做了，我也无法用 regsvr32 注册它们。并且在使用 DLL 导出查看器进行进一步检查时，这些功能似乎不存在 :(

我究竟做错了什么？

先感谢您

**编辑：**

好的，从我得到的评论来看，我认为我的 COM 对象已正确注册，但我的问题仍然存在：当我单击新创建的菜单项时，我没有反应或调试真正发生的事情的方法。

到目前为止，这是我的代码：

```
using System;
using System.Runtime.InteropServices;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SHDocVw;
using MSHTML;
using Microsoft.Win32;
using System.Windows;
using System.Windows.Forms;
using System.Drawing.Imaging;
using System.Drawing;
using System.Diagnostics;
using System.Threading;

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
public struct OLECMDTEXT {
    public uint cmdtextf;
    public uint cwActual;
    public uint cwBuf;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
    public char rgwz;
}

[StructLayout(LayoutKind.Sequential)]
public struct OLECMD {
    public uint cmdID;
    public uint cmdf;
}

// Interop definition for IOleCommandTarget. 
[ComImport,
Guid("b722bccb-4e68-101b-a2bc-00aa00404770"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IOleCommandTarget {
    //IMPORTANT: The order of the methods is critical here. You
    //perform early binding in most cases, so the order of the methods
    //here MUST match the order of their vtable layout (which is determined
    //by their layout in IDL). The interop calls key off the vtable ordering,
    //not the symbolic names. Therefore, if you switched these method declarations
    //and tried to call the Exec method on an IOleCommandTarget interface from your
    //application, it would translate into a call to the QueryStatus method instead.
    void QueryStatus(ref Guid pguidCmdGroup, UInt32 cCmds,
        [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] OLECMD[] prgCmds, ref OLECMDTEXT CmdText);
    void Exec(ref Guid pguidCmdGroup, uint nCmdId, uint nCmdExecOpt, ref object pvaIn, ref object pvaOut);
}

namespace ANAISBHO {

    [
    ComVisible(true),
    Guid("8a194578-81ea-4850-9911-13ba2d71efbd"),
    ClassInterface(ClassInterfaceType.None)
    ]
    public class BHO : IObjectWithSite, IOleCommandTarget {

        public SHDocVw.WebBrowser webBrowser;

        public HTMLDocument document;

        public static string BHOKEYNAME = "Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Browser Helper Objects";

        private Guid cmdGuid = new Guid("ED016940-BD5B-11CF-BA4E-00C04FD70816");

        private static Bitmap bmpScreenshot;

        private static Graphics gfxScreenshot;

        public void OnDocumentComplete(object pDisp, ref object URL) {
            document = (HTMLDocument) webBrowser.Document;
        }

        //HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Extensions\{GUID}\CLSID
        private static void RegisterCiteNPLMenuEntry() {
            Console.WriteLine("Registrying the CiteNPL menu entry");
            RegistryKey MicrosoftKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default).OpenSubKey("Software").OpenSubKey("Microsoft");
            RegistryKey ExtensionsKey = MicrosoftKey.OpenSubKey("Internet Explorer").OpenSubKey("Extensions", RegistryKeyPermissionCheck.ReadWriteSubTree);
            String GUID = @"{C3E1CD69-3928-4b69-ABEC-936CA3A3BAAA}";

            ExtensionsKey.CreateSubKey(GUID);
            RegistryKey GUIDKey = ExtensionsKey.OpenSubKey(GUID, RegistryKeyPermissionCheck.ReadWriteSubTree);
            String CLSID_Shell_ToolbarExtExec = @"{1FBA04EE-3024-11d2-8F1F-0000F87ABD16}";
            GUIDKey.SetValue("CLSID", CLSID_Shell_ToolbarExtExec, RegistryValueKind.String);
            GUIDKey.SetValue("MenuText", "CiteNPL", RegistryValueKind.String);
            GUIDKey.SetValue("ClsidExtension", "{c4127d56-7114-46da-a853-6ea1b8a199f7}", RegistryValueKind.String);

            GUIDKey.Close();
            ExtensionsKey.Close();
            MicrosoftKey.Close();
        }

        public void QueryStatus(ref Guid pguidCmdGroup, UInt32 cCmds, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] OLECMD[] prgCmds, ref OLECMDTEXT CmdText) {
            MessageBox.Show("query");
        }

        public void Exec(ref Guid pguidCmdGroup, uint nCmdId, uint nCmdExecOpt, ref object pvaIn, ref object pvaOut) {
            MessageBox.Show("Exec");
        }

        private void TakeScreenshot() {
            int height = 1024; //webBrowser.Document.Body.ScrollRectangle.Height;
            int width = 1024;  //webBrowser.Document.Body.ScrollRectangle.Width;
            //int left = 0;      //webBrowser.Document.Body.ScrollRectangle.Left;
            //int right = 1024;  //webBrowser.Document.Body.ScrollRectangle.Right;
            System.Drawing.Size browserSize = new System.Drawing.Size(width, height);

            bmpScreenshot = new Bitmap(width, height, PixelFormat.Format32bppArgb);
            gfxScreenshot = Graphics.FromImage(bmpScreenshot);
            gfxScreenshot.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
            bmpScreenshot.Save("c:\\temp.png", ImageFormat.Png);
        }

        public int SetSite(object site) {
            if(site != null) {
                webBrowser = (SHDocVw.WebBrowser) site;
                webBrowser.DocumentComplete += new DWebBrowserEvents2_DocumentCompleteEventHandler(this.OnDocumentComplete);
            } else {
                webBrowser.DocumentComplete -= new DWebBrowserEvents2_DocumentCompleteEventHandler(this.OnDocumentComplete);
                webBrowser = null;
            }

            return 0;
        }

        public int GetSite(ref Guid guid, out IntPtr ppvSite) {
            IntPtr punk = Marshal.GetIUnknownForObject(webBrowser);
            int hr = Marshal.QueryInterface(punk, ref guid, out ppvSite);
            Marshal.Release(punk);

            return hr;
        }

        [ComRegisterFunction]
        public static void RegisterBHO(Type type) {
            Console.WriteLine("Registering the BHO");

            RegisterCiteNPLMenuEntry();
            RegisterBHOInWindowsRegistry(type);
        }

        [ComUnregisterFunction]
        public static void UnregisterBHO(Type type) {
            Console.WriteLine("Unregistering the BHO");
            UnRegisterBHOFromWindowsRegistry(type);
        }

        private static void UnRegisterBHOFromWindowsRegistry(Type type) {
            RegistryKey registryKey = Registry.LocalMachine.OpenSubKey(BHOKEYNAME, true);
            string guid = type.GUID.ToString("B");

            if(registryKey != null) {
                registryKey.DeleteSubKey(guid, false);
            }
        }

        private static void RegisterBHOInWindowsRegistry(Type type) {
            RegistryKey registryKey = Registry.LocalMachine.OpenSubKey(BHOKEYNAME, true);

            if(registryKey == null) {
                registryKey = Registry.LocalMachine.CreateSubKey(BHOKEYNAME);
            }

            string guid = type.GUID.ToString("B");
            RegistryKey ourKey = registryKey.OpenSubKey(guid);

            if(ourKey == null) {
                ourKey = registryKey.CreateSubKey(guid);
            }

            ourKey.SetValue("Alright", 1);
            registryKey.Close();
            ourKey.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:09:30.070

由于这是一个托管 dll，因此您不能使用 regsvr32 或“DLL Export Viewer”。

要为 COM 互操作注册您的 .Net dll，请使用[Regasm](http://msdn.microsoft.com/en-us/library/tzat5yw6%28v=vs.71%29.aspx)

# asp.net-mvc - Issues playing video files using MVC FileStream

> ID：11880044
> 
> 赞同：5
> 
> 时间：2012-08-09T09:07:23.517
> 
> 标签：asp.net-mvc, video-streaming, html5-video, mediaelement.js

I'm trying to use the following code to retrieve video files to play to a user:

```
public class VideoController : Controller
{
    public VideoResult GetMP4Video(string videoID)
    {
        if (User.Identity.IsAuthenticated)
        {
            string clipLocation = string.Format("{0}\\Completed\\{1}.mp4", ConfigurationManager.AppSettings["VideoLocation"].ToString(), videoID);

            using (FileStream stream = new FileStream(clipLocation, FileMode.Open))
            {
                FileStreamResult fsResult = new FileStreamResult(stream, "video/mp4");
                VideoResult result = new VideoResult(ReadFully(fsResult.FileStream), "video/mp4");

                return result;
            }
        }
        else
        {
            return null;
        }
    }

    private static byte[] ReadFully(Stream input)
    {
        byte[] buffer = new byte[32 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    }
} 
```

For displaying to the client I'm using Media Element:

```
<!-- Video Player Here -->
<video width="640" height="360" poster="@Url.Content(string.Format("~/Videos/{0}_2.jpg", Model.VideoID))" controls="controls" preload="none">
<!-- MP4 for Safari, IE9, iPhone, iPad, Android, and Windows Phone 7 -->
<source type="video/mp4" src="@Url.Action("GetMP4Video", "Video", new { videoID = Model.VideoID })" />
<!-- Flash fallback for non-HTML5 browsers without JavaScript -->
    <object width="320" height="240" type="application/x-shockwave-flash" data="@Url.Content("~/Scripts/ME/flashmediaelement.swf")">
        <param name="movie" value="@Url.Content("~/Scripts/ME/flashmediaelement.swf")" />
        <param name="flashvars" value="controls=true&file=@Url.Action("GetMP4Video", "Video", new { videoID = Model.VideoID })" />
        <!-- Image as a last resort -->
        <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities" />
    </object>
</video> 
```

The problem is though that the file doesn't seem to play or at least not consistently. Also seeking in the video doesn not appear to work properly either. I guess my question is is this a acceptable way to serve a video to a user? If so what have I got wrong? I think its important that I'm very new to video and I'm very much learning as I go. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T08:21:08.570

这对我有用。改编自[这里](http://blogs.visigo.com/chriscoulson/easy-handling-of-http-range-requests-in-asp-net/)：

```
 internal static void StreamVideo(string fullpath, HttpContextBase context)
    {
        long size, start, end, length, fp = 0;
        using (StreamReader reader = new StreamReader(fullpath))
        {

            size = reader.BaseStream.Length;
            start = 0;
            end = size - 1;
            length = size;
            // Now that we've gotten so far without errors we send the accept range header
            /* At the moment we only support single ranges.
             * Multiple ranges requires some more work to ensure it works correctly
             * and comply with the spesifications: http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.2
             *
             * Multirange support annouces itself with:
             * header('Accept-Ranges: bytes');
             *
             * Multirange content must be sent with multipart/byteranges mediatype,
             * (mediatype = mimetype)
             * as well as a boundry header to indicate the various chunks of data.
             */
            context.Response.AddHeader("Accept-Ranges", "0-" + size);
            // header('Accept-Ranges: bytes');
            // multipart/byteranges
            // http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.2

            if (!String.IsNullOrEmpty(context.Request.ServerVariables["HTTP_RANGE"]))
            {
                long anotherStart = start;
                long anotherEnd = end;
                string[] arr_split = context.Request.ServerVariables["HTTP_RANGE"].Split(new char[] { Convert.ToChar("=") });
                string range = arr_split[1];

                // Make sure the client hasn't sent us a multibyte range
                if (range.IndexOf(",") > -1)
                {
                    // (?) Shoud this be issued here, or should the first
                    // range be used? Or should the header be ignored and
                    // we output the whole content?
                    context.Response.AddHeader("Content-Range", "bytes " + start + "-" + end + "/" + size);
                    throw new HttpException(416, "Requested Range Not Satisfiable");

                }

                // If the range starts with an '-' we start from the beginning
                // If not, we forward the file pointer
                // And make sure to get the end byte if spesified
                if (range.StartsWith("-"))
                {
                    // The n-number of the last bytes is requested
                    anotherStart = size - Convert.ToInt64(range.Substring(1));
                }
                else
                {
                    arr_split = range.Split(new char[] { Convert.ToChar("-") });
                    anotherStart = Convert.ToInt64(arr_split[0]);
                    long temp = 0;
                    anotherEnd = (arr_split.Length > 1 && Int64.TryParse(arr_split[1].ToString(), out temp)) ? Convert.ToInt64(arr_split[1]) : size;
                }
                /* Check the range and make sure it's treated according to the specs.
                 * http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html
                 */
                // End bytes can not be larger than $end.
                anotherEnd = (anotherEnd > end) ? end : anotherEnd;
                // Validate the requested range and return an error if it's not correct.
                if (anotherStart > anotherEnd || anotherStart > size - 1 || anotherEnd >= size)
                {
                    context.Response.ContentType = MimeMapping.GetMimeMapping(fullpath);
                    context.Response.AddHeader("Content-Range", "bytes " + start + "-" + end + "/" + size);
                    throw new HttpException(416, "Requested Range Not Satisfiable");
                }
                start = anotherStart;
                end = anotherEnd;

                length = end - start + 1; // Calculate new content length
                fp = reader.BaseStream.Seek(start, SeekOrigin.Begin);
                context.Response.StatusCode = 206;
            }
        }
        // Notify the client the byte range we'll be outputting
        context.Response.AddHeader("Content-Range", "bytes " + start + "-" + end + "/" + size);
        context.Response.AddHeader("Content-Length", length.ToString());
        // Start buffered download
        context.Response.WriteFile(fullpath, fp, length);
        context.Response.End();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:31:17.557

是的，您正在尝试将网络服务器提供的 mp4 文件放入嵌入在您的 HTML 文件中的播放器中，并且它无法正常播放（除非文件相对非常小或者您的互联网连接速度极快，所以文件被快速下载到浏览器的临时文件夹中）。

要正确流式传输视频文件，请按照以下任何步骤操作。

1.  使用 Windows 媒体服务器/Flash 媒体服务器。通过 Windows Media Encoder 或 flash 媒体编码器将您的网络摄像头推送到服务器，并使用服务器实时链接通过任何合适的播放器（如 jwplayer）链接到您的网站。

2.  使用 Windows Media Encoder 将您的网络摄像头流式传输给不涉及服务器的任何人。当您的编码器启动时，您将获得一个用于查看流的 URL，您可以使用该 URL 在您的站点中发布。

3.  使用第三方流媒体服务，它们为您提供发布点来发布您的网络摄像头流，并使用他们提供的链接在您的网站上显示它。（通过 LiveStream 与 brigcove 或 Mogulus 核对

希望这可以帮助。

# android - 视图上的动画

> ID：11880048
> 
> 赞同：2
> 
> 时间：2012-08-09T09:07:29.877
> 
> 标签：android, android-animation

我有这样的看法

![在此处输入图像描述](../Images/ee5bd8fea1630d137fd76764dfa78587.png)

当用户点击任何按钮时，比如说“奥迪”。

我想要的是在上面显示一个带有动画的视图 ![在此处输入图像描述](../Images/20195cac51dde32124d32cd35e454fdc.png)

我试过的是

我做了这样的布局（只是为了测试动画）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/hideLayout"
    android:layout_width="200dip"
    android:layout_height="wrap_content"
    android:layout_above="@+id/buttonLayout"
    android:background="#f0f"
    android:visibility="gone" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />
</LinearLayout>

<LinearLayout
    android:id="@+id/buttonLayout"
    android:layout_width="200dip"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btn_showView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show View" />
</LinearLayout> 
```

然后制作动画

`Animation showView=(Button)findViewById(R.id.btn_showView);`

我的动画文件是

```
 <?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="300"
        android:fromYDelta="100%p"
        android:toYDelta="0" />

</set> 
```

进而

```
showView=(Button)findViewById(R.id.btn_showView);

    showView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            hideLayout.startAnimation(animShow);
            animShow.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    hideLayout.setVisibility(View.VISIBLE);

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    hideLayout.setVisibility(View.VISIBLE);

                }
            });

        }
    }); 
```

它正在工作，但不是我想要的。是`text View`从底部来的。我希望我的图像显示我想要的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T03:43:03.897

我找到了 android >=3.0 的解决方案，`Object Animator`

我修复了视图的高度，因为在我的情况下这不是问题。

我做了两个视图

1）顶视图宽度固定高度100dip（需要动画）使其不可见

2）底视图固定高度100dip（可见）

3）当我点击`showView`我调用以下行

```
ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(topLayout,
            "y", 100, 0);
objectAnimator.addListener(new AnimatorListener() {

        @Override
        public void onAnimationStart(Animator animation) {
            // TODO Auto-generated method stub
            topLayout.setVisibility(View.VISIBLE);
            showView.bringToFront();
        }

        @Override
        public void onAnimationRepeat(Animator animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationEnd(Animator animation) {

        }

        @Override
        public void onAnimationCancel(Animator animation) {
            // TODO Auto-generated method stub

        }
    });
            objectAnimator.setDuration(500);
    objectAnimator.start(); 
```

可能会帮助一些人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:22:23.027

由于在您的代码中`TextView`，因此来自底部。`android:fromYDelta="100%p"`如果您希望您的 textView 从其原始位置向上移动，请使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
  <set xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/linear_interpolator" >

       <translate
            android:duration="500"
            android:toYDelta="-66%"
            android:fromYDelta="0%" />

   </set> 
```

`-66%` 根据您的要求更改值

从图像中我可以猜到您希望父布局 `Marke: Audi`滑入和滑出。为此，您必须为父布局（要滑入和滑出的布局的父级）设置动画，并且还必须修复两个视图的高度比。然后在动画结束时只需将上视图的可见性更改为 `GONE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:31:54.123

尝试制作 res -> anim 文件夹

slide_in_bottom.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromYDelta="-100%p" android:toYDelta="0%p"
android:duration="@android:integer/config_longAnimTime" /> 
```

slide_in_top.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromYDelta="100%p" android:toYDelta="0%p"
android:duration="@android:integer/config_longAnimTime"/> 
```

slide_out_bottom.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
   android:duration="@android:integer/config_longAnimTime"
   android:fromYDelta="0"
   android:toYDelta="100%p" /> 
```

slide_out_top.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromYDelta="0" android:toYDelta="-100%p"
android:duration="@android:integer/config_longAnimTime" /> 
```

overridePendingTransition(R.anim.slide_in_top, R.anim.slide_out_top);

# javascript - Fire function at timed interval from within an function (coffeescript)

> ID：11880052
> 
> 赞同：0
> 
> 时间：2012-08-09T09:07:49.110
> 
> 标签：javascript, coffeescript

I have a function that equalise element heights on older browsers with javascript. The problem is that I have to run that function at a 3 second interval or so due to ajax content. I cant use the callback function on the content update since it is build into a CMS I cant touch.

I have the following coffeescript file:

```
class window.ApplicationController
  constructor: ->
    #fire code
    @equalColumnHeight()
  #......
  equalColumnHeight: ->
    console.log "equal height"
    colLeft = 0
    if @browserwidth > 1024
      colLeft = (@columnPageTreeNav + @columnSidebarA)
    colHeight = Math.max(colLeft, @columnPageTreeNav, @columnContent, @columnSidebarA, @columnSidebarB)
    $("#content, #sidebar_a, #sidebar_b").height colHeight
    $("#sidebar_a").css "top", (@columnPageTreeNav + 190) 
```

My initial idea was to fire the function at an interval like this:

```
class window.ApplicationController
  constructor: ->
    #fire code
    @equalColumnHeight()
    setInterval @equalColumnHeight(), 3000
  #......
  equalColumnHeight: ->
    colLeft = 0
    if @browserwidth > 1024
      colLeft = (@columnPageTreeNav + @columnSidebarA)
    colHeight = Math.max(colLeft, @columnPageTreeNav, @columnContent, @columnSidebarA, @columnSidebarB)
    $("#content, #sidebar_a, #sidebar_b").height colHeight
    $("#sidebar_a").css "top", (@columnPageTreeNav + 190) 
```

But that does not work, any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:18:12.607

```
setInterval (=> @equalColumnHeight()), 3000 
```

`setInterval`接受第一个参数的函数，但您传递的结果`equalColumnHeight`

# mysql - 警告：PDO::__construct() [pdo.--construct]: MySQL server has gone away ，即使有持久连接

> ID：11880064
> 
> 赞同：2
> 
> 时间：2012-08-09T09:08:21.180
> 
> 标签：mysql, pdo, connection, warnings, persistent

我在我的应用程序中使用 PDO 来处理 MySQL。我已将其连接设置为持久。但是当我在 IDE 和浏览器之间切换以测试项目时，有时会出现以下错误：

> 警告：PDO::__construct() [pdo.--construct]: MySQL server has gone away in

这对我来说很奇怪，因为：

1.  它有时会在成功加载网页后发生（没有错误）。所以我可以确保我在前几分钟建立了连接。
2.  我使用了持久连接，我希望我不会失去与数据库的连接。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-03T10:16:03.647

根据对[报告的错误的评论，](https://bugs.php.net/bug.php?id=64549#1364921227 "对报告的错误的评论") mysqlnd 正在内部捕获故障，将其报告为警告，然后重新建立连接。

（目前）禁止报告此警告的唯一方法是：

1.  使用 @ 运算符或
2.  防止在构造函数执行期间报告警告：

```
 $oldErrorReporting = error_reporting();
    error_reporting($oldErrorReporting & ~E_WARNING);
    // construct PDO instance here
    error_reporting($oldErrorReporting); 
```

# php - Wordpress：有没有办法以 TR TD 格式而不是 DIV SPAN 显示帖子

> ID：11880069
> 
> 赞同：0
> 
> 时间：2012-08-09T09:08:51.177
> 
> 标签：php, wordpress

Wordpress：有没有办法以 TR TD 格式而不是 DIV SPAN 显示帖子

假设我的内容是这样的

```
<table>
<tr>
<td> col1 </td>
<td> col2 </td>
</tr> 
<tr>
<td> val1 </td>
<td> val2 </td>
</tr>
</table> 
```

结果是这样的

```
<div>
<span>col1</span><br>

<span>col2</span><br>

<span>val1</span><br>

<span>val2</span>
</div> 
```

# shell - 如何在 Jenkins 中以 root 身份运行脚本？

> ID：11880070
> 
> 赞同：54
> 
> 时间：2012-08-09T09:08:55.943
> 
> 标签：shell, hudson, jenkins, root

我需要在 Jenkins 中以 root 而不是默认用户身份运行 shell 脚本。我需要改变什么？

我的 sudoers 文件是这样的：

```
# User privilege specification
root    ALL=(ALL) ALL
igx     ALL=(ALL) ALL
%wheel  ALL=(ALL) ALL

# Allow members of group sudo to execute any command
# (Note that later entries override this, so you might need to move
%sudo   ALL=(ALL) ALL
#
#includedir /etc/sudoers.d

# Members of the admin group may gain root privileges
%admin  ALL=(ALL) NOPASSWD:ALL
root    ALL=(ALL) ALL
jenkins ALL=NOPASSWD: /var/lib/jenkins/workspace/ing00112/trunk/source/
jenkins ALL=(ALL) NOPASSWD:ALL
#Defaults:jenkins !requiretty 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-09T09:10:44.517

您必须使用以下命令运行脚本`sudo`：

```
sudo /path/to/script 
```

但在您必须允许`jenkins`在`/etc/sudoers`.

```
jenkins    ALL = NOPASSWD: /path/to/script 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-03-29T14:34:32.220

@Igor Chubin 的答案是 100% 正确，但永远不要使用普通编辑器打开 sudoer 文件。始终使用 visudo

只需键入

```
sudo visudo 
```

这将带您进入`/etc/sudoers`，保存后将确保格式没有错误。

如果您在 sudoer 文件中出错，您将失去 sudo 访问权限，因此请始终使用`visudo`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-06T19:09:20.023

我确实意识到我在这个问题上迟到了，但为了参考起见，我想我会把我的 2c 扔在这里：我使用 Jenkins 的 SSH 插件来完成这个（只需配置一个 localhost 目标）。通过这种方式，我可以将脚本直接包含在 Jenkins 中（就像普通的“执行 shell”步骤一样），而不是使用 sudo 来调用外部脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-15T11:17:05.410

尝试将 jenkins 用户添加到 sudo 组

```
sudo su -
usermod -a -G sudo jenkins 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T05:50:17.773

简单的方法
[![在此处输入图像描述](../Images/64afae591e07810d2d3db20a40265c8c.png)](https://i.stack.imgur.com/uLD9Y.png)

```
$ sudo visudo
## Now add the below lines in your sudoers file :
jenkins ALL=(ALL) NOPASSWD: ALL

$service jenkins start 
```

# java - Spring AOP - 方法调用（）不会发生

> ID：11880072
> 
> 赞同：0
> 
> 时间：2012-08-09T09:08:58.063
> 
> 标签：java, spring, aop

我有一个 default-context.xml

```
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.4.xsd">
<!-- some other beans -->
<bean id="licenseTestingAdvice" class="mypackage.LicenseTestingAdvice" />
<bean id="jdbcTemplate" class="mypackage.ProxyFactoryBean">
    <property name="interceptorNames">
        <list>
            <idref bean="licenseTestingAdvice" />
        </list>
    </property>
    <property name="target">
        <value>mypackage.JDBCTemplate</value>
    </property>
    <property name="proxyTargetClass" value="true" />
</bean> 
```

还有一个 LicenseTestingAdvice.java：

```
import org.aopalliance.intercept.MethodInterceptor;
import org.aopalliance.intercept.MethodInvocation;

import java.lang.reflect.Method;

public class LicenseTestingAdvice implements MethodInterceptor {
    @Override
    public Object invoke(MethodInvocation inv) throws Throwable {
        Method method = inv.getMethod();

        System.out.println(String.format(">> Method %s was called before", method.getName()));
        inv.proceed();
        System.out.println(String.format(">> Method %s was called after", method.getName()));

        return null;  //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

当我调用 JDBCTemplate 类的 execute() 方法时，不会调用 invoke() 方法。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:18:44.507

这`<value>mypackage.JDBCTemplate</value>`应该是对 bean 或内部 bean 的引用。此外，拦截器名称应该是 bean 的名称，而不是对它的引用。就像是：

```
<bean id="myJdbcTemplate" class="mypackage.JDBCTemplate"/>
<bean id="jdbcTemplate" class="mypackage.ProxyFactoryBean">
    <property name="interceptorNames">
        <list>
            <value>licenseTestingAdvice</value>
        </list>
    </property>
    <property name="target" ref="myJdbcTemplate"/>
    <property name="proxyTargetClass" value="true" />
</bean> 
```

# c# - 从 Active Directory 获取用户组时出错

> ID：11880073
> 
> 赞同：0
> 
> 时间：2012-08-09T09:09:00.460
> 
> 标签：c#, .net, active-directory, directoryservices

我正在尝试获取 AD 用户组。**用户**位于**hq.example.company.com/Deep/Users**中，其中 Deep 和 Users 是组织单位。这些**组**位于**hq.example.company.com/Deep/Groups**中。

这是我的代码：

```
var domain = new PrincipalContext(ContextType.Domain, 
    "hq.example.company.com", "dc=hq,dc=example,dc=company,dc=com");
UserPrincipal user = UserPrincipal.FindByIdentity(domain, "user");
PrincipalSearchResult<Principal> groups = user.GetGroups();
foreach (var p in groups)
{
    Console.WriteLine("Name: {0}", p.Name);
} 
```

“组”变量包含“域用户”组和一些来自 hq.example.company.com/Deep/Groups 的自定义组。“域用户”组的名称输出没有错误，但其他组抛出此类错误： **“指定的目录服务属性或值不存在”**。有人知道我在做什么错吗？

# mysql - 从两个表在 SQL 中生成报告

> ID：11880075
> 
> 赞同：1
> 
> 时间：2012-08-09T09:09:03.807
> 
> 标签：mysql, sql, mysqli

我对**MySQL**生成报告有疑问。主要目标是选择每个用户的所有任务，并计算每个用户的 time_to_complete 和 time_passed 的总和之间的差异

1 首先你列出了所有不同的名字

```
SELECT DISTINCT 
initial
FROM atm_name_initials 
```

结果在这里=> [http://sqlfiddle.com/#!2/f6cbe/1](http://sqlfiddle.com/#!2/f6cbe/1)

2 其次，对于我在 atm_name_initials 中找到的每个名称，我必须执行此查询，获取有关该用户的信息

```
SELECT
task_given_to,
SUM(time_to_complete) AS sum_time_to_complete,
SUM(time_passed) AS sum_time_passed,
SUM(time_to_complete) - SUM(time_passed) AS sum_differance
FROM atm_tasks_dit
WHERE 
completed_percent = 100 AND
task_given_to = 'OS' 
```

结果在这里=> [http://sqlfiddle.com/#!2/f6cbe/2](http://sqlfiddle.com/#!2/f6cbe/2)

## 问题1

我很难理解为什么它给了我这些数字？0.1 + 0.3 = 0.4，而不是 0.34545455 ... 或其他

## 问题2

我如何将第一个选择链接到第二个，在 PHP 中会是这样的

```
$result = mysql_query("
SELECT DISTINCT 
initial
FROM atm_name_initials
;") or die("An unexpected error has occur!");

while($row = mysql_fetch_assoc($result))
{
    $NameInitial = $row['initial'];

    $result2 = mysql_query("
    SELECT
    task_given_to,
    SUM(time_to_complete) AS sum_time_to_complete,
    SUM(time_passed) AS sum_time_passed,
    SUM(time_to_complete) - SUM(time_passed) AS sum_differance
    FROM atm_tasks_dit
    WHERE 
    completed_percent = 100 AND
    task_given_to = '".$NameInitial."'
    ;") or die("An unexpected error has occur!");

    while($row2 = mysql_fetch_assoc($result2))
    {
        echo $row['task_given_to']."<br/>";
        echo $row['sum_time_to_complete']."<br/>";
        echo $row['sum_time_passed']."<br/>";
        echo $row['sum_differance']."<br/>";
    }
} 
```

但是请不要再使用 PHP，我想真正学习 SQL。

我需要两种解决方案

SOLUTION 1
制作程序（风格模式）

解决方案 2
在一个单独的查询中 SELECT 在另一个 SELECT 或其他什么中，但没有过程

所有帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:01:06.557

您可以很容易地组合这两个语句：

```
select task_given_to,
       sum(time_to_complete) as sum_time_to_complete,
       sum(time_passed) as sum_time_passed,
       sum(time_to_complete) - sum(time_passed) as sum_differance
from atm_tasks_dit
where completed_percent = 100
and   task_given_to in (select initial 
                        from atm_name_initials)
group by task_given_to 
```

关于问题 1：这就是浮点运算在计算机中的工作方式。如果您需要精确的数字，您将需要使用`numeric`.

请参阅 SQLFiddle：[http ://sqlfiddle.com/#!2/ba3b9/8](http://sqlfiddle.com/#!2/ba3b9/8)

# magento - QLSTATE [42S02]：未找到基表或视图：1146 表 'davidso_newmagento.tag' 不存在

> ID：11880076
> 
> 赞同：0
> 
> 时间：2012-08-09T09:09:05.377
> 
> 标签：magento

在我的 magento 网站中，我点击一个产品：

然后我得到了这个错误：

`

处理您的请求时出错

SQLSTATE [42S02]：未找到基表或视图：1146 表 'davidso_newmagento.tag' 不存在

痕迹：

> 0 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo-_execute(Array) 1 /hsphere/local/home/davidson/test .davidsonbros.com/lib/Zend/Db/Statement.php(300)：Varien_Db_Statement_Pdo_Mysql-_execute(Array) 2 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Zend/Db/Adapter/Abstract。 php(479): Zend_Db_Statement-execute(Array) 3 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract-query('SELECT `main_ta...', Array) 4 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract-query('SELECT`main_ta ...'，数组）5 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Zend/Db/Adapter/Abstract.php（734）：Varien_Db_Adapter_Pdo_Mysql-query（'SELECT`main_ta...', Array) 6 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Varien/Data/Collection/Db.php(734): Zend_Db_Adapter_Abstract-fetchAll('SELECT`main_ta ...'，数组）7 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php（521）：Varien_Data_Collection_Db -_fetchAll('SELECT `main_ta...', Array) 8 /hsphere/local/home/davidson/test.davidsonbros.com/lib/Varien/Data/Collection/Db.php(566): Mage_Core_Model_Resource_Db_Collection_Abstract-getData() 9 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Tag/Model/Resource/Tag/Collection.php(83): Varien_Data_Collection_Db-load(false, false) 10 /hsphere /local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Tag/Block/Product/List.php(68)：Mage_Tag_Model_Resource_Tag_Collection-load() 11 /hsphere/local/home/davidson/test .davidsonbros.com/app/code/core/Mage/Tag/Block/Product/List.php(45)：Mage_Tag_Block_Product_List-_getCollection() 12 /hsphere/local/home/davidson/test.davidsonbros.com/app/design/frontend/base/davidsonbros/template/catalog/product/view.phtml(58): Mage_Tag_Block_Product_List-getTags() 13 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(241): include('/hsphere/local/...') 14 /hsphere /local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template-fetchView('frontend/base/d...') 15 /hsphere /local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template-renderView() 16 /hsphere/local/home/davidson/test.davidsonbros .com/app/code/core/Mage/Core/Block/Abstract.php(863)：Mage_Core_Block_Template-_toHtml() 17 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract-toHtml() 18 /hsphere /local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Abstract.php(863)：Mage_Core_Block_Text_List-_toHtml() 19 /hsphere/local/home/davidson/test.davidsonbros .com/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract-toHtml() 20 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage /Core/Block/Abstract.php(526): Mage_Core_Block_Abstract-_getChildHtml('content', true) 21 /hsphere/local/home/davidson/test.davidsonbros.com/app/design/frontend/base/default/template/ page/2columns-right.phtml(48): Mage_Core_Block_Abstract-getChildHtml('content') 22 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(241): 包括('/hsphere/local/...') 23 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template-fetchView('frontend/base/d...') 24 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Block/Template.php(286)：Mage_Core_Block_Template-renderView() 25 /hsphere/local/home/davidson/test .davidsonbros.com/app/code/core/Mage/Core/Block/Abstract.php(863)：Mage_Core_Block_Template-_toHtml() 26 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core /Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract-toHtml() 27 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Controller/Varien/Action .php(390): Mage_Core_Model_Layout-getOutput() 28 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Cms/Helper/Page.php(137): Mage_Core_Controller_Varien_Action-renderLayout() 29 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page-_renderPage(Object(Mage_Cms_IndexController), 'no-route') 30 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Cms/controllers/IndexController.php（75）：Mage_Cms_Helper_Page-renderPage（对象（Mage_Cms_IndexController），'无路由'） 31 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Cms_IndexController-noRouteAction() 32 /hsphere/local/home/戴维森/test.davidsonbros。com/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250)：Mage_Core_Controller_Varien_Action-dispatch('noRoute') 33 /hsphere/local/home/davidson/test.davidsonbros.com/app /code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard-match(Object(Mage_Core_Controller_Request_Http)) 34 /hsphere/local/home/davidson/test.davidsonbros.com/app/code/core /Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front-dispatch() 35 /hsphere/local/home/davidson/test.davidsonbros.com/app/Mage.php(687): Mage_Core_Model_App-run(Array) 36 /hsphere/local/home/davidson/test.davidsonbros.com/index.php(90): Mage::run('', 'store') 37 {main}davidsonbros.com/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard-match(Object(Mage_Core_Controller_Request_Http)) 34 /hsphere/local/home/davidson/test.davidsonbros.com/ app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front-dispatch() 35 /hsphere/local/home/davidson/test.davidsonbros.com/app/Mage.php(687): Mage_Core_Model_App -run(Array) 36 /hsphere/local/home/davidson/test.davidsonbros.com/index.php(90): Mage::run('', 'store') 37 {main}davidsonbros.com/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard-match(Object(Mage_Core_Controller_Request_Http)) 34 /hsphere/local/home/davidson/test.davidsonbros.com/ app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front-dispatch() 35 /hsphere/local/home/davidson/test.davidsonbros.com/app/Mage.php(687): Mage_Core_Model_App -run(Array) 36 /hsphere/local/home/davidson/test.davidsonbros.com/index.php(90): Mage::run('', 'store') 37 {main}Mage_Core_Controller_Varien_Front-dispatch() 35 /hsphere/local/home/davidson/test.davidsonbros.com/app/Mage.php(687): Mage_Core_Model_App-run(Array) 36 /hsphere/local/home/davidson/test.davidsonbros。 com/index.php(90): Mage::run('', 'store') 37 {main}Mage_Core_Controller_Varien_Front-dispatch() 35 /hsphere/local/home/davidson/test.davidsonbros.com/app/Mage.php(687): Mage_Core_Model_App-run(Array) 36 /hsphere/local/home/davidson/test.davidsonbros。 com/index.php(90): Mage::run('', 'store') 37 {main}

这`davidso_newmagento`是我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:30:26.553

看起来`tag`桌子被移除了。

您可以**尝试**推动 Magento 重新执行标签模块设置脚本。为此，请在表 ' **core_resource ' 中查找 '** **tag_setup** ' 行并将其删除。然后注销并登录管理面板。

 ****我不确定它是否会起作用**，因为您可能会遇到一些错误，因为某些表已经存在。

如果您遇到一些错误来修复它们，您可以尝试以下 2 个建议之一：

1.  您可以“玩”设置脚本（ app/code/core/Mage/Tag/sql/tag_setup/... ）：尝试取消注释 mysql4-install-0.7.0.php 中的 DROP TABLE 语句（只需删除 ' --' 在 DROP ... 之前

2.  您可以手动删除出现问题的表。

    （如果要保留标签数据，则导出然后导入...）**

# c# - 如何在 Orchard CMS 数据库中保存自定义数据

> ID：11880078
> 
> 赞同：2
> 
> 时间：2012-08-09T09:09:05.950
> 
> 标签：c#, asp.net-mvc-3, orchardcms

我创建了一个模块，我想在 Orchard 的数据库中收集一些简单的数据，所以我为它创建了模型、迁移和处理程序：

`Models/StatePartRecord.cs`：

```
 namespace Address.Models
    {
        public class StatePart : ContentPart<StatePartRecord>
        {
            public int Id
            {
                get { return Record.Id; }
                set { Record.Id = value; }
            }
            public string StateName
            {
                get { return Record.StateName; }
                set { Record.StateName = value; }
            }
        }
    } 
```

`Models/StatePartRecord.cs`：

```
namespace Address.Models
{
    public class StatePartRecord : ContentPartRecord
    {
        public virtual int Id { get; set; }
        public virtual string StateName { get; set; }
    }
} 
```

`Migrations.cs`：

```
namespace Address
{
    public class Migrations : DataMigrationImpl
    {
        public int Create()
        {
            SchemaBuilder.CreateTable("StatePartRecord", table => table
                .ContentPartRecord()
                .Column<string>("StateName")
                );

            return 1;
        }
        public int UpdateFrom1()
        {
            ContentDefinitionManager.AlterPartDefinition("State", part => part
                .Attachable());

            return 2;
        }

    }
} 
```

`Handlers/StatePartHandler.cs`：

```
namespace Address.Handlers
{
    public class StatePartHandler : ContentHandler
    {
        public StatePartHandler(IRepository<StatePartRecord> repository)
        {
            Filters.Add(StorageFilter.For(repository));
        }
    }
} 
```

服务/MyService.cs ：

```
namespace Address.Services
{
    public class AddressService : IAddressService
    {
    ...
     public void InsertState(Models.StatePartRecord state)
     {
         _stateRepository.Create(state);
     }
    ...
} 
```

现在在我的模块的书面服务类中，当我尝试创建一个项目并将其保存在数据库中时，它会抛出一个异常：

```
attempted to assign id from null one-to-one property: ContentItemRecord 
```

**请注意**，这`_stateRepository`是一个`IRepository<StatePartRecord>`类型化的注入对象。

什么是王？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:34:29.643

这是因为 ContentPartRecord 有一个 ContentItemRecord 属性，该属性指向与 ContentPartRecord 的 Part 附加到的内容项对应的 ContentItemRecord。

您不必直接管理零件记录：Orchard 服务（主要是 ContentManager）会为您完成这项工作。即使您想修改较低级别的记录，您也应该通过 ContentManager（通过注入 IContentManager）来执行此操作。仅当它们只是用于存储非内容数据的“普通”记录时才直接操作记录，即不是 ContentPartRecords。

```
 // MyType is a content type having StatePart attached
        var item = _contentManager.New("MyType");

        // Setting parts is possible directly like this.
        // NOTE that this is only possible if the part has a driver (even if it's empty)!
        item.As<StatePart>().StateName = "California";

        _contentManager.Create(item); 
```

# c++ - 是否可以使用自己编译的 Chromium Embedded 编译 CefSharp？

> ID：11880080
> 
> 赞同：4
> 
> 时间：2012-08-09T09:09:14.367
> 
> 标签：c++, cefsharp

您好 Stackoverflow 的人们，

我想知道是否可以使用自己的 Compiled Chromium Embedded 编译 CefhSharp 源代码？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:52:19.167

是的。这里的说明：

[https://github.com/ataranto/CefSharp/wiki/Building-CefSharp](https://github.com/ataranto/CefSharp/wiki/Building-CefSharp)

# gwt - 在 Cordova Phonegap 项目中实现 GWT 代码

> ID：11880090
> 
> 赞同：1
> 
> 时间：2012-08-09T09:10:03.157
> 
> 标签：gwt, cordova

我为 Web 应用程序创建了一个 GWT 示例项目。在 Cordova 的帮助下，我还创建了一个示例 Android Phonegap 应用程序。

GWT 基本上是编译并将 java 代码转换为 javascript。

对于Phonegap应用，使用html+css+js文件进行操作。

那么如何使用那个 GWT 项目并将其转换为 javascript 或 phonegap 插件..？

所以请，谁能描述我在phonegap应用程序中使用的GWT项目的流程和步骤。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:28:44.357

看看[http://www.m-gwt.com](http://www.m-gwt.com)

它是一个 GWT 框架，用于使用由 GWT 指导委员会成员之一构建的 GWT 构建移动应用程序。

您可能想阅读 mgwt 上的官方 GWT 博客：http: [//googlewebtoolkit.blogspot.de/2012/07/gwt-support-for-mobile-app-development.html](http://googlewebtoolkit.blogspot.de/2012/07/gwt-support-for-mobile-app-development.html)

# jquery - jquery获取子元素，除了来自内部元素的条件

> ID：11880094
> 
> 赞同：2
> 
> 时间：2012-08-09T09:10:17.487
> 
> 标签：jquery, children

我有

```
<ul>
    <li>
        <span class="except">None</span>
    </li>
    <li>
        <span>One</span>
    </li>
    <li>
        <span>Two</span>
    </li>
    <li>
        <span class="except">All</span>
    </li>
</ul> 
```

我想得到除了跨度与 class 之外的所有`li`内容。`<ul>``except`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:11:50.723

试试这个：

```
$('ul li').not(':has("span.except")') 
```

[演示](http://jsfiddle.net/ZbvDP/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:11:05.287

试试这个：

```
var $lis = $("ul li").filter(function() {
    return $(this).find("span.except").length == 0;
}); 
```

# android - GPS纬度、经度

> ID：11880097
> 
> 赞同：0
> 
> 时间：2012-08-09T09:10:28.767
> 
> 标签：android, google-maps, gps, maps

我有用于查找纬度、经度的 GPS 代码。TouchEvent 非常有用。在地图应用程序上显示纬度、经度是否有任何其他方式而不是 TouchEvent？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:15:28.690

您好，检查这是否对您有帮助:)

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locationManager;
    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    Location location =locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    updateWithNewLocation(location);
}
private void updateWithNewLocation(Location location) {
    String latLongString = "Unknown";
    String addressString = "No address found";
    TextView myLocationText;
    DecimalFormat df = new DecimalFormat("##.00");  
    myLocationText = (TextView)findViewById(R.id.myLocationText);
    if (location != null) {
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        latLongString = "Lat:" +  df.format(lat) + "\nLong:" +  df.format(lng);
        Geocoder gc = new Geocoder(GPS1Activity.this, Locale.getDefault());
        try {
            List<Address> addresses  = gc.getFromLocation(lat, lng, 1);
            if (addresses.size() == 1) {
                addressString="";
                Address address = addresses.get(0);
                addressString = addressString + address.getAddressLine(0) + "\n";
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++){
                    addressString = addressString + address.getAddressLine(i) + "\n";
                }
                addressString = addressString + address.getLocality()+ "\n";
                addressString = addressString + address.getPostalCode()+ "\n";
                addressString = addressString + address.getCountryName()+ "\n";
            }
        } catch (IOException ioe) {
            Log.e("Geocoder IOException exception: ", ioe.getMessage());
        }
    }       
    myLocationText.setText("Your Current Position is:\n" + latLongString + "\n" + addressString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:13:58.537

我认为它应该对你很有用

[http://www.bogotobogo.com/Android/android17MapView.php](http://www.bogotobogo.com/Android/android17MapView.php)

# c++ - 将临时对象保存在寄存器中以避免虚拟机中的额外存储/加载？

> ID：11880100
> 
> 赞同：2
> 
> 时间：2012-08-09T09:10:39.147
> 
> 标签：c++, c, cpu-registers, temporary-objects, vm-implementation

标题可能有点不清楚，所以在这里澄清一下：

问题：

```
a = b + c * d; 
```

在我的实现中解决了这两个“指令”

```
mul(c, d, temp)
add(b, temp, a) 
```

我目前正在使用临时对象来存储临时值，这要求将临时值存储在 RAM 中并在需要时再次获取它，这两者都不是真正需要的并且性能较低。

我正在用 C++ 实现 VM，所以我的问题是是否有一些**可移植**的方法来避免将临时值存储到主内存中，但将它们保存在实际的 CPU 寄存器中？

我已经使用`register`关键字进行了一些测试，但是从性能改进的不足来看，我会说编译器忽略了它。

作为最后的手段，我愿意进行平台特定的组装，但我对这个主题几乎一无所知，所以如果这是唯一可能的方法，欢迎提供好信息。我确实意识到我给出的这个例子是一个基本的例子，它很可能会遇到需要大量临时对象的情况，在这种情况下应该有一些方法来确定要使用和使用多少寄存器其余的内存存储...

也许有一些方法可以要求寄存器存储，如果编译器“用完”寄存器，自动将临时压入堆栈？就我对汇编的熟悉程度而言，您可以通过名称“寻址”特定寄存器，而我不清楚编译器究竟如何处理潜在的寄存器使用冲突......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:17:37.460

就像它一样`inline`，`register`只是对编译器的*建议。*它可能会或可能不会跟随它，以及它可能会或可能不会将“正常”变量存储为变量`register`。

C++ 标准说（7.1.1，第 3 段）：

> 寄存器说明符是对实现的提示，即如此声明的变量将被大量使用。[ 注意：提示可以被忽略，并且在大多数实现中，如果变量的地址被获取，它将被忽略。这种用法已被弃用（见 D.2）。——尾注]

在进行这种低级优化之前，您应该真正运行良好的分析以确定系统的瓶颈，看看您是否真的需要它。

另外，我敢打赌，如果你不是专业的 asm 程序员，编译器会比你更好地优化代码（没有冒犯任何人，我的意思是一般意义上的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:55:51.653

无论如何，寄存器不会像您认为的那样起作用。名称`R2`与地址并没有真正的不同`2`。当然，x86 程序集有更高级的名称，例如`ECX`，但这仍然是寄存器 2。

而且它们通常也不是物理的。像虚拟内存一样，寄存器名称是短暂的。现代处理器可能需要一段时间才能将寄存器值存储到 RAM。他们可以在回收寄存器之前等待它完成，但更快的解决方案是只回收名称并让旧的（现在未命名的）寄存器保持值直到写入完成。这意味着寄存器地址的数量可以低于物理寄存器的数量。（另一个好处是更新和更昂贵的 CPU 可以有更多的寄存器并且仍然与 ISA 兼容）。

也就是说，您的问题经典地解决了`FMA`- 融合乘法和加法。您的源代码不应转换为`mul`and `add`，而应转换为`mul_add(c,d,b,a)`. 这将允许 C++ 编译器发出 FMA 指令，完全绕过临时的需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T10:46:38.297

C 没有为您提供任何方法来控制函数调用之间是否将值保存在寄存器中。

您正在尝试优化错误的东西。解析字符串和执行仿真所需的操作将涉及许多低级处理器操作，例如加载字节、比较字节并在表中查找它们、根据比较结果进行分支、将例程参数压入堆栈、从例程，在符号表中查找标识符等等。从内存中简单地加载一个值只是这个过程的一小部分。

即使假设您已经分离了解析和仿真，因此解析生成了虚拟机语言中的代码，执行该代码所需的操作仍然涉及许多操作，例如从内存中加载指令的字节，解码这些字节，分支到代码以执行解码的指令，依此类推。

在用 C 或 C++ 或任何高级语言编写时，您可能希望的最好的结果是在一个编译单元（一个源文件加上它包含的头文件）中编写所有仿真代码，甚至可能在一个例程中，所以编译器的优化器可以看到所有这些并对其进行优化。在这种情况下，如果您有一个正在读取、解码和执行指令的主循环，编译器可能会看到临时值中的值被保留并在迭代之间重复使用，因此编译器可能决定将这些临时值存储在寄存器中.

但是，模拟虚拟机是一项大型任务，因此您的代码可能有很多很多的对象。对于仿真机器中的每个寄存器，它将至少有一个对象（可能是一个数组元素），加上机器状态其他方面的对象，以及用于解码指令和调度仿真代码的对象。最简单的虚拟机模拟器，仅适用于课堂练习，可能有足够少的对象，它们中的大多数都适合处理器寄存器。但是任何稍微逼真的虚拟机模拟器都会有太多的对象，以至于它们中的很少一部分可以保留在处理器寄存器中。在这种情况下，您最好将优化留给优化器，而不是自己尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:28:49.477

如果在编译时打开优化，如果有足够的可用寄存器，编译器应该自动为局部变量使用寄存器。检查生成的机器代码，看看你的情况是否如此。

# c# - 模拟 StreamReader

> ID：11880108
> 
> 赞同：3
> 
> 时间：2012-08-09T09:11:04.337
> 
> 标签：c#, unit-testing, c#-4.0, nunit, moq

我有一个使用 StreamReader 的方法，我想对其进行单元测试。我将 StreamReader 的创建拆分为一个单独的类并尝试模拟该类，但我的单元测试仍然给我错误。

用于抽象 StreamReader 的类/接口

```
public interface IPathReader
{
    TextReader CreateReader(string path);
}

public class PathReader : IPathReader
{
    public TextReader CreateReader(string filePath)
    {
        return new StreamReader(filePath);
    }
} 
```

包含 GetLastRowInFile 的类（我试图进行单元测试的方法）。

```
public interface IIOManager
{
    int GetLastRowInFile(string filePath, List<String> errorMessageList);
}

public class IOManager : IIOManager
{
    private IPathReader _reader;

    public IOManager(IPathReader reader)
    {
        this._reader = reader;
    }

    //...

    public int GetLastRowInFile(string filePath, List<String> errorMessage)
    {
        int numberOfRows = 0;
        string dataRow;

        try
        {
            using (StreamReader rowReader = (StreamReader)_reader.CreateReader(filePath))
            {
                while ((rowReader.Peek()) > -1)
                {
                    dataRow = rowReader.ReadLine();
                    numberOfRows++;
                }
                return numberOfRows;
            }
        }
        catch (Exception ex)
        {
            errorMessage.Add(ex.Message);
            return -1;
        }
    }
} 
```

StreamReader 不包含默认构造函数，所以我不相信我可以直接模拟它，因此需要从 GetLastRowInFile 中创建 StreamReader。

**问题**

1.  CreateReader 的返回类型应该是 TextReader 吗？
2.  在将返回的 TextReader 分配给 rowReader 之前，我是否需要将其显式转换回 StringReader？
3.  当我创建 IPathReader 接口的模拟并将 CreateReader 设置为返回 StringReader 时，当它被分配给 rowReader 时会发生什么。我认为不可能在相同的继承级别上投射一些东西？

[继承层次](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)

单元测试如下，它一直返回-1

```
 [Test]
    public void GetLastRowInFile_ReturnsNumberOfRows_Returns3()
    {
        string testString = "first Row" + Environment.NewLine + "second Line" + Environment.NewLine + "Third line";
        List<String> errorMessageList = new List<string>();

        Mock<IPathReader> mock = new Mock<IPathReader>();
        mock.Setup(x => x.CreateReader(It.IsAny<string>())).Returns(new StringReader(testString));

        IOManager testObject = new IOManager(mock.Object);

        int i = testObject.GetLastRowInFile(testString, errorMessageList);              //Replace with It.IsAny<string>()
        Assert.AreEqual(i, 3);
        Assert.AreEqual(errorMessageList.Count, 0);
    } 
```

我假设我缺少一些基本的东西，所以我真的很感谢你的帮助。谢谢你的时间。

**编辑**

测试方法：

```
 public void GetLastRowInFile_ReturnsNumberOfRows_Returns3()
    {
        StubGetLastRowInFile myStub = new StubGetLastRowInFile();
        List<String> errorMessageList = new List<string>();
        IOManager testObject = new IOManager(myStub);
        int i = testObject.GetLastRowInFile(It.IsAny<string>(), errorMessageList);
        Assert.AreEqual(i, 3);
        Assert.AreEqual(errorMessageList.Count, 0);
    } 
```

存根声明：

```
public class StubGetLastRowInFile : IPathReader
{
    public TextReader CreateReader(string path)
    {
        //string testString = "first Row" + Environment.NewLine + "second Line" + Environment.NewLine + "Third line";
        string testString = "04/01/2010 00:00,1.4314,1.4316";
        UTF8Encoding encoding = new UTF8Encoding();
        UnicodeEncoding uniEncoding = new UnicodeEncoding();

        byte[] testArray = encoding.GetBytes(testString);

        MemoryStream ms = new MemoryStream(testArray);

        StreamReader sr = new StreamReader(ms);

        return sr;
    }
} 
```

**编辑 2**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Windows.Forms;
using System.Data;
using System.Globalization;
using System.Collections;
using System.Reflection;
using System.ComponentModel;

namespace FrazerMann.CsvImporter.Entity
{
    public interface IPathReader
    {
        TextReader CreateReader(string path);
    }

    public class PathReader : IPathReader
    {
        public TextReader CreateReader(string filePath)
        {
            return new StreamReader(filePath);
        }
    }

public interface IIOManager
{
    Stream OpenFile(string path);

    int GetLastRowInFile(string filePath, List<String> errorMessageList);

    int GetNumberOfColumnsInFile(string filePath, List<string> errorMessageList);

    bool IsReadOnly(string filePath);
}

public class IOManager : IIOManager
{
    private IPathReader _reader;

    public IOManager(IPathReader reader)
    {
        this._reader = reader;
    }

    public Stream OpenFile(string path)
    {
        return new FileStream(path, FileMode.Open);
    }

    public int GetNumberOfColumnsInFile(string filePath, List<String> errorMessageList)
    {
        int numberOfColumns = 0;
        string lineElements;

        try
        {
            using (StreamReader columnReader = (StreamReader)_reader.CreateReader(filePath))
            {
                lineElements = columnReader.ReadLine();
                string[] columns = lineElements.Split(',');
                numberOfColumns = columns.Length;
            }
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
            numberOfColumns = -1;
        }
        return numberOfColumns;
    }

    public int GetLastRowInFile(string filePath, List<String> errorMessage)
    {
        int numberOfRows = 0;
        string dataRow;

        try
        {
            using (StreamReader rowReader = (StreamReader)_reader.CreateReader(filePath))
            {
                while ((rowReader.Peek()) > -1)
                {
                    dataRow = rowReader.ReadLine();
                    numberOfRows++;
                }
                return numberOfRows;
            }
        }
        catch (Exception ex)
        {
            errorMessage.Add(ex.Message);
            return -1;
        }
    }

    public bool IsReadOnly(string filePath)
    {
        FileInfo fi = new FileInfo(filePath);
        return fi.IsReadOnly;
    }
}

public interface IVerificationManager
{
    void ValidateCorrectExtension(string filePath, List<String> errorMessageList);

    void ValidateAccessToFile(string filePath, List<String> errorMessageList);

    void ValidateNumberOfColumns(string filePath, int dataTypeCount, List<String> errorMessageList);

    int ValidateFinalRow(int finalRow, string filePath, List<String> errorMessageList);

    void ValidateRowInputOrder(int initialRow, int finalRow, List<String> errorMessageList);

    void EnumeratedDataTypes(UserInputEntity inputs, List<String> errorMessageList);

    int GetProgressBarIntervalsForDataVerification(int initialRow, int finalRow, List<String> errorMessageList);
}

public class VerificationManager : IVerificationManager
{
    private IIOManager _iomgr;

    public VerificationManager(IIOManager ioManager)
    {
        this._iomgr = ioManager;
    }

    public void ValidateCorrectExtension(string filePath, List<String> errorMessageList)
    {
        if (filePath.EndsWith(".txt", StringComparison.OrdinalIgnoreCase) | filePath.EndsWith(".csv", StringComparison.OrdinalIgnoreCase)) { }
        else
        {
            errorMessageList.Add("Selected file does not have a compatable extension.");
        }
    }

    public void ValidateAccessToFile(string filePath, List<String> errorMessageList)
    {
        try
        {

            if (_iomgr.IsReadOnly(filePath) == true) { }
            else
            {
                errorMessageList.Add("Can not read/write to the specified file.");
            }
        }
        catch (Exception e)
        {
            errorMessageList.Add(e.Message);
        }
    }

    public void ValidateNumberOfColumns(string filePath, int userSpecifiedColumnCount, List<String> errorMessageList)
    {
        int numberOfColumnsInFile = _iomgr.GetNumberOfColumnsInFile(filePath, errorMessageList);

        if (userSpecifiedColumnCount != numberOfColumnsInFile) errorMessageList.Add("Number of columns specified does not match number present in file.");
    }

//**TEST APPLIES HERE**

    public int ValidateFinalRow(int finalRow, string filePath, List<String> errorMessageList)
    {
        int totalNumberOfRowsInFile = 0;

        totalNumberOfRowsInFile = _iomgr.GetLastRowInFile(filePath, errorMessageList);

        if (totalNumberOfRowsInFile != -1)
        {
            if (finalRow == 0)
            {
                return totalNumberOfRowsInFile;
            }
            else
            {
                if (finalRow > totalNumberOfRowsInFile)
                {
                    errorMessageList.Add("Specified 'Final Row' value is greater than the total number of rows in the file.");
                }
            }
        }
        return 0;
    }

    public void ValidateRowInputOrder(int initialRow, int finalRow, List<String> errorMessageList)
    {
        if (initialRow > finalRow)
        {
            errorMessageList.Add("Initial row is greater than the final row.");
        }
    }

    public void EnumeratedDataTypes(UserInputEntity inputs, List<String> errorMessageList)
    {
        inputs.EnumeratedDataTypes = new int[inputs.DataTypes.Count];
        try
        {
            for (int i = 0; i < inputs.DataTypes.Count; i++)
            {
                inputs.EnumeratedDataTypes[i] = (int)Enum.Parse(typeof(Enumerations.ColumnDataTypes), inputs.DataTypes[i].ToUpper());
            }
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
        }
    }

    public int GetProgressBarIntervalsForDataVerification(int initialRow, int finalRow, List<String> errorMessageList)
    {
        int progressBarUpdateInverval = -1;

        try
        {
            int dif = (finalRow - initialRow) + 1;
            progressBarUpdateInverval = dif / 100;

            if (progressBarUpdateInverval == 0)
            {
                progressBarUpdateInverval = 1;
            }
        }
        catch (Exception ex)
        {
            errorMessageList.Add(ex.Message);
        }
        return progressBarUpdateInverval;
    }
}

public class EntityVerification
{

    private VerificationManager _vmgr;

    public EntityVerification(VerificationManager vManager)
    {
        this._vmgr = vManager;
    }

    public void VerifyUserInputManager(UserInputEntity inputs, List<string> errorMessageList)
    {
        _vmgr.ValidateCorrectExtension(inputs.CsvFilePath ,errorMessageList);
        _vmgr.ValidateCorrectExtension(inputs.ErrorLogFilePath, errorMessageList);

        _vmgr.ValidateAccessToFile(inputs.CsvFilePath, errorMessageList);
        _vmgr.ValidateAccessToFile(inputs.ErrorLogFilePath, errorMessageList);

        _vmgr.ValidateNumberOfColumns(inputs.CsvFilePath, inputs.DataTypes.Count, errorMessageList);

        inputs.FinalRow = _vmgr.ValidateFinalRow(inputs.FinalRow, inputs.CsvFilePath, errorMessageList);

        _vmgr.ValidateRowInputOrder(inputs.InitialRow, inputs.FinalRow, errorMessageList);

        _vmgr.EnumeratedDataTypes(inputs, errorMessageList);

        inputs.ProgressBarUpdateIntervalForDataVerification = _vmgr.GetProgressBarIntervalsForDataVerification(inputs.InitialRow, inputs.FinalRow, errorMessageList);
    }
}
} 
```

**测试方法**（适用于 VerificationManager 类中倒数第三个方法）

```
 [Test]
    public void ValidateFinalRow_FinalRowReturned_Returns6()
    {
        List<String> errorMessageList = new List<string>();                             //Remove if replaced

        Mock<IIOManager> mock = new Mock<IIOManager>();
        mock.Setup(x => x.GetLastRowInFile(It.IsAny<String>(), errorMessageList)).Returns(6);

        VerificationManager testObject = new VerificationManager(mock.Object);
        int i = testObject.ValidateFinalRow(0, "Random", errorMessageList);             //Replace with It.IsAny<string>()  and It.IsAny<List<string>>()
        Assert.AreEqual(i, 6);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T09:13:28.667

目前尚不清楚为什么要在这里使用模拟。

是的，使用`TextReader`而不是要求`StreamReader`会给你更多的灵活性。很少有明确指定`StreamReader`为参数或返回类型的情况。

如果要为 a 提供测试数据`StreamReader`，只需创建一个`StreamReader`包装 a`MemoryStream`

当您返回 a`StringReader`时，它确实会在强制转换时（或在模拟框架本身中）导致异常。不幸的是，您的异常处理过于广泛，因此很难看到这个问题。你的`catch`块应该*只*捕获`IOException`- 如果确实有的话。（如果无法读取资源，您真的要返回 -1 吗？为什么不让异常冒泡？）捕获`Exception`应该非常罕见 - 基本上只在大操作的顶层（例如 Web 服务request) 以避免在进程可以继续其他操作时杀死进程。

# asp.net - 将所有参数的 aspx 文件重定向到同一页面

> ID：11880110
> 
> 赞同：0
> 
> 时间：2012-08-09T09:11:05.717
> 
> 标签：asp.net, url-rewriting, web-config

将所有这些请求发送到单个新页面的最简单、最简单的方法是什么？称它为 www.mydomain.com/page.html。提前致谢。

使用asp.net/web.config/url重写

我试过这个..但它不工作。

```
<rule name="nav rule" >
  <match url="^Nav\.aspx\/Page$" />
  <action type="Redirect" redirectType="Permanent" url="http://www.realestate-bigbear.com/featured-listings.html" />
</rule>
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FDefault.aspx%2FPageID%3D104742
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D1968245%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2125546%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2125559%26%3D%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2125562%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2125563%26%3D%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2133142%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2148897%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2164928%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2167997%26%3D%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPrint%3D1%26PropertyID%3D2205618%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2015534%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2158616%26%3D,,%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2164928%26%3D,,,,,%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2176853%26%3D,,%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2205618%26%3D%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2210074%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=%2FListNow%2FProperty.aspx%3FPropertyID%3D2212548%26%3D%26
http://www.realestate-bigbear.com/Nav.aspx/Page=/ListNow/Default.aspx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:17:51.837

# function - How do you write a powershell function that reads from piped input?

> ID：11880114
> 
> 赞同：7
> 
> 时间：2012-08-09T09:11:15.827
> 
> 标签：function, powershell, pipe, pipeline

SOLVED:

The following are the simplest possible examples of functions/scripts that use piped input. Each behaves the same as piping to the "echo" cmdlet.

As functions:

```
Function Echo-Pipe {
  Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    echo $_
  }

  End {
    # Executes once after last pipeline object is processed
  }
}

Function Echo-Pipe2 {
    foreach ($i in $input) {
        $i
    }
} 
```

As Scripts:

# Echo-Pipe.ps1

```
 Begin {
    # Executes once before first item in pipeline is processed
  }

  Process {
    # Executes once for each pipeline object
    echo $_
  }

  End {
    # Executes once after last pipeline object is processed
  } 
```

# Echo-Pipe2.ps1

```
foreach ($i in $input) {
    $i
} 
```

E.g.

```
PS > . theFileThatContainsTheFunctions.ps1 # This includes the functions into your session
PS > echo "hello world" | Echo-Pipe
hello world
PS > cat aFileWithThreeTestLines.txt | Echo-Pipe2
The first test line
The second test line
The third test line 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T15:32:39.187

您还可以选择使用高级功能，而不是上面的基本方法：

```
function set-something { 
    param(
        [Parameter(ValueFromPipeline=$true)]
        $piped
    )

    # do something with $piped
} 
```

很明显，只有一个参数可以直接绑定到管道输入。但是，您可以将多个参数绑定到管道输入上的不同属性：

```
function set-something { 
    param(
        [Parameter(ValueFromPipelineByPropertyName=$true)]
        $Prop1,

        [Parameter(ValueFromPipelineByPropertyName=$true)]
        $Prop2,
    )

    # do something with $prop1 and $prop2
} 
```

希望这可以帮助您学习另一个 shell。

# c# - How to optimize C# code if need display 32 stream media information in a form developed with C#

> ID：11880115
> 
> 赞同：1
> 
> 时间：2012-08-09T09:11:16.887
> 
> 标签：c#, forms, optimization, video-streaming

There are more than 32 stream media data needed to display in one form at the sametime. But I found that it is a great challenge, a lot of CPUs were used to process decoder task. So the form's displaying is bad, Is there anyone meet the same problem? Please help me.

# scorm - tincan 和 Scorm 有什么区别？

> ID：11880116
> 
> 赞同：11
> 
> 时间：2012-08-09T09:11:19.843
> 
> 标签：scorm, tin-can-api

tincan 和 Scorm 和有什么不一样？

我有一个要求，我们需要使用第三方内容服务器来支持 CMS 内容。

那么哪个是好的 Tincan 或 SCORM 呢？

这2个的优缺点是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T21:50:18.780

从概念上看：

SCORM 和 TINCAN 的主要目标是相同的，即跟踪学习者活动，但 TINCAN 以更通用的方式进行，SCORM 对您在 SCORM 2004 中可以跟踪的内容、完成和成功以及交互信息有更多限制，与 TINCAN您可以使用语句的新方法跟踪更一般的活动，您可以跟踪以下内容：

“Bob 完成了‘卡车驾驶培训 1 级’”或“Sally 经历了‘单人悬挂式滑翔’”</p>

此外，您可以跟踪的内容在 TINCAN 中是可扩展的（您可以定义新的动词、主语等）

从技术角度：

SCORM API 是为 Javascript 定义的，因此，SCO（课程）必须能够调用 Javascript 函数，TINCAN API 被定义为 RESTful Web 服务，因此，它为“连接较少”的环境做好了准备。在 SCORM 中的想法是课程是 Web 内容（html、flash 或其他，但在浏览器中查看），在 TINCAN 中，课程可以是任何东西、Web 内容或移动应用程序或桌面应用程序等。在 SCORM 中想法是课程托管在 LMS 中，在 TINCAN 中，它们可以在任何地方。

我从以下网址获取了示例语句： [http ://tincanapi.com/developers/tech-overview](http://tincanapi.com/developers/tech-overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T14:31:29.610

tincanapi.com 上有一个页面可以查看差异：[http](http://tincanapi.com/scorm-vs-the-tin-can-api/?utm_source=tincanapi_com&utm_medium=stack_overflow&utm_term=andrew&utm_content=page&utm_campaign=scorm_vs_tin_can?pmc=em-1) ://tincanapi.com/corm-vs-the-tin-can-api/ 。

看一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T17:38:33.680

最大的和改变游戏规则的不同不是它跟踪的内容和方式，而是它的运作方式。

简而言之，SCORM 是一个可执行（压缩）包，它上传到您的服务器并在浏览器上运行，通过 JavaScript 与您的服务器通信。

同时，Tincan 允许在现代和安全的跨站点 JSON 通信中进行相同/更高级别的通信。此外，它甚至不必是 HTML/Web 应用程序，而是可以是任何平台上的本机应用程序。

Tincan 能做什么，而 SCORM 不能

1.  没有其他人在您的站点源上运行的 JavaScript 编写的课件。但是，如果您真的愿意，您仍然可以托管自己。
2.  长时间跟踪，例如签到以参加课堂出勤。
3.  在移动应用中学习，在云端跟踪
4.  解锁非学习使用的可能性。例如，医疗跟踪，具有相同的协议，并且在 API 级别上一切仍然有意义。

# php - displaying index page based on current year and quarter

> ID：11880119
> 
> 赞同：0
> 
> 时间：2012-08-09T09:11:37.387
> 
> 标签：php, date, dynamic, indexing

this is basically a followup from my previous question. My index page show the current year and quarter (eg: 2012 quarter 3, july, august, september) with all its contents. My problem might be simple to you but im a php noobie so im getting a hard time in figuring out the logic and how to do it. my pages are programmed dynamically in the sense that each data is stored in their proper month and year, my only problem is how to display dynamically the homepage based on the current quarter and year. thanks! This is my current code that i got from one of the answers in my previous question but it only changes the quarter dynamically.

```
if(!isset($_GET['quarter']) && !isset($_GET['year'])){
     $now   = new DateTime();
    $month = (int)$now->format("m");

    if ($month >= 1 AND $month <= 3) {
       include_once('/firstq2012.php');
    }
    elseif ($month >= 4 AND $month <= 6) {
        include_once('/secondq2012.php');
    }
    elseif ($month >= 7 AND $month <= 9) {
        include_once('/thirdq2012.php');
    }
    else {
        include_once('/fourthq2012.php');
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:34:10.363

```
if(!isset($_GET['quarter']) && !isset($_GET['year'])){
        $now   = new DateTime();
        $number_of_division_per_year = 4;//you can use 1,2,4,6,12
        $q = (($now->format("m")/($number_of_division_per_year-1))+1).'_';
         include_once('/'.$q.'2012.php');
         //now $q = 3(representing 3rd quarter);
         //your file names should be like this 1_2012.php(first quarter),
         //2_2012.php(second quarter) etc..
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:15:17.550

由于您想让它也按年份动态显示，您可以这样做：

```
if (!isset($_GET['quarter']) && !isset($_GET['year'])) {
    $now = new DateTime();
    $quarter = (int)$now->format('m')/4;
    $year = (int)$now->format('YYYY');
    $filename = '/'.$quarter.'-'.$year.'.php';
    include_once($filename);
} 
```

但文件名应该是这样的：

4-2011.php、1-2012.php、2-2012.php、3-2012.php、4-2012.php

# android - 三星galaxy s2上的Android相机问题

> ID：11880130
> 
> 赞同：0
> 
> 时间：2012-08-09T09:11:59.117
> 
> 标签：android, android-intent, camera

我开发了一个小演示，我在其中使用 android 相机。我的演示是从相机拍照，然后按确定按钮将图像发送到我的服务器。

我已经在不同的设备上尝试了我的应用程序，除了一个提供三个按钮之外，所有设备都提供了三个按钮。好的，拍照后重拍并取消。但只有三星 Galaxy s2 提供了保存和删除按钮。

有谁知道可能是什么问题。因为我的应用程序在除此 samasung Galaxy 2 之外的所有设备上都能正常运行。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:30:46.387

直觉上，

*   删除 -> 重拍
*   保存->确定
*   返回硬件按钮 -> 取消

所以一切都应该没问题。否则，您能否告诉我们 Delete 等在 Ok 等方面代表什么？

# python - pyschools 主题 5

> ID：11880131
> 
> 赞同：1
> 
> 时间：2012-08-09T09:12:05.327
> 
> 标签：python, pi

根据印度数学家 Srinivasa Ramanujan 找到的公式编写一个函数`estimatePi()`来估计并返回 Pi 的值。它应该使用 while 循环来计算总和的项，直到最后一项小于 1e-15。估计 Pi 的公式如下： 根据 Ramanujam 的估计

（对不起，我无法上传图片）

```
def estimatePi():
import math
def factorial(n):
    if n == 0:
        return 1
    else:
        return n * factorial(n-1)
k=0
final=0
pi=0
while pi<1e-15:
    a=factorial(4*k)
    b=(1103+26390*k)
    c=factorial(k)
    d=c**4
    e=396**(4*k)
    f=2*math.sqrt(2)/9801
    final+=(a*b*f)/(d*e)
    k+=1
    pi=1/final
return pi 
```

而且，我的问题是： 预期答案是 =3.14159265359 我的答案是 =3.14159273001

我找不到我的错:(。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-26T03:12:41.147

我的朋友，您的代码有几处有问题。首先，在您的代码中，请记住变量 pi 的任何形状或形式都不等于 final。您正在计算一个不会迭代的 while 循环，因为 pi 显然比 1e-15 更大。所以简单地说，你的代码只是在 k=0 处计算你的公式，然后它就停止了。因此，这是一种可能的方法：

```
 def estimatePi():
        import math
        def factorial(n):
            if n == 0:
                return 1
            else:
                return math.factorial(n)
        k=1  # we want it at k=1 not 0 since we already have k=0 as Final
        Final=0.31830987844  #this is the value at k=0, the first value
        while Final>1e-15:   """ Note that 1e-15 is the limiting value and we want all b values that are less than 1e-15\. k=2 is the final k value where b has the last smaller number than 1e-15.""" 

            b=(2*math.sqrt(2)/9801)*(factorial(4*k)*(1103+26390*k))/((factorial(k)**4)*(396**(4*k)))

            Final=Final+b
            k=k+1
            return 1/Final
   print estimatePi()
#This gives you the number you are looking for ---3.14159265359. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:32:25.957

你的回答是正确的。浮点数[存在精度问题，](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)尤其是小数点后的位数较多；以及计算非精确值时。

从您的回答中可以看出，它已经正确估计了小数点后 5 位的 pi 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-04T01:54:09.140

这是我的代码。它返回与要求相同的结果：

```
 import math
    def factorial(n): 
        if n == 0:
            return 1
        else:
            return n * factorial(n-1) 
    def estimatePi():
        f=2*math.sqrt(2)/9801
        k=0
        RHS = 0
        while True:
            num = factorial(4*k)*(1103+26390*k)
            den = (factorial(k))**4 * 396**(4*k)
            a = f*num/den
            RHS += a
            if a < 1e-15: break 
            k+=1
        return 1/RHS 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T03:47:01.067

```
import math
def factorial(n):
if n == 0:
    return 1
else:
    return n * factorial(n-1)
def series_term(k):
a=factorial(4*k)
b=(1103+26390*k)
c=factorial(k)
d=c**4
e=396**(4*k)
return float(a*b)/(d*e)
def estimatePi():
k=0
final=0
while True:
    term = series_term(k)
    final += term
    if term < 1.0e-15:
        break
    else:
        k += 1
f=2*math.sqrt(2)/9801 
pi = 1.0/(final * f)
return pi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-14T18:22:15.330

您遇到的问题不在于您的代码，而在于您对所提出问题的理解。问题指出：

> 它应该使用 while 循环来计算总和的项，直到最后一项小于 1e-15。

使变量等于 1，将 while 循环的条件更改为 read:`while variable>=1e-15:`并在 while 循环中，将变量设置为等于 SUMMATION 的 LAST TERM。这应该会给你一个更准确的值。对于它的价值，这会产生正确的值，但`pyschools`仍然没有通过我的代码。

# java - Hibernate 中的子查询功能

> ID：11880132
> 
> 赞同：1
> 
> 时间：2012-08-09T09:12:06.573
> 
> 标签：java, hibernate

我正在尝试在我的 Hibernate 查询中使用子查询功能，但我是个白痴 :) 我的数据库表的结构是：

```
CREATE TABLE standard (
  id VARCHAR(12) NOT NULL ,
  title VARCHAR(99) NOT NULL ,
  description VARCHAR(999) NOT NULL ,
  revision VARCHAR(99) NOT NULL ,
  annotation TEXT NULL ,
  PRIMARY KEY (id) );

CREATE TABLE article (
  id VARCHAR(12) NOT NULL ,
  type INT(2) NOT NULL ,
  classTitle VARCHAR(99) NULL ,
  classDescription VARCHAR(999) NULL ,
  standard_id VARCHAR(12) NULL ,
  pubdate DATETIME NOT NULL ,
  title VARCHAR(99) NULL ,
  thumbnail TEXT NULL ,
  text TEXT NULL ,  
  PRIMARY KEY (id) ); 
```

我要做的是获取标准，其中包含具有指定类型的文章。我的想法是按类型过滤文章，然后按其标准 ID 对它们进行分组，然后通过其 ID 获取标准。

像这样的东西:)

```
DetachedCriteria subquery = DetachedCriteria.forClass(Article.class)
                             .add(Restrictions.eq("type", Constants.ARTICLE_TYPE_INTERPRETATION))
                              .setProjection(Projections.groupProperty("standardId"));

List<Standard> stds = (List<Standard>) session.createCriteria(Standard.class)
            .add(Restrictions.idEq(Subqueries.exists(subquery))).list(); 
```

但是这个查询给了我数据库中的所有标准，尽管子查询只返回我想要的标准。我知道问题出在哪里：我无法编写将通过 subqery 返回的 id 过滤标准的限制。

有人可以给我一个提示怎么做吗？

非常感谢 ！

翁德雷

**编辑：** 感谢@Rahul Agrawal

```
List<Standard> stds = (List<Standard>) session.createCriteria(Standard.class)
            .add(Subqueries.propertyIn("id", subquery)).list(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:40:22.800

添加一个 IN 条件。要添加“子查询中的 where 字段”，需要两个单独的条件。一个用于主（根）实体，另一个用于检索 IN 列表的值。以下检索具有产品库存水平为零的订单项目的订单。结果转换器用于仅检索每个实体的一行，而不是作为一对多关系连接的结果而具有多行。?

```
DetachedCriteria ids = DetachedCriteria.forClass(ProductStock.class, "stock");
ids.add(Restrictions.eq("stock.stockLevel", 0));
ids.setProjection(Property.forName("productId"));

DetachedCriteria criteria = DetachedCriteria.forClass(Order.class, "order");
criteria.createAlias("order.orderItems", "items", CriteriaSpecification.LEFT_JOIN);
criteria.add(Subqueries.propertyIn("items.productId", ids));
criteria.setResultTransformer(Criteria.ROOT_ENTITY); 
```

有关详细信息，请参阅：[http ://devgrok.blogspot.in/2008/11/hibernates-criteria-api.html](http://devgrok.blogspot.in/2008/11/hibernates-criteria-api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:17:42.997

我想你正在寻找这个..

```
List<Standard> stds = (List<Standard>) session.createCriteria(Standard.class)
            .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
            .add(Restrictions.idEq(Subqueries.exists(subquery))).list(); 
```

# android - SIP Android 应用，如何使用服务和活动

> ID：11880133
> 
> 赞同：4
> 
> 时间：2012-08-09T09:12:08.423
> 
> 标签：android, android-intent, android-activity, android-service, sip

我希望有人可以为我指出一些好的资源或正确的方向，或者甚至更好地抽出一些代码片段/伪代码来帮助我。

我是 android devel 的新手，我的任务是创建一个使用 sip 库进行/接收 sip 调用的应用程序。这个库是相当抽象的，所有的工作都与一个“电话”实例一起工作，我可以称之为 .rejectCall()、.answerCall() 等等。要获取电话的实例，我使用以下行：

```
AbtoPhone abtoPhone = ((AbtoApplication)getApplication()).getAbtoPhone(); 
```

这一切都很好，花花公子，但没有正确理解活动和服务我不知道如何将它变成一个应用程序。

我希望用户能够登录，在 sip 服务器上注册，然后让手机接听电话。

我希望它在进入后台时继续收听电话。当在后台时，我想弹出一个对话框，允许某人接听或拒绝电话，并且在接听时我希望初始活动唤醒（或者如果它被杀死，那么我希望它启动）并被带到前台，以便用户可以愉快地聊天。

我该怎么做才最好？目前，我在主要活动中获取 AbtoPhone，添加帐户，添加所有侦听器，然后当用户点击注册按钮时，它启动一个粘性服务，该服务获取自己的手机实例，使用相同的命令像之前一样。

然后，在服务中，我向 sip 客户端注册用户。现在，当我关闭主要活动时，它会继续运行并且它会收到一个调用，但是它会因异常而崩溃：

```
android.view.WindowManager$BadTokenException: Unable to add window 
-- token android.os.BinderProxy@4154ebb0 is not valid; 
is your activity running? 
```

我知道我的问题是调用该服务的原始活动已死，我正试图唤醒它。但我只是不知道如何正确地做到这一点。

我知道服务和活动是一个重复的问题，我环顾四周阅读教程，但是我看不到如何正确地将它们应用到我的案例中，只是希望有人能够说 Do X，启动服务，通过这个，什么时候你接到一个电话，Y 和 VOILA！但是任何帮助都会非常感激，非常感谢！！！

干杯，

DJOodle

**>>>> 编辑**

好的，我已将 AbtoPhone 的所有处理转移到服务中。当我接到电话时，我会调用 MainActivity，将其绑定到服务，这样我就可以调用正确的方法来接听电话。

这很好，它可以工作，但这意味着我有一个始终在运行的持久服务，我觉得这是一件坏事，坏事。我怎样才能让 AbtoPhone 的实例在不消耗手机资源的情况下监听来电？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:05:14.293

这是一个很大的话题。我认为你应该给开源应用程序 Sip-Droid 一个机会。所以你可以使用任何与之相关的东西。

```
http://code.google.com/p/sipdroid/ 
```

这是一个基于 Sip 的应用程序，可以满足您的所有要求。我认为您可以使用源代码并从中重新开发您想要的任何东西。此应用程序使用 JNI，它是比 Sip 更复杂的主题。所以在这个应用程序中使用所有的 JNI，你会发现很多你可以使用的库，并使工作更快。

# java - Web 服务客户端身份验证导致 Tomcat 中出现异常

> ID：11880134
> 
> 赞同：0
> 
> 时间：2012-08-09T09:12:15.483
> 
> 标签：java, web-services, tomcat, ssl, https

我是基于 Https/SSL 的配置的新手。我正在尝试调用启用了客户端身份验证的简单计算器 Web 服务。以下是我的 tomcat(1) 的 server.xml 中的连接器条目

```
 <Connector clientAuth="true" port="8443" minSpareThreads="5" maxSpareThreads="75"
   enableLookups="true" disableUploadTimeout="true"
   acceptCount="100" maxThreads="200"
   scheme="https" secure="true" SSLEnabled="true"
   keystoreFile="C:\cert\server.jks"
   keystoreType="JKS" keystorePass="password"
   truststoreFile="C:\cert\server.jks"
   truststoreType="JKS" truststorePass="password"
   SSLVerifyClient="require" SSLEngine="on" SSLVerifyDepth="2" sslProtocol="TLS"
   keyAlias="servercert"
/> 
```

我正在使用 MyEclipse 生成的客户端来执行此操作（在启用 SSL 之前生成，然后将 wsdl url 更改为指向新的 HTTPS 连接）。我使用的 WSDL url 是：

```
https://localhost:8443/MyService/CalculatorPort?wsdl 
```

我在另一个 tomcat(2) 中托管这个客户端。这是 tomcat(2) 的 server.xml 条目：

```
<Connector port="8444" protocol="HTTP/1.1" SSLEnabled="true"
       maxThreads="150" scheme="https" secure="true"
       clientAuth="false" sslProtocol="TLS"            
           keystoreFile="C:\Cert\servcert"
           keystorePass="password"
           keyAlias="servcert"
/> 
```

但是现在当我调用 Web 服务时，它给了我以下错误

```
javax.xml.ws.WebServiceException: Failed to access the WSDL at: https://localhost:8443/MyService/CalculatorPort?wsdl. It failed with: 
    Software caused connection abort: recv failed.
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(RuntimeWSDLParser.java:162)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:144)
    com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:263)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:226)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:174)
    com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:104)
    javax.xml.ws.Service.<init>(Service.java:56)
    com.myeclipseide.ws.CalculatorService.<init>(CalculatorService.java:54)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:86)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

笔记：

1.  当仅启用服务器端 SSL 并禁用客户端身份验证时，它工作正常。
2.  我已将 JDK 的 cacert 密钥库中的服务器证书和客户端证书作为可信证书导入。
3.  如果我在浏览器中导入证书，即使启用了客户端身份验证，我也可以访问 WSDL。但是当我通过启用客户端身份验证的tomcat（2）中托管的客户端访问它时，它不起作用。

在我看来，客户端没有使用我配置为 tomcat(2) 的 server.xml 一部分的密钥库。但我不确定。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T07:20:55.210

我想出了解决这个问题的方法。基本上托管客户端的tomcat（2）没有使用我想要的证书。解决方案是在tomcat启动期间传递以下JVM变量

*   javax.net.ssl.keyStore
*   javax.net.ssl.keyStorePassword

这些文档可以很容易地在 google 上找到。它们可以在 catalina.bat/catalina.sh 文件中配置为 JAVA_OPTS

# php - 如果变量用双引号括起来，为什么会出现错误消息？

> ID：11880135
> 
> 赞同：0
> 
> 时间：2012-08-09T09:12:21.753
> 
> 标签：php

看看下面的代码

```
<?php
//The array is storing a blog entry in it
$entry = array ('title' => 'sample title',
        'date' => 'August 9, 2011',
        'author' => 'daNullSet',
        'body' => 'I shall become a web developer IA',);
echo "The title of the blog is ".$entry['title']."<br />";
?> 
```

上面的代码执行得很好，但是当我将 $entry['title'] 用双引号括起来并在 echo 语句中与其他字符串连接时，它会返回以下解析错误。

> 解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，在第 7 行的 C:\xampp\htdocs\php-ex\test.php 中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING)

你能指导一下错误的原因吗？我对编程完全陌生。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:21:35.947

为了在字符串中使用关联数组中的值，您需要使用[“复杂（卷曲）语法”](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)。实际上，这意味着您需要将其包装在 中`{}`，如下所示：

```
echo "The title of the blog is {$entry['title']}<br />"; 
```

如果您尝试直接在双引号字符串中使用“复杂”变量而不使用大括号，您将收到您报告的解析错误。

[彻底阅读整页](http://php.net/manual/en/language.types.string.php)内容是非常值得的，这样您就知道什么是允许的，什么是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:18:48.503

```
<?php
//The array is storing a blog entry in it
$entry = array ('title' => 'sample title',
        'date' => 'August 9, 2011',
        'author' => 'daNullSet',
        'body' => 'I shall become a web developer IA');
echo "The title of the blog is '".$entry['title']."'<br />";
?> 
```

请试试这个

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:24:16.813

据我所知，导致错误的原因是编译器总是检查开始和结束语法，如 {}、()、""、''。当你开始一个语法时，你应该给它一个结束标记。如果我正确理解您的问题，您的问题是您想将“添加到”中。您可以使用 \" 转义编译器以将其作为语法读取。

```
echo "The title of the blog is \"".$entry['title']."\"<br/>"; 
```

# eclipse - aptana 3 (eclipse?) 内存使用量快速增长

> ID：11880138
> 
> 赞同：0
> 
> 时间：2012-08-09T09:12:31.440
> 
> 标签：eclipse, eclipse-plugin, aptana

我使用 Aptana 3（独立版本），但是当我在大型 javascript 文件（如库）中使用它时遇到问题。当我编码时内存使用量迅速增长并且变得滞后，在任务管理器中它从近 150mb 增长到 600+mb，然后它变得无法使用，所以我必须关闭并重新打开 Aptana。我用谷歌搜索来解决我的问题，但没有任何用处。是否可以更改某些参数以调整内存使用情况？（也许在 600+mb 它交换？）这是我从诊断测试中得到的

```
Host OS: Windows 7
JRE Version: 1.6.0_24
Version: 3.2.1.201207261642
VM Arguments: -Xms40m
-Xmx512m
-Declipse.p2.unsignedPolicy=allow
-Declipse.log.size.max=10000
-Declipse.log.backup.max=5
-Djava.awt.headless=true
-XX:MaxPermSize=256m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:02:22.063

Aptana 基本上是一个 Eclipse RCP，因此您可以查看[这个问题](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)以获取建议。

# graphical-logo - Google Olympic 涂鸦游戏是如何制作的？

> ID：11880139
> 
> 赞同：3
> 
> 时间：2012-08-09T09:12:31.877
> 
> 标签：graphical-logo, google-doodle

我只是想知道谷歌是如何制作它们的。它们是图像还是 Flash？如果是图像，是什么让它们成为可玩的游戏？

即，这些例子：

[跨栏 2012](http://www.google.com/doodles/hurdles-2012)

[篮球 2012](http://www.google.com/doodles/basketball-2012)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:05:42.983

我相信它们是使用 HTML5 编写的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-17T06:22:23.063

我认为它们是用[https://scratch.mit.edu](https://scratch.mit.edu)编写的，然后转换为 html5。

# php - PHP，禁用自动输入[]到数组

> ID：11880142
> 
> 赞同：3
> 
> 时间：2012-08-09T09:12:37.307
> 
> 标签：php, html, forms, post

如果您发布一个带有名称以 [] 结尾的输入的 html 表单，php 会自动将这些 $_POST 值放入一个数组中。

例如，没有括号：

```
<input name="email" value="a" />

var_dump($_POST["email"])    
//string 'a' (length=1) 
```

带括号：

```
<input name="email[]" value="a" />
<input name="email[]" value="b" />

var_dump($_POST["email"])    
//array
//  0 => string 'a' (length=1)
//  1 => string 'b' (length=1) 
```

我的问题是，以前我不知道这一点，所以我一直在编写我的网站，假设 $_POST 变量始终是字符串类型。自然地，我执行标准输入验证，但只假设变量已经是字符串。

那么，如果黑客接受了我的一个正常输入，例如`<input name="email" .../>`，然后用括号将其发布，该怎么办。然后我获取 $_POST["email"] 的代码将是一个数组！

我可以想象在某些情况下这将是一个安全问题，例如，startWith-function 可以在字符串和数组上工作。我还没有研究它的全部含义，我也不想，我只想完全禁用该功能，这样我就可以相信所有 $_POST 变量始终是字符串。

有什么方法可以全局禁用此功能，或者是查找-替换所有并在 $_POST 的每次访问前添加（字符串）-cast 的唯一选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:20:04.730

您可以循环遍历 POST 数组，并以这种方式修复它们。但是，既然你说你不打算需要这个，为什么不循环 _POST 数组，检查是否有非字符串，然后抛出异常？无需给假设的黑客一个很好的后备或解决方法:)

```
foreach($_POST as $val) {
   if (!is_string($val)) {
      throw new InvalidArgumentException('POST arguments should be strings only');
   }
} 
```

我发现处理此类问题的最佳方法是严格，并在客户（浏览器/邪恶的家伙）明显乱搞东西的情况下抛出异常；）

# php - file_get_content() 是否返回与原始文件相同的二进制数据

> ID：11880147
> 
> 赞同：0
> 
> 时间：2012-08-09T09:12:48.250
> 
> 标签：php, blob, file-get-contents

问题在标题中。几天以来，我在显示 blob 图像时遇到了问题。
当我查看显示图像的二进制数据时（显示有损坏的符号，实际上它们并没有真正显示），我得到不同的原始数据形式原始 .jpg 和生成的 file_get_content() 二进制文件。
这是昨天的相关帖子或更多解释。
-->[用 php/html 显示 mysql blob 图像](https://stackoverflow.com/questions/11868343/mysql-blob-image-displaying-with-php-html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:16:21.047

简短的回答是：是的。没有理由内容应该不同。你的问题可能出在另一座城堡里。

# c# - WPF DataGrid 对虚拟化属性进行排序

> ID：11880149
> 
> 赞同：0
> 
> 时间：2012-08-09T09:13:03.247
> 
> 标签：c#, wpf, sorting, datagrid

让我直说吧。我有一个带有几个设置列的 DataGrid，如下所示：

```
<ctrl:DataGridWithFooter 
      FooterRowsCount="1" 
      x:Name="MyGrid" 
      CanUserDeleteRows="False" 
      CanUserSortColumns="True"
      AutoGenerateColumns="False" 
      ItemsSource="{Binding Path=Model, UpdateSourceTrigger=PropertyChanged}" 
      IsEnabled="{Binding Path=Idle}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Level" 
                                        Binding="{Binding Path=Name, Mode=OneWay}" />
<!--Snip-->
</ctrl:DataGridWithFooter> 
```

以及您所期望的模型。但是，当应用程序运行时，我会在模型的列表中添加反映元素的新列，所以我得到一个绑定表达式，如

```
<DataGridTextColumn Binding="{Binding Path=Attributes[0]}" /> 
```

或类似的东西。单独显示和排序很好，但我遇到了一个问题，我需要强制将我的总数排到底部，我最终需要使用我在网上找到的一些代码才能使其正常工作（[可在此处获得, 像宣传的那样工作](http://pro.ingens.ru/2012/07/cwpf-datagrid-footer-row.html))。但是，我发现他在这个新的自定义 DataGrid 类中的排序类因我的列表元素绑定而崩溃。我的问题是，我将如何修改这个构造函数

```
public PropertyAccessor(Type targetType, string property) {
    IsList_ = false;
    mTargetType = targetType;
mProperty = property;

    PropertyInfo propertyInfo =
        targetType.GetProperty(mProperty);

    mCanRead = propertyInfo.CanRead;
    mCanWrite = propertyInfo.CanWrite;
    mPropertyType = propertyInfo.PropertyType;
} 
```

为了获得我需要能够反映和排序列表元素的所有信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:11:21.973

我很高兴看到您使用了我的示例（这是我的博客）。实现这一点的方法之一是为特定属性创建一个公共 getter。可能不是很方便。因为**PropertyAccessor**需要属性。或者可能是解析“属性[0]”首先获取属性的值，然后获取索引为[0]的元素

我还决定为此任务创建另一个解决方案。主要思想是为数据网格创建一个包装器。通常它看起来像：

```
<StackPanel>
    <DataGrid/>
    <Footer/>
</StackPanel> 
```

页脚是一个带有文本框的**网格**（它可以包含多行）。**此 Grid 中的列**与**DataGrid**的列同步。它还允许使用合并的单元格创建页脚。在此解决方案中，您无需进行任何排序操作。它将由**DataGrid**完成。

[这是它的样子](https://stackoverflow.com/questions/11870274/wpf-toolkit-datagrid-space-after-the-last-row-on-scrolling)。稍后我将在博客上分享代码。你可以在我的博客上联系我。

# javascript - 使用jquery在最后一张图片之后附加html

> ID：11880150
> 
> 赞同：1
> 
> 时间：2012-08-09T09:13:06.753
> 
> 标签：javascript, jquery

如何在最后一个 img 之后附加以下 html：

```
//create the icon
$('div.lookup-image-wrapper > div img').append('<div class="icon"></div>'); 
```

这是我的标记：

```
<div class="lookup-image-wrapper" style="text-align: center">

        <div class="divProductPic" id="divProductPic26039">
            <img alt="200 D" border="0" id="ProductPic26039" name=
            "ProductPic26039" onclick="popuplarge_26039()" src=
            "images/Product/medium/26039.jpg" style=
            "cursor:hand;cursor:pointer;" title=
            "Click here to view larger image">
        </div>

    <img alt="Show Picture 1" border="0" class="image-nav" onclick="_(1);" src="images/PRODUCT/icon/26039_1_.jpg"
        style="cursor:hand;cursor:pointer;">
    <img alt="Show Picture 2" border="0" class="image-nav" onclick="_(2);" src="images/PRODUCT/icon/26039_2_.jpg"
         style="cursor:hand;cursor:pointer;"><img alt="Show Picture 3" border="0" class="image-nav" onclick="setcolorpicidx_26039(3);" src=
        "images/PRODUCT/icon/26039_3_.jpg" style="cursor:hand;cursor:pointer;">

            <!--[#### THE DIV ICON NEEDS TO GO HERE #####]-->

     <div id="prodEmbiggen">
        <a href="javascript:void(0);" onclick=""><img align="absmiddle" alt="" border="0" src="showlarger.gif" title=
          "Click for larger image"></a>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:14:11.260

试试这个：

```
$('div.lookup-image-wrapper > img:last').after('<div class="icon"></div>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:15:31.993

要在最后一张图片之后附加内容，请使用最后一个选择器 (:last)

```
$('div.lookup-image-wrapper > div img:last').append("your content"); 
```

如果你有很多内容要附加，你可以在这里缩小 HTML [http://www.willpeavy.com/minifier/](http://www.willpeavy.com/minifier/)

# wordpress - Wordpress 自定义搜索结果页面

> ID：11880152
> 
> 赞同：0
> 
> 时间：2012-08-09T09:13:15.010
> 
> 标签：wordpress

我正在尝试创建一个自定义搜索结果页面，该页面不仅可以搜索标题，还可以通过自定义字段进行搜索。我一直在浏览法典中的“创建搜索页面”页面，但由于某种原因，完成的搜索结果使用了新的**searchpage.php**代码。

我所做的是使用以下代码创建 searchform.php 页面：（请注意我已经添加了 page_id=8057，因为我已经使用新的搜索模板添加了一个页面。）

```
 <form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>?page_id=8057">
  <div><label class="screen-reader-text" for="s">Search for(custom):</label>
    <input type="text" value="" name="s" id="s" />
    <input class="sprites" type="submit" id="searchsubmit" value="Search" />
  </div>
</form> 
```

我已经使用法典给我的默认代码创建了 searchpage.php：

```
<p>Search Results:</p><BR>
<?php get_search_form(); ?>
       <?php
global $query_string;

$query_args = explode("&", $query_string);
$search_query = array();

foreach($query_args as $key => $string) {
    $query_split = explode("=", $string);
    $search_query[$query_split[0]] = urldecode($query_split[1]);
} // foreach

$search = new WP_Query($search_query);
?>
<?php
global $wp_query;
$total_results = $wp_query->found_posts;
?> 
```

我还没有对代码和查询进行调整，但我想首先解决搜索表单没有向我显示 searchpage.php 结果但链接到默认搜索结果页面的问题。例如，在我完成搜索后，我收到了这个 url：

```
http://localhost/?s=mysearchquery 
```

任何想法是如何开始的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:59:57.107

searchpage.php 是替代搜索页面，如果要创建搜索结果页面，则需要创建 search.php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T18:31:35.667

您必须在 searchpage.php 文件的顶部添加以下行

```
/*
 * Template Name: Search Results Page
 * Description: Whatever you want to write here.
 */ 
```

现在，转到管理面板并创建一个新页面并为其指定标题并从右侧的页面属性部分分配“搜索结果页面”模板。不要在页面中添加任何内容。

现在，尝试搜索，它应该可以工作。

> **注意**：如果用户在搜索框中“输入”了某些内容并按回车键，他将不会登陆此页面。默认情况下，此操作会将他重定向到 search.php 页面。只有当用户点击带有 URL 的“超链接”时，您才能登陆 searchpage.php

```
<?php echo home_url( '/' ); ?>?page_id=8057 
```

# php - 复制列 - Excel / OpenTBS

> ID：11880153
> 
> 赞同：1
> 
> 时间：2012-08-09T09:13:19.977
> 
> 标签：php, xlsx, opentbs

有什么方法可以复制excel中的列，使用openTBS，而不是复制单元格..

我试图发布一些图片来向你展示我的问题，但一些预防机制并没有让我这样做。

我试图为 [base_sub2.module;block=c] 中的每个值复制一列，但这只是创建新单元格而不是整个列..

任何帮助将不胜感激，对我的英语感到抱歉。最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:39:57.123

当前版本的 OpenTBS 不可能复制 XLSX 工作表中的完整列而不是简单单元格。

行可以，但列不行。这是因为 XLSX 工作表的 XML 数据被组织为行和单元格。列是地标，但没有实际实体。

扩展列的解决方案是使用几个块，例如 package.json 中给出的 XLSX 示例。

# ajax - 当我可以尝试将特殊字符作为数据传递时，Ajax 调用失败

> ID：11880154
> 
> 赞同：0
> 
> 时间：2012-08-09T09:13:22.453
> 
> 标签：ajax, jquery, jquery-mobile

这是我用来使用 Ajax 调用添加注释的代码。

```
<html>
<head>
<meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1"/> 
   <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-    1.1.0-rc.1.min.css" />        
   <script type="text/javascript" charset="utf-8" src="js/cordova-1.5.0.js">
   </script>
   <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
   <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
   <script src="js/global.js" type="text/javascript"></script>
</head>
<script>
    var msgId = window.localStorage.getItem("clickedId");

    processLogInData = function(){
                var comment = ($("#comment").val());
                temp =  'messageId=' + msgId +'&';
                temp += 'uniqueId=' + device.uuid + '&';
                temp += 'comments=' + comment;  
                var s= global1 +"rest/Comment/createCommentBO?"+temp;

                $.ajax({
                    url:global1 +"rest/Comment/createCommentBO?",
                    data: temp,
                    dataType: 'xml',
                    timeout: 10000,
                    async: false,
                    cache: false,
                    type: 'POST',
                    success: function(data){
                        if($(data).find("isException").text() == "false")
                        {
                            //alert('No Exceptions found');
                                                                onTrue();

                        }
                        else
                        {
                            onFalse();
                        }
                    },
                    error:function(XMLHttpRequest,textStatus, errorThrown) {
                              //  alert("Error status :"+textStatus);
                              //  alert("Error type :"+errorThrown);
                                alert("Error message :"+XMLHttpRequest.responseXML);
                                $("#messagelist").append( XMLHttpRequest.responseXML);
                                                                       } 
                     });
              }
                     function onTrue(){
                                location.replace("comments.html");
                                  }   
                    function onFalse()
                              {
                                  console.log("onFalse Method");
                                  alert("Unable to create Comment!");
                                  }
                    function cancel(){
                        location.replace("comments.html");
                    }
</script>
<body>
    <div data-role="page" data-theme="a">
         <div data-theme="a" data-role="header">
           <img src="images/logo_header.png" alt="Orange"/>
        </div>
        <div data-role="content">
           <form method="post" name="login" data-ajax="false">
           <label for="textarea"><h3><u>Add Comment</u> : </h3></label>
           <textarea cols="15" rows="15" name="textarea" id="comment"></textarea>
           </form>
           <div>
<div class="ui-block-a"><button type="submit" data-theme="d" onclick="cancel();" data-mini="true" data-icon="delete">Cancel</button></div>
<div class="ui-block-b"><button type="submit" data-theme="a" onclick="processLogInData();" data-mini="true" data-icon="check" >Submit</button></div>
     </div>
           </div>
          </div> 
</body> 
```

当我输入特殊字符作为内容并将其传递给 Ajax 调用时，我收到一个错误:( Ajax 调用在没有任何特殊字符的情况下工作正常......有没有办法在将数据传递给 ajax 调用之前对其进行编码？？？请帮我解决这个...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:57:01.727

(1.)要么你应该把你的数据放入一个表单并序列化它然后发送到服务器(2.)第二种方法是你可以使用js内置函数encodeURIComponent()。

# cakephp - 我对数据库表进行了一些更改。我再次烘焙了我的模型，但更改没有反映在应用程序中

> ID：11880155
> 
> 赞同：2
> 
> 时间：2012-08-09T09:13:25.090
> 
> 标签：cakephp

当您对数据库表进行一些更改时，您的 CakePHP 人员会做什么。烘焙整个应用程序后，我在表中添加了一个字段，并再次烘焙了该模型。但是在控制器中没有做任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:33:41.437

将数据库的变化反映到我们的应用程序有两种方式：

1.  删除所有临时模型文件`app/tmp/cache/models/*`。
2.  将调试值从`2`to`0`更改`0`为`2`in`app/Config/core.php`

这种技术一直对我有用。

# android - 由于服务器响应时间延迟，如何处理“强制关闭”

> ID：11880162
> 
> 赞同：0
> 
> 时间：2012-08-09T09:13:41.303
> 
> 标签：android, multithreading, android-activity, forceclose

我有一个 android 应用程序，其中有许多请求和响应发生在服务器之间的场景。例如：`login`即`authentication`。当用户输入`username`and`password`时，凭据将根据服务器响应的凭据进行验证。

但有时会出现由于网络慢导致响应迟到，android弹出强制关闭对话框，非常尴尬。

我在想有没有办法在某个单独的线程中分离到达服务器的代码，直到它得到我的响应。我可能会显示进度条而不是强制关闭。这是一个很好的解决方案吗？

示例代码：

```
//this code will be called when user presses Login button on UI
public void authenticate(View view) {
      //the logic for authentication
      if(authentication==true){
         //go to home page
        }
} 
```

在上面的代码中，如何分离身份验证逻辑，以便在响应按预期延迟时不会发生强制关闭。

我也希望有任何其他更好的方法来解决这种强制关闭的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:16:49.870

不要在主线程中包含任何需要时间执行的任务。您应该在不同的线程中执行 httpCommunication。它将避免此 ANR。

文档所说的 >> *在 Android 中，应用程序的响应性由 Activity Manager 和 Window Manager 系统服务监控。当检测到以下情况之一时，Android 将显示特定应用程序的 ANR 对话框： 在 5 秒内没有响应输入事件（例如按键、屏幕触摸） BroadcastReceiver 在 10 秒内没有完成执行*

阅读专[为响应性设计和避免 ANR而创建的文档](http://developer.android.com/guide/practices/responsiveness.html)

您也可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:46:33.857

您可以使用`AsyncTask`或[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

同时在 UI 上显示进度对话框。提供一个回调函数，一旦收到来自服务器的响应，就会调用该回调函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:15:50.450

使用下面的示例代码来做一个`login`过程。您可以使用它`AsyncTask`来执行登录过程。

类`LoginActivity`，它使用`AsyncTask`.

*   `Login`单击按钮时，我`executing`是`AsyncTask`.
*   在登录过程中，这将显示一个`ProgressDialog`
*   流程完成后，关闭`ProgressDialog`并向用户显示状态消息

班级代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity {

    private Button login_Button = null;
    private EditText userNameText = null;
    private EditText passwordText = null;
    private String uName = "";
    private String pass = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_login);
        login_Button = (Button) findViewById(R.id.cmdDoLogin);

        userNameText = (EditText) findViewById(R.id.editTextUserName);
        passwordText = (EditText) findViewById(R.id.editTextPassword);

        login_Button.setOnClickListener(new OnClickListener() {

            public void onClick(View paramView) {
                uName = userNameText.getText().toString().trim();
                pass = passwordText.getText().toString().trim();
                if (uName.equals("") || pass.equals("")) {
                    Toast.makeText(LoginActivity.this,
                            "Fill both username and password fields",
                            Toast.LENGTH_SHORT).show();

                } else {
                    new LoginActivity.DoLoginProcess().execute(); // calling the AsyncTask here
                }
            }
        });

    }

    private class DoLoginProcess extends AsyncTask<Void, Void, Integer> {

        ProgressDialog pd = null;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pd = new ProgressDialog(LoginActivity.this);
            pd.setTitle("Logging In...");
            pd.setMessage("Please wait...");
            pd.setCancelable(false);
            pd.show();

        }

        @Override
        protected Integer doInBackground(Void... params) {
            int loginStatus = 0 ; // treat this as loginStatus. 0 = login failed; 1=login success. You can return this value to onPostExecute function

            //*********************************************
            // do login process over internet here. Hope you already have the code to do the login process over internet.
            //*********************************************         

            return loginStatus;
        }

        @Override
        protected void onPostExecute(Integer status) {
            super.onPostExecute(status);
            pd.dismiss(); // dismiss the progress dialog

            if (status == 0) { // login failed
                AlertDialog alertDialog = new AlertDialog.Builder(
                        LoginActivity.this).create();
                alertDialog.setTitle("Error");
                alertDialog.setMessage("Login failed");
                alertDialog.setButton("OK",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                LoginActivity.this.finish();
                                dialog.cancel();
                            }
                        });
                alertDialog.setIcon(android.R.drawable.ic_dialog_info);
                alertDialog.show();
            } else if(status == 1) { // login success
                AlertDialog alertDialog = new AlertDialog.Builder(
                        LoginActivity.this).create();
                alertDialog.setTitle("Success");
                alertDialog.setMessage("Login success");
                alertDialog.setButton("OK",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                LoginActivity.this.finish();
                                dialog.cancel();
                            }
                        });
                alertDialog.setIcon(android.R.drawable.ic_dialog_info);
                alertDialog.show();
            }
        }
    }

} 
```

`test_login`布局 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loginbglayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp" >

    <TableLayout
        android:id="@+id/holderLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >

        <TableRow
            android:id="@+id/row1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <TextView
                android:id="@+id/textViewUserName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:gravity="right"
                android:text="UserName"
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/editTextUserName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/row2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:gravity="center" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:gravity="right"
                android:text="Password"
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/editTextPassword"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:inputType="textPassword" />
        </TableRow>

        <TableRow
            android:id="@+id/row3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:gravity="center" >

            <View
                android:layout_width="0dp"
                android:layout_height="2dip"
                android:layout_weight="1"
                android:focusable="false" />

            <Button
                android:id="@+id/cmdDoLogin"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="Login" >
            </Button>
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

# html - 设置表格单元格的宽度

> ID：11880164
> 
> 赞同：-1
> 
> 时间：2012-08-09T09:13:43.903
> 
> 标签：html, css

我在选择表格单元格时遇到问题。

我将表格单元格定义为具有以下测量值：

```
 cell 1: 220px
 cell 2: 315px
 cell 3: 265px
 cell 4: 200px
 Adds to 1000px 
```

在浏览器中打开表格时得到的测量结果：

```
 cell 1: 190px
     cell 2: 264px
     cell 3: 222px
     cell 4: 168px
     Adds to 844px 
```

请注意，我没有设置表格的宽度。除了该表之外，我在页面上也没有其他元素。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:25:18.650

尝试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <style type="text/css" media="screen">
         table { border-collapse: collapse; table-layout: fixed }
         td { padding: 0; border: 1px solid black }
      </style>
   </head>
   <body>
      <table>
         <col width="220" />
         <col width="315" />
         <col width="265" />
         <col width="200" />
         <tbody>
            <tr>
               <td>col 1</td>
               <td>col 2</td>
               <td>col 3</td>
               <td>col 4</td>
            </tr>
         </tbody>
      </table>
   </body>
</html> 
```

`col`是用于[布局表格单元格](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.4.2)的合法元素。

在上面的示例中，Firebug 将显示单元格的宽度以及所需大小（以像素为单位减去 1px 的边框）（这将折叠）。整个表格的宽度正好是 1000 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:17:59.323

我们真的需要更多的代码来评估这一点。请创建一个演示 js-fiddle。

`table-layout:fixed; border-collapse: collapse;`您是否在表格本身上使用了样式规则：以及属性： `border="0" cellpadding="0" cellspacing="0"`？您是否还设置了 1000 像素的预期总表格宽度？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:24:45.143

设置表格的宽度，你会得到正确的结果。

[看到这个小提琴。](http://jsfiddle.net/PhDTw/)

# c# - jQuery 使用 json wcf C# 服务

> ID：11880169
> 
> 赞同：0
> 
> 时间：2012-08-09T09:14:00.113
> 
> 标签：c#, jquery, asp.net, wcf

这就是我的服务的样子。
我有一个类和一个接口。我的服务是公开的，我可以通过 wcftestClient 工具调用它们。

我可以用我的 jQuery 使用这样的 Web 服务吗？

我遇到的问题是在 jQuery 中调用它。它以 JSON 格式返回。我在萤火虫中收到以下错误。

> 状态码：HTTP/1.1 404 未找到

。CS

```
public static string Serialize(object obj)
        {

            if (obj == null)
            {
                string temp = "";
                temp = "";
                obj = temp;
            }

            var jsonSerializer = new DataContractJsonSerializer(obj.GetType());
            string returnValue = "";
            using (var memoryStream = new MemoryStream())
            {
                using (var xmlWriter = JsonReaderWriterFactory.CreateJsonWriter(memoryStream))
                {
                    jsonSerializer.WriteObject(xmlWriter, obj);
                    xmlWriter.Flush();
                    returnValue = Encoding.UTF8.GetString(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
                }
            }
            return returnValue;
        }

        public string HelloWorld()
        {
            return "Hello World";
        } 
```

界面

```
 [OperationContract]        
        string HelloWorld(); 
```

jQuery

```
 function GetService() {
                            var BizName = $('#txtBizName').val();
                            //alert(BizName);
                            $.ajax({
                                url: "http://www.website.com/WCFService/EdWebService.svc?HelloWorld",
                                type: "GET",
                                dataType: "json",                               
                                contentType: "application/json; charset=utf-8",
                                success: function(msg) {
                                    $('#status').html('Output: '+msg['d']['Id']);
                                },
                                error: function(e) {
                                    $('#status').innerHTML = "Unavailable";
                                }                               
                            });

                            alert(BizName);
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:45:52.477

您应该首先替换`url: "http://www.website.com/WCFService/EdWebService.svc?HelloWorld"` 为`url: "http://www.website.com/WCFService/EdWebService.svc/HelloWorld"`。

原因：您没有调用 HelloWorld 方法，而是将“HelloWorld”作为参数（以非常错误的方式）传递给您的服务的某个未知方法（我不知道哪个方法在没有指定方法的情况下解析服务名称）。

然后它应该工作。如果没有，请更新您的问题。

# windows-phone-7 - 是否可以自定义文本框的文本输入范围？

> ID：11880174
> 
> 赞同：1
> 
> 时间：2012-08-09T09:14:39.923
> 
> 标签：windows-phone-7

在我的应用程序中，我使用了输入范围为“文本”的文本框。当我在文本框中输入时，我可以在键盘上方看到一个包含一些单词的建议栏。如果我在文本框中输入 a，我可以看到单词“and”、“are”、“at”...等。我想自定义这些词。例如，如果我输入“a”，我想显示名称“alan”、“alex”..etc。有什么办法可以改变这个吗？请帮我

无论如何自定义文本输入范围的自动完成建议栏中出现的单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:06:16.400

无法控制自动完成栏中的文本建议。您只能选择输入范围的类型，不能更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:41:42.780

你也不能用键盘做任何事情。如果这是针对自定义应用程序，则列表可能会起作用，例如人员中心中的列表。很确定 MS 也没有为 WP8 发布任何键盘 API，因此唯一的替代方法是变通方法或替代方法。

# android - Android - 活动完成时线程会发生什么？

> ID：11880175
> 
> 赞同：1
> 
> 时间：2012-08-09T09:14:43.700
> 
> 标签：android, multithreading, android-activity

我有一个`Activity`，它开始`Thread`做一些工作。如果用户按下返回按钮，或者 UI 线程调用`finish()`该线程会发生什么？

`finish()`在销毁活动之前，活动是否 会等待线程？

活动被销毁后线程是否完成了工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:17:37.373

线程会做它的工作，但你不能对你的活动使用任何回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:19:58.880

线程将在后台运行，直到线程被杀死。在您的情况下，线程不会被破坏。

# javascript - 如何获取链接以保持活跃？

> ID：11880176
> 
> 赞同：1
> 
> 时间：2012-08-09T09:14:43.870
> 
> 标签：javascript, html, hyperlink

我正在制作一个关于讲座的网站。讲座分为章节。每章都有自己的链接，当点击一个新视频时，一个外部 html 会加载到一个文本窗口中。我需要这些链接保持活跃，以便人们知道他们在哪一章。

这是我当前的html：

```
<li><a href="#" onclick="javascript:loadContent('#pres', chapter1.html');changeVideo('chapter1')">chapter1</a></li>
<li><a href="#" onclick="javascript:loadContent('#pres', 'chapter2.html');changeVideo('chapter2')">chapter2</a></li> 
```

..等等..

现在，这很完美。正如我所说，我需要链接保持活动状态，并尝试添加一个 addClass(this) IE：

```
onclick="javascript:loadContent('#pres','chapter2.html');changeVideo('chapter2');addClass(this)">... 

function addClass(obj)
{
  obj.className="active";
} 
```

这行不通。我也尝试删除除了 addClass 函数之外的所有内容，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:54:41.437

```
function clickChapter(type, page, chapter){
    loadContent(type, page);
    changeVideo(chapter);
    removeAllClass();
    addClass(ocument.getElementById('id_'+chapter));
}

function removeAllClass(){
    var aAnchor = document.getElementsByTagName('A');
    for(var i=0; i<aAnchor.length;  i++){
        aAnchor[i].className = '';
    }
}

<li><a href="#" id="id_chapter1" onclick="clickChapter('#pres', 'chapter1.html', 'chapter1')">chapter1</a></li>
<li><a href="#" id="id_chapter2" onclick="clickChapter('#pres', 'chapter2.html', 'chapter2')">chapter2</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:43:02.603

你可以试试这个...

首先创建一个级联样式表（CSS）并在其中编写如下代码：

```
a:active {
    color: #006600;
    font: 12px Verdana, Arial, Helvetica, San-serif;
    text-decoration: none;
} 
```

或者

```
a:visited {
    color: #006600;
    font: 12px Verdana, Arial, Helvetica, San-serif;
    text-decoration: none;
} 
```

或者

```
a:link {
    color: #006600;
    font: 12px Verdana, Arial, Helvetica, San-serif;
    text-decoration: none;
} 
```

然后将此代码粘贴到您的 html 页面的头部：

```
 <link type="text/css" href="<Path of the CSS>.css" rel="stylesheet"/> 
```

# android - 如何理解类型“上下文”？

> ID：11880177
> 
> 赞同：1
> 
> 时间：2012-08-09T09:14:44.247
> 
> 标签：android, sqlite, android-context

```
private static class OpenHelper extends SQLiteOpenHelper {
    OpenHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}} 
```

我无法理解 type 的含义`Context`。我读了手册，但看不懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:21:25.127

上下文是一个接口！

根据源代码：

> 与有关应用程序环境的全局信息的接口。这是一个抽象类>其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

请参阅[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/content/Context.java#Context](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/content/Context.java#Context)以获得最佳理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:19:11.040

`Context`指创建数据库对象的活动的上下文。

让`SampleClass`成为您要访问数据库的活动。

SampleClass.this 将是该构造函数的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:26:44.513

`Context`，提供给`SQLiteOpenHelper`用于（除其他外）获取数据库路径，调用

```
context.getDatabasePath(); 
```

因此，传递一些自定义上下文实现的唯一原因是覆盖数据库位置，如本主题所述：[https ://stackoverflow.com/a/9168969/716075](https://stackoverflow.com/a/9168969/716075)

# jsf - 如何在 JSF 中将 OneMenu 元素更改为 outputText

> ID：11880179
> 
> 赞同：1
> 
> 时间：2012-08-09T09:15:00.627
> 
> 标签：jsf, primefaces, selectonemenu

我希望我的页面尽可能地对用户友好，并且我有一个想法，但在我想要解决它的方式上有点困难。

我正在使用primefaces，我希望有一个selectOneMenu 元素，该元素仅更改为一个outputText，其中包含selectOneMenu 中所选变量的值。有人有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:31:28.227

这可以通过 ajax 和部分渲染来完成。这是我的想法的草图（未经测试和纯 JSF）：

```
<h:panelGroup id="wrapper">
  <h:selectOneMenu value="#{myBean.myValue}" 
                   rendered="#{myBean.myValue == someInitialValue}" ...>
     <f:ajax render="wrapper"/>
       ... (your select items here)
  </h:selectOneMenu>
  <h:outputText value="#{myBean.myValue}" 
                rendered="#{myBean.myValue != someInitialValue}" .../>
</h:panelGroup> 
```

这就是它的作用：

的值`h:selectOneMenu`将被初始化，只有当它是初始值时才会呈现菜单。

在更改值时，将重新渲染周围的面板组，隐藏菜单并让菜单`h:outputText`出现。

为此，您需要一个包装 panelGroup，因为在页面加载时 outputText 不存在。如果您的表格很小，您也可以`render=@form`或任何其他周围的容器代替。那么你就不需要包装器了。

# java - 运行 Pax Exam 时出现 IllegalStateException

> ID：11880180
> 
> 赞同：3
> 
> 时间：2012-08-09T09:15:07.390
> 
> 标签：java, testing, osgi, pax, pax-exam

运行 Pax Exam 时出现以下异常。我的配置仅包括来自文件系统和 junit 和 felix 的单个捆绑包。知道为什么会这样吗？

```
java.lang.IllegalStateException: Stream handler unavailable due to: null
    at org.apache.felix.framework.URLHandlersStreamHandlerProxy.openConnection(URLHandlersStreamHandlerProxy.java:311)
    at java.net.URL.openConnection(URL.java:945)
    at org.apache.felix.framework.cache.JarRevision.initialize(JarRevision.java:155)
    at org.apache.felix.framework.cache.JarRevision.&lt;init&gt;(JarRevision.java:82)
    at org.apache.felix.framework.cache.JarRevision.&lt;init&gt;(JarRevision.java:60)
    at org.apache.felix.framework.cache.BundleArchive.createRevisionFromLocation(BundleArchive.java:868)
    at org.apache.felix.framework.cache.BundleArchive.reviseInternal(BundleArchive.java:549)
    at org.apache.felix.framework.cache.BundleArchive.&lt;init&gt;(BundleArchive.java:148)
    at org.apache.felix.framework.cache.BundleCache.create(BundleCache.java:251)
    at org.apache.felix.framework.Felix.installBundle(Felix.java:2541)
    at org.apache.felix.framework.Felix.installBundle(Felix.java:2501)
    at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:150)
    at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:123)
    at org.ops4j.pax.exam.nat.internal.NativeTestContainer.installAndStartBundles(NativeTestContainer.java:319)
    at org.ops4j.pax.exam.nat.internal.NativeTestContainer.start(NativeTestContainer.java:163)
    at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:67)
    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.evaluate(JUnit4TestRunner.java:284)
    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:93) 
```

编辑：我正在使用 Pax Exam 2.5.0，以下是我的配置方法。

```
@Configuration
public Option[] config() {
    return options(
            bundle("file:/home/nufail/mybundle.jar"),
            junitBundles(),
            felix().version("3.2.2")
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-28T14:24:33.840

对于 4.9.2 版本，通过将以下依赖项添加到 maven 解决了该问题

```
<dependency>
   <groupId>org.ops4j.pax.exam</groupId>
   <artifactId>pax-exam-link-mvn</artifactId>
   <version>4.9.2</version>
   <scope>test</scope>
</dependency> 
```

# android - Android 上的 libspotify 从未调用“登录”回调

> ID：11880182
> 
> 赞同：1
> 
> 时间：2012-08-09T09:15:07.910
> 
> 标签：android, android-ndk, spotify

我正在围绕Android 上的*libspotify*编写一个 NDK 包装器。但是**sp_session_callbacks::logged_in**回调从未调用过。

这是跟踪文件的内容：

```
libspotify trace from 12.1.51.g86c92b43 Release Android-arm 

< sp_session_create() = 0
> sp_session_login(0x240ea8 'moodstream1@gmail.com' '<hidden>' 0) on 0x400fc4c8 
```

这是使用**sp_session_callbacks::log_message**回调收到的日志。

```
13:30:07.361 I [offline_authorizer.cpp:297] Unable to login offline: no such user
13:30:07.372 I [ap:1752] Connecting to AP ap.spotify.com:4070
13:30:07.382 I [network.cpp:438] Connecting to 193.182.8.10:4070
13:30:07.526 I [ap:1226] Connected to AP: 193.182.8.10:4070 
```

如您所见，**会话**已正确创建。

我已经在真实设备和模拟器上进行了测试。结果是一样的。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T08:37:47.347

问题可能是他们没有正确驱动 libspotify。这是人们普遍存在的问题之一。

具体来说，监听 notify_main_thread 回调很重要。这表明 libspotify 需要处理来自 GUI 主线程的一些数据。

然后应该从 GUI 主线程调用 sp_session_process_events。sp_session_process_events 也必须根据返回的 next_timeout 值定期调用

常见问题解答涵盖此[https://developer.spotify.com/technologies/libspotify/faq/](https://developer.spotify.com/technologies/libspotify/faq/)并且 sp_shell 示例用作说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:09:47.680

你能提供一个显示此类错误的代码片段吗？通过快速测试（使用 spshell 示例），我得到了在 Android 上正确调用的 logged_in 回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:33:42.017

As daek says, and judging from the output to the tracefile, it seems you're not driving the libspotify event processing using sp_session_process_events() and listening to the notify_main_thread callback.

When correctly implemented you should be able to observe a "sp_session_process_events" line now and then in the tracefile log.

# android - 单击最后一项时滚动到 ExpandableListView 的末尾

> ID：11880183
> 
> 赞同：1
> 
> 时间：2012-08-09T09:15:08.133
> 
> 标签：android, scroll, expandablelistview

在`OnGroupClickListener`中`ExpandableListView`，我有：

```
expLista.setOnGroupClickListener(new OnGroupClickListener()
{

    @Override
    public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id)   
    {
      // Pongo el valor de grupo clickeado correctamente
      grupoCLickeado = groupPosition;
      expLista.smoothScrollToPosition(groupPosition);
    }
} 
```

这工作正常，除非单击最后一个组。单击最后一个组后，它会滚动到组视图，但不会全部向下滚动。

是否可以向下滚动到可扩展列表视图的末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:20:55.010

尝试为此组件编写以下内容 android:transcriptMode="alwaysScroll"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T05:14:33.377

一般来说，您不需要滚动 ExpadableListView 中的第一组。在 ExpadableListView 中设置除第一组以外的 transcriptMode。

```
getExpandableListView().setOnGroupExpandListener(new OnGroupExpandListener() {

            @Override
            public void onGroupExpand(int position) {

                if(position == 0) {
                    getExpandableListView().setTranscriptMode(ExpandableListView.TRANSCRIPT_MODE_DISABLED);
                }else{
                    getExpandableListView().setTranscriptMode(ExpandableListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
                }               
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T11:29:52.033

尝试这个

```
private void scrollToEnd() {
    expLista.post(new Runnable() {
        @Override
        public void run() {
            // Select the last row so it will scroll into view...
            expLista.smoothScrollToPosition(getCount() - 1);
        }
    });
}

private int getCount() {
    int count = 0;
    for (int i = 0; i < adapter.getGroupCount(); i++) {
        for (int j = 0; j < adapter.getChildrenCount(i); j++) {
            count++;
        }
        count++;
    }
    return count;
} 
```

# bash - QT4：为什么 bash shell 比使用 QProcess 调用的相同脚本更快？

> ID：11880184
> 
> 赞同：2
> 
> 时间：2012-08-09T09:15:10.167
> 
> 标签：bash, qt4, qprocess

让我举个例子：脚本应该检测到文件创建完成：

```
#!/bin/bash
CID=$1
TYPE=$2
echo "$TYPE$CID" >scan.log
sleep 1
FILE=$TYPE$CID.jpeg
until [ $(ls -l $FILE | awk '{print $5}') -gt 2000 ]
do
   echo "sleeping" >> scan.log
   sleep 0.4
done
SIZE=`du -h $FILE`
echo "$DT $SIZE " >> scan.log
cp $FILE $TYPE.jpegs 
```

当我从 shell 调用执行它时，它非常快：输出 /scan.log/ 中没有一行“睡眠”，因此文件在 1 秒内准备就绪/第一次睡眠就足够了/同时，当我调用相同的脚本时来自QT，我要等待超过5秒/超过14行睡眠/

有可能修复它吗？因为时间在我的项目中很关键......谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:28:45.520

谢谢大家，我找到了解决办法，问题是QT Cashe...
所以我只使用了QFileInfo::refresh()，QProcess没用

# java - 如何对列表进行排序> 在Java中

> ID：11880185
> 
> 赞同：0
> 
> 时间：2012-08-09T09:15:13.607
> 
> 标签：java

我正进入（状态

```
 List<Map<String,Object>> listMap = [
    {employee=17, fromdate=2010-08-01 00:00:00.0, full_inc=25572.0000},
    {employee=17, fromdate=2010-09-01 00:00:00.0, full_inc=28347.0000},  
    {employee=17, fromdate=2010-10-01 00:00:00.0, full_inc=37471.0000},
    {employee=17, fromdate=2011-02-01 00:00:00.0, full_inc=47033.0000},
    {employee=17, fromdate=2011-07-01 00:00:00.0, full_inc=50592.0000}
  ] 
```

任何人都可以帮助我如何在java中根据full_inc从高到低对这个地图列表进行排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-08-22T11:24:40.570

您可以在 Java 8 中使用，如下所示：

```
listMap.sort(Comparator.comparing(m->(double) m.get("full_inc"),Comparator.nullsLast(Comparator.reverseOrder()))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:20:30.973

您可以使用自定义比较器，但您需要您的值（当前`Object`）来实现`Comparable`。根据您列表的当前声明，您不能这样做（您如何比较两个随机对象？）：

```
List<Map<String,Comparable>> listMap = ...
Collections.sort(listMap, new Comparator<Map<String, Comparable>> () {

    @Override
    public int compare(Map<String, Comparable> m1, Map<String, Comparable> m2) {
        return m2.get("full_inc").compareTo(m1.get("full_inc")); //descending
    }
}); 
```

注意：您需要添加错误检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:20:52.497

我会

*   使您的地图对象成为自定义类。
*   使您的自定义类实现 Comparable
*   使用 Collections.sort()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T09:24:03.023

解决方案 1 是将您想要排序的所有条目放入`TreeMap<K,V>`（[TreeMap doc](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)）中，其中 K 是您排序的标准（此处为 full_inc），V 是您想要排序的内容。然后 TreeMap.entrySet 将按照您的 compare() 顺序进行迭代`K`。

解决方案 2 是创建自己的[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)类，使用 full_inc 与同一类的对象进行比较，并使用[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)与它。

解决方案 3 与 2 几乎相同，将[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)与比较器一起使用，根据它们的比较您的自定义类的两个实例`getFullInc()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T09:19:48.800

您可以将 Collections.sort() 与您自己的比较器一起使用。

# actionscript-3 - 我们如何在 flex 中使用比较验证器

> ID：11880188
> 
> 赞同：1
> 
> 时间：2012-08-09T09:15:16.360
> 
> 标签：actionscript-3, apache-flex, flex4

Flex 中有比较验证器吗？我搜索但无法找到它。有没有像 compare validator 这样的验证器？

我的示例是如何使用 flex 验证器检查密码和确认密码是否相同

```
<s:TextInput id="password" width="218" textAlign="left" contentBackgroundColor="#FFFFFF"/>
<s:TextInput id="confirmpassword" width="218" textAlign="left" contentBackgroundColor="#FFFFFF"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:42:52.440

有以下 2 个电子邮件字段，首先我们定义一个标准电子邮件验证器，然后我们定义一个附加在答案末尾的自定义电子邮件验证器进行确认。

```
<mx:HBox
    verticalAlign   = "middle"
    color           = "#101010">
    <mx:Label
        text        = "E-Mail Address:"
        width       = "120"/>
    <mx:TextInput
        id          = "txtEmail"
        width       = "220"/>
</mx:HBox>
<mx:HBox
    verticalAlign   = "middle"
    color           = "#101010">
    <mx:Text
        text        = "Rewrite E-Mail Address:"
        width       = "120"/>
    <mx:TextInput
        id          = "txtEmail2"
        width       = "220"/>
</mx:HBox> 
```

现在我们添加验证器

```
<mx:EmailValidator
    id              = "valEmail"
    required        = "true"
    source          = "{txtEmail}"
    property        = "text"
    invalidCharError            = "Invalid format"
    invalidDomainError          = "Invalid format"
    invalidIPDomainError        = "Invalid format"
    invalidPeriodsInDomainError = "Invalid format"
    missingAtSignError          = "Invalid format"
    missingPeriodInDomainError  = "Invalid format"
    missingUsernameError        = "Invalid format"
    />

<validators:EmailConfirmationValidator
    id              = "valEmail2"
    required        = "true"
    source          = "{txtEmail2}"
    property        = "text"
    confirmationSource  = "{txtEmail}"
    confirmationProperty= "text"/> 
```

另外，我们需要定义我在“验证器”包中声明的 EmailConfirmationValidator 类

```
package validators
{
import mx.validators.ValidationResult;
import mx.validators.Validator;

public class EmailConfirmationValidator extends Validator
{
    public var confirmationSource: Object;
    public var confirmationProperty: String;

    public function EmailConfirmationValidator()
    {
        super();
    }

    // Define the doValidation() method.
    override protected function doValidation(value:Object):Array 
    {
        // Call base class doValidation().
        var results:Array = super.doValidation(value);

        if (value.text != value.confirmation)
        {
            results.push(new ValidationResult(true, null, "Mismatch",
                "Emails do not match!"));
        }

        return results;
    }       

    /**
     *  @private
     *  Grabs the data for the confirmation password from its different sources
     *  if its there and bundles it to be processed by the doValidation routine.
     */
    override protected function getValueFromSource():Object
    {
        var value:Object = {};

        value.text = super.getValueFromSource();

        if (confirmationSource && confirmationProperty)
        {
            value.confirmation = confirmationSource[confirmationProperty];
        }

        return  value;
    }  

}
} 
```

如果您需要手动检查表单中的验证器。例如在提交内容进行注册之前，使用以下方法

```
public function isValid():Boolean
{
var validators:Array            = [valEmail, valEmail2];
    var validatorErrorArray:Array   = Validator.validateAll(validators);;
var isValidForm:Boolean         = validatorErrorArray.length == 0;

    return isValidForm;
} 
```

# codeigniter - 在 Ubuntu 中启用 CodeIgniter 日志记录

> ID：11880194
> 
> 赞同：2
> 
> 时间：2012-08-09T09:15:49.783
> 
> 标签：codeigniter, logging, ubuntu

我正在尝试在 Ubuntu 中启用 CodeIgniter 的日志记录。`application/logs`但是，我的目录中似乎没有写入任何内容。这是我到目前为止所做的......

在控制器`login.php`中，我有以下几行：

```
public function index(){
    log_message("error", "Logging sanity check.");
} 
```

我将其设置为`error`只是为了确保无论如何它都会被记录。然后，在 my 中`config.php`，我设置`log_threshold`为 3（为了安全起见）。

然后，在以超级用户身份运行的终端中，我执行`chmod 666 logs`和`chown root logs`.

现在无论我访问多少次`index.php/login`，似乎都没有记录。我已经尝试过在浏览器中以超级用户和普通用户的身份运行。我得到的`application/logs`只是`index.html`显示“禁止访问目录”。我什至尝试过重置 XAMPP。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:30:08.790

ubuntu 上的 Apache 不能作为 Apache 运行`root`，仅此而已。其次，目录权限必须是`rwx`，等于7。所以你有两种选择：

1）放宽日志目录上每个人的写入权限`chmod 777 logs`，或 2）`chown`运行 apache 的用户的目录（`apache`）

# php - PHP connection_status 无法正常工作

> ID：11880195
> 
> 赞同：0
> 
> 时间：2012-08-09T09:15:58.770
> 
> 标签：php

当连接中止时，我尝试在会话上标记一个值，但是 php 函数 connection_status() 无法正常工作！下面是代码：

**1 没有 while 语句：**

```
session_start();
ignore_user_abort(true);
ob_end_clean();

echo 'Testing'; //test if it has output to the browser
flush();
sleep(7);
echo "test";
flush();
if (connection_status() != CONNECTION_NORMAL){
    $_SESSION['conn']='failed';     //never called
} 
```

**2 WITH while 语句：**

```
session_start();
ignore_user_abort(true);
ob_end_clean();
echo "Testing connection handling"; 

while (1) { 
if (connection_status() != CONNECTION_NORMAL){
    $_SESSION['conn']='failed';       //worked at some time
    break;
}
sleep(1);
echo "test"; 
flush(); 
} 
```

当我使用这些代码进行测试时，我在代码执行结束之前手动中止了连接。但是第一个代码在我`m excepted(do not mark assign 'failed' to the session) , and the second code works. Why the first dosen`工作时不起作用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:27:33.897

正因为`while`如此，它才有效。

想一想。当您第一次运行此 PHP 页面时，连接不会有故障，但经过一段时间后，浏览器已过时并与服务器断开连接（可能是 gced），连接被归类为有故障，因此您的代码可以正常工作。

因此它可以工作，因为它循环检查连接。

老实说，我不确定您为什么要在服务器和客户端之间建立这种完整性，这充其量是不可靠的。这似乎是互联网运作方式的一个根本缺陷。

# mysql - 没有运算符的 MySQL 字符串比较 - 在 同一台服务器上不一致？

> ID：11880198
> 
> 赞同：0
> 
> 时间：2012-08-09T09:16:14.203
> 
> 标签：mysql

我发现对我来说是一个非常奇怪的现象。在我的 MySQL 服务器版本 5.0.92 中，我使用如下查询：

```
SELECT IF(thumb, thumb, image) AS thumb FROM blog WHERE id = 200; 
```

因为如果不为空我想获取拇指值，否则为图像值。现在在这台服务器上的一个数据库中，它工作得非常好，就像我想要的那样。但是在完全相同的服务器上的另一个数据库上，`thumb` *始终*评估为 false，即使它不为空，并且`image`始终选择 for 的值。

我知道我可以使用`thumb != ''`并且在两个数据库上都可以使用，但是请有人告诉我这是怎么发生的？这是某种特定于数据库的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:19:55.097

如果`thumb`是字符串列，那么您应该使用如下查询：

```
SELECT IF(thumb IS NOT NULL AND thumb != '', thumb, image) AS thumb FROM blog WHERE id = 200; 
```

还要检查`CHARACTER SET`两个数据库，因为字符串比较取决于字符集。

```
SHOW CREATE DATABASE db_name; 
```

[数据库字符集和排序规则](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html)

# sql - 如何计算 Access 查询中字段中的唯一项？

> ID：11880199
> 
> 赞同：30
> 
> 时间：2012-08-09T09:16:20.237
> 
> 标签：sql, ms-access

我的表：table1

```
ID 姓名 家庭
1 个 AA
2 B BB
3 A AB
4 天
5 EE
6 A 交流电
```

Access 上的 SQL 命令：

```
select count(*) from table1 
```

***输出：*** ------------> 真
6 行

我试图计算唯一名称：

**预期输出：** 4 行

```
select count(distinct Name) from table1 
```

***访问输出：*** ------------> 错误

我需要对查询进行哪些更改？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-09T09:21:58.807

试试这个

```
SELECT Count(*) AS N
FROM
(SELECT DISTINCT Name FROM table1) AS T; 
```

阅读[此](http://web.archive.org/web/20120805022223/http://blogs.office.com/b/microsoft-access/archive/2007/09/19/writing-a-count-distinct-query-in-access.aspx)内容以获取更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T09:27:36.347

访问引擎不支持

```
SELECT count(DISTINCT....) FROM ... 
```

你必须这样做：

```
SELECT count(*) 
FROM
(SELECT DISTINCT Name FROM table1) 
```

它的一个小解决方法......你正在计算一个 DISTINCT 选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-16T15:48:33.317

对我来说使用的一个快速技巧是使用查找重复查询 SQL 并在Having 表达式中将 1 更改为 0。像这样：

```
SELECT COUNT([UniqueField]) AS DistinctCNT FROM
(
  SELECT First([FieldName]) AS [UniqueField]
  FROM TableName
  GROUP BY [FieldName]
  HAVING (((Count([FieldName]))>0))
); 
```

希望这会有所帮助，而不是我确定的最佳方式，并且 Access 应该已经内置了它。

# visual-studio-2010 - 返回 Silverlight 4.0 中连接两个表的结果

> ID：11880202
> 
> 赞同：1
> 
> 时间：2012-08-09T09:16:31.530
> 
> 标签：visual-studio-2010, silverlight, linq, entity-framework-4, wcf-ria-services

主要代码：

```
 DomainServiceAccountManager d = new DomainServiceAccountManager();
    EntityQuery<ListBuy> q = d.GetListMemberBuyQuery();
    LoadOperation<ListBuy> l = d.Load(q);
    DGListBuy.ItemsSource = l.Entities; 
```

编码：

```
public IQueryable<ListBuy> GetListMemberBuy()
{
    var membuy =
    from mem in this.ObjectContext.Members
    from b in this.ObjectContext.Buys.Where(b => b.ID_member == mem.ID)
    .OrderByDescending(b => b.ID)
    .DefaultIfEmpty()
    select new { b.ID, mem.Name, b.Money, b.Tarikh };
    return membuy;
} 
```

我收到以下消息：

`Cannot implicitly convert type 'System.Linq.IQueryable<AnonymousType#1>' to 'System.Linq.IQueryable<AccountManager.Web.ListBuy>'. An explicit conversion exists (are you missing a cast?)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:26:05.257

您的 GetListMemberBuy 方法实际上返回匿名类型的 IQueryable，而不是 ListBuy 类型的 IQueryable。这些不相同，因此出现（编译时间？）错误。

我只能假设 ListBuy 也存在于数据库中，但如果存在，那么您可以删除匿名类型。

```
public IQueryable<ListBuy> GetListMemberBuy()
{
    var membuy =
    from mem in this.ObjectContext.Members
    from b in this.ObjectContext.Buys.Where(b => b.ID_member == mem.ID)
    .OrderByDescending(b => b.ID)
    .DefaultIfEmpty()
    select new ListBuy() { ID = b.ID, Name = mem.Name, Money = b.Money, Tarikh = b.Tarikh }; // <-- new ListBuy() !!
    return membuy;
} 
```

如果数据库中不存在 ListBuy，则不能返回 IQueryable。也许这会奏效。

```
public IEnumerable<ListBuy> GetListMemberBuy()
{
    var membuy =
    from mem in this.ObjectContext.Members
    from b in this.ObjectContext.Buys.Where(b => b.ID_member == mem.ID)
    .OrderByDescending(b => b.ID)
    .DefaultIfEmpty()
    select new { b.ID, mem.Name, b.Money, b.Tarikh };
    return membuy
        .AsEnumerable()
        .Select(b => new ListBuy() { 
            ID = b.ID, Name = b.Name, Money = b.Money, Tarikh = b.Tarikh
        });
} 
```

所有这些都是猜测，因为您没有在问题中包含 ListBuy 类定义。

# javascript - javascript - 将回调作为参数传递给函数

> ID：11880208
> 
> 赞同：0
> 
> 时间：2012-08-09T09:16:53.080
> 
> 标签：javascript, jquery, javascript-events

我试图编写一个通用函数，它将函数和毫秒数作为参数，并将其设置为 setTimeout 函数。我试过了

```
$("#Delay").click(function() {
    delayCallBack(someFunction(a, b), 100);
}); 
```

在 delayCallBack 函数中

```
function delayCallBack(event, time) {
    setTimeout(function() {
        event();
    }, time);
}; 
```

但这不起作用并抛出了javascript错误。有人可以帮我做这件事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:21:47.197

代替

```
$("#Delay").click(function() {delayCallBack(someFunction(a,b), 100);}); 
```

和

```
$("#Delay").click(function() {delayCallBack(function(){someFunction(a,b)}, 100);}); 
```

第一行执行`someFunction(a,b)`而不是第二行执行的操作，传递对要执行的函数的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:21:36.967

`()`调用一个函数，所以你调用函数而不是传递它。像普通变量一样传递函数：

```
$("#Delay").click(function() {
    delayCallBack(someFunction, 100);
}); 
```

* * *

您的函数可以稍微清理一下......然后再次与直接调用没有什么不同`setTimeout`......

```
function delayCallBack(callback, time) {
    setTimeout(callback, time);
} 
```

* * *

要传递参数`a`and `b`，您可以从部分应用`a`and的现有函数中创建一个新函数`b`，然后传递它：

```
$("#Delay").click(function() {
    delayCallBack(someFunction.bind(null, a, b), 100);
}); 
```

更多的[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。演示：http: [//jsfiddle.net/Pd5JZ/2/](http://jsfiddle.net/Pd5JZ/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:35:08.420

这个问题在 JavaScript 中有一个非常棘手的答案，因为你传入了值`a`和`b`. 考虑 Gerard Sexton 的解决方案

```
$("#Delay").click(function() {
    delayCallBack(function() {
                      someFunction(a,b);
                  }, 100);
}); 
```

该代码的作用取决于定义`a`和`b`定义的位置以及绑定处理程序后它们会发生什么。假设我们把它放在上下文中：

```
$(function () {
    var a, b;
    a = b = 5;
    $("#Delay").click(function() {
        delayCallBack(function() {
                          someFunction(a,b);
                      }, 100);
    });
    a = b = 7;
} 
```

然后`someFunction`将被调用`a=b=7`，而不是`a=b=5`。如果您想要第一个值，则必须在绑定处理程序时复制这些值。像这样：

```
$(function () {
    var a, b;

    function bind(a, b) {
        $("#Delay").click(function() {
            delayCallBack(function() {
                              someFunction(a,b);
                          }, 100);
        });
    }

    a = b = 5;
    bind(a, b);
    a = b = 7;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T03:02:05.880

我也遇到了同样的错误：setTimeout 调用（参数周围缺少引号？）。Gerard Sexton 的解释是正确的。

正确的代码应该是

```
$("#Delay").click(function() {delayCallBack(function(){someFunction(a,b)}, 100);}); 
```

# ruby-on-rails - 导轨未定义方法'cashes_page'

> ID：11880212
> 
> 赞同：0
> 
> 时间：2012-08-09T09:17:25.280
> 
> 标签：ruby-on-rails

美好的一天，你能帮我解决这个问题吗：

我添加到我的 store_controller

```
cashes_page :index 
```

应用程序.rb

```
config.action_controller.perform_caching = true 
```

application_controller.rb

```
include ActionController::Caching 
```

我得到`undefined method 'cashes_page' for StoreController:Class`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:24:04.773

它不是 cashes_page :index

```
caches_page :index 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-20T13:33:16.737

Rails 4 中删除了页面缓存，以及其他一些东西，例如观察者、受保护的模型属性和 ActiveResource。好消息是，如果我们需要这些功能中的任何一个，可以很容易地通过 gems 将它们添加回来。我们将添加一个在升级过程中使用的项目列表。

`gem 'actionpack-page_caching'`
`gem 'actionpack-action_caching'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:23:39.933

可能是笔误。
而不是 cashes_page :index，使用`caches_page :index`

# .net - 从本地计算机强制执行

> ID：11880214
> 
> 赞同：1
> 
> 时间：2012-08-09T09:17:25.173
> 
> 标签：.net

我以 .zip 文件的形式打包了一个 .NET 应用程序。用户需要在他的本地硬盘驱动器上解压缩文件以创建一个包含可执行文件和相关资源的目录。但是，用户不断在网络驱动器上解压缩文件并从那里执行应用程序，因此会遇到问题。

如果用户从网络驱动器运行文件并关闭应用程序，我可以通过显示消息来强制用户从本地硬盘驱动器运行文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:32:31.900

您只需要检查路径是否为网络路径并给出错误信息。

脚步：

1.  获取路径或正在运行的应用程序：

    `var path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);`

2.  检查路径是否为网络路径：

    `[DllImport("shlwapi.dll")]`

    `private static extern bool PathIsNetworkPath(string pszPath);`

    `if(PathIsNetworkPath(path))...`

3.  给出错误信息

参考：[PathIsNetworkPath](http://msdn.microsoft.com/en-us/library/bb773640%28VS.85%29.aspx)

# asp.net - 在 strings.properties 文件中使用

> ID：11880220
> 
> 赞同：0
> 
> 时间：2012-08-09T09:17:50.727
> 
> 标签：asp.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:24:41.357

您的链接将指向的路径将相对于它所在的页面。它与您的 str.properties 文件所在的位置无关。

如果您的 MyPage.aspx 页面在根级别具有该链接，您应该将 .txt 文件也保存在根级别文件夹中。

# latex - 如何设置 LaTeX 文档

> ID：11880225
> 
> 赞同：0
> 
> 时间：2012-08-09T09:18:05.370
> 
> 标签：latex

我用 LaTeX 写论文。我想将文档设置为每行 60 个符号和每页 30 行。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:19:56.940

我会说这违反了 LaTeX 原则：不要担心这些无用的东西，而只是写你的文本。LaTeX 将排版您的文档`The Right Way (TM)`。

# jasperserver - JasperServer：在每月的最后一天安排报告？

> ID：11880231
> 
> 赞同：1
> 
> 时间：2012-08-09T09:18:21.030
> 
> 标签：jasperserver

如何在每月的最后一天安排 JasperServer 中的报告？

我正在尝试安排报告，但我没有找到任何选项来获取该月的最后一天，例如它会是可变的，例如在 2 月它将是 29 或 28，而其他可能是 30 或 31。但是如何指定这个在安排报告时？

帮帮我..提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:38:24.307

这在今天的 JasperReports Server UI 中是不可能的。Quartz 调度程序支持这一点，因此当然可以通过自定义使其工作（或者可以通过 Web 服务运行报告，如 Alex K 建议的那样）。

通常在一个月的最后一天运行报告的原因是包括上个月的结果。因此，将报告安排在每月第一天午夜过后的一分钟运行是有意义的。也许你可以得到你需要的东西。

# asp.net-mvc - 验证应用程序块 - 如何使用验证元数据类

> ID：11880234
> 
> 赞同：0
> 
> 时间：2012-08-09T09:18:31.057
> 
> 标签：asp.net-mvc, enterprise-library, modelmetadata, validation-application-bl, metadatatype

我正在使用 VAB 来验证一些具有属性的类，并且我正在使用元数据类在不同的类之间共享相同的验证。当我尝试验证控制器中的对象时（顺便说一句，我使用的是 asp.net mvc），`ValidationResults`没有错误，我的实体不应该是有效的。但是，ASP.NET MVC 发挥了他的魔力，因为`ModelState.IsValid`它是错误的。我想问题是我进行手动验证的方式。

在 Global.asax 中，我正在加载类和元数据类之间的关联。

全球.ASAX

```
private static void RegisterMetadataExtensions()
{
    AssociatedMetadataTypeTypeDescriptionProvider typeDescriptionProvider;

    typeDescriptionProvider =
        new AssociatedMetadataTypeTypeDescriptionProvider(
            typeof(FooViewModel), typeof(FooMetadata));

    TypeDescriptor.AddProviderTransparent(typeDescriptionProvider,
        typeof(FooViewModel));

    typeDescriptionProvider =
        new AssociatedMetadataTypeTypeDescriptionProvider(
            typeof(FooCommand), typeof(FooMetadata));

    TypeDescriptor.AddProviderTransparent(
        typeDescriptionProvider, typeof(FooCommand));
} 
```

控制器

```
[HttpPost]        
public ActionResult Action(FooViewModel vm)
{
    Validator<FooViewModel> validator =
        ValidationFactory.CreateValidator<FooViewModel>();

    ValidationResults res = validator.Validate(vm);

    //res.Count is 0 
```

或者

```
 ValidationResults res = Validation.Validate<FooViewModel>(vm);

    //res.Count is 0

    //ModelState.IsValid is false
    if(ModelState.IsValid) 
```

欢迎任何想法。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:55:34.003

我是企业库的忠实粉丝，但我认为使用 MVC 进行验证的更好方法是让您的 ViewModel 实现`IValidatableObject`。这样，它会在设置的绑定阶段自动得到验证`ModelState.Isvalid`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:45:32.223

为了使您的 VAB 验证器挂钩到 ASP.NET MVC 的验证，我认为您需要实现 ModelValidatorProvider 并按照此处所述包装 VAB 验证结果... [http://bradwilson.typepad.com/blog/2009/10/enterprise-库-验证-示例-for-aspnet-mvc-2.html](http://bradwilson.typepad.com/blog/2009/10/enterprise-library-validation-example-for-aspnet-mvc-2.html)

# c++ - 简单的 netbeans C++ 项目无法编译

> ID：11880238
> 
> 赞同：0
> 
> 时间：2012-08-09T09:18:45.163
> 
> 标签：c++, gcc, netbeans, makefile, cygwin

我安装了 Netbeans 并作为 C++ 编译器安装了 cygwin。我做了一个简单的项目来测试我的安装，这是代码：

```
#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char** argv) {
    cout << "test";
    return 0;
} 
```

这是它给出的错误消息：http: [//pastebin.com/jRRh7MPi](http://pastebin.com/jRRh7MPi)

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:36:41.850

您需要显式链接到 C++ 标准库，或者使用`g++`而不是`gcc`.

# java - 如何在eclipse中跟踪编译错误？

> ID：11880243
> 
> 赞同：1
> 
> 时间：2012-08-09T09:19:02.233
> 
> 标签：java, eclipse, maven, compilation, compiler-errors

我有在命令行中编译好的 maven java 项目，但是当我在 eclipse 中导入时，我收到关于 CollectionUtils 的编译错误。

```
org.apache.commons.collections.CollectionUtils 
```

似乎该项目具有引用旧版本的 apache commons 集合的传递依赖项。如何准确跟踪错误？怎么修？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:41:40.600

`mvn dependency:tree`也许你可以通过发出来找出你的 pom 中的哪个依赖项正在拉入旧版本的 Apache commons来追踪传递依赖项。

或者，在 Eclipse 中，当您打开 pom.xml 文件（安装了**[m2e](http://eclipse.org/m2e/)**插件）时，您应该会在编辑器底部看到*Dependency Tree选项卡，如下所示：*

![在此处输入图像描述](../Images/f4f7f2946cc885190895ad8717792aba.png)

在**Search**字段中，您可以键入 apache commons jar 的名称以找出将其拉入的依赖项。一旦添加了适当的*排除*添加，它应该都是桃色的。

**问题**

你是如何在eclipse中导入maven项目的。你做了一个`mvn eclipse:eclipse`然后将它作为一个普通的eclipse项目导入吗？如果是这样，我建议安装 m2e 插件（上面链接），然后`Import Existing Maven Project`在 eclipse 中使用导入 maven 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:18:30.350

在我看来`.classpath`，Eclipse 中的类路径（文件）配置不正确。您可以使用[Maven Eclipse Plugin](http://maven.apache.org/plugins/maven-eclipse-plugin/)让 Maven 为您配置它。只需从命令行执行以下命令：

```
mvn eclipse:eclipse 
```

然后，Maven 将`.classpath`使用 POM 中定义的所有依赖项（包括传递依赖项）正确填充文件。然后在 Eclipse 中刷新项目，所有的红十字都会消失（希望......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:20:46.533

> 如何准确跟踪错误？怎么修？

调用

```
mvn clean compile -e 
```

它会给你错误堆栈跟踪，帮助你修复这个错误

# java - 在 Eclipse 中引用其他项目

> ID：11880245
> 
> 赞同：0
> 
> 时间：2012-08-09T09:19:09.167
> 
> 标签：java, eclipse

我在 Eclipse 中有两个项目（我正在使用 STS）——一个 Java 应用程序（p1）和一个带有 Spring 的动态 Web 项目（p2），两者都在 Eclipse 中创建为“Spring 项目模板”。我想从 p2 引用 p1。我总是通过项目属性/Java 构建路径并在“项目”选项卡中添加 p1 并在“订单和导出”选项卡中检查此项目。在这种情况下我也这样做了，但是当我在 Eclipse（在服务器上运行）中运行 p2 时，由于找不到类异常（来自 p1 的类），引导程序失败。

我认为这种行为与 Maven 配置无关，对吗？这只是 Eclipse 的事情，所以我不知道为什么没有引用 p1 项目。

将依赖项添加到 pom.xml 并使用 maven 生成战争并在外部运行对我来说不是办法，我需要在 IDE 中运行它。

# ruby-on-rails - Rails：如何根据某些条件保存统计信息

> ID：11880248
> 
> 赞同：1
> 
> 时间：2012-08-09T09:19:17.217
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, ruby-on-rails-3.1

我正在开发一个 Rails 应用程序，我需要根据以下条件保存并显示一些统计信息：

*   对于当月，显示数据库中的所有条目
*   过去 8 个月，显示每个月的累计
*   对于其余部分，显示所有值的累积

问题是我不想将所有数据保存在我的数据库中，而是在显示时应用条件。有没有一种方法可以让我的数据库结构也涵盖条件（例如，当当前月份发生变化时，应用所有条件并更新数据库）？

# haskell - 在 Linux 中通过 Emacs/Vim 进行 Haskell 编码：将文件组织到项目中

> ID：11880249
> 
> 赞同：2
> 
> 时间：2012-08-09T09:19:19.313
> 
> 标签：haskell, vim, emacs, project-management, projects

我有两个关于在 Linux 中使用 Emacs/VIM 编写 Haskell 的问题：

1.  如果想将一个 haskell 代码库组织成多个项目（给定项目的文件存储在特定文件夹中），那么 emacs 和 vim 可以处理吗？原因是我之前使用过 IDE，所有项目都一次加载到会话中，但不确定这对 Emacs/VIM 将如何工作。

2.  IDE 的另一个好处是我可以从给定项目中定义函数，即使该函数定义在单独的项目中（即存储在单独的文件夹中）。Emacs/VIM 可以处理这个吗？

这里有一些讨论：[Haskell IDE for Windows？](https://stackoverflow.com/questions/734309/haskell-ide-for-windows)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:48:56.313

1.  VIM/Emacs 不关心你如何组织你的文件。它们主要是编辑器，因此无论您如何布置目录结构，您都可以使用它们来编辑文件。除此之外，最好遵循一些标准约定，或者为您将要使用的工具调整结构。您可以查看[Haskell 项目的结构](http://www.haskell.org/haskellwiki/Structure_of_a_Haskell_project)。[使用Cabal](http://www.haskell.org/cabal/)构建项目并管理其依赖项也很方便。
2.  VIM/Emacs 可以使用[Ctags](https://en.wikipedia.org/wiki/Ctags)索引文件在您的项目中导航。有关如何创建这些索引文件的可用选项，请参阅[标签。](http://www.haskell.org/haskellwiki/Tags)索引工具不需要任何特定的项目结构，因此如果您需要在多个项目中导航，您只需将包含多个项目的目录索引到一个索引文件中即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:55:53.053

有一个名为[Projectile](http://batsov.com/projectile/)的 Emacs 模式，它允许一些“类似项目”的功能，这可能是您正在寻找的。我自己并没有真正使用过它（我倾向于坚持只编辑文件的旧 *nix 方式），所以我不能给你详细信息，但看看它不会有坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:48:12.283

不确定我是否正确理解了问题的要点。以下是我对 Vim 中多个项目管理问题的建议，不考虑所使用的语言。

您可以利用 vim 会话。使用 .vimrc 中的一些自定义函数/键映射，您将能够为每个项目保留一个单独的会话文件，无论是在项目目录中，还是在您专用于会话文件的目录中。

这是一般的操作方法：http: [//vim.runpaint.org/editing/managing-sessions/](http://vim.runpaint.org/editing/managing-sessions/) 在那里你会发现一些专门解决处理多个项目特定会话问题的脚本：[How to auto在退出时保存vim会话并在启动时自动重新加载，包括拆分窗口状态？](https://stackoverflow.com/questions/5142099/auto-save-vim-session-on-quit-and-auto-reload-session-on-start)

# android - 修改 Android 裁剪意图

> ID：11880253
> 
> 赞同：0
> 
> 时间：2012-08-09T09:19:24.503
> 
> 标签：android, image, android-camera, crop, android-camera-intent

我创建了一个用于裁剪图像的示例应用程序，我正在调用内置`crop`意图。

这是我的代码：

```
Intent intent = new Intent("com.android.camera.action.CROP");
intent.setType("image/*");                  
intent.setData(mImageCaptureUri);
intent.putExtra("outputX", 200);
intent.putExtra("outputY", 200);
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("scale", true);
intent.putExtra("return-data", true); 
```

如何根据用户的输入修改裁剪区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:58:20.960

只需删除输出/方面/比例参数。

```
Intent intent = new Intent("com.android.camera.action.CROP");
intent.setType("image/*");                  
intent.setData(mImageCaptureUri);
intent.putExtra("return-data", true); 
```

如果这不能给您想要的结果，请尝试再次添加其中一些参数，但不是全部。

笔记！并非所有设备都支持此操作，因此您还应该在启动 Activity 时检查 ActivityNotFoundException，找到在这些设备上裁剪的替代方法或要求用户安装应用程序，例如 QuickPic。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:30:37.930

是的，您可以，您需要根据需要更改`outputX`/`outputY`和`aspectX`/ `aspectY`。也可以看看

*   [在android中选择并裁剪最大尺寸](https://stackoverflow.com/questions/5068108/select-and-crop-with-a-maximum-size-in-android/9348504#9348504)
*   [带有裁剪的 Android 相机意图](https://stackoverflow.com/questions/8585341/android-camera-intent-with-crop/8585539#8585539)
*   [如何在android中裁剪解析的图像？](https://stackoverflow.com/questions/3725501/how-to-crop-the-parsed-image-in-android/3725572#3725572)

# php - 如何从拖放项目中检索值并存储在表单中

> ID：11880257
> 
> 赞同：0
> 
> 时间：2012-08-09T09:19:49.740
> 
> 标签：php, jquery, ajax, drag-and-drop

如何使用 Drag n Drop 将某些值添加到表单中？

我想创建一个用户可以选择向其发送信息的组的拖放列表。用户可以将组名拖放到某个区域。在此操作之后，表单必须知道`group_id`添加到表单中的内容（例如通过隐藏字段）。

我怎样才能以简单的方式实现这一目标？我想使用 jQuery 来做到这一点。仅供参考，我正在使用 CodeIgniter 和 mySQL 来处理我的表单。

提前致谢。

# java - 如何处理以 java.lang.StackOverflowError 结尾的深度递归

> ID：11880258
> 
> 赞同：0
> 
> 时间：2012-08-09T09:19:49.377
> 
> 标签：java, stack-overflow

我有一个真正深度递归的程序，我确信它没有无限循环。但是在很短的时间（1s）之后我得到了

```
java.lang.StackOverflowError 
```

是否有可能增加他尝试结束程序的时间？如果可能的话，我想运行几个小时；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:23:39.017

听起来你有一个错误。您可以增加堆大小，`-Xss`但听起来您希望将其增加得比机器的大小大得多。

我建议你减少你正在使用的递归量，所以如果可能的话它只会下降几十个级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:30:29.170

如[本讨论](http://www.velocityreviews.com/forums/t150601-recursion-depth-in-java.html)中所述，您可以执行以下操作：

*   使用运行时选项（`java -Xss`和`java -Xoss`选项）扩展堆栈的大小
*   使用优化编译器减少每一层的堆栈开销（[给出示例](http://mindprod.com/jgloss/jet.html)）

此外，您可以在 JDK 版本的 Java.exe 上尝试 -server 选项，因为它处理事情的方式略有不同。

但是，听起来您可能要求太多，需要为您正在做的事情找到不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:33:47.760

为了进一步关于减少递归/更改为迭代模式的评论，示例可能很有用。如果我们以阶乘函数为例，它可以递归地（并且经常是）写成这样：

```
int recurse(int n){
    if(n = 0) return 1;
    else return n*recurse(n-1);
} 
```

但是，它可以像这样迭代地完成（因此避免产生大 n 的堆栈溢出）

```
int iterate(int n){

    int ans = 1;
    for(int i = n; i > 0; i--){
        ans *= i;
    }
    return ans;

} 
```

可能值得做一些类似于您的代码的事情以避免递归（这可能是您的错误的原因），因为它（几乎？）总是可以使递归迭代

# c# - 使用 XDocument.Parse 将所有内容加载到一个元素中

> ID：11880259
> 
> 赞同：2
> 
> 时间：2012-08-09T09:19:53.973
> 
> 标签：c#, xml, linq-to-xml

我正在使用来自第三方来源的 XML，但似乎无法将 xml 正确加载到 XDocument 中。它将所有内容加载到一个元素中，并将其值设置为 xml 的其余部分。

xml 字符串看起来像这样（未格式化，从响应流中读取）。

```
<ArticleDetail xmlns="http://schemas.datacontract.org/2004/07/EEL.ArticleDatabase.WebService.Model" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Approved>false</Approved><ArticleGroupCode>5304</ArticleGroupCode><ArticleGroupName>Standblenders</ArticleGroupName><ArticleNumber>052ASB2600</ArticleNumber><BrandLogoTypeResourceId/><BrandName>Electrolux</BrandName><Denomination>Köksmaskiner ASB2600 Electrolux</Denomination><Description>Exklusiv mixer i borstat stål som enkelt krossar is, 1,6l glaskanna OBS! Levereras som 2-pack</Description><Documents/><Ean>7319590015596</Ean><Id>1649151</Id><Images/><ModelNumber>ASB2600</ModelNumber><PackageQuantity>1</PackageQuantity><Parameters><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Bredd</DisplayName><Name>Bredd</Name><Priority>1</Priority><Unit>mm</Unit><Value>290</Value></Parameter><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Djup</DisplayName><Name>Djup</Name><Priority>2</Priority><Unit>mm</Unit><Value>240</Value></Parameter><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Höjd</DisplayName><Name>Höjd</Name><Priority>3</Priority><Unit>mm</Unit><Value>380</Value></Parameter></Parameters><Published>false</Published><ReplacedByArticleNumber/><ReplacesArticleNumber/><SellText1>Kraftfull - perfekt för att krossa is.</SellText1><SellText2>Glaskanna som rymmer 1,6 liter, med 6-bladigt knivsystem.</SellText2><SellText3>Väldigt enkel rengöring av kanna och knivsystem</SellText3><SellText4/><SellText5/><StatusCode>0</StatusCode><SupplierArticleNumber>ASB2600</SupplierArticleNumber><SupplierCode>150</SupplierCode><SupplierName>Elon Elkedjan Logistic AB</SupplierName><Texts><TextItem><Text>Test</Text><Type>Short</Type></TextItem><TextItem><Text>Elon</Text><Type>Long</Type></TextItem></Texts></ArticleDetail> 
```

其余的代码看起来像这样。

```
var xDoc = XDocument.Parse(xmlString); 
```

由于某种原因，所有内容都加载到一个元素中，并且值设置为。

```
false5304Standblenders052ASB2600ElectroluxKöksmaskiner ASB2600 ElectroluxExklusiv mixer i borstat stål som enkelt krossar is, 1,6l glaskanna OBS! Levereras som 2-pack73195900155961649151ASB26001DimensionerlongBreddBredd1mm290DimensionerlongDjupDjup2mm240DimensionerlongHöjdHöjd3mm380falseKraftfull - perfekt för att krossa is.Glaskanna som rymmer 1,6 liter, med 6-bladigt knivsystem.Väldigt enkel rengöring av kanna och knivsystem0ASB2600150Elon Elkedjan Logistic ABTestShortElonLong 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:28:45.360

无法复制；它工作正常。我认为你读错了。例如，以下将节点名称绘制为树：

```
static void Main()
{
    string xmlString = @"<ArticleDetail xmlns=""http://schemas.datacontract.org/2004/07/EEL.ArticleDatabase.WebService.Model"" xmlns:i=""http://www.w3.org/2001/XMLSchema-instance""><Approved>false</Approved><ArticleGroupCode>5304</ArticleGroupCode><ArticleGroupName>Standblenders</ArticleGroupName><ArticleNumber>052ASB2600</ArticleNumber><BrandLogoTypeResourceId/><BrandName>Electrolux</BrandName><Denomination>Köksmaskiner ASB2600 Electrolux</Denomination><Description>Exklusiv mixer i borstat stål som enkelt krossar is, 1,6l glaskanna OBS! Levereras som 2-pack</Description><Documents/><Ean>7319590015596</Ean><Id>1649151</Id><Images/><ModelNumber>ASB2600</ModelNumber><PackageQuantity>1</PackageQuantity><Parameters><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Bredd</DisplayName><Name>Bredd</Name><Priority>1</Priority><Unit>mm</Unit><Value>290</Value></Parameter><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Djup</DisplayName><Name>Djup</Name><Priority>2</Priority><Unit>mm</Unit><Value>240</Value></Parameter><Parameter><Category>Dimensioner</Category><DataType>long</DataType><Description/><DisplayName>Höjd</DisplayName><Name>Höjd</Name><Priority>3</Priority><Unit>mm</Unit><Value>380</Value></Parameter></Parameters><Published>false</Published><ReplacedByArticleNumber/><ReplacesArticleNumber/><SellText1>Kraftfull - perfekt för att krossa is.</SellText1><SellText2>Glaskanna som rymmer 1,6 liter, med 6-bladigt knivsystem.</SellText2><SellText3>Väldigt enkel rengöring av kanna och knivsystem</SellText3><SellText4/><SellText5/><StatusCode>0</StatusCode><SupplierArticleNumber>ASB2600</SupplierArticleNumber><SupplierCode>150</SupplierCode><SupplierName>Elon Elkedjan Logistic AB</SupplierName><Texts><TextItem><Text>Test</Text><Type>Short</Type></TextItem><TextItem><Text>Elon</Text><Type>Long</Type></TextItem></Texts></ArticleDetail>";
    var xDoc = XDocument.Parse(xmlString);
    Write(xDoc.Root, 0);
}

static void Write(XElement el, int offset)
{
    Console.Write(new string(' ', offset));
    Console.WriteLine(el.Name.LocalName);
    foreach (var child in el.Elements())
    {
        Write(child, offset + 1);
    }
} 
```

我怀疑您正在访问`xDoc.Root.Value`- 实际上，您显示的*是*根的组合值；但这并不意味着结构缺失。如果那不是您想要的，那么不要问是否需要该值-而是走结构。

# python - 使用嗅探功能时未捕获键盘中断

> ID：11880262
> 
> 赞同：0
> 
> 时间：2012-08-09T09:19:55.657
> 
> 标签：python, multithreading, scapy, keyboardinterrupt

每当有键盘中断时，我都会尝试清空列表，但这不起作用。下面是我的代码。

```
while 1:
    try:
       n=0
       while n<10:
           pkt=sniff(prn=lambda x:x.sprintf("{Ether : %ether.src% --> %ether.dst%}"),timeout=1,store=1)
           buffpkt+=pkt[:]  ##Store packets in a list buffer
           n+=1
       self._tempbuffstore(buffpkt)

    except KeyboardInterrupt:
        buffpkt=[]  ##Flush the list asynchronously "THIS IS THE MAIN REQUIREMENT FOR INTERRUPT"
        raise 
```

我尝试做所有可能的事情，但这个中断处理程序不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:31:45.993

看起来你打电话给我无法重现的“嗅探”正在阻塞。这对于与网络相关的方法非常常见。

您应该将您的嗅探方法放在一个单独的线程中，然后，可以在主循环中处理您的异常（并且您还必须处理在异常时停止线程）。

# android - 通过滑动移动片段（？）并显示底层片段

> ID：11880267
> 
> 赞同：0
> 
> 时间：2012-08-09T09:20:10.873
> 
> 标签：android, android-fragments

小问题，但我认为这是一个有趣的问题，因为我还没有找到答案：

Youtube 应用程序中使用了什么能够将片段（？）向右滑动并显示其背后的选项。您可以在主页上执行此操作，然后会显示您的个人设置。

有人知道这是如何完成的吗？我也在另一个（非谷歌）应用程序中看到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:14:36.360

要在应用程序中获得类似的效果，您可以使用 ViewPager。

一些信息和代码示例：[http ://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

# c# - 如何从asp.net中的javascript调用服务器端代码？

> ID：11880269
> 
> 赞同：0
> 
> 时间：2012-08-09T09:20:24.897
> 
> 标签：c#, javascript, asp.net

我有`Repeater control`这样的；

```
<asp:Repeater ID="repeaterCategoryList" runat="server" 
                onitemcommand="repeaterCategoryList_ItemCommand">
                <ItemTemplate>
                        <td class="center">
                            <asp:Button ID="buttonDelete" runat="server" CssClass="btn btn-primary" CommandName="Delete" Text="Delete" 
                                CommandArgument='<%# Eval("CategoryId") %>'/>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater> 
```

我的页面后面的代码如下所示；

```
protected void repeaterCategoryList_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "Delete")
    {
         //my server side logic here
    }
} 
```

我在 .aspx 文件中的 javascript 代码如下所示：

```
<script>
    $(function () {
        $('#buttonDelete').live('click', function (e) {
            e.preventDefault();
            $.alert({
                type: 'confirm'
                , title: 'Alert'
                , text: '<p>Are you sure, you want to delete this category</p>'
                , callback: function () {

                    // call server side here
                }
            });
        });

    });
</script> 
```

**如何在我的 javascrpt 中调用中继器删除命令逻辑？有没有其他方法可以做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:31:27.477

在按钮单击中使用 OnClientClick 并在其中写入函数名称。当函数返回 false 时，则不调用服务器端方法。如果 JS 函数返回 true，则执行服务器端方法

```
<asp:Button ID="buttonDelete" runat="server" CssClass="btn btn-primary" CommandName="Delete" Text="Delete" onclick="Button_Click_Event" OnClientClick="return Javascript_Function()" CommandArgument='<%# Eval("CategoryId") %>'/> 
```

OnClientClick，是在按钮和它的回发之间获取的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:36:44.317

您可以使用中继器的 ItemDatabound 属性将 Javascript 函数绑定到 Dalete Button Onclick 事件，如下所示...

**代码隐藏：-**

```
 void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e)  
 {     
   if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
      {
        int IdToBeDeleted=((Label)e.Item.FindControl("idFieldControl")).Text;     
        Button Btn= (Button)e.Item.FindControl("buttonDelete");     
        Btn.Attributes.Add("onclick","return ConfirmDelete('"+IdToBeDeleted+"')");    
      }

 } 
```

**Javascript：**

```
<script>  
  function ConfirmDelete(var idVal) 
  {    
     if(Confirm("Are you sure, you want to delete this category?")) 
      {
         var xmlhttp;
         if (window.XMLHttpRequest)
         {// code for IE7+, Firefox, Chrome, Opera, Safari
             xmlhttp=new XMLHttpRequest();
         }
         else
         {// code for IE6, IE5
             xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
         }

         xmlhttp.onreadystatechange=function()
         {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
               {
                 alert(xmlhttp.responseText);
               }
         }
          xmlhttp.open("POST","DeletePage.aspx?id="+idVal,true);  
          xmlhttp.Send();
      }
  } 
</script> 
```

**删除页面.aspx：**

```
function pageLoad(sender, eventArgs) 
{ 
    if(!IsPostBack)
     {
       int IdToBeDeleted=Request.QueryString["id"];
       Write Your Delete Code Here...
       if delete successful...Response.Write("Delete Successful");
     }
} 
```

# cocoa - 如何在表头中显示排序指示符？

> ID：11880279
> 
> 赞同：1
> 
> 时间：2012-08-09T09:21:03.043
> 
> 标签：cocoa, nstableview, nssortdescriptor, nstablecolumn

我`NSTableColumn`使用`sort descriptors`. 我将以下代码用于`Sorting`.

```
 NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Column3" ascending:NO];
        NSArray *sortDescriptors= [NSArray arrayWithObject:sortDescriptor];
        [self.dataArray sortUsingDescriptors:sortDescriptors];

[tableView setIndicatorImage:[NSImage imageNamed:@"NSAscendingSortIndicator"]
                          inTableColumn:[tableView tableColumnWithIdentifier:@"Column3"]]; 
```

我可以从中获取图像`[NSImage imageNamed:@"NSAscendingSortIndicator"]`，但我无法在 tableview 标题中查看图像。

有什么方法可以模拟`mouse click`在.`table column``Sort indicator``table column`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:45:34.370

以下代码将在不单击标题的情况下更新排序指示器。

```
[self.tableView setSortDescriptors:sortDescriptors]; 
```

# facebook - 通过 Facebook 电子邮件邀请朋友的问题

> ID：11880281
> 
> 赞同：0
> 
> 时间：2012-08-09T09:21:11.810
> 
> 标签：facebook, facebook-graph-api, invite

我希望我的用户通过向他们发送 Facebook 私人按摩来邀请他们的朋友。我正在考虑使用发送按钮，但问题是每个邀请 url 都是不同且唯一的，所以如果我使用发送按钮来执行此操作，我可能需要创建许多发送按钮，每个按钮都带有唯一的 href。我认为这应该工作？但理想情况下，我希望用户只需在多朋友选择器中选择他们的朋友，然后只需单击发送按钮即可完成所有操作。有任何想法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:43:22.883

您可以为消息生成一个唯一 URL，其中包括用户想要向其发送消息的所有用户的 ID。然后，当收件人访问 URL 并对其进行身份验证时，您可以将 URL 及其用户 ID 交叉引用到您数据库中的内容。

在不知道消息包含什么、它的目的以及你想要达到什么的情况下，这是我能想到的最好的方法。

您将无法知道消息实际发送给谁，因为 Facebook 不会在回调中返回用户 ID，但如果您具有 read_inbox 权限，您应该能够以这种方式查找用户 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:57:07.383

我认为解决此问题的更好方法是设置邀请系统，在您登录的 register.php 中有一个邀请码字段，将该信息存储在用户帐户数据库中并设置可以使用的次数

# javascript - 在javascript中将声音转换为字节数组

> ID：11880284
> 
> 赞同：0
> 
> 时间：2012-08-09T09:21:21.350
> 
> 标签：javascript, jquery

我正在寻找一些关于如何仅使用 javascript 将声音（.amr/.wmv）文件转换为字节数组的想法/指针

请指教

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:08:28.427

您可以查看这篇博文以了解[JS 文件阅读器 API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。基本上你想使用 JS File Reader API 的 readAsArrayBuffer() 来读取文件并取回一个字节数组。

# google-maps - 如何让我的网站出现在谷歌搜索中，不仅包含名称和地址，还包含地图和红色标记？

> ID：11880285
> 
> 赞同：0
> 
> 时间：2012-08-09T09:21:22.387
> 
> 标签：google-maps, search, marker, street-address

我们是博洛尼亚 CIBO 的烹饪学院。通过 Augusto Righi 30b bologna italy 40126。例如，如果您在谷歌 o bologna 烹饪学校搜索另一所带有地图的学校......但我的地方从来没有。如何获取地图和标记以显示在谷歌搜索中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:23:12.773

我相信这不能直接启用并在 Google 对您的排名足够高时出现。但是，您可以通过在您的网站上提供地址并使用 Google 网站管理员工具进行设置来帮助自己。在网站管理员工具下的网站内查看优化 > 结构化数据下的视频。还可以通过网站管理员工具再次在 Google Places 下进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:34:20.817

你必须把你的生意放在谷歌地图上

[https://accounts.google.com/ServiceLogin?service=lbc&passive=1209600&continue=http://www.google.com/local/add/businessCenter?hl%3Den%26gl%3Dus&followup=http://www.google。 com/local/add/businessCenter?hl%3Den%26gl%3Dus&hl=en](https://accounts.google.com/ServiceLogin?service=lbc&passive=1209600&continue=http://www.google.com/local/add/businessCenter?hl%3Den%26gl%3Dus&followup=http://www.google.com/local/add/businessCenter?hl%3Den%26gl%3Dus&hl=en)

然后他们会要求确认地址（他们会寄给你一张明信片）和电话确认

如果他们搜索您的位置，这将显示您的位置，但是这被视为关联搜索，可能不会显示其他关键字

# c++ - C ++在if语句中声明变量

> ID：11880288
> 
> 赞同：1
> 
> 时间：2012-08-09T09:21:32.513
> 
> 标签：c++, declaration

我在 C++ 中有一个非常基本的问题，我正在读取一个制表符分隔的文件，如果文件具有的字段数（使用具有不同宽度的不同文件），我想声明一个带有维度的数组，所以我需要阅读第一行并计算字段数，我试过这个：

```
while(getline(t, line));{
...
if(!flag)
{int array[size][5];
flag=1}
...
} 
```

但后来我得到了错误：

错误：未在此范围内声明“数组”

我理解这是因为变量的范围在 if 循环中，有没有办法声明一个空数组并调整它的大小？还是我必须使用指针？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:24:31.730

数组的大小必须是编译时常量。`std::vector`如果您想要一个动态大小的数组，请使用 a 。

您的代码的其他问题：

1.  删除 , 之后的分号`while`，否则您的循环体将仅在读取整个文件后执行一次。

2.  后加分号`flag=1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:26:20.947

您正在编写 C++，那么为什么不使用`std::vector<std::vector<int> >`? 如果可能（在这里）尽量不要使用原始指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:23:42.987

指针将是要走的路...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:04:53.280

int array[size] 仅在 C99 中才有可能。在 C++ 普通 C 数组中，数组大小应该是编译时常量。

# c# - 检查给定的路径字符串是否无效

> ID：11880293
> 
> 赞同：2
> 
> 时间：2012-08-09T09:21:38.037
> 
> 标签：c#, file-io, uri, filepath

我这里有一个应该接受文件路径的文本框。我应该如何验证（通过单击按钮）给定的路径文件是否存在？

例如，“C:MyDocs\sample.txt”应该是无效的，因为它实际上并不存在于我的本地驱动器中，并且在“C:”之后没有“\”。

我试过用这个：

```
FileInfo fi = new FileInfo(fName);
 if (fi.Exists)
    //do something 
```

但这不能满足我的问题..有人可以建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:23:32.113

```
if(!File.Exists(filename))
{
// file does not exist or path is invalid
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:42:54.920

用于`Uri.IsWellFormedUriString(path, UriKind.Absolute);`检查路径是否有效（除了文件是否存在）

在这里阅读 Uri 验证：http: [//msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)

样本：

```
bool isValid = Uri.IsWellFormedUriString(fName, UriKind.Absolute) &&
               File.Exists(fName); 
```

如果结果为真，则可以确定用户提供的文件格式有效且文件存在@文件系统。

# pentaho - 你可以在 Pentaho 勺子工具中运行 jar 文件吗？

> ID：11880296
> 
> 赞同：1
> 
> 时间：2012-08-09T09:21:50.473
> 
> 标签：pentaho, kettle

我想在 Pentaho 勺子工具中运行一个包含 java 代码的 jar 文件。此运行是通过接受输入、在此数据之上运行 java 类然后在某处提供输出的单个步骤。Pentaho Spoon 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:45:21.203

这很容易。只需将 jar 文件与其他 jar 一起弹出到 lib 目录中，然后从修改后的 javascript 步骤中调用它。（或者如果那更适合你想要做的事情，甚至可能是java类步骤）

我已经这样做了好几次——最近一次是为了一些必须在 java 中完成的自定义解码，并且由于 janino 不支持它而无法在 java 步骤中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-30T22:29:07.710

另一种方法：

*   将 jar 直接留在项目中，无需复制
*   在您的项目文件夹中创建一个简单的 bash 脚本“run.sh”，其中包含“java -jar yourjar.jar”。您也可以直接在勺子中添加该行并跳过此步骤
*   在你的工作中，添加一个“执行 shell 脚本”并指向 run.sh

完成，脚本的结果代码决定成功与否

为什么这样？我讨厌记录 api 的方式，没有用勺子、Java 或 Javascript 完成代码，这样你就可以在外面编写代码并依赖于工作系统

# git - Github 工作流程和拉取请求显示不需要的提交

> ID：11880297
> 
> 赞同：1
> 
> 时间：2012-08-09T09:21:56.507
> 
> 标签：git, github, merge, commit, pull-request

在我们的业务中，我们有以下设置（非常简化的版本），非常标准：

*   一个主分支，它通过钩子更新实时环境。
*   一个测试分支，用于 QA、UA，它以相同的方式更新测试环境。

该存储库托管在 GitHub 上。

工作流程通常如下：

*   从主人那里拉
*   创建一个分支，例如 Ticket1 来处理特定的工单
*   做工作，在本地测试
*   提交并推送分支 Ticket1
*   通过 github 中的 pull request 将 Ticket1 合并到测试中，这允许我们进行同行代码审查等。

也很标准。当我们有时会遇到向测试分支发出拉取请求时，在拉取请求中，github 显示的提交比应该由开发人员完成的提交要多。经过调查，当这种情况发生时，我们已经意识到至少有一个特殊情况（可能不是唯一一个）：

1.  开发者 A 进行一些更改以进行测试，通过 QA 和 UA，并与 master 合并。
2.  开发人员 B 进行了更多更改。与master合并时，有冲突。开发人员 B 解决了冲突，并在新的提交中提交了对冲突的修复，id 为 1234567
3.  开发人员 A 开始处理另一张工单：他从 master 拉取（因此拉取 1234567 提交），创建一个分支，提交，推送，当在 GitHub 上发出拉取请求以将他的分支合并到测试时，GitHub 想要合并其提交加上 1234567。这让他感到害怕，因为他对那个特定的提交一无所知。

我搜索了类似的问题，我至少发现：

*   [为什么我的 GitHub 拉取请求有两个提交？](https://stackoverflow.com/questions/5362213/github-my-pull-request-has-2-commits)
*   [如何在 GitHub 中仅使用我的分叉存储库的主分支中的最新提交来执行拉取请求](https://stackoverflow.com/questions/5561161/how-to-do-a-pull-request-in-github-with-only-the-latest-commit-in-the-master-bra)
*   [仅在 GitHub 上发送拉取请求以获取最新提交](https://stackoverflow.com/questions/5256021/send-a-pull-request-on-github-for-only-latest-commit)

他们处理了一个命令行解决方案（基本上使用'rebase'）。但是他们没有为我们解决根本问题，那就是如何避免这种情况发生。我想知道为什么会发生这种情况，也就是说，我们知道什么*时候*会发生这种情况，但我们不知道是因为我们的工作流程存在根本性的缺陷，还是因为我们遗漏了一些关于 github 如何创建拉取请求的信息。

当然，这一定发生在你之前。你如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:55:55.080

我猜你有一个程序“锁定”问题，各种票证分支的起点及其合并点在拉点和最终合并和修复点之间已经重叠。

开发人员认为他们已经在拉取请求中完成了 ticket1，但实际上不应该在合并和修复 [几小时/几天后？] 之前启动 ticket2 的分支。否则，修复程序实际上不会在ticket2 开始时显示。然后，当ticket2 被拉出时，它仍然没有修复，所以看起来它需要重新应用。

假设您想要一个线性序列的票证合并循环，开发人员需要重新获取 master（包含所有商定的修复！），并在他们发出拉取请求之前进行 rebase。

使用 gitk 或类似工具来可视化围绕这些问题之一的所有分支，并检查时间戳和审查会议时间，看看这是否是隐藏的死区。

# c# - 通过c#获取IP地址（IPv4值）

> ID：11880303
> 
> 赞同：1
> 
> 时间：2012-08-09T09:22:17.397
> 
> 标签：c#, networking, ip

> **可能重复：**
> [从 Dns.GetHostEntry() 获取 IPv4 地址](https://stackoverflow.com/questions/1059526/get-ipv4-addresses-from-dns-gethostentry)

我尝试使用以下代码获取我的 IP 地址，在 XP 中，它返回 IP 地址 V4 格式，但是当我在我的系统（Windows 7）中执行此操作时，它返回 V6 格式的 IP 地址。

如何解决这个问题？

代码

```
try
{
      //iphostname = Dns.GetHostName();  // Resolving Host name
      IPHostEntry ipentry = Dns.GetHostEntry(hostLabel.Text);
      IPAddress[] addr = ipentry.AddressList;// Resolving IP Addresses
      for (int i = 0; i < addr.Length; i++)
      {
           try
           {
               ipLabel.Text = Convert.ToString(addr[i]) + "\r\n";
           }
           catch
           {
               ipLabel.Text += "IP Address            | " + "\r\n";
           }
      }
}
catch
{
     //richTextBox1.Text += "Hostname             | " + "\r\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:30:34.460

```
try
           {
               ipLabel.Text += Convert.ToString(addr[i]) + ";";
           } 
```

由于在 Windows 7 中启用了 IPv6，它将返回 IPv4 和 IPv6 ，并且您的循环正在删除一些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:44:52.873

尝试这个，

```
 string strHostName = "";
 strHostName = System.Net.Dns.GetHostName();
 IPHostEntry ipEntry = System.Net.Dns.GetHostEntry(strHostName);
 IPAddress[] addr = ipEntry.AddressList;
 ipLabel.Text = addr[addr.Length - 2].ToString(); 
```

# mysql - 为什么 MySQL 给出错误“不允许从函数返回结果集”？

> ID：11880306
> 
> 赞同：16
> 
> 时间：2012-08-09T09:22:27.673
> 
> 标签：mysql, sql, sql-function

我正在尝试使用*phpMyAdmin*创建一个 MySQL 函数并收到此错误。

> #1415 - 不允许从函数返回结果集

功能代码如下：

```
DELIMITER $$

CREATE FUNCTION get_binary_count(a INT, c INT)
RETURNS INT
DETERMINISTIC 

BEGIN
    DECLARE c1, c2 INT;
    SET c1 = 0;
    SET c2 = 0;

    SELECT left_id  AS c1 FROM mlm_user_mst WHERE parent_id = a AND left_id > 0;
    SELECT right_id AS c2 FROM mlm_user_mst WHERE parent_id = a AND right_id > 0;

    IF (c1 > 0 AND c2 > 0) THEN
        SET c = c + 1;
        SET c = c + get_binary_count(c1, 0);
        SET c = c + get_binary_count(c2, 0);
    END IF;

    RETURN c;
END$$

DELIMITER ; 
```

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-09T09:24:13.080

因为

```
SELECT left_id AS c1 FROM mlm_user_mst WHERE parent_id=a AND left_id>0; 
```

不设置变量 c1，它返回一个包含名为 c1 的列的集合

你要

```
SELECT left_id INTO c1 FROM mlm_user_mst WHERE parent_id=a AND left_id>0; 
```

对于 c2 也是如此。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T09:24:25.077

那是因为您正在使用`SELECT`查询，其输出未存储到变量或临时变量中，`FUNCTION`其中必须。函数只能返回一个值。所以你的代码应该是这样的：

```
CREATE TABLE t1 AS SELECT left_id AS c1 FROM mlm_user_mst WHERE parent_id=a AND left_id>0;
CREATE TABLE t2 AS SELECT right_id AS c2 FROM mlm_user_mst WHERE parent_id=a AND right_id>0; 
```

或者

```
SELECT left_id AS c1 INTO @c1 FROM mlm_user_mst WHERE parent_id=a AND left_id>0 LIMIT 1; 

SELECT right_id AS c2 INTO @c2 FROM mlm_user_mst WHERE parent_id=a AND right_id>0 LIMIT 1; 
```

# xaml - 使用 xaml 定义用户控件的内容和绑定数据

> ID：11880307
> 
> 赞同：1
> 
> 时间：2012-08-09T09:22:35.997
> 
> 标签：xaml, user-controls, contentcontrol

我正在尝试创建一个用户控件，该控件具有将其内容绑定到依赖对象的内容控件。代码如下

Xaml

```
 <ContentControl Grid.Column="1" HorizontalAlignment="Stretch" x:Name="NotifyContent" Content="{Binding ElementName=notifyBarCtrl, Path=Content, NotifyOnSourceUpdated=True}" /> 
```

C＃

```
public object Content
{
    get { return (object)GetValue(ContentProperty); }
    set { SetValue(ContentProperty, value); }
}

// Using a DependencyProperty as the backing store for Content.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ContentProperty =
    DependencyProperty.Register("Content", typeof(object), typeof(NotifyBar)); 
```

我遇到的问题是，当我尝试使用 xaml 将内容定义为文本块，然后将文本属性绑定到我的应用程序中的字符串时，当字符串更改时它无法更新：

我的应用程序代码如下

Xaml

```
<ctrl:NotifyBar DockPanel.Dock="Top" Background="White" HorizontalAlignment="Stretch" >
    <ctrl:NotifyBar.Content>
        <TextBlock Height="30" Text="{Binding ElementName=MainWindow, Path=NotifyMessage, Mode=TwoWay}" HorizontalAlignment="Stretch" />
    </ctrl:NotifyBar.Content>
</ctrl:NotifyBar> 
```

C＃

```
 public string NotifyMessage
    {
        get { return _NotifyMessage; }
        set 
        {
            if (_NotifyMessage != value)
            {
                _NotifyMessage = value;
                OnPropertyChanged("NotifyMessage");
            }
        }
    } 
```

任何关于我可能遗漏或可能做错的建议将不胜感激。

谢谢

[编辑]

此后，我将 Content 依赖属性更改为 NotifyContent，因为我收到警告说它正在将 Content 覆盖为 UserControl 但这仍然没有解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:49:00.840

所以我发现这是因为我在文本块中使用了 elementname。

如果我将用户控件的 DataContext 设置为元素并绑定到它的属性。

见下文：

```
<ctrl:NotifyBar DataContext="{Binding ElementName=MainWindow}"  DockPanel.Dock="Top" Background="White" HorizontalAlignment="Stretch" >
    <ctrl:NotifyBar.Content>
        <TextBlock Height="30" Text="{Binding Path=NotifyMessage, Mode=TwoWay}" HorizontalAlignment="Stretch" />
    </ctrl:NotifyBar.Content>
</ctrl:NotifyBar> 
```

# javascript - 在数据表中使用 JSON 对象而不是数组

> ID：11880309
> 
> 赞同：1
> 
> 时间：2012-08-09T09:22:46.767
> 
> 标签：javascript, jquery-datatables

在[Datatables](http://datatables.net/)中，有没有办法使用从服务器发送的数据作为 JSON 对象数组？似乎预期的格式是数组数组。

[http://jsbin.com/oqisiz/1](http://jsbin.com/oqisiz/1)

这种格式有效：

```
var table1Data = [['John', 36], ['Jane', 25]]; 
```

但这不会：

```
var table2Data = [{Name: 'John', Age: 36}, {Name: 'Jane', Age: 25}]; 
```

（请如实回答 Datatables 是否支持这一点，而不是把它变成关于哪种格式更好的辩论）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:01:53.433

该解决方案[记录在此处](http://datatables.net/release-datatables/examples/ajax/objects.html)- 只需用于`mData`指定您需要的列，而不是`sTitle`：

```
$(document).ready(function() {
    var oTable = $('#example').dataTable( {
        "bProcessing": true,
        "sAjaxSource": "sources/objects.txt",
        "aoColumns": [
            { "mData": "engine" },
            { "mData": "browser" },
            { "mData": "platform" },
            { "mData": "version" },
            { "mData": "grade" }
        ]
    } );
} ); 
```

# selenium - MSTest TeamCity - 使用特定配置文件使用 MS 测试运行 selenium

> ID：11880310
> 
> 赞同：0
> 
> 时间：2012-08-09T09:22:46.770
> 
> 标签：selenium, webdriver, teamcity, mstest

我需要使用特定的配置文件来使用 TeamCity 运行 selenium 测试。

有 4 个环境，每个环境需要使用 4 个不同的配置文件。

任何人都可以指导我如何实现这一目标。

我不确定为此需要在哪里以及需要进行哪些更改。

我正在使用 TeamCity、MStest VS 2010、Selenium Webdriver。

我有用于 DEV、持续集成、登台和直播的不同 URL。有没有办法在运行 TeamCity 的测试时处理这个不同的 URL。我正在使用配置文件，我猜它可以用于此目的。在这方面的任何帮助将不胜感激。

谢谢阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:15:35.090

您可以编写一个 Nant 脚本来一个接一个地执行测试。使用 XmlPoke 在测试运行之间更改配置文件。

# ruby-on-rails - Rails 路由 - 使用块 AND 状态码进行重定向

> ID：11880314
> 
> 赞同：7
> 
> 时间：2012-08-09T09:23:19.053
> 
> 标签：ruby-on-rails, ruby, routing

好吧，我一直用这个撞到一堵砖墙上 - 非常感谢任何帮助！

我正在重定向旧网址，并且在大多数情况下这很容易并且运行良好，例如：

```
match '/pages/holiday-specials/', :to => redirect( "/accommodation", :status => 301 ) 
```

但是，我需要一个特殊的包罗万象的规则来进行一些正则表达式检查。这很好用，除非我不能让它通过状态。这会重定向并执行我需要的操作，但不会发送 301 状态：

```
match '/*:path', :to => redirect( lambda { |params| "/operator/#{/[^\d](\d+)([^\d]|$)/.match(params[:path])[1]}" }, :status => 301) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-27T12:02:54.110

将块移到方法括号外，如下：

```
match '/*:path', :to => redirect(:status => 301) { |params| "/operator/#{/[^\d](\d+)([^\d]|$)/.match(params[:path])[1]}" } 
```

或将其拆分为多行：

```
match '/*:path', :to => redirect(:status => 301) do |params|
  "/operator/#{/[^\d](\d+)([^\d]|$)/.match(params[:path])[1]}"
end 
```

# jquery - jQuery 脚本平滑滚动到具有不同偏移量的不同部分

> ID：11880318
> 
> 赞同：6
> 
> 时间：2012-08-09T09:23:32.910
> 
> 标签：jquery, scroll, target

我正在为我的一页网站使用平滑滚动脚本。它滚动到每个锚点。

由于设计原因，我不能让锚点直接卡到页面顶部。我不得不创建隐藏在页面上方的锚点，这样它就不会完全贴合到顶部。

这是我目前使用的脚本：

```
jQuery(document).ready(function($) {
    $(".scroll").click(function(event){ 
        event.preventDefault();
        $('html,body').animate({
            scrollTop: $('[name="' + this.hash.substring(1) + '"]').offset().top
        }, 500);
    });
}); 
```

我被告知我可以在这个脚本中进行偏移。与其到处都有这些隐藏的小锚，我可以简单地在顶部的末尾添加一些东西以将其偏移一定数量的像素。这将是最高的 - 250

```
$('html,body').animate({
    scrollTop:$('[name="' + this.hash.substring(1) + '"]').offset().top - 250
}, 500); 
```

问题是这会使偏移量始终为 250px，我需要它是可变的，例如，投资组合 div 可以用 200px 的偏移量锚定，但联系人 div 只能固定 50px。

谁能帮我在脚本中编写某种选择器，让我可以根据锚定的 div 调整这个顶部 - [变量]？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T12:38:59.220

您并没有真正说明确定命名锚的*最高*值的偏移量的规则是什么。

因此，也许最简单的方法是引入一个属性，您可以使用该属性来调整命名锚点或您希望滚动到视图中的任何元素的偏移量。

因此，例如，这是一个命名锚点，带有一个名为的新属性`data-section-offset`，我想*偏移*20px。

```
<a id="myAnchor" data-section-offset="20">My Section</a> 
```

在您的点击处理程序中，您可以提取动画的属性值。

```
jQuery(document).ready(function($) {

    $(".scroll").click(function(event) {
        event.preventDefault();        
        var $anchor = $('#' + this.hash.substring(1));
        $('html,body').animate({ 
            scrollTop: $anchor.offset().top - $anchor.attr('data-section-offset')
        }, 500);        
    });
}); 
```

这是一个[小提琴](http://jsfiddle.net/PGnPC/35/)来展示更多的例子。

注意：JQuery 具有 data 方法，因此可以像这样提取属性（如上）

```
$anchor.attr('data-section-offset') 
```

或者像这样

```
$anchor.data('section-offset') 
```

正如@Ben 指出[的自定义数据属性的 HTML5 规范](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)非常有用 > [HTML 5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:48:29.347

首先，您不需要使用旧的`<a name=`约定。查看 w3schools 上的锚点页面 w3schools 上的[HTML 锚点](http://www.w3schools.com/html/html_links.asp)。最佳实践是现在通过 id 链接容器元素。

因此，如果您要链接到包含某些内容的 div，请使用`<div id="linkToMe">My content in here.</div>`and `<a href="#linkToMe">The link text</a>`。

这当然会破坏您的上述代码，因为它正在按名称查找元素。您想通过 id 查找它们（无论如何更快！）。

在我的网页中，我在顶部有一个工具栏，有时`position: fixed;`当我滚动时我想偏移滚动位置，这样它就不会在页面顶部的工具栏下方。

我就是这样做的：

```
function goToByScroll(id) {
    //Find toolbar height
    var pageOffset = 0,
        hdr = $('#sub'),
        tb = $('#sitemenu');
    if (hdr.css('position') == 'fixed') { pageOffset += hdr.height() }
    if (tb.css('position') == 'fixed') { pageOffset += tb.height() }

    //Scroll the document
    $('html,body').animate({ scrollTop: $("#" + id).offset().top - pageOffset }, 'slow'); } 
```

然后用 jQuery 连接起来：

```
$(".jumptoid").click(function (e) {
    e.preventDefault();

    // Track in google analytics if you are using it.
    _gaq.push(['_trackEvent', 'Jump to Id', e.currentTarget.host, this.href, 0]);

    // Scroll to item location using jquery
    goToByScroll(this.href.split('#')[1]);

    // Push History in browser bar so the forward/back button works
    window.location.hash = this.href.split('#')[1];

    return false;
}); 
```

如果目标元素的位置是固定的，这将完美地将目标元素的顶部与我的标题/工具栏的底部对齐，如果不是，则将它们与浏览器视口的顶部完美对齐。

在您的情况下，您要么想要更改计算偏移量的方式（而不是我`hdr`和`tb`项目，您可以做一些其他数学运算或查看其他页面元素），或者您可以使用@chris moutray 建议的自定义属性。

如果要使用属性，请使用建议的 html5 开头标准，`data-`以便它通过验证。例如`<div id="linkToMe" data-scroll-offset="250">My content here</div>`，然后使用@chris 的代码来获取该属性，例如`$anchor.attr('data-scroll-offset')`.

# sql - 根据优先级从列中选择值

> ID：11880325
> 
> 赞同：5
> 
> 时间：2012-08-09T09:23:48.283
> 
> 标签：sql, sql-server, sql-server-2008

我有一张这样的桌子

```
AMID 入口
-------- ---------
1000 火星
1001木星
1002 土星
1003 金星
1003 土星
1004 海王星
1004 土星
1005 木星
1005火星

```

现在我想提取具有特定 ENTRY 值的 DISTINCT AMID 值。茶几应该是这样的

```
AMID 入口
-------- --------
  1000 火星
  1001木星
  1002 土星
  1003 金星
  1004 土星
  1005火星

```

选择 ENTRY 值的条件是，

它必须基于此优先级获取值：

> 1.  金星
> 2.  火星
> 3.  木星
> 4.  土星
> 5.  海王星

所以如果任何一个AMID同时有金星和火星，它应该取金星
火星和土星，它应该取火星
海王星和木星，它应该取木星。（按优先级选择）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:37:00.723

您可以使用排名函数来做到这一点（如果您使用的是 SQL Server 2008）：

```
DECLARE @t TABLE (AMID INT, Entry VARCHAR(100))
INSERT @t 
VALUES
(       1000                   ,'MARS'),
(       1001                   ,'JUPITER'),
(       1002                   ,'SATURN'),
(       1003                   ,'VENUS'),
(       1003                   ,'SATURN'),
(       1004                   ,'NEPTUNE'),
(       1004                   ,'SATURN'),
(       1005                   ,'JUPITER'),
(       1005                   ,'MARS')

;WITH a AS(
    SELECT  *,
            ROW_NUMBER() OVER (PARTITION BY AMID ORDER BY 
                CASE Entry 
                    WHEN 'VENUS' THEN 0
                    WHEN 'MARS' THEN 1
                    WHEN 'JUPITER' THEN 2
                    WHEN 'SATURN' THEN 3
                    WHEN 'NEPTUNE' THEN 4
                END) num
    FROM    @t
)

SELECT  AMID, Entry
FROM    a
WHERE   num = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T09:38:59.233

试试这个：

```
;WITH CTE AS (
SELECT *,ROW_NUMBER() OVER(PARTITION BY AMID ORDER BY T.PRIORITY) AS ROWNUM
FROM PLANETS P
JOIN
    (
    SELECT 1 PRIORITY, 'VENUS' AS NAME UNION ALL
    SELECT 2, 'MARS'  UNION ALL
    SELECT 3, 'JUPITER'  UNION ALL
    SELECT 4, 'SATURN'  UNION ALL
    SELECT 5, 'NEPTUNE')T
ON T.NAME=P.[ENTRY]
)SELECT AMID,[ENTRY] FROM CTE WHERE ROWNUM=1 
```

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/e5d74/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:27:32.067

试试这个 MySQL 查询：

```
SELECT AMID, (CASE MIN(Entry) WHEN 1 THEN "VENUS"
                              WHEN 2 THEN "MARS"
                              WHEN 3 THEN "JUPITER"
                              WHEN 4 THEN "SATURN"
                              WHEN 5 THEN "NEPTUNE"
              END) AS Entry
FROM (
       SELECT AMID, (CASE Entry WHEN "VENUS" THEN 1
                                WHEN "MARS" THEN 2
                                WHEN "JUPITER" THEN 3
                                WHEN "SATURN" THEN 4
                                WHEN "NEPTUNE" THEN 5
                     END) AS Entry
       FROM table_name
      ) a
GROUP BY AMID; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T09:46:47.170

你为什么不把条目值放在他们自己的表中：

```
CREATE TABLE entry_value
(
    entry VARCHAR(10) NOT NULL PRIMARY KEY,
    value INT NOT NULL
);

INSERT INTO entry_value VALUES
    ('VENUS', 0),
    ('MARS', 1),
    ('JUPITER', 2),
    ('SATURN', 3),
    ('NEPTUNE', 4)    
; 
```

然后找到你想要的东西是微不足道的：

```
SELECT
    a.amid,
    (SELECT entry FROM entry_value where value = MIN(e.value)) AS entry
FROM amid a
JOIN entry_value e
ON e.entry = a.entry
GROUP BY a.amid
ORDER BY a.amid; 
```

作为额外的奖励，您可以在条目列中添加一个外键，这样人们就不能`1000, 'PLUTO'`在里面放垃圾了。

# performance - 在sqlserver中查询大量数据？

> ID：11880327
> 
> 赞同：1
> 
> 时间：2012-08-09T09:23:56.073
> 
> 标签：performance, sql-server-2008, jpa, jpql

我在一个项目中工作，从数据库中检索数据需要时间，因为**记录**数超过**2000**。我正在使用**JPQL**查询数据库并将其显示在**JQGRID**中。

**任何人都可以建议或指导我如何从数据库中查询大量数据而花费更少的时间。**

我很乐意提供所需的任何额外信息

如果已经有解决方案，请指导我....

谢谢 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:06:15.903

您需要做的第一件事是分析您的查询以查看您的时间都花在了哪里。45 似乎是阅读 2,000 条记录的疯狂时间。在一个简单的桌面上，我可以在不到 1 秒的时间内读取 10,000 多个简单对象。你的对象很复杂吗？

您可能希望首先启用日志记录，这可能是您花费时间获取关系（n+1 问题）。

如果您使用的是 EclipseLink，您可以启用 PerformanceMonitor，它可以为您提供时间花费的配置文件转储。使用 JProfiler 之类的 Java 分析器也很好。

另请参阅 [http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html](http://java-persistence-performance.blogspot.com/2011/06/how-to-improve-jpa-performance-by-1825.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:18:06.990

在我们成功地告诉您如何解决您的问题之前，您需要缩小问题发生的范围。获取生成结果集的查询并使用 SSMS 直接针对数据库运行它，以查看执行纯查询需要多长时间。如果它执行得非常快，那么你的问题出在 UI 上。如果它是在实际的数据库服务器性能本身，那么您需要查看查询调优和优化以及潜在的索引。

关于后一个主题有很多文章，例如以下文章：

[http://www.sql-server-performance.com/2004/query-tuning/](http://www.sql-server-performance.com/2004/query-tuning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:45:22.843

你应该使用分页。有关一些示例，请参阅[jqGrid 文档](http://www.trirand.com/blog/jqgrid/jqgrid.html)（PHP 与 MySql，但将其适应 Sql Server 和 JPQL 应该不会太难）。

# python - 使用 web2py 流式传输 couchdb 附件

> ID：11880330
> 
> 赞同：3
> 
> 时间：2012-08-09T09:24:09.307
> 
> 标签：python, streaming, couchdb, web2py, html5-audio

`couchdb`我在数据库中有一些声音文件*（与 web2py 无关）*。我的`web2py`应用程序可以访问此数据库，并且我想流式传输声音文件，以便可以使用 HTML 音频标签收听它们，如下所示：

```
<audio src="http://www.myserver.com/.../track06.mp3" preload="auto"></audio> 
```

我打算根据这个[建议的例子](http://www.web2py.com/examples/default/examples#streaming_examples)来做这个流式传输：

```
def streamer():
    import os
    path=os.path.join(request.folder,'private','largefile.mpeg4')
    return response.stream(open(path,'rb'),chunk_size=4096) 
```

但我有一些悬而未决的问题：

1.  我的**文件名**不在本地文件系统中，而是在`couchdb`数据库中，可通过 REST 访问。如何**打开**它进行流式传输？
2.  音频标签在激活时会发送什么样的请求，GET/POST/...？这可以处理`web2py`吗？

基本上，我想知道是否有人`couchdb`通过`web2py`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:10:41.637

我现在使用的解决方案是这样的：

```
def open_remote_recording():
    recording_doc_id, recording_id = tuple(request.args)
    url = get_doc_url(server = RECORDINGS_SERVER, database = RECORDINGS_DATABASE, doc_id = recording_doc_id, attachment = recording_id)
    content_type = 'audio/mp3'
    f = urllib.urlopen(url)
    return f

@auth.requires_login()
def recordings():
    f = open_remote_recording()
    return response.stream(f, chunk_size=4096) 
```

该`get_doc_url`功能只是创建一个 url 来访问附件。content_type 是固定的，但这应该从附件中获得（我还不知道如何做到这一点）。

# css - CSS 类继承/选择器

> ID：11880331
> 
> 赞同：0
> 
> 时间：2012-08-09T09:24:09.710
> 
> 标签：css, jquery-plugins

对于 CSS 爱好者来说，这可能是一个足够简单的问题：

我有一个简单的无序列表：

```
<ul><li>Hello</li></ul> 
```

我想将以下 css 类应用于它：

```
.style {
   height: 100%x;
   width: 100%;
}

.style ul {
    list-style-type: none;
}

.style li {
    //stuff
} 
```

假设我的列表没有父容器（我正在构建一个插件，所以谁知道人们将如何应用它）将这些样式应用于这些元素的最有效方法是什么？我想如果我将该`.style`类应用于 ul ，那么列表将自动继承所有子类。情况似乎并非如此。我是否必须循环每个元素并应用特定的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:26:19.150

将`style`类应用于您的`ul`并使用以下 CSS 选择器：

```
ul.style {
   height: 100%x;
   width: 100%;
}

ul.style {
    list-style-type: none;
}

ul.style li {
    //stuff
} 
```

* * *

`.style ul`正在说明“`ul`为嵌套在具有`style`类的元素中的任何样式设置样式。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:26:28.960

将`.style`类添加到您`ul`的 css 应该是这样的：

```
ul.style { 
    list-style-type: none; 
} 

ul.style li { 
    //stuff 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:26:51.583

您至少需要一个元素来包含样式类。

```
<div class="style"><ul><li></li></ul></div> 
```

否则您的样式将不会被应用。

# jquery - IE7 & jquery ajax XML：本地 xml 文件的权限被拒绝

> ID：11880337
> 
> 赞同：10
> 
> 时间：2012-08-09T09:24:31.723
> 
> 标签：jquery, xml, ajax, internet-explorer-7

```
$('.upload').change(function () {
    var $container = $('#container');
    $container.find('input:checkbox, input:text, select').val('');

    var $thisUpload = $(this);
    var path = 'file:///' + $thisUpload.val().replace(/\\/g, "/");

    $.ajax({
        url: path,
        dataType: 'xml',
        success: function (data) {
        },
        error: function (request, status, error) {
            if (error.message == 'Permission denied') {
                //this is where i end up
            }
        }
    });
}); 
```

我知道“被阻止”的文件可能会在 IE 中导致此错误：

![http://webactivedirectory.files.wordpress.com/2011/10/unblockfile.png](../Images/4f923963c3f2980be424cc8b5af2f704.png)

但是，此文件未被阻止。它位于包含上述代码的 .html 文件旁边。

什么可能导致“权限被拒绝”。我非常怀疑这是由于相同的原产地政策。

任何帮助深表感谢。谢谢

编辑：这只发生在我使用 ie7 的 windows xp 电脑上。win7中的ie7-mode运行良好。

编辑#2：这只发生在作为邮件附件下载的 xml 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:13:05.610

你说这只发生在作为邮件附件下载的xml文件并且只在win xp上。也许某些防病毒应用程序或您的电子邮件客户端阻止了 xml 附件，您是通过 WWW 客户端还是某些桌面客户端下载附件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T07:08:55.673

听起来您面临与[IE7 中现有的 jQuery AJAX 问题相同的问题（可能还有其他版本）](https://stackoverflow.com/questions/2318743/jquery-ajax-problem-in-ie7-possibly-other-versions-as-well)，其中通过编写代码以在不使用 jQuery 的情况下进行 ajax 调用（创建 XMLHttpObject、onreadystatechange 等）解决了这个问题) 并使用 jQuery 解析 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:27:22.347

出于明显的安全原因，您不能通过 AJAX 访问这样的本地文件。

请注意，该`file:///`协议指向正在执行代码的客户端机器的本地文件系统。

如果文件在您的服务器上，您应该能够修改路径以指向服务器位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T08:53:06.783

只需删除 file:/// 并给出路径本身。这意味着给出路径/文件名.xml

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T18:43:06.387

这更像是一个提示而不是一个答案，但它渴望发表评论。

对不起，但是在 W7 IE7（不是 IE9 浏览器模式）上无法重现，在我的 XP 虚拟机上我也无法重现，所以我可以帮助你的是一些指针。

你可以使用非缩小版调试jquery.ajax，我知道IE7缺少开发者工具可以调试，但是你可以安装IE7开发者工具，它会工作很糟糕，但也许它会工作，如果没有，你需要使用发出警报，或创建自己的 console.log：

```
<div id="console" style="height:100px;position:fixed;bottom:0;left:0;rigth:0"></div>

function log(e){
    $('#console').prepend($('<div>').html(e))
} 
```

您可以开始在 ajax 中查看函数 done(status, nativeStatusText,responses, headers)：function(url, options)

您需要寻找的是错误发生的原因以及这是 jQuery 错误还是 IE7 错误。抱歉，我无法提供更多帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T11:20:56.767

> 我非常怀疑这是由于相同的原产地政策。

你确定吗？您如何访问执行 ajax 请求的页面（页面的 url）？请记住，如果您将浏览器指向：

[http://localhost.loc/page.that.does.the.ajax.request.html](http://localhost.loc/page.that.does.the.ajax.request.html)

并且ajax请求会尝试访问file:///方案，由于同源策略会失败

# android - Horizo ntalScrollView 自定义适配器？

> ID：11880340
> 
> 赞同：3
> 
> 时间：2012-08-09T09:24:49.650
> 
> 标签：android, horizontalscrollview, custom-adapter

我正在尝试使用 制作一个`Gallery`小部件`HorizontalScrollView`，所以在里面`HorizontalScrollView`我添加了`ImageView`s，问题是我要添加 600 多张图片！
我可以制作某种自定义适配器以覆盖该`GetView`方法并使用`convertView`以使应用程序更流畅并避免同时添加 600 多个视图吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T09:55:37.707

`HorizontalScrollView`只能包含一个`View`，因此您必须在绘制它`View`的任何部分时绘制整个。但是，这可以通过

1.  扩展`ViewGroup`为你的孩子`HorizontalScrollView`
2.  在其中使用您的自定义适配器`ViewGroup`并自行调用`getView()`和回收，仅绘制您当前可见的视图`HorizontalScrollView`

**但这将花费很多时间**。我至少会[`HorizontalListView`](https://github.com/dinocore1/DevsmartLib-Android/tree/master/devsmartlib/src/com/devsmart/android/ui "水平列表视图")先尝试类似的东西。可以在[此处](http://www.dev-smart.com/archives/34)找到该特定课程的操作方法。

# ios - Retina iPad 应用程序设计中的 DPI

> ID：11880341
> 
> 赞同：17
> 
> 时间：2012-08-09T09:24:51.073
> 
> 标签：ios, ipad, retina-display, dpi, ppi

我不知道这是否属于 StackOverflow 或其他一些 SE 站点，但这里有。

我有一个 PSD 设计我有一个 iOS 开发团队正在变成一个 Retina iPad 应用程序。但是，此设计是在默认的 72 dpi 中进行的。

开发团队现在说设计应该是 264 dpi（与 Retina iPad 相同）——以及非 Retina 版本的 132 dpi 版本。

这让我很困惑，因为我的印象是 dpi 只代表一英寸输出中有多少像素，因此只在打印中很重要。iPad的dpi仅代表每英寸屏幕的像素数，因此根据我的大脑与PSD的dpi没有任何关系。特别是因为它已经是 Retina 所需的 2048×1536 尺寸。

我告诉了他们，但他们坚持，这让我怀疑自己的正确性。

谁在右边？设计文件的dpi与设备的dpi有关系吗？什么会让原本聪明的开发团队这么想？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T09:32:47.820

**Photoshop 文件的 DPI 无关紧要。**您可以进入 Photoshop 并将 DPI 更改为您想要的任何内容。然而，从非 Retina 转到 Retina 有点像将 DPI 加倍。

如果您已经为 iPad 创建了一个假设分辨率为 1024x768 的设计，则需要将设计重新创建为 2048x1536。dpi 概念发挥作用的地方是数据密度应在视网膜和非视网膜分辨率下保持一致。如果您从非视网膜文件开始，您只需要以原始分辨率的 4 倍重新创建文件中的每个基于位图的元素。这有点像从 72 dpi 到 144 dpi。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-10T21:28:18.920

当您为屏幕工作时，DPI/PPI 没有区别，重要的是屏幕上的像素数量。如果您在**264ppi**或**72ppi为 iPad 设计****2048x1536px** ，那么在这两种情况下它仍然是***2048x1536px***。唯一的区别是如果您在 Photoshop 中全尺寸预览。

 *****PPI = 每英寸像素数。如果您正在处理英寸，PPI 很重要，因为它是该尺寸的密度。如果您按像素测量文档/画布大小，那么密度将是“*每像素像素数*”，这太荒谬了。

只需确保您以准确或更高的像素进行设计，以便在旧 iOS 设备、低分辨率 Android、桌面网络等需要时缩小它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-09T09:32:36.090

**你说的对。**

在 PSD 中，DPI 并不重要，因为它仅用于系统确定如何打印文件。

您可以随时更改 PSD 的 DPI 设置以使他们满意 :)*这绝对不重要。*

如果设置为 264 DPI，则 2048*1536 的打印图像将与 iPad 大小完全相同。

同样，设置为 132 DPI 的 SD 1024*768 图像大小相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T16:09:29.103

不要忘记，具有比正常尺寸显示更高的分辨率的图像在放大时可以改善图形的外观。缩放一直在 iOS 中发生，尤其是在 iPhone 上，因为屏幕太小而没有真正的用处，而且很容易做到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T11:42:18.987

DPI 非常重要。您不能只是正确地提高 dpi，您必须以最高 dpi 甚至更好的适当 dpi 进行开发。例如，假设您正在使用效果中的算法创建平滑、圆润的边缘。当 dpi 较高时，它会填充曲线中的每个变化并选择每个颜色渐变，从而使细节层次更加精细。A;虽然 yu 可以弹出并将 dpi 从 72 更改为 132 或 264，但它不会应用每个效果、您自己等的智能，它只是根据那里的内容进行填充。这意味着您正在破坏更清晰的高 dpi 屏幕的全部目的，并将其降低到 72 dpi 的质量。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2012-08-09T10:14:14.637

即使您认为您的权利，“开发”团队也不会只听他们说的话，将 DPI 提高到 144 并给他们图像。

当你能在 5 分钟内完成这件事时，为什么要大肆宣传呢？他们显然是错的，但为什么要浪费你的时间。*****

# ruby-on-rails - 使用黄瓜远程测试连接到 VM 的问题

> ID：11880342
> 
> 赞同：0
> 
> 时间：2012-08-09T09:24:53.757
> 
> 标签：ruby-on-rails, cucumber, remote-server, selenium-webdriver

我有一个黄瓜测试套件，我想在 Internet Explorer 环境中运行问题是我在一台 linux 机器上。所以我试着遵循这个有点过时的[指南](http://www.johng.co.uk/2010/10/13/run_capybara_and_cucumber_features_in_internet_explorer_on_remote_windows/)。

我正在使用本地 VM 来尝试运行测试，并在那里启动了独立的 selenium 服务器，它告诉我：

`RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wb/hub`

现在这似乎有点奇怪，我在这里有 localhost 作为连接，但无论它在同一台物理机器上，所以应该没有问题还是？

好吧，接下来我`env.rb`定义了以下内容：

```
Capybara.app_host = "http://hostname:4444"
Capybara.default_driver = :selenium
Capybara.register_driver :selenium do |app|
  Capybara::Selenium::Driver.new(app,
    :browser => :remote,
    :url => "http://MYNETWORKIP:4444/wd/hub",
    :desired_capabilities => :internet_explorer)
end 
```

正如指南所建议的那样。但是当我运行测试时，出现以下错误：

```
bad URI(is not URI?): 127.0.0.1:4444/wd/hub (URI::InvalidURIError) 
```

我怀疑这与我使用代理有关，因为我需要为 Firefox(iceweasel) 进行一些特殊设置才能运行。这些设置是：

```
Capybara.register_driver :selenium do |app|
  profile                                       =   Selenium::WebDriver::Firefox::Profile.new
  profile["network.proxy.type"]                 =   2
  profile["network.proxy.autoconfig_url"]       =   "http config adress here"
  profile["network.proxy.no_proxies_on"]        =   "localhost, 127.0.0.1, #{%x[hostname].gsub("\n", "")}"
  profile["network.proxy.http"]                 =   "proxy http address here"
  profile["network.proxy.http_port"]            =   3128
  profile["network.proxy.ssl"]                  =   "ssl proxy http address here"
  profile["network.proxy.ssl_port"]             =   3128
  profile["network.proxy.share_proxy_settings"] =   true
  Capybara::Selenium::Driver.new(app, :profile => profile)
end 
```

花了很多时间试图让它现在工作，所以我需要一些帮助提前谢谢

编辑：

意识到某些版本可能会有所帮助。从gemfile：

```
 cucumber (1.1.9)
 rails (2.3.11)
 selenium-webdriver (2.20.0) 
```

编辑2：

进一步尝试将 url 更改为我的网络 ip 地址给了我另一个错误：

```
both URI are relative (URI::BadURIError) 
```

编辑 3：

现在在 Jon MI 的帮助下走得更远，但遇到了：

```
 unexpected response, code=404, content-type="text/html" 
```

编辑4：

最近更新：

更改了我的连接设置`env.rb`

这让我可以连接到我的 virtualbox 并启动我的 IE 浏览器 YAY！但！它无法连接到应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:03:01.750

我预计“坏 URI”消息是由于缺少协议造成的 - 尝试在“127.0.0.1:4444/wd/hub”前面加上“http://”

编辑（响应您的更新）：

刚刚发现地址... 127.0.0.1 指的是`localhost`，但是如果 Selenium 服务器在另一台机器上运行，那么您肯定应该使用该机器的 IP 地址吗？

例如[http://some.other.ip:4444/wd/hub](http://some.other.ip:4444/wd/hub)

# google-ads-api - AdWords AdHoc 报告 Java 库

> ID：11880354
> 
> 赞同：0
> 
> 时间：2012-08-09T09:25:40.960
> 
> 标签：google-ads-api

有人获得了 AdWords API AdHoc-reporting-only Java 库吗？这是 AdWords API 库的简约版本，只能处理 AdHoc 报告。完整的 API 库几乎有 6 MB 大，我确信 AdHoc 只是其中的一小部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:45:20.703

我不知道有这样的图书馆，所以你需要建立自己的。我之前已经多次看到这种类型的问题，但是您应该考虑滚动自己的代码的好处，因为 6MB 已经不再那么大了，而且 Google 的客户端库非常成熟并且得到很好的支持，所以您最终可能会等待时间没有真正的好处。

但是，如果您确实需要避免使用官方 SDK，那么在没有它的情况下构建 SOAP 调用很容易：只需在客户端库中启用 SOAP 日志记录，提取报告定义的 XML，然后将其修改为文本字符串或使用 XML 工具。

# javascript - 点击下拉值Javascript

> ID：11880355
> 
> 赞同：0
> 
> 时间：2012-08-09T09:25:46.230
> 
> 标签：javascript, select, popup

我有一个下拉列表和 html 输入按钮。这个下拉列表有一个值（例如“3”），这个值调用popup。我需要的是通过单击我的按钮从下拉列表中选择此值并调用相同的弹出窗口。

请帮忙！！！！谢谢！

我尝试类似的东西

> onclick="javascript:document.getElementById('DropDown').value = 6"

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:31:06.633

JS：

```
function popitup(url) {
    var newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
} 
```

HTML：

```
<select id="select-value">
    <option value="1">Test</option>
</select>

<input type="button" value="Open popup" onclick="popitup('/path/to/your/page.php?some_value=' + document.getElementById('select-value').value)" /> 
```

# rest - Spring MVC 3.1.1 ContentNegotiatingViewResolver - 如何在 contentTypes 中使用通配符？

> ID：11880359
> 
> 赞同：1
> 
> 时间：2012-08-09T09:26:01.193
> 
> 标签：rest, spring-mvc, versioning, content-negotiation, media-type

我即将对我的 REST Web 服务进行版本控制，它基于 ContentNegotiatingViewResolver 以允许我返回 XML、JSON 以及 HTML 视图。

问题是，我既不能在 MappingJacksonJsonView 的 contentType 中使用通配符，也不能在 xmlMarshallingView 的 contentType 中使用通配符，它​​们都被 ContentNegotiatingViewResolver 引用。但我需要以通用方式定义这些 contentTypes，因为我有几个 mediaTypes（例如“application/vnd.springmvc3.sessionsinfo-v1+xml”和 application/vnd.springmvc3.sessionsinfo-v2+xml“），并且在同时似乎不可能为 MappingJacksonJsonView/xmlMarshallingView 声明多个 contentType。

这是我的调度程序 servlet 的片段：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
  <property name="order" value="1" />
  <property name="defaultViews">
    <list>
      <!-- JSON View -->
      <bean
    class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
        <property name="contentType" value="application/*+json" />
      </bean>
      <!-- JAXB XML View -->
      <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
      <property name="contentType" value="application/*+xml"/>
        <constructor-arg>
            <bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
               <property name="classesToBeBound">
                <list>
                   <value>org.springmvc3.models.SessionInfo</value>
                </list>
               </property>
            </bean>
        </constructor-arg>
      </bean>
     </list>
  </property>
  <property name="ignoreAcceptHeader" value="false" />
  <property name="FavorPathExtension" value="false" /> 
```

我的控制器，例如产生 mediaType “application/vnd.springmvc3.sessionsinfo-v1+xml”：

```
@RequestMapping(method = RequestMethod.GET , produces = {"application/vnd.springmvc3.sessionsinfo-v1+json", "application/vnd.springmvc3.sessionsinfo-v1+xml"} )   
public ModelAndView showSessionsOverview(){

    SessionInfoService sessionInfoService = new SessionInfoService();
    SessionsInfo sessionsInfo = new SessionsInfo(sessionInfoService.getAllSessionInfoObjects());

    return new ModelAndView("all", "model",sessionsInfo);
} 
```

现在我没有收到任何错误，但我也没有收到 XML 或 JSON，即使我通过接受标头明确请求它。我只得到 html，这就像我的配置中的后备策略。但是如果我写“application/vnd.springmvc3.sessionsinfo-v1+xml”而不是“application/*+xml”，它会很好用。

任何想法如何使它以更通用的方式工作？

# php - 如何在 php 中实现位掩码？

> ID：11880360
> 
> 赞同：86
> 
> 时间：2012-08-09T09:26:04.070
> 
> 标签：php, bitmask

我不确定位掩码是否是正确的术语。让我解释：

在 php 中，`error_reporting`可以通过多种方式调用该函数：

```
// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE); 
```

我从[这里的 php.net 页面得到了术语位掩码](http://php.net/manual/en/function.error-reporting.php)

无论如何，重点是，我实现了一个名为 SIMPLE 的方法`ls`，该方法返回目录的内容。

这个函数需要 3 个参数...（ $include_hidden = false, $return_absolute = false, $ext = false ）

所以当我调用函数时，我设置了我想要的结果。我是否希望结果返回隐藏目录，是否只需要基本名称等。

所以当我调用我正在写的函数时

```
ls(true, false, true)
ls(false, false, true)
ls(true, true, true)
etc... 
```

我认为如果我可以标记我希望如何返回数据，它会更具可读性？

所以像：

```
ls( INCLUDE_HIDDEN | HIDE_EXTS );
ls( SHOW_ABSOLUTE_PATHS | HIDE_EXTS ); 
```

ETC...

在测试调用了哪些标志方面，我将如何实现这一点？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-08-09T09:30:14.640

其实很简单。首先是一段代码来演示它是如何实现的。如果您不了解此代码的作用或工作原理，请随时在评论中提出其他问题：

```
const FLAG_1 = 0b0001; // 1
const FLAG_2 = 0b0010; // 2
const FLAG_3 = 0b0100; // 4
const FLAG_4 = 0b1000; // 8
// Can you see the pattern? ;-)

function show_flags ($flags) {
  if ($flags & FLAG_1) {
    echo "You passed flag 1!<br>\n";
  }
  if ($flags & FLAG_2) {
    echo "You passed flag 2!<br>\n";
  }
  if ($flags & FLAG_3) {
    echo "You passed flag 3!<br>\n";
  }
  if ($flags & FLAG_4) {
    echo "You passed flag 4!<br>\n";
  }
}

show_flags(FLAG_1 | FLAG_3); 
```

[演示](http://3v4l.org/tTZnW)

* * *

因为标志是整数，所以在 32 位平台上最多可以定义 32 个标志。在 64 位平台上，它是 64。也可以将标志定义为字符串，在这种情况下，可用标志的数量或多或少是无限的（当然，在系统资源的范围内）。以下是它在二进制中的工作方式（为简单起见，缩减为 8 位整数）。

```
FLAG_1
Dec:    1
Binary: 00000001

FLAG_2
Dec:    2
Binary: 00000010

FLAG_3
Dec:    4
Binary: 00000100

// And so on... 
```

当您组合标志以将它们传递给函数时，您将它们组合在一起。让我们看看当我们通过时会发生什么`FLAG_1 | FLAG_3`

```
 00000001
| 00000100
= 00000101 
```

当您想查看设置了哪些标志时，您可以将位掩码与该标志相结合。所以，让我们看看上面的结果，看看是否`FLAG_3`设置了：

```
 00000101
& 00000100
= 00000100 
```

...我们得到标志的值，一个非零整数 - 但如果我们看到是否`FLAG_2`设置：

```
 00000101
& 00000010
= 00000000 
```

...我们得到零。这意味着在检查值是否通过时，您可以简单地将 AND 运算的结果评估为布尔值。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-09T09:29:23.810

```
define( "INCLUDE_HIDDEN", 0x1 );
define( "HIDE_EXTS", 0x2 );
define( "SHOW_ABSOLUTE_PATHS", 0x4 );
//And so on, 0x8, 0x10, 0x20, 0x40, 0x80, 0x100, 0x200, 0x400, 0x800 etc.. 
```

然后，您可以检查`ls`函数中的各个标志：

```
if( $flags & INCLUDE_HIDDEN ) { //<-- note just a single &, bitwise and
    //$flags have INCLUDE_HIDDEN
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T01:21:08.487

**其他人提出了很好的建议，但是现在传递关联数组**而不是位掩码更为常见。它更具可读性，并允许您传入其他变量，而不仅仅是真/假值。像这样的东西：

```
myFunction(['includeHidden' => true, 'fileExts' => false, 'string' => 'Xyz']);

function myFunction($options) {
    // Set the default options
    $options += [
        'includeHidden' => false,
        'fileExts' => true,
        'string' => 'Abc',
    ];

    if ($options['includeHidden']) {
        ...
    }
    ...
} 
```

# android - 在android中捕获后在另一个活动中显示图像？

> ID：11880363
> 
> 赞同：0
> 
> 时间：2012-08-09T09:26:10.040
> 
> 标签：android, android-camera

拍摄照片后，我想在另一个活动中的 ImageView 中显示我的图像。
我有 2 个活动（MainActivity，UploadActivity）和 2 个布局（main，upload）。

主布局有 1 个按钮用于打开相机，上传布局有 Imageview 用于在捕获后显示图像。MainActivity 用于按钮单击以打开相机，UploadActivity 用于检索要显示的图像。

这是 MainActivity

```
 imb_eat.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent_capture = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent_capture, 0);
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:08:36.167

这是一个接受来自另一个活动的捆绑包的活动。我不传递图片或图片的文件名，但机制是一样的

```
public class ClassList extends ListActivity {

private gradeBookDbAdapter mDbHelper;

/** Called when the classlist is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.class_list);

    // pull in any calling bundle information - are we just selecting a class from the list?
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
     int id = extras.getInt("SELECT");
      Select = (id == 1)? true : false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:53:31.963

当相机活动完成时，您在 onActivityResult() 方法中收集数据。然后，您可以获取相机创建的文件并在另一个意图中使用它，然后启动另一个活动。然后该活动读取意图数据并可以操作照片。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    String filePath;
    Bitmap _bitmapPreScale = null;
  if (requestCode == REQUEST_FROM_CAMERA && resultCode == RESULT_OK) {

    _bitmapPreScale = getPhoto(filePath);

  Intent intent = new Intent(someCLass.class)
  intent.putExtra(Intent.EXTRA_STREAM, Uri.parse ("file://" + filePath));
  startActivity(intent);
 } 
```

}

# android - PendingIntent 并不总是在 android 中启动

> ID：11880366
> 
> 赞同：4
> 
> 时间：2012-08-09T09:26:21.127
> 
> 标签：android, push-notification

收到 GCM 推送通知消息后，我正在创建通知。这一切都完成了。但是当我点击通知时，有时它没有启动（PendingIntent）。大多数情况下，当我收到通知后立即点击时，问题就出现了。待定意图实际上是我的第一个登录页面本身。这是源代码。。

```
public void createNotification(Context context, String message) {
    NotificationManager notificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon,
            "My notification", System.currentTimeMillis());
    // Hide the notification after its selected
    notification.flags |= Notification.FLAG_AUTO_CANCEL ;
    Intent intent;

    intent = new Intent(context, Login.class);
    intent.putExtra("pushNoti", "pushNoti");
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
            intent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, "my Alert",
            message, pendingIntent);

    notification.defaults = Notification.DEFAULT_SOUND;
    notificationManager.notify(0, notification);

} 
```

这里的上下文来自 GCM onMessage(Context context, Intent intent)..

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:29:12.393

```
notificationManager.notify(0, notification); 
```

从文档：

> 公共无效通知（int id，通知通知）
> 
> 自：API 级别 1 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，它将被更新的信息替换。
> 
> **参数**
> 
> **id**：此通知在您的应用程序中唯一的标识符。
> 
> **notification**：一个 Notification 对象，描述向用户显示的内容。不得为空。

尝试使用对您的应用中的每个通知都唯一的标识符，而不是 0。

# lua - DOS (nmap) 脚本（渗透测试）

> ID：11880373
> 
> 赞同：0
> 
> 时间：2012-08-09T09:26:38.133
> 
> 标签：lua, port, nmap, penetration-testing

我需要进行渗透测试。我想获得一个脚本或一些脚本来攻击并（希望不会）通过淹没某个端口/软件来关闭它。我已经安装了 NMAP 和同事的示例脚本，是否有人向我解释该脚本并阐明如何调整它以满足我的需要？

```
description = [[
Connects to ports without disconnecting
]]
author =""
license = 'Same as Nmap--See http://nmap.org/book/man-legal.html'
categories = {'auth', 'intrusive'}

require('shortport')
require('stdnse')
require('strbuf')
require('math')

local soc
local catch = function() soc:close() end
local try = nmap.new_try(catch)

--portrule = shortport.port_or_service({3000, 3001, 3002, 3003, 3004, 3005,3006,3007,3008,3009, 3010, 3011, 4008, 3110}, 'client server')
--portrule = shortport.port_or_service({3000-4008}, 'client server')
portrule = shortport.port_or_service({3101}, 'client server')

action = function(host, port)
    math.randomseed( os.time() )
    local buff = ""
    soc = nmap.new_socket()
        soc:set_timeout(400000000)
    for j = 1,1100 do
                print(j)
        try(soc:connect(host.ip, port.number, port.protocol))
        --soc:close()
    end
    --print(math.random(255))
    return ""
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:49:12.203

[http://nmap.org/book/nse-api.html](http://nmap.org/book/nse-api.html)

尝试设置`function(host='host url here', port='port number here')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:38:52.300

我不确定这个脚本是不是最好的方法，但是为了运行它，你应该使用这个命令：

```
nmap -p 3101 --script your-script-name target 
```

使用与 Nmap 不同的工具可能会带来更好的运气。例如，您可以使用 Scapy：

```
$ sudo scapy
>>> p = IP(dst="192.168.1.X") / TCP(dport=3101)
>>> while true:
...   p.sport = random.randint(1024,65535)
...   send(p) 
```

# java - MyBatis : 在 MYSQL 数据库上使用 DATE 类型查询 java.util.Date

> ID：11880378
> 
> 赞同：1
> 
> 时间：2012-08-09T09:27:13.770
> 
> 标签：java, mysql, date, ibatis, mybatis

在我的映射 XML 中，我有：

```
<select id="getPatientsByBirthday"  parameterType="date" resultType="com.axiohelix.nozoki.entity.Patient">
            SELECT id AS id,
               pharumo_id AS pharumoId,
               code AS code,
               family_name AS familyName,
               first_name AS firstName,
               family_name_kana AS familyNameKana,
               first_name_kana AS firstNameKana,
               gender AS gender,               
               address AS address,
               tel AS tel
        FROM tbl_patient
        WHERE birthday = #{id}
    </select> 
```

其中生日是 MYSQL 数据库中的**DATE**类型。

我的映射器界面是这样的：

```
public interface PatientMapper {

    void insertPatient(Patient patient);
    Patient getPatientById(Integer id);
    Integer getPatientCount();
    List<Patient> getPatientsByBirthday(Date  bday);
} 
```

我试图查询具有特定生日的患者：

```
Calendar cal1 = new GregorianCalendar(1980, 8, 15);
Date bday=cal1.getTime();

List<Patient> plist=mapper.getPatientsByBirthday(bday); 
```

即使有给定日期的记录，这也会返回空列表。

有小费吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:03:28.303

像这样更改您的映射xml；

```
 <select id="getPatientsByBirthday"  parameterType="java.util.Date" resultType="com.axiohelix.nozoki.entity.Patient">
        SELECT id AS id,
           pharumo_id AS pharumoId,
           code AS code,
           family_name AS familyName,
           first_name AS firstName,
           family_name_kana AS familyNameKana,
           first_name_kana AS firstNameKana,
           gender AS gender,               
           address AS address,
           tel AS tel
        FROM tbl_patient
        WHERE birthday = #{date}
</select> 
```

# android - 空闲期间的Android后台进程

> ID：11880386
> 
> 赞同：0
> 
> 时间：2012-08-09T09:27:37.463
> 
> 标签：android, android-asynctask

我了解 AsyncTask 的实现。我想要实现的是在应用程序不活动或用户空闲时添加后台进程。那可能吗？我需要通过较慢的互联网连接下载大量数据，因此我希望我的进程在后台运行。

请提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:55:03.280

> 我想要实现的是在应用程序不活动或用户空闲时添加后台进程。那可能吗？

Android中没有“用户空闲”的真正概念。

> 我需要通过较慢的互联网连接下载大量数据，因此我希望我的进程在后台运行。

使用`IntentService`.

# python - 列依赖于 csv 数据的随机化

> ID：11880388
> 
> 赞同：0
> 
> 时间：2012-08-09T09:27:43.267
> 
> 标签：python

我正在使用一个名为psychopy的程序，它是用python编写的，大多数时候它有一个足够的GUI，但是你可以输入你自己的代码部分。基本上我遇到的问题是我有一个 csv 文件，我让 python 导入，在 csv 文件中有六列，使用一些代码我可以让 python 随机化每列中的顺序：

```
import random 
import csv 

stimulilist=list(csv.reader(open('original_file.csv',"rU")))

stimuliones=[]
locationones=[]
locationtwos=[]
stimulitwos=[]
locationthrees[]
locationfours[]

for i in range(len(stimulilist)):
    stimuliones.append(stimulilist[i][0])
    locationones.append(stimulilist[i][1])
    locationtwos.append(stimulilist[i][2])
    stimulitwos.append(stimulilist[i][3])
    locationthrees.append(stimulilist[i][4])
    locationfours.append(stimulilist[i][5])

Stim1=stimuliones[1:]
location1=locationones[1:]
location2=locationtwos[1:]
Stim2=stimuliones[1:]
location3=locationthrees[1:]
location4=positionfours[1:] 
```

然后我将它们随机化，这将为第一个试验块创建两个随机单词列表。

```
Stimuli1Random=random.sample(Stim1,len(Stim1)) 
Location1Random=random.sample(location1,len(location1))
Location2Random=random.sample(location2,len(location2))
Stimuli2Random=random.sample(Stim2,len(Stim2))
Location3random=random.sample(location3,len(location3))
Location4random=random.sample(location4,len(location4)) 
```

但是，我希望将刺激 1、位置 1 和位置 2 随机化在一起，并将刺激 2 位置 3 和位置 4 随机化在一起，例如：

它在 CSV 文件中的情况：

```
(row)    Stim1 Location1 Location2         (row)     Stim2 Location3 Location4
1        P1    Left      Left               1        c1    Left      Left
2        p2    Middle    Middle             2        c2    Middle    Middle
3        p3    Right     Right              3        c3    Right     Right
4        p4    Left      Left               4        c4    Left      Left
5        p5    Middle    Middle             5        c5    Middle    Middle
6        p6    Right     Right              6        c6    Right     Right 
```

使用上面的代码，每一列都会被单独随机化，例如：

```
(row)    Stim1 Location1 Location2         (row)   Stim2  Location3 Location4
1        P6    Left      Middle             1      c5     Right     Left
2        p1    Right     Middle             2      c3     Middle    Middle
3        p5    Middle    Right              3      c1     Left      Middle
4        p4    Left      Left               4      c2     Right     Left
5        p3    Middle    Left               5      c4     Middle    Right
6        p2    Right     Right              6      c6     Left      Right 
```

但我希望将行随机化，使其看起来像这样：

```
(row)    Stim1 Location1 Location2       (row)  Stim2  Location3 Location4
1        p2    Middle    Middle           1     c3      Right   Right
2        p6    Right     Right            2     c5      Middle  Middle
3        p3    Right     Right            3     c4      Left    Left
4        p4    Left      Left             4     c1      Left    Left
5        p5    Middle    Middle           5     c2      Middle  Middle
6        P1    Left      Left             6     c6      Right   Right 
```

所以基本上我希望 Stim1、Location 1 和 Location 2 的行保持不变，但就像它们是同一列一样随机化，但是，我不想将它们合并到一列，重要的是它们保持单独的列。我也想要 stim2 位置 3 和位置 4。

另外，假设我想从 csv 文件中导入另一列，但不随机化，我将如何将其放入代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:30:53.700

如果您想将这些数据部分随机化在一起，最简单的方法是将它们存储在一起。您甚至不必为此更改 csv 文件的结构。如果您将单个部分一起存储在一个列表中（而不是每列单独存储），您可以随机化此列表，相关部分将保持在一起：

```
stimulilist=list(csv.reader(open('original_file.csv',"rU")))

stim_1_data = []
stim_2_data = []

for i in range(len(stimulilist)):
    stim_1_data.append(stimulilist[i][0:3])
    stim_2_data.append(stimulilist[i][3:6])

random.shuffle(stim_1_data)
random.shuffle(stim_2_data) 
```

如果您现在想要获取 stim1 和 stim2 的数据，您只需从每个列表中获取一个元素，然后根据需要将这些部分分开：

```
stim1, locaion1, location2 = stim_1_data.pop()
stim2, locaion3, location4 = stim_1_data.pop() 
```

如果您想要 csv 文件中的另一列，只需添加另一个您不随机化的列表：

```
stimulilist=list(csv.reader(open('original_file.csv',"rU")))

stim_1_data = []
stim_2_data = []
non_random_data = []

for i in range(len(stimulilist)):
    stim_1_data.append(stimulilist[i][0:3])
    stim_2_data.append(stimulilist[i][3:6])
    non_random_data.append(stimulilist[i][6])

random.shuffle(stim_1_data)
random.shuffle(stim_2_data) 
```

如果您随后需要列表的方式与您最初拥有的每个值分开，您可以再次提取它们：

```
Stim1, location1,location2 = zip(*stim_1_data)
Stim2, location3,location4 = zip(*stim_2_data) 
```

# php - 无法通过 SVN 运行项目

> ID：11880389
> 
> 赞同：1
> 
> 时间：2012-08-09T09:27:53.250
> 
> 标签：php, apache, svn, xampp

svn配置成功后，我的localhost用svn

> 本地主机/svn/myPhpProject

显示文件夹树而不是运行项目。

如果我从浏览器上显示的树结构中单击 index.php，它实际上会在文件中加载脚本，而不是执行脚本。我已经关注了这个链接

对于我的 SVN 配置[在 win 环境中配置 Svn](http://www.inetsolution.com/turnleft/post/How-to-Setup-Subversion-2b-Apache-2b-WebSVN-on-Windows.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:34:05.417

这是设计使然。

SVN 是源代码控制系统，而不是部署系统。

如果您想部署您的应用程序，然后`svn export`将其发布到为其配置的服务器。

如果您想在每次将更改提交到 SVN 时部署它，请使用[post commit hook](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)或 CI 服务器，例如[Jenkins](http://jenkins-ci.org/)。（这样做只是为了部署到测试服务器，不要随意部署东西来生存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:49:09.867

正如@Quentin 所说 - SVN 不是为您使用它的方式而构建的。我使用的是不同但原理相同的git。只需在您的实时服务器上设置 SVN 存储库并在需要更新时将其导出。

# android - 活动转换的视觉故障

> ID：11880390
> 
> 赞同：0
> 
> 时间：2012-08-09T09:28:01.570
> 
> 标签：android, android-activity, transition, visual-glitch

我正在使用 ABS 开发应用程序。当我使用这个自定义活动动画时：

```
<?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromYDelta="100%p" android:toYDelta="0" android:duration="1400"/>
</set> 
```

使用*overridePendingTransition*或*getWindow().setWindowAnimations()*

我在活动的顶部看到一个带有空格的活动，而它正在滑动，通知栏会在哪里。

而且这个故障不会发生在 ICS 上，如果它与 ABS 有关，我现在不会发生，但你知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:03:55.880

更新这个... **android:toYDelta="0%p"**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="100%p" android:toYDelta="0%p" android:duration="1400"/>
</set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T19:03:25.270

我只想提一下您定义过渡的方式。从 Android 8.0 开始，如果您将百分比定义为“0%p”，则翻译动画会出现小故障。相反，将它们定义为“0%”。

# jquery - onclick div 应该删除类并添加类但是当点击其他 div 时第一个 div 类应该被删除

> ID：11880392
> 
> 赞同：0
> 
> 时间：2012-08-09T09:28:20.740
> 
> 标签：jquery

onclick div 应该 removeclass 和 addclass 但是当单击其他 div 时，第一个 div 类应该被删除并将类添加到第二个 div。假设我有基于 jquery 的画廊。当点击它的缩略图时，缩略图应该像它被选中一样。当我单击另一个缩略图时，它应该选择第二个缩略图并使用 .css() 取消选择第一个缩略图。

这是我正在使用的缩略图html结构..

```
<div class="team-pic">
    <div class="pic-corner"> </div>
    <!-- end pic-corner -->
    <a class="showSingle" target="1"><img src="images/pic-1.jpg" alt=" "></a>
</div> 
```

他们有很多 div 有 class="team-pic"。使用相同的html结构。我怎么能用jquery做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:33:48.180

你可以试试这个：

```
<div class="team-pic">
     <a class="showSingle" target="1">
         <img src="http://www.placehold.it/50x50&text=1" alt=" " />
     </a>
     <a class="showSingle" target="2">
         <img src="http://www.placehold.it/50x50&text=2" alt=" " />
     </a>
     <a class="showSingle" target="3">
         <img src="http://www.placehold.it/50x50&text=3" alt=" " />
     </a>
     <a class="showSingle" target="4">
         <img src="http://www.placehold.it/50x50&text=4" alt=" " />
     </a>
</div> 
```

CSS：

```
.selected{

    border: 1px solid red;
} 
```

JS：

```
$('.team-pic a').click(function(e){
    e.preventDefault();
    $('.selected').removeClass('selected');
    $(this).find('img').addClass('selected');
}); 
```

[例子](http://jsfiddle.net/YjD3Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:33:54.677

你可以试试这个。

`.selectable`是您画廊中的所有 div。`.selected`是当前选中的 div。

```
$('.selectable').unbind('click').bind('click', function(){
         $('.selected').removeClass('selected');
         $(this).addClass('selected');
}); 
```

# xml - msxml3.dll 错误“80070005”对 XMLdocument.Save() 上的 webmatrix .asp 文档的访问被拒绝

> ID：11880396
> 
> 赞同：0
> 
> 时间：2012-08-09T09:28:50.037
> 
> 标签：xml, asp-classic

这是不起作用的代码：

```
<%
    set xmlSave=Server.CreateObject("Microsoft.XMLDOM")
        xmlSave.async=false
        xmlSave.loadXML("<?xml version='1.0' encoding='utf-8' ?><news></news>")
        xmlSave.Save("test.xml")
%> 
```

我必须在某处授予权限吗？这应该在 webmatrix 以外的服务器上工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:22:50.530

你应该这样做：

```
 xmlSave.Save Server.MapPath("test.xml") 
```

这将`test.xml`在执行 ASP 页面所在的同一物理文件夹中创建文件。

# xml - 使用 Linq2Sql 使用 XML 片段

> ID：11880397
> 
> 赞同：4
> 
> 时间：2012-08-09T09:29:00.287
> 
> 标签：xml, sql-server-2008, linq-to-sql, mapping, entity-relationship

我在 SQL Server 上有一堆存储过程，每个都有一个输出参数`@res_xml xml output`。这些中的每一个都将返回一个 XML 片段`@res_xml`。

“片段”是指 XML 片段尚未最终确定，可能很容易包含多个根节点（[ConformanceLevel.Fragment](http://msdn.microsoft.com/en-us/library/h2344bs2.aspx)）。

SQL Server 对 XML 片段没有任何问题，可以很好地存储它们，并且当一个存储过程想要在其自己的输出中包含另一个存储过程的输出时，可以轻松地重用它们。

但是，Linq2Sql 不支持这一点。它将一个 XML 参数映射到单个`XElement`，这会抛出一个 XML 片段。

我不想更改所有存储过程以始终将其输出包装在根节点中。这将是大量的输入，当在存储过程之间重用 XML 时需要明确地抛出这个虚假的根节点，并且它会破坏现有的支持片段的非 linq2sql 客户端。所以我要按摩的是linq。

[建议](http://msdn.microsoft.com/en-us/library/bb386947.aspx#TextMapping)将`XML`可能包含片段的参数映射到`String`。我同意，但是**有没有办法指示 linq2sql 映射`xml`到`string`而不是`XElement`？**

* * *

我目前做的是：

*   将过程从服务器资源管理器拖到 linq2sql 设计器中。生成代码。
*   进入`DataClasses.designer`并复制生成的代码以调用程序。
*   将此代码粘贴到`partial class DataClassesX`.
*   手动全部替换`System.Xml.Linq.XElement`为`System.String`.
*   回到设计器，删除拖入的程序。

这有效，但很烦人。
我不能就地替换，因为这会被设计师覆盖。

# c# - 当 OriginalSource 只是一个虚拟元素时，从测试中执行 RoutedCommand

> ID：11880399
> 
> 赞同：2
> 
> 时间：2012-08-09T09:29:16.280
> 
> 标签：c#, testing, commandbinding

我想从测试中提出一个命令。我需要模拟 RibbonMenuItem 是 OriginalSource。不幸的是，我无法访问原始的 RibbonBar，因此也无法访问 RibbonMenuItem。因此，我在测试中创建了一个新的

```
RibbonMenuItem menuItem = new RibbonMenuItem();
menuItem.Command = Commands.AddCommand;
menuItem.CommandBindings.Add(new CommandBinding Commands.AddCommand));
menuItem.Header = "foobar"; 
```

[（Commands 是一个包含我实现的所有命令的类。）]

然后我尝试使用以下行引发命令：

```
Commands.AddCommand.Execute(null, menuItem); 
```

但这不起作用。

创建一个测试项目后，我现在知道为什么它不起作用，但我不知道如何解决。这是我的测试项目的代码

XAML：

```
<Window x:Class="MakeOrBreak.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ribbon="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon"
    Title="MainWindow" Height="350" Width="525">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition />
      <RowDefinition />
    </Grid.RowDefinitions>
    <ribbon:Ribbon Grid.Row="0">
      <ribbon:RibbonSplitButton x:Name="splitButton" Label="Test">
        <ribbon:RibbonMenuItem x:Name="item1" Header="Item1" />
        <ribbon:RibbonMenuItem x:Name="item2" Header="Item2" />
      </ribbon:RibbonSplitButton>
    </ribbon:Ribbon>
    <TextBlock Grid.Row="1" x:Name="textblock" />
  </Grid>
</Window> 
```

视图模型

```
public partial class MainWindow : Window
  {
    private int counter = 1;

    public static RoutedCommand ClickCommand = new RoutedCommand();

    public MainWindow()
    {
      InitializeComponent();

      CommandBinding commandBinding = new CommandBinding(ClickCommand, ExecuteClickCommand, CanExecuteClickCommand);

      splitButton.Command = ClickCommand;
      splitButton.CommandBindings.Add(commandBinding);

      RibbonMenuItem rmi = new RibbonMenuItem();
      rmi.Command = ClickCommand;
      rmi.CommandBindings.Add(new System.Windows.Input.CommandBinding(ClickCommand));
      rmi.Header = "foobar";

      // Without this line the command at the last line isn't automatically raised
      // splitButton.Items.Add(rmi);

      Style baseMenuItemStyle = splitButton.TryFindResource(typeof(Microsoft.Windows.Controls.Ribbon.RibbonMenuItem)) as Style;
      if (baseMenuItemStyle == null)
      {
        baseMenuItemStyle = new Style(typeof(Microsoft.Windows.Controls.Ribbon.RibbonMenuItem));
      }
      Style ribbonItemsStyle = new Style(typeof(Microsoft.Windows.Controls.Ribbon.RibbonMenuItem), baseMenuItemStyle);
      ribbonItemsStyle.Setters.Add(new Setter(Microsoft.Windows.Controls.Ribbon.RibbonMenuItem.CommandProperty, ClickCommand));
      splitButton.Resources.Add(typeof(Microsoft.Windows.Controls.Ribbon.RibbonMenuItem), ribbonItemsStyle);

      // simulate Click
      ClickCommand.Execute(null, rmi);
    }

    private void ExecuteClickCommand(object sender, ExecutedRoutedEventArgs e)
    {
      RibbonMenuItem originalSource = e.OriginalSource as RibbonMenuItem;
      if (originalSource != null)
      {
        textblock.Text = "Item Pressed " + counter++;
      }
      e.Handled = true;
    }

    private void CanExecuteClickCommand(object sender, CanExecuteRoutedEventArgs e)
    {
      e.CanExecute = true;
      e.Handled = true;
    }
} 
```

当我将 RibbonMenuItem rmi 添加到 RibbonSplitButton 时，该命令将被执行，否则不会执行。因为在我的实际项目中，RibbonMenuItem 只是像 rmi 在这里“闲逛”，所以没有提出命令。

如前所述，我在我的测试项目中无法访问 RibbonBar 本身，否则我将直接采用现有的 RibbonMenuItem。

您对如何使命令正常工作有任何想法吗？

* * *

```
private void OnExecuteAdd(object sender, ExecutedRoutedEventArgs e)
{
  RibbonMenuItem originalSource = e.OriginalSource as RibbonMenuItem;
  if (originalSource != null)
  {
    string header = originalSource.Header as string;
  }
  // ...
} 
```

# iphone - 来自设备的 dSYM 文件

> ID：11880404
> 
> 赞同：3
> 
> 时间：2012-08-09T09:29:35.590
> 
> 标签：iphone, ios, crash, decode

我的应用程序崩溃了，两天内我找不到重现崩溃的确切方法。所以，我想解码 dSYM 文件，看看有什么问题（希望有帮助）。如何从设备中获取 dSYM 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T09:54:21.397

您可能需要从 Xcode 构建产品中获取 dSYM。

1.  打开 Xcode Organizer（在 Xcode 中，请参阅 Window -> Organizer）
2.  转到存档选项卡并选择相关项目的崩溃构建
3.  选择分发，然后选择导出为 Xcode 存档
4.  找到您导出的存档（.xcarchive 文件），按住 Control 单击它并选择查看包内容
5.  您的 dSYM 将位于 Xcode 存档内容的 dSYMs 子文件夹中

但是，获取堆栈跟踪的一种更简单的方法是让应用程序在 iOS 模拟器中运行或在 Xcode 中的系留 iOS 设备上崩溃（即使用 Product -> 在 Xcode 中运行时），或者通过连接您的设备并在 Xcode Organizer 设备选项卡的设备部分查看去符号化的崩溃报告。

（以上所有假设您已经在可以访问的机器上用 Xcode 构建了应用程序，并且您已经将构建的档案保存在 Xcode Organizer 中。）

有关更多信息，请参阅 Apple 的技术说明：[了解和分析 iOS 应用程序崩溃报告](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)。

# mysql - 神秘的 SQL 变量

> ID：11880409
> 
> 赞同：0
> 
> 时间：2012-08-09T09:30:09.477
> 
> 标签：mysql, sql

我有一个 sql 查询：

```
DELETE **x**
FROM $table **x**
JOIN 
 ( SELECT vendors
        , email
        , MIN(lead_id) **min_lead_id** 
     FROM $table
    WHERE vendors = $vendor 
    GROUP BY vendors
           , email
 ) y 
ON **y**.vendors = **x**.vendors 
AND **y**.email = **x**.email
AND **y**.**min_lead_id** <> **x**.lead_id 
```

我试图理解它。我学习了sql的所有基础知识。然而，代码示例中的粗体变量（？）（x，y，min_lead_id）让我感到困惑。我从来没有遇到过这些，我不知道我需要搜索哪些谷歌关键字来获取信息。它们不会出现在我有权访问的任何 sql 文档中。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:32:59.753

它们`aliases`用于查询中的表和子查询。

*   X 是 $table1
*   Y 是子查询
*   Min_Lead_ID 是 MIN(lead_id) 结果的别名（即：组成的列名）

`AS`可以选择在项目及其别名之间放置一个以使此定义更清晰

# asp.net - Asp.Net GridView 没有被禁用

> ID：11880411
> 
> 赞同：0
> 
> 时间：2012-08-09T09:30:17.213
> 
> 标签：asp.net, gridview

在我的应用程序中，我正在使用 a`GridView`并且我正在通过以下代码向 GridView 添加一个 onlick 属性。

```
 Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)

    If e.Row.RowType = DataControlRowType.DataRow Then
        e.Row.Attributes("onclick") = Page.ClientScript.GetPostBackClientHyperlink(GridView1, "Select$" & e.Row.RowIndex.ToString())
    End If 
```

当有人在 Grid 视图中选择一行时，我希望 GridView 被禁用并且不允许任何其他选择，除非用户按下按钮。我尝试使用

`GridView1.Enabled = false`

但是用户仍然可以选择一行。

我怎样才能**禁用**`GridView Selection`??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:11:10.757

由于您通过上述代码选择一行，因此最简单的解决方法是检查行数据绑定事件中选择的索引是否不等于 -1（表示已选择一行）。

```
If GridView1.SelectedIndex = -1 Then
    If e.Row.RowType = DataControlRowType.DataRow Then
        e.Row.Attributes("onclick") = Page.ClientScript.GetPostBackClientHyperlink(GridView1, "Select$" + e.Row.RowIndex.ToString())
    End If
End If 
```

并在单击按钮时重新附加选择代码，您只需将 selectedIndex 设置为 -1 并在按钮单击事件中重新绑定 gridview。

# macos - OSX Mountain Lion 网络服务器上的 ServerAlias 无法解析

> ID：11880415
> 
> 赞同：2
> 
> 时间：2012-08-09T09:30:40.583
> 
> 标签：macos, virtualhost, apache, httpd.conf

我遇到了 ServerAliases 无法解析到相应服务器的问题。

我的主机文件是这样设置的（这是尝试设置 APE 的一部分，所以请原谅无关代码）：

```
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost

127.0.0.1 testy.local
127.0.0.1 testsite.local
127.0.0.1 ape-test.local
127.0.0.1 chickens.cluck.com
127.0.0.1 ape.ape-test.local
127.0.0.1 ape2.ape-test.local 
```

和 httpd-vhosts.conf：

```
NameVirtualHost *:80

<VirtualHost *:80>
        ServerName ape-test.local
        ServerAlias ape.ape-test.local
        ServerAlias test.ape-test.local
        ServerAlias *.ape.ape-test.local

        DocumentRoot "/Library/WebServer/Documents/"
</VirtualHost>

<VirtualHost *:80>
    ServerName testy.local
    ServerAlias testy
    ServerAlias fish.local
    DocumentRoot "/Users/myusername/Sites/testsite"
    <Directory /Users/myusername/Sites/testsite/>
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

httpd.conf 中启用了虚拟主机，并且 testy.local 解析到正确的目录。但是使用 'testy/' 或 'fish.local' 将无法解决。

似乎也没有任何内容写入错误日志或控制台，并且运行`sudo bash -x /usr/sbin/apachectl -k start`显示没有错误。运行`httpd -S`也没有发现任何问题：

```
VirtualHost configuration:
wildcard NameVirtualHosts and _default_ servers:
*:80                   is a NameVirtualHost
         default server ape-test.local (/private/etc/apache2/extra/httpd-vhosts.conf:44)
         port 80 namevhost ape-test.local (/private/etc/apache2/extra/httpd-vhosts.conf:44)
         port 80 namevhost testy.local (/private/etc/apache2/extra/httpd-vhosts.conf:53)
Syntax OK 
```

所以看起来只是 ServerAlias 不起作用。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:42:25.513

通过查看您的主机文件，您似乎没有在主机文件中提供“testy”或“fish.local”。你只需要在你的主机文件中输入这两个域，然后你就应该准备好了。

您需要像我在下面那样添加它们，

```
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost

127.0.0.1 fish.local
127.0.0.1 testy
127.0.0.1 testy.local
127.0.0.1 testsite.local
127.0.0.1 ape-test.local
127.0.0.1 chickens.cluck.com
127.0.0.1 ape.ape-test.local
127.0.0.1 ape2.ape-test.local 
```

希望这可以帮助。

# mysql - mysql sql查询以添加列对数据进行分组

> ID：11880417
> 
> 赞同：1
> 
> 时间：2012-08-09T09:31:03.923
> 
> 标签：mysql, sql

我有以下数据

```
id  Date
-----------------
1   1/1/2009
2   1/1/2009
3   1/1/2009
4   20/1/2009
5   24/1/2009
6   29/1/2009
7   29/1/2009
8   29/1/2009
9   10/2/2009
10  11/2/2009
11  21/2/2009
12  21/2/2009
13  21/2/2009 
```

我想用这样的东西返回结果。

```
id   date     issue (this column is not in db, addition of column in query using logic)
----------------------------------
1   1/1/2009        1/1/2009
2   1/1/2009        1/1/2009
3   1/1/2009        1/1/2009
4   20/1/2009       1/1/2009
5   24/1/2009       1/1/2009
6   29/1/2009       29/1/2009
7   29/1/2009       29/1/2009
8   29/1/2009       29/1/2009
9   10/2/2009       29/1/2009
10  11/2/2009       29/1/2009
11  21/2/2009       21/2/2009
12  21/2/2009       21/2/2009
13  21/2/2009       21/2/2009 
```

1.  我想阅读 DATE 列以查找批量*记录集（即超过 3 条具有相同日期的记录）我的意思是同一日期的记录
2.  一旦我找到批量*记录集，我想继续在 ISSUE 列中添加第一条批量记录的日期，直到它到达下一个批量记录集。

*在上述示例的 DATE COLUMN 中，第一批批量记录的 ID 为 1,2,3，第二组批量记录的 ID 为 6,7,8，反之亦然...

我想一遍又一遍地重复第 1 步和第 2 步，直到它到达表的末尾。

有没有办法做这个mysql sql查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:39:30.283

```
select id,date,
if((@s:=if(date=(select date from t t2 where t2.id>t.id order by id limit 1 offset 0)
           and
           date=(select date from t t2 where t2.id>t.id order by id limit 1 offset 1)
          ,date,@s))='',date,@s) issue
from t,(select @s:='') s
order by id 
```

我使用了 2 个嵌套查询（偏移量 0 和 1），因为如果您只需要 2 条具有相同日期的记录来开始批量设置，则需要 3 条记录集只留下第一个。

同样对于第一个批量集开始之前的第一条记录，我为 ISSUE 列设置了相同的 DATE。

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/701fd/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:42:48.843

试试这个查询，它已经过测试适用于您的数据集：

```
SELECT IF(b.cnt < 3, @d_prev, a.`date`) AS new_date,
       IF(b.cnt = 3, @d_prev := a.`date`, a.`date`) AS date
FROM table_name a
     INNER JOIN (SELECT `date`, COUNT(1) AS cnt 
                 FROM table_name, (SELECT @d_prev := "0000-00-00") a 
                 GROUP BY d
                ) b
                ON a.`date` = b.`date`
ORDER BY a.id ASC; 
```

# android - 在哪里可以找到应用程序签名/应用程序密钥？

> ID：11880420
> 
> 赞同：0
> 
> 时间：2012-08-09T09:31:09.007
> 
> 标签：android, facebook-android-sdk

我正在制作一个应用程序，我希望将它与 facebook 集成。

在处理这个问题时，我遇到了：

*   我听说的名称“应用程序签名”驻留在文件 debug.keystore 中，它存在于每个应用程序中。

*   在 facebook 上创建应用程序时，需要在“Hash Key”字段中提及相同的应用程序密钥。

我的问题是如何生成/查看此密钥？

如果我对某事有误，请纠正我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:36:06.197

您必须创建一个密钥库，在 google dev 上[阅读。](http://developer.android.com/tools/publishing/app-signing.html)您可以使用此密钥库为您的应用程序签名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:31:45.670

获取此密钥的最简单方法是在 facebook 库中启用日志记录，并且当您的应用程序无法从 logcat 输出中复制此密钥时。为此打开`com.facebook.android.Util`并设置为 true `private static boolean ENABLE_LOG = false;`。之后不要忘记将其关闭，因为这会产生安全问题

[官方教程有更详细的描述和另一种方法在这里](https://developers.facebook.com/docs/mobile/android/build/#sig)做到这一点

# python - 如何编写用于打印的内联 if 语句？

> ID：11880430
> 
> 赞同：496
> 
> 时间：2012-08-09T09:31:48.273
> 
> 标签：python, if-statement, inline

只有当布尔变量设置为`True`. 所以，看了[这个](https://stackoverflow.com/questions/1319214/shorter-more-pythonic-way-of-writing-an-if-statements)之后，我尝试了一个简单的例子：

```
>>> a = 100
>>> b = True
>>> print a if b
  File "<stdin>", line 1
    print a if b
             ^
SyntaxError: invalid syntax 
```

如果我写的话也是一样`print a if b==True`。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：939
> 
> 时间：2012-08-09T09:47:28.010

Python**没有**尾随`if` **语句**。

`if`Python中有两种：

1.  `if`陈述：

    ```
    if condition: statement
    if condition:
        block 
    ```

2.  `if` **表达式**（在 Python 2.5 中引入）

    ```
    expression_if_true if condition else expression_if_false 
    ```

请注意，两者`print a`和`b = a`都是语句。只有`a`部分是表达式。所以如果你写

```
print a if b else 0 
```

它的意思是

```
print (a if b else 0) 
```

同样当你写

```
x = a if b else 0 
```

它的意思是

```
x = (a if b else 0) 
```

现在如果没有`else`子句，它将打印/分配什么？打印/分配**仍然存在**。

请注意，如果您不希望它在那里，您总是可以将常规`if`语句写在一行上，尽管它的可读性较差，并且确实没有理由避免使用两行变体。

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-08-09T09:32:50.770

内联 if-else *EXPRESSION*必须始终包含 else 子句，例如：

```
a = 1 if b else 0 
```

如果你想保持你的'a'变量值不变 - 评估旧的'a'值（否则语法要求仍然需要）：

```
a = 1 if b else a 
```

当 b 变为 False 时，这段代码保持**a不变。**

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-09T09:34:08.207

'else' 语句是强制性的。你可以做这样的事情：

```
>>> b = True
>>> a = 1 if b else None
>>> a
1
>>> b = False
>>> a = 1 if b else None
>>> a
>>> 
```

**编辑：**

或者，根据您的需要，您可以尝试：

```
>>> if b: print(a) 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-05-02T11:03:31.780

如果您不想这样做，`from __future__ import print_function`可以执行以下操作：

```
a = 100
b = True
print a if b else "",  # Note the comma!
print "see no new line" 
```

哪个打印：

```
100 see no new line 
```

如果您不习惯`from __future__ import print_function`或正在使用 python 3 或更高版本：

```
from __future__ import print_function
a = False
b = 100
print(b if a else "", end = "") 
```

添加 else 是使代码在语法上正确所需的唯一更改，条件表达式需要 else （“in line if else blocks”）

我没有使用`None`或`0`喜欢线程中其他人使用的原因是因为使用`None/0`会导致程序`print None`或在is`print 0`的情况下。`b``False`

如果您想阅读有关此主题的信息，我已经包含了一个指向该功能已添加到 Python 的补丁的发行说明的[链接。](http://docs.python.org/release/2.5/whatsnew/pep-308.html)

上面的“模式”与 PEP 308 中显示的模式非常相似：

> 这种语法可能看起来很奇怪和倒退；为什么条件出现在表达式的中间，而不是像 C 的 c 那样在前面？x：是吗？通过将新语法应用于标准库中的模块并查看生成的代码如何读取来检查该决定。在使用条件表达式的许多情况下，一个值似乎是“常见情况”，一个值是“例外情况”，仅在不满足条件的极少数情况下使用。条件语法使这种模式更加明显：
> 
> 内容 = ((doc + '\n') if doc else '')

所以我认为总的来说这是一种合理的方法，但你不能与以下简单性争论：

```
if logging: print data 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-05-02T16:54:46.073

从 2.5 开始，您可以使用[等效于 C 的“？：”</a>](https://docs.python.org/3.3/faq/programming.html#is-there-an-equivalent-of-c-s-ternary-operator)[三元条件运算符](https://stackoverflow.com/q/394809/55075)，语法为：

```
[on_true] if [expression] else [on_false] 
```

所以你的例子很好，但你必须简单地添加`else`，比如：

```
print a if b else '' 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-02-24T15:48:15.177

这可以通过[字符串格式化](https://stackoverflow.com/a/9244925/2000793)来完成。它适用于 % 表示法以及[.format()](https://docs.python.org/3/library/string.html#format-string-syntax)和[f-strings](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)（3.6 的新功能）

```
print '%s' % (a if b else "") 
```

或者

```
print '{}'.format(a if b else "") 
```

或者

```
print(f'{a if b else ""}') 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2014-03-19T17:10:35.830

您可以使用：

```
print (1==2 and "only if condition true" or "in case condition is false") 
```

同样，您也可以继续：

```
print 1==2 and "aa" or ((2==3) and "bb" or "cc") 
```

现实世界的例子：

```
>>> print "%d item%s found." % (count, (count>1 and 's' or ''))
1 item found.
>>> count = 2
>>> print "%d item%s found." % (count, (count>1 and 's' or ''))
2 items found. 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2021-05-05T14:17:05.643

您可以像这样编写内联三元运算符：

```
sure = True

# inline operator
is_true = 'yes' if sure else 'no'

# print the outcome
print(is_true) 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-06-01T00:35:45.927

你只是过于复杂了。

```
if b:
   print a 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-08-09T09:57:34.127

尝试这个 。它可能会帮助你

```
a=100
b=True

if b:
   print a 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-08-09T09:34:20.080

对于您的情况，这有效：

```
a = b or 0 
```

**编辑：**这是如何工作的？

在问题中

```
b = True 
```

所以评价

```
b or 0 
```

结果是

```
True 
```

分配给`a`.

如果`b == False?`,`b or 0`将评估为`0`将分配给的第二个操作数`a`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-08-09T09:33:41.487

在以下情况下，您总是需要`else`内联：

```
a = 1 if b else 0 
```

但更简单的方法是`a = int(b)`.

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-09-12T17:02:28.857

嗯，你可以用**列表理解**来做到这一点。这只有在你有一个真正的范围时才有意义..但它确实可以完成这项工作：

```
print([a for i in range(0,1) if b]) 
```

或仅使用这两个变量：

```
print([a for a in range(a,a+1) if b]) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-02-26T07:26:24.147

那么你为什么不简单地写：

```
if b:
    print a
else:
    print 'b is false' 
```

# asp.net - ASP.Net 缓存和锁定高流量网站

> ID：11880431
> 
> 赞同：2
> 
> 时间：2012-08-09T09:31:50.003
> 
> 标签：asp.net, caching, locking

这是场景：

*   线程 A 询问所有法语书籍

*   线程 B 询问所有阿拉伯语书籍

如果线程 A 在锁定区域内，线程 B 将在锁定区域外等待线程 A 完成。

因为代码中只有一个“地方”可以让线程 B 获取他的数据。

我想根据缓存中的密钥进行锁定，这意味着：

```
if(Cache["BooksInFrench"] == null)
{
    lock("BooksInFrench")
    {
        if(Cache["BooksInFrench"] == null)
        {
        object d = GetFromDB();
        cache["BooksInFrench"] = d;
        }
} 
```

BooksInArabic 等也是如此......所以这样，如果我有 200 个连接到我的网站，其中 10 个请求 BooksInFrench，其余的请求（BooksInArabic，BooksInHebrew......）可以运行并获取他们的数据因为他们的请求不在锁定区域。

我当前的代码如下所示： http: [//pastebin.com/LFhxgHDM](http://pastebin.com/LFhxgHDM)

我认为双重锁定不是很好......你看到任何其他解决方案/改进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:24:52.600

它可能只是在您的示例伪代码中，但[建议在字符串上锁定对象](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)（因为较低级别的优化，如不可变共享字符串、规范版本等 - 请参阅[按字符串锁定。这安全/合理吗？](https://stackoverflow.com/questions/4224888/locking-by-string-is-this-safe-sane)）。

对于一个已知的`lock`：

```
// In your class
private static readonly object BooksInFrenchLock= new object();
private const string BookInFrenchCacheKey = "BooksInFrench";

// In your cache block
if(Cache[BookInFrenchCacheKey] == null)
{
    lock(BooksInFrenchLock)
    {
        if(Cache[BookInFrenchCacheKey] == null)
        {
            object d = GetFromDB();
            Cache[BookInFrenchCacheKey] = d;
        }
} 
```

为了从数据库中锁定多个对象，您可以使用 a[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)而不是哈希表（如[您的 pastebin 代码](http://pastebin.com/LFhxgHDM)中所示） - 它将使您免于一个额外的“级别”锁定。魔术发生在[`BookLocks.GetOrAdd(bookLanguage, s => new object())`](http://msdn.microsoft.com/en-us/library/ee378677.aspx).

```
// In your class
private static readonly ConcurrentDictionary<string, object> BookLocks =
    new ConcurrentDictionary<string, object>();

// In your cache block
string bookLanguage = formatAndCleanBookLanguageArgument();

if(Cache[bookLanguage] == null)
{
    object lockObject = BookLocks.GetOrAdd(bookLanguage, s => new object());

    lock(lockObject)
    {
        if(Cache[bookLanguage] == null)
        {
            object d = GetFromDB();
            Cache[bookLanguage] = d;
        }
} 
```

# google-maps - 如何将 LatLng 转换为 (x , y) 像素，反之亦然？

> ID：11880441
> 
> 赞同：5
> 
> 时间：2012-08-09T09:32:36.657
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 API V3，当用户点击地图时，我想创建一个可编辑的 100 像素 X 100 像素矩形。

现在我只需要用户点击的 (x,y) 点，然后是 (x+100 , y+100) 的 lat 和 lng。任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T11:21:12.837

此函数应围绕您传递给它的中心（LatLng）创建一个 100 x100 矩形。

```
function setRectangle(center){
    var scale = Math.pow(2,map.getZoom());
    var proj = map.getProjection();
    var wc = proj.fromLatLngToPoint(center);
    var bounds = new google.maps.LatLngBounds();
    var sw = new google.maps.Point(((wc.x * scale) - 50)/ scale, ((wc.y * scale) - 50)/ scale);
    bounds.extend(proj.fromPointToLatLng(sw));
    var ne = new google.maps.Point(((wc.x * scale) + 50)/ scale, ((wc.y * scale) + 50)/ scale);
    bounds.extend(proj.fromPointToLatLng(ne));
    var opts = {
        bounds: bounds,
        map: map,
        editable:true
    }
    var rect = new google.maps.Rectangle(opts);

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T09:48:28.520

您可以使用

```
var overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap(map);

var proj = overlay.getProjection();
var pos = marker.getPosition();
var p = proj.fromLatLngToContainerPixel(pos); 
```

现在您可以从 px 和 py 获取像素

# javascript - 如何通过javascript将浏览器滚动到所需的元素？

> ID：11880443
> 
> 赞同：2
> 
> 时间：2012-08-09T09:32:39.310
> 
> 标签：javascript, html, browser

问题很简单。

如何通过javascript将浏览器滚动到所需元素或所需位置？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T09:33:40.457

到一个元素：

```
document.getElementById('id').scrollIntoView(); 
```

[具有跨浏览器支持](http://www.quirksmode.org/dom/w3c_cssom.html#t23)，并且可能是最简单的方法......

或特定位置：

```
window.scroll(x,y); 
```

[`window.scroll()`这里的文档](https://developer.mozilla.org/en-US/docs/DOM/window.scroll)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:45:07.643

```
//Finds y value of given object
function findPos(obj) {
    var curtop = 0;
    if (obj.offsetParent) {
        do {
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    return [curtop];
    }
}
//Get object
var SupportDiv = document.getElementById('customer_info');

//Scroll to location of SupportDiv on load
window.scroll(0,findPos(SupportDiv)); 
```

# .net - PowerShell 是什么类型的语言？

> ID：11880447
> 
> 赞同：24
> 
> 时间：2012-08-09T09:32:53.797
> 
> 标签：.net, powershell

我最近一直在使用很多 PowerShell（我主要是系统管理员），我想知道它是什么类型的语言。我认为它是一种解释性语言，但我听过很多其他名称来描述语言：强类型与弱类型、动态、静态。PowerShell 属于什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-09T10:22:47.620

首先澄清几点：

两个类别：编译和解释是指源代码（或脚本）被翻译成动作的方式。

在解释语言中，命令被*解释器*直接解释为动作。

在编译语言中，源代码首先被翻译（或*编译*）成机器语言（或中间语言，如 Java 的字节码或 .NET 的程序集），在运行时将转化为动作。在编译程序的情况下，您可以将编译后的代码视为解释语言的源代码，并将 CPU 视为解释器（或 Java 中的 JVM 和 .NET 的 .NET 运行时）。

静态和动态类型语言的概念是指该语言的变量。

静态类型语言（如 C 系列或 Java）将在其源代码中定义变量的类型，并且该变量的使用将由该类型派生（通常由编码器）。

动态类型语言（如 Scheme 或 VBScript）变量的类型将由其用法定义。在某些情况下，编码人员根本无法为变量定义类型（例如在 Scheme 或 Bash 脚本中），而在其他情况下，这只是可选的（例如 VBScript）。

第三个概念对是强类型语言与弱类型语言。这些概念指的是强加于语言中变量类型之间关系的规则（最常见的是与强制转换有关）。类型系统“强度”的问题不像其他问题那样布尔，因此大多数语言介于强类型系统和周类型系统之间。

在松散（弱）类型的语言中，编译器和运行时将允许您将一种类型的变量视为另一种类型，并且这种情况的行为通常是特定于语言的（在某些情况下甚至是特定于实现的） . 例如，您可以将一个数字与一个字符串相加，这将被视为有效代码。

在具有强类型系统的语言中，编译器和运行时将要求您执行特定操作，以便在不同类型的变量之间执行操作。最常见的例子是强制转换（比如将 int 强制转换为 float）。

### 底线

要定义 PowerShell，它是一种解释型语言，但对于 .NET，这是一个灰色地带。在 PowerShell 中定义变量不包括定义它们的类型，因此它显然是一种动态类型语言，并且可以无缝地组合变量（如@halr9000 所述），这表明了一个松散的类型系统。

一句话，我会说它是一种具有弱类型系统的解释型动态类型语言。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T23:54:13.877

PowerShell 不是编译语言。它也不会直接产生 IL。版本 1 和版本 2 完全解释了 PS V3 的新版本确实在后台生成和缓存表达式作为 IL 以提高速度和优化目的，但没有公开任何编译的 DLL 或其他语言可以像常规 CLR 类型一样调用的内容（虽然其他语言可以托管 PowerShell 引擎，并在其中执行脚本。）

所以把它想象成一种恰好生活在 Dotnet 生态系统中的解释语言，它允许它实例化 DOTNET 对象并与之交互，从而使它看起来像一种“DOTNET 语言”。PowerShell 拥有自己的扩展类型系统 (ETS)，使其更具动态性。您可以使用所需的任何属性动态创建对象，或者获取现有的 dotnet 对象并向其中添加内容。

PowerShell 是一种动态语言。使用动态范围。它是一种以管道为中心的语言，通过管道传递丰富的对象（与 unix 中的二进制/文本管道相反）

PowerShell 在哲学和实现方面是一种以命令（动词和名词）为中心的语言，虽然它是一种丰富的对象语言，但我不会说它是面向对象的。您可以与对象交互并创建它们，但目标是生成基于任务的命令

PowerShell 存在于不同的环境中。它是一个逐行 REPL 命令行解释器，但它也是一个完整的脚本引擎，可以嵌入到其他应用程序中。

PowerShell 具有变量的动态而不是词法范围。

PowerShell 有许多“功能性”特性，其中 Scriptblocks 是健壮的 Lambda，而且它（从 V2 开始）还具有完全闭包。尽管 Lambdas 通常被认为是一个困难的概念。它们在 powershell 中运行良好，被许多难以编程的人使用。事实上，在 PowerShell 中，每个脚本、函数或高级函数都是一个 lamda。PowerSHell 的 lamda 与其他 lamda 不同，因为它们具有动态范围，还因为它们在管道中执行。这是一个使用内置 cmdlet 的简单示例

```
get-process | where { $_.MainWindowTitle -like '*stack*' } | select processname 
```

在这里，您将 lamda 传递给 cmdlet where ，并且对于通过管道的每个项目都会对其进行评估，其结果将返回到管道中，然后由 select 命令处理。

PowerShell（自 V2 起）是一种分布式语言，具有完整的远程处理堆栈，允许您同时从一台计算机连接到多台计算机、执行带 throlling 的命令以及处理多个流上的结果（结果、错误、警告等）因为它们发生在每台计算机上。

那么PowerShell是一种什么样的语言呢？

**它是一种以命令为中心的语言，主要针对系统管理和自动化，但也是一种基于对象管道的丰富语言，存在于 dotnet 生态系统中。它是一种动态范围的动态语言，具有函数式语言特性和特性组合，我相信它使它成为一种全新的创新语言**

然而遗憾的是，PowerShell 有很多陷阱和问题，虽然从初学者到初级的学习曲线并不陡峭，但进入中级却非常陡峭。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T10:00:45.847

PowerShell 使用所谓的动态类型脚本语言。它可以实现复杂的操作，支持变量、函数、循环、分支、结构化错误/异常处理，并且与.NET集成。动态类型语言是在运行时而不是在编译时完成类型检查并且其变量没有类型但可以引用任何类型的值。动态类型语言的示例包括 PHP、JavaScript、MATLAB、Ruby、Python 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T17:00:51.510

也许，即使术语脚本语言用于定义 PowerShell，也有一种推断/首选语言（来源：http: [//msdn.microsoft.com/en-us/library/dd901838%28v=vs.85%29。 aspx](http://msdn.microsoft.com/en-us/library/dd901838%28v=vs.85%29.aspx) ): C#。原因：MSDN 提供的 cmdlet 的 PowerShell 示例前面有一个制表符 C# 表示法。这适合：C# 是 .NET 运行时在第一次运行时编译的解释语言（称为通用中间语言 (CIL)）。此外，C# 是一种面向对象的编程 (OOP) 语言，PowerShell 与 Active Directory 中的对象进行交互。另请参阅 http 链接*blogs.technet.com/b/stefan_gossner/archive/2010/05/07/using-csharp-c-code-in-powershell-scripts.aspx*。但是，这并不意味着您只能在 PowerShell 中使用 C#：请参阅[http://msdn.microsoft.com/en-us/library/system.management.automation.powershell%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/system.management.automation.powershell%28v=vs.85%29.aspx)

# node.js - nodejs express app.use 方法

> ID：11880448
> 
> 赞同：6
> 
> 时间：2012-08-09T09:32:56.377
> 
> 标签：node.js, express

我正在处理以下遗留代码：

```
var express = require('express');
var app = express.createServer();

app
.use('/run!', getUrl('app.sys', '/run'))
.use('/stat', getUrl('app.sys')) 
```

我在查找“使用”方法的文档时遇到了麻烦。我找到了一些用法示例，但在所有示例中，它似乎都得到了一个参数，而这里它得到了 2 个。你能帮我弄清楚这里的 use 语句是什么意思吗？

谢谢，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T23:16:06.070

app.use 意味着你将按照你在程序中给出的顺序执行一个中间件。

在您的示例中， getUrl 是中间件，您作为第一个参数的字符串是路径。因此，只有使用该路径或“url”，中间件才会被执行。

不确定 getUrl 函数在那里做什么。

如果您想阅读更多关于“使用”的信息，请尝试官方文档。

[http://expressjs.com/api.html#app.use](http://expressjs.com/api.html#app.use)

# microsoft-metro - Metro风格应用中的RSA加密

> ID：11880450
> 
> 赞同：4
> 
> 时间：2012-08-09T09:32:58.650
> 
> 标签：microsoft-metro, rsa

我有公钥模数和公钥指数，我需要在 Metro 风格应用程序中生成公钥并加密数据。在 c# 中，我们有 RSAParameters 类，但对于 Metro 风格的应用程序，我找不到任何此类的东西。

当我使用直接从证书接收到的 base64 编码公钥并尝试使用以下代码导入密钥时，我得到一个异常抛出 ASN1 bad tag value met。我认为这是由于数据格式无效。

```
 //sample dummy key from certificate in base64encoded
     string key =   @"MIIB0zCCAX2gAwIBAgIJAMF/bHcA799IMA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNVBAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMTIwMzI3MTEyNjQ5WhcNMTMwMzI3MTEyNjQ5WjBFMQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMEPeWjP4sdqxvBlDId4BtRRTeWPwjlZLSOFvOVgmoSyoPva8psFUF6tH9/vPXIJrL80tdCoBt8YFH6pwDN9a1sCAwEAAaNQME4wHQYDVR0OBBYEFGARqQfUhX7atVU4sS+aQAPt/jFxMB8GA1UdIwQYMBaAFGARqQfUhX7atVU4sS+aQAPt/jFxMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADQQALqOyjovRbWUZvziVaE8QYy83WEln1l+HJU9D6tFncUZTlwSd8aUwyQsd3zOVNZ41oCAVv5R3h1jtBtPbM+c1K";
       symmetricKeyAlgorithmProvider asymmAlg = AsymmetricKeyAlgorithmProvider.OpenAlgorithm("RSA_OAEP_SHA1");
       CryptographicKey publicKey = asymmAlg.ImportPublicKey(CryptographicBuffer.DecodeFromBase64String(key));
        string input64string ="encrypt this";
        IBuffer dataToEncrypt = CryptographicBuffer.DecodeFromBase64String(input64string);
        IBuffer encryptedData = CryptographicEngine.Encrypt(publicKey, dataToEncrypt, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:25:07.373

您`key`是公钥的模数部分，长度为 128。考虑从 Metro 中的 C# 代码导出的标准密钥：

```
using System.Runtime.InteropServices.WindowsRuntime;
CryptographicKey standardKeyPair = provider.CreateKeyPair(1024);
byte[] standardKey = standardKeyPair.ExportPublicKey(CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey).ToArray(); 
```

你可以看到 byte[] standardKey 的长度是 140，它有 7 位前缀和 5 位尾部。我不知道原因，但我将额外的 12 位复制到已知密钥，它可以工作。希望这可以帮助你：

```
public static IBuffer RsaEncrypt(this IBuffer dataToEncrypt, string publicKeyN)
{
    AsymmetricKeyAlgorithmProvider provider = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);

    CryptographicKey standardKeyPair = provider.CreateKeyPair(1024);
    byte[] standardKey = standardKeyPair.ExportPublicKey(CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey).ToArray();
    var data_n = CryptographicBuffer.DecodeFromBase64String(publicKeyN).ToArray();
    Array.Copy(data_n, 0, standardKey, 7, data_n.Length);
    var key = provider.ImportPublicKey(standardKey.AsBuffer(), CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey);

    var result = CryptographicEngine.Encrypt(key, dataToEncrypt, null);
    return result;          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:31:04.760

这应该满足您的要求：

```
public static IBuffer RsaEncrypt(byte[] modulus, byte[] exponent, IBuffer data)
{
  var rsa = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaOaepSha1);
  var keyBlob = modulus.Concat(exponent).ToArray().AsBuffer();
  var publicKey = rsa.ImportPublicKey(keyBlob, CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey);
  return CryptographicEngine.Encrypt(publicKey, data, null);
} 
```

当然，如果需要，您仍然可以使用 base64 字符串作为输入/输出，但您已经知道如何做到这一点。:)

如果您深入研究[RFC3447](http://www.ietf.org/rfc/rfc3447.txt)的第 61 页，您会发现公钥格式结构只是模数后跟指数，这就是我将它们连接起来的原因。

# java - 将非泛型方法转换为泛型方法

> ID：11880452
> 
> 赞同：0
> 
> 时间：2012-08-09T09:33:01.130
> 
> 标签：java, generics, jaxb, marshalling

我有以下方法：

```
private <U> void fun(U u) throws JAXBException {
    JAXBContext context = JAXBContext.newInstance(u.getClass());
    Marshaller marshaller = context.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.marshal(u, System.out);
    } 
```

marshal() 方法采用不同类型的参数。看[这里](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/Marshaller.html) 它需要：

1.  内容处理程序
2.  输出流
3.  XmlEventWriter
4.  XMLStreamWriter 等

如何修改上述方法，而不是`System.out`，我可以在函数参数中传递编组的目的地。

例如，我想调用如下方法：

```
objToXml(obj1,System.out);
outToXml(obj1,file_pointer); 
```

同样地。

我尝试跟随`fun(obj1,PrintStream.class,System.out)`但没有成功：

```
private <T, U, V> void fun(T t, Class<U> u, V v) throws JAXBException {
    JAXBContext context = JAXBContext.newInstance(t.getClass());
    Marshaller marshaller = context.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.marshal(t, (U) v);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:51:44.840

您不需要向您的方法添加额外的泛型参数。只需将 javax.xml.transform.Result 传递给编组器：

```
private <U> void fun(U u, Result result) {
  JAXBContext context = JAXBContext.newInstance(u.getClass());
  Marshaller marshaller = context.createMarshaller();
  marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
  marshaller.marshal(u, result);
} 
```

您可以使用 StreamResult 写入 System.out 或文件：

```
fun(foo, new StreamResult(System.out));
fun(foo, new StreamResult(file_pointer.openOutputStream())); 
```

# sql - 当它们没有任何主外键关系时从 2 个表中获取数据

> ID：11880453
> 
> 赞同：0
> 
> 时间：2012-08-09T09:33:03.953
> 
> 标签：sql, sql-server

我有两个表，它们是数据源，说 A，B。我想从这些表中获取 4 列的数据。两个表中都存在 4 列。“A”表可能有也可能没有 4 列或所有 4 列的值。但可以肯定的是，B 表具有所有这些值。因此，如果它存在于 A 中，我必须从中选择，否则我必须从 B 中选择。假设 Col1、Col2 存在于 A 中，而 col3 和 col4 不在 A 表中，那么它应该从 A 和 col 中获取 col1、col2 3、来自B表的col4。

我不擅长 SQL。有人可以帮我弄这个吗？希望我的问题很清楚。如果没有请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:41:33.627

您可以使用[LEFT OUTER JOIN](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)在 A 中查找匹配项（如果存在）。如果匹配行不存在，则 B 中的行仍将保留在查询中。如果 A 的某一列具有 NULL 值，则 COALESCE() 可用于回退 B 对该列的值。

从您的问题中我不清楚您想使用哪些标准来匹配 A 和 B 之间的行，但是如果您填写该详细信息，也许像下面这样的查询会有所帮助。

```
SELECT COALESCE(A.col1,B.col1)
        , COALESCE(A.col2,B.col2)
        , COALESCE(A.col3,B.col3)
        , COALESCE(A.col4,B.col4)
FROM B
LEFT OUTER JOIN A
    ON A.id = B.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:15:39.217

您可以在没有表之间关系的情况下进行连接。下面的示例显示了我认为您的目标。

```
DECLARE @tableone TABLE(id int,FirstName varchar(50),Secondname varchar(50))
insert into @tableone values(1,null, null);
insert into @tableone values(2,null, 'Dev');
insert into @tableone values(3,'Arjun', null);
insert into @tableone values(4,'Jack', 'Bilalo');

DECLARE @tabletwo TABLE(id int,FirstName varchar(50),Secondname varchar(50))
insert into @tabletwo values(1,'John', 'cena');
insert into @tabletwo values(2,'Michel', 'Dev');
insert into @tabletwo values(3,'Arjun', 'Ramn');
insert into @tabletwo values(4,'Jack', 'Bilalo');

SELECT A.Id, COALESCE(A.FirstName,B.FirstName) As Firstname, COALESCE(A.Secondname,B.Secondname) As Secondname
FROM @tableone A
    JOIN @tabletwo B
        ON A.id = B.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:52:42.133

[现场演示](http://sqlfiddle.com/#!3/dbcfe/1)

[http://sqlfiddle.com/#!3/dbcfe/1](http://sqlfiddle.com/#!3/dbcfe/1)

**示例代码**

```
create table tableone(id int,FirstName varchar(50),Secondname varchar(50))
insert into tableone values(1,'John', 'cena');
insert into tableone values(2,'Michel', 'Dev');
insert into tableone values(3,'Arjun', 'Ramn');
insert into tableone values(4,'Jack', 'Bilalo');

create table tabletwo(id_tb1 int,"address" varchar(150))
insert into tabletwo values('1','Uk');
insert into tabletwo values('2','USA');
insert into tabletwo values('3','China');
insert into tabletwo values('4','India');

select a.FirstName,a.SecondName,b.address as location 
from tableone a inner join tabletwo b
on a.id=b.id_tb1 
```

# c - 如何在 C printf 中使用宏？

> ID：11880459
> 
> 赞同：1
> 
> 时间：2012-08-09T09:33:30.340
> 
> 标签：c, linux

我们的代码在 printf 中硬编码了至少 20 个不同文件中的版本信息，例如： `printf("Software version v11.2");`这意味着每次有更新时都要更改 20 个文件。

相反，我希望在 common.h 文件中使用宏并将其#include，这样版本更新只是更改了一个宏，仅此而已。

我试过类似的东西：

```
#include <stdio.h>
#define VERSION "v11.2"
int main()
{
  printf("Trying to print macro: ", VERSION);
} 
```

但是这种“字符串”“字符串”风格在 Java 中而不是在 C 中有效。任何想法如何完成它？

我们将使用 gcc 进行编译。

注意：**宏也用于一些典型的 *.rc 文件中，我们不能在其中使用变量，并且在某些地方这些 rc 文件使用 SQL 查询进行解析。所以我们不能使用像 char ver[]="v11.2" 这样的变量**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T09:35:22.700

这里有两种可能的解决方案。

```
#include <stdio.h>
#define VERSION "v11.2"
int main()
{
  // Let printf insert the string when doing the output.
  printf("Trying to print macro: %s\n", VERSION);
  // Let the compiler concatenate the strings.
  puts("Trying to print macro: " VERSION);
  // Let the compiler concatenate the strings, can be assigned to a variable.
  const char buf[] = "Trying to print macro: " VERSION;
  puts(buf);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:35:14.097

```
printf("Trying to print macro: %s", VERSION); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:35:18.940

Is 是一个字符串，`%s`应该可以工作。

```
int main()
{
  printf("Trying to print macro: %s", VERSION);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:23:03.313

尝试这个

```
#define PRINT(format,args...)\
\
    do { \
        printf(" your data...");\
        } \
    } while(0) 
```

# dll - 如何在运行的lua程序中替换.dll

> ID：11880468
> 
> 赞同：1
> 
> 时间：2012-08-09T09:33:51.473
> 
> 标签：dll, lua

Lua 可以通过 using`require`或.dll 动态加载 .dll `package.loadlib`。但是没有卸载模块的功能。

我希望能够在运行程序中更新模块。程序本身将收到有关 .dll 新版本的通知。然后它将加载新的，更改模块表并卸载前一个。

我已经设法通过使用一些带有`unrequire`函数的奇怪代码片段并强制对代码进行垃圾收集来做到这一点。我希望能够以更文明的方式做到这一点。我知道在 windows 和 linux 上有函数`dlclose`and 。`FreeLibrary`但是，我无法调用它们，因为我无法访问库的实际句柄。

缺少卸载功能的原因是，lua 解释器无法真正知道它是否不再使用模块中的 C 函数。在我的情况下不是这种情况，因为我只会**更新**库，而不是完全删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:10:54.043

有一种方法可以做到，但让它发挥作用会有一些限制。

基本思想是在 Lua 函数和`require`使用模块的脚本与您试图在幕后更改的实际 C 函数之间创建一个间接层。这最好在您的模块*本身*中完成。也就是说，不是让 Lua 代码替换函数等，而是让 C 函数自己替换。

这样，你就可以控制了。

这个想法很简单。你有两个模块：一个是 Lua 注册函数的存根模块，以及带有函数实现的*实际模块。*只有后一个模块发生了变化。

你的存根模块是一个 Lua 模块，它有两个向 Lua 注册的函数。第一个是存根函数，它会多次注册。它被注册为具有单个上值的*闭包。*

该上值是一个 C 函数。这个存根函数所做的唯一一件事就是从 Lua 状态中拉出一个 upvalue，并使用给定的相同参数调用它，并准确返回被调用函数返回的值。它需要一些堆栈技巧才能正确传递，但我假设您知道如何处理它。此外，这个函数应该检查 upvalue 的值；如果是`nil`，则什么也不做，什么也不返回（这可以防止错误）。

第二个功能是我们稍后会谈到的。

您的存根模块初始化例程将加载您的*实际*模块，这实际上只是一个 DLL。此 DLL 需要有一个函数，该函数将提供实际模块导出的函数列表。因此，它可以查询要转发的各种 Lua 函数。

对于从实际模块中导出的每个函数，它会向 Lua 注册存根函数，并为其命名。存根的上值设置为导出的函数，加载时没有上值。

显然，DLL 的句柄需要保留，可能作为注册表项中的用户数据或其他内容。

存根模块导出的第二个函数是重新加载实际模块的函数。为此，您需要加载新的 DLL（而不是先卸载旧的）。为了使这个过程变得健壮（尽管你保证函数列表是相同的。我不喜欢这样假设），你需要遍历你的模块表。

对于不在新 DLL 中的每个已注册函数，将其上值设置为`nil`（并将它们从模块表中删除）。对于新 DLL 中的每个注册函数，将 upvalue 更改为新函数。如果新的 DLL 有未注册的函数，现在通过使用新的上值注册存根函数将它们粘贴到表中。

完成所有这些之后，您就可以卸载旧的 DLL。

那里; 完毕。

注意：为了使其工作，您的模块功能必须表现良好。他们不能做诸如注册其他 C 函数之类的事情。他们不能使用 Lua 5.2 的机制来产生和恢复跨 C 边界的协程。等等。否则，您将面临调用已卸载 DLL 的风险。

# python - 在 .split() 之后保留标签

> ID：11880474
> 
> 赞同：2
> 
> 时间：2012-08-09T09:34:04.730
> 
> 标签：python

我正在做一个小项目，但遇到了问题。

我正在读取类似这样的文件*（注意，原始文件有大约 40k 行*）：

```
35   IMAGE:1679942   SAMD4   Sterile alpha motif domain   Hs.98259   ATI146610
36   IMAGE:1700154            AI049531
37   IMAGE:1865232            AI269361 
```

如您所见，有些单元格包含信息，有些则不包含。所以我希望在没有存储任何信息的每个单元格中都有一个**N/A**。我怎样才能做到这一点？.split() 确实列出了没有这些单元格的列表。有没有解决方案，我怎样才能将所有这些水龙头保存在一个列表中，即`line = ["36", "IMAGE:1700154", "", "", "", "AI049531", ...]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:43:40.060

您可以在选项卡处[拆分](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)（使用评论中的数据进行**编辑）：**

```
data = """35\tIMAGE:1679942\tSAMD4\tSterile alpha motif domain\tHs.98259\tATI146610
36\tIMAGE:1700154\t\t\tAI049531"""

for line in data.split("\n"):
    print line.split("\t") 
```

结果：

```
['35', 'IMAGE:1679942', 'SAMD4', 'Sterile alpha motif domain', 'Hs.98259', 'ATI146610']
['36', 'IMAGE:1700154', '', '', 'AI049531'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:50:31.970

您必须先准备数据，然后才能将其导入 CSV，然后再导入所需的列表格式。

1）首先找到您将拥有的最大列数

2) 为每个行项找到一个模式。例如。A*、Sterite* 等。希望存在这种模式以区分不同的行项目。

3) 对于每一行，执行 row.split("\t")` 并将每个行项与模式匹配以在行中找到其正确索引。

4)`newRow[correct_index] = oldrow[index] and "" for others`

# c++ - 具有 3 个线程的多线程程序，可打印数字序列

> ID：11880483
> 
> 赞同：1
> 
> 时间：2012-08-09T09:34:23.017
> 
> 标签：c++, c, multithreading

我正在尝试编写一个使用 3 个线程并打印 0、1、2、3、4、5、.... 等的程序。

线程 1 - 打印 0,3,6,9 等等
线程 2 - 打印 1,4,7,10 等等
线程 3 - 打印 2,5,8,11 等等

任何人都可以帮我编写代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-30T19:09:27.887

这里可能是更好的解决方案

```
#include<iostream>
#include<thread>
#include<mutex>
#include<condition_variable>
using namespace std;

#define MAX 10

condition_variable cv1, cv2, cv3; 
mutex m1;
int i;
void function1()
{
    while (i < MAX) {
        unique_lock<mutex> lock(m1);
        cv1.wait(lock);
        cout << i << endl;
        i++;
        lock.unlock();
        cv2.notify_one();
    }

}
void function2()
{
    while (i < MAX) {
        unique_lock<mutex> lock(m1);
        cv2.wait(lock);
        cout << i << endl;
        i++;
        lock.unlock();
        cv3.notify_one();
    }
}

void function3()
{   
    while (i < MAX) {
        unique_lock<mutex> lock(m1);        
        cv3.wait(lock);
        cout << i << endl;
        i++;
        lock.unlock();
        cv1.notify_one();
    }
}

int main()
{
    thread t3(function3);
    thread t1(function1);
    thread t2(function2);

    cv1.notify_one();

    t1.join();
    t2.join();
    t3.join();

    getchar();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:02:39.953

一种可能的解决方案涉及消息队列。每个线程都有一个消息队列。

*   线程 1 写入`0`，然后发送`0`到消息队列 2。
*   线程 2 从消息队列 2 中读取值，增加该值并将新值发送到消息队列 3。
*   线程 3 从消息队列 3 中读取值，将其递增，然后将新值发送到消息队列 1

*   从这里，您应该推断线程 1 下一步应该做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T05:44:17.263

以下程序使用条件变量进行同步。如果需要任何修改或发现任何错误，请帮助我。

```
#include <pthread.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

#define THREAD_LIMIT  3
pthread_mutex_t     mutex = PTHREAD_MUTEX_INITIALIZER;
int PRINT_MAX = 500;
pthread_cond_t  cond[THREAD_LIMIT];//  = PTHREAD_COND_INITIALIZER;

struct thread_arg
{
    int index;
    pthread_cond_t *waitCond;
    pthread_cond_t *signalCond;
};

void* threadFun(void* pArg)
{
    struct thread_arg *pThreadArg = (struct thread_arg *)pArg;
    int i=pThreadArg->index, rValue;
    for(;i< PRINT_MAX;i += THREAD_LIMIT)
    {
        rValue = pthread_mutex_lock(&mutex);
        printf("thread index = %d  value = %d \n",(pThreadArg->index+1), i);

        rValue = pthread_cond_signal(pThreadArg->signalCond);
        //wait for turn
        while( pthread_cond_wait(pThreadArg->waitCond, &mutex) != 0 )
        {}
        rValue = pthread_mutex_unlock(&mutex);
    }

    rValue = pthread_cond_signal(pThreadArg->signalCond);
    return NULL;    
}

int main()
{
    pthread_t ThreadId[THREAD_LIMIT];
    struct thread_arg ThreadArg[THREAD_LIMIT];

    for (int i =0; i< THREAD_LIMIT ; i++)
        pthread_cond_init(&cond[i], NULL);

    for (int i =0; i< THREAD_LIMIT ; i++)
    {
        ThreadArg[i].index = i;
        ThreadArg[i].waitCond = &cond[i];
        if (i == THREAD_LIMIT-1)
            ThreadArg[i].signalCond = &cond[0];
        else
            ThreadArg[i].signalCond = &cond[i+1];

        printf("starting Thread %d \n",i+1);
        pthread_create(&ThreadId[i], NULL, &threadFun,(void*)&ThreadArg[i]);
        usleep(500);
    }
    for (int i =0; i< THREAD_LIMIT ; i++)
        pthread_join(ThreadId[i],NULL);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-06T04:59:01.713

具有 3 个线程的多线程程序，使用条件变量和互斥体打印数字序列。

**什么是条件变量和互斥锁，何时使用以及如何使用？** [http://thispointer.com/c11-multithreading-part-7-condition-variables-explained/](http://thispointer.com/c11-multithreading-part-7-condition-variables-explained/)

```
#include<iostream>
#include<thread>
#include<mutex>
#include<condition_variable>
using namespace std;

//Creating 3 condition variable to perform synchronization in 3 different functions using wait and notify function on condition variable
condition_variable cv1, cv2, cv3;
//creating mutex variable to lock and unlock the resource    
mutex m1;
void function1()
{
    //creating unique_lock on the mutex so that we don't have to take care whether mutex is unlocked or not, as mutex gets unlocked as soon as unique_lock is out of scope (using concept of RAII)
    unique_lock<mutex> lock(m1);
    for(int i=0; i<10; i+=3)
    {
        cout<<i<<endl;

        //We notify function2 using notify_one function, once we are done printing values from function one and makes function1 in wait state by calling wait function
        cv2.notify_one();
        cv1.wait(lock); 
    }

}
void function2()
{   
    unique_lock<mutex> lock(m1);
    for(int i=1; i<10; i+=3)
    {       
        cout<<i<<endl;

        //We notify function3 using notify_one function, once we are done printing values from function2 and makes function2 in wait state by calling wait function
        cv3.notify_one();
        cv2.wait(lock);     
    }   
}

void function3()
{   
    unique_lock<mutex> lock(m1);
    for(int i=2; i<10; i+=3)
    {       
        cout<<i<<endl;

       //We notify function1 using notify_one function, once we are done printing values from function3 and makes function3 in wait state by calling wait function
        cv1.notify_one();
        cv3.wait(lock);     
    }   
}

int main()
{
    //creating 3 threads (t1, t2 & t3) and associating functions with each thread
    thread t1(function1);
    thread t2(function2);
    thread t3(function3);

    t1.join();
    t2.join();
    t3.join();

    return 0;
} 
```

输出：

```
0
1
2
3
4
5
6
7
8
9 
```

# javascript - 如何使用 JavaScript 验证 youtube 视频 ID

> ID：11880492
> 
> 赞同：0
> 
> 时间：2012-08-09T09:35:04.747
> 
> 标签：javascript, validation, youtube

我想用 JavaScript 验证 youtube 视频 id 并确保视频可以正常播放（没有被删除）

我注意到很多人提到了[http://gdata.youtube.com/feeds/api/videos/VIDEO_ID](http://gdata.youtube.com/feeds/api/videos/VIDEO_ID)，但是响应数据的格式是 xml。我尝试发送 jsonp 请求并收到错误消息，因为 xml 已格式化。

有没有办法在不通过一些后端代码设置代理的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:39:51.850

似乎可以通过 JSONP： [https ://developers.google.com/youtube/2.0/developers_guide_json?hl=en](https://developers.google.com/youtube/2.0/developers_guide_json?hl=en)

```
<script type="text/javascript" 
    src="http://gdata.youtube.com/feeds/users/GoogleDevelopers/uploads?v=2&alt=json-in-script&format=5&callback=showMyVideos">
</script> 
```

# java - 如何在java中通过占用空间来拆分字符串

> ID：11880505
> 
> 赞同：1
> 
> 时间：2012-08-09T09:35:43.030
> 
> 标签：java, string

我知道将数据拆分为字符串非常容易，但我仍然想要连接字符串的指南，我的数据采用格式。在我的字符串中，数据采用上述格式

```
104
inNetStandardGuest
windowsGuest
uestToolsTooOld

121
slesGuest
guestToolsTooOld
20569355609 
```

预期输出：

```
104,inNetStandardGuest,windowsGuest,uestToolsTooOld
121,slesGuest,guestToolsTooOld,20569355609 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:40:30.993

它只是拆分和组合字符串。

```
StringBuilder out = new StringBuilder();
for (String set : data.split("\n\n\n")) {
    for (String line : set.split("\n")) {
        out.append(line).append(',');
    }
    out.setCharAt(out.length(), '\n');
}
System.out.println(out); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:41:14.513

使用 Guava 的[Splitter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)和[Joiner](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)：

```
final Iterable<String> lines = Splitter.on("\n\n\n").split(input);
for (final String line : lines) {
  final Iterable<String> fields = Splitter.on("\n").split(line);
  final String joined = Joiner.on(",").join(fields);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:43:37.243

这个怎么样？

```
String s = "104\n" +
           "inNetStandardGuest\n" +
           "windowsGuest\n" +
           "uestToolsTooOld\n" +
           "\n" +
           "\n" +
           "121\n" +
           "slesGuest\n" +
           "guestToolsTooOld\n" +
           "20569355609\n";

System.out.println(s.replaceAll("(.)\\n","$1,")
                    .replaceAll(",,","\n")
                    .replaceAll(",\\n","\n")); 
```

不过，可能不是最有效的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:40:46.493

缓冲阅读器： http: [//docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)

readLine() 方法： [http](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine) ://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine ()

例如你读了 4 行

```
 string outputLine = line1 + "," + line2 + "," + line3 + "," + line4; 
```

然后阅读 2 行并跳过它。

如果你不知道如何使用我的建议来实现它，你应该阅读一些基础教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T09:50:21.917

试试这个 ：

```
String str = "104\ninNetStandardGuest\nwindowsGuest\nuestToolsTooOld\n\n\n121\nslesGuest\nguestToolsTooOld\n20569355609";
str= str.replaceAll("\\s", ",").replaceAll(",,,", "\n");
System.out.println(str); 
```

输出 ：

```
104,inNetStandardGuest,windowsGuest,uestToolsTooOld
121,slesGuest,guestToolsTooOld,20569355609 
```

# ruby-on-rails - 在 gem 中使用指南针进行 Rails 应用程序

> ID：11880506
> 
> 赞同：1
> 
> 时间：2012-08-09T09:36:04.853
> 
> 标签：ruby-on-rails, gem, external, compass-sass

我正在尝试创建一个代表 JS 和 CSS 库的 gem，并且可以包含在 rails 项目中（目前使用 3.2）。所有样式表都是用 SASS 编写的，并且依赖于**compass**库。

我尝试添加`compass-rails`到“外部”gem 的 Gemfile 并将其包含在 gems SASS 文件中

```
@import "compass" 
```

但是，回到 rails 应用程序（它依赖于这个 gem），这会导致错误消息：

```
File to import not found or unreadable: compass. 
```

难道我做错了什么？

**更新：**`gem compass-rails`如果我添加到`Gemfile`rails 应用程序，它似乎可以工作。有什么改变可以解决这个问题吗？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:48:21.993

除了将 compass-rails 添加到 gem 的 Gemfile 之外，您还需要在`require 'compass-rails'`某个地方将它添加到`lib/your_gem_name.rb`对我有用的 gem 中。

# javascript - 调用keypress事件而不实际在javascript中按下键

> ID：11880508
> 
> 赞同：-1
> 
> 时间：2012-08-09T09:36:08.347
> 
> 标签：javascript, asp.net

嗨，我想在 javascript 中触发空格键而不在文本框中按空格键，我尝试了这段代码，请帮我解决这个问题

```
 <script language="javascript" type="text/javascript">
        jQuery(document).ready(function () {
            var getOldValue = jQuery("#<%=txtCompany.ClientID%>");
                var e = jQuery.Event("keydown");
                e.which = 32; //key code
                jQuery("#<%=txtCompany.ClientID%>").trigger(e);

        });
    </script> 
```

和 aspx 页面是

```
 <asp:TextBox ID="txtCompany"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:56:14.943

您正在客户端脚本上使用服务器端标记。这行不通。相反，ASP 将创建一个 id 等于 txtCompany 的 HTML 输入框。所以让我们使用它。

```
jQuery(document).ready(function () {
    var inputBox = jQuery("#txtCompany"), 
        getOldValue = inputBox.val(),
        e = jQuery.Event("keydown");
    e.which = 32; //key code
    inputBox.trigger(e);
}); 
```

我没有像您使用 jQuery.Event() 那样触发事件，但如果这是有效代码，那么这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:23:52.710

你可以使用[initKeyEvent](https://developer.mozilla.org/en-US/docs/DOM/event.initKeyEvent)和 jquery

```
var e = jQuery.Event("keydown");
e.which = 50; //key code
$("#some_element").trigger(e); 
```

在 vanilla javascript 中，它是这样工作的：

```
// Create the event
var evt = document.createEvent( 'KeyboardEvent' );

// Init the options
event.initKeyEvent(
         "keypress",        //  the kind of event
          true,             //  boolean "can it bubble?"
          true,             //  boolean "can it be cancelled?"
          null,             //  specifies the view context (usually window or null)
          false,            //  boolean "Ctrl key?"
          false,            //  boolean "Alt key?"
          false,            //  Boolean "Shift key?"
          false,            //  Boolean "Meta key?"
           9,               //  the keyCode
           0);              //  the charCode

// Dispatch the event on the element
el.dispatchEvent( evt ); 
```

# installation - 使用安装包附加和配置ms sql server数据库

> ID：11880509
> 
> 赞同：0
> 
> 时间：2012-08-09T09:36:09.410
> 
> 标签：installation, wix, windows-installer, installshield

我有一些 Db 步骤（附加数据库、添加和配置新登录名、配置角色），我想使用安装包自动化它。现在在项目中，我们正在使用标准的 Visual Studio 安装程序。我可以使用标准的视觉工作室安装程序（自定义操作或其他东西）来实现数据库步骤吗？或者也许我应该使用其他一些安装程序，比如 Install shield、Wix？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:14:08.310

据我所知，Visual Studio 安装项目不提供开箱即用的此功能（尽管我的经验很少）。此外，在自定义操作中从头开始实现这一切也不是一个好主意 - 这确实是最后的手段。

其他供应商，至少您提到的那些供应商，确实提供了这个。如果您决定转向其中之一，请记住学习曲线，这将花费您一些时间（因为 WiX 可能更多）。但是，如果 VS 设置项目非常小且简单，考虑到[VS 设置项目类型已被 Microsoft 弃用](http://blogs.msmvps.com/installsite/blog/2012/04/05/visual-studio-installer-projects-no-longer-supported-in-visual-studio-11-replaced-by-installshield-le/)这一事实，此时移动可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T16:43:13.260

对于数据库配置，您可以创建 SQL 脚本，该脚本可以与应用程序一起安装或安装到临时目录中，并将其提供给 mssql 中使用 sql 脚本的任何内容（在 oracle 中它的 sqlplus）。不确定Visual Studio，但这就是我在一个InstallShield项目中看到的。

# wordpress - 使 wordpress 内容看起来更好

> ID：11880510
> 
> 赞同：0
> 
> 时间：2012-08-09T09:36:11.780
> 
> 标签：wordpress, wordpress-theming

我有一个正在开发的 wordpress 网站，它显示了很多以表格排列的数据。这样做的问题是它们看起来不太好，如果某些天的数据没有像其他天那么远，那么我有空单元格，而只是您在网站上使用表格的一般问题。

我希望能够使设计看起来更好一些，也许可以摆脱使用表格设计的限制，但我不知道从哪里看或从哪里开始？

我正在考虑为正文内容制作自己的 CSS，但我需要在编辑器中将其作为默认设置，并使其他人可以将值添加到新设计中。这可以做到吗？也许我可以得到某种插件？

谢谢您的帮助。

这是目前情况的一个很好的例子，我想让它看起来更好一点，看起来也更时尚一点。

[http://www.tradeitsafe.com/?page_id=64](http://www.tradeitsafe.com/?page_id=64)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:00:21.767

您可以学习一些 css [http://www.w3schools.com/css/](http://www.w3schools.com/css/)围绕一些虚拟内容创建 css。然后根据您构建站点的方式，您可以为该类型的页面、post、post_type 创建一个模板（例如，对于页面，它可能是 page-id.php 或 page-tables.php 并将其放入您的主题中模板。您需要先将主题中 page.php 文件中的代码复制到该新模板文件中，然后更改代码，以包含您新设计的 css 并使用 wordpress 函数 codex 插入内容，例如：

```
 <div class="wrapper">
        <div class="date"><?php the_date ?></div>
        <div class="content"><?php the_content ?></div>
        <div class="total"><?php field('the_total')?> </div>
</div> 
```

希望有帮助。

# linux - ping 脚本和日志输出并用 grep 剪切

> ID：11880511
> 
> 赞同：2
> 
> 时间：2012-08-09T09:36:19.207
> 
> 标签：linux, bash, shell, unix

我想 ping 一堆位置，但不是同时，这样它们就不会超时。

输入例如：`ping google.com -n 10 | grep Minimum >> output.txt`

这将使输出：`Minimum = 29ms, Maximum = 46ms, Average = 33ms`

但是它前面有额外的空格，我不知道如何切断，当它输出到 txt 文件时，它不会换行。我想要做的是制作它，这样我就可以复制和粘贴输入并在之前完成后 ping 一堆地方，并将其记录在 .txt 文件中并对它们进行编号，使其看起来像：

```
Server 1: Minimum = 29ms, Maximum = 46ms, Average = 33ms
Server 2: Minimum = 29ms, Maximum = 46ms, Average = 33ms
Server 3: Minimum = 29ms, Maximum = 46ms, Average = 33ms
Server 4: Minimum = 29ms, Maximum = 46ms, Average = 33ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:46:17.293

好吧，首先，`ping`在 linux 上限制发送的数据包数`-c`，而不是`-n`. 其次，输出`ping`不是`Minimum = xx ms, Maximum = yy ms, Avrage = zz ms`，而是`rtt min/avg/max/mdev = 5.953/5.970/5.987/0.017 ms`

因此，基本上，如果您按照以下方式进行操作：

```
for server in google.com yahoo.com
do
  rtt=`ping $server -c 2 | grep rtt`
  echo "$server: $rtt" >> output.txt
done 
```

你应该实现你想要的。

[编辑]

如果 cygwin 是您的平台，那么去除空格的最简单方法是人们建议的`sed`，或者只是`| awk '{print $1}'`，也将修剪您的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:46:17.627

我认为您可以使用`sed`两次和`while`最后一个循环来解决此问题：

```
N=1; ping google.com -n 10 | grep Minimum | sed -r 's/(Average = [[:digit:]]+ms)/\1\n/g' | sed -r s'/[[:space:]]+(Minimum)/\1/g' | while read file; do echo Server "$N": "$file"; N=$((N+1)); done >> output.txt 
```

步骤：

*   第一个`sed`修复换行问题：
    *   匹配字符串的最后一部分，在该部分之后需要一个新行，在这种情况下`Average = [[:digit:]]+ms`，使用括号将其放入一个组中
    *   然后将其替换为相同的组 ( `\1`) 并在其后插入换行符 ( `\n`)
*   第二个`sed`删除空格，通过匹配单词`Minimum`和它前面的所有空格，之后它只返回单词`Minimum`
*   最后的`while`语句循环遍历每一行并添加`Server "$N":`到 ping 结果的前面。在开始时`$N`被初始化为`1`，并`1`在每个读取行之后增加

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:57:47.043

您可以使用 sed 删除前 4 个空格：

```
ping google.com -n 10 | grep Minimum | sed s/^\ \ \ \ // 
```

# regex - 如何在记事本++中获取日期格式

> ID：11880516
> 
> 赞同：1
> 
> 时间：2012-08-09T09:36:39.283
> 
> 标签：regex, replace, find, notepad++

您好我有一个包含几千行的文件要添加到 MySQL 数据库中。行中有日期值采用 dd/mm/yyyy、d/mm/yy 格式，但我需要它们采用 yyyy-mm-dd 格式。

eg: '11/04/2011', 需要变成'2011-04-11', 在每一行 7/04/2011', 需要变成'2011-04-07', 在每一行

有没有一种简单的方法可以在记事本++中使用查找和替换来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T09:44:55.173

你可以用记事本++做到这一点：

寻找：`([0-9]+)/+([0-9]+)/+([0-9]+)`

代替：`\3-\2-\1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:03:45.483

为避免表达混乱，您应该分两遍执行此操作。首先，您想用两位数的日期查找/替换日期：

```
Find: ([0-9]{2})/([0-9]{2})/([0-9]{4})
Replace: \3-\2-\1 
```

然后你想对一位数的一天做同样的事情：

```
Find: ([0-9]{1})/([0-9]{2})/([0-9]{4})
Replace: \3-\2-0\1 
```

**请注意，每个示例中的查找和替换值都不同（一个使用前导 0，一个不用于替换）。如果你先运行第二遍，你最终会得到很多误报。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-02T20:41:38.667

寻找 ：`(\d*)/(\d*)/(\d\d\d\d)`

代替 ：`($3)-($1)-($2)`

# java - 只设置一些参数时，如何在 JDBC 中调用存储过程

> ID：11880517
> 
> 赞同：4
> 
> 时间：2012-08-09T09:36:39.837
> 
> 标签：java, stored-procedures, jdbc, sybase, callable-statement

如果您只想设置一些参数，那么使用 JDBC 调用存储过程的最佳方法是什么？

如果我只是使用 SQL，我可以在 SQL 中按名称设置参数以调用存储过程。例如，如果我有一个包含九个参数的存储过程，并且我想设置参数 1,2 和 9，将其余参数保留为默认值，我可以运行以下 SQL：

```
exec my_stored_procedure
    @parameter_1       = "ONE",
    @parameter_2       = "TWO",
    @parameter_9       = "NINE" 
```

使用 JDBC（特别是 jConnect 6.0），似乎在使用 CallableStatement 时，您必须通过它们的整数索引而不是它们的名称来设置参数。如果我尝试为上述存储过程创建一个 CallableStatement，带有 9 个参数，并且只设置参数 1,2 和 9，如下所示：

```
myStoredProcedureCall = 
  sybConn.prepareCall("{call my_stored_procedure (?, ?, ?, ?, ?, ? , ?, ?, ?)}");
myStoredProcedureCall.setString(1, "ONE");
myStoredProcedureCall.setString(2, "TWO");
myStoredProcedureCall.setString(9, "NINE");
ResultSet paramResults = myStoredProcedureCall.executeQuery(); 
```

然后我得到这个 SQLException 抛出：

```
*** SQLException caught ***
SQLState: JZ0SA
Message:  JZ0SA: Prepared Statement: Input parameter not set, index: 2.
Vendor:   0 
```

对于我正在尝试做的一些背景知识，我需要创建一个从 IBM MQ 流接收有关产品的信息的流程，然后在第三个应用程序中创建一个产品。第 3 方应用程序使用 Sybase 来存储它的数据，并创建一个产品，我需要调用一个具有大约 130 个参数的存储过程。对于我需要创建的产品类型，这些参数只需要设置大约 15 个，其余的将保留为默认值。

我考虑过的选项是：

*   创建一个只设置我需要的值的自定义存储过程，然后调用第 3 方产品存储过程。
*   为 Java 中的所有参数设置默认值。

当然必须有一个更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:20:59.637

JDBC 不支持此功能。您必须创建一个 SQL 字符串并执行它：

```
String sql = "exec my_stored_procedure\n@parameter_1 = ?,\n@parameter_2 = ?,\n@parameter_9 = ?";

PreparedStatement stmt = ...
stmt.setString( 1, "ONE" );
stmt.setString( 2, "TWO" );
stmt.setString( 3, "NINE" );
stmt.execute(); 
```

请记住：JDBC 不会尝试理解您发送到数据库的 SQL，除了一些特殊字符，如`{}`和`?`。我曾经写过一个 JDBC“数据库”，它接受 JavaScript 片段作为“SQL”：我简单地实现了`DataSource`，`Connection`并且`ResultSet`我可以使用 JDBC 接口查询我的应用程序的内存模型，但使用 JavaScript 作为查询语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:41:09.507

您可以尝试在字符串中硬编码 null 或空白

`"{call my_stored_procedure (?, ?, null, null, null, null , null, null, ?)}"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:01:09.347

```
myStoredProcedureCall.setString(9, "NINE");

in above code index no 9 but it will be 3 because your parameter sequence start from 1 ;
Alhrough  you can another sql exception.

I think you should use 

myStoredProcedureCall = 
  sybConn.prepareCall("{call my_stored_procedure (?, ?, null, null, null, null , null, null, ?)}");
myStoredProcedureCall.setString(1, "ONE");
myStoredProcedureCall.setString(2, "TWO");
myStoredProcedureCall.setString(3, "NINE");
ResultSet paramResults = myStoredProcedureCall.executeQuery(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T10:26:24.320

//abobjects.com 下面对我有用 def getIDGEN( sTableName ):
proc = db.prepareCall("{ ? = call DB.dbo.usp_IDGEN_string_v6(?, ?) }");

```
proc.registerOutParameter(3, types.INTEGER)
proc.setString(2, sTableName)
proc.setInt(3, 0)   
proc.execute()
li_RI_ID = proc.getInt(3)
print str(li_RI_ID) + " obtained from usp_IDGEN_string_v6"
return li_RI_ID 
```

我的存储过程是

```
create proc usp_IDGEN_string_v6 (@tablename  varchar(32) , @ID  numeric )
as
declare @seq     numeric
declare @nextID  numeric
select @nextID=IDGEN_ID from DB_IDGEN where IDGEN_TableName = @tablename
select @seq=@nextID + 1 from DB_IDGEN where IDGEN_Table
 Name = @tablename
update DB_IDGEN set IDGEN_ID = @seq where IDGEN_TableName = @tablename
select @ID  = @seq
return @ID 
```

# android - 滚动时 ListView 太慢

> ID：11880520
> 
> 赞同：0
> 
> 时间：2012-08-09T09:36:47.037
> 
> 标签：android, listview, android-asynctask

这似乎是一个常见问题，但我无法实施我找到的任何解决方案。我有`Listview`一个自定义适配器，可以连续显示缩略图和文本字段。缩略图来自我之前创建的文件夹，并放置了我从应用程序中拍摄的图片。

这是我的列表活动：

```
private LayoutInflater mInflater;
private Vector<RowData> data;
private CustomAdapter adapter;
private RowData rd;

static File path = Environment.getExternalStorageDirectory();
static File fnames = new File(path, "MyImages");

static String[] title = fnames.list();

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_blog);

    mInflater = (LayoutInflater) getSystemService(
    Activity.LAYOUT_INFLATER_SERVICE);
    setListName();
    data = new Vector<RowData>();
    for(int i=0;i<title.length;i++){
        try {
            rd = new RowData(i,title[i]);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        data.add(rd);
    }

    getListView().setTextFilterEnabled(true);
    getListView().setScrollingCacheEnabled(false);
}

public void onRestart()
{
    super.onRestart();
    setListName();
}

private Vector<RowData> setListName()
{
    data = new Vector<RowData>();
    String[] title = fnames.list();

    //get the databases textblog
    DatabaseHandler db = new DatabaseHandler(this);
    List<TextBlog> textBlogs = db.getAllText();
    int positionRaw = textBlogs.size();

    for (int i=0;i<textBlogs.size(); i++) {
        rd = new RowData(i, textBlogs.get(i).getText());
        data.add(rd);
    }

    for(int i=0;i<title.length;i++) {
        try {
            rd = new RowData(positionRaw,title[i]);
            positionRaw++;
        } catch (ParseException e) {
            e.printStackTrace();
        }

        data.add(rd);
    }

    adapter = new CustomAdapter(this, R.layout.list,R.id.title, data);
    setListAdapter(adapter);
    getListView().setTextFilterEnabled(true);
    adapter.notifyDataSetChanged();

    return data;
}

//Create thumbnail from file picture
private Bitmap decodeFile(File f) {
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while (o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {

    }

    return null;
}

//Set row object
private class RowData 
{
    protected int mId;
    protected String mTitle;
    RowData(int id,String title){
    mId=id;
    mTitle = title;
}

@Override
public String toString() {
    return mId+" "+mTitle+" ";
} 
```

这是我的自定义适配器：

```
public class CustomAdapter extends ArrayAdapter<RowData>
{
    public CustomAdapter(Context context, int resource, int textViewResourceId, 
                                        List<RowData> objects) 
    {               
        super(context, resource, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {   
        ViewHolder holder = null;
        TextView title = null;
        ImageView thumb=null;
        RowData rowData= getItem(position);

        if(null == convertView) {
            convertView = mInflater.inflate(R.layout.list, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        }

        holder = (ViewHolder) convertView.getTag();
        title = holder.gettitle();
        title.setText(rowData.mTitle);

        thumb=holder.getImage();
        File file = new File(path + "/MyImages/" + rowData.mTitle);

        //Check what kind of file is it to add thumbnail
        //Way too slow use asynchronous task

        if (rowData.mTitle.substring(rowData.mTitle.lastIndexOf('.') + 1).equalsIgnoreCase("mp4") == true)
        {    
            Bitmap thumbVideo = ThumbnailUtils.createVideoThumbnail(file.getAbsolutePath(), MediaStore.Video.Thumbnails.MICRO_KIND);
            thumb.setImageBitmap(thumbVideo);
        }
        else if (rowData.mTitle.substring(rowData.mTitle.lastIndexOf('.') + 1).equalsIgnoreCase("3gpp") == true)
        {
            thumb.setImageDrawable(getResources().getDrawable(R.drawable.voice));
        }
        else
        {
            thumb.setImageBitmap(decodeFile(file));
        }

        return convertView;
    }

    private class ViewHolder {
        private View mRow;
        private TextView title = null;
        private ImageView thumb=null; 

        public ViewHolder(View row) {
            mRow = row;
        }

        public TextView gettitle() {
            if(null == title) {
                title = (TextView) mRow.findViewById(R.id.title);
            }
                return title;
        }     

        public ImageView getImage() {
            if (null == thumb) {
                thumb = (ImageView) mRow.findViewById(R.id.img);
                                      }
                return thumb;
            }
        }
    }
} 
```

我很确定这是因为缩略图的创建，我必须在 a 中实现它`AsynchTask`，但我尝试过但没有成功。

谁能建议我哪里出错了，或者在列表中给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:10:13.963

您正在尝试在这里实现 ViewHolder 模式，但您的实现看起来是错误的。

这种模式的想法是减少`findViewById()`对您的性能有影响的调用。只有当该行为 null (convertView) 时，您才应该调用`findViewById()`，否则重用与保存的上一个视图`setTag()`

让我们看一下您的代码：

```
if(null == convertView){
    convertView = mInflater.inflate(R.layout.list, null);
    holder = new ViewHolder();
    convertView.setTag(holder);
}

// .......          
title = holder.gettitle();
// .........
thumb=holder.getImage(); 
```

注意`holder.getTitle()`, 和在语句`holder.getImage()`之后被调用。这意味着无论是否为空，`if`每次都会调用它们。 现在，看看这些 getter，我们看到它们包含调用的代码`convertView`
`findViewById();`

前任。为了`getTitle()`

```
public TextView gettitle() {
     if(null == title){
          title = (TextView) mRow.findViewById(R.id.title);
     }
     return title;
} 
```

所以，基本上，你在这里不使用 ViewHolder 模式，只是一些混合代码，最后`findViewById()`每次都会调用，这会降低性能`ListView.`

要正确执行此操作，您应该`findViewById()`仅在`convertView`为空时调用。前任：

```
if(null==convertView){
    convertView = mInflater.inflate(R.layout.list, null);
    holder = new ViewHolder();

    // Getting a refernce to the views with findViewById()
    title = holder.gettitle();
    thumb=holder.getImage();

    convertView.setTag(holder);
}else{
     holder = (ViewHolder) convertView.getTag();
}

// Then you set the appropriate values to your views through the holder:
holder.title.setText("");
holder.thumb.setImageBitmap(...); 
```

这是实现`ViewHolder`模式的正确方法

（PS：您需要将标题、拇指、...的访问修饰符更改为公开。）

# iphone - 在没有标题且仅使用 UIButton 的 mkmapview 中显示标注

> ID：11880525
> 
> 赞同：1
> 
> 时间：2012-08-09T09:36:51.513
> 
> 标签：iphone, objective-c, mkmapview, mkannotation

我有自定义`MKAnnotation`实现协议`title()`方法的地方`MKAnnotation`。我的要求是只有带有按钮且没有标题的标注。但问题是，只有当我实现 title() 方法时，我才能获得带有标题和按钮的标注。如果返回的字符串为零，我看不到标注气泡。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T17:13:37.203

好吧，它有点骇人听闻，但它确实有效。将标题设置为@“”（空白）只是为了使标注弹出，然后你可以用视图包装你的按钮，并将按钮添加为带有 origin.x 中心的子视图......

```
MKPinAnnotationView* view = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Null"];
view.canShowCallout = YES;
view.clipsToBounds = NO;

UIView * v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
v.clipsToBounds = NO;
v.autoresizingMask = UIViewAutoresizingFlexibleWidth;

UITextField* field = [[UITextField alloc] initWithFrame:CGRectMake(-42, 0, 100, 30)];
field.textAlignment = NSTextAlignmentCenter;
field.clipsToBounds = NO;
field.autoresizingMask = UIViewAutoresizingFlexibleWidth;
field.delegate = self;
[v addSubview:field];

view.rightCalloutAccessoryView = v; 
```

此示例与 UITextField 一起使用，但它也适用于您的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:46:29.913

利用 ：`[YourAnotationView setCanShowCallout:NO];`

# c# - 单元测试两位数失败

> ID：11880529
> 
> 赞同：1
> 
> 时间：2012-08-09T09:37:01.153
> 
> 标签：c#, unit-testing, testing, tdd, nunit

我正在测试方差方法（单位），但出现双重问题。

```
 public double Variance()
    {
        return Probablity * (1 - Probablity);
    }

    [Test]
    public void Variance_WithSuccessProbablity02_Returns016()
    {
        var bernoulli = new BernoulliDistribution(0.2);

        Assert.AreEqual(bernoulli.Variance(), 0.16);
    } 
```

这个测试结果是返回失败。 **失败：预期：0.160000000000003d 但为 0.16d**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:48:17.400

在 NUnit 中，您可以使用显式容差比较浮点值：

```
Assert.AreEqual( double expected, double actual, double tolerance ); 
```

或者您可以全局设置`GlobalSettings.DefaultFloatingPointTolerance`为非零值（默认为 0.0）。

[这里](http://nunit.com/index.php?p=equalityAsserts&r=2.6.1)有更多关于浮点比较的信息。

在你的具体情况下，我建议你试试这个：

```
Assert.AreEqual(bernoulli.Variance(), 0.16, 1.0e-9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:38:58.977

使用浮点数或双精度数时经常会出现此类精度问题。

您需要从您的差异中考虑一个小的“差异”（请原谅双关语）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:48:29.740

```
Assert.IsTrue(Math.Abs(bernoulli.Variance() - 0.16d) < 0.00001d); 
```

# java - Android录制内部设备声音

> ID：11880532
> 
> 赞同：2
> 
> 时间：2012-08-09T09:37:08.690
> 
> 标签：java, android, audio, record, mediarecorder

我在 Android 设备上编程还是新手。我目前正在制作一个允许你打鼓的应用程序。

我想录制用户播放的声音。

我正在使用这种方式来录制声音：

```
recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(audiofile.getAbsolutePath());
        recorder.prepare();
        recorder.start(); 
```

在阅读了文档并在 SO 和其他网站上进行搜索后，我对我的审讯一无所获。实际上，我可以录制声音并将其存储在内存中，但它使用设备的外部麦克风（因此存在干扰，插入耳机时，我什么也听不到）。

有没有办法记录设备的内部声音？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:13:48.087

如果您的样本是 PCM，您可以在将混合样本写入 AudioTrack 的同时将它们简单地写入文件。

如果它们被压缩（aac、mp3、...），您可能需要在您的应用程序中对它们进行解码，然后执行我在第一段中描述的相同操作。

目前没有办法从输出设备录制，除了您已经尝试过的方法。

# jquery - 如何在自定义验证器中使用 QUnit 测试标签？

> ID：11880533
> 
> 赞同：0
> 
> 时间：2012-08-09T09:37:10.430
> 
> 标签：jquery, unit-testing, validation, qunit

您可以将常规RequiredValidator 用于文本框，但不能用于标签，因此我添加了自定义验证器并使用JQuery 函数对其进行验证。一切正常，但我希望能够对其进行单元测试。

为了测试这个功能，我需要做些什么改变：

```
function LabelRequired_Validate(sender, args) {
    if (sender == $("#ctl00_cphMain_Agent2_Agent_Agent_LabelValidator1")[0]) {
        if ($("#ctl00_cphMain_Agent2_Agent_Agent_ValueLabel")[0].innerText.length > 0) {
            args.IsValid = true;
        } else {
            args.IsValid = false;
        }
    } else {
        args.IsValid = true;
    }
} 
```

使用此 QUnit 测试（或类似测试）：

```
test("Servicing_Topup_Branch_label_is_valid", function() {
    var span = $("span[id$=ValueLabel]");
    $(span).text(10 + " characters long");

    var args = { IsValid: true, Value: "" };
    LabelRequired_Validate($(span), args)

    ok(args.IsValid == true, "Validation Passed!");
}); 
```

这是我的自定义验证器：

```
<asp:CustomValidator ID="LabelValidator1" runat="server" ErrorMessage="<%$Resources:Main,RequiredFieldWarning %>"
        Display="Dynamic" ClientValidationFunction="LabelRequired_Validate" EnableViewState="False"
        class="alertMsg">
    </asp:CustomValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:35:15.260

对目标和测试功能进行了一些更改。这是它的工作原理。

到目标：

```
function LabelRequired_Validate(sender, args) {
    if (sender == $("span[id$=LabelValidator1]")[0]) {
        if ($("span[id$=ValueLabel]")[0].innerText.length > 0) {
            args.IsValid = true;
        } else {
            args.IsValid = false;
        }
    } else {
        args.IsValid = true;
    }
} 
```

并进行测试：

```
test("Servicing_Topup_Branch_label_required_is_valid", function() {
    expect(2);

    var span1 = $("span[id$=LabelValidator1]");
    var span2 = $("span[id$=ValueLabel]");

    $(span2).text(18 + " characters long");
    var args = { IsValid: true, Value: "" };
    LabelRequired_Validate(span1[0], args)

    ok(args.IsValid == true, "Not empty label returns Valid - Passed!");

    $(span2).text("");
    args = { IsValid: true, Value: "" };
    LabelRequired_Validate(span1[0], args)

    ok(args.IsValid == false, "Empty label returns NotValid - Passed!");

}); 
```

# java - 通过指定索引从 ArrayList 中检索元素

> ID：11880534
> 
> 赞同：8
> 
> 时间：2012-08-09T09:37:12.160
> 
> 标签：java, arraylist, indexing

Java中是否有一种方法可以通过指定开始和结束索引来获取从一个Arraylist到另一个ArrayList的对象列表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T09:38:01.970

是的，您可以使用以下[`subList`方法](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)：

```
List<...> list2 = list1.subList(startIndex, endIndex); 
```

这将返回原始列表那部分的视图，它不会复制数据。
如果你想要一个副本：

```
List<...> list2 = new ArrayList<...> (list1.subList(startIndex, endIndex)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:51:54.433

```
/create an ArrayList object
    ArrayList arrayList = new ArrayList();

    //Add elements to Arraylist
    arrayList.add("1");
    arrayList.add("2");
    arrayList.add("3");
    arrayList.add("4");
    arrayList.add("5");

    /*
       To get a sub list of Java ArrayList use
       List subList(int startIndex, int endIndex) method.
       This method returns an object of type List containing elements from
       startIndex to endIndex - 1.
    */

    List lst = arrayList.subList(1,3);

    //display elements of sub list.
    System.out.println("Sub list contains : ");
    for(int i=0; i< lst.size() ; i++)
      System.out.println(lst.get(i)); 
```

# c++ - 从析构函数中停止线程的正确方法

> ID：11880538
> 
> 赞同：1
> 
> 时间：2012-08-09T09:37:26.507
> 
> 标签：c++, destructor

我有一个类，它有一个方法来启动一个线程，该线程以预定义的时间间隔`Start`执行虚拟。`ThreadFunction`该`Stop`方法设置一个事件并等待线程终止（通过`WaitForSingleObject`线程句柄上的 a ）。

在 的析构函数中`MyThread`，我调用了该`Stop`方法。因此，每当我删除实例时，我确信线程在删除返回之前已停止。

```
class MyThread
{
    void Start();
    void Stop();
    ~MyThread() { Stop(); }
    virtual VOID ThreadFunction() { }
}; 
```

接下来我有一个派生自的类`MyThread`：

```
class A : MyThread
{
    virtual VOID ThreadFunction()
    {
        for (int i = 0; i < 1000; i++)
            TestFunction();
    }

    void TestFunction() { // Do something }
}; 
```

考虑这段代码：

```
A a = new A();
a->Start();
delete a; 
```

问题是在调用析构函数之前`delete a`会先调用析构函数吗？因此，如果线程正在执行中的，则该方法将在被破坏后被调用。当调用已破坏的实例时，这可能会导致访问冲突。`A``MyThread``for-loop``ThreadFunction``Stop``a``ThreadFunction``TestFunction`

一种解决方案是向`class A`调用该`Stop`方法的析构函数添加一个析构函数，如下所示：

```
class A : MyThread
{
    ~A()
   {
       Stop();
   }
} 
```

但是因为我有一个更复杂的类层次结构，它涉及多个继承的类，这意味着我必须`Stop`在每个析构函数中调用该方法，这将导致 Stop 方法被调用很多次，而只有一个需要删除的实例.

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:41:00.960

MyThread 中的析构函数应定义为“虚拟”。

```
class A{
public:
    A(){cout<<"A"<<endl;}
    virtual ~A(){cout<<"~A"<<endl;}
};

class B : public A{ 
public:
    B(){cout<<"B"<<endl;}
    ~B(){cout<<"~B"<<endl;}
};

int main(){
    A* b = new B();
    cout<<"do something"<<endl;
    delete b;
    b = NULL;
    return 0;
} 
```

结果是：A B做某事~B~A

而当它不使用virtual时，结果是：A B做某事~A

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T14:38:44.263

正如 Rolle 和 R. Martinho Fernandes 所建议的，我需要将这两个问题分开。

`class MyThread`不应启动或停止自身，因为它的责任应仅限于它执行的代码，而不是线程的生命周期。

所以解决方案是从另一个负责线程生命周期的类（启动线程的同一类）中停止线程。

# qt - 用于桌面应用程序的 QML Symbian 组件

> ID：11880542
> 
> 赞同：1
> 
> 时间：2012-08-09T09:37:36.343
> 
> 标签：qt, qml, qt-quick

是否也可以使用 QML symbian 组件进行桌面应用程序开发？我目前正在使用 Windows+Visual Studio Compiler + Qt 4.8.1 开发我的应用程序。但是我不能导入合理的 Symbian 组件。如果可以使用它们，我该如何获取和安装它们？提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T06:25:00.127

是的，如果你愿意，你可以。它们在 Symbian Emulator 中运行良好，这是一个常见的 Windows 应用程序。此外，您可以从源代码构建它们并仅使用您需要的那些 UI 组件。[在这里](http://goo.gl/u2TCy)，我发布了一个示例项目，展示了这个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:50:15.170

我认为您不能将它们用于桌面应用程序。但是，存在一些用于桌面的 Qt Quick 组件：http: [//labs.qt.nokia.com/2011/03/10/qml-components-for-desktop/](http://labs.qt.nokia.com/2011/03/10/qml-components-for-desktop/)

# google-drive-api - google Drive API 交换授权码有时会抛出 500

> ID：11880549
> 
> 赞同：2
> 
> 时间：2012-08-09T09:38:05.917
> 
> 标签：google-drive-api

使用此代码将来自 Drive UI 的请求的初始代码与我可以用来发出 API 请求的令牌交换。

```
public GoogleCredential exchangeCode(String authorizationCode) throws CodeExchangeException {
        try {
            GoogleTokenResponse response = new GoogleAuthorizationCodeTokenRequest(new NetHttpTransport(), new JacksonFactory(), CLIENT_ID, CLIENT_SECRET, authorizationCode, REDIRECT_URI).execute();
            return new GoogleCredential.Builder().setClientSecrets(CLIENT_ID, CLIENT_SECRET).setTransport(new NetHttpTransport()).setJsonFactory(new JacksonFactory()).build().setFromTokenResponse(response);
        }
        catch (Exception e) {
            log.error("An error occurred: " + e);
            throw new CodeExchangeException(null);
        }
    } 
```

在大多数情况下它有效，但在某些情况下（可能是 5%），我得到

```
An error occurred: com.google.api.client.auth.oauth2.TokenResponseException: 500 Error processing OAuth 2 request
<HTML>
<HEAD>
<TITLE>Error processing OAuth 2 request</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Error processing OAuth 2 request</H1>
<H2>Error 500</H2>
</BODY>
</HTML> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:13:58.460

我得到大约 500 个内部服务器错误。我的 API 调用的 0.5%。我有一个重试机制，似乎总是在第二次尝试时成功。

```
 function doSomething(req) {
.
.
.
.
         restRequest.execute(function(resp) {
    var myResp = new Object();

    try {
        if (resp.error) {
            if (resp.error.code == "401") {
                do401(function() {
                    doSomething(req);
                }, req, myResp);
                return;
            }
            if (resp.error.code == "403") {
                cl("403 no auth " + resp.error.message);
                return;
            }
            if (resp.error.code == "500") {
                cl("server error 500, retrying " + resp.error.message);
                exponentialBackoff();
                                    doSomething(req);
                return;
            }
        }
    } catch (ex) {
        cl("[fg62] exception " + ex);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:40:06.363

这是由于在授权过程（OAuth 2.0 服务器端流程的身份验证代码交换）期间我们的 2 台内部服务器之间的超时造成的。我们在使用 OAuth 2.0 Playground 时遇到了同样的问题。Google 的身份验证团队现在应该已经解决了这个问题。如果您再次遇到此问题，请告诉我们。

重试机制通常可以很好地解决您从 Drive API 获得的暂时性 503 错误。但在那种情况下（来自 Auth 服务器的 500 个错误）它没有帮助，因为对于相同服务器配置中的相同用户（即位于遥远地理区域的用户和服务器），相同的调用每次都会超时。

# html - 表动态中心

> ID：11880553
> 
> 赞同：0
> 
> 时间：2012-08-09T09:38:25.383
> 
> 标签：html, css

我有一张有 3 个单元格的表格。第一个总是 50px。中间的可以改变，右边的也可以。但是，正确的应该具有更高的优先级。这是怎么做到的？

在这里它按预期工作：http: [//jsfiddle.net/NyQDb/](http://jsfiddle.net/NyQDb/)

在这里它挤压了正确的一个：http: [//jsfiddle.net/NyQDb/1/](http://jsfiddle.net/NyQDb/1/)

右边可以是任意数字，所以固定宽度是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:44:01.790

添加`white-space:nowrap;`到最右边单元格的样式。

[http://jsfiddle.net/NyQDb/2/](http://jsfiddle.net/NyQDb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:43:37.800

所以你希望右边的比中间的大吗？然后我将它的宽度设置为一定的百分比。例如，50%。但这个值主要取决于你的目标屏幕分辨率。

顺便说一句：单元格宽度也可以使用 CSS 设置（`width`属性）。

# typo3 - TYPO3 + dmailsubscription：在编辑个人资料的电子邮件后收到确认消息

> ID：11880554
> 
> 赞同：0
> 
> 时间：2012-08-09T09:38:35.717
> 
> 标签：typo3, subscription, newsletter

我使用 dmailsubscription 将用户注册到时事通讯。有一个选项，一旦已经注册并确认，您可以收到一封电子邮件，其中包含编辑您的个人资料的链接。

问题是，一旦您输入电子邮件地址，页面就会重新加载，并且插件根本不会显示任何消息。我想获得某种确认文本，例如：

“带有编辑个人资料链接的电子邮件已发送至 xxx@xxx.com”

或者至少：

“带有编辑个人资料链接的电子邮件已发送到您的电子邮件地址”

，但我不知道如何。

这是我的模板： http: [//pastebin.com/K5WVSgrY](http://pastebin.com/K5WVSgrY)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:34:25.917

**多于**

```
<!-- ###TEMPLATE_DELETE_SAVED### begin 
```

但是**之后**

```
###TEMPLATE_INFOMAIL### end--> 
```

尝试添加这个：

```
<BR><BR><BR><BR>
<HR>
<BR><BR><BR><EM>This template is the response page when a users has requested 
his password send to his email.</EM> <BR><BR><!-- ###TEMPLATE_INFOMAIL_SENT### begin
    This template is the response page when a users has requested his password send to his email.
-->###GW1B###We have emailed your your details. Edit your message here.###GW1E###<BR><BR>###GW2B### <A 
href="http://www.yourdomain.ext/###BACK_URL###"><STRONG>Go back</STRONG></A><BR>###GW2E### 
<!-- ###TEMPLATE_INFOMAIL_SENT### end--><BR><BR><BR><BR>
<HR> 
```

我在您的模板文件中找不到这部分。

# javascript - 页面重新加载有问题。ASP.NET

> ID：11880562
> 
> 赞同：0
> 
> 时间：2012-08-09T09:39:33.807
> 
> 标签：javascript, asp.net, reload

所以我拥有的是一个使用 c# 代码和 javascript 代码的 Web 应用程序。我的 javascript 代码会根据用户输入生成一些信息。完成后，它会使用 ASP 按钮保存。附加到 asp 按钮的是客户端单击和单击事件。Javascript 代码验证代码并确保已创建的字符串有效。如果不是，则将错误消息发送到隐藏标签。然后 C# 代码检查该标签，如果它为空（如果验证没有问题），它会执行 C# 代码。如果它内部有一个值，则来自隐藏标签的错误消息将使用 c# 代码传递给可见标签并显示给用户。

但是，如果显示错误消息，则页面会自动重新加载（因为它是按钮单击事件，这总是会发生）。并且用户输入从屏幕上清除。

显示错误消息时，有什么方法可以阻止页面重新加载？

**代码**

Javascript：

```
 if (goalnum > 0 && blocknum > 0 && playernum == 1 && goalnum == blocknum) {

        mapsave = JSON.stringify(map);
        document.getElementById('<%=mapsave.ClientID %>').value = mapsave;

    }
    else {
        document.getElementById('<%=lblError.ClientID %>').value = "Your map must have one and only one player, one or more blocks, one or more goals and the number of blocks must match up with the number of goals";
    } 
```

C＃

```
protected void btnSave_Click(object sender, EventArgs e)
    {
        if (mapsave.Value.ToString() == "")
        {
            lblResult.Text = lblError.Value;
        }
        else
        {
            AddNodeToXMLFile("filepath.xml", "TileMaps");
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:51:45.667

你`return false`点击按钮了吗？如果没有，即使验证失败，也会触发新的 Post。

你可以发布代码吗？

# c++ - 如何公开大量受保护的内部类函数？

> ID：11880570
> 
> 赞同：0
> 
> 时间：2012-08-09T09:40:14.603
> 
> 标签：c++, class

假设我有自己的构建类（由于长度，我不会引用示例）X，并且在受保护的部分中，有一个类 Y（来自我无法修改的外部库，并且不能使用从类继承作为成员定义被隐藏）。

Y 类有大约 40 个功能。其中 20 个我不希望用户能够访问或修改，因为这会导致功能损坏（当前由 X 类中的受保护状态阻止），但我希望用户能够访问其他 20 个功能，因此修改 Y 类（*几乎*就像他们可以直接访问减去所谓的“危险”功能）。

如果没有在 X 类中写出与 Y 类完全相同的 20 个函数，是否有任何更简单、更快捷的方法来授予用户对 20 个左右函数的访问权限（比如某种函数转发能力或其他东西）？

**扩展说明：**

这有点棘手，因为有一个库函数接受一个类 Y（但不接受一个类 X，人们抱怨我在类之间进行强制转换）。X 类应该为 Y 类的操作自动化和存储信息，**能够为函数返回一个（常量）类 Y**，并允许用户修改简单的东西（例如对象的位置），但不能修改自动化的东西（图像，图像循环）。

X 类是 Y 类的一种，在自动化函数中工作，但不允许 X 类返回 Y 类（不能引用自身，Y 类的修改版本，再次，人们会抱怨我在类之间进行转换）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:03:49.660

为什么不能从类继承`Y`？如果你可以使用它，你可以继承它。

您可以使用非公共继承（可能是私有继承）解决您的问题，然后`Y`通过`using`声明提升您想要的功能：

```
class Y
{
public:
  void FunctionIWantToExpose();
  void AnotherFunctionIWantToExpose();
  void FunctionIDontWantToExpose();
}

class X : private Y
{
public:
  using Y::FunctionIWantToExpose;
  using Y::AnotherFunctionIWantToExpose;
}

int main()
{
  X x;
  x.FunctionIWantToExpose(); // This is legal and calls Y::FunctionIWantToExpose()
  x.FunctionIDontWantToExpose(); // This will cause a compile error
  return 0;
} 
```

编辑：如果您想提供对内部`Y`对象的访问，您可以使用以下附加成员函数轻松完成`X`：

```
const Y& GetY() const
{
  return *this;
} 
```

这在类内部有效，`X`因为基类`Y`可以在那里访问。另一方面，`GetY()`只返回 a的版本是完全不可取的，因为类客户端可以使用它来使用您想要阻止的方法修改您的对象。`Y&``X``Y`

# java - 如何正确连接类（构造函数中的堆栈溢出）

> ID：11880577
> 
> 赞同：0
> 
> 时间：2012-08-09T09:40:46.407
> 
> 标签：java, class, constructor, instances

我对 Java 比较陌生，我正在为在线游戏 Minecraft 编写扩展/插件。

我最近开始了“更大”的项目，这些项目需要更多的课程来保持整洁。我仍在尝试完全理解构造函数的工作原理，但最近的尝试导致堆栈溢出（一个构造函数调用另一个构造函数，在循环中）。

例如，就我而言，我有两个类， `Main`并且`MySQL`.

主类初始化插件，MySQL 类联系数据库并将数据返回给任何调用它的类。

有问题的代码示例：

`Main.java`

```
class Main extends JavaPlugin {

    private final MySQL mysql = new MySQL();

    //Method which is called first 
    void onEnable(){

        //Just an example of initializing
        mysql.init();
        mysql.open();
    }
} 
```

`MySQL.java`

```
class MySQL {

    private final Main main = new Main();

    void init(){}
    void open(){}
} 
```

我知道问题是什么，我只是不知道正确的解决方案，这将适用于更多的课程。

另外，如果我有另一个类， main 将连接到 MySQL，另一个类将与之通信，我应该做一些类似于*main.mysql.method*的事情吗？

对于构造函数和实例（“new”关键字）如何工作的简化、易于理解的解释将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:53:26.027

首先，作为未来应用程序的指针，您可能想看看[Design Patterns](http://www.javaworld.com/columns/jw-java-design-patterns-index.html)，它们往往使设计更简洁，更易于维护。

在您的情况下，您创建了一个[Circular Reference](http://en.wikipedia.org/wiki/Circular_reference)。解决它的最简单方法是制作这样的东西：

```
class Main extends JavaPlugin {

    private final MySQL mysql;

    public Main(MySQL mysql)
    {
        this.mysql = mysql
    }

    //Class which is called first 
    void onEnable() {

        //Just an example of initializing
        mysql.init();
        mysql.open();
    }
}

class MySQL {

    private final Main main = new Main(this);

    void init(){}
    void open(){}
} 
```

这*应该可以*解决问题。

话虽如此，我假设`MySQL`该类将具有与数据库相关的机制。这种机制通常通过[单例](http://en.wikipedia.org/wiki/Singleton_pattern)设计模式暴露出来。这种设计模式应该允许您`MySQL`仅在需要时访问类中的方法，从而避免循环引用问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:54:37.113

`mysql`每次创建类型对象时都必须实例化该字段`Main`。创建新`MySQL`实例时，由于它具有字段`Main main`，因此会创建一个新`Main`实例。`20 goto 10`:-)

在`MySQL`类中，您可以通过两种方式避免创建另一个`Main`实例：确保引用 的*静态*成员`Main`，或者在中`MySQL`创建*嵌套*类`Main`，在这种情况下，您不需要额外的字段。

# c++ - 为什么这些重载的函数调用模棱两可？

> ID：11880585
> 
> 赞同：1
> 
> 时间：2012-08-09T09:41:58.200
> 
> 标签：c++, implicit-conversion, overload-resolution

为什么以下重载函数调用不明确？随着编译错误：

> 重载 'test(long int)' 的调用不明确，候选者是：void test(A)| 无效测试(B)|

编码：

```
class A
{
    public:
        A(int){}
        A(){}
};

class B: public A
{
    public:
        B(long){}
        B(){}
};

void test(A a)
{
}

void test(B b)
{
}

void main()
{
    test(0L);
    return;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:47:20.480

你得到了一个错误，因为重载解析必须从两个同样可行的函数中进行选择（两者都有用户定义的转换）。函数重载解析是一个非常复杂的主题。有关重载解决方案的更多详细信息，请参见Stephan T. Lavavej[最近](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-Cpp-3-of-n)的讲座。通常最好制作单参数构造函数`explicit`，然后使用显式构造函数参数调用您的函数。

`test(0L)`与任何重载都不完全匹配，因为没有重载`test(long)`。您提供的两个重载都对其参数进行了用户定义的转换，但编译器认为它们同样可行。重载必须执行`A`标准转换（long 到 int），然后是用户定义的转换（int 到 A），`B`重载是用户定义的转换（long 到 B）。但两者都是**隐式用户定义的转换序列**。

这些排名如何？标准在**13.3.3.2 排名隐式转换序列 [over.ics.rank]**

> 如果 S1 是 S2 的适当子序列，则标准转换序列 S1 是比标准转换序列 S2 更好的转换序列

例如，如果 A 是 B 的派生类（反之亦然），这些类型的平局就适用。但是这里没有一个转换序列是另一个的子序列。因此它们同样可行，编译器无法解析调用。

```
class A
{
public:
    explicit A(int){}
    A(){}
};

class B: public A
{
public:
    explicit B(long){}
    B(){}
};

void test(A a)
{}

void test(B b)
{}

int main()
{
    test(A(0L));  // call first overload
    test(B(0L)); // call second overload
    return 0;
} 
```

注意：它是`int main()`，不是`void main()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:49:20.883

函数重载考虑精确的参数类型或隐式转换。在您的示例中，从重载的角度来看，替代方案 A(0L) 和 B(0L) 都是相同的，因为需要隐式构造函数调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:54:28.953

您正在使用 long 类型的参数调用 test。

没有测试（长）。

编译器必须在 test(A) 和 test(B) 之间进行选择。

要调用 test(A)，它有一个 long -> int -> A 的转换序列。

调用 test(B) 它有一个 long -> B 的转换序列。

根据标准的排名规则，如果一个排名比另一个好，它会选择一个 - 或者它会因模棱两可而失败。

在这种特定情况下，两个转换序列的排名相同。

标准中有一长串关于如何计算转换序列排名的规则在第**13.3.3 节“最佳可行函数”中**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:47:42.290

试试这个：

```
class A
{
  public:
  explicit A(int){}
  A(){}
}; 
```

关键字显式停止编译器进行隐式转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T10:07:36.063

编译器只允许对用户类型进行一次隐式转换。如果这还涉及原始类型之间的转换，则它们不计算在内。即使`test(B)`您有两个转换，但以下内容将无法编译：

```
class B
{
public:
    B(int) {}
};

class A
{
public:
    A(const B&) {}
};

void test(const A&) {}

....

test(5); 
```

要禁用编译器进行隐式转换，您应该使用`explicit`带构造函数的关键字

# ios - 带有 AudioFileReadPackets 的 EXC_BAD_ACCESS

> ID：11880587
> 
> 赞同：0
> 
> 时间：2012-08-09T09:42:02.477
> 
> 标签：ios, audio, serialization, audioqueueservices

我一直在尝试按照[此处](https://stackoverflow.com/a/2417557/766570)的说明序列化本地音频文件，而不是将数据包直接提供给 AudioQueBuffer，我想使用[GKSession](http://www.raywenderlich.com/12910/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-3)通过蓝牙/wifi 发送它。我收到 EXC_BAD_ACCESS 错误：

```
- (void)broadcastServerMusicWithSession:(GKSession *)session playerName:(NSString *)name clients:    (NSArray *)clients
{
    self.isServer = YES;

    _session = session;
    _session.available = NO;
    _session.delegate = self;
    [_session setDataReceiveHandler:self withContext:nil];

    CFURLRef     fileURL = (__bridge CFURLRef)[[NSBundle mainBundle] URLForResource:@"mozart"                                                                       withExtension:@"mp3"]; // file URL    
    AudioFile *audioFile = [[AudioFile alloc] initWithURL:fileURL];    

    //no we start sending the data over    
    #define MAX_PACKET_COUNT    4096
    SInt64 currentPacketNumber = 0;
    UInt32 numBytes;
    UInt32 numPacketsToRead;
    AudioStreamPacketDescription    packetDescriptions[MAX_PACKET_COUNT];    

    NSInteger bufferByteSize = 4096;
    if (bufferByteSize < audioFile.maxPacketSize) bufferByteSize = audioFile.maxPacketSize; 
    numPacketsToRead = bufferByteSize/audioFile.maxPacketSize;
    UInt32 numPackets = numPacketsToRead;

    BOOL isVBR = ([audioFile audioFormatRef]->mBytesPerPacket == 0) ? YES : NO;

// this should be in a do while (numPackets < numPacketsToRead) loop.. 
// but i took it out just to narrow down the problem

    NSMutableData *myBuffer = [[NSMutableData alloc] initWithCapacity:numPackets * audioFile.maxPacketSize];

    AudioFileReadPackets (
                          audioFile.fileID,
                          NO,
                          &numBytes,
                          isVBR ? packetDescriptions : 0,
                          currentPacketNumber,
                          &numPackets,
                          &myBuffer
                          );

    NSError *error;        
    if (![session sendDataToAllPeers:packetData withDataMode:GKSendDataReliable error:&error]) 
    {
        NSLog(@"Error sending data to clients: %@", error);
    } 
```

*我知道是 AudioFileReadPackets 调用破坏了代码，因为如果我注释掉它，它运行良好*

我尝试过使用 xcode 4.3 进行[Zombies 分析](https://stackoverflow.com/a/1067732/766570)，但它只是崩溃了。我得到的一个有用的调试[技巧](http://cocoadev.com/wiki/DebuggingTechniques)是在代码崩溃时中断并使用 gdb 控制台输出错误代码。这就是我得到的：

```
(lldb) po [$eax className] NSException
error: warning: receiver type 'unsigned int' is not 'id' or interface pointer, consider casting it to 'id'
warning: declaration does not declare anything
error: expected ';' after expression
error: 1 errors parsing expression 
```

但我无能为力..有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:51:49.647

原来上面的代码有两个问题：

1.  [audioFile audioFormatRef]->mBytesPerPacket == 0 编译器对此不满意。如果您参考定义 audioFormatRef 的[代码](https://stackoverflow.com/a/2514804/766570)，它会返回一个指向格式结构的指针，该结构有一个 mBytesPerPacket 字段。我不知道为什么上面的语法不起作用

2.  我不应该将 myBuffer 提供给 AudioFileReadPackets 函数（类型 mismach）。我应该这样做：

    ```
    NSMutableData *myBuffer = [[NSMutableData alloc] initWithCapacity:numPackets * audioFile.maxPacketSize];
    const void *buffer = [myBuffer bytes];
    AudioFileReadPackets (
                          audioFile.fileID,
                          NO,
                          &numBytes,
                          isVBR ? packetDescriptions : 0,
                          currentPacketNumber,
                          &numPackets,
                          buffer
                          ); 
    ```

这也有效

```
void *buffer = [myBuffer mutablebytes]; 
```

阅读[这篇](https://stackoverflow.com/questions/9746944/difference-between-nsmutabledatas-mutablebytes-and-bytes-methods)文章以解释这两个选项之间的区别

# mongodb - MongoDB 从 2.1 降级到 2.0

> ID：11880588
> 
> 赞同：0
> 
> 时间：2012-08-09T09:42:08.623
> 
> 标签：mongodb, downgrade

我用 MongoDB 2.1（不稳定的 debian 包）做了一些测试。我想用 2.0 stable 测试代码，看看速度差异。

我可以简单地卸载 mongoDB 2.1 并重新安装 2.0 而不关心数据吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:42:15.377

@Stennie 用他的评论回答了这个问题。我试过了，它奏效了。在 mopngoDB 网站上，最好是下载 legacy-static 女巫，对于版本测试非常有用。确保将正确的数据路径放入 mongod ;-)

# c# - Visual Studio 在设计器模式下打开我的类文件 (.cs)

> ID：11880589
> 
> 赞同：23
> 
> 时间：2012-08-09T09:42:17.103
> 
> 标签：c#, xml, visual-studio, ado.net

我在一个全新的项目中创建了一个扩展[DbConnection的类。](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx)

```
public class FakeDbConnection : DbConnection { ... } 
```

在解决方案资源管理器中，该类如下所示：![在此处输入图像描述](../Images/00287d61885f0a1cf183c5e6cc333bf8.png)

双击时它想在设计模式下打开它，这是行不通的。打开 .csproj 文件会发现问题

```
<ItemGroup>
  <Compile Include="FakeADO\FakeDbConnection.cs">
    <SubType>Component</SubType>
  </Compile>
</ItemGroup> 
```

即使我删除`SubType`标签 VS2010 立即重新添加它。很烦人。

如何阻止 VS2010 在设计器模式下打开我的 .cs 文件并将其作为常规代码文件打开？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-10T07:55:16.433

如[对此问题](https://stackoverflow.com/questions/6256327/vs-2010-setting-non-gui-class-file-as-component)的回答中所述，您可以执行以下操作：

```
[System.ComponentModel.DesignerCategory("Code")]
class FakeDbConnection: DbConnection { ... } 
```

**重要：**该属性需要[完全限定](http://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.71%29.aspx)，否则 VS2010 将忽略这一点。

**重要**（感谢 jmbpiano）：该属性仅适用于文件中的第一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:51:28.473

继承层次结构表明此类 ( `DbConnection`) 继承自`System.ComponentModel.Component`。尝试右键单击文件并查看源代码。

与往常一样，您可以查看 MSDN！[这](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx)是`DbConnection`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:50:21.517

那是因为 DBConnection 继承了“组件”。关于禁用 VS 在 csproj 文件中添加“子类型” - 我认为这是不可能的。

您仍然可以通过右键单击设计器->显示代码来访问代码（我认为“F7”是快捷键）

# c# - SaveFileDialog.ShowDialog() 抛出 FileNotFound 异常

> ID：11880593
> 
> 赞同：1
> 
> 时间：2012-08-09T09:42:27.793
> 
> 标签：c#, windows, winforms, windows-7-x64

以下代码在 Windows 7（32 位）上运行良好，但是当移植到 64 位时，我得到一个异常，指出*"File Not Found"*。我已经在 64 位配置中构建了项目，但问题仍然存在。

如果计算机未安装 Office，则会出现此问题。

代码如下：

```
try
{
    SaveFileDialog fileDialog = new SaveFileDialog();

    fileDialog.InitialDirectory = path;

    // set the default extension as mdb.
    fileDialog.DefaultExt = ".mdb";

    // allow the user to select the file type as CSV, XML or MDB.
    fileDialog.Filter = "CSV (*.csv)|*.csv|XML (*.xml)|*.xml|MDB (*.mdb)|*.mdb";                
    fileDialog.RestoreDirectory = true;

    if (DialogResult.OK == fileDialog.ShowDialog())  // exception occured
    {
        this.fileNameTextBox.Text = fileDialog.FileName;
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:49:01.890

这里的问题是“路径”的价值是什么。x86 和 x64 机器可能有不同的文件夹配置，例如 Program Files (x86) 就是其中之一。您可以从 Environment.SpecialFolders 枚举开始，这些路径应该是有效的。

# iphone - managedObjectContext deleteObject：匹配不从核心数据库中删除数据？

> ID：11880594
> 
> 赞同：4
> 
> 时间：2012-08-09T09:42:27.090
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext

我试图从 ios 应用程序的核心数据库中删除行但它不起作用，

```
if (editingStyle == UITableViewCellEditingStyleDelete) {

     appDelegate = [[UIApplication sharedApplication] delegate];   
        NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"PRODUCTTABLE" inManagedObjectContext:appDelegate.managedObjectContext];        
        NSFetchRequest *request = [[NSFetchRequest alloc] init];        
        [request setEntity:entityDesc];        
        NSError *error; 
        NSManagedObject *matches = nil;
        NSArray *objects = [appDelegate.managedObjectContext executeFetchRequest:request error:&error];
        NSLog(@"Array Count....%d",[objects count]);
        matches=[objects objectAtIndex:([indexPath row])];
        NSLog(@"...%@",[matches valueForKey:@"productID"]);
        NSLog(@"...%@",[matches valueForKey:@"pName"]);
        NSLog(@"...%@",[matches valueForKey:@"pPrice"]);
        NSLog(@"...%@",[matches valueForKey:@"pDate"]);           
        [appDelegate.managedObjectContext deleteObject:matches];

    } 
```

以下代码的o/p：

```
Array Count....12
...ABC1226
...ABC-005
...599.39
...2012-08-09 05:07:50 +0000 
```

我正在从具有相同 NSManagedObject 的核心数据中获取数据。为什么删除不更新核心数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T09:50:14.363

更改后保存上下文。

```
NSError * error = nil;
[appDelegate.managedObjectContext deleteObject:matches];
[appDelegate.managedObjectContext save:&error]; 
```

# jsf - 如何在页面上分发 h:selectOneRadio 的选择项？

> ID：11880596
> 
> 赞同：2
> 
> 时间：2012-08-09T09:42:35.657
> 
> 标签：jsf, jsf-2

我需要做的就是传播这样的依赖无线电选项：

```
<h:panelGroup id="part1">
  <!-- several radio options -->
</h:panelGroup>
<h:panelGroup id="part2">
  <!-- several radio options -->
</h:panelGroup> 
```

将上面的代码段放在里面`h:selectOneRadio`没有任何效果，而`h:selectOneRadio`在每个里面放置两个 s`h:panelGroup`使得选择独立。据我记得，这可以在纯 html 中通过使用`input`s 的相同名称来实现。

我在 JSF2 中的机会是什么？

# c# - 在 c# 中批量插入到 Acces 数据库的最佳方法

> ID：11880598
> 
> 赞同：0
> 
> 时间：2012-08-09T09:42:44.177
> 
> 标签：c#, winforms, ms-access

我正在研究使用 Microsoft 访问作为数据库和 oldedb 数据提供程序的 Windows 应用程序。在这个项目中，我曾经导入 xml 文件并将数据写入数据库。我想做批量插入而不是一次插入一条记录。所以我尝试使用 DAO 方法，但有时会出现异常，例如

“当前锁定无法更新”

这是我使用的代码。

```
using TEST = Microsoft.Office.Interop.Access.Dao;

Pubic void Insert()
{

        string sBaseDirectory = (AppDomain.CurrentDomain.BaseDirectory).ToString();
            string sODBPath = sBaseDirectory + @"\TEST.accdb";
            TEST.DBEngine dbEngine = new TESt.DBEngine();
            TEST.Database db = dbEngine.OpenDatabase(sODBPath);
            TEST.Recordset rsTest = db.OpenRecordset("dtTest");
        for(int i=0;i<1000;i++)
                {
                    rsTest.AddNew();
                    rsTest.Fields["ID"].Value =i;
                    rsTest.Fields["Name"].Value ="Test";
                    rsTest.update();

                 }
        rsTest.close();
        db.close();

} 
```

使用 Oldedb：

```
 DataTable dt = new DataTable();
    dt.Columns.Add("ID", typeof(int));
    dt.Columns.Add("Name", typeof(string));

    string TableSQl = "Select * from dtTest where ID=0";
    OleDbDataAdapter dataAdapter=new OleDbDataAdapter(TableSQl,ConnectionString);
    dataAdapter.InsertCommand = new OleDbCommand(INSERT);
    OleDbConnection OleConn = new OleDbConnection(ConnectionString);

       for(int i=0;i<1000;i++)
        {
          dataAdapter.InsertCommand.Parameters.Add("ID", OleDbType.BigInt, 8,i.ToString());
          dataAdapter.InsertCommand.Parameters.Add("Name", OleDbType.BigInt, 8, "test");              
    }

    dataAdapter.InsertCommand.Connection = OleConn;
    dataAdapter.InsertCommand.Connection.Open();  
    dataAdapter.update(dt);        
    dataAdapter.InsertCommand.Connection.Close(); 
```

这里它没有在表中插入记录。

请指导此代码有什么问题以及好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:55:11.773

请参阅[http://msdn.microsoft.com/en-us/library/bbw6zyha(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bbw6zyha(v=vs.80).aspx) -“将参数与 DataAdapter 一起使用”

> Parameters 集合的 Add 方法采用参数名称、DataAdapter 特定类型、大小（如果适用于该类型）和**DataTable 中 SourceColumn 的名称**。

所以需要正确创建参数，填充DataTable，然后调用Update。

是否有任何文档表明这种方法将批量插入而不是一次插入一个？

# java - Java根据Excel工作表自动生成Pojo

> ID：11880601
> 
> 赞同：0
> 
> 时间：2012-08-09T09:42:49.060
> 
> 标签：java, excel, api, pojo

有没有办法根据 Excel 表中可用的列自动生成动态 POJO？

示例：如果 Excel 工作表包含 10 列和 15 行，我想要一个具有 10 个字符串数组变量且数组大小应为 15 的 Pojo。

任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T09:06:34.707

您可以编写一个工具（例如 Maven 插件），它采用 Excel 工作表并从中生成代码。这样的工具不应该很复杂并且可能很有用。然而，实现这样的事情的常用方法是在 XSD 中指定数据结构并从中生成代码，例如使用[JAXB](http://mojo.codehaus.org/jaxb2-maven-plugin/)。因此，IMO 您需要一个令人信服的论据来从 Excel 而不是 XSD 生成代码，以保证为其编写工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T07:25:14.483

有一个为此特定目的而创建的插件。它需要一个 excel 表并从中创建 POJO。但是您必须以特定方式排列列才能使其正常工作。在你的 pom 中添加以下内容并将 excel 表放在资源目录中，更改插件配置以将 excel.xlsx 替换为你的 excel 表的名称。

```
 <plugin>
        <groupId>com.github.pkoli</groupId>
        <artifactId>xls2pojo-maven-plugin</artifactId>
        <version>1.0</version>
        <executions>
            <execution>
                <phase>compile</phase>
                <configuration>
                    <fileName>target/classes/excel.xlsx</fileName>
                </configuration>
                <goals>
                    <goal>xls2pojo</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

该插件假定第一列是类名，第二列是变量名，第三列是数据类型。因此，如果 Excel 工作表包含以下方式的数据 -

[![例子](../Images/88bdf121ec65ea47dc71993f0599c6c9.png)](https://i.stack.imgur.com/8XGiB.png)

生成以下 POJO -

```
public class Student {
public String name;
public double marks;
public int rollno;
}

public class Teacher {
public String name;
} 
```

# android - 嵌套 SetOnClickListener

> ID：11880607
> 
> 赞同：0
> 
> 时间：2012-08-09T09:43:26.780
> 
> 标签：android

你能嵌套一个 OnClickListener 即

```
 setContentView(R.layout.activity_main);
 add = (Button) findViewById(R.id.bAdd);
 add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                 // TODO Auto-generated method stub
                          setContentView(R.layout.secondary);
                          sub = (Button) findViewById(R.id.bSub);   

            } 
```

它有效吗？假设单击时在 activity_main.xml 中有一个名为 Sub 的按钮应该转到另一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:58:46.547

是的，您可以，但这不是一个好习惯...为什么不能使用 Two`Activities`和 Use`Intents`来切换它们..:)

示例代码..

`public class MainActivity extends Activity {`

```
Button buttonone;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    buttonone = (Button) findViewById(R.id.buttonone);
    buttonone.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            Intent intent = new Intent(MainActivity.this,
                    SecondaryActivity.class);
            startActivity(intent);
        }
    });

} 
```

`}`

`public class SecondaryActivity extends Activity {`

```
Button buttontwo;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondary);
    buttontwo = (Button) findViewById(R.id.buttontwo);
    buttontwo.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) { 
```

// 做任何事... `} });`

```
} 
```

`}`

# winapi - Win8 - Windows.UI.Xaml.dll 中未处理的异常

> ID：11880611
> 
> 赞同：8
> 
> 时间：2012-08-09T09:43:37.433
> 
> 标签：winapi, xaml, windows-8, unhandled-exception

在调试/运行我的 Metro 应用程序时，我遇到了一些奇怪的行为。在拖放过程中，屏幕将被刷新。我添加了一些功能来阻止绑定属性在拖放过程中刷新。

但有时应用程序崩溃，但不是抛出一些我可以调试的异常，我得到的只是一个窗口说打开一个外部即时调试器

> SOME_APP.exe [7785] 中出现未处理的 win32 异常。

（外部调试器没有带来更多信息）

输出说：

> SOME_APP.exe 中 0x05017145 (Windows.UI.Xaml.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000088。

我正在使用 x64 设备。有人听说过这样的问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T08:42:32.337

如果您通过 NavigationParameter 传递实现 INotifyPropertyChanged 的​​对象、继承的 BindableBase 或 DependencyObject 等；然后在 NavigatedPage 中绑定（或将它们绑定在导航页面中），您很可能会收到此错误。导航时不要通过 NavigationParameter 传递除原始类型以外的任何对象。

您收到此异常是因为不存在引用的方法。例如。

1.  您有一个名为 Categories 的对象，它继承了 BindableBase。
2.  您将其绑定到 Home.xaml。
3.  Home.xaml 的绑定机制订阅了 Categories 对象的 PropertyChanged 事件。
4.  您导航了 Article.xaml，将 Categories 对象作为 NavigationParameter 传递。
5.  您将 Categories 对象绑定到 Article.xaml。
6.  当 Categories 对象中的属性发生变化时；该属性将触发 PropertyChanged 事件。
7.  该事件有两个订阅者。Home.xaml 和 Article.xaml，但 Home.xaml 不再存在，因为您离开了它。但是您的代表拥有它的地址；所以它尝试执行；并因访问冲突错误而失败。

# windows-phone-7 - 如何在 windows mobile 中检查应用程序状态？

> ID：11880617
> 
> 赞同：0
> 
> 时间：2012-08-09T09:44:02.963
> 
> 标签：windows-phone-7, windows-mobile, windows-mobile-6, windows-mobile-5.0

我需要知道应用程序状态，即应用程序处于恢复状态、活动状态或任何..在 windows mobile 5、6、7 OS 手机中以编程方式。

请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:05:38.960

就像 Chris 指出的那样，您将无法检查设备状态并让它告诉您它处于什么状态。如果设备处于休眠状态或未运行，您的代码将不会运行。

但是，如果您使用的是 Windows Mobile 6，则可以选择在您的设备从一种状态变为另一种状态时通过使用[RegistryNotifyApp的](http://msdn.microsoft.com/en-us/library/bb154488.aspx)[状态和通知代理](http://msdn.microsoft.com/en-us/library/bb154491.aspx)接收通知。

有一个在本机代码示例中[使用状态和通知代理的详细信息。](http://msdn.microsoft.com/en-us/library/bb154479.aspx)

此工具在 Windows Mobile 版本 6 之前不可用。

较新的 Windows 7 Phone 操作系统完全不同，我对它的功能毫无经验。

# facebook - 将“放置”按钮添加到我的网站

> ID：11880618
> 
> 赞同：-1
> 
> 时间：2012-08-09T09:44:07.607
> 
> 标签：facebook, web, checkin

我正在寻找一种将“地点”按钮添加到我的网站的方法，以允许访问者直接从中签入。是否有可能使用 JavaScript SDK 作为弹出窗口来做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:15:31.890

你可以做到，这里记录了发布签到[https://developers.facebook.com/docs/reference/api/#publishing](https://developers.facebook.com/docs/reference/api/#publishing)。为了使其工作，您需要：

1.  使用 JS SDK ( [https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/) )验证您的用户
2.  请求`publish_checkins`延长许可（[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)）
3.  发出 POST 请求 onClick，功能类似于此 `https://graph.facebook.com/me/checkins?coordinates=%7B%22latitude%22%3A+37.383633343607%2C%22longitude%22%3A+-5.9910216821167%7D&place=298525916826786&message=you+funny+lion+at+the+door&method=post&access_token=USER_TOKEN`，当然如果使用 JS SDK 有意义，则为此使用 FB.api() 方法（[https://developers.facebook.com/docs/reference/javascript/FB .api/](https://developers.facebook.com/docs/reference/javascript/FB.api/) )。

# php - php复选框验证码修正

> ID：11880620
> 
> 赞同：-2
> 
> 时间：2012-08-09T09:44:11.400
> 
> 标签：php, ajax, validation, jquery

我正在使用此代码使用 ajax 和 jquery 验证表单输入字段......在此页面上：[http ://www.kbay.in/ajaxform/index.php](http://www.kbay.in/ajaxform/index.php)

```
$(document).ready(function() {

//if submit button is clicked
$('#submit').click(function () {        

    //Get the data from all the fields
    var name = $('input[name=name]');
    var phone = $('input[name=phone]');
    var package_name = $('input[name=package_name]');
    var comment = $('input[name=comment]');

    //Simple validation to make sure user entered something
    //If error found, add hightlight class to the text field
    if (name.val()=='') {
        name.addClass('hightlight');
        return false;
    } else name.removeClass('hightlight');

    if (phone.val()=='') {
        phone.addClass('hightlight');
        return false;
    } else phone.removeClass('hightlight');

    if (package_name.val()=='') {
        package_name.addClass('hightlight');
        return false;
    } else package_name.removeClass('hightlight');

    if (comment.val()=='') {
        comment.addClass('hightlight');
        return false;
    } else comment.removeClass('hightlight');

    //organize the data properly
    var data = 'name=' + name.val() + '&phone=' + phone.val() + '&package_name=' + 
    package_name.val() + '&comment='  + encodeURIComponent(comment.val()); 
```

但我添加了一个复选框，但不知道如何使用这个脚本来验证它......任何想法......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:02:11.560

您可以使用**is(":checked")**：

```
var commentChecked = $("input[name='comment']").is(':checked'); //returns true or false
var commentVal; //define variable for storing comment value 
```

和

```
if (!commentChecked) {
   commentVal = "";
   comment.addClass('hightlight');
   return false;
} else  {
   comment.removeClass('hightlight');
   commentVal = comment.val();;
} 
```

和

```
var data = 'name=' + name.val() + '&phone=' + phone.val() + '&package_name=' + 
    package_name.val() + '&comment='  + encodeURIComponent(commentVal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:20:20.633

在您的 HTML 中添加一个复选框......如下所示：

```
<input type="checkbox" id="ch1"> 
```

并且您的 jQuery 代码来检查它是否被检查应该如下所示：

```
if ($("#ch1").prop("checked")) {
    alert("is checked");
}
else {
    alert("is not checked");
} 
```

# php - Cakephp：在 cakephp 2 中为用户显示个人资料图片

> ID：11880621
> 
> 赞同：0
> 
> 时间：2012-08-09T09:44:17.393
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

大家好，我还在学习 cakephp，所以这个问题可能很简单，但我很挣扎。我有一个 view.ctp 目前正在显示买家的个人资料，例如个人详细信息，除此之外，我还希望它也显示买家的个人资料图片。我在买家表中有一个名为 prof_pic 的字段，它使用 longblob 数据类型。我可以查看已登录买家的个人资料，现在我希望他们也可以查看他们的个人资料图片和个人详细信息。我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:39:17.997

将图像保存在文件夹中

然后您可以轻松使用它...根据需要调整大小或裁剪..

这是简单易行的方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:43:30.480

您应该考虑将文件保存在文件系统而不是数据库中。CakeDC 的 Florian Krämer 写了一篇很好[的](http://cakedc.com/florian_kraemer/2010/01/25/file-uploading-file-storage-and-cakephp-mediaview-class)文章，说明了为什么要这样做。简而言之：

> 将文件存储在数据库中几乎在所有情况下都是一个糟糕的解决方案，因为当您获取文件时，它必须通过数据库连接，特别是在不在同一网络中的服务器上，这可能会导致性能问题。
> 
> 文件系统存储的优点：
> 
> 1.  简单直接的文件访问，解析它们（csv、xml...）或操作它们（图像）
> 2.  您无需安装任何额外的软件来管理它们
> 3.  易于移动和安装在其他机器上
> 4.  更小然后存储在数据库中

他开始了一个有趣的插件[实现](https://github.com/burzum/FileStorage/)来做到这一点。它利用了[Gaufrette](https://github.com/KnpLabs/Gaufrette)文件系统抽象层，使得在 Cake 中处理文件更加简洁。[还提供了一种使用Imagine](https://github.com/cakedc/imagine)插件根据您的需要扩展图像的方法，如果您正在运行高流量站点，您甚至可以在 Amazon S3 等上托管您的图像。

# linq - 如何应用默认的 IComparable 在 Linq OrderBy 子句中

> ID：11880622
> 
> 赞同：5
> 
> 时间：2012-08-09T09:44:18.010
> 
> 标签：linq, sql-order-by, icomparablet

我有一个类型，它在实现`IComparable<T>`和`IComparable`. 我没有从 LINQ 得到我期望的结果，基本上它看起来好像`IComparable<T>`没有应用类型实现的。

我想我会用以下形式的表达式得到我想要的结果：

```
var result = MyEnumerable<T>.OrderBy(r => r); 
```

where`T`本身实现`IComparable<T>`. 它没有发生。

我可以看到`IComparable<T>`为排序指定了特定类的相关问题，但我找不到使用自身`IComparable<T>`实现的默认值的问题`T`。

我的语法显然不正确。请问正确的语法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:30:51.380

`OrderBy`使用默认比较器，而默认比较器`Comparer<T>.Default`将默认使用 for 的`IComparable<T>`实现，或者如果前者不存在`T`，则使用非泛型。`IComparable`

此代码有效：

```
public class Program
{
    static void Main(string[] args)
    {
        var list = new List<Stuff>
                       {
                           new Stuff("one"),
                           new Stuff("two"),
                           new Stuff("three"),
                           new Stuff("four")
                       };

        var sorted = list.OrderBy(x => x);

        foreach (var stuff in sorted)
        {
            Console.Out.WriteLine(stuff.Name);
        }
    }
}

public class Stuff : IComparable<Stuff>
{
    public string Name { get; set; }

    public Stuff(string name)
    {
        Name = name;
    }

    public int CompareTo(Stuff other)
    {
        return String.CompareOrdinal(Name, other.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T00:17:14.263

```
public static class GenericSorter
{
    public static IOrderedEnumerable<T> Sort<T>(IEnumerable<T> toSort, Dictionary<string, SortingOrder> sortOptions)
    {
        IOrderedEnumerable<T> orderedList = null;

        foreach (KeyValuePair<string, SortingOrder> entry in sortOptions)
        {
            if (orderedList != null)
            {
                if (entry.Value == SortingOrder.Ascending)
                {
                    orderedList = orderedList.ApplyOrder<T>(entry.Key, "ThenBy");
                }
                else
                {
                    orderedList = orderedList.ApplyOrder<T>(entry.Key, "ThenByDescending");
                }
            }
            else
            {
                if (entry.Value == SortingOrder.Ascending)
                {
                    orderedList = toSort.ApplyOrder<T>(entry.Key, "OrderBy");
                }
                else
                {
                    orderedList = toSort.ApplyOrder<T>(entry.Key, "OrderByDescending");
                }
            }
        }

        return orderedList;
    }

    private static IOrderedEnumerable<T> ApplyOrder<T>(this IEnumerable<T> source, string property, string methodName)
    {
        ParameterExpression param = Expression.Parameter(typeof(T), "x");
        Expression expr = param;
        foreach (string prop in property.Split('.'))
        {
            expr = Expression.PropertyOrField(expr, prop);
        }
        Type delegateType = typeof(Func<,>).MakeGenericType(typeof(T), expr.Type);
        LambdaExpression lambda = Expression.Lambda(delegateType, expr, param);

        MethodInfo mi = typeof(Enumerable).GetMethods().Single(
                method => method.Name == methodName
                        && method.IsGenericMethodDefinition
                        && method.GetGenericArguments().Length == 2
                        && method.GetParameters().Length == 2)
                .MakeGenericMethod(typeof(T), expr.Type);
        return (IOrderedEnumerable<T>)mi.Invoke(null, new object[] { source, lambda.Compile() });
    }
} 
```

# git - 从历史中删除较旧的 Git 提交？

> ID：11880625
> 
> 赞同：5
> 
> 时间：2012-08-09T09:44:27.467
> 
> 标签：git, git-svn

我已经将一个 SVN 存储库克隆到一个 Git 存储库中，我只想要从提交开始的最后一次`f3a5b2a`提交。我确实想保留更改，但它们可以成为该`f3a5b2a`提交的一部分，我想摆脱不必要的历史记录，因为我不再需要它并且我备份了旧的 SVN 存储库。

有跨越 7 年的提交，我只希望提交从`f3a5b2a`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:18:30.183

我找到了一种更好的方法来克隆 SVN 存储库并删除旧提交：

```
git svn clone -r1234:HEAD https://asdasd/ targetPath 
```

它基本上克隆了给定的 SVN 存储库，从修订版 1234 开始，直到它击中头部。

# perl - 在 perl 的函数参数中使用 -

> ID：11880626
> 
> 赞同：1
> 
> 时间：2012-08-09T09:44:30.957
> 
> 标签：perl, parameters

我有以下

```
use Config::IniFiles;
my $cfg = new Config::IniFiles( -file => "/path/configfile.ini" );
print "The value is " . $cfg->val( 'Section', 'Parameter' ) . "."
if $cfg->val( 'Section', 'Parameter' ); 
```

尽管以上内容几乎都有意义，但我不确定是什么`-file`意思

```
my $cfg = new Config::IniFiles( -file => "/path/configfile.ini" ); 
```

上面是说功能中的`$file`参数设置为`/path/configfile.ini`？或者是别的什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:03:00.597

在这种情况下`-file`是一个普通的字符串，即表达式可以写成

```
my $cfg = Config::IniFiles->new("-file" => "/path/configfile.ini"); 
```

该`=>`运算符会导致其左侧的单词被解释为字符串，因此您不必引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:59:25.707

我建议您使用现代 oop 风格：

```
my $cfg = Config::IniFiles->new( -file => "/path/configfile.ini" ); 
```

请在 CPAN 中检查此模块的来源：[Config::IniFiles](http://cpansearch.perl.org/src/WADG/Config-IniFiles-2.38/IniFiles.pm)

-file => "/path/configfile.ini" 后，保存到参数`$self->{cf} = $v`，然后ReadConfig。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T10:00:01.473

从[`Config::IniFiles`文档](https://metacpan.org/module/Config%3a%3aIniFiles)中：

> **-file 文件名**
> 
> 指定要从中加载参数的文件。这个“文件”实际上可能是以下任何东西：
> 
> 1.  *文件的路径名*
>     
>     
>     
>     ```
>     $cfg = Config::IniFiles->new( -file => "/path/to/config_file.ini" ); 
>     ```
>     
>     
> 2.  *一个简单的文件句柄*
>     
>     
>     
>     ```
>     $cfg = Config::IniFiles->new( -file => STDIN ); 
>     ```
>     
>     
> 3.  *一个文件句柄全局*
>     
>     
>     
>     ```
>     open( CONFIG, "/path/to/config_file.ini" );
>     $cfg = Config::IniFiles->new( -file => *CONFIG ); 
>     ```
>     
>     
> 4.  对 glob 的引用
>     
>     
>     
>     ```
>     open( CONFIG, "/path/to/config_file.ini" );
>     $cfg = Config::IniFiles->new( -file => \*CONFIG ); 
>     ```
>     
>     
> 5.  *一个`IO::File`对象*
>     
>     
>     
>     ```
>     $io = IO::File->new( "/path/to/config_file.ini" );
>     $cfg = Config::IniFiles->new( -file => $io ); 
>     ```
>     
>     
>     
>     或者
>     
>     
>     
>     ```
>     open my $fh, '<', "/path/to/config_file.ini" or die $!;
>     $cfg = Config::IniFiles->new( -file => $fh ); 
>     ```
>     
>     
> 6.  *对标量的引用（需要较新版本的`IO::Scalar`）*
>     
>     
>     
>     ```
>     $ini_file_contents = <<EOT
>     [section name]
>     Parameter=A value
>     Setting=Another value
>     EOT
>     
>     $cfg = Config::IniFiles->new( -file => \$ini_file_contents ); 
>     ```

# linux - 没有鱿鱼和 DNS 安装

> ID：11880631
> 
> 赞同：0
> 
> 时间：2012-08-09T09:44:52.440
> 
> 标签：linux, ubuntu

在我的本地机器上，我收到了这个错误：

> 尝试检索 URL 时：[http ://example.com/](http://example.com/)
> 
> 遇到以下错误：
> 
> 无法从 example.com 的主机名确定 IP 地址 dnsserver 返回：
> 
> 名称错误：域名不存在。这意味着：
> 
> 缓存无法解析 URL 中显示的主机名。检查地址是否正确。您的缓存管理员是网站管理员。

我没有安装任何 DNS 服务器和 SQUID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:05:43.407

您的 ISP 可能有一个透明代理，就像他们中的许多人一样。此错误页面下方可能有一个状态行，行中的某些`Squid at <ip>`内容可能会为您提供有关此缓存所在位置的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:23:13.240

这不是你的问题。可能的原因：

1.  这是一个糟糕的域名，没有IP绑定到它。（我也不能访问这个网站，所以你能仔细检查一下名字）
2.  您的 ISP 面临一些 DNS 问题。如果您的朋友可以访问该网站，请报告它。
3.  您错误地更改了 DNS 设置。（由于您说它仅在您尝试访问此站点时发生，我认为情况并非如此）

编辑：我在某些 DNS 查找工具（例如[DNS Watch](http://www.dnswatch.info/) ）中查找了您提供的域，但没有结果。可能是域问题

# java - EWS XML 查询无应答

> ID：11880633
> 
> 赞同：1
> 
> 时间：2012-08-09T09:44:56.297
> 
> 标签：java, soap, exchangewebservices

我开发了一个连接到 Exchange Web 服务的 Java 接口，它在我执行请求之前一直有效。

我的问题是答案总是空的。例如，如果我将以下查询发送到 2007 交换服务器：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\">"
<soap:Header>
<t:RequestServerVersion Version=\"Exchange2007\"/>"
</soap:Header>"
<soap:Body>"
  <FindItem xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\" Traversal=\"Shallow\">"
    <ItemShape>"
      <t:BaseShape>IdOnly</t:BaseShape>"
    </ItemShape>
    <ParentFolderIds>
      <t:FolderId Id="inbox" />
    </ParentFolderIds>"
  </FindItem>
</soap:Body>
</soap:Envelope> 
```

我最后得到的答案是一个简单的普通 HTTP 数据包，没有任何错误。这是它的内容（我做了一些`System.out`输出）：

```
################ANSWER################
#Header : Date: Thu, 09 Aug 2012 09:36:53 GMT#
#Header : Server: Microsoft-IIS/6.0#
#Header : X-Powered-By: ASP.NET#
#Header : X-AspNet-Version: 2.0.50727#
#Header : Cache-Control: private#
#Header : Content-Length: 0#
################DATA################
Data : 
```

如您所见，内容的长度为空。似乎服务器接受了请求，对其进行了处理，并回复了一个空结果。

你知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:42:30.827

我找到了解决一切的强大技巧。您发送到服务器的 HTTP 发布消息的最重要且**唯一需要**`Content-Type`的标头是值。每个其他标题都是可选的，我什至不确定它们是否用于任何事情。`Content-Type`是打开一切的钥匙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:15:23.987

EWS 的有效 FindItem 请求/响应以在收件箱文件夹中搜索邮件：

要求：

```
<FindItem Traversal="Shallow" xmlns="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
<ItemShape><t:BaseShape>IdOnly</t:BaseShape></ItemShape>
<ParentFolderIds><t:DistinguishedFolderId Id="inbox"></t:DistinguishedFolderId></ParentFolderIds></FindItem> 
```

JWebServices for Exchange 1.1 评估版，www.independentsoft.com。

回复：

```
<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header><h:ServerVersionInfo MajorVersion="14" MinorVersion="16" MajorBuildNumber="175" MinorBuildNumber="8" Version="Exchange2010_SP2" xmlns:h="http://schemas.microsoft.com/exchange/services/2006/types" xmlns="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/></s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><m:FindItemResponse xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
<m:ResponseMessages><m:FindItemResponseMessage ResponseClass="Success"><m:ResponseCode>NoError</m:ResponseCode><m:RootFolder TotalItemsInView="1" IncludesLastItemInRange="true">
<t:Items><t:Message><t:ItemId Id="AAMkAGM2NmE0NDQ4LTk0ZDAtNDRmZi1iYzJiLTI3ZGFiZTIwNTE4NQBGAAAAAADMQnRUWVgLTKClbuKuQmcEBwA5UIf+H7cbQZVv4gNmZSgmAAAA2iK7AAA5UIf+H7cbQZVv4gNmZSgmAAAD76voAAA=" ChangeKey="CQAAABYAAAA5UIf+H7cbQZVv4gNmZSgmAAAD77IT"/></t:Message></t:Items>
</m:RootFolder></m:FindItemResponseMessage></m:ResponseMessages></m:FindItemResponse></s:Body></s:Envelope> 
```

# php - 如何从具有不同（字段x）的表中选择所有字段？代码点火器

> ID：11880636
> 
> 赞同：0
> 
> 时间：2012-08-09T09:45:08.450
> 
> 标签：php, codeigniter

我试试这段代码

```
function catstore($id)
    {   
        $this->db->distinct();
        $this->db->select('store_id');
        $this->db->from('products');
        //$this->db->join('products','products.store_id = products.store_id');
        $this->db->where('cat_id', $id);
        $result = $this->db->get();
        return $result->result();       
    } 
```

它只产生不同的 store_id 但我希望表的所有列都具有基于 store_id 的不同行

建议我任何选择

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-15T03:46:51.453

您可以尝试使用 group_by

```
function catstore($id)
{   
    $this->db->select('*');
    $this->db->from('products');
    //$this->db->join('products','products.store_id = products.store_id');
    $this->db->where('cat_id', $id);
    $this->db->group_by('store_id');
    $result = $this->db->get();
    return $result->result();       
} 
```

我知道这个问题已经很久了，但是可能有人正在寻找和我一样的问题，这就是我解决它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:48:06.450

您可以完全省略该`select`功能。如果您从表中选择所有 (*)，则不需要使用此功能。省略时，CodeIgniter 假定您希望`SELECT *`

请参阅[http://codeigniter.com/user_guide/database/active_record.html#select](http://codeigniter.com/user_guide/database/active_record.html#select)

或者..

您可以将逗号分隔的值传递给`select`函数。因此，传递您要选择的所有以逗号分隔的列名

```
function catstore($id)
    {   
        $this->db->distinct();
        $this->db->select('store_id, column1, column2, cloumn3');
        $this->db->from('products');
        //$this->db->join('products','products.store_id = products.store_id');
        $this->db->where('cat_id', $id);
        $result = $this->db->get();
        return $result->result();       
    } 
```

# inno-setup - Inno-setup - 检查两个组件时添加注册表

> ID：11880638
> 
> 赞同：3
> 
> 时间：2012-08-09T09:45:11.697
> 
> 标签：inno-setup

仅在选择了两个组件的情况下，如何添加注册表项？我尝试了组件：A 和 B，但我得到一个错误，“和”是一个不存在的组件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:03:31.597

这在我的 5.5.1 版中运行良好：

```
[Components]  
Name: "a"; Description: "Description A"  
Name: "b"; Description: "Description B"  

[Registry]  
Root: "HKCU"; Subkey: "a Subkey"; ValueType: string; ValueName: "Some Value"; Components: a and b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:39:23.617

尝试“.......；组件：a b”

# linux - 没有密码提示的 SFTP 连接

> ID：11880639
> 
> 赞同：0
> 
> 时间：2012-08-09T09:45:14.077
> 
> 标签：linux, unix

我正在尝试将 txt/ 日志文件从 server1 移动到 server2。

我正在尝试使用 SFTP 连接到从 server1 到 server2 的服务器，但它是如何在提示中要求输入密码的。谁能告诉我如何通过脚本输入密码并使用脚本执行此功能。请尽快告诉我......

我的代码：

test.sh 是脚本，1.txt 文件有密码详细信息.....

代码：test.sh sftp mwctrl@sacsun11 < 1.txt <> out.log 2>&1 cd /usr/ftadapters/logs/adapters/rivaadp lcd /export/home/eisape put *.txt exit EOF

1.txt：密码m33tzn3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:49:10.457

实际上，您需要将 ssh 密钥添加到远程机器。检查下面的文章：

[使用没有密码的 sftp (http://says-story.blogspot.nl/2008/01/using-ssh-scp-sftp-without-password.html)](http://says-story.blogspot.nl/2008/01/using-ssh-scp-sftp-without-password.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:13:16.187

设置 ssh 密钥相对简单。按照fxzuz上面发布的链接中的说明进行操作，花费不到**1 分钟。**

但通常将密码作为参数传递/存储在配置文件中被认为是一种安全风险。

但是，如果您仍然想继续，这里有一个链接——http: [//nixcraft.com/shell-scripting/4489-ssh-passing-unix-login-passwords-through-shell-scripts.html](http://nixcraft.com/shell-scripting/4489-ssh-passing-unix-login-passwords-through-shell-scripts.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:10:59.700

尝试使用这个

```
/usr/bin/expect <<EOF
spawn sftp -oStrictHostKeyChecking=no -oCheckHostIP=no mwctrl@sacsun11 \
"cd /usr/ftadapters/logs/adapters/rivaadp \
lcd /export/home/eisape \
put *.txt \"
expect "*?assword:*"
send  "m33tzn3"
send  "\r"
set timeout -1
send  "\r"
expect EOF 
```

# installation - 如何查找和卸载机器中安装的补丁 [msp]？

> ID：11880641
> 
> 赞同：0
> 
> 时间：2012-08-09T09:45:25.910
> 
> 标签：installation, windows-installer, installshield, patch, msp

我使用 installsheild 创建了补丁 [msp]。

那时我不知道那个选项

> “允许卸载补丁”

现在必须卸载该补丁。

我有那个 msp 文件。[我使用 orca 打开 msp 并检查产品 GUID，但它不存在]

哪些信息可用于查找和卸载已安装在机器中的 msp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:05:09.280

为了找到可以应用此补丁的目标产品代码，打开 Orca 并`View -> Summary Information...`在主菜单中选择。在弹出的对话框中，您可以找到您要查找的内容：

![在此处输入图像描述](../Images/07997c82c82bd85e187f71f29981cbb3.png)

但是，如果将补丁设置为不可卸载，我认为您将无法卸载补丁本身。看来您必须卸载产品本身，或者按照主要升级策略将其替换为正确的（可能已经升级）版本。

# iphone - 致命错误：找不到“nDCAPI.h”文件

> ID：11880643
> 
> 赞同：0
> 
> 时间：2012-08-09T09:45:30.997
> 
> 标签：iphone, ipad

```
/Desktop/aug_9/iOSSample/iOSSample/test.m:11:10: fatal error: 'nDCAPI.h' file not found
#include <nDCAPI.h>
         ^
1 error generated. 
```

即使我将文件包含在我的项目中，我也收到此错误右键单击项目并将文件添加到项目并选择文件并选择目标和文件夹我为任何添加的文件夹创建文件夹引用。

用于将文件添加到项目中！

我收到此错误 /Desktop/aug_9/iOSSample/iOSSample/test.m:11:10: fatal error: 'nDCAPI.h' file not found #include ^ 1 生成错误。

# java - 使用 StringBuilder 用空格或其他字符填充字符串

> ID：11880644
> 
> 赞同：13
> 
> 时间：2012-08-09T09:45:33.740
> 
> 标签：java, string, padding, stringbuilder

我是 java 初学者，这是我在 Stackoverflow 上的第一篇文章。尽管我的初始代码与此处的其他帖子相似，但我的问题与实现 StringBuilder 以及此帖子的原因有关。

我创建了一个方法

```
**Initial code**
private static String padAgain(String result,int padNum)  
    {  
          String str = "";  
          for(int i = padNum; i >= 0; i--)  
        {  
            str = String.format("%" + padNum + "s", result).replace(" ", "*");  
        }  
          return str;  
    } 
```

使用 String.format 方法在字符串左侧填充空格（或特殊字符）。我在我的程序中使用相同的方法来正确证明数字。数字以 2（一位数）开始并以 2 的倍数增加（包含 n 个数字），其中空格与位数的增加成反比。

以下是用于说明目的的输出：

```
 Enter exponent value for base-2 - Enter 0 to exit: 
128
Square    1: **************************************2 items
Square    2: **************************************4 items
Square    3: **************************************8 items
Square    4: *************************************16 items
Square    5: *************************************32 items
Square    6: *************************************64 items
Square    7: ************************************128 items
Square    8: ************************************256 items
Square    9: ************************************512 items
Square   10: ***********************************1024 items
Square   11: ***********************************2048 items
Square   12: ***********************************4096 items
Square   13: ***********************************8192 items
Square   14: **********************************16384 items
Square   15: **********************************32768 items
Square   16: **********************************65536 items
Square   17: *********************************131072 items
Square   18: *********************************262144 items
Square   19: *********************************524288 items
Square   20: ********************************1048576 items
Square   21: ********************************2097152 items
Square   22: ********************************4194304 items
Square   23: ********************************8388608 items
Square   24: *******************************16777216 items
Square   25: *******************************33554432 items
Square   26: *******************************67108864 items
Square   27: ******************************134217728 items
Square   28: ******************************268435456 items
Square   29: ******************************536870912 items
Square   30: *****************************1073741824 items
Square   31: *****************************2147483648 items
Square   32: *****************************4294967296 items
Square   33: *****************************8589934592 items
Square   34: ****************************17179869184 items
Square   35: ****************************34359738368 items
Square   36: ****************************68719476736 items
Square   37: ***************************137438953472 items
Square   38: ***************************274877906944 items
Square   39: ***************************549755813888 items
Square   40: **************************1099511627776 items
Square   41: **************************2199023255552 items
Square   42: **************************4398046511104 items
Square   43: **************************8796093022208 items
Square   44: *************************17592186044416 items
Square   45: *************************35184372088832 items
Square   46: *************************70368744177664 items
Square   47: ************************140737488355328 items
Square   48: ************************281474976710656 items
Square   49: ************************562949953421312 items
Square   50: ***********************1125899906842624 items
Square   51: ***********************2251799813685248 items
Square   52: ***********************4503599627370496 items
Square   53: ***********************9007199254740992 items
Square   54: **********************18014398509481984 items
Square   55: **********************36028797018963968 items
Square   56: **********************72057594037927936 items
Square   57: *********************144115188075855872 items
Square   58: *********************288230376151711744 items
Square   59: *********************576460752303423488 items
Square   60: ********************1152921504606846976 items
Square   61: ********************2305843009213693952 items
Square   62: ********************4611686018427387904 items
Square   63: ********************9223372036854775808 items
Square   64: *******************18446744073709551616 items
Square   65: *******************36893488147419103232 items
Square   66: *******************73786976294838206464 items
Square   67: ******************147573952589676412928 items
Square   68: ******************295147905179352825856 items
Square   69: ******************590295810358705651712 items
Square   70: *****************1180591620717411303424 items
Square   71: *****************2361183241434822606848 items
Square   72: *****************4722366482869645213696 items
Square   73: *****************9444732965739290427392 items
Square   74: ****************18889465931478580854784 items
Square   75: ****************37778931862957161709568 items
Square   76: ****************75557863725914323419136 items
Square   77: ***************151115727451828646838272 items
Square   78: ***************302231454903657293676544 items
Square   79: ***************604462909807314587353088 items
Square   80: **************1208925819614629174706176 items
Square   81: **************2417851639229258349412352 items
Square   82: **************4835703278458516698824704 items
Square   83: **************9671406556917033397649408 items
Square   84: *************19342813113834066795298816 items
Square   85: *************38685626227668133590597632 items
Square   86: *************77371252455336267181195264 items
Square   87: ************154742504910672534362390528 items
Square   88: ************309485009821345068724781056 items
Square   89: ************618970019642690137449562112 items
Square   90: ***********1237940039285380274899124224 items
Square   91: ***********2475880078570760549798248448 items
Square   92: ***********4951760157141521099596496896 items
Square   93: ***********9903520314283042199192993792 items
Square   94: **********19807040628566084398385987584 items
Square   95: **********39614081257132168796771975168 items
Square   96: **********79228162514264337593543950336 items
Square   97: *********158456325028528675187087900672 items
Square   98: *********316912650057057350374175801344 items
Square   99: *********633825300114114700748351602688 items
Square  100: ********1267650600228229401496703205376 items
Square  101: ********2535301200456458802993406410752 items
Square  102: ********5070602400912917605986812821504 items
Square  103: *******10141204801825835211973625643008 items
Square  104: *******20282409603651670423947251286016 items
Square  105: *******40564819207303340847894502572032 items
Square  106: *******81129638414606681695789005144064 items
Square  107: ******162259276829213363391578010288128 items
Square  108: ******324518553658426726783156020576256 items
Square  109: ******649037107316853453566312041152512 items
Square  110: *****1298074214633706907132624082305024 items
Square  111: *****2596148429267413814265248164610048 items
Square  112: *****5192296858534827628530496329220096 items
Square  113: ****10384593717069655257060992658440192 items
Square  114: ****20769187434139310514121985316880384 items
Square  115: ****41538374868278621028243970633760768 items
Square  116: ****83076749736557242056487941267521536 items
Square  117: ***166153499473114484112975882535043072 items
Square  118: ***332306998946228968225951765070086144 items
Square  119: ***664613997892457936451903530140172288 items
Square  120: **1329227995784915872903807060280344576 items
Square  121: **2658455991569831745807614120560689152 items
Square  122: **5316911983139663491615228241121378304 items
Square  123: *10633823966279326983230456482242756608 items
Square  124: *21267647932558653966460912964485513216 items
Square  125: *42535295865117307932921825928971026432 items
Square  126: *85070591730234615865843651857942052864 items
Square  127: 170141183460469231731687303715884105728 items
Square  128: 340282366920938463463374607431768211456 items
Enter exponent value for base-2 - Enter 0 to exit:
0 
```

当迭代呈指数增长时，比如从 2​​^10 到 2^128，那么 String.format() 似乎有点慢。**所以，我用 StringBuilder 替换了 String.format 并且只取得了部分成功。**

[sidebar]为简洁起见，我没有发布其余的程序代码，而且我的重点是显示的 padAgain(String,int) 方法。如果需要，将发布整个代码。[/sidebar]

```
**Initial code modified**
private static String padAgain(String result,int padNum)
    {
        StringBuilder sb = new StringBuilder(result);
        for(int i = 1; i < padNum; i++)
        {
              sb.insert(0, result).insert(sb.indexOf(result), " ").setLength(padNum - result.toCharArray().length);   
        }
        sb.append(result);
        return sb.toString();
    } 
```

及其输出

```
Enter exponent value for base-2 - Enter 0 to exit: 
16
Square    1:  2 22 items
Square    2:  4 44 items
Square    3:  8 88 items
Square    4:  1616 items
Square    5:  3232 items
Square    6:  6464 items
Square    7:  1128 items
Square    8:  2256 items
Square    9:  5512 items
Square   10:  1024 items
Square   11:  2048 items
Square   12:  4096 items
Square   13:  8192 items
Square   14: 16384 items
Square   15: 32768 items
Square   16: 65536 items
Enter exponent value for base-2 - Enter 0 to exit: 
0 
```

**代码解释（我正在尝试做的事情）：**

*   变量 'padNum' 存储指数值的最大长度，最大值为 65536。长度 5
*   变量 'result' 是以 2 开头的数字的字符串表示形式
*   for循环迭代直到最大值。达到长度
*   StringBuilder 对象在索引 0 处插入字符串值。在此范围内，通过将 'result' 作为其自身的子字符串传递来调用 indexOf(String) 并在位置 0 处插入空格直到 max.length - 每个数字的长度
*   最后附加“结果”以弥补最大值。长度和
*   作为字符串值返回给调用对象

非常感谢论坛专家/成员可以帮助扩展/进一步修改/更正我的 StringBuilder 代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-25T07:38:40.313

您还可以`fill()`使用`Arrays`.

```
StringBuilder sb = new StringBuilder();
char[] pad = new char[padnum - result.length()];
Arrays.fill(pad, '*');
return sb.append(pad).append(result).toString(); 
```

我们的时间非常短，但这种方法比*for 循环*快 25% 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T09:59:50.853

简化一下怎么样？

*   padnum 是字符串的最大长度
*   result.length 是已经使用的长度
*   因此，您可以通过从整体大小中减去对齐的字符串来计算需要多少个占位符来对齐字符串。

    ```
    StringBuilder sb = new StringBuilder();
    int rest = padnum - result.length();
    for(int i = 1; i < rest; i++)
        {
             sb.append(" ");
        }
    sb.append(result);
    return sb.toString(); 
    ```

这会计算需要添加多少个空格并将它们相加。（使用 StringBuilder，这相对较快）最后它会添加您的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T10:10:33.327

Kostronor 的方法很棒，但只是为了一点不同的视角

```
public String pad(String value, int length) {
    return pad(value, length, " ");
}

public String pad(String value, int length, String with) {
    StringBuilder result = new StringBuilder(length);
    result.append(value);

    while (result.length() < length) {
        result.insert(0, with);
    }

    return result.toString();
} 
```

`result.append(with);`现在你可以用“填写”一个字符串来扭转这个想法

**另一个想法**

如果我们想减少内部`arraycopy`导致我们任何额外开销的可能性（感谢 Kostonor 指出它;)），我们可以改为：

```
public String fill(int length, String with) {
    StringBuilder sb = new StringBuilder(length);
    while (sb.length() < length) {
        sb.append(with);
    }
    return sb.toString();
}

public String pad(String value, int length) {
    return pad(value, length, " ");
}

public String pad(String value, int length, String with) {
    StringBuilder result = new StringBuilder(length);
    // Pre-fill a String value
    result.append(fill(Math.max(0, length - value.length()), with));
    result.append(value);

    return result.toString();
} 
```

好处是您获得了一些额外的方法，可用于构建不同的解决方案。

例如，如果我们包括：

```
public String fill(String value, int length, String with) {

    StringBuilder result = new StringBuilder(length);
    result.append(value);
    result.append(fill(Math.max(0, length - value.length()), with));

    return result.toString();

} 
```

然后执行

```
System.out.println("PAD: " + pad("Testing", 12, "*"));
System.out.println("PAD: " + pad("1", 12, "*"));
System.out.println("FILL: " + fill("1", 12, "*"));
System.out.println("FILL: " + fill("Testing", 12, "*")); 
```

我们得到

```
PAD: *****Testing
PAD: ***********1
FILL: 1***********
FILL: Testing***** 
```

感谢 Kostronor 是一项很好的运动，让我更多地思考我的想法；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T12:53:52.510

利用

```
String stars = "*".repeat(i);
sb.append(stars); 
```

从[javadocs](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/String.html)：

> 重复

> public String repeat​(int count) 返回一个字符串，其值为该字符串重复计数次数的串联。
> 
> 如果此字符串为空或计数为零，则返回空字符串。
> 
> 参数： count - 重复的次数 返回：由该字符串组成的字符串重复 count 次；如果此字符串为空或 count 为零，则为空字符串 抛出：IllegalArgumentException - 如果计数为负数。自：11

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T23:24:26.363

这可以通过 Java 11 显着简化，它在内部使用数组 copoy，字符串连接也应该在内部转换为 stringbuilder

```
public static String padNum(int number, String pad, int length){
    String numString = String.valueOf(number);
    int padLength = length - numString.length();
    if(padLength > 0)
        return pad.repeat(padLength) + numString;
    else
        return numString;
} 
```

检查 rest 是否大于 0 以查看我们是否需要填充，然后使用 String.repeat 生成正确大小的填充

字符串长度将始终 >= padLength

# c# - Recordset 遍历数据库表

> ID：11880646
> 
> 赞同：2
> 
> 时间：2012-08-09T09:45:44.437
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2008-r2

我有一个 asp.net 电子商务应用程序，我在其中添加了折扣功能：

如果`totalPurchase amount >=200, then 5% disc`，如果它`is >=500, then 7%..`喜欢那样。

问题是折扣百分比应该通过管理员登录动态更改。即我不允许在代码隐藏中编写此代码。

```
if(totalPurchase>=200 && totalPurchase<700)
{ // code for 5% discount } 
```

我正在尝试实现记录以遍历数据库表折扣，其字段是..

```
DiscID -1

DiscPer -5

DiscAmount -200 
```

等等..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:37:40.423

我觉得您缺少一个数据库列来存储您的折扣金额范围等`200`。`700`我假设数据库表名是`Discounts`并且范围列是`AmountFrom`and `AmountTo`。这是我为您提供的解决方案：

```
OleDbConnection connect = new OleDbConnection();
connect.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Data.accdb;Persist Security Info=False;";
connect.Open();

OleDbCommand command = new OleDbCommand();
command.CommandText = "SELECT AmountFrom, AmountTo, DiscPer FROM Discounts";
command.Connection = connect;

OleDbReader reader = command.ExecuteReader();

while(reader.Read())
{   
    int from = int.Parse(reader['AmountFrom'].toString());
    int to = int.Parse(reader['AmountTo'].toString());
    int discount = int.Parse(reader['DiscPer'].toString());

    if(totalPurchase >= from && totalPurchase < to) {
        MessageBox.Show("You got a discount of " + discount + "%");
    }
}
connect.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:25:46.740

这个 SO 问题可能会为您提供解决折扣问题的好方法[数据库设计头脑风暴：销售价格](https://stackoverflow.com/questions/9036052/database-design-brainstorming-sale-prices)

# jquery - .add() 解释

> ID：11880648
> 
> 赞同：0
> 
> 时间：2012-08-09T09:45:52.100
> 
> 标签：jquery

我想知道是否有人可以向我解释 jQuery .add() 是如何工作的，因为我正在阅读 jQuery 页面并试图理解它并且对我来说毫无意义，我不明白它的实用性。假设我想将 html 添加到我的所有 div 中，把这个

```
 $('div').append('<p id="new">new paragraph</p>'); 
```

做这项工作，但把

```
 $('div').add('<p id="new">new paragraph</p>'); 
```

才不是。在jQuery页面[http://api.jquery.com/add/](http://api.jquery.com/add/)我们可以阅读；

> 尽管新段落已创建并且其背景颜色已更改，但它仍然没有出现在页面上。要将其放置在页面上，我们可以将其中一种插入方法添加到 > 链中。

我不明白为什么然后使用 add 而不是 append 或其他工作方法。感谢您的时间和帮助。

编辑

```
$('div#dest').add('p.foo').append('<p id="new">PeNAROL</p>'); 
```

让我明白了，谢谢 devundef 和 JamWaffles

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:52:34.857

[`add()`](http://api.jquery.com/add/)不修改 DOM，它用于组合 2 个匹配的查询：

```
var queryA = $("a")
var queryB = $("button");

var buttonsAndLinks = queryA.add(queryB); 
```

[`append()`](http://api.jquery.com/append/)用于将元素附加到 DOM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:48:28.937

它就在[描述](http://api.jquery.com/add/)中：

> 描述：将元素添加到匹配元素的集合中。

`.append()`并`.add()`做*完全*不同的事情。

`.add()`不会将元素添加到 DOM，它会将一个或多个元素添加到已被前一个选择器匹配的元素集合中。

例如：

```
$('a.class').add('p.foo'); 
```

将返回一组包含任何`<a class="class">`和元素的`<p class="foo">`元素。

# regex - 使用 grep 和 Textwrangler 查找/替换

> ID：11880651
> 
> 赞同：7
> 
> 时间：2012-08-09T09:46:03.740
> 
> 标签：regex, grep

我`grep`在 TextWrangler 上使用来查找这种类型的字符串：

```
4,600.00 
```

我的正则表达式命令如下：

```
\d.\d{3}.\d{2} 
```

这似乎正确地找到了字符串。我想将字符串替换`4,600.00`为`4600.00`我希望将数据保存在`.csv`文件中。如何从找到的每个数字中删除逗号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T12:50:41.290

搜索：`(\d{1,3}),(\d{1,3})\.(\d{1,2})`

代替：`\1\2.\3`

在 TextWrangler 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:48:32.140

awk oneliner：

```
awk  --re-interval  '{x=gensub(/([0-9]{1,3}),([0-9]{3}\.[0-9]{2})/,"\\1\\2","g");print x}' file 
```

测试：

```
kent$  awk --version|head -1
GNU Awk 3.1.6

kent$  echo "foo,bar,blah,46,000.00,some,more"|awk --re-interval  '{x=gensub(/([0-9]{1,3}),([0-9]{3}\.[0-9]{2})/,"\\1\\2","g");print x}'
foo,bar,blah,46000.00,some,more 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:40:40.090

一种使用方式`sed`：

```
sed -r 's/([0-9]{1,3}),([0-9]{3}\.[0-9]{2})/\1\2/g' file.txt 
```

您可以添加`-i`标志以将更改直接写入文件。

# sap-ase - sysbase 0 工作进程

> ID：11880652
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:11.697
> 
> 标签：sap-ase

我正在尝试分析 sp_sysmon 的输出，问题是工作进程的数量为空，这里是查询：

```
sp_sysmon begin_sample
go
select top 1000 * from BEVENTS 
go
sp_sysmon end_sample, wpm 
```

这是输出：

```
 Worker Process Requests
   Total Requests                     0.0           0.0           0       n/a   

 Worker Process Usage
   Total Used                         0.0           0.0           0       n/a   
   Max Ever Used During Sample        0.0           0.0           0       n/a   

 Memory Requests for Worker Processes
   Total Requests                     0.0           0.0           0       n/a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:55:33.923

拥有 0 个工作进程请求本身不是问题。但如果您想查看它们，请在 sp_sysmon 运行期间运行 dbcc checkstorage。

# bash - awk 是否支持动态用户定义变量？

> ID：11880654
> 
> 赞同：5
> 
> 时间：2012-08-09T09:46:14.377
> 
> 标签：bash, dynamic, awk

awk 支持这一点：

```
awk '{print $(NF-1);}' 
```

但不适用于用户定义的变量：

```
awk '{a=123; b="a"; print $($b);}' 
```

顺便说一句，shell 支持这一点：

```
a=123;
b="a";
eval echo \${$b}; 
```

如何在 awk 中实现我的目的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T19:11:01.437

OK, since some of us **like to eat spaghetti through their nose**, here is some **actual** code that I wrote in the past :-)
First of all, getting a self modifying code in a language that does not support it will be **extremely non-trivial.**

The idea to allow dynamic variables, function names, in a language that does not support one is very simple. At some state in the program, you want a **dynamic anything** to self modify your code, and resume execution from where you left off. a `eval()`, that is.

This is all very trivial, if the language supports `eval()` and such equlavant. However, awk does not have such function. Therefore, **you, the programmer** has to provide a interface to such thing.

To allow all this to happen, you have three main problems

1.  How to get our self so we can modify it
2.  How to load the modified code, and resume from where we left off
3.  Finding a way for the interpreter to accept our modified code

## How to get our self so we can modify it

Here is a example code, suitable for direct execution. This one is the infastrucure that I inject for enviroments running gawk, as it requires PROCINFO

```
echo ""| awk '
function push(d){stack[stack[0]+=1]=d;}
function pop(){if(stack[0])return stack[stack[0]--];return "";}
function dbg_printarray(ary , x , s,e, this , i ){
 x=(x=="")?"A":x;for(i=((s)?s:1);i<=((e)?e:ary[0]);i++){print x"["i"]=["ary[i]"]"}}
function dbg_argv(A ,this,p){
 A[0]=0;p="/proc/"PROCINFO["pid"]"/cmdline";push(RS);RS=sprintf("%c",0);
 while((getline v <p)>0)A[A[0]+=1]=v;RS=pop();close(p);}
{
    print "foo";
    dbg_argv(A);
    dbg_printarray(A);
    print "bar";
}' 
```

Result:

```
foo
A[1]=[awk]
A[2]=[
function push(d){stack[stack[0]+=1]=d;}
function pop(){if(stack[0])return stack[stack[0]--];return "";}
function dbg_printarray(ary , x , s,e, this , i ){
 x=(x=="")?"A":x;for(i=((s)?s:1);i<=((e)?e:ary[0]);i++){print x"["i"]=["ary[i]"]"}}
function dbg_argv(A ,this,p){
 A[0]=0;p="/proc/"PROCINFO["pid"]"/cmdline";push(RS);RS=sprintf("%c",0);
 while((getline v <p)>0)A[A[0]+=1]=v;RS=pop();close(p);}
{
print "foo";
dbg_argv(A);
dbg_printarray(A);
print "bar";
}]
bar 
```

As you can see, as long as the OS does not play with our args, and `/proc/` is available, it is possible to read our self. This may appear useless at first, but we **need** it for push/pop of our stack, so that our execution state can be enbedded within the code, so we can save/resume and survive OS shutdown/reboots

I have left out the OS detection function and the bootloader (written in awk), because, if I publish that, kids can build platform independent polynormal code, and it is easy to cause havoc with it.

## how to load the modified code, and resume from where we left off

Now, normaly you have `push()` and `pop()` for registers, so you can save your state and play with your self, and resume from where you left off. a Call and reading your stack is a typical way to get the memory address.

Unfortunetly, in awk, under normal situations we can not use pointers (with out a lot of dirty work), or registers (unless you can inject other stuff along the way). However you need a way to suspend and resume from your code.

The idea is simple. Instead of letting awk in control of your loops and while, if else conditions, recrusion depth, and functions you are in, the code should. Keep a stack, list of variable names, list of function names, and manage it your self. Just make sure that your code always calls `self_modify( bool )` constantly, so that even upon sudden failure, As soon as the script is re-run, we can enter `self_modify( bool )` and resume our state. When you want to self modify your code, you must provide a custom made `write_stack()` and `read_stack()` code, that writes out the state of stack as string, and reads string from the values out from the code embedded string itself, and resume the execution state.

Here is a small piece of code that demonstrates the whole flow

```
echo ""| awk '
function push(d){stack[stack[0]+=1]=d;}
function pop(){if(stack[0])return stack[stack[0]--];return "";}
function dbg_printarray(ary , x , s,e, this , i ){
 x=(x=="")?"A":x;for(i=((s)?s:1);i<=((e)?e:ary[0]);i++){print x"["i"]=["ary[i]"]"}}
function _(s){return s}
function dbg_argv(A ,this,p){
 A[0]=0;p="/proc/"PROCINFO["pid"]"/cmdline";push(RS);RS=sprintf("%c",0);
 while((getline v <p)>0)A[A[0]+=1]=v;RS=pop();close(p);}
{
    _(BEGIN_MODIFY"|");print "#foo";_("|"END_MODIFY)
    dbg_argv(A);
    sub( \
    "BEGIN_MODIFY\x22\x5c\x7c[^\x5c\x7c]*\x5c\x7c\x22""END_MODIFY", \
    "BEGIN_MODIFY\x22\x7c\x22);print \"#"PROCINFO["pid"]"\";_(\x22\x7c\x22""END_MODIFY" \
     ,A[2]) 
    print "echo \x22\x22\x7c awk \x27"A[2]"";
    print "function bar_"PROCINFO["pid"]"_(s){print \x22""doe\x22}";
    print "\x27"
}' 
```

Result:

Exactly same as our original code, except

```
_(BEGIN_MODIFY"|");print "65964";_("|"ND_MODIFY) 
```

and

```
function bar_56228_(s){print "doe"} 
```

at the end of code

Now, this may seem useless, as we are only replaceing code `print "foo";` with our pid. But it becomes usefull, when there are multiple _() with separate MAGIC strings to identify BLOCKS, and a custome made multi line string replacement routine instead of `sub()`

You msut provide BLOCKS for stack, function list, execution point, as a bare minimum.

And notice that the last line contains `bar` This it self is just a sting, but when this code repeatedly gets executed, notice that

```
function bar_56228_(s){print "doe"}
function bar_88128_(s){print "doe"}
... 
```

and it keeps growing. While the example is intentionally made so that it does nothing useful, if we provide a routine to call `bar_pid_(s)` instead of that `print "foo"` code, Sudenly **it means we have `eval()` on our hands** :-) Now, isn't eval() usefull :-)

Don't forget to provide a custome made remove_block() function so that the code maintains a reasonable size, instead of growing every time you execute.

## Finding a way for the interpreter to accept our modified code

Normally calling a binary is trivial. However, when doing so from with in awk, it becomes difficult. You may say system() is the way.

There are two problems to that.

1.  system() may not work on some envoroments
2.  it blocks while you are executing code, trus you can not perform recrusive calls and keep the user happy at the same time.

If you must use `system()`, ensure that it does not block. A normal call to `system("sleep 20 && echo from-sh & ")` will not work. The solution is simple,

```
echo ""|awk '{print "foo";E="echo ep ; sleep 20 && echo foo & disown ; ";  E | getline v;close(E);print "bar";}' 
```

Now you have a async system() call that does not block :-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T18:23:11.460

现在不行。但是，如果你提供一个包装器，它是（有点老套和肮脏的）可能的。这个想法是使用在最新版本的 gawk 中引入的 @ 运算符。

这个@ 运算符通常用于按名称调用函数。所以如果你有

```
function foo(s){print "Called foo "s}
function bar(s){print "Called bar "s}
{
    var = "";
    if(today_i_feel_like_calling_foo){
        var = "foo";
    }else{
        var = "bar";
    }
    @var( "arg" ); # This calls function foo(), or function bar() with "arg"
} 
```

现在，这对它自己很有用。 **假设我们事先知道 var 名称**，我们可以编写一个包装器来间接修改和获取 var。

```
function get(varname, this, call){call="get_"varname;return @call();}
function set(varname, arg, this, call){call="set_"varname; @call(arg);} 
```

因此，现在，对于您希望通过名称进行访问的每个 var 名称，您声明这两个函数

```
function get_my_var(){return my_var;}
function set_my_var(arg){my_var = arg;} 
```

prahaps，在你的 BEGIN{} 块中的某个地方，

```
BEGIN{ my_var = ""; } 
```

声明它以供全局访问。然后你可以使用

```
get("my_var");
set("my_var", "whatever"); 
```

起初这可能看起来没用，但是有一些非常好的用例，例如保持 var 的链表，通过将 var 的名称保存在另一个 var 的数组中，等等。它也适用于数组，老实说，我用它来嵌套和链接数组中的数组，所以我可以像使用指针一样遍历多个数组。

您还可以通过这种方式编写在 awk 中引用 var 名称的配置脚本，实际上也具有interpreter-inside-a-interpreter 类型的东西......

不是最好的做事方式，但是，它可以完成工作，我不必担心空指针异常或 GC 等:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:36:21.557

该`$`符号不是变量的标记，如 shell、PHP、Perl 等。它是一个运算符，它接收一个*整*数值*n*并从输入中返回第 n 列。因此，您在第一个示例中所做的不是动态设置/获取变量，而是调用运算符/函数。

正如评论者所说，您可以使用数组存档您正在寻找的行为：

```
awk '{a=123; b="a"; v[b] = a; print v[b];}' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-10T13:33:23.097

我有一个类似的问题要解决，从“.ini”文件加载设置，我使用数组来动态设置变量。

它适用于 Awk 或 Gawk、Linux 或 Windows (GnuWin32)

```
gawk -v Settings_File="my_settings_file.ini" -f awk_script.awk <processing_file> 
```

[my_settings_file.ini]

```
#comment
first_var=foo
second_var=bar 
```

[awk_script.awk]

```
BEGIN{
    FS="=";
    while((getline < Settings_File)>0) {
        if($0 !~ /^[#;]|^(\s*)$/) {
            var_array[$1] = $2;
        }
    }

    print var_array["first_var"];
    print var_array["second_var"];

    if (var_array["second_var"] == "bar") {
        print "works!";
    }
}
{
#more processing
}
END {
#finish processing
} 
```

# jquery - jquery 显示隐藏分区

> ID：11880656
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:15.323
> 
> 标签：jquery

```
$(document).ready(function () {
    $(".btn-slide").focus(function () {
        $("#moresearch").show("fast");
        $(".btn-slide").blur(function () {
            $("#moresearch").hide("fast");
        });
    });
}); 
```

在这个示例`.btn-slide`中是我的文本框。当它聚焦时，`moresearch`会显示 div。当 div 模糊时隐藏。

问题是，当我单击`moresearch`div 时，div 会关闭，但只有在单击外部时才会关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:50:53.910

首先，为什么要嵌套焦点和模糊事件绑定？这样，每次触发 'focus' 事件时，'blur' 都会被绑定（但不会解除绑定）。但这不是这里的问题。

一种可能的解决方案是在模糊回调中检查焦点所在的元素。看看[当 onblur 发生时，我怎样才能找出哪个元素焦点*到*？](https://stackoverflow.com/questions/121499/when-onblur-occurs-how-can-i-find-out-which-element-focus-went-to)有关如何执行此操作的信息。

也许是这样的：

```
$(".btn-slide").blur(function(event) {
    var target = event.explicitOriginalTarget||document.activeElement;
    if (target != $("#moresearch")[0]) {
        $("#moresearch").hide("fast");
    }
} 
```

编辑：或者更确切地说，这可能是诀窍：

```
if (!$("#moresearch").has($(target)) > 0 &&! $("#moresearch")[0] == target) 
```

这将检查焦点离开的位置以及这是目标 div 还是其中一个子级。没试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:51:22.817

尝试这个：

```
$(document).ready(function () {
    $(".btn-slide").focus(function () {
        $("#moresearch").fadeIn("fast");
        $('body').not('.btn-slide').click(function () {
            $("#moresearch").fadeOut("fast");
        });
    });
}); 
```

注意：当您想对动画进行操作时，请使用[fadeIn()](http://api.jquery.com/fadeIn/)和[fadeOut代替显示/隐藏。](http://api.jquery.com/fadeOut/)

# c# - LINQ to XML - 为什么元素总是为空

> ID：11880657
> 
> 赞同：1
> 
> 时间：2012-08-09T09:46:16.533
> 
> 标签：c#, linq-to-xml

我无法从我的 XML 中获取元素。我无法从我的 XML 中获取 Vehicles 或 Vehicle 元素，它总是返回 null。

任何人都可以看到我哪里出错了吗？

这是我的代码...

```
 [TestMethod]
    public void TestDeleteVehicleFromXMLFile()
    {
        using (FileStream stream = new FileStream(base._TestXPathXMLFile, FileMode.Open))
        {
            try
            {
                XDocument xDoc = XDocument.Load(stream);
                var q = from RootNode in xDoc.Descendants("VehicleCache")

                    select new
                    {
                        // Vehicles & VehiclesList is always null
                        Vehicles = RootNode.Elements(XName.Get("Vehicle")).ToList(),
                        VehiclesList = RootNode.Elements(XName.Get("Vehicles")).ToList(),
                        SelfNode = RootNode.DescendantNodesAndSelf().ToList(),
                        DescendantNodes = RootNode.DescendantNodes().ToList()
                    };

                // used to see what is in item
                foreach (var item in q)
                {
                    int i = 0;
                }
            }
            catch(Exception E)
            {
                Assert.Fail(E.Message);
            }
        }
    }

<VehicleCache>
<Vehicles xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.myURL.co.uk">
    <Vehicle>
      <CapCode>41653</CapCode>
      <TrueCap i:nil="true" />
      <VehicleID>365789</VehicleID>
      <ViperVehicleID i:nil="true" />
      <BodyTypeID>5</BodyTypeID>
    </Vehicle>
    <Vehicle>
      <CapCode>42565</CapCode>
      <TrueCap i:nil="true" />
      <VehicleID>365845</VehicleID>
      <ViperVehicleID i:nil="true" />
      <BodyTypeID>2</BodyTypeID>
    </Vehicle>
</Vehicles> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T09:50:35.963

定义 XNamespace

```
XNamespace ns = "http://www.myURL.co.uk"; 
```

使用它：

```
Vehicles = RootNode.Elements(XName.Get(ns + "Vehicle")).ToList(), 
```

或者，如果您想避免使用命名空间，请尝试：

```
var result = xDoc.Descendants().Where(r => r.Name.LocalName == "VehicleCache"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:49:23.200

你需要包括你的命名空间。

```
XNamespace Snmp = "http://www.myURL.co.uk"; 
```

对于根后代，您还需要包含命名空间。

```
var q = from RootNode in xDoc.Descendants(Snmp +"VehicleCache") 
```

像这样

```
Vehicles = RootNode.Elements(XName.Get(Snmp + "Vehicle")).ToList()//snmp is the namespace 
```

# ruby-on-rails - 以其他格式渲染时如何传递参数哈希？

> ID：11880664
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:32.237
> 
> 标签：ruby-on-rails, render, params

我有这样的问题：我正在接受当前用户的报告，并且取决于从输入中获取的日期。

**但是**我需要将它们传递到带有 xls 扩展名的同一页面中，现在我遇到了这样的错误 -

```
 undefined method each for nil:NilClass 
```

所以这是我的控制器：

```
def index

if params[:report] && params[:report][:start_date] && params[:report][:end_date]
  @start_date = params[:report][:start_date]
  @end_date = params[:report][:end_date]
  @financial_reports = current_user.financial_reports.where(:created_at =>  @start_date.to_date..@end_date.to_date)

 respond_to do |format|
  format.html # index.html.erb
  format.xls
  format.xml  { render :xml => @financial_reports }
   end
  end
end 
```

**这是我的 index.xls.erb**

```
 <?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:o="urn:schemas-microsoft-com:office:office"
  xmlns:x="urn:schemas-microsoft-com:office:excel"
  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:html="http://www.w3.org/TR/REC-html40">
 <Worksheet ss:Name="Sheet1">
  <Table>
   <Row>
    <Cell><Data ss:Type="String">Amount</Data></Cell>
    <Cell><Data ss:Type="String">Currency</Data></Cell>
    <Cell><Data ss:Type="String">Created at</Data></Cell>
   </Row>
  <% @financial_reports.each do |financial_report| %>
  <Row>
    <Cell><Data ss:Type="Number"><%= financial_report.amount %></Data></Cell>
    <Cell><Data ss:Type="String"><%= financial_report.currency %></Data></Cell>
    <Cell><Data ss:Type="String"><%= financial_report.created_at %></Data></Cell>
  </Row>
   <% end %>
    </Table>
  </Worksheet>
</Workbook> 
```

**我的日志：**

```
 Started GET "/financial_reports.xls" for 127.0.0.1 at 2012-08-09 16:52:30 +0300
   Processing by FinancialReportsController#index as XLS
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT `users`.* FROM `users` WHERE `users`.`id` = 67 LIMIT 1[0m
   Rendered financial_reports/index.xls.erb (0.0ms)
  Completed 500 Internal Server Error in 20ms

 ActionView::Template::Error (undefined method `each' for nil:NilClass):
11:     <Cell><Data ss:Type="String">Currency</Data></Cell>
12:     <Cell><Data ss:Type="String">Created at</Data></Cell>
13:    </Row>
14:   <% @financial_reports.each do |financial_report| %>
15:   <Row>
16:     <Cell><Data ss:Type="Number"><%= financial_report.amount %></Data></Cell>
17:     <Cell><Data ss:Type="String"><%= financial_report.currency %></Data></Cell>
app/views/financial_reports/index.xls.erb:14:in     `_app_views_financial_reports_index_xls_erb__791914298_25744200'

  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (10.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.0ms)
  Rendered C:/Ruby193/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (30.0ms) 
```

**编辑：如果我打电话给控制器**

```
 @financial_reports = current_user.financial_reports 
```

**它正在工作，但是当我添加 WHERE 条件时 - 出现错误。**

那么我怎样才能传递到 xml 视图中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:48:14.543

```
undefined method each for nil:NilClass 
```

意味着您正在处理一个**nil 对象**，在本例中是`@financial_reports`. 为什么？好吧，也许是因为您的数据库中没有符合您`WHERE`条件的记录。

在这种情况下，您应该检查 nil 对象而不是渲染 xls。

```
redirect_to <your_path_here> if @financial_reports.emtpy?
respond_to do |format|
.... 
```

调试此问题的最佳方法是在`rails console`或`development.log`. 我更喜欢`development.log`- 它会显示发送到数据库的 SQL 查询以及返回的内容。

# 更新 - 试试这个

改变：

```
if params[:report] && params[:report][:start_date] && params[:report][:end_date]
  @start_date = params[:report][:start_date]
  @end_date = params[:report][:end_date]
  @financial_reports = current_user.financial_reports.where(:created_at =>  @start_date.to_date..@end_date.to_date) 
```

至：

```
if params[:start_date] && params[:end_date]
@financial_reports = current_user.financial_reports.where("financial_reports.created_at between ? and ?", params[:start_date].to_date, params[:end_date].to_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:13:43.060

创建一个名为“app/views//index.xml.erb”的视图

并坚持你的观点（所有带有 erb 标签和东西的 XML 位）。

在您的控制器中

```
respond_to do |format|
  format.html
  format.xls
  format.xml
end

current_user.financial_reports.where("financial_reports.created_at between ? and ?",params[:start_date].to_date,params[:end_date].to_date) 
```

# .net - .net 序列化：如何选择性地忽略数据字段

> ID：11880666
> 
> 赞同：2
> 
> 时间：2012-08-09T09:46:33.143
> 
> 标签：.net, binary-serialization

在。NET中可以将字段标记为不可序列化，在序列化过程中会被跳过。

我正在寻找一种简单的方法，该方法允许我在运行时控制是否应序列化特定字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T09:58:58.687

您指的是“将字段标记为不可序列化”，因此我假设您正在使用`BinaryFormatter`and `[NonSerialized]`。如果是这样，进行*条件*序列化的唯一方法是实现`ISerializable`和添加类似的构造函数，并将逻辑放入`GetObjectData`实现中。不过，这很乏味且容易出错。我建议查看 protobuf-net，它具有更简单的条件序列化，使用`TypeDescriptor`and使用的标准模式`XmlSerializer`，但仍然是二进制输出（`BinaryFormatter`实际上比 更有效）。具体来说：

```
[ProtoContract]
public class SomeType {
    [ProtoMember(1)]
    public string Name {get;set;}

    private bool ShouldSerializeName() {
       // return true to serialize Name, false otherwise
    }
} 
```

这`ShouldSerialize*`是一个标准的基于名称的约定——没有特定于这个序列化程序。

这是相同的 via `ISerializable`：

```
[Serializable]
public class SomeType : ISerializable
{
    public SomeType() { }
    public string Name { get; set; }

    void ISerializable.GetObjectData(
             SerializationInfo info, StreamingContext context)
    {
        if (/* should serialize Name */) info.AddValue("Name", Name);
        //... all other fields
    }
    protected SomeType(SerializationInfo info, StreamingContext context)
    {
        foreach (SerializationEntry entry in info)
        {
            switch (entry.Name)
            {
                case "Name": Name = (string)entry.Value; break;
                //... all other fields
            }
        }
    }
} 
```

还有更多需要维护；特别是，您必须在使用时对所有成员负责`ISerializable`- 但是，如果您只使用 protobuf-net，您可以根据具体情况处理每个成员。

实际上，你也可以混合搭配，即如果你坚持使用`BinaryFormatter`，你仍然可以将工作卸载到 protobuf-net，但**它会改变格式**（因此不会与旧数据兼容）。例如：

```
[Serializable, ProtoContract]
public class SomeType : ISerializable
{
    public SomeType() { }
    [ProtoMember(1)]
    public string Name { get; set; }
    private bool ShouldSerializeName() { /* condition */ }

    void ISerializable.GetObjectData(
        SerializationInfo info, StreamingContext context)
    {
        Serializer.Serialize(info, this); 
    }
    protected SomeType(SerializationInfo info, StreamingContext context)
    {
        Serializer.Merge(info, this);
    }
} 
```

# php - Yii 和 MVC 模式

> ID：11880667
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:35.323
> 
> 标签：php, model-view-controller, yii

我正在 Yii 中创建一个新的 Portlet。此小部件显示问题的最新评论。我只想在 Issue 有评论时显示这个，如果 Issue 没有任何评论，则不显示它（事件标题）。

所以我在视图文件中的伪代码如下：

检查评论数量的过程：

```
<?php
$countIssue = count($model->issues);
$i = 0; $j = 0;
while($i < $countIssue)
{
    $j += $model->issues[$i]->commentCount;
    $i ++;
}
?>

if ($countIssue >0 ) {
  if ($j >0)
  Display the widget
}

Else

Don't display the widget 
```

我只是想知道我的代码是否适合 MVC 模型。你能给我一个方向吗？我应该将评论过程的检查编号带到 Model 或 Controller ，还是上面的 MVC 模式可以？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:39:31.997

首先，我会将这个逻辑移到您的 portlet 类（扩展 CPorlet 的那个）的 run() 方法中。

接下来，我将在 Issue 类中定义一个[STAT 关系。](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#statistical-query)此关系仅用于计算评论，并允许您使用如下语句：

```
$issue = Issue::model()->findByPk($issue_id);
// $comments_count below is exactly what you would expect... .
$comments_count = $issue->commentsCount; 
```

最后，结合所有这些，我建议在 portlet 的 run() 方法中使用以下方法，如下所示：

```
If ($someIssue->commentsCount > 0) {
  // do something and in the end, when you want to render the portlet, you do...
  $this->render("view_file_name");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:19:00.050

我认为有很多 MVC 友好的方法可以做到这一点，主要想法是将数据逻辑放在**模型**中，然后通过**控制器**处理请求，而理想情况下，**视图**应该仅用于显示目的。

我个人将使用 Yii[命名范围](http://www.yiiframework.com/doc/guide/1.1/en/database.ar/#named-scopes)（最初来自 Rails）来实现最新的过滤器，如下所示：

**模型：**

```
class Comment extends CActiveRecord
{
  ......
  public function scopes()
  {
    return array(
        'recently'=>array(
            'order'=>'create_time DESC',
            'limit'=>5,
        ),
    );
  }
} 
```

如果只有问题有一些问题，要获得列表评论，您可以在**Controller**中执行以下操作：

```
if($issue->comments)
  $isseComments = Comment::model()->recently()->findAll(); //using the named scope to the recent ones only

$this->render('your_action',array(
      .....
      'issue' => $issue,
      'issueComments'=>$isseComments,
)); 
```

您的**视图**将保持整洁：

```
if($issueComments > 0)
  //Display the widget
else
  // Don't 
```

# android - 获取谷歌搜索的结果

> ID：11880671
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:41.237
> 
> 标签：android, google-search

我正在开发一个 Android 应用程序，我想在 google 中进行搜索并将结果保存在数据结构中以便使用它们。有人可以告诉我我可以使用的乐器吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:58:56.800

您只需联系 google api 进行搜索和解析 json 或 xml 结果，准确提取您想要的信息。[谷歌搜索](http://code.google.com/apis/customsearch/v1/overview.html)

# android - 将 px 转换为 dp 以用于 samsang 银河选项卡的问题

> ID：11880672
> 
> 赞同：0
> 
> 时间：2012-08-09T09:46:42.337
> 
> 标签：android

我正在使用 java 代码创建 android 应用程序。我们正在使用以下代码将 DIP 转换为 PX

```
Px = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dip, getResources().getDisplayMetrics().metrics); 
```

Galaxy Tab 7inch (sdk version 3.2) : density=1.0 width=1024, height=600 并从 values-large 文件夹中选择值

Galaxy Tab 7inch (sdk version 2.2) : density=1.5 width=1024, height=600 并从 values-large 文件夹中选择值

这就是为什么在galaxyTab 2.2 中的值也来自 values-large 文件夹，并且由于密度 1.5 ，其乘以 1.5

谢谢binish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:53:00.043

两者都是大型设备。

唯一的区别是 7' 3.2 是 mdpi 而 7' 2.2 是 hdpi。

如果您没有为相应的值提供任何文件夹，它将默认为 values-large

如果你想区分你可以创建一个forlder`values-large-mdpi`

和`values-large-hdpi`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T09:49:57.233

这是自更新到 3.0 及更高版本以来的常见三星问题。

查看[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)获取新值

# mongodb - 奇怪的 MongoDB MapReduce ObjectId.toString() 行为？

> ID：11880674
> 
> 赞同：1
> 
> 时间：2012-08-09T09:46:49.030
> 
> 标签：mongodb, mapreduce, mongohq

我在 MongoHQ 上运行的 mongodb 和在我自己的开发机器上运行的版本之间遇到了一些奇怪的差异。具体来说，当`.toString()`在 MapReduce 映射函数中调用对象 id 时，结果会有所不同：

在我自己的机器上：

```
ObjectId('foo').toString()  // => 'foo' 
```

在 MongoHQ 上：

```
ObjectId('foo').toString()  // => 'ObjectId(\'foo\')' 
```

*注意：我使用的 id 是实际的 mongodb id - 而不仅仅是 'foo' 等，如这些示例中*

我希望`.toString()`表现得像在我自己​​的机器上 - 而不是它在 MongoHQ 上的表现。怎么不是？

我的本地 OSX 版本的 MongoDB 是使用 Homebrew 安装的，并且是版本`2.0.1-x86_64`

为了展示实际发生的情况，我构建了一个小测试用例。假设我们有一个`users`带有`friends`属性的集合，它是一个用户 ID 数组：

```
> db.users.find()
{ _id: ObjectId('a'), friends: [ObjectId('b'), ObjectId('c')] },
{ _id: ObjectId('b'), friends: [] },
{ _id: ObjectId('c'), friends: [] } 
```

如您所见，与任何人`a`是朋友`b`，`c`在哪里是朋友`b`，`c`不是朋友。

现在让我们看一个有效的测试算法：

```
var map = function() {
  this.friends.forEach(function(f) {
    emit(f, { friends: 1, user: user, friend: f.toString() });
  });
};

var reduce = function(k, vals) {
  var result = { friends: 0, user: [], friend: [] };

  vals.forEach(function(val) {
    result.friends += val.friends;
    result.user.push(val.user);
    result.friend.push(val.friend);
  });

  return result;
};

var id = ObjectId('50237c6d5849260996000002');

var query = {
  query   : { friends: id },
  out     : { inline: 1 },
  scope   : { user: id.toString() },
  jsMode  : true,
  verbose : true
};

db.users.mapReduce(map, reduce, query); 
```

假设设置为集合`id`中某人的朋友的用户的 id `users`，那么 MongoHQ 上的方法返回的输出`mapReduce`将如下所示：

```
{
  "results" : [
    {
      "_id" : ObjectId("50237c555849260996000001"),
      "value" : {
        "friends" : 1,
        "user" : "50237c6d5849260996000002",
        "friend" : "ObjectId(\"50237c555849260996000001\")"
      }
    },
    {
      "_id" : ObjectId("50237c74c271be07f6000002"),
      "value" : {
        "friends" : 1,
        "user" : "50237c6d5849260996000002",
        "friend" : "ObjectId(\"50237c74c271be07f6000002\")"
      }
    }
  ],
  "timeMillis" : 0,
  "timing" : {
    "mapTime" : 0,
    "emitLoop" : 0,
    "reduceTime" : 0,
    "mode" : "mixed",
    "total" : 0
  },
  "counts" : {
    "input" : 1,
    "emit" : 2,
    "reduce" : 0,
    "output" : 2
  },
  "ok" : 1,
} 
```

如您所见，`friend`每个结果中的属性不仅仅是一个包含 id 的字符串，而是一个包含实际方法调用的字符串。

我是否在自己的机器上运行它，结果数组将是：

```
{
  "_id" : ObjectId("50237c555849260996000001"),
  "value" : {
    "friends" : 1,
    "user" : "50237c6d5849260996000002",
    "friend" : "50237c555849260996000001"
  }
},
{
  "_id" : ObjectId("50237c74c271be07f6000002"),
  "value" : {
    "friends" : 1,
    "user" : "50237c6d5849260996000002",
    "friend" : "50237c74c271be07f6000002"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:09:19.373

MongoHQ 运行的 MongoDB 版本与您不同。

要获得自制版本的行为，请尝试更改地图功能：

```
var map = function() {
  this.friends.forEach(function(f) {
    emit(f, { friends: 1, user: user.str, friend: f.str });
  });
}; 
```

# .net - 我可以在不注释我的类的情况下自定义 Json.NET 序列化吗？

> ID：11880677
> 
> 赞同：10
> 
> 时间：2012-08-09T09:47:13.430
> 
> 标签：.net, json, serialization, json.net

我需要使用 Json.NET 将一些实体类序列化为 JSON。为了自定义属性的名称，我使用如下`[JsonProperty]`属性：

```
 [JsonProperty("lastName")]
    public string LastName { get; set; } 
```

问题是，我不想在我的实体中包含任何与 JSON 相关的属性......有没有办法以某种方式将注释外部化，这样它们就不会弄乱我的实体？

使用`XmlSerializer`，可以通过[`XmlAttributeOverrides`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)类轻松完成。Json.NET 有类似的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T10:16:28.483

是的，您可以创建自定义合同解析器并自`JsonProperty`定义定义，而无需使用属性。示例如下：

```
class Person { public string First { get; set; } }

class PersonContractResolver : DefaultContractResolver
{
    protected override JsonProperty CreateProperty(
        MemberInfo member, 
        MemberSerialization memberSerialization)
    {
        var property = base.CreateProperty(member, memberSerialization);

        if (member.DeclaringType == typeof(Person) && member.Name == "First")
        {
            property.PropertyName = "FirstName";
        }

        return property;
    }
}

class Program
{
    static void Main(string[] args)
    {
        var result = JsonConvert.SerializeObject(
            new Person { First = "John" },
            new JsonSerializerSettings 
            { 
                ContractResolver = new PersonContractResolver() 
            });

        Console.WriteLine(result);
    }
} 
```

此示例程序的输出如下：

```
// {"FirstName":"John"} 
```

# html - 只有隐藏输入的 HTML 表单会在 FireFox 中创建额外的空白

> ID：11880680
> 
> 赞同：1
> 
> 时间：2012-08-09T09:47:23.407
> 
> 标签：html, forms, whitespace, hidden, extra

我有一个带有两个隐藏输入的简单表单，这会导致 Firefox 中出现额外的空白。这几天我遇到了麻烦。

```
<form name="DemoForm" method="get">
<input type="hidden" name="isposted" value="">
<input type="hidden" value="2" id="SelectedTab" name="SelectedTab"></form> 
```

它在单元格中呈现。之后，有一个包含内容的 div，但在 Firefox 中，该 div 上方有一个额外的空白。仅在 Firefox 中。

我尝试解决这个问题，将表单放在一个带有 display:none 的 div 中，它在 div 中的元素带有“dispay:none”以及我在网上找到的其他东西，但没有任何帮助......

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:03:45.740

我已经使用带有“display:none”的 div 容器解决了这个问题，但从每个元素中删除了“type:hidden”。

最终代码如下所示：

```
<div style="display:none">
    <form  name="DemoForm" method="get">
        <input name="isposted" value="">
        <input value="2" id="SelectedTab" name="SelectedTab">
    </form>
</div> 
```

当然，这可能对某人有用。:- ]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:55:58.580

尝试删除表单中的所有空格和换行符，如下所示：

```
<form name="DemoForm" method="get"><input type="hidden" name="isposted" value=""><input type="hidden" value="2" id="SelectedTab" name="SelectedTab"></form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T12:21:54.637

与 gotqn 类似的想法。

使要隐藏的数据字段成为普通的文本字段。只需通过使其与表单背景相同的背景颜色来“隐藏”输入字段。如果要隐藏字段数据，请使用与背景相同的文本颜色。如果要在其中显示一些消息/数字，请使用对比鲜明的文本颜色。

# node.js - 系统重新启动时 NODE_PATH 更改

> ID：11880681
> 
> 赞同：0
> 
> 时间：2012-08-09T09:47:24.123
> 
> 标签：node.js

我对节点脚本的 node_modules 有疑问。在我的命令行中，我设置了节点路径

```
set NODE_PATH=c:\..\node_modules 
```

当我这样做时这有效

```
require('socket.io'); 
```

但是当我重新启动系统时， require('socket.io'); 将不起作用，它说未找到 socket.io 模块。当我再次通过命令行设置我的 NODE_PATH 时。它会正常工作。那么如何设置我的 NODE_PATH，以便在我重新启动系统时它不会改变。

我使用 Windows

谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:07:56.947

每次重新启动时都会恢复环境变量。要永久添加变量，您需要转到系统属性：

[http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)

# javascript - 合并两个 JavaScript 函数

> ID：11880684
> 
> 赞同：0
> 
> 时间：2012-08-09T09:47:30.617
> 
> 标签：javascript

我正在使用这个功能：

```
function limitWords(id) {
var maxWords=3;
    var d=document.getElementById(id);
    if ( d.value.split(' ').length > maxWords ) {
        t=d.value.substring(0,d.value.lastIndexOf(' '));
        d.value=t.substring(0,t.lastIndexOf(' ')+1);
        alert("You can choose up to 3 sectors");
    } 
} 
```

我这样称呼：

```
<input type="text" name="et_newpost_tags" onkeyup="limitWords(this.id)" 
```

我还想添加将每个单词格式化为标题大小写的功能。我发现了这个功能：

```
function toTitleCase(str)
{
    return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
} 
```

此处：[使用 JavaScript 将字符串转换为标题大小写](https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript)

所以我想知道是否可以将第二个函数合并到第一个函数中，因此该函数会将每个单词的首字母大写（用逗号分隔），而不会影响计算输入字段中逗号数量并放入的函数一个警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:12:26.573

```
function limitWords(id) {
    var maxWords = 3;
    var d = document.getElementById(id);
    if (d.value.split(' ').length > maxWords) {
        t = d.value.substring(0, d.value.lastIndexOf(' '));
        d.value = t.substring(0, t.lastIndexOf(' ') + 1);

        alert("You can choose up to 3 sectors");
    }

    // Ensure title case
    d.value = toTitleCase(d.value);
}

function toTitleCase(str) {
    return str.replace(/\w\S*/g, function(txt) {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
}​
​ 
```

这是[一个工作小提琴](http://jsfiddle.net/kBEwL/1)。

**注意：**我没有更改您现有`limitWords`功能的功能，假设它按您预期的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:04:03.970

```
function limitWords(id) {
var maxWords = 3;
var d = document.getElementById(id);
if (d.value.split(' ').length > maxWords) { // Swap ' ' for ',' if you want comma's
    t = d.value.substring(0, d.value.lastIndexOf(' '));
    d.value = t.substring(0, t.lastIndexOf(' ') + 1);

    alert("You can choose up to 3 sectors");
}
// Ensure title case
d.value = toTitleCase(d.value);
}

function toTitleCase(str) {
    return str.replace(/\w\S*/g, function(txt) {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
}​ 
```

基本上詹姆斯希尔斯回答，但在正确的地方使用“toTitleCase”调用。

# php - 重定向输出时无法终止子进程

> ID：11880685
> 
> 赞同：1
> 
> 时间：2012-08-09T09:47:32.320
> 
> 标签：php, linux, process, sigkill

我有一个 PHP 脚本来运行具有执行时间限制和 cpu 时间限制的命令。

*限制.php*：

```
<?php
declare(ticks = 1);
ini_set('display_errors','on');
error_reporting(E_ALL);

if ($argc<2) die("Usage: php ".__FILE__." \"your command here\" [execute_time_limit = 600] [cpu_time_limit = 120]\n");
$cmd = $argv[1];
$tl = isset($argv[2]) ? intval($argv[2]) : 0;
$cl = isset($argv[3]) ? intval($argv[3]) : 0;
if (!$cmd) die("INCORRECT_CMD");
if ($tl<=0) $tl = 600;
if ($cl<=0) $cl = 120;

function sigalrm_handler($signo) {die('EXECUTE_ENDED');}//normal ended or killed by ulimit

$pid = pcntl_fork();
if (-1 == $pid) {
    die('FORK_FAILED');
} elseif ($pid == 0) {
    exec("ulimit -t $cl && $cmd");
    posix_kill(posix_getppid(), SIGALRM);
} else {
    pcntl_signal(SIGALRM, 'sigalrm_handler');
    sleep($tl);
    posix_kill($pid, SIGKILL);
    die("TIMEOUT_KILLED : $pid");
} 
```

另一个用于测试的 PHP 脚本。

*测试.php*

```
<?php
$i=0;
echo getmypid();
while(1) {
    $i++;
    file_put_contents("/tmp/x.log",$i."\n",FILE_APPEND);
    echo "*";
    sleep(1);
} 
```

运行此命令：

*php limit.php "php test.php" 10*

使用“ps -ef|grep ph[p]”，你可以找到我们预期的被分叉和杀死的进程。

但是当我尝试这个命令时，

*php limit.php "php test.php > /tmp/y.log" 10*

子进程不能像我们预期的那样被杀死。看：

开始：

================

```
alix     28979 23528  0 17:32 pts/0    00:00:00 php limit.php php test.php > /tmp/y.log 10
alix     28980 28979  0 17:32 pts/0    00:00:00 php limit.php php test.php > /tmp/y.log 10
alix     28981 28980  0 17:32 pts/0    00:00:00 sh -c ulimit -t 120 && php test.php > /tmp/y.log
alix     28982 28981  0 17:32 pts/0    00:00:00 php test.php 
```

10秒后：

==================

```
alix     28981     1  0 17:32 pts/0    00:00:00 sh -c ulimit -t 120 && php test.php > /tmp/y.log
alix     28982 28981  0 17:32 pts/0    00:00:00 php test.php 
```

PID 28979 fork 28980，然后函数 exec 创建了 2 个 PID 为 28981 和 28982 的子进程。10 秒后，28979 向 28980 发送 SIGKILL，但 28981 和 28982 没有受到影响（如果没有像 "> /tmp 这样的输出重定向，它们将被杀死/y.log")。

我的服务器是：Linux s4 2.6.18-308.1.1.el5 #1 SMP Wed Mar 7 04:16:51 EST 2012 x86_64 x86_64 x86_64 GNU/Linux With PHP 5.3.9 (cli) (built: Feb 15 2012 11: 54:46)

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:23:18.907

原因是`PIPE`。检查我的另一个问题的答案：

[标准输出影响 SIGKILL？](https://stackoverflow.com/questions/11894729/standard-output-impact-sigkill)

# ios - 如何根据String调整UILabel宽度

> ID：11880690
> 
> 赞同：1
> 
> 时间：2012-08-09T09:47:48.523
> 
> 标签：ios, uilabel

我有一个`UITableView`, 填充自定义单元格。自定义单元格有许多标签。一个标签从数据库中获取不同大小的字符串。我想要的是下一个标签在第一个标签之后（在第一个标签字符串的末尾）开始。我使用了这段代码：

```
cell.Manufactlbl.adjustsFontSizeToFitWidth=YES;
CGSize lLabelSIze = [coffeeObj.price sizeWithFont: cell.Manufactlbl.fontforWidth:cell.Manufactlbl.frame.size.width lineBreakMode:cell.Manufactlbl.lineBreakMode];
cell.Manufactlbl.frame = CGRectMake(cell.Manufactlbl.frame.origin.x, cell.Manufactlbl.frame.origin.y, cell.Manufactlbl.frame.size.width, lLabelSIze.height);
cell.Manufactlbl.font=[UIFont systemFontOfSize:12];
cell.Manufactlbl.text=coffeeObj.price;
cell.Typelbl.frame=CGRectMake(cell.Manufactlbl.frame.origin.x + cell.Manufactlbl.frame.size.width, cell.Typelbl.frame.origin.y, cell.Typelbl.frame.size.width, cell.Typelbl.frame.size.height);
cell.Typelbl.font=[UIFont systemFontOfSize:12];
cell.Typelbl.text=coffeeObj.instrument;` 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:26:12.903

尝试这个。

```
CGSize size = [@"Your string" 
               sizeWithFont:[UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:22] 
               constrainedToSize:CGSizeMake(500, CGFLOAT_MAX)];

 _Lable.frame = CGRectMake(05,05, 50, size.height); 
```

希望对你有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:20:59.817

Try this code :

```
NSString *text1 = @"example text1 ";

CGSize maximumLabelSize = CGSizeMake(236,9999);

CGSize expectedLabelSize = [text1 sizeWithFont:[UIFont systemFontOfSize:12]
                             constrainedToSize:maximumLabelSize 
                                 lineBreakMode:UILineBreakModeCharacterWrap];

UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(50 ,0, expectedLabelSize.width, expectedLabelSize.height)]; 
label1.font = [UIFont systemFontOfSize:12];
label1.text = text1;
NSString *text2 = @"example Text2";

expectedLabelSize = [text2 sizeWithFont:[UIFont systemFontOfSize:12]
                      constrainedToSize:maximumLabelSize 
                          lineBreakMode:UILineBreakModeCharacterWrap];

UILabel *label2 = [[UILabel alloc]initWithFrame:CGRectMake(label1.frame.origin.x + label1.frame.size.width ,0, expectedLabelSize.width, expectedLabelSize.height)]; 

label2.font = [UIFont systemFontOfSize:12];
label2.text = text2;

[self.view addSubview:label1];
[self.view addSubview:label2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:58:51.573

您可以执行以下操作：调整每个标签的大小以适合（使标签刚好适合文本），然后将每个标签的框架设置为依赖于其他标签。例如：

```
 [labelOne sizeToFit];
    [labelTwo sizeToFit];
    labelTwo.frame = CGRectMake(CGRectGetMaxX(labelOne.frame), labelTwo.origin.y, labelTwo.frame.size.width, labelTwo.frame.size.height); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:59:01.467

google NS(Attributed)String+Geometrics 它解决了它

# .htaccess - RewriteRule 导致另一个路径（子目录）发生故障，css/imgs/js

> ID：11880691
> 
> 赞同：0
> 
> 时间：2012-08-09T09:47:50.147
> 
> 标签：.htaccess, url-rewriting, relative-path, absolute-path

就像标题一样，这条规则：

```
RewriteRule pagtwo/pic/(.*) index.php?pic=$1 [PT,QSA] 
```

规则有效，但不是子目录包含的文件，例如

```
<link type="text/css" rel="stylesheet" href="css/base.css" media="all">
<img src="imgs/image.jpg"> 
```

继续

目录是 css、imgs 和 js，为什么它们没有正确包含？我必须插入该目录的绝对路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:33:45.523

尝试将此添加到您的页眉：

```
<base href="/"> 
```

因为您使用的是相对路径，`/`所以在解析相对 from 时通常会相对解析的内容不会起作用`/pagtwo/pic/`。

# wpf - 编译时为 WinRT Metro 应用程序引发 DEP0500 错误

> ID：11880693
> 
> 赞同：2
> 
> 时间：2012-08-09T09:48:03.657
> 
> 标签：wpf, deployment, microsoft-metro, winrt-xaml

当我编译时，我经常得到以下错误：

错误 28
错误：DEP0500：无法删除文件夹“C:\Code\Cloud\SolutionFolder\ProjectFolder\bin\Debug\AppX”。拒绝访问路径“C:\Code\Cloud\SolutionFolder\ProjectFolder\bin\Debug\AppX\ControlsProject.Controls\Themes”。

如果我关闭 Visual Studio (2012 RC)，我可以删除文件夹并重新编译，所以我假设 VS 出于某种原因锁定了文件。有没有其他人经历过这个？有没有人找到解决办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:24:26.487

[这](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/41f06523-5b36-4b22-86b3-32a4b366e732)就是您可能正在寻找的内容。似乎您有两个选择 - 重新创建解决方案文件或使用 Process Explorer 关闭锁定路径的现有句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:18:11.333

我正在使用 LockHunter 处理这个问题。

1.  [在http://lockhunter.com/download.htm](http://lockhunter.com/download.htm)下载 LockHunter 。
2.  在桌面上创建 AppX 文件夹的快捷方式。
3.  每当 AppX 在 Visual Studio 中锁定时，打开 AppX 的快捷方式。
4.  右键单击 AppX 并选择“锁定此文件夹的内容”。这将打开 LockHunter。
5.  在 LockHunter 中单击“解锁它！”。

解锁 AppX 后返回 Visual Studio 并编译/运行项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:50:14.717

这是另一个对我有用的选项 - 重置您的 VS 设置。

[http://socialeboladev.wordpress.com/2013/02/21/dep0500-and-dep1000-errors-when-deploying-windows-store-apps-from-vs/](http://socialeboladev.wordpress.com/2013/02/21/dep0500-and-dep1000-errors-when-deploying-windows-store-apps-from-vs/)

# windows - raw_interfaces_only 用法？

> ID：11880696
> 
> 赞同：2
> 
> 时间：2012-08-09T09:48:07.017
> 
> 标签：windows, visual-studio, visual-c++, com

有人可以解释一下 raw_interfaces_only 实际上做了什么吗？

例如，

```
#import <xyz.dll> raw_interfaces_only 
```

我无法理解[msdn 站点中提供的](http://msdn.microsoft.com/en-us/library/298h7faa%28v=vs.80%29.aspx)单行解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:04:16.230

[MSDN 说](http://msdn.microsoft.com/en-us/library/5ds25e53)：

> 禁止生成错误处理包装函数和使用这些包装函数的属性 (C++) 声明。

和

> raw_interfaces_only 属性还会导致删除用于命名非属性函数的默认前缀。通常，前缀是 raw_。如果指定了此属性，则函数名称直接来自类型库。
> 
> 此属性允许您仅公开类型库的低级内容。

您还可以使用和不使用此属性进行构建，并比较生成`.tlh`的文件以查看差异：

```
#import <imapi2.dll> // --> imapi2-without.tlh
#import <imapi2.dll> raw_interfaces_only // --> imapi2-with.tlh 
```

![在此处输入图像描述](../Images/d47aad3abec4692f27fe1ef59f0f1571.png)

该`raw_interfaces_only`属性导致生成较少的包装器代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:06:46.650

好吧，看看谷歌的第一个结果，[惰性链接](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.71%29.aspx)，它似乎是一个“属性”

形成该页面：

```
#import  "filename" [attributes]
#import  <filename> [attributes] 
```

然后我们可以自己阅读[raw_interfaces_only](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.71%29.aspx#_predir_raw_interfaces_only)属性的作用：

> raw_interfaces_only 属性禁止生成错误处理包装函数和使用这些包装函数的 __declspec(property) 声明。

这听起来像是一个简单的案例，它有助于减少导入库带来的混乱，减少包装代码和为您完成的错误检查。

# iframe - 可用性：为什么不推荐使用 iframe 并排显示 PDF？

> ID：11880704
> 
> 赞同：1
> 
> 时间：2012-08-09T09:48:30.410
> 
> 标签：iframe, usability

我的利益相关者希望用户能够并排比较两个 PDF。他们不满足于用户必须在 PDF 之间轻弹（正常）。相反，他们希望将它们嵌入到网页中，彼此相邻。他们还希望在第二个 PDF 上方有一个下拉菜单，以允许他们将 PDF 更改为另一个 PDF。我在下面添加了一张图片，让您了解它的外观。我希望你能看到它：

![Pdfs并排](../Images/4c747ca5f15752c9d17f2edba4a2022e.png)

我使用 iframe 和一些用于菜单的 javascript 构建了一个快速而肮脏的演示（见上面的屏幕截图）。这样做的方式是用户单击网站上的“比较 PDF”按钮，然后在新窗口中打开一个单独的屏幕，其中仅包含两个 PDF 和切换 PDF 的菜单（根据上图）。

这里的问题是，虽然它在技术上是可以实现的，但它看起来如此粗鲁和错误！但我需要能够用逻辑和理性来证明这一点。我的直觉是否正确，如果是这样：

*   不推荐这种方法的原因是什么？（例如，如果我们在我们的网站上放这样的东西会损害我们的声誉吗？！为什么？）
*   你有什么替代建议吗？

或者这是一个完美的解决方案？！

非常感谢，

凯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T19:11:23.990

凯蒂，你的问题是“为什么不推荐这样做？”

*   因为计算机比人更擅长比较数据。
*   这项任务可能很累人、效率低且不准确。
*   它本质上是一个屏幕-房地产-管理任务，并没有通过总结、解释、转换、澄清、创新或启发来增加价值。
*   它将所有工作都放在了用户的肩上。
*   它违反了“不要让我思考”的原则。

这可能是一项基准测试任务，您可能不需要这些 PDF 中的每一行数据来提供创新和有价值的东西。

我挑战你与你的利益相关者交谈，并集思广益地结合或总结关键数据的创新方法。这些是信用报告吗？成绩？医学考试成绩？电话费？法律合同？有很多很棒的模式可以用来提取一些值并将它们相互比较。想想表格、图形或图表。看看 TurboTax 在你完成报税后对税收数据做了什么——这是*你*支付的，现在看看你的收入的普通人赚取、扣除和支付了什么。一个简单的表，有两列，你和其他人。他们在看什么数据，通过并排比较这两个文档他们会学到什么？

总结、启发、澄清和消除噪音。切入他们想看到的核心，然后向他们展示。

给你最好的！

# php - php/mysql 显示来自 table1 和 table2 的列

> ID：11880705
> 
> 赞同：0
> 
> 时间：2012-08-09T09:48:30.153
> 
> 标签：php, mysql, multiple-columns

有人可以告诉我如何保存两个数据库表中的字段吗？

这适用于一张桌子：

```
$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");

$result = mysql_query("SHOW COLUMNS FROM ".$table." WHERE Field NOT IN
('ID','Key','Text');");

$i = 0;
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        $csv_output .= $row['Field']."; ";
        $i++;
    }
}
$csv_output .= "\n";` 
```

我需要来自两个不同表的字段。我在同一台机器上有两个数据库。表中的字段名称不同。

这**不起作用**：

```
$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");
mysql_select_db($db2) or die("Can not connect.");

$result = mysql_query("SHOW COLUMNS FROM ".$table." , ".$table2."  WHERE Field NOT IN 
('ID','Key','Text');");

$i = 0;
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        $csv_output .= $row['Field']."; ";
        $i++;
    }
}
$csv_output .= "\n"; 
```

字段“ID”、“Key”和“Text”仅存在于 DB1 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:37:41.643

您遇到的问题在于选择数据库。选择第一个 DB 后，您立即选择第二个 DB，它将覆盖前一个 DB，因此所选 DB 是最后的第二个 DB。
一种解决方案是选择第一个数据库，获取您需要的列名，将它们保存在您`$csv_output`的`$csv_output`.
Usman提出的解决方案也不错，方法如下

```
USE information_schema;  -- select the correct DB
SELECT column_name FROM columns WHERE table_name IN ('table1', 'table2'); 
```

希望有帮助！

**更新**

```
$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());

// get the column name from the first DB
mysql_select_db($db1, $link) or die("Can not connect to DB1.");
$result = mysql_query("SHOW COLUMNS FROM ".$table." WHERE Field NOT IN
('ID','Key','Text')");    
$i = 0;
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        $csv_output .= $row['Field']."; ";
        $i++;
    }
}

// get the column names from the second DB
mysql_select_db($db2, $link) or die("Can not connect to DB2.");
$result = mysql_query("SHOW COLUMNS FROM ".$table." WHERE 1");
$i = 0;
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        $csv_output .= $row['Field']."; ";
        $i++;
    }
}
$csv_output .= "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:01:16.080

将您的查询更改为：

```
$result = mysql_query("SELECT column_name FROM information_schema WHERE table_name IN ('".$table."','".$table2."' WHERE column_name NOT IN ('ID','Key','Text');"); 
```

# sql-server-2008-r2 - 选择最晚日期

> ID：11880706
> 
> 赞同：0
> 
> 时间：2012-08-09T09:48:43.023
> 
> 标签：sql-server-2008-r2

```
 SELECT
    distinct  

        HRM_Employee.EmployeeId EmployeeXId,
      ([HRM_Employee].[FirstName] +' '+ISNULL([HRM_Employee].[MiddleName],' ')+' '+ISNULL([HRM_Employee].[LastName],' ')) AS FirstName     
     -- ,[FirstName]
          ,[HRM_Employee].[MiddleName]
          ,[HRM_Employee].[LastName]
          ,[HRM_Employee].[Code]          
          ,[HRM_Employee].[UserName]
          ,[HRM_Employee].[Password]
          ,[HRM_Employee].[DateOfBirth]
          ,[HRM_Employee].[OriginalBirthDate]
          ,[HRM_Employee].[Gender]
          ,[HRM_Employee].[BloodGroup]
          ,[HRM_Employee].[Height]
          ,[HRM_Employee].[MaritalStatus]
          ,[HRM_Employee].[DateOfMarriage]
          ,[HRM_Employee].[IdentificationMark1]
          ,[HRM_Employee].[IdentificationMark2]
          ,[HRM_Employee].[Religion]
          ,(SELECT [A].[FirstName] +' '+  [A].[MiddleName] +' '+ [A].[LastName] 
              FROM [dbo].[HRM_Employee] [A] WHERE [A].EmployeeId = [HRM_Transfer].[ReportingOfficerXId]  
           ) [PersonInCharge] 
          ,[HRM_Department].[Name] [DepartmentName]
          ,[HRM_Branch].[Name] [BranchName]
          ,[HRM_Division].[Name] [DivisionName]
          ,[HRM_Designation].[Name] [DesignationName]
          ,HRM_Transfer.TransferDate
    from HRM_Employee
    LEFT join [dbo].[HRM_Division]
            ON [HRM_Employee].DivisionXId  = [HRM_Division].DivisionId
            JOIN [dbo].[HRM_Designation] 
            ON [HRM_Employee].DesignationXId = [HRM_Designation].DesignationId
            JOIN [HRM_Department] 
            ON [HRM_Employee].[DepartmentXId] = [HRM_Department].[DepartmentId] 
            JOIN [HRM_Branch] 
            ON [HRM_Employee].[BranchXId] = [HRM_Branch].[BranchId] 
            INNER JOIN HRM_Transfer
            ON HRM_Transfer.EmployeeXId=HRM_Employee.EmployeeId
    WHERE 
        Convert(varchar(11),HRM_Transfer.TransferDate,103) <=Convert(varchar(11), getdate(),103)
END 
```

当我执行此操作时，我得到如下输出

```
EmployeeXId    FirstName               TransferDate
34             Ambarish   V               2012-08-09 00:00:00.000
54             Anil  N P                      2012-08-09 00:00:00.000
55         Ann  Rose Abraham              2012-08-08 00:00:00.000
55         Ann  Rose Abraham              2012-08-09 00:00:00.000
74             Anees  M S                     2012-08-09 00:00:00.000 
```

从这里我想只显示最新传输日期的数据。那是在 EmployeeId 55 中，我只需要显示传输日期为 2012-08-09 00:00:00.000 的数据。我想在上面的 SP 中进行什么修改以获得所需的答案？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:56:27.153

按 EmployeeXId 分组并选择 MAX(TransferDate)。

# c++ - 如何包装 VB 代码和 C++ 代码并将其作为 3 个 COM 接口提供给第 3 方？

> ID：11880707
> 
> 赞同：1
> 
> 时间：2012-08-09T09:48:48.380
> 
> 标签：c++, com, vb6

我不熟悉 VB 代码（C++ 程序员），但现在我需要向第 3 方提供 COM 接口，但现有功能在一些古老的 VB 代码中。

所以我的问题是是否可以将它们包装到 COM 接口中？如果有怎么办？

我基本上需要为第 3 方提供 3 个包装 COM 接口，一个来自旧的 VB 代码，另外两个来自旧的 C++ 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:57:13.153

您需要将代码放入 ActiveX DLL 项目中的类中。然后您可以创建公共类并调用您需要的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:03:02.437

AFAIK在 VB6 中通过 COM 公开类比在 C++ 中容易得多*。*

你需要创建一个 ActiveX DLL，就像 Deanna 说的那样。有关详细的分步指南和文档链接，请参阅[此问题](https://stackoverflow.com/questions/3477265/com-dll-in-vb6)的答案。

# regex - 是否有一个正则表达式来匹配一个数字范围，并确保它是一个有效的范围？

> ID：11880709
> 
> 赞同：0
> 
> 时间：2012-08-09T09:48:50.753
> 
> 标签：regex

是否有正则表达式来匹配数字范围，例如 1 - 20？

如果是这样，是否可以确保左值始终小于右值？有一个范围是没有意义的，例如 20 - 1 或 15 - 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:58:37.317

正如评论员所指出的：如果这在正则表达式中是可能的，那将非常困难。没有直接支持在正则表达式中执行算术比较（包括大于）。

最好使用正则表达式来验证格式并捕获这两个数字。如果正则表达式匹配，则使用宿主语言将捕获转换为数字并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T07:00:08.933

是的，你可以这么做。您可以确保给定数字小于同一文本中的另一个数字。

此正则表达式测试第一个数字是否小于下一个数字： 格式：XXX,YYY

XXX < YYY：

```
\b(?:[1-9](?<open>\B\d)+\d*,(?<close-open>\d)+(?(open)(?!))\b
|
(?<prefix>\d*)(?:(?<g0>0)|(?<g1>1)|(?<g2>2)|(?<g3>3)|(?<g4>4)|(?<g5>5)|(?<g6>6)|(?<g7>7)|(?<g8>8)|(?<g9>9))(?<suffix>\d)*,\k<prefix>(?(g0)(?!)|(?(g1)0|(?(g2)[01]|(?(g3)[0-2]|(?(g4)[0-3]|(?(g5)[0-4]|(?(g6)[0-5]|(?(g7)[0-6]|(?(g8)[0-7]|(?(g9)[0-8]))))))))))(?<suffix2-suffix>\d)*(?(suffix)(?!)))\b 
```

XXX > YYY：

```
(?<open>\B\d|\b[1-9])+,[1-9](?<close-open>\d)+(?(open)(?!))\d*\b
|
(?<prefix>\d*)(?:(?<g0>0)|(?<g1>1)|(?<g2>2)|(?<g3>3)|(?<g4>4)|(?<g5>5)|(?<g6>6)|(?<g7>7)|(?<g8>8)|(?<g9>9))(?<suffix>\d)*,\k<prefix>(?(g0)[1-9]|(?(g1)[2-9]|(?(g2)[3-9]|(?(g3)[4-9]|(?(g4)[5-9]|(?(g5)[6-9]|(?(g6)[7-9]|(?(g7)[89]|(?(g8)9|(?(g9)(?!)))))))))))(?<suffix2-suffix>\d)*(?(suffix)(?!)) 
```

如果你想使用 - 作为分隔符，你只需要在这个正则表达式中用 - 替换 , 。此正则表达式是使用 C# 正则表达式创建和测试的。

# ios - 如何使用 Facebook iOS SDK 在一张照片中标记多个朋友

> ID：11880713
> 
> 赞同：1
> 
> 时间：2012-08-09T09:48:59.583
> 
> 标签：ios, facebook, sdk, tags

从 Facebook 开发人员文档中，我发现“您可以使用两种方法指定要标记的用户：在 URL 路径中为`PHOTO_ID/tags/USER_ID`，或在 URL 参数中为`PHOTO_ID/tags?to=USER_ID`。要一次添加多个标签，您可以指定包含数组的 tags 属性像这样的标签`PHOTO_ID/tags?tags=[{"id":"1234"}, {"id":"12345"}]`。目前，您无法使用此 API 在照片中标记页面。

这是我的代码。

```
NSString *photoID = @"267766096670674";    

[self.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/tags?tags=[{\"id\":\"%@\"},{\"id\":\"%@\"}]?access_token=%@", photoID, @"100001965796318", @"100004119154586", self.facebook.accessToken]
                          andParams:nil 
                      andHttpMethod:@"POST" andDelegate:self]; 
```

我收到如下错误消息：错误域=NSURLErrorDomain Code=-1000“错误 URL”UserInfo=0x3f55a0 {NSUnderlyingError=0x3f5c10“错误 URL”，NSLocalizedDescription=错误 URL}”

由于文档，标记一个朋友是可以的。但是为什么我不能同时标记几个朋友呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:07:03.370

非常感谢。它解决了使用 Facebook API Explorer 时的问题。但我将参数复制到 XCode，如下所示

```
 NSString *testString = @"267766096670674/tags?tags=[{\"tag_uid\":\"100001965796318\"},{\"tag_uid\":\"100004119154586\"}]&access_token=BAAC3gS8qGCUBADoG8Rvh1jAfWJQmAW6BenV6KXkcQThKquvav7v1eSZB4MxHefH3hwt6JHd44Rz9FWhXVCNZAAmUGzVz6OcaKvxUZA0tCDlKU9Wj7o0hQo8eB7GgdoXaWrkx79oRzqKyjF7O9cX";
NSLog(@"%@", testString);
[self.facebook requestWithGraphPath:testString
                          andParams:nil 
                      andHttpMethod:@"POST" andDelegate:self]; 
```

它不起作用。但它适用于 Graph API Explorer Tool，我不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:44:33.950

api 中的键应该是 'tag_uid' 而不是 'to'。因此 API 应该是：

PHOTO_ID/tags?tags=[{"tag_uid":"1111111111111"},{"tag_uid":"222222222"}]

# c# - CheckBox, IsChecked == false 不起作用

> ID：11880714
> 
> 赞同：2
> 
> 时间：2012-08-09T09:49:00.503
> 
> 标签：c#, wpf

```
private void checkBox1_Checked(object sender, RoutedEventArgs e)
{
    if (checkBox1.IsChecked == false)
    {
        grid1.Visibility = System.Windows.Visibility.Hidden;
    }

    if (checkBox1.IsChecked == true)
    {
        grid1.Visibility = Visibility;
    }

} 
```

为什么 `grid1.Visibility = System.Windows.Visibility.Hidden;`不工作，网格没有隐藏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T09:53:10.593

您正在处理该`Checked`事件，该事件仅在 CheckBox 被选中时发生，而不是在未选中时发生。要解决此问题，请同时处理[`Unchecked`事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.unchecked)：

```
private void checkBox1_Checked(object sender, RoutedEventArgs e) 
{ 
    grid1.Visibility = System.Windows.Visibility.Visible; 
} 

private void checkBox1_Unchecked(object sender, RoutedEventArgs e) 
{ 
    grid1.Visibility = System.Windows.Visibility.Hidden; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T09:53:24.980

当复选框不再被选中时，使用[Unchecked事件得到通知。](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.unchecked)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:04:33.473

试试这个，你必须使用**折叠**

```
private void checkBox1_Checked(object sender, RoutedEventArgs e)
{
        grid1.Visibility = System.Windows.Visibility.Visible;
}

private void checkBox1_UnChecked(object sender, RoutedEventArgs e)
{

        grid1.Visibility = System.Windows.Visibility.Collapsed;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:04:34.240

试试这个代码

```
protected void checkBox1_Unchecked(object sender, RoutedEventArgs e)
 {
     grid1.Visibility = System.Windows.Visibility.Hidden;
 }

protected void checkBox1_Checked(object sender, RoutedEventArgs e)
  {
     grid1.Visibility = System.Windows.Visibility.Visible; 
  } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T09:53:23.760

```
 private void checkBox1_CheckStateChanged(object sender, RoutedEventArgs e)
    {
        if (checkBox1.Checked)
        {
            grid1.Visibility = System.Windows.Visibility.Hidden;
        }else
        {
            grid1.Visibility = System.Windows.Visibility.Visible;
        }

    } 
```

没有这样的属性 IsChecked。

# json - 我可以使用 Lift 的 FieldSerializer 更改序列化字段吗？

> ID：11880717
> 
> 赞同：1
> 
> 时间：2012-08-09T09:49:03.227
> 
> 标签：json, scala, lift

在使用 Lift 的 json 库对对象中的所有字符串进行序列化时，我正在尝试对它们进行 html 转义。我想我可以通过将转义（部分）函数传递给对象的 FieldSerializer 来做到这一点，但这似乎*将*字段添加到 json-object - 而不是*替换*它们。您可以通过运行以下简单示例来了解我的意思，并注意它 `{"y":"test","x":"test"}`在我想要的时候输出`{"y":"test"}`：

```
import net.liftweb.json.Serialization
import net.liftweb.json.FieldSerializer
import net.liftweb.json.FieldSerializer._
import net.liftweb.json.DefaultFormats
case class Simple(x: String)
implicit val formats = DefaultFormats + 
    FieldSerializer[Simple](renameTo("x","y"),renameFrom("y", "x"))
Serialization.write(Simple("test")) 
```

有没有办法告诉 FieldSerializer 替换与我的部分函数匹配的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:53:51.990

尝试 CoustomeSerializer：

```
 implicit val formats = DefaultFormats +
    new CustomSerializer[Simple](ser => ( {
      case JObject(JField("y", JString(x)) :: Nil) => Simple(x)
    }, {
      case simple: Simple => JObject(JField("y", JString(simple.x)) :: Nil)
    })) 
```

*ps.我在 Lift 的 google 群组上问过这个问题，得到了这个答案，结帐[https://groups.google.com/d/msg/liftweb/ShRrGNrsu6Y/sNw4JGdSU6sJ](https://groups.google.com/d/msg/liftweb/ShRrGNrsu6Y/sNw4JGdSU6sJ)*

# java - 如何为 Microsoft CRM 4.0 创建安卓客户端？

> ID：11880730
> 
> 赞同：-2
> 
> 时间：2012-08-09T09:49:44.543
> 
> 标签：java, android, crm

我想为 CRM 创建简单的 android 客户端。我想连接到 CRM 并从中下载一些数据。我的问题是：

*   有教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:38:15.080

编辑：之前忘了提，微软显然正在开发官方的 CRM 移动应用程序——包括 Android。显然它应该在 2012 年第四季度着陆。[请参阅发布指南。](http://crmpublish.blob.core.windows.net/docs/ReleasePreviewGuide.pdf)

Crm 有一个可用于查询数据的 web 服务 api。

您可能想阅读：[开发自定义解决方案](http://msdn.microsoft.com/en-us/library/bb928396)

然后 Web 服务 Crm 公开：

1.  [CRM服务](http://msdn.microsoft.com/en-us/library/cc151038)
2.  [CRM发现服务](http://msdn.microsoft.com/en-us/library/cc151013)
3.  [元数据服务](http://msdn.microsoft.com/en-us/library/cc151047)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:51:04.757

我认为没有，但如果 Microsoft CRM 提供网络服务来访问数据，您就可以使用它们。

# android - 带有线性布局的 Android 网格

> ID：11880732
> 
> 赞同：0
> 
> 时间：2012-08-09T09:49:51.877
> 
> 标签：android, xml, eclipse, android-linearlayout

我正在尝试用一些线性布局构建一个网格。不幸的是，“网格”内的按钮填满了所有空间，“网格”的大小并不总是相同。

```
<ScrollView 
 xmlns:tools="http://schemas.android.com/tools"
 xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_height="wrap_content"
  android:id="@+id/scrollView1"
  android:layout_width="fill_parent"
  android:layout_weight="1"> 
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:gravity="center_horizontal"
  android:orientation="vertical" >

  <ImageView
  android:id="@+id/imageView1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:src="@drawable/banner" 
  android:background="#80000000"
  android:contentDescription="@string/about"/>

  <LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
   <TextView
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_weight="1"
   android:layout_marginTop="15dp"
   android:gravity="center_horizontal"
   android:text="@string/modi1"
   tools:context=".MenuActivity" />
   <TextView
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_weight="1"
   android:layout_marginTop="15dp"
   android:gravity="center_horizontal"
   android:text="@string/modi2"
   tools:context=".MenuActivity" />
   </LinearLayout>

   <LinearLayout     
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="@string/szen_diagramm" />
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"          
    android:text="@string/szen_countdown" />
   </LinearLayout>
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="@string/szen_diagramm" />
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"          
    android:text="@string/szen_countdown" />
   </LinearLayout>
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="@string/szen_diagramm" />
    <Button
    android:layout_marginTop="10dp"
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"          
    android:text="@string/szen_countdown" />
   </LinearLayout>
</LinearLayout>
</ScrollView> 
```

它应该看起来像 [这样](https://www.dropbox.com/s/23nzqf3m939bq0j/Screenshot.png) ，按钮居中，并且它们需要的大小与里面的文本。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:38:36.047

试试这个。

```
<ScrollView xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TableRow>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#80000000"
            android:contentDescription="ImageView"
            android:layout_span="2"
            android:src="@drawable/banner" />
    </TableRow>

    <TableRow>

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            android:layout_weight="2"
            android:gravity="center_horizontal"
            android:text="modi1" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            android:layout_weight="2"
            android:gravity="center_horizontal"
            android:text="modi2" />
    </TableRow>

    <TableRow>

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_diagramm" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_countdown" />
    </TableRow>

    <TableRow>

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_diagramm" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_countdown" />
    </TableRow>

    <TableRow>

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_diagramm" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:layout_weight="2"
            android:gravity="center"
            android:text="szen_countdown" />
    </TableRow>
</TableLayout> 
```

![在此处输入图像描述](../Images/7f307803e2779407433c712b07543915.png) 这就是它向我展示的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:56:13.260

删除 android:layout_weight="1" 以避免按钮填满所有空间。

您应该尝试使用 TableLayout 和几个 TableRow 来替换包含按钮的 LinearLayouts，从而创建格式良好的网格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:07:44.577

我有一个类似的问题，解决了在 TableRow 中插入一个 LinearLayout。查看发布的 xml 代码并验证它是否符合您的要求。

```
<TableRow
    android:layout_gravity="fill_horizontal"
    android:paddingTop="@dimen/table_row_padding_top" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:gravity="center_horizontal"
            android:orientation="vertical" >

            <ImageButton
                android:contentDescription="@string/str_phone"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:background="@drawable/icon_phone" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="center_horizontal"
                android:text="@string/str_phone"
                android:textColor="#000000"
                android:textSize="12sp" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:gravity="center_horizontal"
            android:orientation="vertical" >

            <ImageButton
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:background="@drawable/icon_car"
                android:contentDescription="@string/str_car" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:layout_gravity="center_horizontal"
                android:text="@string/str_car"
                android:textColor="#000000"
                android:textSize="12sp" />
        </LinearLayout>

</TableRow> 
```

# iphone - 多语言IOS应用

> ID：11880736
> 
> 赞同：1
> 
> 时间：2012-08-09T09:50:13.567
> 
> 标签：iphone, ios, ios4, multilingual

我计划创建一个多语言 IOS 应用程序。我计划支持来自服务器的语言（内容）支持。我如何在我的应用程序中声明它支持所有语言。问题是本机控件，例如电子邮件屏幕和打印屏幕。那么如何声明应用程序支持所有语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:41:01.813

您可以将属性“本地化资源可以混合”添加到应用程序的 info.plist 文件中，并将值设置为 YES。在尝试将 MFMailComposeView 本地化为丹麦语时，这对我有用。

但正如 Stackmonster 所提到的，Apple 的指导方针是遵循手机上设置的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:56:19.843

iOS 本机控件将使用本地化上下文作为设备的区域设置。你不必担心它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:49:56.813

iTunes App Store 中显示的“支持”语言基于您添加的语言资源文件。我想您可以为所有语言添加资源文件，而无需在其中添加任何内容。您可以从本地化部分的项目信息设置中添加这些内容。这将导致应用程序在商店中显示它支持这些语言。确保您确实在服务器上支持这些语言，否则如果 Apple 对其中一种受支持的语言进行测试，Apple 可能会拒绝该应用程序（我不知道他们是否这样做。）

然后您需要将设备语言代码发送到您的服务器并返回正确的字符串。这就是我们为 AskingPoint App Analytics Ratings Booster 所做的。我们将设备语言字符串报告为我们收集的设备指标的一部分，然后当向用户显示评级助推器时，按钮和消息从服务器端填充适当的评级提示和来自服务器的按钮文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T17:06:49.800

第1步 ：

单击项目-> 信息-> 向下滚动-> 本地化-> 单击“+”并添加所需的语言-> 根据需要检查-> 完成。

第2步 ：

单击“支持文件”->右键单击->新建文件->在左侧列表中选择资源->选择“字符串文件”->下一步->将其命名为“可本地化”->创建

第 3 步：

单击新创建的文件->转到实用程序->文件检查器->单击“本地化..”->检查所有语言

第4步 ：

open Localizable.strings(English) write "help" = "I can't help you";

这里“帮助”是一个关键“我不能帮助你”是一个值。您可以根据自己的意愿更改它们。

打开 Localizable.strings(Franch) 或您设置的语言。相应地写，您可以将“我无法帮助您”翻译成任何所说的语言。

第 5 步：

```
// for test
NSString *str = NSLocalizedString(@"help", Nil);
NSLog(@"%@",str); 
```

我们已经做到了。你可以检查一下。

现在，要测试设备的 goto 设置 -> 通用 -> 国际 -> 语言 -> 选择所述语言或您选择的语言（语言有限）。运行您的应用程序。希望对您有所帮助。它帮助我。

# algorithm - 两个指定顶点之间的最短两条不相交路径

> ID：11880738
> 
> 赞同：5
> 
> 时间：2012-08-09T09:50:13.700
> 
> 标签：algorithm, optimization, graph-theory, dynamic-programming

给定一个加权无向图**G**和两个顶点**a, b**，我们希望找到两条路径**a -> b**和**b -> a**使得它们不共享任何边，并且两条路径中边的权重之和是最小值。最多可以有**1,000**个顶点和**10,000**条边。

我最初试图提出一种动态编程方法，但找不到。任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T10:06:11.197

这就是[最小成本流问题](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem)。您可以为每条边分配等于 1 的流量容量，然后在**a**和**b**之间搜索流量 = 2 的最小成本流量。

* * *

有人可能认为可以使用简单的算法找到从**a**到**b**的最短路径，从图中删除它的边，然后再找到另一条最短路径。

这种方法并不总是最优的。对于某些图表，它提供了很好的近似值。对于其他人，它可能会给出一个非常糟糕的解决方案：

![在此处输入图像描述](../Images/b4223763230b584ddea0f373e4389fd7.png)

在去除第一条最短路径（绿色）的边缘之后，唯一剩下的路径（红色）非常重。该方案的成本为1+1+10+1+1+2+90+2=108。而最优成本是 1+15+1+2+1+10+1+2=32。

# javascript - 哪个 JavaScript 库可以对贝塞尔曲线进行布尔运算？

> ID：11880739
> 
> 赞同：12
> 
> 时间：2012-08-09T09:50:13.873
> 
> 标签：javascript, svg, html5-canvas, bezier, boolean-operations

是否存在可以对路径（贝塞尔曲线）执行布尔运算的 Javascript 库？

我知道 Paper.js 和 Raphael.js，但现在两者都无法执行这些操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-07T07:46:19.547

Paper.js 现在在其核心中具有布尔运算：

[https://github.com/paperjs/paper.js/blob/master/src/path/PathItem.Boolean.js](https://github.com/paperjs/paper.js/blob/master/src/path/PathItem.Boolean.js)

在这里您可以看到实际操作：

[http://assets.paperjs.org/boolean/](http://assets.paperjs.org/boolean/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T18:07:42.070

如果您将路径转换为多边形（例如，使用 pathelement.getPointAtLength()），那么您可以使用 Javascript Clipper，它是流行的 Angus Johnson 的 Clipper 库的 javascript 端口。

这是一个 Difference 的示例，但[Union、Intersect 和 Xor](https://sourceforge.net/p/jsclipper/wiki/Main_Demo-Clipping_and_Offsetting_Text/#union)也是可能的： ![多边形的差异](../Images/3be223b8d10b889a98d8b6bbeefa4d90.png)

Javascript Clipper 的页面在[这里](https://sourceforge.net/projects/jsclipper/)。

如果 getPointAtLength() 给出的点数过多，Javascript Clipper 有一个函数 ClipperLib.Lighten()，可以显着减少点数。

该库还支持多边形偏移。查看[现场演示](http://jsclipper.sourceforge.net/5.0.2.1/main_demo.html)。

* * *

编辑：经过测试，我可以确认 pathelement.getPointAtLength() 最适合例如。命中测试，但在这种情况下对多边形化不太好，因为它产生的点太少或太多，并且没有考虑曲率。事实上，紧曲线需要更多点，而松曲线则需要更少。更好的是将所有路径段转换为三次曲线并使用一些自适应算法来多边形化曲线。我已经做了一些测试，可能很快就会引入一种更好的多边形化方法。

编辑：我已经设法实现了 SVG 路径多边形化功能，它可以处理所有类型的路径并且还可以展平转换。在测试了数千个随机生成的路径和转换之后，它似乎是可靠的。此外，所有可能的退化情况（曲线共线或某些点相同）都可以毫无问题地处理。尽管它已经比本机 getPointAtLength() 快很多倍且更精确，同时产生的点数要少得多，但该过程还有使用例如提高速度的空间。出租车角度而不是 atan2() 并通过删除所有 DOM 方法使代码与 Web Workers 完全兼容。我想在发布之前让它 100% 没有错误。它的理想用例是例如。对生成的多边形进行布尔运算的可能性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-28T06:15:29.517

## PaperJS 布尔运算与 intersect 函数的示例

我们可以使用 PaperJS 布尔运算来做到这一点，它可以使用 SVG 路径（包括贝塞尔曲线路径）进行操作。

PaperJS 有 5 种不同的布尔运算：`exclude`, `subtract`, `unite`, `intersect`, `divide`. **[您可以在此处](http://paperjs.org/examples/boolean-operations/)**查看所有这些示例。

这些操作也是同名的函数，它们返回`item`的对象是函数**[`exportSVG()`](http://paperjs.org/reference/item/#exportsvg)**。它返回 true `SVG Path element`，它具有两条路径相交的新形状。它非常有用——您可以获取 path 属性的值，`d`或者您可以将此路径元素附加到新的 SVG 元素中。

```
paper.install(window);
window.onload = function()
{
    paper.setup('canvas');

    var p1 = 'M 24.379464,51.504463 23.434524,23.156249 38.742559,12.572916 c 0,0 29.860118,-9.0714281 17.00893,0.755953 -12.851191,9.82738 13.229166,19.465774 13.229166,19.465774 z',
        p2 = 'm 32.883928,0.28869028 c 0,0 -15.686011,1.51190452 -8.504463,7.18154712 7.181546,5.6696426 50.270836,30.0491076 26.458332,42.3333336 -23.8125,12.284226 47.058036,14.174107 47.058036,14.174107 z',
        path1 = new Path(p1),
        path2 = new Path(p2);

    path1.fillColor = 'rgba(255,0,0,.5)';
    path1.position = new Point(25, 25);

    path2.fillColor = 'rgba(0,255,0,.5)';
    path2.position = new Point(40, 25);

    var result = path2.intersect(path1);
    result.selected = true;
    result.fillColor = '#77f';

    //exportSVG() docu: http://paperjs.org/reference/item/#exportsvg
    var svgPathElement = result.exportSVG(),
        dPath = svgPathElement.getAttribute('d');

    document.querySelector('path').setAttribute('d', dPath);

    var output = document.querySelector('#output');
    output.innerHTML = '<pre><b>D value from path:</b> ' + dPath + '</pre>';
    output.innerHTML += '<xmp>HTML string of path: ' + svgPathElement.outerHTML + '</xmp>';
};
```

```
table
{
    margin-left:14px;
    padding-left:14px;
    border-left:1px solid gray;
    display:inline-block
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.0/paper-full.min.js"></script>

<canvas id="canvas" width="75" height="75" resize></canvas>
<table><tr><td><b>Our new shape of both paths intersection in separate SVG:</b></td></tr>
<tr><td>
    <svg width="75" height="75" viewBox="0 0 75 75">
    <path fill="rgba(0,0,255,.5)" d=""/>
    </svg>
</td></tr></table>

<div id="output"></div>
```

**有用的链接：**

*   [PaperJS 示例](http://paperjs.org/examples/)
*   [PaperJS 参考（文档）](http://paperjs.org/reference/global/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T10:17:47.407

Try to use this - [https://github.com/interstateone/polygons](https://github.com/interstateone/polygons)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T11:53:18.940

有一个用于 raphael.js 的插件提供此功能 – [https://github.com/poilu/raphael-boolean](https://github.com/poilu/raphael-boolean)

# java - Java XMLStreamReader 给出了不需要的字符串

> ID：11880742
> 
> 赞同：3
> 
> 时间：2012-08-09T09:50:24.120
> 
> 标签：java, xml, xsd, xml-parsing, xmlstreamreader

我有一些正在阅读的 xml。

```
<application>
    <client>website</client>
    <register>
        <name>
            <first>Tommy</first>
            <second>Jay</second>
        </name>
        <address>
            <firstLine>line1</firstLine>
            <secondLine>line2</secondLine>
            <city>city1</city>
            <county>county1</county>
            <postcode>YY12 9UY</postcode>
        </address>
    </register>
</application> 
```

无论如何，当我使用 xmlStreamReader 阅读它时，如下所示

```
public XMLElementALT getNextElement()
{
    element = new XMLElementALT();
    int event;
    try
    {
        event = reader.next();
    } 
    catch (XMLStreamException ex)
    {
        return null;
    }

    if (event == XMLStreamConstants.START_ELEMENT)
    {
        element.setTag(reader.getLocalName());
    }
    else if (event == XMLStreamConstants.CHARACTERS)
    {
        element.setAttribute(reader.getText());
    }
    else if (event == XMLStreamConstants.END_ELEMENT)
    {
        element.setEndTag(reader.getLocalName());
    }
    else if (event == XMLStreamConstants.END_DOCUMENT)
    {
        element.setFinished();
    }
    return element;
} 
```

这一切顺利！但是，我遇到的问题是，在读取标签后，我得到的下一个事件是事件 XMLStreamConstants.CHARACHTERS 并报告我有属性（“\n”），它是标签和下一个标签之间的空间。我怎样才能删除这个？我希望将下一个事件作为 XMLStreamConstants.START_ELEMENT。我知道我可以将我的 XML 全部放在一行中，但我喜欢在输入时留出空隙，以便我可以看到结构。我还有一个要验证的xsd，这可以成功验证xml，我可以在xsd中做些什么来删除空格？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:09:15.507

您可以在方法中或在创建阅读器时使用过滤器忽略`CHARACTERS`仅包含空格的事件`getNextElement`

```
XMLInputFactory factory = XMLInputFactory.newFactory();
XMLStreamReader rawReader = factory.createXMLStreamReader(...);
XMLStreamReader filteredReader = factory.createFilteredReader(rawReader,
  new StreamFilter() {
    public boolean accept(XMLStreamReader r) {
      return !r.isWhiteSpace();
    }
  }); 
```

`isWhiteSpace`如果当前事件是`CHARACTERS`完全由空格组成的事件，则该方法返回 true。如果它不是一个`CHARACTERS`事件，或者它是`CHARACTERS`但不是所有的空白，它返回 false。

`XMLStreamReader`但是，重要的是要注意 an*不能*保证在一个`CHARACTERS`事件中返回元素的所有文本内容，它允许为您提供几个单独的字符块，您必须自己将它们连接在一起。

# java - FileDescriptor 在 Java 中打开文件

> ID：11880747
> 
> 赞同：0
> 
> 时间：2012-08-09T09:50:33.093
> 
> 标签：java

我想要一个目的是这样的方法：

`fileDescriptor openFile (filename)`：将打开一个具有特定名称的文件（如果内容已经存在，它将删除内容）并将“进程开始”作为第一行）；返回一个文件描述符

```
public FileDescriptor openFile(String fileName){
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T10:30:20.687

这是怎么做的：

```
private FileDescriptor openFile(String path)
        throws FileNotFoundException, IOException {
    File file = new File(path);
    FileOutputStream fos = new FileOutputStream(file);
    // remember th 'fos' reference somewhere for later closing it
    fos.write((new Date() + " Beginning of process...").getBytes());
    return fos.getFD();
} 
```

但是，最好返回 FileOutputStream 实例（您也可以从中获取 FileDescriptor），因为您可以将更多内容添加到文件并正确关闭它

如果您的方法签名不允许出现异常，请尝试捕获并抛出 RuntimeException 或尝试捕获异常并返回 null（在这种情况下，添加解释返回 null 含义的 javadoc）

# python-2.7 - 如何将命令行参数中的值分配或复制到标准输入？？？我已经编写了程序，但我无法做到

> ID：11880749
> 
> 赞同：0
> 
> 时间：2012-08-09T09:50:37.837
> 
> 标签：python-2.7

```
from subprocess import call

import sys
import os
import subprocess

if(call("hg clone  --insecure  https://mixmaster.netwitness.local/" + "sys.argv[1]", shell=True)):
    sys.stdin = sys.argv[2]
    sys.stdin = sys.argv[3]

else :
    print("error") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:55:51.527

这个论点用引号引起来是有原因的吗？还可以使用 % 替换字符串中的标记。将其更改为：

```
if(call("hg clone --insecure https://mixmaster.netwitness.local/%s" % sys.argv[1],  shell=True)): 
```

**编辑**

如果要传递由空格分隔的所有参数，请使用此

```
if(call("hg clone --insecure https://mixmaster.netwitness.local/%s" % (" ".join(sys.argv[1:])),  shell=True)): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:53:07.097

使用参数列表更容易调用[subprocess.call 。](http://docs.python.org/2/library/subprocess.html)这样您就不必担心要提供给的参数中的空格`hg`。正如您在对@Rajesh 答案的评论中指出的那样，您希望将 3 个参数传递给`hg`，以下应该有效：

```
from subprocess import call

import sys
import os
import subprocess

cmd = ["hg", "clone", "--insecure", "https://mixmaster.netwitness.local/", sys.argv[1], sys.argv[2], sys.argv[3]]
if not (call(cmd, shell=True)):
    print("error") 
```

如果您真的想提供 sys.argv[2] 和 sys.argv[3] 作为`hg`提示的输入。你不应该使用`call`它，因为它会阻塞`hg`进程，使用`Popen`.

# java - TimeSeriesChart 的最大范围值是多少

> ID：11880753
> 
> 赞同：0
> 
> 时间：2012-08-09T09:50:51.460
> 
> 标签：java, jfreechart

如果我创建一个`TimeSeriesChart`，当我将第一个 Y`NumberAxis`值设置为时`2147483647`，它无法显示在图表中。但是当我将第一个值设置`2`为例如，然后将第二个值设置为 时`2147483647`，它*可以*显示在图表中。为什么会发生这种情况，以及如何解决？这是关于 Y 的最大值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:15:15.593

常数`2147483647`是`Integer.MAX_VALUE`。当最小值超过零时，默认，轴缩放不*溢出*；否则它*会*。如果您的数据确实包含如此大的动态范围，请考虑使用对数轴：`LogAxis`显示[在此处](https://stackoverflow.com/a/10353270/230513)，并[在此处](https://stackoverflow.com/a/8590079/230513)`LogarithmicAxis`提及。

# forms - 表单出现错误“不支持请求方法 POST”：复选框

> ID：11880757
> 
> 赞同：1
> 
> 时间：2012-08-09T09:50:55.887
> 
> 标签：forms, spring-mvc, checkbox

我想用 Spring mvc 做一个 mcq。我有一个类 Mcq，它与类 Question 具有 OneToMany 关系，它与类 Answer 具有 OneToMany 关系。因此，Mcq 有一个 Arraylist ListOfQuestions 作为属性，而 Question 有一个 Arraylist ListOfAnswers。

我的控制器是

```
 @RequestMapping(value="displayMcq", method = RequestMethod.GET)
public String showMcq(Model model) {
    Mcq mcq = mcqService.findById(new Long(1));
    model.addAttribute("mcq", mcq);
return "displayMcq";
}   

@RequestMapping(method = RequestMethod.POST)
public String displayQcmRepondu(@ModelAttribute("mcq2") Mcq mcq, BindingResult binding, SessionStatus status) {      
     if (binding.hasErrors()) {
         return "displayMcq";

 } else {
     status.setComplete();
     return "redirect:/mcqSuccess/";
    }
} 
```

我的观点 displayMcq.jsp 是

```
<form:form modelAttribute="mcq" method="POST">
        <ol>
            <c:forEach items="${mcq.listOfQuestions}" var="question">
                <li>
                    <c:out value="${question.label}" /> 
                    <br />
                    <ul>
                        <c:forEach var="answer" items="${question.listOfAnswers}">
                            <form:checkbox path="listOfQuestions" value="answer.id" label="${answer.label}" />
                            <br />
                        </c:forEach>
                    </ul>
                </li>
            </c:forEach>
        </ol>
        <input type="submit" value="Validate" />
    </form:form> 
```

我的 mcq 显示良好，但表单处理失败。我停留在 displayMcq 外观上，出现错误“Etat HTTP 405 - 不支持请求方法'POST'”。

那么，你能解释一下这个问题，帮助我正确处理我的 mcq 并返回检查的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:33:55.037

请注意，您的控制器方法映射到不同的 URL（由于`value`POST 方法上没有属性）。

由于您没有`action`in 属性`<form:form>`，因此它会在提交时向当前页面的 URL 发送 POST 请求，但您没有控制器方法来处理对该 URL 的 POST 请求。

因此，您需要将 POST 方法映射到与 GET 方法相同的 URL：

```
@RequestMapping(value="displayMcq", method = RequestMethod.POST)
public String displayQcmRepondu(...) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:36:11.657

谢谢，这解决了一个问题，但是当我验证时，我收到一条消息错误，例如“无法将 java.lang.String[] 类型的属性值转换为所需的 java.util.List 类型以获取属性...”。

所以我将控制器方法修改为

```
 @RequestMapping(value="displayQcm", method = RequestMethod.POST)
public String displayQcmRepondu(@ModelAttribute ("mcqProcess") Mcq mcq, BindingResult binding, Model model, SessionStatus status) {      
     model.addAttribute("mcqProcess", mcq);
     status.setComplete();
     return "mcqSuccess";
 } 
```

我想在 mcqSuccess.jsp 中显示已检查的答案，但未提交 mcq。我显示页面，但只是书面文本。

如果有帮助，mcqSuccess 是

```
<h2>MCQ submitted</h2>
    <ol>
        <c:forEach items="${mcqProcess.listOfQuestions}" var="question">
            <li>
                <c:out value="${question.label}" />
                <br/>
                    <ul>
                        <c:forEach var = "answer" items = "${question.listOfAnswers}">
                            <c:if test = "${answer.correct}">                               
                            <c:out value = "${answer.label}" />
                            </c:if>
                            <br/>
                        </c:forEach>
                    </ul>
            </li>
        </c:forEach>

    </ol>
</div> 
```

# java - 我们应该使用哪些技术来实时处理 terra 字节的数据？

> ID：11880758
> 
> 赞同：-2
> 
> 时间：2012-08-09T09:50:56.417
> 
> 标签：java, hadoop, real-time

我们有一个网站，可以生成需要挖掘的 MB/TB 数据。我们应该使用哪些技术来实时处理 terra 字节的数据？Hadoop、Cassandra 适合批处理；但不是实时的。即时的; 意味着在数据发生时处理数据并显示报告。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:54:11.857

你看过[Storm 项目](https://github.com/nathanmarz/storm/wiki)吗？它被推特使用。这就像实时 Hadoop。

我们将它用于我们的流处理项目之一。这很棒。文档、开发、部署、可扩展性很棒。我们最近运行了 20K 消息/秒的处理（存储在 Cassandra、修改和广播、计算平均值），它工作可靠并且像魔术一样。绝对值得一试。邮件列表非常友好，我很少用它来提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:09:20.120

您可以使用与处理 1 MB 数据相同的技术来处理 TB 数据，但需要更长的时间。

我看不出您打算如何“实时”使用数据，我怀疑您的意思是真实世界。

如果您的意思是快速，那么您需要汇总数据以供人类消费。您一次只能向用户呈现千字节或兆字节的信息。

如果您需要一次加载所有数据，使用内存映射文件可以提高效率。这可用于每秒处理数千万条记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:58:29.373

检查此页面：[http ://hadoop.apache.org/](http://hadoop.apache.org/)

列出了在分布式环境中处理大量数据的相关框架/库。

# java - 在 JSP 表单提交上调用 java 类方法并传递 File 对象参数

> ID：11880761
> 
> 赞同：0
> 
> 时间：2012-08-09T09:51:07.407
> 
> 标签：java, jsp

每当我提交表单时，我希望从 JSP 调用 java 类方法。我的 JSP 文件将有一个文件标签。用户将从他的本地机器上浏览一个文件。然后点击提交。这个文件对象应该在我将拥有我的业务逻辑的 Java 类中可用。

不使用struts这可能吗？

```
<s:form action="**direct call to Action method here**" method="post" enctype="multipart/form-data" >
<s:file name="userImage" label="User Image" /><s:submit /> 
```

请帮助我解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:39:27.613

[action](http://www.w3schools.com/tags/att_form_action.asp)属性的值应该是**URL**。给定的 URL 指定了在提交表单时应该将表单中的数据发送到的地址。

在您的 jsp 页面中使用以下 html 代码：

```
<form action="uploadFile" method="post"
                    enctype="multipart/form-data">
<input type="file" name="file" />
<input type="submit" value="Upload file" /> 
```

定义负责在文件中加载文件的 servlet 映射`web.xml`：

```
 <servlet>
    <servlet-name>UploadServlet</servlet-name>
    <servlet-class>package.UploadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>UploadServlet</servlet-name>
    <url-pattern>/uploadFile</url-pattern>
</servlet-mapping> 
```

并在给定的 servlet 中实现方法 doPost，在该 servlet 中从您的业务逻辑中调用该方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) {
    yourMethod();
} 
```

`action`如果您在应用程序中仅使用JSP，则可以在属性中指定任何 JSP 页面：

```
<form action="upload_file.jsp" method="post" enctype="multipart/form-data"> 
```

在这种情况下，此页面将处理上传文件请求。

# apache-flex - 我需要对客户端做任何不同的事情还是需要修改服务器设置？

> ID：11880763
> 
> 赞同：0
> 
> 时间：2012-08-09T09:51:14.510
> 
> 标签：apache-flex, api, http, flash-media-server

我有一个基于 Flex 的应用程序，它使用 Flash Media Server (FMS) 服务器（4.0 版）在两个用户之间进行实时视频流传输（即一对一电话会议服务）。根据业务规则的定义，这种流是一对一的，因此没有第三方可以加入电话会议。任何一个人都可以通过基于浏览器的 Flex 客户端启动视频流，一旦第二个用户加入，通信就会建立起来。连接两个用户的流的验证在 FMS 服务器上实现（作为 main.asc 中定义的服务器端脚本）。我的电话会议解决方案面临三个关键问题。

1.很多时候，两个用户之间无法建立完整的通信。一个用户通常看不到或听到另一个用户。有一个客户端“刷新”按钮，单击该按钮时，会尝试通过服务器端脚本建立连接。这有时有效。在实现我们当前的服务器端脚本之前，我尝试使用此处找到的方法建立一个流：[http ://forums.adobe.com/thread/905613](http://forums.adobe.com/thread/905613)

我认为下面的方法可能会起作用，因为它会给我一个流的订阅者数组。

getLiveStreamStats(appInst:String, stream:String) : 对象

但问题是服务器返回以下内容：

```
<level>error</level>
<code>Admin.API.MethodNotAllowed</code>
<description>getlivestreams - Method not allowed!</description>
<timestamp>8/7/2012 10:05:38 AM</timestamp> 
```

问题 - 我需要对客户端做任何不同的事情还是需要修改服务器设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:07:44.740

您没有指定是使用 HTTP 还是 RMTP 进行远程调用。如果您使用的是 RMTP，则无需执行任何操作。如果您使用的是 HTTP，则需要修改以下文件：

*   {Flash/Adobe Media Server Root}\conf\AMS.ini（或 FMS.ini，如果您使用的是旧版本）
*   {Flash/Adobe 媒体服务器根目录}\conf\Users.xml

首先，您需要将 USERS.HTTPCOMMAND_ALLOW 选项设置为 true。在我的 AMS.ini 文件版本中，它位于配置页面的最底部。

在 Users.xml 文件中，您需要找到该块。在我的版本中，它也位于页面底部。Adobe Media Server 5 的默认安装（在我的情况下无论如何）只允许“ping”方法，而所有其他方法都被禁止。您将需要更新该块以反映您希望通过 HTTP 访问的方法的逗号分隔列表（白名单），或者全部允许但不拒绝（我不建议这样做）。

不要依赖通过基于 Web 的管理控制台软重启 Adob​​e/Flash Media Server。这对我不起作用。我需要从 Windows 服务面板中重新启动 AMS 服务，以使配置文件中的更改生效。

我希望这个对你有用！

瑞克

# popup - Colorbox 弹出窗口：单击父窗口而不关闭 colobox 窗口

> ID：11880765
> 
> 赞同：0
> 
> 时间：2012-08-09T09:51:20.907
> 
> 标签：popup, parent, colorbox

我正在使用 colorbox 来显示我的 webapp 的帮助。这很好，但我现在想要的是在帮助下打开弹出窗口，并且用户可以按照教程视频同时在应用程序中进行操作。

因此可以在不关闭颜色框窗口的情况下单击父窗口。我不想从颜色框到父窗口进行操作，而是直接在父窗口中单击，同时在颜色框窗口中观看我的 vid。

我不确定 colorbox 是用于此行为的工具，但想在切换到另一个之前询问。

谢谢巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:11:06.623

您可以将`overlayClose`and设置`escKey`为 false。
然后你必须通过 css 删除覆盖 div。像下面这样。

```
#cbobOverlay {
    display: none;
} 
```

因此，要完成，您可能需要添加一些按钮或链接以在需要时触发关闭。

```
<a href="javascript:void(0)" class="close">Close</a>

jQuery('.close').click(function() {
    jQuery.colorbox.close();
}); 
```

希望这有帮助。

*参考*：

*   [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# extjs - extjs4.1.0的actioncolumn

> ID：11880769
> 
> 赞同：0
> 
> 时间：2012-08-09T09:51:37.377
> 
> 标签：extjs, extjs4.1

我正在使用 Extjs4.1.0。

我有一个带有动作列的网格。我必须根据某些条件更改此操作列中的图标。

我正在使用三个 getClass 方法来呈现此列中的图标。

```
xtype: 'actioncolumn',
items: [
{
    getClass: function (v, meta, rec)
    {
        if (rec.get('fieldDeleteFlag') == false) return 'x-grid-del-css';
        else return '';
    },
    handler: function (grid, rowIndex, colIndex)
    {
        alert('delete');
    }
},{
    getClass: function (v, meta, rec)
    {
        if (rec.get('fieldDeleteFlag') == false) return 'x-grid-edit-css';
        else return '';
        handler: function (grid, rowIndex, colIndex)
        {
            alert('edit');
        }
},{
    getClass: function (v, meta, rec)
    {
        if (rec.get('fieldDeleteFlag') == true) return 'x-grid-activate-css';
        else return '';
    }
    handler: function (grid, rowIndex, colIndex)
    {
        alert('Activate');
    }
}],    

grid.getStore().getAt(rowIndex).set('change',false); 
```

所以，如果标志为假，我需要有两个图标作为编辑和删除。如果标志为真，我只有激活图标。

当我单击激活图标处理程序时，我会将标志列设置为 false，并且我只有该行的编辑和删除图标。

网格渲染时，图标完美呈现。但是，当我单击激活处理程序时，我无法删除激活图标并显示编辑和删除图标。

任何人都可以告诉我如何做到这一点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:09:00.753

您可以`grid.refresh()`在设置单元格值后使用。

```
handler: function(grid, rowIndex, colIndex) {
    var rec = store.getAt(rowIndex);
    var change = rec.get('change');
    rec.set('change', -change);
    grid.refresh();
} 
```

# uiview - xcode使用故事板获取黑色窗口

> ID：11880770
> 
> 赞同：1
> 
> 时间：2012-08-09T09:51:43.800
> 
> 标签：uiview, xcode4, storyboard

我正在尝试查看视图，但是当我在 iPhone 模拟器中查看它时，我看到的是一个黑色窗口，而我现在不知道我做错了什么。

这是我的代码：

```
subview = [[ArticulosViewController alloc]init];
subview.titulo = categoria;
NSData * imageData = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString:[NSString stringWithFormat: @"http://XXX.XXX.X.XX/XX/%@",[[self.listaArticulos objectAtIndex: [indexPath row]] imagen]]]];
        subview.imagen = [UIImage imageWithData: imageData];
[self.navigationController pushViewController:subview animated:YES]; 
```

在 ArticulosViewControllew 中，我没有方法 -(void)LoadView{}，所以我完全迷失在我要做的事情中

谢谢大家的帮助

# javascript - 如何在javascript中使用动态变量

> ID：11880774
> 
> 赞同：1
> 
> 时间：2012-08-09T09:52:01.573
> 
> 标签：javascript, dynamically-generated

我有一个称为动态创建的变量`item_908`（其中 908 是动态的）。稍后，有一个名为 的变量`id`，它保存字符串`"908"`。

现在，我需要以`item_908`编程方式访问变量，但我不记得该怎么做。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:54:26.950

如果它们在全局范围内：

```
window["item_" + id]; 
```

否则你只能通过一个对象访问它们：

```
var obj = {},
    id = 908;

obj.item_908 = "abc";

obj["item_" + id]; // abc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:54:59.053

您可以使用以下方式访问它：

```
window['item_908']; 
```

# php - 正则表达式，问题组

> ID：11880778
> 
> 赞同：0
> 
> 时间：2012-08-09T09:52:15.980
> 
> 标签：php, regex

我想从正则表达式中取出所有字符。

```
$str = "html code <script> var='a,b,c,d,e,f,g,h' </sript> html code";
preg_match_all ('#var =.((\w),?)+.#',$str,$m);
echo "<pre>";
print_r ($ m);
echo "</ pre>"; 
```

结果：

```
Array
(
     [0] => Array
         (
             [0] => var = 'a, b, c, d, e, f, g, h'
         )

     [1] => Array
         (
             [0] => h
         )

     [2] => Array
         (
             [0] => h
         )

) 
```

h - 最后一个搜索符号，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:08:49.160

我认为您正在尝试做一些不完全适合正则表达式的事情 - 尽管有时是工作的最佳工具，但它们仅限于匹配可​​以以某种方式描述的模式。它们没有控制逻辑，因此不能循环或递归。使用正则表达式和其他方法来实现您想要的效果很好。

在这种情况下，我将使用 regex (preg_match - not preg_match_all) 进行匹配`var='...'`，以便您可以提取`...`字符串，然后用逗号分割字符串，将每个项目分隔成一个数组。

如果您尝试弯曲正则表达式以在一次操作中完成所有操作，那么它的效率和可靠性会大大降低（因为很难为这种情况编写坚如磐石的正则表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:56:13.563

因为您在组之后多次重复使用该`+`组。这样，该组每次都匹配，直到`h`最后一次匹配，并且表达式完成。

如果您希望每场比赛都在一个组中，您要么必须在之后拆分完整的比赛，要么为自己创建每个组。

# windows - 在 Windows 上为 IntelliJ Idea 指定 JRE

> ID：11880783
> 
> 赞同：21
> 
> 时间：2012-08-09T09:52:36.050
> 
> 标签：windows, intellij-idea, java

如何定义应该使用哪个 JRE IntelliJ IDEA 在 Windows 上运行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T09:52:36.050

在下面[的帖子](http://youtrack.jetbrains.com/issue/IDEA-11368)中，指定路径查找顺序如下：

1.  IDEA_JDK 环境。多变的
2.  ./jre 目录
3.  登记处
4.  JDK_HOME 环境变量

确实如此。创建一个 IDEA_JDK 环境变量确实有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-26T12:20:42.020

包括 JDK64 设置在内的更多实际信息[在这里](https://intellij-support.jetbrains.com/hc/en-us/articles/206827547-Selecting-the-JDK-version-the-IDE-will-run-under)：

`<product>.exe`使用这个 JDK 搜索序列：

1.  `IDEA_JDK`///环境变量`WEBIDE_JDK`（取决于产品，`PYCHARM_JDK`适用于WebStorm和PhpStorm）`RUBYMINE_JDK``WEBIDE_JDK`
2.  `..\jre`目录
3.  系统`Registry`
4.  `JDK_HOME`环境变量
5.  `JAVA_HOME`环境变量

`idea64.exe`使用这个 JDK 搜索序列：

1.  `IDEA_JDK_64`环境变量
2.  `..\jre64`目录
3.  系统`Registry`
4.  `JDK_HOME`环境变量
5.  `JAVA_HOME`环境变量

也可以使用`<product>.bat`位于 bin 目录中的文件启动 IDE，它使用以下 JDK 搜索序列：

1.  `IDEA_JDK`///环境变量`WEBIDE_JDK`（取决于产品`PYCHARM_JDK`）`RUBYMINE_JDK`
2.  `..\jre`目录
3.  `JDK_HOME`环境变量
4.  `JAVA_HOME`环境变量

环境变量必须指向JDK安装主目录，例如：

```
c:\Program Files (x86)\Java\jdk1.7.0_17 
```

*   `/create-i4j-log`命令行开关可以与 .exe 一起使用，以跟踪 JDK 搜索序列并找出选择特定 JDK 的原因。
*   可以在`Help | About`对话框中验证 IDE 使用的实际 JDK 版本（打开任何项目以访问菜单）。
*   根据产品定义///`IDEA_JDK`变量以覆盖默认版本`WEBIDE_JDK`。`PYCHARM_JDK``RUBYMINE_JDK``IDE_HOME\jre`
*   使用[Rapid Environment Editor](http://www.rapidee.com/en/download)添加/编辑变量，它会检测到不正确的路径。

# android - Android ICS 设备加密

> ID：11880788
> 
> 赞同：5
> 
> 时间：2012-08-09T09:52:45.330
> 
> 标签：android, security, encryption, android-4.0-ice-cream-sandwich, device-policy-manager

我正在尝试通过启动意图以编程方式触发我的 ICS 设备的加密`(Intent --> DevicePolicyManager.ACTION_START_ENCRYPTION)`。这工作得很好。我想知道是否发送了广播或类似的东西来识别用户是否点击了“加密设备”或拒绝了请求。我需要注意用户的决定。

我的第二个问题涉及`setStorageEncryption(admin, boolean)`在`DevicePolicyManager`. `setStorageEncryption(admin, false)`如果我之后启动上面提到的加密意图，调用是否对设备加密有任何影响？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T22:15:03.877

意图`DevicePolicyManager.ACTION_START_ENCRYPTION`将用户发送到`Settings -> Security -> Encrypt Phone`对话，用户必须在对话中确认两次操作。此外，该设备需要至少有 80% 的电池电量并连接到充电电缆。

如果用户拒绝这个动作或者他被禁止，例如充电电缆没有插入，则不发送广播。

正如 CommonsWare 正确提到的，您的应用程序可以使用`DevicePolicyManager.getStorageEncryptionStatus()`.

调用`DevicePolicyManager.setStorageEncryption(admin, false)`将该管理员的最低策略设置为`not encrypted`. 然而，其他管理员可以有更强的策略。

如果设备已经加密，则设置 a`not encrypted policy`不会解密设备。此外，它不会阻止用户使用`Settings -> Security -> Encrypt Phone`. 在这种情况下，意图`DevicePolicyManager.ACTION_START_ENCRYPTION`也不会被阻止。

# html - line-height 和 height 设置为 24px 和 padding 为 0px，但文本距离顶部仍然比底部少 1px

> ID：11880792
> 
> 赞同：0
> 
> 时间：2012-08-09T09:52:59.643
> 
> 标签：html, css

我有一个使用css转换为块的链接，如下所示：

```
.button-user-add {
    background: green;
    width: 150px;
    height: 24px;
    display: block;

    float: right;
    text-align: center;
    color: #fff;

    text-transform: uppercase;
    text-decoration: none;
    font-size: 15px;
    font-weight: bold;

    font-family: Arial;

    line-height: 24px;

    margin-top: 24px;
    padding: 0px;

} 
```

但问题是顶部的填充比底部的填充少大约 1px。

为什么？

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:48:58.233

~~`font-size:15px`Arial 不存在。浏览器将四舍五入为 14 像素或 16 像素。~~

*（**更正**：现代浏览器现在呈现更广泛的字体大小，包括更多奇数大小。这是一个[快速演示](http://jsfiddle.net/Matt_Coughlin/cRk6L/1/)，显示 Arial 12px 到 22px。）*

文本的主要部分（大写字母 H 占据的空间）是基线高度。其上方是升序（用于大写字母的重音符号），下方是降序（用于 yp 和 q 等字母的底部）。

```
font-size = ascender + baseline height + descender 
```

line-height 为要呈现的字体保留空间，但在该空间内呈现文本的确切位置因字体系列、字体大小、浏览器和（如果没有明确的 line-height）而异浏览器使用的默认行高。在行高内，文本将大致但不完全居中。

只要有明确的行高，文本的位置在不同浏览器之间的差异通常不超过 1px，至少对于 Arial 而言。但是没有办法强制浏览器比这更一致地呈现文本。

# arrays - 两个嵌套表集合之间的plsql区别

> ID：11880796
> 
> 赞同：4
> 
> 时间：2012-08-09T09:53:08.620
> 
> 标签：arrays, oracle, collections, plsql, nested-table

我有两个嵌套表类型的 PLSQL 数组：

```
TYPE nested_typ IS TABLE OF VARCHAR2(21);

nt1 nested_typ := nested_typ('abc','def','123');
nt2 nested_typ := nested_typ('123'); 
```

我想有这两个集合的区别，对于上面的例子：'def'，'abc'

请建议任何简单的方法来做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T10:58:38.967

这些是简单类型，因此您可以使用 PL/SQL 的集合比较运算符。在您想要使用的情况下`MULTISET EXCEPT`（与 SQL 运算符的工作方式相同`MINUS`）。给定第三个嵌套表，您将编写如下代码：

```
nt3 := nt1 multiset except nt2; 
```

[了解更多](http://www.oracle.com/technetwork/issue-archive/o53plsql-083350.html)。

* * *

> “当数组中没有重复元素时，这可以正常工作......有没有其他方法可以删除 nt1 中所有出现的 '123'？”

是的，使用`multiset except distinct`.

有很多收集运营商。正如我们所期望的那样，PL/SQL 文档中涵盖了它们。 [在这里找到它](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/collections.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:46:09.147

基本上，您想对嵌套表使用减号功能。在 10g 中有一个称为 MULTISET EXCEPT 的新功能。如果要将减号的输出存储在变量中，请按照以下步骤操作

```
declare var1 <nested table type> 
```

在代码的开始部分中，您编写以下代码以获得减号输出

```
var1:=var2 multiset except var3; 
```

看一下这个

```
Declare     
  TYPE nested_typ IS TABLE OF VARCHAR2(21); 
  nt1 nested_typ := nested_typ('abc','def','123');     
  nt2 nested_typ := nested_typ('123');    
  nt3 nested_typ;    
Begin
  nt3 := nt1 multiset except nt2; 
  dbms_output.put_line(nt3(1)||' '||nt3(2));  
end; 
```

希望这可以帮助。

# asp.net-mvc-3 - 在视图中显示列表

> ID：11880805
> 
> 赞同：0
> 
> 时间：2012-08-09T09:53:42.607
> 
> 标签：asp.net-mvc-3

我从数据库中检索到了从模型到控制器的产品列表。现在，我想在单击按钮时将其显示在视图中。我不知道使用哪个 HTML 元素来显示列表以及如何将其传递给视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:28:20.820

在您的控制器中，您可以通过返回您的模型来传递`Model`给：`View`

```
return View(model); 
```

然后在您的文件顶部`View`指定您的：`model`

```
@model [Model here] 
```

然后你可以遍历你的对象以在页面上显示它们，如下所示：

```
<ul>
@foreach(var product from Model.Products){
   <li>@product.Name</li>
}
</ul> 
```

# .net - 验证 DataGridView 单元格

> ID：11880807
> 
> 赞同：2
> 
> 时间：2012-08-09T09:53:57.303
> 
> 标签：.net, datagridview

我有一个`DataGridView`它的哪一列是 DataGridViewCheckBoxColumn。当我检查此列的一个单元格时，我验证同一行（但在不同列中）中的其他两个单元格是否为`0`. 如果两者都是`0`，那么我想取消为复选框列输入的新值（使用该事件并忽略它的更改）。也就是说：如果您选中它并且其他两列都`0`（在同一行中），那么我想保持取消选中复选框单元格。

我通过处理`CellValidating`事件来做到这一点。在其中我检查这两个单元格（在同一行中）是否都是`0`，如果是，并且用户已经检查了复选框单元格（也在同一行中），那么我会这样做`e.Cancel = true`，以保持未选中复选框单元格并忽略检查完成由用户。

但它不起作用，我看到`e.RowIndex`事件与我刚刚单击但正确`CellValidating`的行索引不对应......`e.ColumnIndex`

总之，我想要的是，当用户检查一行的复选框列时，如果其他两列的值都设置`0`为同一行，我想保持复选框列不变（它保持其旧值，对于例如，如果它未选中并且用户检查了它，它将保持未选中状态）。否则，如果这两个列都没有设置为`0`，复选框列将考虑它，例如，如果它未选中并且用户选中它，它将更改为选中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:26:50.093

我会使用与`CellValidating`. 我会用`CellBeginEdit`

```
dataGridView1.CellBeginEdit += CellBeginEdit;

private void CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
{
    DataGridView dgv = (DataGridView)sender;      
    if (dgv[0, e.RowIndex].Value == "2") # or whatever conditions you want to check
    {
        e.Cancel = true;
    }
    else
    {
        e.Cancel = false;
    }
} 
```

I believe `CellValidating` gets called on the whatever cell you were previously on and that is why the row index doesn't make sense.

# java - 如何将自动完成文本字段分配给 JTable 单元格？

> ID：11880810
> 
> 赞同：0
> 
> 时间：2012-08-09T09:54:04.633
> 
> 标签：java, swing, autocomplete, jtable, jtextfield

我`Class`为自动完成文本字段创建了一个。

我想使用它`Class`并尝试包含我的`JTable`单元格字段，但它不会显示。

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:07:18.753

*   你可以使用[自动完成 JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)

*   将此[JComboBox / JTextField](https://stackoverflow.com/a/10901944/714968)作为[渲染器和编辑器放入 JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:19:41.400

（假设我理解这个问题）

您需要将编辑器包装在[TableCellEditor](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableCellEditor.html)中。看看[使用其他编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)的例子。

设置完成后，您需要将编辑器注册到表中。

一种方法是通过[TableColumnModel将编辑器注册到有问题的列](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumnModel.html)

```
table.getColumnModel().getColumn(indexToColumnInQuestion).setCellEditor(tableCellAutoCompleteEditor); 
```

# jquery - Jquery Mobile中如何定义文本区域的高度和宽度？

> ID：11880823
> 
> 赞同：1
> 
> 时间：2012-08-09T09:54:45.367
> 
> 标签：jquery, jquery-mobile, jqueryform

在输入之前，输入字段是预定义的大小（屏幕宽度上的两行）..:( 它没有采用我在行和列值中定义的任何内容.. 例如：输入字段仍然是固定的...显示没有变化.

逐渐地，随着我们引入文本，输入字段的高度增加，以查看整个引入的文本。

但我需要的是定义我自己的 textfeild 的高度和宽度......如果输入的文本更多，那么 feild 应该逐渐增加。

我正在使用的代码是：

```
<div data-role="content">
<form method="post" name="login" data-ajax="false">
<label for="textarea"><h3><u>Add Comment</u> : </h3></label>
<textarea cols="8" rows="50" name="textarea" id="comment">
</textarea>
</form>
<div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:00:03.817

有几种方法可以做到这一点。

您可以使用 cols & rows 属性...

```
​$("textarea").​​​​​​attr("rows", 20)​​​​​​;
​$("textarea").​​​​​​attr("cols", 25)​​​​​​; 
```

或直接设置宽度和高度...

```
​$("textarea").​​​​​​height(200);
​$("textarea").​​​​​​width(250); 
```

我建议给 textarea 一个 ID 并将其用作选择器，因为上述内容显然会影响页面上的所有 textarea 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:09:43.543

如果我需要预设文本区域的大小，我会在 HTML 本身中声明大小：

```
<textarea id="Summary" style="height:100px; width:250px"></textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T22:05:20.023

此处已对此进行了回答：[JQuery Mobile textarea：它如何使用“行”属性？](https://stackoverflow.com/questions/19117151/jquery-mobile-textarea-how-does-it-use-rows-attribute)

简而言之，将 !important 标志添加到您的 CSS 项目中。

```
.custom_class {
  height: auto !important; /* !important is used to force override. */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:02:58.663

尝试这个..

```
$("textarea#comment").​​​​​​css({'height':'100px', 'width':'250px'}); 
```

**[小提琴](http://jsfiddle.net/yvhLn/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T05:36:08.120

jQuery mobile 会自动将类“.ui-input-text”附加到 textarea，
然后高度将设置为 50px（在我的 jQuery mobile 版本中）
，所以我们需要在 CSS 文件中进行设置：

```
textarea.ui-input-text { height: inherit } 
```

一切都完成了:)

# drupal - 如何将内容类型分配给 Drupal 7 中的特定块？

> ID：11880824
> 
> 赞同：0
> 
> 时间：2012-08-09T09:54:56.013
> 
> 标签：drupal, drupal-7, content-type, drupal-panels, drupal-blocks

我希望一些内容类型在侧边栏中的一个块中打开，而不是在主要内容区域中，理想情况下不刷新主要内容区域。

如何在 Drupal 7 中做到这一点？我正在考虑使用面板，但尚未找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:23:45.017

您可以将块添加到特定的内容类型并将这些块放置在一个区域（例如侧边栏）中。在模板中，您可以添加此区域。你说的“不刷新”是什么意思，你想让内容在客户端更新吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:28:28.793

所以左边的视图包含多个节点项。用户必须在左视图中编辑什么？右边的列显示了所选节点的所有信息？

# .net - 如何检测我的程序集是否在 WP7/WP8 环境中运行？

> ID：11880829
> 
> 赞同：0
> 
> 时间：2012-08-09T09:55:05.717
> 
> 标签：.net, windows-phone-7, windows-phone-8

我正在做一个库，我想检测它是否在 WP7/WP8 环境中运行。如何使用 .NET 做到这一点？

编辑：

我忘了提到我想在运行时检测它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:49:45.127

如果您想区分运行 .NET 的现有平台 - 请查看有关跨平台条件编译符号的 MSDN 页面[。](http://msdn.microsoft.com/en-us/library/dd282469.aspx)

当前定义的平台是 Windows、Xbox 和 Windows Phone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:17:45.787

Windows Phone 8 SDK 尚未发布，因此目前无法找到。

# jquery-mobile - jQuery mobile 中 phonegap android 应用程序中显示的“正在加载”文本

> ID：11880831
> 
> 赞同：1
> 
> 时间：2012-08-09T09:55:11.013
> 
> 标签：jquery-mobile, cordova, phonegap-plugins

我正处于 phone gap/jQuery mobile 中的 android 应用程序的初始阶段

在 Eclipse 中，我创建了一个项目。在我的设备上工作。

我的问题是“加载”文本显示在我的应用程序的页脚位置。

当我删除 jquery-mobile.js 时，它没有显示“正在加载”。我的代码如下。如何删除此“加载”或我的代码中是否遗漏了什么？

提前致谢 。

```
<!DOCTYPE HTML>
<html>

  <head>
    <title>PhoneGap</title>
    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script> 
    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script> 
    <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.1.1.min.js"></script>     
<link rel="stylesheet" type="text/css" href="css/style.css">
  </head>

  <body>

<a href="#"> Start </a>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:47:45.660

首先，您的代码中缺少 jquery mobile css 文件。添加它会让你`"loading"`看起来更好

其次，正如我在您使用的代码中看到的那样，`phonegap 1.0.0`它非常古老。您应该使用最新版本的 phonegap，现在称为**cordova**，最新版本号是 2.0.0 尝试使用它，因为它很棒。

# android - listview 和slidingdrawer 给出错误

> ID：11880836
> 
> 赞同：0
> 
> 时间：2012-08-09T09:55:26.827
> 
> 标签：android, listview, dimensions, slidingdrawer

我有这个问题两天了，我找不到任何解决方案。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/presentation_list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</ListView>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/presentation_list"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/handle"
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/content_imageview"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@android:color/black" />
    </LinearLayout>
</SlidingDrawer> 
```

我有一个非常简单的布局，其中包含一个`listview`和一个`slidingdrawer`我想从`listview`. 当我`activity`在没有信息的情况下打开我的，它显示完美无一例外。

但是当 my 中有一个项目时`listview`， my`slidingdrawer`会给出一个例外。

```
 AndroidRuntime(4722): java.lang.RuntimeException: SlidingDrawer cannot have UNSPECIFIED dimensions 
```

我已经多次寻找解决方案，但没有一个对我有用。

有没有人对我有出色的突破？这是非常赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T02:21:57.663

给你`android:layout_height`的相对布局一个数字（例如 600 dip）。当滑动抽屉布局高度为`match_parent`时，它将跟随布局高度为 的相对布局`fill_parent`，这将导致您的滑动抽屉无限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:18:08.457

只是想一想......如果您为滑动抽屉内的 content_imageview 定义精确尺寸会发生什么。

从查看您的代码和 Android 文档[http://developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)来看，这似乎是唯一的区别。

可能值得在[http://developer.android.com/reference/android/view/View.html](http://developer.android.com/reference/android/view/View.html)上阅读，以更好地理解`UNSPECIFIED`以及如何在 MeasureSpec 中使用它。

另请查看为手柄组件指定设置尺寸。

关于您定义的布局，您最好将滑动抽屉指定为 alignParentBottom 并在滑动抽屉上方对齐列表视图。在一个简短的列表中，您的滑动抽屉将位于布局的一半......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T10:10:33.770

我认为你必须在`SlidingDrawer`里面定义`LinearLayout`而不是反过来。

# c# - 如何在网页上实现单元测试？

> ID：11880837
> 
> 赞同：0
> 
> 时间：2012-08-09T09:55:27.667
> 
> 标签：c#, unit-testing

我有一个注册页面，我想以开发人员的身份测试该页面，但我不知道该怎么做但如何实施呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:08:11.323

这个题目很广。我能说的是单元测试不适合用户界面测试。为此，您需要其他工具，并且通常这些测试由非开发人员的其他团队成员完成（最好是这样，开发人员懒得探索 UI 的弱点）。

这些链接可以从工具的角度向您展示什么是 UI 和单元测试，什么不是 UI 和单元测试：

VS2010 上的单元测试： http: [//msdn.microsoft.com/en-us/library/dd286726.aspx](http://msdn.microsoft.com/en-us/library/dd286726.aspx) VS2012 Ultimate 上的 UI 测试：http: [//msdn.microsoft.com/en-us/library/dd286726.aspx](http://msdn.microsoft.com/en-us/library/dd286726.aspx)

# grails - 在 Grails 中使用 Response.outputStream 后如何重定向和显示 flash.message？

> ID：11880841
> 
> 赞同：0
> 
> 时间：2012-08-09T09:55:37.487
> 
> 标签：grails

使用 response.outputStream 后我需要重定向我是 grails 的新手，所以我可能不知道是否有一种简单的方法可以做到这一点。或者，如果它甚至是可能的。这是片段：

```
def filename = "ProgramA14_"+DASelected+"_backup.csv"
        def filecontent = response.outputStream
        response.setHeader("Content-disposition", "attachment; filename="+filename)
        response.contentType = "text/csv"
        filecontent << "program,da,area,date,forecastedReportedCumulative,forecastedReportedLow,forecastedReportedUpper,forecastedCorrectedCumulative,openPronto,openProntoLow,openProntoUpper,forecastedReportedWeekly,forecastedCorrectedWeekly\n"

        flash.message = "Sample Flash message."
        redirect(action:list, params:[programA14InstanceList: programA14DA, programA14InstanceTotal: programA14DA.count()])
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:56:53.173

我认为您需要使用[一次性数据插件](http://www.grails.org/plugin/one-time-data)

# windows - 在 windows mobile 模拟器上映射 port1 和 port2 不起作用

> ID：11880842
> 
> 赞同：1
> 
> 时间：2012-08-09T09:55:42.060
> 
> 标签：windows, windows-mobile, serial-port, emulation

我正在尝试通过将端口0、端口1和端口2分别映射到主机的com3、com4和com5来在visual studio 2008的windows mobile 5.0模拟器上连接三个串行设备。

我已经意识到端口 0（模拟器的 com1）工作正常，但端口 1（模拟器的 com2？）甚至不存在，端口 2（模拟器的 com3？）出现错误。我在主机上使用了腻子，在模拟器上使用了口袋腻子来检查所有这些。

有什么办法可以使这项工作？在开发过程中，我可以只使用两个串行端口，而没有第三个但只有一个端口是个问题。

# java - 如何在我的主类中使用 SWIGTYPE_p_CHAR 类？

> ID：11880848
> 
> 赞同：1
> 
> 时间：2012-08-09T09:55:54.487
> 
> 标签：java, c, java-native-interface, swig

我使用过类型映射：

```
%include "typemaps.i"

%apply SWIGTYPE * {char *deci}; 
```

这是 SWIG 生成的代理类：

```
public class SWIGTYPE_p_char {
    private long swigCPtr;

    protected SWIGTYPE_p_char(long cPtr, boolean futureUse) {
        swigCPtr = cPtr;
    }

    protected SWIGTYPE_p_char() {
        swigCPtr = 0;
    }

    protected static long getCPtr(SWIGTYPE_p_char obj) {
        return (obj == null) ? 0 : obj.swigCPtr;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:34:33.570

这似乎微不足道，但是您是否尝试过：

```
SWIGTYPE_p_char my_p_char; 
```

毕竟，类所包含的只是指针地址的 long int 表示

显然，您只能将其用于返回 char* 或使用 char* 参数作为伪返回值的 ac 函数

如果您想使用 char* 输入参数，那么您很可能必须编写某种辅助函数

我最近用 SWIG 包装了这个函数原型：

```
int load_config(const char *fn, Config *cfg); 
```

它将数据从由字符串 (char*) 指定的文件加载到我的 Config 数据结构中

我可以使用以下行从 Java 调用它：

```
example.load_config("test.cfg", cfg); 
```

或者：

```
String cfg_file = "test.cfg";
example.load_config(cfg_file, cfg); 
```

# iphone - 如何在 iphone sdk 中查找当前位置

> ID：11880858
> 
> 赞同：-4
> 
> 时间：2012-08-09T09:56:22.140
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [如何检索用户的当前城市名称？](https://stackoverflow.com/questions/1382900/how-to-retrieve-users-current-city-name)

我正在开发基于 gps 的应用程序，我想在 iphone 中获取当前位置，我如何获取它。比如德里，昌迪格拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:16:44.460

使用 CLLocationManager 获取当前地理位置并使用 MKReverseGeocoder 或 Google API 获取位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:27:56.740

使用 CoreLocation 框架。使用 CLLocation Manager，您可以获得当前位置的详细信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T10:22:15.547

If you're writing a native application in Objective-C, there are plenty of resources out there that answer your question. I'd recommend you start with Apples own documentation, then come back with a more detailed question if you have specific problems:

**Introduction:** [http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html)

**How to:** [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

# ios - 由于身份验证登录页面中的“注册”按钮，iOS 应用被拒绝

> ID：11880862
> 
> 赞同：3
> 
> 时间：2012-08-09T09:56:39.130
> 
> 标签：ios, google-drive-api

我们的 iOS 应用程序“Files Pro”(http://itunes.apple.com/us/app/files-pro/id285578660) 包括对使用官方 Google SDK 的 Google Drive 的支持。

几天前，由于 Google 登录授权页面中存在“注册”按钮，我们的最后一次更新被 Apple 审核团队拒绝。根据 Apple 的说法，这个按钮的存在违反了他们的指导方针：

“链接到外部购买或订阅机制的应用程序将被拒绝”

您可能知道使用 Dropbox SDK 的应用程序在几个月前因为同样的原因被拒绝了。Dropbox 通过从 iOS 客户端的登录页面中删除“注册”按钮解决了这个问题。

我们自己暂时解决了这个问题。但我们想知道 Google 是否计划通过移除 iOS 客户端的“注册”按钮来解决这个问题？否则，其他使用 Google SDK 的 iOS 开发人员会发现他们的应用程序被 Apple 拒绝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:08:53.873

阿里，感谢您的回复 - 我们很高兴听到您正在努力解决此问题。

基本上，我们解决这个问题的方法是通过将“注册”元素的“显示”样式设置为“无”来隐藏 Google 登录网页上的按钮。有关详细信息，请参阅我们的博客文章：

[http://olivetoast.com/blog/files/googledrive_skydrive_rejection.ot](http://olivetoast.com/blog/files/googledrive_skydrive_rejection.ot)

# asp.net-mvc-3 - 如何在 ASP.NET MVC 3 应用程序中禁用 WEB API 的 Windows 身份验证

> ID：11880864
> 
> 赞同：1
> 
> 时间：2012-08-09T09:56:46.613
> 
> 标签：asp.net-mvc-3, authentication, asp.net-web-api, windows-authentication

我有一个带有 Windows 身份验证的 ASP.NET MVC 3 应用程序。现在我已经将 web api 添加到它（nuget 包）并希望匿名访问（稍后我将添加一个 api 密钥）。但我还没有设法让它工作。

我所有的 WEB API 控制器都在“/api”路径下，它们都没有 Authorize 属性。

这是我当前的 web.config（我删除了所有与此事无关的点点滴滴）：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <authentication mode="Windows" />
    <httpRuntime maxRequestLength="102400" requestPathInvalidCharacters="&lt;,&gt;,*,:,&amp;,\" />
    <authorization>
      <deny users="?" />
    </authorization>
    <roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="..." applicationName="..." />
      </providers>
    </roleManager>
    <profile enabled="false" defaultProvider="AspNetProfileProvider">
      <providers>
        <clear />
        <add name="AspNetProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="..." applicationName="..." />
      </providers>
      <properties></properties>
    </profile>
    <customErrors mode="RemoteOnly" defaultRedirect="~/Error/Generic">
      <error statusCode="404" redirect="~/Error/NotFound" />
      <error statusCode="403" redirect="~/Error/AccessDenied" />
    </customErrors>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <security>
      <requestFiltering allowDoubleEscaping="true"></requestFiltering>
    </security>
  </system.webServer>
  <location path="Error">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="Scripts">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="Content">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="api">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
</configuration> 
```

我所有的请求都得到“HTTP Error 401.2 - Unauthorized”，但是当我输入一些有效的 Windows 凭据时，请求就会成功执行。

那么，如何禁用我的 WEB API 的 Windows 身份验证？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:58:57.193

我能够在我的 MVC 项目属性中解决此问题并启用匿名身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T10:33:58.547

要禁用身份验证，您可以转到 launchSettings.json，或者在查找输入字段中输入“匿名”。

然后，您将在文件顶部找到“anonymousAuthentication”，您必须将其设置为 true。

以后你总是可以再次切换到 false 。

# bash - 在这种情况下如何继续执行后台进程

> ID：11880865
> 
> 赞同：3
> 
> 时间：2012-08-09T09:56:51.573
> 
> 标签：bash, unix, background-process

我有 3 个在后台执行的进程 a.sh、b.sh、c.sh。

```
./a.sh &
pid_a=$!

./b.sh &
pid_b=$!

./c.sh &
pid_c=$! 
```

我需要确保所有三个进程都运行到最长的进程终止。如果 c.sh 需要 10 秒，a.sh 需要 3 秒，b.sh 需要 5 秒来执行单独的执行时间，我需要再次执行 a.sh、b.sh 以确保它们存在直到 c.sh 完成。

我正在尝试这种方法，在上述情况下肯定行不通

```
 ./a.sh &
 while ps -p $! > /dev/null; do

./b.sh &
 pid_b=$!

./c.sh &
pid_c=$!

wait $pid_c
done 
```

我怎么得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:02:21.117

您可以使用临时文件作为标志来指示每个进程首次完成的时间。在后台循环中运行每个脚本，直到其他两个都至少完成一次。

```
flag_dir=$(mktemp -d flagsXXXXX)
flag_a=$flag_dir/a
flag_b=$flag_dir/b
flag_c=$flag_dir/c

( until [[ -f $flag_b && -f $flag_c ]]; do ./a.sh; touch $flag_a; done; ) &
( until [[ -f $flag_a && -f $flag_c ]]; do ./b.sh; touch $flag_b; done; ) &
( until [[ -f $flag_a && -f $flag_b ]]; do ./c.sh; touch $flag_c; done; ) &

# Each until-loop runs until it sees the other two have completed at least one
# cycle. Wait here until each loop finishes.
wait

# Clean up
rm -rf "$flag_dir" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:48:40.650

首先，您可以使用`kill -0`来测试进程的状态`c.sh`，而不是使用`wait`来等待它终止。

其次，您可以使用 2 个单独的进程来监视脚本的状态`a.sh`和`b.sh`

第三，这是假设这`c.sh`是运行时间最长的过程。

因此，监控进程 1 执行以下操作：

```
# I have pid_c
./a.sh &
pid_a=$!
while wait $pid_a; do
    if kill -0 $pid_c; then
        ./a.sh&
        pid_a=$!
    fi
done 
```

监控进程 2 执行以下操作：

```
# I have pid_c
./b.sh &
pid_b=$!
while wait $pid_b; do
    if kill -0 $pid_c; then
        ./b.sh &
        pid_b=$!
    fi
done 
```

因此，您将分别监控 2 个进程。但是，如果您还需要监视它们，则将监视器作为 2 个后台作业生成，一个简单的`wait`将与 2 个监视器一样等待`c.sh`。

注意：如果正在运行或已终止，则`kill -0 $PID`返回。`0``$PID``1``$PID`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:51:59.367

[**注意**这仅适用于bash。*ksh93 的* `kill`行为不同。]

只要至少允许您杀死一个进程，`kill -0`就会返回成功。根据需要调整间隔。

```
#! /bin/bash
interval=1
pids= && for t in 2 3; do
    (sleep $t && echo slept $t seconds) & pids=${pids:+$pids }$!
done

while (kill -0 $pids) 2>& -; do
    sleep $interval
    # optional reporting:
    for pid in $pids; do
        (kill -0 $pid) 2>&- && echo $pid is alive
    done
done 
```

结果是：

```
6463 is alive
6464 is alive
slept 2 seconds
[1]-  Done                    eval sleeper $t
6464 is alive
slept 3 seconds
[2]+  Done                    eval sleeper $t 
```

* * *

内置`kill`在错误方面不一致：

```
$ ksh -c 'kill -0 571 6133 && echo ok || echo no'
kill: 571: permission denied
no
$ bash -c 'kill -0 571 6133 && echo ok || echo no'
bash: line 0: kill: (571) - Operation not permitted
ok 
```

# mysql - 针对特定查询的 MySQL 索引

> ID：11880874
> 
> 赞同：3
> 
> 时间：2012-08-09T09:57:43.383
> 
> 标签：mysql, sql, optimization, indexing, query-optimization

我有这张桌子

```
attendance (4M rows at the moment, growing 1.2M per week):

-------------------------------------------------------------
| member_id | attendance_week | attendance_date | event_id  |
------------------------------------------------------------
|  INT (10) |   TINYINT(2)    |   TIMESTAMP     |TINYINT(3) |
-------------------------------------------------------------

attendance indeces:
--------------------------------------------------
| PRIMARY (attendance_week, member_id, event_id) |
| member_id (member_id)                          |
| event_id (event_id, attendance_week)
| total (attendance_week, event_id)              |
--------------------------------------------------

members (400k rows at the moment growing 750 a week):
-------------------------
| member_id |  dept_id  |
-------------------------
|  INT (10) |SMALLINT(5)|
-------------------------

member indeces:
-----------------------
| PRIMARY (member_id) |
| 
----------------------- 
```

事件是每周一次，这意味着您每周都会看到成对的`member_id`和`event_id`。

现在我必须为某个部门的每个事件生成一份报告`current attendance`（即，如果该成员已经签到），以及他们至少 4 周的出席情况（即`attended`/`total`事件持续时间）

**这是`current_attendance`报告的一部分**。我为一个部门获取所有成员，并`LEFT JOIN`通过本周的活动获取`NULL`缺勤：

```
SELECT
  m.member_id AS id,
  a.event_id AS attended
FROM
  members AS m
LEFT JOIN
  attendance AS a
  ON
    a.member_id = m.member_id AND
    a.attendance_week = :week AND
    a.event_id = :event
WHERE
  m.dept_id = :dept
GROUP BY
  m.member_id 
```

**这是`attended`报告的一部分**。：

```
SELECT
  a.member_id,
  COUNT(a.event_id)
FROM
  attendance a 
  JOIN
    members m 
    ON 
      a.member_id = m.member_id AND
      m.dept_id = :dept
WHERE
  a.attendance_week BETWEEN :start AND :end
GROUP BY
  a.member_id 
```

我可以通过简单地在第一个查询中再次使用`LEFT JOIN`该表来合并这两个查询。`attendance`

**最后是`total`部分**

```
SELECT
  attendance_week,
  COUNT(DISTINCT event_id)
FROM
  attendance
WHERE
  attendance_week BETWEEN :start AND :end
GROUP BY
  attendance_week 
```

这些是将针对这些表运行的主要查询。目前，查询平均运行**150 - 200 毫秒**（根据 phpMyAdmin），我认为这很慢。`EXPLAIN`告诉我，我的 indeces 正在**被使用**。

所以这是我的问题：

1.  有没有其他方法可以修改我的索引和查询以加快速度？
2.  我假设 MySQL 有一个已编译语句的缓存。我不是在谈论结果缓存，想想 PHP 操作码与 HTML 缓存。我已经尝试过`SQL_NO_CACHE`，但我仍然得到相同的响应时间，并且`query_cache_size`是 0。我可以发誓我看到 phpMyAdmin 以大约**800 毫秒**的速度报告了一次查询（这是不可接受的），但我现在没有得到它们。我如何衡量每次运行查询的真实速度？
3.  如果我将这些查询放在存储过程中，这些会更快吗？
4.  对存储方法有什么想法吗？该数据库目前大小约为 400MB。一年后，我不知道，也许是 3GB？这是可扩展的吗？说到 DBA，我真的很陌生，我读过主从复制和分区，但我不知道这是否有好处。

如果您需要更多信息，请在下面发表评论。我会尽力提供。我确实尝试过独自完成这项工作，但考虑到大型数据库（我迄今为止最大的数据库）和高性能的需求，我真的需要一些建议：D

谢谢

**编辑**

我刚刚意识到我的逻辑有一个可怕的缺陷，新注册的会员会出现出勤率低的情况，因为第三次查询没有考虑注册日期。我的成员表中有一个 registration_date 列，有什么方法可以将该变量合并到查询中？或者一次合并所有三个查询？因为它们都返回依赖于每个用户的值。

**编辑**

我设法合并了前两个查询：

```
 SELECT
      m.member_id AS id,
      a.event_id AS attended,
      COUNT(b.event_id) AS total_attended
    FROM
      members AS m
      LEFT JOIN
        attendance AS a
        ON
          a.member_id = m.member_id AND
          a.attendance_week = :week AND
          a.event_id = :event
      LEFT JOIN
        attendance AS b
        ON
          b.member_id = m.member_id AND
          b.attendance_week BETWEEN :start AND :end
    WHERE
      m.dept_id = :dept
    GROUP BY
      m.member_id 
```

此查询在第一次运行时运行 925 毫秒，在后续请求中运行 15 毫秒。

这是上述查询的结果`EXPLAIN`

```
members table:
id:            1
select_type:   SIMPLE
table:         m
type:          ref
possible_keys: dept_id
key:           dept_id
key_len:       3
ref:           const
rows:          88
Extra:         Using where; Using index

attendance table 1 (for the boolean attended part):
id:            1
select_type:   SIMPLE
table:         a
type:          eq_ref
possible_keys: PRIMARY,member_id,event_id,total
key:           PRIMARY
key_len:       6
ref:           const,arms_db.m.member_id,const
rows:          1
Extra:         Using index

attendance table 2 (for the total attendanded part):
id:            1
select_type:   SIMPLE
table:         b
type:          ref
possible_keys: PRIMARY,member_id,total
key:           member_id
key_len:       4
ref:           arms_db.m.member_id
rows:          5
Extra:         Using index 
```

最后`EXPLAIN`一个查询：

```
id:            1
select_type:   SIMPLE
table:         attendance
type:          range
possible_keys: PRIMARY,toral
key:           total
key_len:       2
ref:           NULL
rows:          9
Extra:         Using where; Using index for groub-by 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:32:11.160

在表上添加[覆盖](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)或聚集索引将为您提供最佳性能：

1.  您还可以在表成员上添加额外的索引：

    成员索引：（member_id，dept_id）

2.  您可以启用[查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache-configuration.html)来缓存查询输出，但查询缓存不适用于过程。要测量查询的准确速度，您可以使用`mysqlslap client utility` .

3.  存储过程中的查询在速度方面不会产生太大影响，但它会节省一些额外的查询解析和向客户端发送输出的开销。

4.  使用分片或复制将数据分布在不同的服务器上将有助于您提高可扩展性。在大表上进行分区也会使您受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:42:25.167

1.  您的设计似乎有效。我认为，在 200 毫秒（甚至高达 800 毫秒）内完成报告对于报告应用程序来说是非常好的。至于新的索引，我会首先检查它是否真的值得做，因为，比如说，如果你所有的成员都平均分布在 5 个部门上，那么 index on`member.dept_id`将没有用 - 执行完整扫描更便宜在这种情况下。

2.  我认为衡量查询的“真实”速度没有意义，因为数据库可以通过有效地缓存数据来加速数据访问。因此，如果您在新启动的数据库服务器上遇到这样的情况，您的查询大约需要 800 毫秒，而进一步的执行时间会下降到 50-100 毫秒，那么这是一个很好的设置，这就是我在日常工作中的目标.

3.  我对此表示怀疑，因为与调用时间过程解析所有语句的好处相比，存储过程会给你一点额外的时间来执行过程并获得它的结果。

4.  目前，您的速度对于非 OLTP 应用程序来说还不错。对我来说，似乎`attendance`按列对表进行分区`attendance_week`会给您带来很好的性能提升，因为您的所有查询都围绕该列进行。但是，当您在系统中拥有更多数据（至少值得 3-4 周）时，好处就会显现出来。

不过，对于 OLTP 系统，我的假设可能是错误的。您能否指定所提供示例的预期使用区域？

此外，最好查看`EXPLAIN`查询语句的实际输出。

# php - 从 jquery 和 php 中的 dropmenu 显示数据库的结果

> ID：11880878
> 
> 赞同：1
> 
> 时间：2012-08-09T09:57:53.960
> 
> 标签：php, jquery, mysql

我有一个下拉菜单，当我点击链接时，我想转到 view_products.php 页面，它应该会显示我在 cat=B1 中找到的所有产品。我想使用 jquery 将数据库中的结果加载到我的#content 中，但我完全卡住了。我试图通过查看教程编写一个 jquery 脚本，但我真的不知道如何将 cat 变量传递给我的 get_content 页面。php和mysql没问题，jquery就可以了。非常感谢/琳达

**导航.php**

```
<div>
<ul id="nav">
<li><a href="view_products.php?cat=B1">Item 1</li>
<li><a href="view_products.php?cat=C1">Item 2</li>
</ul>
</div> 
```

**view_products.php**

```
include('include/header.php');
include('include/nav.php');

<div id="content"></div>

include('include/footer.php'); 
```

**获取内容.php**

```
$cat=$_POST['cat'];
echo $cat; 
```

**display_product.js**

```
$(document).ready(function() {
 // initial
  $('#content').load('get_content.php');

  $('ul#nav li a').click(function() {
  var page = $(this).attr('href');
      $('#content').load('get_content.php', {cat:x});
      return false;
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:04:35.550

当您编写语法时，无法通过 ajax 加载请求知道 Post 变量，您可以使用 $.post ajax 请求来代替它。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:08:55.307

为什么需要 jQuery/Ajax 来做到这一点？您可以使用以下方法简单地捕获类别值：

```
$cat = $_GET['cat']; 
```

然后在您的`content`容器中，您可以运行查询以从数据库中提取记录

```
<div id="content">
  <?php
  if(isset($_GET['cat']))
  {
     $cat = $_GET['cat'];  // will store 'B1', 'C1' etc

     // connect to DB
     // pull data from DB using $cat
     // display the data
  }
  ?>
</div> 
```

# android - 如何从双卡手机获取两个 IMEI 号码？

> ID：11880881
> 
> 赞同：25
> 
> 时间：2012-08-09T09:58:09.890
> 
> 标签：android, imei

如何从双卡手机获取两个 IMEI 号码？谁能帮我解决这个问题。

![双卡手机截图](../Images/75cd4117e6b6ac4772c3f39d29a83058.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T06:17:35.480

有关 SIM #2（或任何其他非默认 SIM）的信息完全取决于制造商。Android 不提供用于多 SIM 卡设施的 API。Android api 仅支持默认 SIM 卡插槽。您可以联系 Micromax（设备制造商），如果他可以为您提供 api 来支持他的硬件组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T07:32:46.303

您可以尝试以下代码，它将对您有所帮助。

```
TelephonyManager manager= (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
try {
    Class<?> telephonyClass = Class.forName(manager.getClass().getName());
    Class<?>[] parameter = new Class[1];
    parameter[0] = int.class;
    Method getFirstMethod = telephonyClass.getMethod("getDeviceId", parameter);
    Log.d("SimData", getFirstMethod.toString());
    Object[] obParameter = new Object[1];
    obParameter[0] = 0;
    String first = (String) getFirstMethod.invoke(manager, obParameter);
    Log.d("IMEI ", "first :" + first);
    obParameter[0] = 1;
    String second = (String) getFirstMethod.invoke(manager, obParameter);
    Log.d("IMEI ", "Second :" + second);
} catch (Exception e) {
    e.printStackTrace();
} 
```

并添加对清单的权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# android - 我想要将屏幕更改为画布上另一个屏幕的按钮

> ID：11880882
> 
> 赞同：0
> 
> 时间：2012-08-09T09:58:19.123
> 
> 标签：android, view, canvas, surfaceview

我的原始应用程序上已经有按钮，但现在我在 Android 的画布上创建了一个图像并将两者结合在一起，但是我无法查看页面上的按钮，但只能看到页面上的图像。这些按钮旨在移动到不同的页面。有谁知道如何做到这一点。我还使用了扩展 Activity 而不是 View/SurfaceView 是可以的还是会导致问题？

谢谢。

# javascript - 值在 javascript 中未定义

> ID：11880883
> 
> 赞同：1
> 
> 时间：2012-08-09T09:58:21.630
> 
> 标签：javascript, jsp

看看这个：

```
if(session.getAttribute("mode")!=null){
    mode = (String)session.getAttribute("mode");
} 
```

的第一次值为`mode`空，因此我将`mode`值设置为脚本变量，如下所示：

```
var mode='<%=mode%>'; 
```

下面是我在加载表单时调用的方法，但它说`mode is undefined`

```
bodyOnLoad();
var mode='<%=mode%>';
alert("mode : "+mode);
function bodyOnLoad() {
    if(mode.length < 0){
        alert("mode empty 111111");
        document.getElementById("functiontype").value="view";
        document.getElementById("page").value="1";
        document.forms["frmTempcard"].submit(); 
        return;
    }                       
} 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:06:18.460

先声明变量。`mode`调用函数时`bodyOnLoad`未定义。

```
var mode='<%=mode%>';
bodyOnLoad(); 
```

# mysql - MySQL HAVING 行为不正常

> ID：11880884
> 
> 赞同：1
> 
> 时间：2012-08-09T09:58:23.930
> 
> 标签：mysql, stored-procedures, having

我有一个查询：

```
SELECT I.Id
    , CAST(SUBSTRING_INDEX(GROUP_CONCAT(I.StatusId ORDER BY I.TransactionId DESC), ',', 1) AS UNSIGNED) AS StatusId
    , SUM(I.RefundAmount) AS RefundAmount
    FROM (
        SELECT I.Id
            , IT.Id AS TransactionId
            , IT.StatusId
            , IF(IT.TypeId = 2, IT.RefundAmount, 0) AS RefundAmount
            FROM Items I
            INNER JOIN ItemTransactions IT ON IT.ItemId = I.Id
            WHERE I.Id = someValue
    ) I
    GROUP BY I.Id
    HAVING StatusId = 1 AND RefundAmount = 0 
```

where `Items`table 有存储在表中的事务记录`ItemTransactions`。我一直在使用这种类型的查询并为我工作，直到此时，该`having`子句出现了一些问题。

查询在`SQL Editors`使用时有效，但在`stored procedures`. （不要误会我的意思，我的大部分时间都在使用这个查询`stored procedures`）。逐行调试，发现`having`子句有问题。

作为临时修复，我将查询更改为：

```
SELECT I.Id
    , I.StatusId
    , I.RefundAmount
    FROM (
        SELECT I.Id
            , CAST(SUBSTRING_INDEX(GROUP_CONCAT(I.StatusId ORDER BY I.TransactionId DESC), ',', 1) AS UNSIGNED) AS StatusId
            , SUM(I.RefundAmount) AS RefundAmount
            FROM (
                SELECT I.Id
                    , IT.Id AS TransactionId
                    , IT.StatusId
                    , IF(IT.TypeId = 2, IT.RefundAmount, 0) AS RefundAmount
                    FROM Items I
                    INNER JOIN ItemTransactions IT ON IT.ItemId = I.Id
                    WHERE I.Id = someValue
            ) I
            GROUP BY I.Id
            --HAVING StatusId = 1 AND RefundAmount = 0
    ) I
    WHERE I.StatusId = 1 AND I.RefundAmount = 0 
```

查询工作正常。但我想知道是否有人已经遇到过这个问题，并找到了解决办法。我正在使用`MySQL 5.0`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:50:09.593

`WHERE`子句用于过滤数据的常用属性和表达式。`HAVING`子句用于在执行分组后过滤数据，它的参数应该是`GROUP BY`子句的参数，或者包含聚合函数的表达式。`WHERE`在, `GROUP BY`or子句中使用列的别名也是非法的`HAVING`，但它确实适用于该`ORDER BY`子句。

正如您所发现的，一种选择是使用子查询，然后列引用将起作用。`HAVING`另一种是在子句中复制整个表达式：

```
SELECT I.Id,
    CAST(SUBSTRING_INDEX(GROUP_CONCAT(I.StatusId ORDER BY I.TransactionId DESC),
           ',', 1) AS UNSIGNED) AS StatusId,
    SUM(I.RefundAmount) AS RefundAmount
    FROM (
        SELECT I.Id
            , IT.Id AS TransactionId
            , IT.StatusId
            , IF(IT.TypeId = 2, IT.RefundAmount, 0) AS RefundAmount
            FROM Items I
            INNER JOIN ItemTransactions IT ON IT.ItemId = I.Id
            WHERE I.Id = someValue
    ) I
    GROUP BY I.Id
    HAVING
    CAST(SUBSTRING_INDEX(GROUP_CONCAT(I.StatusId ORDER BY I.TransactionId DESC),
         ',', 1) AS UNSIGNED) = 1
    AND SUM(I.RefundAmount) = 0; 
```

* * *

**编辑：**仔细观察会导致这个问题[Using column alias in WHERE clause of MySQL query 会产生一个错误](https://stackoverflow.com/questions/942571/using-column-alias-in-where-clause-of-mysql-query-produces-an-error)和[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)，它概述了可以在`GROUP BY`,`HAVING`和`ORDER BY`子句中使用列别名，如果这样的别名用反引号引用，比如：

```
...
HAVING `StatusId` = 1 AND `RefundAmount` = 0 
```

# qt - win32 控件（QWinHost）未绘制在分层（即半透明）小部件（WS_EX_LAYERED）上

> ID：11880888
> 
> 赞同：4
> 
> 时间：2012-08-09T09:58:32.197
> 
> 标签：qt, winapi, qpainter, ws-ex-layered

我使用 QWinHost 移植了一个 win32 控件，并将其放在分层（半透明）小部件上。当我设置 WS_EX_LAYERED 标志时，win32 移植控件没有发生绘制。

```
SetWindowLong(winId(),
           GWL_EXSTYLE,
           GetWindowLong(winId(), GWL_EXSTYLE) | *WS_EX_LAYERED*); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T17:42:05.413

您需要告诉 Windows 如何绘制分层窗口。 [MSDN](http://msdn.microsoft.com/en-us/library/ms997507#layerwin_topic2a)说有两种方法；您几乎肯定需要[SetLayeredWindowAttributes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.85%29.aspx)，因为您不想更改控件的绘制代码。

所以之后

```
SetWindowLong(winId(),
           GWL_EXSTYLE,
           GetWindowLong(winId(), GWL_EXSTYLE) | WS_EX_LAYERED); 
```

添加

```
SetLayeredWindowAttributes(winId(), RGB(0,0,0), bAlpha, LWA_ALPHA); 
```

（当然，根据您的需要进行了调整）。

注意分层窗口必须是Windows 7以下的顶层窗口；只有 Windows 8 及更高版本支持分层子窗口。

# html - HTML表格在悬停时突出显示除第一行（标题）之外的行

> ID：11880892
> 
> 赞同：36
> 
> 时间：2012-08-09T09:58:37.837
> 
> 标签：html, hover, highlight

全部，

我有一个呈现到 HTML 表的 ASP.NET GridView。

```
<table>
    <tr><th>Col 1 Head</th><th>Col 2 Head</th></tr>
    <tr><td>Data 1</td><td>Data 2</td></tr>
    <tr><td>Data 3</td><td>Data 4</td></tr>
</table> 
```

当鼠标悬停在该行上时，我想突出显示该行-除了作为标题的第一行。

我只是对 JQuery 感到头晕目眩，并且对 CSS（CSS2 或 CSS3）有所涉猎。有没有首选的方法来做到这一点？

谁能给我一个起点？

干杯

安德斯

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-10T13:06:50.043

有一种方法可以实现所需的行为，而无需单独对每一行进行分类。以下是如何使用 CSS`:not`和`:first-child`选择器在悬停时突出显示除第一个（标题）之外的每个表格行：

```
tr:not(:first-child):hover {
    background-color: red;
} 
```

不幸的是，IE < 9 不支持`:not`，因此要以跨浏览器的方式执行此操作，您可以使用以下内容：

```
tr:hover {
    background-color: red;
}
tr:first-child:hover {
    background-color: white;
} 
```

基本上，第一个 CSS 规则包括**所有行**。`tr:first-child`为避免突出显示第一行，您可以通过选择 with然后将其保持`background-color`为白色（或任何未突出显示的行的颜色）来覆盖其悬停样式。

我希望这也有帮助！

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-08-13T13:17:32.720

要扩展 user2458978 的答案，最好的方法肯定是正确编码表格。

```
<table>
<thead>
    <tr><th></th></tr>
</thead>
<tbody>
    <tr><td></td></tr>
    <tr><td></td></tr>
</tbody>
</table> 
```

然后CSS很简单

```
table tbody tr:hover { background-color: red; } 
```

[这是一个 jsFiddle 示例](http://jsfiddle.net/U5PQ2/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-09T10:03:49.700

您可以使用 CSS`:hover`说明符执行此操作。这是一个演示：

```
<table>
    <tr><th>Col 1 Head</th><th>Col 2 Head</th></tr>
    <tr class = "notfirst"><td>Data 1</td><td>Data 2</td></tr>
    <tr class = "notfirst"><td>Data 3</td><td>Data 4</td></tr>
</table> 
```

CSS：

```
.notfirst:hover {
    background-color: red;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-06-06T09:46:21.573

`1.`将标题 tr 放在 thead 标记内

`2.`将其他 tr 放在 tbody 标签内

`3.`使用以下 CSS

```
table tr:not(thead):hover {
    background-color: #B0E2FF;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-30T19:45:04.043

对第一行使用 TH 标签并执行以下操作：

```
th {
background-color:#fff; 
```

}

对于所有其他行：

```
 tr:not(:first-child):hover {
    background-color:#eee;
} 
```

或者

```
tr:hover td {
    background-color:#eee;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-09T10:04:42.330

使用jQuery向td的父元素添加一个类（不会选择th）

```
$('td').hover(function(){
   $(this).parent().addClass('highlight');
}, function() {
   $(this).parent().removeClass('highlight');
}); 
```

然后添加 CSS 类

```
.highlight {
   background:red;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-22T23:57:33.723

为什么不简单地使用

```
tr>td:hover {
/* hover effect */
background-color: lightblue;
} 
```

这只会影响内部有 td 的表格行，而不影响内部有 th 的表格行。适用于所有浏览器。干杯，伙计们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-08T18:10:19.577

为什么不这样：

```
tr:first-child ~ tr { background-color:#fff; } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-31T09:20:20.473

根据我的要求，我必须突出显示除标题行之外的所有偶数行。

因此，这个答案可能不适合上述问题。

即便如此，我在这里给出我的答案是希望其他人在搜索引擎搜索中遇到此页面时可以使用我的答案。

我的回答是：

```
$("#tableName tr:even").not("tr:nth(0)").addClass("highlight"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-17T17:01:16.190

如果你的表是标准的，你有一个像这样的表：

```
<table>
    <thead>
        <tr>
            <th>title</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>cell</th>
        </tr>
    </tbody>
</table> 
```

所以你可以使用这个css代码：

```
table > *:not(thead) tr:hover{
    background-color: #f5f5f5;
} 
```

# javascript - 如何将超链接动态添加到 Javascript 中的 div 标签？

> ID：11880893
> 
> 赞同：0
> 
> 时间：2012-08-09T09:58:42.130
> 
> 标签：javascript, html

我想在功能区上添加一个超链接。我能够将超链接添加到现有的 div。我在页面上执行的每一项操作，超链接都会增加一个。我怎样才能使它（超链接）限制为一个？

我正在使用以下代码：

```
var mydiv = document.getElementById("myDiv"); 
var aTag = document.createElement('a');
aTag.setAttribute('href',"yourlink.htm");
aTag.innerHTML = "link text";
mydiv.appendChild(aTag); 
```

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:08:59.090

```
var aTag = document.createElement('a'); 
```

每次调用时创建一个新`anchor`元素。如果没有更多上下文，很难看出**为什么以及多久**调用此代码。

我们所知道的是，每次调用它时，您都会将其***附加***到 div 中，这就是为什么您有多个链接的原因。

```
mydiv.appendChild(aTag); 
```

# c# - 比较两个 csv 文件的特定列

> ID：11880894
> 
> 赞同：0
> 
> 时间：2012-08-09T09:58:45.000
> 
> 标签：c#, csv

我有两个 csv 文件，每个文件有 18 列...我想用 c# 将第一个文件的第一列与第二个文件的第一列进行比较，将第一个文件的第三列与第二个文件的第三列进行比较，当发现差异时，我想保存到另一个文件，所以第三个文件应该有两列作为输出。所以我需要以某种方式告诉哪一列是第一列，哪一列是第三列，然后进行比较。

有什么建议我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:06:07.520

基础是逐行读取每个文件，然后拆分每个字符串。对于 CSV 文件，您通常使用逗号作为分隔符，但这也可以是制表符或类似的字符。所以使用你拥有的那个。然后你会得到类似的东西

```
 string line;
        System.IO.StreamReader file = new System.IO.StreamReader("c:\\test.csv");
        while ((line = file.ReadLine()) != null)
        {
            var arr = line.Split(new char[] { ',' });
            // do your comparison
        } 
```

虽然你需要打开 2 个文件。然后，您可以将文件 1 中的数组与文件 2 中的数组进行比较（数组索引 == 列，从 0 开始）。类似地，您可以使用 String.Join 再次创建输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:06:28.553

将 2 个 excel 表浏览到 2 个数据表。Comapre 2 个表，如果有差异，请将其放入新表中。

最后将表格导出到 Excel。

# javascript - jQuery Animate 通过特定的 div

> ID：11880896
> 
> 赞同：1
> 
> 时间：2012-08-09T09:58:47.550
> 
> 标签：javascript, jquery, jquery-animate

是否可以使用特定路径使对象从一个位置动画到另一个位置？例如，在从 pos1 动画到 pos2 时，如果途中有一个类为“no-ok”的 div，它不应该去那里，而是在它的左、右、上或下找到最近的名为 OK 的 div。如果没有 div 调用 ok，它应该停止。下图说明：

![在此处输入图像描述](../Images/16aca232e8a618becd162411b588daf6.png)

到目前为止，我只能从 pos1 动画到 pos2，但我不知道如何检查是否有 div no-ok 的方式，以及如何找到最近的 div 类 ok。

**HTML：**

```
 <div class="container">
        <div id="pos1"></div>
        <div class="ok"></div>
        <div class="no-ok"></div>
        <div class="ok"></div>
        <div class="pos2"></div>
    </div> 
```

**jQuery：**

```
$('.container').click(function(){
    var pos1 = $('#pos1').position();
    $(this).animate({ 'top': pos1.top + 'px', 'left': pos1.left + 'px'}, 200, function(){
        //end
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:19:20.870

动画结构需要是这样的：

**[这是 jsFiddle 玩。](http://jsfiddle.net/jW4eH/27/)**

```
var pTop = parseInt($('.container').css('top'));
var pLeft = parseInt($('.container').css('left'));

$('.container').click(function(){
    var $this = $(this);
    $this.stop().animate({'left': (pLeft * 2) + 'px'},1000,function(){
    //firt step = go 2x right
        $this.stop().animate({'top':  (pTop*3)  + 'px'},2000,function() {
        //second step = go 2x bottom
            $('.container').animate({"left": "-=100px"},1000);
            //third step = go begining left position
        });
    });
});​ 
```

# xml - 将 XML 数据批量插入 SQL Server 2005 数据库的最佳方法

> ID：11880897
> 
> 赞同：5
> 
> 时间：2012-08-09T09:58:47.207
> 
> 标签：xml, sql-server-2005, xml-parsing, xml-serialization

我必须将大约 25 - 30 个 XML 切碎到我的 SQL Server 2005 数据库中（总大小约为 10 MB）。我需要这个逻辑在新的 xml 文件复制到服务器后自动运行。

我已经阅读了该站点和其他站点上的许多帖子，但仍然无法就我必须使用什么来分解数据做出结论。

请让我知道我应该选择哪个选项

1.  SqlBulk 复制
2.  C# 反序列化
3.  SSIS

我必须为我的数据模型创建 C# 类。所以 C# 反序列化是我的首选。但请让我知道从性能角度来看哪个选项是正确的。

我忘记提到的另一件事是 XML 文件的结构会有所不同。它不会是一样的。我将拥有包含所有可能填充的列的表。但是 xmls 不会始终拥有所有数据。

xml 示例

```
<?xml version="1.0" encoding="utf-8"?>
<estateList date="2012-08-06T12:17:05">
  <uniqueID>22XXln</uniqueID>
  <category name="Apartment" /> 
  <listingAgent>
     <name>DIW Office</name>  
     <telephone type="BH">96232 2345</telephone> 
     <telephone type="BH">9234 2399</telephone>
     <email>abcd@abc.com</email>    
  </listingAgent>
  <inspectionTimes /> 
  <description>AVAILABLE NOW. </description> 
  <price>0</price>  
  <address display="yes">      
    <street>Lachlsan Street</street>        
    <ImagesContainer>        
       <img id="m" modTime="2012-08-06-12:17:05" url="http://images/2409802.jpg" format="jpg" /> 
       <img id="a" modTime="2012-08-06-12:17:05" /> 
    </ImagesContainer>     
  </address>
</estateList> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:48:03.703

假设您将 XML 保存在 SQL 变量中，您可以使用 SQL Server 2005 中添加的 XQuery 支持直接使用直接 T-SQL 轻松解析大部分信息。

尝试类似：

```
DECLARE @Input XML = '<estateList date="2012-08-06T12:17:05">
  <uniqueID>22XXln</uniqueID>
  <category name="Apartment" /> 
  <listingAgent>
     <name>DIW Office</name>  
     <telephone type="BH">96232 2345</telephone> 
     <telephone type="BH">9234 2399</telephone>
     <email>abcd@abc.com</email>    
  </listingAgent>
  <inspectionTimes /> 
  <description>AVAILABLE NOW. </description> 
  <price>0</price>  
  <address display="yes">      
    <street>Lachlsan Street</street>        
    <ImagesContainer>        
       <img id="m" modTime="2012-08-06-12:17:05" url="http://images/2409802.jpg" format="jpg" /> 
       <img id="a" modTime="2012-08-06-12:17:05" /> 
    </ImagesContainer>     
  </address>
</estateList>'

SELECT
    EstateListDate = EstL.value('@date', 'datetime'),
    UniqueID = EstL.value('(uniqueID)[1]', 'varchar(20)'),
    Category = EstL.value('(category/@name)[1]', 'varchar(20)'),
    ListingAgentName = EstL.value('(listingAgent/name)[1]', 'varchar(50)'),
    ListingAgentTel = EstL.value('(listingAgent/telephone)[1]', 'varchar(50)'),
    ListingAgentEMail = EstL.value('(listingAgent/email)[1]', 'varchar(250)'),
    [Description] = EstL.value('(description)[1]', 'varchar(250)'),
    Price = EstL.value('(price)[1]', 'decimal(14,2)'),
    DisplayAddress = EstL.value('(address/@display)[1]', 'varchar(10)'),
    AddressStreet = EstL.value('(address/street)[1]', 'varchar(100)')
FROM @input.nodes('/estateList') AS Tbl(EstL) 
```

你应该得到：

![在此处输入图像描述](../Images/efac4652eb3d841f19303759d380d017.png)

这些数据可以很容易地插入到表中。并且可以使用相当简单的 SSIS 包对磁盘上的任意数量的 XML 文件运行此查询（枚举 XML，将每个 XML 加载到 SQL 变量中，解析它，将数据插入表等）

**但是：**具有挑战性的部分将是以下问题：

*   可以有多个上市代理吗？如果是的话：如何处理？
*   可以有多个电话号码以及如何处理？
*   如何处理每个地址的多个图像

等等....

**更新：**这里的查询将从该 XML 输入中提取`UniqueID`每个完整`<img>`标签的信息并显示它（或将其插入另一个表中）：

```
SELECT
    UniqueID = @input.value('(/estateList/uniqueID)[1]', 'varchar(20)'),
    ImageID = Images.value('(img/@id)[1]', 'varchar(20)'),
    ImageModTime = Images.value('(img/@modTime)[1]', 'varchar(50)'),
    ImageFormat = Images.value('(img/@format)[1]', 'varchar(20)'),
    ImageURL = Images.value('(img/@url)[1]', 'varchar(250)')
FROM 
    @input.nodes('/estateList/address/ImagesContainer') AS Tbl(Images) 
```

# android - 如何摆脱 java.lang.OutOfMemoryError: android 中的线程创建失败？

> ID：11880898
> 
> 赞同：2
> 
> 时间：2012-08-09T09:58:47.860
> 
> 标签：android, multithreading, exception, handler

我在一次执行的时间中使用了超过 15 个处理程序，一个在完成时超过另一个处理程序。我得到 java.lang.OutOfMemoryError：日志中的线程创建失败并且应用程序崩溃，代码第一次运行良好并崩溃第二次由于这个问题我该如何解决这个问题。请帮助解决这个问题。谢谢。

我的日志是

```
 08-09 13:36:12.125: E/AndroidRuntime(1473): FATAL EXCEPTION: main
08-09 13:36:12.125: E/AndroidRuntime(1473): java.lang.OutOfMemoryError: thread creation failed
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.lang.VMThread.create(Native Method)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.lang.Thread.start(Thread.java:1232)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.util.Timer$TimerImpl.<init>(Timer.java:192)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.util.Timer.<init>(Timer.java:369)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.util.Timer.<init>(Timer.java:389)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.util.Timer.<init>(Timer.java:396)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at com.CarBuyCo.Slotter.rollerstopthree(Slotter.java:655)*
08-09 13:36:12.125: E/AndroidRuntime(1473):     at com.CarBuyCo.Slotter$32.run(Slotter.java:593)*
08-09 13:36:12.125: E/AndroidRuntime(1473):     at android.os.Handler.handleCallback(Handler.java:587)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at android.os.Looper.loop(Looper.java:130)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.lang.reflect.Method.invokeNative(Native Method)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at java.lang.reflect.Method.invoke(Method.java:507)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
08-09 13:36:12.125: E/AndroidRuntime(1473):     at dalvik.system.NativeStart.main(Native Method) 
```

# automation - 如何修改luntbuild邮件通知模板？

> ID：11880904
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:00.673
> 
> 标签：automation, notifications, continuous-integration, luntbuild

我们正在使用 luntbuild-1.6.2 进行构建自动化。我们想在通过 luntbuild 发送的电子邮件通知中添加几个变量，例如颠覆位置等。

是否可以修改 luntbuild 的电子邮件模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:35:20.720

再次阅读[手册](http://luntbuild.javaforge.com/manual/guide/manual.html)后，我能够找到模板所在的文件。

简单编辑

```
<luntbuild installation path>/templates/email/simple-build.vm 
```

文件，您可以使用一组[预定义的变量](http://luntbuild.javaforge.com/manual/guide/manual.html#adduser)自定义模板。

# eclipse - 在eclipse中对项目进行排序

> ID：11880905
> 
> 赞同：4
> 
> 时间：2012-08-09T09:59:01.493
> 
> 标签：eclipse

是否可以按项目状态（打开或关闭？）对 Package（或 Project）Exporer View 中的项目进行排序。我知道工作集，但这实际上不是我想要的:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T10:11:26.460

我认为你应该再看看工作集，在我看来，这是组织项目的最佳方式。如果您在任一资源管理器的下拉菜单中设置`Top level elements`为`working sets`，则所有项目都将在工作集下排序。

无论如何，据我所知，排序顺序无法更改，但您可以选择在包资源管理器中隐藏已关闭的项目。在下拉菜单中，转到`Filters`并选择隐藏已关闭的项目。

# r - 通过函数将子集参数传递给子集

> ID：11880906
> 
> 赞同：6
> 
> 时间：2012-08-09T09:59:09.523
> 
> 标签：r, subset

我想要一个调用`subset`并传递`subset`参数的函数：

```
df <- data.frame(abc=c("A","A","B","B"),value=1:4)
subset(df,abc=="A")
## works of course:
#  abc value
#1   A     1
#2   A     2

mysubset <- function(df,ssubset)
  subset(df,ssubset)

mysubset(df,abc=="A")
## Throws an error
# Error in eval(expr, envir, enclos) : object 'abc' not found

mysubset2 <- function(df,ssubset)
  subset(df,eval(ssubset))

mysubset2(df,expression(abc=="A"))
## Works, but needs expression 
```

我尝试了`substitute`，但找不到正确的组合。我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T10:08:29.393

你也需要`eval()`并且`parse()`在那里：

```
mysubset <- function(df, ssubset) {
  subset(df, eval(parse(text=ssubset)))
}
mysubset(df, "abc=='A'")
#   abc value
# 1   A     1
# 2   A     2 
```

`"`请注意，您需要嵌套引号，因此根据需要在和之间来回切换`'`。

* * *

根据您的评论，也许这样的事情也很有趣：

```
mysubset <- function(df, ...) {
  ssubset <- deparse(substitute(...))
  subset(df, eval(parse(text = ssubset)))
} 
```

用法：`mysubset(df, abc=='A')`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-07T21:24:45.047

A5C1D2H2I1M1N2O1R2T1 答案有效，但您可以通过简单地使用以下方法跳过整个解析/解析周期：

```
mysubset <- function(df, p) {
  ps <- substitute(p)
  subset(df, eval(ps))
} 
```

# java - 无法读取解码的 mp3 流

> ID：11880907
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:15.873
> 
> 标签：java, audio, javasound

我正在开发一个使用 mp3 编码/解码的应用程序。虽然原则上它对大多数文件都是正确的，但也有一些例外。我检测到这些文件缺少标题。尝试解码时出现数组越界异常。我使用了两种方法，但都失败了。

首先：

```
 DecodedMpegAudioInputStream dais = (DecodedMpegAudioInputStream) AudioSystem.getAudioInputStream(daisf, ais);
    byte[] audioData = IOUtils.toByteArray(dais);//exception here 
```

第二个：

```
 ByteOutputStream bos = new ByteOutputStream();
    // Get the decoded stream.
    byte[] byteData = new byte[1];
    int nBytesRead = 0;
    int offset = 0;
    int cnt=1;

    while (nBytesRead != -1) {
        System.out.println("cnt="+cnt);
        nBytesRead = dais.read(byteData, offset, byteData.length);//exception here at first loop
        if (nBytesRead != -1) {
            int numShorts = nBytesRead >> 1;
            for (int j = 0; j < numShorts; j++) {
                bos.write(byteData[j]);
            }
        }
        cnt+=1;
    }
    byte[] audioData = bos.getBytes(); 
```

似乎标头或其结构存在问题，因为*dais*流具有内容/字节。然而，它可以用 audacity 和 ffplay 打开，所以我相信应该有一个解决方法。任何想法如何应对它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:00.737

您可以使用代码冗余来提高可靠性。查看替代库，例如 Xuggler 或 JLayer。

# jquery - 单击它时使用jquery切换是-否图像

> ID：11880909
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:21.377
> 
> 标签：jquery, html, image, onclick, attr

我编写了一个使用 jQuery 将图像从 Yes 切换到 No 的代码。

```
$(function() {
    $('#s-ref').click(function(){
        $("#s-img").attr('src',"no.png");
    });
}); 
```

html是：

```
<a href="#" id="s-ref"><img src="yes.png" alt="" id="s-img"></a> 
```

如何修改上面的 jQuery 代码，使其切换回并强制（是/否/是/否/是...）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:02:15.923

检查img src ...

```
$(function() {
    $('#s-ref').click(function(){
        if ($("#s-img").attr('src') == 'yes.png')
          $("#s-img").attr('src',"no.png");
        else
          $("#s-img").attr('src',"yes.png");
    });
}); 
```

或者...如果 scr 包含“yes.png”，例如“/foo/barr/yes.png”，这将起作用：

```
$(function() {
    $('#s-ref').click(function(){
        if ($('#s-img[src*="yes.png"]').length > 0)
          $("#s-img").attr('src',"no.png");
        else
          $("#s-img").attr('src',"yes.png");
    });
}); 
```

这是一个小提琴来说明后一个答案 - [http://jsfiddle.net/nz35B/](http://jsfiddle.net/nz35B/)

# compiler-construction - 从不同格式的目标文件生成可执行文件

> ID：11880910
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:23.583
> 
> 标签：compiler-construction, linker, executable, bfd

假设我有两个从 gcc 编译的文件 main.o 和另一个从 MSVC 编译的文件 function.o；是否可以从这些文件中生成可执行文件（通过链接）？这是为 BFS（二进制文件描述符）库设计的吗？我的意思是我可以使用 BFS 来做到这一点吗？如果没有，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:02:22.940

> 是否可以从这些文件中生成可执行文件（通过链接）？

也许。

`C++`不同编译器生成的代码不兼容链接，但`C`代码通常是（至少在 UNIX 上）。在 Windows 上，它可能会也可能不会。至少，您应该告诉我们您用于构建对象的版本`MSVC`和版本。`gcc`

> 这是为 BFS（二进制文件描述符）库设计的吗？

你可能是说`BFD` [图书馆](http://en.wikipedia.org/wiki/Binary_File_Descriptor_library)。不，这不是它的用途。

# sql - 使用子查询派生表错误更新

> ID：11880911
> 
> 赞同：3
> 
> 时间：2012-08-09T09:59:24.647
> 
> 标签：sql, sybase, derived-table

我有以下 SQL 语句来简单地`#temp`使用 Sybase 15 数据库中的最新包版本号更新临时表。

```
UPDATE t
SET versionId = l.latestVersion
FROM #temp t INNER JOIN (SELECT gp.packageId
                                , MAX(gp.versionId) latestVersion
                         FROM Group_Packages gp 
                         WHERE gp.groupId IN (SELECT groupId 
                                              FROM User_Group 
                                              WHERE userXpId = 'someUser')
                         GROUP BY gp.packageId) l
ON t.packageId = l.packageId 
```

对我来说（主要是 Oracle 和 SQL Server 的经验比 Sybase 多）这句话几乎没有错。但是，Sybase 会引发异常：

```
You cannot use a derived table in the FROM clause of an UPDATE or DELETE statement. 
```

现在，我不明白这里有什么问题。我认为这是因为使用了聚合 / GROUP BY。当然，我可以将子查询放在临时表中并加入它，但我真的很想知道“正确”的方法应该是什么以及到底是什么错误。

任何想法或指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:28:22.993

SYBASE 似乎不支持 UPDATE FROM 类中的嵌套查询。[类似问题](https://stackoverflow.com/questions/10436084/how-do-i-update-multiple-columns-with-a-subquery-in-a-single-statement)

尝试使用这个：

```
UPDATE #temp
SET versionId =  (SELECT MAX(gp.versionId) latestVersion
                         FROM Group_Packages gp 
                         WHERE gp.packageId=#temp.packageId
                                and
                               gp.groupId IN (SELECT groupId 
                                              FROM User_Group 
                                              WHERE userXpId = 'someUser')

                         ) 
```

如果 l.latestVersion 为 NULL 怎么办？你想用 null 更新 #temp 吗？如果没有，则添加 WHERE：

```
 WHERE (SELECT MAX(gp.versionId)
                          ....
                                 ) is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:26:46.793

我猜这是 Sybase 的限制（不允许派生表）`FROM`在`UPDATE`. 也许你可以这样重写：

```
UPDATE t
SET t.versionId = l.versionId
FROM #temp t
  INNER JOIN 
    Group_Packages l
      ON t.packageId = l.packageId
WHERE
    l.groupId IN ( SELECT groupId 
                   FROM User_Group 
                   WHERE userXpId = 'someUser')
  AND
    l.versionId =
        ( SELECT MAX(gp.versionId)
          FROM Group_Packages gp 
          WHERE gp.groupId IN ( SELECT groupId 
                                FROM User_Group 
                                WHERE userXpId = 'someUser')
            AND gp.packageId = l.packageId
        ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:10:35.450

#temp 的表别名称为“t”，原始表称为“t”。

我的猜测是这就是问题所在。

我想你想开始：

```
update #temp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-10T01:37:44.767

此语法在 Sybase 中有效吗？

```
update dstTable T
set (T.field1, T.field2, T.field3) = 
       (select S.value1, S.value2, S.value3
        from srcTable S
         where S.key = T.Key); 
```

我相信相关子查询可以像你喜欢的那样复杂（包括使用 CTE 等）。它只需要投影正确数量（和类型）的值。

# android - 在向 Arduino 发送数据和从 Android 向 Arduino 接收数据时，我得到一秒或多秒的延迟。如何减少这种延迟？

> ID：11880913
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:33.890
> 
> 标签：android, arduino

我正在开发一个应用程序，用于通过 Arduino 从 Android 设备读取传感器数据。我能够设置通信并读取该数据。该数据通过 USB 电缆以字节数组的形式来自 Arduino。

从那个字节数组中，我将它读入一个字节并显示在 Android 设备上，当我从 Arduino 接收到所有数据时，我将输出发送到 Arduino。它使[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)闪烁。在这次交流之间，我得到了一秒钟的延迟。如何减少沟通中的延迟？

我从 arduino 到 android 接收数据的代码是：

```
 public void run() {
        int ret = 0;
        //byte[] buffer = new byte[16384];
        byte[] buffer = new byte[65536];
        int i;
        i = 0;
        while(i<1){
            try {
                startSendHandshakeDataExecTime = System.currentTimeMillis();
                ret = mInputStream.read(buffer);

                for(int a=0;a<noOfFlowSensors;a++){
                    intListFlowBytes.add((int)buffer[a]);
                }
                for(int b=0;b<noOfAnalogSensors;b++){
                    intListAnalogBytes.add((int)buffer[noOfFlowSensors+b]);
                }
                for(int c=0;c<noOfSwitches;c++){
                    intListSwitchesBytes.add((int)buffer[noOfFlowSensors+noOfAnalogSensors+c]);
                }

                /*for (int n = 0; n <noOfFlowSensors + noOfAnalogSensors + noOfSwitches; n++)
                {*/
                endSendHandshakeDataExecTime  = System.currentTimeMillis();
                 Message m = Message.obtain(mHandlerHandShake);
                    //m.obj = new TelemetryPacket(composeInt(buffer[i + 1],buffer[i + 2]));
                    //m.obj = new ValueMsg('f',ret,buffer[0],composeInt(buffer[1],buffer[2]),buffer[3],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                //  m.obj = new ValueMsg('f',ret,buffer[0],buffer[1],buffer[2],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                    m.obj = new ValueMsgHandShake(""+(endSendHandshakeDataExecTime-startSendHandshakeDataExecTime),ret,intListFlowBytes,intListAnalogBytes,intListSwitchesBytes,1);
                    mHandlerHandShake.sendMessage(m);

              // }

                    mInputStream.close();
                break;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        while (true) { // read data
            try {
                startTime = System.currentTimeMillis();
                startReceiveDataExecTime = System.currentTimeMillis();
                ret = mInputStream.read(buffer);

                    for(int p=0;p<noOfFlowSensors;p++){
                        intListFlowValues.add((int)buffer[p]);
                        //intPulseValues = (int)buffer[p];

                    }
                    Message mPulse = Message.obtain(mHandlerPulseSensors);
                    //m.obj = new TelemetryPacket(composeInt(buffer[i + 1],buffer[i + 2]));
                    //m.obj = new ValueMsg('f',ret,buffer[0],composeInt(buffer[1],buffer[2]),buffer[3],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                //  m.obj = new ValueMsg('f',ret,buffer[0],buffer[1],buffer[2],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                    mPulse.obj = new ValueMsgPulseSensors("f",ret,intListFlowValues);
                    mHandlerPulseSensors.sendMessage(mPulse);

                    for(int a=0;a<2*noOfAnalogSensors;a=a+2){
                            intListAnalogValues.add((int)(composeInt(buffer[noOfFlowSensors+a],buffer[noOfFlowSensors+a+1])));
                        //  intAnalogValues = (int)buffer[composeInt(buffer[noOfFlowSensors+a],buffer[noOfFlowSensors+a+1])];

                    }
                    Message mAnalog = Message.obtain(mHandlerAnalogSensors);
                    //m.obj = new TelemetryPacket(composeInt(buffer[i + 1],buffer[i + 2]));
                    //m.obj = new ValueMsg('f',ret,buffer[0],composeInt(buffer[1],buffer[2]),buffer[3],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                //  m.obj = new ValueMsg('f',ret,buffer[0],buffer[1],buffer[2],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                    mAnalog.obj = new ValueMsgAnalogSensors("f",ret,intListAnalogValues);
                    mHandlerAnalogSensors.sendMessage(mAnalog);

                    for(int l=0;l<noOfSwitches;l++){
                        intListSwitchesValues.add( (int)buffer[noOfFlowSensors+2*noOfAnalogSensors+l]);
                        //intSwitchValues = (int)buffer[noOfFlowSensors*intListFlowBytes.size()+intListAnalogBytes.size()*noOfAnalogSensors+l];

                    }
                    Message mSwitch = Message.obtain(mHandlerSwitchSensors);
                    //m.obj = new TelemetryPacket(composeInt(buffer[i + 1],buffer[i + 2]));
                    //m.obj = new ValueMsg('f',ret,buffer[0],composeInt(buffer[1],buffer[2]),buffer[3],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                //  m.obj = new ValueMsg('f',ret,buffer[0],buffer[1],buffer[2],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                    mSwitch.obj = new ValueMsgSwitchSensors("f",ret,intListSwitchesValues);
                    mHandlerSwitchSensors.sendMessage(mSwitch);
            /*      int intEnd=(int)buffer[noOfFlowSensors+noOfAnalogSensors+noOfSwitches+1];
                    for (int n = 0; n <noOfFlowSensors + noOfAnalogSensors + noOfSwitches; n++)
                        {
                         Message m = Message.obtain(mHandler);
                            //m.obj = new TelemetryPacket(composeInt(buffer[i + 1],buffer[i + 2]));
                            //m.obj = new ValueMsg('f',ret,buffer[0],composeInt(buffer[1],buffer[2]),buffer[3],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                        //  m.obj = new ValueMsg('f',ret,buffer[0],buffer[1],buffer[2],composeInt(buffer[4],buffer[5]),buffer[6],composeInt(buffer[7],buffer[8]),buffer[9],composeInt(buffer[10],buffer[11]),buffer[12],buffer[13],buffer[14],buffer[15]);
                            m.obj = new ValueMsg1('f',ret,intListFlowValues,intListAnalogValues,intListSwitchesValues,intEnd);
                            mHandler.sendMessage(m);

                     //  }
*/                                  
                    i += 1;
                    endReceiveDataExecTime = System.currentTimeMillis();

                    Message mReceivedDataDelay = Message.obtain(mHandlerReceiveDataDelay);
                    mReceivedDataDelay.obj = new ValueMsgReceivedDataDelay(""+ (endReceiveDataExecTime-startReceiveDataExecTime));
                    mHandlerReceiveDataDelay.sendMessage(mReceivedDataDelay);

                    mInputStream.close();
                    OutputDataAfterDataReceived();

            } catch (IOException e) {
                break;
            } 

        }
        //sendOutputData();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:20:12.300

您描述的行为似乎是这篇文章中描述的串行问题的自动重置：[https ://stackoverflow.com/a/10921900/1440715](https://stackoverflow.com/a/10921900/1440715)

当 Arduino 接收到来自 Arduino IDE 以外的大多数设备的串行通信时，它会自动重置。这就是为什么您可以从 IDE 发送但不能从其他任何东西发送（无需特别注意）。

我有一个 Uno，并在 Reset 和 Ground 之间放置了一个电容器。这是一个页面，其中包含有关该主题的一些很好的信息。
祝你好运。 [http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-03T04:02:25.663

两种简单的解决方案，保证对仍在寻找的任何人都有效。在arduino代码中： -

1.  将延迟增加到 50 到 100 毫秒。

2.  `Serial.begin(9600)`在in之后添加这个`setup()`；

    ```
    Serial.setTimeout(50); 
    ```

第二步是最重要的。只有在我添加了上面的代码之后它才对我有用。当我遇到完全相同的问题时，在我看过的许多其他论坛中并没有经常提到这一点。

# actionscript-3 - 在 TextFlow AS3 Flex 中使用 VerticalAlignment 和 InlineGraphicElement

> ID：11880916
> 
> 赞同：3
> 
> 时间：2012-08-09T09:59:44.070
> 
> 标签：actionscript-3, apache-flex

我正在使用 a`SpanElements`内的数字来制作一段文本`ParagraphElement`，都在 a 内`TextFlow`。它还有`InlineGaphicElements`一些 ，其中一些的高度大于文本行高。在这些情况下，我希望定位图形，使文本与图像的中间对齐。

我发现似乎这样做的最明显的事情是将s`VerticalAlignment`内的属性设置为，但无论我将其设置为什么，这些似乎都没有区别。我认为这是因为它只能应用于容器内的整体。`InlineGaphicElement``VerticalAlignment.MIDDLE``TextFlow`

我在这方面有点碰壁，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T04:34:27.720

设置 InlineGaphicElements 基线移位。

# javascript - 如何在不干扰本机控件的情况下向我的 HTML5 视频添加点击播放？

> ID：11880917
> 
> 赞同：18
> 
> 时间：2012-08-09T09:59:49.183
> 
> 标签：javascript, html5-video

我正在使用以下代码向 HTML5 视频添加点击播放功能：

```
$('video').click(function() {
  if ($(this).get(0).paused) {
    $(this).get(0).play();
  }
  else {
    $(this).get(0).pause();
  }
}); 
```

它可以正常工作，只是它会干扰浏览器的本机控件：也就是说，当用户单击暂停/播放按钮时，它会捕获，立即反转他们的选择并使暂停/播放按钮无效。

有没有办法只选择*DOM*中的视频部分，或者失败了，有一种方法可以捕获对视频容器的*控件*部分的点击，这样我就可以在用户按下时忽略/反转点击播放功能暂停/播放按钮？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T20:56:01.043

您可以在捕获点击事件的视频顶部添加一个图层。然后在播放视频时隐藏该图层。

（简化的）标记：

```
<div id="container">
    <div id="videocover">&nbsp;</div>
    <video id="myvideo" />
</div> 
```

剧本：

```
$("#videocover").click(function() {
    var video = $("#myvideo").get(0);
    video.play();

    $(this).css("visibility", "hidden");
    return false;
});

$("#myvideo").bind("pause ended", function() {
    $("#videocover").css("visibility", "visible");
}); 
```

CSS：

```
#container {
    position: relative;
}

/*
    covers the whole container
    the video itself will actually stretch
    the container to the desired size
*/
#videocover {
    position: absolute;
    z-index: 1;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-20T02:35:36.857

我知道这是一个老问题，但我遇到了同样的问题并找到了其他解决方案！点击播放视频，点击暂停。但作为原始海报，我遇到了控件问题。像这样用jquery解决了这个问题：

```
$("video").click(function (e) {
    if(e.offsetY < ($(this).height() - 36)) // Check to see if controls where clicked
    {
        if(this.paused)
            this.play();
        else
            this.pause();
    }
}); 
```

我检查点击中的偏移量，如果它超出了控件，我的播放/暂停功能不会做任何事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T20:52:50.183

你可以试试 event.stopPropagation 看看是否可行。虽然我认为这要么会阻止本机控件工作，要么不做任何事情。

```
$('video').click(function(event) {
  event.stopPropagation();
  if ($(this).get(0).paused) {
    $(this).get(0).play();
  }
  else {
    $(this).get(0).pause();
  }
}); 
```

如果浏览器将本机控件和视频视为同一元素的所有部分（我相信他们确实如此），那么您可能不走运。jQuery 的 event.target 不允许您区分单击视频和单击控件之间的区别。

所以我认为你最好的选择是[构建自己的控件](http://blog.steveheffernan.com/2010/04/how-to-build-an-html5-video-player/)（旧教程，仍然非常简单）。或者要求浏览器开发人员在启用控件时单击视频播放/暂停。似乎默认情况下应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T13:46:28.067

这里有很好的答案。谢谢你的这些。这是我想出的使控件可点击的技巧，所有**jQuery**。

```
$('#video_player').click(function(e){

    var y = e.pageY - this.offsetTop;

    //Subtract how much control space you need in y-pixels.
    if(y < $(this).height() - 40) 
    {
        //$(this).get(0).play();
        //... what else?
    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T08:58:11.270

[Torsten Walter 的解决方案](https://stackoverflow.com/a/11891812/113292)效果很好，它是一个相当优雅的问题解决方案，它可能是处理它的最佳方法，即使它不处理点击暂停。然而，他的解决方案让我想到了一个 hacky 方法来做到这一点，我想出了这个：

### 标记

```
<div id="container">
  <div id="videocover">&nbsp;</div>
  <video id="myvideo" />
</div> 
```

### JavaScript

```
$('#videocover').click(function(event) {
  var video = $('#myvideo')[0];
  if (video.paused) {
    video.play();
  }
  else {
    video.pause();
  }
  return false;
}); 
```

### CSS

```
#container {
  position: relative;
}

#videocover {
  position: absolute;
  z-index: 1;
  height: 290px; /* Change to size of video container - 25pxish */
  top: 0;
  right: 0;
  bottom: 0;
  left;
} 
```

基本上，它始终保持可点击的封面以处理点击播放/点击暂停功能，但确保封面不与视频底部的控件重叠。

这当然是一个拼凑，因为它：

*   假设所有浏览器将控件放置在同一区域，并且控件的高度相同
*   需要在 CSS 中指定视频容器的高度
*   防止鼠标悬停在视频上时出现控件

但我想我会把它放在那里。

# php - 数据库中的空值显示为空 - Twig

> ID：11880920
> 
> 赞同：0
> 
> 时间：2012-08-09T09:59:55.183
> 
> 标签：php, twig

我在数据库中有一个带有 nullable=true 的字段，但是当我为其设置一个空值然后以这种方式在树枝中显示它**{{ null_variable}}**它显示文本“empty_value”。我怎样才能不显示任何内容而不是此文本？我能想到的唯一的事情就是这样

```
{% if variable==NULL %}
<td></td> 
```

但我认为这不是一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:11:27.460

这是一种奇怪的行为，Twig 不应该返回“empty_value”。

你确定你没有在表单中使用它吗？

无论如何，这里有办法：

```
{% if variable is defined %} // $variable was never defined
{% if variable is empty %}   // $variable is defined but empty (null, empty string, 0) 
```

您也可以使用[`default`](http://twig.sensiolabs.org/doc/filters/default.html)过滤器：

```
{% variable|default('') %} 
```

# java - 如何将自定义方法添加到 Spring Data JPA

> ID：11880924
> 
> 赞同：194
> 
> 时间：2012-08-09T10:00:07.573
> 
> 标签：java, spring-data, spring-data-jpa

我正在研究 Spring Data JPA。考虑下面的示例，在该示例中，我将默认使用所有 crud 和 finder 功能，如果我想自定义一个 finder，那么这也可以在界面本身中轻松完成。

```
@Transactional(readOnly = true)
public interface AccountRepository extends JpaRepository<Account, Long> {

  @Query("<JPQ statement here>")
  List<Account> findByCustomer(Customer customer);
} 
```

我想知道如何为上述 AccountRepository 添加一个完整的自定义方法及其实现？由于它是一个接口，我无法在那里实现该方法。

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2012-08-09T10:18:05.200

您需要为您的自定义方法创建一个单独的接口：

```
public interface AccountRepository 
    extends JpaRepository<Account, Long>, AccountRepositoryCustom { ... }

public interface AccountRepositoryCustom {
    public void customMethod();
} 
```

并为该接口提供一个实现类：

```
public class AccountRepositoryImpl implements AccountRepositoryCustom {

    @Autowired
    @Lazy
    AccountRepository accountRepository;  /* Optional - if you need it */

    public void customMethod() { ... }
} 
```

**也可以看看：**

*   [4.6 Spring Data Repository 的自定义实现](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations)

*   请注意，命名方案在版本之间已更改。有关详细信息，请参阅[https://stackoverflow.com/a/52624752/66686](https://stackoverflow.com/a/52624752/66686)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-03-11T14:51:40.543

除了 axtavt 的[回答](https://stackoverflow.com/a/11881203/787375)之外，如果您需要它来构建查询，请不要忘记您可以在自定义实现中注入实体管理器：

```
public class AccountRepositoryImpl implements AccountRepositoryCustom {

    @PersistenceContext
    private EntityManager em;

    public void customMethod() { 
        ...
        em.createQuery(yourCriteria);
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-07-30T22:38:03.370

接受的答案有效，但存在三个问题：

*   在将自定义实现命名为`AccountRepositoryImpl`. [文档](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.single-repository-behavior)明确指出必须调用它，`AccountRepositoryCustomImpl`自定义接口名称加上`Impl`
*   您不能仅使用构造函数注入，`@Autowired`这被认为是不好的做法
*   您在自定义实现内部有一个循环依赖项（这就是您不能使用构造函数注入的原因）。

我找到了一种让它变得完美的方法，尽管不是不使用另一个未记录的 Spring Data 特性：

```
public interface AccountRepository extends AccountRepositoryBasic,
                                           AccountRepositoryCustom 
{ 
}

public interface AccountRepositoryBasic extends JpaRepository<Account, Long>
{
    // standard Spring Data methods, like findByLogin
}

public interface AccountRepositoryCustom 
{
    public void customMethod();
}

public class AccountRepositoryCustomImpl implements AccountRepositoryCustom 
{
    private final AccountRepositoryBasic accountRepositoryBasic;

    // constructor-based injection
    public AccountRepositoryCustomImpl(
        AccountRepositoryBasic accountRepositoryBasic)
    {
        this.accountRepositoryBasic = accountRepositoryBasic;
    }

    public void customMethod() 
    {
        // we can call all basic Spring Data methods using
        // accountRepositoryBasic
    }
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2019-04-06T00:56:22.720

有一个稍微修改过的解决方案，**不需要**额外的接口。

如[文档功能](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.single-repository-behavior)中所述，`Impl`后缀允许我们拥有这样干净的解决方案：

*   在您的常规`@Repository`界面中定义，例如`MyEntityRepository`自定义方法（除了您的 Spring Data 方法）
*   在任何地方（甚至不需要在同一个包中）创建一个只**实现自定义方法**的类`MyEntityRepositoryImpl`（后缀是魔法），并用****注释**这样的类（**将**不起作用）。 `Impl`****`@Component``@Repository` ***   这个类甚至可以注入`MyEntityRepository`via`@Autowired`以在自定义方法中使用。****** 

 ******# 例子：

实体类（为了完整性）：

```
package myapp.domain.myentity;
@Entity
public class MyEntity {
    @Id     private Long id;
    @Column private String comment;
} 
```

仓库界面：

```
package myapp.domain.myentity;

@Repository
public interface MyEntityRepository extends JpaRepository<MyEntity, Long> {

    // EXAMPLE SPRING DATA METHOD
    List<MyEntity> findByCommentEndsWith(String x);

    List<MyEntity> doSomeHql(Long id);   // custom method, code at *Impl class below

    List<MyEntity> useTheRepo(Long id);  // custom method, code at *Impl class below

} 
```

自定义方法实现bean：

```
package myapp.infrastructure.myentity;

@Component // Must be @Component !!
public class MyEntityRepositoryImpl { // must have the exact repo name + Impl !!

    @PersistenceContext
    private EntityManager entityManager;

    @Autowired
    private MyEntityRepository myEntityRepository;

    @SuppressWarnings("unused")
    public List<MyEntity> doSomeHql(Long id) {
        String hql = "SELECT eFROM MyEntity e WHERE e.id = :id";
        TypedQuery<MyEntity> query = entityManager.createQuery(hql, MyEntity.class);
        query.setParameter("id", id);
        return query.getResultList();
    }

    @SuppressWarnings("unused")
    public List<MyEntity> useTheRepo(Long id) {
        List<MyEntity> es = doSomeHql(id);
        es.addAll(myEntityRepository.findByCommentEndsWith("DO"));
        es.add(myEntityRepository.findById(2L).get());
        return es;
    }

} 
```

用法：

```
// You just autowire the the MyEntityRepository as usual
// (the Impl class is just impl detail, the clients don't even know about it)
@Service
public class SomeService {
    @Autowired
    private MyEntityRepository myEntityRepository;

    public void someMethod(String x, long y) {
        // call any method as usual
        myEntityRepository.findByCommentEndsWith(x);
        myEntityRepository.doSomeHql(y);
    }
} 
```

仅此而已，除了您已经拥有的 Spring Data 存储库之外，不需要任何接口。

我发现的唯一可能的缺点是：

*   类中的自定义方法`Impl`被编译器标记为未使用，因此`@SuppressWarnings("unused")`建议。
*   你有一个`Impl`班级的限制。（而在常规片段接口实现[中，文档建议](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.single-repository-behavior)您可以有很多。）
*   如果您将`Impl`类放在不同的包中并且您的测试只使用`@DataJpaTest`，您必须添加`@ComponentScan("package.of.the.impl.clazz")`到您的测试中，因此 Spring 会加载它。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-05-20T18:56:26.533

这在使用上是有限的，但是对于简单的自定义方法，您可以使用**默认**接口方法，例如：

```
import demo.database.Customer;
import org.springframework.data.repository.CrudRepository;

public interface CustomerService extends CrudRepository<Customer, Long> {

    default void addSomeCustomers() {
        Customer[] customers = {
            new Customer("Józef", "Nowak", "nowakJ@o2.pl", 679856885, "Rzeszów", "Podkarpackie", "35-061", "Zamknięta 12"),
            new Customer("Adrian", "Mularczyk", "adii333@wp.pl", 867569344, "Krosno", "Podkarpackie", "32-442", "Hynka 3/16"),
            new Customer("Kazimierz", "Dejna", "sobieski22@weebly.com", 996435876, "Jarosław", "Podkarpackie", "25-122", "Korotyńskiego 11"),
            new Customer("Celina", "Dykiel", "celina.dykiel39@yahoo.org", 947845734, "Żywiec", "Śląskie", "54-333", "Polna 29")
        };

        for (Customer customer : customers) {
            save(customer);
        }
    }
} 
```

编辑：

在[这个春季](https://spring.io/guides/gs/accessing-data-jpa/)教程中，它是这样写的：

> Spring Data JPA 还允许您通过简单地声明其方法签名来定义其他查询方法。

因此，甚至可以只声明如下方法：

```
Customer findByHobby(Hobby personHobby); 
```

如果 object`Hobby`是 Customer 的属性，那么 Spring 会自动为您定义方法。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-24T05:13:47.080

我使用以下代码从我的自定义实现中访问生成的查找方法。通过 bean 工厂获取实现可以防止循环 bean 创建问题。

```
public class MyRepositoryImpl implements MyRepositoryExtensions, BeanFactoryAware {

    private BrandRepository myRepository;

    public MyBean findOne(int first, int second) {
        return myRepository.findOne(new Id(first, second));
    }

    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        myRepository = beanFactory.getBean(MyRepository.class);
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-05-17T14:55:30.563

考虑到您的代码片段，请注意您只能将 Native 对象传递给 findBy### 方法，假设您要加载属于某些客户的帐户列表，一种解决方案是这样做，

```
@Query("Select a from Account a where a."#nameoffield"=?1")
List<Account> findByCustomer(String "#nameoffield"); 
```

使要查询的表名与Entity类相同。有关进一步的实现，请查看 [此](http://docs.spring.io/spring-data/jpa/docs/1.4.3.RELEASE/reference/html/jpa.repositories.html)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-10-31T15:16:29.073

如果您希望能够执行更复杂的操作，您可能需要访问 Spring Data 的内部，在这种情况下，以下工作（作为我对[DATAJPA-422](https://jira.springsource.org/browse/DATAJPA-422)的临时解决方案）：

```
public class AccountRepositoryImpl implements AccountRepositoryCustom {

    @PersistenceContext
    private EntityManager entityManager;

    private JpaEntityInformation<Account, ?> entityInformation;

    @PostConstruct
    public void postConstruct() {
        this.entityInformation = JpaEntityInformationSupport.getMetadata(Account.class, entityManager);
    }

    @Override
    @Transactional
    public Account saveWithReferenceToOrganisation(Account entity, long referralId) {
        entity.setOrganisation(entityManager.getReference(Organisation.class, organisationId));
        return save(entity);
    }

    private Account save(Account entity) {
        // save in same way as SimpleJpaRepository
        if (entityInformation.isNew(entity)) {
            entityManager.persist(entity);
            return entity;
        } else {
            return entityManager.merge(entity);
        }
    }

} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-21T08:35:03.790

这里还有一个问题需要考虑。有些人希望向您的存储库添加自定义方法会自动将它们公开为“/search”链接下的 REST 服务。不幸的是，情况并非如此。Spring 目前不支持。

这是“按设计”功能，spring data rest 显式检查方法是否是自定义方法，并且不会将其公开为 REST 搜索链接：

```
private boolean isQueryMethodCandidate(Method method) {    
  return isQueryAnnotationPresentOn(method) || !isCustomMethod(method) && !isBaseClassMethod(method);
} 
```

这是 Oliver Gierke 的一句话：

> 这是设计使然。自定义存储库方法不是查询方法，因为它们可以有效地实现任何行为。因此，我们目前无法决定公开该方法的 HTTP 方法。POST 将是最安全的选择，但这不符合通用查询方法（接收 GET）。

有关更多详细信息，请参阅此问题：[https ://jira.spring.io/browse/DATAREST-206](https://jira.spring.io/browse/DATAREST-206)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-09T02:07:16.290

我喜欢 Danila 的解决方案并开始使用它，但团队中没有其他人喜欢为每个存储库创建 4 个类。Danila 的解决方案是这里唯一让您在 Impl 类中使用 Spring Data 方法的解决方案。但是，我找到了一种方法，只需一个类即可：

```
public interface UserRepository extends MongoAccess, PagingAndSortingRepository<User> {

    List<User> getByUsername(String username);

    default List<User> getByUsernameCustom(String username) {
        // Can call Spring Data methods!
        findAll();

        // Can write your own!
        MongoOperations operations = getMongoOperations();
        return operations.find(new Query(Criteria.where("username").is(username)), User.class);
    }
} 
```

您只需要某种方式来访问您的 db bean（在本例中为 MongoOperations）。MongoAccess 通过直接检索 bean 提供对所有存储库的访问：

```
public interface MongoAccess {
    default MongoOperations getMongoOperations() {
        return BeanAccessor.getSingleton(MongoOperations.class);
    }
} 
```

BeanAccessor 在哪里：

```
@Component
public class BeanAccessor implements ApplicationContextAware {

    private static ApplicationContext applicationContext;

    public static <T> T getSingleton(Class<T> clazz){
        return applicationContext.getBean(clazz);
    }

    public static <T> T getSingleton(String beanName, Class<T> clazz){
        return applicationContext.getBean(beanName, clazz);
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        BeanAccessor.applicationContext = applicationContext;
    }

} 
```

不幸的是，您不能在界面中使用@Autowire。您可以将 bean 自动装配到 MongoAccessImpl 并在接口中提供一个方法来访问它，但是 Spring Data 崩溃了。我不认为它期望看到与 PagingAndSortingRepository 间接关联的 Impl。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-19T17:39:49.577

**向所有存储库添加自定义行为：**

要将自定义行为添加到所有存储库，您首先添加一个中间接口来声明共享行为。

```
public interface MyRepository <T, ID extends Serializable> extends JpaRepository<T, ID>
{

    void sharedCustomMethod( ID id );
} 
```

现在您的个人存储库接口将扩展此中间接口而不是存储库接口以包含声明的功能。

接下来，创建中间接口的实现，以扩展特定于持久性技术的存储库基类。然后，此类将充当存储库代理的自定义基类。

```
public class MyRepositoryImpl <T, ID extends Serializable> extends SimpleJpaRepository<T, ID> implements MyRepository<T, ID>
{

    private EntityManager entityManager;

       // There are two constructors to choose from, either can be used.
    public MyRepositoryImpl(Class<T> domainClass, EntityManager entityManager)
    {
        super( domainClass, entityManager );

        // This is the recommended method for accessing inherited class dependencies.
        this.entityManager = entityManager;
    }

    public void sharedCustomMethod( ID id )
    {
        // implementation goes here
    }
} 
```

[Spring Data Repositories Part I. 参考](https://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/reference/html/repositories.html)

[![在此处输入图像描述](../Images/7873416660446b81dfb7775e277be0cb.png)](https://i.stack.imgur.com/OxNFm.jpg)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-07T09:49:29.763

我使用mongo和spring遇到了这个问题。所以假设我们使用 MongoRepository 来提供基本的 crud 操作，假设我们需要使用 mongoTemplate 实现一些自定义条件查询操作。为了实现一个接口来为 crud 和 custom 注入存储库，我们需要指定：

自定义界面：

```
public interface UserCustomRepository {
 List<User> findAllUsersBySomeCriteria(UserCriteriaRequest criteriaRequest);
} 
```

UserRepository 接口“必须”首先扩展 UserCustomRepository，然后是 MongoRepository

```
@Repository
public interface UserRepository extends UserCustomRepository, MongoRepository<User, ObjectId> {
} 
```

UserRepositoryImpl 必须与带有 *Impl 后缀的 crud 接口同名。

```
@Component
@NoArgsConstructor
@AllArgsConstructor(onConstructor = @__(@Autowired))
public class UserRepositoryImpl implements UserCustomRepository {

 private MongoTemplate mongoTemplate;

 @Override
 public List<User> findAllUsersBySomeCriteria(UserCriteriaRequest criteriaRequest){
  //some impl
 }
} 
```

让我们实现一些服务 - 这里我们只注入 UserRepository 接口并使用来自 crud 存储库和自定义类 impl 的方法。

```
@Service
@NoArgsConstructor
@AllArgsConstructor(onConstructor = @__(@Autowired))
public class UserService {

 private UserRepository userReposityry;

 public List<User> getUserByCriteria(UserCriteriaRequest request) {
   userRepository.findById(request.getUserId); // Crud repository method
   userRepository.findAllUsersBySomeCriteria(request); // custom method.
 }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-08T16:53:43.523

我使用 SimpleJpaRepository 作为存储库实现的基类，并在接口中添加自定义方法，例如：

```
public interface UserRepository  {
    User FindOrInsert(int userId);
}

@Repository
public class UserRepositoryImpl extends SimpleJpaRepository implements UserRepository {

    private RedisClient redisClient;

    public UserRepositoryImpl(RedisClient redisClient, EntityManager em) {
        super(User.class, em);
        this.redisClient = redisClient;
    }

@Override
public User FindOrInsert(int userId) {

    User u = redisClient.getOrSet("test key.. User.class, () -> {
        Optional<User> ou = this.findById(Integer.valueOf(userId));
        return ou.get();
    });
    …………
    return u;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-12T23:39:40.413

我扩展了 SimpleJpaRepository：

```
public class ExtendedRepositoryImpl<T extends EntityBean> extends SimpleJpaRepository<T, Long>
    implements ExtendedRepository<T> {

    private final JpaEntityInformation<T, ?> entityInformation;

    private final EntityManager em;

    public ExtendedRepositoryImpl(final JpaEntityInformation<T, ?> entityInformation,
                                                      final EntityManager entityManager) {
       super(entityInformation, entityManager);
       this.entityInformation = entityInformation;
       this.em = entityManager;
    }
} 
```

并将此类添加到@EnableJpaRepositoryries repositoryBaseClass。******

# linq - 限制从嵌套 LINQ 语句返回的记录

> ID：11880925
> 
> 赞同：0
> 
> 时间：2012-08-09T10:00:12.087
> 
> 标签：linq, entity-framework, linq-to-sql

我将如何将此 linq 查询中返回的“费用”限制在指定的日期范围内：

```
var dte  = DateTime.Parse("2012-01-01");
var dte2  = DateTime.Parse("2012-02-01");
var meetingrooms = tblMeetingRoom
        .Where(r => r.building_id==1)
        .GroupBy(p => p.tblType)
        .Select(g => new
            {
            TypeName = g.Key.room_type,
            TypeID = g.Key.type_id,
            TypeCount = g.Count(),
            charges =

                from rt in charges
                where (rt.type_id == g.Key.type_id)
                select new { 
                rt.chargedate,
                rt.people,
                rt.charge
                }
            });
            meetingrooms.Dump(); 
```

我认为它需要在某个地方介于两者之间：

```
from rt in charges
where (rt.type_id == g.Key.type_id) (EG) && rt.chargedate>=dte and rt.chargedate <dte2
select new { 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:18:51.310

```
from rt in charges
where rt.type_id == g.Key.type_id && (rt.chargedate >= dte && rt.chargedate <= dte2)
select new {
      ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:21:36.233

@Maarten - 我已经尝试了很多年 - LinqPad 一直在出错，所以我尝试了我能想到的所有不同的方式 - 无论出于何种原因，我一定犯了一些错别字，而我没有在上面犯错！

很抱歉浪费大家的时间 - 以上工作“原样”！

标记

# c# - 如何通过 C# 配置 Outlook 帐户？

> ID：11880930
> 
> 赞同：5
> 
> 时间：2012-08-09T10:00:43.837
> 
> 标签：c#, outlook, configure, account

需要通过c#配置邮箱、姓名、邮件服务器等。如何在不使用 Outlook Redemption 的情况下执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:19:52.007

首先，[创建一个 PRF 文件](http://technet.microsoft.com/en-us/library/cc179062.aspx#BKMK_ManuallyEditing)- 手动或通过您的 .NET 应用程序动态创建。

然后，要导入使用命令行选项启动 Outlook 的帐户：

```
outlook.exe /importprf C:\SomePath\FileName.prf 
```

这可以使用`System.Diagnostics.Process`该类在您的 C# 代码中完成。

# java - 具有键/值/值的 NoSQL

> ID：11880932
> 
> 赞同：0
> 
> 时间：2012-08-09T10:00:50.113
> 
> 标签：java, nosql

我正在寻找一个 NoSQL 数据库，它具有[京都机柜](http://fallabs.com/kyotocabinet/)的简单性和速度，允许我每个键存储 2 个值。还带有 Java API。我查看了[http://nosql-database.org/](http://nosql-database.org/)，但对选择的数量有点不知所措，所以我希望这里的人可以给我建议（最好是开源的，因为我的应用程序也是开源的）。

我想要实现的是：存储一个数据-“值”+一个带有哈希键的计数值。详细说明：

*   我有一个带有索引值（0 ...无限）的表，其中每个索引都映射到一个散列。多个索引可以映射到同一个哈希
*   然后我有一个表，其中键（与索引表相同的哈希）映射到数据块
*   现在要确定是否可以丢弃散列/数据对，我需要确定有多少索引值映射到散列。由于遍历索引/哈希表需要太长时间（数百万条记录和京都内阁没有这样做的直接命令），我现在有一个单独的表，其中每个哈希映射到一个指示使用计数的值
*   我想将此计数存储在哈希/数据表中以防止再次查找（这会导致磁盘搜索）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:48:06.927

0x69 的想法为我指明了正确的方向。

现在我的 hash + count 和 hash + data 在同一个表中，但是 count 的 hash 以“c”为前缀，而 data-one 则以“d”为前缀。

这种方法使我能够使用京都橱柜。KC 有事务支持，它消除了我自己实现日志的所有麻烦。

# ruby-on-rails - 如何在 Sublime Text 2 中创建构建系统，用于通过 Capistrano 部署 Rails 应用程序

> ID：11880933
> 
> 赞同：4
> 
> 时间：2012-08-09T10:01:01.933
> 
> 标签：ruby-on-rails, deployment, capistrano, sublimetext2

我有的：

```
{
  "cmd": ["git add . && git commit -m 'deploy' && git push && cap deploy"],
  "working_dir": "${project_path:${folder}}"
} 
```

此命令在终端中有效，但`Ctrl+B`在 Sublime Text 2 中无效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:17:17.247

该`cmd`条目需要命令中每个标记的数组，而不是整个命令字符串。最好通过一个例子来解释。在你的情况下：

```
"cmd": ["git", "add", ".", "&&", "git", "commit", "-m", "'deploy'", "&&", "git", "push", "&&", "cap", "deploy"] 
```

但是，更好的方法是创建一个单独的脚本`deploy.sh`来为您执行所有这些任务，然后为您的 sublime 构建文件调用该脚本。

**部署.sh**：

```
#!/bin/bash
git add . && git commit -m 'deploy' && git push && cap deploy 
```

**deploy.sublime_build**：

```
{
  "cmd": ["deploy"],
  "working_dir": "${project_path:${folder}}"
} 
```

[崇高的构建系统文档](http://docs.sublimetext.info/en/latest/reference/build_systems.html)

# c# - 多线程，如果线程崩溃，应用程序会发生什么

> ID：11880938
> 
> 赞同：3
> 
> 时间：2012-08-09T10:01:24.607
> 
> 标签：c#, multithreading, .net-3.5

我是多线程应用程序的新手。在开始研究之前，我几乎没有任何疑问。谁能解开这些疑惑？

1.  如何处理多线程应用程序中的异常？
2.  如果任何 1 个线程有任何异常，整个应用程序会崩溃吗？还是所有其他线程将继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:09:14.293

> 如何处理多线程应用程序中的异常？

最好的方法是在线程内部，但有时例如。（线程池）这很难。处理未处理的异常取决于应用程序的类型：

*   WPF：使用[`Application.DispatcherUnhandledException`](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)
*   控制台或服务：使用[`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

ASP.NET、WinForms、...有它们自己的机制。

但请考虑：特别是在开发以允许默认处理并落入调试器时（添加`if (Debugger.IsAttached) { Debugger.Break(); }`对于定义永久断点非常有帮助

> 如果任何 1 个线程有任何异常，整个应用程序会崩溃吗？

这取决于。在 ASP.NET 中：否（如果启用调试，您将看到黄屏死机，否则会出现 500 服务器错误结果）；在其他主机中：取决于（但通常答案是“是”，该过程将终止）。

这方面的一些细节在 .NET 版本之间发生了变化——通常变得更加严格，所以你需要进行研究。最后：在 .NET 4 中，当然也可能在之前，某些异常（例如`StackOverflowException`）*不能*被捕获，因为如果它们被抛出，没有可靠的方法来保持一致的进程状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:55:31.060

如果您使用的是 TPL，则可以使用聚合异常。这个聚合异常是一个异常的集合，你可以通过它们循环查看哪个线程执行失败，更多信息可以在这里找到。 [http://msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

# open-source - 如果我不更改代码，我是否应该将我的源代码发布为开源

> ID：11880939
> 
> 赞同：2
> 
> 时间：2012-08-09T10:01:35.333
> 
> 标签：open-source, licensing, codec

我开发了一个依赖于一些开源编解码器的应用程序。编解码器驻留在外部库中。如果我不更改开源编解码器代码而是简单地使用它，我应该发布我的代码吗？我可以将我的应用用于商业目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:18:41.453

取决于编解码器的许可证以及如何将库与应用程序链接。

如果您阅读有关开源许可证的更多信息会很好，如果许可证迫使您在发布编解码器的许可证下发布您的代码，那么您将不得不在开源许可证下提供您的代码并发布它。

但这并不意味着您不能将您的应用用于商业目的

1.  [我可以销售依赖开源应用程序的闭源软件吗？](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFQQFjAB&url=https://stackoverflow.com/questions/1004664/can-i-sell-closed-source-software-that-depends-on-an-open-source-application&ei=H44jUNuqEobirAfomoCIAw&usg=AFQjCNHhP-Xd0mE1TOkbk04cygNquxdPcw)

2.  [如何出于商业和互操作性目的规避开源许可证](http://www.advogato.org/article/763.html)

# javascript - jquery如何使用对象内容搜索和完成divs内容

> ID：11880940
> 
> 赞同：0
> 
> 时间：2012-08-09T10:01:39.827
> 
> 标签：javascript, jquery

我正在插入由 ajax 调用返回的内容。

我有一组 div，每个 div 都有一个不同的 id 示例：

```
<div id ="first_name"> content </div>
<div id ="last_name"> content </div>
<div id ="email"> content </div> 
```

另一方面，我有一个带有 key => value 示例的对象：

```
{"first_name" : "value", "last_name" : "value", "email" : "value"} 
```

对象的键与 div 的 id 匹配。

如何在 $(document).ready() 上搜索匹配的 id 和对象键并将它们的值放入 jquery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:05:17.750

**原答案：**

```
 for(val in entries) {
    if(entries.hasOwnProperty(val)) {
      $("#"+val).html(entries[val]);
    }
  } 
```

**编辑以解决评论中的问题：**

你想让这自动发生吗？当您从 ajax 调用收到新数据时？

```
$.getJSON(url, function(entries) {
  for(val in entries) {
    if(entries.hasOwnProperty(val)) {
      $("#"+val).html(entries[val]);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:04:31.080

```
for(key in myObject) {
   $('#' + key).html(object[key]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T10:04:47.370

[您可以使用.html();](http://api.jquery.com/html/)设置 DIV 的内容；

例如：

```
$("#first_name").html('Thomas'); 
```

或根据您对 JSON 进行补水的方式来使用您的对象。

```
$("#first_name").html(yourobject.first_name); 
```

# c# - 如何在运行时将图像加载到 WPF？

> ID：11880946
> 
> 赞同：21
> 
> 时间：2012-08-09T10:02:24.507
> 
> 标签：c#, wpf

在运行时将图像加载到 WPF 窗口似乎相当复杂。

```
Image image;
image = new Uri("Bilder/sas.png", UriKind.Relative);
????.Source = new BitmapImage(image); 
```

我正在尝试这段代码，但我需要一些帮助才能让它工作。我在代码下方看到了一些红线！我还想知道是否需要在 XAML 代码中添加一些额外的代码，或者是否足够：

```
<Image Height="200" HorizontalAlignment="Left" Margin="12,12,0,0" Name="image1" 
       Stretch="Fill" VerticalAlignment="Top" Width="350" /> 
```

想知道，因为我已经看到了 XAML 标记内图像的示例。

编辑：

我现在正在使用这个：

```
var uri = new Uri("pack://application:,,,/sas.png");
var bitmap = new BitmapImage(uri);
image1.Source = bitmap; 
```

XAML：

```
<Grid Width="374">
    <Image Height="200" HorizontalAlignment="Left" Margin="12,12,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="350" />
    <Button Content="Start" Height="23" HorizontalAlignment="Left" Margin="12,226,0,0" Name="btnStart" VerticalAlignment="Top" Width="75" />
    <Button Content="Land" Height="23" HorizontalAlignment="Left" Margin="287,226,0,0" Name="btnLand" VerticalAlignment="Top" Width="75" />
    <ComboBox Height="23" HorizontalAlignment="Left" Margin="110,226,0,0" Name="cmbChangeRoute" VerticalAlignment="Top" Width="156" />
</Grid> 
```

编辑2：我的问题解决了，这段代码工作正常：

```
BitmapImage image = new BitmapImage(
    new Uri("pack://application:,,,/Resources/" + company + ".png"));
image2.Source = image; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-09T10:42:36.553

在 WPF 中，图像通常从[Stream](http://msdn.microsoft.com/en-us/library/8f86tw9e)或[Uri](http://msdn.microsoft.com/en-us/library/txt7706a)加载。

[BitmapImage](http://msdn.microsoft.com/en-us/library/ms619218)支持两者，甚至可以将 Uri 作为构造函数参数传递：

```
var uri = new Uri("http://...");
var bitmap = new BitmapImage(uri); 
```

如果图像文件位于本地文件夹中，则必须使用`file://`Uri。您可以从这样的路径创建这样的 Uri：

```
var path = Path.Combine(Environment.CurrentDirectory, "Bilder", "sas.png");
var uri = new Uri(path); 
```

如果图像文件是汇编资源，则 Uri 必须遵循[Pack Uri](http://msdn.microsoft.com/en-us/library/aa970069.aspx)方案：

```
var uri = new Uri("pack://application:,,,/Bilder/sas.png"); 
```

在这种情况下，Visual Studio 构建操作`sas.png`必须是`Resource`.

一旦你创建了一个`BitmapImage`并且还有一个像这个 XAML 中的[Image控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)

```
<Image Name="image1" /> 
```

您只需将 BitmapImage 分配给该`Source`Image 控件的属性：

```
image1.Source = bitmap; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T10:09:24.150

确保您`sas.png`的标记为`Build Action: Content`并`Copy To Output Directory: Copy Always`在其 Visual Studio `Properties`...

我认为 C# 源代码是这样的......

```
Image image = new Image();
image.Source = (new ImageSourceConverter()).ConvertFromString("pack://application:,,,/Bilder/sas.png") as ImageSource; 
```

和 XAML 应该是

```
<Image Height="200" HorizontalAlignment="Left" Margin="12,12,0,0" 
       Name="image1" Stretch="Fill" VerticalAlignment="Top" 
       Source="../Bilder/sas.png"
       Width="350" /> 
```

**编辑**

动态地，我认为 XAML 将提供加载图像的最佳方式......

```
<Image Source="{Binding Converter={StaticResource MyImageSourceConverter}}"
       x:Name="MyImage"/> 
```

`image.DataContext`路径在哪里`string`。

```
MyImage.DataContext = "pack://application:,,,/Bilder/sas.png";

public class MyImageSourceConverter : IValueConverter
{
    public object Convert(object value_, Type targetType_, 
    object parameter_, System.Globalization.CultureInfo culture_)
    {
        return (new ImageSourceConverter()).ConvertFromString (value.ToString());
    }

    public object ConvertBack(object value, Type targetType, 
    object parameter, CultureInfo culture)
    {
          throw new NotImplementedException();
    }
} 
```

现在，当您设置不同的数据上下文时，`Image`将在运行时自动加载。

# java - 与惰性获取的一对一关系

> ID：11880947
> 
> 赞同：0
> 
> 时间：2012-08-09T10:02:26.077
> 
> 标签：java, hibernate, jpa, nullpointerexception, lazy-loading

在我们的 java 应用程序中，我们有两个实体：一个主帐户和该帐户的设置。我们使用休眠来提供持久性。我们希望帐户设置延迟加载。所以我们这样做了：

主账户：

```
@OneToOne(optional = false, cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)
private AccountMainSettings        accountMainSettings;

@JoinColumn(name = AccountMainSettings.ACCOUNT_MAIN_SETTINGS_ID, unique = true, nullable = false, updatable = false, insertable = true)
public final AccountMainSettings getAccountMainSettings() {
return this.accountMainSettings;
} 
```

帐户主要设置：

```
@OneToOne(mappedBy = "accountMainSettings")
private AccountMain        accountMain;

public final AccountMain getAccountMain() {
return this.accountMain;
} 
```

当我们在 AccountMain 中加载 AccountMainSettings 对象时，它应该被代理。但是当我们调用 AccountMainSettings 的方法时，对象并没有从数据库中加载，当然是一个 NPE。阅读[Making-a-onetoone-relation-lazy](https://stackoverflow.com/questions/1444227/making-a-onetoone-relation-lazy)并没有太大帮助。我们既没有可以为空的关联，也不想将其转换为 ManyToOne 关联。当我们切换到预加载时，问题就“解决了”，因为设置已加载但它们包含许多字段，因此我们不希望它们被不必要地加载。

在这种情况下我们如何实现延迟加载？

更新：这里是我们的 jUnit 测试：

```
@Test
public final void getMainAccountByAccountId() {
final AccountMain accountMain = this.accountMainDAO.getMainAccountByAccountId(PersistTestCaseConstants.SAVED_MAIN_ACCOUNT_ID);
final AccountMainSettings accountMainSettings = accountMain.getAccountMainSettings();
final String imprint = accountMainSettings.getImprint();
assertEquals(PersistTestCaseConstants.OBJECT_SUCESSFUL_ADDED, imprint.length(), 1000);
} 
```

和堆栈跟踪：

```
java.lang.NullPointerException
                at com.persolog.eport.service.dao.AccountMainDAOTest.getMainAccountByAccountId(AccountMainDAOTest.java:418)
                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
                at java.lang.reflect.Method.invoke(Method.java:601)
                at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
                at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
                at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
                at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
                at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
                at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
                at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
                at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
                at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
                at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
                at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
                at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
                at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
                at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
                at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
                at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
                at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
                at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:08:40.190

吸气剂不应该是最终的。并在字段上使用`@JoinColumn`注释，而不是在 getter 上。或者使用 getter 的所有映射，那么你应该添加`@Access(AccessType.PROPERTY)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:09:30.830

我有这个，它在我的代码中对我有用。

```
@JoinColumn(name = "contract_id", referencedColumnName = "id")
@OneToOne(fetch = FetchType.LAZY)
private Contract contract; 
```

您是否缺少代码中的 referencedColumnName ？您正在指定连接列的名称，而不是关系另一侧的列名称

请注意，我的所有注释都在该字段上，而我的 getter 和 setter 只是此类中普通的旧 getter 和 setter

# c++ - 在c ++中相互依赖的结构数组中获取值

> ID：11880948
> 
> 赞同：1
> 
> 时间：2012-08-09T10:02:29.553
> 
> 标签：c++, pointers, struct, circular-dependency

我有许多相互依赖的结构数组。我正在努力使用指向另一个结构数组中记录的成员变量指针。放 3 个结构供您参考

```
struct struct1 {
int node_id;
struct2* ptr; };

struct struct2 {
int node_id;
int type;
struct1* owner;
struct2* next;
struct2* previous;
struct3* block1;
struct3* block2; };

struct struct3 {
int node_id;
int n_entries;
struct3* next_block; }; 
```

现在我的问题是如何获取 struct1 的记录。我知道它可以像

```
struct1 pstruct1; 
```

`struct2 pstruct2;`

```
pstruct.ptr = &pstruct2; 
```

可能如果我在每个结构中都有一组记录。但是我应该为结构数组使用什么，如果它与此类似，

```
pstruct1[i].ptr = &pstruct2[j]; 
```

我如何找到“j”值？也可以用未定义的成员变量的参数结构编写一个通用函数，以便它接受从调用函数传递的结构？对不起，如果我的任何编码是错误的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:55.407

这是对的

```
pstruct.ptr = &pstruct2; 
```

这是对的

```
pstruct1[i].ptr = &pstruct2[j]; 
```

您的第一个问题“我如何找到 j 值？”

我不知道，这是您的程序，只有您可以知道它应该做什么以及应该如何计算 j。

你的第二个问题'也可以用未定义成员变量的参数结构编写一个通用函数，以便它接受从调用函数传递的结构吗？

我认为您在谈论模板功能。

```
template <class T>
void common_function(const T& struc)
{
} 
```

您可以使用任何结构调用该函数。但是模板是一个困难的话题，你应该买一本关于 C++ 的书来解释它们。

# cocos2d-iphone - Box2d Body 与另一个物体接触时不会破坏

> ID：11880949
> 
> 赞同：0
> 
> 时间：2012-08-09T10:02:32.197
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在使用基于 box2d 的游戏，它检测到我的玩家身体与敌人身体碰撞，但是当我在碰撞点为敌人编写 destroybody 方法时，我的敌人无法摧毁并给出错误并且我的应用程序崩溃了。我给你看我的代码

```
std::vector<b2Body *>toDestroy; 
    std::vector<MyContact>::iterator pos;
    for(pos = contactListener->_contacts.begin(); 
        pos != contactListener->_contacts.end(); ++pos) {
        MyContact contact = *pos;
        b2Body *bodyA = contact.fixtureA->GetBody();
        b2Body *bodyB = contact.fixtureB->GetBody();
        if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) 
        {
            CCSprite *spriteA = (CCSprite *) bodyA->GetUserData();
            CCSprite *spriteB = (CCSprite *) bodyB->GetUserData();
            if (spriteA.tag == 1 && spriteB.tag == 2) 
            {
                // SpriteA = PlayerSprite
                // SpriteB = EnemySprite
                NSString *t=[NSString stringWithFormat:@"Game Over"];
                label.string=t;
                [self removeChild:spriteB cleanup:YES];
                 world->DestroyBody(bodyB);
            } 
            else if (spriteA.tag == 2 && spriteB.tag == 1) 
            {
                //toDestroy.push_back(bodyB);
                NSLog(@"Enemy Touch");
            }
        }
    } 
```

这里我的 spriteB 不能破坏。另一件事是敌人精灵在 Enemy.mm 文件中。

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:46:40.327

您在处理与玩家的敌人接触与玩家与敌人的接触不同（这只是事情的顺序）方面犯了一个根本错误，您应该将这两种情况视为相同，因为您无法知道它们到达的顺序。你也没有正确使用 toDestroy 。

```
std::vector<b2Body *>toDestroy; 
    std::vector<MyContact>::iterator pos;
    for(pos = contactListener->_contacts.begin(); 
        pos != contactListener->_contacts.end(); ++pos) {
        MyContact contact = *pos;
        b2Body *bodyA = contact.fixtureA->GetBody();
        b2Body *bodyB = contact.fixtureB->GetBody();
        if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) 
        {
            CCSprite *spriteA = (CCSprite *) bodyA->GetUserData();
            CCSprite *spriteB = (CCSprite *) bodyB->GetUserData();
            if ((spriteA.tag == 1 && spriteB.tag == 2) ||(spriteA.tag == 2 && spriteB.tag == 1)) 
            {
                // SpriteA = PlayerSprite
                // SpriteB = EnemySprite
                NSString *t=[NSString stringWithFormat:@"Game Over"];
                label.string=t;
                [self removeChild:spriteB cleanup:YES];
                 toDestroy.push_back(bodyB);
            } 

        }
        }
//iterate and delete everything from toDestroy 
```

# grails - 具有父/子继承关系的 Grails i18n 验证错误消息

> ID：11880951
> 
> 赞同：2
> 
> 时间：2012-08-09T10:02:37.723
> 
> 标签：grails, grails-orm

假设我有一个**Person**类。人有两个孩子**Builder**和**Doctor**。Person 类带有用户名属性（就像他们经常做的那样）。当然，通过继承 Builder 和 Doctor 类也有一个用户名。

现在我想美化 i18n 验证消息。我添加了以下想法，它将适用于我的所有 3 个课程

```
person.email.blank=Email is required 
```

但在验证子类的对象时没有使用它。如果我添加以下内容

```
doctor.email.blank=Email is required
builder.email.blank=Builder is required 
```

我得到了想要的结果，但它似乎并不像它可能的那样干燥。有没有人对此有任何想法。也许我只是做错了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:47:52.010

我能够通过使用自定义验证器和所有必需消息的单个消息来实现这一点。

在属性文件中：

```
default.isRequired= {3} is required
email=Email
otherProperty=Other property 
```

在域类中：

```
email validator: {val, obj -> obj.isRequiredValidator(val, "email") }
email validator: {val, obj -> obj.isRequiredValidator(val, "otherProperty") }

private isRequiredValidator(val, key) {
  if (!val)
   return [default.isRequired, messageSource.getKey(key)]
} 
```

调用 validate() 后的结果将是“需要电子邮件”和“需要其他属性”

您可以通过在域类之间共享自定义验证器方法来重用它。

# c# - 在 mscorlib.dll 中发生了“System.ArgumentOutOfRangeException”类型的第一次机会异常

> ID：11880952
> 
> 赞同：4
> 
> 时间：2012-08-09T10:02:38.510
> 
> 标签：c#, byte, bytebuffer

我是 C# 客户端和服务器应用程序的新手，我正在处理文件上传客户端和服务器应用程序。

我可以成功地将我的文件名和文件数据从客户端应用程序上传到服务器。但是当我尝试实现一个新的文本框时，允许文件上传客户端输入他/她的姓名并在他/她单击发送按钮时将信息连同文件名和文件数据一起发送。

客户端应用程序。

```
 /* file name and file length */
            byte[] fName = Encoding.UTF8.GetBytes(fileName);
            byte[] fNameLen = BitConverter.GetBytes(fileName.Length); // length of file name
            clientData = new byte[4 + fileName.Length];                
            System.Diagnostics.Debug.WriteLine("fName " + fName.Length);
            System.Diagnostics.Debug.WriteLine("fNamelen " + fNameLen.Length);
            fNameLen.CopyTo(clientData, 0);
            fName.CopyTo(clientData, 4);

            /* author name and author name length */
            byte[] aName = Encoding.UTF8.GetBytes(textBox2.Text);
            byte[] aNameLen = BitConverter.GetBytes(textBox2.Text.Length);
            System.Diagnostics.Debug.WriteLine("aName " + aName.Length);
            System.Diagnostics.Debug.WriteLine("aNamelen " + aNameLen.Length);
            authorData = new byte[9 + textBox2.Text.Length];
            aNameLen.CopyTo(authorData, 5);
            aName.CopyTo(authorData, 9); 
```

服务器应用程序

```
/* retriving of file name */
               System.Diagnostics.Debug.WriteLine("Error 1");
               fNameLen = BitConverter.ToInt32(state.buffer, 0);
               System.Diagnostics.Debug.WriteLine("Error 2 fNameLen " + fNameLen);
               string Filename = Encoding.UTF8.GetString(state.buffer, 4, fNameLen);
               System.Diagnostics.Debug.WriteLine("Error 3");
               System.Diagnostics.Debug.WriteLine("filename length " + fNameLen);
               receivedPath = @"C:\testfiles\" + Filename;
               System.Diagnostics.Debug.WriteLine("bytesREad1 " + bytesRead);
               System.Diagnostics.Debug.WriteLine(receivedPath);

               /* retriving of author name */
               aNameLen = BitConverter.ToInt32(state.buffer, 5);
               System.Diagnostics.Debug.WriteLine("Error 4");
               System.Diagnostics.Debug.WriteLine("error  5");
               System.Diagnostics.Debug.WriteLine("author name length " + aNameLen);
               string authorName = ASCIIEncoding.ASCII.GetString(state.buffer, 9, aNameLen);
               System.Diagnostics.Debug.WriteLine("Error 6");
               System.Diagnostics.Debug.WriteLine("author name " + authorName);
               System.Diagnostics.Debug.WriteLine("author name length " + aNameLen); 
```

输出窗口和错误以粗体显示：

*   错误 1
*   错误 2 fNameLen 12
*   错误 3
*   文件名长度 12
*   字节读取 1 82
*   C:\testfiles\Test1122.txt
*   错误 4
*   错误 5
*   作者姓名长度 829715301
*   **在 mscorlib.dll 中发生了“System.ArgumentOutOfRangeException”类型的第一次机会异常**

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:32:41.327

如果您使用 BinaryReader / BinaryWriter，事情会更容易。

例子：

**客户**

`fileContents`是一个字节数组。

```
var stream = new MemoryStream();
var writer = new BinaryWriter(stream);
writer.Write(fileName);
writer.Write(authorName);
writer.Write(fileContents.Length);
writer.Write(fileContents);

var data = stream.ToArray();  // send this data array to server
writer.Dispose();
stream.Dispose(); 
```

**服务器**

```
var stream = new MemoryStream(state.buffer);
var reader = new BinaryReader(stream);

var fileName = reader.ReadString();
var author = reader.ReadString();
var fileContents = reader.ReadBytes(reader.ReadInt32());
reader.Dispose();
stream.Dispose(); 
```

# c++ - C ++我如何将其拆分为向量并使用它

> ID：11880953
> 
> 赞同：1
> 
> 时间：2012-08-09T10:02:38.650
> 
> 标签：c++, split

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我正在使用 C++ 进行客户端服务器编程。

我的客户发送一个带有值的字符串

```
string receiveClient = "auth#user:pass"; 
```

如何按分隔符和分隔符拆分`receiveClient`变量？`'#'``':'`

* * *

我已经尝试使用我在网上找到的这个功能

```
vector split (const string &s,char delim)
{
  vector string elems;
  return(s,delim,elems);
} 
```

我这样做了`main()`：

```
vector x = split(&receiveClient,"#"); 
```

但它返回给我以下

```
server.cpp: In function ‘int main()’:
server.cpp:128:8: error: missing template arguments before ‘x’
server.cpp:128:8: error: expected ‘;’ before ‘x’
root@ubuntu:/home/baoky/csci222_assn2# g++ server server.cpp
server.cpp:47:1: error: invalid use of template-name ‘std::vector’ without an argument list
server.cpp: In function ‘int main()’:
server.cpp:128:8: error: missing template arguments before ‘x’
server.cpp:128:8: error: expected ‘;’ before ‘x’ 
```

感谢所有帮助。非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:24:04.387

此类任务通常使用 C++ 中的流最容易完成。像这样的东西应该工作：

```
// Beware, brain-compiled code ahead!

#include <vector>
#include <string>
#include <sstream>

std::vector<string> splitClientAuth(const std::string& receiveClient)
{
  // "auth#user:pass"
  std::istringstream iss(receiveClient);

  std::vector<std::string> strings;
  strings.resize(3);
  std::getline(iss, strings[0], '#');
  std::getline(iss, strings[1], ':');
  std::getline(iss, strings[2]); // default is '\n'

  if( !iss && !iss.eof() )
    throw "Dude, you badly need an error handling strategy!";

  if( string[0].empty() || string[1].empty() || string[2].empty() )
    throw "Watcha gonna do now?";

  return strings;
} 
```

* * *

还有几点值得注意：

*   这些真的是***纯文本密码***吗？

*   有这个在`std::vector<std::string>`我看来是可疑的。如果那是我的代码，我想要***一个数据结构来存储用户信息***，并将我发现的内容写入其中。

*   从您完全无法理解您在问题中粘贴的代码来看（Martinho 是对的，这太糟糕了，它是否仍然可以被视为 C++ 是有争议的），并且从您的评论来看，***您似乎非常需要一个[好的 C++书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)***。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:06:50.517

你在网上找到的代码是垃圾。尝试这个

```
#include <vector>
#include <string>
using namespace std;

vector<string> split(const string& s, char delim)
{
  vector<string> elems(2);
  string::size_type pos = s.find(delim);
  elems[0] = s.substr(0, pos);
  elems[1] = s.substr(pos + 1);
  return elems;
} 
```

这是未经测试的代码，它不做任何错误检查（例如 what if `s`does not contain `delim`）。我会让你解决这个问题。

你这样调用函数

```
vector<string> x = split(receiveClient, '#'); 
```

# iis-7 - IIS 7 IP 更改为机器名

> ID：11880957
> 
> 赞同：1
> 
> 时间：2012-08-09T10:02:58.660
> 
> 标签：iis-7, ip, windows-server-2008

我的服务器从使用 IP 地址切换到机器名称时遇到问题。

昨天，我进入 IIS 7 并在默认网站下创建了一个新应用程序。我给它一个别名（即forschung）并给它物理路径（Adobe Flash Builder 4.6 文件夹中的一个bin-debug 文件）。我按照 GIS API 文档中的建议进行了此操作。然后，我将 Flex 项目的输出文件夹更改为 bin-debug，将输出文件夹更改为 http:///forschung。我能够在 Google Chrome 中成功运行该项目，但在 Firefox 中遇到错误。更改 REST 服务路径以使用机器名称（而不是 IP 地址）后，我在 Firefox 中不再遇到问题。但是，现在看来，我的 REST 服务和其他应用程序需要更改以使用机器名称，但我想继续使用 IP 地址，因为更改服务和应用程序会花费很多时间。

我在 Windows Server Standard 2008 机器上使用 IIS 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:47:43.487

问题是以前创建的网站与默认网站竞争。一旦竞争网站被删除，一切都得到了修复。

# extjs - 删除树形网格图标

> ID：11880965
> 
> 赞同：1
> 
> 时间：2012-08-09T10:03:29.517
> 
> 标签：extjs, icons, treegrid

我不会在每个节点上显示 treegrid 图标。

我尝试使用：1.“iconCls”配置，具有“void”值。2\. 使用“错误”值。

最后，我得到了与我预期相同的所有行的“默认图标”。

有人知道删除这些图标的任何形式吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:49:08.313

只要确保你给出一个`iconCls`，比如说`treenode-no-icon`。我在我的模型中这样做：

```
{name: 'iconCls', type: 'string', defaultValue: 'treenode-no-icon'}, 
```

然后在你的css中包括：

```
.treenode-no-icon
{
    display : none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T19:17:04.697

这是几年前的事了，但这是我发现的使用 ExtJS 6 的解决方案。

使用自定义主题，在与 Ext.tree.View 关联的主题文件中，我添加了以下行：

```
$tree-icon-width : 0px; 
```

我的树形面板数据现在显示没有任何可见的图标。

# ruby-on-rails-3 - 如何确定 ActiveModel::Errors 验证类型

> ID：11880975
> 
> 赞同：5
> 
> 时间：2012-08-09T10:04:16.917
> 
> 标签：ruby-on-rails-3, validation

随着从 Rails 2 到 Rails 3 的迁移，验证错误从 ActiveRecord::Error 移动到 ActiveModel::Errors。
在 rails 2 中，验证错误具有类型和消息（除其他外），您可以通过执行以下操作来检查验证错误的类型：

```
rescue ActiveRecord::RecordInvalid => e
  e.record.errors.each do |attr, error|
    if error.type == :foo
      do_something
    end
  end
end 
```

但是在 Rails 3 中，除了无效属性和消息之外的所有内容似乎都丢失了。因此，确定类型的唯一方法是比较错误消息：

```
rescue ActiveRecord::RecordInvalid => e
  e.record.errors.each do |attr, error|
    if error == "foobar"
      do_something
    end
  end
end 
```

这一点都不理想（例如，如果您有多个使用相同消息的验证怎么办？）。

**问题：**
rails 3.0 中是否有更好的方法来确定验证错误的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T20:48:19.957

检查添加？在 ActiveModel::错误上：

[https://github.com/rails/rails/blob/master/activemodel/lib/active_model/errors.rb#L331](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/errors.rb#L331)

这使您可以这样做：

```
record.errors.added?(:field, :error) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T17:25:20.253

我不仅需要它用于测试目的，还需要它用于 API。我最终得到了猴子补丁：

```
module CoreExt
  module ActiveModel
    module Errors
      # When validation on model fails, ActiveModel sets only human readable
      # messages. This does not allow programmatically identify which
      # validation rule exactly was violated.
      #
      # This module patches {ActiveModel::Errors} to have +details+ property,
      # that keeps name of violated validators.
      #
      # @example
      #   customer.valid? # => false
      #   customer.errors.messages # => { email: ["must be present"] }
      #   customer.errors.details # => { email: { blank: ["must be present"] } }
      module Details
        extend ActiveSupport::Concern

        included do
          if instance_methods.include?(:details)
            fail("Can't monkey patch. ActiveModel::Errors already has method #details")
          end

          def details
            @__details ||= Hash.new do |attr_hash, attr_key|
              attr_hash[attr_key] = Hash.new { |h, k| h[k] = [] }
            end
          end

          def add_with_details(attribute, message = nil, options = {})
            error_type = message.is_a?(Symbol) ? message : :invalid
            normalized_message = normalize_message(attribute, message, options)
            details[attribute][error_type] << normalized_message

            add_without_details(attribute, message, options)
          end
          alias_method_chain :add, :details

          def clear_with_details
            details.clear
            clear_without_details
          end
          alias_method_chain :clear, :details
        end
      end
    end
  end
end

# Apply monkey patches
::ActiveModel::Errors.send(:include, ::CoreExt::ActiveModel::Errors::Details) 
```

# javascript - 如何将样式应用于元素？

> ID：11880978
> 
> 赞同：1
> 
> 时间：2012-08-09T10:04:20.737
> 
> 标签：javascript, jquery, css, xhtml, scrollbar

问题：如何通过 JavaScript 应用这种样式？
jQuery 也欢迎 :)

**注意：**
它必须应用于`<HTML>`元素，而不是`document.body`元素。
否则它不起作用。

```
<style type="text/css">
html {
scrollbar-arrow-color: Orange;
scrollbar-base-color: Black;
scrollbar-dark-shadow-color: Black;
scrollbar-track-color: Gray;
scrollbar-face-color: Black;
scrollbar-shadow-color: Silver;
scrollbar-highlight-color: Silver;
scrollbar-3d-light-color: Silver;
}
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:10:00.703

您可以使用以下`addClass`方法：

```
$(document).ready(function(){
   $('html').addClass('aClass')
   // or $('html').css('property', 'value')
}) 
```

其中*aClass*是应添加到`html`标记的类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:19:24.290

没关系，实际上它很简单：

```
$('html').attr('style', strStyle); 
```

完整示例：

```
<script type="text/javascript" language="javascript">
    function SetScrollbarStyle() 
    {

        with (document.frmCustomize) 
        {
            var strStyle = 'scrollbar-arrow-color: ' + arrow.value + ';' + "\n" + 'scrollbar-base-color: ' + base.value + ";\n" + 'scrollbar-dark-shadow-color: ' + darkshadow.value + ";\n" + 'scrollbar-track-color: ' + track.value + ";\n" + 'scrollbar-face-color: ' + face.value + ";\n" + 'scrollbar-shadow-color: ' + shadow.value + ";\n" + 'scrollbar-highlight-color: ' + highlight.value + ";\n" + 'scrollbar-3d-light-color: ' + light.value + ";";
            code.value = '<style type="text/css">' + "\n" + 'html {' + "\n" + strStyle + "\n}" + "\n" + '</style>' + "\n";
            //$('body').css('background-color', '#ff0000');
            //$('body').css(strStyle);
            //$('body').attr('style', strStyle);
            $('html').attr('style', strStyle);
        }

    }
</script> 
```

从表单按钮 onclick 事件调用 SetScrollbarStyle 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T10:21:42.997

简单的

```
$(document).ready(function(){
  $('html').css({
    "scrollbar-arrow-color":"Orange",
  });
}); 
```

或者

```
$(document).ready(function(){
  $('html').css({
    "scrollbar-arrow-color","Orange",
  });
}); 
```

或者您可以在某个类中定义您的样式并使用`addClass`类似的方法；

```
$(document).ready(function(){
   $('html').addClass('your_class');
}); 
```

# android - 通过 url 启动我的活动后如何清除回栈？

> ID：11880979
> 
> 赞同：0
> 
> 时间：2012-08-09T10:04:21.087
> 
> 标签：android, url

我正在从我的活动中启动一个网络浏览器。在某个状态下，我再次使用 url 启动我的活动。但是这次我不想再按回看浏览器了。当浏览器启动我的活动时，我希望它看起来像之前没有发生任何事情一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:10:25.023

在启动 Web Intent 时查看添加标志。

这可能是您正在寻找的...

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)

# java - 包可见性，如 vb.net 中的 Java

> ID：11880981
> 
> 赞同：0
> 
> 时间：2012-08-09T10:04:25.740
> 
> 标签：java, vb.net, visibility

有没有办法将方法/类的可见性设置为类似于 vb.net 中 java 的包可见性？

这个想法是这个方法/类应该对同一个文件夹/包上的类可见，但对于这个文件夹/包外的类不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:32:00.973

据我所知，在 .net 中最接近于 java 中的封装是命名空间。但是在 .net 中，如果名称空间级别的类型存在于同一个程序集中，则无法限制对类型的访问。实现这一点的唯一方法是创建类库，在此级别上，您可以通过设置 internal（默认）或 public 访问修饰符来管理它们之间的类的可见性。有关更多信息，请阅读[文档](http://msdn.microsoft.com/en-us/library/ms173121.aspx)。

# android - 需要用于 android 建议的 phonegap 自定义插件

> ID：11880989
> 
> 赞同：1
> 
> 时间：2012-08-09T10:04:43.960
> 
> 标签：android, plugins, cordova

嗨，我在移动应用程序中。

我在 phonegap（html5、JQuery、JS）中开发了一个应用程序，我想开发一个插件来打印到 BT 打印机。

我下载了打印机制造商的 SDK，并通过以下方式将相应的 .jar 文件导入到我的项目中：

将此库包含到您的项目中：

1.  将相应的库文件从 SDK 包中拖到 Project Explorer 中

2.  右键单击项目文件夹并选择属性

3.  单击 Java 构建路径

4.  单击库和添加 JAR 按钮

5.  在主代码的顶部添加：

    导入 com.starmicronics.stario.StarIOPort；

    进口 com.starmicronics.stario.StarIOPortException;

    导入 com.starmicronics.stario.StarPrinterStatus；

6.  现在您可以访问 StarIO 的所有方法了！

我创建了以下插件

js

```
var HelloPlugin = {

    callNativeFunction: function (success, fail, resultType) {
        return cordova.exec(success, fail, "com.tricedesigns.HelloPlugin", "nativeAction", [resultType]);
    }
}; 
```

爪哇

```
package com.tricedesigns;

import com.starmicronics.stario.StarIOPort;
import com.starmicronics.stario.StarIOPortException;
import com.starmicronics.stario.StarPrinterStatus;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.util.Log;

public class HelloPlugin extends Plugin {

    public static final String NATIVE_ACTION_STRING="nativeAction";
    public static final String SUCCESS_PARAMETER="success";
    public static final String portName = "BT:";
    public static final String portSettings = "mini";

    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {

         Log.d("HelloPlugin", "Hello, this is a native function called from PhoneGap/Cordova!");

         //only perform the action if it is the one that should be invoked
         if (NATIVE_ACTION_STRING.equals(action)) {

             String resultType = null;
             try {
                 resultType = data.getString(0);
             }
             catch (Exception ex) {
                 Log.d("HelloPlugin", ex.toString());
             }

             byte[] texttoprint = resultType.toString().getBytes();

             if (resultType.equals(SUCCESS_PARAMETER)) {

                 StarIOPort port = null;

                 return new PluginResult(PluginResult.Status.OK, "Yay, Success!!!");
             }
             else {
                 return new PluginResult(PluginResult.Status.ERROR, "Oops, Error :(");
             }
         }

         return null;
    }

} 
```

这是没有问题的工作。

当我尝试包含以下对打印机 .jar 方法的调用时

```
port = StarIOPort.getPort(portName, portSettings, 10000, context); 
```

我得到错误：状态=2 消息=找不到类。

我哪里错了？？？

# sql - 锁定数据库

> ID：11880990
> 
> 赞同：0
> 
> 时间：2012-08-09T10:04:45.747
> 
> 标签：sql, sql-server, database, linq-to-sql, locking

我有 N 个进程每 t 分钟（N > t）向数据库中的表 A 插入和更新行（多行），比如说从上午 12:00 开始（所有 N 个进程）。我将上次更新时间戳保存在单独的表 B 中，以检查数据上次更新的时间。

我正在考虑获得一个读锁来检查时间戳并查看数据是否是最新的，如果不是，请尝试在表上获得锁，更新数据库并释放锁。

这可以使用 linq-to-sql 完成吗？进程是否有可能获得锁并且由于某种原因不会释放锁？在那种情况下，是否有超时值，之后锁会自动释放？

任何指针都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:51:45.560

> 获取读锁以检查时间戳并查看数据是否是最新的，如果不是，请尝试获取表上的锁，更新数据库并释放锁。

当两个进程尝试同时执行此操作时，这是保证死锁：

*   A 在时间戳上获得 S 锁
*   B 在时间戳上获得 S 锁
*   A 获取数据的 X 锁
*   B 尝试获取 X 数据锁定，被 A 阻止
*   A 更新数据
*   A 尝试更新时间戳，它需要 X 锁定它。被B的S锁挡住了

A被B阻塞，B被A阻塞=>死锁。

> 是否有超时值，之后锁会自动释放

这种行为将是一场彻头彻尾的灾难，并使编程事务*变得不可能*。您可以要求并且存在的是，如果无法在超时时间内获得锁，则放弃该锁的*请求*[`SET LOCK_TIMEOUT`](http://msdn.microsoft.com/en-us/library/ms189470.aspx)： .

很难回答您的潜在问题，因为您提出了解决方案，而不是您试图解决的实际问题。作为数据库中的一般评论，条件更新是通过添加适当的谓词以面向集合的方式完成的，例如。`UPDATE ... WHERE timestamp < @last_timestamp`并让引擎弄清楚如何正确实现它。

# android - 使用文件进度维护 SeekBar

> ID：11880993
> 
> 赞同：0
> 
> 时间：2012-08-09T10:04:51.397
> 
> 标签：android, zip, unzip, seekbar, compression

我想维护 SeekBar 以及文件的解压缩 (UnZip)。

SeekBar 需要从文件的解压缩开始，并在 .zip 文件的解压缩过程完成时结束。

已经用谷歌搜索过，但找不到我要找的东西。

谢谢，大卫布朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:30:58.113

你可以做这样的事情。用于`AsyncTask`后台进程。解压进度可以设置为 seekBar 如下。希望这可以帮助。

```
class SampleTask extends AsyncTask<Void, Integer, String>
{
    private Context context = null;

    public SampleTask(Context context) 
    {
        this.context = context;         
    }

    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(Void... params) 
    {
        try
        {
            //do file decompression here
               publishProgress(progress);
        }
        catch(Exception exception) 
        {
            exception.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) 
    {
        super.onProgressUpdate(values);
        System.out.println(" --- onProgressUpdate --- "+values[0]);
        seekBar.setProgress(values[0]);
    }

    @Override
    protected void onCancelled() 
    {
        super.onCancelled();
        isTrue = false;
        sampleTask = null;
        System.out.println(" --- onCancelled --- "+isTrue);
    }

    @Override
    protected void onPostExecute(String result) 
    {
        super.onPostExecute(result);
    }       
} 
```

**编辑：**看看下面的链接。

[在 Android 应用程序中解压缩 sd 卡上的压缩文件](https://stackoverflow.com/questions/7697466/unzip-a-zipped-file-on-sd-card-in-android-application)

[如何在 Android 中以编程方式解压缩文件？](https://stackoverflow.com/questions/3382996/how-to-unzip-files-programmatically-in-android)

# c++ - unique_ptr 矩阵

> ID：11880997
> 
> 赞同：3
> 
> 时间：2012-08-09T10:04:55.803
> 
> 标签：c++, memory, stl, c++11

`unique_ptr`放入数组是否被认为是一种好习惯？是的，我知道，它们有不寻常的复制语义，但我的想法是：

我有一个基于平铺的游戏场。数组中的每个指针都指向某个游戏对象。当我为数组元素分配新的东西时，前一个对象被销毁并放置一个新对象。

另一个问题——shared_ptr 也一样，因为有时我会使用享元模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:28:50.413

`unique_ptr`的最大*优势*之一是在标准容器中使用是安全的，例如`std::vector`. `std::vector<std::unique_ptr<T>>`不是反模式，它非常好，强烈推荐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T10:23:11.627

一般来说，是的，这是一种很好的做法：在这种情况下，矩阵将是对象的所有者（在大多数情况下应该可以正常工作），而对象的其他消费者仅保留指向对象的原始指针（如果有的话）。

这是安全有效的。

另一方面，考虑是否需要指针。如果我理解正确，这里使用指针的唯一原因是能够存储多态对象。考虑是否`boost::variant`可能是这里的替代方案，或者某种`value_ptr`（不幸的是不包含在标准库中，但易于实现）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:19:47.857

;的复制语义没有什么不寻常的地方`unique_ptr`。它们可以移动但不能复制，因此完全适合在标准容器中使用。

您可能会想到已弃用`auto_ptr`的，在将移动语义添加到语言之前，它试图使用破坏性复制语义来模拟它们。这使得它们很难安全地与标准容器一起使用。

您是否应该在容器中存储指针或对象是另一个问题。一般来说，存储对象比较好；除非它们非常大或移动起来很昂贵，或者除非您需要存储（指向公共基类的指针）不同类型的对象。

如果您确实想存储指针，并且希望容器管理对象的生命周期，那么`unique_ptr`是最好的选择。`shared_ptr`如果您想与其他实体共享所有权，或者如果您想用于`weak_ptr`确定对象是否已从数组中删除，也很合适。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T10:19:49.880

一般来说， unique_ptr 比 shared_ptr 性能更高，因为它不进行引用计数，但是一个地方必须拥有所有权。这是有风险的，因为如果您有：

```
vector<unique_ptr<GameObject>> v; 
```

你会参考它：

```
GameObject* p = v[42].get(); 
```

然后如果位置 42 被删除或替换，p 将是一个悬挂指针。

然而：

```
vector<shared_ptr<GameObject>> v;

shared_ptr<GameObject> p = v[42]; 
```

即使 v[42] 被删除，也会保留 p 的底层对象 - 但是你有引用计数更新的开销。

我的建议是更喜欢 shared_ptr 因为它更安全，除非性能成为问题。

# vba - VBA - 将“xlMedium”转换为常量 xlMedium

> ID：11880998
> 
> 赞同：1
> 
> 时间：2012-08-09T10:05:05.103
> 
> 标签：vba, excel

我正在尝试格式化给定的范围。下面代码中一个类的 BorderStyle 属性的值是“xlMedium”，它是字符串数据类型，但是权重属性需要 xlMedium 作为常量，我如何将这个字符串值转换为常量？

谢谢你。

```
Function applyFormat(ByRef objRng As clsRange)

 ' Select the Range

     Worksheets(objRng.SheetName).Select

     Worksheets(objRng.SheetName).Range(objRng.RangeValue).Select

            With Selection.Borders(xlInsideVertical)
                 .LineStyle = xlContinuous
                 .ColorIndex = 0
                 .TintAndShade = 0
                 .Weight = (Me.BorderStyle)
            End With

            With Selection.Borders(xlInsideHorizontal)
                 .LineStyle = xlContinuous
                 .ColorIndex = 0
                 .TintAndShade = 0
                 .Weight = (Me.BorderStyle)
            End With

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:10:11.057

没有简单的方法可以将字符串转换为其等效的枚举成员。

您应该更改`BorderStyle as XlBorderWeight`并使用显式整数值，如果您不这样做，则需要手动查找每个成员；

```
public property get BorderStyleValue() as XlBorderWeight   
   select case Me.BorderWeight 
      case "xlMedium": BorderStyleValue= XlBorderWeight.xlMedium
      case "xlThick" : BorderStyleValue= XlBorderWeight.xlThick
      ...

...

.weight = Me.BorderStyleValue 
```