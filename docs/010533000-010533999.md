# StackOverflow 问答 10533000-10533999

# java - Eclipse RCP：自定义控制台

> ID：10533000
> 
> 赞同：5
> 
> 时间：2012-05-10T11:25:19.550
> 
> 标签：java, eclipse, console, eclipse-rcp

我正在尝试创建一个可以作为自定义编程语言的 shell 的控制台。它与 pydev 交互式控制台非常相似。

目前，我的 RCP 使用基本的 TextConsole 并通过管道连接到外壳，因此它只显示外壳显示的任何内容，如果用户在 RCP 控制台中输入任何内容，外壳中也会写入相同内容。

我希望能够做更多的事情，例如移动插入符号的位置、为向上和向下箭头键添加事件等。我相信要做到这一点，我需要向控制台添加一个 StyledText 小部件，这是通过 ConsoleViewer 完成的。

所以我的问题是，我有什么方法可以覆盖 TextConsole 的 ConsoleViewer，或者如果我要扩展 TextConsole 并创建自己的，那么如何将它与启动配置（通过管道连接外壳的配置）链接?

此外，要获得我使用的当前默认控制台`DebugUITools.getConsole(process)`。

如果我没有提供所有需要的信息，我很抱歉；这有点难以解释。我很高兴添加更多信息。

一个想法......据我所知，我可以`TextConsolePage`从`TextConsole`using创建一个`createPage(ConsoleView)`. 一旦我有了页面，我就可以通过`setViewer(viewer)`. 在这里，我想如果我创建自己的查看器（它将具有适当的样式小部件），那么这可能是一个线索。唯一的问题是观众需要一个复合材料，我似乎无法弄清楚从哪里得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:15:20.187

你为什么不按照 PyDev 的做法（如果你能够处理 EPL 许可证）？

相关代码可以在以下位置找到：

[https://github.com/aptana/Pydev/tree/ad4fd3512c899b73264e4ee981be0c4b69ed5b27/plugins/org.python.pydev/src_dltk_console](https://github.com/aptana/Pydev/tree/ad4fd3512c899b73264e4ee981be0c4b69ed5b27/plugins/org.python.pydev/src_dltk_console)

[https://github.com/aptana/Pydev/tree/ad4fd3512c899b73264e4ee981be0c4b69ed5b27/plugins/org.python.pydev.debug/src_console](https://github.com/aptana/Pydev/tree/ad4fd3512c899b73264e4ee981be0c4b69ed5b27/plugins/org.python.pydev.debug/src_console)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T16:17:59.267

所以我想我会自己回答这个问题，因为我终于能够完成控制台。它仍然是一个工作原型，但我想随着你不断添加东西，你可以越来越多地清理代码。就我目前的目的而言，这就是它的工作方式。

如果您想要简短版本，那么我基本上模仿了`ProcessConsole`Eclipse 提供的版本，因为这正是我所需要的：我可以在其中连接进程的控制台，但由于它`ProcessConsole`是内部的，我喜欢避免扩展这些类。

以下是我用来实现与控制台交互的类的概述。我不会给出关于在哪里`MyConsole`创建的借口。基本上，`DebugUITools.getConsole(myProcess)`我没有使用 ，而是使用了自己的`myProcess.getConsole()`方法。`MyProcess`延伸`RuntimeProcess`。

```
class MyConsole extends IOConsole {
 private IOConsoleInputStream fInput;
 private IOConsoleOutputStream fOutput;
 private IStreamsProxy fStreamsProxy;
 private ConsoleHistory history;
 //This is to remember the caret position after the prompt 
 private int caretAtPrompt;
     /* in the console so when you need to replace the command on up and down 
      * arrow keys you have the position. 
      * I just did a caretAtPrompt += String.Length wherever string was 
      * appended to the console. Mainly in the streamlistener and 
      * InputJob unless you specifically output something to the output 
      * stream.
      */
 //In the constructor you assign all the above fields. Below are some 
 //to point out.
 //fInput = getInputStream();
 // fStreamsProxy = process.getStreamsProxy();
 // fOutput = newOutputStream();

 //We must override the following method to get access to the caret
 @Override
 public IPageBookViewPage createPage(IConsoleView view) {
    return new MyConsolePage(this, view);
    }
 //After this I followed the ProcessConsole and added the 
 //InputJob and StreamListener
 //defined in there. 
 }

class MyConsolePage extends TextConsolePage {
 //Not much in this class, just override the createViewer
 // to return MyConsoleViewer
 }

class MyConsoleViewer extends TextConsoleViewer {
 //This is the most important class and most of the work is done here
 //Again I basically copied everything from IOConsoleViewer and then
 //updated whatever I needed
 //I added a VerifyKeyListener for the up and down arrow 
 //keys for the console history

 MyConsoleViewer (Composite parent, MyConsole console) {
  //I have omitted a lot of code as it was too much to put up, 
  //just highlighted a few
  getTextWidget().addVerifyKeyListener(new MyKeyChecker());
  }

 class MyKeyChecker implements VerifyKeyListener {...}

 } 
```

[这](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.7/org.eclipse.debug/ui/3.7.0/org/eclipse/debug/internal/ui/views/console/ProcessConsole.java#ProcessConsole.StreamListener)是 的代码`ProcessConsole`。 [这](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.7/org.eclipse.ui/console/3.5.100/org/eclipse/ui/internal/console/IOConsoleViewer.java#IOConsoleViewer)是 的代码`IOConsoleViewer`。

我创建的`ConsoleHistory`类只有一个双向链接的字符串列表来保存用户输入的所有命令。创建一个非常简单的类。

一旦您查看了 Eclipse 类 (`ProcessConsole`和`IOConsoleViewer`)，它实际上都是不言自明的。我在这里没有放太多代码，因为有很多。但希望这能给我一些方向，因为当我开始时我完全迷失了。

我很乐意回答问题，如果有人问，我会添加更具体的代码。

# xml - 获取xml body的所有元素并添加到struct

> ID：10533001
> 
> 赞同：0
> 
> 时间：2012-05-10T11:25:20.050
> 
> 标签：xml, coldfusion

我正在寻找一种遍历 XML-Body 并将每个 xml 元素传递到结构中的方法。我以这种方式访问​​了 xml 正文：

```
<cfset var x = arguments.httpRequest />
<cfset cont = xmlparse(x) />
<cfset var body = xmlsearch(cont, "//SOAP-ENV:Body")[1] />
<cfset var args = body.xmlchildren[1].xmlchildren />
<cfset xmlElements = {} />
<cfset xmlElements["#args[1].xmlName#"] = "#args[1].xmlText#" /> 
```

所以如果它不是复杂类型，我可以获取 args 的每个元素。要访问我以这种方式使用的复杂元素的子元素：

```
<cfset var children = "" />
<cfset children = args[3].xmlchildren />
<cfset children = args[1].xmlchildren /> 
```

第三个元素的 XML 如下所示：

```
<Element>
    <item>
        <child1>XP_RA_10</child1>
        <child2>RA-EXPRESS-KATALOG</Wmvtx>     
    </item>
</Element> 
```

但我想创建一个方法来检查是否有任何 xmlchildren。我试着那样做...

```
<cfif ArrayIsDefined(i.xmlchildren, 1)>
    <cfset children = args[i].xmlchildren />
    <cfif ArrayIsDefined(children[1].xmlchildren, 1)>
        <!--- if more xmlchildren exist --->
    <cfelse>
        <!if one xmlchildren exist --->
    </cfif>

<cfelse>
    <!--- if xmlchidren doesn't exist --->
</cfif> 
```

...但我无法访问元素以将它们插入到我创建的结构中。总是收到结构未定义的错误....

检查是否有任何子元素是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:31:57.327

除非您提前*知道XML 对象的结构，否则您将不得不测试每个子对象并遍历节点，直到您知道您有一个简单的对象。*为了帮助有“是”功能，如：

```
isObject(var);
isStruct(var);
isArray(var);
isSimpleValue(variable); 
```

一旦你知道你有一个数组（例如），你就可以按长度遍历它的索引，如下所示：

```
<Cfif isArray(children)>
<cfloop form="1" to="#arraylen(children)#" index="i">
      <cfset thisNode = children[i]/>
      <cfif isStruct(thisNode)?
         .... do something with the structkeylist.
      </cfif>
     <Cfif isArray(thisNode)>
        .... more looping...
     </cfif>
</cfloop>
</cfif> 
```

对于真正复杂的对象来说，这可能是相当令人生畏的。我很好奇你为什么要这么做？XML 被设计为“非扁平化”——扁平化它是否有特定要求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T09:32:32.527

这是你要找的吗？[RIAForge 上的 XmlToStruct](http://xml2struct.riaforge.org/)

# php - 在 MySQL 数据库中保存统计数据以获得折线图

> ID：10533002
> 
> 赞同：0
> 
> 时间：2012-05-10T11:25:25.537
> 
> 标签：php, mysql, graph, crontab

我正在尝试制作一个漂亮的折线图来表示用户注册到我的网站的比率。将我的站点统计数据获取并存储到 MySQL 数据库的最佳方法是什么？

我正在考虑使用一个 cron 作业，它会从一个单独的表中获取用户总数，然后减去以前的总数以获得新注册用户的数量。该值将用于折线图。对我来说，这似乎太多了，特别是如果我想以每分钟为基础获得用户率。有没有更有效的方法来做到这一点？我应该将每一天存储在单独的行中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:37:55.937

我建议您将用户注册的时间包含在您的用户表中。然后，您可以在以后执行您喜欢的任何分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:48:20.913

您还可以在表中创建一个由 cron 作业升级的字段（按分钟、小时、天等），该字段存储用户的状态、新的、旧的或您拥有的其他状态。

正如eggyal所说，您还必须有一个用户注册日期的字段

# php - 如何不从 curl-multi 返回数据并减少 CPU 使用率？

> ID：10533003
> 
> 赞同：0
> 
> 时间：2012-05-10T11:25:32.497
> 
> 标签：php, apache, curl, curl-multi

我在 php 中有一个使用多卷曲的脚本。

一般的多卷曲请求由 50 个单独的卷曲句柄组成。每个请求返回都需要一些时间，所以我的脚本应该等到远程服务器上的处理完成。

这 50 个请求中的每一个都返回大量我不需要的数据（内容）。因此，忽略返回的数据会更有效。但是我确实需要知道远程服务器上的处理何时完成，即返回数据的时间。

我不需要使用数据但确实需要发出请求的原因是远程服务器将数据放入数据库中，随后我从自己的服务器中获取。所以我基本上只需要发出这个请求并且我需要知道远程服务器上的脚本何时完成。

**我的问题：** 这个请求消耗了大量的 CPU，我怎样才能让它更有效率？

编码：

```
$nrofrequests=count($variable1);

//Build multi-curl for all to scrape sites at once:
for($i=0;$i<$nrofrequests;$i++){

$post='variable1='.$variable1[$i].'&variable2='.$variable2[$i];
$url='http://www.domain.com/'.$scriptnumber[$i];

$ch[$i] = curl_init($url);
curl_setopt ($ch[$i], CURLOPT_POST, 1);     
curl_setopt ($ch[$i], CURLOPT_POSTFIELDS, $post); 
curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch[$i], CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($ch[$i], CURLOPT_TIMEOUT, 35);  
set_time_limit(35); 
}

// build the multi-curl handle, adding both $ch
$mh = curl_multi_init();
for ($i=0; $i<$nrofrequests; $i ++ ):
curl_multi_add_handle($mh, $ch[$i]);
endfor;

// execute all queries simultaneously, and continue when all are complete
$running = null;
do {curl_multi_exec($mh, $running);} 
while ($running);

for ($i=0; $i<$nrofrequests; $i ++ ):
curl_multi_remove_handle($mh, $ch[$i]);
endfor; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:54:36.103

如果您没有将 CURLOPT_RETURNTRANSFER 设置为 true 并将 CURLOPT_NOBODY 设置为 true，那么无论是否失败，您都只会得到一个布尔值。但我怀疑这会提高 CPU 的使用率。
然而，在等待 curl 完成时睡觉会提高 CPU 使用率。

```
// During init
curl_setopt($ch[$i], CURLOPT_RETURNTRANSFER, false); 
curl_setopt($chi[$i], CURLOPT_NOBODY,true);

// execute all queries simultaneously, and continue when all are complete
$running = null;
do {
    curl_multi_select($mh,5);  // Wait max 5 seconds 'till at least one of the curls shows activity
    curl_multi_exec($mh, $running);
} 
while ($running ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:33:17.893

这已经在stackoverflow上回答了很多次。你必须使用[curl_multi_select](http://www.php.net/manual/en/function.curl-multi-select.php)来避免忙循环。

# objective-c - iOS Cross Dissolve 没有更暗的中间

> ID：10533009
> 
> 赞同：1
> 
> 时间：2012-05-10T11:25:52.423
> 
> 标签：objective-c, ios, xcode

我们正在尝试在两个几乎完全相同的图像（几乎是动画帧）之间进行溶解，但到目前为止，我们无法消除在溶解过程中发生的变暗。客户非常坚定地认为没有这种更深的溶解，有什么想法吗？

```
 UIImageView *newImageView = [[UIImageView alloc] initWithFrame:imageViewSmileDesign.frame];
newImageView.image = imageViewSmileDesign.image;
[self.view addSubview:newImageView];

imageViewSmileDesign.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.jpg", result]];
imageViewSmileDesign.alpha = 0;

[UIView animateWithDuration:0.5 animations:^{
    imageViewSmileDesign.alpha = 1;
    newImageView.alpha = 0;
} completion:^(BOOL finished) {
    [newImageView removeFromSuperview];
} ]; 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:32:52.967

You could use the cross-disolve animation that's built into [`UIView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/transitionFromView%3atoView%3aduration%3aoptions%3acompletion%3a):

```
+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion 
```

Set options to `UIViewAnimationOptionTransitionCrossDissolve`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:43:04.753

只是不要将 'newImageView' 的 alpha 更改为 0。这将导致新图像在旧图像之上褪色，并且您没有这种中途状态，它们都是半透明的，显示背景颜色。

您必须在动画之前`imageViewSmileDesign`调用 to 将其带到最前面。`bringSubviewToFront:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:43:30.387

如果两个图像具有相同的框架，只需删除`newImageView.alpha = 0;`. 这样就行了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T06:54:44.837

您需要延迟 newImageView.alpha 淡入淡出的 START。

# jquery - 直接链接上的禁止页面访问

> ID：10533010
> 
> 赞同：1
> 
> 时间：2012-05-10T11:25:58.020
> 
> 标签：jquery, html, .htaccess, cookies

你好再一次...

我想出了一个奇怪的想法，但我不知道是否可以做到。

假设我有 2 个 html 页面。首先（index.html）在某处包含一个按钮。该按钮用于在第二页 (proceed.html) 上继续。

基本上...我想以某种方式禁止直接访问，例如复制/粘贴或访问历史记录...并且只允许通过单击 index.html 中的指定按钮来访问页面。

有没有可能做到这一点？Jquery cookie 或 .htaccess？感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:54:27.863

我认为有几种方法可以实现这一目标。您可以检查 http-referrer，并且仅当用户来自您的第一页时才允许访问。这可以通过 .htaccess 来完成（因为它通常用于防止图像盗链）。以这个例子为起点：
[http ://altlab.com/htaccess_tutorial.html](http://altlab.com/htaccess_tutorial.html)

当然，您也可以在使用 PHP/Python/whatever 时检查引用服务器端。

或者，作为第二种方法 - 通过 jQuery 加载proceed.html 并确保它仅在请求通过ajax 完成时才允许访问。同样在这里，您可以使用不同的技术进行检查。
有关更多信息，请参阅此问题：[使用 htaccess 拒绝 ajax 文件访问](https://stackoverflow.com/questions/3466802/deny-ajax-file-access-using-htaccess)

阿帕奇示例：

```
SetEnvIfNoCase X-Requested-With XMLHttpRequest ajax
Order Deny,Allow
Deny from all
Allow from env=ajax 
```

# asp.net - SQL Server，除了一个值可以考虑两个列吗？

> ID：10533013
> 
> 赞同：0
> 
> 时间：2012-05-10T11:26:06.240
> 
> 标签：asp.net, sql, sql-server

我有一个查询引擎历史数据的 sql 数据库。其中一个特点是，存储过程每天都会在所有数据中搜索特定事件，如果找到该事件，它将把它插入到一个新表中。

问题是这些数据必须是唯一的......

表头如下：

```
ID / ID_Location / IDDown / IDUp / DtDown / DtUp / TimeDifference / IsExempt / Reason / Details / OrigDtUp 
```

sql查询是：

```
insert into exempts(ID_Location, iddown, idup, dtdown, dtup, timedifference)
select ID_Location, iddown, idup, dtdown, dtup, DATEDIFF(MINUTE, dtdown, dtup) as timedifference
from @tmptbl
except
select ID_Location, iddown, idup, dtdown, dtup, timedifference from exempts 
```

但是我需要查询来检查`DtUp`和`OrigDtUp`列并忽略时间差异，因为用户可以将 更改为`DtUp`列表中的任何值并且原始`DtUp`值移动到`OrigDtUp`记录现在不同并且重新插入记录但使用原始值？ ?

提前致谢！！尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:54:36.610

使用左连接，更容易看出逻辑：

```
 insert into exempts(ID_Location, iddown, idup, dtdown, dtup, timedifference) 
    select t.ID_Location, t.iddown, t.idup, t.dtdown, t.dtup, DATEDIFF(MINUTE, dtdown, dtup) as timedifference 
    from @tmptbl as t
      left join exempts as e 
        on  t.ID_Location = e.ID_Location 
        and t.iddown = e.iddown
        and t.idup = e.idup
        and t.dtdown = e. dtdown
        and t.DtUp = e.OrigDtUp --  <<  Match diff columns here
    where t.ID_Location is null 
```

# ravendb - 在 ravendb 中更新深度嵌套的文档

> ID：10533016
> 
> 赞同：0
> 
> 时间：2012-05-10T11:26:07.443
> 
> 标签：ravendb

我有以下文档结构，我需要在嵌套文档中插入值。

```
 {
      "Level-1": {
        "Level-2": {
          "Level-3": {
            "aaa": "bbb"
            "Level-4": {

            }
          }
        }
      }
    } 
```

我怎样才能在任何级别每次都获得密钥。有一个获取密钥的功能

```
 var workingDOc = session.Load<RavenJObject>("xyz/b"); 
```

`workingDoc.Keys`会给我这个文档的所有密钥但是我怎么能得到第二级的密钥。当我为嵌套文档提供密钥时。例如，现在我想要“Level-1”的所有键。有什么办法吗？如何检查密钥是否为嵌套文档。请帮助。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:14:37.950

Rajdeep，您不能部分加载文档。您当然可以在一个文档中拥有多个级别的嵌套对象，并且根据您的数据模型，这可能是一个好主意，但是，如果您想修改它，您总是需要将文档作为一个整体加载。

# asp.net-mvc-3 - ASP.NET MVC 3 限制 API 访问

> ID：10533018
> 
> 赞同：2
> 
> 时间：2012-05-10T11:26:16.603
> 
> 标签：asp.net-mvc-3, security, api, servicestack

我有一个 ASP.NET MVC 3 应用程序，它带有一个提供数据的自托管 ServiceStack API。在 Web.Config 中添加 API 位置路径后，API 可由我的代码调用并且运行良好：

```
<location path="api">
    <system.web>
        <authorization>
            <allow users="*"/>
        </authorization>
    </system.web>
</location> 
```

我遇到的问题是，当应用程序运行时，可以通过浏览器访问 API - 我只需在浏览器中键入 http:\localhost:xxxx\api。什么是限制对我的自托管 API 的访问的好方法，以便我可以继续在 MVC 3 应用程序中调用它，但阻止用户通过浏览器访问 API？

请注意，在将来的某个时候，我将希望公开 API 的某些区域以使它们可以公开访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:47:31.203

一种可能性是使用特定用户来访问 API：

```
<location path="api">
    <system.web>
        <authorization>
            <allow users="api_user" />
        </authorization>
    </system.web>
</location> 
```

然后将您的 API 配置为只能由`api_user`. 这样浏览器中的任何其他经过身份验证的用户都将无法访问此 API。在您的 ASP.NET MVC 3 应用程序中，您可以在向 API 发送 HTTP 请求之前使用给定用户创建身份验证票证。

另请注意，使用`<location>`web.config 中的标记来控制 ASP.NET MVC 应用程序中的授权是一个非常糟糕的主意。这样做的原因是您依赖于一些 url (api)。但是 ASP.NET MVC 使用路由。因此，您应该使用`[Authorize]`或自定义授权属性来装饰您要保护的相应控制器/操作。这样您的授权不再依赖于您的路由配置。

另一种可能性是使用自定义授权属性并[实现访问令牌](http://blog.developers.ba/post/2012/03/03/ASPNET-Web-API-Authorization-using-Tokens.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T16:32:17.680

注意：[ServiceStack](http://www.servicestack.net)内置的[授权和身份验证](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)支持是独立的，并且与 ASP.NET 的身份验证分离。

您通常可以通过从包含以下一项或多项的基类继承来限制对所有服务的访问：

*   [Authenticate] - 只允许经过身份验证的用户访问
*   [RequiredRole] - 只允许指定角色的用户访问
*   [RequiredPermission] - 只允许具有指定权限的用户访问

[注意：这些属性也适用于从ServiceStackController](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs)或标有[[ExecuteServiceStackFilters]](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ExecuteServiceStackFiltersAttribute.cs)属性的控制器继承的 MVC 控制器。

[您可以在Social Bootstrap Api](https://github.com/ServiceStack/SocialBootstrapApi)示例项目中检查使用这些属性的 MVC + ServiceStack 演示。

另一种一般限制访问的方法是注册一个全局[请求过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)，该过滤器在每个请求上执行。

# c# - 处理列表中的每个元素 然后将列表存储回字符串

> ID：10533020
> 
> 赞同：-3
> 
> 时间：2012-05-10T11:26:19.357
> 
> 标签：c#, c#-4.0

假设我有以下内容：

```
public static string testtok( string ss)
{
    if ......
        return ss=................;

    return ss;
} 
```

我可以做这样的事情吗？

```
private string stemmingwords (List<string> wordstokens)
{
     return string.Join(" ", wordstokens).Where(x => testtok(x));
} 
```

那么为什么它不起作用呢？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:28:18.270

不应该是这样的：

```
private string stemmingwords (List<string> wordstokens)
{

 return string.Join(" ", wordstokens.Select(x=> testtok(x));
} 
```

`string.Join`返回一个字符串，因此您的 Where 将对字符串起作用，即。`IEnumerable<char>`.

我的版本直接在单词标记上使用 Select 而不是`string.Join`. 此外，`Where`是一种过滤操作，不会修改元素。`Select`是一个投影操作，可以返回另一个被发送的元素，这就是你想要的。

# android - Android：如何将 WebView 从一个 Activity 传递到另一个 Activity

> ID：10533022
> 
> 赞同：0
> 
> 时间：2012-05-10T11:26:35.790
> 
> 标签：android, android-activity

我想将 WebView 从一个活动传递到另一个活动。怎么做。我提到[了如何在 Android 上将对象从一个活动传递到另一个活动？](https://stackoverflow.com/questions/2906925/android-how-do-i-pass-an-object-from-one-activity-to-another) 但仍然对此一无所知。请帮我得到这个....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:15:13.597

听起来你可能想要一个广播接收器......试试看这里：[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

这将使一个活动向另一个活动发送消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:38:21.073

您要么尝试使用`finish()`传递的活动，要么`finish()`在活动完成计算后简单地调用活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:40:56.533

您确定要在 Android 活动中使用它，而不仅仅是普通的 Java 类吗？

# itext - 要知道它是否是 ITEXT pdf 中的新页面

> ID：10533023
> 
> 赞同：2
> 
> 时间：2012-05-10T11:26:44.623
> 
> 标签：itext

我正在使用 itext 生成 pdf。因此，当页面内容超出时，它会自动创建一个新页面。我想知道它是否创建了一个新页面。如果是，我想在页面顶部添加一些图像。

```
List paylist =new List(List.ORDERED, List.ALPHABETICAL);
paylist.setIndentationLeft(10);
paylist.add(new ListItem("Some text", yourfont));
document.add(paylist); 
```

列表的内容将是动态的。所以我无法找到它是否在同一页面中的新页面。请给个建议。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:03:10.240

子类[`PdfPageEventHelper`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPageEventHelper.html)化并将其实例绑定到您的`PdfWriter`：

```
writer.setPageEvent(new YourCustomPageEventHelper()); 
```

在该类中，有一个方法被调用`onStartPage`，它将为文档中的每一页调用。使用它为每个页面添加图像，然后您不必担心跟踪事物。有关大量示例，请参[见此页面](http://itextpdf.com/themes/keyword.php?id=204)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:41:08.050

在向文档添加内容之前和之后检查页码。如果该值不同，则创建了一个新页面。

页码由[PdfWriter.getPageNumber()](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfWriter.html#getPageNumber%28%29)方法返回。

# android - 安装在 sdcard 上的应用程序的 .apk 位置在哪里？

> ID：10533030
> 
> 赞同：25
> 
> 时间：2012-05-10T11:27:25.497
> 
> 标签：android, location, external, apk

我知道系统应用程序的位置是“/system/app”，而用户应用程序的位置是“/data/app”。但是对于我移动到/安装在 sdcard 上的那些，我找不到 apk 的位置。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T11:45:17.307

安装在 SD 卡上的应用程序存储在目录“ **.android_secure** ”中。

如果我没记错的话，您不会直接在该文件夹中找到 APK 文件，因为内容已加密。这是为了防止直接访问付费应用程序的 APK 文件。

加密部分安装在文件系统的其他位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-10T11:48:33.360

对我来说，至少在三星 Galaxy s 2 i777 上使用 cyanogenmod9 我发现它们在 /mnt/asec/ 这个位置的工作方式与 /system/app/ 和 /data/app/ 不同，因为系统实际上是为每个应用程序创建一个挂载，而不是而不仅仅是把它们塞进一个文件夹。确保记下符号链接。

您将无法像其他两个一样添加到此处，但您可以提取 apk。更好的解决方案是市场上的 MyAppSharer。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-23T13:13:09.963

它将在 mnt -> asec -> -> pkg.apk

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-16T18:55:45.987

在 Android 5.0+（Lollipop、Marshmallow）上，几乎所有已安装的非系统应用程序都将放置在：

```
/data/app/ 
```

**访问 /data 需要 root。**

**在使用adb shell**时使用**su**来获得 root 访问权限，这当然需要您的手机首先获得 root 权限。

 **该目录包含每个应用程序的子目录。每个子目录都由他的包命名，遵循 Android 应用程序命名约定：

```
tld.author.appname-N 
```

其中 N 表示大于或等于 1 的数字

例如对于 Firefox，它看起来像：

```
org.mozilla.firefox-1 
```

在每个应用程序目录中，您都会找到一个代表已安装应用程序的**base.apk 。**

因此，如果您想要 Firefox，只需下载：

```
/data/app/org.mozilla.firefox-1/base.apk 
```

使用 adb pull/scp 或将其复制到您的 sdcard 并使用 MTP 下载。

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T12:20:36.217

它在文件资源管理器中-> mnt/sdcard

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-21T14:43:39.500

安装[ES 文件资源管理器](https://play.google.com/store/apps/details?id=com.estrongs.android.pop)。转到主页会有链接应用程序...在该链接下您会找到安装在sd卡或手机内存上的所有应用程序..选择应用程序并分享...享受...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-22T14:18:51.173

在 lineage 14, Android 7 上，所有 sdcard 应用程序都存储在 /mnt/expand/ 和文件夹“app”中的 apk**

# database - Hibernate HQL 只命中会话缓存

> ID：10533032
> 
> 赞同：7
> 
> 时间：2012-05-10T11:27:28.100
> 
> 标签：database, hibernate, hql, session-cache

我在理解`HQL`查询从哪里获取信息时遇到了一些麻烦。我的项目使用不同的线程，每个线程读取/写入数据库。线程不共享 Session 对象，而是使用一个`HibernateUtil`为我创建会话的类。

直到最近，我只会在写作后关闭会话，而不是在阅读后。对对象的更改将立即在数据库中看到，**但是**在其他线程上读取时（与用于写入的会话对象不同）我会得到陈旧的信息。读取和写入总是发生在不同的线程上，这意味着不同的会话对象和不同的会话缓存。

我一直认为通过使用`HQL`而不是`Criteria`，我将始终以数据库（或二级缓存）而不是会话缓存为目标，但是在调试我的代码时，我很清楚 HQL 正在会话缓存中寻找对象并检索了一个旧的过时对象。

假设`HQL`总是以数据库为目标，我错了吗？或者至少是二级缓存？

PS：我只使用一个`SessionFactory`对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:34:08.767

Hibernate 有不同的缓存概念——实体缓存和查询缓存。实体缓存是会话缓存（以及二级缓存，如果启用）所做的。

假设未启用查询缓存（默认情况下未启用），那么您的 HQL 将针对数据库执行。这将返回与查询匹配的实体的 ID。如果这些实体已经在会话缓存中，那么 Hibernate 会返回这些实体，而不是从数据库中重建它们。如果您的会话有它们的旧副本（因为另一个会话已经更新了数据库），那么这就是您遇到的问题。

我建议不要使用长期会话，主要是因为这个原因。您应该将会话的生命周期限制为您尝试执行的特定工作单元，然后将其关闭。这样做几乎没有或没有性能损失（假设您使用数据库连接池）。或者，为了确保您不会获得过时的实体，您可以调用`Session.clear()`，但您最终可能会遇到意想不到的性能副作用。

# asp.net - PreviousPage 在一台机器上为空，而不是在另一台机器上

> ID：10533046
> 
> 赞同：3
> 
> 时间：2012-05-10T11:28:33.840
> 
> 标签：asp.net, cross-page-postback

我有一个网站，其页面使用带有 PostBackUrl 的 ASP:Button 进行跨页回发，如下所示：

```
<asp:Button ID="FindButton" runat="server" Text="Find" CssClass="button" PostBackUrl="~/TGS/BusinessResults.aspx"  meta:resourcekey="FindButtonResource1" /> 
```

除了 之外，我不需要有关上一页的信息`PreviousPage.IsCrossPagePostBack`，因此不需要添加 PreviousPageType。

**问题** 我有两台机器，一台笔记本电脑和一台台式机。我的代码在笔记本电脑上按预期工作（PreviousPage 不为空），但在我的桌面上，PreviousPage 始终为空，且代码相同。

我在两台机器上都有相同的 Visual Studio 2010 安装和相同的 .NET 版本（使用 System.Environment.Version 检查）。

有什么想法吗？

编辑：作为更新，这不再是必要的——我用不同的方式解决了我的问题（这与此没有太大关系）——但一如既往；我将包括我的解决方案：

我正在使用一些 Response.Write 在加载实际页面时将加载 gif 写入网站，这搞砸了一些与表单相关的事情。我在加载 gif html 的标题中包含了一个基本目标，这解决了我的问题所有链接在新图像中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:44:49.723

空的 PreviousPage 可能是由可能通过干预 Web 代理或可能是与台式机内联的缓存设备而不是笔记本电脑引起的传输引起的。我会拉一个网络监视器和/或 ProcMon 跟踪，看看是否有类似的东西在起作用。希望在某种程度上有所帮助。

# android - android终端：列出apk的主要活动

> ID：10533055
> 
> 赞同：0
> 
> 时间：2012-05-10T11:29:08.987
> 
> 标签：android, bash, list, shell

我正在尝试编写一个最终将在 init.d 中结束的 bash 脚本，以创建一个 XML 文件，该文件列出作为用户（而不是系统应用程序）安装的每个 apk 的主要活动

到目前为止，我的输出列出了 /data/app/ 中的所有 apk，但没有列出活动。

这是我所拥有的

```
for f in /data/app/*.apk; do
 p=${f%-[0-9].apk}
 e=${p##*/}
 echo "<boolean name=\"$e\" value=\"true\" />" >> /data/AppList.xml
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:48:43.390

不得不调查这个，因为我不知道，但我认为手机上有两个二进制文件应该是一个很大的帮助。

```
pm 
```

可以为您列出活动，您可能必须四处玩耍才能仅获得主要/启动器活动

```
am 
```

可用于在命令行上启动活动，如果您也需要的话

# ms-access - MS Access 2002 为记录源查询中的每一行形成查询/表

> ID：10533056
> 
> 赞同：0
> 
> 时间：2012-05-10T11:29:10.843
> 
> 标签：ms-access

我有一个查询作为表单的记录源，对于该查询中的每一行，都有一个链接表，其中 n 行匹配该行，我想从列表框中的每一行的所有 n 个匹配行中返回一个字段询问。我如何实现查询中的 1 个字段和链接表中的字段之间应该匹配的过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:03:15.893

您可以将列表框的行源设置为 sql 字符串。例如：

```
SELECT ID, AText FROM Table1 WHERE ID = Forms!Form1!ID 
```

数据的存储方式取决于绑定列和控制源。如果您不想显示匹配的列，在这种情况下是 ID，您可以设置列宽。您应该将列数设置为正确的列数。

```
Column Widths: 0;2.5
Column Count: 2 
```

然后，您必须重新查询当前事件中的列表框：

```
Private Sub Form_Current()
Me.List1.Requery
End Sub 
```

# c# - 在 MVC 中的实体中创建新对象的操作方法中的 RedirectToAction

> ID：10533066
> 
> 赞同：3
> 
> 时间：2012-05-10T11:30:03.633
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, redirecttoaction

我有一个如下的操作方法：

```
 public ActionResult CreateNKITemplate(int id)
    {
        var goalcard = createNKIRep.GetGoalCardByID(id);
        createNKIRep.CreateTemplate(goalcard);

        return View();
    } 
```

此操作方法将在我的 GoalCard 实体中创建一个新的 GoalCard 对象，这意味着它基本上会生成一个 ID。

在 CreateTemplate 操作方法中，我想删除`return View();`并添加`return RedirectToAction`它，以便它重定向到创建的新 GoalCard 对象 ID

我想将新的 GoalCard 对象 ID 重定向到：

```
public ActionResult Edit(int id)
{
   // code..
} 
```

我怎样才能做到这一点？

基本上：复制并创建一个新对象，然后将新对象 id 重定向到这个以 id 作为参数的编辑操作方法。

**更新：**

接受的答案解决方案：

```
 public ActionResult CreateNKITemplate(int id)
    {
       var goalcard = createNKIRep.GetGoalCardByID(id);
       var copygoalcard = createNKIRep.CreateTemplate(goalcard);
       var GoalCardCopyID = copygoalcard.Id;

       return RedirectToAction(
              "Edit", // Action name
              "CreateNKI", // Controller name
              new { id = GoalCardCopyID }); // Route values

    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:34:07.033

好吧，定义`RedirectToAction`是。

```
protected internal RedirectToRouteResult RedirectToAction(
    string actionName,
    string controllerName,
    Object routeValues
) 
```

所以我们只是填写你的价值观。

```
RedirectToAction(
    "Edit",                // Action name
    "GoalCardController",  // Controller name
    new { id = gcId }      // Route values
) 
```

请注意，上面的代码假定您的控制器被调用`GoalCardController`并且 id 存储在一个名为`gcId`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:41:44.583

你问这个吗？

```
public ActionResult CreateNKITemplate(int id)
{
    var goalcard = createNKIRep.GetGoalCardByID(id);
    createNKIRep.CreateTemplate(goalcard);

    return RedirectToAction("Edit", new { id = id});
} 
```

这将重定向您并将 id 作为参数，您可以以相同的方式添加多个参数，只需除以“，”。

如果您愿意，您也可以选择通往另一个控制器的路径。

# android - OSMdroid 添加自定义图标到 ItemizedOverlay

> ID：10533071
> 
> 赞同：8
> 
> 时间：2012-05-10T11:30:14.087
> 
> 标签：android, itemizedoverlay, osmdroid

我正在使用 ItemizedIconOverlay 类，我目前正在地图上显示事件以及具有相同默认图标的用户位置。

如何更改每个叠加层的图标集？

是否有类似于 google.maps 示例的内容：

```
 drawable = getResources().getDrawable(R.drawable.marker);
    drawable3 = getResources().getDrawable(R.drawable.disruption);
    drawable2 = getResources().getDrawable(R.drawable.marker_me);

    itemizedOverlay = new MyItemizedOverlay(drawable, mapView);
    itemizedOverlay2 = new MyItemizedOverlay(drawable2, mapView);
    itemizedOverlay3 = new MyItemizedOverlay(drawable3, mapView); 
```

我让每个 itemizedOverlay 都有自己的标记...

如何使用 Open Street Maps 做到这一点？

```
mResourceProxy = new DefaultResourceProxyImpl(getApplicationContext());
this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(mItems, new Glistener(), mResourceProxy); 
```

感谢您的帮助，遗憾的是，这个开源项目没有太多在线支持......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T12:24:27.157

大概您的 mItems 是创建的 OverlayItems 的 ArrayList，如下所示：

```
mItems = new ArrayList<OverlayItem>(); 
```

在这个列表中，您将添加单独的 OveralyItems，因此当您创建每个项目时，您可以这样做，在将其添加到列表之前设置标记：

```
OverlayItem olItem = new OverlayItem("Here", "SampleDescription", point);
Drawable newMarker = this.getResources().getDrawable(R.drawable.mymarker);
olItem.setMarker(newMarker);
mItems.add(olItem); 
```

其中 mymarker 是您的 drawables 文件夹中的 .png。

**更新**- 为整个覆盖设置默认标记，更改

```
this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(mItems, new Glistener(), mResourceProxy); 
```

到

```
this.mMyLocationOverlay = new ItemizedIconOverlay<OverlayItem>(mItems, newMarker, new Glistener(), mResourceProxy); 
```

newMarker 和以前一样

# ios - 计算通讯录中的联系人总数 - iOS

> ID：10533074
> 
> 赞同：2
> 
> 时间：2012-05-10T11:30:34.967
> 
> 标签：ios, contacts

如何计算通讯录中的联系人总数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:54:28.533

试试这个

```
#import <AddressBook/AddressBook.h>
// ...

- (int)contactsCount {    
    ABAddressBookRef addressBook = ABAddressBookCreate( );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );
    CFRelease( addressBook );
    return (int)nPeople;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:50:41.767

您可以尝试使用 Erica Sadun 的[ABContactHelper](https://github.com/erica/ABContactHelper)。

至少作为一个起点。

在 ABContactsHelper.h 中有声明：

```
+ (int) contactsCount;
+ (int) contactsWithImageCount;
+ (int) contactsWithoutImageCount;
+ (int) numberOfGroups; 
```

我认为它有点过时了，所以你可能需要稍微调整一下代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T11:33:05.083

```
NSArray *people = [book people];
int count = [[book people] count]; 
```

# asp.net-mvc-3 - 绑定 DropdownList 并在回发后维护

> ID：10533081
> 
> 赞同：1
> 
> 时间：2012-05-10T11:30:53.913
> 
> 标签：asp.net-mvc-3, dropdownbox

我正在使用 MVC3。我将下拉列表与来自服务的数据绑定。但是在页面回发并且过滤器应用于列表之后，下拉列表会在网格中显示过滤器记录值，因为我总是绑定来自服务的列表。

但是，我希望下拉菜单始终显示数据库中的所有记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:57:41.090

我不太清楚你的问题。但它似乎是你认为的一个下拉菜单？我也不知道您要绑定什么，所以我创建了自己的，但请查看我的代码并对其进行修改以适合您的场景。

在您看来：

```
@model YourProject.ViewModels.YourViewModel 
```

在视图中有一个下拉列表中的银行列表。

您的银行下拉菜单：

```
<td><b>Bank:</b></td>
<td>
     @Html.DropDownListFor(
          x => x.BankId,
          new SelectList(Model.Banks, "Id", "Name", Model.BankId),
          "-- Select --"
     )
     @Html.ValidationMessageFor(x => x.BankId)
</td> 
```

您将返回到视图的视图模型：

```
public class YourViewModel
{
     // Partial class

     public int BankId { get; set; }
     public IEnumerable<Bank> Banks { get; set; }
} 
```

您的创建操作方法：

```
public ActionResult Create()
{
     YourViewModel viewModel = new YourViewModel
     {
          // Get all the banks from the database
          Banks = bankService.FindAll().Where(x => x.IsActive)
     }

     // Return the view model to the view
     // Always use a view model for your data
     return View(viewModel);
}

[HttpPost]
public ActionResult Create(YourViewModel viewModel)
{
     if (!ModelState.IsValid)
     {
          // If there is an error, rebind the dropdown.
          // The item that was selected will still be there.
          viewModel.Banks = bankService.FindAll().Where(x => x.IsActive);

          return View(viewModel);
     }

     // If you browse the values of viewModel you will see that BankId will have the
     // value (unique identifier of bank) already set.  Now that you have this value
     // you can do with it whatever you like.
} 
```

您的银行等级：

```
public class Bank
{
     public int Id { get; set; }
     public string Name { get; set; }
     public bool IsActive { get; set; }
} 
```

这很简单。我希望这有帮助 ：）

**PS：**请记住以后的帖子，始终提供尽可能详细的信息，以便我们更好地帮助您。另外不要忘记显示代码示例，以便我们可以看到您已经完成的工作。我们可以拥有的细节越多越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T12:34:07.200

当您将模型发布回 create[ `Http Post`] 操作时，不可能将银行的下拉列表值列表绑定回模型。我看到如果模型无效，你调用代码

```
viewModel.Banks = bankService.FindAll().Where(x => x.IsActive); 
```

再次获取所有银行的列表，我认为您需要再次访问数据库。

谢谢

# autocomplete - Google Places Autocomplete Dropdown Box

> ID：10533083
> 
> 赞同：2
> 
> 时间：2012-05-10T11:30:55.920
> 
> 标签：autocomplete

I have been looking at the autocomplete example of places. The result only offers four or five results. Is there a way to increase the number of results offered?

[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)

# java - Android Game Loop：如何达到平均 60 FPS？

> ID：10533085
> 
> 赞同：3
> 
> 时间：2012-05-10T11:31:00.127
> 
> 标签：java, android, loops, frame-rate

我在我的 HTC Wildfire S 上看到游戏 Airplane Madness 以恒定的平均 60 FPS 渲染屏幕。我一直试图在同一部智能手机上模仿结果，但我就是不明白为什么我的程序只能排在前 15平均FPS？

你可能会问，我如何查看疯狂飞机的帧率？有一个选项可以在“设置”中切换 FPS 计数器。我将我的设置为启用。

这是我的代码。这是我的游戏循环。有一些有趣的结果：

```
 public void run() {
        // Average FPS for Android is 15 on Test Phone is 13 through 15.
        // Max FPS is 20.
        // Occasional bursts of FPS60 may occur.
        long now, lastTime = System.nanoTime();
        double process = 0.0;
        final double NSperTick = 1000000000.0 / 60.0;
        while (running) {
            now = System.nanoTime();
            process += (now - lastTime) / NSperTick;
            lastTime = now;
            boolean ticked = false;
            while (process >= 1) {
                process -= 1;
                tick();
                ticked = true;
            }
            if (ticked) {
                render();
            }
            swap();
            try {
                Thread.sleep(2);
            }
            catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 
```

**谁能告诉我我做错了什么，需要改进什么等，以便我可以平均获得 60 FPS？**这个游戏循环，当在 Java（不是 Android）中运行时，它实际上运行得很好，所以我不确定哪些逻辑部分会影响我智能手机的帧速率。

提前致谢。

* * *

编辑：看起来我需要让 Man 知道所有功能。

```
private void render() {
    synchronized (holder) {
        if (holder.getSurface().isValid()) {
            Canvas c = holder.lockCanvas();
            c.drawRGB(0x44, 0x55, 0xff);
            ball.render(c);
            holder.unlockCanvasAndPost(c);
        }
    }
}

private void swap() {
}

private void tick() {
    float[] values = {meter.X, meter.Y, meter.Z};
    ball.tick(values);
    handler.tick(ball);
} 
```

以下是我检查游戏平均 FPS 的方法：

```
public void run() {
    // Average FPS for Android is 15 on Test Phone is 13 through 15.
    // Max FPS is 20.
    // Occasional bursts of FPS60 may occur.
    long now, lastTime = System.nanoTime();
    int frames = 0;
    double process = 0.0;
    long frameTime = System.currentTimeMillis();
    final double NSperTick = 1000000000.0 / 60.0;
    while (running) {
        now = System.nanoTime();
        process += (now - lastTime) / NSperTick;
        lastTime = now;
        boolean ticked = false;
        while (process >= 1) {
            process -= 1;
            tick();
            ticked = true;
        }
        if (ticked) {
            //render();
            frames++;
        }
        swap();
        try {
            Thread.sleep(2);
        }
        catch (InterruptedException e) {
            e.printStackTrace();
        }
        if (frameTime <= System.currentTimeMillis() - 1000)
        {
            Log.d("FrameRate", Integer.toString(frames));
            frameTime += 1000;
            frames = 0;
        }
    }
} 
```

以下是 DDMS 的结果：

```
03-12 14:29:21.008: D/FrameRate(3533): 14
03-12 14:29:22.061: D/FrameRate(3533): 15
03-12 14:29:23.048: D/FrameRate(3533): 14
03-12 14:29:24.033: D/FrameRate(3533): 14
03-12 14:29:25.018: D/FrameRate(3533): 14
03-12 14:29:26.000: D/FrameRate(3533): 14
03-12 14:29:27.056: D/FrameRate(3533): 15
03-12 14:29:28.047: D/FrameRate(3533): 14
03-12 14:29:29.026: D/FrameRate(3533): 14
03-12 14:29:29.995: D/FrameRate(3533): 14
03-12 14:29:31.037: D/FrameRate(3533): 15
03-12 14:29:32.015: D/FrameRate(3533): 14 
```

编辑2：还有更多信息：

我已经在 render() 函数中注释掉了这段代码：

```
synchronized (holder) 
```

但是，我仍然只能达到 14 到 15 FPS。这是我无法突破的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:15:24.463

我不明白为什么您在渲染循环中进行同步。这是一种不好的形式，因为它可能会锁定您的渲染线程，如果由于任何原因无法立即获取锁定，则会导致应用程序似乎冻结。获取锁也需要时间。

如果您以需要锁定渲染线程的方式组织数据，则需要重构您的设计。

永远不要在 UI 线程中同步！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:39:39.560

您是否尝试渲染较少的图像/纹理或某事？也许你的手机有点太弱了，或者你可以试着玩一下毫秒来睡觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:48:52.577

我强烈建议您使用诸如[libgdx 之](http://code.google.com/p/libgdx/)类的游戏框架。有大量的示例和教程可以使您的应用程序受益。更不用说你会轻而易举地将它移植到桌面或 HTML5。

# plpgsql - 函数返回表

> ID：10533086
> 
> 赞同：1
> 
> 时间：2012-05-10T11:31:02.777
> 
> 标签：plpgsql

我想要一个 plpgsql 函数，它返回任何表的内容，给定名称。下面的功能虽然由于多种原因无法正常工作，但将为您提供大致的思路。除了安全和编码实践，最简单的方法是什么？

最后，我想通过 Java CallableStatement 获得这些结果。

```
CREATE OR REPLACE FUNCTION get_table(tablename VARCHAR)
RETURNS SETOF RECORD AS $PROC$
BEGIN
    RETURN QUERY SELECT * FROM tablename;
END;
$PROC$ LANGUAGE 'plpgsql'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:58:15.283

你可以让你的函数像这样工作：

```
CREATE OR REPLACE FUNCTION get_table(tablename VARCHAR)
RETURNS SETOF RECORD AS $PROC$
BEGIN
    RETURN QUERY EXECUTE 'SELECT * FROM ' || quote_ident(tablename);
END;
$PROC$ LANGUAGE 'plpgsql'; 
```

为了调用它，您必须为所有返回的列指定名称和数据类型。如果你想列出有两列的表“t”，你可以像这样使用你的函数：

```
SELECT * FROM get_table('t') x(id int, val text); 
```

当然，这比任何一个都更长，也更麻烦：

```
SELECT * FROM t; 
```

或等价物：

```
TABLE t; 
```

我真的无法想象这样的功能可以使任何事情变得更好的用例。

# mysql - MySQL - using regex to filter values from a long string?

> ID：10533090
> 
> 赞同：0
> 
> 时间：2012-05-10T11:31:18.250
> 
> 标签：mysql, regex, varchar

I have this string (varchar) in a column:

> a:2:{s:15:"info_buyRequest";a:5:{s:4:"uenc";s:68:"aHR0cDovL3d3dy5wbGlzc2VlLWV4cGVydGUuZGUvdmFyZXNlLTEyNDk_X19fU0lEPVU,";s:7:"product";s:3:"270";s:15:"related_product";s:0:"";s:7:"options";a:10:{i:32112;s:5:"73815";i:32111;s:5:"73813";i:32109;s:3:"920";i:32110;s:3:"780";i:32113;s:5:"73816";i:32114;s:5:"73820";i:33541;s:5:"78496";i:33542;a:1:{i:1;s:0:"";}i:33539;s:5:"78485";i:33540;s:5:"78489";}s:3:"qty";s:1:"2";}s:7:"options";a:6:{i:0;a:7:{s:5:"label";s:10:"Plisseetyp";s:5:"value";s:13:"Verspannt VS2";s:11:"print_value";s:13:"Verspannt VS2";s:9:"option_id";s:5:"32112";s:11:"option_type";s:5:"radio";s:12:"option_value";s:5:"73815";s:11:"custom_view";b:0;}i:1;a:7:{s:5:"label";s:15:"Befestigungstyp";s:5:"value";s:11:"Klebeplatte";s:11:"print_value";s:11:"Klebeplatte";s:9:"option_id";s:5:"32111";s:11:"option_type";s:5:"radio";s:12:"option_value";s:5:"73813";s:11:"custom_view";b:0;}i:2;a:7:{s:5:"label";s:13:"**Höhe (in mm)";s:5:"value";s:3:"*920*"**;s:11:"print_value";s:3:"920";s:9:"option_id";s:5:"32109";s:11:"option_type";s:5:"field";s:12:"option_value";s:3:"920";s:11:"custom_view";b:0;}i:3;a:7:{s:5:"label";s:14:"**Breite (in mm)";s:5:"value";s:3:"*780*"**;s:11:"print_value";s:3:"780";s:9:"option_id";s:5:"32110";s:11:"option_type";s:5:"field";s:12:"option_value";s:3:"780";s:11:"custom_view";b:0;}i:4;a:7:{s:5:"label";s:13:"Schienenfarbe";s:5:"value";s:23:"weiß pulverbeschichtet";s:11:"print_value";s:23:"weiß pulverbeschichtet";s:9:"option_id";s:5:"32113";s:11:"option_type";s:5:"radio";s:12:"option_value";s:5:"73816";s:11:"custom_view";b:0;}i:5;a:7:{s:5:"label";s:24:"Bedienstab (ohne Gelenk)";s:5:"value";s:17:"Keinen Bedienstab";s:11:"print_value";s:17:"Keinen Bedienstab";s:9:"option_id";s:5:"32114";s:11:"option_type";s:9:"drop_down";s:12:"option_value";s:5:"73820";s:11:"custom_view";b:0;}}}

Now, what I need is the 920 and the 780 from that string. The front always has *Höhe (in mm)* and *Breite (in mm)*, the other stuff can differ. I tried using a regex to get the two numbers from the string, but failed. How could I do that?

Thanks!

# android - android中的文件目录

> ID：10533097
> 
> 赞同：0
> 
> 时间：2012-05-10T11:31:46.227
> 
> 标签：android, installation

我在 Eclipse 的 android 项目中的“文件”目录中有一个文件，但是当在我的设备或设备模拟器中运行应用程序时，我找不到这个目录

我想在安装过程中将此文件放入 /data/data/MYPACKAGE/files/mifile.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:34:24.870

将其放在 assets 文件夹下并使用 getAssets() 访问它

```
InputStream inputStream = getAssets().open("files/myfile.txt"); 
```

这将从文件中返回 InputStream 然后您可以读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:35:02.463

您可以使用`getRessourceAsStream(String path)`或简单地使用 assets 文件夹和`getAssets()`

# wpf - 绑定：文本块到列表框 wpf

> ID：10533104
> 
> 赞同：0
> 
> 时间：2012-05-10T11:32:05.257
> 
> 标签：wpf

我是 WPF 的新手。我有这个代码

```
<Window x:Class="ElementBinding.MultipleBindings"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MultipleBindings" Height="320" Width="300">
    <Grid>
        <Slider Name="sliderFontSize" Margin="0,12,6,243"
                Minimum="1" Maximum="40" Value="10"
                TickFrequency="1" TickPlacement="TopLeft">
        </Slider>
        <TextBox Name="txtContent" Margin="0,44,0,208">Color should change here</TextBox>
        <TextBlock Margin="3,150,3,3" Name="lblSampleText"
                    FontSize="{Binding ElementName=sliderFontSize, Path=Value}"
                    Text="{Binding ElementName=txtContent, Path=Text,Mode=TwoWay}"
                    Foreground="{Binding ElementName=lstColors, Path=SelectedItem.Tag}" >
        Multiple Bindings
        </TextBlock>
        <ListBox Height="54" HorizontalAlignment="Left" Margin="12,90,0,0" Name="lstColors" VerticalAlignment="Top" Width="120" >
            <ListBoxItem>Green</ListBoxItem>
            <ListBoxItem>Red</ListBoxItem>
            <ListBoxItem>Blue</ListBoxItem>
        </ListBox>
    </Grid>
</Window> 
```

如果我在列表框中选择一个项目，文本块将不会出现。我认为问题出在“SelectedItem.Tag”中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:47:46.700

你是对的。它应该是 Path=SelectedItem.Content：

```
<TextBlock Margin="3,150,3,3" Name="lblSampleText"
                FontSize="{Binding ElementName=sliderFontSize, Path=Value}"
                Text="{Binding ElementName=txtContent, Path=Text,Mode=TwoWay}"
                Foreground="{Binding ElementName=lstColors, Path=SelectedItem.Content}" > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:55:10.143

一些建议

*   不要只使用 Margin 来排列控件，查看 Layout with Panels（Grid、DockPanel 等）
*   不要使用字体大小和滑块来创建缩放之类的东西，最好使用带有 ScaleTransform 的 LayoutTransform

至少 Shakti 是正确的，绑定应该是 SelectedItem.Content

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Slider Name="sliderFontSize" Grid.Row="0" TickPlacement="TopLeft"
            Minimum="1" Maximum="5" Value="1"
            TickFrequency="1">
    </Slider>
    <TextBox Name="txtContent" Grid.Row="1">Color should change here</TextBox>
    <TextBlock Grid.Row="3" Name="lblSampleText"
                Text="{Binding ElementName=txtContent, Path=Text,Mode=TwoWay}"
                Foreground="{Binding ElementName=lstColors, Path=SelectedItem.Content}" >
        <TextBlock.LayoutTransform>
            <ScaleTransform ScaleX="{Binding ElementName=sliderFontSize, Path=Value}" ScaleY="{Binding ElementName=sliderFontSize, Path=Value}"/>
        </TextBlock.LayoutTransform>

    </TextBlock>
    <ListBox Height="54" HorizontalAlignment="Left"  Name="lstColors" VerticalAlignment="Top" Width="120" Grid.Row="2">
        <ListBoxItem>Green</ListBoxItem>
        <ListBoxItem>Red</ListBoxItem>
        <ListBoxItem>Blue</ListBoxItem>
    </ListBox>
</Grid> 
```

# xaml - 如何控制 Metro Style GridView 应用程序中出现在 GridView 行和列中的项目数？

> ID：10533105
> 
> 赞同：0
> 
> 时间：2012-05-10T11:32:08.347
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我创建了 GridView 应用程序，并在将项目与网格绑定后的 itemspage 中，当我将 ScrollViewer 旋转到 Vertical 时，它显示为 4 行和 5 列。

它只显示一列。如何控制行数和列数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:37:58.063

您可以根据未共享的布局以多种方式控制它。如果您想要一个固定数字 - 确保 GridView 的高度/宽度是您想要显示的列数/行数的正确倍数。例如，对于默认的 GridView，如果你想要 3 行，你可以这样：

```
<GridView
    Height="700">
    <GridView.ItemContainerStyle>
        <Style
            TargetType="GridViewItem">
            <Setter
                Property="Height"
                Value="200" />
... 
```

# spring - SpringMVC：DispatcherServlet 发出额外的查看请求

> ID：10533109
> 
> 赞同：2
> 
> 时间：2012-05-10T11:32:30.670
> 
> 标签：spring, spring-mvc

我对 Spring MVC 有一个奇怪的问题。我有一个像这样的简单控制器：

```
@Controller
@RequestMapping("admin")
public class AdminController {

@RequestMapping(value = "", method = RequestMethod.GET)
public String home() {
    return "home";
} 
```

当我运行我的服务器并访问 url: localhost/admin 时，我收到 404 错误。视图 home.jsp 存在并且应该被渲染。当我检查我的春季事件日志时，会出现以下内容：

```
DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'appServlet' processing GET request for [/admin]
DEBUG: org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /admin
DEBUG: org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Returning handler method [public java.lang.String be.roots.buildinginspector.web.controller.AdminController.home()]
DEBUG: org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'adminController'
DEBUG: org.springframework.web.servlet.DispatcherServlet - Last-Modified value for [/admin] is: -1
DEBUG: org.springframework.web.servlet.DispatcherServlet - Rendering view [org.springframework.web.servlet.view.JstlView: name 'home'; URL [home]] in DispatcherServlet with name 'appServlet'
DEBUG: org.springframework.web.servlet.view.JstlView - Added model object 'domainOfExpertise' of type [be.roots.buildinginspector.business.model.DomainOfExpertise] to request in view with name 'home'
DEBUG: org.springframework.web.servlet.view.JstlView - Added model object 'org.springframework.validation.BindingResult.domainOfExpertise' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'home'
DEBUG: org.springframework.web.servlet.view.JstlView - Forwarding to resource [home] in InternalResourceView 'home'
DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'appServlet' processing GET request for [/home]
DEBUG: org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /home
DEBUG: org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Did not find handler method for [/home]
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/home] in DispatcherServlet with name 'appServlet' 
```

一切都得到了正确处理，但不是只显示视图，而是 DispatcherServlet 向请求的视图名称的 url 发出一个新的 GET 请求。

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:/spring/config-core-business.xml
                 classpath*:/spring/config-app-security.xml
    </param-value>
</context-param>

<!-- Spring Security filter -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:/spring/appServlet/config-core-web.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>hiddenHttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

相关的弹簧上下文部分（config-core-web.xml）：

```
<resources mapping="/resources/**" location="../../../resources" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources
     in the /WEB-INF/views directory -->
<beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/"/>
    <beans:property name="suffix" value=".jsp"/>
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:47:13.573

```
@Controller
@RequestMapping("admin")
public class AdminController {

@RequestMapping(method = RequestMethod.GET)
public String home() {
    return "home";
} 
```

删除 @RequestMapping for home() 函数的“值”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:02:10.400

毕竟这是一个与tomcat相关的问题。由于某种原因，当我在 IDE 中重新创建配置时，错误已解决。谢谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:32:34.843

我认为这是 web.xml 中的 servlet 映射问题。仅在 web.xml 中将其更改为 /admin 地址。也许现在你有：

```
<url-pattern>*</url-pattern> 
```

将其更改为：

```
<url-pattern>/admin/*</url-pattern> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:57:53.047

在您的方法上定义的请求映射注释限制您的控制器响应以“/admin/home”开头的请求。

我将应用以下修改：

```
@Controller
@RequestMapping("/admin")
public class AdminController {

   @RequestMapping(method = RequestMethod.GET)
   public String home() {
      return "home";
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T11:52:12.413

试试这个：

```
@RequestMapping(value = "admin",
        method = {RequestMethod.GET, RequestMethod.POST }) 
```

# java - 使用休眠从数据库中删除重复的行

> ID：10533110
> 
> 赞同：0
> 
> 时间：2012-05-10T11:32:33.330
> 
> 标签：java, database, hibernate, hibernate-mapping

我有一个 hbm 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="true" default-lazy="false">
    <class name="com.saman.entity.hibernate.EmployeeEntity"
           table="Employee" optimistic-lock="version">
        <id name="id">
            <column name="Id" sql-type="bigint"/>
            <generator class="native"/>
        </id>
        <timestamp name="version" source="db"/>
        <property  name="firstName">
            <column name="FirstName" sql-type="nvarchar(300)"/>
        </property>
        <property name="lastName">
            <column name="LastName" sql-type="nvarchar(300)"/>
        </property>
        <property name="employeeType">
            <column name="EmployeeType" sql-type="nvarchar(300)"/>
        </property>
        <set name="shifts" table="Shifts" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="Id" not-null="true"/>
            </key>
            <one-to-many class="com.saman.entity.hibernate.ShiftEntity"/>
        </set>
    </class>
</hibernate-mapping> 
```

现在我想如果我添加一个员工并将其持久化，如果我添加另一个员工具有以前的信息，我的系统会引发异常并告诉我数据库中有另一个员工具有该信息。

hibernate 给我这个选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:58:24.027

好吧，只需将其添加到您的映射中

```
<properties name="firstName_lastName_unique" unique="true">
        <property name="firstName"/>
        <property name="lastName"/>
</properties> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:25:50.337

我想我理解你想要达到的目标。但我不知道你是否先在stackoverflow中搜索你的问题。这可能是您的答案[How to do multiple column UniqueConstraint in hbm?](https://stackoverflow.com/questions/2741088/how-to-do-multiple-column-uniqueconstraint-in-hbm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:26:07.097

您是否在数据库中的 ID 列上设置了自动增量？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:51:02.793

您已经有一个 id 值的生成器。这应该生成一个唯一的 id，但只有在这两个条件为真时才会这样做：

1.  该列要么被定义为自动增量（例如 MySQL），要么具有序列（例如 Oracle）
2.  保存新行时，成员变量 id 设置为 0。

我可以想象，当你用以前的信息保存一个新值时，变量 id 仍然有一个值！= 0，在这种情况下，数据库使用给定的值而不是生成一个新的唯一值，这将由于唯一而失败约束。

如果表上有第二个唯一索引，也会出现此错误。

# php - 访问 iframe 应用程序 facebook 中的用户数据

> ID：10533111
> 
> 赞同：0
> 
> 时间：2012-05-10T11:32:44.553
> 
> 标签：php, javascript, facebook, facebook-graph-api

如何从 iframe 应用程序获取用户详细信息？

问题是当我尝试对用户进行身份验证时，它会进行身份验证并重定向到`SITE`not to facebook。

实际上我正在使用 signed_request 来检查用户是否喜欢，如果喜欢我需要使用图形 api [任何其他方式/javascript？] 获取用户详细信息，以便我可以将其保存到数据库中。

这是我当前的代码

```
if (isset($_REQUEST['signed_request']))
        {
            $encoded_sig = null;
            $payload = null;
            list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
            $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
            $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), true));
            if($data->page->liked)
            {
                //liked

                $questions = $this->functions->get_questions();

                if($questions["status"] ==TRUE)
                {
                    $questions["data"] = $questions["data"]->result_array();
                    $this->load->view("public/contest",$questions);

                }
                else
                {
                    echo "FALSE";
                }

            }
            else {

                //not liked

                $this->load->view("public/continue");

            }
        } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:13:02.160

我建议使用[Facebook SDK](https://github.com/facebook/php-sdk)。它允许您获取用户 ID，然后查询 Graph API 以获取一些基本信息。[您可以在此处](http://developers.facebook.com/docs/reference/php/)获取有关 SDK 以及如何使用它的更多信息

# java - NTRUEncrypt inverse of polynomial algorithm

> ID：10533116
> 
> 赞同：2
> 
> 时间：2012-05-10T11:32:56.313
> 
> 标签：java, cryptography, polynomial-math, inverse, ntruencrypt

Well I'm trying to implement NTRUEncrypt and I found this [Algorithm for computing the inverse of a polynomial](https://stackoverflow.com/questions/2421409/algorithm-for-computing-the-inverse-of-a-polynomial) and this [NTRU Pseudo-code for computing Polynomial Inverses](https://stackoverflow.com/questions/2461019/ntru-pseudo-code-for-computing-polynomial-inverses) but since I don't usually work with pseudo-code, I can't seem to understand it.

Can someone help me by explaining what are the variables and what type of data they are? Preferably the algorithm from the first question.

It'd probably be better if I can contact the posters but I have no idea how to do that since they didn't leave any email in their profile.

# c# - Microsoft Action & Func 8 结构？

> ID：10533119
> 
> 赞同：1
> 
> 时间：2012-05-10T11:33:10.077
> 
> 标签：c#, .net, clr

我一直注意到两者`Action`和`Func`代表，具有*从 2 到 8*参数的特定结构：

![在此处输入图像描述](../Images/1eae24dc01cb028dc7a8730e28687361.png) ![在此处输入图像描述](../Images/adcdb0406ef1267eb554f3319c5fc6cc.png)

他们为什么要开放显式计数参数类型？（如果是这样，为什么是 8 个？）

如果我有 10 个参数呢？

## 编辑

停止 8 传统，元组有 7 ... ??

![在此处输入图像描述](../Images/dd77aa531da3ec7dd9073f17c4450030.png)

## 编辑2

在 SystemCore.Dll - 有 1..16 参数版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:54:13.580

> > 为什么他们打开显式计数参数类型？

因为该语言不支持可变数量的 Type 参数。

> > （如果是，为什么是 8 个？）

因为通常 4 应该就足够了。

> > 如果我有 10 个参数呢？

然后，您必须将以下内容添加到您自己的代码中：

```
 delegate void Action<T1, T2, ... , T10> (T1 arg1, T2 arg2, ..., T10 arg10); 
```

# java - 向客户端返回值时Web服务出现异常？

> ID：10533125
> 
> 赞同：0
> 
> 时间：2012-05-10T11:33:24.320
> 
> 标签：java, web-services, exception, tomcat

```
May 10, 2012 4:53:31 PM com.sun.xml.ws.transport.http.servlet.WSServletDelegate doPost
SEVERE: caught throwable
javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.io.IOException]
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:303)
    at com.sun.xml.ws.message.AbstractMessageImpl.writeTo(AbstractMessageImpl.java:128)
    at com.sun.xml.ws.encoding.StreamSOAPCodec.encode(StreamSOAPCodec.java:94)
    at com.sun.xml.ws.encoding.SOAPBindingCodec.encode(SOAPBindingCodec.java:251)
    at com.sun.xml.ws.transport.http.HttpAdapter.encodePacket(HttpAdapter.java:251)
    at com.sun.xml.ws.transport.http.HttpAdapter.access$100(HttpAdapter.java:74)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:385)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:175)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:134)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:159)
    at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:49)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1600)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[ClientAbortException:  java.io.IOException]
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:257)
    at com.sun.xml.bind.v2.runtime.BridgeImpl.marshal(BridgeImpl.java:64)
    at com.sun.xml.bind.api.Bridge.marshal(Bridge.java:105)
    at com.sun.xml.ws.message.jaxb.JAXBMessage.writePayloadTo(JAXBMessage.java:296)
    ... 24 more
Caused by: ClientAbortException:  java.io.IOException
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:358)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:432)
    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:387)
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)
    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.write(UTF8XmlOutput.java:344)
    at com.sun.xml.bind.v2.runtime.output.Encoded.write(Encoded.java:127)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.doText(UTF8XmlOutput.java:256)
    at com.sun.xml.bind.v2.runtime.output.UTF8XmlOutput.text(UTF8XmlOutput.java:244)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.text(XMLSerializer.java:384)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeText(RuntimeBuiltinLeafInfoImpl.java:168)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeText(RuntimeBuiltinLeafInfoImpl.java:171)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementLeafProperty.serializeItem(ArrayElementLeafProperty.java:46)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:132)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:116)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:286)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:663)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:250)
    ... 27 more
Caused by: java.io.IOException
    at org.apache.coyote.http11.InternalAprOutputBuffer.flushBuffer(InternalAprOutputBuffer.java:716)
    at org.apache.coyote.http11.InternalAprOutputBuffer$SocketOutputBuffer.doWrite(InternalAprOutputBuffer.java:746)
    at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:126)
    at org.apache.coyote.http11.InternalAprOutputBuffer.doWrite(InternalAprOutputBuffer.java:552)
    at org.apache.coyote.Response.doWrite(Response.java:560)
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)
    ... 44 more 
```

可能是什么原因？

和 m 使用 apache tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:27:46.567

`Caused by: ClientAbortException: java.io.IOException`客户端已断开连接。

# javascript - 将鼠标悬停在框上时淡入背景

> ID：10533130
> 
> 赞同：1
> 
> 时间：2012-05-10T11:33:36.787
> 
> 标签：javascript, jquery, jquery-ui, mouseover, fade

我以前问过这个客人。但现在我会尝试更具体一点。

当您将鼠标悬停在框上时，我试图使背景淡入。我尝试了 2 种不同的选择。

选项 1：Box1 是鼠标悬停的框，hover1 是进来的新背景。这实际上效果很好。但是，它会加载 acript，这意味着，如果我只是将鼠标悬停在盒子上而发疯，即使我的鼠标静止不动，褪色也会无休止地继续下去。有没有办法阻止它？内容是鼠标悬停时在内容框中更改的文本。这工作正常。

```
$("#box1").mouseover(function(){
    $("#background").switchClass("nohover", "hover1", 500);
    $("#content").html(box1);

});

$("#box1").mouseout(function(){
    $("#background").switchClass("hover1", "nohover", 150);
    $("#content").html(content);

}); 
```

选项 2：在这里我添加了 hover2 类并要求它淡入淡出。但这根本行不通。有时，当我将鼠标从盒子中取出时，它甚至会删除侧面的所有东西。

```
$("#box2").mouseover(function(){
    $("#background").addClass("hover2").fadeIn("slow") 
    $("#content").html(box3);
});

$("#box2").mouseout(function(){
    $("#background").removeClass("hover2").fadeOut("slow")
    $("#content").html(content);
}); 
```

我使用 jquery ui。我真的希望有人能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:51:48.520

您也可以尝试在标记/CSS 中进行一些小的更改。

*HTML：*

```
<div id="box">
    <div id="background"></div>
    <div id="content"></div>
</div> 
```

*CSS：*

```
#box {
    position: relative;
    /* ... */
}
#background {
    position: absolute;
    display: none;
    top: 0;
    left: 0;
    width: inherit;
    height: inherit;
    background-image: url(...);
    z-index: -1;
}​ 
```

*JavaScript：*

```
$("#box").hover(function() {
    $("#background").fadeIn();
}, function() {
    $("#background").stop().fadeOut();
});​ 
```

**演示：http:** [//jsfiddle.net/bRfMy/](http://jsfiddle.net/bRfMy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:49:10.090

尝试添加一个变量来控制效果的执行，仅当该变量具有特定值时。并在执行效果时修改其值。

像这样的东西：

```
var goeft = 0;
$("#box1").mouseover(function(){
  if(goeft == 0) {
    $("#background").switchClass("nohover", "hover1", 500);
    $("#content").html(box1);
    goeft = 1;
  }
});

$("#box1").mouseout(function(){
    $("#background").switchClass("hover1", "nohover", 150);
    $("#content").html(content);
    // sets its value back to 0 if you want the next mouseover execute the effect again
    goeft = 0;
}); 
```

# dropbox - Dropbox sdk 存储库 maven

> ID：10533131
> 
> 赞同：6
> 
> 时间：2012-05-10T11:33:41.263
> 
> 标签：dropbox

即使这听起来像一个愚蠢的问题，我也无法找到 Dropbox sdk 所在的存储库。所以在我的 pom.xml 我已经声明了这个依赖：

```
<!-- Dropbox dependency -->
        <dependency>
            <groupId>com.dropbox</groupId>
            <artifactId>client2</artifactId>
            <version>1.3</version>
        </dependency> 
```

但在此存储库中找不到它：

```
<repository>
            <id>dropbox-client2</id>
            <url>http://getdropbox.com/developers/</url>
        </repository> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-14T06:25:18.910

Dropbox 刚刚发布了 Java 版本的 1.6 版 SDK。这一次他们在 Maven 存储库中提供了它。

```
<dependency>
    <groupId>com.dropbox.core</groupId>
    <artifactId>dropbox-core-sdk</artifactId>
    <version>1.6</version>
</dependency> 
```

结帐以获取更多更新： http:
[//mvnrepository.com/artifact/com.dropbox.core/dropbox-core-sdk](http://mvnrepository.com/artifact/com.dropbox.core/dropbox-core-sdk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T00:46:50.917

官方 Dropbox API 未在 Maven 中央存储库上发布。我重新打包并发布在 Maven 中心。

您可以在此处找到添加到项目的说明：[https ://github.com/vanduynslagerp/dropbox-java-sdk#readme](https://github.com/vanduynslagerp/dropbox-java-sdk#readme)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:06:31.453

您可以使用以下命令将其安装在您自己的存储库中：

[https://gist.github.com/4543727](https://gist.github.com/4543727)

目前，dropbox sdk 的版本是 1.5.3，但您可以传递一个参数来检索旧版本。

# c++ - Memory de-allocation with std::vector re-assignment

> ID：10533134
> 
> 赞同：6
> 
> 时间：2012-05-10T11:33:56.297
> 
> 标签：c++, vector

Suppose I have `VectorA` and `VectorB` are two `std::vector<SameType>`, both initilized (i mean `VectorA.size() > 0` and `VectorB.size() > 0`)

If I do:

```
VectorA = VectorB; 
```

the memory previosly allocated for `VectorA` is automatically freed?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:36:13.537

它在调用所有包含对象的析构函数的意义上被释放，并且向量不再拥有内存。¹

但实际上，它只是返回给[分配器](http://en.wikipedia.org/wiki/Allocator_(C%2B%2B))，它可能会或可能不会真正将它返回给操作系统。

只要正在使用的分配器中没有错误，您就没有造成内存泄漏，如果这是您所关心的。

* * *

[1.正如@David在下面的评论中指出的那样，内存不一定会被释放，这取决于大小是否需要改变。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:59:08.353

一般来说，*不一定*。当您将一个向量分配给另一个向量时，后置条件是两个数组在操作结束时都将包含*等效对象。*

如果`capacity`目标*向量*的`min( v1.size(), v2.size() )`_ *_* _在最后。在这种情况下，不会进行内存释放或分配。

如果目标向量没有足够的容量，那么它将创建一个具有足够容量的新缓冲区，并从源向量*复制构造*新缓冲区中的元素。然后它将交换新旧缓冲区，销毁所有旧对象并释放旧缓冲区。在这种情况下，旧对象*被*销毁，旧内存被释放，但这只是一种情况。

# xslt - 如何在'test'属性表达式中添加多个测试条件 标签

> ID：10533135
> 
> 赞同：34
> 
> 时间：2012-05-10T11:33:56.760
> 
> 标签：xslt, xpath

是否有可能在`<xsl:if>`XSLT 标记中的“测试”属性表达式中包含多个条件，例如

```
<xsl:if test="$var='ab' | $var='bc' | $var='ca' ">
</xsl:if> 
```

我收到一个错误，因为“必须将表达式评估为节点集”。

有没有可能在`<xsl:if>`标签中编码这样的多个条件？

谁能解释我们如何为以下标签实现这种多条件验证

`<xsl:if>`在测试属性表达式中

`<xsl:for-each>`在选择属性表达式中

`<xsl:template>`在匹配属性表达式中

?

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-10T11:39:23.483

> ```
> <xsl:if test="$var='ab' | $var='bc' | $var='ca' "> 
> ```

这是错误的——您在布尔值上使用 XPath*联合*运算符。`|`

**解决方案**：使用 XPath`or`运算符：

```
<xsl:if test="$var='ab' or $var='bc' or $var='ca' "> 
```

上面的 XPath 表达式（`test`属性的值）可以优化，这样就只做一个比较，no`or`是必须的：

```
<xsl:if test="contains('|ab|bc|ca|', concat('|', $var, '|'))"> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-07T23:17:21.363

在 XSLT 2.0 或更高版本中，您可以针对一系列字符串进行测试：

```
<xsl:if test="$var=('ab','bc','ca')">...</xsl:if> 
```

# php - 选择要上传的文件时的文件扩展名过滤器

> ID：10533136
> 
> 赞同：0
> 
> 时间：2012-05-10T11:34:02.897
> 
> 标签：php, filter, file-extension, file-upload

我想知道是否可以过滤在用户尝试上传文件时显示给用户的文件。谷歌搜索没有帮助，看起来每个人都只关心文件类型验证。这是一张图片，可以更好地理解我的意思：http: [//i.imgur.com/2dhjk.jpg](https://i.imgur.com/2dhjk.jpg) （抱歉，没有足够的代表来发布图片）

关于堆栈溢出有一个类似的问题，但它是针对 c#: [Filter File extension With FileUpload](https://stackoverflow.com/questions/8976813/filter-file-extension-with-file-uploadcosmetic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:39:09.433

不，但您可以在选择文件后使用 javascript 进行过滤。阅读此内容以获取更多信息：[HTML 表单上传中的过滤器扩展](https://stackoverflow.com/questions/254184/filter-extensions-in-html-form-upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T11:22:47.780

几乎...

文件输入标签有[“接受”属性，该属性](http://www.w3schools.com/tags/att_input_accept.asp)自 2012 年之前就已经存在（因此，其他人应该知道这一点）。

但是，这在浏览器中的处理方式不同（有些仍然提供*.*选项，并非所有浏览器都会限制这些类型等等），并且最近才在 IE 和 Firefox 中编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:07:34.937

您可以使用 flash 上传器或 javaApplet 在对话窗口中使用过滤器。使用 php 或 JS 你不能这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:37:06.863

简短的回答 - 不。哦，对于 StackOverflow 来说太短了。

# algorithm - 为图表着色

> ID：10533140
> 
> 赞同：-2
> 
> 时间：2012-05-10T11:34:18.097
> 
> 标签：algorithm, graph

我在论坛上看到了这个问题：[http ://www.geeksforgeeks.org/archives/19042](http://www.geeksforgeeks.org/archives/19042)

给定一个无向图和一个数 m，确定该图是否最多可以用 m 种颜色着色，使得图中没有两个相邻的顶点用相同的颜色着色。

我想知道您是否可以将顶点数与 m 的顶点数进行比较，而不是尝试找到特定的解决方案？

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:37:25.223

即使顶点 ( `|V|`) 的数量大于，也可能存在着色`m`。

例如，在[二分图中](http://en.wikipedia.org/wiki/Bipartite_graph)- any 都有着色`m>=2`，而不管顶点的数量。

然而，在一个[派系](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29)中，唯一可行的颜色需要`m >= |V|`

所以：

> 我想知道您是否可以将顶点数与 m 的顶点数进行比较，而不是尝试找到特定的解决方案？

如果`m > = |V|`- 有一个解决方案，但是，**如果`m < |V|`- 我们什么也不能推导出来。**反正可能会有答案。

**奖励**：对于一般情况，图形着色是经典的[NP 完全](http://en.wikipedia.org/wiki/Np_complete)问题之一 - 意思是 - 没有已知的多项式解决方案，如果可以找到 - 我们可以推导出`P = NP`

# php - php中的数组声明方法

> ID：10533143
> 
> 赞同：-4
> 
> 时间：2012-05-10T11:34:34.273
> 
> 标签：php, arrays

我有这样的数组，我在其中维护一个索引，即位置，并且有两个字段应该更新

```
Array
(
[0] => Array
    (
        [text2] => Banner ads
        [price2] => 297
    )

 ) 
```

现在我想插入另一个元素，就像看起来像

```
 Array
    (
    [1] => Array
    (
        [text2] => logo
        [price2] => 300
    )

  ) 
```

这样做的最好方法是什么？？？请建议我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:35:58.843

```
$array[] = array('text2' => 'logo', 'price2' => 300) 
```

# excel - 无法将 powerpoint 中嵌入的 excel 链接更新到不同的工作表

> ID：10533144
> 
> 赞同：0
> 
> 时间：2012-05-10T11:34:41.980
> 
> 标签：excel, powerpoint, excel-2010

我在单独的选项卡中有月度报告数据，从 1 月到 12 月。

我从 Jan 那里获取数据并将其链接到一个 powerpoint 页面，以便在简报中显示它。我的布局设置完全符合我的要求，所以我复制了幻灯片，然后想编辑新幻灯片以使用 2 月而不是 1 月的数据，但是我似乎无法更新链接，所以他们使用另一张表. 它只是要求我选择一个新文件。

链接选项允许我选择一个新的电子表格文件，但不能选择同一个文件和不同的工作表。有没有办法解决？

ppt中嵌入的数据既是单元格数据也是图表。

希望我已经很好地解释了我的意思。

非常感谢您的任何帮助和建议。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:18:40.020

你的主题提到了链接，但后来你说“ppt中嵌入的数据......”

链接对象和嵌入对象是具有不同行为的两种不同事物。

如果您希望不同的幻灯片指向工作表/工作簿的不同部分并在需要时进行更新，您需要为每张幻灯片执行此操作：

在 Excel 中选择数据 复制它 切换到 PowerPoint，移动到要显示数据的幻灯片 选择选择性粘贴，然后选择链接

理论上，您可以通过创建一个链接，然后复制幻灯片并最后编辑链接目标来完成类似的操作，但这需要加载项或一些编码，并且在任何情况下都可能比它更麻烦是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:24:14.993

在文件中创建一个选项卡并将其命名为“当前”或类似的名称。将其链接到您想要的月份选项卡，例如 Jan。在 powerpoint 中创建链接到此选项卡而不是 Jan 选项卡。您可以更改“当前”选项卡中的链接以指向不同的选项卡，例如 Mar。通过更新您的 powerpoint 更新您的 powerpoint 链接（对于 pastespecial as link ）或在 Excel 文件已经存在时双击 powerpoint 中的嵌入对象打开

# ipad - iPad 1 无法录制 MPEG4AAC 录制？

> ID：10533145
> 
> 赞同：0
> 
> 时间：2012-05-10T11:34:44.197
> 
> 标签：ipad, ios5, xcode4.2, avaudiorecorder, ios5.1

我一直在尝试在 iPad 应用程序上录制 kAudioFormatMPEG4AAC 格式，录制在 iPad2 和 iPad3 上工作正常，但在 iPad1 上不行。这里 iPad1 和 iPad3 有 iOS 5.1，而 iPad2 有 iOS 5.0.1。

记录的代码就像..

```
if(recordEncoding == ENC_PCM)
{
    [recordSettings setObject:[NSNumber numberWithInt: kAudioFormatLinearPCM] forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSettings setObject:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSettings setObject:[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];   
}
else
{
    NSNumber *formatObject;

    switch (recordEncoding) {
        case (ENC_AAC): 
            formatObject = [NSNumber numberWithInt: kAudioFormatMPEG4AAC];
            break;
        case (ENC_ALAC):
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleLossless];
            break;
        case (ENC_IMA4):
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
            break;
        case (ENC_ILBC):
            formatObject = [NSNumber numberWithInt: kAudioFormatiLBC];
            break;
        case (ENC_ULAW):
            formatObject = [NSNumber numberWithInt: kAudioFormatULaw];
            break;
        default:
            formatObject = [NSNumber numberWithInt: kAudioFormatAppleIMA4];
    }

    [recordSettings setObject:formatObject forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSettings setObject:[NSNumber numberWithInt: AVAudioQualityHigh] forKey: AVEncoderAudioQualityKey];
} 
```

谁能帮我解决这个问题。可以肯定的是，MPEG4AAC 可以在 iPAD 1 上运行，正如[这篇文章](https://stackoverflow.com/questions/8719865/extaudiofilewrite-to-m4a-aac-failing-on-dual-core-devices-ipad-2-iphone-4s)所建议的那样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:31:21.523

尝试评论`AVEncoderBitRateKey`行。`AVLinearPCMBitDepthKey`也不`AAC`需要.

# java - jsf和java中同步方法的最佳实践

> ID：10533147
> 
> 赞同：5
> 
> 时间：2012-05-10T11:34:48.283
> 
> 标签：java, ajax, jsf

我有一个 JSF 应用程序，用户在其中创建一些文件。问题是，他们也必须上传它们并下载确认消息，并且上传/下载过程是专有的，当时只有一个用户，因为身份验证需要技术用户/密码。我的问题是，如何使等待过程对用户透明，一种协议，例如：

*   等待连接
*   验证
*   上传文件
*   下载确认文件
*   完毕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:03:56.653

使用单线程执行器。

```
@ManagedBean
@ApplicationScoped
public class FileManager {

    private ExecutorService executor;

    @PostConstruct
    public void init() {
        executor = Executors.newSingleThreadExecutor();
    }

    public Result process(Task task) throws InterruptedException, ExecutionException {
        return executor.submit(task).get();
    }

    @PreDestroy
    public void destroy() {
        executor.shutdownNow();
    }

} 
```

`Result`您的 javabean 对象在哪里包含所需的结果，`Task`如下所示：

```
public class Task implements Callable<Result> {

    private Data data;

    public Task(Data data) {
        this.data = data;
    }

    @Override
    public Result call() throws Exception {
        Result result = process(data); // Do your upload/download/auth job here.
        return result;
    }

} 
```

`Data`只是您的 javabean 对象包含输入数据（上传的文件？）。最后在您的托管 bean 中调用它，如下所示：

```
@ManagedBean
@RequestScoped
public class Bean {

    @ManagedProperty("#{fileManager}")
    private FileManager fileManager;

    public void submit() {
        try {
            Data data = prepareItSomehow();
            Result result = fileManager.process(new Task(data));
            // Now do your job with result.
        }
        catch (Exception e) {
            // Handle
        }
    }

    // ...
} 
```

这样，所有任务都将由单个线程按照先进先出的顺序处理。

如果您的容器支持 EJB，那么还有其他方法。

# testng - 如何在 Maven 中从 pom.xml 调用 testng.xml 文件

> ID：10533151
> 
> 赞同：13
> 
> 时间：2012-05-10T11:35:08.887
> 
> 标签：testng, maven-2, pom.xml, maven-plugin

我正在使用 Selenium WebDriver、Eclipse、TestNG 和 Surefire 插件。我无法从 pom.xml 运行 testng.xml 文件。当我使用**mvn test**运行 pom.xml时，它直接运行**src/test/java**中的文件。

我的 pom.xml 代码是

```
<groupId>angel</groupId>
<artifactId>Angel</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>

<name>Angel</name>  
<url>http://maven.apache.org</url>

<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>   </properties>

<dependencies>
          <!-- Java API to access the Client Driver Protocols -->
 <dependency>
     <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>2.21.0</version>
 </dependency>
  <!-- JExcel API is a java library which provides the ability to read, write, and                 modify Microsoft Excel spreadsheets.-->
  <dependency>
     <groupId>net.sourceforge.jexcelapi</groupId>
    <artifactId>jxl</artifactId>
    <version>2.6.10</version>
    </dependency>
   <dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.14</version>
</dependency>
 <!-- Java API for manipulate the Microsoft Excel Sheets.  -->  
 <dependency>  
<groupId>org.apache.poi</groupId>  
<artifactId>poi-contrib</artifactId> 
 <version>3.5-beta5</version>   
 </dependency>
 <!-- Java Mail API used to send Mails. -->   <dependency>             <groupId>javax.mail</groupId> 
 <artifactId>mail</artifactId>   <version>1.4.3</version>
</dependency>
<dependency>
  <groupId>org.testng</groupId>
  <artifactId>testng</artifactId>
  <version>6.3.1</version>
  <scope>test</scope>
</dependency>
 </dependencies>  
  <build>  
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugin</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12</version>
          <configuration>
           <suiteXmlFiles>
               <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
          </suiteXmlFiles>
                 </configuration> 
    </plugin>
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
             <source>1.6</source>
            <target>1.6</target>
         </configuration>        </plugin> 

</plugins> 
   </project> 
```

请帮我。

我的项目结构是

```
 project
--src/main/java
--src/main/resources
--src/test/java
    |
     --my testng class file with @Test method.
--src/test/resources
     |
      --testng.xml
--maven dependencies
--jre system library
--src
   |
    --main
    --test
--target
pom.xml 
```

-- =>文件夹名称|-- =>子文件夹名称

我的 testng.xml 文件是...

```
 <?xml version="1.0" encoding="UTF-8"?>
  <suite name="Suite1" verbose="1"  >

 <test name="samplePage Test" >
   <classes>
   <class name="TestScripts.SamplePage" >
        <methods>
            <include name = "SamplePageTest_Execution"/>
        </methods>
    </class>
</classes>
 </test>
   <test name="newSamplePage Test" >
    <classes>
   <class name="TestScripts.NewSamplePage" >
        <methods>
            <include name = "NewSamplePage_Execution02"/>
        </methods>
        </class>
    </classes>
   </test> 
 </suite> 
```

我只是想通过 testng.xml 文件从 pom.xml 调用 SamplePage_Execution 方法。

我的 SamplePage_Execution 方法是

```
 public class sample{
  @Test
  public static void SamplePageTest_Execution() throws Exception{

String methodName = Thread.currentThread().getStackTrace()[1].getMethodName();
boolean testStatus = true;
       driver = new FirefoxDriver();
      driver.get("http://www.google.com"); 

   WebElement searchField = driver.findElement(By.name("q")); 

    searchField.sendKeys(new String [] {"selenium2.0"});

    searchField.submit();

    driver.close();
}} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T06:52:55.730

我在 pom.xml 中的以下代码运行良好：

```
<profiles>
   <profile>
      <id>selenium-tests</id>
      <build>
         <plugins>
            <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-surefire-plugin</artifactId>
               <version>2.12.4</version>
               <configuration>
                  <suiteXmlFiles>
                     <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
                  </suiteXmlFiles>
               </configuration>
            </plugin>     
         </plugins>
      </build>
   </profile>
</profiles> 
```

使用以下命令运行测试：

```
mvn clean test -U -Pselenium-tests 
```

或者，

```
mvn clean test 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-27T10:01:33.577

您可以直接通过命令行运行 maven 测试调用 testng.xml

```
mvn test -Dsurefire.suiteXmlFiles=src/test/resources/testng.xml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:34:54.343

您应该将 suiteXmlFile 从一个类更改为一个文件，而不是例如位于 src/test/resources 中的 testng.xml 文件。此外更新surefire-plugin（当前版本2.12）。另一件事是硒测试通常是集成测试而不是单元测试。

**更新** 您必须添加 testng 依赖项而不是 junit 依赖项。因此，删除 junit 依赖项并将 testng 依赖项添加到[maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)的文档中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T05:47:54.843

我认为这里有基本的错误.. pom.xml = 由 Maven 维护的包定义

并且 testing.xml（任何 xml 用户可以定义）用于 TestNG 测试定义。您可以使用 xml 配置从自定义运行设置中进行自己的配置以运行 Test NG 并且，您在 xml 文件中提供的配置（测试名称、侦听器类名称、套件名称或类名称）应该与您的测试类匹配。就像你已经取消了 class name = TestScripts.SamplePage 但你的 test class = sample 一样，所以这个 xml 永远不会运行你的测试类。小例子： `<class name="com.automation.test.TestA" />`它在我的测试 xml 中，我的测试类将是 TestA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T11:35:49.010

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.adiltutorials.facebook</groupId>
  <artifactId>WebdriverTests</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.3</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.19.1</version>
        <configuration>
          <forkCount>0</forkCount>
          <suiteXmlFiles>
            <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
          </suiteXmlFiles>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.52.0</version>
    </dependency>
    <dependency>
  <groupId>org.testng</groupId>
  <artifactId>testng</artifactId>
  <version>6.8</version>
</dependency>  
</dependencies>

</project> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-20T04:59:03.390

你可以直接给 testng.xml 而不是 src/test/resources/testng.xml

我的 POM.xml 工作正常。将其替换为您的 POM.xml 。更新您的 Maven 并再次运行。祝你好运:)

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Automation</groupId>
  <artifactId>Automation</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <plugins>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.3</version>
        <configuration>
          <source>1.8</source>
          <target>1.8</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.18.1</version>
        <configuration>
          <forkCount>0</forkCount>
          <suiteXmlFiles>
            <suiteXmlFile>testng.xml</suiteXmlFile>
          </suiteXmlFiles>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <dependencies>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.46.0</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.5.0-b01</version>
    </dependency>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.9.6</version>
    </dependency>
  </dependencies>
</project> 
```

# apache - 重定向第二个域名？

> ID：10533153
> 
> 赞同：1
> 
> 时间：2012-05-10T11:35:15.757
> 
> 标签：apache, .htaccess, apache2

我有以下 .htaccess 文件，它适用于 www.companyone.com：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我也有指向同一个站点的域 www.companytwo.com，即 www.companyone.com。问题是当有人使用 www.companytwo.com 并正确转到原始网站时，该 url 仍然包含 www.companytwo.com，而此时它应该变成 www.companyone.com。

所以实际上，我最终得到了 2 个不利于 seo 的重复站点。使用上面的 .htaccess 文件，我已经确保如果用户键入 companyone.com，他们会自动重定向到 www.companyone.com。对于 www.companytwo.com，我需要同样的东西，即 companytwo.com 和 www.companytwo.com 应该成为 www.companyone.com。

这是我需要通过 .htaccess 文件或一些虚拟服务器文件修复的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:44:46.330

您可以使用 .htacces 将浏览器重定向到您的 www.companyone.com 站点：

```
# Redirect to www.companyone.com
RewriteEngine On
RewriteCond %{HTTP_HOST} ^companytwo.com$ [OR]
RewriteCond %{HTTP_HOST} ^companyone.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.companytwo.com$
RewriteRule (.*)$ http://www.companyone.com/$1 [R=301,L]

# If your example works, this rewrite to index.php/$1
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# ssis - 如何降低 DTEXEC 作业输出的细节级别？

> ID：10533154
> 
> 赞同：4
> 
> 时间：2012-05-10T11:35:16.910
> 
> 标签：ssis, batch-file

有没有办法降低运行`DTEXEC`作业时输出的详细程度？

例如，在 cmd 窗口中，我有很多...

```
Progress: 2012-05-10 12:24:20.70
   Source: Import Email_to
   Post Execute: 9% complete
End Progress
Progress: 2012-05-10 12:24:20.70
   Source: Import Email_to
   Post Execute: 18% complete
End Progress
Progress: 2012-05-10 12:24:20.70
   Source: Import Email_to
   Post Execute: 27% complete
End Progress
Progress: 2012-05-10 12:24:20.71
   Source: Import Email_to
   Post Execute: 36% complete
End Progress
Progress: 2012-05-10 12:24:20.71
   Source: Import Email_to
   Post Execute: 45% complete
End Progress
.... etc ... 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T11:57:24.947

您可以使用`/Reporting`带有级别的标志`N` *（**N**代表无报告。）*以防止将任何状态报告给命令行控制台。

还有其他级别，例如**E**仅用于*Errors*，**W**仅用于*Warning*。您可以选择希望在控制台上看到的输出选项。

[**请参阅 MSDN 以了解有关 dtexec 实用程序的更多信息。**](http://msdn.microsoft.com/en-us/library/ms162810%28v=sql.105%29.aspx)

### 语法用法：

```
dtexec /f Package.dtsx /Reporting N 
```

### 替代用法：

```
dtexec /f Package.dtsx /Rep N 
```

### 例子：

*   创建了一个包含一个空数据流任务的简单包。
*   以下屏幕截图显示了在命令行中使用 dtexec 实用程序执行包时**`without`**的标志`/Reporting`。您可以注意到正在显示数据流任务的状态。

![无旗](../Images/91941ddfd19effc08cf074ebae0998e4.png)

*   以下屏幕截图显示了在命令行中使用 dtexec 实用程序执行包时**`with`**的标志`/Reporting`。您可以注意到没有显示数据流任务的状态。

![带标志](../Images/d666e94a667f81bed6fb295ae72a05d7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-07T16:33:25.287

到目前为止，我设法消除标准输出中产生的一些行是：

```
DTExec.exe | findstr /v /c:"Microsoft (R)" | findstr /v /c:"Copyright (C)" | findstr /v /c:"Version 10" 
```

输出如下所示：

```
Started:  1:40:22 PM
Error: 2018-09-05 13:40:22.78
...
End Error
Warning: 2018-09-05 13:40:22.79
...
End Warning
DTExec: The package execution returned DTSER_FAILURE (1).
Started:  1:40:22 PM
Finished: 1:40:22 PM
Elapsed:  0.265 seconds 
```

我希望在每个 Windows 上都有**awk工具。**我将尝试用我们在 Windows 节点上的东西做更多的事情：**cscript.exe**和一些 JavaScript，就像我通常对**awk**和**sed**所做的那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-05T12:54:59.697

我看不到使用 /ConsoleLog 和 /Reporting 选项抑制 DTExec.exe 输出的不想要的部分的方法 - 下面标准输出中唯一想要的部分是“错误：”和“警告”块。为什么？！？我将不得不创建一个工具，该工具将在 DTExec.exe 之后放入管道中，其行为类似于“grep -v”，以过滤掉所有应添加到日志文件中的噪音。唯一的问题是，这是一个糟糕的 Windows Server，它没有强大、标准和易于使用的 GNU 工具，如“grep”，我将不得不使用一些丑陋的东西，每个 Windows Server 默认已经安装（ script.exe 可能）。

```
Microsoft (R) SQL Server Execute Package Utility
Version 10.50.2500.0 for 32-bit
Copyright (C) Microsoft Corporation 2010\. All rights reserved.

Started:  1:40:22 PM
Error: 2018-09-05 13:40:22.78
...
End Error
Warning: 2018-09-05 13:40:22.79
...
End Warning
DTExec: The package execution returned DTSER_FAILURE (1).
Started:  1:40:22 PM
Finished: 1:40:22 PM
Elapsed:  0.265 seconds 
```

# tfs - 首次打开解决方案时未找到 Nuget.targets

> ID：10533157
> 
> 赞同：10
> 
> 时间：2012-05-10T11:35:40.340
> 
> 标签：tfs, continuous-integration, nuget

当我从 TFS 下载解决方案后第一次打开解决方案时，它 (Vs2010) 无法找到 NuGet.targets 文件。

我检查了 TFS，它被标记为已下载，并且它存在于文件系统中。

如果我再次尝试直接从 TFS 打开解决方案，它会突然起作用。

我觉得这就是我的自动化构建也失败的原因。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T18:49:04.030

跑到这个星期五，今天在另一台机器上。

对于周五的机器，我复制了 .nuget 目录，因为我没有。

对于今天的机器，它有 .nuget 目录并从另一台机器复制它并没有解决问题。从 TFS 的源代码管理资源管理器中打开它也不起作用。

然后，我们按照[由于 nuget.targets not found 错误](https://stackoverflow.com/questions/9133854/opening-twitterizer-in-visual-studio-fails-due-to-nuget-targets-not-found-error)（在解决方案上启用包还原）而在 Visual Studio 中打开项目失败的步骤进行操作，并且没有问题。

上周之前没有遇到过这个问题，这只是许多项目中的一个，其他项目都没有这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:01:54.740

当 Visual Studio 从 TFS 下载解决方案时（在解决方案资源管理器中双击 sln 文件），它似乎会一一下载文件并加载它们。不幸的是，它似乎在下载 .nuget 目录之前尝试打开项目文件，这就是它找不到文件的原因。它似乎做的最后一件事是下载该文件，这解释了为什么它在磁盘上但给出了错误。如果您重新打开解决方案，它已经存在并且可以正常工作。

当 TFS 构建服务器下载要构建的解决方案时，它会改为在解决方案目录中执行此操作。这意味着它将在尝试构建之前获取 .nuget 目录，因此它不应该在构建服务器上引起问题。

我相信这是 Visual Studio 中的一个错误，它确实应该首先下载所有解决方案项。虽然如果它具有与 TFS 构建相同的行为会很好。

解决此问题的方法是在首次打开解决方案之前获取解决方案文件夹的最新信息。不理想，但它有效。

我还建议与 nuget 或 Visual Studio 团队一起记录错误，但我怀疑他们可能已经意识到了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T19:49:35.043

我在尝试浏览[http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-web-site/2-download-and-run/上的教程时遇到了这个问题](http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-web-site/2-download-and-run/)

结果是源代码所在的 zip 文件提取到包含逗号的文件夹中，我认为 msbuild 不喜欢。将其移动到更安全命名的目录中会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T04:18:46.003

试试这些步骤

1.  安装 Nuget。
2.  右键单击解决方案并选择“启用 NuGet 包还原”。
3.  在警告上单击确定。
4.  关闭并重新打开解决方案。

# java - 普遍连接器中的 XML 文件

> ID：10533159
> 
> 赞同：0
> 
> 时间：2012-05-10T11:35:55.817
> 
> 标签：java, connector, pervasive

谁能告诉我这个连接使用的是哪种技术，我找不到这些标签是什么

```
<Connection spoketypename="Oracle CRM On Demand" creator="Factory" basename="ServiceDataObjectsDMS" internalname="sdodms" datecreated="20060711T07:43:31Z" connectiontype="Source" connectorproto="" author="Factory" version="1.0" datemodified="20060711T07:43:31Z">
  <Description>
    <![CDATA[Factory created Oracle CRM On Demand through DMS target connection.]]>
  </Description>
  <ResMgrSession name="RMSession1" type="Oracle CRM On Demand"/>
  <ConnectorOptions>
    <Option name="factory" value="Oracle CRM On Demand"/>
  </ConnectorOptions>
</Connection> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:04:42.130

Pervasive Integration 工具使用这些标签。在联系 Pervasive 后，我确认这些标签没有公开记录。潜在用户必须联系 Pervasive (http://www.pervasiveintegration.com)。

# php - 为什么要创建自己的请求对象？

> ID：10533169
> 
> 赞同：0
> 
> 时间：2012-05-10T11:36:23.757
> 
> 标签：php, post, get, request

我正在构建一个自己的 php 框架。我在其他框架中看到甚至有这样做的对象，但我看不出为什么不直接使用 POST 和 GET 数组的原因。此外，如何决定何时发布或获取？如果两个区域都有变量怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:38:18.563

您需要实现自己的请求/响应对象以：

1.  更好地控制获取/放置的内容和位置以及共同的应用程序流程
2.  从请求类型 HTTP/CLI/...中提取

# c++ - 提升过滤流和tellp

> ID：10533170
> 
> 赞同：1
> 
> 时间：2012-05-10T11:36:27.970
> 
> 标签：c++, boost, boost-iostreams

我正在尝试使用 filtering_streams 将某些对象的序列化压缩到一个`array_sink`或类似的设备中，然后我可以确定压缩输出的长度并将其复制到另一个流，比如一个文件。但是，使用`ostream::tellp`on the `filtering_ostream`Causes boost 会引发运行时异常。我真的无法弄清楚我做错了什么。

```
using namespace boost::iostreams;

char *buffer = new char[4096*255];
array_sink zipStream(buffer, 4096*255);

filtering_ostream tempOut;
tempOut.push(zlib_compressor());
tempOut.push(zipStream);

column->Serialize(tempOut); // Object::Serialize(ostream&)
tempOut.flush(); // ?
int zipSize = tempOut.tellp();

// Do stuff with zipStream... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:27:28.593

问题在于，它`tellp`是根据与当前写入头位置偏移为 0 的底层流缓冲区来实现的`pubseekoff`（基本上，这只是糟糕的设计）。现在，这里的踢球者`zlib_compressor`不适用于接收器`output_seekable`（如在文档中所见）。这是相当自然的，因为更改写入头几乎肯定会导致数据损坏。如果您尝试解压缩，您会遇到同样的问题。

# r - exprs(eset) 中的错误

> ID：10533171
> 
> 赞同：-2
> 
> 时间：2012-05-10T11:36:40.203
> 
> 标签：r, bioconductor

我正在尝试从 dat 文件中读取探针，将它们放入向量中，然后将向量放入子集中，以便能够将更多数据连接到它并将其写入 CSV 文件中。这是我的一段代码：

```
library(Biobase)
library(affy)

affys <- read.csv("address of my dat file")
affys_vec <- as.vector(affys)[,1]

exprs(eset)[affys_vec,] -> sub.set

write.csv(sub.set,file="subset.csv") 
```

但是，当我到达：`exprs(eset)[affys_vec,] -> sub.set`

我收到以下错误消息：

```
** Error in exprs(eset) :
  error in evaluating the argument object' in selecting a method for function 'exprs':
  Error: object 'eset' not found ** 
```

请问有什么建议吗？

谢谢，

qtm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:27:39.463

安装 Biobase 后，请参阅您计算机上可用的[Biobase 和 ExpressionSets简介，如](http://bioconductor.org/packages/2.10/bioc/html/Biobase.html)

```
vignette(package="Biobase", "ExpressionSetIntroduction") 
```

但想法是您已经`eset`通过预处理某些 CEL 或其他供应商特定文件来创建。您如何预处理这些取决于您的文件是什么，可能使用[affy](http://bioconductor.org/packages/2.10/bioc/html/affy.html)或[oligo](http://bioconductor.org/packages/2.10/bioc/html/oligo.html)或[lumi ，或者来自使用](http://bioconductor.org/packages/2.10/bioc/html/lumi.html)[ArrayExpress](http://bioconductor.org/packages/2.10/bioc/html/ArrayExpress.html)或[GEOquery 之](http://bioconductor.org/packages/2.10/bioc/html/GEOquery.html)类的包的公共存储库，或者您正在使用[limma](http://bioconductor.org/packages/2.10/bioc/html/limma.html)并且不需要表达式集。

[Bioconductor](http://bioconductor.org)网站和[邮件列表](http://bioconductor.org/help/mailing-list/)提供了更多信息。

# javascript - 从本地 js 脚本到本地 Phantom.js 服务器的 Ajax 调用

> ID：10533172
> 
> 赞同：1
> 
> 时间：2012-05-10T11:36:40.607
> 
> 标签：javascript, ajax, apache, extjs, phantomjs

我已经设置了一个本地运行的 Apache 服务器来托管我的 Web 应用程序（用 ExtJs 编写）。我还有一个用 phantom.js 制作的第二个本地服务器，并在端口 8080 上监听：

```
var server, service;

server = require('webserver').create();

service = server.listen(8080, function (request, response) {
    response.statusCode = 200;
    response.write('<html><body>Hello!</body></html>');
    response.close();
}); 
```

现在我想从我的应用程序向幻像服务器发出 Ajax 请求：

```
Ext.Ajax.request({
    url: 'http://localhost:8080',
    method: 'GET',
    success: function(response){
        console.log('RESPONSE: ', response);
    },
    filure: function(response){
        console.log('failure: ', response);
    }
}); 
```

但是当运行这个脚本时，我得到：

`"NetworkError: 400 Bad Request - http://localhost:8080/?_dc=1336648497292"`在控制台中。此操作是否违反同源策略？或者是别的什么 ？转到 localhost:8080 显示正确的响应，因此服务器运行正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:45:19.883

你的 html 也在 localhost:8080 上？如果不是（不同的端口 => 不同的主机），那么你有跨域 ajax 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T17:12:07.533

Ajax 不适用于文件协议！它仅适用于 HTTP 或 HTTP 。我找到了关于 udemy 的课程，导师说 ajax 不适用于 file:d://(path) protocals。所以他把他的文件转移到网络服务器上，然后他解释了他关于 ajax 的话题。

希望这可以帮助！

# c++ - QGraphicsItem 裁剪子项。

> ID：10533177
> 
> 赞同：1
> 
> 时间：2012-05-10T11:37:19.023
> 
> 标签：c++, qt, qgraphicsitem

我从 QGraphicsItem 派生的类返回 Rect1 的边界矩形。

```
QRectF BaseControl::boundingRect() const {
    return(Rect1);
} 
```

它的许多孩子都剪辑到 Rect1。

相反，当我的 QGraphicsItem 的 boundingRect 保持为 Rect1 时，如何让孩子们剪辑到我定义的内部 rect Rect2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:08:38.737

我猜你已经`ItemClipsChildrenToShape`在 BaseControl 上设置了标志。如果是这样，您可以简单地重新实现`QGraphicsItem::shape()`以定义您希望孩子剪辑到的形状，这可以不同于`boundingRect()`(`boundingRect()`是默认值)。

另一个可能更好的选择是创建一个容器 QGraphicsItem，它将成为 BaseControl 的子项，以及要剪辑的项目的父项。此容器项应`ItemClipsChildrenToShape`设置标志，但 BaseControl 不应。这样，BaseControl 可以拥有自己的边界矩形 Rect1，并且容器项可以拥有 Rect2 作为其边界/剪切矩形。

# php - 上传PHP代码不上传图片

> ID：10533183
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:37:49.217
> 
> 标签：php, wordpress, image-uploading

我正在 wordpress 模板中尝试以下代码：

```
<?php
//connect to database. Username and password need to be changed
mysql_connect("localhost", "username", "password");

//Select database, database_name needs to be changed
mysql_select_db("database_name");

if (!$_POST['uploaded']){
//If nothing has been uploaded display the form
?>

<form action="<? echo $_SERVER['PHP_SELF']; ?>" method="post" 
ENCTYPE="multipart/form-data">
Upload:<br><br>
<input type="file" name="image"><br><br>
<input type="hidden" name="uploaded" value="1">
<input type="submit" value="Upload">
</form>

<?
}else{
//if the form hasn't been submitted then:

//from here onwards, we are copying the file to the directory you made earlier, so it can then be moved 
//into the database. The image is named after the persons IP address until it gets moved into the database

//get users IP
$ip=$REMOTE_ADDR;

//don't continue if an image hasn't been uploaded
if (!empty($image)){

//copy the image to directory

copy($image, "/temporary/".$ip."");

//open the copied image, ready to encode into text to go into the database
$filename1 = "/temporary/".$REMOTE_ADDR;
$fp1 = fopen($filename1, "r");

//record the image contents into a variable
$contents1 = fread($fp1, filesize($filename1));

//close the file
fclose($fp1);

//encode the image into text
$encoded = chunk_split(base64_encode($contents1)); 

//insert information into the database
mysql_query("INSERT INTO images (img,data)"."VALUES ('NULL', '$encoded')");

//delete the temporary file we made
unlink($filename1);
}

//end
}
?> 
```

我在我的网络根目录中创建了一个名为“临时”的目录。这个文件在里面：wp-content/themes/mytheme/ 目录。

我还将目录权限设置为 chmod 777。

当我尝试上传时，什么也没有发生，也没有任何东西上传到目录中，也没有任何东西添加到数据库中。

我尝试上传后发生的所有事情都是页面重定向到主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:41:36.703

这是什么？

```
if (!empty($image)){ 
```

您的图像在数组中

```
$_FILES['image'] 
```

# c# - 如何使用 asp.net 检测操作系统

> ID：10533184
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:37:54.970
> 
> 标签：c#, iphone, asp.net, ipad, operating-system

我有一个网站，我使用了 flash 应用程序。这个 flash 应用程序没有出现在 iPad 和 iPhone 上。如果操作系统 Ipad 或 Iphone 我想显示 javascript 应用程序。我使用下面的代码，但这个代码只获取平台信息，例如Win32NT。

```
OperatingSystem os = Environment.OSVersion;
os.Platform.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:39:39.990

使用 [Request.UserAgent](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx)。这会给你你所需要的。请注意，UserAgent 可能会返回错误信息，因为浏览器可以让您更改此信息。
[另请查看这篇文章在 ASP.NET 中检测移动浏览器](http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET)

```
 if (Request.UserAgent.IndexOf("Windows NT 5.1") > 0)
        {
//xp
        }
        else if (Request.UserAgent.IndexOf("Windows NT 6.0") > 0)
        {
//VISTA
        }
        else if (Request.UserAgent.IndexOf("Windows NT 6.1") > 0)
        {
//7
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T16:16:52.253

```
private string getOS()
{
    string os = null;
    if (Request.UserAgent.IndexOf("Windows NT 5.1") > 0)
    {
        os ="Windows XP";
        return os;
    }
    else if (Request.UserAgent.IndexOf("Windows NT 6.0") > 0)
    {
        os= "Windows Vista";
        return os;
    }
    else if (Request.UserAgent.IndexOf("Windows NT 6.1") > 0)
    {
        os = "Windows 7";
        return os;
    }
    else if (Request.UserAgent.IndexOf("Intel Mac OS X") > 0)
    {
        //os = "Mac OS or older version of Windows";
        os = "Intel Mac OS X";
        return os;
    }
    else
    {
        os = "You are using older version of Windows or Mac OS";
        return os;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:39:34.417

您必须检查 Request.UserAgent 以获取操作系统信息，请参阅这篇文章：[http ://dnohr.dk/aspnet/how-to-detect-browser-operating-system-os-with-aspnet](http://dnohr.dk/aspnet/how-to-detect-browser-operating-system-os-with-aspnet)

```
OperatingSystem os = Environment.OSVersion;
os.Platform 
```

返回托管您的 asp.net 站点的服务器的操作系统...

# android - 从最近的应用程序菜单中替换图像

> ID：10533186
> 
> 赞同：3
> 
> 时间：2012-05-10T11:38:06.113
> 
> 标签：android, android-3.0-honeycomb

在我的应用中是显示用户敏感数据（收件箱、密码、银行账户余额等）的活动。这些部分当然是受密码保护的，并且用户会在一段时间后自动注销（这在 onRestart() 中检查）。问题是当这个应用程序在 Android 3.0+ 上运行时（它有最近的应用程序菜单和最近的应用程序的图像），这些敏感数据在这个菜单中是可读的。有没有办法将该图像更改为应用程序徽标或其他内容？
我已经尝试使用 EXCLUDE_FROM_RECENTS 标志在新任务中开始这些部分，这有助于但会中断用户体验。
其他选项在 onPause() 方法中尝试启动某种“徽标活动”，该活动将在 onRestart() 中停止，并将显示在最近的应用程序菜单中。
还有其他/更好的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T11:44:58.417

> 有没有办法将该图像更改为应用程序徽标或其他内容？

添加`FLAG_SECURE`到窗口处理这个，IIRC：

```
public class FlagSecureTestActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().setFlags(LayoutParams.FLAG_SECURE,
                         LayoutParams.FLAG_SECURE);

    setContentView(R.layout.main);
  }
} 
```

这也会阻止具有屏幕截图支持的 ICS 设备上的屏幕截图。

# c# - 将类中的数据和类列表中的数据绑定到相同的 WPF DataGrid

> ID：10533190
> 
> 赞同：0
> 
> 时间：2012-05-10T11:38:20.917
> 
> 标签：c#, list, wpfdatagrid

我对 WPF 比较陌生，找不到任何解决我当前问题的方法，所以我在这里尝试。我有一个名为 ToolType 的类，它有几个参数（名称、id、型号），它还有一个工具列表（ID、RFID、shelfID）。在我的一种观点中，我需要展示

```
 | ID | RFID | Name | Model | ShelfID | 
```

作为 DataGrid 中的列，因此是“父”类和“子”类的混合，但我只是不知道如何去做——除了制作一个包含信息的全新字符串数组。有谁知道怎么做？

代码：

```
class Tool
{
    public string ID { get; set; }
    public string RFID { get; set; }
    public string space { get; set; }
    ...
} 
```

* * *

```
class ToolType
{
    public string ID { get; set; }
    public string name { get; set; }
    public string model { get; set; }
    public int interval { get; set; }
    public List<Tool> toolsList = new List<Tool>();
    ...
} 
```

* * *

数据网格的 WPF：

```
<DataGrid AutoGenerateColumns="False" Height="200" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="40,43,0,0" Name="dataGrid4" VerticalAlignment="Top" Width="305">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding ID}" Header="ID" IsReadOnly="True"/>
        <DataGridTextColumn Binding="{Binding RFID}" Header="RFID" IsReadOnly="True"/>
        <DataGridTextColumn Binding="{Binding name}" Header="Type" IsReadOnly="True"/>
        <DataGridTextColumn Binding="{Binding model}" Header="Model" IsReadOnly="True"/>
        <DataGridTextColumn Binding="{Binding nextMaintenance}" Header="Dato" IsReadOnly="True"/>
        <DataGridTextColumn Binding="{Binding space}" Header="Plads" IsReadOnly="True"/>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:43:00.960

如何按 ToolType 对工具进行分组：[如何：在 DataGrid 控件中对数据进行分组、排序和过滤](http://msdn.microsoft.com/en-us/library/dd833072%28v=vs.95%29.aspx)

# jquery - CodeMirror 和 JQuery 选项卡

> ID：10533192
> 
> 赞同：3
> 
> 时间：2012-05-10T11:38:22.217
> 
> 标签：jquery, codemirror

我的 jquery 选项卡和 codemirror 有问题。通过在此处进行一些搜索，建议我在加载选项卡时调用 codemirror refresh 方法，但除非我单击该区域，否则它仍处于隐藏状态。附件是示例 html 和脚本

有任何想法吗？

```
 <script type="text/javascript">
          var editorCss;
          var htmlCss;
          $(function () {
              $("#tabs").tabs();

              var $tabs = $("#tabs").tabs({
                  select: function (e, ui) {
                      var thistab = ui;
                      runMethod(thistab.index);
                  }
              });       

              $('#code0').val('//test 0');
              $('#code1').val('//test 1');
              $('#code2').val('//test 2');

                  editorCss = CodeMirror.fromTextArea(document.getElementById("code1"), {});
                  htmlCss = CodeMirror.fromTextArea(document.getElementById("code2"), {});
          });

          function runMethod(tabindex) {
              switch (tabindex) {
                  case 1:
                      editorCss.refresh();
                      break;
                  case 2:
                      htmlCss.refresh();

                      break;
              }
          } 
    </script>

<body>
    <h1>CodeMirror: CSS mode</h1>
    <div id="tabs">
    <ul>
        <li><a href="#tabs-0">General</a></li>
        <li><a href="#tabs-1">Html</a></li>
        <li><a href="#tabs-2">CSS</a></li>

    </ul>
        <div id="tabs-0">
            <textarea id="code0" name="code0" rows="10" cols="10"></textarea>
        </div>
        <div id="tabs-1">
         <textarea id="code1" name="code1" rows="10" cols="10"></textarea>

        </div>
        <div id="tabs-2">
          <textarea id="code2" name="code2" rows="10" cols="10">hello 2</textarea>
        </div>
    </div>
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:08:44.077

这是旧的，但你去......

```
//Refresh editor when tab opens, syntax highlighter
    tabs.tabs({
        show: function(event, ui) {
            $('.processingide').each( function(i) {
                editor[i].refresh();
            });
        }
    }); 
```

现场示例可以在这里看到：http: [//mattlockyer.com/multimediaprogramming/](http://mattlockyer.com/multimediaprogramming/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-18T12:51:39.117

我最近进行了搜索，这有帮助...

```
$('.nav-tabs a').on('shown.bs.tab', function(e) {
    $('.CodeMirror').each(function(i, el){
        el.CodeMirror.refresh();
    });
}); 
```

# java - 无法访问 Java Servlet

> ID：10533196
> 
> 赞同：0
> 
> 时间：2012-05-10T11:38:38.827
> 
> 标签：java, jsp, servlets

我正在玩 JSP 和 Servlet 并遇到以下问题：

我有一个 JSP，它实现了一个小的“登录功能”。代码如下：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>

Enter username and password:<br />
<hr />

<form method="GET" name="login" action="LoginCheck">
username<br />
<input type="text" name="loginName" /><br />
Password<br />
<input type="password" name="password" /><br />
<input type="submit" value="login" />
<input type="reset" value="reset" />
</form>

</body>
</html> 
```

如您所见，我想访问 servlet LoginCheck。代码如下：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LoginCheck extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response)     throws ServletException, IOException
    {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        String loginName = request.getParameter("loginName");
        String password = request.getParameter("password");

        if(loginName.equals("admin"))
        {
            if(password.equals("test"))
            {
                out.println("Username and password are correct!");
            }else
            {
                out.println("Password were are incorrect!<br />");
                out.println("<a href='index.jsp'>Here</a> you can get back to the Loginpage!");
            }
        }else
        {
            out.println("Username doesn't exist.<br />");
            out.println("<a href='index.jsp'>Here</a> you can get back to the Loginpage!");
        }
    }
} 
```

如果我在另一个 JSP 中使用 servlet 的代码，一切正常，但我无法访问 servlet。XML 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-    app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>Servlet</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

服务器是 Jetty 服务器，不，我不允许你使用 Tomcat。我在 Eclipse 中的项目结构如下所示：http: [//imageshack.us/photo/my-images/204/eclipseo.png/](http://imageshack.us/photo/my-images/204/eclipseo.png/)

你能告诉我为什么我不能访问servlet吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:46:58.377

您`<Servlet>`必须添加到 web.xml 中。例如

```
<servlet>
    <servlet-name>builder</servlet-name>
    <servlet-class>LoginCheck</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>builder</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:43:08.343

您需要在您的 : 上声明 servlet 和 servlet 映射`web.xml`：

```
<servlet>
    <servlet-name>ServletName</servlet-name>
    <servlet-class>servlet.LoginCheck</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>ServletName</servlet-name>
    <url-pattern>*</url-pattern>
</servlet-mapping> 
```

此外，如果多个 servlet 共享公共 URL 模式，则必须注意它们在 web.xml 中的声明顺序

例如：如果您有两个名为 servlet1 和 servlet2 的 servlet，并且您想在 /something/something2 上调用 servlet1

但意思是想在 /something/* 上调用 servlet2

servlet1 应该在 web.xml 中的 servlet2 之前声明，否则将在每个以 /something/ 开头的 url 模式上调用 servlet2

# linux - 使用 inotify-tools 作为守护进程处理数据

> ID：10533200
> 
> 赞同：3
> 
> 时间：2012-05-10T11:39:05.960
> 
> 标签：linux, bash, shell, inotify-tools

我有一个 bash 脚本，它使用 inotify-tools 处理一些数据，以了解文件系统上何时发生某些事件。如果在 bash 控制台中运行它可以正常工作，但是当我尝试将它作为守护程序运行时它会失败。我认为原因是`inotifywait`命令调用的所有输出都进入了一个文件，因此之后的部分`| while`不再被调用。我该如何解决？这是我的脚本。

```
#!/bin/bash

inotifywait -d -r \
-o /dev/null \
-e close_write \
--exclude "^[\.+]|cgi-bin|recycle_bin" \
--format "%w:%&e:%f" \
$1|
while IFS=':' read directory event file
do

    #doing my thing

done 
```

所以，`-d`告诉`inotifywait`作为守护进程运行，`-r`递归地执行它并且`-o`是保存输出的文件。在我的情况下，该文件是`/dev/null`因为我真的不需要输出，除了处理命令之后的部分（`| while...`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T11:53:54.050

在这种情况下，您不想作为守护程序运行`inotify-wait`，因为您想继续处理命令的输出。您想用 替换`-d`命令行选项`-m`，它告诉`inotifywait`您继续监视文件并继续打印到`stdout`：

```
 -m, --monitor
          Instead  of exiting after receiving a single event, execute
          indefinitely.  The default behaviour is to exit  after  the
          first event occurs. 
```

如果您希望在后台运行，则需要将整个脚本置于后台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:23:42.133

这是使用 nohup 的解决方案：（请注意，在我的测试中，如果我指定了 -o，则似乎没有评估 while 循环）

```
nohup inotifywait -m -r \
  -e close_write \
  --exclude "^[\.+]|cgi-bin|recycle_bin" \
  --format "%w:%&e:%f" \
  $1 |
while IFS=':' read directory event file
do
  #doing my thing
done >> /some/path/to/log 2>&1 & 
```

# google-drive-api - 使用 Java 从刷新令牌中获取访问令牌

> ID：10533203
> 
> 赞同：14
> 
> 时间：2012-05-10T11:39:10.797
> 
> 标签：google-drive-api

我使用此处给出的示例程序从授权代码中获取了刷新令牌和访问令牌[https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials](https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials)

但是没有示例程序可以从刷新令牌中获取访问令牌，即当我们没有授权码时。任何指针？有没有办法只使用刷新令牌和访问令牌来实例化驱动服务对象？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T16:01:15.317

DrEdit [Java](https://developers.google.com/drive/examples/java#storing_and_retrieving_credentials_from_the_database)示例有一个示例，说明如何从 Google App Engine 数据存储区检索存储的凭据。

如果使用其他类型的凭证存储，您可以使用以下代码使用存储的令牌实例化新的 OAuth 2.0 凭证：

```
GoogleCredential credentials = new GoogleCredential.Builder()
    .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
    .setJsonFactory(jsonFactory).setTransport(transport).build()
    .setRefreshToken("<REFRESH_TOKEN>").setAccessToken("<ACCESS_TOKEN>"); 
```

编辑：更正了代码中的错字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-23T12:48:35.807

试试这个代码。这是 Alain + [https://cloud.google.com/bigquery/authorization](https://cloud.google.com/bigquery/authorization)的混合解决方案。这对我有用。

```
GoogleCredential credential = createCredentialWithRefreshToken(
        HTTP_TRANSPORT, JSON_FACTORY, new TokenResponse().setRefreshToken(refreshToken));

credential.refreshToken(); 

String newAccessToken = credential.getAccessToken();

public static GoogleCredential createCredentialWithRefreshToken(HttpTransport transport, 
        JsonFactory jsonFactory, TokenResponse tokenResponse) {
    return new GoogleCredential.Builder().setTransport(transport)
        .setJsonFactory(jsonFactory)
        .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
        .build()
        .setFromTokenResponse(tokenResponse);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T13:06:39.360

只是为了解释一下我的经历。

有同样的问题（访问令牌为空）问题是我在没有发送 setAccessType（“离线”）的情况下进行了测试，并且允许从帐户访问。

然后我把我的代码 setAccessType（“离线”）代码，但仍然刷新令牌为空。

我的解决方案是撤销我要访问的帐户的权限（[https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)）。在接下来的测试中，我同意了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-25T21:52:42.490

按照这个例子：

```
private static void getAccessTokenFromRefreshToken() throws IOException {
    GoogleCredential credentials = new GoogleCredential.Builder()
        .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
        .setJsonFactory(JSON_FACTORY).setTransport(httpTransport).build()
        .setRefreshToken(REFRESH_TOKEN);

    String accessToken = credentials.getAccessToken();
    System.out.println("Access token before: " + accessToken);

    credentials.refreshToken();

    accessToken = credentials.getAccessToken();
    System.out.println("Access token after: " + accessToken);
} 
```

输出：

```
Access token before: null
Access token after: ya29.u4HC22-Avc0aaDC0g0zj1jhz2yjsJrm8qm0hU2eVeBrf6DKj3CcHDQ42KARH4y_d364-b 
```

# unix - 如何替换某些行上以某些字符开头的单词？

> ID：10533205
> 
> 赞同：1
> 
> 时间：2012-05-10T11:39:13.200
> 
> 标签：unix, replace, sed, vcf-vcard

我正在尝试使用 SED 命令从我的文件中替换/删除 rs 数字。我有一个 VCF 文件：

```
##reference=file:/hs37d5.fasta

#CHROM  POS     ID      REF     ALT     QUAL    FILTER  INFO    FORMAT  SC_PCHD5235298

1       10234   rs145599635     C       T       153.34  . 
```

我想仅在不以 # 开头的行上替换 rs* 条目，例如，我想用点替换 rs145599635。并希望它忽略以 # 开头的行的标题。

我试过了

```
sed "/^[^#]/s/rs.*/./g" test.vcf 
```

但它会删除 rs 之后的所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:05:30.553

You can try with this,

Ex:

```
 sed -i 's/\(^[^#].*\)rs[0-9]\+\( .*\)/\1rs.\2/' test.vcf 
```

I altered your command.You have to write like this.

```
 sed -i "/^[^#]/s/rs[0-9]\+/rs./g" test.vcf 
```

My test.vcf file looks like this.I think your file looks like this only.

```
 ##reference=file:/hs37d5.fasta

  #rs145599635 C T 153.34 .
  #1 10234  rs145599635 C T 153.34  .
  #CHROM POS ID REF ALT QUAL FILTER INFO FORMAT SC_PCHD5235298

  1 10234  rs145599635 C T 153.34  . 
```

I hope this will help you.

# php - PHP Imagick - setTextEncoding() 函数不起作用

> ID：10533210
> 
> 赞同：2
> 
> 时间：2012-05-10T11:39:24.107
> 
> 标签：php, encoding, imagemagick, imagick

我正在尝试在 Imagick 对象上添加一些文本。

但是我使用 setTextEncoding() 函数，它仍然不起作用。

```
.......

$draw = new ImagickDraw();
$draw->setTextEncoding('utf-8');
$draw->setFont($fpath.'/process/ARIAL.TTF'); 
$draw->setFontSize(80);
$draw->setFillColor("#ffffff");

/*** annotate the text on the image ***/
$imageOrg->annotateImage($draw, 60, 100, 0, "onur küçükkeçe");

........ 
```

结果我得到了，

```
onur kÃ¼Ã§Ã¼kkeÃ§e 
```

知道为什么它不起作用吗？

提前致谢。

**更新**

如果我将 $text 变量设置为 chr(252) 之类的值，那么我会得到正确的结果

```
$text=chr(252);
$imageOrg->annotateImage($draw, 60, 100, 0, $text); 
```

结果我得到

```
ü 
```

**更新二**

最后我找到了造成这种情况的原因。

出现此问题是因为未定义文档的字符集，但如果为脚本设置字符集，则 imagick 不起作用，因为需要将文档的类型设置为 image/png。

但我不知道我该如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:40:49.420

好的。我找到了解决方案。

php **utf8_decode()**函数解决问题

```
.......

$draw = new ImagickDraw();
$draw->setTextEncoding('utf-8');
$draw->setFont($fpath.'/process/ARIAL.TTF'); 
$draw->setFontSize(80);
$draw->setFillColor("#ffffff");

/*** annotate the text on the image ***/
$imageOrg->annotateImage($draw, 60, 100, 0, utf8_decode("onur küçükkeçe"));

........ 
```

# html - CSS行高边距问题

> ID：10533221
> 
> 赞同：0
> 
> 时间：2012-05-10T11:40:11.197
> 
> 标签：html, margins, css

快速提问。

有谁知道解决我的问题或解决我的问题： ![在此处输入图像描述](../Images/48ff531c683754a7cf0888a915af4789.png)

问题是由于段落的行高，段落的开头和底部有一些空白。在上面给出的示例中，它大约是 4px。但我不想在其他元素上编辑我的边距。例如，40 像素的边距将是 36 像素。

那么有没有人知道一个很好的解决方法？我确实找到了 css 伪元素第一行：[http ://reference.sitepoint.com/css/pseudoelement-firstline](http://reference.sitepoint.com/css/pseudoelement-firstline)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:49:42.020

感谢寻找最后一行伪元素，我会以不同的方式解决这个问题。

如果您要在段落之后有更多内容，您可以设置它的样式以向上移动靠近最后一行文本。

有关我的意思的想法，请参见此处-> [http://jsfiddle.net/Z9LG9/1/](http://jsfiddle.net/Z9LG9/1/)

在回应您的评论时说“保持样式表尽可能干净”，您是否应该考虑创建功能样式表而不是漂亮的样式表？您始终可以在构建阶段之后清理样式表。

您将需要为此使用负边距。没有办法绕过它，可以跨浏览器。

# scala - Play 2.0 模型最佳实践

> ID：10533225
> 
> 赞同：5
> 
> 时间：2012-05-10T11:40:25.407
> 
> 标签：scala, model, playframework, playframework-2.0

我正在寻找有关使用 play 2.0 将对象持久保存在数据库中的模型和方法的最佳实践。我已经使用 Scala 研究了 Play 2.0 的 Play 和 typesafe 示例。

我的理解是：

*   模型在案例类中定义
*   所有的插入/更新/删除/选择都定义在这个案例类的伴生对象中

因此，如果我需要更新我的 Car 对象以定义新所有者，我将不得不这样做：

```
val updatedCar = myCar.copy(owner=newOwner)
Car.update(updatedCar)
// or
Car.updateOwner(myCar.id.get, newOwner) 
```

我想知道为什么更新或删除语句不在案例类本身中：

```
case class Car(id: Pk[Long] = NotAssigned, owner: String) {
    def updateOwner(newOwner: String) {
        DB.withConnection { implicit connection =>
            SQL(
                """
                update car
                set owner = {newOwner}
                where id = {id}
                """
            ).on(
                'id -> id,
                'newOwner -> newOwner
            ).executeUpdate()
        }
        copy(owner = newOwner)
    }
} 
```

这样做将允许这样做：

```
val updatedCar = myCar.updateOwner(newOwner) 
```

这就是我过去使用 Java 和 JPA 对 Play 1.X 所做的事情。也许原因很明显，而且由于我对 Scala 的了解很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:34:50.843

我认为部分原因是喜欢 Scala 等函数式语言的不变性。

在您的示例中，您修改了“this.owner”。删除的等效操作是什么样的，“this”会发生什么？

有了伴生对象，似乎更清楚一点，传递的对象（或 ID）没有被修改，返回的对象或 ID 是操作的相关结果。

然后，我认为问题的另一部分是您的示例首先需要一个实例。当您删除一个对象时，如果您只是想通过 Id 删除一个表单，并且不想首先构建您要删除的对象的整个实例，该怎么办？

我一直在用 mongo 玩 play2.0，我的伴生对象看起来像：

对象 MyObject 扩展 SalatDAO[MyObject,ObjectId] (collection = getCollection("objectcollection")) { }

这些伴随对象从 SalatDAO 继承类似 CRUD 的操作（MyObject.save()、MyObject.find() 等）。我并不完全清楚它是如何在内部实现的，但它工作得很好。

# wpf - 以编程方式在 DataGridTemplateColumn 中设置 ComboBox 的项目

> ID：10533226
> 
> 赞同：1
> 
> 时间：2012-05-10T11:40:26.033
> 
> 标签：wpf, combobox, datagridtemplatecolumn

我想以编程方式在 DataGrid 中填充 ComboBox，但它不起作用。这是 XAML 代码：

```
<DataGridTemplateColumn 
                    CellStyle="{StaticResource DataGridColumnContentCenter}"
                    local:DataGridUtil.Name="ComboBoxCol01"
                    x:Name="ComboBoxCol01"
                    Header="Maschine"
                    SortMemberPath="ComboBoxCol01"
                    IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox DisplayMemberPath="@name"
                                      IsSynchronizedWithCurrentItem="False"
                                      SelectedIndex="{Binding ComboBoxCol01}"
                                      IsReadOnly="True"
                                      IsEditable="True"
                                      IsDropDownOpen="False"
                                      IsHitTestVisible="True"
                                      Width="104"
                                      Loaded="ComboBoxCol01_Loaded">
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

通过 Loaded 事件，我想填充 ComboBox：

```
private void ComboBoxCol01_Loaded(object sender, RoutedEventArgs e)
    {
        List<string> myList = new List<string>();
        myList.Add("item1");
        myList.Add("item2");
        myList.Add("item3");
        myList.Add("item4");

        ComboBox curComboBox = sender as ComboBox;
        curComboBox.ItemsSource = myList;
    } 
```

另一个版本也不起作用：

```
private void ComboBoxCol01_Loaded(object sender, RoutedEventArgs e)
    {
        ComboBox curComboBox = sender as ComboBox;
        curComboBox.Items.Add("item1");
        curComboBox.Items.Add("item2");
        curComboBox.Items.Add("item3");
        curComboBox.Items.Add("item4");
    } 
```

DataGrid 中的组合框包含 4 个空项。空意味着没有“item1”......

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:09:09.900

不能命名你的组合框吗？然后添加项目？

```
<DataGridTemplateColumn 
                    CellStyle="{StaticResource DataGridColumnContentCenter}"
                    local:DataGridUtil.Name="ComboBoxCol01"
                    x:Name="ComboBoxCol01"
                    Header="Maschine"
                    SortMemberPath="ComboBoxCol01"
                    IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox **x:Name="cboCol1"**
                                      DisplayMemberPath="@name"
                                      IsSynchronizedWithCurrentItem="False"
                                      SelectedIndex="{Binding ComboBoxCol01}"
                                      IsReadOnly="True"
                                      IsEditable="True"
                                      IsDropDownOpen="False"
                                      IsHitTestVisible="True"
                                      Width="104"
                                      Loaded="ComboBoxCol01_Loaded">
                            </ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

private void ComboBoxCol01_Loaded(object sender, RoutedEventArgs e)
    {
        cboCol1.Items.Add("item1");
        cboCol1.Items.Add("item2");
        cboCol1.Items.Add("item3");
        cboCol1.Items.Add("item4");
    } 
```

# php - Wordpress 循环传递变量

> ID：10533231
> 
> 赞同：1
> 
> 时间：2012-05-10T11:40:49.960
> 
> 标签：php, wordpress

我正在使用 Wordpress 循环。然后我有一个模式弹出窗口，其中包含基于帖子的更多信息。

我目前得到的是，当您单击“阅读更多”按钮时，它只会加载循环中的第一项。我怀疑我需要将一个 ID 传递给模态框，并且可能会根据帖子的 ID 运行另一个查询，以加载适当的信息。

有没有人做到这一点？

我的代码如下：

**第一循环**

```
<div class="team">
                    <?php
                    $args = array( 'post_type' => 'team_member' );
                    $loop = new WP_Query( $args );
                    while ( $loop->have_posts() ) : $loop->the_post();
                    ?>
                    <div class="team_member">
                    <?php the_post_thumbnail('team_member'); ?>
                    <?php the_title(); ?>
                    <a data-toggle="modal" href="#myModal">
                        <img src="<?php bloginfo( 'template_url' ); ?>/assets/img/content/team_read_more.png" alt="Read More" style="border:none;">
                    </a>
                    </div>
                    <?php endwhile; ?>                  
                </div> 
```

**模态循环**

```
<div class="modal hide fade" id="myModal">
                <div class="modal-header">
                  <button data-dismiss="modal" class="close">×</button>
                  <h3><?php the_title(); ?></h3>
                </div>
                <div class="modal-body">
                    <p><?php the_post_thumbnail('team_member'); ?></p>
                    <p><?php the_content(); ?></p>
                    <p><a href="mailto:<?php echo get_post_meta($post->ID, 'email_address', true);?>">
                        <img src="<?php bloginfo( 'template_url' ); ?>/assets/img/content/e_mail_link.png" alt="E-Mail Me" style="border:none;">
                       </a>
                    </p>
                </div>
              </div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:09:57.837

在您的第一个循环中：

```
<a data-toggle="modal" href="#myModal"> 
```

myModal 是对 modal 的 html 元素的 id 的引用：

```
 <div class="modal hide fade" id="myModal"> 
```

因此，如果您想要多个模式，您可以将 wordpress 帖子 ID 添加到每个元素。

采用 ：

```
<a data-toggle="modal" href="#myModal-<? the_ID(); ?>"> 
```

和

```
 <div class="modal hide fade" id="myModal-<? the_ID(); ?>"> 
```

# c++ - OpenCV C++/Obj-C：高级正方形检测

> ID：10533233
> 
> 赞同：34
> 
> 时间：2012-05-10T11:40:55.500
> 
> 标签：c++, objective-c, opencv, image-processing, object-detection

不久前，我问[了一个关于正方形检测的问题](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)，[karlphillip 得出](https://stackoverflow.com/users/176769/karlphillip)了一个不错的结果。

现在我想更进一步，找到边缘不完全可见的正方形。看看这个例子：

[![例子](../Images/d6bda26bca9065635fb35d896d0de8c2.png)](http://f.cl.ly/items/1g232b201f1i1S0S0N1k/Foto.JPG)

有任何想法吗？我正在使用 karlphillips 代码：

```
void find_squares(Mat& image, vector<vector<Point> >& squares)
{
    // blur will enhance edge detection
    Mat blurred(image);
    medianBlur(image, blurred, 9);

    Mat gray0(blurred.size(), CV_8U), gray;
    vector<vector<Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
        mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                Canny(gray0, gray, 10, 20, 3); // 

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, Mat(), Point(-1,-1));
            }
            else
            {
                    gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            vector<Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                    // approximate contour with accuracy proportional
                    // to the contour perimeter
                    approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                    // Note: absolute value of an area is used because
                    // area may be positive or negative - in accordance with the
                    // contour orientation
                    if (approx.size() == 4 &&
                            fabs(contourArea(Mat(approx))) > 1000 &&
                            isContourConvex(Mat(approx)))
                    {
                            double maxCosine = 0;

                            for (int j = 2; j < 5; j++)
                            {
                                    double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                    maxCosine = MAX(maxCosine, cosine);
                            }

                            if (maxCosine < 0.3)
                                    squares.push_back(approx);
                    }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-10T13:26:46.613

您可以尝试使用[HoughLines](http://opencv.itseez.com/modules/imgproc/doc/feature_detection.html?highlight=houghlines#void%20HoughLines%28InputArray%20image,%20OutputArray%20lines,%20double%20rho,%20double%20theta,%20int%20threshold,%20double%20srn,%20double%20stn%29)来检测正方形的四个边。接下来，定位四个生成的线交叉点以检测角点。[Hough 变换](http://en.wikipedia.org/wiki/Hough_transform)对噪声和遮挡相当稳健，因此在这里可能很有用。此外，[这](http://www.activovision.com/octavi/doku.php?id=hough_transform)是一个交互式演示，展示了霍夫变换的工作原理（我认为它至少很酷：）。 [这](https://stackoverflow.com/questions/8202997/how-to-find-laser-cross-center-with-open-cv/8203630#8203630)是我以前的答案之一，它检测到显示大部分相同数学的激光交叉中心（除了它只找到一个角）。

每边可能会有多条线，但定位交叉点应该有助于确定内点与异常点。找到候选角后，您还可以按面积或多边形的“方形”程度过滤这些候选角。

**编辑：**所有这些带有代码和图像的答案让我觉得我的答案有点缺乏:) 所以，这是你如何做到这一点的实现：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>
#include <vector>

using namespace cv;
using namespace std;

Point2f computeIntersect(Vec2f line1, Vec2f line2);
vector<Point2f> lineToPointPair(Vec2f line);
bool acceptLinePair(Vec2f line1, Vec2f line2, float minTheta);

int main(int argc, char* argv[])
{
    Mat occludedSquare = imread("Square.jpg");

    resize(occludedSquare, occludedSquare, Size(0, 0), 0.25, 0.25);

    Mat occludedSquare8u;
    cvtColor(occludedSquare, occludedSquare8u, CV_BGR2GRAY);

    Mat thresh;
    threshold(occludedSquare8u, thresh, 200.0, 255.0, THRESH_BINARY);

    GaussianBlur(thresh, thresh, Size(7, 7), 2.0, 2.0);

    Mat edges;
    Canny(thresh, edges, 66.0, 133.0, 3);

    vector<Vec2f> lines;
    HoughLines( edges, lines, 1, CV_PI/180, 50, 0, 0 );

    cout << "Detected " << lines.size() << " lines." << endl;

    // compute the intersection from the lines detected...
    vector<Point2f> intersections;
    for( size_t i = 0; i < lines.size(); i++ )
    {
        for(size_t j = 0; j < lines.size(); j++)
        {
            Vec2f line1 = lines[i];
            Vec2f line2 = lines[j];
            if(acceptLinePair(line1, line2, CV_PI / 32))
            {
                Point2f intersection = computeIntersect(line1, line2);
                intersections.push_back(intersection);
            }
        }

    }

    if(intersections.size() > 0)
    {
        vector<Point2f>::iterator i;
        for(i = intersections.begin(); i != intersections.end(); ++i)
        {
            cout << "Intersection is " << i->x << ", " << i->y << endl;
            circle(occludedSquare, *i, 1, Scalar(0, 255, 0), 3);
        }
    }

    imshow("intersect", occludedSquare);
    waitKey();

    return 0;
}

bool acceptLinePair(Vec2f line1, Vec2f line2, float minTheta)
{
    float theta1 = line1[1], theta2 = line2[1];

    if(theta1 < minTheta)
    {
        theta1 += CV_PI; // dealing with 0 and 180 ambiguities...
    }

    if(theta2 < minTheta)
    {
        theta2 += CV_PI; // dealing with 0 and 180 ambiguities...
    }

    return abs(theta1 - theta2) > minTheta;
}

// the long nasty wikipedia line-intersection equation...bleh...
Point2f computeIntersect(Vec2f line1, Vec2f line2)
{
    vector<Point2f> p1 = lineToPointPair(line1);
    vector<Point2f> p2 = lineToPointPair(line2);

    float denom = (p1[0].x - p1[1].x)*(p2[0].y - p2[1].y) - (p1[0].y - p1[1].y)*(p2[0].x - p2[1].x);
    Point2f intersect(((p1[0].x*p1[1].y - p1[0].y*p1[1].x)*(p2[0].x - p2[1].x) -
                       (p1[0].x - p1[1].x)*(p2[0].x*p2[1].y - p2[0].y*p2[1].x)) / denom,
                      ((p1[0].x*p1[1].y - p1[0].y*p1[1].x)*(p2[0].y - p2[1].y) -
                       (p1[0].y - p1[1].y)*(p2[0].x*p2[1].y - p2[0].y*p2[1].x)) / denom);

    return intersect;
}

vector<Point2f> lineToPointPair(Vec2f line)
{
    vector<Point2f> points;

    float r = line[0], t = line[1];
    double cos_t = cos(t), sin_t = sin(t);
    double x0 = r*cos_t, y0 = r*sin_t;
    double alpha = 1000;

    points.push_back(Point2f(x0 + alpha*(-sin_t), y0 + alpha*cos_t));
    points.push_back(Point2f(x0 - alpha*(-sin_t), y0 - alpha*cos_t));

    return points;
} 
```

**注意：**我调整图像大小的主要原因是我可以在屏幕上看到它，并加快处理速度。

## 精明的

这使用 Canny 边缘检测来帮助大大减少阈值后检测到的行数。

![在此处输入图像描述](../Images/aea6cde95b3b1e4b5ab10c1260e96b38.png)

## 霍夫变换

然后使用霍夫变换来检测正方形的边。 ![在此处输入图像描述](../Images/a8d89c34a9d28384c993627c445a2592.png)

## 十字路口

最后，我们计算所有线对的交点。 ![在此处输入图像描述](../Images/458c4de2fbf6a6d1f4977fb91d5f13d5.png)

希望有帮助！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-10T14:14:07.403

我尝试使用`convex hull method`它非常简单。

在这里您可以找到检测到的轮廓的凸包。它消除了纸张底部的凸起缺陷。

下面是代码（在 OpenCV-Python 中）：

```
import cv2
import numpy as np

img = cv2.imread('sof.jpg')
img = cv2.resize(img,(500,500))
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

ret,thresh = cv2.threshold(gray,127,255,0)
contours,hier = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    if cv2.contourArea(cnt)>5000:  # remove small areas like noise etc
        hull = cv2.convexHull(cnt)    # find the convex hull of contour
        hull = cv2.approxPolyDP(hull,0.1*cv2.arcLength(hull,True),True)
        if len(hull)==4:
            cv2.drawContours(img,[hull],0,(0,255,0),2)

cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

（在这里，我还没有在所有平面上找到正方形。如果你愿意，自己做。）

以下是我得到的结果：

![在此处输入图像描述](../Images/ae720add2ca09b5117a898dc5be38f14.png)

我希望这是你需要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T13:28:30.340

**第一**：开始尝试使用**阈值**技术将*白纸*与图像的其余部分隔离开来。这是一个简单的方法：

```
Mat new_img = imread(argv[1]);

double thres = 200;
double color = 255;
threshold(new_img, new_img, thres, color, CV_THRESH_BINARY);

imwrite("thres.png", new_img); 
```

![](../Images/4fd7bddbc2eb133431dc606443829c72.png)

但还有其他替代方案可以提供更好的结果。一种是[调查](https://stackoverflow.com/a/9021811/176769) [`inRange()`](https://stackoverflow.com/a/7959488/176769)，另一种是通过将图像转换为 HSV 颜色空间来[通过颜色进行检测。](https://developer.qualcomm.com/forum/qdevnet-forums/computer-vision-fastcv/11954)

[该主题](https://stackoverflow.com/questions/3065598/what-is-the-best-way-to-detect-white-color)还提供了有关该主题的兴趣讨论。

**第二**：执行此过程之一后，您可以尝试将结果直接输入`find_squares()`：

![](../Images/83fe74f8a7e496b0ed257174fd242227.png)

另一种方法`find_squares()`是实现[边界框技术](http://felix.abecassis.me/2011/10/opencv-bounding-box-skew-angle/)，它有可能提供更准确的矩形区域检测（前提是您有完美的阈值结果）。我在[这里](https://stackoverflow.com/a/10300757/176769)和[这里](https://stackoverflow.com/a/10317919/176769)都用过。值得注意的是，OpenCV 有它自己的[边界框教程](http://opencv.itseez.com/doc/tutorials/imgproc/shapedescriptors/bounding_rects_circles/bounding_rects_circles.html)。

*正如Abid*`find_squares()`在他的回答中指出的那样，另一种方法是使用[convexHull](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=convexhull#convexhull)方法。查看 OpenCV 的[C++ 教程中有关此方法](http://opencv.itseez.com/doc/tutorials/imgproc/shapedescriptors/hull/hull.html#convex-hull)的代码。

 ** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-29T06:27:50.743

1.  转换为实验室空间
2.  对 2 个集群使用 kmeans
3.  检测 suqares 一个内部集群，它将解决 rgb 空间中的许多问题*

# python - 如何删除 OpenERP RML 模板中的一组节点？

> ID：10533235
> 
> 赞同：0
> 
> 时间：2012-05-10T11:40:58.403
> 
> 标签：python, openerp, rml

在 RML 模板中，是否可以一次删除多个节点？或者是否可以将几个节点组合为一个，然后删除整个组？

我尝试在“pto”中放置几个​​“para”元素，然后执行“removeParentNode('pto')”，但没有任何区别。removeParentNode 对“pto”元素不起作用，或者它仅删除“pto”并保留“para”子元素？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T21:20:42.300

您应该能够将多个`para`元素包装在一个`section`元素中并删除该部分。有关示例，请参阅[拣货报告。](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/6785/stock/report/picking.rml#L253)

```
<section>
  <para style="terp_default_2">[[ repeatIn([line for line in picking.move_lines if ((line.state == 'confirmed' or line.state=='done' or line.state=='assigned') and not line.scrapped)],'move_lines') ]]</para>
  <para style="terp_default_2">[[ (picking.move_lines!=[] and removeParentNode('para')) or removeParentNode('section')]]</para>
  <blockTable colWidths="256.0,74.0,58.0,60.0,73.0" style="Move_Line_Contect_Assign_State">
    <tr>
      <td>
        <para style="terp_default_9"><font face="Helvetica" size="9.0">[ [[ (move_lines.product_id.default_code) or removeParentNode('font') ]] ]</font> [[ move_lines.product_id.name ]] [[ move_lines.product_id.variants or '']] </para>
      </td>
      <td>
        <para style="terp_default_Centre_9">[[ (move_lines.prodlot_id and move_lines.prodlot_id.name) or '' ]]</para>
      </td>
      <td>
        <para style="terp_default_9">[[ move_lines.state ]]</para>
      </td>
      <td>
        <para style="terp_default_Right_9">[[ (move_lines.location_id and move_lines.location_id.name) or '' ]] </para>
      </td>
      <td>
        <para style="terp_default_Right_9">[[ formatLang(move_lines.product_qty) ]] [[ move_lines.product_uom.name ]]</para>
      </td>
    </tr>
  </blockTable>
</section> 
```

# javascript - 计算表格行并填充总计字段

> ID：10533238
> 
> 赞同：2
> 
> 时间：2012-05-10T11:41:11.810
> 
> 标签：javascript, jquery

我有如下表：

```
<table>
  <thead>
    <th>Product Type</th>
    <th>Quantity</th>
    <th>Unit</th>
    <th>Total</th>
  </thead>
  <tr>
     <td>Gas</td>
     <td><input type="text" name="qty" /></td>
     <td>
        <select id="unit" name="unit">
           <option value="30.42">Liter</option>
           <option value="25.30">Ton</option>
           <option value="45.10">Kg</option>
     </td>
     <td><input type="text" readonly="readonly" name="total" /></td>
  </tr>
  <tr>
     <td>Diesel</td>
     <td><input type="text" name="qty" /></td>
     <td>
        <select id="unit" name="unit">
           <option value="20.42">Liter</option>
           <option value="18.30">Ton</option>
           <option value="25.10">Kg</option>
     </td>
     <td><input type="text" readonly="readonly" name="total" /></td>
  </tr>
  <tr>
     <td>Fuel</td>
     <td><input type="text" name="qty" /></td>
     <td>
        <select id="unit" name="unit">
           <option value="30.42">Liter</option>
           <option value="25.30">Ton</option>
           <option value="45.10">Kg</option>
     </td>
     <td><input type="text" readonly="readonly" name="total" /></td>
  </tr> 
```

我想计算（ qty * unit ）每一行`qty`，`unit`并放置结果`total`列。

在计算结束时，我想要`sum`整个`total`字段并放入总计字段。

我试过像下面这样总是返回`NaN`但是当我通过`typeof`返回检查值时`number`！：

```
$(document).ready(function() {  
$('input[name^=qty], select[name^=unit]').change(function(){  
   var total = 0;
   var $row = $(this).parent();  
   var qty = parseFloat($row.find('input[name=qty]').val());  
   var price = parseFloat($row.find("select[name='unit'] option:selected").val());
   total = parseFloat(qty * price);  
   $row.find('.amount').text(parseFloat(qty * price));  
})  
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:49:52.423

这里有几个错误，包括`text()`在输入字段上使用，以及使用`parent()`而不是`closest("tr")`。

我还为您的元素添加了类，以使选择器更容易。尝试这个：

```
$('.qty, .unit').change(function(){  
   var total = 0;
   var $row = $(this).closest("tr");  
   var qty = parseFloat($row.find('.qty').val());  
   var price = parseFloat($row.find(".unit").val());
   total = parseFloat(qty * price);  
   $row.find('.total').val(parseFloat(qty * price));  
}) 
```

[**示例小提琴**](http://jsfiddle.net/ng2qF/)

* * *

**更新**

为选择添加了空白默认值：

```
$('.qty, .unit').change(function(){  
    var total = 0;
    var $row = $(this).closest("tr");  
    var qty = parseFloat($row.find('.qty').val());  
    var price = parseFloat($row.find(".unit").val());
    total = qty * price;  

    if (isNaN(total)) {
        $row.find('.total').val("");  
    }
    else {
        $row.find('.total').val(total);  
    }
}) 
```

[**小提琴**](http://jsfiddle.net/ng2qF/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:45:45.877

而不是`var $row = $(this).parent();`尝试

```
var $row = $(this).closest("tr"); 
```

您拥有的代码正在查看 td，您需要找到 tr。Closest 查找与 DOM 树最接近的匹配项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T11:46:34.370

试试这个，未测试

```
$(document).ready(function() {  
$('input[name^=qty], select[name^=unit]').change(function(){  
   var total = 0;
   var $row = $(this).parent().prev();  //changed here
   var qty = parseFloat($row.find('input[name=qty]').val());  
   var price = parseFloat($row.find("select[name='unit'] option:selected").val());
   total = parseFloat(qty * price);  
   $row.find('.amount').text(parseFloat(qty * price));  
})  
}); 
```

# salesforce - 如何检索数组列表

> ID：10533242
> 
> 赞同：0
> 
> 时间：2012-05-10T11:41:29.720
> 
> 标签：salesforce, apex-code, visualforce

我想使用 visualforce 页面检索数组列表，例如，每个用户都由他的姓名、电子邮件、地址和文件夹表标识，每个文件夹都有一个 ID 和名称。

请问我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:11:58.023

在 SFDC 中检索对象是使用 SOQL 完成的。[你可以在这里](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_select.htm)阅读更多关于它的信息。

例如，要检索组织中每个用户的名称和 ID：

```
User[] users = [select Id, Name, from User]; 
```

如果您想在 Visualforce 页面中显示信息，您应该将*用户*变量设置为属性。然后您可以使用[apex:dataTable](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#CSHID=pages_compref_dataTable.htm%7CStartTopic=Content/pages_compref_dataTable.htm%7CSkinName=webhelp)或 apex:repeat 来显示值。

# rmi - 无法在 RMI 通信中调用远程方法

> ID：10533249
> 
> 赞同：1
> 
> 时间：2012-05-10T11:41:53.730
> 
> 标签：rmi

我正在尝试执行一个 RMI 程序，但是当我尝试从 RMI 客户端程序调用远程方法时出现异常。

服务器程序：

```
import java.rmi.*;
import java.rmi.registry.*;
import java.rmi.server.*;

public class Hello extends UnicastRemoteObject implements HelloInterface {

    private String message;

    public Hello() throws RemoteException{
           int port=1024; 
          Registry registry;
           try{
              registry = LocateRegistry.createRegistry(port);
              registry.rebind("samplermi", this);
              System.out.println ("Server started and listening on port " + port);

          }
          catch(RemoteException e){
              System.out.println("remote exception"+ e);
          }
      }

      public String sayHi (String name) throws RemoteException {
          message = "Hi .. Welcome " + name;
      return message;
      }

      public static  void main(String args[]){
          try{
              Hello serverObj = new Hello();
          }
          catch (Exception e){
          e.printStackTrace();
          System.exit(1);
          }
          }

} 
```

客户计划：

```
registry=LocateRegistry.getRegistry(serverAddress,serverPort);
          if(registry !=null){
               String[] availRemoteServices = registry.list();
              for(int i=0;i<availRemoteServices.length;i++){
                  System.out.println("Service " + i + ": " +availRemoteServices[i]);                  
              }           
          }
           rmiServer=(HelloInterface)(registry.lookup("samplermi"));

          System.out.println("calling remote method!");
          // call the remote method
          welcomeMsg = rmiServer.sayHi(text);
      System.out.println("Message from server: " + welcomeMsg); 
```

仅在调用远程方法 sayHI 时才出现连接异常。它适用于查找和列出服务名称。

```
R:\Deptapps\itdm\Sample_RMI>java NewSampleRMIClient
Getting Registry Object from server!!
Registry Object Created!!
Service 0: samplermi
Services listed successfully!

Look up successful!
calling remote method!

java.rmi.ConnectException: Connection refused to host; nested exception is:
        java.net.ConnectException: Connection timed out: connect
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
        at sun.rmi.server.UnicastRef.invoke(Unknown Source)
        at Hello_Stub.sayHi(Unknown Source)
        at NewSampleRMIClient.main(NewSampleRMIClient.java:42)
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source) 
```

注意：当在 Solaris 中运行服务器和从 Windows 中运行客户端时，相同的程序可以正常工作。仅当在 AIX 中运行服务器和从 Windows 中运行客户端时，它才起作用。

请有人帮助解决这个问题。自 2 天以来，我一直在尝试解决此问题，但没有用。请帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T05:07:52.337

这[在 RMI FAQ 的 A.1 项中有](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/faq.html#domain)介绍。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T18:02:22.283

先运行`rmiregistry.exe`再运行`Hello.class`，它解决了我的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-22T05:24:48.380

RMi 在默认端口 1099 上工作。因此无需创建端口。如果您使用默认端口号，则可能不会触发异常。并且程序可以正常工作。

# c# - 使用 Linq C# 的 XML 中的所有节点

> ID：10533251
> 
> 赞同：0
> 
> 时间：2012-05-10T11:41:58.620
> 
> 标签：c#, .net, linq

> **可能重复：**
> [使用 LINQ 从 XML 读取所有节点](https://stackoverflow.com/questions/3872611/use-linq-to-read-all-nodes-from-xml)

我正在尝试在 C# windows 应用程序中使用 Linq 读取 XML 文件。下面给出了 xml 字符串的示例。

```
<Root>
<Name>John Doe</Name>
<Data>FBCCF14D504B7B2DBCB5A5BDA75BD93B</Data>
<customer>true</customer>
<Accounts>1</Accounts>
<dataSet>
     <Type1>Found matching records.</Type1>
    <Type2>No matches found.</Type2>
   <Type3>Found matching records.</Type3>
</dataSet>
</Root> 
```

我想显示`<dataset>`标签内的所有数据，`<datatag>`我也想读取`<customer>`标签。

我创建了一个包含成员的类（字符串类型、字符串状态）。我想在哪里存储 type1、2 ......在状态中我想存储类型节点内的内容。

我能够做到这一点，但在代码中我必须给出

`type1 = (string)row.Element("type1"), type2=(string)row.Element("type2"),` 我想要一个通用代码，我不必提及每种类型。换句话说，我想读取标签的所有子节点而不提及标签名称。我花了 2 个小时在谷歌上搜索这个，但还没有找到任何东西。

预期产出

将信息保存在类对象（类型和状态）中。

我想阅读客户标签，以便知道该人是否已经是客户

任何帮助将不胜感激。

谢谢

**更新**

根据从 Raphaël Althaus 收到的信息

我有以下代码：

```
var list = xml.Descendants("dataSet").Elements()
            .Select(m => new CustomerInfo
                             {
                                 Type = m.Name.LocalName,
                                 Value = m.Value
                             }).ToList();

        foreach (CustomerInfo item in list)
        {
            MessageBox.Show(item.Type+ "   "+item.Value);

        } 
```

为了阅读客户标签，我编写了更多代码。

```
var isCustomer = from customer in xmlDoc.Descendants("Root")
            select new
            {
              customer = tutorial.Element("customer").Value,
            } 
```

我可以在一个查询中同时进行吗？或者这种方法对性能没有那么重，所以我可以使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:51:24.873

类似的东西？

```
var q = xml.Descendants("dataSet").Elements()
            .Select(m => new
                             {
                                 type = m.Name.LocalName,
                                 value = m.Value
                             }).ToList(); 
```

您还可以直接填充“有成员的班级”列表

```
var list = xml.Descendants("dataSet").Elements()
                .Select(m => new <TheNameOfYourClass>
                                 {
                                     Type = m.Name.LocalName,
                                     Value = m.Value
                                 }).ToList(); 
```

编辑 ：

要获得“客户”价值，我会做另一个查询

```
var customerElement = xml.Element("customer");
var isCustomer = customerElement != null && customerElement.Value == "true"; 
```

所以你可以在一个小函数中混合所有这些

```
public IList<YourClass> ParseCustomers(string xmlPath, out isCustomer) {
    var xml = XElement.Load(xmlPath);
    var customerElement = xml.Element("customer");
    isCustomer = customerElement != null && customerElement.Value == "true";
    return xml.Descendants("dataSet").Elements()
                    .Select(m => new <YourClass>
                                     {
                                         Type = m.Name.LocalName,
                                         Value = m.Value
                                     }).ToList();
} 
```

# c# - 使用 DataContractserializer 进行字典序列化

> ID：10533263
> 
> 赞同：0
> 
> 时间：2012-05-10T11:42:57.793
> 
> 标签：c#, xml, serialization, dictionary

我的方法返回`Dictionary<TZerokey, Dictionary<TFirstKey, Dictionary<TSecondKey,Dictionary<TThirdKey,TValue>>>>`，我将使用 DataContractSerialiser 将此对象序列化/反序列化为 XML。

以下是我的方法：

```
public static void SerializeDictionaryToXml<T>(this T obj, string fileName)
{
    DataContractSerializer ser = new DataContractSerializer(typeof(T));
    // System.Xml.Serialization.XmlSerializer ser = new System.Xml.Serialization.XmlSerializer(typeof(T));
    FileStream fileStream = new FileStream(fileName, FileMode.Create);
    ser.WriteObject(fileStream, obj);
    fileStream.Close();
}

public static T DeserializeDictionaryFromXml<T>(string xml)
{
    FileStream fs = new FileStream(xml,
    FileMode.Open);
    XmlDictionaryReader reader =    XmlDictionaryReader.CreateTextReader(fs, new XmlDictionaryReaderQuotas());
    DataContractSerializer ser = new DataContractSerializer(typeof(T));

    // Deserialize the data and read it from the instance.
    T deserializedObject = (T)ser.ReadObject(reader, true);
    reader.Close();
    fs.Close();

    return deserializedObject;
} 
```

代码运行良好，只是我没有得到预期的输出。有人可以看到我做错了什么吗？

# extjs4.1 - extjs 4 的日期格式未在日期选择器中呈现

> ID：10533264
> 
> 赞同：0
> 
> 时间：2012-05-10T11:43:00.260
> 
> 标签：extjs4.1

我有以下日期选择器

```
{
                                xtype: 'datefield',
                                id: 'FinalDespatchDate',
                                name: 'FinalDespatchDate',
                                fieldLabel: 'Part Despatch Date',
                                labelWidth: 150,
                                width: 370,
                                validateOnChange: false,
                                format: 'd/m/Y' 
                            },

In my model i have 

  {
             mapping:'FinalDespatchDate',
             name:'FinalDespatchDate',
             type: 'date',
             dateFormat:'d/m/Y'
         }, 
```

如果在我的模型中我不包括 dateFormat。日期绑定到我的日期选择器，但它以不正确的格式发送日期。当我添加 dateFormat 时，它以正确的格式发送日期，它不再绑定到 datepicker。即上述配置在日期选择器中不显示任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:35:38.667

在此（非工作）配置中，您的数据是否来自具有正确格式日期值（'d/m/Y'）的服务器？

# java - Java - 在 Web 服务器目录中创建文件夹和文件

> ID：10533268
> 
> 赞同：2
> 
> 时间：2012-05-10T11:43:19.743
> 
> 标签：java, webserver, relative-path

我想在 Web 服务器的文件夹（TestFolder）中创建一个文件。我将获得 Web 服务器目录的相对路径以及如何在该目录中创建我的 TestFolder。

目前我将在本地服务器中创建一个文件夹，但稍后我需要在测试环境中创建一个文件夹（测试环境中的服务器可能不同）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T11:59:22.343

```
String realPath = getServletContext().getRealPath("/");
File file = new FIle(realPath+"/TestFolder", "testFIle.txt");
file.mkdirs(); 
```

上面的代码将在您的 Web 应用程序的根目录中创建一个文件夹`TestFolder`和一个文件`testFIle.txt`。

`file.mkdirs()`创建由此抽象路径名命名的目录，包括任何必要但不存在的父目录。请注意，如果此操作失败，它可能已成功创建一些必要的父目录。

**返回：** `true`当且仅当创建了目录以及所有必要的父目录；`false`除此以外

希望这可以帮助 ！

# in-app-purchase - 无法启动计费服务

> ID：10533269
> 
> 赞同：4
> 
> 时间：2012-05-10T11:43:20.197
> 
> 标签：in-app-purchase

我正在尝试在我的应用中实施应用内计费。我正在使用地牢示例中的代码。

一切都很好，我可以购买。但是在我离开应用程序后，我收到错误“应用程序已停止工作”，并且在 LogCat 中我看到了。

**05-10 14:33:22.293: E/AndroidRuntime(9568): java.lang.RuntimeException: 无法启动服务 com.package.name.BillingService@2beca0b0 with null: java.lang.NullPointerException**

有人知道什么会导致这个问题吗？

**edit-1：**问题是 billingService 仍然处于活动状态。并且 onStart 正在尝试发送空意图（我可以通过 if null==intent 来解决这个问题，但不是这样）当我完成购买时我正在使用取消绑定。

谢谢。

# internet-explorer - IE9 未在某些子域上传递 cookie

> ID：10533270
> 
> 赞同：0
> 
> 时间：2012-05-10T11:43:25.533
> 
> 标签：internet-explorer, cookies, internet-explorer-9

关于在我的请求标头中发送哪些 cookie，我遇到了 IE9（旧版本和其他浏览器工作正常）的问题。发送的 cookie 数据确定用户是否登录，如果没有数据传递，他们将被重定向到登录 - 因此，由于这个问题，我们只是在登录页面和管理页面之间得到一个循环。但是，这不会发生在所有子域上，也不是子域上的问题，所以我很困惑。

这是`admin.`vs的请求标头`admin.int.`，请注意正在设置 cookie `.example.com`：

```
GET http://admin.example.com/site/index.html HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: en-GB
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Host: admin.example.com
Connection: Keep-Alive
Cookie: <-no auth cookie data>

GET http://admin.int.example.com/site/index.html HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: en-GB
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: admin.int.example.com
Cookie: <+auth cookie data> 
```

正如您在第一个请求中看到的那样，没有发送 auth cookie 数据，而在第二个请求中我们确实有一些。这似乎只是这个子域的一个问题，因为其他 afaik 工作正常。

可能值得注意的是，在第一个请求的标头中传递了 cookie 数据，但是这是针对其域设置为`admin.example.com`精确的 cookie。

# mysql - 具有多个条件的 SQL SELECT 查询

> ID：10533273
> 
> 赞同：4
> 
> 时间：2012-05-10T11:43:38.247
> 
> 标签：mysql, sql

我被一个 SQL 查询困住了。假设我们有一个员工、一个任务表以及它们之间的多对多关联。表格如下所示：

```
employees
id|name
1 | John
2 | Peter
3 | Mike

tasks
id | name
1 | Support
2 | Programming
3 | Call customers
4 | Write Newsletters
5 | Write Invoices

employees_tasks
employee_id | task_id
1 | 1
1 | 2
2 | 3
2 | 4
2 | 5
3 | 2 
```

现在我想让所有以“编程”为任务的员工。正确的查询是：

```
SELECT employees.id, employees.name
FROM employees 
    INNER JOIN employees_tasks ON employees.id = employees_tasks.employee_id
    INNER JOIN tasks ON employees_tasks.task_id = tasks.id
WHERE
    tasks.name LIKE 'Programming' 
```

到目前为止一切顺利......但现在我想让所有员工，他们的任务是“编程”*和*“支持”。这个查询给了我NULL：

```
SELECT employees.id, employees.name
FROM employees 
    INNER JOIN employees_tasks ON employees.id = employees_tasks.employee_id
    INNER JOIN tasks ON employees_tasks.task_id = tasks.id
WHERE
    tasks.name LIKE 'Programming' AND tasks.name LIKE 'Support' 
```

我收到此查询的三条记录

```
SELECT employees.id, employees.name
FROM employees 
    INNER JOIN employees_tasks ON employees.id = employees_tasks.employee_id
    INNER JOIN tasks ON employees_tasks.task_id = tasks.id
WHERE
    tasks.name IN ('Programming', 'Support') 
```

2x 约翰和 1x 迈克。但这不是我想要的。我想要所有具有“编程”和“支持”任务的员工，而不是那些只有其中一项任务的员工。

还有另一种选择。我将 ALL 与子查询一起使用。开始了：

```
SELECT employees.id, employees.name
FROM employees 
    INNER JOIN employees_tasks ON employees.id = employees_tasks.employee_id
    INNER JOIN tasks ON employees_tasks.task_id = tasks.id
WHERE
    tasks.name = ALL
    (SELECT DISTINCT name
    FROM tasks
    WHERE name LIKE 'Programming' OR name LIKE 'Support') 
```

但是我收到这个查询NULL，虽然有一个员工，他有两个任务：约翰！

如何实现这样的查询？

最好的问候克里斯蒂安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T11:45:59.413

您需要再次加入`employees_tasks`您的查询：

```
SELECT employees.id, employees.name
FROM employees
  INNER JOIN employees_tasks AS et1 ON employees.id = et1.employee_id
  INNER JOIN employees_tasks AS et2 ON employees.id = et2.employee_id
  INNER JOIN tasks AS t1 ON et1.task_id = t1.id AND t1.name = 'Programming'
  INNER JOIN tasks AS t2 ON et2.task_id = t2.id AND t2.name = 'Support' 
```

* * *

**更新**

或者，如果您仅针对感兴趣的任务过滤结果，您可以`GROUP BY`雇佣并仅返回具有所需任务计数的人：

```
SELECT   employees.id, employees.name
FROM     employees
  INNER JOIN employees_tasks ON employees_tasks.employee_id = employees.id
  INNER JOIN tasks           ON employees_tasks.task_id     = tasks.id
WHERE    tasks.name IN ('Programming', 'Support')
GROUP BY employees.id, employees.name
HAVING   COUNT(DISTINCT tasks.id) = 2 
```

# windows-phone-7 - Listpicker：触发SelectionChanged

> ID：10533274
> 
> 赞同：0
> 
> 时间：2012-05-10T11:43:39.743
> 
> 标签：windows-phone-7, selectionchanged, listpicker

我正在手动设置***selecteditem***

```
public pageXXXX()
        {

            InitializeComponent();

            this.cargaLista();
        }

private void cargaLista()
{
    this.lPickTipo.SelectedItem = this.lPickTipo.Items.OfType<tipos>().First(i => i.tipo == varString);

    // here i load other data 
    //

} 
```

好的。运行良好。

但我的问题是**selectionchanged**事件最后触发，而不是当我手动设置**SelectedItem**

这对我来说是个问题。因为我在“ **SelectionChanged** ”事件中运行 calc 并且我需要在**选择**item 时运行 calc因为其他功能取决于此结果

```
 private void lPickTipo_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                try
                {
                    if (this.lPickTipo.SelectedItem != null)
                    {
                        if (lPickTipo.SelectedIndex > -1)
                        {
                            this.calcularTotales();
                        }
                    }
                }
                catch (Exception EXC)
                { // CACTHING }

            } 
```

为什么最后是火？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:42:53.157

由于您无法更改引发系统级事件的顺序，因此您需要更改逻辑以说明平台的功能。
由于您没有提供任何关于您实际基于选择的信息，或者为什么它需要在选择更改后触发页面（大概）级别事件，因此很难更具体。

# c# - 允许用户下载文件

> ID：10533278
> 
> 赞同：4
> 
> 时间：2012-05-10T11:43:50.727
> 
> 标签：c#, asp.net

我正在处理图片库，在浏览图片模块上，我有一个下载图标。我需要它充当下载按钮。当用户点击它时，他们应该会看到保存文件对话框，或者应该使用他们的默认浏览器下载设置下载文件。

我尝试了很多方法，但没有运气。

*   下载图标出现在模态弹出窗口中，因此所有代码都包含在 UpdatePannel 中

*   这些图像具有不同的格式（jpeg、gif、tif、psd）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:48:00.880

查看[http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)或[在 ASP.NET 中流式传输文件的最佳方式](https://stackoverflow.com/questions/608480/best-way-to-stream-files-in-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:51:57.100

最后整理出来：

A) 在客户端位置下载文件：

```
public void downloadFile(string fileName, string filePath)
    {
        Response.ContentType = "application/octet-stream";
        Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
        Response.WriteFile(filePath + fileName);
    } 
```

B）由于触发控件（`imgDownload`，`imgDownloadPsd`）的函数被包装在异步调用下：将其添加到页面加载：

```
protected void Page_Load(object sender, EventArgs e)
{   ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(imgDownload);
    ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(imgDownloadPsd);
} 
```

# android - onActivityResult 中的数据为空

> ID：10533280
> 
> 赞同：24
> 
> 时间：2012-05-10T11:43:54.683
> 
> 标签：android, android-intent

我正在尝试为`Android`. 我有两个活动（`A`和`B`）。在`B`我只想选择一个`date`.

我开始`A`，然后做：

```
 Intent intent = new Intent();
 intent.setClass(this, B.class);
 startActivityForResult(intent,1); 
```

然后，在 中`B`，我这样做：

```
 Intent intent = getIntent();
 setResult(RESULT_OK);
 intent.putExtra("Date",dateSelected);
 finish(); 
```

而且，在 中`A`，我有下一个方法：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     super.onActivityResult(requestCode, resultCode, data);
     if(resultCode==RESULT_OK && requestCode==1){
        Bundle bundle = getIntent().getExtras();
        String aux = bundle.getString("nuevo");
        .....
    } 
```

但是`data`和`bundle`是`null`。当我调试代码时，我看到在类`B`中`intent`有`Extras`，但是当我调用`finish()`并返回时`class A`，这`intent`是无法访问的。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-10T12:05:02.590

try this:

Then, in B, I do:

```
Intent intent = getIntent();
intent.putExtra("Date",dateSelected);
setResult(RESULT_OK, intent);
finish(); 
```

And, in A:

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == RESULT_OK && requestCode==1) {
        Bundle MBuddle = data.getExtras();
        String MMessage = MBuddle.getString("Date");
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T11:49:18.213

在`A`onActivityResult 方法中

```
 if(null!=data){

    Bundle bundle = data.getExtras();
    String mydate = bundle.getString("Date");

   } 
```

并且在`B`

```
Intent returnIntent = new Intent();
returnIntent.putExtra("Date",dateSelected);
setResult(RESULT_OK,returnIntent);      
finish(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T03:41:32.950

我知道这已得到解答，但只是为了对错误进行更多解释，您使用的是`getIntent()`而不是`data`回调中收到的元素。

`getIntent()`返回最初用于打开**Activity A**的 Intent （可能是当您打开应用程序或从另一个 Activity 时），并且`data`是**Activity B**作为响应参数返回的 Intent。

此外，您`getIntent()`在**Activity B**中使用，而不是创建将返回给 Activity A 的新 Intent。

```
Intent returnIntent = new Intent(); 
```

最后，必须将创建的意图添加到`setResult`

```
setResult(RESULT_OK,returnIntent); 
```

# android - 如何在 android 偏好设置中转义“%”

> ID：10533286
> 
> 赞同：2
> 
> 时间：2012-05-10T11:44:20.147
> 
> 标签：android, xml, string, android-preferences

我已阅读此线程[FATAL EXCEPTION main Android App](https://stackoverflow.com/questions/8125524/fatal-exception-main-android-app)，它非常有帮助。

是的，这很好用

```
<string formatted="false">some text and % in the text</string> 
```

因此，如果有人使用 xml，则 formatted="false" 是解决方案。

但是我的代码有问题

```
getPreferenceScreen().findPreference("my_key").setSummary("some text and % in the text")); 
```

这引发了一个例外，有人知道我怎样才能逃脱 % 吗？

因此，当调用 String.format() 时，% 将被视为 '%' 而不是特殊字符

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T11:48:22.877

只需加倍！不要使用百分之一，而是使用两个。像这样。

```
setSummary("some text and %% in the text") 
```

# c# - C# 文本框检查

> ID：10533287
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:44:20.140
> 
> 标签：c#

我正在尝试测试 my 的内容`textBox`是否等于零，我有两个`textBox`具有相同的值。我想确保用户不能继续，除非我`textBox`的一个等于零。尝试了一些方法但没有奏效。我试过这个：

```
double amount;
amount = double.Parse(transactDisplay.Text.ToString());
if (amount > 0)
{
    MessageBox.Show("Please pay before proceding", "Money not paid",
                                    MessageBoxButtons.OK, MessageBoxIcon.Stop);

} 
```

但它不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:50:33.460

文本框的 Text 属性返回一个字符串，因此您必须确保它是一个数字并尝试对其进行转换。你可以使用这样的东西：

```
double amount;
if (double.TryParse(transactDisplay.Text.Trim(), out amount) && amount <= 0)
{
    MessageBox.Show("Please pay before proceding", "Money not paid", MessageBoxButtons.OK, MessageBoxIcon.Stop);
    return;
}
else 
{
   MessageBox.Show("Please add amount greater than 0.", "Money not paid", MessageBoxButtons.OK, MessageBoxIcon.Stop);
   return;
} 
```

如果转换未通过，则不会测试第二个条件（数量 <= 0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:01:15.330

如果您打算只使用数字，您应该使用 NumericUpDown 控件，这将确保用户不会错误地键入字母。NumericUpDown 控件还具有*DecimalPlaces*属性，因此它们适合大多数情况。

```
private void button1_Click(object sender, EventArgs e)
{
    if (ValueNotZero(numericUpDown1) && ValueNotZero(numericUpDown2))
        MessageBox.Show("You forgot to pay!");
    else if (!ValueNotZero(numericUpDown1) && !ValueNotZero(numericUpDown2))
        MessageBox.Show("One of the values must not be Zero!");
}

private bool ValueNotZero(NumericUpDown numericControl)
{
    return (double)numericControl.Value > 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:49:55.640

```
double amount = double.Parse(transactDisplay.Text); 
if (amount != 0) 
{ 
    MessageBox.Show("Please pay before proceding", "Money not paid", 
    MessageBoxButtons.OK, MessageBoxIcon.Stop); 
} 
```

如果它不等于零，则标记该消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:50:39.310

尝试这个：

```
double amount;
if (double.TryParse(transactDisplay.Text, out amount) && amount > 0) {
    MessageBox.Show("Please pay before proceding", "Money not paid",
                    MessageBoxButtons.OK, MessageBoxIcon.Stop);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:48:01.627

最好的方法是使用验证事件，该事件旨在让您测试控件的值。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)

您还可以使用 ErrorProvider 显示错误消息：http: [//msdn.microsoft.com/fr-fr/library/95ysxkwy%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/95ysxkwy%28v=vs.80%29.aspx)

# asp.net - 经常更新的gridview

> ID：10533288
> 
> 赞同：0
> 
> 时间：2012-05-10T11:44:24.250
> 
> 标签：asp.net, ajax, gridview

我有一个`ASP.NET` `gridview`显示数据库中的一些条目。条目需要非常频繁地更新（如果数据库发生修改，应在最多 3 秒内反映在 asp.net 网站上）。

我正在考虑的解决方案是将`gridview`更新面板放入内部并每 3 秒刷新一次页面。有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:26:01.837

通过在更新面板中使用计时器，您可以执行该更新操作。例如..

```
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <div>
            <asp:Timer ID="Timer1" OnTick="Timer1_Tick" runat="server" Interval="10000">
            </asp:Timer>
        </div>
        <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
            </Triggers>
            <ContentTemplate>
                <asp:Label ID="Label1" runat="server" Text="UpdatePanel1 not refreshed yet."></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel2" UpdateMode="Conditional" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
            </Triggers>
            <ContentTemplate>
                <asp:Label ID="Label2" runat="server" Text="UpdatePanel2 not refreshed yet."></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>

    </form> 
```

而不是标签控制你可以使用gridview。

# windows - 在 64 位 Windows 上运行 Grobid

> ID：10533290
> 
> 赞同：2
> 
> 时间：2012-05-10T11:44:37.483
> 
> 标签：windows, jvm, 32bit-64bit, grobid

我正在尝试在 64 位 Windows 上执行[GROBID 。](http://sourceforge.net/projects/grobid/)

没有适用于 Windows 的库的 x64 位版本（至少我找不到）。它在带有 64 位 JRE 的 64 位 Linux 和带有 32 位 JRE 的 32 位 Windows 上运行。所以JRE的版本不是问题。

我了解我需要包含 64 位 Windows - libcrfpp 文件。但是我找不到它。你能告诉我在哪里可以找到它或帮助我执行它吗？

但是我收到如下错误 -

尝试在 Windows 64 上使用 64 位 JVM 运行它时出错 -

```
Exception in thread "main" java.lang.ExceptionInInitializerError
        at org.grobid.core.main.GrobidParser.<clinit>(GrobidParser.java:22)
        at org.pushpin.main.Main.main(Main.java:138)
   Caused by: java.lang.RuntimeException: Unable to find a native CRF++ library: Folder <FOLDER>\GROBID_HOME\.\lib\win-64 does not exist
        at org.grobid.core.main.LibraryLoader.load(LibraryLoader.java:21)
        at org.grobid.core.impl.GrobidFactoryImpl.init(GrobidFactoryImpl.java:35)
        at org.grobid.core.impl.GrobidFactoryImpl.newInstance(GrobidFactoryImpl.java:22)
        at org.grobid.core.impl.GrobidFactoryImpl.instance(GrobidFactoryImpl.java:14)
        at org.grobid.core.GrobidFactory.<clinit>(GrobidFactory.java:13)
        ... 2 more 
```

**尝试在 Windows 64 上使用 32 位 JVM 运行它时出现**更新错误 -****

 **```
Caused by: java.io.IOException: Cannot run program "<project path i have removed it>\lib/pdftoxml": CreateProcess error=193, %1 is not a valid Win32 application
at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
at java.lang.Runtime.exec(Runtime.java:615)
at java.lang.Runtime.exec(Runtime.java:448)
at java.lang.Runtime.exec(Runtime.java:345)
at org.grobid.core.document.Document.pdf2xml(Document.java:217)
at org.grobid.core.engines.HeaderParser.processing(HeaderParser.java:86) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:31:43.050

无法从 64 位 JVM 加载 32 位本机库。

*   [在 64 位机器上使用 32 位 dll](https://stackoverflow.com/questions/5711748/using-a-32-bit-dll-on-a-64-bit-machine)

但是您可以在 64 位 Windows 上安装 32 位 JVM 并运行使用 32 位本机库的 Java 应用程序。

*   [是否可以在 Windows 7 上同时安装 32 位和 64 位 Java？](https://stackoverflow.com/questions/5272216/is-it-possible-to-install-both-32bit-and-64bit-java-on-windows-7)
*   [如何在 64 位机器上运行为 32 位制作的 API？](https://stackoverflow.com/questions/9379040/how-to-run-an-api-made-for-32-bit-on-a-64-bit-machine)

**更新：**

这是应用程序启动器的摘录

```
private static String getLibraryFolder() {
    String osPart = System.getProperty("os.name").replace(" ", "").toLowerCase().substring(0, 3);
    String archPart = System.getProperty("sun.arch.data.model");
    //todo: change to fetching the basic dir from GrobidProperties object
    return String.format("%s/%s-%s", GrobidProperties.getInstance().getNativeLibraryPath().getAbsolutePath(),
            osPart, archPart);
} 
```

应用程序正在检查属性`sun.arch.data.model`以获取本机库文件夹。如果你在 64 位 Windows 中使用 32 位 JVM，你会得到

```
java.home=C:\Program Files (x86)\Java\jre7
os.arch=x86
os.name=Windows 7
sun.arch.data.model=32 
```

因此，使用 32 位 JRE 执行应用程序将从`<FOLDER>\GROBID_HOME\.\lib\win-32`

**更新：** 使用 32 位 JRE 时出现的错误与 JVM 架构无关。您应该`pdf2xml`正确安装和配置您的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T10:09:22.020

我写在这里只是为了通知您，我们已经为 Windows 64 位集成了 Wapiti 的移植版本。

如果您仍然有兴趣尝试，您可以从[master](https://github.com/kermitt2/grobid)下载/更新 Grobid 开发版本。

pdf2xml 的问题以及使用 Windows 测试时出现的其他小错误已得到解决。批处理和服务模式都工作得很好。对本地运行的不同 Windows 版本进行更密集的测试会很棒。

您可以跟进进度并报告[相关问题](https://github.com/kermitt2/grobid/issues/74)的最终问题或错误。**

# javascript - ASP Html.BeginForm 多个提交按钮 - 在没有 JQuery 的情况下添加自定义确认

> ID：10533294
> 
> 赞同：0
> 
> 时间：2012-05-10T11:44:50.417
> 
> 标签：javascript, asp.net, button, submit, confirmation

我正在创建一个无法使用 JQuery 并使用自定义弹出对话框的 asp Web 应用程序。

我使用以下方法创建表单：

```
<% using (Html.BeginForm("Index", "recordsbook", FormMethod.Post, new { id = "SubmitForm" })){%> 
```

我有提交按钮：

```
<td><input type="submit" value="Next"  name="SubmitButton"/></td>
<td><input type="submit" value="Previous"  name="SubmitButton" /></td>
<td><input type="submit" value="First"  name="SubmitButton" /></td>
<td><input type="submit" value="Last"  name="SubmitButton" /></td>
<td><input type="submit" value="Add Record"  name="SubmitButton"/></td>
<td><input type="submit" value="Delete Record"  name="SubmitButton"/></td> 
```

我想为删除记录提交按钮添加一个确认对话框。出于某种原因，当我将 onsubmit 事件添加到输入时，它会被跳过。如果我将 onsubmit 更改为 onclick，则会弹出确认对话框，但后台提交过程并行发生并刷新页面。

如何将 onsubmit 确认对话框添加到仅删除记录提交按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:47:03.807

我相信onclick需要返回false才能停止提交

# python - 如何在django中获取视图函数的url路径

> ID：10533302
> 
> 赞同：26
> 
> 时间：2012-05-10T11:45:24.987
> 
> 标签：python, django

举个例子：

视图.py

```
def view1( request ):
    return HttpResponse( "just a test..." ) 
```

网址.py

```
urlpatterns = patterns('',
    url( r'^view1$', 'app1.view.view1'),
) 
```

我想获取`view1`. 我怎样才能做到这一点。我想避免对任何 URL 路径进行硬编码，例如“xxx/view1”。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-10T11:49:43.497

你需要[`reverse`](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls).

```
from django.urls import reverse

reverse('app1.view.view1') 
```

如果您想找出 URL 并重定向到它，请使用[`redirect`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

```
from django.urls import redirect 

redirect('app1.view.view1') 
```

如果想要更进一步并且也不对视图名称进行硬编码，您可以[命名您的 URL 模式](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)并使用这些名称。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-10T11:53:27.603

这取决于您是否要获取它，如果您想在视图（python 代码）中获取 url，您可以使用`reverse`函数（[文档](https://docs.djangoproject.com/en/dev/topics/http/urls/#django.core.urlresolvers.reverse)）：

```
reverse('admin:app_list', kwargs={'app_label': 'auth'}) 
```

如果想在模板中使用它，那么您可以使用`url`标签（[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)）：

```
{% url 'path.to.some_view' v1 v2 %} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T12:03:27.820

如果您希望将 view1 的 url 放入 view1 中，最好是 request.get_path()

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T12:04:40.157

正如其他人所说，`reverse`功能和`url`模板标签可以（应该）用于此目的。

我建议为您的 url 模式添加一个名称

```
urlpatterns = patterns('',
    url( r'^view1$', 'app1.view.view1', name='view1'),
) 
```

并通过这个名字扭转它

```
reverse('view1') 
```

这将使您的代码更容易重构

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-21T11:40:41.870

是的，你当然可以得到名为“view1”的视图的 url 路径，而无需对 url 进行硬编码。

您需要做的就是 - 只需从 Django urlresolvers 导入“反向”功能。

只需看下面的示例代码：

```
from django.core.urlresolvers import reverse

from django.http import HttpResponseRedirect

def some_redirect_fun(request):

    return HttpResponseRedirect(reverse('view-name')) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T11:50:24.530

您可以为此使用[反向](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)功能。您可以分别为 url-includes 和 urls 指定命名空间和名称，以使重构更容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-13T08:18:39.103

***通用方法***

0.  安装[Django 扩展](https://github.com/django-extensions/django-extensions)并将其添加到 INSTALLED_APPS

1.  生成一个包含所有 URL 和相应视图函数的文本文件

`./manage.py show_urls --format pretty-json --settings=<path-to-settings> > urls.txt`

像

`./manage.py show_urls --format pretty-json --settings=settings2.testing > urls.txt`

2.  在输出文件中查找您的 URL`urls.txt`

```
 {
        "url": "/v3/blockdocuments/<pk>/",
        "module": "api.views.ganeditor.BlockDocumentViewSet",
        "name": "block-documents-detail",
    }, 
```

# java - OpenGL中的字体度量

> ID：10533303
> 
> 赞同：0
> 
> 时间：2012-05-10T11:45:27.700
> 
> 标签：java, opengl, fonts, fontmetrics, metric

有没有像 Java (FontMetrics) 中的字体度量？

前任：

```
FontMetrics fm = g2.getFontMetrics();
Rectangle2D rect = fm.getStringBounds(node.getText(), g2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T11:50:00.710

这不依赖于 OpenGL，而是依赖于提供字体的库，因为 OpenGL 没有本机文本渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:31:55.107

不，文本度量和光栅化本身就是一个复杂的问题。一个很好的免费库是 FreeType2。使用它，您可以加载字体，获取其指标，并将其光栅化为内存中的位图。

然后，使用 OpenGL，您可以将该位图存储在纹理中，并使用它（带有度量）来渲染文本。

# ios - 点击很多按钮时 UITextField 失败

> ID：10533308
> 
> 赞同：0
> 
> 时间：2012-05-10T11:45:42.640
> 
> 标签：ios, xcode, uitextfield

我的 ios 应用程序中有搜索功能。我只是以这种方式比较用户键入的字符串和目标字符串：

```
if (!([name rangeOfString:searchText].location == NSNotFound) || !([description rangeOfString:searchText].location == NSNotFound)) 
```

![在此处输入图像描述](../Images/9f7b5f132146114e7afbf0f07511d4e0.png)

但是当我点击多个按钮时，我的应用程序会在这个地方崩溃。

有时会出现这个错误：

```
 MyApp [2407:6bf7] -[__NSCFSet length]: unrecognized selector sent to instance 0x4f71c0
 MyApp [2407:6bf7] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFSet length]: unrecognized selector sent to instance 0x4f71c0' 
```

关于这两个错误的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:13:21.433

此日志显示您正在向过度释放的对象发送消息。因此它不能返回值并且向它发送消息会崩溃。您应该在方案中允许 NSZombies（按编辑方案）您可以发布更多代码吗？显示你释放的地方，你有内存泄漏。正如 Shivan Raptor 也说 UITextField 是`autoreleased`

如果你是或者 UITextField 是自动释放的并且你正在向它发送释放，请摆脱对`release` 代码的扫描，还构建和分析以检查内存泄漏......

# android - 将活动添加到 queryIntentActivity 列表

> ID：10533312
> 
> 赞同：0
> 
> 时间：2012-05-10T11:46:01.957
> 
> 标签：android, android-intent, installed-applications

我有我的 android 应用程序，它通过 - 获取所有已安装的应用程序`queryIntentActivities` 。

而且我需要能够将自己的活动添加到此列表中，所以我可以开始它，当挑选此活动时，我该怎么办？

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:00:26.000

实现一个与`<intent-filter>`您正在创建`<activity>`的匹配的。`Intent`类似于：

```
 <intent-filter>
            <action android:name="android.intent.action.SEND"/>
            <action android:name="android.intent.action.SEND_MULTIPLE"/>
            <data android:mimeType="???"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter> 
```

（我猜哪里`???`会被任何东西取代`APP_DEFALUT_MIME_TYPE`）

# ios - iOS - 正则表达式 - 搜索所有出现前缀的单词

> ID：10533317
> 
> 赞同：0
> 
> 时间：2012-05-10T11:46:34.507
> 
> 标签：ios, regex

我正在使用 iPhone SDK，需要帮助。

我有以下一系列搜索词：

```
f, f, last, m 
```

还有一个字符串（为了方便起见，前几位只是索引）：

```
0         10         21       30             45
firstname middlename lastname firstnameagain firstnomatch 
```

预期结果范围（位置、长度）： (0, 1) (30, 1) (21, 4) (10, 1)

我想要一个匹配字符串中所有搜索词的正则表达式，但前提是它们是单词的前缀。当搜索词出现 N 次时，它将仅匹配前 N 个前缀（在示例中，“f”输入了两次，因此未返回 (45, 1) 处的可能匹配）。

我尝试编写许多可能的正则表达式，但都未能与正确的结果匹配。我得出的结论是不能使用“\b”元字符，因为字符串可以包含与字母相邻的非单词字符（“firstname#”、“?lastName”、...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:09:57.450

我不确定这仅仅是一个正则表达式的工作。

这可以通过使用或不使用正则表达式来完成，方法是用空格分解字符串，然后根据剩余前缀列表检查每个字符串。

您保留一个前缀列表，如下所示：

```
[f, f, last, m] 
```

当您匹配**firstname**时，您会删除找到的前缀。在这种情况下，您删除 f：

```
[f, last, m] 
```

当您再次匹配**firstnameagain**时，您再次删除 f，并且不再尝试匹配 f：

```
[last, m] 
```

To perform the search, you could iterate through the array of search prefixes and use the NSString rangeOfString function to see if the search prefix is at the front. If you still want to use a regex, you can match against:

```
@"^(f|f|last|m)" 
```

As you match prefixes, remove them from the array, then remake the regex.

# cakephp - Miles J Cakephp 论坛插件 - 有时错误“找不到类‘ForumAppController’”

> ID：10533319
> 
> 赞同：1
> 
> 时间：2012-05-10T11:46:34.377
> 
> 标签：cakephp, cakephp-2.0, forum

我从[http://milesj.me/blog/read/changelog-forum-3.1](http://milesj.me/blog/read/changelog-forum-3.1)集成了 Miles johnson **Cakephp 论坛插件**。在我的项目中（cakephp 2.0）。我遵循了他的文档。

我整合成功。它工作正常，但有时当我访问我的项目用户控制器时，它会引发以下错误

```
Fatal error: Class 'ForumAppController' not found in /var/www/projectname/app/Plugin/Forum/Controller/UsersController.php on line 11 
```

如果我刷新多次然后它会工作

从论坛插件我试图访问我的项目的用户控制器，而不是论坛插件用户控制器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:12:47.123

根据作者的回答，我在 Plugins Users 控制器中添加了以下行：

```
App::uses('ForumAppController', 'Forum.Controller'); 
```

# jquery - 使用数据变量影响对话框

> ID：10533320
> 
> 赞同：0
> 
> 时间：2012-05-10T11:46:35.113
> 
> 标签：jquery

我想要两个不同的号召性用语按钮（行和 not_row）共有的对话框。每个按钮都会设置一个不同的 data() 变量。根据设置的变量，对话框会做出不同的反应。

以下几乎可以工作。问题是如果第一次单击行，则 not_row, $(this).data('row') 保持设置，因此 if 语句不会相应地执行。一种选择是在我的点击函数中添加另一个数据变量，例如 data('type','row') 和 data('type','not_row')，但这似乎是一种浪费。

有什么建议么？

[http://jsfiddle.net/FYWY7/](http://jsfiddle.net/FYWY7/)

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Dialogs</title>
<link type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/smoothness/jquery-ui.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" language="javascript"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" language="javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#not_row").click(function(){$("#dialog").data('id',$(this)).dialog("open");});
    $("#row").click(function(){$("#dialog").data('row',$(this)).dialog("open");});

    $("#dialog").dialog({
        autoOpen    : false,
        resizable   : false,
        height      : 330,
        width       : 430, 
        modal       : true,
        buttons: [
        {
            text    : 'CLICK',
            click   : function() {
                $(this).dialog("close");
                if($(this).data('row')) {alert('row');}
                else {alert('not row');}
            }
        }
        ]
    });

});
</script>
</head>
<body>
<input type="button" value="row" id="row" data-bla="whatever" />
<input type="button" value="not_row" id="not_row" data-bla="whatever" />
<div id="dialog"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:09:11.687

这是我的解决方案。此脚本的目的是删除记录。如果在主页上，则传递 ID，删除记录，然后重新加载页面。或者您可以从列表中删除一行，因此将包含 ID 的行作为属性传递，删除记录，然后从 DOM 中删除该行。我的解决方案是检查传递的变量是对象还是数字（字符串）。

PS。谢谢拉维

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Dialogs</title>
<link type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/smoothness/jquery-ui.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" language="javascript"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" language="javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#not_row").click(function(){$("#dialog").data('id',$(this).attr('data-id')).dialog("open");});
    $("#row").click(function(){$("#dialog").data('row',$(this)).dialog("open");});

    $("#dialog").dialog({
        autoOpen    : false,
        resizable   : false,
        height      : 330,
        width       : 430, 
        modal       : true,
        buttons: [
        {
            text    : 'CLICK',
            click   : function() {
                $(this).dialog("close");
                if(typeof $(this).data('i') == "object") {alert('Delete record and delete row');}
                else {alert('Delete record and redirect');} 
            }
        }
        ]
    });

});
</script>
</head>
<body>
<input type="button" value="Delete Row" id="row" data-id='123' />
<input type="button" value="Delete ID" id="not_row" data-id='234' />
<div id="dialog"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:16:54.260

您需要将数据传递给对话框的打开功能，如下面的代码，您可以使用`data-`属性来传递值。jquery [Data()](http://api.jquery.com/jQuery.data/)方法将读取这些值。

```
$('#row').click(function()
  {
     $("#dialog").data('id',$(this).data('row')).dialog('open'); 
  });

 $('#not_row').click(function()
  {
     $("#dialog").data('id',$(this).data('row')).dialog('open'); 
  }); 
```

工作演示：[JsFiddle 演示](http://jsfiddle.net/FYWY7/9/)

# c++ - mktime 和 tm_isdst 标志

> ID：10533322
> 
> 赞同：9
> 
> 时间：2012-05-10T11:46:47.880
> 
> 标签：c++

我对 tm 结构中 tm_isdst 标志的使用有以下疑问。根据手册页和谷歌搜索结果，我了解它的值解释如下

A. 值 0 表示 DST 在指定时间内无效

B. 值为 1 表示 DST 有效

C. 值为 -1 会使 mktime 检查 DST 是否生效。

正是这第三点让我感到困惑。我的疑问是 mktime 如何确定是否必须准确应用 DST。

例如

```
My Time Zone = GMT + 3:00
DST shifting = +1 Hour at 5:00 AM in January (to keep it simple)
Current UTC time = "01/Jan/2012 00:00:00"
UTC time in seconds time_t timetUTC = X seconds
Hence my time is = "01/Jan/2012 03:00:00" 
```

随着时间的推移，我的时间值变化如下

```
"01/Jan/2012 04:00:00"            (X + 1 * 60 * 60)
"01/Jan/2012 05:00:00"            (X + 2 * 60 * 60)
"01/Jan/2012 05:59:59"            (X + 2 * 60 * 60 + 59)
"01/Jan/2012 05:00:00"            (X + 3 * 60 * 60)
"01/Jan/2012 06:00:00"            (X + 4 * 60 * 60) 
```

据我了解

```
tm tmMyTime = localtime_r(X + 2 * 60 * 60) will set tmMyTime.tm_isdst to 0
tm tmMyTime = localtime_r(X + 3 * 60 * 60) will set tmMyTime.tm_isdst to 1 
```

这样，即使 tm 结构的所有其他组件在这两种情况下都是相等的，mktime(tmMyTime) 也可以返回正确的 UTC 值，具体取决于 tm_isdst 值。

现在，如果我设置 tmMyTime.tm_isdst = -1，mktime 会返回什么值？我阅读了有关 TZ 变量、时间数据库等的信息。尽管如此，从逻辑上讲，mktime() 如何确定是否对可能出现两次的 tm 值应用 DST 校正？

我们的时区没有夏令时。因此，我不太确定我的理解是否正确。如果我错了，请纠正我。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T13:41:57.570

简而言之：它依赖于实现。

mktime 通过检查语言环境来了解 DST 规则。

对于一年中的大部分时间，mktime 可以确定是否将 DST 应用于特定的本地时间。问题确实是 DST 向后移动的“重复”小时（在您的示例中为 05:00:00 - 05:59:59）。对于这个本地时间范围，给定 tm_isdst = -1，mktime 无法知道 DST 是否生效。选择其中哪一个，因一种实现方式而异。使用 GNU 版本的 mktime，将返回班次前的 UTC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T11:26:36.973

`tm_isdst`一般不能解决模棱两可的时代。那是因为许多时区都有转换（一次性）而没有从`dst`to跳转`nodst`，只是改变了偏移量和区域缩写。因此，两次（过渡前后）都具有相同的`tm_isdst`. 切换夏季/冬季时间时，其他一些区域会发生变化`tm_isdst`，但不会更改缩写（例如澳大利亚/墨尔本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T18:37:25.750

我认为这将在某种程度上取决于您的平台。至少在 Windows 中，mktime() 文档指出“C 运行时库假定美国实施夏令时计算的规则”，因此它在某处有一个规则表，可以确定 DST 何时开始/在任何一年结束。

你很幸运，你所在的地方没有夏令时。在我的实时数据采集和呈现的世界里，夏令时是个大麻烦！

# php - 教义2极端优化

> ID：10533325
> 
> 赞同：7
> 
> 时间：2012-05-10T11:47:27.927
> 
> 标签：php, performance, zend-framework, doctrine-orm

我目前正在使用 Zend 框架 1.11.11 和 Doctrine 2.2 构建一个 Web 应用程序。我搜索了很多优化所用框架的最佳方法和技巧。

在我搜索 Zend 框架优化的过程中，我偶然发现了这篇文章： [优化 Zend 框架](https://stackoverflow.com/questions/4708754/optimising-the-zend-framework)

有趣的是，它提到了一些从框架本身的使用中出现的优化技术，并且在手册本身中没有涉及，例如：

*   禁用 viewRenderer 并自己处理视图渲染。

现在我正在寻找可以应用于 Doctrine 2 的类似技术，而不是[手册](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/improving-performance.html)中提到的那些。

**笔记**

我知道很多人会提到分析查询、缓存和查找应用程序的瓶颈，但这不是我们要寻找的 :) 我正在寻找在 Doctrine 2 使用期间发现的实用增强功能。

谢谢 ;）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T12:04:09.977

Well, optimizing and hacking Doctrine 2 will not be an easy task. I can only advise you to follow the official "best practice":

*   Use Query Cache
*   Use Metadata Cache
*   Pre-generate proxies
*   Avoid listeners (or merge them by event type (flush, update), it will avoid the lookup time and the loop for subscribed events)
*   Use lazy-loading whenever it is possible
*   Make sure your relationships or inheritance are not messed up

(Note that I didn't mentioned Result cache which should **not** be a way to optimize an application)

From my use, the most important part I had to optimize was not Doctrine itself (while there are optimizations to do to the core) but the generated Query, as always, I `EXPLAIN`ed the queries and optimized indexes.

Doctrine 2 can be high memory consuming so loading a lot of entities at once may slow down your application, you may find it useful to known about `clear()`, `detach()`, `iterate()` methods.

Despite the fact Doctrine 2 can sometimes be slow, I mostly noticed that I was able to optimize application somewhere else, within the Zend Framework or PHP themselves.

Let's say, Doctrine 2 takes 100ms where Zend Framework takes 300ms for a total of 450ms (I/O stuffs, PHP internal functions, etc..)

If you can divide easily by two the time taken by Zend Framework, optimizing Doctrine 2 to gain like 10% will not increase notably the speed of your application. Think about it twice.

Here are a few tips:

*   Create your own view instead of using View Helpers (avoid the helper lookup)
*   Cache your Zend_Config object (really heavy load)
*   Avoid Regex routes whenever possible (ZF routes are a big bottleneck)
*   Use a ClassMap autoloader instead of the native Zend_Loader_Autoloader

There are tons of optimization to do, some have a real impact while others don't.

Make sure to find them by profiling your application, an easy and cross-platform is to use [webgrind](http://code.google.com/p/webgrind/).

# jquery - DOM 大小会影响 $("#id") 性能吗？

> ID：10533330
> 
> 赞同：3
> 
> 时间：2012-05-10T11:47:37.817
> 
> 标签：jquery, performance, dom, jquery-selectors

我想知道 DOM 的大小是否会影响按 ID 选择元素的性能。

我正在考虑将通过 ajax 加载的内容存储在 DOM 中，并在不再需要时将其隐藏。这样我可以在需要时显示它。这当然会使 DOM 膨胀，所以如果它对按 ID 选择有负面的性能影响，我不想这样做。（因为性能是我的首要目标）。

# jquery - 如何根据浏览器当前的文化加载这个 datejs 文化文件？

> ID：10533332
> 
> 赞同：0
> 
> 时间：2012-05-10T11:47:48.787
> 
> 标签：jquery

我想根据当前浏览器文化更改日期格式。

在我的项目中，我使用了[date.js](http://www.datejs.com/)库，其中包含近 150 个 hte 形式的文化特定文件，date-en-us.js date-de-de.js 等。

所以，我试图从 java 脚本中获取浏览器的文化，如下所示：

navigator.userLanguage 或 navigator.language

上面对于某些文化正确地返回了像“en-us”这样的“lang-country”代码，但对于像法语这样的其他文化则不正确，它只返回“fr”。

那么，如何确保始终从浏览器文化中获得“lang-contry”，以便可以从服务器加载适当的 date-lang-country.js 文件？

# c - 如何从 Windows 内核获取电池电量通知？

> ID：10533336
> 
> 赞同：0
> 
> 时间：2012-05-10T11:48:07.663
> 
> 标签：c, windows, winapi, power-management

我需要用 C 语言编写代码，以便在笔记本电脑电池电量不足时指示并通知我。我知道我可以使用以下内容：

```
BOOL WINAPI GetSystemPowerStatus(
    __out  LPSYSTEM_POWER_STATUS lpSystemPowerStatus
    ); 
```

但是我想向操作系统发送一个功能，当电量不足时会通知我。

我想在我的代码中有一个“空”循环，当电池电量不足时，代码会向我发送通知（`printf`或`trace`）。

我想我应该使用内核函数，但我找不到它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:58:44.157

我从未使用过这些 API，但您正在寻找的似乎是[`WM_POWERBROADCAST`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373247.aspx).

您可以在收到该消息时检查各种值`wParam`，例如`PBT_APMBATTERYLOW`. 当您收到`WM_POWERBROADCAST`具有适当`wParam`值的消息时，[`GetSystemPowerStatus()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372693.aspx)从那里调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:38:43.020

在内核中，有一个单独的方法来处理电源状态更新。有关信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565766%28v=vs.85%29.aspx)。

> 如果您正在编写可能受电源状态更改影响的驱动程序，则您必须能够在驱动程序代码中处理以下类型的信息：

等等

# windows-8 - Windows 8 HTML / JavaScript Metro 应用程序中的双向绑定

> ID：10533342
> 
> 赞同：4
> 
> 时间：2012-05-10T11:48:27.523
> 
> 标签：windows-8, windows-runtime, winjs

我正在尝试在我的 JavaScript ViewModel 中的输入字段和字段之间实现双向绑定。绑定已以声明方式连接。不幸的是，我在 UI 中所做的更改并没有反映在我的 ViewModel 中。

我的代码看起来像那样（写在我的脑海里，因为我这里没有代码）

**看法：**

```
<form data-win-bind="onsubmit: onCalculate">

<div class="field">
    Product Name:
    <input type ="number" data-win-bind="text:value1"/>
</div>
<div class="field">
    Product Price:
    <input type ="number" data-win-bind="text:value2"/>
</div>
<div class="field">
    Result
    <br />
    <span data-win-bind="innerText: result" />
</div>
</form> 
```

**JavaScript**

```
var model= WinJS.Class.define(
function() {
          this.onCalculate = calculate.bind(this);
          this.value1 = 0;
          this.value2 = 0;
          this.result = 0; 
          },{
            value1: 0,
            value2: 0,
            result: 0
            calculate: function() {
                this.result = this.value1 + this.value2;
                return false;
            }
        }, {});
// Make the model Observable
var viewModel = WinJS.Binding.as(new model());

WinJS.Binding.processAll(null, viewModel); 
```

当我应用绑定时，用户界面会显示我的初始值。表单提交与计算功能正确连接。但是 value1 和 value2 的值不会随着用户输入而更新。

我想要实现的是让我的 JavaScript 不知道底层视图。所以我不想为 JavaScript 中的 html 输入字段连接更改事件。

有没有办法用纯 WinJS 实现这一点？到目前为止，我发现的所有示例都只进行单向绑定，并使用事件侦听器通过 UI 的更改来更新 ViewModel。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:16:55.763

WinJS 只支持 Win8 的单向绑定。有必要为 UI 元素中的更改事件连接侦听器，这就是您所看到的示例的性质。换句话说，WinJS.Binding 的声明式处理的实现不定义也不处理任何类型的双向语法。

但是，您可以自己扩展 WinJS 以提供此类支持。由于 WinJS.Binding 只是一个命名空间，您可以使用 WinJS.Namespace.define 向其中添加自己的方法（重复调用 this 是附加的）。您可以添加一个类似 processAll 的函数，该函数还将查找您自己的另一个 data-* 属性，该属性指定了 UI 元素和适用的更改事件/属性。在处理它时，您将连接一个通用事件处理程序来进行绑定。由于您拥有 WinJS 源代码（在 Visual Studio 中的“参考”下查看），您可以看到 WinJS.Binding.processAll 是如何作为模型实现的。

然后，当然，你会分享一段很棒的代码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T03:57:50.310

这篇文章提供了一个很好的解决方案： [http ://www.expressionblend.com/articles/2012/11/04/two-way-binding-in-winjs/](http://www.expressionblend.com/articles/2012/11/04/two-way-binding-in-winjs/)

# jquery - jquery如何修改日期格式

> ID：10533344
> 
> 赞同：3
> 
> 时间：2012-05-10T11:48:37.323
> 
> 标签：jquery, datetime, date, datetime-format

我收到了 `2012-01-15T13:08:33+0000`如何以其他格式更改它的日期。是否有任何 jquery 或 JavaScript 的内置函数..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:51:16.953

先[解析](http://docs.jquery.com/UI/Datepicker/parseDate)日期，然后[格式化](http://docs.jquery.com/UI/Datepicker/formatDate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:01:36.013

使用[jQuery dateFormat](http://archive.plugins.jquery.com/project/jquery-dateFormat)插件。您需要明确加载。

# android - android准确的电池电量变化？

> ID：10533346
> 
> 赞同：1
> 
> 时间：2012-05-10T11:48:51.957
> 
> 标签：android, power-management

我写了一个应用程序，我想知道它消耗了多少电池。

我正在智能手机（ACER Liquid Mt）上对其进行测试，但我只能通过电池管理器以 1% 的精度读取电池电量。

需要多次运行才能使百分比降低 1%。所以我的问题是：是否有可能获得更准确的电池电量，电池电量是否可信？

我读到一些东西，软件中的电池电量不会很准确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:12:40.573

*需要多次运行才能使百分比下降1％*并不意味着它不准确，可能是电池非常耐用。而且因为它是百分比，所以 1% 的电池电量可能是很多能量。

为了获取电池电量，我使用了 BroadcastReceiver，您可以尝试一下，看看它是否足够准确：

```
class BatteryLifeBroadcastReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        if (Intent.ACTION_BATTERY_CHANGED.equals(intent.getAction())) {

            int level = intent.getIntExtra("level", 0);
            int scale = intent.getIntExtra("scale", 100);

            int batteryLevel = (float) level / scale;
            // use batteryLevel...
        }
    }
} 

// register the receiver in Activity.onResume()
registerReceiver(mBatteryLifeBroadcastReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
// unregister it in Activity.onPause()
unregisterReceiver(mBatteryLifeBroadcastReceiver); 
```

# url - 在 url 段中表示 null

> ID：10533355
> 
> 赞同：0
> 
> 时间：2012-05-10T11:49:45.887
> 
> 标签：url

在 url 中表示空值的安全方法是什么？类似于空字符串或`null`.

附加约束：

*   它应该适用于所有 url**不**以 a 结尾的情况`/`
*   它需要作为结束段工作（常见情况）

最简单的方法是绕过它，但我的目的是将它隐藏在例程后面以避免分支代码（null 的代码，以及它不为 null 时的代码，等等）。

# javascript - 服务器破坏 javascript 文件

> ID：10533357
> 
> 赞同：0
> 
> 时间：2012-05-10T11:49:54.920
> 
> 标签：javascript

好吧，这真的很奇怪。我不是 js proffesional 所以调试这花了我将近 2 个小时。发生的是我正在用这个主题设计一个自定义 cms：

[http://templates.tricyclelabs.com/adminica/login.php](http://templates.tricyclelabs.com/adminica/login.php)

在我完成它之后，在 localhost 上一切正常。上传到服务器后，那个 IPhone 滑块不起作用。调试后，我看到我的服务器正在破坏 javascript 文件，所有内容都在一行中，这意味着如果您使用“//”，所有内容都会被注释：

```
$(function() {  // Form inputs
    $("fieldset > div > input[type=text]").addClass("text");        
    $("fieldset > div > input[type=password]").addClass("text");
    $("fieldset > div > textarea").addClass("textarea");
    $("fieldset > div > input[type=checkbox]").addClass("checkbox");
    $("fieldset > div > input[type=radio]").addClass("radio");
    $("fieldset > div > input[type=checkbox].indeterminate").prop("indeterminate", true);                   
// Textxarea Autogrow
    $('textarea.autogrow').autoGrow();              
// Dismiss alert box
    $(".alert.dismissible").click(function(){               
        $(this).animate({opacity:0},'slow',function(){              
            $(this).slideUp();
        });
    });         
// Input Datepicker Config                
    $( ".datepicker" ).datepicker({ dateFormat: 'd M yy' });;
// input Slider Config
    function slideMarkers(event,ui){                                      
        var totalLabels = $(this).children().children().size();         
        $(this).children("ol.slider_labels").children("li").css({               
        "margin-right":(100/(totalLabels-1))+"%"
        });
    }
    $( ".slider" ).slider({ 
```

您可以在此处查看文件：

[破坏的javascript](http://putuj.org/frog/admin/javascripts/adminica_forms.js)

解决方法是将该文件上传到我的其他主机。谁读得很干净，间距输入等等... [工作版本](http://dnslaktasi.com/adminica_forms.js)

所以我的问题是，有人知道这是怎么发生的吗？我的第一个主机 siteground.com 正在破坏我的 javascript 文件，而另一个没有？

这真的很令人沮丧，尤其是当你为此浪费了 2 个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:24:36.110

好吧，文本文件的行尾因系统而异。他们应该是

*   `\r\n`在 Windows 上
*   `\n`在 Unix 上
*   `\r`在 Mac 上

因此，如果您在 Windows 上编写一个文本文件并在 Unix 上打开它，您会看到正确的换行符（尽管带有“垃圾”`\r`符号）。同样在 mac 上，正确的`\r`换行符和垃圾`\n`。但是，在 Linux 和 Mac 之间移动会导致对换行符的完全误解。同样，从它们中的任何一个移动到 Windows 都意味着换行符的符号不足。

所有这些都可能导致忽略换行符并将文本视为单行。检查两台机器上的操作系统。这是最可能的问题原因 - 除非您的服务器故意这样做:)

# json - 按字母顺序排序 JQM 列表视图？

> ID：10533359
> 
> 赞同：0
> 
> 时间：2012-05-10T11:49:58.323
> 
> 标签：json, jquery-mobile

我有一个 JSON 格式键 - 值：

```
{
"535826": "Adamov",
"536156": "Bečice",
"544272": "Borek",
"544281": "Borovany",
"535681": "Borovnice",
"544299": "Boršov nad Vltavou",
"535401": "Bošilec",
"551490": "Branišov",
"536059": "Břehov"
} 
```

如果我显示此写出的源代码，则所有内容都按上述排序，aplhabeticaly。

问题是，如果我使用 **jQuery.ajax**

在这种情况下，返回值按 ID 排序，例如 536059

我在 Jquery 移动列表上写广告，所以我不能使用类似的排序方法

```
//SORT UNORDERED LIST  - NOT USED 
function sortUnorderedList(ul, sortDescending) {
      if(typeof ul == "string")
        ul = document.getElementById(ul);

      // Idiot-proof, remove if you want
      if(!ul) {
        alert("The UL object is null!");
        return;
      }

      // Get the list items and setup an array for sorting
      var lis = ul.getElementsByTagName("LI");
      var vals = [];

      // Populate the array
      for(var i = 0, l = lis.length; i < l; i++)
        vals.push(lis[i].innerHTML);

      // Sort it
      vals.sort();

      // Sometimes you gotta DESC
      if(sortDescending)
        vals.reverse();

      // Change the list on the page
      for(var i = 0, l = lis.length; i < l; i++)
        lis[i].innerHTML = vals[i];
    } 
```

有任何简单的解决方案吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:55:52.210

地图的问题在于它本质上是未排序的。你能控制源头吗？您可以生成一个键/值对列表，其中将保持顺序：

```
[{"535826": "Adamov"},
{"536156": "Bečice"},
{"544272": "Borek"},
{"544281": "Borovany"},
{"535681": "Borovnice"},
{"544299": "Boršov nad Vltavou"},
{"535401": "Bošilec"},
{"551490": "Branišov"},
{"536059": "Břehov"}] 
```

# c++ - 在菜单分隔符上禁用鼠标移动事件

> ID：10533364
> 
> 赞同：0
> 
> 时间：2012-05-10T11:50:15.270
> 
> 标签：c++, visual-c++, mfc

是否可以禁用鼠标在菜单分隔符上的移动？

使用键盘键滚动菜单时，它会跳过菜单分隔符。鼠标有同样的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:19:34.750

要制作所有者绘制菜单，请参阅本教程：

[http://msdn.microsoft.com/en-us/library/bb756947.aspx](http://msdn.microsoft.com/en-us/library/bb756947.aspx)

# c# - Windows Phone 7 中的动态磁贴

> ID：10533365
> 
> 赞同：1
> 
> 时间：2012-05-10T11:50:17.173
> 
> 标签：c#, visual-studio-2010, windows-phone-7

是否有可能在 Visual Studio for Windows Phone / C# 中我们只能配置应用程序磁贴。那是..没有 Maain Page.xaml 或任何东西。瓷砖将每秒钟不断改变其背景。或者单击它时，只会激活/停用电话功能。（例如蓝牙）

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:58:39.650

不，这是不可能的。

磁贴始终会在您的应用中打开特定页面。如果您离开该页面，将打开默认页面。

也可以在后台代理中更改背景或更新磁贴，最多每 30 分钟一次。

[有关动态磁贴的更多信息](http://msdn.microsoft.com/en-us/library/hh202948%28v=vs.92%29.aspx)

看看市场上的“连接快捷方式”应用程序。它们确实链接到特定的设置屏幕，但无法通过单击来切换值。

# entity-framework-4 - 将动态类型添加到实体框架上下文中

> ID：10533370
> 
> 赞同：0
> 
> 时间：2012-05-10T11:50:35.390
> 
> 标签：entity-framework-4

我有一个方法可以使用以下方法创建动态类型：Activator.CreateInstance(myType)

但是我在如何添加到实体框架上下文并执行 SaveChanges 时遇到了麻烦，因为我不知道它是哪个 DbSet。

无论如何都可以将对象动态添加到上下文中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:27:55.237

如果您知道在您的上下文中映射的类型，您可以尝试使用它：

```
context.Set(myType).Add(createdInstance);
context.SaveChanges(); 
```

# jquery - 如何使用 C# 字符串生成器制作简单的 JSON 对象

> ID：10533374
> 
> 赞同：6
> 
> 时间：2012-05-10T11:50:43.497
> 
> 标签：jquery, asp.net, json

我是 JSON 新手，想使用 StringBuilder 制作简单的 JSON 对象，该对象将通过 jQuery Ajax 调用进行查询。

```
[WebMethod]
public static string GetmyJSON()
{
    StringBuilder sb = new StringBuilder();       
    sb.Append("{firstname: \"Manas\",").Append("lastname : \"Tunga\"").Append("}");
    return sb.ToString();    

} 
```

在我的客户端代码中，我有：

```
.ajax({

        type: "POST",
        url: "simplePage.aspx/GetmyJSON",           
        data: "{}",
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',

        success: function (data) {

            alert(data.d.firstname);             

        } // end of sucess

    }); // End of ajax 
```

但我的警报消息显示“未定义”而不是“玛纳斯”。是否可以使用 StringBuilder 返回 JSON 对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T11:53:52.567

**永远不要**那样做。**永远不要**手动构建 JSON。**始终**使用 JSON 序列化程序。或者在您的情况下，您甚至不需要这样做，因为 ASP.NET webmethod 运行时会负责。您所要做的就是专注于您的业务需求，而不必担心管道问题。

例如，首先定义一个代表您的数据的模型：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后让您的 Web 方法返回此模型，将所有序列化问题留给框架：

```
[WebMethod]
public static Person GetPerson()
{
    Person p = new Person();
    p.FirstName = "Manas";
    p.LastName = "Tunga";
    return p;
} 
```

现在只需从客户端使用此方法：

```
$.ajax({
    type: 'POST',
    url: 'simplePage.aspx/GetPerson',
    data: '{ }',
    contentType: 'application/json; charset=utf-8',
    success: function (data) {
        alert(data.d.FirstName);
        alert(data.d.LastName);
    }
}); 
```

无需担心 JSON、字符串生成器、...

如果您需要，您还可以将复杂的参数传递给您的 web 方法：

```
public class Foo
{
    public string Bar { get; set; }
} 
```

接着：

```
[WebMethod]
public static Person GetPerson(Foo foo)
{
    ...
} 
```

最后：

```
$.ajax({
    type: 'POST',
    url: 'simplePage.aspx/GetPerson',
    data: JSON.stringify({ foo: { bar: 'baz' } }),
    contentType: 'application/json; charset=utf-8',
    success: function (data) {
        alert(data.d.FirstName);
        alert(data.d.LastName);
    }
}); 
```

此处显示的`JSON.stringify`方法本机内置于现代浏览器中。如果您需要支持旧版浏览器，您可以将[json2.js](https://github.com/douglascrockford/JSON-js)脚本包含到您的页面中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T11:52:52.063

```
var lstMes = new List<Person>();

            System.Web.Script.Serialization.JavaScriptSerializer oSerializer =
             new System.Web.Script.Serialization.JavaScriptSerializer();
                string sJSON = oSerializer.Serialize(lstMes);
                return sJSON; 
```

不要忘记添加对：

```
System.Web.Extensions.dll !! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T14:43:27.053

严格回答这个问题——是的，你可以从 .NET 方法返回任何你想要的东西。正如@canon 在对该问题的评论中所说，您的问题可能是您必须包装属性名称。

这说明了为什么“正确”的答案（如前所述：[1](https://stackoverflow.com/a/10533400/1037948) , [2](https://stackoverflow.com/a/10533416/1037948)）是使用现有的序列化程序，如[JSON.NET](http://james.newtonking.com/json)（如果您需要手动序列化）或让 .NET 处理它（就像它在大多数“最近”中所做的那样）迭代）通过返回对象本身。

# c# - 画笔算法/褪色模式 - 需要建议

> ID：10533375
> 
> 赞同：1
> 
> 时间：2012-05-10T11:50:44.367
> 
> 标签：c#, algorithm, design-patterns, paint, brush

我目前正在尝试创建一个简单的绘画工具，但我遇到了一个问题，或者可能需要更多建议。

我正在尝试创建一个画笔，所以当我绘制某个像素“中心”时，它也会绘制附近的像素。

例如：

```
1 pixel (center point)
[ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ]
[ ][ ][*][ ][ ]
[ ][ ][ ][ ][ ]
[ ][ ][ ][ ][ ]

2 pixel:
[ ][ ][ ][ ][ ]
[ ][ ][*][ ][ ]
[ ][*][*][*][ ]
[ ][ ][*][ ][ ]
[ ][ ][ ][ ][ ]

3 pixels:
[ ][ ][*][ ][ ]
[ ][*][*][*][ ]
[*][*][*][*][*]
[ ][*][*][*][ ]
[ ][ ][*][ ][ ] 
```

此外，只有中心点应该是 100% 的颜色。我以后怎样才能取原来的颜色并稍微淡出它。

例子：

1 像素，100% 颜色

2 像素，中心点 100% 的颜色，附近的像素略微褪色或可能 (50%)

10个像素，中心点100%的颜色，离中心点最远的像素应该是原色最淡的。

因此，一种计算附近颜色的算法和一种制作画笔图案的算法。

有什么建议么？

颜色强度方法的实现（不起作用）更新 1：更改为 Math.Pow(x, y) - 较慢且不起作用

```
 public static Color GetColorIntensity(Color c, double r, Point position, Point centerPosition)
    {
        double distance = Math.Sqrt((Math.Pow(position.X, 2)) + (Math.Pow(position.Y, 2)));
        double relative_distance = distance / r;
        double alpha = (1.0 - relative_distance);

        return Color.FromArgb((int)alpha, c.R, c.G, c.B);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:03:57.167

1.  Calculate the distance of each pixel from the centre of the brush.
2.  Assign a transparency scaling from `1.0` (centre of brush) to `0.0` (edge of brush.)

If you use the Euclidean distance, `d = sqrt(x^2 + y^2)`, you get a circular brush.

If you use the taxicab distance, `d = abs(x) + abs(y)`, you get a diamond-shaped brush.

Here's Python for a function that calculates the intensity of a pixel with coordinates `x,y` relative to the centre of the brush, with a brush radius of `r`. `a = 1.0` means "full opaque", and `a = 0.0` means "fully transparent".

```
def intensity(x,y,r):
    distance = sqrt( x**2 + y **2 )
    relative_distance = distance / r
    alpha = (1.0 - relative_distance)
    return alpha 
```

There's probably an off-by-one error in there (the brush will be one pixel smaller than `r`), but you can fix that yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:43:01.277

**编辑#2** 因为我需要解决难题，我接受了其他人给出的答案，纠正了他们的数学错误，并提出了我认为正是您正在寻找的东西。

试试这个 我创建了一个新的 Windows 窗体应用程序，我添加了一个 numericupdown（画笔大小）、一个轨迹栏（淡入淡出强度）和一个按钮，当您单击该按钮时，它开始从中心开始填充面板并向外移动，刷子编号将是纯色，然后根据褪色强度，每一行向外的褪色会越来越多。

```
 public Form1()
    {
        InitializeComponent();
    }
    Panel[,] pb = new Panel[9, 9];
    private void Form1_Load(object sender, EventArgs e)
    {
       //this is just to add the panels to the screen.  
       //We are using panels to simulate zoomed in pixels so we can see what is going on
        for (int y = 0; y < 9; y++)
            for (int x = 0; x < 9; x++)
            {
                pb[x, y] = new Panel();
                pb[x, y].BackColor = Color.MistyRose;
                pb[x, y].BorderStyle = BorderStyle.FixedSingle;
                pb[x, y].Size = new Size(20, 20);
                pb[x, y].Location = new Point(x * 20, y * 20);
                this.Controls.Add(pb[x,y]);
            }
    }
    private void button1_Click(object sender, EventArgs e)
    {
        DrawPixel(new Point(4, 4), (int)numericUpDown1.Value,trackBar1.Value+1);
    }

    public void DrawPixel(Point pixel, int radius,int intensity)
    {
        radius--;
        for (int y = 0; y <= 8; y++)
            for (int x = 0; x <= 8; x++)
            {
                //clears the screen before starting
                pb[x, y].BackColor = Color.White;
                //calculate the distance from the center pixel
                double Distance = Math.Sqrt( ((x-pixel.X)*(x-pixel.X) + (y-pixel.Y) *(y-pixel.Y))-radius*radius );
                //determine color intensity
                int alpha = (int)Distance <= 0 ? 255 : (int)Distance > intensity ? 0 : (int)(intensity - Distance) * 50 > 255 ? 255 : (int)(intensity - Distance) * 50;

                if (alpha>0)
                    pb[x, y].BackColor = Color.FromArgb(alpha, Color.Red);
            }
    } 
```

# java - 用于 MySQL 请求的 response.getOutputStream 在 JSP 中抛出 IllegalStateException

> ID：10533387
> 
> 赞同：0
> 
> 时间：2012-05-10T11:51:59.190
> 
> 标签：java, mysql, servlets, outputstream, illegalstateexception

我面临着我认为是一个奇怪的问题。我正在尝试通过从 MySQL 服务器检索和显示数据来创建一个动态创建“论坛线程”页面的网站。此数据可以有两种类型：纯文本或图像文件（存储为 BLOB）。在测试时，我们在数据库中有 3 个条目——1 个文本、1 个图片、1 个文本。我们使用 JSP 和 servlet 来检索和显示数据。文本条目写得很好，但是当尝试显示图片时，我们不断从我们的 OutputStream 实例中获取 IllegalStateExceptions - 即，它将运行代码直到我们尝试实例化 OutputStream，然后抛出异常。

我们认为它与多线程有关，但在尝试使用同步和特定的可重入锁之后，我们仍然得到异常。我应该提到，如果我们尝试将代码的“get-image”部分作为单独的 servlet 而不是作为 JSP 的一部分运行，它会很好地显示图像。

servlet 代码如下所示：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.PrintWriter;
import java.sql.Blob;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class listConversation
 */
@WebServlet("/ListConversation")
public class ListConversation extends HttpServlet
{

    @Override
    protected synchronized void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException
    {
        try
        {
            String connectionURL = [our database URL, username and password];
            String myDriver = "com.mysql.jdbc.Driver";

            Class.forName(myDriver).newInstance();

            Connection con = DriverManager.getConnection(connectionURL);

            Statement stmt = con.createStatement();

            ResultSet rs = stmt.executeQuery("SELECT ID, Content1 FROM Conversations WHERE ConversationID=587 ORDER BY Date ASC");

            res.setContentType("text/html");
            PrintWriter out = res.getWriter();

            out.print("<hr>");

            while (rs.next())
            {
                out.print("<b>Besked</b><br/>" + rs.getString("Content1") + "<br/><br/>");

                try {

                    System.out.println("Try-block started.");
                    Statement stmt2 = con.createStatement();
                    System.out.println("Statement created.");
                    ResultSet rs2 = stmt2.executeQuery("SELECT Content2 FROM Conversations WHERE ID = 4");
                    System.out.println("Statement executed.");
                    ServletOutputStream outStream = res.getOutputStream();
                    System.out.println("Outputstream initialized.");
                    Blob image;
                            if (rs2.next()) {
                                image = rs2.getBlob(1);
                                System.out.println("Image created.");
                            } else {
                                res.setContentType("text/html");
                                out.println("h4><font color='red'>image not found for given id</font></h4>");
                                        return;
                            }
                            res.setContentType("image/gif");
                            InputStream in = image.getBinaryStream();
                            int length = (int) image.length();
                            int bufferSize = 1024;
                            byte[] buffer = new byte[bufferSize];
                            System.out.println("Initializing...");
                            while ((length = in.read(buffer)) != -1) {
                                outStream.write(buffer, 0, length);
                            }
                            System.out.println("Image streamed.");
                            in.close();
                            stmt2.close();
                            rs2.close();
                            outStream.close();
                            System.out.println("Closing.");
                            out.flush();
                }
                catch(IllegalStateException e)
                {
                    System.out.println("Darn OutputStreams...");
                }
                catch (Exception e) {
                    res.setContentType("text/html");
                    out.println("<h4><font color='red'>Image Display Error=" + e.getMessage() +
                            "</font></h4>");
                    return;
                }

                out.print("<hr>");
            }

            stmt.close();
            con.close();

            }
        catch (SQLException e)
        {
            e.printStackTrace();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException
    {
        doGet(req,res);
    }

} 
```

控制台输出为：

```
Try-block started. 
Statement created. 
Statement executed.
Darn OutputStreams... 
```

因为我们有三个 ConversationID 为 587 的条目。Content1 是文本，Content2 是 BLOBS。

任何想法或更正将不胜感激。谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:19:34.843

您不能在同一响应中调用 response.getWriter() 和 response.getOutputStream()。通话

```
PrintWriter out = res.getWriter(); 
```

可以这么说，当你打电话时，已经“认领”了回复

```
ServletOutputStream outStream = res.getOutputStream(); 
```

你得到了例外。

# jpa - 使用 Maven 在 JPA 中运行主类时出现“找不到目标”错误

> ID：10533388
> 
> 赞同：0
> 
> 时间：2012-05-10T11:52:10.273
> 
> 标签：jpa, maven-3

我正在学习 JPA，我创建了一个项目来测试最简单的功能：将对象持久保存到 derby 数据库，这是我的 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
  <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLNSchema-instance" xsi:schemaLocation="http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com</groupId>
  <artifactId>java</artifactId>
  <version>2.0</version>
  <name>AJP</name>

  <dependencies>
      <dependency>
          <groupId>org.eclipse.persistence</groupId>
          <artifactId>javax.persistence</artifactId>
          <version>2.0.0</version>
      </dependency>    
      <dependency>
          <groupId>org.apache.derby</groupId>
          <artifactId>derbyclient</artifactId>
          <version>10.6.1.0</version>
      </dependency>
      <dependency>
          <groupId>org.apache.derby</groupId>
          <artifactId>derby</artifactId>
          <version>10.6.1.0</version>
          <scope>test</scope>
      </dependency>      
      <dependency>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.4</version>                
      </dependency>
  </dependencies>

  <build>
      <plugins>              
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>

            <executions>
              <execution>               
                <goals>                 
                  <goal>exec</goal>
                  <goal></goal>
                </goals>
              </execution>
            </executions>
            <configuration>
              <executable>maven</executable>
              <!-- optional -->
              <workingDirectory>/tmp</workingDirectory>
              <arguments>
                <argument>-X</argument>
                <argument>myproject:dist</argument>
              </arguments>
            </configuration>
            </plugin>
      </plugins>
  </build>

</project> 
```

我开始 derby 然后使用这个命令：`mvn exec -Dexec.mainCLass="newmain"` （newmain 是我的主类）

我收到奇怪的错误：`could not found goal ''`在`plugin org.codehause.mojo:exec-maven-plugin:1.2.1 among avaiable goals exec`

谢谢你们的帮助，伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:46:31.797

如果您尝试运行 exec 插件，则必须调用目标而不是生命周期。如果你打电话

```
mvn exec  ... 
```

这是一个不存在的生命周期。要运行，您必须给出：

```
mvn exec:exec ... 
```

这代表了[maven-exec-plugin](http://mojo.codehaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)中的一个目标。

# c - 使用嵌入式 C 测试环境缺少头文件

> ID：10533391
> 
> 赞同：0
> 
> 时间：2012-05-10T11:52:20.157
> 
> 标签：c, embedded, signal-processing

我目前正在研究我的项目，其中我需要为调制解调器编写一个 DSP 处理器来进行二进制 FSK 调制。该系统早期使用的是 QPSK 调制。我使用相同的基础设施，只需要修改频率调制技术。DSP 处理器在 LINUX 机器上使用一组 C 文件进行模拟，所有代码都在 LINUX 上进行测试，然后再转到实际设备。

现在我刚刚开始编程，我只是想编译我当前的代码集。我面临很多缺少头文件的问题。

设备基础结构文件使用以下头文件：

*   过滤器.h,
*   sysreg.h,
*   内置.h

现在，我将所有这些标头都视为“文件丢失”错误。我能够修复一对

```
#include <sys/reg.h>
#include <linux/filter.h> 
```

但是 builtins.h 文件仍然丢失，我无法编译代码。

我正在使用 UBUNTU 11.10 和 gcc 版本 4.6.1。是否有一些特殊的文件需要更新以使用嵌入式 C 进行编程。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:16:21.030

`builtins.h`是一个头文件，它是编译器项目的一部分，根据 gcc 文档，从字面上看，哪些函数是语言内置的。

你的问题是你使用的编译器找不到这个文件。

你有两个选择：

1.  首先，假设其他所有设置都正确，运行`find /usr -name "builtins.h"`以定位文件并将该目录添加到包含 ( `-I/path/to/dir`) 路径。
2.  如果系统使用某种形式的交叉编译器，请确保您使用的是它，而不是主机的 gcc。如果您没有使用正确的工具链，我怀疑您也会遇到链接问题。

# web-services - Microsoft 客户端对象模型 Web 服务

> ID：10533396
> 
> 赞同：1
> 
> 时间：2012-05-10T11:52:40.020
> 
> 标签：web-services, sharepoint-2010, sharepoint-clientobject

我了解使用托管客户端对象模型通过 Web 服务与服务器端对象模型通信。但我找不到任何关于这是 RESTful 还是 SOAP 服务的文档。有谁知道有关此服务架构的任何文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:52:23.073

好问题。

以这段代码为例：

```
 using (ClientContext clientContext = new ClientContext(siteUrl))
        {
            clientContext.Credentials = getServiceAccountCredential();

            SP.List invoicesList = clientContext.Web.Lists.GetByTitle("Approved Invoice Allocations");

            CamlQuery camlQuery = new CamlQuery();
            camlQuery.ViewXml = @"<View> <Query> <Where> <Eq> <FieldRef Name='Invoice_x0020_ID'/> <Value Type='Lookup'>" + invoice_id +
                                "</Value> </Eq> </Where> </Query> <RowLimit>1000</RowLimit> </View>";
            ListItemCollection collListItems = invoicesList.GetItems(camlQuery);

            clientContext.Load(collListItems);
            clientContext.ExecuteQuery();
        } 
```

[在执行 clientContext.ExecuteQuery 或 ExecuteQueryAsync 时查看Fiddler](http://www.fiddler2.com/fiddler2/)工具中的请求和响应标头，以下是一些观察结果

1) POST 请求被发送到 SharePoint REST 服务 webUrl/_vti_bin/client.svc/ProcessQuery

2) 发送的请求是 XML 格式

3) 响应为 JSON 格式

有关详细信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ff798388)MSDN 文章

# java - 如何使用Java围绕一个点旋转多边形？

> ID：10533403
> 
> 赞同：3
> 
> 时间：2012-05-10T11:52:59.810
> 
> 标签：java, casting, rotation

我正在创建一个 Canvas 对象（线条、顶点、三角形......），我想对它们应用围绕一个点的旋转。

我不能使用 Canvas 的 rotate() 方法，因为点附加到地图上的 GeoPoint，所以如果我使用 rotate() 方法，所有地图都在旋转......

问题是 Canvas 需要 Point(int,int) 并且由于 cos 和 sin 函数而应用旋转会创建 double 。因此，当我将旋转应用于所有点时，由于将 double 转换为 int，我遇到了一些图形问题......

所以我正在寻找最好的解决方案。

这是我的轮换代码：

```
public Point rotatePoint(Point pt, Point center)
{
    this.angle = ((this.angle/180)*Math.PI);
    double cosAngle = Math.cos(this.angle);
    double sinAngle = Math.sin(this.angle);

    pt.x = center.x + (int) ((pt.x-center.x)*cosAngle-(pt.y-center.y)*sinAngle);
    pt.y = center.y + (int) ((pt.x-center.x)*sinAngle+(pt.y-center.y)*cosAngle);
    return pt;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T03:08:55.203

该代码在计算 pt.y 时有一个小错误。（pt.x 已更新，但后来使用）。而是尝试以下操作：

```
public Point rotatePoint(Point pt, Point center)
{
    this.angle = ((this.angle/180)*Math.PI);
    double cosAngle = Math.cos(this.angle);
    double sinAngle = Math.sin(this.angle);
    double dx = (pt.x-center.x);
    double dy = (pt.y-center.y);

    pt.x = center.x + (int) (dx*cosAngle-dy*sinAngle);
    pt.y = center.y + (int) (dx*sinAngle+dy*cosAngle);
    return pt;
} 
```

我还使用以下变体：

```
public Point rotatePoint(Point pt, Point center, double angleDeg)
{
    double angleRad = (angleDeg/180)*Math.PI);
    double cosAngle = Math.cos(angleRad );
    double sinAngle = Math.sin(angleRad );
    double dx = (pt.x-center.x);
    double dy = (pt.y-center.y);

    pt.x = center.x + (int) (dx*cosAngle-dy*sinAngle);
    pt.y = center.y + (int) (dx*sinAngle+dy*cosAngle);
    return pt;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:05:49.943

我相信您的解决方案非常好。一个小的改进是在将坐标转换为整数之前将坐标添加 0.5，这样您将拥有我们通常习惯的四舍五入 - 例如，高于 0.5 的所有内容都将四舍五入为 1。除此之外，我认为您不能避免进行舍入，因为您想将连续空间放入离散空间（即平面到画布）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T16:37:07.457

试试这个：

```
public Point rotatePoint(Point pt, Point anchorPoint, double angleDeg) {                  
        double angleRad = Math.toRadians(angleDeg);
        double dx = (pt.x - anchorPoint.x); //x-cord. is transformed to origin
        double dy = (pt.y - anchorPoint.y); //y-cord. is transformed to origin

        double ptX = anchorPoint.x +  (dx * Math.cos(angleRad) - dy * Math.sin(angleRad));
        double ptY = anchorPoint.y +  (dx * Math.sin(angleRad) + dy * Math.cos(angleRad));

        return new Point((int) ptX, (int) ptY);
  } 
```

# flash - 用于 RTSP H264 的 Flash 播放器

> ID：10533406
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:53:14.120
> 
> 标签：flash, actionscript, web, rtsp

使用h.264编解码器编码的RTSP协议播放视频流是真的吗？

我需要为来自 IP 摄像机的流式视频创建 webapp，或者如果我在我的网页中包含例如 VLC 插件并使用它来播放它会更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:11:46.363

不，它目前在 Flash 中是不可能的，除非您使用套接字在 AS3 中编写自己的 RTSP 协议客户端。

[您可以使用VLC WebPlugin](http://wiki.videolan.org/Documentation%3aWebPlugin)将 VLC 嵌入到网页中。您需要了解 JavaScript 才能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T19:33:48.900

请参阅[https://github.com/AxisCommunications/locomote-video-player](https://github.com/AxisCommunications/locomote-video-player)。在 Chrome 弃用 NPAPI 插件之前，VLC 的 NPAPI 播放器运行良好。到 2015 年 9 月，它们显然将从 Chrome 中完全移除 [ [1](https://www.chromium.org/developers/npapi-deprecation) ]。

# javascript - 将选择列表隐藏在 div 后面并使用 JavaScript 选择它有什么问题吗？

> ID：10533413
> 
> 赞同：1
> 
> 时间：2012-05-10T11:53:43.583
> 
> 标签：javascript, forms

我需要在选择列表中水平居中文本，特别是对于 android 和 iphone。似乎这不能用 CSS 完成，所以我正在寻找一种解决方法。

我正在考虑将输入隐藏在具有居中文本的 div 后面，并在单击 div 时使用 JavaScript 来选择输入。然后我需要将 div 中的文本更改为等于所选选项的文本。如果 div 是使用 JavaScript 创建的，那么页面将在禁用 JavaScript 的情况下可用。

我有另一个想法，但这对我来说似乎更棘手。我可以使用 JavaScript 来获取屏幕宽度，应用计算，然后对输入应用适量的文本缩进。

我对最佳实践感兴趣，但这是一个演示项目，而不是现场项目。我正在使用 jQuery。谢谢

更新 - 我尝试了以下方法，其中 div#cover 覆盖了一个选择输入。它在我的 iPad 上运行良好。然而，我的旧 Android 不会总是专注于输入。Firefox 确实专注于输入，但选项不会让你飞，你必须用箭头键滚动它们。所以看来这个解决方案并不像我希望的那么简单。

```
$('div#cover').click(function(){
  $('#select').focus();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:17:53.107

代码来自这里：[jQuery - 在 div 点击时触发函数运行良好，但在页面加载时不运行](https://stackoverflow.com/questions/10586611/jquery-function-runs-fine-when-fired-on-div-click-but-not-on-page-load)

```
 function textIndentFunc () {

    textString = $('#from-1 :selected').text();

     $('#hidden').text(textString);

     textWidth = $('#hidden').width();

     inputWidth = $('#from-1 select').width();

     indentMy = (inputWidth / 2) - (textWidth / 2);

    $('#from-1').css('text-indent',indentMy);

}

 $('#from-1 select').change(function() {
    textIndentFunc();
 });

 textIndentFunc(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:57:15.693

您将选择隐藏在 div 后面的想法看起来不错我做了一个更复杂的事情 - 完全隐藏选择，用 HTML 替换它，从 JS 进行所有交互和 CSS 中的所有样式，并反映对底层选择的更改（这可以实例以正常方式作为表单元素提交）

无论如何，我编写的 jQuery 插件非常小，因为我将所有样式和位置都放在 CSS 中，这让我可以完全控制外观和很大的灵活性

# asp.net-mvc - 从 tiff 图像创建位图对象

> ID：10533418
> 
> 赞同：1
> 
> 时间：2012-05-10T11:53:59.577
> 
> 标签：asp.net-mvc, bitmap, tiff, system.drawing

我有一个带有画廊的页面，用户可以在其中上传图片。我注意到有一个特定的用户上传了 3 张 tiff 图像并且无法访问它们。

```
Exception type: System.ArgumentException
Exception message: Parameter is not valid. 
```

它发生在这里：

```
using (Image photo = new Bitmap(new MemoryStream(photoData))) 
```

文件似乎没问题，因为 File.ReadAllBytes() 有效，我可以使用其他方法下载它们（不工作的方法仅用于返回调整大小的图像），在本地测试并且不会抛出异常。任何想法可能是什么情况？不幸的是，我还不知道其他用户上传的所有 tiff 图像是否也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:52:27.273

对 TIFF 风格的支持（其中有很多）取决于服务器上的 Windows 版本。更准确地说，它取决于 GDI+ 库的版本。

在没有看到 TIFF 的情况下，我无话可说。但我可以建议您尝试一些仅用于 TIFF 文件的第三方库。有事实上的标准[libtiff](http://www.simplesystems.org/libtiff/)库，我已经[将它移植到 C#](https://bitmiracle.com/libtiff/)前一段时间。你可以试试这个端口。

您可能会感兴趣一些示例。我认为[将颜色 TIFF 转换为 32 位 System.Drawing.Bitmap](https://github.com/BitMiracle/libtiff.net/tree/master/Samples/TiffTo32BitBitmap)可能最适合您的任务。

# c++ - 从 32 位应用程序访问 64 位注册表

> ID：10533421
> 
> 赞同：17
> 
> 时间：2012-05-10T11:54:09.810
> 
> 标签：c++, windows, registry, 64-bit, registry-virtualization

我需要`"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{26A24AE4-039D-4CA4-87B4-2F86416024FF}"`在 C++ 中打开一个注册表项。它包含 java 64 位应用程序。该注册表项的完整路径是`"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{26A24AE4-039D-4CA4-87B4-2F86416024FF}"`.

我们可以通过regedit查看这条路径。我用

```
returnStatus = RegOpenKeyEx(HKEY_LOCAL_MACHINE, 
    TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{26A24AE4-039D-4CA4-87B4-2F86416024FF}"),
    0, KEY_ALL_ACCESS, &hKey) 
```

打开注册表；但它返回错误值 (2)。

```
returnStatus = RegOpenKeyEx(HKEY_LOCAL_MACHINE,
    TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall")... 
```

返回成功结果。我能做些什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-10T12:20:39.917

32 位和 64 位应用程序的注册表项是分开的，您无法从 32 位应用程序中（直接）访问 64 位注册表。*在您的情况下，注册表的 32 位部分*中不存在所需的配置单元，那么您只能访问父文件夹。

来自 MSDN：

> 在 64 位 Windows 上，部分注册表项分别存储用于 32 位应用程序和 64 位应用程序，并使用注册表重定向器和注册表反射映射到单独的逻辑注册表视图，因为 64 位版本的应用程序可能使用与 32 位版本不同的注册表项和值。还有一些未重定向或反映的共享注册表项。

您可以阅读 MSDN 上的列表：[受 WOW64 影响的注册表项](http://msdn.microsoft.com/en-us/library/aa384253%28v=vs.85%29.aspx)。不幸的`SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`是，没有提到，但它也受到了影响。

**解决方案**
您需要做的是明确*要求* `RegOpenKeyEx`访问注册表的 64 位部分。这可以通过将`KEY_WOW64_64KEY`标志添加到您的调用来完成（您可以使用 64 位应用程序访问 32 位注册表`KEY_WOW64_32KEY`）。请注意，Windows 2000 不支持此标志，那么如果您的应用程序必须与该（旧）版本兼容，您必须管理该案例。

有关详细信息，请参阅 MSDN 上的此链接：[访问备用注册表视图](http://msdn.microsoft.com/en-us/library/aa384129%28v=vs.85%29.aspx)。

为方便起见，只需将您的呼叫更改为：

```
returnStatus = RegOpenKeyEx(HKEY_LOCAL_MACHINE, 
    TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{26A24AE4-039D-4CA4-87B4-2F86416024FF}"),
    0, KEY_ALL_ACCESS, &hKey); 
```

至：

```
returnStatus = RegOpenKeyEx(HKEY_LOCAL_MACHINE, 
    TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{26A24AE4-039D-4CA4-87B4-2F86416024FF}"),
    0, KEY_ALL_ACCESS | KEY_WOW64_64KEY, &hKey); 
```

**注意 请**
注意，您只能通过其*路径*访问密钥，而无需使用 this 的任何标志`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall`。因为该`Wow6432`节点是 WOW64 使用的*虚拟化*节点，但您不应该依赖它，它是稳定的，但应将其视为可能更改的实现细节。

**参考**
- MSDN 上的[注册表虚拟化。](http://msdn.microsoft.com/en-us/library/aa965884%28VS.85%29.aspx)
- 读者我在这篇文章中找到了有趣的提示：http: [//poshcode.org/2470](http://poshcode.org/2470)，它适用于 PowerShell，但它解释了如何从 32 位应用程序访问 WMI 数据（相对于 64 位注册表部分）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-10T12:13:39.043

错误 2 表示注册表路径不存在。

确保在 SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 下确实存在密钥 {26A24AE4-039D-4CA4-87B4-2F86416024FF}

# xcode - 用可可对接无边框窗口

> ID：10533423
> 
> 赞同：0
> 
> 时间：2012-05-10T11:54:13.907
> 
> 标签：xcode, macos, cocoa, user-interface, nswindow

我想在菜单栏正下方“停靠”一个矩形栏。`-NSMakeRect()`使用适当的屏幕宽度非常容易使用`[[NSScreen mainScreen] frame]`，然后我通过以下方式设置我的窗口样式：

```
[window setStyleMask:NSBorderlessWindowMask]; 
```

效果很好。我尝试通过以下方式将我的窗口尽可能高地定位：

```
[window setFrameOrigin:NSMakePoint(0.0f, screenrect.size.height]; 
```

这*几乎*可以工作。我看到的是我的窗口和系统菜单栏之间有一个间隙，如果它显示的话，这正是我的窗口标题栏的高度。我不能把我的窗户推得更高。

是否可以在菜单正下方放置一个无边框窗口？

# asp.net-mvc-3 - jquery serializeArray() 或 serialize() 不工作

> ID：10533428
> 
> 赞同：0
> 
> 时间：2012-05-10T11:54:33.317
> 
> 标签：asp.net-mvc-3, jquery-ui

```
var formSerializeArray = $('QDiv').serializeArray(); 
```

QDiv 包含所有输入控件...我也使用了 serializeArray() 和 serialize()... 但它不起作用...意味着即使 div 包含控件，它也会返回“null”。

有人请帮助我...我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T16:02:40.747

首先考虑@Maciej 的回答很重要。

您还应该检查您的表单元素是否具有*name属性，否则当您触发***serialize()**或**serializeArray()**时它们不会被包含在内。

来源： http: [//www.mail-archive.com/jquery-en@googlegroups.com/msg32998.html](http://www.mail-archive.com/jquery-en@googlegroups.com/msg32998.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:03:16.840

If you’re using some recent jQuery, make sure you’re using "#" with id selectors, ie.:

```
var formSerializeArray = $('#QDiv').serializeArray(); 
```

# javascript - Javascript，通过gridview循环检查隐藏值

> ID：10533429
> 
> 赞同：0
> 
> 时间：2012-05-10T11:54:35.550
> 
> 标签：javascript, .net

我需要一些帮助 ：）。我试图在我的页面上构建一个通过 gridview 的 Javascript，并为每一行检查存储在该行的某个单元格中的 hiddenvalue。然后它应该根据过滤器值检查它，如果它不匹配隐藏有问题的行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:26:23.477

虽然不是最优雅的，但这应该让您朝着正确的方向开始：

```
<script type="text/javascript">
    function HideEvenValueRows() {
        var tGrid = document.getElementById('<%= GridView1.ClientID%>');
        for (var i = 0; i < tGrid.rows.length; ++i) {
            var inputs = tGrid.rows[i].getElementsByTagName("input");
            for (var j = 0; j < inputs.length; ++j) {
                if (inputs[j].type == "hidden") {
                    var k = inputs[j].value * 1;
                    if (k % 2 == 0) {
                        tGrid.rows[i].style.visibility = "collapse";
                    }
                }
            }
        }
    }
</script> 
```

# php - 如果我添加一个额外的参数，为什么没有调用 javascript 函数

> ID：10533433
> 
> 赞同：0
> 
> 时间：2012-05-10T11:54:49.067
> 
> 标签：php, javascript, function, parameters, parameter-passing

我有一个非常奇怪的情况，我正在这样调用我的javascript函数......

```
window.top.window.stopUpload(<? echo $result; ?>,<? echo $file_name; ?>); 
```

Javascript函数看起来像这样，

```
function stopUpload(success,filePath){
          var result = '';
          if (success == 1){
             result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
          }
          else {
             result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
          }
          document.getElementById('f1_upload_process').style.visibility = 'hidden';
          document.getElementById('f1_upload_form').innerHTML = result + '<input name="image_file" type="file" class="browse" /><input type="submit" name="submit_button" value="Upload"  class="browse"/>';
          document.getElementById('f1_upload_form').style.visibility = 'visible';     

          return true;   
    } 
```

上面的代码不执行`stopUpload`函数。

* * *

但是，如果我这样做，

```
window.top.window.stopUpload(<? echo $result; ?>); 
```

和像这样的javascript，

```
function stopUpload(success){
          var result = '';
          if (success == 1){
             result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
          }
          else {
             result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
          }
          document.getElementById('f1_upload_process').style.visibility = 'hidden';
          document.getElementById('f1_upload_form').innerHTML = result + '<input name="image_file" type="file" class="browse" /><input type="submit" name="submit_button" value="Upload"  class="browse"/>';
          document.getElementById('f1_upload_form').style.visibility = 'visible';     

          return true;   
    } 
```

只需一个参数，它就可以工作！

# 问题

为什么它适用于一个参数而不适用于 2？我试过发送普通字符串，`'hello'`而不是，`$file_name`但它仍然没有调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:58:56.777

像这样调用你的函数：

```
window.top.window.stopUpload(<? echo $result; ?>,'<? echo $file_name; ?>'); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-20T23:27:35.197

尝试这个 ：

`window.top.window.stopUpload('<? echo $result; ?>','<? echo $file_name; ?>');`

请记住，$result 不应该是任何数值。用户 $result = '1' 代替。

并在 if 语句中更改 success == '1') 。

希望能帮助到你。

# php - Twitter 风格趋势与 php/mysql

> ID：10533436
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:15.260
> 
> 标签：php, mysql, trend

我正在编写一个社交网络，我需要一种列出最常用趋势的方法，所有状态都存储在一个内容字段中，所以我需要做的就是匹配主题标签提及，例如：#trend1 #trend2 #anothertrend

并按它们排序，有没有办法用 MySQL 做到这一点？还是我必须只用 PHP 来做这件事？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:20:06.597

趋势背后的数学有些复杂。机器学习可能有点过头了，但你可能需要通过一些例子来工作。

如果您使用@deadtrunk 的示例代码，您会错过最近半小时内出现的趋势；如果你以@eggyal 的例子为例，你会错过一整天都很强劲但在最后半小时内平静下来的趋势。

这个问题的经典解决方案是使用导数函数（http://en.wikipedia.org/wiki/Derivative）；值得构建一个示例数据库并对此进行试验，并使您的解决方案足够灵活以随着时间的推移进行更改。

虽然您想构建一些简单的东西，但您的用户将习惯于趋势，并且如果它没有按照他们期望的方式工作，他们会认为它已经坏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:03:53.343

You should probably extract the hash tags using PHP code, and then store them in your database separately from the content of the post. This way you'll be able to query them directly, rather then parsing the content every time you sort.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:02:15.357

1.  创建一个将主题标签与状态相关联的表。

2.  选择最近一段时间的所有状态更新 - 例如，最后半小时 - 加入主题标签关联表并按主题标签分组。

3.  每组中的计数是“趋势”的指示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:03:14.790

I think it is better to store tags in dedicated table and then perform queries on it. So if you have a following table layout

```
trend | date 
```

You'll be able to get trends using following query:

```
SELECT COUNT(*), trend FROM `trends` WHERE `date` = '2012-05-10' GROUP BY trend

18  test2
7   test3 
```

# c# - RouteData.Values 在查询字符串不存在时返回 NullReferenceException

> ID：10533437
> 
> 赞同：3
> 
> 时间：2012-05-10T11:55:25.773
> 
> 标签：c#, routing

如果在使用 URL 路由时查询字符串中不存在以下语句的空异常错误，我该如何处理以下语句的 NullReferenceException

```
string lang = RouteData.Values["Language"].ToString(); 
```

错误详情

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详情：

> System.NullReferenceException：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T22:34:30.010

较新版本的 .NET 支持：

```
string lang = (RouteData.Values["Language"] ?? String.Empty).ToString(); 
```

对于其他数据类型也很方便：

```
int langId = Convert.ToInt32(RouteData.Values["LanguageId"] ?? 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T11:57:48.467

您收到此异常是因为 RouteDate.Values["Language"] 为 null 并且您正在对其应用实例方法 .ToString。
只需添加一个 if 来检查 null

```
string lang="";
if(RouteData.Values["Language"] != null)
      lang = RouteData.Values["Language"].ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:10:02.953

尝试这个：

```
string lang = RouteData.Values["Language"] != null
                   ? RouteData.Values["Language"].ToString()
                   : String.Empty; 
```

# iphone - UITableview dequeueReusableCellWithIdentifier 和 UIImageView 问题？

> ID：10533440
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:34.827
> 
> 标签：iphone, cocoa-touch, ipad, uitableview

我正在将图像异步加载到 UITableView 中，并且每一行都有不同的图像。问题是当我滚动 UITableView 时，以前的图像再次加载到新行中，一段时间后这些图像被更改为正确的图像（当我删除**dequeueReusableCellWithIdentifier**时，这个问题消失了，但它降低了性能）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
     static NSString *cellIdentifier = @"Cell"; 
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

     if(cell == nil) {
        NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCellFriends" owner:self options:nil];
        cell = [nibObjects objectAtIndex:0];  
        nibObjects = nil;
     } 

     UIImageView *avatar = (UIImageView *)[cell viewWithTag:100];
     UILabel *name = (UILabel *)[cell viewWithTag:2];
     UILabel *city = (UILabel *)[cell viewWithTag:3];

     EntryProfile *entryForRow = [entriesProfileArray objectAtIndex:indexPath.row];

    avatar.image = nil;

     NSString *strLinkImage = [entryForRow.apiAvatarPath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
     NSArray *args = [NSArray arrayWithObjects:avatar,strLinkImage,[NSString stringWithFormat:@"%d",indexPath.row], nil];
     NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(addPhotoWithImageView:) object:args];
     [operationQueue addOperation:operation];
     [operation release];

     // Set the name of the user
     name.text = entryForRow.name;

     return cell;
}

// Method 
- (void)addPhotoWithImageView:(NSArray *)args
{
    UIImageView *imageView = (UIImageView *)[args objectAtIndex:0];
    NSString *strLinkImage = (NSString *)[args objectAtIndex:1];
    NSString *index = (NSString *)[args objectAtIndex:2];

    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.example.com%@",strLinkImage]]];
    UIImage *imageField = [[UIImage alloc] initWithData:imageData];

    if (imageData) {
        [imageView performSelectorOnMainThread:@selector(setImage:) withObject:imageField waitUntilDone:NO];
    }
    [imageField release];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:22:02.880

如果有人仍然面临这个问题，我认为上面的答案并没有真正帮助。

2个步骤：

*   您需要“取消”正在进行的图像视图异步请求，然后使用占位符图像异步设置新图像，直到异步请求通过
*   理想情况下，不要在用户滚动时发送异步请求（tableview/scrollview 正在减速） - 尽量避免发出新请求并在这种情况下设置占位符（除非您有信心知道请求已完成）之前，因此很可能在图像 url 的本地磁盘缓存中找到图像）

以上 2 个步骤将使您的功能保持预期，并为您提供良好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:01:10.400

在 cellForRowAtIndexPath 中，在调用之前：

```
 NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(addPhotoWithImageView:) object:args]; 
```

强制 yourCell imageView.image 为零

```
imageView.image = nil; 
```

这样你就可以清理旧单元格的内容图像，然后在加载时用正确的图像重绘......

**编辑**

也许 nil 不起作用...

尝试一个placeHolder图像，一个真正的png文件（带有颜色，用于测试，那么它可能是一个透明文件......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T17:32:44.640

这是一个经典问题，很容易解决。

在您的`cellForRowAtIndexPath:`实现中，您可以包含如下代码：

```
if (!tableView.decellerating) {
    // set avatar.image to its correct UIImage value how ever you like, 
    // in the background if necessary
} else {
    // table is scrolling...
    avatar.image = nil;
} 
```

然后在你的视图控制器中实现这个方法：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSArray *visibleCells = [self.tableView visibleCells];
    [visibleCells enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        UITableViewCell *cell = (UITableViewCell *)obj;
        UIImageView *avatar = (UIImageView *)[cell viewWithTag:100];
        头像.image = ...; // 做你需要做的设置单元格中的图像
    }];
}

```

您还需要添加`UIScrollViewDelegate`到您的视图控制器采用的协议列表中。

这里的想法是，只要表格视图在移动，就不必费心加载图像。你的表现会一飞冲天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:15:35.830

尝试实现您自己的 UItableViewCell 并在 PrepareForReuse 方法中将所有单元格属性设置为 nil。

我还建议你看看这个项目，以便异步加载远程图像： [https ://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

我在不同的项目中使用它取得了巨大的成功。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:20:11.547

前几天有一个类似的问题，我解决它的方法如下（我没有注意到任何性能下降）。

```
UITableViewCell *cell;

如果（细胞 == 零）{
单元格 = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

// 其余代码

}

```

所以基本上在 if 中调用 dequeue。

# php - Zend_Db 性能

> ID：10533441
> 
> 赞同：1
> 
> 时间：2012-05-10T11:55:36.920
> 
> 标签：php, performance, zend-db

在对要在一个相当大的应用程序中实现的不同库/框架进行一些研究之后（350 个表 db，某些表上的数百万个条目），我发现 Zend_Db 很容易完成我想做的事情：用于在数据库之间快速切换的适配器管理。

问题是性能真的很低，这里有一个例子（**$db**是一个基本的适配器，时间只在 select/fetch 上计算）：

**SQL QUERY**（用于测试的查询，表包含约 200 个元素）

```
SELECT * FROM element WHERE id=2' 
```

**基本 PDO - 0.6392s**

```
$db = new PDO('mysql:dbname=etab_191;host=127.0.0.1', 'root');
for ($i=0; $i<2000; $i++) {
    $stmt = $db->query($sql);
    $p = $stmt->fetch(PDO::FETCH_OBJ);
    $stmt->closeCursor();
} 
```

**当前应用程序数据库管理器 - 0.7401s**（mysqli 核心功能上的简单抽象层）

```
$db = GestionConnexionBDD::getInstance('default', 1)->gestionBDD;
for ($i=0; $i<2000; $i++) {
    $res = $db->query($sql);
    $p = $db->fetchObject($res);
    $db->freeResult($res);
} 
```

**Zend_Db 手动查询 - 1.0647s**（Mv_Core_Db_Manager 是基于 Zend 的抽象层，返回 Zend_Db_Adapter_Abstract 的列表）

```
 $db = Mv_Core_Db_Manager::getInstance()->getAdapter('default', 1);
for ($i=0; $i<2000; $i++) {
    $stmt = $db->query($sql);
    $p = $stmt->fetch();
    $stmt->closeCursor();
} 
```

**Zend_Db_Table_Abstract 查询 - 3.6702s**（使用 Zend_Db_Table_Abstract::setDefaultMetadataCache($cache) 调整）

```
$elmt = new Element();
for ($i=0; $i<2000; $i++) {
    $elmt->find(2);
} 
```

查询循环会杀死 zend 性能。我知道这不是最好的做法，但该应用程序已经开发完毕，我希望尽可能少地更改代码。

一些想法？难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T15:04:23.820

Zend_DB_Abstract will query table metadata on each PHP request.

This means doing a DB DESCRIBE TABLE, that can be very slow on some databases.

To avoid this, you can cache such metadata, and this will improve query performance:

```
 /////////////////////////////
    // getting a Zend_Cache_Core object
    $cache = Zend_Cache::factory('Core',
        'File',
        array('lifetime' => 86400, 'automatic_serialization' => true ),
        array('cache_dir' => $config->cacheDir));

    // Next, set the cache to be used with all table objects
    Zend_Db_Table_Abstract::setDefaultMetadataCache($cache); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:38:18.847

A few pointer:

*   using Table / Row classes will always be slightly slower because of the added overhead of the objectification (if that is even a word ;) )
*   at my workplace we just had similar problems using doctrine (1.2), in the next few weeks we'll be experimenting with [APC](http://devzone.zend.com/1812/using-apc-with-php/ "APC") (sadly, the images on that article are gone)
*   I thought Zend_Db had a query cache mechanism, but I can't find informations about it in the reference guide

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:33:02.787

抽象是有代价的。

Zend 是一个 php 框架，它比 pdo 等原生扩展慢得多。Zend_DB / Zend_Db_Table 在运行时创建了很多类的实例。也许你使用像 apc 这样的字节码缓存或 zend-server 中的内置来快速运行你的应用程序。

也许[HipHop](https://github.com/facebook/hiphop-php/wiki/)也是您的解决方案。

# android - 将项目添加到单击联系人时弹出的菜单

> ID：10533442
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:44.317
> 
> 标签：android

那么，有没有办法可以在 Android 的默认联系人列表中选择联系人并将该联系人导入我的 Android 应用程序？

我查看了[如何在联系人列表](https://stackoverflow.com/questions/2833270/how-to-add-button-or-menu-in-contacts-list)和[打开设备联系人列表](https://stackoverflow.com/questions/4992564/open-device-contacts-list-at-button-click-event)中添加按钮或菜单。

问题是：如何将数据获取到我的应用程序？或者如何在我单击联系人时弹出的菜单中添加菜单项（我的应用程序）。

如果您能告诉我如何做到这一点，或者至少为我指明正确的方向，我会很高兴。

# c# - 如何列出应用于 OU 的所有 GPO，包括继承的 GPO（C#）

> ID：10533443
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:44.933
> 
> 标签：c#, active-directory, group-policy, gpo

我正在寻找一种通过代码列出应用（链接和继承）到特定 OU 的所有 GPO 的方法。

我知道有一个属性表示链接的 GPO，称为 GPLink，但它只提供直接链接的 GPO。

我搜索了谷歌，发现有一个 gpmgmt COM 对象，但我不明白如何将它用于我的目的，甚至可能的话。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T13:14:20.677

我有以下子要分享。它不会列出 GPO 的名称，但会返回计数。一个次要的 mod 将允许您获取名称（在 foreach 循环中查看**GPOLink的属性）。**您需要安装 GPMC 并添加 gpmgmt.dll 作为项目参考。

```
 private string getGPOLinkCount(string OUPathDN, bool onlyEnabledLinks, bool includeInheritedLinks)
    {
        int linkCount = 0;

        try
        {
            GPMGMTLib.GPM gpm = new GPMGMTLib.GPM();
            GPMGMTLib.IGPMConstants gpc = gpm.GetConstants();
            GPMGMTLib.IGPMDomain gpd = gpm.GetDomain(Environment.GetEnvironmentVariable("USERDNSDOMAIN"), "", gpc.UseAnyDC);

            GPMGMTLib.GPMSOM gpSom = gpd.GetSOM(OUPathDN);

            GPMGPOLinksCollection GPOLinks = gpSom.GetGPOLinks();
            GPMGPOLinksCollection GPOLinksIncludingInherited = gpSom.GetInheritedGPOLinks();

            if (!includeInheritedLinks)
            {
                foreach (GPMGPOLink GPOLink in GPOLinks)
                {
                    if (onlyEnabledLinks)
                    {
                        if (GPOLink.Enabled)
                        {
                            linkCount++;
                        }
                    }
                    if (!onlyEnabledLinks) //Get all links, disabled or enabled
                    {
                        linkCount++;
                    }
                }                   
            }

            if (includeInheritedLinks)
            {
                foreach (GPMGPOLink GPOLink in GPOLinksIncludingInherited)
                {
                    if (onlyEnabledLinks)
                    {
                        if (GPOLink.Enabled)
                        {
                            linkCount++;
                        }
                    }
                    if (!onlyEnabledLinks) //Get all links, disabled or enabled
                    {
                        linkCount++;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            return "GPO links: " + ex.Message.Replace("\r\n", "");
        }

        return linkCount.ToString();            
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:21:26.143

您需要向上遍历给定 OU 的每个父级，直到到达域头。

# iphone - 如何将 splitview 添加到 sancha touch 应用程序以及如何更改 xcode 4 iphone 中标题栏上的标题（厨房水槽）

> ID：10533444
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:51.457
> 
> 标签：iphone, xcode, cordova, sencha-touch, sencha-touch-2

我已经实施了一个***`sencha touch phone gap application on ipad.`***

使用厨房水槽应用程序及其文件。

它显示所有演示对象（列表用户界面按钮等）。

**`I need to add a split view as home page as per our application requirement on sencha touch appp.`**

当我执行应用程序时，它显示标题为“**厨房水槽**”应该如何将其重命名为我的应用程序名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:06:37.447

在`kitchen sink`应用程序中，有两个文件夹`phone`和`tablet`，每个文件夹用于特定设备。

在每个文件夹中，都有一个名为的文件`Main.js`，它是应用程序的起始文件。

因此，在那`Main.js`，改变`title`这里...

```
{
  id: 'mainNavigationBar',
  xtype : 'titlebar',
  docked: 'top',
  title : 'My Title',
  items: {
    xtype : 'button',
    .....
    ..... 
```

**编辑 ：**

对于您的拆分视图需要，您可以使用 hbox 布局。

```
Ext.create('Ext.Container', {
    fullscreen: true,
    layout: 'hbox',
    items: [
        {
            xtype: 'panel',
            html: 'TableView/Rootview goes here ...',
            flex: 1
        },
        {
            xtype: 'panel',
            html: 'Message Detail view goes here ....',
            flex: 2
        }
    ]
}); 
```

# java - 读取文件（>150MB）并将文件内容作为 ByteArrayOutputStream 返回

> ID：10533447
> 
> 赞同：0
> 
> 时间：2012-05-10T11:55:59.307
> 
> 标签：java, fast-esp

我正在尝试读取一个大文件 (>150MB) 并将文件内容作为`ByteArrayOutputStream`. 这是我的代码...

```
private ByteArrayOutputStream readfileContent(String url) throws IOException{

    log.info("Entering readfileContent ");
    ByteArrayOutputStream writer=null;
    FileInputStream reader=null;

    try{
        reader = new FileInputStream(url);
        writer = new ByteArrayOutputStream();

        byte[] buffer = new byte[1024];

        int bytesRead = reader.read(buffer);
        while (bytesRead =  > -1) { 
            writer.write(buffer, 0, bytesRead);
            buffer = new byte[1024];
        }

    }
    finally {
        writer.close();
    }

    log.info("Exiting readfileContent ");
    return writer;
} 
```

我得到一个`java.lang.OutOfMemoryError: Java heap space exception`. 我尝试增加 java 堆大小，但它仍然会发生。有人可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:01:04.053

您应该返回`BufferedInputStream`并让调用者从中读取。您正在做的是将整个文件作为`ByteArrayOutputStream`.

您的问题缺少您想要对文件内容执行的操作。没有它，我们只能猜测。有一个`ServletOutputStream`注释掉。你本来想写这个吗？写这个而不是`ByteArrayOutputStream`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:17:08.413

while 循环中有错误。将其更改为

```
 while (bytesRead >= -1) { 
     writer.write(buffer, 0, bytesRead);
     bytesRead = reader.read(buffer);
 } 
```

也不要忘记关闭`reader`。

（它仍然需要相当大的内存。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:02:40.610

由于您知道要读取多少字节，因此可以通过创建`ByteArrayOutputStream`大小来节省时间和空间。这将节省“增长”`ByteArrayOutputStream`后备存储的时间和空间开销。（我没有查看代码，但它可能使用与 相同的策略`StringBuilder`；即每次用完时将分配加倍。该策略最终可能会在峰值使用时使用多达 3 倍的文件大小。）

（坦率地说，当您知道大小时将输出放入 a`ByteArrayOutputStream`似乎有些毫无意义。只需分配足够大的字节数组并直接读取即可。）

除此之外，答案是您需要使堆更大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:05:11.327

Your approach is going to use at least the same ammount of memory as the file, but because ByteArrayOutputStream is using a byte array as storage, it'll potentially have to resize itself 150,000 times (150 meg/1024k buffer) which is not efficient. Upping the heap size to 2* your file size and increasing the size of buf to something much larger may allow it to run, but as other posters have said, it's far better to read form the file as you go, rather than read it in as a String.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T14:25:06.643

我在 Windows 中的 C# 中看到了类似的问题，原因是主机上没有足够的连续虚拟内存。如果您在 Windows 上，您可以尝试增加 VM 空间。

# css - CSS：我在 IE9 中得到了一个较暗的半透明背景。为什么？

> ID：10533448
> 
> 赞同：1
> 
> 时间：2012-05-10T11:56:01.923
> 
> 标签：css

我在这里测试带圆角的半透明背景（CSS 在 HTML 中）：

[http://www.lucagiorcelli.it/test/milanificio_boxes/](http://www.lucagiorcelli.it/test/milanificio_boxes/)

它们在 IE10 中很好（见截图： http: [//o7.no/KSvX2b](http://o7.no/KSvX2b)）。但在 IE9 中它们更暗，角落有鬼影（见截图： http: [//o7.no/KSw9P2](http://o7.no/KSw9P2)）。

我的 CSS 有什么问题？

```
.yellowAlpha35 {
/* Fallback for web browsers that doesn't support RGBa */
background: rgb(245, 221, 183);
filter:alpha(opacity=35);
/* RGBa with 0.6 opacity */
background: rgba(241, 144, 28, 0.35);
/* For IE 5.5 - 7*/
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#23000000, endColorstr=#23000000);
/* For IE 8*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#23000000, endColorstr=#23000000)";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:00:15.343

据我记得 -ms-filter 在 IE9 中仍然有效，它只是被标记为已弃用。因此，在 IE9 中，您可以使用 rgba() + IE8 所需的渐变来获得背景。

要解决此问题，您可以为 IE8、IE9 等创建单独的 CSS 文件，或者只使用 CSS hack。例如 :root 是在 IE9 中引入的，所以你可以使用

```
:root .yellowAlpha35 {
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(enabled=false)";
} 
```

这比准备多个 CSS 文件并使用条件注释添加它们更容易，除非您有更多的 IE 版本特定规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:09:44.210

正如 Rafaei 所说，ms-filter 在 IE9 中仍然有效，它只是被标记为已弃用。为避免此类事情发生，请根据浏览器使用多个 CSS 填充。这样，您可以将 -ms-filter 部分保留在 IE9+ 中，而在 IE 8 中仍然保留它。所以：

```
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="ie8.css" />
<![endif]-->

<!--[if !(IE 8)]>
<link rel="stylesheet" type="text/css" href="style.css" />
<![endif]--> 
```

更多信息[链接](http://www.example.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T12:05:09.767

I assume you've run the acid tests against the browser?

[http://www.acidtests.org/](http://www.acidtests.org/)

# c# - 忽略元素LINQ C#中空属性的值

> ID：10533450
> 
> 赞同：0
> 
> 时间：2012-05-10T11:56:04.903
> 
> 标签：c#, xml, visual-studio, linq

我正在尝试从 XML 文件中检索值，但发现一些值是空的。 `textBox6, textBox7, textBox14`相应的元素属性值为空/null。错误消息是`Null reference error was unhanded`。如何解决这个问题？

```
private void DisplayFile(string path)
    {

        var doc = XDocument.Load(path);
        var ns = doc.Root.GetDefaultNamespace();
        var conn = doc.Root.Element(ns + "connection");

        textBox1.Text = conn.Element(ns + "sourceId").Value;

        var doc1 = XDocument.Load(path);
        var ns1 = doc.Root.GetDefaultNamespace();         
        var conn1 = doc.Root.Element(ns1 + "connectionContext");

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:01:26.820

如果 XML 中不存在给定元素，`foo.Element("someNode")`则返回 null。访问`.Value`时会收到 NullReferenceException。

为了避免出现此 NullReferenceException，您需要检查元素是否不为空。

*contextType*示例：

```
var contextType = conn1.Element(ns + "contextType");
if (contextType != null)
{
  textBox15.Text = contextType.Value;
} 
```

**更新：**

您尝试从根元素加载*connectionContext节点。*但是这个节点是*源*节点的子节点。您需要先加载此节点：

```
var source = doc.Root.Element(ns + "source");
var conn1 = source.Element(ns + "connectionContext"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:31:44.017

我发现你的问题试试这个（我使用字符串原因不想制作文本框）

```
 var doc = XDocument.Load("C:\\Test\\stovfl.xml");
        var ns = doc.Root.GetDefaultNamespace();

        var conn = doc.Root.Element(ns + "connection");
        string s1 = conn.Element(ns + "sourceId").Value;
        string s2 = conn.Element(ns + "username").Value;

        var conn1 = doc.Root.Element("source");

        var conn2 = conn1.Element("connectionContext");
        string s6 = conn2.Element(ns + "organization").Value;
        string s7 = conn2.Element(ns + "field").Value;

        string s14 = conn2.Element(ns + "description").Value;
        string s15 = conn2.Element(ns + "contextType").Value; 
```

问题是您在*source中有**connectionContext*，但尝试在*Root中找到它*

# android - 在 Android 上设置 TabHost 的背景

> ID：10533453
> 
> 赞同：0
> 
> 时间：2012-05-10T11:56:10.860
> 
> 标签：android, background, android-tabhost

我创建了一个`TabHost`包含 4 个选项卡规范的主要活动。我已经为 Tab 主机设置了背景（可绘制、png 图像），并使标签规范中的所有活动都是透明的。

例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >

    <!-- Dummy item to prevent EditText from receiving focus -->

    <LinearLayout
        android:focusable="true" android:focusableInTouchMode="true"
        android:layout_width="0px" android:layout_height="0px"/>

    <EditText android:id="@+id/etContactSearch" 
        android:layout_height="60dip" 
        android:layout_width="fill_parent" 
        android:drawableRight="@drawable/search_contact" >

    </EditText>

    <ListView android:id="@+id/lvContacts" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"  
        android:layout_margin="1dp"  
        android:cacheColorHint="#00000000" 
        android:listSelector="@drawable/relative_layout_clickable">

    </ListView>
</LinearLayout> 
```

并且其中一个选项卡规范具有一些线性布局和列表活动：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/tabhost"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/bck_list">

   <LinearLayout
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:padding="0dp">

       <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" />

        <FrameLayout
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:padding="0dp" />

    </LinearLayout>
</TabHost> 
```

当我从 Eclipse 启动应用程序时，它第一次运行时，背景 ( `@drawable/bck_list`) 完美显示。但是如果我关闭应用程序并再次运行它，背景就会丢失（而是显示黑色）。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:21:06.603

```
mTabHost.addTab(mTabHost
                .newTabSpec("tab_1")
                .setIndicator(g(R.string.TList))
                .setIndicator(g(R.string.TList),
                        getResources().getDrawable(R.drawable.lis))
                .setContent(new Intent().setClass(this, GList.class))); 
```

# javascript - ckfinder 选择多个文件

> ID：10533454
> 
> 赞同：0
> 
> 时间：2012-05-10T11:56:13.657
> 
> 标签：javascript, jquery, selection, ckfinder

对于相册，我想使用 ckfinder 选择（并在需要时上传）您要在相册中使用的图像。但不得不一一选择显然不是最好的用户体验。

有什么方法可以使用 ckfinder 选择多个文件（通过拖动或 ctrl 单击）？我阅读了 ckfinder API 文档，但似乎找不到任何相关信息。是否有可用的插件或者我将如何为此制作插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:01:57.347

目前 CKFinder 没有这样的选项。

[您应该在CKFinder 论坛](http://cksource.com/forums/viewforum.php?f=10)中添加此请求，以便开发人员了解有多少人想要它（我认为应该已经有一个关于它的线程，所以您可以在那里添加“我也是”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T11:52:06.343

CKFinder 现在支持这个功能，另见：[http ://cksource.com/blog/CKFinder_2.3_Released](http://cksource.com/blog/CKFinder_2.3_Released)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:37:24.007

CKFinder 确实支持这个功能。

1.  点击“上传”
2.  Ctrl 在相册中选择您想要的任何图像
3.  点击“打开”

你很高兴。

如果您使用的是免费版本，这可能是问题所在。

去[http://ckfinder.com/demo](http://ckfinder.com/demo)试试我刚才说的。

# java - 没有类的新实例的简单库 Xml 序列化

> ID：10533457
> 
> 赞同：0
> 
> 时间：2012-05-10T11:56:22.240
> 
> 标签：java, serialization, simple-framework

在我的 Java 项目中，我尝试使用 Simple Library (http://simple.sourceforge.net) 进行 XML 序列化。现在我需要从 xml 序列化到我的类的现有实例中。但是这个库总是创建新实例。例如，我在内存中有一些对象：

```
TObj myObject = new TObj();
myObject.field1 = 999;
myObject.field2 = 777; 
```

然后我从这个 TObj 的服务器 xml 收到，但只有部分字段，例如：

```
 <TObj field1="100"> 
```

*我想在myObject*变量中序列化这个 xml 。之后结果应该是：

```
myObject.field1 = 100;
myObject.field2 = 777; 
```

但是简单的库总是创建 TObj 类的新实例。我怎样才能达到预期？？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:12:45.783

使用接受类实例而不是.class 的`read()`方法。`Serializer`

[http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/Serializer.html#read(T, java.io.File)](http://simple.sourceforge.net/download/stream/doc/javadoc/org/simpleframework/xml/Serializer.html#read%28T,%20java.io.File%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T03:49:55.790

也许您的 TObj 类没有正确遵循 simplexml 的序列化和反序列化规则。

我建议您使用注释来定义您的 TObj，以便 simplexml 知道如何序列化您的对象。这是一个例子：

```
@Root(name = "Example")
public class SimpleExample {
    @Element(name = "Name", required = false)
    private String name;
} 
```

通过这样做，您可以创建类 SimpleExample 的新实例并使用以下方法对其进行序列化：

```
 public static <T> String marshal(T obj, Class<T> clazz) throws Exception {
    Strategy strategy = new AnnotationStrategy();
    Serializer serializer = new Persister(strategy, format);
    StringWriter out = new StringWriter();
    serializer.write(obj, out);
    return out.toString();
} 
```

你会得到类似的东西：

```
<?xml version="1.0" ?>
<Example>
    <Name>value_of_this_field<Name>
<Example> 
```

# android - 如何在android中获取大图像的触摸位置

> ID：10533460
> 
> 赞同：0
> 
> 时间：2012-05-10T11:56:55.177
> 
> 标签：android, imageview

我需要在android中获取图像的触摸位置。让我详细解释一下，因为我有一个图像用户可以触摸并进行缩放以调整图像大小。当用户触摸某个位置时，我需要在单独的位置显示有关图像特定位置的详细信息。

如果图像是屏幕尺寸的固定尺寸，那么找到它应该适用于所有设备的位置没有问题。怎么可能？任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:58:59.927

```
OnTouchListener{
  @Override 
  public boolean onTouch(View v, MotionEvent mv) {
    float x = mv.getRawX();
    float y = mv.getRawY();
    return true;
  } 
```

这将为您提供触摸的屏幕位置。如果您需要计算不是屏幕全尺寸的图像中的 X/Y，您可以获取图像的起始 X/Y 坐标

```
v = (ImageView) findViewById(R.id.myImageView);
float v_x = v.getTop();
float v_y = v.getLeft();
float real_x = x - v_x;
float real_y = y - v_y; 
```

# codeigniter - vanilla / codeigniter 登录与 jsconnect / SSO 集成

> ID：10533464
> 
> 赞同：6
> 
> 时间：2012-05-10T11:57:23.730
> 
> 标签：codeigniter, single-sign-on, codeigniter-2

有没有人有使用这个插件的经验？我已经获得了 php 的客户端库，并在我的控制器中设置了适当的功能。当我从香草的插件设置页面单击“测试”时，我得到了有效的响应，但现在我被卡住了......我从这里去哪里？

为了更清楚地了解这个问题，我不知道我的下一步是什么。我的意思是，我知道我一定遗漏了一些东西……这是我用作插件端点的控制器功能（或页面）：

```
// 1\. Get your client ID and secret here. 
$clientID = "1234";
$secret = "1234";

// 2\. Grab the current user from your session management system or database here.
//so i check to see if the user is logged in to my codeigniter's auth
//all works fine

// 3\. Fill in the user information in a way that Vanilla can understand.
$user = array();

if ($signedIn) {
// i then set these according to the user info of the logged in user
$user['uniqueid'] = '123';
$user['name'] = 'John PHP';
$user['email'] = 'john.php@anonymous.com';
$user['photourl'] = '';
}

// 4\. Generate the jsConnect string.
$secure = true; 
WriteJsConnect($user, $_GET, $clientID, $secret, $secure); 
```

[http://vanillaforums.org/docs/jsconnect](http://vanillaforums.org/docs/jsconnect)是文档站点，它没有提及在我当前的点之后要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:53:11.093

我也必须自己解决这个问题，昨晚终于解决了。我已经编写了这些文件并将它们放入 github 存储库中，以便其他使用 CodeIgniter 的人可以更轻松地在他们的网站上享受 JsConnect 功能。我现在真的很喜欢它，因为它正在工作！

您可以下载代码并按照此处的自述文件进行操作： [https ://github.com/mandersondesign/JSConnect-Codeigniter](https://github.com/mandersondesign/JSConnect-Codeigniter)

如果您有任何问题，请告诉我，我会为您提供帮助！

# opengl - OpenGL/JOGL：如何检索几何对象的位置和方向

> ID：10533465
> 
> 赞同：1
> 
> 时间：2012-05-10T11:57:24.227
> 
> 标签：opengl, position, orientation

在一个教育软件 (JOGL) 中，我有一个包含多个旋转和平移的层次结构，可以将几何形状（比如说一个盒子）移动到空间中的一个点。

我可以使用一些基本数学计算平移和旋转后对象的位置和方向，但我也想知道是否有办法直接从 OpenGL/JOGL 读取这些数据？

这个想法是学生可以看到计算出的位置/方向等于真实的位置/方向（来自opengl）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:34:57.123

> 但我也想知道是否有办法直接从 OpenGL/JOGL 读取这些数据？

OpenGL 不是场景图，它只是将点、线和三角形绘制到帧缓冲区，然后忘记您提供的顶点。因此，甚至没有这种数据结构的踪迹可以做到这一点。

或者简而言之：OpenGL 的工作方式不是您（可能）认为的那样，并且没有这样的功能可以检索您寻求的信息，因为这不是 OpenGL 的工作方式。

# iphone - 如果字符串短于 2 行，UITextView 会自动换行

> ID：10533468
> 
> 赞同：1
> 
> 时间：2012-05-10T11:57:27.630
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitextview

我设置了一个`UITextView`奇怪的行为。如果我将它的内容设置为很长`text`，它会在边界处正确地打破它，但是如果内容是单行的，它会在最后一个单词之前自动打破它，即使它适合一行。它创造了最少的线条。

我在网上找不到这个问题，所以我不得不问。

这里是设置`UITextView`

```
Message * displayedMessage = [messages objectAtIndex:indexPath.row];
UIFont * messageFont = [UIFont fontWithName:@"Helvetica" size:13];
CGSize messageSize = [displayedMessage.content sizeWithFont:messageFont constrainedToSize:CGSizeMake(240.f, 3000.f) lineBreakMode:UILineBreakModeWordWrap];
UITextView * messageTextView = [[UITextView alloc] initWithFrame:CGRectMake(46.f, 0.f, messageSize.width, messageSize.height + 25)];

messageTextView.backgroundColor = [UIColor clearColor];
messageTextView.font = messageFont;
messageTextView.editable = NO;
messageTextView.scrollEnabled = NO;
messageTextView.contentInset = UIEdgeInsetsZero;    
messageTextView.textColor = [UIColor blackColor];
[messageTextView setDataDetectorTypes:UIDataDetectorTypeAll];
messageTextView.text = displayedMessage.content;
[cell addSubview:messageTextView]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:20:27.720

我最终设法解决了它，我只需要像这样定义文本视图，宽度固定：

```
> UITextView * messageTextView = [[UITextView alloc]
> initWithFrame:CGRectMake(46.0f, 0.0f, 240.0f, messageSize.height +
> 25)]; 
```

# windows - Microsoft Windows Server 2003 R2 上的 Visual FoxPro (9.0) 问题

> ID：10533473
> 
> 赞同：0
> 
> 时间：2012-05-10T11:57:35.867
> 
> 标签：windows, foxpro

多年来，我们一直在 Microsoft Windows Server 2003 操作系统下的服务器上运行 Visual FoxPro（版本 9）应用程序。我们现在正尝试将其迁移到在 Microsoft Windows Server 2003 R2 下运行的不同服务器，并且应用程序崩溃。当它试图从它刚刚创建的 FoxPro 报告中创建 HTML 文件时，就会出现此问题。为此，请使用系统变量 _ReportOutput 并使用消息“ox 不是对象”中止。该应用程序驻留在网络上两个服务器均可访问的目录中。自从遇到这个问题以来，我已经更改了程序以使用 _ReportListener 中的 Htmllistener 类并得到相同的问题（适用于一个而不适用于另一个（R2））。已插入等待窗口以获取其他信息，但它们仅显示尚未创建对象，返回数据类型为 .Logical。在我看来，问题出在操作系统的 R2 版本上，有人有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:37:05.223

您是否将 ReportOutput.APP 安装在与应用程序相同的文件夹中？

# google-apps-script - 从脚本调用的 Google 文档 ImportXML

> ID：10533479
> 
> 赞同：2
> 
> 时间：2012-05-10T11:57:56.507
> 
> 标签：google-apps-script, google-sheets, seo, google-sheets-importxml

我在谷歌文档表中使用 ImportXML 从 sistrix api 获取数据。它工作正常，但我在一张纸上遇到了 50 个 ImportXML 命令的限制。所以我使用了一个脚本，将 ImportXML 命令写入单元格（临时）公式，并取回单元格的结果值并将其复制到目标单元格。因此，您可以根据需要执行尽可能多的 ImportXML 查询，因为它们只出现在工作表的一个临时单元格中。这里的问题是，ImportXML 查询有时需要很长时间或返回 N/A。

我的脚本是否有可能有时不等待 ImportXML 查询返回，因此结果已损坏？我目前正在这样做：

```
function GetFormulaData(formula, sheet, row, col)
{

// write the formula (ImportXML(...)) to the specified cell
sheet.getRange(row, col).setFormula(formula);

// return the value of this cell resulting from the formula
return sheet.getRange(row, col).getValue();  
} 
```

所以这显然只有在公式（ImportXML 查询）完成并将返回值写入单元格时才有效，所以我可以在之后阅读。有没有人有从脚本调用 ImportXML 的经验或替代方法？

问候米贝克

我现在以不同的方式解决了这个问题。在 google 文档脚本中使用 UrlFetchapp() 比 ImportXML 更常见。但是您必须自己从 http 响应中获取 xml 数据。这个问题可以关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:33:09.723

我现在以不同的方式解决了这个问题。在 google 文档脚本中使用 UrlFetchapp() 比 ImportXML 更常见。但是您必须自己从 http 响应中获取 xml 数据。

我现在这样做：

```
var response = UrlFetchApp.fetch(apiString).getContentText();
var xmlContent = Xml.parse(response, true);
var answer = xmlContent.response.answer; 

// get what you need from the XML answer
if (answer != null)
{
    var element = answer.getElement('foo');
    if (element != null)
    {
        var attrib = element.getAttribute('bar');    
        if (attrib != null)
            value = attrib.getValue();  // the value you want
    }
} 
```

# iphone - NSURLConnection 没有启动

> ID：10533481
> 
> 赞同：0
> 
> 时间：2012-05-10T11:58:06.513
> 
> 标签：iphone, objective-c, xcode

我正在编写基于位置的应用程序，通过 API 获取当前/其他地方的 NSURLConnection 的天气信息。第一次我发送请求它的工作成功。但是下次我想在 NSURLConnection 没有调用任何委托方法时引用相同位置的信息时它不起作用。

这是我的代码：

```
NSString *strs=[@"http://www.earthtools.org/timezone-1.1/" stringByAppendingString:[NSString stringWithFormat:@"%@/%@",place.latitude,place.longitude]];

NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:strs]];

self.reqTimeZone=[NSURLConnection connectionWithRequest:request delegate:self];
[self.reqTimeZone start]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T13:26:07.080

我假设您的意思是`NSURLConnection`（`NSConnection`不存在）。`NSURLConnection`只能使用一次。请参阅[重用 NSURLConnection 的实例](https://stackoverflow.com/questions/5188420/reusing-an-instance-of-nsurlconnection)。

另一个问题`NSURLConnection`是它必须在带有 runloop 的线程上运行。主线程自动有一个运行循环，但在 GCD 和`NSOperation`线程上调用的方法需要显式创建运行循环。实际上，您可能不需要`NSURLConnection`在后台线程上运行。下载操作不会阻塞主线程。如果您决定`NSURLConnection`在运行循环上运行，最简单的方法可能是创建一个`NSOperation`子类并在`-main`.

# ios - 如何在 UITableView 单元格中设置启用用户交互

> ID：10533486
> 
> 赞同：1
> 
> 时间：2012-05-10T11:58:23.807
> 
> 标签：ios, uitableview

我正在使用`UITableview`（分组）。我已禁用 xib 中的用户交互。但是，我想启用一个单元格的交互。我该如何启用它？我用过`[cell setUserInteractionEnabled:yes]`哪个不起作用。`-tableView didselectrowindexpath`没有被调用。任何人都可以建议我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:12:31.637

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //Configure the cell

     if (indexPath.row == yourcell)
       cell.userInteractionEnabled = YES;
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:03:20.490

enable the user interaction in Xib. add

```
if(indexPath.row != YOUR ROW NO)
    cell.userInteractionEnabled = NO; 
```

in

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

hope it helps. happy coding :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T06:43:24.107

// 要启用或禁用特定 Cell 的用户交互，您可以尝试以下代码

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

//我已经使用保护语句来创建类的对象，如果你愿意，你也可以使用

```
 guard  let createCell = tableView.dequeueReusableCell(withIdentifier: "Create") as? CreateProfileCell else {           
        return CreateProfileCell()
    } 
```

//现在您可以在您想要的单元格中启用或禁用用户交互，如下所示

切换 indexPath.row {

```
 case 0:

         createCell.isUserInteractionEnabled = false . // false to disable interaction
    case 1:
   createCell.isUserInteractionEnabled = true // true to enable interaction

    case 2:

         createCell.isUserInteractionEnabled = false

    default:

      print("try again")
    } 
```

返回创建单元 }

# sorting - 数字 1 到 10 的二叉搜索树图

> ID：10533487
> 
> 赞同：0
> 
> 时间：2012-05-10T11:58:28.670
> 
> 标签：sorting, binary-search-tree

我将如何绘制数字 1 到 10 的二进制搜索图？它会被分成两个子树，还是与父节点右侧的节点是 1 条直线？该图是以1作为父节点开始的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:44:41.517

中间的值应该是根，这是为了获得树中的最低高度。然后从那里只在每个节点上写两个指针，一个用于较低的，一个用于较大的，依此类推，直到到达叶子节点。

1,2,3,4,5,6,7,8,9,10

```
 5
       3          8
    2    4     7        9
  1          6              10 
```

# css - Raphael.js 的彩色图像到灰度图像在 IE 9 中不起作用

> ID：10533489
> 
> 赞同：2
> 
> 时间：2012-05-10T11:58:35.607
> 
> 标签：css, image, filter, raphael, grayscale

我有一些用 Raphael 库展示的图像。我选择 Raphael 库的首要原因是许多浏览器都支持它。我现在的问题是以黑白（灰度）表示图像。我已经设法在 Chrome、FF、Safari、IE 6.0+ 中以灰度显示它们。但由于某种原因，它在 IE 9.0 中不起作用。

我使用的代码如下：

```
<html>
<head>
<style type="text/css"> 
    #mainImg { 
        filter: url(filter.#grayscale); /* Firefox 3.5+ */ 
        filter: grayscale; /* IE5+ */ 
        -webkit-filter: grayscale(1); 
    } 
</style> 
</head>    

<body>
   <svg height="0" xmlns="http://www.w3.org/2000/svg"> 
       <filter id="grayscale"> 
            <feColorMatrix values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0" /> 
        </filter> 
   </svg>     

<div id="pItem"></div>

<script type="text/javascript">
 $(document).ready(function () {

 var paper= Raphael(document.getElementById("pItem"), 600, 400, "#c0c0c0");

 var pSet = paper.set();

 var c = paper.image("images/img1.png", 0, 0, 200 ,300);
     c.node.id = 'mainImg'; 

     c.node.style.filter = 'progid:DXImageTransform.Microsoft.BasicImage(grayScale=1)';

    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:26:49.417

我们知道 IE9 缺乏对 SVG 规范的支持，因为[没有涵盖](http://schmerg.com/svg-support-in-ie9-close-but-should-try-harde)[诸如此类的功能`foreignObject`](http://schmerg.com/svg-support-in-ie9-close-but-should-try-harde)，从而使其无法完全符合标准。

在运行了[W3C 指定的 SVG 滤色器测试](http://www.w3.org/Graphics/SVG/Test/20030813/htmlframe/full-filters-color-01-b.html)后，官方表示`matrix`目前还缺乏对滤色器类型的支持。

[这是IE netrenderer](http://netrenderer.com/)制作的快照，提供了上面链接的测试页面： ![在 ie9 上的 svg 过滤器矩阵测试](../Images/a9e9fa265ec18d64677be3d5e59eae0a.png)

也可以通过运行[CanIUse 测试](http://tests.caniuse.com/?feat=svg-filters&ua=ie9&prefix=all)来查看。

# jquery - datetimepicker getDate 以 UTC 格式返回日期/时间

> ID：10533490
> 
> 赞同：5
> 
> 时间：2012-05-10T11:58:36.353
> 
> 标签：jquery, datetimepicker

我碰巧阅读了这个[datetimepicker](http://trentrichardson.com/examples/timepicker/)插件，发现它很有用。我使用此工具面临的问题是我无法以 UTC 或其他格式获取数据/时间格式（我的意图是至少以 UTC 格式获取日期/时间：

```
$('#starttime').datetimepicker({
    ampm: true,
    showHour: true,
    showMinute: true,
    showSecond: false,
    showMillisec: false,
    timeFormat: 'hh:mm TT',
    hourGrid: 4,
    stepHour: 1,
    minDate: minDate,
    maxDate: maxDate,
    stepMinute: 10
 }); 
```

以下脚本以以下格式打印我的数据/时间：

```
var startDt = $('#starttime').datetimepicker('getDate');

Tue May 01 2012 00:00:00 GMT+0530 (India Standard Time) 
```

如何将此格式更改为其他格式

DD-MM-YYYY 或 DD/MM/YYYY 还是 UTC 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:01:45.887

演示：http: [//jsfiddle.net/Dgnjn/2/](http://jsfiddle.net/Dgnjn/2/)

**或者**

dd-mm-yy 这里[http://jsfiddle.net/Dgnjn/5/](http://jsfiddle.net/Dgnjn/5/)

现在使用**`datetimepicker`**

在下面的示例中需要注意的重要一点是：

```
dateAsObject = $.datepicker.formatDate('mm-dd-yy', new Date(dateAsObject)) 
```

**代码**

```
$('#datetimepicker').datetimepicker({
    //altField: '#alternate',
    dateFormat: 'yy-mm-dd',
    timeFormat: 'hh:mm:ss',
    stepHour: 2,
    stepMinute: 10,
    onSelect: function(dateText, inst) { 
      var dateAsString = dateText; //the first parameter of this function
      var dateAsObject = $(this).datepicker( 'getDate' ); //the getDate method
     dateAsObject = $.datepicker.formatDate('mm-dd-yy', new Date(dateAsObject))
        $('#alternate').val(dateAsObject);
       // alert(dateAsObject + '==> ' + $('#alternate').val());
   }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:02:38.917

这些是一些日期格式：http: [//jqueryui.com/demos/datepicker/#date-formats](http://jqueryui.com/demos/datepicker/#date-formats)

```
$('#starttime').datetimepicker( "option", "dateFormat", "dd/mm/yy"); 
```

# c++ - 在 c++11 中哪些临时对象不能用 `someType()` 初始化？

> ID：10533500
> 
> 赞同：4
> 
> 时间：2012-05-10T11:59:12.370
> 
> 标签：c++, c++11, initialization

我有一些对类型和初始值进行操作的宏。我需要将初始值转换`vIni`为`vType`(`vIni`总是可转换为`vType`，有时它具有相同的类型)。`vIni`也可能为空，在这种情况下应该`vType`未初始化或默认初始化。结果被传递给模板化函数。

简而言之，

```
template<typename T> void foo(const T& o);

foo(vType(vIni));
foo(vType()); 
```

必须编译。

我已经发现`foo(unsigned int())`或者`foo(int*())`不会编译，但它可以使用 typedef 来解决。

还有哪些其他情况（除了带有空格和指针的内置类型）会失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:21:59.203

简短（稍微过度简化）的答案是，“除了简单类型说明符之外的任何东西都会失败”。

5.2.3/1 说：

> 一个*简单类型*说明符(7.1.6.2) 或类型名称说明*符*(14.6) 后跟一个带括号的*表达式列表*构造一个给定表达式列表的指定类型的值。

*简单类型说明符*可以是类型的单字名称（可选地加上范围的一些内容`::`，和/或本身不需要是简单类型说明符的模板参数）或`decltype`表达式。7.1.6.2 列出了这些可能性。

`unsigned int`并且`int*`不是*简单类型说明符*。任何复合类型说明符都会失败，因此 cv 限定、数组类型、函数类型、指针类型（包括指向函数的指针和指向成员的指针）都需要 typedef。

还排除了多字类型标识符，如`unsigned char`, `long double`。对于您的第一个示例，`unsigned`将代替`unsigned int`.

*typename-specifier*是一个以 开头的类型，`typename`在模板中用于断言从属名称确实是一种类型，而不是数据成员或成员函数。

最后，当然，一旦你超越了这个限制，类型实际上必须是可构造的或可从*expression-list*转换的。因此，例如，您不能使用此语法或任何其他语法创建临时函数类型。

# c# - 制作多语言网站的最佳方式

> ID：10533501
> 
> 赞同：8
> 
> 时间：2012-05-10T11:59:12.830
> 
> 标签：c#, asp.net, .net, localization

我使用（**Asp.net，c#**）和它的**英文**内容制作了一个网站。现在我需要以支持多种语言的方式制作这个网站，即（**德语，法语**）。标签/文本框/字符串所有值都将显示各自选择的语言在搜索时我知道有一些方法，比如

*   使用本地化
*   使用资源文件。
*   数据库（每件事都保存在不同语言的数据库中）。

坦率地说，我不同意第三种选择。

我想知道哪个是最好的方式，还是有其他更好的方式？

注意：当前网站是使用**.NET framework 4.0/ vs 2010 构建**的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:22:31.637

回复：

[http://msdn.microsoft.com/en-us/library/ms227427.aspx](http://msdn.microsoft.com/en-us/library/ms227427.aspx)

[http://dreamdotnet.blogspot.com/2007/01/tutorial-translating-aspnet-web.html](http://dreamdotnet.blogspot.com/2007/01/tutorial-translating-aspnet-web.html)

您可以将 resx 文件用于多种语言并使用 ResXResourceWrite 更新它们（如果您希望用户能够更新文件：http: [//msdn.microsoft.com/en-us/library/system.resources.resxresourcewriter。 .aspx](http://msdn.microsoft.com/en-us/library/system.resources.resxresourcewriter.aspx) )

此解决方案仅适用于静态内容。如果您希望能够翻译数据库中的内容（例如，如果您的数据库中存储了产品，并且您希望产品的描述也是多语言的）。在这种情况下，您需要更改 DB Scheme 以支持多语言内容。

PS，您可以`GetLocalResourceObject("key")`在不使用 Web 控件的情况下检索值。

如果您使用的是 MVC，请参阅以下问题：[如何本地化 ASP.NET MVC 应用程序？](https://stackoverflow.com/questions/192465/how-to-localize-asp-net-mvc-application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:07:47.697

我使用资源文件添加 global.asax 完成的示例代码

```
 void Application_BeginRequest(Object sender, EventArgs e)
        {
            // Code that runs on application startup
            HttpCookie cookie = HttpContext.Current.Request.Cookies["CultureInfo"];
            if (cookie != null && cookie.Value != null)
            {
                System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(cookie.Value);
                System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cookie.Value);
            }
            else
            {
                System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en");
                System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en");
            }
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T12:14:44.480

对于动态内容，第三方插件或添加诸如谷歌翻译之类的东西就可以了；

[http://translate.google.com/translate_tools](http://translate.google.com/translate_tools)

供参考; 谷歌浏览器内置了自动翻译功能，Chrome 的受欢迎程度正在快速增长......哇，想象一下一个网络，无论您使用哪种语言，您都可以访问所有内容，但我想分享我的想法

# html - 如何在 sencha touch 2 中向 tpl 或 html 中的元素添加事件

> ID：10533502
> 
> 赞同：2
> 
> 时间：2012-05-10T11:59:13.433
> 
> 标签：html, sencha-touch

我正在尝试将事件添加到 sencha touch 2.0 中的 html(property) 内的元素

```
items:[
    {
        html:'<div id="btn" style="height:30px;width:100%;background:green">hello <div/>'
    }
] 
```

我在控制器中尝试了这些方法

```
config: {
    refs: {
        mybtn:'#btn',  ----> i tried (Ext.select('#btn'),Ext.getCmp('btn'),Ext.get('#btn')) 
    },
    control: {
        mybtn:{
            tap:'call'  
        },     
    } 
},

call:function(){
    alert("some thing");
} 
```

这行不通。有没有办法做到这一点，或者至少如何在 tpl 和 html 属性中获取这些元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T01:06:54.170

Sencha 控制器不连接 DOM 元素，它们仅适用于组件。您必须在 View Component 中侦听 DOM 元素事件，然后将您自己的事件分派给 Controller。

[http://www.sencha.com/forum/showthread.php?251844-Controller-control-and-dom-element-listeners](http://www.sencha.com/forum/showthread.php?251844-Controller-control-and-dom-element-listeners)

# asp.net-mvc - T4MVC 已生成格式化 URL (SEO)

> ID：10533505
> 
> 赞同：-1
> 
> 时间：2012-05-10T11:59:23.547
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, url, t4mvc

1) 使用 T4MVC 生成格式化 URL (SEO) 的最佳解决方案是什么

我想要`MVC.AGENCY.INDEX (int? Page, int IdAgency)`

```
 http://localhost:30120/Agency/AgencyName 
```

反而

```
http://localhost:30120/Agency?page=0&IdAgence=2 
```

我可以拥有这个

```
http://localhost:30120/Agency?page=0&IdAgency=2&agency=agencyName 
```

使用 AddMaperoute() 但我不想`Agency?page=0&IdAgency=2`在 URL 中使用( )

也许将符号 & 和 = 更改为 /？

2）当我添加

> 我使用 [http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)

```
<input type="submit" name=="Agency" value="" class="button bbrightRed mr25" />

public virtual ActionResult Agency (AgencyViewModel _AgencyViewModel)
{
....
View return (_AgencyViewModel). AddRouteValue ("AgencyName", AgencyName);
} 
```

我想添加一些信息 URL

添加时我有一个例外`View return (_AgencyViewModel). AddRouteValue ("AgencyName", AgencyName)`；错误地称为 T4MVC WAS。您可能需要通过右键单击 T4MVC.tt 并选择运行自定义工具来重新生成它

我没有 AddRouteValue() 的 URL 是`http://localhost:30120/Agency` 我想要

```
http://localhost:30120/Agency/Agancyname/fff-llll-mm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:20:19.960

如果您不需要`page=0&IdAgency=2`，至少有 2 个选项：

1.  `http://localhost:30120/Agency/AgencyName/2/0`用 url like和 using替换它 `MVC.AGENCY.INDEX (string name, int? Page, int IdAgency)`（参见下面路由中的 Way1）

2.  完全从控制器中删除 id 和 page 并仅按名称映射（仅当它是唯一的时）。您将拥有`http://localhost:30120/Agency/AgencyName`并使用`MVC.AGENCY.INDEX (string name)`（请参阅下面路由中的 Way2）

要拥有 seo 网址，您需要注册路线。你可以在`Application_Start`方法中做到这一点`Global.asax`。[这是一个很好的概述](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.Map("Way1", "Agency/{name}/{IdAgency}/{Page}", MVC.Agency.Index().AddRouteValue("page", 1)
        , new { Page =  @"\d*" } );

        routes.Map("Way2", "Agency/{name}", MVC.Agency.Index() );

        routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

这是我创建了几个与 T4MVC 一起使用的扩展

```
public static class RouteExtensions
  {
#region Map

    public static Route Map(this RouteCollection routes, string routename, string url,
      ActionResult result)
    {
      return routes.Map(routename, url, result, null, null, null);
    }

    public static Route Map(this RouteCollection routes, string routename, string url,
      ActionResult result, object constraints)
    {
      return routes.Map(routename, url, result, null, constraints, null);
    }

    public static Route Map(this RouteCollection routes, string routename, string url,
      ActionResult result, object defaults, object constraints, string[] namespaces)
    {
      return routes.MapRoute(routename, url, result, defaults, constraints, namespaces)
        .SetRouteName(routename); 
    }

    #endregion

public static string GetRouteName(this RouteValueDictionary routeValues)
{
  if (routeValues == null)
  {
    return null;
  }
  object routeName = null;
  routeValues.TryGetValue("__RouteName", out routeName);
  return routeName as string;
}

public static Route SetRouteName(this Route route, string routeName)
{
  if (route == null)
  {
    throw new ArgumentNullException("route");
  }
  if (route.DataTokens == null)
  {
    route.DataTokens = new RouteValueDictionary();
  }
  route.DataTokens["__RouteName"] = routeName;
  return route;
}

} 
```

# .net - 无法从我的 HtmlHelper 中调用 Html.HiddenFor。为什么？

> ID：10533506
> 
> 赞同：0
> 
> 时间：2012-05-10T11:59:33.210
> 
> 标签：.net, asp.net-mvc-3, html-helper

我有一个像这样的 HtmlHelper：（为清楚起见进行了简化）

```
public static MvcHtmlString MyHelper<TModel>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, object>> expressionId)
{
    // do something here

    tagBuilder.Append(htmlHelper.HiddenFor(expressionId));

    // do something here
} 
```

发生的情况是代码在`expressionId`返回时工作正常`string`。但是当它返回时`int`，`Html.HiddenFor`会触发此错误：

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。

我不知道到底是什么问题，但我怀疑它与此有关：当我`expressionId`在调试模式下检查时，我可以看到表达式是：`m => Convert(m.Id)`而不是预期的`m => m.Id`.

让我烦恼的是，`MyHelper`接收的参数类型与`HiddenFor`. 那么为什么我不能重新提出这个论点呢？

我应该怎么办？

**附言**

我没有将任何可为空的表达式传递给 MyHelper （我已经看到了其他一些问题的答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:02:07.683

问题在于不可为空类型的强制转换表达式。

尝试使用强类型助手而不是`object`：

```
public static MvcHtmlString MyHelper<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper, 
    Expression<Func<TModel, TProperty>> expressionId
)
{
    // do something here

    tagBuilder.Append(htmlHelper.HiddenFor(expressionId));

    // do something here
} 
```

# jquery - 动画背景位置适用于 jQuery 1.4.4 但不适用于 1.7.2

> ID：10533509
> 
> 赞同：2
> 
> 时间：2012-05-10T11:59:46.450
> 
> 标签：jquery, versions

我遇到了一个问题。

我有一个正在修改的脚本。一切运行良好，但仅在 jQuery 1.4.4 上运行。当我升级一个版本时，假设最新的（1.7.2）脚本不会运行。是什么赋予了？！

```
var bouncespeed = 450;

function bounce(currentA) {
    newx = Math.floor(10 * Math.random());
    newy = Math.floor(3 * Math.random());
    newspeed = bouncespeed + Math.floor(10 * Math.random());
    $(currentA).animate({
        backgroundPosition: newx + 'px ' + newy + 'px'
    }, newspeed, 'linear', function() {
        bounce(currentA);
    });
}

$('.bubble').each(

function() {
    $(this).css({
        backgroundPosition: '5px 5px'
    });
    bounce(this);
}); 
```

游戏时间！： http: [//jsfiddle.net/mdecler/rgBeW/2/](http://jsfiddle.net/mdecler/rgBeW/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:16:37.190

这是一个记录在案的错误 ( [http://bugs.jquery.com/ticket/8160](http://bugs.jquery.com/ticket/8160) ) 从 1.5 版影响 jQuery。所以实际上没有办法在 jQuery 1.7.2 上为该属性设置动画

您可以改为使用`.css()`而不是动画，然后以小的超时调用该函数，但效果不会很流畅

否则做一个动画而不是`div`本身，改变他们`margin-top/left properties`

# objective-c - 如何在 iPad Master-Detail Application 的右侧而不是左侧创建滑出式 tableView？

> ID：10533510
> 
> 赞同：1
> 
> 时间：2012-05-10T11:59:49.137
> 
> 标签：objective-c, ios, ipad

如果您创建一个 iPad 主从应用程序并使用纵向方向，它会在左侧为您提供一个滑出的 tableView。
1.如何让它显示在右边？

此外，在横向上，它被分成两个视图。

1.  你如何使它与纵向视图相同，例如将 TableView 滑出？

2.  是否可以调整详细视图的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T14:08:33.143

如果你不想要两个横向视图，你为什么需要一个 splitView 呢？您可以只在顶部栏上有一个带有弹出按钮的 UIView。然后您可以将 tableviewcontroller 添加到弹出框。要将其显示在右侧，您可以定义矩形或使用 rightbarbuttonitem 添加弹出框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:01:34.147

您可以通过将masterviewcontroller 作为第二个参数传递给分配给splitViewController.viewcontroller 的数组来获得master。但是，您不能调整主视图和详细视图的大小。因此，您最终将拥有比详细视图更大的 masterView。

查看 UISplitViewController 的有限功能，可能无法正确设置 master（根据您的要求正常工作）。您可以拥有自己的控制器来完成此操作，或尝试使用开源选项，如[MGSplitViewController](http://mattgemmell.com/2010/08/03/mgsplitviewcontroller-updated/)。

您可能还想查看此[讨论](https://stackoverflow.com/questions/2949067/change-the-width-of-master-in-uisplitviewcontroller/4017908#4017908)

# regex - 这个正则表达式是什么意思？

> ID：10533514
> 
> 赞同：2
> 
> 时间：2012-05-10T12:00:04.503
> 
> 标签：regex

那么，下一个正则表达式实际上是什么意思呢？

```
str_([^_]*)(_[_0-9a-z]*)? 
```

它是否等于`^str_[^_]*(_[_0-9a-z]*)?`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:06:08.803

`str_`从字面上匹配这些字符

`([^_]*)`匹配任何非下划线的字符 0 次或更多次

`(_[_0-9a-z]*)?`匹配另一个下划线，然后匹配 0 个或多个字符`_0-9a-z`。最后一部分是可选的。

[我最近写了一篇非常简短的正则表达式介绍，希望对您有所帮助。](https://xisb.wordpress.com/2012/05/09/what-absolutely-every-programmer-should-know-about-regular-expressions/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:36:49.163

As mentioned in the comments to my answer, [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) explains everything about a regular expression if you put it in.

```
str_([^_]*)(_[_0-9a-z]*)?
\  /^\  /^^^^\       /^^^
 \/ | \/ |||| \     / |||
 |  | |  ||||  \   /  ||`- Previous group is optional
 |  | |  ||||   \ /   |`-- End second capture group (an underscore and any amount of characters _, 0-9 or a-z)
 |  | |  ||||    |    `--- Match any amount (0-infinite) of previous (any character _, 0-9 or a-z)
 |  | |  ||||    `-------- Match any of the characters inside brackets
 |  | |  ||||              (0-9 means any number between 0 and 9, a-z means any lower case char between a and z)
 |  | |  |||`------------- Match "_" literally
 |  | |  ||`-------------- Start second capture group
 |  | |  |`--------------- End first capture group (any amount of any character which is not underscore)
 |  | |  `---------------- Match any amount (0-infinite) of previous (any character which is not underscore)
 |  | `------------------- ^ at the start inside [] means match any character not after ^
 |  |                      (In this case, match any which is not underscore)
 |  `--------------------- Start first capture group
 `------------------------ Match "str_" literally 
```

The `^` at the start of `^str_[^_]*(_[_0-9a-z]*)?` just means that it should only match at the start of line of anything you input.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:11:26.607

`str_([^_]*)(_[_0-9a-z]*)?`

所以，让我们谈谈正则表达式：

1) `([^_]*)`- 捕获`()`任何计数（可能为零）`*`符号`[]`，不是`^`这个符号`_`。

2) `(_[_0-9a-z]*)?`- 存在或不存在`?`并捕获`()`序列的开头符号`_`和序列的尾部，其中出现在任何计数中的`*`任何符号，如集合`[]`中的`_` `a,b,c,..,z`或`0,1,..9`

# python - 打印数字时如何控制位数？

> ID：10533516
> 
> 赞同：0
> 
> 时间：2012-05-10T12:00:15.907
> 
> 标签：python

我需要代码方面的帮助，最终答案需要是 6 个字符，我要求对方输入一个数字，他们可以输入以下内容：

```
 1, 10, 100, 1000, 10000 
```

我需要的是最终数字是 6 个字符长，所以这是每个数字的答案

```
1     => 000001
10    => 000010
100   => 000100
1000  => 001000
10000 => 010000 
```

所以我需要将长度设置为6位，输入数字并在前面添加“0”直到它是6位。

我怎样才能做到这一点？

除此之外，如果有人输入 200，我需要将其四舍五入为 100，如果他们输入 501，则四舍五入为 1000；这也可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:01:44.553

好的，分两部分：

首先，格式化一个数字：

```
"{number:06}".format(number=100) 
```

会给你`'000100'`。但在此之前，我们必须四舍五入。

**编辑：**这个解决方案更加优雅：

```
import math
def rep(number):
    rounded = 10**(math.floor(math.log(number,10)-math.log(0.5,10)))
    return "{number:06}".format(number=int(rounded)) 
```

让我们来看看：

```
>>> print rep(100)
000100
>>> print rep(1000)
001000
>>> print rep(501)
001000
>>> print rep(499)
000100
>>> print rep(500)
000100 
```

**旧版本供将来参考结束教育乐趣**：

（它仍然更快，因为它不涉及任何`log`操作）

这是一个巧妙的小技巧：`round(501)`将四舍五入到第一个十进制数字，但`round(501, -1)`会四舍五入到`10^1`数字（所以结果是`500.0`），`round(501, -2)`到`10^2`（结果仍然是`500.0`），并且`round(501, -3)`会四舍五入到 1000。

所以我们希望 500 向上舍入为 1000，但 53 向上舍入为 100。好吧，我们是这样做的：

```
number = 521
rounded = round(number, -len(str(number))) 
```

因此，由于描述字符串`number`的长度为三个字符，因此我们四舍五入为 -3。

然而，这完美地四舍五入，但如果我们向下四舍五入，它总是向下舍入为 0。让我们抓住这种情况：

```
def rep(number):
    rounded = round(number, -len(str(number)))
    if not rounded: # 0 evaluates to False
        rounded = 10**(len(str(number))-1)
    return "{number:06}".format(number=int(rounded)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:02:13.970

[zfill](http://docs.python.org/library/stdtypes.html#str.zfill)也可以帮助你

```
>>> str(10).zfill(6)
'000010' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:06:03.670

为了完整起见：

```
>>> for i in range(6):
...   "%06d" % 10**i 
```

将打印

```
'000001'
'000010'
'000100'
'001000'
'010000'
'100000' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:07:45.657

```
>>> print "%06d" % 1
000001
>>> print "%06d" % 10
000010
>>> print "%06d" % 100
000100
>>> print "%06d" % 1000
001000
>>> print "%06d" % 10000
010000
>>> print "%06d" % 100000
100000 
```

[5.6.2\. 字符串格式化操作](http://docs.python.org/library/stdtypes.html#string-formatting-operations)

# objective-c - 使用 NSSavePanel，用户如何选择要保存的特定文件类型？

> ID：10533517
> 
> 赞同：7
> 
> 时间：2012-05-10T12:00:17.713
> 
> 标签：objective-c, cocoa, nssavepanel

我正在用 Cocoa 编写一个应用程序，它允许用户以 3 种不同的格式导出数据：CSV、JSON 和 XML。我已将允许的扩展添加到 NSSavePanel：

```
NSSavePanel* saveFile = [NSSavePanel savePanel];
NSArray* extensions = [[NSArray alloc] initWithObjects:@"csv", @"json" @"xml", nil];
[saveFile setAllowedFileTypes:extensions]; 
```

但是，如何设置 NSSavePanel 以允许用户选择要保存的格式，例如在提供“文件格式”列表框的 TextEdit 中？如果这是可能的，那么我将如何确定选择了哪种格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T10:45:54.570

您可以将用户定义添加`NSView`到`NSSavePanel`using 中`setAccessoryView:`，请参阅 Apple 的[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSavePanel/setAccessoryView%3a)。还有一个 Apple 示例[Custom Save](https://developer.apple.com/library/mac/#samplecode/CustomSave/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004201)。您将格式选择控件添加到此附件视图。

# android - xml文件中元数据的用途是什么？

> ID：10533518
> 
> 赞同：1
> 
> 时间：2012-05-10T12:00:22.473
> 
> 标签：android, metadata

我看到了一个他们使用元数据的程序。这样做的目的是什么..？

```
"meta-data android:name="android.app.device_admin"
           android:resource="@xml/device_admin_sample" " 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:19:40.303

他们“需要这个”，因为文档告诉他们“需要这个”。在这种情况下，他们正在实现一个设备管理应用程序，[这些应用程序的文档告诉他们他们需要创建这个元数据文件](http://developer.android.com/guide/topics/admin/device-admin.html#manifest)，特别是列出他们需要的安全策略。

更一般地说，[`<meta-data>`是一种添加有关组件的更多信息的方法，这些信息](http://developer.android.com/guide/topics/manifest/meta-data-element.html)可能由使用该组件的框架使用。

# android - 不使用片段的android侧边栏导航

> ID：10533521
> 
> 赞同：0
> 
> 时间：2012-05-10T12:00:27.913
> 
> 标签：android, android-layout

我想创建一个左侧有侧边栏的活动，在活动转换之间没有变化（如 ios 中的拆分视图）。似乎我可以用片段来做到这一点，但我需要添加对 HoneyComb 之前的设备的支持。

我尝试使用类似下面的布局。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
<LinearLayout android:layout_width="320dip"
     android:layout_height="match_parent"
     android:id="@+id/navLay"
    >
 <ListView
         android:id="@+id/navList"
         android:layout_width="match_parent"
         android:layout_height="wrap_content" >
     </ListView>

 </LinearLayout>
  <LinearLayout 
     android:layout_width="wrap_content"
     android:layout_height="match_parent"
     android:id="@+id/contentLay"
     ><ListView
      android:id="@+id/contentList"
      android:layout_width="match_parent"
      android:layout_height="wrap_content" >
  </ListView>
 </LinearLayout>
</LinearLayout> 
```

但是第一个列表也会在活动转换时更新。我想指出，除了右列表的数据源不同之外，活动是相同的活动。所以如果我可以在导航时保存左侧导航栏的状态和内容，那就太好了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:04:14.473

Take a look at [Support Package](http://developer.android.com/sdk/compatibility-library.html) which provides classes for backward compatibility, and includes `Fragment` class also.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:04:12.723

> It seems that I can do this with fragments but I need to add support for devices that is prior to HoneyComb.

You can use fragments and some new APIs on those devices. Just use [support package](http://developer.android.com/sdk/compatibility-library.html).

# .net - .NET CSC.EXE 输出文件格式

> ID：10533522
> 
> 赞同：2
> 
> 时间：2012-05-10T12:00:34.283
> 
> 标签：.net, clr, .net-assembly

所以，我对 .NET 运行时架构和结构很感兴趣。我想逐步了解它是如何工作的。我有几本书，也在谷歌中寻找一些答案，但现在，我想要一些问题的正确答案。

在编写的书中，CSC.exe（编译器）生成托管模块，其中包含： 1\. PE 头 2\. CLR 头 3\. 元数据 4\. IL 代码

编译后，工具 AL.exe（程序集链接器）将该模块合并到程序集中。我也知道，程序集有两个主要的文件扩展名：DLL 或 EXE。

但是，我对托管模块很感兴趣。它如何编译编译器以及文件格式有什么？它是 .netmodule 扩展名吗？或 DLL ？

ps对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:29:33.410

托管模块在格式上就像 .DLL/.EXE 一样（它们都是 PE 格式，它们包含 PE 头 + CLR 头 + 元数据 + 代码）。不同之处在于，如果您正在执行多模块组装，您将创建一个 .netmodule。多模块程序集是其中包含多个模块的程序集，System.Data.dll 就是一个示例，因为它在 1 个程序集中同时具有托管部分和本机 C++ 部分。

.NetModules 只是将多个模块打包成一个程序集的一种便捷方式。高级编译器（如 C#）不处理它，这就是您需要使用 Assembly Linker 工具 (AL) 的原因。

希望这有帮助 谢谢

# javascript - JavaScript 中的语音 (TTS)

> ID：10533524
> 
> 赞同：0
> 
> 时间：2012-05-10T12:00:44.160
> 
> 标签：javascript, text-to-speech

我正在使用 JavaScript 将文本更改为语音。为此，我使用以下脚本：

```
var Obj = new ActiveXObject("Sapi.SpVoice");
Obj.Speak(string, 1 ); 
```

但是由于 ActiveX，这是在 IE 中运行的，我如何在所有其他浏览器中运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:04:43.780

基于 Webkit 的浏览器（Google Chrome、Safari）具有 HTML5`speach`输入。

```
<input type="text" x-webkit-speech /> 
```

[例子](http://blogs.sitepointstatic.com/examples/tech/speech-input/index.html)

不幸的是 Firefox 没有这样的方法。

目前还没有好的跨浏览器解决方案。

有一个项目称之为[`WAMI`](http://wami.csail.mit.edu/)使用 Java 小程序与他们的服务器端一起工作。这可能对您有所帮助，因为 java 可以安装到任何浏览器。

# .net - 如何将 Onvif Api 与监视摄像机一起使用

> ID：10533525
> 
> 赞同：6
> 
> 时间：2012-05-10T12:01:02.187
> 
> 标签：.net, camera, surveillance, onvif

我的公司为其客户提供安全和监控服务，我被要求对如何使用 onvif api 进行研发。我访问了他们的[操作](http://www.onvif.org/onvif/ver20/util/operationIndex.html)页面和一些操作的相关[wsdl](http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl)定义。到目前为止，我的任务表明 onvif 已经为安全设备创建了一套标准，并且符合标准的设备实现了[onvif api 和规范](http://www.onvif.org/Documents/Specifications.aspx)页面上列出的服务。我认为解决方法是我通过使用来自 onvif 站点的 wsdl 定义创建 Web 服务客户端存根，并使用设备的 ip 作为端点来获取其功能。我的假设正确吗？此外，如果有人可以向我推荐一些初步的阅读材料，我将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T05:48:52.940

对于 ONVIF 客户端（NVC - 网络视频客户端），您可以参考[onvifdm](http://sourceforge.net/projects/onvifdm/)。OnvifDM 是 NVC 的一种。

它具有许多基于 ONVIF 规范的功能：

*   网络设备发现 (WS-Discovery)
*   实时视频显示
*   视频采集配置（数字传感器或模拟输入）
*   编码器配置
*   视频分析配置
*   事件和元数据配置
*   警报规则管理
*   固件升级
*   本地存储/网络存储记录

目前，ONVIF 最新版本为 2.2。
但是市场上大多数符合 ONVIF 的设备都支持 v1.02 和 v2.0（v2.1？）。

NVC（如 onvifdm）需要 NVT（网络视频传输器）进行互操作。

NVT 将是 IP 摄像机或 NVR（传统或混合），它具有各种功能和能力。
ONVIF 标准由许多强制性项目和一些可选项目组成。
因此，对于互操作，您必须检查 ONVIF 版本和 NVC/NVT 功能。

如果您注册为 ONVIF 会员，您可以获得一个 ONVIF 一致性工具（最新版本 1.02）。
一致性工具用于 NVT 兼容性检查，您可以将其称为客户端。
如果任何 NVT 通过 ONVIF 一致性工具的测试过程，它就可以是符合标准的产品。

您可以在[ONVIF 的网站上](http://www.onvif.org/ConformantProducts/ProductList.aspx)找到任何符合 ONVIF 标准的产品。

您可以在 onvifdm 中找到基于 .NET 的代码的开源库。
有关更多详细信息，请查看[http://en.synesis.ru/en/surveillance/onvifdm/](http://en.synesis.ru/en/surveillance/onvifdm/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-15T03:14:51.927

我开发了一个开放的 C++ 解决方案 ONVIF NVC（网络视频客户端）和 PVR（个人录像机）。

它可以与监控摄像头一起使用。但是您需要在此解决方案上设置摄像头的 rtsp 地址。

可在 GitHub 获得： [https ://github.com/derzu/ONVIF-PVR](https://github.com/derzu/ONVIF-PVR)

# javascript - Javascript 代码在 IE 中不起作用

> ID：10533531
> 
> 赞同：1
> 
> 时间：2012-05-10T12:01:22.220
> 
> 标签：javascript, jquery

这里是 jsfiddle： http: [//jsfiddle.net/vZMyS/](http://jsfiddle.net/vZMyS/) 编辑：感谢 Buck Doyle，我用不同版本的 chrome 和 firefox/opera 脚本做了一个适当的 if else。现在它只是不适用于 IE。

脚本应该使用户能够向下/向上滚动到“var scrollKeys”中指定的滚动点，使用向上/向下键盘键，它在 chrome 中工作，但在其他浏览器中不起作用。

知道这里有什么问题吗？我如何修复此代码以使其在 firefox/opera/ie8+ 中工作？

**html**

```
<div class="big">
<div class="box1">
    <input type="text" name="input1" class="input1" />
</div>
<div class="box2">
    <input type="text" name="input2" class="input1" />
</div>
<div class="box1">
    <input type="text" name="input3" class="input1" />
</div>
<div class="box2">
    <input type="text" name="input4" class="input1" />
</div>
</div>​ 
```

**css**

```
.big {width:400px; height:4000px; float:left;}
.box1 {width:400px; height:1000px; background-color:#ccc; float:left;}
.box2 {width:400px; height:1000px; background-color:#ddd; float:left;}
.input1 {width:120px; height:16px; float:left;} 
```

**javascript**

```
var scrollKeys = new Array('0', '1000', '2000', '3000');
$('body').on('keyup', function(event) {
    var keypressed = (event.which) ? event.which : event.keyCode;
    var curScroll = $('body').scrollTop();
    var keys = scrollKeys.length;
    var moved = false;
    for (i = 0; i < keys; i++) {
        //console.log(scrollKeys[i]);
        if (moved == false) {
            if (keypressed == 40 && i != (keys - 1) && parseInt(scrollKeys[i]) < curScroll && parseInt(scrollKeys[i + 1]) > curScroll) {
                $('body').animate({
                    scrollTop : (parseInt(scrollKeys[i + 1]))
                }, 'fast', function() {});
                console.log('down');
                moved = true;
            } else if (keypressed == 38 && i != 0 && parseInt(scrollKeys[i]) > curScroll && parseInt(scrollKeys[i - 1]) < curScroll) {
                $('body').animate({
                    scrollTop : (parseInt(scrollKeys[i - 1]))
                }, 'fast', function(){});
                console.log('up');
                moved = true;
            }
        }
    }
});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:37:23.750

[Here](http://jsfiddle.net/vZMyS/1/) is a fork of your fiddle that works in Firefox. But now it doesn’t work in Chrome. The important thing is that I changed it to scroll `html` instead of `body`.

# drupal-7 - 如何自定义节点页面视图？

> ID：10533540
> 
> 赞同：0
> 
> 时间：2012-05-10T12:02:00.943
> 
> 标签：drupal-7

有一个出租汽车列表（材料类型“汽车租赁”的节点列表）。每辆车都有一个详细信息页面。在页面上有一张根据租约期限的成本表（这里是页面截图）：

![成本表](../Images/1eec13669e2cec6961b38bad33325d1a.png)

如我所见，我需要为材料“汽车租赁”的类型添加字段：

*   天
*   星期
*   周末
*   7-21 天
*   > 21 天

*   订金

然后，不知何故，将这些字段呈现到表格中。

如何在 Drupal 7 中最好地实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:59:46.050

如何做到最好可能会因您与谁交谈而有所不同。但我可能会使用 node--car_rental.tpl.php 解决方案。并在 html 中编写我自己的表格。这将页面限制为具有更多字段的动态页面，但它很容易实现。但是如果你想要更动态的解决方案而不需要编码文件，我会使用[Display Suit](http://drupal.org/project/ds)模块和一些 CSS。

# xml - 复制所有 xml 节点并使用 XSLT 重命名其中的少数节点

> ID：10533543
> 
> 赞同：1
> 
> 时间：2012-05-10T12:02:14.853
> 
> 标签：xml, xslt

我有一个 XML，在那个 XML 中我有一个元素 <storybody>，它本身有几个元素，现在我想要的是复制 <storybody> 中的每一个，并用 <a> 更改 <storybody> 中的 <URI> 标签。

请记住，我只需要为文档中的 <storybody> 执行此操作。

XML结构：

```
<mothertag>
     <atag>
        asdfasdfa
     </atag>

     <storybody>
        <p>sometext here<URI ref="http://google.com" /> some more text</p>
     </storybody>
</mothertag> 
```

现在我想将此 URI 更改为标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:28:02.040

您将需要使用附加模板进行**[身份转换，以匹配您想要重命名的节点。](http://en.wikipedia.org/wiki/Identity_transform)**像这样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:strip-space elements="*" />
    <xsl:output indent="yes" method="html" />

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>   

    <xsl:template match="URI">
        <TAG>
            <xsl:apply-templates select="@* | node()"/>
        </TAG>
    </xsl:template>

</xsl:stylesheet> 
```

应用于（更正结束`storybody`标签中的错字）时：

```
<mothertag>
     <atag>
        asdfasdfa
     </atag>

     <storybody>
        <p>sometext here<URI ref="http://google.com" /> some more text</p>
     </storybody>

</mothertag> 
```

产生：

```
<mothertag>
   <atag>
      asdfasdfa

   </atag>
   <storybody>
      <p>sometext here
         <TAG ref="http://google.com"></TAG> some more text
      </p>
   </storybody>
</mothertag> 
```

# android - 使用 Eclipse 进行安卓 UI 设计

> ID：10533547
> 
> 赞同：0
> 
> 时间：2012-05-10T12:02:34.370
> 
> 标签：android, android-intent

我正在尝试使用 Intent 导航到新活动。我的代码如下：

```
Button button = (Button)this.findViewById(R.id.deviceinit);

button.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                Intent intent = new Intent(ANDROIDPORTINGActivity.this,Central.class);
                startActivity(intent);
            }
}) 
```

我创建了一个新课程`Central`。但是在单击按钮时，我收到一条错误消息 FORCED CLOSED！关于导航到不同活动的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:12:41.317

Central 也应该是一项活动，`AndroidManifest.xml`此外

```
 <activity
        android:name=".Central">
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:10:03.063

确保您已将`Central`活动包含在您的`AndroidManifest.xml`.

有关应用清单的更多信息：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

# android - 如何通过不扩展 ListActivity 来设置 OnClickListener

> ID：10533552
> 
> 赞同：0
> 
> 时间：2012-05-10T12:02:45.757
> 
> 标签：android, android-listview, onitemclicklistener, android-event

如果我不延长课程，我该如何设置`OnItemClickListener`事件？`Listview``ListActivity`

有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:09:09.793

希望您在使用的活动中有一个列表视图....

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent,
                    View view,
        int position,
                    long id) {
                    // Whatever you want to do.
    }
}); 
```

那是你要找的吗？

# unit-testing - 使用哪个 Scala 框架来测试 REST 服务？

> ID：10533554
> 
> 赞同：8
> 
> 时间：2012-05-10T12:02:50.493
> 
> 标签：unit-testing, scala, rest

我想使用[Spec2](http://etorreborre.github.com/specs2/)和 Scala 来测试使用 Java 构建的 REST 服务。我查看了[Spray](https://github.com/spray/spray/wiki/Testing)，但看起来你必须使用 Spray 构建应用程序才能使用 SprayTest 对其进行测试。我也找到[了这个线程](https://stackoverflow.com/questions/414875/best-tool-framework-for-testing-a-restful-service)，但这并不是我想要的。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:49:35.993

[我们已经使用 Specs2 和 Dispatch 库 ( https://dispatchhttp.org/Dispatch.html](https://dispatchhttp.org/Dispatch.html) )成功地测试了我们所有的 REST API 。Dispatch 需要一点时间来理解，但是一旦您了解了它如何将所有内容与各种运算符组合在一起，您就可以使用几行代码测试一个简单的 REST 服务。

这是最近项目中的几个测试用例：

```
 def issueErrorStatus = {
    val requestBody = "msisdn=447777666666&message=Some test message"
    val req = url("http://localhost:%d/otac/issue".format(port)) << 
                            (requestBody, "application/x-www-form-urlencoded")
    val response = Http.when(_ == 400)(req <:< (touchPointHeaders) as_str)
    response must_== """{"error":"Message must contain an {OTAC} place holder"}"""
  }

  def checkOtac = {
    val req = url("http://localhost:%d/otac/check".format(port)) <<? 
                                         Vector(("msisdn" -> "447777123456"))
    val response = Http(req <:< (touchPointHeaders) as_str)
    response must_== """{"status":"Present","reissueAllowed":true}"""
  } 
```

第一个测试发出一个 post 请求，第二个测试发出一个 get 请求。我们还有一些更复杂的测试，通过 lift-json 解析器解析响应 JSON 字符串，以便我们可以更轻松地再次断言文档。上面的测试只是检查一些简单的错误/状态案例。

还有一个调度重启项目正在进行中，它有一个简化的 API 并使用异步连接。不过还不确定它有多稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:36:02.517

在我上一个项目中，我使用[AsyncHttpClient](https://github.com/AsyncHttpClient/async-http-client)和[Jersey Client](http://jersey.java.net/nonav/documentation/latest/client-api.html)来测试 REST 服务，我可以推荐它们。对于异步操作，前者更好（我不知道球衣客户端是否支持异步操作）。

它们是用 Java 编写的，并且（据我所知）没有 Scala-API。

# c - 如何在格式化字符串上使用 strlen()？

> ID：10533556
> 
> 赞同：2
> 
> 时间：2012-05-10T12:02:59.353
> 
> 标签：c, string, ncurses, strlen, formatted

我想为**mvwprint/mvwchgat ncurses**函数编写一个包装函数，该函数在指定窗口中打印消息，然后更改其属性。

但是，*mvwchgat*需要知道它应该改变多少个字符——而且我不知道如何告诉*mvwchgat*格式化字符串有多长，例如，因为*strlen()* on，`"abc%d"`显然返回 5，因为*strlen*不知道什么`%d`代表 ...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T12:06:07.697

在 C99 或 C11 中，您可以使用这样的行：

```
length = snprintf(NULL, 0, format_string, args); 
```

从（强调我的）[手​​册中：`snprintf`](http://linux.die.net/man/3/snprintf)

> 函数 snprintf() 和 vsnprintf() 写入的字节数不超过 size 字节（包括终止的空字节 ('\0')）。**如果输出由于此限制而被截断，则返回值是字符数（不包括终止的空字节），如果有足够的可用空间，它将被写入最终字符串**。因此，大小或更大的返回值意味着输出被截断。

由于我们给出`snprintf`0 作为大小，所以输出总是被截断，输出*将*是已经写入`snprintf`的字符数，这基本上是字符串的长度。

 *在 C89 中，您没有`snprintf`. 一种解决方法是创建一个临时文件，或者如果您在 *nix 中打开`/dev/null`并编写如下内容：

```
FILE *throw_away = fopen("/dev/null", "w"); /* On windows should be "NUL" but I haven't tested */
if (throw_away)
{
    fprintf(throw_away, "<format goes here>%n", <args go here>, &length);
    fclose(throw_away);
} /* else, try opening a temporary file */ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T12:18:15.617

您无法提前知道您的字符串有多长：

```
printf("abc%d", 0); //4 chars
printf("abc%d", 111111111);//12 chars 
```

都具有相同的格式字符串。

唯一确定的方法是将`sprintf`有问题的文本放入缓冲区，`strlen(buffer)`将结果和`printf("%s", buffer);`结果进行筛选。

该解决方案以分配足够长的缓冲区为代价避免了双重格式化。*

# windows - 针对 OpenSSL 构建程序 (sscep)：未定义对“[...]”的引用

> ID：10533560
> 
> 赞同：0
> 
> 时间：2012-05-10T12:03:08.743
> 
> 标签：windows, gcc, openssl, mingw

我正在尝试为 Windows 构建一个名为 sscep (http://www.klake.org/~jt/sscep/) 的工具。它不是本机运行的，我有一个“补丁”可以更改 sscep 以使其在 Windows 上编译。应用补丁后，它确实可以完美*编译*，但链接器会拧紧。我在 minGW/msys 中使用 gcc 最初的消息是它找不到加密库，所以我用“-L../openssl-mingw/lib”添加了库，然后没有再产生任何错误。我的命令中还有命令行开关 -lcrypto：`gcc -L../openssl-mingw/lib -lcrypto sscep.o init.o net.o sceputils.o pkcs7.o ias.o fileutils.o -o sscep`.在这个目录中是一个 libcrypto.a。OpenSSL 本身是使用刚刚运行的完全相同的编译器编译的`./config && make && make test && make install`。此外，源代码是使用 minGW tar 而不是 7-zip 提取的。

在遵循所有文档之后，这是我的（截断的）输出：

```
sscep.o:sscep.c:(.text+0x83): undefined reference to `WSAStartup@8'
sscep.o:sscep.c:(.text+0xa5): undefined reference to `WSACleanup@0'
sscep.o:sscep.c:(.text+0x3d5): undefined reference to `BIO_new_mem_buf'
sscep.o:sscep.c:(.text+0x3e0): undefined reference to `ASN1_INTEGER_new'
sscep.o:sscep.c:(.text+0x414): undefined reference to `a2i_ASN1_INTEGER'
sscep.o:sscep.c:(.text+0x432): undefined reference to `ASN1_INTEGER_to_BN'
sscep.o:sscep.c:(.text+0x448): undefined reference to `BN_bn2dec'
sscep.o:sscep.c:(.text+0xb7e): undefined reference to `EVP_des_cbc'
sscep.o:sscep.c:(.text+0xbaf): undefined reference to `EVP_bf_cbc'
sscep.o:sscep.c:(.text+0xbda): undefined reference to `EVP_des_cbc'
sscep.o:sscep.c:(.text+0xc02): undefined reference to `EVP_des_ede3_cbc'
sscep.o:sscep.c:(.text+0xc48): undefined reference to `EVP_md5'
sscep.o:sscep.c:(.text+0xc79): undefined reference to `EVP_md5'
sscep.o:sscep.c:(.text+0xca1): undefined reference to `EVP_sha1' 
```

这适用于那里的每个文件，并且应该是每个调用的函数。在此处和 google 搜索导致缺少库，但从上面省略了 -L 指令，我收到另一个关于找不到 libcrypto 的错误。所以我假设实际上找到了该库，但地址有些错误或其他什么？

我的编译器/链接器知识实际上到此结束。如果补丁可能对此负责（我不相信，因为这些都是openssl函数并且编译工作）那么我可以为您提供它。

编辑：有什么我应该提供的信息以便有人可以帮助我吗？如果这有什么不同的话，openssl 的版本是 1.0.1。关于这个主题：如果它确实有所作为，是否会因为版本错误而发生此错误。据我了解链接器理论，此错误不应源自错误的版本，除非以下*所有*函数都被不同名称的函数替换（但编译器会抱怨，我猜？）。

另一个补充：由于我在 64 位 Windows 7 上，我尝试使用 -m32 标志编译它，但这没有帮助。我假设由于 mingw 已经只有 32 位，我什至无法构建 x64。另一个问题是，我在 AMD Opteron 的虚拟化环境中运行，而 openssl 是使用命令“-march=i486”构建的，这是否是一个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:00:59.710

在一些帮助下，我终于可以弄清楚了！这是顺序问题和缺少库的问题。组合杀了我。

图书馆必须`-lcrypto -lws2_32 -lgdi32`不仅仅是`-lcrypto`. 此外，我必须在目标文件*之后**附加*库，所以：是正确的 make 行。*`$(CC) $(CFLAGS) $(OBJS) -lcrypto -lws2_32 -lgdi32 -o $(PROG)`*

 *最后，它编译得很好。我什至不需要任何架构标志等。*

# iphone - How to set tableview background color?

> ID：10533570
> 
> 赞同：0
> 
> 时间：2012-05-10T12:03:46.297
> 
> 标签：iphone, objective-c, ios

I know i am going to ask a silly question but please provide some answer.

If i have table view, I want to set background color of table view and i have a string named `color` which have the value as `"gray Color"`.

How to set background Color of table view with the help of string `color`.

For clarifications, Please get back to me.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:28:44.023

这里有一些你可以用来开始的代码。我使用了所有的`UIColor's`类颜色来保持代码简洁明了。如果您需要确定其他自定义颜色名称，例如您要求的“灰色颜色”，您将被迫为您要处理的每种颜色编写一个长 if 子句和 if 语句。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // statically add UIColor class names (for sake of simplicity)
    self.colors = [NSArray arrayWithObjects:@"blackColor", 
                                            @"darkGrayColor",
                                            @"lightGrayColor",
                                            @"whiteColor",
                                            @"grayColor",
                                            @"redColor",
                                            @"greenColor",
                                            @"blueColor",
                                            @"cyanColor",
                                            @"yellowColor",
                                            @"magentaColor",
                                            @"orangeColor",
                                            @"purpleColor",
                                            @"brownColor",
                                            @"aColor",
                                            @"lightTextColor",
                                            @"darkTextColor",
                                            @"groupTableViewBackgroundColor",
                                            @"viewFlipsideBackgroundColor",
                                            @"scrollViewTexturedBackgroundColor",
                                            @"underPageBackgroundColor",
                                            nil];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *colorName = [self.colors objectAtIndex:indexPath.row];
    SEL colorSelector  = NSSelectorFromString(colorName);
    if ([UIColor respondsToSelector:colorSelector])
    {
        UIColor *cellColor = [UIColor performSelector:colorSelector];
        const CGFloat *componentColors = CGColorGetComponents(cellColor.CGColor);
        int numComponents = CGColorGetNumberOfComponents(cellColor.CGColor);

        // get inverse color for cell text 
        UIColor *inverseColor = [UIColor whiteColor];
        if (numComponents == 4)
        {
            inverseColor = [[[UIColor alloc] initWithRed:(255 - 255 * componentColors[0])
                                                  green:(255 - 255 * componentColors[1])
                                                   blue:(255 - 255 * componentColors[2])
                                                  alpha:componentColors[3]] autorelease];            
        } else if (numComponents == 2) {
            inverseColor = [[[UIColor alloc] initWithRed:(255 - 255 * componentColors[0])
                                                   green:(255 - 255 * componentColors[0])
                                                    blue:(255 - 255 * componentColors[0])
                                                   alpha:componentColors[1]] autorelease];    
        }

        cell.contentView.backgroundColor = cellColor;
        cell.textLabel.textColor = inverseColor;
        cell.textLabel.text = colorName;

    } else {
        cell.contentView.backgroundColor = [UIColor whiteColor];        
        cell.textLabel.text = [NSString stringWithFormat:@"Unknown color (%@)", colorName];
        cell.textLabel.textColor = [UIColor blackColor];
    }
    cell.textLabel.backgroundColor = cell.contentView.backgroundColor;

    return cell;
} 
```

![彩色 uitableview 单元格](../Images/12c80e5acdba6ab2bb93af97a8070f31.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:07:08.417

要在 iPhone 应用程序中更改 UITableView 的背景颜色，只需将给定的代码行写入 tableView cellForRowAtIndexPath。

```
 tableView.backgroundColor = [UIColor grayColor]; 
```

//设置选定的背景颜色

```
UIImageView *selectedBackground = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 320,100)];
selectedBackground.backgroundColor = [UIColor orangeColor];
[cell setSelectedBackgroundView:selectedBackground]; 
```

对于示例图像....

![在此处输入图像描述](../Images/73fca10517e709a0f260f8b37aeede9d.png)

![在此处输入图像描述](../Images/9e587c3f512588b35d9b483a560c70ce.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:27:48.580

您可以使用 NSDictionary 类来存储颜色，字符串颜色将是您需要的颜色的关键，即

```
NSDictionary *colorsDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                               [UIColor redColor],@"Red Color",
                                               [UIColor greenColor],@"Green Color",
                                               [UIColor blueColor],@"Blue Color",nil];
tableView.backgroundColor = [colorsDict valueForKey:color]; 
```

字符串颜色必须等于任何键。

# php - jQuery、AJAX、PHP 数据交换问题

> ID：10533578
> 
> 赞同：0
> 
> 时间：2012-05-10T12:04:11.277
> 
> 标签：php, ajax, json, jquery

我尝试使用 jquery.ajax 函数将输入字段中的值发布到 php 文件中。php部分必须将数据插入mysql数据库，生成唯一的pincode，并通过json将pincode返回给jquery代码。

但是当提交表单时没有任何反应......

当我在浏览器中直接进入 main.php 文件时，它会显示一个唯一的 pincode，并且 php 脚本甚至会将 pincode 插入数据库中。所以我认为 JSON 部分出错了，但我不知道为什么。

我希望有人能告诉我我做错了什么。任何帮助都会很棒！

**下面的代码是工作代码！**

HTML部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AJAX PHP JSON Test</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("form#userForm").submit(function() {
                var inputFname = $('#inputFname').attr('value');
                var inputLname = $('#inputLname').attr('value');
                $.ajax({
                    type: "POST",
                    url: "main.php",
                    data: {inputFname: inputFname,inputLname: inputLname},
                    dataType: "json",
                    contentType:"application/json; charset=utf-8",
                    success: function(data) {
                        $("p.succesText").html(data.jsCode);
                        $("form#userForm").hide();
                        $("div.success").fadeIn();
                    },
                    error: function(xhr, status, error) {
                        $("form#userForm").hide();
                        $("p.errorHead").html("Something went wrong.");
                        $("p.errorText").text("ResponseText: " + xhr.responseText
                                            + "Statuscode: " + xhr.status
                                            + "ReadyState: " + xhr.readyState);
                        $("div.error").fadeIn();
                    }
                });
                return false;
            });
        });     
    </script>
</head>
<body>
    <div class="MiddleWhite">
        <form id="userForm" method="post" name="userForm" action="">
        <label for="inputFname" class="LabelForInput">
            Enter your Forename
        </label>
        <input type="text" name="inputFname" id="inputFname" class="TextInput"
            size="20" />
        <br />
        <br />
        <label for="inputLname" class="LabelForInput">
            Enter your Surname
        </label>
        <input type="text" name="inputLname" id="inputLname" class="TextInput"
            size="20" />
        <br />
        <br />
        <br />
        <button type="submit" class="Button">
            Generate code</button>
        </form>
        <div class="success" style="display: none;">
            <p class="succesText">
            </p>
            <p class="checkCallText">
            </p>
        </div>
        <div class="error" style="display: none;">
            <p class="errorHead">
            </p>
            <p class="errorText">
            </p>
        </div>
    </div>
</body>
</html> 
```

PHP部分：

```
<?php header('content-type: application/json; charset=utf-8');

    $log = array();

        $varFname = htmlspecialchars($_POST["inputFname"]);
        $varLname = htmlspecialchars($_POST["inputLname"]);

        //Make Database connection
        $db = mysql_connect("192.168.178.254","root","852456");
        if(!$db) die("Error connecting to MySQL database.");
        mysql_select_db("Ajax" ,$db);

        //Generate code and check if code already exists in the database
        do
        {
            $varCode = rand(10000, 99999);
            $dbCheckCode = "";
            $dbCheckCode = mysql_query("SELECT * FROM TableAjax WHERE code='$varCode'");
        }
        while (mysql_fetch_array($dbCheckCode) !== false);

        //Save the Form data in the database
        $sql = "INSERT INTO TableRecordcall (fname, lname, code) VALUES (".PrepSQL($varFname) . ", " .PrepSQL($varLname) . ", " .PrepSQL($varCode) . ")";
        mysql_query($sql);  

        //Return code to frontend
        $log['jsCode'] = $varCode;

        echo json_encode($log);

    //Clean SQL statement
    function PrepSQL($value)
    {
        if(get_magic_quotes_gpc()) 
        {
            $value = stripslashes($value);
        }
        $value = "'" . mysql_real_escape_string($value) . "'";
        return($value);
    }   

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:11:06.270

从[这里的 JQuery API](http://api.jquery.com/submit/)

> **表单及其子元素不应使用与表单属性（**例如*提交*、*长度*或*方法*）冲突的输入名称或 ID 。名称冲突可能会导致令人困惑的失败。有关规则的完整列表并检查这些问题的标记，请参阅 DOMLint。

你写了

```
<form id="submit" method="post" name="submit" action=""> 
```

尝试更改表单的 ID/名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:08:29.927

在 $.ajax 中替换

```
data: {'inputFname': inputFname,'inputLname': inputLname}, 
```

经过

```
data: {inputFname: inputFname,inputLname: inputLname}, 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:12:18.770

你也没有使用

`return false;`

在峰会回调中以防止默认表单提交。像这样更改您的js代码

```
$(document).ready(function() {
            $("form#submit").submit(function() {
                var inputFname = $('#inputFname').attr('value');
                var inputLname = $('#inputLname').attr('value');
                $.ajax({
                    type: "POST",
                    url: "main.php",
                    data: {inputFname: inputFname,inputLname: inputLname},
                    dataType: "json",
                    contentType:"application/json; charset=utf-8",
                    success: function(data) {
                        $("p.succesText").html(data.jsCode);
                        $("form#submit").hide();
                        $("div.success").fadeIn();
                    },
                    error: function(xhr, status, error) {
                        $("form#submit").hide();
                        $("p.errorHead").html("Something went wrong.");
                        $("p.errorText").text("ResponseText: " + xhr.responseText
                                            + "Statuscode: " + xhr.status
                                            + "ReadyState: " + xhr.readyState);
                        $("div.error").fadeIn();
                    }
                });
                return false;
            });
        }); 
```

# extjs - Rerender DOM elements of components in ExtJS4

> ID：10533583
> 
> 赞同：1
> 
> 时间：2012-05-10T12:04:26.333
> 
> 标签：extjs, extjs4

I read about, how ExtJS4 keeps all the data of the components in separate objects and just renders DOM stuff on demand.

I have the problem, that a `<div>` gets a `innerHTML = ''` to hide some data and afterwards fills the `innerHTML` if the data is demanded.

If I render a component into that `<div>` it gets deleted when the hide functionallity is activated.

But all the component data is stored in a separate object, so is it possible to just re-render the stuff with its last state or just tell ExtJS to delete the DOM stuff by itself before it gets deleted and afterwards re-render it?

--- Edit ---

I think I found the problem (but no good solution)

When I define the component, I specify a `<div>` in `renderTo` if the parent `<div>` gets the `innerHTML = ''` it gets deleted, but later it gets recreated, with the same ID and stuff.

So when I call `show()` a `<div>` with the right ID exists, but it's a new object and the object I specified in the `renderTo` option is lost.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:18:05.737

我认为您应该使用 2 `<div>`，第一个将用于直接操作`innerHTML`；第二个是组件。当您通过设置 innerHTML 隐藏时，您可以隐藏下一个组件。重新渲染将是相反的步骤。

# java - JavaScripting API

> ID：10533585
> 
> 赞同：1
> 
> 时间：2012-05-10T12:04:33.017
> 
> 标签：java, javascript, api

When I invoked the `callScriptFunction()` it shows the scriptReturnValue is null. How can I rewrite the function to avoid the null?

```
public class SimpleInvokeScript {

    public static void main(String[] args) 
      throws FileNotFoundException, ScriptException, NoSuchMethodException
    {
        new SimpleInvokeScript().run(); 
    }

    public void run() throws FileNotFoundException, ScriptException, NoSuchMethodException {
        ScriptEngineManager scriptEngineMgr = new ScriptEngineManager();
        ScriptEngine jsEngine = scriptEngineMgr.getEngineByName("JavaScript");

        jsEngine.put("myJavaApp", this);

        File scriptFile = new File("src/main/scripts/JavaScript.js");

        // Capture the script engine's stdout in a StringWriter. 
        StringWriter scriptOutput = new StringWriter();
        jsEngine.getContext().setWriter(new PrintWriter(scriptOutput));

        Object scriptReturnValue = jsEngine.eval(new FileReader(scriptFile));

        if ( scriptReturnValue == null) {
            System.out.println("Script returned null");
        } else {
            System.out.println(
                "Script returned type " + scriptReturnValue.getClass().getName() +
                ", with string value '" + scriptReturnValue + "'"
            );

        }

        Invocable invocableEngine = (Invocable) jsEngine; 
        System.out.println("Calling 'invokeFunction' on the engine");
       invocableEngine.invokeFunction("callScriptFunction", "name");

        System.out.println("Script output:\n----------\n" + scriptOutput);
        System.out.println("----------");

    /** Method to be invoked from the script to return a string. */
    public String getSpecialMessage() {
        System.out.println("Java method 'getSpecialMessage' invoked");
        return "A special announcement from SimpleInvokeScript Java app";
    }
} 
```

The JavaScript.js will look like this. Also, I have one more doubt, I gave `msg = myJavaApp.getSpecialMessage()` without var declaration and it's working. Can we avoid var declaration?

```
function scriptFunction(name){

     var msg = myJavaApp.getSpecialMessage();
     println( msg );
} 
```

# r - Extract most recent entry, under a certain condition

> ID：10533588
> 
> 赞同：6
> 
> 时间：2012-05-10T12:04:39.930
> 
> 标签：r, indexing, split, plyr, data.table

I'm struggling to get the following done:

Example dataset:

```
 belongID   uniqID   Time   Rating  
   1           101       5      0  
   1           102       4      0  
   2           103       4      0  
   2           104       3      0  
   2           105       2      5
   3           106       4      2  
   3           107       5      0  
   3           108       5      1 
```

The problem is: I would like to extract the most recent entry (largest value for time) per belongID, unless this rating is 0\. If the rating of the most recent entry is 0 however. I want the first entry with a rating (not the highest rating, just the first value with a rating that is not zero). If all other entries are also zero, the most recent one needs to be selected.

The end result should than be:

```
 belongID   uniqID   Time   Rating  
   1           101       5      0  
   2           105       2      5
   3           108       5      1 
```

The dataset is pretty large and is ordered by belongID. It is not ordered by time, so more recent entries may come after older entries with the same belongID.

Without having the "0 Rating" constraint, I used the following function to calculate the most recent entry:

```
>uniqueMax <- function(m, belongID = 1, time = 3) {
    t(
      vapply(
         split(1:nrow(m), m[,belongID]), 
         function(i, x, time) x[i, , drop=FALSE][which.max(x[i,time]),], m[1,], x=m, time=time
      )
    )
 } 
```

I do not know how to incorporate the "0 Rating" constraint.

EDIT: A follow up question:

Does anyone know how the `getRating` function should be altered if not only rating zero, but more ratings need to be taken into account (for instance 0,1,4 and 5)? Thus assign to most recent, unless Rating 0 or 1 or 4 or 5? If Rating is 0,1,4,5 assign to most recent entry with a different rating. If all ratings are 0,1,4 or 5 assign to the most recent of those. I tried the following, but that did not work:

```
getRating <- function(x){
  iszero <- x$Rating == 0 | x$Rating == 1 | x$Rating == 4 | x$Rating ==5
  if(all(iszero)){
    id <- which.max(x$Time)
  } else {
    id <- which.max((!iszero)*x$Time) 
            # This trick guarantees taking 0 into account
  }
  x[id,]
}
# Do this over the complete data frame
do.call(rbind,lapply(split(Data,Data$belongID),getRating)) 
     # edited per Tyler's suggestion' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:16:30.417

Here's my crack at it (interesting problem):

**Reading in your data:**

```
m <- read.table(text="belongID   uniqID   Time   Rating  
   1           101       5      0  
   1           102       4      0  
   2           103       4      0  
   2           104       3      0  
   2           105       2      5
   3           106       4      2  
   3           107       5      0  
   3           108       5      1 ", header=T) 
```

**Extracting the rows you asked for:**

```
m2 <- m[order(m$belongID, -m$Time), ]                 #Order to get max time first
LIST <- split(m2, m$belongID)                         #split by belongID
FUN <- function(x) which(cumsum(x[, 'Rating'])!=0)[1] #find first non zero Rating
LIST2 <- lapply(LIST, function(x){                    #apply FUN; if NA do 1st row
        if (is.na(FUN(x))) {
            x[1, ]
        } else {
            x[FUN(x), ]
        }
    }
)
do.call('rbind', LIST2)                              #put it all back together 
```

**Which yields:**

```
 belongID uniqID Time Rating
1        1    101    5      0
2        2    105    2      5
3        3    108    5      1 
```

**EDIT** With so many people answering this problem (fun to solve IMHO) it begged for a microbenchmark test (Windows 7):

```
Unit: milliseconds
    expr       min        lq    median        uq      max
1   JIGR  6.356293  6.656752  7.024161  8.697213 179.0884
2 JORRIS  2.932741  3.031416  3.153420  3.552554 246.9604
3  PETER 10.851046 11.459896 12.358939 17.164881 216.7284
4  TYLER  2.864625  2.961667  3.066174  3.413289 221.1569 
```

And a graph:

![enter image description here](../Images/599ebe040bb9b628fd966b21741eabba.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:09:59.727

Here's a solution that uses data.table for ease of filtering and performing my function `getRecentRow` separately for each `belongID`.

```
library(data.table)

# Load the data from the example.
dat = structure(list(belongID = c(1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L), 
          uniqID = 101:108, Time = c(5L, 4L, 4L, 3L, 2L, 4L, 5L, 5L),
          Rating = c(0L, 0L, 0L, 0L, 5L, 2L, 0L, 1L)), 
          .Names = c("belongID", "uniqID", "Time", "Rating"),
          row.names = c(NA, -8L), class = c("data.table", "data.frame"))

dat = data.table(dat) # Convert to data table.

# Function to get the row for a given belongID
getRecentRow <- function(data) {
    # Filter by Rating, then order by time, then select first.
    row = data[Rating != 0][order(-Time)][1]

    if(!is.na(row$uniqID)) {
        # A row was found with Rating != 0, return it.
        return(row)
     } else {
          # The row was blank, so filter again without restricting. rating.
          return(data[order(-Time)][1])
        }  
}

# Run getRecentRow on each chunk of dat with a given belongID
result = dat[,getRecentRow(.SD), by=belongID]

     belongID uniqID Time Rating
[1,]        1    101    5      0
[2,]        2    105    2      5
[3,]        3    108    5      1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T13:13:51.970

One suggestion would be:

```
library(plyr)

maxV <- function(b) {
    if (b[which.max(b$Time), "Rating"]  != 0) {
        return(b[which.max(b$Time), ])
    } else if (!all(b$Rating==0)) {
        bb <- b[order(b$Rating), ]
        return(bb[bb$Rating != 0,][1, ])
    } else {
        return(b[which.max(b$Time),])
    }
}

a <- read.table(textConnection(" belongID   uniqID   Time   Rating  
   1           101       5      0  
   1           102       4      0  
   2           103       4      0  
   2           104       3      0  
   2           105       2      5
   3           106       4      2  
   3           107       5      0  
   3           108       5      1 "), header=T)

ddply(a, .(belongID), maxV)
  belongID uniqID Time Rating
1        1    101    5      0
2        2    105    2      5
3        3    108    5      1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T13:16:36.900

EDIT :

As speed is your main concern, I edited my trick into your initial solution, which results in something like this:

```
uniqueMax <- function(m, belongID = 1, time = 3) {
  t(
    vapply(
      split(1:nrow(m), m[,belongID]), 
      function(i, x, time){ 
        is.zero <- x[i,'Rating'] == 0
        if(all(is.zero)) is.zero <- FALSE
        x[i, , drop=FALSE][which.max(x[i,time]*(!is.zero)),]
      }
      , m[1,], x=m, time=time
      )
    )
} 
```

My original solution, which is a bit more readible than the previous one :

```
# Get the rating per belongID
getRating <- function(x){
  iszero <- x$Rating == 0
  if(all(iszero)){
    id <- which.max(x$Time)
  } else {
    id <- which.max((!iszero)*x$Time) 
            # This trick guarantees taking 0 into account
  }
  x[id,]
}
# Do this over the complete data frame
do.call(rbind,lapply(split(Data,Data$belongID),getRating)) 
     # edited per Tyler's suggestion 
```

The result :

```
tc <- textConnection('
belongID   uniqID   Time   Rating  
   1           101       5      0  
   1           102       4      0  
   2           103       4      0  
   2           104       3      0  
   2           105       2      5
   3           106       4      2  
   3           107       5      0  
   3           108       5      1 ')

Data <- read.table(tc,header=TRUE)

do.call(rbind,lapply(split(Data,Data$belongID),getRating)) 
```

to give :

```
 belongID uniqID Time Rating
1        1    101    5      0
2        2    105    2      5
3        3    108    5      1 
```

* * *

EDIT : Just for fun, I did a benchmarking as well (using `rbenchmark`) on a small data set with 1000 replications, and a big one with 10 replications :

The outcome :

```
> benchmark(Joris(Data),Tyler(Data),uniqueMax(Data),
+           columns=c("test","elapsed","relative"),
+           replications=1000)
             test elapsed relative
1     Joris(Data)    1.20 1.025641
2     Tyler(Data)    1.42 1.213675
3 uniqueMax(Data)    1.17 1.000000

> benchmark(Joris(Data2),Tyler(Data2),uniqueMax(Data2),
+           columns=c("test","elapsed","relative"),
+           replications=10)
              test elapsed relative
1     Joris(Data2)    3.63 1.174757
2     Tyler(Data2)    4.02 1.300971
3 uniqueMax(Data2)    3.09 1.000000 
```

Here I just wrapped a function Joris() and Tyler() around our solutions, and created Data2 as follows :

```
Data2 <- data.frame(
  belongID = rep(1:1000,each=10),
  uniqID = 1:10000,
  Time = sample(1:5,10000,TRUE),
  Rating = sample(0:5,10000,TRUE)
  ) 
```

# javascript - 将复选框和文本框设为只读

> ID：10533600
> 
> 赞同：1
> 
> 时间：2012-05-10T12:05:11.490
> 
> 标签：javascript, jquery

以下是我的javascript代码，有没有办法使复选框和文本框只读？

```
//display textboxes and checkbox when condition is true.
if($$("id").value =="something"){
       document.getElementById("textboxl").style.display="";
        document.getElementById("chkbox1").style.display="";
        document.getElementById("textbox2").style.display="";
        document.getElementById("chkbox2").style.disable="";
    } 
```

我必须显示然后禁用它（我的意思是让它只读）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:05:58.243

**更新：**

```
element.readOnly = true 
```

* * *

**设置`readonly`：**

```
$('#chkbox1').prop('readonly', true); 
```

或者：

```
$('#chkbox1').attr('readonly', 'readonly'); 
```

**显示可以通过以下方式完成：**

```
$('#chkbox1').show(); 
```

或与：

```
$("#chkbox1").css('display', 'block'); 
```

# android - Android FTP 输入流转换成 XML

> ID：10533601
> 
> 赞同：0
> 
> 时间：2012-05-10T12:05:15.430
> 
> 标签：android, xml, ftp

您好我正在尝试从 FTP 服务器读取 XML 文件并对其进行解析。

但我无法使用我的字符串作为输入源。我可以看到我能够读取 LogCat 中的文件，并且可以在浏览器中打开 XMl 文件。但我不确定如何将字符串用作输入源。

代码：

```
public void readXML(){

    try {
        Log.e("FTP", "Starting ftp session");

        FTPClient ftp = new FTPClient();

        Log.e("FTP", "Connecting to FTP");
        ftp.connect("ftp.domain.com");

        Log.e("FTP", "Providing credentials to FTP");
        ftp.login("user", "pswd");
        if(ftp.login("user", "pswd")){
            Log.e("FTP", "Was able to connect to FTP");
        }

        ftp.enterLocalPassiveMode();
        ftp.changeWorkingDirectory("/folder/XML");

        Log.e("FTP", "Getting stream");
        InputStream inStream = ftp.retrieveFileStream("file.xml");
        InputStreamReader isr = new InputStreamReader(inStream, "UTF8");
        BufferedReader reader = new BufferedReader(isr);

        String Input = "";
        Log.e("FTP", "Reading filestream");

        do{
            Input = Input + reader.readLine() + "\n";
            Log.e("FTP", reader.readLine());

        }while(reader.readLine()!=null);            

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        Log.e("FTP", "Parsing inputsource");
        Document doc = db.parse(new InputSource(new StringReader(Input)));
        doc.getDocumentElement().normalize();

        Log.e("FTP", "Creating nodelist");
        NodeList nodeList = doc.getElementsByTagName("TAG"); 
```

我不确定 StringReader 是否是正确的方法。

编辑：

感谢拉杰什

这是我的解决方案：

```
public void readXML(){

    try {
        Log.e("FTP", "Starting ftp session");

        FTPClient ftp = new FTPClient();

        Log.e("FTP", "Connecting to FTP");
        ftp.connect("ftp.domain.com");

        Log.e("FTP", "Providing credentials to FTP");
        ftp.login("user", "pswd");
        if(ftp.login("user", "pswd")){
            Log.e("FTP", "Was able to connect to FTP");
        }

        ftp.enterLocalPassiveMode();
        ftp.changeWorkingDirectory("/folder/XML");

        Log.e("FTP", "Getting stream");
        InputStream inStream = ftp.retrieveFileStream("file.xml");          

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        Log.e("FTP", "Parsing inputsource");
        Document doc = db.parse(new InputSource(inStream));
        doc.getDocumentElement().normalize();

        Log.e("FTP", "Creating nodelist");
        NodeList nodeList = doc.getElementsByTagName("TAG"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:50:55.367

一些建议/意见：

1.  您可以`InputSource`直接从中创建`InputStream`而无需中间`String`
2.  与其通过多次`String`附加s来创建 a ，不如使用它是有效的`String``StringBuffer`
3.  使用以下代码将导致跳过备用行（并且可能是无效的 XML - 这可能是您**的**问题）

    ```
    do{
        Input = Input + reader.readLine() + "\n";
        Log.e("FTP", reader.readLine());

    }while(reader.readLine()!=null); 
    ```

# c# - PHP 中的 MACTripleDES

> ID：10533604
> 
> 赞同：5
> 
> 时间：2012-05-10T12:05:31.780
> 
> 标签：c#, php, encryption, tripledes

我正在尝试获得与 C#[`MACTripleDES`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.mactripledes.aspx)类等效的 MAC TripleDES。

我试过关注[`mcrypt()`](http://www.php.net/manual/en/function.mcrypt-cbc.php)，但这只是在 TripleDES 中编码。我需要获得一个等效的 MACTripleDES 字符串作为在 C# 中生成的字符串来验证消息。

我还查看了 PHP 的[`hash_hmac()`](http://php.net/manual/en/function.hash-hmac.php)函数，但它没有提供使用 TripleDES 生成 MAC 的选项

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T22:50:37.493

我不确定，因为微软没有费心说他们的类符合什么标准，但我怀疑[这个 NIST 文档](http://www.itl.nist.gov/fipspubs/fip113.htm)是微软类正在计算的，只使用三重 DES 代替 DES。

我想您将不得不使用 mcrypt 中的原语编写自己的方法。

编辑1：

受赏金的启发，我有这两个示例显示了 PHP 和 C# 中的等效结果。

首先，C#：

```
using System;
using System.Text;
using System.Security.Cryptography;

namespace TDESMacExample
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            var keyString = "012345678901234567890123";
            var keyBytes = Encoding.ASCII.GetBytes(keyString);
            var mac = new MACTripleDES(keyBytes);
            var data = "please authenticate me example number one oh one point seven niner";
            Console.WriteLine(data.Length);
            var macResult = mac.ComputeHash(Encoding.ASCII.GetBytes(data));
            Console.WriteLine(BitConverter.ToString(macResult));
            // B1-29-14-74-EA-E2-74-2D
        }
    }
} 
```

接下来，PHP：

```
 <?php
    $data = 'please authenticate me example number one oh one point seven niner';
    $key = '012345678901234567890123'; // Key must be 24 bytes long
    $iv = '\x00\x00\x00\x00\x00\x00\x00\x00'; // All zero IV is required

    $cipher = mcrypt_cbc(MCRYPT_3DES, $key, $data, MCRYPT_ENCRYPT, $iv);
    $mac_result = substr($cipher, -8); // Last 8 bytes of the cipher are the MAC

    echo "mac result : " . bin2hex($mac_result);
    echo "<br>";
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T18:39:18.553

MAC 只是 CBC 加密数据的最后八个字节。如果键、IV 和填充方法匹配，您应该能够只使用这些字节。

有关 MAC 定义的更多详细信息，请参阅[FIPS-81 的附录 F，DES 操作模式](http://www.itl.nist.gov/fipspubs/fip81.htm)。

# java - 在 Web 应用程序中绘制图形

> ID：10533605
> 
> 赞同：1
> 
> 时间：2012-05-10T12:05:35.667
> 
> 标签：java, jsp, spring-mvc

我正在使用 Spring 开发一个 Web 应用程序。我需要绘制图表并将它们显示给用户。这些值存储在数据库中。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:18:04.773

您必须决定在哪里创建图表。你有两个选择：

1.  在服务器上创建图表并将它们作为图像或 pdf 发送到客户端。
2.  向客户端发送原始数据并让他们通过 html、flash 或 javascript 呈现图表

每种方式都有其自身的优势和局限性——您必须针对您的特定用例做出决定。

如果您在服务器端呈现图表，您的交互性会受到限制，但您的客户端不需要太多性能来呈现图表。在这里，您必须考虑缓存以保护您的服务器性能。

在客户端，您必须处理不同的浏览器，并且必须考虑客户端渲染性能。

如果 2\. 对你来说没问题，我会推荐使用 javascript - 这样你的用户就不需要安装任何插件，比如 flash，而且你有很多可能来创建漂亮的图表。

有一些不错的框架可以使用 javascript 创建图表，例如：

*   [高图](http://www.highcharts.com/)
*   [格拉斐尔](http://g.raphaeljs.com/)
*   [JS 图表](http://www.jscharts.com/)
*   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:35:31.097

我之前使用过带有 Spring MVC 的[Google Charts 。](https://developers.google.com/chart/)通常每当我需要显示图表时，我总是在图表旁边显示表格数据。因此，我只使用 jQuery，解析 html 表中的数据并将其传递给 google Chart API。您可能想查看 Google Chart 页面以获取示例。这是相当不错的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:25:38.607

正如@aiolos 所说，您可以在客户端或服务器中生成图表图像。我没有使用启用 JavaScript 的图表，但是当我必须以服务器端的方式生成图表时，我将使用[Cewolf](http://cewolf.sourceforge.net/new/index.html)。它是一个基于 JFreeChart 的 Java 库，它有一些有用的标签可以在 JSP 页面中嵌入图表。

我在 Spring Applications 中对其进行了测试，并且效果很好。

# c++ - Opengl GL_QUADS 产生错误 0x506

> ID：10533609
> 
> 赞同：6
> 
> 时间：2012-05-10T12:05:50.113
> 
> 标签：c++, opengl, glsl

我在 OpenGL 中有一些代码可以将 YUV 图像渲染到 OpenGL 视口上。该程序在 nvidia 卡上运行时没有问题，但在英特尔 HD 3000 上运行时会产生错误，遗憾的是它是目标机器。代码中标记了产生错误的点。

着色器程序是

```
// Vertex Shader
#version 120
void main() {
  gl_TexCoord[0] = gl_MultiTexCoord0;
  gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
}

// fragment shader
#version 120
uniform sampler2D texY;
uniform sampler2D texU;
uniform sampler2D texV;
void main() {
  vec4 color;
  float y = texture2D(texY, gl_TexCoord[0].st).r;
  float u = texture2D(texU, gl_TexCoord[0].st).r;
  float v = texture2D(texV, gl_TexCoord[0].st).r;
  color.r = (1.164 * (y - 0.0625)) + (1.596 * (v - 0.5));
  color.g = (1.164 * (y - 0.0625)) - (0.391 * (u - 0.5)) - (0.813 * (v - 0.5));
  color.b = (1.164 * (y - 0.0625)) + (2.018 * (u - 0.5));
  color.a = 1.0;
  gl_FragColor = color;
}; 
```

然后我像这样运行程序：

```
GLuint textures[3];
glGenTextures(3, textures);

glBindTexture(GL_TEXTURE_2D, textures[YTEX]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glBindTexture(GL_TEXTURE_2D, textures[UTEX]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glBindTexture(GL_TEXTURE_2D, textures[VTEX]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glBindTexture(GL_TEXTURE_2D, 0);

GLsizei size = width * height;

GLvoid *y = yuv_buffer;
GLvoid *u = (GLubyte *)y + size;
GLvoid *v = (GLubyte *)u + (size >> 2);

glUseProgram(program_id);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textures[0]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width, height, 0, GL_LUMINANCE,
            GL_UNSIGNED_BYTE, y);
glUniform1i(glGetUniformLocation(program_id, "texY"), 0);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, textures[1]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width >> 1, height >> 1, 0,
            GL_LUMINANCE, GL_UNSIGNED_BYTE, u);
glUniform1i(glGetUniformLocation(program_id, "texU"), 1);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, textures[2]);
glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE, width >> 1, height >> 1, 0,
            GL_LUMINANCE, GL_UNSIGNED_BYTE, u);
glUniform1i(glGetUniformLocation(program_id, "texV"), 2);

glBegin(GL_QUADS);
glTexCoord2f(texLeft, texTop);
glVertex2i(left, top);
glTexCoord2f(texLeft, texBottom);
glVertex2i(left, bottom);
glTexCoord2f(texRight, texBottom);
glVertex2i(right, bottom);
glTexCoord2f(texRight, texTop);
glVertex2i(right, top);
glEnd();

// glError() returns 0x506 here

glBindTexture(GL_TEXTURE_2D, 0);
glActiveTexture(GL_TEXTURE0);

glUseProgram(0); 
```

**更新**，因为帧缓冲区发生错误，我发现它们是这样使用的：当程序被实例化时，一个帧缓冲区是这样创建的：

```
glViewport(0, 0, (GLint)width, (GLint)height);

glGenFramebuffers(1, &fbo_id);
glGenTextures(1, &fbo_texture);
glGenRenderbuffers(1, &rbo_id);

glBindTexture(GL_TEXTURE_2D, fbo_texture);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, width, height, 0,
            GL_RGBA, GL_UNSIGNED_BYTE, 0);
glBindTexture(GL_TEXTURE_2D, 0);

glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rbo_id);
glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height);
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, 0);

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo_id);
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,
                          GL_TEXTURE_2D, fbo_texture, 0);
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,
                            GL_RENDERBUFFER_EXT, rbo_id);

GLenum status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT);
glBindFramebuffer(GL_FRAMEBUFFER_EXT, 0);

glPushAttrib(GL_TEXTURE_BIT);

glBindTexture(GL_TEXTURE_2D, m_frameTexture->texture());
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_MIRRORED_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glPopAttrib(); 
```

YUV 图像拼接成瓦片，这些瓦片是通过在这个 fbo 中渲染来组装的。每当帧开始时，都会执行以下操作：

```
glBindFramebuffer(GL_FRAMEBUFFER_EXT, 0);
glDrawBuffer(GL_BACK);

glViewport(0, 0, (GLint)width, (GLint)height);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0, (double)width, 0.0, (double)height, -1.0, 1.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glBindFramebuffer(GL_FRAMEBUFFER_EXT, fbo_id); 
```

然后执行上面的代码，在所有的瓦片组装在一起之后

```
glBindFramebuffer(GL_FRAMEBUFFER_EXT, 0);
glPushAttrib(GL_VIEWPORT_BIT | GL_TEXTURE_BIT | GL_ENABLE_BIT);
glViewport(0, 0, width, height);

glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glClear(GL_COLOR_BUFFER_BIT);

glMatrixMode(GL_PROJECTION);
glPushMatrix();

glLoadIdentity();
glOrtho(0.0, (double)width, 0.0, (double)height, -1.0, 1.0);

glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

glEnable(GL_TEXTURE_2D);
glDisable(GL_DEPTH_TEST);

glBindTexture(GL_TEXTURE_2D, fbo_texture);

glBegin(GL_QUADS);
glTexCoord2i(0, 0);
glVertex2f(renderLeft, renderTop);
glTexCoord2i(0, 1);
glVertex2f(renderLeft, renderTop + renderHeight);
glTexCoord2i(1, 1);
glVertex2f(renderLeft + renderWidth, renderTop + renderHeight);
glTexCoord2i(1, 0);
glVertex2f(renderLeft + renderWidth, renderTop);
glEnd();

glPopMatrix();

glMatrixMode(GL_PROJECTION);
glPopMatrix();
glPopAttrib(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T13:22:19.903

之后的价值是什么`status`：

```
GLenum status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT); 
```

如果该值不是`GL_FRAMEBUFFER_COMPLETE`，则 OpenGL 在尝试从 FBO 读取时可能会阻塞。

[glCheckFramebufferStatus 文档](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glCheckFramebufferStatus.xml)描述了它可以返回的其他（错误）值，以及导致它们的原因。

特别感兴趣的可能是：

> 如果当前绑定的帧缓冲区不是完整的帧缓冲区，则尝试使用帧缓冲区进行写入或读取是错误的。**这意味着如果在帧缓冲区未完成帧缓冲区时调用渲染命令**（glDrawArrays 和 glDrawElements）以及读取帧缓冲区的命令（glReadPixels、glCopyTexImage2D 和 glCopyTexSubImage2D），**将生成错误 GL_INVALID_FRAMEBUFFER_OPERATION。**

（强调我的）

**根据您的评论进行编辑：**

用 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT 解释文档：

并非所有帧缓冲区连接点都是完整的帧缓冲区连接。这意味着正在发生以下情况之一：

*   至少一个附加了渲染缓冲区或纹理的附加点的附加对象不再存在，或者附加的图像的宽度或高度为零，
*   颜色附加点附加了一个不可颜色渲染的图像。颜色可渲染格式包括 GL_RGBA4、GL_RGB5_A1 和 GL_RGB565。
*   深度附加点附加了一个不可深度渲染的图像。GL_DEPTH_COMPONENT16 是唯一可深度渲染的格式。
*   模板连接点附加了一个不可模板渲染的图像。GL_STENCIL_INDEX8 是唯一可模板渲染的格式。

我们可以排除最后 2 个项目符号，因为您似乎没有使用深度或模板附件。这留下了两个需要检查的电话：

```
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, fbo_texture, 0);
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, rbo_id); 
```

来自[FBO 上的 opengl.org wiki](http://www.opengl.org/wiki/Framebuffer_Object)：

当任何附件“不完整”时，您会得到 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT。完整性的标准是：

> *   图像的源对象仍然存在，并且具有与它附加的相同类型。
> *   图像具有非零宽度和高度。
> *   3D 或阵列纹理附件的层小于纹理的深度。
> *   图像的格式必须符合上述连接点的要求。颜色附件等的颜色可渲染格式。

wiki 说 GL_COLOR_ATTACHMENTi​：

> 这些附着点只能将图像以可渲染颜色的格式绑定到它们。所有压缩图像格式都不能进行颜色渲染，因此不能附加到 FBO。

仔细检查 fbo_texture 和 rbo_id 是否仍然有效，并且它们的高度/宽度不是 0。最后，它可能是 fbo_texture 的格式。您已将其设置为 GL_RGBA8，但文档说有效选项*包括*GL_RGBA4、GL_RGB5_A1 和 GL_RGB565。我不确定这是否排除了所有其他格式（例如您的 GL_RGBA8）。wiki 似乎建议任何非压缩格式都可以工作。尝试将其切换到 GL_RGBA4，看看是否可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:56:58.157

[glGetError](http://www.opengl.org/sdk/docs/man/xhtml/glGetError.xml)错误代码“粘住”并且不会自动清除。如果您的程序在开始时产生 OpenGL 错误，并且您稍后检查错误代码 1000 opengl 调用，错误将仍然存在。

因此，如果您想了解真正发生了什么，请在每次 OpenGL 调用后检查错误，或者在循环中调用[glGetError](http://www.opengl.org/sdk/docs/man/xhtml/glGetError.xml)，直到返回所有错误代码（如 OpenGL 文档所建议的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:12:45.393

我解决了这个问题。这是一个扩展问题，导致渲染缓冲区对象消失。我基本上改变了这个

```
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rbo_id);
glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, width, height);
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, 0);

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo_id);
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,
                          GL_TEXTURE_2D, fbo_texture, 0);
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT,
                            GL_RENDERBUFFER_EXT, rbo_id);

GLenum status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT); 
```

为了这

```
glBindRenderbuffer(GL_RENDERBUFFER, rbo_id);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, width, height);
glBindRenderbuffer(GL_RENDERBUFFER, 0);

glBindFramebuffer(GL_FRAMEBUFFER, fbo_id);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
                          GL_TURE_2D, fbo_texture, 0);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,
                            GL_RENDERBUFFER, rbo_id);

GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER); 
```

然后它起作用了。我仍然想知道到底是什么问题，但到目前为止我对结果很满意。特别感谢@luke，他的回答帮助找到了问题的确切点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:11:33.730

确切地说，什么命令会引发错误？尝试替换`GL_QUADS`为`GL_TRIANGLE_FAN`.

# css - 打印媒体查询 `@media print` 在 iPad 上有效吗？

> ID：10533614
> 
> 赞同：2
> 
> 时间：2012-05-10T12:06:03.497
> 
> 标签：css, ipad, printing, media-queries

我有一个使用媒体查询来定位印刷媒体的网页。

像这样：

```
@media print {
    #user_profile h1 {
        font-size: 16px;
        margin-top: 10px;
    }
} 
```

当我尝试通过 AirPrint 从 iPad 打印页面时，未应用打印样式。

`@media print`手机浏览器不支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:03:14.927

如果其他样式没有屏幕媒体查询，我认为它也适用于打印。尝试向普通 css 添加屏幕媒体查询，尝试将所有打印 css 放在底部以覆盖普通 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T12:38:58.283

`@media print`从 iOS 1.0 开始支持。

但是，Mobile Safari 会主动缓存资产，并且您修改的样式表可能无法从服务器获取。您可以附加一个查询字符串（例如styles.css?v=1）以确保文件被重新加载。

# playframework - playframework 中的 Scalatest 和 Anorm

> ID：10533619
> 
> 赞同：1
> 
> 时间：2012-05-10T12:06:18.710
> 
> 标签：playframework, scalatest, anorm

我正在开发一个 playframework 项目，我们使用 scalatest 进行测试。我们还想做一些数据库测试。在 conf/application.conf 我们建立了一个数据库连接，但是当我们启动我们的测试时这似乎被忽略了。我们该如何配置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:35:44.650

您的测试需要在 FakeApplication 上下文中运行。您可以像这样包装每个测试（使用 FunSpec）：

```
describe("MyEntity") {
  it("should do something") {
    running(FakeApplication()) {
      MyEntity.findById(1L).value.name should be("some name")
    }
  }
} 
```

如果您不想为每个测试重复此操作，您可以使用多种方法，请参阅 scalatest 文档以获取有关如何共享固定装置的信息：[共享固定装置](http://www.scalatest.org/user_guide/sharing_fixtures "共享灯具")

# android - 如何在Android中检查地址是否正确？

> ID：10533620
> 
> 赞同：0
> 
> 时间：2012-05-10T12:06:18.790
> 
> 标签：android, street-address

我正在 Android 中创建一个应用程序，我要求用户输入他的地址。用户有可能输入错误的地址，所以我如何检查输入的地址是否正确。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:09:56.870

您可以在地图上显示此地址并要求用户确认它是正确的。简单的例子：

```
var uri = Android.Net.Uri.Parse ("geo:0,0?q=my+street+address");
var mapIntent = new Intent (Intent.ActionView, geouri);
startActivity (mapIntent); 
```

# php - 如何在 PHP 中提供动态 HTML？

> ID：10533622
> 
> 赞同：-5
> 
> 时间：2012-05-10T12:06:24.903
> 
> 标签：php, image, html, dynamic-content

我有一个我创建的 HTML 文件，它存储在其他地方的目录中。

问题是，我希望能够从外部获取内容并将其放置在 HTML 文件中。

我想我可以为此使用 PHP，因为它是服务器端的并且可以访问我想要的文件。

因此，我创建了一个 PHP 脚本，它打开并回显一个 HTML 文件，然后回显一些 JavaScript 以更改屏幕上的元素。

这是我的 PHP 文件：

```
<?php

$html = file_get_contents('file.html');

$imageurl = file_get_contents('url.txt');

$js = '<script type=\'text/javascript\'>updateImage(\'img1\', '.$imageurl.');</script>';

echo $html;

echo $js;

?> 
```

..和HTML文件：

```
<html>
<script type="text/javascript">
function updateImage(id, url) {
    var img = document.getElementsByName(id)[0];
    img.src = url;
}
</script>

<body>

<img src="" name="img1" />

</body>

</html> 
```

这不是最好的方法，但它有效。

我想知道一种在 PHP 中执行此操作的方法，而不是使用 JavaScript。

我不确定最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:12:08.960

您可以使用`include`and [ob_get_contents](http://php.net/manual/en/function.ob-get-contents.php)将 html 作为字符串获取并执行一些`str_replace`操作`preg_replace`。

您的 HTML：

```
<html>
    <body>
        <img src="{IMAGE_SRC}" width="512" height="512" name="image" />
    </body>
</html> 
```

你的PHP：

```
ob_start();
include 'your_file.html';
$buffer = ob_get_contents();
ob_end_clean();
$buffer = str_replace('{IMAGE_SRC}', 'your_image.png', $buffer);

print $buffer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:12:18.803

这是一个非常基本的问题。您应该阅读一些 PHP 和 HTML 教程。像这样的东西可以解决问题：

```
<html>

<body>
<img src="" width="512" height="512" name="<?= $somePhpVariableContainingTheName ?>" />
</body>

</html> 
```

# cuda - NVidia CUDA 跟踪或调试功能

> ID：10533624
> 
> 赞同：0
> 
> 时间：2012-05-10T12:06:40.363
> 
> 标签：cuda, nvidia

我可以在 CUDA 内核中放置跟踪或调试功能吗？我正在 Windows 7 VS2010 上编写程序，我刚刚发现要使用 NSIGHT Monitor，我必须有 2 个 GPU。不幸的是，我在笔记本电脑上，所以这不是一个真正的选择。我想我会退回到经过验证的真正调试/跟踪功能。类似于 OutputDebugString 的东西。我不知道是否存在。

任何帮助表示赞赏。谢谢，

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:23:04.417

Parallel Nsight 2.2 支持本地单 GPU 调试。

CUDA 计算能力 >= 2.0 支持来自设备代码的 printf。

# rhomobile - 在 rhomobile 中上传图片

> ID：10533629
> 
> 赞同：1
> 
> 时间：2012-05-10T12:07:13.023
> 
> 标签：rhomobile, rhodes

我尝试在 rhomobile 中上传图片。我从手机图库中选择图片并存储在我的应用程序中。
*我的问题是上传后图片存储在哪里？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:22:42.090

默认情况下，当您在模型的帮助下上传图像时，Rhomobile 应用程序具有 sqlite 数据库。它以 blob 格式存储图像名称

```
 enable :sync
 property :image_uri, :blob 
```

您可以通过调用 image_uri 的 blog_path 来访问图像

```
<% @images.each do |obj| %>
    <img src="<%=Rho::RhoApplication::get_blob_path(obj.image_uri)%>" width='300px' style="padding:10px"></img>
  <% end %> 
```

# html - ie中的CSS列问题？

> ID：10533630
> 
> 赞同：0
> 
> 时间：2012-05-10T12:07:14.897
> 
> 标签：html, css

我在 IE 中的 css 列有问题，但它在 FireFox 和 Chrome 中运行良好。

在 IE 中，它一直到页面下方的一行

这是代码：

```
.three-col {
-moz-column-count: 3;
-moz-column-gap: 20px;
-webkit-column-count: 3;
-webkit-column-gap: 20px;
} 
```

我该如何修复它，使其在 IE 以及其他浏览器上都很好？

感谢我得到的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:11:29.900

Internet Explorer[在版本 10 之前预计不会支持多列布局](http://caniuse.com/#search=column-count)。它当然不应该支持标记为在 Mozilla 和 Webkit 浏览器中测试的属性的实验版本。

您需要创建一个备用设计（或创建一个不使用实验性功能的单一设计），或使用测量页面、（实际、渲染的）字体大小等的 JavaScript 重新排列内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:11:53.500

我在一个可能对您有用的相关问题上发现了这一点。它是一个 jQuery 插件，可以使 ie 适用于 css3 列。

[http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

对于我发现这个的原始问题：[如何在 IE 上显示 CSS3 列？](https://stackoverflow.com/questions/5348061/how-to-display-css3-columns-on-ie)

# php - 发送邮件时phpmailer不重定向

> ID：10533631
> 
> 赞同：0
> 
> 时间：2012-05-10T12:07:15.123
> 
> 标签：php, redirect, phpmailer

我正在使用 phpmailer 发送电子邮件，当电子邮件发送成功后，我想将页面重定向到其他页面，但它不起作用。

我尝试使用服务器端重定向，即`header();`，但它不起作用。

当我在客户端尝试它时，它完全重定向到其他页面。而且我没有`sessions`在这个页面或其他页面上使用过任何东西。

下面是我尝试过的代码

```
if(!$mail->Send()){
 echo "Mailer Error: ". $mail->ErrorInfo;
}else{
 //echo "Message sent!";
 header('Location: contactus-thankyou.php');
 ?>
    <!-- <meta http-equiv="refresh" content="0; url=contactus-thankyou.php" /> -->
 <?php
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-31T18:26:01.917

解决方法是：将 SMTPDebug 值置为 0。

```
$mail->SMTPDebug = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-18T06:33:48.657

您可以使用 jQuery 来重定向，它可以工作。

```
<script>
    $(document).ready(function(){
       setTimeout(function(){
           location.href="../index.php";
       });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:43:57.820

尝试删除之间的空间`location and the url`

`header('Location:contactus-thankyou.php');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-03T04:38:36.153

原因是输出在 header loaction 语句之前被缓冲，而 header 语句通常不喜欢 echo 或之前服务器的输出。只需`obs_start();`在顶部和`obs_end_flush();`末尾使用：示例：

```
 obs_start();
    php mailer script starts.........
    ...
    obs_end_flush();
header("Location: index.php"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T12:43:38.960

您可以使用

```
echo "<script language='javascript' type='text/javascript'>location.href='contactus-thankyou.php'</script>"; 
```

代替

```
header('Location: contactus-thankyou.php'); 
```

# php - 通过表单提交将 Javascript 数组传递给 PHP 数组

> ID：10533632
> 
> 赞同：0
> 
> 时间：2012-05-10T12:07:23.727
> 
> 标签：php, jquery, json, forms, post

好的，所以我正在开发一个 Wordpress 插件，该插件允许用户更改选项的顺序。该选项在 php 中存储为一个数组，即`update_option('box_order',$box_array);`我已经将这些框的数组按顺序回显到具有 jQuery UI 的页面上，以允许拖动重新排序。

我监听重新排序并通过 JS 调用这个函数

```
var order = jQuery( "#sortable" ).sortable( "toArray" );//get array of ids in order
jQuery('input.order-display').val(order); //set input field val to order array 
```

这一切都很好，我得到 input[type=text] 显示随机播放的新订单。

但是 - 我有一个提交按钮，一旦订购完成，我需要提交表格。问题是我正在处理一个无法修改的现有插件。这个 PHP 插件接受输入内容并调用`update_option('box_order',$_POST['input_name']);`

你们对如何使 javascript 数组与 php 数组的语法完全匹配，以便在提交表单时用于通过我无法控制的插件更新 Wordpress 选项有什么建议。我不想命名插件，因为它是一个令人惊讶的项目，但我正在构建一个开源添加。

我知道 JSON.stringify() 等，但这不是一个选项，因为 PHP 插件只监听输入本身的 $_POST。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:23:34.787

我能想到两件事：

1.  动态创建`<input name="input_name" />`框并正常提交表单。这不是我的偏好，它有点骇人听闻。

2.  使用 AJAX 发布到 PHP 中，`input_name: jQuery.param(order)`用于将数组序列化为一种格式，使 PHP 将 POST 数据视为数组。另见：[http ://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)

# c++ - x264 DirectShow 过滤器的 CLSID

> ID：10533634
> 
> 赞同：0
> 
> 时间：2012-05-10T12:07:34.247
> 
> 标签：c++, visual-c++, directshow, video-capture, x264

我已经使用Monogram 中的[x264 DirectShow 过滤器](http://blog.monogram.sk/janos/2009/05/20/monogram-x264-encoder-1050/)来解码 h264 avc 视频，我需要在 directshow 中创建 innce 并将过滤器添加到图形中，我从 grapthEdit 检查了它的 CLSID，即“x264”，我想创建实例我们需要该过滤器的 GUID，我不知道如何使用“x264”值创建过滤器实例。

我正在使用带有 vc++ 的 directshow

任何人都可以对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:37:29.367

您可以使用 Monogram Graph Studio 查看 CLSID，我记得上次检查时一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:33:55.827

由于此过滤器是开源的，您只需要查看正确的标题。您只需从[此处](http://dev.monogram.sk/websvn/filedetails.php?repname=x264_enc&path=/trunk/src/x264_types.h)复制 CLSID_MonogramX264并使用`CoCreateInstance`.

# sql - SQL, XML 插入多个节点

> ID：10533637
> 
> 赞同：1
> 
> 时间：2012-05-10T12:07:38.593
> 
> 标签：sql, xml, insert, nodes

我有以下要插入数据库的 xml

```
<latestjourneys>
    <journey>
        <startLocation>London</startLocation>
        <endLocation>manchester</endLocation>
        <leavingDay>
             <mon>Yes</mon>
             <tue>No</tue>
        </leavingday>
    <journey>
    <journey>
        <startLocation>Liverpool</startLocation>
        <endLocation>Cardiff</endLocation>
        <leavingDay>
             <mon>Yes</mon>
             <tue>No</tue>
        </leavingday>
    <journey>
</latestjourneys> 
```

我正在使用以下 sql

```
INSERT INTO test (startLocation,endLocation,mon,tue)
SELECT 
X.product.query('startLocation').value('.', 'VARCHAR(255)'),
X.product.query('endLocation').value('.', 'VARCHAR(255)'),
X.product.query('Mon').value('.', 'VARCHAR(255)'),
X.product.query('Tue').value('.', 'VARCHAR(255)')
FROM (
SELECT CAST(x AS XML)
 FROM OPENROWSET(
 BULK '#fileLocation#',
 SINGLE_BLOB) AS T(x)
) AS T(x)
 CROSS APPLY x.nodes('latestjourneys/journey') AS X(product) 
```

当我使用此代码时，只会插入 startLocation 和 endLocation。当我将 CROSS APPLY 更改为

```
CROSS APPLY x.nodes('latestjourneys/journey/leavingDay') AS X(product) 
```

只有日子被插入。

有没有办法可以插入两条数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:42:45.887

如果您使用的是 SQL Server 2005 或更高版本 - 您可以使用以下内容：

```
SELECT
    StartLocation = Journey.value('(startLocation)[1]', 'varchar(50)'),
    EndLocation = Journey.value('(endLocation)[1]', 'varchar(50)'),
    LeaveMon = Leaving.value('(mon)[1]', 'varchar(10)'),
    LeaveTue = Leaving.value('(tue)[1]', 'varchar(10)')
FROM
    X.nodes('/latestjourneys/journey') AS Nodes(Journey)
CROSS APPLY
    Journey.nodes('leavingDay') AS Subnode(Leaving) 
```

基本上，第一次`.nodes()`调用会为您提供所有`<journey>`元素的列表 - 然后从每个元素中，您需要`.nodes()`再次调用以获取`<leavingDay>`子节点中的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T05:47:04.237

声明 @temp 表（id​​ int，guid uniqueidentifier）

将@XMlData 声明为 xml；

set @XMlData = '在此处粘贴您的 xml'

插入@temp (id, guid) SELECT XTbl.Cats.value('.', 'int'), newid() FROM @XMlData.nodes('/users/user') AS XTbl(Cats)

从 @temp 中选择 *

输出：

id 引导 10 12FF8543-D98C-4CF3-BA0B-CD4CFEF5A0C3 20 F6244519-F40E-4E28-9C91-5832E7F45A70 30 6775BED5-1127-4D8E-88D2-ECE9CED55056

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T12:37:03.283

嗯..我认为 value 函数将使用 XPath 表达式返回节点的值，所以可能会执行以下操作：

```
X.product.value('/latestjourneys/journey/leavingDay') 
```

我对 SQL 的 XML 支持不是很熟悉，但我希望这会有所帮助。

您还可以查看：http: [//msdn.microsoft.com/en-us/library/ms345117%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms345117%28v=sql.90%29.aspx)

# java - 从动态壁纸读取倾斜传感器

> ID：10533638
> 
> 赞同：4
> 
> 时间：2012-05-10T12:07:41.823
> 
> 标签：java, android, eclipse

我正在制作我的第一张动态壁纸。我从示例[CubeWallpaper](http://developer.android.com/resources/samples/CubeLiveWallpaper/index.html)中的代码开始并对其进行修改。到目前为止一切进展顺利，我现在正在绘制我自己的、完全不同的动画图形。

我现在希望我的图形能够响应手机的倾斜程度。我之前在非壁纸应用程序中实现了倾斜传感器。但是当我尝试将我的倾斜代码包含到壁纸中时，该`onSensorChanged()`方法似乎从未被调用过——至少我的日志消息从未出现在 logcat 中。

我不确定的一件事是在哪里附加`implements SensorEventListener`. 应该是我的类扩展`WallpaperService`还是它的子类扩展`Engine`？..实际上我已经尝试过两种方式 - 似乎都没有工作。是否需要做一些额外的事情才能使倾斜工作？

**编辑：**目前我猜测`implements SensorEventListener`被附加到扩展类`Engine`，所以我的代码的要点如下：

**编辑：**这可能与 SensorEventListener 正在运行的线程有关吗？我在某处读到它需要在 UI 线程上。

```
public class MicksWallPaper extends WallpaperService 
{
    // blah blah

    class MyWallPaper extends Engine implements SharedPreferences.OnSharedPreferenceChangeListener , SensorEventListener 
    {
        SensorManager sensorManager = null;
        onCreate()
        {
            sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
        }

        public void onSensorChanged(SensorEvent event)
        {
        Log.i("wp:","onSensorChanged"); // I never see this message
            synchronized (this) 
            {
                switch (event.sensor.getType())
                {
                    case Sensor.TYPE_ORIENTATION:
                        pitch = event.values[1];
                        Log.i("pitch=",""+pitch);
                    break;
                }
            }       
        }
    }    
} 
```

**编辑：**问题解决了。多么尴尬 - 我只是忘记为我的 sensorManager 调用 registerListener。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T23:27:12.647

（在食人魔的建议下……）

问题解决了。多么尴尬 - 我只是忘记为我的 sensorManager 调用 registerListener。

# java - JPA - EclipseLink - 如何在运行时配置数据库模式名称

> ID：10533645
> 
> 赞同：5
> 
> 时间：2012-05-10T12:08:02.143
> 
> 标签：java, eclipse, oracle, jpa, glassfish

我实现了一个使用 Oracle DB 的 Web 应用程序（JEE6、EJB WebProfile）。我的问题是，我需要更改使用的数据库模式（名称）而不重新编译/重新打包应用程序。所以我想要的（这只是一个想法，也许有人有更好的想法），是在服务器中有一些配置（JNDI），它指定了模式名称。但是如何配置 Eclipse Link 以在运行时使用其他模式名称？

细节：

目前我使用该`orm.xml`文件来指定架构名称。但是应用程序使用了三种不同的模式名称（一种用于开发，一种用于集成测试，一种用于生产），所以我需要编译和打包（maven）应用程序 3 次。

我有一个使用 Oracle DB 在 Glassfish 上运行的 JEE6 EJB WebProfile 应用程序，数据库连接由应用程序服务器处理并通过 JNDI 提供给应用程序。

有没有人知道如何在运行时配置数据库模式名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T12:29:17.733

您可以使用 EclipseLink [SessionCustomizer](http://www.eclipse.org/eclipselink/api/2.3/org/eclipse/persistence/config/SessionCustomizer.html)。

```
package some.java.package;

import org.eclipse.persistence.config.SessionCustomizer; 
import org.eclipse.persistence.sessions.Session; 
import org.eclipse.persistence.sessions.DatabaseLogin; 

public class MySessionCustomizer implements SessionCustomizer {

  private String schema = "some_schema";
  public MySessionCustomizer() {
      schema = ... // read from property, jndi, etc.
  }

  public void customize(Session session) { 
      session.getLogin().setTableQualifier(schema);
  } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:25:16.080

将 JPA 配置为使用数据源。然后，您可以为应用服务器中的应用程序配置不同的数据源。

或者，您可以通过传递一组属性来创建 EntitymanagerFactory：http: [//docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#createEntityManager%28java.util.Map%29](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#createEntityManager%28java.util.Map%29)

# iphone - SecKeyRawSign 给出 -50 (errSecParam) 错误 - 即使对于微不足道的苹果示例

> ID：10533647
> 
> 赞同：3
> 
> 时间：2012-05-10T12:08:17.937
> 
> 标签：iphone, ios, x509, pki

很难让一个非常基本的 SecKeySign() 版本工作（即将工作的 OSX SecSignTransformCreate()/SecTransformSetAttribute()/SecTransformExecute() 移植到 iOS）：

该代码几乎与[http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html 一致](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html)- 尽管进一步简化。

首先 - 设置 - 按照上面的链接。没有变化。

```
const char someData[] = "No one loves pain itself, but those who seek...";

NSData * blob = [NSData dataWithBytes:someData length:sizeof(someData)];
assert(blob);

SecKeyRef publicKeyRef, privateKeyRef;
int keySize = 2048;

OSStatus sanityCheck = noErr;
NSMutableDictionary * privateKeyAttr = [[NSMutableDictionary alloc] init];
NSMutableDictionary * publicKeyAttr = [[NSMutableDictionary alloc] init];
NSMutableDictionary * keyPairAttr = [[NSMutableDictionary alloc] init];

// attribute dictionaries for 2048 bit RSA key pair.
//
[keyPairAttr setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
[keyPairAttr setObject:[NSNumber numberWithUnsignedInteger:keySize] forKey:(__bridge id)kSecAttrKeySizeInBits];
[privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
[publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
[keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];
[keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs]; 
```

实际工作从生成密钥对开始：

```
sanityCheck = SecKeyGeneratePair((__bridge CFDictionaryRef)keyPairAttr, &publicKeyRef, &privateKeyRef);
assert(sanityCheck == noErr);

NSLog(@"Pub/Priv: %@/%@", publicKeyRef, privateKeyRef); 
```

据我所知，这非常有效。

问题在于使用它们签名；或者更确切地说是签名：

```
// Zero-ed Buffer for the signature.
//
size_t signatureBytesSize = SecKeyGetBlockSize(privateKeyRef);
assert(signatureBytesSize == keySize / 8);

uint8_t * signatureBytes = malloc( signatureBytesSize * sizeof(uint8_t) );
memset((void *)signatureBytes, 0x0, signatureBytesSize);

// Sign the binary blob; with type 1 padding.
//
sanityCheck = SecKeyRawSign(privateKeyRef,
                            kSecPaddingPKCS1,
                            (const uint8_t *)[blob bytes], [blob length],
                            (uint8_t *)signatureBytes, &signatureBytesSize
                            );
assert(sanityCheck == noErr); 
```

它总是返回 -50/errSecParam（传递给函数的一个或多个参数无效。）。

有什么建议么 ？这是在实际的 iPhone 上吗？

谢谢，

德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:53:30.900

据我所知 - SecKeyRawSign() 唯一可接受的输入是 SHA_DIGEST_LEN 的数据块。其他任何东西都被拒绝。

SHA1 哈希是由这个函数计算的——所以只需要传递所需的空间。

我还没有找到指定 SHA2 或其他哈希的方法。

矮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T03:21:42.830

我的 Xcode iOS 单元测试项目失败，所有与钥匙串相关的 API 返回 -50。我通过创建一个新的目标“单页”应用程序并将其设置为单元测试的主机来修复它。[如何获取 iOS 框架测试目标并在虚拟应用程序中运行它？](https://stackoverflow.com/questions/42423941/how-to-take-ios-framework-testing-target-and-run-it-in-a-dummy-app)

# java - JCIFS：文件检索太慢而无法使用

> ID：10533653
> 
> 赞同：12
> 
> 时间：2012-05-10T12:08:39.293
> 
> 标签：java, samba, jcifs, windows-share

我只是在测试[JCIFS](http://jcifs.samba.org/)以访问 Windows 共享。它非常慢，以至于完全无法使用。

```
import jcifs.smb.*;

class First {
    public static void main(String[] args) throws Exception {
    try {
        //jcifs.Config.setProperty( "jcifs.netbios.wins", "192.168.1.220" );
        NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("domain.com", "Administrator", "password");

        SmbFile f = new SmbFile("smb://10.17.15.12/Share/xml/file.xml", auth);
        SmbFileInputStream in = new SmbFileInputStream(f);
        byte[] b = new byte[8192];
        int n;
        while(( n = in.read( b )) > 0 ) {
        System.out.write( b, 0, n );
        }
    } catch (SmbException smbe) {
        System.err.println(smbe.getNtStatus());
        System.err.println(smbe.toString());
        System.err.println(smbe.getCause());
    }
    }
} 
```

初始输出需要很长时间，后续读取也很慢。任何想法如何使用它？也欢迎我可以编写 Java 代码以可移植方式访问 Windows 共享的任何替代方法

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T20:31:27.393

我在某处发现 SmbFileInputStream 不做自己的缓冲，因此是慢的原因。将 SmbFileInputStream 包装在 BufferedInputStream 中解决了这个问题。

```
 SmbFile sFile = new SmbFile(path, authentication);

 BufferedInputStream buf = new BufferedInputStream(new SmbFileInputStream(sFile)); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-16T21:39:01.357

在我自己的情况下，通过 JCIFS 将文件推送到 Windows 共享太慢而无法使用。

解决方案原来是定义属性

```
-Djcifs.resolveOrder=DNS

```

BCAST的[默认包含](http://jcifs.samba.org/src/docs/resolver.html)——将 NetBIOS 名称查询广播到 255.255.255.255——不必要地导致了长时间的延迟。（上面的链接来自[顶级 API 文档](http://jcifs.samba.org/src/docs/api/)。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-29T10:27:16.543

我注意到的是 jCIFS 做了“一些事情”（`jcifs.smb.SmbTransport.checkStatus(..))`对于它读取的每个块来说都是公平的 - 即对于读入缓冲区的每个块。这意味着使用 a`BufferedInputStream`可能真的会加快速度，但真正的问题仍然存在。它只是没有t 像以前一样经常发生，因此对总时间的影响较小。

**设置“ jcifs.util.loglevel=3** ”有很大帮助，看看到底出了什么问题！

就我而言，我必须`"jcifs.smb.client.dfs.disabled=false"`最后设置，因为`"jcifs.resolveOrder=DNS"`没有帮助..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T12:18:19.407

如果您可以依靠“其他东西”将共享挂载为本地目录，那么在 Java 中读取挂载共享中的文件应该是可移植的。

即使这不是一个真正的解决方案，也值得尝试一下，看看您是否能获得更快的读取速度。明显更快的读取速度可能会改变您对便携性相对重要性的看法。如果你没有得到显着的加速，那么你就会知道 JCIFS 不应该受到责备......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-06T08:53:28.220

即使有现有的建议，我仍然发现 JCIFS 太慢，无法通过我的本地网络传输视频。这似乎与从网络读取的每个缓冲区的开销有关，即使读取到大缓冲区 JCIFS 本身的缓冲区大小也是有限的，这就是问题所在。

如果您查看[https://jcifs.samba.org/src/patches/](https://jcifs.samba.org/src/patches/)有一个补丁，LargeReadWrite.patch。您需要应用补丁并重建代码才能使用它，但这对我来说有很大的不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-28T15:58:45.987

@Xolve0 添加的解决方案也对我有用。`SmbFileInput`尝试写入文件时也存在缓冲区问题。我使用相同`BufferedInputStream(new SmbFileInputStream(sFile))`的方法使纯文本文件的执行时间从 90 秒减少到不到一秒。

识别此特定问题的一种快速方法是跟踪`JCIFS`路径打开和文件本身写入之间的时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-02T11:53:09.653

我知道这是一个老问题，但对于其他尝试过其他解决方案无济于事的人来说：

就我而言，我能够跟踪 jcifs*大量*使用的减速`SecureRandom`，如果`/dev/random`报告熵不足，它会阻止。

安装`rng-tools`、配置和启用`rngd`使性能达到可接受的水平。

您可以使用以下命令[检查可用的熵](https://major.io/2007/07/01/check-available-entropy-in-linux/)（至少在 RHEL 上）：

```
cat /proc/sys/kernel/random/entropy_avail 
```

# windows-phone-7 - Onclick 以编程方式生成的元素

> ID：10533654
> 
> 赞同：3
> 
> 时间：2012-05-10T12:08:42.617
> 
> 标签：windows-phone-7

我以编程方式生成了很多文本块。我想将 onclick 函数绑定到它们...如果我将文本块写入我的 xaml 代码很容易，但是如果文本块是通过编程方式生成的，我该怎么做呢？

到目前为止我所拥有的：

```
TextBlock tb1 = new TextBlock();
tb1.KeyDown += new System.Windows.Input.KeyEventHandler(MyTextBlock_KeyDown);
...
private void MyTextBlock_KeyDown(object sender, GestureEventArgs e) {
  MessageBox.Show("hello world");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:29:13.273

```
public MainPage()
{
    InitializeComponent();

    TextBlock block = new TextBlock();
    block.Text = "Tap me";
    block.Tap += new EventHandler<GestureEventArgs>(block_Tap);

    TitlePanel.Children.Add(block);
}

void block_Tap(object sender, GestureEventArgs e)
{
    //Do something
} 
```

这工作得很好......

# ruby-on-rails - 日期时间转换

> ID：10533655
> 
> 赞同：1
> 
> 时间：2012-05-10T12:08:52.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 Rails 完全陌生（当然，对 ruby​​ 也很陌生）。

默认情况下，Rails 在创建表时会添加一个“created_at”列。

created_at 列显示类似 2012-05-08 17:23:58 UTC 的内容。

如何以另一种格式显示相同的日期？像这样的东西：2012 年 8 月 5 日？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:10:03.787

您可以为此使用[DateTime#strftime](http://apidock.com/ruby/DateTime/strftime)。

```
obj.created_at
 => Thu, 22 Mar 2012 00:07:12 UTC +00:00

obj.created_at.strftime("%m/%d/%Y")
 => "03/22/2012" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:39:23.540

从 [日期时间#Rails](http://api.rubyonrails.org/classes/DateTime.html)

obj.created_at.to_default_s => "2012-05-08"

像这样的东西：“08/05/2012”

# php - db查询的特殊分组和列表

> ID：10533666
> 
> 赞同：-1
> 
> 时间：2012-05-10T12:09:55.013
> 
> 标签：php, mysql

我有一个类似的表：

```
ID  |  NAME    |  GROUP_ID
1   | rand_str |  4
2   | rand_str |  2
3   | rand_str |  3
4   | rand_str |  0
5   | rand_str |  3
6   | rand_str |  1
7   | rand_str |  3
8   | rand_str |  3
9   | rand_str |  1
10  | rand_str |  0 
```

ID 是唯一 ID，名称值不为 null 并且包含 varchar 值，group_id 是最大 2 位正数。

假设查询返回此表。

我想要的是，使用 PHP，显示按其 group_id 分组的结果，如果可能的话，按编号最多到编号最少的方式对组 id 进行排序，并且“0”始终是最后一个，无论它的填充程度如何。

所以最终结果：

group id 3 存在 3 次，所以

1.  1- id_3、id_5、id_7 和 id_8 (group_id 3)
2.  2- id_6, id_9 (group_id 1)
3.  3-组 id 为 4 或 2，因为两者都包含 1 个项目
4.  4- group_id 0，即使它有 2 个项目 -> id_4，id_10

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:13:36.273

使用子查询来确定每个组的计数（以及它的顺序），然​​后将其与您的数据连接以检索记录：

```
SELECT my_table.* FROM my_table JOIN (
  SELECT   GROUP_ID,
           IF(GROUP_ID = 0, -1, COUNT(*)) AS rank
  FROM     my_table
  GROUP BY GROUP_ID
) AS t USING (GROUP_ID)
ORDER BY t.rank DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/67888/3)上查看。

然后，您将在 PHP 中循环遍历结果，跟踪`GROUP_ID`最后一条记录并与当前记录进行比较，以查看您现在是否在一个新组中：

```
$last = null;
echo "<table>";
while ($row = $stmt->fetch()) {
  if ($row['GROUP_ID'] !== $last) {
    if ($last !== null) echo "</tr>";
    echo "<tr><th scope='row'>Group " . html_entities($row['GROUP_ID']) . "</th>";
    $last = $row['GROUP_ID'];
  }
  echo "<td>ID " . html_entities($row['ID']) . "</td>";
}
echo "</tr></table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:12:59.457

看看那里：[http ://www.tizag.com/mysqlTutorial/mysqlgroupby.php](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php)

您将学习如何使用 Group By SQL 关键字 :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T12:19:01.047

您可以使用以下查询执行您需要的操作

```
select group_concat(id),name, group_id, count(*) entries from grp
group by group_id
order by entries desc ; 
```

# maven - Jenkins maven 将 jar 部署到 nexus - 工件命名

> ID：10533670
> 
> 赞同：7
> 
> 时间：2012-05-10T12:10:01.630
> 
> 标签：maven, jenkins, nexus

我的名为“testproject”的 java/maven 项目与我的 jenkins 和 nexus 存储库相关联：

我的 pom.xml 看起来像：

```
....    
<distributionManagement>
    <!-- use the following if you're not using a snapshot version. -->
    <repository>
        <id>nexus</id>
        <name>RepositoryProxy</name>
        <url>http://nexus:8080/nexus/content/repositories/releases</url>
    </repository>
    <!-- use the following if you ARE using a snapshot version. -->
    <snapshotRepository>
        <id>nexus</id>
        <name>RepositoryProxy</name>
        <url>http://nexus:8080/nexus/content/repositories/snapshots</url>
    </snapshotRepository>
</distributionManagement>
...... 
```

在我的詹金斯设置中，我有：

```
Build - maven3 - clean deploy 
```

正如预期的那样，jenkins 将工件上传到 Nexus。查看 jenkins build 的控制台输出，如下所示：

```
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ testproject ---
[INFO] Building jar: /var/lib/jenkins/workspace/testproject/target/testproject-0.1-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ testproject ---
[INFO] Installing /var/lib/jenkins/workspace/testproject/target/testproject-0.1-SNAPSHOT.jar to /var/lib/jenkins/.m2/repository/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-   SNAPSHOT.jar
[INFO] Installing /var/lib/jenkins/workspace/testproject/pom.xml to /var/lib/jenkins/.m2/repository/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-SNAPSHOT.pom
[INFO] 
[INFO] --- maven-deploy-plugin:2.5:deploy (default-deploy) @ testproject ---
Downloading: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/maven-metadata.xml
Downloaded: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/maven-metadata.xml (1012 B at 28.2 KB/sec)
Uploading: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-20120509.161644-74.jar
Uploaded: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-20120509.161644-74.jar (47 KB at 748.5 KB/sec)
Uploading: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-20120509.161644-74.pom
Uploaded: http://nexus:8080/nexus/content/repositories/snapshots/com/dummy/testproject/0.1-SNAPSHOT/testproject-0.1-20120509.161644-74.pom (6 KB at 149.3 KB/sec) 
```

**问题是**：

鉴于我在 pom.xml 中指定的版本是

```
<version>0.1-SNAPSHOT</version> 
```

1.  詹金斯如何将 testproject- **0.1-20120509.161644-74** .jar 上传到 Nexus？20120509.161644-74 的东西来自哪里？

2.  如果jenkins在上传之前生成了时间戳**20120509.161644-74 ，我可以配置它的格式吗？**我想要类似 testproject-01-${timestamp}-${reversionId}.jar

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T12:43:23.060

[maven 部署插件页面](http://maven.apache.org/plugins/maven-deploy-plugin/examples/disabling-timestamps-suffix.html)告诉“默认情况下，当工件的快照版本部署到存储库时，时间戳后缀为它”。因此，它是由插件在您调用时创建的`mvn deploy`。

我不知道你在 2) 中想要什么是可能的。我认为这可能会给maven带来一些麻烦。

当您将 maven 与 SNAPSHOT 依赖项一起使用时，时间戳用于检查 SNAPSHOT 的最新版本。更改快照的格式可能会导致此机制失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:22:17.640

自 Maven 3 以来，时间戳已添加到 SNAPSHOT 版本中。使用 Maven 2 执行相同的部署插件时，不会添加任何时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-31T22:45:34.960

这是 Maven 锁定快照版本的方式，因此特定版本可以被另一个构建使用 - 它解决了问题，但是它有缺点。

我带着快照在房子周围转了一圈。我相信他们只是邪恶的。构建可重复性是一个令人头疼的问题，因为将部署到存储库的时间戳快照版本与特定代码提交相关联是很乏味的。

为自己省去麻烦，让您的构建服务器在构建/部署之前在构建服务器上调用 mvn 版本：set -DnewVersion=..${build.number}。使用相同的版本标记您的源代码。如果构建失败，没关系，构建可以配置为刷新工作区，使 pom.xml 文件更改无关紧要。

另一个典型的 Maven 使用快照的“陷阱”是你不确定你的 pom 在构建过程中可能会使用哪些版本的依赖项，所以请确保你的构建调用依赖项：树和依赖项：列表，在你的其他 mvn 构建参数之前. （这将帮助您在传递解析期间识别同一工件的版本不一致 - 我现在发誓我的构建中的 DependencyManagement 部分）。

虽然 Maven 走了很长一段路，但“Maven 方式”并不总是最好的解决方案。对于持续交付的最佳实践来说，它还*不够*成熟，但你仍然可以有效地使用它，只要你意识到其中的缺陷。

# facebook - Facebook 应用程序 - 安全画布 - SSL

> ID：10533676
> 
> 赞同：3
> 
> 时间：2012-05-10T12:10:19.987
> 
> 标签：facebook, ssl, https

我正在构建 facebook 应用程序，但据我所知，我需要 SSL。

有什么办法可以避免购买 SSL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:17:40.967

您可以避免在以下情况下使用 SSL 证书：

*   该应用程序处于沙盒模式，仅对指定的一组人可见
*   您不关心在 Facebook 上使用安全连接的用户——您可以指定`https://example.com`

[如果您的托管服务提供商为您准备了一个证书（例如： heroku](https://devcenter.heroku.com/articles/facebook) - [ssl setup](https://devcenter.heroku.com/articles/ssl)），您可以避免购买此类证书。

您可以尝试搜索免费证书。据我所知，[http://startssl.com](http://startssl.com)提供了这样的服务。

您可以使用自签名证书。系统会提示您的用户接受证书的有效性（或强制添加例外，这是一个繁琐的过程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T22:54:01.350

是的，您可以为您的 fb 应用程序使用共享 SSL 而不是专用 SSL，请查看您的托管服务提供商手册如何使用共享 SSL。Hostgator 和 bluehost 提供共享 ssl，使用指南在各自的网站上给出。

# python - Python - 从不是包的目录中导入模块

> ID：10533679
> 
> 赞同：13
> 
> 时间：2012-05-10T12:10:43.773
> 
> 标签：python, python-3.x

我有这样的目录结构......

```
dir/
  build.py
dir2
  dir3/
  packages.py 
```

现在`build.py`需要`packages.py`——并注意这`dir2`不是一个包。

那么什么是最好的`packages.py`加载方式`build.py`（目录结构不能改变）

**编辑**

`sys.path.append`解决方案似乎不错——但有一件事——我需要很少使用该文件`packages.py`——并保留一个`sys.path`包含一个很少使用但位于最前面的目录的目录——这是最好的事情吗？

**编辑二**

我认为`imp`解决方案是最好的。

```
import imp    
packages = imp.load_source('packages', '/path/to/packages.py') 
```

**编辑三**

## 对于 Python 3.x

请注意，`imp.load_source`和其他一些功能[已被弃用](http://bugs.python.org/issue14551)。所以你应该使用`imp.load_module`今天。

```
fp, pathname, description = imp.find_module('packages', '/path/to/packages.py')
try:
    mod = imp.load_module('packages', fp, pathname, description)
finally:
    # since we may exit via an exception, close fp explicitly
    if fp:
        fp.close() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T12:12:06.557

你可以这样做：

```
sys.path.append('./dir2/dir3')
import packages 
```

或者更好：

```
sys.path.append(os.path.join(os.path.dirname(__file__), 'dir2/dir3'))
import packages 
```

或者（取自这里：[How to import a module given the full path?](https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path)）

```
import imp    
packages = imp.load_source('packages', '/path/to/packages.py') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-14T01:59:36.633

“正确的方法”会是第三种吗？- 避免直接弄乱`sys.path`

我遇到了同样的问题，我解决了。

```
dir/
  build.py
dir2
  dir3/
    packages.py 
```

1.  **将文件添加`__init__.py`**到`dir1, dir2, dir3 ...`
2.  在包层次结构中，**使用两个点**。

* * *

`bulid.py`想导入`packages.py`，在bulid.py中写：

```
import ..dir2.dir3.packages
from ..dir2.dir3.packages import function 
```

> [https://docs.python.org/2/whatsnew/2.5.html#pep-328-absolute-and-relative-imports](https://docs.python.org/2/whatsnew/2.5.html#pep-328-absolute-and-relative-imports)
> 
> [从父文件夹导入模块](https://stackoverflow.com/questions/714063/importing-modules-from-parent-folder)
> 
> [如何导入上面目录中的 Python 类？](https://stackoverflow.com/questions/1054271/how-to-import-a-python-class-that-is-in-a-directory-above)

# jpa - 如何将 HashSet 保存在 ebean 实体中？

> ID：10533680
> 
> 赞同：0
> 
> 时间：2012-05-10T12:10:44.017
> 
> 标签：jpa, playframework-2.0, jpa-2.0, ebean

我想在实体中放置一个额外的集合。但是 Ebean 似乎无法处理它，并且在我阅读它时总是给我 null 。

```
@Entity
public class MyData extends Model {
    @ElementCollection
    public Set<String> extra = new HashSet<String>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:38:32.397

Ebean 仅支持 JPA 1.0 并添加了一些模式注释，如 @PrivateOwned。不幸[`@ElementCollection`](http://docs.oracle.com/javaee/7/api/javax/persistence/ElementCollection.html)的是尚不支持（Ebean 2.8.x），并且有针对此问题的票[http://www.avaje.org/bugdetail-378.html](http://www.avaje.org/bugdetail-378.html)

您今天唯一能做的就是创建一个字符串实体表（一个具有字符串字段和 ID 的实体），或者如果集合不太大，您可以自己将字符串扁平化为单个字符串。

```
public String extra;

public Set<String> getExtra() {
    // Split the string along the semicolons and create the set from the resulting array
    return new HashSet<String>(Arrays.asList(extra.split(";")));
}

public void setExtra(Set<String> extra) {
    // Join the strings into a semicolon separated string
    this.extra = Joiner.on(";").join(extra);
} 
```

# java - 是否可以将对象设为“只读”方法

> ID：10533687
> 
> 赞同：23
> 
> 时间：2012-05-10T12:11:08.803
> 
> 标签：java, object, reference

如果将对象引用传递给方法，是否可以将对象设置为“只读”方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T12:22:26.550

严格来说不是。也就是说，不能改变对象的引用不能变成不能改变对象的引用。此外，除了使用约定之外，没有办法表示类型是不可变的或可变的。

确保某种形式的不变性的唯一功能是`final`字段——一旦编写，它们就不能被修改。

也就是说，有一些方法可以设计类，**以防止不需要的突变**。这里有一些技巧：

*   *[防御性复制](http://www.informit.com/articles/article.aspx?p=31551&seqNum=2)*。传递对象的副本，这样如果它发生突变，它就不会破坏您的内部不变量。

*   使用*访问修饰符*和/或*接口*仅公开只读方法。您可以使用访问修饰符 ( `public`/ `private`/ `protected`)，可能与接口结合使用，以便只有某些方法对另一个对象可见。如果公开的方法本质上是只读的，那么您是安全的。

*   *默认情况下*使您的对象不可变。对对象的任何操作实际上都会返回对象的副本。

另请注意，SDK 中的 API 有时具有返回对象不可变版本的方法，例如`Collections.unmodifiableList`. 改变不可变列表的尝试将引发异常。这不会静态地强制不变性（在编译时使用静态类型系统），而是一种廉价且有效的方式来动态强制它（在运行时）。

已经有许多关于 Java 扩展的研究建议，以更好地控制别名和可访问性。例如，添加`readonly`关键字。据我所知，它们都没有计划包含在 Java 的未来版本中。如果您有兴趣，可以看看这些指针：

*   [为什么我们不应该在 Java 中添加“只读”（尚未）](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CIABEBYwAA&url=http://www.cs.uwm.edu/~boyland/papers/readonly-talk.pdf&ei=JrKrT5f7B8-i-ga_5L2eCg&usg=AFQjCNGk4pS8x5s38IVL96D9WpBN4fMUig) ——它列出并比较了大多数提案
*   [Checker 框架：Java 的自定义可插入类型](https://checkerframework.org/manual/)——一种扩展类型系统的非侵入式方法，尤其是不可变类型。

Checker 框架非常有趣。在 Checker Framework 中，查看 Generic Universe Types checker、IGJ immutability checker 和 Javari immutability checker。该框架使用注释工作，因此它不是侵入性的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T12:13:23.313

不，不是没有装饰、合成、克隆等。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T12:13:23.933

没有通用的机制。您需要编写特殊情况的代码来实现它，例如编写不可变的包装器（请参阅 参考资料`Collections.unmodifiableList`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T12:14:11.193

在大多数情况下，您可以通过克隆方法的第一个语句来实现类似的事情`Object`，例如这个......

```
public void readOnlyMethod(Object test){
    test = test.clone();
    // other code here
} 
```

因此，如果您调用`readOnlyMethod()`并传入 any `Object`，`Object`则会获取 的克隆。克隆使用与方法的参数相同的名称，因此不存在意外更改原始`Object`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-10T12:13:03.990

不，但是您可以在传递对象之前尝试克隆对象，因此该方法所做的任何更改都不会影响原始对象。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-02T06:34:19.610

使其实现一个只有只读方法（没有 setter 方法）的接口，这给出了一个对象的副本（仅限道路副本）并返回接口的只读实例而不是返回对象本身的实例

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-10T12:13:43.663

您可以将对象的所有参数定义为，`final`但这会使对象只读给所有人。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-12T11:54:14.443

我相信您真正的问题是关于避免转义引用。

正如一些从类中提取接口并仅公开获取方法的答案中所指出的那样。它将防止意外修改，但它再次不是避免上述问题的万无一失的解决方案。

考虑下面的例子：

**客户.java：**

```
public class Customer implements CustomerReadOnly {

    private String name;
    private ArrayList<String> list;

    public Customer(String name) {
        this.name=name;
        this.list = new ArrayList<>();
        this.list.add("First");
        this.list.add("Second");
    }

    @Override
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    public ArrayList<String> getList() {
        return list;
    }
    public void setList(ArrayList<String> list) {
        this.list = list;
    }

} 
```

**CustomerReadOnly.java：**

```
public interface CustomerReadOnly {

    String getName();

    ArrayList<String> getList();

} 
```

**主.java：**

```
public class Test {
    public static void main(String[] args) {
        CustomerReadOnly c1 = new Customer("John");

        System.out.println("printing list of class before modification");
        for(String s : c1.getList()) {
            System.out.println(s);
        }

        ArrayList<String> list = c1.getList();
        list.set(0, "Not first");

        System.out.println("printing list created here");
        for(String s : list) {
            System.out.println(s);
        }

        System.out.println("printing list of class after modification");
        for(String s : c1.getList()) {
            System.out.println(s);
        }
    }
} 
```

**输出：**

```
printing list of class before modification
First
Second
printing list created here
Not first
Second
printing list of class after modification
Not first
Second 
```

因此，正如您所看到的，仅当您没有任何可变成员变量时，提取接口和仅公开 get 方法才有效。

如果您有一个集合作为成员变量，您不想从类中逃脱其引用，则可以`Collections.unmodifiableList()`按照 ewernli 的回答中指出的那样使用。

有了这个，没有外部代码可以修改基础集合，并且您的数据是完全只读的。

但是当涉及到自定义对象时，我也只知道接口方法可以防止意外修改，但不确定避免引用转义的万无一失的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-15T18:10:51.490

取决于您希望在哪里执行规则。如果您正在协作处理一个项目，请使用`final`注释告诉下一个人他们不打算修改此值。否则你不会简单地编写*不*接触对象的方法吗？

```
public static void main(String[] args) {
    cantTouchThis("Cant touch this");
}

/**
 * 
 * @param value - break it down
 */
public static void cantTouchThis(final String value) {
    System.out.println("Value: " + value);
    value = "Nah nah nah nah"; //Compile time error
} 
```

因此，特别是对于这种方法，该值永远不会被写入，并且在编译时强制执行，从而使解决方案非常健壮。在此方法的范围之外，对象保持不变，而无需创建任何类型的包装器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-02T05:11:54.690

```
private boolean isExecuteWriteQueue = false;
public boolean isWriting(){
    final boolean b = isExecuteWriteQueue;
    return b;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-21T18:15:25.737

扩展 ewernli 的[答案](https://stackoverflow.com/a/10533902/6893866)...

如果您拥有这些类，则可以使用只读接口，以便使用对象只读引用的方法只能获取子对象的只读副本；而主类返回可写版本。

例子

```
public interface ReadOnlyA {
    public ReadOnlyA getA();
}

public class A implements ReadOnlyA {
    @Override
    public A getA() {
        return this;
    }

    public static void main(String[] cheese) {
        ReadOnlyA test= new A();
        ReadOnlyA b1 = test.getA();
        A b2 = test.getA(); //compile error
    }
} 
```

* * *

如果您不拥有这些类，则可以扩展该类，覆盖设置器以引发错误或无操作，并使用单独的设置器。这将有效地使基类引用只读基类，但是这很容易导致混淆和难以理解的错误，因此请确保它有良好的文档记录。

# python - python计时器线程睡眠无法正常工作

> ID：10533688
> 
> 赞同：1
> 
> 时间：2012-05-10T12:11:11.460
> 
> 标签：python, multithreading, time, timer

我正在寻找一种方法让 python 线程等待/睡眠一段时间，我正在使用

```
time.sleep (10.0) 
```

但它不会睡 10 秒，它会睡不到 10 秒。[我在这里](http://mail.python.org/pipermail/tutor/2006-November/050915.html)和其他一些地方读到，它的睡眠时间可能少于或多于指定的持续时间。有没有另一种方法来做或解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:21:06.857

看一下使用的例子[`signal.alarm`](http://docs.python.org/library/signal.html#example)。它可能会为您提供所需的功能。

# spring-mvc - 在同一个 HTTP GET 请求中弹出 Word 文档和处理 JSP 页面

> ID：10533689
> 
> 赞同：0
> 
> 时间：2012-05-10T12:11:21.620
> 
> 标签：spring-mvc, tomcat7

我有一个有趣的问题。当用户单击按钮时，我需要发生两件事：

1.  弹出一个word文档
2.  显示声明某种消息的 *.jsp 页面。

问题是，要生成 word 文档弹出窗口，我在 Controller 方法中有以下内容：

```
response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
response.setHeader("Content-Disposition", "attachment;filename=" + templateTitle);
OutputStream out = response.getOutputStream();
InputStream inputStream = session.getServletContext().getResourceAsStream("/resources/files/" + firm.getFolder() + "/" + templateTitle);

if (inputStream != null) {
    byte[] wordDoc = readFully(inputStream);

    out.write(wordDoc);
    out.flush();
} 
```

这可行，但是不会显示 *.jsp 感谢页面。如果我注释掉这段代码，就会显示 *.jsp 感谢页面。

我的假设是我正在更改导致 *.jsp 不显示的响应属性。

我该如何处理这两个过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:31:22.527

你正在尝试做不可能的事情。一个请求不能有两个响应。

# c# - 如何使用 DevExpress WinForms TextEdit 作为密码输入（带星号）？

> ID：10533690
> 
> 赞同：3
> 
> 时间：2012-05-10T12:11:21.703
> 
> 标签：c#, .net, winforms, devexpress

根据[http://www.devexpress.com/Products/NET/Controls/WinForms/Editors/editors/textEdit.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/Editors/editors/textEdit.xml)可以使用 Developer Express TextEdit 控件输入密码并隐藏字符。谁能向我解释如何做到这一点？看起来应该很简单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T13:13:26.103

使用[RepositoryItemTextEdit.PasswordChar 属性](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemTextEdit_PasswordChartopic)

> TextEdit 有一个`Properties.PasswordChar`属性，默认为空。通过 > 在那里设置一些字符（例如，*），您将启用您需要的功能。

密码模式允许您屏蔽编辑器的文本。您可以通过两种方式激活密码模式：

*   将`UseSystemPasswordChar`属性设置为`true`。编辑器的文本将被屏蔽如下：

*   将`PasswordChar`属性设置为`any valid character`。该字符将用于屏蔽编辑器的文本。

    例如，如果`PasswordChar`属性设置为`"*"`，编辑器将按您的意愿工作。

**注意：**如果属性设置为 ，`PasswordChar`则忽略该属性。`RepositoryItemMemoEdit.UseSystemPasswordChar``true`

务实地，您可以将其设置为：

```
 **`TextEdit.Properties.PasswordChar = '*'`**
```

 **然后从 GUI 转到 Properties 部分，然后进一步寻找`Properties`那里您将获得该`PasswordChar`属性，根据文档将其设置为有效字符。例如`*`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:18:54.323

将`PasswordChar`属性设置为`TextBox`应该在文本框中而不是真实文本中可见的字符。

例如：

```
textBox.PasswordChar = '*'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:24:30.493

如果设置 TextBox，则可以使用常规的 TextBox 控件实现相同的效果。**使用SystemPasswordChar**为真。如果 CapsLock 处于打开状态，此设置还将导致 TextBox 控件显示工具提示警告，就像在 Windows 登录屏幕中一样。**

# c# - 绑定到 XAML 派生类中定义的依赖属性

> ID：10533697
> 
> 赞同：5
> 
> 时间：2012-05-10T12:11:42.187
> 
> 标签：c#, wpf, xaml

我有一个从 Window 派生的简单视图。在该派生类的代码隐藏文件中，我定义了一个名为 ActiveDocument 的新 DependencyProperty。

我希望将此新的 DependencyProperty 绑定到 ViewModel 上的属性，该属性设置为视图的 DataContext。

我可以使用类构造函数中的代码设置此绑定，但尝试绑定 XAML 文件中的属性会导致错误消息指出在类 Window 上找不到属性 ActiveDocument。

在 XAML 中执行此操作的正确语法是什么？

[更新代码]

**MainWindowViewModel.cs**

```
class MainWindowViewModel
{
    public bool IWantBool { get; set; }
} 
```

**主窗口.xaml.cs**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        DataContext = new MainWindowViewModel();
        InitializeComponent();
    }

    public static readonly DependencyProperty BoolProperty = DependencyProperty.Register(
        "BoolProperty", typeof(bool), typeof(MainWindow));
} 
```

**主窗口.xaml**

```
<Window x:Class="DependencyPropertyTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:DependencyPropertyTest"

    <!-- ERROR: BoolProperty not found on type Window. -->
    BoolProperty="{Binding path=IWantBool}"

    <!-- ERROR: Attachable property not found in type MainWindow. -->
    local:MainWindow.BoolProperty="{Binding path=IWantBool}">

    <Grid>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T16:26:27.790

XAML 编译器不考虑 的实际类型`Window`，它只查看根元素的类型。所以它不知道在`MainWindow`. 我不认为你可以在 XAML 中轻松地做到这一点，但在代码隐藏中很容易做到：

```
public MainWindow()
{
    DataContext = new MainWindowViewModel();
    InitializeComponent();
    SetBinding(BoolProperty, new Binding("IWantBool"));
} 
```

# ruby - 带有字符串参数的 Ruby grep

> ID：10533701
> 
> 赞同：8
> 
> 时间：2012-05-10T12:11:55.070
> 
> 标签：ruby, regex, ruby-1.9

我想使用带有字符串的 grep 作为正则表达式模式。我怎样才能做到这一点？

例子：

```
myArray.grep(/asd/i) #Works perfectly. 
```

但我想先准备我的陈述

```
searchString = '/asd/i'
myArray.grep(searchString) # Fails 
```

我怎样才能做到这一点？我需要准备一个字符串，因为这将进入搜索算法，并且查询会根据每个请求而改变。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T13:17:55.200

正则表达式支持插值，就像字符串一样：

```
var = "hello"
re = /#{var}/i
p re #=> /hello/i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:18:02.587

引号中的内容与事物本身不同。`/a/i`是正则表达式，`"/a/i"`是字符串。要从字符串构造正则表达式，请执行以下操作：

```
r = Regexp.new str
myArray.grep(r) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:16:04.770

尝试这个：

```
searchString = /asd/i
myArray.grep(searchString) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-07T18:02:14.507

编辑：

我找到了更好的方法

```
myString = "Hello World!"
puts "Hello World!"
puts "Enter word to search"
input_search = gets.chomp
puts "Search insensitive? y/n"

answer = gets.chomp

if answer == "y"
  ignore = "Regexp::IGNORECASE"
else
  ignore = false
end

puts myString.lines.grep(Regexp.new(input_search, ignore)) 
```

我的旧答案如下：

如果他们想要打开或关闭不敏感的搜索等，请尝试将其设为 case 或 if 语句传递

```
myString = "Hello World!"
puts "Enter word to search"
input_search = gets.chomp
puts "Search insensitive? y/n"
case gets.chomp
  when "y"
    puts myString.lines.grep(Regexp.new(/#{input_search}/i))
  when "n"
    puts myString.lines.grep(Regexp.new(/#{input_search}/))
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-26T19:21:02.333

'/asd/i' 是一个字符串。为什么不让它成为正则表达式？如果您需要从 String 转到 Regexp，一种方法是创建一个新的 Regexp 对象：

```
>> re = Regexp.new('/asd/i')
=> /\/asd\/i/ 
>> re = Regexp.new("asd", "i")
=> /asd/i 
```

所以也许，

```
>> str = gets.chomp #user inputs 
=> "Hello World"
re = Regexp.new(str, "i")
=> /Hello World/i 
```

就是你要找的。

但总的来说，我认为您不能简单地“将字符串用作正则表达式模式”，尽管我是初学者并且可能对此有误。

# javascript - 使用 JavaScript 变量在 JQuery 中设置样式

> ID：10533705
> 
> 赞同：0
> 
> 时间：2012-05-10T12:12:07.427
> 
> 标签：javascript, jquery, css

我无法使以下代码示例正常工作

```
var iZoomValue = Math.round(window.innerWidth/12.5);

$('body').css("zoom",iZoomValue); 
```

有什么建议我在这里做错了吗？

有关[CSS 缩放的更多信息](http://www.css3.com/css-zoom/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:14:04.917

确保在文档准备好时触发您的代码：

```
$(document).ready(function(){
 // code here
}); 
```

请记住，这`zoom`是 CSS3 规范中的一个相当新的功能，目前并非所有浏览器都支持。

[这是一个工作示例](http://jsfiddle.net/fMZ6C/1/)（在 Chrome 中适用于我）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:22:43.447

不确定在 jQuery document.ready 中执行此操作是否会解决它，因为 OP 说过，如果他使用硬编码值，它会起作用：

```
$('body').css("zoom","82"); 
```

我的感觉是 iZoomValue 没有设置为您认为的那样 - 也许警报或 console.log 将有助于断言这一点？

或者 jQuery css 方法接受字符串参数值（如在您的硬编码示例中）。iZoomValue 将是一个数字，因此结果将是

```
$('body').css("zoom",82); 
```

使用带有整数作为参数的硬编码示例来断言这一点可能是值得的。

希望这可以帮助

# clojure - 有没有更简洁的方法来编写循环、更新和返回映射的 Clojure 函数？

> ID：10533715
> 
> 赞同：3
> 
> 时间：2012-05-10T12:12:46.743
> 
> 标签：clojure

此功能有效，但我正在学习 Clojure 并想知道是否有更好/更清洁的方法来编写：

```
;; loop over methods, update the scripts map, and return scripts

(defn update-scripts
  [filename]
  (loop [scripts {}
         methods (get-methods filename)]
    (if (seq methods)
      (let [method (first methods)
            sig (get-method-signature method)
            name (get-method-name sig)]
        (recur (assoc scripts name {:sig sig, :method method})
               (rest methods)))
      scripts)))

(update-scripts "gremlin.groovy") 
```

更新：这是我最终使用的：

```
(defn- update-scripts
  [scripts method]
  (let [sig (get-method-signature method)
        name (get-method-name sig)]
    (assoc scripts name {:sig sig :method method})))

(defn get-scripts
  [filename]
  (reduce update-scripts {} (get-methods filename))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:40:52.890

```
(defn update-scripts
  [filename]
  (into {} (map (fn [m] [ (get-method-name (get-method-signature m)) {:sig (get-method-signature m), :method m}  ] ) (get-methods filename) ))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:23:35.847

我会用一个 reduce 来做到这一点，如下所示：

```
(defn update-scripts
  [filename]
  (reduce (fn [scripts method]
            (let [sig (get-method-signature method)
                  name (get-method-name sig)]
              (assoc scripts name {:sig sig :method method})))
          {}
          (get-methods filename))) 
```

当我必须收集一个集合并返回一个不同类型的集合时，这是我遵循的“模式”。这里我们有一个方法列表，我们想把这个列表转换成一个映射（在对其进行一些处理之后）。我觉得 reduce 是最易读的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:40:03.327

我将使用`map`为返回的每个条目构建一个哈希映射，`get-methods`然后将`merge`所有这些哈希映射合为一个。

```
(defn update-scripts
  [filename]
  (apply merge
         (map
          #(hash-map (get-method-name %) {:sig (get-method-signature %) :method %})
          (get-methods filename)))) 
```

通常，最好使用标准的序列操作函数，例如 等`map`，`filter`而不是`loop`.

# asp.net - ASP.NET - 如何从自定义 IResourceProvider 实现中的虚拟路径获取程序集

> ID：10533721
> 
> 赞同：1
> 
> 时间：2012-05-10T12:13:14.667
> 
> 标签：asp.net, .net-assembly, virtual-path

我正在开发自定义本地资源提供程序实现，它应该从位于 App_LocalResources 文件夹中的资源中提供资源值，但这些资源应该被编译为嵌入的。因此，没有任何 resx 文件会保留在 Web 应用程序文件夹中，这是默认 LocalResXResourceProvider 所期望的。

问题是我需要使用虚拟路径中的嵌入式资源进行组装，但我无法弄清楚 ASP.NET 类使用什么来将虚拟路径转换为相应的程序集。我正在研究 LocalResXResourceProvider 和 BuildManager 的反编译源，但所有东西都是内部的。即使通过反射使用 LocalResXResourceProvider.GetLocalResourceAssembly()，我也无法获得程序集 - 当我部署应用程序以清除没有 resx 文件的文件夹时，它只会返回 null。当 resx 文件存在时它可以工作......

# php - PHP文件强制下载TXT文件，下载后格式丢失

> ID：10533722
> 
> 赞同：2
> 
> 时间：2012-05-10T12:13:18.080
> 
> 标签：php, text, download

当使用 PHP 脚本强制下载时，我有一个格式化的 TXT 文件，它正在丢失格式，如果有其他方法可以这样做，请告诉我。

请在下面找到 download.php 脚本文件：

```
<?php

function output_file($file, $name, $mime_type='')
{
 /*
 This function takes a path to a file to output ($file),  the filename that the browser     will see ($name) and  the MIME type of the file ($mime_type, optional).
 */

 //Check the file premission
 if(!is_readable($file)) die('File not found or inaccessible!');

 $size = filesize($file);
 $name = rawurldecode($name);

 /* Figure out the MIME type | Check in array */
 $known_mime_types=array(
    "pdf" => "application/pdf",
    "txt" => "text/plain",
    "html" => "text/html",
    "htm" => "text/html",
"exe" => "application/octet-stream",
"zip" => "application/zip",
"doc" => "application/msword",
"xls" => "application/vnd.ms-excel",
"ppt" => "application/vnd.ms-powerpoint",
"gif" => "image/gif",
"png" => "image/png",
"jpeg"=> "image/jpg",
"jpg" =>  "image/jpg",
"php" => "text/plain"
 );

 if($mime_type==''){
     $file_extension = strtolower(substr(strrchr($file,"."),1));
 if(array_key_exists($file_extension, $known_mime_types)){
    $mime_type=$known_mime_types[$file_extension];
 } else {
    $mime_type="application/force-download";
 };
 };

 //turn off output buffering to decrease cpu usage
 @ob_end_clean();

 // required for IE, otherwise Content-Disposition may be ignored
 if(ini_get('zlib.output_compression'))
  ini_set('zlib.output_compression', 'Off');

 header('Content-Type: ' . $mime_type);
 header('Content-Disposition: attachment; filename="'.$name.'"');
 header("Content-Transfer-Encoding: binary");
 header('Accept-Ranges: bytes');

 /* The three lines below basically make the
    download non-cacheable */
 header("Cache-control: private");
 header('Pragma: private');
 header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");

 // multipart-download and download resuming support
 if(isset($_SERVER['HTTP_RANGE']))
 {
list($a, $range) = explode("=",$_SERVER['HTTP_RANGE'],2);
list($range) = explode(",",$range,2);
list($range, $range_end) = explode("-", $range);
$range=intval($range);
if(!$range_end) {
    $range_end=$size-1;
} else {
    $range_end=intval($range_end);
}

$new_length = $range_end-$range+1;
header("HTTP/1.1 206 Partial Content");
header("Content-Length: $new_length");
header("Content-Range: bytes $range-$range_end/$size");
 } else {
$new_length=$size;
header("Content-Length: ".$size);
 }

 /* Will output the file itself */
 $chunksize = 1*(1024*1024); //you may want to change this
 $bytes_send = 0;
 if ($file = fopen($file, 'r'))
 {
if(isset($_SERVER['HTTP_RANGE']))
fseek($file, $range);

while(!feof($file) &&
    (!connection_aborted()) &&
    ($bytes_send<$new_length)
      )
{
    $buffer = fread($file, $chunksize);
    print($buffer); //echo($buffer); // can also possible
    flush();
    $bytes_send += strlen($buffer);
}
 fclose($file);
 } else
 //If no permissiion
 die('Error - can not open file.');
 //die
die();
}
//Set the time out
set_time_limit(0);

//path to the file
$file_path=$_REQUEST['filename'];

//Call the download function with file path,file name and file type
output_file($file_path, ''.$_REQUEST['filename'].'', 'text/plain');

?> 
```

HTML 文件：

```
<html>
<head>
<title></title>

</head>
<body>

<CENTER> <a href='download.php?filename=testFile.txt'>Download print file </a>     </center><br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:17:05.617

Mime application/force-download，通常表示为 mime application/x-force-download，通常与 PHP 代码结合使用以触发下载框，而不是用于在 Web 浏览器中显示内容。

例如，如果您的网站上有一个文件希望用户下载而不是在 Web 浏览器中查看，您可以在文件的标题内容类型字段中输入适当的 mime 应用程序/强制下载代码。请注意，mime application/force-download 不是已注册的 MIME 类型。此外，在 PHP 代码中使用时，mime application/force-download 的首选拼写包含“x-”前缀。

还有其他强制下载的方法，包括使用 content-disposition 参数将文件标识为附件。许多 PHP 脚本在 if/else 语句中包含 mime application/force-download 以强制下载通常显示在 Web 浏览器中的特定文件类型，例如 PDF 文件和图像文件。

但是，由于应用程序/强制下载未在 Internet 号码分配机构注册，因此并非所有 Web 浏览器都可以识别它，这会导致计算机用户端出现错误。

# java - 是否存在返回对象集合中一组特定属性的 Java 数据结构？

> ID：10533733
> 
> 赞同：3
> 
> 时间：2012-05-10T12:13:46.163
> 
> 标签：java, collections

我有一个对象集合，它们都是相同的对象类型。在该类型中，有一个我想要访问的属性 - 在这种情况下，它是将其添加到逗号分隔的列表中：

```
String sep = ", ";
List<Item> items = db.findItems();

for (Item item : items) 
{
    result.append(item.getDescription() + sep);
} //for

return result.substring(0, results.length - sep.length()); 
```

如果我可以直接从集合中的所有对象中访问该属性，那就太好了，这样我就可以调用 Google Guava 的 Joiner 函数：

```
return Joiner.on(", ").join(/*Description attribute collection here*/); 
```

我正在考虑的那种结构就像一个二维数组，其中每一列代表一个属性，每一行代表一个对象，所以我希望能够调用返回对象的特定行或特定列（属性）它返回所有对象的属性集合。

Java 或优秀的第三方是否有这样的数据结构，或者我需要创建自己的数据结构吗？

干杯，

阿列克谢蓝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:19:51.387

那你为什么不充分利用谷歌的番石榴呢？

```
Joiner.on(",").join(Collections2.transform(items, new Function<Item, String>() {
    public String apply(Item input) {
        return item.getDescription();
    }
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:16:25.680

您可以编写一个内部`Iterable`子类，该子类可以触及集合中的每个对象并发出正确的属性。查看@Hiery 的回复，他更快地找到了代码......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:29:44.377

即将在[JDK 8](http://jdk8.java.net/lambda/)中推出，带有 lambda 表达式和方法引用

```
List<Jedi> jedis = asList(new Jedi("Obiwan",80), new Jedi("Luke", 35));
List<String> jediNames = jedis.map(Jedi::getName).into(new ArrayList<>()); //with metdod ref
Iterable<Integer> jediAges = jedis.map(j -> j.getAge()); //with lambdas 
```

根据您的操作，您甚至可以使用链接中提供的 JDK 8 预览版。

或者，[Lambdaj](http://code.google.com/p/lambdaj/)库提供了一种方法来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:16:56.350

傻，但我会选择 Item.toString()。不存在地图所以你可以加入（地图）吗？

# java - 在哪里部署我的 web 服务的 jar 依赖项？

> ID：10533735
> 
> 赞同：4
> 
> 时间：2012-05-10T12:13:51.260
> 
> 标签：java, jar, dependencies, axis2

我的网络服务依赖于一个 jar（其中包含一个自定义 Exception 类等）。

当我在没有这个 jar 的情况下简单地部署我的 web 服务时，axis2 抱怨异常类是未知的。

所以我想我也必须部署我的罐子......但我不愿意把它放进去：`tomcat\webapps\axis2\WEB-INF\lib`，因为它已经装满了很多axis2和第3方罐子......

我更喜欢类似的东西`tomcat\webapps\axis2\WEB-INF\usr\lib`

你会把它放在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:25:17.250

考虑将您的 Web 服务及其依赖项部署为单个 WAR Web 应用程序。然后你可以把你的依赖放在你的 webapp 的 WEB-INF/lib 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:54:48.110

如果要部署 Axis2 AAR，可以将 jar 放入`lib`AAR 内的目录中。

# wpf - 绑定到祖先 StackPanel DockPanel.Dock

> ID：10533736
> 
> 赞同：0
> 
> 时间：2012-05-10T12:13:52.620
> 
> 标签：wpf, binding, stackpanel, dockpanel, relativesource

我有一个 StackPanel，可以停靠在 DockPanel 的左侧或右侧。StackPanel 中的项目应该像祖先一样停靠在同一侧。对于测试，我在 Visual Tree 中获得了祖先的名称，但我不知道如何绑定到 Docking.Dock。提前致谢。

```
<DockPanel>
  <StackPanel x:Name="RightHandContainer" DockPanel.Dock="Right">
    <v:MyUsercontrol TextCaption="Hard-Coded Alignment Works" Alignment="Right" />
    <v:MyUsercontrol TextCaption="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel, AncestorLevel=1}, Path=Name}"                  
                       Alignment="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel, AncestorLevel=1}, Path=Docking.Dock}" />
    <!-- TextCaption is is a dependencyproperty of Type string, works fine ... my Text object automatically gets 'RightHandContainer' -->
    <!-- Alignment is is a dependencyproperty of Type Dock, like Docking.Dock ... Binding will not work :( -->
  </StackPanel>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:03:48.810

一种方法是创建一个价值转换器。将属性绑定到 stackpanel 本身，然后在 valueconverter 中抓取停靠栏并返回您需要的任何内容。像这样的东西：

```
<Window.Resources>
    <app:TestConverter x:Key="TestConverter" />
</Window.Resources>
<DockPanel>
    <StackPanel x:Name="RightHandContainer" DockPanel.Dock="Right">
        <TextBlock Text="Test" HorizontalAlignment="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel, AncestorLevel=1}, Converter={StaticResource TestConverter}}"  />
    </StackPanel>
</DockPanel> 
```

转换器：

```
public class TestConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        HorizontalAlignment alignment = HorizontalAlignment.Left;

        StackPanel stackPanel = value as StackPanel;
        if (stackPanel != null)
        {
            Dock dock = DockPanel.GetDock(stackPanel);
            switch (dock)
            {
                case Dock.Left: alignment = HorizontalAlignment.Left; break;
                case Dock.Right: alignment = HorizontalAlignment.Right; break;
            }
        }   
        return alignment;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我使用了水平对齐，但你可以返回任何你需要的东西。

# jquery - 禁用图像的另存为密钥

> ID：10533737
> 
> 赞同：0
> 
> 时间：2012-05-10T12:13:56.670
> 
> 标签：jquery, windows, internet-explorer, keyboard, galleria

我正在使用 Galleria 全屏主题，并且不允许通过 jQuery 另存为图像（禁用右键单击）。这段代码：

```
$('img').live('contextmenu', function(e){
    return false;
}); 
```

此代码适用于 Firefox、Safari 和 Chrome Mac。我在 Windows 上测试过，不允许右键单击。但是当按下 Windows 键时，获取另存为图像。这是关键：

![在此处输入图像描述](../Images/82526b40113a59c5148daf9b0b57fd15.png)

如何禁用此键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:16:15.760

你不能。

此外，值得注意的是，鉴于网络的本质，您网站的**所有**内容都将被下载并保存在客户端计算机上的缓存中（假设他们启用了它）。总会有一种方法可以将在线找到的文件保存到本地计算机。

如果您不希望有人下载您的图像或在没有信用的情况下使用它们，请给它们加水印，或者不要将它们放到网上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:16:55.947

![在此处输入图像描述](../Images/266165aa4032c023289ffecd54ea5c68.png)

*“如果他们回答问题，应该允许幽默。”* [元](https://meta.stackexchange.com/a/16497/173320)

**真正的答案是，你不能。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T00:40:11.967

在我的网站中，我使用了这样的脚本

```
 ///Disable Right Click
    var message = "Sorry! We are not allowed right click for SECURITY REASON.";

    ///////////////////////////////////
    function clickIE4() {
        if (event.button == 2) {
            alert(message);
            return false;
        }
    }

    function clickNS4(e) {
        if (document.layers || document.getElementById && !document.all) {
            if (e.which == 2 || e.which == 3) {
                alert(message);
                return false;
            }
        }
    }

    if (document.layers) {
        document.captureEvents(Event.MOUSEDOWN);
        document.onmousedown = clickNS4;
    }
    else if (document.all && !document.getElementById) {
        document.onmousedown = clickIE4;
    }

    document.oncontextmenu = new Function("alert(message);return false") 
```

我希望它可以帮助你的情况:-)

# drupal - Drupal 6块中的相对链接

> ID：10533742
> 
> 赞同：0
> 
> 时间：2012-05-10T12:14:15.087
> 
> 标签：drupal, drupal-6

我创建了一个包含指向另一个页面的链接的块。该块位于所有页面的页脚中。

```
<a href="terms_and_conditions">Terms and Conditions</a> 
```

这适用于具有...的 URL 的页面

```
http://mywebs.localhost/site1/page1 
```

该链接正确解析为：

```
http://mywebs.localhost/site1/terms_and_conditions 
```

（其中“page1”是“URL 路径设置”中的一个值，即使用“路径”模块为 /node/56 创建别名）

但是当我转到作为 ubercart 模块一部分的页面时......

```
http://mywebs.localhost/site1/cart/checkout 
```

块中的链接错误地解析为...

```
http://mywebs.localhost/site1/cart/terms_and_conditions 
```

显然，如果我使用完整的绝对链接，我可以让它工作，但我希望它在我上传到远程主机时工作，而不必更改所有内容。

有很多关于相对路径的文档和问题。但据我所知，这与页面内容部分中的链接有关。谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T23:33:50.143

为什么不只是`<a href="/terms_and_conditions">Terms and Conditions</a>`？尝试在路径前加上斜杠。

只是阅读评论，对不起，我看到允许 PHP 输入的其他方式
`<?php print l('Terms and Conditions', 'terms_and_conditions'); ?>`

但是，如果没有 php 输入，您可以使用[http://drupal.org/project/shortcode](http://drupal.org/project/shortcode)，它允许将带有 url 的令牌转换为完整的链接，就像在 WordPress 中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:23:11.417

您应该使用[url()](http://api.drupal.org/api/drupal/includes!common.inc/function/url/6)函数或[$base_url](http://api.drupal.org/api/drupal/developer!globals.php/global/base_url/6)来生成链接

```
<a href="<?php echo url('terms_and_conditions'); ?>">Terms and Conditions</a> 
```

或者

```
<a href="<?php global $base_url; echo $base_url; ?>/terms_and_conditions">Terms and Conditions</a> 
```

# mysql - MySQL 如果为 true 添加 SELECT 和 WHERE

> ID：10533752
> 
> 赞同：0
> 
> 时间：2012-05-10T12:14:47.383
> 
> 标签：mysql, if-statement

我有一个这样的查询：

```
SELECT tm.first_name, tm.last_name, tm.id, i.thumb 
FROM team_members tm, images i, tm_image tmi 
WHERE tm.id = tmi.tm_id AND tmi.image_id = i.id 
```

效果很好，我取回了名称等以及通过如下表格链接到个人的图像：

```
individual_id -> individual_id - image_id <- image_id 
```

问题是，如果个人没有附加图像，则查询不会返回任何内容。如果没有图像数据，我想要的查询只是返回 NULL。我会使用 if 语句吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:17:05.647

你需要做一个 LEFT JOIN 来解决你的问题

```
SELECT tm.first_name, tm.last_name, tm.id, i.thumb 
FROM team_members tm
LEFT JOIN tm_image tmi ON (tmi.image_id = i.id)
LEFT JOIN images i ON (tm.id = tmi.tm_id); 
```

*未经测试，可能包含错误。*

使用上面的查询，如果成员没有图像，则值`tm.id`和`i.thumb`都将是`NULL`

你可以在这里找到一些例子：http: [//phpweby.com/tutorials/mysql/32](http://phpweby.com/tutorials/mysql/32)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:17:35.853

使用`LEFT JOIN`. 像这样：

```
SELECT 
   tm.first_name, 
   tm.last_name, 
   tm.id, 
   i.thumb 
FROM 
 team_members tm
 LEFT JOIN tm_image tmi 
   ON tm.id = tmi.tm_id
 LEFT JOIN images i
   ON tmi.image_id = i.id 
```

# objective-c - 背景 UIImage 成为僵尸代理

> ID：10533753
> 
> 赞同：0
> 
> 时间：2012-05-10T12:14:48.067
> 
> 标签：objective-c, ios, memory-management, uinavigationcontroller, uicolor

我的应用程序中的一个屏幕具有高分辨率背景，在旧设备上加载可能需要一点时间。

我的解决方案是在委托中预加载图像，然后重用它。

因此，我的委托中有一个属性：

```
@property (nonatomic, strong, retain) UIColor *fabricColor; 
```

我在 didFinishLaunching 中加载图像：

```
fabricColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]]; 
```

但是，当我尝试在导航控制器中引用 delegate.fabricColor 时，它是一个僵尸：

```
AppDelegate *dg = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
self.view.backgroundColor = dg.fabricColor; //Doesn't work 
```

**如何防止这种情况发生，以便我可以使用 fabricColor？**

几点注意事项：

*   我**没有**使用 ARC。
*   我代表的 dealloc 中的第一行是“[fabricColor release]”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:18:35.763

在为您的 ivar 设置值时使用属性以保留：

```
self.fabricColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]]; 
```

在您的代码中，您只需将自动释放的值分配给您的实例变量而不保留它 - 因此它会在您尝试使用它之前的一段时间后被释放

# impress.js - impress.js 设置背景元素

> ID：10533756
> 
> 赞同：3
> 
> 时间：2012-05-10T12:15:03.043
> 
> 标签：impress.js

有没有办法在课堂上获得与设置“step”相同的 3d 效果而不让它进入 stepin/stepout。

我只希望它在后台并保持 CSS 简单。谢谢。

# arrays - 如何用matlab比较数组

> ID：10533761
> 
> 赞同：1
> 
> 时间：2012-05-10T12:15:18.137
> 
> 标签：arrays, matlab

我想比较两个字符串数组如何影响以下值到`a`, `b`, `c`, `d`, 当我尝试如下时, 我得到了一个错误

```
[a,b,c,d] = getVal(x);
    =>this will gives :
a =

a
b=

0
c =

10
d =
[] 
```

我有 ：

```
expected = {'a','0','10',[]}; 
```

我怎样才能在 [a,b,c,d] 和预期之间进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:18:17.973

*错误一*：

`=`是赋值运算符。

比较运算符是`==`。

* * *

*错误2*：

MATLAB 数组通常不包含字符串。它们包含*数字*或单个字符。

```
>> b = ['a','0','10','20']

b =

a01020 
```

要查看为什么`[a,b,c,d] = ['a','0','10','20']`不起作用，请考虑以下问题：

```
>> [a,b,c,d] = 'a01020'
??? Too many output arguments. 
```

您正在尝试将六个字符放入四个存储桶中。不去上班。

您可能打算创建一个元胞数组：

```
>> c = {'a','0','10','20'}

c = 

    'a'    '0'    '10'    '20' 
```

* * *

Matlab 数组是*数值矩阵*，不是通用列表容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:26:54.957

继 Li-aung 的回答之后，您可能想要的是类似

```
isequal({a,b,c,d}, {'a', '0', '10', '20'}) 
```

这将返回`true`iff`a`具有值`'a'`等等。

编辑

要执行多个*分配*，您可以使用 DEAL

```
[a,b,c,d] = deal('a', '0', '10', '20') 
```

# android - 尝试向 Facebook 发布消息时出现 UknownHostException

> ID：10533762
> 
> 赞同：3
> 
> 时间：2012-05-10T12:15:20.627
> 
> 标签：android, facebook

```
 java.net.UnknownHostException: Unable to resolve host "graph.facebook.com": No address associated with hostname
at java.net.InetAddress.lookupHostByName(InetAddress.java:400)
at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
at java.net.InetAddress.getAllByName(InetAddress.java:220)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:441)
at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
    at com.facebook.android.Util.openUrl(Util.java:215)
at com.facebook.android.Facebook.request(Facebook.java:751)
at com.facebook.android.Facebook.request(Facebook.java:688)
at com.nammari.FinalActivity$1.onClick(FinalActivity.java:62)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T12:22:25.460

在您的清单文件中，添加此权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T13:31:40.803

我认为 Raghav Sood 对以下问题的回答会有所帮助。他描述了您会得到此异常的 3 个原因

[在 android 4.0.3 中向 facebook 墙发布消息时出错](https://stackoverflow.com/questions/11560444/error-on-post-message-to-the-facebook-wall-in-android-4-0-3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T19:54:32.310

尝试重新启动模拟器。我也有同样的错误。我在 2 天前让它工作了，今天我启动了一个应用程序并得到了上述错误，在查看了上面提到的解决方案和这里[的错误在 android 4.0.3 的 facebook 墙上发布消息后，](https://stackoverflow.com/questions/11560444/error-on-post-message-to-the-facebook-wall-in-android-4-0-3)我一切都正确。

最后我只是杀死了我的模拟器并重新启动并且错误消失了，我猜是陈旧的会话导致了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-25T14:56:24.540

您必须重置网络

我希望这对你有用：

*   单击开始 => 运行，输入 CMD，按确定。
*   将其复制并粘贴到命令提示符中：
*   netsh winsock 重置目录
*   按回车
*   然后将其复制并粘贴到：
*   netsh int ip reset reset.log
*   按 Enter。
*   完成后重新启动计算机。

[https://productforums.google.com/forum/#!topic/chrome/oCUYZsG8VJU](https://productforums.google.com/forum/#!topic/chrome/oCUYZsG8VJU)

# html - html 文档中元数据的最佳实践？

> ID：10533764
> 
> 赞同：81
> 
> 时间：2012-05-10T12:15:26.070
> 
> 标签：html, meta-tags, w3c-validation

我从事大规模、大容量、面向公众的 Web 应用程序。应用程序的成功运行对业务非常重要，因此有许多 MI 工具可以针对它运行。

其中一个 MI 工具本质上是查看为每个页面请求发送到浏览器的 html（我已经对其进行了很多简化，但出于这个问题的目的，它是一个对 html 进行一些分析的工具）

为了让这个 MI 工具获取它需要的数据，我们将元数据放在 head 元素中。目前我们将其作为 html 注释：

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="">
<head>
    <!-- details = 52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009] -->
    <!-- policy id = 1234567890 -->
    <!-- party id = 0987654321 -->
    <!-- email address = user@email.com -->
    <!-- error = 49 -->
    <!-- subsessionid = bffd5bc0-a03e-42e5-a531-50529dae57e3-->
    ... 
```

该工具只需使用正则表达式查找给定的元数据注释

由于此数据是元数据，我想将其更改为 html 元标记，因为它在语义上感觉是正确的。像这样的东西：

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="">
<head>
    <meta name="details" content="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" />
    <meta name="policyId" content="1234567890" />
    <meta name="partyId" content="0987654321" />
    <meta name="emailAddress" content="user@email.com" />
    <meta name="error" content="49" />
    <meta name="subsessionid" content="bffd5bc0-a03e-42e5-a531-50529dae57e3" />
    ... 
```

这感觉更语义化，我可以让 MI 工具毫无问题地使用它——只是更改正则表达式的一个例子。然而，它现在给我带来了 w3c 验证器的问题。它不会验证，因为我使用的元名称未被识别。我收到错误“元素元上属性名称的错误值详细信息：未注册关键字详细信息。” 它建议我在 WHATWG wiki 上注册这些名称值。

虽然我可以这样做，但感觉不对。我的一些元标记是“通用的”（例如错误和电子邮件地址），所以我可能会找到一个已经注册的名称值并使用它。但是，它们中的大多数是特定于行业/组织的。注册一个名为 subsessionid 或 partyId 的公共名称值感觉不对，因为它们特定于我的组织和应用程序。

所以，问题是 - 在这种情况下，什么被认为是最佳实践？我应该将它们保留为 html 评论吗？我应该像上面那样使用元标记而不担心 w3c 验证失败吗？（尽管这对组织来说越来越重要）我是否应该尝试在 WHATWG wiki 上注册我的元名称值，但知道它们不是很通用？还是有其他解决方案？

欣赏你的想法，加油

弥敦道

* * *

编辑以显示最终解决方案：

我要回答的完整答案如下。它基于 Rich Bradshaws 的回答，所以他的回答是被接受的，但为了完整起见，我要这样做：

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" class="">
<head>
    <meta name="application-name" content="Our app name" 
        data-details="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" 
        data-policyId="1234567890"
        data-partyId="0987654321"
        data-emailAddress="user@email.com"
        data-error="49"
        data-subsessionid="bffd5bc0-a03e-42e5-a531-50529dae57e3"
    />
    ... 
```

这验证了，所以所有的方框都打勾了:)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-10T12:37:18.103

W3C 验证毫无意义。HTML != XML，所以没有任何模式来验证它。没有浏览器会阻塞，因为您添加了一个未注册名称的元元素。如果您真的很担心，可以在元元素上使用 data 属性，例如：

```
<meta data-details="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" data-policyId="0123456789" /> 
```

至少那时你知道没有未来的规范会给你的数据带来意义。

欲了解更多信息，请阅读： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#custom-data-attribute](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#custom-data-attribute)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-10-10T14:30:47.130

虽然您的示例可能有效，但请注意该关键字[`application-name`](http://www.w3.org/TR/html5/document-metadata.html#meta-application-name)仅适用于*Web 应用程序*。

对于不是 Web 应用程序的常用网页，或者如果不`application-name`提供，请参阅一些替代方案：

### 使用`data-*`属性`head`

不需要`meta`元素。

```
<!DOCTYPE html>
<html>
<head
    data-details="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" 
    data-policyId="1234567890"
    data-partyId="0987654321"
    data-emailAddress="user@email.com"
    data-error="49"
    data-subsessionid="bffd5bc0-a03e-42e5-a531-50529dae57e3">
</head> 
```

### 使用微数据

您可以创建一个词汇表，但这[不是本地使用所必需的](https://stackoverflow.com/a/19134534/1591669)。

```
<!DOCTYPE html>
<html>
<head itemscope>
  <meta itemprop="details" content="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" />
  <meta itemprop="policyId" content="1234567890" />
  <meta itemprop="partyId" content="0987654321" />
  <link itemprop="emailAddress" href="mailto:user@email.com" /> <!-- or use a meta element if you don’t want to provide a full URI with "mailto:" scheme -->
  <meta itemprop="error" content="49" />
  <meta itemprop="subsessionid" content="bffd5bc0-a03e-42e5-a531-50529dae57e3" />
</head> 
```

### 在 a 中使用数据`script`

该`script`元素[可用于数据块](https://stackoverflow.com/a/14428316/1591669)。您可以选择适合您需要的任何格式。纯文本示例：

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/plain">
    details = 52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]
    policyId = 1234567890
    partyId = 0987654321
    emailAddress = user@email.com
    error = 49
    subsessionid = bffd5bc0-a03e-42e5-a531-50529dae57e3
  </script>
</head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:35:17.823

如果您尝试使用数据格式向它们添加自定义属性，例如数据类型或数据名称并省略真实姓名属性，或者可能将其全部设置为“抽象”或其他东西（如果验证器会给出重复元名称的问题）：

```
<meta data-name="details" content="52:AS6[rxSdsMd4RgYXJgeabsRAVBZ:0406139009]" /> 
```

因此，您可以参考该数据名称来处理您的元数据...

[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T12:24:35.190

尽管解决方案可能归结为您的组织对页面验证的感受，但从技术上讲，这两种选择都可行。

正如您所说，将信息添加到自定义元数据标签将使您的标记无效。

对于我的组织，页面验证是技术可访问性的一部分，被认为非常重要。不允许做任何会阻止页面验证的事情。

我不会尝试注册新的元数据名称和值，因为它们特定于您的组织而不是供公众使用。

如果这已经适用于您的组织，我可能会将这些信息保留为 HTML 注释。

# android - 带有 XML 布局的 Android 拖放

> ID：10533768
> 
> 赞同：0
> 
> 时间：2012-05-10T12:15:39.107
> 
> 标签：android, drag-and-drop, xml-layout

这个想法是创建一个带有两个**可拖动**的“按钮”的界面。

我不想使用 Canvas（内存中的位图和重绘所有内容等问题），所以我决定使用带有 ImageView 作为按钮的 XML 布局。

一键*居中*_vertical | *left*，第二个*中央*（例如）。第一个可以正常工作，但第二个在两侧（左右）都有奇怪的边距，并且无法拖动按钮。我还检查了其他职位：

1.  左上角 - 正确
2.  左下角 - 只能在 x 轴上移动...
3.  顶部/底部/中心右侧 - 只能在 y 轴上移动

当然，对于具有这些属性的任何按钮，情况都是相同的，而不仅仅是“第二个”。每个按钮的代码都是相同的。这真的很奇怪，但我猜这是XML Layout的问题：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:gravity="center_vertical|left" >
        <ImageView
            android:id="@+id/leftChar"
            android:src="@drawable/ukreska"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center">

        <ImageView
            android:id="@+id/rightChar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/uotwarte" />
    </LinearLayout>
</RelativeLayout> 
```

按钮的位置使用布局边距设置：

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(new ViewGroup.MarginLayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
lp.setMargins(X, Y, 0, 0);
img.setLayoutParams(lp); 
```

*使用event.getX()*和*event.getY()*计算位置

 *Android SDK 2.2 的版本。我已经检查了模拟器和手机 - 结果相同。

你有什么主意吗？提前致谢 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:21:30.623

发现了错误。如果有人遇到同样的问题：

*使用 XML 布局和拖放时，请确保设置正确的 XML**重力**属性。我完全删除了它，我决定在活动开始时设置边距。*

干杯!*

# c++ - 为什么我不能使用继承在 C++ 中实现接口？

> ID：10533772
> 
> 赞同：8
> 
> 时间：2012-05-10T12:16:08.837
> 
> 标签：c++, multiple-inheritance

> **可能重复：**
> [在父类中实现抽象类成员](https://stackoverflow.com/questions/7167558/implementing-abstract-class-members-in-a-parent-class)
> [为什么 C++ 不允许基类实现派生类的继承接口？](https://stackoverflow.com/questions/10464308/why-does-c-not-let-baseclasses-implement-a-derived-class-inherited-interface)

考虑这些对象：

```
struct A
{
    virtual void foo() = 0;
};

struct B
{
    void foo() { /* neat implementation */ }
}; 
```

我想知道为什么 --compiler-wise -- 以下对象被认为是抽象的：

```
struct C : B, A
{
    using B::foo; // I tried my best to make the compiler happy
}; 
```

编译器不允许我这样做：

```
A* a = new C; 
```

Visual Studio 2010 说：

> “C”：由于以下成员，无法实例化抽象类：“void A::foo(void)”：是抽象的：参见“A::foo”的声明

g++ 4.6.3 说：

> 无法分配抽象类型“C”的对象，因为以下虚函数在“C”中是纯的：virtual void A::foo()

我想这在 C# 中是允许的，但我不知道所涉及的机制——我只是好奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:25:14.210

不幸的是，这并不完全符合您的要求。

`using`指令只是将一些名称带入它使用的范围。`virtual`方法需要被覆盖，并且*仅仅*引入名称不被认为是覆盖。

事情的真相是 C++ 不直接支持*委托*。明确地将名称带入范围只是这种轻微的扭曲。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T12:24:53.523

`struct B`正在实现一个恰好被调用`foo`且不带参数的函数。该功能显然与 绝对没有关系`A::foo`。因此，当`struct C`同时派生于`A`and时`B`，它最终继承了：

*   提供实施的责任`A::foo`
*   与`B::foo`具有相同名称和签名`A::foo`但与它没有任何关系的方法

我认为问题很明显。您正在尝试将其`A`用作 C# 的等价物`interface`，但无法在 C++ 中表达该概念。

现在该`using`指令在这里也无济于事，因为它所做的只是将其`B::foo`带入范围`C`，这意味着它告诉编译器当在 class 中遇到后者时，它应该考虑`B::foo`作为解析名称的候选者。不幸的是，这也与实现纯虚方法的责任无关。`foo``C`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:30:14.877

要解决这个问题，您需要在 C 中实现自己的`foo()`并显式调用 B 函数——在 C 中有效地将 A::foo 转发到 B::foo：

```
struct C : B, A
{
  virtual void foo() {
    // Override A::foo by forwarding to B::foo:
    B::foo();
  }
}; 
```

这在某种程度上是有道理的——A::foo() 和 B::foo() 之间没有内在的关系——你必须在 C 中明确地建立一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:34:08.700

> 我想这在 C# 中是允许的

C++ 不是 C#。

`virtual void foo()`并且`void foo()`是两种不同的方法。

当您从 A 和 B 派生时，您可以访问两种方法：`virtual A::foo`和 non-virtual `B::foo`。并且`virtual A::foo`是抽象的。因此编译器错误。

# c - Openssl： RSA_verify() 支持什么 RSA 签名方案？

> ID：10533775
> 
> 赞同：0
> 
> 时间：2012-05-10T12:16:17.567
> 
> 标签：c, linux, openssl, rsa

据我了解，有两种 RSA 签名方案 - PSS（概率签名方案）和旧的 PKCS1-v1_5：

我可以使用 RSA_verify() API 在两种方案下检查 RSA 签名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:55:28.083

如果您有最新版本 - 请参阅：http: [//fixunix.com/openssl/526614-signing-verifying-messages-rsassa-pss.html](http://fixunix.com/openssl/526614-signing-verifying-messages-rsassa-pss.html)了解如何使用它。

# python - 同时将 nginx 设置为 apache 和 gunicorn 的代理

> ID：10533778
> 
> 赞同：4
> 
> 时间：2012-05-10T12:16:21.420
> 
> 标签：python, apache, nginx, reverse-proxy, gunicorn

我的所有代码都在 django 中，因此使用 gunicorn 来托管 django，并使用 nginx 作为反向代理。我现在想使用 nginx 服务器作为反向代理和 apache 服务器在同一域（或子域）上托管一些 PHP 文件。

是否可以为 2 个不同的服务器反向代理 nginx？（如果 gunicorn 失败，请尝试 apache）

我可以直接在apache上托管php文件，但是nginx占用了80端口。假设我想使用 apache 在 blog.XXXX.com 上托管一个基于 php 的博客应用程序 - wordpress？以及我在 XXXX.com 上使用 nginx 和 gunicorn 的常规网站

这是我当前 nginx.conf 的相关部分

```
 server {
        listen   80;
        server_name XXXXX.com;
        root /home/ubuntu/code/;

        location / {
            proxy_pass_header Server;
            proxy_set_header Host $http_host;
            proxy_redirect off;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Scheme $scheme;
            proxy_connect_timeout 120;
            proxy_read_timeout 120;
            proxy_pass http://localhost:8000/;
        }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-15T11:43:46.177

是的，这是可能的。不过，您需要将 Apache 配置为侦听不同的端口。

不要选择保留端口并确保它是打开的（并且您可以访问它。Unix 有一个端口范围，通常在`/proc/sys/net/ipv4/ip_local_port_range`您选择 ipv4 时定义，您可能根据您的 Nginx 配置判断）

**对于 Apache 配置：**

编辑你的 apache 主配置文件并设置`Listen`指令如下：

`Listen 127.0.0.1:<port number that's open>`//使用8080作为开始端口

然后创建一个 VirtualHost，如下所示：

```
<VirtualHost 127.0.0.1:<port number defined above>>
    config goes here
</VirtualHost> 
```

您可以通过两种方式执行此操作，一种来自同一域，另一种来自子域。

**对于 NGINX 配置：**

**来自同一个域：**

```
server {
    listen   80;
    server_name XXXXX.com;

#Django app served using Gunicorn
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 120;
        proxy_read_timeout 120;
        proxy_pass http://localhost:8000/;
    }
#PHP processed by Apache
    location ~ \.php$ {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 120;
        proxy_read_timeout 120;
        proxy_pass http://localhost:<port you configured apache to listen on>/;
    }
} 
```

**从子域：**

```
#Server block for Django 
server {
    listen   80;
    server_name XXXXX.com;

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 120;
        proxy_read_timeout 120;
        proxy_pass http://localhost:8000/;
    }
}

#Server block for PHP served using Apache with a subdomain
server {
    listen   80;
    server_name blog.XXXXX.com;

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 120;
        proxy_read_timeout 120;
        proxy_pass http://localhost:<port you configured apache to listen on>/;
    }
} 
```

**注意：**您不需要 root 指令，因为您的应用程序由 Gunicorn 提供服务或移交给 Apache（您将在 VirtualHost 中定义一个根）

编辑完配置文件后，重新启动 Apache，然后重新启动 Nginx，它应该可以工作了。

# php - PHP：如何解决“无法重新声明 loadModule 函数”

> ID：10533785
> 
> 赞同：0
> 
> 时间：2012-05-10T12:16:53.903
> 
> 标签：php, function, fatal-error

我正在开发一个 Web 项目，我有一个名为 init.php 的文件，它基本上初始化数据库连接并使用 spl_autoload_register 加载所有类。它包含在页面的开头。

该文件通常可以正常工作，但是当 m 将此文件包含在子目录页面中时会发生错误。像这样 ...

包括'../includes/init.php'；

我收到了这个致命错误：无法重新声明 loadModue 先前在线声明的 ....

文件内容如下所示：

```
<?php
    ob_start();

    $profile_time = array() ;
    $profile_time['start_time'] = microtime(TRUE) ;

    include_once( 'settings.php' ) ;
    //ini_set('display_errors', 'on');
    //ini_set('error_reporting', E_ALL);
    // set correct timezone
    date_default_timezone_set('Asia/Calcutta');

    // Set default encoding for multibyte strings
    mb_language('uni');
    mb_internal_encoding('UTF-8');
    mb_http_input('UTF-8');
    mb_http_output('UTF-8');
    mb_regex_encoding('UTF-8');

    function loadModule($className)
    {
        if(file_exists(APP_ROOT.'modules/'.$className.'.php'))
            require_once(APP_ROOT.'modules/'.$className.'.php');
    }

    spl_autoload_register('loadModule');

    $profile_time['before_sql_connection_time'] = microtime(TRUE) ;

    $DB = mysqli_connect( $db_data['host'] , $db_data['user'] , $db_data['pass'] , $db_data['db']);
    Sql::init(array('db' => $DB));

    $profile_time['after_sql_connection_time'] = microtime(TRUE) ;

    @session_start();

    if(User::isLoggedIn())
        $_user = new User($_SESSION['user_id']);
    else
        $_user = new User(0);
    if(isSet($_SESSION['user_id']))
        $user_data = $_user->getDataArray();

    ob_end_clean();
?> 
```

settings.php 定义了 HOST、APP_ROOT 等数据库数据....

我尝试使用

```
if(!function_exists(loadModule)){
       function loadModule(){.....}
    } 
```

但这给出了`class Sql not found`致命错误......基本上没有加载类。

我尝试将函数的名称更改为，`loadModule_new`但这给出了相同的错误`cannot redeclare`。

我可以在 StackOverflow 上找到的所有案例都没有从一开始就起作用，但只有在包含在子目录中的情况下才会出现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:21:07.597

您多次包含该文件，随之而来的是混乱。

此类问题的最佳解决方案是制定*一个清晰的计划，确定哪个文件负责包含哪些*.

不要在`include('whatever.php')`每次需要将一些代码带入范围时都转储。退后一步，*设计*你的包含策略。如果您正确执行此操作，您将永远不会再遇到此类问题。

如果做不到这一点，使用`include_once`代替`include`应该可以帮助您解决这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:21:36.733

`function_exists` expects quote marks around the parameter:

```
if(!function_exists('loadModule')){
       function loadModule(){.....}
    } 
```

I think the main problem is that some other file you're including is probably including `'../includes/init.php'`

Use `include_once ('../includes/init.php');` and see if it works.

Also, search all your code base for this app for `function loadModule` (with a variable number of spaces just in case) to make sure that you've not got a definition anywhere else for `loadModule`

# python - HTML5 WebSocket 服务器

> ID：10533790
> 
> 赞同：2
> 
> 时间：2012-05-10T12:17:05.603
> 
> 标签：python, html, websocket

我正在尝试创建一个基本的 websocket 服务器，服务器从客户端接收握手，但客户端似乎没有接受服务器的握手响应。我对“Sec-WebSocket-Key”也有疑问，我认为散列值太长了！谢谢 ：）

```
 import socket

def handle(s):
    print repr(s.recv(4096))

s = socket.socket()
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR,1)
s.bind(('',9876))
s.listen(2)

handshakes='\
HTTP/1.1 101 Web Socket Protocol Handshake\r\n\
Upgrade: WebSocket\r\n\
Connection: Upgrade\r\n\
WebSocket-Origin: null\r\n\
WebSocket-Location: ws://localhost:9876/\r\n\
'
def handshake(hs):
    hslist = hs.split('\r\n')
    body = hs.split('\r\n\r\n')[1]
    key = ''
    cc = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11'

    for h in hslist:
        if h.startswith('Sec-WebSocket-Key:'):
            key = h[19:]
        else:
            continue

    print key

    import hashlib
    import base64
    s = hashlib.sha1()
    s.update(key+cc)
    h = s.hexdigest()
    print 's = ', s
    print 'h = ', h
    return base64.b64encode(h)

while True:
    c,a = s.accept()
    print c
    print a
    msg = c.recv(4096)
    if(msg):

        print msg
        print 'sending handshake ...'
        handshakes += 'Sec-WebSocket-Accept: '+str(handshake(msg))+'\r\n\r\n'
        print handshakes
        c.send(handshakes)
            c.send('Hello !')
            break; 
```

**[编辑]**

客户 ：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Web Socket Example</title>
    <meta charset="UTF-8">
    <script>
      window.onload = function() {
        var s = new WebSocket("ws://localhost:9876/");
        s.onopen = function(e) { alert("opened"); }
        s.onclose = function(e) { alert("closed"); }
        s.onmessage = function(e) { alert("got: " + e.data); }
      };
    </script>
  </head>
    <body>
      <div id="holder" style="width:600px; height:300px"></div>
    </body>
</html> 
```

服务器输出：

```
<socket._socketobject object at 0xb727bca4>
('127.0.0.1', 46729)
GET / HTTP/1.1
Host: localhost:9876
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:15.0) Gecko/15.0 Firefox/15.0a1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive, Upgrade
Sec-WebSocket-Version: 13
Origin: null
Sec-WebSocket-Key: wZG2EaSH+o/mL0Rr9Efocg==
Pragma: no-cache
Cache-Control: no-cache
Upgrade: websocket

sending handshake ...
wZG2EaSH+o/mL0Rr9Efocg==
s =  <sha1 HASH object @ 0xb729d660>
h =  49231840aae5a4d6e1488a4b34da39af372452a9
HTTP/1.1 101 Web Socket Protocol Handshake
Upgrade: WebSocket
Connection: Upgrade
WebSocket-Origin: null
WebSocket-Location: ws://localhost:9876/
Sec-WebSocket-Accept: NDkyMzE4NDBhYWU1YTRkNmUxNDg4YTRiMzRkYTM5YWYzNzI0NTJhOQ==

handshake sent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:04:10.347

我认为你需要打电话`sha.digest()`代替`hexdigest()`. 您希望将 20 字节的二进制哈希传递给您的 base64 编码器；`digest()`这样做的同时`hexdigest()`将这些字节中的每一个转换为 2 字节的十六进制表示。

有关详细信息，请参阅[python sha 文档](http://docs.python.org/library/sha.html)。

# iphone - UIView 中的 BezierPath 旋转

> ID：10533793
> 
> 赞同：2
> 
> 时间：2012-05-10T12:17:16.507
> 
> 标签：iphone, ios, uigesturerecognizer, bezier, uibezierpath

我正在绘制一个 BezierPath on Touch 事件。现在我必须使用手势方法在同一位置旋转该贝塞尔路径。但问题是，旋转后它的位置会发生变化。它看起来像下图.. 我该如何解决这个问题？

![贝塞尔路径绘图](../Images/83202e1b4439336bf93dfaca8cd1125d.png)

上图是原始图像。和我分享你的想法..提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:12:25.007

[在Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)中检查这一点。

`applyTransform:` 使用指定的仿射变换矩阵变换路径中的所有点。

```
- (void)applyTransform:(CGAffineTransform)transform 
```

我没试过这个。但这里是如何`NSBezierPath`从链接[rotation-nsbezierpath-objects](http://www.cocoabuilder.com/archive/cocoa/318293-rotating-nsbezierpath-objects.html)旋转 a 。尝试在`UIBezierPath`.

```
- (NSBezierPath*)rotatedPath:(CGFloat)angle aboutPoint:(NSPoint)cp
{
// return a rotated copy of the receiver. The origin is taken as point <cp> relative to the original path.
// angle is a value in radians

if( angle == 0.0 )
  return self;
else
{
  NSBezierPath* copy = [self copy];

  NSAffineTransform* xfm = RotationTransform( angle, cp );
  [copy transformUsingAffineTransform:xfm];

  return [copy autorelease];
}
} 
```

它使用：

```
NSAffineTransform *RotationTransform(const CGFloat angle, const NSPoint cp)
{
// return a transform that will cause a rotation about the point given at the angle given

NSAffineTransform* xfm = [NSAffineTransform transform];
[xfm translateXBy:cp.x yBy:cp.y];
[xfm rotateByRadians:angle];
[xfm translateXBy:-cp.x yBy:-cp.y];

return xfm;
} 
```

# nhibernate - log4net - 将 NHibernate 从我的应用程序的日志文件中保存到它自己的文件中

> ID：10533794
> 
> 赞同：4
> 
> 时间：2012-05-10T12:17:17.860
> 
> 标签：nhibernate, log4net

我已经成功地封锁了我自己的登录到它自己的常规和错误日志文件。

我已将 NHibernate 添加到组合中，因为我想记录它生成的 sql 语句以帮助调试 - 但到它自己的文件中。

使用下面的当前配置，NH 输出最终出现在我的常规日志文件 (CommunicationsAppender) 以及它自己的文件中（它是重复的）。如何将输出排除在 CommunicationsAppender 之外？

```
<log4net> 
    <appender name="NHibernateAppender" type="log4net.Appender.RollingFileAppender">
        <file value="c:\logs\NHibernate.log"/>
        <appendToFile value="true"/>
        <maximumFileSize value="1000KB"/>
        <maxSizeRollBackups value="10"/>
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %logger %level - %message%newline"/>
        </layout>
        <filter type="log4net.Filter.LevelRangeFilter">
            <levelMin value="DEBUG" />
            <levelMax value="FATAL" />
        </filter>
        <filter type="log4net.Filter.LoggerMatchFilter">
            <loggerToMatch value="NHibernate.SQL" />
            <acceptOnMatch value="true" />
        </filter>
        <filter type="log4net.Filter.DenyAllFilter" />
    </appender>
    <appender name="CommunicationsAppender" type="log4net.Appender.RollingFileAppender">
        <file value="C:\Logs\Communications Service.log"/>
        <appendToFile value="true"/>
        <maximumFileSize value="10000KB"/>
        <maxSizeRollBackups value="10"/>
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %logger - %message%newline"/>
        </layout>

        <filter type="log4net.Filter.LevelRangeFilter">
            <levelMin value="DEBUG" />
            <levelMax value="WARN" />
        </filter>
        <filter type="log4net.Filter.LoggerMatchFilter">
            <loggerToMatch value="CommunicationsLogger" />
            <acceptOnMatch value="true" />
        </filter>
        <filter type="log4net.Filter.DenyAllFilter" />
    </appender>
    <appender name="CommunicationsErrorAppender" type="log4net.Appender.RollingFileAppender">
        <file value="C:\Logs\Communications Service Errors.log"/>
        <appendToFile value="true"/>
        <maximumFileSize value="10000KB"/>
        <maxSizeRollBackups value="10"/>
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date %logger - %message%newline"/>
        </layout>
        <filter type="log4net.Filter.LevelRangeFilter">
            <levelMin value="ERROR" />
            <levelMax value="FATAL" />
        </filter>
        <filter type="log4net.Filter.LoggerMatchFilter">
            <loggerToMatch value="CommunicationsLogger" />
            <acceptOnMatch value="true" />
        </filter>
    </appender>

    <root>
        <!-- Value of priority may be ALL, DEBUG, INFO, WARN, ERROR, FATAL, OFF -->
        <priority value="ALL"/>
        <!--<appender-ref ref="LogToFile"/>-->
        <appender-ref ref="CommunicationsAppender" />
        <appender-ref ref="CommunicationsErrorAppender" />
        <appender-ref ref="NHibernateAppender" />
    </root>
    <logger name="NHibernate.SQL">
        <level value="DEBUG"/>
        <appender-ref ref="NHibernateAppender"/>
    </logger>
    <logger name="NHibernate">
        <level value="OFF" />
    </logger>
</log4net> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T18:36:07.510

从您的根目录中删除 NHibernate 附加程序，并添加`additivity="false"`到您的 nhibernate 附加程序。

```
<root>
    <!-- Value of priority may be ALL, DEBUG, INFO, WARN, ERROR, FATAL, OFF -->
    <priority value="ALL"/>
    <!--<appender-ref ref="LogToFile"/>-->
    <appender-ref ref="CommunicationsAppender" />
    <appender-ref ref="CommunicationsErrorAppender" />
</root>

<logger name="NHibernate.SQL" additivity="false"> 
```

# c# - 配置 ASP.NET_SessionId cookie 过期时间

> ID：10533795
> 
> 赞同：2
> 
> 时间：2012-05-10T12:17:19.827
> 
> 标签：c#, asp.net, cookies, forms-authentication

我刚刚在我的浏览器中看到一个 cookie，其名称`ASP.NET_SessionId`和过期时间为“当我关闭浏览器时”。

这个到期时间从哪里来，我该如何配置它？

![显示 ASP.NET_SessionId cookie 的浏览器屏幕截图，其有效期为“当我关闭浏览器时”](../Images/3464b849d8040635cff4f67749fbb84d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:19:44.253

asp.net 设置了一个 cookie，这`NOT PERSISTENT`意味着您没有设置任何到期时间。

所以过期时间就是你关闭浏览器的时候。

如果您设置过期时间 - 它会从内存区域作为文件进入硬盘！

`expiration is set ? yes`

在硬盘驱动器中作为文件。这称为持久性

`expiration is set ? no`

这称为内存中的非持久性 ASP.NET_SessionId cookie。

`expiration setting - how ?`

```
Response.Cookies["userName"].Value = "patrick";
Response.Cookies["userName"].Expires = DateTime.Now.AddDays(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:20:21.230

HttpCookie 有一个`Expires`属性，您可以设置它来管理 cookie 生命周期。

如果您没有设置过期时间，这将在会话中处理。因此cookie随着会话而死。

更多信息[https://docs.microsoft.com/en-us/previous-versions/aspnet/ms178194(v=vs.100)](https://docs.microsoft.com/en-us/previous-versions/aspnet/ms178194(v=vs.100))

# java - 在方法本身中使用方法返回值

> ID：10533797
> 
> 赞同：0
> 
> 时间：2012-05-10T12:17:34.133
> 
> 标签：java, methods, return-type

**您可以跳过 blabla 并转到“下面的示例”。** 创建具有给定返回类型的方法时，调用该方法时是否创建了方法返回类型的实例？例如，如果我有一个 User 类，并且我创建了一个返回类型为 User 的方法，那么在调用它时是否在方法内部创建了一个新的 User 类实例？你能这么说吗？public Object getObject(...){...} 创建一个未初始化的对象，如下所示： public Object object; 您可以在方法中使用哪个？当方法中的返回类型被调用时，它会这样做： object = return(); 它返回一个在方法内声明的 Object 实例。我知道我得到了很糟糕的解释，也许其他人可以对其进行编辑，以使更多的 stackoverflow 观众更清楚。

**下面的示例：** 例如，这是否可能以某种方式：

```
public UserObject getSomethingDone(User user){ 
getSomethingDone.setSomething(user.getSomething);
return getSomethingDone;
} 
```

而不是这个：

```
public UserObject getSomethingDone(User user){ 
UserObject userObject = new UserObject();
userObject.setSomething(user.getSomething);
return userObject;
} 
```

**编辑：** nvm 愚蠢的问题，因为我说它可能会创建一个未初始化的对象实例，但是您当然不能使用未初始化的对象实例，因为它直到返回才被初始化。那么这可能是可能的：

```
public UserObject getSomethingDone(User user){ 
getSomethingDone = new UserObject();
userObject.setSomething(user.getSomething);
return userObject;
} 
```

但这没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:20:46.317

您可以使用反射 API 获取方法的返回类型，但这比简单地实例化返回类型的新对象要麻烦得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:20:54.740

不，不执行隐式对象创建。在 Java 中，您曾经显式地创建返回对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:22:00.840

简而言之，没有。Java（尤其是 C 系列）不是这样工作的。看起来您有某种 Pascal 家庭背景，确实按照您所说的方式工作（嗯，几乎，因为返回值未初始化*）。

*：我指的是您的示例，而不是您的问题，因为它们相互矛盾

# javascript - jQuery 触发器无法按预期工作

> ID：10533802
> 
> 赞同：0
> 
> 时间：2012-05-10T12:17:56.317
> 
> 标签：javascript, jquery, html, css

我有这个

```
$('input[type=radio][name="voucher_type"]').live('change', function() {
//stuff here
}); 
```

因此，当单击单选按钮时，事情就会发生。单选按钮位于 div 中，该 div 样式为带有背景图像等的大按钮。

问题是，用户会点击图片，并期望它点击按钮。我不能使用标签，我知道它会检查收音机，所以我在下面尝试了这个代码：

```
 $('div.voucher_box').click(function(){
    $(this).children('input').attr("checked", "checked");
    $(this).closest("input").trigger('click');
}); 
```

我希望当单击 div 类凭证_box 时，它会触发单选按钮上的单击/更改事件，并触发更改单选时运行的所有代码。

任何人都可以看到有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:25:50.667

如果你有绑定`change`事件，那么你必须触发`change`事件但不是`click`：

```
$('div.voucher_box').click(function() {
    $(this).children(":radio").prop("checked", true).trigger("change");
} 
```

请注意，从 jQuery 版本 1.7 开始，该`.live()`方法已弃用。您应该使用`.on()`附加事件处理程序。

# c# - WPF C#，创建移动肥皂泡

> ID：10533810
> 
> 赞同：1
> 
> 时间：2012-05-10T12:18:17.847
> 
> 标签：c#, .net, wpf, wpf-controls, physics-engine

我正在尝试创建一个 WPF 应用程序“游戏”，其中有肥皂泡“我用椭圆来表示它”在画布上移动，我可以用鼠标点击弹出它们。

知道如何让肥皂泡自然运动吗？我让他们移动，但只是从下到上。任何想法我怎么能像一个图书馆一样在这方面有所帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:01:04.810

[http://bubbleburst.codeplex.com/](http://bubbleburst.codeplex.com/)

此代码由WPF 大师[Josh Smith编写，用于在他的优秀著作“](http://joshsmithonwpf.wordpress.com/) [Advanced MVVM](http://joshsmithonwpf.wordpress.com/advanced-mvvm/) ”中演示 MVVM。

BubbleBurst 代码有非常好的动画来模拟气泡运动。我已经运行了游戏，动画很棒。

IMO，您的肥皂泡运动将与此类似。

# jquery - Jquery 选择并点击

> ID：10533814
> 
> 赞同：0
> 
> 时间：2012-05-10T12:18:22.467
> 
> 标签：jquery

我实际上是在使用带有 ASP.NET MVC 的可编辑 Telerik 网格。网格上的一列包含一个删除按钮，我想使用我自己的按钮单击此按钮，该按钮位于其他位置。

这是我如何获得对当前选定网格行的引用：

```
var selectedGRIDRows = $('#GRID tr.t-state-selected'); 
```

如果我在我的代码中放置以下语句：

```
alert(selectedGRIDRows[0].cells[17].innerHTML); 
```

警报将向我显示以下内容：删除

那么如何创建自己的 jquery 来单击此按钮（尽管我不认为它真的是一个按钮，因为它看起来像一个链接样式看起来像一个按钮）？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:20:07.860

`$(selectedGRIDRows[0].cells[17]).trigger("click")`应该这样做。

正如@Rory McCrossan 指出的那样，这实际上不会单击按钮。由于我没有使用这个 Telerik 网格，我不确定按钮是什么类型的元素，但在这里插入一个选择器： `$(selectedGRIDRows[0].cells[17]).find("[selector for button]").trigger("click")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:27:03.083

```
$(selectedGRIDRows[0].cells[17]).trigger('click'); 
```

那应该工作...

# tfs - 在 Excel 中链接 TFS 2010 中的工作项

> ID：10533815
> 
> 赞同：0
> 
> 时间：2012-05-10T12:18:24.337
> 
> 标签：tfs, agile

我们将 TFS 2010 与 Agile 5.0 模板一起使用。我们经常使用 Excel 来处理 Product Backlog 以一种简单的方式编辑工作项（更改故事点、标题等），但为了链接项目，我们必须回到 TFS。我猜Excel不是一个很好的链接项目的UI，但我们想探索一下是否有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:55:54.107

如果您在电子表格中选择了包含 WI 的任何行，则应该可以使用“链接和附件”编辑其链接：

![在此处输入图像描述](../Images/422377511a5d397a784a381724238d33.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:46:46.133

您不能使用 Excel 链接工作项。你必须寻找另一种方式。

**编辑**

确实有一种方法可以链接给定的工作项，但我认为问题更多是关于在 Excel 表中创建链接关系，因为 user777375 谈到了编辑产品积压查询结果的**许多工作项。**

无法像批量更改许多工作项的给定字段的值那样批量链接工作项。

# java - 在eclipse中解析xml

> ID：10533816
> 
> 赞同：0
> 
> 时间：2012-05-10T12:18:26.143
> 
> 标签：java, xml-parsing, google-api

我正在用java编写代码并试图从这个URL解析xml： [https ://maps.googleapis.com/maps/api/directions/xml?origin=30.606595,33.546753&destination=30.657406,33.712234&sensor=false](https://maps.googleapis.com/maps/api/directions/xml?origin=30.606595,33.546753&destination=30.657406,33.712234&sensor=false)

此 URL 属于 google API，它需要 2 个点（src，dest）并以 xml 形式返回它们之间的路由。

当我用eclipse调试程序时，它运行完美。但是当我在没有调试的情况下运行代码时，它会返回一个错误。（当我在函数末尾放置一个断点时，“dist”为空，我不知道为什么）知道为什么会这样吗？

代码是

```
public double calcDist(Point p) //p=the src of the ride (the dest in the calculation)
    {
        String src = Double.toString(this.lati);
        src = src.concat(",");
        src = src.concat(Double.toString(this.longi));
        String dest = Double.toString(p.lati);
        dest = dest.concat(",");
        dest = dest.concat(Double.toString(p.longi));

    String dist=null;
    URL url = null;
    try 
    {
        url = new URL("https://maps.googleapis.com/maps/api/directions/xml?origin="+src+"&destination="+dest+"&sensor=false");

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = null;
        db = dbf.newDocumentBuilder();

        Document doc = null;
        doc = db.parse(new InputSource(url.openStream()));

        doc.getDocumentElement().normalize();
        NodeList nodeList = doc.getElementsByTagName("leg");

        for (int i = 0; i < nodeList.getLength(); i++) 
        {
            Node node = nodeList.item(i);
            NodeList nodeList2 =node.getChildNodes();
            for (int j = 0; j < nodeList2.getLength(); j++) 
            {
                Node child = nodeList2.item(j);
                if (child.getNodeName().contentEquals("distance"))
                {
                    NodeList nodeList3 = child.getChildNodes();
                    for (int p1 = 0; p1 < nodeList3.getLength(); p1++) 
                    {
                        Node child2 = nodeList3.item(p1);
                        if (child2.getNodeName().contentEquals("text"))
                        {
                            Node tmp = child2.getFirstChild();
                            if (tmp != null) 
                                dist = child2.getFirstChild().getNodeValue();
                        }
                    }
                }
            }
        }
    }
    catch (ParserConfigurationException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (SAXException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    dist = dist.substring(0, dist.length()-3);
    return Double.parseDouble(dist);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:29:50.197

而不是 XML 请求 json 对象（https://maps.googleapis.com/maps/api/directions/json?origin=30.606595,33.546753&destination=30.657406,33.712234&sensor=false）并使用 java 库，例如：[http:// /sites.google.com/site/gson/gson-user-guide](http://sites.google.com/site/gson/gson-user-guide)将其转换为 java 对象并提取您需要的任何内容。在您的情况下，XML 很重。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T12:30:27.170

我不运行代码。但在我看来，在检查 XML 文件后，距离来自`17,0 km`xml 格式。在您的子字符串之后它仍然存在`17,0`，但在 Java 和其他语言中使用点浮动数字。所以这可能是你的错误。

但有可能，您的解析器有问题。

您可以使用 Java 的 SAX-Parser API 进行 XML 解析，而不是使用缓慢且性能不佳的 DOM 解析器。

BR

# c# - MSI 安装程序的错误 2908

> ID：10533817
> 
> 赞同：2
> 
> 时间：2012-05-10T12:18:26.583
> 
> 标签：c#, visual-studio-2010, windows-installer, installation

在 Windows xp 上安装 msi 设置期间，如果我选择“just me”选项，我会收到以下错误：

> “安装程序在安装此软件包时遇到意外错误。这可能表明此软件包有问题。错误代码为 2908。”

如果我选择“每个人”选项，它会被安装，但如果我尝试启动应用程序：

> 应用程序遇到问题需要关闭

我首先尝试将应用程序安装在对其进行编程和创建设置并具有窗口 7 操作系统的机器上，并且安装程序和应用程序工作正常。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:57:15.107

错误代码 2908 表示安装程序注册组件失败：http: [//msdn.microsoft.com/en-us/library/aa372835 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa372835(VS.85).aspx)

我建议创建详细的安装日志以查看哪些组件无法正确注册：http: [//support.microsoft.com/kb/2545723](http://support.microsoft.com/kb/2545723)

以下是有关日志可以为您提供哪些信息的信息：http: [//blogs.technet.com/b/paulpaa/archive/2010/02/05/how-to-read-a-windows-installer-verbose-log .aspx](http://blogs.technet.com/b/paulpaa/archive/2010/02/05/how-to-read-a-windows-installer-verbose-log.aspx)

# c# - 使用 C# 以编程方式创建 Media Wiki 页面

> ID：10533818
> 
> 赞同：4
> 
> 时间：2012-05-10T12:18:27.707
> 
> 标签：c#, mediawiki, mediawiki-api

我在我的服务器上安装了一个媒体 wiki (www.mediawiki.org)，需要使用 c# 自动创建 Wiki 页面。

有谁知道如何使用 C# 以编程方式创建 Media Wiki 页面。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:20:03.177

是的，看看这个页面：[http ://www.mediawiki.org/wiki/API:Client_code](http://www.mediawiki.org/wiki/API%3aClient_code)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:24:22.307

您有两个用于媒体 wiki API 的 C# 包装器：

[http://sourceforge.net/projects/wikiaccess/](http://sourceforge.net/projects/wikiaccess/)

[http://dotnetwikibot.sourceforge.net/](http://dotnetwikibot.sourceforge.net/)

后者可以插入和修改页面，对于第一个我不确定但检查

# ios - 正确的行为？- 在 iPad 上运行的 iPhone 应用程序加载带有 ~ipad 扩展名的 xib

> ID：10533820
> 
> 赞同：4
> 
> 时间：2012-05-10T12:18:30.577
> 
> 标签：ios, xcode, ipad, interface-builder, xib

我偶然发现了我认为 iOS 中一些奇怪的行为——搜索 StackOverflow 并没有发现任何与我的问题相同的东西。

本质上，如果您有两个带有设备修饰符的 .xib 文件（~iphone 和 ~ipad），并且您在 iPad 上（即在 iPhone 模拟器窗口中）运行 iPhone 应用程序（非通用），它将尝试加载 ~ipad xib文件而不是 ~iphone xib。

这是一个错误吗？我希望〜iphone xib被加载。即使实际设备是 iPad，它也在模拟 iPhone，对吧？那么它肯定应该加载iPhone接口文件吗？

重现步骤：

1.  在 XCode 中创建一个新的 iPhone（非通用）应用程序 - 使用“单一视图”模板。
2.  将 ViewController.xib 重命名为 ViewController~iphone.xib
3.  复制并重命名 xib，以便您现在拥有 ViewController~iphone.xib 和 ViewController~ipad.xib
4.  在 iPad 模拟器（或在实际的 iPad 设备上）运行此 iPhone 应用程序 - 加载 ~ipad XIB 而不是 ~iPhone xib。

谁能建议我如何解决这个问题？这很复杂，因为我的实际 XCode 项目有多个目标（1\. 仅限 iPhone 的应用程序 2\. 仅限 iPad 的应用程序），所以我需要支持所有场景，因此需要使用设备修饰符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:53:35.747

我通常在使用 nib 时这样做：

```
- (id)init
{
    if( [[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomiPhone )
    {
        nibNameString = @"mynib-iPhone";
    }
    else
    {
        nibNameString = @"mynib-iPad";
    }
    self = [super initWithnNibName:nibNameString bundle... 
```

# localization - Tumblr 博客文章的本地化？

> ID：10533822
> 
> 赞同：2
> 
> 时间：2012-05-10T12:18:36.693
> 
> 标签：localization, blogs, tumblr

有没有类似[qTranslate for Wordpress](http://wordpress.org/extend/plugins/qtranslate/) for [Tumblr](http://www.tumblr.com)这样我可以本地化博客文章？我需要用英语和德语写帖子，以便德语帖子显示给德国读者，而英语则显示给其余的读者。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:13:15.060

您问题的第一部分“Tumblr 的 Wordpress 是否有类似 qTranslate 之类的东西”的答案是否定的：Tumblr 不是像 WordPress 这样的（准）CMS 系统。你在[Tumblr 主题文档](http://www.tumblr.com/docs/en/custom_themes)中得到的就是关于定制的全部内容。

第二部分的答案是：你可以使用 Tumblr 在其主题定制工具包中提供的工具来制作任何你喜欢的东西，这些工具可以是 HTML、CSS 和 JavaScript（与托管的 WordPress 不同，它们**不会**在主题中被阻止），但是它是由你决定。如果文本以两种语言的翻译形式存在，基本的方法是在页面中包含这两种版本，给它正确的[`lang`属性](http://reference.sitepoint.com/html/core-attributes/lang)和样式你的 CSS 以默认隐藏一个（使用`[lang="x"]`属性选择器），然后使用 JavaScript 来猜测访问者的语言环境（有关一些指针，请参阅[此问题](https://stackoverflow.com/questions/673905/best-way-to-determine-users-locale-within-browser)）或提供选择机制并切换两个块的隐藏状态（对于 jQuery 来说很简单）。

最后，Tumblr 的主题模板语言是本地化的——查看[文档的本地化部分，](http://www.tumblr.com/docs/en/localizing_themes)了解如何本地化主题本身（而不是内容）。

# javascript - 具有非默认 rowHeight 的分组 SlickGrid

> ID：10533824
> 
> 赞同：2
> 
> 时间：2012-05-10T12:18:39.643
> 
> 标签：javascript, jquery, datagrid, slickgrid

我正在使用[分组示例](http://mleibman.github.com/SlickGrid/examples/example-grouping)中所示的[SlickGrid](https://github.com/mleibman/SlickGrid)控件 如果我将 rowHeight 选项设置为 200，那么网格也会使 slick-group 行更大。

有没有办法解决？我试图手动调整该分组行上的 CSS，但是网格不会调整所有其他行的行位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:06:42.847

SlickGrid requires all rows to be the same height.

# java - mvn install in maven 到底做了什么

> ID：10533828
> 
> 赞同：194
> 
> 时间：2012-05-10T12:18:54.463
> 
> 标签：java, maven, pom.xml

我刚开始使用 Maven，有人告诉我要`mvn install`在特定目录中进行操作。

究竟是`mvn install`做什么的？

我认为它`pom.xml`在当前文件夹中查找并开始按照该文件中指定的说明进行操作。那是对的吗？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-09-13T13:13:15.537

您可能知道，Maven 是 Apache 提供的一个构建自动化工具，它不仅仅做依赖管理。我们可以使它成为 Ant 和 Makefile 的对等体，它下载所需的所有依赖项。

在 a 上，它基于超级（根 POM）下所有子项目`mvn install`的项目配置构建依赖关系树，并在用户文件夹下调用的目录中下载/编译所有需要的组件。必须解决这些依赖项才能构建项目而不会出现任何错误，并且是一种可以下载大多数依赖项的实用程序。`pom.xml``pom.xml``.m2``mvn install`

此外，Maven 中还有其他实用`dependency:resolve`程序，可以在任何特定情况下单独使用。mvn 的构建生命周期如下：[LifeCycle Bindings](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)

1.  `process-resources`
2.  `compile`
3.  `process-test-resources`
4.  `test-compile`
5.  `test`
6.  `package`
7.  `install`
8.  `deploy`

这个 mvn 的测试阶段可以通过使用 flag 来忽略`-DskipTests=true`。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-05-10T12:21:20.557

您是否查看过任何 Maven 文档，例如[Maven 安装插件文档](http://maven.apache.org/plugins/maven-install-plugin/)？

Nutshell 版本：它将构建项目并将其安装在您的本地存储库中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-26T10:39:31.763

目标由`install:install`«Apache Maven Install Plugin»提供：

> # Apache Maven 安装插件
> 
> 在安装阶段使用安装插件将工件添加到本地存储库。安装插件使用 POM ( `groupId`, `artifactId`, `version`) 中的信息来确定工件在本地存储库中的正确位置。
> 
> 本地存储库是存储构建所需的所有工件的本地缓存。默认情况下，它位于用户的主目录 ( `~/.m2/repository`) 中，但可以`~/.m2/settings.xml`使用该`<localRepository>`元素配置该位置。
> 
> — [Apache Maven 安装插件 - 简介](http://maven.apache.org/plugins/maven-install-plugin/index.html)。

话虽如此，确切的目标目的：

> `install:install`用于自动安装项目的主要工件（JAR、WAR 或 EAR）、其 POM 和特定项目生成的任何附加工件（源代码、javadoc 等）。
> 
> — [Apache Maven 安装插件 - 简介](http://maven.apache.org/plugins/maven-install-plugin/index.html)。

有关目标的更多详细信息，请参阅[Apache Maven 安装插件 - install:install](http://maven.apache.org/plugins/maven-install-plugin/install-mojo.html)页面。

有关构建生命周期的更多详细信息以及目标在构建生命周期中的位置，请参阅[Maven – 构建生命周期简介](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)页面。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-10T12:42:35.537

它将运行与默认生命周期的任何阶段相关联的所有已配置插件的所有目标，直到“安装”阶段：

[https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-05-14T13:55:39.733

**简短的回答**

> **mvn 安装**
> 
> *   **将pom**中指定的所有工件（依赖项）添加到**本地** **存储库**（来自远程源）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-04T06:36:23.370

`-DskipTests=true`是的缩写形式`-Dmaven.test.skip=true`

**在.m2**文件夹中的**Setting.xml**中进行更改。您可以使用指向本地 repo 的链接，这样一旦下载的 jars 就不会一次又一次地下载。

 **```
<url>file://C:/Users/admin/.m2/repository</url>
 </repository> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-14T17:55:25.973

在 maven 构建生命周期的任何阶段，都会执行之前的所有目标。

例如：mvn install 将调用 mvn validate、mvn compile、mvn test、mvn package 等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-29T08:53:08.357

重要的是要指出，`install`不同`install:install`的事情`install`是一个**阶段**，在这个阶段，maven 不仅仅将当前项目模块工​​件安装到本地存储库，它首先检查远程存储库。另一方面，这`install:install`是一个**目标**，它只是构建您当前的项目并将其所有工件安装到本地存储库（例如，安装到`.m2`目录中）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-03T08:52:08.087

**mvn install**主要工作是*1) 下载依赖项*和*2) 构建项目*

而现在*工作 1*由 intellij 之类的 ID 负责（他们在 POM 下载任何依赖项）

mvn install 现在主要用于*作业 2*。**

# pyqt - 在 QLabel 中显示标准图标和文本

> ID：10533838
> 
> 赞同：11
> 
> 时间：2012-05-10T12:19:19.827
> 
> 标签：pyqt, qlabel

`QLabel`我想在*pyqt*中显示标准警告图标以及一些描述文本。`Qlabel`没有`setIcon`功能。那我怎么能这样做呢？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-13T20:06:59.657

`QLabel`没有`setIcon`方法，但有[`setPixmap`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qlabel.html#setPixmap). 但是，如果您使用它来设置 a[`QPixmap`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qpixmap.html)它会覆盖您的文本。但是有几种可能性可以实现您想要的：

*   使用 html-capabilities`QLabel`显示文本+图像
*   使用两个标签，一个带有文本，一个带有图像
*   自己绘制组件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-09T11:42:13.553

我知道我参加聚会有点晚了，但这是我对这个问题的解决方案：

```
import qtawesome as qta
from PyQt5.QtCore import *
from PyQt5.QtWidgets import *

class IconLabel(QWidget):

    IconSize = QSize(16, 16)
    HorizontalSpacing = 2

    def __init__(self, qta_id, text, final_stretch=True):
        super(QWidget, self).__init__()

        layout = QHBoxLayout()
        layout.setContentsMargins(0, 0, 0, 0)
        self.setLayout(layout)

        icon = QLabel()
        icon.setPixmap(qta.icon(qta_id).pixmap(self.IconSize))

        layout.addWidget(icon)
        layout.addSpacing(self.HorizontalSpacing)
        layout.addWidget(QLabel(text))

        if final_stretch:
            layout.addStretch() 
```

我正在使用[`QtAwesome`](https://pypi.org/project/QtAwesome/)获取所需的图标。

现在您可以轻松地将图标标签插入到您自己的 PyQt5 布局中。例子。

```
mylayout.addWidget(IconLabel("fa.scissors", "Slicer Limit:")) 
```

它看起来像什么：

[![在此处输入图像描述](../Images/90dc6683c47277c4fbd6b9ced9cb1bd1.png)](https://i.stack.imgur.com/aEngv.png)

请注意，我包括了一个选项`final_stretch`。在垂直布局中，您需要保持`final_stretch = True`正确的左对齐（参见上图）。但是，在水平布局中（即，`IconLabels`在同一行中彼此相邻放置多个时），您可能需要设置`final_stretch = False`以节省空间。

# android - Android SQLite 禁用字符

> ID：10533839
> 
> 赞同：0
> 
> 时间：2012-05-10T12:19:23.370
> 
> 标签：android, sqlite, insert, symbols

我正在尝试将一些字符串插入到我的 SQLite 数据库中，其中包含这些 (')。出于某种原因，它弄乱了我的查询。

有没有办法在不破坏查询的情况下将符号插入数据库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:23:31.963

在字符串中间，使用两个相邻的单引号将单引号包含在字符串中。

试试这个

```
String updateString = "UPDATE " + DATABASE_CASTING + " SET " + KEY_PROTECT + "='" + value + "' WHERE " + KEY_NAME + "='" + name + "' AND " + KEY_TOTAL + "='" + total +"'";

ourDatabase.execSQL(updateString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:24:22.853

您可以使用

```
String strreplace = "your query with ' & " character";
String result = strreplace .replaceAll("'", "''");
result = result .replaceAll(""", """"); 
```

这会将**'**替换为**''（这是两个）**和**"**替换为**""**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:45:07.773

您需要先解析字符串，然后再将它们放入查询中并将任何字符串替换`'`为`''`.

# c - 带有 gcc 的 C 中的类型安全可变参数

> ID：10533842
> 
> 赞同：20
> 
> 时间：2012-05-10T12:19:35.243
> 
> 标签：c, gcc, static-analysis, c89

很多时候，我希望一个函数接收可变数量的参数，以 NULL 终止，例如

```
#define push(stack_t stack, ...) _push(__VARARG__, NULL);
func _push(stack_t stack, char *s, ...) {
    va_list args;
    va_start(args, s);
    while (s = va_arg(args, char*)) push_single(stack, s);
} 
```

`char*`如果 foo 收到非变量，我可以指示 gcc 或 clang 发出警告吗？类似于 的东西`__attribute__(format)`，但用于相同指针类型的多个参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T11:11:49.500

我知道你正在考虑以`__attribute__((sentinel))`某种方式使用，但这是一个红鲱鱼。

你想要的是做这样的事情：

```
#define push(s, args...) ({                   \
  char *_args[] = {args};                     \
  _push(s,_args,sizeof(_args)/sizeof(char*)); \
}) 
```

包装：

```
void _push(stack_t s, char *args[], int argn); 
```

您可以*完全*按照您希望的方式编写它！

然后你可以调用：

```
push(stack, "foo", "bar", "baz");
push(stack, "quux"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:14:21.547

我只能想到这样的事情：

```
#include <stddef.h>
#include <stdio.h>
#include <stdlib.h>

typedef struct tArg
{
  const char* Str;
  struct tArg* Next;
} tArg;

tArg* Arg(const char* str, tArg* nextArg)
{
  tArg* p = malloc(sizeof(tArg));
  if (p != NULL)
  {
    p->Str = str;
    p->Next = nextArg;
  }
  else
  {
    while (nextArg != NULL)
    {
      p = nextArg->Next;
      free(nextArg);
      nextArg = p;
    }
  }
  return p;
}

void PrintR(tArg* arg)
{
  while (arg != NULL)
  {
    tArg* p;
    printf("%s", arg->Str);
    p = arg->Next;
    free(arg);
    arg = p;
  }
}

void (*(*(*(*(*(*(*Print8
  (const char* Str))
  (const char*))
  (const char*))
  (const char*))
  (const char*))
  (const char*))
  (const char*))
  (const char*)
{
  printf("%s", Str);
  // There's probably a UB here:
  return (void(*(*(*(*(*(*(*)
    (const char*))
    (const char*))
    (const char*))
    (const char*))
    (const char*))
    (const char*))
    (const char*))&Print8;
}

int main(void)
{
  PrintR(Arg("HELLO", Arg(" ", Arg("WORLD", Arg("!", Arg("\n", NULL))))));
//  PrintR(Arg(1, NULL));        // warning/error
//  PrintR(Arg(&main, NULL));    // warning/error
//  PrintR(Arg(0, NULL));        // no warning/error
//  PrintR(Arg((void*)1, NULL)); // no warning/error

  Print8("hello")(" ")("world")("!")("\n");
// Same warning/error compilation behavior as with PrintR()
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-02T15:13:29.977

C 可变参数的问题在于，它们实际上是在事后才用螺栓固定的，而不是真正设计到语言中的。主要问题是可变参数是匿名的，它们没有句柄，没有标识符。这导致笨拙的 VA 宏生成对没有名称的参数的引用。它还导致需要告诉那些宏变量列表从哪里开始以及参数应该是什么类型。

所有这些信息确实应该在语言本身中以适当的语法编码。

例如，可以在省略号后使用形式参数扩展现有的 C 语法，如下所示

```
void foo ( ... int counter, float arglist ); 
```

按照惯例，第一个参数可以用于参数计数，第二个参数用于参数列表。在函数体中，列表可以在语法上被视为一个数组。

有了这样的约定，可变参数将不再是匿名的。在函数体内，可以像引用任何其他参数一样引用计数器，并且可以像引用数组参数的数组元素一样引用列表元素，就像这样

```
void foo ( ... int counter, float arglist ) {
  unsigned i;
  for (i=0; i<counter; i++) {
    printf("list[%i] = %f\n", i, arglist[i]);
  }
} 
```

借助语言本身内置的这种功能，每个对的引用都`arglist[i]`将被转换为堆栈帧上的相应地址。无需通过宏执行此操作。

此外，编译器会自动插入参数计数，从而进一步减少出错的机会。

打电话给

```
foo(1.23, 4.56, 7.89); 
```

将被编译，就好像它已被编写

```
foo(3, 1.23, 4.56, 7.89); 
```

在函数体内，任何超出实际传递的参数数量的元素访问都可以在运行时检查并导致编译时错误，从而大大提高安全性。

最后但同样重要的是，所有可变参数都是类型化的，并且可以在编译时进行类型检查，就像检查非可变参数一样。

在某些用例中，当然需要交替类型，例如在编写函数以将键和值存储在集合中时。这也可以简单地通过在省略号之后允许更多形式参数来适应，就像这样

```
void store ( collection dict, ... int counter, key_t key, val_t value ); 
```

然后可以将此函数称为

```
store(dict, key1, val1, key2, val2, key3, val3); 
```

但会被编译为好像它已被编写

```
store(dict, 3, key1, val1, key2, val2, key3, val3); 
```

实际参数的类型将在编译时对照相应的可变参数形式参数进行检查。

在函数体内，计数器将再次被其标识符引用，键和值将被引用，就好像它们是数组一样，

`key[i]`指第 i 个键/值对的键 `value[i]`指第 i 个值对的值

这些引用将被编译到它们各自在堆栈帧上的地址。

这些都不是真的很难做到，也从来没有。然而，C 的设计理念根本不利于这些特性。

如果没有一个冒险的 C 编译器实现者（或 C 预处理器实现者）带头实现这个或类似的方案，我们不太可能在 C 中看到任何这种类型的东西。

问题是那些对类型安全感兴趣并愿意投入工作来构建自己的编译器的人通常会得出这样的结论，即 C 语言已经无法挽救，人们不妨从设计更好的语言开始.

我自己也去过那里，最终决定放弃尝试，然后实现 Wirth 的一种语言，并在其中添加了类型安全的可变参数。从那以后，我遇到了其他人，他们告诉我他们自己失败的尝试。C 中正确的类型安全可变参数似乎仍然难以捉摸。

# iphone - 如何正确恢复 UIView 子类大小、原点和旋转？

> ID：10533843
> 
> 赞同：0
> 
> 时间：2012-05-10T12:19:35.927
> 
> 标签：iphone, ios, ipad

我有一个包含 UITextView 的 UIView 子类（我称之为 aView）。用户可以根据需要调整和旋转 aView，目标是让应用程序将 aView 恢复到与用户上次运行应用程序时完全相同的位置、大小和旋转。

我的编码如下所示：

```
[encoder encodeCGRect:self.view.frame forKey:@"annotationFrame"];   
[encoder encodeCGPoint:self.view.center forKey:@"annotationCenter"];
[encoder encodeCGRect:self.textView.frame forKey:@"textViewFrame"]; 
[encoder encodeCGAffineTransform:self.view.transform forKey:@"transform"]; 
```

和 initwithCoder：

```
 CGRect frame = [decoder decodeCGRectForKey:@"annotationFrame"];
    CGPoint center = [decoder decodeCGPointForKey:@"annotationCenter"];
    CGRect tvframe = [decoder decodeCGRectForKey:@"textViewFrame"];
    CGAffineTransform transform = [decoder decodeCGAffineTransformForKey:@"transform"];

    self.view.frame = frame;
    self.view.center = center;
    self.view.transform = transform;
    self.textView.frame = tvframe; 
```

但这里是“之前”和“之后”的样子：（我添加了 bgcolors 以便可以看到框架）。旋转似乎是正确的，但原点和帧大小不正确。我不确定我做错了什么？

![前](../Images/e06d279a55a11bcbff995bd7cc94ba5b.png)

![后](../Images/e36fc2e8ea916e943a65ae76c6ce9103.png)

这

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:43:32.043

对于旋转视图的`frame`属性可能不是您所期望的 - 因为它是根据视图的边界、中心和变换属性计算的。尝试保存和恢复视图的`bounds`属性，而不是`frame`因为它不受视图转换的影响

```
[encoder encodeCGRect:self.view.bounds forKey:@"annotationBounds"]; 

...

CGRect bounds = [decoder decodeCGRectForKey:@"annotationBounds"];
...
self.view.bounds = bounds; 
```

# c# - 如何在工具部件（在 Web 部件中）中封装经常重复的代码？

> ID：10533846
> 
> 赞同：0
> 
> 时间：2012-05-10T12:19:44.663
> 
> 标签：c#, windows, sharepoint, sharepoint-2010, web-parts

我的 webpart 应该有很多关于 answertype 下拉列表的问题。在设置中，问题可以使用工具部件进行配置。编写和阅读一个问题的设置。我不知道代码如何解决 x-more 问题（我必须在哪种方法中使用冗余代码 - 我可以在哪里以及如何封装代码？你有给我提示，或者你知道一个有趣的网站吗？我希望你能理解我的问题；否则我会写更多细节......

谢谢

此外，来自工具部分的（基本部分）代码：

```
public class FeedbackToolpart : ToolPart
{
    Label ques1Lab, ans1Lab, typ1Lab;
    DropDownList ddList;
    List<Question> outputList;
    ...

    public FeedbackToolpart() : base() { this.Title = "Bewertungseinstellungen"; }

    protected override void CreateChildControls()
    {
        parentWebPart = (Feedbackwebpart)this.ParentToolPane.SelectedWebPart;
        ...
        ddList = new DropDownList();
        ddList.ID = "TheCheckBoxList";
        ddList.Items.Add("");
        ddList.Items.Add("Schieberegler");
        ddList.Items.Add("Checkboxen");
        ddList.Items.Add("Textbox");
        ddList.SelectedIndexChanged += new EventHandler(ddList_SelectedIndexChanged);
        ddList.AutoPostBack = true;

        ddList.SelectedValue = (parentWebPart.MyValue != null) ? parentWebPart.MyValue[0].answType : "Textbox";

        this.Controls.Add(pan);
        base.CreateChildControls();            
    }

    protected void ddList_SelectedIndexChanged(object sender, EventArgs e) { ... }

    public override void ApplyChanges()
    {
        parentWebPart = (Feedbackwebpart)this.ParentToolPane.SelectedWebPart;
        outputList = new List<Question>();
        outputList.Add(new Question(texQuestion.Text, texAnswers.Text, ddList.SelectedValue));
        parentWebPart.MyValue = outputList;           
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:16:57.980

一种设计方法可能是：

为每个问题创建一个包含元素的 XML（封装文本、UI 控件类型和/或您需要的其他特征）。创建 .NET 类以通过标准 .NET XML 序列化程序反序列化[XML 的内容。](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)将 XML 文件部署到 SharePoint 的某个位置，您可以根据解决方案类型（场或沙盒）访问它。您可以通过 HTTP 或 SP OM 读取其内容。反序列化后，您将在循环中枚举问题对象数组，并为每个问题创建一个带有指定输入控件的表格行。

--- 费尔达

# c# - 使用 C# SqlConnection 将 Access 记录写入 SQL 表

> ID：10533848
> 
> 赞同：0
> 
> 时间：2012-05-10T12:19:48.907
> 
> 标签：c#, sql, ms-access

我在 Access 中有一个包含 A、B 和 C 列的表。我想将此表中的记录写入包含 A、B、C 和 D 列的 SQL 表中。实现它的最佳方法是什么？

我尝试使用 OleDbDataReader 和 bulkCopy，但架构差异使其变得困难：

```
OleDbDataReader reader;// = new OleDbDataReader();

using (OleDbConnection sourceConnection = new OleDbConnection(sourceConnectionString))
        {
            //Get data from Access
            OleDbCommand commandSourceData = new OleDbCommand("SELECT * FROM AddressLoCo;", sourceConnection);
            commandSourceData.Connection = sourceConnection;
            sourceConnection.Open();

            reader = commandSourceData.ExecuteReader();

            using (SqlConnection destinationConection = new SqlConnection(destinationConnectionString))
            {
                destinationConection.Open();
                // Set up the bulk copy object
                using (SqlBulkCopy bulkCopy = new SqlBulkCopy(destinationConection))
                {
                    bulkCopy.DestinationTableName = "dbo.AddressMaster";

                    try
                    {
                        bulkCopy.WriteToServer(reader);
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine(ex.Message);
                    }
                    finally
                    {
                        reader.Close();
                    }
                }
             }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:31:58.870

您应该对数据源中存在的所有列使用[SqlBulkCopy.ColumnMappings ：](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.columnmappings.aspx)

```
bulkCopy.ColumnMappings.Add("A", "A");
bulkCopy.ColumnMappings.Add("B", "B");
bulkCopy.ColumnMappings.Add("C", "C"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:52:45.603

使用 Access 连接，您可以在这些线上拥有一些东西。

```
//The square brackets contain a valid connection to SQL Server, this is most 
//easily obtained by linking a table and checking the Connect property

string ssql = @"INSERT INTO [ODBC;Description=Test;DRIVER=SQL Server;
   SERVER=servername;Trusted_Connection=Yes;
   DATABASE=Test].table_1 (Atext)
   SELECT AText FROM Table1";
string sourceConnectionString = 
   @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=z:\docs\test.accdb;";
using (OleDbConnection sourceConnection = new OleDbConnection(sourceConnectionString))
{
    OleDbCommand commandSourceData = new OleDbCommand(ssql, sourceConnection);
    commandSourceData.Connection = sourceConnection;
    sourceConnection.Open();

    commandSourceData.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:23:16.067

您正在使用批量复制，它期望源表和目标表的架构相同。

您需要一次处理每条记录，或者更好的是创建 SSIS 包。

# google-maps - 多个 API 密钥

> ID：10533850
> 
> 赞同：3
> 
> 时间：2012-05-10T12:20:01.870
> 
> 标签：google-maps, google-maps-api-3, api-key

我的公司帮助为多个客户开发谷歌地图网络应用程序。我个人不是开发人员，所以请原谅我提出了一个对其他人来说可能很明显的问题。

我需要注册多个 API 密钥，因为我不想在我的一个 API 密钥上超过 25K。那么是否可以注册多个 API 密钥 - 我的每个客户一个？这将确保一个客户不会影响其余客户，并且我个人不会超过 api 限制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T13:08:02.410

为此，我创建了多个密钥。

您的每个客户都需要是控制台中的单独*项目*。然后，您将所有配额分开。

但是：请注意，所有密钥都与**您的**Google 帐户相关联。如果您的一位客户做了令人发指的事情，它可能会影响您的帐户和所有项目。另一方面，由于它是您的帐户，Google 会就使用情况与您联系，您可以禁用该特定密钥（从而阻止您的客户执行任何操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T08:27:56.063

在我写这篇文章时，[开发者控制台帮助](https://web.archive.org/web/20150326133300/https://developers.google.com/console/help/new/)指出

> 您不能使用多个项目来尝试超出 API 使用限制

所以我想答案是否定的，你不能那样做。

[![谷歌项目条件条款](../Images/f84150dc120f47510e30508c22fe3a80.png)](https://i.stack.imgur.com/E8v3D.png)

# html - CSS3 关键帧需要 5 张幻灯片

> ID：10533853
> 
> 赞同：1
> 
> 时间：2012-05-10T12:20:06.740
> 
> 标签：html, css, css-animations

我有关键帧可以在我的列表中滑动：**[jsFiddle](http://jsfiddle.net/aravi_vel/MNSrs/2/)**

# html

```
<div id="merch" class="block">
    <h2>MERCH</h2>
    <div class="content">
      <div id="merchContainer">
        <ul class="merchItems">
          <li class="merch small item1 firstmerch">
             <div class="merchImg">
               <a href="/" target="_blank"><img src="http://images.wikia.com/recipes/images/1/15/Red_Apple.jpg"></a>
               <div class="merchZoomIcon"></div>
             </div>
             <div class="merchDetail">
               <div class="merchPriceWrapper">
                 <div class="merchName">
                   <a href="/" target="_blank">Apple</a>
                 </div>
                 <div class="merchPrice">$5.00</div>
               </div>
               <div class="merchBuy">
                 <a class="merchBuyLink button" href="/" target="_blank">BUY NOW</a>
               </div>
             </div>
           </li>
           <li class="merch small item2 secondmerch">
             <div class="merchImg">
               <a href="/" target="_blank"><img src="http://www.joemcalpine.com/wp-content/uploads/2012/04/orange2.jpg"></a>
               <div class="merchZoomIcon"></div>
             </div>
             <div class="merchDetail">
               <div class="merchPriceWrapper">
                 <div class="merchName">
                   <a href="/" target="_blank">Orange</a>
                 </div>
                 <div class="merchPrice">$45.00</div>
               </div>
               <div class="merchBuy">
                 <a class="merchBuyLink button" href="/" target="_blank">BUY NOW</a>
               </div>
             </div>
           </li>
           <li class="merch small item3 thirdmerch">
             <div class="merchImg">
               <a href="/" target="_blank"><img src="http://www.mangomaven.com/wp-content/uploads/2011/02/manilla1.jpg"></a>
               <div class="merchZoomIcon"></div>
             </div>
             <div class="merchDetail">
               <div class="merchPriceWrapper">
                 <div class="merchName">
                   <a href="/" target="_blank">Mango</a>
                 </div>
                 <div class="merchPrice">$1.29</div>
               </div>
               <div class="merchBuy">
                 <a class="merchBuyLink button" href="/" target="_blank">$1.29</a>
               </div>
             </div>
           </li>
         </ul>
       </div>
   </div>
</div> 
```

# css

```
/*MERCH*/
#merch {
    height: 325px;
    width: 304px;
    margin: 0 auto;
    overflow: visible;
    position: relative;
}
#merch img {
    display: block;
    height: 240px;
    width: 287px;
}
#merch .content {
    height: 340px;
    overflow: hidden;
}
#merch ul.merchItems {
    position: relative;
}
#merch li {
    width: 304px;
    height: 340px;
    position: absolute;
    right: -345px;
    list-style: none;
}
#merch li.firstmerch {
    -moz-animation: merchone 5s linear infinite;
    -webkit-animation: merchone 5s linear infinite;
}
#merch li.secondmerch {
    -moz-animation: merchtwo 5s linear infinite;
    -webkit-animation: merchtwo 5s linear infinite;
}
#merch li.thirdmerch {
    -moz-animation: merchthree 5s linear infinite;
    -webkit-animation: merchthree 5s linear infinite;
}
#merch:hover li {
    -moz-animation-play-state: paused;
    -webkit-animation-play-state: paused;
}
@-moz-keyframes merchone {
    0%  { right:0px; }
    4%  { right:0px; } 
    16% { right:0px; opacity:1; z-index:0; } 
    20% { right:345px; opacity:0; z-index:0; } 
    21% { right:-345px; opacity:0; z-index:-1; }
    92% { right:-345px; opacity:0; z-index:0; }
    96% { right:-345px; opacity:0; }
    100%{ right:0px; opacity:1; }
}
@-moz-keyframes merchtwo {
    0%  { right:-325px; opacity:0; }
    16% { right:-325px; opacity:0; }
    20% { right:0px; opacity:1; }
    24% { right:0px; opacity:1; } 
    36% { right:0px; opacity:1; z-index:0; } 
    40% { right:345px; opacity:0; z-index:0; }
    41% { right:-345px; opacity:0; z-index:-1; } 
    100%{ right:-345px; opacity:0; z-index:-1; }
}
@-moz-keyframes merchthree {
    0%  { right:-345px; opacity:0; }
    36% { right:-345px; opacity:0; }
    40% { right:0px; opacity:1; }
    44% { right:0px; opacity:1; } 
    56% { right:0px; opacity:1; } 
    60% { right:345px; opacity:0; z-index:0; }
    61% { right:-345px; opacity:0; z-index:-1; } 
    100%{ right:-345px; opacity:0; z-index:-1; }
}
@-webkit-keyframes merchone {
    0%  { right:0px; }
    4%  { right:0px; } 
    16% { right:0px; opacity:1; z-index:0; } 
    20% { right:345px; opacity:0; z-index:0; } 
    21% { right:-345px; opacity:0; z-index:-1; }
    92% { right:-345px; opacity:0; z-index:0; }
    96% { right:-345px; opacity:0; }
    100%{ right:0px; opacity:1; }
}
@-webkit-keyframes merchtwo {
    0%  { right:-325px; opacity:0; }
    16% { right:-325px; opacity:0; }
    20% { right:0px; opacity:1; }
    24% { right:0px; opacity:1; } 
    36% { right:0px; opacity:1; z-index:0; } 
    40% { right:345px; opacity:0; z-index:0; }
    41% { right:-345px; opacity:0; z-index:-1; } 
    100%{ right:-345px; opacity:0; z-index:-1; }
}
@-webkit-keyframes merchthree {
    0%  { right:-345px; opacity:0; }
    36% { right:-345px; opacity:0; }
    40% { right:0px; opacity:1; }
    44% { right:0px; opacity:1; } 
    56% { right:0px; opacity:1; } 
    60% { right:345px; opacity:0; z-index:0; }
    61% { right:-345px; opacity:0; z-index:-1; } 
    100%{ right:-345px; opacity:0; z-index:-1; }
} 
```

但它看起来好像有 5 个 li 元素并循环通过它，尽管只有 3 个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:36:34.610

This is your problem (times are given an animation duration of 5s):

```
@-webkit-keyframes merchone {
    ...
    16% { right:0px; opacity:1; z-index:0; }     /* 0.8 sec */
    20% { right:345px; opacity:0; z-index:0; }   /* 1.0 sec */
    ...
}
@-webkit-keyframes merchtwo {
    ...
}
@-webkit-keyframes merchthree {
    ...
    56% { right:0px; opacity:1; }                /* 2.8 sec */
    60% { right:345px; opacity:0; z-index:0; }   /* 3.0 sec */
    ...
} 
```

The first animation takes 0.8-1.0s to show the first image, and the third animation hides the image after 2.8-3.0s, together that makes a 3.6s-4.0s gap between the end of the last animation and start of the new animation.

# asp.net - 如何在服务器上查找请求页面的时间

> ID：10533854
> 
> 赞同：0
> 
> 时间：2012-05-10T12:20:06.850
> 
> 标签：asp.net, c#-4.0

我正在编写代码来查找浏览器请求任何页面的时间。
并且当服务器发送响应时。
我已经使用以下方法遍历了请求集合

```
    foreach（Request.Params.Keys 中的字符串 s）
    {
       Response.Write(s + ":" + Request.Params[s]);
    }

```

但我没有为此目的得到任何变量。
有没有其他办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:23:21.040

您应该使用 httpModule 事件 - 管道方法 - 可以通过 global.asax 文件访问ehich。：

`Application_BeginRequest`

当 ASP.NET 响应请求时，作为 HTTP 执行管道链中的第一个事件发生。

`Application_EndRequest`

当 ASP.NET 响应请求时，作为 HTTP 执行管道链中的最后一个事件发生。

在那里，你可以检查`DateTime.Now.`

## 编辑

如果您想知道该人何时请求该页面（通过链接或其他方式 - 而不是 GO 按钮） -

您可以在 JS 中设置一个具有 getDate() 的 hiddenField。

此元素将作为表单输入的一部分发送到服务器。

# r - 3D 数据上的 2D PCA

> ID：10533857
> 
> 赞同：-2
> 
> 时间：2012-05-10T12:20:23.510
> 
> 标签：r, plot, pca

鉴于我的输入 3D 数据位于文件“myFile.txt”中，组织为

```
435 43 23
234 23 453
212 45 2345
... 
```

我想对其执行 PCA，并且只提取前两个主成分。实现这一目标的最简单方法是什么？我有 R 和 mdp 可供处置，但我不确定我需要执行哪些命令才能使这些命令变得有用。

我会欣赏建设性的意见，而不是无知的反对。目的是帮我找到解决办法，毕竟……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:33:29.913

在基础 R 中，推荐的函数是`prcomp()`. 阅读它的帮助文件`?prcomp`。

一个例子是：

```
mod <- prcomp(USArrests, scale = TRUE) 
```

`mod`然后是类的对象，`"prcomp"`并且特征向量的矩阵（主成分，原始/未缩放）在组件中`x`

```
> str(mod)
List of 5
 $ sdev    : num [1:4] 1.575 0.995 0.597 0.416
 $ rotation: num [1:4, 1:4] -0.536 -0.583 -0.278 -0.543 0.418 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
  .. ..$ : chr [1:4] "PC1" "PC2" "PC3" "PC4"
 $ center  : Named num [1:4] 7.79 170.76 65.54 21.23
  ..- attr(*, "names")= chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
 $ scale   : Named num [1:4] 4.36 83.34 14.47 9.37
  ..- attr(*, "names")= chr [1:4] "Murder" "Assault" "UrbanPop" "Rape"
 $ x       : num [1:50, 1:4] -0.976 -1.931 -1.745 0.14 -2.499 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:50] "Alabama" "Alaska" "Arizona" "Arkansas" ...
  .. ..$ : chr [1:4] "PC1" "PC2" "PC3" "PC4"
 - attr(*, "class")= chr "prcomp" 
```

看`x`组件：

```
> head(mod$x)
                  PC1        PC2         PC3          PC4
Alabama    -0.9756604  1.1220012 -0.43980366  0.154696581
Alaska     -1.9305379  1.0624269  2.01950027 -0.434175454
Arizona    -1.7454429 -0.7384595  0.05423025 -0.826264240
Arkansas    0.1399989  1.1085423  0.11342217 -0.180973554
California -2.4986128 -1.5274267  0.59254100 -0.338559240
Colorado   -1.4993407 -0.9776297  1.08400162  0.001450164 
```

提取组件 1 和 2

```
> scrs <- mod$x[, 1:2]
> head(scrs)
                  PC1        PC2
Alabama    -0.9756604  1.1220012
Alaska     -1.9305379  1.0624269
Arizona    -1.7454429 -0.7384595
Arkansas    0.1399989  1.1085423
California -2.4986128 -1.5274267
Colorado   -1.4993407 -0.9776297 
```

然后你可以绘制它们等：

```
plot(scrs, asp = 1) ## asp = 1 gives equal scaling to x and y axes 
```

# facebook - 从谷歌搜索中隐藏 Facebook 应用

> ID：10533862
> 
> 赞同：0
> 
> 时间：2012-05-10T12:20:36.373
> 
> 标签：facebook, search, hide

有没有办法从谷歌搜索中隐藏我们的 Facebook 应用程序。该应用程序在 iFrame 中运行，我尝试在与 iFrame URL 相同的位置使用 robots.txt 文件并使用元标记，但该应用程序仍显示在谷歌搜索中。我还向谷歌网站管理员工具提交了 iFrame url 的删除请求，但该请求无效。

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:49:02.750

您无法删除对 Facebook 上不属于您的内容的索引。所有带有画布的应用程序都是可索引的。您可以删除 iFrame 中内容的索引（即源 URL）。

# python - 如何将我的 Django/Celery 定期任务和常规任务放在单独的文件中？

> ID：10533864
> 
> 赞同：1
> 
> 时间：2012-05-10T12:20:36.957
> 
> 标签：python, django, celery, code-organization, django-celery

我所有的 celery 任务都包含在我的`tasks.py`每个 Django 应用程序下。它相当混乱。

我想将我的 celery 定期任务移动到`check.py`每个应用程序下的一个文件中，主要是为了更容易组织和管理我的代码。

django-celery 中是否有规定可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:59:59.663

Celery 有特殊的配置设置，名为：`CELERY_IMPORTS`. 它是一个包含命名文件的列表，需要导入并检查现有的 Celery 任务功能。所以，我认为 django-celery 只是在其中添加类似`*/tasks.py`. 以您的方式，您可以在 manage.py 脚本的页脚中添加一些内容，以放入`CELERY_IMPORTS`您想要使用的脚本中。

# python - 如何使python程序使用不同的安装

> ID：10533873
> 
> 赞同：1
> 
> 时间：2012-05-10T12:20:56.117
> 
> 标签：python, linux, bash, scrapy

```
>> which python
/usr/bin/python
>> python --version
Python 2.4.x 
```

我的问题很简单，如何在不同的 python 安装（例如 /usr/bin/python26）上运行 python 程序？

我希望能够使用与默认安装不同的 python 安装来运行 Scrapy，但这个问题适用于在类 Unix 系统上运行的任何用 Python 编写的程序。

编辑：为了澄清，我想运行一个其他人编写的已安装程序，通常这样运行：

```
scrapy crawl blaha 
```

不像这样：

```
python scrapy crawl blaha 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:22:54.040

通常，在 Unix 系统下，您有多个 Python 可执行文件，例如，在我的系统上：

```
which python
/usr/bin/python
which python2
/usr/bin/python2 
```

可执行文件的名称给出了应用程序的版本。这是[PEP 394 中定义的不同 Python 版本的标准](http://www.python.org/dev/peps/pep-0394/)。要提示您的脚本应该使用哪个版本，通常的做法是提供一个 hashbang。例如，在我的系统上，Python 3.x 是默认的 Python，所以如果我编写 2.x 脚本，我会添加：

```
#!/usr/bin/env python2 
```

然后，当我的脚本运行 ( `./some_script.py`) 时，它将使用 Python 2.7.3。

你应该避免使用，`#!/usr/bin/env python`因为它会在不同的系统上做不同的事情。如果他们遵循规范，`#!/usr/bin/env python2`则应该指向 2.x 并且`#!/usr/bin/env python3`应该指向 3.x - 在 Arch 下这可以正常工作（仅`python`指向 3.x（不寻常）也是如此）。

# 更新您的编辑：

如果你想这样做，最简单的方法是在你的系统路径中创建一个可执行文件，它只运行命令`python some_script ...`。

这是定期完成的，例如，`eclipse`在我的系统实际运行时`/usr/bin/eclipse`- 一个包含以下内容的 bash 脚本：

```
#!/bin/bash
export ECLIPSE_HOME=/usr/share/eclipse
export GDK_NATIVE_WINDOWS=true
${ECLIPSE_HOME}/eclipse "$@" 
```

因此，对于您的问题，只需在路径中的某处（比如说`/usr/bin/scrapy`）制作一个脚本，其中包含：

```
#!/bin/bash
python2 scrapy "$@" 
```

我会注意到，在未来，您应该尽可能多地预先提供有关您的问题的信息，而不是在得到答案后更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:24:39.000

你是如何运行你的程序的？它是否设置了执行位并且您有第一行：

```
#!/usr/bin/python 
```

然后，好吧，就这样做：

```
#!/usr/bin/python26 
```

或者，您可以这样做：

```
>> python26 your-awesome-python-script.py 
```

关于您的编辑：由于您不能/不想更改第三方程序（scrapy），您需要：

*   重新链接`/usr/bin/python`（`ls -l`在上面做一个。你会看到它指向`python24`可执行文件，做一个`ln -s /usr/bin/python /usr/bin/pythonXY`或类似的重新链接这个）
*   `scrapy`在您的`.profile`
*   创建你自己的scrapy shell脚本来执行正确的咒语（例如用你喜欢的解释器运行脚本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:24:49.637

您可以查看[VirtualEnv](http://pypi.python.org/pypi/virtualenv)，它旨在让您在安装时使用不同版本的 python。

如果你想使用已经安装的python版本，如果你想使用python2.6 ，只需使用`python2.6`而不是。`python`

# extjs - ExtJS：分页不起作用和刷新按钮

> ID：10533875
> 
> 赞同：0
> 
> 时间：2012-05-10T12:21:00.403
> 
> 标签：extjs, extjs4

我使用下面的代码。我看到网格，内容是正确的，但寻呼机部分很奇怪。

1.  “下一个”、“上一个”、... 按钮未启用。有 4 条记录，我按页询问 3 条记录，我应该看到“第 1 页，共 2 页”
2.  如何管理“刷新”按钮。

![在此处输入图像描述](../Images/92be703212abb88b2daba75ff4b54c11.png)

谢谢，

```
 $(document).ready(function () {

        Ext.define('User', {
            extend: 'Ext.data.Model',
            fields: [
            { name: 'FirstName', type: 'string' },
            { name: 'LastName', type: 'string' },
            { name: 'Email', type: 'string' }
        ]
        })

        var userStore = Ext.create('Ext.data.Store', {
            model: 'User',
            proxy: {
                type: 'ajax',
                url: '/Home/GetUsers',
                reader: {
                    type: 'json',
                    root: 'users'
                }
            },
            autoLoad: true
        });

        Ext.create('Ext.grid.Panel', {
            renderTo: 'testing',
            store: userStore,
            autoScroll: true,
            layout: 'fit',
            title: 'Users',
            width:450,
            columns: [{
                text: 'First Name',
                width: 225,
                sortable: true,
                dataIndex: 'FirstName',
                editor: {
                    xtype: 'textfield',
                    allowBlank: false
                }
            },
            {
                text: 'Last Name',
                width: 225,
                sortable: true,
                dataIndex: 'LastName',
                editor: {
                    xtype: 'textfield',
                    allowBlank: false
                }
            }],
            bbar : Ext.create('Ext.toolbar.Paging', {
                store: userStore,
                pageSize: 3,
                displayInfo: true,
                displayMsg: 'Displaying topics {0} - {1} of {2}',
                emptyMsg: "No topics to display"
            })

        });

    }); 
```

更新1：

```
{"total":2,"success":true,"data":[{"Id":1,"FirstName":"AA","LastName":"BB"},{"Id":2,"FirstName":"CC","LastName":"DD"},{},{}]} 
```

我仍然看不到“第 x 页，共 2 页”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:16:15.573

[http://jsfiddle.net/AnYeq/1/](http://jsfiddle.net/AnYeq/1/)我看不出当前页面文本有什么问题。即使是没有“total”属性的测试 json 数据。控制刷新按钮并不那么明显。您可以尝试扩展 Ext.toolbar.Paging 并覆盖其私有方法[getPagingItems](http://docs.sencha.com/ext-js/4-1/source/Paging.html#Ext-toolbar-Paging-method-getPagingItems)。

# c# - 按类别呈现数据

> ID：10533879
> 
> 赞同：0
> 
> 时间：2012-05-10T12:21:07.753
> 
> 标签：c#, asp.net, visual-studio-2010

你好，所有的专业人士，

我正在为学校做一个项目，我正在对用户提交到我的网站的视频（链接到 youtube）进行分类。

视频属性之一是“创作者名称”。

可以说我有未知数量的内容生产者（又名创作者名称）。用户可以订阅特定的（一个或多个）内容制作者。

在专用页面中，用户可以看到他的订阅列表（创作者姓名），并在每个创作者姓名下看到最近提交的视频列表。

像这样的东西：

```
Some Name:

Video link 1

Video link 2

Some other name:

Video link 1

Video link 2 
```

我正在使用数据库并拥有这些表：

*   UserSubscription(User_ID,Creator_ID)
*   VideoDetails(Video_ID, Video_Name, Creator_ID)
*   创建者（创建者 ID，创建者名称）

我只想要这个问题的一般想法/方法。非常感谢您

埃利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:09:01.770

首先我要说的是，如果您只想显示链接列表，我不会使用 DataList - 而是使用中继器。这是一篇出色的文章，可帮助您做出决定[http://msdn.microsoft.com/en-us/library/aa479015.aspx](http://msdn.microsoft.com/en-us/library/aa479015.aspx)。

这应该让你开始无论你选择哪一个[http://support.microsoft.com/kb/306154](http://support.microsoft.com/kb/306154)

# objective-c - JSON 错误 + 目标 C

> ID：10533881
> 
> 赞同：0
> 
> 时间：2012-05-10T12:21:11.310
> 
> 标签：objective-c, json, sbjson, nsjsonserialization

我找到了几种解析`JSON`方法`Objective-C`：

*   [SBJSON](http://stig.github.com/json-framework/)
*   [NSJSON序列化](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

这两种方法都很好用，但是我唯一的问题是当发生错误时，我想要比错误消息更多的细节。具体来说，我想知道发生错误的行号和列（SBJSON 和 NSJSONSerialization 都返回错误，但是错误似乎只包含没有更多详细信息的消息）。

关于如何获得有关处理时发生的错误的更多详细信息的任何建议`JSON`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:31:22.687

我发现当收到来自 的错误时`NSJsonSerialization`，我可以使用以下代码获取有关该错误的更多详细信息：

```
NSString * details = [[error userInfo] objectForKey: @"NSDebugDescription"]; 
```

这给了我错误发生位置的字符索引。从这里我能够弄清楚这条线。

# iphone - 如何在动作中找到正确的 UIButton 对象

> ID：10533883
> 
> 赞同：4
> 
> 时间：2012-05-10T12:21:11.653
> 
> 标签：iphone, objective-c, ios, uibutton

我正在使用[此答案](https://stackoverflow.com/questions/10480727/generate-grid-of-buttons-with-two-parameters-for-ios)中的代码来生成按钮网格。

单击按钮时，我想更改按钮图像。所以我需要做类似的事情：

```
- (void)buttonPressed:(id)sender {
        [toggleButton setImage:[UIImage imageNamed:toggleIsOn @"on.png"] 
        forState:UIControlStateNormal];
    }
```

但我不知道如何从 UI 中将 toggleButton 分配给右键。我没有每个按钮的插座。任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:25:37.143

如果您要更改已按下的相同按钮，则应该可以：

```
- (void)buttonPressed:(id)sender {
    [sender setImage:[UIImage imageNamed:toggleIsOn @"on.png"] forState:UIControlStateNormal];
} 
```

这是因为`sender`是已按下*的按钮。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:25:42.667

使用论据`sender`。`sender`是您对其执行操作的对象。所以..只需将其转换为`UIButton`并更改图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:36:29.030

如果您没有为每个按钮创建出口和操作，那么即使通过 isKindofClass 获取子视图并进行比较也无法解决问题。您必须为每个按钮分配一个标签值，您可以将发送者转换为 UIButton，然后确定标签并根据标签更改图像。如果您想更改被按下按钮的图像，您可以简单地更改发送者的图像，因为按下的按钮是最新的。

```
if(((UIButton *)sender).tag==intvalue)
{
((UIButton *)sender) setImage:[UIImage imageNamed:@"Your Image"]];
} 
```

如果必须更改按下按钮的图像，只需更改图像，不需要 if 部分和标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:44:14.683

如果您想在动态 UIButton 上处理切换开关的打开和关闭，请将`tag`属性中的状态保持为`0`or `1`，并且一件重要的事情 sender 参数始终指示这是已对其执行操作的对象。

```
- (void)buttonPressed:(id)sender {
     UIButton* pressedButton=(UIButton *)sender;
     NSString* imageName=nil;

      if(pressedButton.tag==0){
          imageName=@"on.png";
          pressedButton.tag=1;
      }
      else{
          imageName=@"off.png";
          pressButton.tag=0;
      }
      [pressedButton setImage:[UIImage imageNamed:imageName]
      forState:UIControlStateNormal];
}
```

# header - Facebook Style Sticky Header, only visible when scrolled

> ID：10533885
> 
> 赞同：1
> 
> 时间：2012-05-10T12:21:15.087
> 
> 标签：header, scroll, visible, sticky, whenever

There are lots of sticky header tutorials all over the net but none of them suits mi requirement. Here is the description I need:

1.  It should be sticky when scrolled and stay a certain px down.
2.  It should not be visible until the page is scrolled to a certain px.

*Reference*: Facebook has the same menu. it is only visible when it is scrolled to a certain height.

**Anybody, please help me out.**

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:30:36.233

我想这可以帮助你 [摆弄](http://jsfiddle.net/senff/YNGhA/)

js: var header = document.querySelector('.header'); var origOffsetY = header.offsetTop;

```
function onScroll(e) {
  window.scrollY >= origOffsetY ? header.classList.add('sticky') :
                                  header.classList.remove('sticky');
}

document.addEventListener('scroll', onScroll); 
```

html:

```
 <div class="header">MENU</div>

<div id="content">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ultrices venenatis lectus, eget dignissim nunc rhoncus nec. Pellentesque mattis imperdiet sem, et dictum dolor auctor nec. Quisque egestas odio vel mi tempus ornare. Curabitur vehicula, ipsum a laoreet sodales, metus purus faucibus lacus, vel tincidunt leo nibh in sapien. Fusce non consectetur lorem. Aliquam congue enim ut diam sagittis cursus. Sed eu augue nec turpis convallis sodales in et mi. Ut porttitor suscipit mattis. Maecenas bibendum malesuada enim, nec mollis nibh faucibus at. Suspendisse lacinia leo at augue eleifend porttitor. Aliquam erat volutpat.

Phasellus dolor mauris, malesuada sed imperdiet vel, rhoncus in nisi. Quisque viverra neque sit amet leo molestie ornare. Praesent ultricies mi eu odio pretium rutrum. Nunc feugiat venenatis odio eu placerat. Mauris imperdiet vehicula magna quis pulvinar. Proin nec leo quis arcu viverra malesuada. Nam at enim vitae magna molestie varius. In vulputate erat at tellus iaculis sed tristique mauris molestie. Maecenas vitae purus porta elit convallis malesuada. Nam eu lectus ut elit molestie ornare non vitae mauris. Pellentesque ipsum ligula, congue ac ultricies ut, posuere non arcu. Morbi nec ligula sed libero porttitor convallis vel id lorem. Nulla facilisi. Nulla imperdiet ullamcorper metus in viverra. Maecenas erat purus, faucibus ut consectetur ut, dignissim id leo. Ut cursus consectetur quam.

Cras dui erat, gravida sit amet posuere nec, viverra id nisl. Vivamus justo libero, placerat in luctus nec, imperdiet ut nisi. Vestibulum vehicula tristique lorem a fringilla. Proin eu vulputate leo. Nullam quis sapien quis metus egestas pretium. Aliquam ut tincidunt erat. Duis eros lectus, eleifend et fringilla et, sollicitudin a sem. Ut eu lacus sapien, ac dignissim nibh. Pellentesque velit orci, sodales sit amet dictum in, luctus eu sapien.

Curabitur elementum accumsan accumsan. Maecenas et turpis quam. Fusce quis metus quam. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus vel ultrices nisi. Praesent non arcu sit amet ligula venenatis ornare et vel mauris. Curabitur mauris mi, ultricies quis posuere vitae, egestas et lectus. Fusce lectus tortor, bibendum vel bibendum quis, dictum eu sem. In rhoncus nunc id massa tincidunt luctus. Integer hendrerit sem lectus.

In interdum lacus ut urna rhoncus eget suscipit dolor iaculis. Duis commodo enim porttitor ipsum lacinia hendrerit. Proin sem massa, convallis sit amet lacinia non, dapibus ut lacus. Proin fermentum, enim vitae vulputate ullamcorper, eros massa convallis purus, nec fermentum odio lorem sit amet nunc. Proin nec lacus lacus. Quisque rhoncus neque quis lacus lobortis lacinia. Sed congue justo ut nisl ornare vulputate.

Ut pellentesque, justo eget sodales dignissim, nunc ligula aliquam tortor, ac lobortis velit ante fringilla arcu. Nunc pretium commodo varius. Integer condimentum ante a elit vestibulum vestibulum. Integer at sagittis nibh. Nunc a neque est. Curabitur volutpat ante eget massa sagittis placerat. Duis quis neque in mi hendrerit interdum malesuada sed sapien. Nullam consequat, dolor feugiat scelerisque consequat, lorem nisl tristique neque, sed euismod metus metus sit amet orci. Nulla euismod leo quis sapien commodo sit amet venenatis purus pulvinar. Nunc at elit quis magna tincidunt sagittis a id nibh. Suspendisse fermentum justo nisi, et rhoncus urna. Sed ut mi nec augue commodo tristique eu vel urna. Nunc mattis orci quis lorem lacinia in sollicitudin ligula laoreet. Sed sed nisi sit amet odio sollicitudin mattis.

Fusce rutrum massa vel mauris facilisis gravida. Fusce venenatis tincidunt dui ac ullamcorper. Fusce a viverra diam. Nulla ultricies vulputate ultricies. Curabitur eget suscipit arcu. Praesent ac augue odio, vestibulum sodales lacus. Etiam ac tortor eu est adipiscing dictum at vel enim. Mauris convallis ante at purus rutrum gravida. Praesent condimentum, sem vel lacinia tristique, ante neque dignissim tellus, eget malesuada nisl erat in leo. Donec et venenatis ante. Proin fringilla luctus leo ac bibendum. Curabitur tristique, urna et dignissim molestie, ligula nulla egestas elit, in facilisis orci elit a dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse ac mauris vel ante tincidunt suscipit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Suspendisse metus orci, elementum vitae accumsan eu, rhoncus sit amet magna. Integer viverra massa eget nunc sagittis porta. In lobortis vestibulum sem, sed interdum magna molestie non. Phasellus magna enim, adipiscing et venenatis vitae, sodales id nisi. Praesent non sapien odio. Praesent at magna diam. Integer sed sapien et augue tincidunt feugiat vitae vel nunc. Suspendisse egestas velit commodo odio fermentum cursus. Morbi nulla neque, luctus a pharetra ac, mollis ut mauris. Pellentesque euismod consectetur posuere.

Nam suscipit nisl libero, eget elementum odio. Pellentesque blandit, nisi eu hendrerit bibendum, metus odio blandit arcu, a mattis sapien nunc a mauris. In iaculis, turpis a interdum fermentum, tortor magna auctor est, nec molestie massa mi et diam. Etiam pretium, libero id pretium ultricies, dui augue molestie turpis, eget tristique justo dolor at nisi. Duis sed suscipit lacus. Vivamus nunc quam, elementum ornare bibendum sit amet, pharetra vitae tellus. Nullam non nibh quis augue interdum cursus. Aliquam vehicula tempus imperdiet.

Aliquam dignissim elementum nibh. Aliquam in dolor non augue blandit venenatis et adipiscing ante. Mauris at convallis mauris. Cras sapien odio, rhoncus quis ultricies at, aliquam fermentum sem. Proin quis aliquam lorem. Nullam convallis quam ac diam porttitor dictum. Mauris vitae erat orci, ut rhoncus odio. Integer dui nunc, gravida vitae molestie vel, pharetra a tortor. Suspendisse potenti. Duis vestibulum posuere vehicula.

Donec sapien libero, malesuada ut condimentum placerat, dapibus eget metus. Aenean pellentesque, nisl sed mollis tempus, justo lectus suscipit lorem, vitae semper turpis odio mattis tellus. Nulla iaculis varius convallis. In hac habitasse platea dictumst. Nunc tempor nisi porta nunc pharetra ut gravida enim viverra. Nulla et quam erat, id mollis dui. Praesent pulvinar elit sed justo cursus quis scelerisque libero viverra. Proin velit ligula, cursus ac suscipit et, porta vitae diam. Curabitur fermentum justo sed turpis venenatis ut volutpat purus volutpat. Nulla tincidunt elit vel nisi ornare convallis. Praesent adipiscing aliquam quam, ut imperdiet tortor blandit vitae. Nullam ut neque quis sem fermentum sollicitudin vitae vitae arcu. Curabitur sit amet leo arcu, non viverra tortor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi interdum pellentesque ultricies.

Donec congue mauris eget dolor facilisis eu dapibus purus auctor. Etiam ut urna ut sapien hendrerit lacinia. Nulla et odio sed urna faucibus sodales eget eu quam. Etiam convallis eros bibendum erat commodo adipiscing. Sed viverra lorem sollicitudin mauris consectetur hendrerit lacinia lacus adipiscing. Aliquam suscipit sagittis elit, quis molestie risus adipiscing vitae. Donec sed consequat mauris. Nunc sit amet mauris erat, eget vulputate lorem. Quisque volutpat mollis eros non lacinia. Nulla consectetur, quam quis ullamcorper sodales, nulla felis tempus nisl, sed ultrices ipsum nibh in velit. Vestibulum interdum facilisis arcu in ultrices. Sed dictum posuere porttitor. Maecenas enim elit, convallis sed faucibus ut, euismod aliquet metus. Nulla iaculis tempor justo, nec mollis orci sodales non.

Vestibulum et dui est. Proin feugiat aliquam nibh in malesuada. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sodales neque ut mauris pharetra vel euismod quam congue. Proin venenatis, mauris nec suscipit dictum, leo lorem adipiscing arcu, pretium pretium orci velit non tortor. Nunc tincidunt vehicula diam, ut iaculis mauris accumsan vitae.

Ut ut orci non felis lacinia elementum. Nam ultrices, dui at mollis mattis, justo lectus tristique est, in tempor eros lectus sed eros. Cras at mauris felis. In tempus vehicula neque, et luctus nisi blandit id. Donec vel vulputate mi. Quisque ac varius nisl. In eget dolor nec turpis vulputate auctor.

Donec pulvinar, metus et consectetur eleifend, neque nisi blandit tortor, at eleifend arcu odio at nisl. Nam fermentum aliquet odio, in euismod neque consequat vitae. Nunc purus augue, ultricies ut mattis ut, molestie ullamcorper risus. In varius, tortor ac iaculis interdum, lacus metus pharetra ipsum, vel egestas justo diam quis purus. Integer sem purus, vehicula quis molestie a, semper vel eros. Duis sagittis massa at lorem posuere quis sodales magna blandit. Duis vel turpis eu ipsum posuere egestas quis eu leo. Etiam vitae lectus mauris. Vivamus laoreet nisi at nisi dictum vulputate.

</div> 
```

# internet-explorer - pageY = -1 during mouseleave in IE

> ID：10533888
> 
> 赞同：1
> 
> 时间：2012-05-10T12:21:32.883
> 
> 标签：internet-explorer, mouseleave, pagey

I have such code:

```
$(document).mouseleave(function (e) {               
       if (e.pageY - $(window).scrollTop() <= 1) {                   
            alert('Please, leave your comment!');                   
       }
}); 
```

It works good in all browsers excepts IE (all versions). For example, when developer tab in ie is open and you move mouse to the bottom of your screen (through this developer tab), mouseleave event fire but pageY = -1 instead of 700px in FF or Chrome or Opera. H

How can i fix it?

# javascript - 变量在内部函数中不可写

> ID：10533889
> 
> 赞同：3
> 
> 时间：2012-05-10T12:21:34.067
> 
> 标签：javascript, jquery, firefox, variables, firebug

首先，我声明了一个全局变量并将其设置为 0。
在内部函数中，我想将 var 设置为另一个值，但我的输出不会在（全局）外部 var 中设置，它将被设置为本地变种。我的另一个问题是我得到输出的顺序。

输出：
第三
个0第一个0
第二个3

```
$(document).ready(function() {
    state = 0;
    $('#btnlogin').click(function() {
        $.post("php/redirect.php", {
            Username : $('#qi').attr('value'),
            Password : $('#password').attr('value')
        }, function(data) {
            console.log('first'+state);
            state = 3;
            console.log('second'+state);
        });
        console.log('third'+state);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:24:51.027

发生这种情况是因为`console.log('third'+state);`外部`$.post`（AJAX）调用并且调用速度比 ajax 响应快。

似乎您误解了 AJAX 是**异步**的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:28:30.603

您的问题是，当 post 调用从服务器返回时，调用的内部函数`$.post`将首先运行。

因此，当单击按钮时，您的程序流程将如下所示：

`$.post("php/redirect.php",`这将调用服务器端的redirect.php方法，并在调用完成时调用以下函数：

```
function(data) {
  console.log('first'+state);
  state = 3;
  console.log('second'+state);
} 
```

然后该函数继续并运行以下代码：

```
console.log('third'+state); 
```

此时状态仍为 0，因此输出为`third0`。

然后 ajax 调用完成，并调用你上面的函数，从而打印以下内容：

```
first0
second3 
```

您的问题只是期望方法中的行，包括您在内部定义的函数以它们在脚本中出现的相同顺序运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:28:44.723

输出很容易解释：

加载文档后，您首先将单击处理程序绑定到某个按钮。点击处理程序以下列方式工作：

*   启动*异步*AJAX 调用
*   注销`'third'+state`

此时状态为 0，因此第一个输出为`third0`。

一段时间后，AJAX 请求成功，您得到了答案。得到答案时，您会登录`'first'+state`。`state`仍然可以得到`0`输出`first0`。

之后，您将 的值更改`state`为三和第三个输出，这将为您提供`second3`.

因此，要了解行为，您应该熟悉 AJAX 的异步版本或将请求更改为同步样式。后者非常糟糕，因为它会使您的页面在请求仍在运行时无法访问。

# c# - 如何使用 C# 将表从 SQL Server Express 移动到另一台计算机上的标准版？

> ID：10533892
> 
> 赞同：0
> 
> 时间：2012-05-10T12:21:51.683
> 
> 标签：c#, sql-server

我需要从 SQL Server Express 中获取几个表及其数据，然后将它们发送到另一台计算机，然后使用 C# 在 SQL Server Standard Edition 中创建或替换它们。

我一直在寻找一个解决方案，我发现最接近的方法是恢复表`DataTables`或`DataSets`使用 WCF 发送它们，但我认为我会丢失索引并且我已经读到不建议`DataSets`使用 WCF 发送。

我也看过 Microsoft Sync Framework，但我没有使用过它，我不知道它是否可以轻松解决这个问题。有人告诉我这样做的另一种方法是将表和索引导出到 SQL 脚本。

我的问题是：有没有简单的方法可以做到这一点？如果没有，哪种方法更不痛苦？

编辑：对不起，我忘了提：

- 这将每周发生一次或两次。

-机器不在同一个网络中。

-最终，表格的结构可能会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:30:50.027

您可以使用 c# 备份整个数据库并在标准 sql 服务器中恢复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:32:05.657

如果数据库具有彼此的网络可见性，则一种方法是在其中一个实例中创建[链接服务器](http://msdn.microsoft.com/en-us/library/ms188279.aspx)并从一个到另一个进行[选择。](http://www.devguru.com/technologies/t-sql/7126.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:32:23.283

1.  您可以备份数据库，在新实例中恢复它。
2.  您可以将其分离并将其附加到新实例上。
3.  您可以生成一个 sql 脚本并在新实例上运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:42:28.773

如果要从 C# 执行此操作，请使用 SMO（SQL Server 管理对象）。

在这里，您有一个在两个数据库之间传输模式和数据的示例。

[传输数据](http://msdn.microsoft.com/en-us/library/ms162563.aspx)

该项目展示了如何将其用于表格：

[使用 SQL Server 管理对象复制表](http://www.codeproject.com/Articles/100614/Copy-a-table-using-SQL-Server-Management-Objects)

# regex - function to expand out composite field to lucene queries

> ID：10533898
> 
> 赞同：0
> 
> 时间：2012-05-10T12:22:08.673
> 
> 标签：regex, lucene, field, composite

I am having trouble implementing a function that would apply composite fields to Lucene queries.

Instead of typing the lucene query:

title:"The Right Way" subject:"The Right Way"

I want users to be able to type:

all:"The Right Way"

Where all is composite field consisting of real fields title and subject. The function should generate a valid lucene query with constituents of a composite field expanded out.

String query = applyCompositeFields(String query, String compositeField, String[] subFields) {

} The supplied query may be any query according to the lucene query syntax (see: [http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html#Range%20Searches](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html#Range%20Searches))

For example:

all:[20020101 TO 20030101]

Should be expanded to:

title:[20020101 TO 20030101] subject:[20020101 TO 20030101]

Any ideas on how to do this neatly without breaking complex query inputs?

I've tried using the Lucene query object model, however, the field names cannot be set on the query elements, so its useless.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:29:08.170

我认为[MultiFieldQueryParser](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/queryParser/MultiFieldQueryParser.html)是您正在寻找的。

**编辑**

MultiFieldQueryParser 将：

*   `"The Right Way"`如果字段在查询字符串 ( )中不明确，则在多个字段之间分派查询
*   否则对单个字段使用普通查询 ( `title:"The Right Way"`)。

例如，

```
 MultiFieldQueryParser qp = new MultiFieldQueryParser(
            Version.LUCENE_36, new String[] { "subject", "body" },
            new KeywordAnalyzer());
    System.out.println(qp.parse("subject:\"hello\" body:test AND [1222 TO 2333]")); 
```

印刷

```
 subject:hello +body:test +(subject:[1222 TO 2333] body:[1222 TO 2333]) 
```

如果您想坚持使用虚拟复合字段的语法`all`，您可以扩展 QueryParser 以在字段名称为`all`. 您可以通过查看[MultiFieldQueryParser](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/3.5.0/org/apache/lucene/queryParser/MultiFieldQueryParser.java#MultiFieldQueryParser)的源代码获得一些启发。

# package - Creating symlinks when packaging a Library (Debian)?

> ID：10533900
> 
> 赞同：5
> 
> 时间：2012-05-10T12:22:11.980
> 
> 标签：package, shared-libraries, debian, symlink

I'm trying for the first time to package for Debian a small library. For this, I'm using the official Debian Policy manual but since two days I encounter an issue than I cannot fix.

This is the way I'm packaging :

*   Creating the tarball (here libvl_1.0.orig.tar.gz)
*   Using dh_make to generate the debian conf file in the debian directory
*   Modifying the control file, changelog and copyright properly.
*   Building the package using the dpkg-buildpackage command.

Up to here, there is no problem. But as it is a library, I need to create some symlinks while installing it, this related to the SONAME of the library. Here my library is called libvl. So for example, I'm building a file named libvl.so.1.0 as it is the first version. In order to do it right, I guess I should create symlinks like this :

```
libvl.so -> libvl.so.1 -> libvl.so.1.0 
```

To do this, I'm trying to create those links while running the install process with make. This is working if you launch the 'make install' command. But when installing with dpkg, none if the links are created and I cannot get why. I tried also to use a postinst script but without any results. Here is below my makefile :

```
DESTDIR =
LIBDIR = usr/lib

LIB = libvl.so
MAJOR = 1
MINOR = 0

CC = gcc
CC_FLAGS = -Wall -ansi -Isrc/
LD_FLAGS =
LN = ln -s

SRC = very_long.c

OBJ = $(SRC:.c=.o)

all: libvl

libvl: $(OBJ)
    $(CC) -fPIC -c $(SRC)
    $(CC) -shared -a -o $(LIBDIR)/$(LIB).$(MAJOR).$(MINOR) $(OBJ)

install:
    install -d -m 0755 -o root -g root $(DESTDIR)/$(LIBDIR)
    install -m 0755 -o root -g root $(LIBDIR)/$(LIB).$(MAJOR).$(MINOR) $(DESTDIR)/$(LIBDIR)

    $(LN) /usr/lib/$(LIB).$(MAJOR).$(MINOR) /usr/lib/$(LIB).1
    $(LN) /usr/lib/$(LIB).$(MAJOR) /usr/lib/$(LIB)

clean:
    rm $(OBJ) $(LIBDIR)/$(LIB).1.0 
```

I guess the problem is there. I will appreciate any answer or comment on this :-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T05:45:31.663

见[man dh_link](http://man.he.net/man1/dh_link)

我在 github 上有一个示例要点，它创建`/bin/hello`了一个指向它的符号链接`/bin/helloworld`

你可以像这样在你的系统上演示它：

```
# Create the deb package
curl -O https://gist.github.com/RichardBronosky/5358867/raw/deb-packaging-example.sh
bash deb-packaging-example.sh

# Install the deb package
dpkg --install hello-world*.deb

# Check the scripts
ls -la /bin/hello*
/bin/hello
/bin/helloworld 
```

秘密是由脚本的[第 18 行（在撰写本文时）](https://gist.github.com/RichardBronosky/5358867/8430b077cca41bb704ad62cbec681aacc2cbb4a6#file-deb-packaging-example-sh-L18)`hello-world-0.1/debian/hello-world.links`创建的文件。一探究竟...

[https://gist.github.com/RichardBronosky/5358867](https://gist.github.com/RichardBronosky/5358867)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T09:38:05.453

```
$(LN) /usr/lib/$(LIB).$(MAJOR).$(MINOR) /usr/lib/$(LIB).1
$(LN) /usr/lib/$(LIB).$(MAJOR) /usr/lib/$(LIB) 
```

在上面的代码中，您直接将目标链接到 /usr/lib 中（即在构建机器上），但这样它就不会成为包的一部分。相反，您应该在 DESTDIR 的子目录中进行链接，以便最终将符号链接放入打包的子树中。

# clr - 由于堆栈机器 - 注册机器的差异，混淆的 C# 或 Java 是否比 C 更容易反编译？还是有其他原因？

> ID：10533903
> 
> 赞同：4
> 
> 时间：2012-05-10T12:22:28.330
> 
> 标签：clr, obfuscation, reverse-engineering, decompiling

我已经看到它说通过对框架 api 的调用（如对字符串）的存在简化了混淆 C# 和 Java 的反编译。但是，这对我来说不太有意义，因为 C 程序不应该也对某些标准库有明显的调用，这相当于 C# api？

我还看到它说注册机（将从 C 运行程序集的硬件）和堆栈机（将运行字节码的虚拟机）之间的区别对反编译的复杂性很重要。

那么堆栈/注册机问题是这里的主要问题吗？假设如果 CLR 虚拟机被重新实现为注册机，C# 字节码会突然变得像 C 可执行文件一样难以反编译吗？或者是否还有其他一些主要的复杂性差异在这样的平台大修中不会消失？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T12:31:45.830

堆栈和寄存器机器之间没有区别，从两种表示中解构表达式树相对容易。

.NET 和 JVM 很容易反编译，主要是因为元数据：类型和方法名称等。

使用剥离的本机可执行文件，您将获得所有乐趣：没有有意义的函数名称，没有明确的数据类型，内联代码的加载（然后被进一步优化严重破坏）代码，展开的循环，不可约化的控制流，展开的尾部通话等

在字节码中，大多数此类优化尚未完成（将它们留给 JIT），因此与删除元数据并应用优化相比，它更接近原始源。无论如何，堆栈机器、基于寄存器的、线程化的 Forth 代码或其他任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T12:33:34.750

在用于真实硬件的机器代码中，您并不总是知道代码在内存中的哪个位置开始。由于 x86 指令的长度可变，这会使反汇编程序解码具有错误偏移量的指令。指针算术的可能性也无济于事。在 .NET IL 和 java 操作码中，代码开始和结束的位置总是很清楚，并且不允许任意指针算术。因此，即使生成的汇编代码不易辨认，反汇编也是 100% 准确的。对于真正的机器代码，至少在 x86 上，除非您运行程序，否则您永远不会知道确切的控制流和代码入口点，即使您假设没有代码变形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T09:23:48.743

[从易于逆向工程的角度比较 C++ 和 Java，请阅读我文章](http://www.excelsior-usa.com/articles/java-obfuscators.html)的介绍部分。（您可以阅读“C#”而不是“Java”和“CLR”而不是“JVM”:)）

至于对 C 标准库的调用，如果静态链接它们，二进制文件中将没有库函数名称。此外，C++ 编译器将内联头文件中定义的小方法，更不用说它将对模板做什么......

# android - 调用 Web 服务时出现“缺少 POST 的有效负载”错误

> ID：10533907
> 
> 赞同：0
> 
> 时间：2012-05-10T12:22:39.750
> 
> 标签：android, web-services, http-request

我正在调用 webservice 并不断收到**Missing payload for POST**错误..我不知道代码有什么问题..我已经调用了身份验证 webservice 并接收了 Accesskey ..并将该 accesskey 从我需要的其他 web 服务传递给玩家列表..这是我请求的代码：

```
// defaultHttpClient
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
xml = EntityUtils.toString(httpEntity); 
```

请告诉我我错在哪里......？？？此外，“POST 的负载丢失”错误到底是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:42:27.467

HTTP POST 是[RFC2616](http://www.ietf.org/rfc/rfc2616.txt)定义的超文本传输​​协议的请求方法之一。

你可以参考[`HttpPost`](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)类。

要回答您的问题，您需要了解与 HTTP GET 不同，HTTP POST 要求请求包含提交给服务器的正文或有效负载。查看[如何在 Android 中执行 HTTP POST 请求以](http://www.wikihow.com/Execute-HTTP-POST-Requests-in-Android)获取代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:40:24.023

用这个

```
 HttpClient client = new DefaultHttpClient();  
            String postURL = Constant.REGISTRATION_URL;
            HttpPost post = new HttpPost(postURL); 
    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE); 
```

确保您使用正确或有效的 URL

# nhibernate - NHibernate - 仅选择的最佳实践

> ID：10533910
> 
> 赞同：5
> 
> 时间：2012-05-10T12:22:52.337
> 
> 标签：nhibernate, transactions

A 在我的 MVC 应用程序上执行一个操作，该应用程序具有一个`id`并返回一个人的姓名。

最好的做法是什么？我正在关注 NHProf 的提示，但代码对我来说听起来有点奇怪。

```
using (var session = Helper.SessionFactory.OpenStatelessSession())
{
    using (var tran = session.BeginTransaction(IsolationLevel.ReadCommitted))
    {
        return session.Query<Person>().Where(x => x.Id == id).Select(x => x.Name).SingleOrDefault();
        tran.Rollback();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:12:42.627

The NHProf alert page explains it quite well I think -

[http://nhprof.com/Learn/Alerts/DoNotUseImplicitTransactions](http://nhprof.com/Learn/Alerts/DoNotUseImplicitTransactions)

Basically it's saying if you don't manage transactions yourself, the database will create an "implicit transaction" and auto-commit for *every* statement, including queries. The misconception is that transactions are useful only for insert / update operations.

In your example above, it's not much of an issue as your transaction only executes a single statement anyway. If your method was running several statements however it would be good practice to wrap them in a transaction.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:27:02.687

不要在一个 HTTP 请求上创建多个会话，理想情况下，您需要做的是在请求范围内打开一个会话和相应的事务，并在所有操作中使用此会话。

这是一篇解释如何实现它的博文：http: [//hackingon.net/post/NHibernate-Session-Per-Request-with-ASPNET-MVC.aspx](http://hackingon.net/post/NHibernate-Session-Per-Request-with-ASPNET-MVC.aspx)

我建议使用 IOC 容器并创建一个为您创建会话的类，并将该类的范围限定为请求范围。

网络上有很多资源可以解决这个问题..谷歌它..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:22:35.507

以下是我将如何处理此选择：

```
 using (var session = Helper.SessionFactory.OpenStatelessSession())
    using (var tran = session.BeginTransaction(IsolationLevel.ReadCommitted))
    {
        try
        {
            string personName = session.Query<Person>()
            .Where(x => x.Id == id)
            .Single(x => x.Name);

            tran.Commit();
            return personName;
        }
        catch(Exception ex)
        {
            // handle exception
            tran.Rollback();
        }
    } 
```

这个 SO answer 为处理事务提交提供了很好的建议：

[NHibernate - ITransaction.Commit 真的有必要吗？](https://stackoverflow.com/questions/3029991/nhibernate-is-itransaction-commit-really-necessary)

关于您的 LINQ，这是一篇关于如何不使用扩展方法样式语法处理查询的有趣文章：

[http://compiledexperience.com/blog/posts/how-not-to-use-linq](http://compiledexperience.com/blog/posts/how-not-to-use-linq)

# php - Php，方法范围的问题（对某人公开，对其他人私有，C++ 朋友一样）

> ID：10533913
> 
> 赞同：0
> 
> 时间：2012-05-10T12:22:58.783
> 
> 标签：php, class

两个班：

```
class main()
{
 public function doAjob()
 {
  helperClass::clean();
 }
}

class helperClass()
{
 public function add() { }
 public function remove() { }
 public function clean() { } // **this should be only allowed from main::doAjob() !!!**
} 
```

这些类的用户可以使用 doAjob()、add()、remove() 方法，但不能使用 clean()。这仅允许用于主类。它是 C++ 中的一种朋友。如何躲避它？最好的情况甚至不会通过代码竞赛看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:24:20.653

你不能在 PHP 中做到这一点。没有“朋友”类的概念。如果您希望一个方法可以在类外部访问，它必须是`public`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:14:44.827

好吧，可能还有其他人阅读此内容：将它们公开，您可以`backtrace()`执行调用，并确定调用来自何处。不过，这会使应用程序变得异常缓慢，因此最好添加一种机制来启用/禁用。

# iphone - iOS 5 自定义标签栏图像垂直对齐

> ID：10533917
> 
> 赞同：20
> 
> 时间：2012-05-10T12:23:18.843
> 
> 标签：iphone, ios, ios5

我的自定义标签栏出现了一些奇怪的行为。图像似乎对齐不正确。这是一个截图（我已经删除了我自己的标签栏背景以突出我的问题）：

![截屏](../Images/040500db689646c7493c0bc329194170.png)

这是我用来为每个状态设置图像的代码：

```
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:homeNavController, whatsOnNavController, mapNavController, infoNavController, nil];
self.tabBarController.delegate = self;

// For iOS 5 only - custom tabs
if ([self.tabBarController.tabBar respondsToSelector:@selector(selectedImageTintColor)]) 
{

    // Set the background images
    //[[UITabBar appearance] setBackgroundImage: [UIImage imageNamed:@"nav_bg.png"]];
    [[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"nav_over.png"]];

    [homeNavController.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"nav_home_over"] withFinishedUnselectedImage:[UIImage imageNamed:@"nav_home"]];
    [whatsOnNavController.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"nav_whats_on_over"] withFinishedUnselectedImage:[UIImage imageNamed:@"nav_whats_on"]];
    [mapNavController.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"nav_map_over"] withFinishedUnselectedImage:[UIImage imageNamed:@"nav_map"]];
    [infoNavController.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"nav_info_over"] withFinishedUnselectedImage:[UIImage imageNamed:@"nav_info"]];

} 
```

我所有的替换标签图像的大小都正确（非视网膜版本为 49 像素高和 80 像素宽）。

什么可能导致这种奇怪的行为？

# - - 更新 - -

这是一个带有背景的更新屏幕截图：

![截图 2](../Images/0d98fd79bde65c8dcba338f87936ce86.png)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-28T08:14:24.060

UIBarItem 上有一个属性（UIBarButton 项继承自此类）`imageInsets`。

要使用全高图像（49px）`finishedSelectedImage`，`finishedUnselectedImage`您需要设置这些图像插图：

`tabBarItem.imageInsets = UIEdgeInsetsMake(6, 0, -6, 0);`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-26T21:41:04.040

您现在可以在 Storyboard 中解决此问题。故事板尺寸检查器图像插入调整 ![标签栏项目的故事板大小检查器](../Images/0a8a6760858d1b905db4190f98dbb7ab.png)

选择要调整的 Tab Bar Item，打开 Size Inspector，然后调整 Top 和 Bottom Image Insets。您需要将它们调整为相同的量，否则它们只会挤压/拉伸您的图像（因此顶部为 +5，底部为 -5）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T22:59:52.077

这可能看起来有点骇人听闻，但我相信这是实现您想要的唯一方法：您只需要使用具有透明 11 像素“顶部填充”（视网膜 22 像素）的标签栏完成图像。然后，您的图像必须为 60 像素（120 像素）高。

我的应用程序使用这种技术进入了 App Store，所以你应该可以安全地使用它。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T08:59:27.030

事实证明，您应该始终在 tabitem 中包含文本。该空间是由空白文本创建的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T13:31:19.230

这个 API 的文档记录真的很差。

你`finishedSelectedImage`应该是一个图标〜30x30 px。这只是选项卡的图标部分。如果您创建`finishedSelectedImage`的文件太高，系统将不会将其放在屏幕底部。

从概念上讲，您从 tabBar 的全宽`backgroundImage`49px 高开始，添加一个单选项卡宽度、49px 高`selectionIndicatorImage`作为所选标签的背景图像，然后添加每个标签的两个版本的图标 ~30x30 px，`finishedUnselectedImage`和`finishedSelectedImage`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-10T13:54:06.730

如果您将图像添加为子视图而不是定义了框架，可以帮助您。 [检查这个](https://stackoverflow.com/questions/8709802/custom-tab-bar-background-image-in-ios-4-x)

尝试使用稍小的图像，标签栏会稍微重新定位它们

# iphone - 每次在iPhone中点击按钮时都会更改按钮的背景图像？

> ID：10533921
> 
> 赞同：0
> 
> 时间：2012-05-10T12:23:32.193
> 
> 标签：iphone

我有一个 iPhone 应用程序，我想在每次点击按钮时更改按钮的背景图像，即如果它跟随它，则在点击它时需要取消关注，反之亦然。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:31:40.680

如果您想使用按钮作为切换按钮而不是使用标志（BOOL）变量并根据您的要求进行设置。但是，如果您不止一次设置按钮图像而不是使用它，如下所示。

```
-(IBAction)buttonPress:(id)sender
{ 

   if([sender tag] == 1)
        {
            [yourbutton setBackgroundImage:[UIImage imageNamed:@"1.png"] forState:UIControlStateNormal];
            btnSegment1.tag = 2;// Here i reset tag. you can set tag according your requirements so you can use button next for next click as you want

        }
        else if([sender tag] == 2)
        {
            [yourbutton setBackgroundImage:[UIImage imageNamed:@"3.png"] forState:UIControlStateNormal];
             yourbutton.tag = 3;// Here i reset tag. you can set tag according your requirements so you can use button next for next click as you want

        }
    // and so on.....

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:33:14.640

```
@interface XXX: UIViewController // whatever
{
    BOOL btnImageState;
}

// etc.

@implementation XXX

- (id)init
{
    if ((self = [super init]))
    {
        UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [btn setImage:[UIImage imageNamed:@"follow.png"] forState:UIControlStateNormal];
        [btn setFrame:CGRectMake(x, y, w, h)];
        [btn addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:btn];
    }
    return self;
}

- (void)click:(UIButton *)btn
{
    if (btnImageState)
        [btn setImage:[UIImage imageNamed:@"follow.png"] forState:UIControlStateNormal];
    else
        [btn setImage:[UIImage imageNamed:@"unfollow.png"] forState:UIControlStateNormal];

    btnImageState = !btnImageState;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:30:01.197

在这里，我以编程方式完成了它。希望这会帮助你。

```
-(IBAction) pause:(id)sender
{
UIButton  *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
[button1 addTarget:self 
           action:@selector(aMethod)
 forControlEvents:UIControlEventTouchDown];
UIImage *buttonImage = [UIImage imageNamed:@"buttonImage.png"];
[button1 setBackgroundImage:buttonImage forState:UIControlStateNormal];
button1.frame = CGRectMake(208, 380.0, 60.0, 60.0);
[self.view addSubview:button1];
}
- (IBAction) aMethod
{
button1.hidden=YES;

UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
[button1 addTarget:self 
            action:@selector(pause:)
  forControlEvents:UIControlEventTouchDown];
UIImage *buttonImage = [UIImage imageNamed:@"Button2Image.png"];
[button1 setBackgroundImage:buttonImage forState:UIControlStateNormal];
//[button1 setTitle:nil forState:UIControlStateNormal];
button1.frame = CGRectMake(208, 380.0, 60.0, 60.0);
[self.view addSubview:button1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T12:32:18.603

```
 static int tapCount = 0;
- (IBAction) buttonTapped :(id)sender {
    tapCount++;

    NSString *imageName = [NSString stringWithFormat:@"image%d.png",tapCount];
    [yourButton setImage:[UIImage imageNamed:imageName] forState:UIControlStateNormal];
} 
```

这将取决于您如何加载具有什么名称和图像数量的图像。因此，您可以自定义。

# java - 使用嵌套的 While 语句遍历两个 ArrayList - Java

> ID：10533923
> 
> 赞同：1
> 
> 时间：2012-05-10T12:23:34.397
> 
> 标签：java, arraylist, iterator, while-loop, iteration

我正在尝试遍历两个 ArrayList（称为 sceneObjects 和 animationSceneObjects）并根据名称字段匹配两者。这是我的代码：

```
Iterator<AnimationObject> itr = animationObjects.iterator();
Iterator<SceneObject> itrMain = sceneObjects.iterator();

while (itr.hasNext()) {
            AnimationObject object = itr.next();
            //Remove the word node from the animation object name so it matches main object name.
            String  tmpString = object.animationobjectName.replace("node-", "");
            System.out.println("Animation Object name is" +tmpString);
            while (itrMain.hasNext()) {
                SceneObject objectMain = itrMain.next();
                System.out.println("Scene Object name is" +objectMain.objectName);
                if (tmpString.equals(objectMain.objectName)) {
                    System.out.println("Animation Object matched to main object array" +tmpString);
                    objectMain.animations = object.animationData;
                    objectMain.hasAnimations = true;
                }
            }
        } 
```

问题是代码没有按预期工作 - 它仅将 itr 迭代器中的第一项与 itrMain 迭代器的值进行比较。

谁能发现我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:25:52.633

您必须`itrMain`在每次运行内部循环之前重置，否则 - 一旦您第一次用尽迭代器 - 将永远不会调用内部循环。

您可以通过在到达内部循环之前重新分配它来做到这一点`sceneObjects.iterator()`，或者使用增强[的 for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

```
Iterator<AnimationObject> itr = animationObjects.iterator();

while (itr.hasNext()) {
            Iterator<SceneObject> itrMain = sceneObjects.iterator();
       //    ^
       //   reassigning itrMain each iteration of the outer loop

            AnimationObject object = itr.next();
            //Remove the word node from the animation object name so it matches main object name.
            String  tmpString = object.animationobjectName.replace("node-", "");
            System.out.println("Animation Object name is" +tmpString);
            while (itrMain.hasNext()) {
                SceneObject objectMain = itrMain.next();
                System.out.println("Scene Object name is" +objectMain.objectName);
                if (tmpString.equals(objectMain.objectName)) {
                    System.out.println("Animation Object matched to main object array" +tmpString);
                    objectMain.animations = object.animationData;
                    objectMain.hasAnimations = true;
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:26:05.520

每次都为内部循环使用新的迭代器：

```
Iterator<AnimationObject> itr = animationObjects.iterator();

while (itr.hasNext()) {
    AnimationObject object = itr.next();
    //Remove the word node from the animation object name so it matches main object name.
    String  tmpString = object.animationobjectName.replace("node-", "");
    System.out.println("Animation Object name is" +tmpString);

    Iterator<SceneObject> itrMain = sceneObjects.iterator();

    while (itrMain.hasNext()) {
        SceneObject objectMain = itrMain.next();
        System.out.println("Scene Object name is" +objectMain.objectName);
        if (tmpString.equals(objectMain.objectName)) {
            System.out.println("Animation Object matched to main object array" +tmpString);
            objectMain.animations = object.animationData;
            objectMain.hasAnimations = true;
        }
    }
} 
```

或者（也许更简单）使用两个`for`循环：

```
for (AnimationObject animation : animationObjects) {
    for (SceneObject scenes : sceneObjects) {
        // snip...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:26:25.910

您不会为每个外部循环步骤重新启动内部迭代器。你真正应该做的是使用 for-each 循环。

```
for (AnimationObject ao : animationObjects) {
  ... your outer-loop code ...
  for (SceneObject so : sceneObjects) {
     ... your inner-loop code ...
  }
] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:26:37.763

您必须在第一个循环中声明 itrMain 迭代器。如果你保持相同的迭代器，你的第一次迭代将消耗它。

```
Iterator<AnimationObject> itr = animationObjects.iterator();
while (itr.hasNext()) {
    Iterator<SceneObject> itrMain = sceneObjects.iterator();
    [...] 
```

# java - 将更多源文件夹添加到播放框架项目

> ID：10533928
> 
> 赞同：5
> 
> 时间：2012-05-10T12:23:49.483
> 
> 标签：java, eclipse, playframework, dependency-management, playframework-1.x

如何在一个播放项目中有多个源文件夹？我正在使用 play 1.2.4 和 eclipse 插件。我想要做的是在 play 项目中使用另一个项目（例如普通的 java 项目）的源文件夹。

通过properties->java build path->link source将文件夹添加为源文件夹的正常方法不起作用。那么我必须在哪里添加依赖项来告诉播放我想要什么？我知道如果我想链接一个 jar 文件，我必须将它写在 dependencies.yml 文件中，那么我可以对一个充满普通 java 文件的文件夹做同样的事情吗？

是否可以将第三个源文件夹添加到播放项目中，例如“1\. app 2\. test 3\. mysoucefolder”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:48:52.107

您可以在中创建所需的**包层次结构**`app/`。

例如 ：

```
app/
    controller/
    models/
    views/
    org/
        myproject/
            MyClass.java
conf/
... 
```

`MyClass`可以在您的游戏项目中访问`import org.myproject.MyClass`

如果您尝试处理文件夹层次结构的约束，您可以尝试使用**符号链接**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T04:13:16.270

我认为您可以通过使用来自另一个项目的源文件夹创建一个播放模块来实现这一点。

> 一个正在运行的模块实际上只不过是代码库的一个组织。

您可以在此处阅读有关 Play 模块的更多信息：

> [http://www.playframework.org/documentation/1.2.4/modules](http://www.playframework.org/documentation/1.2.4/modules)
> 
> [http://playframework.wordpress.com/2011/02/27/play-modules/](http://playframework.wordpress.com/2011/02/27/play-modules/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:31:32.107

在 Eclipse 中，项目的属性：Java 构建路径 > 项目“构建路径上的必需项目”> 添加？

# python - python中矩形的颜色

> ID：10533929
> 
> 赞同：4
> 
> 时间：2012-05-10T12:23:50.243
> 
> 标签：python, colors, matplotlib

要在我的绘图中添加一个矩形，我通常使用以下代码：

```
ret=Rectangle((x_l[i]-dx,y_l[i]-dx),width=dx,height=dx,facecolor='red',linestyle='solid')
ax=gca()
ax.add_patch(ret) 
```

但是我想知道是否有可能以不同的方式赋予颜色。我希望我的矩形根据颜色条着色。我会尝试更好地解释它。每个矩形代表一个单元格，在每个单元格中我定义一个标量字段。我的标量场范围从`min_val`到`max_val`。我希望我绘制的每个矩形都是与矩形中标量字段的值相对应的颜色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T13:10:40.770

您可以使用 ColorMap 计算的颜色绘制每个 Rectangle：

```
import matplotlib.colorbar as cbar
import pylab as pl
import numpy as np

N = 50
xs = np.random.randint(0, 100, N)
ys = np.random.randint(0, 100, N)
ws = np.random.randint(10, 20, N)
hs = np.random.randint(10, 20, N)
vs = np.random.randn(N)
normal = pl.Normalize(vs.min(), vs.max())
colors = pl.cm.jet(normal(vs))

ax = pl.subplot(111)
for x,y,w,h,c in zip(xs,ys,ws,hs,colors):
    rect = pl.Rectangle((x,y),w,h,color=c)
    ax.add_patch(rect)

cax, _ = cbar.make_axes(ax) 
cb2 = cbar.ColorbarBase(cax, cmap=pl.cm.jet,norm=normal) 

ax.set_xlim(0,120)
ax.set_ylim(0,120)
pl.show() 
```

[![在此处输入图像描述](../Images/7f31f2e03b744c8e6cb9796ed5474627.png)](https://i.stack.imgur.com/VaVpu.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-31T11:42:45.593

改编HYRY的答案，提供不依赖pylab的解决方案：

```
import matplotlib.pyplot as plt
import matplotlib.patches as patches
import numpy as np
import matplotlib.colorbar as cbar

fig,ax=plt.subplots(1)

rng=6
plt.ylim(0,rng)
plt.xlim(0,rng)

N = 30
x = np.random.rand(N)*rng
y = np.random.rand(N)*rng
colors=np.random.rand(N)
normal = plt.Normalize(0,1) # my numbers from 0-1

cmap=plt.cm.RdYlBu_r
c=cmap(colors)

for i in range(N):
    val=0.5
    rect=patches.Rectangle((x[i],y[i]),0.3,0.3,
                            edgecolor='black',
                            linewidth = 1,
                            facecolor = c[i],
                            ) 
    ax.add_patch(rect)

cax, _ = cbar.make_axes(ax) 
cb2 = cbar.ColorbarBase(cax, cmap=cmap,norm=normal) 

plt.savefig("test.png") 
```

它给出了以下图形：

[![在此处输入图像描述](../Images/3904c22eca44847fea342a2511a46cc1.png)](https://i.stack.imgur.com/0cHFc.png)

# windows - 在 Linux、Windows 上运行 Assembly

> ID：10533932
> 
> 赞同：3
> 
> 时间：2012-05-10T12:24:07.190
> 
> 标签：windows, linux, assembly, masm

我一直在阅读组装。从我对编程语言的理解来看，编译器（汇编器......我知道在其他地方争论的两者之间存在细微的差异），生成目标代码。大量没有指令的不友好的机器语言。该目标代码由处理器解释，然后链接器使其成为可执行文件。我知道每个处理器都必须在其正确的组装中进行交谈。IE。.386, .486, .586 令我困惑的是通过 MASM 运行 DOS 程序和通过没有 NASM 或 GAS 的 Linux 运行相同程序之间的差异。如果源代码编译成目标代码，此时不是跨平台吗？我可以像 Linux 一样简单地从我的戴尔双启动 Windows。我在这里想念什么？

另外我一直在寻找一种查看目标代码的方法，这样我就不必通过 Immunity Debugger 来破译执行。只是我编写的源代码的指令机器代码指令。有没有办法在 Linux 中产生像 objdump 这样的结果？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T12:40:40.193

现代“x86”芯片至少可以理解三种不同的指令集——DOS 使用的 16 位指令集，以及各种 windows 和 linux 使用的 32 位和 64 位指令集。

即使芯片是相同的，并且可能运行在相同的模式下，程序与主机操作系统交互以获取服务（例如输入/输出）的方式是完全不同的。

除了最琐碎的程序外，所有程序都倾向于使用附加目标代码的外部库，这些库为常见操作（字符串操作、格式化输入和输出、数学、非平凡网络等）提供帮助，因此它们不必是从头开始写。但是可用的此类库的精确集合，以及请求和与它们交互的重要方式，因主机操作系统而异。您也许可以将库与您的应用程序一起打包（静态链接），而不是使用已经在系统上的 .DLL/.so （动态链接），但是仍然需要适应请求底层原始操作系统服务的差异.

此外，一些方案（如 java 和 .net）创建在虚拟机或模拟处理器上运行的目标代码，而不是直接在物理处理器上运行。如果虚拟机引擎和支持库以兼容的形式提供，那么它们在某种程度上是可移植的。

objdump 的 mingw 版本在 windows 上运行并处理 windows 可执行文件，并且是用于构建具有类 linux 语义的 windows 程序的工具套件的一部分。它还有一个交叉版本，可以在 linux 上运行并处理 windows 文件。反过来说，WINE 兼容层可以在 linux 上运行许多 Windows 可执行文件——你可以明确地对此进行测试。但是，如果您愿意针对 posix 接口用 C 语言编写（或在带有汇编的 OS 函数上使用大量包装器），您应该能够拥有一个代码库，该代码库可以同时使用 linux 和交叉或 mingw 版本的 gnu 工具构建，这样您可以相对有效地为两个操作系统生成二进制文件。

# java - 使用来自 java 的 DAL 在数据库中插入和更新值

> ID：10533938
> 
> 赞同：1
> 
> 时间：2012-05-10T12:24:25.863
> 
> 标签：java, database, data-access-layer, dao

我是一名了解核心 Java 的开发初学者。所以这个问题对你来说可能有点自私。但我真的需要帮助。我在一个项目中获得了使用 DAL 将源字符串和对应目标字符串插入数据库的任务。我不是要求你为我完成任务但我不知道如何从 DAL 和 DAO 开始。因此，如果有人可以提供 DAL 文件和 DAO 文件的任何示例或任何教程，并从数据库中获取值和更新值，那么这对我来说将是一个很大的帮助。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:44:53.970

尝试谷歌搜索“ [java DAL](http://www.google.com/search?q=java%20DAL&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a) ”和“ [Java DAO](http://www.google.com/search?q=java%20DAO&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a) ”。[Hibernate](http://www.google.com/search?q=java%20DAO&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)也是一个好的开始。只要实现保持简单，我就喜欢 Hibernate。

# java - 如何在 JTextPane 中获取当前的 html 元素（标签）？

> ID：10533940
> 
> 赞同：1
> 
> 时间：2012-05-10T12:24:27.937
> 
> 标签：java, swing, wysiwyg, jtextpane, htmleditorkit

我正在使用 Java 程序在 WYSIWYG Html Editor 上做。我需要当我在段落元素上单击鼠标时，它应该显示

JOption 对话框中的标记。请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:40:16.057

参见例如这一[http://java-sl.com/JEditorPaneStructureTool.html](http://java-sl.com/JEditorPaneStructureTool.html)

简而言之，您可以`HTMLDocument`使用方法获取和获取段落`getParagraphElement()`。使用`viewToModel()`的方法`JEditorPane`获取单击点的脱字符号。

# c# - ServiceController 类不导入 C#

> ID：10533947
> 
> 赞同：2
> 
> 时间：2012-05-10T12:24:43.773
> 
> 标签：c#, windows, windows-services, using

奇怪的事情......这次没有代码，但使用 System.ServiceProcess; import 在导入的 ServiceProcess 部分下有一条红线。

有谁知道为什么？有没有这个类的替代品，所以我仍然可以启动和停止 Windows 服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:26:37.843

添加此程序集作为参考：System.ServiceProcess.dll

在 Visual Studio 中，右键单击引用 -> 添加引用 -> 选择 System.ServiceProcess.dll -> 确定

# android - Android 应用的订阅付款选项

> ID：10533955
> 
> 赞同：3
> 
> 时间：2012-05-10T12:25:15.440
> 
> 标签：android

我有一个网站，提供客户通过 Paypal 每月支付订阅费的服务。

我想编写一个 Android 应用程序，我的客户可以使用它来访问相同的服务，但有以下问题：

1.  如果我将应用程序免费发布到市场，但客户需要在网站上注册付费订阅，那么这将被视为违反市场条款和条件，我将被启动 - 是否正确？

2.  如果我使用付费订阅模式将应用程序发布到市场上，那么我不能将 Paypal 订阅合并到应用程序中，因为我只被允许使用 Google 结帐 - 这是正确的吗？

3.  我无法通过 Google Checkout 使用付费订阅模式将应用发布到市场，因为应用内支付不支持订阅 - 是否正确？

感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:29:04.317

您不必将应用程序放在 Google Play 上。您可以创建应用程序并自己分发。毕竟它只应该由您的客户使用。

# mysql - Mysql在查询中搜索正斜杠/

> ID：10533958
> 
> 赞同：0
> 
> 时间：2012-05-10T12:25:30.027
> 
> 标签：mysql

我正在尝试在表格中执行一个简单的查询，在某个位置搜索 / ，但没有运气。

```
SELECT SUBSTRING(`path`, 40, 40) LIKE '%/%'
FROM files 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:28:03.133

不应该吗？

```
SELECT *
FROM files
WHERE SUBSTRING(`path`, 40, 40) LIKE '%/%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:32:10.350

您可以这样做（前提是，如果您知道 / 将出现的位置）

```
SELECT SUBSTRING(`path`, 40, 40) as slashpath  FROM files 
where SUBSTRING(`path`, 40, 40) LIKE '%/%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:49:54.890

试试这个代码

```
SELECT SUBSTRING(`path`, 40, 40) path  
FROM files 
where substring(`path`, 40,40) like '%/%' 
```

# java - java - 根据url请求调用特定的servlet？

> ID：10533965
> 
> 赞同：0
> 
> 时间：2012-05-10T12:25:46.657
> 
> 标签：java, jsp, tomcat, servlets

我对 JSP、Servlet 和 Tomcat 还是很陌生。如果我将多个域指向服务器的 IP 地址，是否可以根据请求的域以编程方式调用相关的 Servlet？

也许我可以在 web.xml 中做些什么？

抱歉我缺乏知识 - 我才刚刚开始:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:36:06.800

HTTP 主机标头将告诉您客户端请求的域。

通过 Servlet API 获取它的方法是：

```
javax.servlet.http.HttpServletRequest.getHeader("host"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:08:57.370

如果您希望同一个 Web 应用程序响应多个域，您可能会考虑使用调度程序 servlet 或调度程序过滤器。像 Struts 2 和 Spring MVC 这样的框架使用这些概念将请求路由到适当的 servlet。使用调度程序 servlet，您可以使用您想要的任何条件（在您的情况下为主机名）路由到适当的 servlet。

如果您希望让*单独*的 Web 应用程序响应不同的主机名和/或 IP 地址（通常称为虚拟主机），那么您可能需要查看[Tomcat 虚拟主机](http://tomcat.apache.org/tomcat-6.0-doc/virtual-hosting-howto.html)。这通常也可以通过将 Apache 或 IIS 等 Web 服务器放在 Tomcat 前面来处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:30:17.560

使用“RequestDispatcher”将请求重定向到正确的 servlet

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T12:44:51.360

使用类似的东西：

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
 throws IOException {

        // Get client's IP address
        String ipAddress = req.getRemoteAddr(); // ip 

        // Get client's hostname
        String hostname = req.getRemoteHost(); // hostname
    } 
```

# sql-server-2008-r2 - 使用 sql server 2008 r2 创建主数据库服务

> ID：10533970
> 
> 赞同：0
> 
> 时间：2012-05-10T12:25:55.613
> 
> 标签：sql-server-2008-r2, master-data-services

我无法使用 SQL Server 2008 R2 的主数据服务创建数据库，我收到此错误：

```
The specified SQL Server instance do not support master dataservice database the
edition lavel is not supported connecte to another SQL Server instance. 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:27:01.000

您必须使用以下 SQL 2008r2 版本之一...

SQL Server 2008 R2 数据中心 SQL Server 2008 R2 企业版 SQL Server 2008 R2 开发人员

请参阅[此链接](http://msdn.microsoft.com/en-us/library/ee633742%28v=sql.105%29.aspx)。

# c# - 哪些 .NET 4.5（或更早版本）更高级别的构造使线程更容易？

> ID：10533971
> 
> 赞同：12
> 
> 时间：2012-05-10T12:26:01.337
> 
> 标签：c#, .net, multithreading, .net-4.0, .net-4.5

委托是使 .NET[引用](https://stackoverflow.com/q/1464922/328397)中的线程更容易的一些对象。它们可用于异步调用方法。框架 4.5（或更早版本）中还有哪些其他对象可以使线程的使用更容易或更不容易出错？

还有哪些其他抽象使并发和多线程更容易？

注意：这个问题更新[了这个](https://stackoverflow.com/q/1751054/328397)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T18:35:28.307

我倾向于回答很多与多线程相关的问题，而且我经常看到以各种不同方式提出的相同基本问题。我将介绍多年来我看到的最常见的问题，并解释新技术如何使解决这些问题变得更容易。

**关闭循环变量**

这不是线程特有的问题，但使用线程肯定会放大问题。`foreach`C# 5.0通过为每次迭代创建一个新变量来解决循环的这个问题。您将不再需要为 lambda 表达式闭包创建特殊变量。不幸的是，`for`循环仍然需要使用特殊的捕获变量来处理。

**等待异步任务完成**

.NET 4.0 引入了一个`CountdownEvent`类，它封装了等待许多任务完成所需的大量逻辑。大多数初级开发人员使用`Thread.Join`调用或单个`WaitHandle.WaitAll`调用。这两者都存在可扩展性问题。旧模式是使用一个单一的`ManualResetEvent`并在计数器达到零时发出信号。使用`Interlocked`该类更新了计数器。`CountdownEvent`使这种模式更容易。只需记住将您的 main 也视为工作人员，以避免如果一名工作人员在所有工作人员排队之前完成，可能发生的微妙竞争条件。

.NET 4.0 还引入了`Task`可以通过`TaskCreationOptions.AttachedToParent`. 如果您调用`Task.Wait`父母，它也会等待所有子任务完成。

**生产者-消费者**

.NET 4.0 引入了`BlockingCollection`类似于普通队列的类，除了它可以在集合为空时阻塞。您可以通过调用对对象进行排队，`Add`并通过调用将对象出列`Take`。`Take`阻塞，直到一个项目可用。这大大简化了生产者-消费者逻辑。过去，开发人员试图编写自己的阻塞队列类。但是，如果你不知道自己在做什么，那么你真的可以把它搞砸……糟糕。事实上，很长一段时间以来，微软在 MSDN 文档中都有一个阻塞队列示例，该示例本身就被严重破坏了。幸运的是，它已被删除。

**使用工作线程进度更新 UI**

`BackgroundWorker`对于新手开发人员来说，从 WinForm 应用程序中分离后台任务的引入变得更加容易。主要好处是您可以`ReportProgress`从`DoWork`事件处理程序中调用，并且`ProgressChanged`事件处理程序将自动编组到 UI 线程。当然，任何在 SO 上跟踪我的答案的人都知道我对编组操作（通过`Invoke`等）作为使用简单进度信息更新 UI 的解决方案的感受。我一直在嘲笑它，因为它通常是一种糟糕的方法。`BackgroundWorker`仍然迫使开发人员进入推送模型（通过后台的编组操作），但至少它在幕后完成了所有这些工作。

**Invoke 的不优雅**

我们都知道一个 UI 元素只能从 UI 线程访问。这通常意味着开发人员必须通过 、 或 使用编组操作`ISynchronizeInvoke`，`DispatcherObject`或者`SynchronizationContext`将控制权转移回 UI 线程。但是让我们面对它。这些编组操作看起来很难看。`Task.ContinueWith`使它更优雅一点，但真正的荣耀`await`属于 C# 5 的新异步编程模型的一部分。`await`可用于等待 a`Task`完成，即流控制在任务运行时暂时中断，然后在正确的同步上下文中的那个位置返回。没有什么比`await`用作所有这些`Invoke`调用的替代品更优雅和令人满意的了。

**并行编程**

我经常看到一些问题，询问事情如何并行发生。旧方法是创建几个线程或使用`ThreadPool`. .NET 4.0 使用了 TPL 和 PLINQ。该类`Parallel`是使循环的迭代并行进行的好方法。对于普通的旧 LINQ ，PLINQ`AsParallel`是同一枚硬币的另一面。这些新的 TPL 特性极大地简化了这类多线程编程。

.NET 4.5 引入了 TPL 数据流库。它旨在使原本复杂的并行编程问题变得优雅。它将类抽象为块。它们可以是目标块或源块。数据可以从一个块流向另一个块。有许多不同的块，包括`BufferBlock<T>`、`BroadcastBlock<T>`、`ActionBlock<T>`等，它们都做不同的事情。而且，当然，整个库将针对使用 new`async`和`await`关键字进行优化。这是一组令人兴奋的新课程，我认为它会慢慢流行起来。

**优雅终止**

你如何让线程停止？我经常看到这个问题。最简单的方法是打电话`Thread.Abort`，但我们都知道这样做的危险......我希望。有许多不同的方法可以安全地做到这一点。`CancellationToken`.NET 4.0 引入了一个更统一的概念，称为通过和取消`CancellationTokenSource`。后台任务可以轮询`IsCancellationRequested`或只是`ThrowIfCancellationRequested`在安全点调用以优雅地中断他们正在做的任何工作。其他线程可以调用`Cancel`以请求取消。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T14:37:06.563

好吧，让我们在这里看看：

1.  该类`ThreadPool`- 有点旧，但对于简单的生产者 - 消费者模式仍然可靠。
2.  `BackgoundWorker`(.NET 2.0+) - 另一个老式结构，为在 GUI 应用程序的后台执行任务提供有用的功能。
3.  `Timer`s - 用于使用后台线程以指定的时间间隔执行代码。
4.  该类`Task`(.NET 4.0+) - 在底层线程池上运行的线程抽象，并提供许多有用的功能，如异常封送处理和调度。对于所谓的“任务并行”模式很有用。
5.  `Parallel.For`, `Parallel.ForEach`(.NET 4.0+) - 适合对一组数据并行执行相同的操作。对于所谓的“数据并行”模式很有用。
6.  `Parallel.Invoke`(.NET 4.0+) - 对`Task`s 的进一步抽象。只需并行触发几段代码（方法、lambda）。
7.  并发集合 (.NET 4.0+) - 以高效和线程安全的方式在线程之间传递或共享数据所需的一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:40:00.880

毫无疑问，掌握新的[Tpl DataFlow](http://msdn.microsoft.com/en-us/library/hh228603%28v=vs.110%29)库（包含在 .net 4.5 中）将为您在并发开发方面提供最大的推动力。

如果您认真对待高并发应用程序，请花一两天时间熟悉 DataFlow。真的很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T12:35:12.303

`Task`和`Task<T>`，但它们从 .NET 4 开始就一直存在。不一定`async`适用于线程，请参阅[Øredev](http://vimeo.com/37913054)的 Jon 的视频以获得很好的解释。

# sql-server - 如何根据db中表的设置知道SQL查询是否有效？

> ID：10533976
> 
> 赞同：1
> 
> 时间：2012-05-10T12:26:15.143
> 
> 标签：sql-server, sql-server-2008, sqlperformance

有什么方法可以检查我的 sql 查询是否处于最佳状态？我正在使用 sql server 2008。例如，我想知道我的查询是否达到了预期的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:30:25.923

使用执行计划来分析您的查询。有关更多信息，请参阅本教程： [http ://www.simple-talk.com/sql/performance/execution-plan-basics/](http://www.simple-talk.com/sql/performance/execution-plan-basics/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:57:02.150

虽然小伙子们已经建议分析执行计划（这是正确的！），但还有另一种方法对不熟悉执行计划的人更友好，在 MSSMS 中，突出显示您的查询并右键单击选择并点击“分析” Query in Database Tuning Advisor” - 耐心等待顾问打开和数据库选择选项卡打开，一旦打开，选择与您的查询交互的数据库，然后单击“开始分析”。

这将对所有表、连接等进行粗略检查，它将分析执行计划并告诉您哪些索引“可能”有助于加快查询速度（即避免表扫描）。

不要盲目地接受它的建议，首先备份您的数据库，运行分析器 - 应用建议，如果您的查询执行得更好，则进行基准测试 - 冲洗并重复。

例如，如果您的查询正在读取大型表，您可能会发现优化顾问建议创建一个索引，这将花费您大量的磁盘空间但只会获得较小的速度提升——这是您必须提出的问题“这值得么？” – 这就是为什么尝试分析器的建议通常是一个好主意！

在测试之间，请确保清除缓存以确保获得准确的结果：

```
DBCC FREEPROCCACHE; 
DBCC DROPCLEANBUFFERS; 
```

此外，为了更准确的基准测试，使用`SET STATISTICS TIME ON;`- 不要依赖 MSSMS 中的计数器 - 它有时会滞后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T12:28:44.333

是的，包括“实际执行计划”。它位于 SQL Management Studio 的查询菜单中。执行计划将显示查询使用哪种连接和索引。

# python - 在 Python 中使用元数据标记任意值

> ID：10533978
> 
> 赞同：1
> 
> 时间：2012-05-10T12:26:20.807
> 
> 标签：python

我设计了一个邪恶的方案，通过以下方式通过继承向 Python 对象添加标签：

```
def tag(val, tag_cls):
    val_cls = type(val)
    class tagged_cls(val_cls, tag_cls):
        pass
    tagged_cls.__name__ = '{}({})'.format(tag_cls.__name__, val_cls.__name__)
    return tagged_cls(val)

# Example tags
class Foo: pass
class Bar: pass

def foo(val): return tag(val, Foo)
def bar(val): return tag(val, Bar) 
```

所以我可以用这些包装值，它们在比较时会表现得与原始值完全一样，但会有额外的信息。

```
>>> k = foo('key')
>>> k
'key'
>>> k == 'key'
True
>>> {'key': 'value'}[k]
'value'
>>> isinstance(k, Foo)
True
>>> isinstance(k, Bar)
False 
```

上面的工作，但我觉得这有点太聪明了，*肯定*有一种更 Pythonic 的方式来做到这一点。

有更好的办法吗？上述方法有什么问题吗？

# windows-phone-7 - 改变网格的不透明度会产生“淡入”效果？

> ID：10533980
> 
> 赞同：0
> 
> 时间：2012-05-10T12:26:32.180
> 
> 标签：windows-phone-7, animation, opacity

我在创建网格淡入效果时遇到了一些问题。

我想要点击后出现一个网格，这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:13:23.843

参加聚会有点晚了，因为我刚刚写的和 Hermit Dave 差不多，但也许它有助于更​​好地理解：

另一种方法是，在 XAML 视图中设置 Storyboard 项目，在我看来，这使它比纯 C# 代码更简洁。为此，您可以在`<Grid.Resources>`情节提要中声明，如下所示：

```
<!-- Animates the a control's height. -->
<Grid.Resources>
    <Storyboard x:Name="Animation_Collapse">
        <DoubleAnimation Storyboard.TargetName="Name_Of_Control"
                             Storyboard.TargetProperty="Height"
                             From="200" To="0" Duration="0:0:0.3" />
    </Storyboard>
    <Storyboard x:Name="Animation_Expand">
        <DoubleAnimation Storyboard.TargetName="Name_Of_Control"
                             Storyboard.TargetProperty="Height"
                             From="0" To="200" Duration="0:0:0.3" />
    </Storyboard>
</Grid.Resources> 
```

在这里，您声明了 2 个动画，用于折叠和展开目标控件。您还可以设置很多属性，例如开始和目标值（从、到）和持续时间（这里需要 300 毫秒）。

在您的 .cs 文件中，您只需调用方法即可执行此操作

```
Animation_Collapse.Begin();
or Animation_Expand.Begin(); 
```

例如，只需将其放入您的 button_click 事件处理程序中。故事板位于 System.Windows.Media.Animation 命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:44:22.017

您可以使用 Storyboard 并为 Opacity 属性设置动画以产生淡入效果，以下线程涵盖了所需的代码：-

[http://social.msdn.microsoft.com/Forums/is/windowsphone7series/thread/a8e05145-364d-412c-8fb5-faf65e80344e](http://social.msdn.microsoft.com/Forums/is/windowsphone7series/thread/a8e05145-364d-412c-8fb5-faf65e80344e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:55:40.590

与保罗相同的答案，但我在一个项目中打开它：P 花了我一段时间来理解故事板给你一个样本

```
<Storyboard x:Name="fadeText">
    <DoubleAnimation Storyboard.TargetName="tbData"
        Storyboard.TargetProperty="Opacity" From="1.0"
        To="0" Duration="0:0:1" AutoReverse="True" />

    <DoubleAnimation Storyboard.TargetName="btnReset"
        Storyboard.TargetProperty="Opacity" From="1.0"
        To="0" Duration="0:0:1" AutoReverse="True" />
</Storyboard> 
```

# javascript - 如何实现像重力这样的东西到 div 所以当我将 div 拖动到靠近它们时，距离 = 0？

> ID：10533985
> 
> 赞同：0
> 
> 时间：2012-05-10T12:26:46.657
> 
> 标签：javascript, jquery

我在一个更大的 div 中有两个 div，比如

```
<div id='container'>
    <div class='demo'></div>
    <div class='demo'></div>
</div> 
```

和

```
$('.demo')
 .resizable()
 .draggable()
 .droppable(); 
```

我可以在调整大小和拖动后获取 .demo div 的坐标和大小。我的问题是如何实现对那个 div 的重力之类的东西，所以当我将 .demo div 拖到另一个 .demo div 附近时（例如，当它们之间的距离小于 5px 时）以粘合它们，距离 =0 ？在生产中，我将有很多带有 class='.demo' 的 div，因此手动计算它很繁重。有人对此有解决方案吗？有人使用 jPhysics 插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:30:39.697

当然，这只是触发 drop 事件循环遍历所有坐标的情况，如果一个框的右侧在另一个框的左侧 10px 范围内，则将第二个框移动到位，然后重复垂直测量。

我无法想象这太复杂了。

# wix - Wix 错误 1920 - 使用较低版本更新时，安装程 序会在错误时删除已安装的版本，而不是将其回滚

> ID：10533992
> 
> 赞同：0
> 
> 时间：2012-05-10T12:27:16.500
> 
> 标签：wix, wix3.5, wix3

我有两个版本的设置，比如 v1 和 v2。它们都使用相同的特权运行，并且它们都安装并启动服务 - 这也是相同的。

当我先安装 v1 然后安装 v2 时，一切正常。安装程序会提示停止更新前已经运行的服务，然后继续。

当我先安装 v2 然后尝试运行 v1 时会出现问题。安装程序发现该产品之前已安装，然后提示停止之前运行的服务。

它设法停止这些服务，然后尝试再次安装它。尝试启动服务时失败，日志中显示以下消息：

“错误 1920。服务‘服务名称’(serviceName) 无法启动。验证您是否有足够的权限来启动系统服务。”

错误对话框还提供了重试和取消设置的选项。重试时同样的事情再次发生。

在取消设置进入回滚模式，但它实际上并没有恢复以前的版本，即 v2。相反，它只是删除了 v2。它应该恢复原始设置还是进行降级？

# jquery - 如何为 Twitter Bootstrap 分页设置页面内容

> ID：10533993
> 
> 赞同：5
> 
> 时间：2012-05-10T12:27:26.907
> 
> 标签：jquery, jquery-plugins, pagination, twitter-bootstrap

我正在为客户端更改 Web 应用程序以使用 Twitter Bootstrap 而不是 YUI，并且有一个与 Bootstrap 分页有关的问题。我在这里查看了分页文档：

[http://cssdeck.com/item/271/twitter-bootstrap-pagination-and-pager](http://cssdeck.com/item/271/twitter-bootstrap-pagination-and-pager)

但这似乎只显示了如何创建分页标题，而不是如何为各个页面设置实际页面内容。有没有人有一个使用 Twitter Bootstrap 的更完整的分页示例的链接？

我实际上希望有一个 jquery 插件，它允许我加载 div 中的所有内容页面，然后为找到的页面数自动生成分页标题。Bootstrap分页不这样做吗？如果没有，是否有人知道基于 Bootstrap 的插件可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:18:55.740

我认为您应该尝试 Jquery DataTables [http://datatables.net/blog/Twitter_Bootstrap](http://datatables.net/blog/Twitter_Bootstrap)。

现场演示：[http ://datatables.net/media/blog/bootstrap/](http://datatables.net/media/blog/bootstrap/)

## 更新的答案

Jquery Datatable - Bootstrap 3（带分页）

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <title>DataTables Bootstrap 3 example</title>

    <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="dataTables.bootstrap.css">

    <script type="text/javascript" language="javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" language="javascript" src="http://cdn.datatables.net/1.10-dev/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" language="javascript" src="dataTables.bootstrap.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            $('#example').dataTable();

        } );
    </script>
</head>

<body>
<div class="container">

 <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
<thead>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</thead>
<tbody>
    <tr class="odd gradeX">
        <td>Trident</td>
        <td>Internet
             Explorer 4.0</td>
        <td>Win 95+</td>
        <td class="center"> 4</td>
        <td class="center">X</td>
    </tr>
    <tr class="even gradeC">
        <td>Trident</td>
        <td>Internet
             Explorer 5.0</td>
        <td>Win 95+</td>
        <td class="center">5</td>
        <td class="center">C</td>
    </tr>
    <tr class="odd gradeA">
        <td>Trident</td>
        <td>Internet
             Explorer 5.5</td>
        <td>Win 95+</td>
        <td class="center">5.5</td>
        <td class="center">A</td>
    </tr>
    <tr class="even gradeA">
        <td>Trident</td>
        <td>Internet
             Explorer 6</td>
        <td>Win 98+</td>
        <td class="center">6</td>
        <td class="center">A</td>
    </tr>
    <tr class="odd gradeA">
        <td>Trident</td>
        <td>Internet Explorer 7</td>
        <td>Win XP SP2+</td>
        <td class="center">7</td>
        <td class="center">A</td>
    </tr>
    <tr class="even gradeA">
        <td>Trident</td>
        <td>AOL browser (AOL desktop)</td>
        <td>Win XP</td>
        <td class="center">6</td>
        <td class="center">A</td>
    </tr>

  </tbody>
  </table>

 </div>

 </body>
 </html> 
```

您可以从这里下载文件：[https ://copy.com/ViElPNKAUNCR](https://copy.com/ViElPNKAUNCR)

# android - 肥皂网络服务查询

> ID：10533995
> 
> 赞同：0
> 
> 时间：2012-05-10T12:27:30.573
> 
> 标签：android, web-services

我正在尝试一个简单的肥皂网络服务示例。我添加了 ksoap2 jar 文件，但我仍然收到“无法解析导入 org.ksoap2.serialization.SoapObject”....请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:41:43.323

您将任何 Jar 文件添加到您的项目中，如下所示：

1.  打开项目的属性（右键单击）
2.  选择“Java 构建路径”
3.  选择“库”选项卡
4.  单击“添加外部 Jar”按钮
5.  查找并选择 *.jar 文件。

下载[ksoap2-android-assembly-2.6.4-jar-with-dependencies.jar](http://code.google.com/p/ksoap2-android/source/browse/#svn/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/2.6.4)

[这里](http://ksoap2-android.googlecode.com/svn/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/2.6.4/ksoap2-android-assembly-2.6.4-jar-with-dependencies.jar)有一个直接链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:34:38.480

首先，只需创建一个文件夹 libs。

复制并粘贴 .jar 文件。

转到属性--> Java 构建路径--> 库。这里只需从 yourproject/lib 导入，然后按 OK。

# iphone - 将数据保留一段时间（如 4-5 天）的最佳方式

> ID：10533997
> 
> 赞同：0
> 
> 时间：2012-05-10T12:27:45.457
> 
> 标签：iphone, .net, ios, serialization, xamarin.ios

平台是 monotouch 我为 iphone 开发了一个应用程序。我有一门叫做 Globals 的课。“Globals”对象收集来自 UI 的条目和游戏期间的计算。

我计划序列化对象并将其流式传输到 txt 文件。并在游戏再次启动时恢复。（请记住，我只创建由用户终止的程序的序列化文件）

从用户终止程序的那一刻起，我使用反序列化对象继续。

这条路好吗？这是最佳做法吗？或者我需要使用其他方式来一直保存游戏信息。请为此目的发表评论或建议最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:36:41.260

你真的应该尝试使用 CoreData 并从你的 Globals 对象中创建一个实体。使用 Core Data 将为您打开更多功能（例如 iCloud 同步），但您也可以在对象更改时对其进行更新。如果您不保存并且仅在应用程序终止时保存，那么您将承担丢失用户更改的风险，例如如果出现异常终止（例如崩溃）。看看核心数据。网上有很多简单的教程。这是一个：[http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:56:52.280

根据数据的大小，序列化和反序列化可能会有点慢，因为一次获取​​整个数据。这可能适用于小数据，但本机方法如 coredata、plist、sqlite 或 NSUserDefaults 会更可接受。CoreData 和 sqlite甚至可以用于大数据。

[Sqlite 教程](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)

[核心数据教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

[NSUserdefaults 教程](http://www.icodeblog.com/2008/10/03/iphone-programming-tutorial-savingretrieving-data-using-nsuserdefaults/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T16:32:26.570

如果您走 SQLite 路线，请查看 SQLite.Net，它将保存您现有的对象并加载它们几乎没有任何代码。

[https://github.com/praeclarum/sqlite-net#readme](https://github.com/praeclarum/sqlite-net#readme)

这是一个例子：

```
// Add some extra atributes as needed to your existing class.
public class Stock
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }
    [MaxLength(8)]
    public string Symbol { get; set; }
} 
```

创建一个 SQLite 数据库连接并确保 Stock 类的表存在。

```
var db = new SQLiteConnection("foofoo");
db.CreateTable<Stock>(); 
```

将一个 Stock 实例添加到数据库中......例如......保存它！

```
public static void AddStock(SQLiteConnection db, string symbol) {
    var s = db.Insert(new Stock() {
        Symbol = symbol
    });
    Console.WriteLine("{0} == {1}", s.Symbol, s.Id);
} 
```

从 DB 取回一个或多个 Stock(s)....

```
public static IEnumerable<Stock> QueryValuations (SQLiteConnection db, int stock)
{
    return db.Query<Stock> ("select * from Stock where StockId = ?", Id);
} 
```

# asp.net-mvc-3 - 在哪里拦截用户认证

> ID：10533998
> 
> 赞同：1
> 
> 时间：2012-05-10T12:27:47.140
> 
> 标签：asp.net-mvc-3, windows-authentication

行。在我的 ASP.NET MVC 应用程序中，我使用的是`Windows Authentication`. 我想`layouts`为用户组使用不同的主题 ( )。所以我的问题是我在哪里/如何`intercept user authentication`为给定的组应用主题。

我应该在内部处理它`default route/action`（并检查请求是否经过身份验证？）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:35:17.010

我们通过创建多个布局来使用类似的设置，每个角色一个布局。

例如，假设您有一个会计角色，因此您创建一个布局页面，该页面引用该`Accounting.css`文件和该角色的任何特殊 .js 文件

在该布局的顶部使用这个

```
@{
    Layout = null;
} 
```

在您的`_ViewStart.cshtml`部分视图中，请输入以下内容：

```
@{
    if (User.IsInRole("Admin")) {
        Layout = "~/Views/Shared/_AdminLayout.cshtml";
    }
    else if(User.IsInRole("Accounting")) {
        Layout = "~/Views/Shared/_AccountingLayout.cshtml";
    }
    else if(User.IsInRole("HR")) {
        Layout = "~/Views/Shared/_HRLayout.cshtml";
    }
    else {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
} 
```

我将管理员角色放在首位，因为管理员通常也可以访问所有其他角色，也就是说，在我的情况下，管理员使用也属于所有其他角色。因此，将其设置在顶部将立即过滤掉所有不是管理员的用户并检查他们的特定角色，并且任何管理员都可以快速获得管理员布局